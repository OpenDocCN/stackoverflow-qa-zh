# StackOverflow 问答 11004000-11004999

# c# - RIA 服务部分类问题

> ID：11004003
> 
> 赞同：0
> 
> 时间：2012-06-12T20:05:30.717
> 
> 标签：c#, silverlight, mvvm, wcf-ria-services

在 RIA 服务中，我为实体定义了一些部分类。（它在 *.shared.cs 下）

这个部分类有一些没有实体的新字段。

我有一种**方法来填充实体的那些字段，包括额外的部分类字段。**

当我调试 RIA 服务方法时，我可以看到所有部分类字段都填充得很好。所以它们不是空的。

当我在 Silverlight 代码 (MVVM) 中从 RIA 服务获得回调时，我可以看到所有字段：

1.  基本实体字段。
2.  额外的部分类字段。

**！！！但是部分类字段是 NULL ！！！**

我在那里缺少什么？有什么线索吗？

谢谢！

![在此处输入图像描述](../Images/a4dd4b159993192124d1792dc0b406b0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:57:54.453

请向部分类属性添加 [DataMemberAttribute()] 属性（System.Runtime.Serialization 命名空间）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:29:45.613

最后我找到了其他方法来实现我需要的东西：

我刚刚创建了一个 SQL Server 视图，就是这样！:)

所以我推荐使用这种方法。

# jquery - 使用 $.ajax 调用中断链接的自定义插件

> ID：11004012
> 
> 赞同：0
> 
> 时间：2012-06-12T20:06:07.333
> 
> 标签：jquery, jquery-plugins, jquery-chaining

我创建了一个 jQuery 插件，用于在页面上创建带有从 web 服务调用中读取的 xml 的 html。作为备份，如果 web 服务调用失败，则默认 xml 存储在 var 中以用于构建 html。现在，我无法使用 Web 服务，所以我只能使用虚拟 xml 测试失败场景。我已经编写了所有内容并使用了 $.ajax 调用，当我在我的代码中包含对 web 服务的 $.ajax 调用时，它仍然可以正常工作，但是链接被破坏了。

我知道要“返回这个；”，并且我已经实现了 $.when().then() 包装我的 $.ajax 调用来处理 ajax 调用的异步性质可能引入的任何问题，但链接仍然存在不行。萤火虫控制台总是告诉我，当它到达链中的下一个方法时，我的方法返回是未定义的，这让我相信我实际上根本没有返回“this”，即使它看起来像我一样。我的代码如下（用伪代码替换了很多以节省时间）：

```
(function( $ ) {

$.fn.createHtmlFromWS = function( options ) {

    var $this = $(this);

    //function to output the parsed xml as HTML appended to the jQuery object the plugin was called on
    function buildNav(dispXml){

        //logic to append xml to $this as custom html goes here

        return $this;
    }

    //fallback xml if webservice call fails
    var failXml = '<?xml version="1.0" encoding="utf-8"?><hello><world>earth</world></hello>';

    //dummy service url to force webservice fail scenario
    var serviceUrl = 'http://1234lkjasdf/test';

    //Note: this call that does not attempt $.ajax call to webservice WORKS with chaining
    //return buildNav($.parseXML(failXml));

    //call to webservice
    $.when($.ajax({
        type: 'GET',
        dataType: 'xml',
        url: serviceUrl,
        timeout: 10,
    })).then(function(a1) { //function to call if succeeded
        return buildNav($.parseXML(a1[2].responseXml));
    }, function(){ //function to call if failed
        console.log("in the error part of then"); //Note: this is output to log, I know i'm in the right spot

        //This line does not seem to be returning $then which is required for chaining, although it is building the html as expected
        return buildNav($.parseXML(failXml)); 
    }); 
};
}) ( jQuery ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:13:21.870

这是因为您是从回调函数返回的，而不是函数本身。当您的 AJAX 请求完成时，您的原始函数早已返回`undefined`。

就在您的 AJAX 调用之后，就在函数结束之前，您可能想要`return $this;`

# spring - 在 Eclipse/STS 中重新加载 JSP 更改

> ID：11004017
> 
> 赞同：2
> 
> 时间：2012-06-12T20:06:27.863
> 
> 标签：spring, google-app-engine, apache-tiles

我刚刚进入 GAE 并且正在使用 STS（Eclipse 的衍生产品）。我目前正在建立一个项目以在 GAE 下使用 Spring 和 Apache Tiles。我已经正确配置了它，并且似乎可以正常工作。我最大的问题是弄清楚其他人如何在这种环境中处理日常开发。

我对前端 JSP 进行了大量更改，但到目前为止，我似乎每次对 JSP 进行小的更改时都必须停止 GAE 服务器并重新启动它。当我对控制器进行更改时必须重新启动很好，但是为了简单的 JSP 更改而必须重新启动它让我发疯了。

有没有办法让 GAE 环境在 Eclipse/STS 中重新加载 JSP 更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:03:37.153

我将 Maven 用于 AppEngine 项目，因此每当我构建项目时，都会生成/更新一个项目目标目录，服务器将从该目录加载文件。当我尝试更新我的 jsp/css/js 文件时，我总是在该目录中打开该文件并在那里进行更新。一旦我对它感到满意，我会将更改复制到我的源文件中。

本质上，我认为对你来说，你可以找出你的目标目录在哪里，并尝试从那里编辑你的文件。

我不确定我的解决方法是否适合您，但也许您可以在这里获得一两个。

除此之外，还有人使用 JRebel，这是一个热部署工具。那里有 JRebel 的 AppEngine 版本，但我怀疑它不是免费的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T23:25:08.047

我建议看看[JRebel](http://zeroturnaround.com/jrebel)。就算是商业软件，这样的开发也会为你省去不少神经

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-21T12:43:40.143

您需要设置参数：

```
server.jsp-servlet.init-parameters.development=true 
```

`application.properties`（如果你用的话，把它放进去`spring boot`）

# r - 如何通过调用名称空间中没有它的函数来找到未附加包中的非导入方法？

> ID：11004018
> 
> 赞同：30
> 
> 时间：2012-06-12T20:06:36.363
> 
> 标签：r, namespaces, scoping

R 命名空间充当其关联包中所有函数的直接环境。换句话说，当**foo**`bar()`包中的函数调用另一个函数时，R 求值器首先在 中搜索另一个函数，然后在键入返回的搜索列表中搜索、、等等。**`<environment: namespace:foo>``"imports.foo"``<environment: namespace:base>``<environment: R_GlobalEnv>``search()`**

 **命名空间的一个很好的方面是它们可以使包表现得像更好的公民：未导出的函数 in`<environment: namespace:foo>`和函数 in`imports:foo`仅可用： (a) 对**foo**中的函数；(b) 从**foo**导入的其他包；或 (c) 通过完全限定的函数调用，如`foo:::bar()`.

或者直到最近我还以为...

## 行为

[这个最近的 SO question](https://stackoverflow.com/questions/10939516/data-frame-transformation-gives-different-results-when-same-code-is-run-before-a/10940237#10940237)强调了一个案例，在该案例中，一个隐藏在其包命名空间中的函数仍然通过调用看似不相关的函数找到：

```
group <- c("C","F","D","B","A","E")
num <- c(12,11,7,7,2,1)
data <- data.frame(group,num)

## Evaluated **before** attaching 'gmodels' package
T1 <- transform(data, group = reorder(group,-num))

## Evaluated **after** attaching 'gmodels
library(gmodels)
T2 <- transform(data, group = reorder(group,-num))

identical(T1, T2) 
# [1] FALSE 
```

## 其直接原因

@Andrie 回答了最初的问题，指出**gmodels**从包**gdata**导入，其中包括一个函数，该函数`reorder.factor`在第二次调用`transform()`. `T1`不同，`T2`因为第一个由 计算，`stats:::reorder.default()`第二个由计算`gdata:::reorder.factor()`。

## 我的问题

在上面的调用中`transform(data, group=reorder(...))`，调度机制是如何`reorder`找到然后调度到的`gdata:::reorder.factor()`？

（答案应包括对范围规则的解释，这些规则从涉及**stats**和**基本包中的函数的调用到****gdata**中看似隐藏良好的方法。）

* * *

## 更多可能有用的细节

1.  Neither `gdata:::reorder.factor`, nor the **gdata** package as a whole are explicitly imported by **gmodels**. Here are the `import*` directives in **gmodels**' **NAMESPACE** file:

    ```
    importFrom(MASS, ginv)
    importFrom(gdata, frameApply)
    importFrom(gdata, nobs) 
    ```

2.  There are no methods for `reorder()` or `transform()` in `<environment: namespace:gmodels>`, nor in `"imports:gmodels"`:

    ```
    ls(getNamespace("gmodels"))
    ls(parent.env(getNamespace("gmodels"))) 
    ```

3.  Detaching **gmodels** does not revert `reorder()`'s behavior: `gdata:::reorder.factor()` still gets dispatched:

    ```
    detach("package:gmodels")
    T3 <- transform(data, group=reorder(group,-num))
    identical(T3, T2)
    # [1] TRUE 
    ```

4.  `reorder.factor()` is not stored in the list of S3 methods in the base environment:

    ```
    grep("reorder", ls(.__S3MethodsTable__.))
    # integer(0) 
    ```

R chat threads from the last couple of days include some additional ideas. Thanks to Andrie, Brian Diggs, and Gavin Simpson who (with others) should feel free to edit or add possibly impt. details to this question.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-12T22:38:49.590

I'm not sure if I correctly understand your question, but the main point is that `group` is character vector while `data$group` is factor.

After attaching `gmodels`, the call for `reorder(factor)` calls `gdata:::reorder.factor`. so, `reorder(factor(group))` calls it.

In `transform`, the function is evaluated within the environment of the first argument, so in `T2 <- transform(data, group = reorder(group,-num))`, `group` is factor.

**UPDATED**

`library` attaches the import packages into loaded namespace.

```
> loadedNamespaces()
 [1] "RCurl"     "base"      "datasets"  "devtools"  "grDevices" "graphics"  "methods"  
 [8] "stats"     "tools"     "utils"    
> library(gmodels) # here, namespace:gdata is loaded
> loadedNamespaces()
 [1] "MASS"      "RCurl"     "base"      "datasets"  "devtools"  "gdata"     "gmodels"  
 [8] "grDevices" "graphics"  "gtools"    "methods"   "stats"     "tools"     "utils" 
```

Just in case, the `reorder` generic exists in `namespace:stats`:

```
> r <- ls(.__S3MethodsTable__., envir = asNamespace("stats"))
> r[grep("reorder", r)]
[1] "reorder"            "reorder.default"    "reorder.dendrogram" 
```

**And for more details**

The call of `reorder` will search the S3generics in two envs:

see `?UseMethod`

> first in the environment in which the generic function is called, and then in the registration data base for the environment in which the generic is defined (typically a namespace).

then, `loadNamespace` registers the S3 functions to the namespace.

So , in your case, `library(gmodels)` -> `loadNamespace(gdata)` -> `registerS3Methods(gdata)`.

After this, you can find it by:

```
> methods(reorder)
[1] reorder.default*    reorder.dendrogram* reorder.factor*    

   Non-visible functions are asterisked 
```

However, as the `reorder.factor` is not attached on your search path, you cannot access it directly:

```
> reorder.factor
Error: object 'reorder.factor' not found 
```

Probably this is whole scenario.**

# mysql - 我可以在 cfloop 中调用存储过程并在 Coldfusion 中输出动态输出参数吗？

> ID：11004020
> 
> 赞同：0
> 
> 时间：2012-06-12T20:06:40.277
> 
> 标签：mysql, stored-procedures, dynamic, coldfusion, out-parameters

今晚的最后一个问题，仍然使用 Coldfusion8 和 MySQL。

我有一个产品表，每个产品都有价格 A、B 和 C。我需要检索所有价格中 A、B、C 的最小值和最大值（A_min、A_max、B_min、B_max、C_min、C_max）

我想我会创建一个存储过程并像这样遍历 A、B、C：

```
 <cfloop list="A,B,C" index="what" delimiters=",">
    <cfstoredproc procedure="proc_search_select_minmax" datasource="dtb">
        <cfprocparam type="in" value="#what#" cfsqltype="cf_sql_varchar" maxlength="15">
        <cfprocparam type="in" value="#variables.xxx#" cfsqltype="cf_sql_varchar" maxlength="13">
        <cfprocparam type="in" value="#variables.yyy#" cfsqltype="cf_sql_varchar" maxlength="13">
        <cfprocparam type="in" value="#variables.zzz#" cfsqltype="cf_sql_text" maxlength="4">
        <cfprocparam type="out" cfsqltype="cf_sql_decimal" variable="#what#_min">
        <cfprocparam type="out" cfsqltype="cf_sql_decimal" variable="#what#_max">   
     </cfstoredproc>
  </cfloop> 
```

所以我们的想法是为 A、B 和 C 运行 3 次，并让变量 A_min、A_max、B_min... 退出循环。

但是我的 out-parameters 有问题，在 MySQL 中，我声明如下：

```
 CREATE ... PROCEDURE `proc_search_select_minmax`(..., OUT `outputMin` DECIMAL(12,2), OUT `outputMax` DECIMAL(12,2))

 .... 
 SET outputMin = min(what);
 SET outputMax = max(what); 
```

Coldfusion错误说：

```
Error Executing Database Query
@
<cfprocparam type="out" cfsqltype="cf_sql_decimal" variable="#what#_min">
<cfprocparam type="out" cfsqltype="cf_sql_decimal" variable="#what#_max"> 
```

**问题：**
我是否必须为我的输出参数提供与 MySQL 内部相同的名称，或者正确的顺序是否足够？
更重要的是，我可以像这样动态设置输出变量吗？如果没有，除了调用存储过程三次之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T22:02:27.370

我从不喜欢这样做的可变返回方式。有用但通常很困难（取决于订单等）。

我有 2 条建议给你。

首先，使输出成为一个数据集。在您的存储过程中创建一个临时表（#myMinMax 或其他），最小和最大 2 列 - 用插入填充表，然后选择它作为返回`<cfstoredprocresult..>`

其次，我可能会创建一个存储过程来执行循环并返回带有“类型”列的整个数据集......所以你最终会得到一个数据集类型（如 A）最小值（如 10）和最大值（如 100) ... A 行，B 行，C 行。与数据源的单个连接可以为您返回此数据集 - 避免 3 个（或更多）数据库调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:17:41.150

在 SQL Server 中，我们在 dbvarname 属性中使用 @ 符号设置变量。

```
<cfprocparam cfsqltype="cf_sql_integer" 
    value="#LOCAL.User_ID#" 
    dbvarname="@User_ID"> 
```

试试看。

更新~我刚刚检查了 CF 文档，上面的建议对你没有帮助

[http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_p-q_14.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_p-q_14.html)

更改了 dbvarname 属性行为：现在所有驱动程序都忽略它。ColdFusion 使用 JDBC 2.2，不支持命名参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T07:39:19.637

我同意 Mark 关于输出参数的观点。对于单个值，您可以采用任何一种方式。但除此之外，只返回结果集更简单。

> 执行数据库查询时出错

也就是说 - 您的代码可以在 CF8/MySQL5 中使用下面的示例过程。根据部分错误消息，我怀疑真正的问题是您的过程中的语法错误。您是否直接在数据库中对其进行了测试？

```
<cfloop>
    <cfstoredproc ...>
        ....
    </cfstoredproc>
</cfloop>
<cfoutput>
    #a_min# #a_max# <br />
    #b_min# #b_max# <br />
    #c_min# #c_max# <br />
</cfoutput>

CREATE PROCEDURE `test`.`proc_search_select_minmax` (
     what varchar(50)
     , xxx varchar(50)
     , yyy varchar(50)
     , zzz varchar(50)
     , OUT outputMin decimal(12,2)
     , OUT outputMax decimal(12,2)
 )
BEGIN

      SET outputMin = 1;
      SET outputMax = 20;
END 
```

# php - PHP数组元素按数组键

> ID：11004024
> 
> 赞同：1
> 
> 时间：2012-06-12T20:07:04.990
> 
> 标签：php, arrays

有没有办法通过它的键选择一个数组元素，而不必遍历集合`array_keys($arr)`- ？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T20:08:11.513

如果你想通过它的键来选择一个元素，你所做的就是：

```
<?php
echo $array_name['KEY_NAME'];
?> 
```

其中“KEY_NAME”是您赋予数组中该元素的键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T03:35:05.707

很抱歉错误地提出了这个问题，但现在找到了一个久违的解决方案！只需用于`array_key_exists($key, $array)`测试 $array 中的 $key。

# jquery - jQuery .template 和 .tmpl 无法正常工作

> ID：11004026
> 
> 赞同：2
> 
> 时间：2012-06-12T20:07:06.013
> 
> 标签：jquery, templates, jquery-templates

好的，所以基本上我试图在帖子底部添加一行代码：

```
<p id="audioembed">Click here to <a href="http://www.site.com/mp3file.mp3"> download MP3</a></p> 
```

然后在页面底部，我有脚本来检查用户是否在 iPhone、iPad 或 iPod 上查看它，然后拉 mp3 URL，清除元素，然后添加基本的 HTML5 音频播放器在它的位置：

```
<script>
jQuery(document).ready(function($) {
if(navigator.platform == 'iPad' || navigator.platform == 'iPhone' || navigator.platform == 'iPod')
{
var audioElement = $('#audioembed'), href = audioElement.children('a').attr('href');
$.template("audioTemplate", "<audio src='${src}' controls>")
audioElement.empty();
$.tmpl("audioTemplate", {src: href}).appendTo(audioElement);
};
});
</script> 
```

但由于某种原因，它根本不起作用。我知道 iDevice 检查正在工作（如果我用 CSS 颜色更改之类的基本内容替换模板行，它工作得很好）所以我必须把模板弄乱了。任何你能解决这个问题的光都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:13:04.303

我认为您的模板仍然必须使用有效的 javascript 字符串文字：

```
$.template("audioTemplate", "<audio src='${src}' controls>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:48:44.837

好吧，我不知道为什么模板函数不起作用，所以现在我只是简单地使用一个基本的追加来拉取 URL，如下所示：

```
<script>
jQuery(document).ready(function($) {
(navigator.platform == 'iPad' || navigator.platform == 'iPhone' || navigator.platform == 'iPod')
{
var audioElement = $('#audioembed'), href = audioElement.children('a').attr('href');
audioElement.empty();
audioElement.append('<audio src="'+href+'"controls>');
};
});
</script> 
```

它现在必须做。我仍然想知道是否有人弄清楚为什么原来的计划不起作用。谢谢！

# json - 我写了一个ANTLR语法，想转换成JSON

> ID：11004037
> 
> 赞同：0
> 
> 时间：2012-06-12T20:08:06.153
> 
> 标签：json, parsing, grammar, antlr3

我创建了一个 ANTLR 语法，可以正确地生成与其关联的文件类型的树。

怎么办？我真的不明白我是如何让这个 .g 文件现在解析一些东西的。我如何让它在我的文件系统中执行它，它解析它到什么？目标是将这些文件（其中一些）转换为 JSON 格式。任何建议或澄清，已经阅读了很多教程，我感到很无聊，因为我似乎无法从它们中得到我想要的东西。

我正在用 JAVA 和 ANTLR 3.4 编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:11:45.753

要从文件系统读取和解析，您可以编写如下内容：

```
MyLexer lex = new MyLexer(new ANTLRFileStream(args[0]));
CommonTokenStream tokens = new CommonTokenStream(lex);
MyParser parser = new MyParser(tokens);

try {
   parser.expr();
} catch (RecognitionException e)  {
   e.printStackTrace();
} 
```

（当然取决于你的输出语言）

# batch-file - 批处理文件 - 计算文件夹中的文件数并存储在变量中

> ID：11004045
> 
> 赞同：38
> 
> 时间：2012-06-12T20:08:33.227
> 
> 标签：batch-file

我对此很陌生。请帮我

我正在尝试编写一个批处理文件程序来计算文件夹中的文件数并将其分配给一个变量并显示它以验证它是否已存储请帮助我使用语法，

提前谢谢你-VK

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-12T21:41:43.960

我将假设您不想计算隐藏文件或系统文件。

有很多方法可以做到这一点。我将展示的所有方法都涉及某种形式的 FOR 命令。FOR 命令有许多看起来几乎相同的变体，但它们的行为却大不相同。初学者可能会感到困惑。

您可以通过键入`HELP FOR`或`FOR /?`从命令行获得帮助。但是，如果您不习惯阅读它，那么这种帮助就有点神秘了。

1) DIR 命令列出目录中的文件数。您可以将 DIR 的结果通过管道传输到 FIND 以获取相关行，然后使用 FOR /F 从该行解析所需的值。这种技术的问题是您搜索的字符串必须根据操作系统使用的语言而改变。

```
@echo off
for /f %%A in ('dir ^| find "File(s)"') do set cnt=%%A
echo File count = %cnt% 
```

2）您可以使用`DIR /B /A-D-H-S`列出没有其他信息的非隐藏/非系统文件，将结果传递给 FIND 以计算文件数，并使用 FOR /F 读取结果。

```
@echo off
for /f %%A in ('dir /a-d-s-h /b ^| find /v /c ""') do set cnt=%%A
echo File count = %cnt% 
```

3）您可以使用简单的 FOR 枚举所有文件，并使用 SET /A 为找到的每个文件增加一个计数器。

```
@echo off
set cnt=0
for %%A in (*) do set /a cnt+=1
echo File count = %cnt% 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-04-02T20:42:31.567

```
@echo off
setlocal enableextensions
set count=0
for %%x in (*.txt) do set /a count+=1
echo %count%
endlocal
pause 
```

这是最好的....您的变量是： `%count%`

注意：您可以将 ( `*.txt`) 更改为任何其他文件扩展名以计算其他文件.....

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-15T15:40:23.687

mugume [david 回答](https://stackoverflow.com/a/15485610/1012053)在空文件夹上失败；查找模式而不是所有文件时，计数为 1 而不是 0。例如 *.xml

这对我有用：

`attrib.exe /s ./*.xml | find /v "File not found - " | find /c /v ""`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-10-25T03:08:22.157

计算文件夹`%FOLDER%`及其子文件夹中具有 ANY 属性的文件的最快代码如下。该代码用于命令脚本（批处理）文件中的脚本。

```
@for /f %%a in ('2^>nul dir "%FOLDER%" /a-d/b/-o/-p/s^|find /v /c ""') do set n=%%a
@echo Total files: %n%. 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-01-11T08:58:52.900

这可能会快一点：

```
dir /A:-D /B *.* 2>nul | find /c /v "" 
```

```
`/A:-D` - filters out only non directory items (files)
`/B`    - prints only file names (no need a full path request)
`*.*`   - can filters out specific file names (currently - all)
`2>nul` - suppresses all error lines output to does not count them 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-18T19:50:20.700

切换到目录和；

```
attrib.exe /s ./*.* |find /c /v "" 
```

### 编辑

我认为这很容易发现。利用

```
Process p = new Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.FileName = "batchfile.bat";
p.Start();
string output = p.StandardOutput.ReadToEnd();
p.WaitForExit(); 
```

我运行这个并且变量`output`持有这个

```
D:\VSS\USSD V3.0\WTU.USSD\USSDConsole\bin\Debug>attrib.exe /s ./*.*   | find /c /v "" 13 
```

其中 13 是文件数。它应该可以解决问题

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-02T20:52:28.913

`for /F "tokens=1" %a in ('dir ^| findstr "File(s)"') do echo %a`

结果：

```
C:\MyDir> for /F "tokens=1" %a in ('dir ^| findstr "File(s)"') do @set FILE_COUNT=%a

C:\MyDir> echo %FILE_COUNT%
4   // <== There's your answer 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-09-13T22:09:45.690

我过去曾使用过一个临时文件来执行此操作，如下所示。

```
DIR /B *.DAT | FIND.EXE /C /V "" > COUNT.TXT

FOR /F "tokens=1" %%f IN (COUNT.TXT) DO (
IF NOT %%f==6 SET _MSG=File count is %%f, and 6 were expected. & DEL COUNT.TXT & ECHO #### ERROR - FILE COUNT WAS %%f AND 6 WERE EXPECTED. #### >> %_LOGFILE% & GOTO SENDMAIL
) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-07T09:20:41.733

```
FOR /f "delims=" %%i IN ('attrib.exe ./*.* ^| find /v "File not found - " ^| find /c /v ""') DO SET myVar=%%i
ECHO %myVar% 
```

这是基于（很多）较早的帖子指出，如果您使用 DIR 而不是 attrib.exe，则空目录的计数将是错误的。

对于在将命令放入 FOR 循环的语法上遇到困难的其他人，请将命令用单引号括起来（假设它不包含它们）并用 ^ 转义管道。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-09-17T20:37:03.550

有一个`for`循环：

```
FOR /F %i IN ('dir /b /a-d "%cd%" ^| find /v /c "?"') DO set /a count=%i
echo %count% 
```

没有/避免`for`循环：

```
(dir /b /a-d ^| find /v /c "?") | (set /p myVar=& cmd /c exit /b %myVar%)
set count=%errorlevel%
echo %count% 
```

在 Win 10 cmd 中测试

# android - Eclipse 没有将类文件打包到 apk 中

> ID：11004046
> 
> 赞同：0
> 
> 时间：2012-06-12T20:08:55.270
> 
> 标签：android, eclipse, apk

我已经在 stackoverflow 中搜索过类似我的问题，但我发现的大多数问题都涉及到将外部 jar 库导入到 apk 失败。

我的问题有点不同。我的实际项目源没有被打包到 apk 中，而是被编译到它旁边的文件夹中，而不是在包本身中。我也一直在寻找解决方案的构建路径选项，但无济于事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:39:42.910

检查您是否在 Eclipse 中使用“java 透视图”。通常你可以在Eclipse的“包资源管理器”下的“bin”中编译后找到你的apk

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:14:28.137

要打包您的应用程序，您必须右键单击您的项目，然后单击 Android 工具 --> 导出签名的应用程序，然后设置密钥和密码

也许你做错了......？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T19:04:30.917

我发现了问题，我将库项目创建为 android 项目而不是 java 项目。我的愚蠢错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-18T04:54:32.707

```
C:\Users\[YourUserName]\.android\ 
```

删除缓存文件夹和 ddms.cfg 文件。它可能会解决大多数与 Eclipse 相关的问题。（至少它对我有用）：P

# android - Android xml解析器返回“不正确的功能”

> ID：11004047
> 
> 赞同：0
> 
> 时间：2012-06-12T20:08:58.767
> 
> 标签：android, xml-parsing

我正在使用 Android 中的 xmlParser 从服务器解析 xml 文件。

当我在 logcat 中打印 xml 的内容时

Log.e("看看宝贝", xml);

然后以下是输出：

```
06-12 21:02:23.019: E/check it out baby(14600):   <html><head><title>Error</title></head><body>Incorrect function.
06-12 21:02:23.019: E/check it out baby(14600): </body></html>
06-12 21:02:23.019: E/manjin(14600): <html><head><title>Error</title></head><body>Incorrect     function.
06-12 21:02:23.019: E/manjin(14600): </body></html>
06-12 21:02:35.963: W/KeyCharacterMap(14600): Bad keycharmap - filesize=32
06-12 21:02:35.963: W/KeyCharacterMap(14600): Error loading keycharmap   file '/system/usr/keychars/bravo-keypad.kcm.bin'. hw.keyboards.0.devname='bravo-keypad'
06-12 21:02:35.963: W/KeyCharacterMap(14600): Using default   keymap: /system/usr/keychars/qwerty.kcm.bin
06-12 21:04:52.559: D/dalvikvm(14600): GC_EXPLICIT freed 2858 objects / 177688 bytes in 71ms 
```

请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:42:35.513

请查看[@joshas](https://stackoverflow.com/a/9326393/506879)对此主题的回答，并查看[他分享的链接](http://alldroid.org/archived/threads/14925.html)。

# c# - Yandex XML 反序列化 C#

> ID：11004048
> 
> 赞同：1
> 
> 时间：2012-06-12T20:09:02.377
> 
> 标签：c#, windows-phone-7, deserialization

请帮助我解除 xml 文档的实现。我试着这样做

```
 public class SearchItem
    {
        [XmlAttribute("url")]
        public string Url { get; set; }
        [System.Xml.Serialization.XmlAttribute("title")]
        public string Title { get; set; }
        [System.Xml.Serialization.XmlAttribute("headline")]
        public string Content { get; set; }
        public SearchItem()
        {
        }
        public SearchItem(string url, string title, string content)
        {
            Url = url;
            Title = title;
            Content = content;
        }
    } 
```

然后我尝试反序列化，但我有异常 inputData - 是我从 WebClient 获得的 Strem 女巫，其中是来自服务器的答案

```
 XmlObjectSerializer xos = new DataContractSerializer(typeof(SearchItem));
            var ss = (List<SearchItem>)xos.ReadObject(inputData); 
```

来自服务器示例的答案：

```
<yandexsearch version="1.0">
<request>
<query>
арбитр
</query>
<page>
0
</page>
<sortby order="descending" priority="no">
rlv
</sortby>
<maxpassages/>
<groupings>
<groupby attr="d" mode="deep" groups-on-page="10" docs-in-group="1" curcateg="-1"/>
</groupings>
</request>
<response date="20120612T200646">
<reqid>
1339531606485424-918142884478824595311381-3-022-XML
</reqid>
<wordstat>
ban: 0,арбитр: 4895441
</wordstat>
<found priority="phrase">
5178271
</found>
<found priority="strict">
5178271
</found>
<found priority="all">
5178271
</found>
<found-human>
Нашлось 5 млн ответов
</found-human>
<results>
<grouping attr="d" mode="deep" groups-on-page="10" docs-in-group="1" curcateg="-1">
<found priority="phrase">
17461
</found>
<found priority="strict">
17461
</found>
<found priority="all">
17461
</found>
<found-docs priority="phrase">
5171740
</found-docs>
<found-docs priority="strict">
5171740
</found-docs>
<found-docs priority="all">
5171740
</found-docs>
<found-docs-human>
нашёл 5 млн ответов
</found-docs-human>
<page first="1" last="10">
0
</page>
<group>
<categ attr="d" name="arbitr.ru"/>
<doccount>
47282
</doccount>
<relevance priority="all"/>
<doc id="78-19-6-Z719CDE9C6DE1107F">
<relevance priority="phrase"/>
<url>
http://www.arbitr.ru/
</url>
<domain>
www.arbitr.ru
</domain>
<title>
"Высший арбитражный суд Российской Федерации" 
</title>
<headline>
Новости, обзоры деятельности арбитражных судов, пресс-релизы. Арбитражная сиcтема РФ: правовые основы, контакты региональных арбитражных судов и др. Постановления ВАС РФ, нормативные документы.
</headline>
<modtime>
20061008T212457
</modtime>
<size>
50143
</size>
<charset>
windows-1251
</charset>
<properties>
<_PassagesType>
0
</_PassagesType>
<lang>
ru
</lang>
</properties>
<mime-type>
text/html
</mime-type>
<saved-copy-url>
http://hghltd.yandex.net/yandbtm?text=%D0%B0%D1%80%D0%B1%D0%B8%D1%82%D1%80&url=http%3A%2F%2Fwww.arbitr.ru%2F&fmode=inject&mime=html&l10n=ru&sign=168f7a8cc92b73dd647be5ca4a0d91b8&keyno=0
</saved-copy-url>
</doc>
</group>
</grouping>
</results>
</response>
</yandexsearch> 
```

谢谢你的帮助/

```
i have a solution of my problem, but it is not Deserialization, its simple xml working, like this:

  XDocument xmlResponse = XDocument.Parse(page);
        var groupQuery = from elements in xmlResponse.Elements().
            Elements("response").
            Elements("results").
            Elements("grouping").
            Elements("group")
                         select elements;

var items = new List<SearchItem>(listSize);
            foreach (var item in groupQuery)
            {
                string urlQuery = GetValue(item, name: "url");
                string titleQuery = GetValue(item, name: "title");
                string descriptionQuery = GetValue(item, name: "headline");
                SearchItem additionItem = new SearchItem(urlQuery, titleQuery, descriptionQuery);
                items.Add(additionItem);
            } 
```

但我需要反序列化的解决方案....

# linux - linux中的多个进程

> ID：11004050
> 
> 赞同：0
> 
> 时间：2012-06-12T20:09:08.593
> 
> 标签：linux, shell

我需要在 Linux 下启动几个（比如每台机器两打，至少有八台服务器）几乎相同的进程，每个进程都有自己的命令行参数，每个进程都在自己的目录中。我不想手动做这件事。

做这个的最好方式是什么？/etc/init.d 是 httpd 的方式（您会看到在其下运行的多个进程），还是有其他方式？

我应该补充一点，如果他们死了，我也希望他们自动启动，和/或在某个时间，所以可能至少 cron 并且也许 monit 必须成为解决方案的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:17:55.280

如果您需要将进程与控制终端关联，您可以考虑使用[GNU Screen](http://www.gnu.org/software/screen/)或[tmux](http://tmux.sourceforge.net/)。使用 Screen，您可以创建如下配置文件：

```
startup_message off
screen -t foo 1 /path/to/someprogram
screen -t bar 2 /path/to/another 
```

如果您可以将它们设置为背景，那么……就将它们设置为背景。

```
#!/bin/bash

/usr/bin/nohup /path/to/someprogram &
/usr/bin/nohup /path/to/another &

echo "All done!" 
```

如果您需要它们在死亡时重新启动，则考虑将它们包装在重新启动器中。例如，查看[daemontools](http://cr.yp.to/daemontools.html)。或者一个简单的 shell 脚本，例如：

```
while ! /path/to/flakeybinary; do
  echo "Darn, died again." >&2
done
echo "Exited normally, yay." 
```

# delphi - 如何识别显示器的数量、位置或分辨率何时发生变化？

> ID：11004051
> 
> 赞同：4
> 
> 时间：2012-06-12T20:09:11.073
> 
> 标签：delphi, multiple-monitors, windows-messages

我正在构建一些需要检测监视器配置何时发生变化的东西。这包括添加/移除监视器、移动监视器位置（与主屏幕相比）或监视器分辨率发生变化时。最理想的方法是捕获一些 Windows 消息（如果有），这些消息在此类事件发生时触发。此信息将用于在任何给定时间实时记录显示器尺寸/位置。例如，当显示器的分辨率增加时，我的应用程序会立即捕捉到这一点并进行自己的调整以适应变化。我如何捕捉这些事件？

我还试图避免使用 VCL（例如`Vcl.Forms.Screen.MonitorCount`），这就是为什么我更喜欢捕获 Windows 消息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T20:16:21.417

我能想到的最明显的消息是[`WM_DISPLAYCHANGE`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145210(v=vs.85).aspx)至少在分辨率更改时发送的消息。

# java - 当使用多个具有相同名称的类时，您应该完全限定所有用途，还是只限定“罕见”的用途？

> ID：11004054
> 
> 赞同：0
> 
> 时间：2012-06-12T20:09:32.917
> 
> 标签：java, class, import, namespaces

在 Java 中，当在一个类中使用多个具有相同名称的类时，您是否应该始终完全限定这些类的所有用途？例如：

```
org.foo.ClassA;
gov.bar.ClassA; 
```

在更具体的情况下，其中一个类在您的代码库中非常常见，是否可以只完全限定不寻常的类？例如，如果我为 gov.bar 工作，但从 org.foo 的库中添加代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T20:12:43.493

首先，尽可能避免这种情况。这是开发人员普遍感到沮丧的根源。（`java.awt.List`还有`java.util.List`人吗？）

在无法避免的情况下，最好在使用它们的类文件中完全限定它们。很有可能，这是一个罕见的情况，两者都在同一个文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:11:48.897

您也许可以使用泛型来有效地重命名类。下面为我​​编译。如果具有相同名称的类不是通用的，则效果最好。

```
class TestIt < UtilList extends java . util . List , AWTList extends java . awt . List >
{
    public void run ( UtilList utilList , AWTList awtList )
    {
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:14:33.947

我想最重要的问题是“其他在代码库上工作的人期望什么？”。使用众所周知的编码标准是最好的方法。

如果您不知道谁必须维护代码库中的代码，那么完全限定两者可能是最清晰的方法。

# java - Java HashSet 的奇怪迭代器行为

> ID：11004055
> 
> 赞同：4
> 
> 时间：2012-06-12T20:09:34.093
> 
> 标签：java, iterator, hashset

今天我在使用 HashSet 的迭代器时遇到了一些奇怪的行为。在下面的代码示例中，`idString`使用返回的对象引用`hs.iterator`来调用迭代器的`next()`方法。

在`idString2`迭代器中通过调用`hs.iterator()`它，它不再工作了。

所以我假设 HashSet.iterator() 每次调用它都会返回一个新的迭代器对象。但是，为什么我仍然可以`hs.iterator().hasNext()`在 while 循环中使用呢？

（请注意，下面的代码只是一个示例 :)）

```
import java.util.Arrays;
import java.util.HashSet;
import java.util.Iterator;

import org.junit.Test;

public class DummyTest {
  static final HashSet<Integer> TEST_DATA = new HashSet<Integer>(
    Arrays.asList(new Integer[] {
      1,2,3,4,5,6,7,8,9,10
    }));

  @Test
  public void testRunTest() {
    // Correct output: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10
    System.out.println(idString(TEST_DATA));
    // Only 1, 1, 1, 1, ...
    System.out.println(idString2(TEST_DATA));
  }

  static String idString(HashSet<Integer> hs) {
    Iterator<Integer> it = hs.iterator();
    String res = it.next() + "";
    while (it.hasNext()) {
      res += ", " + it.next();
      System.out.println(res); // debug
    }
    return res;
  }

  static String idString2(HashSet<Integer> hs) {
    Iterator<Integer> it = hs.iterator();
    // Prevent an infinite loop
    int i = 0;
    String res = null;
    res = it.next() + "";
    while (hs.iterator().hasNext() && i++ <= 10) {
      // if replacing hs.iterator() with 'it', it works
      res = res + ", " + hs.iterator().next();
      System.out.println(res); // debug
    }
    return res;
  }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T20:13:35.227

每次调用`iterator()`它都会返回一个*新*的迭代器，独立于之前创建的任何其他迭代器。所以如果你调用`hs.iterator().next()`它*总是*会给你第一个元素，如果你调用`hs.iterator().hasNext()`一个非空集合，它*总是*会返回`true`。

将其与 using `it`each time 进行比较，后者始终使用单个迭代器，因此每次调用时都会推进逻辑“光标” `next()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T20:13:35.743

[这在迭代器](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#iterator%28%29)方法的 Javadocs 中没有明确记录（无论是在[Collection](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#iterator%28%29)还是[Iterable](http://docs.oracle.com/javase/6/docs/api/java/lang/Iterable.html#iterator%28%29)接口中），但是所有 Java 集合总是在**iterator()**调用下返回一个新的迭代器。

因此，您应该重用您创建的迭代器，而不是在每次循环运行时重新创建迭代器。

例如，在**[AbstractList](http://www.docjar.com/html/api/java/util/AbstractList.java.html)****有iterator()**实现：

```
/**
* Returns an iterator over the elements in this list in proper sequence.
*
* <p>This implementation returns a straightforward implementation of the
* iterator interface, relying on the backing list's {@code size()},
* {@code get(int)}, and {@code remove(int)} methods.
*
* <p>Note that the iterator returned by this method will throw an
* {@link UnsupportedOperationException} in response to its
* {@code remove} method unless the list's {@code remove(int)} method is
* overridden.
*
* <p>This implementation can be made to throw runtime exceptions in the
* face of concurrent modification, as described in the specification
* for the (protected) {@link #modCount} field.
*
* @return an iterator over the elements in this list in proper sequence
*/
public Iterator<E> iterator() {
    return new Itr();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T20:14:27.920

您的错误是在每次调用时`HashSet.iterator()`生成一个*新*的迭代器。新的迭代器总是指向第一个元素。因此，您必须`it`在方法中使用迭代器`idString2`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T23:15:39.190

它之所以有效，是因为即使您正在获取一个新的迭代器实例并检查迭代器上是否有下一个元素，每次 while 都会检查条件。

前任。而 (hs.iterator().hasNext() && i++ <= 10) {..

它总是返回 true 因为它总是指向第一个元素，但是你已经在这一行中分配了一个迭代器的实例：

迭代器它 = hs.iterator();

因此，即使您正在检查每个新迭代器实例中是否有下一个元素，您也会得到第一个迭代器实例中的下一个元素，仅分配给 it 变量。

while 循环由于 "&& i++ <= 10" 条件而结束，因此它循环了 10 次，然后停止执行 while 块。

如果该条件不存在，当您尝试获取迭代器的下一个不存在的元素时，您将收到 NoSuchElementException。

hasNext() 仅检查是否存在下一个元素，而 next() 使光标指向下一个元素，如果它存在于迭代器对象上，则它被调用。

# sed - sed 特定 - 在双引号多行字符串中执行许多替换

> ID：11004064
> 
> 赞同：0
> 
> 时间：2012-06-12T20:10:17.593
> 
> 标签：sed

我有一个`sed(1)`脚本对给定的输入流进行许多分步转换（替换），这对任务本身很有效。现在，我需要将这些操作限制在“/”引用的多行字符串/内部。输入流是包含多行“/”引用的字符串的简单文本文件，我需要执行我的`s///`命令序列。我知道要做到这一点非常困难，`sed(1)`但我仍然希望有人知道如何做到。到目前为止我的脚本（但在单行基础上正常工作）如下。

“`sed(1)`技巧”在脚本的开头和结尾，其余的只是`s///`s 表达式的序列，它是正确的：

```
#! /bin/sed -f

# Convert /PinYin/ strings to /UTF-8 PinYin/ strings.
# Notice: /PinYin/ strings MUST NOT be multiline (to do).

/\/.*\// {

    s/\//\
/g

:a 
    h
    s/[^\n]*\n//
    s/\n.*//

    s/ang1/||aq||ng/g
    s/ang2/||aw||ng/g
    s/ang3/||ae||ng/g
    s/ang4/||ar||ng/g

    s/eng1/||eq||ng/g
    s/eng2/||ew||ng/g
    s/eng3/||ee||ng/g
    s/eng4/||er||ng/g

    s/ing1/||iq||ng/g
    s/ing2/||iw||ng/g
    s/ing3/||ie||ng/g
    s/ing4/||ir||ng/g

    s/ong1/||oq||ng/g
    s/ong2/||ow||ng/g
    s/ong3/||oe||ng/g
    s/ong4/||or||ng/g

    s/an1/||aq||n/g
    s/an2/||aw||n/g
    s/an3/||ae||n/g
    s/an4/||ar||n/g

    s/en1/||eq||n/g
    s/en2/||ew||n/g
    s/en3/||ee||n/g
    s/en4/||er||n/g

    s/in1/||iq||n/g
    s/in2/||iw||n/g
    s/in3/||ie||n/g
    s/in4/||ir||n/g

    s/un1/||uq||n/g
    s/un2/||uw||n/g
    s/un3/||ue||n/g
    s/un4/||ur||n/g

    s/ao1/||aq||o/g
    s/ao2/||aw||o/g
    s/ao3/||ae||o/g
    s/ao4/||ar||o/g

    s/ou1/||oq||u/g
    s/ou2/||ow||u/g
    s/ou3/||oe||u/g
    s/ou4/||or||u/g

    s/ai1/||aq||i/g
    s/ai2/||aw||i/g
    s/ai3/||ae||i/g
    s/ai4/||ar||i/g

    s/ei1/||eq||i/g
    s/ei2/||ew||i/g
    s/ei3/||ee||i/g
    s/ei4/||er||i/g

    s/a1/||aq||/g
    s/a2/||aw||/g
    s/a3/||ae||/g
    s/a4/||ar||/g

    s/a1/||aq||/g
    s/a2/||aw||/g
    s/a3/||ae||/g
    s/a4/||ar||/g

    s/er2/||ew||r/g
    s/er3/||ee||r/g
    s/er4/||er||r/g

    s/lyue/l||u:||e/g
    s/nyue/n||u:||e/g

    s/e1/||eq||/g
    s/e2/||ew||/g
    s/e3/||ee||/g
    s/e4/||er||/g

    s/o1/||oq||/g
    s/o2/||ow||/g
    s/o3/||oe||/g
    s/o4/||or||/g

    s/i1/||iq||/g
    s/i2/||iw||/g
    s/i3/||ie||/g
    s/i4/||ir||/g

    s/nyu3/n||u:e||/g

    s/lyu/l||u:||/g

    s/u:1/||u:q||/g
    s/u:2/||u:w||/g
    s/u:3/||u:e||/g
    s/u:4/||u:r||/g
    s/u:0/||u:s||/g

    s/u1/||uq||/g
    s/u2/||uw||/g
    s/u3/||ue||/g
    s/u4/||ur||/g

    s/||aq||/ā/g
    s/||aw||/á/g
    s/||ae||/ǎ/g
    s/||ar||/à/g

    s/||eq||/ē/g
    s/||ew||/é/g
    s/||ee||/ě/g
    s/||er||/è/g

    s/||iq||/ī/g
    s/||iw||/í/g
    s/||ie||/ǐ/g
    s/||ir||/ì/g

    s/||oq||/ō/g
    s/||ow||/ó/g
    s/||oe||/ǒ/g
    s/||or||/ò/g

    s/||uq||/ū/g
    s/||uw||/ú/g
    s/||ue||/ǔ/g
    s/||ur||/ù/g

    s/||u:q||/ǖ/g
    s/||u:w||/ǘ/g
    s/||u:e||/ǚ/g
    s/||u:r||/ǜ/g
    s/||u:s||/ü/g

    G
    s/\([^\n]*\)\n\([^\n]*\)\n[^\n]*\n/\2\/\1\//
    /\n/ b a
} 
```

样本输入：

```
Some text containing for instance Chinese greeting /ni3
hao3/ and perhaps some other Chinese sentence, say /ni2
kan4, .../ 
```

预期输出：

```
Some text containing for instance Chinese greeting /nǐ
hǎo/ and perhaps some other Chinese sentence, say /ní
kàn, .../ 
```

我的知识`sed(1)`不足以独自解决这个问题。因此，我请你帮我做这件事。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:26:05.633

根据我对您问题的理解，您需要指定命令的地址[范围](http://www.grymoire.com/Unix/Sed.html#uh-25)`sed`：

```
sed '/\//,/\// {command1; command2; ...}' 
```

`/../`但是，当模式**不是**多行时，这又会中断。这意味着您需要将它们**全部**设为多行。为了确保`/`每行只有一个，请执行以下操作：

```
sed 's_/_\n/_g' | sed {main sed command} 
```

这也给人一种想法，如果您首先将所有行连接到一个，您可以将多行引号视为单行：

```
cat myfile | tr '\n' ' ' | sed {your current commands} 
```

PS 另外我想指出，您一开始的“技巧”有点缺陷：

```
 /\/.*\// 
```

这是贪婪的，因此它不会正确处理同一行上的多个模式。出于这个原因，第二种方法可能无法按原样工作。

**编辑：**好吧，结果比我想象的要复杂（或者我太累了，看不到更简单的方法）。

要将这些行重新组合在一起，您需要以“独特”的方式将它们拆分，以便稍后您可以分辨出您的脚本引入了哪些换行符。我建议这样做

```
sed 's_/_\n/\n_g' 
```

这样每个`/`人都有自己的路线。如果你看到一行只包含一个`/`字符，你就知道你应该把它贴在前一个字符和下一个字符上。因此，首先您对文件执行上述`sed`命令，然后将地址范围替换为`/\//,/\//`，最后您需要将这些行重新组合在一起。这可以通过

```
sed ':a $!{N;ba};s/\n\/\n/\//g' 
```

所以我建议你最后管这个。我不会很高兴自己必须使用它，但你总是可以将它隐藏在 shell 函数或类似的东西中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:39:17.373

`sed(1)`最后，只需对原始代码进行少量改进，就很容易实现。也许它可以做得更好，但是当转换代码在“行范围”中工作时，我设法让它成为（对这个问题的本质并不重要的小改进），而是在模式空间中读取整个文件，替换带有`\001`( ) 字符的换行符`^A`，让原始代码完成它的工作，最后将`^A`字符替换回换行符。这里是：

```
#! /bin/sed -f

#  pinyin2utf8.sed -- Convert US-ASCII Pinyin to UTF-8
#  Copyright (C) 2012 Matous J. Fialka, <http://mjf.cz/>
#  Released under the terms of The MIT License
#
#  DESCRIPTION
#   Script converts all occurences of US-ASCII encoded Pinyin text
#   enclosed by the solidus characters pairs to UTF-8 encoded text.
#
#  USAGE
#   pinyin2utf8.sed filename [ > filename.out ]
#
#  WARNINGS
#   Script contains the ^A control character, usually displayed as
#   mentioned in most text editors, that can be usually reproduced
#   by pressing ^V ^A key sequence. The ^A control characters thus
#   MUST NOT occure in the input stream.  To find the sequences in
#   the script lookup the y/// command in the code, please.
#
#   In the US-ASCII encoded Pinyin to UTF-8 Pinyin conversion code
#   special delimiting sequences of left and right parentheses are
#   used and those two delimiting sequences of left or righ parens
#   SHOULD NOT be used in the input stream.

: 0

$! {
    N
    b 0
}

# HERE BE DRAGONS

y/\n/^A/

y/\//\
/

: a

h

s/[^\n]*\n//
s/\n.*//

# CONVERSION CODE BEGINNING

s/ang1/(((aq)))ng/g
s/ang2/(((aw)))ng/g
s/ang3/(((ae)))ng/g
s/ang4/(((ar)))ng/g
s/eng1/(((eq)))ng/g
s/eng2/(((ew)))ng/g
s/eng3/(((ee)))ng/g
s/eng4/(((er)))ng/g
s/ing1/(((iq)))ng/g
s/ing2/(((iw)))ng/g
s/ing3/(((ie)))ng/g
s/ing4/(((ir)))ng/g
s/ong1/(((oq)))ng/g
s/ong2/(((ow)))ng/g
s/ong3/(((oe)))ng/g
s/ong4/(((or)))ng/g

s/an1/(((aq)))n/g
s/an2/(((aw)))n/g
s/an3/(((ae)))n/g
s/an4/(((ar)))n/g
s/en1/(((eq)))n/g
s/en2/(((ew)))n/g
s/en3/(((ee)))n/g
s/en4/(((er)))n/g
s/in1/(((iq)))n/g
s/in2/(((iw)))n/g
s/in3/(((ie)))n/g
s/in4/(((ir)))n/g
s/un1/(((uq)))n/g
s/un2/(((uw)))n/g
s/un3/(((ue)))n/g
s/un4/(((ur)))n/g
s/ao1/(((aq)))o/g
s/ao2/(((aw)))o/g
s/ao3/(((ae)))o/g
s/ao4/(((ar)))o/g
s/ou1/(((oq)))u/g
s/ou2/(((ow)))u/g
s/ou3/(((oe)))u/g
s/ou4/(((or)))u/g
s/ai1/(((aq)))i/g
s/ai2/(((aw)))i/g
s/ai3/(((ae)))i/g
s/ai4/(((ar)))i/g
s/ei1/(((eq)))i/g
s/ei2/(((ew)))i/g
s/ei3/(((ee)))i/g
s/ei4/(((er)))i/g

s/a1/(((aq)))/g
s/a2/(((aw)))/g
s/a3/(((ae)))/g
s/a4/(((ar)))/g
s/a1/(((aq)))/g
s/a2/(((aw)))/g
s/a3/(((ae)))/g
s/a4/(((ar)))/g

s/er2/(((ew)))r/g
s/er3/(((ee)))r/g
s/er4/(((er)))r/g

s/lyue/l(((u:)))e/g
s/nyue/n(((u:)))e/g

s/e1/(((eq)))/g
s/e2/(((ew)))/g
s/e3/(((ee)))/g
s/e4/(((er)))/g
s/o1/(((oq)))/g
s/o2/(((ow)))/g
s/o3/(((oe)))/g
s/o4/(((or)))/g
s/i1/(((iq)))/g
s/i2/(((iw)))/g
s/i3/(((ie)))/g
s/i4/(((ir)))/g

s/nyu3/n(((u:e)))/g

s/lyu/l(((u:)))/g

s/u:1/(((u:q)))/g
s/u:2/(((u:w)))/g
s/u:3/(((u:e)))/g
s/u:4/(((u:r)))/g
s/u:0/(((u:s)))/g

s/u1/(((uq)))/g
s/u2/(((uw)))/g
s/u3/(((ue)))/g
s/u4/(((ur)))/g

s/(((aq)))/ā/g
s/(((aw)))/á/g
s/(((ae)))/ǎ/g
s/(((ar)))/à/g
s/(((eq)))/ē/g
s/(((ew)))/é/g
s/(((ee)))/ě/g
s/(((er)))/è/g
s/(((iq)))/ī/g
s/(((iw)))/í/g
s/(((ie)))/ǐ/g
s/(((ir)))/ì/g
s/(((oq)))/ō/g
s/(((ow)))/ó/g
s/(((oe)))/ǒ/g
s/(((or)))/ò/g
s/(((uq)))/ū/g
s/(((uw)))/ú/g
s/(((ue)))/ǔ/g
s/(((ur)))/ù/g

s/(((u:q)))/ǖ/g
s/(((u:w)))/ǘ/g
s/(((u:e)))/ǚ/g
s/(((u:r)))/ǜ/g
s/(((u:s)))/ü/g

# CONVERSION CODE END

G

s/\([^\n]*\)\n\([^\n]*\)\n[^\n]*\n/\2\/\1\//

/\n/ b a

# HERE BE DRAGONS

y/^A/\
/ 
```

示例输入文本：

```
$ cat test.in
ni3 hao3
/ni3 hao3/
ni3 hao3 /ni3 hao3/
/ni3 hao3/ ni3 hao3
ni3 hao3 /ni3 hao3/ ni3 hao3
ni3 hao3 /ni3 hao3/ ni3 hao3 /ni3 hao3/
/ni3 hao3/ ni3 hao3 /ni3 hao3/
/ni3 hao3/ ni3 hao3 /ni3 hao3/ ni3 hao3
ni3 hao3 /ni3 hao3/ ni3 hao3 /ni3 hao3/ ni3 hao3
/ni3 hao3/ ni3 hao3 /ni3 hao3/ ni3 hao3 /ni3 hao3/

ni3 hao3 /ni3
hao3/ ni3 hao3

/ni3 hao3
ni3
hao3
ni3 hao3/ ni3 hao3 
```

样品运行：

```
$ pinyin2utf8.sed test.in
ni3 hao3
/nǐ hǎo/
ni3 hao3 /nǐ hǎo/
/nǐ hǎo/ ni3 hao3
ni3 hao3 /nǐ hǎo/ ni3 hao3
ni3 hao3 /nǐ hǎo/ ni3 hao3 /nǐ hǎo/
/nǐ hǎo/ ni3 hao3 /nǐ hǎo/
/nǐ hǎo/ ni3 hao3 /nǐ hǎo/ ni3 hao3
ni3 hao3 /nǐ hǎo/ ni3 hao3 /nǐ hǎo/ ni3 hao3
/nǐ hǎo/ ni3 hao3 /nǐ hǎo/ ni3 hao3 /nǐ hǎo/

ni3 hao3 /nǐ
hǎo/ ni3 hao3

/nǐ hǎo
nǐ
hǎo
nǐ hǎo/ ni3 hao3 
```

它似乎工作得很好（至少满足我的需要），因此我认为这个问题已经结束。非常感谢所有相关人员，特别是 Lev Levitsky 先生！

PS：我也将代码放在[这里（GitHub）](https://gist.github.com/2690801)，您可以在其中跟踪一些可能的未来变化。

PS 2：`^A`保存此答案时字符丢失。现在它们在这里被替换为它们的 ASCII 表示。您必须将它们替换为它们的二进制表示（在插入模式下`vi(1)`按下`^V ^A`）或使用[GitHub 版本](https://gist.github.com/2690801)。

PS 3：我仍然觉得`^A`“hack”很丑。如果有人知道在这种情况下避免它，同时仍然像现在一样简单的中间转换代码，请分享您的想法。

# php - 循环内循环mysql计数

> ID：11004065
> 
> 赞同：1
> 
> 时间：2012-06-12T20:10:19.033
> 
> 标签：php, mysql

我设置了一些表格来代表不同的产品，因为有些产品与其他产品具有不同的属性。

我正在尝试计算从特定城市列出的项目数量。我的sql语句如下：

```
Select count(*) as count from location, tbl_books where location.city = tbl_books.location && location.city = 'London' && location.country = 'United Kingdom'

Select count(*) as count from location, tbl_clothes where location.city = tbl_clothes.location && location.city = 'London' && location.country = 'United Kingdom' 
```

这循环计算全国所有城市的结果。这些循环代表内部循环。外循环遍历不同的类别表。

我发现这不是很有效，并且想知道是否有人可以提出任何解决此问题的方法。我正在考虑只创建一个包含城市和类别字段的主表，并在每次从特定城市添加新项目时增加主表中的计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:13:22.357

以下 SQL 查询将通过将 location table.city 键与 tbl_books.location 键连接起来，将 count 和 location.city 值作为一个查询返回。

```
Select count(*) as count, location.city 
from location, tbl_books 
where location.city = tbl_books.location
group by location.city 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:14:17.630

这将按城市总结英国所有城市的所有书籍（在我脑海中，未经测试）：

```
select tbl_books.location, count(tbl_books.location) as count
from location inner join tbl_books on location.city = tbl_books.location
where location.country = 'United Kingdom'
group by tbl_books.location 
```

结果应如下所示：

```
location  |  count
--------------------
London    |  5
--------------------
Newcastle |  1
--------------------
...       | ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T20:16:21.697

这个查询应该给你所有城市和国家的图书数量，不需要循环：

```
SELECT 
    location.country, 
    location.city,
    COUNT(*) as `count` 
FROM locaton
INNER JOIN tbl_books ON location.city = tbl_books.location 
GROUP BY location.country, location.city
ORDER BY location.country, location.city 
```

结果将如下所示：

```
country          |   city    |   count
-----------------+-----------+-----------
France           | Paris     |  1
United Kingdom   | Belfast   |  2
United Kingdom   | London    |  3
... 
```

# ms-access-2007 - Access 2007加入更新查询

> ID：11004066
> 
> 赞同：1
> 
> 时间：2012-06-12T20:10:19.023
> 
> 标签：ms-access-2007

在 Access 2007 中有 2 个表，这两个表都列出了要完成的某些任务。

-总结-大师

每个表都有不同的格式，但 Summary 表包含一些 Batch ID，其中一些与 Master 表匹配。

我想要做的是更新主表中项目的“发布日期”，并在汇总表上按批次 ID 匹配行的“输入日期”。

例如，Master 有批次 ID 1、2、3 和 4..而摘要只有批次 ID 1 和 4。我想从包含批次 ID 1 和 4 的行中获取发布日期并更新这些相应的主表中相应行上的“发布日期”。

现在我有一个查询，它将两个表连接在一起以通过 Batch ID 查找匹配项（并且工作正常），但我在更新查询时遇到了问题。

具体来说，如果摘要中的发布日期存在（如，不为空），我只想更新“发布日期”。

任何关于如何做到这一点的想法都会非常有用。谢谢！

```
 Sample Data:

    Master List:
    ID |    Title    |  Batch   |   Posted Date
    1      Capital       CRN01       
    2      Commercial    CMP04    
    3      Dogs          DOG07    

    Summary List:

    Reference | Entry Date  
    CRN003      4/9/2012
    CRN01       4/13/2012
    CMP04       5/3/2012
    PLM03       3/3/2012 
```

因此，我希望将与它们的批次编号匹配的主列表项目与摘要的参考编号相匹配，并将这些相应项目的输入日期更新回主列表。

查询后，主列表应如下所示：

```
 ID | Title     |  Batch  | Posted Date
    1    Capital      CRN01     4/13/2012
    2    Commercial   CMP04     5/3/2012
    3    Dogs         DOG07                 (no change) 
```

解决了：

使用单个更新查询，将参考字段链接到批处理字段，然后将更新到字段作为 [摘要].[发布日期]。以为我必须使用 2 个查询，但一个解决了 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:24:08.990

使用单个更新查询，将参考字段链接到批处理字段，然后将更新到字段作为 [摘要].[发布日期]。以为我必须使用 2 个查询，但一个解决了 :)

# c++ - 从 Maven 访问自定义（非 Java）工件存储库

> ID：11004068
> 
> 赞同：4
> 
> 时间：2012-06-12T20:10:21.887
> 
> 标签：c++, c, maven, repository

我正在寻找一种使用 Maven 访问自定义的非 Java 工件存储库的方法。我们有一个工件存储库（或多或少）由 Windows 共享上的一堆 zip 文件（包含本机可执行文件、头文件等）组成。这些可以通过 Ruby 脚本访问，该脚本可以根据需要具体化/解压缩这些工件。还有一些工件没有存储在磁盘上，而是从其他地方实现的（例如 Subversion）。

我希望能够将这些存储库集成到 Maven 构建中，以便（例如）集成测试可以使用本机工件中的 .exe 和 .dll 文件。我看过 Nexus 和 Artifactory，但很难说它们是否适合这种情况。大多数关于“自定义布局”的文档似乎都假设我们正在谈论某种 Java 工件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T12:47:40.837

忘记这些东西被称为“Maven Repositories”的事实，虽然 Maven 对存储库结构有一定的期望，但同样的结构也是几乎所有其他 Java 构建工具所使用的结构。将这些东西视为具有坐标的工件的通用存储：groupId、artifactId、version、qualifier。

一个好的存储库管理器并不关心您在此存储库中存储的内容。它可以是 ZIP 文件、EXE 文件，无论您想存储什么。它所关心的只是工件存储在这个存储库结构中。当您使用存储库管理器时，您最终会得到一组可通过这些坐标寻址的工件。

我使用存储库管理器来做许多与 Java 无关的事情，包括存储部署过程中使用的 ZIP 文件。我使用 curl 访问我的存储库管理器。在这种情况下，它可以被视为一个简单的 REST 可访问位存储桶，它将某些结构应用于您存储在其中的文件。

（另外，请注意我的回答不是针对 Artifactory 或 Nexus 的营销。;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:12:57.750

这里最简单的解决方案是通过 HTTP 公开您的存储库，以便它恰好具有标准的 Maven 布局和元数据。

如果这对您不起作用，您将学习如何实现一些 Maven。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T06:25:52.307

Artifactory 不与 Maven 绑定，可以存储和搜索任何二进制文件，无论布局如何（仅当您希望 Artifactory 提取有关您的工件的模块信息时才需要自定义布局，用于版本自动清理、跨布局转换、 ETC。）。

由于 Artifactory 完全可以通过 HTTP 访问，因此任何可以发送 GET 和 PUT 查询（分别用于解析和发布）的构建工具都可以与它对话。一个常见的用例是使用 curl，但 Artifactory 还与领先的 CI 工具具有很好的 OOTB 集成，以便于基于配置的解析和发布。作为有关使用 Artifactory 运行非 Java/非 Maven 构建的一般信息，您可能会发现[这篇博文很有帮助。](http://blogs.jfrog.org/2012/05/go-beyond-java-with-ci-server-and.html)

# iphone - 缩进 UITableViewCell 并显示 TableView 的背景

> ID：11004069
> 
> 赞同：0
> 
> 时间：2012-06-12T20:10:22.690
> 
> 标签：iphone, xcode, uitableview, customization

有什么办法可以缩进一个表格视图单元格并能够看到表格视图背景？

```
------------
|normal     |
------------
xx|indented |
------------
|normal     |
-------------
xxxxxxxxxxxx
xxxxxxxxxxxx 
```

这就是我正在寻找的效果。x = 苹果提供的纹理亚麻背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:16:53.647

设置部分的高度，比如 39，然后在部分的视图中创建一个视图，用清晰的颜色设置是的背景颜色 n 返回这个视图，告诉我这是否对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:54:14.303

我要做的是 UITableViewCell 的子类，默认情况下使用 clearColor 单元格。在单元格之上创建您自己的内容视图。

创建一个`setIndented`对单元格宽度和位置应用调整的方法。现在，从您的`cellForRowAtIndex`方法中，您可以对要缩进的单元格执行类似的操作。

```
[cell setIndented]; 
```

希望这会有所帮助，对于我通过手机执行此操作时出现的任何拼写错误，我们深表歉意。:)

您可以为缩进方法尝试类似的方法。

**更新**：您的 setIndented 方法可能如下所示。我们设置了一个缩进填充，将其添加到 x 轴，因为宽度减去了填充，因此单元格不会超出屏幕。这是未经测试的，只是理论。

```
int padding = 30;
[self.viewLayer setFrame:CGRect(self.viewLayer.frame.origin.x+padding,self.viewLayer.frame.origin.y,self.viewLayer.frame.width-padding,self.viewLayer.frame.height)]; 
```

# objective-c - NSToolbar：如何使用选定的项目进行初始化？

> ID：11004072
> 
> 赞同：5
> 
> 时间：2012-06-12T20:10:31.437
> 
> 标签：objective-c, cocoa, xcode4.2, osx-snow-leopard

我有一个带有 NSToolbar 的首选项窗口的 Mac OS 应用程序。

我还有一个自定义子视图，以及当用户单击其中一个选项时在第一个视图中加载的其他 3 个自定义视图。

到现在为止还挺好。现在我意识到加载窗口时默认情况下不选择第一项。

除了我使用的“可选”之外，我在检查器中看不到任何选项。但是没有“选择”。我应该以编程方式进行吗？如何？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T22:02:03.957

`NSToolbar`有一个`-setSelectedItemIdentifier:`可以在你的方法中使用的`-windowDidLoad`方法。

# c - 在mac中使用Carbon Framework检测双显示器/显示器？

> ID：11004073
> 
> 赞同：1
> 
> 时间：2012-06-12T20:10:48.843
> 
> 标签：c, macos, xul, macos-carbon, xulrunner

Carbon 框架中是否存在用于检测双显示器的 API。

我想为我的 xulrunner 应用程序找到这个？我想知道在我在 mac 中启动我的应用程序之前是否存在第二台显示器。

我需要这个，因为我正在做一个信息亭类型的应用程序。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:19:28.567

您应该为此使用[`nsIScreenManager`服务](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIScreenManager)：

```
var screenManager = Components.classes["@mozilla.org/gfx/screenmanager;1"]
                              .getService(Components.interfaces.nsIScreenManager);
alert(screenManager.numberOfScreens); 
```

# recursion - LISP-在旋转列表函数中改进对尾递归的递归

> ID：11004075
> 
> 赞同：2
> 
> 时间：2012-06-12T20:10:50.950
> 
> 标签：recursion, functional-programming, lisp, rotation, tail-recursion

我在 LISP 中有一个递归函数来向右或向左旋转列表，如下所示：

（如果数字为正 - 向左推，如果为负 - 向右推）

```
> (rotate-n ‘(5 6 7 8 9) -3)
    (7 8 9 5 6)

> (rotate-n ‘(5 6 7 8 9) 3)
    (8 9 5 6 7) 
```

功能：

```
(defun rotate-n (L n)
  (cond ((= n 0) L)
        ((> n 0) (rotate-n (rotate-left L) (- n 1)))
        ((< n 0) (rotate-n (rotate-right L) (+ n 1))))) 
```

有没有办法使用尾递归获得相同的结果？向右旋转和向左旋转功能可以正常工作。

编辑：我很困惑。我上面写的函数是尾递归。如果我没记错的话，这个函数是出于相同目的的常规递归：

```
(defun rotate-n-r (L n)
  (cond ((= n 0) L)
        ((> n 0) (rotate-left (rotate-n-r L (- n 1))))
        ((< n 0) (rotate-right (rotate-n-r L (+ n 1)))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:14:44.177

这是一个尾递归函数，可以满足您的要求：

```
(defun rotate-list (list n)
  (cond ((plusp n)
         (rotate-list
          (append (rest list) (list (first list)))
          (1- n)))
        ((minusp n)
         (rotate-list
          (append (last list) (butlast list))
          (1+ n)))
        (t list))) 
```

请注意，它消耗（即分配内存）很多：

```
(ext:time (rotate-list '(5 6 7 8 9) 30))
                                           Permanent            Temporary
Class                                 instances   bytes    instances   bytes
-----                                 --------- ---------  --------- ---------
CONS                                          5        80        145      2320
-----                                 --------- ---------  --------- ---------
Total                                         5        80        145      2320
Real time: 3.2E-5 sec.
Run time: 0.0 sec.
Space: 2400 Bytes
(5 6 7 8 9) 
```

一个非consing版本：

```
(defun nrotate-list (list n )
  (cond ((plusp n)
         (nrotate-list
          (nconc (rest list) (progn (setf (cdr list) nil) list))
          (1- n)))
        ((minusp n)
         (nrotate-list
          (nconc (last list) (nbutlast list))
          (1+ n)))
        (t list))) 
```

在仍然是尾递归的情况下不分配任何东西：

```
(time (nrotate-list '(5 6 7 8 9) 30))
Real time: 2.3E-5 sec.
Run time: 0.0 sec.
Space: 0 Bytes
(5 6 7 8 9) 
```

请注意，这两个版本在性能方面都非常愚蠢（它们为*每次迭代扫描列表**两次*，即它们的时间复杂度为）。*`O(n*length(list))`*

 *有效的版本将只扫描*一次*列表（即时间复杂度`O(length(list))`）并且*不会*递归。*

# wcf - 在 WCF 服务中记录错误

> ID：11004078
> 
> 赞同：0
> 
> 时间：2012-06-12T20:11:02.383
> 
> 标签：wcf

我有一个 WCF 服务：

```
public class Service1 : IService1
{
    public void DoWork()
    {
        throw new ApplicationException("HOLY MICE!");
    }
} 
```

看到那个例外了吗？我想记录下来。我还想记录我没想到的异常。很简单，对吧？

所以，我这样做了：

![wcf 跟踪配置](../Images/8442eac15d41594a099684aad042a582.png)

令人惊讶的是，我没有看到任何关于“HOLY MICE！”的内容。在生成的日志文件中。我不知道这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:24:14.267

您将需要跟踪级别来跟踪错误。看起来您有“跟踪级别：警告”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:28:04.310

您需要将跟踪级别设置为错误。~~警告不会记录异常并且跟踪级别不会汇总（例如，设置为警告不会包括错误和严重）~~更新：我完全错了，它确实会汇总

[每个跟踪级别的 MSDN 链接](http://msdn.microsoft.com/en-us/library/ms733025.aspx)

# bash - Haskell Noob 需要帮助

> ID：11004083
> 
> 赞同：1
> 
> 时间：2012-06-12T20:11:35.067
> 
> 标签：bash, haskell

这有点长，所以请耐心等待！

我在使用 Haskell 程序时遇到了一些麻烦，我必须将其用作 uni 项目的一部分。作为参考，它是[Casper](http://www.cs.ox.ac.uk/gavin.lowe/Security/Casper/)。

所以，你应该执行一个脚本，它实际上是一个 Bash 脚本来调用 Hugs 解释器，如下所示：

```
exec $HUGSBIN/hugs $HUGSARGS +p"Casper> " $FILES 
```

其中 $FILES 指向 Main.lhs 文件。

在此之后，我需要在解释器中调用一个带有文件路径的函数“编译”。

我需要以脚本方式执行上述操作。我需要这个自动化，因为我正在编写一个将在后台调用 Casper 的程序。

所以我编译了 .lhs 文件。现在我想执行“编译”功能，但我不知道这是怎么做的。我尝试：

```
./Main compile <a path> 
```

从命令行，但它返回给我一个关于找不到文件“测试”的错误。经过调查，我在 Main.lhs 文件中看到了这些行：

```
>main :: String -> IO()
>main = compile "test"

>compile :: String -> IO()
>compile s = catch (compile0 False s) handler

[...snipped] 
```

第二行解决了这个问题。现在我的问题是，我如何在编译 main.lhs 后调用“编译”函数并传递一个路径？在解释器中，我只需键入“compile”，它就可以工作，但是在编译 main.lhs 并从命令行执行之后，我不能让它工作？任何想法为什么？如果所有其他方法都失败了，我有什么办法可以编写 Hugs 脚本吗？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T20:27:14.093

您可以通过`getArgs`. 例如，听起来您想要一个执行以下操作的 main 函数：

```
>main = do
>    args <- getArgs
>    case args of
>        [] -> putStrLn "What file did you want me to compile?"
>        [filename] -> compile filename
>        _ -> putStrLn "I only compile one file at a time." 
```

修改口味。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T20:31:02.247

替换`main`为

```
 main = getArgs >>= \(arg1:_) -> compile arg1 
```

这将传递第一个命令行参数 ( `arg1`)`compile`而不是 "test"，并忽略其余的 ( `_`)。您可能需要添加

```
 import System 
```

或者

```
import System.Environment 
```

我不记得为此拥抱需要什么。

# c# - 'System.Data.SqlClient.SqlConnection' 抛出异常 Windows 7

> ID：11004086
> 
> 赞同：1
> 
> 时间：2012-06-12T20:11:49.403
> 
> 标签：c#, windows-7

我们的一些新用户获得了全新的 Windows 7 PC，我不确定为什么应用程序启动时出现以下错误。我们以管理员身份运行应用程序，但仍然抛出异常。谢谢！任何帮助表示赞赏！用户也是他们自己 PC 的管理员。

```
'System.Data.SqlClient.SqlConnection' 的类型初始化程序引发了异常。
System.TypeInitializationException：“System.Data.SqlClient.SqlConnectionFactory”的类型初始化程序引发了异常。---> System.TypeInitializationException：“System.Data.SqlClient.SqlPerformanceCounters”的类型初始化程序引发了异常。---> System.IO.FileLoadException: 无法加载文件或程序集 'file:///C:\Users\\OMAIN\AppData\Local\Apps\2.0\7LMDR8E0.X2T\60X0DGVM.VVW\asce..tion_6bf0e6a67bb42923_0001 .0000_1a6b34a6368d30ed\Creation.exe' 或其依赖项之一。访问被拒绝。
   在 System.Reflection.RuntimeAssembly._nLoad（AssemblyName 文件名，字符串代码库，证据 assemblySecurity，RuntimeAssembly locationHint，StackCrawlMark 和 stackMark，布尔 throwOnFileNotFound，布尔 forIntrospection，布尔suppressSecurityChecks）
   在 System.Reflection.RuntimeAssembly.nLoad（AssemblyName 文件名，字符串 codeBase，证据 assemblySecurity，RuntimeAssembly locationHint，StackCrawlMark 和 stackMark，布尔 throwOnFileNotFound，布尔 forIntrospection，布尔suppressSecurityChecks）
   在 System.Reflection.RuntimeAssembly.InternalLoadAssemblyName（AssemblyName assemblyRef，证据 assemblySecurity，StackCrawlMark 和 stackMark，Boolean for Introspection，Boolean suppressSecurityChecks）
   在 System.Reflection.RuntimeAssembly.InternalLoadFrom （字符串 assemblyFile，证据 securityEvidence，Byte [] hashValue，AssemblyHashAlgorithm hashAlgorithm，Boolean for Introspection，Boolean suppressSecurityChecks，StackCrawlMark 和 stackMark）
   在 System.Reflection.Assembly.LoadFrom（字符串 assemblyFile）
   在 System.Runtime.Hosting.ManifestRunner.get_EntryAssembly()
   在 System.AppDomainManager.get_EntryAssembly()
   在 System.Reflection.Assembly.GetEntryAssembly()
   在 System.Data.ProviderBase.DbConnectionPoolCounters.GetAssemblyName()
   在 System.Data.ProviderBase.DbConnectionPoolCounters.GetInstanceName()
   在 System.Data.ProviderBase.DbConnectionPoolCounters..ctor（字符串 categoryName，字符串 categoryHelp）
   在 System.Data.SqlClient.SqlPerformanceCounters..ctor()
   在 System.Data.SqlClient.SqlPerformanceCounters..cctor()
   --- 内部异常堆栈跟踪结束 ---
   在 System.Data.SqlClient.SqlConnectionFactory..cctor()
   --- 内部异常堆栈跟踪结束 ---
   在 System.Data.SqlClient.SqlConnection..cctor()
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:21:24.890

找到异常“creation.exe”中提到的文件并在其上运行[dependency walker](http://dependencywalker.com/)。它可能显示缺少新机器上没有的程序集或 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T06:06:32.737

如果可以从浏览器访问服务，请检查客户端端点行为配置：

```
<endpointBehaviors>
    <behavior name="clientEndpoint">
        <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        <clientCredentials>
            <windows allowedImpersonationLevel="Delegation"/>
        </clientCredentials>
    </behavior>
</endpointBehaviors> 
```

# python - 索引熊猫数据框

> ID：11004088
> 
> 赞同：5
> 
> 时间：2012-06-12T20:11:53.280
> 
> 标签：python, pandas

我有一个`DataFrame`具有以下结构的 Multiindex：

```
 0     1     2     ref
A  B             
21 45  0.01  0.56  0.23  0.02
22 45  0.30  0.88  0.53  0.87
23 46  0.45  0.23  0.90  0.23 
```

我想用它做的是：
从列 [0:2] 中选择最接近列 'ref' 的值，所以预期的结果是：

```
 closest
A  B             
21 45  0.01
22 45  0.88
23 46  0.23 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T18:39:53.053

重建你的`DataFrame`：

```
In [1]: index = MultiIndex.from_tuples(zip([21,22,23],[45,45,46]), names=['A', 'B'])
In [2]: df = DataFrame({0:[0.01, 0.30, 0.45], 
                        1:[0.56, 0.88, 0.23], 
                        2:[0.23, 0.53, 0.90], 
                        'ref': [0.02, 0.87, 0.23]}, index=index)
In [3]: df
Out[3]: 
        0     1     2   ref
A  B                         
21 45  0.01  0.56  0.23  0.02
22 45  0.30  0.88  0.53  0.87
23 46  0.45  0.23  0.90  0.23 
```

我会先得到列的绝对距离`0`，`1`然后`2`从`ref`：

```
 In [4]: dist = df[[0,1,2]].sub(df['ref'], axis=0).apply(np.abs)
 In [5]: dist
 Out[5]: 
         0     1     2
 A  B                   
 21 45  0.01  0.54  0.21
 22 45  0.57  0.01  0.34
 23 46  0.22  0.00  0.67 
```

现在给出`dist`，您可以使用以下方法逐行确定具有最小值的列`DataFrame.idxmin`：

```
In [5]: idx = dist.idxmin(axis=1)
In [5]: idx
Out[5]: 
A   B 
21  45    0
22  45    1
23  46    1 
```

现在要生成你的新的`closest`，那么你只需要使用`idx`索引`df`：

```
In [6]: df['closest'] = idx.index.map(lambda x: df.ix[x][idx.ix[x]])
In [7]: df
Out[7]: 
        0     1     2   ref  closest
A  B                                  
21 45  0.01  0.56  0.23  0.02     0.01
22 45  0.30  0.88  0.53  0.87     0.88
23 46  0.45  0.23  0.90  0.23     0.23 
```

对于最后一步，可能有一种更优雅的方法，但我对 Pandas 比较陌生，这是我现在能想到的最好的方法。

# javascript - 使用 Javascript 创建可重复的 HTML 表格

> ID：11004089
> 
> 赞同：3
> 
> 时间：2012-06-12T20:11:54.523
> 
> 标签：javascript, jquery, html, xml

我需要创建多个保存数据的表。所有表都包含相同的字段，但每个表的数据是使用 jQuery 和 Javascript 从 XML 文件中解析的。目前我的设置是在 HTML 中创建我的格式化表格，其中 'id' 字段标识将放置 XML 数据的区域。例如...

***主要HTML：***

```
<body id="top">
</body> 
```

***模板 HTML：***

```
<table id="sectionTable" border="1" cellpadding="10" cellspacing="1" width="100%">
    <tr><td id="information"></td></tr>
</table> 
```

***加载模板的 Javascript：***

```
$('#top').load('template.html #sectionTable'); 
```

这会在 HTML 文件（在本例中为 template.html）中获取 ID 为“sectionTable”的元素，并将其插入到 ID 为“top”的元素的主体中，该元素是 html 页面的主体。

***将 XML 数据放入表中的 Javascript：*** 我能够很好地解析和存储 XML 数据，然后将其存储到一个变量中。然后我将此数据附加到适当的 html ID 标记...

```
var title = <from XML>; //Lets say in this case title="My Stack Title"

...

$(#information).append(title); 
```

***生成的 HTML：***

```
<table id="sectionTable" border="1" cellpadding="10" cellspacing="1" width="100%">
    <tr>
       <td id="information">My Stack Title</td>
    </tr>
</table> 
```

这种方法的问题在于，当我遍历 XML 的多个部分并使用这种技术时，它不会创建新的 HTML 表，而是会覆盖现有数据，因为我使用相同的 ID。

我知道通过使用 DOM 对象我可以解决这个问题，但我的问题是，虽然这是一个简单的例子，但我的表非常复杂，有多个级别、样式等。这将是很多要创建和嵌套的对象彼此之间的正确性，这对于另一个用户将来很难改变（这很可能）。使用模板方法很容易跟踪所有内容的去向。如果有一种方法可以根据通过 XML 数据的迭代索引在 HTML 中放置唯一 ID，它会解决问题，但我还没有想出如何做到这一点。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:18:19.010

尝试将您的 id="information" 改为一个类，然后遍历类“信息”的每个元素。

```
$('.information').each(function(n,c){
 $(this).append(title);
}) 
```

使用 id 只会查询该 id 的第一个元素。没有测试过这个，但试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:08:39.807

你永远不应该在一个文档中有两个具有相同 ID 的元素——HTML 规范说只能有一个。正如 LCIII 建议的那样，改用类。您可以使用 jQuery 的 .first() 和 .last() 函数检索具有特定类名的第一个和最后一个元素：

```
$('.information').last().append(title); 
```

如果你想在其他同类表之后添加一个新表，你可以这样做：

```
$('.information').first().clone().insertAfter($('.information').last()).append(title); 
```

（英文：克隆第一个信息表，在最后一个信息表之后插入，并附加标题。当然，它没有指定表，但是如果每个 .information 都是一个表......）

代替`.append(title)`，您可以执行任何您需要的操作来覆盖新表中的数据。

# objective-c - Objective C 中的 XMLHttpRequest

> ID：11004090
> 
> 赞同：0
> 
> 时间：2012-06-12T20:11:56.737
> 
> 标签：objective-c, ajax

我希望捕获 AJAX 发布请求，并且我已阅读此线程： [UIWebViewDelegate not monitoring XMLHttpRequest?](https://stackoverflow.com/questions/5353278/uiwebviewdelegate-not-monitoring-xmlhttprequest) >

但是我希望有一些方法可以使用 Obj c 来实现这一点，而无需通过 javascript。我已经有一个 UIWebView 设置及其代表。但既然这没有捕获 XMLHttpRequest，我应该实现什么来实现这一点以及在哪里实现？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:44:54.520

看看 NSURLProtocol - 这应该使您能够拦截请求。

基本上你会 - 创建你自己的从 NSURLProtocol 派生的类，并在 applicationDidFinishLaunchingWithOptions 中注册它：使用 NSURLProtocol:registerclass:

*   连接将调用 initWithRequest:cachedResponse:client: 然后 startLoading。

*   您将使用 URLProtocol:didReceiveResponse:cacheStoragePolicy: 回调连接，对 URLProtocol:didLoadData: 的一些调用，最后是 URLProtocolDidFinishLoading:

一旦你拦截了电话，你就可以允许他们继续，窃听他们，阻止他们继续前进，等等。

# html - 重新调整大小为 1024 像素会产生水平滚动条……但所有 div 的尺寸均为 1024 像素

> ID：11004102
> 
> 赞同：3
> 
> 时间：2012-06-12T20:12:54.613
> 
> 标签：html, css

我需要一些帮助：

[http://www.stansellelectric.com](http://www.stansellelectric.com)

如果您转到此网站上的任何页面并将您的显示器（或 Firefox 浏览器，如果您使用 Web Developer 工具栏）的大小重新调整为 1024x768，那么#contentwrap div 和页面本身都会出现一个水平滚动条。现在，将窗口的宽度增加到 1039px 可以解决这个问题，但是我需要它保持在 1024px 并且在任何地方都没有滚动条。

我卡住了，请帮忙？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T20:15:21.820

1024 像素是屏幕的总宽度。

为了使内容适合 1024 像素的屏幕，您需要考虑*垂直*滚动条（通常宽度为 16-24 像素）和（在某些浏览器中）窗口的边缘。这些将占用水平空间。

底线：您需要为内容使用小于 1024 像素的宽度。一个在设计师中流行的数字是 960 像素，也是因为它可以平分；例如，[960 网格系统](http://960.gs/)（一种流行的 CSS 框架）使用它。

但是，根据我的经验，稍高的数字（如 980 甚至 1000）也适用于大多数设备。

# c# - Log4Net 不会在事件查看器中创建自定义事件日志

> ID：11004111
> 
> 赞同：0
> 
> 时间：2012-06-12T20:13:24.073
> 
> 标签：c#, log4net, event-log

我的 WPF 应用程序使用 Log4Net 将消息记录到事件查看器。这在大多数机器上都很好用。但是，我办公室有两台机器出现问题。一个是具有 2 GB 内存的物理 Windows 7 机器，另一个是运行 XP 的虚拟机，它也具有 2 GB 内存。

问题是即使用户使用具有管理员权限的帐户登录，系统也不会让他们创建我为我的应用程序设置的自定义事件日志。这导致我的程序死亡。

我可以在所有 Log 调用上添加错误处理，但我的感觉是我不应该这样做。正在将消息记录在 catch 处理程序中以处理已发生的另一个错误。如果无法记录错误信息，我该怎么办？

无论如何，我昨天尝试在 XP 虚拟机上创建自定义事件日志，但仍然没有创建。我究竟需要做什么才能在这两台机器上创建自定义事件日志？

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:22:00.883

事实证明，问题根本不在日志记录代码中。我的程序使用 WPF 作为 GUI。它的启动序列在 UI 线程上做最少的工作，因此它可以尽快显示 UI。

其余的初始化在后台线程上完成。我知道发生了错误，但在事件查看器的日志列表中找不到自定义错误日志。事实证明，我的代码在数据库中没有找到它需要的一些数据，并试图报告错误。这是一个两步过程，首先将错误记录到日志中，然后显示自定义`MessageBox`对话框。`XamlParseException`当程序试图显示此对话框时，我得到了一个。

长话短说，导致程序崩溃的问题是`XamlParseException`. 这是因为我`MessageBox's` `Show`在后台线程上调用自定义方法，而不是在 UI 线程上。因为在事件查看器中找不到自定义事件源，所以找不到错误，所以我认为错误是权限问题。

顺便说一句，我曾经尝试过手动创建事件日志，昨天我检查了注册表，确实找到了自定义事件源的条目。

这里还有另一台机器也有同样的问题。我确定这是同一个问题。我正在向错误处理中添加逻辑，以确保`MessageBox`始终在 UI 线程上调用自定义，这样如果再次出现相同的问题，程序就不会像那样爆炸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:24:16.977

我们需要看看您是如何尝试在 XP 机器上创建事件日志的...

通常，您需要阅读以下内容：http: [//msdn.microsoft.com/en-us/library/49dwckkz (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/49dwckkz(v=vs.80).aspx)

特别是讨论何时创建自定义事件日志的注释：

*“通常，在安装应用程序期间创建新的事件源。这允许操作系统有时间刷新其注册事件源列表及其配置。如果操作系统没有刷新其事件源列表并且您尝试使用新源写入事件，写入操作将失败。如果无法在安装期间创建源，请尝试在第一次写入操作之前创建源，可能在应用程序初始化期间。如果您选择此选项方法，请确保您的初始化代码在计算机上以管理员权限运行。这些权限是创建新事件源所必需的。”*

尝试在第一个日志事件之前创建自定义日志以使用它。

# javascript - 定时 Javascript 文件刷新而不重新加载页面

> ID：11004113
> 
> 赞同：1
> 
> 时间：2012-06-12T20:13:27.443
> 
> 标签：javascript, jquery, ajax

我有一个在我的文档的 head 标签中调用的 javascript 文件，每隔 30 秒，我希望重新加载这个 javascript 文件。

我对此进行了一些研究，似乎它在提取本地存储的文件副本时存在问题，或者跨浏览器问题......

从缓存中提取它不是问题，因为实际文件没有改变，它只需要重新加载。

这会是一个ajax任务吗？我该怎么做呢？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:16:39.307

```
function foo(){
    $.getScript( url, function(script, textStatus, jqXHR){
        script...
    });
}

setInterval(foo, 30000); 
```

> **缓存响应**
> 
> 默认情况下，$.getScript() 将缓存设置设置为 false。这会将时间戳查询参数附加到请求 URL，以确保浏览器在每次请求时下载脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:16:37.233

将你的 JS 文件的相关部分变成一个函数，而不是立即执行的代码，然后使用`setInterval`in order 每 30 秒调用一次。

```
var myFunction = function()
{
    // do your thang
}

myFunction();

setInterval(myFunction, 30000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:17:03.277

获取`<script>`标签的 DOM 句柄，然后设置其`src`属性（可能类似于 `blah.js?nocache=somethingrandom`）

警告帝王：这不会以跨浏览器安全的方式运行文件中的内容。

# ruby-on-rails - 仅获取 Rails 循环的增量信息

> ID：11004117
> 
> 赞同：1
> 
> 时间：2012-06-12T20:13:34.067
> 
> 标签：ruby-on-rails, ruby, json, loops

鉴于以下代码：

```
var photos = [
<% current_app_user.photos.each do |photo| %>
{ url: "<%= photo.thumbnail_uri(400, 189) %>", title: "<%= truncate(photo.name, 65) %>", path :"<%= photo_path(photo) %>" },
<% end %>
]; 
```

我将如何修改它以一次只提取 10 张照片？

最初，我想生成 10 个，然后单击按钮追加 10 个，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:19:16.987

您应该在控制器中执行此操作，而不是在您的视图中，但在控制器中您应该这样做：

```
@photos = current_app_user.photos.all(:limit => 10).map do |p| 
  { :url => p.thumbnail_uri(400, 189),
    :title => p.name,
    :path => photo_path(p) }
end 
```

在您看来：

```
var photos = <%= @photos.to_json %>; 
```

除了绝对必要的代码之外，您认为没有代码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:16:26.677

如果你只想要 10 个结果，你可以简单地使用 limit 方法：

```
current_app_user.photos.limit(10).each { |photo| # etc... } 
```

如果您需要获取所有照片，但将它们分成 10 个块，并且您正在使用 jQuery，那么您可以使用我创建的这段[代码](https://gist.github.com/2661361)`each_slice`向核心 jQuery 对象添加一个函数。在这种情况下它可能很有用。

# kineticjs - KineticJS - 移动精灵导致未知错误

> ID：11004121
> 
> 赞同：1
> 
> 时间：2012-06-12T20:13:44.323
> 
> 标签：kineticjs

我正在尝试在 KineticJS 中编写代码来移动由包含其精灵的组表示的单元（这是一个组，因为我可能想在图形表示中添加更多东西）。

运动功能的代码是：

```
this.moveTo = function(x,y) {
distance = Math.sqrt((this.shape.getX() - x)*(this.shape.getX() - x)+(this.shape.getY() - y)*(this.shape.getY() - y));
time = distance / MOVEMENT_SPEED;
var sprite = this.sprite;
this.sprite.setAnimation('walkDown'); //TODO: change
this.group.transitionTo({
        x: x,
        y: y,
        duration: time,
        easing: "ease-in-out",
        callback: function(){
            sprite.setAnimation('idle');
        }
    })
} 
```

没有这条线，`sprite.setAnimation('idle');`一切都很好。有了这条线，大部分时间一切仍然按预期工作（即动画在运动结束后停止）但有时精灵完全消失，我收到以下神秘的错误消息：

> 错误：d 未定义”在 kinetic-v3.9.8.min.js 的第 29 行

出于测试的目的，现在通过在屏幕上单击鼠标来调用 moveTo。我认为这可能与我在上一个动作结束之前单击鼠标有关，但有时即使我小心不这样做也会发生错误。

编辑：当我在舞台边缘附近单击并且移动命令命令单元“退出”它时，大部分时间都会发生错误。尽管如此，除非我更改精灵动画并且我不了解连接，否则不会发生任何不好的事情。此外，我设法在不单击边界附近的任何地方的情况下重现了该错误，这种情况更加罕见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T05:54:53.987

解决了。这与运动无关，并且像我的大多数错误一样，非常尴尬。我只是忘记使用 sprite.setIndex() 将动画更改为仅包含一帧的“空闲”，而不是“walkDown”。

底线： sprite.setIndex() 很重要。

# java - 如何使用树找到最长的公共子串？

> ID：11004123
> 
> 赞同：14
> 
> 时间：2012-06-12T20:14:03.853
> 
> 标签：java, algorithm, data-structures, tree, substring

根据 wiki，最长的公共子串问题可以使用后缀树来解决。
来自[维基](http://en.wikipedia.org/wiki/Longest_common_substring_problem)：

> 一组字符串的最长公共子串可以通过为字符串构建一个广义后缀树，然后从它下面的子树中的所有字符串中找到具有叶节点的最深内部节点来找到

我不明白这个。
示例：如果我有：
`ABCDE`然后`XABCZ`
后缀树是（`XABCZ`由于空格而省略了一些分支）：
![在此处输入图像描述](../Images/2ec7acbce1b07ed0bc1efdf0094b7893.png)

最长的公共子字符串是`ABC`，但它不是我看不到 wiki 的描述在这里有什么帮助。
`ABC`不是具有叶节点的最深内部节点。
任何帮助理解这是如何工作的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T21:16:57.937

就像之前所说的，你的树是不正确的。

这就是通过我的代码运行“ABCDE$XABCZ”时得到的结果。

[后缀树代码](https://github.com/phishman3579/java-algorithms-implementation/blob/master/src/com/jwetherell/algorithms/data_structures/SuffixTree.java)：

```
String = ABCDE$XABCZ$
End of word character 1 = $
└── (0)
    ├── (20) $
    ├── (22) ABC
    │   ├── (15) DE$
    │   └── (23) Z$
    ├── (24) BC
    │   ├── (16) DE$
    │   └── (25) Z$
    ├── (26) C
    │   ├── (17) DE$
    │   └── (27) Z$
    ├── (18) DE$
    ├── (19) E$
    ├── (21) XABCZ$
    └── (28) Z$ 
```

在（紧凑）后缀树中，您需要从所有字符串中找到具有叶节点的最深内部节点。如果在同一深度有多个节点，则必须比较该节点表示的字符串的长度。即ABC、BC、C都有相同的深度，所以要比较ABC、BC、C字符串的长度，看哪个更长；这显然是ABC。

[后缀特里代码](https://github.com/phishman3579/java-algorithms-implementation/blob/master/src/com/jwetherell/algorithms/data_structures/SuffixTrie.java)：

```
└── null
    ├── A
    │   └── B
    │       └── C
    │           ├── D
    │           │   └── (E) ABCDE
    │           └── (Z) ABCZ
    ├── B
    │   └── C
    │       ├── D
    │       │   └── (E) BCDE
    │       └── (Z) BCZ
    ├── C
    │   ├── D
    │   │   └── (E) CDE
    │   └── (Z) CZ
    ├── D
    │   └── (E) DE
    ├── (E) E
    ├── X
    │   └── A
    │       └── B
    │           └── C
    │               └── (Z) XABCZ
    └── (Z) Z 
```

在（不紧凑的）后缀树中，从所有字符串中找到最深的内部节点，这些节点具有叶节点。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T20:28:04.157

您实际上还没有绘制后缀树。如果你做得正确，从根本上你只会拥有每个可能的角色一次。仅当单个字母可以具有多个后续后缀时，树才会分裂。这迫使公共子串在树中聚集在一起，这使得它们可以被找到。

# php - 使用 PHP/YQL 从 Yahoo 的首页抓取数据

> ID：11004127
> 
> 赞同：0
> 
> 时间：2012-06-12T20:14:17.673
> 
> 标签：php, oauth, yahoo, yql

如果某些术语出现在雅虎首页上的前 10 个“热门话题”列表中，我希望得到通知。我创建了一个小脚本，使用 file_get_contents(' [http://www.yahoo.com](http://www.yahoo.com) ');解析首页。然后使用正则表达式将其解析出来。这有效，但它很脆弱。如果他们稍微改变一下html怎么办？

我想以正确的方式做到这一点，并获得与 XML 相同的信息。所以我研究了使用 YQL。我找到了正确的查询：

[http://query.yahooapis.com/v1/yql?q=select%20](http://query.yahooapis.com/v1/yql?q=select%20) *%20from%20timesense.trending%20where%20locale%3D'en-US'&diagnostics=true

但是我不太明白如何使用它来提出我的请求，因为我收到了 Oauth 错误。

```
$request = "http://query.yahooapis.com/v1/yql?q=select%20*%20from%20timesense.trending%20where%20locale%3D'en-US'&diagnostics=true"; 
$session = curl_init($request);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
$list = curl_exec($session);
echo $list; 
```

给我这个错误：

> 请提供有效的凭据。OAuth oauth_problem="OST_OAUTH_PARAMETER_ABSENT_ERROR", realm="yahooapis.com"请提供有效凭据。OAuth oauth_problem="OST_OAUTH_PARAMETER_ABSENT_ERROR", realm="yahooapis.com"

现在我知道我需要创建一个访问密钥/API 密钥。我现在有一个。我只是不知道如何包含它。我看到的所有示例都是针对我将请求用户登录名/密码的社交应用程序。我想要的只是使用 PHP 将这 10 个东西的列表作为 XML。我该怎么做才能得到这个？我的下一步应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:23:37.960

一些 YQL 表需要“双腿”OAuth，基本上意味着请求上的签名。我对这个答案的评论应该有助于解释所需的签名步骤： [如何开始使用 oauth for YQL 获取历史股票数据？](https://stackoverflow.com/questions/8941569/how-do-i-get-started-with-oauth-for-yql-for-historical-stock-data/8947798#8947798)

# jquery - 使用 jQuery 创建复选框并在选中其他复选框时取消选中一个

> ID：11004128
> 
> 赞同：0
> 
> 时间：2012-06-12T20:14:27.123
> 
> 标签：jquery, checkbox

我需要通过单击一个按钮来创建表单元素，但我还想确保是否单击了完全注册，其他的未单击，反之亦然。如果单击其他任何一个，则未单击完全注册。disableFull 函数是对每个复选框的 onClick。这是我的 jQuery：

```
<script type="text/javascript">
    $(document).ready(function() {

    $("#addGuest").click(function() {

        var intId = $("#guestForm div").length + 1;
        var fieldWrapper = $("<div class=\"fieldwrapper\" id=\"field" + intId + "\"/>");
        var fName = $("<label>Guest Name</label><input type=\"text\" class=\"exclusive\" id=\"guestName" + intId + "\" />&nbsp;");
        var fguestOptionFull = $("<label>Full Registration</label><input type=\"checkbox\" class=\"options\" name=\"guestOptionFull\" id=\"guestOptionFull" + intId + "\" onClick=\"disableFull('guestOptionFull" + intId + "\')\" value=\"415\">");
        var fguestOptionBreakfast = $("<label>Breakfast</label><input type=\"checkbox\" class=\"options\" id=\"guestOptionBreakfast" + intId + "\" onClick=\"disableFull('guestOptionFull" + intId + "\')\" value=\"100\">");
        var fguestOptionThursdayDinner = $("<label>Thursday Dinner</label><input type=\"checkbox\" class=\"options\" id=\"guestOptionThursdayDinner" + intId + "\" onClick=\"disableFull('guestOptionFull" + intId + "\')\" value=\"75\">");
        var fguestOptionFridayDinner = $("<label>Friday Dinner</label><input type=\"checkbox\" class=\"options\" id=\"guestOptionFridayDinner" + intId + "\" onClick=\"disableFull('guestOptionFull" + intId + "\')\" value=\"75\">");
        var fguestOptionSundayWorship = $("<label>Sunday Worship</label><input type=\"checkbox\" class=\"options\" id=\"guestOptionSundayWorship" + intId + "\" value=\"0\" onClick=\"disableFull('guestOptionFull" + intId + "\')\" />");
        var removeButton = $("<input type=\"button\" class=\"remove\" value=\"-\" />");
        removeButton.click(function() {
            $(this).parent().remove();
        });
        fieldWrapper.append(fName);
        fieldWrapper.append(fguestOptionFull);
        fieldWrapper.append(fguestOptionBreakfast);
        fieldWrapper.append(fguestOptionThursdayDinner);
        fieldWrapper.append(fguestOptionFridayDinner);
        fieldWrapper.append(fguestOptionSundayWorship);
        fieldWrapper.append(removeButton);
        $("#guestForm").append(fieldWrapper);

    });

    disableFull = function(id) {
        if ($("#" + id + ":checked").length > 0) {
            this.$("input:checkbox").each(function(x) {
                if ($(x).hasclass("options")) {
                    $(x).removeAttr('checked');
                }
            });
        }
        else {
            this.$("input:checkbox").each(function(x) {
                $(x).attr('checked', true);
            });

        }

    }
});​

</script>

<span id="addGuest">Add Guest</span><div id="guestForm"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:46:58.513

尝试这个：

```
disableFull = function(id) {
    $('#guestForm').on('click', '.fieldwrapper input:checkbox', function() {
        if ($(this).attr('id') == 'guestOptionFull1' && $(this).is(":checked")) {
            $('.fieldwrapper input:checkbox').not('#guestOptionFull1').attr('checked', false);
        } else if ($(this).attr('id') != 'guestOptionFull1' && $(this).is(":checked")) {
            $('#guestOptionFull1').attr('checked', false)
        }
    });
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/wzUbM/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:33:41.860

由于您使用的是 jquery，因此您不需要内联 onclick。您可以只使用 on 将更改事件委托给动态创建的元素。然后你点击检查它是否是'guestOptionFull'选项。如果是，则遍历兄弟元素并选中/取消选中它们。

```
$('body').on('change', 'input:checkbox', function() {
   if ($(this).attr('name') === 'guestOptionFull' && $(this).is(':checked')) {
        $(this).siblings().not('input[name=guestOptionFull]').prop('checked', false);
   }
   else if($(this).attr('name') === 'guestOptionFull' && $(this).not(':checked')) {
        $(this).siblings().not('input[name=guestOptionFull]').prop('checked', true);
   }
}); 
```

[http://jsfiddle.net/HCeBr/5/](http://jsfiddle.net/HCeBr/5/)

# google-app-engine - 数据存储统计信息一周未更新

> ID：11004131
> 
> 赞同：0
> 
> 时间：2012-06-12T20:14:30.327
> 
> 标签：google-app-engine, statistics, google-cloud-datastore, admin, dashboard

数据存储统计信息大约有一周没有更新。

我不确定这是错误的，但这有点令人困惑。

有什么方法可以更定期地更新统计信息，还是我只需要等待？

或者可能是某种错误？

这是数据存储统计页面的屏幕截图（显示 292 MB）：

![在此处输入图像描述](../Images/aa932b691db7ebf83cda54222f45880b.png)

虽然 Dashboard 显示已经存储了大约 36 GB 的数据：

![在此处输入图像描述](../Images/8969162aae4f6a13211d75b4eb8fd693.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T20:19:59.203

这似乎是当前引擎的问题。这是讨论。 [https://groups.google.com/forum/#!topic/google-appengine/pktY3a3Kzu4](https://groups.google.com/forum/#!topic/google-appengine/pktY3a3Kzu4)

所以我想你只能等到它解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T00:52:04.120

现在有一个关于[数据存储统计信息没有](https://code.google.com/p/googleappengine/issues/detail?id=10613)至少每 24 小时更新一次的缺陷报告（问题 10613）。请加注星标和/或发表评论。

# authentication - 在客户端第一次连接到服务器时，VPN 是否可以“中间人”？

> ID：11004133
> 
> 赞同：2
> 
> 时间：2012-06-12T20:14:35.273
> 
> 标签：authentication, ssh, passwords, vpn, man-in-the-middle

根据[http://en.wikipedia.org/wiki/Secure_Shell#Key_management](http://en.wikipedia.org/wiki/Secure_Shell#Key_management)，ssh 在与服务器建立第一个连接时容易受到“中间人”攻击。

> SSH 还支持由自动生成的密钥加密的基于密码的身份验证。在这种情况下，攻击者可以模仿合法方，询问密码并获取密码（中间人攻击）。然而，这只有在双方以前从未进行过身份验证的情况下才有可能，因为 SSH 会记住远程端曾经使用过的密钥。

VPN是否有同样的“弱点”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T05:20:56.690

如果 VPN 服务器使用客户端已知的密钥进行身份验证，那么就没有问题 - 密钥是已知的（并且据说是受信任的）并且客户端可以确定它已连接到合法服务器。

这同样适用于 SSH。维基百科中的措辞并不完全正确——为了使第一个连接可靠，客户端应该*知道*有效的服务器密钥。“他们之前已经过身份验证”并不重要。客户信任密钥很重要。

客户端如何信任密钥？在 SSL/TLS 中使用 X.509 证书时，它会根据复杂的规则进行验证，并且证书链会构建到受信任的根证书。如果无法构建链，则最终实体证书不可信。在 SSH 中没有证书链，客户端可以信任服务器的唯一方法是客户端使用其他机制（语音呼叫或纸质或 USB 记忆棒或单独的 SSL/TLS 连接等）传输服务器的密钥。

# java - 使用 Hibernate for ORM 的抽象/具体类的 MySQL 表

> ID：11004135
> 
> 赞同：1
> 
> 时间：2012-06-12T20:14:38.620
> 
> 标签：java, mysql, hibernate, abstract

我有以下课程：

```
public abstract class Generic(){
    private int Id;
    ...
}

public class ExtA extends Generic(){
    private Generic fieldA();
    private Generic fieldB();
    ...
}

public class ExtB extends Generic(){
    private Generic fieldA;
    ....
}

public class ExtC extends Generic(){
    ...
} 
```

很抱歉这个模糊的例子。

我试图找到一种方法将这些对象保存到数据库中，但似乎找不到一个好方法。我希望有单独的表`ExtA`, `ExtB`, `ExtC`，然后使用外键来关联包含的字段。我正在使用 MySQL，并使用 Java、Spring、Hibernate。有人可以告诉我一个如何做到这一点的例子，或者给我一些教程吗？

我应该提到我是使用数据库的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:54:22.070

像这样的东西。我相对确定 Table_Per_Class 策略会让您请求任何“通用”对象并查询它的所有子类表。请记住，如果您这样做，ID 在您的所有子类类型中应该是唯一的。您必须为此制定一个策略，使用正确的注释来告诉 hibernate 要做什么。但与此同时，此示例假定您在保存之前手动分配它。

```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class Generic {
   @Id @Column(name="ID")
   private Long id;
   ...
}

@Entity
@Table(name="EXTA")
public class ExtA extends Generic {
   @Column(name="fieldA")
   private Generic fieldA;
} 
```

# php - 如何在 php 中将 javascript 代码作为 POST 或 GET 字段传递

> ID：11004136
> 
> 赞同：-1
> 
> 时间：2012-06-12T20:14:44.040
> 
> 标签：php, javascript, browser

我正在尝试将 javascript 代码从我网站的一个页面传递到另一个页面（提交表单时）

用户输入一个类似这样的 javascript 代码的 adsense 代码：

```
<script type="text/javascript"><!--
google_ad_client = "nnnnddddnnnd";
/* abcdabcd */
google_ad_slot = "61748777731443";
google_ad_width = 123;
google_ad_height = 234;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

我想使用 get 或 post 将第 1 页中的这个 javascript 作为正常的字段传递到第 2 页。当我使用 GET 时，浏览器显示权限被拒绝，而当我使用 POST 时，第 2 页上没有 javascript 的输出

我怎样才能做到这一点？

附加信息：

用户在第 1 页的文本框中输入代码并按下提交，然后 page1 被定向到第 2 页，我想在第 2 页上使用此 JS，但即使使用 POST，我也无法通过它

代码

```
<form id="tryform" class="a-center" action="page2.php" method="post" onSubmit="return checkurl();" >
    <input name="ref" type="hidden" value="" />            
    <div >
        Enter the URL of the web page <br/>
        <span class="input-box full-width" style="float:center">
        <input id="url" name="url" type="text" value="Paste your website URL here"                  
            onblur="if(this.value==''){this.value='Paste your website URL here'}"
            onfocus="if(this.value=='Paste your website URL here'){this.value=''}"/>
        </span>
    </div>
    <div >
        Place your code here:
        <br/>
        <textarea id="adcode" name="adcode" cols="60" rows="8"></textarea>
    </div>
    <div>
        <button type="submit" class="button" name="B1" value="B1" >b1</button>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:12:34.383

如果你`str_replace('<', '&lt;', $formelement)`呢？

# video - 重新采样 H264 视频以降低帧速率，同时保持高图像质量

> ID：11004137
> 
> 赞同：38
> 
> 时间：2012-06-12T20:14:48.077
> 
> 标签：video, ffmpeg, transcoding, mplayer, mencoder

这是感兴趣的视频的 mplayer 输出：

```
br@carina:/tmp$ mplayer foo.mov 
mplayer: Symbol `ff_codec_bmp_tags' has different size in shared object, consider re-linking
MPlayer 1.0rc4-4.5.2 (C) 2000-2010 MPlayer Team
mplayer: could not connect to socket
mplayer: No such file or directory
Failed to open LIRC support. You will not be able to use your remote control.

Playing foo.mov.
libavformat file format detected.
[lavf] stream 0: video (h264), -vid 0
[lavf] stream 1: audio (aac), -aid 0, -alang eng
VIDEO:  [H264]  1280x720  24bpp  59.940 fps  2494.2 kbps (304.5 kbyte/s)
==========================================================================
Opening video decoder: [ffmpeg] FFmpeg's libavcodec codec family
Selected video codec: [ffh264] vfm: ffmpeg (FFmpeg H.264)
==========================================================================
==========================================================================
Opening audio decoder: [faad] AAC (MPEG2/4 Advanced Audio Coding)
AUDIO: 44100 Hz, 2 ch, s16le, 128.0 kbit/9.07% (ratio: 15999->176400)
Selected audio codec: [faad] afm: faad (FAAD AAC (MPEG-2/MPEG-4 Audio))
==========================================================================
AO: [pulse] 44100Hz 2ch s16le (2 bytes per sample)
Starting playback...
Movie-Aspect is 1.78:1 - prescaling to correct movie aspect.
VO: [vdpau] 1280x720 => 1280x720 Planar YV12 
```

我想使用 ffmpeg、mencoder 或其他一些命令行视频转码器将此视频重新采样到较低的帧速率，而不会损失*图像*质量。也就是说，每一帧都应尽可能保持清晰。

## 尝试

```
ffmpeg -i foo.mov -r 25 -vcodec 复制 bar.mov
```

*   目标帧速率——25fps——已经实现，但单个帧是“块状的”。

```
mencoder -nosound -ovc 复制 foo.mov -ofps 25 -o bar.mov
```

*   视频实际上是不可见的。

## 帮助！

这似乎是一个足够简单的用例。我很惊讶明显的事情不起作用。我的方法有问题吗？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2015-01-21T17:54:42.783

自 2012 年发布此帖子以来，发生了很多变化。我正在为像我这样从搜索引擎中找到此内容的人添加此答案。我在以下方面很幸运：

```
ffmpeg -y -i source.mp4 -r 25 -s 160x90 -c:v libx264 -b:v 3M -strict -2 -movflags faststart destination.mp4 
```

以下是关于每个参数的作用的简短说明：

*   `-y` : 不询问就覆盖输出文件
*   `-i source.mp4` : 输入文件名
*   `-r 25` : 输出帧率（每秒帧数）
*   `-s 160x90` ：输出帧大小（以像素为单位） - 插入[比例视频过滤器](https://ffmpeg.org/ffmpeg-filters.html#scale-1)
*   `-c:v libx264` : 输出视频编码器
    *   `-c:v`是`-codec:v`和的缩写`-vcodec`
*   `-b:v 3M`[：传递给libx264 编码器](https://ffmpeg.org/ffmpeg-codecs.html#toc-libx264_002c-libx264rgb) 的视频比特率（以比特/秒为单位）
*   `-strict -2` ：管理标准合规性；`-2`允许实验性功能 - 在版本 2015-12-05 之前的版本中启用本机 FFmpeg AAC 音频编码器所需，请参阅[此处](https://trac.ffmpeg.org/wiki/Encode/AAC)，[AAC 现在是默认音频编码器](https://ffmpeg.org/ffmpeg-codecs.html#aac)。
*   `-movflags faststart`: 将索引移动到输出文件的开头（[mov 和 mp4 格式](https://www.ffmpeg.org/ffmpeg-formats.html#mov_002c-mp4_002c-ismv)特定参数）

更多详细信息请参见[官方文档](https://ffmpeg.org/ffmpeg.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T22:25:26.960

正如 Andy T 所指出的，您绝对必须重新编码视频，但这并不意味着必须以任何明显的方式降低质量。

首先，确保您没有使用旧软件。视频编解码器是一个快速发展的领域，每隔几周就会取得重大进展。x264 是目前可用的最先进的视频编码器软件。这可能是 mplayer 使用的，但您可以从 www.x264.nl 获得最新的真实版本

[**编辑：[HEVC](http://x265.org/)和[AV1](https://github.com/xiph/rav1e)现在是最先进的技术。**正如我所说，这些都是快速发展的领域！]

首先，我会使用 VirtualDub 解压缩为无损视频类型，这将生成一个非常大的文件。VirtualDub 还可以降低帧速率。见[这里](http://www.ghacks.net/2011/06/26/how-to-change-a-videos-speed-with-virtualdub/)。

接下来，将其用作 x264 的输入。我建议你使用像[Staxrip](http://staxmedia.sourceforge.net/)这样的辅助软件（将最新的 32 位 8 位每通道 x264 放在 StaxRip\Applications\x264.

如果您想以最小的文件大小获得绝对最佳的质量，而您不太可能注意到差异，请使用这样的命令行（使用 x264）：

```
x264 --preset placebo --tune film --crf 22 --level 4.1 --threads 1 --thread-input --sar 12:11 --output "<target>" "<source>" 
```

Staxrip 具有将预设切换为安慰剂、调整电影源（当然假设这不是动画）以及将线程数减少到 1 的选项。

您可以将“--crf 22”更改为 21 以获得更大、质量更好的视频，但我发现 CRF22 大约是我很难注意到差异的地步，即使在逐帧比较时也是如此。其他设置的任何更改都可能会降低质量或增加文件大小而不会提高质量。增加线程数将*大大*提高编码速度（显然在多核系统上），但会略微降低质量（或者在这种情况下，因为我们使用基于质量的 CRF，会稍微增加文件大小，比如 4 个线程的 1% 以下）。

大多数对视频进行编码或生产对视频进行编码的产品的公司真的不知道他们在做什么，即使他们这样做了，他们也没有使用这些设置进行编码所需的 CPU 能力，所以除了适度的通过降低帧速率来减小文件大小，使用具有最严格设置的智能编码器也会使文件大小急剧下降。

如果您想绝对确定生成的视频看起来尽可能接近 VirtualDub 的输出，没有人可以使用 CRF17 区分，但文件会非常大。您不妨压缩 VirtualDub 的输出（嗯，还不错！）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T22:05:20.303

无论如何，您都需要对视频进行转码。转码意味着你将解码你的流，改变帧率（在简单的情况下丢帧）然后再次编码。编码配置甚至编解码器都不取决于您的视频最初是如何编码的，因此您可以使用任何适合您需要的东西。如果您需要尽可能高的质量，只需首先尝试使用高配置进行编码。然后，您可以尝试使用众多 h.264 编码参数对其进行微调。

# c# - SharpDX vs SlimDX 用于游戏开发？

> ID：11004138
> 
> 赞同：13
> 
> 时间：2012-06-12T20:14:49.213
> 
> 标签：c#, slimdx, sharpdx

其中哪一个为游戏开发提供了最好的 API？哪个库更容易使用、速度更快、文档更多？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-12T20:26:07.947

这两个项目几乎都支持整个 DirectX 库（尽管 SlimDX 在 DirectX 9 领域支持更多）。

SlimDX 非常成熟，功能齐全。一些更大规模的商业游戏已经使用 SlimDX 编写和发布。它还提供了更多的“框架”来使用，并具有更多功能完整的文档。

SharpDX 承诺在某些情况下会有更好的性能（[参见基准](http://code4k.blogspot.com/2011/03/benchmarking-cnet-direct3d-11-apis-vs.html)）。它是直接从 DirectX 标头生成的，因此更像是一个精简的 DirectX 包装器。

# php - Mysql总和不起作用

> ID：11004144
> 
> 赞同：0
> 
> 时间：2012-06-12T20:15:10.400
> 
> 标签：php, mysql, sql

我正在尝试从表中添加一些记录，但是，它无法正常工作，即当我尝试 var_dump 以查看显示的值时，我得到了`string(0) ""`

这是代码

```
 $current_wealth1 = mysql_query("SELECT SUM(estimated_wealth) as total_house_wealth FROM user_houses WHERE user_id='$user_id'");
var_dump($total_house_wealth);
$current_wealth = $ved_balance + $total_house_wealth; 
```

在输出方面，我只是使用常规的 php print 来输出 $current_wealth。

任何想法，可能是什么问题？

编辑：这是我当前的代码，在第二行出现语法错误

```
 $current_wealth1 = mysql_query("SELECT SUM(estimated_wealth) as total_house_wealth FROM user_houses WHERE user_id='$user_id'");
$total_house_wealth = mysql_fetch_array($current_wealth1)[0];
$current_wealth = $ved_balance + $total_house_wealth; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:17:16.140

你当然需要做

```
var_dump(mysql_fetch_array($current_wealth1)); 
```

也很可能您会收到语法错误，因为您没有 php 5.4。你不能做`...)[0];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:18:26.577

`$total_house_wealth`没有声明也没有设置任何值，所以你看到的是预期的行为。你真正想要的是不同的东西

```
$total_house_wealth = mysql_fetch_array($current_wealth1)[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T20:46:30.310

尝试将 fetch 数组拆分为 2 行以消除语法错误？

```
$current_wealth1 = mysql_query("SELECT SUM(estimated_wealth) as total_house_wealth FROM user_houses WHERE user_id='$user_id'");
$total_house_wealth = mysql_fetch_array($current_wealth1);
$total_house_wealth = $total_house_wealth[0];
$current_wealth = $ved_balance + $total_house_wealth; 
```

另外，在您的表结构中，用户 ID 是字符串还是整数？如果它是一个整数，则`userid='$user_id'`WHERE 子句中`userid=$user_id`的

# javascript - 有没有办法在 Highcharts 中实现“n 月”放大/缩小？

> ID：11004145
> 
> 赞同：0
> 
> 时间：2012-06-12T20:15:14.893
> 
> 标签：javascript, user-interface, charts, svg, highcharts

我想在 Highcharts 上实现 1 个月的放大和缩小，我之前在 HighStock 上看到过这个功能，但在 HighCharts 上没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:24:28.047

您似乎正在寻找您正在放大的 Axis 的[minRange](http://www.highcharts.com/ref/#xAxis--minRange)选项。

> minRange : Number 在此轴上显示的最小范围。不允许整个轴跨越比这更小的间隔。例如，对于日期时间轴，主要单位是毫秒。如果 minRange 设置为 3600000，则不能放大超过一小时。
> 
> x 轴的默认 minRange 是任何数据点之间最小间隔的五倍。

# html - div/body height 100% 的固溶体

> ID：11004148
> 
> 赞同：3
> 
> 时间：2012-06-12T20:15:23.350
> 
> 标签：html, css

我认为我们需要为这个问题找到一个可靠的解决方案——在互联网上，似乎没有。

DIV 将始终保持其内容的高度 - 而不是更多。

结构是这样的：

```
<html>
    <head>
        <title>myPage</title>
    </head>
    <body>
        <div id='container'>
            Some Content...
        </div>
    </body>
</html> 
```

CSS 通常看起来像这样：

```
body {
    height: 100%;
}
div#container {
    height: 100%;
    width: 100%;
} 
```

已经有一些技巧可以在 body 或/和 div 上设置边距或/和填充，但似乎没有什么能很好地工作。

**这个问题有唯一的解决方案吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T20:23:58.117

```
html, body, div#container{
   min-height: 100%;
   height: 100%;
} 
```

可能这会有所帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T05:36:53.433

尝试这个：

```
html, body { height: 100%; margin: 0; padding:0; }
#container { height: auto; min-height:100%; background:#ccc; } 
```

# jquery - 单击链接时未加载 jQuery 移动“页面”

> ID：11004149
> 
> 赞同：3
> 
> 时间：2012-06-12T20:15:23.723
> 
> 标签：jquery, mobile, jquery-mobile

基本上我的问题是我的 jquery 移动网站中的 data-role="page" 在从某个页面链接时不起作用，而在从另一个页面链接时确实起作用。

当从某个页面链接html页面时它没有加载，当我单击链接时没有任何反应。**url 甚至没有改变并且保持像“page.html”而不是“page.html#anotherpage”**

对此有什么想法吗？

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>test</title>
    <link rel="stylesheet" href="./css/jquery.mobile-1.4.5.min.css">
</head>

<body>

    <!----------------------- PAGE 1 ------------------------------->

    <div id="view-profile-page" data-role="page">

        <ul data-role="listview" class="ui-listview">
            <li class="ui-first-child">
                <a href="#edit-profile-page" class="ui-btn ui-btn-icon-left ui-icon-edit">Go to page 2</a>
            </li>
        </ul>

    </div>

    <!------------------------ PAGE 2 ------------------------------>

    <div id="edit-profile-page" data-role="page">

        <!-- CONTENT -->
        <div role="main">

            Page 2!

        </div>

    </div>

    <!-- jQuery core -->
    <script src="./js/jquery-1.12.4.min.js"></script>

    <!-- jQuery Mobile -->
    <script src="./js/jquery.mobile-1.4.5.min.js"></script>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:34:36.807

根据您提供的有限信息，这是在黑暗中拍摄的，但是您是否验证了您的 html？如果 jQuery 因遇到无效的 html 而感到困惑，例如有两个具有相同 ID 的元素，那么您所看到的那种结果可能会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:47:00.400

很难理解您提供的描述的确切问题。但这是我在黑暗中拍摄的 - 由于 JQM (hi)jax 加载页面的方式，第二个 JQM data-role="page" 上的脚本有一定的限制。详情在这里：http: [//jquerymobile.com/test/docs/pages/page-scripting.html](http://jquerymobile.com/test/docs/pages/page-scripting.html)

确切地说，jQuery Mobile 忽略了“头部”区域的所有内容，标题除外。所以你的脚本不会干扰

# c# - c# - 如何在不关闭应用程序的情况下关闭主窗体？

> ID：11004152
> 
> 赞同：1
> 
> 时间：2012-06-12T20:15:35.143
> 
> 标签：c#, winforms

我想要做什么：
->打开一个MDI表单
->关闭项目主窗体
->不关闭应用程序

我做了什么：

```
frmMain fm = new frmMain();
fm.Show();
this.Close() 
```

**任何帮助，将不胜感激！:)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:18:03.893

您可以使用隐藏方法。

尝试这样做：

```
frmMain fm = new frmMain();
this.Hide();
fm.Show(); 
```

或者：

```
frmMain fm = new frmMain();
this.Hide();
fm.ShowDialog();
this.Show(); 
```

后者将打开窗口，一旦关闭，前一个窗口将重新出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T20:19:32.380

我为解决这个问题所做的是：

```
this.Hide() 
```

可能不是最好的方法，但仍然如此。

你甚至可以通过调用来取回它

```
this.Show() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T20:21:47.250

If you actually wish to close the main form, but leave the application running, you can make your default class launch the application context:

```
using(MyContext myContext = new MyContext())
{
    Applicaton.Run(myContext);
} 
```

where `MyContext` inherits from `ApplicatonContext`.

Your application context can then load and close forms as needed. I do this with one project where I have the context launch a login form. Only after it is completed successfully does the main form get loaded. I also allow the "logging out" from the program to be handled by terminating the main form and reloading the login form.

EDIT: From the comments, it may be that all you are looking for is .Hide(). This doesn't cause your form to unload and a call to .Show() will restore it (for example, you can use a timer or another form holding a reference to your main form to make the call). I prefer to use an ApplicationContext because it takes the responsibility for keeping your program in memory away from a UI element which the user may attempt to close.

# ant - Saxon 在安装 batik-rasterizer 后停止工作

> ID：11004153
> 
> 赞同：1
> 
> 时间：2012-06-12T20:15:43.100
> 
> 标签：ant, xslt-2.0, saxon, xalan, batik

有人可以帮我解决以下问题吗？

昨天我试图向我的 ANT 脚本（Windows XP，ANT 版本 1.8.2，主要是 XSLT 2.0，Saxon 9 简单地添加到我的 ant/lib）中添加一个进程，从而使用 Batik 的 rasterizertask 将 SVG 目录转换为 PDF。最初我在让 ANT 识别 rasterizertask 时遇到了很多麻烦，但是在从源代码重新安装 Batik 并在以下链接的帮助下，我能够让它工作。

[https://mail-archives.apache.org/mod_mbox/xmlgraphics-batik-users/200605.mbox/%3C445B43B9.4010403@harcotechnology.com%3E](https://mail-archives.apache.org/mod_mbox/xmlgraphics-batik-users/200605.mbox/%3C445B43B9.4010403@harcotechnology.com%3E)

尽管这些说明没有说明这样做，但我发现我需要重新编译/重建 rasterizertask.jar。

附带说明一下，我还按照 Batik 官方网站上的建议，将 batik-rasterizer.jar 和 rasterizertask 类的路径添加到了我的 CLASSPATH 中。

瞧，我的光栅化任务正在工作。唉，我的 ANT 脚本中 rasterizertask 之后的所有 XSLT 2.0 任务都停止了工作。据我所知，我所做的某件事导致默认的 XSLT 处理器更改为 Xalan-j。Xalan 不支持我的大部分 XSLT。

例如，这是我从 Xalan 得到的错误（我知道为什么会收到这个错误，这就是我使用 Saxon 的原因）：

```
[xslt] Processing D:\workDirs\PLMXML2HeirarchalXML\source\plmxml.xml to D:\workDirs\PLMXML2HeirarchalXML\target\step1.xml
 [xslt] Loading stylesheet D:\workDirs\PLMXML2HeirarchalXML\stylesheets\step1.xsl
 [xslt] D:\workDirs\PLMXML2HeirarchalXML\stylesheets\step1.xsl:10:16: Warning! Created using: Apache Software Foundation, http://xml.apache.org/xalan-j
 [xslt] D:\workDirs\PLMXML2HeirarchalXML\stylesheets\step1.xsl:10:16: Warning! Created using: Apache Software Foundation, http://xml.apache.org/xalan-j
 [xslt] Processing D:\workDirs\PLMXML2HeirarchalXML\target\step1.xml to D:\workDirs\PLMXML2HeirarchalXML\target\step2.xml
 [xslt] Loading stylesheet D:\workDirs\PLMXML2HeirarchalXML\stylesheets\step2.xsl
 [xslt] D:\workDirs\PLMXML2HeirarchalXML\stylesheets\step2.xsl:134:53: Fatal Error! java.lang.ClassCastException: org.apache.xpath.objects.XRTreeFrag cannot be cast to org.apache.xpath.objects.XNodeSet Cause: java.lang.ClassCastException: org.apache.xpath.objects.XRTreeFrag cannot be cast to org.apache.xpath.objects.XNodeSet
 [xslt] Failed to process D:\workDirs\PLMXML2HeirarchalXML\target\step1.xml

BUILD FAILED
D:\workDirs\PLMXML2HeirarchalXML\build.xml:5: Fatal error during transformation 
```

我发现并试图强制 ANT 使用 Saxon 的所有方法（即，将 Saxon 添加到 CLASSPATH、xslt/factory）似乎导致调用 Saxon 而不是 Xalan，但现在我收到以下错误：

```
java.lang.NullPointerException
at org.apache.xerces.parsers.AbstractSAXParser.setContentHandler(Unknown Source)
            at net.sf.saxon.Configuration.reuseStyleParser(Configuration.java:2346)
            at net.sf.saxon.PreparedStylesheet.loadStylesheetModule(PreparedStylesheet.java:261)
            at net.sf.saxon.PreparedStylesheet.prepare(PreparedStylesheet.java:185)
            at net.sf.saxon.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:132)
            at org.apache.tools.ant.taskdefs.optional.TraXLiaison.readTemplates(TraXLiaison.java:300)
            at org.apache.tools.ant.taskdefs.optional.TraXLiaison.createTransformer(TraXLiaison.java:317)
            at org.apache.tools.ant.taskdefs.optional.TraXLiaison.transform(TraXLiaison.java:178)
            at org.apache.tools.ant.taskdefs.XSLTProcess.process(XSLTProcess.java:853)
            at org.apache.tools.ant.taskdefs.XSLTProcess.execute(XSLTProcess.java:389)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at org.apache.tools.ant.Task.perform(Task.java:348)
            at org.apache.tools.ant.Target.execute(Target.java:392)
            at org.apache.tools.ant.Target.performTasks(Target.java:413)
            at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
            at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
            at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
            at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
            at org.apache.tools.ant.Main.runBuild(Main.java:811)
            at org.apache.tools.ant.Main.startAnt(Main.java:217)
            at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
            at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 
```

因此，如果我让 Xalan 进行处理，光栅化任务仍然有效，但我以前工作的 XSLT 不能，如果我使用 Saxon，则没有任何效果。我尝试安装 ANT 1.8.4，但得到了相同的结果。

我已经用尽了我找到的所有资源，包括该站点上的类似帖子，但所有解决方案似乎都指向我已经尝试过的事情。

希望这是足够的信息，有人可以给我一些建议或帮助。

谢谢，基思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:01:44.323

在不同的 Ant 版本中存在不同问题的历史由来已久。（因此，我有很多遗留的 Ant 代码用于通过命令行界面调用 Saxon。）但是我相信在最近的 Ant 版本中，trax 工厂机制可以正常工作。你正在用吗

```
<xslt...>
  <factory name="net.sf.saxon.TransformerFactoryImpl"/>
</xslt> 
```

?

试图通过类路径控制使用哪个 XSLT 处理器本质上容易出错。这适用于任何应用程序，而不仅仅是 Ant。而且我认为 Ant 操作类路径的方式仍然存在错误 - 或者无论如何，更礼貌的是，文档中不明显的行为。

# java - 如何触发 AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK

> ID：11004154
> 
> 赞同：2
> 
> 时间：2012-06-12T20:15:43.617
> 
> 标签：java, android, android-mediaplayer

什么应用程序能够触发音频焦点（在物理设备上）：AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK？

已经尝试向设备发送和发送电子邮件，但没有收到声音，也没有触发 onAudioFocusChange()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:17:21.010

Facebook 消息将触发此 AudioFocus

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-16T22:37:17.193

截至 2015 年 10 月，Google 地图设置中有“播放测试声音”：

1.  打开谷歌地图
2.  打开设置
3.  选择“导航设置”
4.  按“播放测试声音”

# r - `data.table` 错误：setkey 中的“重新排序收到的不规则长度列表”

> ID：11004156
> 
> 赞同：1
> 
> 时间：2012-06-12T20:15:59.480
> 
> 标签：r, data.table

我有一个相当基本`data.table`的 R 语言，有 250k 行和 90 列。我正在尝试`data.table`在其中一个属于 class 的列上键入`character`。当我打电话时：

```
setkey(my.dt,my.column) 
```

我收到以下神秘的错误消息：

```
"Error in setkeyv(x, cols, verbose=verbose) :
reorder received irregular lengthed list" 
```

我找到了[带有此消息的源代码提交](http://lists.r-forge.r-project.org/pipermail/datatable-commits/2011-November/000377.html)，但无法完全破译它的含义。我的键列不包含 NA 或空白值，看起来非常合理（它包含股票代码），并且在默认`order()`命令下表现良好。

更令人沮丧的是，以下代码正确完成：

```
first.dt <- my.dt[1:100000]
setkey(first.dt,my.column)
second.dt <- my.dt[100001:nrow(my.dt]
setkey(second.dt,my.column) 
```

我不知道这里会发生什么。有小费吗？

编辑 1：我已经确认键中的每个值都符合相当标准的格式：

```
> length(grep("[A-Z]{3,4}\\.[A-Z]{2}",my.dt$my.column)) == nrow(my.dt)
[1] TRUE 
```

编辑 2：我的系统信息如下（请注意，我实际上使用的是 Windows 7）。我正在使用 data.table 1.8 版。

```
> Sys.info()
          sysname           release           version          nodename           machine             login 
        "Windows" "Server 2008 x64"      "build 7600" "WIN-9RH28AH0CKG"          "x86-64"   "Administrator" 
             user    effective_user 
  "Administrator"   "Administrator" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:47:16.133

请运行：

```
sapply(my.dt, length) 
```

我怀疑一个或多个列与第一列的长度不同，这是无效的`data.table`. 它不会是前 5 个之一，因为您的`.Internal(inspect(my.dt))`（谢谢）显示了这些并且它们没问题。

如果是这样，在 v1.8.1 中有这个错误修复：

> o 带有不规则 list() 的 DT 的 rbind() 现在可以正确回收列表项，#2003。添加了测试。

有没有机会`rbind()`在更早的时候`my.dt`与不规则长度一起创建`list`？如果没有，请逐步运行您的代码`sapply(my.dt,length)`以查看在何处创建了无效长度的列。有了它，我们就可以解决问题并修复潜在的错误。谢谢。

编辑 ：

原来的神秘错误信息现在在 v1.8.1 中得到了改进，如下：

```
DT = list(a=6:1,b=4:1)
setattr(DT,"class",c("data.table","data.frame"))
setkey(DT,a)

Error in setkeyv(x, cols, verbose = verbose) : 
  Column 2 is length 4 which differs from length of column 1 (6). Invalid
  data.table. Check NEWS link at top of ?data.table for latest bug fixes. If
  not already reported and fixed, please report to datatable-help. 
```

`data.table`注意：不推荐使用这种方法创建一个，因为它可以让你创建一个无效的`data.table`. 除非，你真的确定它是常规的并且`list`你确实需要速度（即你想要避免检查的速度），或者你需要证明一个 invalid ，就像我在这里做的那样。`as.data.table()``data.table()``data.table`

# c# - 使用 Aspose.cell 或 Aspose.Excel 插入分页符

> ID：11004162
> 
> 赞同：2
> 
> 时间：2012-06-12T20:16:17.157
> 
> 标签：c#, .net

我们有一个报告项目，我们在其中使用 .NET 框架动态创建 Excel 报告。使用的不同组件是系统命名空间、Aspose.Cell 和 Aspose.Excel

我们有一个报告，我们在其中循环执行一组命令。在每次循环执行后，我们需要插入一个分页符。目前，我们使用 System.Environment 插入换行符，但我没有看到任何类似的分页符方法。另外，我读到了一些 Aspose.cell 最新版本支持分页符的地方，但我们使用的是 4.7.1.0 版本

有人可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:33:41.007

虽然我之前从未使用过 Aspose，但我快速搜索了一下，发现[对象模型](http://www.aspose.com/docs/display/cellsnet/Aspose.Cells+Object+Model)中有一个 VerticalPageBreak 对象，如网站所示：

> 每个 Worksheet 对象都包含一个 VerticalPageBreakCollection 对象。
> VerticalPageBreak 对象用于在工作表中创建垂直分页符。

插入分页符的最佳方法似乎是使用 VerticalPageBreak 类：

```
excel.Worksheets[0].VerticalPageBreaks.Add("G5"); 
```

[这](http://www.aspose.com/docs/display/cellsnet/VerticalPageBreak+Class)是对 VerticalPageBreak 类的引用。
这应该注意垂直分页符。

# php - PHP 和 MySQL，与 2 个键关联的数组

> ID：11004168
> 
> 赞同：0
> 
> 时间：2012-06-12T20:16:34.380
> 
> 标签：php, mysql

我有这种情况。

我输入 $groupid="1";

**主表**

```
----------------------
| groupid  |  postid  |
|---------------------|
|       1  |       1  |
|       2  |       2  |
|       1  |       3  |

$query = "SELECT postid FROM `mainl` WHERE groupid='$groupid'";
$result = mysql_query($query);

// a group of postids belonging to that groupid which should hold [1, 3] for groupid=1
while($row = mysql_fetch_array($result)) {
    $postids[] = $row["postid"];
} 
```

**第二张桌子**

```
-------------------------------------------
|  postid  |  commentid  |     comment    |
-------------------------------------------
|       1  |          1  |   testing 1    |
|       1  |          2  |   testing 2    |
|       1  |          3  |       what?    |
|       2  |          1  |       hello    |
|       2  |          2  | hello world    |
|       3  |          1  |      test 3    |
|       3  |          2  |       begin    |
|       3  |          3  |        why?    |
|       3  |          4  |       shows    |

$query = "SELECT * FROM `second`";
$result = mysql_query($query);

while ($row = mysql_fetch_array($result)) {
    if (in_array($row["postid"], $postids)) {
        $comments[$row["postid"]] = $row["comment"]; 
```

但是我应该如何处理评论
我希望 postid 数组`[1,3]`和我的评论数组是 `[commentid: comment] [1:testing1, 2: testing2, 3: what?]`for`postid=1`
和
`[1:test3, 2:begin, 3: why? 4:shows]`for`postid=3`

应该如何安排所有这些评论与commentid和postid相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:11:33.837

首先，我会遵循 rokdd 的建议并进行 1 次查询

```
SELECT  m.groupid , s.postid, s.commentid, s.comment FROM `main1` m JOIN `second` s USING (postid) where m.groupid = 1 
```

然后我会做一个多维数组

```
while ($row = mysql_fetch_array($result))
    $groups[$row['groupid'][$row['postid']][$row['commentid']=$row['comment']; 
```

然后遍历数组

```
foreach($groups as $group)    
    foreach($group as $post)
        foreach($post as $comment)
           echo $comment; 
```

这也将跟踪组（如果您想选择超过 1 个组。如果您不关心组，只需删除数组的第一部分。

```
while ($row = mysql_fetch_array($result))
    $posts[$row['postid']][$row['commentid']=$row['comment'];

    foreach($posts as $post)
        foreach($post as $comment)
           echo $comment; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:33:44.667

我想在 sql 中使用 join，这样你就会有一个语句：

```
SELECT * FROM second as second_tab LEFT join main as main_table ON main_table.post_id=second_table.post_id WHERE main_table.group_id="3" 
```

现在还没有经过测试，但这是解决您的一些问题的一种方法！

# php - 多行单引号字符串

> ID：11004169
> 
> 赞同：4
> 
> 时间：2012-06-12T20:16:36.750
> 
> 标签：php, string, multiline

我正在阅读这本 PHP & MySQL 的书，但在回显单引号字符串的多行时，我遇到了一些与我习惯的完全不同的东西。

给出的例子是这样的：

```
 echo '<table align="center" cellspacing="0" cellpadding="5" width="75%">
        <tr>
          <td align="left"><b>This</b></td>
          <td align="left"><b>That</b></td>
          <td align="left"><b>Then</b></td>
          <td align="left"><b>When</b></td>
          <td align="left"><b>What</b></td>
        </tr>'; 
```

显然，我可以摆脱 PHP 并使用 HTML，但这并不总是一种选择。当我没有那个选项时，我通常会分解我的字符串以便于阅读：

```
 echo '<table align="center" cellspacing="0" cellpadding="5" width="75%">' . 
      '<tr>'
        '<td align="left"><b>This</b></td>' . 
        '<td align="left"><b>That</b></td>' . 
        '<td align="left"><b>Then</b></td>' . 
        '<td align="left"><b>When</b></td>' . 
        '<td align="left"><b>What</b></td>' . 
      '</tr>'; 
```

这本书的作者在 php 社区中很受尊敬，这本书得到了强烈的推荐和很好的评论……所以我的问题是：

他的方法有什么问题吗？应该这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T20:18:52.870

不，这完全没有问题。请注意，带引号的字符串中的空格、制表符和换行符也会被输出。这几乎不是问题——只是需要记住的事情。

对我来说，它比你的方式更容易阅读，更难出错。实际上，您的示例有语法错误。你能找到丢失的点吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T20:22:34.797

还有更多可能

```
?>
<table align="center" cellspacing="0" cellpadding="5" width="75%">
    <tr>
      <td align="left"><b>This</b></td>
      <td align="left"><b>That</b></td>
      <td align="left"><b>Then</b></td>
      <td align="left"><b>When</b></td>
      <td align="left"><b>What</b></td>
    </tr>
<?php 
```

或者

```
echo <<<HTML
<table align="center" cellspacing="0" cellpadding="5" width="75%">
    <tr>
      <td align="left"><b>This</b></td>
      <td align="left"><b>That</b></td>
      <td align="left"><b>Then</b></td>
      <td align="left"><b>When</b></td>
      <td align="left"><b>What</b></td>
    </tr>
HTML; 
```

第一个在每个 IDE 中都被识别为 HTML，第二个至少在 PHPStorm 中，因此 IDE 可以使用 HTML-syntax-highlighting 突出显示它，与您的*两个*示例相比，这是一个*巨大*的好处（旁注：PHPStorm 在字符串也是如此，因此还不错；）但据我所知，它无法验证字符串中的html）

 *另外，您应该将输出与处理代码分开*

# c# - 没有数据库的 Linq to SQL 引用完整性

> ID：11004172
> 
> 赞同：2
> 
> 时间：2012-06-12T20:16:47.887
> 
> 标签：c#, sql-server-2008, linq-to-sql

我正在编写一个使用现有数据库的应用程序，该数据库有一些**我根本无法修改的**表，但我仍然可以添加新表。因此，假设我有一个旧表 Cities，我可以对其进行读取、创建、更新和删除，但我无法修改架构。然后，我添加了一个新表 Clients，它具有 Cities 的外键，但我无法在数据库服务器 (SQL SERVER 2008) 上添加关系，因为它还修改了 Cities 表，添加了关系。所以我想也许如果我将它们都添加到我的 linq-to-sql 上下文中，并在那里添加关系，linq-to-sql 会足够聪明地为我检查引用完整性，即使关系没有建立在数据库，它在上下文中。

我创建了一个新项目来尝试一下，我添加了两个没有关系的简单表，然后在 linq-to-sql 设计器上添加了关系，并尝试强制引用完整性异常，但看起来它不起作用。

```
DBContextDataContext db = new DBContextDataContext();

City l = new City();
l.name= "Buenos Aires";
db.Cities.InsertOnSubmit(l);

Client c = new Client();
c.name = "Mike";
c.City = l;
db.Clients.InsertOnSubmit(c);

db.SubmitChanges(); // This works

db.Cities.DeleteOnSubmit(l); 
db.SubmitChanges(); // This shouldn't work, but it works 
```

知道是否可以强制参照完整性？还是在数据库上添加关系是唯一的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:35:05.930

您可以覆盖 DataContex 上的 SubmitChanges 方法，并验证所做的更改。

```
 public override void SubmitChanges(System.Data.Linq.ConflictMode failureMode)
    {
        bool everythingIsOK = true;

        var changes = GetChangeSet();
        var inserts = changes.Inserts;
        var deletes = changes.Deletes;
        var updates = changes.Updates;

        //verify everything is valid
        //...

        //if you need to, you can get the original state of the updated objects like this:
        foreach(object x in updates) {
            var original = this.GetTable(x.GetType()).GetOriginalEntityState(x);
            //verify the change doesn't break anything
            //...
        }

        if(everythingIsOK){ base.SubmitChanges(failureMode); }
    } 
```

但是感觉很痛苦。您确定不能与 DBA 交谈以进行所需的更改吗？您可以（我想您也可以）添加表，但不能添加外键，所以数据库可能包含无效数据？

此外，如果您必须以这种方式验证更改，这意味着您必须对数据库进行更多查询以验证所有密钥等是否有效。

## 或者这绝对是一个黑客：

*   为自己编写 db 架构脚本
*   在您的机器上或您想要的任何地方重新创建数据库
*   添加新表，并将外键添加到数据库
*   从本地修改的数据库生成 linq 模式
*   将连接字符串更改为真实的

而且非常脆弱：如果原始数据库有任何变化，你必须在你的“虚拟”数据库中改变它......

因此，请尝试与您的老板、DBA 或做出此决定的人进行推理，因为您无法阻止其他人在引用的表中进行删除。

# html - 将 HTML 表格导出到 MSWord

> ID：11004176
> 
> 赞同：0
> 
> 时间：2012-06-12T20:16:58.437
> 
> 标签：html, ms-word, html-table

我有一个带有表格的 html 文件，我正在将其转换为 .doc
我已经能够让文档在“打印视图”中自动打开

问题是表格对于页面来说太大了。我已将宽度设置为 100%，但 word 默认选中“允许表格扩展到边距”选项。我想以与将视图设置为“打印”类似的方式将其设置为“未选中”

这是我正在使用的模板：

```
<html xmlns:w="urn:schemas-microsoft-com:office:word">
<head>
<!--[if gte mso 9]>
  <xml>
    <w:WordDocument>
      <w:View>Print</w:View>
      <w:DoNotOptimizeForBrowser/>
    </w:WordDocument>
  </xml>
<![endif]-->
<style type="text/css">
  <%= global_style %>
  <%= report_style %>
</style>
</head>
<body>
<div id="word-export" class="WordSection1"> 
```

文档提到了一些关于“w:GrowAutoFit”的内容，但如果这可行，我不知道如何让它“虚假”。

[msdn 文档](http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.growautofit.aspx)
[更多 msdn 文档](http://msdn.microsoft.com/en-us/library/bb237573%28v=office.12%29.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T20:35:58.287

找到了！您必须使用 w:Compatibility 和 w:DontGrowAutofit。有趣的是，在 GrowAutoFit 文档附近没有引用 DontGrowAutofit。

```
<html xmlns:w="urn:schemas-microsoft-com:office:word">
<head>
<!--[if gte mso 9]>
  <xml>
    <w:WordDocument>
      <w:View>Print</w:View>
      <w:DoNotOptimizeForBrowser/>
      <w:Compatibility>
        <w:DontGrowAutofit/>
      </w:Compatibility>
    </w:WordDocument>
  </xml>
<![endif]-->
<style type="text/css">
  <%= global_style %>
  <%= report_style %>
</style>
</head>
<body>
<div id="word-export" class="WordSection1"> 
```

# f# - 有区别的工会结构/习惯平等

> ID：11004179
> 
> 赞同：2
> 
> 时间：2012-06-12T20:17:10.087
> 
> 标签：f#, discriminated-union

我有以下受歧视的工会：

```
type ActCard = Cellar of card list 
                | Chapel of (card option * card option* card option* card option) 
                | Smithy | Spy of (card -> bool * card -> bool) 
```

`card -> bool`在我添加to之前，它具有结构上的平等性`Spy`。[这个问题](https://stackoverflow.com/questions/10957528/structural-equality-in-f)对于如何对记录进行自定义相等很有帮助。但是，我不确定在这种情况下如何最好地实施它。我宁愿不必列举每个案例`ActCard`：

```
override x.Equals(yobj) =
    match x, yobj with
    |  Spy _, Spy _ -> true
    |  Cellar cards, Cellar cards2 -> cards = cards2
    (* ... etc *) 
```

这里有什么更好的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T20:23:17.987

没有更好的方法。如果您不打算使用默认的结构相等，则必须拼出相等语义。

### 编辑

你*可以*做这样的事情。

```
[<CustomEquality; CustomComparison>]
type SpyFunc = 
  | SpyFunc of (card -> bool * card -> bool) 
  override x.Equals(y) = (match y with :? SpyFunc -> true | _ -> false)
  override x.GetHashCode() = 0
  interface System.IComparable with
    member x.CompareTo(y) = (match y with :? SpyFunc -> 0 | _ -> failwith "wrong type")

type ActCard = 
  | Cellar of card list 
  | Chapel of (card option * card option * card option * card option) 
  | Smithy 
  | Spy of SpyFunc 
```

# image - 下采样位图图像像素 actionscript 3？

> ID：11004185
> 
> 赞同：0
> 
> 时间：2012-06-12T20:17:30.547
> 
> 标签：image, actionscript-3, image-processing

我需要将图像中的像素从 480 X 480 减少到 30 X 30。这需要对像素进行下采样，我没有看到任何删除位图图像中单个像素的方法。

我需要这种下采样，因为我正在研究图像处理中的失真 - 简而言之。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:25:57.867

```
package
{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.geom.Matrix;
    import flash.net.URLRequest;

    public class DownSampling extends Sprite
    {
        private var _loader : Loader;
        public function DownSampling()
        {
            _loader = new Loader;
            _loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onImgLoaded);

            // Get the bitmap
            _loader.load(new URLRequest("https://appharbor.com/assets/images/stackoverflow-logo.png"));
        }

        private function onImgLoaded(e : Event) : void
        {
            var currentBitmapdata : BitmapData = Bitmap(_loader.content).bitmapData;
            var i : uint = 9;
            var downFactor : Number = 0.2;

            // this will reduce size by 20%
            var downMat : Matrix = new Matrix;
            downMat.scale(1 - downFactor, 1 - downFactor);

            while(--i)
            {
                // Create new bitmapdata but smaller
                var smallerImg : BitmapData = new BitmapData(currentBitmapdata.width * (1-downFactor), currentBitmapdata.height * (1-downFactor), true, 0);

                // Copy and apply scale
                smallerImg.draw(currentBitmapdata, downMat);

                // Add to stage and set alpha to 50%
                addChild(new Bitmap(smallerImg)).alpha = .5;

                // Apply the same transform next loop
                currentBitmapdata = smallerImg;
            }
        }

    }
} 
```

结果 ： ![脚本结果：下采样](../Images/83181bfe1e9a4216c1e7dbf682ea5826.png)

# git - Git 跟踪上游

> ID：11004190
> 
> 赞同：8
> 
> 时间：2012-06-12T20:17:53.650
> 
> 标签：git, git-branch, git-remote

我正在做一个项目，我有一个中央 git repo。这个项目是一个框架，可以作为许多分叉的基线。

是否可以为分叉配置我的本地工作存储库以跟踪项目的中心作为起源并将骨架的主控作为名为上游的单独分支跟踪骨架的主控以挑选对骨架的更改？

我想我希望我的工作流程是这样的：

创建骨架 >> Fork Skeleton >> Skeleton Pulls Changes from Fork 2 >> Fork 1 Pulls Changes from Skeleton

有没有更好的流程来做我所描述的事情？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T10:22:43.763

阅读 GitHub“Fork a Repo”页面的“[第 3 步：配置遥控器](https://help.github.com/articles/fork-a-repo)”（我知道你没有提到 GitHub，但它仍然是相关的）

*   `origin`是你的 fork 的远程地址，你的本地克隆可以从中提取/推送到
*   `upstream`是您原始仓库的远程地址`Skeleton`（您可以添加它`git remote add upstream https://..../Skeleton.git`）

所以上游不是一个分支。

[但是您可以使用git branch](http://git-scm.com/docs/git-branch)定义一个本地分支，该分支将为上游分支提供来自上游 repo 的远程跟踪分支 master ：

```
git branch --set-upstream upstream_master upstream/master 
```

但是，您不需要本地分支，特别是如果您永远不会在其上进行新提交：您可以`upstream/master`直接将您的`git fetch upstream`master与`upstream/master`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:33:38.393

根据您的描述，每当骨架发生变化时，您都应该使用

```
$ git rebase upstream 
```

这将改变情况如下

```
initially:
1 - 2 - 3 <- upstream
        \- 4 <- fork

upstream changes:
1 - 2 - 3 - 5 - 6 <- upstream
        \- 4 <- fork

after rebase:
1 - 2 - 3 - 5 - 6 <- upstream
                \- 4 <- fork 
```

换句话说，您的分叉看起来就像是从最新版本的骨架中分叉出来的。

这种方法的缺点是它改变了分叉的历史......如果你不想要这个，你可以将上游合并到分叉中（我认为不需要挑选）。

# javascript - 检测输入框中的字符

> ID：11004197
> 
> 赞同：1
> 
> 时间：2012-06-12T20:18:20.590
> 
> 标签：javascript

```
if(document.form.user.value=='') 
```

这是一个 javascript 代码，用于测试它是否为空输入框，

但我需要一段代码来控制输入框中是否有任何字符？谁能帮助我？

我的意思是任何字符，如 /、& 或任何字母……或者我可以说任何不是数字的字符！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:21:00.057

~~Add the negation `!` operator to your `if` statement:~~

 ~~```
if (!document.form.user.value=='') 
```~~ 

Will return true if the value is different than an empty string (that is, if it has any character).

Or simply add an `else` block to your current `if`..

```
if(document.form.user.value=='') {
    //empty value
} else {
    //not empty
} 
```

 ~~**Updated answer as per question/comment update:**

Use a regex to match for non-number characters:

```
if (/[^\d]/.test(document.form.user.value))
    //contains a non 0-9 character 
```

[`isNaN`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/isNaN) is another viable option, but it'd allow for some non 0-9 characters: float `.` and negative `-` values would be allowed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:21:07.047

You mean if there is one or more characters, i.e. not empty?

```
if (document.form.user.value != '') 
```

or:

```
if (document.form.user.value.length > 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:23:22.193

检查值是否存在：

```
if($(input).val()) 
```

或者：

```
if($(input).val().length > 0) 
```~~

# actionscript-3 - Flash AS3 中的平移类

> ID：11004202
> 
> 赞同：0
> 
> 时间：2012-06-12T20:18:35.000
> 
> 标签：actionscript-3, flash, pan

我有一个影片剪辑，我将为其添加一个平移功能。我想将 pan 添加为影片剪辑可以引用的自己的类。

当我创建 pan 类时，我将movieclip 发送给它，因此我始终拥有它的位置属性。

在 pan 类中访问舞台的最佳方式是什么？我需要能够获得舞台 mouseX、mouseY、stageWidth 和 stageHeight。

现在，我让 pan 类扩展了一个 sprite 对象，并将其添加为我想要平移的影片剪辑的子对象。

将舞台本身也发送到 pan 类会更好还是有比这更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:41:27.253

创建一个单例类来管理对调用的阶段的更改，`StageManager`并通过将其传递给阶段的引用对其进行初始化：

```
//StageManager.as

import flash.display.Stage;

public class StageManager()
{
    //publicly accessible singleton instance
    public static var instance:StageManager = new StageManager();

    private var m_stage:Stage;

    //I'm using a custom getter and setter in just in case you need perform some other 
    //initialization when the stage gets set...
    public function set stage(stg:Stage):void
    {
        m_stage = stg;
    }

    public function get stage():Stage
    {
        return m_stage;
    }

} 
```

然后在其他地方，比如你的主控制器类：

```
StageManager.instance.stage = this.stage; 
```

现在您可以通过以下方式全局访问舞台及其属性`StageManager`：

```
var stageW:int = StageManager.instance.stage.stageWidth; 
```

这样，不仅是你的 Pan 类，而且任何其他的东西都可以在任何需要的时候进入全球舞台。很酷吧？

至于如何设计你的 Pan 类，我同意 @The_asMan-extend `MovieClip`。除非，也就是说，一个`Pan`实例将控制多个`MovieClip`实例，否则将它作为自己的东西可能更有意义（如您上面描述的方式）。

# r - 删除单元格与给定向量匹配的数据框行

> ID：11004203
> 
> 赞同：2
> 
> 时间：2012-06-12T20:18:35.673
> 
> 标签：r, dataframe, subset

我有不同数量的列和行的大数据框。我会在数据框中搜索给定向量的值，并删除与给定向量的值匹配的单元格行。我想把它作为一个函数，因为我必须在可变行和列的多个数据帧上运行它，并且我希望避免`for`循环。

例如

```
ff<-structure(list(j.1 = 1:13, j.2 = 2:14, j.3 = 3:15), .Names = c("j.1","j.2", "j.3"), row.names = c(NA, -13L), class = "data.frame") 
```

删除所有单元格包含值的行`8,9,10`

我想我可以使用`ff[ !ff[,1] %in% c(8, 9, 10), ]`或`subset(ff, !ff[,1] %in% c(8,9,10) )`

但为了从数据集中删除所有值，我必须解析每一列（可能有一个`for`循环，我希望避免这种情况）。

还有其他（更清洁）的方式吗？

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T20:27:23.143

`apply`您对每一行的测试：

```
keeps <- apply(ff, 1, function(x) !any(x %in% 8:10)) 
```

它给出了一个布尔向量。然后用它子集：

```
ff[keeps,]

   j.1 j.2 j.3
1    1   2   3
2    2   3   4
3    3   4   5
4    4   5   6
5    5   6   7
11  11  12  13
12  12  13  14
13  13  14  15
> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T20:56:52.803

我想该`apply`策略可能会证明是最经济的，但也可以执行以下任一操作：

```
 ff[ !rowSums( sapply( ff, function(x) x %in% 8:10) ) , ]
ff[ !Reduce("+", lapply( ff, function(x) x %in% 8:10) ) , ] 
```

逻辑向量的向量加法，（等价于`any`）后跟否定。我怀疑第一个会更快。

# python - 如何让 Bottle 在文件更改时重新启动？

> ID：11004204
> 
> 赞同：34
> 
> 时间：2012-06-12T20:18:41.133
> 
> 标签：python, cherrypy, bottle

到目前为止，我真的很喜欢[Bottle ，但是每次更改代码时我都必须 CTRL+C 退出服务器并重新启动它，这对我的工作效率造成了很大影响。](http://bottlepy.org/)我曾考虑使用[看门狗](http://packages.python.org/watchdog/)`bottle.run`来跟踪文件更改然后重新启动服务器，但是当功能阻塞时我该怎么做。

从监视文件更改的外部脚本运行服务器似乎需要做**很多**工作。我认为这对于 Bottle、CherryPy 和其他开发人员来说是一个普遍的问题。

感谢您对问题的解决方案！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-12T20:24:38.480

从教程中查看题为[“自动重新加载”的部分](http://bottlepy.org/docs/dev/tutorial.html#auto-reloading)

> 在开发过程中，您必须多次重新启动服务器以测试您最近的更改。自动重新加载器可以为您执行此操作。每次编辑模块文件时，重新加载器都会重新启动服务器进程并加载最新版本的代码。

这给出了以下示例：

```
from bottle import run
run(reloader=True) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T15:03:16.403

和

```
run(reloader=True) 
```

在某些情况下，它不会像导入在 def 中那样重新加载。强制重新加载我使用

```
subprocess.call(['touch', 'mainpgm.py']) 
```

它在linux中重新加载很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-22T06:41:48.680

`reloader=True`中使用`run()`。`if __name__ == "__main__":`请记住，在 Windows 中，由于`multiprocessing`模块的工作方式，这必须低于。

```
from bottle import run

if __name__ == "__main__":
    run(reloader=True) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-21T22:46:39.023

这些脚本应该可以满足您的需求。

**自动加载文件**

```
import os
def cherche(dir):
    FichList = [ f for f in os.listdir(dir) if os.path.isfile(os.path.join(dir,f)) ]
    return FichList

def read_file(file):
    f = open(file,"r")
    R=f.read()
    f.close()
    return R

def load_html(dir="pages"):
    FL = cherche(dir)
    R={}
    for f in FL:
        if f.split('.')[1]=="html":
            BUFF = read_file(dir+"/"+f)
            R[f.split('.')[0]] = BUFF
    return R 
```

**主文件**

```
# -*- coding: utf-8 -*-

#Version 1.0 00:37

import sys
reload(sys)
sys.setdefaultencoding("utf-8")
import datetime
import ast
from bottle import route, run, template, get, post, request, response, static_file, redirect

#AUTOLOAD by LAGVIDILO
import autoload
pages = autoload.load_html()

BUFF = ""
for key,i in pages.iteritems():
    BUFF=BUFF+"@get('/"+key+"')\n"
    BUFF=BUFF+"def "+key+"():\n"
    BUFF=BUFF+" return "+pages[key]+"\n"

print "=====\n",BUFF,"\n====="
exec(BUFF)

run(host='localhost', port=8000, reloader=True) 
```

# wordpress - 迁移 wordpress 网站时如何处理网站的永久链接

> ID：11004208
> 
> 赞同：0
> 
> 时间：2012-06-12T20:19:13.083
> 
> 标签：wordpress

**我想做的事：**
开发一个带有本地 Wordpress 安装（和 xampp）的基于 Wordpress 的网站。在我的网络服务器上迁移这个开发的网站。

**问题**
出在哪里：将网站放在网络服务器上后，导航中的每个链接都指向“127.0.0.1/wordpress/...”。我什至无法登录到网络服务器上的 Wordpress 后端，因为在 localhost 上也引用了“login.php”（或其他东西）”

**我的问题：**
你们中的任何人都知道如何将这个永久链接更改为网站实际部署的网络服务器的 URL？

最好的问候
马特

**编辑：** 我注意到的另一件事是，虽然我手动更改了 wp_posts 表中的 URL，但这个数据库条目是由 wordpress 更改的，所以下次打开网站后，数据库中的 URL 包含 127.0.0.1 部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:23:52.150

将数据库从本地计算机迁移到远程服务器时，应将本地计算机上的 mysql 数据库导出到文件。然后执行搜索并将“127.0.0.1/wordpress/...”更改为“www.yourdomain.com/path/to/wordpress”，然后将该文件导入新的 mysql 数据库。

由于您已经移动了所有内容，您只需将数据库表从远程服务器导出到一个文件，对其进行搜索和替换，然后重新导入它。导出数据库时，请确保选中“添加删除表/删除视图”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:23:45.030

这很简单，在本地做你需要的一切，当你准备好部署时，从 phpMyAdmin 导出你的本地数据库，打开文件并用你的服务器路径“搜索并替换”你的本地路径。

在 config.php 中更改连接字符串，您就完成了。

# windows-phone-7 - 是否可以使用模拟器调试 ShareLinkTask？

> ID：11004213
> 
> 赞同：0
> 
> 时间：2012-06-12T20:19:25.973
> 
> 标签：windows-phone-7, windows-phone-7-emulator

我在[`ShareLinkTask`](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.sharelinktask%28v=vs.92%29)我正在开发的应用程序中使用它，但是，在模拟器上它似乎没有做*任何事情*，甚至没有假装通过动作。这是我的代码存在错误的迹象，还是模拟器的行为方式如此？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:26:43.393

这就是模拟器处理此任务的方式。

来自 msdn

> 允许应用程序启动一个对话框，使用户能够在他们选择的社交网络上共享一个链接。

模拟器没有任何社交网络，所以没有什么可分享的。

# big-o - 如果一个函数内部有 2 个 for 循环（不是嵌套的），那么 bigOh 对整个函数来说仍然是 O(n) 吗？

> ID：11004216
> 
> 赞同：-1
> 
> 时间：2012-06-12T20:19:36.397
> 
> 标签：big-o

在函数内部有不同的循环不会导致 BigOh 相乘，对吗？

例子：

```
function() {
    for(int i = 0; i < n; i++) {
        //logic here
    }

    for(int i = 0; i < n; i++) {
        //logic here
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:23:21.690

对此进行了很好的讨论（即一般参考），但是是的，您是正确的，您在问题中拥有的功能将是 O(n)。

技术上 O(2n) 减少到 O(n)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:23:43.370

是的，它仍然是 O(n)，因为你会有 O(n+n)，即 O(2n)，但我们可以忽略 2，因为它的影响可以忽略不计。但如果你有

```
for (...){
  for(...){
    //code here
  }
} 
```

那么它将是 O(n^2)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-28T17:10:45.193

请参阅有关堆栈溢出的这篇文章，其中解释了为什么它的 O(N)。

[https://stackoverflow.com/a/5872270/2441441](https://stackoverflow.com/a/5872270/2441441)

# php - 爬虫在一定数量的行后没有插入数据库

> ID：11004219
> 
> 赞同：-1
> 
> 时间：2012-06-12T20:19:58.640
> 
> 标签：php, mysql

我有一个爬虫，它抓取网站获取信息，然后将值插入数据库，它似乎可以很好地插入前 4000~ 行，但随后突然停止向 mysql 数据库插入值，即使爬虫仍在抓取网站

**数据库表**

```
CREATE TABLE IF NOT EXISTS `catalog` (
  `id` varchar(100) NOT NULL DEFAULT '',
  `title` varchar(100) DEFAULT NULL,
  `value` double DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

**PHP插入函数**

```
function addToCatalog($id, $title, $value){
   $q = "INSERT INTO catalog VALUES('$id', '$title', $value)";
   return mysql_query($q, $this->connection);           
} 
```

**php抓取功能**

```
function scrape($pageNumber){
   $page = file_get_html('http://example.com/p='.$pageNumber);  

   if($page){
      $id = array();
      $title = array();
      $value = array();

      //id
      if($page->find('.productid')){
         foreach ($page->find('.productid') as $p) {
            $id[] = $p->innertext;
         }          
      }

      //title
      if($page->find('.title')){
         foreach($page->find('.title') as $p){
            $title[] = $p->innertext;
         }
      }

      //value
      if($page->find('.value')){
         foreach($page->find('.value') as $p){
            $value[] = $p->innertext;
         }
      }

      for($i=0; $i<sizeof($id); $i++){
          $add = $database->addToCatalog($id[$i], $title[$i], $value[$i]);
          echo $id[$i]." ".$title[$i]." ".$value[$i]."<br>";
      }
   }
}

for($i=0; $i<31300; $i++){
    scrape($i);
} 
```

任何有关此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:23:57.730

如果进程的执行在大约 30 秒后停止，您的问题可能是`max_execution_time`设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:32:46.587

不久前有一个类似的问题，原来是由于 PHP 作为 FastCGI 运行并且进程守护进程终止了脚本，尝试计算脚本退出前花费的秒数，如果每次都相同，请尝试切换到 CGI 然后再试一次。

也可能是您的网络主机终止脚本以保护共享资源，因此如果您使用共享托管服务器，则可能值得升级。

# javascript - 从 Web UI 与本地 Perl 脚本交互

> ID：11004224
> 
> 赞同：0
> 
> 时间：2012-06-12T20:20:10.900
> 
> 标签：javascript, ajax, perl

鉴于我有一个本地 Perl 脚本，可以在 Windows 命令提示符中打印“Hello”。

我想制作一个 Web 界面，当我使用 Javascript 或其他东西单击 HTML 页面上的按钮时，我将能够执行这个本地 Perl 脚本。我曾尝试在 Xampp Apache 服务器中托管 Localhost 上的页面，但是这使用安装在 Xampp 上的 Perl。

无论如何可以从 Web 用户界面与本地 Perl 交互吗？即**从Web UI 在本地shell 中运行perl 脚本。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:14:48.343

我通常运行一个作为原始 Web 服务器的 perl 脚本。启动时，它会打印一个可用于访问它的 URL。

这可以通过以下模块完成：

```
use HTTP::Daemon;
use HTTP::Status;
use HTTP::Response; 
```

在大约 60 行代码中。

无法发布我的代码，但这里有一个更详细的示例（它使用 fork，这是对我的改进）：[http ://www.perlmonks.org/?node_id=415908](http://www.perlmonks.org/?node_id=415908)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:06:39.287

查看Node JS ...它可以从网页调用perl，设置和获取本地主机站点非常简单，并且是免费的。

# video - 向视频添加文本（标题） - ffmpeg vs ..？

> ID：11004228
> 
> 赞同：0
> 
> 时间：2012-06-12T20:20:21.647
> 
> 标签：video, text, ffmpeg

有没有更好的（更快的处理方式和更多的选项）方法来向视频添加标题（文本）然后是 ffmpeg？

当然，我可以在 ffmpeg 中使用“drawtext”，但是如果我想为字体等添加轮廓，最好的方法是什么？

# symfony - 如何用assetic组织与symfony 2中包含的模板或嵌入式控制器相关的资产？

> ID：11004230
> 
> 赞同：4
> 
> 时间：2012-06-12T20:20:37.780
> 
> 标签：symfony, assetic

我真的很想在我的 symfony 2 项目中使用资产，因为它有很多有用的功能，但我不确定实现以下要求的最佳方法。

我有几个可以包含在所有页面中的 js 文件。但是，其中一些仅与页面模板的子集相关，我在其中包含需要这些特定 javascript 文件的特定模板（或也嵌入特定控制器）。

现在我有以下选择：

1.  我为布局和特定页面模板中的 javascripts 创建了一个块元素（我在其中包含带有 javascript 的模板，例如 templateWithComplexJs.html.twig），我使用 {{ parent() }} 覆盖此块，如此处所述:[跨继承模板组合资产资源](https://stackoverflow.com/questions/6958970/combining-assetic-resources-across-inherited-templates)。

    ```
    {# ... specific.html.twig #}  
    {% extends 'MyBundle::layout.html.twig' %}

    ...  
    {% include 'MyBundle:Foo:templateWithComplexJs.html.twig' %}  
    ...  

    {% block javascripts %}
        {{ parent() }}
        {% javascripts  
            '@MyBundle/Resources/public/js/specific/complex.js'  
        %}  
        <script src="{{ asset_url }}"></script>  
        {% endjavascripts %}  
    {% endblock %} 
    ```

    **我看到的缺点：**
    a) 当我调整包含的模板（例如更新到新的 js lib）时，我必须调整包含它们的所有页面模板。在一个很容易导致错误的复杂系统中。
    b）可能发生我两次包含一个javascript，一次在布局中，一次在模板的javascript中，assetic不知道，因为它们是分开处理的。

2.  我在布局中包含了所有需要的 js 文件，然后我只需要在调整包含的模板时更改*一个*位置，而且我不太可能包含两次 javascripts。

    **我看到的缺点：**
    由于 js 文件的大小可能很大，我宁愿只在我真正需要它们的少数情况下才包含它们。

在这个相关的问题（[Twig Assetic Stylesheets Between Multiple Templates](https://stackoverflow.com/questions/8949548/twig-assetic-stylesheets-among-several-templates)）中，它说目前不可能使用资产来实现令人满意的解决方案，但我想我并不是唯一一个有这些要求并且想要使用资产的人。

那么，这种情况的最佳实践是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-02T22:36:16.903

您可能会更简单地获得您的目标。在配置文件中设置您的资产组并为其命名，而不是在所有模板中这样做。这是一个简单的例子。

```
# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller:
        enabled:    false #%kernel.debug%
        profiler:   false
    java: /usr/bin/java
    node: /usr/bin/node
    assets:
        backend_css:
            inputs:
                - %kernel.root_dir%/../path/to/some/css/file.css
                - %kernel.root_dir%/../path/to/some/less/file.less
            filters:
                - less
            output: css/backend.css
        frontend_css:
            inputs:
                - %kernel.root_dir%/../path/to/some/css/file.css
                - %kernel.root_dir%/../path/to/some/less/file.less
            filters:
                - less
            output: css/frontend.css
        backend_js:
            inputs:
                - %kernel.root_dir%/../path/to/some/js/file.js
                - %kernel.root_dir%/../path/to/some/js/other.js
            filters:
                - yui_js
            output: js/backend.js
        frontend_js:
            inputs:
                - %kernel.root_dir%/../path/to/some/js/file.js
                - %kernel.root_dir%/../path/to/some/js/other.js
            filters:
                - yui_js
            output: js/frontend.js
        special_backend_js:
            inputs:
                - %kernel.root_dir%/../path/to/some/js/file.js
                - %kernel.root_dir%/../path/to/some/js/other.js
            filters:
                - yui_js
            output: js/special_backend.js
    filters:
        cssrewrite: ~
        cssembed: 
            jar: %kernel.root_dir%/Resources/java/cssembed-0.4.5.jar
        # closure:
        #     jar: %kernel.root_dir%/Resources/java/compiler.jar
        yui_css:
            jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar
        yui_js:
            jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar
        less:
            node_paths: [%kernel.root_dir%/Resources/node_modules]
            apply_to: "\.less$" 
```

现在在您的树枝模板中，您可以简单地执行以下操作：

```
{% block javascript %}
<script src="{{ asset('js/backend.js') }}"></script>
{% endblock javascript %} 
```

并对你的 CSS 资产做同样的事情。这样，如果您想将另一个库添加到您的 backend.js 集合或包含一些 js 功能组（如 special_backend），它是您模板中的一个衬里，当您进行更改时，您只需要处理您的配置定义。

我希望这对你有所帮助。我敢肯定还有其他方法可以完成这项工作，但这是我的首选方法。

# attributes - 嘶嘶声可以返回没有任何属性的元素吗？

> ID：11004232
> 
> 赞同：2
> 
> 时间：2012-06-12T20:20:48.030
> 
> 标签：attributes, sizzle

我正在尝试使用嘶嘶声查询从网页中提取没有属性的元素。

我可以通过指定它的属性轻松地返回一个元素。例如： doc.Tables.Filter(Find.BySelector("[ID='abc']")) 返回 ID='abc' 的元素

有没有办法返回所有没有任何属性的元素？这就是我的目标： **doc.Tables.Filter(Find.BySelector("[]")) 'return all element with no attributes** 感谢 Ken

# python - 如何使用机器A上的python驱动程序通过使用python脚本从机器B上的这台机器获取数据？

> ID：11004233
> 
> 赞同：-5
> 
> 时间：2012-06-12T20:20:51.077
> 
> 标签：python

我正在尝试找到一种方法，以便我可以在机器 A 上使用 python 驱动程序，该机器使用 Windows XP 并连接到从机器 B 提供即时数据的服务器，以通过使用 python 来获取这些数据。

我正在考虑将机器 A 作为服务器，但我不知道这样做的更好方法是什么？

任何想法，教程，参考资料......？

感谢您对问题的解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:28:56.807

使用 rpc（远程过程调用）这是最简单的方法。

[http://docs.python.org/library/xmlrpclib.html](http://docs.python.org/library/xmlrpclib.html)

看一下布尔部分中的示例，它展示了如何编写客户端和服务器。这实际上很容易，您在服务器中编写从客户端调用的函数，就好像它们在本地运行一样：D 所以您的函数可以无缝返回数据和接收数据

# c# - Is it possible in C# to provide an IComparer implementation and somehow have it "compiled" into the application at runtime?

> ID：11004235
> 
> 赞同：2
> 
> 时间：2012-06-12T20:20:53.803
> 
> 标签：c#, sorting, icomparer

Hi everyone I am not sure if what I want to do is even remotely possible but I am going to do my best to explain it and would really appreciate any suggestions / ideas,

Imagine I have :-

```
 public class Attribute{
        object Value;
        **(X1)**IComparer<T> comparer
    }
    public class AttributeValues
    {
        List<Attribute> values;
        SortedList<Attribute> Sort(){
            this uses the comparer defined in **(X1)** to sort the values in the list
        }
    } 
```

These classes allow the user to create user defined attributes and select a pre-defined sort algorithm to sort the values In the simplistic case, I can do AttributesValues.Sort() using one of the comparers that I have created and compiled in source code which has been chosen by the user. This is fine when the comparison is known in advance such as a simple ascending alphabetical sort for example.

However, there are some circumstances where more logic is needed and it is not known in advance. For example, the string "4DFG5ET" might codify a date that needs to be sorted and there may be some other attribute with similar logic and so on.

If possible I don't want to keep writing the IComparer implementations and would love for it to be possible that somehow I could define the IComparer implementation in a text box or file at runtime and it would be somehow compiled in the program or persisted then available in the selction of comparisons that could be used to sort an attribute.

Does anyone have any suggestions on how to approach this?

Please ask if you would like me to clarify something as I know it is a slightly obscure question.

Many thanks in advance

Alex

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:24:26.217

当然，有几种不同的技术支持这一点。Reflection.Emit 浮现在脑海中，由于 .NET 框架包含一个编译器，因此您还应该能够发出 C# 并将其即时编译为程序集，然后再加载。我相信在新的动态语言领域有更多的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:24:52.350

您可以使用`CSharpCodeProvider`（参见[此处](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)的文档）将提供的文本编译成 DLL，并使用反射加载生成的类。另外，[这个](https://stackoverflow.com/questions/826398/is-it-possible-to-dynamically-compile-and-execute-c-sharp-code-fragments)SO question 可能对你有很好的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:25:16.917

我认为您可以为此使用[MEF](http://mef.codeplex.com/)：

引用：“托管可扩展性框架 (MEF) 是 .NET 的一个组合层，它提高了大型应用程序的灵活性、可维护性和可测试性。MEF 可用于第三方插件扩展性，或者它可以带来松散的好处 -将类似插件的架构耦合到常规应用程序。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T20:27:15.997

在我看来，你有两个选择。首先，您可以构建自己的语言来解析简单的用户命令，然后以 JIT 方式执行代码。

第二种选择实际上是让您的用户编写 C# 代码并即时编译它。（如前所述，Reflection.Emit 应该满足最简单的需求。）

编辑第三个选项并不完全是您想要的，但您可以为比较器插件设置一个目录。当您的应用程序启动时，它可以扫描该目录并加载程序集。使用反射，您可以提取任何实现 IComparer 接口的类，然后将它们作为列表提供给用户。（您还可以使用自定义属性来定义友好的用户名和描述等）。

在这种情况下，您不需要为了快速添加一些新的比较器而重新编译整个应用程序。此外，如果您有超级用户，他们可以使用一些免费的 .NET 代码编辑器来快速编写自己的比较器并将它们“安装”到目录中。

# symfony - Symfony2 实体试图使用错误的数据库

> ID：11004237
> 
> 赞同：1
> 
> 时间：2012-06-12T20:20:59.563
> 
> 标签：symfony, doctrine-orm

我有一个与两个不同数据库对话的应用程序。对于我的一个实体，`School`我收到以下错误：

```
SQLSTATE[42S02]: Base table or view not found: 1146 Table 'pressbox.schools' doesn't exist 
```

这是有道理的，因为没有`pressbox.schools`. 是`fnt.schools`。它试图与错误的数据库通信。

如何告诉我的实体我希望它使用哪个映射？我当然宁愿参考映射而不是数据库名称本身，这可能因环境而异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:24:25.787

首先，在配置文件中声明您的连接（*config.yml*就可以了）：

```
doctrine:
  dbal:
    default_connection: pressbox # change it as you wish
    connections:
      pressbox:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   pressbox
        user:     pressbox_usr
        password: pressbox_pwd
        charset:  UTF8
      fnt:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   fnt
        user:     fnt_usr
        password: fnt_pwd
        charset:  UTF8 
```

然后声明实体管理器：

```
doctrine:
  orm:
    default_entity_manager: pressbox
    entity_managers:
      pressbox:
        connection: web
      fnt:
        connection: fnt 
```

现在，在控制器中，您可以通过将名称传递给 Doctrine 来告诉 Doctrine 使用哪个实体管理器`getEntityManager()`：

```
$fntEm = $this->getDoctrine()->getEntityManager('fnt'); 
```

*假设fnt*表的实体管理器被称为相同的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:03:55.340

我认为跨数据库关系非常复杂，或者您必须通过一些插件手动编码。

我发现这个关于同一主题的问题可能会对您有所帮助：

[Doctrine2 和 Zend 框架中的多数据库连接](https://stackoverflow.com/questions/5442521/multiple-database-connection-in-doctrine2-and-zend-framework)

# django - Media files are served, static files aren't

> ID：11004239
> 
> 赞同：1
> 
> 时间：2012-06-12T20:21:01.637
> 
> 标签：django, static-files, django-staticfiles

I'm stuck due to [an](https://stackoverflow.com/questions/8618611/serving-django-static-files-in-development-envirnoment) [evergreen](https://stackoverflow.com/questions/5602263/serving-static-files-for-development-mode-in-django) [issue](https://stackoverflow.com/questions/10806287/serving-static-files-in-django-development), static files not served. Conversely the files placed in the `MEDIA_ROOT` subtree get served correctly under `MEDIA_URL`.

Stripped `settings.py`:

```
DEBUG = True
STATIC_URL = '/static/'
STATIC_ROOT = '/home/foo/devel/static'
MEDIA_URL = '/media/'
MEDIA_ROOT = '/home/foo/devel/media'
# the following is deprecated but is it seems grappelly requires it
ADMIN_MEDIA_PREFIX = STATIC_URL + "grappelli/"
STATIC_FILES = ()
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
) 
```

To create the project I did:

```
$ cd /home/foo/devel/
$ virtualenv testdrive
$ . bin/activate; pip install django; cd testdrive
$ django-admin.py fbtest 
```

and got this directory tree (stripped):

```
. <-- /home/foo/devel/
├── bin
├── fbtest
│   └── fbtest
│       ├── media
│       │   └── foo.jpg
│       ├── static
│       └────── foo.jpg
├── include
└── lib 
```

Files under `STATIC_URL` should be served automatically by Django staticfiles (not in my case), while other files have to be handled manually. So I appended these lines to `urls.py`:

```
import settings
if settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^%s(?P<path>.*)$' % settings.MEDIA_URL.lstrip("/"),
            'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
        }),
    ) 
```

Accessing `http://host/media/filebrowser/foo.jpg` works, while `http://host/static/foo.jpg` gives error 404\. Why?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T21:42:12.457

> 下面的文件`STATIC_URL`应该由 Django staticfiles 自动提供（在我的情况下不是），而其他文件必须手动处理。

这是不正确的。Django 从来没有服务`STATIC_ROOT`过——甚至在开发中也没有。它*所做*的是在每个应用程序的“静态”目录中创建文件，并在 .available 中指定的任何目录中创建`STATICFILES_DIRS`文件`STATIC_URL`。您实际上并没有手动放入任何东西`STATIC_ROOT`。事实上，在开发中，您甚至不应该在那里拥有目录。简而言之，当您运行管理命令时，它只是*生产中*`STATIC_ROOT`静态文件的垃圾场。*`collectstatic`*

 *在开发中，所有静态文件都应该进入`someapp/static`，其中“someapp”是它们应用的应用程序。如果文件作为一个整体应用于项目，例如全局 CSS 文件，您需要创建一个完全不同的目录（即与*or*`STATIC_ROOT`不同`MEDIA_ROOT`），然后将该目录添加到`STATICFILES_DIRS`. 例如，我通常称我的“资产”，所以：

```
STATICFILES_DIRS = (
    os.path.join(os.path.dirname(__file__), 'assets'),
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T21:42:41.567

这是一个愚蠢的错误。我忘了添加`fbtest`到`INSTALLED_APPS`，所以静态文件机制没有管理这个应用程序的静态文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:33:23.373

这个问题真的是常青树......一些提示：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    # ...
    'django.core.context_processors.static',
    # ...
)

INSTALLED_APPS = (
    # ...
    'django.contrib.staticfiles',
    # ... 
) 
```

*   你用了吗？[django-admin-collectstatic](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#django-admin-collectstatic)命令？
*   你能帮忙在 url 设置中添加[show_indexes=True吗？](https://docs.djangoproject.com/en/dev/howto/static-files/#django.views.static.serve)
*   一些符号链接？
*   使用 --adminmedia=../grappelli/static/grappelli arg 运行应用程序。？

我对 django 1.4 的设置（没有 grappelli）：

网址.py

```
if settings.DEBUG:
    urlpatterns = patterns('',

        url(r'^%s(?P<path>.*)$' % settings.STATIC_URL.lstrip('/'), 'django.views.static.serve',
            {'document_root': settings.STATIC_ROOT, "show_indexes": True}),

        url(r'^%s(?P<path>.*)$' % settings.MEDIA_URL.lstrip('/'), 'django.views.static.serve',
            {'document_root': settings.MEDIA_ROOT, "show_indexes": True}),

    ) + urlpatterns 
```

设置.py

```
MEDIA_ROOT = os.path.join(PROJECT_DIR, 'media')
STATIC_ROOT = os.path.join(PROJECT_DIR, 'static')
MEDIA_URL = '/media/'
STATIC_URL = '/static/'
ADMIN_MEDIA_PREFIX = '/static/admin/'

TEMPLATE_CONTEXT_PROCESSORS = (
    # ...
    'django.core.context_processors.static',
    # ...
)

INSTALLED_APPS = (
    # ...
    # 'django.contrib.staticfiles',
    # ...
) 
```*

# python - Why is nothing being written to the database?

> ID：11004241
> 
> 赞同：1
> 
> 时间：2012-06-12T20:21:08.853
> 
> 标签：python, sqlite, csv

Here is my code (currently):

```
conn = sqlite3.connect(db)
conn.text_factory = str  #bugger 8-bit bytestrings
cur = conn.cursor()

reader = csv.reader(open(csvfile, "rU"), delimiter = '\t')
for Number, Name, Message, Datetime, Type in reader:

    # populate subscriber table
    if str(Number)[:1] == '1':
        tmpNumber = str(Number)[1:]
        Number = int(tmpNumber)
    cur.execute('INSERT OR IGNORE INTO subscriber (name, phone_number) VALUES (?,?)', (Name, Number))

cur.close()
conn.close() 
```

Here is some sample data from the csv file (tab-delimited in the file):

```
Number       Name        Message         Date/Time               Type
16665551212  Jane Doe    message one     11/23/2011 6:34:44 AM   Incoming
16665551212  Jane Doe    message two     11/23/2011 4:53:21 PM   Incoming 
```

The code executes without any errors, only nothing is written to the database. Why is this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T20:22:03.207

You need to commit your changes: [`conn.commit()`](http://docs.python.org/library/sqlite3.html#sqlite3.Connection.commit)

If you do not want to use transactions at all, i.e. work in "autocommit" mode, use `isolation_level=None` in the `connect()` call. However, this is usually a bad idea.

# ios - iOS Subviews added programmatically are lost when view is reloaded from the storyboard

> ID：11004242
> 
> 赞同：1
> 
> 时间：2012-06-12T20:21:14.890
> 
> 标签：ios, storyboard, automatic-ref-counting, subviews

I have an app with two view controllers. ViewControllerA is a blank view with a tap gesture assigned which allows the user to tab on the view and create a UITextView at the point of the tap. The user can create as many UITextViews as they wish and they are added then programmatically to the view (ViewControllerA) as sub views.

There is also a button which allows the user to change the text font and styling. This triggers a Segue to the second view controller ViewControllerB which then allows the user to set Font, Text Size, Color etc. Once completed the user clicks the DONE button on ViewControllerB and another Segue switches back to the initial view (ViewControllerA).

This all works fine. Except when the user switches back to the initial view (ViewControllerA) from ViewControllerB the view is reloaded from the storyboard and the sub views I have added programmatically are gone.

In view (ViewControllerA) ViewDidLoad and ViewWillAppear are firing just fine so the problem seems to be the initial view is released when the first Segue fires and then recreated from the storyboard on the transition back but the subviews are of course not included as they are not in the storyboard since I added them programmatically.

Any suggestions for a best practice on how to solve this so that the subviews are recreated also when the main view (ViewControllerA) reloads?

Many thanks for any suggestions!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:17:59.553

从这个问题听起来你对文本样式视图有一个转场，然后是另一个转场“回到原来的” - 它不像那样工作，转场总是会创建目标 VC 的新实例。您应该对文本样式视图进行模态搜索，然后关闭模态视图控制器 - 这将返回到您的原始实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T10:40:56.703

只是为了记录，我解决了这个问题，以防其他人需要解决方案。

我在 ViewControllerA 中创建了一个子视图，它是主视图的大小，不包括工具栏。我称之为canvasView。然后我将我所有的 ImageViews 和 TextViews 添加到这个画布视图中。

然后在 ViewControllerA viewWillDisappear 中，我将 canvasView 及其所有子视图存档到这样的文件中。

```
 NSString *archivePath = [NSTemporaryDirectory() stringByAppendingPathComponent:@"Canvas.archive"];
BOOL result = [NSKeyedArchiver archiveRootObject:_canvasView
                                     toFile:archivePath];
if (!result) {
    NSLog(@"Archive failed to archivePath %@",archivePath);
} 
```

然后在 ViewControllerA viewWillAppear 中检查是否存在现有存档，如果存在则重新加载它以正确顺序加载子视图。否则，我会像这样创建一个空的 canvasView。

```
 // If the collageView already exists then restore it from the achive, otherwise initialize a new one.

NSString *archivePath = [NSTemporaryDirectory() stringByAppendingPathComponent:@"Canvas.archive"];

_canvasView = [NSKeyedUnarchiver unarchiveObjectWithFile:archivePath];

if (_canvasView) {
    // Restore existing canvasView
    [_backgroundView addSubview:_canvasView];
} else {
    // Initialize a new canvasView
    _canvasView = [[UIScrollView alloc] initWithFrame:CGRectMake(_backgroundView.frame.origin.x, 
                                                           _backgroundView.frame.origin.y, 
                                                           _backgroundView.frame.size.width, 
                                                           _backgroundView.frame.size.height)];
    [_backgroundView addSubview:_canvasView];
} 
```

# ios - Navigation toolbar hides when application is restarted

> ID：11004243
> 
> 赞同：0
> 
> 时间：2012-06-12T20:21:23.567
> 
> 标签：ios, ios5

I have a navigation based app where one of the views shows a toolbar. If I press the Home key and reenter the application the toolbar hides itself. I tried to unhide in viewDidAppear/viewWillAppear, but they never fire.

Where is the proper place to unhide the toolbar?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T01:28:28.350

当应用程序进入前台时，不会调用 ViewDidAppear/ViewWillAppear。要处理进入前台的应用程序，您需要创建一个通知。

在 Appdelegate 中将以下代码添加到 applicationWillEnterForeground：

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    [[NSNotificationCenter defaultCenter] postNotificationName:       @"UIApplicationWillEnterForegroundNotification" object: nil];
} 
```

然后在您各自的视图控制器中进行以下更改

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    [[NSNotificationCenter defaultCenter] addObserver: self
                                         selector: @selector(handleEnterForeground:)
                                             name:  @"UIApplicationWillEnterForegroundNotification"
                                           object: nil];
}

- (void) handleEnterForeground: (NSNotification*) sender
{
    //Do whatever you need to do to handle the enter foreground notification
} 
```

# python - python中的原始套接字和sendto

> ID：11004249
> 
> 赞同：13
> 
> 时间：2012-06-12T20:22:01.133
> 
> 标签：python, networking, tcp, ip, scapy

我正在努力将 scapy 与 twisted 集成，但我在 OSX 上遇到了这个我似乎无法弄清楚的非常奇怪的错误。

基本上我无法通过原始套接字发送有效的 TCP 数据包（包括 IP 标头）。这就是我正在做的事情：

```
import socket
from scapy.all import IP, TCP
pkt = IP(src='0.0.0.0', dst='127.0.0.1')/TCP()
spkt1 = str(pkt)
outs = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_RAW)
outs.setsockopt(socket.SOL_IP, socket.IP_HDRINCL, 1)
outs.sendto(spkt1, ('127.0.0.1', 0)) 
```

当我运行它时，我收到以下错误：

`outs.sendto(spkt1, ('127.0.0.1', 0)) socket.error: [Errno 22] Invalid argument`

如果您没有 scapy 不想使用它，这是 base64 编码的数据包：

```
import base64
spkt1 = base64.b64decode("RQAAKAABAABABvvOAAAAAH8AAAEAFABQAAAAAAAAAABQAiAAEH4AAA==") 
```

非常奇怪的是，一个几乎相同的数据包似乎被正确发送：

```
spkt2 = base64.b64decode("RQBAAAWwAAACBgAAAAAAAH8AAAEAyAOEAAAAAAAAAACwAgDIAHsAAAIEBbQBAwMBAQEICk3PUjMAAAAABAIAAA==") 
```

这是两个数据包的样子：

```
SPKT1
0000   45 00 00 28 00 01 00 00  40 06 FB CE 00 00 00 00   E..(....@.......
0010   7F 00 00 01 00 14 00 50  00 00 00 00 00 00 00 00   .......P........
0020   50 02 20 00 10 7E 00 00                            P. ..~..
SPKT2
0000   45 00 40 00 05 B0 00 00  02 06 00 00 00 00 00 00   E.@.............
0010   7F 00 00 01 00 C8 03 84  00 00 00 00 00 00 00 00   ................
0020   B0 02 00 C8 00 7B 00 00  02 04 05 B4 01 03 03 01   .....{..........
0030   01 01 08 0A 4D CF 52 33  00 00 00 00 04 02 00 00   ....M.R3........ 
```

通过在wireshark中检查它们，它们仅在TCP部分有所不同。

我做了很多不同的实验，最后我能够通过设置某些特定的 TCP 选项来发送数据包，但是这样的数据包不应该工作是没有意义的。

有人知道为什么会发生这种情况吗？

编辑：

此数据包似乎确实有效：

```
pkt = IP(len=16384, src='0.0.0.0', dst='127.0.0.1',
     id=RandShort(), ttl=2)/TCP(sport=255,
      dport=900, flags="S", window=200,
      options=[('MSS', 1460), ('WScale', 2)])
spkt = bytes(pkt)
spkt += '\x00'*20 
```

如果您不添加零，则它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:34:51.200

我最终决定原始套接字只是为了使用而被窃听。特别是由于该软件需要跨平台，OSX 的怪癖可能不适用于其他操作系统。

目前我只是简单地包装了 scapy 提供的“套接字”。将来我会写一些只依赖于 libdnet 的东西（因为这是 scapy 写原始帧的方法）。

你可以在这里找到这个实现：

[https://github.com/hellais/txscapy](https://github.com/hellais/txscapy)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-16T22:46:45.640

IP 标头必须具有 32 位的倍数才能有效。最后还有一个填充区域。

因此，根据标头中设置的 IP 选项（占用可变数量的位），需要计算位*和*填充。

看起来不同的操作系统以不同的方式处理这个问题。有人可能会认为一个聪明的操作系统会为你做这个填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T21:38:05.397

0.0.0.0 在我看来不是一个有效的 IP 源地址。将其更改为任何其他值有什么不同吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T21:49:09.873

```
Python 2.7.1+ (r271:86832, Apr 11 2011, 18:13:53) 
[GCC 4.5.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import socket
>>> from scapy.all import IP, TCP
WARNING: No route found for IPv6 destination :: (no default route?)
>>> pkt = IP(src='0.0.0.0', dst='127.0.0.1')/TCP()
>>> spkt1 = str(pkt)
>>> 
>>> outs = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_RAW)
>>> outs.setsockopt(socket.SOL_IP, socket.IP_HDRINCL, 1)
>>> outs.sendto(spkt1, ('127.0.0.1', 0))
40 
```

我在编写特定的数据包集时似乎没有任何错误——我使用的是 x86_64 和 2.6.38-* Gnu/Linux 内核。

也许您的问题与原始套接字的某些 Mac OS X 脑损伤有关？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T20:17:57.987

另一个相关的问题。Python`impacket`模块具有`ping.py`ping 主机的脚本。在 Mac OS X Lion 上，使用此脚本时出现错误：

```
Traceback (most recent call last):
  File "/private/var/www/env/bin/ping.py", line 73, in <module>
    s.sendto(ip.get_packet(), (dst, 0))
socket.error: [Errno 22] Invalid argument 
```

但在 Ubuntu 上一切正常，我收到了主机的回复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T22:04:05.380

我没有确凿的证据，但我认为这可能与以太网最小有效负载大小有关。

来自[维基百科](http://en.wikipedia.org/wiki/Ethernet_frame#Payload)：

> 存在 802.1Q 标签时，最小有效载荷为 42 个八位字节，不存在时为 46 个八位字节。

您的第一个示例数据包只有 40 个字节，因此在任何一种情况下都低于限制。您可以尝试将填充从 20 个字节更改为这些值，以验证它是否在某个限制处停止工作。

如果是这样，那么这种行为就很合理了；操作系统拒绝数据包，因为您没有提供足够的数据来构造有效的数据包。

# c++ - C equivalent of C++ STL

> ID：11004252
> 
> 赞同：18
> 
> 时间：2012-06-12T20:22:03.507
> 
> 标签：c++, c, data-structures, stl, hashmap

> **Possible Duplicate:**
> [Standard data structure library in C?](https://stackoverflow.com/questions/1819416/standard-data-structure-library-in-c)

Does C have any data structure implementations similar to the C++ STL? Specifically associative containers, hash maps or any other structure with approximately constant time retrieval?

Thanks!

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-12T20:23:56.377

C*不能*有 STL 的“完全等价物”，因为 C 没有模板或类。

您可能对“Glib 集合”库感兴趣：

*   [http://www.ibm.com/developerworks/linux/tutorials/l-glib/](http://www.ibm.com/developerworks/linux/tutorials/l-glib/)

*   Gnome Glib：http: [//developer.gnome.org/glib/stable/](http://developer.gnome.org/glib/stable/)

*   GNU Gnulib：[http ://www.gnu.org/software/gnulib/](http://www.gnu.org/software/gnulib/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T20:25:35.173

[glib](http://developer.gnome.org/glib/2.30/glib-Hash-Tables.html)确实包含`GHashTable`s，它们基本上是键和值之间的关联——C++ 中的 HashMap 是什么。

重要的区别是您必须使用`void*`来存储任意数据，因为 C 不支持模板或泛型。缺点是编译器无法检查代码的有效性，您必须自己确保正确性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T20:03:10.387

您实际上可以在 C 中实现自己的。创建一个结构，给它一个指向其父级的指针并实现一个函数，该函数返回一个指向您的结构实例的指针，并且您在 C 中拥有您的类。如果您有时间并且知道的话，您可以去尽可能多的地方怎么做。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-12T20:27:11.273

C 永远不可能有这样的东西，因为它没有任何必需的特性——尤其是模板。

# ruby-on-rails-3 - To be DRY, can I access a string column width limit in ActiveRecord?

> ID：11004253
> 
> 赞同：0
> 
> 时间：2012-06-12T20:22:03.297
> 
> 标签：ruby-on-rails-3, activerecord

In writing a Rails app there are several places where string table column widths are needed: validations, RSpec testing, input forms, etc. It seems worthwhile to set the length limit on strings in the DB also.

At present I've set a LENGTHS hash in the model so I can access the lengths in other places and keep the code DRY in this respect. If I set the length limits in the DB, is it possible to read the values from there (or initialize the LENGTHS hash with them) to make the code even more DRY? That is, what is the code to read a string length limit of a database column in the model so I can use it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:34:20.963

您可以访问 AR 模型的 columns 方法。

```
Model.columns.map(&:limit)
Model.columns.map(&:name)
Model.columns.map(&:null)
Model.columns.map(&:sql_type)
... 
```

所以你可以使用这个方法来构造你的哈希/数组/任何东西。我相信你所说的**长度属性是这个符号的****限制**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T05:51:42.583

```
class ActiveRecord::Base
  def self.method_missing(method_id, *args)
    if self.columns_hash.has_key?(method_id.to_s)
      self.columns_hash[method_id.to_s]
    else
      super
    end
  end
end 
```

`columns_hash`这允许以干净的方式访问由提供的任何列模式数据。因此：

`Model.column_name`返回所有可用数据的哈希值

`Model.column_name.hash_key`返回一个感兴趣的值

例如： `Company.contact_name.limit`返回列的最大长度`contact_name`。根据我的阅读，数据库在启动时加载模式数据，因此不会发生数据库命中并`columns_hash`记忆数据。

# c# - How can I create an object with a set property from a string Property path like data binding does?

> ID：11004256
> 
> 赞同：1
> 
> 时间：2012-06-12T20:22:28.217
> 
> 标签：c#, serialization, mapping

I have a list of property paths and values as strings in a text file. Is there a mapping tool or serialize that could take a property path string( "Package.Customer.Name" ) and create the object and set the value?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:50:54.240

```
 /// <summary>
    /// With a data row, create an object and populate it with data
    /// </summary>
    private object CreateObject(List<DataCell> pRow, string objectName)
    {
        Type type = Type.GetType(objectName);
        if (type == null)
            throw new Exception(String.Format("Could not create type {0}", objectName));
        object obj = Activator.CreateInstance(type);

        foreach (DataCell cell in pRow)
        {           
            propagateToProperty(obj, *propertypath*, cell.CellValue);
        }

        return obj;
    }

   public static void propagateToProperty(object pObject, string pPropertyPath, object pValue)
        {
            Type t = pObject.GetType();
            object currentO = pObject;
            string[] path = pPropertyPath.Split('.');
            for (byte i = 0; i < path.Length; i++)
            {
                //go through object hierarchy
                PropertyInfo pi = t.GetProperty(path[i]);
                if (pi == null)
                    throw new Exception(String.Format("No property {0} on type {1}", path[i], pObject.GetType()));

                //an object in the property path
                if (i != path.Length - 1)
                {
                    t = pi.PropertyType;
                    object childObject = pi.GetValue(currentO, null);
                    if (childObject == null)
                    {
                        childObject = Activator.CreateInstance(t);
                        pi.SetValue(currentO, childObject, null);
                    }
                    currentO = childObject;

                //the target property
                else
                {
                    if (pi.PropertyType.IsEnum && pValue.GetType() != pi.PropertyType)
                        pValue = Enum.Parse(pi.PropertyType, pValue.ToString());
                    if (pi.PropertyType == typeof(Guid) && pValue.GetType() != pi.PropertyType)
                        pValue = new Guid(pValue.ToString());
                    if (pi.PropertyType == typeof(char))
                        if (pValue.ToString().Length == 0)
                            pValue = ' ';
                        else
                            pValue = pValue.ToString()[0];

                    pi.SetValue(currentO, pValue, null);
                }
            }
        } 
```

这就是我使用的。我刚刚在VS中打开它，也许它可以帮助你。*propertyPath*是您的属性路径的占位符，我从我的代码中删除了它。如果您正在寻找更强大的解决方案，[Automapper](https://github.com/AutoMapper/AutoMapper)可能会很好地工作，正如其他人已经建议的那样。

# android - How to create a new ViewPager everytime I instantiate the fragment(create it again)? (Pager is surviving the fragment destruction.)

> ID：11004258
> 
> 赞同：3
> 
> 时间：2012-06-12T20:22:33.830
> 
> 标签：android, fragment, android-viewpager, destroy

How to create a new ViewPager everytime I remove the fragment(create it again)? My pager is surviving the fragment destruction.

I have a ViewPager inside a Fragment, but when I remove the fragment from the FrameLayout where it is and the add it back. His ViewPager is the same of the old fragment instance(I do think it is) but all of the fragments are gone( empty pager is empty :( ). How can I recreate the ViewPager again?

This code is on my onCreateView() method on my fragment:

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {

    View fragment = inflater.inflate(getLayoutID(), container,false);
    ViewPager pager = (ViewPager) fragment.findViewById(R.id.myPager);

    PagerAdapter newAdapter = new MyPagerAdapter(getFragmentManager(), getFragments());
    pager.setAdapter(newAdapter);

    return fragment;
} 
```

And I think that's all you guys need to know.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:47:51.793

现在知道我不能在片段中包含片段，我使用 ViewPagerAdapter 进行了这个 ViewPagerAdapter ，您可以通过（可以是任何您想要的）并显示它。代码如下：

**ViewPagerAdapter**

```
import java.util.List;

import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.View;

public class ViewPagerAdapter extends PagerAdapter{

    private List<View> pages;

    public ViewPagerAdapter(List<View> pages) {
        this.pages = pages;
    }

    @Override  
    public Object instantiateItem(View collection, int position) {  
        ((ViewPager) collection).addView(pages.get(position),0);  

        return pages.get(position);  
    }  

    @Override
    public int getCount() {
        return pages.size();
    }

    @Override
    public int getItemPosition(Object object) {
        return POSITION_NONE;
    }

    /**  
     * Remove a page for the given position. The adapter is responsible  
     * for removing the view from its container, although it only must ensure  
     * this is done by the time it returns from {@link #finishUpdate()}.  
     *  
     * @param container The containing View from which the page will be removed.  
     * @param position The page position to be removed.  
     * @param object The same object that was returned by  
     * {@link #instantiateItem(View, int)}.  
     */  
    @Override  
    public void destroyItem(View collection, int position, Object view) {  
        ((ViewPager) collection).removeView((View) view);  
    }  

    @Override  
    public boolean isViewFromObject(View view, Object object) {  
        return view==((View)object);  
    }  

    /**  
     * Called when the a change in the shown pages has been completed. At this  
     * point you must ensure that all of the pages have actually been added or  
     * removed from the container as appropriate.  
     * @param container The containing View which is displaying this adapter's  
     * page views.  
     */  
    @Override  
    public void finishUpdate(View arg0) {}  

    @Override  
    public void restoreState(Parcelable arg0, ClassLoader arg1) {}  

    @Override  
    public Parcelable saveState() {  
        return null;  
    }  

    @Override  
    public void startUpdate(View arg0) {}  
} 
```

这里有一个额外的抽象片段，您可以在其中覆盖抽象方法，瞧：

**AbstractPagerFragment**

```
import java.util.List;

import templateDigital.util.ViewPagerAdapter;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public abstract class AbstractPagerFragment extends Fragment {

    private ViewPager pager;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment

        View fragment = inflater.inflate(getLayoutID(), container,false);
        setRetainInstance(false);
        PagerAdapter mPagerAdapter = new ViewPagerAdapter(getViews());
        pager = (ViewPager) fragment.findViewById(getPagerID());
        pager.setAdapter(mPagerAdapter);
        pager.getAdapter().notifyDataSetChanged();

        return fragment;
    }

    public abstract List<View> getViews();

    public abstract int getLayoutID();

    public abstract int getPagerID();

    @Override
    public void onDestroy() {
        super.onDestroy();
        pager = null;
        System.gc();
    }

} 
```

# r - Mean hour-of-day and imputation...would this be easier with time calculations?

> ID：11004260
> 
> 赞同：1
> 
> 时间：2012-06-12T20:22:43.223
> 
> 标签：r, date

I'm working with a data set and am imputing NAs for times. I have a simplified example below where I am creating a new column that includes the original data and imputed values for NAs (i.e., the mean of the time of day). The code works fine, but I am so weak with dates I was wondering if there was an easier way to calculate the mean time of day date/time values?

```
arrivals <- data.frame(
  ships=c("Glory","Discover","Intrepid","Enchantment","Summit"),
  times=c("8:00","10:00","11:42",NA,"9:20"), stringsAsFactors=FALSE)
sumtime <- sapply(strsplit(as.character(arrivals$times),":"),
  function(x) as.numeric(x[1])*60 + as.numeric(x[2]))
avgtime <- paste(trunc((mean(sumtime, na.rm=TRUE)/60)),":",
  trunc(mean(sumtime, na.rm=TRUE)%%60), sep="")
arrivals$times2 <- arrivals$times
arrivals$times2[is.na(arrivals$times)] <- avgtime 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T22:29:50.377

您可以使用 chron 包将`times`列转换为可以取平均值的数字表示：

```
library(chron)
Arrivals <- arrivals[,c("ships","times")]
# Will give some warnings due to the missing value
Arrivals$times <- chron(times.=paste(Arrivals$times, ":00", sep=""))
Arrivals$times[is.na(Arrivals$times)] <- mean(Arrivals$times,na.rm=TRUE)
        ships    times
1       Glory 08:00:00
2    Discover 10:00:00
3    Intrepid 11:42:00
4 Enchantment 09:45:30
5      Summit 09:20:00 
```

# c# - Add Odata query param to @html.Routelink

> ID：11004261
> 
> 赞同：2
> 
> 时间：2012-06-12T20:22:46.210
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, odata

I have a **routelink** :

```
@Html.RouteLink("Campaigns", "DefaultApi", new { controller = "Campaign", httproute = true }) 
```

that results in `"http://localhost:54614/api/v0.1/ReportData/Account"`

what I want to do is write a **Routelink** - that would result in

```
"http://localhost:54614/api/v0.1/ReportData/Account/?$top=20" 
```

How can I do that ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:31:34.130

您不能将`$top`其用作匿名类型中的属性名称，因此您应该使用不同的`Routelink`重载，它使用`RouteValueDictionary`.

但问题是`RouteLink`用于`Uri.EscapeUriString`转义路由值，因此使用以下代码：

```
@Html.RouteLink("Campaigns", "DefaultApi", new RouteValueDictionary
                                              {
                                                  { "controller", "Campaign"} ,
                                                  { "httproute", true },
                                                  { "$top", 20 }
                                              }) 
```

将产生这个网址：（`/api/Campaign?%24top=20`见`$`被编码为`%24`）

然而，使用一个非常非常肮脏的黑客，即`Uri.UnescapeDataString`：

```
@Html.Raw(Uri.UnescapeDataString(
    @Html.RouteLink("Campaigns", "DefaultApi", new RouteValueDictionary
                                        {
                                            { "controller", "Campaign"} ,
                                            { "httproute", true },
                                            { "$top", 20 }
                                        }).ToHtmlString())) 
```

你可以得到：`/api/Campaign?$top=20`

# haskell - 提升的数据类型和类实例

> ID：11004266
> 
> 赞同：4
> 
> 时间：2012-06-12T20:23:17.420
> 
> 标签：haskell, type-kinds

提升的数据类型具有固定数量的类型，它们是提升的数据种类的成员。在这个封闭的世界中，支持在没有明确范围内的字典的类型类上调用函数是否有意义？

```
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE PolyKinds #-}

data DataType = Constructor

data DataTypeProxy (e :: DataType) = DataTypeProxy

class Class (e :: DataType) where
  classFunction :: DataTypeProxy e -> IO ()

-- this is the only instance that can be created
instance Class 'Constructor where
  classFunction _ = return ()

-- adding the Class constraint fixes the build break
-- disp :: Class e => DataTypeProxy e -> IO ()
disp :: DataTypeProxy e -> IO ()
disp = classFunction

main :: IO ()
main = disp (DataTypeProxy :: DataTypeProxy 'Constructor) 
```

这个人为的例子在 GHC 头中不起作用。这一点也不奇怪，但似乎`DataKind`扩展可能使这成为可能。

```
test.hs:18:8:
    No instance for (Class e) arising from a use of `classFunction'
    Possible fix:
      add (Class e) to the context of
        the type signature for disp :: DataTypeProxy e -> IO ()
    In the expression: classFunction
    In an equation for `disp': disp = classFunction 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T03:07:26.757

不。允许这样做意味着幻像数据类型需要在运行时用额外的类型信息“标记”，并且会产生歧义。

```
data DataType = Constructor | SomethingElse

data DataTypeProxy (e :: DataType) = DataTypeProxy 
...
instance Class 'SomethingElse where
   classFunction _ = putStrLn "hello world"

instance Class 'Constructor where
   classFunction _ = return ()

disp :: DataTypeProxy e -> IO ()
disp = classFunction

main = disp DataTypeProxy 
```

这个程序应该做什么？它不应该编译吗？如果不是，那么通过向一个类型*添加*一个构造函数，我们获取了一个您想要编译的程序，并生成了一个不需要编译的程序。如果它不应该编译，那么它有两个有效的行为。

```
main = disp (DataTypeProxy :: DataTypeProxy 'Constructor) 
```

只有一种可能的解释......但它需要您发送幻象类型。那是，

```
main = disp (DataTypeProxy :: DataTypeProxy 'SomethingElse) 
```

是术语级别的相同程序，但具有不同的行为。这基本上打破了所有好的属性，比如参数化。基于类型类的调度是一个解决方案，因为范围内的实例以可预测的（和语义指定的）方式影响程序行为。

# couchdb - 如何管理 couchdb 中的预定义组

> ID：11004271
> 
> 赞同：0
> 
> 时间：2012-06-12T20:23:32.100
> 
> 标签：couchdb

我是 couchdb 的新手，如果这真的很容易，请耐心等待。

我正在尝试对一个系统进行原型设计，其中有一组用户可以相互共享数据库中的所有内容。例如，考虑一个留言板系统，一旦用户被允许进入特定的留言板，他们就可以查看/更新/删除该留言板中的任何内容。此外，用户可以加入多个板。

从我目前阅读的内容来看，我想实现这一目标的方式是在 couchdb 服务器中有多个数据库。每个数据库都代表一个板，并且由于板不需要相互通信，因此可以很好地分离板。

我的问题是关于用户授权。我知道我可以在 couchdb 中创建用户并在一个“数据库”中为他们分配 ACL，但是在 couchdb 中有没有一种方法可以控制“数据库”级别的用户访问？IE。用户可以读/写/更新哪个数据库？

我现在看到的唯一方法是在“应用程序”数据库中有另一个表可以控制用户访问，基本上是从用户到数据库的映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:30:15.367

你似乎自相矛盾。您说您知道可以在一个数据库中为用户分配 ACL，然后您询问是否有一种方法可以控制数据库中的用户访问。

所有授权都在数据库级别。阅读[安全文档的授权部分](http://wiki.apache.org/couchdb/Security_Features_Overview#Authorization)。

# c++ - 什么是 std::promise？

> ID：11004273
> 
> 赞同：424
> 
> 时间：2012-06-12T20:23:35.380
> 
> 标签：c++, multithreading, c++11, promise, standard-library

我对 C++11 和组件（例如，请参阅此答案）相当熟悉`std::thread`，它们`std::async`是[直截了当](https://stackoverflow.com/a/10998831/596781)的。`std::future`

但是，我不能完全理解`std::promise`它是什么，它做了什么以及在什么情况下最好使用它。[标准文档本身不包含超出其类概要的大量信息， std::thread](http://www.stdthread.co.uk/doc/headers/future/promise.html)也不包含。

有人可以给出一个简短的例子来说明`std::promise`需要 an 以及它是最惯用的解决方案的情况吗？

* * *

## 回答 #1

> 赞同：556
> 
> 时间：2012-09-08T23:10:05.543

我现在更好地理解了这种情况（由于这里的答案，在很大程度上！），所以我想我自己添加一点文章。

* * *

C++11 中有两个不同但相关的概念：异步计算（在其他地方调用的函数）和并发执行（*线程*，同时工作的东西）。这两者是有些正交的概念。异步计算只是函数调用的另一种风格，而线程是执行上下文。线程本身就很有用，但出于讨论的目的，我将它们视为实现细节。

异步计算有一个抽象层次结构。例如，假设我们有一个带有一些参数的函数：

```
int foo(double, char, bool); 
```

首先，我们有模板[`std::future<T>`](http://en.cppreference.com/w/cpp/thread/future)，它代表类型的未来值`T`。可以通过成员函数检索该值`get()`，该函数通过等待结果来有效地同步程序。或者，future 支持`wait_for()`，它可以用来探测结果是否已经可用。期货应该被认为是普通返回类型的异步替代品。对于我们的示例函数，我们期望一个`std::future<int>`.

现在，进入层次结构，从最高到最低级别：

1.  [`std::async`](http://en.cppreference.com/w/cpp/thread/async)：执行异步计算的最方便和直接的方法是通过`async`函数模板，它立即返回匹配的未来：

    ```
    auto fut = std::async(foo, 1.5, 'x', false);  // is a std::future<int> 
    ```

    我们几乎无法控制细节。特别是，我们甚至不知道该函数是同时执行的、串行执行的`get()`，还是通过其他一些黑魔法执行的。但是，在需要时很容易获得结果：

    ```
    auto res = fut.get();  // is an int 
    ```

2.  我们现在可以考虑如何以*我们*控制的方式*实现*类似的东西。例如，我们可能会坚持该函数在单独的线程中执行。我们已经知道我们可以通过类提供一个单独的线程。`async`*[`std::thread`](http://en.cppreference.com/w/cpp/thread/thread)*

     *下一个较低级别的抽象正是这样做的：[`std::packaged_task`](http://en.cppreference.com/w/cpp/thread/packaged_task). 这是一个包装函数并为函数返回值提供未来的模板，但对象本身是可调用的，调用它由用户自行决定。我们可以这样设置：

    ```
    std::packaged_task<int(double, char, bool)> tsk(foo);

    auto fut = tsk.get_future();    // is a std::future<int> 
    ```

    一旦我们调用任务并且调用完成，未来就准备好了。这是单独线程的理想工作。我们只需要确保*将任务移动*到线程中：

    ```
    std::thread thr(std::move(tsk), 1.5, 'x', false); 
    ```

    线程立即开始运行。我们可以使用`detach`它，或者`join`在作用域的末尾使用它，或者在任何时候使用它（例如，使用 Anthony Williams 的`scoped_thread`包装器，它确实应该在标准库中）。不过，使用的细节与`std::thread`我们无关；只要确保最终加入或分离`thr`。重要的是，只要函数调用完成，我们的结果就准备好了：

    ```
    auto res = fut.get();  // as before 
    ```* 
**   现在我们降到最低层：我们将如何*实现*打包的任务？这就是它的[`std::promise`](http://en.cppreference.com/w/cpp/thread/promise)用武之地。承诺是与未来沟通的基石。主要步骤如下：

    *   调用线程做出一个承诺。

    *   调用线程从 Promise 中获得一个未来。

    *   承诺与函数参数一起被移到一个单独的线程中。

    *   新线程执行函数并履行承诺。

    *   原始线程检索结果。

    例如，这是我们自己的“打包任务”：

    ```
    template <typename> class my_task;

    template <typename R, typename ...Args>
    class my_task<R(Args...)>
    {
        std::function<R(Args...)> fn;
        std::promise<R> pr;             // the promise of the result
    public:
        template <typename ...Ts>
        explicit my_task(Ts &&... ts) : fn(std::forward<Ts>(ts)...) { }

        template <typename ...Ts>
        void operator()(Ts &&... ts)
        {
            pr.set_value(fn(std::forward<Ts>(ts)...));  // fulfill the promise
        }

        std::future<R> get_future() { return pr.get_future(); }

        // disable copy, default move
    }; 
    ```

    该模板的用法与`std::packaged_task`. 请注意，移动整个任务包含移动承诺。在更特殊的情况下，也可以将 promise 对象显式移动到新线程中，并使其成为线程函数的函数参数，但是像上面这样的任务包装器似乎是一种更灵活且侵入性更小的解决方案。* 

 ** * *

## 例外处理

Promise 与异常密切相关。仅 Promise 的接口不足以完整地传达其状态，因此只要对 Promise 的操作没有意义，就会引发异常。所有异常都是类型`std::future_error`，它派生自`std::logic_error`. 首先，描述一些约束：

*   默认构造的 Promise 是无效的。不活跃的承诺可能会毫无后果地消失。

*   当通过 获得未来时，承诺变得活跃`get_future()`。但是，只能得到*一个*未来！

*   如果要使用它的未来，则必须在其生命周期结束之前通过通过`set_value()`或设置异常来满足承诺。`set_exception()`一个满意的承诺可以毫无后果地消亡，并`get()`在未来变得可用。带有异常的承诺将`get()`在未来调用时引发存储的异常。如果 Promise 既没有价值也没有异常而死，调用`get()`未来将引发“破碎的 Promise”异常。

这是一个小测试系列来演示这些不同的异常行为。一、线束：

```
#include <iostream>
#include <future>
#include <exception>
#include <stdexcept>

int test();

int main()
{
    try
    {
        return test();
    }
    catch (std::future_error const & e)
    {
        std::cout << "Future error: " << e.what() << " / " << e.code() << std::endl;
    }
    catch (std::exception const & e)
    {
        std::cout << "Standard exception: " << e.what() << std::endl;
    }
    catch (...)
    {
        std::cout << "Unknown exception." << std::endl;
    }
} 
```

现在开始测试。

**案例 1：无效的承诺**

```
int test()
{
    std::promise<int> pr;
    return 0;
}
// fine, no problems 
```

**案例 2：主动承诺，未使用**

```
int test()
{
    std::promise<int> pr;
    auto fut = pr.get_future();
    return 0;
}
// fine, no problems; fut.get() would block indefinitely 
```

**案例3：期货太多**

```
int test()
{
    std::promise<int> pr;
    auto fut1 = pr.get_future();
    auto fut2 = pr.get_future();  //   Error: "Future already retrieved"
    return 0;
} 
```

**案例4：兑现承诺**

```
int test()
{
    std::promise<int> pr;
    auto fut = pr.get_future();

    {
        std::promise<int> pr2(std::move(pr));
        pr2.set_value(10);
    }

    return fut.get();
}
// Fine, returns "10". 
```

**案例5：过分满足**

```
int test()
{
    std::promise<int> pr;
    auto fut = pr.get_future();

    {
        std::promise<int> pr2(std::move(pr));
        pr2.set_value(10);
        pr2.set_value(10);  // Error: "Promise already satisfied"
    }

    return fut.get();
} 
```

如果或中的*任何*一个有多个，则会引发相同的异常。`set_value``set_exception`

**案例 6：异常**

```
int test()
{
    std::promise<int> pr;
    auto fut = pr.get_future();

    {
        std::promise<int> pr2(std::move(pr));
        pr2.set_exception(std::make_exception_ptr(std::runtime_error("Booboo")));
    }

    return fut.get();
}
// throws the runtime_error exception 
```

**案例7：失信**

```
int test()
{
    std::promise<int> pr;
    auto fut = pr.get_future();

    {
        std::promise<int> pr2(std::move(pr));
    }   // Error: "broken promise"

    return fut.get();
} 
```

* * *

## 回答 #2

> 赞同：207
> 
> 时间：2012-06-13T17:59:00.707

用 [futures.state] 的话来说，a`std::future`是*异步返回对象*（“从共享状态读取结果的对象”），a`std::promise`是*异步提供者*（“向共享状态提供结果的对象”），即 a promise 是你*设置*结果的东西，这样你就可以从相关的未来中*得到它。*

异步提供者最初是创建未来引用的共享状态。`std::promise`是一种异步提供程序，`std::packaged_task`是另一种，内部细节`std::async`是另一种。它们中的每一个都可以创建一个共享状态并为您提供一个`std::future`共享该状态的对象，并且可以使该状态准备就绪。

`std::async`是一个更高级别的便利实用程序，它为您提供异步结果对象，并在内部负责创建异步提供程序并在任务完成时使共享状态就绪。`std::packaged_task`您可以使用 a （或`std::bind`和 a `std::promise`）和 a来模拟它，`std::thread`但它更安全且更易于使用`std::async`。

`std::promise`有点低级，因为当您想将异步结果传递给未来时，但是使结果准备就绪的代码不能包装在适合传递给的单个函数中`std::async`。例如，您可能有一个包含多个`promise`s 和关联`future`s 的数组，并且有一个线程执行多个计算并在每个 promise 上设置一个结果。`async`只会让你返回一个结果，返回几个你需要`async`多次调用，这可能会浪费资源。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-06-12T20:34:59.097

[Bartosz Milewski](http://bartoszmilewski.com/2009/03/03/broken-promises-c0x-futures/)提供了很好的文章。

> C++将future的实现拆分成一组小块

std::promise 是这些部分之一。

> Promise 是将返回值（或异常）从执行函数的线程传递到兑现函数 future 的线程的工具。

...

> 未来是围绕承诺通道的接收端构建的同步对象。

因此，如果您想使用未来，您最终会得到一个用于获取异步处理结果的承诺。

该页面的一个示例是：

```
promise<int> intPromise;
future<int> intFuture = intPromise.get_future();
std::thread t(asyncFun, std::move(intPromise));
// do some other stuff
int result = intFuture.get(); // may throw MyException 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2012-06-12T20:30:27.180

在粗略的近似中，您可以将`std::promise`其视为 a 的另一端`std::future`（这是**false**，但为了说明，您可以认为它是）。通信通道的消费者端将使用 a`std::future`来使用来自共享状态的数据，而生产者线程将使用 a`std::promise`来写入共享状态。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-06-12T20:42:10.683

`std::promise`是从异步函数返回信息的通道或路径。`std::future`是同步机制，它使调用者等待，直到返回值`std::promise`准备好（意味着它的值在函数内部设置）。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-01-23T23:33:14.913

异步处理中确实有 3 个核心实体。C++11 目前专注于其中的 2 个。

异步运行某些逻辑所需的核心内容是：

1.  将在“某处”运行的*任务*（逻辑打包为一些仿函数对象）。

2.  实际的*处理节点*——一个线程、一个进程等，当它们被提供给它时​​运行这些仿函数。查看“命令”设计模式，了解基本工作线程池是如何做到这一点的。
3.  结果*句柄*：有人需要该结果，并且需要一个可以为他们获取结果的对象。出于 OOP 和其他原因，任何等待或同步都应在此句柄的 API 中完成。

`std::promise`C++11 将我在 (1)和 (3) 中所说的东西称为`std::future`。 `std::thread`是为 (2) 公开提供的唯一内容。这是不幸的，因为真正的程序需要管理线程和内存资源，并且大多数人希望任务在线程池上运行，而不是为每个小任务创建和销毁线程（这几乎总是会导致不必要的性能损失，并且可以轻松创建资源更糟糕的饥饿）。

根据 Herb Sutter 和 C++11 智囊团的其他人的说法，有初步计划添加一个`std::executor`- 就像在 Java 中一样 - 将作为线程池的基础，并且在逻辑上类似于 (2) 的设置。也许我们会在 C++2014 中看到它，但我的赌注更像是 C++17（如果他们搞砸了这些标准，上帝会帮助我们）。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-01-21T02:51:40.617

A`std::promise`被创建为 promise/future 对的端点，而`std::future`（使用该`get_future()`方法从 std::promise 创建）是另一个端点。这是一种简单的一次性方法，它为两个线程提供同步方式，因为一个线程通过消息向另一个线程提供数据。

您可以将其视为一个线程创建一个提供数据的承诺，而另一个线程在未来收集该承诺。这种机制只能使用一次。

promise/future 机制只是一个方向，从使用 a 的`set_value()`方法的线程到使用a的方法来接收数据`std::promise`的线程。如果多次调用未来的方法，则会生成异常。`get()``std::future``get()`

如果具有 的线程`std::promise`尚未用于`set_value()`履行其承诺，那么当第二个线程调用`get()`收集`std::future`承诺时，第二个线程将进入等待状态，直到第一个线程`std::promise`在使用该`set_value()`方法时履行承诺发送数据。

借助[Technical Specification N4663 Programming Languages — C++ Extensions for Coroutines](https://isocpp.org/files/papers/N4663.pdf)的提议协程和 Visual Studio 2017 C++ 编译器支持`co_await`，还可以使用`std::future`和`std::async`编写协程功能。[请参阅https://stackoverflow.com/a/50753040/1466970](https://stackoverflow.com/a/50753040/1466970)中的讨论和示例，其中有一节讨论了`std::future`with的使用`co_await`。

以下示例代码是一个简单的 Visual Studio 2013 Windows 控制台应用程序，展示了使用一些 C++11 并发类/模板和其他功能。它说明了promise/future的使用效果很好，自治线程将执行一些任务并停止，以及需要更多同步行为并且由于需要多个通知而promise/future对不起作用的用途。

关于此示例的一个注意事项是在各个地方添加的延迟。添加这些延迟只是为了确保打印到控制台的各种消息`std::cout`清晰，并且来自多个线程的文本不会混合。

第一部分`main()`是创建三个额外的线程并在线程之间使用`std::promise`和`std::future`发送数据。一个有趣的地方是主线程启动了一个线程，T2，它将等待来自主线程的数据，做一些事情，然后将数据发送到第三个线程，T3，然后它会做一些事情并将数据发送回主线程。

第二部分`main()`创建两个线程和一组队列，以允许来自主线程的多条消息发送到两个创建的线程中的每一个。我们不能使用`std::promise`and `std::future`，因为 promise/future 二人组是一次性的，不能重复使用。

该课程的来源`Sync_queue`来自 Stroustrup 的 The C++ Programming Language: 4th Edition。

```
// cpp_threads.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <iostream>
#include <thread>  // std::thread is defined here
#include <future>  // std::future and std::promise defined here

#include <list>    // std::list which we use to build a message queue on.

static std::atomic<int> kount(1);       // this variable is used to provide an identifier for each thread started.

//------------------------------------------------
// create a simple queue to let us send notifications to some of our threads.
// a future and promise are one shot type of notifications.
// we use Sync_queue<> to have a queue between a producer thread and a consumer thread.
// this code taken from chapter 42 section 42.3.4
//   The C++ Programming Language, 4th Edition by Bjarne Stroustrup
//   copyright 2014 by Pearson Education, Inc.
template<typename Ttype>
class Sync_queue {
public:
    void  put(const Ttype &val);
    void  get(Ttype &val);

private:
    std::mutex mtx;                   // mutex used to synchronize queue access
    std::condition_variable cond;     // used for notifications when things are added to queue
    std::list <Ttype> q;              // list that is used as a message queue
};

template<typename Ttype>
void Sync_queue<Ttype>::put(const Ttype &val) {
    std::lock_guard <std::mutex> lck(mtx);
    q.push_back(val);
    cond.notify_one();
}

template<typename Ttype>
void Sync_queue<Ttype>::get(Ttype &val) {
    std::unique_lock<std::mutex> lck(mtx);
    cond.wait(lck, [this]{return  !q.empty(); });
    val = q.front();
    q.pop_front();
}
//------------------------------------------------

// thread function that starts up and gets its identifier and then
// waits for a promise to be filled by some other thread.
void func(std::promise<int> &jj) {
    int myId = std::atomic_fetch_add(&kount, 1);   // get my identifier
    std::future<int> intFuture(jj.get_future());
    auto ll = intFuture.get();   // wait for the promise attached to the future
    std::cout << "  func " << myId << " future " << ll << std::endl;
}

// function takes a promise from one thread and creates a value to provide as a promise to another thread.
void func2(std::promise<int> &jj, std::promise<int>&pp) {
    int myId = std::atomic_fetch_add(&kount, 1);   // get my identifier
    std::future<int> intFuture(jj.get_future());
    auto ll = intFuture.get();     // wait for the promise attached to the future

    auto promiseValue = ll * 100;   // create the value to provide as promised to the next thread in the chain
    pp.set_value(promiseValue);
    std::cout << "  func2 " << myId << " promised " << promiseValue << " ll was " << ll << std::endl;
}

// thread function that starts up and waits for a series of notifications for work to do.
void func3(Sync_queue<int> &q, int iBegin, int iEnd, int *pInts) {
    int myId = std::atomic_fetch_add(&kount, 1);

    int ll;
    q.get(ll);    // wait on a notification and when we get it, processes it.
    while (ll > 0) {
        std::cout << "  func3 " << myId << " start loop base " << ll << " " << iBegin << " to " << iEnd << std::endl;
        for (int i = iBegin; i < iEnd; i++) {
            pInts[i] = ll + i;
        }
        q.get(ll);  // we finished this job so now wait for the next one.
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    std::chrono::milliseconds myDur(1000);

    // create our various promise and future objects which we are going to use to synchronise our threads
    // create our three threads which are going to do some simple things.
    std::cout << "MAIN #1 - create our threads." << std::endl;

    // thread T1 is going to wait on a promised int
    std::promise<int> intPromiseT1;
    std::thread t1(func, std::ref(intPromiseT1));

    // thread T2 is going to wait on a promised int and then provide a promised int to thread T3
    std::promise<int> intPromiseT2;
    std::promise<int> intPromiseT3;

    std::thread t2(func2, std::ref(intPromiseT2), std::ref(intPromiseT3));

    // thread T3 is going to wait on a promised int and then provide a promised int to thread Main
    std::promise<int> intPromiseMain;
    std::thread t3(func2, std::ref(intPromiseT3), std::ref(intPromiseMain));

    std::this_thread::sleep_for(myDur);
    std::cout << "MAIN #2 - provide the value for promise #1" << std::endl;
    intPromiseT1.set_value(22);

    std::this_thread::sleep_for(myDur);
    std::cout << "MAIN #2.2 - provide the value for promise #2" << std::endl;
    std::this_thread::sleep_for(myDur);
    intPromiseT2.set_value(1001);
    std::this_thread::sleep_for(myDur);
    std::cout << "MAIN #2.4 - set_value 1001 completed." << std::endl;

    std::future<int> intFutureMain(intPromiseMain.get_future());
    auto t3Promised = intFutureMain.get();
    std::cout << "MAIN #2.3 - intFutureMain.get() from T3\. " << t3Promised << std::endl;

    t1.join();
    t2.join();
    t3.join();

    int iArray[100];

    Sync_queue<int> q1;    // notification queue for messages to thread t11
    Sync_queue<int> q2;    // notification queue for messages to thread t12

    std::thread t11(func3, std::ref(q1), 0, 5, iArray);     // start thread t11 with its queue and section of the array
    std::this_thread::sleep_for(myDur);
    std::thread t12(func3, std::ref(q2), 10, 15, iArray);   // start thread t12 with its queue and section of the array
    std::this_thread::sleep_for(myDur);

    // send a series of jobs to our threads by sending notification to each thread's queue.
    for (int i = 0; i < 5; i++) {
        std::cout << "MAIN #11 Loop to do array " << i << std::endl;
        std::this_thread::sleep_for(myDur);  // sleep a moment for I/O to complete
        q1.put(i + 100);
        std::this_thread::sleep_for(myDur);  // sleep a moment for I/O to complete
        q2.put(i + 1000);
        std::this_thread::sleep_for(myDur);  // sleep a moment for I/O to complete
    }

    // close down the job threads so that we can quit.
    q1.put(-1);    // indicate we are done with agreed upon out of range data value
    q2.put(-1);    // indicate we are done with agreed upon out of range data value

    t11.join();
    t12.join();
    return 0;
} 
```

这个简单的应用程序创建以下输出。

```
MAIN #1 - create our threads.
MAIN #2 - provide the value for promise #1
  func 1 future 22
MAIN #2.2 - provide the value for promise #2
  func2 2 promised 100100 ll was 1001
  func2 3 promised 10010000 ll was 100100
MAIN #2.4 - set_value 1001 completed.
MAIN #2.3 - intFutureMain.get() from T3\. 10010000
MAIN #11 Loop to do array 0
  func3 4 start loop base 100 0 to 5
  func3 5 start loop base 1000 10 to 15
MAIN #11 Loop to do array 1
  func3 4 start loop base 101 0 to 5
  func3 5 start loop base 1001 10 to 15
MAIN #11 Loop to do array 2
  func3 4 start loop base 102 0 to 5
  func3 5 start loop base 1002 10 to 15
MAIN #11 Loop to do array 3
  func3 4 start loop base 103 0 to 5
  func3 5 start loop base 1003 10 to 15
MAIN #11 Loop to do array 4
  func3 4 start loop base 104 0 to 5
  func3 5 start loop base 1004 10 to 15 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-29T21:24:24.627

**承诺是电线的另一端。**

想象一下，您需要检索由 a`future`计算的 a 的值`async`。但是，您不希望它在同一个线程中计算，甚至“现在”都不会产生线程 - 也许您的软件设计为从池中选择一个线程，所以您不知道*谁会*最后执行 che 计算。

现在，你将什么传递给这个（但未知的）线程/类/实体？你没有通过`future`，因为这是*结果*。您想传递*连接*到`future`并且代表**电线另一端的**东西，因此您将只查询`future`不知道谁将实际计算/编写某些东西。

这是`promise`. 它是一个*连接*到您的`future`. 如果`future`是**扬声器**，并且随着`get()`您开始聆听直到有声音出现，则`promise`是**麦克风**；但不仅仅是任何麦克风，它是通过单根电线连接到您持有的扬声器*的麦克风。*你可能知道谁在另一端，但你不需要知道——你只要给它，等对方说些什么。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-06T09:15:57.327

[http://www.cplusplus.com/reference/future/promise/](http://www.cplusplus.com/reference/future/promise/)

一句话解释：furture::get()永远等待promse::set_value()。

```
void print_int(std::future<int>& fut) {
    int x = fut.get(); // future would wait prom.set_value forever
    std::cout << "value: " << x << '\n';
}

int main()
{
    std::promise<int> prom;                      // create promise

    std::future<int> fut = prom.get_future();    // engagement with future

    std::thread th1(print_int, std::ref(fut));  // send future to new thread

    prom.set_value(10);                         // fulfill promise
                                                 // (synchronizes with getting the future)
    th1.join();
    return 0;
} 
```*

# xml - Xslt 更改节点并添加命名空间

> ID：11004283
> 
> 赞同：2
> 
> 时间：2012-06-12T20:24:09.757
> 
> 标签：xml, xslt, replace, namespaces

我有以下 XML

```
<?xml version="1.0"?>
<location>
<Destination>Des01</Destination>
<DesCode>ACD8701</DesCode>
<UniqueId>023154</UniqueId>
<Amount>26</Amount>
</location> 
```

我想更改`<location>`into`<abc_ItemUpdate>`并添加命名空间，因此使用 XSLT 后输出应如下所示

```
<ns0:abc_ItemUpdate xmlns:ns0="http://schemas.microsoft.com/Sql/2008/05/TypedProcedures/dbo">
    <ns0:Destination>Des01</ns0:LegalEntity>
    <ns0:DesCode>ACD8701</ns0:DesCode>
    <ns0:UniqueId>023154</ns0:UniqueId>
    <ns0:Amount>26</ns0:Amount>
</ns0:abc_ItemUpdate> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T22:33:00.410

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output indent="yes"/>

 <xsl:template match="/location">

     <xsl:element name="ns0:abc_ItemUpdate" namespace="http://yournms">
         <!-- copy attributes if any -->
         <xsl:copy-of select="@*"/>
         <xsl:apply-templates/>
     </xsl:element>

 </xsl:template>

 <xsl:template match="*">
     <xsl:element name="ns0:{name()}" namespace="http://yournms">
         <!-- copy attributes if any -->
         <xsl:copy-of select="@*"/>
         <xsl:apply-templates/>
     </xsl:element>
 </xsl:template>

</xsl:stylesheet> 
```

# c++ - 错误 LNK2019：由于帮助程序库，无法解析外部符号

> ID：11004286
> 
> 赞同：1
> 
> 时间：2012-06-12T20:24:15.080
> 
> 标签：c++, lnk2019

我认为问题出`ConvertToUpperCase`在我的 CS 课程中使用的帮助程序库中包含的一个函数。我正在尝试为我的实验写一些东西，但我是通过辅助库学习的——所以我不知道没有它该怎么办。

完整的错误错误：

> LNK2019：未解析的外部符号“class std::basic_string,class std::allocator > __cdecl ConvertToUpperCase(class std::basic_string,class std::allocator >)”(?ConvertToUpperCase@@YA?AV?$basic_string@DU?$ char_traits@D@std@@V?$allocator@D@2@@std@@V12@@Z) 在函数“public: bool __thiscall Lexicon::containsPrefix(class std::basic_string,class std::allocator > )" (?containsPrefix@Lexicon@@QAE_NV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)

该功能包含在[此处](http://www.stanford.edu/class/cs106x/documentation/strutils_8h.html)`strutils.h` 并进行说明

示例代码：

```
#include "stdafx.h"
#include <cstdlib>
#include <string>
#include <iostream>
#include <set>
#include <fstream>
#include "genlib.h"
#include "strutils.h"
#include "simpio.h"
#include "set.h"
#include "lexicon.h"

using namespace std;

/* Function: AddWord1
* -----------------
* This function prompts the user for a code and then
* coverts entry to upper case and adds this word to the code list passed in.
*/
void AddWord1(Lexicon & lex)
{
    cout << "Please enter activity code to add: ";
    string word = ConvertToUpperCase(GetLine()); //may need to remove for code
    lex.add(word);
    cout << word << " added to code list." << endl;
} 
```

澄清：

*   是的，这是 2009 年和 2010 年的工作代码 - 所以它被实施了。
*   该库是一个 .lib，我现在使用的是[sourceForge 版本](http://sourceforge.net/projects/progabstrlib/)。
*   VS 2008，它最后是从 VS2005 编译的，我试过 VS2005 和 VS2011BETA 但仍然有错误。
*   我正在尝试确保将适当的 cpp 文件添加到项目中；我认为他们是。我的 genlib.cpp 的日期为 2011 年，与面向 Linux 用户的 github.com/b33tr00t/cs106lib 版本不同，因此存在一些差异是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:56:05.763

There should be a library containing the compiled code as well as the header that you have. You need to add that library (a .lib or .obj file) to your project - specifically you need to include it in the linker settings.

If you don't have that then you might have one or more C++ source files defining those functions - you could add those to the project.

If you have none of those then you have a problem, I'm afraid.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:18:35.503

If you don't have access to that library anymore (since you may no longer be in the class), you can write your own `ConvertToUpperCase` function using one of the techniques from [this question](https://stackoverflow.com/questions/735204/convert-a-string-in-c-to-upper-case).

# php - 将 JS 创建的输入文本框的值插入数据库

> ID：11004295
> 
> 赞同：0
> 
> 时间：2012-06-12T20:24:40.103
> 
> 标签：php, javascript, mysql

我正在使用 jQuery 创建用户需要的输入文本框，如下所示：

```
<script type="text/javascript">
$(document).ready(function() {
$('#names').on({
    blur: function() {
        var name = $("<p><input class='input' type='text' /></p>")
        var nullFields = 0;
        $(this).closest('div#names').find('input.input').each(function(){
            if($(this).val() == ""){
                nullFields++;
            }
        });
        console.log(nullFields);
        if(nullFields <= 1){
         $('#names').append(name.fadeIn(500));
        }
    }
}, 'input');
 });
</script> 
```

`$_POST['blah']`使用and将静态文本框插入数据库不是问题`mysql_query("INSERT INTO ...")`，但是如何插入动态创建的文本框的值？我知道我必须在创建文本框时给它们起不同的名称，并且我认为 MySQL 查询将通过某种循环方式进行。

**编辑**

有问题的网站在[这里](http://comfyshoulderrest.com/guestvibe/index.php)，特别是在第 4 步。如上所述，第 3 步非常简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:29:36.573

这是一个帮助您入门的示例，而不是完整的解决方案。您为名称创建一个数组，然后让 php 插入每个数组项

```
var currentArrayNum = 1;    
$('#someClickable').click(function(){

        $('#td').append('<input name="arrayName['+currentArrayNum+']" value="" />');
        currentArrayNum += 1;
    }); 
```

php:

```
foreach ($_POST as $key){
        if (is_array($key)){
                foreach ($key as $key2 => $value){
                //$key2 will equal arrayName[currentArrayNum]
               //$value will equal the user input for the text field
do some stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:38:37.910

您可以使用名称创建数组，只需尝试以下操作：

```
<input type="text" name="post_input[input_1]" value="">
<input type="text" name="post_input[input_2]" value=""> 
```

提交后，您将从 $_POST["post_input"] 中获得一个数组，其中包含键 input_1 和 input_2 及其分配的值。然后你只需将它们作为普通数组循环，例如

```
$aTextFields = $_POST["post_input"];
foreach( $aTextFields as $sValue ) {
  ...
} 
```

# javascript - 具有优雅基础设施的基本 dojo 1.7 简单 Web 应用程序（例如 dojo 样板）

> ID：11004297
> 
> 赞同：3
> 
> 时间：2012-06-12T20:24:53.297
> 
> 标签：javascript, model-view-controller, dojo

我遇到了一个[带有 dojo 1.5 的示例应用程序](http://www.ibm.com/developerworks/web/tutorials/wa-dojotoolkit/section2.html)，但这并不是我真正想要实现的：它根本不是模块化的。我想利用 amd 和各种设计模式（如 MVC）来拥有一个非常有组织的应用程序。不幸的是，dojo 社区和“示例”不太明显或不存在（与 Jquery 相比）。有很多关于特定 dojo 特性的各种实现的很酷的教程，但没有一个是解释如何为 dojo 项目创建一个简单（但同时也是复杂的）squeleton 的非常基础的教程。[我在 github 上](https://github.com/csnover/dojo-boilerplate)遇到了dojo 样板项目，并尝试从那里开始，但我发现（作为初学者）很难实现诸如登录或基本界面之类的琐碎事情（并通过模块、事件处理、数据等将所有这些分开）。我只是不想只使用一个 index.html 和一个 javascript 文件来制作一个 dojo 应用程序，我可以做到，但是对于维护和添加东西，这将是一团糟。通过这篇文章，我希望获得关于这个特定主题的一些信息，并可能为 dojo 创建一个关于如何启动一个真正的 Web 应用程序的教程。例如，应用mvc模式，我认为一个好的应用教程应该有一个登录示例（认证）和一个基本的模块化界面（比如某种主容器，并且在各种事件上，容器ui会随着不同的widget而改变） . 一世' 我会在 github 上做一些事情并在我完成后发布。如果您之前完成，请继续；）

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:29:23.550

[GitHub](https://github.com/addyosmani/todomvc)上有[**TodoMVC**](http://addyosmani.github.com/todomvc/)：

> 该项目提供了在当今大多数流行的 JavaScript MV* 框架中使用 MV* 概念实现的相同 Todo 应用程序。

它使用`dojox.mvc`了提到的@PEM。它不是 2011 年 5 月 16 日刚刚发布的构建 Dojo 应用程序的典型方式`dojox.mvc`，但值得一看。还有[现场演示](http://addyosmani.github.com/todomvc/architecture-examples/dojo/index.html)和教程**在 Dojo 中创建 Todo MVC**：

*   [概述](http://jamesthom.as/blog/2012/01/28/dojomvc_overview/)
*   [第 1 部分：模型](http://jamesthom.as/blog/2012/02/26/dojomvc-models/)
*   [第 2 部分：视图](http://jamesthom.as/blog/2012/04/13/dojomvc-views/)
*   [第 3 部分：控制器](http://jamesthom.as/blog/2012/05/26/dojomvc-controllers/)

还可以查看[Dojo Web Builder的](http://build.dojotoolkit.org/)[源代码](https://github.com/dojo/dwb)（+ 文章介绍新的[Dojo Web Builder](http://dojotoolkit.org/blog/introducing-the-new-dojo-web-builder)）。

最后但并非最不重要的是[Maqetta](http://maqetta.org/)（[来源 GitHub](https://github.com/maqetta/maqetta)），这是人们能找到的最复杂的 Dojo 应用程序。看特别是。在`maqetta.core.client/WebContent/`目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:52:05.760

可能你搜索的还不够多？道场MVC：

*   [http://livedocs.dojotoolkit.org/dojox/mvc](http://livedocs.dojotoolkit.org/dojox/mvc)
*   [http://dojotoolkit.org/documentation/tutorials/1.7/data_modeling/](http://dojotoolkit.org/documentation/tutorials/1.7/data_modeling/)

> 我只是不想只使用一个 index.html 和一个 javascript 文件来制作一个 dojo 应用程序

但这基本上是 Dojo 的用途和擅长的......

现在，如果您想做一个“真正的 Web 应用程序”，那么 dojo 是正确的框架。但是您还必须学习如何使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T11:48:52.460

构建示例应用程序教程有几个问题。

首先，具有您所描述的示例应用程序将需要一个 Web 服务器与之通信。Dojo 与 Web 服务器无关，那么您为示例应用程序选择什么技术？其次，现在需要一个服务器才能使演示在线可用，或者有兴趣查看演示的人需要安装 Web 服务器。听起来很简单，但它是一个障碍，会阻止新手继续。

其次，即使使用 Web 服务器，也有很多方法可以构建/构建 Web 应用程序。

> 我认为一个好的应用程序教程应该有一个登录示例（身份验证）和一个基本的模块化界面（比如某种主容器，并且在各种事件中，容器 ui 会随着不同的小部件而变化）

从您发布的内容来看，您正在寻找一个单页应用程序。单页应用程序（例如 SEO）有缺点，创建示例单页应用程序需要让开发人员清楚使用示例的缺点是什么。它不是所有 Dojo/Web 应用程序的灵丹妙药。

我在 Github 上有一个项目，当然它还没有准备好进入黄金时段，但你可以看看。这是一个使用 Java/Spring 作为后端服务器的单页应用程序。我距离查看 Spring Pet Clinic 示例还有几天的时间，该示例将演示一些功能。我还需要更新 wiki 以描述如何创建示例应用程序。

[https://github.com/cswing/evinceframework](https://github.com/cswing/evinceframework)

此外，我经常使用主题测试器来查看不同的小部件。不完全是您要查找的内容，但一些遇到此问题的人可能会发现该链接很有用。

[http://archive.dojotoolkit.org/nightly/dojotoolkit/dijit/themes/themeTester.html](http://archive.dojotoolkit.org/nightly/dojotoolkit/dijit/themes/themeTester.html)

# web-services - 无法识别以“/$metadata”结尾的 URL 的请求格式

> ID：11004304
> 
> 赞同：3
> 
> 时间：2012-06-12T20:25:44.123
> 
> 标签：web-services, c#-4.0, metadata

我想我会尝试看看是否有人看过这个或类似的东西，因为我不确定从哪里开始寻找。我有一堆网络服务在很长一段时间内都很好，但现在我的服务器人员说他们给出了一个我以前从未见过的错误。有什么想法/事情要看吗？

```
Log Name:      Application
Source:        ASP.NET 4.0.30319.0
Date:          6/12/2012 6:57:03 AM
Event ID:      1309
Task Category: Web Event
Level:         Warning
Keywords:      Classic
User:          N/A
Computer:      Server
Description:
Event code: 3005 
Event message: An unhandled exception has occurred. 
Event time: 6/12/2012 6:57:03 AM 
Event time (UTC): 6/12/2012 1:57:03 PM 
Event ID: 691c9c8fabeb4701aa31488d6db060ce 
Event sequence: 123578 
Event occurrence: 1 
Event detail code: 0 

Application information: 
Application domain: domain
Trust level: Full 
Application Virtual Path: / 
Application Path: D:\Sites\webroot\ 
Machine name: Server

Process information: 
Process ID: 2456 
Process name: w3wp.exe 
Account name: IIS APPPOOL\AppPool_AID1651 

Exception information: 
Exception type: InvalidOperationException 
Exception message: Request format is unrecognized for URL unexpectedly ending in '/$metadata'.
at System.Web.Services.Protocols.WebServiceHandlerFactory.CoreGetHandler(Type type, HttpContext context, HttpRequest request, HttpResponse response)
at System.Web.Services.Protocols.WebServiceHandlerFactory.GetHandler(HttpContext context, String verb, String url, String filePath)
at System.Web.Script.Services.ScriptHandlerFactory.GetHandler(HttpContext context, String requestType, String url, String pathTranslated)
at System.Web.HttpApplication.MaterializeHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-04-22T18:17:42.227

您只需将以下内容添加到您的 web.config

```
<configuration>
  <system.web>
    <webServices>
      <protocols>
        <add name="HttpGet"/>
        <add name="HttpPost"/>
      </protocols>
    </webServices>
  </system.web>
</configuration> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T18:13:53.713

我的网络服务也记录`Event Code 3005`. 我正在使用 JQuery 调用我的 Web 服务`$.ajax()`，它会产生两个 http 请求。第一个请求是“OPTIONS”请求，并收到`500 Internal Server Error`一条消息。这是正在记录的那个`Event Code 3005`。第二个请求是“POST”请求，Web 服务给出了正确的答案。

我没有成功阻止“选项”请求被记录为错误，但我希望这些信息对你有帮助。

我的错误日志也与你的这个短语相匹配：

> 异常消息：无法识别请求格式，因为 URL 意外以…结尾。</p>

# r - 使用 R 绘制二维参数空间

> ID：11004305
> 
> 赞同：3
> 
> 时间：2012-06-12T20:26:01.927
> 
> 标签：r

我用 Mathematica 做了一个情节。我猜，使用 R 可以使这个情节看起来更优雅。

我怎样才能在R中制作这样的情节？

![数学图](../Images/bde2fb637e3826b81be4f776e911b6e6.png)

它是关于函数 M_{\pm}

```
M^2_\pm = \frac{y \pm \sqrt{14x + 6xy + y^2}}{2x} 
```

以下是在情节上显示

*   曲线 M^2_+ = M_-
*   曲线 M^2_+ = 0
*   曲线 M^2_- = 0
*   M^2_+ 和 M^2_- > 0 的阴影区域
*   一些带文字的点

在新的情节

*   轴应该在图的外部，就像在 R 中一样
*   我欢迎为图片中的文字和箭头提供更优雅的替代方案

PS 借助 RI 的帮助页面尝试制作这样的情节，但我并没有超出情节和曲线的基本使用范围。

**更新**也许轮廓可以完成这项工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:12:32.910

你可以这样做：

```
f <- function(x,y){x*y}
x <- seq(0.2,2,length=1000)
objective <- 0.5
y <- c()
for(i in 1:length(x)){
  y[i] <- optimize(function(y){abs(f(x[i],y)-objective)},interval=c(0,4))$minimum
}
plot(x,y,type="l") 
```

该图显示了函数 x*y=0.5 的位置，x 介于 0.2 和 2 之间。这不适用于您的特定函数，但我希望这是一个有用的开始。请注意，这是非常hacky，因为速度很`optimize`慢，并且`for`通常应尽可能在R中避免循环。

![绘制 f(x,y) = x*y = 0.5](../Images/1bb937e3eb0ce29b87edcba2c91c3b1e.png)

# symfony - Symfony 2 - FOSCommentBundle：添加附件功能

> ID：11004306
> 
> 赞同：1
> 
> 时间：2012-06-12T20:26:05.980
> 
> 标签：symfony, doctrine-orm

我需要添加将文件附加到评论的功能。当用户将文件放入表单时，图像的上传会自动上传（与您使用 gmail 附加文件的方式相同）。我的问题是如何在提交评论时找到先前发送到服务器的文件，如果从未提交过该文件，如何删除评论。

你们中有人做过类似的事情吗？

这是我的类 Comment 和 Document 之间的关联。

```
class Comment extends BaseComment
{
    /** ...  */

    /**
     * @ORM\ManyToMany(targetEntity="Document", cascade={"persist","remove"})
     * @ORM\JoinTable(name="fls_comment_and_documents",
     * joinColumns={@ORM\JoinColumn(name="comment_id", referencedColumnName="id")},
     * inverseJoinColumns={@ORM\JoinColumn(name="document_id", referencedColumnName="id", unique=true)}
     * )
     * 
     * @var ArrayCollection $documents
     */
    protected $documents;

     /** ...  */ 
} 
```

提前致谢 ！

# objective-c - 当弹出框被解除时，从 UIPopoverController 中的 UIViewController 返回数据

> ID：11004307
> 
> 赞同：0
> 
> 时间：2012-06-12T20:26:07.480
> 
> 标签：objective-c, ios, uipopovercontroller

我有第二个视图控制器设置为在 UIPopoverController 中显示。我在第二个视图控制器中设置了一个委托，因此当用户点击“完成”按钮时，它会将数据传递回第一个视图控制器。数据是用户做出的选择列表，而不是单个选择。

如果用户在弹出窗口之外点击并被解雇，我无法找到将数据传递回第一个视图控制器的方法。现在，如果用户点击弹出窗口的一侧并且它被关闭，我会丢失数据。

我想我可以通过在弹出窗口之外点击来限制他们解除弹出窗口，但我宁愿不这样做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T20:37:14.940

当您呈现 时`UIPopoverController`，将其设置`delegate`为`self`

然后在类中添加这个函数

```
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
    YourViewController *controller =  popoverController.contentViewController;
    MyData *data = controller.yourData;
    //Do something with data
} 
```

当弹出框关闭时将调用此函数

# c# - 对 DataTable 执行 sql 查询

> ID：11004309
> 
> 赞同：5
> 
> 时间：2012-06-12T20:26:09.387
> 
> 标签：c#, sql, winforms, datatable

我在 C# 中有一个从 SQL 服务器返回的 DataTable。我将这个数据表传递给几个单独的函数。

我可以直接向 DataTable 发送某种查询，而不是遍历所有记录吗？

例如

```
set|subset|value
1  |1     |40
1  |2     |30
1  |3     |35
2  |1     |10
2  |2     |15
2  |3     |20 
```

我怎样才能做类似的事情`SELECT DISTINCT SET FROM TABLE`并获得价值`1`和`2`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T20:27:07.463

只需使用 LINQ，它更容易。

```
var result = yourTable.AsEnumerable().Select(f => f.Field<int>("Set")).Distinct(); 
```

# vim - 如何丢弃完成建议

> ID：11004312
> 
> 赞同：5
> 
> 时间：2012-06-12T20:26:29.197
> 
> 标签：vim

我刚刚将我的“completeopt”设置从：

```
set completeopt = preview,menuone,longest 
```

为默认值：

```
set completeopt = preview,menuone 
```

在按原样使用它很长一段时间后，我决定我更喜欢默认选择第一个条目。

不过，我确实有一个烦恼。我希望能够尝试完成，如果我正在寻找的匹配不在列表中，那么丢弃建议的完成并恢复到我的原始文本。这是怎么做到的？

我似乎从遥远的过去记得这种行为是存在的，但是随机敲击按钮并没有被证明是富有成效的，而且搜索对我来说并不奏效。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T20:30:41.480

您可以随时键入`Ctrl-E`以返回原始文本。

此外，`Ctrl-N`/`Ctrl-P`最终将循环回到原始文本。

请参阅：`:help completion`有关更多详细信息：

> 当完成处于活动状态时，您可以使用 CTRL-E 停止它并返回到最初键入的文本。不会插入 CTRL-E。

# c - 无法链接 OpenSSL 代码

> ID：11004314
> 
> 赞同：6
> 
> 时间：2012-06-12T20:26:34.893
> 
> 标签：c, linux, encryption, cryptography, openssl

我正在尝试构建一个 openssl 简单程序。这是完整的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "openssl/aes.h"

int main(int argc, char* argv[])
{
    AES_KEY aesKey_;
    unsigned char userKey_[16];
    unsigned char in_[16];
    unsigned char out_[16];
    strcpy(userKey_,"0123456789123456");
    strcpy(in_,"0123456789123456");

    fprintf(stdout,"Original message: %s", in_);
    AES_set_encrypt_key(userKey_, 128, &aesKey_);
    AES_encrypt(in_, out_, &aesKey_);

    AES_set_decrypt_key(userKey_, 128, &aesKey_);
    AES_decrypt(out_, in_,&aesKey_);
    fprintf(stdout,"Recovered Original message: %s", in_);      
    return 0;
} 
```

我尝试使用以下命令编译它：

```
gcc -I/home/aleksei/openSSL0.9.8/include -o app -L . -lssl -lcrypto tema1.c 
```

我明白了：

```
 /tmp/ccT1XMid.o: In function `main':
 tema1.c:(.text+0x8d): undefined reference to `AES_set_encrypt_key'
 tema1.c:(.text+0xa7): undefined reference to `AES_encrypt'
 tema1.c:(.text+0xbf): undefined reference to `AES_set_decrypt_key'
 tema1.c:(.text+0xd9): undefined reference to `AES_decrypt'
 collect2: ld returned 1 exit status 
```

我在 Ubuntu 10.04 下。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T22:09:52.097

您可能正在尝试静态链接，但该`-L`选项`-lcrypto`正在寻找要动态链接的文件。要静态链接到特定库，只需`.a`在所有源文件之后在编译器命令行上指定您的文件。

例如，

```
gcc -I/home/aleksei/openSSL0.9.8/include -o app tema1.c ./libcrypto.a 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-15T19:32:00.227

对于那些有同样问题但正在使用 Windows、Mingw 和这个[OpenSSL for Windows 的人（目前：Win32 OpenSSL v1.0.2a）](http://slproweb.com/products/Win32OpenSSL.html)。您需要链接到`libeay32.a`位于`C:\OpenSSL-Win32\lib\MinGW\`（安装 OpenSSL 之后）的那个。

就我而言，我使用的是 CMake 和[强大的 CLion IDE](https://www.jetbrains.com/clion/)，所以我不得不将库重命名为，`libeay32.dll.a`因为 CMake 没有找到库。这是我的 CMakeLists.txt：

```
cmake_minimum_required(VERSION 3.1)
project(openssl_1_0_2a)

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")

include_directories(C:\\OpenSSL-Win32\\include)

set(SOURCE_FILES main.cpp)

link_directories(C:\\OpenSSL-Win32\\lib\\MinGW)

add_executable(openssl_1_0_2a ${SOURCE_FILES})

target_link_libraries(openssl_1_0_2a eay32) 
```

我用这个例子做了测试（这是从[这个答案](https://stackoverflow.com/a/10082316/2692914)借来的）：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "openssl/aes.h"

int main(int argc, char* argv[])
{
    AES_KEY aesKey_;
    unsigned char userKey_[16];
    unsigned char in_[16] = {0};
    unsigned char out_[16] = {0};
    strcpy((char *) userKey_,"0123456789123456");
    strcpy((char *) in_,"0123456789123456");

    fprintf(stdout,"Original message: %s\n", in_);
    AES_set_encrypt_key(userKey_, 128, &aesKey_);
    AES_encrypt(in_, out_, &aesKey_);

    AES_set_decrypt_key(userKey_, 128, &aesKey_);
    AES_decrypt(out_, in_,&aesKey_);
    fprintf(stdout,"Recovered Original message: %s XXX \n", in_);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-26T10:00:41.270

我认为参数的顺序应该重置如下：

```
gcc -I/home/aleksei/openSSL0.9.8/include -o app  tema1.c -L . -lssl -lcrypto 
```

# javascript - 使用 HTML/CSS 在非常规形状周围渲染框阴影

> ID：11004318
> 
> 赞同：11
> 
> 时间：2012-06-12T20:26:56.837
> 
> 标签：javascript, html, overflow, css

我目前正在做一个小项目，我正在尝试创建一个表示加色的维恩图。我从三个圆圈开始（边界半径：50%；），并使用静态定位元素和隐藏溢出的组合来创建一些圆圈重叠的更复杂的形状。你可以在这里看到我目前拥有的东西：

[http://jsfiddle.net/GjvEE/](http://jsfiddle.net/GjvEE/)

我想添加的一个功能是在当前鼠标悬停的形状周围添加一个彩色框阴影。我面临的独特挑战是嵌套隐藏溢出的元素，以及需要创建“人造边缘”来为图表的每个部分呈现框阴影。我考虑过简单地放弃这种方法并通过 SVG 创建形状的选项，但我很想看看你们中是否有人有任何聪明的想法，可以单独使用传统的 HTML 和 CSS3 将这种交互构建成更复杂的形状。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:48:42.117

使用 CSS 的 :after 在其他圆圈后面生成新的圆圈并使用渐变为透明的径向渐变背景怎么样？

我已经在此处的红色和蓝色圆圈上完成了 Webkit 的快速基本实现。注意 :hover:after 样式定义。 [http://jsfiddle.net/stevelove/2hpwp/](http://jsfiddle.net/stevelove/2hpwp/)

# linux - 子进程杀死其父进程而不终止自身

> ID：11004321
> 
> 赞同：-2
> 
> 时间：2012-06-12T20:27:05.857
> 
> 标签：linux, bash, shell

如何在不终止 Linux 中的子进程的情况下从子进程脚本中杀死父进程脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:59:45.117

如果你的 shell 定义了 PPID，`kill $PPID`将杀死父级。如果你的 shell 没有定义`PPID`，你可能可以用`PPID=$( ps -o ppid= $$ )`. 这种行为没有理由杀死孩子。

# java - 如何启用/禁用 LDAP 用户？

> ID：11004323
> 
> 赞同：0
> 
> 时间：2012-06-12T20:27:07.803
> 
> 标签：java, ldap

我正在使用以下 java 代码对 LDAP 用户进行身份验证。如果对象以指定的用户名和密码存在，这将成功。但是，我没有在用户上看到任何允许我激活/停用用户的属性。具体来说，我只想在用户上设置一个属性，这会使身份验证失败，而不会实际删除整个对象。

这可以直接完成还是我需要编写单独的代码来加载用户并检查字段是否标记为活动或非活动？

```
public static boolean authenticate(String url, String securityAuthentication, String securityPrincipal, String usernameKey, String username, String password) {
    try {
        Hashtable env = new Hashtable();
        env.put(InitialContext.INITIAL_CONTEXT_FACTORY,"com.sun.jndi.ldap.LdapCtxFactory");
        env.put(InitialContext.PROVIDER_URL, url);
        env.put(InitialContext.SECURITY_AUTHENTICATION, securityAuthentication);
        env.put(InitialContext.SECURITY_PRINCIPAL, usernameKey +"="+ username + securityPrincipal);
        env.put(InitialContext.SECURITY_CREDENTIALS, password );
        // Create the initial context
        DirContext ctx = new InitialDirContext(env);
        return true;
    } catch (NamingException e) {
        return false;
    }
} 
```

编辑：有人告诉我，我们有一个是活动目录，另一个是 389 目录服务器。

# ruby-on-rails - 使用 has_one 或 has_many 时自动将新记录插入关联

> ID：11004331
> 
> 赞同：0
> 
> 时间：2012-06-12T20:27:24.863
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

现在我有两个表，用户和角色，当然角色有一个 user_id，角色模型有`belongs_to :user`，用户模型有`has_one :role`。我想知道的问题是，如何让用户模型在角色模型中创建新记录。我知道我可以像创建用户一样轻松地在模型之外执行此操作，但我认为它可能会更加精简，并且如果我在用户模型中执行此操作，则可以将所有内容集中在一个位置并简化它。关于如何在保存之前不知道用户 ID 的情况下轻松执行此操作有什么建议吗？

注意：（我只会在 new_record? 为真时才允许这样做，否则将被禁止。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:32:41.797

我正在对用户及其设置做类似的事情，可能这对你有用：

```
class User < ActiveRecord::Base

#...

has_one :role
before_create :build_a_role

private
  def build_a_role
    self.build_role(role_att: value)
  end
end 
```

然后，当用户被保存时，角色也被保存。

# installation - 程序如何判断您是否在演示期间使用过它们？

> ID：11004333
> 
> 赞同：4
> 
> 时间：2012-06-12T20:27:32.657
> 
> 标签：installation, software-distribution, serial-number

在某些程序上，您可以在演示期间运行它们，例如“十个任务”或“5 小时”，然后您才需要决定购买它们以继续使用它们，但如果您删除并卸载该程序然后重新安装它，它知道它以前已安装，不会让您再次运行演示。

它是如何做到的？当您下载它时，它是否会向 CDN 发送一个识别号（IP？），让它知道您以前下载过它，或者当程序本身安装时，它会检查以查看以前安装的痕迹吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:32:59.857

大多数“演示”软件通过从恶意软件中借用的功能来做到这一点：不完全卸载。卸载时不会删除属于该软件的文件或注册表项。重新安装时，软件会看到剩余部分并可以对其进行操作。

这种剩余部分经常使用的隐藏位置是系统目录（在 UAC 到达之前），但许多注册了一些类 GUID - 我知道没有人真正了解注册表中的哪些类是真实的或不是真实的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:33:34.057

我的软件在用户系统中放置了面包屑，用于检查以前的安装。这比互联网检查您的 IP 更难解决（假设您不知道您在寻找什么或在哪里）。因为您总是可以欺骗您的连接信息，或者只是在安装时断开与互联网的连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T20:36:51.980

有很多方法可以实现这一点。

最简单的实现方式（也是最简单的绕过方式）

*   第一次运行时，在某处创建一个注册表（或文本文件）条目
*   每次运行任务（或应用程序）时，计数器加 1
*   不要在安装程序应用程序中包含此文件/注册表（因此它会在卸载后保留）
*   如果在任何时候计数过高，请通知用户试用已过期。

使用图像差异工具，这种方法很容易识别和克服。

最难克服或绕过的方法是使用服务器。在第一次运行时，根据用户计算机名称、驱动器序列号等生成哈希码，并将其发布到您的服务器。然后，服务器将此作为唯一安装进行跟踪，并允许应用程序运行。每次运行应用程序时，都会更新服务器。这样，用户就无法找到面包屑并删除它们，因为它们在您的服务器上。不利的一面是，此方法需要 Internet 连接。

可能有更复杂的方法可以实现此结果，但以上都是我遇到的两种实现。

# javascript - 使用原型 - 如何查看输入字段以进行回车？

> ID：11004334
> 
> 赞同：0
> 
> 时间：2012-06-12T20:27:35.190
> 
> 标签：javascript, prototypejs

我正在使用 JS 库 Prototype——如何查看文本输入字段，并在按下返回时向用户提醒该字段的内容？**（页面上没有<form>，只有输入框。）**

这大致是我想做的事情：

```
Enter something: <input type='text' id='myfield'>

<script>
  if([keydown event in #myfield]) {
     alert("You typed: "+[contents of #myfield]);
  }
</script> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:41:15.663

```
$('myfield').observe('keypress', function(event){
    if(event.keyCode == Event.KEY_RETURN)
        alert($('myfield').value);
});​ 
```

[你可以在这个jsfiddle](http://jsfiddle.net/UycpM/2/)中找到一个简单的演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:30:08.290

查看[http://prototypejs.org/api/event](http://prototypejs.org/api/event)

如果你举个例子，你可能会得到更好的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:32:28.060

为什么不监控`submit`呢？

对于元素`<input id="signinForm"/>`：

```
Event.observe('signinForm', 'submit', checkForm);
function checkForm() { //do something }` 
```

更多信息可在此处的文档中找到：

[http://prototypejs.org/api/event/observe](http://prototypejs.org/api/event/observe)

# c# - 运行 Mono Android 示例

> ID：11004335
> 
> 赞同：0
> 
> 时间：2012-06-12T20:27:42.627
> 
> 标签：c#, android, xamarin.android, xamarin

我从 xamarin 网站 (http://samples.xamarin.com/Android) 下载了 Mono 软件 (http://xamarin.com/monoforandroid) 和示例。当我运行示例时，从列表中选择模拟器（我选择 MonoForAndroid_API_10）后，它正在加载屏幕，但我看不到示例的输出！！！

我只是在运行简单的 Hello Droid 示例..

其他模拟器 aval 是 MonoForAndroid_API_10 MonoForAndroid_API_12 MonoForAndroid_API_14 MonoForAndroid_API_7 MonoForAndroid_API_8

我什至尝试选择不同的模拟器，但没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:49:56.503

我想出了我自己.. 只需单击“选择设备”窗口上的“确定”按钮。

# android - UrbanAirship android广播接收器

> ID：11004347
> 
> 赞同：3
> 
> 时间：2012-06-12T20:28:43.437
> 
> 标签：android, push-notification, android-c2dm, urbanairship.com

```
com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime  java.lang.RuntimeException: Unable to start service com.urbanairship.push.PushService@40cfdc08 with Intent { act=com.urbanairship.push.START cmp=com.myapp.myapp/com.urbanairship.push.PushService }: java.lang.IllegalStateException: UAirship.takeOff() must be called every time Application.onCreate() is invoked.
23:03:56.422    21926   com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime      at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2499)
23:03:56.422    21926   com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime      at android.app.ActivityThread.access$1900(ActivityThread.java:132)
23:03:56.422    21926   com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1220)
23:03:56.422    21926   com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime      at android.os.Handler.dispatchMessage(Handler.java:99)
23:03:56.422    21926   com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime      at android.os.Looper.loop(Looper.java:137)
23:03:56.422    21926   com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime      at android.app.ActivityThread.main(ActivityThread.java:4575)
23:03:56.422    21926   com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime      at java.lang.reflect.Method.invokeNative(Native Method)
23:03:56.422    21926   com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime      at java.lang.reflect.Method.invoke(Method.java:511)
23:03:56.422    21926   com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
23:03:56.422    21926   com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
23:03:56.422    21926   com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime      at dalvik.system.NativeStart.main(Native Method)
23:03:56.422    21926   com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime  Caused by: java.lang.IllegalStateException: UAirship.takeOff() must be called every time Application.onCreate() is invoked.
23:03:56.422    21926   com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime      at com.urbanairship.push.PushService.onStart(Unknown Source)
23:03:56.422    21926   com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime      at android.app.Service.onStartCommand(Service.java:438)
23:03:56.422    21926   com.myapp.myapp:com.urbanairship.process    ERROR   AndroidRuntime      at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2482) 
```

我正在尝试将 UrbanAirship 集成到我的应用程序中，如果我修改该行，则会在我调用 takeOff 后引发上述异常：

```
<service android:name="com.urbanairship.push.PushService" android:process=":com.urbanairship.process"/> 
```

.. 成为没有 android:process 部分它可以工作但是当推送消息到达时我的 PushBroadcastReceiver 没有被调用（断点没有被命中）

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          android:versionName="3.61 beta 1"
          android:versionCode="71"
          android:installLocation="auto" package="com.myapp.myapp">

    <uses-sdk android:minSdkVersion="3"
            android:targetSdkVersion="4"/>

    <uses-feature android:name="android.hardware.camera"/>
    <application 
        android:label="@string/app_name">
        <activity android:name=".client.android.SplashScreen"
              android:screenOrientation="portrait"
              android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".client.android.CaptureActivity"
              android:screenOrientation="landscape"
              android:configChanges="orientation|keyboardHidden"
              android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
              android:windowSoftInputMode="stateAlwaysHidden">
            <intent-filter>
                <action android:name="com.myapp.myapp.client.android.CaptureActivity" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity android:name=".client.android.PreferencesActivity"
              android:label="@string/preferences_name"
              android:screenOrientation="portrait">

        </activity>

        <activity android:name=".client.android.PushBroadcastReceiver">

        </activity>

        <activity android:name=".client.android.AboutActivity"
              android:label="@string/menu_about">
            <intent-filter>
                <action android:name="com.myapp.myapp.client.android.AboutActivity" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>

        </activity>

        <receiver android:name="com.urbanairship.CoreReceiver">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <action android:name="android.intent.action.ACTION_SHUTDOWN" />
            </intent-filter>
        </receiver>

        <receiver android:name="com.urbanairship.push.c2dm.C2DMPushReceiver"
              android:permission="com.google.android.c2dm.permission.SEND">

            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <category android:name="com.myapp.myapp" />
            </intent-filter>

            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="com.myapp.myapp" />
            </intent-filter>

        </receiver>

        <service android:name="com.urbanairship.push.PushService" android:process=":com.urbanairship.process"/>
        <receiver android:name="com.myapp.myapp.client.android.PushBroadcastReceiver" />

    </application>

    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.READ_CONTACTS"/>
    <uses-permission android:name="android.permission.WRITE_CONTACTS"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="com.android.browser.permission.READ_HISTORY_BOOKMARKS"/>
    <uses-permission android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.FLASHLIGHT"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <uses-permission android:name="android.permission.WRITE_SETTINGS" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <permission android:name="com.myapp.myapp.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="com.myapp.myapp.permission.C2D_MESSAGE" />

    <!-- This app has permission to register and receive message -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T00:08:20.467

你从哪里叫起飞？看起来您没有使用 AutoPilot 或提供在 onCreate 方法中调用起飞的自定义应用程序。

首先创建一个调用 takeOff 的 CustomApplication 类：

```
public class CustomApplication extends Application {

    @Override
    public void onCreate() {
        super.onCreate();

        // Optionally, customize your config at runtime:
        //
        // AirshipConfigOptions options = new AirshipConfigOptions();
        // options.inProduction = false;
        // options.developmentAppKey = "Your Development App Key";
        // options.developmentAppSecret "Your Development App Secret";
        //
        // UAirship.takeOff(this, options);

        UAirship.takeOff(this, new UAirship.OnReadyCallback() {
            @Override
            public void onAirshipReady(UAirship airship) {
                // Perform any airship configurations here
            }
        });
    }
} 
```

然后在清单中设置应用程序： `<application name="CustomApplication"`

我还会从您的清单中删除进程的使用。它们几乎不再是一个好主意。它们会使应用程序逻辑复杂化并浪费更多资源。

有关 Urban Airship 的更多信息 - [http://docs.urbanairship.com/platform/android.html](http://docs.urbanairship.com/platform/android.html)。

# matlab - 在字符串 Matlab 中的字符之前输入“\”

> ID：11004351
> 
> 赞同：2
> 
> 时间：2012-06-12T20:28:48.367
> 
> 标签：matlab, plot, legend

我试图在字符串中的每个 '_' 之前将一个 '\' 插入到字符串数组中。我尝试这样做的原因是当我在绘图图例中使用工作表名称时，保持从 xls 文件中提取的工作表名称的格式。我尝试使用：

```
 legend(sheetname{n},'Interpreter','none','Location','East') 
```

但它只是将这两个命令添加为图例中的另外两个标签。亨斯这个解决方案。我已经研究过通过工作表名称进行搜索并找到了如何替换，但如果可能的话我不想替换字符。如果有办法做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:32:35.993

试试这个：

```
legend(sheetname(n),'Interpreter','none','Location','East'); 
```

请注意使用括号而不是花括号，它将单元格传递给[LEGEND](http://www.mathworks.com/help/techdoc/ref/legend.html)而不是单元格的*内容*（即[单元格索引而不是内容索引](http://www.mathworks.com/help/techdoc/matlab_prog/br04bw6-117.html)）。这应该允许正确解释附加的参数/值对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:26:20.673

如果要对每个单元格元素应用字符串替换功能，可以按如下方式执行：

```
cellfun(@(x) strrep(x,'_','\_'),sheetname,'uniformoutput',false) 
```

这适用`strrep(x,'_','\_')`于 的所有元素，`sheetnames`并将其作为新的元胞数组输出（因为`'uniformoutput',false`）。

# android - 如何在 Android 中创建和读取数组？

> ID：11004354
> 
> 赞同：0
> 
> 时间：2012-06-12T20:28:58.170
> 
> 标签：android, arrays

我在其他语言（Python、MATLAB/Octave、C、Visual Basic、BASIC）中使用过数组，但我还没有弄清楚如何在 Android 中使用它们。

例如，我将如何修改位于[http://developer.android.com/resources/tutorials/hello-world.html](http://developer.android.com/resources/tutorials/hello-world.html)的 World 程序中的 Hello World 程序，以将“Hello，Android”替换为电视节目的名称，由索引号（tvshow[0]、tvshow[1] 等）？我们将数组命名为 tvshow，数组中的四个值分别为“Route 66”、“The Twilight Zone”、“Magnum PI”和“MASH”。

我可以使用什么方法来完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:38:54.847

好吧，你说的是字符串，所以对于字符串数组，你可以简单地使用：

```
String[] tvshow={"Route 66","The Twilight Zone","Magnum", "P.I.", "MASH"} ; 
```

要使用它，请使用：

```
String currentTvShow=tvshow[3]; 
```

要使用字符串，请阅读： [http ://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)

java（和android，因为它是基于它的）上的字符串不是可变的（由于各种原因），所以它们不能被修改。如果你想修改这样的东西，要么使用[StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)要么使用一个字符数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:48:09.427

还有[ArrayList](http://developer.android.com/reference/java/util/ArrayList.html)。因此，您所要做的就是调用 add 方法并使用 get 方法读取。

```
ArrayList <String> myArrayList = new ArrayList<String>();
//this is how you add the elements you want to.
myArrayList.add("Route 66");
myArrayList.add("The Twitlight Zone");
myArrayList.add("Magnum");
myArrayList.add("P.I.");
myArrayList.add("Mash"); 
```

并阅读您想要的元素：

```
String tvShow= myArrayList.get(2); 
```

与普通数组（即 android 开发人员提到的数组）相比，优势在于您不需要定义数组大小，并且您可以添加新元素，以防电视显示您只需调用 add 方法即可。

# fancybox - FancyBox V2 - 卡住加载错误的大小，但是当我存在并再次单击花式框时，它会加载正确的大小？

> ID：11004355
> 
> 赞同：0
> 
> 时间：2012-06-12T20:29:11.547
> 
> 标签：fancybox, size

FancyBox V2 - 当我单击第一个 fancybox 链接时，我被卡住了，该框加载的大小不正确，但是当我存在并再次单击该花式框时，它会加载正确的大小？

它以前自动调整大小正确，因为我在网站上有多个fancybox，但是当我打开这个fancybox 进行购买时，它在第一次点击时自动调整大小不正确，然后在第二次点击时正确自动调整大小

我该如何解决？？

（显然我已经用虚构的信息替换了我真实的 PayPal 信息）

代码如下：

主页：-

```
<!DOCTYPE html>
<head>
    <!-- Add jQuery library -->
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
    <!-- Add fancyBox main JS and CSS files -->
    <script type="text/javascript" src="./source/jquery.fancybox.js"></script>
    <link rel="stylesheet" type="text/css" href="./source/jquery.fancybox.css" media="screen" />

       <script>
$(document).ready(function() {
$(".fancybox1").fancybox();
}); // ready
</script>
</head>

<body>
    <a href="Fancybox.html" class="fancybox1 fancybox.ajax">Buy</a>
</body>

</html> 
```

Fancybox 页面：

```
<form name="_xclick" action="https://www.paypal.com/cgi-bin/webscr/" method="post" onsubmit="return">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="BuyAshirt@gmail.com">
<input type="hidden" name="currency_code" value="GBP">
<input type="hidden" name="item_name" value="Great Shirt">
<input type="hidden" name="amount" value="10.00">
<table>
<td>
    <input type="hidden" name="on1" value="Name On Top">Name You Want On Top</td>
    <td>
    <input id="Top_name" nametype="text" name="os1" maxlength="200"></td>

    </td>
    <td>
<tr>
</table>
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_xpressCheckout.gif" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
<input name= "agree" type="checkbox" id="CHKBOX_1" value="Accept Terms of Service"><span onClick="document._xclick.CHKBOX_1.checked=(! document._xclick.CHKBOX_1.checked);">I accept <a href="NotImportant.html" class="fancybox1 fancybox.ajax">terms</a></span> of service
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T14:09:20.783

这种方法对我有用：`topRatio: '0'`

```
$(".fancybox").fancybox({
    topRatio: '0'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:10:37.457

因为第一次打开fancybox不知道页面的尺寸，`width`所以`height`设置为`0`. 随后，对象尺寸已被缓存，因此 fancybox 可以正确呈现内容。

[*来自fancybox网站*](http://fancyapps.com/fancybox/)：

`autoSize`：如果设置为`true`（默认），对于 'inline'、'ajax' 和 'html' 类型的内容宽度/高度是自动确定的。如果没有设置尺寸，这可能会产生**意想不到的结果**

`Fancybox.html`在页面内设置尺寸可能是一个好主意，可能在标签中`<table>`或`<form>`标签中

```
<table style="width: 620px; height: 320px;"> - or -  <form style="width: 620px; height: 320px; display: block;"> 
```

最终，您可能更愿意在脚本中为此特定表单设置尺寸

```
$(".fancybox1").fancybox({
 fitToView: false,
 width: 620,
 height: 320
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T15:59:01.330

您的 ajax 响应包含一个图像，而 fancyBox 不会预加载它们。因此，如果您第二次打开，则浏览器已经缓存了该图像，并且 fancyBox 会正确计算高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-08T09:08:00.967

在我的 fancybox iframe 页面的底部，

我放置以下代码。

```
$('#wrapper').height($('#wrapper').height()); 
```

在某些情况下，我必须这样做，因为动态内容没有设置高度，因为响应式布局。

# android - 测试已安装 Android 应用程序的新版本？

> ID：11004356
> 
> 赞同：0
> 
> 时间：2012-06-12T20:29:16.587
> 
> 标签：android, package, signing

我一直在对 Google Play 中的现有应用程序进行一些更新。较新版本的应用程序对应用程序数据库进行了一些更改。我遇到的问题是我无法弄清楚如何最好地测试新更新。Eclipse 使用 debug.keystore 签署了我的“devel”包（我认为），而从 GP 安装的应用程序使用我的 release.keystore 进行了签名，因此当我尝试“重新安装失败，由于不同的应用程序签名”时收到错误消息在 Eclipse 中运行“我的更改以进行调试。

这很奇怪，因为我可以从我的公司网站下载“发布”apk 并侧载它。即使来自 GP 的 apk 和一侧加载的文件是同一个文件，这似乎也忽略了签名。

如果我进入 Eclipse 的 Windows > Preferences > Android > Build 并在“自定义调试密钥库”下输入我的 release.keystore（以绕过密钥签名的差异），那么 Eclipse 只会抱怨“密钥库被篡改，或者密码不正确”所以这条路线也出来了。

我真的很希望能够在将新的 apk 推送到 GP 之前测试“真实世界”的更新。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:55:54.640

导出使用您的发布密钥签名的 apk，并用于`adb install -r myapp.apk`在安装了旧版本的设备上对其进行更新。

# php - 500 内部服务器错误 - 没有错误日志

> ID：11004357
> 
> 赞同：0
> 
> 时间：2012-06-12T20:29:24.747
> 
> 标签：php, codeigniter, error-handling, internal-server-error

我有一个工作得很好的功能。然后我将它上传到实时服务器，它给了我一个 500 内部服务器错误。在谷歌搜索之后，人们说当某些东西（但他们不确定是什么）被服务器弄乱时，你会得到一个错误。不是很有帮助。其他人说检查你的错误日志。我不知道怎么去。

导致错误的函数================================

```
 private function get_workstation () {
  //================ I tried deleting all but this and that got rid of the error== //
    if ($this->input->post('search')) {
        $search = $this->input->post('search');
        $where = 'ad_name ="'.$search.'" AND';
        $this->data['search'] = $search;
    } else {
        $where = '';
    }
    // ================================================================= //
    // Pagination Code //
    $numOfRows = $this->db->query('
        SELECT distinct sys_name 
        FROM v_rollout_sysuser 
        WHERE scope_ID = '. $this->session->userdata('scopeId') .'
    ');

    if ($this->input->get('page')) {
        $pageNum = $this->input->get('page');
    } else {
        $pageNum = 1;
    }

    $limit = ($pageNum - 1 ) * 50;
    $numRows = $numOfRows->num_rows();
    $totalPages = ceil($numRows / 50);

    $this->data['pageNum'] = $pageNum;
    $this->data['prevPage'] = $pageNum - 1;
    $this->data['nextPage'] = $pageNum + 1;
    $this->data['totalPages'] = $totalPages;

    // End of Pagination Code //

    $query = $this->db->query('
        SELECT * 
        FROM v_rollout_sysuser
        WHERE '.$where.' scope_ID = '. $this->session->userdata('scopeId') .'
        GROUP BY sys_name 
        LIMIT '.$limit.',50');

    $i = 0;

    foreach ($query->result() as $row) {
        $i = $i + 1;
        $data['i'] = $i;
        $data['ro_ID'] = $row->ro_ID;
        $data['sys_name'] = $row->sys_name;
        $data['EAM_Model'] = $row->EAM_Model;           
        $data['EAM_User'] = $row->ad_account;
        $data['ad_DispName'] = $row->ad_DispName;
        $data['search'] = $this->input->post('search');

        $systems[] = $data;
    }

    if(isset($systems)) {
        $this->data['systems'] = $systems;
    } else {
        $this->data['systems'] = null;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:43:07.843

您是否能够加载 CodeIgniter 网站的任何页面或仅加载特定页面？

以下步骤可能会帮助您进行调试：

在您的主 .htaccess 文件中添加以下行：

```
php_flag display_startup_errors on
php_flag display_errors on
php_flag html_errors on 
```

在您的主要 index.php 部分“应用程序环境”中，设置“开发”环境：

```
define('ENVIRONMENT', 'development'); 
```

您还可以在 config/config.php 文件的“错误日志阈值”部分启用 CodeIgniter 错误日志记录

如果其中任何一个没有取得任何进展，请联系您的服务器管理员:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T20:15:30.987

事实证明，数据库存在问题。对那些花时间试图提供帮助的人感到抱歉。运行数据库的人发现了问题。谢谢你的尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:42:48.937

如果我是你，我会做以下调试：

1.  在php.ini中设置php报错为8191，display_errors为1
2.  在每个相关条件下使用 isset。
3.  手动检查数据库连接。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T20:38:40.860

它可能是 double `->`s in `$this->input->post`，尝试将其拆分为单独的部分，例如

```
$a = $this->input;
if ($a->post('search')) { 
```

以我的经验，一些配置不喜欢 doubles like `$this->input->post`，尤其是旧版本和一些 IIS 配置

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T00:23:19.143

试试这个：

```
$search = $this->input->post('search');
if ($search) {
    $where = 'ad_name ="'.$search.'" AND';
    $this->data['search'] = $search;
} else {
    $where = '';
} 
```

# javascript - 重置 jquery smartwizard

> ID：11004362
> 
> 赞同：3
> 
> 时间：2012-06-12T20:29:43.730
> 
> 标签：javascript, jquery, reset, wizard, smart-wizard

我正在使用[jquery smartwizard](http://www.techlaboratory.net/products.php?product=smartwizard) 当用户单击名为“create”的按钮时，我的向导会在对话框中打开。当用户再次单击该按钮时，我希望向导重置并启动一个新的向导，但它会保留其状态。如果我重新初始化它，那么它会再次添加下一个、上一个和完成按钮并弄乱整个向导 UI。有什么想法可以重置智能向导吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-11-01T10:25:50.487

精灵重置公共方法包含在最新的 Smart Wizard 4 中， [参见示例](http://techlaboratory.net/smartwizard/demo)。

```
$('#smartwizard').smartWizard("reset"); 
```

调用此函数会将向导重置为初始默认状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T21:16:28.247

根据您使用的对话框，我认为您需要执行以下操作：

1.  为隐藏的向导元素创建模板
2.  当您打开对话框 (onOpen) 时，克隆元素并应用 smartwizard
3.  关闭对话框后，删除已克隆的元素。

这是一个使用颜色框的演示：

[http://jsfiddle.net/lucuma/Kn2ud/4/](http://jsfiddle.net/lucuma/Kn2ud/4/)

编辑：由于从创建时起库的移动，小提琴不再工作，代码如下：

```
 $("button").colorbox({
            inline: true,
            open: true,
            width: "1000px",
            href: '.inline',
            onClosed: function() {
                $('.inline .swMain').remove();
            },
            onOpen: function() {
                $('.template').clone().removeClass('template').appendTo('.inline').smartWizard({
                    transitionEffect: 'slideleft',
                    onFinish: onFinishCallback
                });
            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-10T00:29:36.940

这似乎对我有用（在咖啡脚本中，但你明白了）。

```
numSteps = 5
wizardDiv.smartWizard('goToStep', 1)
# disable all the following steps
for i in [2..numSteps]
    wizardDiv.smartWizard('disableStep', i) 
```

清除或保留向导本身中的任何数据取决于您。

# java - \r\n 在 FileWriter 中用于下一行

> ID：11004364
> 
> 赞同：0
> 
> 时间：2012-06-12T20:30:04.037
> 
> 标签：java, file-handling

我正在写入一个文本文件，我正在使用`System.getProperty(line.separator);`转到下一行。

```
FileWriter fw = new FileWriter(file,true);
   fw.write("Correct Fields are:"+System.getProperty("line.separator")+"\r\n"); 
```

`"\n"`之前没有工作所以我在网上搜索并找到了`"\r\n"`。

是什么`"\r\n"`？它是记事本专用的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:32:29.300

[“换行符”](http://en.wikipedia.org/wiki/Newline)的概念在不同系统上的处理方式不同。

为了（过度）简化事情：Windows 使用 CRLF（`\r\n`），UNIX 和大多数其他流行的现代系统只使用 LF（`\n`）。

根据您的观点，方便或烦人的是，Java 有时会将“换行符”( `\n`) 转换为目标平台的正确形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T20:33:18.910

\r 是回车，\n 是换行。

这种格式是特定于操作系统的。对于 windows/DOS，需要 \r\n。对于 unix \n 就足够了，对于 mac 使用 \r。（直到 Mac OS 9）。从 Mac OS 10+ 开始，使用 \n。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T20:34:53.137

行分隔符是平台相关的（例如，`"\n"`在 UNIX 上，`"\r\n"`对于 Windows）。

`FileWriter`如果不是直接使用 a 而是将其包装到`BufferedWriter`具有`newLine()`方法的 a 中，或者在`PrintWriter`其中提供一种`println`方法来为您在幕后处理这些问题，那么您可以省去一些麻烦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T20:34:56.797

> 问：什么是“\r\n”？它是记事本专用的吗？

答：不，“\r\n”（“回车换行”）是 DOS/Windows 特定的。

大多数编译器只是将“\n”（“换行符”）别名为当前平台的适当序列。DOS/Windows 编译器将生成两个字符“\r\n”；Linux 编译器将为同一程序生成单个字符“\n”。

Java（为了跨平台兼容性）允许您明确说明您想要什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T20:31:49.693

"\r\n" 是两个字符： "回车" 和 "换行" 。在 Windows 中，每个新行都是“\r\n”，而在 UNIX 系统中，新行只是“\n”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-12T20:32:24.670

换行序列取决于平台。在 Windows 上是`\r\n`. 在大多数 Unix 系统上，它是`\n`. 在旧版本的 Mac`\r`上使用。`\r`是回车 (CR) 字符并且`\n`是换行 (LF) 字符。

[进一步阅读](http://en.wikipedia.org/wiki/Newline)

# facebook - Facebook 应用程序仅适用于管理员

> ID：11004370
> 
> 赞同：2
> 
> 时间：2012-06-12T20:30:29.880
> 
> 标签：facebook, facebook-graph-api

我为我的网站创建了一个 facebook 应用程序和一个 html 页面，我可以在其中登录到允许该应用程序执行此操作的用户帐户...

因此，当我尝试使用我的帐户（即页面的管理员）登录时，此功能正常工作，但使用其他其他帐户时，facebook 弹出窗口检索错误（没有有用的详细信息）.. 我的感觉是应用程序不向公众开放，我如何向公众开放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:34:06.893

您确定您没有忘记在应用程序的高级设置中将应用程序退出沙盒模式吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:42:41.023

默认情况下沙盒模式未启用，但可以尝试这种方式。如果不是这样，您可以给我们一些代码吗？

# forms - 奇怪的IE表单文件选择bug

> ID：11004372
> 
> 赞同：0
> 
> 时间：2012-06-12T20:30:39.627
> 
> 标签：forms, internet-explorer

我正在制作一个简单的图片上传器。由于选择的普通文件无法设置样式，我是否使用了一些 javascript 来克服这个问题。只有一个问题，当有人使用 IE 尝试通过按下“假”文件选择栏并按下提交来上传文件时，所选图像消失。有谁知道为什么会这样？

[自己试试](http://hemb.priv.no/fileUploadBugIE.php)

文件分数（与上面的链接相同）：

```
<form action="fileUploadBugIE.php" method="POST" enctype="multipart/form-data" character_set="UTF_8" > 

    <input type="text" readonly="readonly" id="filePath" onclick="document.getElementById('fileUL').click();" /><br /><br />
    <input type="file" name="imageFile" id="fileUL" onchange="document.getElementById('filePath').value = this.value;"/><br />

    <input type="submit" value="Submit" />

</form> 
```

# c - 在 gdb 中查看内存范围？

> ID：11004374
> 
> 赞同：33
> 
> 时间：2012-06-12T20:30:42.827
> 
> 标签：c, linux, debugging, gdb

我正在 gdb 中调试一个程序，我希望程序在访问内存区域 0x08049000 到 0x0804a000 时停止。当我尝试手动设置内存断点时，gdb 似乎一次不支持两个以上的位置。

```
(gdb) awatch *0x08049000
Hardware access (read/write) watchpoint 1: *0x08049000
(gdb) awatch *0x08049001
Hardware access (read/write) watchpoint 2: *0x08049001
(gdb) awatch *0x08049002
Hardware access (read/write) watchpoint 3: *0x08049002
(gdb) run
Starting program: /home/iblue/git/some-code/some-executable
Warning:
Could not insert hardware watchpoint 3.
Could not insert hardware breakpoints:
You may have requested too many hardware breakpoints/watchpoints. 
```

已经有一个问题被问到了，答案是，有可能用 valgrind 做到这一点。不幸的是，答案不包含任何示例或对 valgrind 手册的参考，所以它不是很启发性：[如何使用 gdb 来监视整个内存区域的任何变化？](https://stackoverflow.com/questions/6764544/how-can-gdb-be-used-to-watch-for-any-changes-in-an-entire-region-of-memory)

那么：如何查看整个内存区域？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-13T20:00:15.600

如果您将 GDB 7.4 与 Valgrind 3.7.0 一起使用，那么您将拥有无限的“模拟”硬件观察点。

在 Valgrind 下启动您的程序，提供参数， `--vgdb=full --vgdb-error=0` 然后使用 GDB 连接到它（`target remote | vgdb`）。然后你可以通过做例如`watch`或`awatch`或`rwatch`内存范围 `rwatch (char[100]) *0x5180040`

*有关更多详细信息，请参阅[有关 gdb 集成的 Valgrind 用户手册](http://www.valgrind.org/docs/manual/manual-core-adv.html#manual-core-adv.gdbserve)*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-12T20:48:13.210

检测内存地址何时更改的功能称为[硬件断点](http://en.wikipedia.org/wiki/Breakpoint#Hardware)，它实际上是 CPU 的一个功能——内存控制器内的一个寄存器，用于检测何时访问特定地址，并触发调试器中断中断。不幸[的是，x86 架构](http://www.intel.com/Assets/ja_JP/PDF/manual/253668.pdf) [只有四个这样的寄存器](http://en.wikipedia.org/wiki/X86_debug_register)，这就是为什么您可以设置的内存监视断点数量受到限制。

这就是为什么你需要使用类似 valgrind 的东西；如果要查看整个区域，则必须使用模拟内存访问模式的软件来完成。不过，我不知道 valgrind 是否真的支持查看整个内存范围。您可能需要自己修补它。修改 VALGRIND_MAKE_MEM_NOACCESS() 以抛出断点，然后允许程序继续，也许。

# php - 在 MAC 上升级到 PHP 5.4 并删除版本 5.3.10

> ID：11004376
> 
> 赞同：12
> 
> 时间：2012-06-12T20:30:43.840
> 
> 标签：php, macos, installation

我会尝试将我的 php 版本更新到 5.4 版。

当我在控制台中通过 /usr/local/bin/php -v 查看时，我看到了 5.4.3 版本，使用 php -v 它告诉我安装了 5.3.10 版本。

如何删除旧版本？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-20T19:45:56.340

更新：截至 2014 年初，您可能最好从[http://php-osx.liip.ch/](http://php-osx.liip.ch/)构建安装，因为它包含大多数扩展。如果您确实需要自己编译，请遵循原始答案。

原答案：

Mac 带有一个预装的 php，您可以轻松覆盖。

这是我为更新已安装的 php 所采取的步骤列表：

先决条件：

*   Xcode 及其命令行实用程序（安装表单首选项）将为您提供 gcc 编译器来构建 php
*   libjpeg、libpng 等，如果你想用这些来构建的话。

构建和安装 php：

*   从 www.php.net/downloads.php 下载发行版
*   解压存档并将您的控制台指向该位置
*   现在，仍然安装了原来的旧 php，`php -i | head`在控制台中运行。您想要的是使用这些标志配置您的新 php，以确保您有适当的 pcre 支持并且一切正常。
*   在您解压缩的 php 源目录中，`./configure`使用您刚刚获得的标志运行脚本
*   `make`通过运行和`sudo make install`之后构建 php 。这实际上将取代随 OS X 分发的原始 php。

并且不要忘记运行`make test`...

例如：我构建 php 的工作流程

```
wget http://url_to/php_source.tar.gz
tar -zxvf php_source.tar.gz
cd php_source/
php -i | head
./configure --prefix=/usr --with-snmp # ... same flags as previous build
make
sudo make install 
```

# email - PHP发送带有文件附件的电子邮件 - 电子邮件根本不发送

> ID：11004377
> 
> 赞同：2
> 
> 时间：2012-06-12T20:30:44.030
> 
> 标签：email, attachment, email-attachments, php

在尝试阅读各种关于在 PHP 中发送带有附件的电子邮件的文章（我习惯于使用 VBScript 的 ASP）之后，我编写了下面的代码。不幸的是，它根本不起作用。它不仅没有发送带有附件的电子邮件，而且电子邮件似乎根本没有发送，即使我的脚本说它确实发送了。我哪里出错了？我没有使用表单来上传文件。这是一个静态脚本。

```
<?php

$EmailTo = "Me@here.com";
$EmailFrom = "You@There.com";
$EmailSubject = "The Email Subject";

$MailBoundary = md5(uniqid(time()));

$Headers = "To: ". $EmailTo . "\r\n";
$Headers .= "From: ". $EmailFrom . "\r\n";
$Headers = "MIME-Version: 1.0\r\n";
$Headers .= "Content-type: multipart/mixed;boundary=\"$MailBoundary \"";
$Headers .= "\r\n\r\n";
$Headers .= "This is a multi-part message in MIME format.";
$Headers .= "\r\n\r\n";

$FileAttachment = "AttachedFile.pdf";
$File = fopen($FileAttachment, "r");
$FileData = fread($File, filesize($FileAttachment));
$FileData = chunk_split(base64_encode($FileData));
$FileName = basename($FileAttachment);

$EmailBody = "--$MailBoundary\r\n";
$EmailBody .= "Content-type: text/html; charset=iso-8859-1\r\n";
$EmailBody .= "Content-transfer-encoding: 8bit\r\n\r\n";

$EmailBody .= "<html>" . chr(13) .
              "<head>" . chr(13) .
              "<style>" . chr(13) .
              ".breg {font-family:arial;font-size:10pt;color:#000000;padding:5px;}" . chr(13) .
              "</style>" . chr(13) .
              "</head>" . chr(13) .
              "<body>" . chr(13) .
              "<div class=" . chr(34) . "breg" . chr(34) . ">" . chr(13) .
              "The message text body goes here" . chr(13) .
              "</div>" . chr(13) .
              "</body>" . chr(13) .
              "</html>";

$EmailBody .= "--$MailBoundary\r\n";

$EmailBody .= "Content-type: " . mime_content_type($File) . "; name=$FileName\r\n";
$EmailBody .= "Content-transfer-encoding:base64\r\n\r\n";
$EmailBody .= $FileData. "\r\n\r\n";

$EmailBody .= " --$MailBoundary--";

if (mail($EmailTo, $EmailSubject, $EmailBody, $Headers))
{
 echo "Email to " . $EmailTo . " has been sent" . chr(13) . "<br />" . chr(13);
}
else
{
 echo "<b>Email to " . $EmailTo . " was not sent</b>" . chr(13) . "<br />" . chr(13);
}

?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T04:49:08.177

```
For sending mail with attachment using php mail().Try this code:

<?php

 //If there is no error, send the email
 if(isset($_POST['ur_submit_button_name'])) {
  $EmailTo = "Me@here.com";
  $EmailFrom = "You@There.com";
  $EmailSubject = "The Email Subject";

  $separator = md5(time());

  // carriage return type (we use a PHP end of line constant)
  $eol = PHP_EOL;

  // attachment name
  $filename = "ip.zip";//store that zip file in ur root directory
  $attachment = chunk_split(base64_encode(file_get_contents('ip.zip')));

  // main header
  $headers  = "From: ".$from.$eol;
  $headers .= "MIME-Version: 1.0".$eol; 
  $headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"";

  // no more headers after this, we start the body! //

  $body = "--".$separator.$eol;
  $body .= "Content-Transfer-Encoding: 7bit".$eol.$eol;
  $body .= "This is a MIME encoded message.".$eol;

  // message
  $body .= "--".$separator.$eol;
  $body .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
  $body .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
  $body .= $message.$eol;

  // attachment
  $body .= "--".$separator.$eol;
  $body .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol; 
  $body .= "Content-Transfer-Encoding: base64".$eol;
  $body .= "Content-Disposition: attachment".$eol.$eol;
  $body .= $attachment.$eol;
  $body .= "--".$separator."--";

  // send message
  if (mail($to, $subject, $body, $headers)) {
  $mail_sent=true;
  echo "mail sent";
  } else {
  $mail_sent=false;
  echo "Error,Mail not sent";

 }
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:18:32.517

我认为您的电子邮件内容有误，请使用 imap_mail_compose 函数生成您的电子邮件内容：

```
mail('', 'message subject', '', imap_mail_compose(array header, array body)); 
```

# php - .NET 和 PHP 加密的区别

> ID：11004378
> 
> 赞同：7
> 
> 时间：2012-06-12T20:30:44.810
> 
> 标签：php, .net, encryption, des

我有以下生成密钥的 c# 代码：

```
 public static byte[] Encrypt(byte[] plainData, string salt)
    {
        DESCryptoServiceProvider DES = new DESCryptoServiceProvider();
        DES.Key = ASCIIEncoding.ASCII.GetBytes(salt);
        DES.IV = ASCIIEncoding.ASCII.GetBytes(salt);
        ICryptoTransform desencrypt = DES.CreateEncryptor();
        byte[] encryptedData = desencrypt.TransformFinalBlock(plainData, 0, plainData.Length);
        return encryptedData;
    }

    private string GetEncryptedKey(string key)
    {
        return BitConverter.ToString(KeyGeneratorForm.Encrypt(ASCIIEncoding.ASCII.GetBytes(key), "abcdefgh")).Replace("-", "");
    } 
```

我正在尝试在 PHP 中执行相同的操作：

```
function get_encrypted_key($key){
    $salt = "abcdefgh";
    return bin2hex(mcrypt_encrypt(MCRYPT_DES, $salt, $key, MCRYPT_MODE_CBC, $salt));
} 
```

然而，结果有一个小的差异，因为最后 16 个字符总是不同的：

```
With key "Benjamin Franklin":
C# : 0B3C6E5DF5D747FB3C50DE952FECE3999768F35B890BC391
PHP: 0B3C6E5DF5D747FB3C50DE952FECE3993A881F9AF348C64D

With key "President Franklin D Roosevelt":
C# : C119B50A5A7F8C905A86A43F5694B4D7DD1E8D0577F1CEB32A86FABCEA5711E1
PHP: C119B50A5A7F8C905A86A43F5694B4D7DD1E8D0577F1CEB37ACBE60BB1D21F3F 
```

我还尝试使用以下代码对我的键执行填充转换：

```
function get_encrypted_key($key){
    $salt = "abcdefgh";

    $extra = 8 - (strlen($key) % 8);
    if($extra > 0) {
        for($i = 0; $i < $extra; $i++) {
            $key.= "\0";
        }
    }

    return bin2hex(mcrypt_encrypt(MCRYPT_DES, $salt, $key, MCRYPT_MODE_CBC, $salt));
} 
```

但我最终得到与没有填充相同的结果。

如果您对发生的事情有任何线索，我会很高兴听到它！:)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T20:49:59.780

您提到尝试“经典”填充片段。以下对[`mcrypt_encrypt`文档](http://php.net/manual/en/function.mcrypt-encrypt.php)上发布的代码片段的快速改编给出了与您从 C# 获得的结果相同的结果。

PKCS #7（C# 使用的默认填充方案`SymmetricAlgorithm`）使用字节填充，其中每个填充字节的值与填充的字节数相同，而不是零字节。

```
function get_encrypted_key($key)
{
    $salt = 'abcdefgh';
    $block = mcrypt_get_block_size('des', 'cbc');
    $pad = $block - (strlen($key) % $block);
    $key .= str_repeat(chr($pad), $pad);

    return bin2hex(mcrypt_encrypt(MCRYPT_DES, $salt, $key, MCRYPT_MODE_CBC, $salt));
} 
```

测试输出：

```
php > echo get_encrypted_key('Benjamin Franklin');
0b3c6e5df5d747fb3c50de952fece3999768f35b890bc391
php > echo get_encrypted_key('President Franklin D Roosevelt');
c119b50a5a7f8c905a86a43f5694b4d7dd1e8d0577f1ceb32a86fabcea5711e1 
```

# php - IE 的行为与 jQuery 更改/ajax 事件不一致

> ID：11004379
> 
> 赞同：0
> 
> 时间：2012-06-12T20:30:48.867
> 
> 标签：php, javascript, jquery

我正在开发一个相当简单的演示应用程序。三个输入下拉框`slideDown()`连续显示（这会`change()`在前一个下拉列表中触发），一个使用 AJAX 请求来确定下一个的值。

这在 Chrome 和 Firefox 中完美运行，但 IE（甚至 9）在第二个下拉列表中窒息 - 执行 AJAX 请求的那个。

因为代码胜于雄辩：

```
$('#specialty').change(function() {
    if ( $(this).val() !== "(please select an option)" ) {
        $.ajax({
                type: "GET",
                url: "getValidToppings.php",
                data: { location: $(this).parent().prev().children('select').val() }
        }).done(function(data) {
            var mytoppings, toppingsSelectBox;

            console.log('return values: ' + data);

            data = $.parseJSON(data);

            toppingsSelectBox = $('#toppings');
            toppingsSelectBox.empty();

            // we use the value from the select box as a key in the dict of toppings returned
            // from the AJAX call
            mytoppings = data[$('#specialty').val()];

            toppingsSelectBox.append('<option>(please select an option)</option>')

            for (i in mytoppings) {
                toppingsSelectBox.append("<option>"+mytoppings[i]+"</option>");
            }

            toppingsSelectBox.parent().slideDown('slow', 'linear');
        });
    }
}); 
```

您可以看到，当我更改此下拉列表（其中`id="specialty"`）时，通过 AJAX（在 JSON 中）返回的值应该填充`.toppings`输入，然后显示它（使用`slideDown()`）。但是，在 IE 中......没有骰子。

真正奇怪的是，如果我启动 IE 的开发工具并开始修改 Javascript（设置断点、使用控制台等），它就会开始按预期工作。即使我只打开开发工具，只要打开该窗口，它就会开始工作。有没有搞错？

这里发生了一些奇怪的事情。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:34:34.883

IE 不知道“控制台”是什么，除非您打开了开发工具。拿出来`console.log`，你应该很好。还要确保你没有遗漏任何分号，IE 往往不喜欢这样。

# c# - RadioButton.Checked 错误：Control.Checked 不能出现在 += 或 -= 的左侧

> ID：11004382
> 
> 赞同：3
> 
> 时间：2012-06-12T20:30:59.240
> 
> 标签：c#, wpf, if-statement

我遇到了最奇怪的问题，我必须遗漏一些东西。

这是导致错误的我的代码。

```
if (radLot.Checked == true)
{
    SymbolSpecification = "LotRenderer";
}

if (radWaterMeter.Checked == true)
{
    SymbolSpecification = "WaterMeterRenderer";
} 
```

如您所见，我什至不使用 =+ 或 -=... 我的代码中实际上没有它...任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-12T20:33:25.070

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T20:37:28.613

Alternative you can check the CheckState to perform your statement.

```
 if (radLot.CheckState == CheckState.Checked)
            {

            } 
```

Edit: This will only work when writing a winform application. It will not work with WPF. Use Douglas' answer for WPF.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-29T20:54:54.277

This is indeed true - just hit this problem myself converting from `Winforms` to `WPF`.

In `WPF` using:

```
if (radiobutton1.IsChecked == true) 
```

works

BUT

```
if (radiobutton1.IsChecked) 
```

Does not.

However in `WinForms`

```
if (radiobutton1.Checked) 
```

works but does not in `WPF`.

# android - 测试错误 Maven RoboGuice [没有绑定“类”的实现]

> ID：11004384
> 
> 赞同：0
> 
> 时间：2012-06-12T20:31:05.180
> 
> 标签：android, maven, roboguice

我有一个 Android 项目，其中包含两个源文件夹 src 和 test。在测试中，我有我的测试课程和一些模拟课程。我在编写测试的某个类中使用了 Android 的 RoboGuice 依赖注入。

测试在模拟器上的 Eclipse 中运行得非常好，但使用 maven clean install 失败。

```
No implementation for com.Store<com.MessageEvent> was bound. 
```

使用喷油器时，测试在设置时失败。

```
mm = Guice.createInjector(new TestModule()).getInstance(MM.class); 
```

这是我的绑定模块：

```
 public class TestModule implements Module{
    @Override
    public void configure(com.google.inject.Binder binder) {
        binder.bind(Context.class).toInstance(getContext());
        binder.bind(Scheduler.class).to(MockScheduler.class);
        binder.bind(EventManager.class).to(MockEventManager.class);
        binder.bind(new TypeLiteral<Store<Message>>(){}).to(new TypeLiteral<JsonStore<Message>>(){});
        binder.bind(new TypeLiteral<Store<MessageEvent>>(){}).to(new TypeLiteral<JsonStore<MessageEvent>>(){});
    }

    @Provides 
    JsonStore<MessageEvent> provideMessageEventJsonStore(Context context){
        return new JsonStore<MessageEvent>(context, "message_events_test.json", MessageEvent.class);
    }

    @Provides
    JsonStore<Message> provideMessageJsonStore(Context context){
        return new JsonStore<Message>(context, "message_manager_test.json", Message.class); 
    }
} 
```

为什么在 Maven 中运行测试而不是在 Eclipse 中运行测试时会抛出异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:12:44.300

“未绑定任何实现”意味着您需要在模块文件中为此特定类添加一行。

# python - 如何在没有 setattr 的情况下清除实例数据？

> ID：11004386
> 
> 赞同：1
> 
> 时间：2012-06-12T20:31:06.117
> 
> 标签：python, json, class

我想在python中制作可遍历的（通过DB、单个文件或只是作为字符串）类。我写这个（短）：

```
from json import JSONDecoder, JSONEncoder
def json_decode(object): return JSONDecoder().decode(object)
def json_encode(object): return JSONEncoder().encode(object)

class Storage:
__separator__ = 'ANY OF ANYS'
__keys__ = []
__vals__ = []
__slots__ = ('__keys__', '__vals__', '__separator__')

def __getattr__(self, key):
    try:
        return self.__vals__[self.__keys__.index(key)]
    except IndexError:
        raise AttributeError

def __setattr__(self, key, val):
    self.__keys__.append(key)
    self.__vals__.append(val)

def store(self):
    return (json_encode(self.__keys__) + self.__separator__ +
            json_encode(self.__vals__))

def restore(self, stored):
    stored = stored.split(self.__separator__)
    for (key, val) in zip(json_decode(stored[0]), json_decode(stored[1])):
        setattr(self, key, val) 
```

是的 - 那行得通，但是......当我制作更多实例时，它们都像单身。

**那么 - 如何在没有 _ *setattr* _ 的情况下将属性设置为实例？**

PS。我有想法 - 在**set/getattr中设置****keys/vals**的通行证，但它会弄得一团糟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:57:08.857

您的`__separator__`、`__keys__`和`__vals__`是`__slots__`对象“存储”（类对象）的属性。我不知道它是否完全相同，但我称之为类的静态变量。

如果您想为每个 Storage 实例设置不同的值，请在`__init__`函数中定义以下每个变量：

```
class Storage(object):
    __slots__ = ('__keys__', '__vals__', '__separator__')
    def __init__(self):
        super(Storage, self).__setattr__('__separator__', "ANY OF ANYS")
        super(Storage, self).__setattr__('__keys__', [])
        super(Storage, self).__setattr__('__vals__', [])

    def __getattr__(self, key):
        try:
            vals = getattr(self, '__vals__')
            keys = getattr(self, '__keys__')
            return vals[keys.index(key)]
        except IndexError:
            raise AttributeError

    def __setattr__(self, key, val):
        vals = getattr(self, '__vals__')
        keys = getattr(self, '__keys__')
        vals.append(val)
        keys.append(key) 
```

编辑所以 getattr 和 setattr 作品

我2天前遇到了这个问题。不知道这是否正是你的问题，但你说过“就像我有一个单身人士”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:33:47.510

你可以让你`Storage`的类成为一个特殊基类的子类，如下所示：

```
class Singleton(object):
    def __new__(cls, *args, **kwargs):
        if '_inst_' not in vars(cls):
            cls._inst = type.__new__(cls, *args, *kwargs)
        return cls._inst

class Storage(Singleton):
    .... 
```

只要您不在`__new__()`子类中覆盖，在第一个实例之后创建新实例的所有后续调用都将返回第一个创建的实例。

# c - fscanf 在此 C 代码中失败

> ID：11004389
> 
> 赞同：0
> 
> 时间：2012-06-12T20:31:16.773
> 
> 标签：c, file-io, scanf

因此，作为一名新实习生，我需要修复其中一些人编写的许多脏代码。这是一个片段，我在弄清楚确切的问题是什么时遇到了一点问题：

```
for (i=0; i<TOOL_LIMIT; i++)
        {
                if ( 0 >= fscanf(fp,"%s %s %s %s %s %s %s\n",coreData[i][0],\
coreData[i][1],coreData[i][2],coreData[i][3],coreData[i][4],coreData[i][5], coreData[i][6]))
                {
                        break;
                }
                totalCases++;
        }
        fclose(fp); 
```

基本上，fp 会打开一些具有以下正则表达式模式的文件：

```
data11 data12 data13 data14...data17
data21 data22 data23 data24...data27
... 
```

我觉得这段代码也没有按照预期的方式工作。基本上，它假设读取文件的每一行，并填写数组 coreData，如图所示。我不认为 fscanf 像这里显示的那样工作，但我可能是错的。这段代码是否正常工作？我有一段时间没有用 c 完成文件 io 了。

编辑;; 对不起，应该简要概述一下失败。基本上，C 脚本是一个 cgi 脚本，它接受一些输入（有错误的文件）并将这些文件与 fp 打开的文件中的数据（称为“fp_file”）进行匹配，并生成一个 html 表。如果有错误的文件出现在 fp_file 中，那么它会打印一些额外的信息（如 data12 等），否则会将该表中的条目留空。示例文件 f01 被发现有一个错误，我们现在检查 fp 是否存在“f01”，如果它存在，我们会显示有关该文件的更多信息（作者等）。

我看到的是只有一个文件被正确匹配（fp 的第一行）。除此之外，其余的错误文件都有一个空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:40:00.883

此代码读取由空格分隔的六个单词组，并将它们存储在 coreData 数组中。

我认为只要输入行有六个由空格分隔的单词，它就可以工作。您可以稍微加强条件，并在 fscanf 返回一个不同于 6 的值（fscanf 返回成功读取的元素数）时立即退出循环。

# jsf - Seam 3 异常处理程序 - 重定向不起作用

> ID：11004396
> 
> 赞同：2
> 
> 时间：2012-06-12T20:31:35.533
> 
> 标签：jsf, exception-handling, seam, seam3

在这种情况下，重定向不起作用的原因是什么？

```
@HandlesExceptions
public class ExceptionHandler {
    public void handleException(@Handles CaughtException<Throwable> e,
                                Messages messages      
                                FacesContext facesContext){

        messages.error("something went wrong");
        facesContext.getApplication().getNavigationHandler()    
                .handleNavigation(facesContext, null, "foopage");
    }
} 
```

我确定异常处理程序方法已处理。如何在异常处理程序方法中重定向到某些错误页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T21:24:32.037

调用“handleNavigation”后，您应该调用： facescontext.renderResponse();

# sql - 使用过程向表中添加多行

> ID：11004397
> 
> 赞同：1
> 
> 时间：2012-06-12T20:31:43.037
> 
> 标签：sql, sql-server, stored-procedures

我正在尝试运行一个存储过程来将 3 本书连续添加到一个表中......

这是我的查询...

```
ALTER PROCEDURE dbo.AddCards @cnt int   
AS 
BEGIN    
   while(@cnt < 810010010513) 
   begin 
      insert into prepaidbooks(sbarcode, sdescription, lServiceId, iQty, dblWashValue, dblBookPrice, lLocationId, lBookTypeId)  
      values(@cnt, 'Dealer Car Wash', 43, 1, 9, 0, 1, 7)  

      set @cnt = @cnt + 1  
    END 
END 
```

它工作不正常......我得到一个框，要求我`@CNT`在值框中定义。我将其更改为 810010010511 并得到

> 无法转换

如果我离开它，我会得到：

> 过程或函数“AddCards”需要未提供的参数“@cnt”。
> 
> 没有行受到影响。
> （返回 0 行）@RETURN_VALUE = 已完成运行 [dbo].[AddCards]。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T20:37:35.537

`810010010511`**太大**了`int`- 使用`BIGINT`或使用较小的数字（上升`int`到`2147483648`）

```
ALTER PROCEDURE dbo.AddCards
      @cnt BIGINT
AS 
BEGIN    
   WHILE (@cnt < 810010010513) 
   BEGIN 
      INSERT INTO dbo.prepaidbooks(sbarcode, sdescription, lServiceId, iQty, dblWashValue, dblBookPrice, lLocationId, lBookTypeId)  
      VALUES (@cnt, 'Dealer Car Wash', 43, 1, 9, 0, 1, 7)  

      SET @cnt = @cnt + 1  
    END 
END 
```

现在您应该能够像这样执行此操作：

```
EXECUTE dbo.AddCards @cnt = 810010010511 
```

并在表格中获取您的值。

作为旁注：将这样的值“硬编码”`WHILE (@cnt < 810010010513)`到存储过程中是一个非常糟糕的主意。您将无法在任何其他情况下重新使用该存储过程....**至少**您应该将“上限”`@cnt`作为第二个参数传递给存储过程 - 如下所示：

```
ALTER PROCEDURE dbo.AddCards
      @cnt BIGINT, @max BIGINT
AS 
BEGIN    
   WHILE (@cnt < @max) 
   BEGIN 
      INSERT INTO dbo.prepaidbooks(sbarcode, sdescription, lServiceId, iQty, dblWashValue, dblBookPrice, lLocationId, lBookTypeId)  
      VALUES (@cnt, 'Dealer Car Wash', 43, 1, 9, 0, 1, 7)  

      SET @cnt = @cnt + 1  
    END 
END 
```

然后执行您的存储过程，如下所示：

```
EXECUTE dbo.AddCards @cnt = 810010010511, @max = 810010010513 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T22:13:59.923

我有一个不同的建议，而不是一个循环。如果您需要更多可以添加交叉连接，这将处理大约 2000 本书。从@marc_s 借用更新的签名（并假设这`< 810010010513`确实应该是`<=`，因为你说你想要 3 本书，而不是 2）：

```
ALTER PROCEDURE dbo.AddCards
  @cnt BIGINT
AS
BEGIN
    SET NOCOUNT ON;

    --INSERT dbo.prepaidbooks
    --(
    --   sbarcode, sdescription, lServiceId, iQty, 
    --   dblWashValue, dblBookPrice, lLocationId, lBookTypeId
    --)  
    SELECT rn, 'Dealer Car Wash' --, 43, 1, 9, 0, 1, 7
    FROM 
    (
      SELECT TOP (CONVERT(INT, 810010010513 - (@cnt)) + 1) rn = 
        810010010513 - (ROW_NUMBER() OVER (ORDER BY [object_id]) - 1)
      FROM sys.all_objects
      ORDER BY [object_id]
    ) AS y
    ORDER BY rn;
END
GO

EXEC dbo.AddCards 810010010511; 
```

结果：

```
810010010511  Dealer Car Wash
810010010512  Dealer Car Wash
810010010513  Dealer Car Wash 
```

当您对输出感到满意时，取消注释该`INSERT`部分（我将其省略以便您可以测试输出）和`SELECT`列表的其余部分（为了简洁起见，我只将它们省略了）。

另外我建议您重命名参数 - 这不是很直观。严格来说，你没有通过计数。您真正传递的是某种标记，用于指示您希望从何处开始计数。

# c++ - 来自结构类型的队列

> ID：11004400
> 
> 赞同：2
> 
> 时间：2012-06-12T20:31:50.967
> 
> 标签：c++, struct, queue

好的，这是我的结构：

```
struct sudurjanie {
    string stoka_ime;
    string proizvoditel;
    double cena;
    int kolichestvo;
}; 
```

接下来我创建队列：

```
queue<sudurjanie> q; 
```

但是当我写这个时：

```
cin >> q.push(sudurjanie.stoka_ime); 
```

在错误列表中写下：

> IntelliSense：非静态成员引用必须相对于特定对象

好的，当我尝试这个时：

```
cout << q.back(); 
```

，为什么要写这个：

> 没有运算符`"<<"`匹配这些操作数

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T20:35:41.093

听起来您可能想这样做：

```
queue<sudurjanie> q;

sudurjanie item;
cin >> item.stoka_ime;

q.push(item); 
```

这条线`cin>>q.push(sudurjanie.stoka_ime);`没有任何意义。从字面上看，它的意思是：

1.  传递`sudurjanie.stoka_ime`给`q`的`push()`方法。这将失败，因为在您提供了 type 的参数时`push()`接受了 type的参数。`sudurjanie``string`
2.  `cin`从调用结果中读取`push()`，即`void`. 这将失败，因为读入`void`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T20:37:08.700

您对的引用`sudurjanie.stoka_ime`无效，因为您正在命名*type*的成员，而不是它的实例。

尝试：

```
sudurjanie tmp;
cin >> tmp.stoka_ime;
q.push(tmp); 
```

这将创建一个`sudurjanie`名为的实例`tmp`，读取该字段，然后将该实例推送到队列中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:35:48.047

首先读取项目，然后将结构添加到队列中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T20:36:34.673

您的队列是一个`sudurjanie`结构队列。你试图推入队列的是

a）您的结构的名称而不是**实例的名称**

b) 结构的成员（字符串）。

# linux - 从 Linux Box 在 Windows Box 上执行远程 Perl 脚本

> ID：11004401
> 
> 赞同：1
> 
> 时间：2012-06-12T20:31:59.777
> 
> 标签：linux, perl, ssh, execute, shellexecute

我们最近在我们的 Windows 机器上设置了 SSH，因此我们可以消除在我们的 Linux 机器上安装磁盘的需要。我们正在使用 Pentaho，我正在编写一个 shell 脚本，它将从 Linux 机器通过 SSH 连接到 Windows 机器并执行 perl 脚本。

我已经能够以 SSH 方式写入 windows 框并切换到包含我需要执行的 Perl 脚本的目录，我只是不知道如何实际执行它们。

这就是我所拥有的：

```
#!/bin/sh
ssh -t xxxxx@xxxxx "cd /path/to/script/ /path/to/perl.exe HelloWorld.pl" 
```

我也试过：

```
#!/bin/sh
ssh -t xxxxx@xxxxx "cd /path/to/directory/with/perl/script" \
                   "/path/to/perl.exe HelloWorld.pl" 
```

两次尝试都会导致短暂的延迟，然后“与 xxxxx 断开连接”，并且 perl 无法运行。我可以通过 shell 手动完成所有这些步骤，但似乎无法让它们以脚本形式工作。请注意，我能够执行 perl 脚本的唯一方法是，如果在perl 脚本**所在**的目录中有 shell。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:44:03.163

您需要使用分号来结束您的语句，或使用一个语句执行。尝试以下操作：

```
ssh xxxxx@xxxxx "cd /path/to/script/; /path/to/perl.exe HelloWorld.pl" 
```

或者：

```
ssh xxxxx@xxxxx "/path/to/perl.exe /path/to/script/HelloWorld.pl" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:21:15.403

在 Windows 命令 shell 中，您可以`&&`像在 Unix-shell 中一样使用。如果您希望第一个命令成功，

```
ssh -t xxxxx@xxxxx "cd /path/to/script/ && /path/to/perl.exe HelloWorld.pl" 
```

将工作。

# sql-server - 日期时间和 sp_executesql

> ID：11004410
> 
> 赞同：-3
> 
> 时间：2012-06-12T20:32:16.267
> 
> 标签：sql-server, database, sql-server-2008, tsql, dynamic-sql

这是我遇到问题的 T-SQL 代码`datetime`

```
打开@form_dates

从@form_dates 获取下一个到@cid、@regdate、@compdate

/* 打印@regdate
打印@compdate
这在日期时间中正确具有值。例如：2012 年 3 月 28 日下午 6:03
打印@courseno
*/

而@@FETCH_STATUS = 0
开始
设置@SQL =
N'update tblname set cs' + CAST (@cid AS VARCHAR(10)) + '_begin = @rstring, cs' + CAST (@cid AS VARCHAR(10))+ '_end = @cstring where UserID = '+ CAST (@tempID 作为 VARCHAR(10))

声明 @ParmDefinition nvarchar(500)
SET @ParmDefinition = N'@rstring 日期时间，@cstring 日期时间'

执行 sp_ExecuteSQL @SQL，@ParmDefinition，
@rstring = @regdate，@cstring = @compdate
 `I have the values of `@regdate` and `@compdate` fetched from a cursor and are of the format 
    Jan  3 2012  2:30PM
    Mar 28 2012  6:03PM
but these values are not reflecting in procedure output where I get the output:` update tblname set cs32_begin = @rstring , cs32_end = @cstring where UserID  = 419 
```

谢谢。^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:51:09.700

这与数据类型、日期时间或游标无关。这只是~~草率~~不一致的变量命名。在外面你叫他们：

```
@regstring
@compstring 
```

在里面你叫他们：

```
@rstring
@cstring 
```

因此，请尝试以一种或另一种方式保持一致：

```
SET @SQL = N'update tblname set cs' + CAST (@cid AS VARCHAR(10)) 
+ '_begin = @rstring , cs' + CAST (@cid AS VARCHAR(10))
+ '_end = @cstring where UserID = '+ CAST (@tempID AS VARCHAR(10))

DECLARE @ParamDefinition nvarchar(500)
SET @ParamDefinition = N'@rstring datetime, @cstring datetime'

EXECUTE sp_ExecuteSQL @SQL, @ParamDefinition, 
@rstring = @regdate, @cstring = @compdate
^^-------------------^^ 
```

**编辑**

这对我来说很好：

```
DECLARE @SQL NVARCHAR(MAX);
SET @SQL = N'SELECT _begin = @rstring , _end = @cstring;';

DECLARE @ParmDefinition nvarchar(500)
SET @ParmDefinition = N'@rstring datetime, @cstring datetime'

DECLARE @regdate DATETIME = GETDATE(), @compdate DATETIME = DATEADD(DAY, 1, GETDATE());

EXECUTE sp_ExecuteSQL @SQL, @ParmDefinition, 
@rstring = @regdate, @cstring = @compdate; 
```

结果：

```
_begin                   _end
-----------------------  -----------------------
2012-06-13 10:28:47.657  2012-06-14 10:28:47.657 
```

我看不到你的输出仍然包含文字“@rstring”并且没有被参数正确替换的方法，除非你仍然有拼写或其他变量名不一致。我怀疑这个查询比您向我们展示的内容更多。

# objective-c - 触摸 UISlider 可防止 UIScrollView 的滚动

> ID：11004419
> 
> 赞同：10
> 
> 时间：2012-06-12T20:33:04.443
> 
> 标签：objective-c, cocoa-touch, uiscrollview, uislider

我在 UIScrollview 中有一个（垂直）UISlider。我希望能够更改滑块的值，并且无需抬起手指即可向左或向右滚动滚动视图。

**期望的行为：**

在垂直 UISlider 内向下触摸，然后手指向左或向右拖动会导致滚动视图滚动

**实际行为：**

在垂直 UISlider 内向下触摸，然后手指向左或向右拖动会导致 UIScrollview 中没有移动。在UISlider*外部*按下并拖动将按预期滚动滚动视图

UIView 有一个名为 exclusiveTouch 的属性，似乎它可能与我的问题有关。我尝试将其设置为 NO，但没有运气。

那么，如何设置我的 UISlider 以便它们下方的滚动视图将响应源自 UISlider 内部的触摸？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T04:27:07.900

您是否尝试过子类化`UIScrollView`和实施`- (BOOL)touchesShouldCancelInContentView:(UIView *)view`？根据苹果文档：

```
// called before scrolling begins if touches have already been delivered to a subview of the scroll view. if it returns NO the touches will continue to be delivered to the subview and scrolling will not occur
// not called if canCancelContentTouches is NO. default returns YES if view isn't a UIControl 
```

如果你只是返回`NO`if the `view`is your `UISlider`，这*可能会*做你想要的，假设你`UIScrollView`只水平滚动。如果这不起作用，您可能必须`touchesBegan:withEvent:`为`touchesChanged:withEvent:`您的`UIScrollView`和您的`UISlider`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T21:29:14.723

您所看到的是预期的行为。

每个触摸事件仅由一个控件处理。这样做`exclusiveTouch`实际上是为了防止*其他*触摸事件被传递到其他视图。

要做你想做的事情，你必须自己做一些触摸处理。将事件传递给您的两个视图。`touchesBegan:`您可以通过实现所有等方法来做到这一点，`touchesMoved:`并将事件传递给两个视图。[您可以在UIResponder 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html)中阅读有关该方法的更多信息。另一种方法是在滚动视图上的 UIGestureRecognizer 中进行事件处理，以测试滑块并使用 y-delta 更新滑块的值。[您可以在 iOS 的事件处理指南中有关手势识别器的部分](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html#//apple_ref/doc/uid/TP40009541-CH6-SW1)中阅读有关手势识别器和事件处理的更多信息。

* * *

*旁注*：

转到“设置”应用程序并将开关切换到一半（例如飞行模式切换），然后向下拖动。什么都不会发生。操作系统的其余部分的行为方式相同。你确定这是你真正想做的交互吗？表现不同的应用程序通常会让人感到奇怪和陌生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T01:38:57.540

你的问题让我有点困惑。您说的是垂直滑块-但左右拖动？

如果您希望在拖动 UISlider 时滚动滚动视图，正确的方法是

```
[mySlider addTarget:self action:@selector(sliderMoved:) forControlEvents:UIControlEventValueChanged]; 
```

和

```
- (void) sliderMoved:(UISlider*) slider {
    myScrollView.contentOffset.x = slider.value * (myScrollView.contentSize.width - myScrollView.bounds.size.width);
} 
```

希望这是你想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-08T14:13:53.557

您需要将 delaysContentTouches 设置为 NO 并防止 UISlider 对象滚动，检查下面的代码。

```
mySlider.delaysContentTouches = NO;

- (BOOL)touchesShouldBegin:(NSSet *)touches withEvent:(UIEvent *)event inContentView:(UIView *)view {
    if ([view isKindOfClass:[UISlider class]])
    {
        UITouch *touchEvent = [[event allTouches] anyObject];
        CGPoint locationEvent = [touchEvent locationInView:view];
        CGRect thumbRect;
        UISlider *mySlide = (UISlider*) view;
        CGRect trackRect = [mySlide trackRectForBounds:mySlide.bounds];
        thumbRect = [mySlide thumbRectForBounds:mySlide.bounds trackRect:trackRect value:mySlide.value];
        if (CGRectContainsPoint(thumbRect, locationEvent))
            return YES;
    }
    return NO;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T07:32:47.187

我想你可以从[这个](https://github.com/AalokParikh/pinch-and-uiguesture)例子中得到一些参考，在这个例子中它展示了如何取消任何触摸或任何手势识别器并将它们应用于其他视图。

愿这能引导你解决你的问题，如果它会让我知道

快乐编码:)

# arrays - 自定义数组排序（ YUYV -> YUV422P）

> ID：11004420
> 
> 赞同：0
> 
> 时间：2012-06-12T20:33:07.110
> 
> 标签：arrays, algorithm, optimization, image-processing, sorting

我正在尝试从 YUYV 格式排序和排列为 YUV422p 格式。该数组当前看起来像：

[y1][cb1][y2][cr1][y3][cb2][y4][cr2][y5][cb3][y6][cr3][y7][cb4][y8][cr4] .. .[yn][cbn+1/2][yn+1][crn+1/2]

我需要将其排序为：

[y1][y2][y3][y4][y5][y6][y7][y8][yn][yn+1]..[cb1][cb2][cb3][cb4][cbn+1 /2]..[cr1][cr2][cr3][cr4][crn+1/2]

所有 y 需要在一起，所有 cb 在一起，所有 cr 在一起。

我正在努力使这部分尽可能高效并花费最少的时间。

这是我到目前为止所做的：

```
 inline const void YUYV_to_YUV422P_1280x960( char* yuyv, char* yuv422p)
    {
         const unsigned int height = 960;
         const unsigned int width  = 1280;
         int loopCount1 = height*width/2;
         int loopCount2 = height*width;
         char* yComponent   = yuv422p;
         char* cbComponent  = yuv422p + loopCount2;
         char* crComponent  = yuv422p + loopCount1 + loopCount2; 

         int i;
         for( i = (loopCount1 - 1); i != 0; --i )
         {
           cbComponent[ i ] = yuyv[ i*4 + 1 ];
           crComponent[ i ] = yuyv[ i*4 + 3 ];
         }

         for( i = (loopCount2 -1); i != 0; --i )
         {
           yComponent[ i ] = yuyv[ i*2 ];
         }
    } 
```

有关如何使这更有效和更快的任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:44:16.797

建议一如既往地测量它，然后决定它是否足够快。如果您在 3GHz PC 上执行此操作，是否会节省几微秒？

通常在此类任务中，您的内存 I/O 有限，因此为获得最佳缓存性能而编写它很重要。根据图像的大小和硬件，最好一次处理一行图像，这样您就可以在缓存中输入和输出图像行

如果你有一个现代 CPU，你可以使用 SSE2 加速它，并同时在多个像素上执行大量此类操作。

# php - 如何使用 CURL 在 Parse 中上传文件？

> ID：11004425
> 
> 赞同：0
> 
> 时间：2012-06-12T20:33:21.573
> 
> 标签：php, parsing, curl

我有以下内容：

curl -X POST \ -H "X-Parse-Application-Id: appid" -H "X-Parse-REST-API-Key: restkey" -H "Content-Type: text/plain" -d 'Hello, World ！ [https://api.parse.com/1/files/hello.txt](https://api.parse.com/1/files/hello.txt)

我回来了：

{"url":"http://files.parse.com/7680c0e7-b398-4b43-91f0-61b12934c690/08d828ef-1185-4036-b8ab-228764fbeb69-hello.txt","name":"08d828ef-1185- 4036-b8ab-228764fbeb69-hello.txt"}

我应该使用什么文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:36:18.860

返回的 URL - 您在[http://files.parse.com/之后获取所有内容](http://files.parse.com/)

这涉及以下内容：

curl -X POST \ -H "X-Parse-Application-Id: appid" \ -H "X-Parse-REST-API-Key: reskey" \ -H "Content-Type: application/json" \ -d ' {“名称”：“blisdco”，“图片”：{“名称”：“7680c0e7-b398-4b43-91f0-61b12934c690/08d828ef-1185-4036-b8ab-228764fbeb69-hello.txt”，“__type”：“文件" } }' \ [https://api.parse.com/1/classes/CustomerImages](https://api.parse.com/1/classes/CustomerImages)

返回的是：

{"createdAt":"2012-06-12T20:16:05.360Z","objectId":"yHLhqMgBAj"}

如果您在 Parse Data Browser 中查看 CustomerImages 表，您将看到条目 - 包括 URL 的文件名部分。

# data-visualization - 我们可以使用 Google Fusion 表格作为使用 d3.js 进行可视化的数据源吗？

> ID：11004426
> 
> 赞同：1
> 
> 时间：2012-06-12T20:33:22.437
> 
> 标签：data-visualization, d3.js, google-fusion-tables

我没有 Web 服务器，需要使用数据驱动文档 (d3.js) 进行可视化

对于我存储在 Fusion 表中的数据集。是否可以使用 d3.js 的内在函数或任何其他方法来可视化这些数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T20:38:40.217

是的，您可以将 Fusion 表导出为 CSV。[`d3.csv`D3可以通过函数](https://github.com/mbostock/d3/wiki/CSV)直接读取CSV数据。

# java - 运行 selenium IDE 导出的测试用例

> ID：11004431
> 
> 赞同：0
> 
> 时间：2012-06-12T20:33:37.310
> 
> 标签：java, automated-tests, selenium-webdriver

我是测试世界的新手。我正在使用 selenium IDE 来记录测试。另外，我将测试用例导出为 JUnit4 测试用例。我的出口看起来像：

```
package com.example.tests;

import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;

public class Test {
    private WebDriver driver;
    private String baseUrl;
    private StringBuffer verificationErrors = new StringBuffer();
    @Before
    public void setUp() throws Exception {
        driver = new FirefoxDriver();
        baseUrl = "http://192.168.8.207/";
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
    }

    @Test
    public void test() throws Exception {
        driver.get(baseUrl + "/");
        driver.findElement(By.name("user")).clear();
        driver.findElement(By.name("user")).sendKeys("admin");
        driver.findElement(By.name("password")).clear();
        driver.findElement(By.name("password")).sendKeys("infineta123");
        driver.findElement(By.id("btnLogin-button")).click();
    }

    @After
    public void tearDown() throws Exception {
        driver.quit();
        String verificationErrorString = verificationErrors.toString();
        if (!"".equals(verificationErrorString)) {
            fail(verificationErrorString);
        }
    }

    private boolean isElementPresent(By by) {
        try {
            driver.findElement(by);
            return true;
        } catch (NoSuchElementException e) {
            return false;
        }
    }
} 
```

如何执行这个测试用例？在那之后，我怎样才能自动执行几个这样的测试用例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:57:29.773

将此代码用作测试的运行器。

```
import org.junit.runner.JUnitCore;
import com.example.tests;

public static void main(String[] args) {
    Result result = JUnitCore.runClasses(Test.class);
    for (Failure failure : result.getFailures()) {
        System.out.println(failure.toString());
    }
} 
```

Test.class 是包含测试代码的文件名（Test）。如果您有多个测试用例，您可以添加类列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:41:57.403

看看这个页面：[http ://code.google.com/p/selenium/wiki/UsingWebDriver](http://code.google.com/p/selenium/wiki/UsingWebDriver)

您可能必须下载 selenium 并将其**导入**项目。

如果这样做了，您可以转到“测试”-这取决于您使用的开发工具-在 NetBeans 中，我通过运行-测试文件（我认为是 Ctrl + F6）

# spring - 可序列化错误 Spring+Weblogic Cluster

> ID：11004433
> 
> 赞同：2
> 
> 时间：2012-06-12T20:33:38.810
> 
> 标签：spring, cluster-computing, weblogic11g

我在集群、Spring 3 和 JSF Mojarra 中有一个带有 Weblogic 11g 的应用程序。有：JavaBean（Serializable）、ManagedBeans（Serializable for view/session）、Service、DAO。

我得到了错误：

```
**All session objects should be serializable to replicate. 
Check the objects in your  session. Failed to replicate non-serializable object. 
java.rmi.MarshalException: failed to marshal update(Lweblogic.cluster.replication.ROID;ILjava.io.Serializable;Ljava.lang.Object;); nested exception is:
    java.io.NotSerializableException: com.emp.service.impl.DemandaServiceImpl$$EnhancerByCGLIB$$4fae7872 
```

是否有必要成为可序列化的Service层？我不想进行会话并复制它。

春天正在运行：

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

我的 applicationContext.xml 中的每个 Spring Bean 都会自动位于 HttpServletRequest、ServletContext 或 HttpSession 中？

如果是，避免服务层序列化的解决方案是什么？

# entity-framework - Oracle 实体框架

> ID：11004436
> 
> 赞同：0
> 
> 时间：2012-06-12T20:33:47.233
> 
> 标签：entity-framework, odac

我已经安装了 ODAC 11，我想将它与 EF Database First 一起使用，但它没有出现在“选择数据源”对话框中，只是 SQL Server 提供程序。我不知道怎么走得更远。我需要一点帮助，拜托。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:37:43.977

我不确定你安装了什么，但这[支持](http://www.oracle.com/technetwork/database/windows/downloads/index-101290.html)实体框架。我以前用过没有问题。

# javascript - 为什么我的音频不倒带？

> ID：11004437
> 
> 赞同：7
> 
> 时间：2012-06-12T20:33:47.737
> 
> 标签：javascript, html, audio, html5-audio

我在 Javascript 中倒带音频时遇到了一些麻烦。我基本上有一个倒计时，当它接近倒计时结束时，它会每秒发出哔哔声。

我尝试使用；

```
var bip = new Audio("http://www.soundjay.com/button/beep-7.wav");
bip.play(); 
```

但它并不是每秒都发出哔哔声，我猜这与它必须每秒加载一个新声音有关。然后我尝试从外部加载声音并使用以下代码触发它。

```
bip.pause();
bip.currentTime = 0;
console.log(bip.currentTime);
bip.play(); 
```

但这只会播放一次声音，然后完全无法倒带（这可以通过控制台在第一次播放后记录 0.19 秒的时间来显示）。

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T20:49:16.517

在谷歌浏览器中，我注意到它只有在您拥有同一域中的音频文件时才有效。如果音频文件在同一个域中，我没有问题。事件设置`.currentTime`工作。

跨域：

```
var bip = new Audio("http://www.soundjay.com/button/beep-7.wav");
bip.play();
bip.currentTime; //0.10950099676847458
bip.currentTime = 0;
bip.currentTime; //0.10950099676847458 
```

同域：

```
var bip = new Audio("beep-7.wav");
bip.play();
bip.currentTime; //0.10950099676847458
bip.currentTime = 0;
bip.currentTime; //0 
```

我尝试了一段时间的谷歌搜索，但在规范中找不到任何关于这个甚至任何讨论的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-09T20:56:43.933

当我想倒带时，我只需再次加载音频：

```
my_audio.load() 
```

* * *

*顺便说一句，我还为“canplay”使用了一个事件监听器来触发 my_audio.play()。似乎这在 android 中是必要的，也许其他设备也是*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T21:08:25.763

为了进一步 dsdsdsdsd 对“整个 shebang”的一些数字的回答

*注意：在我的应用程序中，`loc1`是指歌曲存储位置的虚拟对象*

```
// ... code before ...

tune = new Audio(loc1); // First, create audio event using js

// set up "song's over' event listener & action
tune.addEventListener('ended', function(){
tune.load();    //reload audio event (and reset currentTime!)
tune.play();    //play audio event for subsequent 'ended' events
},false);

tune.play();        // plays it the first time thru

// ... code after ... 
```

我花了几天时间试图找出我做错了什么，但现在一切正常......至少在桌面浏览器上......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-29T15:20:58.390

截至 Chrome 版本`37.0.2062.120 m`，@ [Esailija](https://stackoverflow.com/a/11004658/278405)描述的行为没有改变。

我通过以 base64 编码对音频数据进行编码并将数据提供给`Audio()`使用`data:`URL 来解决此问题。

测试代码：

```
snd = new Audio('data:audio/ogg;base64,[...base64 encoded data...]');
snd.onloadeddata = function() {
  snd.currentTime = 0;
  snd.play();
  setTimeout(function() {
    snd.currentTime = 0;
    snd.play();
  }, 200);
}; 
```

（我很惊讶没有关于这个问题的错误报告或参考......或者我的 Google-fu 不够强大。）

# android - 创建maven包

> ID：11004438
> 
> 赞同：2
> 
> 时间：2012-06-12T20:34:02.250
> 
> 标签：android, eclipse, maven

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:28:45.063

**问题1：你如何创建一个maven项目然后更新项目** 我不明白你的意思。你能更明确一点吗？

**问题 2：如果我在 msdos 的控制台或 eclipse 上进行更改会更好吗**

为了进一步使用，更喜欢命令行中的 maven（这更接近系统并且没有任何覆盖 API）。此外，它会学到更多的东西。

我在使用 eclipse 集成工具时遇到了问题，这些工具在命令行中不存在。

**问题 3：有人可以帮我做这件事吗？（我的头脑完全被炸毁了！）** 您是否尝试填充 JAVA_HOME 系统变量？例如：C:\Program Files\Java\jdk1.6.0_31\

*   您使用的是哪个版本或 Maven？
*   您使用的是哪个版本的 Java？
*   您使用哪个版本的 Java 运行 Eclipse（编辑 eclipse/eclipse.ini（如果没有，它将使用系统变量中定义的默认 JVM）？

Maven 3 至少需要 JRE 1.5（更常用的是 1.6）。

更多信息在这里：[http ://cwiki.apache.org/MAVEN/maven-3x-compatibility-notes.html](http://cwiki.apache.org/MAVEN/maven-3x-compatibility-notes.html)

* * *

来自 Maven 文档：

> Maven 是一个 Java 工具，因此您必须安装 Java 才能继续。更准确地说，您需要一个 Java 开发工具包 (JDK)，而 Java 运行时环境 (JRE) 是不够的。
> 
> 平台特定说明之后列出了其他可选安装步骤。
> 
> 视窗 2000/XP
> 
> *   将分发包解压缩，即 apache-maven-3.0.4-bin.zip 到您希望安装 Maven 3.0.4 的目录。这些说明假设您选择了 C:\Program Files\Apache Software Foundation。将从存档中创建子目录 apache-maven-3.0.4。
>     
>     
> *   通过打开系统属性（WinKey + Pause）添加 M2_HOME 环境变量，选择“高级”选项卡和“环境变量”按钮，然后在用户变量中添加 M2_HOME 变量，值为 C:\Program Files\ Apache 软件基金会\apache-maven-3.0.4。确保省略路径周围的任何引号，即使它包含空格。注意：对于 Maven < 2.0.9，还要确保 M2_HOME 没有“\”作为最后一个字符。
>     
>     
> *   在同一个对话框中，在用户变量中添加 M2 环境变量，其值为 %M2_HOME%\bin。
>     
>     
> *   可选：在同一对话框中，在用户变量中添加 MAVEN_OPTS 环境变量以指定 JVM 属性，例如值 -Xms256m -Xmx512m。此环境变量可用于为 Maven 提供额外的选项。
>     
>     
> *   在同一个对话框中，在用户变量中更新/创建 Path 环境变量，并在前面添加值 %M2% 以添加命令行中可用的 Maven。
>     
>     
> *   **在同一个对话框中，确保 JAVA_HOME 存在于您的用户变量或系统变量中，并将其设置为 JDK 的位置，例如 C:\Program Files\Java\jdk1.5.0_02 和 %JAVA_HOME%\bin在您的 Path 环境变量中。**
>     
>     
> 
> 打开一个新的命令提示符（Winkey + R 然后键入 cmd）并运行 mvn --version 以验证它是否已正确安装。

# ruby-on-rails - 设计 + Omniauth = 未定义的方法 `new_session_path'

> ID：11004442
> 
> 赞同：2
> 
> 时间：2012-06-12T20:34:15.767
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, omniauth

我正在尝试实现一个仅支持通过 Google 帐户登录以访问分析数据的登录系统。

我无法让它与异常一起工作

```
undefined method `new_session_path' for #<Users::OmniauthCallbacksController:0x8f588b0> 
```

我正在使用`omniauth`该`omniauth-google-oauth2`策略。

这是宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'
gem 'haml'
gem 'haml-rails'
gem 'omniauth'
gem 'omniauth-google-oauth2'
gem 'devise'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug'

group :test do
  gem 'capybara'
  gem 'database_cleaner'
  gem 'rspec-rails'
  gem 'cucumber-rails'
  gem 'factory_girl_rails'
end 
```

这是`config/routes.rb`

```
TestApp::Application.routes.draw do
  devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" }

  devise_scope :user do
    get 'sign_in', :to => 'users/sessions#new', :as => :new_user_session
    get 'sign_out', :to => 'users/sessions#destroy', :as => :destroy_user_session
  end

  root :to => "Landing#index"
end 
```

`app/model/user.rb`：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  # :database_authenticatable, :registerable
  # :recoverable, :rememberable, :trackable, :validatable

  devise :omniauthable

  # Setup accessible (or protected) attributes for your model
  # attr_accessible :email, :password, :password_confirmation, :remember_me
  # attr_accessible :title, :body
end 
```

`config/intitializers/omniauth.rb`

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :google_oauth2, 'ID', 'SECRET', :scope => 'https://www.googleapis.com/auth/analytics.readonly'
end 
```

`app/controllers/users/omniauth_callback_controller.rb`

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def google_oauth2
    # You need to implement the method below in your model
    @user = User.find_for_google_oauth2(request.env["omniauth.auth"], current_user)

    if @user.persisted?
      flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Google"
      sign_in_and_redirect @user, :event => :authentication
    else
      session["devise.google_data"] = request.env["omniauth.auth"]
      redirect_to new_user_registration_url
    end
  end
end 
```

你能帮我理解这里有什么问题吗？

PS这是我运行的结果`rake routes`

```
user_omniauth_callback    /users/auth/:action/callback(.:format)  users/omniauth_callbacks#(?-mix:(?!))
new_user_session GET     /sign_in(.:format)                      users/sessions#new
destroy_user_session GET /sign_out(.:format)                     users/sessions#destroy
root                     /                                       Landing#index 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:50:05.373

您正在运行什么版本的设计？[这个已关闭的问题](https://github.com/plataformatec/devise/issues/1390)似乎处理了同样的问题，并假设它将在版本 1.4.9 中修复并提供快速而肮脏的修复。

但是，如果它没有帮助，请尝试将新会话的命名路由更改为：

```
get 'sign_in', :to => 'users/sessions#new', :as => :new_session 
```

另外，我问了关于使用 Omniauth 进行设计的问题，您可能会觉得这很有用：[设计 Omniauthable 使用 `Could not find a valid mapping for path` 破坏 Omniauth 身份验证](https://stackoverflow.com/questions/8577089/devise-omniauthable-breaks-omniauth-authentication-with-could-not-find-a-valid)

# java - 将 Scala 运算符添加到最终的 Java 类

> ID：11004444
> 
> 赞同：3
> 
> 时间：2012-06-12T20:34:22.603
> 
> 标签：java, scala, overloading, operator-keyword, final

我在 Scala 中使用 jMonkeyEngine（Java 游戏引擎），到目前为止效果很好，但现在我问自己是否有一种优雅的方法可以为`Vector3f`（和类似的）类重载运算符。我的第一个想法是继承并重`Vector3f`载运算符，但`Vector3f`它是最终的，所以这不是一个选项。接下来我想也许我可以有一个带有静态方法的单例/scala对象`Vector3f`，如下所示，但这也不起作用：

```
object VectorMath {
    def *(factor: Float, vector: Vector3f) = vector.mult(factor)
}

//and then somewhere
import VectorMath._
var v = new Vector3f(1,2,3);
var u = 1.2f * v; //this does not work, because Float does not have * overloaded for Vector3f
var u = VectorMath.*(1.2f, v); //this does work, but defeats the purpose 
```

所以我现在能想到的就是将 Vector3f 包装在一个新的 Scala 类中，并将操作符调用委托给适当的 Java 方法。然而，这有三个缺点：

1.  我将不得不做很多来回转换（一个`toVector3f`和一个`fromVector3f`方法或类似的东西）。
2.  当我有 Vector3f/ScalaVectors 数组时，这个问题会变得更糟。由于类不相关（组合除外），因此每次在 jME 中调用方法时，我都必须手动转换数组的每个元素。
3.  即便如此，我也不知道如何为我的新 ScalaVector 类重载运算符，以使我可以将因子放在前面，即`1.2f * v`.

我的问题：有人能想办法让这更自然/优雅吗？你如何解决类似的问题？或者是否有我不知道的 Scala 语法来做这些事情？在 C++ 中，我会创建一个全局运算符，它将 float 和 Vector3f 作为参数并可能与它为朋友。Scala 的方法是什么，或者这根本不可能？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T20:44:30.027

> 或者是否有我不知道的 Scala 语法来做这些事情？

是的，有隐含的：

```
class VectorMath(f: Float) { def * (v: Vector3f) = v mult f }
implicit def VectorMath(f: Float) = new VectorMath(f)

val v = new Vector3f(1,2,3)
1.2F * v
// treated as: VectorMath(1.2F).*(v) 
```

从 Scala 2.10 开始，隐式转换也可以写成：

```
implicit class VectorMath(f: Float) { def * (v: Vector3f) = v mult f } 
```

从 2.10 开始，还有一些值类被编译器优化以获得更好的性能：

```
implicit class VectorMath(val f: Float) extends AnyVal { def * (v: Vector3f) = v mult f } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T21:01:17.427

除了上面提到的隐式类之外，从 Scala 2.10 开始，您将能够使用[值类](http://docs.scala-lang.org/sips/pending/value-classes.html)来避免创建中间对象。

本质上，您只需要进行`VectorMath`上述扩展即可`AnyVal`。如果您不使用`VectorMath`对象作为方法的返回值，而只是调用`VectorMath`操作，则不会`VectorMath`在运行时分配对象 for。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T20:45:05.203

**注意**：这可能会导致代码非常不可读。

您可以使用隐式转换并创建某种包装类`Vector3f`（例如 Scala 标准库本身具有多个 Java 类，例如[此处](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/scala/collection/JavaConversions)的 Java 集合。

```
// Somewhere, for example in a package object
implicit def wrapVector3f (v: Vector3f) = new Vector3fWrapper ( v );

class Vector3fWrapper (v: Vector3f) {
    // Use the Vector3f object internally here
    // You can now delegate all methods to the underlying Vector3f object
    // For example:
    def * (v: Vector3f) = {
        // ...
    }

    // or:
    def * (f: Float) = {
        // ...
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-13T03:27:26.607

大家已经指出可以隐式地将操作添加到左侧的 Float 中，只是想指出您可以通过在其末尾添加一个冒号来创建一个右关联运算符。

```
class Vector3f(…) {
  …
  def *:(f: Float) = …
}

var v = new Vector3f(1,2,3);
var u = 1.2f *: v; //this works without any implicit magic or boxing overhead 
```

它需要一个小的句法惩罚，但它是另一种选择。

# excel - 在 Excel 中编写函数时如何显示提示？

> ID：11004445
> 
> 赞同：0
> 
> 时间：2012-06-12T20:34:28.443
> 
> 标签：excel, vba

每个内置的 Excel 函数在键入时都有提示

例如，像

```
=SUM([Number1,Number2,.... 
```

我想知道在编写自定义函数时是否可以实现这样的东西？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:55:34.210

AFAIK 你不能那样做。但是，您可以做的是向您的 UDF 添加描述。

话虽如此，您可以使用`Application.MacroOptions`添加描述。例如

```
Sub Sample()
    Application.MacroOptions Macro:="MyFunction", _
                         Description:="This function does Blah Blah", _
                         Category:="My Custom Category"
End Sub 
```

**快照**

![在此处输入图像描述](../Images/ab6f8b2f438192d85295bf2e5cab8850.png)

如果需要，您还可以向其中添加帮助文件，如此[链接](https://stackoverflow.com/questions/10987037/add-help-to-no-help-available-excel-vba-user-defined-functions)所示。

# jquery - 如何让 jQuery 移动列表视图与复选框和图标一起使用

> ID：11004447
> 
> 赞同：1
> 
> 时间：2012-06-12T20:34:36.007
> 
> 标签：jquery, css, mobile, jquery-mobile

我尝试获得类似于我的 jQuery 移动列表视图中附加的图像的布局。我目前在星形图像上使用 .ui-li-icon 类，但即使我用自己的 css 属性覆盖了定位，我也没有将其对齐到右侧。

我当然可以按位置强制星星在右边：绝对；但这会在不同平台上以及横向与纵向模式之间造成问题。

在 jQuery mobile 中获得如下布局的最佳方法是什么？

图片：[http ://a4.mzstatic.com/us/r1000/095/Purple/ff/1d/33/mzl.ecpvufek.320x480-75.jpg](http://a4.mzstatic.com/us/r1000/095/Purple/ff/1d/33/mzl.ecpvufek.320x480-75.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T23:44:07.800

我重新考虑了我的旧答案并重新做了这个问题，特别是为了适应 mvc 4 框架，但客户端都是一样的。
所以让我们开始吧：
如果你只想要 html，你可以在这里得到它
这个链接是一个 3 部分的复选框列表、复选框、项目的链接和信息弹出窗口：

[这是带有复选框和图标的工作列表视图的 jsfiddle 的链接](http://jsfiddle.net/yakirmanor/PBQ3P/)

iv 在最后添加了一些 2 部分列表框和一个部分，如有任何问题，请告诉我。

现在对于控制器，您需要做的就是

```
[Authorize]
public ActionResult Items(string act, 
    string tab, string search_by, string search, string sort, string sortdir, int? page, int? resultsPerPage,
    List<int> selected, int? projectId, string username)
{
    if (act == "AddItemsToUser")
    {
        string response;
        if (selected != null)
        {
            response = "Project Items Added:";
            foreach (var item in selected)
            {
                try
                {
                    if (username != null)
                        if (UserItemRecordModel.InsertUserItem(username, item, null, null, 0, null, null))
                            response += item + " - inserted, ";
                }
                catch (Exception ex)
                {
                    response += item + " - " + ex.Message + ", ";
                }
            }
            response.TrimEnd(' ', ',');
        }
        else
        {
            response = "No Items Were Selected!";
        }
        return Json(response, JsonRequestBehavior.AllowGet);
    }
    else if (act == "AddItemsToProject")
    {
        string response;
        if (selected != null)
        {
            response = "Project Items Added:";
            foreach (var item in selected)
            {
                try
                {
                    if (projectId != null)
                        if (ProjectItemRecordModel.InsertProjectItem(projectId.ToString(), item, null, null, 0, null, null))
                            response += item + " - inserted, ";
                }
                catch (Exception ex)
                {
                    response += item + " - " + ex.Message + ", ";
                }
            }
            response.TrimEnd(' ', ',');
        }
        else
        {
            response = "No Items Were Selected!";
        }
        return Json(response, JsonRequestBehavior.AllowGet);
    }
    else if (act == "RemoveItemsFromUser")
    {
        string response;
        if (selected != null)
        {
            response = "Project Items Removed:";
            foreach (var item in selected)
            {
                try
                {
                    if (UserItemRecordModel.DeleteUserItem(username, item))
                        response += item + " - deleted, ";
                }
                catch (Exception ex)
                {
                    response += item + " - " + ex.Message + ", ";
                }
            }
            response.TrimEnd(' ', ',');
        }
        else
        {
            response = "No Items Were Selected!";
        }
        return Json(response, JsonRequestBehavior.AllowGet);
    }
    else if (act == "RemoveItemsFromProject")
    {
        string response;
        if (selected != null)
        {
            response = "Project Items Removed:";
            foreach (var item in selected)
            {
                if (ProjectItemRecordModel.DeleteProjectItem(projectId.ToString(), item))
                    response += item + " - deleted, ";
            }
            response.TrimEnd(' ', ',');
        }
        else
        {
            response = "No Items Were Selected!";
        }
        return Json(response, JsonRequestBehavior.AllowGet);
    }

    List<ItemRecordModel> items = ItemRecordModel.GetSensors(search_by, search, sort, sortdir);
    return View("Items", new AdminRecordsViewModel() { Records = items });
} 
```

这是我的旧答案：
我解决了您的问题，您需要更改一些内容，但是您可以使用复选框完成可搜索的列表视图，如下所示：

jsfiddle 示例：

* * *

基本： [基本 jsfiddle 版本](http://jsfiddle.net/yakirmanor/SSgxM/)

更好的版本： [更好的版本](http://jsfiddle.net/d8KNF/3/)

[带有复选框和图标或图像的jQuery移动列表视图](http://jsfiddle.net/yakirmanor/d8KNF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:49:52.317

查看这些链接：

*   [http://jquerymobile.com/demos/1.1.0/docs/lists/lists-formatting.html](http://jquerymobile.com/demos/1.1.0/docs/lists/lists-formatting.html)
*   [http://jquerymobile.com/demos/1.1.0/docs/lists/lists-icons.html](http://jquerymobile.com/demos/1.1.0/docs/lists/lists-icons.html)
*   [http://jquerymobile.com/demos/1.1.0/docs/lists/lists-thumbnails.html](http://jquerymobile.com/demos/1.1.0/docs/lists/lists-thumbnails.html)

探索列表视图文档：

*   [http://jquerymobile.com/demos/1.1.0/docs/lists/index.html](http://jquerymobile.com/demos/1.1.0/docs/lists/index.html)

# google-analytics - 在 Google Analytics 中将事件跟踪到引荐来源网址

> ID：11004451
> 
> 赞同：5
> 
> 时间：2012-06-12T20:34:46.860
> 
> 标签：google-analytics, google-analytics-api, referrals

我正在处理的一个网站正在跟踪 Google Analytics 事件，这些事件始终具有我们网站内部的直接引荐 URL。将事件链接到原始推荐 URL 的最佳做法是什么？

一个示例用例是：

用户在 facebook -> 点击进入我们的网站 -> 浏览量 -> 浏览量 -> 活动

在这种情况下，推荐被认为是直接的，但流量来自 facebook。

在这种情况下，如何确保活动的推荐人是 facebook？因此，当我查看我的活动的目标转化率时，以 Facebook 推荐开始并以我的活动结束的网站访问将计为目标转化？这适用于任何推荐人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-11T15:21:32.683

这可以使用自定义报告来实现。

这是一个帮助您入门的模板。当您打开 Google Analytics 时，只需加载此 URL：[https ://www.google.com/analytics/web/template?uid=TGYsmF8ZT8Cthzq-9We9Yg](https://www.google.com/analytics/web/template?uid=TGYsmF8ZT8Cthzq-9We9Yg)

简而言之，我已将指标定义为`unique events`（将要测量的），并添加`Event Action`为默认维度。您还可以按特定事件进行过滤，并将其他事件数据（标签、类别、值）添加为二级维度。

希望这可以帮助！

# php - 在 webkit 浏览器中加载 http://www.google.com 的 iframe 解决方法

> ID：11004456
> 
> 赞同：0
> 
> 时间：2012-06-12T20:35:01.107
> 
> 标签：php, html, google-chrome, iframe

因此，最新版本的 Chrome 和可能的 Safari 也不允许您加载 iframe，除非您与某些不想像 google.com 这样的 iframe 的网站位于同一域中。

```
<iframe src="http://www.google.com" style="width:600px;height:500px;" frameborder="0"></iframe> 
```

我在 Chrome 中遇到的错误是.. 拒绝显示文档，因为 X-Frame-Options 禁止显示。

是否有解决方法来避免此错误并显示 iframe。

从我读到的 x-frame 内容是为了防止通过 iframe 进行点击劫持，但我并不想这样做，我只是想按照我认为应该执行的 iframe 的方式加载到站点中。

有没有使用 PHP 解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:44:35.977

不，没有办法绕过这个限制。

# javascript - 知道 Javascript 的优化库（例如实现最小二乘等）吗？

> ID：11004459
> 
> 赞同：5
> 
> 时间：2012-06-12T20:35:29.380
> 
> 标签：javascript, mathematical-optimization

任何人都知道在javascript中实现的（至少部分）[scipy.optimize的等价物吗？](http://docs.scipy.org/doc/scipy/reference/optimize.html)我正在尝试将各种分布（例如偏斜正态）拟合到分位数，但我之前需要一个优化库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T20:45:20.403

我最近将无导数的非线性约束优化代码[COBYLA2 移植到 Java](https://github.com/cureos/jcobyla)中，法兰克福大学的 Reinhard Oldenburg 又将这段代码转换为 Javascript。可以在[此处](http://code.google.com/p/jscobyla/downloads/list)下载 Javascript 代码以及一个自我解释的测试 HTML 文件。

# drupal-7 - 更改默认安装 url 路径 Bitnami Drupal 7 VM

> ID：11004468
> 
> 赞同：0
> 
> 时间：2012-06-12T20:36:03.090
> 
> 标签：drupal-7, bitnami

在 drupal 7 的 bitnami 默认安装中，我想将[http://example.com/drupal](http://example.com/drupal)更改为[http://example.com/content](http://example.com/content)

第一次尝试：`$base_url`在settings.php（/opt/bitnami/apps/drupal/htdocs/sites/default/）中修改

这似乎破坏了 /drupal 的内容，但没有改变位置。

第二次尝试：尝试编辑所有内容的 .htaccess 文件 (/opt/bitnami/apps/drupal/htdocs/)。我添加了 RewriteBase /内容。不确定，但这似乎并没有改变任何东西。

第三次尝试：尝试编辑站点的 .htaccess（/opt/bitnami/apps/drupal/htdocs/sites/default/files），如本文所述： [安装时如何在 Drupal 7 中从 URL 中删除 /drupal相关子目录](https://stackoverflow.com/questions/5716839/how-to-remove-drupal-from-url-in-drupal-7-when-installation-is-in-the-associate)

但我什至不确定我是否将示例更改为正确的内容。在内心深处，我不相信需要这么多配置行来改变这一点。

我在 bitnami-drupal-7.12-2-ubuntu-10.10 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T00:41:16.647

您需要在包含的 apache conf 文件中更新别名`/opt/bitnami/apps/drupal/conf/drupal.conf`

如果您查看该文件，您会注意到别名设置为将其`/drupal` 更改为`/content`

# java - 将图像从 Flex 传递到 Java：BufferedImage == null

> ID：11004469
> 
> 赞同：1
> 
> 时间：2012-06-12T20:36:07.193
> 
> 标签：java, image, apache-flex, base64

我想通过 BlazeDS 将图像（图表的屏幕截图）从 Flex 传递到 Java。目标是将图像存储在服务器端。

这是我的 Flex 例程（单击按钮后调用）：

```
protected function btn_clickHandler(event:MouseEvent):void
{
 var snapshot:ImageSnapshot = ImageSnapshot.captureImage(graphViewStack.selectedChild,);
 var balanceSheetImage:String = ImageSnapshot.encodeImageAsBase64(snapshot);
 //Testing the image
 var base64Dec:Base64Decoder = new Base64Decoder();
 base64Dec.decode(balanceSheetImage);
 generatedImage.load(base64Dec.toByteArray());
} 
```

在“生成的图像”中，显示了图像，所以我假设这个例程有效。

现在我想用 Java 解码 balanceSheetImage。出于这个原因，我创建了以下 Java 代码。该值包含生成图像中的字符串，我从弹性代码中复制/粘贴了该字符串。

```
import sun.misc.BASE64Decoder;

public static int createPdf() throws IOException{
   String value= "t3j1fA31VBp0DAADAJfR3rOfp+4+0H/qO+b//89/6u23566+//mVmZmZmZmb2yl4N8dSFcAzj0t29Xp//x77HfCvc/f8yAAAAfEL8FPT5wdm6/OBrf9SnsgtzAAAA+CBhDgAAAMIcAAAAhLkwBwAAAGEOAAAAwlyYAwAAgDAHAAAAYQ4AAAAIcwAAADifusErBAAAADtyxxwAAACEOQAAAAhYQ4AAADCHAAAAIS5MAcAAABhDgAAwEXN99W29OT8doBzYQ4AAMDppBbCqxrOy4EeC3MAAAAuYY3T3HaUc2EOAADAqa0/Pp5DIMcfay8fPhfmAAAAXELutvoj7phvhfeWZVnMzMzMzMzMXtqrIZ66EM7hrrX3mAMAAMAA8VPQ5yfnPpUdAAAAEOYAAAAgzAEAAABhDgAAAMIcAAAAEOYAAAAgzAEAAABhDgAAAMIcAAAA+K5u8AoBAADAjtwxBwAAAGEOAAAAwlyYAwAAgDAHAAAAYS7MAQAAQJgDAABwUeW+2lbC+RzObwc4F+YAAACcTmohHKM4tZXwnE8/FuYAAABcQm5BfOsCeQ5fz+H5ddC5MAcAAOD0+rvnafr/H29fw31VBp0LcwAAAE5t7qI8h9/fpnF3xn90x3wrvLcsy2JmZmZmZmb20n4S5aW7S/27QPYecwAAAHjznfLaLYdgX8/Skz/jU9kBAAAAYQ4AAADCHAAAABDmAAAAIMwBAAAAYQ4AAADCHAAAABDmAAAAIMwBAADgquoGrxAAAADsyB1zAAAAEOYAAAAgzIU5AAAACHMAAAAQ5sIcAAAAhDkAAAAXVe6rbSWc53A+h/M5nN8GngtzAAAATic9iO60cV7Cnx31WJgDAABwCbkFcZ6+37mew9dzeH4ddC7MAQAAOL14l3yevt8xj8Gewnnpvr7XuTAHAADg1J6FeIz2PB38jvlWeG9ZlsXMzMzMzMzspf0kyksX4WuIPwp17zEHAACAN98pr91yiPH+rP8zPpUdAAAAEOYAAAAgzAEAAABhDgAAAMIcAAAAEOYAAAAgzAEAAABhDgAAAMIcAAAArqpu8AoBAADAjtwxBwAAAGEOAAAAwlyYAwAAgDAHAAAAYS7MAQAAQJgDAABwUeW+2lYefD23rebw/NvAc2EOAADA6aQWwjGKU/f1GsI8hXgf+ViYAwAAcAk5hPmthXEKYd7fPa+DzoU5AAAAp9ffPa/hPD8I92n6dUd773NhDgAAwKnNXZTn6df7vNfl6eB3zLfCe8uyLGZmZmZmZmYv7SdRXrq71L14x9x7zAEAAODNd8of3Rl/Fub9n/Gp7AAAAIAwBwAAAGEOAAAACHMAAAAQ5gAAAIAwBwAAAGEOAAAACHMAAAAQ5gAAAHBVdYNXCAAAAHbkjjkAAAAIcwAAABDmwhwAAACEOQAAAAhzYQ4AAADCHAAAAIQ5AAAAjFbuq23lH5zP4fw28FyYAwAAcDqphXCM4rRxXsKfHfVYmAMAAHAJuQXxs/Pctqrh63ueC3MAAABOr79L/ui8D/cy6Pwt4b1lWRYzMzMzMzOzl/bTKJ+fRHl/7o45AAAAvFmZHv/4+qNz7zEHAACAN4qfgL4u/+a8/zM+lR0AAAAQ5gAAACDMAQAAAGEOAAAAwhwAAAAQ5gAAACDMAQAAAGEOAAAAH1U3eIUAAABgR+6YAwAAgDAHAAAAYS7MAQAAQJgDAACAMBfmAAAAIMwBAABAmAMAAMBo5b7aVsL5HM5vBzgX5gAAAJxOaiEcozi1lfCcTz8W5gAAAFxCbkGc21Y1fP0T58IcAACA04t3z9dAX5UPn78lvLcsy2JmZmZmZmb20n4a5fP0/Ufa3TEHAACAQUp3l3qavMccAAAAhoifgL4uP/iaT2UHAAAAhDkAAAAIcwAAAECYAwAAgDAHAAAAhDkAAAAIcwAAAECYAwAAwCHVDV4hAAAA2JE75gAAACDMAQAAQJgLcwAAABDmAAAAIMyFOQAAAAhzAAAAEOYAAADwKX2Yzu3sa7cDnAtzAAAATimFEI5n5UCPhTkAAACnlduvMYJvXSDP4bk5PK8OOhfmAAAAnF5/d3q9k166iE8P/sze528J7y3LspiZmZmZmZm9tHeHeQ53yW8D74y7Yw4AAMBl9WH+KJC9xxwAAAAGhPn6+/VD4eKPl/tUdgAAAECYAwAAgDAHAAAAhDkAAAAIcwAAAECYAwAAgDAHAAAAhDkAAAAcRt3gFQIAAIAduWMOAAAAwhwAAACEuTAHAAAAYQ4AAADCXJgDAACAMAcAAABhDgAAAJ/Sh2luZ1+bw/kczm8Dz4U5AAAAp5RCCMezPsZTWwnPGfVYmAMAAHBauf1aurN453oO5zk8rw46F+YAAACcXgzzefp+x/wrllP4tf8ze5+/Jby3LMtiZmZmZmZm9tLeHeZ9IKdwN9sdcwAAANhB6UL80R1z7zEHAACAAWG+xvj6HvN4F9unsgMAAADCHAAAAIQ5AAAAIMwBAABAmAMAAADCHAAAAIQ5AAAAIMwBAADgMOoGrxAAAADsyB1zAAAAEOYAAAAgzIU5AAAACHMAAAAQ5sIcAAAAhDkAAAAIcwAAAPiUZ2Ga21Zze+7XbgPPhTkAAACnlEIIP/taDr8vH3gszAEAADitNbr7CL61sxSe0989r4POhTkAAACn14f5Gqp9mKcHf2bv87eE95ZlWczMzMzMzMxe2rvDPE+/frx9XXbHHAAAAMbdMV/FO+beYw4AAAAfDPMvPpUdAAAAEOYAAAAgzAEAAABhDgAAAMIcAAAAEOYAAAAgzAEAAABhDgAAAIdRN3iFAAAAYEfumAMAAIAwBwAAAGEuzAEAAECYAwAAgDAX5gAAACDMAQAAQJgDAADAp/RhWtpZbY9Xczi/DTwX5gAAAJxSCiEcz+YullNbCc8Z9ViYAwAAcFq5/Vo2npParzmc1/D1Pc+FOQAAAKf3LMzj3fM10Ps/s/f5W8J7y7IsZmZmZmZmZi9trzCfp+8/0u6OOQAAAOykPPh96s68xxwAAAAGhHn8ZPR1+cHXfCo7AAAAIMwBAABAmAMAAADCHAAAAIQ5AAAAIMwBAABAmAMAAADCHAAAAD6qbvAKAQAAwI7cMQcAAABhDgAAAMJcmAMAAIAwBwAAAGEuzAEAAECYAwAAgDAHAACAT+nDdG5nX7sd4FyYAwAAcEophHA8Kwd6LMwBAAA4rdx+Ld1ZDr+vHz4X5gAAAJxeH+bpwdc+df6W8N6yLIuZmZmZmZnZS9sjzN0xBwAAgIFimHuPOQAAAHwwzL/4VHYAAABAmAMAAIAwBwAAAIQ5AAAACHMAAABAmAMAAIAwBwAAAIQ5AAAAHF7d4BUCAACAHbljDgAAAMIcAAAAhLkwBwAAAGEOAAAAwlyYAwAAgDAHAAAAYQ4AAABHMd9X224HOBfmAAAAXEa6rxzosTAHAADgUm5dIM/tcW5b1UHnwhwAAIDLSS2M413r3M5XZdC5MAcAAOBSvgJ5vUt+m8bdGf/RHfOt8N6yLIuZmZmZmZnZS9sjzB8FsveYAwAAwCBl+vXp6PHHy30qOwAAACDMAQAAQJgDAAAAwhwAAACEOQAAACDMAQAAQJgDAAAAwhwAAACEOQAAADBNdYNXCAAAAHbkjjkAAAAIcwAAABDmwhwAAACEOQAAAAhzYQ4AAADCHAAAAL7J99W2OZzP4fw28FyYAwAAcBnpQYynthKeM+qxMAcAAOBS8vT9zvUcznN4Xh10LswBAAC4lHn6fsf8K5ZT+HVVuq/vdS7MAQAAuJQ+kNcoP/Qd863w3rIsi5mZmZmZmdlLe3eY9+8xX0Pde8wBAABg4F3z9T3m8S62T2UHAAAAhDkAAAAIcwAAAECYAwAAgDAHAAAAhDkAAAAIcwAAAECYAwAAgDAHAAAApqlu8AoBAADAjtwxBwAAAGEOAAAAwlyYAwAAgDAHAAAAYS7MAQAAQJgDAADAQ7ltNd9X224Dz4U5AAAAl5NaIOfw+/KBx8IcAACAy7m1ME4hzPu753XQuTAHAADgctZQ7cM8heeUQefCHAAAgEvJ06/3ea/L08HvmG+F95ZlWczMzMzMzMxe2p6RHu+Ye485AAAADJYmn8oOAAAACHMAAAAQ5gAAAIAwBwAAAGEOAAAACHMAAAAQ5gAAAIAwBwAAAGEOAAAA9OoGrxAAAADsyB1zAAAAEOYAAAAgzIU5AAAACHMAAAAQ5sIcAAAAhDkAAAB8U+6rbSWcz+H8NvBcmAMAAHAZqQVyjOXUVsJzRj0W5gAAAFxabqGc21Y1fH3Pc2EOAADAZcW752ugr8qgc2EOAADAJc3T9x9pP/Qd863w3rIsi5mZmZmZmdlL2yPKS3f3epq8xxwAAACG3Smv3fKDr/lUdgAAAECYAwAAgDAHAAAAhDkAAAAIcwAAAECYAwAAgDAHAAAAhDkAAAAIcwAAALiqusErBAAAADtyxxwAAACEOQAAAAhzYQ4AAADCHAAAAIS5MAcAAABhDgAAAIcw31fbbsIcAAAAxkn3lQePhTkAAAAMkNtWb41lYQ4AAADbYZ7C790xBwAAgMFh/vId863w/ie2/jfMXp1rzFxj5hozc32Za8zOf42dIcw/9h5zf1HNNwNzjZm5xsz1Za4xM2H+t498Kru/qOabgbnGzFxj5voy15iZMN+Zv6jmm4G5xsxcY+b6MteYmTAX5uabgZlrzFxjZq4vc42ZMBfm/qKabwbmGjNzjZnry1xjZsJcmJtvBmauMXONmbm+zDVmwlyY+4tqvhmYa8zMNWauL3ONmQlzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADeqXoJ2Elp11dtj+Hd5nCNJS8HO8ptsNd/w75285Lw5n/XzxvXlw6AA0jhLyrscX3N3TcG4cSe15j/lrH390thzrsVMc6O/65P068bI/GxDoCDyeGbAoy43oQ5e/KPC/Zwa98nkzBnpzBf42j2cvDmf9f3P+lTdQAc/5sC7Cn5Bwc7Wn9MTzSxhxr+O+Ya493fG/tQ8n9g885/1/fXVNEBIMy5djSJckbwHmD2uKZqN9cYe4a664t3h/mzO+Y6AIQ5F7u2/L//jPpHrDBHNPGn/zfM90ze+e/6373HXAeAMOci+k+adaeJva8zP5mBMOdP/m+Y64s9/l2/9ansOgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOBY/geGctMTogR6kgAAAABJRU5ErkJggg==";
   BASE64Decoder decoder = new BASE64Decoder(); 
   byte[] imgBytes = decoder.decodeBuffer(value);        

   ByteArrayInputStream str = new ByteArrayInputStream(imgBytes);
   BufferedImage bufImg = ImageIO.read(str); 

   File imgOutFile = new File("newLabel.png");
   ImageIO.write(bufImg, "png", imgOutFile);  

   return -1;
} 
```

不幸的是，这不起作用。特别是： BufferedImage 始终为空。有谁知道为什么会发生这种情况？

# c# - 需要帮助将下载功能添加到 MVC 应用程序

> ID：11004470
> 
> 赞同：0
> 
> 时间：2012-06-12T20:36:07.273
> 
> 标签：c#, asp.net-mvc

我有一个 Web MVC 应用程序，我想添加一个功能，让用户能够从我的服务器下载大文件。用户拥有 Mac 和 Windows PC 的组合。我在思考 javasripts 或 silverlight 的路线。

有人可以建议我如何实现此功能吗？你有任何代码示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:41:32.213

使用类的[File](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.file.aspx)方法`Controller`。

所以创建一个名为的控制器`FilesController`并有一个名为的动作方法`DownLoad`

```
public class FilesController : Controller
{  
   public ActionResult Download(string fileId)
   {
     var fullFilePath=FileService.GetFullPath(fileId);  // get the path to file
     return File(fullFilePath,"application/pdf","yourDownLoadName.pdf");  
   }
} 
```

这将从指定路径（**fullFilePath**）返回一个 PDF 文件，其中`MimeType/ContentTyp`e 为**PDF**，“ **yourDownLoadName.pdf** ”为可下载文件名

用户可以像这样访问它`http://yourdomainname.com/Files/Download?fileId=somefileId`

此方法使用文件路径、字节数组、流等进行了大量[重载。](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.file.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:40:01.607

创建一个具有[FileStreamResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.filestreamresult.aspx)返回类型的控制器操作。

# c# - C# bool 值作为字符串始终为空

> ID：11004478
> 
> 赞同：3
> 
> 时间：2012-06-12T20:36:45.900
> 
> 标签：c#, boolean, nullable, tostring

我正在尝试将变量属性信息转储到一个简单的字符串，但是当它到达我的可为空布尔值时，`as string`总是返回 null ——即使实际值为 true | 错误的！

```
StringBuilder propertyDump = new StringBuilder();

foreach(PropertyInfo property in typeof(MyClass).GetProperties())
{
    propertyDump.Append(property.Name)
                .Append(":")
                .Append(property.GetValue(myClassInstance, null) as string);
}

return propertyDump.ToString(); 
```

不抛出异常；快速，输出正是我想要的，除了任何`bool?`总是错误的属性。如果我快速观看并做到`.ToString()`这一点！但我不能保证其他属性实际上不为空。

谁能解释这是为什么？甚至更好的解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T20:39:04.680

bool 不是字符串，因此当您向它传递一个装箱的布尔值时，as 运算符返回 null。

在你的情况下，你可以使用类似的东西：

```
object value = property.GetValue(myClassInstance, null);

propertyDump.Append(property.Name)
            .Append(":")
            .Append(value == null ? "null" : value.ToString()); 
```

如果你想有空值只是不附加任何文本，你可以直接使用[Append(Object)](http://msdn.microsoft.com/en-us/library/5atxc566.aspx#Y0)：

```
propertyDump.Append(property.Name)
            .Append(":")
            .Append(property.GetValue(myClassInstance, null)); 
```

这将起作用，但将“propertyDump”输出中的空属性保留为缺失条目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T20:39:00.277

`as`如果实例属于该确切类型，则运算符返回一个转换值，否则`null`。

相反，你应该`.Append(property.GetValue(...))`；`Append()`将自动处理空值和转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T20:49:57.577

在我看来，最好的解决方案是：

```
.Append(property.GetValue(myClassInstance, null) ?? "null"); 
```

如果该值为 null，它将附加“null”，如果不是，它将调用该值的 ToString 并附加它。

将它与 Linq 而不是 foreach 循环结合起来，你可以得到一个不错的小东西：

```
var propertyDump =
    string.Join(Environment.NewLine,
                typeof(myClass).GetProperties().Select(
                    pi => string.Format("{0}: {1}",
                                        pi.Name,
                                        pi.GetValue(myClassInstance, null) ?? "null"))); 
```

（在 VS 的宽屏上看起来更好）。

顺便说一下，如果你比较速度，结果是 string.Join 比 Appending to a StringBuilder 更快，所以我想你可能想看看这个解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T20:40:26.283

那是因为属性的类型不是字符串。将其更改为：

```
Convert.ToString(property.GetValue(myClassInstance, null)) 
```

如果它为空，它将检索空，这没关系。对于非空值，它将返回属性值的*字符串表示形式*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T20:38:54.320

您不能将布尔值转换为字符串。你必须使用`ToString()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T20:51:43.947

使用[null 合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)来处理 Null 情况：

```
void Main()
{

   TestIt tbTrue = new TestIt() { BValue = true }; // Comment out assignment to see null

   var result =
    tbTrue.GetType()
          .GetProperties()
          .FirstOrDefault( prp => prp.Name == "BValue" )
          .GetValue( tb, null ) ?? false.ToString();

      Console.WriteLine ( result ); // True

}

public class TestIt
{
   public bool? BValue { get; set; }
} 
```

# vb.net - 通过指定凭据访问服务器上的文件

> ID：11004479
> 
> 赞同：2
> 
> 时间：2012-06-12T20:36:47.550
> 
> 标签：vb.net, authentication, sharepoint, unc

我们公司有一个共享点文档服务器，其中 UNC 如下所示：\\theserver.ourdomain.com\rootdirectory

目前，此驱动器已映射到我本地计算机上的 Z:\。要访问 Z:\，您必须指定（每次登录时）凭据（在我们的例子中是我们登录时使用的用户名和密码）才能访问根目录中的文件夹和**文件**。

我处于需要将文件复制到共享点服务器的情况。我希望能够在不使用映射网络驱动器的情况下将文件复制到服务器上（不必在路径中指定 Z:\）。如何提供凭据以便我可以执行基本的 IO 功能，如 GetDirectories()、GetFiles()、IO.File.Copy() 等...？

我研究了以下内容，但未能成功：

1.  [通过指定纯文本用户名和密码来调用LogonUser](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184%28v=vs.85%29.aspx) API，然后从该调用中获取令牌并使用 WindowsIdentity 类的新实例模拟该用户。能够获得令牌，但模拟似乎不起作用。不断收到拒绝访问错误。
2.  [CredUIPromptForCredentials](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375177%28v=vs.85%29.aspx) / [CredUIPromptForWindowsCredentials](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375178%28v=vs.85%29.aspx) API 调用，但我意识到这些只是用于一个花哨的 Windows UI，您可以在其中输入您的凭据，实际上什么也不做。

    ```
    <DllImport("advapi32.dll", SetLastError:=True)> _
    Private Shared Function LogonUser(lpszUsername As String, lpszDomain As String, _
                                              lpszPassword As String, dwLogonType As Integer, _
                                              dwLogonProvider As Integer, ByRef phToken As IntPtr) As Boolean
    End Function

    <DllImport("kernel32.dll", CharSet:=CharSet.Auto)> _
    Private Shared Function CloseHandle(handle As IntPtr) As Boolean
    End Function

    '// logon types
    Public Const LOGON32_LOGON_NETWORK As Integer = 3
    Public Const LOGON32_LOGON_NEW_CREDENTIALS As Integer = 9

    '// logon providers
    Public Const LOGON32_PROVIDER_WINNT50 As Integer = 3
    Public Const LOGON32_PROVIDER_WINNT40 As Integer = 2
    Public Const LOGON32_PROVIDER_WINNT35 As Integer = 1
    Public Const LOGON32_PROVIDER_DEFAULT As Integer = 0

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim token = IntPtr.Zero
        Dim success = LogonUser("username", "domain", "password", _
                                LOGON32_LOGON_NEW_CREDENTIALS, _
                                LOGON32_PROVIDER_DEFAULT, token)

        If Not success Then
            Me.RaiseLastWin32Error()
        End If

        Using identity = New WindowsIdentity(token)
            Using impersonated = identity.Impersonate()
                Try
                    Dim info = New DirectoryInfo("\\theserver.ourdomain.com\rootdirectory\")
                    Dim files = info.GetDirectories()
                Catch ex As Exception
                Finally
                    impersonated.Undo()
                End Try
                If Not CloseHandle(token) Then
                    Me.RaiseLastWin32Error()
                End If
            End Using
        End Using

    End Sub

    Private Sub RaiseLastWin32Error()
        Dim hr = Marshal.GetLastWin32Error()
        Dim ex = Marshal.GetExceptionForHR(hr)

        If ex IsNot Nothing Then
            Throw ex
        End If
        Throw New SystemException(String.Format("Call resulted in error code {0}", hr))
    End Sub 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T20:49:25.343

好吧，我能够在 WNetAddConnection2 API 的帮助下解决这个问题。此 API 也用于映射网络驱动器，但是您可以在不指定驱动器号的情况下调用此方法，以便它只是添加连接。

例如，假设您有驱动器 X：映射到 \\server\share 也可以说它需要用户名和密码才能访问服务器上的文件。当您重新启动 Windows 7 时，您可能会失去该连接（您将收到一条通知，指出 Windows 无法重新连接某些网络驱动器）。如果您的应用程序需要访问该服务器的文件，并且您尝试在不提供凭据的情况下访问它，您将获得访问被拒绝的异常。如果您成功调用 WNetAddConnection2，它不仅会修复您未映射的网络驱动器，您还可以通过 System.IO 命名空间访问文件/目录。

我们使用 Sharepoint，这对我有用。也感谢其他人的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:50:53.347

这不是您问题的直接答案，因为它是一种截然不同的方法。如果它不适用于您的情况，很抱歉打扰，但您是否考虑过使用 SharePoint Web 服务来加载文件和检索信息？

我建议这种方法有几个原因：

1.  您遇到的问题可能是因为 SharePoint 实施的 WebDav 可能与 System.IO 不是 100% 兼容。我不是这里的内部专家，我不确定兼容性，但这似乎是合理的。
2.  您拥有的 UNC 位置可以很容易地转换为 Web 服务所需的 URL。
3.  您可以直接在代理上设置凭据，这样可能会更轻松。（尽管我们从另一个 Web 服务器进行这些调用，因此示例中的应用程序池凭据对我们来说已经足够了）

以下是一些经过消毒和简化的代码，以防万一：

```
// location takes the form http://server.name.com/site/library/folder/document.ext

public string UploadDocument(string location, byte[] fileContents)
{
    var result = String.empty;
    var destination = new string[1];
    destination[0] = location;
    var fileName = Path.GetFileName(location);
    var fieldInfo = new FieldInformation[0];
    CopyResult[] copyResults;

    _copyService.Url = "http://server.name.com/_vti_bin/Copy.asmx";
    _copyService.Credentials = CredentialCache.DefaultCredentials;
    _copyService.CopyIntoItems(fileName, destination, fieldInfo, fileContents, out copyResults);

    var errorCode = copyResults[0].ErrorCode;
    if (errorCode != CopyErrorCode.Success)
    {
        if (errorCode == CopyErrorCode.DestinationCheckedOut)
            result = "File is currently checked out. Please try again later.";
        else
            result = "Error uploading content.";
    }

    return result;
} 
```

_copyService 是我们注入的依赖项，其中运行时实现是由 Visual Studio 工具从 Copy.asmx SharePoint Web 服务生成的代理。

您还可以使用 Lists.asmx Web 服务获取文件夹内容和文档元数据。这种方法的最大缺点是查询信息需要一些 CAML 知识并且处理结果并不容易。但是这些服务在 MSDN 上有合理的记录，并且这些操作都在我们的应用程序中运行。

# arrays - 将数组与引用数组中的值匹配 - Perl

> ID：11004482
> 
> 赞同：4
> 
> 时间：2012-06-12T20:37:10.967
> 
> 标签：arrays, perl, date, reference, dereference

我有以下数组引用数组：

```
my @holidays = [[2012,'01','02'],[2012,'01','16'],[2012,'02','20'],[2012,'04','16'],[2012,'05','28'],[2012,'07','04'],[2012,'09','03'],[2012,'10','08'],[2012,'11','12'],[2012,'11','22'],[2012,'12','25']]; 
```

哪些是 IRS 认可的 2012 年法定假日。我想将数组 @dueDate 与该数组中的一个值相匹配，如果存在则返回 1 或 true。

```
 while ($holidays[@dueDate]){
        print ("Found Holiday \t join('-',@dueDate)");
        @dueDate = Add_Delta_Days(@dueDate, 1);
        if ( Day_of_Week(@dueDate) > 5){
            @dueDate = Monday_of_Week((Week_Number(@dueDate)+1), $dueDate[0]);
        }
    } 
```

这是我目前的尝试吗 - while 语句的条件永远不会正确。我尝试了几种不同的引用和取消引用假期组合，但均无济于事。

最好的方法是在 while 语句中操作评估，以便在 @dueDate 包含我上面的数组中的日期时执行块。

注意：@dueDate 是 Date::Calc 标准数组 - (Year, Month, Day)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:18:34.193

这应该使您走上正确的轨道。我在您的代码中看到两个问题 - 数组数组的外部应该有普通括号，并使用 ~~ 运算符比较数组是否相等。

```
my @holidays = ([2012,'01','02'],[2012,'01','16'],[2012,'02','20'],[2012,'04','16'],  
[2012,'05','28'],[2012,'07','04'],[2012,'09','03'],[2012,'10','08'],[2012,'11','12'], 
[2012,'11','22'],[2012,'12','25']);
my $i;
my @duedate = [2012, '01', '02'];

for ($i = 0; $i < @holidays; $i++)
{
    if (@holidays[$i] ~~ @duedate)
    {
        print "matched!!";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T21:17:58.860

第一的，

```
my @holidays = [[2012,'01','02'],...,[2012,'12','25']]; 
```

应该

```
my @holidays = ([2012,'01','02'],...,[2012,'12','25']); 
```

您正在创建一个包含单个元素的数组。

* * *

可能实现您想要的最佳方法是使用哈希。

```
my %holidays = map { join('-', @$_) => 1 } @holidays; 
```

那么你所需要的就是

```
while ($holidays{join('-', @dueDate)}) {
   my $dow = Day_of_Week(@dueDate);
   @dueDate = Add_Delta_Days(@dueDate,
      $dow == 5 || $dow == 6 ? 8 - $dow : 1);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T21:17:59.840

这是我的答案，在 Perl 5.14 上工作，我也使用 smartmatching ~~ 运算符来比较两个数组。

您分配给数组 @holidays = [[2012,'01','02'], ]; 实际上您将匿名数组 [ ['2012', '01', '02'], ] 分配给@holidays 的第一个元素是不正确的。

```
use v5.14;

my @holidays = ( ['2012', '01', '02'], ['2012', '01', '16'] );
my @due_date = ( '2012', '01', '16' );

for my $holiday (@holidays) {

    if (@$holiday ~~ @due_date) {
        say "holiday match";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T21:23:25.450

好的，有几件事：

1：列表包含在括号中，文字数组引用写在括号之间。所以，你应该有：

`my @holidays = ([2012,'01','02'],[2012,'01','16'],[2012,'02','20'],[2012,'04','16'],[2012,'05','28'], [2012,'07','04'],[2012,'09','03'],[2012,'10','08'],[2012,'11','12'],[2012,'11','22'],[2012,'12','25']);`

2：当您查看时`$holidays[@dueDate]`，您是在**标量上下文**中调用所有内容。特别是，由于`@dueDate`具有三个元素，因此您只查看`$holidays[3]`.

3：除非你正在编写一段一次性代码，否则**总是** `use strict;`和`use warnings;`.

所以，你想要这样的东西：

```
use strict;
use warnings;

my @holidays = ([2012,'01','02'],[2012,'01','16'],[2012,'02','20'],[2012,'04','16'],[2012,'05','28'],
    [2012,'07','04'],[2012,'09','03'],[2012,'10','08'],[2012,'11','12'],[2012,'11','22'],[2012,'12','25']);

my @dueDates=([2012,'01','01'],[2012,'01','02'],[2012,'01','03']); #Or whatever

my @due_dates_that_are_holidays=();

foreach my $due_date(@dueDates)
{
  foreach my $holiday(@holidays)
  {
    my ($h_y,$h_m,$h_d)=@$holiday; #Capturing year month and day from the array reference
    my ($d_y,$d_m,$d_d)=@$due_date; #Ditto for the due date

    if($h_y == $d_y and $h_m eq $d_m and $h_d eq $d_d)
    {
      push @due_dates_that_are_holidays,$due_date;
    }
  }
}
print join("-",@{$_}) . "\n" foreach(@due_dates_that_are_holidays); 
```

上面的代码产生以下输出：

```
2012-01-02 
```

# google-docs-api - google 文档列表 api 缩略图链接 url

> ID：11004483
> 
> 赞同：2
> 
> 时间：2012-06-12T20:37:12.370
> 
> 标签：google-docs-api, google-drive-api

我对文档列表 api 中为缩略图链接返回的 url 有几个问题：1) url 是公开的吗？（似乎没有访问控制）2）无论我们何时获得链接，网址是否保持不变（网址是否有时间限制或类似的东西）？

问候， LT

# asp.net-mvc-3 - asp.net mvc3, cookie

> ID：11004487
> 
> 赞同：0
> 
> 时间：2012-06-12T20:37:20.237
> 
> 标签：asp.net-mvc-3, cookies

我有一个网站，用户可以在其中使用他们的 facebook 帐户或 twitter 进行身份验证：要了解我使用 cookie 的用户：

**全球.asax：**

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
    {
        HttpCookie authCookie = Request.Cookies[FormsAuthentication.FormsCookieName];
        if (authCookie != null)
        {
            var authTicket = FormsAuthentication.Decrypt(authCookie.Value);
            var id = new MyIdentity(authTicket);
            var userData = authTicket.UserData.Split(',');

            id.SocialProviderName = userData[0].Replace("providerslist=", "").Split('|')[0];
            var newUser = new MyPrincipal(id);
            Context.User = newUser;
        }

    } 
```

用户可以链接两个帐户（facebook 和 twitter）。与 twitter 连接，然后单击“帐户链接”，将被重定向以使用她的 facebook 帐户进行身份验证

问题是，当重定向到第二个帐户时，cookie 变为 null 并且

如果（this.HttpContext.Request.IsAuthenticated）{...}

返回假

（如果我使用单个帐户连接，则 cookie 有效，没问题）

**我的控制器：**

……

FormsAuthentication.SetAuthCookie(socialProfile.UserId, true);

ResetFormsCookie(providerName, socialProfile.UserId);

……

由 GUID 生成的 UserId

```
 public void ResetFormsCookie(string providerName, string userId)
    {
        var authCookie = HttpContext.Current.ApplicationInstance.Request.Cookies[FormsAuthentication.FormsCookieName];
        if (authCookie == null)
        {
            authCookie = FormsAuthentication.GetAuthCookie(userId, true);
        }
        var authTicket = FormsAuthentication.Decrypt(authCookie.Value);
        var userData = authTicket.UserData;
        var providerslist = (from c in userData.Split(',') where c.Contains("providerslist=") select c).FirstOrDefault();
        if (string.IsNullOrEmpty(providerslist))
        {
            userData += string.IsNullOrEmpty(userData) ? "providerslist=" + providerName : ",providerslist=" + providerName;
        }
        else
        {
            if (!providerslist.Contains(providerName))
            {
                userData = userData.Replace(providerslist, providerslist + "|" + providerName);
            }
        }
        var newTicket = new FormsAuthenticationTicket(authTicket.Version, authTicket.Name, authTicket.IssueDate
            , DateTime.Now.AddDays(90) // authTicket.Expiration ToDo: This need to set in the config
        , authTicket.IsPersistent, userData);
        authCookie.Value = FormsAuthentication.Encrypt(newTicket);
        HttpContext.Current.Response.Cookies.Add(authCookie);
    } 
```

我为我的英语道歉

谢谢，

# javascript - 获取一个 div 的高度并使用它设置另一个 div 的高度

> ID：11004498
> 
> 赞同：5
> 
> 时间：2012-06-12T20:38:08.050
> 
> 标签：javascript

我有两个 div，在 css 中都没有设置高度，因为我想取它们最终的高度并将另一个 div 设置为那个高度。

我拥有的javascript是这个

```
function fixHeight() {
    var divh = document.getElementById('prCol1').height;
    document.getElementById('prCol1').innerHTML = '<ul><li>' + divh + '</li></ul>';
    document.getElementById('prCol2').style.height = divh + 'px';
} 
```

我有以下代码行只是为了看看我是否得到了某种实际响应。

```
document.getElementById('prCol1').innerHTML = '<ul><li>' + divh + '</li></ul>'; 
```

我有一个 onload 设置来运行该功能

我的两个 div 看起来像这样

```
<div id="prCol1">
     ..content..
</div>
<div id="prCol2" class="slideshow">
    ..content..
</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T20:44:27.643

使用`offsetHeight`- [http://jsfiddle.net/HwATE/](http://jsfiddle.net/HwATE/)

```
function fixHeight() {
    var divh = document.getElementById('prCol1').offsetHeight; /* change this */
    document.getElementById('prCol1').innerHTML = '<ul><li>' + divh + '</li></ul>';
    document.getElementById('prCol2').style.height = divh + 'px';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T20:41:54.867

您可以使用 jQuery 获取高度并进行设置。

```
var h = $("#prCol1").height();
$("#prCol2").height(h); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:48:14.177

我建议在这里使用 jQuery。您无法像在我知道的任何浏览器中尝试的那样获得元素的高度。如果您使用非常简单的 jQuery，这是代码。如果没有 jQuery，我不会尝试这样做，因为浏览器在访问高度方面可能会有所不同。

```
function fixHeight() {
    var $prCol1 = $('#prCol1');
    var divh = $prCol1.height();
    $prCol1.html('<ul><li>' + divh + '</li></ul>');
    $('#prCol1').height(divh);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T20:43:57.987

有 jQuery 插件可以以一般方式执行此操作。 [这是一个](http://www.cssnewbie.com/example/equal-heights/plugin.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-08T05:20:20.237

您可以通过以下代码获得高度：

```
document.getElementById('YourElementID').clientHeight; 
```

# php - PHP 5.2.6 支持 mysql_fetch_array() 吗？

> ID：11004500
> 
> 赞同：1
> 
> 时间：2012-06-12T20:38:26.203
> 
> 标签：php, mysql

当我尝试使用 mysql_fetch_array() 时收到此错误消息：

```
while( $deffefgpSfet->fetch() ) {
   $roefe= mysql_fetch_array($ffefe, MYSQL_NUM);

Warning:  mysql_fetch_array(): supplied argument is not a valid 
         MySQL result resource in <b>/opt/lampp/htdocs/index.php on line 157 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T20:42:49.937

您没有显示对象 $defeft 的代码，但我可以假设您正在尝试做什么......

```
$blah = mysql_query("SELECT 1 FROM information_schema.tables");

if(!$blah) { // check for mysql errors
  echo mysql_error();
  exit;
}

while( $defeft = mysql_fetch_array($blah)) {

 echo $defeft['row'];

} 
```

Defeft 将行数据保存在一个数组中，while 循环遍历每一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:11:53.073

该错误不是指在不是资源的变量上使用mysql_fetch_X，例如查询失败，请确保您的查询返回有效结果，而不是mysql错误？

```
$a = mysql_query($sql) or die(); 
```

试试这个（或类似的）:)

# ms-access - 在 Access 中操作数组

> ID：11004508
> 
> 赞同：0
> 
> 时间：2012-06-12T20:38:51.357
> 
> 标签：ms-access

我有一组数值作为数组，就像这样

```
100,120,0,100,90 etc 
```

我还有一个整数变量 n

我必须计算数组中的零，并将最低的非零（第一次出现）替换为零，直到零的计数 = n

因此，鉴于上面的数据和 n = 3 我最终会得到

```
 0,120,0,100,0 etc 
```

然后我需要对这些值求和。

我对 Access vba 数组不熟悉，而且似乎根本没有很多内置数组操作函数。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:15:26.160

对数组进行排序然后从 N 开始循环遍历数组以获得运行总数。

问题是，您不必将最低值转换为零。您所要做的就是将其从总和中排除，因此您从 N 开始运行总计（假设基于 0 的数组）。

阅读评论后，我修改了我的答案以处理小于 N 的空数组和数组大小。

```
Function ArrayTotal(MyArray() As Long, N As Long)
    Dim Idx As Long
    Dim Total As Long

    On Error Resume Next
    Idx = UBound(MyArray)
    If Err.Number <> 9 Then
        QuickSort1 MyArray
        If N < UBound(MyArray) Then
            For Idx = N To UBound(MyArray)
                Total = Total + MyArray(Idx)
            Next Idx
        End If
    End If
    ArrayTotal = Total
End Function

' Omit plngLeft & plngRight; they are used internally during recursion
Public Sub QuickSort1(ByRef pvarArray As Variant, Optional ByVal plngLeft As Long, Optional ByVal plngRight As Long)
    Dim lngFirst As Long
    Dim lngLast As Long
    Dim varMid As Variant
    Dim varSwap As Variant

    If plngRight = 0 Then
        plngLeft = LBound(pvarArray)
        plngRight = UBound(pvarArray)
    End If
    lngFirst = plngLeft
    lngLast = plngRight
    varMid = pvarArray((plngLeft + plngRight) \ 2)
    Do
        Do While pvarArray(lngFirst) < varMid And lngFirst < plngRight
            lngFirst = lngFirst + 1
        Loop
        Do While varMid < pvarArray(lngLast) And lngLast > plngLeft
            lngLast = lngLast - 1
        Loop
        If lngFirst <= lngLast Then
            varSwap = pvarArray(lngFirst)
            pvarArray(lngFirst) = pvarArray(lngLast)
            pvarArray(lngLast) = varSwap
            lngFirst = lngFirst + 1
            lngLast = lngLast - 1
        End If
    Loop Until lngFirst > lngLast
    If plngLeft < lngLast Then QuickSort1 pvarArray, plngLeft, lngLast
    If lngFirst < plngRight Then QuickSort1 pvarArray, lngFirst, plngRight
End Sub 
```

# php - SQL (PHP MySQLi) 语法错误

> ID：11004513
> 
> 赞同：0
> 
> 时间：2012-06-12T20:38:57.390
> 
> 标签：php, mysql, mysqli, create-table

我已经从 MySQL 服务器导出了 sql（导出文件中的版本为：5.1.41），并尝试在新的 MySQL 服务器上运行导出的 sql，在调试中显示客户端版本为“5.1.41”但 server_info参数说“5.5.15-log”（我正在使用 PHP MySQLi 扩展）。

我收到以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CREATE TABLE `mojo_global_regions` ( id int(11) NOT NULL AUTO_INCREMENT, reg' at line 22 
```

这是它抱怨的代码块：

```
CREATE TABLE IF NOT EXISTS `mojo_global_regions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `region_id` varchar(100) DEFAULT '',
  `region_name` varchar(100) DEFAULT '',
  `layout_id` int(5) DEFAULT NULL,
  `content` text,
  PRIMARY KEY (`id`),
  KEY `region_id` (`region_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=19 ; 
```

谁能看到这种语法有什么问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:45:19.530

看起来 CREATE TABLE 之前有一条语句没有正确终止。

# excel - 无需选择和 CtrlC 的宏

> ID：11004514
> 
> 赞同：0
> 
> 时间：2012-06-12T20:38:58.980
> 
> 标签：excel, vba

只有当我从 A22-78 中选择并 ctrl C 行时，此宏才有效。我希望它在我不必这样做的情况下工作。此函数从 (#rows)*(每行中的#columns) 中生成一列

```
Sub RowsToColumn()
Dim RN As Range
Dim RI As Range
Dim r As Long
Dim LR As Long
Dim WS As Worksheet
Set WS = Sheets.Add
Application.ScreenUpdating = False

Columns(1).Insert
r = 0
LR = Range("B" & Rows.Count).End(xlUp).Row
For Each RN In Range("B22:B" & LR)
    r = r + 1
    For Each RI In Range(RN, Range("XFD" & RN.Row).End(xlToLeft))
        r = r + 1
        Cells(r, 1) = RI
        RI.Clear
    Next RI
Next RN
Columns("A:A").SpecialCells(xlCellTypeBlanks).Delete Shift:=xlUp
Application.ScreenUpdating = True
End Sub 
```

感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:24:33.047

我尝试了您的代码，它似乎做的是从左到右读取值并将它们按相应顺序全部放在 A 列中。这可以帮助：

```
Sub Test()

Dim oRange          As Range
Dim oSheet          As Excel.Worksheet
Dim vArray()        As Variant

Dim lCnt_A          As Long
Dim iCnt_B          As Integer
Dim lCnt_C          As Long
Dim iCnt_Cols       As Integer

Set oSheet = ThisWorkbook.Sheets(1)

Columns(1).Insert
Set oRange = oSheet.UsedRange
iCnt_Cols = oRange.Columns.Count

vArray = oRange
oRange.ClearContents

For lCnt_A = 1 To UBound(vArray)
    For iCnt_B = 1 To iCnt_Cols
        lCnt_C = lCnt_C + 1
        ThisWorkbook.Sheets(2).Cells(lCnt_C, 1).Value = vArray(lCnt_A, iCnt_B)

    Next iCnt_B
Next lCnt_A

Set oSheet = Nothing
Set oRange = Nothing

End Sub 
```

请告诉我我是否理解错了你的意图。

# python - PyQT / Windows / Pyinstaller (exe) - NameError: global name 'QtGui' is not defined

> ID：11004516
> 
> 赞同：1
> 
> 时间：2012-06-12T20:39:03.337
> 
> 标签：python, pyqt, pyinstaller

我在尝试使用 pyinstaller 将我的 python 代码转换为可执行文件时遇到问题。我正在使用 PyQT 4.9.1 和 Python 2.7。

当我尝试构建它时出现错误（Build.py）：

```
Traceback (most recent call last):
  File "Build.py", line 1494, in <module>
    main(args[0], configfilename=opts.configfile)
  File "Build.py", line 1472, in main
    build(specfile)
  File "Build.py", line 1429, in build
    execfile(spec)
  File "c:\projects\vibot\vibotUI_07.py", line 270, in <module>
    window = viUI()
  File "c:\projects\vibot\vibotUI_07.py", line 9, in __init__
    QtGui.QMainWindow.__init__(self)
NameError: global name 'QtGui' is not defined 
```

我搜索了谷歌，所有的解决方案都是基于纠正不正确的模块导入，但我已经正确地开始了。

这是我的代码的裁剪版本：

```
#!/usr/bin/env python

import sys
import os
from PyQt4 import QtCore, QtGui

class viUI(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)
        self.setWindowTitle('test')
        self.setObjectName('viMainWindow')
        self.resize(400, 600)

        self.show()

app = QtGui.QApplication(sys.argv)
window = viUI()
sys.exit(app.exec_()) 
```

这是 Makespec.py 文件：

```
# -*- mode: python -*-
a = Analysis([os.path.join(HOMEPATH,'support\\_mountzlib.py'), os.path.join(HOMEPATH,'support\\useUnicode.py'), 'c:\\projects\\vibot\\vibotUI_07.py'],
             pathex=['c:\\Python\\pyinstaller-1.5.1\\pyinstaller-1.5.1'])
pyz = PYZ(a.pure)
exe = EXE( pyz,
          a.scripts,
          a.binaries,
          a.zipfiles,
          a.datas,
          name=os.path.join('dist', 'vibotUI_07.exe'),
          debug=False,
          strip=False,
          upx=True,
          console=True ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:51:11.760

在我看来，您正在调用 Build.py 并将您的脚本作为参数传递。我刚刚对此进行了测试，看看会发生什么，并得到了与您发布的相同的输出。

使用当前稳定的 PyInstaller (1.5.1)，您需要先[创建一个规范文件](http://www.pyinstaller.org/export/d3398dd79b68901ae1edd761f3fe0f4ff19cfb1a/project/doc/Manual.html?format=raw#create-a-spec-file-for-your-project)。而不是 Build.py 运行 MakeSpec.py 并将您的脚本作为参数。这将创建一个 .spec 文件，然后您将其发送到 Build.py。

该文档显示了您可以传递给 MakeSpec 的选项，例如在 Windows 下设置图标和设置部署选项。这些选项都进入了规范文件，因此当您需要重新构建应用程序时，您只需要再次调用 Build.py 即可。

# image - 从图像中删除颜色

> ID：11004519
> 
> 赞同：1
> 
> 时间：2012-06-12T20:39:18.860
> 
> 标签：image, colors

我正在对 ID 和驾驶执照中的数据进行 OCR 处理，但我发现通常非常彩色的装饰会干扰 OCR 质量。我希望能够从图像中删除所有非几乎黑色的颜色并将它们替换为白色。我可以编写一个小程序，逐个像素地执行此操作，但可能有一些批处理工具或（Java）库可以做得更好，并阻止我为各种格式编写解析器。

任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:05:02.753

我发现最好的方法是使用在线照片编辑器 (http://pixlr.com/editor)。它非常适合为孩子们制作着色页。保存图像后，在 PEO 中打开它，然后单击“过滤器”选项卡。向下滚动到底部并选择“查找边缘”。然后图像将改变颜色。接下来，单击“调整”并向下滚动到“反转”并单击它。瞧！保存您的图像轮廓。如果线条太浅，您可以将图像插入 MS Word，进入图片编辑模式并降低对比度。

# opencl - 明智地使用 GPU 和 CPU

> ID：11004522
> 
> 赞同：4
> 
> 时间：2012-06-12T20:39:36.287
> 
> 标签：opencl

我是 OpenCL 的新手，刚开始学习。我想知道是否可以在 GPU 上执行几个线程并在 CPU 上执行剩余线程？换句话说，如果我启动 100 个线程并假设我有 8 个核心 CPU，那么是否有可能 100 个线程中的 8 个线程将在 CPU 上执行，其余 92 个线程将在 GPU 上运行？OpenCL 可以帮助我完成这项工作吗？顺利？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T08:04:48.670

> 我想知道是否可以在 GPU 上执行几个线程并在 CPU 上执行剩余线程？

是的

> 换句话说，如果我启动 100 个线程并假设我有 8 个核心 CPU，那么是否有可能 100 个线程中的 8 个线程将在 CPU 上执行，而剩余的 92 个线程将在 GPU 上运行？

不，该描述表明您将 GPU 和 CPU 视为单个计算资源。你不能那样做。

这并不意味着你不能让两者都从事同一个任务。

*   GPU 和 CPU 将被视为独立的 OpenCL 设备。
*   您可以编写可以与多个设备通信的代码。
*   您可以为多个设备编译相同的内核。
*   您可以要求多个设备同时工作。

...但...

*   这些都不是自动的。
*   OpenCL 不会在多个设备之间拆分单个 NDRange（或等效）调用。
*   这意味着您必须自己在两台设备之间安排任务。
*   速度上会有很大的差异，因此保持最佳状态需要超过“这里 92，那里 8”。

我发现更好的是让 CPU 在 GPU 工作时处理不同的任务。也许为 GPU 准备下一个工作，或者对来自 GPU 的结果进行后处理。有时这是正常的代码。有时它是 OpenCL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T01:16:10.167

您可以使用多个 openCL 设备来处理您的算法，但是需要对工作负载进行足够巧妙的分区，以便正确平衡设备之间的工作，否则开销可能会使您的运行时变得更糟。

[AMD OpenCL 编程指南第 4.7 节](http://developer.amd.com/sdks/amdappsdk/assets/AMD_Accelerated_Parallel_Processing_OpenCL_Programming_Guide.pdf)中明确说明了**使用**多个 OpenCL 设备，所以我的回答是，是的，**当且仅当**您的调度算法足够智能以平衡整个事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:47:23.927

openCL 代码在运行时为所选设备（CPU、GPU 型号）编译

您可以切换用于不同任务的目标，但不能（使用我知道的任何实现）在 CPU 和 GPU 之间拆分相同的任务

# pdf - 如何通过命令行比较两个pdf文件

> ID：11004524
> 
> 赞同：10
> 
> 时间：2012-06-12T20:39:38.483
> 
> 标签：pdf, acrobat

有谁知道如何通过命令行使用 adobe acrobat 比较两个 pdf 文件。我想通过命令行来做到这一点，因为我们想通过一些自动化的 Windows 任务每天比较数百个文件。

任何形式的帮助都会很大。如果还有其他可用的东西，我不想将自己限制在 acrobat 中进行比较。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T08:23:35.023

[i-net PDFC](http://www.inetsoftware.de/other-products/pdf-content-comparer)怎么样- 它会进行完整的内容比较 - 文本、图像、线条、页眉/页脚检测等。您可以在命令行或 GUI（2.0，目前处于公共测试阶段）中使用它。

命令行工具已经可以选择将文件夹与 PDF 相互比较（或极端方式：使用 API ;)）

免责声明：是的，我为制作这个的公司工作 - 因此非常感谢您的反馈。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T21:51:44.723

查看[comparepdf](http://www.qtrac.plus.com/comparepdf.html)：

> comparepdf 是一个用于比较两个 PDF 文件的命令行工具。默认情况下，它会比较它们的文本，但它也可以直观地比较它们（例如，检测图表、图像、字体和布局的变化）。它应该被证明对自动化测试很有用。

它是开源 (GPL) 并且有可用的[Windows 二进制文件](http://soft.rubypdf.com/software/diffpdf/comparepdf-windows-static-version)。

还：

> 如果您想要一个显示 PDF 之间详细差异的 GUI 应用程序，请改用[DiffPDF](http://www.qtrac.eu/diffpdf.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T21:44:41.717

您想要的根本无法通过命令行使用 Adob​​e Acrobat 完成。但是，您*可以*借助一些命令行实用程序来完成此操作，您可以将这些实用程序合并到一个 shell 或批处理脚本中。

## 1.快速视觉检查页面图像差异

其中一个成分是 ImageMagick 的`convert`命令，您可以像这样对两个页面内容相似的 1 页 PDF 文件进行测试：

```
convert -label '%f' -density '100' first.pdf second.pdf -scale '100%' miff:- \
 | montage - -geometry +0+0 -tile 1x1 -background white miff:- \
 | animate -delay '50' -dispose background -loop 0 - 
```

这将打开一个窗口，在显示两个文件之间以 50 dezi 秒的延迟切换，因此很容易发现视觉差异。

## 2\. 生成 PDF 输出的脚本，可视化 PDF 文件之间的差异

我在 Linux 上使用 shell 脚本做同样的事情

1.  ImageMagick 的`compare`命令
2.  实用`pdftk`程序
3.  鬼脚本（可选）

`.bat`（将其移植到DOS/Windows 的批处理文件会相当容易。）

您可以[**在此答案中阅读有关此方法的详细信息**](https://stackoverflow.com/a/4675060/359307)。

# c# - RavenDB：将数据库中的文档与来自外部源的数据同步

> ID：11004526
> 
> 赞同：1
> 
> 时间：2012-06-12T20:39:52.090
> 
> 标签：c#, sync, ravendb, data-synchronization

在 RavenDB 中同步文档的**最有效方法是什么？**

从外部来源，我得到了一个`IEnumerable`我想要执行以下操作的 BlogPosts：

*   向 RavenDB 添加新对象
*   更新现有对象
*   移除在外部源中移除的对象

需要实现的代码：

```
public void SyncIntoRaven(IEnumerable<BlogPost> postsToSync, IDocumentStore store) {
    // TODO: Implement
    // AddNewItems(postsToSync);

    // TODO: Implement
    // RemoveDeletedItems(postsToSync);

    // TODO: Implement
    // UpdateExistingItems(postsToSync);
} 
```

可以从 RavenDB 中提取所有 BlogPosts 并**在本地同步**，然后将所有更改推回，但我想**尽量减少到 RavenDB 的流量**。但也许这也不是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:57:00.653

在[synhershko](https://stackoverflow.com/a/11021144/2429)的描述形式的帮助下，我想通了并想分享代码，简化以显示概念。

```
private void RefreshBlogPosts(IDocumentSession session, IList<BlogPost> parsedPosts) {
    var parsedPostsIds = parsedPosts.Select(x => x.Id);
    var storePosts = session.Load<BlogPost>(parsedPostsIds);

    // Update existing or create new posts
    for(int i = 0; i < storePosts.Count(); i++) {
        var parsedPost = parsedPosts[i];

        var storePost = storePosts[i];
        if(storePost == null) {
            storePost = parsedPost;

            session.Store(storePost);
        } else {
            // Update post's properties
        }
    }

    // Find posts IDs no longer in database
    var removedPostIds = session.Query<BlogPost>().Select(x => x.Id)
        .Where(postId => !parsedPostsIds.Contains(postId));

    foreach(var removedPostId in removedPostIds) {
        session.Advanced.Defer(new DeleteCommandData() { Key = removedPostId });
    }

    session.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:31:32.043

如果您在外部源和 RavenDB 之间共享相同的 ID，您可以很容易地以 ACID 方式在一个事务中完成此操作。

跟踪在同步操作之间更改的 ID，一旦您拥有该 ID 列表，您就可以轻松地执行此操作：

打开一个会话，使用 session.Store() 添加新文档，使用 session.Load(string[]) session.Load().Lazily 加载所有需要更新或删除的文档，使用 Deferred 选项进行更新（和删除)，一旦你完成调用 session.SaveChanges()。

这应该让你得到覆盖，并且只发生在服务器的一次往返中。

无论哪种方式，您都不想每次都进行完全同步。你总是想使用增量。

# r - 更改 path.expand 位置（Win 7）

> ID：11004531
> 
> 赞同：13
> 
> 时间：2012-06-12T20:40:09.170
> 
> 标签：r

目前：

```
path.expand("~") 
```

给出：

```
"C:\\Users\\trinker\\Documents" 
```

我希望它产生：

```
"C:\\Users\\trinker" 
```

windows 命令提示符的目录是`C:\Users\trinker`. 这表明这是我的 Windows 主目录。

`?path.expand`告诉我看看 rw-FAQ [(LINK)](http://cran.r-project.org/bin/windows/base/rw-FAQ.html#What-are-HOME-and-working-directories_003f)。这提供了超出我认知能力的信息。我决定尝试如下实验：

```
> Sys.getenv("R_USER")
[1] "C:\\Users\\trinker\\Documents"
> normalizePath("~")
[1] "C:\\Users\\trinker\\Documents"

> Sys.getenv("R_USER") <- "C:\\Users\\trinker"
Error in Sys.getenv("R_USER") <- "C:\\Users\\trinker" : 
  target of assignment expands to non-language object
> normalizePath("~") <- "C:\\Users\\trinker"
Error in normalizePath("~") <- "C:\\Users\\trinker" : 
  target of assignment expands to non-language object 
```

我看见：

```
Sys.setenv(...)
Sys.unsetenv(x) 
```

但是害怕我在弄乱我不应该盲目弄乱的东西，并决定寻求指导。

因此，我想再次`~`表达意思`C:\\Users\\trinker\\`（这是我最后一台 PC 的默认设置），而不是`C:\\Users\\trinker\\Documents`现在。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T21:05:40.237

要为所有用户永久重置`"~"`解析到的目录，请将以下内容放入`Renviron.site`位于的文件中`$RHOME/etc/Renviron.site`：

```
R_USER="C:/Users/trinker" 
```

（如果该文件不存在，您可以自己创建它。）

* * *

如果一台计算机支持多个 R 用户，并且每个人都想设置自己的`R_USER`位置，则每个人都可以将以下内容放入自己的`".Rprofile"`文件中：

```
Sys.setenv(R_USER = "C:/Users/trinker") 
```

`".Rprofile"`在用户的主目录中查找，通过键入返回`Sys.getenv("HOME")`。`?Startup`有关更多详细信息，请参阅[R for Windows 常见问题解答](http://cran.r-project.org/bin/windows/base/rw-FAQ.html#What-are-HOME-and-working-directories_003f)。

（感谢@Dason 指出该`.Rprofile`选项。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-18T21:55:28.227

另一种选择是更新用于启动新 R 会话的快捷方式中的“目标”字符串。为此，右键单击该图标，然后从上下文菜单中选择“属性”。选择对话框的“快捷方式”选项卡，并将以下名称/值对之一添加到该`target`字段。

```
R_USER="c:\my\favorite\folder"
R_USER="%USERPROFILE%" 
```

现在`path.expand("~")`将扩展为`c:\my\favorite\folder`或`c:\users\my name\`。

一些笔记。

*   这也将改变 R 查找用户文件的位置，例如`.Rprofile`、`Rconsole`和用户包库。
*   如果您已将 R 固定到任务栏，则需要右键单击任务栏图标以找到从任务栏启动 R 的快捷方式图标（如下图所示）：

[![在此处输入图像描述](../Images/758eace10546ff5ab3dfff062bce72d4.png)](https://i.stack.imgur.com/bB1hR.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-27T10:00:55.053

我们的系统管理员以这样一种方式设置系统，即 path.expand("~") 或 normalizePath("~") 始终指向映射驱动器 (\...)。在 path.expand("~") 指向的文件夹中创建一个“.Renviron”文件，内容如下解决了我的问题:)

```
R_USER="C:/Users/animeshs"
HOME="C:/Users/animeshs" 
```

所以现在

> path.expand("~")

[1] “C:/用户/动画”

# javascript - 编辑 Javascript 以正确对齐

> ID：11004533
> 
> 赞同：0
> 
> 时间：2012-06-12T20:40:18.190
> 
> 标签：javascript, jquery, wordpress, infinite-scroll

我正在使用无限滚动来拉出新帖子。为了确保帖子在 3 列而不是 1 列中出现，我在获取下一个帖子后调用 Javascript：

```
jQuery(newElements).makeacolumnlists({
      cols: 3, 
      colWidth: 305, 
      equalHeight: 'ul', 
      startN: 1
}); 
```

为了使获取的帖子与顶部的其他帖子正确对齐，我需要更改什么？顶部的帖子是堆叠的 li 元素，插件是堆叠的 div。有任何解决这个问题的方法吗？

我的网站是（已删除）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:46:49.663

问题是新帖子在 a 内`<div id="li_container2" class=li_container>`（它本身在 li_container1 内），这就是为什么它有两倍的边距。只需在旧容器外添加新 div 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:47:21.227

```
.li_container {padding-left: 0px} 
```

应该可以解决您的问题。这会将所有帖子向右移动 25px，

```
#li_container1 {margin-left: 25px} 
```

# ftp - CentOS 6.2 监禁 sftp 帐号

> ID：11004534
> 
> 赞同：1
> 
> 时间：2012-06-12T20:40:19.027
> 
> 标签：ftp, centos, sftp

我的任务是设置一个centOS 6.2 开发箱（即使我不知道linux），目前正在使用vsftpd 将FTP 传输到一个工作箱中。问题是 sftp 不起作用。

> 身份验证失败。错误：严重错误错误：无法连接到服务器

这是我得到的错误。

我通过执行以下操作添加了用户：

```
sudo useradd -d /var/www/PATH -s /usr/sbin/nologin USERNAME
sudo passwd USERNAME

sudo chown -R USERNAME /var/www/ PATH 
sudo chmod 755 /var/www/PATH 
```

它适用于 ftp（并且文件夹结构被监禁）但不适用于 sftp。

但是，当我通过以下方式添加用户时：

```
sudo useradd USERNAME
sudo passwd USERNAME
sudo chown –R USERNAME /opt/USERNAME
sudo chmod 777 /opt/USERNAME 
```

我没有越狱的 sftp 访问权限，也没有 FTP 访问权限。

如果我必须创建多个帐户（一个用于 ftp，一个用于 sftp）并不重要，它们必须被监禁到目录中。

如果我的问题有更好的解决方案，欢迎提供帮助！

谢谢，

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:47:00.343

你走的很好。

我个人正在使用此处描述的 sftp 用户的 chrooting：[http ://www.thegeekstuff.com/2012/03/chroot-sftp-setup/](http://www.thegeekstuff.com/2012/03/chroot-sftp-setup/)

恕我直言，文章中没有足够强调用户的主目录必须由 root 拥有

```
 # ls -ld /var/www/PATH
    drwxr-xr-x 3 root root 4096 Dec 28 23:49 /var/www/PATH 
```

您可以从日志中获得很多有用的信息，这种情况下您可以搜索

```
 tail -f /var/log/secure 
```

从外部主机连接时。

如果您对这个问题有更多帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-22T15:23:35.297

我为此目的创建了一个脚本，您可以使用任何您使用的发行版，它适用于基于 RHEL 的和 Deb 的，以及创建一个没有 shell 访问权限的、只有 SFTP 的监禁 SFTP 目录。

[没有外壳访问的 SFTP 监狱](https://github.com/Laith-Alobaidy/-NIX/blob/master/SFTP%20Jailing)

# php - 给出奇怪的错误信息

> ID：11004535
> 
> 赞同：-1
> 
> 时间：2012-06-12T20:40:19.420
> 
> 标签：php, codeigniter

我知道错误消息不言自明，但我只是在理解它时遇到了问题。是否有人可以向我解释为什么我可能会收到这样的消息。

```
<b>Fatal error</b>:  Call to private method Users_model::insert_session() from context 'Auth' in   
<b>/home/xtremer/public_html/kowmanager/application/libraries/auth.php</b> on line <b>281</b><br /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:45:13.460

看起来您试图访问类之外的私有方法。如果您想`insert_session`从课堂外打电话，请将其公开。更详细的信息： http: [//php.net/manual/en/language.oop5.visibility.php](http://php.net/manual/en/language.oop5.visibility.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:44:38.793

您可以在第 281 行发布您的代码和方法`insert_session()`吗？

如果我第一眼看到它，您正在调用一个不在范围内`private`的类的方法。尝试定义为并查看您的错误是否仍然存在。`Auth``private``insert_session()``protected`

# c# - 在 JSON.NET 中反序列化数组

> ID：11004536
> 
> 赞同：1
> 
> 时间：2012-06-12T20:40:19.640
> 
> 标签：c#, .net, json, serialization, json.net

我有一个 JSON 输出，需要将其反序列化为 .NET 对象：

```
{   "title": "Stock data",
    "raw_data": [
    [
      1088553600000,
      1.3635
    ],
    [
      1091232000000,
      1.3538
    ],
    [
      1093910400000,
      1.3563
    ]]
} 
```

如果我使用 JsonConvert，我应该如何构建我的类以使反序列化有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:51:28.933

如果 raw_data 的类型都是双精度的，那么是这样的：

```
public class MyClass
{
    public string title { get; set; }
    public List<List<double>> raw_data { get; set; }
} 
```

您可能想查看的酷网站：http: [//json2csharp.com/](http://json2csharp.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:50:10.500

对不起，我原来的答案毫无价值，这是一个更好的答案。

您可能遇到了麻烦，因为您将这些类型视为整数和双精度值（对于 C# 程序员来说很自然），但是 Json 对这些类型一无所知，并且仅将数字表示为小数。

正如另一个答案所说，您可以简单地反序列化为双打列表。有趣的是，可以选择将其转换为更自然的表示。

但是，我不建议这样做，因为它在反序列化时并不完全是类型安全的（转换为十进制时原始元素的类型会丢失，您只能假设这种方式可行）！

```
public class BarArrayConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        // Not properly implemented!
        return true;
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        List<Bar> bars = new List<Bar>();

        // Read the first token after the start array
        reader.Read();

        // Parse elements of the array
        while (reader.TokenType == JsonToken.StartArray)
        {
            Bar b = new Bar();

            // Convert these as necessary to your internal structure. Note that they are nullable types.
            b.First = reader.ReadAsDecimal();
            b.Second = reader.ReadAsDecimal();

            // Read end array for this element
            reader.Read();
            // Pull off next array in list, or end of list
            reader.Read();

            bars.Add(b);
        }

        return bars;
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }
}

class Bar
{
    public decimal? First;
    public decimal? Second;
}

class Foo
{
    [JsonProperty("title")]
    public string Title { get; set; }

    [JsonConverter(typeof(BarArrayConverter))]
    [JsonProperty("raw_data")]
    public List<Bar> RawData { get; set; }
} 
```

使用十进制类型几乎肯定更明智。我能看到这样做的唯一原因是，如果需要将第一个值保留为整数，这将是一种以更自然的方式限制变量值的方法。

# php - 在我的 sidebar.php 文件中将西里尔文编码为 UTF-8 站点中断

> ID：11004539
> 
> 赞同：2
> 
> 时间：2012-06-12T20:40:29.687
> 
> 标签：php, html, css, wordpress

在搜索了我的 Wordpress 主题文件 4 小时后，我才给你写信，我终于找到了侧边栏移到最左边的原因。

似乎当我的 sidebar.php 文件以 UTF-8 编码并且带有西里尔文本时，它会由于某种原因而被取代。但是当使用相同的文本时，它以 ANSI 编码，文本出现乱码，但侧边栏保持在其位置。

您能否帮助我最终推动解决如何将可读的西里尔文本和侧边栏放在正确位置的解决方案。

非常感谢！

如果您想查看带有西里尔字母的侧边栏代码，这里是一个 pastebin 链接。

[http://pastebin.com/1LEgrKDa](http://pastebin.com/1LEgrKDa)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:13:38.363

那篇文章“[关于编码的一点点](http://www.art-coder.com/2010/06/20/little-bit-about-encoding/)”应该可以帮助您解决问题。

# android - 电子邮件未发送 | 使用适用于 Android 的 JavaMail API

> ID：11004541
> 
> 赞同：0
> 
> 时间：2012-06-12T20:40:45.500
> 
> 标签：android, jakarta-mail

我正在使用 JavaMail APi 发送电子邮件，而我的 android 应用程序没有意图。我正在关注这个问题： [使用 JavaMail API 在 Android 中发送电子邮件而不使用默认/内置应用程序](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

和

[http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_(no_Intents)_in_Android](http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_(no_Intents)_in_Android)

这是我的代码。在按钮上单击以下是代码：

```
 public void onClick(View v){
    Runnable runnable = new Runnable(){

                @Override
                public void run() {
                    Mail m = new Mail("MY Gmail Address", "My password"); 

                      String[] toArr = {"sender@gmail.com"}; 
                      m.setTo(toArr); 
                      m.setFrom("wooo@wooo.com"); 
                      m.setSubject("This is an email sent using my Mail JavaMail wrapper from an Android device."); 
                      m.setBody("Email body."); 

                      try { 
                        m.addAttachment("/sdcard/filelocation"); 

                        if(m.send()) { 
                          Toast.makeText(MyActivity.this, "Email was sent successfully.", Toast.LENGTH_LONG).show(); 
                        } else { 
                          Toast.makeText(MyActivity.this, "Email was not sent.", Toast.LENGTH_LONG).show(); 
                        } 
                      } catch(Exception e) { 
                        //Toast.makeText(MailApp.this, "There was a problem sending the email.", Toast.LENGTH_LONG).show(); 
                        Log.e("MailApp", "Could not send email", e); 
                      } 

                }

            };
            new Thread(runnable).start();
} 
```

课程如下：

公共类邮件 { 私人字符串 _user; 私有字符串_pass；

```
 private String _to; 
      private String _from; 

      private String _port; 
      private String _sport; 

      private String _host; 

      private String _subject; 
      private String _body; 

      private boolean _auth; 

      private boolean _debuggable; 

      private Multipart _multipart; 

      public Mail() { 
        _host = "smtp.gmail.com"; // default smtp server 
        _port = "465"; // default smtp port 
        _sport = "465"; // default socketfactory port 

        _user = "My mail id"; // username 
        _pass = "My Password"; // password 
        _from = ""; // email sent from 
        _subject = "Hi"; // email subject 
        _body = "how are you"; // email body 

        _debuggable = false; // debug mode on or off - default off 
        _auth = true; // smtp authentication - default on 

        _multipart = new MimeMultipart(); 

        // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. 
        MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
        mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"); 
        mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"); 
        mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"); 
        mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"); 
        mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"); 
        CommandMap.setDefaultCommandMap(mc); 
      } 

      public void setFrom(String string) {
        // TODO Auto-generated method stub
          _from="from email address";

    }

    public void setSubject(String string) {
        // TODO Auto-generated method stub
        _subject="Hi";
    }

    public void setTo(String[] toArr) {
        // TODO Auto-generated method stub
        _to = "to email address";
    }

    public Mail(String user, String pass) { 
        this(); 

        _user = user; 
        _pass = pass; 
      } 

      public boolean send() throws Exception { 
        Properties props = _setProperties(); 

        if(!_user.equals("") && !_pass.equals("") && !_from.equals("") && !_subject.equals("") && !_body.equals("")) { 
          Session session = Session.getInstance(props); 

          MimeMessage msg = new MimeMessage(session); 

          msg.setFrom(new InternetAddress(_from)); 

          //InternetAddress[] addressTo = new InternetAddress[_to.toString()]; 
          /*for (int i = 0; i < _to.length; i++) { 
            addressTo[i] = new InternetAddress(_to[i]); 
          }*/ 
            msg.setRecipient(MimeMessage.RecipientType.TO, new InternetAddress(_to)); 

          msg.setSubject(_subject); 

          // setup message body 
          BodyPart messageBodyPart = new MimeBodyPart(); 
          messageBodyPart.setText(_body); 
          _multipart.addBodyPart(messageBodyPart); 

          // Put parts in message 
          msg.setContent(_multipart); 

          // send email 
          Transport.send(msg); 

          return true; 
        } else { 
          return false; 
        } 
      } 

      public void addAttachment(String filename) throws Exception { 
        BodyPart messageBodyPart = new MimeBodyPart(); 
        DataSource source = new FileDataSource(filename); 
        messageBodyPart.setDataHandler(new DataHandler(source)); 
        messageBodyPart.setFileName(filename); 

        _multipart.addBodyPart(messageBodyPart); 
      } 

      public PasswordAuthentication getPasswordAuthentication() { 
        return new PasswordAuthentication(_user, _pass); 
      } 

      private Properties _setProperties() { 
        Properties props = new Properties(); 

        props.put("mail.smtp.host", _host); 

        if(_debuggable) { 
          props.put("mail.debug", "true"); 
        } 

        if(_auth) { 
          props.put("mail.smtp.auth", "true"); 
        } 

        props.put("mail.smtp.port", _port); 
        props.put("mail.smtp.socketFactory.port", _sport); 
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory"); 
        props.put("mail.smtp.socketFactory.fallback", "false"); 

        return props; 
      } 

      // the getters and setters 
      public String getBody() { 
        return _body; 
      } 

      public void setBody(String _body) { 
        this._body = _body; 
      } 
```

当我单击我的 android 设备上的按钮时，它给了我以下错误：

```
06-12 13:26:42.523: E/MailApp(8579): Could not send email
06-12 13:26:42.523: E/MailApp(8579): java.lang.NullPointerException
06-12 13:26:42.523: E/MailApp(8579):    at com.MyApp.MyActivity$Mail.send(MyActivity.java:280)
06-12 13:26:42.523: E/MailApp(8579):    at com.MyApp.MActivity$1.run(MActivity.java:146)
06-12 13:26:42.523: E/MailApp(8579):    at java.lang.Thread.run(Thread.java:1019) 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:40:33.133

你班的第 280 行是哪一行？它应该在您的 Mail.send() 函数中。这就是空指针所在的位置。知道那是什么会很有帮助。

看起来 _to 从未初始化过......

哈哈，不用担心，我花了几个月的时间才从 javamail 中得到一个可以工作的电子邮件客户端。当您创建会话时，您应该向它传递一个身份验证对象。

```
SMTPAuthenticator auth = new SMTPAuthenticator();
session = Session.getDefaultInstance(props,auth);

private class SMTPAuthenticator extends javax.mail.Authenticator {
        public PasswordAuthentication getPasswordAuthentication() {
           String username = "your_username";
           String password = "your_password";
           return new PasswordAuthentication(username, password);
        }
    } 
```

# php - 在测验中使用 PHP 会话

> ID：11004547
> 
> 赞同：0
> 
> 时间：2012-06-12T20:41:26.187
> 
> 标签：php, forms, session

我做了一个是/否测验，游戏试图根据这些问题猜测你在想什么生物，只有 16 个可能的答案。

我想要做的是，如果用户在测验中途关闭网站，那么当他们返回测验时，他们会回答他们离开的同一个问题。以下是我到目前为止所做的，但它不能正常工作（请自己查看[http://s504518.brunelweb.net/Creatures.php](http://s504518.brunelweb.net/Creatures.php)）您必须对第一个问题回答“是”，然后像我一样关闭浏览器到目前为止，仅针对该问题进行了一次会议。这是我到目前为止所做的一部分

```
//These are used for saving the session
 $q2 = "<div class='questions'><p>{$questions[0][0]}</p></div>";
 $q3 = "<div class='questions'><p>{$questions[0][1]}</p></div>";

 $f2 = "<div class='questions'><form method ='GET' action='Creatures.php'>
     <input type='submit' name='answer1' value='Yes' class='buttons' />
     <input type='submit' name='answer1' value='No' class='buttons' />
     </form></div>";
 $f3 = "<div class='questions'><form method ='GET' action='Creatures.php'>
     <input type='submit' name='answer2' value='Yes' class='buttons' />
     <input type='submit' name='answer2' value='No' class='buttons' />
     </form></div>";

//If start button has not been pressed, display nothing
if (!isset($_POST['start'])){

} //If start button has been pressed, display questions
else
{
//Display the first question
echo $firstquestion;
     echo "<div class='questions'><form method ='GET' action='Creatures.php'>
     <input type='submit' name='yes1' value='Yes' class='buttons' />
     <input type='submit' name='no1' value='No' class='buttons' />
     </form></div>";
}
//Question 2
if (isset($_SESSION['form']))
{
echo $_SESSION['question'];
echo $_SESSION['form'];
}
else{
if ($_GET['yes1']) //If answer to Q1 is yes then display this
{
echo "<div class='questions'><p>{$questions[0][0]}</p></div>";
showquestion(1);
$_SESSION['question'] = $q2;
$_SESSION['form'] = $f2;
}
} 
```

我在这里想要实现的是，如果已经设置了会话，则显示该会话中的问题和表单，并且在他们单击开始按钮之前它没有显示任何内容。我不确定为什么它不能正常工作，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:47:36.453

您需要使用 session_start() 创建一个会话，将其放入 php 的第一行：

```
session_start(); 
```

正如 php.net 告诉我的，它还将使用已经生成的会话。在开始会话之前请确保您没有 html 输出

# regex - VBA Excel：读取文件，并在一列中存储图像

> ID：11004549
> 
> 赞同：0
> 
> 时间：2012-06-12T20:41:32.977
> 
> 标签：regex, image, parsing, vba, directory

我是 VBA 新手（我的意思是，真的很新），我希望你能给我一些提示。

我有一个包含 2 列的 Excel 文件：SKU 和 media_gallery 我还有一个文件夹中存储的图像（让我们将其命名为 /imageFolder）

我需要解析 imageFolder 并查找以 SKU.jpg 开头的所有图像，并将它们放入以分号 (;) 分隔的 media_gallery 列中

示例：我的 SKU 是“1001”，我需要解析以 1001 开头的所有图像的图像文件夹（所有图像都有这种模式：1001-2.jpg、1001-3.jpg 等...）

我可以用 Java 或 C# 做到这一点，但我想给 VBA 一个机会。:)

我怎样才能做到这一点？

编辑：我只需要文件名是的！我应该说我的文件夹中有 20 000 张图片和 8000 个 SKU，所以我不知道我们如何处理 20 000 张图片名称的循环。

EDIT2：如果SKU包含破折号（ - ），我不需要处理它，所以我可以传递到下一个SKU。每个 SKU 最多有 5 张图片 (....;SKU-5.jpg)

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:56:49.303

如何在给定列中每个单元格有一个图像名称的情况下插入图像：[How to get images to appear in Excel given image url](https://stackoverflow.com/questions/6312710/how-to-get-images-to-appear-in-excel-given-image-url)

采取上述方法并为文件名引入一个内部循环：

```
if instr(url_column.Cells(i).Value, "-") = 0 then

  dim cur_file_name as string
  cur_file_name = dir("imageFolder\" & url_column.Cells(i).Value & "*.jpg")

  do until len(cur_file_name) = 0
    image_column.Cells(i).Value = image_column.Cells(i).Value & cur_file_name & ";"      
    cur_file_name = Dir
  loop
end if 
```

# vim - 将宏操作包装在函数中的好方法是什么？

> ID：11004551
> 
> 赞同：0
> 
> 时间：2012-06-12T20:41:36.420
> 
> 标签：vim

> **可能重复：**
> [保存 vim 宏](https://stackoverflow.com/questions/2024443/saving-vim-macros)

我总是跨行使用宏，它们是救命稻草。但最近，我开始使用它们来做一些更复杂的文件操作，我想将它们记录到一个函数中，或者以某种方式在 Vim 会话中使用它们，这样我就不必每次都重新记录它们我退出 Vim 的时间。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:01:22.237

Vim 宏实际上只是保存在寄存器中的文本，并且由于寄存器是跨会话保存的 - 您的宏会自动保存。

但是，在我看来，宏背后的整个想法是您可以快速创建它们，使用它们，然后丢弃它们。如果您想要更永久的东西，您应该努力编写自定义命令或键盘映射 - 如果这是一个复杂的宏，您应该用适当的 vimscript（或任何其他脚本语言 vim 支持）为它编写一个函数。

如果您要经常使用它，您希望能够不时对其进行更改和修复-但这在宏中很难做到，因为它们是代表击键的文本字符串-而不是命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T05:46:15.773

```
function! MyMacro()
   normal "paste your macro here
endfunction 
```

但我同意 Idan Arye 的观点：使其成为用 vimscript 编写的适当函数可能是一个更好的解决方案。

# javascript - Javascript OnClick 更改各种元素链接颜色

> ID：11004552
> 
> 赞同：0
> 
> 时间：2012-06-12T20:41:43.647
> 
> 标签：javascript, html, css

我希望在单击其他链接时更改它们的链接。例如，如果用户单击 AZ，它将更改 0-9 的颜色。

```
<a href="" id="list_users_title" onclick="document.getElementById('oneline a').style.color = '#414042'; document.getElementById('list_users_title a').style.color = '#B91200';">A-Z</a>
<a href="" id="oneline" onclick="document.getElementById('oneline a').style.color = '#B91200'; document.getElementById('list_users_title a').style.color = '#414042';">0-9</a> 
```

我可以用颜色来做到这一点，但这会覆盖我仍然想使用的 a:hover。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:11:29.853

您的问题是，在 javascript 的帮助下，您正在将内联 css 添加到`a`标签中。内联 css 比 in`style`标记具有更高的优先级。

这里的解决方案 -

```
<div id='style'></div>

<a href="" id="list_users_title" onclick="document.getElementById('style').innerHTML = '<style>ADD CSS HERE</style>';">A-Z</a> 
```

这不会添加内联 CSS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:02:35.390

使用时，`getElementById`您应该传入所需元素的*id*。所以做这样的事情`document.getElementById('oneline')`而不是`document.getElementById('oneline a')`.

编辑

如果您不想覆盖样式，请使用 onclick 事件向元素添加一个类（例如“clicked-by-oneline”），而不是直接应用样式。然后使用样式表定义一些规则，如下所示：

```
#oneline.clicked-by-oneline { color: #414042; }
#list_users_title.clicked-by-oneline { color: #B91200; } 
```

使用级联来准确控制这些样式覆盖将如何交互。

# ios - 围绕代码签名的应用程序验证错误，errUnknownFormat

> ID：11004553
> 
> 赞同：1
> 
> 时间：2012-06-12T20:41:43.660
> 
> 标签：ios, xcode

当我在我刚刚建立的存档的管理器中点击“验证”时，代码设计失败。供应配置文件与应用标识符匹配并且用于应用停止（非临时）。存档正确构建。我已经在项目和目标这两个地方下载并选择了正确的配置文件。

在控制台中我看到：

```
6/12/12 3:43:08.720 PM Xcode: SecCertificateCopyCommonName returned -25257 
```

和

```
6/12/12 3:37:18.600 PM Xcode: SecIdentityCopyCertificate returned -25257 
```

仔细阅读源代码，我看到 -25257 指的是 errUnknownFormat。这些调用前面的“Sec”是安全基础代码，因此实际上似乎是代码签名不起作用。

这发生在 XCode 4.3.2 中，我刚刚升级到 4.3.3，它仍在发生。我正在下载 4.2.1 看看它是否在那里发生。

此外，我还在控制台中看到了这一点：

```
6/12/12 3:37:55.893 PM Xcode: /Users/jobelenus/Library/Developer/Xcode/Archives/2012-06-12/Freedom 6-12-12 3.28 PM.xcarchive/Products/Applications/Freedom.app/www/project-assets/627/2011/06: Is a directory 
```

通过搜索（主要是在 SO 上），“是目录”问题与 XCode 4.3 中的一个错误有关，其中子/父目录具有相同的名称。从上面的错误你可以看出这是不正确的。应用程序中没有其他目录具有 2011、06 或 627，在任何树中。没有重复项。

# ruby-on-rails - 在 Rails 3.1 中使用 Rspec 和 Factory girl 测试嵌套资源控制器

> ID：11004554
> 
> 赞同：2
> 
> 时间：2012-06-12T20:41:50.400
> 
> 标签：ruby-on-rails, rspec, factory-bot

我在用户下有一个嵌套资源专业。

我的**routes.rb**看起来像

```
 resources :users do
     resources :specialties do
     end
  end 
```

我的**factory.rb**看起来像

```
Factory.define :user do |f|
  f.description { Populator.sentences(1..3) }
  f.experience { Populator.sentences(1..5) }
  f.tag_list { create_tags }
end

Factory.define :specialty do |f|
  f.association :user
  specialties = CategoryType.valuesForTest
  f.sequence(:category) { |i| specialties[i%specialties.length] }
  f.description { Populator.sentences(1..5) }
  f.rate 150.0
  f.position { Populator.sentences(1) }
  f.company { Populator.sentences(1) }
  f.tag_list { create_tags }
end 
```

我的**Specialties_controller.rb**看起来像

```
class SpecialtiesController < ApplicationController

def index
    @user = User.find(params[:user_id])
    @specialties = @user.specialties
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @specialties }
    end
  end 
```

我的**specialties_controller_spec.rb**看起来像

```
require 'spec_helper'

describe SpecialtiesController do
  render_views

  describe "GET 'index'" do
    before do
      @user = Factory.create(:user)
      @specialty = Factory.create(:specialty, :user => @user)
      @user.stub!(:specialty).and_return(@specialty)
      User.stub!(:find).and_return(@user)
    end

    def do_get
      get :index, :user_id => @user.id
    end

    it "should render index template" do
      do_get
      response.should render_template('index')
    end

    it "should find user with params[:user_id]" do
      User.should_receive(:find).with(@user.id.to_s).and_return(@user)
      do_get
    end

    it "should get user's specialties" do
       @user.should_receive(:specialty).and_return(@specialty)
       do_get
    end
   end
 end 
```

前两个测试通过，但最后一个测试失败并显示错误消息

```
Failure/Error: @user.should_receive(:specialty).and_return(@specialty)
       (#<User:0x007fe4913296a0>).specialty(any args)
           expected: 1 time
           received: 0 times 
```

有谁知道这个错误意味着什么以及如何解决它？我查看了类似的帖子，但在我的代码中找不到错误。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:13:15.410

```
@user.should_receive(:specialty).and_return(@specialty) 
```

`specialty`是一对多关系，应该是复数：`specialties`. 实际上，您的控制器中有：

```
@specialties = @user.specialties 
```

# python - 如何在“更高或更低”游戏中正确使用随机数。我只是一个初学者

> ID：11004558
> 
> 赞同：0
> 
> 时间：2012-06-12T20:42:04.207
> 
> 标签：python, random, input, if-statement

这是代码：

```
from random import *
numbers = ['0','1','2','3','4','5','6','7','8','9','10']
r1 = choice (numbers)
r2 = choice (numbers)
print("H = HIGHER ,, L = LOWER ,, S = SAME")
print(r1)
a = input()
print(r2)
if r2 == r1 and a == 's':
     print("well done")
if r2 < r1 and a == 'l':
     print("well done")
if r2 > r1 and a == 'h':
     print("well done")
else:
     print("unlucky") 
```

问题是脚本的最后一部分。除了在 print(r2) 之后的脚本末尾之外，一切都运行良好。一切正常，但答案不断在“做得好”和“不走运”之间切换。有时两者都说。有谁知道问题是什么？我假设发生这种情况的原因很简单，因为它是随机的，并且第一个输出（r1）随着我们沿着脚本移动而改变。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:46:33.860

`if`将最后两个s更改为`elif`s（elif 表示 else-if）：

```
if r2 == r1 and a == 's':
     print("well done")

elif r2 < r1 and a == 'l':
     print("well done")

elif r2 > r1 and a == 'h':
     print("well done")

else:
     print("unlucky") 
```

现在“不幸”应该只在没有满足其他条件的情况下打印。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T20:54:33.173

这是您的程序的功能齐全的版本：

```
from random import choice

numbers = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10']

r1 = choice(numbers)
r2 = choice(numbers)

print("h = HIGHER ,, l = LOWER ,, s = SAME")
print(r1)
a = raw_input()
print(r2)

if r2 == r1 and a == 's':
    print("well done")
elif r2 < r1 and a == 'l':
    print("well done")
elif r2 > r1 and a == 'h':
    print("well done")
else:
    print("unlucky") 
```

我让它对[PEP8](http://www.python.org/dev/peps/pep-0008/)更友好。此外，您应该显示 h、l 和 s... 而不是 H、L 和 S，因为您的比较器`a`使用小写字母。要么，要么改变输入值的大小写。此外，使用`raw_input`而不是常规`input`.

正如@Blorgbeard 提到的，如果您希望每次都选择相同的随机数，请在调用之前添加它`choice`

```
import random 
random.seed(1) 
```

# hibernate - 为什么我的 DAO 中会出现此 NullPointerException？

> ID：11004562
> 
> 赞同：0
> 
> 时间：2012-06-12T20:42:12.497
> 
> 标签：hibernate, maven, struts2

我正在做一个项目，我已经将 Struts 2 与 Maven 3 和 Tiles 一起使用。现在我想使用一个数据库，但我遇到了 Hibernate 和 Struts 2 的问题。

我遵循了本教程：[http](http://www.mkyong.com/struts2/struts-2-hibernate-integration-with-full-hibernate-plugin/) ://www.mkyong.com/struts2/struts-2-hibernate-integration-with-full-hibernate-plugin/我有这个错误：

> java.lang.NullPointerException
> 
> ```
> com.facilityrh.dao.FormationDAOImpl.list(FormationDAOImpl.java:23)
> com.facilityrh.action.FormationAction.list(FormationAction.java:29)
> sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
> java.lang.reflect.Method.invoke(Method.java:601)
> com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
> com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
> org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
> com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
> org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
> com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
> com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
> com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
> com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
> org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
> org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
> org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
> org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
> org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
> org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
> org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
> org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
> org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
> org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
> org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
> org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
> org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
> java.lang.Thread.run(Thread.java:722) 
> ```

我通过 Formation 更改了 Customer，并在数据库中创建了一个带有 id 和名称的表。

这是使用的不同文件的链接（在 ftp 上，否则帖子会太长）： [http ://dev.aurelienpraga.com/stackoverflow/rh-client/](http://dev.aurelienpraga.com/stackoverflow/rh-client/)

我用注释 Hibernate 和没有 Maven 制作了另一个教程，它工作正常，但是当我尝试使用 Maven 时，我有同样的错误。

问题出在哪里 ？

还有使用 .hbm.xml 文件来描述表格和注释系统有什么区别？

# ruby-on-rails - Bundler 不会安装 mysql2

> ID：11004565
> 
> 赞同：4
> 
> 时间：2012-06-12T20:42:38.640
> 
> 标签：ruby-on-rails, gem, bundler

首先，我已经在 SO 和 google 上发布了几十个帖子，但一直找不到答案。我正在尝试使用捆绑程序安装 mysql2，但它不会这样做。

在**Ubuntu Server 11.04 Natty上运行**

以下是一些背景信息：

```
ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [x86_64-linux]

gem -v
1.8.24

rails -v
Rails 3.2.5

$ mysql --version
mysql  Ver 14.14 Distrib 5.1.62, for debian-linux-gnu (x86_64) using readline 6.2 
```

我的 Gemfile 中有 gem "mysql2", "~> 0.3.11"

当我进行**捆绑安装**时，它会通过该过程并成功完成（**无错误**），但它不会安装 mysql2。当我做**bundle show**时，没有列出 mysql2 。

我已经尝试了在这里和论坛上推荐的大量东西，但仍然无法使用捆绑器安装 mysql2。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T03:48:29.177

对于 mysql2，您需要在服务器上安装开发文件。

先试试：

```
sudo apt-get install libmysqlclient-dev 
```

然后首先在您的 RoR App 目录中检查您的 GemFile - 我的 GemFile 中有这一行：

```
gem 'mysql2', '0.3.11' 
```

运行捆绑：

```
bundle install 
```

或者先试试 Emily 的命令，然后运行 ​​bundle install：

```
gem install mysql2 -v=0.3.11
bundle install 
```

我希望它有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:53:25.550

因此，经过多次尝试、阅读和拉扯我的头发，我发现了问题所在，所以我将它发布给那些可能遇到相同情况的人。

bundler 不安装 mysql2 的原因是 gem 位于这个**平台**结构中，见下文：

```
platforms :mri_19, :mingw_19 do
  group :mysql do
    gem "mysql2", "0.3.11"
  end
end 
```

所以我所做的只是将 gem "mysql2", "0.3.11" 单独移动到 Gemfile 的顶部并运行**bundle install**就可以了！现在 mysql2 列在 bundle show 下，我的 rails 应用程序正在运行。

感谢每一位试图提供帮助的人！

# javascript - 需要 Jquery 文本动画自定义帮助

> ID：11004566
> 
> 赞同：0
> 
> 时间：2012-06-12T20:42:38.983
> 
> 标签：javascript, jquery, html

我有这个 jquery 滑动文本动画师。如果您查看示例（[http://blog.waiyanlin.net/2008/12/17/jquery-flying-text-with-fade-effect/](http://blog.waiyanlin.net/2008/12/17/jquery-flying-text-with-fade-effect/)），飞入的活动文本在完成后再次消失入口。我希望每个动画文本在出现后都留在那里并等到所有文本出现，然后所有文本都应该消失并重新启动。（所以基本上不是每个文本在飞入后消失，它应该只在最后一个文本之前保持可见元素已经出现，然后重新启动）

**JavaScript**：

```
<script type="text/javascript">
$(document).ready(function() {
    $('.container .flying-text').css({
        opacity: 0
    });
    $('.container .active-text').animate({
        opacity: 1,
        marginLeft: "250px"
    }, 4000);
    var int = setInterval(changeText, 5000);
    function changeText() {
        var $activeText = $(".container .active-text");
        var $nextText = $activeText.next();
        if ($activeText.next().length == 0) $nextText = $('.container .flying-text:first');
        $activeText.animate({
            opacity: 0
        }, 1000);
        $activeText.animate({
            marginLeft: "-100px"
        });
        $nextText.css({
            opacity: 0
        }).addClass('active-text').animate({
            opacity: 1,
            marginLeft: "250px"
        }, 3000, function() {
            $activeText.removeClass('active-text');
        });
    }
});​
</script> 
```

**CSS**

```
.container{

    width:500px;
    margin:0 auto;
    color:#FFF;
    overflow:hidden;
    }

    .flying-text{
    margin-left:-100px;
    color: #fff;
  } 
```

**HTML**

```
<div class="container">
    <div class="flying-text active-text">I believe</div>                        
    <div class="flying-text">I can</div>                        
    <div class="flying-text">Fly</div>                      
</div> 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:01:39.747

您需要移动每次运行的淡出代码。

```
function changeText() {

    var $activeText = $(".container .active-text");

    var $nextText = $activeText.next();
    if ($activeText.next().length == 0) {
        $nextText = $('.container .flying-text:first');

        // To fade all out _ MOVED FROM OUTSIDE THIS IF
        var $allText = $(".container div");
        $allText .animate({
            opacity: 0
        }, 1000);
        $allText .animate({
            marginLeft: "-100px"
        });
    }

    $nextText.css({
        opacity: 0
    }).addClass('active-text').animate({
        opacity: 1,
        marginLeft: "250px"
    }, 3000, function() {
        $activeText.removeClass('active-text');
    });
}​ 
```

这是一个[jsfiddle](http://jsfiddle.net/uBehg/1/)来说明。

**更新**
基于一些评论，我更新了[小提琴](http://jsfiddle.net/uBehg/4/)以展示如何使用 jQuery UI 效果。

# javascript - 如何替换包含 jquery 捕获的 html 的变量中出现的字符串？

> ID：11004571
> 
> 赞同：0
> 
> 时间：2012-06-12T20:43:04.537
> 
> 标签：javascript, jquery, html, string, replace

我无法替换包含捕获的 html 的变量中的某些值。

我会让代码解释我想要完成的事情。

免得说：

```
last_id = 1;
data.id = 2; 
```

编码：

```
/*prepare new edit,delete button*/
var controls = $('table#option_groups tr:last td:last').html(); 
```

输出 var 控件将返回：

```
<a href="stuff/edit/1">Edit</a>
<a href="stuff/delete/1">Delete</a> 
```

试图替换\更新编辑按钮：

```
//replacing edit button
controls.replace('/edit/'+last_id, '/edit/'+data.id); 
```

替换后输出控件：

```
<a href="stuff/edit/1">Edit</a>
<a href="stuff/delete/1">Delete</a> 
```

所需的输出：

```
<a href="stuff/edit/2">Edit</a>
<a href="stuff/delete/1">Delete</a> 
```

所以问题是：如何替换包含捕获的 html 的变量中出现的字符串。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:06:02.033

看来您没有将替换的字符串重新分配给`controls`变量，试试这个：

```
controls = controls.replace('/edit/'+last_id, '/edit/'+data.id); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T21:01:27.087

您可以在一行代码中做到这一点：

```
var controls = $('table#option_groups tr:last td:last').html().replace("/edit/"+last_id, "/edit/"+data.id); 
```

输出：

```
<a href="stuff/edit/2">Edit</a>
<a href="stuff/delete/1">Delete</a> 
```

# c# - 从单向信任访问用户信息

> ID：11004574
> 
> 赞同：1
> 
> 时间：2012-06-12T20:43:12.633
> 
> 标签：c#, c#-4.0, active-directory

我有两个域，我的和他们的。MINE 是我的本地域，并且与 THEIRS 具有单向信任（使用 LDAPS 端口 636），因此 MINE 信任 THEIRS 但 THEIRS 不信任 MINE。我可以将 THEIRS 中的用户添加到 MINE 中的组，并让 THEIR 中的用户登录到 MINE 网络上的机器和应用程序。信托似乎运作正常。

我正在编写一个小 .Net 应用程序（不是 ASP.Net）来测试 WAN 上的连接性。我们有一个应用程序在 MINE 中没有看到来自 THEIRS 的用户。其他应用程序（如 SharePoint）运行良好。

我尝试使用带有 System.DirectoryServices.AccountManagement 对象的 ASP.Net 4 选项，例如 PrincipalContext、UserPrincipal、GroupPrincipal 等。快速代码片段

```
 PrincipalContext domainContext = GetDomainContext(DomainName, ConnectionPort,
        UseSpecifiedCredentials, Credentials);

    GroupPrincipal theGroup = GroupPrincipal.FindByIdentity(domainContext,
        IdentityType.SamAccountName, GroupName);

    PrincipalCollection theUsers = theGroup.Members;

    var users = from u in theUsers
                select u.Name;

    return users.ToArray(); 
```

当我直接连接到 MINE 时，一切都很好。问题在于连接到他们的。LDAPS 流量的单向信任返回错误：

```
System.DirectoryServices.Protocols.LdapException: The LDAP server is unavailable. 
```

所以我使用 DirectoryEntry、DirectorySearcher 等切换到 .Net 2 变体。这实际上适用于 THEIRS 域。

```
 List<string> userNames = new List<string>();
    string searchString = string.Format("(sAMAccountName={0})", GroupName);
    SearchResult result = SearchAD(DomainName, ConnectionPort, searchString); 
```

我可以直接连接到 THEIRS 域，在代码中使用一些模拟。

当我在 MINE 中查询组时，我从 THEIRS 获取用户的 SID，而不是用户帐户。

```
The following users are a member of testGroup:
CN=S-1-5-21-....,CN=ForeignSecurityPrincipals,DC=MINE,DC=local
CN=S-1-5-21-....,CN=ForeignSecurityPrincipals,DC=MINE,DC=local 
```

我也尝试过模拟，以 THEIRS 的用户身份运行它，但没有运气。

当用户在 MINE 中时，如何从 THEIRS 获取用户信息？我是否必须使用上述 CN/SID 并查询 THEIRS 域？我在 .Net 4 中缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:43:00.930

我假设你的 ASP.NET 机器在 MINE 中运行。

如果您确保使用他们域中的域用户帐户来运行应用程序，您的 System.DirectoryServices.AccountManagement 方法应该可以正常工作。在正常的单向信任配置中（除非您正在执行选择性身份验证信任），来自 THEIR 的域用户帐户应该具有从 MINE 和 THEIR 读取的权限。

为了确保您使用来自 THEIR 域的域用户，您可以简单地[设置 AppPool 身份](http://technet.microsoft.com/en-us/library/cc771170%28WS.10%29.aspx)。当然，您也可以使用模拟来做到这一点。

# oracle - Oracle 到 SQL Server：日期转换和格式

> ID：11004577
> 
> 赞同：1
> 
> 时间：2012-06-12T20:43:28.763
> 
> 标签：oracle, sql-server-2012

我正在将我们的数据仓库从 Oracle 迁移到 SQL Server 2012。

我在 Oracle 中每天使用一百次的一段代码正在更改查询的日期格式，方法是：

```
To_Char(entry_date,'WMMYY') = 30612 
```

以上允许我通过简单地列出所需的星期来获取日期（默认格式 = `DD-MON-YY`eg `01-JAN-12`）并更改指定周的格式（上例中为六月的第三周）。

在我看来，以上内容非常简单易用。我可以将其更改为我想要的任何格式（MMYY、MMYYYY）等，没有任何问题。到目前为止，我无法在 SQL Server 2012 中找到一种简单的方法来做到这一点，这真的开始困扰我。它`datetime2`在 SQL Server 中。

我正在寻找东西，`CAST(), CONVERT(), DATEPART()`但据我所见，需要各种古怪的编码和数字代码（如 101、102，我不明白为什么会这样），这对我来说似乎无关紧要而且过于复杂。

我只是没有找到我正在寻找的东西，还是这只是 SQL Server 的方式？我只想能够做一些简单的事情，比如抓取在 6 月或 10 月第二周输入的所有数据，而无需添加 200 个额外字符的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:34:59.780

这是一个开关。您使用的是 SQL Server 2012，因此请查看`FORMAT()`功能。[http://technet.microsoft.com/en-us/library/hh213505%28SQL.110%29.aspx](http://technet.microsoft.com/en-us/library/hh213505%28SQL.110%29.aspx) 我不是，所以很遗憾我无法为您测试任何东西 - 但有一些日期格式改进。对于我们这些不熟悉的人来说，有些事情你可以做，这会很棒——一旦你习惯了它们。这不是特定于 SQL Server 的 - 但每个组织的每个月的周会有所不同 - 所以你必须定义它以获得一个月的第三周等的一个很好的例子。此外，当使用`DATEPART`周或日参数时，返回的内容由一周的第一天 (1 -7 - `@@DATEFIRST`) 的设置决定。的数字样式`CONVERT`（再次查看`FORMAT()`如果你在 2012 年）肯定不那么直观 - 但你可能会一遍又一遍地使用相同的样式，并且你会很快记住它们。如果您设置在“WMMYY”上，或者只是一遍又一遍地使用没有令人满意的内置解决方案的东西 - 创建一个`UDF`.

在 6 月份输入的数据

```
 DATEPART(mm,@date) = 6 
```

这个月

```
 month(getDate()) 
```

或者这周

```
 DATEPART(ww,GetDate()) 
```

# jquery - 使用单选按钮和 JQuery 更改图像

> ID：11004578
> 
> 赞同：0
> 
> 时间：2012-06-12T20:43:41.620
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我目前正试图根据单选按钮选择在用户视图中呈现不同的图像。如果我对选择进行硬编码，我可以操纵图像，但我找不到如何将用户的选择从 JQuery 传递到 Rails。

首先，我对单选按钮的看法是这样的：

```
<!-- VIEW CODE -->
<% [ 'credit_32.png', 'credit_64.png' ].each do |image| %>
          <%= radio_button_tag 'image', image, @image == image, :class => 'image' %><%= image_tag(image)%>
    <% end %> 
```

然后我有一个 div，我正在尝试使用基于选择的图像更新，我的函数要更改，在一个 javascript 文件中我在点击事件上监听这个：

```
// Javascript Asset File
    $(function() {
        $("input.image").live("click", function() {
            $image = ($(this).val());
            $.getScript( this.href );
        });
    }); 
```

这会将用户的选择设置为 $image 变量，并调用 index.js.erb 代码，该代码随后将重新渲染部分。

```
// Index.js.erb for responding to
    $("div#button").html("<%= escape_javascript(render(@button)) %>"); 
```

我遇到的问题是如何让我以前的变量到我的部分？

```
<!-- Partial Code -->
    <% if @button_image = $image %>
        <%= link_to image_tag(@button_image), button_path(button, :only_path => false), :target => '_blank' %>
    <% else %>
        <%= link_to image_tag('credit_32.png'), button_path(button, :only_path => false), :target => '_blank' %>
    <% end %> 
```

如果我可以将此 @button_image 实例变量设置为我的 JQuery $image 对象，我会很好，但我不知道这是否可能？我可以将 JQuery 对象保存到会话中并在这里使用它吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:57:17.010

该`$.getScript()`方法只是该方法的简写`$.ajax()`（链接：[http](http://api.jquery.com/jQuery.getScript/) ://api.jquery.com/jQuery.getScript/ ）

您可以只使用`$.ajax()`带有`data`属性的普通方法。例如：

```
$.ajax({  
  url: this.href,  
  dataType: "script",  
  data: { image: $(this).val() }  
}); 
```

现在在 Rails 中，您可以使用`params`哈希访问它。

更多信息：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# php - 为什么要在 PHP 中通过引用传递原始类型参数？

> ID：11004580
> 
> 赞同：1
> 
> 时间：2012-06-12T20:43:52.273
> 
> 标签：php

关于 PHP 一直困扰着我（以及其他所有人）的一件事是它在函数命名和参数方面的不一致。另一个最近的烦恼是它倾向于通过引用而不是值来请求函数参数。

我快速浏览了 PHP 手册，并找到了该函数`sort()`作为示例。如果我正在实现该函数，我将按值获取一个数组，将其排序到一个新数组中，然后返回新值。在 PHP 中，`sort()`返回一个布尔值，并修改现有数组。

我想怎么称呼`sort()`：

```
$array = array('c','a','b');
$sorted_array = sort($array); 
```

PHP希望我如何调用`sort()`：

```
$array = array('c','a','b');
sort($array);
$sorted_array = $array; 
```

此外，以下会引发致命错误：`Fatal error: Only variables can be passed by reference`

```
sort(array('c','a','b'); 
```

我想这其中的一部分可能是 PHP 过去的遗留物，但这样做肯定是有原因的。我可以看到通过引用 ID 传递对象的值，就像 PHP 5+ 所做的那样（我猜这有点在按引用传递和按值传递之间），但在字符串、数组、整数等的情况下则不然。

我不是计算机科学领域的专家，所以你可能会猜到，我仍然试图掌握其中一些概念，我很好奇事情是否有这样的原因，或者是否只是剩菜。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:46:12.407

主要原因是 PHP 是由 C 程序员开发的，这在很大程度上是一种 C 编程范式。在 C 中，将指针传递给要更改的数据结构是有意义的。在 PHP 中，没有那么多（除其他外，因为引用与指针不同）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T20:49:07.077

我相信这是出于速度原因。
大多数时候，您需要对正在处理的数组进行排序，而不是副本。

如果 sort 应该返回数组的一个新副本，那么每次调用 sort(); PHP 引擎应该已将数组复制到新数组中（降低速度并增加空间成本），您将无法控制这种行为。

如果您需要不对原始数组进行排序（并且这种情况不会经常发生），那么只需执行以下操作：

```
$copy = $yourArray;
sort($yourArray); 
```

# php - PHP文件上传无页面刷新

> ID：11004583
> 
> 赞同：-1
> 
> 时间：2012-06-12T20:43:57.970
> 
> 标签：php, iframe, upload

我知道有几个人问过这个问题，但我还没有看到答案。我有一个用于在 div 标签中上传文件的 php 上传表单。是否可以在不刷新页面的情况下提交表单并上传文件？我还没有找到可以工作的插件，因为我想提交带有标题和其他数据的表单。有什么建议么？我看过使用 iframe，但我不确定它是否可以在包含在 div 标签中的 upload.php 中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:52:56.533

这是您可以使用的最简单的解决方案：[不刷新页面的图像上传](http://php-drops.blogspot.ca/2011/02/image-upload-without-page-refresh.html)。

没有义务使用 javascript 部分，但它让您有机会显示传输已正确完成的通知。

如果你对 jQuery 持开放态度并想要一个更开放的解决方案，我建议你看看[jQuery Form Plugin](http://jquery.malsup.com/form/)可以为你管理这一切，还有一些有趣的附加功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T21:26:38.167

我最喜欢的工具是[Uploadify](http://www.uploadify.com/)。它包括实时进度指示器、拖放等。

还有其他较旧的解决方案，包括[这个](http://roshanbh.com.np/2008/10/model-file-upload-overlay-box-jquery.html)。该页面有一个简单的演示，可以提供一个很好的例子来说明如何自己做这件事。

值得一提的是[Dave Walsh 的 facebook-lightbox](http://davidwalsh.name/facebook-lightbox)，您*可以*将文件上传表单放入其中。如果你喜欢它的外观，值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T21:13:13.883

尝试使用 AIM (http://www.webtoolkit.info/) 之类的东西。而且你真的应该在 html、php 和 js 方面获得更多经验。

# tomcat - 将 Jenkins 配置从 Tomcat7 tarball 移动到 apt 包管理器安装

> ID：11004586
> 
> 赞同：0
> 
> 时间：2012-06-12T20:44:10.057
> 
> 标签：tomcat, jenkins, tar, apt, ubuntu-12.04

我有一个在 Tomcat7 上运行的现有 Jenkinsins 安装。Tomcat7 最初是从 Tarball 安装的，但是我有一个使用 apt 版本的请求。将 Jenkins 的安装从现有的 Tarball 安装复制到新安装的最简单方法是什么？

我看到的其他问题特别是与将构建从一台机器移动到另一台机器有关，但是，我真的很想保持现有的 Jenkins 设置保持原样，因为它已经配置了很多额外的插件。

该系统是 Ubuntu 12 系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:49:59.107

这应该相当简单，因为 Jenkins Web 应用程序与存储所有构建数据的 JENKINS_HOME 目录不同。

我假设您有 Jenkins 的标准安装，您将 jenkins.war 文件复制到 $CURRENT_CATALINA_HOME/webapps，因此您的 Jenkins 在[http://yourhost.yourdomain/jenkins上响应](http://yourhost.yourdomain/jenkins)

如果是这样，您只需将 jenkins.war 移动到 $NEW_CATALINA_HOME/webapps，然后确保运行 Tomcat 的用户知道您的 JENKINS_HOME 在哪里。您可以通过在运行 Tomcat 的用户环境中定义 JENKINS_HOME 来执行此操作，或者将其放入 Tomcat 的 CATALINA_OPTS 启动选项中。有关更多详细信息，请参阅[https://wiki.jenkins-ci.org/display/JENKINS/Tomcat](https://wiki.jenkins-ci.org/display/JENKINS/Tomcat)。

# windows - Win batch：在嵌套循环中设置变量不起作用

> ID：11004588
> 
> 赞同：0
> 
> 时间：2012-06-12T20:44:17.953
> 
> 标签：windows, batch-file

我有一个很长的脚本，我将其压缩为以下代码行来说明我遇到的问题。我尝试了 StackOverflow 用户的一些建议，但无济于事，因此希望您的反馈对我和未来的用户有所帮助。注意：此代码有效，除了设置 pdfREP 嵌套变量。

```
SETLOCAL 启用延迟扩展
设置 pdfREP=false

for /f "tokens=1" %%a in ('dir /o /b \\path2document\*.rp?') 做 (
    findstr "," \\path2log\%%a > 1.log
    如果不是错误级别 0 (
        ：： 做点什么
        )
    如果错误级别 0 (
        findstr /B /I "p" \\path2document\%%a > 1.log
        如果错误级别 == 0 (
            设置 pdfREP=true
            回显 RSP 文件：%%a >> 2.log
        )
    )   
)

```

基本上问题是在 \path2document 我有多个文件，并且在每个文件中我都在寻找一个逗号。如果没有找到逗号，那么我想知道文件文本中是否有特定的字母。如果找到文本，我将先前定义的变量设置为 TRUE，而不是 FALSE。但是，如果语法不同（%errorlevel%==0,%errorlevel% EQU 0），“if errorlevel == 0”可以为真，并且它不会将变量 pdfREP 设置为 TRUE。如果问题是直到循环迭代之后才设置变量，那么我如何在其余代码中使用这个变量？我想稍后使用这个变量，所以设置它是最重要的。感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:57:34.130

Windows 批处理具有处理嵌套变量的“有趣”方式。 [这篇文章](http://www.computing.net/howtos/show/batch-script-variable-expansion-win200-and-up/248.html)可能会有所帮助。

就个人而言，当我的批处理文件变得如此复杂时，我会切换到另一种语言。我的首选通常是 Python，但如果您想留在 Microsoft 生态系统中，那么 vbscript 或 PowerShell 会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T03:12:56.330

您正在滥用 IF 命令和 errorlevel 值。

IF 命令说明表明您可以直接在条件中使用 ERRORLEVEL 字，后跟一个表示给定错误级别的数字。这样，下面两个 IF 命令是对的：

```
if not errorlevel 0 (
    :: do something
    )
if errorlevel 0 ( 
```

但是，以下命令写得不好：

```
if errorlevel == 0 ( 
```

在这种情况下，您必须使用 !errorlevel! 表示在执行最后一行后获取当前的错误级别值：

```
if !errorlevel! == 0 ( 
```

独立于上述内容，这就是我这样做的方式：

```
if not errorlevel 0 (
    echo The errorlevel is less than zero 
) else if errorlevel 0 (
    echo The errorlevel is greater than zero
) else (
    echo The errorlevel is zero
) 
```

# ruby-on-rails - 基于 CRUD 的授权？

> ID：11004590
> 
> 赞同：1
> 
> 时间：2012-06-12T20:44:21.210
> 
> 标签：ruby-on-rails, devise, crud, ruby-on-rails-3.2

有谁知道将角色 CRUD 系统添加到 Rails 的快速方法？

我只希望管理员创建用户并在我的应用程序的页面上列出所有当前注册的用户。

我试图找出一种将用户分配给不同角色并限制他们使用集合选择或一系列复选框执行某些操作的方法。

我遵循了一些教程，但似乎没有一个对我有用：/

谁能推荐一个解决方案？我为我的授权而设计，这很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:31:59.000

你可以想想[CanCan](https://github.com/sferik/rails_admin/wiki/CanCan)。使用它，您可以定义角色并根据角色限制对某些操作或模型元素的访问。

它也可以很容易地与Scott Schulthess 提到的[Devise集成。](https://github.com/plataformatec/devise)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:54:32.837

在 github 上的设计有一个 wiki 页面显示如何做到这一点

[https://github.com/plataformatec/devise/wiki/How-To:-Add-an-Admin-role](https://github.com/plataformatec/devise/wiki/How-To:-Add-an-Admin-role)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:40:28.503

如果您想将此 API 公开给许多其他人，您也可以尝试使用 API 密钥

# php - mysql_num_rows()：提供的参数不是有效的 MySQL 结果资源

> ID：11004593
> 
> 赞同：-2
> 
> 时间：2012-06-12T20:44:29.750
> 
> 标签：php, mysql

我在下面的代码中收到一条错误消息“mysql_num_rows()：提供的参数不是...第 200 行中的有效 MySQL 结果资源”，这似乎没问题，因为我在另一个脚本中也有类似的代码：

```
 //Reference Code Validation...
    $ref_check = mysql_query("SELECT id FROM References WHERE Ref_Code='$ref_code' LIMIT 1");
    $number = mysql_num_rows($ref_check);//line no 200
    if ($number > 0) {
        $new_user_check = mysql_query("SELECT New_User FROM References WHERE Ref_Code='$ref_code' LIMIT 1");
        $result = mysql_fetch_array($new_user_check);
        $data = $result['New_User'];
        if($data!==Null){
            echo 'This reference code was already redeemed. Please check or leave it blank';
            exit ();

    }
else{
        echo 'Reference code is invalid. Please check and try again';
        exit ();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:23:45.790

解决了...发现更改表名如下解决了错误：

```
Befor: References

After: `References` 
```

这种分号可以通过按下键盘左侧“1”键之前的按钮来插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:51:05.923

变量`$ref_check`越来越假。这意味着您的 SQL 查询中存在语法错误。如果你在那里得到错误，这意味着你正在投入 a `boolean`into `mysql_num_rows()`，这将引发该错误。

我不知道你的数据库表看起来如何，所以我不能完全判断是否存在语法错误。

如果您确定没有语法错误，请将其放入查询中：

```
... LIMIT 0, 1);... 
```

# c# - Winforms - 如何在表单上显示项目的额外字段

> ID：11004595
> 
> 赞同：0
> 
> 时间：2012-06-12T20:44:30.617
> 
> 标签：c#, winforms, user-interface

我正在尝试创建一个表单来收集有关项目的信息。有两种类型：默认项和特殊项。item 的字段默认显示在表单上。

```
public class Item
{
   Id
   Name
   Quantity
   Type //default, special
}

public class SpecialItem : Item //inherits from item
{
   //extra fields here
   ExpiryDate
   SafeForChildren
} 
```

我将如何将 SpecialItem 的额外字段提供给用户。

我认为在用户表明他想通过选择类型来添加特殊项目之前，不应显示 SpecialItem 的字段。

我想使用一个选项卡来显示额外的字段一个可折叠的控件 - 如果存在，我不隐藏控件并在必要时显示它们任何其他想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:57:41.987

试试这个——它只是反映给定的类型，然后将控件放在一个`TableLayoutPanel`添加几个按钮上，然后将两个事件处理程序绑定到按钮的单击事件。这绝不是一个大师级的，但我认为会让你开始。

```
public MyForm(Type typeToDisplay)
        {
            InitializeComponent();

            PropertyInfo[] settableProperties = typeToDisplay.GetProperties(BindingFlags.Instance | BindingFlags.Public);

            TableLayoutPanel panel = new TableLayoutPanel();
            panel.ColumnCount = 2;
            panel.RowCount = settableProperties.Length+1;
            panel.Name = "LayoutPanel";
            this.Controls.Add(panel);

            int rowIndex = 0;

            foreach (PropertyInfo info in settableProperties)
            {
                Label propLabel = new Label();
                propLabel.Text = info.Name;

                TextBox propField = new TextBox();

                panel.Controls.Add(propLabel, 0, rowIndex);
                panel.Controls.Add(propField, 1, rowIndex);

                rowIndex++;
            }

            panel.Controls.Add(new Button() { Text = "OK", Name="OK" }, 0, rowIndex);
            panel.Controls.Add(new Button() { Text = "Cancel", Name="Cancel" }, 1, rowIndex);

            panel.Controls["Cancel"].Click += new EventHandler(CloseForm);
            panel.Controls["OK"].Click += new EventHandler(SaveChanges);

            panel.Height = this.Height;
            panel.Width = this.Width;

        }

        private void CloseForm(object sender, EventArgs e)
        {
            this.Close();
        }

        private void SaveChanges(object sender, EventArgs e)
        {
            MessageBox.Show("Save changes was clicked!");
            this.Close();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:59:01.180

如果这两个类之间有明确的关系，并且这种关系对您的用户来说很容易理解，我认为展示每个字段是一件好事。
将所有字段放在一个组框中，并为 Item 和 SpecialItem 类添加两个选项按钮。
默认情况下（在表单加载时）将选择 Item 类，并且禁用两个额外的字段。
如果用户选择 SpecialItem 类选项按钮，请启用其他两个字段。

选择选项时，我在许多选项对话框中看到了此行为将启用其他特定选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T21:20:11.850

这是一个完整的示例解决方案，用于演示我上面的建议。请注意，这一切都是在代码中完成的，并且只使用一个列，但也可以与设计器生成的控件（当然）和多个列一起使用。只需确保将所有控件设置为一行（例如，标签及其相应的输入控件）以`Visible = false`使未使用的行正确折叠。

```
TableLayoutPanel tlp = new TableLayoutPanel();
tlp.RowStyles.Add(new RowStyle(SizeType.Absolute, 25));
tlp.RowStyles.Add(new RowStyle(SizeType.Absolute, 25));
tlp.RowStyles.Add(new RowStyle(SizeType.Absolute, 25));
tlp.RowStyles.Add(new RowStyle(SizeType.Absolute, 25));
tlp.RowStyles.Add(new RowStyle(SizeType.AutoSize));
tlp.RowStyles.Add(new RowStyle(SizeType.AutoSize));
tlp.RowStyles.Add(new RowStyle(SizeType.Absolute, 25));

TextBox b1 = new TextBox(); b1.Dock = DockStyle.Fill;
TextBox b2 = new TextBox(); b2.Dock = DockStyle.Fill;
TextBox b3 = new TextBox(); b3.Dock = DockStyle.Fill;
CheckBox special = new CheckBox(); special.Text = "Special?";
TextBox b4 = new TextBox(); b4.Dock = DockStyle.Fill; b4.Visible = false;
TextBox b5 = new TextBox(); b5.Dock = DockStyle.Fill; b5.Visible = false;
Button button = new Button(); button.Text = "Save";

special.CheckedChanged += new EventHandler((sender, args) => { b4.Visible = b5.Visible = special.Checked; });

tlp.Controls.Add(b1, 0, 0);
tlp.Controls.Add(b2, 0, 1);
tlp.Controls.Add(b3, 0, 2);
tlp.Controls.Add(special, 0, 3);
tlp.Controls.Add(b4, 0, 4);
tlp.Controls.Add(b5, 0, 5);
tlp.Controls.Add(button, 0, 6);

Controls.Add(tlp);
tlp.Dock = DockStyle.Fill;
tlp.BringToFront(); 
```

# c# - 如何从 WPF C# 中的另一个下拉列表中过滤下拉值？

> ID：11004596
> 
> 赞同：1
> 
> 时间：2012-06-12T20:44:32.880
> 
> 标签：c#, wpf, user-controls, wpf-controls

我无法像在 c# 表单中那样过滤 WPF 表单中的下拉列表..

我为我的场景下拉列表创建了一个列表，并将其用作`LoadUserControl()`方法中的项目源，如下所示。

```
 public class FilterListItem
  {
    public string Filter { get; set; }
  }

  public LoadUserControl()
  {
  InitializeComponent();
  List<FilterListItem> FilterList = new List<FilterListItem>();
  FilterList.Add(new FilterListItem() { Filter = "Make" });
  FilterList.Add(new FilterListItem() { Filter = "Model" });
  FilterList.Add(new FilterListItem() { Filter = "Year" });
  myscenario.ItemsSource= FilterList;
  myscenario.SelectedItem= "Model";
  } 
```

这是脚本下拉列表的代码，可根据场景下拉列表中的选择进行过滤。

```
private void myscenario_SelectionChanged(object sender, SelectionChangedEventArgs e)
  {

 if (myscenarios.SelectedItem.ToString() == "Model")
    {
     Scriptlist.Add(script1);
     Scriptlist.Add(script2);
     break;
    }
 else if (myscenarios.SelectedItem.ToString() == "Make")
    {
     Scriptlist.Add(script3);
     Scriptlist.Add(script4);
     break;
    }

else
    {
     Scenariolist.Add(sc5);
     Scenariolist.Add(sc6);
    }
 } 
```

当我执行脚本时，UI 只会使用默认值，即模型，每当我从下拉列表中选择其他值时，它仍将所选项目显示为“模型”。

此外，当我使用消息框从场景下拉列表中调试所选项目的值时，我收到如下消息。

```
**MessageBox.Show(myscenarios.SelectedItem.ToString()); 
```

//我在消息框中得到“Filterlistitem”，而不是我刚刚选择的选定项目。**

我所需要的只是根据用户在场景下拉列表中的选择过滤脚本下拉列表，就像我上面提到的那样。

仅供参考，我放 xaml UI 并不是为了让问题更简单。

任何帮助，将不胜感激。

谢谢

硒爱好者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T22:34:55.013

看来您正在使用`List<T>`的`ItemsSource`下拉控件在列表更改时不会更新 UI。当集合发生变化时，使用[ObservableCollections](http://msdn.microsoft.com/en-us/library/ms668604.aspx)通知 UI。

# websocket - Faye 阻止连接

> ID：11004597
> 
> 赞同：1
> 
> 时间：2012-06-12T20:44:35.440
> 
> 标签：websocket, faye, rackup

我在 Rails 应用程序中使用 Faye，我遇到了一个非常奇怪的行为，如果 faye 在提供`subscribe`所有资产之前到达（即，在`$(document).ready()`调用之后但在浏览器中的微调器运行时），那么 faye 将**阻止浏览器处于“加载”模式**（例如，微调器永远不会停止）。

我*相信*我正在使用 websockets 而不是长轮询，尽管我不确定如何确定。当启用引用 websocket 的调试消息时，我确实在 faye 的日志中看到：

```
2012-06-12 20:16:56 [DEBUG] [Faye::RackAdapter] Received via WebSocket[hybi-13]: [{"channel":"/meta/connect","clientId":"7w5vwypdaudnp9o64qwsb13om","connectionType":"websocket","id":"6s"}] 
```

浏览器连接到`thin`正在运行的独立服务器

```
require 'faye'
require 'bundler/setup'

Bundler.require(:faye)

bayeux = Faye::RackAdapter.new(:mount => '/faye', :timeout => 25)
bayeux.listen(9292) 
```

我正在使用的命令是

```
exec bundle exec rackup faye.ru -s thin -E production 
```

我正在运行 faye 0.8

```
* faye (0.8.2)
* faye-websocket (0.4.5) 
```

![这是我在 chrome 中看到的](../Images/30c3eb6f66be85a9759d8c3f13096254.png)

5 分钟后，我简单地`[Esc]`和那些出现了，那`faye.js`是 Faye 提供的脚本，似乎这些文件中的每一个似乎都对应于每个`subscribe`调用。

有趣的是，在这 5 个文件之后，有 5 个调用块，每分钟开始一次。

![在此处输入图像描述](../Images/96a69c5736603c1f4ccb88169e034784.png)

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T21:11:34.203

这是一种占位符答案，以防其他人遇到类似情况。

我发现我在两个不同的地方使用了 Faye.Client，因此正在为 faye 服务器设置两个连接，这是 faye 不支持的（因为它不需要）。删除另一个 faye 客户端有所帮助，我有时仍然会看到奇怪的行为，但这确实使事情有所改善。

# java - 如何将文本字段数据从 Struts 2 中的 ajax 操作传递到原始调用 .jsp？

> ID：11004599
> 
> 赞同：1
> 
> 时间：2012-06-12T20:44:39.587
> 
> 标签：java, ajax, struts2, dojo

我不确定该标题的措辞是否正确。让我解释一下我正在尝试做的事情：

我有一个带有表单的文件**new.jsp**

```
<s:form id="newdep" name="newdep" theme="simple" action="submitForm" > 
```

在这个表单中是一个选择框：

```
<s:select list="apps" name="app" onchange="javascript:show_details();return false;" /> 
```

我将 Dojo 用于 ajax，它正在调用：

```
function show_details() {
    dojo.event.topic.publish("show_detail");
} 
```

同样在这个表格中，我有：

```
<s:url id="d_url" action="showComp" /> 
<sx:div id="details" href="%{d_url}" listenTopics="show_detail" formId="newdep" showLoadingText=""/> 
```

这要求`comp.jsp`即时行动`showComp`。

它根据“应用程序”选择框中的选择显示许多文本字段。

更具体地说，一旦选择了一个应用程序，`lstList`就会创建一个特定于该应用程序的哈希图（在`CompAction`- 的操作类中`showComp`）并显示如下：

```
<s:iterator value="lstList">   
  <s:property value="key" />   
  &nbsp;&nbsp;&nbsp;
  <s:textfield name="value" value=""/> <!-- LINE I'M ASKING ABOUT -->
  <s:iterator value="value">     
    <br> 
  </s:iterator> 
```

我突出显示了文本字段行，因为我认为这是不对的。基本上，我想做的是：

1.  让用户从下拉列表中选择一个应用程序。（完毕）
2.  `comp.jsp`被调用并显示来自 hashmap + text 字段的相关标签。（完毕）
3.  当用户单击提交按钮时，用户在文本字段中的输入被保存到哈希图中（**不起作用**）

我应该在这一点上提到，单击提交后，用户将被发送到`results.jsp`.

从这个页面我可以很容易地从更大的动作类中访问数据，`FormAction`. `CompAction`但我不知道如何从（再次，ajax 操作的操作类）访问数据（例如哈希图）。

所以，4\. 从 results.jsp 访问 hashmap 数据（**也不起作用**）

我的本能是使用

```
<s:property value="%{lstList}" /> 
```

但`results.jsp`没有运气。我对struts很陌生，但我正在尽我所能去感受它。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:29:24.310

我不确定我是否得到了你，但我会尽力提供帮助。看看你的`comp.jsp`，特别是你突出显示的行，看起来你正在创建许多具有相同名称的输入：“值”（因为在`<s:textfield />`“值”中不是作为变量，而是作为一个简单的名称），每个哈希图条目一个。我建议您看一下由`comp.jsp`. 也就是说，如果您有许多具有相同名称的字段，则这些字段的所有值都将`String[]`在操作中映射为 a。因此，如果您`String[]`在操作中定义 a，您将获得所有值。

好的，但是您还需要名称，我的意思是，您需要输入所有字段的操作名称-值。为此，首先，您应该更改您的`comp.jsp`，忘记`<s:textfield ...`/> 并由您的用户生成 html 代码：

```
<s:iterator value="lstList">   
    <input type="text" name="_<s:property value="key" />" value="<s:property value="value" />" />    
    <br> 
</s:iterator> 
```

请注意，所有字段名称都以“_”开头。

然后，在操作中，您应该访问请求并获取请求中所有参数的列表，获取以“_”开头的参数并自己构建带有名称和值的哈希图。

# php - 在 cakephp 2.0 中模型验证规则失败后保留某些变量

> ID：11004600
> 
> 赞同：0
> 
> 时间：2012-06-12T20:44:46.863
> 
> 标签：php, validation, variables, controller, cakephp-2.0

因此，我将 jquery 选项卡用于带有表单的页面，并且我们在视图内的条件中使用某些 php 变量`$image`（例如尺寸和路径等数据）以`if isset`在用户完成操作时“解锁”更多选项卡（例如如在此示例中上传图像）。在某些时候我必须使用一些验证规则，问题是如果用户出错并且验证规则失败，页面会重新加载变量`$image`等消失，所以用户基本上必须从头开始表单（锁定标签和所有）。

目前我正在使用这样的东西：

```
if ($this->Report->save($this->data)) { //validation rules run here
    //do stuff
else{
    $this->set("err", 1); 
```

所以我至少可以使用`$err`变量在页面重新加载时解锁一些选项卡，但我还需要使用`$image`我之前提到的实际数据维护特定变量（以显示预览），我无法找到一种方法来做.

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:12:59.593

您可以将数据存储在会话中并在适当时将其删除

# php - 使用 php 函数 sendmail 发送带有附件的邮件

> ID：11004604
> 
> 赞同：1
> 
> 时间：2012-06-12T20:44:57.173
> 
> 标签：php

我有这样的表格：

这是1.php

```
<form action="2.php" method="post">
Name: <input type="text" name="name" /></br>
Email: <input type="text" name="email" />
<input type="submit" value="Submit" /> 
```

比 2.php 是这样的：

```
<form action="3.php" method="post">
<input type="hidden" name="name" value="<?php echo $_POST['name'];?>"/>
<input type="hidden" name="email" value="<?php echo $_POST['email'];?>"/>
Telephone: <input type="text" name="telephone" /></br>
Location: <input type="text" name="location" />
<input type="submit" value="Submit" /> 
```

最后一个 3.php 是这样的：

```
<?php
    $error = "";
    if(isset($_POST['submit'])) {
        if(empty($_POST['email']) || empty($_POST['name'])) {
            $error .= 'There is an error. Retry.  <br />';
        }
        if(!filter_var($_POST['email'],FILTER_VALIDATE_EMAIL)) {
            $error .= 'E-mail is incorrect. <br />';
        }       
        function sendmail() {
            $to = 'user@domain.tld';
            $name = "Name : " .$_POST['name'];
            $telephone = "Telephone : " . $_POST['telephone']. "";
            $location = "Location : " .$_POST['location'];
            $subiect = "Form from webpage";
            $body = 'form content: '. $name. "\n". $telephone. "\n\n" . $location. "\n\n". $from ;
            $from = "From: " . $_POST['email']. "";
            if(mail($to,$subiect,$body,$from)) {
              echo '<p>Thank you !</p><br />';
            }else{
              echo '<p>Error with server</p>';
            }
        }
        if($error == "") {
           sendmail();
        }
        echo "<p>".$error."</p>";
    }            
?> 
```

`<input type="file" name="file" id="file" />`我的问题是，当用户能够上传照片时，我如何在第一页中引入 a ，然后在 3.php 页面上，当他点击提交按钮时，该图片将出现在电子邮件中

谁能给我一个例子吗？谢谢 ！

# php - 使用 jQuery 或 Javascript 或 PHP 提交表单

> ID：11004605
> 
> 赞同：-1
> 
> 时间：2012-06-12T20:44:58.780
> 
> 标签：php, javascript, jquery, forms, submit

是否可以提交带有脚本的表单？

我知道这一定是因为现在有很多表格要求你填写数字。但是什么脚本可以做到这一点呢？它是如何使用 PHP、Javascript 或 jQuery...ajax 完成的？

例如。我正在网站上上传有关产品的图片和信息。我想知道我是否必须手动访问该网站，或者我是否可以从我的数据库中提交不同的信息。说得通？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:46:45.110

使用 jQuery.ajax() 向服务器端函数发送请求。 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:48:06.860

是的，这是可能的。

使用 AJAX（jQuery 有很多有用且易于实现的 AJAX 方法），您可以将数据传递到您的服务器。不过，关于跨域 AJAX 存在许多安全问题，如果我理解正确，这就是您要实现的目标。

阅读更多：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# android - 将顽固的 sdcard 目录重新挂载为可读写

> ID：11004608
> 
> 赞同：0
> 
> 时间：2012-06-12T20:45:09.340
> 
> 标签：android

我正在为 Play 上不可用的商业市场开发应用程序，并且我有一个定制的特定目标设备，但不是由我定制的。某些 3rd 方 SDK 资源需要安装在 SDCard 目录中。仅此一项就很简单了。

我面临的问题是 sdcard 目录已以只读方式安装。请注意，实际上并不是 sdcard，它是内部驱动器上的一个分区。它实际上是 mount rw 点，发生了一些变化，现在我被只读 sdcard 目录困住了。

到目前为止我已经尝试过：

1.  尝试重新挂载 sdcard 挂载点。没有奏效。即使我以 root 身份登录。没有提供错误。

    mount -o remount,rw /dev/block/mmcblk1p4 /mnt/sdcard

2.  检查 /proc/mounts。我可以在 /proc/mounts 中看到 sdcard 已安装 ro。我不知道Android中是否有等效的fstab，所以我更改了选项。有人告诉我，vold.fstab 是我应该去的地方，但是......

    /dev/block/mmcblk1p4 /mnt/sdcard vfat ro,relatime,uid=1000,gid=1015,fmask=0202,dmask=0202,allow_utime=0020,codepage=cp437,iocharset=iso8859-1,shortname=mixed,utf8 ,错误=重新安装-ro 0 0

3.  检查vold.fstab。这与 /proc/mount 中显示的设备不同。

    dev_mount sdcard /mnt/sdcard 4 /devices/platform/mmci-omap-hs.1/mmc_host/mmc1 dev_mount usbdisk /mnt/sdcard/usbdisk auto /devices/platform/ehci-omap.0 dev_mount extsd /mnt/sdcard/extsd自动/设备/平台/mmci-omap-hs.0/mmc_host/mmc0

4.  从引导检查 logcat 输出。没有任何迹象表明安装有错误，但是我什至不确定 mount/vold 是否会向 logcat 报告。然而，有一些错误表明启动应用程序无法写入 sdcard。

在这一点上我非常困惑。有谁知道解决这个问题的可靠方法？

**编辑：**

这次我尝试了不同的挂载选项

`mount -w -o remount /dev/block/mmcblk1p4 /mnt/sdcard`

这工作了一段时间，我可以做一些文件操作，但它最终恢复到 RO，几乎在几分钟内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:09:36.427

设法解决了问题。文件系统已损坏，因此系统强制重新挂载为只读。简单的解决方法是重新创建文件系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:29:15.810

诚然，这不在 android 上，但我必须安装 ntfs-3g 并配置 fstab：

```
/dev/sda1 /media/mycard ntfs-3g  rw,umask=0000,defaults 0 0 
```

或安装

```
mount -t cifs -o uid=1000 /dev/sda1 /media/mycard 
```

# c# - WPF 更改菜单项的大小

> ID：11004610
> 
> 赞同：0
> 
> 时间：2012-06-12T20:45:15.427
> 
> 标签：c#, wpf

我有一个用 MVVM 制作的菜单，但我的 Menuitem 很大，如下所示 [http://i49.tinypic.com/wi1vk3.png](http://i49.tinypic.com/wi1vk3.png)

所以在我的主窗口中，我有一个绑定到菜单列表的菜单。

在我看来

```
 <Menu VerticalAlignment="Top">
       <MenuItem Header="File" ItemsSource="{Binding MenuList}" />
    </Menu> 
```

在我的 ViewModel

```
List<MenuViewModelBase> _menuList = new List<MenuViewModelBase>();
_menuList.Add(new MenuViewModel("New", NewCommand));
_menuList.Add(new MenuViewModel("Open", OpenCommand));
_menuList.Add(new MenuViewModel("Save", SaveCommand));
_menuList.Add(new MenuViewModel("Exit", ExitCommand)); 
```

我的 MenuView 是

```
<MenuItem>
  <MenuItem.Resources>
    <Style TargetType="MenuItem">
      <Setter Property="Header" Value="{Binding Name}" />
      <Setter Property="Command" Value="{Binding ActionCommand}" />
    </Style>
  </MenuItem.Resources>
</MenuItem> 
```

有人能告诉我如何调整菜单项的大小以匹配他们的内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:04:51.317

我相信您看到的是[默认模板](http://msdn.microsoft.com/en-us/library/ms752296.aspx)为 InputGestureText 保留的空间。如果您想删除该区域，我相信您最好的选择是为菜单项实现自己的模板。使用默认模板作为起点应该很容易修改它以获得您正在寻找的内容。

**更新：**

我已经包含了一个示例，其中我从上面的链接中复制了 MenuItem 样式并将其添加到我的项目中。然后我从 SubMenuHeaderTemplate 中删除了 Icon 和 InputGesture 区域。通常，如果您看到想要更改的默认行为，您可以尝试通过样式进行更改，如果这不起作用，您可以使用 Microsoft 提供的作为基础的模板覆盖默认模板。

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow">
<Window.Resources>

    <Color x:Key="DisabledForegroundColor">#FF888888</Color>
    <Color x:Key="ControlLightColor">White</Color>
    <Color x:Key="ControlMediumColor">#FF7381F9</Color>
    <Color x:Key="ControlMouseOverColor">#FF3843C4</Color>

    <!--Border colors-->
    <Color x:Key="BorderMediumColor">#FF888888</Color>

    <LinearGradientBrush x:Key="MenuPopupBrush" EndPoint="0.5,1" StartPoint="0.5,0">
        <GradientStop Color="{DynamicResource ControlLightColor}" Offset="0" />
        <GradientStop Color="{DynamicResource ControlMediumColor}" Offset="0.5" />
        <GradientStop Color="{DynamicResource ControlLightColor}" Offset="1" />
    </LinearGradientBrush>

    <!-- TopLevelHeader -->
    <ControlTemplate x:Key="{x:Static MenuItem.TopLevelHeaderTemplateKey}" TargetType="{x:Type MenuItem}">
        <Border x:Name="Border">
            <Grid>
                <ContentPresenter Margin="6,3,6,3" ContentSource="Header" RecognizesAccessKey="True" />
                <Popup x:Name="Popup" Placement="Bottom" IsOpen="{TemplateBinding IsSubmenuOpen}"
                         AllowsTransparency="True" Focusable="False" PopupAnimation="Fade">
                    <Border x:Name="SubmenuBorder" SnapsToDevicePixels="True" BorderThickness="1"
                            Background="{DynamicResource MenuPopupBrush}">
                        <Border.BorderBrush>
                            <SolidColorBrush Color="{DynamicResource BorderMediumColor}" />
                        </Border.BorderBrush>
                        <ScrollViewer CanContentScroll="True" Style="{StaticResource MenuScrollViewer}">
                            <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Cycle" />
                        </ScrollViewer>
                    </Border>
                </Popup>
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsSuspendingPopupAnimation" Value="true">
                <Setter TargetName="Popup" Property="PopupAnimation" Value="None" />
            </Trigger>
            <Trigger Property="IsHighlighted" Value="true">
                <Setter TargetName="Border" Property="BorderBrush" Value="Transparent" />
                <Setter Property="Background" TargetName="Border">
                    <Setter.Value>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <LinearGradientBrush.GradientStops>
                                <GradientStopCollection>
                                    <GradientStop Color="{StaticResource ControlLightColor}" />
                                    <GradientStop Color="{StaticResource ControlMouseOverColor}" Offset="1.0" />
                                </GradientStopCollection>
                            </LinearGradientBrush.GradientStops>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger>
            <Trigger SourceName="Popup" Property="AllowsTransparency" Value="True">
                <Setter TargetName="SubmenuBorder" Property="CornerRadius" Value="0,0,4,4" />
                <Setter TargetName="SubmenuBorder" Property="Padding" Value="0,0,0,3" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Foreground">
                    <Setter.Value>
                        <SolidColorBrush Color="{StaticResource DisabledForegroundColor}" />
                    </Setter.Value>
                </Setter>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <!-- TopLevelItem -->
    <ControlTemplate x:Key="{x:Static MenuItem.TopLevelItemTemplateKey}" TargetType="{x:Type MenuItem}">
        <Border x:Name="Border">
            <Grid>
                <ContentPresenter Margin="6,3,6,3" ContentSource="Header" RecognizesAccessKey="True" />
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsHighlighted" Value="true">
                <Setter Property="Background" TargetName="Border">
                    <Setter.Value>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <LinearGradientBrush.GradientStops>
                                <GradientStopCollection>
                                    <GradientStop Color="{StaticResource ControlLightColor}" />
                                    <GradientStop Color="{StaticResource ControlMouseOverColor}" Offset="1.0" />
                                </GradientStopCollection>
                            </LinearGradientBrush.GradientStops>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Foreground">
                    <Setter.Value>
                        <SolidColorBrush Color="{StaticResource DisabledForegroundColor}" />
                    </Setter.Value>
                </Setter>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <!-- SubmenuItem -->
    <ControlTemplate x:Key="{x:Static MenuItem.SubmenuItemTemplateKey}" TargetType="{x:Type MenuItem}">
        <Border x:Name="Border" BorderThickness="1">
            <Grid>
                <ContentPresenter x:Name="HeaderHost" ContentSource="Header" RecognizesAccessKey="True" />
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsHighlighted" Value="true">
                <Setter Property="Background" TargetName="Border">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="Transparent" Offset="0" />
                            <GradientStop Color="{DynamicResource ControlMouseOverColor}" Offset="1" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="BorderBrush" TargetName="Border">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="{DynamicResource BorderMediumColor}" Offset="0" />
                            <GradientStop Color="Transparent" Offset="1" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger>
            <Trigger Property="IsEnabled" Value="false">
                <Setter Property="Foreground">
                    <Setter.Value>
                        <SolidColorBrush Color="{StaticResource DisabledForegroundColor}" />
                    </Setter.Value>
                </Setter>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <ControlTemplate x:Key="{x:Static MenuItem.SubmenuHeaderTemplateKey}"
             TargetType="{x:Type MenuItem}">
        <Border x:Name="Border" BorderThickness="1">
            <Grid>
                <ContentPresenter x:Name="HeaderHost" ContentSource="Header" RecognizesAccessKey="True" />
                <Popup x:Name="Popup" Placement="Right" HorizontalOffset="-4" IsOpen="{TemplateBinding IsSubmenuOpen}"
                        AllowsTransparency="True" Focusable="False" PopupAnimation="Fade">
                    <Border x:Name="SubmenuBorder" SnapsToDevicePixels="True" Background="{DynamicResource MenuPopupBrush}"
                            BorderThickness="1">
                        <Border.BorderBrush>
                            <SolidColorBrush Color="{DynamicResource BorderMediumColor}" />
                        </Border.BorderBrush>
                        <ScrollViewer CanContentScroll="True" Style="{StaticResource MenuScrollViewer}">
                            <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Cycle" />
                        </ScrollViewer>
                    </Border>
                </Popup>
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsHighlighted" Value="true">
                <Setter Property="Background" TargetName="Border">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="Transparent" Offset="0" />
                            <GradientStop Color="{DynamicResource ControlMouseOverColor}" Offset="1" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="BorderBrush" TargetName="Border">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="{DynamicResource BorderMediumColor}" Offset="0" />
                            <GradientStop Color="Transparent" Offset="1" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger>
            <Trigger SourceName="Popup" Property="AllowsTransparency" Value="True">
                <Setter TargetName="SubmenuBorder" Property="CornerRadius" Value="4" />
                <Setter TargetName="SubmenuBorder" Property="Padding" Value="0,3,0,3" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="false">
                <Setter Property="Foreground">
                    <Setter.Value>
                        <SolidColorBrush Color="{StaticResource DisabledForegroundColor}" />
                    </Setter.Value>
                </Setter>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <!-- MenuItem Style -->
    <Style x:Key="{x:Type MenuItem}"
   TargetType="{x:Type MenuItem}">
        <Setter Property="OverridesDefaultStyle"
      Value="True" />
        <Style.Triggers>
            <Trigger Property="Role"
         Value="TopLevelHeader">
                <Setter Property="Template"
          Value="{StaticResource {x:Static MenuItem.TopLevelHeaderTemplateKey}}" />
                <Setter Property="Grid.IsSharedSizeScope"
          Value="true" />
            </Trigger>
            <Trigger Property="Role"
         Value="TopLevelItem">
                <Setter Property="Template"
          Value="{StaticResource {x:Static MenuItem.TopLevelItemTemplateKey}}" />
            </Trigger>
            <Trigger Property="Role"
         Value="SubmenuHeader">
                <Setter Property="Template"
          Value="{StaticResource {x:Static MenuItem.SubmenuHeaderTemplateKey}}" />
            </Trigger>
            <Trigger Property="Role"
         Value="SubmenuItem">
                <Setter Property="Template"
          Value="{StaticResource {x:Static MenuItem.SubmenuItemTemplateKey}}" />
            </Trigger>
        </Style.Triggers>
    </Style>

</Window.Resources>
    <Grid Background="Red">
    <Grid.ContextMenu>
        <ContextMenu>
            <MenuItem Header="This is a menu item without InputGesture area"/>
        </ContextMenu>
    </Grid.ContextMenu>
   </Grid>

</Window> 
```

# c++ - 在 64 位 Ubuntu 上编译 x32 位 LD_PRELOAD

> ID：11004611
> 
> 赞同：1
> 
> 时间：2012-06-12T20:45:18.030
> 
> 标签：c++, compilation, 64-bit, ld-preload

我正在尝试在 x64 平台（Ubuntu）上编译 x32 LD_PRELOAD，我的命令：

```
g++ -fPIC -m32  -shared -Wl,-soname,test.so -ldl -o test.so test.cpp 
```

但我收到错误：

```
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.so when searching for -lstdc++
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a when searching for -lstdc++
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.so when searching for -lstdc++
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a when searching for -lstdc++
/usr/bin/ld: cannot find -lstdc++
collect2: ld returned 1 exit status 
```

我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T20:51:08.450

您需要安装发行版提供的 32 位开发包。您看到此错误是因为您没有要链接的 32 位 libstdc++。

尝试安装 Ubuntu 的`g++-multilib`软件包。

# workflow - 在 WF 4 中捕获特定的 FaultExceptions

> ID：11004614
> 
> 赞同：0
> 
> 时间：2012-06-12T20:45:20.727
> 
> 标签：workflow, workflow-foundation-4, faultexception

我正在尝试在 Workflow 4 中设置一个 try catch 块，该块试图调用另一个服务。该服务可能会抛出一些特定的、通用类型的错误异常：

`FaultException<MySpecificFault>`

在 try catch 中，我希望有一系列的 catch 来处理每个个体。但是，每当尝试捕获特定类型的错误时，就像我上面所说的那样，它在所有情况下都会落入块末尾的通用 FaultException 中。

有什么我想念的吗。这可以在WF4中做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:39:35.570

您可以使用多个 catch 块进行一次尝试，并且每个 catch 块都可以配置为处理特定的错误。1.在catch块中选择browse for type in exception框。2\. 在选择框中输入“System.ServiceModel.FaultException”。3\. 从小组合框中选择特定故障。

# ios - iOS 自动续订订阅 - 有关续订过程的问题

> ID：11004616
> 
> 赞同：2
> 
> 时间：2012-06-12T20:45:23.333
> 
> 标签：ios, in-app-purchase

如果得到回答，我有几个问题将帮助我更好地理解事情：

1.  有没有办法区分新订阅和之前购买的续订？

2.  订阅是否会在 expires_date 命中后立即进行续订？似乎有时（至少在沙盒中）我的订阅会在 expires_date 前 30-60 秒更新。

3.  更新是否总是在 expires_date 命中后的一致时间发生？例如，如果我启动我的应用程序并且 expires_date 已经过去，什么时候会发生续订（假设用户没有取消）？或者更确切地说，我的应用程序何时会知道 Apple 端发生了续订？

4.  场景：应用程序已启动，并且我的一项订阅的 expires_date 已过。我应该向 Apple 发送收据以查看该订阅是否已续订，还是应该等待几秒钟以查看续订过程是否发生？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:49:36.433

我将尝试回答我自己的问题：

1.  为此，我会在初始购买完成后存储`expires_date`订阅。`NSUserDefaults`当订阅到期时，我从`NSUserDefaults`. 这使我可以确定任何后续订阅是**续订**（`expires_date`存在于 NSUserDefaults -`expires_date`续订完成后更新为新的）还是**新购买**（`expires_date`不存在，因为它在之前的订阅到期时被删除，或者产品从未购买过）。

2.  这个问题无关紧要 - 我所做的是将应用程序每次进入前台时`expires_date`存储的内容进行比较。如果已通过，我会致电我的服务器以与 Apple 验证收据。Apple 将订阅状态返回给我的服务器（意味着订阅有效，意味着它已过期，就我的应用而言，所有其他的都是微不足道的）并且服务器将其转发给我的应用。以这种方式，我的应用程序需要多长时间才能收到续订提醒（也就是技术上，订阅已经通过 Apple 续订，但我的应用程序还不知道），因为我确定订阅是否已过期或不。`NSUserDefaults``current_date``current_date``expires_date``0``21006`

3.  在沙盒中，续订似乎非常不可信。有时我的订阅会续订五到六次（[根据 Apple 的标准](https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf#page=139)），有时会续订一次，有时根本不会。根据记录，7 天订阅的续订频率并不比 30 天订阅高很多。在沙盒中拥有与在实时服务器中相同的可靠性会很好，这样我就可以相应地编写代码（并且压力更小），但我离题了。我发现让订阅提醒我的应用他们已续订的唯一可靠且一致的方法是 when `expires_date has passed && I force close/relaunch my app`. 有时在后台和前台状态之间切换是可行的，但根据我的经验，这不太可靠——我觉得这在实时服务器中会[更好] 工作。

4.  `expires_date`当我注意到已经过去时，我所做的是检查我的服务器（反过来检查苹果） 。所以如果更新发生在之前/之后/从不发生都没有关系，因为我的服务器会告诉我订阅的某些状态。

我希望这些信息可以帮助其他有同样问题的人！

# sql - Oracle 嵌套游标

> ID：11004623
> 
> 赞同：0
> 
> 时间：2012-06-12T20:46:16.663
> 
> 标签：sql, oracle, cursor

我想从存在该列的模式中的每个表中获取名为“YMDH”的列中的不同日期。我想我需要使用嵌套游标（我以前没有做过）并想出了以下代码：

```
CREATE OR REPLACE PROCEDURE DistinctDates AS 
   sql_statement1 varchar2(200);
   sql_statement2 varchar2(200);
   results varchar2(15);
   ColumnExist integer;
BEGIN
    for cursor_rec in (SELECT * FROM user_objects WHERE object_type='TABLE'
    AND object_name NOT LIKE 'TM%')  loop
    sql_statement1 := 'select count (*) from user_tab_columns where table_name=' || '''' || cursor_rec.object_name || '''' || ' and column_name=' || '''' ||'YMDH'  || '''';
    execute immediate sql_statement1 into ColumnExist;
    if ColumnExist = 1 then
      for inner_cursor_rec in (select distinct(ymdh) from cursor_rec.object_name) loop
         null;
      end loop;
    end if;
    end loop;
END DistinctDates; 
```

SQL Developer 抱怨内部游标的选择语句。错误信息是：

> 错误（18,32）：PL/SQL：SQL 语句被忽略错误（18,70）：PL/SQL：ORA-00942：表或视图不存在

所以它不能识别对外部光标的引用。如何将表名（即 cursor_rec.object_name）传递给内部游标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:12:05.327

您在不需要的地方使用了动态 SQL，并没有在需要的地方使用它！

The check to see if the table has a column called 'YMDH' can be incorporated into the first query, giving this code:

```
CREATE OR REPLACE PROCEDURE DistinctDates AS 
   sql_statement varchar2(200);
   rc sys_refcursor;
   ymdh_value ????; -- Appropriate data type
BEGIN
    for cursor_rec in (SELECT t.table_name 
                       FROM user_tables t
                       JOIN user_tab_columns c ON c.table_name = t.table_name
                       WHERE t.table_name NOT LIKE 'TM%'
                       AND c.column_name='YMDH')  
    loop
        sql_statement := 'select distinct(ymdh) from ' || cursor_rec.table_name;
        open rc for sql_statement;
        loop
            fetch rc into ymdh_value;
            exit when rc%notfound;
            null;
        end loop;
        close rc;
    end loop;
END DistinctDates; 
```

# facebook-graph-api - 无法连接到 2a03:2880:10:1f03:face:b00c:0:26：无法从 Facebook PHP SDK 访问网络

> ID：11004624
> 
> 赞同：8
> 
> 时间：2012-06-12T20:46:23.490
> 
> 标签：facebook-graph-api, facebook-php-sdk

我正在使用 Facebook Current PHP SDK。我的应用程序运行正常。但是从今天开始，任何返回的 api 调用都无法连接到 2a03:2880:10:1f03:face:b00c:0:26：网络无法访问。

这是我的代码

```
 try {
    $fbme = $facebook->api('/me');
  } catch (Exception $e) {        
  echo $e->getMessage();        
  } 
```

有人有这个问题吗？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T09:57:45.233

这个问题还有另一种解决方案，在[http://codecorner.galanter.net/2011/06/03/solution-for-wordpress-curl-ipv6-error-network-is-unreachable/上找到](http://codecorner.galanter.net/2011/06/03/solution-for-wordpress-curl-ipv6-error-network-is-unreachable/)

您可以通过设置以下**curl 选项**简单地强制 IPV4 解析：

```
curl_setopt( $handle, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T20:47:43.553

您的服务器的网络或防火墙可能配置错误；如果您没有 IPV6 连接，请禁用您的 IPV6 接口

# android - 以编程方式使用 LinearLayout.LayoutParams

> ID：11004628
> 
> 赞同：0
> 
> 时间：2012-06-12T20:46:42.337
> 
> 标签：android, android-layout, android-linearlayout, layoutparams

我在使用 Android 的 LayoutParams 时遇到了一些问题。基本上，我正在尝试创建一个完全动态的应用程序，所有布局都以编程方式生成，实际上除了我的启动屏幕提交给 XML 之外，几乎什么都没有。我在使用线性布局方面取得了一些成功，并且该应用程序正在渲染我想要的所有内容。我只是在微调布局时遇到了一些麻烦。例如强制我的页脚到屏幕底部，拉伸按钮栏以覆盖整个宽度等。

据我所知，以编程方式实现此目的的方法是使用 setLayoutParams 方法。我的问题是我不确定如何将信息输入到布局参数中。目前我正在使用 LinearLayout.LayoutParams (int width, int height) 构造函数，但我还没有找到一种在创建参数后设置参数的方法。相反，我想使用 LinearLayout.LayoutParams (Context c, AttributeSet attrs) 构造函数，但我找不到声明 AttributeSet 的正确方法。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:51:39.773

在此处查看 LinearLayout 的所有“设置”方法：

[http://developer.android.com/reference/android/widget/LinearLayout.html](http://developer.android.com/reference/android/widget/LinearLayout.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T09:10:15.483

尝试如下 -

```
android.view.ViewGroup.MarginLayoutParams params = (MarginLayoutParams) surfaceView.getLayoutParams();
params.height = DesireHeight;
params.width = DesireWidth;
params.leftMargin = DesireMarginLeft;
params.topMargin = DesiremarginTop;
params.rightMargin = DesireMarginRight;
params.bottomMargin = DesireMarginBottom;
YOURView.setLayoutParams(params); 
```

# php - 页面之间的会话变量丢失

> ID：11004634
> 
> 赞同：1
> 
> 时间：2012-06-12T20:47:05.970
> 
> 标签：php, ajax, session

我有 3 个 .php 文件：

索引.php

```
<?php
session_start();

if (isset($_SESSION['comp_id']))
{
    require_once 'scan_albums.php';
}
else
{
    require_once 'login.php';
}

echo "SESSION['comp_id']=" .$_SESSION['comp_id'];
?> 
```

scan_ablums.php

```
<?php
session_start();
if (!isset($_SESSION["comp_id"]))
{
    header('Location: index.php');
}
//...
?> 
```

登录.php

```
<?php
session_start();
if (isset($_SESSION['comp_id']))
{
    header('Location: index.php');
}
$_SESSION['comp_id'] = 3;
?> 
```

我通过 ajax 调用 login.php：

```
$.ajax(
{
  type: 'POST',
  url: 'login.php',
  data: {'login': login, 'password': hpass},
  success: function(data)
  {
    console.log("ajax: [comp_id]=" + data + "\n");
    window.location = "index.php";
  }
}); 
```

重定向到我的 index.php 后 $_SESSION['comp_id'] 为空。我在这里做错了什么？提前致谢。

编辑：忘了提到这些页面在社交网络的 iframe 应用程序中。也许这就是问题所在？

编辑：问题肯定出在 iframe 中。我的本地机器上的会话很好。任何想法如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T20:48:06.317

您必须调用 session_start(); 在使用会话的每个页面的开头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T22:19:35.007

[http://pt2.php.net/manual/en/function.session-write-close.php](http://pt2.php.net/manual/en/function.session-write-close.php)

尝试调用 session_write_close(); 在你做“登录”之后

检查页面中的 session_id 是否都相等。

另见：

> 当 session.use_trans_sid 启用时， session_start() 函数将注册一个用于 URL 重写的内部输出处理程序。

在 session_start

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T10:42:06.260

请咨询您的托管服务提供商，了解其 PHP 配置的详细信息，特别是它如何处理*会话*数据。

理想情况下，将他们的 php.ini 配置与您的本地（工作）配置进行比较。检查*会话*部分。

# php - PHP soapClient __getLastRequest() 仅返回 21d650036748112168d66622aa01185e8c

> ID：11004637
> 
> 赞同：1
> 
> 时间：2012-06-12T20:47:27.657
> 
> 标签：php, xml, soap

我正在尝试让我的 SOAP 客户端工作并且现在几个小时都面临着奇怪的行为：

```
$client = new SoapClient(".....", array('trace' => 1));
$result = $client->......();
echo "REQUEST:\n" . $client->__getLastRequest() . "\n"; 
```

这呼应： 21d650036748112168d66622aa01185e8c 但不是 XML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-21T14:39:50.130

查看源代码，您将看到 XML。其他可能性，使用 PHP htmlentities 函数来回显请求： echo "REQUEST:\n" 。htmlentities($client->__getLastRequest()) 。"\n";

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T14:38:43.433

我相信 user2903575 是正确的。您最有可能看到的是浏览器对 XML 信封的呈现。如果您转到通常的页面->查看源代码，或者使用 FireBug 或 Chrome 的 Inspect Element 之类的工具，您应该能够在其中看到整个 XML 请求。

# ruby-on-rails - 在另一个应用程序中包含 Rails 模型时的最佳实践

> ID：11004638
> 
> 赞同：1
> 
> 时间：2012-06-12T20:47:32.780
> 
> 标签：ruby-on-rails, ruby, gem, bundler

我正在开发一个 ruby​​ 应用程序，它使用来自另一个 Ruby on Rails Web 应用程序的模型和数据作为其主要数据源。

`environment.rb`通过将文件包含在主文件中，Rails 模型包含在此应用程序中，如下所示：

```
# Require Rails
 require_relative "../../RailsApp/config/environment.rb" 
```

这可行，但是在加载使用 Rails Gemfile 中定义的 gem 的模型时存在未初始化的依赖关系。（例如`acts_as_taggable_on, rack-pjax, devise`，等）

这个 ruby​​ 应用程序依赖项也通过 Bundler 进行管理，因此目前让应用程序工作的唯一方法是将 Rails 的 Gemfile 中的内容复制并粘贴到 ruby​​ 应用程序的 Gemfile 中。

显然，这种方法不是最优的，因为 gem 要求是重复的。

有没有更好的方法来包含 Rails 及其模型在另一个应用程序中所需的依赖项？有没有办法将 Gemfile 包含到另一个文件中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T20:53:36.800

这里有一些选项，为了简单起见

1.  只需将所有内容保存在一个应用程序中，这样就可以轻松完成很多事情
2.  使用插件共享通用代码
3.  使用 Web 服务共享数据

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T20:55:50.290

您可以将模型和代码从 RailsAppA 提取到 Gem 中。RailsAppA 然后包含该 Gem 并使用它。

gem 可以保留在私有存储库中，不需要发布。

然后，这两个应用程序都会执行以下操作：

```
gem "yourapp-modelage", git: "http://github.com/you/yourapp-modelage.git" 
```

然后，App2 也将使用该 Gem ... Gem 中的多少将取决于您需要重用多少。

# php - 在字符串中搜索具有特定域名的电子邮件地址

> ID：11004641
> 
> 赞同：-1
> 
> 时间：2012-06-12T20:47:47.677
> 
> 标签：php, regex

如何从文本中获取具有这些域名的所有电子邮件

```
[@yahoo.com, @google.com, @bla.net] 
```

在一个正则表达式中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:53:42.777

```
\b[^ ]+@(yahoo\.com|google\.com|bla\.net)\b 
```

这匹配：

![在此处输入图像描述](../Images/986f8ada85f4139ba6cf1e9e1a62473b.png)

在 php 中，这变成

```
preg_match_all('/\b[^@]*@(yahoo\.com|google\.com|bla\.net)\b/', $subject, $result, PREG_PATTERN_ORDER);
for ($i = 0; $i < count($result[0]); $i++) {
    # Matched text = $result[0][$i];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T20:54:12.473

以下是修改当前正则表达式以接受这些域的方法：

```
^[a-zA-Z0-9]+@(?:blabla\.com|google\.com|bla\.net)$ 
```

`(?:...)`这使用了一个具有交替的非捕获组，`...|...`以便您的正则表达式将接受您列出的任何域。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T20:56:55.190

\b[a-zA-Z0-9._%-]+@(yahoo|google|bla)+.[a-zA-Z]{2,4}\b

如果你想构建或测试正则表达式，我也推荐[Expresso 。](http://www.ultrapico.com/Expresso.htm)

# firefox - 有什么方法可以停止/中断 Firefox 中的 CSS3 过渡动画？

> ID：11004644
> 
> 赞同：1
> 
> 时间：2012-06-12T20:48:02.603
> 
> 标签：firefox, css, transitions

我正在使用 FF 版本 13.0，并且设置了在 :hover 上发生的过渡动画。一旦我不再悬停，我希望元素恢复到原来的状态。但是会发生什么是元素继续动画，直到它到达它的最终目的地，然后返回到它的原始状态。在 Chrome/Safari (webkit) 中，元素的行为符合预期。我创建了一个非常基本的 jsfiddle 作为示例：http: [//jsfiddle.net/isbhod/YvMJz/](http://jsfiddle.net/isbhod/YvMJz/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:54:46.000

想通了：由于未知原因，悬停在其上的元素需要在悬停事件之前和之后具有相同的位置样式，以免影响 FireFox 中的 CSS3 过渡。我已经删除了 JS 小提琴，但无论如何都不像任何人看到的那样。

# mysql - 如何使索引良好的 MySQL 表有效连接

> ID：11004651
> 
> 赞同：1
> 
> 时间：2012-06-12T20:48:25.573
> 
> 标签：mysql, performance, join, indexing

这是第一个表“tbl1”：

```
+---------+---------------------+------+-----+---------+----------------+
| Field   | Type                | Null | Key | Default | Extra          |
+---------+---------------------+------+-----+---------+----------------+
| val     | varchar(45)         | YES  | MUL | NULL    |                |
| id      | bigint(20) unsigned | NO   | PRI | NULL    | auto_increment |
+---------+---------------------+------+-----+---------+----------------+ 
```

用它的索引：

```
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| tbl1  |          0 | PRIMARY  |            1 | id          | A         |   201826018 |     NULL | NULL   |      | BTREE      |         |
| tbl1  |          1 | val      |            1 | val         | A         |     2147085 |     NULL | NULL   | YES  | BTREE      |         |
| tbl1  |          1 | id_val   |            1 | id          | A         |   201826018 |     NULL | NULL   |      | BTREE      |         |
| tbl1  |          1 | id_val   |            2 | val         | A         |   201826018 |     NULL | NULL   | YES  | BTREE      |         |
| tbl1  |          1 | val_id   |            1 | val         | A         |     2147085 |     NULL | NULL   | YES  | BTREE      |         |
| tbl1  |          1 | val_id   |            2 | id          | A         |   201826018 |     NULL | NULL   |      | BTREE      |         |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

（一些额外索引的原因是： http: [//bit.ly/KWx1Xz](http://bit.ly/KWx1Xz)。）

第二张桌子也差不多。以下是它的索引基数：

```
+--------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table  | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+--------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| tbl2   |          0 | PRIMARY  |            1 | id          | A         |   201826018 |     NULL | NULL   |      | BTREE      |         |
| tbl2   |          1 | val      |            1 | val         | A         |      881336 |     NULL | NULL   | YES  | BTREE      |         |
| tbl2   |          1 | id_val   |            1 | id          | A         |   201826018 |     NULL | NULL   |      | BTREE      |         |
| tbl2   |          1 | id_val   |            2 | val         | A         |   201826018 |     NULL | NULL   | YES  | BTREE      |         |
| tbl2   |          1 | val_id   |            1 | val         | A         |      881336 |     NULL | NULL   | YES  | BTREE      |         |
| tbl2   |          1 | val_id   |            2 | id          | A         |   201826018 |     NULL | NULL   |      | BTREE      |         |
+--------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

任务是将它们内部连接到 val 列并获取 id 的列表（并在 1 秒内完成）。

这是“加入”方法：

```
SELECT tbl1.id FROM tbl1 JOIN tbl2 ON tbl1.val = 'iii' AND tbl2.val = 'iii' AND tbl1.id = tbl2.id; 
```

结果：集合中有 10831 行（**55.15 秒**）

查询说明：

```
+----+-------------+--------+--------+----------------------------------+---------+---------+---------------------------+------+--------------------------+
| id | select_type | table  | type   | possible_keys                    | key     | key_len | ref                       | rows | Extra                    |
+----+-------------+--------+--------+----------------------------------+---------+---------+---------------------------+------+--------------------------+
|  1 | SIMPLE      | tbl1   | ref    | PRIMARY,val,id_val,val_id        | val_id  | 138     | const                     | 5160 | Using where; Using index |
|  1 | SIMPLE      | tbl2   | eq_ref | PRIMARY,val,id_val,val_id        | PRIMARY | 8       | search_test.tbl1.id       | 1    | Using where              |
+----+-------------+--------+--------+----------------------------------+---------+---------+---------------------------+------+--------------------------+ 
```

这是'in'方法：

```
SELECT id FROM tbl1 WHERE val = 'iii' and id IN (SELECT id FROM tbl2 WHERE val = 'iii'); 
```

结果：集合中有 10831 行（**1 分 10.15 秒**）

解释：

```
+----+--------------------+--------+-----------------+---------------------------------+---------+---------+-------+------+--------------------------+
| id | select_type        | table  | type            | possible_keys                   | key     | key_len | ref   | rows | Extra                    |
+----+--------------------+--------+-----------------+---------------------------------+---------+---------+-------+------+--------------------------+
|  1 | PRIMARY            | tbl1   | ref             | val,val_id                      | val_id  | 138     | const | 8553 | Using where; Using index |
|  2 | DEPENDENT SUBQUERY | tbl2   | unique_subquery | PRIMARY,val,id_val,val_id       | PRIMARY | 8       | func  |    1 | Using where              |
+----+--------------------+--------+-----------------+---------------------------------+---------+---------+-------+------+--------------------------+ 
```

那么，问题来了：如何调整这个查询让 MySQL 在一秒钟内完成它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:53:27.250

```
SELECT tbl1.id FROM tbl1 JOIN tbl2 ON tbl1.id = tbl2.id and tbl1.val = tbl2.val
where tbl1.val = 'iii'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T21:17:15.707

好的，我已经在每个表的 30,000 多条记录上进行了测试，它运行得非常快。

按照目前的情况，您目前正在对两个大型表执行连接，但是如果您首先在每个表上扫描“val”上的匹配项，这将大大减少连接集的大小。

我最初将这个答案发布为一组子查询，但我没有意识到 MySQL 在嵌套子查询中的速度非常慢，因为它是从外向内执行的。但是，如果将子查询定义为视图，它会从内向外运行它们。

因此，首先创建视图。

```
CREATE VIEW tbl1_iii AS (
SELECT * FROM tbl1 WHERE val='iii'
);
CREATE VIEW tbl2_iii AS (
SELECT * FROM tbl2 WHERE val='iii'
); 
```

然后运行查询。

```
SELECT tbl1_iii.id from tbl1_iii,tbl2_iii
WHERE tbl1_iii.id = tbl2_iii.id; 
```

闪电。

# java - Java PopupMenu 复选框系统托盘

> ID：11004652
> 
> 赞同：0
> 
> 时间：2012-06-12T20:48:43.113
> 
> 标签：java, swing, popupmenu, jpopupmenu

我正在制作一个应用程序，我希望在我的 java popupmenu（如下所示）中有一个复选框，用于在启动时运行该选项。

这是弹出菜单：http : [//imgur.com/ZiF2Z](http://imgur.com/ZiF2Z)

我如何将“启动时运行”选项设为复选框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T21:00:57.963

看看[`CheckboxMenuItem`](http://docs.oracle.com/javase/7/docs/api/java/awt/CheckboxMenuItem.html)您是使用 AWT 还是[`JCheckBoxMenuItem`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JCheckBoxMenuItem.html)使用 Swing。

# android - 如何在处理程序中启动活动

> ID：11004654
> 
> 赞同：0
> 
> 时间：2012-06-12T20:48:50.807
> 
> 标签：android, android-intent, android-activity

试图从处理程序触发 Activity。我的另一个选择是从广播接收器触发。这是我尝试过的，但它不起作用。

```
public void handleMessage(Context context, Intent intent) 
{
    Log.v(tag,"handling message.........");

    String messageString = intent.getExtras().getString("message");

    C2DMMessage newC2DMMessage = new C2DMMessage(messageString);

    Intent mIntent = new Intent(context,popad.class);
    context.startActivity(mIntent);

    String message_body = String.valueOf(newC2DMMessage.getParamValue("message_body"));
    Toast.makeText(context, "message was recieved!!!!: '" + message_body + "'", Toast.LENGTH_LONG).show();

} 
```

对更好的开始活动方式的建议持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:51:39.077

您在 Logcat 中遇到的任何错误都会对您的问题最有帮助尝试更改：

```
Intent mIntent = new Intent(context,popad.class);
context.startActivity(mIntent); 
```

到 ：

```
Intent mIntent = new Intent(context,popad.class);
mIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(mIntent); 
```

# java - 标记 SEEN 无法与 Yahoo! 合作 邮件？

> ID：11004655
> 
> 赞同：1
> 
> 时间：2012-06-12T20:48:55.380
> 
> 标签：java, jakarta-mail, yahoo, pop3

我正在使用 JavaMail API 来获取邮件。今天早些时候，我通过 Gmail 成功地做到了这一点。现在我尝试了雅虎邮箱，它也有效。

但是有一个问题：

它不显示邮件是否已被正确阅读。我有一个邮箱，里面装满了已读过的邮件，尽管应用程序说我还没有。

我使用它来确定是否已获取的邮件已被阅读：

```
 String isRead = (message[i].getFlags().contains(Flags.Flag.SEEN) ? "Yes" : "No"); 
```

它适用于 Gmail。只是没有雅虎邮箱。有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:40:51.863

你使用什么协议？我知道 Gmail 支持 IMAP，所以我认为这就是您在那里使用的。雅虎有吗？如果它们只支持 POP3，那么这些标志将不起作用，因为 POP3 不支持标志。

尝试查看 Folder.getPermanentFlags() 返回的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:09:19.267

呃，雅虎邮箱坏了？

如果设置标志，它会保持设置吗？

您相信通过查看网络邮件界面已经阅读了该消息，对吗？设置标志是否会更改 Web 邮件界面中的任何内容？

# python - Cython 中的 numpy“类型标识符”和“类型”有什么区别？

> ID：11004659
> 
> 赞同：8
> 
> 时间：2012-06-12T20:49:17.130
> 
> 标签：python, numpy, cython

令人困惑的是，如果你想创建一个你使用的数组

```
chunk = np.array ( [[94.,3.],[44.,4.]], dtype=np.float64) 
```

但是如果你想在`buffer`引用中定义类型，你可以使用

```
cdef func1 (np.ndarray[np.float64_t, ndim=2] A):

    print A 
```

`np.float64`注意和之间的区别`np.float64_t`。

**我的猜测**

我猜 a`type identifier`是使用 Cython C-like`typedef`语法显式创建的

```
ctypedef np.float64_t dtype_t 
```

但是 numpy`type`只是 Python`<type 'type'>`类型。

```
>>> type ( np.float64)
<type 'type'> 
```

s 上的 Numpy 文档对`dtype`我没有帮助。[http://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html](http://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T03:34:49.720

在您的 cython 代码中，您可以：

```
import numpy as np
cimport numpy as np 
```

第一行在 python 空间中导入 numpy 模块，但第二行仅在 cython 空间中包含 numpy.pxd。

您可以在 cython 安装文件夹中找到 numpy.pxd。它将 float64_t 定义为：

```
ctypedef double       npy_float64
ctypedef npy_float64    float64_t 
```

# powershell - 从 CMD 返回错误代码到 Powershell

> ID：11004666
> 
> 赞同：6
> 
> 时间：2012-06-12T20:49:53.600
> 
> 标签：powershell, cmd

我正在处理 Mssql 安装脚本，我想获得静默 mssql 安装的结果。在我的 PowerShell 脚本中，我运行以下命令：

```
$result = (start cmd "/c D:\SQL2008R2\SQL2008R2\setup.exe /CONFIGURATIONFILE=sqlconfig.ini && exit 0 || exit 1") 
```

失败时应返回 0，通过时应返回 1。不幸的是，我没有得到任何输出。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T23:53:16.957

一个替代方法`Start-Process`是语法上更简洁的调用操作符`&`。

```
& cmd.exe /c 'ping.exe doesnotexist && exit 0 || exit 1' 
```

退出代码将包含在内置变量中`$LASTEXITCODE`，因此：

```
Write-Host $LASTEXITCODE 
```

这将包含程序运行的退出代码，因此您不必使用 CMD.exe 运行它，您可以这样做：

```
& ping.exe doesnotexist ; Write-Host $LASTEXITCODE 
```

应用于您的命令行程序：

```
& cmd.exe /c 'D:\SQL2008R2\SQL2008R2\setup.exe /CONFIGURATIONFILE=sqlconfig.ini && exit 0 || exit 1' 
```

要不就：

```
& D:\SQL2008R2\SQL2008R2\setup.exe /CONFIGURATIONFILE=sqlconfig.ini 
```

在这两种情况下`$LASTEXITCODE`都应该为 0 表示成功，否则为非零（如果外部程序编写正确）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T20:55:11.413

这就是你的做法：`start`实际上是一个 alias `Start-Process`，所以你必须查看*它的*文档，这与 cmd.exe 的 有很大不同`start`。所以你可以这样做：

```
(Start-Process -FilePath "cmd.exe /c ..." -Wait -Passthru).ExitCode 
```

太简单！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-26T03:21:36.077

也许为时已晚，但这有帮助吗？

```
start /WAIT cmd.exe /C "YOUR-COMMAND-HERE" & if errorlevel 1 echo 'error occurred' 
```

您还可以显式返回如下错误代码：

```
start /WAIT cmd.exe /C "YOUR-COMMAND-HERE & exit MY-ERROR-CODE" & if errorlevel 1 echo 'error occurred' 
```

# c - C 编程：strtol() 和处理 NUL 字节

> ID：11004671
> 
> 赞同：2
> 
> 时间：2012-06-12T20:50:02.117
> 
> 标签：c, char, hex

假设我有一个地址和一个偏移量，例如：

```
 char* base_addr = "\x00\x00\x00\xb7";
   char* addr_offset = (user input); 
```

我想将 base_addr 和 addr_offset 一起添加。我是否必须编写自己的 strtol() 函数，该函数不会在 NUL 处终止，或者是否有另一种方法可以成功添加两个地址？

编辑：

忘了说这是Linux x86。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:53:56.510

`base_addr`实际上是一个 32 位整数值，恰好是使用字节常量硬编码的。您应该简单地将指针的类型转换为`unsigned long`，然后调用`strtol()`用户输入的字符串，并将两者相加。

以这种方式使用字符串对指针进行硬编码是很糟糕的。一方面，C 会在字符串的末尾添加一个 NUL 字节，所以现在您的 32 位值需要 5 个字节，并且添加了填充字节后，您最终可能会使用 8 个字节来存储您的指针，正好是需要的两倍. 最好这样做：

```
char base_addr[] = {'\x00', '\x00', '\x00', '\xb7'}; 
```

最好直接说出你的意思，只要编译器允许你进行类型转换：

```
unsigned char *base_addr = (unsigned char *)0xb7000000; 
```

我刚刚检查过，GCC 允许您在没有错误或警告的情况下执行上述操作。

编辑：哦，好吧，真正的问题是如何访问整数值内的字节。

您应该能够通过弄乱指针来做到这一点：

```
unsigned long base_adr = 0xb700000000;
unsigned char *p = (unsigned char *)&base_adr; 
```

上述技巧适用于整数类型。另一种方法是使用 C 联合：

```
typedef union
{
    char bytes[4];
    unsigned long n;
    unsigned char *ptr;
} ADR_WINDOW;

ADR_WINDOW x;

x.n = 0xb700000000;
assert(x.bytes[3] == 0xb7); // on a little-endian computer
assert(x.bytes[0] == 0xb7); // on a big-endian computer 
```

union 技巧适用于任何类型，并且是唯一可移植的方法来执行低俗技巧，例如查看浮点值中的位。

# flash - 可以在大多数浏览器上运行的最旧版本的 Flash 播放器是什么

> ID：11004676
> 
> 赞同：1
> 
> 时间：2012-06-12T20:50:14.597
> 
> 标签：flash

在构建一个简单的 swf 文件时，我是否有充分的理由不让它与 flash player 6 和 actionscript 2.0 兼容，以便最大限度地提高所有浏览器的兼容性？

如果我有充分的理由不应该这样做，那么我应该使用的最旧版本是什么？

注意：我正在为网站使用渐进增强，但我想在尽可能多的浏览器上获取 Flash 电影。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:58:05.673

首先，您不是在分发 Flash Player。您正在制作一个可在 Flash Player 中使用的 swf。在这种情况下，您可以为支持您正在使用的方法的最旧版本进行创作。当前的 Flash 播放器向后兼容。

您可以在此处了解人们拥有哪些版本的 Flash Player：http: [//www.adobe.com/products/flashplatformruntimes/statistics.html](http://www.adobe.com/products/flashplatformruntimes/statistics.html)

如果这只是一个视频，那么也可以考虑使用 HTML5，使用类似 video.js 的东西来根据平台切换视频。我并不认为 Flash 是一种“渐进式增强”——CSS3 或 HTML5 将是“渐进式增强”。

我不会质疑您对 Flash 的使用，因为我不知道您的目标是什么。我只是建议，如果您还没有，请仔细考虑为什么要使用 Flash 以及是否有更好的选择。此外，请确保您不会为大多数用户造成问题（例如 AS2 迟缓），只是为了能够为少数用户服务。

# c# - 与 Active Directory 集成的 .NET 应用程序的单点登录

> ID：11004678
> 
> 赞同：9
> 
> 时间：2012-06-12T20:50:40.993
> 
> 标签：c#, active-directory, single-sign-on, adfs2.0, adfs

我们有几个客户使用我们的 Web 应用程序（不是 Intranet），一些客户希望他们的登录应该与他们的组织 Active Directory 集成。他们只是希望该用户应该登录到他们的 Windows 帐户，并且可以在不输入任何用户凭据的情况下访问 Web 应用程序。

我已经阅读了一些关于 ADFS 的文章，但仍然不确定如何集成或实现它。任何建议的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T18:31:05.513

如果您开发基于 .NET 的应用程序，Microsoft 提供了一个名为[WIF](https://docs.microsoft.com/en-us/dotnet/framework/security/wif-overview)的库，该库用于以 +- 舒适的方式与 AD FS 进行通信（配置 + 少量代码调整以从 AD FS 提供的身份验证消息中获取声明）。

AD FS 2.0 和 WIF 支持的协议很少，为了使 SSO 工作，最常见的协议是 (afaik) [SAML 2.0](http://docs.oasis-open.org/security/saml/v2.0/saml-profiles-2.0-os.pdf)和 WS-Federation。两者都是基于 XML 消息构建的，但如果您使用 WIF，则不需要了解详细信息。

对于 WS - Federation，WIF 库为 Visual Studio 提供了一个插件，它允许您将您的站点配置为 AD FS 的依赖方。

您可以使用数据库中的凭据来识别用户，您实际上可以[自定义](http://msdn.microsoft.com/en-us/library/ee895365)AD FS 的整个登录页面和身份验证事件。但是，基本安装需要在您的 Active Directory 中定义每个用户。您还可以将数据库用作声明存储（另一个数据库 AD FS 将用于为依赖应用程序提供有关用户的信息）。请注意，如果您打算在 AD FS 后面使用 AD，您的 AD FS 服务必须能够访问它并且 LDAP 查询它，如果您的用户登录到他们的本地域，我不确定这是否适合您AD FS 不熟悉。

如果您不需要支持行业 SSO 标准协议（我已经提到过 SAML 2.0），我不确定实施 AD FS 是否会是一个很好的解决方案。它迫使你以某种方式工作，这并不总是那么舒服。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:30:20.997

您的问题没有明确说明您是否仅限于使用 ADFS 来实施 SSO。ADFS 无疑是实现此目的的一种方式。您可能希望查看 OpenID-LDAP [^(（位于 www.openid-ldap.org，但该项目现已不存在）)]和其他[身份提供者](http://wiki.openid.net/w/page/12995226/Run%20your%20own%20identity%20server)作为实现 SSO 的替代方案。

一种替代方法是实现一个使用集成 Windows 身份验证的 OpenID 提供程序。他们可以将其安装在他们的 DMZ 中，而不是 ADFS 将其安装到互联网上。它可能允许从 Internet Explorer 和 Chrome 进行单点登录。

实现 OpenID 提供者并非易事。您必须密切注意安全性。幸运的是，有许多像[DotNetOpenAuth](http://www.dotnetopenauth.net/)这样的框架可以帮助你。

使用 OpenID 时，您的“云”应用程序将充当 OpenID 依赖项，并从 OpenID 提供者那里获得声明的标识符以及其他属性。您应该将其存储在数据库中以唯一标识用户。您可以选择实施 OpenID 提供程序，以便它还可以为您的云应用程序提供最少的信息，例如电子邮件地址、人名等。

使用 OpenID 的好处是您的“云”应用程序可以继续支持其他知名的 OpenID 提供商，例如 Google 和 Yahoo，而无需进行太多更改。

最后，您需要询问您的客户他们对哪些技术感到满意。您会发现组织之间缺乏信任（一种业务特征）往往是挑战而不是技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T00:55:00.063

根据评论需要更多细节。

这里有一个很好的来源：[AD FS 2.0 Content Map](http://social.technet.microsoft.com/wiki/contents/articles/2735.ad-fs-2-0-content-map.aspx)。

“电子书”就[在这里](http://msdn.microsoft.com/en-us/library/ff423674.aspx)。

我可以想象一种场景，您将云应用程序绑定到 Azure ACS，您的客户将 ADFS 安装在他们的 AD 之上并将他们的 ADFS 与 ACS 联合。这将为您提供所需的功能。

**评论后更新：**

ADFS 只能针对 AD 进行身份验证。它无法针对数据库进行身份验证。它可以从 SQL Server DB 中获取属性，然后将其转换为声明，即它可以使用 SQL DB 进行授权。

如果要针对 SQL DB 进行身份验证，可以有两种选择。

1.  创建自定义 STS
2.  使用允许此功能的现有“自定义”STS，例如[Identity Server 。](http://identityserver.codeplex.com/)

# codeigniter - CodeIgniter 系统文件夹

> ID：11004683
> 
> 赞同：0
> 
> 时间：2012-06-12T20:51:09.403
> 
> 标签：codeigniter

不知何故，我不确定如何在生产环境中使用 3.0-dev 版本的 CI。我想用 2.1 替换它，但不确定如何替换。我可以只上传 2.1 系统文件夹来覆盖 3.0-dev 文件夹还是我需要做更多的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:53:05.990

是的。CI 中的升级（以及类似的降级）仅通过替换`system`文件夹来实现。

注意：这是假设您遵循与 CI 相关的最佳实践（即，您进行了自定义控制器/模型/库/助手等所需的任何更改，并且没有对核心文件本身进行更改。

我还强烈建议您仔细阅读 CI 3.0 变更日志，并确保您处理任何使用已添加到 3.0 并且在 2.1 中不存在的功能的情况。

CI 3.0 变更日志：[http ://codeigniter.com/nightly_user_guide/changelog.html](http://codeigniter.com/nightly_user_guide/changelog.html)

# database - VB.NET 位置 0 没有行

> ID：11004686
> 
> 赞同：0
> 
> 时间：2012-06-12T20:51:20.620
> 
> 标签：database, vb.net, datagridview

这是我在 Families 表的数据网格视图的“双击”事件中的代码 - 为了在表单上显示详细信息：

“showrow()”是根据数据库索引填写表单的子程序。dsFamilies- DataSet, daFamilies-DataAdapter, counter - 一个全局变量

```
Private Sub dtgFamilies_CellContentDoubleClick(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles dtgFamilies.CellContentDoubleClick

    counter = e.RowIndex
    ShowRow() // the problem: "There is no row at position 0" while my Data Base is //abound with data.
    Dim i As Integer = 0
    For i = 0 To (dsFamilies.Tables.Item("tblFamilies").Rows.Count - 1)
        If (dsFamilies.Tables("tblFamilies").Rows(i).Item("familyId") = dtgFamilies.Rows(counter).Cells(0).Value) Then
            counter = i
            ShowRow()

        End If
    Next
    tbControlFml.SelectTab(1)
End Sub

Sub ShowRow()

    txtId.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyId")
    txtFirstName.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyFirstName")
    txtLastName.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyLastName")
    txtStreet.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyAdress")
    comboCity.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyCity")
    txtHouseNum.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyHouseNum")
    txtPhoneNum.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyTeleNum")
    txtCellNum.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyCellNum")
    txtEmail.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyEmail")
    txtNumPeoFamily.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyPeopleNum")
    chkChild.Checked = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyChildren")
    chkChild.Checked = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyBaby")
    comboPckType.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyPackgId")
    chkAvailable = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyAvailable")
    comboEntityApp = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyAppEntityId")
    dtpJoin.Value = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyJoinDate")
    txtRemark.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyRemark")

    Dim subPhone As String = txtPhoneNum.Text.Substring(0, 2)
    Dim subCellPhone As String = txtCellNum.Text.Substring(0, 3)
    If ((subPhone = "077") Or (subPhone = "02") Or (subPhone = "03") Or (subPhone = "04") Or (subPhone = "08") Or (subPhone = "09")) Then
        comboPhoneIni.Text = subPhone
        txtPhoneNum.Text = txtPhoneNum.Text.Substring(2, 7)
    End If
    If ((subCellPhone = "050") Or (subCellPhone = "052") Or (subCellPhone = "054") Or (subCellPhone = "057")) Then
        comboCellIni.Text = subCellPhone
        txtCellNum.Text = txtCellNum.Text.Substring(3, 7)
    End If

End Sub 
```

我想得到你能提供的任何信息。谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T22:29:13.077

这意味着这些使用不包括 DGV 行的数据库结果的计数值：

```
 Private Sub dtgFamilies_CellContentDoubleClick(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles dtgFamilies.CellContentDoubleClick 
        For i As Int16 = 0 To dtgFamilies.Rows.Count - 1 
            For e As Int16 = 0 To (dsFamilies.Tables.Item("tblFamilies").Rows.Count - 1) 
                If (dsFamilies.Tables("tblFamilies").Rows(e).Item("familyId") = dtgFamilies.Item(0, i).Value) Then 
                   counter = i 
                   Call ShowRow() 
                End If 
            Next e
        Next i
        tbControlFml.SelectTab(1) 
    End Sub 

    Sub ShowRow() 

        txtId.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyId") 
        txtFirstName.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyFirstName") 
        txtLastName.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyLastName") 
        txtStreet.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyAdress") 
        comboCity.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyCity") 
        txtHouseNum.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyHouseNum") 
        txtPhoneNum.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyTeleNum") 
        txtCellNum.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyCellNum") 
        txtEmail.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyEmail") 
        txtNumPeoFamily.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyPeopleNum") 
        chkChild.Checked = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyChildren") 
        chkChild.Checked = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyBaby") 
        comboPckType.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyPackgId") 
        chkAvailable = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyAvailable") 
        comboEntityApp = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyAppEntityId") 
        dtpJoin.Value = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyJoinDate") 
        txtRemark.Text = dsFamilies.Tables("tblFamilies").Rows(counter).Item("familyRemark") 

        Dim subPhone As String = txtPhoneNum.Text.Substring(0, 2) 
        Dim subCellPhone As String = txtCellNum.Text.Substring(0, 3) 
        If ((subPhone = "077") Or (subPhone = "02") Or (subPhone = "03") Or (subPhone = "04") Or (subPhone = "08") Or (subPhone = "09")) Then 
            comboPhoneIni.Text = subPhone 
            txtPhoneNum.Text = txtPhoneNum.Text.Substring(2, 7) 
        End If 
        If ((subCellPhone = "050") Or (subCellPhone = "052") Or (subCellPhone = "054") Or (subCellPhone = "057")) Then 
            comboCellIni.Text = subCellPhone 
            txtCellNum.Text = txtCellNum.Text.Substring(3, 7) 
        End If 

    End Sub 
```

它将逐一比较。

# makefile - 在不使用 CMake 时执行之前制作 make 打印命令

> ID：11004695
> 
> 赞同：50
> 
> 时间：2012-06-12T20:52:16.067
> 
> 标签：makefile

我看到这是同一个问题

[在执行之前制作 cmake 打印命令](https://stackoverflow.com/questions/4808303/making-make-print-commands-before-executing)

但这个答案对我不起作用。我猜这个答案只适用于cmake。没有 cmake，哪些选项有效？

注意尝试了这些

```
make VERBOSE=1 target
make target VERBOSE=1
VERBOSE=1 make target
make V=1 target
make target V=1
V=1 make target
make -V target
make -v target 
```

他们都没有工作。

make -v 返回

```
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for x86_64-pc-linux-gnu 
```

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-06-13T12:45:00.000

默认情况下，`make`在执行之前打印每个命令。可以通过以下机制之一抑制此打印：

*   根据具体情况，`@`在命令开头添加
*   全局，通过添加 .SILENT 内置目标。
*   在制作过程中的某个地方，通过调用带有标志之一的子制作`-s`，`--silent`或者`--quiet`，`$(MAKE) --silent -C someDir`例如，例如。从那一刻起，命令回显在子制作中被抑制。

如果您的 makefile 没有打印命令，那么它可能使用了这三种机制之一，您必须实际检查 makefile 以确定是哪一种。

作为避免这些回声抑制机制的解决方法，您可以重新定义要用于使用调试模式的 shell，例如`make SHELL="/bin/bash -x" target`. 其他 shell 也有类似的选项。使用这种方法，它不是`make`打印命令，而是打印 shell 本身。

如果您使用标志`-n`或`--just-print`，回声抑制机制将被忽略，您将始终看到所有`make`认为应该执行的命令——但它们实际上并没有被执行，只是被打印出来。这可能是确定您实际期望看到的内容的好方法。

该`VERBOSE`变量对 没有标准含义`make`，但前提是您的 makefile 解释了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-11T22:54:33.670

对于我的 make 版本，我找到了这两个参数`-n`并提供`-d`了帮助。

> GNU Make 3.80 版权所有 (C) 2002 Free Software Foundation, Inc

```
 -d                          Print lots of debugging information.
  -n, --just-print, --dry-run, --recon
                              Don't actually run any commands; just print them. 
```

当包含一堆 makefile 片段时，如果没有这个关键调试标志，行号就没有意义。

```
CreateProcess(....exe,...)
Reading makefile `../../../../build/Makefile.options' (search path) (don't care) (no ~ expansion)...
Makefile:361: Extraneous text after `else' directive
Makefile:368: Extraneous text after `else' directive
Makefile:368: *** only one `else' per conditional.  Stop. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:57:12.850

我认为这就是你想要的：make MAKE_VERBOSE=1 target

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-16T08:56:15.483

在我的情况下，我能够通过在我的 make 文件顶部设置以下变量来抑制输出中的命令

```
# Use `make V=1` to print commands.
$(V).SILENT: 
```

在你的文件顶部添加上面的行，当你调用任何目标时它不会打印

前 ：

```
muhasan@admins-MacBook-Pro fx.identitymanagement % make dockerstatus
cd identity.API/ && docker-compose ps 
        Name                       Command              State           Ports         
--------------------------------------------------------------------------------------
identityapi_backend_1   dotnet Identity.API.dll         Up      0.0.0.0:5000->80/tcp  
identityapi_db_1        docker-entrypoint.sh postgres   Up      0.0.0.0:5432->5432/tcp
muhasan@admins-MacBook-Pro fx.identitymanagement % 
```

后 ：

```
muhasan@admins-MacBook-Pro fx.identitymanagement % make dockerstatus
        Name                       Command              State           Ports         
--------------------------------------------------------------------------------------
identityapi_backend_1   dotnet Identity.API.dll         Up      0.0.0.0:5000->80/tcp  
identityapi_db_1        docker-entrypoint.sh postgres   Up      0.0.0.0:5432->5432/tcp
muhasan@admins-MacBook-Pro fx.identitymanagement % 
```

我的 Makefile

```
# Use `make V=1` to print commands.
$(V).SILENT:
Path = identity.API
builddocker:
    cd devops && cp -rv Dockerfile docker-compose.yml ../${Path}/ && cd ..
installdocker:
    cd ${Path}/ && docker-compose up -d
dockerstatus:
    cd ${Path}/ && docker-compose ps 
```

# git - git log 报告回到项目的开始

> ID：11004696
> 
> 赞同：1
> 
> 时间：2012-06-12T20:52:17.160
> 
> 标签：git

git 有没有办法让日志报告返回几个月或从整个项目返回到所有推送到主分支的日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:04:40.313

如果你想有一个开始，你可以做`git log --reverse`。

请注意，如果您尝试 git log -5 --reverse，您将获得最后 5 个，然后将其反转。如果您想说 5 次首次提交，您可以执行类似的操作

```
git --no-pager log --reverse --oneline | head -5 
```

（提供合适的参数来记录您想要查看的信息）。

如果你只想要一个定义的时间跨度，你可以做类似的事情

```
git log --since=2.months.ago --until=1.day.ago 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T21:08:32.873

`git`本身不会保留推送日志。根据正在使用的推送传输（http、git+ssh 或 git-daemon），如果已创建日志文件条目（并且仍然存在），您可能可以从相应的日志文件中收集该信息。如果没有，您至少可以重新配置它们以在将来登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:54:16.623

`git log origin/master`将显示远程 master 分支的整个沿袭，其中将包括您推送到 master 的任何内容（假设 master 从未重绕）。

# ios - iOS - 使用外观全局更改导航栏标题颜色？

> ID：11004700
> 
> 赞同：22
> 
> 时间：2012-06-12T20:52:44.767
> 
> 标签：ios

这会使应用程序崩溃：

```
[[UINavigationBar appearance] setTitleColor:[UIColor darkGrayColor] forState:UIControlStateNormal]; 
```

有没有办法使用外观来做到这一点？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-12T21:21:11.570

这有效：

```
NSDictionary *textTitleOptions = [NSDictionary dictionaryWithObjectsAndKeys:[UIColor darkGrayColor], UITextAttributeTextColor, [UIColor whiteColor], UITextAttributeTextShadowColor, nil];
[[UINavigationBar appearance] setTitleTextAttributes:textTitleOptions]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-15T11:38:57.853

以下是如何在 Swift 中执行此操作的示例：

```
UINavigationBar.appearance().titleTextAttributes =
  [NSFontAttributeName:UIFont(name:"Exo2-Bold", size: 18) as! AnyObject,
  NSForegroundColorAttributeName:UIColor.whiteColor()] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T20:55:57.370

在 UINavigationBar 没有标题或状态之前使应用程序崩溃......这些是 UIButton 方法

你需要

```
[[UINavigationBar appearance] setTintColor:[UIColor darkGrayColor]]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-18T08:18:53.753

@RyJ 的答案很棒，对我有用。我想我会在 Ray Wenderlich 的网站上有一个很好的教程，标题为（请原谅双关语）：

[iOS 6 中的用户界面自定义](http://www.raywenderlich.com/21703/user-interface-customization-in-ios-6)

请参阅**自定义 UINavigationBar部分**

这是导航栏标题的代码片段，可以全局更改：

```
// Customize the title text for *all* UINavigationBars
[[UINavigationBar appearance] setTitleTextAttributes:
 [NSDictionary dictionaryWithObjectsAndKeys:
  [UIColor colorWithRed:255.0/255.0 green:255.0/255.0 blue:255.0/255.0 alpha:1.0],
  UITextAttributeTextColor,
  [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.8],
  UITextAttributeTextShadowColor,
  [NSValue valueWithUIOffset:UIOffsetMake(0, -1)],
  UITextAttributeTextShadowOffset,
  [UIFont fontWithName:@"Arial-Bold" size:0.0],
  UITextAttributeFont,
  nil]]; 
```

另一个小问题是标题栏上似乎有一个默认阴影，所以要摆脱它，你不能只删除该属性。相反，您必须设置阴影偏移：

```
UITextAttributeTextShadowOffset : [NSValue valueWithUIOffset:UIOffsetMake(0, 0)] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-11-18T15:11:55.980

适用于 iOS 15

```
let appearance = UINavigationBarAppearance()
appearance.configureWithOpaqueBackground()
appearance.backgroundColor = <PREFERRED BACKGROUND COLOR>
appearance.titleTextAttributes = [.foregroundColor : <PREFERRED TITLE COLOR>]
navigationBar.tintColor = <PREFERED TINT COLOR> //for bar buttons
navigationBar.standardAppearance = appearance;
navigationBar.scrollEdgeAppearance = navigationBar.standardAppearance 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-27T20:20:01.563

我使用以下代码更改标题栏的颜色。

```
NSShadow *shadow = [[NSShadow alloc] init];
shadow.shadowColor = [UIColor blackColor];
shadow.shadowOffset = CGSizeMake(1, 0);

NSDictionary *titleTextAttributes = @{NSForegroundColorAttributeName:[UIColor whiteColor],
                                            NSShadowAttributeName:shadow};

[[UINavigationBar appearance] setTitleTextAttributes:titleTextAttributes]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-18T23:14:40.293

使用实际运行的现代语法和代码，这是如何全局设置`UINavigationBar`标题文本的样式：

```
NSShadow *navigationBarTitleShadow = [[NSShadow alloc] init];
navigationBarTitleShadow.shadowColor = [UIColor colorWithWhite:0.5
                                                         alpha:0.5];
navigationBarTitleShadow.shadowOffset = CGSizeMake(2.0, 2.0);
[[UINavigationBar appearance] setTitleTextAttributes:@{ NSForegroundColorAttributeName : [UIColor blackColor],
                                                        NSFontAttributeName : [UIFont fontWithName:@"Arial-BoldMT"
                                                                                              size:30.0],
                                                        NSShadowAttributeName : navigationBarTitleShadow }]; 
```

注意：`NSShadow`的`shadowBlurRadius`属性不受尊重。

注意：阴影是如此 iOS 6。永远不要使用它们。

# javascript - 如何使用 js ajax 获取 xml 标签的名称

> ID：11004706
> 
> 赞同：0
> 
> 时间：2012-06-12T20:53:28.850
> 
> 标签：javascript, xml, ajax

我有一个 xml 文件，我正在使用 ajax 进行拆分：

```
<country name="UK">
        <person>
            <name>daniel</name>
            <age>25</city>
        </person>
        <person>
            <name>james</name>
            <age>22</city>
        </person>
        <person>
            <name>brandy</name>
            <age>16</city>
        </person>
        <person>
            <name>nathan</name>
            <age>66</city>
        </person>
    </country>
    <country name="france">
        <person>
            <name>paul</name>
            <age>28</city>
        </person>
        <person>
            <name>pierr</name>
            <age>22</city>
        </person>
    </country> 
```

我的任何 JS 看起来都像这样：

```
<script type="text/javascript">
function loadXMLDoc() {
xmlhttp=null;
xmlhttp=new XMLHttpRequest();
xmlhttp.onreadystatechange=function() 
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
          {
          xmlDoc=xmlhttp.responseXML;
          var txt="";
          x=xmlDoc.getElementsByTagName("name");
          for (i=0;i<x.length;i++)
            {
            txt=txt + x[i].childNodes[0].nodeValue + "<br />";
            }
          document.getElementById("myDivName").innerHTML=txt;
          //somehow get the country of that person to write here
          document.getElementById("myDivCountry").innerHTML=txt;

          }
      xmlhttp.open("GET","people.xml",true);
      xmlhttp.send();
      }

}
</script> 
```

JS 会打印这个人的名字，但是我如何得到那个人所属的国家的名字呢？

这是为这个问题编写的所有示例内容......我没有正确的 xml - 它是来自我要过滤的另一个位置的提要

谢谢

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:27:04.730

您可以使用`parentNode`属性访问`country`标签及其属性名称`name`以获取其值：

```
var countryNames = "";
for (var i = 0; i < x.length; i++)
{
    txt += x[i].childNodes[0].nodeValue + "<br />";
    countryNames += x[i].parentNode.parentNode.name + "<br />";
} 
```

# excel - 使用 VBA 在 Excel 系列名称中使用 Unicode 字符

> ID：11004708
> 
> 赞同：1
> 
> 时间：2012-06-12T20:53:33.103
> 
> 标签：excel, vba, unicode, series

嘿伙计们，我正在尝试将数据系列的名称设置为包含 Unicode 字符的名称，而我正在度过一段地狱般的时光。例如，我希望系列名称是这样的：

ε = n²-k²

我看过一些帖子，但没有一个（我看到的）有类似的情况。我是 Excel VBA 脚本的新手，这意味着我可能忽略了一些简单的事情。我知道存在特定的图表，因为这段代码只是我之前使用过的东西，在这里和那里添加了一些额外的位。我不断收到错误“运行时错误（1004）：应用程序定义或对象定义错误。” 这是我目前所拥有的：

```
ActiveSheet.ChartObjects(1).Activate
Dim chart1 As String
chart1 = "= " & ChrW(&H3B5) & " = n" & ChrW(&HB2) & " - k" & ChrW(&HB2) & " 6-5-2012"
ActiveChart.SeriesCollection.NewSeries
ActiveChart.SeriesCollection(1).Name = chart1
ActiveChart.SeriesCollection(1).XValues = ActiveSheet.Range("F2:F602")
ActiveChart.SeriesCollection(1).Values = ActiveSheet.Range("N2:N602") 
```

调试器说以下行是错误的原因：

```
ActiveChart.SeriesCollection(1).Name = chart1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:59:29.277

这是你正在尝试的吗？

```
chart1 = ChrW(&H3B5) & " = n" & ChrW(&HB2) & " - k" & ChrW(&HB2) & " 6-5-2012" 
```

您收到该错误是因为它将其称为公式，因为它以“=”符号开头

如果要显示“=”符号，请在其前面添加一个空格。例如

```
chart1 = " = " & ChrW(&H3B5) & " = n" & ChrW(&HB2) & " - k" & _
ChrW(&HB2) & " 6-5-2012" 
```

**快照**

两种方法的快照。

![在此处输入图像描述](../Images/0f01dfd19a7980ea1958130c4b900a73.png)

# javascript - 绝对定位的图像 - 无重叠

> ID：11004709
> 
> 赞同：0
> 
> 时间：2012-06-12T20:53:33.987
> 
> 标签：javascript, jquery, overlap

我正在使用 JS 砌体将图像绝对定位在页面上，并且我正在使用一些 JS 为每个图像提供随机的上边距和左边距以产生随机间距等效果。但是有些图像重叠。有没有办法阻止这种情况发生？

您可以在此处查看当前结果：[http ://richgc.com/freelance/staton/exhibitions-installations/](http://richgc.com/freelance/staton/exhibitions-installations/)

谢谢，R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:13:22.447

感谢@bfavaretto 的建议，问题是砌体和延迟加载不能齐头并进，所以我添加了一个回调到砌体以在每次滚动时重新加载。

```
$(window).scroll(function () {
setTimeout(function(){
    $container.masonry();
}, 0); 
```

});

唯一的问题是我敢打赌页面上的负载现在是巨大的，所以欢迎任何改进。

谢谢。

# html - 带有“点点点”动画的居中可变宽度文本

> ID：11004714
> 
> 赞同：2
> 
> 时间：2012-06-12T20:53:43.880
> 
> 标签：html, css, centering

[http://pastebin.com/index/9M2rA8cx](http://pastebin.com/index/9M2rA8cx)有我所有的代码。

您会注意到这两个 div 位于 large.css 的中心。但是，文本在每个“。”之后重新居中。被申请;被应用。如果我将 span id="wait" 放在居中的 div 之外，它将显示在左上角。我不需要精确居中，但我不能使用绝对位置进行居中，因为文本会发生变化。

有没有办法将“...”附加到已经居中的文本而不重新居中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:02:35.060

你不能只对`wait`跨度应用一个固定宽度的样式，例如：

```
span.wait{
    display: inline-block;
    width: 20px;
} 
```

# scala - foldRight 效率？

> ID：11004715
> 
> 赞同：9
> 
> 时间：2012-06-12T20:53:43.997
> 
> 标签：scala

我听说 foldLeft 在大多数操作中效率更高，但 Scala School（来自 Twitter）给出了以下示例。有人可以分析它的效率吗？我们是否应该使用 foldLeft 实现相同的操作？

```
val numbers = List(1,2,3,4,5,...10)
def ourMap(numbers: List[Int], fn: Int => Int): List[Int] = {
    numbers.foldRight(List[Int]()) { (x: Int, xs: List[Int]) =>
    fn(x) :: xs
  }
}

scala> ourMap(numbers, timesTwo(_))
res0: List[Int] = List(2, 4, 6, 8, 10, 12, 14, 16, 18, 20) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-12T22:47:14.867

正如您从文档中看到的那样，`List`的 foldRight 和 foldLeft 方法定义在`LinearSeqOptimized`. 所以看一下源码：

```
override /*TraversableLike*/
def foldLeft[B](z: B)(f: (B, A) => B): B = {
  var acc = z
  var these = this
  while (!these.isEmpty) {
    acc = f(acc, these.head)
    these = these.tail
  }
  acc
}

override /*IterableLike*/
def foldRight[B](z: B)(f: (A, B) => B): B =
  if (this.isEmpty) z
  else f(head, tail.foldRight(z)(f)) 
```

所以`foldLeft`使用一个while循环并`foldRight`使用一个简单的递归方法。特别是它不是尾递归的。因此`foldRight`，如果您在长列表上尝试它会产生创建新堆栈帧的开销并且有溢出堆栈的趋势（例如尝试`((1 to 10000).toList :\ 0)(_+_)`. Boom！但是没有 , 它可以正常工作`toList`，因为`Range`'`foldRight`通过反转向左折叠来工作） .

那么为什么不总是使用`foldLeft`呢？对于链表，右折叠可以说是一种更自然的功能，因为链表需要以相反的顺序构建。您可以使用`foldLeft`上面的方法，但最后需要`reverse`输出。（不要尝试在左折叠中追加列表，因为复杂度是 O(n-squared)。）

至于哪个在实践中更快，`foldRight`或者`foldLeft`+ `reverse`，我进行了一个简单的测试，`foldRight`列表的速度提高了 10% 到 40%。这一定是为什么 List 的 foldRight 是这样实现的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-12T21:18:03.770

foldRight 反转列表并应用 foldLeft。

# css - IE9 的条件 CSS 不起作用

> ID：11004717
> 
> 赞同：0
> 
> 时间：2012-06-12T20:53:49.313
> 
> 标签：css, internet-explorer

在我的网站上，我有一个搜索结果表。它在 Firefox 和 Chrome 中居中对齐，但在 IE9 中不居中。我正在使用以下条件 CSS，但显然它不起作用，它在 IE9 中仍然左对齐。

```
<!--[if IE 9]>
<style type="text/css">
.ie9fix {
    width: 75%;
    position: absolute;
    margin-left: auto;
    margin-right: auto; 
    float: center;
}
</style>
<![endif]--> 
```

我需要在我的代码中进行哪些更改才能使表格中心对齐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:57:00.787

如果你真的需要绝对定位：

```
<style>
.example {position: absolute; left: 0; top: 0; width: 100%; }
.example > DIV {margin: 0 auto; width: 75%; }
</style>

<div class="example"><div>
    ...
</div></div> 
```

这应该在浏览器中始终如一地工作，而无需专门解决 IE9。

# php - 使用 PHP 和 ImageMagick 创建由 PDF 中的图像填充的数组

> ID：11004718
> 
> 赞同：2
> 
> 时间：2012-06-12T20:53:50.803
> 
> 标签：php, arrays, imagemagick, imagick

我正在尝试编写一个例程，该例程将获取用户提交的 PDF，并将每个页面提取为图像，然后用这些图像填​​充数组。我发现了几个将所有页面附加到一个图像的示例，但没有一个可以满足我的需要。

这就是我所拥有的，但它返回一个空数组：

```
function PdfToImg($pdf_in) {
    $img_array = array();
    $im = new imagick();
    $im->readimageblob($pdf_in); // reading image from binary string
    $num_pages = $im->getnumberimages();
    $im->setimageformat("png");

for ($x =1;$x <= $num_pages; $x++) {
    $img = $im->previousimage();
    $img_array .= $img;
    }
    return $img_array;
} 
```

这里的警告之一是我不能将这些文件写入磁盘，必须使用字符串/数组。我查看了 ImageMagick 手册，并没有找到任何关于将多个图像输出到数组的信息，只是输出到保存到磁盘的一系列文件。

更新：（2012 年 6 月 13 日）我找到了一种方法来实现我所需要的，但它很丑陋，效率低下，而且我确信速度很慢，但似乎没有其他方法。

```
function PdfToImg3($pdf_in) {
    $img_array = array();
    $im = new imagick();
    $im->readimageblob($pdf_in);
    $num_pages = $im->getnumberimages();
    $i = 0;
    for($x = 1;$x <= $num_pages; $x++) {
        $im = new imagick();
        $im->readimageblob($pdf_in);
        $im->setiteratorindex($i);
        $im->setimageformat('png');
        $img_array[$x] = $im->getimageblob();
        $im->destroy();
        $i++;
    }
    $im->destroy();
    return $img_array;
} 
```

生成一个名为 $img_array 的数组，传入 PDF 的页面位于 $img_array 的键中，作为 PNG 图像数据的字符串。

必须有更好的方法，为什么 nextImage() 不起作用？为什么我不能在每次不重新初始化/（创建新的？）imagick 对象的情况下使用 setIteratorIndex？我一定遗漏了一些东西，但文档中存在巨大的漏洞，谷歌、ImageMagick 论坛和 StackOverflow 都不知道这是否成功完成。

测试：非常慢，一个 17 页的简单 PDF 需要将近一分钟。

更新 2：（07/11/2012）在完成了这个代码位进入的更大的项目之后，我决定回到几个点并提高性能。这就是我想出的：

```
 $img_array = array();
    $im = new imagick();
    $im->readimageblob($pdf_in);
    $num_pages = $im->getnumberimages();
    $im->destroy();
    $i = 0;
    for($x = 1;$x <= $num_pages; $x++) {
        $im = new imagick();
        $im->readimageblob($pdf_in);
        $im->setResolution(300,300);
        $im->setiteratorindex($i);
        $im->setimageformat('png');
        $img_array[$x] = $im->getimageblob();
        $im->destroy();
        $i++;
    }
    return $img_array; 
```

此更改导致 4 页复杂的 PDF 转换从 21-25 秒缩短到大约 2-3 秒。我理解为什么某些更改有所帮助，而其他更改则不太清楚。希望有人会发现这很有用。

UPDATE3：弄清楚为什么性能上升这么多，将“setResolution”移动到“readImageBlob”以下会导致 DPI 设置被忽略，默认为 72。注意到这一点，我将声明移回，并将其减少到 150 并实现结果相似，但性能仍然好得多。[在此处](http://php.net/manual/en/imagick.setresolution.php)查看 php.net 上的注释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T18:20:58.440

这种一直在读取和破坏 blob 的做法可能会拖慢我们的速度，实际上我们根本不需要它们，剥离后的代码如下所示：

```
$img_array = array();
$im = new imagick();
$im->setResolution(150,150);
$im->readImageBlob($pdf_in);
$num_pages = $im->getNumberImages();
for($i = 0;$i < $num_pages; $i++) 
{
    $im->setIteratorIndex($i);
    $im->setImageFormat('jpeg');
    $img_array[$i] = $im->getImageBlob();
 }
 $im->destroy(); 
```

# javascript - 带有多个 if 的 javascript if 条件

> ID：11004730
> 
> 赞同：2
> 
> 时间：2012-06-12T20:54:56.637
> 
> 标签：javascript

我在每个页面上运行一个 UI 组件，在其中一个页面上，有一个额外的功能链接到它。UI 组件有一个名为的布尔值`MyValue`，额外的功能有一个名为的对象`ExtraObject`，其属性之一是一个名为 的布尔值`ExtraBool`。

我想测试 MyValue 是否为真并且 ExtraObject.ExtraBool 是否为假，但仅在 ExtraObject 存在的情况下。这样，如果我在没有 ExtraObject 的页面上，就没有错误。

我试过这个：

```
if (MyValue === true && 
    (typeof ExtraObject === undefined || ExtraObject.ExtraBool === false)) {...} 
```

我应该如何重写这个？

目前，我不断收到“ExtraObject 未定义错误”。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:57:29.403

那应该是：

```
typeof ExtraObject === "undefined" 
```

`typeof`将表达式的类型作为*字符串*返回，因此您需要将名称`"undefined"`与结果进行比较。

在我看来，你的条件有点太明确了。我会选择更短的东西：

```
if (MyValue && !(ExtraObject && ExtraObject.ExtraBool)) {...} 
```

如果您使用自己的 GUI 代码进行通信，则可以假设类型与预期一致。JavaScript 中的类型检查相当麻烦，所以如果你知道你在处理什么，你可以不那么明确。（但这不适用于用户输入。永远不要相信用户输入。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:58:06.557

逻辑并不完全正确：

```
if (MyValue && ExtraObject && !ExtraObject.ExtraBool) { ... } 
```

我猜这`null`也不应该是一个值`ExtraObject`；也就是说，我认为您的条件确实更好地说明它应该是对对象的引用。

`MyValue`因此，我所写的条件在“真实”时为真，`ExtraObject`是对真实对象的引用，并且该`ExtraBool`对象的属性为“虚假”。

有时需要对布尔常量进行显式比较，但在我看来，这是一种代码异味。（当然，仅检查真实性/虚假性也可能很危险......）

*编辑*如果您的要求是表达式为真时`MyValue`为真并且*不是* `ExtraObject`对对象的引用*或者*它的`ExtraBool`属性为真，那么我会这样写：

```
if (MyValue && (!ExtraObject || !ExtraObject.ExtraBool)) { ... } 
```

哪个“更好”是个人喜好和经验的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T21:24:42.113

真值表时间！

A 是`MyValue`*
B 是`window.ExtraObject`**
C 是`ExtraObject.ExtraBool`

```
A B C | O
------+--
0 0 0 | 0
0 0 1 | 0
0 1 0 | n/a***
0 1 1 | 0
1 0 0 | 1
1 0 1 | n/a***
1 1 0 | 1
1 1 1 | 0 
```

我们从这些值中发现，最简单的方程式`O`是：

```
A && !C 
```

所以你的代码应该是：

```
if (MyValue && !ExtraObject.ExtraBool) {} 
```

`ExtraObject`但是，当然，您提到如果未定义不想遇到问题：

```
var extraBool = window.ExtraObject ? ExtraObject.ExtraBool : false;
if (MyValue && !extraBool) {} 
```

另一种写作`extraBool`方式是：

```
var extraBool = window.ExtraObject && ExtraObject.ExtraBool; 
```

然后你可以内联这个：

```
if (MyValue && !(window.ExtraObject && ExtraObject.ExtraBool)) {} 
```

写作的另一种选择`!(a && b)`是`!a || !b`，这意味着：

```
if (MyValue && (!window.ExtraObject || !ExtraObject.ExtraBool)) {} 
```

也是正确的。

[* 这可能`MyValue===true`取决于您需要的严格程度
** 或者`typeof ExtraObject !== 'undefined'`
*** 实际上不可能有`ExtraObject`未定义和访问权限`ExtraObject.ExtraBool`] 

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T20:58:19.387

```
if ((MyValue === true) && (typeof ExtraObject === undefined || ExtraObject.ExtraBool === false)) {} 
```

# tree - 在命令提示符下输出树

> ID：11004731
> 
> 赞同：31
> 
> 时间：2012-06-12T20:55:00.587
> 
> 标签：tree, cmd

我希望能够使用

```
tree /F /A > "desktop"\file.txt 
```

命令仅输出文本文件。目前，它输出每个文件扩展名。

有谁知道一个简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-12T20:58:22.610

`Tree`只接受几个命令行参数：

```
c:\>Tree /?
Graphically displays the folder structure of a drive or path.

TREE [drive:][path] [/F] [/A]

   /F   Display the names of the files in each folder.
   /A   Use ASCII instead of extended characters. 
```

指示的参数都不是文件掩码或过滤器。

您可以使用`dir`适当的开关，并将输出重定向到文本文件。您将获得文件的完整路径名，但如果需要使用`for`循环，您可以在以后的处理中将其过滤掉：

```
C:\>dir *.txt /s /b > filelist.txt 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-12T22:57:02.303

使用 FINDSTR 正则表达式获得所需的 TREE 输出实际上并不难。:-)

```
tree /f /a | findstr /ri /c:"^[^| ]" /c:"^[| ]*[+\\]" /c:"\.txt$" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-28T15:18:27.023

注意：该`tree`命令不按名称排序输出！

相反，您可以使用这种方法：

```
dir /b /s /ad /on c:\ > c:\file.txt 
```

结果看起来不太好，但

[参考](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/tree.mspx?mfr=true)

[pbies 在 Superuser 上找到的这个解决方案](https://superuser.com/a/718681/65130)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-19T22:10:49.297

另一个简单的选择：转到您要列出的目录，输入 CMD 以便您已经在正确的位置，然后：

> 树 /a /f>“输出.doc”

这会将其放入 word doc 中，从那里更容易编辑和格式化。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-09-08T11:38:19.783

更简单。

您只需要像这样导出结果： `tree /a /f >"toto.rtf"`

*然后你用Word*打开文件并选择`MS DOS`转换。

# javascript - Jquery 分页活动状态

> ID：11004732
> 
> 赞同：0
> 
> 时间：2012-06-12T20:55:06.480
> 
> 标签：javascript, jquery, html

我有一个带有图标的 div 选择器脚本作为我正在处理的分页。到目前为止一切正常，我的问题是如何根据当前显示的 div 或“页面”更改图标的活动状态。这是迄今为止我所拥有的一个简单示例。现在用于导航的图像也是可点击的。

这是示例：http: [//jsfiddle.net/Rua2B/](http://jsfiddle.net/Rua2B/)

感谢您提供任何可能的帮助！

编辑：只是为了澄清事情，我主要试图在点击“上一个”和“下一个”按钮时改变活动状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:13:49.747

您的分页代码不是最有效的 - 您应该考虑整理一下。但是对下一个/上一个按钮的简单修复是这一行：

`$("#pager img").removeClass("active").eq($("#container .boxes:visible").index()).addClass("active");`

**演示：http:** [//jsfiddle.net/Rua2B/1/](http://jsfiddle.net/Rua2B/1/)

# mercurial - Mercurial subrepo - 更改了 .hgsub 文件，但它仍然尝试从旧服务器中提取

> ID：11004740
> 
> 赞同：3
> 
> 时间：2012-06-12T20:55:44.347
> 
> 标签：mercurial, subrepos

我有一个带有子回购的 mercurial 回购：

```
repo
  subrepo
  .hgsub 
```

.hgsub 最初有

```
subrepo = https://<domain>/user/repo 
```

域是用我的 dns 设置的，指向 bitbucket（我正在玩他们的自定义域功能）。

我现在已将 .hgsub 更改为：

```
subrepo = https://user@bitbucket.org/user/repo 
```

但是当我尝试从 subrepo 中提取时，我得到了错误：

```
abort: <domain> certificate error: certificate is for bitbucket.org 
```

这意味着它仍在尝试从我的域中提取，而不是从 bitbucket 中提取。

我检查了我的`repo/subrepo/.hg/hgrc`文件并正确更新为：

```
[paths]
default = https://user@bitbucket.org/user/repo 
```

为什么它仍然试图从旧域中提取？

如果我尝试从那里推送，`repo`它会正确推送到 bitbucket。

编辑：实际上，从子仓库推送不起作用，但从父仓库推送

`repo > push`- 有效，推送到 bitbucket

`subrepo > pull`- 不起作用，尝试从我的域中提取

`subrepo > push`- 不起作用，尝试从我的域中提取

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:51:16.653

You need to re-clone the nested repository after you have changed `.hgsub`

# php - 在 Max OS X 10.7 上设置 phpMyAdmin 的问题

> ID：11004743
> 
> 赞同：1
> 
> 时间：2012-06-12T20:55:58.247
> 
> 标签：php, mysql, macos, phpmyadmin

我对 PHP/设置 SQL 数据库的世界真的很陌生。

我正在尝试在我的 Mac 上设置 phpMyAdmin，但我陷入了最后一步。

我使用此[链接的方法](http://www.coolestguyplanettech.com/installing-phpmyadmin-on-mac-osx-10-7-lion/)

当我点击安装 phpMyAdmin 时出现了我的问题。

我无法访问该`http://localhost/~INSERTMYUSERNAMEHERE/phpmyadmin/setup/`页面。

我错过了一步吗？我做错了什么吗？

作为说明，我使用[它](http://www.coolestguyplanettech.com/how-to-install-php-mysql-apache-on-os-x-10-6/)来安装和配置 apache/mysql。本指南是否缺少关键步骤？

编辑：我没有在最高级别的目录中找到我的配置文件。它保留在配置文件夹中......我只是将它移出并进入最高级别的目录，一切都运行得非常好。

# android - Android：使用 ImageView 从 sdcard 显示 .jpg 图像

> ID：11004744
> 
> 赞同：4
> 
> 时间：2012-06-12T20:55:58.843
> 
> 标签：android, bitmap, android-imageview

我正在尝试将 .jpg 从我的 sd 卡显示到我的布局中的 imageview 中。我没有收到任何错误，但没有显示任何内容。我将不胜感激任何帮助。谢谢

**编辑：**

```
 layout1 = (LinearLayout) findViewById(R.id.layout1Activity);

     String imgFile = Environment.getExternalStorageDirectory() + "/Apple.jpg";

            Bitmap myBitmap = BitmapFactory.decodeFile(imgFile);

            ImageView myImage = new ImageView(this);
            myImage.setImageBitmap(myBitmap);
            layout1.addView(myImage); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T21:08:52.747

不要直接访问 SD 卡，尝试通过[Environment](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)访问它。像这样：

```
String imageDir = Environment.getExternalStorageDirectory()+"/apple.jpg"; 
```

然后你可以打电话`BitmapFactory`：

```
Bitmap myBitmap = BitmapFactory.decodeFile(imageDir); 
```

# javascript - 如何通过发出 window.close 关闭从（javascript）打开的窗口

> ID：11004745
> 
> 赞同：3
> 
> 时间：2012-06-12T20:55:59.727
> 
> 标签：javascript, android, webview

我正在使用加载 javascript 的 WebView 在 Android 中工作。我已经成功加载了页面，js等。此外，我已经成功地通过使用打开了一个新窗口

之前加载index.html，我允许在Activity中使用JS

```
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setAllowFileAccess(true);
mWebView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
mWebView.loadUrl("file:///android_asset/index.html"); 
```

用JS加载index.html后，成功打开一个窗口。

```
 myWin=window.open("http://www.google.com") at js 
```

但是，当我发出关闭信号时，页面仍然打开。

```
 myWin.close(); 
```

你有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:09:31.593

你必须[`onCloseWindow`](http://developer.android.com/reference/android/webkit/WebChromeClient.html#onCloseWindow%28android.webkit.WebView%29)在你的`WebChromeClient`. 否则，您的应用程序无法知道关闭窗口对您的视图意味着什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T21:21:11.803

尝试安排重要的代码顺序。可能是您在启用 javascript 之前使用了 javascript。

# php - 使用 PHP 和 OAuth 访问 SkyDrive

> ID：11004750
> 
> 赞同：7
> 
> 时间：2012-06-12T20:56:16.073
> 
> 标签：php, api, oauth, onedrive

我想使用 PHP 访问 skyDrive。我想检索文件和文件夹列表，下载、上传和删除文件。

我有一个 microsoft dev clientID 和 clientSecret。

任何人都可以让我开始使用 OAuth 连接到 skyDrive 并使用 API 吗？

非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T23:09:37.667

这实际上是一个相当广泛的问题。希望这里有一些可以帮助您入门的东西。

1.  看看[SkyDrives REST API](http://msdn.microsoft.com/en-us/library/live/hh243648.aspx)。
2.  您可以使用[PHP cURL](http://php.net/manual/en/book.curl.php)来执行 GET 和 POST。
3.  用于[`json_decode()`](http://php.net/manual/en/function.json-decode.php)创建接收数据的映射。
4.  对于您发送的任何数据，在 PHP中创建[地图](http://php.net/manual/en/language.types.array.php)[`json_encode()`](http://php.net/manual/en/function.json-encode.php)并使用.

* * *

# 试用 API

[这是一个交互式 API，您可以现场试用以查看响应。](https://apigee.com/OneDrive/embed/console/OneDrive)

* * *

# 发出请求

**[示例](https://stackoverflow.com/a/10534144/1210983)** *（取自其他 SO 答案）*：

```
$url = 'POST https://apis.live.net/v5.0/me/skydrive/files';
$ch = curl_init();
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POSTFIELDS, array('access_token' => TOKEN, 'name' => 'file', 'filename' => "@HelloWorld.txt"));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($ch);
curl_close($ch); 
```

请求类型：http: [//msdn.microsoft.com/en-us/library/live/hh243648.aspx#http_verbs](http://msdn.microsoft.com/en-us/library/live/hh243648.aspx#http_verbs)

我还建议您查看[`curl_setopt()`](http://php.net/manual/en/function.curl-setopt.php)以更好地了解如何使用 cURL 执行您需要的不同类型的请求。[*（另外这个关于 SO 的答案对使用 cURL 的 POST 与 GET 有一些很好的解释。）*](https://stackoverflow.com/a/1225518/1210983)

* * *

# [文件对象](http://msdn.microsoft.com/en-us/library/live/hh243648.aspx#file)

*   **删除文件：**

    > 要删除文件，请向 /FILE_ID 发出 DELETE 请求。

*   **上传文件：**

    > 要创建新的文件资源，您可以向 /FOLDER_ID/files 发出 POST 请求，向目标文件夹的 /UPLOAD_LOCATION 发出 POST 请求，或向 /FOLDER_ID/files/ 发出 PUT 请求。

*   **下载文件：**

    > 要获取文件资源的属性，请向 /FILE_ID（目标文件 ID）发出 GET 请求。

    *   **文件资源将在源**字段中包含从 SkyDrive 下载文件的 URL 。

* * *

# [文件夹对象](http://msdn.microsoft.com/en-us/library/live/hh243648.aspx#folder)

*   **检索文件列表：**

    > 要使用 Live Connect REST API 获取根文件夹资源，请向 /me/skydrive 或 /USER_ID/skydrive 发出 GET 请求。
    > 
    > 要获取子文件夹资源，请向 /FOLDER_ID 发出 GET 请求。

*   **创建文件夹：**

    > 要创建新的文件夹资源，请向 /FOLDER_ID 发出 POST 请求。在请求正文中传递名称和描述属性

*   **删除文件夹：**

    > 要删除文件夹，请向 /FOLDER_ID 发出 DELETE 请求。

* * *

# [OAuth 2.0](http://msdn.microsoft.com/en-us/library/live/hh243647.aspx)

不幸的是，我在 OAuth 方面的经验有限。我只能提供一些相关的链接和建议，希望对您有所帮助。

[查看协议概述](http://msdn.microsoft.com/en-us/library/live/hh243647.aspx)并考虑是否要自己实现某些东西，或者使用库。快速谷歌搜索给了我：

*   [http://code.google.com/p/google-api-php-client/wiki/OAuth2](http://code.google.com/p/google-api-php-client/wiki/OAuth2)
*   [http://code.google.com/p/oauth2-php/](http://code.google.com/p/oauth2-php/)
*   [http://php.net/manual/en/book.oauth.php](http://php.net/manual/en/book.oauth.php)

其他一些可能有用的链接和指南：

*   [请参阅http://oauth.net/code/](http://oauth.net/code/)的 PHP 部分

# vb.net - 如何在 VB.net 中将 24 小时制转换为 12 小时制为 hh:mm AM/PM

> ID：11004751
> 
> 赞同：10
> 
> 时间：2012-06-12T20:56:20.557
> 
> 标签：vb.net, time, string-formatting, datetime-conversion

所以假设我有 1400，我想将其转换为 2:00PM

我尝试了以下方法：

```
Dim convertedTime As String = DateTime.ParseExact(theTime,"HHmm", Nothing) 
```

它会给我这个：

> 2012 年 6 月 12 日下午 02:00:00

我不想要日期部分，我也不需要秒。我只需要下午 2:00

我怎么能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-12T21:02:46.260

该`ParseExact`方法返回一个`DateTime`值，而不是字符串。如果将其分配给字符串变量，您将自动转换它，它使用标准格式。

如果您希望它采用特定格式，则将`DateTime`值格式化为字符串：

```
Dim d As DateTime = DateTime.ParseExact(theTime,"HHmm", Nothing);
Dim convertedTime As String = d.ToString("hh:mm tt") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-21T00:41:47.403

`Label1.Text = Format(Now, "hh:mm")`: Label1's text= 10:26 (或任何时间)

`Label1.Text = Format(Now, "hh:mm tt")`: 标签的文字 = 10:26 PM

`Label1.Text = Format(Now, "dddd dd, MMMM, YYYY")`: Label1 的文本 = 2014 年 8 月 21 日星期四（或任何日期）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-17T06:46:07.930

```
Label1.Text = Now.ToShortTimeString.ToString()   (10:26 PM)

Label1.Text = Now.ToLongTimeString.ToString()    (10:26:30 PM) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T21:05:34.060

```
Dim theTime = New Date(2012, 6, 12, 14, 0, 0)
Dim formatted = theTime.ToString("h:mm tt", Globalization.CultureInfo.InvariantCulture) 
```

[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-07T15:40:10.050

试试这个...

```
 Dim TimeNow As String
  TimeNow = TimeOfDay.ToString("h:mm:ss tt") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T21:03:41.393

有两种方法可以实现这一点。

**选项 1**（使用[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#ShortTime)）：

```
Dim theTime As DateTime = new DateTime(2008, 4, 10, 6, 30, 0)
Dim convertedTime As String = 
    theTime.ToString("t", CultureInfo.CreateSpecificCulture("en-us")) 
```

**选项 2**（使用[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)）：

```
Dim theTime As DateTime = new DateTime(2008, 4, 10, 6, 30, 0)
Dim convertedTime As String = theTime.ToString("hh:mm tt") 
```

在这两种情况下`convertedTime`都会`6:30 AM`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-08T06:02:59.027

你可以使用`String.Format()`没有函数的`ParseExtract()`函数

***VB.NET：-***

```
Dim time As String = String.Format("{0:hh}:{0:mm} {0:tt}", Date.Now) '12:00 PM'
Dim time_1 As String = String.Format("{0:hh}:{0:mm}:{0:ss} {0:tt}", Date.Now) '12:00:25 PM'
Dim time_2 As String = String.Format("{0:mm}:{0:ss}.{0:fff}", Date.Now) '00:25.986 - Mostly Used In Stopwatches' 
```

***CSharp (C#):-***

```
String time = String.Format("{0:hh}:{0:mm} {0:tt}", DateTime.Now); // 12:00 PM
String time_1 = String.Format("{0:hh}:{0:mm}:{0:ss} {0:tt}", DateTime.Now); // 12:00:25 PM
String time_2 = String.Format("{0:mm}:{0:ss}.{0:fff}", DateTime.Now); // 00:25.986 - Mostly Used In Stopwatches 
```

**以上代码为示例，您可以使用以上代码进行实验/观察/制作应用程序**

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2022-02-08T06:31:04.010

```
stackoverflowuser: 
You Can Use String.Format() Function Without ParseExtract() Function

VB.NET:-

Dim time As String = String.Format("{0:hh}:{0:mm} {0:tt}", Date.Now) '12:00 PM'
Dim time_1 As String = String.Format("{0:hh}:{0:mm}:{0:ss} {0:tt}", Date.Now) '12:00:25 PM'
Dim time_2 As String = String.Format("{0:mm}:{0:ss}.{0:fff}", Date.Now) '00:25.986 - Mostly Used In Stopwatches'
CSharp (C#):-

String time = String.Format("{0:hh}:{0:mm} {0:tt}", DateTime.Now); // 12:00 PM
String time_1 = String.Format("{0:hh}:{0:mm}:{0:ss} {0:tt}", DateTime.Now); // 12:00:25 PM
String time_2 = String.Format("{0:mm}:{0:ss}.{0:fff}", DateTime.Now); // 00:25.986 - Mostly Used In Stopwatches
Above Codes Are Examples, You Can Use Above Codes To Experiment/Observe/Make Applications With It 
```

您还可以在以下情况下使用：

***VB.NET：-***

```
Label1.Text = String.Format("{0:hh}:{0:mm} {0:tt}", Date.Now) 'Display: 12:00 PM' 
```

***CSharp (C#):-***

```
label1.Text = SString.Format("{0:hh}:{0:mm} {0:tt}", DateTime.Now); // Display: 12:00 PM 
```

**您将在 VB.NET 和 C# 中的任何标签中获得格式化的计时**

# c# - 比较、添加和更新实体中的日期字段

> ID：11004752
> 
> 赞同：0
> 
> 时间：2012-06-12T20:56:22.817
> 
> 标签：c#, plugins, dynamics-crm, dynamics-crm-2011

尝试将实体的现有日期与当前日期进行比较。如果实体（testentity）日期的实体字段（testfield）在当前日期之后等于OR，则在该字段的日期上加1年。

**问题**- 出于某种原因，它会读取所有日期并进行比较，但不会在现场更新。我在实体上使用了后期操作步骤。

**更新**：我添加了 ServiceContext.UpdateObject(entity) 和 ServiceContext.SaveChanges(); 到代码，但现在它给了我“上下文当前没有跟踪......”错误。

**任何帮助将不胜感激。谢谢！**

请看下面的代码。

```
 public class PostUpdate: Plugin
{

    public PostUpdate()
        : base(typeof(PostUpdate))
    {
        base.RegisteredEvents.Add(new Tuple<int, string, string, Action<LocalPluginContext>>(40, "Update", "new_testentity", new Action<LocalPluginContext>(ExecutePostUpdate)));

      protected void ExecutePostupdate(LocalPluginContext localContext)
    {
        // get the plugin context 
        IPluginExecutionContext context = localContext.PluginExecutionContext;

        //Get the IOrganizationService
        IOrganizationService service = localContext.OrganizationService;

        //create the service context
        var ServiceContext = new OrganizationServiceContext(service);
        ITracingService tracingService = localContext.TracingService;

        // The InputParameters collection contains all the data passed in the message request.
        if (context.InputParameters.Contains("Target") &&
        context.InputParameters["Target"] is Entity)
        {
            // Obtain the target entity from the input parmameters.
            Entity entity = (Entity)context.InputParameters["Target"];

            // Verify that the target entity represents an account.
            // If not, this plug-in was not registered correctly.
            if (entity.LogicalName != "new_testentity")
                return;

                    try
                    {
                        var k = entity["new_testfield"];
                        DateTime m = Convert.ToDateTime(k);

                        DateTime d = DateTime.Now;

                        int result = DateTime.Compare(m, d);

                        // compare the dates 
                        if (result <= 0)
                        {
                            try
                            {

                                entity["new_testfield"] = DateTime.Now.AddYears(1);
                                ServiceContext.UpdateObject(entity);
                            }
                        ServiceContext.SaveChanges();
                  //Adding this is giving me "The context is not currently tracking                    the 'new_testentity' entity."

                            }
                            catch (FaultException<OrganizationServiceFault> ex)
                            {
                            }
                        }
                    }

                    //<snippetFollowupPlugin3>
                    catch (FaultException<OrganizationServiceFault> ex)
                    {
                        throw new InvalidPluginExecutionException("An error occurred in the FollupupPlugin plug-in.", ex);
                    }
                    //</snippetFollowupPlugin3>

                    catch (Exception ex)
                    {
                        tracingService.Trace("FollowupPlugin: {0}", ex.ToString());
                        throw;
                    }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:10:13.663

您应该在预操作步骤中注册您的插件，然后只需在`InputParameter`PropertyBag 中添加/更改适当的值。这样，您的更改与事务内联，您不需要单独的更新调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:15:44.970

尝试将您的实体附加到 serviceContext。

[http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.client.organizationservicecontext.attach.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.client.organizationservicecontext.attach.aspx)

# google-analytics - 谷歌分析看似不可能的结果

> ID：11004754
> 
> 赞同：1
> 
> 时间：2012-06-12T20:56:42.800
> 
> 标签：google-analytics

我是一个谷歌分析新手，使用它来满足我的好奇心，即我的流量非常低的网站从哪里被查看以及他们正在查看哪些页面。鉴于我对我所看到的内容的理解，我经常看到看似不可能的结果。我每天早上要做的就是查看从哪些城市查看过它，然后查看从每个城市查看过哪些页面。今天早上的结果说明了假设的问题。该网站是从俄勒冈州的尤金和奥地利的维也纳进行的。两者都显示了在完全相同的时间内查看的完全相同的页面。如果没有将它们的使用联系起来，这应该发生，这似乎是不可能的。不知何故，它必须是相同的用法，但我无法弄清楚它们将如何链接。任何人都可以启发我吗？我用谷歌搜索了一段时间试图找到答案，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:04:21.127

您的网站可能会被这两个城市（或代理）运行的自动脚本访问。它们很可能是垃圾邮件脚本或旨在发现您网站安全漏洞的脚本。

# c# - 将数据源指向正确的文件夹

> ID：11004756
> 
> 赞同：0
> 
> 时间：2012-06-12T20:56:50.150
> 
> 标签：c#, sql-server-ce

我已经用 c# 构建了我的应用程序，并有一个 sql compact DB 来配合它。我需要将位置更改为什么才能使其指向与应用程序相同的目录。

例如：

现在我的数据库在 C\Windows blah blah ...

在我的代码中，我将源指向...当我构建项目时，我的应用程序与我的 DB 文件一起在 bin\release 中，但在我的代码中，源没有指向这个 DB 文件..有人知道吗我需要插入什么以将其指向正确的数据库文件？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:16:52.947

它是否总是与应用程序可执行文件位于同一目录中？如果是这样，也许您可​​以使用当前程序集的路径设置连接字符串（假设所有内容都在同一个位置）：

```
string curPath = String.Format("{0}\\{1}", System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase), "MyDatabase.sdf");
SqlCeConnection conn = new SqlCeConnection(String.Format("Data Source = {0}; Password ={1}", curPath , ":PASSWORD:"); 
```

# php - 转义表名 MySQL

> ID：11004768
> 
> 赞同：8
> 
> 时间：2012-06-12T20:57:54.780
> 
> 标签：php, mysql, sql, escaping

我对转义表名有一点问题。我太愚蠢了，我选择“显示”作为表名。当我使用 mysqli 连接时，转义工作正常，但它不适用于经典的 mysql 连接。有什么建议吗？对不起我的英语，我不是母语人士。

```
SELECT SQL_CALC_FOUND_ROWS year, nameShow 
FROM   `show`
LIMIT 0, 10 
```

我得到错误

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'show' at line 2 – 
```

询问

```
$sQuery = "
    SELECT SQL_CALC_FOUND_ROWS year, nameShow 
    FROM   `show`
    $sWhere
    $sOrder
    $sLimit
    "; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T21:04:15.897

[MySQL 5.1 参考手册的第 9.3 节](http://dev.mysql.com/doc/refman/5.1/en/reserved-words.html)说反引号 (`) 或双引号 (")，但是，我会使用上面 Fahim Parkar 的评论并重命名表。

另外值得注意的是，如果根据[第 9.2 节](http://dev.mysql.com/doc/refman/5.1/en/identifiers.html)使用双引号，则必须使用 ANSI_QUOTES SQL 模式：

> 如果启用了 ANSI_QUOTES SQL 模式，也允许在双引号内引用标识符

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T07:19:11.977

问题在于 YEAR 而不是 SHOW。YEAR 是一个 MySQL 函数。最佳做法是始终引用列名和表名，这样也便于阅读。

应该：

```
SELECT SQL_CALC_FOUND_ROWS `year`, `nameShow` 
FROM   `show`
LIMIT 0, 10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T21:16:28.497

反引号应该可以正常工作

尝试在 SQL_CALC_FOUND_ROWS 后加一个逗号，

```
SELECT SQL_CALC_FOUND_ROWS, year, nameShow 
FROM   `show`
LIMIT 0, 10 
```

# c++ - 没有 PIPE_REJECT_REMOTE_CLIENTS 的 CreateNamedPipe

> ID：11004775
> 
> 赞同：2
> 
> 时间：2012-06-12T20:58:23.030
> 
> 标签：c++, c, winapi, named-pipes

我正在尝试使用 Windows API 创建一个双工命名管道`CreateNamedPipe`，用于我的 shell 扩展和我的主桌面应用程序之间的 IPC。

您可以为 Vista 及更高版本传递一个标志，以防止远程连接 ( `PIPE_REJECT_REMOTE_CLIENTS`)。据我了解，这意味着管道只能在同一台机器上连接。有人知道如何在早期版本的 Windows 中获得相同的功能吗？我尝试`SECURITY_ATTRIBUTES`使用以下代码创建一个对象，但我不完全确定它是否正常工作：

```
static bool GetLocalMachineOnlySecurityAttributes (SECURITY_ATTRIBUTES& sa)
{
    PSID plocalsid = NULL;
    SID_IDENTIFIER_AUTHORITY SIDAuthWorld = SECURITY_LOCAL_SID_AUTHORITY;
    if(!::AllocateAndInitializeSid (&SIDAuthWorld, 1, SECURITY_LOCAL_RID, 0, 0, 0, 0, 0, 0, 0, &plocalsid))
        return false;

    EXPLICIT_ACCESS ea = {0};
    ea.grfAccessPermissions = SPECIFIC_RIGHTS_ALL | STANDARD_RIGHTS_ALL;
    ea.grfAccessMode = SET_ACCESS;
    ea.grfInheritance = NO_INHERITANCE;
    ea.Trustee.TrusteeForm = TRUSTEE_IS_SID;
    ea.Trustee.TrusteeType = TRUSTEE_IS_WELL_KNOWN_GROUP;
    ea.Trustee.ptstrName  = reinterpret_cast<LPWSTR>(plocalsid);

    PACL acl = NULL;
    if(!::SetEntriesInAcl (1, &ea, NULL, &acl))
        return false;

    //PSECURITY_DESCRIPTOR sd = reinterpret_cast<PSECURITY_DESCRIPTOR>(::LocalAlloc(LPTR, SECURITY_DESCRIPTOR_MIN_LENGTH));
    static SECURITY_DESCRIPTOR sd = {0};
    if(!::InitializeSecurityDescriptor (&sd, SECURITY_DESCRIPTOR_REVISION))
        return false;
    if(!::SetSecurityDescriptorDacl(&sd, TRUE, acl, FALSE))
        return false;

    sa.nLength = sizeof(SECURITY_ATTRIBUTES);
    sa.lpSecurityDescriptor = &sd;
    sa.bInheritHandle = FALSE;
    return true;
} 
```

如果有人可以告诉我我是否在做正确的事情，或者我可以在某个地方寻找明确的解释`SECURITY_ATTRIBUTES`，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:41:20.633

您确实可以通过为管道创建适当的自由访问控制列表 (DACL) 来阻止远程连接。

您的代码正在尝试但未能做到这一点，第一个原因是在这一行：

```
if(!::SetEntriesInAcl (1, &ea, NULL, &acl)) 
```

SetEntriesInAcl 返回一个 DWORD 代码，而不是 BOOL：成功时返回的代码是`ERROR_SUCCESS`，其值为 0L，因此您的函数始终在此时退出，使 SECURITY_ATTRIBUTES 结构为空。

您的代码还会泄漏内存，因为它无法释放由某些 API 创建的缓冲区，包括`SetEntriesInAcl`. 我建议您使用[MSDN 中的示例](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446595%28v=vs.85%29.aspx)作为指南，以确保您完成所有必要的清理工作。

更多地转向代码策略，您目前正尝试使用单个访问控制条目 (ACE) 来解决您的问题，该条目允许本地安全组的所有访问。由于 DACL 的工作方式，这不是正确的方法……您应该拒绝远程访问 - 即将它列入黑名单 - 而不是尝试将本地访问列入白名单。这至少有两个原因：

*   使用单个 ACE，可以访问管道的每个人都拥有完全相同的访问权限：您失去了更密切地控制管道安全性的任何能力。至少，您通常希望确保只有预期的管道服务器可以创建管道的新实例，并限制更改管道安全性的能力。
*   访问令牌被授予本地组成员身份的确切情况没有很好的记录，我怀疑该组的组成员身份与您的要求不完全一致。CreateNamedPipe 的文档明确指出，要在早期平台上获得与 PIPE_REJECT_REMOTE_CLIENTS 相同的结果，您应该**拒绝**访问 NETWORK。

因此，需要修改您的代码，以便构建包含以下 ACE 的 DACL：

1.  知名安全标识符组 NETWORK USERS 的“拒绝”ACE，拒绝所有访问
2.  一个“允许”ACE，它允许作为管道服务器的应用程序创建管道实例
3.  一个“允许”ACE，它允许作为管道客户端的应用程序读取和写入管道

其中第一个是阻止远程访问管道的原因，因为远程访问协议（包括基于 SMB 的远程命名管道协议）创建的所有登录令牌都自动包含 NETWORK USERS 组的组成员身份（众所周知的 SID S-1-5-2)。此拒绝 ACE 必须位于 DACL 中的允许 ACE 之前。

你没有说你的哪个应用程序是管道服务器，哪个是客户端。也许没关系，如果两者都在交互式用户会话中运行：在这种情况下，您可能只能使用一个允许 ACE，它授予对用户会话 SID 的所有访问权限。

如果没有您的安全要求的更多详细信息，就很难规定您应该如何设置服务器和客户端 ACE。然而，几乎可以肯定的是，您将希望限制访问权限 FILE_CREATE_PIPE_INSTANCE 以便只有管道服务器拥有它。

# javascript - Rally App SDK 2.0：创建可搜索但不可编辑的 rallytagpicker

> ID：11004779
> 
> 赞同：0
> 
> 时间：2012-06-12T20:59:04.933
> 
> 标签：javascript, extjs, rally

我相信 rallytagpicker 绝对是一个有用的组件。但是，我没有看到任何允许我阻止用户创建新标签的配置字段，同时仍保持搜索功能。有这样的配置吗？还是功能之间的必要权衡？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T19:42:22.023

比我以前的 hack 更好的解决方案：

```
Ext.create('Ext.Container', {
     items: [{
         xtype: 'rallymultiobjectpicker',
         modelType: 'tag'
     }],
     renderTo: Ext.getBody().dom
 }); 
```

或者

```
Ext.create('Rally.ui.picker.MultiObjectPicker', {
    modelType: 'tag'
}); 
```

这将为您提供一个没有添加功能的可搜索标签选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:36:48.650

我不认为权限系统目前区分标签分配和标签创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T16:45:31.513

这是一个在 API 中的 TagPicker[代码编辑器中](https://rally1.rallydev.com/apps/2.0p/doc/#!/api/Rally.ui.picker.TagPicker)工作的解决方法，方法是将私有方法 _showAddNew 覆盖为空函数。

```
Ext.create('Ext.Container', {
     items: [{
         xtype: 'rallytagpicker',
         autoExpand: true,
         toolTipConfig: null,
         _showAddNew: Ext.emptyFn
     }],
     renderTo: Ext.getBody().dom
 }); 
```

它还删除了用户单击搜索输入时显示的工具提示。

# winforms - winforms 事件处理程序是否与调用者发生在同一线程上？

> ID：11004789
> 
> 赞同：4
> 
> 时间：2012-06-12T20:59:41.853
> 
> 标签：winforms, events

简单的问题，虽然办公室里似乎没有人知道，我也找不到向谷歌询问这个问题的好方法。在 winforms 中，如果您有一个处理事件的函数（在这种情况下，在 focusLost 上），该函数是否与触发事件的线程发生在同一个线程上？

因此，如果我有一个当前在 UI 线程上运行的带有焦点的文本框，并且我改变了焦点，那么 UI 线程会运行我的函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T21:05:05.383

是的，UI 线程将执行 UI 事件处理程序。

通常，在 Windows 编程中，您不应该在其他线程上接触 UI 组件。Windows 窗体设计为通过单线程工作。如果您需要繁重的工作，否则可能会冻结 UI 线程，您可以生成一个新线程来完成工作，然后将更改推送到 UI 线程。

您可以使用[SynchronizationContext.Current](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.current.aspx)将工作发布到 UI 线程。[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)也很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T21:04:27.440

我相信这是正确的。通常事件在 GUI 线程上处理。以下是有关如何在不同线程中执行此操作的链接。

[http://bytes.com/topic/c-sharp/answers/526484-handling-control-ui-events-worker-threads](http://bytes.com/topic/c-sharp/answers/526484-handling-control-ui-events-worker-threads)

# ios - 当我的容器 UIViewController 被解除分配或卸载时，我必须清理我的子 UIViewControllers 吗？

> ID：11004793
> 
> 赞同：3
> 
> 时间：2012-06-12T20:59:54.177
> 
> 标签：ios, uiviewcontroller

我正在创建一个`UIViewController`带有单个 child的简单容器`UIViewController`。

我是否需要将孩子发送到我的容器`willMoveToParentViewController:`和方法中？`removeFromParentViewController``UIViewController``dealloc``viewDidUnload`

我在用着`ARC`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:10:01.280

这可能会迟到，但我遇到了同样的问题。我用 NSLog 进行了测试，并且没有在子控制器上调用 dealloc 方法。

就我而言，我有一个父控制器有一个子控制器，但是这个父控制器也是另一个超级父控制器的子控制器。

所以，我的解决方案是实现 willMoveToParentViewController 并删除那里的孩子。

```
- (void) willMoveToParentViewController:(UIViewController *)parent;
{
    if (parent == nil) {
        NSLog(@"removing my self");
        [_childViewController willMoveToParentViewController:nil];
        [_childViewController removeFromParentViewController];
        [_childViewController.view removeFromSuperview];
        _childViewController = nil;
    }
} 
```

但是，在我的例子中，我调用了这个方法，因为这个父级是另一个父级控制器的子级。

```
// removing the parent from super parent controller
[_parentViewController willMoveToParentViewController:nil];
[_parentViewController removeFromParentViewController];
[_parentViewController.view removeFromSuperview];
_parentViewController = nil; 
```

我不知道你的情况，但希望这能帮助其他可能和我有同样问题的人。

# java - 如何在java中获取这个菜单组件？

> ID：11004794
> 
> 赞同：0
> 
> 时间：2012-06-12T21:00:06.970
> 
> 标签：java, eclipse, menu

java中有这样的菜单组件吗？我该如何使用它？

（这是eclipse在android布局开发界面的截图）

[![菜单组件](../Images/b03374f494e372e31a17f33775d130e0.png)](https://i.stack.imgur.com/itov8.jpg)
[（来源：[vikingindustries.co.za](http://www.vikingindustries.co.za/java/menu.jpg)）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:50:57.357

它看起来像一个 ExpandBar，不是真正的菜单相关，而是一个可扩展的组合。有关创建示例，请参见[http://www.eclipse.org/swt/snippets/#expandbar 。](http://www.eclipse.org/swt/snippets/#expandbar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:03:13.017

您可以使用 a 轻松构建它`ListView`并自定义列表项以使其看起来如此。

# php - Yii 框架：表单验证失败后的空变量

> ID：11004796
> 
> 赞同：1
> 
> 时间：2012-06-12T21:00:16.463
> 
> 标签：php, yii

我有一个带有两个输入文本字段的表单：

```
<input id="ModelName_test_0" name="ModelName[test][0]" type="text">
<input id="ModelName_test_1" name="ModelName[test][1]" type="text"> 
```

这些输入字段使用以下命令生成：

```
<?php echo $form->textField($model,'test[0]'); ?>
<?php echo $form->textField($model,'test[1]'); ?> 
```

现在，当我提交表单时，我会看到 POST 请求中的值。但是，当表单提交失败时，我无法将值返回到输入字段中。打印模型显示 $test 没有值；- 这是因为 $test 是表单中的数组吗？

即使在验证之后，所有值仍然分配给变量：

```
if($model->validate()) {
   echo "<pre>";
   print_r($_POST);
   return;
} 
```

这将返回：

```
[ModelName] => Array  
        (
            [test] => Array  
                (
                    [0] => myFirstInputField  
                    [1] => mySecondInputField
                )
        ) 
```

所以这些值在 POST 中，但在验证失败后它们消失了，我得到空变量：

```
[ModelName] => Array  
        (
            [test] => 
        ) 
```

变量*test*在验证规则中被声明为*安全的。*

**我想要实现的是：**
如果验证失败，将输入的值放回适当的输入文本字段中。

任何朝着正确方向的指针都会有所帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T05:29:15.613

问题是，[CHtml::activeTextField](http://www.yiiframework.com/doc/api/1.1/CHtml#activeTextField-detail)需要一个模型及其属性之一作为参数。如果属性被命名`test`，那么 have `$form->textField($model,'test');`。提交表单后，要么`test`没有任何值，要么它是一个数组（选中此项以确认，要么回显它的值，要么执行`print_r`on `$model->attributes`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:03:58.853

我在 yiiframework.com 网站上发现这篇文章帮助我解决了这个问题：[http ://www.yiiframework.com/doc/guide/1.1/en/form.table](http://www.yiiframework.com/doc/guide/1.1/en/form.table)

这是您将其放入控制器的示例代码：

```
public function actionBatchUpdate()
{
    // retrieve items to be updated in a batch mode
    // assuming each item is of model class 'Item'
    $items=$this->getItemsToUpdate();
    if(isset($_POST['Item']))
    {
        $valid=true;
        foreach($items as $i=>$item)
        {
            if(isset($_POST['Item'][$i]))
                $item->attributes=$_POST['Item'][$i];
            $valid=$item->validate() && $valid;
        }
        if($valid)  // all items are valid
            // ...do something here
    }
    // displays the view to collect tabular input
    $this->render('batchUpdate',array('items'=>$items));
} 
```

这就是视图的样子：

```
<div class="form">
<?php echo CHtml::beginForm(); ?>
<table>
<tr><th>Name</th><th>Price</th><th>Count</th><th>Description</th></tr>
<?php foreach($items as $i=>$item): ?>
<tr>
<td><?php echo CHtml::activeTextField($item,"[$i]name"); ?></td>
<td><?php echo CHtml::activeTextField($item,"[$i]price"); ?></td>
<td><?php echo CHtml::activeTextField($item,"[$i]count"); ?></td>
<td><?php echo CHtml::activeTextArea($item,"[$i]description"); ?></td>
</tr>
<?php endforeach; ?>
</table>

<?php echo CHtml::submitButton('Save'); ?>
<?php echo CHtml::endForm(); ?>
</div><!-- form --> 
```

两个代码片段均取自 yiiframework.com，您可以在其中找到有关如何使用“表格输入”的更多详细信息：[http ://www.yiiframework.com/doc/guide/1.1/en/form.table](http://www.yiiframework.com/doc/guide/1.1/en/form.table)

# html - 来自谷歌的网站可访问性（索引） - doctype transitional 与 doctype html

> ID：11004797
> 
> 赞同：0
> 
> 时间：2012-06-12T21:00:16.973
> 
> 标签：html, xhtml, accessibility, doctype, xhtml-transitional

我正在和我的一个朋友讨论 doctype transitional 与 doctype html。该主题是谷歌和潜在的屏幕阅读器（你可以找到盲人使用）的可访问性。

我们正在争论使用 doctype “transitional” 构建/声明的网站是否会比使用 doctype “html” 声明的网站构建/声明在 google 中的排名和索引更好。

在涉及 google 时，使用 doctype “html” 构建您的网站有什么缺点吗？

我的朋友宁愿坚持使用过渡，因为您可以在 w3.org 上验证它或多或少是“标准”的，我宁愿使用一些新技术来实现更好的视觉效果和渲染。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:19:29.050

屏幕阅读器不会以不同的方式解释 DOCTYPES。但是我会说您应该选择 HTML 4 Strict 或 HTML 5 DOCTYPE。HTML 4 Transitional 文档类型真的是供人们在从 HTML 3 迁移到 4 时使用的，或者 a) 他们说*HTML 4 太棒了，我只是在测试它，*或者 b)*是的，我们想迁移到 HTML4 ，我们想使用 4.0 的酷炫新功能，目前我们无法真正重新编码网站。*请注意，我们在这里讨论的是 2000 年之前的版本，因此现在很多编写代码的人可能不会说我知道 HTML 3 和 4/4.01 之间的区别。

用于验证 HTML 5 的 W3C 仍在进行中。[请参阅我关于W3C 设置新属性](https://stackoverflow.com/q/10835309/1276124)的答案

Re Google：您可能可以用 HTML 3 甚至 2 编写/编码您的网站，但它仍然会被索引。AFAK Google 仍然依赖标题 ( `<h1>-<h6>`) 作为排名的一部分。标题是在 HTML 2 或 3 中引入的。

# c# - 多个案例的多个 Switch 语句？

> ID：11004798
> 
> 赞同：0
> 
> 时间：2012-06-12T21:00:18.463
> 
> 标签：c#, switch-statement

我正在尝试编写一个与我在下面的代码中显示的效果类似的 switch 语句，但是（显然）它不起作用。不可能同时在两个组合框中选择某些内容。关于如何做到这一点的任何想法？我正在更新一个较旧的程序，并且我试图不重新编写大量代码。

```
 switch ((cboMAIN.SelectedIndex) || (cboMAINalternate.SelectedIndex))
            {
                case 0:
                    OutputString1 = "A";
                    break;
                case 1:
                    OutputString1 = "C";
                    break;
                case 2:
                    OutputString1 = "E";
                    break;
                case 3:
                    OutputString1 = "F";
                    break;
                case 4:
                    OutputString1 = "I";
                    break;
                case 5:
                    OutputString1 = "J";
                    break;
                case 6:
                    OutputString1 = "K";
                    break;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:04:13.953

尝试使用

```
switch ((cboMAIN.SelectedIndex > -1) ? cboMAIN.SelectedIndex : cboMAINalternate.SelectedIndex) 
{ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T21:04:47.783

不，这是不可能的（至少不是你这样做的方式）。

问题是，你想达到什么目的？如果您有某种切换来在两个索引之间切换，您可以执行以下操作：

```
bool useAlternative = ...;
switch(useAlternative ? cboMAINalternate.SelectedIndex : cboMAIN.Selectedindex) {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T21:09:02.500

选择元素中总是有一个选定的项目，因此您必须检查您认为没有选择的项目，例如第一个项目：

```
var item = cboMAIN.SelectedIndex;
if (item = 0) item = cboMAINalternate.SelectedIndex;

switch (item) {
  ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T21:11:28.403

可能是最简洁的方式：

```
switch (Math.Max(cboMAIN.SelectedIndex, cboMAINalternate.SelectedIndex))
{
    // ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T21:31:08.260

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedindex.aspx)，如果 a 上的选择为空，`SelectedIndex`将返回。`-1``ComboBox`

以下代码应选择`ComboBox`带有选择的 a 并通过您的 switch 语句，或者如果两者都没有选择则失败：

```
ComboBox comboBoxToUse;

if (cboMAIN.SelectedIndex > -1)
{
    comboBoxToUse = cboMAIN;
}
else if (cboMAINalternate.SelectedIndex > -1)
{
    comboBoxToUse = cboMAINalternate;
}
else
{
    throw new InvalidOperationException("Neither combo box contains a selection.");
}

switch (comboBoxToUse.SelectedIndex)
{
    ...
} 
```

`ComboBox`如果两个es 都有选择，您可能还想抛出异常。

# css - 使用 :after CSS 选择器填充空格？

> ID：11004800
> 
> 赞同：7
> 
> 时间：2012-06-12T21:00:30.443
> 
> 标签：css, css-selectors

在[此页面上](http://carolineelisa.com/indigo/2012)，我希望将导航右侧的整个空间填充为白色。

因此，我使用 :after CSS 选择器实现了 5px 宽的白色块，并希望有一种方法可以使其适合可用宽度，尽管我愿意接受其他建议！：

```
#menu-main-menu:after {
    content:"";
    display:block;
    background:#fff;
    width:5px;
    height:30px;
    float:right;
    } 
```

这是简化的 HTML：

```
<div class="menu"><ul id="menu-main-menu">
<li><a href="#">Home</a></li>
<li><a href="#">About us</a></li>
<li><a href="#">Courses &#038; prices</a></li>
<li><a href="#">Activities in Rio</a></li>
<li><a href="#">Accommodation</a></li>
<li><a href="#">News</a></li>
<li><a href="#">FAQs</a></li>
<li><a href="#">Contact</a></li>
</ul>
</div> 
```

以及所有相关的 CSS：

```
#primary-menu ul {
    overflow:hidden;
}
#primary-menu li {
    list-style:none;
    float:left;
}
#primary-menu a {
    color:#333;
    background: #fff;
    display:block;
}
#primary-menu .current-menu-item a, #primary-menu .current-page-parent a {
    color:#fff;
    background:none;
}
#menu-main-menu:before {
content:"";
display:block;
background:#fff;
width:20px;
height:30px;
float:left;
} 
#menu-main-menu:after {
content:"";
display:block;
background:#fff;
width:5px;
height:30px;
float:right;
} 
```

感谢您花时间查看我的问题！

卡罗琳

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T21:52:52.860

您可以将`::after`伪选择器添加到`li.current-menu-item`而不是`#menu-main-menu`从该元素开始添加白色背景。

```
.current-menu-item:after {
    background: none repeat scroll 0 0 #fff;
    content: "";
    height: 30px;
    position: absolute;
    right: -1000px;   /* these numbers are the same */
    top: 0;
    width: 1000px;    /* and need to be at least the width of the menu */
}

#primary-menu li {
    position: relative;  /* position the ::after element relative to the li */
}

#primary-menu ul {
    ....
    overflow: hidden;  /* you already have this to clear your floats */
    ....               /* but I thought I should emphasise that you need it */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T21:33:56.067

下面的示例通过添加额外`li`的填充来工作，但由于字体将在浏览器中直接呈现，因此您无法预测宽度。此示例中的解决方法创建了一个容器 ( `#cen`) 用于使内容居中并设置宽度，该`overflow`属性也设置为隐藏。这样做，您可以添加比所需宽度大得多的`div`包装`ul`和填充物。`li`这不会导致任何问题，因为 parent.parent 隐藏了溢出。

[http://jsfiddle.net/efortis/3YpDh/1/](http://jsfiddle.net/efortis/3YpDh/1/)

```
<div id="cen">
  <div class="menu">
    <ul id="menu-main-menu">
       <li><a href="#">Home</a></li>
       <li><a href="#">About us</a></li>
       <li><a href="#">Courses &#038; prices</a></li>
       <li><a href="#">Activities in Rio</a></li>
       <li><a href="#">Accommodation</a></li>
       <li><a href="#">News</a></li>
       <li><a href="#">FAQs</a></li>
       <li><a href="#">Contact</a></li>
       <li class="filler">&nbsp;</li>
   </ul>
   </div>
</div>

#cen {
    width: 960px;
    margin: 0 auto;    
    overflow: hidden;
}
.menu {
    width: 1200px;
    float:left;
 }

li {
    padding: 10px 25px;
    float:left;
    background: white;
}

.filler {
    width: 200px;       
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T07:26:19.450

摆脱`float`on`li`允许您简单地定义其父级，而无需使用伪类来填充空间。这已经是 100% 的宽度，因为.**`display: block;`** `background: white`**`ul`**`:before``:after``ul``display: block`

为此，您可以将每个项目显示为**`inline-block`**(`display: inline`和`zoom: 1`对于 IE6/7) 并粘贴关闭和打开`</li><li>`标签以避免它们之间的空白。

**[看到这个小提琴](http://jsfiddle.net/3u9dA/)**

**`table-cell`**小提琴中的奖励：在第二个示例中，项目通过使用（CSS 值，`table>tr>td`当然不是无语义的 HTML 代码）占据所有可用宽度（不一定漂亮，取决于您的设计和菜单）。对于 IE6/7，与上面相同的回退（和相同的渲染）。

# iphone - 自定义 UIBarButtonItem

> ID：11004801
> 
> 赞同：3
> 
> 时间：2012-06-12T21:00:32.503
> 
> 标签：iphone, objective-c, uinavigationcontroller, uinavigationbar, uibarbuttonitem

我有一个要添加到导航栏的自定义按钮。所以这就是我到目前为止所拥有的`RootViewController`（继承`UIViewController`，`UINavigationController`通过添加`AppDelegate`）：

在`viewDidLoad`：

```
UIBarButtonItem *share = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"icon"] style:UIBarButtonItemStylePlain target:self action:@selector(share:)];
self.navigationController.navigationItem.rightBarButtonItem = share; 
```

这是我`UINavigationController`的设置方式：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    UIViewController *rootViewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:rootViewController];
    [navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"navbar"] forBarMetrics:UIBarMetricsDefault];
    self.window.rootViewController = navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

为什么这不起作用？

**编辑：**

在我替换`self.navigationController.navigationItem.rightBarButtonItem`为`self.navigationItem.rightBarButtonItem`. 这是为什么？我的 rootviewcontroller 是类型`UIViewController`，我应该`navigationItems`通过`navigationController`. `navigationController`在这种情况下是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:54:22.703

> 在我用 self.navigationItem.rightBarButtonItem 替换 self.navigationController.navigationItem.rightBarButtonItem 后它起作用了。这是为什么？

UIViewController 的每个实例都有一个 navigationItem。这包括 UINavigationController，它是 UIViewController 的子类。

当新的视图控制器出现时，UINavigationController 使用 navigationItem 来更新其视觉状态。修改时`self.navigationController.navigationItem`，您正在修改嵌套 UINavigationController 时将显示的内容。实际上，您永远不会修改 UINavigationController 的 navigationItem，因为您不会有嵌套的导航控制器。

正如您所发现的，您必须修改视图控制器`navigationItem`才能使更改在导航控制器中生效。

> 在这种情况下，navigationController 是什么？

`navigationController`是对 UINavigationController 的引用，由它表示的视图控制器`self`当前包含在其中。

例如：

```
UIViewController* viewController = [[UIViewController alloc] initWithNibName:nil bundle:nil];
UINavigationController* navController = [[UINavigationController alloc] initWithRootViewController:viewController];

// This is TRUE: viewController.navigationController == navController 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T22:02:22.143

根据更新导航栏的[Apple UINavigationController 参考](http://developer.apple.com/library/iOS/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html)，声明

*   如果新的顶级视图控制器有一个自定义的左栏按钮
    项，则显示该项。要指定自定义左栏按钮
    项，请设置视图控制器 导航项的***leftBarButtonItem属性。***

*   如果新的顶级视图控制器具有自定义右栏按钮
    项，则显示该项。要指定自定义右栏按钮
    项，请设置视图控制器 导航项的***rightBarButtonItem属性。***

# asp.net - 尝试创建新 Bundle 时 NoTransform 不起作用

> ID：11004803
> 
> 赞同：6
> 
> 时间：2012-06-12T21:00:44.267
> 
> 标签：asp.net, asp.net-mvc, bundle, asp.net-optimization

我正在关注一个示例，并且在为 MVC 项目创建自定义包时无法使“NoTransform”工作。这是我的代码，由于“NoTransform”产生错误，因此无法编译：“错误 1 ​​找不到类型或命名空间名称 'NoTransform'（您是否缺少 using 指令或程序集引用？）” . 有什么想法吗？

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data.Entity;
using System.Data.Entity.Infrastructure;
using System.Linq;
using System.Web;
using System.Web.Http;
using System.Web.WebPages;
using System.Web.Mvc;
using System.Web.Optimization;
using System.Web.Routing;

namespace CoyleAzure
{

    public class MvcApplication : System.Web.HttpApplication
    {
        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);

            // Added to Add DisplayModes

            DisplayModeProvider.Instance.Modes.Insert(0, new DefaultDisplayMode("Phone")
            {
                ContextCondition = (context => (
                (context.GetOverriddenUserAgent() != null) &&
                (
                (context.GetOverriddenUserAgent().IndexOf("iPhone", StringComparison.OrdinalIgnoreCase) >= 0) ||
                (context.GetOverriddenUserAgent().IndexOf("iPod", StringComparison.OrdinalIgnoreCase) >= 0) ||
                    (context.GetOverriddenUserAgent().IndexOf("Droid", StringComparison.OrdinalIgnoreCase) >= 0) ||
                        (context.GetOverriddenUserAgent().IndexOf("Blackberry", StringComparison.OrdinalIgnoreCase) >= 0) ||
                            (context.GetOverriddenUserAgent().StartsWith("Blackberry", StringComparison.OrdinalIgnoreCase))
            )
            ))
            });

            DisplayModeProvider.Instance.Modes.Insert(0, new DefaultDisplayMode("Tablet")
            {
                ContextCondition = (context => (
                    (context.GetOverriddenUserAgent() != null) &&
                    (
                    (context.GetOverriddenUserAgent().IndexOf("iPad", StringComparison.OrdinalIgnoreCase) >= 0) ||
                    (context.GetOverriddenUserAgent().IndexOf("Playbook", StringComparison.OrdinalIgnoreCase) >= 0) ||
                        (context.GetOverriddenUserAgent().IndexOf("Transformer", StringComparison.OrdinalIgnoreCase) >= 0) ||
                            (context.GetOverriddenUserAgent().IndexOf("Xoom", StringComparison.OrdinalIgnoreCase) >= 0)
                        )
                        ))
            });

            IBundleTransform jsTransformer;
            IBundleTransform cssTransformer;

#if DEBUG
            jsTransformer = new NoTransform("text/javascript");
            cssTransformer = new NoTransform("text/css");

#else   
            jsTransformer = new JsMinify();   
            cssTransformer = new CssMinify(); 
#endif

            var
            DesktopJSBundle = new Bundle("~/Scripts/DesktopJS", jsTransformer);

            DesktopJSBundle.Include("~/Scripts/jquery-1.6.4\. js");
            DesktopJSBundle.Include("~/Scripts/jquery-ui-1.8.11\. js");
            DesktopJSBundle.Include("~/Scripts/jquery.unobtrusive-ajax.js");
            DesktopJSBundle.Include("~/Scripts/jquery.validate.js");
            DesktopJSBundle.Include("~/Scripts/jquery.validate.unobtrusive.js");

            BundleTable.Bundles.Add(DesktopJSBundle);

            var DesktopCSSBundle = new Bundle("~/Content/DesktopCSS", cssTransformer);
            DesktopCSSBundle.Include("~/Content/Site.css");
            BundleTable.Bundles.Add(DesktopCSSBundle);

            var MobileJSBundle = new Bundle("~/Scripts/MobileJS", jsTransformer);
            MobileJSBundle.Include("~/Scripts/jquery-1.6.4.js");
            MobileJSBundle.Include("~/Scripts/jquery.mobile-1.1.0.js");
            BundleTable.Bundles.Add(MobileJSBundle);

            var MobileCSSBundle = new Bundle("~/Content/MobileCSS", cssTransformer);
            MobileCSSBundle.Include("~/Content/jquery.mobile-1.1.0.css");
            MobileCSSBundle.Include("~/Content/jquery.mobile.structure-1.1.0.css");
            BundleTable.Bundles.Add(MobileCSSBundle);
            //BundleTable.Bundles.RegisterTemplateBundles(); 
            BundleTable.Bundles.EnableDefaultBundles();
        }

        //BundleConfig.RegisterBundles(BundleTable.Bundles);

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T15:43:42.797

不是对此的直接答案，而是向将来遇到此问题的任何人指出...也可以通过配置完成（请参阅[https://stackoverflow.com/a/12605451/6486](https://stackoverflow.com/a/12605451/6486)）

```
<system.web>
    <compilation debug="true" />
    <!-- Lines removed for clarity. -->
</system.web> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-29T23:38:14.013

该类`NoTransform`不再需要是公共的，因为从 RC 开始，一个空`Transform`类`Bundle`隐含地意味着`NoTransform`.

前：

```
new Bundle("~/yourbundle", new NoTransform()) 
```

现在：

```
new Bundle("~/yourbundle") 
```

我们觉得不需要虚拟实例更干净。我们将其保留在内部是因为它有一点点逻辑可能会导致一些麻烦，因为 Transform 负责设置响应的 contentType。默认逻辑使用包中第一个文件的文件扩展名 (.js/.css)。

此外，通过添加 Script/Styles Render 助手，您不再需要根据 debug=true|false 在不同的转换之间动态切换。助手应该为你处理好这些。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T01:49:19.827

此代码来自 MVC 4 Beta（或更准确地说是 System.Web.Optimization beta1），但您可能正在尝试使用 MVC 4 RC（或更准确地说是 System.Web.Optimization beta2）（如果完全是 MVC 4）编译它。在 MVC 4 中，RC`NoTransform`是`internal`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T02:37:35.397

`NoTransform`和其他方法`Scripts`，如`Styles`.. 是 MVC 4 beta 和 MVC 4 RC 版本中提供的捆绑和缩小的新功能。我希望您没有使用正确版本的 ASP.NET MVC，因此您会遇到编译错误。

[http://blog.kurtschindler.net/post/disabling-bundling-and-minification-in-aspnet-45mvc-4](http://blog.kurtschindler.net/post/disabling-bundling-and-minification-in-aspnet-45mvc-4)

# java - glassfish 3 错误 404

> ID：11004804
> 
> 赞同：0
> 
> 时间：2012-06-12T21:00:49.873
> 
> 标签：java, jsp, glassfish, http-status-code-404

我的站点将 XML 转换为 HTML 页面。在“Web Pages”文件夹中，我创建了一个文件夹“acces”，其中包含生成的 HTML 页面和其中使用的图像。生成过程有效，它将文件 HTML 和 jpg 以 corect 格式放置在文件夹 accesses 中。我可以从我的本地磁盘访问它们。当我尝试在 localhost:8080/myapp/acces/img/Image1.jpg 访问 jpg 时，它可以工作，但是当我访问 localhost:8080/myapp/acces/img/someHtml.html 时，它返回错误 404。

如果我从该文件夹中打开具有特定名称的文件： someHtml.html 直接使用浏览器，它可以工作。

我应该怎么做才能使页面变得可见。我想在 HTML iframe 中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:26:28.857

我认为在您的情况下可能发生的情况是您的 Glassfish 可能会将您的应用程序部署在 WAR 存档中，而发生的情况是您的应用程序可能正在写入您的代码所在的位置（无论您的工作区可能在哪里），所以它不会可以从当前运行的应用程序访问您之前生成的 WAR 文件。Glassfish 可能已经将您的应用程序从 WAR 文件加载到内存中，并且在您重新构建和重新部署之前不会看到您创建的新文件

您可能需要做的是将它写入某个文件夹，并且可能有一个 servlet 可以检索文件并将其发送给客户端。这对我来说不是最优雅的解决方案，您可以在 glassfish（apache 或 nginx 或其他）前面使用 HTTP 服务器读取生成的 HTML 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-13T05:14:54.393

解决了！就我而言，我只是纠正了：

```
<form action="mServlet" method="post">
            <input type="text" name="variable1"/>
            <input type="text" name="variable2"/>
            <input type="submit" name="btnBoton"/>
        </form> 
```

拼写错误：miServlet --> mServlet

# ruby-on-rails - Rails 应用程序身份验证系统的路由和表单

> ID：11004805
> 
> 赞同：0
> 
> 时间：2012-06-12T21:00:50.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我无法理解如何制作遵循以下方案的 Rails 应用程序：

该站点主要由要求用户进行身份验证的“受保护”内部路径组成，此外还有一两个不受保护的“静态”页面和一个直接从“/”（`root_path`）提供的登录页面。

我希望用户通常遵循他们通过访问登录的流程，`root_path`并且在未经身份验证的情况下访问受保护页面的任何尝试都会将他们发送回`root_path`。当用户在 中登录表单时`root_path`，他们会被发送到`home_path`（即使他们是`root_path`通过其他页面的保护被发送到的 - 即，没有智能转发。我可能会在稍后添加。）

此外，在已通过身份验证的情况下尝试浏览`root_path`应立即将请求转发到`home_path`. `home_path`的页面将包含一个注销链接，其效果应立即将用户发送到`root_path`。

我的问题：

routes.rb 条目会是什么样子来设置它？假设我有一个`Users`控制器和一个`Sessions`控制器，并假设我已经有命令行身份验证（通过 irb 控制台）工作，那么让这个系统工作的路由和控制器方法的正确组合是什么？我很困惑！

* * *

万一它有帮助，这是我到目前为止所拥有的，但我迷失了，我什至无法将其置于工作状态来测试它。

我有一个看起来像这样的路由文件：

```
MyAppRails::Application.routes.draw do
  resources :sessions, only: [:new, :create, :destroy]

  root to: "sessions#new"
  match '/signout', to: 'sessions#destroy', via: :delete
  match "/home" => 'users#home'
end 
```

UsersController 只有一个`home`方法，而 SessionsController 有`new`、`create`和`destroy`方法。

我特别卡在我不知道将登录表格发送到哪里 - 我认为它应该以`sessions#new`某种方式指向，但我真的不明白它是如何工作的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:19:13.257

您不需要更改路由，因为`before_filter`应该将 a 放置在要限制对登录用户的访问的每个控制器中。可以调用一个`:login_required`方法来检查用户是否登录，否则，将他们重定向到您的公共页面。

通常，我将根作为单独的控制器、site_controller 或类似的东西。我还创建了我的登录路径`sessions#new`并使用我的`before_filter`方法来管理重定向未登录的客人。

[这个线程](https://stackoverflow.com/questions/1895645/ruby-on-rails-before-filter-only-when-user-is-logged-in)可以帮助你。

# objective-c - 动画在设备上延迟

> ID：11004806
> 
> 赞同：0
> 
> 时间：2012-06-12T21:00:53.833
> 
> 标签：objective-c, ios

我有个问题。设备上的动画（在 viewControllers 之间切换，滚动 tableView）正在使用冲刺，但在模拟器上工作正常。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:15:31.387

恐怕没有简单的答案。唯一的解决方案是改进您的代码并使其更轻、更高效。我也遇到了这样的问题，我别无选择，只能让我的模块更好地工作。

第一个建议是检查内存泄漏（这个对我有帮助：[http ://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using- heapshot-analysis-to-find-underdesirable-memory-growth/](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)）。修复泄漏应该可以提供更多内存。

如果您在第一代 ipad 上出现这种情况……嗯，就是这样。但是如果你在 ipad2 上有它们，那么你真的需要重写你的代码：使用更少的元素，做更少的操作，也许使用一些后台操作来执行一些线程，这样你就可以让主线程空闲来制作动画

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T21:25:52.350

滚动 tableViews 应该不是太大的问题，因为它的设计非常有效。你实现了 heightForRowAtIndexPat: 方法吗？如果是这样，并且您的 tableView 中有很多数据，它会变得非常慢。在这种情况下，最好使用固定高度或桌子。

# php - 从 Java 到 PHP 重新创建 PDF 文件

> ID：11004809
> 
> 赞同：2
> 
> 时间：2012-06-12T21:00:58.183
> 
> 标签：php, web-services, jasper-reports

我有一个 Java 中的 WebService（使用 Apache Axis），它获取文档的 ID，并调用 JasperReports 来创建 PDF 文件（以前在 Java 应用程序中创建的报告 - 服务器端），以创建我正在使用的报告：JasperManager.fillReport 和 JasperExportManager.exportReportToPdf。最后一个返回一个字节数组。我的 web 服务获取数组并将其编码为 Base64 字符串，PHP 接收此字符串作为来自 WebService 的响应。

我想用 PHP 重新创建文件，但我不知道这是否可能。我正在尝试使用以下代码段执行此操作：

```
private function createFileFromString($stringWithFile){
    header('Content-Description: File Transfer');
    header("Content-Type: application/pdf");
    header('Content-Disposition: attachment; filename=remesa.pdf');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    ob_start();
    ob_clean();
    ob_flush();
    flush();
    $fp = file_put_contents("document.pdf", "w");
    fwrite($fp, base64_decode($stringWithFile));
    readfile($fp);
    ob_get_contents();
    fclose($fp);
    exit();
} 
```

WebService 返回一个字符串，如下所示：

> JVBERi0xLjQKJeLjz9MKNCAwIG9iaiA8PC9UeXBlL1hPYmplY3QvQ29sb3JTcGFjZS9EZXZpY2VS R0IvU3VidHlwZS9JbWFnZS9CaXRzUGVyQ29tcG9uZW50IDgvV2lkdGggMjg0L0xlbmd0aCAzNjc0 L0hlaWdodCA1MC9GaWx0ZXIvRENURGVjb2RlPj5zdHJlYW0K/9j/4AAQSkZJRgABAgAAAQABAAD/ 2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0 Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAyARwDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEA...

该字符串具有“PDF Header”，开头如下：

> %PDF-1.4 %âãÏÓ 4 0 obj <>stream ÿØÿà

当我尝试下载文件时，它的大小约为 4-5KB（并且文件已损坏），但响应字符串约为 180KB。

这可能吗？我做错了什么？

**编辑：我读过关于[解包](http://php.net/manual/es/function.unpack.php)功能，也许这个功能可以帮助我？**

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:17:26.523

好的，我解决了。基本上，我有两个错误：

**1.来自Java：**我用来编码PDF文件内容的类（`org.w3c.tools.codec.Base64Encoder`）破坏了带有文件内容的字符串，而不是这个类，我已经切换到Apache Axis工具（`org.apache.axis.encoding.Base64`）。我这样说是因为我比较了用我的 Java 应用程序生成的 PDF 的内容和从 WebService 返回的内容，最后一个要小一些。

**2.来自PHP：构建文件：**在这部分我试图这样做：

```
$fp = file_put_contents("document.pdf", "w");
fwrite($fp, base64_decode($stringWithFile));
readfile($fp); 
```

但是，只有使用 file_put_contents 我已经完成了将内容写入 PDF 文件，fwrite 不一定在这一点上。我正在用这个片段生成pdf：

```
private function createFileFromString($stringWithFile){
    header('Content-Description: File Transfer');
    header("Content-Type: application/pdf");
    header('Content-Disposition: attachment; filename=document.pdf');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    flush();
    file_put_contents("document.pdf", base64_decode($stringWithFile));
    readfile("document.pdf");
    exit();
} 
```

我希望这个答案对每个人都有帮助。

# windows-8 - XAML 在本地命名空间中找不到引用

> ID：11004810
> 
> 赞同：9
> 
> 时间：2012-06-12T21:01:00.730
> 
> 标签：windows-8, visual-studio-2012, microsoft-metro

我在 Win8（均为 RC）上使用 VS2012 在 C++ 中创建了一个新的 Metro Split 应用程序。一切都是开箱即用的。然后，我更改了生成的名称空间并将其更改为我自己的名称空间。经过一些试验和磨难，我得到了所有可以编译的东西，没有任何警告、错误或消息。该应用程序（在项目模板中）运行良好。

但是，如果我尝试编辑任何一个生成的 xaml 文件（ItemsPage.xaml 或 SplitPage.xaml），我会在第一行收到“标记错误”：

命名空间“using:ABProduct.Client.Common”中不存在名称“LayoutAwarePage”。

类的定义是：

```
namespace A{ namespace B { namespace Product { namespace Client { namespace Common 
```

代码编译良好，运行良好。这只发生在设计模式中。

更新：我添加了一个新的 xaml 文件，并且（在再次修复命名空间之后）一切正常。

如果需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T21:33:52.147

项目生成的 WinMD 文件的名称必须是定义公共 WinRT 类型的命名空间的某个前缀。鉴于您的类型在`A.B.Product.Client.Common`namespace 中，WinMD 文件必须具有以下名称之一：

```
A.winmd
A.B.winmd
A.B.Product.winmd
A.B.Product.Client.winmd
A.B.Product.Client.Common.winmd 
```

公共类型还必须在 WinMD 文件中使用与命名空间匹配的最长前缀进行定义。因此，如果您同时拥有**A.winmd**和**ABwinmd**，则`A.B.MyClass`必须在**ABwinmd**中定义类型。

那么，为什么您的代码可以在运行时工作，但不能在设计器中工作？公共类型的命名规则仅适用于 Windows 运行时组件（用于 C++、DLL 文件）中定义的类型，不适用于应用程序 (EXE)。

但是，为了能够实例化您的用户定义类型（包括`LayoutAwarePage`），设计器会将您项目的 EXE 作为 DLL 加载，因此必须遵循命名规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T04:48:49.800

我有一个类似的错误，但后来我关闭了 VS，删除了 .suo，然后重新加载了项目，一切正常。

# java - 遍历 zip 文件 java 中的所有目录

> ID：11004811
> 
> 赞同：6
> 
> 时间：2012-06-12T21:01:00.753
> 
> 标签：java, hash, zip, md5

我目前正在开发一个允许我修改 zip 文件的 md5 的工具。文件的目录结构看起来像

```
 baselines->
models -> icons    ->
          lang     ->
          (a bunch of files here) 
```

但是，当我运行我的代码时，这些目录都没有被迭代。输出给了我：

```
Name:model/visualization_dependency.xml
Name:model/visualization_template.xml
Name:model/weldmgmt_dependency.xml
Name:model/weldmgmt_template.xml 
```

我期待像 model/baseline/somefile.xml 这样的东西出现在输出中，但它没有。有什么想法吗？

```
byte[] digest = null;
        MessageDigest md5;

        try {
            md5 = MessageDigest.getInstance("MD5");

            ZipEntry current;
            while((current = entry.getNextEntry()) != null){

                //ZipEntry current = entry.getNextEntry();
                System.out.println("Size:" + current.getSize());
                System.out.println("Name:" + current.getName());

                if(current.isDirectory()){
                    digest = this.encodeUTF8(current.getName());
                    md5.update(digest);
                }
                else{
                    int size = (int)current.getSize();
                    digest = new byte[size];
                    entry.read(digest, 0, size);
                    md5.update(digest);
                }
            }
            digest = md5.digest();
            entry.close();
        } catch (NoSuchAlgorithmException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:14:08.297

一旦您检查了现有文件夹是目录，那么您需要迭代遍历目录中的每个文件并处理其中的每一个。

例子：

```
if(current.isDirectory()){
  System.out.println("Directory: " + file.getName());
  //Get list of files by file.listFiles() and pass it to 
 // to other method that will do processing. 
  digest = this.encodeUTF8(current.getName());
  md5.update(digest);
} 
```

* * *

结帐这个问题，它详细说明了过程。 [在Java中的目录内迭代](https://stackoverflow.com/q/3154488/164299)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T21:27:17.023

我认为你的代码是完美的。我怀疑您的 zip 文件不包含目录。他们不必！

例如，这是我使用“a/b/c/d.txt”创建的 zip 文件。当我最初创建它时，目录被添加到 zip 文件中：

```
$ unzip -l a.zip 
Archive:  a.zip
  Length      Date    Time    Name
---------  ---------- -----   ----
        0  2012-06-12 14:22   a/
        0  2012-06-12 14:22   a/b/
        0  2012-06-12 14:22   a/b/c/
       19  2012-06-12 14:22   a/b/c/d.txt
---------                     -------
       19                     4 files 
```

但后来我从 zip 索引中删除了目录：

```
$ zip -d a.zip  a/b/c
deleting: a/b/c/
$ zip -d a.zip  a/b
deleting: a/b/
$ zip -d a.zip  a
deleting: a/ 
```

现在当我列出它的内容时，果然只出现了文件。目录不见了：

```
$ unzip -l a.zip 
Archive:  a.zip
  Length      Date    Time    Name
---------  ---------- -----   ----
       19  2012-06-12 14:22   a/b/c/d.txt
---------                     -------
       19                     1 file 
```

注意：当我解压缩同一个文件时，它在提取 d.txt 文件之前创建了 a/b/c/ 目录，即使 zip 索引本身不包含目录。所以看起来 zip 文件中的目录条目是完全可选的。

# c# - 我的网络应用程序应该遵循什么设计模式？

> ID：11004814
> 
> 赞同：2
> 
> 时间：2012-06-12T21:01:08.530
> 
> 标签：c#, asp.net, web-services, design-patterns

我有一个 ASP.NET 应用程序，它同时提供前端服务（可视化）和后端服务（数据转换和从后端 SQL 数据库输出一些数据）。我想要以下内容：

**可扩展后端** 允许其他人上传“插件”以添加额外的 REST API

**可扩展前端**：我的前端目前有一个顶部 URL 栏，如下所示：

```
Category-1   Category-2   Category-3
--App11      ---App21     ---App31
--App12 
```

我正在寻找这样的东西：假设我的应用程序有一个简单的管理面板，当有人使用清单文件上传兼容的“模块”时，应用程序应该将其添加到主应用程序中，并添加一个指向基于类别之一的链接关于插件清单的内容。或者，将此插件的描述添加到主应用程序网页。

具体来说，我正在寻找以下方面的建议：

*   主应用程序应该如何构建？
*   插件的架构应该是什么样的？
*   如何启用类似设计的仪表板并让插件支持它？

我在内容管理系统[Joomla](http://www.joomla.org/)中看到了这一点，但不确定要遵循什么设计范式来实现这一点。我做了一件愚蠢的事情，并将我当前的（巨大的）应用程序设计为与`aspx`主应用程序链接的单独文件。我不介意重写部分内容，但如果没有重大重写，是否有可能实现我的愿望？关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T22:22:41.993

# 一个基本的解决方案：

非常接近裸机，但对于后端，您可以创建一个包含逻辑的 dll，以及一个`HttpModule`注册新的 GenericHandler 以处理请求的 dll。要么使用 web.config 注册插件模块，要么使用在运行`Microsoft.Web.Infrastructure.DynamicModuleHelper`时[注册你的 http 模块，](http://blog.davidebbo.com/2011/02/register-your-http-modules-at-runtime.htm)只需复制到你的 bin 中而不修改 web.config。

# 便携领域：

MVCContrib 有一个名为“PortableAreas”的功能，可以用来将 UI 和后端代码像插件一样打包成 dll。MVC 控制器可以轻松地为 UI 和 JSON 或 XML 返回 HTML 内容，以充当 REST Web 服务。MVCContrib 还定义了一个“总线”，插件可以使用它与主机应用程序通信。比如“嘿，添加一个指向我的 categoryXY 的新链接！”。

看看这些关于可移植区域的博客文章：[asp net mvc 可移植区域 via mvccontrib](http://lostechies.com/erichexter/2009/11/01/asp-net-mvc-portable-areas-via-mvccontrib/)（谈论 MVC2，但也适用于 MVC3）。最新版本可以通过 nuget 下载：[MvcContrib.Mvc3-ci](http://nuget.org/packages/MvcContrib.Mvc3-ci)。

### ASP.NET MVC 只是“ASP.NET”

因此，webforms 和 MVC 可以存在于同一个应用程序中。看看这篇关于[“使用 Web 表单应用程序使用便携式区域”的](http://jeffreypalermo.com/blog/consuming-a-portable-area-with-a-web-forms-application/)文章。基本上它只是将 MVC 相关的 dll 和配置添加到您现有的应用程序中，并设置通信。

# 或者真的看看真正的CMS，

也许使用一个有工作的、记录在案的插件系统是真正的解决方案。取决于哪些功能将成为“核心应用程序”的一部分，以及将开发为插件和您的需求的百分比。

# objective-c - 在 Objective-C 中存储 iOS 应用程序常量

> ID：11004818
> 
> 赞同：3
> 
> 时间：2012-06-12T21:01:23.263
> 
> 标签：objective-c, ios5, unicode, macros, constants

我目前在一个类中定义了一些 unicode 字符（音乐扁平和锐利符号）：

```
#import <Foundation/Foundation.h>

#define kSongsSharpSymbol [NSString stringWithFormat:@"\U0000266F"]
#define kSongsFlatSymbol [NSString stringWithFormat:@"\U0000266D"]

@interface Song : NSObject {

 //...

} 
```

随着应用程序的增长，我认为这些类型的常量最好放在应用程序文件可用的地方，而不必包含类。

**问题**

1.  我是否正确定义了 unicode 字符？它有效，但这并不意味着它是*正确的*
2.  理想情况下，我应该将这些类型的常量放在哪里？

干杯和感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:42:47.457

我通过像这样创建一个自定义类来解决这个问题，然后将它添加到我的预编译头文件中：

```
//Constants.h
#import <Foundation/Foundation.h>

FOUNDATION_EXPORT NSString *const kSongsSharpSymbol;
FOUNDATION_EXPORT NSString *const kSongsFlatSymbol;

//Constants.m
#import "Constants.h"

NSString *const kSongsSharpSymbol = @"\U0000266F";
NSString *const kSongsFlatSymbol = @"\U0000266D";

 //.pch file
#import <Availability.h>

#ifndef __IPHONE_4_0
#warning "This project uses features only available in iOS SDK 4.0 and later."
#endif

 #ifdef __OBJC__
  #import <UIKit/UIKit.h>
  #import <Foundation/Foundation.h>
  #import "Constants.h"

#endif 
```

# objective-c - [NSFileManager copyItemAtPath:toPath:error:]：源路径为零

> ID：11004821
> 
> 赞同：4
> 
> 时间：2012-06-12T21:01:35.303
> 
> 标签：objective-c, core-data, nsfilemanager

我正在尝试使用以下方法将 sqlite DB 添加到应用程序中：[CoreData: Preload Data in Your iOS App](http://www.behindtechlines.com/2012/05/31/coredata-preload-data-in-your-ios-app/)

按照教程我遇到了一个问题：

```
[NSFileManager copyItemAtPath:toPath:error:]: source path is nil 
```

我使用以下代码：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
    if (__persistentStoreCoordinator != nil) {
    return __persistentStoreCoordinator;
}

NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"Peter_R0_1.sqlite"];

if(![[NSFileManager defaultManager] fileExistsAtPath:[storeURL path]]) {
    NSString *sqlitePath = [[NSBundle mainBundle] pathForResource:@"Peter_R0_1" ofType:@"sqlite" inDirectory:nil];
    NSError *anyError = nil;
    BOOL success = [[NSFileManager defaultManager] copyItemAtPath:sqlitePath toPath:[storeURL path] error:&anyError];
}

NSError *error = nil;
__persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error])
{

    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}    

return __persistentStoreCoordinator; 
```

}

我非常感谢在这个问题上的一些帮助

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-12T23:07:41.977

嗯，这个错误意味着99% 的机会`NSString *sqlitePath`是`== nil`以下一项或多项：

1.  文件未添加到项目中的正确 Target
    *   通过文件检查器视图下的“目标成员资格”验证`Peter_R0_1.sqlite`文件）
2.  和/或：您将文件复制到特定的子目录而不是默认目录。

    *   验证文件是否列在 Target 的“Build Phases”下的“Copy Bundle Resources”下，而不是在具有自定义目标或子路径的“Copy Files”下。
3.  和/或：您在文件名中有错字。

# javascript - 从回调函数中获取变量

> ID：11004822
> 
> 赞同：1
> 
> 时间：2012-06-12T21:01:38.007
> 
> 标签：javascript, ajax, callback, closures

```
function foreignCoordinatesArray(){

  var coordinates = [];
  $.getJSON('/critics.json?travel_id=' + $('#foreign_travel').val(), success);

  function success(ary) {
    for(var a in ary){
      var obj = ary[a];
      coordinates.push(new google.maps.LatLng(obj.latitude, obj.longitude));
    }

  }
  console.log(coordinates);
} 
```

最后坐标仍然是 [] 而不是 [{...},{...},...]。我想这一定是闭包的问题

如何在坐标数组中获得我想要的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T21:04:26.990

这不是闭包的问题，​​而是 JavaScript AJAX 调用的异步特性。AJAX 调用响应到达的那一刻（并且您的成功函数被调用，传播`coordinates`数组）是在您登录该数组之后的方式 - 当时它是空的。

我猜你想以某种方式返回`coordinates`from`foreignCoordinatesArray()`函数。如您所见，您不能使用`return`：

```
function foreignCoordinatesArray(){
  var coordinates = [];
  $.getJSON('/critics.json?travel_id=' + $('#foreign_travel').val(), success);

  function success(ary) {
    //...
  }
  return coordinates;
} 
```

相反，您应该传递一个回调函数，该函数将接收`coordinates`：

```
function foreignCoordinatesArray(coordinatesCallback){
  var coordinates = [];
  $.getJSON('/critics.json?travel_id=' + $('#foreign_travel').val(), success);

  function success(ary) {
    //...
    coordinatesCallback(coordinates);
  }
} 
```

顺便说一句，您应该`$('#foreign_travel').val()`在将其用作 URL 的一部分之前转义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T21:05:14.570

问题不在于“闭包”本身，而在于异步编程。在获取 JSON 之前，不会调用成功函数，这几乎总是在您的`foreignCoordinatesArray()`函数返回之后很长时间。通常，当您使用像 之类的异步函数时`$.getJSON()`，回调之外的任何代码都不应假定回调已经运行，因为这通常不是一个安全的假设。

在这种情况下，解决方案是将您`console.log(coordinates)`移至成功功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T21:05:05.970

回调是在`console.log()`执行之后发生的。如果你`console.log()`进入回调函数，你应该得到预期的输出。

```
function foreignCoordinatesArray(){

  var coordinates = [];
  $.getJSON('/critics.json?travel_id=' + $('#foreign_travel').val(), success);

  function success(ary) {
    for(var a in ary){
      var obj = ary[a];
      coordinates.push(new google.maps.LatLng(obj.latitude, obj.longitude));
    }
    console.log(coordinates);
  }

} 
```

# dynamic - 如何在totalview中潜水动态二维数组

> ID：11004827
> 
> 赞同：2
> 
> 时间：2012-06-12T21:02:04.937
> 
> 标签：dynamic, multidimensional-array, totalview

在此[线程](https://stackoverflow.com/questions/2110632/how-to-represent-int-as-array-in-totalview)之后，我想分享一个相关问题：如何在 totalview 中将 int ** 作为 2D 数组进行潜水？（这里讨论了解决方案）。如果有人遇到同样的问题，我希望这会有所帮助！

假设在我的代码中我有一个动态二维数组设置如下

```
 int ** array2D = new int * [5];
     for (int i = 0; i < 5; i++) {
             array2D[i] = new int [5];
     }

     for (int i = 0; i < 5; i++) {
             for (int j = 0; j < 5; j++) {
                     array2D[i][j] = i + j;
             }
     } 
```

现在，在 TotalView 中，当您从 Stack Frame 跳入 array2D 时，变量窗口应该会弹出并显示如下内容：

```
Expresion: array2D, Address: 0x7fffd50efbc8
Type: int **
Value: 0x02234660 -> 0x02234690 -> 0x00000000 (0) 
```

以下步骤类似于我在上面提到的[线程](https://stackoverflow.com/questions/2110632/how-to-represent-int-as-array-in-totalview)中提到的 Chris Gottbrath ，但在我们应该何时以及如何准确地转换 Type 方面它变得有点复杂。所以，

**第 1 步**：通过鼠标中键单击或双击该值，深入指针的值以取消引用指针。

这样做应该会给你这样的东西：

```
Expresion: *(((int **)array2D)), Address: 0x02234660
Type: int *
Value: 0x02234690 -> 0x00000000 (0) 
```

**第 2 步**：现在将类型转换为一级。在“类型”通道中，将 int * 更改为

```
int *[5] 
```

然后点击进入。这样，调试器就知道 array2D 是指向大小为 5 的指针列表的指针。请注意，我的动态数组是指向指针列表的指针。现在，上面显示的值将变为如下所示：

```
Field                 Value
[0]                   0x02234690 -> 0x00000000 (0)
[1]                   0x022346b0 -> 0x00000001 (1)
[2]                   0x022346d0 -> 0x00000002 (2)
[3]                   0x022346f0 -> 0x00000003 (3)
[4]                   0x02234710 -> 0x00000004 (4) 
```

我们现在看到 array2D 有 5 个元素，它们是指向子列表的指针。现在，如果我们深入研究这些元素中的任何一个，我们还不会得到整数列表。要查看整数，我们需要再次取消引用，对于我们进入的每次潜水。

**第 3 步**：假设我们要深入元素 [2] 以检查从 array2D[2][0] 到 array2D[0][4] 的整数。当我们在面板中单击该行时，我们会看到：

```
Expresion: (((int *[5])*(((int **)array2D))))[2], Address: 0x02234670
Type: int *
Value: 0x022346d0 -> 0x00000002 (2) 
```

我们现在正在查看指向子列表编号 2 的指针，该子列表应该包含整数。

**第 4 步**：现在，再次深入了解取消引用，我们应该看到如下内容：

```
Expresion: *(((int *)(((int *[5])*(((int **)array2D))))[2])), Address: 0x022346d0
Type: int
Value: 0x00000002 (2) 
```

**步骤 5**：现在在第二级中投射类型。在“类型”频道中，将 int 更改为

```
int [5] 
```

然后点击进入。我们开始了：我们看到元素 array2D[2][0] - array2D[2][4]

```
Field                 Value
[0]                   0x00000002 (2)
[1]                   0x00000003 (3)
[2]                   0x00000004 (4)
[3]                   0x00000005 (5)
[4]                   0x00000006 (6) 
```

虽然潜水一维阵列很简单，但二维阵列潜水似乎需要仔细的潜水和施法顺序。我尝试了其他方法，但它们无法正常工作。所以，我希望这对偶然发现同样问题的人有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-13T00:59:19.897

已经四年了，但我发现自己处于这种情况并找到了这个问题的答案。大部分答案都在[这个知识库页面](http://kb.roguewave.com/kb/?View=entry&EntryID=1608&Msg=)上找到。

如何在 totalview 中正确显示二维动态数组：

1.  潜入`array2D`. Totalview 将表达式显示为`*(array2D)`，类型显示为`TYPE *`。在你的情况下，`TYPE`是`int`。

2.  将类型条目更改为`TYPE [B]*[A]`，或等效地`TYPE ([A]*)[B]`，您有一个大小为`A`x的数组`B`。在你的情况下，这将是`int [5]*[5]`. 要明确您的数组的有效范围应该是`[0][0]`to `[A-1][B-1]`。

3.  右键单击并选择深入了解所有内容。这会将表达式更改为类似于 的内容，`(((TYPE[B]*[A])&*(array2D)))[:]`并将类型更改为`TYPE[A][B]`。整个数组现在将显示在 Totalview 中。

# playframework-2.0 - 我应该通过 JSR 303 / Bean Validation 处理多少逻辑？

> ID：11004828
> 
> 赞同：0
> 
> 时间：2012-06-12T21:02:09.647
> 
> 标签：playframework-2.0, bean-validation

[如文档中所述，](http://www.playframework.org/documentation/2.0/JavaForms)我有一个 Play 2.0.1 应用程序，并且正在通过 Spring Data binder 掌握表单处理的窍门。我到了我有一个表单的地步，假设一个用户向另一个用户发送一条消息，看起来像这样：

```
public class MessageForm {

  @NotNull @NotEmpty
  public String message;

  @NotNull
  public User recipient;

  // i know, no sender
} 
```

我的自定义活页夹确保用户（在 HTML 表单中由他的 id 表示）得到正确序列化，并且在不存在此类用户时默认为 null。

我正在考虑编写额外的验证，即确保通过表单传递的用户与试图发布消息的用户是朋友。这基本上是一种`@FriendsWithCurrentUser`-Annotation。

我知道该怎么做，我的问题是：这是个好主意吗？从模块的角度来看，这将是一个有点植根于 web 上下文的约束，所以我不想把它放在我的模型包中。我有一种模糊的感觉，这可能不是 JSR 的用途，但我也认为这将大大减少我的控制器中的逻辑，并允许我在用户提交上重用类似的约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:07:39.400

这是常见的问题。另一个类似的情况是必须与数据库对话的验证。

从我的角度来看，问题是您将多久使用一次该验证？如果是要在 20 个地方使用的东西，我会编写注解 + 验证器类，但如果在一个或两个地方使用此验证，最好手动抛出 ConstraintViolationException。那么我们仍然使用通用的验证机制，但是我们不需要编写有问题的验证器类。有时这也是性能问题：我们只是为了验证而查询数据库，并且该查询经常在业务逻辑中重复。

权衡是在将验证与其余代码完全分开与混合各种应用程序层的验证器之间进行权衡。

通常我更喜欢编写单独的验证，因为经常发生必须在其他地方使用相同的验证。如果没有单独的验证器，我经常复制现有的验证代码，因为总是有比重构验证更重要的事情要做......

Bean Validation 的想法是在应用程序中有单独的层，负责验证。该层不应与模型混合，因为可以通过多种不同方式验证给定模型。

可能有一个模型和各种验证器集 - 注释只是配置。有时，如果模型要在各种产品中使用，最好完全放弃注解并使用基于 XML 的配置（它非常容易理解和使用）。

所以不要把验证器放在模型包中，如果你想这样做的话，为你的验证器创建一个新包。

# ios - 使用 sqlite 数据按字母顺序对 UITableView 进行排序

> ID：11004831
> 
> 赞同：1
> 
> 时间：2012-06-12T21:02:27.403
> 
> 标签：ios, sqlite, uitableview, sorting, ios5

我不知道如何按字母顺序对 UITableView 中的数据进行排序。

我一直在 Icodeblog（[网站](http://www.icodeblog.com/2008/09/22/iphone-programming-tutorial-creating-a-todo-list-using-sqlite-part-4/)）中使用 ToDoList 示例。一旦我输入数据，它就会出现在 UITableview 上。数据位于 sqlite 文件中。

我在 UITableview 栏中创建了一个按钮来运行此代码以按字母顺序对文本进行排序......但它不起作用：

```
 NSMutableArray *array = [NSMutableArray array];
    NSArray *sortedArray;
    NSSortDescriptor *lastDescriptor =
    [[NSSortDescriptor alloc] initWithKey:newTodo.text
                                ascending:YES
                                 selector:@selector(localizedCaseInsensitiveCompare:)];
    NSArray *descriptors = [NSArray arrayWithObjects:lastDescriptor, nil];
sortedArray = [array sortedArrayUsingDescriptors:descriptors];
    [self.tableView reloadData]; 
```

请指出正确的方向。我的朋友还告诉我检查“sortUsingSelector”方法......但我仍然无法弄清楚。

我正在使用的示例代码位于[此处](http://www.icodeblog.com/wp-content/uploads/2008/09/todo-part-41.zip)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:13:35.580

刚刚测试了示例代码，这就是我对它所做的。`NSSortDescriptor`将使用 KVC，因此 `initWithKey`将是对象的相应属性。您的代码目前没有做任何事情，您正在尝试对一个空数组进行排序。此外，您不会修改表视图数据源。

```
- (void)viewWillAppear:(BOOL)animated 
{
    todoAppDelegate *appDelegate = (todoAppDelegate *)[[UIApplication sharedApplication] delegate];
    NSSortDescriptor *lastDescriptor =
    [[NSSortDescriptor alloc] initWithKey:@"text"
                                ascending:YES
                                 selector:@selector(localizedCaseInsensitiveCompare:)];
    NSArray *descriptors = [NSArray arrayWithObjects:lastDescriptor, nil];
    NSMutableArray* sortedArray = [[[appDelegate.todos sortedArrayUsingDescriptors:descriptors] mutableCopy] autorelease];
    appDelegate.todos = sortedArray;

    [self.tableView reloadData];
    [super viewWillAppear:animated];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T22:11:36.103

看一眼 ：

[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Articles/Arrays.html#//apple_ref/doc/uid/20000132-SW5](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Articles/Arrays.html#//apple_ref/doc/uid/20000132-SW5)

```
sortedArray = [anArray sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

在这个问题中：

[如何按字母顺序对 NSArray 进行排序？](https://stackoverflow.com/questions/1351182/how-to-sort-a-nsarray-alphabetically)

`localizedCaseInsensitiveCompare`是[NSString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)类的一个方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:59:57.067

您可以与这些人在这里提出的答案相处融洽，但为了简单起见，我将在查询的帮助下进行排序，例如：

```
 "SELECT * FROM <table-name> ORDER BY <column-name>" 
```

我猜这可能是一种更简单的方法。

# python - Python中的模式匹配、元组和乘法

> ID：11004838
> 
> 赞同：2
> 
> 时间：2012-06-12T21:03:22.840
> 
> 标签：python, pattern-matching, tuples

减少这一系列元组的最佳方法是什么

```
('x', 0.29, 'a')
('x', 0.04, 'a')
('x', 0.03, 'b')
('x', 0.02, 'b')
('x', 0.01, 'b')
('x', 0.20, 'c')
('x', 0.20, 'c')
('x', 0.10, 'c') 
```

进入：

```
('x', 0.29 * 0.04 , 'a')
('x', 0.03 * 0.02 * 0.01, 'b')
('x', 0.20 * 0.20 * 0.10, 'c') 
```

编辑： `X`是一个常数，它是预先知道的，可以安全地忽略

并且数据可以被视为在上面显示的第三个元素上预先排序。

我目前正在尝试使用 operator.mul 和大量模式匹配以及奇怪的 lambda 函数来实现它......但我相信一定有更简单的方法！

我可以说谢谢你所有的答案。他们每个人都很棒，而且超出了我的期望。我所能做的就是给他们一个赞成票并说声谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T21:12:41.360

这是一种函数式编程方法：

```
from itertools import imap, groupby
from operator import itemgetter, mul

def combine(a):
    for (first, last), it in groupby(a, itemgetter(0, 2)):
        yield first, reduce(mul, imap(itemgetter(1), it), 1.0), last 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T21:21:47.717

这是一种更有状态的方法。[^(（我更喜欢@Sven。）)]

```
def combine(a)
    grouped = defaultdict(lambda: 1)

    for _, value, key in a:
        grouped[key] *= value

    for key, value in grouped.items():
        yield ('x', value, key) 
```

如果数据已经排序，则效率会降低，因为它在内存中保留的内存比需要的多。再说一次，这可能无关紧要，因为它也不是愚蠢的低效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T21:27:38.533

鉴于您最终要将所有找到的值相乘，而不是累积值列表并在最后将它们相乘，请更改您的 defaultdict 以采用将新键设置为 1 的初始化方法，然后乘以您去：

```
data = [('x', 0.29, 'a'),
('x', 0.04, 'a'),
('x', 0.03, 'b'),
('x', 0.02, 'b'),
('x', 0.01, 'b'),
('x', 0.20, 'c'),
('x', 0.20, 'c'),
('x', 0.10, 'c'),]

from collections import defaultdict

def reduce_by_key(datalist):

    proddict = defaultdict(lambda : 1)
    for _,factor,key in datalist:
        proddict[key] *= factor

    return [('x', val, key) for key,val in sorted(proddict.items())]

print reduce_by_key(data) 
```

给出：

```
[('x', 0.011599999999999999, 'a'), 
 ('x', 5.9999999999999993e-06, 'b'), 
 ('x', 0.004000000000000001, 'c')] 
```

# xcode - 如何在 LLDB 中显示带小数的浮点值

> ID：11004843
> 
> 赞同：1
> 
> 时间：2012-06-12T21:03:41.657
> 
> 标签：xcode, lldb

在 gdb 中，我可以使用 print 命令来显示一个浮点数或双精度变量，并且我得到一个带有几个小数位的值。LLDB 中的等效命令 expr 似乎对值进行舍入/截断，并且只显示整数部分。LLDB 的格式字符串文档有点迟钝。如何显示双精度或单精度浮点局部变量，包括小数部分？

如果 foo = 3.1415926，那么

expr 富

显示

富 = 3

不是很有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T12:54:38.347

您可以使用 expr 命令执行此操作。这很麻烦，但它有效：

```
(lldb) expr (int) printf("%f \n",foo)
3.14159
(lldb) 
```

# c# - C# 图像比较。在另一个中搜索

> ID：11004844
> 
> 赞同：1
> 
> 时间：2012-06-12T21:03:47.773
> 
> 标签：c#, image, comparison

我有两张图片。

一个很大，一个很小。我需要一个图像比较代码/库，它将在大的中搜索小的，并给我比较的位置和百分比。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:12:52.497

Emgu 是 .Net 中的 opencv（开放计算机视觉）。

[http://www.emgu.com/wiki/index.php/Main_Page](http://www.emgu.com/wiki/index.php/Main_Page)

这将具有足够的功能来满足您的要求。

编辑：我假设 C# 是一个关键要求。

# java - 在 MultiPart 调用中将不同的参数组合到单个实体部件中是否是一种好习惯？

> ID：11004845
> 
> 赞同：0
> 
> 时间：2012-06-12T21:03:59.020
> 
> 标签：java, android, multipartentity

在我们的项目中，我们使用 Multpart (http.entity.mime.MultipartEntity) 将数据发送到后端。现在，我们有一个新要求，它基本上表明需要将 MultiPart 请求中的部分数量限制为两个。

通常，我们为每个参数添加一个新部分：

```
entity.addPart("parameterName1",new StringBody(parameterValue1));
entity.addPart("parameterName2",new StringBody(parameterValue2));
entity.addPart("parameterName3",new StringBody(parameterValue3));
entity.addPart("parameterName4",new StringBody(parameterValue4)); 
```

现在的要求是这样的：

```
entity.addPart("parameterName1",new StringBody(parameterValue1+"|"+parameterValue2+"|"+parameterValue3));
entity.addPart("parameterName2",new StringBody(parameterValue2)); 
```

我想知道这是否是一个很好的标准，这是否总是将 Multipart 调用中的部分数量限制为“两个”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:18:03.303

我不会说将多部分请求限制为仅`two`或任何指定的数字作为最佳实践，但您可以这样做，确保这不是一种实践，您可能希望更多地探索业务案例以清楚地了解需求。

# c# - 获取委托的所有 Target 实例

> ID：11004856
> 
> 赞同：2
> 
> 时间：2012-06-12T21:04:44.920
> 
> 标签：c#, delegates

如果我只向委托注册一个类的一个方法，我可以使用`delegate.Target`，但是当我从不同的类订阅更多方法时，这不再起作用。还有其他方法可以访问此代表的订阅者列表吗？

这是代码：foreach 循环在运行时被评估为 null（它编译）

```
 public delegate void WriteMessage(string msg);

internal class Program
{
    private static void Main(string[] args)
    {
        var myClass = new MyClass();
        var writer = new WriteMessage(myClass.WriteMessage);

        writer += SaySomething; //method in this class
        writer += myClass.SayShit; //instance class
        writer += AnotherClass.Say; //static class

        foreach(string target in (string[])writer.Target)
        {
            Console.WriteLine(target);
        }

        Console.ReadLine();
    }

    private static void SaySomething(string msg)
    {
        Console.WriteLine("HI!!!!");
    }
} 
```

完整代码： http: [//pastebin.com/AzzRGMY9](http://pastebin.com/AzzRGMY9)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T21:07:37.753

```
Delegate[] list = delegate.GetInvocationList(); 
```

这将为您提供一个对象数组`Delegate`，您可以使用它来获取`Target`s 的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-03T12:33:58.623

这只是来自已接受答案的附加信息，因为我正在网上查找相同的信息。

如果要在接收到所有调用列表后调用所有注册的方法，可以使用以下代码：

```
 Delegate[] listAllRegisteredMethods = writer.GetInvocationList(); //writer is the variable based on the question example

        foreach(Delegate c in listAllRegisteredMethods )
        {
            object[] p = { }; //Insert your parameters here inside the array if your delegate has parameters
            c.DynamicInvoke(p); //Invoke it, if you have return values, assign it on a different variable
        } 
```

# javascript - IE收到302后继续执行JS？

> ID：11004860
> 
> 赞同：5
> 
> 时间：2012-06-12T21:04:52.933
> 
> 标签：javascript, internet-explorer, comet, lift

所以，我遇到了一个奇怪的问题，我希望那里有一些 IE 专家可以对这种行为有所了解。我的公司运行实时 Lift 应用程序。我们使用 Comet 模型在浏览器和服务器之间进行实时通信，这是 Lift 的标准。另外值得注意的是：如果彗星与服务器不同步（由于连接问题或服务器重启，任何会终止服务器上会话的事情），服务器会响应彗星请求`document.location.reload();`以重新加载页面，启动一个新会话，等等。

现在，为了确保按应有的方式注销，我们有一个特殊的 url (/session/logout)，它会执行所有与会话相关的清理，然后将您踢回我们的主页。这可以通过单击该 URL 的锚点来触发，或者如果您尝试执行需要注销的操作，服务器可能会向您发出该 URL 的 302。很简单，对吧？在大多数浏览器中，这很有效，因为工作流程看起来像这样：

1.  用户单击注销按钮或服务器向 /session/logout 发送 302
2.  当前页面上的 Javascript 执行停止，因此所有彗星都关闭了。
3.  浏览器加载 /session/logout
4.  浏览器从服务器收到 302 消息（表示会话清理完成）将用户踢到主页。
5.  浏览器加载主页。

但是，在 IE 中，我们看到以下行为：

1.  用户单击注销按钮或服务器向 /session/logout 发送 302
2.  浏览器开始加载 /session/logout
3.  浏览器从服务器收到 302 消息（表示会话清理已完成）以将用户踢到主页。
4.  浏览器开始加载主页。
5.  Comets 收到`document.location.reload();`来自服务器的 a，因为它们从未被 IE 关闭，主页的加载被中止，并且当前页面在没有用户登录的情况下重新加载。

这是完全不可取的，因为我们需要加载 /session/logout 的正确结果——**尤其是**在用户试图做他们登录时无法做的事情的情况下（在这种情况下，302 从注销将指向他们最初试图去的地方）。

有没有人遇到过这种问题？关于如何处理这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:52:50.893

具体来说，我对彗星一无所知，但是您应该更明确地关闭彗星。

我建议捕获 window.onbeforeunload 事件并明确关闭 Comet，而不是依赖浏览器为您完成这项工作。

# sha256 - bcrypt或sha256的渐进式通行证？

> ID：11004861
> 
> 赞同：2
> 
> 时间：2012-06-12T21:04:59.567
> 
> 标签：sha256, bcrypt, password-storage

目前在网络上存储密码的最佳实践似乎是使用 bcrypt 而不是 sha256 或任何其他散列算法。Bcrypt 看起来很棒，但我认为它有一个缺陷：如果我有一个使用 10 工作因子填充密码的数据库，并且我想将该工作因子增加到 12，因为计算能力增加了，那么我无法做到这一点不知道用户密码，这意味着等到他们再次登录。这会给放弃帐户的用户带来问题。

在我看来，另一种解决方案是使用 sha256 并执行等于 2^（工作因子）的次数。如果我这样做，那么当我想增加工作系数时，我可以对每个存储的密码的通过次数进行差异化。

我已经写了一些代码来做到这一点，我想从每个人那里得到关于这是否是一个好主意的反馈。

[https://github.com/rbrcurtis/pcrypt](https://github.com/rbrcurtis/pcrypt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:49:51.193

做了很多关于这些不同加密算法的挖掘和阅读论文。最终给我一个答案的是crypto.stackexchange.com上的这个[问题](https://crypto.stackexchange.com/questions/2859/does-shacrypt-have-the-properties-which-make-bcrypt-slow-on-gpus)。我的算法有点类似于[shacrypt](http://www.akkadia.org/drepper/SHA-crypt.txt)，我以前没有听说过，但仍然不如 bcrypt。原因是除了工作因素之外，bcrypt 还需要比 sha2 系列更多的内存来处理。这意味着它不能在 GPU 中有效地并行化（尽管在某种程度上它可以，并且在 FPGA 中更容易），而 sha2 可以（并且很容易）。因此，无论 sha2 one 执行多少次，它仍然不如 bcrypt 有效。

顺便说一句，[scrypt](http://www.tarsnap.com/scrypt.html)要好得多，因为它同时具有 CPU 的工作因素和内存因素（因此基本上不可能在 GPU 或 FPGA 中并行化）。唯一的问题是 scrypt 的 nodejs 库目前基本上无法使用，因此可能需要付出一些努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T19:14:37.753

增加 bcrypt 通行证数量的潜在解决方案（或工作因素。我实际上并没有使用 bcrypt，但这是一个与算法无关的答案）：

对于存储密码的表中的每个条目，还存储它被散列的通行证的数量。当您达到更多通行证时，保存具有该通行证数量的所有新密码，并将所有通行证少于该通行证的密码设置为在 7 天内过期。当他们输入新密码时，用正确的通行数对其进行哈希处理。

或者，您不能重置密码，但下次他们尝试登录时，重新哈希他们的密码并将其存储在表中。这确实意味着如果人们很长时间没有登录，他们的密码更容易在数据库泄露的情况下被破坏。话虽如此，对于进攻者来说，用更多的传球攻击大量的人比用更少的传球攻击少数人更值得（没关系，因为盐，最后一句话是错误的）。

# android - 如何使用 facebook 帐户唯一地登录 android 应用程序

> ID：11004862
> 
> 赞同：0
> 
> 时间：2012-06-12T21:05:04.263
> 
> 标签：android, facebook

我正在开发一个安卓应用程序。如果用户想使用该应用程序，他必须使用 facebook 帐户登录。我的问题是，当用户仍然从 android 终端登录，然后他通过同一个 facebook 帐户从另一个 android 终端登录时。

有没有办法从 facebook 应用程序中唯一地识别用户？

谢谢。

# c - 在 C 中创建 BMP 文件（位图）

> ID：11004868
> 
> 赞同：18
> 
> 时间：2012-06-12T21:05:15.057
> 
> 标签：c, bitmap, bmp

我正在尝试仅从代码中用 C 语言制作位图。我目前正在尝试制作一个非常简单的 .bmp 图像，高度为 1 像素，宽度为 4 像素，全部为白色像素。我已阅读格式说明并尝试应用它。这导致了以下代码：

```
char bitmap[1000];

void BMPmake()
{
    // -- FILE HEADER -- //

    // bitmap signature
    bitmap[0] = 'B';
    bitmap[1] = 'M';

    // file size
    bitmap[2] = 66; // 40 + 14 + 12
    bitmap[3] = 0;
    bitmap[4] = 0;
    bitmap[5] = 0;

    // reserved field (in hex. 00 00 00 00)
    for(int i = 6; i < 10; i++) bitmap[i] = 0;

    // offset of pixel data inside the image
    for(int i = 10; i < 14; i++) bitmap[i] = 0;

    // -- BITMAP HEADER -- //

    // header size
    bitmap[14] = 40;
    for(int i = 15; i < 18; i++) bitmap[i] = 0;

    // width of the image
    bitmap[18] = 4;
    for(int i = 19; i < 22; i++) bitmap[i] = 0;

    // height of the image
    bitmap[22] = 1;
    for(int i = 23; i < 26; i++) bitmap[i] = 0;

    // reserved field
    bitmap[26] = 1;
    bitmap[27] = 0;

    // number of bits per pixel
    bitmap[28] = 24; // 3 byte
    bitmap[29] = 0;

    // compression method (no compression here)
    for(int i = 30; i < 34; i++) bitmap[i] = 0;

    // size of pixel data
    bitmap[34] = 12; // 12 bits => 4 pixels
    bitmap[35] = 0;
    bitmap[36] = 0;
    bitmap[37] = 0;

    // horizontal resolution of the image - pixels per meter (2835)
    bitmap[38] = 0;
    bitmap[39] = 0;
    bitmap[40] = 0b00110000;
    bitmap[41] = 0b10110001;

    // vertical resolution of the image - pixels per meter (2835)
    bitmap[42] = 0;
    bitmap[43] = 0;
    bitmap[44] = 0b00110000;
    bitmap[45] = 0b10110001;

    // color pallette information
    for(int i = 46; i < 50; i++) bitmap[i] = 0;

    // number of important colors
    for(int i = 50; i < 54; i++) bitmap[i] = 0;

    // -- PIXEL DATA -- //
    for(int i = 54; i < 66; i++) bitmap[i] = 0;
}

void BMPwrite()
{
    FILE *file;
    file = fopen("bitmap.bmp", "w+");
    for(int i = 0; i < 66; i++)
    {
        fputc(bitmap[i], file);
    }
    fclose(file);
} 
```

当我尝试打开此图像时，它说图像已损坏。我在这里错过了什么吗？

我还注意到 .bmp 整数的编码是小端序。我认为这意味着我必须颠倒字节的顺序。例如，四个字节中的 256 是：00000000 00000000 00000001 00000000，我认为在小端中这将是：00000000 00000001 00000000 00000000

任何人都可以在这里帮我一把吗？我是否使用了正确的方法？任何帮助，将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T21:16:09.097

您的像素偏移量（字节 10..13）为零，但像素数据实际上并不是从文件的开头开始，而是从 54 字节开始。

还：

*   您对字节 34 的评论说“位”，但意思是“字节”，但这当然没关系。

*   您的水平和垂直分辨率的字节顺序错误，但我非常怀疑这是否重要。

如果我这样做，我会为标题数据定义结构（事实上，如果你在 Windows 上，微软已经这样做了）并使用宏或其他东西来将字节以可移植的方式放入正确的顺序。

您是否“必须颠倒字节顺序”取决于您使用的处理器的字节序。正如您所做的那样，单独编写单独的字节是避免担心这一点的有效方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-25T22:06:50.167

这是在linux上测试的代码。

```
#include <stdio.h>
#include <stdint.h>
#include <string.h>
#include <malloc.h>
#define _height 600
#define _width 800
#define _bitsperpixel 24
#define _planes 1
#define _compression 0
#define _pixelbytesize _height*_width*_bitsperpixel/8
#define _filesize _pixelbytesize+sizeof(bitmap)
#define _xpixelpermeter 0x130B //2835 , 72 DPI
#define _ypixelpermeter 0x130B //2835 , 72 DPI
#define pixel 0xFF
#pragma pack(push,1)
typedef struct{
    uint8_t signature[2];
    uint32_t filesize;
    uint32_t reserved;
    uint32_t fileoffset_to_pixelarray;
} fileheader;
typedef struct{
    uint32_t dibheadersize;
    uint32_t width;
    uint32_t height;
    uint16_t planes;
    uint16_t bitsperpixel;
    uint32_t compression;
    uint32_t imagesize;
    uint32_t ypixelpermeter;
    uint32_t xpixelpermeter;
    uint32_t numcolorspallette;
    uint32_t mostimpcolor;
} bitmapinfoheader;
typedef struct {
    fileheader fileheader;
    bitmapinfoheader bitmapinfoheader;
} bitmap;
#pragma pack(pop)

int main (int argc , char *argv[]) {
    FILE *fp = fopen("test.bmp","wb");
    bitmap *pbitmap  = (bitmap*)calloc(1,sizeof(bitmap));
    uint8_t *pixelbuffer = (uint8_t*)malloc(_pixelbytesize);
    strcpy(pbitmap->fileheader.signature,"BM");
    pbitmap->fileheader.filesize = _filesize;
    pbitmap->fileheader.fileoffset_to_pixelarray = sizeof(bitmap);
    pbitmap->bitmapinfoheader.dibheadersize =sizeof(bitmapinfoheader);
    pbitmap->bitmapinfoheader.width = _width;
    pbitmap->bitmapinfoheader.height = _height;
    pbitmap->bitmapinfoheader.planes = _planes;
    pbitmap->bitmapinfoheader.bitsperpixel = _bitsperpixel;
    pbitmap->bitmapinfoheader.compression = _compression;
    pbitmap->bitmapinfoheader.imagesize = _pixelbytesize;
    pbitmap->bitmapinfoheader.ypixelpermeter = _ypixelpermeter ;
    pbitmap->bitmapinfoheader.xpixelpermeter = _xpixelpermeter ;
    pbitmap->bitmapinfoheader.numcolorspallette = 0;
    fwrite (pbitmap, 1, sizeof(bitmap),fp);
    memset(pixelbuffer,pixel,_pixelbytesize);
    fwrite(pixelbuffer,1,_pixelbytesize,fp);
    fclose(fp);
    free(pbitmap);
    free(pixelbuffer);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T21:17:29.620

使用十六进制编辑器打开您的文件以查看实际存在的内容。这将帮助您确定您的代码是否正在做一些意想不到的事情。

# ios - 为什么打字会迅速增加内存使用量？

> ID：11004874
> 
> 赞同：2
> 
> 时间：2012-06-12T21:05:57.817
> 
> 标签：ios, memory

在使用 Instruments 时，我注意到在快速输入 UITextView 时，我的应用程序的内存使用量显着增加，从大约 30mb 增加到 175mb。当我停止打字时，它又安定下来了。这会导致大量内存警告，所以我想知道是什么原因造成的？

# jquery - qTip2 和 atlas ajax（或只是一般的 ajax 部分刷新）导致孤立的 qTips

> ID：11004888
> 
> 赞同：0
> 
> 时间：2012-06-12T21:07:49.050
> 
> 标签：jquery, asp.net, ajax, webforms, qtip2

有点啰嗦，但请耐心等待：

asp.net updatepanel 包含许多 qTip2 的表单，有些不是基于 ajax。

因此，如果我在导致回发（触发异步更新和刷新）后立即将 qTip2 悬停，则 qtip 中的 javascript 开始触发并在返回时创建 qtip，但要么是因为事件发起元素不再存在，所以 qip 只是保持打开状态（显示：块) 并出现在文档的左上角（我猜有些代码试图计算出 .position 但元素不再有）。

您可以在这里看到错误：http://www.matclad.co.uk/brick-slip-blends.aspx

尝试即单击一个设计，然后在完成后立即向左或向右移动一个。qTip 将停留在那里。您也可以在添加砖块时执行此操作，尽管时间比较困难

创建 qTip 的代码是：

//为简洁起见修剪函数

```
 var els = $('div.pallet li.item .photo > input, div.lower li.chosen-item .photo > input');
    els.click(function(){els.each(function(){$(this).qtip('destroy')});})

    $('div.pallet li.item .photo > input, div.lower li.chosen-item .photo > input')
    .each(function(){
                    var id = $(this).parent().attr('rel'); 
                    $(this).qtip({
                            content: {  text:'Loading...', 
                                        ajax: { contentType: 'application/json; charset=utf-8', 
                                                dataType: 'json', 
                                                url: '/brick-slip-blends.aspx/GetDataForSlip',
                                                data: '{Id:' + id + '}', type: 'POST',
                                                beforeSend: function(jqXHR, settings){
                                                                    return !Sys.WebForms.PageRequestManager.getInstance().get_isInAsyncPostBack();
                                                },
                                                success: function(data, status){
                                                                    this.set('content.text', data.d);

                                                }, 
                                                complete: function(){} 
                                                } 
                            },
                            hide: { event: 'click mouseout' },
                            show: { delay: 500 }
                        });
                    });
    $('.qt').click(function(){$(this).qtip('destroy');});
    $('.qt').qtip(); 
```

请注意，在尝试解决此问题时，我在单击时破坏了选择器中的其他 qtip，但这并不能完全正常工作（尽管它已部分修复它）并且我也一直在尝试在 PageRequestManager 方法中做一些事情（atlas ajax API)

我应该使用什么样的策略来解决这个问题？可能的ajax排队问题？取消创建的全局开关（在传递给 qtip 的函数中）？

请帮助我一直在努力解决这个问题，任何帮助将不胜感激。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T22:38:15.887

好的，所以我采取了蛮力并摧毁了 qtip - 我在自己的代码中指出，我只是：

```
$('.qt').click(function(){$(this).qtip('destroy');}); 
```

我刚刚移到顶部销毁即

```
var els = $('div.pallet li.item .photo > input, div.lower li.chosen-item .photo > input, .qt'); 
```

我没有迭代所有其他 .qt 并销毁它们。然而...

我不相信这完全解决了这个问题，我无疑会回来。

# sorting - Grails sortableColumn 使用对象 ID 而不是名称

> ID：11004890
> 
> 赞同：0
> 
> 时间：2012-06-12T21:08:03.560
> 
> 标签：sorting, grails, object

我有一个资源列表，其中包含管理器，这些管理器也是我系统中的资源。我想按名称对资源列表进行排序。我发现 Grails 是按资源 ID 排序列表，而不是我指定的字段。

```
<g:sortableColumn property="orgRole" title="Org Role" />

<g:each in="${resourceInstanceList}" status="i" var="resourceInstance">
   <td>${fieldValue(bean: resourceInstance, field: "manager")}</td>
   <!--<td> ${resourceInstance.manager.toString()} </td>-->
</g:each> 
```

我已经在我的资源上定义了静态映射以按我的“名称”属性进行排序，并且我有一个我尝试调用的 toString 方法，它也返回对象的“名称”作为值。仍然看到按与数据库中的序列相关的 Integer 'id' 属性排序的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:42:17.843

精度需要在 sortableColumn 上而不是在 td 上定义。我应该使用这个：`<g:sortableColumn property="orgRole.name" title="Org Role" />`这明确告诉 Grails 我想使用哪个字段，否则它依赖于对象的默认 id 元素。

# visual-studio-2010 - 我可以在 VS2010 中使用 32 位 Oracle Developer Tools 和 x64 ODAC 吗？

> ID：11004893
> 
> 赞同：3
> 
> 时间：2012-06-12T21:08:26.210
> 
> 标签：visual-studio-2010, oracle11g, 64-bit, odac, odt

从这里的 Oracle 网站： [http ://www.oracle.com/technetwork/database/windows/downloads/index-090165.html](http://www.oracle.com/technetwork/database/windows/downloads/index-090165.html)

这是针对他们最新的 Oracle 数据访问组件，适用于 Windows x64 的 64 位 ODAC 11.2 Release 4 (11.2.0.3.0)。我想使用开发人员工具（ODT），但它们在 64 位中不可用（可能是因为 VS2010 仍然是 32 位）。从网站：

重要提示：实体框架设计时功能需要 32 位 Oracle Developer Tools for Visual Studio 下载。以上下载完全支持实体框架部署，但不包含设计时工具。

我不使用 EF（我使用 Mindscape LightSpeed 产品，因为它通常比 EF 早 3 或 4 年）但原理是一样的 - VS2010 和 LightSpeed 是 32 位应用程序，无法加载/使用 x64 库。

我想使用 32 位工具 (ODT) 开发我的应用程序并使用 x64 ODAC 部署应用程序。有人做过吗？可以做到吗？有人吗？

如果重要的话，这适用于在虚拟 Windows Server 2008 R2 机器上运行的 WCF 服务。我半成功的做法是强迫每个人都使用 32 位操作，但如果像他们声称的那样支持 64 位，这似乎有点愚蠢。

在此先感谢，戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T10:18:08.167

What the Oracle site mentions is that they have provided the ODAC components for both 32 and 64 bit, but have the Visual Studio design tools for only 32 bit.

Since you are not using EF, I am guessing you are interested in using ODP.NET components with LightSpeed.

For this scenario, you could go ahead by installing both 64 and 32 bit of ODP.NET on the development system and allowing the application to run in native mode on the deployment systems (the application will select the 64 or 32 bit ODP component based on the platform it is running on).

Check [RealFiction blog](http://realfiction.net/go/153) and [Semaphoremd blog](http://www.semaphoremd.com/2011/05/03/installing-32-bit-and-64-bit-oracle-11g-r2-odac-to-work-with-biztalk-2010-oracle-adapters/) for detail about installing the client tools for both 64 and 32 bit in parallel. Basically proper way to go about installing them in separate folders and creating symbolic links to the appropriate folder from `%windir%\system32` and `%windir%\SysWOW64`. Thus allowing the WOW64 to take care of allocating the proper components based on the running application.

# sharepoint-2010 - STS 错误“令牌的发行者不是受信任的发行者。”

> ID：11004895
> 
> 赞同：2
> 
> 时间：2012-06-12T21:08:29.860
> 
> 标签：sharepoint-2010, x509certificate, wif, sts-securitytokenservice

所以对于初学者来说，这是我的环境：

*   共享点 2010
*   Windows Server 2008 标准版
*   这是我本地机器上的 VHD
*   我已连接到我的工作域 我也已连接到
*   VPN 也是因为我需要的一些资源需要它

所以我在 SharePoint 中有一个用于 SSO 的 STS

STS 是通过 PowerShell cmdlet 创建的：

```
$cert = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2("c:\IdentityServer.cer")
$map1 = New-SPClaimTypeMapping -IncomingClaimType "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress" -IncomingClaimTypeDisplayName "EmailAddress" –SameAsIncoming

# $map2 ... $mapN

$realm = "urn:mycompany:software"
$signinurl = "https://somesignin.com/FederationProvider/"

$ap = New-SPTrustedIdentityTokenIssuer -Name "MyFederationProvider" -Description "My Fed Provider" -Realm $realm -UseWReply -ImportTrustCertificate $cert -ClaimsMappings $map1 -SignInUrl $signinurl -IdentifierClaim $map1.InputClaimType 
```

对于我的 SharePoint 网站的 Internet 区域，我将上面创建的受信任身份提供程序作为声明身份验证类型。

当我登录时一切顺利，直到我在代码中点击这一行，FederatedPassiveSecurityTokenServiceOperations.ProcessSignInResponse(signInResponseMessage, Response);

```
The error I get is:
Exception information: 
    Exception type: SecurityTokenException 
    Exception message: The issuer of the token is not a trusted issuer. 

Request information: 
    Request URL: https://mySharePointSite.com:443/_trust/default.aspx 
    Request path: /_trust/default.aspx 
    User host address: 127.0.0.1 
    User:  
    Is authenticated: False 
    Authentication Type:  
    Thread account name: MyDomain\ThreadAccount

Thread information: 
    Thread ID: 10 
    Thread account name: MyDomain\ThreadAccount
    Is impersonating: False 
    Stack trace:    at Microsoft.SharePoint.IdentityModel.SPTrustedIssuerNameRegistry`1.GetIssuerName(SecurityToken securityToken)
   at Microsoft.SharePoint.IdentityModel.SPPassiveIssuerNameRegistry.GetIssuerName(SecurityToken securityToken)
   at Microsoft.IdentityModel.Tokens.Saml11.Saml11SecurityTokenHandler.CreateClaims(SamlSecurityToken samlSecurityToken)
   at Microsoft.IdentityModel.Tokens.Saml11.Saml11SecurityTokenHandler.ValidateToken(SecurityToken token)
   at Microsoft.IdentityModel.Web.TokenReceiver.AuthenticateToken(SecurityToken token, Boolean ensureBearerToken, String endpointUri)
   at Microsoft.IdentityModel.Web.WSFederationAuthenticationModule.SignInWithResponseMessage(HttpRequest request)
   at Microsoft.IdentityModel.Web.WSFederationAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs args)
   at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

但是，根证书位于本地计算机上计算机帐户的 MMC 证书管理单元的受信任根证书颁发机构中。同样，根证书在 SharePoint 中被认为是受信任的。我通过管理中心->安全->管理信任添加了它。

任何想法为什么我仍然会收到此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:09:12.497

您是否在[https://somesignin.com/FederationProvider/](https://somesignin.com/FederationProvider/)上运行了 STS ？

New-SPTrustedIdentityTokenIssuer 的文档说它“在场中创建身份提供者”。这对我来说似乎措辞不佳。它实际上并没有创建一个新的 STS。New-SPTrustedIdentityTokenIssuer 真正做的是在共享点和现有的第 3 方身份提供者之间配置信任关系。例如，

LiveID：

[http://technet.microsoft.com/en-us/library/ff607628.aspx](http://technet.microsoft.com/en-us/library/ff607628.aspx)

或 ADFS：

[http://msdn.microsoft.com/en-us/library/hh446525.aspx](http://msdn.microsoft.com/en-us/library/hh446525.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T03:45:40.613

问题是最初使用的证书不是来自我开发的域。对于本地开发，创建了自签名证书，然后颁发者受到信任。此证书已添加到我本地 Sharepoint 场的管理信任库中， http: [//onpointwithsharepoint.blogspot.ca/2012/11/managing-trust-certificates-by-using.html](http://onpointwithsharepoint.blogspot.ca/2012/11/managing-trust-certificates-by-using.html)。

# log4j - 分布式日志记录：JMS 和 log4j？

> ID：11004898
> 
> 赞同：0
> 
> 时间：2012-06-12T21:08:56.710
> 
> 标签：log4j, jms

一直在寻找解决此问题的方法：我需要将在多台机器上运行的应用程序的日志条目发送到远程服务器并在远程服务器上进行聚合。要求：

1.  登录应用程序需要异步（不能等待日志条目遍历网络）
2.  登录应用需要排队；如果网络出现故障，日志条目需要在本地排队，并在网络再次可用时发送到集中式服务器

我正在考虑使用 log4j 和 JMSAppender。假设这是一个合适的解决方案，是否有可用的示例？在这种情况下，中央服务器上将运行什么进程来接收日志条目？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:05:00.283

我想到的一个简单设置是使用[Apache ActiveMQ](http://activemq.apache.org/)

它是一个开源消息代理（与 JMS 兼容），能够在多台物理机器之间集群队列，并且 ActiveMQ 安装相当轻量级。您只需在每台应用程序机器上安装一个 ActiveMQ。然后在日志服务器（图中的物理服务器 C）上，您将拥有另一个 ActiveMQ。您的应用程序将使用 JMS appender（[在此处阅读更多内容](http://activemq.apache.org/how-do-i-use-log4j-jms-appender-with-activemq.html)），您实际上可以只使用包含的[apache camel](http://camel.apache.org)从队列中读取并在文件或数据库上写入日志，而无需为该任务编写应用程序。

它可以像在activemq /conf 安装中的camel.xml 中添加类似以下内容并在activemq.xml 配置中导入camel.xml 一样简单。

```
<route>
 <from uri="activemq:queue:LogQueue"/>
 <to uri="file:target/folder/?fileName=logfile.log&fileExist=Append"/>
</route> 
```

![分布式日志记录示例](../Images/6324a718c04975a150d2168567efd13e.png)

您可以使用无数其他框架、JMS 服务器和技术，但我认为这是一种相当容易实现的方法，成本非常低且稳定性高。

# scala - scala hashmap 多个值

> ID：11004903
> 
> 赞同：5
> 
> 时间：2012-06-12T21:09:20.500
> 
> 标签：scala, hashmap, hashtable

我想用 int 键和字符串值实现一个哈希表。我尝试了以下方法：

```
import scala.collection.mutable.HashMap
val test_map = new HashMap[Int, String]
test_map += 10 -> "prog_1"
test_map += 20 -> "prog_2"
test_map += 25 -> "prog_3"
test_map += 15 -> "prog_4"
test_map += 10 -> "prog_8" 
```

但是，test_map(10) 不是“prog_1”、“prog_8”，它只是“prog_8”。这个哈希图似乎不能有多个值。有没有一种简单的方法可以在 Scala 中使用多值哈希表？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T21:16:42.327

`MultiMap`如果您不关心为具有相同键的值保留插入顺序，则可以使用：

```
import scala.collection.mutable.{ HashMap, MultiMap, Set }

val test = new HashMap[Int, Set[String]] with MultiMap[Int, String]

test.addBinding(10, "prog_1")
test.addBinding(20, "prog_2")
test.addBinding(25, "prog_3")
test.addBinding(15, "prog_4")
test.addBinding(10, "prog_8") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T21:17:39.683

使用 MultiMap trait，获取标准的可变 HashMap 并通过一些方便的方法来增强它来处理多值映射

```
import scala.collection.mutable.HashMap
import scala.collection.mutable.MultiMap    
import scala.collection.mutable.Set

val test_map = new HashMap[Int, Set[String]] with MultiMap[Int, String]
test_map.addBinding(10 ,"prog_1")
test_map.addBinding(20 ,"prog_2")
test_map.addBinding(25 ,"prog_3")
test_map.addBinding(15 ,"prog_4")
test_map.addBinding(10 ,"prog_8") 
```

# object - opengraph 对象可以是多页的吗？

> ID：11004904
> 
> 赞同：0
> 
> 时间：2012-06-12T21:09:30.580
> 
> 标签：object, facebook-opengraph, multipage

我已经搜索了很多这个问题的答案 - 但找不到 - 可能它太愚蠢了，在这种情况下请原谅我！

我想将 og 元数据添加到我们的页面，但是每个逻辑对象（在我们的例子中是运动队或球员）的信息可以分布在多个实际 URL 中（例如 /team/、/team/players/、/team/results / 在逻辑上都是 /team/ 的一部分）。

我可以将相同的 opengraph 元数据放在代表同一对象的多个页面上吗？

或者，我可以将 og:url 指定为正则表达式，例如： /team/* 吗？

或者 /team/ 是否暗示 /team/* 用于 og:url ？

非常感谢您的澄清，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:54:31.603

> 每个逻辑对象（在我们的例子中是运动队或运动员）的信息可以分布在多个实际 URL 中（例如 /team/、/team/players/、/team/results/ 在逻辑上都是 /team/ 的一部分）。

您的意思是所有这些 URL 都包含*相同*的信息（它们只是访问该信息的不同点） - 还是您的意思是信息在这些 URL 上以“点点滴滴”的形式*传播*（并且用户必须访问它们全部获取所有信息）？

我不确定我是否理解您的问题 - 但*也许*您只是在寻找所谓的*规范 URL* ……？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:16:53.087

您可以在每个子页面中调用 Open Graph API，将父页面作为对象传递；如果您对将子页面作为单独的对象不感兴趣，则无需将元数据也放在子页面上。这样，在单个页面上单击的赞总是会给予团队。您可以使用自定义属性来指定点击到达的位置（甚至可能是 ref 属性）。

在旁注中，我不会说结果在逻辑上是团队的一部分。尽管对于这个特定的用法，它并不重要。

# jquery - 我无法在 jquery 中发送发布请求

> ID：11004908
> 
> 赞同：0
> 
> 时间：2012-06-12T21:09:41.093
> 
> 标签：jquery, post

```
$.getJSON(get, function (data) {

        if(data.results[0])
        { ver = data.results[0];
            $("#result").html(ver);}
            else
        $("#result").html("This source does not provide the lyrics you want. Try Sources #1 and #2");

    });
    $.post("check.php", { 'vid': 'gS9o1FAszdk', 'sursa': "1", 'vers':ver } ,function(dt){alert(ver);}); 
```

这是我的代码，没有任何效果。如果我从数据中删除“vers”，则脚本可以正常工作。怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T21:13:30.873

因为**AJAX 是异步的**。因此，您的`post`方法不会等待`getJSON`完成执行并使用`ver`. 您应该将 post 调用移至 getJSON 的回调函数

```
$.getJSON(get, function (data) {
  var ver =""
  if(data.results[0])
        { ver = data.results[0];
            $("#result").html(ver);
        }
        else
        {  
           $("#result").html("This source does not provide the lyrics you want. Try Sources #1 and #2");
        }
       $.post("check.php", 
               { 'vid': 'gS9o1FAszdk', 'sursa': "1", 'vers':ver } ,function(dt){
                alert(ver);
       });

}); 
```

# c# - 使用 Lambda 的属性构造函数

> ID：11004909
> 
> 赞同：11
> 
> 时间：2012-06-12T21:09:56.363
> 
> 标签：c#, lambda, custom-attributes

可以这样**做**：

```
public static void SomeMethod<TFunc>(Expression<TFunc> expr)
{
    //LambdaExpression happily excepts any Expession<TFunc>
    LambdaExpression lamb = expr;
} 
```

并在其他地方调用它，并为参数传递一个 lambda：

```
SomeMethod<Func<IQueryable<Person>,Person>>( p=>p.FirstOrDefault()); 
```

相反，我想将表达式作为参数传递给**属性构造函数**。 **是否可以执行以下操作？**

```
class ExpandableQueryAttribute: Attribute {
    private LambdaExpression someLambda;
    //ctor
    public ExpandableQueryMethodAttribute(LambdaExpression expression) 
    {
        someLambda = expression
    } 
}

//usage:
static LambdaExpression exp = 
      (Expression<Func<IQueryable<Person>, Person>>)
        (p => p.FirstOrDefault());

[ExpandableQueryAttribute(exp)]   //error here
// "An attribute argument must be a constant expression, typeof expression
// or array creation expression of an attribute parameter type" 
```

我的目标是在属性的构造函数中指定一个方法或 lambda（即使我必须声明一个完整的命名方法并以某种方式传递该方法的名称，也可以）。

1.  参数类型可以更改，但重要的是属性构造函数可以采用该参数并以某种方式将其分配给 LambdaExpression 类型的字段

2.  我希望 lambda/方法的声明位于对属性构造函数或内联的调用之上，这样您就不必走太远就能看到正在传递的内容。

所以这些替代方案会很好，但没有运气让它们工作：

```
public static ... FuncName(...){...}

[ExpandableQueryAttribute(FuncName)]   
// ... 
```

或者

```
//lambdas aren't allowed inline for an attribute, as far as I know
[ExpandableQueryAttribute(q => q.FirstOrDefault())]   
// ... 
```

现有的解决方法是将数字 ID 传递给构造函数（满足“参数必须是常量”的要求），构造函数使用它在先前添加了表达式的字典中进行查找。希望改进/简化这一点，但我觉得由于属性构造函数的限制，它并没有变得更好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T22:11:42.710

这个怎么样：

```
 class ExpandableQueryAttribute : Attribute
    {

        private LambdaExpression someLambda;
        //ctor
        public ExpandableQueryAttribute(Type hostingType, string filterMethod)
        {
            someLambda = (LambdaExpression)hostingType.GetField(filterMethod).GetValue(null); 
            // could also use a static method
        }
    } 
```

这应该让您将 lambda 分配给一个字段，然后在运行时将其吸入，尽管通常我更喜欢在编译时使用 PostSharp 之类的东西来执行此操作。

**简单的使用示例**

```
 public class LambdaExpressionAttribute : Attribute
    {
        public LambdaExpression MyLambda { get; private set; }
        //ctor
        public LambdaExpressionAttribute(Type hostingType, string filterMethod)
        {
            MyLambda = (LambdaExpression)hostingType.GetField(filterMethod).GetValue(null);
        }
    }

    public class User
    {
        public bool IsAdministrator { get; set; }
    }

    public static class securityExpresions
    {
        public static readonly LambdaExpression IsAdministrator = (Expression<Predicate<User>>)(x => x.IsAdministrator);
        public static readonly LambdaExpression IsValid = (Expression<Predicate<User>>)(x => x != null);

        public static void CheckAccess(User user)
        {
            // only for this POC... never do this in shipping code
            System.Diagnostics.StackTrace stackTrace = new System.Diagnostics.StackTrace();
            var method = stackTrace.GetFrame(1).GetMethod();

            var filters = method.GetCustomAttributes(typeof(LambdaExpressionAttribute), true).OfType<LambdaExpressionAttribute>();
            foreach (var filter in filters)
            {
                if ((bool)filter.MyLambda.Compile().DynamicInvoke(user) == false)
                {
                    throw new UnauthorizedAccessException("user does not have access to: " + method.Name);
                }
            }

        }
    }

    public static class TheClass
    {
        [LambdaExpression(typeof(securityExpresions), "IsValid")]
        public static void ReadSomething(User user, object theThing)
        {
            securityExpresions.CheckAccess(user);
            Console.WriteLine("read something");
        }

        [LambdaExpression(typeof(securityExpresions), "IsAdministrator")]
        public static void WriteSomething(User user, object theThing)
        {
            securityExpresions.CheckAccess(user);
            Console.WriteLine("wrote something");
        }

    }

    static void Main(string[] args)
    {

        User u = new User();
        try
        {
            TheClass.ReadSomething(u, new object());
            TheClass.WriteSomething(u, new object());
        }
        catch(Exception e) 
        {
            Console.WriteLine(e);
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T21:41:13.470

这是不可能的，因为您可以传递给属性的内容需要适合 CLR 的二进制 DLL 格式，并且无法对任意对象初始化进行编码。同样，您不能传递可为空的值。限制非常严格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-01T15:02:44.827

尽管您不能为属性使用复杂的构造函数，但在某些情况下，解决方法是为该属性提供一个公共属性并在运行时对其进行更新。

self 指向该类的一个对象，该对象在其属性上包含一些属性。LocalDisplayNameAttribute 是一个自定义属性。

以下代码将在运行时设置我的自定义属性类的 ResourceKey 属性。然后，您可以覆盖 DisplayName 以输出您想要的任何文本。

```
 static public void UpdateAttributes(object self)
    {
        foreach (PropertyDescriptor prop in TypeDescriptor.GetProperties(self))
        {
            LocalDisplayNameAttribute attr =
                prop.Attributes[typeof(LocalDisplayNameAttribute)] 
                    as LocalDisplayNameAttribute;

            if (attr == null)
            {
                continue;
            }

            attr.ResourceKey = prop.Name;
        }
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-17T15:00:46.623

使用动态 linq：[http ://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

您可以使属性的构造函数采用一个计算为表达式的字符串。

# android - 在 Android 的 SQLIte DB 中选择特定行

> ID：11004910
> 
> 赞同：2
> 
> 时间：2012-06-12T21:09:56.773
> 
> 标签：android, sqlite

我正在尝试根据文本视图中的字符串从数据库中选择特定行。我运行它时的错误日志似乎说它正在寻找一列，但它应该寻找一行。错误日志说：

```
 --I/Database(279): sqlite returned: error code = 1, msg = no such column: Book
--D/AndroidRuntime(279): Shutting down VM
--W/dalvikvm(279): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
--E/AndroidRuntime(279): FATAL EXCEPTION: main
--E/AndroidRuntime(279): android.database.sqlite.SQLiteException: no such column: Book: ,   while compiling: SELECT book, background FROM bookbackgrounds WHERE book=Book 
```

这是从 textview 获取字符串的代码，然后运行一个应该以文本字符串形式返回文件名的方法，然后在第二个 textview 中显示返回的字符串：

```
 String bkString = showBooktextview.getText().toString();
            bga.open();
            String newBKstring = bga.getBGforBook(bkString);
            bga.close();                
            showDBBooktextview.setText(newBKstring); 
```

这是错误表示没有带有该书名的列的方法。（它应该正在寻找包含该书名的 ROW）：

```
 public String getBGforBook(String bkString) {
    String[] thecolumns = new String[] { KEY_BOOK, KEY_BACKGROUND };
    Cursor cursor = db.query(DB_TABLE, thecolumns, KEY_BOOK + "=" + bkString, null, null,       null, null);
    String result = "";

    if (cursor != null){ 
        cursor.moveToFirst();
    result = result
    + cursor.getString(1);
    }
    return null;
    } 
```

那么方法写错了吗？如果是这样，如何正确编写它以查找包含书名字符串的行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T21:13:40.933

我认为您在条件表达式中缺少单引号：

```
KEY_BOOK + "=" + bkString 
```

应该

```
KEY_BOOK + "='" + bkString + "'" 
```

由于该字符串`bkString`没有被引用，SQLite 尝试将其解释为*列名*的标识符。

# c# - 从带有时区缩写的 xml 文档中解析日期时间（例如 CET ）

> ID：11004912
> 
> 赞同：2
> 
> 时间：2012-06-12T21:10:03.903
> 
> 标签：c#, xml, linq-to-xml

我很少解析 xml 文件，当我尝试使用 Linq2Xml 中集成的功能时。但是今天我偶然发现了一种我无法通过以下方式投射的日期格式：

```
XElement element = ...
var date = (DateTime)element; 
```

日期格式如下：

```
01/28/2009 02:31:54 CET 
```

我已经尝试使用`TryParse`各种组合、文化来解析日期，但是无论我尝试使用哪种格式，日期时间解析器都会抱怨位置 20 的空间。有没有办法在不拆分字符串或做尴尬事情的情况下解析这个日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:13:05.523

听起来时区缩写（例如 CET）无法识别。你知道偏移量吗？

这个人有一个相关的问题： [Parse DateTime with form PST/CEST/UTC/etc](https://stackoverflow.com/questions/241789/parse-datetime-with-timezone-of-form-pst-cest-utc-etc)

他的帖子中的一个例子：

```
DateTime dt1 = DateTime.ParseExact("24-okt-08 21:09:06 CEST".Replace("CEST", "+2"), "dd-MMM-yy HH:mm:ss z", culture); 
```

显然你的日期时间格式有点不同，但这是一个让你摆脱困境的想法。

如果可以，请为您提供 XML 的人员以 ISO 8601 格式生成日期/时间，以避免自定义解析。

# php - .htaccess 与 php 隐藏参数和语言选择

> ID：11004915
> 
> 赞同：0
> 
> 时间：2012-06-12T21:10:31.183
> 
> 标签：php, apache, .htaccess, mod-rewrite

我似乎无法让我的 .htaccess 文件正确地将网址路由到我的网站。我有多种语言可供人们从想要的 URL 中进行选择，例如：

```
http://www.domain.com/en/
http://www.domain.com/en/contact 
```

但是在编写规则以获取“en”变量时，我似乎无法让页面“联系人”工作。

```
RewriteRule /([^/]+)/([0-9]+)/ index.php?language=$1 
```

我用它来获取语言代码，但我怎样才能让联系页面正常工作？

**编辑：**

显然我需要一些 QSA 选项，但现在语言 get 变量将联系人作为变量与 en

```
RewriteRule ^(.*)$ index.php?language=$1 [QSA,L] 
```

使用此规则，站点：

```
http://www.domain.com/en/contact 
```

回报：

```
en/contact 
```

**编辑2**

我想要完成的是目录结构：

```
/
/contact
/about 
```

将这些文件夹放在根目录中，但会抓取并忽略 /en/ 语言变量。所以我不需要 &page=contact 的第二个变量，我需要它来路由到目录文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:29:16.910

尝试组合你的两个表达式，虽然你需要修改第二组 -`[0-9]+`只会匹配数字，而不是像`contact`. 尝试这个：

```
RewriteRule ^([^/]+)/([^/]+)/?$ index.php?language=$1 [QSA,L] 
```

该`QSA`选项允许将查询字符串附加到干净的 URL，可能是这样的：

```
http://www.domain.com/en/contact?to=support&subject=Hello 
```

* * *

作为对您的评论的回应，这个表达式应该可以解决问题：

```
RewriteRule ^([^/]*)/([^/]+)/?$ $2/index.php?language=$1 [QSA,L] 
```

在改写的规则中，`$2`持有`contact`，例如，和`$1`持有`en`。前者用作目录，后者用作查询字符串中的参数。

# mysql - DATETIME 默认值 0 MYSQL 5.5.25

> ID：11004916
> 
> 赞同：2
> 
> 时间：2012-06-12T21:10:33.427
> 
> 标签：mysql, sql, datetime, date

我正在尝试创建这些表：

```
CREATE  TABLE IF NOT EXISTS `qa_discountcoupons` (
  `discount_code` INT NOT NULL AUTO_INCREMENT ,
  `status_code` INT NOT NULL ,
  `discount_date` DATETIME NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`discount_code`) ,
  INDEX `discounts_to_status` (`status_code` ASC) ,
  CONSTRAINT `discounts_to_status`
    FOREIGN KEY (`status_code` )
    REFERENCES `qa_status` (`status_code` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB; 
```

但我得到这个错误：

```
Error Code: 1067\. Invalid default value for 'discount_date' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:22:37.350

您可以使用：

```
CREATE  TABLE IF NOT EXISTS `qa_discountcoupons` (
 `discount_code` INT NOT NULL AUTO_INCREMENT ,
 `status_code` INT NOT NULL ,
 `discount_date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ,
 PRIMARY KEY (`discount_code`) ,
 INDEX `discounts_to_status` (`status_code` ASC) ,
 CONSTRAINT `discounts_to_status`
 FOREIGN KEY (`status_code` )
 REFERENCES `qa_status` (`status_code` )
 ON DELETE NO ACTION
 ON UPDATE NO ACTION)
ENGINE = InnoDB; 
```

从 MySQL 5.6.5 及更高版本开始。

我建议还查看有关[如何为 MySQL 日期时间列设置默认值的线程？](https://stackoverflow.com/questions/168736/how-do-you-set-a-default-value-for-a-mysql-datetime-column)- 对此有很多评论。

# javascript - 事件处理跨浏览器问题，mousedown window.event.clientY

> ID：11004918
> 
> 赞同：1
> 
> 时间：2012-06-12T21:11:01.203
> 
> 标签：javascript, events, firefox, dom, event-handling

因此，我在编写的脚本中的事件处理存在问题。整个事情在 chrome 中运行良好，在 safari 中即使运行非常缓慢，它仍然可以运行。在 Firefox 中，其中一个事件根本不起作用。

基本上，在页面加载时，我正在创建一堆事件监听器：

```
canvasElem.addEventListener("mousedown",down,false);
canvasElem.addEventListener("mouseup",up,false);
canvasElem.addEventListener("mousemove",move,false); 
```

这些事件侦听器可以工作，我敢肯定，但是由于这两行代码，其中一个事件侦听器（调用 down 函数）在中途停止运行：

```
dXImgSpin=(centerXImgSpin-expansionOffsetXImgSpin)-(window.event.clientX);
dYImgSpin=(centerYImgSpin-expansionOffsetYImgSpin)-(window.event.clientY); 
```

现在我明白了（有点明白，我是编程新手，所以它仍然有点过头了）这在 Firefox 中不起作用，因为我使用的是 IE DOM 模型而不是 W3C 模型，但在另一部分我遇到问题的程序，/* [event.pageX 在 firefox 中不起作用，但在 Chrome 中起作用](https://stackoverflow.com/questions/10971738/event-pagex-not-working-in-firefox-but-does-in-chrome)*/ 我通过添加更改事件处理方式来修复它（也就是添加 canvasEleem.addEventListener），然后添加代码行

```
event = event || window.event; 
```

并将 window.event.clientX 更改为 event.clientX。但是，当我尝试在这个不同的函数中执行此操作时，上面的代码行甚至不会运行。

任何事情都有帮助，如果这个问题的措辞不好，我很抱歉，但是我目前对 javascript 的理解几乎碰壁了，无法理解如何克服它。如果需要更多信息，请随时告诉我！

艾萨克

按下时的完整代码流：

```
canvasElem.addEventListener("mousedown",down,false);

function down(){

mouseDown=1;

getNewAngle();

angleMomentumImgSpin=.005;

} 
```

getNewAngle() 函数是问题所在：

```
function getNewAngle(){

    dX2ImgSpin=dX1ImgSpin;
    dY2ImgSpin=dY1ImgSpin;
    dX1ImgSpin=dXImgSpin;
    dY1ImgSpin=dYImgSpin;

    //THESE ARE THE PART THAT ARE CAUSING THE PROBLEM
    dXImgSpin=(centerXImgSpin-expansionOffsetXImgSpin)-(window.event.clientX);
    dYImgSpin=(centerYImgSpin-expansionOffsetYImgSpin)-(window.event.clientY);

    //This if statement is to avoid the drawing from flipping when the mouse crosses the halfwaypoint
    if (dXImgSpin>0){
    angleImgSpin=(Math.atan((dYImgSpin/dXImgSpin))-angleStartImgSpin);
    }else{angleImgSpin=(Math.atan((dYImgSpin/dXImgSpin))-angleStartImgSpin+(Math.PI))}
    //alert(angle);

} 
```

# mysql - 如何选择 MySQL 列中的所有行

> ID：11004925
> 
> 赞同：4
> 
> 时间：2012-06-12T21:11:33.183
> 
> 标签：mysql

这似乎是一个简单的问题，但我无法终生找到答案。无论值如何，如何选择列中的所有行？例如，如果我想要列位置中的所有内容：

```
"SELECT * FROM whateverTable WHERE id='$id' AND date='$date' AND location='I don't care, return everything'" 
```

请记住，我需要在那里的位置，因为我正在获取对该数据库的动态 URL 查询，否则我会忽略它。

***编辑*** 我已经阅读了一些答案，并为我没有让自己更清楚而感到羞耻。我正在尝试查看是否可以在不需要此操作的情况下选择可以选择列中每一行的 MySQL 查询：

```
if ($location == '') {
  "SELECT * FROM whateverTable WHERE id='$id' AND date='$date'"
} else {
  "SELECT * FROM whateverTable WHERE id='$id' AND date='$date' AND location='$location'"
} 
```

而不是像那样破解我的代码（因为我的真实代码中有更多的查询子句），我试图看看这样的事情是否可能：

```
"SELECT * FROM whateverTable WHERE id='$id' AND date='$date' AND location='%'" 
```

或这个：

```
"SELECT * FROM whateverTable WHERE id='$id' AND date='$date' AND location='.*'" 
```

但我没有任何运气。如果不是，我会继续前进。抱歉没有让自己更清楚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T21:14:26.133

正如您在问题中所说，您应该动态构建查询并忽略该字段。然后查询将变为：

```
SELECT * FROM whateverTable
WHERE id = '$id'
AND date = '$date' 
```

如果由于某种原因你不能这样做，你可以尝试这样的事情：

```
SELECT * FROM whateverTable
WHERE id = '$id'
AND date = '$date'
AND (location='$location' OR '$location' = '') 
```

设置`$location`为空字符串将导致返回所有位置。

[并且不要忘记正确转义字符串以避免 SQL 注入攻击。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T21:14:14.790

`SELECT location FROM whateverTable`将返回位置列中的每一行/值。

如果要开始过滤结果，请添加 where 子句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T21:14:54.070

如果您正在动态构建查询，只需检查 location 是否为 null 或空字符串，然后省略查询的该部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-06T14:43:22.470

替换等号：“=”为`LIKE`

```
SELECT * FROM whateverTable WHERE id='$id' AND date='$date' AND location LIKE '%' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-09T21:24:46.553

我认为您正在寻找子查询？

```
SELECT * FROM whateverTable WHERE location IN (SELECT location FROM whateverTable); 
```

# ruby-on-rails-3 - Rails：对关键字段存在检查的嵌套模型的验证失败

> ID：11004926
> 
> 赞同：1
> 
> 时间：2012-06-12T21:11:43.013
> 
> 标签：ruby-on-rails-3, validation, nested-forms, nested-attributes

我有一个模型 User 和一个嵌套模型 Mobility

```
class User < ActiveRecord::Base
   has_many :mobilities, :dependent => :destroy
   accepts_nested_attributes_for :mobilities
end 
```

和

```
class Mobility < ActiveRecord::Base
  belongs_to :mobile_user, :class_name =>  'User'
  validates :city_id, :presence =>true
  validates :user_id, :presence =>true
  validates :city_id, :uniqueness => {:scope => [:user_id]}
end 
```

我的观点

```
=form_for @user, :as => :user, :html =>{ :class => 'form-horizontal'} do |f|
  =f.fields_for :mobilities  do |city_form|
    =city_form.text_field :city_id, :id => "city_id_#{index}"
    = f.submit "Retour" 
```

我的问题是，当我提交表单时，Rails 会呈现此验证错误：

> 移动用户 > doit être rempli(e)

但如果我评论这一行：

```
#validates :user_id, :presence =>true 
```

我的 Mobility 和 User 对象都被保存并且知道什么：@mobility 的 user_id 字段是可以的（表示我的@user 的 ID）

如果我发送内部具有 2 个相同移动性的表单，则两个模型都会被保存，但似乎我对唯一性的验证没有检查任何内容，因为我的数据库中有 2 个具有相同 user_id 和 city_id 的 Mobility 对象......

事实上，我的验证似乎在验证时无法读取我的 user_id 的密钥。我明白，因为我的用户模型还没有被保存并且还没有任何 ID ......但这是我的问题：

我如何同时检查：user_id 的存在和范围的唯一性？？？

# javascript - JavaScript：测试与执行

> ID：11004929
> 
> 赞同：13
> 
> 时间：2012-06-12T21:12:11.203
> 
> 标签：javascript

我想知道检查字符串的最佳方法是什么，例如（邮件、密码等）。

```
/^...$/i.exec(a) 
```

对比

```
/^...$/i.test(a) 
```

*   **执行**返回值
*   **测试**为真

**测试：**

```
// 1° way
var mail = req.body.mail;
if(check(mail)){ 
```

**执行：**

```
// 1° way
var mail = req.body.mail;
if(check(mail)){

// 2° way
var mail = check(req.body.mail);
if(mail){ 
```

**执行**还是**测试**？以及什么数字（如果执行，则为 1° 或 2°）

**解决方案**

**test**更适合这种情况。

*   它肯定会更快。

但最重要的

*   **测试**完成了他的所有工作。虽然**exec**没有执行，因为可以做更多的事情，但我们不需要。
*   就像*Mattias Buelens 所说*，使用 isMail() 更合乎逻辑：是电子邮件：是或否。而**exec** : 是电子邮件：电子邮件或 null -> wtf ？哈哈

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-12T21:21:26.303

如果只需要测试一个输入字符串匹配一个正则表达式，`RegExp.test`是最合适的。它将为您提供一个`boolean`返回值，使其非常适合条件。

`RegExp.exec`为您提供包含所有捕获组和匹配索引的类似数组的返回值。因此，当您需要在匹配后处理捕获的组或索引时，它很有用。（此外，与使用全局修饰符时相比，[它的行为有点不同](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec#Description)）`String.match``/g`

最终，它在速度或效率方面并不重要。仍将评估正则表达式，并且所有匹配的组和索引都将通过全局`RegExp`对象可用（尽管强烈建议您使用返回值）。

至于`if`测试，那只是个人口味的问题。将正则表达式测试的结果分配给具有有意义名称（例如`isEmail`）的变量可以提高可读性，但除此之外它们都很好。

# php - 打印多个mysql行

> ID：11004933
> 
> 赞同：1
> 
> 时间：2012-06-12T21:12:15.927
> 
> 标签：php

这是一个非常简单的问题！我在 mysql 中执行一个选择查询，结果是一个数组。我只需要打印一些值而不是整个数组。最好的方法是什么？

```
echo $row['id']['range']['name]'; 
```

只打印id。

我还需要让它们有一个好的格式。

喜欢：ID 范围名称

请帮助我解决我的第二个问题如何以良好的格式分隔这段代码的结果（在这种情况下它打印 3 个字符串）：

```
while($row= mysql_fetch_assoc($result)) {
 echo $row['name'];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:15:42.240

格式化将通过输出您要使用的 html 来完成。下面的示例使用段落标签。您不能像这样简单地将数组键粘在一起以引用多个元素。该语法用于深入研究多维数组。

```
while($row= mysql_fetch_assoc($result)) {
  echo '<p>';
  echo $row['id'];
  echo ' ';
  echo $row['range'];
  echo ' ';
  echo $row['name'];
  echo '</p>';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T21:26:53.307

取决于您所追求的格式，表格格式将是这样的：

```
//start table, and column headings
echo '<table><tr><td>I.D</td><td>Name</td><td>Range</td></tr>';

//add new row for each returned SQL result row
while($row = mysql_fetch_assoc($result)) {

echo '<tr>';
echo '<td>' . $row['id'] . '</td>';
echo '<td>' . $row['name'] . '</td>';
echo '<td>' . $row['range'] . '</td>';
echo '</tr>';

}

echo '</table>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T21:20:12.867

我建议您将逻辑与格式分开一点，如下所示：

```
<ul>
<?php while($row= mysql_fetch_assoc($result)): ?>  
    <li><?php $row['id'] ?></li>
    <li><?php $row['range'] ?></li>
    <li><?php $row['name'] ?></li>
<?php endwhile; ?>
</ul> 
```

# php - 在非对象 cakephp 上调用成员函数 find()

> ID：11004940
> 
> 赞同：0
> 
> 时间：2012-06-12T21:12:37.753
> 
> 标签：php, cakephp

> **可能重复：**
> [CakePHP：调用非对象上的成员函数 find()](https://stackoverflow.com/questions/6716456/cakephp-call-to-a-member-function-find-on-a-non-object)

我有三个模型：Product、Prodpage、Field。

我做了蛋糕控制台来烘烤基于我电脑上本地 mysql 数据库的所有模型。然后，我使用公共 $scaffold 为每个模型创建了一个简单的控制器。这是 ProductsController 示例：

```
<?php
// app/Controller/ProductsController.php
class ProductsController extends AppController {
  public $scaffold;
} 
```

进入我的应用程序（本地主机/蛋糕/产品），一切正常。我可以添加产品、删除产品、编辑产品。然后我可以添加 prodpages，也可以添加字段。我决定继续使用蛋糕控制台来烘焙控制器和视图。我的理解是它应该和 $scaffold 做同样的事情，但是这次控制器应该有更多的代码。因此，我可以开始对其进行更多定制。

我回到本地主机/蛋糕/产品，它工作正常。然后，当我尝试转到 localhost/cake/prodpages/add 时，我收到此错误：

```
Fatal error: Call to a member function find() on a non-object in C:\wamp\www\cake\app\Controller\ProdpagesController.php on line 50 
```

这是 ProdpagesController 一直到第 53 行（添加函数）：

```
<?php
App::uses('AppController', 'Controller');
/**
 * Prodpages Controller
 *
 * @property Prodpage $Prodpage
 */
class ProdpagesController extends AppController {

/**
 * index method
 *
 * @return void
 */
    public function index() {
        $this->Prodpage->recursive = 0;
        $this->set('prodpages', $this->paginate());
    }

/**
 * view method
 *
 * @param string $id
 * @return void
 */
    public function view($id = null) {
        $this->Prodpage->id = $id;
        if (!$this->Prodpage->exists()) {
            throw new NotFoundException(__('Invalid prodpage'));
        }
        $this->set('prodpage', $this->Prodpage->read(null, $id));
    }

/**
 * add method
 *
 * @return void
 */
    public function add() {
        if ($this->request->is('post')) {
            $this->Prodpage->create();
            if ($this->Prodpage->save($this->request->data)) {
                $this->Session->setFlash(__('The prodpage has been saved'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The prodpage could not be saved. Please, try again.'));
            }
        }
        $products = $this->Prodpage->Product->find('list');
        $this->set(compact('products'));
    } 
```

这是第50行，

```
$products = $this->Prodpage->Product->find('list'); 
```

任何人都知道我在这里做错了什么或详细说明错误告诉我什么？我是 cakephp 的新手，所以我正在浏览教程。这让我很难过。

更新：型号/Product.php

```
<?php
App::uses('AppModel', 'Model');
/**
 * Product Model
 *
 * @property Prodpages $Prodpages
 */
class Product extends AppModel {
/**
 * Display field
 *
 * @var string
 */
    public $displayField = 'product_name';
/**
 * Validation rules
 *
 * @var array
 */
    public $validate = array(
        'product_name' => array(
            'notempty' => array(
                'rule' => array('notempty'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
        's7_location' => array(
            'notempty' => array(
                'rule' => array('notempty'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
        'created' => array(
            'datetime' => array(
                'rule' => array('datetime'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
        'modified' => array(
            'datetime' => array(
                'rule' => array('datetime'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
    );

    //The Associations below have been created with all possible keys, those that are not needed can be removed

/**
 * hasMany associations
 *
 * @var array
 */

    public $hasMany = array(
        'Prodpages' => array(
            'className' => 'Prodpages',
            'foreignKey' => 'id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        )
    );

} 
```

这是模型/Prodpage.php

```
<?php
App::uses('AppModel', 'Model');
/**
 * Prodpage Model
 *
 * @property Products $Products
 * @property Fields $Fields
 */
class Prodpage extends AppModel {
/**
 * Display field
 *
 * @var string
 */
    public $displayField = 'page_name';

/**
 * Validation rules
 *
 * @var array
 */
    public $validate = array(
        'is_blank' => array(
            'boolean' => array(
                'rule' => array('boolean'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
        'page_order' => array(
            'numeric' => array(
                'rule' => array('numeric'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
        's7_page' => array(
            'numeric' => array(
                'rule' => array('numeric'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
        'created' => array(
            'datetime' => array(
                'rule' => array('datetime'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
        'modified' => array(
            'datetime' => array(
                'rule' => array('datetime'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
    );

    //The Associations below have been created with all possible keys, those that are not needed can be removed

/**
 * belongsTo associations
 *
 * @var array
 */
    public $belongsTo = array(
        'Products' => array(
            'className' => 'Products',
            'foreignKey' => 'products_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    );

/**
 * hasMany associations
 *
 * @var array
 */
    public $hasMany = array(
        'Fields' => array(
            'className' => 'Fields',
            'foreignKey' => 'id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        )
    );

} 
```

我做了蛋糕控制台来烘焙这些模型，所以我在那里做了关联。我以为我的 Prodpage 和 Product 相关的正确。一个产品可以有多个 Prodpages。一个 Prodpage 属于一种产品。

**更新有查询错误**

因此，当我转到 localhost/cake/prodpages/add 并填写信息，从产品下拉列表中选择产品时，我收到此错误

```
Error: SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`builder_cake`.`prodpages`, CONSTRAINT `fk_prodpages_products` FOREIGN KEY (`product_id`) REFERENCES `products` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)

SQL Query: INSERT INTO `builder_cake`.`prodpages` (`page_name`, `is_blank`, `page_order`, `s7_page`, `modified`, `created`) VALUES ('Page 2', '0', 2, 2, '2012-06-13 16:51:35', '2012-06-13 16:51:35') 
```

我调查了一下，它没有传递与下拉列表选择关联的 product_id 以添加到我的 Prodpages 表中的 product_id 列中。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:10:14.917

看起来您的模型名称是复数，而它们应该是单数。例如：

```
public $belongsTo = array(
    // Product, not Products
    'Product' => array(
        'className' => 'Product',
        'foreignKey' => 'products_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
); 
```

# windows-phone-7 - Windows Phone 7 amCharts x 轴标签

> ID：11004941
> 
> 赞同：0
> 
> 时间：2012-06-12T21:12:38.673
> 
> 标签：windows-phone-7, amcharts

任何人都知道如何从 Windows Phone 7 amCharts 图表中的 x 轴上删除标签？应该很简单，但我找不到办法。

到目前为止，我有以下内容：

```
<AmCharts_Windows_QuickCharts:SerialChart x:Name="chart1" DataSource="{Binding Data}" 
       CategoryValueMemberPath="Date" 
       AxisForeground="White"
       PlotAreaBackground="Black"
       GridStroke="DarkGray" 
       ScrollViewer.HorizontalScrollBarVisibility="Auto">
       <AmCharts_Windows_QuickCharts:SerialChart.Graphs>
           <AmCharts_Windows_QuickCharts:LineGraph ValueMemberPath="Value" Title="SomeTitle" Brush="Orange" />
       </AmCharts_Windows_QuickCharts:SerialChart.Graphs>
</AmCharts_Windows_QuickCharts:SerialChart> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T22:41:06.633

您可以通过`CategoryValueMemberPath`从 SerialChart 定义中删除

```
<AmCharts_Windows_QuickCharts:SerialChart x:Name="chart1" DataSource="{Binding Data}" 
   AxisForeground="White"
   PlotAreaBackground="Black"
   GridStroke="DarkGray" 
   ScrollViewer.HorizontalScrollBarVisibility="Auto">
   <AmCharts_Windows_QuickCharts:SerialChart.Graphs>
       <AmCharts_Windows_QuickCharts:LineGraph ValueMemberPath="Value" Title="SomeTitle" Brush="Orange" />
   </AmCharts_Windows_QuickCharts:SerialChart.Graphs> 
```

也可以设置`MinimumCategoryGridStep`为 0

如果你想要刻度，而不是标签，你需要覆盖 SerialChart 的样式

```
 <Style x:Key="CategoryAxisStyle1" TargetType="amq:CategoryAxis">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="amq:CategoryAxis">
                    <Grid Background="Transparent">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <Rectangle x:Name="PART_AxisLine" Fill="{TemplateBinding Foreground}" HorizontalAlignment="Stretch" Height="2" Grid.Row="0" VerticalAlignment="Top"/>
                        <Canvas x:Name="PART_TickPanel" Height="5" Grid.Row="1" VerticalAlignment="Stretch"/>
                        <Canvas x:Name="PART_ValuesPanel" HorizontalAlignment="Stretch" Grid.Row="2" VerticalAlignment="Stretch" Visibility="Collapsed"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="SerialChartStyle1" TargetType="amq:SerialChart">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="amq:SerialChart">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <amq:ValueAxis x:Name="PART_ValueAxis" Foreground="{TemplateBinding AxisForeground}" HorizontalAlignment="Right" Margin="0,0,0,-2" Grid.Row="0" Canvas.ZIndex="100"/>
                            <amq:CategoryAxis x:Name="PART_CategoryAxis" Foreground="{TemplateBinding AxisForeground}" Grid.Row="1" Style="{StaticResource CategoryAxisStyle1}"/>
                            <Border Background="{TemplateBinding PlotAreaBackground}" Grid.Row="0">
                                <amq:ValueGrid x:Name="PART_ValueGrid" Foreground="{TemplateBinding GridStroke}"/>
                            </Border>
                            <Border x:Name="PART_GraphCanvasDecorator" Grid.Row="0">
                                <Canvas x:Name="PART_GraphCanvas" Background="Transparent"/>
                            </Border>
                            <amq:Legend x:Name="PART_Legend" HorizontalAlignment="Left" Margin="10,0,0,0" Grid.Row="0" Visibility="{TemplateBinding LegendVisibility}" VerticalAlignment="Top"/>
                            <Canvas Grid.Row="0">
                                <amq:Balloon x:Name="PART_Balloon" BorderBrush="{TemplateBinding AxisForeground}" BorderThickness="2" Visibility="Collapsed"/>
                            </Canvas>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# c++ - 将宏传递给 nmake

> ID：11004946
> 
> 赞同：-1
> 
> 时间：2012-06-12T21:13:01.013
> 
> 标签：c++, msbuild, nmake, wdk, makefile

从[我之前的帖子](https://stackoverflow.com/questions/10988501/passing-preprocessor-variable-to-nmake-build-environment)中，我弄清楚了为什么该命令

```
build /nmake "USER_C_FLAGS=/DMyVersion=3" 
```

不将定义`MyVersion`与值**3**相关联。[MSDN 说](http://msdn.microsoft.com/en-us/library/hhzbb5c8%28v=vs.80%29.aspx)——

> 使用 /Dname= 编译会导致符号没有关联的值。因此，虽然该符号仍可用于有条件地编译代码，但该符号将不会评估为空。例如，在前面的示例程序中，使用 /DTEST= 进行编译将导致编译器错误。此行为类似于使用带有或不带有值的#define。

我有一个在运行时设置的环境变量，我需要传递该环境。**Visual Studio 2005 Makefile Project**的变量。现在的问题是，我怎样才能通过环境。运行时构建环境的变量？一旦通过，我应该能够像 -

```
#define VERSION 11

#ifdef BUILD_VERSION       // How to get this macro to the current env. ?
   #undef VERSION
   #define VERSION BUILD_VERSION
#endif

#define FILE_VERSION VERSION 
```

我没有从`nmake`文档中看到任何传递 env 的标志。变量。任何想法都受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:48:32.027

MSDN 将为 nmake [Environment-Variable Macros](http://msdn.microsoft.com/en-us/library/99at5bh3%28v=vs.80%29.aspx)回答这个问题。

请注意：“使用 /E 选项使从环境变量继承的宏覆盖 makefile 中具有相同名称的任何宏。”

# ruby-on-rails - 如何在 Mongoid 中搜索具有特定嵌入文档的所有文档？

> ID：11004948
> 
> 赞同：0
> 
> 时间：2012-06-12T21:13:06.973
> 
> 标签：ruby-on-rails, mongoid

目前我使用以下搜索单个文档以查看是否存在特定的嵌入文档：

```
User.where(first_name:"Josh").first.attributes['address'].nil? 
```

如何在整个用户集合中搜索具有“地址”嵌入文档的文档？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:17:23.863

就像是：

```
User.where(:address.exists => true) 
```

# c# - Windows 8 应用程序的 ViewModel 中的依赖属性与 INotifyPropertyChanged

> ID：11004951
> 
> 赞同：3
> 
> 时间：2012-06-12T21:13:14.723
> 
> 标签：c#, windows-8, microsoft-metro, inotifypropertychanged, dependencyobject

我创建了空白 C#/XAML Windows 8 应用程序。添加简单的 XAML 代码：

```
<Page
    x:Class="Blank.MainPage"
    IsTabStop="false"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <StackPanel
            Margin="0,150"
            HorizontalAlignment="Center">
            <TextBlock
                x:Name="xTitle"
                Text="{Binding Title, Mode=TwoWay}"/>
            <Button Content="Click me!" Click="OnClick" />
        </StackPanel>
    </Grid>
</Page> 
```

以及 C# 部分中的简单代码：

```
public sealed partial class MainPage
    {
        private readonly ViewModel m_viewModel;

        public MainPage()
        {
            InitializeComponent();
            m_viewModel = new ViewModel
            {
                Title = "Test1"
            };
            DataContext = m_viewModel;
        }

        private void OnClick(object sender, RoutedEventArgs e)
        {
            m_viewModel.Title = "Test2";
        }
    } 
```

现在我要实施`ViewModel`. 我有两种方法：

1.  使用[依赖属性](http://msdn.microsoft.com/en-us/library/ms752914.aspx)
2.  实施[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

对于第一种方法，它是：

```
public class ViewModel : DependencyObject
    {
        public string Title
        {
            get
            {
                return (string)GetValue(TitleProperty);
            }
            set
            {
                SetValue(TitleProperty, value);
            }
        }

        public static readonly DependencyProperty TitleProperty =
            DependencyProperty.Register("Title", typeof(string)
            , typeof(ViewModel)
            , new PropertyMetadata(string.Empty));
    } 
```

其次是：

```
public class ViewModel : INotifyPropertyChanged
    {
        private string m_title;

        public string Title
        {
            get
            {
                return m_title;
            }
            set
            {
                m_title = value;
                OnPropertyChanged("Title");
            }
        }

        protected void OnPropertyChanged(string name)
        {
            if (null != PropertyChanged)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(name));
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
    } 
```

我更喜欢第一种方式，因为它允许使用[强制](http://msdn.microsoft.com/en-us/library/ms743230.aspx#animations)（用于 web 和 WP7 的 Silverlight 没有[强制](http://msdn.microsoft.com/en-us/library/ms743230.aspx#animations)功能.. WinRT 也是.. 但我仍在寻找和希望）并且对我来说看起来更自然。但不幸的是，它作为第一种方法的[OneTime工作。](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingmode.aspx)

谁能向我解释为什么 MS 放弃使用[依赖属性](http://msdn.microsoft.com/en-us/library/ms752914.aspx)来实现视图模型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T15:43:25.067

您不应该在 ViewModel 中使用 DependencyProperty - 您应该只在控件中使用它们。您永远不会想将一个 ViewModel 绑定到另一个 ViewModel，而且 ViewModel 不需要保留它们的值，也不需要提供默认值，也不需要提供属性元数据。

您应该只在 ViewModel 中使用 INotifyPropertyChanged。

# preg-match - 在文本文件名中查找 preg_match_all

> ID：11004961
> 
> 赞同：0
> 
> 时间：2012-06-12T21:13:44.443
> 
> 标签：preg-match, preg-match-all

我想在文本文件名中查找（例如 name.txt）。你能建议我在 preg_match_all() 中使用的正则表达式吗？我创建了一些正则表达式：

> preg_match_all("/^[a-zA-Z0-9_.]+[.][a-zA-Z0-9]{1,3}$/", $string, $w);

但是，总是得到一个空的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:04:08.323

只需在您的 reg 表达式中删除这些符号（^ 和 $）

这对我有用：

```
preg_match_all("![a-zA-Z0-9_.]+[.][a-zA-Z0-9]{1,3}!", $string, $w); 
```

^ - 匹配字符串的开头。

$ - 匹配字符串的结尾。

如果你的文件被放置在文本中你可以省略这个符号。

我会使用以下 reg 表达式，因为你写的那个找到扩展名由 1 到 3 个字母组成的文件，但通常扩展名包含 3 个字母（.doc，txt）

这是工作示例：

```
$string=" some text name.txt  some text hello.doc";
preg_match_all("![a-zA-Z0-9_.]+[.][a-zA-Z0-9]{3}!", $string, $w);
print_r($w); 
```

输出：

```
Array ( [0] => Array ( [0] => name.txt ) ) 
```

# ruby-on-rails - 如何在我的 form_helper 中强制输入字段的 ID？

> ID：11004963
> 
> 赞同：2
> 
> 时间：2012-06-12T21:13:53.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我希望`id`我的输入是`user[email]`而不是`user_email`。但我尝试的一切都不起作用。

我正在为这些宝石使用最新版本的设计。

这是我的表格：

```
 <%= form_for(resource, :as => resource_name, :class => "send-with-ajax", :url => user_registration_path(resource), :validate => true, :html => { :id => 'user_new' }) do |f| %>
                    <div class="six columns alpha"> 
      <%= f.text_field :email, :id => 'user[email]', :placeholder => "your-email@address.com", :input_html => {:autofocus => true}, :validate => true %>
                        </div>              
                        <div class="three columns sign-up alpha">
      <%= f.submit :label => "Submit", :value => "Sign Me Up!" %>
                          <div class="ajax-response"><%= devise_error_messages! %></div>
      </div>
  <% end %> 
```

这是生成的 HTML：

```
<form accept-charset="UTF-8" action="/users" class="formtastic user" data-validate="true" id="user_new" method="post" novalidate="novalidate"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="khstyw72jj44kkhaskdya3hkb3ba3lkxmw4=" /></div>
                        <div class="six columns alpha"> 
              <input data-validate="true" id="user_email" input_html="{:autofocus=&gt;true}" name="user[email]" placeholder="your-email@address.com" size="30" type="text" />
                            </div>              
                            <div class="three columns sign-up alpha">
              <input label="Submit" name="commit" type="submit" value="Sign Me Up!" />
                              <div class="ajax-response"></div>
              </div>
</form> 
```

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:38:00.280

ID 不能包含方括号，因此可能是 Rails 更改它的原因。

请参阅： [HTML 中 id 属性的有效值是什么？](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html) 以及[DOM ID 中允许使用哪些字符？](https://stackoverflow.com/questions/1077084/what-characters-are-allowed-in-dom-ids)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:45:10.640

似乎我必须重新启动服务器才能反映 form_helper 更改。

工作也是如此`:id => user[email]`。

# pagespeed - 在我自己的服务器上托管 pagespeed 见解

> ID：11004964
> 
> 赞同：1
> 
> 时间：2012-06-12T21:14:05.847
> 
> 标签：pagespeed, google-pagespeed

作为标题，有没有办法在我自己的服务器上托管 google pagespeed 见解，而不是使用 google api 来运行测试？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T02:01:46.693

是的，但有一些警告。

首先，[PageSpeed 的核心是开源的](https://developers.google.com/speed/pagespeed/psol)，提供内置优化建议的[浏览器扩展（Chrome、FF）也是如此。](https://developers.google.com/speed/pagespeed/insights_extensions)鉴于上述项目，您已经拥有自己运行所需的所有代码。

PageSpeed 还附带了一个 har_to_pagespeed 工具，您可以使用它来生成推荐列表。查看[Steve Souders 的这篇博文](http://www.stevesouders.com/blog/2010/05/01/har-to-page-speed)。链接到他的[在线工具](http://stevesouders.com/flint/index.php?f=cnn.har)。

要生成 har 文件，您需要一个单独的进程/浏览器驱动程序 - 有一些可用的开源工具可以做到这一点。查看 phantom.js。

最后，上面有一个小警告。`har_to_pagespeed`不会为您提供与浏览器扩展完全相同的结果，因为浏览器扩展也会分析 DOM 并基于此提出一些建议。此数据在 HAR 格式中不可用。

# javascript - 在 DOM 中构建全局变量

> ID：11004966
> 
> 赞同：1
> 
> 时间：2012-06-12T21:14:11.280
> 
> 标签：javascript, jquery, asp.net-mvc

我正在开发一个应用程序，我大量使用 AJAX 调用将部分 MVC 视图导入到我的 DOM 中。

我注意到一些奇怪的零星行为，其中变量会失去它们的状态。我希望有人可以帮助我确认我对为什么会发生这种情况的怀疑

例如，我有以下部分观点：JS：

```
--begin script tags
var var1 = 1;
var var2 = 2;
var manager = null;    

$(document).ready(function() 
{
  //Do stuff
  manager = new Manager();
});
--End script tag

<div>
Markup in partial view
</div> 
```

如果用户单击按钮，部分视图会一遍又一遍地导入我的 dom。它每次都插入到同一个元素中，每次都有效地覆盖自己。不过我的问题是：是否多次将此部分加载到 DOM 中会导致脚本块多次添加到我的 DOM 中？每次将部分视图拉入 DOM 时，JS 是否会被抛在后面？

该脚本已大大简化，但一个示例是 manager 可以为 null，即使在它被初始化之后也是如此。我的猜测是 DOM 中可能有多个实例......

似乎我可以通过将整个 JS 块包装在一个自调用闭包中来解决这个问题，但我不确定这是否有必要......我想知道是否有人对为什么需要闭包有一个很好的解释。我的理论是它可以防止在 DOM 中建立多个版本的 Partial View 脚本块......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:23:04.830

添加由单个自调用闭包组成的脚本不会在全局命名空间中引入新变量，它只定义一个函数，然后调用它，然后由于没有外部引用而立即忘记它。

另一方面，您的局部视图在每次导入时都会在全局命名空间中引入`var1`,`var2`并覆盖以前的定义。`manager`这可能解释了您遇到的零星变量行为。

# php - PHP数组参数按值，在通过引用循环数组项时被修改

> ID：11004967
> 
> 赞同：1
> 
> 时间：2012-06-12T21:14:13.223
> 
> 标签：php, arrays, arguments, pass-by-reference, pass-by-value

当按值传递给函数时，我一直在修改数组时遇到问题。

我检查了代码，在函数内部，数组循环通过引用获取元素。

我惊讶地发现，在循环之后，数组项被标记为引用。我不知道这意味着什么，但一定是我的问题的根源。

让我举一个例子来说明这一点。

```
<?php
error_reporting(E_ALL);
ini_set('display_errors' , 1);

$a = array( array(0) );
echo '--1--';var_dump($a);
dummy($a);
echo '--4--';var_dump($a);

function dummy($arg) {
    foreach($arg as &$item) {
        $item[0] = 3;
    }    
    dummy2($arg);
echo '--3--';var_dump($arg);
}

function dummy2($arg) {
    foreach($arg as &$item) {
        $item[1]=9;
    }
echo '--2--';var_dump($arg);
}
?> 
```

在这段代码之后，我希望在第 3 点中，$arg 只有一个元素，但它有两个，因此它已被 dummy2 函数修改。

输出如下：

```
--1--array(1) { [0]=> array(1) { [0]=> int(0) } } 
--2--array(1) { [0]=> &array(2) { [0]=> int(3) [1]=> int(9) } } 
--3--array(1) { [0]=> &array(2) { [0]=> int(3) [1]=> int(9) } } 
--4--array(1) { [0]=> array(1) { [0]=> int(0) } } 
```

为什么数组被引用循环后标记为&array？如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T04:42:26.850

您需要取消设置通过引用捕获的循环变量：

```
<?php
error_reporting(E_ALL);
ini_set('display_errors' , 1);

$a = array( array(0) );
echo '--1--';var_dump($a);
dummy($a);
echo '--4--';var_dump($a);

function dummy($arg) {
    foreach($arg as &$item) {
        $item[0] = 3;
    }
    unset($item);
    dummy2($arg);
echo '--3--';var_dump($arg);
}

function dummy2($arg) {
    foreach($arg as &$item) {
        $item[1]=9;
    }
    unset($item);
echo '--2--';var_dump($arg);
}
?> 
```

请参阅[foreach 的文档](http://www.php.net/manual/en/control-structures.foreach.php)，有一个很大的红色警告说：

> 即使在 foreach 循环之后，对 $value 和最后一个数组元素的引用仍然存在。建议通过 unset() 将其销毁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:41:37.273

使用`key => value`对并在函数中返回数组

```
<?php

    error_reporting(E_ALL);
    ini_set('display_errors' , 1);

    $a = array( array(0) );

    echo '--1--';var_dump($a);

    $a = dummy($a);

    echo '--4--';var_dump($a);

    function dummy($arg) {

        foreach($arg as $key => $value) {

            $arg[$key][0] = 3;
        }

        return dummy2($arg);
    }

    function dummy2($arg) {

        foreach($arg as $key => $value) {

           $arg[$key][1]=9;
        }

        return $arg;
    }
?> 
```

[http://codepad.org/f30c6FUj](http://codepad.org/f30c6FUj)

# python - 如何设置 spynner python 模块的 GUI 大小？

> ID：11004973
> 
> 赞同：0
> 
> 时间：2012-06-12T21:14:41.803
> 
> 标签：python, qt, qt4, pyqt4, spynner

我想为[spynner](https://github.com/makinacorpus/spynner) GUI 设置一个特定的大小，我该怎么做？（全屏）

我知道有[QT doc](http://qt-project.org/doc/qt-4.8/qwebview.html)，但我不知道`C++`，而且我需要混合`C++`&`python`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T22:06:40.973

我不太确定你的第二行是什么意思，因为它与你的问题没有任何关系......

> “……但我不会任何 C++……而且我需要混合 C++ 和 python”

这里不涉及 C++。

如果您查看 spynner 的源代码，并查看 Browser 类，您会看到它将 QWebView 小部件存储在一个属性中：`Browser.webview`。它也在文档中说明了这一点。

[https://github.com/makinacorpus/spynner/blob/master/src/spynner/browser.py#L96](https://github.com/makinacorpus/spynner/blob/master/src/spynner/browser.py#L96)

所以如果你想最大化 webview 窗口，你只需要调用`showMaximized()`它：

```
browser = spynner.Browser()
browser.debug_level = spynner.DEBUG
browser.create_webview()
browser.show()
# now maximize the webview
browser.webview.showMaximized() 
```

# c# - 制作自动真假生成器

> ID：11004974
> 
> 赞同：0
> 
> 时间：2012-06-12T21:14:42.480
> 
> 标签：c#, sql-server

我正在做一个自动测验助手的项目。我正在使用 SQL Server 我想从数据库中获取随机数据来制作 MCQ 问题的其他选项。是否有任何方法或查询可以从数据库中随机获取数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T21:18:07.263

```
SELECT 
    SomeColumn 
FROM 
    SomeTable
ORDER BY 
    CHECKSUM(NEWID()) 
```

学分转到[https://stackoverflow.com/a/121634/381995](https://stackoverflow.com/a/121634/381995)

# .net - 两个连续的 gacutil 命令，在 15 秒内。彼此的：

> ID：11004983
> 
> 赞同：0
> 
> 时间：2012-06-12T21:15:37.390
> 
> 标签：.net, .net-4.0, com, interop, assemblies

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools>gacutil.
exe /i "C:\Users\wherever\ClassLibrary1.dll"
Microsoft (R) .NET Global Assembly Cache Utility.  Version 4.0.30319.1
Copyright (c) Microsoft Corporation.  All rights reserved.

Assembly successfully added to the cache

C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools>gacutil.
exe /uf "ClassLibrary1.dll
Microsoft (R) .NET Global Assembly Cache Utility.  Version 4.0.30319.1
Copyright (c) Microsoft Corporation.  All rights reserved.

No assemblies found matching: ClassLibrary1.dll
Number of assemblies uninstalled = 0
Number of failures = 0

C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools> 
```

我可以看到“ClassLibrary1.dll”在 C:\Windows\Microsoft.NET\assembly\GAC_MSIL\ClassLibrary1\v4.0_1.0.0.0__2efc1c0b243a0c09 中。gacutil.exe 是否曾经安装过这个东西？不能卸载吗？它可以看到它刚刚告诉我它安装了什么吗？它是为安装或卸载 .NET 4 程序集而设计的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:27:33.067

尝试在第二个命令中从程序集名称中删除 .dll。

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools>gacutil.
exe /uf ClassLibrary1 
```

根据文档， gacutil /u 命令要求提供程序集名称，而不是路径或文件名。我在我的一个程序集中最后用 .dll 尝试了这个，并得到了与你相同的错误。

不能保证这是正确的，但这是我所看到的。

同样值得注意的是，gacutil /u 或 /uf 可以一次删除程序集的多个版本。因此，如果您不想全部删除它们，则值得指定版本。

# android - Shoutcast aac+ player app android like tunein

> ID：11004987
> 
> 赞同：0
> 
> 时间：2012-06-12T21:15:56.283
> 
> 标签：android, flash, builder

我正在寻找一个示例或指南，以了解如何创建一个像 tunein 这样的应用程序来拥有我自己的电台列表，然后如果我点击一个会向我显示一个播放器播放 de stream 我基本上使用 aac+ 也有 wowza 服务器 rtmp 链接等，但我可能需要一些隐藏或我可以遵循的文档才能开始。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:44:31.033

我认为您应该使用 NetConnection 连接到 RTMP 地址，然后开始播放流。我从来没有用 AAC+ 做过，但我认为（也许我错了）它和 mp3 流是一样的。

也许您可以从阅读此[http://www.wowza.com/forums/content.php?217-Quick-Start-Guide](http://www.wowza.com/forums/content.php?217-Quick-Start-Guide)或更具体的内容开始 -> 实时消息传递协议 (RTMP - Adob​​e Flash Player) [http:// www.wowza.com/forums/content.php?217#flashRTMP](http://www.wowza.com/forums/content.php?217#flashRTMP)

此外，当我开始（工作？）试验 RTMP 时，我在这里[http://www.flashrealtime.com/?s=rtmp](http://www.flashrealtime.com/?s=rtmp)发现了非常有用的文章，也许这应该是你的起点。

# c# - 使用 Mono 获取 Unix/Linux 系统架构

> ID：11004989
> 
> 赞同：1
> 
> 时间：2012-06-12T21:16:12.697
> 
> 标签：c#, architecture, mono

如何使用 Mono 获得当前的操作系统架构？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T02:44:02.507

这*是*可能的。

没有办法做到这一点是正确的普通 Jane .NET，[环境](http://msdn.microsoft.com/en-us/library/system.environment.aspx)（你期望它在哪里）不会暴露它。

但是 Mono 具有`Mono.Unix.Native`命名空间（您需要添加对 Mono.Posix.dll 的引用），它具有[Syscall 类](http://docs.go-mono.com/?link=T%3aMono.Unix.Native.Syscall)。这暴露[`uname`](http://ss64.com/bash/uname.html)了，它可能会给你你想要的；这在 Linux/Unix 版本中似乎不是很标准，我不确定 Mono 在这里做了多少标准化。

```
Mono.Unix.Native.Utsname results;
var res = Mono.Unix.Native.Syscall.uname(out results);
if(res != 0)
{
  throw new Exception("Syscall failed!");
} 
```

当我在我的 Mac 上运行它时，`results.machine`设置为`x86_64`. 我没有方便测试一致性的 Linux 机器。但如果有的话，这将是这样做的方法。

# algorithm - 计算随机圆位置的算法，使它们不重叠

> ID：11004992
> 
> 赞同：4
> 
> 时间：2012-06-12T21:16:26.487
> 
> 标签：algorithm, random, geometry, pack

我有以下问题。

我有一个很大的区域，里面有随机数量的不同大小的圆圈。如果在随机位置插入一个随机半径的新圆，我想为它找到一个附近的位置，这样它就不会与其他任何位置重叠。如果圆圈保持接近，这是最佳选择。

圆圈的数量和大小是有限的，但随机的。该区域将非常大（可能是 2500x2500），因此[这里](https://stackoverflow.com/questions/6002407/placing-random-circles-without-overlap-and-without-using-brute-force)提出的像素数组是不可能的。回答相同问题的人提出了一个网格，其中的单元格是圆圈的大小。这将解决我的问题，使用最大可能圆圈大小的单元格，但我希望圆圈尽可能靠近，所以它不能完全满足我的需求。

一种非常基本的方法包括检测新圆放置时的碰撞，并将其从与之碰撞的圆移开。之后，再次检查碰撞并重复该过程。这显然不是很优雅，而且很容易出现无限循环（比你想象的更频繁）。

## 目标是为新插入的圆找到最近的可能位置，使其不与其他任何人重叠。

PD
一件非常好的事情，但不同的事情，而不是我的主要目标，是根据需要重新排列尽可能多的圆圈，而不是仅仅重新定位一个，就好像它们在相互“推动”一样。我更喜欢距离而不是移动的圈数。也就是说，我宁愿很多圈子移动一点，而不是一个圈子远离它的原始位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T01:29:21.063

我会做以下事情：定义x，y的网格，对于网格，计算到所有圆的最小距离减去圆的半径。在生成的地图上，您可以选择比 X 更亮的任何像素，这意味着您可以在那里放置一个半径为 X 的圆而不会重叠。这是显示结果地图的代码和图像。如果你想让它更快，你可以使用低分辨率版本的地图。

```
import numpy as np,numpy.random
import matplotlib.pyplot as plt,matplotlib,scipy.optimize

maxx=2500
maxy=2500
maxrad=60 #max radius of the circle
ncirc=100 # number of circles
np.random.seed(1)

#define centers of circles
xc,yc=np.random.uniform(0,maxx,ncirc),np.random.uniform(0,maxy,ncirc)
rads=np.random.uniform(0,maxrad,ncirc)
#define circle radii

xgrid,ygrid=np.mgrid[0:maxx,0:maxy]
im=xgrid*0+np.inf

for i in range(ncirc):
    im = np.minimum(im, ((xgrid - xc[i])**2 + (ygrid - yc[i])**2)**.5 - rads[i])
# im now stores the minimum radii of the circles which can 
# be placed at a given position without overlap

#plotting 
fig=plt.figure(1)
plt.clf()
plt.imshow(im.T,extent=(0, maxx, 0, maxy))
plt.colorbar()
ax = plt.gca()
for i in range(ncirc):
     ax.add_patch(matplotlib.patches.Circle((xc[i], yc[i]), rads[i],
          facecolor='none', edgecolor='red'))
plt.xlim(0, maxx)
plt.ylim(0, maxy)
plt.draw() 
```

![可以不重叠放置的圆的最小半径图](../Images/a0c4419df5e08d0313ff8a4960c9c731.png)

地图看起来像 voronoi 图，但不清楚是否可以利用。

更新：经过一番思考，有一个可能更快的解决方案适用于大量圈子。首先创建该区域的网格（比如 2500x2500）。用 1 填充圆圈内的所有像素，其他所有像素都用 0 填充。然后，您需要将此地图与圆形内核与您要放置的圆的所需半径进行卷积。生成的地图的像素必须为 0，可用于放置像素。这种方法的优点是可以适用于非常大的网格和圈数，并且卷积可以通过fft轻松完成。

这是显示第一个掩码的插图，以及与半径为 128 像素的圆形内核卷积后的掩码。右掩码中的所有零像素都是半径为 128 的新圆的可能位置。

![面具](../Images/404b550588dc7f1a2ffe114f794ba080.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:51:18.367

您的问题提出了一种基于[力的布局算法](http://en.wikipedia.org/wiki/Force-based_algorithms_%28graph_drawing%29)的解决方案，该算法在排斥力和吸引力之间取得了明智的平衡。 [这个答案](https://stackoverflow.com/questions/713701/force-directed-layout-in-c)指向您可能使用的图书馆，我希望谷歌会为您找到其他人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T23:02:42.380

尝试动态网格，从最大的圆圈开始，然后在将圆圈放置到最终位置后在圆圈的每个边缘上画线。现在您的网格将由许多不同大小的框组成，您所要做的就是找到一个适合您的新圆的边界框的框，放置它，然后绘制定义您现在更小的框的线条。继续，直到你放置了所有的圈子。

您始终可以在正方形区域内的角落位置放置圆圈，这样当您绘制线条时，首先您只需绘制 2 条线，其次您将始终在放置后保持最大空间打开。

# html - 在 Chrome 和 Firefox 中正确呈现，但在 Safari 或 IE 中不正确

> ID：11004993
> 
> 赞同：0
> 
> 时间：2012-06-12T21:16:27.347
> 
> 标签：html, css, internet-explorer, safari

a) 此代码中的按钮和 b) 页脚存在问题。

在 Firefox/IE 中，按钮无法正常工作，页脚缩小并被扔到角落里。

按下按钮时，按钮会移动到页面的不同部分，并且页脚不可读。

任何帮助，将不胜感激。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head>
    <title>SAMPLE</title>
</head>

<style type="text/css">

.con {text-align:center; }

button a {text-decoration:none; color:#08233e; }

#wtf_title {font-family: "Garamond"; font-weight: bold; font-size: 200%; padding-top:50px;}

#intro_text {font-family: "Helvetica", serif; color: black; padding-top:10px; font-style: italic;}

#reason {font-family: "Helvetica", serif; color: white; padding-top:50px; padding-bottom:50px;}

#credit {font-family: "helvetica"; font-size: 20%; color: black; text-align:center; }

button{
color:#08233e;
font:2.4em Futura, ‘Century Gothic’, AppleGothic, sans-serif;
font-size:70%;
padding:14px;
background:url(overlay.png) repeat-x center #ffcc00;
background-color:rgba(255,204,0,1);
border:1px solid #ffcc00;
-moz-border-radius:10px;
-webkit-border-radius:10px;
border-radius:10px;
border-bottom:1px solid #9f9f9f;
-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
cursor:pointer;
}

button:hover{background-color:rgba(255,204,0,0.8);}

button:active{position:absolute;top:100px; left:50px}​

</style>

<body>

    <div class="con">
        <p id="wtf_title">SAMPLE</p>
        <hr noshade size=8 width="53%">
        <p id="intro_text">SAMPLE</p>
        <button><a href="WTFLBJ_Hate.html" class="button1">SAMPLE</a></button><br>
        <button><a href="WTFLBJ_Defend.html" class="button2">SAMPLE</a></button>            
    </div> 

    <div id="twitter-share-button"; style="position: absolute; top: 2px;" >
        <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.whatthefuckhaslebronjamesdone.com" data-text="Check this out:" data-count="none" data-hashtags="WTFLBJ">Tweet</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="http://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>

    <div id="fb_share"; style="position: absolute; top: 2px; left: 90px;" >
        <a name="fb_share"></a> 
            <script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" 
         type="text/javascript">
            </script>   
    </div>

    <div id="credit"; style="position: absolute; bottom: 5px;  " >
        This site was created by <a href="http://www.twitter.com/varunsshetty">Varun Shetty</a> and <a href="http://www.twitter.com/bcfromblo">Bobby Corp</a>. Inspired by LBJ and <a href="http://www.whatthefuckhasobamadonesofar.com">WTF Obama</a>. 
    </div> 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:25:12.263

以您的风格删除此行

按钮：活动{位置：绝对；顶部：100px；左：50px}

演示：http: [//jsfiddle.net/vCAgs/3/](http://jsfiddle.net/vCAgs/3/)

我只检查了 chrome 和 internet explorer 9，但我认为它适用于所有浏览器

# javascript - 投射阴影

> ID：11004996
> 
> 赞同：3
> 
> 时间：2012-06-12T21:16:42.147
> 
> 标签：javascript, 3d, three.js

我看到这个例子谈论阴影： http: [//learningthreejs.com/blog/2012/01/20/casting-shadows/](http://learningthreejs.com/blog/2012/01/20/casting-shadows/)。

我在这里尝试过，但我在这里遇到了麻烦......我把另一个立方体像墙一样......但是光线和阴影也在穿过它。如何控制光线不通过另一侧？

我把这个问题放在博客上，我收到了以下回复：“不幸的是，你不能。那些灯光和阴影不遵守物理定律。它们只是让它看起来有点真实的技巧。这些限制也允许获得实时渲染”

信息是否正确？还有另一种方法可以做我想做的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:23:18.723

我敢肯定，mrdoob 比我更了解这一点。[但是这里](https://stackoverflow.com/questions/10742149/how-to-create-directional-light-shadow-in-three-js/10904641#10904641)有一个类似问题的链接，它也可能对您有所帮助。一件事让我有一段时间是您必须启用整体阴影贴图，然后启用每个对象的*阴影投射*和*阴影接收。*我也将灯光设置为 .castShadow = true 。