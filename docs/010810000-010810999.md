# StackOverflow 问答 10810000-10810999

# android - 使用 ARM 的 newlib 交叉编译 GCC：如何指定 GCC 选项，如 -march？

> ID：10810008
> 
> 赞同：31
> 
> 时间：2012-05-30T04:30:45.270
> 
> 标签：android, c, macos, gcc, arm

我已经在 Mac OS X 上为 ARM 目标编译了 GCC 和 newlib。但是，libc.a 是使用 -fshort-enums 编译的，我不希望这样，因为当我为 ARM 编译东西时，我使用 -fno-short-enums。当然，这会发生冲突：

```
ld: warning: /var/folders/9m/2wnjp9zd71x13cpdpf16y_4r0000gn/T//ccQuEnp6.o uses 32-bit enums yet the output is to use variable-size enums; use of enum values across objects may fail 
```

每次我尝试运行“Hello, World!”时 可执行文件，它有段错误。这可能是原因吗？

这是我用来编译 hello.c 的命令：

```
arm-eabi-gcc \
hello.c -o hello \
/Users/user/gcc-arm-install/arm-eabi/lib/crt0.o \
/Users/user/gcc-arm-install/lib/gcc/arm-eabi/4.7.0/crtbegin.o \
/Users/user/gcc-arm-install/lib/gcc/arm-eabi/4.7.0/crti.o \
/Users/user/gcc-arm-install/lib/gcc/arm-eabi/4.7.0/crtn.o \
/Users/user/gcc-arm-install/lib/gcc/arm-eabi/4.7.0/crtend.o \
-v -nostdinc -nostdlib -static \
-march=armv7-a -mno-thumb-interwork -marm -mfpu=neon -mfloat-abi=softfp -fpic \
-ffunction-sections -fno-short-enums -fno-rtti -fno-exceptions \
-I/Users/user/gcc-arm-install/lib/gcc/arm-eabi/4.7.0/include \
-I/Users/user/gcc-arm-install/lib/gcc/arm-eabi/4.7.0/include-fixed \
-I/Users/user/gcc-arm-install/arm-eabi/include \
-I/Users/user/gcc-arm-install/arm-eabi/sys-include \
-L/Users/user/gcc-arm-install/arm-eabi/lib \
-L/Users/user/gcc-arm-install/lib/gcc/arm-eabi/4.7.0 \
-lm -lc -lgcc 
```

**更新：**

好的，我想我已经将问题缩小到 newlib 的 libc 和启动文件 (crt0.o) 的组合。我尝试使用 libc.a 和 Android NDK 中的启动文件使用 GCC 4.7.0 编译测试应用程序，并且在静态编译时可以在手机上运行。事实上，即使 ld 再次抱怨 libgcc 使用“可变大小枚举”（即，没有像其他所有内容一样使用 -fno-short-enums 编译），它仍然有效。所以，我关于 -fno-short-enums 是我早期崩溃二进制文件的罪魁祸首的假设是不正确的。

这是有效的：

从源代码为目标“arm-linux-eabi”编译的 Binutils 和 GCC 4.7.0。我使用 --with-newlib （GCC 的源代码树中的 newlib 和 libgloss）配置了 GCC。因此，GCC 实际上是用 newlib 构建的，并与 newlib 一起安装，只要我实际上不与 newlib 的 libc 链接，它就会生成工作二进制文件。目前，我必须使用 Andoid NDK 中的 libc 及其启动文件。

我的编译脚本看起来像这样。包含和库路径指向 NDK 包含和 libc：

```
NDK_PATH="/Users/user/SOURCE/android-ndk-r8/platforms/android-9/arch-arm"
CFLAGS="-nostdinc -nostdlib -static -fno-short-enums -lc -lgcc -lc"

gcc $NDK_PATH/usr/lib/crtbegin_static.o \
hello.c -o hello $CFLAGS \
$NDK_PATH/usr/lib/crtend_android.o 
```

我仍然希望使用 newlib 的 libc 工作来静态编译二进制文件。回到 shell 脚本...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T01:42:02.093

对于工作，我为 Cortex-M3 平台交叉构建，并且我还使用 newlib。以下链接可能对您有所帮助：

[http://frank.harvard.edu/~coldwell/toolchain/](http://frank.harvard.edu/~coldwell/toolchain/) http://www.microbuilder.eu/Tutorials/SoftwareDevelopment/BuildingGCCToolchain.aspx

尽管以下链接特定于 Cortex-M3，但它可能会为您提供一些见解，我用它来编写我的工具链构建脚本： [http ://www.johannes-bauer.com/mcus/cortex/?menuid=5](http://www.johannes-bauer.com/mcus/cortex/?menuid=5)

您的 newlib 可能已被错误编译（可能与主机编译器有关？因为它链接，所以不太可能，但嘿，这是可能的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T07:03:18.550

我认为您可以先编写一个 shell 脚本来选择工作环境，就像您将在 gcc 或 arm-gcc 下工作一样。在这个脚本中，你可以为你想要的不同的lib创建一个替代的lib链接，比如如果你登录并选择gcc，lib文件将是普通的libc，如果你选择arm-gcc，lib将是不同的

# regex - 正则表达式：不能以“;”、“;”结尾或开头 必须分开，必须至少1个“;” 但不超过“;”

> ID：10810016
> 
> 赞同：0
> 
> 时间：2012-05-30T04:31:51.187
> 
> 标签：regex

我可以知道如何创建具有以下规则的正则表达式

1.  不能以“;”结尾或开头
2.  “;” 必须分开
3.  必须至少有 1 个“;” 但不超过 3 个“;”

示例 1\. s;dsdd;sd - 有效 2\. sdasd;dasd; - 无效 3\. sd;dsd;dasd;dasd; - 无效 4\. ;dasd;dasd; - 无效的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T04:34:11.183

假设 perl 兼容，因为您没有指定。

`/^[^;]+(?:;[^;]+){1,3}$/`

这是如何工作的：

`^`锚定到行首。

`[^;]`匹配任何不是“;”的字符

`+`修饰符匹配至少一个先前类型（一个或多个）。

`(?: )`是非捕获分组。在这种情况下，您也可以仅`()`用于捕获分组，这并不重要。

`;[^;]+`匹配文字分号后跟 1 个或多个“非分号”。

`{1,3}`. 表单中的大括号`{m,n}`至少需要`m`但不超过`n`前一个序列的重复（在本例中为`(?:;[^;]+)`）

最后，`$`锚定到行尾。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T04:58:48.800

这是你的正则表达式：

```
^(?!.*;;)(?=(.*;){1,3}.*$)[^;].*[^;]$ 
```

此正则表达式为每个条件使用单独的部分：

*   `^`输入开始
*   `(?!.*;;)``;;`断言输入不包含任何地方的“负面展望”
*   `(?=(.*;){1,3})`断言输入的“积极展望”确实包含 1-3 个`;`字符
*   `[^;].*[^;]``;`以非字符开头和结尾
*   `$`输入结束

这样做的好处是：

*   正则表达式实际上是“只读”代码，但是如果您将其分解，则有机会稍后再阅读
*   如果您稍后更改/删除/添加规则，则如果像这样分段，则正则表达式更容易维护

有关“环顾四周”和其他高级正则表达式概念的说明，请参阅[此站点](http://www.regular-expressions.info/refadv.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T04:41:31.147

如果您指定要匹配的内容而不是不想匹配的内容，则可能最简单。如果分号之间的内容应该包含大小写字母和数字，那么以下内容就足够了：

```
/[A-Za-z0-9](;[A-Za-z0-9])*/ 
```

读为，匹配一个标记，然后是由一个分号分隔的尽可能多的标记。

# iphone - 单击主页按钮时，Objective C中的NSTimer

> ID：10810019
> 
> 赞同：-2
> 
> 时间：2012-05-30T04:32:32.790
> 
> 标签：iphone, objective-c, ios5, nstimer

我在 ViewController 类中有 NSTimer.. NStimer 的所有方法都在该类中.. 我的 NSTimer 在播放和暂停方面工作正常......当我按下 iPhone 上的主页按钮时，计时器也工作正常（它开始运行从当应用程序进入前台时应用程序进入后台的时间... 在这里，当警报出现在屏幕上时，我的 NSTimer 正在运行（没有对警报做出响应）。我想停止 NSTimer 直到用户响应我的警报...之后我想启动 NSTimer...如何我可以这样做吗...？请帮助我...在此先感谢...我想从 Appdelegate.m 文件中调用 NSTimer 方法...我正在正确调用这些方法...

```
enter code here 
```

视图控制器.h

```
+(ExamViewController *)evcInstance; 
```

视图控制器.m

```
ExamViewController *evc = nil;
@implementation ExamViewController

+(ExamViewController *)evcInstance
{
if(!evc) 
{
    evc = [[ExamViewController alloc] init];
}
return evc;
}

- (void)onStartPressed
{
stopwatchtimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(updateTimer:) userInfo:nil repeats:YES];
[[NSRunLoop currentRunLoop] addTimer:stopwatchtimer forMode:NSRunLoopCommonModes]; 
resume.hidden = YES;
resume.enabled=NO;
pause.hidden = NO;
pause.enabled=YES;
} 

- (void)onStopPressed
{

[stopwatchtimer invalidate];
stopwatchtimer = nil;
pause.hidden = YES;
pause.enabled=NO;
resume.hidden = NO;
resume.enabled=YES;
} 
```

Appdelegate.m

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
[[ExamViewController evcInstance] onStopPressed];

NSLog(@"applicationWillEnterForeground");

if(viewCalled ==YES)
{

    UIAlertView *alertview=[[UIAlertView alloc]initWithTitle:@"" message:@"DO! You Want To continue" delegate:self cancelButtonTitle:@"YES" otherButtonTitles:@"NO", nil];

    [alertview show];

    [alertview release];

}
/*
 Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
 */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:03:11.510

一些东西：

1）它看起来像一个不完整的单例设计。如果你真的想要一个单例，请参考这样的[帖子](https://stackoverflow.com/questions/7568935/how-do-i-implement-an-objective-c-singleton-that-is-compatible-with-arc)。

2) 无需在当前运行循环中添加秒表定时器。scheduleTimerWithTimeInterval 方法会为您安排它。

3）我看不到您在哪里声明秒表计时器，但请务必将其声明为保留属性（或 ARC 中的强属性）。

4）要停止计时器，只需调用`[stopwatchtimer invalidate];` 要重新启动它，使用您最初调用的相同的 scheduleTimerWithTimeInterval 类方法重新实例化并覆盖旧的。

5) 要在警报视图完成时执行任何操作，请实现委托方法：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
```

因此，您可以在显示警报之前使计时器无效，然后在收到警报完成的通知时重建它。

# c - 作业作为条件

> ID：10810020
> 
> 赞同：2
> 
> 时间：2012-05-30T04:32:36.270
> 
> 标签：c, visual-c++

考虑以下代码，

```
int i;
while(i=0)
    printf("Hello"); 
```

现在一般来说 i=0 是一个`assignment`而不是一个`condition`检查`while`。但是`GCC`编译器让它发出警告，甚至正确评估它（不执行打印语句）。

为什么？我通常会为真值加上括号，但我的后辈们觉得我错了，括号里的括号没有真正的理由！

编辑：归零“实际”疑问，请考虑以下测试用例

```
int callme(){
    return 0;
}

int main(int argc,char*argv[]){
    int c;
    while(c = callme()){
        printf("Calling...\n"); 
    }
    return 0;    
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T04:34:31.637

这个表达式`i = 0`做了两件事：

*   有储存o的副作用`i`
*   产生值 0

> 我通常会为真值加上括号，但我的后辈们觉得我错了，括号里的括号没有真正的理由

它通常是对编译器的暗示，意思是“我真的想要这个，我没有忘记`=`，闭嘴”。

* * *

对于您的具体情况，没有理由写`if (i = 0)`：您已经知道 if (0) 会做什么。但它在用作以下用途时非常有用：

```
if ((i = some_function()))
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T04:42:52.273

`i=0`总是一个赋值（除非你把它作为`int i = 0;`初始化的一部分）。但是任何非 void 表达式都可能出现在`while`循环的条件内，如果它的计算结果为非零，则循环体将被执行，如果它为零，则循环体将不会被执行。

符号：

```
while (i = 0)
    printf("Hello\n"); 
```

总是等价于：

```
i = 0; 
```

编写循环的理由很少。

人们确实会写其他表达方式：

```
while (c = getchar())
    ...process EOF or a non-null character... 
```

但这通常是一个错误。你更有可能写：

```
while ((c = getchar()) != EOF)
    ...process a character - possibly null... 
```

甚至：

```
while ((c = getchar()) != EOF && c != '\0')
    ...process a non-null character... 
```

第一个`getchar()`循环收到来自 GCC 的警告；后两者不是因为对赋值的值进行了显式测试。

写这样一个条件的人：

```
while ((c = getchar())) 
```

真的很烦我。它避免了来自 GCC 的警告，但它不是（IMNSHO）一种好的编码方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T04:53:58.810

当您使用赋值运算符时，例如

```
a=0; 
```

您将值分配给“a”，但仍返回数字 0。

* * *

**为了测试你的问题，我尝试了这些代码行：**

```
int a;
printf("%d", a=0); 
```

这些行显示为 0。

**然后，我测试了另一组代码：**

```
int b;
printf("%d", b=15); 
```

在这里，行显示 15。

* * *

**所以，如果你这样做：**

```
while(a=0)
{
    printf("zero");
} 
```

(a=0) 语句将返回 false，因此不显示任何内容。

**但如果你这样做：**

```
while(a=15)
{
    printf("fifteen");
} 
```

“十五”会无限显示，因为语句(a=15)会返回一个非零值，即15，不为假，不为零，因此为真。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T04:37:21.153

正如 cnicutar 上面所说的，赋值也产生零值。

一些附加信息：

人们省略一个额外的“=”是一个常见的编码错误，因此比较变成了一个赋值。

避免这种情况的一种简单方法是编写如下比较，在这种情况下，即使错过了 '=' 编译器也会给出错误

```
while(0 == i)
{
  prinf("Hello");
} 
```

# osgi - 在 OSGI 环境中运行 nutch

> ID：10810022
> 
> 赞同：1
> 
> 时间：2012-05-30T04:32:53.120
> 
> 标签：osgi, nutch, osgi-bundle

我是 OSGI 框架的新手所以这个问题可能看起来很傻。

我们可以在 OSGI 框架中运行 Apache Nutch 1.4。我想创建一个 OSGI 捆绑包。我正在使用 eclipse indigo 来编译 Nutch 源代码。所以我认为应该有某种插件可以在编译后创建 OSGI 包而不是 jar。我只需要 Nutch 的 OSGI 包。

我什至不知道这是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T04:37:29.137

您需要寻找实现 Nutch 的捆绑软件。一个快速的谷歌出现了[这个](http://wiki.apache.org/nutch/NutchOSGi)。如果这个特定的捆绑包不能满足您的需求，您可以使用捆绑包清单中的 Embed-Dependency 字段将 Nutch 依赖项嵌入到您自己的捆绑包中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:40:26.380

正如另一个答案所暗示的，已经实现 Nutch 的捆绑包是您最好的选择。[更一般地说，您可以使用bnd 工具的](http://www.aqute.biz/Code/Bnd)[wrap](http://www.aqute.biz/Bnd/Wrapping)功能轻松地将现有 jar 转换为 OSGi 包（无需源代码）。如果你确实有源代码并想重新编译，[maven 的 bundle 插件](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)和 bundle 打包会生成 bundle。

为了模块化，这是 OSGi 的主要驱动程序之一，我建议使用单独的 Nutch 包而不是嵌入依赖项。

# c# - 解析器错误：无法在 ASP.NET 通用 Web 处理程序中创建类型“xyz”

> ID：10810025
> 
> 赞同：3
> 
> 时间：2012-05-30T04:33:48.180
> 
> 标签：c#, asp.net, ashx

我的 Web 应用程序项目中有一个 ASP.NET 通用 Web 处理程序 (*.ashx)。它在 Web 服务器上的路径是`/Services/PayPal/IPNListener.ashx`.

IPNListener.ashx

```
<%@ WebHandler Language="C#"
               CodeBehind="IPNListener.ashx.cs"
               Class="Portal.Services.PayPal.IPNListener" %> 
```

IPNListener.ashx.cs

```
//-----------------------------------------------------------------------------
// <copyright file="IPNListener.cs" company="DCOM Productions">
//     Copyright (c) DCOM Productions.  All rights reserved.
// </copyright>
//-----------------------------------------------------------------------------

using System;
using System.Collections.Generic;
using System.Web;
using Portal.PayPal;

namespace Portal.Services.PayPal
{
    /// <summary>
    /// Summary description for IPNListener
    /// </summary>
    public class IPNListener : IHttpHandler
    {
        /// <summary>
        /// Receives the HttpWebRequest via an HttpContext and processes the request
        /// </summary>
        public void ProcessRequest(HttpContext context) {
            // I gutted this, because it still produces the same error
            context.Response.Write("Hello World!");
        }

        /// <summary>
        /// Gets a System.Boolean value that indicates whether the generic handler may be reused
        /// </summary>
        public bool IsReusable {
            get {
                return false;
            }
        }
    }
} 
```

当我尝试导航到处理程序时，我收到以下错误。

```
Parser Error

Description: An error occurred during the parsing of a resource required to service 
             this request. Please review the following specific parse error details 
             and modify your source file appropriately. 

Source Error

Line 1:  <%@ WebHandler Language="C#"
                        CodeBehind="IPNListener.ashx.cs"
                        Class="Portal.Services.PayPal.IPNListener" %>

Source File: /portal/services/paypal/ipnlistener.ashx    Line: 1 
```

这是我到目前为止所做的：

(1)**破坏处理程序**。如我发布的代码中所示，我将其删除为一个简单的`Hello World`处理程序，以消除我的代码中出现错误的可能性。处理程序以前工作得很好，我实际上不确定是什么导致它停止工作。

(2)**检查版本控制**。就像我之前说的，处理程序大约一天前工作正常。我检查了文件历史的版本控制以查看是否有任何更改，但实际上没有。

(3)**应用程序池**。我检查了 IIS 7 中的应用程序池，它运行正常`ASP.NET v4.0`。

(4)**已验证的构建操作**。我验证了`IPNListener.ashx`'s build action 设置为`Content`，并且`IPNListener.ashx.cs`'s build action 设置为`Compile`。

(5)**已验证 DLL 完整性**。我使用 IL Disassembler 验证了该类型`Portal.Services.PayPal.IPNListener`确实存在于编译的 DLL 文件中。

(6)**虚拟应用目录**。该文件夹`/Services/PayPal`不是一个虚拟应用程序，我从来不需要让它成为一个通用处理程序的工作，但我还是尝试了它，仍然产生了同样的错误。

(7)**清洁重建**。我试过清理解决方案，然后重建。没有编译器错误。然后继续发布Web应用程序，一切都很好。

(8)**检查依赖项**。我检查以确保所有必需的文件和依赖项都已部署。一切都检查出来。

我真的不知道为什么这会停止工作。一切都经过测试，准备好今天发布我的第一个软件产品的所有内容，当我在支付服务上进行最后一次测试运行时，它返回了 500 内部服务器错误，进一步调查表明这是由这个问题。

我真的很难过。我在 StackOverflow 以及整个网络上搜索了有关 ASHX 处理程序和此问题的所有其他帖子，但发现对我的特定问题没有任何用处。

这可能是我忽略的非常简单的事情，但我似乎无法理解它。

（更新）**2012 年 5 月 29 日晚上 10:57**。离开`Ray Cheng`的评论和我的评论，我意识到该服务曾经居住在`/PayPal/IPNListener.ashx`，并已移至`/Services/PayPal/IPNListner.ashx`。移动完成后，所有命名空间和类位置都在 ASHX 文件中更新。

出于好奇，我将处理程序复制到`/PayPal/IPNListener.ashx`，更新了 ASHX 文件中的命名空间和类，然后导航到该位置，服务运行良好。

本质上

```
/Services/PayPal/IPNListener.ashx 
```

由于`Could not create type`, 和

```
/PayPal/IPNListener.ashx 
```

工作得很好。那么，为什么将处理程序设置为一个文件夹层次结构会影响工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:02:18.363

问题很简单。我有两台 IIS 7 服务器，一台用于本地测试，另一台位于互联网上。

本地 IIS 服务器将父目录`/Services`设置为虚拟应用程序。我发现在通用处理程序路径中的某处有一个虚拟应用程序会导致 ASP 引擎无法创建处理程序类型。这解释了为什么将服务从`/PayPal/IPNHandler.ashx`中断移动`/Services/PayPal/IPNHandler.ashx`，因为前一个路径不是虚拟应用程序，而后者是中断处理程序。

删除虚拟应用程序以`/Services`解决测试服务器上的问题，现在它可以按预期工作。

无论如何，该路径中不应该有虚拟应用程序，但这是一个疏忽，因为`/Services`它不仅仅用于此处理程序。

事实证明，实时服务器上的问题是处理程序中使用的 WCF 服务的服务地址使用别名指向测试服务器`localhost`，因此是无效地址。实时服务器在虚拟应用程序配置或任何其他方面没有任何问题，它是一个不正确的地址。

更新不正确的地址解决了 500 内部服务器错误。这与导致解析错误的处理程序的原始问题无关，但在一切正常之前发现并解决了第二个问题。

# mysql - Rails invalid date error

> ID：10810026
> 
> 赞同：0
> 
> 时间：2012-05-30T04:34:10.150
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3

Im using [this](https://github.com/watu/table_builder) gem to setup a calendar in my app. Everything is working fine except the arrows that change the month.. Getting the following error:

```
ArgumentError in UsersController#show

invalid date
Rails.root: /Users/nelsonkeating/Desktop/ReminDeal

Application Trace | Framework Trace | Full Trace
app/controllers/users_controller.rb:13:in `show'
Request

Parameters:

{"month"=>"2012-06",
 "id"=>"7"} 
```

users_controller.rb

```
def show
    @user = User.find(params[:id])
    @friends = @user.friends.paginate(page: params[:page])
    @date = params[:month] ? Date.parse(params[:month]) : Date.today
   end 
```

Console:

```
Started GET "/users/7?month=2012-06" for 127.0.0.1 at 2012-05-29 21:30:04 -0700
Processing by UsersController#show as HTML
  Parameters: {"month"=>"2012-06", "id"=>"7"}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1
  User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", "7"]]
Completed 500 Internal Server Error in 33ms

ArgumentError (invalid date):
  app/controllers/users_controller.rb:13:in `show' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T07:09:03.797

```
It is cause due to improper format of the date, the date format is either "%Y-%m-%d" or"%d-%m-%Y" since you have just pass the parameter i.e.
    {"month"=>"2012-06", "id"=>"7"}
you should send the parameter 
    {"month"=>"2012-06-27", "id"=>"7"}
you should send the date also
I had the same problem and solve by adding day in the date parameter. 
```

Hope this will help you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:45:24.597

It is `Date.parse("2012-06")` causing the error.

If the date is not significant, you may try this: `Date.parse("#{params[:month]}-01")`

# php - PHP json_decode - 处理命名空间

> ID：10810028
> 
> 赞同：1
> 
> 时间：2012-05-30T04:34:24.913
> 
> 标签：php, namespaces, json

我正在尝试使用 PHP 和 json_decode 解析 JSON 文件，但是当返回的 JSON 是命名空间时，我很难做到这一点。例如：

```
$json_ouput = json_decode($json);

foreach ( $json_ouput->feed as $feed) {

   /*
     Here is the problem, $feed contains a namespaced key
     $feed->ab:test->value // Does not work :(
   */
} 
```

这里最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T04:37:36.367

一如往常。

```
$feed->{'ab:test'}->value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:51:28.947

与消除变量和周围字符串字符之间的歧义的方式非常相似，您可以使用`{`and`}`将访问器的一部分拼凑在一起：

```
$json = '{"feed":[{"ab:test":{"value":"foo"}},{"ab:test":{"value":"bar"}}]}';
$json_output = json_decode( $json );

foreach ( $json_output->feed as $feed ) {

  // Outputs: foo bar
  print_r( $feed->{'ab:test'}->value );

} 
```

演示：[http ://codepad.org/MYYwOJj2](http://codepad.org/MYYwOJj2)

# jqplot - 在 jqplot 中打开和关闭点标签

> ID：10810030
> 
> 赞同：4
> 
> 时间：2012-05-30T04:34:49.390
> 
> 标签：jqplot

我正在尝试以编程方式打开和关闭 pointLabels。我认为它会像这样工作：

```
 var data_ = [[1,1],[2,5],[4,9]];
    var graph = $.jqplot(id_graph, [data_], {
        series:[{pointLabels: { show:true } }]
        }
      );
    graph.series[0].pointLabels.show=false;
    graph.replot(); 
```

但是，这仍然会显示点标签。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-05T15:14:18.683

尽管这篇文章很旧，但我找到了解决问题的方法：

```
var data_ = [[1,1],[2,5],[4,9]];
var graph = $.jqplot(id_graph, [data_], {
    series:[{pointLabels: { show:true } }]
    }
  );
graph.series[0].plugins.pointLabels.show=false;
graph.replot(); 
```

而不是使用

```
graph.series[0].pointLabels.show=false; 
```

利用

```
graph.series[0].plugins.pointLabels.show=false; 
```

在我的情况下，这有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:25:19.397

添加到 Boro 的答案中，如果您想在单个系列上切换标记，这样做会更快：

```
graph.drawSeries({markerOptions:{show:false}},seriesIndex); //redraw single series 
```

大量系列的调用 replot 可能会很昂贵。

Revved小提琴[在这里](http://jsfiddle.net/3PNGt/1/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T10:06:33.323

我认为你想要的实际上是`showMarker`选项。由于在此代码中您没有设置点标签，因此它们永远不会显示。这`showMarker`将使您可以打开/关闭图形的点。

这就是你真正追求的吗？否则，请提供您使用的示例。

[这是为类似问题制作的示例。](https://stackoverflow.com/a/10796450/613495)

[请参阅此示例。](http://jsfiddle.net/Boro/3PNGt/)在按钮上单击会发生制造商可见性的变化。

* * *

**更新：** [此示例显示了](http://jsfiddle.net/3PNGt/87/)使用上述方法的解决方案，即在更改“pointLabels”新参数的同时重新绘制绘图。

```
jQuery(document).ready(function () {
    var data = [
        [1, 1],
        [2, 5],
        [4, 9]
    ];
    var graph;
    var isShowPointLabels = true;

    function makePlot(showPointLabels) {
        graph = $.jqplot("chart", [data], {
            series: [{
                pointLabels: {
                    show: showPointLabels
                }
            }]
        });
    }
    makePlot(isShowPointLabels);
    $("#click").click(function () {
        isShowPointLabels = !isShowPointLabels;
        makePlot(isShowPointLabels);
        graph.replot();
    });
}); 
```

在这种情况下，我无法弄清楚如何使用`drawSeries(...)`重新绘制一个系列，正如@Mark 显示的那样`marker`，这将是一个很好的做法。

# twitter - 如何处理 Twitter API 限制？

> ID：10810033
> 
> 赞同：3
> 
> 时间：2012-05-30T04:35:10.887
> 
> 标签：twitter

我有这个基于 Twitter Bot 的项目。不是滥用或垃圾邮件机器人。只是一个机器人，当它被提及时，它会回复有关我的系统的信息。

问题是：我预计每小时有大约 3000 次提及。这意味着我必须每小时发送大约 3000 条回复。

我知道 Twitter API 调用在应用程序通过身份验证时限制为 350/h，而在未通过身份验证时限制为 150/h。但我也在 Twitter 讨论板的某个地方读到它是 1000/h。

无论如何，我该如何处理必须每小时发送这么多回复？

我考虑过创建多个 Twitter 帐户并将一些回复委派给他们，以便能够回复所有这些帐户，但我确实意识到这不是一个很好的解决方案。

有没有人有更好的主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:38:14.307

你最好的选择是使用[Streaming](https://dev.twitter.com/docs/streaming-apis)。

*   [连接](https://dev.twitter.com/docs/streaming-apis/connecting)
*   [API 参数](https://dev.twitter.com/docs/streaming-apis/parameters)(JSON)

基本上，您使用您的凭据打开与他们的服务器的连接，而不是读取返回流并关闭，您只需继续阅读。当您想发出请求时，您只需发送另一个标头或其他内容。

# android - 如何在android中捕捉主页按钮点击？

> ID：10810038
> 
> 赞同：1
> 
> 时间：2012-05-30T04:35:40.253
> 
> 标签：android

从stackoverflow中的答案我发现主页按钮可以被覆盖？但我在安卓市场找到了一个名为“Mxplayer”的应用程序，您可以在播放视频时锁定所有按钮。他们是怎么做到的？我们可以覆盖android中的主页按钮吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T04:40:34.550

此解决方案适用于 2.3，

在您的活动中覆盖以下方法，

```
@Override
public void onAttachedToWindow() {
    super.onAttachedToWindow();
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);           
} 
```

现在像这样处理关键事件，

```
@Override

public boolean onKeyDown(int keyCode, KeyEvent event) {

   if(keyCode == KeyEvent.KEYCODE_HOME)
    {
     Log.i("Home Button","Clicked");
    }
   if(keyCode==KeyEvent.KEYCODE_BACK)
   {

        finish();
   }
return false; 
```

};

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T04:38:20.907

是的你可以。使用以下代码：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_HOME)) {
        //do nothing
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

# c# - 如何授予 sql server 2008 数据库在 c# windows 应用程序中插入来自客户端系统的数据的权限？

> ID：10810041
> 
> 赞同：0
> 
> 时间：2012-05-30T04:36:01.000
> 
> 标签：c#, sql-server-2008, permissions

如何**授予 sql server 2008 数据库**在 c# windows 应用程序中插入来自客户端系统的数据的权限（**我能够从远程服务器的数据库中获取数据，但我无法将数据从客户端系统插入到远程服务器数据库**）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:42:50.807

您需要在`SQL server 2008`数据库中创建一个有权插入数据的用户，并在您的`connection string`.

# java - 设置属性值而不在 JSF 页面上输入

> ID：10810042
> 
> 赞同：0
> 
> 时间：2012-05-30T04:36:35.737
> 
> 标签：java, jsf, jsf-2

我需要在不输入 JSF 页面的情况下设置属性值，如下所示：

```
<ui:repeat var="i" value="#{elBean.list}" iterationStatus="loop" >
    #{i}    // I need to assign this value to a bean property
</ui:repeat> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:38:32.733

你可以加`c:set`

```
<c:set property="i" value="SOME_VALUE"/> 
```

**另见**

*   [构建视图后的 cset 替代方案是什么](https://stackoverflow.com/questions/5901232/what-is-the-alternative-to-cset-after-the-view-is-built)

# php - 从 MySQL 数据库创建静态 HTML 页面并使用 PHP

> ID：10810046
> 
> 赞同：0
> 
> 时间：2012-05-30T04:37:24.443
> 
> 标签：php, mysql, html

我创建了一个网站来显示一些教师的个人资料。每个配置文件页面都使用来自数据库的更多动态信息生成。在我的主页中，我列出了数据库中每位教师的个人资料，并附有指向他完整个人资料的链接。例如。index.php?teacherId=21。现在我需要将我的动态页面转换为基本的静态 HTML 页面，以便为我的网站带来一些好处。第一个是让搜索引擎在我的个人资料页面上排名更高。进一步我需要用老师的名字重命名html页面。以及我的网站有一个搜索选项。它有助于用户根据他们的学科、年级、城镇、城市等搜索教师资料。所以我知道，在我将我的 php 页面制作为基本的 HTML 页面之后，可以在我的网站上创建这样一个搜索系统.. .

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:43:34.800

您正在寻找的是友好的 URL：[SEO 友好的 URL](https://stackoverflow.com/questions/6002203/seo-friendly-url)

您制作的网址如下：

```
/teachers/21/name-of-teacher 
```

然后在内部映射到：

```
/profile/teachers/index.php?id=21 
```

开头的ID是你用来从MySQL加载的；就像 SO 是如何做到的一样 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:52:28.227

研究PHP 的[MVC 框架](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。这些将为您提供搜索引擎友好的网址。

想到的两个是：

1.  [曾德](http://framework.zend.com/)
2.  [蛋糕](http://cakephp.org/)

还有更多，例如[此列表](http://www.phpframeworks.com/)供初学者使用！

# android - Android：移动 SQLite 数据库与在线 (Oracle) 数据库服务器的一种同步方式

> ID：10810049
> 
> 赞同：2
> 
> 时间：2012-05-30T04:37:31.430
> 
> 标签：android, iphone

我正在为 Android/iPhone/BB 设备开发一个应用程序。在第一次启动应用程序时，我想与在线 Oracle 数据库服务器同步并将 SQLite 格式的数据库下载到手机的 SD 卡。下载完成后，应用程序将在没有网络连接的情况下以离线模式工作。当服务器数据库和用户启用网络连接有任何更新时，移动本地数据库必须与服务器数据库同步并将最新的下载到 SD 卡。这种同步方式是否可行。如果可能的话，有人可以指导我。

# html - 绝对存在时找不到 URL 错误

> ID：10810052
> 
> 赞同：0
> 
> 时间：2012-05-30T04:37:43.123
> 
> 标签：html, linux, url, cgi

我在服务器[Linux OS] 上运行了小型 CGI 脚本。以下是脚本输出的一部分..

```
<tr><td valign="center">Lol</td><td valign="center">10112</td><td><a 
href="/home/pathtopdf/abc.pdf">abc.pdf</a></td></tr> 
```

但是当我点击这个 abc.pdf 超链接时，浏览器会显示错误消息：`URL /home/pathtopdf/abc.pdf was not found on the server.`虽然 pdf 和路径肯定存在并且路径中的所有文件和文件夹[包括 pdf] 都具有完全权限。

我的服务器位置是 @`/srv/www`和 script in `/srv/www/cgi-bin`，但是当我将链接放在 pdf 中时，如下所示

```
<tr><td valign="center">Lol</td><td valign="center">10112</td><td><a 
href="/srv/www/for_html/abc.pdf">abc.pdf</a></td></tr> 
```

错误消息是`The requested URL '/srv/www/for_html/abc.pdf' resolves to a file which is marked executable but is not a CGI file; retrieving it is forbidden.`再次获得文件权限。

可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T04:43:10.653

您的问题是您尝试在 webroot 之外请求文件。所以通过点击它，浏览器真的在请求

```
http://example.com/home/pathtopdf/abc.pdf 
```

不是

```
/home/pathtopdf/abc.pdf 
```

您可以编辑您的 apache 配置文件并将虚拟主机添加到子域下的该目录（例如下载）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:46:22.930

编辑后，我假设您`file://`直接在服务器上使用该协议。我想说只是从您`.pdf`的文件权限中删除可执行位。从外壳运行：

```
chmod -x /srv/www/for_html/abc.pdf 
```

# c# - 从 C# 启动的 C++ 对话框不关注打开

> ID：10810055
> 
> 赞同：1
> 
> 时间：2012-05-30T04:38:18.177
> 
> 标签：c#, c++, modal-dialog

在我的应用程序中，我试图从 C# 调用在 c++ 中创建的对话框。我有一个本机 C++ 对话框和一个方法，可以使用`Dialog.DoModal()`.

我所做的是，我编写了一个 CLI 包装器代码来调用将打开对话框的方法。然后我在 C# 中使用了该包装器。

当我调用该方法时，它会在 C++ 中打开对话框，但不会获得焦点。当我尝试单击对话框上的任何按钮时，第一次单击不起作用。然后它得到焦点并从那里开始正常运行。

`SetActiveWindow`我尝试使用和之类的东西`SetForegroundWindow`。我还尝试使用获取 C# Form 句柄`Control.Handle`并将其传递给 C++ 并将其设置为父级。我试过的东西没有用。

有任何想法吗？

C++ 代码：

```
void CCustomDialogDllFunc::CCustomDialogDllFunc(void)
{
    HINSTANCE hInst = LoadLibrary("CustomDialogResource.dll");
    if(hInst != NULL)
        AfxSetResourceHandle(hInst);
}

bool CCustomDialogDllFunc::DlgDisp(void)
{
    CCustomDialog Dlg;
    Dlg.DoModal();

    return false;
} 
```

CLI 包装器：

```
WCustomDialogCall::WCustomDialogCall(void)
{
    dialogdllfunc = new CCustomDialogDllFunc;
}

WCustomDialogCall::DlgDisp(void)
{
    dialogdllfunc->DlgDisp();
} 
```

C＃：

```
void CSMethod()
{

   WCustomDialogCall nativeDialog = new WCustomDialogCall();

   nativeDialog.DlgDisp();

} 
```

# perl - 如何从 CDBI::Search 函数访问特定的返回值？

> ID：10810061
> 
> 赞同：2
> 
> 时间：2012-05-30T04:38:43.827
> 
> 标签：perl, class-dbi

我正在使用一个`DB::CDBI`类来访问我们应用程序中的数据库。我们的项目是面向对象的 Perl。

```
package LT::LanguageImport;
use strict;
use warnings;
use base 'Misk5::CDBI';

__PACKAGE__->table( 'english_text_translation' );
__PACKAGE__->columns( Primary => qw/english language translation/ );
__PACKAGE__->columns( Essential => qw/english language translation/ );
__PACKAGE__->has_a( english => 'LT::EnglishLanguage' ); 
```

在这样一种情况下，我应该检查表中是否存在一行。[我在CDBI](http://p3rl.org/Class%3a%3aDBI)调用中使用内置搜索 API 。

```
sub find_translation {
    my $translation_exists_r_not = $class->search(
        english     => $english,
        language    => $language,
        translation => $translation
    );
    return;
} 
```

`$translation_exists_r_not`正在根据搜索中给出的输入获得预期值。如果行存在，则`_data`使用行详细信息进行更新。

```
$translation_exists_r_not = bless({
        '_data' => [
            {
                'language'    => 'polish',
                'translation' => 'Admin',
                'english'     => 'admin'
            }
        ],
        '_place'  => 0,
        '_mapper' => [],
        '_class'  => 'LT::LanguageImport'
    },
    'Class::DBI::Iterator'
); 
```

如果该行不存在，那么我会得到这样的返回值。

```
$translation_exists_r_not = bless({
        '_data'   => [],
        '_place'  => 0,
        '_mapper' => [],
        '_class'  => 'LT::LanguageImport'
    },
    'Class::DBI::Iterator'
); 
```

我想根据搜索结果`translation`从这个 sub返回值。`find_translation`我无法为此获得最佳状态。

我尝试将其复制`_data`到一个数组中，但我不确定如何进一步进行。就像`_data`一个空的arrayref和另一个条件一样，它在arrayref内会有一个hashref。

```
my @Arr = $translation_exists_r_not->{'_data'}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:15:19.267

CDBI 的[`search`](http://p3rl.org/Class%3a%3aDBI#search)方法将返回一个迭代器，因为根据您的条件可能会返回多行。

如果您知道只有一行符合您的条件，您想使用该[`retrieve`](http://p3rl.org/Class%3a%3aDBI#retrieve)方法，即：

```
if (my $translation_exists_r_not = $class->retrieve(
    english     => $english,
    language    => $language,
    translation => $translation
)){
    return [$translation_exists_r_not->translation,
            'Misk5::TranslationAlreadyExists']
}
else {
    return [ '', undef ]
} 
```

如果您的搜索可以返回多行，并且您只对真实性感兴趣，那么再次，不要在 CDBI::Iterator 内部翻找，而是使用它的方法：

```
my $translation_exists_r_not = $class->search(
    english     => $english,
    language    => $language,
    translation => $translation
); # returns an iterator
if ($translation_exists_r_not){
    my $first = $translation_exists_r_not->first;
    return [ $first->translation, 'Misk5::TranslationAlreadyExists' ]
} 
```

Have a look at [`perldoc Class::DBI`](http://p3rl.org/Class%3a%3aDBI) and [`perldoc Class::DBI::Iterator`](http://p3rl.org/Class%3a%3aDBI%3a%3aIterator). CDBI has excellent documentation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:47:03.223

我想我得到了解决方案。感谢任何试图解决它的人。

```
my @req_array      = %$translation_exists_r_not->{_data};
my $length_of_data = '9';
foreach my $elem (@req_array) {
    $length_of_data = @{$elem};
} 
```

现在检查数组的长度。

```
if ($length_of_data == 0) {
    $error = '';
    $result = [undef, $error];
} 
```

现在检查它是否是一个。

```
if ($length_of_data == 1) {
    my @result_array = @{%$translation_exists_r_not->{_data}};
    my $translation  = $result_array[0]{'translation'};
    $error = 'Misk5::TranslationAlreadyExists';
    $result = [$translation, $error];
}
return @$result; 
```

# php - Symfony2关系返回null，应该返回对象

> ID：10810063
> 
> 赞同：1
> 
> 时间：2012-05-30T04:38:46.550
> 
> 标签：php, symfony

我遇到了一个问题，它无视我所有试图解决它的问题。它可能很简单，我只是在这个上完全筋疲力尽:)

基本上，我想让用户能够将模块（facebook id、bio、文本输入）和资产（图像徽标、pdf 等）添加到页面对象。

我已经为模块和资产与页面建立了单对多关系。

模块按预期工作，但是 Asset 根本不起作用：当 PageController 从其实体调用 getAsset() 时，它为空。在我尝试迭代资产之前没有错误。

此外，在 PageController 中有以下命名空间声明：

```
use Linkme\SiteBundle\Entity\Module;
use Linkme\SiteBundle\Entity\Asset; 
```

如果我删除 Module 声明，我会收到一个错误，但如果我删除 Asset 行，则没有任何变化。因此，我相信这种关系不是建立起来的。

如果我跑

```
app/console doctrine:schema:create --dump-sql 
```

然后除其他外，我得到以下行：

```
ALTER TABLE Asset ADD CONSTRAINT FK_C36E75589D3B65E3 FOREIGN KEY (pageId) REFERENCES Page(id); 
```

这让我认为架构是正确的。它至少了解资产与页面相关

我开始觉得我有错字，或者我完全错过了同样明显的东西 - 任何有关故障排除或其他建议的帮助将不胜感激！

```
app/console --version
Symfony version 2.0.1 - app/dev/debug 
```

页面.php

```
/*
 * @ORM\OneToMany(targetEntity="Asset", mappedBy="pageId", cascade={"persist", "remove"})
 * @ORM\OrderBy({"type" = "ASC"})
 * @ORM\OrderBy({"id" = "ASC"})
 * 
 * @var ArrayCollection $assets
 */
protected $assets;

/**
 * @ORM\OneToMany(targetEntity="Module", mappedBy="pageId", cascade={"persist", "remove"})
 * @ORM\OrderBy({"type" = "ASC"})
 * @ORM\OrderBy({"id" = "ASC"})
 *
 * @var ArrayCollection $modules
 */
protected $modules;

/**
 * Set assets
 * @param Asset $assets
 */
public function setAssets(Asset $assets = null)
{
    $this->assets = $assets;
}

/**
 * Get assets
 *
 * @return Asset
 */
public function getAssets()
{
    echo '<br />Asset is '.gettype($this->assets); //   outut:  Asset is NULL
    return $this->assets;
}

/**
 * Set modules
 * @param Module $modules
 */
public function setModules(Module $modules = null)
{
    $this->modules = $modules;
}

/**
 * Get modules
 * @return Module
 */
public function getModules()
{
    echo '<br />Module is '.gettype($this->assets); //   output:  Module is object
    return $this->modules;
} 
```

资产.php

```
/**
 * @var integer $pageId
 *
 * @ORM\ManyToOne(targetEntity="Page", inversedBy="assets")
 * @ORM\JoinColumn(name="pageId", referencedColumnName="id")
 */
protected $pageId; 
```

模块.php

```
/**
 * @var integer $pageId
 *
 * @ORM\ManyToOne(targetEntity="Page", inversedBy="modules")
 * @ORM\JoinColumn(name="pageId", referencedColumnName="id")
 */
protected $pageId; 
```

页面控制器.php

```
use Linkme\SiteBundle\Entity\Module;
use Linkme\SiteBundle\Entity\Asset;

/**
 * Add modules  and assets to a page
 *
 * @Route("/{id}/wizardmodule", name="page_wizardmodule")
 * @Template()
 */
public function wizardmoduleAction($id)
{
    $em = $this->getDoctrine()->getEntityManager();
    $page = $em->getRepository('LinkmeSiteBundle:Page')->find($id);
    $modules = $page->getModules();
    $assets = $page->getAssets(); 
```

depmod

```
[symfony]
    git=http://github.com/symfony/symfony.git
    version=v2.0.1

[twig]
    git=http://github.com/fabpot/Twig.git
    version=v1.1.2

[monolog]
    git=http://github.com/Seldaek/monolog.git
    version=1.0.1

[doctrine-common]
    git=http://github.com/doctrine/common.git
    version=2.1.1

[doctrine-dbal]
    git=http://github.com/doctrine/dbal.git
    version=2.1.1

[doctrine]
    git=http://github.com/doctrine/doctrine2.git
    version=2.1.1

[swiftmailer]
    git=http://github.com/swiftmailer/swiftmailer.git
    version=v4.1.1

[assetic]
    git=http://github.com/kriswallsmith/assetic.git
    version=v1.0.1

[twig-extensions]
    git=http://github.com/fabpot/Twig-extensions.git

[metadata]
    git=http://github.com/schmittjoh/metadata.git
    version=1.0.0

[SensioFrameworkExtraBundle]
    git=http://github.com/sensio/SensioFrameworkExtraBundle.git
    target=/bundles/Sensio/Bundle/FrameworkExtraBundle
    version=v2.0.1

[JMSSecurityExtraBundle]
    git=http://github.com/schmittjoh/JMSSecurityExtraBundle.git
    target=/bundles/JMS/SecurityExtraBundle
    version=v2.0.1

[SensioDistributionBundle]
    git=http://github.com/sensio/SensioDistributionBundle.git
    target=/bundles/Sensio/Bundle/DistributionBundle
    version=v2.0.1

[SensioGeneratorBundle]
    git=http://github.com/sensio/SensioGeneratorBundle.git
    target=/bundles/Sensio/Bundle/GeneratorBundle
    version=v2.0.1

[AsseticBundle]
    git=http://github.com/symfony/AsseticBundle.git
    target=/bundles/Symfony/Bundle/AsseticBundle
    version=v1.0.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:19:07.423

我得到了它！正如我预测的那样，这是一个令人难以置信的烦人的 PEBKAC....

没有创建关系，因为没有读取注释，因为我在注释评论框中缺少一个 * ..... ddddoooohhhhh！

页面.php

前：

```
/*      <==========================   there is only one * here. It needs to be two: **
 * @ORM\OneToMany(targetEntity="Asset", mappedBy="pageId", cascade={"persist", "remove"})
 * @ORM\OrderBy({"type" = "ASC"})
 * @ORM\OrderBy({"id" = "ASC"})
 *
 * @var ArrayCollection $assets
 */
protected $assets; 
```

后：

```
/**      <==========================   like this.
 * @ORM\OneToMany(targetEntity="Asset", mappedBy="pageId", cascade={"persist", "remove"})
 * @ORM\OrderBy({"type" = "ASC"})
 * @ORM\OrderBy({"id" = "ASC"})
 *
 * @var ArrayCollection $assets
 */
protected $assets; 
```

我只想对所有帮助解决这个问题的人表示非常感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:52:04.470

检查这个： [http ://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#one-to-many-bidirectional](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#one-to-many-bidirectional)

您是否正确地将集合初始化到您的页面构造函数中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:07:46.010

这是因为您没有在 Page 构造函数中初始化 $assets 集合。

```
public function __construct(){
    $this->assets = new ArrayCollection();
} 
```

然后我认为你还没有运行教义：generate:entities 命令，它简化了你的生活，为每个映射字段创建 get、set 和 add 方法。在你的情况下，它会创建一个

```
public function addModules(Module $modules)
{
    $this->modules[] = $modules;
} 
```

请注意，实际上您只是将 $modules 分配给 $this->modules，这是错误的，它是一个数组而不是一个标量。

并且要添加对每个模块引用的页面的引用，您必须添加另一条指令：

```
public function addModules(Module $modules)
{
    $this->modules[] = $modules;
    $modules->setPage($this);
} 
```

我已经在我的代码中完成了这个并且它有效，让我知道它是否也适用于你，再见

Linuxatico

# asp.net - 重定向到其他页面？在asp.net？

> ID：10810069
> 
> 赞同：-3
> 
> 时间：2012-05-30T04:39:15.083
> 
> 标签：asp.net

在 Web 应用程序 [asp.net] 中，我编写代码以重定向到解决方案中的其他页面，但它给出了异常。

```
 Response.Redirect("abc.aspx"); 
```

你能帮帮我吗，谢谢。

```
 WeeklyAttendanceMailStatusBE obj = new WeeklyAttendanceMailStatusBE();

            obj.CreatedBy = Session["xxx"].ToString();
            obj.Sesssionid = Session.SessionID.ToString();
            obj.StatusDate = Convert.ToDateTime(DateTime.Now.Year.ToString() + "-" + DateTime.Now.Month + "-" + DateTime.Now.Day.ToString() + " " + DateTime.Now.Hour.ToString() + ":" + DateTime.Now.Minute.ToString() + ":" + DateTime.Now.Second.ToString());
            obj.Types = "Insert";

            if (radLastWeek.Checked == true)
            {
                obj.Flags = 1;
                obj.LastWeekStatus = 1;
                int result = new WeeklyAttendanceMailStatusBL().InsertWeeklyAttendanceMailStatus(obj);
                if (result > 0)
                {
                    Response.Redirect("abc.html");

                }
                else
                {
                    DateTime dt = DateTime.Now;
                    ScriptManager.RegisterStartupScript(this, GetType(), "message", "<script> alert('Not Submited Mail Status')</status>", false); 
                }
            }
            else
            {
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:48:06.400

可能是因为“线程正在中止”异常，使用 try catch 语句或称为**ThreadAbortException的特定 catch 类处理异常**

请参阅[此](http://forums.asp.net/t/984756.aspx/1)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:03:32.477

试试这个 ：

```
Response.Redirect("abc.aspx",false); 
```

添加第二个参数（布尔值），指示是否停止运行当前页面。参考： [如何：在 ASP.NET 中使用 Response.Redirect 和 Visual Basic .NET](http://support.microsoft.com/kb/312063)

# android - 仅在白天重复警报

> ID：10810070
> 
> 赞同：0
> 
> 时间：2012-05-30T04:39:17.797
> 
> 标签：android, alarmmanager

我需要提醒用户他们的平板电脑只能在一天的特定时间间隔内服用。我知道通知和警报管理器是如何工作的。但不知道我该如何解决我上面提到的问题。有时在两者之间我需要停止/取消那个重复的警报。

任何帮助将不胜感激。

regds, Pratheeja

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:27:18.463

您可以使用您触发的 PendingIntent 通过在 24 小时内添加新警报来在每次警报响起时重置警报。不要忘记添加接收设备启动操作 ( `android.intent.action.BOOT_COMPLETED`) 的 BroadcastReceiver，因为警报会在设备启动时被删除，您必须将警报重置为剩余时间。

# objective-c - 从数据库中检索 NSData，将无法识别的选择器错误发送到 __NSCFString

> ID：10810076
> 
> 赞同：3
> 
> 时间：2012-05-30T04:40:40.940
> 
> 标签：objective-c, cocoa-touch, ios5, uiimage, nsdate

我在转换`NSData`为`UIImage`.

我从设备摄像头捕获图像，并将此图像转换`NSData`为使用 BLOB 数据类型将其存储在 SQLite 中。

图像数据已成功存储在数据库中，但是当我检索图像数据时，应用程序崩溃了。

我使用这段代码：

```
NSData *tempData = [[NSData alloc] init];
tempData = [[arr_img objectAtIndex:indexPath.row] valueForKey:@"Image"];

UIImage *img = [[UIImage alloc] initWithData:tempData]; 
```

并得到这个错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFString bytes]: unrecognized selector sent to instance 0x5f8c000”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:55:50.813

将图像插入 SQLite：

```
sqlite3_bind_blob(compiledStatement,i, [image_data bytes], [image_data length], SQLITE_TRANSIENT); 
```

并从 SQLite 获取图像：

```
NSData *dataForCachedImage = [[NSData alloc] initWithBytes:sqlite3_column_blob(compiledStatement, i) length: sqlite3_column_bytes(compiledStatement, i)];           
UIImage *img = [UIImage imageWithData:dataForCachedImage]; 
```

这里 'i' 是您的数据库列号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:48:05.233

你可以这样做

```
NSData *data = yourData;
UIImage *image = [UIImage imageWithData:data]; 
```

或者

```
NSData *data = yourData;
UIImage *image = [[UIImage alloc] initWithData:data];
[image release]; 
```

如果它确实有效，则意味着您的 NSData 的值可能存在一些问题

# c# - 如何允许从包装在 UpdatePanel 下的控件下载文件？

> ID：10810082
> 
> 赞同：1
> 
> 时间：2012-05-30T04:41:47.563
> 
> 标签：c#, asp.net, updatepanel, httpresponse, datalist

我有一个 Datalist 控件，它在它下面显示缩略图和一个下载图标（ImageButton），Datalist 被包裹在 UpdatePanel 下，当用户单击下载图标时，我调用以下函数以允许在用户端下载文件

```
 protected void dtlSearchDetails_ItemCommand(object source, DataListCommandEventArgs e)
    {
        if (e.CommandName == "dtlImgDownload")
        {
            downloadFile(e.CommandArgument.ToString(), "~/uploads/primary/");
        }
} 
```

功能 ：

```
public void downloadFile(string fileName, string filePath)
{
    Response.ContentType = "application/octet-stream";
    Response.AddHeader("Content-Disposition", string.Format("attachment; filename=\"{0}\"", fileName));
    Response.WriteFile(filePath + fileName);
} 
```

现在，由于`ImageButton`/`Datalist`被包裹在里面`UpdatePanel`，我已经将它注册为一个带有`ScriptManager`on的回发控件`Page_Load`

```
if (dtlSearchDetails.Items.Count > 0)
{
    foreach (DataListItem li in dtlSearchDetails.Items)
    {
        ImageButton img = (ImageButton)li.FindControl("dtlImgDownload");
        ScriptManager.GetCurrent(this.Page).RegisterPostBackControl(img);
   }
} 
```

现在，当我单击下载图标时，什么也没有发生，我在控制台中收到以下错误：

> 未捕获的 Sys.WebForms.PageRequestManagerParserErrorException：Sys.WebForms.PageRequestManagerParserErrorException：无法解析从服务器接收到的消息。此错误的常见原因是通过调用 Response.Write()、响应过滤器、HttpModules 或启用了服务器跟踪来修改响应。

但，

同一页面上还有其他控件，例如搜索按钮，它们位于此 UpdatePanel 之外，但我已将它们注册为

```
<trigger>
    <asp:AsyncPostBackTrigger ControlID="btnKeySearch" />
</trigger> 
```

在同一个更新面板中。

当我单击此搜索按钮，然后单击下载图标时，它的行为完全符合预期（在客户端下载文件），并且控制台中没有错误。

我无法找出此解决方法背后的原因。

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:47:13.013

你`ImageButton`在里面，`DataList`所以你必须在`RegisterPostBackControl`里面做你`DataList`的`ItemDataBound`事件。

```
protected void dtlSearchDetails_ItemDataBound(object sender, DataListItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        var imgBtn = e.Item.FindControl("dtlImgDownload") as ImageButton;
        ScriptManager.GetCurrent(this.Page).RegisterPostBackControl(imgBtn);
        // your other code goes here.
    }
} 
```

# c# - 错误 ListBox 使用 DrawItem 向上滚动 - 向下滚动

> ID：10810083
> 
> 赞同：2
> 
> 时间：2012-05-30T04:42:07.633
> 
> 标签：c#, winforms

我不确定我的列表框，我创建了一个带有项目的列表框，当我向上滚动时没关系，但是当我另外绘制项目图像（图像+项目名称）时，我看到了带有项目名称的图像，但是有上下滚动时出现问题。

什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:28:23.080

您是否考虑过使用 a`ListView`而不是`ListBox`类似于[http://www.codeproject.com/Articles/13006/Extended-ListView](http://www.codeproject.com/Articles/13006/Extended-ListView) 或 [此处](https://stackoverflow.com/questions/1524138/please-help-to-draw-border-for-image-in-listview)

# c# - 将一组实线、虚线笔添加到组合框中

> ID：10810092
> 
> 赞同：0
> 
> 时间：2012-05-30T04:43:23.670
> 
> 标签：c#, winforms

这是这个问题的扩展 [C# override OnDrawItem](https://stackoverflow.com/questions/10805622/c-sharp-override-ondrawitem) 我已经制作了这个自定义组合框类

```
class LineStyleComboBox: System.Windows.Forms.ComboBox
{
    Pen SolidPen;
    Pen DashedPen;
    public LineStyleComboBox()
    {
        this.DropDownStyle = ComboBoxStyle.DropDownList;
        this.DrawMode = DrawMode.OwnerDrawFixed;
    }

    protected override void OnDrawItem(DrawItemEventArgs e)
    {
        float[] dashValues = { 5, 2, 15, 4 };

         if (e.Index > -1) 
         {

             int startX = e.Bounds.Left + 5;
             int startY = (e.Bounds.Y + e.Bounds.Height / 2);

             int endX = e.Bounds.Right - 5;
             int endY = (e.Bounds.Y + e.Bounds.Height / 2);

             using ( SolidPen = new Pen(Color.Blue, (Int32)this.Items[e.Index]))
             {
                 e.Graphics.DrawLine(SolidPen, new Point(startX, startY), new Point(endX, endY));
             }

             using ( DashedPen = new Pen(Color.Blue, (Int32)this.Items[e.Index]))
             {
                 e.Graphics.DrawLine(DashedPen, new Point(startX, startY), new Point(endX, endY));
                 DashedPen.DashPattern = dashValues;
             }
        }
        base.OnDrawItem(e);
    }
} 
```

在我需要使用此 LineStyleComboBox 的另一种形式中，如何将笔样式集合添加为项目。这样我就可以实现一个带有线条样式的组合框作为项目（实心笔，虚线笔）。

```
private void frmDlgGraphOptions_Load(object sender, EventArgs e)
{
    lineStyleComboBox2.Items.Add(solidpen,dashed pen)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:47:29.057

您应该考虑使用嵌入在 WinForms 应用程序中的 WPF 控件。您可以使用 WPF 控件做任何您想做的事情。

这个例子就在你的小巷里。它是一个带有自定义图形项目的组合框。

[http://www.switchonthecode.com/tutorials/wpf-tutorial-using-wpf-in-winforms](http://www.switchonthecode.com/tutorials/wpf-tutorial-using-wpf-in-winforms)

# ios - iPhone Event Kit：以编程方式订阅新日历

> ID：10810095
> 
> 赞同：2
> 
> 时间：2012-05-30T04:43:46.230
> 
> 标签：ios, eventkit, ekeventkit

我被引导到[这个答案](https://stackoverflow.com/questions/3924128/iphone-event-kit-programmatically-create-a-ekcalendar)，它告诉我们如何创建一个离线日历（我认为），但我如何订阅服务器上的 URL，该服务器以 ics 格式吐出日历？这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T21:26:13.887

为什么不使用这个：[如何以编程方式在 iOS 上添加日历订阅？](https://stackoverflow.com/questions/7597051/how-to-programmatically-add-calendar-subscriptions-on-ios)

总结接受的答案：

```
NSString *url = @"http://server/filename.ics";
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]]; 
```

编辑：在我自己的应用程序中使用它并验证它可以工作......

> **由 MitchR 编辑：** 对于那些在服务器上生成自己的 ics 提要的人，url 必须以 .ics 结尾才能接收订阅提示。响应的 MIME 类型也必须是文本/日历。我的服务器是一个 .NET/MVC 服务器，所以我添加了一个自定义路由，这样我就可以在控制器操作的末尾添加 .ics。

# bash - 在 bash 中的远程机器上执行 echo c >sysrq-trigger

> ID：10810099
> 
> 赞同：2
> 
> 时间：2012-05-30T04:44:32.813
> 
> 标签：bash, sh

我正在尝试做一些自动化，其中以下是要求：-

“在机器 B 上从机器 A 运行命令“echo c > /proc/sysrq-trigger”，以便机器 B 崩溃，并且在机器 B 启动后（崩溃后）执行一些其他操作，例如将文件从机器 b 复制到机器 A。”

为此，我尝试了以下两种方法：-

1.  "ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -l root "sh //proc/sysrq-trigger command>"

2.  "ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -l root "sh echo c >/proc/sysrq-trigger >"

在这两种情况下，无密码 ssh 都已设置或将通过期望提供密码。所以密码在这里不是问题。问题是在远程机器B上执行sysrq指令后控制卡住了。它不会回到机器A上，这样我就可以在同一个终端上执行任何其他操作。

```
# ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -l root <Machine B> "echo c > /proc/sysrq-trigger " 
```

警告：将“ca-ostest212.us.oracle.com,139.185.48.212”(RSA) 永久添加到已知主机列表中。root@的密码：

提供密码后，机器 B 崩溃并重新启动，但机器 A 上的提示没有回来。有没有办法解决这个问题，以便提示回来并在机器 A 上执行下一个命令。

PS :- 为这个冗长的查询道歉。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:35:50.413

通过首先在 2 个系统之间创建无密码 ssh 然后从源计算机执行以下命令来实现这一点。

```
ssh -l root <remote machine> "echo c > /proc/sysrq-trigger" & 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T01:56:04.227

我会尝试这样的事情，看看它是否有效：

```
ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -l root <Machine B> "{ sleep 2; echo c > /proc/sysrq-trigger; } & exit" 
```

或者

```
ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -l root <Machine B> "nohup sh -c 'sleep 2; echo c > /proc/sysrq-trigger' & exit" 
```

这个想法是在崩溃的背景下做一个短片`sleep`并立即返回。您可以尝试改变`sleep`间隔。您也可以尝试`-f`、或选项`-n`，但那是在抓住稻草。如果您使用or ，请不要后台处理本地进程（仅限远程内容）。`-t``-T``-f``-n``ssh`

# c++ - 需要的解释：log10 比 log 和 log2 快，但仅限于 O2 和更大

> ID：10810105
> 
> 赞同：30
> 
> 时间：2012-05-30T04:45:24.050
> 
> 标签：c++, performance, math, gcc

我需要在我的一些代码中使用对数函数，但底数并不重要。因此，如果我发现任何显着差异，我开始在 、 和 性能`log()`之间`log2()`进行选择。`log10()`（我将把所说的函数分别称为`ln`、`lb`和`lg`）。

*我为什么要为此大惊小怪？因为我将在优化算法的每次迭代中调用该函数多达 400,000,000 次。这既不是可选的，也不是我问题的主题。*

我设置了一些非常基本的测试，如下所示：

```
timespec start, end;
double sum = 0, m;

clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &start);
for (int n = 1; n < INT_MAX; ++n)
{
    m = n * 10.1;
    sum += log(m);
}
clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &end);

cout << "ln=";
cout << diff(start, end).tv_sec << ":" << diff(start, end).tv_nsec << endl;

... // likewise for log2 and log10 
```

（[timespec diff(timespec start, timespec end)](http://www.guyrutenberg.com/2007/09/22/profiling-code-using-clock_gettime/)如果您愿意的话....）

获得了以下结果：

```
GCC v4.6.3

-O0
ln=140:516853107
lb=155:878100147
lg=173:534086352

-O1
ln=133:948317112
lb=144:78885393
lg=163:870021712

-O2
ln=9:108117039
lb=9:134447209
lg=4:87951676

-O3
ln=9:102016996
lb=9:204672042
lg=4:153153558 
```

我已经查看了 compile 的输出`-S`，但我对汇编程序的掌握还不够好，无法完全理解这些差异。`-S`输出：[-O0 -S](http://pastebin.com/u1m5KE1a) , [-O3 -S](http://pastebin.com/At3GZEZf)

*为什么`lg`使用 O2/O3 可以更好地优化？*

编辑：[源代码](http://pastebin.com/2GrdSiFB)，注意第三个循环中的错字，这是 log10 看起来更快的原因（多。得到优化）。我已经接受了我认为最接近的答案，因为这个问题现在已经结束，尽管我从 drhirsch 和 janneb 的答案中学到了很多东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T08:09:39.237

这将取决于 C 库中 log() 函数的实现、编译器版本、硬件架构等。无论如何，下面我在 x86-64 上使用 GCC 4.4 和 glibc 2.11。

更改示例以便我添加一行

```
cout << "sum=" << sum << endl; 
```

这会阻止编译器优化 log() 调用，正如我在评论中提到的，我得到以下时间（仅整秒，-O2）：

*   日志：98s
*   日志2：105s
*   log10：120s

这些时间似乎与原帖中的 -O0 和 -O1 时间大致一致；在更高的优化级别，日志评估被优化掉，因此 -O2 和 -O3 结果是如此不同。

此外，查看带有“perf”分析器的日志示例，报告中排名前 5 的违规者是

```
 # Samples: 3259205
#
# Overhead         Command              Shared Object  Symbol
# ........  ..............  .........................  ......
#
    87.96%             log  /lib/libm-2.11.1.so        [.] __ieee754_log
     5.51%             log  /lib/libm-2.11.1.so        [.] __log
     2.88%             log  ./log                      [.] main
     2.84%             log  /lib/libm-2.11.1.so        [.] __isnan
     0.69%             log  ./log                      [.] log@plt 
```

除 main 之外，所有其他符号都与 log() 调用有关。总结这些，我们可以得出结论，这个例子总运行时间的 97% 都花在了 log() 中。

__ieee754_log 的实现可以[在 glibc git repo](http://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/ieee754/dbl-64/e_log.c;hb=HEAD)中找到。相应地，其他实现是：[log2](http://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/ieee754/dbl-64/e_log2.c;hb=HEAD)，[log10](http://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/ieee754/dbl-64/e_log10.c;hb=HEAD)。请注意，之前的链接指向 HEAD 版本，对于已发布的版本，请参阅其相应的分支

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T12:35:46.737

不幸的是，OP 未能向我们展示原始代码，他选择将代码稍微混淆，将其转换为汇编。

在汇编代码中，OP 链接（我的注释）：

```
.L10:
    cvtsi2sd %ebx, %xmm0         // convert i to double
    xorpd    %xmm1, %xmm1        // zero 
    mulsd    .LC0(%rip), %xmm0   // multiply i with 10.1
    ucomisd   %xmm0, %xmm1       // compare with zero
    jae       .L31               // always below, never jump

    addl    $1, %ebx             // i++
    cmpl    $2147483647, %ebx    // end of for loop
    jne     .L10
    ...
.L31:
    call    log10, log2, whatever...  // this point is never reached 
```

可以看到调用`log`永远不会被执行，特别是如果你使用 gdb 单步执行它。所有代码都是 2 ^(31)次乘法和双精度比较。

这也解释了使用 编译时 log 函数的执行速度惊人地提高了 30 倍`-O2`，以防有人也发现这很奇怪。

编辑：

```
for (int n = 1; n < INT_MAX; ++n)
{
    m = n * 10.1;
    sum += log(m);
} 
```

编译器无法完全优化循环，因为她无法证明调用`log`将始终成功 - 如果参数为负，它会产生副作用。因此，她通过与零的比较来替换循环 -`log`只有在乘法的结果小于或小于零时才执行。这意味着它永远不会被执行:-)

留在循环中的是乘法和测试，如果结果可能是否定的。

如果我添加`-ffast-math`到编译器选项，会产生一个有趣的结果，这使编译器从严格的 IEEE 合规性中解脱出来：

```
ln=0:000000944
lb=0:000000475
lg=0:000000357 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-30T08:20:08.600

我注意到了一些事情。如果我编译（GCC 4.5.3）你的汇编程序列表`-O3 -S`，`g++ logflt.S -lrt`我可以重现该行为。我的时间是：

```
ln=6:984160044
lb=6:950842852
lg=3:64288522 
```

然后我用 . 检查了输出`objdump -SC a.out`。我更喜欢这个而不是查看`.S`文件，因为有些结构我（还）不理解。代码不是很容易阅读，但我发现以下内容：

在调用`log`或`log2`使用转换参数之前

```
400900:       f2 0f 2a c3             cvtsi2sd %ebx,%xmm0
400904:       66 0f 57 c9             xorpd  %xmm1,%xmm1
400908:       f2 0f 59 05 60 04 00    mulsd  0x460(%rip),%xmm0
40090f:       00 
400910:       66 0f 2e c8             ucomisd %xmm0,%xmm1 
```

`0x460(%rip)`是一个指向 hex-value 的相对地址`0000 00000000 33333333 33332440`。这是一个 16 字节的 SSE`double`对，其中只有一个双精度是重要的（代码使用标量 SSE）。这双是`10.1`. `mulsd`因此在 C++ 行中执行乘法`m = n * 10.1;`。

`log10`是不同的：

```
400a40:       f2 0f 2a c3             cvtsi2sd %ebx,%xmm0
400a44:       66 0f 57 c9             xorpd  %xmm1,%xmm1
400a48:       66 0f 2e c8             ucomisd %xmm0,%xmm1 
```

**我认为对于`log10`您忘记执行乘法的情况！**所以你只是`log10`一次又一次地用相同的值调用...如果cpu足够聪明来优化它，我不会感到惊讶。

编辑：我现在非常确定这是问题所在，因为在您的其他清单 ( `-O0 -S`) 中正确执行了乘法 - 所以**请发布您的代码**并让其他人证明我错了！

EDIT2：GCC*可以*摆脱这种乘法的一种方法是使用以下标识：

```
log(n * 10.1) = log(n) + log(10.1) 
```

但在那种情况下`log(10.1)`，必须计算一次，我看不到这个代码。我也怀疑 GCC 是否会为and这样做，`log10`但不会这样做。`log``log2`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-30T07:37:23.140

您正在错误地处理问题并且正在得出结论。

使用时钟不足以进行分析。使用体面的分析器而不是时钟（gprof 或 AQTime7）。Profiler 必须能够提供每行时间。您的问题是您假设瓶颈在于日志功能。然而，整数到浮点数的转换并不是很快，也可能是一个瓶颈。另一件事是 gcc 带有您可以阅读的源代码。

现在，**假设**瓶颈实际上存在于日志函数中：

正如您应该知道的那样，双打的精度有限——只有 15..17 位十进制数字。这意味着使用较大的对数基数，您将更快地达到精度限制时的情况。

即`10^(log10(2^32) + 10^-15) - 2^32`== `9.8895 * 10^-6`，但是`2^(log2(2^32) + 10^-15) - 2^32`==`2.977 * 10^-6`和`100^(log100(2^32) + 10^-15) - 2^32`== `0.00001977`，也`log2(INT_MAX) > log10(INT_MAX)`意味着对数基数较大，如果对数函数试图“搜索”正确的结果，它会很快遇到由于四舍五入而无法修改预测结果的情况关闭错误。然而，这仍然只是一个猜测。

还有其他计算对数的方法。例如，`log10(x) == ln(x)/ln(10)`如果对数函数以这种方式计算，您将得到几乎相似的时间。

我的建议是（停止浪费时间）用时钟功能以外的东西来分析你的程序（重新发明轮子是个坏主意，不使用现有的分析工具就是重新发明轮子，加上一个好的分析器将能够提供 per-日志函数中的行计时），读取日志函数的 gcc 源代码（毕竟它是可用的）和汇编输出。如果您不了解汇编输出，这将是学习如何阅读它的好机会。

如果拥有更快的对数函数真的很重要，并且算法优化真的是不可能的（如果对数真的是一个瓶颈，你可以缓存结果，例如）你可以尝试找到更快的算法实现，但如果我是你在这种情况下，我只是尝试将硬件放在问题上——例如，通过并行化任务。

# ruby - Ruby：如何在 testrb 中获取颜色

> ID：10810107
> 
> 赞同：0
> 
> 时间：2012-05-30T04:45:25.033
> 
> 标签：ruby, ruby-1.9.2, ruby-1.9.3, ruby-1.9

有什么方法可以通过 testrb 获取颜色，而不涉及将 test-unit 添加到 gemfile 并在 1.9 上使用 bundle exec（1.8 中的所有颜色）？

*   `ruby test/xxx_test.rb`-> 颜色
*   `testrb test/xxx_test.rb`-> 没有颜色
*   将 test-unit 添加到 gemfile 和`bundle exec testrb test/xxx_test.rb`-> 颜色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:12:10.103

`--use-color=yes`诀窍......好在它没有记录：D

# java - RedBlackTree Mark Allen Weis 移除（x）顶部底部方法

> ID：10810111
> 
> 赞同：0
> 
> 时间：2012-05-30T04:45:39.887
> 
> 标签：java, red-black-tree

来自[Data Structures and Problem Solving Using Java的原始 Mark Allen Weis RedBlackTree 实现在](https://rads.stackoverflow.com/amzn/click/com/0321541405)[这里](http://pastebin.com/Gg3YbPUg)找到。

我似乎无法理解从树中删除节点的问题。在阅读了[维基百科资源](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)后，我注意到“is_leaf()”函数。这个和 Mark Weis 实现的问题是没有办法分辨哪个节点是叶子，哪个不是叶子

```
void delete_one_child(struct node *n)
{
    /*
     * Precondition: n has at most one non-null child.
     */
    struct node *child = is_leaf(n->right) ? n->left : n->right;

    replace_node(n, child);
    if (n->color == BLACK) {
            if (child->color == RED)
                    child->color = BLACK;
            else
                    delete_case1(child);
    }
    free(n);
} 
```

Is_Leaf java实现

```
public boolean isLeaf(){
if(left == null && right == null){
return false;
}
return true;
} 
```

控制台输出

```
value=1 color=1 leaf=true left=null right=14
value=2 color=1 leaf=true left=null right=5
value=5 color=0 leaf=true left=null right=null
value=7 color=0 leaf=true left=2 right=11
value=8 color=0 leaf=true left=null right=null
value=11 color=1 leaf=true left=8 right=null
value=14 color=1 leaf=true left=7 right=15
value=15 color=1 leaf=true left=null right=null 
```

树格式（来自控制台）

```
└── (1) 1
    └── (1) 14
        ├── (0) 7
        │   ├── (1) 2
        │   │   └── (0) 5
        │   └── (1) 11
        │       └── (0) 8
        └── (1) 15 
```

规则：

1.  根是黑色的
2.  每个红色节点都有一个黑色父节点
3.  红色节点的任何子节点都是黑色的 - 红色节点不能有红色子节点
4.  从根到叶的每条路径都包含相同数量的黑色节点

所以我的问题是如何实现从[这个](http://pastebin.com/Gg3YbPUg)红树和背树的实现中删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:59:53.187

我认为这是正确的 isLeaf() 代码：

```
public boolean isLeaf(RedBlackNode<AnyType> t ){
    if(t.left.element == null && t.right.element == null){
        return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:04:09.510

您是在问如何实现 isLeaf() 吗？如果是这样，您应该传递 isLeaf 您要检查的节点。

```
public boolean isLeaf(RedBlackNode<AnyType> t ){
if(t.left == null && t.right == null){
return false;
}
return true;
} 
```

否则，算法本身看起来是正确的，唯一真正的工作是将 C 翻译成 Java，这很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:12:26.297

您必须检查`nullnode`而不是`null`：

```
public boolean isLeaf() {
    if(left == nullnode && right == nullnode) {
        return false;
    }
    return true;
} 
```

# wcf - 如何在 wcf 服务中定义端点（服务器和客户端）

> ID：10810114
> 
> 赞同：2
> 
> 时间：2012-05-30T04:46:10.057
> 
> 标签：wcf, wcf-client

在向我的类文件添加服务引用时，将另一个名为 app.config 的配置文件添加到类中。所以端点应该在哪里定义——它应该在解决方案的配置文件中还是在类>中创建的新配置文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:54:49.580

server() 中定义的端点`web.config`用于向其他人公开 Web 服务。
Client( `app.config`) 中定义的端点用于指定应用程序应连接到哪个服务。
因此，您必须在客户端和服务器
PS 中定义端点，绑定配置应该是 web.config 和 app.config 中的标识。

# java - 模拟单击按钮时的延迟

> ID：10810116
> 
> 赞同：1
> 
> 时间：2012-05-30T04:46:29.463
> 
> 标签：java, android

我确实有一个按钮，当单击此按钮时，我想做一些操作并将它们恢复回来，让我们说 5 秒。例如，当单击按钮 A 时，TextA.Text 变为“已单击”5 秒，在 5 秒内文本的值应恢复到原来的值。这是我所拥有的，但我觉得这是完全错误的方式。延迟的代码：

```
diff=time2-time1;

            while (diff<5000) {
                //Log.d("Timer is", String.valueOf(diff));
                time2=System.currentTimeMillis();
                diff=time2-time1;
            } 
```

所以直到循环正在运行它的模拟延迟，并且在我做了我想要的之后。有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T04:50:09.633

使用[Handler](http://developer.android.com/reference/android/os/Handler.html)，如下所示：

```
new Handler().postDelayed(new Runnable() {
    void run() {
        // do something later
    }
}, 5000); 
```

编辑：请注意，此解决方案允许主线程在延迟期间继续 - 刷新 GUI、正确处理活动更改（例如“主页”按钮）等。使用`Thread.sleep()`不会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T04:49:25.167

你有一个方法来做到这一点：

```
Thread.sleep(5000) 
```

它可以抛出一个 InterruptedException，所以你必须抓住它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T04:50:20.973

繁忙的循环是一个坏主意 - 它会消耗你的电池。也许[`Thread.sleep`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#sleep%28long%29)会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T04:52:08.497

试试这个代码，

```
// First save the current value of Textbox in a variable 
String tmpVal = myEditText.getText();
// Now Setting of new Value for 2 seconds 
myEditText.setText ( "Clicked" );
// Sleeping for 5 seconds
try
{
     Thread.sleep(5000);
}
//Now Returning back to your old value
myEditText.setText ( tmpVal ); 
```

上述所有代码都进入`public void onClick(View v)`方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T04:56:09.100

您可以在 Onclick 上获得视图并可以使用

```
@Override
public void onClick(final View v) {
    if(v.getId() == R.id.button1) {

    if(isClikcalbe ){
isClikcalbe  = false;
      view.postDelayed(new Runnable() {

            @Override
            public void run() {

                // you code 
                 isClikcalbe = true;
            }
        }, 5000);
   }

    }
} 
```

也可以使用 bollean isClikcalbe 停止新的点击，直到无法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T04:55:01.393

您可能希望将 AsyncTasks 视为您完成工作的容器。此外，您可以在其中调用 Thread.sleep。工作完成后可以要求 Handler 对象更改标题。

在 AsyncTask 中执行它而不只是让主线程休眠的原因是您的应用程序不会“冻结”。以下是您可以使用它的方法：

```
private class AsyncHttpRequest extends AsyncTask<Void, Void, Void>{
        @Override
        protected Void doInBackground(Void... params) {
            Thread.sleep(5000);
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            _jobHandler.sendEmptyMessage(0);
        }
    }

protected Handler _jobHandler = new Handler() {
        @Override
        public void dispatchMessage(Message msg) {
            // set the caption here
        }
    }; 
```

# c# - Dispatcher.BeginInvoke() 是否以原子方式工作？

> ID：10810123
> 
> 赞同：2
> 
> 时间：2012-05-30T04:47:48.417
> 
> 标签：c#, wpf, multithreading, dispatcher

我找不到这个简单问题的答案：BeginInvoke() 是否保证以原子方式执行被调用的委托？例如，如果我有类似的东西

```
public ObservableCollection<string> Items;
public int TotalLenght;

delegate void AddItemDelegate(string arg);
Dispatcher _dispatcher=Dispatcher.CurrentDispatcher;

void StartExecute()
{
    for (int index = 0; index < 10; index++)
    {
        Thread th=new Thread(Run);
        th.Start();
    }
}

void Run()
{
    string item = DoLongRandomDuringCalculations(); 
    _dispatcher.BeginInvoke(new AddItemDelegate(AddItem), item);
}

void AddItem(string item)
{
    Items.Add(item);
    TotalLength += item.Length;
    TakeSnapshot();
} 
```

我是否可以放心，集合的更新和其他成员的更新总是同步的，如果一个计算线程在另一个线程正在更新的过程中准确地调用 BeginInvoke？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T06:23:46.827

您将从所有调用的方法在同一线程上运行的事实中获得强有力的保证。因此，按照设计，它们必须按顺序运行，并且永远不能重叠。所以 Items 集合是完全安全的，不需要锁定，原子性不是问题。

然而，当线程完成时，集合中项目的确切顺序是完全不确定的。

# php - PHP MySQL 连接已关闭

> ID：10810129
> 
> 赞同：2
> 
> 时间：2012-05-30T04:49:07.210
> 
> 标签：php, mysql

我一直想知道的是，似乎几乎没有 PHP 应用程序会显式关闭 MySQL 连接`mysqli_close()`。

这是如何运作的？脚本停止执行时 PHP 会自动关闭 MySQL 连接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:54:05.843

是的，连接将被关闭，除非它是一个持久连接（[`p:`在 host 之前](http://www.php.net/manual/en/mysqli.construct.php#refsect1-mysqli.construct-parameters)打开）。非持久性资源在脚本结束时自动释放，因为不再有对它们的引用。

[从 PHP 手册](http://www.php.net/manual/en/language.types.resource.php#language.types.resource.self-destruct)：

> 感谢 PHP 4 的 Zend 引擎引入的引用计数系统，自动检测到不再引用它的资源，并被垃圾收集器释放。因此，很少需要手动释放内存。

# java - 你能回收 Domino 对象的向量吗？

> ID：10810131
> 
> 赞同：3
> 
> 时间：2012-05-30T04:49:18.250
> 
> 标签：java, lotus-domino, recycle

我制作了一个 Domino ViewEntries 对象向量（它们可以是文档或任何 Domino 对象）。这不是 ViewEntryCollection 也不是 DocumentCollection。列表对象是一个 Vector（它甚至可以是一个 ArrayList）。我知道这个关于回收特定对象的[技术](http://www-304.ibm.com/support/docview.wss?uid=swg21097861)说明，但是处理列表中的对象并不清楚

我需要单独回收 Vector 中的所有元素吗？或者我可以简单地删除它们吗？如果我想回收元素向量，我该怎么做？是否可以使用向量，或者应该使用不同类型的列表构造来完成？

这个例子让我相信它实际上不会回收它们......讨论。

```
Vector entries = new Vector();
..... add each ViewEntry to the collection....
for (int i=0;i<entries.size();i++) {
     ((ViewEntry) entries.elementAt(i)).recycle();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T05:09:08.813

容器中的 Domino 对象仍然是 Domino 对象，因此您必须`recycle`在每个元素上调用以回收其内存。

您包含的代码完成了这个任务，没有办法用更少的`recycle()`调用来完成这个任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:26:22.567

recycle() 方法将删除所选 Java 对象的后端对象。请注意，它还会删除可能同时引用完全相同的 JNI 引用的任何其他 Java 对象的后端对象。

它还将回收通过该类创建的任何对象。例如，如果您回收 NotesCollection，它应该回收通过 NotesCollection 引用的所有文档。或者更明显的是，回收 Session 对象将回收一切。

在循环中回收的原因是出于内存目的。如果您将文档存储在向量中，请小心，因为您将每个完整的物理文档都保存在内存中。最好存储 UNID 并根据需要拉入文档。或者，如果引用视图，则拉取 ViewEntry 而不是文档。因为它将使用更少的内存。

Bobs Balaban 的博客文章对此进行了详细的介绍。

[http://www.bobzblog.com/tuxedoguy.nsf/dx/geek-o-terica-5-taking-out-the-garbage-java](http://www.bobzblog.com/tuxedoguy.nsf/dx/geek-o-terica-5-taking-out-the-garbage-java)

[http://www.bobzblog.com/tuxedoguy.nsf/dx/geek-o-terica-6-now-it-gets-complicated-java-garbage-collection-notes-and-threads](http://www.bobzblog.com/tuxedoguy.nsf/dx/geek-o-terica-6-now-it-gets-complicated-java-garbage-collection-notes-and-threads)

[http://www.bobzblog.com/tuxedoguy.nsf/dx/geek-o-terica-7-garbage-threads-and-the-corba-classes-in-notes](http://www.bobzblog.com/tuxedoguy.nsf/dx/geek-o-terica-7-garbage-threads-and-the-corba-classes-in-notes)

# bash - 在 bash 脚本中需要帮助

> ID：10810139
> 
> 赞同：-1
> 
> 时间：2012-05-30T04:50:11.753
> 
> 标签：bash, shell

> **可能重复：**
> [在 bash 脚本和 awk 命令中需要帮助](https://stackoverflow.com/questions/10530642/need-help-in-bash-script-and-awk-command)

我需要一个 bash 脚本来递归地打印目录名和文件名。例如：我有一个目录结构，如：

```
/earth/plants/flowers/rose/rose.jpg.
/earth/plant/fruits/apple/apple.jpg.
/earth/animals/carni/lions.jpg
/earth/animals/herbi/omni/dog.jpg 
```

现在我需要像这样列出这些文件和文件夹——我的意思是我的 O/P 应该是，

```
planet=earth
category=animal (plant) 
sub cat = carni 
name = lion.jpg. 
```

在某些地方，我还有其他目录也.like `/earth/animals/carni/jungle/lions.jpg`。

然后我还需要显示该`lions.jpg`文件大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:03:26.377

这可能会让你成为那里的一部分......

```
find /earth | sed -e 's/\// /' | awk '{ print "planet = " $1 "\ncategory = " $2 "\nsubcat = " $3 "\nname = " $4}' 
```

我会把它拆开，以便其他人可以改进/修改

```
find /earth 
```

find 只是转储 /earth 目录的所有内容的列表

```
sed -e 's/\// /' 
```

我用空格字符替换了所有正斜杠，这样我就可以轻松地将单词分开。我可以通过告诉 awk 使用正斜杠作为分隔符来完成这一步，但这可能（或可能不会）对未来的修订有用，所以我留下它。

```
awk '{ print .... }' 
```

我告诉 awk 打印问题中列出的各种类别的输入。$1 表示第一个令牌。$2 第二个令牌，依此类推。awk 也理解换行符“\n”。

如果您有多个子类别，我不确定该怎么做，但这应该会让您接近。

# javascript - Javascript：在各种浏览器中是否有与 caniuse.com 等效的 HTML5 API/ECMAScript5/ECMAScript6？

> ID：10810140
> 
> 赞同：14
> 
> 时间：2012-05-30T04:50:13.827
> 
> 标签：javascript, html, ecmascript-5, ecmascript-harmony

在各种浏览器中是否有与 caniuse.com 等效的 HTML5 API/ECMAScript5/ECMAScript6？

caniuse.com 确实有一些 javascript 覆盖，但是像[http://caniuse.com/#feat=filesystem](http://caniuse.com/#feat=filesystem)这样的页面并没有真正告诉你除了 yes/no/partially 之外的任何内容。实际上，我正在寻找类似 quirksmode 与 caniuse 交叉的东西，在那里我可以详细查看任何 API 或方法，并查看它当前在哪里实现（并且没有错误）。例如，一个网站，我可以查看哪些浏览器的哪些版本当前可以使用它：

```
Object.keys(CONSTANTS.TEXT).forEach(function(key) {
    languages.push([key, CONSTANTS.TEXT[key].languageName]);
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T11:50:51.423

刚刚在对另一个问题的引用中发现了类似的内容。ES5： http: [//kangax.github.com/es5-compat-table/](http://kangax.github.com/es5-compat-table/) ES6：[http://kangax.github.com/es5-compat-table/es6/](http://kangax.github.com/es5-compat-table/es6/)非标准化：http : [//kangax.github.com/ es5-compat-table/非标准/](http://kangax.github.com/es5-compat-table/non-standard/)

# python - Python：语法不起作用

> ID：10810144
> 
> 赞同：0
> 
> 时间：2012-05-30T04:50:41.533
> 
> 标签：python

我有这个 Python 代码：

```
file2.write(link) + '\n' + '\n' + '\n' 
```

为什么它不起作用，但以下是：

```
file2.write((link) + '\n' + '\n' + '\n') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T04:55:12.987

前者调用函数，然后将字符串添加到结果中，这很可能是无效的，而且肯定是不正确的。后者将字符串加在一起并调用函数，传递加法的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:59:04.360

write 函数的括号应包含您要写入文件的所有内容。在第一个示例中，您编写（链接），然后在完成后给出一堆无意义的换行符。

在第二个示例中，您编写（链接 + 换行符），写入函数的右括号仅在末尾出现。因此，这是有效的。（虽然 write( (link) ) 有点矫枉过正）

总之：使用源代码编辑器为您突出显示匹配的括号。它使这些错误更容易被发现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T04:59:42.683

```
file2.write(link) + '\n' + '\n' + '\n' 
```

您正在将`link`变量的内容写入文件`file2`。如果成功，此调用将返回 None，并且您将字符串`'\n'`连接到此结果。最后，只有`link`变量的内容会在文件中`file2`。

```
file2.write((link) + '\n' + '\n' + '\n') 
```

您首先将`link`变量的内容连接到字符串`'\n'`，使用括号将优先级设置为字符串连接。然后将它们全部写入文件`file2`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T05:01:02.433

当你调用时`file2.write()`，`write()`对象是一个函数`file2`。`link`是函数的参数，它是一个字符串。当您编写时，`+ '\n' + '\n' + '\n'` 该表达式的计算结果为字符串`"\n\n\n"`。如果您想编写`link`该字符串，则必须将它们作为一个字符串参数传递给函数`write()`。这是由`file2.write((link) + '\n' + '\n' + '\n')`. 否则，您只是调用函数并尝试将字符串连接到函数调用的返回值。

# c++ - Opencv2.3 和 Qt Creator 2.4.1 链接器错误

> ID：10810145
> 
> 赞同：3
> 
> 时间：2012-05-30T04:50:47.713
> 
> 标签：c++, qt, opencv

我正在运行 opencv 和 qt。我已成功添加了 opencv 的包含。但是当我执行 cvLoadImage 时，出现链接器错误。

这是我的代码：

```
void MainWindow:on_pushButton_clicked()
{

img = cvLoadImage("C:\\Users\\MLS-PROGRAMER\\Documents\\Visual Studio 2010\\Projects\\Image_processing\\Image_processing \\thres.png");
// cvNamedWindow("Image",CV_WINDOW_AUTOSIZE);
// cvShowImage("Image", img);
// cvWaitKey(40);

} 
```

这是错误消息：

```
mainwindow.obj:-1: error: LNK2019: unresolved external symbol _cvLoadImage referenced in function "private: void __thiscall MainWindow:n_pushButton_clicked(void)" (?on_pushButton_clicked@MainWindow@@AAEXXZ)

debug\FIDAS.exe:-1: error: LNK1120: 1 unresolved externals 
```

我的项目文件是这样的

```
#-------------------------------------------------
#
# Project created by QtCreator 2012-05-29T10:31:40
#
#-------------------------------------------------

QT += core gui

TARGET = FIDAS
TEMPLATE = app

SOURCES += main.cpp\
mainwindow.cpp

HEADERS += mainwindow.h

FORMS += mainwindow.ui

INCLUDEPATH += C:\OpenCV2.3\opencv\build\include\opencv2\core \
C:\OpenCV2.3\opencv\build\include\opencv \
C:\OpenCV2.3\opencv\build\include\opencv2\imgproc \
C:\OpenCV2.3\opencv\build\gpu\x64\lib \

CONFIG(release,debug|release)
{
LIBS += C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_calib3d231.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_contrib231.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_core231.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_features2d231.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_flann231.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_gpu231.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_haartraining_engine.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_highgui231.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_imgproc231.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_legacy231.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_ml231.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_objdetect231.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_ts231.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_video231.lib \
}

CONFIG(debug,debug|release)
{
LIBS += C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_calib3d231d.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_contrib231d.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_core231d.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_features2d231d.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_flann231d.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_gpu231d.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_haartraining_engined.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_highgui231d.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_imgproc231d.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_legacy231d.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_ml231d.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_objdetect231d.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_ts231d.lib \
C:\OpenCV2.3\opencv\build\gpu\x64\lib\opencv_video231d.lib \
} 
```

对这个问题的任何帮助都会很棒。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:18:15.437

您实际上应该指定链接路径（在哪里可以找到库），然后是要链接的库列表：

```
LIBS += -L C:\OpenCV2.3\opencv\build\gpu\x64\lib -lopencv_contrib231 -lopencv_core231 -lopencv_features2d231 ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T05:41:43.970

我在自己的项目中使用这样的配置：

```
LIBS += D:/OpenCV-2.3.0/build/lib/libopencv_core230.dll.a 
```

我使用 C++ API 而不是使用 C API，即`imread`而不是`cvLoadImage`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T13:30:09.153

[第 8 步](http://doc.qt.nokia.com/qtcreator-2.3/creator-project-qmake-libraries.html)针对所有架构进行了描述。

基本上，您必须使用 -L 指定库路径，然后使用添加库文件

`-l<libname_without_extension>`

对于 unix（安装在默认位置）：

```
unix: LIBS += -lopencv_core
unix: LIBS += -lopencv_highgui 
```

对于 Windows（您的问题）：

```
win32: LIBS += -L C:\OpenCV2.3\opencv\build\gpu\x64\lib\ -lopencv_core231 
```

# javascript - 在 .NET 和 JavaScript 中存储一个字符需要多少字节？

> ID：10810148
> 
> 赞同：0
> 
> 时间：2012-05-30T04:50:53.637
> 
> 标签：javascript, .net

存储一个字符需要多少字节：

*   Microsoft 对 .NET 框架的实施，第 4 版
*   由 Microsoft Internet Explorer 8 实现的 JavaScript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:56:42.997

.net 和 JavaScript 都是 UTF-16：

> 将每个 Unicode 代码点表示为一个或两个 16 位整数的序列。大多数常见的 Unicode 字符只需要一个 UTF-16 代码点，尽管 Unicode 补充字符（U+10000 和更大）需要两个 UTF-16 代理代码点。支持 little-endian 和 big-endian 字节顺序。

所以它可以是16位或32位。

*   [字符网](http://msdn.microsoft.com/en-us/library/system.char.aspx)
*   [JavaScript 字符串中有多少字节？](https://stackoverflow.com/questions/2219526/how-many-bytes-in-a-javascript-string)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:59:04.457

[.NET](http://msdn.microsoft.com/en-us/library/system.string.aspx#Characters)和[JavaScript](http://bclary.com/2004/11/07/#a-4.3.16)都使用[UTF-16](http://en.wikipedia.org/wiki/UTF-16)。UTF-16 是一种所谓的*可变长度*编码，它使用 16 位*代码单元*来表示 Unicode*代码点*（长度为 21 位）。历史上它来自[UCS-2](http://en.wikipedia.org/wiki/UCS-2)，当时 Unicode 仍然是 16 位代码（后来被认为不够用，因此扩展到 21 位）。

由于 UTF-16 使用 16 位代码单元，因此代码*本身*是 16 位代码，但要表示一个*字符*，您必须更接近您的实际意思：

1.  *Unicode 意义上的字符表示*Unicode**代码点*，这可能是您的预期含义。这里有两种情况：*

     *1.  U+0000 到 U+FFFF 范围内的代码点占用两个字节，因为它可以用单个 UTF-16 代码单元表示（这里代码单元和代码点是相同的）。
    2.  U+10000 到 U+10FFFF 范围内的代码点占用四个字节，因为它必须使用*两个*UTF-16 代码单元来表示。* 
**   通常意义上的字符通常指的是字*素*，实际上，这就是我们认为的单个字符。这些可以有任意多个变音符号，或者可能是由渲染引擎由多个代码点形成的连字。在这种情况下长话短说：这些可以任意长，因为它们可以包含多个代码点。*

# qt - 在 QT 中动态添加表格视图

> ID：10810150
> 
> 赞同：0
> 
> 时间：2012-05-30T04:51:02.233
> 
> 标签：qt, dynamic, widget, tableview

如何在 QT 中动态添加多个表视图？表格视图不应与屏幕中的其他/其他小部件重叠

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:24:08.567

用于动态创建表视图

```
QTableView *t1=new QTableView(this);
QTableView *t2=new QTableView(this); 
```

用于处理彼此重叠的问题

```
t1->setGeometry(x_pos,y_pos,width1,height1);
t2->setGeometry(x_pos+t1->geometry().width(),y_pos,width2,height2);
t1->show();
t2->show(); 
```

您必须跟踪其他小部件的位置并相应地设置几何图形。

# git - 在 Git 分支中保留特定文件的不同内容

> ID：10810151
> 
> 赞同：9
> 
> 时间：2012-05-30T04:51:03.173
> 
> 标签：git, deployment, version-control, configuration

我有一个`config.php`假设在不同分支中的内容不同，例如`testing`和`master`。

我在另一个问题（[防止将来自 master 的文件与 Git 合并](https://stackoverflow.com/questions/10779235/prevent-merging-a-file-from-master-with-git)）问过如何防止该文件合并。

但我想知道，这是正确的方法吗？

我相信这是一个很常见的用例，在不同的环境中有不同的配置文件，并且您希望跟踪配置，对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T06:13:09.577

对于配置文件，一种解决方案是不对其进行版本化（这样，没有合并问题！）

您将使用[内容过滤器驱动程序](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728)：

![内容过滤器驱动程序](../Images/9213f678bdbf2b6aa97e5b26e5340c33.png)

你会版本：

*   一个值文件（用于`master`环境）
*   一个值文件（用于`dev`环境）
*   一个模板文件（带有占位符变量，如`@PORT_NUMBER@`）
*   一个“ `smudge`”脚本能够基于当前分支并[基于签出文件](https://stackoverflow.com/questions/2059326/git-equivalent-of-subversions-url-keyword-expansion/2059393#2059393)（此处为模板文件）的内容来生成实际的配置文件（仍然是“私有”，即未版本化）。
*   一个“ `clean`”脚本能够检测私有配置文件中的任何值更改，并将这些更改的值存储回（版本化）值文件中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T06:41:23.397

执行此操作的经典方法是拥有一个名为*config.yml-dist*的默认配置文件（假设您的原始文件名为*config.yml*）；您将原始文件添加到 .gitignore 中，并且仅对*dist*进行版本化。
部署应用程序或重新克隆项目后，只需简单地`cp config.yml-dist config.yml`更改所需的设置即可。

*我在 PHP行业*遇到的很多人都使用这种方法。

但是，有一个我更喜欢并且我觉得更干净：使用环境变量。例子：

```
username: <%= ENV['MONGOID_USERNAME'] %>
password: <%= ENV['MONGOID_PASSWORD'] %>
database: <%= ENV['MONGOID_DATABASE'] %> 
```

这样，您将拥有一个版本化的配置文件，而不必编辑一个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T04:59:18.737

您可以让主分支不包含该文件，而只将它放在分支中——这是最简单的方法。

或者，假设主配置相当稳定，否则这将是一个很大的痛苦——`config.php`在每个分支中提交更改，然后当您从中获取更改时始终使用 rebase 进行拉取，`master`以便每次重新应用配置更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T06:34:45.367

为什么不将所有特定于环境的配置文件存储在主存储库中？然后，无论是在构建还是部署过程中，您都可以使用任何相关的配置文件。有很多不同的实现方式，具体取决于您的构建/部署工具，但无论您采用哪种方式，我认为它都比在分支中更好。

我的观点是，您肯定希望将配置文件存储在版本控制中并使用部署工具进行部署，这样您就不会因为缺少更新或手动错误而让旧版本闲置。

通常存在一个文件夹结构，如

```
/configurations/test/properties/
/configurations/prod/properties/ 
```

并且部署工具根据要求在每个环境中使用它们。任何机密信息（例如密码）都可以被散列或加密：像 ansible vault 这样的技术直接支持这一点。

# php - 如何从 JSON 格式创建表或追加？

> ID：10810152
> 
> 赞同：2
> 
> 时间：2012-05-30T04:51:04.110
> 
> 标签：php, jquery, json, ajax, html-table

在使用 ajax-jQuery 和 PHP 中的函数处理一个小型搜索引擎之后，我有一个数组 JSON，我想处理这个以在表中追加行，但我感到困惑。

查询 mysql 的 JSON 格式是可以的，但我不知道如何处理数据以生成表或附加到我的存在表中。

我认为这适用于每个 JSON 元素，但我不能这么认为。

**注意：**我的 JSON 代码是这样生成的

```
 ...........
       $jsonSearchResults = array();
                while ($row = mysql_fetch_assoc($result)) {
                    $jsonSearchResults[] =  array(
                        'clavemat' => $row['cve_mat'],
                        'tipomat' => $row['tipo_mat'],
                        'titulomat' => $row['titulo_mat'],
                        'autormat' => $row['autor_mat'],
                        'editmat' => $row['edit_mat'],
                        'success' => 'success'  
                    );
                }
         echo json_encode ($jsonSearchResults); 
```

**表格 HTML**

```
.........
<table class="busqueda">
<tr>
<th scope="col">Clave</th>
<th scope="col">Tipo</th>
<th scope="col">Título</th>
<th scope="col">Autor</th>
<th scope="col">Editorial</th>
</tr>
</table>
........ 
```

**JSON 代码**

```
[
{
"clavemat":"LICOELMCUS",
"tipomat":"Libro",
"titulomat":"Contabilidad",
"autormat":"Elias Flores",
"editmat":"McGraw Hill",
"success":"success"
},
{
"clavemat":"LICUDEMCNU",
"tipomat":"Libro",
"titulomat":"Curso java",
"autormat":"Deitel",
"editmat":"McGraw Hill",
"success":"success"
},
{
"clavemat":"REECMUMUNU",
"tipomat":"Revista",
"titulomat":"Eclipses",
"autormat":"Muy Interesante",
"editmat":"Muy interesante",
"success":"success"
},
{
"clavemat":"TEPLPLTENU",
"tipomat":"Tesis",
"titulomat":"Platanito Show",
"autormat":"Platanito",
"editmat":"Telehit",
"success":"success"
}
] 
```

**AJAX.JQUERY 文件**

```
$.ajax({
            type: "POST",
            url: action,
            data: dataSearch,
            success: function (response) {

                if (response[0].success == "success") {
                    alert("Si hay datos");
                } else {
                    alert("No hay datos");
                }

            }
        });
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:59:55.787

这应该工作

```
$.each(response, function (index, record) {
    var row = $("<tr />");
    $("<td />").text(record.clavemat).appendTo(row);
    $("<td />").text(record.tipomat).appendTo(row);
    $("<td />").text(record.titulomat).appendTo(row);
    $("<td />").text(record.autormat).appendTo(row);
    $("<td />").text(record.editmat).appendTo(row);

    row.appendTo("table.busqueda");
}); 
```

上面的代码将行附加到具有“busqueda”类的现有表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T05:02:07.663

在您的表中，您可以添加一个`<tbody>`元素作为动态行的容器：

```
<table class="busqueda">
  <thead>
    <tr>
      <th scope="col">Clave</th>
      <th scope="col">Tipo</th>
      <th scope="col">Título</th>
      <th scope="col">Autor</th>
      <th scope="col">Editorial</th>
    </tr>
  </thead>
  <tbody id="dynamic_rows">
    <!-- Ajax results go here -->
  </tbody>
</table> 
```

然后在 ajax 成功回调中，您将呈现行：

```
if (response[0].success == "success") {
  // Render dynamic rows here
  var $dynamic_rows = $('#dynamic_rows');

  // clear out old rows
  dynamic_rows.html('');

  ///////
  // You can use the row building code from Rafael's answer here
  // except append to $dynamic_rows

} else {
  alert("No hay datos");
} 
```

# templates - Backbone.js：模板无法识别模型

> ID：10810156
> 
> 赞同：0
> 
> 时间：2012-05-30T04:51:26.887
> 
> 标签：templates, view, model, backbone.js, underscore.js

我有一个模板：

```
<script type="text/template" id="action-template-item">
    <span data-layer="<%= target%>" data-uuid="<%= uuid%>">delete</span>
</script> 
```

我在视图中渲染模板

```
 window.ActionView = Backbone.View.extend({
          template: $("#action-template-item").html(),
          initialize: function () {
                this.render();
          },
          render: function () {
              var tmpl = _.template(this.template);
              console.log(this.model);//model have "target"
              this.$el.html(tmpl(this.model));
              return this;
          }

    }); 
```

模板只有来自模型数据的两个属性，

在渲染之前，我使用控制台检查模型是否`target`有价值，答案是肯定的，就像上面的评论一样，

我的模型数据就像：

```
{
   target: "xxx-xxx-xxx",
   uuid: "xxx-xxx-xx"
} 
```

但萤火虫告诉我`"target is not defined"`

发生了什么事？我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:21:38.717

您的模型可能看起来像这样：

```
var M = Backbone.Model.extend({});
var m = new M({
   target: "xxx-xxx-xxx",
   uuid: "xxx-xxx-xx"
}); 
```

演示（打开控制台，你会看到你的错误）：http: [//jsfiddle.net/ambiguous/Rnd6k/](http://jsfiddle.net/ambiguous/Rnd6k/)

所以当你说

```
//model have "target" 
```

你可能的意思是`this.model.attributes.target`存在。Backbone 模型属性和 JavaScript 对象属性不是一回事，Underscore 模板会寻找对象属性，它们对 Backbone 模型属性一无所知。

通常的方法是[`toJSON`](http://documentcloud.github.com/backbone/#Model-toJSON)在你想要渲染视图时序列化你的模型：

```
render: function () {
    var tmpl = _.template(this.template);
    this.$el.html(tmpl(this.model.toJSON()));
    return this;
} 
```

演示：http: [//jsfiddle.net/ambiguous/Rnd6k/](http://jsfiddle.net/ambiguous/Rnd6k/)

# xml - 读取和编辑 XML 内容并将输出输出到 PowerShell 中的 XML 变量

> ID：10810159
> 
> 赞同：0
> 
> 时间：2012-05-30T04:51:39.043
> 
> 标签：xml, powershell, powershell-2.0

我有一个类似于以下内容的 XML 文件内容：

```
<?xml version="1.0" encoding="utf-8"?>
<Content>
   <FileID>109F2AEA-6D9C-4127-963A-9C71D4155C5D</FileID>
      <File Path="C:\test.config">
         <Tag TagName="configuration">
            <add Content="One" fileID="${FileID}"/>
            <secondnode Content="Two" fileID="${FileID}">
               <nodeinside>
                  <inneragain fileID="${FileID}"/>
               </nodeinside>
            </secondnode>
            ...
            <diffentnode Content="Infinite" fileID="${FileID}"/>
         </Tag>
      </File>
</Content> 
```

我只需要获取此 XML 文件内容并编辑（替换 ${FileID} 存在的任何位置）如下所示的行

```
<add fileID="${FileID}"/> 
```

使用以下行中的“FileID”的值并将输出获取到 DataType [xml] 的变量。

```
<FileID>109F2AEA-6D9C-4127-963A-9C71D4155C5D</FileID> 
```

请建议可以在 PowerShell 中完成此操作的最佳方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T05:11:30.210

```
PS H:\> $xml = [xml]'<?xml version="1.0" encoding="utf-8"?>
    <Content>
    <FileID>109F2AEA-6D9C-4127-963A-9C71D4155C5D</FileID>
    <File Path="C:\test.config">
        <Tag TagName="configuration">
            <add Content="One" fileID="${FileID}"/>
            <secondnode Content="Two" fileID="${FileID}">
                <nodeinside>                   
                    <inneragain fileID="${FileID}"/>                
                </nodeinside>             
            </secondnode>
            <diffentnode Content="Infinite" fileID="${FileID}"/>          
        </Tag>       
    </File> 
</Content>'

$xml.InnerXml.Replace('${FileID}',$xml.Content.FileID)

<?xml version="1.0" encoding="utf-8"?><Content><FileID>109F2AEA-6D9C-4127-963A-9C71D4155C5D</FileID><File Path="C:\test.config"><Tag TagName="configuration"><add Content="One" fileID="109F2AEA-6D9C-4127-963A-9C71D4155C5D" /><secon
dnode Content="Two" fileID="109F2AEA-6D9C-4127-963A-9C71D4155C5D"><nodeinside><inneragain fileID="109F2AEA-6D9C-4127-963A-9C71D4155C5D" /></nodeinside></secondnode><diffentnode Content="Infinite" fileID="109F2AEA-6D9C-4127-963A-9C
71D4155C5D" /></Tag></File></Content> 
```

# asp.net - ASP.NET：检查数据库的值并执行如果

> ID：10810161
> 
> 赞同：0
> 
> 时间：2012-05-30T04:51:49.083
> 
> 标签：asp.net, database

我的数据库中有一个 1 行表。该行称为“活动”，其值为 1（活动）或 2（非活动）

我想检查数据库，如果站点处于活动状态，请将标签文本设置为“站点当前处于活动状态”，如果所述字段为“0”，则将标签文本设置为“站点当前处于非活动状态”

我知道 ti 看起来很基本，但我很难过。我试过中继器，但我不知道如何在这种情况下操作它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:00:07.647

您可以在 formview 控件中尝试这样的操作：

```
<asp:TextBox ID="TextBox1" runat="server"
    Text='<%#Convert.ToBoolean( Eval("Active"))?"Site Is currently Inactive":"Site Is currently Active"%>'
    ></asp:TextBox> 
```

或者

```
<asp:TextBox ID="TextBox2" runat="server"
    Text='<%# Eval("Active").ToString().Equals("True")?"Site Is currently Inactive":"Site Is currently Active"%>'
    ></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:05:57.610

不断进行故障排除......这终于奏效了

```
Private Sub Repeater1_ItemDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles Repeater1.ItemDataBound
    Dim MyLabel As Label = e.Item.FindControl("SiteStatus")

    If MyLabel.Text = "1" Then
        MyLabel.Text = "SITE IS CURRENTLY ACTIVE"
        MyLabel.CssClass = "Green"
    End If
End Sub 
```

# java - Java中的缺失值

> ID：10810162
> 
> 赞同：11
> 
> 时间：2012-05-30T04:51:51.350
> 
> 标签：java

在Java中可以使用什么语句来表示变量的缺失值。例如我想写一个代码：

```
if (a>=23)
 income = pay_rate;
else 
 income is missing; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-03T12:19:02.007

这个帖子里有很多不好的建议。首先让我谈谈为什么你**不**应该采用一些建议的方法。

**1.使用包装类型和null**

```
Integer income = null;
if (a >= 23) {
  income = payRate; 
} 
```

Java具有自动拆箱功能。如果您不小心`income`在 Java 必须自动拆箱的地方使用了它怎么办？编译器无法捕获此错误，您的代码将在运行时崩溃。

其次，收入的“可空性”不是`income`'s 类型的一部分。因此，程序员`null`每次使用时都要小心检查它。如果他忘记执行这个检查，编译器不会抱怨，但你会`NullPointerException`在运行时得到 s。

**2\. 使用标记值表示异常情况**

```
int income = Integer.MAX_VALUE;
if (a >= 23) {
  income = payRate;
} 
```

这种方法具有方法的第二个缺点`null`。更糟糕的是，在这种情况下，即使在错误的条件下，计算也不会抛出异常，而是会*继续*`Integer.MAX_VALUE`进行，因为它是有效的`int`，可能会导致灾难性的结果。

* * *

**那么你应该如何处理呢？**

使用以下数据类型：

*   具有在其类型中表示的“可空性”。
*   不涉及上述两种方法中的条件检查。
*   确保在编译时不会以非法状态访问数据。

[`Maybe`](http://blog.tmorris.net/maybe-in-java/)（也称为`Option`）符合要求。（@Bahribayli 已经提出了这个建议。我正在对此进行扩展。）请参阅[此处](http://ideone.com/fBOf0)的数据定义。

这就是你在你的情况下使用它的方式：

```
Maybe<Integer> income = Nothing.value();
if (a >= 23) {
  income = Just.of(payRate);
} 
```

有一个名为[Functional Java](http://functionaljava.org/)的库[提供了这种抽象](http://functionaljava.googlecode.com/svn/artifacts/3.0/javadoc/fj/data/Option.html)。如果您对使用此数据类型有任何其他问题，我将很乐意为您解答。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T04:54:24.563

您正在寻找一个*值*，而不是一个*声明*，而那个值是`null`. 您不能将其分配给[*原始数据类型*](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)`null`的变量，例如and ，但您可以将它与它们的*盒装*对应物一起使用—— 、、等等。[](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)*`int``double`*[`Integer`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html)[`Double`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Double.html)**

 **当你这样做时，你应该`null`在访问它们之前仔细检查你的值。否则，看似无辜的人`if (pay_rate > 100)`可能会抛出空引用异常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T05:04:39.610

[`Option`](http://en.wikipedia.org/wiki/Option_type)类型理论中的类型是一种指定变量类型的方法，该变量可能具有也可能没有有意义的值。一些语言支持`Option`像 Scala 的类型这样的[`scala.Option`](http://www.scala-lang.org/api/current/scala/Option.html)类型。对于不支持该类型的语言，您可以使用包装类或原语的盒装对应物。

```
public class Income {
  private int value;
  public Income(int value) {
    this.value = value;
  }
  public int getValue() {
     return value;
  }
  public void setValue(int value) {
    this.value = value;
  }
}

...
Income income = null;
if( a >= 23)
  income = new Income(pay_rate); 
```

或者干脆

```
Integer income = null;
if( a >= 23)
  income = pay_rate; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T04:54:13.937

```
Integer income = null;
if (a >= 23) {
  income = payRate; // underscores are generally considered bad convention in Java
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-30T04:54:14.387

您可以将收入设置为空。稍后，当您检查收入值时，如果它为空，则将其视为缺失

```
Integer income = a>=53?pay_rate:null; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-30T04:54:40.603

```
Double income = null;
if (a>=23) {income = pay_rate; } 
```

收入将`null`默认为所以如果未初始化

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-30T05:14:03.490

正如此处其他答案所述，您可以使用盒装类型。但我会建议为您的数据查找有效值并选择任何无效值作为缺失值。在您的特定收入情况下，它不能为负数，因此您可以选择-1。

避免盒装类型的原因是性能。我不反对使用它们，但如果你可以在没有它们的情况下工作，那么就没有必要使用它们。

对于大多数 +ve 和 -ve 值都是有效值的情况，请使用`Integer.MAX_VALUE`或`Integer.MIN_VALUE`作为您的缺失值。您只会丢失所有可用值范围中的一个值。

注意：自动装箱（从原始类型隐式转换为装箱类型，反之亦然）是一个很好的功能，但会导致一些难以调试和发现的性能问题。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-30T05:19:58.517

使用[抛出](http://www.java-samples.com/showtutorial.php?tutorialid=295)：

```
if (a>=23)
    income = pay_rate;
else 
    throw new IllegalArgumentException("income is missing"); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-30T12:00:47.020

你需要初始化变量`null`

```
Double income = null;
if (a>=23) 
{
   income = pay_rate; 
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-30T05:06:18.687

你也可以试试这个，也许只是我喜欢的方式，但取决于你：p

```
if(a >= 23){
    income = payRate;
} else{
    income = null;
} 
```

与其将其设置为`null`默认值，不如`null`在它检查是什么之后将其设置`a`为。另外，确保收入是`Integer`或`Double`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-21T09:56:45.667

您可以通过以下方式进行操作：

```
public abstract class Nullable extends Number {

    protected final boolean isNA;

    protected Nullable(boolean isNA) {
        this.isNA = isNA;
    }

    public boolean isNA() {
        return isNA;
    }
}

public final class NullableInt extends Nullable {

    public static final NullableInt NA = new NullableInt(0, true);

    private final int value;

    public NullableInt(int value, boolean isNA) {
        super(isNA);
        this.value = value;
    }

    public static NullableInt of(int value) {
        return new NullableInt(value, false);
    }

    public int getValue() {
        if (!isNA) {
            return value;
        }
        throw new RuntimeException("Value is NA");
    }

    @Override
    public int intValue() {
        return getValue();
    }

    @Override
    public long longValue() {
        return getValue();
    }

    @Override
    public float floatValue() {
        return getValue();
    }

    @Override
    public double doubleValue() {
        return getValue();
    }
}

public class Test {

    public static void main(String[] args) {
        NullableInt[] nullableInts = new NullableInt[3];
        nullableInts[0] = NullableInt.of(1);
        nullableInts[1] = NullableInt.of(2);
        nullableInts[2] = NullableInt.NA;

        System.out.println(Arrays.toString(nullableInts));
    }
} 
```**

# android - 如何从 CustomView 为 View Extends 添加 setTypeface 属性？

> ID：10810164
> 
> 赞同：0
> 
> 时间：2012-05-30T04:51:53.823
> 
> 标签：android, view, typeface

我正在使用一个自定义文本视图，不确定它从 bez 延伸到哪里。我从图书馆使用它，有财产`setText()`和`setTextColor()`

我的问题是无法更改字体样式。所以我想创建一个从现有自定义视图扩展的自定义视图，因为我想添加`setTypeface`属性。

可能吗 ？

我正在寻找指针和想法..

更新：

```
public class FontTextView extends TextDrawable  {   

private Paint paint;
private Context context;    
private String text;
private float size;

public FontTextView(Context _context, String _text, float textSize) {
    super(_text, textSize);
    context = _context;
    this.text = _text;
    this.size = textSize;
    init();
}

public void init() {

    Typeface face=Typeface.createFromAsset(context.getAssets(), "special_fonts/Atlas.ttf"); 

    paint = new Paint();    
    paint.setTextSize(size);     
    paint.setTypeface(face);
}

protected void onDraw (Canvas canvas) {
    super.draw(canvas);     
    canvas.drawText(text, 100, 40, paint);
}
} 
```

我试过这样但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:04:15.123

使用以下示例代码进行动态设置

```
 Typeface myNewFace=Typeface.createFromAsset(getAssets(), "fonts/Jokerman.TTF“ );
  tvCustom.setTypeface(myNewFace); 
```

并将您的字体样式 ttf 文件保存在 assets/fonts 文件夹中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-30T05:01:30.017

利用`textview.setTypeface(null, Typeface.BOLD_ITALIC);`

# facebook - Facebook 注册“那个 'redirect_uri' 不允许用于那个 client_id。”

> ID：10810165
> 
> 赞同：0
> 
> 时间：2012-05-30T04:52:05.103
> 
> 标签：facebook, redirect, registration

我正在尝试使用 Facebook 的注册插件，但一直收到此错误消息：“该 client_id 不允许使用该 'redirect_uri'。”

我[在 FB 中的设置](https://i.stack.imgur.com/EMbQW.jpg)：

![在此处输入图像描述](../Images/92bab8f8df1fd2870e087fb319e9a3bf.png)

来源： `<div id="fb-reg"> <fb:registration fields="name,birthday,gender,location,email" redirect-uri="http://www.facebook.com/develtestpage/signupsuccess.php" width="530"> </fb:registration> </div>`

我找到了几篇文章，但它应该工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:16:40.727

`redirect uri`将您的从更改`http://www.facebook.com/develtestpage/signupsuccess.php`为`http://cold-dawn-9801.herokuapp.com/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:17:51.917

您需要设置您的域。（应用程序域）

Facebook 将只允许重定向到客户端 ID 的注册域。

# perl - Moose 属性如何“扮演”鼠标角色？

> ID：10810171
> 
> 赞同：3
> 
> 时间：2012-05-30T04:52:41.537
> 
> 标签：perl, moose

我有一个组成鼠标角色的 Moose 类。

```
package My::Moose::Class;
use Moose;
has 'mouse_obj' => (
    is   => 'ro',
    does => 'NotMy::Mouse::Role',
);

package NotMy::Mouse::Role;
use Mouse::Role;

package NotMy::Mouse::Class;
use Mouse;
with 'NotMy::Mouse::Role'; 
```

这将得到一个错误，因为 Mouse 角色在 Moose 中未被识别为一种类型：

```
my $f = My::Moose::Class->new( mouse_obj => NotMy::Mouse::Class->new ); 
```

> 属性 (mouse_obj) 未通过类型约束，因为： 'NotMy::Mouse::Role' 的验证失败，值为 NotMy::Mouse::Class=HASH(0x23932dc) (not isa NotMy::Mouse::Role) at ...

有哪些方法可以在不将鼠标对象更改为 Moose 的情况下使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:43:45.940

您可以这样做的一种方法是创建一个自定义类型约束来执行您想要的检查。

```
use Moose::Util::TypeConstraints;

subtype 'MouseRole'
    => as 'Object'
    => where sub { $_->does('NotMy::Mouse::Role') };

has 'mouse_obj' => (
    is   => 'ro',
    isa => 'MouseRole', # "isa" not "does"!
); 
```

# parsing - Scala Parser 有时会跳过空格，有时不会

> ID：10810172
> 
> 赞同：6
> 
> 时间：2012-05-30T04:52:43.857
> 
> 标签：parsing, scala

我有一个工作的 Scala 解析器，但解决方案并不像我想要的那样干净。问题是某些产品必须将空格视为令牌的一部分，但“更高级别”的产品应该能够忽略/跳过空格。

如果我使用扩展较低级别解析器的典型 scala 解析器模式，那么将继承 skipWhitespace 设置，并且事情很快就会变得混乱。

我认为我最好不要使用 extends 方法，而是在高级解析器的类中提供一个低级解析器的实例——但我不确定如何使它工作，这样每个实例都会看到只有一个输入字符流。

这是最低级别解析器的一部分 -

```
class VulgarFractionParser extends RegexParsers  {
  override type Elem = Char

 override val whiteSpace = "".r 
```

然后我像这样扩展

```
class NumberParser extends VulgarFractionParser with Positional { 
```

但此时 NumberParser 必须像 FractionParser 一样显式处理空格。对于 NumberParser 它仍然非常易于管理 - 但在下一个级别上，我真的希望能够像普通的 regexParser 那样定义使用空格作为分隔符的产品*。*

一个例子是这样的：

```
IBM 33.33/ 1200.00
or
IBM 33.33/33.50 1200.00 
```

第二个值有时有两个部分，由“/”分隔，有时只有一个部分，斜线后没有任何内容（甚至根本不包含斜线）。

```
 def bidOrAskPrice = ("$"?) ~> (bidOrAskPrice1 | bidOrAskPrice2 | bidOrAskPrice3) 

   def bidOrAskPrice1 = number ~ ("/".r) ~ number ~ (SPACES) ^^ { 
     case a ~ slash ~ b ~ sp1    => BidOrAsk(a,Some(b))
  }
  def bidOrAskPrice2 = (number ~ "/" ~ (SPACES)) ^^ { case a ~ slash ~ sp => BidOrAsk(a,None) }
   def bidOrAskPrice3 = (number ~ (SPACES?)) ^^ { case a ~ sp => BidOrAsk(a , None)} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T09:02:33.880

一种解决方案是覆盖 handleWhiteSpace 函数并在扩展类中使用 var 值激活跳过空格。

您可以在此处查看 RegexParsers 的代码： [https ://github.com/scala/scala/blob/v2.9.2/src/library/scala/util/parsing/combinator/RegexParsers.scala](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/util/parsing/combinator/RegexParsers.scala)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T05:04:18.840

将第一个解析器转换为令牌解析器（实际上是词法分析器）并让第二个解析器读取它而不是 plain 不是更有意义`Char`吗？

# mysql - mysql select的查询时间慢

> ID：10810173
> 
> 赞同：0
> 
> 时间：2012-05-30T04:52:56.007
> 
> 标签：mysql, performance, latitude-longitude

一般来说，我对 MySQL 和数据库非常陌生，但我的查询似乎需要很长时间。我正在使用纬度和经度坐标从另一个位置 5 英里范围内的大约 700,000 个位置数据库中查找位置。问题是，查询需要 2.12 秒，我担心一旦我开始获得流量，MySQL 就会堵塞。这是我的代码：

```
SELECT *,((ACOS(SIN(44.4726 * PI() / 180) * SIN(lat * PI() / 180) + COS(44.4726 * PI() /          180) * COS(lat * PI() / 180) * COS((-93.1785 - lon) * PI() / 180)) * 180 / PI()) * 60 *   1.1515) AS distance FROM locations HAVING distance<=5 ORDER BY distance ASC LIMIT 30; 
```

我索引了纬度和经度字段，但仍然需要很长时间。这是我要求服务器执行的操作吗？我可以通过添加来加快速度吗

```
WHERE state = "$state" 
```

如果是这样，我会在 Select 中的哪个位置添加它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:11:40.923

该查询将 seq 扫描整个表，因为它实际上没有不是从计算值（距离）派生的过滤器。添加一个按索引列过滤的 where 子句肯定有助于消除一些开销，但前提是数据库认为表中有足够的数据来保证使用索引而不是表。因此，请确保您也对其进行分析。

查询中的距离逻辑非常丑陋，但我可以理解为什么每次从表中选择时您都不想通过线路传输 700k+ 行。看起来您可能正在进行空间计算，并且可能明智地研究空间数据类型和索引。

Ed：另外，你关于where子句的问题......

```
select fields [aggregate fields]
from table
where where clause
group by fields
having having clause 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:48:52.043

我对这种类型的查询通常是如何进行的一无所知，因此请随意忽略我的建议，但假设您的应用程序要接受输入 {lat,lon} 并在每个方向（北、东、南部和西部）。然后，您的查询只能选择那些在上限和下限之间具有 lat 和 long 的记录。

您仍然需要进行距离计算，但您将消除可能无法匹配的记录，因此您应该减少查询的开销。此外，如果你有一个关于 lat 和 long 的索引，那么 mysql 应该能够使用这些。

正如我所说，我可能误解了几何形状，我在该领域没有经验，但除了其他建议之外，它可能是一个有用的优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T05:05:51.080

为什么要在查询中进行计算？像这样的逻辑不应该在 DAL 中。

我建议只获取您需要的列，然后在您的代码中进行计算，这样您就可以只计算没有经纬度的部分（例如 SIN(44.4726 * PI() / 180)），然后只需循环结果并酌情添加纬度和经度。

# jquery - 如何使用两个箭头图标为 div 设置动画，一个是打开的，一个是关闭的？

> ID：10810175
> 
> 赞同：1
> 
> 时间：2012-05-30T04:53:25.747
> 
> 标签：jquery

我正在使用 jquery animate 在中间做一些 div 动画，我击中了任何人都可以帮助继续。

我的要求是当我单击箭头图标时 div 应该动画。在动画 div 折叠后，左侧箭头需要显示以关闭折叠的地方。

我添加了两张图片，一张用于打开，另一张用于关闭。

JsFiddle 链接

[http://jsfiddle.net/CZpdF/1/](http://jsfiddle.net/CZpdF/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:20:07.020

```
$("#buying-power-right, #buying-power-left").click(function() {
    $(this).attr('id', function() {
        return this.id == 'buying-power-right' ? "buying-power-left" : "buying-power-right";
    });
    $("#buying-power-content").animate({
        width: 800
    }, {
        queue: false,
        duration: 200
    }).toggle();
}); 
```

**[演示](http://jsfiddle.net/xfyq3/7/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:08:52.330

`#buying-power-content`有`display:none;`

您必须在点击事件中显示它。

```
$("#buying-power-content").show().animate({width:800}, { queue: false, duration: 200 }); 
```

# css - 将 Calibri (Body) 字体应用于文本

> ID：10810176
> 
> 赞同：27
> 
> 时间：2012-05-30T04:53:43.543
> 
> 标签：css, html, font-family

我有一个 div，在这个 div 中我想以 Calibri (Body) 字体显示一些文本。

我怎样才能做到这一点？

这是我得到的CSS：

```
.an_account_join_1 {
    float:left;
    width:100%;
    color:#000000;
    font-family:Calibri (Body);
    letter-spacing:2px;
    font-size:14px;
    text-align:center;
    margin:20px 0px;
    } 
```

这是div：

```
<div class="an_account_join_1">Individual Free Membership</div> 
```

此字体系列不显示字体样式。

当我查看萤火虫输出时，字体系列没有样式。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-05-30T05:18:37.277

没有“Calibri (Body)”这样的字体。您可能在 Microsoft Word 字体选择菜单中看到了这个字符串，但它不是字体名称（参见例如说明[Font: +body (in W07)](http://www.techtalkz.com/microsoft-office/84726-font-body-w07.html)）。

所以使用just `font-family: Calibri`or, better, `font-family: Calibri, sans-serif`. （Calibri 没有足够的备用字体，但很可能当 Calibri 不可用时，浏览器的默认无衬线字体比浏览器的默认字体更适合您的设计，通常是衬线字体。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-19T09:36:53.563

更改 div 使用的字体类型

```
.an_account_join_1{
font-family:"Calibri, sans-serif";
} 
```

用于 WordPress 的主菜单

```
#primary-menu{
    font-family:"Calibri, sans-serif";
    } 
```

* * *

## 回答 #3

> 赞同：-9
> 
> 时间：2012-05-30T04:57:46.457

如果字体的字母之间有空格，则需要使用引号。

`font-family:"Calibri (Body)";`

# c# - OnClientClick 不起作用

> ID：10810178
> 
> 赞同：0
> 
> 时间：2012-05-30T04:53:48.823
> 
> 标签：c#, asp.net, .net

我对 OnClientClick 有一些问题。

我像这样在我的网络表单中添加了一个按钮。

```
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" 
        style="top: 307px; left: 187px; position: absolute; height: 26px; width: 90px" 
        Text="Submit" OnClientClick="return validate()" /> 
```

我`<head>`在`<title>`.

```
<script language="javascript" type="text/javascript">
    function validate() {
        if (document.getElementById("<%=TextBox1%>").value == "") {
        alert("textbox1 should not be empty");
        }
        else if(document.getElementById("<%=TextBox2 %>").value==""){
        alert("textbox2 should not be empty");
        }
                        }
</script> 
```

`TextBox1`并且`TextBox2`是两个文本框的 ID。

但是当我单击提交按钮时，OnClick 正在触发，但 OnClientClick 没有触发。

有什么问题 ？

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T04:58:49.977

从文本框中获取 ID 时，您必须`<%=TextBox1.ClientID%>`在 javascript 中使用。

`return false`当发生错误时，您还应该使用 validate-function。

将您的 javascript 替换为：

```
function validate() {
    if(document.getElementById('<%=TextBox1.ClientID%>').value == '') {
        alert('Textbox1 should not be empty');
        return false;
    }
    if(document.getElementById('<%=TextBox2.ClientID%>').value == '') {
        alert('Textbox2 should not be empty');
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:59:43.310

试试这种方式： -

```
document.getElementById("<%=TextBox1.ClientID%>").value

document.getElementById("<%=TextBox2.ClientID%>").value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T05:00:01.607

我看到的第一件事是，您使用`"<%=TextBox1%>"`的是没有`.ClientID`，这是在客户端识别 texbox 的。自然，如果没有 id，您的 javascript 将无法找到该对象（并且可能也会引发异常）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T05:08:11.893

`(document.getElementById("<%=TextBox1%>").value == "")`

将呈现为

`(document.getElementById("System.Web.UI.WebControls.TextBox").value == "")`.

所以尝试`document.getElementById("<%=TextBox1.ClientID%>").value`在javascript函数中使用。

# iphone - Traversing to view did load after popping the view

> ID：10810197
> 
> 赞同：-1
> 
> 时间：2012-05-30T04:56:13.390
> 
> 标签：iphone, objective-c, ios, uiviewcontroller

Hi I am new to Stack Overflow so my apologies for any mistakes.I want to ask that whenever we pop to the previous view,how can we make the control go to the previous view `viewDidLoad`? In my application,it pops to the previous view but i want to reload the previous view so i want it to go to `viewDidLoad`.Thanks in advance. I have used the following code.

```
[self.navigationController popViewController:myViewController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:00:02.957

As far as I know, you can't do that. However, when you return to a view, the code in `viewWillAppear` will get executed (basically, the code in there is executed every time the view appears - as the name suggests).

Suggestion: split your code from `viewDidLoad` into 2 parts:

1.  one chunk of code that should only be executed once - which must be left there
2.  a second chunk of code that you want to be executed every time your view appears, which you'll move in `viewWillAppear`

Hope this helps !

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:58:49.437

When you pop a view and go back to previous view then 'viewWillAppear`and`viewDidAppear` methods of view controller are called.

Following is the calling hierarchy -

`viewDidLoad`- This method is called after the view controller has loaded its view hierarchy into memory.

`viewWillAppear` - This method is called before the receiver’s view is about to be added to a view hierarchy.

`viewDidAppear`- Notifies the view controller that its view was added to a view hierarchy.

Checkout UIViewController class reference for details of these view controller life cycle methods - [http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html)

So based upon requirement, you need to decide and what all UIElement you want to be loaded only once use in `viewDidLoad` and element on which you want to do refresh upon returning use `viewWillAppear` or `viewDidAppear`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-03T05:44:23.240

You can do that we a trick .

1.  Make a method and paste all your code from view did load in this method .

2.  Call that method from view did load .

3.  Call that method from view will appear .

**This this not possible to call view did load but you can do all this from view will appear like view did load**

Thanks

# sql-server - 如何使用 ssis 将检索到的行插入到另一个表中

> ID：10810199
> 
> 赞同：5
> 
> 时间：2012-05-30T04:56:32.910
> 
> 标签：sql-server, ssis

我有一张桌子，它有 500 行。我只想检索 10 行，并且只想使用控制流插入到另一个表中。通过数据流任务，我们可以使用 OLEDB 源和 OLEDB 目标。但我希望通过使用执行 sql 任务和每个循环来获得结果。有可能这样做吗？我的想法是，获取十条记录的集合，并使用 foreach 循环迭代每一行并使用执行 sql 任务插入表中。目标表需要动态创建。我尝试了一些方法，但没有前进。请找到图像文件。![在此处输入图像描述](../Images/9b227bc174af86e5fba52a879a81ab45.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T06:46:30.670

取自 Northwind 的示例

创建代表您将在运行时创建的表中的列的变量（在变量集合中）示例：-

```
 Customer_ID as string
       Order_Id as int 
```

然后你需要创建执行 SQL 任务并编写下面的查询来选择前 10 行

```
 Select top 10* from orders 
```

使用 FullResultSet 并在结果集配置中将表行存储在 variableName 中：- User::Result ResultName:0

删除一个执行 SQL 任务并即时创建一个表

```
 IF OBJECT_ID('myOrders') IS not NULL
 drop table myOrders

 Create table myOrders
 (OrderID  int,
  CustomerID varchar(50)
 ) 
```

结合来自 Execute sql 任务的 2 个流并将其连接到 Foreach 循环

拖动一个 foreach 循环。在集合中使用枚举类型作为 Foreach ADO 枚举在枚举配置中选择 user::Result 变量，该变量存储执行 sql 任务中的前 10 行，然后选择单选按钮“第一个表中的行”在变量映射中，映射您在第一步中创建的列变量，第一列的索引为 0，第二列的索引为 1 ![在此处输入图像描述](../Images/c137ef7c314733a6cd76bcf880486b43.png)

在 foreach 循环中拖动执行 sql 任务并编写以下查询：

```
 Insert into myOrders( OrderID,CustomerID)
  values
  (?,?) 
```

在执行sql任务中使用参数映射配置映射参数

```
 VariableName : OrderID  Direction : Input   DataType=Long ParamterName=0
  VariableName : CustomerID  Direction : Input   DataType=varchar ParamterName=1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T08:20:45.380

我希望你在“学习模式”下这样做。没有理由对数据流上的控制流执行此操作。

无论如何，您的打印屏幕是正确的，我会在开始时添加另一个执行 sql 任务来创建您的目标表。

然后，您的执行 sql 任务应该有查询来带来您想要的 10 行，其结果集应该设置为“完整结果集”，并且在结果集选项卡上，您应该将结果集映射到如下变量：

![在此处输入图像描述](../Images/3108ab8f1523ac54571d8ded9796af52.png)

并像这样配置你的 foreach 循环容器：

![在此处输入图像描述](../Images/8c0e201c70fdb2466ee2e55b3095eb21.png) ![在此处输入图像描述](../Images/822afae7181b1ad5d4da33ecd7542c3c.png)

在 foreach 的每个循环上，您都可以访问变量上的值，然后您可以使用另一个执行 sql 任务然后在新的 crated 表上插入

# python - 来自发送模型的 django post_save 调用？

> ID：10810202
> 
> 赞同：4
> 
> 时间：2012-05-30T04:57:04.900
> 
> 标签：python, django, django-models, django-signals

我有一个非常简单的模型可以工作：

```
class Badge(models.Model):

    name = models.CharField(max_length=16, help_text="Name for Badge")
    category = models.ForeignKey(BadgeCategory, help_text="Category for badge")
    description = models.CharField(max_length=32, help_text="A brief description")
    file = models.ImageField(upload_to=format_badge_name)

    signals.post_save.connect(create_badge, sender=Badge) 
```

我知道我在 signals.py 中的 create_badge 函数有效。如果我在没有发送者值的情况下发送它，它表示发送者是一个 LogEntry 对象。我想/需要在 post_save 脚本中引用一些实例信息，如下所示：

```
def create_badge(sender, instance, created, **kwargs):

    from userinfuser.ui_api import UserInfuser
    from django.conf import settings

    if created:
        api_key = settings.API_KEY
        api_email = settings.API_EMAIL

        ui = UserInfuser(api_email, api_key)
        ui.create_badge(instance.category.name, instance.name, instance.description, instance.file.url) 
```

我在哪里可以调用我的 post_save 调用，以便它知道 Badge（我假设这是修复？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T07:38:30.750

**只需在定义 Badge后将**信号与 sender=Badge 连接，测试示例：

```
from django.db import models
from django.db.models import signals

def create_badge(sender, instance, created, **kwargs):
    print "Post save emited for", instance

class BadgeCategory(models.Model):
    name = models.CharField(max_length=100)

class Badge(models.Model):

    name = models.CharField(max_length=16, help_text="Name for Badge")
    category = models.ForeignKey(BadgeCategory, help_text="Category for badge")
    description = models.CharField(max_length=32, help_text="A brief description")

signals.post_save.connect(create_badge, sender=Badge) 
```

测试外壳会话：

```
In [1]: category = BadgeCategory(name='foo')

In [2]: category.save()

In [3]: badge = Badge(category=category, name='bar', description='test badge')

In [4]: badge.save()
Post save emited for Badge object 
```

# assembly - “FS”/“GS”寄存器的用途是什么？

> ID：10810203
> 
> 赞同：119
> 
> 时间：2012-05-30T04:57:28.370
> 
> 标签：assembly, x86, cpu-architecture, cpu-registers, memory-segmentation

所以我知道以下寄存器及其用途应该是什么：

*   CS = 代码段（用于 IP）

*   DS = 数据段（用于 MOV）

*   ES = Destination Segment（用于MOVS等）

*   SS = 堆栈段（用于 SP）

但是以下寄存器的用途是什么？

*   FS =“文件段”？

*   GS = ???

注意：我**不是**在询问任何特定的操作系统——我是在询问它们打算被 CPU 用于什么，如果有的话。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-05-30T05:15:28.027

有它们的用途，以及它们用于 Windows 和 Linux 的用途。

段寄存器背后的初衷是允许程序访问许多不同的（大）内存段，这些段原本是独立的，并且是持久虚拟存储的一部分。这个想法来自[1966 年的 Multics 操作系统](http://en.wikipedia.org/wiki/Multics)，它将文件视为简单的可寻址内存段。没有 BS“打开文件，写入记录，关闭文件”，只是“将此值存储到该虚拟数据段中”并刷新脏页。

我们目前的 2010 年操作系统是一个巨大的倒退，这就是为什么它们被称为“太监”。*您*只能寻址进程空间的单个段，提供所谓的“平坦（恕我直言）地址空间”。x86-32 机器上的段寄存器仍然可以用于真正的段寄存器，但没有人打扰（英特尔前总裁安迪·格鲁夫（Andy Grove）在上个世纪有一个相当著名的公众契合，当时他在所有英特尔工程师花费精力和他的钱来实现这个功能，没有人会使用它。去吧，安迪！）

AMD 在走向 64 位时决定他们不在乎是否取消了 Multics 作为选择（这是慈善的解释；无情的是他们对 Multics 一无所知），因此禁用了 64 位模式下段寄存器的一般功能。仍然需要线程来访问线程本地存储，并且每个线程都需要一个指针......在可立即访问的线程状态（例如，在寄存器中）的某个地方......来线程本地存储。由于 Windows 和 Linux 在 32 位版本中都为此目的使用了 FS 和 GS（感谢 Nick 的澄清），AMD 决定让 64 位段寄存器（GS 和 FS）基本上仅用于此目的（我想你可以使它们指向您进程空间中的任何位置；我不知道应用程序代码是否可以加载它们）。

恕我直言，让每个线程的内存映射具有作为其线程本地存储的绝对虚拟地址（例如，0-FFF）会在架构上更漂亮（不需要 [segment] 寄存器指针！）；早在 1970 年代，我就在一个 8 位操作系统中做到了这一点，它非常方便，就像有另一个大堆寄存器可以使用一样。

所以，段寄存器现在有点像你的附录。他们服务于一个退化的目的。对我们的集体损失。

不了解历史的人注定不会重蹈覆辙；他们注定要做一些更愚蠢的事情。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-05-30T05:06:23.910

寄存器`FS`和`GS`是段寄存器。它们没有处理器定义的用途，而是由运行它们的操作系统赋予用途。在 Windows 64 位中，`GS`寄存器用于指向操作系统定义的结构。 `FS`并且`GS`通常被操作系统内核用来访问线程特定的内存。在 Windows 中，`GS`寄存器用于管理线程特定的内存。linux 内核用于`GS`访问特定于 cpu 的内存。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-09-25T04:51:13.690

**FS**用于指向 windows 进程上的线程信息块 (TIB)。

一个典型的例子是（[SEH](https://msdn.microsoft.com/en-us/library/swezty51.aspx)），它存储了一个指向回调函数的指针 `FS:[0x00]`。

**GS**通常用作指向线程本地存储 (TLS) 的指针。您之前可能见过的一个示例是堆栈金丝雀保护（stackguard），在 gcc 中您可能会看到如下内容：

```
mov    eax,gs:0x14
mov    DWORD PTR [ebp-0xc],eax 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-05-12T23:05:22.530

## TL;博士;

> “FS”/“GS”寄存器的用途是什么？

只需访问默认数据段 (DS) 之外的数据。和ES一模一样。

* * *

## 长读：

> 所以我知道以下寄存器及其用途应该是什么：
> 
> [...]

好吧，差不多，但 DS 不是“某些”数据段，而是默认的。默认情况下进行所有操作的位置 (*1)。这是所有默认变量所在的位置 - 本质上是`data`和`bss`. 这在某种程度上是 x86 代码相当紧凑的部分原因。所有最常访问的基本数据（加上代码和堆栈）都在 16 位速记距离之内。

ES 用于访问其他所有内容 (*2)，DS 的 64 KiB 之外的所有内容。像文字处理器的文本、电子表格的单元格或图形程序的图片数据等等。与通常假设的不同，这些数据不会被访问太多，因此需要前缀比使用更长的地址字段伤害更小。

同样，在执行字符串操作时可能必须加载（和重新加载）DS 和 ES 只是一个小烦恼——这至少被当时最好的字符处理指令集之一所抵消。

真正痛苦的是当用户数据超过 64 KiB 并且必须开始操作时。虽然某些操作一次只对单个数据项执行（想想`A=A*2`），但大多数操作需要两个 ( `A=A*B`) 或三个数据项 ( `A=B*C`)。如果这些项目驻留在不同的段中，ES 将在每​​个操作中重新加载几次，从而增加了相当多的开销。

一开始，使用 8 位世界 (*3) 的小程序和同样小的数据集，这没什么大不了的，但它很快就成为了主要的性能瓶颈——对程序员来说更是一个真正的痛苦（和编译器）。随着 386 英特尔终于通过增加两个段来缓解压力，因此任何系列[一元](https://en.wikipedia.org/wiki/Unary_operation)、[二元](https://en.wikipedia.org/wiki/Binary_operation)或[三元](https://en.wikipedia.org/wiki/Ternary_operation)运算，元素分布在内存中，都可以在不重新加载 ES 的情况下进行。

对于编程（至少在汇编中）和编译器设计来说，这是一个相当大的收获。当然，还可以有更多，不过三个瓶颈基本就没有了，不用过分。

明智地命名字母 F/G 只是 E 之后的字母延续。至少从 CPU 设计的角度来看，没有任何关联。

* * *

*1 - 将 ES 用于字符串目标是一个例外，因为只需要两个段寄存器。没有它们就没有多大用处——或者总是需要一个段前缀。这可能会扼杀一个令人惊讶的功能，即使用（非重复）字符串指令由于其单字节编码而导致极端性能。

*2 - 所以事后看来，“其他所有部分”会比“额外部分”更好地命名。

*3 - 始终重要的是要记住，8086 仅作为[8800](https://en.wikipedia.org/wiki/Intel_iAPX_432)完成之前的权宜之计，主要用于嵌入式世界以保持 8080/85 客户的参与。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-04-26T02:04:36.887

根据 Intel 手册，在 64 位模式下，这些寄存器旨在用作某些线性地址计算中的附加基址寄存器。我从第 3.7.4.1 节（第 4 卷中的第 86 页）中提取了这个。通常当 CPU 处于这种模式时，线性地址与有效地址相同，因为这种模式下通常不使用分段。

因此，在这个平面地址空间中，FS 和 GS 不仅在寻址本地数据，而且在寻址某些操作系统数据结构（pg 2793，第 3.2.4 节）中发挥作用，因此这些寄存器旨在供操作系统使用，但是那些特定的设计者决定。

在 32 位和 64 位模式下使用覆盖时有一些有趣的技巧，但这涉及到特权软件。

从“初衷”的角度来看，这很难说，除了它们只是额外的寄存器。当 CPU 处于*实地址模式*时，这就像处理器以高速 8086 运行，这些寄存器必须由程序显式访问。为了真正的 8086 仿真，您应该在*虚拟 8086 模式下*运行 CPU，并且不会使用这些寄存器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-04T23:17:13.513

FS 和 GS 段寄存器在 80386 处理器下的 16 位实模式或 16 位保护模式下非常有用，当时只有 64KB 段，例如在 MS-DOS 中。

当 80386 处理器于 1985 年推出时，在 MS-DOS 下具有 640KB RAM 的 PC 计算机很常见。RAM 很昂贵，而且 PC 大多在 MS-DOS 下以实模式运行，最大 RAM 量。

因此，通过使用 FS 和 GS，您可以有效地从程序中寻址两个 64KB 的内存段，而无需在需要寻址其他段而不是加载到 DS 或 ES 中时更改 DS 或 ES 寄存器。本质上，[Raffzahn 已经回答](https://stackoverflow.com/a/61763516/6910868)说这些寄存器在处理分散在内存中的元素时很有用，以避免一直重新加载其他段寄存器，如 ES。但我想强调的是，这仅与实模式或 16 位保护模式下的 64KB 段有关。

16 位保护模式是一种非常有趣的模式，它提供了从那时起从未见过的特性。这些段的长度可以在 1 到 65536 字节之间。每次内存访问的范围检查（检查段大小）由 CPU 实现，它在访问超出该段选择器表中指定的段大小的内存时引发中断。这防止了硬件级别的缓冲区溢出。您可以为每个内存块分配自己的段（对总数有一定的限制）。有像 Borland Pascal 7.0 这样的编译器使用自己的 DOS 扩展器制作在称为 DOS 保护模式接口 (DPMI) 的 16 位保护模式下在 MS-DOS 下运行的程序。

80286 处理器具有 16 位保护模式，但没有 FS/GS 寄存器。所以程序在使用这些寄存器之前必须先检查它是否在 80386 下运行，即使是在真正的 16 位模式下也是如此。请参阅[使用 FS 和 GS 注册 MS-DOS 实模式程序的示例](https://web.archive.org/web/19981205010625/http://www.ritlabs.com/ftp/pub/frd/exegrab.rar)。

# python - 烧瓶渲染模板（）返回“NameError：名称'app'未定义”

> ID：10810206
> 
> 赞同：18
> 
> 时间：2012-05-30T04:57:46.910
> 
> 标签：python, flask

我正在关注 Flask 的快速入门指南。[http://flask.pocoo.org/docs/quickstart/#static-files](http://flask.pocoo.org/docs/quickstart/#static-files) 我在按照指南操作时收到此错误。

```
/application
/__init__.py
/templates
    /hello.html

   @app.route('/hello/')
   @app.route('/hello/<name>')
   def hello(name=None):
       return render_template('hello.html', name=name)

    >python _init_.py 
        Traceback (most recent call last):
        File "_init_.py", line 4, in <module>
   @app.route('/hello/')
   NameError: name 'app' is not defined 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-12-06T03:15:03.297

也许这个？

```
from flask import Flask, request, render_template 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-05-29T06:23:58.120

唯一缺少的是

```
from flask import Flask, render_template 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-30T06:54:37.097

查看[Flask 网站](http://flask.pocoo.org/)上的最小程序，尤其是前两行：

```
from flask import Flask
app = Flask(__name__)

@app.route("/")
def hello():
    return "Hello World!"

if __name__ == "__main__":
    app.run() 
```

您的问题是您尚未[导入](http://docs.python.org/2/tutorial/modules.html)Flask 模块并且尚未初始化[Flask app object](http://flask.pocoo.org/docs/api/#api)。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-06-22T05:40:39.623

我很惊讶没有人将这个问题标记为已回答。正如许多人所建议的那样，我也可以确认`from flask import Flask, render_template`解决了问题

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-09-07T23:18:40.117

你需要：

```
from flask import request 
```

我认为这是 Flask 快速入门指南中的一个缺陷。

# c# - svcutil.exe 客户端代理和故障合约

> ID：10810210
> 
> 赞同：1
> 
> 时间：2012-05-30T04:58:23.370
> 
> 标签：c#, wcf, svcutil.exe, faultcontract

我的 svcutil.exe 生成的客户端 c# 代理代码中是否可以包含故障合同信息？
我的意思是，如果一个 Web 服务方法被标记为`FaultContractAttribute`，我希望在客户端代理方法的注释中提到它的类型参数，这样当我使用它时，我可以看到必须捕获哪些异常。
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:19:10.060

查看[http://wcfextras.codeplex.com/](http://wcfextras.codeplex.com/)

# php - 在 PHP 中用一个空格替换多个空格和换行符

> ID：10810211
> 
> 赞同：11
> 
> 时间：2012-05-30T04:58:23.697
> 
> 标签：php, string, whitespace, normalize

我有一个带有多个换行符的字符串。

字符串：

```
This is         a dummy text.               I need              

to                                      format
this. 
```

期望的输出：

```
This is a dummy text. I need to format this. 
```

我正在使用这个：

```
$replacer  = array("\r\n", "\n", "\r", "\t", "  ");
$string = str_replace($replacer, "", $string); 
```

但它没有按预期/要求工作。有些单词之间没有空格。

实际上我需要用单个空格分隔的所有单词转换字符串。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-30T05:02:16.163

我鼓励你使用`preg_replace`：

```
# string(45) "This is a dummy text . I need to format this."
$str = preg_replace( "/\s+/", " ", $str ); 
```

演示：[http ://codepad.org/no6zs3oo](http://codepad.org/no6zs3oo)

您可能已经在`" . "`第一个示例的部分中注意到了。紧跟标点符号的空格可能应该完全删除。快速修改允许这样做：

```
$patterns = array("/\s+/", "/\s([?.!])/");
$replacer = array(" ","$1");

# string(44) "This is a dummy text. I need to format this."
$str = preg_replace( $patterns, $replacer, $str ); 
```

演示：[http ://codepad.org/ZTX0CAGD](http://codepad.org/ZTX0CAGD)

# asp.net - 选项卡更改后上传不触发

> ID：10810212
> 
> 赞同：0
> 
> 时间：2012-05-30T04:58:27.257
> 
> 标签：asp.net, uploadify

选项卡更改后 Uploadify 脚本不会触发，因此我会定期`asp:FileUpload`进行，这仅允许我进行一次文件交互

有什么建议可以解决吗？

这是脚本；

```
<script type = "text/javascript">
    $(window).load(function () {
        $("#<%=FileUpload1.ClientID %>").fileUpload({
            'uploader': 'scripts/uploader.swf',
            'cancelImg': 'images/cancel.png',
            'buttonText': 'Browse Files',
            'script': 'Upload.ashx',
            'folder': 'uploads',
            'fileDesc': 'Image Files',
            'fileExt': '*.jpg;*.jpeg;*.gif;*.png',
            'multi': true,
            'auto': true
        });
    });
</script> 
```

* * *

这是选项卡定义，

```
<asp:TabContainer ID="tabMyHome" runat="server"
                  ActiveTabIndex="0"
                  CssClass="MyTabStyle"
                  AutoPostBack="True">
     <asp:TabPanel ID="tabRecent" runat="server"
                   HeaderText="Recent Activity"
                   Width="100%">
     </asp:TabPanel>
</asp:TabContainer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:03:37.153

猜测我会说，当您更改选项卡时，您正在添加一个新的文件上传，该文件与页面加载中存在的文件不同，并且不会附加 filupload 事件。

您可能需要`.fileUpload`在 tabcontainers 客户端`OnClientActiveTabChanged`事件中重新应用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:25:04.673

使用以下代码修复它

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
<ContentTemplate>
<script type="text/javascript">
    Sys.Application.add_init(function () {
        $("#<%=FileUpload1.ClientID %>").fileUpload({
            'uploader': 'scripts/uploader.swf',
            'cancelImg': 'images/cancel.png',
            'buttonText': 'Browse Files',
            'script': 'Upload.ashx',
            'folder': 'uploads',
            'fileDesc': 'Image Files',
            'fileExt': '*.jpg;*.jpeg;*.gif;*.png',
            'multi': true,
            'auto': true
        });
    });
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);
    function EndRequestHandler(sender, args) {
        $("#<%=FileUpload1.ClientID %>").fileUpload({
            'uploader': 'scripts/uploader.swf',
            'cancelImg': 'images/cancel.png',
            'buttonText': 'Browse Files',
            'script': 'Upload.ashx',
            'folder': 'uploads',
            'fileDesc': 'Image Files',
            'fileExt': '*.jpg;*.jpeg;*.gif;*.png',
            'multi': true,
            'auto': true
        });
    }                
 </script> 
```

# c# - 我可以获得当前未加载的程序集列表吗

> ID：10810213
> 
> 赞同：0
> 
> 时间：2012-05-30T04:58:28.060
> 
> 标签：c#, reflection

我想让使用我的产品的开发人员能够通过实现接口来扩展产品，然后将程序集放入执行文件夹中。我应该如何寻找这些类型，我是否必须通过文件夹中的每个 DLL 运行，或者我可以避免那些属于原始应用程序的那些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:02:56.350

你为什么不使用[微软的解决方案](http://msdn.microsoft.com/en-us/library/dd460648.aspx)？
据我了解，它可以解决您正在寻找的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:02:16.980

您可以将新程序集放入不同的文件夹（例如调用或插件或扩展），然后在运行时实例化它们；或者，维护产品程序集列表并使用 Path.GetFiles 并删除列表中出现的任何程序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T05:29:54.173

我将其用于用户定义的工具。

```
private static void getImplementedTypes(Type baseType, Assembly assembly, IList<Type> list) {
    Type[] types = assembly.GetExportedTypes();
    foreach (Type t in types) {
        if (baseType.IsInterface) {
            Type[] interfaces = t.GetInterfaces();
            foreach (Type i in interfaces) {
                if (i == baseType) list.Add(t);
            }
        }
        else {
            if ((!list.Contains(t)) && (t.IsSubclassOf(baseType)) && (!t.IsAbtract)) {
                list.Add(t);
            }
        }
    }
    return n;
} 
```

在一个循环中，我遍历工具目录中 Directory.GetFiles 找到的所有 DLL（或 EXE）：

```
Assembly assembly = Assembly.LoadFile("toolbox.dll");
List<Type> types = new List<Type>();
getImplementedTypes(typeof(ToolBase), assembly, types);
ToolBase theTool = Activator.CreateInstance(type, true) as ToolBase; 
```

这适用于接口和基类。

我不知道以不同的方式找到实现的类的方法。这可能要花点时间。因此，如果您知道要搜索哪些 DLL，只需遍历它们即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T05:58:22.403

最后，我选择简单地加载并搜索我在 bin 中找到的所有 dll。这是大部分代码。关键函数是“IsAssignableToGenericType”函数，它可以找到我正在寻找的通用接口。

[我相信这是通过反射](https://stackoverflow.com/questions/80247/implementations-of-interface-through-reflection)提供接口实现的大部分解决方案的链接

```
static AssemblyLocator()
    {
        AllDlls = GetAllDlls();
        SubscribersInBin = GetSubscribersInBin();
    }

    public static IEnumerable<Type> TypesImplementingInterface(Assembly[] assemblies, Type desiredType)
    {
        return assemblies
            .SelectMany(assembly => assembly.GetTypes())
            .Where(type => IsAssignableToGenericType(type, desiredType));
    }

    public static bool IsAssignableToGenericType(Type givenType, Type genericType)
    {
        if (givenType == null) throw new ArgumentNullException("givenType");
        if (genericType == null) throw new ArgumentNullException("genericType");

        var interfaceTypes = givenType.GetInterfaces();

        foreach (var it in interfaceTypes)
        {
            if (it.IsGenericType)
            {
                if (it.GetGenericArguments()[0].Name.Equals(genericType.GetGenericArguments()[0].Name))
                    return true;
            }
        }

        Type baseType = givenType.BaseType;
        if (baseType == null) return false;

        return (baseType.IsGenericType &&
            baseType.GetGenericTypeDefinition() == genericType) ||
            IsAssignableToGenericType(baseType, genericType);
    }

    private static ReadOnlyCollection<string> GetAllDlls()
    {
        string binFolder = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
        IList<string> dllFiles = Directory.GetFiles(binFolder, "*.dll", SearchOption.TopDirectoryOnly).ToList();
        return new ReadOnlyCollection<string>(dllFiles);
    }

    private static ReadOnlyCollection<Type> GetSubscribersInBin()
    {
        IList<Assembly> assembliesFoundInBin = new List<Assembly>();
        foreach (var item in AllDlls)
        {
            var assembly = System.Reflection.Assembly.LoadFrom(item);
            assembliesFoundInBin.Add(assembly);
        }

        var typesInBin = TypesImplementingInterface(assembliesFoundInBin.ToArray(), typeof(ISubscriber<T>));
        return new ReadOnlyCollection<Type>(typesInBin.ToList<Type>());
    } 
```

# iphone - 监控基于形状的区域与启动显着变化位置服务

> ID：10810214
> 
> 赞同：0
> 
> 时间：2012-05-30T04:58:44.937
> 
> 标签：iphone, objective-c, ios5, ios4, core-location

我目前正在开发一个基于位置的提醒应用程序，我正在尝试了解 iOS 4/5 位置服务和一些核心位置功能。由于我想使用不同大小的地理围栏（用户可以选择大小），我想知道是否需要将显着变化位置服务与区域监控结合起来，或者仅使用区域监控本身就足够了提醒消失。

据我了解重大变化位置服务，如果我切换手机信号塔，我的应用程序只会获得位置更新。这是否意味着如果地理围栏介于两者之间，则提醒不会响起？

与此相比，除了监控区域之外，区域监控是如何工作的？提醒会一直响还是有盲点？如果是这样，DistanceFilter 是否在这里发挥作用？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T03:39:53.193

您的用例应该包含区域监控。

> 据我了解重大变化位置服务，如果我切换手机信号塔，我的应用程序只会获得位置更新。这是否意味着如果地理围栏介于两者之间，则提醒不会响起？

这可能会发生，并且是您必须涵盖的边缘情况。我真的取决于很多事情，位置准确性就是其中之一。你肯定必须彻底测试那个。

> 与此相比，除了监控区域之外，区域监控是如何工作的？提醒会一直响还是有盲点？如果是这样，DistanceFilter 是否在这里发挥作用？

上次我检查（> 10 个月）区域监控并不总是足够准确。它有效，但比当前位置更多地使用蜂窝塔来监控区域。这意味着：不要仅依赖区域变化，也不要期望它们精确到米。

# javascript - XMLHttpRequest 不工作（空白页）

> ID：10810218
> 
> 赞同：0
> 
> 时间：2012-05-30T04:58:51.497
> 
> 标签：javascript, html, xml, xmlhttprequest

我从 W3Schools 复制了这段代码（连同原始 XML 文件 cd_catalog.xml），我得到了一个空白页：

```
<html>
<body>

<script type="text/javascript">
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET","cd_catalog.xml",false);
    xmlhttp.send();
    xmlDoc=xmlhttp.responseXML;

    document.write("<table border='1'>");
    var x=xmlDoc.getElementsByTagName("CD");
    for (i=0;i<x.length;i++)
    {
        document.write("<tr><td>");
        document.write(x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue);
        document.write("</td><td>");
        document.write(x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue);
        document.write("</td></tr>");
    }
    document.write("</table>");
</script>

</body>
</html> 
```

我试过 Opera、Firefox、IE 和 Chrome。没有什么。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T23:43:53.650

由于您没有使用 Web 服务器，请尝试执行以下操作：

```
xmlhttp.open("GET","file:///C:/cd_catalog.xml", false); 
```

您可能最终需要一个 Web 服务器，因为浏览器不允许您的脚本访问本地文件，例如，请参阅此处的讨论： [http ://www.webdeveloper.com/forum/showthread.php?t=233306](http://www.webdeveloper.com/forum/showthread.php?t=233306)

所以考虑在你的机器上设置一个简单的网络服务器，比如[lighttpd](http://www.lighttpd.net/)。

编辑：我解释规范的方式（[http://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#the-open%28%29-method](http://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#the-open%28%29-method)）是必须通过HTTP。不过还不是很清楚。A file: URL 在此上下文中可能不允许使用，因此预期上面的代码片段可能无法正常工作，您将**需要**一个 Web 服务器。

一个相关的问题是：

[在 IE XMLHttpRequest 中读取文件：// URL](https://stackoverflow.com/questions/2142156/read-file-urls-in-ie-xmlhttprequest)

和

[允许 Google Chrome 使用 XMLHttpRequest 从本地文件加载 URL](https://stackoverflow.com/questions/4819060/allow-google-chrome-to-use-xmlhttprequest-to-load-a-url-from-a-local-file)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T06:47:54.937

将您的代码上传到 Web 服务器。您将在所有浏览器（例如 IE、Chrome 或 Mozilla）上获得所需的输出。但是，如果您在本地机器上尝试相同的代码，那么 IE 和 Chrome 将无法工作。

# php - JQuery - 订单，自动更新价格，存储信息

> ID：10810219
> 
> 赞同：0
> 
> 时间：2012-05-30T04:59:00.153
> 
> 标签：php, jquery, wordpress

我使用 Wordpress 作为该网站的 CMS。基本上，该网站有不同类别的产品。产品存储为称为“产品”的自定义帖子类型

在前端，将有一个订单。我想弄清楚的是：客户希望即时更新“订单总数”。因此，如果用户为特定产品输入“5”，它会在击键后更新该总数。

此外，产品/服务可能属于不同的类别，这会影响价格。例如

产品：洗蜡

分类： 全方位服务 | 一旦结束

因此，如果产品 'Wash & Wax' 有一个文本`<input>`，并且在其下方是具有相应 的类别`radio buttons`，并且用户选择该产品可能是 10 美元的“全面服务”，或者该产品可能是 7 美元的“Once Over” ，我想弄清楚：

最好的方法是从后端提取数据，

将其存储在某种 JQuery 可访问的对象/数组中，

并让产品输入从该数据集中访问其相应的价格

目前，价格以每件产品为基础存储在数据库中。因此，产品“Wash & Wax (full service)”是 DB 中的一行，有自己的价格，而“Wash & Wax”（一次性）是 DB 中的一个单独的产品，有自己的价格。

编辑：

如果问题太具体，我真正要问的是：什么是提取 MySQL 数据的最佳方式，用于动态上下文（例如使用 JQuery 更新价格总计）以及将 HTML 输入与获取的链接连接起来的最佳方式是什么数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:49:18.547

我决定让一切变得更简单。我摆脱了类别作为前端方程式的一部分。我刚刚从数据库中提取了所有产品以及它们独特的 Slug 和 Price。数组的设置很简单：

```
$products = array(
     'the-unique-slug' => array(
          'id' => $id,
          'price' => $price,
     'next-unique-slug' => array(
     etc...... 
```

这样，即使类别发生变化，Slug 也将始终相同且唯一。

接下来，我决定为`<inputs>`某个产品的变体显示所有单独的文本。除了使用 jQuery，我隐藏了所有这些。然后我将类别放在类中：

```
<input type='text' class='raw standard product-input' name='photo-prints-1' />
<input type='text' class='direct standard product-input' name='photo-prints-2' />
etc.. 
```

因此，当用户更改为“标准”单选按钮和“原始”单选按钮时，JQuery 只是`show()`那些`<inputs>`拥有这些类的人，以及`hide()`任何不拥有这些类的人

最后，为了将数组放入 jQuery，我只是`Json_encoded(`) 它：

```
<script type="text/javascript"> var products = <?php echo json_encode($products) ?>;</script> 
```

# php - 通过引用修改数组

> ID：10810225
> 
> 赞同：6
> 
> 时间：2012-05-30T04:59:16.703
> 
> 标签：php, mysql, arrays, reference, multidimensional-array

我从我的 MySQL 数据库收到一个多维数组

```
Array
(
[0] => Array
    (
        [page] => categorypropose
        [value] => baby-sitters
        [id] => 357960
    )

[1] => Array
    (
        [page] => categorysearch
        [value] => adÃ©quate pour garder
        [id] => 357961
    )
...
) 
```

在这个数组中，我通过“自制”函数“loadtext”进行了一些 ISO-8859-1 到 UTF8 的转换。

但是当我这样做时：

```
 $array = $query->result_array();
    foreach($array as &$k)
    {
        foreach ($k as &$value)
        {
                            //Works
            $value = $this->loadtext($value, 'ISO-8859-1');
        }
    }
     //Back to normal as $this->loadtext never existed
     print_r($array); 
```

它不会保存更改（当我回显 $value 时，它​​可以工作，但最后不会保留修改...）

编辑：这是我必须使用的函数 loadtext （实际上，我没有做到，但我必须使用它......）

```
function loadtext($text,$charset){
    $text = stripslashes($text);
    if($charset!="UTF-8")
        $text = iconv("UTF-8",$charset,$text);
    $text = str_replace(" :","&nbsp;:",$text);
    $text = str_replace(" ;","&nbsp;;",$text);
    $text = str_replace(" !","&nbsp;!",$text);
    $text = str_replace(" ?","&nbsp;?",$text);
    $text = str_replace(" .","&nbsp;.",$text);
    $text = str_replace(" …","&nbsp;…",$text);
    return $text;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T05:05:22.397

你可以这样尝试：

```
$array = $query->result_array();
foreach($array as &$k)
{
    foreach ($k as $i => &$value)
    {
                        //Works
        $k[$i] = $this->loadtext($value, 'ISO-8859-1');
    }
}
 //Back to normal as $this->loadtext never existed
 print_r($array); 
```

但更好的是，您可以尝试`CONVERT()`在查询中使用 MySQL 函数，以便返回的字符串已经是 UTF8 格式。

[http://dev.mysql.com/doc/refman/5.0/en/charset-convert.html](http://dev.mysql.com/doc/refman/5.0/en/charset-convert.html)

至少，使用 PHP`mb_convert_encoding()`而不是你自制的函数。没有理由重新发明轮子。

[http://jp2.php.net/manual/en/function.mb-convert-encoding.php](http://jp2.php.net/manual/en/function.mb-convert-encoding.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T05:29:34.653

我自己找到了一个简单的答案，它非常适合我使用 php 中的另一种方法来更改我从 mysql 结果中获得的值

```
 // ur array from mysql       
       $array = $query->result_array();

       //try it works 100 % for me just one line of code to modify 
       $result= iconv('UTF-8', 'ASCII//TRANSLIT',$array); 
```

来源：php.net

```
 // or if doesnt work then u can try like this to modify u can put it inside a foreach loop where you are loopin values 

           $page = array['page']; // to acces that element in the array where to modify
           $result= iconv('UTF-8', 'ASCII//TRANSLIT',$page); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-28T02:15:47.050

我突然想到，对于这个特定问题还有另一种解决方案，可以完全避免通过引用修改数组的问题。

```
$array = array_map(function ($row) {
    return array_map(function ($col) { return mb_convert_encoding($col, 'ISO-8859-1'); }, $row);
}, $query->result_array()); 
```

这使用了仅从 PHP 5.3 起才可用的匿名函数，因此，如果您有旧的东西，则必须以不同的方式实现它，这可能不值得麻烦，但我认为这是一个很好的方法。

此外，这样做可能更有效/看起来更干净：

```
$colFn = function ($col) { return mb_convert_encoding($col, 'ISO-8859-1'); };
$rowFn = function ($row) use ($colFn) { return array_map($colFn, $row); };
$array = array_map($rowFn, $query->result_array()); 
```

# xslt - 将 Ant 构建文件转换为 Makefile

> ID：10810236
> 
> 赞同：1
> 
> 时间：2012-05-30T05:00:32.667
> 
> 标签：xslt, ant, makefile, docbook

我有 Docbook 中使用的 Ant 构建文件。现在我要将该 Ant 构建文件转换为使用 Xsltproc 处理器的 Makefile。我对 Makefile 或 Ant 都不是特别熟悉。所以请帮我转换它。有什么我应该遵循的资源吗？

这里我想， 1\. 将文件夹结构及其内容复制到另一个文件夹中 2\. 配置 java 系统属性 3\. 配置类路径

在 ant 脚本中，它有这样的代码，

```
<copy todir="${output-dir}">
<fileset dir="${ant.file.dir}/template">
<include name="**/*"/>
</fileset>
</copy>

 <java classname="com.nexwave.nquindexer.IndexerMain" fork="true"> 
         <sysproperty key="htmlDir" value="${output-dir}/content"/>
         <sysproperty key="htmlExtension" value="${html.extension}"/>
           <classpath>
        <path refid="classpath"/>
        <pathelement location="${xercesImpl.jar}"/>         
        <pathelement location="/usr/share/xml-commons/lib/xml-apis.jar"/>    
      </classpath>
    </java> 
```

我想在make中转换以上2个代码。谢谢..！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T22:27:32.913

Make 和 ANT 是非常不同的技术。除了最简单的用例之外，您的要求很难满足。

以下是一些技术挑战：

*   ANT 不是 Make。从表面上看，它看起来很相似，但在下面的工作方式却大不相同。
*   令人惊讶的是，make 不是很跨平台。不同的风格有细微的差异，可能会破坏 ANT 到 Makefile 的转换器。
*   ANT 旨在支持 Java 程序，这意味着它具有丰富的语法来管理诸如 Java 类路径之类的讨厌的东西。又难翻译。

# 更新

以下 ANT [java 任务](http://ant.apache.org/manual/Tasks/java.html)

```
 <java classname="com.nexwave.nquindexer.IndexerMain" fork="true"> 
         <sysproperty key="htmlDir" value="${output-dir}/content"/>
         <sysproperty key="htmlExtension" value="${html.extension}"/>
           <classpath>
        <path refid="classpath"/>
        <pathelement location="${xercesImpl.jar}"/>         
        <pathelement location="/usr/share/xml-commons/lib/xml-apis.jar"/>    
      </classpath>
 </java> 
```

可以翻译成下面的unix java命令行。

```
java \
   -DhtmlDir=$PUT_OUTPUT_DIR_HERE \
   -DhtmlExtension=$PUT_EXT_HERE \
   -cp $CLASSPATH:$PATH_TO_XERCES_JAR:/usr/share/xml-commons/lib/xml-apis.jar \
   com.nexwave.nquindexer.IndexerMain 
```

# ruby-on-rails - 使用分配的标签呈现帖子

> ID：10810241
> 
> 赞同：1
> 
> 时间：2012-05-30T05:01:20.123
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, tags, render

如果我使用此代码为我的应用程序设置标记系统，那么我将如何使用分配给它们的标记来呈现帖子。例如，如果我为几个帖子分配了一个运动标签，那么我将如何渲染所有带有分配给它的运动标签的帖子

```
 rails g model tag name:string
 rails g model tagging article_id:integer tag_id:integer
 rake db:migrate

 class Tagging < ActiveRecord::Base
   belongs_to :article
   belongs_to :tag
 end

 class Tag < ActiveRecord::Base
   has_many :taggings, :dependent => :destroy
   has_many :articles, :through => :taggings
 end

 class Article < ActiveRecord::Base
   has_many :comments, :dependent => :destroy
   has_many :taggings, :dependent => :destroy
   has_many :tags, :through => :taggings
   validates_presence_of :name, :content
   attr_writer :tag_names
   after_save :assign_tags

   def tag_names
     @tag_names || tags.map(&:name).join(' ')
   end

   private

   def assign_tags
     if @tag_names
       self.tags = @tag_names.split(/\s+/).map do |name|
         Tag.find_or_create_by_name(name)
       end
     end
   end
 end

 <p>
   <%= f.label :tag_names %><br />
   <%= f.text_field :tag_names %>
 </p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:15:22.597

也许是这样的：

```
# TagsController
def show
  @articles = Tag.find_by_name('sports').articles
end

# tags/show.html.haml
- @articles.each do |article|
  = render :partial => :article 
```

# jquery - 在表格中按字母顺序排列列表项，列表分隔符作为首字母

> ID：10810245
> 
> 赞同：-1
> 
> 时间：2012-05-30T05:01:24.847
> 
> 标签：jquery, android, iphone, jquery-mobile, cordova

在 jQuery Mobile 和 Phone Gap 中使用我已经实现了一个表格视图。我手动设置列表决策者如下：

```
<ul data-role="listview">

       <li data-role="list-divider">A</li>

      <li><a href="index.html">Adam Kinkaid</a></li>
      <li><a href="index.html">Alex Wickerham</a></li>
      <li><a href="index.html">Avery Johnson</a></li>

      <li data-role="list-divider">B</li>

      <li><a href="index.html">Bob Cabot</a></li>
      <li><a href="index.html">Bwaaaat</a></li>

     </ul> 
```

它适用于少量数据，但我们使用数据包作为列表项。

我需要按字母顺序显示项目，即使我以任何顺序输入数据。（无需通过硬代码手动设置）

单词的第一个字母作为部分的标题。

最后，如何为列表标题设置主题/颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:10:30.327

对于排序，您可以使用[sorttable.js](http://www.kryogenix.org/code/browser/sorttable/sorttable.js)，但这是用于对表格进行排序，您必须根据您的要求进行更改。

对于主题，您可以使用......

```
<section  data-role="page" data-theme="a"> 
```

[自定义主题](http://forum.jquery.com/topic/custom-theme-28-2-2011)有一个很好的链接。我希望它对你有用。

[http://www.adobe.com/devnet/dreamweaver/articles/theme-control-jquery-mobile.html](http://www.adobe.com/devnet/dreamweaver/articles/theme-control-jquery-mobile.html)

# javascript - IFRAME 加载清除浏览器撤消堆栈

> ID：10810246
> 
> 赞同：1
> 
> 时间：2012-05-30T05:01:26.363
> 
> 标签：javascript, html, dom, iframe, textarea

我在 IE 9、OS X Lion 上的 Chrome 19 和 OS Lion 上的 Safari 5.1.5（但不是 FF 12 OS X Lion）上看到了这种奇怪的行为。

[http://jsfiddle.net/N6t8P/6/](http://jsfiddle.net/N6t8P/6/)

每当我在页面上加载 iframe 时，撤消堆栈都会重置。通过在 textarea 中键入一些内容来尝试 JSFiddle 示例，按下按钮加载 iframe，然后尝试在 textarea 中撤消。iframe 加载后撤消不起作用。

除了实现我自己的撤消堆栈之外，还有什么办法可以解决这个问题？

# sockets - Python 套接字多个客户端

> ID：10810249
> 
> 赞同：40
> 
> 时间：2012-05-30T05:01:56.780
> 
> 标签：sockets, python-2.x

所以我正在开发一个需要套接字来处理多个客户端进行在线游戏的 iPhone 应用程序。我已经尝试过 Twisted，并且付出了很多努力，我未能立即发送一堆信息，这就是为什么我现在要尝试使用 socket。

我的问题是，使用下面的代码，您将如何连接多个客户端？我已经尝试过列表，但我无法弄清楚它的格式。在一次连接多个客户端并且我能够向特定客户端发送消息的情况下，如何实现这一点？

谢谢！

```
#!/usr/bin/python           # This is server.py file

import socket               # Import socket module
s = socket.socket()         # Create a socket object
host = socket.gethostname() # Get local machine name
port = 50000                # Reserve a port for your service.

print 'Server started!'
print 'Waiting for clients...'

s.bind((host, port))        # Bind to the port
s.listen(5)                 # Now wait for client connection.
c, addr = s.accept()     # Establish connection with client.
print 'Got connection from', addr
while True:
   msg = c.recv(1024)
   print addr, ' >> ', msg
   msg = raw_input('SERVER >> ')
   c.send(msg);
   #c.close()                # Close the connection 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2016-10-31T21:40:26.117

根据您的问题：

> 我的问题是，使用下面的代码，您将如何连接多个客户端？我已经尝试过列表，但我无法弄清楚它的格式。在一次连接多个客户端并且我能够向特定客户端发送消息的情况下，如何实现这一点？

使用您提供的代码，您可以执行以下操作：

```
#!/usr/bin/python           # This is server.py file                                                                                                                                                                           

import socket               # Import socket module
import thread

def on_new_client(clientsocket,addr):
    while True:
        msg = clientsocket.recv(1024)
        #do some checks and if msg == someWeirdSignal: break:
        print addr, ' >> ', msg
        msg = raw_input('SERVER >> ')
        #Maybe some code to compute the last digit of PI, play game or anything else can go here and when you are done.
        clientsocket.send(msg)
    clientsocket.close()

s = socket.socket()         # Create a socket object
host = socket.gethostname() # Get local machine name
port = 50000                # Reserve a port for your service.

print 'Server started!'
print 'Waiting for clients...'

s.bind((host, port))        # Bind to the port
s.listen(5)                 # Now wait for client connection.

print 'Got connection from', addr
while True:
   c, addr = s.accept()     # Establish connection with client.
   thread.start_new_thread(on_new_client,(c,addr))
   #Note it's (addr,) not (addr) because second parameter is a tuple
   #Edit: (c,addr)
   #that's how you pass arguments to functions when creating new threads using thread module.
s.close() 
```

正如 Eli Bendersky 提到的，您可以使用进程而不是线程，还可以检查 python`threading`模块或其他异步套接字框架。注意：检查留给您以实现您想要的方式，这只是一个基本框架。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-30T06:04:31.443

`accept`可以不断提供新的客户端连接。但是，请注意，它和其他套接字调用通常是阻塞的。因此，此时您有几个选择：

*   打开新线程来处理客户端，而主线程返回接受新客户端
*   如上所述，但使用进程而不是线程
*   使用异步套接字框架，如 Twisted 或其他许多框架

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-30T06:05:04.150

这是[SocketServer 文档](http://docs.python.org/library/socketserver.html#socketserver-tcpserver-example)中的示例，它是一个很好的起点

```
import SocketServer

class MyTCPHandler(SocketServer.BaseRequestHandler):
    """
    The RequestHandler class for our server.

    It is instantiated once per connection to the server, and must
    override the handle() method to implement communication to the
    client.
    """

    def handle(self):
        # self.request is the TCP socket connected to the client
        self.data = self.request.recv(1024).strip()
        print "{} wrote:".format(self.client_address[0])
        print self.data
        # just send back the same data, but upper-cased
        self.request.sendall(self.data.upper())

if __name__ == "__main__":
    HOST, PORT = "localhost", 9999

    # Create the server, binding to localhost on port 9999
    server = SocketServer.TCPServer((HOST, PORT), MyTCPHandler)

    # Activate the server; this will keep running until you
    # interrupt the program with Ctrl-C
    server.serve_forever() 
```

从这样的终端尝试

```
$ telnet localhost 9999
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
Hello
HELLOConnection closed by foreign host.
$ telnet localhost 9999
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
Sausage
SAUSAGEConnection closed by foreign host. 
```

您可能还需要使用 A [Forking 或 Threading](http://docs.python.org/library/socketserver.html#asynchronous-mixins) Mixin

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-20T17:28:02.147

该程序将打开 26 个套接字，您可以在其中将大量 TCP 客户端连接到它。

```
#!usr/bin/python
from thread import *
import socket
import sys

def clientthread(conn):
    buffer=""
    while True:
        data = conn.recv(8192)
        buffer+=data
        print buffer
    #conn.sendall(reply)
    conn.close()

def main():
    try:
        host = '192.168.1.3'
        port = 6666
        tot_socket = 26
        list_sock = []
        for i in range(tot_socket):
            s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            s.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)
            s.bind((host, port+i))
            s.listen(10)
            list_sock.append(s)
            print "[*] Server listening on %s %d" %(host, (port+i))

        while 1:
            for j in range(len(list_sock)):
                conn, addr = list_sock[j].accept()
                print '[*] Connected with ' + addr[0] + ':' + str(addr[1])
                start_new_thread(clientthread ,(conn,))
        s.close()

    except KeyboardInterrupt as msg:
        sys.exit(0)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-17T15:11:19.677

您可以使用[PySock](https://pypi.org/project/PySock/)，这是一个 python 库，可以让编写多客户端服务器变得非常容易。您可以从 PyPi 下载它，适用于 windows :`pip install PySock`和 Linux : `pip3 install PySock`。他们在 PyPi 介绍页面上有很好的样板代码。您可以在[此处查看](https://pypi.org/project/PySock/)或转到 GitHub[存储库](https://github.com/ShikharY10/PySock)以获取有关版本的更多见解。它提供了一些很棒的功能，即无需任何额外工作即可进行客户端-客户端通信，您可以对这些通信进行 E2E 加密。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-30T14:20:58.040

```
def get_clients():
    first_run = True
    startMainMenu = False

    while True:
        if first_run:
            global done
            done = False
            Thread(target=animate, args=("Waiting For Connection",)).start()

        Client, address = objSocket.accept()
        global menuIsOn
        if menuIsOn:
            menuIsOn = False  # will stop main menu
            startMainMenu = True

        done = True

        # Get Current Directory in Client Machine
        current_client_directory = Client.recv(1024).decode("utf-8", errors="ignore")

        # beep on connection
        beep()
        print(f"{bcolors.OKBLUE}\n***** Incoming Connection *****{bcolors.OKGREEN}")
        print('* Connected to: ' + address[0] + ':' + str(address[1]))
        try:
            get_client_info(Client, first_run)
        except Exception as e:
            print("Error data received is not a json!")
            print(e)
        now = datetime.now()
        current_time = now.strftime("%D %H:%M:%S")
        print("* Current Time =", current_time)

        print("* Current Folder in Client: " + current_client_directory + bcolors.WARNING)

        connections.append(Client)

        addresses.append(address)

        if first_run:
            Thread(target=threaded_main_menu, daemon=True).start()

            first_run = False
        else:
            print(f"{bcolors.OKBLUE}* Hit Enter To Continue.{bcolors.WARNING}\n#>", end="")
        if startMainMenu == True:
            Thread(target=threaded_main_menu, daemon=True).start()
            startMainMenu = False 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-10-27T16:56:20.093

```
#!/usr/bin/python
import sys
import os
import socket
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)         
port = 50000

try:
    s.bind((socket.gethostname() , port))
except socket.error as msg:
    print(str(msg))
s.listen(10)
conn, addr = s.accept()  
print 'Got connection from'+addr[0]+':'+str(addr[1]))
while 1:
        msg = s.recv(1024)
        print +addr[0]+, ' >> ', msg
        msg = raw_input('SERVER >>'),host
        s.send(msg)
s.close() 
```

# javascript - ext js中停靠项目的事件

> ID：10810259
> 
> 赞同：-2
> 
> 时间：2012-05-30T05:03:23.640
> 
> 标签：javascript, extjs4, extjs-mvc

我是 ext js 的菜鸟，遇到了一个问题。
我创建了一个应用程序，这是`init`我的控制器的功能。

```
init: function () {
        console.log('initialized filesystem controller');
        this.control({
            'filesystemtree': {
                itemdblclick: this.OpenFile,
                select: this.NodeSelected
            },
            'filesystemtree filesystemmenu button[text="Delete"]': {
                click:this.DeleteButtonClicked
            }
        });
    } 
```

这是视图`xtype : 'filesystemtree'`

```
Ext.define('IDE.view.fileSystem.List', {
    extend: 'Ext.tree.Panel',
    alias: 'widget.filesystemtree',
    title: 'Navigation2',
    store: 'FileSystems',
    rootVisible: 'false',
    dockedItems: [{
        xtype:'filesystemmenu',
        dock:'top'
    }],
    initComponent: function () {
        console.log('file system tree initializing');
        this.callParent(arguments);
    }
}) 
```

这是`xtype:filesystemmenu`停靠在的视图`filesystemtree`

```
Ext.define('IDE.view.fileSystem.FileSystemMenu', {
    extend: 'Ext.toolbar.Toolbar',
    alias: 'widget.filesystemmenu',
    items: [
        {
            xtype: 'splitbutton',
            text: 'Menu',
            menu: new Ext.menu.Menu({
                items: [
                        {
                            text: 'Delete'
                        },
                        {
                            text: 'Copy'
                        },
                        {
                            text: 'Paste'
                        },
                        {
                            text: 'Cut'
                        },
                        {
                            name: 'Rename',
                            xtype: 'textfield',
                            emptyText: 'Enter text to rename'
                        }
                    ]
            })
        },
        {
            text: 'Add Item',
            id:'FSAddItemButton'
        },
        '->',
        {
            xtype: 'box',
            id: 'fileSystemNodeNameLabel'
        }
    ]
}) 
```

但是在控制器中，我无法将单击事件附加到`filesystemmenu`其中本身作为停靠项存在于`filesystemtree`. 基本上控制器中的这条线不起作用。

```
'filesystemtree filesystemmenu button[text="Delete"]': {
                click:this.DeleteButtonClicked
            } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:19:56.793

看看你的选择器。您要求它找到一个带有“删除”文本的按钮，但是您没有任何符合条件的组件，因为菜单的子项默认为 Ext.menu.Item，因此您的选择器应该是：

```
'filesystemtree filesystemmenu menuitem[text="Delete"]' 
```

# git - 如何 git 克隆位于我拥有 SSH 密钥访问权限的远程服务器上的 GIT 存储库？

> ID：10810264
> 
> 赞同：1
> 
> 时间：2012-05-30T05:03:37.843
> 
> 标签：git

我可以通过 ssh@xx.xx.xx.xx 连接到我的服务器而无需密码。

我在服务器上的 GIT 下有一个项目：/home/myuser/project

如何在本地克隆它，以便我可以在本地进行提交等，然后推送到该服务器？

如您所知，我是 GIT 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:06:59.017

`git clone ssh@xx.xx.xx.xx:/home/myuser/project`

但是，如果 /home/myuser 是 $HOME 可以缩写为`git clone ssh@xx.xx.xx.xx:project`

# android - 第一次如何设置安卓应用程序？

> ID：10810266
> 
> 赞同：-1
> 
> 时间：2012-05-30T05:03:50.010
> 
> 标签：android, sqlite, installation

在我的程序中，我如何第一次设置我的 SQLite 数据库？执行此操作的程序结构是什么？

我能想到的唯一方法是保持第一次布尔值：

if (isFirstInstall) setup();

这似乎很不专业。是否有进行此类设置的 onFirstInstall() 调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:17:19.250

您可以将布尔值存储到 SharedPreferences 中，并在应用程序启动时检查值（第一次与否）。

检查[sharedPreferences的文档](http://developer.android.com/reference/android/content/SharedPreferences.html)

希望这个[线程](https://stackoverflow.com/a/3010867/726547)可以帮助你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T05:28:01.970

试试这个

```
private SharedPreferences mPreferences;

    boolean firstTime = mPreferences.getBoolean("firstTime", true);
    if (firstTime) { 
        SharedPreferences.Editor editor = mPreferences.edit();
        editor.putBoolean("firstTime", false);
        editor.commit();
        showMiddleActivity();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T05:19:52.703

您可以尝试使用此代码。

调用**checkFirstLaunch();** 来自 onCreate()。

```
private boolean checkFirstLaunch() {
        try {
            PackageInfo info = getPackageManager().getPackageInfo(getPackageName(), 0);
            //int currentVersion = info.versionCode;
            SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
            int lastVersion = prefs.getInt(PreferencesActivity.KEY_HELP_VERSION_SHOWN, 0);
            if (lastVersion == 0) {
                isFirstLaunch = true;
            } else {
                isFirstLaunch = false;
            }

        } catch (PackageManager.NameNotFoundException e) {
            Log.w(TAG, e);
        }
        return false;
    } 
```

你得到布尔结果。

```
if (isFirstLaunch) {
    //code    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T06:25:20.960

而不是弄清楚它是否是第一次启动，您可以检查数据库是否存在，如果它丢失则创建它。

```
public void createDataBase() throws IOException {
    if ( checkIfDataBaseExist() ) {
        // db exists, do nothing
    } else {
        // By calling this method and empty database will be created into
        // the default system path of your application
        this.getReadableDatabase();
        try {
            // Do you db copying here
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }
}

private boolean checkIfDataBaseExist() {
    File dbFile = new File(DB_PATH + DB_NAME);
    return dbFile.exists();
} 
```

# c# - 创建移动客户端可以侦听的套接字以获取通知

> ID：10810269
> 
> 赞同：1
> 
> 时间：2012-05-30T05:04:17.633
> 
> 标签：c#, .net, sockets

我有一个客户端移动应用程序需要监听来自服务器的更新。但是服务器一次只将消息发送给一个客户端（它不是广播）。如何跟踪将消息发送给谁，并使用套接字发送？移动应用程序应该是套接字的服务器，还是 asp.net 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:16:12.937

移动应用程序应该是客户端。它应该具有唯一的 ID（GUID 效果很好）。服务器接受来自移动应用程序的连接。然后移动应用程序发送其唯一 ID，服务器创建一个存储套接字和唯一 ID 的对象。如果有 10 个客户端连接，则存储 10 个套接字，每个套接字都有自己的唯一 ID。

现在服务器有一个更新要推出：

循环遍历您的对象，通过每个套接字将数据发送到移动应用程序。

ps 我不认为asp.net 会为此工作。但是您可以轻松编写 C# .NET 应用程序。

编辑：

此外，如果要在 C# .NET 应用程序中自托管 WCF 服务，则可以从 ASP.NET Web 应用程序使用该服务。然后，这将允许您将数据从 Web 应用程序发送到 C# 应用程序，并且 C# 应用程序可以将该数据向下传递到套接字，或者触发 c# 应用程序将某些数据沿着套接字发送到移动应用程序。

# file - 在unix中将多个文件合并为一个文件

> ID：10810270
> 
> 赞同：1
> 
> 时间：2012-05-30T05:04:23.220
> 
> 标签：file, unix, mainframe, cat

我有两种类型的文件 - 一个简单的字符文件和一个 pdf 文件。

第一个文件的名称是plainFile.abc，第二个文件的名称是pdfFile.pdf

我想将这两个文件合并成一个文件。

目标文件的名称将被合并。文件

我正在使用 cat 命令来实现相同的目的：

```
Way 1:

cat plainFile.abc > combined.file
cat pdfFile.pdf > combined.file

Way 2:

cat plainFile.abc > combined.file
cat pdfFile.pdf >> combined.file 
```

请注意上述方式中“>”和“>>”的区别。

在方式一中，第二个文件没有附加到目标文件，即使定义说“操作符 > 可用于将多个文件合并为一个文件”。

在方式二中，两个文件被合并，但是第二个文件被附加到第一个文件结束的位置。我不想要这个。我希望第二个文件从新行的新位置开始。

这个想法是将目标文件发送到将被解析的大型机。

所以我希望第二个文件从位置一开始：

```
----+----1----+----2----+----3----+----4----+----5----+----6----+----7----+----8
second file should start from position one 
```

但是，现在如果第一个文件在位置 3 结束，那么第二个文件将在其后立即附加，即在位置 4。

如何达到我的要求？

有没有比 CAT 命令更好的方法？

谢谢阅读！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T08:20:56.490

> 我希望新文件从新行的开头开始。

如果这是您想要的，`cat`可能就是您想要的命令。您可以通过管道空白回声来插入换行符：

```
cat plainFile.abc > combined.file
echo >> combined.file
cat pdfFile.pdf >> combined.file 
```

或者，一种稍微不那么混乱的方式，您可以使用 echo 创建一个只有一个空行的文件：

```
echo > blank_line 
```

然后使用这个 cat 命令：

```
cat plainFile.abc blank_line pdfFile.pdf > combined.file 
```

* * *

# 编辑

> 1) pdf 不是从新行开始的。2) 此外，pdf 在大型机中显示为损坏的文件。CAT是将多个不同类型的文件组合成单个文件的正确方法吗？

如果你想**[连接它们](http://www.webopedia.com/TERM/C/concatenate.html)**，那么是的，你使用`cat`. 如果您想将许多文件组合在一起然后能够将它们分开，那么您**不要**使用 cat 因为那不是它的用途。二进制 pdf 将被损坏，因为您已将其连接到 ascii 文件的末尾。如果您希望以后能够分离文件，请遵循 infgeoax 的建议并使用`tar`.

`cat`一旦你完成它，它就不会做让你分开你已经连接在一起的东西的事情。例如，您有 3 个字符串：“are”、“a”、“dyes”。你将它们连接起来，你就会“准备好”。如果没有任何先验知识，您就不能再次将它们分成 3 个字符串。是“是”、“一个”、“染料”吗？还是“a”、“read”、“yes”？您可以添加空格或其他字符来分隔字符串，但如果您开始使用的字符串包含这些字符之一怎么办？

If you don't have `tar` on this mainframe, you'll have to think of something else. Maybe instead of using `cat` on the pdf file, use something like `hexdump`, `od`, or `uuencode`/`uudecode` to dump the binary file to ascii, then on the mainframe, rebuild the binary file.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T05:10:10.590

为什么不使用`tar`.

```
tar cf outputfile plainfile.abc pdfFile.pdf 
```

在大型机上，您可以反转该过程

```
tar xf ouputfile 
```

# iphone - CTFrameGetLineOrigins 的来源不正确

> ID：10810273
> 
> 赞同：1
> 
> 时间：2012-05-30T05:04:45.083
> 
> 标签：iphone, ios, core-text

我使用 CTFrameGetLineOrigins 获取每条线的原点。但它总是返回错误的行原点。

编码：

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetTextMatrix(context, CGAffineTransformIdentity);
CGContextTranslateCTM(context, 0, self.bounds.size.height);
CGContextScaleCTM(context, 1.0, -1.0);

CTFontRef font = CTFontCreateUIFontForLanguage(kCTFontUserFontType, self.font.pointSize, NULL);

CFAttributedStringSetAttribute(attrString, CFRangeMake(0, CFAttributedStringGetLength(attrString)), kCTForegroundColorAttributeName, self.textColor.CGColor);
CFAttributedStringSetAttribute(attrString, CFRangeMake(0, CFAttributedStringGetLength(attrString)), kCTFontAttributeName, font);

CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(attrString);
CGPathRef path = CGPathCreateWithRect(CGRectInset(rect, TEXT_MARGIN, TEXT_MARGIN), NULL);
CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), path, NULL);

CFArrayRef lines = CTFrameGetLines(frame);
size_t numOfLines = CFArrayGetCount(lines);
CGPoint lineOrigins[numOfLines];
CTFrameGetLineOrigins(frame, CFRangeMake(0, 0), lineOrigins);
for (CFIndex i = 0; i < numOfLines; i++) {
    CTLineRef line = CFArrayGetValueAtIndex(lines, i);
    CFArrayRef runs = CTLineGetGlyphRuns(line);
    size_t numOfRuns = CFArrayGetCount(runs);

    for (CFIndex j = 0; j < numOfRuns; j++) {
        CTRunRef run = CFArrayGetValueAtIndex(runs, j);

        CGRect strFrame = CGRectZero;
        CGFloat width = 0;
        CGFloat height = 0;
        CGFloat leading = 0;
        CGFloat ascent = 0;
        CGFloat descent = 0;
        CFRange strRange = CTRunGetStringRange(run);
        CGFloat offsetX = CTLineGetOffsetForStringIndex(line, strRange.location, NULL);

        width = (CGFloat)CTRunGetTypographicBounds(run, CFRangeMake(0, 0), &ascent, &descent, &leading);
        width += leading;
        height = ascent + descent;
        NSLog(@"Line %ld : Offset Y: %f", i+1, lineOrigins[i].y);
        strFrame = CGRectMake(lineOrigins[i].x + offsetX + TEXT_MARGIN, lineOrigins[i].y + TEXT_MARGIN - descent, width, height);
        strFrame = CGRectIntegral(strFrame);
        CFDictionaryRef attr = CTRunGetAttributes(run);
        if (attr != NULL) {
            CFStringRef url = CFDictionaryGetValue(attr, kCTFontURLAttribute);
            if (url != NULL) {
                [self.wordsFrame addObject:[NSDictionary dictionaryWithObjectsAndKeys:(__bridge NSString *)url, @"URL", NSStringFromCGRect(strFrame), @"frame", nil]];
            }
        }
    }
}
CTFrameDraw(frame, context);

CFRelease(font);
CGPathRelease(path);
CFRelease(frame);
CFRelease(framesetter); 
```

结果：

```
2012-05-30 12:58:21.464 hjday[9362:707] Line 1 : Offset Y: 97.000000
2012-05-30 12:58:21.466 hjday[9362:707] Line 2 : Offset Y: 68.000000
2012-05-30 12:58:21.472 hjday[9362:707] Line 3 : Offset Y: 39.000000 
```

谁能帮我找出我的代码有什么问题？或者有没有其他方法可以获取每个 CTRun 的来源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T02:57:55.057

我知道了： `strFrame = CGRectMake(lineOrigins[i].x + offsetX + TEXT_MARGIN, self.bounds.size.height - (lineOrigins[i].y + TEXT_MARGIN - descent) - height, width, height);`

需要翻转y坐标

# javascript - 用于 QR 图像解码器的 Javascript 库

> ID：10810277
> 
> 赞同：12
> 
> 时间：2012-05-30T05:04:51.693
> 
> 标签：javascript

我浏览了几个网站，但没有找到用于在 javascript 中解码 QR 码图像的代码片段。我浏览了 qrCode.js 但它只有 QR 码生成器。我正在寻找可以解码 base64 QR 图像并获取详细信息的二维码解码器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T05:14:20.963

有一个 Java 库的 JavaScript 端口用于读取二维码：[Web QR](http://www.webqr.com/index.html)
代码可以在[GitHub上找到](https://github.com/LazarSoft/jsqrcode)

从自述文件：

> 用法：
> 
> 按以下顺序包含脚本：
> 
> ```
> <script type="text/javascript" src="grid.js"></script>
> <script type="text/javascript" src="version.js"></script>
> <script type="text/javascript" src="detector.js"></script>
> <script type="text/javascript" src="formatinf.js"></script>
> <script type="text/javascript" src="errorlevel.js"></script>
> <script type="text/javascript" src="bitmat.js"></script>
> <script type="text/javascript" src="datablock.js"></script>
> <script type="text/javascript" src="bmparser.js"></script>
> <script type="text/javascript" src="datamask.js"></script>
> <script type="text/javascript" src="rsdecoder.js"></script>
> <script type="text/javascript" src="gf256poly.js"></script>
> <script type="text/javascript" src="gf256.js"></script>
> <script type="text/javascript" src="decoder.js"></script>
> <script type="text/javascript" src="qrcode.js"></script>
> <script type="text/javascript" src="findpat.js"></script>
> <script type="text/javascript" src="alignpat.js"></script>
> <script type="text/javascript" src="databr.js"></script> 
> ```
> 
> 获取解码信息集：
> 
> ```
> qrcode.callback = function(decodedData) {
>     //...
> } 
> ```
> 
> 解码图像：
> 
> ```
> qrcode.decode(url or DataURL) 
> ```
> 
> 从带有“qr-canvas”ID 的画布解码：
> 
> ```
> qrcode.decode() 
> ```

在 repo 中也可以找到一个[示例。](https://github.com/LazarSoft/jsqrcode/blob/master/src/test.html)

# windows - 在 Windows 中使用 pkg-config 查找库

> ID：10810279
> 
> 赞同：6
> 
> 时间：2012-05-30T05:05:12.677
> 
> 标签：windows, waf, pkg-config

我正在尝试使用 pkg-config 在 Windows (msvc) 中找到 gstreamer 库

> > pkg-config gstreamer-0.10 --cflags --libs

但我得到了这样的结果

```
Package gstreamer-0.10 was not found in the pkg-config search path.
Perhaps you should add the directory containing `gstreamer-0.10.pc'
to the PKG_CONFIG_PATH environment variable
No package 'gstreamer-0.10' found 
```

安装库时会创建一个 .pc 之类的文件（通过使用 RPM、deb 或其他二进制打包系统或从源代码编译自动创建）。我在我的 gstreamer 目录中找不到 .pc 文件。

我是否应该创建一个包含所有必要细节的 .pc 文件。

```
prefix=C:\Program Files (x86)\OSSBuild\GStreamer\v0.10.7
exec_prefix=${prefix}
libdir=${exec_prefix}\lib
includedir=${prefix}\sdk\include\gstreamer-0.10
toolsdir=${exec_prefix}\bin
pluginsdir=${exec_prefix}\lib\gstreamer-0.10
datarootdir=${prefix}\share
datadir=${datarootdir}
girdir=${datadir}/gir-1.0
typelibdir=${libdir}/girepository-1.0

Name: GStreamer
Description: Streaming media framework
Requires: glib-2.0, gobject-2.0, gmodule-no-export-2.0, gthread-2.0, libxml-2.0
Version: 0.10.35
Libs: -L${libdir} -lgstreamer-0.10
Cflags: -I${includedir} 
```

或者还有其他方法可以做到这一点，或者我错过了什么？

希望您能提供帮助。感谢您花时间阅读问题。

好吧，我这样做是为了找到解决方案，为什么我`not found`在为 gstreamer 配置的 waf 中收到消息

```
conf.check_cfg(atleast_pkgconfig_version='0.0.0') 
conf.check_cfg(package='gstreamer-0.10', uselib_store='GSTREAMER', args='--cflags --libs', mandatory=True) 
```

该代码适用于linux，也应该适用于windows。

* * *

**稍后添加**

制作 .pc 并将 .pc 目录的路径设置为 PKG_CONFIG_PATH 环境变量就可以了。这并不难

看看[这个](http://people.freedesktop.org/~dbn/pkg-config-guide.html#writing)。感谢您阅读并帮助我.. :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T16:07:59.130

pkg-config 是一个很棒的工具，但不幸的是在 Windows（与 UNIX 相比）上没有标准的可执行 PATH 或 PKG_CONFIG_PATH。

虽然您可以恢复定义选项 --with-gstreamer-include-dir ... --with-gstreamer-lib-dir ... 并避免 pkg-config 依赖，但您也可以使用 --pkgconfig-exe c： \path\to\pkg-config.exe --pkgconfig-path c:\path\to\gstreamer;c:\path\to\otherlib，这将有助于拥有一个好看的 wscript，尤其是在使用大量 pkg 时-配置库。

典型的 Win32 用户可能在直接设置 PKG_CONFIG_PATH 和 PATH 时遇到问题，或者偶然发现一个神秘的“未找到”错误，然后检查 config.log。

如果您确实添加了特定于 Windows 的 pkg-config 选项，那么每个人都可能会感兴趣。您可以编写一个 pkgconfig_opts 工具并将其作为 waf extra 提交。

# c# - WPF 排序子集合

> ID：10810284
> 
> 赞同：2
> 
> 时间：2012-05-30T05:05:52.637
> 
> 标签：c#, wpf, visual-studio-2010

我有一组想要在 ItemsControl 中显示的项目。然后，这些项目中的每一个都将具有应在每个项目内水平显示的子项目的集合。我的问题是如何对 XAML 中的子项进行排序？我通常会使用 CollectionViewSource 但在这种情况下无法正常工作。下面是一个简单的例子。在这种情况下， somedata 是我的项目集合（字符串），而这些项目是字符的集合。我只想修改此示例，以便每一行都对所有字符进行排序。

把这是一个窗口的构造函数：

```
 string[] somedata = new string[] { "afkhsdfgjh", "fsdkgjhsdfjh", "sdfjhdfsjh" };
        mainList.ItemsSource = somedata; 
```

这作为 XAML（在 Window 标签内）

```
<ItemsControl Name="mainList">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <ItemsControl ItemsSource="{Binding}" >
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal"></StackPanel>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemContainerStyle>
                    <Style TargetType="ContentPresenter">
                        <Setter Property="Margin" Value="0,0,5,0"></Setter>
                    </Style>
                </ItemsControl.ItemContainerStyle>
            </ItemsControl>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:14:19.653

您也可以将 CollectionViewSource 用于子项目。这是示例视图模型：

```
public class Item : ViewModel
{
    public String Name
    {
        get { return name; }
        set
        {
            if (name != value)
            {
                name = value;
                OnPropertyChanged("Name");
            }
        }
    }
    private String name;

    public ObservableCollection<String> SubItems
    {
        get
        {
            return subItems ?? (subItems = new ObservableCollection<String>());
        }
    }
    private ObservableCollection<String> subItems;
} 
```

...和标记：

```
<ListBox ItemsSource="{Binding}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <StackPanel.Resources>
                    <CollectionViewSource Source="{Binding SubItems}" x:Key="subItemsViewSource">
                        <CollectionViewSource.SortDescriptions>
                            <scm:SortDescription Direction="Ascending" />
                        </CollectionViewSource.SortDescriptions>
                    </CollectionViewSource>
                </StackPanel.Resources>
                <TextBlock Text="{Binding Name}" />
                <ListBox ItemsSource="{Binding Source={StaticResource subItemsViewSource}}">
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"></StackPanel>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                </ListBox>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

在使用一些数据初始化数据上下文的代码中：

```
 public MainWindow()
    {
        InitializeComponent();
        DataContext = new ObservableCollection<Item>
        {
            new Item
            {
                Name = "John",
                SubItems = 
                {
                    "Mary", "Peter", "James"
                },
            },
            new Item
            {
                Name = "Homer",
                SubItems = 
                {
                    "Lisa", "Bart", "Marge"
                },
            }
        };
    } 
```

诀窍是将描述 CollectionViewSource 的资源放入主列表项的布局控件的资源中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:34:56.543

*您可以在内部ItemsControl*上使用值转换器。转换器将简单地返回已排序的数组。

```
public class ArraySortConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value != null && value is string)
        {
            return new string((value as string).OrderBy(ch => ch).ToArray());
        }
        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException("Cannot convert back");
    }
} 
```

我想您还必须添加一个*ItemsControl.ItemTemplate*才能实际使用转换器，例如：

```
<ItemsControl.ItemTemplate>
    <DataTemplate>
        <ContentPresenter Content="{Binding Converter={StaticResource ArraySorter}}" />
    </DataTemplate>
</ItemsControl.ItemTemplate> 
```

# android - 创建一个未显示在根操作系统的已安装列表中的 android 应用程序？

> ID：10810289
> 
> 赞同：0
> 
> 时间：2012-05-30T05:06:39.427
> 
> 标签：android, rooted-device

我是一位经验丰富的 android 开发人员，没有很多利用 root android 操作系统功能的经验。我想为我的 root 手机创建一个 android 应用程序，它没有出现在正在运行的服务、已安装的应用程序、系统应用程序列表等中。

这怎么能做到？有人可以指导我正确的方向吗？

谢谢并恭祝安康，

罗杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:02:49.367

不可能。您只能从菜单启动器中隐藏您的应用程序，但应用程序会显示在已安装的应用程序和正在运行的服务中。

只有一种解决方案可以实现您想要的：构建您自己的固件

# jinja2 - Jinja2继承不起作用

> ID：10810296
> 
> 赞同：4
> 
> 时间：2012-05-30T05:08:33.993
> 
> 标签：jinja2

我正在尝试在谷歌应用引擎上的 jinja2 中使用继承。但到目前为止我还没有做到。你能指出我做错了什么吗？

这是我的`base.html`：

```
{{text}}
{% block title %}
Failure
{% endblock %} 
```

此模板由以下内容扩展`title.html`：

```
{% extends "base.html" %}
{% block title %}
World!!
{% endblock %} 
```

两个模板都在同一个目录`/templates/wiki`中。

这就是我加载模板和渲染的方式`base.html`：

```
import os
import jinja2
import webapp2

template_dir = os.path.join(os.path.dirname(__file__), '../templates/wiki')
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir), autoescape = True)

class MyHandler(webapp2.RequestHandler):
def get(self):
    templ = jinja_env.get_template('base.html')
    self.response.out.write(templ.render(text = 'Hello,')) 
```

假定的输出是

> 你好世界！！！

但我可以得到：

> 你好，失败

Jinja2 版本是 2.6。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T09:16:32.127

您必须渲染 title.html 而不是 base.html。

# ruby-on-rails - 获取类上定义的直接实例方法

> ID：10810302
> 
> 赞同：4
> 
> 时间：2012-05-30T05:09:30.240
> 
> 标签：ruby-on-rails, ruby

我想获取**直接**在类上定义的所有方法

这是我目前所做的：

```
class Mine
  def immediate
  end

  (instance_methods - ancestors.second.instance_methods)
  # [:immediate]
end 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T05:23:22.970

```
Mine.instance_methods false 
```

这看起来不错吗？或者你喜欢怎么写？像 Mine.my_instance_methods 之类的东西？:)

# ejabberd - 如何使用 pidgin 配置本地 ejabberd 服务器？

> ID：10810307
> 
> 赞同：1
> 
> 时间：2012-05-30T05:10:21.580
> 
> 标签：ejabberd, pidgin

我已经在本地安装了 ejabberd 服务器（localhost:5280），现在的问题是如何使用 pidgin 配置本地 ejabberd 服务器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T05:16:32.383

像往常一样的jabber客户端，首先运行pidgin，输入：

*   协议 - XMPP
*   域 - ejabberd 主机
*   资源 - 5280

您可以在 ejabberd 管理网页中创建的用户的用户名和密码，`http://192.168.0.1:5280/admin`. 输入所有这些数据并单击添加。

运行 ejabberd。

现在您可以连接 pidgin 或其他 jabber 客户端。

# ruby - NoMethodError（nil:NilClass 的未定义方法“[]”）

> ID：10810311
> 
> 赞同：7
> 
> 时间：2012-05-30T05:10:34.753
> 
> 标签：ruby

我有一个非常奇怪的错误实例：

```
NoMethodError (undefined method `[]' for nil:NilClass):
app/controllers/main_controller.rb:150:in `block in find_data_label'
app/controllers/main_controller.rb:149:in `each'
app/controllers/main_controller.rb:149:in `find_data_label'
app/controllers/main_controller.rb:125:in `data_string'
app/controllers/main_controller.rb:35:in `catch' 
```

奇怪的是，错误所在的第 150 行位于一个循环内，并且在它决定出错之前完美地执行了 11 次。我不知道为什么它会正常工作，但在 if 语句返回 true 的循环有效之前失败了一行。

这是代码：

```
 def find_data_label(label)
    @fields.each do |f|
      puts "f[:field_data]['Title'] = #{f[:field_data]['Title']}" # <--- line 150
      if f[:field_data]['Title'] == label
        return f
      end
    end
  end 
```

这是我收到错误之前的输出：

```
f[:field_data]['Title'] = Name
f[:field_data]['Title'] = Name
f[:field_data]['Title'] = Mobile number
f[:field_data]['Title'] = Email
f[:field_data]['Title'] = Date of birth
f[:field_data]['Title'] = Gender
f[:field_data]['Title'] = Street name
f[:field_data]['Title'] = Street number
f[:field_data]['Title'] = My local Puckles store is in
f[:field_data]['Title'] = Suburb
f[:field_data]['Title'] = Postcode
Completed 500 Internal Server Error in 2047ms 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T05:18:35.343

您的 @fields 元素之一在 :field_data 中不包含标题。在调用之前尝试检查@fields `@fields.each`：

```
Rails.logger.warn '-'*40
Rails.logger.warn @fields.inspect 
```

检查服务器日志以查看您在 @fields 中有哪些元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T04:27:49.793

对于该错误，另请参阅： http: [//mongoid.org/en/mongoid/docs/tips.html](http://mongoid.org/en/mongoid/docs/tips.html)

**例如**，也许您正在使用 MongoID 和旧版本的 Ruby。

# java - 在 Eclipse 中离线安装谷歌应用引擎插件

> ID：10810312
> 
> 赞同：1
> 
> 时间：2012-05-30T05:10:48.777
> 
> 标签：java, eclipse, google-app-engine, eclipse-plugin

[我下载了Eclipse 3.7](https://developers.google.com/eclipse/docs/install-from-zip)的谷歌应用引擎存档，但是当我在 Eclipse 中开始安装时，它开始使用互联网下载插件。当我断开连接并尝试安装时，它给了我一条消息，说无法联系该站点。这是为什么 ？如何离线安装谷歌应用引擎插件？

继续计算依赖关系，然后开始获取存档中已经存在的 content.jar：

![在此处输入图像描述](../Images/e5bc73e5627827337ab56b0175f232f7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:30:14.093

您应该取消选中“在安装过程中联系所有更新站点以查找所需的软件”。希望这有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T05:47:06.730

按照他们给出的链接在本地安装 GP 的说明。

[https://developers.google.com/eclipse/docs/install-from-zip](https://developers.google.com/eclipse/docs/install-from-zip)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T05:16:04.610

要安装插件，如果我没记错的话，您必须将插件链接或存档拖放到 eclipse 中。

# c# - ajax 日历控件的 Ajax 日历日渲染事件或如何阻止 ajax 日历中的某些日期

> ID：10810319
> 
> 赞同：1
> 
> 时间：2012-05-30T05:11:51.980
> 
> 标签：c#, asp.net, calendar

禁用 ajax 日历控件上的日期。

我可以使用以下脚本在 asp 日历控件中阻止日期。图像示例.. ![在此处输入图像描述](../Images/e492b17da971c55129fa0f117aec6d4c.png) 我正在从数据库中读取预订日期并以不同颜色突出显示这些日期。这在 asp.net 日历中工作正常，但我想在 ajax 日历控件中实现相同。

```
protected void CalendarDayRender(object sender, System.Web.UI.WebControls.DayRenderEventArgs e)
{
    // If the month is CurrentMonth
    if (!e.Day.IsOtherMonth)
    {
        foreach (DataRow dr in ds.Tables[0].Rows)
        {
            if ((dr["BookingDate"].ToString() != DBNull.Value.ToString()))
            {
                DateTime dtEvent = (DateTime)dr["BookingDate"];
                if (dtEvent.Equals(e.Day.Date))
                {
                    e.Cell.BackColor = Color.PaleVioletRed;
                   // e.Day.IsSelectable = False;

                }
            }
        }
    }
    //If the month is not CurrentMonth then hide the Dates
    else
    {
        e.Cell.Text = "";
    }
} 
```

我需要对 Ajax 日历控件做同样的事情

但是当我将相同的代码放在 Ajax prerender 事件下时，我无法做到这一点

```
 protected void AjaxCalendar_PreRender(object sender, EventArgs e)
    {
        //startdate= enddate="2012-06-25"
        DateTime startDate = Helper.GetUAEDateTime();
        DateTime endDate = DateTime.Now.AddDays(10);

        AjaxCalendar.StartDate = startDate;
        AjaxCalendar.EndDate = endDate;     
//Here i nee code to block date if it is booked in the database 
    } 
```

例如，我看了一下，以便我可以从后面的代码中做到这一点，但到目前为止，我无法使用 Ajax 日历控件来做到这一点。

我正在从数据库中读取值并阻止已经预订的日期。

我会很感激这方面的帮助

供参考的 HTML 代码

```
<div>

        <asp:TextBox ID="TextBox1" runat="server" Height="27px" Width="279px"></asp:TextBox>
        <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
        <asp:Calendar ID="Calendar1" runat="server" BackColor="White" OnDayRender="CalendarDayRender" 
            BorderColor="#3366CC" BorderWidth="1px" Font-Names="Verdana" Font-Size="8pt" 
            ForeColor="#003399" Height="200px" Width="220px" CellPadding="1" 
            DayNameFormat="Shortest"  >
            <DayHeaderStyle BackColor="#99CCCC" ForeColor="#336666" Height="1px" />
            <NextPrevStyle Font-Size="8pt" ForeColor="#CCCCFF" />
            <OtherMonthDayStyle ForeColor="#999999" />
            <SelectedDayStyle BackColor="#009999" ForeColor="#CCFF99" Font-Bold="True" />
            <SelectorStyle BackColor="#99CCCC" ForeColor="#336666" />
            <TitleStyle BackColor="#003399" BorderColor="#3366CC" BorderWidth="1px" 
                Font-Bold="True" Font-Size="10pt" ForeColor="#CCCCFF" Height="25px" />
            <TodayDayStyle BackColor="#99CCCC" ForeColor="White" />
            <WeekendDayStyle BackColor="#CCCCFF" />
        </asp:Calendar>

        <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
        <asp:CalendarExtender ID="AjaxCalendar" runat="server"  
             TargetControlID="TextBox2" Format="yyyy-MM-dd" 
             onprerender="AjaxCalendar_PreRender" >
        </asp:CalendarExtender>
    </div> 
```

# android - 当我点击确定按钮时，Android AlertDialog 总是退出

> ID：10810322
> 
> 赞同：1
> 
> 时间：2012-05-30T05:12:10.247
> 
> 标签：android

单击确定后是否有某种方法可以进行验证。我没有关闭它，但是当我单击确定时它会关闭。我编写了一个使用一些编辑文本的自定义 AlertDialog。问题是我无法验证任何东西。如果验证失败，我想更改消息并告诉用户，但它只是关闭。我正在使用 AlertBuilder

```
 builder.setPositiveButton(DialogInterface.OnClickListener(){
               @Override
                public void onClick(DialogInterface dialog, int which) {
                  // I don't dismiss here.
                }

           } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T05:19:08.843

您可以通过覆盖 onClickListener 来做到这一点。诀窍是在创建并显示对话框后获取按钮。

```
//  Create you dialog here and show it
...
dialog.show();

Button positiveButton = dialog.getButton(DialogInterface.BUTTON_POSITIVE);
positiveButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View onClick) {
        //  Valid checking
        ...

        if (valid) {
            dialog.dismiss();
        } else {
            //  Not valid
        }

    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T05:28:07.787

如果你在 onClick 方法中没有写任何内容，无论你是否愿意，它都会拒绝，那么为什么你问这个问题，因为你没有在该方法中写任何东西。因为它是 alertdialog 它将被关闭，如果您不想关闭它，请使用**setNeutralButton**而不是**setPositiveButton**。如果您使用中性按钮，它不会关闭

# ios4 - 如何在后台发送 iPhone 应用程序？

> ID：10810325
> 
> 赞同：-1
> 
> 时间：2012-05-30T05:12:26.627
> 
> 标签：ios4, cocos2d-iphone, background-process, mapkit

我想创建一个在后台工作的应用程序。首先，我允许用户让这个应用程序在后台工作。

在此之后，应用程序将进入后台，有效地工作并向我发送我想要的信息。

所以，请告诉我如何在我的 iPhone 应用程序中执行它。

每一个建议都将不胜感激。

谢谢，

CP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:40:52.787

您可以使用UIApplicationDelegate 类中的[applicationDidEnterBackground方法来响应您的应用程序进入后台的事件。](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationDidEnterBackground)有一个对应的 willEnterForeground 方法。

你不能做的是创建一个唯一目的是在后台运行的应用程序。没有“在后台启动”操作，据我所知，您无法手动强制应用程序在运行时进入后台。除非您在应用程序的用户界面中提供一些有用的用户功能，否则 Apple 将不允许您的应用程序出现在 App Store 上。

# opencv - 有没有办法在 Windows 上安装 OpenCV 二进制文件？

> ID：10810327
> 
> 赞同：1
> 
> 时间：2012-05-30T05:12:58.390
> 
> 标签：opencv

我需要使用 traincascade 和 createsamples 实用程序。

我需要在许多计算机上执行此操作，并且不想自己构建它们，因为这些计算机没有任何开发工具。

我已经搜索了很多说明，但他们都说诸如“运行安装程序并安装到程序文件”之类的东西。除了我没有看到任何安装程序。我已经下载了一个 200MB 的 exe OpenCV-2.4.0.exe，但在运行时它只是解压缩到某个文件夹。该文件夹包含源文件和 cmake 文件，但我不想自己构建。库文件在那里，但没有 exe 文件（用于 traincascade 和 createsamples）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:16:16.513

在您能找到的最低操作系统（xp、vista 或 7）上构建 64 位版本和 32 位版本，然后构建您自己的安装程序。

# iphone - 即使添加透明边框后，旋转图像也有锯齿状边框

> ID：10810336
> 
> 赞同：3
> 
> 时间：2012-05-30T05:14:52.637
> 
> 标签：iphone, ios, uiimage, image-rotation

在我的应用程序中，我需要旋转图像。我旋转了图像，但它们有锯齿状的边框。我用谷歌搜索发现添加透明边框可以解决问题，但边框仍然是锯齿状的。

我的代码是

```
-(void)CreateRotatedImage:(UIImage *)image Number:(int)Number    
            {    
                UIImage *ImageBackground=[UIImage imageNamed:@"white-highlight.png"];

CGSize ImageBackgroundSize = CGSizeMake(60, 50);
UIGraphicsBeginImageContext(ImageBackgroundSize);
CGRect ImageBackgroundRect = CGRectMake(0.0, 0.0, ImageBackgroundSize.width, ImageBackgroundSize.height);
[ImageBackground drawInRect:ImageBackgroundRect];
ImageBackground = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

CGSize ImageSize = CGSizeMake(50, 40);
UIGraphicsBeginImageContext(ImageSize);
CGRect ImageRect = CGRectMake(0.0, 0.0, ImageSize.width, ImageSize.height);
[image drawInRect:ImageRect];
image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

UIGraphicsBeginImageContext(CGSizeMake(60,50));
[ImageBackground drawAtPoint:CGPointMake(0,0)];
[image drawAtPoint:CGPointMake(5,5)];
// MyscrollView.backgroundColor = [UIColor clearColor];
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

UIImage *pin=[UIImage imageNamed:@"pin.png"];
UIGraphicsBeginImageContext(CGSizeMake(60,50));
[newImage drawAtPoint:CGPointMake(0,0)];
[pin drawAtPoint:CGPointMake(newImage.size.height/2,0)];
// MyscrollView.backgroundColor = [UIColor clearColor];
UIImage *IntermediateImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

CGRect imageRrect = CGRectMake(0, 0, IntermediateImage.size.width, IntermediateImage.size.height);
UIGraphicsBeginImageContext( imageRrect.size ); 
[IntermediateImage drawInRect:CGRectMake(2,2,IntermediateImage.size.width-2,IntermediateImage.size.height-2)];    
   UIImage *i = UIGraphicsGetImageFromCurrentImageContext();  
    UIGraphicsEndImageContext();

CGSize iSize = CGSizeMake(110, 70);

UIGraphicsBeginImageContext(iSize);

CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetAllowsAntialiasing(context, YES);
 CGContextSetShouldAntialias(context, YES);
CGContextRotateCTM (context, radians(5));
[i drawAtPoint:CGPointMake(0, 0)];
UIImage *RotatedImage=UIGraphicsGetImageFromCurrentImageContext();

//RotatedImage=[RotatedImage resizedImage:iSize interpolationQuality:kCGInterpolationHigh];  

} 
```

# iphone - 在计算器屏幕上逐位删除数字

> ID：10810348
> 
> 赞同：3
> 
> 时间：2012-05-30T05:16:43.567
> 
> 标签：iphone, ios, xcode, xcode4

我想在计算器屏幕上逐位删除一个数字，但我只能删除完整的数字。有什么方法吗？

```
-(IBAction)cancelInput:(float)result1{

        NSString *myString = [[NSNumber numberWithFloat:result] stringValue];
        int str=[myString length]-1;
        NSString *newstring = [[NSNumber numberWithInt:str] stringValue];
        calculatorScreen.text= [NSString stringWithFormat:newstring];
        //NSLog(@"%d ",str);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T05:25:00.473

干得好，

```
NSString *myString = [[NSNumber numberWithFloat:result] stringValue];
myString = [myString substringToIndex:[myString length]-1];
calculatorScreen.text= myString; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T05:28:44.573

int str=[myString length]-1 只会返回你的字符串的长度，比如如果你的号码是 9876，它会返回 3(4-1) 并且你的 newstring 会是 3。如果你想删除你的最后一个字符必须创建 myString 的子字符串。

```
string = [string substringToIndex:[string length] - 1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T09:08:25.633

```
-(IBAction)backPressed:(UIButton *)sender
{
self.display.text=[self.display.text substringToIndex:[self.display.text length]-1];
if ( [self.display.text isEqualToString:@""] || [self.display.text isEqualToString:@"-"])
{
self.display.text =@"0";
}

} 
```

这是按钮的核心功能。我冒昧地添加了 if 功能，以便它可以处理一些基本问题。像往常一样，将 display 替换为您的主标签。If 函数有助于反检查您的标签是否为空“”或有负号“-”，并会自动将其替换为“0”，在这方面类似于 clear。您可以在其中运行 clear 方法。但是使用

```
self.display.text =@"0"; 
```

为了更好地澄清。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T10:13:31.730

使用此代码：

```
else if([character isEqualToString:(NSString*) Delete])
{
    NSInteger index_of_char_to_remove=[_display length]-1;
    if(index_of_char_to_remove>=0)
    {
        [_display deleteCharactersInRange:NSMakeRange(index_of_char_to_remove, 1)];
        last_character_is_operator=NO;
    }
} 
```

当按'C'时，它会检查这个条件并一一删除数据

# ios - 如何让透明背景看到主屏幕？

> ID：10810349
> 
> 赞同：5
> 
> 时间：2012-05-30T05:16:55.787
> 
> 标签：ios, cocoa-touch, uiview

> **可能重复：**
> [透明 iphone 应用程序](https://stackoverflow.com/questions/9514376/transparent-iphone-application)

我想做一个用户可以看到主屏幕的应用程序，这意味着该应用程序图标所在的屏幕。谁能告诉如何做到这一点？我试图通过设置来做到这一点：

```
self.view.backgroundColor=[UIColor clearColor];
self.view.opaque=NO; 
```

但它没有显示透明屏幕。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:15:58.300

不，使用官方 SDK 是不可能的..

编辑：哎呀，经过一番搜索，这个问题似乎是这个问题的[重复](https://stackoverflow.com/questions/9514376/transparent-iphone-application)..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:11:43.933

您可以在 appDelegate 中将图像添加到窗口

```
UIImage* bgImage = [UIImage imageNamed:@"bg.png"];
UIImageView* bgView = [[UIImageView alloc]initWithImage:bgImage];
[self.window addSubview:bgView];
[bgView release]; 
```

然后您可以根据您的要求设置所有视图的背景，默认情况下它是 clearColor

```
[self.view setBackgroundColor:[UIColor colorWithRed:100 green:0 blue:0 alpha:0.1]]; // for red transparent

[self.view setBackgroundColor:[UIColor colorWithRed:0 green:100 blue:0 alpha:0.1]]; // for green transparent

[self.view setBackgroundColor:[UIColor colorWithRed:0 green:0 blue:100 alpha:0.1]]; // for blue transparent 
```

# android - 我如何从android中的另一个类调用方法？

> ID：10810351
> 
> 赞同：-2
> 
> 时间：2012-05-30T05:17:05.147
> 
> 标签：android

我有两个问题。两者都扩展了 Activity。

A级

```
public void displayinfo() 
{
setContentView(R.layout.dynamicinfo);
//Add some buttons dynamically here
//do some processing
// move on to Class B
} 
```

在 B 类中：如果按下 BACK 按钮，我想在 UI 中返回 A 类状态。

B类

```
//Register a listener for this button
Backbutton.setOnClickListener(new OnClickListener() 
{
public void onClick(View arg0)
{
Log.i("setOnClickListener", "Pressed Back Button ");
Toast.makeText(mycontext, "Pressed Back Button", Toast.LENGTH_SHORT).show();
//HERE I want to go back class's function in UI as well as restoring the sttae for that screen.
} 
```

我怎么做？我环顾四周，问了一些问题。他们没有清楚地回答我在寻找什么。因此发布了。

谢谢。我想我在 B 类的 UI 屏幕中创建的布局上添加了自己的后退按钮——而不是使用键盘上的常规“后退”按钮。可能这就是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:26:09.460

如果 A 类和 B 类都是活动，并且 B 类活动是从 A 类活动开始的，那么您应该只完成 B 类活动，然后您应该返回 A 类并保留其状态。

我不确定您是否在问这个问题，因为这似乎是一个非常基本的 android 活动流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T05:26:53.237

甲类：

```
public void displayinfo() 
{
setContentView(R.layout.dynamicinfo);
//Add some buttons dynamically here
//do some processing
// move on to Class B

/*For starting activity B use this code*/
Intent in=new Intent(this,CalssB.class);
startActivity(in);

} 
```

现在在 B 类你只需要完成活动 B 代码：

```
Backbutton.setOnClickListener(new OnClickListener() 
{
public void onClick(View arg0)
{
Log.i("setOnClickListener", "Pressed Back Button ");
Toast.makeText(mycontext, "Pressed Back Button", Toast.LENGTH_SHORT).show();

/* This  will finish current activity B and back to activity A with same state.*/
finish();
} 
```

请参阅此链接以了解详细信息。 [http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T05:27:06.620

以下代码可帮助您在按下后退按钮时将活动从 B 类导航到 A 类。

ClassA.java

```
/***********/
startActivity(new Intent(ClassA.this,CalssB.class); 
```

ClassB.java

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub

    if(keyCode == KeyEvent.KEYCODE_BACK)
    {
        finish();
         //startActivity(new Intent(ClassB.this,ClassA.class));
         Toast.makeText(getApplicationContext(), "Backbutton pressed", 30).show();
    }
    return super.onKeyDown(keyCode, event);
   } 
```

此代码用于后退按钮.. 如果在按钮单击中您需要将页面导航到 ClassA 意味着使用以下代码中的任何一个..

ClassB.java

```
 btn.onClick(){

        finish(); 
          (or)
         startActivity(new Intent(ClassB.this,ClassA.class));

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T05:28:28.603

你到底是怎么**搬到**的`ClassB`？您可以`ClassB`使用`Intent`.

```
public void displayinfo() 
{
  setContentView(R.layout.dynamicinfo);

  //move on to Class B like this:
  Intent k = new Intent(this, ClassA.class);
  startActivity(k);
} 
```

现在，当您移动到 ​​时`ClassB`，按下**Back**按钮，它会自动移动到`ClassA`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T04:35:06.713

最后我弄清楚出了什么问题。在通过 Intent 机制调用下一个活动之前，我从每个活动中调用了一个 finish()。因此，当从不同的活动中按下后退按钮时，没有什么可去的。因此该APP曾经崩溃。

感谢所有友好的回应。非常感激。与往常一样，从每个响应中都学到了一些新东西。

我通过删除需要存在的活动中的完成（）来修复它。我不必重新做或重新构建 UI（甚至是动态按钮）。:-)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-30T05:24:01.767

在 b 类中添加

```
function addReturn(ClassA back){
// back.take over the control
} 
```

如果您想灵活地使用您的视口，我会使用接口或扩展。

在 a 类中，在通过控制之前，您需要将“this”添加到 b 类。

# authentication - 条带身份验证

> ID：10810354
> 
> 赞同：0
> 
> 时间：2012-05-30T05:17:25.357
> 
> 标签：authentication, stripe-payments

我无法在 stripe.com 中进行身份验证 - 使用基本身份验证

```
public class Str extends HttpServlet {

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        PrintWriter pw=response.getWriter();
        pw.println("Hello World");
        HttpClient client= new HttpClient();
        String req="https://api.stripe.com/";
        client.getParams().setAuthenticationPreemptive(true);
        client.getState().setCredentials(new AuthScope(req, 443, null),  new UsernamePasswordCredentials("<api-key>"));
        client.getHostConfiguration().setHost(req, 443, "https");

        PostMethod post= new PostMethod("https://api.stripe.com/v1/charges/");
        //post.addParameter("id", "<id>");
        int status=client.executeMethod(post);
        pw.println(status);

    }

} 
```

我正在展示我的代码...在那里我使用 HTTP Basic Auth 向 stripe.com 提供用户凭据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-16T10:22:44.320

希望这会帮助你。

这里 API_KEY 表示密钥

```
HttpResponse httpResponse;
String request ='card[number]='+card_name+'&card[exp_year]='+card_exp_year+'&card[exp_month]='+card_exp_month+'&card[cvc]='+card_cvv+'&amount='+amount+ '&currency='+currency;
Http httpObject = new Http();
HttpRequest httpRequest = new HttpRequest();
httpRequest.setEndpoint(sHttpEndPoint);
httpRequest.setMethod('POST');
Blob headerValue = Blob.valueOf(API_KEY + ':');
String authorizationHeader = 'BASIC ' +
EncodingUtil.base64Encode(headerValue);
httpRequest.setHeader('Authorization', authorizationHeader);
httpRequest.setBody(request);  
httpResponse = httpObject.send(httpRequest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:46:07.543

尝试：`new UsernamePasswordCredentials("<api-key>", "")`

# vb.net - 将控件值（多行文本框、NumericUpDowns、复选框）保存到文件/从文件中加载

> ID：10810355
> 
> 赞同：0
> 
> 时间：2012-05-30T05:17:29.917
> 
> 标签：vb.net, load, save

我正在寻找一种方法来保存和加载表单中存在的所有控件的值。我的表单有大约 100 个控件，分布在 7 个选项卡上。控件包括（多行）`TextBoxes`（字符串）、`NumericUpDowns`（整数、小数）和`Checkboxes`（布尔值）。

如果用户单击保存按钮，应出现“保存文件”对话框，允许用户指定保存文件的目录和文件名。然后应将控件的所有值写入该文件。

如果用户单击加载按钮，则应出现“打开文件”，用户可以在其中选择以前保存的保存文件。然后，所有控件都应采用保存文件中的值。

我已经在我的表单中实现了应用程序设置，现在当我单击保存时，它通过`My.Settings.Save()`. 如果我单击加载它会加载它们。
但是，我的项目要求可以制作多个保存文件以反映多个配置。据我了解，应用程序设置仅允许应用程序数据文件夹中的单个 .config 文件。

那么如何编写一个保存/加载例程来保存/加载不同的配置呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:49:05.243

[此](http://www.codeproject.com/Articles/20917/Creating-a-Custom-Settings-Provider?msg=4266719#xx4266719xx)站点上的代码提供了另一个提供程序来处理应用程序设置。可以对文件的目标目的地进行编码`.settings`。

我添加了一个`CopyFile`例程，将生成的`.setting`文件复制到同一目录，但名称不同，由用户指定。编码：

> ```
>  If SaveFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then
>         Dim savefile As String
>         savefile = SaveFileDialog1.FileName
>         Try
>             My.Computer.FileSystem.CopyFile(My.Application.Info.Title & ".settings", savefile, True)
>         Catch ex As Exception
>             MsgBox(ex.Message)
>         End Try
>     Else
>         'Nothing
>     End If 
> ```

现在再次加载用户保存的设置，我制作了加载例程，它将所选文件复制到根文件夹并覆盖“Form1.settings”

> ```
>  If OpenFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then
>         Dim loadfile As String
> 
>         loadfile = OpenFileDialog1.FileName
> 
>         Try
>             My.Computer.FileSystem.CopyFile(loadfile, My.Application.Info.Title &    ".settings", True)
>         Catch ex As Exception
>             MsgBox(ex.Message)
>         End Try
>         Application.Restart()
>     Else
>         'Nothing
>     End If 
> ```

该例程执行`Application.Restart()`这样的操作，即执行 Form1_load 事件并且控件复制`.settings`文件中的值

> ```
> Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
>      TextBox1.Text = My.Settings.Text1 
> End Sub 
> ```

现在，当用户单击保存时，将`My.Settings.Save()`执行并将`Form1.settings`文件复制到用户指定的`.settings`文件中。
当用户单击加载时，用户指定的`.settings`文件被覆盖`Form1.settings`并且应用程序重新启动，从文件中读取值`Form1.settings`。

# ruby-on-rails-3.2 - Carrierwave 错误消息：无法使用 MiniMagick 进行操作，可能不是图像？

> ID：10810356
> 
> 赞同：13
> 
> 时间：2012-05-30T05:17:50.343
> 
> 标签：ruby-on-rails-3.2, carrierwave, ruby-1.9, minimagick

我正在将我的应用程序升级到 Ruby 1.9 上的 Rails 3.2。我不得不放弃`attachment_fu`。Carrierwave 似乎是明显的替代品。在这个阶段，我正在将文件上传到文件系统（还没有云文件）。

我在 Lion，XCode 4.3.2，安装了命令行工具。跑步：

```
$ brew doctor
# Your system is raring to brew. 
```

我可以在此配置中上传和调整图像大小：

*   导轨 3.1.4
*   红宝石 1.8.7
*   载波 0.5.8
*   mini_magick 3.4

我可以在新配置中上传图片：

*   导轨 3.2.3
*   红宝石 1.9.3（或 1.9.2）
*   载波 0.6.2

（后跟`$ bundle update`），但使用调整大小会`mini_magick`返回此错误消息：

```
"File Failed to manipulate with MiniMagick, maybe it is not an image Original Error: MiniMagick::Invalid", where File is the carrierwave uploader. 
```

FileUploader 包含：

```
include CarrierWave::MiniMagick
def store_dir .. end # the shipped default 
process :resize_to_limit => [500, 600] 
```

我的 Attachment 类（带有`mount_uploader :file, FileUploader`）是 、 和其他附件类的父`Portrait`类`ReferenceLetter`。每个附件类都继承自`Attachment`、 is`:polymorphic => true`和`belongs_to :attachable`(User) ，而后者又继承自`has_many :portraits`、`:reference_letters`等`:as => :attachable`。

这些都不起作用（从carrierwave的已知问题页面链接）：

[为什么这个 RMagick 调用会产生分段错误？](https://stackoverflow.com/questions/2838307/why-is-this-rmagick-call-generating-a-segmentation-fault)

我不想按照这里的建议手动安装 ImageMagick：

[carrierwave + mini_magick gems = 不是图像错误](https://stackoverflow.com/questions/9905499/carrierwave-mini-magick-gems-not-an-image-error)

我正在使用自制软件。帮助会很棒。谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-24T06:43:17.507

今天正在与同样的错误作斗争。问题不在 mini_magick 中，问题出在 imagemagick 中的**DELEGATES**选项中

如果你跑

```
convert -list configure 
```

你应该有这样的东西

```
Name          Value
-----------------------------------------------------------------
...
CONFIGURE     ./configure  '--with-bzlib=yes' '--with-fontconfig=yes' '--with-freetype=yes' '--with-gslib=yes' '--with-gvc=yes' '--with-jpeg=yes' '--with-jp2=yes' '--with-png=yes' '--with-tiff=yes' '--disable-shared'
CONFIGURE_PATH /usr/local/etc/ImageMagick/
COPYRIGHT     Copyright (C) 1999-2012 ImageMagick Studio LLC
...
DELEGATES     bzlib djvu fontconfig freetype gvc jpeg jng jp2 lcms lqr openexr png rsvg tiff x11 xml zlib
...
VERSION       6.7.5 
```

但在我的情况下，关键 DELEGATES 只有 xml 和 zlib 值

```
DELEGATES     xml zlib 
```

**解决方案是**从源代码安装 imagemagick 并将参数添加到 ./configure

```
1\. wget http://www.imagemagick.org/download/ImageMagick.tar.gz
2\. tar xvfz ImageMagick.tar.gz
3\. cd ImageMagick
4\. ./configure --with-bzlib=yes --with-fontconfig=yes --with-freetype=yes --with-gslib=yes --with-gvc=yes --with-jpeg=yes --with-jp2=yes --with-png=yes --with-tiff=yes --disable-shared
5\. make
6\. sudo make install
7\. sudo ldconfig /usr/local/lib
8\. run again "convert -list configure" and look at changes 
```

您可以在此处找到 MacOS 的安装说明[http://www.imagemagick.org/script/advanced-unix-installation.php](http://www.imagemagick.org/script/advanced-unix-installation.php)

**更新**

由于某些原因，系统可能没有 jpeg 转换库。要解决此问题，您可以使用 apt-get 或 ppa 安装 imagemagick 以及所有需要的依赖项，或者尝试手动安装

```
sudo apt-get install libjpeg62 
```

在此处查看更多信息[https://askubuntu.com/questions/211627/how-to-add-support-for-the-jpeg-image-format](https://askubuntu.com/questions/211627/how-to-add-support-for-the-jpeg-image-format)

**2013 年 1 月 26 日更新**

安装**libpng**

按照此链接[http://www.libpng.org/pub/png/libpng.html](http://www.libpng.org/pub/png/libpng.html)并找到“源代码”块。复制最新版本的链接

```
1\. wget http://download.sourceforge.net/libpng/libpng-1.5.13.tar.gz
2\. tar xvfz libpng-1.5.13.tar.gz 
3\. cd libpng-1.5.13/
4 ./configure
5\. make
6\. sudo make install
7\. Rebuild imagemagick 
```

获得**JPEG 支持的另一种方法**

```
1\. curl -O http://www.ijg.org/files/jpegsrc.v8c.tar.gz
2\. tar zxvf jpegsrc.v8c.tar.gz
3\. cd jpeg-8c/
4\. ./configure
5\. make
6\. sudo make install
7\. Rebuild imagemagick 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-01T16:22:20.927

**2014 年 2 月**

我刚遇到这个问题，很高兴能花一天时间从源代码编译 ImageMagick，但我想我会`brew update && brew upgrade imagemagick`先尝试一下。

```
==> Upgrading 1 outdated package, with result:
imagemagick 6.8.7-7 
```

有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-19T08:38:56.170

首先确保你的机器有它需要的所有编译器和工具。

```
sudo yum groupinstall "Development Tools"
sudo yum install rpmdevtool libtool-ltdl-devel

sudo yum install ImageMagick-devel 
```

# android - 如何将 QCAR (Vuforia) 的投影和模型视图矩阵应用于 min3D 场景

> ID：10810360
> 
> 赞同：2
> 
> 时间：2012-05-30T05:18:32.070
> 
> 标签：android, opengl-es, android-ndk, qcar-sdk

我想将 Qualcomm 的增强现实 SDK (Vuforia) 与 min3D 库一起使用并加载 obj 模型。如何将 QCAR (Vuforia) 与 min3D 合并？如何将 QCAR (Vuforia) 的投影和模型视图矩阵应用于 min3D？以便在 min3d.glsurfaceview 中正确渲染场景？有没有人开发过一个例子？你的体验如何？

如何将 QCAR 在 C 中生成的 movdelview 和项目矩阵应用到 Java 的 Min3D 场景中？建议我实现这个。任何已经解决这个问题的示例代码都是有帮助的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:16:04.493

我尝试了同样的方法，但没有成功，因为 Min3d 接受的 movdelview 矩阵与 Vuforia 提供的不同，所以我改用[jpct-ae](http://www.jpct.net/wiki/index.php/Main_Page#jPCT-AE_-_a_port_of_jPCT_to_Android)，现在我甚至可以加载动画 Md2 模型。尝试 Jpct，如果您遇到问题，请询问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:53:59.210

我做了和@yogi说的一样的事情。`jPCT-AE`在一起`QCAR`很棒。我使用了单个`GLSurfaceView`并将`ModelView`矩阵和实际视频分辨率从本机代码带到 Java。然后，您可以轻松地加载`MD2`文件和动画。

您可以在此处查看结果：

[http://youtu.be/chsHh0pEhzw](http://youtu.be/chsHh0pEhzw)

# ruby-on-rails - Ubuntu 12.0.4 rails 昨天还在工作。今天不行

> ID：10810364
> 
> 赞同：0
> 
> 时间：2012-05-30T05:18:42.037
> 
> 标签：ruby-on-rails, rvm, ubuntu-12.04

我使用 rvm 并使用此说明安装它[https://rvm.io//rvm/install/](https://rvm.io//rvm/install/)。

昨天我工作的时候一切都很好。

今天当我试图启动`rails s`它说

```
The program 'rails' is currently not installed.  You can install it by typing:
sudo apt-get install rails 
```

我不知道如何让它再次工作。当我运行`rvm gem list`它给我这个：

```
*** LOCAL GEMS ***

bundler (1.1.4)
rake (0.9.2.2)
rubygems-bundler (1.0.2)
rvm (1.11.3.3)

*** LOCAL GEMS ***

actionmailer (3.2.3)
actionpack (3.2.3)
activemodel (3.2.3)
activerecord (3.2.3)
activeresource (3.2.3)
activesupport (3.2.3)
ansi (1.4.2)
arel (3.0.2)
builder (3.0.0)
bundler (1.1.4)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.3.3)
erubis (2.7.0)
execjs (1.4.0)
hike (1.2.1)
i18n (0.6.0)
journey (1.0.3)
jquery-rails (2.0.2)
json (1.7.3)
mail (2.4.4)
mime-types (1.18)
multi_json (1.3.5)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.3)
railties (3.2.3)
rake (0.9.2.2)
rdoc (3.12)
rubygems-bundler (1.0.2)
rvm (1.11.3.3)
sass (3.1.19)
sass-rails (3.2.5)
sprockets (2.1.3)
sqlite3 (1.3.6)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.10)
turn (0.9.5)
tzinfo (0.3.33)
uglifier (1.2.4) 
```

那么有人知道为什么铁轨停止工作吗？而且我认为这与我昨天关闭计算机时有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:24:41.660

如果您以 root 身份安装它，则需要执行`source /etc/profile`.

如果您为自己的个人用户安装它，则应将其添加`~/.rvm/scripts`到您的`$PATH`

# c# - 使用 Linq 在 C# 通用列表中查找最新项目

> ID：10810365
> 
> 赞同：3
> 
> 时间：2012-05-30T05:18:45.030
> 
> 标签：c#, linq, generics

我有一个通用的项目清单。每个项目都包含一个 DateTime 字段。我想以最优雅和最有效的方式使用 Linq 找到列表中的最新项目。

就我而言，优雅比效率更重要，但以一种有效的方式这样做会很好。

谢谢你。

阅读答案后：这是代码（以及我喜欢的答案）：

```
using System.Collections.Generic;
using System.Linq;

class Item
{
    public Item Date { get; set; }
    public string Name { get; set; }
}

static void Main(string[] args)
{
    List<Item> items = CreateItems();
    Item newest;
    if (items.Count == 0)
        newest = null;
    else
        newest = items.OrderByDescending(item => item.Date).First();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T05:40:04.387

为了优雅，我会根据日期时间字段对集合进行排序并返回第一项，例如：

```
set.OrderByDescending(x => x.DateTime)
   .FirstOrDefault(); 
```

这将创建已排序集合的内存表示，因此效率不是那么好。对于未排序的集合，最有效的解决方案是遍历所有项目并保存最新的。您可以通过执行聚合操作来使用 linq，我发现它在语法上是一团糟。

或者，您可以将项目存储在排序集合中，如 SortedSet。对于大多数集合，这具有更复杂的插入时间 0(log2) 而不是 O(1)，但它允许您立即按日期时间排序，因此选择 O(1) 而不是 O(n) 中的最新项目。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-30T05:55:44.720

到目前为止，大多数解决方案都必须首先对列表进行完全排序（通过 OrderByDescending），这是不必要且耗时的。你想要的是 Jon Skeet 的[MoreLinq](http://code.google.com/p/morelinq/) `MaxBy`函数。MaxBy 的来源在[谷歌代码](http://code.google.com/p/morelinq/source/browse/MoreLinq/MaxBy.cs)上。

```
var newest = thelist.MaxBy(x => x.DateTimeField); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T05:26:09.197

试试看：

```
var newItem = myList.OrderByDescending(item => item.yourDateTimeField).First(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T05:25:53.843

尝试聚合，例如：

```
list.Aggregate (
    DateTime.MinValue,
    (lastOne, current) => current.GreaterThan (lastOne) ? current : lastOne
) 
```

即如果你的字段是 DateTimeField，你应该写类似

```
list.Aggregate (
    null,
    (lastOne, current) => 
        (lastOne == null) ||
             current.DateTimeField.GreaterThan (lastOne.DateTimeField)
        ? current
        : lastOne
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T05:47:03.210

试试这个

```
 sortlist.OrderByDescending(a => a.timeStamp).First(); 
```

# php - Jquery表单提交不适用于文件上传

> ID：10810366
> 
> 赞同：0
> 
> 时间：2012-05-30T05:18:46.000
> 
> 标签：php, jquery, mysql, ajax

请参考这个小提琴[点击这里](http://jsfiddle.net/Rxd65/)

这里`$('#photoform').serialize();`不返回表单字段。仅文件字段会出现此问题。

如何获取此文件字段值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:21:52.630

无法使用 AJAX 上传文件，因为您无法访问存储在客户端计算机上的文件的内容并使用 javascript 在请求中发送它。

另一种方法是使用隐藏的 iframe。[这个插件](http://jquery.malsup.com/form/)可以帮助你[做到](http://jquery.malsup.com/form/#file-upload)这一点（也阅读[这个插件的小教程](http://www.web-development-blog.com/archives/jquery-form-plugin-and-php-file-uploads/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:23:03.907

来自[文档](http://api.jquery.com/serialize/)：“*来自文件选择元素的数据未序列化。* ”

# database - 如何在 VB6 中访问 iTunes DB？

> ID：10810367
> 
> 赞同：0
> 
> 时间：2012-05-30T05:19:06.110
> 
> 标签：database, vb6, io, itunes, ipod

我正在尝试重写一个名为 Pod Player 的闭源程序（用 VB6 编写）。为了做任何事情，我需要能够访问 iPod 的数据库并将其加载到一系列 ListBox 控件中。我需要访问的是：任何播放列表及其包含的内容、iPod 的名称、曲目编号、歌曲名称、流派、艺术家、专辑、歌曲路径、它们的评级、UIN、文件大小、长度，最好是专辑封面。如果需要，我还需要能够更改评级信息。那么如何在 VB6 中与 iPod 的数据库交互（读/写）？

或者是否有可能用另一种语言编写一个 DLL 或 OCX 可以做到这一点并被 VB6 程序调用/使用？

我还应该提到 Pod Player 使用了 SharePod 的部分或大部分代码（在 SP 转向 .NET 之前）。

我[在 Planet Source Code 上找到了一个数据库解析器，](http://www.planetsourcecode.com/vb/scripts/ShowCode.asp?txtCodeId=62429&lngWId=1)并在我的 Pod Player 重写中尝试了包含的演示表单以及它的实现，但是（根据演示表单）它在退出之前只读取了 76% 的数据库，原因是播放列表相关的问题。我在 iNano 4 和 iShuffle 4 上对其进行了测试，两者都与 Pod Player 完全兼容。我怎样才能让它（解析器在 iPod.bas 中）正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:03:54.550

看看这个页面：[http ://homepage.ntlworld.com/simon.mason20/ipod_tunes_spec.htm](http://homepage.ntlworld.com/simon.mason20/ipod_tunes_spec.htm)

它包含 iTunes 数据库格式的详细信息

# python - Python super 和设置父类属性

> ID：10810369
> 
> 赞同：27
> 
> 时间：2012-05-30T05:19:31.137
> 
> 标签：python, super

我在 Python super() 以及继承和属性方面遇到了一个非常奇怪的问题。首先，代码：

```
#!/usr/bin/env python3

import pyglet
import pygame

class Sprite(pyglet.sprite.Sprite):

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.rect = pygame.Rect(0, 0, self.width, self.height)
        self.rect.center = self.x, self.y

    @property
    def x(self):
        return super().x

    @x.setter
    def x(self, value):
        super(Sprite, self.__class__).x.fset(self, value)
        self.rect.centerx = value

    @property
    def y(self):
        return super().y

    @y.setter
    def y(self, value):
        super(Sprite, self.__class__).y.fset(self, value)
        self.rect.centery = value 
```

这工作正常。但是，我想要什么（对我来说似乎是 Pythonic）

```
#super(Sprite, self.__class__).x.fset(self, value)
super().x = value 
```

即使不起作用

```
super().x 
```

得到很好的价值。在这种情况下，x 是定义了 fset 和 fget 的超类的属性。那么为什么它不起作用呢？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-30T05:38:33.053

我试图找到正确的语言来支持为什么这种行为是这样的，以免给你一个“因为它只是”的答案......但似乎这个问题已经被问过不止一次了，并且它归结为 的行为`super()`。您可以在此处查看有关此确切行为的 2010 年讨论：http: [//mail.python.org/pipermail/python-dev/2010-April/099672.html](http://mail.python.org/pipermail/python-dev/2010-April/099672.html)

最终，它实际上只是归结为 super() 调用，只允许您直接访问 getter，而不是 setter。设置器必须通过`fset()`或访问`__set__()`。可能最简单的解释是“super() 功能不支持它”。它将在“set”操作中解析“get”操作的属性功能，而不是左手赋值中的setter（因此是`fset()`方法调用）。从这个讨论线程的日期可以看出，自从引入`super()`.

也许其他人有更具体的技术原因，但坦率地说，我不确定这是否重要。如果它不支持，那几乎是一个足够好的理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-21T02:06:07.937

`super(type(self), type(self)).setter.fset(self, value)`是一种常见的解决方法；但是它不能与多重继承充分合作，这可能会改变 MRO（方法解析顺序）。

尝试使用我的 duper 类：`duper(super()).setter = value`

```
class duper:
    """Super wrapper which allows property setting & deletion.
    Super can't be subclassed with empty __init__ arguments.
    Works with multiple inheritance.

    References:
      https://mail.python.org/pipermail/python-dev/2010-April/099672.html
      https://bugs.python.org/issue14965
      https://bugs.python.org/file37546/superprop.py

    Usage: duper(super())
    """

    def __init__(self, osuper):
        object.__setattr__(self, 'osuper', osuper)

    def _find(self, name):
        osuper = object.__getattribute__(self, 'osuper')
        if name != '__class__':
            mro = iter(osuper.__self_class__.__mro__)
            for cls in mro:
                if cls == osuper.__thisclass__:
                    break
            for cls in mro:
                if isinstance(cls, type):
                    try:
                        return object.__getattribute__(cls, name)
                    except AttributeError:
                        pass
        return None

    def __getattr__(self, name):
        return getattr(object.__getattribute__(self, 'osuper'), name)

    def __setattr__(self, name, value):
        osuper = object.__getattribute__(self, 'osuper')
        desc = object.__getattribute__(self, '_find')(name)
        if hasattr(desc, '__set__'):
            return desc.__set__(osuper.__self__, value)
        return setattr(osuper, name, value)

    def __delattr__(self, name):
        osuper = object.__getattribute__(self, 'osuper')
        desc = object.__getattribute__(self, '_find')(name)
        if hasattr(desc, '__delete__'):
            return desc.__delete__(osuper.__self__)
        return delattr(osuper, name) 
```

（完整来源[https://gist.github.com/willrazen/bef3fcb26a83dffb6692e5e10d3e67ac](https://gist.github.com/willrazen/bef3fcb26a83dffb6692e5e10d3e67ac)）

# html - 如何在html中的href中添加垂直文本对齐？

> ID：10810371
> 
> 赞同：3
> 
> 时间：2012-05-30T05:19:47.937
> 
> 标签：html, href, text-align

海我有一个列表（我动态创建了 html），在该列表中我添加了许多超链接。现在我想在中心添加该链接如何做到这一点？请帮助我

```
"<FONT SIZE=5;face=Droid Sans>"+"<p style=text-align:center>"+"<a  id='"+i+"'  href='#' >" +value +  "</a>"+"</p>"+"<hr style='border:1px solid #EBEBEB'/>"+"</FONT>"+ "</li>"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T05:26:40.907

尝试使用嵌入外部样式而不是内联样式。我曾经`line-height`使垂直对齐并使`text-align: center`文本居中。

将垂直对齐添加到锚点的示例：

```
.anch{
    font-size:12px;
    color:green;
    display:inline-block;
    height:100px;
    width:300px;
    border:1px solid black;
    text-align:center;
    vertical-align:top;
    line-height:100px;
}
```

```
<a href="#" class="anch">Anchor</a>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T06:53:12.350

嗨，您可以通过简单的 css在**HTML中的 href 中提供垂直文本，如下所示：-**

```
 <a href="#" style="width:200px; height:100px; background:red; display:table-cell; vertical-align:middle; text-align:center; color:black;">shailender</a> 
```

我希望这对你有帮助......

或查看演示：- [http://jsbin.com/uwemuy/edit#html,live](http://jsbin.com/uwemuy/edit#html,live)

# php - 表单验证错误消息

> ID：10810376
> 
> 赞同：1
> 
> 时间：2012-05-30T05:20:10.353
> 
> 标签：php, validation, codeigniter, authentication

当我想验证用户名字段时收到此错误消息：

> 无法访问与您的字段名称对应的错误消息。

对于电子邮件字段 is_unique 规则正常，但是当我将此规则用于用户名字段时，出现上述错误我使用 Ion_Auth 身份验证库，并且用户名和电子邮件字段都存在于“用户”表中

验证用户名字段（我收到错误消息）

```
$this->form_validation->set_rules('username', 'lang:username', 'required|is_unique[users.username]'); 
```

验证电子邮件字段（确定）

```
$this->form_validation->set_rules('email', 'lang:email', 'required|valid_email|is_unique[users.email]'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:45:15.613

我很确定应该是这样的：

```
$this->form_validation->set_rules('username', 'username', 'required|is_unique[users.username]'); 
```

# android - 为什么位置侦听器功能不执行？

> ID：10810381
> 
> 赞同：0
> 
> 时间：2012-05-30T05:20:41.067
> 
> 标签：android, google-maps, locationmanager, locationlistener

// 这是我的 MapActivity 类的代码

```
public class MapActivity extends com.google.android.maps.MapActivity implements LocationListener
{

    MapView mapView;
    MapController mc;
    GeoPoint p;
    MyLocation myLocation = new MyLocation();
    LocationManager mlocManager;
    int distance;
    public void onCreate(Bundle savedInstanceState) {

        // Remove title bar
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map);
        ImageButton mpl = (ImageButton)findViewById(R.id.nearbybuttn);
        mapView = (MapView) findViewById(R.id.mv);
        mapView.setBuiltInZoomControls(true);
        mapView.displayZoomControls(true);
        mc = mapView.getController();
        mc.setZoom(8);

LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

LocationListener mlocListener = new MyLocationListener();

        mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 200,
                0, mlocListener);

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    private class MyLocationListener implements LocationListener {

        @Override
        public void onLocationChanged(Location loc) {
            // gets current location on position change
            loc.getLatitude();
            loc.getLongitude();

            Double slat = loc.getLatitude();

            Double slon = loc.getLongitude();
            TextView txlat = (TextView) findViewById(R.id.lat);
            TextView txlon = (TextView) findViewById(R.id.lon);
            txlat.setText(slat + "n");
            txlon.setText(slon + "n");

            // json retrieval
            JSONObject j2 = JSONfunctions
                    .getJSONfromURL("/merchant/apis/?device=iphone&api=store_details");

            try {
                JSONArray myID = j2.getJSONArray("stores");
                for (int i = 0; i < myID.length(); i++) {
                    Log.v("state", "json address being read");
                    JSONObject j3 = myID.getJSONObject(i);
                    String name = j3.getString("Address");
                    String id = j3.getString("StoreId");
                    Log.v("id", id);
                    Log.v("Address", name);
                    JSONObject j4 = j3.getJSONObject("Address");
                    Double jlat = j4.getDouble("Latitude");
                    Double jlon = j4.getDouble("Longitude");
                    Log.v("Latitude", jlat + "n");
                    Log.v("Longitude", jlon + "n");

                    // Get the distance between lat long
                    Location locationA = new Location("point A");

                    locationA.setLatitude(slat);
                    locationA.setLongitude(slon);

                    Location locationB = new Location("point B");

                    locationB.setLatitude(jlat);
                    locationB.setLongitude(jlon);

                    distance = (int) locationA.distanceTo(locationB);
                    String str = " (" + String.valueOf(distance) + " meters)";
                    Log.v("Distance", str);

                    // adjust drawable params
                    Drawable marker = getResources().getDrawable(
                            android.R.drawable.star_big_on);
                    Drawable user = getResources().getDrawable(
                            android.R.drawable.arrow_down_float);
                    int userWidth = user.getIntrinsicWidth();
                    int userHeight = user.getIntrinsicHeight();
                    user.setBounds(0, userHeight, userWidth, 0);
                    int markerWidth = marker.getIntrinsicWidth();
                    int markerHeight = marker.getIntrinsicHeight();
                    marker.setBounds(0, markerHeight, markerWidth, 0);

                    // refernc to overlay class
                    LocationOverlay myItemizedOverlay = new LocationOverlay(
                            marker, MapActivity.this);
                    LocationOverlay myItemizedOverlay1 = new LocationOverlay(
                            user, MapActivity.this);
                    mapView.getOverlays().add(myItemizedOverlay);
                    mapView.getOverlays().add(myItemizedOverlay1);

                    // create geopoint for user
                    GeoPoint usr = new GeoPoint((int) (slat * 1e6),
                            (int) (slon * 1e6));
                    // add overlay(user) to user's location
                    myItemizedOverlay1.addItem(usr, "User");
                    mc.animateTo(usr);

                    // create geopoint for json
                    GeoPoint jgpt = new GeoPoint((int) (jlat * 1e6),
                            (int) (jlon * 1e6));

                    // add marker on geopoints from json
                    myItemizedOverlay.addItem(jgpt, "StoreId" + id);

                    mapView.setOnTouchListener(new View.OnTouchListener() {

                        @Override
                        public boolean onTouch(View v, MotionEvent event) {
                            // TODO Auto-generated method stub
                            return false;
                        }
                    });

                }
            } catch (JSONException e) {
                Log.e("loG_tag", "Error parsing" + e.toString());
            }

        }

        private TextView findViewById(int lat) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public void onProviderDisabled(String provider) {
            Toast.makeText(getApplicationContext(), "Gps Disabled",
                    Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onProviderEnabled(String provider) {
            Toast.makeText(getApplicationContext(), "Gps Enabled",
                    Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:38:07.960

不执行 - 我们应该将其视为编译时错误还是运行时错误。如果是，请粘贴错误日志。还

1.  你在真实设备上尝试这个吗？如果不这样做

2.  您设备的 GPS 是否已开启？如果不这样做

3.  尝试使用 0 参数而不是 200。查看其结果。

4.  也试试 LocationManager.NETWORK_PROVIDER

5.  确保您在清单文件中定义了足够的权限。

# javascript - 如何识别动态内容（来自 oracle 数据库）并使用单选按钮插入数据库？

> ID：10810386
> 
> 赞同：0
> 
> 时间：2012-05-30T05:21:36.533
> 
> 标签：javascript, eclipse, oracle, jsp, servlets

我的 oracle 数据库由 4 个表组成。第一个表包含 QuestionId(Pk) 和 questions，第二个表包含 AnswerSuggestionID(Pk) 和 Suggestions，第三个表包含 categoryId(Pk) 和 Category，第四个表包含 displayid(pk)、QuestionId(fk)、AnserSuggetionId(fk) 和 categoryId。

我的jsp页面代码：

```
<tr>
 <td class="regis" valign="top"><%=qId %></td><td class="regist" valign="top">       <%=questions %></td>
 <td class="regis" valign="middle"><input type="radio" id="rname" name="<%=qId %>" value="yes" class="rsubmit" onclick="<%=qId %>()" /><span>Yes</span>&#160;&#160;&#160;&#160;<input type="radio" name="<%=qId %>" value="no" checked="checked" onclick="<%=questions %>()"/><span>No</span></td>
  <td>**onclick radio button yes then i have to display suggestions here without refresh the page.**</td> 
```

注意：有时一个问题会有 2 个或更多建议。有时，超过 2 个问题的类别相同。有时 2 个问题的答案是相同的。

感谢问候， Randeep

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:25:37.920

如果您可以有多个正确答案，从逻辑上讲，您不应该有单选按钮。

其次，我建议有一个提交按钮。只有单击按钮才能提交表单并将数据保存到数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:32:56.320

我宁愿建议您使用链接或按钮而不是单选按钮来下载动态内容。无论如何，让我们继续使用“是”单选按钮的代码：

```
<input type="radio" id="rname" name="<%=qId %>" value="yes" class="rsubmit" onclick="<%=qId %>()" /><span>Yes</span> 
```

首先要做的事情是：您不能`<%=qId %>()`在单选按钮的 onclick 属性中拥有。您应该创建一个 Javascript 函数，例如`downloadContent()`，并在此处传递它的引用。

```
var downloadContent = function(question_id) {
    // your code goes in here
}; 
```

现在您应该将其引用给`onclick`处理程序，如下所示：

```
<input type="radio" id="rname" name="<%=qId %>" value="yes" class="rsubmit" onclick="downloadContent(<%=qId %>)" /><span>Yes</span> 
```

现在，`downloadContent()`您可以进行 AJAX 调用并以 XML 或 JSON 的形式从您的服务器下载相关数据。接下来，您将迭代这些数据并更新您的 DOM。使用普通的 Javascript 处理 AJAX 和 DOM 可能会很棘手，因此我强烈建议使用 jQuery 等框架。希望能帮助到你。

# mysql - 为什么 MYSQL IN 关键字不考虑 NULL 值

> ID：10810391
> 
> 赞同：13
> 
> 时间：2012-05-30T05:22:02.877
> 
> 标签：mysql, mysql-python

我正在使用以下查询：

```
select count(*) from Table1 where CurrentDateTime>'2012-05-28 15:34:02.403504' and Error not in ('Timeout','Connection Error'); 
```

令人惊讶的是，此语句不包括错误值为 NULL 的行。我的目的是仅过滤错误值为“超时”（或）“连接错误”的行。我需要提供一个附加条件（OR Error 为 NULL）来检索正确的结果。

为什么 MYSQL 会过滤掉 NULL 值的结果？我认为 IN 关键字会返回一个布尔结果（1/0），现在我明白一些 MYSQL 关键字不返回布尔值，它也可能返回 NULL....但是为什么将 NULL 视为特殊？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-30T05:27:56.433

这 ：

```
Error not in ('Timeout','Connection Error'); 
```

在语义上等价于：

```
Error <> 'TimeOut' AND Error <> 'Connection Error' 
```

关于空比较的规则也适用于 IN。因此，如果 Error 的值为 NULL，则数据库无法使表达式为真。

要修复，您可以这样做：

```
COALESCE(Error,'') not in ('Timeout','Connection Error'); 
```

或者更好：

```
Error IS NULL OR Error not in ('Timeout','Connection Error'); 
```

或者更好：

```
 CASE WHEN Error IS NULL THEN 1
 ELSE Error not in ('Timeout','Connection Error') THEN 1
 END = 1 
```

`OR`不会短路，CASE 会以某种方式使您的查询短路

* * *

也许一个具体的例子可以说明为什么`NULL NOT IN expression`什么都不返回：

鉴于此数据：[http ://www.sqlfiddle.com/#!2/0d5da/11](http://www.sqlfiddle.com/#!2/0d5da/11)

```
create table tbl
(
  msg varchar(100) null,
  description varchar(100) not null
  );

insert into tbl values
('hi', 'greet'),
(null, 'nothing'); 
```

你做这个表达：

```
select 'hulk' as x, msg, description 
from tbl where msg not in ('bruce','banner'); 
```

那只会输出'hi'。

NOT IN 被翻译为：

```
select 'hulk' as x, msg, description 
from tbl where msg <> 'bruce' and msg <> 'banner'; 
```

`NULL <> 'bruce'`无法确定，甚至不是真的，甚至不是假的

`NULL <> 'banner'`无法确定，甚至不是真的，甚至不是假的

所以空值表达式，有效地解析为：

```
can't be determined AND can't bedetermined 
```

事实上，如果您的 RDBMS 在 SELECT 上支持布尔值（例如 MySQL、Postgresql），您可以看到原因：[http ://www.sqlfiddle.com/#!2/d41d8/828](http://www.sqlfiddle.com/#!2/d41d8/828)

```
select null <> 'Bruce' 
```

那返回空值。

这也返回 null：

```
select null <> 'Bruce' and null <> 'Banner' 
```

鉴于您正在使用`NOT IN`，这基本上是一个 AND 表达式。

```
NULL AND NULL 
```

结果为NULL。所以就像你在做一个：[http ://www.sqlfiddle.com/#!2/0d5da/12](http://www.sqlfiddle.com/#!2/0d5da/12)

```
select * from tbl where null 
```

什么都不会退回

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T05:25:15.167

因为 null 是未定义的，所以 null 不等于 null。您总是必须显式处理 null。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T05:27:32.767

`IN``NULL`如果左侧的表达式是 ，则返回`NULL`。为了获取`NULL`值，您必须执行以下操作：

```
select count(*) from Table1 where CurrentDateTime>'2012-05-28 15:34:02.403504' and (Error not in ('Timeout','Connection Error') or Error is null); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T07:28:24.897

`IN`返回一个三价`BOOLEAN`（接受`NULL`作为一个值）。`NOT IN`返回 的三价否定`IN`，并且 的否定`NULL`是 a `NULL`。

想象一下，我们有一个表，其中包含从`1`到`1,000,000`in的所有数字，`id`并且这个查询：

```
SELECT  *
FROM    mytable
WHERE   id IN (1, 2, NULL) 
```

或其等价物：

```
SELECT  *
FROM    mytable
WHERE   id = ANY
             (
             SELECT  1
             UNION ALL
             SELECT  2
             UNION ALL
             SELECT  NULL
             ) 
```

`TRUE`对于所有其他值，谓词返回`1`and `2`，因此返回and 。`NULL``1``2`

在它的对面：

```
SELECT  *
FROM    mytable
WHERE   id NOT IN (1, 2, NULL) 
```

， 或者

```
SELECT  *
FROM    mytable
WHERE   id <> ALL
             (
             SELECT  1
             UNION ALL
             SELECT  2
             UNION ALL
             SELECT  NULL
             ) 
```

, 谓词`FALSE`为`1`and`2`和`NULL`所有其他值返回，因此不返回任何内容。

请注意，布尔否定不仅会更改运算符 ( `=`to `<>`)，还会更改量词 ( `ANY`to `ALL`)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-29T15:29:11.370

@Michael Buen 的答案对我来说是正确的答案，但让我简化一下原因。

@Michael 在他的帖子中说：

> * * *
> 
> 错误不在（'超时'，'连接错误'）；
> 
> 在语义上等价于：
> 
> 错误<>“超时”和错误<>“连接错误”
> 
> ## 关于空比较的规则也适用于 IN。因此，如果 Error 的值为 NULL，则数据库无法使表达式为真。

在 [1] 中，我发现这句话证实了他理解为什么 IN 以 NULL 失败的最重要的陈述。在 [1] 中的规范（“规范”）中，您将：“如果一个或两个参数为 NULL，则比较结果为 NULL，但 NULL 安全 <=> 相等比较运算符除外。”

所以，是的，可悲的是，Mysql 在这种情况下迷路了。我认为 Mysql 设计者不应该这样做，因为当我将 2 与 NULL 进行比较时，Mysql 应该能够看到它们是不同的，而不是简单地抛出错误的结果。例如，我做了：

```
select id from TABLE where id not in (COLUMN WITH NULLS); 
```

然后它会抛出 EMPTY 结果。但。如果我做

```
select id from TABLE where id not in (COLUMN WITH OUT NULLS); 
```

它显示了正确的结果。所以在使用 IN 运算符时，必须过滤掉 NULLS。作为用户，这不是我想要的行为，但它记录在 [1] 中的规范中。我认为语言和技术应该更简单，因为你应该能够在不需要阅读规范的情况下进行推断。确实，2 与 NULL 不同，我应该负责控制和处理更高抽象级别的错误，但是 MySQL 应该在将 NULL 与特定值进行比较时抛出 FALSE 结果。

规格参考：[1] [http://dev.mysql.com/doc/refman/5.6/en/type-conversion.html](http://dev.mysql.com/doc/refman/5.6/en/type-conversion.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-29T15:49:59.980

很抱歉在同一个论坛发了两次，但我想说明另一个例子：

我同意本论坛 [2] 中的@Wagner Bianchi 的观点：<< 处理数据和子查询时非常有技巧>>

此外，这不应该是这种行为，我认为 Mysql 的设计者在做出此决定时是错误的，记录在 [1] 中。设计应该不同。让我解释一下：你知道在比较时

```
select (2) not in (1, 4, 3);
    you will get:
        +----------------------+
        | (2) not in (1, 4, 3) |
        +----------------------+
        |                    1 |
        +----------------------+
        1 row in set (0.00 sec) 
```

但是，如果在列表中您至少有一个 NULL ，那么：

```
select (2) not in (1, NULL, 3);
    throws:
        +-------------------------+
        | (2) not in (1, NULL, 3) |
        +-------------------------+
        |                    NULL |
        +-------------------------+
        1 row in set (0.00 sec)
    This is pretty absurd. 
```

我们不是第一个对此感到困惑的人。见[2]

参考：

[1] [http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)

[2] [http://blog.9minutesnooze.com/sql-not-in-subquery-null/comment-page-1/#comment-86954](http://blog.9minutesnooze.com/sql-not-in-subquery-null/comment-page-1/#comment-86954)

# c# - 如何在文件操作中使用事务？

> ID：10810393
> 
> 赞同：3
> 
> 时间：2012-05-30T05:22:10.317
> 
> 标签：c#, asp.net, .net, transactions

我的程序需要将一些文件操作视为一个单元，一个案例中的一些重要步骤是：

1.  删除目录中的文件。
2.  验证一些数据。如果数据无效，则**回滚**。
3.  将文件上传到目录。如果上传*失败*，则**回滚**。
4.  提交更改。

我提出这个关于交易的要求是因为有时用户可能使用 VPN 访问我的网站，VPN 连接可能非常不稳定。

**如果第 3 步失败，第 1 个文件和新上传的文件都将丢失。**

我的一些代码：

```
 DeleteTheOlderDT(path, FileName);

        this.fuTemplateName.SaveAs(path + FileName);
        _t.FileName = FileName;

        if (!System.IO.File.Exists(path + FileName))
        {
            ArrayList ItemList = new ArrayList();
            ItemList.Add("Uploading failed, please upload again!");
            btlError.DataSource = ItemList;
            btlError.DataBind();
            _t.FileName = "";
            return;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:32:49.190

我认为您只能手动执行此操作。看看Martin Fowler 的[UnitOfWork](http://martinfowler.com/eaaCatalog/unitOfWork.html)，你可以实现他所描述的一些事情

还要检查这个链接也许对你有帮助

*   [事务文件管理器](http://www.chinhdo.com/20080825/transactional-file-manager/)
*   [STM.NET](http://msdn.microsoft.com/en-us/devlabs/ee334183.aspx)
*   [来自 MSDN 的文章](http://msdn.microsoft.com/en-us/magazine/cc163388.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T05:30:32.313

我从来没有尝试过文件系统，但是代码项目上有很好的文章。

请看一下[http://www.codeproject.com/Articles/31270/A-Transactional-Repository-Implementation-in-NET](http://www.codeproject.com/Articles/31270/A-Transactional-Repository-Implementation-in-NET)

希望它能解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T07:38:04.573

Windows Vista 和更新版本支持[Transactional NTFS](http://en.wikipedia.org/wiki/Transactional_NTFS)，这可能会对您有所帮助。

但实际上，您应该考虑重新设计您的逻辑 - 上传到临时文件，并且仅在上传成功时删除原始文件（并重命名临时文件）。

# visual-studio-2008 - 在 VS2008 中使用预编译头文件需要更长的时间

> ID：10810395
> 
> 赞同：1
> 
> 时间：2012-05-30T05:22:13.240
> 
> 标签：visual-studio-2008, visual-c++

我试图在我的解决方案中使用 PCH 来缩短编译时间，但令人难以置信的是，*与**没有*. 这是统计数据：

在 i7 上运行 8GB 的​​ Windows 7 x64

示例项目：235 个 cpp 文件，总共 4.5 MB 源代码（使用 MFC）

使用 PCH 需要 13:55 分钟

没有 PCH 需要 6:15 分钟

我很确定我正确使用它们，项目设置为在项目级别使用预编译头文件，并且 StdAfx.cpp 设置为通过 StdAfx.h 创建预编译头文件

所有标准#includes都放在StdAfx.h中，所有cpp文件都以

#include "StdAfx.h"

我无法理解它。任何人都知道会发生什么，或者我什至会如何开始尝试解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:08:09.083

So I worked around this eventually. My solution has a structure as follows:

C:\Data\Bus\VS\Projects\Solution.sln
C:\Data\Bus\VS\Projects\Proj1\
C:\Data\Bus\VS\Projects\Proj2\
C:\Data\Bus\VS\Projects\Proj3\
etc

Because these are used all the time, I have mapped a drive letter:

P = C:\Data\Bus\VS\Projects\

to this area for easier access to the solution using the following:

P:\Solution.sln
P:\Proj1\
P:\Proj2\
P:\Proj3\

I have found that VS2008 does not like opening the solution via the mapped drive letter (P), this is where the slower build with PCH occurs.

But if I open with a full path directly to the C drive, the PCH gives excellent speed advantage as expected.

Anyone have any idea about this? I can only think that the drive aliasing is giving VS the wrong impression that the PCH is always out of date, and so it rebuilds it with every file. Very mysterious.

# asp.net-mvc - 如何在 MVC3 的索引视图中使用编辑视图

> ID：10810396
> 
> 赞同：-2
> 
> 时间：2012-05-30T05:22:18.800
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我是 MVC3 编程的新手。我`(userid, username)`在索引视图中有用户记录。我想编辑一条记录。

我可以在编辑视图中编辑记录。但我的要求是在索引视图上显示弹出窗口（只是一个具有相关字段文本框的 div）并更新所选记录的数据。编辑和保存记录后，它应该在数据库中更新，并且在索引页面的列表中也应该用新值更新。

是否可以在索引视图的 div 中打开/集成编辑视图？如果是，那么请为我提供解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:11:52.200

使用 javascript 编辑记录。Jquery 和 jqueryui 库将帮助您解析记录并调用 jquery 对话框。然后对话框 ok 按钮应该调用一个 ajax 请求来更新数据库中的记录，成功时也应该更新视图上的记录。

对于每条记录，都有一个编辑链接或按钮，并使用 jquery 将其绑定到单击操作到函数。点击动作函数将读取编辑链接项之前的记录，即$(this) 之前的元素，其中$this 是编辑链接元素。然后你需要在页面上隐藏一个占位符 div 元素。将事件读取到这个div的数据格式化成输入格式，用jqueryui制作这个div的对话框。

# php - 如何将新的键值对推送到数组 php？

> ID：10810398
> 
> 赞同：10
> 
> 时间：2012-05-30T05:22:22.847
> 
> 标签：php, arrays, drupal, drupal-7, drupal-modules

我知道有很多关于这方面的文档，但是这一行代码花了我很长时间才在一个 4000 行的文件中找到，我希望第一次尝试就正确。

```
file_put_contents($myFile,serialize(array($email_number,$email_address))) or die("can't open file");
    if ($address != "email@domain.com") {
        $email['headers'] = array('CC' => 'email@domain.com');
    }
} 
```

在此 if 语句之后，我基本上想添加

`'BCC' => 'another_email@domain.com'`

到`$email['headers']`数组中（因此无论 if 评估为真与否，它都会添加它）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-30T05:25:15.607

您可以像这样单独添加它们：

```
$array["key"] = "value"; 
```

总而言之，像这样：

```
$array = array(
    "key"  => "value",
    "key2" => "value2"
); 
```

或者您可以合并两个或多个数组`array_merge`：

```
$array = array( "Foo" => "Bar", "Fiz" => "Buz" );

$new = array_merge( $array, array( "Stack" => "Overflow" ) );

print_r( $new ); 
```

这导致新闻键/值对被添加到旧的：

```
大批
(
  [Foo] => 酒吧
  [Fiz] => 布兹
  [堆栈] => 溢出
)
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T05:24:52.733

你可以这样做：`$email['headers']['BCC'] = "Test@rest.com"` 但你需要在 if 之后添加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T05:24:25.180

```
$email['headers'] = array();

if ($address != "email@domain.com") {
   $email['headers']['CC'] = 'email@domain.com';
}

$email['headers']['BCC'] = 'another_email@domain.com'; 
```

# php - mongodb中的OR运算符与php

> ID：10810401
> 
> 赞同：2
> 
> 时间：2012-05-30T05:22:54.793
> 
> 标签：php, mongodb

使用 php 在 mongodb 中使用 OR 运算符

```
$query = array(
        'table' => $table,
        'user_id' => array('$ne'=> null),
        '$or' => array('movies' => array('$ne' => null), 'comics' => array('$ne' => null) )
    );

$dbcollection->find($query); 
```

在这里，我尝试返回电影数组或漫画数组不为空的整个记录​​，但我总是返回空数组。在数据库中，某些记录中存在电影或漫画数组，而其他一些记录中不存在电影或漫画数组。

如何更正此查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:06:27.680

注释表明您使用的是 MongoDB 1.4.4。根据[文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24or)`$or`，直到 MongoDB 1.6 才引入操作员。MongoDB 1.4.4 也真的很老了。请升级！

# c# - Visual Studio 一直说我有一个错误，我没有正确的“使用”，但我有

> ID：10810402
> 
> 赞同：1
> 
> 时间：2012-05-30T05:22:55.270
> 
> 标签：c#, visual-studio-2010

我有`using System.Management;`

但是，我不断收到此错误：

> 命名空间“System.Management”中不存在类型或命名空间名称“ManagementClass”（您是否缺少程序集引用？）

我两次收到该错误。

我也收到此错误：

> 命名空间“System.Management”中不存在类型或命名空间名称“ManagementObjectCollection”（您是否缺少程序集引用？）

为什么会这样？

如果有帮助，这是我的代码（完全取自 StackOverflow，但仍然是我正在使用的代码）

```
private string identifier(string wmiClass, string wmiProperty)
    //Return a hardware identifier
    {
        string result = "";
        System.Management.ManagementClass mc = new System.Management.ManagementClass(wmiClass);
        System.Management.ManagementObjectCollection moc = mc.GetInstances();
        foreach (System.Management.ManagementObject mo in moc)
        {

            //Only get the first one
            if (result == "")
            {
                try
                {
                    result = mo[wmiProperty].ToString();
                    break;
                }
                catch
                {
                }
            }

        }
        return result;
    }

    private void getButton_Click(object sender, EventArgs e)
    {
        string modelNo = identifier("Win32_DiskDrive", "Model");
        string manufatureID = identifier("Win32_DiskDrive", "Manufacturer");
        string signature = identifier("Win32_DiskDrive", "Signature");
        string totalHeads = identifier("Win32_DiskDrive", "TotalHeads");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T05:24:10.990

问题是 DLL 没有在`Solution/{PROJECT}/References`. 右键单击`References`并选择“添加程序集”（或其他），然后转到 .NET 选项卡并找到`System.Management`.

仅仅因为存在 using 语句并不意味着引用了 DLL。

[MSDN](http://msdn.microsoft.com/en-us/library/wkze6zky%28VS.80%29.aspx)上有一个很好的指南。

# java - NoClassDefFoundError 仅适用于 EAR 中的特定类

> ID：10810405
> 
> 赞同：3
> 
> 时间：2012-05-30T05:23:20.940
> 
> 标签：java, jakarta-ee

下面是耳朵结构

```
前耳朵
|
|_lib-util.jar--CommonUtil.class,CommonException.class等
|
|
|
ejb.jar
网络战争

```

当我在 WEB 和 EJB 层类中像这样 () 调用这个特定类`CommonUtil.map(empDto)`时，我们得到一个`NoClassDefFoundError`. Util.jar 中剩余的所有类都被正常调用。为什么我们只为这个类得到这个错误？

```
EmployeeDTO empDto = new EmployeeDTO();
empDto.setId(1);
empDto.setName("john");
CommonUtil.map(empDto); 
```

```
public class CommonUtil {

    private static Mapper mapper = new BeanMapper();
    private static CommonUtil instance = new CommonUtil();

    private CommonUtil() {
        super();
    }

    public static <T> T map(Object source) {
        T target = mapper.map(source);
        return target;
    }

    public static <T> T map(Object source) {
        mapper.map(source);
        return target;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:37:25.833

一般来说，`NoClassDefFoundError`如果在静态初始化期间发生异常，就会发生这种情况。如果在`NoClassDefFoundError`实例化`BeanMapper`或`CommonUtil`.

# c# - 已经将 php sms 函数转换为 C# 成功

> ID：10810407
> 
> 赞同：0
> 
> 时间：2012-05-30T05:23:34.717
> 
> 标签：c#, sms, sms-gateway

我已经配置了 SMS 网关和一些 php 代码。现在我的项目是将其转换为 Csharp 并稍作改动，

可能我必须编写新代码。但是......我想知道你有经验的人可能吗？下面的示例代码。

```
enter code here
$username = "abcdsoft";
$password = "softsoft";

//GET parametrar 
//$source     = $_GET['sourceaddr'];
//$dest       = $_GET['destinationaddr'];
//$message_in = $_GET['message'];

enter code here
$source     = $_GET['msisdn'];
$dest       = $_GET['shortcode'];
$message_in = $_GET['msg']; 
```

这些是最重要的行。我更改了以下代码。（php 到 csharp）

```
enter code here
 string username ='abcdsoft';
 string password = 'abcdabcd';

 int source = ['sourceaddr'];
 int dest  = ['shortcode'];
 string message_in = ['msg']; 
```

这种方式正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:28:56.873

几乎。

1.  需要对字符串使用双引号
2.  **Request.QueryString**是 ASP.NET 等价于 PHP **$_GET**。
3.  此外，显然 C# 的类型比 PHP 强一些，因此您需要将查询字符串参数显式转换为整数。

代码应该是这样的：

```
string username = "abcdsoft";
string password = "abcdabcd";

int source = int.Parse(Request.QueryString["sourceaddr"]);
int dest  = int.Parse(Request.QueryString["shortcode"]);
string message_in = int.Parse(Request.QueryString["msg"]); 
```

# jquery - JSF2.0 Richfaces 4.x Jquery

> ID：10810408
> 
> 赞同：0
> 
> 时间：2012-05-30T05:23:38.660
> 
> 标签：jquery, jsf-2, richfaces

我的 inputText 格式为我可以通过以下代码获取其值

```
<h:inputText value="hello world" id="myidtest" />

alert($(#{rich:element('myidtest')}).val()); 
```

如果我将 inputText 放在 rich:datatable 下，那么`alert($(#{rich:element('myidtest')}).val());`

经过一些研发后给出未定义我发现rich:elment 引用如果它在rich:datatable 下则不返回对象

任何快速帮助appriciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:32:05.760

那是因为每一列都会有不同的生成id

使用columns标签根据列索引设置id

```
<rich:columns value="#{dataTableScrollerBean.columns}" var="columns" index="ind" id="column#{ind}"> 
```

生成的 id 看起来像`id="formId:tableId:rowIndex:column1"`

那么你可以使用

```
jQuery(#{rich:element('formId:tableId:rowIndex:column1')}). 
```

如果这不起作用，则发布为该元素生成的 html。

# java - 如何在使用 Tapestry5 存储之前调整图像大小

> ID：10810416
> 
> 赞同：0
> 
> 时间：2012-05-30T05:24:36.350
> 
> 标签：java, tapestry

我正在使用tapestry5 框架，其中我正在使用uploadedFile 组件，它返回一个图像类型的文件。

现在我想将该图像的大小调整为 20 x 20，而不管图像的类型如何。

Java API 或 Tapestry5 框架有什么方法可以实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:52:11.410

这不是 Tapestry 的一部分功能，也不可能是。Java2D API 对将字节流转换为图像、重新缩放它们以及将它们存储回来提供了足够多的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:27:46.980

尝试这个：

```
BufferedImage resizedImage = new BufferedImage(IMG_WIDTH, IMG_HEIGHT, type);
Graphics2D g = resizedImage.createGraphics();
g.drawImage(originalImage, 0, 0, IMG_WIDTH, IMG_HEIGHT, null);
g.dispose(); 
```

# android - 什么是 onCreate(Bundle savedInstanceState)

> ID：10810418
> 
> 赞同：130
> 
> 时间：2012-05-30T05:24:45.663
> 
> 标签：android, bundle, oncreate

任何人都可以帮助我了解我是 Android 的新手`Bundle savedInstanceState`。`onCreate(Bundle savedInstanceState)`我尝试从 developer.android.com 了解它。但我无法理解。任何人都可以简化它吗？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-05-30T05:27:34.987

如果您将应用程序的状态保存在包中（通常是非持久的动态数据），如果需要重新创建活动（例如，方向更改）`onSaveInstanceState`，可以将其传递回，这样您就不会丢失之前的`onCreate`信息。如果没有提供数据，`savedInstanceState`则为空。

> ...您应该使用 onPause() 方法将任何持久性数据（例如用户编辑）写入存储。此外，方法 onSaveInstanceState(Bundle) 在将 Activity 置于此类后台状态之前被调用，允许您将 Activity 中的任何动态实例状态保存到给定的 Bundle 中，以便稍后在 onCreate(Bundle) 中接收该 Activity需要重新创建。有关流程的生命周期如何与其托管的活动相关联的更多信息，请参阅流程生命周期部分。请注意，将持久数据保存在 onPause() 而不是 onSaveInstanceState(Bundle) 中很重要，因为后者不是生命周期回调的一部分，因此不会在其文档中描述的所有情况下都被调用。

[来源](https://d.android.com/reference/android/app/Activity)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-30T05:25:49.177

`onCreate(Bundle savedInstanceState)`当活动第一次开始时你会得到`Bundle`空值，当活动方向改变时它会被使用.......

[http://www.gitshah.com/2011/03/how-to-handle-screen-orientation_28.html](http://www.gitshah.com/2011/03/how-to-handle-screen-orientation_28.html)

Android 提供了另一种优雅的方式来实现这一点。为此，我们必须重写一个名为`onSaveInstanceState()`. Android 平台允许用户保存任何实例状态。实例状态可以保存在 Bundle 中。Bundle 作为参数传递给 onSaveInstanceState 方法。

我们可以从作为参数传递给`onCreate`方法的 Bundle 中加载保存的实例状态。我们还可以在`onRestoreInstanceState`方法中加载保存的实例状态。但我会把它留给读者去理解。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-07-30T04:29:36.917

正如 Dhruv Gairola 回答的那样，您可以使用 Bundle savedInstanceState 来保存应用程序的状态。我试图举一个非常简单的例子，像我这样的新学习者可以很容易地理解。

假设您有一个带有 TextView 和 Button 的简单片段。每次单击按钮时，文本都会更改。现在，更改您的设备/模拟器的方向，并注意您丢失了数据（意味着单击后更改的数据）并且片段再次开始作为第一次。通过使用 Bundle savedInstanceState 我们可以摆脱这个。如果你看一下片段的生命周期。[Fragment Lifecylce](https://developer.android.com/guide/components/fragments.html)你会得到一个方法“onSaveInstanceState”在片段即将被销毁时被调用。

因此，我们可以像这样将状态表示更改的文本值保存到该包中

```
 int counter  = 0;
 @Override
 public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("value",counter);
 } 
```

确定方向后，将调用“onCreate”方法对吗？所以我们可以这样做

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if(savedInstanceState == null){
        //it is the first time the fragment is being called
        counter = 0;
    }else{
        //not the first time so we will check SavedInstanceState bundle
        counter = savedInstanceState.getInt("value",0); //here zero is the default value
    }
} 
```

现在，你不会在定向后失去你的价值。始终会显示修改后的值。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-01-21T08:21:43.917

Android 中的 onCreate(Bundle savedInstanceState) 函数：

1.  当 Activity 第一次调用或启动时，onCreate(Bundle savedInstanceState) 方法负责创建 Activity。

2.  当活动的方向（即从水平到垂直或垂直到水平）发生变化或当任何操作系统强制终止活动时，savedInstanceState 即 Bundle 类的对象将保存活动的状态。

3.  方向更改后，onCreate(Bundle savedInstanceState) 将调用并重新创建活动并从 savedInstanceState 加载所有数据。

4.  基本上，当应用程序中出现上述情况时，Bundle 类用于存储活动数据。

5.  应用程序不需要 onCreate()。但是在应用程序中使用它的原因是因为该方法是放置初始化代码的最佳位置。

6.  您还可以将初始化代码放在 onStart() 或 onResume() 中，当您的应用程序首先加载时，它的工作方式与 onCreate() 中的相同。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-12-01T14:54:40.810

`onCreate(Bundle)`在活动首次启动时调用。您可以使用它来执行一次性初始化，例如创建用户界面。`onCreate()`接受一个参数，该参数要么为空，要么为`onSaveInstanceState`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-05T08:32:49.573

onCreate(Bundle savedInstanceState) 被调用，并且如果您的 Activity 并且它在上述场景（可视视图）中终止，则 savedInstanceState 将是非空的。然后，您的应用程序可以从 savedInstanceState 中获取（捕获）数据并重新生成您的 Activity

# iphone - 更改 Facebook“发布到墙上”页面 iOS 中的图像

> ID：10810422
> 
> 赞同：0
> 
> 时间：2012-05-30T05:25:03.063
> 
> 标签：iphone, ios, facebook, sharekit

我使用 Sharekit 将 Facebook 集成到我的 iphone 应用程序中。

```
 NSURL *url = [NSURL URLWithString:@"http://www.mywebsite.com"];

    shareScore_ = [SHKItem URL:url title:@"Sample Post"];

    [SHKFacebook shareItem:shareScore_]; 
```

如何更改 Facebook“发布到墙上”视图中的图标。现在自动显示的图标是我网站的图标`http://www.mywebsite.com`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:05:57.400

如果您使用[ShareKit 2.0](https://github.com/ShareKit/ShareKit/) ，这很容易。

```
NSURL *url = [NSURL URLWithString:@"http://www.mywebsite.com"];
NSString *pictureURI = @"http://www.mywebsite.com/picture.jpg";

shareScore_ = [SHKItem URL:url title:@"Sample Post"];
shareScore_.facebookURLSharePictureURI = pictureURI;

[SHKFacebook shareItem:shareScore_]; 
```

更多信息在`SHKItem.h`和`DefaultSHKConfigurator.m`

如果您是[ShareKit 2.0](https://github.com/ShareKit/ShareKit/)的新手，那么安装与原来的 shareKit 完全不同。确保您仔细遵循安装 wiki。

# google-chrome-extension - 特定于扩展的上下文菜单

> ID：10810423
> 
> 赞同：0
> 
> 时间：2012-05-30T05:25:04.640
> 
> 标签：google-chrome-extension

我正在尝试将一个项目添加到我的扩展程序的右键菜单中。我试图找到一种可行的方法，但很多结果似乎都在处理实际页面上的上下文菜单，而不是扩展图标本身。不幸的是，contextMenus API 似乎对此不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:19:05.290

目前没有用于此的 API。前往[Chromium 问题 78631](http://code.google.com/p/chromium/issues/detail?id=78631)并单击星号为它投票并通过电子邮件接收更新。同时，您可以创建一个弹出菜单，其中列出了主要操作和您将在上下文菜单中放置的操作。

（我假设您正在尝试将上下文菜单项添加到浏览器操作中。您的问题有点模棱两可。）

# c# - GridView 拉伸页面宽度

> ID：10810425
> 
> 赞同：0
> 
> 时间：2012-05-30T05:25:09.667
> 
> 标签：c#, asp.net, css

我有一个 13 列的网格视图。所有列都是绑定字段。当数据绑定到gridview时，gridview会拉伸页面，页面的布局会变得单调乏味。我添加了 girdview 的页面是从母页继承的，而 gridview 位于面板内。我们研究百分比而不是像素，所以我面临这个问题。如果我使用像素来修复 gridview 的宽度，它可以正常工作，但在 %. 我已经尝试了以下所有方法 -

1.  删除绑定字段和使用的模板字段，并修复 itemstyle-width。
2.  将 girdview 放在表格中并应用样式来设置宽度、溢出和其他必需的属性。
3.  将 gridview 放入 div 并应用样式来设置宽度、溢出和其他所需属性。
4.  在面板内添加gridview，然后如上设置面板的属性。

**什么有效： -** 当我将gridview的“tableLayout”属性修复为“fixed”时，它显示在范围内，但所有文本相互重叠，因此所有东西都变得无用。

请给我建议。

示例代码： -

```
<table>
            <tr>
                <td>
            <asp:Panel ID="pnlSearchResult" runat="server" Visible="false" Width="97%">
            <div style="overflow:scroll;width:100%;table-layout:fixed">
                <asp:GridView ID="grdSearchResult" runat="server" SkinID="NewGridGS" EmptyDataText="No records found"
                Width="99%">
                    <Columns>                            
                        <asp:BoundField DataField="ECode" HeaderText="Code"/>
                        <asp:BoundField DataField="EName" HeaderText="Name" />
                        <asp:BoundField DataField="Type" HeaderText="V Type" />
                        <asp:BoundField DataField="VName" HeaderText="V Name" />
                        <asp:BoundField DataField="PStartDate" HeaderText="P Start Date" />
                        <asp:BoundField DataField="PEndDate" HeaderText="P End Date" />
                        <asp:BoundField DataField="VStartDate" HeaderText="V Start Date" />
                        <asp:BoundField DataField="VEndDate" HeaderText="V End Date" />
                        <asp:BoundField DataField="OnSite" HeaderText="On Site" />
                        <asp:BoundField DataField="PCode" HeaderText="P Code" />
                        <asp:BoundField DataField="PSCode" HeaderText="PS Code" />
                        <asp:BoundField DataField="AmountUSD" HeaderText="Amount (USD)" />
                        <asp:BoundField DataField="AmountINR" HeaderText="Amount (INR)" />
                    </Columns>
                </asp:GridView>
                </div>
            </asp:Panel>
        </td>
        </tr>
        </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:33:17.850

以像素而不是百分比给出包含网格的 div 的宽度

```
<td>
<div id="divGrid" style='position:absolute; width:800px; overflow:auto'>

<!-- your grid here -->

</div>

</td> 
```

您可以以像素为单位获取屏幕宽度并以百分比计算像素。假设屏幕宽度为 1000 像素，由 screen.width 返回，那么您的 90% 将是 900 像素。

```
<script language="javascript" type="text/javascript">
   document.getElementById('divGrid').style.width = screen.width + "px";
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-23T07:45:21.533

您可以在没有 Javascript 的情况下使用 100% 作为您想要的百分比

```
<td>
    <div id="gridDiv" style='width:100%; overflow:auto;'>
        <!-- your grid here -->
    </div>
</td> 
```

# c# - 从 CMD 执行控制台应用程序

> ID：10810431
> 
> 赞同：1
> 
> 时间：2012-05-30T05:25:42.097
> 
> 标签：c#, cmd, console-application

我有很多用 c# 控制台应用程序编写的函数来说明不同的代码集。假设我有 writeXML()、readXML()、writeText()、ReadText() 等函数

我的 Main() 函数将打开命令提示符，现在，是否可以转到 cmd 并执行特定函数，一一说明并显示每个函数的输出？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:30:21.090

简而言之， ans 是不可以的。
但是是的，您可以`reflection`结合使用 with`Console.ReadLine()`来做您想做的
事情

```
while(true)
{
 var cmd = Console.ReadLine();
 var methodInfo = from m in (classObject).GetType().GetMethods() where m.Name == cmd;
 methodInfo.Invoke(classObject, new object[] { /* arguments to method */ });
} 
```

注意：-我在这里给出的代码只是一个伪代码并且无效，但是一旦你开始应用它，你就可以通过它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:08:47.527

也许用于交互式 C# 的[Roslyn是一种选择？](http://blogs.msdn.com/b/csharpfaq/archive/2012/01/30/roslyn-ctp-introduces-interactive-code-for-c.aspx)

它甚至有一个[脚本 API](http://visualstudiomagazine.com/articles/2011/11/16/the-roslyn-scripting-api.aspx)，但我对这个[独立的 Roslyn REPL](http://www.sellsbrothers.com/posts/Details/12704)非常满意（现在还有一个[更优雅的 GUI](http://www.sellsbrothers.com/posts/Details/12710)）。

# c# - 获取 2 个列表之间的差异

> ID：10810438
> 
> 赞同：3
> 
> 时间：2012-05-30T05:26:28.207
> 
> 标签：c#, .net, linq

我有两个列表（`ListA`和`ListB`），这些列表的类型相同`PersonInfo`，`Login`字段是唯一键。

```
public class PersonInfo
{
    public string Login { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Age { get; set; }
    public bool Active { get; set; }
} 
```

我想比较这两个列表：

1.  我想得到一个`ListA`不可用的项目列表`ListB`

2.  对于两个列表中可用的项目，我想从`ListA`（`Login`字段是唯一键）中获取两个列表之间存在差异的项目的列表。

示例：如果为`Login`“MyLogin”中`ListA`的值`FirstName`与中的值不匹配`ListB`。带有“MyLogin”的项目`Login`必须是结果列表的一部分。

示例：如果特定登录的`Age`介于`ListA`和之间不同，则该项目必须是结果的一部分`ListB`

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T07:29:21.003

要比较自定义数据类型列表的对象，您需要`IEquatable`在您的类中实现并覆盖`GetHashCode()`

检查此[MSDN 链接](http://msdn.microsoft.com/en-us/library/bb460136.aspx)

你的班

```
 public class PersonInfo : IEquatable<PersonInfo>
    {
        public string Login { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public int Age { get; set; }
        public bool Active { get; set; }

        public bool Equals(PersonInfo other)
        {
            //Check whether the compared object is null.
            if (Object.ReferenceEquals(other, null)) return false;

            //Check whether the compared object references the same data.
            if (Object.ReferenceEquals(this, other)) return true;

            //Check whether the properties are equal.
            return Login.Equals(other.Login) && FirstName.Equals(other.FirstName) && LastName.Equals(other.LastName) && Age.Equals(other.Age) && Active.Equals(other.Active);
        }

        public override int GetHashCode()
        {

            int hashLogin = Login == null ? 0 : Login.GetHashCode();

            int hashFirstName = FirstName == null ? 0 : FirstName.GetHashCode();

            int hashLastName = LastName == null ? 0 : LastName.GetHashCode();

            int hashAge = Age.GetHashCode();

            int hashActive = Active.GetHashCode();

            //Calculate the hash code.
            return (hashLogin + hashFirstName + hashLastName) ^ (hashAge + hashActive);
        }
    } 
```

那么这就是你如何使用它（如Pranay的回复中所列）

```
 List<PersonInfo> ListA = new List<PersonInfo>() { new PersonInfo { Login = "1", FirstName = "James", LastName = "Watson", Active = true, Age = 21 }, new PersonInfo { Login = "2", FirstName = "Jane", LastName = "Morrison", Active = true, Age = 25 }, new PersonInfo { Login = "3", FirstName = "Kim", LastName = "John", Active = false, Age = 33 } };
            List<PersonInfo> ListB = new List<PersonInfo>() { new PersonInfo { Login = "1", FirstName = "James2222", LastName = "Watson", Active = true, Age = 21 }, new PersonInfo { Login = "3", FirstName = "Kim", LastName = "John", Active = false, Age = 33 } };

            //Get Items in ListA that are not in ListB
            List<PersonInfo> FilteredListA = ListA.Except(ListB).ToList();

            //To get the difference between ListA and FilteredListA (items from FilteredListA will be removed from ListA)
            ListA.RemoveAll(a => FilteredListA.Contains(a)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T05:33:01.100

**编辑**

试试这个解决方案的细节差异： [比较两个对象并找到差异](https://stackoverflow.com/questions/4951233/compare-two-objects-and-find-the-differences)

* * *

[如何：查找两个列表之间的差集 (LINQ)](http://msdn.microsoft.com/en-us/library/bb397894.aspx)

[Enumerable.Except Method (IEnumerable, IEnumerable)](http://msdn.microsoft.com/en-us/library/bb300779.aspx) - 通过使用默认相等比较器比较值来产生两个序列的集合差异。

```
 double[] numbers1 = { 2.0, 2.1, 2.2, 2.3, 2.4, 2.5 };
        double[] numbers2 = { 2.2 };

        IEnumerable<double> onlyInFirstSet = numbers1.Except(numbers2); 
```

或者

```
//newList will include all the common data between the 2 lists
List<T> newList = list1.Intersect(list2).ToList<T>();

//differences will be the data not found 
List<T> differences = list1.RemoveAll(a => newList.Contains(a)); 
```

或者

外连接以获得差异

```
var compare1to2 = from a in 
           from b in driveList2.Where(b => b.property == a.property).DefaultIfEmpty()
                              select a; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-20T21:50:58.260

```
var list3 = list1.Except(list2).ToList(); //List3 contains what in list1 but not _list2. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-18T10:11:35.967

试试这个进行对象比较并循环它`List<T>`

```
public static void GetPropertyChanges<T>(this T oldObj, T newObj)
{
    Type type = typeof(T);
    foreach (System.Reflection.PropertyInfo pi in type.GetProperties(System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.Instance))
    {
        object selfValue = type.GetProperty(pi.Name).GetValue(oldObj, null);
        object toValue = type.GetProperty(pi.Name).GetValue(newObj, null);
        if (selfValue != null && toValue != null)
        {
            if (selfValue.ToString() != toValue.ToString())
            {
                //do your code
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-05-30T05:39:17.913

您可以使用 LINQ 中的 Zip() 和 Intersect()

# c# - 在 DOTNET 中实现 VoIP 服务器

> ID：10810444
> 
> 赞同：-2
> 
> 时间：2012-05-30T05:27:27.243
> 
> 标签：c#, asp.net, voip, viber

我需要开发一个 VoIP 服务器（类似 Viber 的应用程序）。客户端软件必须在 Android 上实现，服务器软件必须在 .NET 上实现。因此，基本上，设置将包括在 PC 上运行的服务器应用程序和允许客户端（Android 手机）访问的无线接入点连接到服务器。服务器端需要的一些功能：

1.  语音传输
2.  即时通讯。

谁能帮我在.Net中实现这样的服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:38:15.620

你想做多少，服务器必须做什么？

这些天最常见的方法是 SIP（​​这是“知道如何阅读”的来源 - 这是一个公共规范，谷歌，RFC，开始，很长）。好消息是 - SIP 根本不处理服务器上的音频；）看，除非您进行某种音频播放，否则没有人想与服务器交谈。当我使用我的电话系统时，我会与某人交谈；不给服务器。

SIP 处理 SESSION INITIATION - 它是一个控制协议。实际的音频等流是通过 RTP 和 RTSP 完成的——同样是公共协议，阅读很有趣（而且说真的，它们很复杂）。除非您需要服务器上的音频流（录制等），否则服务器甚至不需要看到它们 - SIP 非常适合直接在两个客户端之间设置会话。SIP 目前由 MOST（迄今为止）VOIP 完成。您可以使用预定义的库。否则，您将处于一个需要大量调试的世界中，抱歉 ;)

# asp.net-mvc-3 - asp.net MVC 中的 RenderSection 和 EditorForModel

> ID：10810446
> 
> 赞同：3
> 
> 时间：2012-05-30T05:27:32.970
> 
> 标签：asp.net-mvc-3

这是我的 _Layout.cshtml

```
<html>
    <head>
        @RenderSection("Script", false)
    </head>
    ...
</html> 
```

这是一个简单的编辑页面edit.cshtml

```
@model Shop.Models.Product
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@Html.EditorForModel() 
```

这是 ~/Views/Shared/EditorTemplates/Product.cshtml

```
@model Shop.Models.Product
@section Script {
    <script>alert("hello");</script>
}
... 
```

`@section Script{...}`由于 EditorForModel，它在 Product.cshtml 中不起作用。怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T06:04:47.257

部分仅在视图中起作用，而不在部分中起作用。编辑器模板是一种特殊的部分。无论如何将javascript放在部分中是不好的做法，所以我只需在`Edit.cshtml`视图中声明该部分。

但是，如果您非常坚持将脚本放在标记的中间，因为 Razor 不支持部分中的部分，您可以实现[自定义帮助](https://stackoverflow.com/a/5433722/29407)程序来实现这一点。

# html - 隐藏特定的 div onload，然后单击后显示 div

> ID：10810450
> 
> 赞同：13
> 
> 时间：2012-05-30T05:27:52.593
> 
> 标签：html, click, jquery

我有两个 div`div1`和`div2`. 我希望 div2 自动隐藏，但是当我单击`preview`div 然后`div2`使其可见并`div1`隐藏。这是我试过但没有运气的代码:(

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
$("div2").hide();
  $("#preview").click(function() {
    $("#div1").hide();
    $("#div2").show();
  });
});
</script>

<div id="div1">
This is preview Div1\. This is preview Div1.
</div>

<div id="div2">
This is preview Div2 to show after div 1 hides.
</div>

<div id="preview" style="color:#999999; font-size:14px">
PREVIEW
</div> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-30T05:34:51.763

请务必注意您的选择器。您似乎忘记了`#`for `div2`。此外，您可以使用以下命令一次切换许多元素的可见性`.toggle()`：

```
// Short-form of `document.ready`
$(function(){
    $("#div2").hide();
    $("#preview").on("click", function(){
        $("#div1, #div2").toggle();
    });
}); 
```

演示：http: [//jsfiddle.net/dJg8N/](http://jsfiddle.net/dJg8N/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-31T18:26:03.497

这是一种更简单的方法。希望这可以帮助...

```
<script type="text/javascript">
$(document).ready(function () {
    $("#preview").toggle(function() {
        $("#div1").hide();
        $("#div2").show();
    }, function() {
        $("#div1").show();
        $("#div2").hide();
    });
});

<div id="div1">
This is preview Div1\. This is preview Div1.
</div>

<div id="div2" style="display:none;">
This is preview Div2 to show after div 1 hides.
</div>

<div id="preview" style="color:#999999; font-size:14px">
PREVIEW
</div> 
```

*   如果您希望在加载时隐藏 div，请将样式设置为***display:none***
*   使用*切换*而不是*单击*功能。

*链接：*

### jQuery 教程

*   [http://docs.jquery.com/Main_Page](http://docs.jquery.com/Main_Page)

*   [http://www.w3schools.com/jquery/default.asp](http://www.w3schools.com/jquery/default.asp) (W3Schools)

*   [http://thenewboston.org/list.php?cat=32](http://thenewboston.org/list.php?cat=32)（视频教程）

*   [http://andreehansson.se/the-basics-of-jquery/](http://andreehansson.se/the-basics-of-jquery/)（基础教程）

### jQuery 参考资料

*   [http://api.jquery.com/](http://api.jquery.com/)
*   [http://oscarotero.com/jquery/](http://oscarotero.com/jquery/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T05:30:04.713

您`#`在 id 选择器之前缺少哈希字符，这应该有效：

```
$(document).ready(function() {
    $("#div2").hide();

    $("#preview").click(function() {
      $("#div1").hide();
      $("#div2").show();
    });

}); 
```

* * *

[了解有关 jQuery ID 选择器的更多信息](http://api.jquery.com/id-selector/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T05:29:28.567

```
$(document).ready(function() {
    $('#div2').hide(0);
    $('#preview').on('click', function() {
        $('#div1').hide(300, function() { // first hide div1
            // then show div2
            $('#div2').show(300);
        });     
    });
}); 
```

`#`你之前错过了`div2`

**[工作样本](http://jsfiddle.net/hjVyR/2/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T05:30:29.830

您第二次提到 div2 时，您没有使用 #id 选择器。

没有名为 div2 的元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-18T08:24:03.457

首先，如果您想在加载时隐藏 id = "abc" 的 div 元素，然后使用 id = "btn" 的按钮在隐藏和显示之间切换，

```
$(document).ready(function() {
 $("#abc").hide(); 
  $("#btn").click(function() {
     $("#abc").toggle();
  });
}); 
```

# mysql - 多对多不在

> ID：10810454
> 
> 赞同：0
> 
> 时间：2012-05-30T05:28:10.707
> 
> 标签：mysql, ruby-on-rails

我正在尝试进行具有 NOT IN 组件的多表连接。表是

帖子 -> 术语关系 -> 术语

```
Post
  has_many :term_relationships
  has_many :terms, :through => :term_relationships

TermRelationship
  belongs_to :post
  belongs_to :term

Term
  has_many :term_relationships
  has_many :posts, :through => :term_relationships 
```

目标是获取除“精选”中的所有帖子*之外的所有帖子。*我当前的查询看起来像：

```
WpPost.includes(:terms).where("terms.term NOT IN (?)", ["featured"]) 
```

如果它附加的唯一术语是“特色”，这将非常有用。如果帖子属于“精选”和“真棒”，它仍然会因为“真棒”而显示。

无论如何要完全排除一行？它需要子查询吗？如果是这样，我将如何在 Rails 中做到这一点？

谢谢大家！贾斯汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:30:13.797

你滥用`includes`. 这是为了急切加载，而不是为了加入！

但你的方法是对的。它可以用于您的情况。`NOT IN (?)`但是即使合乎逻辑，Rails 也不会发出嵌套请求。您将获得 2 个查询（您将获得`NOT IN (id1, id2....,)`而不是`NOT IN (SELECT ....)`）。

所以我建议你使用[squeel gem](https://github.com/ernie/squeel)：

常规 AR 代码（也可以用 squeel 美化）：

```
featured_posts = WpPost.joins(:terms).where(terms:{term: ['featured']}).uniq 
```

然后使用 sqeel 的力量：

```
WpPost.where{id.not_in featured_posts} 
```

（`in`并且`not_in`也被称为`>>`and`<<`但我不想吓到任何人）

**注意使用块和符号的缺失。**

* * *

SQLite 下 基于[Chinook 数据库的一些测量：](http://chinookdatabase.codeplex.com/wikipage?title=Chinook_Schema&referringTitle=Home)

```
> Track.all
  Track Load (35.0ms)  SELECT "Track".* FROM "Track" 
```

与`joins`和的关系`like`：

```
oldie = Track.joins{playlists}.where{playlists.name.like_any %w[%classic% %90%]} 
```

这是`NOT IN`：

```
> Track.where{trackId.not_in oldie}.all
  Track Load (37.5ms)  SELECT "Track".* FROM "Track" WHERE "Track"."trackId" 
  NOT IN (SELECT "Track"."TrackId" FROM "Track" INNER JOIN "PlaylistTrack" ON
    "PlaylistTrack"."TrackId" = "Track"."TrackId" INNER JOIN "Playlist" ON 
    "Playlist"."PlaylistId" = "PlaylistTrack"."PlaylistId"
     WHERE (("Playlist"."name" LIKE '%classic%' OR "Playlist"."name" LIKE '%90%'))) 
```

供参考：

```
Track.where{trackId.not_in oldie}.count # => 1971
Track.count # => 3503
# join table:
PlaylistTrack.count # => 8715 
```

**结论：**我没有看到由`NOT IN`. 35.0 与 37.5 没有明显区别。几次 35.0 变成了 37.5，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:54:47.123

一种选择是进行 OUTER JOIN 并将特色参数放在那里。然后，您只需选择未加入任何术语的所有帖子。我不知道以简单的“Rails 方式”来做这件事的任何方式，但是使用一些额外的 SQL 你可以这样做：

```
Post.joins("LEFT OUTER JOIN term_relationships ON posts.id = term_relationships.post_id
            LEFT OUTER JOIN terms ON term_relationships.term_id = terms.id AND terms.term = ?", "featured").
     where("terms.id IS NULL") 
```

# .net - 如何在 .Net Restful Web 服务中公开二进制文件？

> ID：10810455
> 
> 赞同：2
> 
> 时间：2012-05-30T05:28:14.543
> 
> 标签：.net, wcf, rest

是否可以通过 .net (WCF) Rest Full Web 服务公开二进制文件。

我想在我的网络服务器上有一个二进制文件，它可以作为休息资源使用，比如

.../api/firmware_2_0

我的 Web 服务客户端可以“获取”。

这可能吗，我可以做谁。

我熟悉使用 Restful Web 服务来提供来自数据库的数据的 JSON 表示，而不是二进制文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T18:12:53.530

尽管我同意在大多数情况下应该使用 IIS 来提供文件，但在某些情况下，您实际上希望通过 RESTful WCF 服务公开原始二进制文件。

来自[http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-web.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-web.aspx)，

```
[OperationContract]
[WebGet(UriTemplate = "?url={uri}")]
public Stream GetBinary(string uri)
{
    var binary = new byte[0]; // some sort of query
    var mimeType = ""; // some sort of query
    WebOperationContext.Current.OutgoingResponse.ContentType = mimeType;
    return new MemoryStream(binary);
} 
```

现在意识到，这样做你完全绕过了 WCF 的格式。因此，不会有任何 xml/json 包装。

# java - 如何将 LinkedHashSet 转换为二维数组

> ID：10810458
> 
> 赞同：0
> 
> 时间：2012-05-30T05:28:42.750
> 
> 标签：java

我想将 LinkedHashSet 转换为 2D Integer 数组。

`LinkedHashSet`是从已经可用的 2D 整数`array[n][3]`使用`Set`和 构造的`Arrays.asList()`，删除了重复项。

现在，如果 eg`[ [10, 14, -99], [10, 99, -14], [14, 99, -10] [null] ]`是 LinkedHashSet

我想

```
first[n][2]={ {10, 14}, {10, 99}, {14, 99}} 
```

或者

```
second[n][1]={ {-99}, {-14}, {-10} } 
```

即打破`LinkedHashSet`（其中每个节点包含3个整数作为信息字段）成两个大小的整数数组，`[n][2]`如上`[n][1]`例所述。

我想要一种有效且简单的方法来在 java 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:47:02.037

我不认为 java 有任何内置方法可以将 HashSet 转换为 2D 数组。因此，据我所知，您将不得不通过迭代 HashSet 来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T07:20:59.987

我自己已经解决了这个问题，代码如下。

```
Let us given LinkedHashSet as Set<Set<Integer>> r the format is as given above; 
```

首先转换大小为 [r.size][3] 的二维数组 ar；然后实现以下代码

```
int i=0;
for(Set<Integer> set:r)
ar[i++] = s.toArray(new Integer[3])

 Then store this ar[n][3] value into two separate array First[n][2] and Second[n][2] using looping. 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-12T07:32:27.933

![兑换](../Images/1f9d7fd21055781b05612f99ee3c87ea.png)

我能想到的唯一方法是使用临时字符串变量来存储打印集，删除 [ , ] 然后将其存储到数组中，这被认为是低效的，但有效。

# silverlight - 如何在silverlight中的复选框更改事件之前首先更新与复选框绑定的可观察集合？

> ID：10810461
> 
> 赞同：0
> 
> 时间：2012-05-30T05:28:52.173
> 
> 标签：silverlight

让我解释一下这个问题。

我有一个可观察的 FilterTags 类型的集合（其中 FilteredTags 是一个类，有一个名为“isChecked”的属性）。现在我的复选框与这个可观察的集合绑定了。这是一种双向绑定，所以当我选中一个复选框时，更改会反映在集合中。该复选框还有一个检查更改事件。问题是在集合中的更改更新之前调用的 checkchanged 事件。

我希望首先更新集合，以便我可以在 checkboxchanged 函数中使用它。有什么办法可以做到吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:22:46.507

我为文本框执行此操作，以在文本更改时强制更新模型的值，也许它可以帮助您（尝试在事件处理程序的顶部运行它）：

```
var expression = this.GetBindingExpression(TextBox.TextProperty);
if (expression != null)
    expression.UpdateSource(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:46:40.797

尽量不要在用户控制下的代码中使用订阅事件。尝试根据 MVVM 模式设计项目。[你可以在那里](http://msdn.microsoft.com/en-us/library/gg430869%28v=PandP.40%29.aspx)找到一些信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:20:35.473

试试这样。在更新准备就绪时触发一个事件。

```
public event EventHandler SaveCompleted; 
```

...

```
_ctx.SubmitChanges((so) => {
        if (SaveCompleted != null) SaveCompleted(this, new EventArgs());
        InvalidateCommands();

    }, null); 
```

# database - DatabaseError 无法打开数据库文件

> ID：10810462
> 
> 赞同：2
> 
> 时间：2012-05-30T05:28:55.733
> 
> 标签：database, django, apache, permissions

我的 sqlite db 文件是这样的：`unable to open database file`我 chowned 所有文​​件夹，直到我的 dbfile 为 root。但我仍然收到此错误。但我记得在服务器上创建我的 django 项目时，我创建了一个超级用户，现在如果我这样做了，`ls -l`我看到该用户就是那个超级用户。怎么可能告诉 apache 这个超级用户应该有写/读 db 文件的权限？或者如何解决这个问题，我不是 apache/linux 大师..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T06:02:00.817

`chown www-data:www-data directory`在您希望 apache 能够写入的目录上执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:57:56.693

您应该能够将文件保留为超级用户所有，只需更改组，以便 apache 也可以读取/写入它。

更改 sqlite 文件和包含目录的组。试试这个：

```
cd <directory with sqlite file>
sudo chgrp www-data . <sqlitefile> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:52:28.687

您可以找到写入组和 www 用户并更改权限。说： cat /etc/passwd - 用于查找正确的用户，它可能是 apache 或 http 或 www。对终端说： cat /etc/group -for 找到正确的组。在我的系统组=apache，用户=apache。

# objective-c - xcode 中的 HTTP 套接字

> ID：10810466
> 
> 赞同：-1
> 
> 时间：2012-05-30T05:29:40.187
> 
> 标签：objective-c, xcode4

```
request = CFHTTPMessageCreateRequest(kCFAllocatorDefault, (CFStringRef)requestMethod, (CFURLRef) sURL, kCFHTTPVersion1_1); 
```

这个代码是什么参数和变量，可以很好的参考电子书，pdf.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:49:50.370

最好是从[源头做起](https://developer.apple.com/library/mac/#documentation/Networking/Conceptual/CFNetwork/CFHTTPTasks/CFHTTPTasks.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:44:24.297

请查看 NSURLRequest。对于初学者来说，它更简单，也更容易使用。

# php - 在 MySQL 中，如何选择空记录

> ID：10810471
> 
> 赞同：4
> 
> 时间：2012-05-30T05:30:26.493
> 
> 标签：php, mysql, select, outer-join

我有以下 MySQL 表结构：

```
mysql> desc customers;
+---------------------+-------------+------+-----+---------+-------+
| Field               | Type        | Null | Key | Default | Extra |
+---------------------+-------------+------+-----+---------+-------+
| hash                | varchar(32) | NO   | PRI | NULL    |       |
| date_joined         | date        | NO   |     | NULL    |       |
| agent_code          | int(5)      | NO   | UNI |         |       |
+---------------------+-------------+------+-----+---------+-------+

mysql> desc persons;
+--------------------+-------------+------+-----+---------+-------+
| Field              | Type        | Null | Key | Default | Extra |
+--------------------+-------------+------+-----+---------+-------+
| agent_code         | int(5)      | NO   | UNI |         |       |
| team_id            | int(2)      | YES  |     | 0       |       |
| hash               | varchar(32) | NO   | PRI | NULL    |       |
+--------------------+-------------+------+-----+---------+-------+

mysql> desc teams;
+--------+-------------+------+-----+---------+----------------+
| Field  | Type        | Null | Key | Default | Extra          |
+--------+-------------+------+-----+---------+----------------+
| id     | int(11)     | NO   | PRI | NULL    | auto_increment |
| name   | varchar(20) | YES  |     | NULL    |                |
| leader | varchar(32) | NO   | UNI | NULL    |                |
+--------+-------------+------+-----+---------+----------------+ 
```

我希望按团队生成销售报告。

我正在使用的 SQL 查询如下：

```
SELECT COUNT(`customers`.`agent_code) AS `customer_count`, `teams`.`name` 
FROM  `customers` 
JOIN  `persons` ON  `customers`.`agent_code` =  `persons`.`agent_code` 
JOIN  `teams` ON  `persons`.`team_id` =  `teams`.`id` 
GROUP BY  `teams`.`name` 
```

它显示以下信息：

```
+----------------+--------+
| customer_count | name   |
+----------------+--------+
|              3 | Team 1 |
+----------------+--------+ 
```

但是，我想查看数据库中所有团队的“customer_count”，即使给定团队的 customer_count 为空（或零）。我的数据库中有 15 个团队，所以我希望看到类似的内容：

```
+----------------+--------+
| customer_count | name   |
+----------------+--------+
|              3 | Team 1 |
|              0 | Team 2 |
|              0 | Team 3 |
|              0 | Team 4 |
+----------------+--------+ 
```

我试图执行以下查询的一些变体，但我总是收到一个错误，说 OUTER JOIN 的语法不正确，即使我已经阅读了文档，并且它是正确的。

```
 SELECT COUNT(  `customers`.`agent_code` ) AS  `customer_count` ,  `teams`.`name` 
 FROM  `customers` 
 LEFT JOIN  `persons` ON  `customers`.`agent_code` =  `persons`.`agent_code` 
 LEFT OUTER JOIN  `teams` ON  `persons`.`team_id` =  `teams`.`id` 
 GROUP BY  `teams`.`name` 
```

如何更改当前查询以显示此类结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:37:41.297

你有错误让主桌是人 - 我建议你的主桌是`team`

```
SELECT COUNT(`customers`.`id`) AS  `customer_count` ,  `teams`.`name` 
 FROM  `teams`
 JOIN  `persons` ON `persons`.`team_id` = `teams`.`id`
 LEFT JOIN `customers`  ON  `customers`.`agent_code` =  `persons`.`agent_code` 
 GROUP BY  `teams`.`name` 
```

更新：如果您确实有空团队，则需要在人员上设置左加入

```
SELECT COUNT(`customers`.`id`) AS  `customer_count` ,  `teams`.`name` 
 FROM  `teams`
 LEFT JOIN  `persons` ON `persons`.`team_id` = `teams`.`id`
 LEFT JOIN `customers`  ON  `customers`.`agent_code` =  `persons`.`agent_code` 
 GROUP BY  `teams`.`name` 
```

# facebook - 将 swf 发布到新闻源（“Feed 游戏”）

> ID：10810476
> 
> 赞同：1
> 
> 时间：2012-05-30T05:30:53.653
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, feed

我无法通过“Feed Gaming”将可播放的 swf 发布到新闻源。my_og.php 中的打开图形对象（下面的代码）在 facebook 调试器中看起来很好，并识别出它是一个视频嵌入。但是，当我使用 javascript api 和 feed 对话框（下面的代码）发布到 feed 时，它无法识别它应该能够被点击并加载 swf 来播放并且只显示静态图像。

js 接口调用：

```
var obj = {method: 'feed', link: 'http://example.com/my_og.php'};
FB.ui(obj, function(response) {}); 
```

my_og.php ：

```
<html lang="en" xmlns:fb="https://www.facebook.com/2008/fbml">
<head prefix="og: http://ogp.me/ns fb: http://ogp.me/ns/fb">    

<meta property="fb:app_id"       content="xxxxxxxxxxxx" />
<meta property="og:type"         content="game" />
<meta property="og:url"          content="http://example.com/my_og.php" />
<meta property="og:title"        content="title" />
<meta property="og:description"  content="desc" />
<meta property="og:image"        content="http://example.com/test.png" />
<meta property="og:video"        content="http://example.com/test.swf" />
<meta property="og:video:width"  content="200" />
<meta property="og:video:height" content="200" />
<meta property="og:video:type"   content="application/x-shockwave-flash" />

</head>  
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:55:08.460

尝试添加一个指向您的 swf 文件的“源”属性（而不是代码中的“视频”）和一个指向您的图标的“图片”属性（而不是“图像”）。这就是我所做的，它开始工作了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T01:41:55.923

开始工作，没有任何变化。一定是Facebook方面的修复。

# iphone - 两个 UIViewController，一个 XIB 文件

> ID：10810478
> 
> 赞同：1
> 
> 时间：2012-05-30T05:31:00.673
> 
> 标签：iphone, objective-c, ios4

比方说，我有三个 UIViewController

*   用户窗体视图控制器
*   新用户窗体视图控制器：用户窗体视图控制器
*   更新用户窗体视图控制器：用户窗体视图控制器

因此，NewUserFormViewController 和 UpdateUserFormViewController 视图控制器从其父级继承以共享基本功能。不同的是他们的方法，创建和更新。

这些观点也有很多共同点，几乎无所不包。NewUserFormViewController 和 UpdateUserFormViewController 之间的不同视图组件是执行保存任务（创建或更新）的按钮

**是否可以让两个 UIViewController 共享一个 XIB 文件？**比方说， UserFormViewController.xib 然后我做

```
[[NewUserFormViewController alloc] initWithNibName@"UserFormViewController" bundle:nil];
[[UpdateUserFormViewController alloc] initWithNibName@"UserFormViewController" bundle:nil]; 
```

另一个但重要的问题是，**当我使用 Interface Builder 编辑 xib 文件时，它在谈论什么所有者的参考网点和 IBActions，NewUserFormViewController 还是 UpdateUserFormViewController？** （当我们右键单击占位符 -> 文件所有者时显示 IBActions 和 Outlets）

如果是这样，我将只使用一个 XIB 文件并以编程方式添加其他特定的视图组件（最好只有一个 XIB 文件，这样我可以在一个地方进行一些更改，但对两者都有效）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T05:58:05.403

“文件所有者”只是一个约定，因此 XCode 可以在其检查器中向您显示正确`IBOutlet`的 s 和s。`IBAction`如果您创建一个泛型（用 OO 术语：抽象）`UserFormViewController`（.h、.m、.xib），请将其连接到 IB；然后将它分成两个子类`NewUserFormViewController`，`UpdateUserFormViewController`它们将从父类继承它们的出口和动作，没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:56:18.673

@Armaan 我通过简单地调用子类的 alloc init 方法遇到了同样的问题。我通过使用 initWithNibName: 解决了这个问题，并提供了父类的 xib 文件名。

# c# - 如果我正在读取的字节还不存在，BinaryReader 会做什么？

> ID：10810479
> 
> 赞同：9
> 
> 时间：2012-05-30T05:31:10.487
> 
> 标签：c#, .net, networking, binaryreader

我在 NetworkStream 之上使用 BinaryReader 从网络中读取数据。这对我来说非常有效，但我想了解幕后发生的事情，所以我查看了 BinaryReader 的文档，发现它非常稀疏。

我的问题是：如果我打电话时网络流上不存在字节怎么`BinaryReader.ReadBytes(bufferSize)`办？`bufferSize``ReadBytes`

在我看来，有几个选择：
1）读取网络流中存在的任何字节并仅返回那么多
2）等到`bufferSize`流中存在字节，然后读取
3）抛出异常

我假设选项 2 正在发生，因为我从未收到任何异常，并且我的所有数据都是完整接收的，而不是分段接收的。但是，我想确切地知道发生了什么。如果有人能启发我，我将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T05:49:08.877

我相信它*实际上*适用于隐藏选项 4：

*   在数据可用时读取数据，以与通常手动执行的方式相同的方式循环。*如果它在读取时到达流的末尾*，它只会返回一个小于您要求的字节数的值。

这与您的选项 2 略有不同，因为它*确实会*在数据可用时耗尽流 - 它不会等到它可以一次性读取所有数据。

很容易证明它返回的字节数比你要求的要少：

```
var ms = new MemoryStream(new byte[10]);
var readData = new BinaryReader(ms).ReadBytes(100);
Console.WriteLine(readData.Length); // 10 
```

*如果没有明确需要*多次`Read`调用以返回所有数据的自定义流，则很难证明循环部分。

文档并不像它可能的那样清晰，但返回值部分至少*有点*帮助：

> 一个字节数组，包含从底层流中读取的数据。**如果到达流的末尾，**这可能小于请求的字节数。

请注意我突出显示的最后一部分，并将其与`Stream.Read`：

> 读入缓冲区的总字节数。**如果当前没有那么多字节可用**，则该字节数可以小于请求的字节数，如果已到达流的末尾，则该字节数为零 (0)。

如果您期望准确数量的数据并且*只有*该数量才有用，我建议您编写一个方法，如果您需要的数据多于关闭之前提供的流，则该`ReadExactly`方法调用`Read`并抛出。`EndOfStreamException`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:40:22.323

如果通过“出现在流上”，您询问该方法是否会阻塞，直到指定的字节数可用，那么它是选项 2。如果流的*结尾*是，它只会返回更少量的字节到达。

`BinaryReader.ReadBytes(int)`以下是一些关于如何实现的示例代码：

```
byte[] ReadBytes(int count)
{
    byte[] buffer = new byte[count];
    int total = 0;
    int read = 0;

    do
    {
        read = stream.Read(buffer, read, count - total);
        total += read;
    }
    while (read > 0 && total < count);

    // Resize buffer if smaller than count (code not shown).

    return buffer;
} 
```

# actionscript-3 - 如何定义内联或警报功能，即在 flex 中定义主要是单独的功能？

> ID：10810480
> 
> 赞同：1
> 
> 时间：2012-05-30T05:31:18.583
> 
> 标签：actionscript-3, apache-flex, air, flash-builder

我想在警报类中定义内联函数，目前我有以下实现。

```
Alert.show('my mesage', 'header message', Alert.OK, Alert.No, doAction)

private function doAction(event:CloseEvent):void
{
    //some code
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T05:41:42.423

你的意思是你想这样做？（极坏的主意）：

```
Alert.show('my mesage', 'header message', Alert.OK, Alert.No, function(event:CloseEvent):void
{
    //some code
}); 
```

# jquery - 用于分页的 jQuery.ajax() 问题

> ID：10810481
> 
> 赞同：0
> 
> 时间：2012-05-30T05:31:24.697
> 
> 标签：jquery, ajax, pagination, magento-1.6

我使用 magento 作为我的 CMS，试图实现 ajax 进行分页，

我现在有2页，结构是这样的，

```
<div class="pager">
        <div class="pages">
          <strong>Page:</strong>
          <ol>
             <li class="current">1</li>
             <li>
                <a href="http://localhost/Bakestore/index.php/tools.html?p=2" class="pageLinks">2</a></li>
             <li class="pager_next_img">
                <a class="next i-next pageLinks" href="http://localhost/Bakestore/index.php/tools.html?p=2" title="Next">
                <img src="http://localhost/Bakestore/skin/frontend/default/Bakestore_Theme/images/pager_arrow_right.gif" alt="Next" class="v-middle">
                </a>
            </li>
          </ol>
    </div>
</div> 
```

我的 jQuery ajax 代码如下，

```
$j(".pages li a").each(function(){
    $j(this).removeClass('pageLinks').addClass('pageLinks');                                
});

$j(".pageLinks").click(function(e){
    e.preventDefault();
    var anchorSel =  $j(this).attr('href');
    $j.ajax({
        type: "POST", 
        datatype: "HTML",
        cache: true,
        url: anchorSel,

        success: function(data){
            var testdata = $j(data).find(".category-products");
            $j(".col-main .category-products").replaceWith(testdata);
            },

        complete: function(data){
                        $j(".pages li a").each(function(){
                            $j(this).removeClass('pageLinks').addClass('pageLinks');                            });
                            alert($j(".col-main .category-products .toolbar > .pager").html());
                         }
}); 
```

当我点击时它工作正常`Page 2`，但是，当我点击时，从第 2页开始`Page 1`，页面重新加载。现在当我`Page 2`再次点击时，它工作正常。

我调试了我的 jQuery，可悲的是，事件`$j(".pageLinks").click`根本没有被触发（当我点击 时`Page 1`）。

知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:35:43.110

您的返回 html 包含分页链接？如果是这样，您需要更改`.click(function(){`为`.live('click', function(){`

click 仅将现有元素绑定到该事件处理程序。除了尚未出现的元素外，live 也是如此。

live 确实被弃用了。如果您使用的是 1.7，我认为您不是。你应该把它改成

```
$(document).on('click', ".pageLinks", function(){

}); 
```

# boost - 编译 Boost.Log 的最低 Boost 版本是多少（截至修订版 667）？

> ID：10810485
> 
> 赞同：2
> 
> 时间：2012-05-30T05:32:07.637
> 
> 标签：boost, ios4, boost-log

我已经成功地为 iOS 4.3构建了一些[Boost C++ 1.44.0库。](http://www.boost.org/users/history/version_1_44_0.html)我现在需要[Boost.Log v2](http://boost-log.svn.sourceforge.net/viewvc/boost-log/branches/bleeding-edge/)。Boost.Log 需要构建 Boost C++。但是，Boost.Log 文档没有提到任何最小的 Boost C++ 版本。

我在网上发现[Boost.Log 是使用 Boost 1.45.0 成功构建的，](http://mytechnotebook.wordpress.com/2011/01/04/how-to-build-and-install-boost-log/)但如果它是为 Boost.Log v1 或 v2 编译的，则没有提供任何信息。

**任何人都可以了解应该用于编译 Boost.Log v2 (rev 667) 的 Boost C++ 库最低版本吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:39:32.080

好吧，在问这个问题之前，我应该尝试构建 Boost.Log（在 667 处）。在构建输出中，它被明确写成：

```
./boost/log/detail/prologue.hpp:36:5: error: #error Boost.Log: **Boost version 1.48 or later is required** 
```

因此，Boost.Log v2（修订版 667）至少需要 Boost 1.48.0。

# javascript - Dojo 1.6.1 自定义小部件不会进入 IE9、Firefox、Chrome 中的 postCreate

> ID：10810486
> 
> 赞同：0
> 
> 时间：2012-05-30T05:32:17.190
> 
> 标签：javascript, asp.net, dojo

***（说明在底部）***

**有帮助：**代码中在开头和结尾有 (*) 的行是我中断的行。

嘿伙计们，我对自定义 dojo 小部件有一个严重的问题。

我有以下代码（services.aspx）：

```
 <asp:Content ID="Content2" ContentPlaceHolderID="formdojoRequirementsPlaceHolder"
    runat="Server">

    <script type="text/javascript">
        dojo.require("js.Forms.ServiceDetails");
        dojo.require("js.Forms.PendingServices");
        dojo.require("js.Forms.CertificatesList");

        dojo.addOnLoad(function() {
            //LOCALIZATION
            var glb_connections = [];
            var ServiceDetailsTab = dijit.byId('ServiceDetails');
            var PendingTaskTab = dijit.byId('PendingTask');
            var PendingServicesTab = dijit.byId('PendingServices');
            var CertificatesListTab = dijit.byId('CertificatesList');
            var MessagesTab = dijit.byId('Messages');

            if (ServiceDetailsTab) { ServiceDetailsTab.attr('title', glb_nlsStrings.ServiceTab) };
            if (PendingTaskTab) { PendingTaskTab.attr('title', glb_nlsStrings.PendingTaskTab) };
            if (PendingServicesTab) { PendingServicesTab.attr('title', glb_nlsStrings.PendingServicesTab) };
            if (CertificatesListTab) { CertificatesListTab.attr('title', glb_nlsStrings.CertificatesTab) };
            if (MessagesTab) { MessagesTab.attr('title', glb_nlsStrings.MessagesTab) };

            ServiceDetailsTab = null;
            PendingTaskTab = null;
            PendingServicesTab = null;
            CertificatesListTab = null;
            MessagesTab = null;
            //

            var queryObj = Utils.General.GetQueryStringObject(window.location.href);
            var organizationId = queryObj[Utils.General.Constants.queryParameters.ORGANIZATIONID];
            var serviceTypeCode = queryObj[Utils.General.Constants.queryParameters.SERVICETYPECODE];

            var tab = queryObj['glb_currentTab'];

            if (dojo.byId("ServiceDetailsWdj") != undefined) {
                *djtServiceDetails.serviceTypeCode = serviceTypeCode;*

                glb_connections.push(dojo.connect(djtPendingServices, "onServiceInstanceDeleted", function() {
                    *djtServiceDetails.onBack();*
                }));

                *glb_connections.push(dojo.connect(djtServiceDetails, "onServiceCompleted", function() {
                    djtPendingServices._FindIncompleteServices(serviceTypeCode, glb_site_userID, organizationId);
                }));*
            }
            else {
                removeTab("ServiceDetails")
            }

            if (dojo.byId("PendingTaskWdj") != undefined) {
                glb_subscriptions.push(dojo.subscribe("_serviceInstanceDeleted", function(child) {
                    *djtPendingServices._FindIncompleteServices(serviceTypeCode, glb_site_userID, organizationId);*
                }));

                glb_connections.push(dojo.connect(djtPendingServices, "onServiceInstanceCompleted", function() {
                    djtPendingServices._FindIncompleteServices(serviceTypeCode, glb_site_userID, organizationId);
                    if (dojo.byId("ServiceDetailsWdj") != undefined) { *djtServiceDetails.postCreate();* }
                }));

                djtPendingServices._FindIncompleteServices(serviceTypeCode, glb_site_userID, organizationId);
            }
            else {
                removeTab("PendingTask")
            }

            removeTab("dataToBeSubmittedTab");

            if (tab != undefined) {
                glb_currentTab = tab;
                var tabContainerWidget = dijit.byId('tabContainer');
                tabContainerWidget.selectChild(glb_currentTab);
            } else {
                glb_currentTab = 'ServiceDetails';
            }

            glb_subscriptions.push(dojo.subscribe("tabContainer-selectChild", function(child) {
                glb_currentTab = child.id;
            }));

        });

        function removeTab(tabId) {
            var tabContainerDijit = dijit.byId("tabContainer");
            if (tabContainerDijit) {
                var dataToBeSubmittedTabDijit = dijit.byId(tabId);
                if (dataToBeSubmittedTabDijit) {
                    tabContainerDijit.removeChild(dataToBeSubmittedTabDijit);
                }
            }
        }

        dojo.addOnUnload(function() {
            if (typeof glb_connections != "undefined")
                dojo.forEach(glb_connections, dojo.disconnect);
            if (typeof glb_subscriptions != "undefined")
                dojo.forEach(glb_subscriptions, dojo.unsubscribe);
        });
    </script>

</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="formMainContentPlaceHolder" runat="Server">
    <div id="ServiceDetails" dojotype="dijit.layout.ContentPane" title="Services" style="height: 95%">
        <div id="divServiceDetails" runat="server">
            <div dojotype="js.Forms.ServiceDetails" jsid="djtServiceDetails" id="ServiceDetailsWdj">
            </div>
        </div>
    </div>
    <div id="PendingTask" dojotype="dijit.layout.ContentPane" title="Pending Tasks" style="height: 95%">
        <div id="divPendingTask" runat="server">
            <div dojotype="js.Forms.PendingServices" jsid="djtPendingServices" id="PendingTaskWdj">
            </div>
        </div>
    </div>
    <div id="CertificatesList" dojotype="dijit.layout.ContentPane" title="Certificates"
        style="height: 95%">
        <div id="divCertificatesList" runat="server">
            <div dojotype="js.Forms.CertificatesList">
            </div>
        </div>
    </div>
</asp:Content>

The 3 files : 1.dojo.require("js.Forms.ServiceDetails");
              2.dojo.require("js.Forms.PendingServices");
              3.dojo.require("js.Forms.CertificatesList"); 
```

是小部件。

该小部件是基于 MVC 构建的。

这里重要的是出现问题的视图部分，因此视图的代码如下：

```
dojo.provide("js.Forms.Views.ServiceDetailsView");

dojo.require("js.Forms.Controllers.ServiceDetailsController");
dojo.require("js.FormSteps.FormsList");
dojo.require("js.FormSteps.IncompleteServices");
dojo.require("BL.DataContracts.Entities.FormDefinition");
dojo.require("BL.DataContracts.Entities.ServiceFormInstance");

dojo.require("dijit._Widget");
dojo.require("dojox.dtl._DomTemplated");
dojo.require("dijit.form.Button");
dojo.require("dijit.TooltipDialog");
dojo.require("dijit.form.DropDownButton");
dojo.require("dijit.form.DateTextBox");

dojo.declare("js.Forms.Views.ServiceDetailsView", [dijit._Widget,  dojox.dtl._DomTemplated], {
connections: null,
controller: null,
widgetsInTemplate: true,
templatePath: dojo.moduleUrl("js.Forms", "Templates/ServicesList.html"),
servicesList: null,
serviceTypeCode: null,
servicesDefinitions: null,
inCompleteServices: null,
isDissolved: null,

constructor: function() {
    this.controller = new js.Forms.Controllers.ServiceDetailsController(this);
    this.nlsStrings = dojo.i18n.getLocalization("Resources", "Resources");
    var queryObj = Utils.General.GetQueryStringObject(window.location.href);
    this.isDissolved = queryObj[Utils.General.Constants.queryParameters.ISDISSOLVED];
},

**postCreate: function(args, frag) {
    this.inherited("postCreate", arguments);
    this.ConnectEvents();
    dojo.style(this.divBackButton, "display", "none");
    if ((this.isDissolved == 'false') || (this.isDissolved == undefined)) {
        this.FindServicesDefinitions();
        this.SetButtonLabels();
    }
},**

SetButtonLabels: function() {
    this.btnBackService.attr('label', this.nlsStrings.btnBack);

},

ConnectEvents: function() {
    this.connect(this.djtIncompleteServices, 'onCreateNewService', function() {
        this.showFormDefinitions();
    });

    this.connect(this.djtIncompleteServices, 'onIncompleteServiceLoad', function(serviceinstanceid, isReturned) {            
        this.djtFormsList.isReturnedService = isReturned;
        this.onFilterDefinitions(serviceinstanceid);
    });

    this.connect(this.djtIncompleteServices, 'onIncompleteServiceDeleted', function(serviceinstanceid) {
        this.onDeleteServiceInstance(serviceinstanceid);
    });

    this.connect(this.djtFormsList, 'onServiceCompleted', function() {
        this._ServiceCompleted();
    });
},

DeleteIncompleteServiceFromModel: function(serviceinstanceid) {
    this.controller.model.incompleteServicesList = dojo.filter(this.controller.model.incompleteServicesList, function(serviceinstance) { return serviceinstance.serviceinstanceid != serviceinstanceid; });
    this.showIncompleteServices(this.controller.model.incompleteServicesList);
    dojo.publish("_serviceInstanceDeleted");
},

onDeleteServiceInstance: function(serviceinstanceid) {
    this.controller.DeleteServiceInstance(serviceinstanceid);
},

FindServicesDefinitions: function() {
    this.controller.FindServices();
},

BindServicesList: function(servicesList) {
    this.servicesList = servicesList;
    this.buildRendering();

    this.ShowServicesList(this.serviceTypeCode);
},

ShowServicesList: function(serviceTypeCode) {
    //debugger;
    dojo.style(this.divServices, "display", "block");

    if (serviceTypeCode == Utils.General.Constants.serviceTypeCode.REGISTRATIONOFORGANIZATION) {
        if (glb_currentRegistrationService) {
            dojo.style(this.divServices, "display", "none");
            this.controller.FindIncompleteRegistrationServices();
        }
    }

    this.servicesListHeading.innerHTML = (serviceTypeCode == Utils.General.Constants.serviceTypeCode.CHANGEOFORGANIZATION) ?
                                         this.nlsStrings.colOrganizationChangeServices : this.nlsStrings.colOrganizationChangeServices;
},

BindIncompleteRegistrationServices: function() {
    //debugger;
    dojo.style(this.divServices, "display", "block");
    var incompleteRegistrationServices = this.controller.GetIncompleteRegistrationServices();
    var hasIncompleteRegistrationServices = (incompleteRegistrationServices != null && incompleteRegistrationServices.length > 0);

    dojo.query("a[servicecode]").forEach(function(node) {
        //debugger;
        if (hasIncompleteRegistrationServices) {
            var idx = -1;
            var nodeServiceCode = dojo.attr(node, "servicecode");

            var incompleteRegServices = dojo.filter(incompleteRegistrationServices, function(item) {
                return item.serviceCode == nodeServiceCode;
            });

            if (incompleteRegServices.length == 0) {
                dojo.attr(node, "disabled", "disabled");
            }
            else {
                for (var i = 0; i < incompleteRegistrationServices.length; i++) {
                    if (incompleteRegistrationServices[i].serviceCode == nodeServiceCode)
                        idx = i;
                }

                if (idx >= 0) {
                    if (incompleteRegistrationServices[idx].shouldEnable == false)
                        dojo.attr(node, "disabled", "disabled");
                    else
                        node.removeAttribute("disabled");
                }
            }
        }
        else {
            //There are no incomplete regisistrations for the organization name.Disable any subservices.
            if (dojo.attr(node, "servicecode") != glb_currentRegistrationService) {
                dojo.attr(node, "disabled", "disabled");
            }
        }
    });
},

onselectService: function(event) {
    var domNode = event.srcElement;

    if (!dojo.hasAttr(domNode, 'disabled')) {
        var serviceCode = dojo.attr(domNode, "serviceCode");

        this.servicesDefinitions = dojo.filter(this.servicesList.OrganizationServices, function(serviceDefinition) { return serviceDefinition.ServiceDefinitionID == serviceCode; });
        if (Utils.General.GetQueryStringObject(window.location.href).organizationid == undefined) {
            this.inCompleteServices = this.controller.FindIncompleteServices(serviceCode, 0);
        }
        else {
            this.inCompleteServices = this.controller.FindIncompleteServices(serviceCode, Utils.General.GetQueryStringObject(window.location.href).organizationid);
        }
    }
},

onFilterDefinitions: function(serviceinstanceid) {
    glb_serviceInstanceID = serviceinstanceid;
    var filteredDefitions = this.controller.FilterFormsDefinitions(serviceinstanceid);
},

DeleteServiceDefinitionFromClient: function(serviceinstanceid) {

},

showFilteredFormDefinitions: function() {
    //debugger;
    var iscomplete = true;
    var modl = this.controller.model.incompleteServiceFormsList;

    var servDefinitions = dojo.clone(this.servicesDefinitions[0]);
    var formsDef = servDefinitions.FormsDefinitions;
    var formCode = null;

    if (servDefinitions.IsVariableFee) {
        var registrationForm = dojo.filter(modl, function(item) {
            return item.formnumber == 'XI00Z';
        });
        if (registrationForm.length > 0) {
            servDefinitions.Fee = registrationForm[0].CalculatedVariableFee;
        }
    }

    for (var i = 0; i < formsDef.length; i++) {
        formCode = formsDef[i].FormDefinitionID;
        for (var j = 0; j < modl.length; j++) {
            if (modl[j].formnumber == formCode) {
                //Attach some dynamic properties to the form definitions
                formsDef[i].pendingtaskid = modl[j].pendingtaskid;
                formsDef[i].iscomplete = modl[j].iscomplete;
                formsDef[i].drcorstatus = modl[j].drcorstatus;

                if ((!modl[j].isDocument) && (modl[j].Attachments.length > 0)) {
                    formsDef[i].DocumentGuid = modl[j].Attachments[0].DocumentID;
                }

                if (modl[j].iscomplete == 0) {
                    iscomplete = false;
                }
            }
        }
    }

    this.djtFormsList.IsCompleted(iscomplete);
    this.djtFormsList.SetServiceFormsDefinitions(servDefinitions);

    for (var i = 0; i < modl.length; i++) {
        if (modl[i].isDocument) {
            //Set the attachments for each document in the incomplete service form list
            this.djtFormsList.SetDocumentAttachments(modl[i].formnumber, modl[i].Attachments);
        }
    }

    dojo.style(this.divBackButton, "display", "block");
    dojo.style(this.divServices, "display", "none");
    dojo.style(this.divServiceFormsDefinitions, "display", "block");
    dojo.style(this.divIncompleteServices, "display", "none");
},

showIncompleteServices: function(inCompleteServices) {
    this.djtIncompleteServices.SetIncompleteServicesList(inCompleteServices);
    dojo.style(this.divBackButton, "display", "block");
    dojo.style(this.divServices, "display", "none");
    dojo.style(this.divIncompleteServices, "display", "block");
},

showFormDefinitions: function() {
    this.djtFormsList.IsCompleted(false);
    glb_serviceInstanceID = 0;
    this.djtFormsList.SetServiceFormsDefinitions(this.servicesDefinitions[0]);
    this.djtFormsList.ClearDocumentAttachments();
    dojo.style(this.divBackButton, "display", "block");
    dojo.style(this.divServices, "display", "none");
    dojo.style(this.divServiceFormsDefinitions, "display", "block");
    dojo.style(this.divIncompleteServices, "display", "none");
},

onBack: function() {
    dojo.style(this.divBackButton, "display", "none");
    dojo.style(this.divServices, "display", "block");
    dojo.style(this.divServiceFormsDefinitions, "display", "none");
    dojo.style(this.divIncompleteServices, "display", "none");

    this.buildRendering();
    this.ShowServicesList(this.serviceTypeCode);
},

_ServiceCompleted: function() {
    glb_serviceInstanceID = 0;
    dojo.style(this.divBackButton, "display", "none");
    dojo.style(this.divServices, "display", "block");
    dojo.style(this.divServiceFormsDefinitions, "display", "none");
    dojo.style(this.divIncompleteServices, "display", "none");

    this.buildRendering();
    this.ShowServicesList(this.serviceTypeCode);
    this.onServiceCompleted();
},

onServiceCompleted: function() {
}
}); 
```

好的，现在让我解释一下这个问题。

当我在 Internet Explorer 8 或 7 下运行此应用程序时，一切正常。但是当我尝试使用 IE9、Firefox 或 Chrome 打开它时，我收到一条错误消息，指出“未定义 djtServiceDetails”。

正如我从调试中了解到的，这是因为当文件被执行时，视图的**postCreate**部分没有被执行（postCreate 中的调试器永远找不到）

我有一个类似的页面，使用与上述相同的结构，适用于所有浏览器，我们找不到任何差异。

我希望你能告诉我一些可以帮助我解决这个问题的事情。

如果您需要更多信息，请告诉我。

先感谢您

梭伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:04:10.937

我相信这是解析标记的问题。这基本上是最大的警告，使用 dojo，因为 DOCTYPE 和渲染引擎是平台独立 JS 中最难“防范”的部分。我有一段时间没有使用 < 1.7 但我相当肯定正确的标记会更接近这个，在自定义属性上使用 camelCase 语法：

```
<div id="ServiceDetails" dojoType="dijit.layout.ContentPane" title="Services" style="height: 95%">
    <div id="divServiceDetails" runat="server">
        <div dojoType="js.Forms.ServiceDetails" jsId="djtServiceDetails" id="ServiceDetailsWdj">
        </div>
    </div>
</div>
<div id="PendingTask" dojoType="dijit.layout.ContentPane" title="Pending Tasks" style="height: 95%">
    <div id="divPendingTask" runat="server">
        <div dojoType="js.Forms.PendingServices" jsId="djtPendingServices" id="PendingTaskWdj">
        </div>
    </div>
</div>
<div id="CertificatesList" dojoType="dijit.layout.ContentPane" title="Certificates"
    style="height: 95%">
    <div id="divCertificatesList" runat="server">
        <div dojoType="js.Forms.CertificatesList">
        </div>
    </div>
</div> 
```

无论通过验证器，它都会看起来很乱=）

同样，对于 1.6，我不确定，但我认为您可以替换为 html5 兼容属性命名模式，这样`dojoType`就变成`data-dojo-type`并且`jsId`将会是`data-dojo-jsId`（应该在参考 api 中查看这些）。关于 jsId - 您最好通过 dijit 注册表引用小部件 - 全局范围暴露将在未来版本中退出。因此，不要让所说的对象通过`/*window.*/ djtServiceDetails`，而是调用`dijit.byId('djtServiceDetails')`

试试看，话虽如此 - 我个人也会将“title”、“id”、“valueAttr”等内容编译到 dojoProps 属性中，这样：

```
<div dojoType="dijit.layout.ContentPane" jsId="registryKeyId" title="Dia Title" href="index101.html"></div> 
```

变成

```
<div dojoType="dijit.layout.ContentPane" dojoProps="id:'registryKeyId', title:'Dia Title', href:'index101.html'"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:45:34.603

我有一个可能有效也可能无效的建议。我尝试用简化的代码重现您的问题，但不能。通常，我不会在我的自定义小部件中提供构造函数。您在构造函数中的代码可以进入`postMixInProperties`.

尝试将您的构造函数更改为以下内容：

```
postMixInProperties: function() {
    this.inherited(arguments);

    this.controller = new js.Forms.Controllers.ServiceDetailsController(this);
    this.nlsStrings = dojo.i18n.getLocalization("Resources", "Resources");
    var queryObj = Utils.General.GetQueryStringObject(window.location.href);
    this.isDissolved = queryObj
        [Utils.General.Constants.queryParameters.ISDISSOLVED];
}, 
```

我想知道 dojo.i18n 调用（很可能会发出 xhr 请求）是否会导致您看到的行为。

# c++ - 为什么从 __global__ 函数中引用外部内存会搞砸一切？

> ID：10810488
> 
> 赞同：2
> 
> 时间：2012-05-30T05:32:41.937
> 
> 标签：c++, memory, cuda, gpu, nvidia

我正在用 CUDA 编写一些代码（准确地说是霍夫曼算法，但这与案例完全无关）。我有一个包含两个函数的文件*Paralellel.cu ：一个（* **WriteDictionary**）是一个普通函数，第二个（**wrtDict**）是一个在 CUDA GPU 中运行***的*****特殊CUDA_global_函数。***以下是这些函数的主体：*

 *```
//I know body of this function looks kinda not-related 
//   to program main topic, but it's just for tests.
__global__ void wrtDict(Node** nodes, unsigned char* str)
{
    int i = threadIdx.x;

    Node* n = nodes[i];
    char c = n->character;

    str[6 * i] = 1;//c;                         !!!
    str[6 * i + 1] = 2;

    str[6 * i + 2] = 0;
    str[6 * i + 3] = 0;
    str[6 * i + 4] = 0;
    str[6 * i + 5] = 0;
} 
```

我知道这两行似乎毫无意义，因为我在这里没有使用**Node类的这个对象***n*，而只是让它们暂时存在。还有一条超级机密的评论，标有“！！！”。这是**写字典**：

 ****```
void WriteDictionary(NodeList* nodeList, unsigned char* str)
{
    Node** nodes = nodeList->elements;   
    int N = nodeList->getCount();

    Node** cudaNodes;
    unsigned char* cudaStr;

    cudaMalloc((void**)&cudaStr, 6 * N * sizeof(unsigned char));
    cudaMalloc((void**)&cudaNodes, N * sizeof(Node*));

    cudaMemcpy(cudaStr, str, 6 * N * sizeof(char), cudaMemcpyHostToDevice); 
    cudaMemcpy(cudaNodes, nodes, N * sizeof(Node*), cudaMemcpyHostToDevice);

    dim3 block(1);
    dim3 thread(N);

    std::cout << N << "\n";

    wrtDict<<<block,thread>>>(cudaNodes, cudaStr);

    cudaMemcpy(str, cudaStr, 6 * N * sizeof(unsigned char), cudaMemcpyDeviceToHost);

    cudaFree(cudaNodes);
    cudaFree(cudaStr);
} 
```

可以看出，函数**WriteDictionary**是 CUDA 和程序其余部分之间的一种代理。我在我的对象**NodeList中保存的****Node** * 数组*元素*指向的普通内存中的某处有一堆我的类**Node**的对象。现在了解**Node**就足够了，它有一个公共字段**char** *character*。**char** * *str*现在将填充一些测试数据。它包含 6 * *N*为字符分配的内存，其中*N = 元素中所有**元素*的计数 ****************大批。所以我在 CUDA 中为 6 * *N个* **字符**和*N个* **节点**指针分配了一个内存空间。然后我在那里复制我的**节点**指针，它们仍然指向一个普通的内存。我正在运行该功能。在函数**wrtDict 中**，我将字符提取到**char** *c*变量中，这次不尝试将其放入输出数组*str*中。****************

 ******因此，当我编写输出数组*str*的内容（在**WriteDictionary**函数之外）时，我得到了完全正确的答案，即：

```
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0   1  2  0  0  0  0 
1  2  0  0  0  0 
```

是的，这里我们有 39 个正确的六位**字符**（以十六进制显示）。**但是当我们在wrtDict**函数中稍微改变我们的超级秘密评论时，就像这样：

```
__global__ void wrtDict(Node** nodes, unsigned char* str)
{
    int i = threadIdx.x;

    Node* n = nodes[i];
    char c = n->character;

    str[6 * i] = c;//1;                         !!!
    str[6 * i + 1] = 2;

    str[6 * i + 2] = 0;
    str[6 * i + 3] = 0;
    str[6 * i + 4] = 0;
    str[6 * i + 5] = 0;
} 
```

我们会看到奇怪的事情。我现在期望每六个字符中的第一个字符**是数组指向的****节点**中的一个字符——每个字符都不同。或者，即使它失败了，我希望每六个字符中只有第一个**字符**会被弄乱，但其余字符保持不变：*？* *2* *0* *0* *0* *0*。但不是！当我这样做时，一切都完全搞砸了，现在输出数组**str**的内容如下所示：

```
70 21 67 b7 70 21  67 b7  0  0  0  0 
 0  0  0  0 18 d7  85  8 b8 d7 85  8 
78 d7 85  8 38 d9  85  8 d8 d7 85  8 
f8 d5 85  8 58 d6  85  8 d8 d5 85  8 
78 d6 85  8 b8 d6  85  8 98 d7 85  8 
98 d6 85  8 38 d6  85  8 d8 d6 85  8 
38 d5 85  8 18 d6  85  8 f8 d6 85  8 
58 d9 85  8 f8 d7  85  8 78 d9 85  8 
98 d9 85  8 d8 d4  85  8 b8 d8 85  8 
38 d8 85  8 38 d7  85  8 78 d8 85  8 
f8 d8 85  8 d8 d8  85  8 18 d5 85  8 
61 20 75 6c 74 72  69 63 65 73 20 6d 
6f 6c 65 73 74 69  65 20 73 69 74 20 
61 6d 65 74 20 69  64 20 73 61 70 69 
65 6e 2e 20 4d 61  75 72 69 73 20 73 
61 70 69 65 6e 20  65 73 74 2c 20 64 
69 67 6e 69 73 73  69 6d 20 61 63 20 
70 6f 72 74 61 20  75 74 2c 20 76 75 
6c 70 75 74 61 74  65 20 61 63 20 61 
6e 74 65 2e 20 46 
```

我现在问——为什么？是因为我试图从 CUDA GPU 中获取普通内存吗？我收到一个警告，可能正是关于这种情况，说：

```
Cannot tell what pointer points to, assuming global memory space 
```

我已经用谷歌搜索了这个，只找到了这个，CUDA 它正在达到一个普通的内存，导致无法找到到达的位置，99.99% 的这个警告应该被忽略。所以我忽略了它，认为它会没事的，但事实并非如此——我的情况在那个 0.01% 之内吗？

我怎么解决这个问题？我知道我可以将**Nodes**而不是指向它们的指针复制到 CUDA 中，但我认为复制它们会花费我更多的时间，而不是节省并行化内部对它们所做的事情。我还可以从每个**Node**中提取*字符*，将它们全部放入一个数组中，然后将其复制到 CUDA，但是 - 与上一条语句中的问题相同。

 **我完全不知道该怎么办，更糟糕的是，我大学的 CUDA 项目的截止日期是今天，apx。晚上 17 点（我只是没有足够的时间来早点，该死的......）。

PS。如果有帮助：我正在使用非常简单的（没有任何开关）命令进行编译：

```
nvcc -o huff ArchiveManager.cpp IOManager.cpp Node.cpp NodeList.cpp Program.cpp Paraleller.cu 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T11:23:33.387

这是一个可怕的问题，请参阅 talonmies 的评论。

1.  *检查每个*CUDA API 调用的错误值。`cudaMemcpy`您将在内核启动后收到启动失败消息
2.  运行`cuda-memcheck`帮助调试错误（这基本上是分段错误）
3.  意识到您正在从 GPU 解除对主机内存的（未映射）指针的引用，您需要复制节点，而不仅仅是指向节点的指针

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T01:12:17.040

您还可以从 cuda-gdb 内部运行您的程序。cuda-gdb 会告诉你你遇到了什么错误。此外，在 cuda-gdb 的开头，执行“set cuda memcheck on”，它将打开 cuda-gdb 中的 memcheck。

在最新的 cuda-gdb 版本（截至今天的 5.0）中，如果您不检查 API 调用的返回码并且这些 API 调用失败，您还可以看到警告。*************

# java - 带有图像和数据的 HTTP 发布

> ID：10810490
> 
> 赞同：0
> 
> 时间：2012-05-30T05:32:46.943
> 
> 标签：java, http-headers, http-post, apache-commons-httpclient

我正在使用 apache HTTP Client 调用休息端点。

我想用图像和更多表单数据作为参数调用 POST 请求。我可以分别对表单数据的请求和图像单独的请求分别执行它们。

是否有任何可能的解决方案，以便我可以通过一个请求来完成。

下面是api调用

```
http://<url>?hint=hi&def=ready&image=<imagefile> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:44:02.693

使用[多部分请求](http://en.wikipedia.org/wiki/MIME#Multipart_messages)。[Commons Apache File Upload API](http://commons.apache.org/fileupload/)具有非常好的 API。Apache Commons HttpClient 也有客户端的 API。

否则，请使用支持多部分数据的 Servlet 3.0 容器。String**部分**类型将通过[HttpServletRequest.getParameter()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)方法提供。并且可以使用[HttpServletRequest.getPart()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)方法检索**文件类型部分。**

# javascript - HTML 表单提交给出 400 错误请求

> ID：10810492
> 
> 赞同：2
> 
> 时间：2012-05-30T05:32:52.170
> 
> 标签：javascript, html, rest, post, exist-db

我正在使用 POST 方法向 REST(eXist db) Web 服务提交 HTML 表单。正常提交是给出**400 错误请求**

这是我的 HTML 代码

```
<html>
    <script type="text/javascript">
     /* function createXMLHttpRequest()
       {
        if( typeof XMLHttpRequest == "undefined" )
        XMLHttpRequest = function() 
         {
          try 
          { 
           return new ActiveXObject("Msxml2.XMLHTTP.6.0")
          } 
         catch(e) {}
          try 
          { 
           return new ActiveXObject("Msxml2.XMLHTTP.3.0")
          } 
         catch(e) {}
          try
          { 
          return new ActiveXObject("Msxml2.XMLHTTP") 
          } 
         catch(e) {}
          try 
          { 
          return new ActiveXObject("Microsoft.XMLHTTP") 
          } 
         catch(e) {}
         throw new Error( "This browser does not support XMLHttpRequest." )
      };
       return new XMLHttpRequest();
     }

var AJAX = createXMLHttpRequest();*/
function submitForm()
 {

    //AJAX.open("POST",'http://localhost:8899/exist/rest/db/xql/sample.xq');
   // AJAX.send(document.form.xmlData.value);
   document.form.submit();
 };
</script>
<head>  
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<body>
 <form name='form' action="http://localhost:8899/exist/rest/db/xql/sample.xq"  enctype="text/plain" method="post">
   <input type="text" name="xmlData"/>
   <input type="button" value="Submit" onclick="submitForm()";>
 </form>
</body>
</html> 
```

注释代码是使用 AJAX 发送 POST 请求。我捕获了表单提交和 AJAX 提交的 http 标头请求和响应这些是请求标头：

HTML 表单提交标头：

```
(Request-Line)  POST /exist/rest/db/xql/sample.xq HTTP/1.1
Host    localhost:8899
User-Agent  Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language en-us,en;q=0.5
Accept-Encoding gzip, deflate
Connection  keep-alive
Content-Type    text/plain
Content-Length  26 
```

AJAX 请求头：

```
(Request-Line)  POST /exist/rest/db/xql/sample.xq HTTP/1.1
Host    localhost:8899
User-Agent  Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language en-us,en;q=0.5
Accept-Encoding gzip, deflate
Connection  keep-alive
Content-Length  16
Content-Type    text/plain; charset=UTF-8
Origin  null
Pragma  no-cache
Cache-Control   no-cache 
```

我没有明白我的代码有什么问题。我为此工作了 2 天，但我找不到任何解决方案。请对此进行调查并提供解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:07:14.760

您的代码按应有的方式将数据汇总到服务器。您的服务器端代码一定有问题。

引用 checkupdown.com 关于错误 400

HTTP 周期中的 400 错误

1.任何客户端（例如您的 Web 浏览器或我们的 CheckUpDown 机器人）都会经历以下循环：

2.从站点的IP名称（不带'http://'的站点URL）中获取IP地址。此查找（IP 名称到 IP 地址的转换）由域名服务器 (DNS) 提供。

3.打开到该 IP 地址的 IP 套接字连接。

4.通过该套接字写入一个HTTP数据流。

5\. 接收来自 Web 服务器的 HTTP 数据流作为响应。此数据流包含状态代码，其值由 HTTP 协议确定。解析此数据流以获取状态代码和其他有用信息。

**当客户端收到它识别为“400”的 HTTP 状态代码时，会在上述最后一步中发生此错误。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:12:01.193

但是您没有使用 Ajax POST 发送任何参数？

Ajax 代码应如下所示：

```
var xmlData=encodeURIComponent(document.getElementById("xmlData").value);
var parameters="xmlData="+xmlData;
AJAX.open("POST", "'http://localhost:8899/exist/rest/db/xql/sample.xq", true)
AJAX.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
AJAX.send(parameters) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T05:58:59.590

我很确定这是因为您只发送数据中的值。

您需要发送一个名称 = 值对。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T06:32:51.283

你的目标接受 POST 请求，还是只接受 GET？

# opengl - GL_COLOR_BUFFER_BIT 和更多显示“Xcode 未声明的标识符

> ID：10810495
> 
> 赞同：4
> 
> 时间：2012-05-30T05:33:01.470
> 
> 标签：opengl, gcc, xcode4.3, llvm-gcc

我正在尝试运行放置在此链接上的 Apple 文档示例代码...

[示例代码](https://developer.apple.com/library/mac/#samplecode/iChatTheater/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004197)

但是，当我运行此代码时，XCode 无法编译。它显示了几个错误，说明未定义以下列出的变量。

*   GL_COLOR_BUFFER_BIT
*   GL_VIEWPORT
*   GL_PROJECTION
*   GL_MODELVIEW
*   GL_QUADS

我的理解是，很明显 Xcode 无法找到这个 const 变量，而且它们似乎来自 OpenGL 框架。我检查了我的导入框架列表，里面有 OpenGL。

如何解决这个问题？

### 环境 ：

```
OS version              : MacOSX 10.7.3
Base SDK of the project : MacOSX SDK 10.7
Compiler                : Defualt LLVC GCC 4.2 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T09:09:13.640

只需添加

```
#import <OpenGL/gl.h> 
```

到文件 NormalGLView.m （在文件顶部，在另一个导入之后）。那为我解决了它...

问题不是找不到框架，而是找不到定义，说明可能缺少头文件

# css - 调整 css 转换图像的父元素以适应。（推特引导）

> ID：10810496
> 
> 赞同：7
> 
> 时间：2012-05-30T05:33:16.263
> 
> 标签：css, twitter-bootstrap, css-transforms, webkit-transform

我目前正在一个新项目中使用 Twitter Bootstrap。该项目的主要部分是一个缩略图库，就像他们在示例中所拥有的一样（这里：http: [//twitter.github.com/bootstrap/components.html#thumbnails](http://twitter.github.com/bootstrap/components.html#thumbnails)）。

问题是我目前正在根据 EXIF 方向数据在需要时对图像进行 css 转换（基本上是旋转）。当我将转换（现在使用 -webkit-transform，因为我正在 Chrome 上测试）应用到 an`img`时，它的父元素保持不变，并且图像“溢出”它的容器。

使用 Chrome，可以测试此行为，转到我之前链接的示例缩略图库，检查其中一个占位符图像并向标签添加`style="-webkit-transform: rotate(90deg)`属性。`img`图像溢出`li`容器元素并破坏布局。

有没有办法解决这个问题并让引导程序将 css-rotated 图像视为原来的方式？我想过手动设置标签的高度和宽度`img`，他们的父母会调整，但我不知道在实际渲染之前，图像将在服务器端渲染什么尺寸，所以这似乎排除了这一点方法。

哦，顺便说一句，我知道我可以求助于在服务器端旋转，我知道这并不难，我只是非常喜欢在浏览器中进行，如果可能的话。

有任何想法吗？

谢谢！

编辑： Jaap 建议我旋转整个容器，如果不是因为我在 thumbnail `li`s 中有文本节点，这将非常有效。旋转容器将使文本显示也旋转。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-14T16:24:46.920

作为参考，基于 EXIF 数据解决图像旋转的（新）CSS 方法是`image-orientation: from-image`属性。

来自[http://sethfowler.org/blog/2013/09/13/new-in-firefox-26-css-image-orientation/](http://sethfowler.org/blog/2013/09/13/new-in-firefox-26-css-image-orientation/)

> 这些问题都被新的 CSS image-orientation 属性解决了，现在 Firefox 26 支持该属性。当样式 image-orientation: from-image 应用于 JPEG 图像时，浏览器将考虑其 EXIF 方向标记执行布局和渲染。这意味着智能手机和数码相机的图像现在可以通过浏览器以正确的方向显示，只需添加一个 CSS 属性！
> 
> 这是本文中的第一张图片，但这次应用了图像方向。如果您使用的是 Firefox 26，您将看到此图像按预期呈现，天空在顶部，地面在底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:05:21.553

您应该将旋转应用于容器，而不是 img。

[http://jsfiddle.net/jaap/dGgrG/1/](http://jsfiddle.net/jaap/dGgrG/1/)

然而，您将面临的下一个问题是旋转是从原始位置应用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:59:51.403

好的，在这种情况下，您应该像这样应用它：

```
<ul>
<li class="span3 cw rotated">
    <div class="thumbnail">
        <img src="http://placehold.it/200x180" alt="">
        <div class="caption">
            <h5>Thumbnail label</h5>
            <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            <p><a href="#" class="btn btn-primary">Action</a> <a href="#" class="btn">Action</a></p>
        </div>
    </div>
</li> 
```

```
.cw img{
  -webkit-transform: rotate(90deg);
  height: 210px; /* Width of container - padding (Height is now width since the image is rotated.) */
}
.ccw img{
  -webkit-transform: rotate(-90deg);
  height: 210px; /* Width of container - padding (Height is now width since the image is rotated.) */
} 
```

​查看小提琴：http: [//jsfiddle.net/dGgrG/4/](http://jsfiddle.net/dGgrG/4/)

唯一烦人的一点是，Bootstrap 中的 max-width 东西会弄乱你的纵横比。这将在您使用 Bootstrap 网格时发生。您可以在整个 css 中否决它，或者 javascript 可以帮助您。

要使用 JS 修复它，您应该查看以下 2 个帖子：

[使用 JavaScript 获取图像的真实宽度和高度？（在 Safari/Chrome 中）](https://stackoverflow.com/questions/318630/get-real-image-width-and-height-with-javascript-in-safari-chrome)

[jQuery调整宽高比](https://stackoverflow.com/questions/1682495/jquery-resize-to-aspect-ratio)

# javascript - 使用逗号格式化数字字符串

> ID：10810497
> 
> 赞同：3
> 
> 时间：2012-05-30T05:33:17.557
> 
> 标签：javascript, regex

我想格式化数字。我已经看到了一些在数字字符串中插入逗号的正则表达式示例。他们都连续检查3位数字，然后在数字中插入逗号。但我想要这样的东西：

```
122 as 122
1234 as 1,234
12345 as 12,345
1723456 as 17,23,456
7123456789.56742 as 7,12,34,56,789.56742 
```

我对正则表达式很陌生。请帮我如何显示上面的数字。我试过下面的方法。这总是检查 3 位数字，然后添加逗号。

```
function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
} 
```

但我想要每 2 位逗号，除了小数点前的最后 3 位数字，如上所示。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T06:08:31.940

结果将取决于您的浏览器区域设置。但这可能是一个可以接受的解决方案：

```
(7123456789.56742).toLocaleString(); 
```

输出：

```
7,123,456,789.56742 
```

试试看它是否`7,12,34,56,789.567421`在您的语言环境中输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T05:55:58.797

这是一个将数字转换为欧洲（1.000,00 - 默认）或美国（1,000.00）样式的函数：

```
function sep1000(somenum,usa){
  var dec = String(somenum).split(/[.,]/)
     ,sep = usa ? ',' : '.'
     ,decsep = usa ? '.' : ',';
  return dec[0]
         .split('')
         .reverse()
         .reduce(function(prev,now,i){
                   return i%3 === 0 ? prev+sep+now : prev+now;}
                )
         .split('')
         .reverse()
         .join('') +
         (dec[1] ? decsep+dec[1] :'')
  ;
} 
```

选择：

```
function sep1000(somenum,usa){
  var dec = String(somenum).split(/[.,]/)
     ,sep = usa ? ',' : '.'
     ,decsep = usa ? '.' : ',';

  return xsep(dec[0],sep) + (dec[1] ? decsep+dec[1] :'');

  function xsep(num,sep) {
    var n = String(num).split('')
       ,i = -3;
    while (n.length + i > 0) {
        n.splice(i, 0, sep);
        i -= 4;
    }
    return n.join('');
  }
}
//usage for both functions
alert(sep1000(10002343123.034));      //=> 10.002.343.123,034
alert(sep1000(10002343123.034,true)); //=> 10,002,343,123.034 
```

[根据评论**编辑**]如果要分隔100，只需更改`i -= 4;`为`i -= 3;`

```
function sep100(somenum,usa){
  var dec = String(somenum).split(/[.,]/)
     ,sep = usa ? ',' : '.'
     ,decsep = usa ? '.' : ',';

  return xsep(dec[0],sep) + (dec[1] ? decsep+dec[1] :'');

  function xsep(num,sep) {
    var n = String(num).split('')
       ,i = -3;
    while (n.length + i > 0) {
        n.splice(i, 0, sep);
        i -= 3;  //<== here
    }
    return n.join('');
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-01T18:41:32.090

使用 toLocaleString(); 它会自动处理插入逗号，也会以正确的方式处理英国字符串

例如 `var num=63613612837131; alert(num.toLocaleString());`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T07:26:46.637

下面是代码片段，可以以更好的方式完成，但这有效：D

```
function formatDollar(num) 
{
var p = num.toFixed(2).split(".");
var chars = p[0].split("").reverse();
var sep1000 = false;
var newstr = '';
var count = 0;
var count2=0;
for (x in chars) 
{ 
count++;
if(count%3 == 1 && count != 1 %% !sep1000) 
{ 
newstr = chars[x] + ',' + newstr;
sep1000=true;
} 
else 
{ 
if(!sep1000)
{
newstr = chars[x] + ',' + newstr;
}
else
{
count2++;
if(count%2 == 0 && count != 1) 
{ 
newstr = chars[x] + ',' + newstr;
} 
else 
{ 
 newstr = chars[x] + newstr;
}
}
}
}
return newstr + "." + p[1]; 
} 
```

# java - 正在做 !(!a && b) 的效率低于 a || ！

> ID：10810500
> 
> 赞同：1
> 
> 时间：2012-05-30T05:33:37.527
> 
> 标签：java, performance, logical-operators

我有一个运行多次并且必须非常高效的寻路算法，所以我想知道我可以做些什么来提高性能。我有一个 if 语句，它说：

```
if (!(n != 1 && map.isCornerObstructed(p)) {
    // Do stuff...
} 
```

在我看来，双重反转会比这个逻辑上等价的版本稍微长一点：

```
if (n == 1 || !map.isCornerObstructed(p)) {
    // Do stuff...
} 
```

问题是前者在代码上下文中更具可读性，所以如果我不知道结果会是什么，我有点不愿意改变它。

一个比另一个更有效吗？或者 Java 编译器是否足够聪明，可以自动优化这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T05:35:57.787

请专注于优化算法的复杂性，而不是这些微优化。

对于这种情况，我看到一个比较 ( `!=`and `==`)、一个逻辑运算符、一个否定。在 n != 1 的情况下，逻辑运算的数量是相同的。在 n == 1 的情况下，第一种情况的逻辑运算次数多于第二种情况。如果有更多 n != 1 案例，那么**可能**没关系。如果有更多 n == 1 案例，那么第二种情况**可能**会更快。但是随着整个 JIT 编译器在后面工作，我不知道到底发生了什么。微优化可能适用于 C/C++ 代码，但我真的怀疑对 Java 的影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T06:36:09.723

编码

```
Set<String> set = new HashSet<String>();
int n = set.size();
Object o = new Object();
if (!(n != 1 && set.contains(o))) {
  System.out.println("Foo");
  // Do stuff...
} 
```

生成字节码

```
 0  new java.util.HashSet [16]
 3  dup
 4  invokespecial java.util.HashSet() [18]
 7  astore_1 [set]
 8  aload_1 [set]
 9  invokeinterface java.util.Set.size() : int [19] [nargs: 1]
14  istore_2 [n]
15  new java.lang.Object [3]
18  dup
19  invokespecial java.lang.Object() [8]
22  astore_3 [o]
23  iload_2 [n]
24  iconst_1
25  if_icmpeq 38
28  aload_1 [set]
29  aload_3 [o]
30  invokeinterface java.util.Set.contains(java.lang.Object) : boolean [25] [nargs: 2]
35  ifne 46
38  getstatic java.lang.System.out : java.io.PrintStream [29]
41  ldc <String "Foo"> [35]
43  invokevirtual java.io.PrintStream.println(java.lang.String) : void [37]
46  return 
```

编码

```
Set<String> set = new HashSet<String>();
int n = set.size();
Object o = new Object();
if (n == 1 || !set.contains(o)) {
  System.out.println("Foo");
  // Do stuff...
} 
```

生成字节码

```
 0  new java.util.HashSet [16]
 3  dup
 4  invokespecial java.util.HashSet() [18]
 7  astore_1 [set]
 8  aload_1 [set]
 9  invokeinterface java.util.Set.size() : int [19] [nargs: 1]
14  istore_2 [n]
15  new java.lang.Object [3]
18  dup
19  invokespecial java.lang.Object() [8]
22  astore_3 [o]
23  iload_2 [n]
24  iconst_1
25  if_icmpeq 38
28  aload_1 [set]
29  aload_3 [o]
30  invokeinterface java.util.Set.contains(java.lang.Object) : boolean [25] [nargs: 2]
35  ifne 46
38  getstatic java.lang.System.out : java.io.PrintStream [29]
41  ldc <String "Foo"> [35]
43  invokevirtual java.io.PrintStream.println(java.lang.String) : void [37]
46  return 
```

这是*完全相同*的。因此，无论您测量多么精细，都不*会有*任何性能差异。编译后的代码是*相同的。*

（请注意，这样做的原因是`javac`实际上将`if`语句分解为单独的条件测试和分支，因此它实际上为每种可能性制定了路径。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T05:38:40.003

我最关心的是 map.isCornerObstructed(p) 调用，布尔逻辑很快，但方法调用不多。

我会选择第二种选择——这似乎是最容易阅读和最有效的。

正如评论所指出的， && 和 || 短路，因此您需要最简单的测试方法，使用包装的反转只是需要执行的另一层。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T06:05:09.910

第二个可以更优化。但这取决于执行多少次，这部分代码，

更具体地说，在您的第二个选项中：

```
if (n == 1 || !map.isCornerObstructed(p)) {
// Do stuff...
} 
```

如果 n==1 为 true ，java 将不会执行 !map.isCornerObstructed(p) ，并且 n==1 比 !map.isCornerObstructed(p) 更优化，因此您必须以某种方式编写“if”语句在大多数情况下，第一个和更简单的语句显示了答案，

如果您不确定 java 是否优化 (!(n != 1 && map.isCornerObstructed(p)) ，您可以简单地编写一个测试用例，在循环中运行每个语句 1000000 次并使用 System.currentmils 来计算每种方法的时间成本，然后就可以了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T05:36:48.533

如果你在这里和那里做这个声明，谁在乎。任何一个都最多相当于几个 cpu 周期。

# javascript - 使用 Javascript 在 Illustrator 中保存文件

> ID：10810504
> 
> 赞同：6
> 
> 时间：2012-05-30T05:33:53.213
> 
> 标签：javascript, adobe-illustrator

我正在尝试使用 Javascript 在 Illustrator 中保存文件，但我不断收到错误消息。

这是有效的，但不是我想要的：

```
// save as
var dest = "~/testme.pdf";

saveFileToPDF(dest);

function saveFileToPDF (dest) {
    var doc = app.activeDocument;
    if ( app.documents.length > 0 ) {
        var saveName = new File ( dest );
        saveOpts = new PDFSaveOptions();
        saveOpts.compatibility = PDFCompatibility.ACROBAT5; 
        saveOpts.generateThumbnails = true; 
        saveOpts.preserveEditability = true;
        alert(saveName);
        doc.saveAs( saveName, saveOpts );
    }
} 
```

var "dest" 将文件保存到我的 Mac 用户帐户的根目录。我只是想将相对于源文档的文件保存在子文件夹中，所以我尝试了这个：

```
var dest = "exports/testme.pdf"; 
```

这会出现一个突出显示“.pdf”的对话框，正确等待我已经创建的“exports”文件夹中的输入。我可以输入一些内容，它会保存，但它会忽略代码中指定的文件名“testme.pdf”。我可以在它知道我想要的突出显示的“.pdf”上键入“cheese”，它会将“cheese.pdf”保存在“exports”文件夹中。

我也试过这些没有运气：

```
var dest = "exports/testme";
var dest = "/exports/testme.pdf";
var dest = "testme.pdf"; 
```

等等等等

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T08:11:57.703

要在`saveAs`不弹出对话框的情况下使用，您需要使用全局属性`userInteractionLevel`：

```
var originalInteractionLevel = userInteractionLevel;
userInteractionLevel = UserInteractionLevel.DONTDISPLAYALERTS;

...

userInteractionLevel = originalInteractionLevel; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-09T19:07:41.470

由于您要保存相对于您的文档，所以首先找到您当前文档的路径如下

```
var path = app.activeDocument.path;
var dest = path + "/exports/testme.pdf"; 
```

您还可以检查导出文件夹是否存在，如果不存在，您可以使用以下脚本创建

```
 var path = app.activeDocument.path;
    var exportFolder = Folder(path + "/exports");
    if(!exportFolder.exists){
        exportFolder.create();
    }
    var dest = exportFolder + "/testme.pdf"; 
```

# java - 初学者：定义 JPA 一对一映射时出错

> ID：10810506
> 
> 赞同：0
> 
> 时间：2012-05-30T05:34:10.423
> 
> 标签：java, hibernate, jpa

我有以下表格：

```
Login -> (id, username, password)
Members -> (member_id, name, address) 
```

id 与 member_id 具有一对一的映射关系。

我写了两个模型

登录型号：

```
@Entity
@Table(name = "Login", uniqueConstraints = { @UniqueConstraint(columnNames = "username") })
public class Login {

private int id;
private String username;
private String password;
private Members members;

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = "id")
public int getId() {
    return id;
}

@OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL, optional = true)
@JoinColumn(name = "id", referencedColumnName = "member_id")
public Members getMembers() {a
    return members;
}

} 
```

会员型号：

```
@Entity
@Table(name = "Members")
public class Members {
private int member_id;
private String name;
private String address;

@Id
@GeneratedValue(generator = "gen")
@GenericGenerator(name = "gen", strategy = "foreign", parameters = { @Parameter(name = "property", value = "Login") })
@Column(name = "member_id")
public int getMember_id() {
    return member_id;
}

private Login login;

@OneToOne(fetch = FetchType.LAZY, optional = true, cascade = CascadeType.ALL)
public Login getLogin() {
    return login;
}

} 
```

为简单起见，我删除了一些 getter 和 setter。无论如何，你能告诉我我哪里错了吗？在更改注释的值时，我得到了诸如未找到映射、未知持久类等错误。

**错误**

org.springframework.web.util.NestedServletException：请求处理失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建类路径资源 [database/Hibernate.xml] 中定义的名称为“sessionFactory”的 bean 时出错：调用 init 方法失败；嵌套异常是 org.hibernate.AnnotationException: @OneToOne 或 @ManyToOne on org.sparsham.login.model.Login.members 引用了一个未知实体：org.sparsham.members.model.Members org.springframework.web.servlet.FrameworkServlet。 processRequest(FrameworkServlet.java:894) org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778) javax.servlet.http.HttpServlet.service(HttpServlet.java:621) javax.servlet.http.HttpServlet。服务（HttpServlet.java:722）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:10:16.667

希望这可以解决您的最后一个问题。试试这些改变。

登录模式：

```
@OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL, optional = true)
@PrimaryKeyJoinColumn
public Members getMembers() {a
    return members;
} 
```

会员型号：

```
@Id
@GeneratedValue(generator = "gen")
@GenericGenerator(name = "gen", strategy = "foreign", parameters = { @Parameter(name =          "property", value = "login") })
@Column(name = "member_id")
public int getMember_id() {
    return member_id;
}

private Login login;

@OneToOne(fetch = FetchType.LAZY, optional = true, cascade = CascadeType.ALL, mappedBy="members")
@PrimaryKeyJoinColumn
public Login getLogin() {
    return login;
} 
```

注意@GenericGenerator 注解中的@Parameter 部分，“login”可能区分大小写。

# iphone - 如何使用 PC 名称而不是 IP 在 VMware 上访问 IIS

> ID：10810507
> 
> 赞同：1
> 
> 时间：2012-05-30T05:34:18.507
> 
> 标签：iphone, iis, networking, windows-7, vmware

我有一台运行 Lion OS 的 mac，并且在我的 Windows 机器上的 VMware Fusion 上安装了 Windows 7 Ultimate，我运行着 IIS，我可以使用以下 IP 地址从我的 mac 浏览器访问它：

```
http://192.168.0.10 
```

我正在 xcode 上开发 iPhone 应用程序并连接到 IIS 作为服务器以访问 MS Server DB 进行测试。

我的问题是，我在许多网络上使用我的 mac，例如工作、家庭、MiFi 和其他网络，每次我更改网络时，IP 都会发生变化，每次我需要访问 IIS 时，我都需要在我的应用程序中更新我的服务器 IP。

即使在我的家庭网络或 MiFi 上，每次连接时 IP 都是相同的（动态）

我正在考虑使用我的 Windows 7 机器上的 PC 名称访问 IIS，如下所示：

```
http://mypcname 
```

使测试更容易，无需每次都编辑 IP。

谁能指导我如何做到这一点？我确实在许多网站和论坛上搜索过，但没有成功，也许我错过了一些东西。

提前致谢。

# mysql - 根据跨多行的约束选择行

> ID：10810514
> 
> 赞同：2
> 
> 时间：2012-05-30T05:35:26.867
> 
> 标签：mysql, hierarchical-data

# 问题：

我正在使用闭包表来跟踪用户文件权限，并且在 a 之后`JOIN`，这会导致`read`跨多行的多个布尔值。如果所有连接的行都是可读的，我只想选择一行。使用`UNION`显然不能做到这一点。

# 细节：

**文件夹表：**

```
CREATE TABLE IF NOT EXISTS folders
(
   id                    INT NOT NULL AUTO_INCREMENT,
   path                  VARCHAR(500) NOT NULL,
   r                     BOOL NOT NULL DEFAULT FALSE,
   PRIMARY KEY ( id )
)engine=innodb; 
```

**文件表：**

```
CREATE TABLE IF NOT EXISTS files
(
   id                    INT NOT NULL AUTO_INCREMENT,
   parent_folder_id      INT NOT NULL ,
   path                  VARCHAR(500) NOT NULL,
   r                     BOOL NOT NULL DEFAULT FALSE,
   FOREIGN KEY ( parent_folder_id ) REFERENCES folders ( id ),
   PRIMARY KEY ( id )
)engine=innodb; 
```

**文件夹-父文件夹关闭表：**

```
CREATE TABLE IF NOT EXISTS parent_folders
(
   id                INT NOT NULL AUTO_INCREMENT,
   folder_id         INT NOT NULL,
   parent_folder_id  INT NOT NULL,
   FOREIGN KEY ( folder_id ) REFERENCES folders ( id ),
   FOREIGN KEY ( parent_folder_id ) REFERENCES folders ( id ),
   PRIMARY KEY ( id )
)engine=innodb; 
```

现在，如果我想获取所有可读文件（暂时忽略我完全省略用户的那一刻），我会像这样开始

```
SELECT 
    F.id, F.path, F.r, P.parent_folder_id, D.path, D.r
FROM
    files AS F 
    LEFT JOIN parent_folders AS P 
        ON F.parent_folder_id = P.folder_id 
    LEFT JOIN folders AS D  
        ON P.parent_folder_id = D.id; 
```

这将显示每个文件 ID、路径和读取权限的表格，可以从其每个父文件夹访问，如下所示

```
id   path                  r     id  path          r
......
0   /home/joe/foo/bar.txt  True  1   /home/joe/foo True
1   /home/joe/foo/bar.txt  True  2   /home/joe     True
1   /home/joe/foo/bar.txt  True  3   /home         True
1   /home/joe/foo/bar.txt  True  4   /             True
2   /home/jim/foo/bar.txt  True  5   /home/jim/foo True
2   /home/jim/foo/bar.txt  True  6   /home/jim     False
2   /home/jim/foo/bar.txt  True  7   /home         True
2   /home/jim/foo/bar.txt  True  8   /             True
.... 
```

在这种情况下，我想`SELECT` `/home/joe/foo/bar.txt`因为通向它的每个父文件夹都是可读的，但我不想`SELECT` `/home/jim/foo/bar.txt`因为它的父文件夹之一不可读。

**编辑：**或者，我可以这样改写这个问题：“我可以`AND`跨多行的一列的值吗？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:19:36.763

可以使用非标准 SQL 来完成，但这取决于您的数据库供应商。例如，您可能希望使用`CONNECT BY`Oracle 中的子句检查分层查询。MySQL 可能有类似的东西。但是，我建议反对这样的解决方案，原因有以下三个：

1.  供应商锁定。
2.  目前尚不清楚这些查询的效率如何，或者如何优化它们。
3.  如果您想要更多这样的规则（例如可继承的用户权限），复杂性会迅速增加。

相反，我会建议以下我在几个大中型项目中使用过的方法：

1.  对于该`r`字段，请使用三态布尔值（`TRUE`和`FALSE`）`NULL`，其中`NULL`将代表“继承”。

2.  `effective_r`为每个文件（也可能为每个文件夹）添加一个新字段。这将包含应用所有继承规则的结果，并且只能是`TRUE`or `FALSE`。当然，您必须在层次结构的每次更改时计算此字段，但这更快，因为更新不那么频繁，并且当它们发生时，它们只会影响层次结构的一部分。

3.  定义自上而下的传播规则。在这种情况下很容易：

    ```
    parent effective_r       child r        child effective_r
    ---------------------    ------------   ---------------------
    <ROOT>                   NULL           TRUE
    <ROOT>                   TRUE           TRUE
    <ROOT>                   FALSE          FALSE
    TRUE                     NULL           TRUE
    FALSE                    NULL           FALSE
    TRUE|FALSE               TRUE           TRUE
    TRUE|FALSE               FALSE          FALSE 
    ```

    对于用户权限，规则可能更加复杂和复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:50:35.357

添加 WHERE 子句

```
WHERE D.r = TRUE 
```

**编辑**

随心所欲地进行改进

```
SELECT F.id, F.path, F.r, P.parent_folder_id, D.path, D.r
FROM files AS F
LEFT JOIN parent_folders AS P ON F.parent_folder_id = P.folder_id
LEFT JOIN folders AS D ON P.parent_folder_id = D.id
WHERE F.path NOT IN
    (SELECT A.path
     FROM files AS A
     LEFT JOIN parent_folders AS B ON A.parent_folder_id = B.folder_id
     LEFT JOIN folders AS C ON B.parent_folder_id = C.id
     WHERE C.r = FALSE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:29:48.257

```
select a.path
from (
    SELECT 
        F.path, D.r
    FROM
        files AS F 
        LEFT JOIN parent_folders AS P 
            ON F.parent_folder_id = P.folder_id 
        LEFT JOIN folders AS D  
            ON P.parent_folder_id = D.id
) a
left join (
    SELECT 
        F.path, D.r
    FROM
        files AS F 
        LEFT JOIN parent_folders AS P 
            ON F.parent_folder_id = P.folder_id 
        LEFT JOIN folders AS D  
            ON P.parent_folder_id = D.id
) b on a.path = b.path and b.r = false
where b.r is null
group by path 
```

# java - 这些陈述之间有什么区别吗？

> ID：10810518
> 
> 赞同：2
> 
> 时间：2012-05-30T05:35:43.713
> 
> 标签：java, performance, memory, resources, method-call

有什么区别：

```
String x = getString();
doSomething(x); 
```

对比

```
doSomething(getString()); 
```

资源和性能方面，特别是它是在一个循环中完成数十、数百或数千次吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T05:37:50.677

它具有相同的开销。局部变量只是为了让您的生活更轻松。在 VM 级别，它们不一定存在，并且在运行机器代码时肯定不再存在。

因此，您需要担心的是`getString()`，它是否可能很昂贵。`x`很可能根本没有效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T05:47:32.840

首先让我说你的首要目标应该几乎总是保持代码的可读性。您的编译器几乎总是比您更擅长微不足道的优化。相信它！

针对您的具体示例：为每个示例生成的字节码不同。不过，这似乎没有太大区别，因为在 Integer.MAX_VALUE 迭代的循环中，两种方法之间没有统计学意义甚至一致的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T05:39:26.113

我相信两者在编译时都是相同的，但在某些情况下，第一个可能会变得更具代码可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T05:39:37.773

两种说法都是一样的。唯一的区别是，在第一种方法中，您使用了局部变量 X，可以使用第二种语法来避免。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T05:45:23.703

这在很大程度上取决于用例。你要使用那个确切的字符串重复调用 doSomething 吗？然后使用局部变量更有效。但是，如果是单个调用或具有不同字符串的多个调用，则没有区别。

# php - PHP 5 中的服务器端打印

> ID：10810521
> 
> 赞同：0
> 
> 时间：2012-05-30T05:35:57.963
> 
> 标签：php, html, printing, server-side

如何通过 php 脚本打印我的 html 文件？我只想在没有任何提示的情况下在后台运行它。我已经阅读了有关此的其他帖子，但仍然没有发现任何工作。我试过这个：

```
<?php
$dir = "temp"; // the folder that you are storing the file to be printed
$file = "file.html"; //change to proper file name
$file_dir = $dir.$file;
$server = "home_computer"; //name of the computer you are printing to on your network
$printer = "HP"; //printers shared name
$command = "print $file_dir /d:\\$server\\$printer";
exec($command) or die("File failed to print");
?> 
```

在这里得到了这个例子[http://www.phpfreaks.com/forums/index.php/topic,207946.0.html](http://www.phpfreaks.com/forums/index.php/topic,207946.0.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:28:00.313

这是我的工作：

```
$html = "testing print";
$handle = printer_open();
printer_set_option($handle, PRINTER_MODE, "RAW");
printer_write($handle, $html);
printer_close($handle); 
```

我们需要**php_printer.dll** php 扩展来使其在 php5 中工作。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T05:42:14.827

您无法使用 php 打印 html 页面。php是一种服务器端语言，它运行在服务器上。

打印机在客户的机器上。这意味着您需要一种客户端语言来完成此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T05:45:26.123

如果你想打印源代码，那么它应该可以通过编写一个打印传递的字符串的程序然后通过系统调用调用它来实现。在 Windows 上，它似乎有一个扩展名。

如果要打印渲染版本，则必须知道为此需要某种渲染引擎。虽然并非不可能，但它可能比您想要的工作更多。

# debugging - Facebook 墙贴使用 ajax 发帖请求与 Chrome 和 IE 不一致

> ID：10810523
> 
> 赞同：0
> 
> 时间：2012-05-30T05:36:12.310
> 
> 标签：debugging, facebook-graph-api, jquery, cross-browser

我正在使用发布的代码将内容发布到 Facebook 墙上。

```
FB.init({ appId: '我的应用程序 ID', 状态: true, cookie: true, xfbml: true, oauth: true })
    $('#share_button').click(function (e) {
        if ($('#textfield').val() != '发生了什么' && $('#textfield').val() != '') {
            var lin = window.location.href;
            FB.login（函数（响应）{
                如果（response.authResponse）{
                    console.log("用户已连接到应用程序。");
                    var accessToken = response.authResponse.accessToken;
                    var fbURL = "https://graph.facebook.com/me/feed?access_token=" + accessToken;
                    $.ajax({
                        网址：fbURL，
                        数据： "message=" + $('#textfield').val() + "&picture=MyUrl/images/logo.png&name=FutureZoom&link=MyUrl",
                        类型：'POST'，
                        成功：函数（resp）{
                            $('#ValidationMessage').html('帖子已在您的墙上分享！')
                                                   .css('颜色', '绿色');
                            设置超时（函数（）{
                                $('#ValidationMessage').html('');
                            }, 3000);
                        },
                        错误：功能（请求，状态，错误）{
                            alert("Facebook 错误：\n" + request.responseText + '\n' + status + '\n' + error);                            
                        }
                    });
                }
            }, { 范围：'publish_stream' });
        }
        别的 {
            $('#ValidationMessage').html('请写点东西分享！')
                                   .addClass('red');
        }
    });
```

以上在 Firefox 浏览器中运行良好，但问题在于 IE 和 Chrome。在 Chrome 中，上面的代码将评论发布在墙上，但是当返回时，它进入错误块而不是成功。以下是进入 chrome 的错误。

```
Facebook Error:
{
    "id": "100002506055900_30229318964214"
}
parseerror
SyntaxError: Unexpected token: 
```

而在 IE 中，什么也没有发生。既不发布评论也不返回错误/成功块。

可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:53:24.417

您应该使用`FB.api`Facebook JavaScript SDK 中的函数，而不是执行 AJAX 调用来将某些内容发布到用户的时间线。它简化了流程：

```
FB.api('/me/feed', 'post', { message: body, picture: pic }, function(response) {
  if ( !response || response.error ) {
    alert('Error occured');
  } else {
    alert('Post ID: ' + response.id);
  }
}); 
```

您可以在此处查看 JS 调用的文档：http: [//developers.facebook.com/docs/reference/javascript/FB.api/](http://developers.facebook.com/docs/reference/javascript/FB.api/)

通过使用这种方法，您将能够大大减少您的代码。

# wpf - 内部数据模板时WPF动态资源不更新

> ID：10810524
> 
> 赞同：1
> 
> 时间：2012-05-30T05:36:14.027
> 
> 标签：wpf, xaml, resourcedictionary, dynamicresource, drawingbrush

我正在尝试在 WPF 应用程序中设置一个系统，用户可以在其中选择不同的主题并更新 UI。为了实现这一点，我将删除一个资源字典并合并到另一个资源字典中。

除了一种情况外，一切正常。

我有一些定义数据模板的页面。在数据模板中是一个绑定到视图模型上的字符串属性的矩形（使用 Caliburn.Micro），我有一个转换器，可以将字符串转换为绘图画笔（它从资源中找到它）。

问题是画笔中的动态资源（颜色）不会更新。

我以相同的方式（不是在数据模板中）绑定的每个其他矩形实例，绘图刷的颜色都会完美更新。只有在数据模板内部时才会出现此问题。

这是视图上的数据模板示例

```
<DataTemplate x:Key="ListBoxItemTemplate">
        <Border Style="{DynamicResource EntitySelectListBox}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Rectangle Grid.Column="0" Fill="{Binding IconName, Converter={converters:StringToResourceConverter}}" Width="50" Height="50" Margin="5" ToolTip="{Binding ToolTip}" />

                <TextBlock FontFamily="Segoe WP"
                           FontWeight="Light"
                           FontSize="22"
                           Grid.Column="1"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center"
                           Text="{Binding ButtonText}" />
            </Grid>
        </Border>
    </DataTemplate> 
```

以下是具有颜色动态资源的绘图画笔示例：

```
<DrawingBrush x:Key="BankIcon" Viewbox="0,0,442,442" ViewboxUnits="Absolute">
    <DrawingBrush.Drawing>
        <DrawingGroup>
            <DrawingGroup.Transform>
                <MatrixTransform Matrix="9.20833333333333,0,0,9.20833333333333,0,0"/>
            </DrawingGroup.Transform>
            <DrawingGroup>
                <DrawingGroup.Transform>
                    <MatrixTransform Matrix="1,0,0,1,0,2.04885336170188"/>
                </DrawingGroup.Transform>
                <GeometryDrawing Brush="{DynamicResource SecondaryText}" Geometry="M32.015748,33.342608 L46.283901,33.342608 C47.231779,33.342608 48,34.111116 48,35.061416 L48,40.968297 29.109026,40.968297 C31.057581,39.645195 32.207827,37.567466 32.207827,35.105579 32.207827,34.463728 32.135616,33.879828 32.015748,33.342608 z M1.7188548,33.342608 L21.193252,33.342608 C21.734045,33.580305 22.220392,33.759667 22.584643,33.892346 24.90359,34.727827 24.90359,35.253493 24.90359,35.449457 24.90359,35.986481 23.92294,36.182345 23.261798,36.182345 21.415607,36.182345 19.949486,35.468384 19.243114,35.041909 L17.321123,33.889921 15.507445,40.263165 16.585441,40.951892 0,40.968297 0,35.061416 C8.7927075E-13,34.111116 0.76985754,33.342608 1.7188548,33.342608 z M22.790523,18.230994 L25.366021,18.230994 25.366021,21.121156 C27.345029,21.183175 28.700861,21.687368 29.703128,22.191564 L28.856339,25.079107 C28.100782,24.702539 26.716707,23.982205 24.582318,23.982205 22.381153,23.982205 21.594926,25.110746 21.594926,26.179891 21.594926,27.467599 22.72608,28.221998 25.431822,29.259503 28.949705,30.578852 30.489161,32.27603 30.489161,35.105438 30.489161,37.771993 28.636319,40.099727 25.209281,40.667104 L25.209281,43.902294 22.602338,43.902294 22.602338,40.855485 C20.623328,40.792207 18.644319,40.22619 17.510837,39.502072 L18.362478,36.519611 C19.618635,37.270223 21.344919,37.898937 23.261813,37.898937 25.271298,37.898937 26.620819,36.927818 26.620819,35.449302 26.620819,34.003588 25.522762,33.125251 23.167186,32.27603 19.901545,31.081883 17.733186,29.541929 17.733186,26.651183 17.733186,23.9494 19.618635,21.844013 22.790523,21.279064 z M40.239403,16.937238 L44.995147,16.937238 44.995147,31.067614 40.239403,31.067614 z M32.794241,16.937238 L37.545128,16.937238 37.545128,31.067614 32.794241,31.067614 z M10.453898,16.937238 L15.205758,16.937238 15.205758,31.067614 10.453898,31.067614 z M3.0077641,16.937238 L7.7625359,16.937238 7.7625359,31.067614 3.0077641,31.067614 z M23.952052,0 L24.047946,0.0024883747 C24.709093,0.017653378 25.175256,0.11243361 26.113014,0.68999864 L48,14.939825 24.047946,14.939825 23.952052,14.939825 0,14.939825 21.885821,0.68999864 C22.824745,0.11243361 23.292458,0.017653378 23.952052,0.0024883747 z"/>
            </DrawingGroup>
        </DrawingGroup>
    </DrawingBrush.Drawing>
</DrawingBrush> 
```

这是一个导入其他资源字典的资源字典。一种用于样式，一种用于矢量图标（它们在皮肤之间共享）。

```
ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                x:Class="SixtenLabs.CashFlow.Client.Skins.Monochrome">

<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="/Resources/CommonStyles.xaml"/>
    <ResourceDictionary Source="/Resources/VectorIcons.xaml"/> 
```

我尝试将各个部分移动到不同的地方（app.xaml、window.resources）但无济于事。任何想法，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:58:17.487

尝试关闭 ListBox 中的虚拟化，因为您可能正在回收容器，并且容器不会始终遵守 DynamicResource 绑定中的更改。

```
<ListBox VirtualizingStackPanel.IsVirtualizing="False"
         VirtualizingStackPanel.VirtualizationMode="Standard" /> 
```

# java - 哪个蓝牙库独立于堆栈

> ID：10810526
> 
> 赞同：3
> 
> 时间：2012-05-30T05:36:33.670
> 
> 标签：java, c++, bluetooth, communication, hardware-interface

我制作了一个需要使用蓝牙进行通信的 Windows 应用程序，到目前为止，我已经为 Java 尝试过 blue cove。

它似乎仅限于几个堆栈。我有一个东芝堆栈，但我仍然想要一个可以处理大多数流行堆栈的库。

不管它是用于 C、C++ 还是 Java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:09:31.860

Bluecove 已经做到了极致。

这是由于 Windows 上如何处理蓝牙这一不幸的事实。供应商并没有就整个平台的单一实现达成一致，而是倾向于将自己的堆栈与设备驱动程序软件一起发布。这部分是由于历史原因，部分是因为硬件供应商对此不够关心，无法对此采取任何措施。

Bluecove 为 Microsoft、Broadcom WIDCOMM 和 BlueSoleil 堆栈提供实现，这些堆栈应覆盖所有可用设备的 90% 以上。在您的情况下，我看到三个选项：

1.  尝试让您的设备使用不同的堆栈。我知道 BlueSoleil 适用于某些基于东芝的设备，谷歌应该对您的特定设备的选项提供一个很好的概述。

2.  获取另一台设备。如今，蓝牙加密狗非常便宜，所以这是一个有效的选择。这比使用内置设备要麻烦一些，但话又说回来，如果软件不起作用，内置设备有什么用呢？

3.  尝试自己为 Bluecove 编写东芝设备的实现。IIRC Toshiba 会根据要求提供 SDK。如果许可证以某种方式禁止与 Bluecove 集成，您可能会遇到法律问题。

故事的精神：蓝牙驱动程序一团糟，尤其是在 Windows 上。在购买下一个设备之前，请务必检查您的软件要求。

# php - php 刷新标准输出/标准错误

> ID：10810529
> 
> 赞同：1
> 
> 时间：2012-05-30T05:37:02.703
> 
> 标签：php, stdout, stderr

我有一个在我的 ubunutu 服务器上运行的 php 脚本。该脚本在无限循环中运行，运行查询并收集统计信息……它是其他一些服务的监视器。每隔 60 秒，收集的统计信息会作为 json 对象转储到 .js 文件中。.js 文件在其他地方受到监控，对于我的问题而言并不重要。

当我运行我的脚本时，我将 stdout 和 stderr 都重定向到一个日志文件。在大多数情况下，没有标准或错误输出，因此日志将保持为空。

显然，尽管有时会有输出。我昨晚遇到的问题是脚本由于某种原因失败，并且日志文件最终填满了整个分区并破坏了服务器的稳定性。

我所做的..或尝试做的是添加一个简单的检查，即每 60 秒（当转储统计信息时）脚本检查日志文件的大小..如果它的大小大于 X mb，基本上清空文件并允许继续记录。目的是如果脚本再次遇到问题，日志文件不会填满整个分区。

我可以成功检测到日志文件大小，当它达到我设置的大小时我可以成功清除它，但是下一次有 STDOUT 或 STDERR 写入时，之前的所有数据都会一次性转储。

对此的任何帮助将不胜感激。

* * *

通过以下方式调用脚本：

```
php checker.php &> log 
```

但尝试过

```
php checker.php > log 2>&1 
```

并在脚本开头重定向流

```
close(STDOUT);
fclose(STDERR);
$STDOUT = fopen($LOG_FILE_LOCATION, 'wb');
$STDERR = fopen($LOG_FILE_LOCATION, 'wb'); 
```

每种方式产生相同的输出。

代码清除日志文件

```
function CheckLogFilesize($file)
{
    global $LOG_FILE_LOCATION;
    global $MAX_LOG_SIZE_MB;
    $max_log_size_bytes = $MAX_LOG_SIZE_MB * 1024 * 1024;

    $size = exec('stat -c %s ' . $file);

    // If log file size is too large.. reset it.
    if (intval($size) > $max_log_size_bytes)
    {
        flush();

        // Clear the log
        $fp = fopen($file, 'w');
        fwrite($fp, '');
        fclose($fp);
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:50:50.760

如果我必须这样做，我会检测日志文件的大小，如果它大于阈值，则将文件移动到另一个文件名（例如 old-log.txt）。在这种情况下，您将拥有最多 2 个日志文件，总大小为阈值的 2 倍。

优点是在达到阈值后您仍然有一些旧的日志条目。如果您只是清除文件，您会看到您尝试在空文件中查找信息

编辑：

看看 PHP 中的 ob_* 命令。他们可能会帮助您清除缓冲区

[ob_start()](http://php.net/manual/en/function.ob-start.php)在评论中你可以找到更多关于标准输出的信息

```
...
ob_start();
// keep writing log until done
ob_end_clean(); // or use ob_end_flush(); 
```

一些伪代码...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:02:47.027

如果您要重定向`stdout`到日志文件，您甚至可以尝试访问`unlink()`该文件，但它不起作用，因为您`stdout`仍然连接到它。

一种方法是在启动进程之前清除日志文件，并在文件超过一定大小时停止进程。然后让你的脚本在 shell 脚本循环中运行（只有当进程存在代码 = 0 时才会终止，即没有错误）；当脚本停止时，它将立即再次启动。

通常，守护进程会打开它们自己的日志文件，因此您可以向它们发送`HUP`信号以重新打开它们的日志文件，从而避免完全重启。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T06:04:38.577

**编辑**

弄清楚了：

```
function get_log_size() {
    clearstatcache();
    return filesize("/tmp/log.log");
}

foreach (range(1, 1000000) as $interval) {
    echo $interval . "\n";
    usleep(10000);
    if ($interval % 50 == 0) {
        fwrite(STDERR, "mod 50 fail test");
    }
    $size = get_log_size();
    echo $size . " bytes\n";
    if ($size > 100) {
        $file = "/tmp/log.log";
        $fp = fopen($file, 'w');
        fclose($fp);
        print "Truncated\n";
    }

} 
```

开始于

```
php test.php >> /tmp/log.log 2>&1 
```

注意**>>**而不是**>**。您必须使用附加模式

的示例输出`tail -f /tmp/log.log`：

```
λ ~/ tail -f /tmp/log.log

1
2 bytes
2
12 bytes
3
23 bytes
4
34 bytes
5
45 bytes
6
56 bytes
7
67 bytes
8
78 bytes
9
89 bytes
10
101 bytes
Truncated
11
13 bytes
12
25 bytes
13
37 bytes
14
49 bytes
15
61 bytes
16
73 bytes
17
85 bytes
18
97 bytes
19
109 bytes
Truncated
20
13 bytes
21
25 bytes
22
37 bytes
23
49 bytes
24
61 bytes
25
73 bytes
26
85 bytes
27
97 bytes
28
109 bytes
Truncated 
```

# mysql - 改进这个多个 UNION 查询的方法？

> ID：10810531
> 
> 赞同：1
> 
> 时间：2012-05-30T05:37:18.313
> 
> 标签：mysql, sql

我需要找到拥有任何一个的用户

1.  共享视频信用；
2.  共享生产信用；或者
3.  一个共享组。

这是目前我提出的查询：

```
SELECT profile_id FROM productions_productionmember WHERE production_id in 
    (SELECT production_id FROM productions_productionmember WHERE profile_id=?)
UNION
SELECT profile_id FROM groups_groupmember WHERE group_id in 
    (SELECT group_id FROM groups_groupmember WHERE profile_id=?)
UNION
SELECT profile_id FROM videos_videocredit WHERE video_id in 
    (SELECT video_id FROM videos_videocredit WHERE profile_id=?) 
```

相关表格：

```
groups_groupmember
- profile_id
- group_id 

videos_videocredit
- profile_id
- video_id

productions_productionmember
- profile_id
- production_id 
```

如何改进这个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:41:17.533

```
SELECT DISTINCT p.profile_id 
FROM productions_productionmember p
left outer join groups_groupmember g on g.profile_id = p.profile_id
left outer join videos_videocredit v on v.profile_id = p.profile_id
WHERE v.video_id is not null or g.group_id is not null
or p.production_id in (SELECT production_id 
                     FROM productions_productionmember 
                     WHERE profile_id=?) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:51:57.310

```
Select *
From productions_productionmember as a,
     groups_groupmember           as b,
     videos_videocredit           as c
Where a.profile_id in (select ...) or
      b.group_id in (select ...) or 
      c.video_id in (select...) 
```

希望能帮助到你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:10:04.430

您需要在 3 个表中的任何一个中存在的配置文件列表。

```
 SELECT profile_id FROM productions_productionmember 
     UNION
     SELECT profile_id FROM groups_groupmember 
     UNION
     SELECT profile_id FROM videos_videocredit 
```

如果 production_id\group_id\video_id 可以为空，则可以对这些查询使用 IS NOT NULL 检查。

您在查询中传递的 profile_id 是什么？如果您需要检查任一表中是否存在配置文件，则可以将 where 子句放在上述查询返回的结果上。

```
 SELECT count(*) 
     from (SELECT profile_id FROM productions_productionmember 
           UNION
           SELECT profile_id FROM groups_groupmember 
           UNION
           SELECT profile_id FROM videos_videocredit ) subq
     where subq.profile_id = ? 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T06:15:25.970

```
SELECT pp.profile_id 
FROM productions_productionmember pp
JOIN productions_productionmember pp2 ON pp.production_id=pp2.production_id 
     AND pp2.profile_id=?
UNION
SELECT gg.profile_id
FROM groups_groupmember gg
JOIN groups_groupmember gg2 ON gg.group_id=pp2.group_id
     AND gg2.profile_id=?
UNION
SELECT vv.profile_id 
FROM videos_videocredit vv
JOIN videos_videocredit vv2 ON vv.video_id=vv2.video_id 
     AND vv2.profile_id=? 
```

这消除了内部查询。我不能告诉你这是否会提高查询速度。
此查询返回 profile_ids，可以在表中找到两个或多个。

# java - deploy java jax ws web service as stand alone server

> ID：10810533
> 
> 赞同：0
> 
> 时间：2012-05-30T05:37:20.623
> 
> 标签：java, eclipse, web-services

i am new to webservice. i need your help to understand deployment process.

I have created a new webservice by using following tutorial

[http://www.ibm.com/developerworks/webservices/tutorials/ws-eclipse-javase1/section2.html](http://www.ibm.com/developerworks/webservices/tutorials/ws-eclipse-javase1/section2.html)

web service is running fine in eclipse,

right now i am running this service by right clicking on endpoint class and run it as java application. i want to run this service manually because on our server we not going to install eclipse.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:59:22.343

You need some web site to host your application. Eclipse is hosting it for you on your local machine but to use manually I assume you mean you want it on a real site?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:32:45.060

You need to bundle your web service implementation classes as jar and you need to deploy to any Java EE complaint servers like JBoss or GlassFish.

# c - 优化数组转置函数

> ID：10810536
> 
> 赞同：8
> 
> 时间：2012-05-30T05:37:49.953
> 
> 标签：c, caching, optimization, loops, matrix

我正在做家庭作业，我的解决方案已经被困了好几个小时。我们遇到的问题是优化下面的代码，让它运行得更快，不管它变得多么混乱。我们应该使用诸如利用缓存块和循环展开之类的东西。

问题：

```
//transpose a dim x dim matrix into dist by swapping all i,j with j,i
void transpose(int *dst, int *src, int dim) {
    int i, j;

    for(i = 0; i < dim; i++) {
        for(j = 0; j < dim; j++) {
                dst[j*dim + i] = src[i*dim + j];
        }
    }
} 
```

到目前为止我所拥有的：

```
//attempt 1
void transpose(int *dst, int *src, int dim) {
    int i, j, id, jd;

    id = 0;
    for(i = 0; i < dim; i++, id+=dim) {
        jd = 0;
        for(j = 0; j < dim; j++, jd+=dim) {
                dst[jd + i] = src[id + j];
        }
    }
}

//attempt 2
void transpose(int *dst, int *src, int dim) {
    int i, j, id;
    int *pd, *ps;
    id = 0;
    for(i = 0; i < dim; i++, id+=dim) {
        pd = dst + i;
        ps = src + id;
        for(j = 0; j < dim; j++) {
                *pd = *ps++;
                pd += dim;
        }
    }
} 
```

一些想法，如果我错了，请纠正我：

我曾考虑过循环展开，但我认为这不会有帮助，因为我们不知道 NxN 矩阵是否具有素数维度。如果我检查了这一点，它将包括过多的计算，这只会减慢函数的速度。

缓存块不会很有用，因为无论如何，我们将线性访问一个数组（1,2,3,4），而另一个我们将在 N 的跳转中访问。虽然我们可以让函数被滥用缓存并更快地访问 src 块，将它们放入 dst 矩阵仍然需要很长时间。

我也尝试过使用指针而不是数组访问器，但我认为这实际上并没有以任何方式加速程序。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T09:14:43.390

缓存阻塞可能很有用。举个例子，假设我们有一个 64 字节的缓存线大小（这就是 x86 现在使用的）。因此，对于一个足够大的矩阵，它大于缓存大小，那么如果我们转置一个 16x16 块（因为 sizeof(int) == 4，因此 16 个整数适合缓存行，假设矩阵在缓存行边界上对齐) 我们需要从内存中加载 32 个（源矩阵中的 16 个，目标矩阵中的 16 个）缓存行，然后再存储 16 个行（即使存储不是连续的）。相反，在没有缓存阻塞的情况下，转置等效的 16*16 元素需要我们从源矩阵加载 16 条缓存线，但要加载 16*16=256 条缓存线，然后为目标矩阵存储。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T06:34:59.073

展开对于大型矩阵很有用。
如果矩阵大小不是展开次数的倍数，您将需要一些代码来处理多余的元素。但这将在最关键的循环之外，因此对于大型矩阵来说这是值得的。

关于访问的方向 - 线性读取和写入 N 的跳跃可能会更好，而不是反之亦然。这是因为读取操作会阻塞 CPU，而写入操作不会（达到限制）。

其他建议：
1\. 可以使用并行化吗？OpenMP 可以提供帮助（尽管如果您希望提供单 CPU 性能，那就不好了）。
2\. 拆解函数阅读，重点看最里面的循环。您可能会发现在 C 代码中不会注意到的东西。
3\. 使用递减计数器（停在 0 处）可能比递增计数器更有效。
4\. 编译器必须假设`src`并且`dst`可能别名（指向相同或重叠的内存），这限制了它的优化选项。如果你能以某种方式告诉编译器它们不能重叠，那可能会有很大的帮助。但是，我不确定该怎么做（也许使用`restrict`限定符）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T09:58:51.147

凌乱不是问题，所以：我会`transposed`为每个矩阵添加一个标志。该标志指示矩阵的存储数据数组是以正常顺序还是转置顺序解释。

除了每个矩阵参数之外，所有矩阵运算都应该接收这些新标志。在每个操作中实现所有可能的标志组合的代码。也许宏可以在这里省去多余的写法。

在这个新实现中，矩阵转置只是切换标志：转置操作所需的空间和时间是恒定的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T09:03:37.803

只是一个想法如何实现展开：

```
void transpose(int *dst, int *src, int dim) {
    int i, j;
    const int dim1 = (dim / 4) * 4;

    for(i = 0; i < dim; i++) {
        for(j = 0; j < dim1; j+=4) {
                dst[j*dim + i]     = src[i*dim + j];
                dst[(j+1)*dim + i] = src[i*dim + (j+1)];
                dst[(j+2)*dim + i] = src[i*dim + (j+2)];
                dst[(j+3)*dim + i] = src[i*dim + (j+3)];
        }
        for( ; j < dim; j++) {
                dst[j*dim + i] = src[i*dim + j];
        }
        __builtin_prefetch (&src[(i+1)*dim], 0, 1);
    }
} 
```

当然，您应该`i*dim`从内部循环中删除计数（ like ），就像您在尝试中所做的那样。

缓存预取可用于源矩阵。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-30T09:52:22.463

您可能知道这一点，但是`register int`（您告诉编译器将其放入寄存器会很聪明）。并且制作 int's`unsigned`可能会使事情进展得更快一些。

# asp.net - 客户端的可观察模式

> ID：10810539
> 
> 赞同：0
> 
> 时间：2012-05-30T05:37:55.083
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-2

mvc 中的客户端数据绑定是否有任何解决方法。我正在寻找类似在客户端以某种方式实现可观察模式的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:49:24.633

看看[淘汰赛](http://www.knockoutjs.com)，它可能会提供你所追求的东西

从他们的网站

> **声明式绑定**使用简洁易读的语法轻松地将 DOM 元素与模型数据关联起来
> 
> **自动 UI 刷新**当您的数据模型的状态发生变化时，您的 UI 会自动更新
> 
> **依赖跟踪**隐式建立模型数据之间的关系链，对其进行转换和组合
> 
> **模板**化 根据模型数据快速生成复杂的嵌套 UI

还

> Knockout 是一个 JavaScript 库，可帮助您使用干净的底层数据模型创建丰富的响应式显示和编辑器用户界面。任何时候您的 UI 部分都可以动态更新（例如，根据用户的操作或外部数据源发生更改），KO 可以帮助您更简单和可维护地实现它。
> 
> **标题特点**：
> 
> 优雅的依赖跟踪 - 每当您的数据模型发生更改时，都会自动更新 UI 的正确部分。声明式绑定 - 一种将部分 UI 连接到数据模型的简单而明显的方法。您可以使用任意嵌套的绑定上下文轻松构建复杂的动态 UI。可轻松扩展 - 将自定义行为实现为新的声明性绑定，以便在几行代码中轻松重用。

如果您已经将 JSON 对象返回给客户端，为了防止在创建视图模型时进行一些额外的工作，您可以使用[Knockout Mapping 插件](http://knockoutjs.com/documentation/plugins-mapping.html)：

> Knockout 旨在允许您使用任意 JavaScript 对象作为视图模型。只要你的视图模型的某些属性是可观察的，你就可以使用 KO 将它们绑定到你的 UI，并且每当可观察的属性发生变化时，UI 都会自动更新。
> 
> 大多数应用程序需要从后端服务器获取数据。由于服务器没有任何 observables 的概念，它只会提供一个普通的 JavaScript 对象（通常序列化为 JSON）。映射插件为您提供了一种直接的方法，可以将纯 JavaScript 对象映射到具有适当可观察对象的视图模型中。这是手动编写您自己的 JavaScript 代码的替代方法，该代码根据您从服务器获取的一些数据构建视图模型。

还有其他框架可以做类似的事情，例如：

*   [骨干网.js](http://backbonejs.org/)
*   [更多选择在这里](https://stackoverflow.com/questions/4882184/backbone-js-alternatives-that-plays-ball-with-jquery)

如果你想在不使用“大”框架的情况下实现它，可以看看这个：

*   [https://stackoverflow.com/questions/1005300/example-of-javascript-observer-pattern](https://stackoverflow.com/questions/1005300/example-of-javascript-observer-pattern)

# c++ - 使用代码更改 Windows 7 平板电脑设置。

> ID：10810543
> 
> 赞同：1
> 
> 时间：2012-05-30T05:38:19.053
> 
> 标签：c++, c, windows-7, touch, registry

我正在为 windows 7 设计一个触摸驱动程序。Windows 7 具有将您的触摸屏与特定显示器相关联的机制，请参阅“平板电脑设置”->“配置”。

我想要做的是，使用 c/c++ 更改平板电脑设置，以便我能够更改输入是否进入主显示器或辅助显示器。有什么方法可以使用 C/C++ 更改设置，它们是存储在注册表中的某个地方还是其他地方？. 如果是，我该如何修改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:50:00.713

请参见[此处。](https://stackoverflow.com/questions/429738/detecting-installed-programs-via-registry)一旦检测到，您只需检查 installMode。如果安装，其值为 1，否则为 0。

有一个可以在 c++ 中使用的[注册表函数列表。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724875%28v=vs.85%29.aspx)

触摸屏注册表存储配置触摸屏行为所需的信息。

**HKEY_LOCAL_MACHINE\Hardware\DeviceMap\Touch**注册表项是配置触摸屏所必需的。下表显示了 Touch 配置参数的命名值。

有关信息，请参见[此处](http://msdn.microsoft.com/en-us/library/ms924827.aspx)

# ios - 安全存储数据，应用程序是如何做到的？

> ID：10810550
> 
> 赞同：0
> 
> 时间：2012-05-30T05:39:22.733
> 
> 标签：ios

我正在对一个我们想要开展的新项目进行一些研究，但在我们真正开始这个项目之前，我有些担心。

该项目涉及在服务器的某处存储大量（文本）数据，您可以将其视为 Instagram（但没有照片）。所以你可以关注人，查看个人资料，活动列表......

问题是，这些应用程序如何将所有这些数据安全地发送到服务器？他们使用什么样的服务器？亚马逊AWS之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:47:53.563

它们通过内置在[NSURLConnection](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)类中的 https 发送。您可以拥有一台服务器（我使用 linux，但您可以使用任何东西）拥有自签名 ssl 证书，如果您想省钱，您的应用程序代码可以为自签名证书的特定 URL 提供例外。不过，拥有签名证书是更好的做法，也更安全。

就存储而言，大多数人实际上并未将其加密存储。它被加密发送到运行 Web 服务的服务器，然后未加密存储在数据库/文件系统中。其原因是压缩内容需要大量处理能力，存储加密内容的额外开销以及根据您的操作方式使搜索和索引变得更加困难。

尽管我在家里运行自己的服务器，但亚马逊 AWS 也可以工作。这很容易设置。

# php - 如何删除字符串中的所有标点符号只需在PHP中获取用空格分隔的单词

> ID：10810553
> 
> 赞同：5
> 
> 时间：2012-05-30T05:39:40.603
> 
> 标签：php, string

我想删除字符串中的任何类型的特殊字符，如下所示：

```
This is, ,,, *&% a ::; demo +  String.  +
Need to**@!/// format:::::
 !!! this.` 
```

输出要求：

```
This is a demo String Need to format this 
```

如何使用正则表达式做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-30T05:48:51.243

检查非数字、非字母字符的任何重复实例并用空格重复：

```
# string(41) "This is a demo String Need to format this"
$str = trim( preg_replace( "/[^0-9a-z]+/i", " ", $str ) ); 
```

演示：[http ://codepad.org/hXu6skTc](http://codepad.org/hXu6skTc)

```
/ # 表示模式的开始
[ # 表示字符类的开始
 ^ # 不是，或否定
 0-9 # 数字 0 到 9（或者，“不是数字”，因为 ^
 az # 字母 a 到 z（或者，“不是字母或数字”，因为 ^0-9
] # 表示字符类结束
+ # 匹配字符类匹配的 1 个或多个实例
/# 表示模式结束
i # 不区分大小写，az 也表示 AZ

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T05:41:30.857

采用：

```
preg_replace('#[^a-zA-Z0-9 ]#', '', $yourString); 
```

如果字符不是字母、数字或空格，则将其替换为空字符串。

**例子：**

```
$yourString = 'This is, ,,, *&% a ::; demo +  String.  + Need to**@!/// format::::: !!! this.`';
$newStr = preg_replace('#[^a-zA-Z0-9 ]#', '', $yourString);
echo $newStr; 
```

**结果：**

```
This is a demo String Need to format this 
```

* * *

因此，如果您愿意，可以通过将它们放入：

```
[^a-zA-Z0-9 ] 
```

* * *

**注意：**此外，如果您不想*在单词之间允许多个空格*（尽管在浏览器中输出时不会显示它们），您需要使用它来代替：

```
preg_replace('#[^a-zA-Z0-9]+#', ' ', $yourString); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T05:44:30.063

```
$string = preg_replace('/[^a-z]+/i', ' ', $string); 
```

您可能还希望`'`在您的角色类中允许有连词，例如`don't`not be rolling into `don t`：

```
$string = preg_replace('/[^a-z\']+/i', ' ', $string); 
```

您可能还想在之后修剪它以删除前导和尾随空格：

```
$string = trim(preg_replace('/[^a-z\']+/i', ' ', $string)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T05:44:42.737

```
echo preg_replace('/[^a-z]+/i', ' ', $str); 
// This is a demo String Need to format this 
```

# c# - EF 会导致 C# 中的内存使用过多吗？

> ID：10810559
> 
> 赞同：0
> 
> 时间：2012-05-30T05:40:31.410
> 
> 标签：c#, entity-framework, memory-management

我有一个用 C# 和 Entity Framework 4.0 编写的多线程控制台应用程序。昨天，当我监视程序几个小时时，它使用了大约 100MB，但今天早上它变成了 500MB。只是想知道 EF 是否最终会因为缓存而变大？或者我应该以某种方式刷新它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:44:06.983

除非您有正当理由监控内存使用情况，否则*通常*没有。垃圾收集器将在需要内存时启动，并清空未使用的内存。

只要您不在某处保留对未使用对象的引用，内存使用不应成为垃圾收集环境中的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:46:53.043

您如何检查内存使用情况，如果您使用的是任务管理器，那么它不会反映正确的内存使用情况。如果您[对 .Net 使用一些内存分析器](http://memprofiler.com/)会更好，另请参阅[What Are Some Good .NET Profilers?](https://stackoverflow.com/questions/3927/what-are-some-good-net-profilers) . 您也可以尝试[dotTrace](http://www.jetbrains.com/profiler/)来查看哪个对象正在占用内存。

尝试 `ContextOptions.LazyLoadingEnabled`在您的数据上下文下禁用并查看它是否有帮助，但我仍然认为使用内存分析器可以让您清楚地了解您的应用程序正在发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T05:51:08.183

是的，EF 会缓存您查询的实体，也许这是一个原因，您可以在 dbcontext.config 和 c 中将其关闭任何影响。

# ruby - 在 ruby 中使用海龟图形的一般方法

> ID：10810561
> 
> 赞同：2
> 
> 时间：2012-05-30T05:40:33.697
> 
> 标签：ruby, turtle-graphics

有没有像这样在 ruby​​ 中使用海龟图形的通用方法？

```
require 'turtle'
Turtle.draw do
    pencolor blue
    forward 100
end 
```

我尝试了hacky-hack，它很好但太麻烦了（几乎每分钟都会崩溃）。我也在尝试 rdf-turtle，但我不知道如何画一条线。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:56:57.023

看起来[rdf-turtle](https://github.com/ruby-rdf/rdf-turtle)只是一个用于解析 RDF 格式而不是用于绘制任何东西的库。

如果您想在 Ruby 中使用海龟绘制一些东西，[请查看 Kidsruby](http://www.kidsruby.com/about)。它带有一个 GUI 和一个海龟模块。

# java - 如何将 java 对象传递给 oracle 存储过程，详细信息如下

> ID：10810563
> 
> 赞同：4
> 
> 时间：2012-05-30T05:40:53.910
> 
> 标签：java, database, oracle, logging, stored-procedures

我的 ORACLE 表的结构为

```
desc extraction_log1
           Name                           Null                        
                                                     Type                                                                                                                                                                                          

 ------------------------------ -------- ------------------------------------------------------------     ----------------------------------------------------------------------------------------------------      ----------------------------- 
 ROW_NUM                        NOT NULL            NUMBER                                                                                                                                                                                        
DATE_TIME                                        TIMESTAMP(8)                                                                                                                                                                                  
USER_NAME                                         VARCHAR2(32)                                                                                                                                                                                  
PLATFORM_NAME                                      VARCHAR2(20)                                                                                                                                                                                  
R_OBJECT_ID                                       VARCHAR2(16) 
```

然后我在 oracle 中创建了一个对象类型为

```
create or replace type EXTRACTION_LOG_TYPE as object    (          

 USER_NAME VARCHAR2(32), 
 R_OBJECT_ID VARCHAR2(16), 

  ); 
```

然后我在一个包中创建了程序

```
create or replace package body PAC_BEAN is 
  --The insert procedure will receive EXTRACTION_LOG_TYPE and put it into table EXTRACTION_LOG1\.  

   procedure PRO_INSERT_LOG(ELT in EXTRACTION_LOG_TYPE) is 

   begin 

      insert into EXTRACTION_LOG1 ( R_OBJECT_ID, USER_NAME)
           values (ELT.R_OBJECT_ID, ELT.USER_NAME);  

      commit;  

 exception  

  when others then 
    rollback;  

  end PRO_INSERT_LOG;  
  end PAC_BEAN; 
```

来到我的java端，我已经声明了一个bean

```
public class ExtractionLogType {        
        //Name declared in Oracle        
   public static final String ORACLE_OBJECT_NAME = "EXTRACTION_LOG_TYPE";            
   //The attributes        
  private String  R_OBJECT_ID;        
  private String USER_NAME;      
  //setters and getters      
  public  String getR_OBJECT_ID() {
    return R_OBJECT_ID;
  }
  public  void setR_OBJECT_ID(String rOBJECTID) {
    R_OBJECT_ID = rOBJECTID;
    }
  public  String getUSER_NAME() {
    return USER_NAME;
   }
  public  void setUSER_NAME(String uSERNAME) {
    USER_NAME = uSERNAME;
   }

            } 
```

在我的类中包含 main

```
 import java.sql.CallableStatement;
               import java.sql.Connection;
                 import java.sql.DriverManager;
               import java.sql.SQLException;

            public class DBLogger{     
          String dbUrl;     
        Connection con;      
     //constructor for creation of  connection object 
        as and when an object of DBLogger is instantiated     
        public DBLogger(){           
    dbUrl = "jdbc:oracle:thin@my url";        
         try {             
        //load Oracle Driver class             
        Class.forName("oracle.jdbc.driver.OracleDriver");     
        } catch (ClassNotFoundException e) {         
            e.printStackTrace();         
            System.err.println("Oracle driver class not found");       
            }      
        try {         
            //instantiate connection object       
            con = DriverManager.getConnectio (dbUrl,"userId","pwd");                
            } catch (SQLException e) {      
                e.printStackTrace();                       
              System.err.println("Connection object to oracle cant be established");   
                }    
            } 
        public static void main(String args[]){  
     try{
    DBLogger db=new DBLogger();        
    CallableStatement cs = null;        
    ExtractionLogType elt=new  ExtractionLogType();         
    elt.setR_OBJECT_ID("79479479A900");       
    elt.setUSER_NAME("Jeevan");               
    cs = db.con.prepareCall("{call PAC_BEAN.PRO_INSERT_LOG(?)}");                
    /*                     
     * *code to insert the above object into our Database               
     *       
    */
    cs.execute();           
    System.out.println("insert procedure executed successfully");                  
    db.con.close();      
    }  //end try  
catch (SQLException e) {      
    e.printStackTrace();   }     
catch(Exception e) {             e.printStackTrace();        
}   
}

       } 
```

我无法弄清楚使对象插入我的数据库的代码。
任何人都可以就此向我提出建议。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:32:14.200

你必须为你的数据库类型定义一个数组描述符，这个例子可以帮助你：

```
final ArrayDescriptor descriptor = ArrayDescriptor.createDescriptor("EXTRACTION_LOG_TYPE", con);
// create an Object Array
Object[] data = new Object[2];
// set the values in order of appearance
data[0] = elt.getUSER_NAME();
data[1] = elt.getR_OBJECT_ID();
// Create the Array
ARRAY array = new ARRAY(descriptor, con, data);
// put it on your statement
cs.setArray(1, array);
// execute ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-23T06:08:36.520

在数据库的 SYSTEM 模式中创建任何对象是一个糟糕的主意。将您的应用程序直接连接到此方案也是同样的坏主意。这看起来像是缺乏特权，不允许您获得想要的东西。创建新模式，此模式的专用用户，然后使用此新用户创建所有必需的对象（它将是您的对象的所有者）。通过这种方式，您可以避免“问题”，即您无法访问您应该可以访问的内容。

# android - 为什么跨平台 Cordova 插件需要 2 个 Javascript 文件？

> ID：10810568
> 
> 赞同：1
> 
> 时间：2012-05-30T05:41:36.840
> 
> 标签：android, ios, cordova, phonegap-plugins

在这篇[文章中](http://wiki.phonegap.com/w/page/36752779/PhoneGap%20Plugins#CatchaboutdifferentPlatforms)，我引用：

> **了解不同的平台** 在让您感到惊讶之前，让我澄清一些事情。假设您正在为 2 个平台开发 Phonegap 插件：iOS 和 Android。有人可能会假设我们需要大量生成：一个将在 iOS 和 Android 上使用的 JavaScript 文件；一个用于 Android 的 Java 文件一个 .h 和一个用于 iOS 的 .m
> 然而，实际上您需要大量生成：一个用于 Android 的 Javascript 文件，以及一个用于 Android 的 Java 文件；适用于 iOS 的不同 Javascript 文件，仅适用于 iOS 的 .h 和 .m 文件对。两个 Javascript 文件可以（并且应该）为使用它的开发人员提供相同的接口，但每个接口的实现会有所不同。

如果本地方法都命名相同，为什么需要 2 个 Javascript 文件？我创建了一个 iOS 插件（带有相应的 .js 文件），现在我正在创建 Android 端，我不明白为什么我需要一个单独的 .js 用于 Android 端。有什么想法为什么他们无缘无故地强调这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:06:23.287

好吧，这取决于您使用的是哪个版本的 PhoneGap/Apache Cordova。在以前的版本中，iOS 和 Android 之间的 PhoneGap.exec() 方法签名是不同的。从 1.7.0 和可能早在 1.5.0 开始，方法签名是相同的。无论您在哪个平台上运行，您都应该能够为您的插件使用相同的 .js 文件。

```
cordova.exec(success, fail, service, action, args); 
```

我将创建一个问题来清理 wiki 说明。

# java - 当计数为 0 时，线程在 CountDownLatch await() 上阻塞

> ID：10810570
> 
> 赞同：5
> 
> 时间：2012-05-30T05:42:10.293
> 
> 标签：java, countdownlatch

在分析其中一个生产环境的日志时，我在倒计时等待（）上看到了一个处于“W​​AITING”状态的线程

```
...sun.misc.Unsafe.park(Native Method)
...java.util.concurrent.locks.LockSupport.park(Unknown Source)
...java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(Unknown Source)
...java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(Unknown Source)
...java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(Unknown Source)
...java.util.concurrent.CountDownLatch.await(Unknown Source) 
```

锁存器被初始化为 1，并且另一个线程确实在锁存器的同一实例上调用了 countDown() 方法，但主线程仍然在锁存器上保持阻塞。这导致 jvm 被无限期挂起。

即使锁存器计数达到零也被阻止听起来不合理，我正在寻找有关进一步解决此问题的建议。

有任何想法吗？

注意 - 使用的 jvm 版本如下

java 版本 "1.5.0_15" Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_15-b04) Java HotSpot(TM) Client VM (build 1.5.0_15-b04, 混合模式, 共享)

更新 - 下面是我在上面谈论的线程的代码片段

 ````
private class MyRunnable implements Runnable, Thread.UncaughtExceptionHandler {

        private AtomicBoolean shouldStop = new AtomicBoolean(false);
        private CountDownLatch stopLatch = new CountDownLatch(1);
        private Thread currentThread;

    public void run() {

        Thread.currentThread().setName("My Thread");
            Thread.currentThread().setUncaughtExceptionHandler(this);
            currentThread = Thread.currentThread();
            if (currentThread.isInterrupted()) {
                logger.debug("The pool thread had its interrupted stattus set. Clearing...");
                Thread.interrupted();
                logger.debug("The pool thread had its interrupted stattus set. Clearing...DONE");
            }
            try {
                doBusinessLogic(shouldStop);
            } catch (Exception e) {
                logger.error("An exception was encountered in the thread", e);
            } finally {
                if (currentThread.isInterrupted()) {
                    logger.debug("Clearing interupted status for the thread and returning to pool...");
                    Thread.interrupted();
                }
                stopLatch.countDown();
                logger.debug("Stopped task after counting down on the latch");
            }
        }

        public void stopThread() {
            shouldStop.set(true);
            logger.debug("Stop flag was set to true.. waiting for thread method to return...");
            try {
                stopLatch.await();
                logger.debug("Stop flag was set to true... task has finished. Returning.");
            } catch (InterruptedException e) {
                logger.error("Interrupted while awaiting thread stop event...", e);
            }
        }

        public void uncaughtException(Thread t, Throwable e) {
            logger.error("An uncaught exception occurred in the task thread ", e);
        }

        private void doBusinessLogic(AtomicBoolean shouldStop) {
    long sleepPeriod = 11;
    while (!shouldStop.get()) {
        try {
            Thread.sleep(sleepPeriod);
        } catch (InterruptedException e) {
            logger.debug("Thread was interrupted.Clearing interrupted status and proceeding", e);
            if (Thread.currentThread().isInterrupted())
                Thread.interrupted();
        }
        if (shouldStop.get()) {
            logger.debug("Stop flag was set. Returning.");
            return;
        }
        try {
            logger.debug("Performing business logic...");
            //.....
            logger.debug("Performing business logic...DONE");
        } catch (Throwable e) {
            logger.error("An exception occurred", e);
        }
        if (shouldStop.get()) {
            logger.debug("Stop flag was set. Returning.");
            return;
        }
    }

}

} 
````  `这是我在日志中看到的

```
DEBUG [main Thread] - Stop flag was set to true.. waiting for thread method to return...
DEBUG [My Thread]   - Stop flag was set. Returning.
DEBUG [My Thread]   - Stopped task after counting down on the latch 
```

在latch.await() 之后的记录器语句从不打印，并且线程转储还表明主线程在latch 上被阻塞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:54:19.463

我本来想写这篇评论，但我的名声还不允许评论，所以我会在这里提供我的小经验。

我遇到了同样的问题。我的 countDownLatch 是从同步方法访问的：删除同步解决了问题（当然我不得不调整方法的代码以应对同步的缺失）。我不知道如何解释这种行为。`

# objective-c - 我们可以检查 NSNotification 表吗？

> ID：10810573
> 
> 赞同：0
> 
> 时间：2012-05-30T05:43:04.490
> 
> 标签：objective-c, xcode4.2

例如，假设我想查看 NSNotification 的实际当前表是什么。我想看看在我添加通知、删除观察者等之后它是如何变化的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:45:12.347

不，你不能，至少没有一些运行时巫术。

# html - 为什么 td 宽度会被忽略而变为 100%？

> ID：10810574
> 
> 赞同：3
> 
> 时间：2012-05-30T05:43:25.003
> 
> 标签：html, html-table

好吧，这让我非常愤怒。这段代码似乎没有任何问题，但由于某种原因，将第一个 td 渲染为表格可用宽度的 100%，而剩余的 td 只是推动并扩大表格的宽度。任何人？如果您想查看完整的内容，请查看此处。这让我……快疯了。[这就是发生的事情](http://www.webedgemarketing.info/dev/msa/eg.html)

```
 <!-- FOOTER -->
<tr width="630" align="left" height="65" bgcolor="#322e39">

<!-- TEASERS -->
<td width="137" height="65" bgcolor="#322e39">
<img src="http://www.webedgemarketing.info/dev/msa/images/em-ft-tease-1.png" width="137" height="65"/>
</td>

<td width="125" height="65" bgcolor="#322e39">
<img src="http://www.webedgemarketing.info/dev/msa/images/em-ft-tease-2.png" width="125" height="65"/>
</td>

<td width="128" height="65" bgcolor="#322e39">
<img src="http://www.webedgemarketing.info/dev/msa/images/em-ft-tease-3.png" width="128" height="65"/>
</td>

<!-- SOCIAL MEDIA ICONS -->

<td width="53" height="65" bgcolor="#322e39">
<img src="http://www.webedgemarketing.info/dev/msa/images/em-ft-sm-fb.png" width="53" height="65"/>
</td>

<td width="60" height="65" bgcolor="#322e39">
<img src="http://www.webedgemarketing.info/dev/msa/images/em-ft-sm-yt.png" width="60" height="65"/>
</td>

<!-- UNSUBSCR. AND MANAGE -->
<td width="127" height="65">
<a href="#" style="text-decoration:none;">
<font face="Arial" size="1" color="#cfccd3">
Manage My Account
</font>
</a>
<br/>
<a href="#" style="text-decoration:none;">
<font face="Arial" size="1" color="#cfccd3">
Unsubscribe
</font>
</a>
</td>

</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:57:03.753

问题是因为您将页脚也放在同一个表格中，使用这样的单独表格

```
<table>
<!-- start email content-->
</table> 
```

**分开表格**

```
 <table>
    <tr align="left" height="65" bgcolor="#322e39">

    <!-- TEASERS -->
    <td width="137" height="65" bgcolor="#322e39">
    <img src="http://www.webedgemarketing.info/dev/msa/images/em-ft-tease-1.png" width="137" height="65">
    </td>

    <td width="125" height="65" bgcolor="#322e39">
    <img src="http://www.webedgemarketing.info/dev/msa/images/em-ft-tease-2.png" width="125" height="65">
    </td>

    <td width="128" height="65" bgcolor="#322e39">
    <img src="http://www.webedgemarketing.info/dev/msa/images/em-ft-tease-3.png" width="128" height="65">
    </td>

    <!-- SOCIAL MEDIA ICONS -->

    <td width="53" height="65" bgcolor="#322e39">
    <img src="http://www.webedgemarketing.info/dev/msa/images/em-ft-sm-fb.png" width="53" height="65">
    </td>

    <td width="60" height="65" bgcolor="#322e39">
    <img src="http://www.webedgemarketing.info/dev/msa/images/em-ft-sm-yt.png" width="60" height="65">
    </td>

    <!-- UNSUBSCR. AND MANAGE -->
    <td width="127" height="65">
    <a href="#" style="text-decoration:none;">
    <font face="Arial" size="1" color="#cfccd3">
    Manage My Account
    </font>
    </a>
    <br>
    <a href="#" style="text-decoration:none;">
    <font face="Arial" size="1" color="#cfccd3">
    Unsubscribe
    </font>
    </a>
    </td>

    </tr>
    </table> 
```

# android - 如何在单击android中的按钮时使屏幕变暗？

> ID：10810575
> 
> 赞同：1
> 
> 时间：2012-05-30T05:43:25.580
> 
> 标签：android, button, screen-brightness

如何在单击按钮时使当前屏幕变暗/变暗。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T06:01:24.867

```
WindowManager.LayoutParams lparams = getWindow().getAttributes();  
lparams.dimAmount=1.0f; 
dialog.getWindow().setAttributes(lparams); 
```

调光量 0 表示不调光，调光量 1.0f 表示完全调光。介于两者之间的任何值都是相应的暗淡百分比。

只需将此代码添加到您想要的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:53:58.657

这是一种解决方案，尽管它可能不是最好的：

在 res/values 下创建 styles.xml。添加以下代码：

```
<style name="Theme.Translucent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@color/cache_color</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">true</item>
 </style> 
```

注意`@color/cache_color`是`<color name="cache_color">#00000000</color>`. 现在单击您的自定义按钮应该发送一个意图到一个活动（例如，FooActivity）。所以在你的清单中声明：

```
<activity android:name="com.FooActivity" android:theme="@style/Theme.Translucent"></activity> 
```

瞧，当你的按钮的监听器被调用时，屏幕变暗了！

# visual-studio-2008 - VS2008总是重新链接

> ID：10810578
> 
> 赞同：0
> 
> 时间：2012-05-30T05:44:01.407
> 
> 标签：visual-studio-2008, visual-c++

我的 VS2008 C++ 解决方案包含大约 8 个项目，它成功构建并运行。

但在每次运行/调试会话之前，它总是首先重新链接。很烦人。

我能否就造成这种情况的常见原因获得一些建议，或者更好地了解为什么 VS2008 认为我新构建的解决方案总是过时的一些提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:14:12.250

项目依赖项设置是否正确？如何测试这个：

1.  选择解决方案（在解决方案资源管理器中）
2.  右键单击并选择“项目依赖项...”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T01:31:47.967

我建议检查项目文件的时间戳。有时，如果您从不同来源复制文件，它们的时间戳可能早于您当前时间。这将导致每次都重建。

# box-api - Box v1 api 何时停止运行？

> ID：10810585
> 
> 赞同：3
> 
> 时间：2012-05-30T05:44:51.130
> 
> 标签：box-api

我正在尝试确定应该使用哪个版本的 Box api。我的决定取决于 v1 api 的 EOL 时间线。我不想完成我的应用程序，就在应用程序发布之前（或之后不久），v1 api 停止工作。

我很乐意使用 v2 api，但我正在编写一个 C# 应用程序。由于 v1 api 有 C# SDK，使用 v1 的 api 会更方便（短期内）；但就像我说的，我担心 v1 api 的 EOL。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T21:06:59.950

我们于 2013 年 12 月开始弃用 v1 API。v2 API 在此之前一年正式发布 (GA)，并于 2012 年 3 月发布到 Beta 版。

我们已将对基于 v1 API 构建的所有活跃使用的应用程序的支持再延长 3 个月，此后 v1 API 支持已被逐步取消。

v2 API 现在已经得到充分证明，性能提高了大约 3 倍，并且使用的表面积增加了 10%-20%。

# tridion - 如何在 Tridion 的 DD4T 中使用 SiteEdit

> ID：10810587
> 
> 赞同：9
> 
> 时间：2012-05-30T05:45:05.143
> 
> 标签：tridion, tridion-2011, dd4t

谁能指导我如何在 DD4T 代码中的 Razor 模板中使用 SiteEdit 特定语法或标签？我在其中看到了与 Site Edit 相关的类，但无法理解如何在视图中使用 SiteEdit 标签，其中有一些类似于 Dreamweaver 的语法`RenderComponentField`或`tcdl:ComponentField`我们在 Dreamweaver 中使用的语法。我对 DD4T 非常陌生，并且正在使用 SiteEdit 2009 SP3 和 SDL Tridon 2011 SP1。

提前致谢。

更新：我们已经尝试了答案中提到的实现，但不幸的是，当我们在代理中访问页面时出现错误，说明“无效模板 - HTML 无效，可能是因为您的模板代码产生了无效的 HTML，例如里面的 ap 标签另一个 p 标签。使用验证器（例如 W3C 标记验证服务）检查您的 HTML，更正您的模板，然后重新发布。” 我猜这是因为我们在组件和页面模板中使用了动态页面和组件 TBB，因此 Xml 内容被推送到 html 页面中。

让我们知道如何进一步继续。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T08:17:11.797

SiteEdit 标记不会像在 Dreamweaver 模板中那样生成，您自己负责将可编辑字段的标记放置在 Razor 视图中。这样做的好处是它适用于 SiteEdit 2009 SP3 和 UI 2012 的类似功能。UI 2012 的缺点是它没有（尚未）监听您可以在组件或页面模板上设置的启用内联编辑（我们应该考虑未来的 DD4T 版本）。

一切都基于 DD4T`SiteEditHelper`类。您从页面视图（在`</body>`标签之前）开始，通过以下调用：

```
@Html.SiteEditPage(Model) 
```

这将写出页面标记，如果您在 SiteEdit_config.xml 中将样式设置为“SiteEdit2012”，它还将写出 UI 2012 所需的引导脚本。

然后对于每个组件表示和每个可编辑的组件字段，您还需要添加适当的标记。对于组件演示，您可以使用：

```
@{var ComponentPresentation = ViewBag.ComponentPresentation as IComponentPresentation;}
<div>
  @Html.SiteEditComponentPresentation(ComponentPresentation)
</div> 
```

确保将其写在 DIV 或其他可以标记组件表示边界的元素中。对于 Component Fields 类似的故事，您可以使用：

```
<div>
  @Html.SiteEditField(Model, Model.Fields["FieldName"])
  @Model.Fields["FieldName"].Value
</div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T09:23:49.287

除了对视图的更改，正如 Bart 所描述的，您还需要在 Web 应用程序的根目录中放置一个名为 SiteEdit_config.xml 的配置文件。它应该如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<siteEdit enabled="true" tridionHostUrl="http://tridion.my.com">
  <contextPublications>
    <contextPublication id="10" componentPublication="3" pagePublication="9" publishPublication="10" />
    <contextPublication id="11" componentPublication="3" pagePublication="9" publishPublication="11" />
  </contextPublications>
</siteEdit> 
```

您必须在此处列出所有活跃的出版物。DD4T 尝试将您的当前页面与正确的上下文发布相匹配（基于“id”属性）。如果找不到，SiteEdit 将被禁用。其他属性允许您控制 SiteEdit 的行为。

*   componentPublication：将在此处创建新组件
*   pagePublication：将在此处创建新页面（在 Tridion UI 2012 中未使用）
*   publishPublication：页面和组件将从这个上下文中重新发布（通常与 id 一致）

DD4T 也可以轻松配置为与 Tridion UI 2012 一起使用。只需更改配置中的第一个元素，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<siteEdit enabled="true" style="SiteEdit2012" tridionHostUrl="http://tridion.my.com">
...
</siteEdit> 
```

# c - 两个连续的 fwrite 操作

> ID：10810593
> 
> 赞同：3
> 
> 时间：2012-05-30T05:45:57.683
> 
> 标签：c, fwrite, fread

我有一个以写入模式打开的文件，如下所示：

```
int a = 10;
char b = 'm';
int y = 0;
char z;

FILE *fp = NULL;
fp = fopen("/config/gps_backup.dat","w"); 
```

我正在对文件（第一个是整数，第二个是字符）执行两个变量的 frwite，如下所示：

```
fwrite(&a,1,sizeof(int),fp);
fwrite(&b,1,sizeof(char),fp); 
```

1.  两个连续的fwrite操作会互相覆盖吗
2.  如果没有，两个连续的 fread 操作能否正确填充到我的变量中

例如：

```
fread(&y,1,sizeof(int),fp);
fread(&z,1,sizeof(char),fp); 
```

如果连续进行 fread 操作，y 和 z 变量能否保持 10 和 'm' 的值。

塔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T06:00:01.783

两个连续的 fread 或 fwrite 只要不并行执行就不会造成任何问题。

系统将维护 FILE * 中的查找指针，并确保您在连续的 fwrite 和 freads 期间获得正确的数据写入和读取。

您可以参考[手册页](http://www.manpagez.com/man/3/fwrite/)了解更多详细信息。

它在返回值部分清楚地说明了以下内容

```
 The functions fread() and fwrite() advance the file position indicator
 for the stream by the number of bytes read or written.  They return the
 number of objects read or written.  If an error occurs, or the end-of-
 file is reached, the return value is a short object count (or zero). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T05:49:00.413

不，连续写入不会相互覆盖。它们在同一个文件描述符上执行，操作系统保持跟踪并且不会覆盖。至于读取，只要您在读取之间不关闭文件描述符，两次读取就会正确地填充您的变量，前提是您正确解析了大小。

# debugging - 在 corona sdk 中调试

> ID：10810596
> 
> 赞同：0
> 
> 时间：2012-05-30T05:46:50.183
> 
> 标签：debugging, coronasdk

我正在尝试找出 Corona SDK 中的调试器。目前我正在使用最基本的打印命令技术，但我正在寻找一个可以帮助我放置断点并查看变量值的模块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:45:57.697

是的，我同意独角兽先生的观点。**CORONA CIDER IDE**提供了一些功能来帮助在 lua 中编码。他们的网站上也有试用版，你可以试试。

苹果酒的一些主要特点：

*   断点
*   全知调试
*   功能导航器
*   智能代码完成和许多其他。

您可以在他们的网站上查看：[http ://www.mydevelopersgames.com/CIDER/features.html](http://www.mydevelopersgames.com/CIDER/features.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:53:35.673

[http://www.mydevelopersgames.com/CIDER/](http://www.mydevelopersgames.com/CIDER/) - 我不确定您是否只是在寻找“模块”，但这个 IDE 具有您提到的所有功能。我个人使用它，我会说它是值得的。

# ruby-on-rails - 如何在 mongoid 的现有父文档中创建新的嵌入文档？

> ID：10810605
> 
> 赞同：0
> 
> 时间：2012-05-30T05:47:22.757
> 
> 标签：ruby-on-rails, mongoid

我正在尝试从父文档中删除嵌入文档，然后添加另一个嵌入文档，但出现错误。我的语法不正确吗？

错误

```
NoMethodError: undefined method `create' for []:Array 
```

代码

```
u = User.last
u.classes.destroy_all
u.classes.create(:name => "Philsophy") # I get the error right at this line 
```

Ruby on Rails 3.0.3
Mongoid 2.0.0.beta.20

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:17:41.233

关系方法**类**返回一个数组，而不是您的基类。要创建和嵌入对象，您需要在类上调用**新**方法，然后将其附加到**classes**。

这是一个可能与您的意图接近的工作示例。希望它可以帮助您继续前进。

```
class User
  include Mongoid::Document
  field :name, type: String
  embeds_many :classes, class_name: 'MyClass'
end

class MyClass
  include Mongoid::Document
  field :name, type: String
  embedded_in :user
end 
```

测试/单元/user_test.rb

```
require 'test_helper'

class UserTest < ActiveSupport::TestCase
  def setup
    User.delete_all
  end

  test "embedded doc" do
    User.create(name: 'Gary')
    assert_equal(1, User.count)
    u = User.last
    u.classes.destroy_all
    puts "u.classes.class: #{u.classes.class}"
    u.classes << MyClass.new(:name => 'Philosophy')
    user = User.find(u.id)
    assert_equal('Philosophy', user.classes.first.name)
    puts user.to_json
  end
end 
```

测试输出

```
Run options: --name=test_embedded_doc

# Running tests:

u.classes.class: Array
{"_id":"4fc62aeb7f11baa5b0000001","classes":[{"_id":"4fc62aeb7f11baa5b0000002","name":"Philosophy"}],"name":"Gary"}
.

Finished tests in 0.009929s, 100.7151 tests/s, 201.4302 assertions/s.

1 tests, 2 assertions, 0 failures, 0 errors, 0 skips 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-26T07:12:27.303

[https://mongoid.github.io/old/en/mongoid/v3/relations.html#embeds_many](https://mongoid.github.io/old/en/mongoid/v3/relations.html#embeds_many)

很有帮助，并指出了许多可以将新对象添加到现有对象的方法，例如：

```
band.albums.build(name: "Violator")
band.albums.new(name: "Violator") 
```

如果你有多个对象

```
band.albums.concat(
  Album.new(name: "Violator"),
  Album.new(name: "101")
) 
```

# c# - 使用 WebClient.UploadFile 时没有响应

> ID：10810606
> 
> 赞同：2
> 
> 时间：2012-05-30T05:47:24.520
> 
> 标签：c#, ftp, webclient

我正在使用 WebClient 对象上的 UploadFile 方法上传文件。上传文件后，我想根据 MSDN 得到确认（以及在 stackoverflow 上：[我应该检查 WebClient.UploadFile 的响应以了解上传是否成功？](https://stackoverflow.com/questions/4451219/should-i-check-the-response-of-webclient-uploadfile-to-know-if-the-upload-was-su)）我应该能够读取返回的字节数组，但始终为空。

我做错了什么吗？

```
WebClient FtpClient = new WebClient();
FtpClient.Credentials = new NetworkCredential("test", "test");
byte[] responseArray = FtpClient.UploadFile("ftp://localhost/Sample.rpt", @"C:\Test\Sample.rpt");
string s = System.Text.Encoding.ASCII.GetString(responseArray);
Console.WriteLine(s); //Empty string 
```

或者如果它不返回异常，它总是成功的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:15:12.547

对自己的回答：我无法理解，所以我改用 edt ftp (http://www.enterprisedt.com/)。

# ios5 - 增强现实，使用 ArView 和 pARK 示例 iOS SDK 绘制多边形

> ID：10810609
> 
> 赞同：1
> 
> 时间：2012-05-30T05:47:48.493
> 
> 标签：ios5, sdk, camera, polygon, gyroscope

我正在尝试实现一个想法，并且正在查看 Apple 的 pARK 示例的 ArView（[http://developer.apple.com/library/ios/#samplecode/pARk/Introduction/Intro.html#// apple_ref/doc/uid/DTS40011083](http://developer.apple.com/library/ios/#samplecode/pARk/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011083)）。

我想在地面上绘制一个多边形，而不是单个点（参考坐标）。当用户将设备相机指向已设置多边形坐标的区域时，多边形将出现在设备屏幕上。

作为全新的增强现实概念和目标 c，有人可以指导我并指出正确的道路。

谢谢，泽农。

# css - 更改 Nivo 滑块的位置

> ID：10810623
> 
> 赞同：0
> 
> 时间：2012-05-30T05:49:30.493
> 
> 标签：css

我正在尝试在我的博客上更改 Nivo 滑块的宽度。目前它跨越了页面包装的整个宽度，我想放置一个左右边距，使其居中并与导航栏对齐，而不是延伸到两侧。（一旦我知道如何更改包装器的宽度，我将调整图像的大小以适应。我尝试更改下面的 css 部分下的宽度。宽度会发生变化，但是滑块和图像会向左对齐.我也试过贴边距标签，但似乎不影响它。我很难过。

[我的博客](http://www.popglitch.com)

```
#slider-wrapper-full { width:1000x; 
                         height:400px; 
                         overflow:hidden; 
                         padding-top:10px; }

#slider-wrapper-full  #slider { width:1000px;  
                            height:400px; 
                            background:url(images/loading.gif) no-repeat 50% 50%; } 
```

我改变了这个： .nivoSlider { position:absolute; 溢出：隐藏；}

对此：.nivoSlider { 宽度：900px; 溢出：隐藏；}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:03:37.937

改变 nivoSlider 类的宽度

```
.nivoSlider {
      width: 900px;
} 
```

# php - CI 在 system/Common.php 中寻找 Benchmark 类

> ID：10810624
> 
> 赞同：0
> 
> 时间：2012-05-30T05:49:34.767
> 
> 标签：php, codeigniter, codeigniter-2

我在本地测试机器上没有遇到任何问题，但是在将我的项目移动到 webhost 时（我有 php 5.3，webhost 在 5.2.17。这是设置的唯一区别）我遇到了这个错误：

```
Fatal error: Class 'CI_Benchmark' not found in /home/veloxtnt/public_html/system/core/Common.php on line 174 
```

我以前从未遇到过它，而且我找不到真正在寻找基准测试类的内容`common.php`......我什至没有使用基准测试类，唯一出现的`CI_Benchmark`是 in `system/benchmark.php`。

我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:40:59.017

我已经上传了两次文件，但仍然是错误；删除所有内容并第三次重新上传新鲜内容，现在可以正常工作了。谢谢您的帮助。

# ruby-on-rails - 如果用户单击链接，则闪烁消息？

> ID：10810625
> 
> 赞同：2
> 
> 时间：2012-05-30T05:49:37.037
> 
> 标签：ruby-on-rails, redirect, devise, flash-message

我的主页有几个链接指向我网站的不同部分，这些链接仅限于已登录的用户。

如果您没有登录，那么您将被重定向到注册表单。

但是这不是很好，所以我想首先将用户重定向回我的主页。以及在屏幕顶部显示一条消息，通知他们必须先登录才能继续。

任何人都可以帮助或指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T06:34:47.740

您可以`redirect_to`在单个语句中组合和闪烁消息：

```
redirect_to root_url, alert: "You're guest. That page was for users only :-)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:35:35.483

```
#lib/custom_authentication_failure.rb
class CustomAuthenticationFailure < Devise::FailureApp 

  protected 

  def redirect_url 
    root_url
  end 
end

# /config/initializers/devise.rb
Devise.setup do |config|
...
  config.warden do |manager|
    manager.failure_app = CustomAuthenticationFailure
  end
end 
```

如果您收到未初始化的常量 CustomAuthenticationFailure 错误，并且您已将 CustomAuthenticationFailure 类放在 /lib 目录下，请确保在 application.rb 文件中自动加载 lib 文件：

```
config.autoload_paths += %W(#{config.root}/lib) 
```

您必须确保重定向用户的页面不需要身份验证。

来自[http://adamtrepanier.net/post/7622315219/devise-authenticate-user-and-redirect](http://adamtrepanier.net/post/7622315219/devise-authenticate-user-and-redirect)和[https://github.com/plataformatec/devise/wiki/_pages](https://github.com/plataformatec/devise/wiki/_pages)

*编辑：* 我假设您正在使用`authenticate_user!`, 来限制访问。

# graphics - CCTextureCache的恰当使用

> ID：10810626
> 
> 赞同：0
> 
> 时间：2012-05-30T05:49:38.293
> 
> 标签：graphics, opengl-es, cocos2d-iphone, cctexturecache

我目前正在创建一个`CCSprite`这样的：

```
CCSprite *s = [CCSprite spriteWithFile:@"image.png"]; 
```

这个精灵是`CCLayer`相对经常使用的背景图像。下面的使用`CCTextureCache`效率更高吗？

```
CCTexture2D *t = [[CCTextureCache sharedTextureCache] addImage:@"image.png"];
CCSprite *s = [CCSprite spriteWithTexture:t]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:42:23.660

不会。在内部，所有使用图像作为纹理的方法（不仅仅是 CCSprite）都会将纹理添加到 CCTextureCache。

您想要直接使用 addImage 的唯一原因是当您想要预加载某些纹理时，以便使用该纹理的节点的第一次出现不会导致游戏过程中的延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T09:10:23.513

首先，如果您查看 spriteWithFile: 方法的代码，您会看到如果在纹理缓存中找不到它，它无论如何都会将图像添加到纹理缓存中。

您必须知道的第二件事，如果您将艺术作品存储在图集中以减少内存使用（例如，图集 2048x2048 像素和 20 张不同的图片）， spriteWithTexture: 将创建具有整个巨大图集（2048x2048 像素）纹理的精灵。

# ios - 无需在 MFMailComposeViewController 中保存草稿

> ID：10810627
> 
> 赞同：3
> 
> 时间：2012-05-30T05:49:43.457
> 
> 标签：ios, cocoa-touch, mfmailcomposer

单击 MFMailComposeViewController 的取消按钮后会生成是否保存草稿的操作表。
![在此处输入图像描述](../Images/be51f4bb182411fa6b3ee9c25294d36e.png)

我不想要这个行动表我怎么能做到这一点？
提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T05:53:55.483

从[文档](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)

> **重要邮件撰写界面本身是不可定制的，并且不能由您的应用程序修改。**此外，在呈现界面后，您的应用程序不允许对电子邮件内容进行进一步的更改。用户仍然可以使用界面编辑内容，但程序更改会被忽略。因此，您必须在呈现界面之前设置内容字段的值。

我认为第一行回答了你的问题。

# java - 我可以创建在 JBOSS 服务器上运行的类的对象吗？

> ID：10810630
> 
> 赞同：0
> 
> 时间：2012-05-30T05:50:03.663
> 
> 标签：java, web-services, rest, jboss

目前正在学习 Java 中的 Web 项目。我对此有疑问。实际上我有一个任务，通过Web服务使用JBOSS Server访问动态项目的方法。

最初我没有得到我想做的事情。

在学习了一些相关的东西之后，我想如果我在 JBOSS 上运行我的项目，那么我该如何访问它的方法呢？如何创建 Web 服务以及如何使用它？

或者是这样吗？如果我在 JBOSS 服务器上运行我的项目，那么方法可以直接访问吗？

这就是为什么我想如果我能够创建在 JBOSS 服务器上运行的类的对象，那么我可以访问这些方法。

请就此给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:46:54.367

您提到了**application.wadl**文件。WADL 或[Web 应用程序描述语言](http://en.wikipedia.org/wiki/Web_Application_Description_Language)用于定义[RESTful Web 服务](http://www.ibm.com/developerworks/webservices/library/ws-restful/)的**契约接口**。请参阅链接以获取更多信息。

现在你的问题归结为：

*如何调用作为 RESTful Web 服务公开的对象的方法。*

现在你已经有了 wadl 文件。请查看一个名为[wadl2java](http://wadl.java.net/wadl2java.html)的工具。该工具将**使用您的 Application.wadl**文件并**生成 java 存根**。您可以使用这些生成的 java 类来调用部署在 JBoss 服务器中的对象上的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T06:21:47.097

你叫它的方式

> localhost:8080/proj-name/<@PATH-name in java stub or module name>/方法名

是正确的，如果服务最初对您来说工作正常，您可以通过在 web.xml 中编辑或 java 类中的路径注释来修改路径。

# html - 为什么我收到“未捕获 RangeError：超出最大调用堆栈大小”错误？

> ID：10810634
> 
> 赞同：0
> 
> 时间：2012-05-30T05:50:15.327
> 
> 标签：html

我实现了一个小脚本来测试 requestAnimationFrame 并生成“未捕获 RangeError：超出最大调用堆栈大小”错误..这是代码

```
<html>
    <head>
        <meta charset="utf-8">

        <script>

            window.onload=function(){
            if (document.createElement("canvas").getContext){
                //alert("browser supports canvas");
                //console.log(document.getElementById("canvas").getContext);
                canvas = document.getElementById("canvas");
                shape = new shapes();
                shape.drawball(canvas,5,"red");

                }
            };

function shapes(){
    this.drawtriangle = function(canvas){
        triangles = new triangle(0,0,0,200,200,200);
        triangles.draw(canvas.getContext('2d'));    
    }

    this.drawball = function(canvas,radius,color) {
        ball = new Ball(radius,color);
        ball.drawBall(canvas.getContext('2d'),canvas);
    }
}

function coordinates(x1,y1){
    this.x = x1;
    this.y = y1;
}

function angle(angle){
    this.angle = angle;
}

function Ball(radius,color){
    this.origin = new coordinates(100,100);
    this.radius = (radius === "undefined" ) ? 5 : radius;
    this.color = (color === "undefined") ? red : color;
    this.rotation = 0;
    this.index  = 0;
    this.angles = new angle(0);
    this.speed = 10;
}

Ball.prototype.drawBall = function (context,canvas){

    context.fillStyle = this.color;
    context.strokeStyle = "blue";
    context.rotate(this.rotation);
    context.beginPath();
        context.arc(this.origin.x,this.origin.y,this.radius,0,(Math.PI*2),true);
    context.closePath();
    context.fill();
    context.stroke();   this.animate(context,canvas);
}

Ball.prototype.animate = function (context,canvas){
        var that = this;console.log(".......");
        var time = new Date().getTime() * 0.002;

                this.origin.x = Math.sin( time ) * 96 + 128;

                this.origin.y = Math.cos( time * 0.9 ) * 96 + 128;
//context.clearRect(0,0,1000,1000);
        console.log("Animating ... ");  
        this.origin.x = this.origin.x + this.speed; 
        this.origin.y = this.origin.y + this.speed; 
        this.angles.angle = this.angles.angle + this.speed;

        window.webkitrequestAnimationFrame(that.drawBall(context,canvas));

}

        </script>
        <style>

            body {
                background-color: #bbb;
                }       
            #canvas {
                background-color: #fff;
            }
        </style>
    </head>

    <body>
        <canvas id="canvas" width="1000px" height="1000px">
            Your browser dows bot suppoet canvas

        </canvas>

    </body>
</html> 
```

我从网上得到了另一个代码，虽然它有递归，但它工作正常。

```
<!DOCTYPE HTML>

<html lang="en">

    <head>

        <title>RequestAnimationFrame.js example</title>

    </head>

    <body>

        <script >/**
 * Provides requestAnimationFrame in a cross browser way.
 * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
 */

if ( !window.requestAnimationFrame ) {

    window.requestAnimationFrame = ( function() {

        return window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame || // comment out if FF4 is slow (it caps framerate at ~30fps: https://bugzilla.mozilla.org/show_bug.cgi?id=630127)
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function( /* function FrameRequestCallback */ callback, /* DOMElement Element */ element ) {

            window.setTimeout( callback, 1000 / 60 );

        };

    } )();

}</script>

        <script>

            var canvas, context;

            init();

            animate();

            function init() {

                canvas = document.createElement( 'canvas' );

                canvas.width = 256;

                canvas.height = 256;

                context = canvas.getContext( '2d' );

                document.body.appendChild( canvas );

            }

            function animate() {

                requestAnimationFrame( animate );

                draw();

            }

            function draw() {

                var time = new Date().getTime() * 0.002;

                var x = Math.sin( time ) * 96 + 128;

                var y = Math.cos( time * 0.9 ) * 96 + 128;

                context.fillStyle = 'rgb(245,245,245)';

                context.fillRect( 0, 0, 255, 255 );

                context.fillStyle = 'rgb(255,0,0)';

                context.beginPath();

                context.arc( x, y, 10, 0, Math.PI * 2, true );

                context.closePath();

                context.fill();

            }

        </script>

        <div style="width:256px">

            <a href="javascript:location='view-source:' + window.location.href;">view source</a><br /><br/>

            <a href="http://dev.chromium.org/developers/design-documents/requestanimationframe-implementation">requestAnimationFrame()</a> allows modern browsers to stop drawing graphics when a tab or window is not visible. Improving overall performance and batteries on mobile devices.<br /><br />

            <a href="https://gist.github.com/838785">RequestAnimationFrame.js</a> emulates the basic usage for old browsers.

        </div>

    </body>

</html> 
```

什么可能导致此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:04:41.073

`Ball.animate`调用`Ball.drawBall`，反之亦然。因此，在任何一个完成执行之前，它们都会相互调用，直到“调用堆栈”大小超过其限制（导致错误）。

代替

```
ball.drawBall(canvas.getContext('2d'),canvas); 
```

尝试

```
setInterval(function () { ball.animate(canvas.getContext('2d'),canvas); }, 1000/60); 
```

并删除

```
this.animate(context,canvas); 
```

从`Ball.prototype.drawBall`

你的代码有很多很多问题，但这就是你问的问题。

* * *

我已经解释了简单的错误。我的注释在`/* */`评论中。还有格式和样式错误，我已经省略了。

```
<html>
<head>
<meta charset="utf-8">

<script>
window.onload=function(){
  if (document.createElement("canvas").getContext){
    //alert("browser supports canvas");
    //console.log(document.getElementById("canvas").getContext);
    canvas = document.getElementById("canvas");
    shape = new shapes();

    /* drawball should be called by a run() function, or similar */
    shape.drawball(canvas,5,"red");
  }
};

/** 
 * Is this supposed to be a singleton, or perhaps a module?
 * otherwise, you should use prototype to define these methods
 */
function shapes(){
  this.drawtriangle = function(canvas){
    /* triangles isn't defined in this file? */
    triangles = new triangle(0,0,0,200,200,200);

    /* I'd store a reference to context as a property of the function (class)
     * aka a "static variable" */ 
    triangles.draw(canvas.getContext('2d'));    
  }

  this.drawball = function(canvas,radius,color) {
    ball = new Ball(radius,color);

    /* same here */
    ball.drawBall(canvas.getContext('2d'),canvas);
  }
}

/**
 * this is reasonable, but don't pluralize a class name unless you mean it
 * I'd maybe call it "Point" or "Vec2d"
 */
function coordinates(x1,y1){
  this.x = x1;
  this.y = y1;
}

/* so you'd use this object as angle.angle?? Just store it as a scalar.*/
function angle(angle){
  this.angle = angle;
}

/* This is correct, I'm sure it's also copy/pasted */
function Ball(radius,color){
  this.origin = new coordinates(100,100);
  this.radius = (radius === "undefined" ) ? 5 : radius;
  this.color = (color === "undefined") ? red : color;
  this.rotation = 0;
  this.index  = 0;
  this.angles = new angle(0);
  this.speed = 10;
}

/**
 * Ball.drawBall()? I'd use Ball.draw()
 * I'd again store context in the function object, and you don't need to
 * pass canvas
 */
Ball.prototype.drawBall = function (context,canvas){
  context.fillStyle = this.color;
  context.strokeStyle = "blue";
  context.rotate(this.rotation);
  context.beginPath();
  context.arc(this.origin.x,this.origin.y,this.radius,0,(Math.PI*2),true);
  context.closePath();
  context.fill();
  context.stroke();

  /* There is no reason to have your whole animation call here,
   * there should only be code to _draw_ the _ball_ (like the function says) */
  this.animate(context,canvas);
}

/* This makes sense for a singleton Ball, but in this case animate should be
 * on a containing object. The Ball doesn't animate anything, the App does */
Ball.prototype.animate = function (context,canvas){

  /* I can't explain this. I'm 99.999% sure it's not what you want. */
  var that = this;console.log(".......");

  var time = new Date().getTime() * 0.002;

  this.origin.x = Math.sin( time ) * 96 + 128;

  this.origin.y = Math.cos( time * 0.9 ) * 96 + 128;
  //context.clearRect(0,0,1000,1000);
  console.log("Animating ... ");  
  this.origin.x = this.origin.x + this.speed; 
  this.origin.y = this.origin.y + this.speed; 
  this.angles.angle = this.angles.angle + this.speed;

  /* you complete your cycle here (animate calls drawBall and vice versa) */
  window.webkitrequestAnimationFrame(that.drawBall(context,canvas));

}
</script>
<style>

body {
  background-color: #bbb;
}       
#canvas {
  background-color: #fff;
}
</style>
</head>
<body>
<canvas id="canvas" width="1000px" height="1000px">
Your browser dows bot suppoet canvas
</canvas>
</body>
</html> 
```

# sql - 查询选择当月周末和公共假期的月份和编号

> ID：10810642
> 
> 赞同：0
> 
> 时间：2012-05-30T05:51:26.077
> 
> 标签：sql, tsql, sql-server-2005

我的数据库表 Holiday 包括字段 ad Holidaydate->datetime 、 WeekendHoliday->bit、PublicHoliday->bit 我想要特定月份年份的周末假期和 publicholiday 的编号。

我的表值是（示例）

```
Holidaydate       WeekendHoliday       PublicHoliday 
-----------       --------------       -------------
4/02/2012             true                 false
4/20/2012             true                 false
5/3/2012              true                 False
5/30/2012             false                true
4/05/2013             false                true 
```

所以现在输出应该是这样的：

```
year      Month   count(weekend)   count(public)
----      -----   --------------   -------------
2012      April      2               0
2012      May        1               1
2013      April      0               1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:58:03.250

我强烈建议对此类查询使用[日历表。](http://weblogs.sqlteam.com/dang/archive/2010/07/19/calendar-table-and-datetime-functions.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:09:21.717

```
 SELECT year(holidaydate),month(holidaydate), 
            sum(case Weekend when true then 1 else 0 end) wkEnd, 
            sum(case PublicHoliday when true then 1 else 0 end) pubHol
      FROM Holiday 
      GROUP BY year(holidaydate),month(holidaydate) 
```

我没有可用的 SQL 服务器。这是在 mysql 上测试的。这里的年和月是返回日期的年和月的函数。*CASE*的语法在数据库中应该相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T07:24:27.937

这是[聚合](http://msdn.microsoft.com/en-us/library/ms173454.aspx "聚合函数 (Transact-SQL)")数据的一种方法：

```
WITH partitioned AS (
  SELECT
    MonthDate = DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0),
    WeekendHoliday,
    PublicHoliday
  FROM Holiday
)
SELECT
  Year           = YEAR(MonthDate),
  Month          = DATENAME(MONTH, MonthDate),
  Weekends       = COUNT(NULLIF(WeekendHoliday, 'false')),
  PublicHolidays = COUNT(NULLIF(PublicHoliday , 'false'))
FROM partitioned
GROUP BY
  MonthDate 
```

`partitioned` [CTE](http://msdn.microsoft.com/en-us/library/ms175972.aspx "WITH common_table_expression (Transact-SQL)") 将[每个日期替换](https://stackoverflow.com/questions/1504664/t-sql-code-to-get-a-datetime-contain-only-month-and-year-from-any-datetime "获取 DateTime 的 T-SQL 代码仅包含来自任何 DateTime 的月份和年份")为同一月份的第一天，然后该值用于[分组](http://msdn.microsoft.com/en-us/library/ms177673.aspx "分组依据 (Transact-SQL)")和[派生年份](http://msdn.microsoft.com/en-us/library/ms186313.aspx "年份 (Transact-SQL)")和[月份名称](http://msdn.microsoft.com/en-us/library/ms174395.aspx "日期名称 (Transact-SQL)")。每个都[`NULLIF()`](http://msdn.microsoft.com/en-us/library/ms177562.aspx "NULLIF (Transact-SQL)")将每个`'false'`( `0`) 值转换为`NULL`，因此相应的[`COUNT()`](http://msdn.microsoft.com/en-us/library/ms175997.aspx "计数 (Transact-SQL)")将其省略。因此，仅计算`'true'`( `1`) 值。

# c++ - 何时是刷新输出缓冲区和一些基本 C++ 的好时机

> ID：10810643
> 
> 赞同：2
> 
> 时间：2012-05-30T05:51:34.553
> 
> 标签：c++, buffer

我正在阅读加速 C++，作者写道：

> 当您编写可能需要很长时间运行的程序时，在适当的时候刷新输出缓冲区是一个重要的习惯。否则，程序的某些输出可能会在您的程序编写它和您看到它之间的很长一段时间内在系统缓冲区中停滞不前

如果我误解了这些概念中的任何一个，请纠正我：

*   缓冲区：一块随机存取存储器，用于临时保存输入或输出。
*   冲洗：释放已分配给某些 ..umm 的随机存取内存。

我找到了这个解释：

> 刷新输出设备意味着需要立即完成所有前面的输出操作。这与缓冲问题有关，缓冲是操作系统使用的一种优化技术。粗略地说，操作系统保留（并且通常行使）将数据“待机”的权利，直到它决定它有足够大的数据量来证明将数据发送到屏幕的相关成本是合理的。然而，在某些情况下，我们需要保证程序中执行的输出操作在程序执行的给定点完成，因此我们刷新输出设备。

继续那个解释，我读到导致系统刷新缓冲区的三个事件：

1.  缓冲区已满，将自动刷新
2.  可能会要求库从标准输入流中读取 *是标准输入流，例如`std::cin >> name ;`
3.  第三种情况是我们明确告诉它。*我们如何明确地告诉它？*

尽管我不觉得完全掌握以下内容：

*   什么是输出缓冲区与只是一个缓冲区和可能的其他类型的缓冲区......
*   刷新缓冲区意味着什么。它只是意味着清除内存吗？
*   上面解释中提到的“输出设备”是什么
*   最后，在这一切之后，什么时候是冲洗缓冲区的好时机……嗯，这听起来并不愉快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:53:06.500

要冲洗`std::ostream`，请使用`std::flush`操纵器。IE

```
std::cout << std::flush; 
```

请注意，`std::endl`已经刷新了流。因此，如果您习惯于以它结束插入，则无需执行任何其他操作。请注意，这意味着如果由于刷新过多而导致性能不佳，则需要从插入切换`std::endl`到插入换行符：`'\n'`。

流是字符序列（即类型的事物`char`）。输出流是您写入字符的流。典型的应用程序是将数据写入文件、在屏幕上打印文本或将它们存储在`std::string`.

流通常具有这样的特性，即一次写入 1024 个字符比一次写入 1 个字符 1024 次要快一个数量级（或更多！）。“缓冲”概念的主要目的之一是以方便的方式处理这个问题。与其直接写入您真正希望字符去的任何内容，不如写入缓冲区。然后，当您准备好时，您“刷新”缓冲区：将字符从缓冲区移动到您想要的位置。或者，如果您不关心精确的细节，您可以使用自动刷新自身的缓冲区。例如，在 an 中使用的缓冲区`std::ofstream`通常是固定大小的，并且会在其满时刷新。

你问什么时候是冲洗的好时机？我说你过早地优化。:) 与其寻找完美的冲洗时间，不如经常这样做。进行足够多的刷新，以便足够频繁地刷新，以至于您永远不会发现自己处于例如您想要查看文件中的数据但它未写入缓冲区中的情况。然后，如果确实有太多的冲洗会损害性能，那就是你花时间研究它的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:08:36.303

我认为作者的意思是流缓冲区。刷新缓冲区的好时机实际上取决于您的代码做什么，它的构造方式和缓冲区的分配方式，以及它的初始化范围。

对于流和输出缓冲区，看看[这个](http://www.cplusplus.com/reference/iostream/ostream/)。

是的，标准输入流意味着使用 >> 运算符。（大多）

您可以通过调用来明确告诉流缓冲区刷新[`ofstream::flush`](http://www.cplusplus.com/reference/iostream/ostream/flush/)，当然其他类型的缓冲区有自己的显式刷新方法，有些可能需要手动实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:21:05.547

您使用 . 显式刷新流`your_stream.flush();`。

> 什么是输出缓冲区与只是一个缓冲区和可能的其他类型的缓冲区......

缓冲区通常是一块内存，用于保存等待处理的数据。一种典型的用途是刚刚从流中读取的数据，或等待写入磁盘的数据。无论哪种方式，一次读取/写入大块数据通常更有效，因此一次读取/写入整个缓冲区，但客户端代码可以方便地读取/写入任何数量（例如，一个字符或一个一次一行）。

> 刷新缓冲区意味着什么。它只是意味着清除内存吗？

那要看。对于输入缓冲区，是的，这通常意味着只清除缓冲区的内容，丢弃已读入缓冲区的任何数据（尽管它通常不会清除 RAM ——它只是将其内部簿记设置为缓冲区为空）。

对于输出缓冲区，刷新缓冲区通常意味着强制将缓冲区中的任何数据立即写入关联的流。

> 上面解释中提到的“输出设备”是什么

当您写入数据时，它是您最终写入的任何设备。这可能是磁盘、屏幕等上的文件。

> 最后，在这一切之后，什么时候是冲洗缓冲区的好时机……嗯，这听起来并不愉快。

当您完成一段时间的数据写入时，一个明显的合适时机是正确的，并且您将返回一段时间不产生任何输出（至少到同一目的地）的处理（或其他）。如果您之后可能会产生更多数据到同一个地方，您不希望刷新缓冲区 - 但您也不希望将数据留在缓冲区中，因为在您之前会有明显的延迟填充缓冲区（或其他），以便将数据写入其目的地。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T05:58:59.367

这在很大程度上取决于应用程序的类型，但一条经验法则是在写入一条记录后刷新。对于通常在每一行之后的文本，对于每个对象之后的二进制数据。如果性能似乎很慢，则刷新您写入的每条 X 记录，并尝试使用 X，直到您对性能感到满意时找到一个数字，而 X 不够大，因此您会丢失太多数据，以防万一崩溃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T08:19:37.463

一一回答你的问题：

*   通常，缓冲区只是用于临时保存数据的一块内存。当写入 `std::ofstream` 时，字符被发送到 `std::filebuf`，默认情况下，通常会将它们简单地放入缓冲区而不是立即输出到系统。当使用 `std::ofstream` 时，实际上有两个缓冲区在运行，一个在 `ofstream` 中（在您的进程中），一个在操作系统中。
*   该标准将底层数据称为外部支持上的字符序列，缓冲区表示该序列的窗口；输出数据可能只更新缓冲区中的图像，刷新将缓冲区中的图像与操作系统拥有的数据图像“同步”。如果您要输出到真实文件，这是一个相当好的描述，但如果您直接输出到串行端口或类似的东西，操作系统不维护任何“图像”数据。基本上，如果您已将数据写入尚未传输到操作系统的流中，则刷新缓冲区会将其传输到操作系统（这意味着 `ofstream` 可以重用缓冲内存以进行进一步缓冲）。通常冲洗缓冲液（即 在我知道的所有实现上）只与操作系统同步（这是标准所要求的）；它不能确保数据已实际写入磁盘。根据应用程序，这可能是也可能不是问题。
*   “输出设备”是系统想要的任何东西。一个文件、屏幕上的一个窗口，或者在旧时代或更简单的系统、打印机或串行端口上。而且您引用的解释非常具有误导性（或者更确切地说不是在谈论“ofstream”），因为刷新“ofstream”并不能确保所有前面的输出操作都已完全完成。它只确保流缓冲区中的数据已传输到（与）操作系统同步。在大多数情况下（至少在 Windows 和 Unix 下），这意味着数据已从一个缓冲区（在您的进程中）移动到另一个缓冲区（在操作系统中）。
*   合适的时机在很大程度上取决于应用程序正在做什么。作为一般规则，我建议经常刷新，这样如果您的程序崩溃，您可以或多或少地看到它已经走了多远。（请记住，输出 `std::endl` 刷新。对于大多数简单的使用，只使用 `std::endl` 而不是 `'\n'` 就足够了。）至少有两种情况需要您考虑更多然而，关于冲洗；如果您在一个块中输出大量数据（即在输出之间只进行格式化），过度刷新会大大减慢输出速度。在这种情况下，您可能需要考虑使用 `'\n'` 而不是 `std::endl`。另一个是用于日志记录之类的事情，您希望数据立即出现，

`std::ostream::flush()`如果您调用或 ，数据将被显式刷新`std::ofstream::close()`。（当然，在后一种情况下，您以后不能写入更多数据。）

还要注意，由于数据在刷新之前实际上并未“写入”，因此在此之前无法检测到大多数可能的错误。特别是，类似：

```
if ( output << data ) {
    //  succeeded...
} 
```

实际上不起作用；报告的“成功”`ofstream`只是它已成功将字符复制到其缓冲区中（几乎不会失败）。

写入大块数据时，通常的习惯用法是不中断地写入，不刷新，然后关闭文件并检查错误。如果您希望数据立即出现，那么在中断写入时这是不合适的，并且它的缺点是如果您的程序崩溃，您“写入”的一些数据将会消失，这会使调试变得更加困难。

# iphone - 底部带有类似标签栏的菜单的 iphone 导航应用程序

> ID：10810644
> 
> 赞同：1
> 
> 时间：2012-05-30T05:51:47.620
> 
> 标签：iphone, menu, uinavigationcontroller, tabbar

我有一个基于导航的应用程序。在主屏幕中，它有 5 个按钮，根据按下哪个按钮，我们使用导航控制器移动。我想要的是在其余视图（主屏幕除外）中有一个类似选项卡的菜单，其中有 5 个按钮，每个按钮与主屏幕中的按钮相同（推送该视图）。是否有任何库可以创建这样的菜单，或者我必须由 mySelf 创建它？

- 如果我自己做，假设我创建了一个高度为 60 像素的笔尖，我如何在我的其他视图的每个笔尖中添加这个笔尖，以便做出正确的设计？（抱歉，这是一个菜鸟问题，但直到现在我只添加了通用 iphone 组件 :)）。

# php - 从其他机器访问 php 应用程序时禁止访问

> ID：10810648
> 
> 赞同：1
> 
> 时间：2012-05-30T05:52:08.593
> 
> 标签：php, web, easyphp

我正在使用easyphp5.3.6.0 来运行php 应用程序。我已将 php 应用程序文件夹保存在 www 目录中。现在，当我尝试通过提供 127.0.0.1 IP 来访问它时，它工作正常，但是当我尝试使用我的实际 IP 地址运行它时出现错误

“禁止访问！您无权访问请求的对象。它要么是读保护的，要么是服务器不可读的。”

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:03:47.947

您可能在路由器后面。您需要在路由器的配置页面中转发端口（我猜是默认端口 80）。

你可以[在这里](http://www.portforward.com)输入他们有关于端口转发的信息。

我也不认为你的意思是 phpMyAdmin，据我所知它是一个 mySQL 管理器

# android - 在 android eclipse 上将数据从一个屏幕传输到另一个屏幕

> ID：10810651
> 
> 赞同：-1
> 
> 时间：2012-05-30T05:52:27.660
> 
> 标签：android, eclipse, screen, switching

嗨，我是 java 和 android 的新手。

假设`demo()`screenone 的函数将`Textview`在同一屏幕上显示一些值（screenone）。

但我需要将结果值显示到下一个屏幕，即。（屏幕二）

```
public void demo(){
{
 .....
 .....
} 
```

* * *

所以我已将这些行包含在

**screenoneActivity.java**

```
Intent nextScreen = new Intent(getApplicationContext(), SecondtwoActivity.class);
nextScreen.putExtra("","");
startActivity(nextScreen);
demo(); 
```

**ScreentwoActivity.java**

```
@Override
protected void onCreate(Bundle savedInstanceState) 
{

    super.onCreate(savedInstanceState);

    setContentView(R.layout.main1);

    TextView txtName = (TextView) findViewById(R.id.textView1);

    Intent i = getIntent();

    txtName.setText(name); 
```

到目前为止我做了这些事情。我不知道如何将数据从`demo()`函数传输到下一个屏幕。

谁能给我线索或想法来实现这一目标。

非常感谢！..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:57:50.043

您需要向 putExtra 方法参数发送一些值，以便能够从中获得一些东西。

在您的第一个活动（A）中：

```
Intent i = new Intent(A.this, B.class);
i.putExtra("someName", variableThatYouNeedToPass);
startActivity(i); 
```

在您的第二个活动（B）中：

```
Bundle extras = getIntent().getExtras();
int fetchedVariable = extras.getInt("someName"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:08:42.807

在 ScreenoneActivity

```
Intent act2=new Intent(this,Activity2.class);
    act2.putExtra("A",a);
    startActivity(act2); 
```

在 ScreentwoActivity 类中

```
Intent i = getIntent();
Bundle extras = getIntent().getExtras(); 
int a = extras.getInt("A");
txtName.setText(a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T05:59:42.740

在 demo() 函数中编写以下代码：

```
Intent nextScreen = new Intent(getApplicationContext(), SecondtwoActivity.class);
       nextScreen.putExtra("","");
       startActivity(nextScreen); 
```

`nextScreen.putExtra("","");`提供一些键和值，例如：

```
nextScreen.putExtra("name","ABC"); 
```

现在在 SecondActivity 中，编写：

```
@Override
protected void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);

    setContentView(R.layout.main1);

    TextView txtName = (TextView) findViewById(R.id.textView1);

    Intent i = getIntent();
    Bundle bundle = i.getExtras();

    txtName.setText(bundle.getString("name")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T05:57:23.437

在 onCreate ：

```
Bundle extras = getIntent().getExtras(); 
String value;

if (extras != null) 
{
    value= extras.getString("key");
} 
```

[https://stackoverflow.com/questions/10752501/how-can-we-go-to-next-page-in-android/10752516#10752516](https://stackoverflow.com/questions/10752501/how-can-we-go-to-next-page-in-android/10752516#10752516)

谷歌这是非常基本的......

android使用意图....

[沃格拉文章](http://www.vogella.com/articles/AndroidIntent/article.html)

在活动 1-

```
Intent i = new Intent(this, ActivityTwo.class);
i.putExtra("Value1", "This value one for ActivityTwo ");
i.putExtra("Value2", "This value two ActivityTwo");

startActivity(i); 
```

在活动 2 中 - 在 onCreate 函数中

```
Bundle extras = getIntent().getExtras();

if (extras == null) {
        return;
        }
// Get data via the key
String value1 = extras.getString(Intent.EXTRA_TEXT);
if (value1 != null) {
    // Do something with the data
} 
```

# ruby-on-rails - act_as_tree 和 rails 3.2.3，不兼容？

> ID：10810652
> 
> 赞同：3
> 
> 时间：2012-05-30T05:52:29.610
> 
> 标签：ruby-on-rails, acts-as-tree

我正在使用 Rails 3.2.3 和acts_as_tree 1.1.0。我一直在用早期版本的 Rails 3（例如 3.1.1）将acts_as_tree 用于少数不同的项目，没有任何问题，但对于这个版本它根本不起作用。如果是因为 3.2.3 或我使用的其他东西，我无法确认。

这是我尝试过的，但无济于事：-在几个不同的控制器上使用acts_as_tree-仅使用acts_as_tree（没有顺序语句）-运行捆绑安装和捆绑更新-仔细检查parent_id是否存在并且是整数

首先，当我尝试这个时，我第一次尝试：

```
undefined method `acts_as_tree' 
```

重新加载页面（而不做任何其他事情）导致：

```
undefined method `key?' for nil:NilClass 
```

然后重新启动服务器导致启动失败（应用程序将崩溃并且无法启动）并出现以下错误：

```
/Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require': /Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:78: odd number list for Hash (SyntaxError)
        foreign_key:   "parent_id",
                    ^
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:78: syntax error, unexpected ':', expecting '}'
        foreign_key:   "parent_id",
                    ^
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:78: syntax error, unexpected ',', expecting kEND
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:79: Can't assign to nil
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:80: syntax error, unexpected ':', expecting '='
        counter_cache: nil,
                      ^
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:80: Can't assign to nil
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:81: syntax error, unexpected ':', expecting '='
        dependent:     :destroy
                  ^
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:82: syntax error, unexpected '}', expecting kEND
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:86: syntax error, unexpected ':', expecting kEND
      belongs_to :parent, class_name:    name,
                                     ^
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:87: syntax error, unexpected ':', expecting '='
        foreign_key:   configuration[:foreign_key],
                    ^
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:88: syntax error, unexpected ':', expecting '='
        counter_cache: configuration[:counter_cache],
                      ^
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:89: syntax error, unexpected ':', expecting '='
        inverse_of:    :children
                   ^
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:91: syntax error, unexpected ':', expecting kEND
      has_many :children, class_name:  name,
                                     ^
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:92: syntax error, unexpected ':', expecting '='
        foreign_key: configuration[:foreign_key],
                    ^
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:93: syntax error, unexpected ':', expecting '='
        order:       configuration[:order],
              ^
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:94: syntax error, unexpected ':', expecting '='
        dependent:   configuration[:dependent],
                  ^
/Library/Ruby/Gems/1.8/gems/acts_as_tree-1.1.0/lib/acts_as_tree.rb:95: syntax error, unexpected ':', expecting '='
        inverse_of:  :parent
                   ^
    from /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `each'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
    from /Users/Christoffer/Documents/Webbprojekt/rails/Presenttips/config/application.rb:7
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:53:in `require'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:53
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:50
    from script/rails:6:in `require'
    from script/rails:6 
```

这让我猜测 Rails 3.2.3 和acts_as_tree 存在兼容性问题。我不知道如何验证这一点。

我有什么选择？我不一定需要使用 Rails 3.2.3，但如果我降级到 3.1.1。（我试过了）我遇到了其他看起来更糟的问题（“文件设置”似乎不一样）。

那么，我有哪些选择？你是否也有过这样的经历？act_as_tree 有问题，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T06:01:58.040

好像有一个2年前的open

> 2 年前打开此问题不适用于 Rails 2.3.8 [https://github.com/rails/acts_as_tree/issues/1](https://github.com/rails/acts_as_tree/issues/1)

选项

act_as_tree_rails3`gem install acts_as_tree_rails3`

或者

嵌套集[https://github.com/skyeagle/nested_set](https://github.com/skyeagle/nested_set)

**编辑：**

你是对的，新位置是[https://github.com/amerine/acts_as_tree](https://github.com/amerine/acts_as_tree)同一作者

有评论

> *如果 Rails/ActiveRecord 早于 3.0，我们将不再支持 Ruby 1.8 或版本。如果您使用的 ActiveRecord 版本早于 3.0，* 请使用 0.1.1。
> 
> 展望未来，我们将尽最大努力支持最新版本的 ActiveRecord 和 Ruby

这就是为什么他们不理会那些公开的问题

# iphone - 使用 Apple 个人开发者帐户创建的 APP ID 数量

> ID：10810653
> 
> 赞同：4
> 
> 时间：2012-05-30T05:52:32.817
> 
> 标签：iphone, app-id

一个苹果个人开发者账号可以创建多少个APP ID？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T05:53:40.230

应用 ID 没有限制。但是您可以注册 100 台设备来测试您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:56:38.653

开发者帐户受限于设备计数 (100) 而不是应用程序。小逻辑是您可以使用单个开发人员帐户创建“N”个应用程序。

# google-maps - 类似的地址在 Google 地图中相互重叠

> ID：10810655
> 
> 赞同：1
> 
> 时间：2012-05-30T05:52:45.670
> 
> 标签：google-maps, openlayers

我在我的学术项目中使用谷歌地图，我为用户提供了地图以输入他们的地址，直到它工作正常。在主页上我需要显示地图，在地图上我必须将用户地址显示为标记（红点）。

![标记在谷歌地图上相互重叠](../Images/07d35120cd34aee3a8611d91dd017810.png) 假设用户#1 有 H.NO:45-6-3,Abids,Hyderabad 和用户#2 有 H.No:8-9-54,Abids,Hyderabad。这两个地址彼此靠近，它们是重叠的。我需要在地图上显示两个单独的标记。我应该怎么做？我正在使用 OpenLayers 地图，我不想使用集群。

# c# - 使用 DBNull 单元将数据集转换为 xml

> ID：10810664
> 
> 赞同：1
> 
> 时间：2012-05-30T05:54:12.743
> 
> 标签：c#, asp.net, xml, dataset

我需要将 DataSet 导出到 XML，但所有具有 DBNull 值的单元格都会从最终的 XML 文件中消失。DBNull 值位于表的中间，因此列（在具有 dbnull 的行中）会移动并破坏整个表。

```
public static string GetXmlFromDataSet(DataSet ds)
            {
                try
                {
                    StringWriter sw = new StringWriter();
                    ds.WriteXml(sw);
                    string outputXml = sw.ToString();

                    return outputXml;
                }
                catch (Exception ex)
                {
                    return ex.ToString();
                }
            } 
```

然后 XslCompiledTransform 使文件对 MS Excel 可读。但如果没有一些细胞，它就无法使用。我需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:15:27.903

我编写了 XML 解析器，它解决了这个问题。当`DataSet.WriteXML`看到`DBNULL`数据集中的值时，它不会记录到 XML 文件中。

标准方法`DataSet.WriteXML`有一个属性`XmlWriteMode`。如果您`XmlWriteMode.WriteSchema`在 XML 文件的顶部使用 WriteXML 方法记录架构。但是，如果您将它转换为 XML 到 DataSet，它就可以工作。在我的情况下，XML 文件使用 转换为 Excel `XslCompiledTransform`，因此架构无法帮助我。

这是我的解决方案的代码：

```
try
{
   StringWriter sw = new StringWriter();

   //ds.WriteXml(sw, XmlWriteMode.IgnoreSchema);
   DataTable dt = ds.Tables[0];
   sw.Write(@"<NewDataSet>");
   foreach (DataRow row in dt.Rows)
   {
      sw.Write(@"<Table>");
      foreach (DataColumn col in dt.Columns)
      {
         sw.Write(@"<" + XmlConvert.EncodeName(col.ColumnName) + @">");
         sw.Write(row[col]);
         sw.Write(@"</" + XmlConvert.EncodeName(col.ColumnName) + @">");
      }
      sw.Write(@"</Table>");
   }
   sw.Write(@"</NewDataSet>");
   return sw.ToString();
}
catch (Exception ex)
{
   return ex.ToString();
} 
```

# objective-c - 对象动画

> ID：10810665
> 
> 赞同：0
> 
> 时间：2012-05-30T05:54:33.373
> 
> 标签：objective-c, ios, animation, cabasicanimation

我在objective-c上编程。我可以使用 CABasicAnimation 为同时使用 2 个动画的对象创建动画吗？例如，对象同时缩放和晃动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:01:38.130

绝对地。实际上，您可以使用 CAKeyFrame、CABasic 甚至 UIView 动画来实现。这应该可以很好[地从这个答案修改](https://stackoverflow.com/a/1632493/945847)

```
- (void)earthquake:(UIView*)itemView
{
    CGFloat t = 2.0;

    CGAffineTransform leftQuake  = CGAffineTransformTranslate(CGAffineTransformIdentity, t, -t);
    CGAffineTransform rightQuake = CGAffineTransformTranslate(CGAffineTransformIdentity, -t, t);

    itemView.transform = leftQuake;  // starting point

    [UIView beginAnimations:@"earthquake" context:itemView];
    [UIView setAnimationRepeatAutoreverses:YES]; // important
    [UIView setAnimationRepeatCount:5];
    [UIView setAnimationDuration:0.07];
    [UIView setAnimationDelegate:self];
    itemView.transform = rightQuake; // end here & auto-reverse
    [UIView commitAnimations];
    [UIView animateWithDuration:1.00 animations:^{
         itemView.alpha = 0.0f;
    }];
} 
```

# php - 以无序列表格式显示数据库记录

> ID：10810668
> 
> 赞同：1
> 
> 时间：2012-05-30T05:54:56.033
> 
> 标签：php

我想以`<ul> <li>`格式显示我的数据库记录。我使用免费模板来设计我的前端。我正在读取这样的数据库数据

```
while ($row = mysql_fetch_assoc($result)) {
    $categoryname = $row['category_name'];
} 
```

在循环中我必须显示这样的记录

```
<li class="odd"><a href="services.html">Processors</a></li>
         <li class="even"><a href="services.html">Motherboards</a></li>
        <li class="odd"><a href="1_service.html">Processors</a></li>
        <li class="even"><a href="2_services.html">Motherboards</a></li>
         <li class="odd"><a href="3_services.html">Desktops</a></li>
        <li class="even"><a href="4_services.html">Laptops & Notebooks</a></li>
         <li class="odd"><a href="5_services.html">Processors</a></li>
         <li class="even"><a href="6_services.html">Motherboards</a></li>
        </ul> 
```

怎么做这样的。请建议

如果我想像这样为每个喜欢提供单独的页面链接

```
<li class="odd"><a href="services.html">Processors</a></li>
         <li class="even"><a href="services.html">Motherboards</a></li>
        <li class="odd"><a href="services.html">Processors</a></li>
        <li class="even"><a href="services.html">Motherboards</a></li>
         <li class="odd"><a href="services.html">Desktops</a></li>
        <li class="even"><a href="services.html">Laptops & Notebooks</a></li>
         <li class="odd"><a href="services.html">Processors</a></li>
         <li class="even"><a href="services.html">Motherboards</a></li>
        </ul> 
```

那怎么办呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T05:58:54.313

您需要观察迭代以判断您是处于偶数还是奇数周期：

```
$output  = "";
$counter = -1;

while ( $row = mysql_fetch_assoc( $result ) ) {
  $class = $counter++ % 2 === 0 ? "even" : "odd" ;
  $href  = $row["category_url"];
  $text  = $row["category_name"];
  $output .= "<li class='{$class}'><a href='foo?id={$href}'>{$text}</a></li>";
}

echo "<ul>{$output}</ul>"; 
```

### 原生 CSS 解决方案

确定哪些元素是奇数，哪些是偶数并不一定需要用 PHP 来完成。事实上，它并不真正需要添加一个类名来设置每个列表项的样式。CSS 有一个花哨的选择器，`:nth-child(n)`可以为你处理这个问题：

```
li:nth-child(even) {
    background: #f1f1f1;
    color: #CCC;
} 
```

演示：http: [//jsfiddle.net/rquXK/](http://jsfiddle.net/rquXK/)

这意味着您可以避免确定 的值`$class`，并将该逻辑移至您的 CSS。请记住，一些较旧的浏览器不支持该功能。

支持表：[http ://caniuse.com/#feat=css-sel3](http://caniuse.com/#feat=css-sel3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:59:25.747

```
<?php

$index = 0;
while ($row = mysql_fetch_assoc($result)) {
    $className = ($index %2 == 0) ? "even" : "odd" ;
    $categoryName = $row['category_name'];
?>

<li class="<?php echo $className;?>"><a href="services.html"><?php echo $categoryName;?> </a></li>

<?php 
  $index++
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T05:59:31.597

只需保留一个计数器，在循环中递增它，如果它是奇数，则将类设置为奇数，如果是偶数，则将类设置为偶数。所以基于@bsdnoobz 的回答：

```
$i = 0;
while ($row = mysql_fetch_assoc($result)) {
    $class = $i % 2 == 0 ? 'even' : 'odd';
    echo "<li class='$class'>".$row['category_name'].'</li>';
    $i++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T05:57:27.873

```
$i = 0;
while ($row = mysql_fetch_assoc($result)) {
   echo '<li class="'.($i++ % 2 == 0 ? 'odd' : 'even').'">'.$row['category_name'].'</li>';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T06:01:58.377

```
$parentid = 0; // assuming that 0 is the main category.

get_sub_cats($parentid);

function get_sub_cats($parentid) {
    $sql = "SELECT * FROM table_name WHERE parent_id = ".$parentid.""; 
    $run = mysql_query($sql);

    echo '<ul>';

    while ($rec = mysql_fetch_assoc($run)) { 
        echo '<li />'.$rec['study']; 
        get_sub_cats($rec['id']);
    }

    echo '</ul>';

} 
```

希望它有效....

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T07:51:00.067

使用该`class`属性来表示偶数或奇数行/条目表明您正在使用 CSS 来设置它们的样式。

根据您仍需要支持的浏览器，这可能是必要的。但是，通常它不再是：

> *警告：*在撰写本文时（2003 年 2 月），主要浏览器还不支持“nth-child”选择器（2001 年 11 月推出）

[http://caniuse.com/#search=nth-child](http://caniuse.com/#search=nth-child)

CSS 示例：

```
li:nth-child(even) {background: #CCC}
li:nth-child(odd) {background: #FFF} 
```

请参阅[CSS：偶数和奇数规则](http://www.w3.org/Style/Examples/007/evenodd.en.html)

# java - BufferedReader 类在 Android Activity 中不起作用

> ID：10810671
> 
> 赞同：0
> 
> 时间：2012-05-30T05:55:28.280
> 
> 标签：java, android, mysql, servlets, bufferedreader

我想通过我的 android 应用程序通过 java servlet 访问本地主机上的 mysql 数据库。我能够通过 java 类访问数据库，但是在我的 android 活动中尝试相同的代码时，它不起作用。下面是我的 java servlet 的代码，我通过它成功访问了我的数据库的 java 类和不起作用的 android 代码。在我的 LogCat 日志中，我正在获取所有日志，直到 BufferedReader 类。另外请告诉我我可以在 Android 中使用哪个小部件来显示响应字符串。我现在知道我的响应字符串将包含 HTML 代码，但这没关系我只想知道我是否能够访问我的数据库。谢谢你。Java Servlet 代码：

```
package org.spark.servlet;

import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class HelloServlet2
 */
@WebServlet("/HelloServlet2")

public class HelloServlet2 extends HttpServlet {
    private static final long serialVersionUID = 1L;

    public void service(HttpServletRequest request,HttpServletResponse response)throws IOException, ServletException{
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println("<html>");
        out.println("<head><title>Hello World</title></head>");
        out.println("<body>");
        out.println("<h1>Hello World2</h1>");
        // connecting to database
        Connection con = null;    
        Statement stmt = null;
        ResultSet rs = null;
        try {
            Class.forName("com.mysql.jdbc.Driver");
            con =DriverManager.getConnection ("jdbc:mysql://localhost:3306", "root", "password");
            stmt = con.createStatement();
            rs = stmt.executeQuery("Use servlettest");
            rs = stmt.executeQuery("SELECT * FROM servlet");
            // displaying records
            while(rs.next()){
                out.print(rs.getObject(1).toString());
                out.print("\t\t\t");
                out.print(rs.getObject(2).toString());
                out.print("<br>");
            }
        } catch (SQLException e) {
            throw new ServletException("Servlet Could not display records.", e);
          } catch (ClassNotFoundException e) {
              throw new ServletException("JDBC Driver not found.", e);
            } finally {
                try {
                    if(rs != null) {
                        rs.close();
                        rs = null;
                    }
                    if(stmt != null) {
                        stmt.close();
                        stmt = null;
                    }
                    if(con != null) {
                        con.close();
                        con = null;
                    }
                } catch (SQLException e) {}
            }
            out.println("</body></html>");  
            out.close();
        }
    } 
```

Java 类代码：

```
package org.ProjectEuler;
import java.io.*;
import java.net.*;
public class HelloServlet {
    public static void main( String [] args ) {

        try {

            URL url = new URL("http://localhost:8080/HelloServlet/HelloServlet2");
            URLConnection conn = url.openConnection();
            conn.setDoOutput(true);

            BufferedWriter out = new BufferedWriter( new OutputStreamWriter( conn.getOutputStream()));
            out.write("username=javaworld\r\n");
            out.flush();
            out.close();
            BufferedReader in = new BufferedReader( new InputStreamReader( conn.getInputStream()));

            String response;
            while ( (response = in.readLine()) != null ) {
                System.out.println( response );
            }
            in.close();
        }
        catch ( MalformedURLException ex ) {
            // a real program would need to handle this exception
        }
        catch ( IOException ex ) {
            // a real program would need to handle this exception
        }
    }
} 
```

安卓代码：

```
package org.spark.mysqltest;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.util.Log;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.*;

public class MySqlTestActivity extends Activity {
    EditText test;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d("checked","checked");
        System.out.println("check");
        Log.d("checked2","checked2");
        test = (EditText) findViewById(R.id.mtv);
        Log.d("checked3","checked3");
        setContentView(R.layout.main);
        Log.d("checked4","checked4");

        try {
            Log.d("checked5","checked5");

            URL url = new URL("http://localhost:8080/HelloServlet/HelloServlet2");
            URLConnection conn = url.openConnection();
            conn.setDoOutput(true);
            Log.d("checked6","checked6");
            BufferedWriter out = new BufferedWriter( new OutputStreamWriter( conn.getOutputStream()));
            Log.d("checked7","checked7");
            out.write("username=javaworld\r\n");
            Log.d("checke","checke");
            out.flush();
            Log.d("check","check");
            out.close();
            Log.d("chec","chec");
            BufferedReader in = new BufferedReader( new InputStreamReader( conn.getInputStream()));
            Log.d("che","che");
            String response;
            while ( (response = in.readLine()) != null ) {
                System.out.println( response );
              //  test.setText(response);
                Log.d("checked8","checked8");
            }
            Log.d("checked9","checked9");
            in.close();
        }
        catch ( MalformedURLException ex ) {
            // a real program would need to handle this exception
        }
        catch ( IOException ex ) {
            // a real program would need to handle this exception
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:59:27.840

第一个问题：您在创建`InputStreamReader`. 这意味着您将使用平台默认编码，它可能不是用于创建 Web 响应的编码。（创建请求时也是如此。）

第二个问题：您*忽略*了任何异常：

```
catch ( MalformedURLException ex ) {
    // a real program would need to handle this exception
}
catch ( IOException ex ) {
    // a real program would need to handle this exception
} 
```

我的猜测是抛出了一个异常*，*但你不知道，因为你甚至没有记录就吞下了这些异常。至少，在*这里*添加登录，我想你会看到出了什么问题。你几乎*不*应该有这样的空 catch 语句。

顺便说一句，您有任何理由使用这样的低级 API 吗？使用一个好的高级 HTTP 客户端库可能会让你的生活变得简单*很多*。

# javascript - 在什么基础上缓存 javascript 文件？

> ID：10810675
> 
> 赞同：3
> 
> 时间：2012-05-30T05:55:59.677
> 
> 标签：javascript, caching, browser

javascript文件在什么基础上被缓存？假设我从一个站点加载了一个名为“m-script.js”的文件，而在另一个网站上我使用了相同的名称“m-script.js”但内容不同。浏览器会获取新的，还是只查看名称并从缓存中加载它？两个 m-script.js 文件的 url 不同（显然）。
谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T06:01:32.210

如果 url 不同，则不会使用缓存的副本。将发出新请求并下载新文件。

如果从一个网站缓存的 Javascript 文件在另一个网站上使用，浏览器将存在*巨大的安全性和可用性问题。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T06:01:28.380

浏览器通过完整的 URI 缓存文件。

这个线程（[如何强制浏览器重新加载缓存的 CSS/JS 文件？](https://stackoverflow.com/questions/118884/what-is-an-elegant-way-to-force-browsers-to-reload-cached-css-js-files)）将帮助您理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T06:10:18.777

由于还没有人提到它，因此 HTTP 缓存涉及的不仅仅是 URI。有各种控制进程的标头，例如`Cache-Control`、`Expires`、`ETag`、`Vary`等。始终保证请求不同的 URI 以获取新副本，但是这些标头可以更好地控制对潜在缓存资源的请求如何发出（或未发出，或发出但接收回 304 Not Modified，或...） .

[这是描述该过程的详细文档](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html)。您还可以搜索“缓存过期”或“缓存 etag”等更具体的资源。

# c# - 我有爱普生热敏打印机型号 M129H。如何获取打印机的状态？喜欢与否，纸卷是否完成等

> ID：10810687
> 
> 赞同：-1
> 
> 时间：2012-05-30T05:57:39.793
> 
> 标签：c#, .net, printing, status, epson

我有爱普生热敏打印机型号 M129H。如何在我的 c# 应用程序中获取打印机的状态？状态包括：

1.  打印机打开或关闭
2.  纸卷完成
3.  打印错误
4.  纸卷钳口打开

等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:36:46.147

从头开始对打印机状态进行编码很难完美地完成。大多数打印机制造商应该有一个可用的 API 来执行此操作。我建议搜索 Epson 是否提供这样的 API。

作为参考，您应该查看这些家伙提供的 SDK：http: [//www.starmicronics.com/support/SDKDocumentation.aspx](http://www.starmicronics.com/support/SDKDocumentation.aspx)

请注意，Star SDK 不适用于 Epson 打印机，因为状态和打印机命令因打印机制造商而异。但是，我在自己的项目中使用了 Star 的 API/SDK，并且比我想象的要快。祝你好运。

# entity-framework - 自动迁移与基于代码的迁移

> ID：10810696
> 
> 赞同：20
> 
> 时间：2012-05-30T05:58:26.313
> 
> 标签：entity-framework, entity-framework-migrations

我正在学习 EF4.3 迁移，我已经阅读了 ado.net 团队博客中的这两篇文章：

[http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

[http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx)

但是看了这两篇文章，我还是不太清楚它们有什么区别，什么时候使用基于代码的迁移，什么时候使用自动迁移。任何人都可以指导我吗？

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-30T09:04:34.653

这些文章非常清楚，因此如果您不了解其中的区别，则意味着您在阅读文本时没有集中注意力，并且您也可能没有自己编写示例来遵循文本。

自动迁移只是一个神奇的工具。您运行您的应用程序，您将始终获得最新版本的数据库，因为 EF 将在每次需要时执行隐式迁移 - 在最纯粹的版本中，您无需执行任何操作，只需启用自动迁移。

自动迁移有时是不够的。您需要为迁移代码添加一些自定义或运行一些额外的 SQL 命令，例如转换数据。在这种情况下，您可以通过调用`Add-Migration`命令添加基于代码的显式迁移。显式迁移显示将在迁移期间执行的所有迁移代码（没有额外的魔法）。

如果您关闭自动迁移，则必须始终定义显式迁移以在明确定义的显式步骤中定义数据库升级过程。这对于需要同时升级和降级到特定版本的场景特别有用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-02-08T16:35:34.400

[在MSDN](http://msdn.microsoft.com/en-us/data/jj554735.aspx)上有更多关于您的问题的信息。他们不建议在团队开发方案中混合使用自动迁移和基于代码的迁移。但我不清楚它会产生什么问题。

# java - 在 Java 中获取的操作系统名称不正确

> ID：10810701
> 
> 赞同：9
> 
> 时间：2012-05-30T05:58:56.480
> 
> 标签：java, windows-7

最近我搬到了一台全新的 64 位 Windows 7 机器上。但是当我运行这段代码时，得到不正确的操作系统名称

```
String osName = System.getProperty("os.name");
System.out.println("OS Name = " + osName); 
```

输出来了：

```
OS Name = Windows Vista 
```

任何想法，我的代码或系统有什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T06:05:28.680

您可能使用的是较旧版本的 Java。因为这是一个已在较新版本中修复的已知错误（bug_id=6819886）。 [请阅读此内容以获取更多详细信息](http://bugs.sun.com/view_bug.do?bug_id=6819886)。

* * *

如果您无法升级 java 版本，可能的解决方法是：

```
String osName = System.getProperty("os.name");
    if (osName.equals("Windows XP") || osName.equals("Windows Vista"))
    {
       //do something and remember to put in all the names in the above if list. I just added two for example,it will have to include all like Windows NT,ME,95,etc.
    }
    else
    {
        //the block that will be accessible for Windows 7
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T06:10:39.100

有一个关于此的错误报告：

[http://bugs.sun.com/view_bug.do?bug_id=6819886](http://bugs.sun.com/view_bug.do?bug_id=6819886)

不确定它是否在较新版本的 Java 中得到修复，因为我没有 Java 7。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T06:02:54.453

它适用于我的 Windows 7 机器（诚然是 32 位机器；我现在无法访问 64 位机器）。

也许您的 JRE 早于 Windows 7，并且名称已融入其中？您使用的是哪个版本的 JRE？我建议更新到最新版本并重试。诚然，如果 JRE*确实*将操作系统名称硬编码到其中，那是非常令人讨厌的，但是发生了奇怪的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T06:16:39.033

使用 JAVA-6，我试过它工作正常，否则你的 Windows 正在使用 Vista 模式处理 JVM。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-17T10:04:05.723

最近遇到了同样的问题。正如[错误 6819886](http://bugs.sun.com/view_bug.do?bug_id=6819886)评估说明所述，在这种情况下，您可以检查**os.version**属性以区分**Windows 7**和**Windows Vista**。

Windows 7 的版本是 6.1，Windows Vista 的版本是 6。

```
String osVersion = System.getProperty("os.version");  
if("6.1".equals(osVersion)){
    System.out.println("OS is Windows 7");
} 
```

这样，您不必为了完成这项工作而升级到最新的 Java。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-26T13:00:58.387

```
 String winVer = System.getProperty("os.name");
    if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("95")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("98")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("ME")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("3.51")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("NT 4.0")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("2000")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("XP")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("7")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("8")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("8.1")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("10")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("2003")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("Vista")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("2008")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("2008 R2")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("2012")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("2012 R2")) {
        System.out.println(winVer);
    } else if (winVer.toLowerCase().contains("windows") && winVer.toLowerCase().contains("2016")) {
        System.out.println(winVer);
    } 
```

1.  项目清单

# qt - 连接到私有小部件的信号

> ID：10810704
> 
> 赞同：0
> 
> 时间：2012-05-30T05:58:59.737
> 
> 标签：qt

当您创建一个小部件时，QtCreator 设置为默认设置，它的类将表单创建为该类的私有。所以你有例如这样的东西：

```
namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

//...

private:
    Ui::MainWindow *ui;
}; 
```

现在我想知道的是如何连接到`ui`. 例如，如果这个小部件被嵌入到 QStackedWidget 中，并且当按下按钮时，显示的页面需要更改。我会考虑连接到按钮，但`ui`它是私人的，所以我不能。

我是否必须在其中创建信号，`MainWindow`然后在其中将“ui”信号连接到它们，从而使层次结构冒泡？还是我错过了一些简单的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T06:39:42.033

您不能让不相关的对象连接到聚合组件的信号/插槽，即使您可以这样做会破坏封装并成为维护的噩梦。

您需要通过将聚合组件的信号/插槽添加到`MainWindow`API 来公开它们，然后`ui`在定义中调用相关组件方法。

例如，在`MainWindow`定义中，添加：

```
signals:
    void buttonClicked(); 
```

然后在构造函数中，执行：

```
connect( ui->button, SIGNAL( clicked() ), this, SIGNAL( buttonClicked() ) ); 
```

这样，您的`MainWindow`类就可以从它的聚合中传播信号 - 但可以精确调整到您打算如何使用该类。

# excel - Excel 宏，用于从工作簿中的主工作表更新其他工作表

> ID：10810705
> 
> 赞同：0
> 
> 时间：2012-05-30T05:59:03.527
> 
> 标签：excel, cells, vba

我目前有一本大约有 100 多张工作簿。所以我有一个从目录宏创建的主表。主表有一个从单元格 E4 到 E116 的序列号列表。

现在我要做的是将我拥有的序列号输入到主表中，其他 100 多张表也将使用单元格 F4 中的序列号进行更新。基本上所有 100+ 张的页面格式都相同，因此序列号将更新到 Cell F4 到 100+ 张的每张中。

我有下面的代码可以做到这一点。但它总是弹出一条消息

> 运行时错误 9：下标超出范围

我不确定哪里出了问题。感谢有人为我纠正这个！谢谢一群人！

```
Sub test9()
   Dim j As Integer
   j = 1

   Sheets("TOC").Select 'TOC is the sheet name of the master sheet
   FinalRow = Range("E119").End(xlUp).Row 

   For i = 4 To FinalRow

       Range("E" & i).Copy Destination:=Sheets("Sheets" & j).Range("F4")
       j = j + 1

   Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:10:17.800

我想我设法解决了这个问题。实际上，这非常愚蠢。线

`Range("E" & i).Copy Destination:=Sheets("Sheet" & j).Range("F4")`

它`'Sheet'`不是`'Sheets'`. 那里真的是一个愚蠢的错误。

# mysql - 尝试在 MySQL 中添加外键约束时出现错误 1050

> ID：10810711
> 
> 赞同：3
> 
> 时间：2012-05-30T05:59:28.113
> 
> 标签：mysql, foreign-keys, mysql-error-1050

我尝试在我的 UserOrder 表中添加一个名为 discountcode 的列。这是一个可以为空的外键

```
alter table UserOrder add column discountCode varchar(100) null;
alter table UserOrder add foreign key FK_UserOrder_DiscountCode_code(`discountCode`) references DiscountCode(`code`); 
```

错误发生在第二行。两个表都在运行 InnoDB。我在 MySQL 5.5.11 上。

这是错误日志...

```
[2012-05-29 23:59:07] [42S01][1050] Table '.\realtorprint_dev_dev\userorder' already exists
[2012-05-29 23:59:07] [HY000][1025] Error on rename of '.\realtorprint_dev_dev\#sql-28a4_3' to '.\realtorprint_dev_dev\userorder' (errno: -1)
[2012-05-29 23:59:07] [42S01][1050] Table '.\realtorprint_dev_dev\userorder' already exists 
```

这是“显示创建表用户订单”

```
'CREATE TABLE `userorder` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `created` datetime NOT NULL,
  `paymentTxID` varchar(255) DEFAULT NULL,
  `shippedDate` datetime DEFAULT NULL,
  `shippingTrackingNumber` varchar(255) DEFAULT NULL,
  `taxType` varchar(255) NOT NULL,
  `taxValue` decimal(10,2) NOT NULL,
  `orderStatus` varchar(50) NOT NULL,
  `user_id` bigint(20) NOT NULL,
  `address` varchar(255) NOT NULL,
  `city` varchar(255) NOT NULL,
  `country` varchar(255) NOT NULL,
  `stateProvince` varchar(255) NOT NULL,
  `zipPostal` varchar(255) NOT NULL,
  `paymentType` varchar(255) NOT NULL,
  `backendUserId` bigint(20) DEFAULT NULL,
  `adjustedTotalPrice` decimal(10,2) DEFAULT NULL,
  `adjustedPrinterPrice` decimal(10,2) DEFAULT NULL,
  `adminNotes` varchar(2048) DEFAULT NULL,
  `printerBillStatus` varchar(40) NOT NULL,
  `userInvoiceStatus` varchar(40) NOT NULL,
  `expeditedAddressDescription` varchar(255) DEFAULT NULL,
  `shippingType` varchar(50) NOT NULL,
  `shippingCost` decimal(10,2) NOT NULL,
  `discountCode` varchar(100) DEFAULT NULL,
  `discountAmount` decimal(10,2) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_UserOrder_user_id` (`user_id`),
  KEY `idx_UserOrder_orderStatus_id` (`orderStatus`),
  KEY `FK_UserOrder_PaymentType` (`paymentType`),
  KEY `FK_UserOrder_PrinterBillStatus_Name` (`printerBillStatus`),
  KEY `FK_UserOrder_UserInvoiceStatus_Name` (`userInvoiceStatus`),
  KEY `FK_UserOrder_User` (`backendUserId`),
  KEY `FK_UserOrder_ShippingType_name` (`shippingType`),
  CONSTRAINT `FK_UserOrderBcknd_User` FOREIGN KEY (`backendUserId`) REFERENCES `user` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FK_UserOrder_user_id` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`),
  CONSTRAINT `userorder_ibfk_1` FOREIGN KEY (`shippingType`) REFERENCES `shippingtype` (`name`),
  CONSTRAINT `UserOrder_ibfk_2` FOREIGN KEY (`paymentType`) REFERENCES `paymenttype` (`name`),
  CONSTRAINT `UserOrder_ibfk_6` FOREIGN KEY (`printerBillStatus`) REFERENCES `printerbillstatus` (`name`),
  CONSTRAINT `UserOrder_ibfk_7` FOREIGN KEY (`userInvoiceStatus`) REFERENCES `userinvoicestatus` (`name`),
  CONSTRAINT `UserOrder_ibfk_8` FOREIGN KEY (`orderStatus`) REFERENCES `orderstatus` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=21412 DEFAULT CHARSET=utf8' 
```

这是显示创建表 DiscountCode ...

```
'CREATE TABLE `discountcode` (
  `code` varchar(100) NOT NULL,
  `percent` int(11) NOT NULL,
  `created` datetime NOT NULL,
  `expires` datetime NOT NULL,
  `maxUses` int(11) NOT NULL,
  `useCount` int(11) NOT NULL,
  PRIMARY KEY (`code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:32:14.873

如[手册](http://dev.mysql.com/doc/en/innodb-foreign-key-constraints.html)所述：

> *   `InnoDB`需要外键和引用键上的索引，以便外键检查可以快速且不需要表扫描。在引用表中，必须有一个索引，其中外键列按相同顺序列为第一列。如果引用表不存在，则会在引用表上自动创建此类索引。如果您创建另一个可用于强制外键约束的索引，则此索引可能会在稍后被静默删除。***`index_name`***，如果给定，则如前所述使用。

您是否在引用的键上定义了索引`DiscountCode.code`？

# objective-c - 如何在 xcode 中设置 UIWebView 的初始缩放

> ID：10810717
> 
> 赞同：1
> 
> 时间：2012-05-30T06:00:15.963
> 
> 标签：objective-c, xcode, pdf, uiwebview

我想知道如何在 XCode 的 UIWebView 中加载的 PDF 文档上设置初始缩放。它是一个表格，我希望 Web 视图在特定列（或我可以向上和向下滚动的列的一部分）上加载放大。我一直在阅读，有些人指出了这种方法`- (NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script`，但我不知道它是如何工作的。

当我们讨论 PDF 的主题时，有什么方法可以抓取 PDF 并将其转换为可用的字符串？

**编辑：**对于阅读 pdf，PDFBox 是一种可能的解决方案。您必须将 JAR 文件导入您的 Xcode 项目。这是一个教程：[http ://www.oreillynet.com/pub/a/mac/2005/01/07/ipod_reader.html](http://www.oreillynet.com/pub/a/mac/2005/01/07/ipod_reader.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T06:43:01.373

```
UIWebView *webV = [[UIWebView alloc] init];
webV.scrollView.zoomScale = 4.0; 
```

# objective-c - [UIImage 保留]：发送到已释放实例的消息

> ID：10810724
> 
> 赞同：0
> 
> 时间：2012-05-30T06:01:30.300
> 
> 标签：objective-c, uiimage

我们在 init 方法中创建了按钮，我们创建了两个 Uiimage 对象并创建了 Boolean

```
 if(!isHint)
      {
          [hintBtn setImage:hintBtnImage forState:UIControlStateNormal];
      }
      else
      {
          [hintBtn setImage:hintBtnImagex forState:UIControlStateNormal]; 
      }   
      hintBtn =[[UIButton alloc]initWithFrame:CGRectMake(794, 144, hintBtnImage.size.width, hintBtnImage.size.height)]; 
      [hintBtn setImage:hintBtnImage forState:UIControlStateNormal];
      [hintBtn addTarget:self action:@selector(showHint) forControlEvents:UIControlEventTouchUpInside]; 
```

当用户点击 tableview 单元格时，我们会更改布尔变量并设置图像。就像下面的代码

```
 if(wrongx==1)
    {
        NSLog(@"the wrong x is %i",wrongx);    
        isHint = NO;
        [hintBtn setImage:hintBtnImage forState:UIControlStateNormal];
    } 
```

但是当我第一次点击应用程序时它正在工作但第二次我收到以下错误

```
[UIImage retain]: message sent to deallocated instance 
```

请回复我的帖子。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:10:11.607

你在哪里分配了“hintBtnImage”对象。我认为你试图在没有分配的情况下访问“hintBtnImage”。

```
hintBtn =[[UIButton alloc]initWithFrame:CGRectMake(794, 144, hintBtnImage.size.width, hintBtnImage.size.height)]; 
```

需要小代码修改，与解决你的问题无关，上面应该是这样的

```
hintBtn =[[UIButton alloc]initWithFrame:CGRectMake(794, 144, hintBtnImage.size.width, hintBtnImage.size.height)];
      if(!isHint)
      {
          [hintBtn setImage:hintBtnImage forState:UIControlStateNormal];
      }
      else
      {
          [hintBtn setImage:hintBtnImagex forState:UIControlStateNormal]; 
      } 
```

# grails - grails run-app期间的VMWare初始化错误

> ID：10810727
> 
> 赞同：2
> 
> 时间：2012-05-30T06:01:33.940
> 
> 标签：grails, vmware

当我输入 grails run-app 来运行 grails 应用程序时，cmd 给了我这个错误

```
C:\Users\Mamun\Desktop\web\racetrack>grails run-app   
Error opening zip file or JAR manifest missing : C:/Program         
Error occurred during initialization of VM           
agent library failed to init: instrument      

C:\Users\Mamun\Desktop\web\racetrack>grails -version
Grails version: 2.0.4 
```

但我的圣杯工作完美。需要帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:26:06.623

在 GitHub 上搜索[grails 问题](https://github.com/grails/grails-core/issues/5662)时发现了这一点。也许它可以帮助你。

# jquery-ui - jquery/jquery ui：找到每个跨度将类添加到被拖动的单个跨度

> ID：10810731
> 
> 赞同：0
> 
> 时间：2012-05-30T06:01:57.413
> 
> 标签：jquery-ui, jquery-ui-draggable, jquery

我正在努力做到这一点，所以只有被拖动的跨度添加了一个类，到目前为止我有这个，但是它把类添加到所有跨度的......

```
$(function() {

 $('span').draggable();

  $('#container, #board').droppable({
    tolerance : 'touch',
         over : function() {

    $('li').each(function() {
     $(this).find('span').addClass('over');
    });             

},
    drop : function() {
    $('li').each(function() {
     $(this).find('span').removeClass('over');          
}); 

      }
   });
}); 
```

这是他的 HTML（如果有帮助的话）

```
<div id="container">
 <div id="board">
  <ul>
   <li class="foo1"><span class="p1"></span></li>
   <li class="foo2"><span class="p1"></span></li>
   <li class="foo1"><span class="p1"></span></li>
   <li class="foo2"><span class="p1"></span></li>
  </ul>
 </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:25:59.687

您可以使用 start 事件将类添加到被拖动的元素。

```
$('span').draggable({
   start: function(event, ui) {
      $(event.target).addClass('over');
   }
}); 
```

并在不再拖动时再次删除它，只需将处理程序添加到停止事件

```
$('span').draggable({
   start: function(event, ui) {
      $(event.target).addClass('over');
   },
   stop: function(event, ui) {
      $(event.target).removeClass('over');
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:05:38.410

您不需要`each()`，只需 do `$(this)`，它指的是当前元素，它应该可以工作：

```
over : function() {
    $(this).find('span').addClass('over');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:06:27.767

```
$(function() {

 $('span').draggable();

  $('#container, #board').droppable({
    tolerance : 'touch',
    over : function() {
       $(this).find('li span').addClass('over');
    },
    drop : function() {
       $(this).find('li span').removeClass('over');          
    }
   });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T06:10:55.627

```
$('#container, #board').droppable({
    tolerance : 'touch',
         over : function(e, elem) { // Params
                // here is the original element we move
                $(elem.draggable).find('span').addClass("over"); 

},
    drop : function(e, elem) {
              // 
              $(elem.draggable).find('span').removeClass('over'); 
```

但是，如果您在拖动时不使用原始 Dom（即 {helper: "clone" }），elem.draggable 不会影响您的助手。那就是在这里写你的.draggable代码......你也可以尝试“elem.helper”

# javascript - 来自 JSON 响应的 Javascript 警报

> ID：10810736
> 
> 赞同：3
> 
> 时间：2012-05-30T06:02:06.137
> 
> 标签：javascript, mysql, json, alert

我正在尝试构建一个应用程序，该应用程序使用 getJSON 从服务器获取数据，然后向该行发出警报。这是我使用的代码，但它没有显示来自 JSON 的行，它只是说“未定义”。这可能是什么原因？

```
$(document).ready(function(){

  $("button").click(function(){
    $.getJSON("MyURL/test.php",function(result){
      $.each(result, function(i, field){
        alert(field.MESSAGE);
      });
    });
  });
}); 
```

这是 JSON 响应：

```
{"key":[{"message":"test"}]} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T06:03:49.400

`result`不是数组。`result.key`是一个数组。此外，您的字段属性是`message`，而不是`MESSAGE`：

```
$.each(result.key, function(i, field){
    alert(field.message);
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-30T06:04:05.057

访问 json 中的对象区分大小写

# linux - 如何使用 unix 在数据库中登录和执行命令？

> ID：10810738
> 
> 赞同：0
> 
> 时间：2012-05-30T06:02:10.893
> 
> 标签：linux, perl, unit-testing, shell, unix

我正在尝试编写一个脚本以在单个脚本中执行以下步骤。

例子：

```
bash-3.00$ isql -Ufw -Pframesa -Dcsmain -w2000    
1> select * from UserLogin where UserName ='EPRTUBD'    
2> go    
 UserName             Password                                                                                                                                                                                                                                                        ExpiryDate                 ProfileID   CCRefillSum              LastCCRefillDate           RBRefillSum              LastRBRefillDate           DBRefillSum              LastDBRefillDate           LockStatus FailedLoginCount
 -------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -------------------------- ----------- ------------------------ -------------------------- ------------------------ -------------------------- ------------------------ -------------------------- ---------- ----------------
 EPRTUBD              $1$HN1DOjM6$R9.niqQzUQ/2H4663nRoQ/                                                                                                                                                                                                                                     Jun 25 2012  8:04AM         147                     NULL                       NULL                     NULL                       NULL                     NULL                       NULL N                         0

(1 row affected)
1> exit

bash-3.00$ 
```

用户名可能是 n 个数字。我正在尝试提供一个包含所有用户名的输入文件。有人可以指导我吗？如何在此命令中分配用户名并在登录数据库后执行。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:35:29.183

我没有办法对此进行测试，但常见的解决方案是使用 shell“here-docs”来附加 std-in 以调用 isql。类似于以下内容：

```
#!/bin/bash

isql -Ufw -Pframesa -Dcsmain -w2000 <<-EOS   
    select * from UserLogin where UserName ='EPRTUBD'    
    go
EOS 
```

请注意`<<-EOS`. 这是一个允许您缩进 here-doc 的功能，并允许关闭的 EOS 也被缩进。EOS**必须**使用制表符缩进。如果您不能使用制表符，请删除“-”并确保您的 EOS 是单独一行中的第一个字符（没有尾随空格！;-)

此外，EOS 可以是任何文本，我使用 EOS 作为脚本结束。

我希望这有帮助。

# c# - 如何将程序集设置为默认参考？

> ID：10810743
> 
> 赞同：1
> 
> 时间：2012-05-30T06:02:44.373
> 
> 标签：c#, visual-studio, clr

对于每个新创建的 C# 项目，Visual Studio 2010 都放入了一些默认引用，例如 System、System.Core、System.Xml 等。这些默认引用的好处是您可以直接使用它们而无需手动添加它们。

我想知道是否有办法将第 3 方程序集添加为默认引用，这样我就不需要在每次创建项目时都添加它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T06:09:06.737

您可以通过根据需要创建自定义项目模板来完成此操作。查看文档[Creating Project and Item Templates](http://msdn.microsoft.com/en-us/library/s365byhx)。更具体地说，[如何：添加对模板的引用](http://msdn.microsoft.com/en-us/library/ms185290)。您基本上修改了`.vstemplate`文件，以便它引用您想要的程序集：

```
<TemplateContent>
    <References>
        <Reference>
            <Assembly>
                System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
            </Assembly>
        </Reference>
        <Reference>
            <Assembly>
                System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
            </Assembly>
        </Reference>
    </References>
    ...
</TemplateContent> 
```

话虽如此，如果这是您想要的，您可以相应地修改[OOB 模板。](http://msdn.microsoft.com/en-us/library/y3kkate1)它们可以在以下位置找到： `\VisualStudioInstallationDirectory\Common7\IDE\ProjectTemplates\Language\Locale\`

# objective-c - 目标c：CGAffineTransformMakeRotation

> ID：10810746
> 
> 赞同：2
> 
> 时间：2012-05-30T06:03:07.353
> 
> 标签：objective-c, animation, core-animation, rotation, cgaffinetransform

我有一个图像，我想围绕一个固定点来回摆动（一次）。所以我有以下代码：

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1.5];
myDial.transform = CGAffineTransformMakeRotation(degreesToRadians(45)); //lineA
[UIView commitAnimations];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1.5];
myDial.transform = CGAffineTransformMakeRotation(degreesToRadians(0 )); //lineB
[UIView commitAnimations]; 
```

当我运行上面的代码时会发生什么是 lineA 立即执行（而不是在 1.5 秒内）。紧接着 lineB 在 1.5 秒内被执行。我希望两个动画各花费 1.5 秒。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T06:54:01.713

与其尝试将两个 UIView 动画一起创建一个视觉动画，不如使用 Core Animation 并在一个动画中完成所有操作。使用核心动画，您可以告诉动画自动反转（在 1.5 秒内转到 45 度，然后在相同的持续时间内再次返回），您不必关心两个动画一起计时。你可以这样做：

```
CABasicAnimation *rotate = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
[rotate setFromValue:[NSNumber numberWithFloat:0.0]];
[rotate setToValue:[NSNumber numberWithFloat:degreesToRadians(45)]];
[rotate setDuration:1.5];
[rotate setAutoreverses:YES]; // go back the same way
[rotate setTimingFunction:[CAMediaTimingFunction functionWithName: kCAMediaTimingFunctionEaseInEaseOut]];

[[myDial layer] addAnimation:rotate forKey:@"dangleMyDial"]; 
```

* * *

如果您尚未将 QuartzCore.framework 导入您的项目并导入 ，则需要这样做才能使 Core Animation 正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T06:05:05.947

这个想法是在完成函数中执行下一个动画序列。

我已经测试了这段代码。我冒昧地改变了一些数字，使它看起来更像一个电话拨号。

```
[UIView animateWithDuration: 1.0 delay: 0 options: UIViewAnimationOptionCurveLinear animations:^{
    myDial.transform = CGAffineTransformRotate(rect.transform, M_PI / 4); 
} completion:^(BOOL finished) {
    [UIView animateWithDuration: 0.7 delay: 0 options: UIViewAnimationOptionCurveEaseIn animations:^{
        myDial.transform = CGAffineTransformIdentity;
    } completion: nil];
}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T06:06:54.157

如果我理解你的要求正确，我想我看到了你的问题。`setAnimationDuration`不会延迟动画的开始；相反，它告诉动画完成多长时间。如果您实际上是在尝试延迟动画的开始，请考虑使用 a`NSTimer`来这样做。（或使用 setAnimationDelay 方法）。设置一个`NSTimer`运行第一个“旋转”，等待它完成，然后运行第二个，通过调用另一个`NSTimer`或使用循环。

# mysql - 如何在连接时删除 NULL 结果

> ID：10810756
> 
> 赞同：0
> 
> 时间：2012-05-30T06:03:52.467
> 
> 标签：mysql, sql

我有以下查询：

```
SELECT concat(first_name, ' ', last_name) as full_name FROM auth_user 
```

我将如何做相当于：

```
SELECT concat(first_name, ' ', last_name) as full_name FROM auth_user 
    **WHERE full_name IS NOT NULL** 
```

（产生一个`Unknown column 'full_name' in 'where clause'`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:06:32.403

解决这个问题的两种方法：

```
SELECT concat(first_name, ' ', last_name) as full_name FROM auth_user 
WHERE first_name IS NOT NULL and last_name is not null 
```

或者，

```
select * from (
    SELECT concat(first_name, ' ', last_name) as full_name FROM auth_user)
where full_name is not null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:06:53.087

```
SELECT concat(IF(first_name IS NOT NULL, first_name, ''), ' ', IF(last_name IS NOT NULL, last_name, '')) as full_name FROM auth_user; 
```

在 where 子句中使用 IS NOT NULL 和在 IF 子句中使用 IS NOT NULL 的区别在于 where 子句将消除（过滤）具有空值的行，而 if 子句将获取所有行但具有 full_name不是“未知”，它只会丢失空组件

# c# - 想咨询关于组合框上的选择索引

> ID：10810766
> 
> 赞同：0
> 
> 时间：2012-05-30T06:04:43.107
> 
> 标签：c#

我有组合框，我填写这样的数据：

```
SQL = "select DISTINCT ActionNum,ActionName from ActionType";
adp = new SqlCeDataAdapter(SQL, Main.Conn);
adp.Fill(dsView, "ActionType");
adp.Dispose();
Mycom.DataSource = dsView.Tables[0];
Mycom.DisplayMember = dsView.Tables[0].Columns[1].ColumnName;
Mycom.ValueMember = dsView.Tables[0].Columns[0].ColumnName; 
```

如何选择组合框所在的位置`Mycom.ValueMember = 33`

（类似于 Mycom.SelectedIndex = ???）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:06:54.610

使用[SelectedValue](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvalue.aspx)：

```
Mycom.SelectedValue = 33; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:50:55.577

有关组合框，请参见 msdn。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx)

```
SelectedIndex   Gets or sets the index specifying the currently selected item. (Overrides ListControl.SelectedIndex.)
SelectedItem    Gets or sets currently selected item in the ComboBox.
SelectedText    Gets or sets the text that is selected in the editable portion of a ComboBox.
SelectedValue   Gets or sets the value of the member property specified by the ValueMember property. (Inherited from ListControl.) 
```

# java - 在 Java 开关中声明和初始化变量

> ID：10810768
> 
> 赞同：103
> 
> 时间：2012-05-30T06:04:52.673
> 
> 标签：java, scope, initialization, switch-statement, declaration

我有一个关于 Java 开关的疯狂问题。

```
int key = 2;

switch (key) {
    case 1:
        int value = 1;
        break;
    case 2:
        value = 2;
        System.out.println(value);
        break;
    default:
        break;
} 
```

场景 1 - 当它`key`是 2 时，它成功地将值打印为 2。
场景 2 - 当我要评论它`value = 2`时`case 2:`，尖叫声说*The local variable value may not have been initialized*。

问题：

场景1：如果执行流程不去`case 1:`（当`key = 2`），那么它如何知道值变量的类型为`int`？

场景 2：如果编译器知道 value 变量的类型为`int`，那么它必须访问`int value = 1;`过 .（声明和初始化）中的表达式`case 1:`。那为什么它会吱吱作响，当我要评论`value = 2`时`case 2:`，说*局部变量值可能尚未初始化*。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-05-30T06:12:04.680

基本上，switch 语句在作用域方面很奇怪。从[JLS 的第 6.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.3)：

> 块中局部变量声明的范围（第 14.4 节）是声明出现的块的其余部分，从它自己的初始化程序开始，并在局部变量声明语句的右侧包括任何进一步的声明符。

在您的情况下，它与它`case 2`位于同*一块*中`case 1`并出现在它之后，即使`case 1`永远不会执行......所以尽管您在逻辑上从未“执行”声明，但局部变量在范围内并且可以*写入。*（尽管初始化是，但声明并不是真正的“可执行”。）

如果您注释掉`value = 2;`分配，编译器仍然知道您指的是哪个变量，但是您不会经历任何为其分配值的执行路径，这就是为什么您会在尝试时遇到错误的原因读取任何其他未明确分配的局部变量。

我强烈建议您*不要*使用在其他情况下声明的局部变量——正如您所见，这会导致代码高度混乱。当我在 switch 语句中引入局部变量时（我很少尝试这样做 - 理想情况下，案例应该非常短）我通常更喜欢引入一个新的范围：

```
case 1: {
    int value = 1;
    ...
    break;
}
case 2: {
    int value = 2;
    ...
    break;
} 
```

我相信这更清楚。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-30T06:10:53.703

变量已声明（作为 int），但未初始化（分配了初始值）。想想这条线：

```
int value = 1; 
```

作为：

```
int value;
value = 1; 
```

该`int value`部分在编译时告诉编译器您有一个名为 value 的变量，它是一个 int。该`value = 1`部分对其进行了初始化，但这发生在运行时，并且如果未输入开关的该分支，则根本不会发生。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-05-30T06:10:13.153

来自 [http://www.coderanch.com/t/447381/java-programmer-SCJP/certification/variable-initialization-within-case-block](http://www.coderanch.com/t/447381/java-programmer-SCJP/certification/variable-initialization-within-case-block)

> 声明在编译时处理，不依赖于代码的执行流程。由于`value`是在 switch 块的本地范围内声明的，因此它可以在该块中从其声明点开始的任何地方使用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-09-08T18:55:04.720

在 JDK-12 早期访问版本中集成了[JEP 325: Switch Expressions (Preview) 。](http://openjdk.java.net/jeps/325)[从乔恩的回答](https://stackoverflow.com/a/10810847/1746118)中可以看出一些变化 ——

1.  ***局部变量作用域——switch*** case 中的局部变量现在可以是 case 本身的局部变量，*而不是整个 switch 块*。一个示例（类似于 Jon 在语法上也尝试过的）考虑`Day`enum 类以进行进一步解释：

    ```
    public enum Day {
        MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY
    }

    // some another method implementation
    Day day = Day.valueOf(scanner.next());
    switch (day) {
        case MONDAY,TUESDAY -> {
            var temp = "mon-tue";
            System.out.println(temp);
        }
        case WEDNESDAY,THURSDAY -> {
            var temp = Date.from(Instant.now()); // same variable name 'temp'
            System.out.println(temp);
        }
        default ->{
            var temp = 0.04; // different types as well (not mandatory ofcourse)
            System.out.println(temp);
        }
    } 
    ```

2.  ***Switch Expressions*** - 如果打算给变量赋值然后使用它，一次可以使用 switch 表达式。例如

    ```
    private static void useSwitchExpression() {
        int key = 2;
        int value = switch (key) {
            case 1 ->  1;
            case 2 -> 2;
            default -> {break 0;}
        };
        System.out.println("value = " + value); // prints 'value = 2'
    } 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-20T00:42:02.107

这个解释可能会有所帮助。

```
 int id=1;

    switch(id){
        default: 
            boolean b= false; // all switch scope going down, because there is no scope tag

        case 1:
            b = false;
        case 2:{
            //String b= "test"; you can't declare scope here. because it's in the scope @top
            b=true; // b is still accessible
        }
        case 3:{
            boolean c= true; // case c scope only
            b=true; // case 3 scope is whole switch
        }
        case 4:{
            boolean c= false; // case 4 scope only
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-05T20:07:26.240

Java规范：

[https://docs.oracle.com/javase/specs/jls/se12/html/jls-14.html#jls-14.11](https://docs.oracle.com/javase/specs/jls/se12/html/jls-14.html#jls-14.11)

> 由于标签中断而突然完成的情况由标签语句的一般规则（第 14.7 节）处理。

[https://docs.oracle.com/javase/specs/jls/se12/html/jls-14.html#jls-14.7](https://docs.oracle.com/javase/specs/jls/se12/html/jls-14.html#jls-14.7)

标记语句：

> LabeledStatement：标识符：语句
> 
> LabeledStatementNoShortIf：标识符：StatementNoShortIf
> 
> 与 C 和 C++ 不同，Java 编程语言没有 goto 语句；标识符语句标签与出现在标记语句中的任何位置的 break (§14.15) 或 continue (§14.16) 语句一起使用。
> 
> 带标签语句的标签范围是立即包含的语句。

换句话说，case 1、case 2 是 switch 语句中的标签。break 和 continue 语句可以应用于标签。

因为标签共享语句的范围，所以标签中定义的所有变量共享 switch 语句的范围。

# c# - 如何在水晶报表的一页中打印多行数据？（数据存储在数据表中）

> ID：10810773
> 
> 赞同：0
> 
> 时间：2012-05-30T06:05:16.663
> 
> 标签：c#

我创建了一个包含多个数据记录的数据表。我想将每一行的特定列的数据打印到水晶报表中。例如，打印输出应在第 1 页显示 6 行数据，在第 2 页显示接下来的 6 行数据，具有特定格式。

我所做的是在一页中打印每一行数据，这浪费了我的论文。

期待任何形式的答案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:32:44.437

将列添加到Crystal Report 的**详细信息**部分。然后右键单击**详细信息**部分，从弹出菜单中选择**部分专家。**选择**分页**选项卡。选中**New Page After -> * 可见记录**框并将编号从 1 更改为 6。

希望它会有所帮助。

# ruby-on-rails - 如何将数据从 ROR Web 应用程序上的 sqlite3 数据库传递到谷歌图表

> ID：10810778
> 
> 赞同：1
> 
> 时间：2012-05-30T06:05:44.757
> 
> 标签：ruby-on-rails, google-visualization

我是一名初学者 ROR 网络开发人员，我的网络应用程序上运行了谷歌图表。但是图表是根据硬编码的数据绘制的。

我的代码：

Gchart.line(:data => [300, 100, 30, 200, 100, 200, 300, 10], :axis_with_labels =>'x', :axis_labels => ['Jan|July|Jan|July|Jan' ])

我需要根据从我的数据库（Sqlite3）中提取的数据绘制图表。我可以用 googlecharts 来做吗？如果是，我如何编写代码来从 db.c 中提取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:33:38.103

当然，你可以做到。Google Chart API 是一个 JavaScript 库，因此它只是一些要传入的数据。如果您使用的是 Rails 3.2，通常的做法是在`dom`带有`data`属性的 html 中呈现数据，然后使用`jQuery`来访问数据。

您可以从 railscast 剧集中了解更多信息：[http ://railscasts.com/episodes/324-passing-data-to-javascript](http://railscasts.com/episodes/324-passing-data-to-javascript)

# jquery - 无限轮播滚动与溢出-x

> ID：10810780
> 
> 赞同：5
> 
> 时间：2012-05-30T06:05:58.760
> 
> 标签：jquery, scroll, overflow, infinite-scroll, infinite-carousel

[我在这里](http://jsfiddle.net/ZgEZN/4/)设置了一个快速小提琴。我想要的是能够无限地向左或向右滚动（旋转木马样式）并且只是让元素重复（即“脱落”右边缘并重新出现在左侧，反之亦然）。我能够捕捉到我在卷轴中的位置，但不确定在那之后最好的方法是什么。在我看来，在我尝试动态移动元素之前，有一个非常简单的技巧。

**CSS**

```
#main {
    overflow-x:scroll;
    overflow-y:hidden;
    white-space:nowrap;
} 
```

**HTML**

```
<div id="main">
    <img src="http://dummyimage.com/150x100/aaa/00f">
    <img src="http://dummyimage.com/150x100/000/fff">
    <img src="http://dummyimage.com/150x100/000/fff">
    <img src="http://dummyimage.com/150x100/000/fff">
    <img src="http://dummyimage.com/150x100/000/fff">
    <img src="http://dummyimage.com/150x100/000/fff">
    <img src="http://dummyimage.com/150x100/000/fff">
    <img src="http://dummyimage.com/150x100/000/fff">
    <img src="http://dummyimage.com/150x100/000/fff">
    <img src="http://dummyimage.com/150x100/ccc/f00">
</div> 
```

**JS**

```
$('#main').scroll(function (event) {
    var width = $(this)[0].scrollWidth - $(this).width();
    console.log('location: ' + $(this).scrollLeft() + ' out of ' + width);
});​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T07:57:13.713

这工作得相当好，滚动条和所有：

```
$('#main').scroll(function (event) {
    var factor = this.scrollLeft / (this.scrollWidth - $(this).width());
    if(factor < 0.2) {
        var move = $(this.lastChild);
        move.remove();
        $(this).prepend(move);
        this.scrollLeft += move.width();
    } else if(factor > 0.8) {
        var move = $(this.firstChild);
        move.remove();
        $(this).append(move);
        this.scrollLeft -= move.width();
    }
}); 
```

jsFiddle：http: [//jsfiddle.net/ZgEZN/10/](http://jsfiddle.net/ZgEZN/10/)

Scrolling to the leftmost or rightmost 20% of the scrollbar causes the scrollbar to behave funny, but not drastically glitchy. (Dragging the scrollbar to that area causes the carousel to spin rapidly until the scrollbar is either released or moved somewhere more reasonable. Scrolling to that area in some other way causes the scrollbar to jump back toward the middle.)

# patch - 补丁文件 - 编辑行，而不是替换？

> ID：10810783
> 
> 赞同：0
> 
> 时间：2012-05-30T06:06:16.513
> 
> 标签：patch

是否可以创建一个将自己编辑行而不是替换整行的差异补丁文件？

例如，我有以下行：

```
 <foo:ListeningPortBar>3423</foo:ListeningPortBar> 
```

我想将其更改为：

```
 <cat:LoremIpsum>3423</cat:LoremIpsum> 
```

也就是说，我想更改实际端口号周围的文本，但保留端口号 - 我需要将此补丁应用于多个文件，所有文件都具有不同的端口号 - 我只想更改标签，保留任何端口号码目前在那里。

请问你怎么能做到这一点？

谢谢，维克多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T10:30:58.600

补丁替换整行还是仅替换行中的字符并不重要（最终结果是相同的，不是......？），但我不认为这是一个“补丁”问题。有关使用“sed”的更简单的解决方案，请参见下文。

例如，假设：

```
$ cat f1.txt
<xml>
<foo:ListeningPortBar>3423</foo:ListeningPortBar>
</xml>

$cat f2.txt
<xml>
<cat:LoremIpsum>3423</cat:LoremIpsum>
</xml> 
```

然后，从字面上看，补丁将是：

```
$ diff -u f1.txt f2.txt
--- f1.txt  2012-07-08 03:14:39.328328048 -0700
+++ f2.txt  2012-07-08 03:14:30.618177130 -0700
@@ -1,3 +1,3 @@
 <xml>
-<foo:ListeningPortBar>3423</foo:ListeningPortBar>
+<cat:LoremIpsum>3423</cat:LoremIpsum>
 </xml> 
```

此补丁文件可用作模板，为所有需要更新的文件使用正确的值进行修改，并单独应用于所有文件。这听起来比必要的工作更多。

另一方面，只需使用“sed”：

```
$ sed 's/<foo:ListeningPortBar>\([0-9]*\)<\/foo:ListeningPortBar>/<cat:LoremIpsum>\1<\/cat:LoremIpsum>/' f1.txt  
<xml>
<cat:LoremIpsum>3423</cat:LoremIpsum>
</xml> 
```

由于您拥有 XML，因此[使用 xsltproc](https://stackoverflow.com/questions/6112874/how-to-replace-a-tag-with-another-tag-in-xml-using-xsl)是另一种选择，但对于这个简单的搜索和替换任务来说，这又可能是多余的。

要在脚本中使用它，您可以执行以下操作（用上面的 sed 替换“etc/etc”）：

```
for f in $(find dir -name "*.xml" -exec egrep 'foo:ListeningPortBar' {} \; -print)
do
  sed -i.bak 's/etc/etc/g' $f
done 
```

...然后验证“.bak”文件实际上与修改后的文件不同。

# c++ - cpp中的字节顺序转换

> ID：10810785
> 
> 赞同：0
> 
> 时间：2012-05-30T06:06:30.330
> 
> 标签：c++, hex, endianness

我正在尝试解决一个问题。我有一个 char * SERIAL_HEX = 5F6D1F7F 但我的代码期望 SERIAL_HEX 以相反的顺序。像 SERIAL_HEX = 7F1F6D5F

所以它反转了十六进制数字..我怎样才能在 c++ 中实现这一点？任何指针都会帮助我！谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:55:15.717

你有（至少）两种可能性：

*   将每个字符对转换为一个字节，将结果字符串反转`std::reverse()`并将每个字节转换回其十六进制表示
*   将每个字符对与从末尾开始计数的字符对交换。

# replication - Apache ActiveMQ 故障转移协议

> ID：10810788
> 
> 赞同：1
> 
> 时间：2012-05-30T06:06:49.690
> 
> 标签：replication, message, activemq, failover, broker

为什么java只能在activemq中提供对故障转移协议的支持而其他语言不能。我的疑问是，在故障转移协议中`failover://(tcp://host1:61616,tcp://host2:61616)?randomize=false`，客户端也使用内部 url 之一`tcp://host1:61616`，然后代理如何知道调用是否使用某些故障转移协议，然后代理如何决定它需要复制消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:58:00.873

请理解，`failover`协议仅用于客户端的重新连接逻辑，AMQ 代理甚至不知道客户端是否使用`failover`协议。

来自[官方 AMQ 文档](http://activemq.apache.org/failover-transport-reference.html)：

> 故障转移传输层在任何其他传输之上重新连接逻辑。
> 
> 故障转移配置语法允许您指定任意数量的复合 uri。故障转移传输随机选择一个复合 URI 并尝试建立到它的连接。如果它不成功或随后失败，则与列表中的其他 uri 之一建立新连接。

不知道你在这里的复制是什么意思，但根据官方文档

> 默认情况下，故障转移传输跟踪事务。飞行中的事务在重新连接时重播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:24:19.340

使用 ActiveMQ 建立 HA 解决方案有不同的场景。

如果客户端使用故障转移协议连接到主机 1、主机 2，则还需要为 HA 设置代理设置。

一种解决方案是在 Active-Active 解决方案中集群 host1 和 host2。然后消息总是在被请求时传播——队列在整个集群中的所有 amq 代理之间共享。

否则，如果不喜欢主动-主动解决方案，则可以设置主从解决方案，其中两个代理主机 1 和主机 2 共享数据区域（例如，使用数据库进行持久性或共享 SAN 磁盘）。

有更多的设置组合，但故障转移协议假定整个解决方案可以处理消息到达不同的代理，如果一个出现故障。据我所知，从代理的角度来看，故障转移协议没有其他魔力。

# php - 插入长 BLOB

> ID：10810794
> 
> 赞同：0
> 
> 时间：2012-05-30T06:07:24.807
> 
> 标签：php, mysql

我想插入一个大约 25mb 的文件。在我的服务器中 max_allowed_pa​​cket 值为 16mb，我无法更改服务器配置。如何将文件插入 mysql blob？我在本地主机中使用了此代码。它工作正常。但这在我的在线服务器中不起作用。

```
$mysqli = new mysqli("localhost", "root", "", "test");

$stmt = $mysqli->prepare("INSERT INTO FILES_DATA (FileData) VALUES (?)"); 
$null = NULL; 
$stmt->bind_param("b", $null); 
$fp = fopen("Wildlife.wmv", "r");

echo('<br>fp='.$fp); 
while (!feof($fp)) { 
    $stmt->send_long_data(0, fread($fp, 8192)); 
} 
fclose($fp); 
$stmt->execute(); 
```

创建表的Sql：

```
CREATE TABLE IF NOT EXISTS 'files_data' ( 
    'Id' int(11) NOT NULL AUTO_INCREMENT, 
    'FileData' longblob, 
    PRIMARY KEY ('Id') 
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:35:36.320

一种解决方法 - 使用一些 BLOB 字段来存储文件。将您的 25MB 文件拆分为两个字节数组：16MB + 9MB，并使用 HEX 表示法将它们插入表中，例如 -

```
INSERT INTO table files(id, data1, data2) VALUES(1, 0x616263..., 0x78797A...) 
```

# java - 如何在 Eclipse 中运行播放框架单元测试

> ID：10810796
> 
> 赞同：4
> 
> 时间：2012-05-30T06:07:28.893
> 
> 标签：java, eclipse, junit, playframework, playframework-2.0

目前我正在尝试使用 java 中的 play 框架开发基于 Web 的应用程序。我想编写单元测试并通过 Elcipse 运行它。我试过了，但出现了找不到类的异常。我怎样才能做到这一点？有人可以帮忙吗？我正在使用播放框架 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:19:38.773

如果您想对调用框架的代码进行单元测试，那么您可以使用诸如[Mockito 之](http://gojko.net/2009/10/23/mockito-in-six-easy-examples/)类的对象模拟库来实现。您应该重构您的代码，以尽可能将与框架的接触点隔离到单独的类中。然后您可以模拟框架对象并测试您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:10:37.653

您可以使用用于 ecplise 的 ScalaTest 插件来执行此操作。您可以在[此处](https://github.com/scalatest/scalatest-eclipse-plugin)找到它以及您的 Eclipse 版本的更新链接。他们还在 scalatest.org 上提到了它，但他们的更新链接都没有仍然有效。

# iphone - 在 iPhone 中使用透明度裁剪图像

> ID：10810798
> 
> 赞同：23
> 
> 时间：2012-05-30T06:07:36.053
> 
> 标签：iphone, uiimage, transparency

我正在开发拼图类型的游戏，我有两个图像用于掩蔽，我已经实现了这个用于掩蔽的代码

```
- (UIImage*) maskImage:(UIImage *)image withMaskImage:(UIImage*)maskImage {

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGImageRef maskImageRef = [maskImage CGImage];

    CGContextRef mainViewContentContext = CGBitmapContextCreate (NULL, maskImage.size.width, maskImage.size.height, 8, 0, colorSpace, kCGImageAlphaPremultipliedLast);

    if (mainViewContentContext==NULL)
        return NULL;

    CGFloat ratio = 0;
    ratio = maskImage.size.width/ image.size.width;
    if(ratio * image.size.height < maskImage.size.height) {
        ratio = maskImage.size.height/ image.size.height;
    } 

    CGRect rect1 = {{0, 0}, {maskImage.size.width, maskImage.size.height}};
    CGRect rect2  = {{-((image.size.width*ratio)-maskImage.size.width)/2,-((image.size.height*ratio)-maskImage.size.height)/2},{image.size.width*ratio, image.size.height*ratio}};

    CGContextClipToMask(mainViewContentContext, rect1, maskImageRef);
    CGContextDrawImage(mainViewContentContext, rect2, image.CGImage);

    CGImageRef newImage = CGBitmapContextCreateImage(mainViewContentContext);
    CGContextRelease(mainViewContentContext);

    UIImage *theImage = [UIImage imageWithCGImage:newImage];
    CGImageRelease(newImage);
    return theImage;
} 
```

![在此处输入图像描述](../Images/ae73e10f482e790839c6fdb2d41fbb5f.png)

+

![在此处输入图像描述](../Images/6c0a106442a5716da1abf899a1883735.png)

=

这是我屏蔽后得到的最终结果。

![在此处输入图像描述](../Images/7c9997a79fa3c6e9330abf9f3106e125.png)

现在我想以参数方式裁剪图像![在此处输入图像描述](../Images/e65bd2a7ba26095ab68f4035d90819c9.png)等![在此处输入图像描述](../Images/845e59947f9d23fe30f028c03b30a4b6.png)（通过透明度裁剪图像）。

如果有人已经实现了这样的代码或关于这个场景的任何想法，请分享。

谢谢。

我正在使用这行代码作为**Guntis Treulands 的**建议

```
int i=1;
    for (int x=0; x<=212; x+=106) {
        for (int y=0; y<318; y+=106) {
            CGRect rect = CGRectMake(x, y, 106, 106);
            CGRect rect2x = CGRectMake(x*2, y*2, 212, 212);

            UIImage *orgImg = [UIImage imageNamed:@"cat@2x.png"];
            UIImage *frmImg = [UIImage imageNamed:[NSString stringWithFormat:@"%d@2x.png",i]];
            UIImage *cropImg = [self cropImage:orgImg withRect:rect2x];

            UIImageView *tmpImg = [[UIImageView alloc] initWithFrame:rect];
            [tmpImg setUserInteractionEnabled:YES];
            [tmpImg setImage:[self maskImage:cropImg withMaskImage:frmImg]];

            [self.view addSubview:tmpImg];
            i++;
        }
    } 
```

orgImg 是原始猫图像，frmImg 框架用于保存单个部件，在 photoshop 中蒙版，cropImg 是原始 cat@2x.png 的 106x106 裁剪图像。

我的裁剪功能如下

```
- (UIImage *) cropImage:(UIImage*)originalImage withRect:(CGRect)rect { 
    return [UIImage imageWithCGImage:CGImageCreateWithImageInRect([originalImage CGImage], rect)]; 
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-01T07:16:10.307

**更新 2**

我真的很想找到更好的方法来创建拼图，所以我花了两个周末创建了一个[拼图](https://github.com/GuntisTreulands/JigsawDemo)的演示项目。

它包含：

*   提供列/行数，它将生成具有正确宽度/高度的必要拼图。列/行越多 - 宽度/高度和轮廓/内联拼图形式越小。
*   每次随机生成边
*   可以在发射开始时随机定位/旋转碎片
*   每件都可以通过点击或两根手指旋转（就像真正的一块） - 但一旦松开，它会捕捉到 90/180/270/360 度
*   如果在其“可触摸形状”边界上触摸每件作品，则可以移动它（这主要是 - 相同的可见拼图形状，但没有内联形状）

缺点：

*   不检查一块是否在正确的位置
*   如果超过 100 件 - 它开始滞后，因为在拾取一块时，它会遍历所有子视图，直到找到正确的一块。

**更新**

感谢您更新问题。

我设法得到了这个：

![在此处输入图像描述](../Images/01d050f521db910c58d4f8a90b6589cd.png)

如您所见 - 拼图项目被正确裁剪，并且它在方形 imageView 中**（绿色是 UIImageView backgroundColor）。**

所以 - 我所做的是：

```
CGRect rect = CGRectMake(105, 0, 170, 170); //~ location on cat image where second Jigsaw item will be.

UIImage *originalCatImage = [UIImage imageNamed:@"cat.png"];//original cat image

UIImage *jigSawItemMask = [UIImage imageNamed:@"JigsawItemNo2.png"];//second jigsaw item mask (visible in my answer) (same width/height as cat image.)

UIImage *fullJigSawItemImage = [jigSawItemMask maskImage:originalCatImage];//masking - so that from full cat image would be visible second jigsaw item

UIImage *croppedJigSawItemImage = [self fullJigSawItemImage withRect:rect];//cropping so that we would get small image with jigsaw item centered in it. 
```

对于图像遮罩，我使用 UIImage 类别功能：（但您可能可以使用遮罩功能。但无论如何我都会发布它。）

```
- (UIImage*) maskImage:(UIImage *)image  
{     
     CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

     UIImage *maskImage = self;
     CGImageRef maskImageRef = [maskImage CGImage];

     // create a bitmap graphics context the size of the image
     CGContextRef mainViewContentContext = CGBitmapContextCreate (NULL, maskImage.size.width, maskImage.size.height, 8, 0, colorSpace, kCGImageAlphaPremultipliedLast);

     if (mainViewContentContext==NULL)
          return NULL;

     CGFloat ratio = 0;

     ratio = maskImage.size.width/ image.size.width;

     if(ratio * image.size.height < maskImage.size.height) {
          ratio = maskImage.size.height/ image.size.height;
     } 

     CGRect rect1  = {{0, 0}, {maskImage.size.width, maskImage.size.height}};
     CGRect rect2  = {{-((image.size.width*ratio)-maskImage.size.width)/2 , -((image.size.height*ratio)-maskImage.size.height)/2}, {image.size.width*ratio, image.size.height*ratio}};

     CGContextClipToMask(mainViewContentContext, rect1, maskImageRef);
     CGContextDrawImage(mainViewContentContext, rect2, image.CGImage);

     // Create CGImageRef of the main view bitmap content, and then
     // release that bitmap context
     CGImageRef newImage = CGBitmapContextCreateImage(mainViewContentContext);
     CGContextRelease(mainViewContentContext);

     UIImage *theImage = [UIImage imageWithCGImage:newImage];

     CGImageRelease(newImage);

     // return the image
     return theImage;
} 
```

**以前的答案**

你可以为每件准备一个面具吗？

例如，您有该帧图像。你能在 Photoshop 中将它剪切成 9 个单独的图像，在每个图像中它只会显示相应的部分。（所有其余的 - 删除）。

示例 - 第二片面膜：

![在此处输入图像描述](../Images/350f3c0f7d2d17bb19ce1e2687672531.png)

然后，您在猫图像上使用这些新创建的蒙版图像中的每一个 - 每幅都将蒙版所有图像，但只有一个和平。因此，您将拥有使用 9 个不同蒙版的 9 张图像。

对于更大或不同的拼图框 - 再次创建单独的图像蒙版。

这是一个基本的解决方案，但并不完美，因为您需要单独准备每个和平面具。

希望能帮助到你..

# shell - 重定向 ps 命令的输出，获取进程 ID 并使用 shell 脚本终止该进程

> ID：10810799
> 
> 赞同：5
> 
> 时间：2012-05-30T06:07:36.070
> 
> 标签：shell

我想编写一个 shell 脚本来查找给定用户的正在运行的进程，并通过获取相应的进程 ID 来终止该进程。

就像是

```
ps -ef | grep dinesh 
```

在此之后，我得到如下输出

```
dinesh 19985 19890  0 11:35 pts/552  00:00:00 grep dinesh 
```

这里 19985 是进程 ID。我想杀死那个进程。

我如何使用脚本来实现这一点？

我必须解析 ps 命令输出并获取进程 ID

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-30T06:13:24.180

```
kill `ps -ef | grep dinesh | awk '{ print $2 }'` 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-16T15:45:51.293

如果字符串定义了多个进程`'dinesh'`怎么办？grep 进程本身呢？这是一个更完整的答案

`ps -ef | grep dinesh | grep -v grep | awk '{print $2}' | xargs kill -9`

# coffeescript - coffeescript for循环中的变量范围？

> ID：10810815
> 
> 赞同：5
> 
> 时间：2012-05-30T06:09:27.020
> 
> 标签：coffeescript

```
array = [1,2,3,4]

for num in array
    //do something 
```

`num`在函数的其余部分的上下文中，值是什么？是否`num`将范围限定为循环？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-30T08:06:57.740

不，`num`不会局限于循环。正如您在编译的 JS 中看到的（正如@epidemian 指出的那样），它是当前范围变量，因此您也可以在函数的其余部分（例如当前范围的其余部分）中访问它。

但是在循环内定义函数回调的情况下要小心：

```
array = [1, 2, 3]

for num in array
  setTimeout (() -> console.log num), 1 
```

输出

```
3
3
3 
```

要在回调中捕获当前变量，您应该使用`do`简单地调用函数：

```
for num in array
    do (num) ->
        setTimeout (() -> console.log num), 1 
```

# php - base64_encode 随机盐

> ID：10810816
> 
> 赞同：0
> 
> 时间：2012-05-30T06:09:31.233
> 
> 标签：php, encoding, base64

我有一个生成随机盐的方法，然后我在上面使用 sha1() 。在我 sha1() 之后使用 base64_encode() 有多安全？当我说“安全”时，我的意思是，它是否有任何已知的碰撞或问题？我想使用 base64_encode() 作为一种使其在视觉上与 sha1() 哈希不同的方法，但不知道如果我这样做是否会使哈希（以任何方式）变弱。另外，有没有更好的方法来做我想要完成的事情，同时保持在 PHP4 中（是的，那就是 PHP 4）。

有几件事：我对加密不感兴趣，或者 base64_encode() 可以被解码。我知道它可以被解码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:25:23.587

[Base64](http://en.wikipedia.org/wiki/Base64)不是[散列](http://en.wikipedia.org/wiki/Cryptographic_hash_function)算法（除其他外，这些算法是单向的），它是一种可逆*[编码](http://en.wikipedia.org/wiki/Encoding#Character_encodings)*算法 - 采用一种*形式*的输入并将其转换为另一种*形式*- 内容（及其加密属性）保持不变。

这类似于其他可逆编码 - 例如，向后写入字符串的哈希不会影响它的任何其他属性。

如您所见，这不会使内容更安全，也不会降低安全性 - 它只会以不同的方式呈现它们。

**TL;DR：这毫无意义。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T06:34:24.510

只需使用[SHA-256](http://en.wikipedia.org/wiki/SHA-2)就可以了。

**PHP 4+ 的 SHA256 安全哈希算法** [http://www.nanolink.ca/pub/sha256/](http://www.nanolink.ca/pub/sha256/)

无需双重编码或加密。

# ajax - 如何在单选按钮选择上使用 ajax 在 Rails 3.0 中渲染部分内容？

> ID：10810817
> 
> 赞同：0
> 
> 时间：2012-05-30T06:09:34.583
> 
> 标签：ajax, ruby-on-rails-3

我第一次尝试了一些 ajax 但没有成功，我想使用 ajax 渲染部分单选按钮选择，这是我的代码：

我的脚本.js：

```
$(document).ready(function(){
$.ajax({
  url : "/income_vouchers/income_voucher_partial?$('form input[type=radio]:checked').val()="+$('form input[type=radio]:checked').val(),
  type: "GET",
  data: { 
        type: $('form input[type=radio]:checked').val() 
      }
});

 }); 
```

收入凭证.js.erb

```
$("#payment_mode").append('  

     <% if params[:type]== 'cheque' %> 
         <%= escape_javascript render :partial => "cheque" %>
     <% elsif params[:type]=='card' %> 
          <%= escape_javascript render :partial => "card" %>
     <% elsif params[:type]=='ibank'%> 
         <%= escape_javascript render :partial => "ibank" %>
      <% else params[:type] == 'cash' %>
    <% end %>
'); 
```

我来自：

```
<script type="text/javascript" src="/javascripts/voucher.js"></script>
<%= form_for(@income_voucher) do |f| %>
  <%= render 'shared/form_error', :object => @income_voucher %>
 <div >   
            <%= radio_button_tag :transaction_type,'cash', :checked => true %>
            <%= f.label :transaction_type, "Cash", :value => "cash" %>
            <%= radio_button_tag :transaction_type,'cheque' %>
            <%= f.label :transaction_type, "Cheque", :value => "cheque" %>
            <%= radio_button_tag :transaction_type,'card'%>
            <%= f.label :transaction_type, "Card", :value => "card" %>
            <%= radio_button_tag :transaction_type,'ibank'%>
            <%= f.label :transaction_type, "Internet Banking", :value => "ibank" %>
          </div>
      <div id = "payment_mode">
          <% if params[:type]== "cheque" %> 
                <%= render :partial => "cheque", :f => f %> 
          <% elsif params[:type]=='card' %> 
                <%= render :partial => "card", :f => f %>
          <% elseif params[:type] == 'ibank'%> 
              <%= render :partial => "ibank", :f => f %>
          <% else params[:type] == 'cash' %> 
       <% end %>
     </div>
  <%= f.submit %>
<% end %> 
```

这是我的控制器方法：

```
 class IncomeVouchersController < ApplicationController
def new
    @income_voucher = IncomeVoucher.new
    @invoices = current_company.invoices
    @income_voucher.build_payment_mode

    respond_to do |format|
      format.html # new.html.erb
      format.xml  { render :xml => @income_voucher }
    end
  end
 def create
    @income_voucher = IncomeVoucher.new(params[:income_voucher])

   transaction_type = params[:transaction_type]
    payment_mode = nil
    if transaction_type == 'cheque'
      payment = ChequePayment.new(params[:cheque_payment])
    payment.amount = @income_voucher.amount
    elsif transaction_type == 'card'
      payment = CardPayment.new(params[:card_payment])
    payment.amount = @income_voucher.amount
    elsif transaction_type == 'ibank'
      payment = InternetBankingPayment.new(params[:internet_banking_payment])
    payment.amount = @income_voucher.amount
    else
      payment = CashPayment.new
    payment.amount = @income_voucher.amount
    end
    payment_mode = PaymentMode.new
    payment_mode.transactionable = payment

    @income_voucher.payment_mode = payment_mode
    respond_to do |format|
      if @income_voucher.save

        format.html { redirect_to(@income_voucher, :notice => 'Income voucher was successfully created.') }
        format.xml  { render :xml => @income_voucher, :status => :created, :location => @income_voucher }
      else

        format.html { render :action => "new" }
        format.xml  { render :xml => @income_voucher.errors, :status => :unprocessable_entity }
      end
    end

   def income_voucher_partial
       @payment_mode = PaymentMode.new(params[:payment_mode])
  end 
 end 
```

i can see my view form but when select a radio button nothing is rende. 任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:44:29.183

首先：选择方法——或者你使用远程表单，或者ajax提交。如果您希望该用户选择单选按钮并单击提交以在 .html.erb 中呈现使用：

```
form_for(@income_voucher, :remote => true) 
```

删除 javascript ajax 并将 .js.erb 中的参数名称更改为 :transaction_type

如果您希望该用户选择单选按钮并立即渲染将 javascript ajax 移动到单选按钮更改事件处理程序，如下所示

```
$(your_element).change(function(){
  $.ajax(){
    url : "/income_vouchers/income_voucher_partial",
    data: { 
      type: $('form input[type=radio]:checked').val() 
    }
  }
}); 
```

并直接从 url 中删除参数设置 - 在“数据：”中设置参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:56:27.193

在我的 js.erb 文件中，我这样做了

```
$(".gradeU").remove();
    $("#abcd").after(  

    '<%= escape_javascript render :partial => params[:payment] unless params[:payment] == 'cash' %>'
    ); 
```

在我的脚本中：

```
$(document).ready(function(){
$("#check").click(function(){

 var payment = $('form input[type= radio]:checked').val()

 console.debug(payment); 

 $.ajax({

   type: 'GET',

   url : "/income_vouchers/income_voucher_partial?payment="+payment,

 });

 });
 }); 
```

而且我没有在表单中呈现相同的代码，谢谢

# jquery - 使用 Jquery 或 C# 设置浏览器模式

> ID：10810819
> 
> 赞同：3
> 
> 时间：2012-05-30T06:09:48.580
> 
> 标签：jquery, internet-explorer

每当我打开我的网站时，它都会以浏览器模式打开：IE8 兼容性视图。我不希望我的网站在兼容性视图 8 或 9 中打开。我需要使用 jquery 或 C# 设置 IE 的浏览器模式。已设置 IE 的文档模式，但无法使用 jquery 或 C# 设置 IE 的浏览器模式。

我不希望手动设置 IE 的浏览器模式。

请帮我解决这个问题..提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:10:52.433

我不相信您可以设置浏览器模式 - 这取决于用户。

您可以通过提供自己的`x-ua-compatible`指令来定义您的文档模式：

```
<meta http-equiv="x-ua-compatible" content="IE=edge" /> 
```

进一步：[定义文档兼容性](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx)

# iphone - 操纵 UIScrollView 高度以在其上方添加另一个 UIView

> ID：10810820
> 
> 赞同：1
> 
> 时间：2012-05-30T06:10:00.050
> 
> 标签：iphone, uiview, uiscrollview, height

我有一个 UIScrollView，我在其中添加了一个 TimeLineView(a UIView) 的子视图。为了显示；最初我只是做了同样的事情，TimeLineView 显示没有任何问题。但现在我想在 UIScrollView 上方有一个 UIView，我可以在其中显示有关时间线的一些信息。

我是否需要降低 UIScrollView 的高度，以便 UIView 适合其上方的空间？如果是，我会怎么做？

如果还有其他方法......那么请告诉我。我所有的初始实现如下：

在.h

```
@property (nonatomic, readonly) UIScrollView *scrollView;
@property (nonatomic, readonly) TimeLineView *timelineView; 
```

米

```
@synthesize scrollView = scrollView;
@synthesize timelineView = timelineView;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self prepareCustomView];
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)decoder 
{    
    self = [super initWithCoder:decoder];
    if (self) {
        [self prepareCustomView];
    }
    return self;
}

- (void)prepareCustomView {
    // Initialization code

    // Add main scroll view
[self addSubview:self.scrollView];

    // Add timeline view inside scrollview
[self.scrollView addSubview:self.timelineView];

}

- (UIScrollView *)scrollView
{
    if (!scrollView) {
        scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f, TOP_BAR_HEIGHT, self.bounds.size.width, self.bounds.size.height-TOP_BAR_HEIGHT-FOOTER_HEIGHT)];
        scrollView.contentSize = CGSizeMake(self.bounds.size.width,TIMELINE_HEIGHT);
        scrollView.scrollEnabled = TRUE;
        scrollView.backgroundColor =[UIColor whiteColor];
        scrollView.alwaysBounceVertical = TRUE;
    }
    return scrollView;
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:35:33.437

是的，您必须更改 y 轴并通过 UIView 的高度降低滚动视图的高度。如果滚动视图刚好低于 UIView，则必须按如下方式更改滚动视图的框架：

scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f, UIViewFrame.size.height+UIViewFrame.origin.y, self.bounds.size.width, self.bounds.size.height-TOP_BAR_HEIGHT-FOOTER_HEIGHT-UIViewFrame.size。高度）];

其中 UIViewFrame 是您的 UIView 的框架。

# php - 如何将输出从 PHP 传递到 Javascript？

> ID：10810821
> 
> 赞同：0
> 
> 时间：2012-05-30T06:10:03.973
> 
> 标签：php, javascript, parsing

我是 PHP 和 javascript 的新手。基本上我想将输出从 PHP 传递到 Javascript。

我有一个 readStatus.php 文件：

```
<?php
$myLocalFile = "LEDstate.txt";
$f = fopen($myLocalFile, 'rb');
$theData = fread($f, filesize($myLocalFile));
fclose($f);
if($theData == "1")
{
    echo "<img border='0' src='/cmos/images/device_on.png'>"; //image 1
}
else
{
    echo "<img border='0' src='/cmos/images/device_off.png'>"; //image 2
}
?> 
```

我想通过不同的条件将 2 放在我的 HTML 页面中的相同位置。

在 HTML 页面上，我有

```
<td><script type="text/javascript" src="readStatus.php"></td> 
```

这是行不通的。显然我做错了什么，但我无法弄清楚。在这里需要帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:13:04.663

尝试在隐藏的表单字段中打印您的 php 输出，然后使用 JS 从这些字段中读取并获取数据...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:21:25.337

您实际上试图传递给 javascript 的数据是什么？

最简单的方法是在页面中使用 php 编写 javascript：

```
<?php
$myLocalFile = "LEDstate.txt";
$f = fopen($myLocalFile, 'rb');
$theData = fread($f, filesize($myLocalFile));
fclose($f);
if($theData == "1")
{
    echo "<img border='0' src='/cmos/images/device_on.png'>"; //image 1
}
else
{
    echo "<img border='0' src='/cmos/images/device_off.png'>"; //image 2
}
?>

<script type="text/javascript">

jsVar = <?php echo $phpVar; ?>;

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:58:12.033

试试这个：

```
<?php 
    $myLocalFile = "LEDstate.txt"; 
    $f = fopen($myLocalFile, 'rb'); 
    $theData = fread($f, filesize($myLocalFile)); 
    fclose($f); 
    if($theData == "1") 
    { 
        echo "document.write(\"<img border='0' src='/cmos/images/device_on.png'>\");"; //image 1 
    } 
    else 
    { 
        echo "document.write(\"<img border='0' src='/cmos/images/device_off.png'>\");"; //image 2 
    } 

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:43:07.793

不要使用 JavaScript。

将您的主文件从 html 更改为 php-page 并执行以下操作：

```
<?php
$myLocalFile = "LEDstate.txt";
$f = fopen($myLocalFile, 'rb');
$theData = fread($f, filesize($myLocalFile));
fclose($f);
if($theData == "1")
{
    echo "<img border='0' src='/cmos/images/device_on.png'>"; //image 1
}
else
{
    echo "<img border='0' src='/cmos/images/device_off.png'>"; //image 2
}
?>
</td> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-30T06:17:59.337

这是一个基本的理解问题。您的浏览器从该代码中得到的是：

```
<script type="text/javascript">
<?php
$myLocalFile = "LEDstate.txt";
$f = fopen($myLocalFile, 'rb');
$theData = fread($f, filesize($myLocalFile));
fclose($f);
if($theData == "1")
{
    echo "<img border='0' src='/cmos/images/device_on.png'>"; //image 1
}
else
{
    echo "<img border='0' src='/cmos/images/device_off.png'>"; //image 2
}
?>
</script> 
```

那不是javascript吗？您正试图让浏览器将 PHP 代码解析为 Javascript，但这是不可能的。

你应该做的是在 td 中使用 include('readStatus.php') 或简单地将 php 代码粘贴到 td 中。

使用这两种解决方案中的任何一种，您都必须将 HTML 的扩展名更改为 PHP 以使其理解 PHP 代码，否则它会将其解析为文本

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-30T06:18:53.337

```
<?php
// do whatever you like
if($theData == "1") {
    $image = "<img border='0' src='/cmos/images/device_on.png'>"; //image 1
} else {
    $image = "<img border='0' src='/cmos/images/device_off.png'>"; //image 2
}
?> 
```

然后在html中你这样调用 -

```
<script type="text/javascript" src="<?php include('readStatus.php'); echo $image; ?>"> 
```

# iphone - 在视图控制器中调用的最后一个函数

> ID：10810824
> 
> 赞同：-5
> 
> 时间：2012-05-30T06:10:12.247
> 
> 标签：iphone, uiviewcontroller

我想将文本框值分配给在视图控制器中调用的最后一个方法中的变量。如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T06:16:57.953

`viewDidUnload`我猜是这样。或者您也可以在 中执行此操作`viewDidDisappear`，`viewWillDisappear`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:20:40.040

这个方法最后在视图控制器中被调用。

```
-(void)viewWillDisappear {

     // In this you can set your text box value.
} 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:18:13.557

根据您的要求，您正在寻找`viewDidLoad`,`applicationDidFinishLaunchingWithOptions`或`didEnterForeground`/ `Background`。看看这些方法，看看哪一种适合您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T06:19:15.503

我建议为您的文本字段实现 UITextFieldDelegate 并将您的变量设置为`textFieldDidEndEditing:`

# sql - IN和JOIN的区别

> ID：10810827
> 
> 赞同：1
> 
> 时间：2012-05-30T06:10:27.317
> 
> 标签：sql, tsql, sql-server-2005

我想知道下面提到的两个查询之间有什么区别，因为第一个查询在服务器上执行需要 10 多秒，而第二个查询在不到一秒的时间内执行......

**更新 - 我** 这里是从 SQL Server 复制和粘贴的实际查询及其执行计划（原样），对于我以前的查询造成的任何不便，我深表歉意...... :(

```
SELECT  REPLACE(CONVERT(VARCHAR(11), m.PlanDate, 106), ' ', '-') AS ManagmentPlanDate
FROM    ManagmentPlan m
        INNER JOIN Product p ON p.Product_ID = m.ProductID
        INNER JOIN Category c ON c.C_ID = p.C_ID
        LEFT OUTER JOIN Employee e ON e.emp_no = m.PrescribedBy
        LEFT OUTER JOIN dbo.Issue_Stock i ON i.serial_no = m.IssueStockID
        INNER JOIN dbo.Units u ON u.U_ID = p.U_ID
WHERE   ( ( @PatientID IS NULL )
          AND ( @VisitID IS NULL )
          AND ( m.WardRegNo = @WardRegNo )
        )
        OR --Get only cuurent admission TP 
        ( ( @PatientID IS NULL )
          AND ( @WardRegNo IS NULL )
          AND ( VisitID = @VisitID
                AND m.WardRegNo IS NULL
              )
        )
        OR -- Get Only Current OPD visit TP 
        ( ( @WardRegNo IS NULL )
          AND ( @VisitID IS NULL )
          AND ( visitid IN ( SELECT id
                             FROM   PatientVisit
                             WHERE  PatientID = @PatientID ) )
        )
        OR --Get All Visits TP
        ( ( @PatientID IS NULL )
          AND ( @VisitID IS NOT NULL )
          AND ( @WardRegNo IS NOT NULL )
          AND ( ( VisitID = @VisitID )
                OR ( m.WardRegNo = @WardRegNo )
              )
        ) -- Get Current OPD visit and cuurent admission TP (Both)
        AND m.Deleted != 1
        AND m.PatientDeptID = @PatientDeptID
GROUP BY REPLACE(CONVERT(VARCHAR(11), m.PlanDate, 106), ' ', '-')
ORDER BY CAST(REPLACE(CONVERT(VARCHAR(11), m.PlanDate, 106), ' ', '-') AS DATETIME) DESC 
```

![第一个Query的执行计划](../Images/48eb42966e1bd849833fbe265c12f51a.png)

和

```
SELECT  REPLACE(CONVERT(VARCHAR(11), m.PlanDate, 106), ' ', '-') AS ManagmentPlanDate
FROM    ManagmentPlan m
WHERE   m.ProductID IN ( SELECT Product_ID
                         FROM   Product
                         WHERE  C_ID IN ( SELECT    C_ID
                                          FROM      Category )
                                AND U_ID IN ( SELECT    U_ID
                                              FROM      Units ) )
        AND m.PrescribedBy IN ( SELECT  Emp_no
                                FROM    Employee )
        AND m.IssueStockID IN ( SELECT  Serial_No
                                FROM    Issue_Stock )
        AND ( ( @PatientID IS NULL )
              AND ( @VisitID IS NULL )
              AND ( m.WardRegNo = @WardRegNo )
            )
        OR --Get only cuurent admission TP 
        ( ( @PatientID IS NULL )
          AND ( @WardRegNo IS NULL )
          AND ( VisitID = @VisitID
                AND m.WardRegNo IS NULL
              )
        )
        OR -- Get Only Current OPD visit TP 
        ( ( @WardRegNo IS NULL )
          AND ( @VisitID IS NULL )
          AND ( visitid IN ( SELECT id
                             FROM   PatientVisit
                             WHERE  PatientID = @PatientID ) )
        )
        OR --Get All Visits TP
        ( ( @PatientID IS NULL )
          AND ( @VisitID IS NOT NULL )
          AND ( @WardRegNo IS NOT NULL )
          AND ( ( VisitID = @VisitID )
                OR ( m.WardRegNo = @WardRegNo )
              )
        ) -- Get Current OPD visit and cuurent admission TP (Both)
        AND m.Deleted != 1
        AND m.PatientDeptID = @PatientDeptID
GROUP BY REPLACE(CONVERT(VARCHAR(11), m.PlanDate, 106), ' ', '-')
ORDER BY CAST(REPLACE(CONVERT(VARCHAR(11), m.PlanDate, 106), ' ', '-') AS DATETIME) DESC 
```

![在此处输入图像描述](../Images/8a1ae50f54d27bb28838e4e534c05d8c.png)

虽然，它解决了我的查询速度或优化问题，但只是好奇这两个查询之间到底有什么区别，因为我认为第一个查询转换为第二个查询......

**UPDATE - I** 如您所见，这两个查询的不同之处仅在于将**JOINS**转换为**IN**语句...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:12:35.397

首先，您的第一个语句从**和**表中检索所有匹配的记录，`Products`而`Category`您的第二个语句仅从`Products`.

如果您将第一个语句更改为

```
SELECT p.*
FROM   Products p
       INNER JOIN Category c ON p.CatNo = c.CatNo 
```

**编辑**

*（如 Martin 所述）*请注意，如果`CatNo`在`Category`表中是唯一的，则两个语句的行数仅相同。将`INNER JOIN`返回与表中一样多的记录，`Category`而语句将返回与表中唯一的`IN`记录一样多的记录。`CatNo``Category`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:13:16.243

in 子句过滤从产品返回的行。内连接将列从类别添加到选择语句输出。

# c# - 函数参数中的条件

> ID：10810830
> 
> 赞同：0
> 
> 时间：2012-05-30T06:10:46.493
> 
> 标签：c#, linq

我是 C# 的新手。我想检查函数参数中的一些条件。

我必须编写函数，在他们的参数中检查哪些数字大于零并返回这个数字。如何解决？

我尝试了很多方法，但都没有奏效。

下面是我的代码：

`int[] arr = new int[] {2, 3, -5};`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:42:11.327

在上面

```
using System.Linq; 
```

在您的代码中

```
int[] arr = new int[] { 2, 3, -5 };
var result = arr.Where(x => x > 0).ToList(); 
```

这就是使用 linq 的方式。

如果您想要大于任意数字，那么您可以`Where(x=>x > someNumber)`将 someNumber 作为参数传递给其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:37:47.900

```
List<int> returnGreaterThanZero(int[] numbers)
    {
        List<int> greaterList = new List<int>();
        foreach (int oneNum in numbers)
        {
            if (oneNum > 0)
                greaterList.Add(oneNum);
        }

        return greaterList;

        // return greaterList.ToArray(); // if you want to return int[] instead of List<int>
    } 
```

当然，您也可以使用 linq 代替 foreach。

# javascript - 尝试使用 jQuery 创建菜单，但我的代码不起作用

> ID：10810835
> 
> 赞同：0
> 
> 时间：2012-05-30T06:11:07.397
> 
> 标签：javascript, jquery, jquery-selectors, jquery-events

我正在尝试使用 jQuery 创建一个菜单，就像当用户将鼠标悬停在一个元素上时，菜单会显示并在用户将鼠标移开时隐藏。

**我的html代码：**

```
<div class="span8 img">
   <img src="http://farm4.staticflickr.com/3198/2978120072_ca00381e08.jpg" alt="" width="550px" height="368px">
   <div class="like-box">Like</div> 
</div> 
```

**CSS：**

```
.like-box {
    display: block;
    background: rgba(255, 255, 255, .9);
    padding: 15px;
    position: absolute;
    left: -1px;
    width: 94%;
    bottom: -1px;
    display: none;
} 
```

**Javascript：**

```
$('.img').mouseover(function() {
        $(this).parent().siblings('.like-box').css('display', 'block');
        $(this).parent().siblings('.like-box').mouseleave(function() {
        $(this).css('display', 'none');
        })
    }); 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:23:44.033

`mouseleave`将事件绑定在`img`mouseover外，因为在mouseover内绑定事件，`like-box`每次都绑定mouseleave事件，不好也没必要。

```
$('.like-box').mouseleave(function() {
    $(this).css('display', 'none');
})
$('img').mouseover(function() {
    $(this)  // this point to img
      .next('.like-box')  // point to like-box
      .css('display', 'block');       
}); 
```

**[演示](http://jsfiddle.net/4gGwk/1/)**

**笔记：**

*   `$('.img')`应该是`$('img')`因为您的图像没有调用类`img`，`.`选择器用于访问类。阅读**[选择器](http://api.jquery.com/category/selectors/)**和[**类选择器**](http://api.jquery.com/class-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:25:33.253

你的问题在这里：

```
$(this).parent().siblings('.like-box') 
```

`$(this)`is `img`, the `parent()`is `div.span8.img`, and the `siblings()`are...none。

尝试：

```
$(this).next('.like-box') 
```

# javascript - 标题不符合 100% 宽度

> ID：10810836
> 
> 赞同：2
> 
> 时间：2012-05-30T06:11:10.247
> 
> 标签：javascript, html, css

请查看此网站：

[http://www.imageworkz.asia/cranium](http://www.imageworkz.asia/cranium)

尝试将窗口调整到小到出现水平滚动条的程度。将水平滚动条向右拖动，问题就出现了。页眉和页脚似乎没有相应调整。在 css 中，页眉和页脚元素具有 100% 的宽度。

有想法该怎么解决这个吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:18:48.010

这就是 100% 宽度的工作原理。元素的宽度与父元素相同，并且由于有滚动条，因此它比页面窄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:15:42.150

我没有看到问题，但如果您希望调整标题大小，我建议使用媒体查询根据屏幕大小进行调整。

[媒体查询示例](http://mediaqueri.es/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:27:28.770

您的文章元素具有固定宽度，因此当容器缩小时它会溢出容器。您可以尝试浮动您的容器 div，这应该确保它不会缩小。

```
<div id="container" style="display: block; float: left"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T06:28:02.783

您需要对`'body'`元素使用 CSS3 多个背景图像，然后使用 CSS3 PIE 使其在 IE 中工作[http://css3pie.com/documentation/supported-css3-features/#pie-background](http://css3pie.com/documentation/supported-css3-features/#pie-background)

```
body{
    background: url("/cranium/img/2 MAIN/bg.jpg") repeat 0 40px, url(headerbg.png) repeat-x left top, url(footerbg.png) repeat-x left bottom;
    -pie-background: url("/cranium/img/2 MAIN/bg.jpg") repeat 0 40px, url(headerbg.png) repeat-x left top, url(footerbg.png) repeat-x left bottom;
    behavior: url(PIE.htc);
} 
```

记住`-pie-background`是**相对于 HTML，而不是 CSS** 这肯定会解决你的问题。

# django - 使用 virtualenv 在 django 中设置导入错误

> ID：10810837
> 
> 赞同：0
> 
> 时间：2012-05-30T06:11:10.143
> 
> 标签：django, virtualenv

我正在使用ubuntu 12.04。我正在使用virtualenv，并且我安装了我需要的所有软件包。当我运行项目时它给了我错误但是当我运行另一个项目时它可以工作。我正在使用 python2.6.8 和 django 1.3.1

> Traceback（最近一次调用最后一次）：文件“manage.py”，第 4 行，在导入设置中 # 假设在同一目录中。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:33:41.283

尝试`settings.py`在 python shell 中导入，它会给你确切的错误。我认为您在 settings.py 中导入了一些其他模块，这些模块给了您`ImportError`.

# asp.net - 表单身份验证不起作用

> ID：10810839
> 
> 赞同：1
> 
> 时间：2012-05-30T06:11:31.417
> 
> 标签：asp.net, forms, authentication

我一直试图让 Forms Authenticaiton 在我的项目上工作，但无济于事。现在它只是本地的，我正在通过 Visual Studio 运行它。

第一次尝试（使用根目录 Web.Config）：

```
<?xml version="1.0"?>
<configuration>
<location path="~/Account/Admin.aspx">
<system.web>
  <authorization>
    <deny users="*"/>
    <allow users="*"/>
  </authorization>
  <authentication mode="Forms">
    <forms loginUrl="Login.aspx" timeout="30" name=".ARBBADMIN" requireSSL="false" slidingExpiration="true" defaultUrl="default.aspx">
      <credentials passwordFormat="Clear">
        <user name="user1" password="pass1"/>
      </credentials>
    </forms>
  </authentication>
</system.web>
</location>

</configuration> 
```

不起作用，即使我尝试拒绝所有用户

第二个选项，我在帐户文件夹中放置了一个单独的 web.config，我收到此错误：

在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

我已经用谷歌搜索并研究过，解决方案是使文件夹成为 IIS 目录，我不知道在 localhost 上运行时该怎么做。`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:27:15.060

你为什么允许相同的用户组并再次拒绝它

```
<authorization>
 <deny users="*"/>
 <allow users="*"/>
</authorization> 
```

我想以下足以让所有用户

```
<authorization>
 <allow users="*"/>
</authorization> 
```

如果我没有正确理解问题，请纠正我。

# iphone - 执行代价高昂的取消填充操作

> ID：10810840
> 
> 赞同：1
> 
> 时间：2012-05-30T06:11:32.230
> 
> 标签：iphone, ios

滤镜效果显示一些警告 执行代价高昂的取消填充操作！应用于图像后还有一些内存泄漏？

我的代码是：-

```
 CIImage *imagee = [Filter outputImage];
        CIContext *context = [CIContext contextWithOptions:nil];
        CGImageRef cgImage = [context createCGImage: 
                              imagee fromRect: imagee.extent];
        UIImage *resultUIImage = [[UIImage alloc ]initWithCGImage: cgImage];
        image=resultUIImage; 
        CGImageRelease(cgImage);
        cgImage=nil;
        SaveImage=image;
        [resultUIImage release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:32:05.387

您没有发布 CIImage，这很可能是泄漏的来源（Cocoa 内存语义要求类方法返回具有 +0 保留计数的对象，因此它们必须由调用者保留）。同时，您正在对图像执行昂贵的过滤。你看，图像可能会被填充几个额外的字节，以确保它们的行以第 2^n 个字节结束。但为了加载过滤器，iOS 必须取消填充图像，这涉及进入并遍历其字节以删除填充，这需要一段时间。如果它不影响任何性能方面的事情，您总是可以在后台线程上绘制。我不知道 CIImage 或 UIImage 有多安全，但 Core Graphics 通常是线程安全的。

# c# - 如何将图片框扩展为另一种形式？

> ID：10810842
> 
> 赞同：0
> 
> 时间：2012-05-30T06:11:51.433
> 
> 标签：c#, winforms

目前，我的应用程序显示 6 个图片框，每个显示一个不断更新的图片。

现在，我想点击图片框扩展的任何图片框并填满整个屏幕，只显示所选的图片框。

这可能吗？我必须创建另一个表单来执行此操作吗？

提前致谢，佩马尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:50:45.663

在每个图片框的 onclick 事件中（它们都可以指向同一个方法）

```
picturebox_Click(object sender .....)
{
    PictureBox pb= (PictureBox)sender;
    if (pb.dock==DockStyle.None)
        {
            pb.dock=DockStyle.Fill;
            pb.BringToFront();
        } 
    else
        pb.dock=DockStyle.None;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T06:36:57.083

没有看到任何代码，这是您如何以编程方式在单击时更改图片框。

```
pictureBox1.Dock = DockStyle.Fill 
```

所以你需要创建一个点击事件处理程序并像上面一样调用你的图片框的 Dock 函数。

*更新以回应评论*

有一个`DockStyle.None`将图片恢复到原始大小。

如果我对你的理解正确，你想要 6 张图片，然后当你点击一张图片时，它会填充，再次点击，缩小，点击另一张，填充等等......

为此，您将使用图片框上的 Dock 和 Visible 属性。现在，您似乎也在询问*如何*实际编写代码。好吧，如果您显示一些代码，我可以提供指点，而我将采取的方法是：

1.  将所有图片框放在一个列表中，并为它们分配一个状态`Big`或`Small`.

2.  为每个图片框写一个OnClick，改变点击图片框的状态。

3.  然后每个 OnClick 调用一个辅助函数，该函数遍历列表中的每个图片框并隐藏小的图片框和 DockStyle.Fill 大的图片框。

上面的算法能满足你的需要吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T07:06:01.490

尝试这样的事情。代码没有被重构，但我相信你可以做到

```
private bool isfill = false;

        private void pictureBox1_Click(object sender, EventArgs e)
        {
            if (!isfill)
            {
                pictureBox1.Dock = DockStyle.Fill;
                pictureBox2.Visible = false;
                isfill = true;
            }
            else
            {
                pictureBox1.Dock = DockStyle.None;
                pictureBox2.Visible = true;
                isfill = false;
            }
        }

        private void pictureBox2_Click(object sender, EventArgs e)
        {
            if (!isfill)
            {
                pictureBox2.Dock = DockStyle.Fill;
                isfill = true;
                pictureBox1.Visible = false;
            }
            else
            {
                pictureBox2.Dock = DockStyle.None;
                isfill = false;
                pictureBox1.Visible = true;
            } 
```

# javascript - 遍历数组并将每个值附加到列表中

> ID：10810844
> 
> 赞同：2
> 
> 时间：2012-05-30T06:11:52.743
> 
> 标签：javascript, jquery, arrays

```
<ul>
<li></li>  
<li></li>   
<li></li>   
<li></li>   
<li></li>    
</ul>

var obj = { one:1, two:2, three:3, four:4, five:5 };

 var list = $("div");
    jQuery.each(obj, function(i, val) {
  list.html( val);
}); 
```

我正在尝试遍历此数组并将每个值附加到列表项中，使其如下所示：

```
<ul>
<li>1</li>  
<li>2</li>   
<li>3</li>   
<li>4</li>   
<li>5</li>   
</ul> 
```

我的问题是代码只出现了数组中的最后一项：5。

不知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:13:55.600

使用元素的值来定位`li`它应该放置的位置：

```
$.each( obj, function( i, v ) {
  $("ul li").eq(v-1).html(v);
}); 
```

演示：http: [//jsfiddle.net/3RAQC/](http://jsfiddle.net/3RAQC/)

结果如下：

```
<ul>
    <li>1</li>  
    <li>2</li>   
    <li>3</li>   
    <li>4</li>   
    <li>5</li>    
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:15:48.207

使用 list.append(val) 而不是 list.html(val)

.append() 添加到 html 内容，而 .html 总是用参数替换整个 html 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T06:17:13.633

你既没有一个，也`<div>`只有一个`<ul>`。你没有一个数组，而是一个对象（可以称为关联数组，好的）。然后您选择一个元素，并在每次迭代中（重新）设置其内容，以便只出现最后一个值。更好的：

```
var ul = $('ul').empty();
$.each(obj, function(prop, val) {
    ul.append("<li>"+val+"</li>");
    // or better:
    $("<li>").text(val).appendTo(ul); // ?
}); 
```

# hadoop - 如何明确定义数据节点以将特定给定文件存储在 HDFS 中？

> ID：10810845
> 
> 赞同：2
> 
> 时间：2012-05-30T06:11:53.087
> 
> 标签：hadoop, hdfs

我想编写一个脚本或类似 .xml 文件，它明确定义 Hadoop 集群中的数据节点以存储特定的文件块。例如：假设有 4 个从节点和 1 个主节点（hadoop 集群共有 5 个节点）。有两个文件 file01(size=120 MB) 和 file02(size=160 MB)。默认块大小 =64MB

现在我想在从节点 1 存储两个 file01 块之一，在从节点 2 存储另一个。类似地，从节点 1 的三个文件 02 块之一，从节点 3 的第二个文件块和从节点 4 的第三个文件块之一。所以，我的问题是我该怎么做？

实际上有一种方法：每次更改 conf/slaves 文件以存储文件。但我不想这样做所以，还有另一种解决方案吗？我希望我的观点很清楚。等待您的友好回应..!!!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:32:04.693

没有方法可以实现您在此处提出的要求 - 名称节点将根据机架配置、复制因子和节点可用性将块复制到数据节点，因此即使您确实设法在两个特定数据节点上获得了一个块，如果一个如果这些节点发生故障，名称节点会将块复制到另一个节点。

您的要求还假设复制因子为 1，这不会为您提供任何数据冗余（如果您丢失数据节点，这是一件坏事）。

如果您想保持集群均匀分布，请让名称节点管理块分配并定期使用平衡器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T06:48:22.807

NameNode 是决定区块位置的最终权威。Jira 有关于使该算法可插入的要求： [https](https://issues.apache.org/jira/browse/HDFS-385)
://issues.apache.org/jira/browse/HDFS-385 但不幸的是它是在 0.21 版本中，这不是生产（虽然工作还不错） .
如果您处于研究状态，我建议您将算法插入 0.21，然后等待 0.23 变为生产，或者，如果您现在确实需要，将代码降级到 0.20。

# sql - 在一列中将大于给定日期的数据更改为 NULL。获取关键错误

> ID：10810846
> 
> 赞同：0
> 
> 时间：2012-05-30T06:12:02.637
> 
> 标签：sql, null, key

我有一列充满日期，其中一些是重复的，我想将所有大于 2012-05-28 的日期更改为 NULL。这是我正在使用的语句：

```
UPDATE my_data SET date_firstnewtumor=NULL
WHERE date_firstnewtumor>2012-05-28; 
```

但是，MySQL Workbench 给了我这个错误消息：“......你试图更新一个没有使用键列的 WHERE 的表。”

然后我在 MySQL 命令行客户端中尝试了上面的代码，它将整列 date_firstnewtumor 更改为 NULL。

我在网上查看了代码示例，我可以发誓他们的 WHERE 语句与我的相似。我究竟做错了什么？

感谢您的意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:14:24.463

我认为您只想正确指定[日期文字](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-literals.html)：

```
WHERE date_firstnewtumor > '2012-05-28'; 
```

或者简单地说：

```
WHERE date_firstnewtumor > 20120528; 
```

# php - 使用 Curl 或其他方式检索完全呈现的页面？

> ID：10810848
> 
> 赞同：6
> 
> 时间：2012-05-30T06:12:09.750
> 
> 标签：php, javascript, curl

有没有办法从带有 javascript 后渲染的页面中检索完全渲染的 html ？如果我使用 curl，它只是检索基本 html，但缺少 iframe、javascript 处理等的后期渲染。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:15:41.347

由于没有其他人回答（除了上面的补充，但我稍后会谈到）我会尽可能地提供帮助。

没有“简单”的答案。PHP 不能原生处理 javascript/导航 DOM，所以你需要一些可以的东西。

我看到的你的选择：

1.  如果您正在抓屏（这是我希望的，因为您也希望加载 Flash），我建议您使用其中一种商业 API 来执行此操作。您可以在此列表中找到一些[http://www.programmableweb.com/apitag/?q=thumbnail](http://www.programmableweb.com/apitag/?q=thumbnail)，例如[http://www.programmableweb.com/api/convertapi-web2image](http://www.programmableweb.com/api/convertapi-web2image)

2.  否则，您需要自己运行一些可以在您的服务器上或连接到您的服务器上处理 Javascript 和 DOM 的东西。为此，您需要一个可以在服务器端运行并获取所需信息的自动浏览器。按照上面 Bergi 评论中的列表，您需要测试一个合适的解决方案 - 主要的 Selinium 非常适合在已知网站上进行“单元测试”，但我不确定如何编写脚本来处理随机网站，例如。正如您（可能）只有一个“自动浏览器”并且您不知道加载每个页面需要多长时间，您需要将请求排队并一次处理一个。您还需要确保处理弹出警报（），安装所有第三方库（您说要闪存？！），处理重定向，超时和潜在的内存消耗（如果不停地运行这个，你会定期想要杀死你的浏览器并重新启动它以清理内存！）。还可以处理病毒攻击、弹出窗口和完全关闭浏览器的请求。

3.  第三，VB 有一个网络浏览器组件。我很久以前在一个项目中使用它来做类似的事情，但是在一个已知的站点上。.NET 是否可行（对我来说，这是一个巨大的安全风险），以及你如何为未知数编程（例如弹出窗口和 Flash）我不知道。但是，如果您很绝望，那么喜欢冒险的 .NET 开发人员可能会提出更多建议。

总而言之 - 如果您想要的不仅仅是屏幕抓取并且可以选择选项 1，祝您好运；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T17:16:36.520

如果您正在寻找没有 GUI 的可编写脚本的东西，您可以使用无头浏览器。我已经将[PhantomJS](http://phantomjs.org)用于类似的任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-01T09:20:54.500

如果仍然相关，我发现最简单的方法是使用 PhantomJs as a Service；

```
public string GetPagePhantomJs(string url)
        {
            using (var client = new System.Net.Http.HttpClient())
            {
                client.DefaultRequestHeaders.ExpectContinue = false;
                var pageRequestJson = new System.Net.Http.StringContent(@"{'url':'" + url + "','renderType':'plainText','outputAsJson':false }");
                var response = client.PostAsync("https://PhantomJsCloud.com/api/browser/v2/SECRET_KEY/", pageRequestJson).Result;
                return response.Content.ReadAsStringAsync().Result;

            }
        } 
```

这真的很简单，订阅该服务时，有一个免费计划，每天允许 500 页。SECRET_KEY 将替换为您将获得的您自己的密钥。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-07T15:12:36.953

使用 w3m 或 lynx 之类的“终端”浏览器。即使您要访问的站点需要登录，这也是可能的，例如：

```
curl [-u login:pass] http://www.a_page.com | w3m -T text/html -dump 
```

或者

```
curl [-u login:pass] http://www.a_page.com | lynx -stdin -dump 
```

这应该为您提供包含所有框架等的整个 html。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-06-03T02:52:39.717

看看这个命令行 IECapt.exe

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-05-27T16:53:16.423

它不支持javascript，但`lynx`在我需要处理来自网页的数据的情况下对我很有用。通过这种方式，我得到了（纯文本）渲染，并且不必像使用`curl`.

```
lynx -nonumbers -dump -width=9999999 ${url} | grep ...  et cetera. 
```

# javascript - 什么是实现可拖动分隔符的轻量级脚本/jQuery 扩展？

> ID：10810850
> 
> 赞同：3
> 
> 时间：2012-05-30T06:12:22.793
> 
> 标签：javascript, html

我需要一个 JavaScript 脚本或一个 jQuery 插件，它可以让我通过拖动水平“分隔线”来相应地调整两个 div 的大小（嗯，它水平分隔，但分隔线是垂直的）。最好在这里留下一张照片：

```
 _______________________
|           |           |
|           |           |
|           |           |
|       <-- | -->       |
|           |           |
|           |           |
|           |           |
|___________|___________| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:15:45.323

我用过[jQuery Splitter Plugin](http://methvin.com/splitter/)。效果很好。

# layout - 为什么网页布局的默认标准尺寸是 1024x768？

> ID：10810855
> 
> 赞同：0
> 
> 时间：2012-05-30T06:12:38.343
> 
> 标签：layout, web, size, resolution

我一直在访问网站并开发一些网站，直到现在我不知道为什么这些网页布局的默认大小是 1024x768。换句话说，为什么他们忽略了屏幕的其他部分？为什么他们不根据像 1920x2120 这样的高分辨率来开发页面？

我访问了从 Yahoo.com 到 Pepsi.com 的大多数网站，所有网站都将左右边距占据了屏幕的一半，以适应 1024x768 的舞台上的元素。

是因为他们需要在移动设备上打开这些网站吗？还是有更深层的技术原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:20:22.740

二十年前，GUI 应用程序的通用“标准”是 640x480。

就个人而言，我很少运行任何超过 1280x1024 的显示器。目前，我正在使用两个显示器。

确实必须有*一些*“最小公分母”。而且，没有特别好的（或坏的）原因，目前它恰好是 1024x768。

恕我直言... PSM

PS：

这是一张好桌子。它已有 5 年以上的历史......但可能仍然非常准确。特别是考虑到智能手机显示屏在过去五年中的重要性日益增加：

[http://magiclamp.net/?PageID=102](http://magiclamp.net/?PageID=102)

```
Date Range                    April 2005     June/July 2005    Oct-Dec 2005   Jan-Mar 2006
Sample Set (Unique Visitors)  500K           1.5MM             1.8MM          1.9MM
# of Site for Sample          2              3                 3              3
800 x 600                     21%            16%               14%            12%
1024x768                      65%            67%               68%            69%
1280 x 1024                   10%            15%               16%            18%
1600 x 1200                                                    1.5%           1.5% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:44:27.363

这只是一个好的设计选择问题。1024 x 768[似乎](http://www.w3schools.com/browsers/browsers_display.asp)仍然是一个足够流行的分辨率；因此，网页设计师为了确保最大的覆盖面，将他们的网站设计为可供使用 1024 x 768*及更高*分辨率的人查看（如预期的那样） 。简而言之，这样做主要是为了确保向后兼容性，并且正如 chirag 指出的那样，与移动设备具有更大的兼容性。

您应该仔细研究上面链接页面上的信息。所显示的趋势极大地暗示了当前的设计礼仪，这种礼仪多年来是如何演变的，以及为什么。它还将让您了解经验丰富的网页设计师的思维方式。毕竟，您不希望您的网站被不希望的滚动条从右边伸出来；-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T06:29:11.080

主要原因是人们希望越来越多的人访问他们的网站。大约 10 年前，1024x768 是最常见的显示分辨率。在那之后，虽然出现了新的和更高分辨率的显示器，但低端设备的垂直分辨率 (768) 并没有显着提升。即使是现在（2012 年初），几乎 50% 的显示器使用最大 800p 作为垂直分辨率。

所以 1024x768 是人们设计网站的标准最小分辨率。如果您设计更宽/更大的分辨率，使用这些设备的人很可能在屏幕顶部看不到它们（不滚动），并且内容可能不会被注意到。

检查此维基百科链接以获取更详细的统计信息 [http://en.wikipedia.org/wiki/Display_resolution](http://en.wikipedia.org/wiki/Display_resolution)

要回答另一个问题，为什么不拥有多个版本？主要有两个原因：

1.  许多网站实际上是动态可扩展的。例如，检查 facebook 或 google 图片。根据您的屏幕分辨率，他们使用额外的区域来容纳额外的内容。此策略通常适合具有可动态适应的内容块的网站。
2.  有研究表明，为了获得最佳和快速阅读，大约 6-7 个单词或 500 像素（不是确切的数字）是最佳宽度。除此之外的任何事情都会导致水平跨度过大并降低阅读速度。这会影响更多关于文本的网站的分辨率，例如博客和新闻网站。

# javascript - 在使用 jQuery UI 拖动的情况下，外部旋转 div 内的内部 div 不会跟随鼠标

> ID：10810857
> 
> 赞同：18
> 
> 时间：2012-05-30T06:12:59.467
> 
> 标签：javascript, jquery, html, jquery-ui, graphics

我在外部 div 中有一个内部 div。内部 div 是可拖动的，外部 div 旋转 40 度。这是一个测试用例。在实际情况下，它可以是任何角度。还有另一个名为 point 的 div，其位置如图所示。（我来自 Flash 背景。在 Flash 中，如果我要拖动内部 div，即使它包含在外部旋转 div 中，它也会跟随鼠标。）但是在 HTML 中，内部 div 不会跟随鼠标，因为它可以看到从小提琴。我希望 div 'point' 完全跟随鼠标。这可能吗。我尝试使用三角函数来处理它，但无法让它工作。

[http://jsfiddle.net/bobbyfrancisjoseph/kB4ra/8/](http://jsfiddle.net/bobbyfrancisjoseph/kB4ra/8/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T14:11:34.323

这是我解决这个问题的方法。

[http://jsfiddle.net/2X9sT/21/](http://jsfiddle.net/2X9sT/21/)

我把点放在旋转的 div 之外。这样我就可以确保拖动事件会产生正常的行为（不会向奇怪的方向跳跃）。我使用可拖动处理程序将点附加到鼠标光标。

在拖动事件中，我转换拖动偏移以反映新值。这是通过以与旋转角度相反的方向围绕外部 div 中心旋转偏移量来完成的。

我对其进行了测试，它似乎可以在 IE9、Firefox 和 Chrome 中运行。

您可以尝试不同的角度值，它应该可以正常工作。

我还修改了 HTML，因此可以将相同的逻辑应用于页面中的多个 div。

**编辑：**

我更新了脚本，以解释包含行为以及评论中建议的级联旋转。

我也正在使`outer`div 可拖动到另一个 div 中。现在它几乎可以工作了。我只需要能够更新拖动 div 的中心来修复拖动行为。

尝试拖动红色 div。

[http://jsfiddle.net/mohdali/kETcE/39/](http://jsfiddle.net/mohdali/kETcE/39/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T10:00:44.923

我现在在工作，所以我不能为你做这项工作，但我可以解释解决问题的*最简洁*方法背后的数学原理（可能不是最简单的解决方案，但与其他一些黑客不同，它**更**灵活一旦你得到它实施）。

首先，您必须意识到您正在使用的旋转插件正在对您的元素 ( `transform: rotate(30deg)`) 进行转换，然后浏览器将其更改为矩阵 ( `matrix(0.8660254037844387, 0.49999999999999994, -0.49999999999999994, 0.8660254037844387, 0, 0)`)。其次，有必要了解，通过旋转一个元素，子元素的轴是绝对旋转的（在寻找了很长时间之后，没有任何*真正的*技巧可以绕过这个，这是有道理的），因此唯一的正如其他一些答案所建议的那样，方法是将孩子从父母身边带走，但我假设这不是您的应用程序中的一个选项。

现在，我们因此需要做的是取消父级的原始矩阵，这是一个两步过程。首先，我们需要使用以下代码找到矩阵：

```
var styles = window.getComputedStyle(el, null);

var matrix = styles.getPropertyValue("-webkit-transform") ||
             styles.getPropertyValue("-moz-transform") ||
             styles.getPropertyValue("-ms-transform") ||
             styles.getPropertyValue("-o-transform") ||
             styles.getPropertyValue("transform"); 
```

接下来，矩阵将是一个字符串，如上所示，您需要将其解析为可以使用的数组（有 jquery 插件可以做到这一点）。完成后，您将需要取矩阵的逆矩阵（在您的示例中归结为`rotate(-30deg)`），这可以使用例如[这个库](http://sylvester.jcoglan.com/api/matrix.html#inverse)（或您的数学书：P）来完成。

最后你需要做逆矩阵时间（使用我之前提到的矩阵库）一个平移矩阵（使用[这个工具](http://www.useragentman.com/matrix)来弄清楚它们的外观（平移是沿着 x 和 y 轴的移动，有点像 left 和 top on一个相对定位的元素，但硬件加速和矩阵变换 css 属性的一部分））这将为您提供一个新矩阵，您可以将其应用于您的子元素，为您提供与父元素相同轴上的平移。

现在，您可以通过使用和手动三角函数¹仅针对特定旋转（完全绕过对逆矩阵甚至矩阵的全部需求）执行此操作来大大简化此操作`left`，但这具有明显的缺点，即它*仅*适用于正常旋转并且会需要根据使用的每个特定情况进行更改。`top`

 *哦，如果你现在认为*flash*更容易，相信我，在 HTML/CSS 中旋转轴的方式很有意义，[如果你想要类似 flash 的行为，请使用这个库](http://www.createjs.com/#!/EaselJS)。

* * *

^(1 例如，这就是 Mohamed Ali 在他的回答中所做的（[他的 jsFiddle](http://jsfiddle.net/2X9sT/21/)`transformOffset`中的函数）。)

* * *

^(免责声明，自从我做这些事情以来已经有一段时间了，我对矩阵的理解从来没有非常好，所以如果你发现任何错误，请**指出**/修复它们。)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T09:50:17.973

仅对于 Webkit，该`webkitConvertPointFromPageToNode`函数处理缺失的行为：

```
 var point = webkitConvertPointFromPageToNode(
       document.getElementById("outer"),
       new WebKitPoint(event.pageX, event.pageY)
   ); 
```

jsFiddle：http: [//jsfiddle.net/kB4ra/108/](http://jsfiddle.net/kB4ra/108/)

要涵盖其他浏览器，您可以使用此 StackOverflow 答案中描述的方法：[https ://stackoverflow.com/a/6994825/638544](https://stackoverflow.com/a/6994825/638544)

```
function coords(event, element) {
  function a(width) {
    var l = 0, r = 200;
    while (r - l > 0.0001) {
      var mid = (r + l) / 2;
      var a = document.createElement('div');
      a.style.cssText = 'position: absolute;left:0;top:0;background: red;z-index: 1000;';
      a.style[width ? 'width' : 'height'] = mid.toFixed(3) + '%';
      a.style[width ? 'height' : 'width'] = '100%';
      element.appendChild(a);
      var x = document.elementFromPoint(event.clientX, event.clientY);
      element.removeChild(a);
      if (x === a) {
        r = mid;
      } else {
        if (r === 200) {
          return null;
        }
        l = mid;
      }
    }
    return mid;
  }
    var l = a(true),
        r = a(false);
    return (l && r) ? {
        x: l,
        y: r
    } : null;
} 
```

这样做的缺点是当鼠标在目标元素之外时不起作用，但是应该可以将它覆盖的区域扩展任意数量（尽管无论如何都很难保证它覆盖整个窗口大的）。

jsFiddle：http: [//jsfiddle.net/kB4ra/122/](http://jsfiddle.net/kB4ra/122/)

这可以通过添加 mousemove 事件扩展到适用于#point：

```
$('#outer').mousemove(function(event){
   var point = convertCoordinates(event, $("#outer"));

    $("#point").css({left: point.x+1, top: point.y+1});          
}); 
```

请注意，我将#point的x和y坐标调整了1px，以防止它直接位于鼠标下方；如果我不这样做，那么它会阻止拖动#inner。另一种解决方法是将处理程序添加到#point，以检测鼠标事件并将它们传递给直接位于#point 下方的任何元素（和stopPropagation，这样它们就不会在较大的页面元素上运行两次）。

jsfiddle：http: [//jsfiddle.net/kB4ra/123/](http://jsfiddle.net/kB4ra/123/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T12:39:59.547

在我看来，如果您不旋转 div，则 div 会完全跟随鼠标。这可能是插件的问题..也许您可以正确模拟可拖动功能？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T21:14:54.047

这基本上会做你需要的，虽然它是错误的。绑定拖动事件处理程序，截取ui对象并修改为使用父元素的偏移X和Y。所有 X、Y、顶部、左侧等都在这些对象中。今天我有更多时间的时候，我会试着给你一个更好的例子。祝你好运！

[http://jsfiddle.net/kB4ra/107/](http://jsfiddle.net/kB4ra/107/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-11T19:06:10.377

可能这是您的 jquery 库的问题，或者您可以通过分配内部 div 和外部 div 的 z-order 值来检查这一点，确保您为内部 div 提供更高的数字。*

# asp.net - MVC3 - 向控制器添加文件夹？

> ID：10810860
> 
> 赞同：6
> 
> 时间：2012-05-30T06:13:11.917
> 
> 标签：asp.net, asp.net-mvc-3

我想了解是否可以在文件夹中添加其他文件`Controller`夹。我的理由很简单：我想划分我的项目管理和客户端。

示例：我有一个名为`Post`具有操作的控制器`Index, Details, Delete, Create, Edit`。我想将一个控制器制作为`user`包含. 然后我将能够轻松区分什么是什么，并将管理员验证放在整个管理员类中。 另一个原因是我希望用于管理我的网站的 url 看起来像，而不是.`Index, Details``admin``Delte, Create, Edit`
`/admin/post/delete``/post/delete`

那么有可能吗，如果是这样，那么实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T06:17:31.147

听起来你想使用 MVC 区域？ [http://www.c-sharpcorner.com/UploadFile/b19d5a/areas-in-Asp-Net-mvc3/](http://www.c-sharpcorner.com/UploadFile/b19d5a/areas-in-Asp-Net-mvc3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T10:09:29.863

这只是将控制器放在**Controllers**文件夹中的约定。
实际上**MVC在****当前**加载的**程序**集中找到控制器。
您甚至可以将它们放置在**其他组件**中。
因此，可以随意在**Controllers中创建其他文件夹**

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-30T06:25:53.513

如果您使用的是 Ruby on Rails，是的，您可以。在您的路由文件 config/routes.rb 中，添加以下内容：

```
 map.namespace :admin do |admin|
     admin.resources :posts
 end 
```

转到您的终端并导航到您的项目，运行 rake 路由。现在你在 admin 命名空间下获得你的帖子控制器......你的 url 将是：

```
.../admin/posts 
```

# objective-c - 你如何绘制到 CGContextRef 并保存为 png？

> ID：10810869
> 
> 赞同：1
> 
> 时间：2012-05-30T06:14:14.793
> 
> 标签：objective-c, macos, cocoa

我有一个 void 绘制到通常在自定义视图的 drawRect 例程中提供的给定 CGContextRef 但是我还需要生成它可以绘制到的 CGContextRef 将允许我将生成的图像保存为 PNG 文件.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:20:27.663

事实证明这很简单：

```
NSImage *toSave = [[NSImage alloc] initWithSize:CGSizeMake(600, 900)];

[toSave lockFocus];

CGContextRef context = [[NSGraphicsContext currentContext] graphicsPort];

//drawing code

[toSave unlockFocus];

NSBitmapImageRep *imgRep = [[toSave representations] objectAtIndex: 0];

NSData *data = [imgRep representationUsingType: NSPNGFileType properties: nil];

[data writeToFile: @"/path/to/file.png" atomically: NO]; 
```

# c# - Unity 容器调用非默认 ctor

> ID：10810874
> 
> 赞同：1
> 
> 时间：2012-05-30T06:14:42.090
> 
> 标签：c#, unity-container

我打电话

```
mActionLogManager = container.Resolve<IActionLogManager>(); 
```

并且在调试时我看到它只通过非默认 ctor

```
 public ActionLogManager(IUnityContainer container)
        {
            Init(container);
        } 
```

不`unity`总是调用无参数的ctor吗？

我试图编写和删除无参数 ctor。

*   它存在的时候没有经过它，

*   并且在丢失时没有抛出异常。

**更新：** 如果是这样，它如何知道要在 ctor 中填写哪些参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T06:20:26.230

这是 Unity 的默认行为。它尝试通过使用具有最多参数的 ctor 来解析实例。如果要指示 Unity 使用默认 ctor，则需要按如下方式注册类型：

```
container.Register<IActionLogManager,MyActionLogManager>(new InjectionConstructor()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T06:19:06.997

给定多个构造函数的选择，Unity 将调用具有*最多*参数的构造函数 - 以提供最丰富的服务集。如果要覆盖它，请将`[InjectionConstructor]`属性添加到要调用的构造函数中。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ff660875%28v=pandp.20%29)：

> 当一个目标类包含多个构造函数时，Unity 将使用应用了 InjectionConstructor 属性的那个。如果有多个构造函数，并且没有一个带有 InjectionConstructor 属性，Unity 将使用参数最多的构造函数。如果有多个具有相同参数数量的“最长”构造函数，Unity 将引发异常。

# c# - 如何为报表查看器 WPF 使用参数化存储过程

> ID：10810875
> 
> 赞同：1
> 
> 时间：2012-05-30T06:14:43.940
> 
> 标签：c#, wpf, reporting-services, report

我正在使用 WPF 中的报表查看器。

我有在服务器端生成的动态 sql 查询。然后我将此查询传递给存储过程并执行并返回结果。

**问题 ：**

我想使用这个存储过程来生成报告。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:40:12.507

我在网上搜索了很多，但所有使用静态查询的存储过程的解决方案。为了解决这个问题，我使用了以下步骤：-

1.)在存储过程中进行静态查询。

2.)对数据集使用存储过程。

3.）将此数据集与 .rdlc 文件绑定。

4.）构建项目。

5.) 将存储过程更改为前一个。

6.) 现在刷新数据集。

你现在得到工作报告:-)

# postgresql - Heroku Blob 不存在

> ID：10810876
> 
> 赞同：4
> 
> 时间：2012-05-30T06:15:00.780
> 
> 标签：postgresql, heroku

如果 Heroku Postgres 不允许 blob，我应该使用什么来存储二进制数据？

```
2012-05-30T05:59:36+00:00 app[web.1]: [debug] c.j.b.StatementHandle - create table image_info (
2012-05-30T05:59:36+00:00 app[web.1]: id                        bigint not null,
2012-05-30T05:59:36+00:00 app[web.1]: image_id                  varchar(255),
2012-05-30T05:59:36+00:00 app[web.1]: subject_id                varchar(255),
2012-05-30T05:59:36+00:00 app[web.1]: web_thumbnail             blob,
2012-05-30T05:59:36+00:00 app[web.1]: created_date              timestamp,
2012-05-30T05:59:36+00:00 app[web.1]: image                     blob,
2012-05-30T05:59:36+00:00 app[web.1]: thumbnail                 blob,
2012-05-30T05:59:36+00:00 app[web.1]: constraint pk_image_info primary key (id))
2012-05-30T05:59:36+00:00 app[web.1]: [debug] c.j.b.PreparedStatementHandle - update play_evolutions set last_problem = 'ERROR: type "blob" does not exist
2012-05-30T05:59:36+00:00 app[web.1]:   Position: 176 [ERROR:0, SQLSTATE:42704]' where id = 1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T06:47:16.670

使用[bytea](http://www.postgresql.org/docs/current/interactive/datatype-binary.html)， blob 不是 PostgreSQL 数据类型。

# c - 在 C 中编译 Xml 解析器时出现线程错误？

> ID：10810877
> 
> 赞同：3
> 
> 时间：2012-05-30T06:15:16.037
> 
> 标签：c, mxml

```
[root@localhost mxml-2.7]# gcc -o xml XmlParser1.c -lmxml
XmlParser1.c: In function ‘main’:
XmlParser1.c:63: warning: assignment discards qualifiers from pointer target type
/usr/local/lib/libmxml.so: undefined reference to `pthread_key_create'
/usr/local/lib/libmxml.so: undefined reference to `pthread_once'
/usr/local/lib/libmxml.so: undefined reference to `pthread_getspecific'
/usr/local/lib/libmxml.so: undefined reference to `pthread_key_delete'
/usr/local/lib/libmxml.so: undefined reference to `pthread_setspecific'
collect2: ld returned 1 exit status 
```

编译 XmlParser1.c 时发生以下错误。XmlParser1.c：

```
#include <stdio.h>
#include "mxml.h"
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>

#define MAX_SIZE 25

static mxml_node_t *xml; 
static mxml_node_t *str;
static mxml_node_t *DataSet;

static mxml_node_t *Table;
static mxml_node_t *IsAuthenticated;
static mxml_node_t *AuthenticationDate;
static mxml_node_t *Response;

int main()
{
    int fd = 0;
    char *Result=NULL;
    const char *NewResult=NULL;
    mxml_node_t *tree;
    mxml_node_t *data;
    const char *type = NULL;

    FILE *fp = fopen("/home/suneet/mxml-2.7/Sample/main.xml", "r")  ;
    if (fp == NULL)
    {
        fclose(fp);
    }
    else
    {
        fseek (fp , 0, SEEK_END);
        long settings_size = ftell (fp);
        rewind (fp);

        if (settings_size > 0)
        {
            tree = mxmlLoadFile(NULL, fp, MXML_NO_CALLBACK);
            fclose(fp);

            printf("step 1\n");
            data = mxmlFindElement(Table, tree, "diffgr:id", NULL, NULL, MXML_DESCEND);
            Result = mxmlElementGetAttr(data,"diffgr:id");
            printf("diffgr:id:%s\n",(Result == NULL)?"NULL":Result);
            mxmlDelete(data);
            mxmlDelete(tree);   
        }
    }

    return 0;
} 
```

当我尝试按照[http://minixml.org/](http://minixml.org/)中给出的步骤进行时；相应地解析xml文件存在某些错误“动态库libxml.so的线程未定义错误。”。

请指导我，以便我可以成功解析 xml 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:29:44.080

您需要使用 -pthread 选项与 pthread 库链接。

```
gcc -o xml XmlParser1.c -lmxml -pthread 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:26:38.743

您需要在代码中包含 pthread。在文件开头添加这一行

```
#include<pthread.h> 
```

# iphone - NSURLRequest setTimeoutInterval 没有按预期工作

> ID：10810878
> 
> 赞同：1
> 
> 时间：2012-05-30T06:15:19.327
> 
> 标签：iphone, objective-c, ios, timeout, nsurlrequest

我将 NSURLRequest 超时间隔保持为 30 秒。而且我还为请求配置了自动重试 3 次。因此，如果请求中有任何问题，那么总时间应该是 120 秒（即 2 分钟）。

但是当我在我的服务器上保留调试点并且如果我请求服务器时，我的超时时间将变为 3 分钟。

我可以配置这个超时吗？？？或者它应该工作？

这是向服务器发出请求后的默认超时间隔吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:35:06.260

请注意，30 秒乘以 3 等于 90 秒，即一分半钟，而不是 2 分钟。

至于超时问题，尝试`NSURLRequest`用`initWithURL:cachePolicy:timeoutInterval:`. 确保检查您的`NSURLConnection`委托方法的状态，尤其是在`connection:didFailWithError:`.

另外，也许您应该解释如何测量服务器上的超时时间。

# wpf - 在 WPF Web 浏览器控件中删除 cookie

> ID：10810881
> 
> 赞同：3
> 
> 时间：2012-05-30T06:15:33.693
> 
> 标签：wpf, cookies, webbrowser-control

我正在开发一个使用 twitter API 的 WPF 应用程序。为了显示 twitter 身份验证页面，我正在使用 WPF Web 浏览器控件。我能够成功登录并使用 twitter API。我的问题是我需要清除 Web 浏览器的 cookie 才能实现注销功能。有什么方法可以清除 WPF Web 浏览器中的会话 cookie？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-08T21:35:10.483

我昨天遇到了这个问题，今天终于想出了一个完整的解决方案。[此处](https://stackoverflow.com/a/14921878/2789877)提到了答案，[此处](http://mdb-blog.blogspot.ca/2013/02/c-winforms-webbrowser-clear-all-cookies.html)和[此处](http://www.pinvoke.net/default.aspx/wininet/InternetSetOption.html)更详细地介绍了答案。

这里的主要问题是`WebBrowser`（在 WPF 和 WinForms 中）不允许您修改（删除）现有会话 cookie。这些会话 cookie 阻止了多用户单设备体验的成功。

上面链接中的 StackOverflow 响应省略了一个重要部分，它需要使用不安全的代码块，而不是使用`Marshal`服务。下面是一个完整的解决方案，可以放入您的项目中以抑制会话 cookie 持久性。

```
public static partial class NativeMethods
{
    [DllImport("wininet.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern bool InternetSetOption(IntPtr hInternet, int dwOption, IntPtr lpBuffer, int dwBufferLength);

    private const int INTERNET_OPTION_SUPPRESS_BEHAVIOR = 81;
    private const int INTERNET_SUPPRESS_COOKIE_PERSIST = 3;

    public static void SuppressCookiePersistence()
    {
        var lpBuffer = Marshal.AllocCoTaskMem(Marshal.SizeOf(typeof(int)));
        Marshal.StructureToPtr(INTERNET_SUPPRESS_COOKIE_PERSIST, lpBuffer, true);

        InternetSetOption(IntPtr.Zero, INTERNET_OPTION_SUPPRESS_BEHAVIOR, lpBuffer, sizeof(int));

        Marshal.FreeCoTaskMem(lpBuffer);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T08:29:11.773

检查以下内容，

[http://social.msdn.microsoft.com/Forums/en/wpf/thread/860d1b66-23c2-4a64-875b-1cac869a5e5d](http://social.msdn.microsoft.com/Forums/en/wpf/thread/860d1b66-23c2-4a64-875b-1cac869a5e5d)

```
private static void _DeleteSingleCookie(string name, Uri url)
    {
        try
        {
            // Calculate "one day ago"
            DateTime expiration = DateTime.UtcNow - TimeSpan.FromDays(1);
            // Format the cookie as seen on FB.com.  Path and domain name are important factors here.
            string cookie = String.Format("{0}=; expires={1}; path=/; domain=.facebook.com", name, expiration.ToString("R"));
            // Set a single value from this cookie (doesnt work if you try to do all at once, for some reason)
            Application.SetCookie(url, cookie);
        }
        catch (Exception exc)
        {
            Assert.Fail(exc + " seen deleting a cookie.  If this is reasonable, add it to the list.");
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:22:18.330

我没有对此进行测试，但我认为最好的方法是在页面上定义一个清除 cookie 的 Javascript 方法（如果可以的话）。

```
document.cookie='c_user=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain=.facebook.com'; 
```

（或任何 cookie 名称）。然后您可以在*WebBrowser*控件上使用[InvokeScript](http://msdn.microsoft.com/en-us/library/cc491132.aspx)方法。

# spree - 为什么在给产品添加字段后，我会收到“无法批量分配受保护的属性”？

> ID：10810891
> 
> 赞同：0
> 
> 时间：2012-05-30T06:16:08.170
> 
> 标签：spree

我正在尝试在 spree 上的产品中添加一个字段，这只是一个复选框，如果它们是待售产品或者它们是内部产品，它只是用来标记产品。

我已经添加了迁移，最后想出了如何在表单上添加复选框，但是当我单击更新时，我得到了`Can't mass-assign protected attributes: for_sale`

这是迁移

```
class AddProductForSaleField < ActiveRecord::Migration
  def up
    add_column :spree_products, :for_sale, :boolean
  end
  def down
    remove_column :spree_products, :for_sale
  end
end 
```

这是正在添加的字段

```
Deface::Override.new(:virtual_path  => "spree/admin/products/_form",
                     :name          => "for_sale",
                     :insert_before => "code[erb-silent]:contains('track_inventory_levels')",
                     :partial       => "spree/admin/products/for_sale") 
```

这是部分

```
<%= f.field_container :for_sale do %>
    <%= f.label :for_sale, t(:for_sale) %>
    <%= f.check_box :for_sale, { :checked => true } %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:47:06.483

明白了，缺少模型部分

```
Spree::Product.class_eval do 
    attr_accessible :for_sale
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T13:17:43.320

Mass Assignment 是 Rails 赋予使用参数​​哈希构造对象的行为的名称。它是“批量赋值”，因为您通过单个赋值运算符将多个值分配给属性。

以下代码片段执行 Post 模型的名称和主题属性的批量分配：

Post.new(:name => "John", :topic => "Something")

Post.create(:name => "John", :topic => "Something")

Post.update_attributes(:name => "John", :topic => "Something")

为了使其工作，您的模型必须允许对您传入的哈希中的每个属性进行批量分配。

有两种情况会失败：

您有一个不包括 :name 的 attr_accessible 声明

你有一个 attr_protected 其中包括 :name

最近，必须通过 attr_accessible 手动将属性列入白名单才能使批量分配成功，这已成为默认设置。在此之前，默认情况下属性是可分配的，除非它们被明确列入黑名单 attr_protected 或任何其他属性被列入 attr_accessible 的白名单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T06:13:45.860

如果是权限问题，则可以添加：

```
Spree::Product.class_eval do 

  attr_accessible :variable_1, :variable_2 :as => [:default, :product]

end 
```

将其标记为特定模型的默认值，将删除批量分配警告消息！

# class - 设计类图 OrderItem 实体

> ID：10810893
> 
> 赞同：0
> 
> 时间：2012-05-30T06:16:12.850
> 
> 标签：class, class-diagram

我有一个 Order、OrderItem 和 Stock 实体。基本上，创建一个订单，然后可以将项目添加到订单中。一个订单可以有多个项目。订单中的每个项目都是 OrderItem 发挥作用的地方。

我的问题是：我应该为订单项目类提供哪些属性？目前我只有主键来识别它。

我应该还有什么吗？

我不需要订单中商品的任何详细信息，因为每个商品的所有详细信息都在 Stock 类中。

这是我正在谈论的图像：

![班级形象](../Images/545744af3846b5317f335d86a0361221.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:23:22.703

您“需要”拥有的东西将归结为更广泛的要求。你可能会考虑一些事情：

1.  您已经在类中包含了标识符（键）。因此，您可能还希望在其中包含引用（外键）`Order Item`- 分别用于`Order.ordId`& `Stock.stkID`。
2.  你需要数量吗？即每个订单中有多少个库存项目？（例如，如果库存物品是书籍，则需要 2 份《指环王》）。
3.  下订单的日期/时间？
4.  订单状态？（已确认/已发货/已交付/已取消等）？

在这种情况下，这些是常见的事情；哪个适用取决于您需要实现的目标。

hth。

# javascript - 如何拉伸/收缩 HTML 页面以适应 QWebView 窗口

> ID：10810895
> 
> 赞同：0
> 
> 时间：2012-05-30T06:16:37.750
> 
> 标签：javascript, html, qt, qtwebkit, qwebview

我正在使用 QWebView 使用 setHTML 方法呈现 html 页面。在 html 页面正文部分我提到了 html 页面的宽度和高度，如果我们在运行时通过调用 setGeometry(x,y,w,h) 来更改 QWebView 窗口的宽度和高度，那么如何使html 页面自行调整以完全适应拉伸的 QWebView 窗口中的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:22:02.670

您需要`window.onresize()`在 javascript 中处理事件。在您的html中插入以下代码...

```
<script text = "javascript">

window.onresize = function(event) {

    var newWidth = window.innerWidth;
    var newHeight = window.innerHeight;

    // Code to adjust your contents..
}

</script> 
```

希望这可以帮助。

# android - JNI .cpp 文件如何向 Android 中的 Java 框架发送事件

> ID：10810897
> 
> 赞同：1
> 
> 时间：2012-05-30T06:16:39.950
> 
> 标签：android, android-ndk, android-source, android-framework

我已经在 MotionSensors 上注册了一个监听器，现在每当调用 Motion change 方法“onSensorChange()”时。

我知道这些调用来自 SensorManager.java 类。我想知道这些传感器更改事件是如何来自 JNI，JNI 如何触发更改事件并将其发送到 Framework(SensorManager.java)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:46:05.950

如果您知道代码的确切位置，则不难检查它是如何工作的。所以主要部分在这里：

```
 while (true) {
            // wait for an event
            final int sensor = sensors_data_poll(sQueue, values, status, timestamp);

            int accuracy = status[0];
            synchronized (sListeners) {
                if (sensor == -1 || sListeners.isEmpty()) {
                    // we lost the connection to the event stream. this happens
                    // when the last listener is removed or if there is an error
                    if (sensor == -1 && !sListeners.isEmpty()) {
                        // log a warning in case of abnormal termination
                        Log.e(TAG, "_sensors_data_poll() failed, we bail out: sensors=" + sensor);
                    }
                    // we have no more listeners or polling failed, terminate the thread
                    sensors_destroy_queue(sQueue);
                    sQueue = 0;
                    mThread = null;
                    break;
                }
                final Sensor sensorObject = sHandleToSensor.get(sensor);
                if (sensorObject != null) {
                    // report the sensor event to all listeners that
                    // care about it.
                    final int size = sListeners.size();
                    for (int i=0 ; i<size ; i++) {
                        ListenerDelegate listener = sListeners.get(i);
                        if (listener.hasSensor(sensorObject)) {
                            // this is asynchronous (okay to call
                            // with sListeners lock held).
                            listener.onSensorChangedLocked(sensorObject,
                                    values, timestamp, accuracy);
                        }
                    }
                }
            }
        }
        //Log.d(TAG, "exiting main sensor thread");
    } 
```

此代码不断在单独的线程中运行`SensorThreadRunnable`( `while (true)`)。首先，它调用本机函数，该函数`sensors_data_poll`返回已更改其值的传感器的标识符（如果没有此类传感器，则返回 -1）。如果它返回 -1，则循环从头开始。如果传感器值已更改，则从传感器标识符创建 sensorObject ( `final Sensor sensorObject = sHandleToSensor.get(sensor);`)。之后，所有注册的侦听器都有一个循环，如果侦听器正在侦听此传感器对象，则会通知传感器的值已更改。

# linux - linux中的TCP套接字数据不一致

> ID：10810899
> 
> 赞同：0
> 
> 时间：2012-05-30T06:16:49.697
> 
> 标签：linux, sockets, tcp, wxwidgets, tcpclient

我需要一些关于以下内容的信息。

我正在创建用于跟踪数据的服务器和客户端。从客户端发送的数据由 wxWidgets 显示在 GUI 上。这是我的问题。

我有两个跟踪客户端，每个客户端在 0.9 微秒内发送 100 条消息的数据。我的问题是服务器收到的数据不正确。

```
Example:
Actual data:

data from client 1
data from client 1
data from client 1
data from client 2
data from client 1
data from client 1
data from client 1
data from client 2
data from client 1
data from client 1
data from client 2

Received data on server side:
data from client 2
data from client 2
data from client 1
data from client 1
data from client 1
data from client 2
data from client 1
data from client 1
data from client 1 
```

问题：

如何解决这个数据不匹配问题？我正在使用 TCP 套接字。所有代码都是用 CPP 编写的。

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:14:38.627

我认为您不能保证不同主机上两个不相关的 TCP 客户端之间的数据同步。TCP 只保证连接中数据的顺序。

保证这一点的一种方法可能是，当客户端想要发送一些数据时，将令牌从服务器传递给客户端。当客户端完成发送数据时，可以假定令牌已被“使用”。

1.  客户端：请求令牌以发送数据

2.  服务器：将令牌分配给客户端

3.  客户端发送数据并发出数据结束信号

4.  服务器假定客户端的令牌已过期，并且可以自由分配给另一个。

    当然，客户端不应在数据结束后或令牌不可用时发送任何数据。

# sql - 子查询返回超过 1 个值。当子查询跟随 =, != 时，这是不允许的

> ID：10810902
> 
> 赞同：1
> 
> 时间：2012-05-30T06:17:05.410
> 
> 标签：sql, sql-server

我有 2 张桌子叫`Prac1`和`prac2`。`Prac1`有触发器。当插入发生时`prac1`，相同的条目进入`prac2`（触发代码）。我已经做了一个 sp，从中选择前 3 个 id`prac1`并再次插入`prac1`它的值（其他列）。但只添加一行而不是 3 .查询是：

```
Insert name,lname into prac1 where id in(select top3 id from prac1). 
```

当我删除触发器时，我的 sp 被执行并且 3 个条目被添加到表中。如何处理这种情况？

> prac1:Id,名称,Lname
> prac2:名称,Lname

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:48:17.263

您确定您的查询有效吗？因为正如评论中已经说明的那样，语法无效。查看[MSDN 以获取更多信息](http://msdn.microsoft.com/es-es/library/ms174633%28v=sql.105%29.aspx)正确的语法是：

```
INSERT [INTO] 
      table_name  [ ( column_list ) ] 
      { VALUES 
      ( { DEFAULT | NULL | expression } [ ,...n] ) 
| derived_table
       } 
```

所以你的插入查询应该是这样的：

```
INSERT INTO prac1(name, lname) 
SELECT TOP 3 name, lname
  FROM prac1 
```

发布您的触发代码，您看到插入的行应该是触发触发器的第一个行。然而，插入可能会再次触发它。因此，也许您需要禁用它并重新启用它。

# delphi - 在选择时设置 ComboBox 文本

> ID：10810903
> 
> 赞同：6
> 
> 时间：2012-05-30T06:17:09.857
> 
> 标签：delphi, combobox, delphi-7

我正在开发一个应用程序，其中我有一个带有长文本值的组合框。由于文本值很大（以字符 ..20 或更多），要在组合框中显示，要求是`first`在选择后显示在字符上从下拉。就像在红色标记的图像中一样。如果用户选择第 3 项，`3 0.5 to 1.25 Slight`我应该只`3`在组合框中显示。

![在此处输入图像描述](../Images/2eb1219ffe2c632e8dac54aaa85416ad.png)

所以我尝试了这个

```
 sTheSelectedValue : string;

  procedure TForm1.ComboBox1Select(Sender: TObject);
  begin
   sTheSelectedValue:=TrimTextAndDisplay(ComboBox1.Text); //send theselected value
   ComboBox1.Text :='';                                   //clear the selection
   ComboBox1.Text:=sTheSelectedValue;                     //now assign as text to combo box   
   Button1.Caption:=ComboBox1.Text;                      //just show the new value on the button.
  end;

   function TForm1.TrimTextAndDisplay(TheText : string): string;
   var
   sTheResult : string;
     begin
        sTheResult :=copy(TheText,0,1); //extract the first value..
        Result     :=sTheResult;
     end; 
```

结果是![在此处输入图像描述](../Images/d968e5a78b1618d1850a0e731a2db1f7.png)

该按钮似乎显示了正确的值，但没有显示组合框。

我想要的是进入`3`组合框，我似乎无法设置`ComboBox1.Text:=` 任何人都可以告诉我该怎么做吗？像这样从组合框中选择结果应该是 ![在此处输入图像描述](../Images/8c63714a91a64b88bc921db042d8d569.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T08:44:01.100

我建议所有者绘制 ComboBox 来处理这个问题。将`TComboBox.Style`属性设置为`csOwnerDrawFixed`，然后仅将数字`'1'`、`'2'`、`'3'`等存储在`TComboBox.Items`属性本身中，并`TComboBox.OnDrawItem`在下拉列表可见时使用事件来呈现完整的字符串，例如：

```
var
  sTheSelectedValue : string; 

const
  ItemStrings: array[0..7] of string = (
    '0 to 0.1 Calm (rippled)',
    '0.1 to 0.5 Smooth (wavelets)',
    '0.5 to 1.25 Slight',
    '1.25 to 2.5 Moderate',
    '2.5 to 4 Rough',
    '4 to 6 Very rough',
    '6 to 9 High',
    '9 to 14 Very high');

procedure TForm1.FormCreate(Sender: TObject);
var
  I: Integer;
begin
  ComboBox1.Items.BeginUpdate;
  try
    for I := Low(ItemStrings) to High(ItemStrings) do begin
      ComboBox1.Items.Add(IntToStr(I+1));
    end;
  finally
    ComboBox1.Items.EndUpdate;
  end;
end; 

procedure TForm1.ComboBox1Select(Sender: TObject); 
begin 
  sTheSelectedValue := IntToStr(ComboBox1.ItemIndex+1);
  Button1.Caption := sTheSelectedValue;
end; 

procedure TForm1.ComboBox1DrawItem(Control: TWinControl; Index: Integer; Rect: TRect; State: TOwnerDrawState);
var
  s: String;
begin
  if odSelected in State then begin
    ComboBox1.Canvas.Brush.Color := clHighlight;
    ComboBox1.Canvas.Font.Color := clHighlightText;
  end else begin
    ComboBox1.Canvas.Brush.Color := ComboBox1.Color;
    ComboBox1.Canvas.Font.Color := ComboBox1.Font.Color;
  end;
  ComboBox1.Canvas.FillRect(Rect);
  s := IntToStr(Index+1);
  if not (odComboBoxEdit in State) then begin
    s := s + ' ' + ItemStrings[Index];
  end;
  ComboBox1.Canvas.TextRect(Rect, Rect.Left+2, Rect.Top+2, s);
  if (State * [odFocused, odNoFocusRect]) = [odFocused] then begin
    ComboBox1.Canvas.DrawFocusRect(Rect);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T07:03:12.377

您必须尝试将数据保存在记录中，例如：

```
 type
 TMyRec = record
  Num:Integer;
  Text:String;
end;

TMyRecArray = array of TMyRec;

MyRecArray:TMyRecArray; 
```

然后您可以手动设置要在 ComboBox 中设置的项目（**在 OnFromCreate 上**），

```
SetLength(MyRecArray,9);
MyRecArray[0].Num:=1;
MyRecArray[0].Text:='0 to 0.1 Calm Rippled';
.
. 
```

等等。

然后在组合框中的字符串中只放置数字，并且

```
procedure TForm1.ComboBox1Select(Sender: TObject);   
var
  i:integer;     
begin         
  for i:=0 to 9 do
  begin
    if ComboBox1.Text=IntToStr(MyRecArray[i].Num) then
      Button1.Caption:=MyRecArray[i].Text; 
  end;
end; 
```

# nhibernate - NHibernate QueryOver 和集合过滤

> ID：10810909
> 
> 赞同：2
> 
> 时间：2012-05-30T06:18:08.697
> 
> 标签：nhibernate, queryover, nhibernate-3

我的班级的简单例子：

```
public class Post
{
    public IEnumerable<Tag> Tags { get; set; }
} 
```

用户检查几个感兴趣的标签以过滤帖子列表。

我需要按选定的标签过滤所有帖子，例如：

```
Session.QueryOver<Post>()
    .WhereRestrictionOn(x => x.Tags)
    .IsIn(criterion.InterestedTags.ToList())
    .List<Post>(); 
```

例外：`NHibernate.QueryException: Cannot use collections with InExpression`

**实际上，如果它的标签之一**包含在 InterestedTags 中，我应该显示帖子。

**UPD**

为我工作：

```
Session.QueryOver<Post>()
    .JoinAlias(p => p.Tags, () => tag)
    .WhereRestrictionOn(() => tag.Id)
    .IsIn(criterion.InterestedTags.Select(x => x.Id).ToArray())
    .List<Post>(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T06:32:25.360

您必须使用别名来限制`one-to-many`部分

尝试以下代码片段：

```
Tag tag = null; 
Session.QueryOver<Post>()
    .JoinAlias(p => p.Tags, () => tag)
    .WhereRestrictionOn(() => tag.Id)
    .IsIn(criterion.InterestedTags.ToList()) //*
    .List<Post>(); 
```

*假设这`InterestedTags`是标识符的集合。

# css - 输入密码和 :after 伪元素文本

> ID：10810915
> 
> 赞同：0
> 
> 时间：2012-05-30T06:18:41.523
> 
> 标签：css, input

我有一个 HTML 密码输入。我在密码放置字段上使用 :after 伪元素来使用内容向用户显示错误消息：“无效密码”。

但是，伪元素中显示的文本都是星号，因为它是一个密码字段。如果我将其更改为文本字段，则显示正常。反正有没有让伪元素显示直接文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:16:12.170

不可以。不能在密码类型输入中显示文本。您可以通过 JavaScript 更改输入类型，并在用户焦点将其改回或创建克隆输入文本字段并更改焦点后，但这两种解决方案都不是很好。

# eclipse - java.lang.ClassNotFoundException：org.apache.commons.logging.LogFactory

> ID：10810917
> 
> 赞同：0
> 
> 时间：2012-05-30T06:18:44.890
> 
> 标签：eclipse, wso2, wso2esb, classnotfoundexception

我正在使用 jdk 1.6.31，当我在 eclipse 中添加服务器（基于 WSO2 Carbon 3.0.1 的服务器）并尝试启动服务器时，它在控制台中出现以下错误：

```
java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
    at org.wso2.carbon.server.Main.<clinit>(Main.java:38)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 1 more
Exception in thread "main" 
```

基于 WSO2 Carbon 3.2 的服务器启动，但在控制台中：

```
No properties path set - looking for transactions.properties in classpath...
Using init file: /D:/naveenraj/wso2/Training%20Workouts/wso2esb-4.0.3/lib/transactions.properties 
```

这是一个重大错误吗？

我是 WSO2 ESB 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:16:23.593

我不确定这是否有帮助，但请确保您在启动服务器之前定义了 JAVA_HOME 和 CARBON_HOME

祝你好运

克里斯托夫

# javascript - 如何在 html5 中的 datepicker 中对选定月份应用条件

> ID：10810921
> 
> 赞同：0
> 
> 时间：2012-05-30T06:18:53.497
> 
> 标签：javascript, html

我想在 html5 中的日期选择器中对选定日期应用条件。即，如果我选择了一月并单击提交按钮，它将转到下一页并显示您出生在一月。

```
<form action="new.html">
<input type="date"> <input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T16:07:51.487

你考虑过使用 jquery 的 datepicker 吗？它将通过下拉日历的能力为您的最终用户提供更好的体验，并且也适用于所有浏览器。这是执行此操作的代码：

```
$("#datepicker").datepicker(
{
      onSelect: function (arg) {
            var date = new Date(arg);
            // The below code give the index of the month like Jan as 0, ... ,Dec as 11
            var month = date.getMonth();
      }
} 
```

在你的身体标签中，

```
<input type="text" id="datepicker" /> 
```

有关 jquery datepicker 的更多信息，请参阅此链接：[http ://docs.jquery.com/UI/Datepicker](http://docs.jquery.com/UI/Datepicker)

如果您决定使用 datepicker，这里有一些很好的常见问题解答：http: [//jqfaq.com/category/widgets/datepicker/](http://jqfaq.com/category/widgets/datepicker/)

# python - python 类可以返回其类的新实例吗？

> ID：10810926
> 
> 赞同：22
> 
> 时间：2012-05-30T06:19:25.093
> 
> 标签：python, class

以下python代码有效吗？

```
class Test:
  def __init__(self):
    self.number = 5

  def returnTest(self):
    return Test() 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-30T06:23:00.510

是的，它是有效的。类是在您创建对象并调用`returnTest`方法时定义的。

```
In [2]: x = Test()

In [3]: y = x.returnTest()

In [4]: y
Out[4]: <__main__.Test instance at 0x1e36ef0>

In [5]: 
```

但是，在方法像工厂一样的情况下，您可能需要考虑使用[classmethod](http://docs.python.org/library/functions.html#classmethod)装饰器。当继承和其他烦恼出现时，这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T06:24:05.920

是的，它是有效的。 `returnTest`在被调用之前不会运行。它不会创建无限循环，因为不会在新创建的对象上调用该方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T06:28:13.350

是的，它有效，但似乎 returnTest() 始终是 Test 的同一个实例。

```
class Test:
  def __init__(self):
    self.number = 5

  def returnTest(self):
    return Test()

t = Test()
print t
print t.returnTest()
print t.returnTest()

$ python te.py
<__main__.Test instance at 0xb72bd28c>
<__main__.Test instance at 0xb72bd40c>
<__main__.Test instance at 0xb72bd40c> 
```

这适用于 Python 2.7 和 3.2。@classmethod 没有任何区别。有趣的是，pypy 每次都返回一个不同的实例：

```
$ pypy te.py
<__main__.Test instance at 0xb6dcc1dc>
<__main__.Test instance at 0xb6dcc1f0>
<__main__.Test instance at 0xb6dcc204> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T06:24:50.940

是的。这是一个有效的python代码。许多编程语言允许返回正在定义的类的实例。想想**单例**模式。

# xslt - 读取 xsl 中的属性文件或文本文件

> ID：10810936
> 
> 赞同：0
> 
> 时间：2012-05-30T06:20:32.840
> 
> 标签：xslt

我有一个 xsl 文件，其中包含一些用于显示的内容。这些内容经常更改。所以每次都要修改xsl文件。

因此考虑将内容移动到文本 ot 属性文件中，这样只需更改它就可以了。

谁能告诉我如何将内容移动到文本文件并使用 xsl 文件访问它。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:38:16.177

为什么使用文本文件？XML 肯定会更好吗？

XSLT 样式表可以使用 document('strings.xml') 读取第二个输入文档。然后您可以访问字符串，例如

```
<xsl:value-of select="document('strings.xml')//string[@id='msg012']"/> 
```

文件的格式如下

```
<strings>
  <string id='msg012'>This is one of the strings to include</string>
</strings> 
```

在 XSLT 2.0 中，您可以将访问逻辑包装到一个函数中，这样调用就变成了

```
<xsl:value-of select="my:string('msg012')"/> 
```

# javascript - JavaScript document.execCommand 删除格式块格式？

> ID：10810940
> 
> 赞同：8
> 
> 时间：2012-05-30T06:21:06.817
> 
> 标签：javascript, html, formatting, contenteditable

如果我在这样的页面上格式化一段文本：

```
document.execCommand('formatBlock', false, 'h1'); 
```

我该怎么做才能删除这种格式？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-30T06:43:08.770

~~我想`document.execCommand('removeFormat',false,false)`会做吗？~~

`document.execCommand('formatBlock', false, 'div')`在 -block 上发布`<h1>`将删除`<h1>`-tag 并将其替换为`<div>`-tag ^(**1**)。那会可行吗？

^(**1**)如果你没有使用 IE

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-02T14:03:53.130

我用这个清除 h1 的效果：

```
document.execCommand('formatBlock', false, 'p'); 
```

您已将其格式更改为 h1，因此我们可以以相同的方式将其更改回正常的段落格式。
如果你把每个段落放在 <div> 中，你也可以使用这个：

```
document.execCommand('formatBlock', false, 'div'); 
```

将格式设置为与其他块相同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-11T04:32:11.450

我有同样的问题，我需要删除包装我的文本的 h1 标签。

我所做的是获取所选文本的父节点：

> var elem_parent_node = window.getSelection().getRangeAt(0).startContainer.parentNode;

然后检查它的nodeName是否为“H1”；如果是，则将所选文本存储在 selected_text 变量中，然后删除节点本身：

> elem_parent_node.remove();

然后，

> document.execCommand('insertText', false, select_text);

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-30T15:48:06.933

要将 h1 替换为其文本内容节点，请使用以下代码。对于完整的代码，您需要添加一些检查以确保删除您想要的内容。

```
const button = document.getElementsByTagName('button')[0]
button.addEventListener('click', event => {
  const selection = window.getSelection()
  if (!selection.isCollapsed) {
    selection.anchorNode.parentNode.replaceWith(selection.anchorNode)
  }
})
```

```
<div contenteditable="true">
  <p>Some text</p>
  <h1>Select me then click the button</h1>
  <p>Some text</p>
</div>
<button>Click to remove H1</button>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-18T07:36:36.047

您可能必须找到父标签，然后使用innerHTML 获取文本并将父标签和结束标签之间的原始数据替换为innerHTML。但是，这将删除所有格式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-11T20:57:14.643

似乎您无法“撤消”格式块。只要它是另一个块级 HTML 标记，您总是可以用其他一些“formatBlock”替换一个“formatBlock”。

# java - 从 Java 执行 Shell 脚本，具有读取操作的 Shell 脚本

> ID：10810943
> 
> 赞同：2
> 
> 时间：2012-05-30T06:21:34.113
> 
> 标签：java, bash, shell

我有一个读取输入的 Shell 脚本

```
#!/bin/bash
echo "Type the year that you want to check (4 digits), followed by [ENTER]:"
read year
echo $year 
```

我正在使用 JAVA APi 执行这个 shell 脚本

```
ProcessBuilder pb = new ProcessBuilder("/bin/bash", "/junk/leaptest.sh");
final Process process = pb.start();

InputStream is = process.getInputStream();
InputStreamReader isr = new InputStreamReader(is);
BufferedReader br = new BufferedReader(isr);
String line;

while ((line = br.readLine()) != null) {
    System.out.println(line);       
}
System.out.println("Program terminated!"); 
```

在 Java 控制台中，我可以看到输出

> 输入您要检查的年份（4 位数字），然后按 [ENTER]：

现在，如何在我的脚本中将值传递给 Shell 脚本的实际问题如何读取变量“年份”

* * *

我已根据建议编辑了代码，但在我们更正的地方不起作用

```
ProcessBuilder pb = new ProcessBuilder("/bin/bash", "-c", "/junk/leaptest.sh");
final Process process = pb.start();
InputStream is = process.getInputStream();
InputStreamReader isr = new InputStreamReader(is);
BufferedReader br = new BufferedReader(isr);
String line;
/*
 * OutputStream os = process.getOutputStream(); PrintWriter pw = new
 * PrintWriter(os);
 */

BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(process.getOutputStream()));
while ((line = br.readLine()) != null) {
    System.out.println(line);
    // pw.println("8999");
    bw.write("2012");
}
System.out.println("Program terminated!"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T06:32:33.360

您可以使用`OutputStream`类的`Process`：

```
OutputStream os = process.getOutputStream();
PrintWriter pw = new PrintWriter(os);

pw.println("1997"); 
```

您写入此输出流的内容将成为 shell 脚本的输入流。因此`read year`将 1987 读取到`year`变量中。

**编辑：**

我也试过了，我设法找到了问题。1997 字符串尚未到达脚本，因为`PrintWriter`缓冲了写入它的数据。您要么必须在with`PrintWriter`之后刷新流，要么必须在创建时将 auto-flush 属性设置为：`println()``pw.flush()``true`

```
PrintWriter pw = new PrintWriter(os, true); 
```

这是对我来说工作正常的完整代码：

*跳跃测试.sh：*

```
#!/bin/bash
echo "Type the year that you want to check (4 digits), followed by [ENTER]:"
read year
echo $year 
```

*测试.java：*

```
import java.io.*;

class Test {

    public static void main(String[] args) {
        try {
            ProcessBuilder pb = new ProcessBuilder("/bin/bash", "leaptest.sh");
            final Process process = pb.start();

            BufferedReader br = new BufferedReader(new InputStreamReader(process.getInputStream()));
            PrintWriter pw = new PrintWriter(process.getOutputStream());
            String line;

            while ((line = br.readLine()) != null) {
                System.out.println(line);
                pw.println("1997");
                pw.flush();
            }
            System.out.println("Program terminated!");
        } catch(Exception e) {
            e.printStackTrace();
        }
    }
} 
```

*输出：*

```
$ java Test
Type the year that you want to check (4 digits), followed by [ENTER]:
1997
Program terminated! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T06:28:00.523

要将执行脚本的 java 程序中的值传递给脚本，请使用命令行参数。如果要将信息从脚本发送回 java 程序打印脚本中的值，请在 java 程序中读取脚本的 STDOUT 并解析它。

你真的快到了。现在您正在阅读脚本输出（进入 while 循环），但您只是在打印它。解析输出并用它做你需要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T06:28:19.687

认为您应该解析输入流是为了提取您的值。按行解析。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T06:31:27.573

[您还想使用getOutputStream](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Process.html#getOutputStream%28%29)设置 OutputStream ，以便能够将 Java 程序中的数据写入进程。

> 公共抽象输出流 getOutputStream()
> 
> 获取子流程的输出流。流的输出通过管道传输到此 Process 对象表示的进程的标准输入流中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T06:30:32.100

我认为这应该有效。您需要处理子流程的输出流。阅读[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#getOutputStream%28%29)。

```
 BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(process.getOutputStream()));
 bw.write("2012"); 
```

# ruby-on-rails - 与 Heroku 兼容的最佳聊天宝石

> ID：10810945
> 
> 赞同：0
> 
> 时间：2012-05-30T06:21:46.547
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku, chat

谁能告诉我与 Heroku 兼容的最佳 Ruby 聊天 gem/插件是什么？Node.js 可以用于此，Node.js 是否与 Rails 3 配合得很好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T05:56:23.020

我正在努力将我的开源聊天 gem 升级为与 Heroku 兼容（希望很快）。它被称为[疯狂的喋喋不休](https://github.com/andrewhavens/mad_chatter)。很快您将能够轻松地将它与任何 Rails 应用程序集成。

Heroku 支持 HTTP 长轮询，但不支持 Web 套接字。Web Sockets 是一项伟大的新技术，但在 Heroku 支持它之前，您将需要寻找支持长轮询的 gem。

一种流行的解决方案是使用 Socket.io，但它适用于在 node.js 上运行。Juggernaut 像这样工作（作为 node.js 服务器），除了它将每条消息存储在 Redis 数据库中，以便您可以从 Ruby 访问它们。我对 Juggernaut 的唯一批评是，要启动和运行它涉及很多部分。

Faye 是一个支持长轮询的库，可以作为纯 Ruby 实现使用，可以选择使用 Redis 来存储消息。我选择使用 Faye 是因为部署依赖项更少。

我确信还有其他选择，但我知道 Faye 是一个非常受欢迎的解决方案。话虽如此，这些只是沟通的宝石。它们只是您的聊天应用程序的基础。根据您需要的功能类型，有几个不同的“聊天宝石”选项。但是通过使用 Faye，您可以实现自己的简单聊天应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T04:01:41.677

Ruby on Rails的**Juggernaut**插件旨在通过让服务器启动连接并将数据推送到客户端来彻底改变您的 Rails 应用程序。 [http://juggernaut.rubyforge.org/](http://juggernaut.rubyforge.org/)。

[参考这个线程](https://stackoverflow.com/questions/5210048/does-juggernaut-work-on-heroku)

# c - 我在 C 中的指针工作不正常

> ID：10810946
> 
> 赞同：0
> 
> 时间：2012-05-30T06:21:53.097
> 
> 标签：c, pointers

我做了这个程序，我声明

```
long double *M; 
```

然后我从文件中读取数据

```
 i=1;
   M = (long double *) calloc ( i , sizeof(long double) );
   while ( !feof( arq_matriz ) ){ 
       fscanf ( arq_matriz , "%Lf" , (M+i-1));
       i++;
       M = (long double *) realloc ( M , i * sizeof(long double) );
   }
   fclose(arq_matriz); 
```

所以，为了测试我把它打印在屏幕上

```
for (i=0;i<=44;i++){
    printf("\n %Lf",*(M+i));
} 
```

一切都很完美。但是当我将它传递给一个函数时，甚至当我调试它时，我得到了 *M=0 而事实 *M = 0.25 和 *(M+1) = 'invalid float number'。我不知道为什么会发生这种情况，因为所有内容都直接打印在屏幕上。有什么提示吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:28:49.553

尽管您试图`realloc`在循环中，但您没有正确执行 - 当/如果`realloc`失败时，它会返回一个空指针。由于您将其直接分配回`M`，因此您已经丢失了原始指针（泄漏内存），并且由于您不检查它是否为空指针，因此您继续写入它，如果它失败则导致未定义的行为.

虽然它可能与手头的问题无关，但`while (!feof(somefile))`几乎可以保证像这样的循环行为不端（通常似乎从文件中读取了最后一个项目两次）。

# javascript - 使用 PrototypeJS 添加 CSS 样式

> ID：10810947
> 
> 赞同：1
> 
> 时间：2012-05-30T06:21:56.297
> 
> 标签：javascript, prototypejs

我有一个`div`我想为使用 PrototypeJS 添加新样式。但是下面的脚本不起作用。它有什么问题？

```
<div class='exercise-main'>
</div>

$$('.exercise-main').setStyle({
    backgroundColor: '#900',
    fontSize: '12px'
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:30:38.543

该`$$`函数返回一个包含所有匹配元素（如果有）的**数组**。`setStyle`是**元素**方法，而不是数组方法。

这里有几个选项。

如果您只期望匹配一个元素，这将起作用。

```
$$('.exercise-main')[0].setStyle({color:'red'}); 
```

如果你想在每个匹配的元素上设置样式，这些都可以。它们本质上是一样的。

```
$$('.exercise-main').each(function(element) {
    element.setStyle({color: 'red'});
}); 
```

或者

```
$$('.exercise-main').invoke('setStyle', {color:'red'}); 
```

当然，如果你的元素有一个 id，你可以使用这个`$`函数来找到那个元素。这不同于`$$`您不传递选择器字符串，而只是传递id 的字符串（即没有'#'）。此外，这仅返回元素或 null - 而不是数组 - 因此您可以直接从返回的值使用元素方法，类似于您最初尝试的方法。

```
$('myElementId').setStyle({color:'red'}); 
```

# android - 在 Android 应用程序中集成 Yahoo Messenger 和 Gtalk

> ID：10810949
> 
> 赞同：0
> 
> 时间：2012-05-30T06:22:24.343
> 
> 标签：android, google-talk, yahoo-messenger

我需要在我想要集成 Yahoo Messenger 和 Gtalk 的 Android 应用程序中构建一个聊天应用程序。我在网上搜索了很多教程，但我找不到合适的教程。有人可以建议我一个很好的教程/例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:25:12.333

对于 gtalk 可以试试这个[word-press 文章](http://davanum.wordpress.com/2008/12/29/updated-xmpp-client-for-android/)

可能有帮助 这个 android 应用程序旨在使您能够通过 gtalk 控制您的手机。对于喜欢在真实键盘上输入短信的人来说，它可能很有用。

这是[TalkMyPhone](http://code.google.com/p/talkmyphone/)示例应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:44:40.587

# 为 gtalk

1.you need XMPP Java API on Android read docs [here](https://developers.google.com/appengine/docs/java/xmpp/overview#Sending_Chat_Messages) and [here](https://developers.google.com/talk/)

2.简短的[例子在这里](http://www.andrejkoelewijn.com/wp/2008/12/30/using-google-talk-from-java-example/)

3. [这个](https://stackoverflow.com/questions/3977260/android-gtalk-api)SO 线程对 gtalk api 很有帮助

# 雅虎信使

1.  检查雅虎！Messenger IM API 文档[在这里](http://developer.yahoo.com/messenger/guide/ch02s03.html#apinotificationmanagement)

2.  [这个胎面](https://stackoverflow.com/questions/1878877/how-to-create-yahoo-messenger-client-in-android)也可以帮助你

让我知道它是否有帮助？

# css - "." 和有什么不一样 CSS中的“#”和“#”如何选择使用？

> ID：10810950
> 
> 赞同：1
> 
> 时间：2012-05-30T06:22:52.577
> 
> 标签：css

我正在学习 CSS，我真的很困惑何时使用`.`（点）以及何时`#`在 CSS 文件中使用。有时我真的想知道我应该使用哪一个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T06:25:08.963

### #你是.人类

*人虽多，但你*只有一个。因此，`.`适用于可以在文档中反复出现的类。`#`用于 ID，对于文档来说是唯一的。

```
<div class="firstname" id="personA">
    <p class="lastname">Sampson</p>
</div>

<div class="firstname" id="personB">
    <p class="lastname">Sampson</p>
</div> 
```

`div`请注意`personA`和的唯一标识符`personB`。然而，这两个元素都有共同的类，例如`.firstname`和`.lastname`。

### 专业例子

通过查看 Modernizr 之类的工具，您可以了解它们是如何在野外使用的。此功能检测工具通过向`<html>`元素添加类来帮助您，以告知您设备或浏览器的功能：

```
<html lang="en" dir="ltr" 
      id="modernizrcom" 
      class="js no-touch postmessage history multiplebgs boxshadow..."> 
```

`<html>`在这里，我们看到元素的唯一值， `#modernizrcom`。以下是一系列提供有关元素的更一般信息的类。这是一个元素如何只有一个 id 但有多个类的一个清晰示例。

### 小心那些ID！

因为这些价值观是*完全独特的*，它们有时会让你把自己画到一个角落里。值得阅读[*Disallow IDs in Selectors*](https://github.com/stubbornella/csslint/wiki/Disallow-IDs-in-selectors)以了解有关在选择器中使用 ID 的潜在问题的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T06:25:28.977

# 用于元素的 id 和 . 用于元素的类。在 HTML 文档中，id 是唯一的（应该只有一个元素具有该 id），而类可以出现多次。

```
<div id="content" class="shade light">
</div> 
```

您现在可以执行以下操作：

```
#content { border: solid 1px black; } 
```

为特定的 div 元素添加样式。但你也可以这样做：

```
.light { background-color: #eeeeee; } 
```

不同之处在于后者会将背景颜色应用到具有该类的所有元素（即，具有该类的所有元素，`light`而第一个 CSS 语句只会将样式添加到具有 id 的元素`content`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:27:27.897

一个点 (.) 代表一个类，一个哈希 (#) 代表一个 id。

还有更多，但这是要点：

**当您只打算使用该选择器一次**时，应使用 id (#myID)

 **应该使用一个类 (.myClass) 创建一段可重用的样式代码（例如使文本变为蓝色）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T06:30:02.610

**. 是代表类**

**# 代表ID（但在一个页面中只使用一次）**

*id 总是在比赛中具有第一优先权。*

**前任：**

**在风格**

```
.alignmeleft{float:left;}
#alignmeright{float:right;} 
```

**在 html 中：**

```
<div class="alignmeleft" id="alignmeright">
<!--div content-->
</div> 
```

**输出**

DIV 将在右侧对齐**

# html - 当浏览器最小化时，“ul”中的最后一个“li”元素正在下降

> ID：10810951
> 
> 赞同：0
> 
> 时间：2012-05-30T06:22:59.890
> 
> 标签：html, css, browser, html-lists, cross-browser

当浏览器最小化时，“ul”中的最后一个“li”元素会下降。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:49:07.063

最后我得到了解决方案。主 div 覆盖了网站中的“搜索”部分。此搜索 div 将菜单 div li 元素向下推。我删除了搜索 div，然后一切正常。现在松了口气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T09:02:46.630

不知道这是否有助于解决您的问题，但 </ul> 的结束标签在您的示例中是错误的。如果这不是答案，请向我们展示您从“工作组合”到最后的代码。也许那里的代码有一点错误。

# dbase - 如何从 ACT 读取非标准 DBF 备忘录 (BLOB) 文件？

> ID：10810953
> 
> 赞同：5
> 
> 时间：2012-05-30T06:23:04.923
> 
> 标签：dbase, act

我正在尝试将数据从 Act 2000 转换为 MySQL 数据库。我已经成功地将 DBF 文件导入到各个 MySQL 表中。但是我遇到了`*.BLB`文件问题，这似乎是一个非标准的备忘录文件。

DBF 文件将自己标识为 dbase III Plus，无备忘录格式。有一个`*.BLB`是多个 DBF 共享 BLOB 数据的备忘录文件。

如果您阅读此文档：[http](http://cicorp.com/act/sdk/ACT6-SDK-ChapterA.htm#_Toc483994053) ://cicorp.com/act/sdk/ACT6-SDK-ChapterA.htm#_Toc483994053 ）

您可以看到该`REGARDING`列是一个 6 个字符的列。描述是：*这个 6 字节字段由系统提供，包含对二进制大对象 (BLOB) 数据库中字段的引用*。

现在打开`*.BLB`我可以看到块大小是 64 字节。所有文本块都被 NULL 填充到该大小。

我绊倒的地方是尝试将存储在 REGARDING 列中的值转换为 BLB 文件中的块位置。我的假设是 6 个字符的字段是一个偏移量。

例如，REGARDING 的一个值是（忽略方括号）： **`[ ",J$]`**

在我的谷歌搜索中，我发现了这个： [http ://ulisse.elettra.trieste.it/services/doc/dbase/DBFstruct.htm#C1.5](http://ulisse.elettra.trieste.it/services/doc/dbase/DBFstruct.htm#C1.5)

它解释了在备忘录字段中（至少在普通 DBF 文件中）空间值是忽略的（即它填充了列）。

因此，如果我是正确的（同样，方括号）**`[",J$]`**应该是我的 BLB 文件中的偏移量。幸运的是我仍然可以访问原始的 ACT2000 软件，所以我可以比较程序/MySQL 和 BLB 文件中的全文。

**使用我的示例值，我知道`REGARDING`值为的 DB 行`[ ",J$]`对应于 1024 字节偏移量（或 16 个块，假设我猜测的是 64 字节大小的块）。**

我已经尝试阅读一些用于读取 DBF 文件的开源项目的 Python 代码——但我无法理解。

我认为我需要做的是将字符解压缩为二进制文件，但不确定。

如何根据`DBF`文件中的内容找到要读取的基于 64 块的点？

* * *

**由杰里道奇编辑**

我试图将此字段中的字符串反向工程为十六进制值，然后使用 为整数值`StrToInt64`，但结果仍然与 blob 文件不匹配。我也尝试将这个整数值乘以 64 而不是相乘，但结果总是超出 blob 文件的大小，实际上没有找到任何数据。

例如，`___/BD`( `_`=space) 的值转换为`$2f4244`十六进制，而十六进制又转换为 的整数值`3097156`，但与 blob 文件中数据的任何相关部分都不对应，即使乘以或除以 64 时也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T13:53:13.180

根据您链接的 SDK，据我了解，会发生以下情况：

有一个`TYPE`字段 (right behing `REGARDING`) 对用途进行编码`REGARDING`（参见链接章节的第二个表）。因此，我假设如果`type=6`（未举行会议）`REGARDING`无关紧要，或者仅包含来自其他表的会议 ID 引用。按照这种思路，我只希望在（或可能为 100）`REGARDING`的情况下成为 BLB 偏移量。`type=101`我也不会放弃在这些相关情况下 TYPE 可能是 BLB 文件索引和偏移量的串联的想法（因为有人提到每个文件不能超过 30K 字符，我真的希望能够存储很多即使在一张表中也有更多数据）。

# validation - CakePHP 数据未保存且验证不起作用

> ID：10810954
> 
> 赞同：1
> 
> 时间：2012-05-30T06:23:10.237
> 
> 标签：validation, cakephp

当我的模型去验证我的表单时

1.  它总是假的，
2.  它不保存在数据库中。

我不明白为什么这不起作用，它一直有效，直到我解除了我的一些功能的绑定。

这是我的发票模型，它应该检查relationships_users 表（关系模型）中是否有to/biller。

```
<?php

class Invoice extends AppModel{ 
    var $name='Invoice'; 
    public $belongsTo = array(
        'Relationship' =>array(
            'className' => 'Relationship',
            'foreignKey' =>'relationship_id',
            )
        ); 
    var $validate = array(
        'to' => array(
            'relationshipExists' => array(
                'rule' => array(
                    'relationshipExists'),
                    'message' => 'sorry you dont have a relationship with that user.'
                    ),
        ),          
        );

    public function relationshipExists($check){ 
        $relationshipExists=$this->Relationship->find('count', array(
            'conditions' => array(
                'Relationship.partyone' => current($check),
                'Relationship.partytwo' => current($check)
            // get the value from the passed var
            )
        )
        );
            if ($relationshipExists>0) {
                return TRUE;
            }
            else
                return FALSE;
    } 
```

这是我在发票表中的功能

```
 public function addinvoice(){
    $this->set('title_for_layout', 'Create Invoice');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.jpg');   
    $this->layout='home_layout';
    if($this->request->is('post')){
        ($this->Invoice->set($this->request->data));
        if($this->Invoice->validates(array('fieldList'=>array('to','Invoice.relationshipExists')))){
            $this->Invoice->save($this->request->data); 
            $this->Session->setFlash('The invoice has been saved');  
      }}else { 
                $this->Session->setFlash('The invoice could not be saved. Please, try again.');
             }
    } 
```

它应该做的是检查 to/biller 是否在关系用户表中，然后将发票保存到发票表中，否则会抛出消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:37:24.557

条件数组对我来说似乎很奇怪：

```
 'conditions' => array(
            'Relationship.partyone' => current($check),
            'Relationship.partytwo' => current($check)
        // get the value from the passed var
        ) 
```

这将搜索与两者的关系`partyone` *并* `partytwo`设置为`to`。您可能想检查它们中的*任何*一个是否设置为`to`：

```
 'conditions' => array(
            'OR' => array(
                'Relationship.partyone' => current($check),
                'Relationship.partytwo' => current($check)
            )
        // get the value from the passed var
        ) 
```

# sql-server - 在 WITH XMLNAMESPACE 子句中查询

> ID：10810957
> 
> 赞同：2
> 
> 时间：2012-05-30T06:23:21.560
> 
> 标签：sql-server, xml

是否可以从数据库中获取 FOR XML 子句的结果 xml 中的命名空间的一些数据

例如

```
WITH XMLNAMESPACES ('uri1' as ns1, 
                'uri2' as ns2,
                DEFAULT 'uri2')
SELECT ProductID, 
  Name,
  Color
FROM Production.Product 
WHERE ProductID=316 or ProductID=317
FOR XML RAW ('ns1:Product'), ROOT('ns2:root'), ELEMENTS 
```

结果 ：

```
 <ns2:root xmlns="uri2" xmlns:ns2="uri2" xmlns:ns1="uri1">
   <ns1:Product>
<ProductID>316</ProductID>
<Name>Blade</Name>
  </ns1:Product>
  <ns1:Product>
<ProductID>317</ProductID>
<Name>LL Crankarm</Name>
<Color>Black</Color>
 </ns1:Product>
  </ns2:root> 
```

如果我想从内部数据库中获得价值怎么办？

像这样的东西：

```
WITH XMLNAMESPACES ('uri1' as ns1, 
           **(SELECT namespace from tableName)** as ns2,
            DEFAULT 'uri2') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:42:31.173

这种类型的事情在动态 SQL 中是可能的，但显然它有其自身的问题。请阅读 Erland Sommarskog 关于该主题的这篇优秀[文章](http://www.sommarskog.se/dynamic_sql.html)。

```
DECLARE @productId INT = 317
DECLARE @sql NVARCHAR(MAX) = 'WITH XMLNAMESPACES ( ''uri1'' as ns1, ''@yourNamespace'' as ns2, DEFAULT ''uri2'' ) 
SELECT 
    ProductID,  
    Name, 
    Color 
FROM Production.Product  
WHERE ProductID = @productId
FOR XML RAW (''ns1:Product''), ROOT(''ns2:root''), ELEMENTS'

SET @sql = REPLACE( @sql, '@yourNamespace', 'ns2' )

EXEC sp_executesql @sql, N'@productId INT', @productId 
```

关于您的 FOR XML AUTO 问题，AUTO 由对象和列名驱动，因此您可以使用别名来控制它，例如

```
;WITH XMLNAMESPACES( DEFAULT 'uri2', 'ns2' AS ns2, 'uri1' AS ns1 )
SELECT 
    ProductID,  
    Name, 
    Color 
FROM Production.Product AS "ns1:productO"
WHERE ProductID = 317
FOR XML AUTO 
```

我个人更喜欢 FOR XML PATH 因为您拥有完全的控制权并且一切都是明确的（即您必须指定名称空间和元素或属性，而不是由 AUTO 推断）。

```
;WITH XMLNAMESPACES( DEFAULT 'uri2', 'ns2' AS ns2, 'uri1' AS ns1 )
SELECT 
    ProductID AS "@ProductID",  
    Name AS "@Name", 
    Color AS "@Color"
FROM Production.Product AS "ns1:productO"
WHERE ProductID = 317
FOR XML PATH('ns1:product0') 
```

不过可能是一个单独的问题；)

高温高压

# html - 带有值和 ID 的 Vaadin ComboBox

> ID：10810958
> 
> 赞同：9
> 
> 时间：2012-05-30T06:23:36.233
> 
> 标签：html, combobox, vaadin

我已经定义了一个`ComboBox`允许用户从他的联系人列表中选择一个联系人。ComboBox 显示联系人姓名，但不能真正用于映射到真实联系人：需要联系人 ID。我的问题是我不知道如何`Vaadin` `ComboBox`用链接的值和 ID 填充，而只显示值。

```
// Add all organization contacts to the drop-down
for (Contact contact : organizationContacts) {
    contactName = contact.getName();
    contactId   = contact.getId();
    _logger.debug("Adding contactName=" + contactName + " contactId=" + contactId + " to person with id=" + personId);
    contactNameCombo.addItem(contactName);
}

// Add the contact of this person, and select it in the drop-down
contactName = person.getContact().getName();
contactId   = person.getContact().getId();
contactNameCombo.addItem(contactName);
contactNameCombo.setValue(contactName); 
```

正如您在上面的代码中看到的，我正在将 添加`contactName`到`ComboBox`，但我不知道如何添加 ，`contactId`以便稍后我可以从所选条目中知道必须使用哪个 ID 来更新数据库。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T08:15:06.463

有几种方法可以解决这个问题：这里最灵活的是配置组合框以使用命名属性作为标题。 有关更多详细信息，请参阅 [关于选择项目的 Vaadin 书。](https://vaadin.com/book/-/page/components.selecting.html)

```
// Set the caption mode to read the caption directly
// from the 'name' property of the item
contactNameCombo.setItemCaptionMode(Select.ITEM_CAPTION_MODE_PROPERTY);
contactNameCombo.setItemCaptionPropertyId("name");

// Add all organization contacts to the drop-down
for (Contact contact : organizationContacts) {
    contactName = contact.getName();
    contactId   = contact.getId();
    _logger.debug("Adding contactName=" + contactName + " contactId=" + contactId + " to person with id=" + personId);

    // Note : the itemId of the item is the contactId
    Item item = contactNameCombo.addItem(contactId);
    item.getProperty("name").setValue(contactName)
}
// Add the contact of this person, and select it in the drop-down
contactName = person.getContact().getName();
contactId   = person.getContact().getId();
Item item = contactNameCombo.addItem(contactId);
item.getProperty("name").setValue(contactName)

// Using the itemId (which = contactId) to select the given contact
contactNameCombo.setValue(contactId); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-25T12:55:53.080

@Charles Anthony 给出的解决方案也对我不起作用。在 Vaadin 文档（[https://vaadin.com/book/-/page/components.selecting.html](https://vaadin.com/book/-/page/components.selecting.html)）中，我找到了以下代码：

```
// Set item caption for this item explicitly
select.addItem(2); // same as "new Integer(2)"
select.setItemCaption(2, "Deimos"); 
```

这对我有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-17T11:52:24.963

瓦丁 7：

```
 statusSelectCombo.setItemCaptionMode(ItemCaptionMode.PROPERTY);
statusSelectCombo.setItemCaptionPropertyId("courseOptionValue");

   IndexedContainer iContainer = new IndexedContainer();
   iContainer.addContainerProperty("courseId", String.class, "");
   iContainer.addContainerProperty("courseOptionValue", String.class, "");
    String addItemId="";
    String addItemCaption="";
for (int i = 0; i < comboItemsArray.length; i++) //String[] comboItemsArray
{
    log.debug("comboItemsArray["+i+"] "+comboItemsArray[i]);
    addItemId= comboItemsArray[i];
    addItemCaption=comboItemsArray[i];
   Item newItem = iContainer.getItem(iContainer.addItem());
   newItem.getItemProperty("courseId").setValue(addItemId);
   newItem.getItemProperty("courseOptionValue").setValue(addItemId);
}
statusSelectCombo.setContainerDataSource(iContainer);

ValueChangeListener listener = new Property.ValueChangeListener()
{
    public void valueChange(ValueChangeEvent event)
    {
    statusSelectCombo.getItemIds();
    Property changedProperty = event.getProperty();
    Object selectedStatus = (Object) statusSelectCombo.getValue(); //it is get Value but gives object ID as an Object
    Item rowItem = statusSelectCombo.getItem(selectedStatus);
    final String selectedCourseId = (String) rowItem.getItemProperty("courseId").getValue();        

    }
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T10:15:20.753

查尔斯安东尼是绝对正确的。

您还可以利用诸如 BeanContainer 或 BeanItemContainer 之类的容器（例如，[在此处](https://vaadin.com/book/-/page/datamodel.container.html)了解更多信息）将您的联系人对象添加到您的 ComboBox。你需要填满你的容器并添加它

```
contactNameCombo.setContainerDataSource(YOUR_CONTAINER); 
```

到您的组合框。

# magento - 在 magento 中显示可配置产品缺货

> ID：10810960
> 
> 赞同：3
> 
> 时间：2012-05-30T06:23:38.143
> 
> 标签：magento

我为我的可配置产品设置了属性，我想在我的选择尺寸下拉列表中显示 L 尺寸的产品缺货

![在此处输入图像描述](../Images/c27666bf301aeaa6ec57bd4ca58d286b.png) 我得到了一个代码，但那是针对magento 1.4的，我正在使用magento 1.6

守则是

在 mage/catalog/block/product/view/type/configurable.php 中，在 ~85 行中你有这样的东西：

```
foreach ($this->getAllowAttributes() as $attribute) {
                $productAttribute = $attribute->getProductAttribute();
                $attributeValue = $product->getData($productAttribute->getAttributeCode());

                if (!isset($options[$productAttribute->getId()])) {
                    $options[$productAttribute->getId()] = array();
                }

                if (!isset($options[$productAttribute->getId()][$attributeValue])) {
                    $options[$productAttribute->getId()][$attributeValue] = array();
                }
                $options[$productAttribute->getId()][$attributeValue][] = $productId;

            } 
```

因此，在那个 foreach 循环中，最好是在 foreach 行之后，插入以下代码：

```
$options['qty'][$product -> getAttributeText($productAttribute->getName())] = floor($product->getStockItem()->getQty()); 
```

之后，在 ~128 行，你有这样的东西：

```
$info['options'][] = array(
                        'id'    => $value['value_index'],
                        'label' =>  $value['label'] ,
                        'price' => $this->_preparePrice($value['pricing_value'], $value['is_percent']),
                        'products'   => isset($options[$attributeId][$value['value_index']]) ? $options[$attributeId][$value['value_index']] : array(),
                    );
replace it with this :

$info['options'][] = array(
                        'id'    => $value['value_index'],
                        'label' => ($options['qty'][$value['label']] <= 0) ? $value['label'] . ' * out of stock' : $value['label'] . " * (".$options['qty'][$value['label']]." in stock)",
                        'price' => $this->_preparePrice($value['pricing_value'], $value['is_percent']),
                        'products'   => isset($options[$attributeId][$value['value_index']]) ? $options[$attributeId][$value['value_index']] : array(),
                    ); 
```

谁能告诉我根据 magento1.6 会有什么变化？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-01-30T12:04:41.043

Create your own module, and in the config.xml file add these 2 events inside the tag:

```
<events>
    <controller_action_layout_render_before_catalog_product_view>
        <observers>
            <namespace_module>
                <class>module/observer</class>
                <method>showOutOfStock</method>
            </namespace_module>
        </observers>
    </controller_action_layout_render_before_catalog_product_view>
    <controller_action_layout_render_before_checkout_cart_configure>
        <observers>
            <namespace_module>
                <class>module/observer</class>
                <method>showOutOfStock</method>
            </namespace_module>
        </observers>
    </controller_action_layout_render_before_checkout_cart_configure>
</events> 
```

Now create an observer inside app/code/local/Namespace/Module/Model/Observer.php

```
class Namespace_Module_Model_Observer {
    public function showOutOfStock($observer){
        Mage::helper('catalog/product')->setSkipSaleableCheck(true);
    }
} 
```

# c# - 如何将部分字符串复制到另一个字符串中？

> ID：10810972
> 
> 赞同：0
> 
> 时间：2012-05-30T06:24:57.073
> 
> 标签：c#, string

我想在电子邮件中发送多附件，但有问题。当我将要发送的所有文件放入一个字符串中时，总是会出错，但是当将一个文件放入一个附件中时，循环内的事情会起作用。

**现在我将字符串的一部分复制到另一个字符串时遇到问题，不知道该怎么做，您有什么解决方案吗？**

例子：

txtattach.Text = "d:\\folder\\file1,d:\\folder\\file2,d:\\folder\\file3";

想要获得 3 个没有“，”的位置上下文的字符串，我可以轻松地将其放入循环中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T06:28:17.463

使用拆分功能：

```
string[] paths = txtattach.Text.Split(','); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:29:34.073

一种方法是使用[Split 方法](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)，这样您就可以轻松地在循环中迭代项目：

```
foreach(var filename in txtAttach.Text.Split(','))
{
 // Do something with filename
} 
```

# repository - 常春藤报告需要很长时间

> ID：10810974
> 
> 赞同：1
> 
> 时间：2012-05-30T06:25:04.983
> 
> 标签：repository, ivy

我正在尝试运行[Ivy`repreport`](http://ant.apache.org/ivy/history/2.0.0/use/repreport.html)，但是它需要很长时间（在我杀死它之前 > 48 小时）。

运行它的存储库相当大，但并不可笑（约 150 个公司工件和可能约 1K 的依赖项）。

以详细方式运行不会产生任何输出。

有没有人知道可能发生的事情或如何加快速度？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:22:43.697

我会将报告限制为您的组织，例如：

```
<ivy:repreport organisation="youroganization" /> 
```

这样，未链接到您的组织的工件将被忽略。

在我的机器上，第一行输出是：

```
ivy-report:
[ivy:repreport] :: resolving dependencies :: caller#all-caller;working 
```

所以根本没有输出是非常可疑的，但我不知道是什么原因造成的。

如果一切都失败了，你可以尝试清理缓存。

# jenkins - 1 jenkins job 根据参数触发多个jenkins job

> ID：10810975
> 
> 赞同：4
> 
> 时间：2012-05-30T06:25:05.760
> 
> 标签：jenkins, jenkins-plugins

是否有任何 Jenkins 插件可以帮助解决以下问题：

*   如果目录`<XXX*`, 存在于 SVN 文件夹中`<GoRoCo>`
*   那么`<GoRoCo>_<XXX>`詹金斯的工作叫什么？

示例：
在作业`"TEST"`中，我指定了目录名称（A、B、C）和文件夹名称（G1R2）等参数，然后作业`"TEST"`应该触发作业`"G1R2_A"`， `"G1R2_B"`并且`"G1R2_C"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:44:25.673

使用[参数化触发器插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)。当指定要在插件中调用的作业时，您可以使用令牌，如`JOB_${PARAM1}_${PARAM2}`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T07:18:03.670

看看那个插件，我认为它完全符合您的要求：

[https://wiki.jenkins-ci.org/display/JENKINS/Files+Found+Trigger](https://wiki.jenkins-ci.org/display/JENKINS/Files+Found+Trigger)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-28T08:59:34.450

使用[构建流程插件](https://wiki.jenkins-ci.org/display/JENKINS/Build+Flow+Plugin)

在此插件的帮助下，您可以使用或不使用参数运行尽可能多的作业。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-24T07:45:07.587

使用一些脚本为每个修改后的项目创建具有所需参数的属性文件，并将它们放在工作区目录中。

稍后您可以使用参数化插件来触发这样的下游项目。

[![在此处输入图像描述](../Images/9c711439f2f28e2755d8fadaec4dece9.png)](https://i.stack.imgur.com/LzeSg.png)

注意：您可能还必须在触发下游项目后删除这些属性。

# java - 在 netbeans 中运行主项目时未显示 GUI

> ID：10810978
> 
> 赞同：1
> 
> 时间：2012-05-30T06:25:19.383
> 
> 标签：java, swing, user-interface, netbeans, netbeans-7

我使用 net beans 制作了一个摆动 GUI，当我运行主项目时，GUI 没有出现。但是输出窗口显示构建成功。运行文件工作正常。可能有什么问题？提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T06:29:01.597

只是在这里猜测，但您是否真的创建了一个 GUI 实例，然后在某个方法中将其设置为可见，例如您的 main() 方法？

例如

```
MyGuiClass app = new MyGuiClass();
app.setVisible(true); 
```

# com - ATL 接口指针：替换 get_ 和 put_

> ID：10810983
> 
> 赞同：1
> 
> 时间：2012-05-30T06:25:34.813
> 
> 标签：com, properties, atl, smart-pointers

很多年前我做过 ATL 编程，现在又走上了这条路。我记得上次，编译器有一种方法可以自动优化 put_ 和 get_（即属性）。我真的不知道我上次是怎么做到的。

目前我正在这样做：

```
// assume p is a pointer to an interface
CComBSTR name;
p->get_Name(&name); 
```

这段代码真的让我很烦，我相信有更好的方法：

```
// can we do this?
CComBSTR name(p->get_Name());
// or maybe this
CComBSTR name(p->Name); 
```

我不知道如何使用 CComPtr 和 _com_ptr_t 做到这一点。另请注意， p 是指向同一库中接口的指针。所以我没有使用#import 或任何东西。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-09-06T07:40:18.937

CComBSTR 名称（p-> 名称）；是对的

# operating-system - 如何在 Ada 中直接访问内存地址？

> ID：10810984
> 
> 赞同：5
> 
> 时间：2012-05-30T06:25:37.303
> 
> 标签：operating-system, ada, vga

所以我是 Ada 的新手，我正在尝试在其中编写一个内核，但我似乎找不到任何关于如何正确执行此操作的好信息。在 C 中，我会写：

```
unsigned char* videoram = (char*) 0xB8000;
videoram[0] = 65; 
```

直接访问视频内存并向其写入“a”。我听说我需要使用 Ada 数组和其他编译指示在 Ada 中以类型安全的方式执行此操作。这种 Ada 编程有什么好的资源吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T06:38:06.727

您可以使用以下`'Address`属性：

```
Videoram : String (1 .. Videoram_Size);
for Videoram'Address use 16#B8000#;
-- ...
Videoram (1) := 'a'; 
```

如果您不想使用字符串和字符，您可以定义自己的数据类型.. 比如：

```
type Byte is mod 2**8; -- unsigned char
type Byte_Array is array (Natural range <>) of Byte;
Videoram : Byte_Array (0 .. Videoram_Size - 1);
for Videoram'Address use 16#B8000#;
-- ...
Videoram (0) := 65; 
```

顺便说一句，您甚至可以检查索引的范围，因此您不能在 Videoram 范围之外进行写入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T05:55:43.943

如果您使用地址属性（即 Object'Address 使用 ... ），您应该使用 System.Storage_Elements 中的 To_Address() 函数，因为地址类型不必是整数。Ada 参考手册仅说明：

“地址是一个明确的、不受限制的类型，具有可预先加工的初始化”

而对于 System.Storage_Elements 中的 Integer_Address 类型，它指出：

“Integer_Address 是（有符号或模数）整数子类型。To_Address 和 To_Integer 在此类型和地址之间来回转换。”

所以，你真的应该使用：

对于 Object'Address 使用 To_Address( 16#B8000# );

One last thing to point out from T.E.D's answer is that if you are concerned about object initialization using this method, simply add a pragma Import( Ada, your_object ) after the declaration so that default initialization is suppressed.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T16:19:39.897

其实有两种方式。

一种是设置一个指向要使用的地址的指针，并通过指针访问对象。

```
type Video_RAM_Pointer is access all My_Video_Ram_Struct;
package Convert is new System.Address_To_Access_Conversions (Video_RAM_Pointer);
Video_RAM : constant Video_RAM_Pointer := Convert.To_Access (16#B8000#); 
```

另一种是将您的数据覆盖在该位置的顶部。

```
Video_RAM : My_Video_RAM_Struct;
for Video_RAM'address use at 16#B8000#; 
```

一般来说，我更喜欢使用前者。除其他问题外，后者算作声明，这意味着 My_Video_RAM_Struct 中具有初始化代码的任何字段都会在您每次声明覆盖时重新初始化。此外，人们很容易过度使用（滥用）该功能以在所有地方给对象起别名，这对优化器和维护程序员来说都是困难的。

指针方法只是告诉编译器假设给定的地址包含您告诉它的结构，恕我直言，这正是您想要发生的。

# php - PHP - 如何从时间戳中获取持续时间？

> ID：10810986
> 
> 赞同：1
> 
> 时间：2012-05-30T06:25:42.377
> 
> 标签：php, date, timestamp

因此，我有一个 30:13（分钟：秒）格式的播客长度数组，我想首先将其转换为有效的 UNIX 时间戳，然后将此时间戳格式化为可读的格式，例如“30 分钟 13 秒”。

我的转换为时间戳功能如下所示：

```
public function duration($str) {
    $a = explode(':', $str);
    $v = (($a[0]*60)+$a[1]);
    return $v;
} 
```

当我尝试对其进行格式化时，问题就出现了，`date('H:i:s', $v)`它会产生像“17:35:50”这样的数字，而在地狱中，播客的长度是 17 小时。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T06:34:15.423

UNIX 时间戳不用于计算持续时间，它们表示自纪元（1970 年初）以来的特定时间，以秒为单位。如果您将非常低的值传递给诸如`date()`期望时间戳的函数，您将获得 1970 年代初期的日期。您必须手动进行时间格式化。

**编辑：**请注意，如果您居住在 GMT 时区，您将获得预期的结果。这是因为`date()`在计算时间戳生成的日期时会考虑您当前的时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:34:15.553

只需将其格式化为可读字符串。

```
$duration = '30:13';
list($min, $sec) = explode(':', $duration);
echo "{$min}mins {$sec}s"; // 30mins 13s 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T06:37:42.863

这应该可以完成您想要的工作。时间戳有所不同，请参阅[http://en.wikipedia.org/wiki/Timestamp](http://en.wikipedia.org/wiki/Timestamp)

```
// $str has the format 'mm:ss'
public function duration($str) {
    list($min, $sec) = explode(':', $str);
    return $min . ' mins ' . $sec . ' sec';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T06:39:18.830

使用简单的正则表达式

```
function duration($str)
{
    return preg_replace('/^([0-9]{2})\:([0-9]{2}$)/', '$1 mins $2s', $str); 
}
echo duration("30:33"); 
```

输出

```
30 mins 33s 
```

希望这对您有所帮助。谢谢！！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T06:41:00.090

你可以试试 hh:mm:ss

```
list($hours,$mins,$secs) = explode(':', $yourtime);
echo $hours.' hours '.$mins .'minuts'. $secs .'seconds'; 
```

可以这样工作

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-30T06:42:39.680

Unix 时间戳为您提供从 1970 年 1 月 1 日 00:00:00 开始经过的秒数，但不是时间段。

为了完成你的任务，我会做：

```
$str = '30:13';

function duration($str) {

    $a = explode(':', $str);

    $hours = floor($a[0] / 60);

    $minutes = $a[0] - $hours * 60;

    $seconds = $a[1];

    $result = '';

    if($hours) {

        $result .= "$hours hours ";

    }

    if($minutes) {

        $result .= "$minutes minutes ";

    }

    return "$result$seconds seconds";

}

var_dump(duration($str)); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-30T06:50:03.600

您可以使用[DateInterval](http://php.net/manual/en/class.dateinterval.php)对象。

```
function getInterval($durationString) {
    $parts = explode(':', $durationString);
    $min = $parts[0];
    $sec = $parts[1];

    $interval = new DateInterval("PT{$min}M{$sec}S");
    return $interval;
}

$interval = getInterval('30:12');
echo $interval->format('%imins %ss'); 
```

我假设您使用的持续时间格式只有分钟和秒，当然如果您还需要几个小时，您可以修改代码。

# winapi - ReadFile 中的 ERROR_INVALID_DATA (13) 是什么意思？

> ID：10810989
> 
> 赞同：0
> 
> 时间：2012-05-30T06:25:59.363
> 
> 标签：winapi, windows-ce

我们的应用程序在某些 WinCE 设备上失败。日志表明，`ReadFile`对于某些（只读，在桌面构建中工作）文件失败并`GetLastError`返回 13，即`ERROR_INVALID_DATA`. 在这种情况下这意味着什么？我只看到 Heap32Next 提到的这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:39:51.933

从来没有出现过这样的错误，可能的原因：

[http://support.microsoft.com/kb/967335](http://support.microsoft.com/kb/967335)

“在 Windows CE 5.0 中，SD 总线驱动程序错误地将安全数字 (SD) 卡的内存容量计算为小于实际内存容量。因此，从位置超过错误计算的内存容量的文件中读取数据的函数可能会出现错误的行为。

例如，如果您使用 ReadFile 函数读取存储在 SD 高容量 (SDHC) 卡上此区域中的文件，则 ReadFile 函数返回 0。因此，GetLastError 函数返回以下错误：ERROR_INVALID_DATA。

# sharepoint - 如何使用格式化的数据时间以编程方式更新列表项日期/时间字段

> ID：10810991
> 
> 赞同：1
> 
> 时间：2012-05-30T06:26:01.470
> 
> 标签：sharepoint, datetime, formatting, listitem

> 日期格式是这样的。
> 
> 0001-01-01T00:00:00 -> 不更新。2012-05-21T00:00:00 -> 正确更新

以下我使用的代码。

```
 SPSite site = new SPSite("http://server");
    SPWeb web = site.OpenWeb();
    SPWeb subsite = site.OpenWeb();
    SPList englist = subsite.Lists["list"];

    SPListItem item1 = englist.Items.Add();
    item1["Title"] = "title";
    item1["date"] = "0001-01-01T00:00:00";//0001-01-01T00:00:00 -> not updating. 2012-05-21T00:00:00
    item1.Update();
    Console.WriteLine("Added"); 
```

日期时间值“0001-01-01T00:00:00”不更新的原因是什么。

我发现这可能是问题（日期范围限制）

![在此处输入图像描述](../Images/2a89e80000fb56375bc169feeb260226.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:36:03.717

Sharepoint 使用 MSSQL 存储字段的值，因此 DateTime 字段映射到[日期](http://msdn.microsoft.com/en-us/library/ms187819.aspx)时间sql 类型，范围从 1753 年 1 月 1 日到 9999 年 12 月 31 日。这就是为什么不能在数据库中存储如此小的值的原因。

# css - 将图像设置为选择标签的背景

> ID：10810992
> 
> 赞同：0
> 
> 时间：2012-05-30T06:26:04.403
> 
> 标签：css

这是CSS部分：

```
#selectTagId{
    background-color: transparent;
    color: white;
    background-image: url('images/img01.jpg');
    background-position: right;
    overflow: hidden;
} 
```

图片路径正确。但是没有显示图像。相反，背景是白色的？呃呃呃这个怎么解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:36:35.903

对我来说，它适用于绝对 img 路径。见[http://jsfiddle.net/9qf59/2/](http://jsfiddle.net/9qf59/2/)

请记住，css 中的相对路径可能会导致一些奇怪的效果。它们是相对于 css 文件的，而不是文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:37:53.500

您是否将此样式应用于 div？如果是这样，您必须指定该 div 的宽度和高度：

```
#selectTagId{
  background-color: transparent;
  color: white;
  background-image: url('images/img01.jpg');
  background-position: right;
  overflow: hidden;
  width: 200px;
  height: 200px;
} 
```

# extjs - 用 ext treepanel 中的单选按钮替换复选框

> ID：10810994
> 
> 赞同：1
> 
> 时间：2012-05-30T06:26:36.157
> 
> 标签：extjs, tree

我有向导，在哪里使用了 extjs 中的树形面板。目前我正在对树形面板中的节点使用复选框，但现在我需要用单选按钮替换复选框。请提出一些建议。

# java - 使用 Spring mvc 的 JSP 表单

> ID：10810999
> 
> 赞同：0
> 
> 时间：2012-05-30T06:27:15.827
> 
> 标签：java, javascript, spring, jsp, spring-mvc

我创建了以下 JSP。这个 jsp 创建了两个按钮。

```
<form:form method="POST"  action="${pageContext.request.contextPath}/link">    
     <div class="button-container" style="float:left;clear:right">
        <table>

            <tr>
               <td>
                  <input id="post" type="image" src="${pageContext.request.contextPath}/<spring:theme code="image"/>votup.png" 
                </td>
            </tr>

            <tr class="hidden">    
                <td class="hidden">           
                  <input type="text" name="mark" value="up"/> 
                </td>
            </tr>

     <tr>
                <td>
                   <input id="post" type="image" src="${pageContext.request.contextPath}/<spring:theme code="image"/>votdown.png" 
                </td>
             </tr>

             <tr class="hidden">
                <td class="hidden">
                    <input type="text" name="mark" value="down"/>
                </td>
             </tr> 
```

在控制器类中

```
 @RequestMapping(value = "/link", method = RequestMethod.POST)
 public String sendMark(@RequestParam("mark") final String marking){

 } 
```

我注意到字符串标记的值 = up,down。无论我单击 2 个按钮中的哪一个，都会发生这种情况。而不是这个，我只想根据用户将单击的按钮向上或向下。（如果单击第一个按钮应该向上，如果单击第二个按钮应该向下）。我明白我之所以得到这个结果是因为我将两个隐藏值都命名为标记，但我不知道如何用另一种方式进行分离。实际上是我第一次使用 JSP。我可以使用一些标签库来解决这个问题吗？非常感谢任何评论或答案！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:52:26.470

我建议您只放置一个隐藏字段并在处理 POST 命令之前使用 javascript 更改其值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:01:26.360

我建议您为两个按钮创建两个单独的表单，并且两个表单都将包含隐藏字段。现在你只会得到一个值。

但是，如果您使用不同的操作创建两个单独的表单，那么您将不需要隐藏字段。

希望这对您有所帮助。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:25:03.893

据我了解，您将提交表格以进行投票或否决。并且您希望每个动作有 2 个按钮以相同的形式，但不知道如何有所作为。我会做这样的事情：

在表单上，​​根据您的请求映射放置操作（似乎已经完成）。然后，两个按钮都会提交表单。首先，您的两个按钮都具有相同的 id，并且每个元素的 id 必须是唯一的。所以，给你的箭头和表格id就像：

```
<input id="postup" type="image" 
<input id="postdown" type="image"
<form id="myform" 
```

然后，对它执行一个 onclick 操作，例如：并创建 2 个 JS 函数：

```
function postUp () {
   $('#mark').val("up");
   $('#myform').submit();
}
function postDown () {
   $('#mark').val("down");
   $('#myform').submit();
} 
```

您的控制器将如下所示：

```
@RequestMapping(value = "/link", method = RequestMethod.POST)
public String sendMark(Model model, HttpServletRequest request){

String mark = request.getParameter("mark");
return "yourjsp"
} 
```

你就会有你的价值。希望能帮助到你 ！问候 ！