# StackOverflow 问答 10485000-10485999

# android - 在 Thread 捕获 UncaughtException 之前上下文会发生什么

> ID：10485001
> 
> 赞同：3
> 
> 时间：2012-05-07T15:43:07.507
> 
> 标签：android, exception, error-handling, android-context

结合我[的上一个问题](https://stackoverflow.com/questions/10033580/how-do-i-stop-my-application-from-zombifying-after-i-handle-an-uncaught-excepiti) ，我想确切地知道当异常被 a 捕获时上下文会发生什么`Thread.UncaughtExceptionListener`。当侦听器接收到未捕获的异常时，上下文似乎已陷入困境。它可以访问它的一些方法（主要是与资源有关的方法），但随后有很多方法不起作用（或明显不起作用）。这包括（但不限于，我确信还有更多我没有找到）：

*   `Toast`（如我的链接）
*   `Dialog`
*   创造新的活动。这包括正常`Context.startActivity(Intent)`和`PendingIntent`.

然而，上下文仍然可以访问上下文资源（`getString()`奇怪 `Resources`的是`Notification`s）。

**为什么是这样？是什么导致上下文中的这种状态不平衡（？）以防止任何上下文驱动的调用？**

下面我为您创建了一个测试应用程序，假设在未捕获异常时启动错误活动。要在我一直在做的情况下测试我提到的东西（Toast 和对话），请将它们的构建器放在 BoomMitActivity 中，而不是通知构建器。

在给定的示例中，活动出错（怎么可能不出错？）并在单击时启动 BoomMitActivtiy `Notification`。但是，从未调用过 BoomMit `onCreate`。

**应用：**

```
public class AndroidTestoActivity extends Activity implements UncaughtExceptionHandler {
    @Override public void onCreate(Bundle icicle) {
        super.onCreate(icicle);

        Thread.setDefaultUncaughtExceptionHandler(this);

        throw new RuntimeException("HAHAHAHA, I broke you");
    }

    @Override public void uncaughtException(Thread arg0, Throwable arg1) {
        finish();
        NotificationManager nm = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
        Notification note = new Notification(R.drawable.ic_launcher, "Boom!", System.currentTimeMillis());

        Intent i = new Intent(this, BoomMitActivity.class);
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        PendingIntent pi = PendingIntent.getActivity(this, 1, i, PendingIntent.FLAG_ONE_SHOT);
        note.setLatestEventInfo(this, "Boom!", "Open BoomMitActivity", pi);
        note.flags |= Notification.FLAG_AUTO_CANCEL;

        nm.notify(1, note);
        Log.d("TAG", "End");
    }

    static class BoomMitActivity extends Activity {
        @Override public void onCreate(Bundle icicle) {
            super.onCreate(icicle);
            TextView tv = new TextView(this);
            tv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
            tv.setBackgroundColor(0xffff0000);
            tv.setText("BoomMitActivity is the one true activity");
            tv.setTextColor(0xff00ffff);
            setContentView(tv);
        }
    }
} 
```

**显现：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.testo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".AndroidTestoActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="AndroidTestoActivity$BoomMitActivity"
            android:label="I'm a real boy!"
            android:taskAffinity=""
            android:excludeFromRecents="true"
            android:launchMode="singleTask">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:28:09.170

Context 本身没有任何反应。如果您正在谈论当您处于应用程序崩溃对话框启动的情况下，那么崩溃线程就坐在那里等待用户按下按钮并让它继续杀死自己。此时系统知道您的应用程序已被删除，并且正在等待用户确认并最终终止它。所以你真的应该假设你正在走出去，而不是依赖任何有效的东西。

此外，如果此崩溃来自主线程，则该线程现在坐在那里阻塞等待用户确认崩溃对话框，以便它可以自杀。它不是坐在那里处理它的消息循环，它坐在那里完全被阻塞等待自杀。在该线程上安排的任何工作都不会执行。对于主线程，这包括对 Activity.onCreate()、Service.onStart() 等组件的回调，等等。对于任何线程，这包括为与该线程关联的窗口 UI 调度任何工作。同样，如果这是主线程，这可能意味着您的所有 UI。

# java - Java Unmarshal 使用 JAXB 的对象列表

> ID：10485002
> 
> 赞同：2
> 
> 时间：2012-05-07T15:43:10.057
> 
> 标签：java, jaxb, deserialization

我有如下所示的 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ObjectList>
  <object attributeOne="somedate" attributeTwo="false" attributeThree="id" attributeFour="true"/>
  <object attributeOne="somedate" attributeTwo="false" attributeThree="id" attributeFour="true"/>
  <object attributeOne="somedate" attributeTwo="false" attributeThree="id" attributeFour="true"/>
  <object attributeOne="somedate" attributeTwo="false" attributeThree="id" attributeFour="true"/>
  <object attributeOne="somedate" attributeTwo="false" attributeThree="id" attributeFour="true"/>
</ObjectList> 
```

我有一个如下所示的 ObjectList 类：

```
@XmlRootElement
public class ObjectList {

    @XmlElementWrapper(name = "ObjectList")
    @XmlElement(name = "Object")
    private ArrayList<Object> ObjectList;

    public ArrayList<Object> getObjectList() {
        return ObjectList;
    }

    public void setObjectList(ArrayList<Object> objectList) {
        ObjectList = objectList;
    }
} 
```

还有一个看起来像这样的对象类：

```
@XmlRootElement(name = "Object")
public class Object {

    Date attributeOne;
    boolean attritbuteTwo;
    String attributeThree;
    boolean attributeFour;

    @XmlAttribute
    public Date getAttributeOne() {
        return attributeOne;
    }
    public void setAttributeOne(Date attributeOne) {
        this.attributeOne = attributeOne;
    }

    @XmlAttribute
    public boolean isAttributeTwo() {
        return attritbuteTwo;
    }
    public void setAttributeTwo(boolean attritbuteTwo) {
        this.AttributeTwo = AttributeTwo;
    }

    @XmlAttribute
    public String getAttributeThree() {
        return attributeThree;
    }
    public void setAttributeThree(String attributeThree) {
        this.attributeThree = attributeThree;
    }

    @XmlAttribute
    public boolean isAttributeFour() {
        return attributeFour;
    }
    public void setAttributeFour(boolean attributeFour) {
        this.attributeFour = attributeFour;
    }
} 
```

当我尝试使用以下代码将 xml 解组为对象时：

```
JAXBContext jaxbContext = JAXBContext.newInstance(ObjectList.class);
Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();

RESTResponse response = getObjects();

ObjectList objects = (ObjectList) unmarshaller.unmarshal(new StringReader(response.getResponseBody())); 
```

我收到以下错误：

javax.xml.bind.UnmarshalException：意外元素（uri：“”，本地：“ObjectList”）。预期元素是 <{}Object>、<{}objectList>

**编辑：** 我刚刚注意到几个问题我将我的 ObjectList 对象的 XmlRootElement 标记更改为 @XmlRootElement(name = "ObjectList") 并将我的对象的 XmlRootElement 标记更改为 @XmlRootElement(name = "object)。我不再得到异常，但是我现在得到并清空对象列表。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:04:25.590

好吧，它说的是预期元素：`Object`或`objectList`（以小写“o”开头），但它读取的是`ObjectList`（以大写“O”开头）！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:48:33.663

也许您应该尝试将自定义类的名称更改为其他名称`Object`？或确保`Object`在`ObjectList`课堂上使用正确的实例

# c# - mysql查询scope_identity错误

> ID：10485004
> 
> 赞同：0
> 
> 时间：2012-05-07T15:43:19.847
> 
> 标签：c#, mysql

嘿，伙计们，我很难解决这个错误，请帮助我将 c# 与 mysql 连接器一起使用，我编写了一个类似这样的查询......

```
INSERT INTO employee VALUES(...); SELECT last_insert_id(); 
```

但由于某种原因我不断收到此错误:(

```
"You have an error in your SQL syntax; check the manual that corresponds to your MySql server version for the right syntax to use near 'SELECT scope_identity()' at line 1". 
```

我没有得到这个错误的部分是我没有`scope_identity()`在我的代码中写任何地方。

我什至删除了`SELECT last_insert_id();`查询的一部分，但出于某种奇怪的原因，我仍然遇到同样的错误。

[编辑] 这会完美地生成查询，但最后它会添加`scope_identity()`而不是`last_insert_id()`

```
public static MySqlCommand insert(string tableName, params object[] values)
    {
        string sqlQuery = "INSERT INTO " + tableName + " VALUES(";

        for (int i = 0; i < values.Count(); i++)
        {
            if (i == values.Count() - 1 && values[i] is string)
            {
                sqlQuery = sqlQuery + "'" + values[i] + "'";
            }
            else if (i == values.Count() - 1 && values[i] is int)
            {
                sqlQuery = sqlQuery + values[i];
            }
            else if (values[i] is string || values[i] is DateTime)
            {
                sqlQuery = sqlQuery + "'" + values[i] + "', ";
            }
            else if (values[i] is int)
            {
                sqlQuery = sqlQuery + values[i] + ", ";
            }
        }

        sqlQuery = sqlQuery + "); SELECT LAST_INSERT_ID(); ";

        MySqlCommand cmd = new MySqlCommand(sqlQuery);

        return cmd;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:05:58.570

string insert = "INSERT INTO 员工价值(...)";

字符串选择=“选择last_insert_id()”；

# asp.net-mvc - ASP.NET MVC3 模板。试图将数据分成三列

> ID：10485006
> 
> 赞同：1
> 
> 时间：2012-05-07T15:43:24.417
> 
> 标签：asp.net-mvc, for-loop

我认为这是一个非常简单的问题，但我是 ASP.NET MVC 的新手。

我从模型中检索数据，但我想将其分成等长的三列，或者尽可能接近等长。

这些 for 循环没有起到作用，所以我对如何在模板中最好地做到这一点有点迷茫。

谢谢。

![在此处输入图像描述](../Images/1ff577d6bf266e7b0abd5238d05a862f.png)

编辑：我以更好的方式解决了它。它可以像这样在css中完成：

```
 <div class="topic_content">
        <div>
        <ul>
            @for (int i = 0; i < Model.Topics.Length; i++)
            {
                <li><a href="javascript:void(0)" class="company_topic" data-popularity="@Model.Topics[i].Popularity" data-topicId="@Model.Topics[i].Id">@Model.Topics[i].Name.ToLower()</a></li>
            }
        </ul>
        </div>

    </div> 
```

然后在CSS中我设置：

```
.topic_content ul { width: 100%; }
.topic_content ul li { list-style: none; text-align: left; float:left; width:33%; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:01:06.297

If you want to do it in C#, here's how I would recommend doing it:

```
@{
    var topics = Model.Topics;
    var takeCount = Model.Topics.Count() / 3;
}
@for( i=0; i<3; i++ ) {
    <div class="topic_content">
        <div>
        <ul>
            @foreach( var topic in topics.Take( takeCount ) )
            {
                <li><a href="javascript:void(0)" class="company_topic" data-popularity="@topic.Popularity" data-topicId="@topic.Id">@topic.Name.ToLower()</a></li>
            }
            @{ topics = topics.Skip( takeCount ); }
        </ul>
        </div>

    </div>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:32:38.997

这是一篇很好的 CSS 技术文章来完成它。

[http://www.alistapart.com/articles/multicolumnlists/](http://www.alistapart.com/articles/multicolumnlists/)

# linq - 获取深度未知的xml中子节点的值

> ID：10485009
> 
> 赞同：0
> 
> 时间：2012-05-07T15:43:27.303
> 
> 标签：linq, linq-to-xml

我得到这样的 XML：

```
<menu>
  <is>
    <not>
      <l>Title</l>
      <s>url1</s>
      <t>1</t>
      <is>
        <hlua>
          <l>Title</l>
          <s>url2</s>
          <t>0</t>
            <is>
              <frme>
                <l>Title</l>
                <s>url3</s>
                <t>1</t>
              </frme>
            </is>
        </hlua>
        <chrj>
          <l>Title</l>
          <s>url4</s>
          <t>1</t>
            <is>
              <cgas>
                <l>Title</l>
                <s>url5</s>
                <t>1</t>
                <is>
                  <el12>
                    <l>Title</l>
                    <s>url6</s>
                    <t>1</t>
                  </el12>
                </is>
              </cgas>
              <cael>
                <l>Title</l>
                <s>url7</s>
                <t>0</t>
              </cael>
            </is>
        </chrj>
      </is>
    </not>
  </is>
<menu> 
```

我不知道子节点的名称，只知道节点“菜单”的名称。我想得到一个值节点列表：如果他们的节点“t”= 1并且他的父节点“t”= 1，则为“s”

我想得到这个列表：

*   网址1
*   网址4
*   网址5
*   网址6

在 XML 示例中，我没有得到 url “url2”，因为他的节点“t” = 0 我没有得到 url “url3”，因为虽然他的节点“t” = 1，但他的父节点“hlua”有他的节点“t”= 0

我怎样才能用 LINQ 做到这一点？

谢谢！

我认为这解决了我的问题：

```
List<XElement> listurls = (from elements in xe.Descendants()
    //Elemento
    let t_element = elements.Element("t")
    let t_element_value = t_element != null ? t_element.Value : String.Empty

    //Elemento Padre
    let parent_element = elements.Parent.Parent
    let t_element_parent = parent_element.Element("t")
    let t_element_parent_value = t_element_parent != null ? t_element_parent.Value : "1"

    where t_element_value.EndsWith("1") && t_element_parent_value.EndsWith("1") && elements.Element("u").Value!="#" && elements.Element("u").Value != "" 
    select elements.Element("u")).ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:49:57.043

我得到它！！！解决方案：

```
List<string> listurls = (from a in xe.Descendants("s")
   let ancestros = a.Ancestors().Elements("t").FirstOrDefault(e => e.Value.EndsWith("0"))
   where ancestros == null
   select a.Value).ToList(); 
```

=D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:49:28.313

我不太确定为什么在预期结果中您希望看到 url1 - 没有祖先元素的子 t 元素的值等于“1”。无论如何，我想出了以下查询，您可能想看看：

```
var xDoc = XDocument.Parse(
@"<menu>
  <is>
    <not>
      <l>Title</l>
      <s>url1</s>
      <t>1</t>
      <is>
        <hlua>
          <l>Title</l>
          <s>url2</s>
          <t>0</t>
            <is>
              <frme>
                <l>Title</l>
                <s>url3</s>
                <t>1</t>
              </frme>
            </is>
        </hlua>
        <chrj>
          <l>Title</l>
          <s>url4</s>
          <t>1</t>
            <is>
              <cgas>
                <l>Title</l>
                <s>url5</s>
                <t>1</t>
                <is>
                  <el12>
                    <l>Title</l>
                    <s>url6</s>
                    <t>1</t>
                  </el12>
                </is>
              </cgas>
              <cael>
                <l>Title</l>
                <s>url7</s>
                <t>0</t>
              </cael>
            </is>
        </chrj>
      </is>
    </not>
  </is>
</menu>");

var urls = from url in xDoc.Descendants("s")
            let ancestorWithTChildElement = url.Parent.Ancestors().FirstOrDefault(e => e.Elements("t").Any())
            where (string)url.Parent.Element("t") == "1"
            && ancestorWithTChildElement != null && (string)ancestorWithTChildElement.Element("t") == "1"
            select url;

foreach (var urlElement in urls)
{
    Console.WriteLine((string)urlElement);
} 
```

结果是：

```
网址4
网址5
网址6
按任意键继续 。. .

```

（缺少 url1，因为根本没有子元素具有的祖先元素

# c# - 我如何使用 Eval() 作为带有 ListView 的 aspx 文件中的参数

> ID：10485012
> 
> 赞同：0
> 
> 时间：2012-05-07T15:43:53.593
> 
> 标签：c#, asp.net, listview

我有数据源控件和 listView 控件

数据源有

> "StudentID,StudentName ,生日,Gander(M,F),Course_ID"

我想在我的 listView 中显示

> （“年龄 -> 不是生日，甘德（男，女）-> 不是 f or' m，课程名称 -> 不是课程 ID :)）

我写了一些方法来做这样的工作

```
 public  string CalculateAge(DateTime birthDate)
      {
            // cache the current time
            DateTime now = DateTime.Today; // today is fine, don't need the timestamp from now
            // get the difference in years
            int years = now.Year - birthDate.Year;
            // subtract another year if we're before the
            // birth day in the current year
            if (now.Month < birthDate.Month || (now.Month == birthDate.Month && now.Day < birthDate.Day))
                 --years;

            return years.ToString(CultureInfo.InvariantCulture);
      } 
```

**`Eval()`但是我如何在我的 aspx 文件中使用这些方法`ListView`？注意：我在不同的命名空间中编写了这个方法**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:57:10.033

在`ListView`. 像这样的东西应该工作：

```
<%# CalculateAge((DateTime)Eval("SomeDate")) %> 
```

如果此函数包含在实现 的库中`IDisposable`，则可以在代码隐藏中创建传递函数：

```
public string CalculateAge(DateTime birthDate)
{
    using (var obj = new MyObject())
    {
        return obj.CalculateAge(birthDate);
    }
} 
```

# c# - 在自动化加载项中使用 Web 服务？

> ID：10485013
> 
> 赞同：2
> 
> 时间：2012-05-07T15:43:53.893
> 
> 标签：c#, service, automation, web, add-in

我已经用 c# 编写了一个 web 服务，现在我想创建一个自定义的 excel 方法来使用这个服务并将结果报告给 excel。问题是它总是返回#VALUE！excel中的错误。

那么，如何在自动化插件中使用 Web 服务？

# javascript - 动态创建嵌套 JSON 对象

> ID：10485014
> 
> 赞同：9
> 
> 时间：2012-05-07T15:43:54.220
> 
> 标签：javascript, jquery, asp.net-mvc-3

（上下文）我从一堆元素中获取信息，这些元素收集到一个 JSON 对象中，然后传递到 MVC3 控制器，在那里它被反序列化为一个对象。

有“项目”和“项目设置”。目前，我在平面 JSON 对象中同时拥有项目和项目设置。理想情况下，我希望将项目设置嵌套在每个项目下。我的代码目前如下所示：

```
 var editeditems=[];
...

        $("#SaveChanges").click(function() {

            //this works and retrieves all of the item IDs
            $(".portlet").each(function() {

                var itemname = $(this).data("itemname");
         editeditems.push(
                        {
                            "itemname": itemname
                        });

   itemname = $(this).data("itemname");

      $(".settingInput").each(function() {

          editeditems.push(
              {
              "settingkey":$(this).attr("name"),
              "settingvalue":$(this).attr("value")
              });

                });

 }); 
```

在 $(".settingInput").each 函数下是添加设置的地方。我试过像'editedItems.settings.push..'这样的语法，但它返回一个语法错误。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-07T15:49:26.183

```
var editeditems = [];
...

$('#SaveChanges').click(function() {
    $('.portlet').each(function() {
        var settings = [];
        $('.settingInput').each(function() {
            settings.push({
                settingkey: $(this).attr('name'),
                settingvalue: $(this).attr('value')
            });
        });

        editeditems.push({
            itemname: $(this).data('itemname'),
            settings: settings
        });
    });

    ...
}); 
```

将生成示例输出：

```
var editeditems = 
[
    {
        "itemname": "item1",
        "settings": [
            {
                "settingkey": "key1",
                "settingvalue": "value1"
            },
            {
                "settingkey": "key2",
                "settingvalue": "value2"
            }
        ]
    },
    {
        "itemname": "item2",
        "settings": [
            {
                "settingkey": "key1",
                "settingvalue": "value3"
            },
            {
                "settingkey": "key2",
                "settingvalue": "value4"
            }
        ]
    }
]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T15:48:45.677

```
var ei = {'settings': [3]};
ei.settings.push(4);
console.log(ei);
// This will output an object with property settings and value an array with values (3 and 4) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-23T13:59:20.743

您需要将平面数据数组 json 创建为：

```
[{"itemname": "item1","settingkey": "key1","settingvalue": "value1"},
 {"itemname": "item2","settingkey": "key2","settingvalue": "value2"},]; 
```

**比这样处理上述日期**

```
var keys = Object.keys(dataMap);

var json = [];
for (var key in keys) {
        var innerJson = {};
        innerJson["name"] = keys[key];
        var innerMap = dataMap[keys[key]];

        if (innerMap instanceof Array) {
            innerJson["size"] = innerMap[0];
        } else if (innerMap instanceof Object) {

            var child = processHirarchiachalData(innerMap);
            innerJson["children"] = child;
        }
        json.push(innerJson);

} 
```

# sql - 根据列选择有限数量的结果

> ID：10485017
> 
> 赞同：1
> 
> 时间：2012-05-07T15:44:00.513
> 
> 标签：sql, oracle, filter, unique, distinct

我试过检查这个问题[sql - distinct + select](https://stackoverflow.com/questions/1890034/select-distinct-select-top-to-merge-multiple-rows)并且似乎无法根据我的情况正确调整它。我也不在 sql 开发团队，所以我不知道数据库的所有进出。我在测试数据库上在黑暗中拍摄。这是我当前查询的伪样本：

```
select a.name, b.col1, 
from name a, amount b
where a.identifier=b.acctid
and b.col1 != 'test' 
```

查询当前返回的示例：

```
a.name | b.col1
Jeff     1
Jeff     333
Jeff     77
Jeff     1
Jeff     14
Bob      22
Bob      4
Bob      5
Bob      6 
```

而且我希望查询的结果返回基于 ColA 唯一的第一个 n（我选择的数字）结果。例如，如果 n 为 2：

```
a.name | b.col1
Jeff     1
Jeff     333
Bob      22
Bob      4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:02:08.447

对于 SQL Server 2005+，您可以使用分析函数：

```
DECLARE @n INT
SET @n = 2

;WITH CTE AS 
(   SELECT a.name, b.col1, b.col2, ROW_NUMBER() OVER(PARTITION BY ColA ORDER BY a.identifier) Corr
    FROM name a
    INNER JOIN amount b
    ON a.identifier = b.acctid
    WHERE b.col2 != 'test'
)
SELECT *
FROM CTE
WHERE Corr <= @n 
```

我还更改了您的查询以使用显式联接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:51:57.283

步骤1：

使用该信息创建一个临时表，并为每个 ColA 类型创建具有自动增量值的另一列。

第2步：

选择新列 < n 值的所有信息

# android - 自动从一张（大）图像生成所有可绘制尺寸

> ID：10485018
> 
> 赞同：1
> 
> 时间：2012-05-07T15:44:05.490
> 
> 标签：android, automation, drawable

我正在为一个 Android 项目投入一些时间来绘制可绘制对象，并且我正在寻找替代方案。

目前我在 Adob​​e Illustrator 上做这些，并且我可以使用[Android Asset Studio](http://android-ui-utils.googlecode.com)（例如用于操作菜单的 drawables）。Android Asset Studio 的问题是无法使用我自己的颜色（我们只能使用白色/黑色）。

我想要像 Android Asset Studio 这样的东西，我可以给他一个高清图像，他可以创建所有可绘制的尺寸。那可能吗？

另一种选择可能是一个程序/脚本，它可以让我说“我想缩放到这些分辨率”，他对所有图像都这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:42:46.383

What you're looking for is called a [batch resizer](https://www.google.com/search?q=batch%20resize%20images), but without knowing what you're working with, it's hard to give a recommendation. For instance, you can use both Photoshop and Gimp for it. I believe Gimp will require a plugin, while Photoshop has the script built-in.

# macos - 用于获取 DMG 的首选块大小的 API

> ID：10485019
> 
> 赞同：0
> 
> 时间：2012-05-07T15:44:13.520
> 
> 标签：macos, cocoa, unix, filesystems

如果我在我的 Mac 上安装 DMG，然后使用 IORegistryExplorer，我可以看到首选块大小为 0x200。

我可以使用什么 API 来获取相同的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:12:30.543

您可以使用[该`FSGetVolumeInfo`函数](https://developer.apple.com/library/mac/documentation/Carbon/Reference/File_Manager/Reference/reference.html#//apple_ref/c/func/FSGetVolumeInfo)来请求任何已安装卷[的分配块信息](https://developer.apple.com/library/mac/documentation/Carbon/Reference/File_Manager/Reference/reference.html#//apple_ref/c/econst/kFSVolInfoBlocks)。包括的三个字段之一是块大小。

# php - 用php将大端IP地址转换为4字节二进制

> ID：10485020
> 
> 赞同：1
> 
> 时间：2012-05-07T15:44:14.810
> 
> 标签：php, bittorrent, endianness, tracker

我正在寻找创建一个私人种子跟踪器，但我遇到了一个问题。我在协议规范中发现，现在大多数客户端使用的紧凑响应以二进制 4 字节表示大端的 IP 地址，2 表示端口。我试图这样做，但不确定我应该输入什么格式的 IP

我尝试了以下

```
$IP = "12.34.56.78";
$port = "12345";

$binary = pack("Nn", $IP, $port); 
```

但是当我尝试使用 unpack("Nn" $binary) 将其转换回来时，在此示例中，我只是返回了 IP 地址的第一部分，它将是“12”，我尝试使用我得到的 torrent 客户端尝试此操作“内部服务器错误”

我也尝试过 ip2long 并且当我反转我得到长 ip 但是当我不确定这是否是正确的格式或什么时，我只知道它正在寻找 6 位的 ip 和端口。

任何关于我哪里出错的建议将不胜感激

贵宾32

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:54:00.573

尝试这个：

包装：

```
$ip = "12.34.56.78";
$port = 12345;

$packed = pack("Nn", ip2long($ip), $port); 
```

开箱：

```
$unpacked = unpack("Nip/nport", $packed);

echo "IP was ".long2ip($unpacked["ip"])."\n";
echo "Port was ".$unpacked["port"]."\n"; 
```

输出：

```
IP was 12.34.56.78
Port was 12345 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:52:40.773

要转换为二进制，您首先需要将其从人类可读的点分十进制表示法转换为计算机可读的符号 -`pack()`不理解`.`字符串中的点。您可以将地址拆分为其组成部分，并将它们视为无符号字符 ( `c`)：

```
<?php

  $IP = "12.34.56.78";
  $port = "12345";

  $octets = explode('.', $IP);

  $binary = pack('ccccn', $octets[0], $octets[1], $octets[2], $octets[3], $port); 
```

要转换回来，它会稍微复杂一些。调用时需要使用中继器并命名组件`unpack()`：

```
<?php

  $unpacked = unpack('c4octet/nport', $binary);

  $IP = $unpacked['octet1'].".".$unpacked['octet2'].".".$unpacked['octet3'].".".$unpacked['octet4'];
  $port = $unpacked['port']; 
```

# android - FragmentStatePageAdapter 重复 ActionBar 菜单项

> ID：10485028
> 
> 赞同：10
> 
> 时间：2012-05-07T15:45:06.223
> 
> 标签：android, android-fragments, android-viewpager

我对 FragmentStatePageAdapter（我用作 ViewPager 的适配器）和操作栏中的菜单项有疑问。

当我启动应用程序时，一切都很好。如果我将任务移到后台（例如，按 HOME 按钮）并开始做一些事情直到活动结束，那么当我回到我的应用程序（通过启动器或我创建的通知）时，一切都很好，除了有操作栏中的重复菜单项。

一个重要的细节是，唯一重复的项目是在我在 ViewPager 中使用的每个片段的 onCreateOptionsMenu() 中创建的项目。

如果我用 FragmentPageAdapter 替换FragmentStatePageAdapter，则项目不再重复，但片段不会显示在 ViewPager 中（永远不会调用适配器的 getItem() 函数，因此它不会返回任何片段）。

有任何想法吗？一种避免 FragmentStatePageAdapter 重复菜单项的方法？也许使用 FragmentPageAdapter 但进行修改以显示片段？我的片段中的修改？

这是我的应用程序中的一些代码片段...

**如何在片段中创建菜单项：**

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    /* Create play button */
    final MenuItem mPlay = menu.add(R.string.play_all);

    mPlay.setIcon(R.drawable.ic_play_all);
    mPlay.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

    mPlay.setOnMenuItemClickListener(new OnMenuItemClickListener() {
        @Override
        public boolean onMenuItemClick(MenuItem item) {
            final List<Song> songs = getSongs();

            if (songs.size() == 0) {
                /* Show message */
                Toast.makeText(mContext, R.string.no_song_list, Toast.LENGTH_LONG).show();
            } else {
                /* Play song list */
                try { PlayManager.getService().playList(songs); } catch (Exception e) {}
            }

            return false;
        }
    });

    /* Create menu */
    super.onCreateOptionsMenu(menu, inflater);
} 
```

**如何在 ViewPager 适配器中实例化片段**

```
@Override
public Fragment getItem(int position) {
    final Class<?> cls = mTabs.get(position);

    /* No tab */
    if (cls == null)
        return null;

    /* Instantiate fragment */
    final Fragment fragment = Fragment.instantiate(mContext, cls.getName(), null);

    /* Add to list */
    mFragments.put(position, fragment);

    /* Return fragment */
    return fragment;
} 
```

谢谢！

PS：我尝试将活动的launchMode更改为“singleTop”，并且我还尝试在getItem（）中返回先前创建的片段（但这没用，因为当我返回应用程序时永远不会调用getItem（），正如我所说前）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T20:56:34.387

发布问题几天后，我找到了解决问题的方法。很抱歉这么晚才把它放在这里。

以下代码解决了我的问题：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);

    outState.remove("android:support:fragments");
} 
```

就像在我实例化和使用片段的活动中编写那段代码一样简单。

我希望这有帮助 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-16T13:39:33.737

在对 ViewPager 中的 Fragment 中的选项菜单进行扩展之前，请检查 Fragment 实例是否可见以防止重复的菜单项：

```
// This should be in your Fragment implementation
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
{
    if(isVisible())
    {
        inflater.inflate(R.menu.menu_fragment, menu);
    }
    super.onCreateOptionsMenu(menu, inflater);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T15:49:03.323

我认为问题在于每次滑动时 FragmentStatePagerAdapter 都会创建一个新的 Fragment。因此，为每个创建的 Fragment 调用 onCreateOptionsMenu()。

我认为有两种解决方案：

1.  从片段中取出操作栏操作。您无需为 Fragment 内的菜单项设置 onclick，而是从 Activity 向当前 Fragment 发送消息。

2.  使用 Menu.findItem() 查看另一个 Fragment 是否已经添加了您想要的 MenuItem，如果是，则将当前 Fragment 附加到它（在 onPrepareOptionsMenu() 中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-27T05:43:35.280

我找到了一些解决方案尝试它可能有效

在您的重复菜单片段中添加`menu.clear()` 之前的膨胀菜单文件`onCreateOptionsMenu(Menu menu, MenuInflater inflater)`

```
@Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        super.onCreateOptionsMenu(menu, inflater);
        menu.clear();
        inflater.inflate(R.menu.main,menu);
    } 
```

# android - 如何提高 ADB 安装速度？

> ID：10485029
> 
> 赞同：5
> 
> 时间：2012-05-07T15:45:13.563
> 
> 标签：android, adb

我正在尝试通过 Wifi 在物理设备上安装应用程序，这需要很长时间。我的平均安装速度是 85KB/s，慢得不合理。有没有办法提高安装速度？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-07T16:08:29.630

安装速度可能会受到您设备对文件系统的写入速度的限制。通过 USB 有多快？

# tinymce - 如何更改tinymce中的子弹颜色

> ID：10485031
> 
> 赞同：2
> 
> 时间：2012-05-07T15:45:16.233
> 
> 标签：tinymce

我`tinymce`在我的网站上使用插件

当我更改文本颜色时，项目符号颜色保持黑色。我还尝试编辑 html 代码并将颜色放入此代码行

```
 <ul style="list-style-type: disc;">
<li style="list-style-type: none;">
<ul style="list-style-type: disc; color: #da000c;">
<li style="list-style-type: circle; list-style-position: outside;">
<span style="font-style: normal; list-style-type: circle;
 list-style-position: outside;
 color: #ff0000;">
<span class="example1">Blood</span><span class="example1"> cannot be manufactured.
 It can only come as a gift from people.</span></span></li> 
```

任何人请告诉我如何更改tinymce中的子弹颜色..提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:09:39.807

当我将其输入tinymce时，我看到一个黑色的盒子，里面有一个红色的列表项，里面*有一个红色的子弹*。：

```
<div style="background-color: black;">
  <ul>
    <li style="color: red;">aaaaa</li>
    <li>ccccc</li>
  </ul>
</div> 
```

Chrome 18.0/Mac 就是这样。你使用的是什么浏览器？在 Chrome 上试试上面的方法，让我知道你发现了什么。

# c# - 使用 c# 在 Windows 8 中的段落缩进

> ID：10485035
> 
> 赞同：0
> 
> 时间：2012-05-07T15:45:29.813
> 
> 标签：c#, windows-8, paragraph

在 Windows 8 下，我如何以编程方式在 C# 中实现这一点：

![在此处输入图像描述](../Images/0c7a151cbb498a06f08029676ac6c09f.png)

# c# - 查找和更新 WPF 文本框的绑定属性（来自文本框）

> ID：10485036
> 
> 赞同：0
> 
> 时间：2012-05-07T15:45:32.327
> 
> 标签：c#, wpf

假设我有一个这样的文本框：

```
 <TextBox Text="{Binding MyBoundProperty, Mode=TwoWay"/> 
```

有没有一种简单的方法可以在后面的代码中找到并设置“MyBoundProperty”？

我正在处理 TextBox 的自定义附加属性（捕获 OnTextBoxKeyUp 事件），并希望在某些情况下（发生扫描时）直接设置该属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:55:30.300

如果是双向绑定，更改 TextBox 的 Text 属性应该会更新源。

# javascript - 使用 require.js 的简单示例

> ID：10485039
> 
> 赞同：23
> 
> 时间：2012-05-07T15:45:48.330
> 
> 标签：javascript, requirejs

我正在尝试学习如何使用 require.js。所以我在正文中制作了一个带有以下标签的 HTML 页面。

```
<script type="text/javascript" data-main="../js/shirt" src="../js/require.js"></script>
<script type="text/javascript">
    alert("Shirt color is " + shirt.color);
</script> 
```

../js/shirt.js 有以下代码

```
define({
    color: "black",
    size : "large"
}); 
```

如何在我的 html 中使用这个简单的值对？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-08T16:07:11.433

除了 Domenic 的回答之外，您可能更喜欢这种使用 define 函数而不在模块内使用 require 函数的方式。

```
// shirt.js
define({
    color: "black",
    size : "large"
});

// logger.js
define(["shirt"], function (shirt) {
    return {
        logTheShirt: function () {
            console.log("color: " + shirt.color + ", size: " + shirt.size);
        }
    };
});

// main.js
define(["shirt", "logger"],function (shirt, logger) {    
    alert("Shirt color is: " + shirt.color);
    logger.logTheShirt();
}); 
```

I prefer this way, but it's only a matter of taste I guess. (I'm assuming that all the scripts are on the same folder.)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-07T15:57:55.873

除了 Joseph 的回答之外，您还可以编写其他依赖的模块`shirt`（这就是 RequireJS 真正强大的地方）。

```
// shirt.js
define({
    color: "black",
    size : "large"
});

// logger.js
define(function (require) {
    var shirt = require("./shirt");

    return {
        logTheShirt: function () {
            console.log("color: " + shirt.color + ", size: " + shirt.size);
        }
    };
});

// main.js
define(function (require) {
    var shirt = require("./shirt");
    var logger = require("./logger");

    alert("Shirt color is: " + shirt.color);
    logger.logTheShirt();
}); 
```

那么你的 HTML 就可以

```
<script data-main="../js/main" src="../js/require.js"></script> 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-07T15:52:25.097

主文件的内容[应该是一个 require 调用](http://requirejs.org/docs/jquery.html#setup)。例如，您有一个 values.js 模块，其中包含：

```
define({
    color: "black",
    size : "large"
}); 
```

在您的主文件 (shirt.js) 中，将 values.js 作为依赖项加载（假设它们位于同一目录中）：

```
require(['values'],function(values){
    //values.color
    //values.size
}); 
```

# ruby-on-rails-3 - 将哈希拆分为多个无序列表

> ID：10485044
> 
> 赞同：1
> 
> 时间：2012-05-07T15:46:12.933
> 
> 标签：ruby-on-rails-3, views, html-lists, grouping, blueprint-css

我一直在徒劳地寻找以更干净的方式完成以下任务。

我有一个从控制器调用的字符串哈希：

```
@categories = Category.find 
```

我试图在三个单独的无序列表（ul）中显示结果。

以下是我想要完成的丑陋版本：

```
<div class="span-7">
    <ul>
    <% @categories.first(4).each do |category| %>

        <li><%= category.name %></li>

    <% end %>
    </ul>       
</div>

<div class="span-7">
    <ul>
    <% @categories[5..8].each do |category| %>

        <li><%= category.name %></li>

    <% end %>
    </ul>       
</div>

<div class="span-8 last">
    <ul>
    <% @categories[9..12].each do |category| %>

        <li><%= category.name %></li>

    <% end %>
    </ul>       
</div> 
```

（注意：我使用的是 BlueprintCSS，因此多余的“span-x”）

我认为使用分组（http://rails.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Array/Grouping.html）有一种更简洁的方法，但我不知道如何将所有这些联系在一起。

如果有人能指出我正确的方向，我将不胜感激。谢谢你。

（我使用的是 Rails 3.0.11）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:57:07.997

你在正确的轨道上。这应该做你想要的。

```
<% category_count = 0 %>
<% @categories.in_groups_of(4) do |group| %>
  <% category_count += group.size %>
  <div class="<%= category_count == @categories.size ? "span-8 last" : "span-7" %>">
    <ul>
    <% group.each do |category| %>
      <% if category %>
      <li><%= category.name %></li>
      <% end %>
    <% end %>
    </ul>       
  </div>
<% end %> 
```

# log4j - Log4j 多模式布局

> ID：10485047
> 
> 赞同：0
> 
> 时间：2012-05-07T15:46:26.540
> 
> 标签：log4j, pattern-layout

我对 log4j 很陌生。我想显示带有这些信息的日志消息：日志时间戳、优先级、完全限定的类名、消息、类名。我尝试显示两次 CATEGORY，一次使用 ConversionPattern，一次使用其他 ConversionPattern。这是我的 log4j.properties 的一部分：

```
log4j.appender.JDBC2.layoutPartsDelimiter=#-#    
log4j.appender.B1.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n #-#%-4r [%t] %-5p %c{1} %x %m%n 
```

可悲的是它不起作用。如何仅在同一日志消息中显示完全限定的类名和类名？TIA。

弗朗切斯科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:40:47.447

1.  log4j.appender.B1.layout.ConversionPattern 是这里的一个键，您只能将它与一个值关联。所以，如果你这样写：

    ```
     Log4j.appender.B1.layout.ConversionPattern=%some%value%here
    Log4j.appender.B1.layout.ConversionPattern=%another%value%here 
    ```

    后面的值会覆盖前面的值
2.  您可以定义两个不同的附加程序并将它们与您想要的记录器相关联（以 rootLogger 为例）：

    ```
     log4j.rootLogger=debug,console,console2

    log4j.appender.console=org.apache.log4j.ConsoleAppender
    log4j.appender.console.target=System.err
    log4j.appender.console.layout=org.apache.log4j.PatternLayout
    log4j.appender.console.layout.ConversionPattern= %p %C (%F:%M(%L)) -
    %m%n

    log4j.appender.console2=org.apache.log4j.ConsoleAppender
    log4j.appender.console2.target=System.err
    log4j.appender.console2.layout=org.apache.log4j.PatternLayout
    log4j.appender.console2.layout.ConversionPattern= %p %c{1}
    (%F:%M(%L)) - %m%n 
    ```

    注意：两个附加程序之间的唯一区别是附加程序的名称和 ConversionPattern 属性。

3.  更详细的 log4j 讨论可以找到[log4j 的简短介绍](http://logging.apache.org/log4j/1.2/manual.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:01:46.420

这是我的错误。正如您在我之前的帖子中看到的那样，Delimiter 和 PatternLayout 指的是不同的附加程序。我改变

```
log4j.appender.JDBC2.layoutPartsDelimiter=#-#    
log4j.appender.B1.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n #-#%-4r [%t] %-5p %c{1} %x %m%n 
```

进入这个：

```
log4j.appender.B1.layoutPartsDelimiter=#-#    
log4j.appender.B1.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n #-#%-4r [%t] %-5p %c{1} %x %m%n 
```

一切正常，当我使用 @LAYOUT:1@ 时，我得到了第一个 ConversionPattern（分隔符 #-# 的左侧）。当我使用@LAYOUT:2@ 时，我得到了第二个模式。谢谢你。

弗朗切斯科

# php - 浏览记录集的详细信息页面

> ID：10485048
> 
> 赞同：2
> 
> 时间：2012-05-07T15:46:27.447
> 
> 标签：php, mysql, jquery

我的网站允许访问者搜索房屋（使用 PHP 和 MySql）。搜索后，他们会看到一个匹配列表，他们可以单击该列表以查看该房屋的详细信息页面。要查看下一个房屋，他们目前必须单击返回，然后在他们想要查看的搜索结果列表中单击下一个房屋。

我想做到这一点，一旦他们点击了一个主页查看详细信息，他们将有一个“下一个主页”和“上一个主页”链接/按钮用于导航结果集，而无需返回搜索结果页面。

我已经看到这样做了，但无法理解如何做到这一点。我假设您必须将初始搜索中的记录集保存在某处，然后在详细信息页面上调用它。而且您必须知道您正在查看 Y 个房屋中的第 x 个房屋。

谁能给我一个关于这将如何工作的广泛概述？我是否将初始搜索结果保存在临时 MySQL 表中并将该表名传递到详细信息页面？或者使用会话变量来保存结果集？请记住，访问者可以在会话期间进行多次不同的搜索。

任何帮助将不胜感激，汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:03:00.430

完成此操作后，我将当前搜索的详细信息保存在 SESSION 中，然后在需要时重新查询数据库 - 因此您可以在详细信息页面上查询它以生成下一个和上一个链接，并且很快。我通常使用一个名为“parameters”的 SESSION 变量，并将整个 SQL WHERE 语句添加到其中。

如果有人进行多次搜索，这将让他们一次进行一次搜索 - 后续搜索将覆盖已经存在的内容。如果您的用户将使用不同的参数同时进行多个搜索，您需要找到一种方法来区分每个搜索的参数。您可以通过在每个集合前加上对 的调用来为每个集合指定一个唯一名称`uniqid`，然后您需要确保将唯一标识符传递给详细信息页面，以便它可以计算出它需要运行哪组参数。

# javascript - 检测一个对象是否跨越画布中的另一个对象

> ID：10485050
> 
> 赞同：1
> 
> 时间：2012-05-07T15:46:34.180
> 
> 标签：javascript, html, canvas, 2d, paperjs

例如，我想检测一个画布对象是否穿过另一个画布对象

例如我有 2 个圆圈在移动

我正在使用 paper.js 库

```
 c1 = new Path.Circle([20, 20], 20);
    c1.fillColor = 'red';

    c2 = c1.clone();
    c2.position += 500;
    c2.fillColor = 'green';

    c = 0;

    function onFrame(event){
        c += 0.1;
        c1.position += c;
        c2.position -= c;
    } 
```

我想检测c1何时击中c2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:54:09.450

在您的`onFrame`方法中，您想检查圆心之间的距离是否小于半径的两倍。如果是真的，那么你有一个碰撞。

# r - R：根据出现在某些列中的一组感兴趣的值从数据框中选择行

> ID：10485053
> 
> 赞同：5
> 
> 时间：2012-05-07T15:46:55.697
> 
> 标签：r, rows, apply

我有大量的就诊记录数据框。我只想选择在我感兴趣的一组指定诊断代码中至少找到列出的 11 个诊断代码中的一个的行。

数据框为 18 列 x 39,019 行。我对 6:16 栏中的诊断代码感兴趣。以下是这 11 个诊断列的数据样本（用于保护可识别信息）：

```
diag1 diag2 diag3 diag4 diag5 diag6 diag7 diag8 diag9 diag10 diag11
786   272   401   782    250  91912  530    NA    NA    NA     NA   
845   530   338   311    NA    NA    NA     NA    NA    NA     NA 
```

这是我尝试使用的代码：

```
mydiag <- c(401, 410, 411, 413, 415:417, 420:429, 434, 435, 444, 445, 451, 460:466, 480:486, 490:493, 496, 786)
y = apply(dt[,paste("diag", 1:11, sep="")], 1, function(x) sum((any(x !=NA %in% mydiag))))
y = as.data.frame(y) 
```

如您所见，在我提供的 2 个示例行中，我想保留第一行但丢弃第二行，因为它没有我想要的任何代码。我提供的代码示例不起作用——我得到了一个包含 39,019 个“1”值的向量。所以我猜apply语句被解读为某种逻辑，但我知道并非所有行都有感兴趣的代码，所以在这种情况下我会期望1和0。

有没有更好的方法来完成这个行选择任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T16:00:44.033

我认为你`!=NA`在那里的位使事情过于复杂。由于 NA 中没有出现`mydiag`，因此您可以完全删除它。因此，您的 apply 语句可以变为：

```
goodRows <- apply(dat, 1, function(x) any(x %in% mydiag))
dat[goodRows,]
#---------------
  diag1 diag2 diag3 diag4 diag5 diag6 diag7 diag8 diag9 diag10 diag11
1   786   272   401   782   250 91912   530    NA    NA     NA     NA 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:59:09.860

问题来自您的功能`function(x) sum((any(x !=NA %in% mydiag)))`

`x != NA`可以更好地构造使用`!is.na(x)`，但您必须认识到这会返回一个逻辑向量。因此，您正在获取逻辑向量的结果，然后检查结果是否在 mydiag.xml 中。我猜您只是想获取不是 na 的值并检查其中是否有任何值在 mydiag 中。

```
x[!is.na(x)] %in% mydiag 
```

会为此工作得更好。但是您实际上甚至不需要检查 NA，因为 NA 不在您的向量中，因此 x 中的任何元素 NA 将返回 false`x %in% mydiag`

```
function(x){any(x %in% mydiag)} 
```

是一种获得逻辑值的好方法，可以告诉您该行是否符合您的条件。

```
# Get the row numbers of the rows you want
id = apply(dt[,paste("diag", 1:11, sep="")], 1, function(x){any(x %in% mydiag)})
# Just grab those rows
y <- dt[id, ] 
```

# magento - 如何在购物车中获取捆绑产品的原始 SKU？

> ID：10485054
> 
> 赞同：1
> 
> 时间：2012-05-07T15:46:59.507
> 
> 标签：magento

我需要能够在结帐期间获取捆绑商品的父 ID 以进行跟踪。如果客户通过分组商品购买了简单商品，我可以从 $item->getOptionByCode('info_buyRequest') 获取分组的 SKU。有没有办法以类似的方式获取购买的简单商品的捆绑 SKU？info_buyRequest 似乎没有捆绑商品的此信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:40:19.627

看看[Magento：将简单产品从捆绑中添加到购物车中的单独行](https://stackoverflow.com/questions/9915427/magento-adding-simple-products-from-a-bundle-to-separate-lines-in-the-cart/9916078#9916078)

它解释了其中的一部分。

您还可以使用：

```
$oParentproduct = Mage::getModel('catalog/product')->load($oProductItemID)->getParentId();
$vSku = $oParentproduct-.getSku(); 
```

在一个项目的某处找到以下代码：

```
$aBundleItems = $oOrder->getItemsCollection(array('bundle'),false);  //return only bundles
foreach($aBundleItems as $oItem):
    $oParentproduct = $oItem->getParentItem()):
endforeach; 
```

hth。

# android - 如何执行mountAndroid？

> ID：10485056
> 
> 赞同：0
> 
> 时间：2012-05-07T15:47:08.033
> 
> 标签：android, macos

我是 mac 新手，我一直在尝试建立一个 Android 构建环境。根据 android 开发者网站，我在**~/位置创建了****bashrc_profile**文件，因为它不存在。在文件中输入此代码。

 **```
function mountAndroid { hdiutil attach ~/android.dmg -mountpoint /Volumes/android; } 
```

在下一步中，它被告知我可以执行 mountAndroid。我该怎么做呢 ？我从哪里调用这个函数或执行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:02:43.840

好吧..我只需要重新启动机器，我就可以在命令提示符本身中运行该功能。就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-20T15:03:34.597

只需`mountAndroid`从内部调用`bash_profile`以执行 hdiutil attach 命令，android 将被挂载到`/Volumes`. 这将安装在您打开的每个新终端上。例子：

```
function mountAndroid { hdiutil attach ~/android.dmg -mountpoint /Volumes/android; }
mountAndroid 
```**

# javascript - NodeJS 套接字数据拆分

> ID：10485060
> 
> 赞同：3
> 
> 时间：2012-05-07T15:47:20.610
> 
> 标签：javascript, node.js, sockets

当我需要拆分数据时，我必须将其转换为字符串。
这是我的数据处理函数：

```
 socket.on('data', function (data) {
    var str = data.toString().split("|");
    switch(str[0]){
        case "setUser":
        setUser(str[1], socket);
        break;
        case "joinChannel":
        joinChannel(str[1], socket);
        break;
    }

  }); 
```

当我从 AS3 客户端发送诸如“setUser|Name”和“joinChannel|main”之类的数据时。NodeJS 将其作为一个数据包读取。
我的问题是如何将其作为两个不同的数据包？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:56:50.010

通常，您会将所有数据缓冲在一起，然后将其解析为一个字符串。或者，如果您需要在它进入时对其进行拆分，那么您将在`data`回调中进行拆分，并跟踪任何剩余的部分命令以添加到收到的网络块上。

```
var data = '';
socket.setEncoding('utf8');
socket.on('data', function(chunk) {
  data += chunk;
});
socket.on('end', function() {

  var lines = data.split('\n');
  lines.forEach(function(line) {
    var parts = line.split('|');
    switch (parts[0]) {
      case 'setUser':
        setUser(str[1], socket);
        break;
      case 'joinChannel':
        joinChannel(str[1], socket);
        break;
    }
  });
}); 
```

# html - html中的文本缩进变形img

> ID：10485066
> 
> 赞同：0
> 
> 时间：2012-05-07T15:47:39.680
> 
> 标签：html, css, text-indent

我的博客文章有一条规则：

```
p + p {
text-indent: 1.5em;
} 
```

在 div 中定义：

```
.entry-content{
    padding: 2em 3em 4em;
} 
```

我在`<p>`定义中有一些图片，如下所示：

```
p > img {
    margin-bottom: 0.5em; 
    max-width: 96%; 
    height: auto;
    text-indent: 0em;
} 
```

发生的事情是：首先调整图像的大小在应用缩进之前发生，所以图片的右边距超出定义的填充（3em）缩进的大小（1.5em），不应该缩进后调整图像大小？

然后即使`text-indent: 0em;`图像仍然遵循 p+p 的规则并有缩进。

我解决了将最大宽度设置为 96% 而不是 100% 的问题，但是没有更合乎逻辑的方法来解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:19:00.630

图像的`max-width`宽度由`p`包含图像的宽度决定。`text-indent`不会改变 的宽度`p`，但会移入文本/图像，这将导致图像悬垂。最重要的是，您看到的是正确的行为。

您需要修改您的 html/css 以获得所需的结果。如果没有更完整的示例，我无法提供替代方法。您可以尝试`position: absolute`图像，这将导致图像转到左上角（忽略`text-indent`和`padding`）。如果您尝试此操作，请不要忘记设置`position: relative`包含`p`.

```
p + p {
    text-indent: 1.5em;
    position: relative;
}

p > img {
    margin-bottom: 0.5em; 
    max-width: 96%; 
    height: auto;
    position: absolute;
    top: 0;
    left: 0;
} 
```

# amazon-ec2 - 在 Amazon Beanstalk 上扩展 Actor 应用程序

> ID：10485068
> 
> 赞同：2
> 
> 时间：2012-05-07T15:47:52.680
> 
> 标签：amazon-ec2, actor, akka

Beanstalk 做了自动缩放应用程序会做的典型事情：等待需求（以 Web 请求的形式）达到峰值，然后根据注册的 AMI 为集群生成新的从属。

我的问题是，如果我有一个基于actor的系统，我可以手动触发网格的扩展吗？还是我必须通过 AWS 可以识别的某种 http 管道将请求路由到我的代理？

似乎 AWS 上的其他解决方案（例如**Hadoop**）允许显式控制。此外，AWS 之上的其他解决方案（例如**Heroku**）也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-18T00:42:58.210

这是一个老问题，但我认为答案可能对后来的人有用。这看起来像是 AWS Autoscaling 的一个案例。请参阅[http://aws.amazon.com/documentation/autoscaling/](http://aws.amazon.com/documentation/autoscaling/)。

# php - PHP/mysql，使用外键从另一个表中获取数据

> ID：10485074
> 
> 赞同：3
> 
> 时间：2012-05-07T15:48:27.617
> 
> 标签：php, mysql

我有两张桌子，一张叫`posts`，一张叫`users`。在里面`posts`我有几列，一列是`userid`. 在我的`users`表中，我有几列，包括 a`userid`和 a `username`。我想使用`posts.userid`来查找`users.userid`和显示`users.username`。目前我正在使用：

```
SELECT posts.postid, posts.title, posts.text, posts.link, posts.good, posts.bad, posts.userid
FROM posts 
```

要获取有关每个帖子的数据，并且，

```
SELECT users.username, users.userid, posts.userid
FROM users, posts
WHERE users.userid = posts.userid 
```

获取有关每个用户的数据，但是当我这样做时，输出`echo $row_therealuserid['username'];`始终只是第一个用户。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T15:53:22.203

您需要使用[数组来获取其他行](http://php.net/manual/en/function.mysql-fetch-array.php)，然后遍历该数组。

```
$query = 'SELECT users.username, users.userid, posts.userid
FROM users, posts
WHERE users.userid = posts.userid';

$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)){
    echo $row['username'];
    echo "<br />";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:33:33.387

对于 SELECT 和其他返回结果集的语句，mysql_query() 成功时返回**资源**，错误时返回 FALSE。

**资源**是一个特殊的变量，持有对外部资源的引用。资源是由特殊的函数创建和使用的，它可以有多种不同的函数创建和使用的类型。

对于 mysql_query()，返回的资源类型是“ *mysql result* ”，它将被 mysql_fetch_array() 使用；

我会给你另一个例子，对于函数 mysql_connect() 它返回一个资源类型“ *mysql link* ”，它可以被函数 mysql_query() 使用

# jquery - 具有多个句柄和背景颜色的内容滑块

> ID：10485075
> 
> 赞同：3
> 
> 时间：2012-05-07T15:48:29.093
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

我正在尝试使用可以有多个句柄的 Jquery UI 滑块：

```
$(function () {
        var handlers = [25, 50, 75];
        $("#slider").slider({
            min: 0,
            max: 100,
            values: handlers,
            slide: function (evt, ui) {
                for (var i = 0, l = ui.values.length; i < l; i++) {
                    if (i !== l - 1 && ui.values[i] > ui.values[i + 1]) {
                        return false;
                    }
                    else if (i === 0 && ui.values[i] < ui.values[i - 1]) {
                        return false;
                    }
                }
            }
        });
    }); 
```

请注意，一个处理程序不能重叠，我需要在加载时动态设置处理程序，并在更改时保存处理程序位置。

我想要完成的事情是将处理程序之间的 ui 内容着色为不同的颜色。我附上了一张图片。

![滑块](../Images/5f4b0a426a1113f070f507ca8d6d19f4.png)

如果可能，请告知。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T16:37:00.253

一种可能性是将滑块背景设置为 CSS 渐变，并在滑块值更改时更新代码中的渐变停止点：

```
$(function () {
    // the code belows assume the colors array is exactly one element bigger 
    // than the handlers array.
    var handlers = [25, 50, 75];
    var colors = ["#ff0000", "#00ff00", "#0000ff", "#00ffff"];
    updateColors(handlers);

    $("#slider").slider({
        min: 0,
        max: 100,
        values: handlers,
        slide: function (evt, ui) {
            updateColors(ui.values);
        }
    });

    function updateColors(values) {
        var colorstops = colors[0] + ", "; // start left with the first color
            for (var i=0; i< values.length; i++) {
                colorstops += colors[i] + " " + values[i] + "%,";
                colorstops += colors[i+1] + " " + values[i] + "%,";
            }
            // end with the last color to the right
            colorstops += colors[colors.length-1];

            /* Safari 5.1, Chrome 10+ */
            var css = '-webkit-linear-gradient(left,' + colorstops + ')';
            $('#slider').css('background-image', css);
    }
});​ 
```

[http://jsfiddle.net/LLfWd/60/](http://jsfiddle.net/LLfWd/60/)

此代码适用于 chrome 和 safari。我的猜测是你只需要生成多个渐变字符串（用于 -moz-linear-gradient、-ms-linear-gradient 等），就像我在这里为 -webkit-linear-gradient 所做的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T10:08:30.043

（⌐■_■）你好，我下面附加的代码实现了（i）3个JQuery UI Slider句柄，这意味着4个范围，（ii）范围值不冲突，（iii）范围着色，（iv）标题工具提示处理和 (v) 范围值的显示。请注意，我使用的是旧的 JQuery 版本。此外，它有一个模式，这意味着它很可能被重新编码以优雅地支持 >=4 句柄。

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Test Slider</title>

    <link type="text/css" href="css/jquery-ui-1.7.2.custom.css" rel="stylesheet" />
    <script src="js/jquery-1.3.2.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui-1.7.2.custom.min.js" type="text/javascript"></script>
</head>

<body>
    <style>
    div.demo { padding: 10px !important; };
    </style>
    <div class="demo">

        <p>
            <label>% Style:</label>
            <input type="text" id="weightage_style" style="border:0; color:#f6931f; font-weight:bold;" />
            <br />
            <label>% Design:</label>
            <input type="text" id="weightage_design" style="border:0; color:#f6931f; font-weight:bold;" />
            <br />
            <label>% Correctness:</label>
            <input type="text" id="weightage_correctness" style="border:0; color:#f6931f; font-weight:bold;" />
            <br />
            <label>% Others:</label>
            <input type="text" id="weightage_others" style="border:0; color:#f6931f; font-weight:bold;" />
            <br />
        </p>

        <div id="weightage_slider" style="font-size:12px;width:300px;"></div>

    </div>

    <script>
        $( "#weightage_slider" ).slider({ 
            min: 0,
            max: 100,
            orientation: "horizontal", 
            step: 1, 
            values: [ 10, 40, 90 ], // set three handles
            slide: function( event, ui ) {
                // NOTE: during slide, the following sequence occurs: (i) change ui.value (ii) call this function (iii) move the slider handle

                // these four lines update the display of handle ranges
                $( "#weightage_style" ).val( "0" + " - " + $( "#weightage_slider" ).slider('values', 0) );
                $( "#weightage_design" ).val( $( "#weightage_slider" ).slider('values', 0) + " - " + $( "#weightage_slider" ).slider('values', 1) );
                $( "#weightage_correctness" ).val( $( "#weightage_slider" ).slider('values', 1) + " - " + $( "#weightage_slider" ).slider('values', 2) );
                $( "#weightage_others" ).val( $( "#weightage_slider" ).slider('values', 2) + " - " + "100" );

                if ( ui.handle == $( "#weightage_slider_0" ).get(0) ) {
                    if(ui.values[ 0 ] >= ui.values[ 1 ]){
                        $( "#weightage_slider" ).slider('values', 0, ui.values[ 1 ]); // triggers change event
                        return false;
                    } else {
                        // handle-0 will move
                        // update display of colored handle ranges
                        $( "#weightage_slider_a" ).css('left', '0%');
                        $( "#weightage_slider_a" ).css('width', (ui.values[ 0 ] + '%'));
                        $( "#weightage_slider_b" ).css('left', (ui.values[ 0 ] + '%'));
                        $( "#weightage_slider_b" ).css('width', ((ui.values[1] - ui.values[0]) + '%'));
                    }
                }

                if ( ui.handle == $( "#weightage_slider_1" ).get(0) ) {
                    if(ui.values[ 1 ] <= ui.values[ 0 ]){
                        $( "#weightage_slider" ).slider('values', 1, ui.values[ 0 ]); // triggers change event
                        return false;
                    }else if(ui.values[ 1 ] >= ui.values[ 2 ]){
                        $( "#weightage_slider" ).slider('values', 1, ui.values[ 2 ]); // triggers change event
                        return false;
                    }else{
                        // handle-1 will move
                        // update display of colored handle ranges
                        $( "#weightage_slider_b" ).css('left', (ui.values[ 0 ] + '%'));
                        $( "#weightage_slider_b" ).css('width', ((ui.values[1] - ui.values[0]) + '%'));
                        $( "#weightage_slider_c" ).css('left', (ui.values[ 1 ] + '%'));
                        $( "#weightage_slider_c" ).css('width', ((ui.values[2] - ui.values[1]) + '%'));
                    }
                }

                if ( ui.handle == $( "#weightage_slider_2" ).get(0) ) {
                    if(ui.values[ 2 ] <= ui.values[ 1 ]){
                        $( "#weightage_slider" ).slider('values', 2, ui.values[ 1 ]); // triggers change event
                        return false;
                    } else{
                        // handle-2 will move
                        // update display of colored handle ranges
                        $( "#weightage_slider_c" ).css('left', (ui.values[ 1 ] + '%'));
                        $( "#weightage_slider_c" ).css('width', ((ui.values[2] - ui.values[1]) + '%'));
                        $( "#weightage_slider_d" ).css('left', (ui.values[ 2 ] + '%'));
                        $( "#weightage_slider_d" ).css('width', ((100 - ui.values[2]) + '%'));
                    }
                }
            }, 
            change: function( event, ui ) {
                // because slide event has function that changes handles' value programmatically, the following is necessary

                // these four lines update the display of handle ranges
                $( "#weightage_style" ).val( "0" + " - " + $( "#weightage_slider" ).slider('values', 0) );
                $( "#weightage_design" ).val( $( "#weightage_slider" ).slider('values', 0) + " - " + $( "#weightage_slider" ).slider('values', 1) );
                $( "#weightage_correctness" ).val( $( "#weightage_slider" ).slider('values', 1) + " - " + $( "#weightage_slider" ).slider('values', 2) );
                $( "#weightage_others" ).val( $( "#weightage_slider" ).slider('values', 2) + " - " + "100" );

                // update display of colored handle ranges
                $( "#weightage_slider_a" ).css('left', '0%');
                $( "#weightage_slider_a" ).css('width', (ui.values[ 0 ] + '%'));
                $( "#weightage_slider_b" ).css('left', (ui.values[ 0 ] + '%'));
                $( "#weightage_slider_b" ).css('width', ((ui.values[1] - ui.values[0]) + '%'));
                $( "#weightage_slider_c" ).css('left', (ui.values[ 1 ] + '%'));
                $( "#weightage_slider_c" ).css('width', ((ui.values[2] - ui.values[1]) + '%'));
                $( "#weightage_slider_d" ).css('left', (ui.values[ 2 ] + '%'));
                $( "#weightage_slider_d" ).css('width', ((100 - ui.values[2]) + '%'));
            }
        });

        // label each slider handle
        $( "#weightage_slider > a" ).each(function(index){
            $(this).attr('id', 'weightage_slider_' + index);
            $(this).attr('title', 'slider handle ' + index);    
        });

        // the following four div tags result in the display of colored handle ranges
        // the following left attributes and width attributes should be consistent with slider initialization - values array
        $('#weightage_slider').append("<div id='weightage_slider_a' class='ui-slider-range' style='left:0%;width:10%;background-color:#41d862;'></div>");
        $('#weightage_slider').append("<div id='weightage_slider_b' class='ui-slider-range' style='left:10%;width:30%;background-color:#41b7d8;'></div>");
        $('#weightage_slider').append("<div id='weightage_slider_c' class='ui-slider-range' style='left:40%;width:50%;background-color:#d841b7;'></div>");
        $('#weightage_slider').append("<div id='weightage_slider_d' class='ui-slider-range' style='left:90%;width:10%;background-color:#d86241;'></div>");

        // these four lines display the initial handle ranges
        $( "#weightage_style" ).val( "0" + " - " + $( "#weightage_slider" ).slider('values', 0) );
        $( "#weightage_design" ).val( $( "#weightage_slider" ).slider('values', 0) + " - " + $( "#weightage_slider" ).slider('values', 1) );
        $( "#weightage_correctness" ).val( $( "#weightage_slider" ).slider('values', 1) + " - " + $( "#weightage_slider" ).slider('values', 2) );
        $( "#weightage_others" ).val( $( "#weightage_slider" ).slider('values', 2) + " - " + "100" );
    </script>

</body> 
```

错误：如果手柄被拖到最左边，它们会“卡住”，因此您可能需要一个重置按钮来恢复手柄的位置。

# cookies - 如何在 cookie 中保存表单数据 (dojo)

> ID：10485079
> 
> 赞同：0
> 
> 时间：2012-05-07T15:48:36.340
> 
> 标签：cookies, dojo

我有一个联系表格，用户将在其中输入他们的详细信息，如姓名、地址、电话等。现在我在表单上有一个复选框（记住我）.. 每当用户检查此信息时，信息应保存在 cookie 中，并在同一用户稍后访问时检索。我就是这样开始的。。

```
<tr><td><input id="mycheck" name="mycheck" data-dojo-type="dijit.form.CheckBox" value="" checked="false" onChange="setCookie" > <label for="mycheck" >Remember me  </strong></label></td></tr>

setCookie: function () {
            cookie("UserInfo", "cookieValue", { expire: 5 });
        }, 
```

我如何获得 cookie 值（这应该是整个表单数据..我需要使用类似 byId 的东西）...困惑..有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:24:33.023

见[http://dojotoolkit.org/reference-guide/1.7/dojo/cookie.html](http://dojotoolkit.org/reference-guide/1.7/dojo/cookie.html)

如果使用> 1.7，您应该引入所需的模块并通过引用使用它（就像您正在做的那样）： *注意不是 {expire:X} 而是 {expire* **s** *:x}*

```
<script>
    require(["dojo/cookie"], function(cookie){ 
     /* set */
     cookie(cookieName, cookieValue, cookieProps);
     /* get */
     cookie(cookieName);
    });
</script> 
```

您可以使用 dojo/dom-form 模块来提取值并将它们保存为 neet one-liner

```
<form id="myform">
  <input type="text" name="field1" value="value1">
  <input type="text" name="field2" value="value2">
  <input type="button" name="someButton" value="someValue">
</form>
<script>
require(["dojo/dom-form", "dojo/cookie"], function(domForm, dCookie){

  dCookie(
       "formdata",
       domForm.toJson("myId"),
       {expires: 5}
  );
  // The cookie will read:  '{"field1":"value1", "field2":"value2"}'
  // Note the button was skipped. 
  // Buttons only gets sent when used as submitbutton + onclick
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:52:34.780

将值序列化为 JSON，然后在您检索时撤消它，如下所示：

```
//Setting the cookie to hold an array of values.
value = {my:"1",cookie:"2"};
dojo.cookie("myCookie", dojo.toJson(value), {expires: 30});
//Retrieving the cookie.
newValues = dojo.fromJson(dojo.cookie("myCookie")); 
```

# java - Java：有没有办法在 Windows 上使用 ESC 命令通过 USB 打印到收据打印机？

> ID：10485088
> 
> 赞同：1
> 
> 时间：2012-05-07T15:49:33.820
> 
> 标签：java

我已经被这个问题困扰了几个月，但我仍然无法让它工作。如何开始与通过 USB 连接的收据打印机进行通信、发送命令和打印？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T01:41:31.360

我知道可能已经晚了，但我在 Windows 上尝试过的一种解决方案是使用 Generic/Text Only Driver 安装收据打印机。然后分享一下。然后使用 net use 命令将其映射到 LPT 端口：

```
net use \\%computername%\[sharename] LPT1: /persistent:yes 
```

您可以在此处查找更多网络使用选项：

[http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/net_use.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/net_use.mspx?mfr=true)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T02:08:48.410

好的，我会加入后期回答的潮流。[jUSB](http://www.ibm.com/developerworks/library/j-usb/index.html)项目怎么样？

# firefox - 硒 + 火狐 + HTTPS

> ID：10485089
> 
> 赞同：3
> 
> 时间：2012-05-07T15:49:37.190
> 
> 标签：firefox, selenium, https

好的。我知道我在问一个陈词滥调的问题，但我发布这个是因为尽管尝试了各种链接上提供的所有解决方案，但我的问题没有得到解决。

我的限制 - 我不想使用保存的 Firefox 配置文件来保存网站的证书。

Selenium 服务器版本 - 2.0b3

尝试的解决方案 -
1) [http://seleniumhq.org/docs/05_selenium_rc.html#handling-https-and-security-popups](http://seleniumhq.org/docs/05_selenium_rc.html#handling-https-and-security-popups)
浏览器启动器 *firefox
Selenium 以 trustAllSSLCertificates 选项开始。
没有帮助。FF 再次要求保存证书。

2) [http://blog.mogotest.com/2010/04/13/how-to-accept-self-signed-ssl-certificates-in-selenium/](http://blog.mogotest.com/2010/04/13/how-to-accept-self-signed-ssl-certificates-in-selenium/)
浏览器启动器 *firefoxproxy
Selenium 以 trustAllSSLCertificates 选项开始。
没有帮助。

3) [Selenium 测试 HTTPs 信任所有证书适用于 FF 但不适用于 IE](https://stackoverflow.com/questions/3575817/selenium-testing-https-trust-all-certificates-working-for-ff-but-not-ie)

4）除此之外，我尝试创建自己的 cert_override.txt 并填充 5 个字段，如[https://developer.mozilla.org/En/Cert_override.txt](https://developer.mozilla.org/En/Cert_override.txt)中所述，但获取第 5 个字段的值，即证书的序列号和如[http://tinyurl.com/ce4vn99](http://tinyurl.com/ce4vn99)中所述，作为 base64 编码字符串的发行者名称并不简单。

5) 使用 Firefox 的记住证书异常插件[http://sejq.blogspot.in/2009/01/remember-certificate-exception.html](http://sejq.blogspot.in/2009/01/remember-certificate-exception.html)是另一种选择，但我无法对其进行完全静默安装。当我们将 xpi 文件放到所需的目录中时，下次 Firefox 启动时，它会提示说它是否找到了插件并继续安装。该插件不仅会反映在浏览器中。如果有人至少可以帮助我进行**完全**静默安装，那就太好了！

我想要的只是这在 Firefox 中有效。我对 IE 和 Google Chrome 不感兴趣。

任何帮助提供答案而不仅仅是将其称为重复将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:35:46.813

所以解决方案原来是上面提到的第五点。以下是解决问题的步骤 -

[1) 从https://addons.mozilla.org/en-US/firefox/addon/remember-certificate-exception/](https://addons.mozilla.org/en-US/firefox/addon/remember-certificate-exception/)下载 Remember Certificate Exception xpi 文件

2) 解压得到一组文件。将它们保存在临时文件夹中。(temp_folder/extracted_files)

3) 打开 install.rdf 文件并复制描述节点中存在的 em:id 节点的内容。

4) 用这个复制的字符串重命名刚刚创建的临时文件夹。

5) 将此文件夹放在 profile_name/extensions/ 目录下。还要从您的配置文件文件夹中删除 extensions.cache/.ini/.rdf 文件。这些需要删除，以防止提示用户他的配置文件已更改并且有新的插件要安装。只有删除这 3 个文件，才会进行完全静默安装。

这可以使用脚本自动完成。

```
#!/bin/bash
mkdir /tmp/addon
cp -r ~/POC/remember_certificate_exception-1.0.0-fx.xpi /tmp/addon
unzip /tmp/addon/remember_certificate_exception-1.0.0-fx.xpi -d /tmp/addon
rm /tmp/addon/remember_certificate_exception-1.0.0-fx.xpi
folder_name=$(cat /tmp/addon/install.rdf | grep -m 1 "<em:id>" | cut -f2 -d ">" | cut -f1 -d "<")
mv /tmp/addon /tmp/$folder_name
cp -r /tmp/$folder_name ~/.mozilla/firefox/*.default/extensions
rm -f ~/.mozilla/firefox/*.default/extensions. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:03:59.830

[https://addons.mozilla.org/en-US/firefox/addon/skip-cert-error/](https://addons.mozilla.org/en-US/firefox/addon/skip-cert-error/) 使用这个插件。这将绕过 https 错误。这也是可配置的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:00:39.820

我会建议 Selenium 的替代品。

你试过[萨希](http://sahi.co.in/)吗？它基本上是一个非常相似的应用程序，因为它允许脚本化的浏览器控制，但在很多情况下，它似乎比 Selenium 工作得更好。

从 Sahi 常见问题页面：

> **它与 Selenium 相比如何？**
> 
> Sahi 对测试人员来说更容易学习和使用。Sahi 的记录器适用于所有浏览器。Sahi 自动等待 AJAX 和页面加载。它不使用 XPath，而是使用更直观的 API，例如 _in 和 _near。Sahi 在框架、iframe、弹出窗口、具有动态 ID 的站点、https 站点、401 身份验证站点等方面都能很好地工作。它具有内置的 HTML 报告，并且能够并行运行多个脚本。

根据我的经验，这是准确的。Selenium 处理某些类型的浏览器事件，Sahi 处理得更好。

我知道这并不能解决您使用 Selenium 的问题，而且我知道如果您已经在 Selenium 中编写了测试以在 Sahi 中重新进行测试，那么这可能不是您正在寻找的解决方案，但是如果其他一切都失败了，这可能值得考虑。

ps - 你没有提到你的开发环境，但是有一个基于 PHP 的测试工具叫做[Mink](http://mink.behat.org/)，它与 Sahi 和 Selenium 集成 - 即你可以编写一个单独的测试脚本并让它在任何一个中工作。我不知道其他语言中有任何类似的工具，但如果它可以帮助您在两者之间迁移可能会很有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-20T20:21:52.287

我整理了一个示例，展示了如何使用 Selenium 测试 HTTPS 端点——**而不忽略证书验证错误**。它展示了如何使用受信任的根 CA 设置 selenium 客户端，这些根 CA 可用于验证正在测试的 HTTPS 端点提供的服务器证书。见[https://github.com/JeNeSuisPasDave/Selenium-and-TLS](https://github.com/JeNeSuisPasDave/Selenium-and-TLS)

该示例演示了 Chrome 和 Firefox Selenium 节点。Chrome 在系统受信任的证书存储中查找用于验证的根 CA 证书；Firefox 在当前配置文件中查找 cert8.db 文件。

我认为这种方法很重要，因为我认为指示您的测试工具忽略证书错误是不必要的风险。这样做最终可能会隐藏您希望在部署到生产环境之前捕获的错误。

我写了一篇关于这个主题的简短文章，[https://develves.net/blogs/asd/2017-02-20-selenium-and-tls/](https://develves.net/blogs/asd/2017-02-20-selenium-and-tls/)，但你真的只需要上面链接的示例 repo。

# ruby-on-rails - Rails：从预编译中排除某些资产

> ID：10485091
> 
> 赞同：4
> 
> 时间：2012-05-07T15:49:42.933
> 
> 标签：ruby-on-rails

我想要的非常简单——我想要预编译除特定 css 文件（引用图像资产，因此需要通过资产管道）之外的所有资产。如何从预编译中排除该 css 文件？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-04T21:47:22.717

根据您的需要，有几个可能的答案。我不太确定你在问什么。

如果它在 app/assets 中，那么您确实需要其中的任何内容才能通过资产管道*可用*。在生产中，您需要预编译作为资产管道一部分的所有资产——并且每当它们发生变化时都需要在生产模式下重新预编译。

如果资产名称没有`scss`或`sass`后缀，它将不会通过 scss/sass 编译器，尽管它仍会通过资产管道以在文件名中进行指纹识别、gzip 等。

如果您真的根本不希望资产通过资产管道*，*那么您就不能真正将其放入`app/assets`。你必须把它放进去`public`。然后它会变得混乱如何为其生成 URL，最好的方法是使用`public_path + "/subdir/foo.css"`.

但我不确定这就是你要问的。如果您有一个引用图像路径的资产文件，通常您*确实*需要通过资产管道，绝对！因为资产管道将为这些图像资产正确填写 URL。您需要在资产文件中使用 Rails 的asset_path 帮助程序来生成图像的 URL。您可以`.erb`在文件末尾添加一个，然后使用 ERB 代码`<%= asset_path('my_asset.css') %> in it it. Or if it's sass,`asset_path` 可能已经内置到 rails sass 中，我忘记了。

我不完全了解您到底遇到了什么问题，但我认为您所要求的可能实际上并不是您所需要的。您是否查看过 Rails 资产管道指南？这是相当体面的。[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-09-01T21:59:56.703

听起来您实际上想要一个与其他文件分开预编译的文件？

如果是这样，您只需将其添加到`Rails.application.config.assets.precompile`数组中。以`config/initializers/assets.rb`注释行为例。

# chmod - Unix 权限

> ID：10485092
> 
> 赞同：2
> 
> 时间：2012-05-07T15:49:47.953
> 
> 标签：chmod

我有一个需要更改内容的文件，该文件具有以下权限：

```
-rw-r--r-- 
```

如何找出我属于哪个权限组，以​​便执行 chmod 命令？

我刚刚尝试执行 chmod，但出现错误：

```
$ chmod 777 hosts
chmod: Unable to change file mode on hosts: Operation not permitted 
```

这是我的 ls -l

```
-rw-r--r--  1 root  wheel  313 Apr 16 13:04 hosts 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:51:30.073

'ls -l' 会告诉你所有你需要知道的。

```
Permissions Directories Group   Size    Date            Directory or file 
drwx------  2           users   4096    Nov 2 19:51     mail/ 
```

如果您有 root 权限，请尝试“sudo chmod 777 hosts”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:50:21.837

您可能不是该文件的所有者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T15:53:49.677

文件的所有者将需要使用 chown 更改权限或更改所有权，

这里有一些例子：[http ://en.wikipedia.org/wiki/Chown](http://en.wikipedia.org/wiki/Chown)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T15:54:36.720

如果您有超级用户的密码，您总是可以：

```
$ sudo chmod 777 hosts 
```

当然，这绝不是一个好主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-24T02:02:12.240

这就是解决我的问题的方法

确保您是文件的所有者 转到根文件，右键单击然后转到底部的更多信息，您可以设置权限，点击加号给您自己的读写权限，然后点击齿轮选项并制作自己是所有者

在根文件运行

```
sudo chmod 777 * 
```

如果在本机反应中执行此操作以启动您的应用程序运行

```
sudo npm start 
```

你应该很高兴

# html - Imagemap 仅适用于 IE

> ID：10485100
> 
> 赞同：0
> 
> 时间：2012-05-07T15:50:32.383
> 
> 标签：html, css, imagemap

我认为它是因为定位、填充和边距。但我真的不能`imagemap`在元素菜单上找到这个权利。只有 IE 以良好的方式显示它：http: [//xn--wiadomesny-37b.pl/bg/](http://xn--wiadomesny-37b.pl/bg/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"l lang="pl">
<head>
<meta charset="utf-8">
<title>{TITLE}</title>
<meta name="keywords" content="{H1}" />
<meta name="description" content="{DESC}" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<script src="js/jquery-1.6.1.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="css/prettyPhoto.css" type="text/css" media="screen" charset="utf-8" />
</head>
<body>
<div class="outer_wrapper">
  <div class="content_bg">

    <div class="wrapper"><div class="promo"><img src="images/header.png" width="655" height="238" /></div>
      <div class="menu"><img src="images/menu.png" width="601" height="158" usemap="#Map" />
        <map name="Map" id="Map">
          <area shape="circle" coords="66,86,64" href="#" alt="" />
          <area shape="circle" coords="217,68,68" href="#" alt="" />
          <area shape="circle" coords="371,69,64" href="#" alt="" />
          <area shape="circle" coords="529,88,67" href="#" alt="" />
        </map>
      </div>
      <div class="content"><div class="content_text">{CONTENT}</div></div>
      <div class="sider">
        <div class="sider_top"></div>
        <div class="sider_bg">{SIDEBAR}</div>
        <div class="sider_bottom"></div>
      </div>
      <div class="footer">
        <div class="footer_left">{FOOTER}</div>
        <div class="footer_right"><strong>Wykonanie</strong>: <a href="http://www.firmowa-strona-www.pl" title="Tanie strony www firmowe">Firmowa Strona WWW</a></div>
      </div>
    </div>
  </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T16:14:03.987

问题是由`z-index`以下规则引起的：

```
.content_bg {
    background-image: url("../images/bg_overlay.png");
    background-position: center 40px;
    background-repeat: no-repeat;
    height: 814px;
    margin: 0;
    padding: 40px 0 0;
    position: relative;
    width: 100%;
    z-index: -20; /* remove this line */
} 
```

# linux - Linux .so 函数是否具有与调用者共享堆栈的独立堆栈？

> ID：10485104
> 
> 赞同：1
> 
> 时间：2012-05-07T15:50:52.540
> 
> 标签：linux, stack, shared-libraries

众所周知，每个线程都有独立的堆栈，但是 linux 系统中的~~静态~~共享对象中的函数呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:53:18.300

静态 (.a) 和共享 (.so) 库都使用调用它们的堆栈。

# objective-c - 在开始使用 GCD 一种方法时需要帮助 - 多次调用

> ID：10485106
> 
> 赞同：0
> 
> 时间：2012-05-07T15:50:53.687
> 
> 标签：objective-c, grand-central-dispatch

我想在我自己的应用程序项目中学习 GCD，但我遇到了问题。我认为很容易，但我不知道如何解决它。所以我有两种方法：

```
- (void)viewDidLoad
{

[super viewDidLoad];

queue = dispatch_queue_create("com.fe.effect.load", NULL);

__block UIImage *th;

dispatch_sync(queue, ^{
    th = [self doThumbWithImage:thumbnail andTag:1];
    UIButton *btn1 = [self buttonWithFrame:CGRectMake(0, 0, 200, 100) andBackgroundImage:th andSelector:@selector(doEffect:) andTag:1];
    [self.view addSubview:btn1];
});

dispatch_sync(queue, ^{
    th = [self doThumbWithImage:thumbnail andTag:2];
    UIButton *btn2 = [self buttonWithFrame:CGRectMake(0, 100, 200, 100) andBackgroundImage:th andSelector:@selector(doEffect:) andTag:2];
    [self.view addSubview:btn2];
});

} 
```

和2方法：

```
-(UIImage *)doThumbWithImage:(UIImage *)_img andTag:(int)_tag {

ImageProcessing *ip = [[ImageProcessing alloc] initWithImage:_img andTag:_tag];
[ip doImageProcessing];
_img = ip.image;
ip = nil;    

return _img; 
```

}

在`doThumbWithImage:andTag:`我的`ImageProcessing`课堂上，我对我的`thumbnail`对象做一些事情。

当我使用`dispatch_sync`时，此操作的时间与不使用 GCD 的时间相同。当我使用时`dispatch_async`，我看不到按钮的缩略图。我知道出了点问题，但我不知道是什么。

我该如何修复这个？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:57:06.110

您可能需要在主线程中执行 addSubview 。您可以嵌套 dispatch_async 调用来处理它。

# oracle - 如何在 SQL Developer 中跟踪做某事需要多长时间

> ID：10485107
> 
> 赞同：1
> 
> 时间：2012-05-07T15:50:56.440
> 
> 标签：oracle, plsql, timing, procedure

基本上我在一个过程中这样做：

```
DECLARE
 CURSOR r_cursor is SELECT * from imp_exp.results where code = 8223558 FOR  UPDATE OF c_timestamp;

 BEGIN

 FOR idx IN r_cursor LOOP
   --dbms_output.put_line(idx.sample_code);
   update imp_exp.results set c_timestamp = TO_DATE('10-MAY-99', 'DD-MON=YY')    
WHERE CURRENT OF r_cursor;

END LOOP;

END; 
```

我怎样才能显示这花了多长时间？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T16:06:19.203

```
set timing on
begin
  call_your_procedure;
end; 
```

这将产生：

```
anonymous block completed
Elapsed: 00:00:05.524 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T08:06:22.790

您也可以选择使用[`DBMS_UTILITY.get_time`](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_util.htm#i1002765)

```
DECLARE
    CURSOR r_cursor IS
      SELECT *
      FROM   imp_exp.results
      WHERE  code = 8223558
      FOR UPDATE OF c_timestamp;
    v_start_time NUMBER;
    v_end_time   NUMBER;
BEGIN
    v_start_time := DBMS_UTILITY.get_time;

    FOR idx IN r_cursor LOOP
        --dbms_output.put_line(idx.sample_code);
        UPDATE imp_exp.results
        SET    c_timestamp = To_date('10-MAY-99', 'DD-MON=YY')
        WHERE  CURRENT OF r_cursor;
    END LOOP;

    v_end_time := DBMS_UTILITY.get_time;

    dbms_output.Put_line('Elapsed time in seconds: '
                         || (v_end_time - v_start_time ) / 100);
END; 
```

# matlab - 使用 Simulink 中的多媒体文件块从 mp3 中提取信号

> ID：10485109
> 
> 赞同：0
> 
> 时间：2012-05-07T15:51:01.760
> 
> 标签：matlab, multimedia, simulink

我在 Simulink 中有一个多媒体文件块，我用它在我的扬声器上播放。它工作正常，但我想知道是否有一种方法可以使用 get_param 或类似方法在 MATLAB 中提取信号。我想在 GUI 上绘制整个信号，所以我需要在播放之前获得整个信号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:38:15.407

我最终使用 a`dsp.AudioFileReader`来阅读我的歌曲。甚至不打扰来自多媒体文件，因为我不知道如何快速获取整个信号（它以采样率输出，我想在播放歌曲之前绘制信号）。

我创建了一个while循环并`step`足够快地通过dsp.AudioFileReader，然后通过多媒体块播放我的歌曲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:02:08.050

您可以将多媒体块连接到“到文件”或“到工作区”块吗？这会将信号保存到您以后可以加载的文件中，或者直接保存到工作区变量中。然后，您可以在 MATLAB 中绘制它，或将其合并到您的 GUI 中。

# google-maps-api-3 - 有没有办法使用 Google Maps v3 DirectionsService 在 Google Earth API 中创建折线？

> ID：10485111
> 
> 赞同：1
> 
> 时间：2012-05-07T15:51:04.170
> 
> 标签：google-maps-api-3, google-earth

我不确定这是正确的组。如果没有，请告诉我。

我的困境：

我需要`Polylines`从 Google Maps v3 返回的结果中添加到 Google Earth `DirectionsService`。在这种程度上，网络上似乎没有任何内容。这必须是可能的，因为 Roman 在他的驾驶模拟器中这样做：http: [//earth-api-samples.googlecode.com/svn/trunk/demos/drive-simulator/index.html](http://earth-api-samples.googlecode.com/svn/trunk/demos/drive-simulator/index.html)

不幸的是，他在那里使用 Google Maps v2，我似乎无法弄清楚如何将此代码传输到 Google Maps v3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:43:47.423

如果有人感兴趣，这是我设法解决的方法：

```
function DrawLinesOnEarth() {
    var sLat;
    var sLon;
    //var start = document.getElementById("start").value;
    //var end = document.getElementById("end").value;
    var request = {
        origin: '40.306134,-74.05018',
        destination: '40.313223,-74.043496',
        travelMode: google.maps.TravelMode.WALKING
    };
    directionsService.route(request, function (result, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(result);
            var steps = result.routes[0].legs[0].steps;

            //Step through array of step legs and create polylines one by one
            var lineStringPlacemark = IMC_ge.createPlacemark('');
            var lineString = IMC_ge.createLineString('');
            lineStringPlacemark.setGeometry(lineString);
            // Add LineString points
            for (var x in steps) {
                for (var y in steps[x].path) {
                    sLat = steps[x].path[y].Na;
                    sLon = steps[x].path[y].Oa;
                    lineString.getCoordinates().pushLatLngAlt(sLat, sLon, 0);
                }
            }
            // Add the feature to Earth
            IMC_ge.getFeatures().appendChild(lineStringPlacemark);

        }
    });
} 
```

# jquery - .Net & JQuery - 部分页面的跨页面回发

> ID：10485112
> 
> 赞同：1
> 
> 时间：2012-05-07T15:51:04.967
> 
> 标签：jquery, asp.net, .net, postback, cross-page-posting

我想知道是否有一种方法可以在保持源事件和视图状态的同时执行跨页面回发。下面是一个更长的解释。

我有一个页面（Control.aspx），我在其中加载基于查询字符串参数的模板/控件。我通过 JQuery AJAX GET 请求访问此页面，以在另一个页面 (Default.aspx) 的容器内呈现此模板/控件。因此，我最终可以将 Control1、Control2 和 Control3 全部打开`Default.aspx`。我希望 Control1 的按钮回发到`Control.aspx?id=1`， Control2 的按钮回发到`Control.aspx?id=2`等等，并且我希望事件像往常一样被触发。我无权访问 Control.aspx 页面上包含的控件，除非它们在 Default.aspx 上呈现。我还必须避免使用 iframe，因为它们无法在移动 safari 上干净地滚动。如果需要，我可以提供更详细的信息。感谢您的任何帮助，您可以提供。

# objective-c - 如何在 UIButton 中旋转图像？

> ID：10485113
> 
> 赞同：1
> 
> 时间：2012-05-07T15:51:06.800
> 
> 标签：objective-c, uiimage, uibutton, image-rotation

我有一个 UIButton 里面有一个图像，我想在你每次点击时旋转图像。我怎样才能做到这一点？我在想，每次你点击里面时，我都可以使用带有不同图像的条件。有没有旋转图像的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:55:37.403

您可以转换图像的矩阵。我将从使用 UIView animateWithDuration 开始。

见 CGAffineTransformMakeRotation

# php - 云文件元数据：有什么理由关注自定义元数据？

> ID：10485118
> 
> 赞同：3
> 
> 时间：2012-05-07T15:51:23.943
> 
> 标签：php, rackspace-cloud, cloudfiles

我一直在使用带有 PHP API 的 Rackspace Cloud Files 来存储上传的文件。这些文档在本地数据库中引用，以便于查找。一切运行良好，但我对元数据的存储有些担心。我通过 Rest API 使用 Cloud Files 存储自定义元数据。

[https://github.com/rackspace/php-cloudfiles](https://github.com/rackspace/php-cloudfiles)

我在云文件的“元数据”中存储了一些自定义名称/值对。元数据似乎适用于 httpd 标头，例如 Content-Type？

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

在云文件元数据中存储一些自定义元数据字段有什么问题吗？例如，我存储以下内容，以便可以找到创建文档的位置：“Current-Url”、“Document-Type”、“Original-Name”。我认为它会很好，只要它还不是典型的标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:20:37.873

根据他们的文档：

[http://docs.rackspace.com/files/api/v1/cf-devguide/content/Update_Container_Metadata-d1e1900.html](http://docs.rackspace.com/files/api/v1/cf-devguide/content/Update_Container_Metadata-d1e1900.html)

您唯一必须做的就是在自定义元数据前面加上：

```
X-Container-Meta- 
```

存储自定义元数据没有问题。

# vb.net - Oracle 更新：SQL 命令未正确结束

> ID：10485119
> 
> 赞同：0
> 
> 时间：2012-05-07T15:51:25.277
> 
> 标签：vb.net, plsql

我在 VB .NET 应用程序中有以下代码。我正在尝试使用带有 SQL 数据的数据更新 Oracle 表中的列。当我运行应用程序时，我得到（ORA-00933：SQL 命令未正确结束）'or_cmd_3.ExecuteNonQuery()' 行。

如果我去掉代码并在 TOAD 或 SQL Developer 中运行它，用一些虚假数据替换临时变量，它会更新得很好。我错过了什么？

提前谢谢了。

```
 ElseIf (oracle_summary_temp = ueio_tmpALM_Summary) And (oracle_request_ID_temp = ueio_tmpALM_ID) And added_to_alm = "1" AndAlso ({"Deferred", "Rejected", "Closed"}.Contains(ueio_tmpALM_Status)) Then
Dim update_oracle As String = Nothing

update_oracle =
"update SCHEMA.TABLE set ISSUE_ADDED_TO_ALM = '2'," & _
"ISSUE_STATUS = '" & ueio_tmpALM_Status & "'," & _
"ISSUE_REJECTED_REASON = '" & ueio_tmpALM_Rejected & "'," & _
"ISSUE_PHASE = '" & ueio_tmpALM_Current_Phase & "'," & _
"ISSUE_PRIORITY = '" & ueio_tmpALM_Priority & "'," & _
"ISSUE_SYSTEM_IMPACTED = '" & ueio_tmpALM_System_Impacted & "'," & _
"ISSUE_DQ_ANALYST = '" & ueio_tmpALM_DQ_Analyst & "'," & _
"ISSUE_COMMENTS = '" & ueio_tmpALM_Comments & "'," & _
"ISSUE_OWNER_DEPARTMENT = '" & ueio_tmpALM_Owner_Department & "'," & _
"ALM_ISSUE_ID = '" & ueio_tmpALM_ID & "'," & _
"DQ_Team = '" & ueio_tmpALM_DQ_Team & "'" & _
"where ISSUE_SUMMARY = '" & ueio_tmpALM_Summary & "'"

Dim or_cmd= New NetOracle.OracleCommand(update_oracle, OracleConn)
or_cmd.ExecuteNonQuery() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:38:46.510

构建连接输入字符串的查询文本始终是一种不好的做法。
一个原因是您需要删除破坏查询的字符，例如单引号或数据库查询语法定义的其他字符。但最重要的原因是[Sql Injection Attacks](http://en.wikipedia.org/wiki/SQL_injection)的可能性。也就是说，您的错误的可能原因是 where 子句之前缺少空格。您应该以这种方式使用参数替换所有文本：

```
update_oracle = "update SCHEMA.TABLE set " & _
       "ISSUE_ADDED_TO_ALM = '2'," & _ 
       "ISSUE_STATUS = :tmpALMStatus, " & _
       "ISSUE_REJECTED_REASON = :tmpALMRejected," & _ 
       "ISSUE_PHASE = :tmpALMCurrent_Phase, " & _
       "ISSUE_PRIORITY = :tmpALMPriority," & _
       "ISSUE_SYSTEM_IMPACTED = :tmpALMSystemImpacted," & _ 
       "ISSUE_DQ_ANALYST = :tmpALMDQAnalyst, " & _ 
       "ISSUE_COMMENTS = :tmpALMComments," & _
       "ISSUE_OWNER_DEPARTMENT = :tmpALMOwnerDepartment, " & _ 
       "ALM_ISSUE_ID = :tmpALM_ID," & _ 
       "DQ_Team = :tmpALM_DQ_Team" & _
       " where ISSUE_SUMMARY = :tmpALM_Summary" 

   Dim or_cmd= New NetOracle.OracleCommand(update_oracle, OracleConn)   
   or_cmd.Parameters.AddWithValue(":tmpALMStatus",ueio_tmpALM_Status)
   or_cmd.Parameters.AddWithValue(":tmpALMRejected" ,ueio_tmpALM_Rejected )
   or_cmd.Parameters.AddWithValue(":tmpALMCurrent_Phase",ueio_tmpALM_Current_Phase)
   or_cmd.Parameters.AddWithValue(":tmpALMPriority",ueio_tmpALM_Priority)
   or_cmd.Parameters.AddWithValue(":tmpALMSystemImpacted" ,ueio_tmpALM_System_Impacted)
   or_cmd.Parameters.AddWithValue(":tmpALMDQAnalyst" ,ueio_tmpALM_DQ_Analyst)
   or_cmd.Parameters.AddWithValue(":tmpALMComments",ueio_tmpALM_Comments)
   or_cmd.Parameters.AddWithValue(":tmpALMOwnerDepartment",ueio_tmpALM_Owner_Department)
   or_cmd.Parameters.AddWithValue(":tmpALM_ID",ueio_tmpALM_ID)
   or_cmd.Parameters.AddWithValue(":tmpALM_DQ_Team",ueio_tmpALM_DQ_Team)
   or_cmd.Parameters.AddWithValue(":tmpALM_Summary",ueio_tmpALM_Summary)
   or_cmd.ExecuteNonQuery() 
```

# c# - 良好的编码实践

> ID：10485120
> 
> 赞同：0
> 
> 时间：2012-05-07T15:51:25.560
> 
> 标签：c#, entity-framework, entity-framework-4

我正在使用 Entity Framework 进行我的第二个项目，我想阅读一些关于代码是否低于其良好编码实践的意见。

我提出的架构是这样的：

![在此处输入图像描述](../Images/030ba8fd367ee3cee5492f3385d04c58.png)

因此，网站调用业务逻辑，在那里评估业务规则。然后它调用 DALFacade，只是它对于上层是不可见的，无论我们是访问 db2 还是 sql server。

EF DAL，它负责与数据库对话，CODE FIRST Approach。实体类库是带有 poco 类的项目。实用程序是不言自明的，我可能会放一些代码，比如从活动目录中读取属性。

所以这是我的代码，我尽可能地简化了它

一页：

```
protected void BtnSubmitRequestClick(object sender, EventArgs e)
    {
        var ecoBonusWorkflow = new EcoBonusWorkflow
                                   {
                                       IsOnHold = true
                                   };

        BusinessLogic.EcoBonusRequestSave(ecoBonusWorkflow);
    } 
```

商业逻辑：

```
public static class BusinessLogic
    {
        public static void EcoBonusRequestSave(EcoBonusWorkflow ecoBonusWorkflow)
        {
            if (true)
            {
                DalFacade.EcoBonusRequestSave(ecoBonusWorkflow);
            }
        }
    } 
```

DAL外观：

```
 public static class DalFacade
    {
        private  static readonly UnitOfWork UnitOfWork = new UnitOfWork();

        public static void EcoBonusRequestSave(EcoBonusWorkflow ecoBonusWorkFlow)
        {
            UnitOfWork.EcoBonusWorkflowRepository.InsertEcoBonusWorkflow(ecoBonusWorkFlow);
        }
    } 
```

然后在 EF Dal 类库中，我使用传统的 EF 4.1 代码优先方法。我还使用了存储库模式和工作单元。

欢迎任何意见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:07:07.160

包含“实用程序”对我来说似乎很奇怪。其他所有东西的名字都很好，并有一个非常具体的设置来说明它应该做什么，然后你就有了这个命名模糊的“实用程序”块。

这不是任何特定的编码标准，但我会尽可能避免将“实用程序”合并到您的顶级架构中。每个项目都有一些名为“helpers”或“utilities”的文件夹，它最终成为大量杂项代码的转储，这些代码似乎无法立即适用于其他任何地方。这正是技术债务和意大利面条代码开始的方式。

除非您是该项目的唯一开发人员，否则无论您呈现什么，它都可能最终发生，但我仍会避免使其合法化。

此外，在你的快速和肮脏中包含静态类让我感到震惊。除了静态代码会损害可测试性这一事实之外，Entity 框架*不是*线程安全的。以线程安全的方式使用它取决于您，因此，如果您有任何多线程或协同处理，您的 DALFacade 将随机抛出大量错误并令人头疼。

我也没有在您的设计中看到任何依赖注入的余地，这再次涉及代码的可测试性。

编辑：好的，这些不是 Stack 的让步，所以是时候介绍[依赖注入](http://msdn.microsoft.com/en-us/magazine/cc163739.aspx "依赖注入")的概念了。

基本上，任何时候你直接依赖其他东西，比如当你调用一个静态类时，你就是把这两个东西联系在一起了。如果不修改或更换另一部分，则一个部分不再是可更换的。这是一件坏事，因为它使重构和更改成为一个非常大的问题。相反，您想要做的是“松散耦合”这些依赖项，这样您就可以在不破坏所有内容的情况下更改部分。在 C#/.NET 中，您主要使用接口来执行此操作。

因此，与其拥有“DALFacade”并直接传递它，不如使用以下效果：

```
interface IDalFacade
{
    int DoAThing();

    bool DoAnotherThing();
}

class DalFacade : IDalFacade
{
    public int DoAThing()
    {
        return 0;
    }

    public bool DoAnotherThing()
    {
        return false;
    }
} 
```

然后，您可以在您的业务逻辑中使用它，如下所示：

```
class BusinessLogic : IBusinessLogic
{
    public IDalFacade DalFacade { get; private set; }

    public BusinessLogic() : this(new DalFacade())
    {}

    public BusinessLogic(IDalFacade dalFacade)
    {
        this.DalFacade = dalFacade;
    }

    public void LogicTheThings()
    {
        this.DalFacade.DoAThing();
    }
} 
```

现在，如果 DalFacade 完全被破坏，或者突然之间你需要其中两个来做不同的事情，现在都不再重要了。甚至，真的，如果一个 DalFacade 被传入。只要它履行 IDalFacade 合同，它就完全没问题。你仍然可以不带参数调用它（它只是假设一个特定的实现），但即使这样也不理想。理想情况下，您会希望使用依赖注入库，例如[Ninject](http://www.ninject.org)或[StructureMap](http://structuremap.net)，这样您就可以更轻松地进行任何特定的更改。

这在尝试对代码进行单元测试时也很有用，因为正如我所说，您甚至不需要实际的 DalFacade 来做事。您可以简单地模拟出一些填充 IDalFacade 合同的东西（使用类似[RhinoMocks](http://ayende.com/wiki/Rhino+Mocks.ashx?AspxAutoDetectCookieSupport=1)的东西），然后您可以完全独立于项目中的其他任何东西来测试您的所有代码。

# ruby-on-rails - Rails - Factorygirl - 跳过 after_create 调用

> ID：10485123
> 
> 赞同：1
> 
> 时间：2012-05-07T15:51:49.263
> 
> 标签：ruby-on-rails, rspec, factory-bot

我有一个模型工厂，我想在创建它时跳过 after_create 回调。我尝试了以下几种变体（来自另一个stackoverflow问题），...

```
before_create { |page| Page.skip_callback(:create, :after_create, :retrieve_stream_profile, :update_stream_profile) } 
```

基本上，我希望在 rspec 测试中将模型保存在数据库中，我执行类似...

```
 @page = FactoryGirl.create :page 
```

但是，我不希望任何 after_create 回调发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:21:02.630

看起来您需要为每个要跳过的回调设置多行。就我而言，它看起来像......

```
after_build { |page| page.class.skip_callback(:create, :after, :add_page_for_superadmins) }
after_build { |page| page.class.skip_callback(:create, :after, :update_stream_profile) }
after_build { |page| page.class.skip_callback(:create, :after, :grab_stream) }
after_build { |page| page.class.skip_callback(:create, :after, :retrieve_past_insights) } 
```

因此，在构建此页面后，跳过所有回调。可能有一种更优雅的方法来做到这一点......考虑一下，我认为我没有尝试将数组作为要跳过的四种方法中的每一种的最后一个参数。

# javascript - 将两个数组合二为一

> ID：10485124
> 
> 赞同：0
> 
> 时间：2012-05-07T15:51:52.517
> 
> 标签：javascript, arrays

我有两个数组第一个是

```
lineChart = [{type : 'line' , data : arrdata }] ; 
```

第二个是

```
mina = [{type : 'area' , data : [[1326844575000,10] ,[1326845955000,10]], color : 'H33FF00'},
        {type : 'area' , data : [[1326846575000,10] ,[1326848065000,10]], color : 'H33FF00'},
        {type : 'area' , data : [[1326848390000,10] ,[1326849755000,10]], color : 'H33FF00'} ]; 
```

当我把它们推到一起时：

```
mychart.push(lineChart);
mychart.push(mina); 

console.log(JSON.stringify(mychart)) ; 
```

这就是我得到的

```
[{"type":"line","data":[]},[{"type":"area","data":[[1326844575000,10],[1326845955000,10]],"color":"H33FF00"},{"type":"area","data":[[1326846575000,10],[1326848065000,10]],"color":"H33FF00"},{"type":"area","data":[[1326848390000,10],[1326849755000,10]],"color":"H33FF00"}]] 
```

**我的问题是：如何使这个结果数组像这样一个数组？**

```
[{"type":"line","data":[]},{"type":"area","data":[[1326844575000,10],[1326845955000,10]],"color":"H33FF00"},{"type":"area","data":[[1326846575000,10],[1326848065000,10]],"color":"H33FF00"},{"type":"area","data":[[1326848390000,10],[1326849755000,10]],"color":"H33FF00"}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:55:41.140

只需将第一个对象推入数组即可。

`mina.push(linechart);`

此外，如果您特别希望在开始时使用折线图 `mina.unshift(linechart);`

[http://jsfiddle.net/E2WT8/](http://jsfiddle.net/E2WT8/)

```
mina = [{type : 'area' , data : [[1326844575000,10] ,[1326845955000,10]], color : 'H33FF00'},
        {type : 'area' , data : [[1326846575000,10] ,[1326848065000,10]], color : 'H33FF00'},
        {type : 'area' , data : [[1326848390000,10] ,[1326849755000,10]], color : 'H33FF00'} ];

lineChart = {type : 'line' , data : [] } ;

mina.unshift(lineChart);

alert(JSON.stringify(mina)) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:59:41.177

首先：`lineChart`不是数组，它是一个对象。

`mina`是一个数组。

要添加`lineChart`，您可以使用`mina.push(lineChart);`.

另一种方法是`var mychart = mina.concat([lineChart]);`

另一个解决方案是合并它们：

```
function arrayMerge(array1, array2) {
    var i, j, newArray = []; for(i=0,j=array1.length;i<j;++i) {
        newArray.push(array1[i]);
    }
    for(i=0,j=array2.length;i<j;++i) {
        newArray.push(array2[i]);
    }

    return newArray;
}

var mergedArray = arrayMerge(mina, [lineChart]); 
```

JSfiddle：http: [//jsfiddle.net/4Zwkx/](http://jsfiddle.net/4Zwkx/)

# xpages - 寻呼机控制。以编程方式隐藏上一个/下一个

> ID：10485126
> 
> 赞同：0
> 
> 时间：2012-05-07T15:51:59.357
> 
> 标签：xpages, xpages-ssjs

在自定义控件上，我有一个迭代向量的重复控件。这个重复控件确实绑定了一个寻呼机。当寻呼机位于控件的第一页或最后一页时，我想隐藏上一个和下一个链接。

隐藏前面当然很简单>>在getpageCount()中添加一个渲染属性> 0。下一个链接有点问题。寻呼机类没有getCurrentPage() 方法。因此我无法在寻呼机上找到我当前所在的页面。

是否有人对如何使用 SSJS 在寻呼机上隐藏/显示下一个/上一个链接有一个修复/想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:46:44.647

您可以获得 Vector (A) 中的项目数您还知道要在重复控件的 1 页中显示的项目数 (B) 所以总页数将为 mod(A/B)+1 。如果您在该页面中，则可以隐藏下一步按钮。

Mod(modulo) 表示跳过小数部分或整数除法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:36:08.393

```
document.getElementById("#id:pager2}").firstChild.nextSibling.lastChild.lastChild.textContent) 
```

试试上面的，实际上上面是为了获取最后一个元素的 Group 的值。

我想使用客户端 javascript 比 SSJS 更容易操作 DOM 树，

```
Here, We have <previous><Group><Next>, 
```

所以我们需要得到第二个元素。它是一个跨度标签。我得到了 lasChild 的最后一个孩子。

注意：不要通过 setRendered(true) 隐藏它。因为在那之后 DOM 树将失去它的孩子。使用 display:none 属性。

# jquery - 在 JQuery 中使用淡出、淡入和 img

> ID：10485127
> 
> 赞同：-1
> 
> 时间：2012-05-07T15:52:20.170
> 
> 标签：jquery

我是 jQuery 的新手，我想要完成的是我想要一个图像淡入和淡出，并且在它完成淡出之后，我想在淡入新 src 的同时更改图像。不完全按照我想要的方式工作。这是我到目前为止所拥有的。任何帮助都会非常有帮助。

```
<img src="images/airport1.jpg" Height="200" Width="500" id="main_pic"/> 
<input id="Button1" type="button" value="button" />

<script>
$(document).ready(function () {
    $("#Button1").click(function () {
        changePicture();
    });
});
function changePicture() {
    $("#main_pic").fadeOut(5000).delay(3500).attr('src', "images/airport2.jpg").fadeIn(5000);
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:57:58.073

我建议不要使用`.delay`，而是加载新图像并`fadeIn`在回调中执行。

```
function changePicture() {
    $("#main_pic").fadeOut(5000, function(){
        $(this).attr('src', "images/airport2.jpg").fadeIn(5000);
    });
} 
```

演示：http: [//jsfiddle.net/v5fqB/](http://jsfiddle.net/v5fqB/)

# jquery - Zend 框架复选框上的 jQuery 验证器问题

> ID：10485129
> 
> 赞同：2
> 
> 时间：2012-05-07T15:52:28.960
> 
> 标签：jquery, zend-framework, jquery-validate

使用 ZF 复选框元素时出现验证问题。

```
$element = new Zend_Form_Element_Checkbox('iagree', array('uncheckedValue'=>null,'checkedValue'=>'Y','disableLoadDefaultDecorators' => true, 'class'=>'required agreetc' ));
$element->addDecorator('ViewHelper')
    ->setRequired(true)
    ->addErrorMessage('You must agree Privacy policy & Terms of use');
$this->addElement($element); 
```

以上代码输出：

```
<input type="hidden" value="" name="iagree">
<input type="checkbox" class="required agreetc" value="Y" id="iagree" name="iagree"> 
```

这是我的 jQuery 验证器。

```
<script language="JavaScript" type="text/javascript">
  $(document).ready(function(){

    $.validator.addMethod("agreetc", function(value, element) {
    return $('#iagree').is(':checked');
}, "You must agree Privacy Policy & Terms of Use.");
    $("#register").validate({ignore: ":hidden"});

  });
</script> 
```

除复选框外，所有其他字段均突出显示。我试过忽略但它不起作用

我尝试过的其他解决方案。我制作了 ZF 代码，这样它就不会输出隐藏字段，但是服务器端检查到那时将不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:58:33.993

使用下面的代码

```
<script language="JavaScript" type="text/javascript">
  $(document).ready(function(){

    $.validator.addMethod("agreetc", function(value, element) {
    return $('#iagree').not(':hidden').is(':checked');
}, "You must agree Privacy Policy & Terms of Use.");
    $("#register").validate({ignore: ":hidden"});

  });
</script> 
```

# exception - 节点：从不使用 try-catch？

> ID：10485130
> 
> 赞同：2
> 
> 时间：2012-05-07T15:52:31.730
> 
> 标签：exception, node.js, exception-handling, callback, try-catch

我正在用 Node.js 编写一个数据处理系统。

数据片段由用户提供或来自外部来源，因此

*   它们可能以各种方式畸形；
*   它们可能是模棱两可的；
*   它们可能相互矛盾。

在这些情况下，我通常想提醒用户注意它，然后：

*   如果系统以交互模式使用（即在 REPL 中输入数据），则处理应该停止，建议一些操作并等待用户的决定。
*   如果它以批处理模式运行（即数据来自文件、Web 服务或类似来源），我想继续处理丢弃这些信息。

当然，提醒用户的方法也取决于模式。

我认为例外是此类问题的正确解决方案，因为：

*   格式错误或矛盾的数据*应该是例外*；
*   这样，异常行为的代码将明显地与通常的流程分开；
*   我将能够将异常提升到更高的级别，在此我可以决定如何处理它。

所以我开始寻找指南，发现了两个相关的东西：

1.  @Raynos [Node.js 最佳实践异常处理](https://stackoverflow.com/questions/7310521/node-js-best-practice-exception-handling#comment8815552_7313005)的评论；
2.  [http://codebetter.com/karlseguin/2010/01/25/don-t-use-try-catch/](http://codebetter.com/karlseguin/2010/01/25/don-t-use-try-catch/)。

前者不作进一步解释。后来我明白了，但我认为这不是我的情况。

你会如何解决这个问题？我正在寻找通用方法，不一定是特定于平台或语言的……或者 JavaScript try-catch 中有什么特别邪恶的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:02:42.347

确实 try { } catch { } finally { } 在标准节点中的用处有限，错误处理可能会出现问题。

然而，在我最近参与的一个项目中，我使用了这些节点模块：Fibers、Fibers-Promise 以一种有效的方式，我可以在异步回调上做类似于 Thread.join 的事情，并使得在程序中使用节点成为可能，而不是功能风格。

有权衡。Fibers/所有协程库修改node的核心代码，无法在前端使用。但根据您的目的，您可能需要对此进行调查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:40:46.493

如果您正在处理的是 DATA，您可能会尝试将应用程序视为消息传输。

在这种模式中，无法捕获任何内容，任何无法理解的数据都会向用户返回一条有效消息——一条表示数据无效的消息。

这样您就不会尝试使用您的代码来捕获数据错误 - 这不是一件好事。

你真的不需要一个特殊的库来处理这个，它和任何东西一样都是一个思考练习。实际上，“模型”处理程序（想想 MVC）会很好地完成这项工作。或者，您只需在将其传递给解析器函数之前过滤掉任何非常糟糕的数据（例如零或过长） - 如果解析器无法完全理解数据，则默认向用户返回错误消息。

# ruby-on-rails - 对等方重置 nginx 408 连接

> ID：10485131
> 
> 赞同：4
> 
> 时间：2012-05-07T15:53:01.417
> 
> 标签：ruby-on-rails, nginx, unicorn

我有一个在 ubuntu 10.04 上运行的 nginx (1.2.0) 服务器。它充当在 unicorn 上运行的 rails 应用程序的反向代理。

一位用户在上传文件时遇到问题。用户可以上传 95% 的时间，但某些文件会返回“由 Peer 重置连接”。这些文件可靠地返回相同的 408 错误。Firefox (12) 发生错误。用户还安装了 IE，并且上传相同的文件就好了。我也可以上传文件就好了（Safari）

奇怪的是，请求似乎永远不会到达独角兽服务器；在 unicorn 或 rails 日志中找不到请求的痕迹。

几个nginx安装都存在这个问题

*   1.0.5
*   1.0.15
*   1.2.0

随机事实

*   无线和有线网络存在问题。
*   其他版本的 Firefox（11 和 3.6）也存在问题
*   Rails 3.2.3（也存在于 3.1.3）

任何帮助/建议将不胜感激。谢谢你。

### 来自 nginx access_log

[错误]

> 10.XXXX - - [07/May/2012:10:39:59 -0400]“POST /data/jobs/aL2OccMe8r4ylk-hGRWekO/attachments/HTTP/1.1”408 0“http://fake.name.com/ pages/jobs/aL2OccMe8r4ylk-hGRWekO/attachments/new/" "Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0"

[成功]

> 10.XXXX - - [07/May/2012:10:41:53 -0400] "POST /data/jobs/aL2OccMe8r4ylk-hGRWekO/attachments/HTTP/1.1" 302 146 "http://fake.name.com/ pages/jobs/aL2OccMe8r4ylk-hGRWekO/attachments/new/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/534.55.3 (KHTML, like Gecko) Version/5.1.5 Safari/534.55.3

# jquery - 按值检查多个 HTML 复选框 - 位旋转

> ID：10485135
> 
> 赞同：1
> 
> 时间：2012-05-07T15:53:10.847
> 
> 标签：jquery, html, checkbox, bit-manipulation

我有几个具有相同名称的复选框，并且值是 2 的幂：

```
<input type=checkbox name=mycheckbox value=1>Some text 1
<input type=checkbox name=mycheckbox value=2>Some text 2
<input type=checkbox name=mycheckbox value=4>Some text 3
<input type=checkbox name=mycheckbox value=8>Some text 4
<input type=checkbox name=mycheckbox value=16>Some text 5
<input type=checkbox name=mycheckbox value=32>Some text 6 
```

存储在数据库中的值是所选复选框的按位**或**，因此如果选中 Some text 3 和 Some text 6，则数据库中的值将为`32 | 4 = 36`。

我使用 Ajax 调用从数据库中加载此值。使用 jQuery 根据数字检查相应复选框的最简单或最佳方法是什么？

我更习惯于编写脚本，并且会像这样处理它：

```
for (i = 1; i <= 32; i*=2)
   if ((ajaxValue & i) == i) 
```

等等

但理想情况下，jQuery 可以更容易地做到这一点，并按值检查复选框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:01:40.003

`YOUR_VALUE`来自数据库。

```
$('input[name=mycheckbox][value="'+ YOUR_VALUE +'"]').prop('checked', true); 
```

**根据您的更新问题**

尝试这个：

```
var x = [];

$('input[name=mycheckbox]').each(function() {
    x.push(this.value);
});
var len = x.length,
    target = 36; // this is the value you get from ajax (integer)

for (i = 0; i <= len - 1; i++) {
    for (j = len - 1; j > i; j--) {
        var value = x[j + i] | x[i];
        if ( value === target) {
            $('input[name=mycheckbox][value="' + x[i] + '"], 
               input[name=mycheckbox][value="' + x[j + i] + '"]')
           .prop('checked', true);
        }
    }
} 
```

***[演示](http://jsfiddle.net/ajFcf/1/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:57:29.290

```
$(function () {
  $('input[name=mycheckbox]').each(function () {
    // Your code there like if ($(this).val() ....
    if ($(this).val() == someValue) $(this).attr('checked', 'checked'); // Example of make the checkbox checked
  });
}); 
```

# android - 谷歌地图活动 - 需要网络连接

> ID：10485136
> 
> 赞同：0
> 
> 时间：2012-05-07T15:53:12.927
> 
> 标签：android, google-maps, android-alertdialog

我是 Android 编程新手，我有一个带有这样的公共类的程序：公共类 MyLocationActivity 扩展 MapActivity，它在谷歌地图上显示我的位置。我想添加一条警报消息，例如“需要网络连接”，例如当手机未连接到互联网时打开 wifi。我尝试了很多东西，但我没有设法让它发挥作用。如何在地图活动中显示这样的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:02:27.213

您可以使用以下代码显示 WiFi 选项屏幕：

```
private void showWifiOptions(){  
        Intent wifiOptionsIntent = new Intent(  
                android.provider.Settings.android.provider.Settings.ACTION_WIFI_SETTINGS);
        startActivity(wifiOptionsIntent);  
    } 
```

# sql - DB2 sql过程中——选择查询结果——if条件——子串

> ID：10485138
> 
> 赞同：0
> 
> 时间：2012-05-07T15:53:19.967
> 
> 标签：sql, db2, substring, procedure

我正在编写一个 db2 过程。我的选择查询结果有我必须比较的日期时间。

日期格式 20120507 时间格式 111111

我打算将两者连接并比较为整数。这是正确的比较方式吗？

但如果它小于 10，则该值将类似于 71111 .. 在这些情况下，我计划在时间之前附加 0 并进行连接和比较。

我可以在单个语句中执行此操作吗？

```
select dbdate,  if   LENGTH(trim(dbtime))=7   then  '0'||dbtime into newtime   from tablename 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:35:43.200

尝试使用[TIMESTAMP](http://publibfp.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/DSNSQJ14/3.2.109?DT=20061213154312)标量函数，如

```
 select  TIMESTAMP(dbdate, dbtime) 
```

这为您提供了一个可用于比较操作的 db/2 时间戳。最好将所有日期/时间值转换为时间戳，然后 在进行比较之前根据需要[截断](http://publibfp.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/DSNSQJ14/3.2.114?DT=20061213154312)或[舍入。](http://publibfp.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/DSNSQJ14/3.2.92?DT=20061213154312#TBLWQ431)

# batch-file - 批处理：将 .txt 文件中的行插入 .txt 文件

> ID：10485139
> 
> 赞同：3
> 
> 时间：2012-05-07T15:53:20.473
> 
> 标签：batch-file

我对批处理文件完全陌生，并且一直在修改简单的命令。我已经想出了如何将文本移动到另一个文件、查找一行等，但我希望能够将几行文本添加到一个已经存在的文本文件中。这是我到目前为止所拥有的：

```
@ECHO OFF
CD C:\Documents and Settings\SLZ1FH\Desktop\New Folder
FOR /F "tokens=*" %%A IN (Examples.txt) DO (
  ECHO %%A
  IF %%A=="Ex3 3"(
    TYPE Line_to_add.txt >> Examples.txt
  )
) 
```

如果 Examples.txt 包含：

*   防爆1 1
*   Ex2 2
*   Ex3 3
*   防爆 4 4
*   Ex5 5

Line_to_add.txt 包含：

*   这是一条线
*   这是另一条线！

我希望输出为：

*   防爆1 1
*   Ex2 2
*   Ex3 3
*   这是一条线
*   这是另一条线！
*   防爆 4 4
*   Ex5 5

蒂亚:)

## 解决方案

```
@ECHO OFF
FOR /F "tokens=*" %%A IN (Examples.txt) DO (
  ECHO %%A
  IF "%%A" EQU "Ex3" (
    TYPE Line_to_add.txt
  )
) >> temp.txt
move /y temp.txt Examples.txt 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T16:24:40.120

您从不费心提出问题，但我可以看到您的代码存在一些问题。

1）您的 IF 语句被破坏，因为左括号被视为要比较的字符串的一部分。你必须在你的父母之前至少有一个空格。

2）您的比较永远不会找到匹配项，因为引号包含在比较中。你的值有空格，所以比较的两边都应该用引号引起来。

3) 您正在尝试插入到现有文件中，但无法正常工作。您的代码只需将文本附加到文件末尾即可。您必须将整个所需结果写入一个新的临时文件，然后将该临时文件移动到原始名称。

首先，我将忽略文件的更新并展示如何将正确的输出显示到屏幕上。

```
@ECHO OFF
FOR /F "tokens=*" %%A IN (Examples.txt) DO (
  ECHO %%A
  IF "%%A" EQU "Ex3 3" (
    TYPE Line_to_add.txt
  )
) 
```

然后将输出定向到文件并将文件移动到所需的名称就很简单了。

```
@ECHO OFF
(
  FOR /F "tokens=*" %%A IN (Examples.txt) DO (
    ECHO %%A
    IF "%%A" EQU "Ex3 3" (
      TYPE Line_to_add.txt
    )
  )
) >temp.txt
move /y temp.txt Examples.txt 
```

学习批处理语法和技术的好资源：

1) 每个命令都有在线帮助。只需`/?`在命令名称后添加选项即可。例如，`DIR /?`

2）这里有一些信息很好的网站

[http://www.dostips.com/](http://www.dostips.com/)
[http://judago.webs.com/](http://judago.webs.com/)
[http://www.robvanderwoude.com/batchfiles.php](http://www.robvanderwoude.com/batchfiles.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:06:53.077

```
1) create new temp file
2) output to temp
3) delete original
4) rename temp to original 
```

想不出更好的了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:03:10.283

使用**FOR /F**迭代文件中的行，使用**SET /a**创建一个计数器。

对于文件中的每一行，**调用**一个增加计数器的子程序并对其进行测试。如果它有一些价值，请像目前所做的那样插入新数据。

这是您的脚本，已更新。您可以使用计数器或文件的内容来触发插入。它还处理输入和输出文件具有相同名称的情况。

```
@ECHO OFF
set INFILE=Examples.txt
set OUTFILE=Output.txt
set MIXFILE=Line_to_add.txt

set OUTFILEOLD=%OUTFILE%
if NOT "%INFILE%"=="%OUTFILE%" got no_tmp1
set OUTFILE=%OUTFILE%.tmp
:no_tmp1

set counter=0
FOR /F "tokens=*" %%A IN (%INFILE%) do call :process_line %%A

set OUTFILE=%OUTFILEOLD%
if NOT "%INFILE%"=="%OUTFILE%" goto no_tmp2
copy %OUTFILETMP% %OUTFILE%    
:no_tmp2

goto exit

:process_line
set /a counter=counter+1
echo Line %counter% = %*
REM ##IF "%counter%"=="3" goto :adding_line 
IF /i "%1"=="Ex3" goto :adding_line
echo %* >> %OUTFILE%
goto :EOF

:adding_line
echo Adding line
type %MIXFILE% >> %OUTFILE%
goto :EOF

:exit
echo DONE 
```

# c# - 实现通用方法

> ID：10485144
> 
> 赞同：4
> 
> 时间：2012-05-07T15:53:30.643
> 
> 标签：c#, .net, generics, c#-4.0, interface

我用一种方法创建了一个接口，能够将一个对象的内容复制到另一个相同类型的对象中（实际功能与问题无关）。

```
public interface IDeepClonable
{
    void DeepClone<T>(T other);
} 
```

我在正确实施时遇到了麻烦。

我真正想要的是像这样实现它（这是在 ClassA 内部，它实现了 IDeepClonable）

```
public void DeepClone<ClassA>(ClassA other)
{
    this.A = other.A;
} 
```

但是这不起作用，因为编译器不将“其他”对象识别为 ClassA 的实例（为什么？）

这也不起作用，因为它给出了“类型参数 T 的约束必须匹配 (...) 接口方法。

```
public void DeepClone<T>(T other) where T : ClassA
{
    this.A= other.A;
} 
```

我可以通过更改接口以接受对象而不是通用约束来解决所有问题，但我希望有一个更优雅的解决方案。

我也可以通过将接口转换为通用接口来解决这个问题，但这会迫使我强制转换为该通用接口。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T15:55:09.447

您正在尝试使用[CRTP](http://blogs.msdn.com/b/ericlippert/archive/2011/02/03/curiouser-and-curiouser.aspx)。

你需要写

```
public interface IDeepClonable<out T> where T : IDeepClonable<T>
{
    void DeepClone(T other);
}

public class ClassA : IDeepClonable<ClassA> {
    void DeepClone(ClassA other) { ... }
} 
```

然而，这意味着任何使用的代码`IDeepClonable`本身都必须是通用的，这最终会变得笨拙。

CLR 类型系统不够丰富，无法满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:04:37.463

问题是你在接口中声明了一个泛型方法，你必须在派生类中实现完全一样的方法：

```
public class ClassA : IDeepClonable 
{ 
    void DeepClone<T>(T other) { /* some implementation here */ } 
} 
```

与此不同的东西是行不通的。

就是说，为什么需要这种复杂性，这里不需要泛型，只需实现为：

```
public interface IDeepClonable 
{ 
    void DeepClone(IDeepClonable other); 
} 

public class ClassA : IDeepClonable 
{ 
    void DeepClone(IDeepClonable other)
    {
         // just to be sure ....
         if (other is ClassA) 
         {
             var o = (ClassA)other;
             this.A = o.A; 
         }
    } 
} 
```

# python - 使用 Python 使用公钥和 cx_Oracle 进行身份验证

> ID：10485145
> 
> 赞同：6
> 
> 时间：2012-05-07T15:53:39.973
> 
> 标签：python, oracle, authentication, public-key-encryption, cx-oracle

我用谷歌搜索了一下，但没有找到任何实质性的结果。是否可以使用基于密钥的身份验证来使用 Python 连接到 Oracle 服务器？我的目标是能够自动化我使用 Python 进行的一些报告，而无需在服务器的任何位置存储用户名/密码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T17:49:57.310

一种可能的解决方案是实施 Oracle Wallet。创建 Oracle Wallet 条目涉及：

*   为所述实例建立的 tnsname 解析名称
*   用户名和密码

示例：我正在使用的 Oracle sid 名为 ORCL，我必须与之连接的用户名为 my_user。在您的 tnsnames.ora 文件中，您已经有一个解析 ORCL 服务名称/sid 的条目，使用完全相同的参数再创建一个：

```
#initial local name entry:
ORCL = (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = my_ip)(PORT = 1528))) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = ORCL)))

#create an additional local name entry:
ORCL_MY_USER = (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = my_ip)(PORT = 1528))) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = ORCL))) 
```

新条目成功解析后，为 ORCL_MY_USER 本地名称创建 oracle 钱包条目。您将在 python 脚本中使用这个新的本地名称进行连接，而无需在其中提供或硬编码密码。

例子：

> 导入 cx_Oracle
> 
> db = cx_Oracle.connect("/@ORCL_MY_USER")
> 
> 游标 = db.cursor()
> 
> r = cursor.execute("SELECT username, password, account_status, default_tablespace,temporary_tablespace from dba_users order by username")
> 
> 对于用户名、密码、account_status、default_tablespace、temporary_tablespace 在游标中：
> 
> ```
>  print username, '\t', password, '\t', account_status, '\t', default_tablespace, '\t', temporary_tablespace 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T15:25:44.630

是的，您必须在 sqlnet.ora 中指定 Oracle 钱包的位置。

```
WALLET_LOCATION = (SOURCE = (METHOD = FILE) (METHOD_DATA = (DIRECTORY = /u01/app/oracle/product/11.2.0.2/dbhome_1/owm/wallets/oracle)))
SQLNET.WALLET_OVERRIDE = TRUE
SSL_CLIENT_AUTHENTICATION = FALSE
SSL_VERSION = 0 
```

据我了解，Oracle 钱包默认位置在 $ORACLE_HOME/owm/wallets/ 下。

# java - 使用 java.util.zip 压缩得到解压缩膨胀错误

> ID：10485151
> 
> 赞同：0
> 
> 时间：2012-05-07T15:53:59.217
> 
> 标签：java, zip, unzip

我递归地压缩了一个文件夹。当我尝试使用命令行解压缩文件夹时，出现膨胀错误。我不明白为什么。要压缩文件，我几乎已经这样做了： [http ://www.roseindia.net/java/example/java/io/ZipFolderExample.shtml](http://www.roseindia.net/java/example/java/io/ZipFolderExample.shtml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:17:24.610

文件有多大？如果它大于 2GB（我认为）旧的 JDK 将失败。我认为“旧”是更早的 1.5 版本。

# iphone - 测试 iphone app review 的用户名和密码

> ID：10485155
> 
> 赞同：0
> 
> 时间：2012-05-07T15:54:10.517
> 
> 标签：iphone

我的应用程序有这个需要登录的屏幕，我应该为审阅者发表评论并提供一个测试帐户吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:55:28.683

是的，创建一个测试帐户。他们需要访问所有功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:46:46.763

如果您不提供测试帐户，他们会将审核退回给您并要求提供凭据，因此这不仅仅是建议，而是要求。

# python - 带有 utf-8 字符串的 re.sub 的奇怪行为

> ID：10485157
> 
> 赞同：6
> 
> 时间：2012-05-07T15:54:15.610
> 
> 标签：python, regex, encoding

谁能解释我这种奇怪的行为？我希望这两种替换方法都可以同时工作或不工作。是只有我还是有人觉得这不连贯？

```
>>> u'è'.replace("\xe0","")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe0 in position 0: ordinal not in range(128)
>>> re.sub(u'è','\xe0','',flags=re.UNICODE)
'' 
```

（请注意，我并不是要解释为什么 u'è'.replace("\xe0","") 会引发错误！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:40:22.703

来自[Unicode 文档](http://docs.python.org/howto/unicode.html)

> 这些方法的参数可以是 Unicode 字符串或 8 位字符串。8位字符串在执行操作前会转换为Unicode；将使用 Python 的默认 ASCII 编码，因此大于 127 的字符会导致异常

来自[Re Doc](http://docs.python.org/library/re.html)：

> 该模块提供类似于 Perl 中的正则表达式匹配操作。要搜索的模式和字符串都可以是 Unicode 字符串以及 8 位字符串。

由于对于 Re 模块，您没有明确指定 Unicode 标志，因此它没有尝试转换，因此不会引发错误。这就是为什么他们的行为不一致

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-26T00:27:18.087

Python 2.X 对编码的处理有点不自然，它需要隐式转换。当用户不负责转换时，它将尝试使用 unicode 和非 unicode 字符串。最后，这并不能解决问题：开发人员必须从一开始就确认编码。Python 2 只是让事情变得不那么明确和不那么明显。

```
>>> u'è'.replace(u"\xe0", u"")
u'\xe8' 
```

那是你原来的例子，除了，我特别告诉 Python 所有字符串都是 unicode。如果你不这样做，Python 会尝试转换它们。而且因为 Python 2 中的默认编码是 ASCII，所以这显然会在您的示例中失败。

编码是一个棘手的主题，但有一些好的习惯（比如早期转换，总是确定程序在给定点处理什么类型的数据），它通常（我坚持，通常）进展顺利。

希望有帮助！

# javascript - 将 javascript 方法功能分组到 javascript“类”中

> ID：10485161
> 
> 赞同：1
> 
> 时间：2012-05-07T15:54:32.423
> 
> 标签：javascript, ajax, class

是的，我知道 JavaScript 本身没有“类”，所以我将把它放在前面并继续前进。

我有一个应用程序，它的左侧边栏列出了一堆标签。我通过 JavaScript 和 AJAX 操作这些标签来添加、删除和更新标签。

当我当前操作标签时，它的效果是（注意这段代码是我正在做的事情的简化版本，但传达了这一点；另外，我正在使用 jQuery 库）：

```
# HTML page...
<div id="tags">
  <div class="tag" id="tag_1">tag text</div>
  <div class="tag" id="tag_2">tag text</div>
  <div class="tag" id="tag_3">tag text</div>
  ...
</div>

# Javascript to create new tag
$("#tags").append("<div class='tag' id='tag_15'>text</div>")

# update a tag
$("#tag_10").replace("<div class='tag' id='tag_10'>updated tag</div>")

# remove a tag
$("#tag_10").remove() 
```

附带说明一下，我使用的是 Rails 框架，并且一些 JS 是通过 js.erb 文件在服务器上创建的，然后发送回客户端进行评估。我知道服务器生成 JS 的一些问题，但在这种情况下没关系。

所以我决定我应该把这个功能组合成一个 JavaScript “类”来控制我页面上的标签。

问题是我有一个标签侧边栏，所以我不需要多个标签对象......我只需要一堆命名方法，让我能够以有序的方式操作页面上的标签。

我希望能够执行以下操作：

```
Tag.append({ text: "tag text", id: <id of tag> }) => the append functionality above
Tag.update(<id to update>, { <hash of options> })
Tag.remove(<id of tag to remove>) 
```

我不明白如何使用 JavaScript 实现此功能。

我的想法是这样的：

```
# "class" definition
function Tag() {
  var methods = {
    init : function() { ... }

    append : function(options) {
      var element = <...build DIV element...>;
      $("#tags").append(element);
    }

    remove : function(domid) {
      $(domid).remove();
    }
  }
}

# usage
var tag = Tag.new()
tag.remove("tag_10")
... 
```

但是，如果我这样做，是否`var tag = Tag.new()`每次我想引用 Tag 类时都必须创建一个新的（因为我通过服务器发回一些代码）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T15:57:29.680

```
var Tag = {};

Tag.something = function(param) {
/// blah blah blha
}; 
```

应该管用。这将创建一个`Tag`命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:21:52.197

另一种选择是将您的函数分组为一个 jQuery 插件，返回一个具有可链接实用程序函数的对象：

```
$.fn.tags = function() {
  var tagContainer = this;
  var tags = {
    append : function(options) {
      var element = <...build DIV element...>;
      tagContainer.append(element);
      return tags;
    },
    replace: function () {
      <...do stuffs here...>
      return tags;
    },
    remove : function(domid) {
      $(domid, tagContainer).remove();
      return tags;
    }
  }
  return tags;
}

$('#tags').tags().append({text: 'foo', id: 'bar'}).remove('#tag_10'); 
```

# java - 在哪里可以找到 JSR 223 TCK

> ID：10485162
> 
> 赞同：1
> 
> 时间：2012-05-07T15:54:36.747
> 
> 标签：java, sun, jsr223

我正在寻找一个地方来查找（下载链接左右）JSR 223 规范的 TCK。这是针对在 Apache 2 许可下发布的项目。（实际上我想要源代码+TCK的二进制文件让我很好地理解规范，即使是源代码也足够最坏的情况）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:41:16.020

许多 TCK 是专有项目，只能通过许可获得~~太阳~~甲骨文。你不能只下载它们。在 Apache，那些具有 TCK 访问权限的项目将它们保存在受限制的位置，并且只提供给愿意签署 NDA 的人。

# javascript - 硒。无法点击元素？

> ID：10485166
> 
> 赞同：0
> 
> 时间：2012-05-07T15:55:02.810
> 
> 标签：javascript, selenium

尝试单击单选按钮时出现以下错误： **无法单击元素**。
我的代码是：

```
public static IWebDriver WebDriver = new InternetExplorerDriver();    
var radioButton = WebDriver.FindElement(By.XPath("//input[@name='" + 
elementName + "' and @value='" + value + "']"));
radioButton.Click();
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:00:31.317

value 和 elementName 是什么？

尝试使用众多 Firefox XPath 扩展之一来验证您的 XPath。

# python - python为string.Method创建方法对象

> ID：10485167
> 
> 赞同：0
> 
> 时间：2012-05-07T15:55:05.357
> 
> 标签：python, jython

我有一个输出很多文本块的类，这取决于我希望它证明文本右/左/中心的初始参数。我想知道是否可以使用方法对象（http://docs.python.org/py3k/tutorial/classes.html#method-objects）而不是像这样的函数

```
class textOutput(object):
    def __init__(self):
        self.justification = "left"

    def justify(self,text):
        if self.justification == "right":
            return text.rjust(self._width)
        elif self.justification == "center":
            return text.center(self._width)
        else:
            return text.ljust(self._width)

    def output(self):
        for i in range(1 to 1000000):
            print self.justify(i) 
```

我想使用这样的函数对象（替换上面的 justify 方法）

```
class textOutput(object):
    def __init__(self):
        self.justify = string.ljust

    def output(self):
        for i in range(1 to 1000000):
            print self.justify(i,self._width)

    def setJustification(self, justification):
        if justification == "right":
            self.justify = string.rjust
        elif justification == "center":
            self.justify = string.center
        else:
            self.justify = string.ljust 
```

但是我不知道我得到了字符串数据类型成员的函数对象。

我怎样才能实现后者？（前者有太多不必要的不​​利于性能的检查）

ps：我必须使用基本上是python 2.5的jython

pps：然后将使用以下类方法完成对正切换：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:33:15.837

你可以做

```
import string 
```

在文件的开头，或使用

```
str.ljust
str.rjust
str.center 
```

而不是`string`. 此外，您不会调用`setJustification`当前代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:50:18.807

我希望你看过 getattr 方法来从字符串中获取函数对象。您的代码中的以下行应该让您的东西正常工作

```
{ self.justify = getattr(' ', 'ljust', None)} 
```

# css - CSS：修复 dt-dd 边距

> ID：10485169
> 
> 赞同：1
> 
> 时间：2012-05-07T15:55:07.157
> 
> 标签：css, margin

当我将**dt**和他的**dd**元素放在一行中时：

```
display: inline-block;
margin: 0px; 
```

这两者之间仍然会有一点差距。我发现的一个解决方案是：

```
margin-left: -4px; 
```

但是就没有更好的解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:57:33.130

是的，空格是因为内**联**块是内联流的一部分，这意味着任何换行都会导致空格。有几种解决方案：

*   删除两个元素之间的换行符。
*   设置`font-size: 0`在一些共同的父母身上。
*   使用浮点数而不是内联块

**[这是一篇关于这个主题的好文章。](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)**

# pointers - 我们需要指针吗？

> ID：10485181
> 
> 赞同：4
> 
> 时间：2012-05-07T15:55:50.167
> 
> 标签：pointers

是否有任何情况或特定示例需要我们为工作提供指针？即可以在不使用指针的情况下完成需要指针的事情吗？我们可以将指针作为函数参数发送，但这可以通过返回的数据来完成。我们可以使用指针来更改函数中的多个变量，但也有一种解决方法。

我们真的需要指针吗？

我知道这是一个愚蠢的问题，对不起，但在这种情况下对我来说似乎是正确的，我只是想知道是否有一些我们不能使用指针做的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T16:16:48.863

在高级语言范式的设计中可以避免使用指针（以 java 为例），但它们往往会再次出现在该语言声称提供的功能的实际实际实现中。

除非您使用某种动态重新配置的 FPGA 架构、状态机群或与您的计算机类似的想法，否则实际的计算机器并不是非常面向对象的。我们不在存储设备中执行操作，而是获取数据，对其进行计算，然后将其写回。为了在内存中查找数据，我们使用地址的概念（有些东西称为内容可寻址内存，但对于大多数用途而言，它们并不可取）。一旦你决定你的数据（或函数体，或包含两者的结构）在内存中的某个地址，你必须弄清楚你将如何处理这个地址。您可以将地址写入另一个内存位置，我们有最熟悉的指针概念。您可以将地址存储在堆栈中，但那 s 只是相对于称为“堆栈指针”的寄存器的存储。或者您可以将地址存储在寄存器或指令字中。

但是，如果您查看指令字的实际格式，对于非平凡的处理器，“寄存器”实际上是称为寄存器文件的特殊片上存储器中的编号位置。RISC 对它们进行编号的传统使得这一点特别明显，但即使在命名寄存器的汇编语言方案中也是如此 - MOV 或任何指令将有几个位确定指令的类型和格式，以及编码寄存器的几个位每个操作数的编号。因此，寄存器间接寻址在技术上是一个存储地址的内存位置，即一个指针。相似地，

结论：您可以对高级程序员隐藏指针，但只要您的实现基于

（可寻址数据存储器/寄存器文件）<-> CPU -<->（可寻址程序存储器）

计算的想法，你无法在实现层面避免它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:12:52.867

我们*需要*高级语言的指针吗？在严格的图灵机意义上，不。然而，实际上，我们不是用图灵机编码——我们用高级语言编码，开发人员需要某些结构来减轻编写代码的脑力工作量。指针使某些抽象（例如链表）更容易表达。因此，虽然在对“需要”这个词的最严格解释中，答案可能是否定的，但在实践中，答案是肯定的，我们确实需要它们。

请阅读 StackOverflow 常见问题解答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T16:16:59.670

我认为指针可以用作（有效的）数组*迭代器非常有用。*

例如（C99）：

```
ptrdiff_t stride = 8;
double* data = ...;
size_t size = ...;
const double* end = data + size * stride;

for (double* restrict p = data; p < end; p += stride)
    *p = ...; 
```

您可以看到指针算法对于表达意图非常有用。能够传递指针 + 跨步来表示子数组也很有用。

一些语言不允许使用指针来操作数据（但允许引用），尽管在这些语言中，我从未对它们允许您编写作用于数组的函数的方式感到满意。在 C 中，您编写例如。

```
void foo(const double* data, ptrdiff_t stride, size_t size, double* out); 
```

在 C# 中你会写

```
void Foo(double[] data, int stride, double[] output); 
```

但现在`output`被迫成为一个完整的数组，而不是其他东西的子数组，或者在一个元素输出的情况下是一个普通的堆栈变量（如果你真的想要，C# 提供了指针，但让我们假装它没有）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T16:23:20.020

指针的功能是引用的超集。你可以用引用做的所有事情都可以用指针做。指针是比引用更强大的工具，这就是 C 语言使用指针的原因。它是一种低级的强大语言。

> 是否有任何情况或具体示例需要我们为工作提供指针

是的，例如指针算术。

```
//copy string to a buffer
char buffer[1024];
strcpy(buffer, "hello ");  
strcpy(buffer + 6, "world!"); 
```

> 可以在不使用指针的情况下完成需要指针的事情吗？

当然，您想将一个大对象传递给一个方法。您可以传递指向它的指针，而不是复制它，但传递引用可能会更好。

```
void foo(Object const& o); // <- this one is prefered
void foo(Object *o); 
```

这是一组如何将对象传递给[函数](https://stackoverflow.com/questions/2139224/how-to-pass-objects-to-functions-in-c)的规则。

> 我们可以将指针作为函数参数发送，但这可以通过返回的数据来完成吗？

可以办到。返回指针的问题是“指针指向的存储位置是什么？”。[返回局部变量是一个危险的想法](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope/6445794#6445794)。[（C++ 11 用移动语义](https://stackoverflow.com/questions/3413470/what-is-stdmove)解决了这个问题）

> 我们可以使用指针来更改函数中的多个变量，但也有一种解决方法

对不起，但我不明白这一点。

> 我们真的需要指针吗？

是的，我们有。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-14T14:15:55.693

您需要在许多情况下使用指针，尤其是在考虑内存消耗和程序时间时，例如，当要将大数组传递给不修改它的子程序时，可能首选单向方法。但是，将数组传递给函数将需要将整个数组移动到子程序的本地存储区域。这在时间和空间上都是昂贵的。因为这个大数组通常是通过引用传递的。

# c++ - 在c ++中向/从二进制文件写入/读取结构

> ID：10485182
> 
> 赞同：2
> 
> 时间：2012-05-07T15:55:52.187
> 
> 标签：c++, serialization, binary, structure, ifstream

我正在构建一个数据库工具，我想做的就是将一个结构写入二进制文件，然后再次读取它。以下是我在网上能找到的最接近的方法，但它存在重大问题：

```
#include <fstream>
#include <iostream>
#include <vector>
#include <string.h>

using namespace std;

typedef struct student
{
    char name[10];
    int age;
    vector<int> grades;
}student_t;

int main()
{
    student_t apprentice[3];  
    strcpy(apprentice[0].name, "john");
    apprentice[0].age = 21;
    apprentice[0].grades.push_back(1);
    apprentice[0].grades.push_back(3);
    apprentice[0].grades.push_back(5);    

    strcpy(apprentice[1].name, "jerry");
    apprentice[1].age = 22;
    apprentice[1].grades.push_back(2);
    apprentice[1].grades.push_back(4);
    apprentice[1].grades.push_back(6);

    strcpy(apprentice[2].name, "jimmy");
    apprentice[2].age = 23;
    apprentice[2].grades.push_back(8);
    apprentice[2].grades.push_back(9);
    apprentice[2].grades.push_back(10);

    // Serializing struct to student.data
    ofstream output_file("students.data", ios::binary);
    output_file.write((char*)&apprentice, sizeof(apprentice));
    output_file.close();

    // Reading from it
    ifstream input_file("students.data", ios::binary);
    student_t master[3];
    input_file.read((char*)&master, sizeof(master));   

    apprentice[0].grades[0]=100; // ALTERING THE INPUT STRUCTURE AFTER WRITE

    for (size_t idx = 0; idx < 3; idx++)
    {
        // If you wanted to search for specific records, 
        // you should do it here! if (idx == 2) ...

        cout << "Record #" << idx << endl;
        cout << "Name: " << master[idx].name << endl;
        cout << "Age: " << master[idx].age << endl;
        cout << "Grades: " << endl;
        for (size_t i = 0; i < master[idx].grades.size(); i++)
           cout << master[idx].grades[i] << " ";
        cout << endl << endl;
    }

    return 0;
} 
```

这似乎是在写入文件，将其读回然后打印到屏幕上，但不幸的是：首先，程序在尝试关闭时因调试断言失败（dbgdel.cpp 第 52 行）而崩溃，其次，在写入后更改*输入*结构（正如我在示例中所做的那样）改变了所谓的读取结构。我猜正在发生的事情是不知何故“数据”和“inData”是同一件事（这可以解释崩溃，因为它会尝试从内存中删除同一件事两次）。谁能得到这个工作？我已经尝试了我能想到的一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:02:39.017

问题是您的结构是动态的（由于矢量）。这总是会使事情复杂化，因为您实际上是在存储一个 char *。向量是一个复杂的数据结构。您不能只将其屏蔽为 char * 并期望它代表元素。所以你甚至没有存储你需要的东西。我建议您将矢量更改为类似`int grades[NO_OF_SUBJECTS]`. 那应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:18:46.187

正如其他人指出的那样，`vector`它更像是一个指针，所以`sizeof`不起作用。您要么必须使用具有固定成绩数的静态 C 数组（`sizeof` *将*在那里工作），要么必须通过将 `grades.size() 写入每个学生的文件来序列化成绩数，然后编写每个年级。

然后，当您回读时，您将：

1.  读名字
2.  读懂年龄
3.  读年级数
4.  知道要阅读多少个年级，阅读每个年级并回推给您的学生

您还可以通过 null 终止和沿着读取字符微动直到您点击 '\0' 来允许可变大小的名称，或者您可以序列化名称长度并如上所述读取它。

这比你上面的更乏味。但是你用灵活性换取了复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:40:08.450

你需要知道的事情：

你对向量所做的`push_back`s 不会增加 sizeof(apprentice)。向量不是线性嵌套在结构内，向量在内部分配内存。您可以将矢量对象（以及许多其他 STL 容器对象）视为指针之类的东西。

您需要使用*恒定大小的*数组而不是向量。

`push_back`或者，您可以将每个矢量组件转储到文件中，并在您读回它们时用 s 解析它们。

# javascript - 未命名函数 JavaScript 的递归函数调用

> ID：10485187
> 
> 赞同：1
> 
> 时间：2012-05-07T15:56:25.400
> 
> 标签：javascript, recursion

我在 JavaScript 中搜索了递归调用，但我想对“未命名”函数进行递归调用。

我使用谷歌找到的结果是这样的

```
function foo() {
   setTimeout("foo()",0);
} 
```

但我想做一些像这样的东西：

```
(function () { alert(this.function) })() 
```

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T15:57:45.737

如果您不在，`strict mode`您可以使用 获取函数对象`arguments.callee`，请参阅[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments/callee)文档。例如

```
(function () { 
    console.log(typeof arguments.callee); // "function"
    arguments.callee(); // call to itself
})(); 
```

但正如那里所建议的那样，您应该避免使用此语句并为函数提供标识符，就像这样

```
(function foo() { 
    foo(); // call to itself
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:12:12.490

你不应该使用 .callee

您只需命名函数，该函数仅在内部范围内可用

```
setTimeout(function namedFn(x) { 

  // namedFn() exists in here only (see notes below)
  console.log('hello there ' + x);

  if (!x || x < 10) { 
    namedFn(1 + x || 1);
  } 

}, 5000);

// namedFn() is undefined out here **(except for IE <= 8)** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:05:58.860

基本上，您正在寻找一种叫做 Y-Combinator 的东西（或者正如维基百科所说的[Fixed Point Combinator](http://en.wikipedia.org/wiki/Fixed-point_combinator)）。

这篇博文似乎给了很好的介绍（只是略读了一下，不知道能不能全部解释清楚……）

[http://blog.jcoglan.com/2008/01/10/deriving-the-y-combinator/](http://blog.jcoglan.com/2008/01/10/deriving-the-y-combinator/)

```
var Y = function(f) {
  return (function(g) {
    return g(g);
  })(function(h) {
    return function() {
      return f(h(h)).apply(null, arguments);
    };
  });
};
var factorial = Y(function(recurse) {
  return function(x) {
    return x == 0 ? 1 : x * recurse(x-1);
  };
});

factorial(5)  // -> 120 
```

编辑：我从文章中偷了它，我不得不承认，我觉得这真的很混乱，Y 可能读起来更好

```
var Y = function(f) {
    var c1 = function(g) {
        return g(g);
    };
    var c2 = function(h) {
        return function() {
            return f(h(h)).apply(null, arguments);
        };
    }
    return c1(c2);
}; 
```

从外观上看，我不确定它是否应该如此简单。在 javascript 中定义定点组合器的最大缺点是您需要某种惰性求值，以便您的函数不会无限递归。在发布简化版本之前，我必须考虑一下和/或重新阅读这篇文章。当然，我不确定这样的事情会对你有多大帮助，尤其是在性能方面。最容易理解（也许性能更高）的解决方案可能是像其他人建议的那样创建匿名块，正常定义函数并从块中返回它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T16:05:59.853

将函数作为值传递时，可以使用函数名称：

```
setTimeout(function foo() { alert(foo); }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T15:59:48.433

据我所知，你不能。您必须有一个引用（名称或变量）才能将其回调。

虽有[`arguments.callee`](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments/callee)但气馁

> 注意：你应该避免使用 arguments.callee() 并且只给每个函数（表达式）一个名字。

# java - 包含 JCheckBoxes 的 JTable 的关键侦听器

> ID：10485189
> 
> 赞同：1
> 
> 时间：2012-05-07T15:56:29.573
> 
> 标签：java, swing, combobox, jtable, keylistener

我有一个包含复选框的 JTable。我的应用程序的构建方式是，每当编辑任何条目时，背景都会发生变化，以显示条目处于编辑状态。我已经用鼠标设置了它，但是当添加一个 KeyListener 来捕捉键盘上按下空格时，keyReleased 方法仅在 Space 被按住更长时间时触发，并且复选框快速选择和取消选择。

当我使用 keyTyped 和 keyPressed 方法时，一切都很好，只是它落后了一步，因为输入到表中的新数据没有被捕获。

所以，我的问题是我怎样才能在桌子上按下空间时捕捉并收集桌子的所有当前值？

我正在使用 MVC 架构；这是我的控制：

```
public class UserInternalFrameController {

    UserInternalFrame gui = new UserInternalFrame();

    public UserInternalFrameController(ManagementGUI mainGui) {
        gui.getTableUserTransactionPermissions().addKeyListener(new KeyListener() {

            @Override
            public void keyTyped(KeyEvent e) {
                System.out.println("typed");
                // TODO Auto-generated method stub
                if (e.getKeyChar() == ' ') {
                    if (stateMachine == 2 || stateMachine == 4) {
                        JTable permTable = gui.getTableUserTransactionPermissions();
                        int noOfColumns = gui.getUserTransactionPermissionsHeader().length;
                        permListEdit = false;
                        for (int i = 0; i < permList.length; i++) {
                            for (int j = 0; j < noOfColumns; j++) {
                                if (!permList[i][j].equals(permTable.getValueAt(i, j))) {
                                    System.out.println("row" + i + "; column" + j + "; perList:" + permList[i][j] + "; transList: " + permTable.getValueAt(i, j));
                                    permListEdit = true;
                                }
                            }
                        }
                        if ((employeeCodeEdit || usernameEdit || passwordEdit || userIdEdit || subjectIdEdit || userStatusEdit || userRoleEdit || permListEdit) == false) {
                            gui.getPanelUser().setBackground(defaultBackgroundPanelUser);
                            gui.getTableUserTransactionPermissions().setBackground(Color.WHITE);
                            stateMachine = 2;
                            gui.getBtnSave().setEnabled(false);
                        } else {
                            gui.getPanelUser().setBackground(Color.decode("#f5deb3"));
                            gui.getTableUserTransactionPermissions().setBackground(Color.decode("#f5deb3"));
                            stateMachine = 4;
                            gui.getBtnSave().setEnabled(true);
                        }
                    }
                }
            }
        });
    }
} 
```

相同的代码块可以很好地与鼠标 actionListener 配合使用，并且在添加到 keyPressed 方法时具有相同的延迟效果。keyReleased 似乎适用于除空格以外的所有其他按钮。

我的键盘很好。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T01:42:52.017

如本[示例](https://stackoverflow.com/a/4528604/230513)所示，并在本[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)中讨论，类型表列的默认渲染器和编辑器`Boolean.class`是`JCheckBox`. 复选框的默认鼠标处理程序正常工作，默认[*键绑定*](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)是`space`键。该`UIManager`属性`Table.selectionBackground` 将以设计者首选和用户期望的方式突出显示选定的单元格。

我鼓励您放弃显示的方法并使用默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:48:24.527

这个问题的答案相当简单。新手错误。这是我如何更新数据检索表的片段（来自 MVC 模式的控制器；gui 是视图实例）。

```
// update tableUserSearchResult
gui.setUserSearchTableData(tempList); 
gui.setUserSearchResultTableModel(new DefaultTableModel(
    gui.getUserSearchTableData(), gui.getUserSearchTableHeader()));
gui.getTableUserSearchResult().setModel(gui.getUserSearchResultTableModel()); 
```

我真的不知道为什么创建新`DefaultTableModel`实例会导致此错误，因为我将表的模型定义并设置为新实例。我想那...

但是，通过使用 的`setDataVector`方法`DefaultTableModel`，我能够`DefaultTableModel`正确更新（不创建）一个新实例，并且它工作得很好：

```
gui.setUserRolePermissionsData(userRolePermissionList);
gui.getUserRolePermissionsTableModel().setDataVector(
    gui.getUserRolePermissionsData(), gui.getUserRolePermissionsHeader());
gui.getTableUserRolePermissions().setModel(gui.getUserRolePermissionsTableModel()); 
```

这就是我在视图中声明对象的方式：

```
public class UserRoleInternalFrame extends JInternalFrame {
DefaultTableModel userRoleDocumentsPermissionsTableModel;
    Object [][] userRoleDocumentsPermissionsData;
    String[] userRoleDocumentsPermissionsHeader = {
        "Document", "Edit", "View", "Process", "Update"
    };
    private JTable tableDocumentPermissions;
    private JScrollPane scrollPaneDocumentPermissions;

...

this.userRolePermissionsTableModel = new DefaultTableModel(
    this.userRolePermissionsData, this.userRolePermissionsHeader);
tableUserRolePermissions = new JTable(this.userRolePermissionsTableModel){
    @Override // in order to render JCheckBox
    public Class getColumnClass(int c) {
        if (c == 1 || c == 2 || c == 3 || c == 4){
            return Boolean.class;
        } else {
            return String.class;
        }
    }
};

scrollPaneEntryTypePermissions.setColumnHeaderView(tableUserRolePermissions);
    scrollPaneEntryTypePermissions.setViewportView(tableUserRolePermissions); 
```

# java - 元素 eElement = (元素) nNode; 崩溃的应用程序

> ID：10485190
> 
> 赞同：2
> 
> 时间：2012-05-07T15:56:30.723
> 
> 标签：java, android, xml

我对 Java 很陌生，所以我希望这是一个简单的问题。

我正在尝试读入并解析一个 XML 文件。我遵循了一些教程，所有教程都显示了这一行（变量名称不同，但概念相同）：

```
Element eElement = (Element) nNode; 
```

一旦我到达这条线并运行它，我的应用程序就会崩溃。我相信它应该采用节点项并将其转换为元素：

```
System.out.println("Root element :" + myDoc.getDocumentElement().getNodeName());
NodeList nList = myDoc.getElementsByTagName("title");
System.out.println("----------------------");

for(int temp = 0; temp < nList.getLength(); temp++) {

    Node nNode = nList.item(temp);
    if(nNode.getNodeType() == Node.ELEMENT_NODE) {

        Element eElement = (Element) nNode;

    }
} 
```

**日志猫：**

```
05-03 02:12:20.865: I/System.out(9424): Root element :rss
05-03 02:12:20.865: I/System.out(9424): ----------------------
05-03 02:12:20.875: W/System.err(9424): java.lang.ClassCastException: org.apache.harmony.xml.dom.ElementImpl
05-03 02:12:20.875: W/System.err(9424):     at com.sltrib.test.Main.onCreate(Main.java:68)
05-03 02:12:20.875: W/System.err(9424):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-03 02:12:20.875: W/System.err(9424):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
05-03 02:12:20.875: W/System.err(9424):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-03 02:12:20.875: W/System.err(9424):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-03 02:12:20.875: W/System.err(9424):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-03 02:12:20.875: W/System.err(9424):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-03 02:12:20.875: W/System.err(9424):     at android.os.Looper.loop(Looper.java:123)
05-03 02:12:20.875: W/System.err(9424):     at android.app.ActivityThread.main(ActivityThread.java:3683)
05-03 02:12:20.875: W/System.err(9424):     at java.lang.reflect.Method.invokeNative(Native Method)
05-03 02:12:20.875: W/System.err(9424):     at java.lang.reflect.Method.invoke(Method.java:507)
05-03 02:12:20.875: W/System.err(9424):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-03 02:12:20.875: W/System.err(9424):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-03 02:12:20.875: W/System.err(9424):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:06:02.743

我猜你导入了一个 Element 类，但来自不同的包（即不是`org.w3c.dom.Element`，而是另一个包中名为 Element 的另一个类）。

检查您的导入语句。

请注意，导致异常的指令是*强制转换*。它不会转换投射的对象。相反，它需要对 Node 类型的对象的引用，并使其成为 Element 类型的引用。被投射的对象不受此操作的影响。只有当对象确实是元素类型时，操作才能成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:13:35.323

您可以`nNode.getClass().getName()`查找它是什么类型的对象。你也可以这样做`if(nNode instanceof Element)`，虽然不是最好的解决方案。

# tfs - 将 TFS 2010 层次结构中的所有分支转换为文件夹

> ID：10485195
> 
> 赞同：0
> 
> 时间：2012-05-07T15:56:49.510
> 
> 标签：tfs

我们最近从 TFS 2008 升级到 2010。升级器尝试“猜测”哪些文件夹应该是分支，哪些应该是分支文件夹。我们的结构中有一些嵌套分支的情况，升级程序猜错了。

我想将一些分支的层次结构重置回“分支文件夹”状态，然后在适当的位置手动应用“转换为分支”操作。但是，浏览每个文件夹的菜单并选择“转换为文件夹”（其中有很多）真的很乏味。

那么，有没有办法批量做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:22:28.420

[您可以使用TFS Powertools](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f/)中的 tfpt 工具编写批处理或 powershell 脚本，如此[处](https://stackoverflow.com/questions/3801539/tfs-2010-command-line-for-convert-to-branch)所述。

# xpages - 如何访问可编辑区域中的项目？

> ID：10485198
> 
> 赞同：0
> 
> 时间：2012-05-07T15:56:59.830
> 
> 标签：xpages

我想使用 SSJS 访问可编辑区域中的视图

我试过这样的东西

```
var callback1:com.ibm.xsp.component.xp.XspCallback = getComponent("callback1");
print(callback1.getChildren().get(0).getValue()) 
```

但唯一的结果是对象 ID。有机会获得整个对象吗？

我认为这很容易，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T03:46:10.400

可编辑区域的内容不是子项，它们是方面：

```
callback1.getFacet("facetName") 
```

将 facetName 替换为您在定义可编辑区域时命名的构面。如果上面的表达式返回 null 以外的任何内容，则可编辑区域有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:14:40.380

Afaik 回调点没有孩子。控件成为包含回调的控件的子级。您可以尝试 getParent （不确定这是否适用于回调）并从那里查看。如果一个控件只有一个回调，则其父级的子级是明确的。如果这一切都失败了，您可以将回调包装到面板中

# php - PHP：并行 cURL 性能 - RollingCurl 与 ParallelCurl

> ID：10485199
> 
> 赞同：2
> 
> 时间：2012-05-07T15:57:03.937
> 
> 标签：php, curl, parallel-processing, curl-multi

我有大量的 cURL 请求要处理。我发现有几个库可以帮助并行处理它们，主要的是 RollingCurl ( [http://code.google.com/p/rolling-curl/](http://code.google.com/p/rolling-curl/) ) 和 Parallel Curl ( [https://github.com/皮特沃登/平行卷曲](https://github.com/petewarden/ParallelCurl)）。

有没有人有使用这些库的经验，如果有，你知道哪个表现更好吗？

谢谢！

更新：对于以后可能偶然发现的任何人，如果您使用 Rolling Curl 的组功能，它在处理大量请求时似乎会中断（50k+）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:25:02.403

性能不是问题，因为它们都包含标准`but`功能

*   RollingCurl 支持组过程，您也可以使用简单的数组来实现

*   平行卷曲 i 轻微和直接向前 .. 带有可选的自定义`curl`选项

*   他们都支持回调

两者都很好，这取决于你的需要......

# c# - 如果默认值为 null 并转换为字符串会发生什么

> ID：10485201
> 
> 赞同：0
> 
> 时间：2012-05-07T15:57:06.450
> 
> 标签：c#

更具体地说，我有 DateTime？出生日期

我的问题是在这种情况下会发生什么：

```
lblBirthDate.Text = myObject.BirthDate.GetValueOrDefault().ToString(); 
```

如果 BirthDate 为空。我安装了 resharper，它并没有警告我那里可能有一个空问题......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T15:59:30.407

如果`BirthDate`是`null`，您将获得 的默认实例的本地化字符串表示形式`DateTime`。也就是说，您将获得 0001 年 1 月 1 日 00:00:00.0000000 的字符串表示形式。

您没有收到 ReSharper 的警告，因为那里没有 null 问题。调用. `Nullable<T>.GetValueOrDefault`_ `Nullable<T>`相反，如果您有一个空实例，您将获得默认值。这正是`GetValueOrDefault`意味着：获取`Value`if `HasValue`is `true`，否则获取底层结构类型的默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T16:01:10.453

我很确定在 null 的情况下`GetValueOrDefault`返回`DateTime.MinValue`。

以下是处理空值的几种方法：

```
DateTime? myNullDate = null;

DateTime myDate;
myDate = myNullDate ?? DateTime.Now; // myDate => DateTime.Now
myDate = myNullDate ?? default(DateTime); // myDate => DateTime.MinValue
myDate = myNullDate.GetValueOrDefault(DateTime.Now); // myDate => DateTime.Now
myDate = myNullDate.GetValueOrDefault(); // myDate => DateTime.MinValue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:05:33.597

Resharper 不会显示任何错误，因为 DateTime 的默认值为 1/1/1 00:00:00。您可以使用默认运算符获取任何类型的默认值：

```
DateTime defaultDateTime = default(DateTime); 
```

这个值与`DateTime.MinValue`

如果您需要使用空值，则必须将您的属性声明为可为空的：

```
DateTime? BirthDay { get; set; }; 
```

可为空的 DateTime`DateTime?`支持调用`ToString()`而不会出错，即使该值为 null，如果是，则给出一个空字符串。然后你不必担心空值。

使用可为空的 DateTime 比使用特殊值来表示缺失值更一致，例如`default(DateTime)`，即`DateTime.MinValue;`

# jsf - JSF t:dataList 在动作侦听器方法之前调用值的 getter

> ID：10485204
> 
> 赞同：0
> 
> 时间：2012-05-07T15:57:08.323
> 
> 标签：jsf, actionlistener, jsf-1.2

我有一个 JSF（1.2），其中包含以下内容：

```
<h:outputText rendered="#{fn:length(testBeanToDelete.names) gt 0}">
    <t:dataList value="#{testBeanToDelete.names}" var="name" rowIndexVar="index">
        <p>#{name}</p>
    </t:dataList>
</h:outputText>
<h:form id="test_form">
    <h:commandLink value="Filter" actionListener="#{testBeanToDelete.filter}"/>
</h:form> 
```

我的问题是，当我单击过滤器按钮时，会在事件方法过滤器之前调用 getNames() 方法。在 getNames() 方法中，我检查 name == null 是否，然后创建列表。

但是，如果调用过滤器方法来创建一个新的过滤列表（基本上我想从数据库中获取不同的过滤值），我想，但我不想调用数据库两次。

我怎样才能实现这个目标？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:17:19.407

在 JSF 生命周期中，要做的第一件事就是在恢复视图阶段重建页面。这里的重点是重建页面，就像它在最后一个请求中一样。这里调用 getNames()。

稍后，在呈现响应阶段的 JSF 生命周期结束时，将再次调用 getNames() 以获取新页面的值。

在恢复视图阶段避免数据库调用的唯一方法是保存您在上次请求中返回的 dataList 的集合。您的支持 bean 需要具有**高于请求的范围，否则您需要以某种方式在请求之间保存它们**。这不是微不足道的，如果处理不当可能会导致服务器过度使用 RAM 的问题，所以要小心。

你在使用特立尼达吗？然后解决方案可能是将数据列表的集合保存在[页面流范围内](http://myfaces.apache.org/trinidad/devguide/communicatingBetweenPages.html#pageFlowScope)。不过，请考虑避免该数据库调用是否值得所有这些。

# java - 如何在 Play 的 2.0 WebSocket 中验证用户身份？

> ID：10485205
> 
> 赞同：8
> 
> 时间：2012-05-07T15:57:08.467
> 
> 标签：java, authentication, playframework, websocket, playframework-2.0

你好

我有按预期工作的通用 Play WebSocket 方法，但我需要对用户进行身份验证。不幸的是，当尝试使用最简单的方法来识别该方法中的用户时：

```
public class Application extends Controller {
    public static WebSocket<JsonNode> connect() {
        return new WebSocket<JsonNode>() {

            @Override
            public void onReady(final WebSocket.In<JsonNode> in, final WebSocket.Out<JsonNode> out) {
                User logged = User.findByUsername(Http.Context.current().request().username());
                // ...
            }
        };
    }
} 
```

我收到一个错误：

```
java.lang.RuntimeException: There is no HTTP Context available from here. 
```

我目前的解决方法是传递随机的唯一标识符来查看并将其保存在用户模型中，然后我可以从视图连接到套接字并找到具有给定标识符的用户，但这并不完美，因为只能有一个 WebSocket 连接每个用户，也不能防止恶搞。

我应该如何对用户进行身份验证并防止欺骗攻击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:32:53.193

我不知道您的代码从哪里来，但是您应该能够在 Websocket 初始化（第一个连接）时访问 HTTP 请求，即您应该只有在启动 websocket 套接字连接时才能检查身份验证（后续调用将不会使用 HTTP，这是 Webscokets 的工作方式）。

例如，在你的控制器中，你可以有这样的东西：

```
public class Application extends Controller {

   public static WebSocket<JsonNode> connect() {

        Logger.info("Username from request = " + request().username());

        return new WebSocket<JsonNode>() {

            @Override
            public void onReady(final WebSocket.In<JsonNode> in, final WebSocket.Out<JsonNode> out) {
                // ....

            }

        };
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T01:06:42.837

您是否尝试过从 HTTP 会话中检索经过身份验证的用户 ID？在这一点上，上下文似乎是可用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T11:47:24.630

由于我要发送的数据很敏感，在这种情况下，安全性对我来说比性能更重要，最后我使用了两步消息，首先通过消息的 WebSocket id 和一些不重要的数据发送，然后通过 AJAX 和安全操作获取用户认证后的消息正文。

**问题仍未解决：**当然，如果有其他建议，我会改变我的投票:)

# android - 在Android中将表格布局分为2列

> ID：10485215
> 
> 赞同：0
> 
> 时间：2012-05-07T15:57:40.570
> 
> 标签：android, tablelayout

我已经尝试了将表格布局划分为 2 列或更多列的方法，但我不知道如何，有什么帮助吗？

```
<TableLayout
    android:id="@+id/exercisetableviewing"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_x="5dp"
    android:background="@layout/border"
    android:layout_y="289dp" >
</TableLayout> 
```

我使用以下方法在表中添加一行：

```
private void fillTable(TableLayout tableLayout, String[] items) {
    for (int i = 0; i < items.length; i++) {

        TextView itemText = new TextView(FillingActivity.this);
        itemText.setText(items[i]);
        TableRow row = new TableRow(FillingActivity.this);
        row.addView(itemText);
        if(i % 2 == 1)
            row.setBackgroundColor(color.LightGreen);

        tableLayout.addView(row);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:09:50.067

您应该为您的文本视图定义一个 xml，其中包含：

```
<TextView
    android:id="@+id/textView"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"/> 
```

“权重”属性用于表示所有文本视图将在行中使用相同的宽度。TableRow 扩展了 LinearLayout，因此您可以使用 LinearLayout 的属性。然后像这样在代码中扩展您的视图：

```
TextView itemText = LayoutInflater.from(FillingActivity.this).inflate(R.layout.my_text_item, null); 
```

现在，在您的代码中，您只需向 TableRow 添加一个 TextView。这是正常行为吗？您谈论两列，但您只在一行中添加一列...

# php - 使用 html5 多个属性在 Codeigniter 中上传多个文件

> ID：10485221
> 
> 赞同：1
> 
> 时间：2012-05-07T15:58:02.100
> 
> 标签：php, html, codeigniter, file-upload

我有以下html代码

```
<form action="form-handler.php" method="post" enctype="multipart/form-data">
    <div>
            <input id="myfile" name="myfile" type="file">
            <input value="Upload ►" type="submit">
    </div>
</form> 
```

我想一次上传多个文件。我应该在控制器中做什么才能在 codeigniter 中上传选定的文件？我尝试使用 Codeigniter 文件上传库，但它没有加载多个文件。虽然，对于 1 个文件，它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:55:06.027

您可以在 foreach 循环中调用 Codigniter 的 do_upload() 函数，该循环遍历您发布的文件数组`$_FILE`；

这是用于接收上传表单 POST 的控制器函数中的代码：

```
$this->load->library('upload');
$this->upload->initialize($config); //$config is array like as [in CI's documentation][1] 
$path='uploads/some_folder'; // refers to the root's uploads/some_folder folder
$upload_data = $this->upload->multiFileUpload($path, TRUE); 
```

**神奇之处**在于`multiFileUpload()`我从别人那里得到的功能。通过将 CI 的 Upload 库放在我的 /application/libraries 文件夹中的一个名为 MY_Upload.php 的文件中，此函数在 CI 的 Upload 库上进行了扩展。

这是 MY_Upload.php 的全部内容，它实际上只是一个函数，所以不要被吓倒，除了你想要文件去哪里`multiFileUpload()`之外，你不需要知道任何东西。`$path`

```
<?

class MY_Upload extends CI_Upload {

public function multiFileUpload($path, $protect = FALSE){

  /*
  * Declare uploaded_info and uploaded_files
  * when i'm sure $_FILES has some data
  */
 /* if($this->upload_path[strlen($this->upload_path)-1] != '/')
   $this->upload_path .= '/';*/

   //$this->upload_path=$path;

  if(isset($_FILES)){

   #Here we check if the path exists if not then create
   /*if(!file_exists($this->upload_path)){
    @mkdir($this->upload_path,0700,TRUE);
   }*/

    if(!file_exists($path)){
    @mkdir($path,0700,TRUE);
   }  
    $uploaded_info  = FALSE;
    /*
    * The structure of $_FILES changes a lot with the array name on the input file,
    * then i'm gonna modify $_FILES to make it think the data comes from several
    * input file instead of one "arrayfied" input.
    *
    * The several ways to upload files are controled with this if...else structure
    */
    if(count($_FILES) == 1)
    {
        $main_key = key($_FILES);
        if(is_array($_FILES[$main_key]['name']))
        {

            foreach($_FILES[$main_key] as $key => $value)
            {                

                for($y = 0; $y < count($value); $y++)
                {

                    $_FILES[$main_key .'-'. $y][$key] = $value[$y];

                }

            }

            unset($_FILES[$main_key]);

            $uploaded_files  = $_FILES;
        }
        else
        {
            $uploaded_files  = $_FILES;    
        }

    }
    else
    {
        $uploaded_files  = $_FILES;    
    }

   #Here we create the index file in each path's directory
   /*if($protect){
    $folder = '';
    foreach(explode('/',$this->upload_path)  as $f){

     $folder .= $f.'/';
     $text = "<?php echo 'Directory access is forbidden.'; ?>";

     if(!file_exists($folder.'index.php')){
      $index = $folder.'index.php'; 
      $Handle = fopen($index, 'w');
      fwrite($Handle, trim($text));
      fclose($Handle); 
     }
    }   
   }*/

   #Here we do the upload process

   foreach($uploaded_files as $file => $value){
    if (!$this->do_upload($file))
    {
     $uploaded_info['error'][]  =  array_merge($this->data(),
              array('error_msg' => $this->display_errors()));

    }
    else
    {
     $uploaded_info['upload_data'][] =  array_merge($this->data(),
              array('error_msg' => $this->display_errors()));
    }
   }  
  }

  #Then return what happened with the files
  return $uploaded_info;
 } 
} 
```

# wcf - 如何在代码中设置 WCF 错误消息返回格式？

> ID：10485222
> 
> 赞同：0
> 
> 时间：2012-05-07T15:58:06.313
> 
> 标签：wcf

我有这样的服务合同：

```
[WebGet(UriTemplate = "getdata?key={key}&format={format}")]
Event[] GetIncidentsXml(string key, string format); 
```

在代码中，我正在切换响应格式，如下所示：

```
var selectedFormat = ParseWebMessageFormat(format);
WebOperationContext.Current.OutgoingResponse.Format = selectedFormat; 
```

*（ParseWebMessageFormat 是一种封装 Enum 类型解析的方法）*

这部分按预期工作，我根据传递的参数获得 XML 或 JSON。

当我抛出异常时，它就会崩溃。如果传入的（API）密钥无效，我正在这样做：

```
var exception = new ServiceResponse
{
    State = "fail", 
    ErrorCode = new ErrorDetail { Code = "100", Msg = "Invalid Key" }
};

throw new WebProtocolException(HttpStatusCode.BadRequest, "Invalid Key.", exception, null); 
```

抛出异常时，返回类型*始终*为XML：

```
<ServiceResponse xmlns="http://schemas.datacontract.org/2004/07/IBI.ATIS.Web.ServiceExceptions" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <ErrorCode>
        <Code>100</Code>
        <Msg>Invalid Key</Msg>
    </ErrorCode>
    <State>fail</State>
</ServiceResponse> 
```

返回类型更改是服务方法中的第一行代码，因此在抛出异常之前发生。

我知道我可以根据请求格式将 WCF 设置为返回类型，但必须使用通过查询字符串传入的类型。

自动消息类型在配置中关闭：

```
<standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="false" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:06:23.070

因为您需要以某种方式指定默认响应格式。您看到的行为是标准的。您将需要查看特定的标头并确定响应格式应该是什么。然后，您可以实现一个请求拦截器来确定传出响应格式需要是什么。

因此，要回答您的问题，如果未提及或返回错误请求，您将需要坚持使用默认格式类型。与 SOAP 不同，REST 与其说是一种协议，不如说是一种范式。

更新：为了澄清起见。你可以做这样的事情。

```
[ServiceContract()]
public interface ICustomerService
{
   [OperationContract]
   [WebGet(UriTemplate ="?format={formatType}",BodyStyle = WebMessageBodyStyle.Bare)]
   IResponseMessage GetEmCustomers(string formatType);

}

public class CustomerService : ServiceBase
{
  IResponseMessage GetEmCustomers(string formatType)
  {
    try
    {
      var isValid  = base.validateformatspecification(formatType);// check to see if format is valid and supported
      if(!isValid) return base.RespondWithError(formatType,new Error {Msg= "Dude we dont support this format"});
      var customers = CustomerProvider.GetAll();
      return base.Respond(formatType,customer);// This method will format the customers in desired format,set correct status codes and respond.
    }catch(Exception ex)
    {
      // log stuff and do whatever you want
      return base.RespondWithError(formatType,new Error{Msg = "Aaah man! Sorry something blew up"});// This method will format the customers in desired format,set correct status codes and respond.

    }      
  }    
}

public class ServiceBase
{
  public IResponseMessage Respond<T>(string format,T entity);
  public IResponseMessage RespondWithError<T>(string format, T errorObject);

}

public class Error:IResponseMessage {/*Implementation*/}

public class GetEmCustomerResponseResource:List<Customer>,IResponseMessage {/* Implementation*/}

public class GetEmCustomerErrorResponse: IResponseMessage {/* Implementation   */} 
```

# ruby-on-rails - 使用 Active Admin 设置 has_many 过滤器

> ID：10485223
> 
> 赞同：3
> 
> 时间：2012-05-07T15:58:14.233
> 
> 标签：ruby-on-rails, ruby, activeadmin, meta-search

我试图简单地允许在 ActiveAdmin 的位置页面上过滤类别。

我有三个模型：

```
class Location < ActiveRecord::Base
  has_many :categories_locations
  has_many :categories, :through => :categories_locations

class CategoriesLocation < ActiveRecord::Base
    belongs_to :category
    belongs_to :location
end

class Category < ActiveRecord::Base
    has_many :categories_locations
    has_many :locations, :through => :categories_locations
end 
```

在我的位置页面上，我使用了这个过滤器：

```
ActiveAdmin.register Location do
  filter :name
  filter :category, :collection => proc { Category.all }, :as => :select 
```

但是，它不断抛出错误。

```
undefined method `category_eq' for #<MetaSearch::Searches::Location:0x007fd4f9b965d8> 
```

我试过过滤器：类别，过滤器：categories_locations，但没有任何效果。

有没有人经历过这个——有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-02-14T06:30:47.513

我也在寻找相同的解决方案，并找到了如下的工作解决方案。在这里发帖，以便将来对其他人有所帮助。

**应用程序/管理员/位置.rb**

```
ActiveAdmin.register Location do
  filter :filter_by_category, label: 'Category', as: :select, collection: Category.pluck(:name, :id) 
```

**应用程序/模型/位置.rb**

```
class Location < ActiveRecord::Base
  has_many :categories_locations
  has_many :categories, :through => :categories_locations

  def self.filter_by_category(category_id)
    category_id = 1 if category_id == true # this is required only for id=1, ActiveAdmin return it as `true`
    joins(:categories).where("categories.id = ?", category_id)
  end

  #  Add your custom method as ransack 
  def self.ransackable_scopes(_auth_object = nil)
    [:filter_by_category]
  end
end 
```

希望能帮助到你..！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:15:12.310

at some point has_many/through is more flexible than habtm (you can have additional fields etc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-07T09:17:25.260

可以在此处找到答案，前提是您可以在 sql 中编写很多内容！

[如何将自定义过滤器添加到 Active Admin？](https://stackoverflow.com/questions/7983654/how-to-add-custom-filter-to-active-admin)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-07T22:49:02.033

你为什么不使用habtm？

```
class Location < ActiveRecord::Base
  has_and_belongs_to_many :categories

class CategoriesLocation < ActiveRecord::Base
end

class Category < ActiveRecord::Base
    has_and_belongs_to_many :locations
end 
```

接着

```
ActiveAdmin.register Location do
  filter :name
  filter :category_id, :collection => proc { Category.all }, :as => :select 
```

# xml - WhiteHouse.gov 数据 - XML > DB

> ID：10485228
> 
> 赞同：1
> 
> 时间：2012-05-07T15:58:38.683
> 
> 标签：xml, database, visual-studio, ssis, dtd

我正在对美国政府的预算进行一些研究，并希望能够从其附录中提取每个机构的数据并将其加载到数据库中。附录位于此处[http://www.whitehouse.gov/omb/budget/Appendix/](http://www.whitehouse.gov/omb/budget/Appendix/)

我尝试通过 Visual Studio SSIS 读取 XML 文件，但它给了我一个错误，即没有 DTD 或架构可以这样做。还有所有机构及其预算的 .rar 文件 - 其中包括一些 DTD 文件等。

抱歉，我对此很陌生，不知道从哪里开始。作为一种解决方法，我正在考虑将 XML 转换为 CSV，然后将该文件导入 SSIS，就像我之前做过的那样。

非常感谢任何和所有建议和帮助！

# objective-c - 全局队列中的 NSOperation

> ID：10485229
> 
> 赞同：1
> 
> 时间：2012-05-07T15:58:39.103
> 
> 标签：objective-c, xcode, global, nsoperation, nsoperationqueue

我已经尝试了解我的代码有什么问题 2 天了。我希望你有一个想法？

我正在尝试将 NSOperationQueue 创建为“全局”队列，以允许我从该 viewController 中的任何方法添加操作。在我尝试在 .h 文件中定义队列以使其成为全局队列之前，我在最初需要它的方法中创建了它，并且能够添加操作。这运作良好。但是后来我想从原始方法之外检查队列内部是否有任何活动操作，我显然不能，因为我在方法内部声明了它。因此，我尝试使用以下代码在 .h 中声明它：

```
@property (strong, nonatomic) NSOperationQueue *queue; 
```

在 .m 的顶部：

```
@synthesize queue; 
```

这是我将操作添加到队列的代码。

```
NSInvocationOperation *doMorse = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(morse) object:nil];

[self.queue addOperation:doMorse]; 
```

问题是当我尝试添加操作时队列保持为空。（以前可以正常工作。）我是否声明了队列错误？顺便说一句，有没有比我尝试过的更好的解决方案可以通过任何方法访问队列？（在同一个 viewController 中（如果它可以从任何视图工作，那就太棒了:-)））。

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T20:09:01.987

您需要实际*创建*队列。您只需声明一个实例变量来存储队列。

在您的构造函数（init 方法）中，添加： `self.queue = [[NSOperationQueue alloc] init]`

如果它以前有效但不再有效，您可能开始调用另一个构造函数。我经常犯的一个错误是在我的自定义视图中在 initWithFrame: 中进行设置，然后从 nib 开始使用视图，这意味着将调用 initWithCoder:。

# javascript - 如何从嵌入式 svg 调用父 html 文档中的函数

> ID：10485232
> 
> 赞同：6
> 
> 时间：2012-05-07T15:58:50.977
> 
> 标签：javascript, svg, jquery-svg

我对 svg 很陌生，我必须用它执行一项任务，但我遇到了很多麻烦。

我有一个由路径定义的区域的 svg（例如地图）。

我的目标是触发 svg 外部的 onClick 函数来做一些事情（例如，通过 ajax 检索与所选区域相关的一些人员数据，并将它们显示在 html 页面中的 svg 之外）。

我不能做的是从 svg 中的元素触发在 svg 之外定义的函数。

如果我添加 svg 内联，我可以做到这一点，但我需要使用 embed 标签使其与 ie Adob​​e 插件一起使用。有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T13:03:21.187

请参阅[此示例](http://xn--dahlstrm-t4a.net/svg/html/from-svg-to-parent-html-script.html)。

svg 中的代码如下所示：

```
 document.getElementById("svgroot").addEventListener("click", 
                                                        sendClickToParentDocument,
                                                        false);

    function sendClickToParentDocument(evt)
    {
        // SVGElementInstance objects aren't normal DOM nodes, 
        // so fetch the corresponding 'use' element instead
        var target = evt.target;
        if(target.correspondingUseElement)
            target = target.correspondingUseElement;

        // call a method in the parent document if it exists
        if (window.parent.svgElementClicked)
            window.parent.svgElementClicked(target);
        else
            alert("You clicked '" + target.id + "' which is a " + target.nodeName + " element");
    } 
```

在父文档中，您有一个带有要调用的函数的脚本，例如：

```
function svgElementClicked(theElement)
{
    var s = document.getElementById("status");
    s.textContent = "A <" + theElement.nodeName + 
        "> element with id '" + theElement.id + 
        "' was clicked inside the <" + 
        theElement.ownerDocument.defaultView.frameElement.nodeName.toLowerCase() + 
        "> element.";
} 
```

# awk - AWK - 仅打印重复项

> ID：10485237
> 
> 赞同：2
> 
> 时间：2012-05-07T15:59:19.477
> 
> 标签：awk, getline

我有一个文件：

```
jeden
dwa
jeden
trzy
trzy
cztery
piec
jeden 
```

此命令打印出：

```
$ awk 'BEGIN {while ((getline < "file") > 0) if(a[$0]++) print }'
jeden
trzy
jeden 
```

我想打印所有重复的：

```
jeden
jeden
trzy
trzy
jeden 
```

**编辑：**

我找到了一个有效的例子。

```
awk '{if (x[$1]) { x_count[$1]++; print $0; if (x_count[$1] == 1) { print x[$1] } } x[$1] = $0}' file 
```

我也想做同样的事情，但使用 getline。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T00:00:21.423

```
awk 'BEGIN {while ((getline < "file") > 0) { a[$0]++; if(a[$0] == 2) print; if (a[$0] >= 2) print }}' 
```

当计数为 2 时，它会打印该行。当计数大于或等于 2 时，它会打印该行。因此，对于第二次出现，该行被打印两次以“赶上”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:27:37.157

您需要将所有行存储在内存中或再次通过文件。做第一个可能更容易，除非它是一个巨大的文件，否则你可能有它的内存。当然，您可以将其填充到一行中，但为了便于理解，这里将其作为一个文件。

```
#!/usr/bin/awk -f

{ 
        lines[NR] = $0
        counts[$0]++ 
}             

END { 
        for(i = 0; i < length(lines); i++) {
                if(counts[lines[i]] > 1) {
                        print lines[i]
                }       
        }       
} 
```

* * *

此外，您的原件会更简洁地写成这样：

```
$ awk 'a[$0]++' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:27:17.987

这可能对您有用：

```
awk '{a[$1]++}END{for(x in a)if(a[x]>1)for(i=1;i<=a[x];i++)print x}' file 
```

# java - Java - 将 URL 子域映射到子文件夹中的 Servlet

> ID：10485238
> 
> 赞同：0
> 
> 时间：2012-05-07T15:59:20.873
> 
> 标签：java, jsp, servlets

如何检测 url 中的子域，然后在基于该子域的子文件夹中运行 servlet。例如：如果我有一个域 example.com，它有一个注册的子域 blog.example.com（但它不指向不同的服务器）并且用户在地址栏中键入 url blog.example.com，如何我是否可以启动 servlet example.com/BlogServlet/ExamplePath，并将相关数据发送给用户，而无需更改/重定向到 servlet 的 url？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:06:17.403

您将不得不重新编写 URL。这会引发 cookie 路径、重定向的位置标头、页面中嵌入的链接等各种潜在问题。如果您受到影响，有多种方法可以解决这些问题。

回到如何去做。在 servlet 容器中，我会使用[http://www.tukey.org/urlrewrite/](http://www.tuckey.org/urlrewrite/)。在反向代理中，我将 httpd mod_rewritealong 与 mod_headers 和 mod_substitute 一起使用来解决问题。或者，可以使用 mod_proxy 代替 mod_rewrite。

# c - 静态数组和动态数组

> ID：10485239
> 
> 赞同：1
> 
> 时间：2012-05-07T15:59:28.150
> 
> 标签：c, arrays, pointers

```
char a[10];
scanf("%s",a);
int i=0;
while(a[i]!='\0')
     printf("\n%c",a[i++]);  //similar to printf("%s",a);               

char *b;
b=malloc(10*sizeof(char));
scanf("%s",b);
i=0;
while((b+i)!='\0')
     printf("\n%c",*(b+i++));   //not similar to printf("%s",a); 
```

对于输入“abcd”，第一个循环打印 a[] 与 printf() 一样。但对于 *b 来说，情况并非如此。

第二个循环持续了*太多*，直到遇到'\0'。

那么，这是否意味着 '\0' 会自动附加在字符串的末尾而不是 char 类型指针的末尾？

附加这个'\0'是谁的工作？编译器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T16:03:04.367

你忘了取消引用你得到的指针`b+i`。它应该是：

```
while (*(b + i) != '\0') // or while (b[i] != '\0') or while(b[i]) 
```

`b + i`只是给你一个地址，你必须取消引用它才能真正查看内存指向的内容，看看它是否是 NUL 终止符。该`x[y]`符号等价于`*(x + y)`。

也不要忘记`free`你分配的内存`malloc`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:20:14.833

取消引用问题。

在 (b+i) 行中，应替换为：

```
*(b+i) 
```

或者

```
b[i] 
```

此外，如果您只是接收字符串，您应该考虑使用 fgets() 而不是 scanf，因为它可以帮助您避免用户输入太多字符而导致程序崩溃。

最后，您可能会考虑使用 calloc() 而不是 malloc()，因为它会自动将您分配的数组的内容设置为全零而不是随机垃圾。

举个例子：

```
#include <stdio.h>
#define MAX_BUFFER_LENGTH
int main(void) {
  char a[MAX_BUFFER_LENGTH];
  char *b;
  fgets(a,MAX_BUFFER_LENGTH,stdin);
  int i=0;
  while(a[i]!='\0') {
     printf("\n%c",a[i++]);
  }

  b=calloc(MAX_BUFFER_LENGTH,sizeof(char));
  fgets(b,MAX_BUFFER_LENGTH,stdin);
  i=0;
  while(*(b+i)!='\0') {
    printf("\n%c",*(b+i++));
  }
  // Done
  return 0;
} 
```

这是解决您正在解决的问题的一种更安全的方法。

祝你好运！

# php - PHP中数组的集合理论联合

> ID：10485242
> 
> 赞同：37
> 
> 时间：2012-05-07T15:59:37.193
> 
> 标签：php, arrays

数学中有 3 种集合运算：交集、差集和并集（统一）。在 PHP 中，我们可以对数组执行此操作：

*   路口：`array_intersect`
*   不同之处：`array_diff`

**联合的作用是什么？**

结果数组中不能有重复项（如`array_intersect`和`array_diff`）。

如果索引是数字，则`array_merge`不会覆盖原始值，而是会附加（[PHP 文档](http://www.php.net/manual/en/function.array-merge.php)）。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-07T16:01:37.480

尝试`array_merge`：

```
array_unique(array_merge($array1, $array2)); 
```

[PHP 手册](http://us.php.net/manual/en/function.array-merge.php)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-07T16:01:27.747

`array_unique( array_merge( ... ) )`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-04-01T19:32:39.583

Adrien 的回答不需要从两个顺序编号的数组中生成顺序编号的数组 - 这里有一些选项可以：

```
array_values(array_unique(array_merge($array1, $array2))); 
```

（Adrien 的回答是随后重新编号）

```
array_keys(array_flip($array1)+array_flip($array2)) 
```

（将值放在键中，并使用数组联合运算符）

```
array_merge($array1, array_diff($array2, $array1)) 
```

（合并前从第二个数组中删除共享值）

基准测试结果（用于在我的系统上合并两个长度为 1000 的数组一千次）：

*   唯一（Adrien 的版本）：2.862163066864 秒
*   Values_Unique：3.12 秒
*   Keys_Flip：2.34 秒
*   Merge_Diff：2.64 秒

相同的测试，但两个数组非常相似（至少 80% 重复）：

*   唯一（Adrien 的版本）：2.92 秒
*   Values_Unique：3.15 秒
*   Keys_Flip：1.84 秒
*   Merge_Diff：2.36 秒

似乎使用数组联合运算符进行实际联合是最快的方法。但是请注意，`array_flip`只有当数组的值都是字符串或整数时才安全；如果您必须生成对象数组的并集，我推荐使用`array_merge`and的版本`array_diff`。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-23T05:54:33.367

使用“+”运算符这样做。请参阅链接[数组运算符](http://www.php.net/manual/en/language.operators.array.php)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-07T16:03:02.593

`array_unique`和`array_merge`一起使用。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-07T16:04:14.827

从[PHP: Array Operators](http://php.net/manual/en/language.operators.array.php)文档中的代码：

```
<?php
$a = array("a" => "apple", "b" => "banana");
$b = array("a" => "pear", "b" => "strawberry", "c" => "cherry");

$c = $a + $b; // Union of $a and $b
echo "Union of \$a and \$b: \n";
var_dump($c);

$c = $b + $a; // Union of $b and $a
echo "Union of \$b and \$a: \n";
var_dump($c);
?> 
```

执行时，此脚本将打印以下内容：

```
$a 和 $b 的并集：
数组（3）{
  [“一”]=>
  字符串（5）“苹果”
  ["b"]=>
  字符串（6）“香蕉”
  ["c"]=>
  字符串（6）“樱桃”
}
$b 和 $a 的联合：
数组（3）{
  [“一”]=>
  字符串（4）“梨”
  ["b"]=>
  字符串（10）“草莓”
  ["c"]=>
  字符串（6）“樱桃”
}

```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-09-23T10:06:45.507

OP 没有指定联合是按**值**还是**按键**，PHP 具有`array_merge`用于合并值和`+`合并键的功能。结果取决于数组是索引的还是键控的**以及**哪个数组先出现。

```
$a = ['a', 'b'];
$b = ['b', 'c'];

$c = ['a' => 'A',  'b' => 'B'];
‌‌$d = ['a' => 'AA', 'c' => 'C']; 
```

## 索引数组

看[`array_merge`](https://www.php.net/manual/en/function.array-merge.php)

### 按价值使用`array_merge`

```
‌‌array_merge($a, $b); // [‌0 => 'a', 1 => 'b', 2 => 'b', 3 => 'c']
‌‌array_merge($b, $a); // ‌[0 => 'b', 1 => 'c', 2 => 'a', 3 => 'b'] 
```

### 使用`+`运算符键合并

见[`+`运营商](https://www.php.net/manual/en/language.operators.array.php)

```
‌‌$a + $b; ‌// [0 => 'a', 1 => 'b']
$b + $a; // [0 => 'b', 1 => 'c'] 
```

## 键控数组

### 按价值使用`array_merge`

```
‌array_merge($c, $d); // ‌['a' => 'AA', 'b' => 'B', 'c' => 'C']
array_merge($d, $c); // ['a' => 'A',  'c' => 'C', 'b' => 'B'] 
```

### 使用`+`运算符键合并

```
$c + $d; // [‌'a' => 'A',  'b' => 'B', 'c' => 'C']
‌‌$d + $c; // ‌['a' => 'AA', 'c' => 'C', 'b' => 'B'] 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-07T09:59:21.063

```
$result = array_merge_recursive($first, $second); 
```

当您有包含数组的数组时会很有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-07T16:07:15.173

`+`运营商：

```
$x[0] = 4;
$x[1] = 1;

$y[0] = 9;
$y[2] = 5;

$u = $y + $x;

// Results in:
$u[0] === 9;
$u[1] === 1;
$u[2] === 5; 
```

请注意`$x + $y`！=`$y + $x`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-20T12:30:50.793

只需使用 `$array1 + $array2` 它将导致两个数组的联合。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-05-11T09:10:30.857

试试这个：

```
function array_union($array1, $array2){
    return array_unique(array_merge($array1, $array2));
} 
```

# c# - 记录器方法设计

> ID：10485248
> 
> 赞同：3
> 
> 时间：2012-05-07T16:00:19.313
> 
> 标签：c#, logging, api-design

我正在用 C# 编写一个函数来记录用户在我们系统上的操作并将它们保存在数据库中。具体来说，我想在调用它们时记录某些业务逻辑功能。我想到了这样的日志记录方法：

```
public static LogMethod(string user, string methodName, object[] parameters, string message) 
```

在方法内部，`ToString()`为每个参数调用适当的函数。例如，对于方法 Foo，它的调用方式如下：

```
void Foo(int a, SomeObject b)
{
     Logger.LogMethod(username, "Foo", new object[]{a,b}, "Beginning Foo");
     //etc
} 
```

这是记录函数调用的好方法吗？实现此目的的最佳实践是什么？它会以不好的方式影响性能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:14:52.763

是的，它会影响性能，因为您必须使用反射来获取 MethodInfo 然后调用它。除此之外，它会破坏可维护性，因为您无法重构方法名称。

查看以下先前的问答以获取替代方案：[如何在 C# 中拦截方法调用？](https://stackoverflow.com/questions/25803/how-do-i-intercept-a-method-call-in-c)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T16:15:01.617

不要在漂亮的业务逻辑中乱扔日志记录逻辑，这是一个横切关注点。您应该使用方法拦截之类的技术来拦截要记录的方法。

> 这是记录函数调用的好方法吗？

不，这不是，坦率地说。您的代码现在关注执行您的业务逻辑和日志记录。那是难以编写、难以测试且非常难以维护的代码。

> 实现此目的的最佳实践是什么？

我鼓励你找到一种方法来解决这个问题，而不涉及到处都记录代码来破坏你的代码。对此的标准解决方案是使用方法拦截或面向方面编程之类的东西。有很多方法可以实现这一点（您可以使用许多框架之一来设置它，但我偏爱 Castle Windsor）。

> 它会以不好的方式影响性能吗？

只有你可以回答那个问题。如果您正在记录用户正在执行的操作，则不太可能。用户既慢又笨，他们使用速度慢的磁盘和数据库之类的东西，因此不太可能关心您是否需要额外的几毫秒来记录某些内容。我们在这里不是在谈论关键循环。**但是只有你可以决定它是否慢得不能接受，只有你可以测量你自己的应用程序有和没有日志记录，看看它是否慢得不能接受。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T16:21:33.087

一切都会影响性能，但效果是否“坏”是主观的。它还完全取决于您调用该方法的频率。

如果您重新排列参数并使用`params`关键字，则可以简化调用：

```
public static LogMethod(string user, string methodName, string message, params object[] parameters) 
```

现在你的电话更简单了：

```
Logger.LogMethod(username, "Foo", "Beginning Foo", a, b); 
```

无需声明对象数组，编译器会为您处理这些。请参阅[参数](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)。

此外，您可以通过从堆栈中获取调用方法名称来进一步简化调用：

```
public static LogMethod(string user, string message, params object[] parameters)
{
    string methodName = new StackFrame(1).GetMethod().Name;
    ...      
} 
```

现在您不需要 methodName 参数。[（在 .Net 4.5 中，您可以使用CallerMemberNameAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callermembernameattribute%28v=vs.110%29.aspx)实现相同的目的。）

通过反思，您可以走得更远；例如，您可以获得传递给调用方法的参数的名称、类的名称等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T16:15:32.210

正如其他人已经指出的那样，AOP 框架可能是要走的路。

* * *

如果您仍然想使用您的方法，您可以对其进行小幅改进。如果将参数放在最后，则可以使用`params`关键字。

```
public static LogMethod(string user, string methodName, string message,
                        params object[] parameters) 
```

这使得调用该方法更容易一些。

```
void Foo(int a, SomeObject b)
{
    Logger.LogMethod(username, "Foo", "Beginning Foo", a, b);
    //etc  
} 
```

# python - 设置默认编译器以链接 Python 包中的 C 代码

> ID：10485257
> 
> 赞同：3
> 
> 时间：2012-05-07T16:00:42.567
> 
> 标签：python, compiler-construction

我正在尝试编译一个 Python 包，其中包含一些 Cython 生成的 C 代码，我遇到了：

```
gcc: error: x86_64: No such file or directory 
```

这表明 gcc 编译器太新，因此不再支持 -arch 了。我尝试`CC=/usr/bin/gcc`在 之前进行设置`python setup.py install`，这适用于主编译命令，但不适用于创建共享对象库的命令：

```
% setenv CC /usr/bin/gcc
% python setup.py install
running install
running build
running build_py
running build_ext
skipping 'hyperion/util/integrate_core.c' Cython extension (up-to-date)
building 'hyperion.util.integrate_core' extension
/usr/bin/gcc -fno-strict-aliasing -fno-common -dynamic -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.5.sdk -DNDEBUG -g -O3 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.5.sdk -I/Library/Frameworks/EPD64.framework/Versions/7.2/lib/python2.7/site-packages/numpy/core/include -I/Library/Frameworks/EPD64.framework/Versions/7.2/include/python2.7 -c hyperion/util/integrate_core.c -o build/temp.macosx-10.5-x86_64-2.7/hyperion/util/integrate_core.o
gcc -bundle -undefined dynamic_lookup -g -arch x86_64 -arch x86_64 build/temp.macosx-10.5-x86_64-2.7/hyperion/util/integrate_core.o -o build/lib.macosx-10.5-x86_64-2.7/hyperion/util/integrate_core.so

gcc: error: x86_64: No such file or directory
gcc: error: x86_64: No such file or directory
gcc: error: unrecognized option ‘-arch’
gcc: error: unrecognized option ‘-arch’
error: command 'gcc' failed with exit status 1 
```

有没有办法指定用于链接的编译器的绝对路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T23:17:41.497

使用`LDSHARED`变量：`LDSHARED='/usr/bin/gcc -shared'`.

它被埋在`sysconfig`模块中。尝试这个：

```
>>> from sysconfig import get_config_vars
>>> get_config_vars('CC', 'CXX', 'LDSHARED') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:22:55.830

我已经这样做了：

`CXX="/Developer/usr/bin/g++-4.0" CC="/Developer/usr/bin/gcc-4.0" python setup.py build`

但我不确定这是“正确的”；它只是安装 scipy/numpy 时需要使用的长命令的一部分。

（我最终使用的完整命令是 `LD_LIBRARY_PATH=/Developer/SDKs/MacOSX10.6.sdk/usr/lib/ FFLAGS="-m64" CFLAGS="-arch x86_64 -I/Developer/SDKs/MacOSX10.6.sdk/usr/lib/gcc/i686-apple-darwin10/4.0.1/ -I/usr/local/include/freetype2 -I/usr/X11/include -L/usr/X11/lib" LDFLAGS="-Wall -undefined dynamic_lookup -bundle -lpng -arch x86_64" CXX="/Developer/usr/bin/g++-4.0" CC="/Developer/usr/bin/gcc-4.0" python setup.py build`）

# android - Error/StrictMode - 来自活动的两个实例

> ID：10485264
> 
> 赞同：0
> 
> 时间：2012-05-07T16:00:56.757
> 
> 标签：android, android-strictmode

我只有一个 Activity，如果我旋转设备会得到一个 StrictError。我只调用 contentView()。为什么显示我 2 个实例？

```
ERROR/StrictMode(7247): class de.test.android.view.activity.SettingsShowBabyActivity; instances=2; limit=1
    android.os.StrictMode$InstanceCountViolation: class de.test.android.view.activity.SettingsShowBabyActivity; instances=2; limit=1
    at android.os.StrictMode.setClassInstanceLimit(StrictMode.java:1) 
```

# json.net - 数据类型 ConcurrentBag 的 Json.net 反序列化

> ID：10485271
> 
> 赞同：2
> 
> 时间：2012-05-07T16:01:46.727
> 
> 标签：json.net

我有一个具有 type 属性的对象`ConcurrentBag<object>`。

当我尝试使用 JsonConvert.DeserializeObject() 将 json 字符串反序列化为我的对象时，我收到一个异常，表明序列化程序无法从数组转换为对象的`ConcurrentBag<object>`数据类型。

任何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:16:28.100

我认为您将不得不编写一个转换器。有点像这篇文章： [json.net：为字典键指定转换器](https://stackoverflow.com/questions/6845364/json-net-specify-converter-for-dictionary-keys)

该网站还有更多示例： [http ://weblogs.asp.net/thangchung/archive/2010/08/26/customizing-the-converter-for-json-net.aspx](http://weblogs.asp.net/thangchung/archive/2010/08/26/customizing-the-converter-for-json-net.aspx)

# ruby - Ruby：实现一种新的评论方式

> ID：10485273
> 
> 赞同：0
> 
> 时间：2012-05-07T16:02:02.807
> 
> 标签：ruby

我喜欢在测试时注释掉部分代码，但在 Ruby 中，与其他语言相比，这并不容易。我知道当前的 Ruby 评论方式，但想知道是否有可能。这里的代码显然不起作用，我想很多人有理由不这样做，但可以做到吗？

```
def /*
  =begin
end
def */
  =end
end

/*testing*/
//testing

/*
testing
on multiple lines
*/

puts 'test' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T16:09:40.447

`=begin`您可以使用and注释掉多行`=end`，但它们必须位于行首。

```
class TestClass

  def my_method

  end

=begin
  def another_method
    # ...
  end
=end

end 
```

除此之外，答案是无法做到。不能在 Ruby 中使用 C 风格的多行注释。这不是技术限制的情况，语言不支持这一点。不管你是如何完成这项工作的，一旦你这样做了，你就不再编写 Ruby。您将产生一种只有您的解释器才能理解的 Ruby 方言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:06:51.050

现代编辑器/IDE 应该便于大量代码注释。我使用了[IDEA](http://www.jetbrains.com/idea/)和[TextMate](http://macromates.com/)，它们都允许。您选择一段代码，点击 Cmd+/ 并且所有行都被单行注释注释掉。再次点击 Cmd+/ 并取消注释代码。非常便利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:10:52.977

Ruby 注释以字符串文字之外的 # 字符开头。

您可以一次注释掉多行，方法是使用编辑器的“列”模式插入 # 作为一行的第一个字符。

例子：

```
def foo
#  ...
#end
#def bar
#  ...
end 
```

# ms-access - 通过 Excel 2010 连接到 Access 数据库时出错

> ID：10485277
> 
> 赞同：1
> 
> 时间：2012-05-07T16:02:13.190
> 
> 标签：ms-access, excel, vba

我正在尝试从 C 驱动器上的访问数据库中检索数据，但出现以下错误：

“无法启动您的应用程序。工作组信息文件丢失或被其他用户独占打开。”

调试器在以下代码中显示错误：

```
MyConnObj.Open _
    "Provider = Microsoft.Jet.OLEDB.4.0;" & _
    "Data Source=C:\<database>.mdb;" & _
    "User ID=<username>;" & _
    "Password=<pass>;" 
```

我该如何解决这个错误？

我有以下定义：

```
Dim MyConnObj As New ADODB.Connection 'ADODB Connection Object
Dim myRecSet As New ADODB.Recordset 'Recordset Object
Dim sqlStr As String ' String variable to store sql command 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:46:35.430

不确定，但该错误意味着您需要指定工作组（系统数据库）文件。尝试将此添加到您的连接中

```
MyConnObj.Open _ 
    "Provider = Microsoft.Jet.OLEDB.4.0;" & _ 
    "Data Source=C:\<database>.mdb;" & _ 
    "Jet OLEDB:System Database=<path to system.mdw with information on username/pass>;" & _
    "User ID=<username>;" & _ 
    "Password=<pass>;" 
```

或者，如果您的访问 mdb 不受 system.mdw 文件的保护，您可以尝试从连接字符串中删除“用户 ID”和“密码”部分。

# android - 在 App 小部件中找不到启动活动

> ID：10485278
> 
> 赞同：1
> 
> 时间：2012-05-07T16:02:23.090
> 
> 标签：android, android-intent, android-emulator, android-widget

我正在开发一个小部件应用程序，我的问题是运行应用程序时出现以下消息：未**找到启动器活动！，启动只会同步设备上的应用程序包！**

这是代码：

安卓清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.pack"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <receiver android:name=".MeteoWidget"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />

            </intent-filter>
            <meta-data android:name="android.appwidget.provider"
                android:resource="@xml/my_widget_provider" />
        </receiver>

        <activity android:name="TabsMeteoActivity" android:theme="@android:style/Theme.NoTitleBar"></activity>
        <activity android:name="MenuMeteoActivity"></activity>
        <activity android:name="MaVilleActivity"></activity>
        <activity android:name="MeteoJourActivity"></activity>
        <activity android:name="PrevisionSemaineActivity"></activity>
        <activity android:name="ParametresActivity"></activity>

    </application>

</manifest> 
```

Meteowidget.java

```
public class MeteoWidget extends AppWidgetProvider {

     @Override
     public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {  
        final int N = appWidgetIds.length;   
        // Perform this loop procedure for each App Widget that belongs to this provider      
        for (int i=0; i<N; i++) {      
            int appWidgetId = appWidgetIds[i];         
        // Create an Intent to launch TabsMeteoActivity       
        Intent intent = new Intent(context, TabsMeteoActivity.class);  
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);    
        // Get the layout for the App Widget and attach an on-click listener       
        // to the widget     
        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.main);   
        views.setOnClickPendingIntent(R.id.Layout_widget, pendingIntent);       

        // Tell the AppWidgetManager to perform an update on the current app widget        
     appWidgetManager.updateAppWidget(appWidgetId, views);     
     }
} 
```

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>

                  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                   android:id="@+id/Layout_widget"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:orientation="vertical"
         android:layout_gravity="center"
         android:background="@drawable/widget_layout"
         android:focusable="true" 

         >

        <TextView android:id="@+id/date_jour"
         android:text="Vendredi 5 Mai"
         android:textStyle="italic"
         android:layout_height="wrap_content"
         android:layout_width="wrap_content"
         android:layout_gravity="left"
         android:layout_marginTop="0dip"        
         android:textColor="#ffffffff"
         android:textSize="12sp"/>

        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@+id/Layout2"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:orientation="horizontal"
         android:layout_gravity="left"

         >
           <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
               android:id="@+id/Layout3"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:orientation="vertical"
               android:layout_gravity="left"

            >
            <TextView
               android:id="@+id/txt_ville"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_marginLeft="3dip"
               android:layout_marginTop="40dip"
               android:textSize="16sp" 
               android:text="Tunis"
                android:textStyle="bold"
               android:textColor="@android:color/white"/>

            </LinearLayout>

           <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
               android:id="@+id/Layout4"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:orientation="horizontal"
               android:layout_gravity="left"

            >
             <ImageView
               android:id="@+id/img_meteo"
               android:layout_width="70dp"
               android:layout_height="70dp"               
               android:layout_marginTop="0dip"
               android:layout_marginLeft="0dp"
               android:src="@drawable/sunny_64"

              />

            <TextView
                   android:id="@+id/txt_temp"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                   android:layout_marginLeft="3dip"
                   android:layout_marginTop="25dip"
                   android:textSize="16sp" 
                   android:textStyle="bold"
                   android:textColor="#FFD700"
                   android:text="25°"/>
           </LinearLayout>

           <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
               android:id="@+id/Layout5"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:orientation="vertical"
               android:layout_gravity="left"

            >
               <TextView
                android:id="@+id/txt_temp_min"                
                android:textSize="12sp" 
                android:textColor="@android:color/white"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dip"
                android:layout_marginTop="20dip"
                android:textStyle="bold"
                android:text="Min:22°"/>

              <TextView
                android:id="@+id/txt_temp_max"
                android:textSize="12sp" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="0dip"
                android:layout_marginLeft="10dip"
                android:textStyle="bold"
                android:textColor="#FF0000"
                android:text="Max:26°"/>

         </LinearLayout>

   </LinearLayout>

</LinearLayout> 
```

my_widget_provider.xml

```
<?xml version="1.0" encoding="utf-8"?>
                <appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
     android:minWidth="160dip"
     android:minHeight="80dip"
     android:updatePeriodMillis="10000"
     android:initialLayout="@layout/main"

/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:25:16.683

您应该将一个 Activity 提升为可启动以消除此消息。

您可以通过将以下内容添加到您的一项活动中来做到这一点（将其放在活动标签中）：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN"/>
    <category android:name="android.intent.category.LAUNCHER"/>
</intent-filter> 
```

# php - 正则表达式：php匹配网址

> ID：10485285
> 
> 赞同：-3
> 
> 时间：2012-05-07T16:03:03.970
> 
> 标签：php, regex

> **可能重复：**
> [将 ereg 表达式转换为 preg](https://stackoverflow.com/questions/6270004/converting-ereg-expressions-to-preg)

`http://www.google.co.in/aclk?sa=`L&ai=C_jFQq_

`http://www.google.co.in/aclk?sa=`l&ai=CKKCUg

突出显示的部分在我的网址中很常见。

我的正则表达式

```
 if (preg_match('google.com/aclk\?sa\=L\&ai/i', $url)) 
```

这个正则表达式正确吗？我想将我的正则表达式与我的网址匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:06:47.700

您忘记了分隔符：

```
if (preg_match('#google.com/aclk\?sa\=L\&ai/i#', $url))
                ^--                          ^-- 
```

传统上它们是`/`，但由于您正在处理 URL，因此在这种情况下使用不同的字符是有意义的，我`#`在这种情况下选择了。

尚不清楚最后一个`/i`是否是实际的分隔符和不区分大小写的标志，因此我将其保留为模式的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:13:52.723

分隔符不能是字母数字或反斜杠，这是您的错误。

# android - html5音频元素用jquery返回src

> ID：10485289
> 
> 赞同：1
> 
> 时间：2012-05-07T16:03:08.463
> 
> 标签：android, html, cordova

我正在将一些 HTML5 转换为与 Android 一起使用。Android 不支持 element，所以 play 方法不起作用。

我正在使用 PhoneGap 的媒体元素，它确实可以播放音频。我想要的是一种找到音频标签的第一个来源，然后将其与媒体播放一起使用的方法，但这似乎不起作用。

```
function playSound(whatToPlay) {
    // removed since <audio does not work
    // var snd = document.getElementById(whatToPlay);
    // snd.play();

    toPlaySrc = $("#"+whatToPlay+":first-child").eq(0).attr("src");
    // next I will have to deal with /android_asset and my current partial path
    myMedia = new Media("/android_asset/"+toPlaySrc, onSuccess,onError);
    if (myMedia)
        myMedia.play();        
}
playSound("clockticking"); 
```

这是我的音频元素。

```
<audio id="clockticking" preload="auto" autobuffer onEnded="instructionFinsihed()">
  <source src="../sound/tictoc.mp3" type="audio/mp3" />
  <source src="../sound/tictoc.ogg" type="audio/ogg" />
</audio> 
```

我有许多现有的音频元素，所以一个通用的解决方案真的很重要，我不能，例如，只是将 id 标签添加到所有 mp3 元素并解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:44:48.273

好的，我正在为 Android WebView 编写一些猴子补丁代码，你可以在我的[corinthian github 项目](https://github.com/macdonst/corinthian/)上看到进度。与此同时，您要做的是设置一个 on deviceready 侦听器：

```
document.addEventListener("deviceready", monkeypunch, true); 
```

创建一个数组来保存媒体对象：

```
mediaObjs = []; 
```

在monkeypunch方法中你会这样做：

```
function monkeypunch() {
    var audioclips = document.getElementsByTagName("audio");
    for (var i=0; i < audioclips.length; i++) {
        // Create new Media object.
        var audioSrc = audioclips[i].firstElementChild.src;
        if (audioSrc.indexOf("file:///android_asset") == 0) {
            audioSrc = audioSrc.substring(7);
        }
        mediaObjs[audioSrc] = new Media(audioSrc);
        // Create the HTML
        var newAudio = document.createElement('div');
        var newImg = document.createElement('img');
        newImg.setAttribute('src', 'images/play.png');
        newAudio.appendChild(newImg);
        // Set the onclick listener
        newAudio.addEventListener("click", function() {
            // figure out what image is displayed
            if (newImg.src.indexOf("images/play.png", newImg.src.length - "images/play.png".length) !== -1) {
                newImg.src = "images/pause.png"; 
                mediaObjs[audioSrc].play();               
            } else {
                newImg.src = "images/play.png";
                mediaObjs[audioSrc].pause();                
            }
        });
        // replace the audio tag with out div
        audioclips[i].parentNode.replaceChild(newAudio, audioclips[i]);
    }
} 
```

您可以从我的 github 项目中获取播放/暂停图像。当我有更多时间时，我计划添加更多功能。

# java - Animal a = new Horse() 和 Horse c = new Horse() 之间的区别

> ID：10485291
> 
> 赞同：0
> 
> 时间：2012-05-07T16:03:12.703
> 
> 标签：java, inheritance

假设`Horse`该类是类的子`Animal`类。

*   `Horse`a 和 c 在类中都使用方法和实例变量

*   c 也可以使用`Animal`类中的方法。那么这两个参考变量之间有什么区别吗？

感谢您的任何回复

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T16:05:02.077

错误的。
`a`不能只在`Horse`类中使用方法，因为`a`没有声明为`Horse`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T16:06:07.290

其中一个是**编程到接口，**另一个是编程到实例。

与第一个：

```
Animal a = new Horse(); 
```

您可以在需要动物实例的任何地方使用此对象，可以是任何种类的动物。

```
Animal d = new Dog();

public void MakeSound(Animal a)
{
 a.makeSound();
} 
```

在这种情况下，如果您的 Animal 类是抽象类（如果方法是抽象的）或接口，则必须实现该方法。

虽然您在 Horse 类上有方法，但只有在使用时才能使用这些方法`Horse h = new Horse();`

首选接口编程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T16:06:38.617

一般来说，您应该始终选择与其用法兼容的最不具体的变量类型，只是为了使其更易于阅读。在实践中，如果您使用`List`var 而不是`ArrayList`，则很明显您不需要`ArrayList`代码中的任何特定内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T16:07:12.767

该对象`a`不能引用方法/变量，`Horse`除非它是类型转换的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T16:12:23.177

马是从动物那里继承来的吗？

如果是这样的话，你调用 Super.[a Method from animal] 和 Horse.[a Method from horse only]

Horse 可以访问 animal 的所有方法，因为它们是继承的，但 animal 不能访问 horse 的方法，因为它们仅适用于 horse。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T16:25:00.280

这里有两个重要的概念需要了解：引用的**静态类型**；这是它被声明的那个；以及引用的**运行时类型**；这是引用在运行时指向的真实类型。

在您的示例中，两个变量都具有运行时类型`Horse`，但`a`具有静态类型`Animal`。这会影响您在代码中处理这两个变量的方式，其中它们的**静态类型**由编译器强制执行；无论它们的运行时类型如何。

因此，即使它们都引用`Horse`实例，`c`您也只能通过调用`Horse`特定方法（无需强制转换或使用反射`a`）。

# java - 在 GWT webapp 中创建 PDF 文件

> ID：10485292
> 
> 赞同：0
> 
> 时间：2012-05-07T16:03:17.767
> 
> 标签：java, gwt, itext, gwt2, apache-fop

我有一个**`GWT`**webapp，页面中显示了各种表格。

我需要在 webapp 中放置一种机制，以通过*XML/XSLT*文件将表格转换为*PDF*文件。
我研究了*PDF*文件转换器，发现了以下库：

*   阿帕奇的 FOP
*   文字

但是我在实施它们时遇到了错误。**`GWT`**支持他们吗？

```
[ERROR] [myGWTProject] - Line 842: No source code is available for type org.apache.fop.apps.FopFactory; did you forget to inherit a required module? 
```

我的 webapp 依赖于**`GWT`**客户端和服务器端这两个部分。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:07:56.790

很可能，没有。GWT 仅支持非常有限的一组[JRE 功能](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation)。除非他们专门设计了该库以将其与 GWT 集成，否则它将无法工作。

要使用这样的库，通常，您将其委托给您的服务器，您完成这项工作，并在准备好后将其返回给客户端。

# java - 哪一个最适合聊天应用程序？套接字编程与 rmi？

> ID：10485293
> 
> 赞同：1
> 
> 时间：2012-05-07T16:03:28.600
> 
> 标签：java, sockets, client-server, rmi

我想创建一个基于客户端/服务器的聊天应用程序。什么是最好的？使用套接字还是使用 rmi？

PS：是否可以使用 rmi 创建聊天应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:14:56.473

在套接字编程中，您必须准确处理正在使用的套接字/端口，并且是与相关协议一起用于处理通信的低级通信 - 无论是 TCP 还是 UDP，用于客户端/服务器通信。您还可以处理在客户端和服务器之间传输的所有消息。

您可以使用任何编程语言与套接字应用程序通信，因此用 Java 编写的套接字程序可以接受来自 Python、C/C++、Haskel 等的调用。

另一方面，RMI 建立在套接字之上，它隐藏了大部分网络特定代码，您不必担心特定端口，但仍然可以根据需要选择一个。RMI 处理客户端和服务器之间的消息传递。RMI 用于 Java 客户端/服务器应用程序之间的通信。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T16:08:58.420

RMI 是一种在套接字之上工作的技术。它正在将苹果与橙子进行比较。套接字是处理网络通信的低级东西，而 RMI 是一种位于套接字之上的协议，以便可以在远程 JVM 上调用 java 方法。

# matlab - 如何使用内置函数将 Inf 和 NaN 替换为零

> ID：10485294
> 
> 赞同：14
> 
> 时间：2012-05-07T16:03:34.563
> 
> 标签：matlab, octave

在八度音程中，是否有一个内置函数用于将向量中的 Inf/NaN 替换为 0

例如

```
a = log10([30 40 0 60]) => [1.4771 1.6021 -Inf 1.7782] 
```

我可以使用有限或查找函数来查找有效值的索引/位置，但我不知道如何在不编写函数的情况下正确复制值。

```
finite(a) => [1 1 0 1] 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-07T16:07:17.447

```
>> a = log10([30 40 0 60])
a =
      1.477    1.602    -Inf    1.778

>> a(~isfinite(a))=0
a =
      1.477    1.602    0       1.778 
```

诀窍，这使用[逻辑索引](http://www.mathworks.nl/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html)

`~`是布尔值/逻辑值的 NOT 运算符，并`isfinite(a)`生成一个逻辑向量，大小与 a 相同：

```
>> ~isfinite(a)
ans =
     0     0     1     0 
```

如您所见，这用于逻辑索引。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T16:33:48.143

同样对于 NaN，您可以使用`isnan()`任何您想要的来替换这些元素。

# node.js - 节点/猫鼬：在猫鼬中间件中获取请求上下文

> ID：10485302
> 
> 赞同：6
> 
> 时间：2012-05-07T16:04:32.817
> 
> 标签：node.js, mongoose

我正在使用 mongoose（在节点上），我正在尝试使用 Mongoose 中间件在保存时向模型添加一些额外的字段。

我正在考虑想要添加 lastmodifiedsince-date 的常用案例。但是，我还想自动添加已完成保存的用户的名称/个人资料链接。

```
schema.pre('save', function (next) {
  this.lasteditby=req.user.name; //how to get to 'req'?
  this.lasteditdate = new Date();
  next()
}) 
```

我正在使用护照 - [http://passportjs.org/](http://passportjs.org/) - 这导致 req.user 存在，`req`当然是 http-request。

谢谢

**编辑**

我`pre`在嵌入式模式上定义，而我正在调用`save`嵌入式实例的父级。下面发布的解决方案（将 arg 作为保存的第一个参数传递）适用于非嵌入式案例，但不适用于我的案例。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T16:57:32.500

您可以将数据传递给您的`Model.save()`调用，然后将其传递给您的中间件。

```
// in your route/controller
var item = new Item();
item.save(req, function() { /*a callback is required when passing args*/ });

// in your model
item.pre('save', function (next, req, callback) {
  console.log(req);
  next(callback);
}); 
```

不幸的是，这不适用于今天的嵌入式模式（请参阅[https://github.com/LearnBoost/mongoose/issues/838](https://github.com/LearnBoost/mongoose/issues/838)）。一种解决方法是将属性附加到父级，然后在嵌入文档中访问它：

```
a = new newModel;
a._saveArg = 'hack';

embedded.pre('save', function (next) {
  console.log(this.parent._saveArg);
  next();
}) 
```

如果你真的需要这个功能，我建议你重新打开我上面链接的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-13T16:13:46.297

我知道这确实是个老问题，但我花了半天时间试图解决这个问题，所以我正在回答这个问题。我们可以将额外的属性作为选项传递，如下例所示 -

```
findOneAndUpdate({ '_id': id }, model, { **upsert: true, new: true, customUserId: userId, ipAddress: ipaddress.clientIp** }, function (err, objPersonnel) { 
```

并在预更新和保存访问权限如下 -

```
schema.pre('findOneAndUpdate', function (next) {
   // this.options.customUserId,
   // this.options.ipAddress
}); 
```

谢谢，

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-30T03:14:29.957

它可以通过“请求上下文”来完成。步骤：

安装请求上下文

```
npm i request-context --save 
```

在您的应用程序/服务器初始化文件中：

```
var express = require('express'),
app = express();
//You awesome code ...
const contextService = require('request-context');
app.use(contextService.middleware('request'));
//Add the middleware 
app.all('*', function(req, res, next) {
  contextService.set('request.req', req);
  next();
}) 
```

在你的猫鼬模型中：

```
const contextService = require('request-context');
//Your model define
schema.pre('save', function (next) {
  req = contextService.get('request.req');
  // your awesome code
  next()
}) 
```

# algorithm - （取消）根据图案折叠一张纸并给出层的顺序

> ID：10485309
> 
> 赞同：11
> 
> 时间：2012-05-07T16:05:16.193
> 
> 标签：algorithm, scala, math, functional-programming

上周五，在一次法语编程比赛中，我们得到了一个折纸问题，如下：

> 给定一张方形纸和一个折叠图案，编写一个函数“fold(pattern)”，该函数将给出层的顺序，该顺序将由纸张相对于图案的累积折叠（一半）产生。

这可能不是很清楚，所以让我解释一下（如果你愿意走那么远来帮助我，手边有一张方形纸可能有助于理解）。

假设我们有一张正方形的纸，我们在上面画了一个 N*N 网格，然后对它的所有内部正方形进行编号。给定一个“LTRB”模式，我们将把这张纸垂直对折，然后把得到的左边部分放在右边部分。然后，我们将它水平折叠并将顶部放在底部。然后，我们将它再次垂直折叠并将右侧部分放在左侧部分上。最后，我们将它水平折叠并将底部放在顶部。这给我们留下了一张大小为一个正方形和 N^2 层的纸。预期的答案是每个原始正方形的结果顺序。

例如，如果我们在一张正方形纸上绘制一个 2*2 的网格，然后将每个内部正方形从 1 到 4 编号（从左上到右下，水平方向），并给定图案“LT”，我们将有发生这种情况：

```
fold("LT"):

 1 | 2   L  1,2  T
---|--- ==> --- ==> 2,1,3,4
 3 | 4      3,4 
```

并带有“RB”模式，例如：

```
fold("RB"): 

 1 | 2   R  2,1  B
---|--- ==> --- ==> 3,4,2,1
 3 | 4      4,3 
```

正如您可能已经猜到的那样，它基本上可以归结为 N*N 矩阵的递归变换。这是简单的部分，这是我的解决方案：

[http://ideone.com/QaXGq](http://ideone.com/QaXGq)

现在是有趣的部分。

*   编写一个函数展开(order)，对于给定的结果层排序，它会给出产生这种排序的模式。请注意，展开（折叠（“LRTB”））=>“LRTB”

然后我的大脑停止工作了一段时间，我没有时间（总共 4 小时还剩 2 小时）想出一个足够快的解决方案。

我最初的想法是：

1.  尝试暴力破解它。因为我们知道输入的长度是 N^2，所以我们可以创建一个初始矩阵并尝试所有可能的折叠，直到我们达到与输入相同的顺序。O(4^N) 复杂度，不可行。

2.  蛮力逆转。从输入开始，尝试所有展开的可能性，直到我们达到正确的初始状态。稍微好一点，但还是太慢了。

3.  ？？？

有人有想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T16:39:36.947

在每个步骤中，您只需要知道列表的第一个元素和最后一个元素。如果第一个元素应该在最后一个元素的左侧，则折叠方向为左（同上，右、上和下）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T05:12:32.970

这是我的尝试。这听起来很简单，但像往常一样，魔鬼在细节中。

首先，`fold`：

```
 type Matrix = IndexedSeq[IndexedSeq[IndexedSeq[Int]]]

  def initial(folds: Int): Matrix = {
    val sideLen = math.pow(2, folds / 2).toInt
    (1 to sideLen * sideLen) map (Vector(_)) grouped sideLen toIndexedSeq
  }

  def leftFold (m: Matrix): Matrix = m map { r => 
    val (a, b) = r splitAt (r.size / 2) 
    (a.reverse, b).zipped map (_.reverse ++ _)
  }

  def rightFold(m: Matrix): Matrix = m map { r => 
    val (a, b) = r splitAt (r.size / 2) 
    (b.reverse, a).zipped map (_.reverse ++ _)
  }

  def topFold   (m: Matrix): Matrix = leftFold(m.transpose).transpose
  def bottomFold(m: Matrix): Matrix = rightFold(m.transpose).transpose

  def fold(input: String): Seq[Int] = {
    def go(in: String, m: Matrix): Seq[Int] = in match {
      case "" => m(0)(0)
      case s  => go(s.tail, s.head match {
        case 'L' => leftFold(m)
        case 'R' => rightFold(m)
        case 'T' => topFold(m)
        case 'B' => bottomFold(m)
      })
    }
    go(input, initial(input.length))
  } 
```

二、`unfold`：

```
 def unfold(input: Seq[Int]): String = { 
    val m0: Matrix = Vector(Vector(Vector(input: _*)))
    val sideLen = math.sqrt(input.length).toInt 

    def go(m: Matrix, out: String): String = {
      val tl = m.head.head
      val bl = m.last.head
      val tr = m.head.last
      if (m.length == sideLen && m.head.length == sideLen) out.reverse
      else if (tl.head == tl.last - 1)       go(leftUnfold(m),   out + 'L')
      else if (tr.head == tr.last + 1)       go(rightUnfold(m),  out + 'R')
      else if (tl.head == tl.last - sideLen) go(topUnfold(m),    out + 'T')
      else if (bl.head == bl.last + sideLen) go(bottomUnfold(m), out + 'B')
      else sys.error("no fold found " + m) 
    }
    go(m0, "")
  }    

  def leftUnfold (m: Matrix): Matrix = m map { r =>
    val (a, b) = r.map(e => e.splitAt(e.size / 2)).unzip
    a.map(_.reverse).reverse ++ b
  }

  def rightUnfold(m: Matrix): Matrix = m map { r =>
    val (a, b) = r.map(e => e.splitAt(e.size / 2)).unzip
    b ++ a.map(_.reverse).reverse
  }

  def topUnfold   (m: Matrix): Matrix = leftUnfold (m.transpose).transpose
  def bottomUnfold(m: Matrix): Matrix = rightUnfold(m.transpose).transpose 
```

我跑了几个测试，它通过了...

# android - 警报管理器中的延迟 .. 当两个警报同时存在时

> ID：10485311
> 
> 赞同：1
> 
> 时间：2012-05-07T16:05:21.820
> 
> 标签：android, alarmmanager

我已经安排了多个警报管理器在不同时间发送意图。我注意将唯一 ID、上下文和附加信息传递给两个待处理的意图。下面的 func 处理警报调用。.

```
public void handle(int duration, int id){
Intent intent = new Intent("package.SET"); 
intent.putExtra ("package.id", Id); 
 AlarmManager amg = (AlarmManager)Context.getSystemService(Context.ALARM_SERVICE);
PendingIntent pis = PendingIntent.getBroadcast(Context,Id, intent, FLAG_ONE_SHOT);
amg.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + time, pis); } 
```

有 2 个函数调用警报

```
public void callalarm(int time){
 handle(time, UNIQUE_ID1);} 
```

和

```
public void callalarm2(int time){
  handle(time, UNIQUE_ID2);} 
```

我注意到唯一 ID1 和 Unique_ID2 是不同的。广播接收器处理警报并执行另一个代码。Callalarm1 和 callalarm2 是否有可能相互干扰。

> ***我已经使用 registerReceiver 函数注册了接收器，而不是在 android 清单文件***中。

```
 IntentFilter ARFilter = new IntentFilter();
    ARFilter.addAction("package.SET");
     context.registerReceiver(AR, ARFilter); 
```

在扩展广播接收器的 AR 中，我使用 id 来定义动作。

```
public BroadcastReceiver AR= new BroadcastReceiver()
 { public void onReceive(Context context, Intent intent)
  {    // i do some stuff here which is confidential
        }} 
```

问题是，我的警报延迟了。有延迟的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T05:29:42.177

据我所知，当处理器的任务负担很重时，警报管理器无法在正确的时间触发。

换句话说，广播接收器没有按时收到意图，因为警报管理器将广播添加到延迟发送的队列中。

准确的信息很有帮助。

# ruby-on-rails - 在 Mountain Lion 上为 ree 安装 libv8 失败

> ID：10485312
> 
> 赞同：6
> 
> 时间：2012-05-07T16:05:23.213
> 
> 标签：ruby-on-rails, rubygems, osx-mountain-lion

几天来我一直试图找到解决方案，但没有运气。如果有人在 ML 上成功安装了 REE 1.8.7 的 libv8 gem，您能否告诉我您遵循的过程？

我安装了 XCode LLVM 编译器和 10.7+ v2 的 kennethreitz GCC 包。

尝试使用本机扩展安装时的输出是：

```
构建原生扩展。这可能需要一段时间...
错误：安装 libv8 时出错：
    错误：无法构建 gem 原生扩展。

        /Users/XXXXX/.rvm/rubies/ree-1.8.7-2012.02/bin/ruby extconf.rb
*** extconf.rb 失败 ***
由于某种原因无法创建 Makefile，可能缺少
必要的库和/或头文件。查看 mkmf.log 文件了解更多信息
细节。您可能需要配置选项。

提供的配置选项：
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --没有-make-prog
    --srcdir=。
    --curdir
    --ruby=/Users/XXXXX/.rvm/rubies/ree-1.8.7-2012.02/bin/ruby
extconf.rb:13: 未初始化的常量 Gem (NameError)
正在检查 Python...

Gem 文件将继续安装在 /Users/XXXXX/.rvm/gems/ree-1.8.7-2012.02/gems/libv8-3.3.10.4 以供检查。
结果记录到 /Users/XXXXX/.rvm/gems/ree-1.8.7-2012.02/gems/libv8-3.3.10.4/ext/libv8/gem_make.out
```

（记录的结果与错误完全相同）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T23:53:29.997

这对我有用。

```
RUBYOPT=-rrubygems gem install therubyracer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:28:34.050

我能够在新安装的 ree-1.8.7 上成功地在 Mountain Lion 上安装 libv8 gem。我相信您看到的问题源于正在使用的 GCC 版本。

正如现在在[osx-gcc-installer 的自述文件](https://github.com/kennethreitz/osx-gcc-installer)中所描述的，您应该从 Kenneth Reitz 的 LLVM 版本的 GCC 切换到可通过 Homebrew 或 Macports 获得的 GCC 4.2。

自制说明： [http ://coderwall.com/p/dtbuqg](http://coderwall.com/p/dtbuqg)

MacPorts 说明： [http ://coderwall.com/p/pagj2w](http://coderwall.com/p/pagj2w)

请注意，您需要设置 CC 路径并建立必要的符号链接，如那些文章中所述。

# extjs - 如何使用 ExtJS 4 定义树存储应显示为节点文本的字段

> ID：10485315
> 
> 赞同：1
> 
> 时间：2012-05-07T16:05:37.333
> 
> 标签：extjs, extjs4, treepanel

在我的 ExtJS 4 应用程序中，我有一个模型（带有一个字段“名称”）、一个 Treestore 和一个 Treepanel。我希望 Treepanel 显示我的模型的“名称”字段。如何指定？默认节点有一个“文本”字段，显示在树上。但是是否可以告诉 Tree 从 Model 中显示其他内容？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:11:41.500

看一下`displayField`配置：

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.tree.Panel-cfg-displayField](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.tree.Panel-cfg-displayField)

# google-fusion-tables - 多边形下方的标记不可点击

> ID：10485317
> 
> 赞同：0
> 
> 时间：2012-05-07T16:05:43.707
> 
> 标签：google-fusion-tables

我有一个融合表，它结合了标记和多边形。有时标记在多边形下方分层并且不可点击。有没有办法强制标记出现在多边形上方，所以两者都是可点击的？

示例表 ID：3821195

地点是加拿大多伦多。如果您放大缩小，则标记将隐藏在多边形下方。

我尝试过创建不同的表格，先输入标记，或者先输入多边形，但在某些情况下（例如上表），标记总是位于多边形下方。怎么来的，怎么解决？谢谢，温迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T04:48:11.510

最后，我将多边形放在一个表格中，将标记放在另一个表格中，然后将图层堆叠在一起，多边形图层位于底部。

这是设置图层顺序的脚本部分：

```
 layer1.setMap(map); 
    layer2.setMap(map);  
    layer4.setMap(map);  
    layer3.setMap(map); 
```

列出的第一个在底部。列出的最后一个在顶部。

希望这对其他人有帮助。

# c++ - 提升线程错误

> ID：10485332
> 
> 赞同：3
> 
> 时间：2012-05-07T16:06:29.740
> 
> 标签：c++, boost-thread

我有一个使用 boost 线程的程序。该程序具有启动和停止功能。当程序启动时，我创建了一个执行一些处理的 boost 线程。当程序停止时，我在这个线程上调用 join 并删除线程的指针。我的程序第一次正确启动和停止；但是，当我第二次尝试启动我的程序时，我在 boost 内部的一个断言失败（当新的处理线程时）并且在我的屏幕上输出以下内容

```
/root/src/boost.cmake/libs/thread/src/pthread/once.cpp:46: unsigned long &boost::detail::get_once_per_thread_epoch(): Assertion`!pthread_setspecific(epoch_tss_key,data)' failed. 
```

我知道我的连接工作正常，因为当处理线程退出时，我会向控制台输出一条消息。有谁知道为什么会发生这种情况？

一个额外的说明......我已经对我的代码进行了一些操作，并且我用来清理我的 boost 线程的方法似乎在我程序的其他部分中工作（例如，如果我创建 boost::thread在父类中）。但是，每次在子类（这是一个抽象类）中都会失败。

我的开始和停止方法看起来像这样......

```
 void ThreadMethod()
    {
      while(_runningThread)
      {
      }
    }
 void Start()
   {
     _runningThread = true;
     _thread = boost::make_shared<boost::thread>(&TestChildVirtualClass::ThreadMethod, this);
   };
   void Stop()
   {
     _runningThread = false;
     _thread->join();
     if( _thread )
     {
       _thread.reset();
     }
   }; 
```

但是，我在测试程序中重新创建此问题时遇到了麻烦（尽管它在我的实际程序中每次都会发生）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T12:02:19.033

该错误可能是 Boost.Thread 上的错误，因为 call_once 实现中存在一些漏洞（#5752 boost::call_once() 在某些平台上不可靠 - 请参阅[https://svn.boost.org/trac/boost/ticket /5752](https://svn.boost.org/trac/boost/ticket/5752) )。这当然取决于您运行程序的平台。

当然我可能错了。

您还应该保护对 _runningThread 的访问。

# javascript - 在 JavaScript 中处理大型（12K+ 行）数组

> ID：10485333
> 
> 赞同：14
> 
> 时间：2012-05-07T16:06:30.513
> 
> 标签：javascript, json, indexeddb, web-sql

这个项目的要求很奇怪，但我希望得到一些见解......

我有一个 CSV 文件，其中包含大约 12,000 行数据，大约 12-15 列。我将其转换为 JSON 数组并通过 JSONP 加载它（必须在客户端运行）。对数据集进行任何类型的查询以返回较小的过滤数据集需要很多秒。我目前正在使用 JLINQ 进行过滤，但我本质上只是循环遍历数组并根据条件返回一个较小的集合。

webdb 或 indexeddb 是否允许我更快地执行此过滤？您知道的任何教程/文章都可以解决这种特定类型的问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T17:08:06.950

[http://square.github.com/crossfilter/](http://square.github.com/crossfilter/)（不再维护，请参阅[https://github.com/crossfilter/crossfilter](https://github.com/crossfilter/crossfilter)了解较新的分叉。）

> Crossfilter 是一个 JavaScript 库，用于在浏览器中探索大型多元数据集。Crossfilter 支持与协调视图的极快 (<30ms) 交互，即使数据集包含一百万或更多记录...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T16:10:52.873

这让我想起了 John Resig 写的一篇关于字典查找（真正的字典，而不是编程结构）的文章。

[http://ejohn.org/blog/dictionary-lookups-in-javascript/](http://ejohn.org/blog/dictionary-lookups-in-javascript/)

他从服务器端实现开始，然后在客户端解决方案上工作。它应该给你一些想法来改进你现在正在做的事情：

*   缓存
*   本地存储
*   内存注意事项

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T00:04:31.497

如果您需要在对其应用一些转换之前将整个数据对象加载到内存中，我会将 IndexedDB 和 WebSQL 排除在外，因为它们通常都会增加复杂性并降低应用程序的性能。

对于这种类型的过滤，像[Crossfilter](http://square.github.com/crossfilter/)这样的库将大有帮助。

当您不需要或不想将整个数据集加载到内存中时，IndexedDB 和 WebSQL 可以在过滤方面发挥作用。这些数据库最适合用于索引行 (WebSQL) 和属性 (IndexedDB)。

在浏览器数据库中，您可以一次将一条记录流式传输到数据库中，然后通过光标一次一条记录。过滤的好处是，这意味着您可以将数据保留在“磁盘”上（`.leveldb`Chrome 中的一个和`.sqlite`FF 的数据库），并过滤掉不必要的记录，作为预过滤步骤或过滤本身。

# arrays - 在 vb 6.0 中，我们如何知道动态数组是否已经初始化？

> ID：10485336
> 
> 赞同：0
> 
> 时间：2012-05-07T16:06:41.380
> 
> 标签：arrays, vb6

> **可能重复：**
> [如何确定数组是否在 VB6 中初始化？](https://stackoverflow.com/questions/183353/how-do-i-determine-if-an-array-is-initialized-in-vb6)
> [如何在 VB6 中检查对象是否为 Nothing？](https://stackoverflow.com/questions/5340881/how-do-i-check-for-an-object-being-nothing-in-vb6)

在函数返回动态数组作为结果的情况下，动态数组可能未初始化（例如，执行错误）。是否可以检查这种情况？

函数 IsNothing() 不起作用，并且 UBound() 在这种情况下会产生错误。

例如：

```
Function find(results() As String)

    [Definition here...]

End Function

[...]

Dim results() As String
find(results)
If UBound(results) > 0 Then '<-- This line will fail when results was not defined

[...] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:45:01.797

我遇到了同样的问题，无法找到一种干净的方法来做到这一点。我最终创建了自己的函数来实现一个用错误处理程序包装的 Ubound。如果失败，我返回-1。

```
Private Function custom_UBound(ByRef ToTest() As String)
    On Error GoTo errHandler

    custUBound = UBound(ToTest)

    Exit Function
errHandler:
    custUBound = -1
End Function 
```

# matlab - Matlab 错误时间 矩阵尺寸必须一致

> ID：10485338
> 
> 赞同：0
> 
> 时间：2012-05-07T16:06:46.580
> 
> 标签：matlab

我正在尝试在 Matlab 中创建一个 GUI，一旦您在编辑文本区域中输入了数据，它就会绘制一个特定的图形。我的问题是，当我尝试使用此代码绘制图表时：

```
 function pushbutton3_Callback(hObject, eventdata, handles)
  a = str2num(get(handles.edit1,'string'));
  b = str2num(get(handles.edit2,'string'));
  n1 = str2num(get(handles.edit6,'string'));
  n2 = str2num(get(handles.edit4,'string'));
  lambda = str2num(get(handles.edit5,'string'));
  m = ones(1,a)
  s = ones(1,b)
  f = ones(1,n1)
  g = ones(1,n2)
  k = ones(1,lambda) 
  c = k.*(m.*s/f.*g)
  i = -3:1:5 
  figure
  p= plot(c,i) 
```

此错误消息不断弹出：`Error times Matrix dimensions must agree`。我不知道该怎么办？我真的需要帮助，因为我有这个项目的最后期限，我一无所知！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:19:27.660

```
m = ones(1,a)
s = ones(1,b)
f = ones(1,n1)
g = ones(1,n2)
k = ones(1,lambda) 
c = k.*(m.*s/f.*g) 
```

你没有忘记除法运算符的一个点吗？

```
c = k.*(m.*s./f.*g) 
```

对于错误本身：除非 a==b==n1==n2==lambda，否则您创建的向量的维度是不同的，并且您将无法（按元素）将它们相乘，这会导致`Error times Matrix dimensions must agree`

## 编辑

`plot(x,y)`绘制一条连接点 (x,y) 彼此的线。如果您删除 x 并仅使用`plot(y)`，则假定 x 为 1:N（N 是向量 y 中的元素数）

如果你想绘制 c=lambda*(a*b/n1*n2) 的值，那么 plot(c) 将只绘制该值。我不明白为什么有人告诉你使用向量将其转换为向量？

可以肯定的是，如果

```
lambda=2
a  = 3
b  = 4
n1 = 5
n2 = 6 
```

那么 c=2*(3*4/5*6)=28.8 那么你想要的是绘制值 28.8??

如果这是你想要的，那么这是使用

```
c = k.*(m.*s./f.*g);
plot(c); 
```

如果参数包含更多值，例如：

```
lambda= [2 4]
a  = [3 5]
b  = [4 8]
n1 = [5 4]
n2 = [6 1] 
```

同样的事情适用，但`c = k.*(m.*s./f.*g);`会返回`c=[28.8 40]`并`plot(c)`连接点 (1; 28.8) 和 (2; 40)

好？清除？那么主要问题是您必须确保用户在每个文本框中输入相同数量的数字，否则您的向量之间会出现不匹配，并且它们不会计算：`[1 4 5].*[6 7]`会出错

# android - 如何处理服务和活动（及其子活动）之间的 IPC？

> ID：10485342
> 
> 赞同：6
> 
> 时间：2012-05-07T16:07:04.423
> 
> 标签：android, android-service, android-activity

Android 中两个不同进程（服务和活动）之间的通信可以[通过 Messenger 或 AIDL](http://developer.android.com/guide/topics/fundamentals/bound-services.html)进行管理：活动绑定到服务就足够了。

但是，如果这个活动有一个或多个子活动会发生什么？从主要活动开始子活动的那一刻起，我希望将通信重定向到子活动；同样，当子活动被销毁时，我希望将通信重定向回主活动等。

示例＃1：

1.  MyService <---IPC---> MainActivity
2.  MainActivity 启动 SubActivity，然后 MyService <---IPC---> SubActivity
3.  SubActivity 被销毁，然后 MyService <---IPC---> MainActivity

示例＃2：

1.  MyService <---IPC---> MainActivity
2.  MainActivity 启动 FirstSubActivity，然后 MyService <---IPC---> FirstSubActivity
3.  FirstSubActivity 启动 SecondSubActivity，然后 MyService <---IPC---> SecondSubActivity
4.  SecondSubActivity 被销毁，然后 MyService <---IPC---> FirstSubActivity
5.  FirstSubActivity 被销毁，然后 MyService <---IPC---> MainActivity

如何处理这些情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T16:05:59.847

您希望有一个实体负责绑定到服务并保持连接，并且您需要该实体不是 Activity 实例。试试这个：

*   创建一个继承Activity的基类（BaseActivity）
*   从 BaseActivity 派生所有活动
*   使用 BaseActivity 中的方法管理应用程序和服务之间的连接。BaseActivity 将需要有静态（类）变量来跟踪与服务的连接并处理与服务的绑定并在完成后将其关闭。
*   确保在绑定到服务时使用应用程序上下文（而不是活动上下文），以便操作系统在活动被破坏时不会终止与服务的连接。

通过这种方式，您不必担心在不同活动和您的服务之间创建和拆除连接。您的整个应用程序（所有活动）和您的服务之间只有一个连接。

我意识到我没有解释所有血腥的细节，但希望你能明白基本的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:16:05.057

你有没有想过下面的解决方案？您可以使用命令 startService() 启动 Activity，然后与 Intent 和 Receiver 通信，而不是将 Activity 绑定到 Service。通过这种方式，您可以启动其他活动，为其状态调用服务并在任何您想要的地方与之交互:)

# sqlite - 如何检索包含sqlite中某些字段的空值的数据？

> ID：10485343
> 
> 赞同：0
> 
> 时间：2012-05-07T16:07:04.970
> 
> 标签：sqlite, blackberry, null, blackberry-jde

我正在从我的 sqlite 表中为 blackberry 应用程序获取记录行。但是某些字段包含 null，并且我在这些字段中收到 No stack trace 的运行时错误。无论它们的 null 字段如何，我如何继续获取数据。这就是我的桌子的样子

```
 Date        Bill  Receipt
    12/5/2012    50  
    16/4/2012    40    20
    1/6/2012     50    30 
```

它给了我第一行的第三个元素的错误。

这是我用于检索值的代码

```
 grid.insert(new LabelField(r.getString(k)) 
```

连续经历3个for循环——一个用于行，一个用于列，一个用于数据库表的每一列。如果有人知道对此的解决方案，请分享。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:35:50.757

使用 Row.getObject() 而不是 Row.getString()。它将为空值返回“null”，而不会引发异常。如果非空，则可以进行类型检查，或者如果您知道它始终是字符串类型，则只需转换为字符串。

# wordpress - Wordpress 端口重定向错误

> ID：10485345
> 
> 赞同：2
> 
> 时间：2012-05-07T16:07:11.543
> 
> 标签：wordpress, apache, redirect

我尝试使用 WAMP 在本地安装 wordpress - 但似乎某些设置是错误的，因为当我尝试访问[http://localhost:1550/wordpress](http://localhost:1550/wordpress)时，它会将我重定向到[http://localhost:8080/wordpress](http://localhost:8080/wordpress)我得到一个错误 - 404 错误！

我似乎不太明白为什么会出现这个问题！

PS 我已经对 apache httpd.conf 进行了所有更改以监听 1550 端口！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:11:53.657

Wordpress 具有存储站点 URL 的配置，用于处理重定向。这存储在数据库中名为 wp_options 的表中。您需要更新“siteurl”和“home”以将端口从：8080 更改为：1550。

# ios - if 语句似乎不起作用

> ID：10485350
> 
> 赞同：0
> 
> 时间：2012-05-07T16:07:15.053
> 
> 标签：ios, if-statement, uinavigationcontroller, tableview

我的 if 语句何时`date.name`关于此应用程序有一点问题 新闻项目：有人可以帮助我吗？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    MoreMenu *data = [self.fetchedResultsController objectAtIndexPath:indexPath];

    if ([data.name compare:@"about this app"]) {
        NSLog(@"About this app : %@", data.name);
    } else {
        NSLog(@"News item : %@", data.name);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T16:12:21.727

类似于 C 标准函数的模式，`strcmp()`在`-compare:`相等的情况下返回 0。尝试

```
if ([data.name isEqualToString:@"about this app"]) {
    // code
} 
```

或者

```
if (![data.name compare:@"about this app"]) {
    // code
} 
```

代替（首选第一种表示法）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T16:09:51.947

尝试：

```
if ([data.name isEqualToString:@"about this app"]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T16:10:00.683

如果您正在检查是否相等，您可能想要使用：

`isEqualToString:`代替`compare:`

# php - 数据映射器设计模式和多对多关系

> ID：10485352
> 
> 赞同：1
> 
> 时间：2012-05-07T16:07:18.657
> 
> 标签：php, design-patterns, datamapper, domain-model

我已阅读以下有关`Domain Model`设计模式和`Data Mapper`设计模式的文章：

*   [http://phpmaster.com/building-a-domain-model/](http://phpmaster.com/building-a-domain-model/)
*   [http://phpmaster.com/integrating-the-data-mappers/](http://phpmaster.com/integrating-the-data-mappers/)
*   [http://www.devshed.com/c/a/MySQL/Building-an-ORM-in-PHP/](http://www.devshed.com/c/a/MySQL/Building-an-ORM-in-PHP/)
*   [http://www.devshed.com/c/a/MySQL/Building-an-ORM-in-PHP/1/](http://www.devshed.com/c/a/MySQL/Building-an-ORM-in-PHP/1/)

关系很容易`one-to-one`。谁能向我解释我该如何组织`many-to-many`支持？

例如：我们有树形表：和`posts`，其中最后一个表是支持帖子和图像之间关系的表。`images``posts_href_images``many-to-many`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:01:06.970

```
posts:
post_id | post data...
1 | "first"
2 | "second"
3 | "third"
4 | "fourth"

images:
image_id | image_data...
1 | "JPEG...."
2 | "PNG...."
3 | "GIF..."
4 | "BMP..."

posts_href_images:
post_id | image_id
1 | 2
1 | 3
2 | 1
2 | 2
3 | 3 
```

Now you have the following pairs: (first, PNG), (first,GIF), (second,JPEG), (second,PNG), (third,GIF) [and you can see that fourth and BMP are not in the list] Now you see how can you represent 0, 1, or multiple connections

# sql - 如何对从具有相同属性的数据库表中检索到的对象进行分组？

> ID：10485353
> 
> 赞同：0
> 
> 时间：2012-05-07T16:07:18.730
> 
> 标签：sql, ibm-midrange

我正在开发一个应用程序，该应用程序允许用户从多个“页面”构建“书”，然后按照他们想要的任何顺序放置它们。多人可以构建同一本书（相同的页面以相同的顺序）是可能的。这些书籍是在处理和打印之前由用户构建的，因此我需要将具有相同布局（相同页面以相同顺序）的书籍组合在一起。我一生中写过一百万个查询，但由于某种原因，我无法掌握如何做到这一点。

我可以简单地编写一个大的 SELECT 查询，然后循环遍历结果并构建具有相同序列的相同页面的对象数组，但我试图弄清楚如何用一个查询来做到这一点。

这是我的数据布局：

```
dbo.Books

BookId
Quantity

dbo.BookPages

BookId
PageId
Sequence

dbo.Pages

PageId
DocName 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:24:16.927

只有当页数 = 匹配数时，这些书才相同。

当我开始时，它被标记为 TSQL。这可能与 SQL 上的语法不同。

```
;WITH BookPageCount
AS
(
    select b1.bookID, COUNT(*) as [individualCount]
    from book b1 with (nolock)
    group by b1.bookID 
),
BookCombinedCount
AS
(
    select b1.bookID as [book1ID], b2.bookID as [book2ID], COUNT(*) as [combindCount]
    from book b1 with (nolock)
    join book b2 with (nolock)
    on b1.bookID < b2.bookID 
    and b1.squence = b2.squence 
    and b1.page = b2.page
    group by b1.bookID, b2.bookID
)
select BookCombinedCount.book1ID, BookCombinedCount.book2ID
from BookCombinedCount 
join BookPageCount as book1 on book1.bookID = BookCombinedCount.book1ID 
join BookPageCount as book2 on book2.bookID = BookCombinedCount.book2ID 
where BookCombinedCount.combindCount = book1.individualCount
  and BookCombinedCount.combindCount = book2.individualCount.PageCount 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:15:03.323

所以，我需要澄清一些事情：

*   一旦用户按照他们想要的方式订购页面，它们是否会保存回数据库？
*   如果是，那么问题是运行查询以将具有相同页码的书籍订单分组，以便以最佳方式将它们发送到打印机？
*   或者，用户是否布局页面，然后将订单直接发送到打印机？如果是这样，捕获请求的打印作业并在发送到打印机的途中即时订购它们似乎更复杂/效率更低......
*   您使用什么语言/技术来创建此解决方案？。网？爪哇？

有了这些问题的答案，我就能更好地衡量你的需求。

* * *

根据我的问题的答案，我还假设：

*   您正在使用某种类型的多对多表来存储客户页面排序。如果是这样，那么您需要编写一个查询来选择不同的页面排序，并按这些页面排序进行分组。这可以通过单个 SQL 查询来实现。
*   但是，如果您觉得您想要更多地控制这些数据的连接方式，那么以编程方式执行此操作可能是可行的方法，尽管您会因读取所有数据而失去性能，然后以可消耗的方式输出该数据通过您的打印机。

# c# - 如果我只有类名和 dll 名，如何获得完全限定的程序集引用？

> ID：10485356
> 
> 赞同：0
> 
> 时间：2012-05-07T16:07:20.503
> 
> 标签：c#, reflection, compact-framework

我有一个在紧凑框架 3.5 中运行的应用程序，并且必须通过线路将信息发送到运行 4.0 框架的服务。具体来说，我正在传递有关异常的信息。我需要能够使用类名和程序集名创建指定异常的新实例。

我正在使用 Activator.CreateInstance() 创建对象，并且我计划使用 Type.GetType() 来获取对 4.0 框架中相应类型的引用。但是，我不太清楚如何仅从类名和程序集名称中获取类型引用（或完全限定的程序集名称以获取类型引用）（因为我不知道 4.0 程序集中的 PublicKeyToken）。

我意识到我可以作弊并将一些信息存储在我的服务中以进行翻译，但我正在寻找一种完全动态的数据查找，它不涉及对任何标记或版本字符串进行硬编码。

我正在使用 ProtoBuf-Net 通过网络对我的数据进行序列化/反序列化。我只是序列化 Type 值本身，但我发现这适用于某些 Exception 类型而不适用于其他类型，所以我求助于传递 Class 和 Assembly 的字符串名称，因为我知道一个字符串将兼容两个不同类型之间的序列化框架类型/版本。具体来说，我在传递 Type 值时遇到的第一个异常是 System.Net.WebException。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:09:28.173

您只需编写`System.Web`代码，Fusion（CLR 的程序集加载器）就会为您找到匹配的程序集。
您不需要版本或公钥令牌。

例如：

```
Type.GetType("System.Web.HttpException, System.Web") 
```

# android - 识别器意图无法定义其常量

> ID：10485357
> 
> 赞同：2
> 
> 时间：2012-05-07T16:07:50.370
> 
> 标签：android, voice-recognition

我正在使用 Google 提供的活动[voicerecognition.java](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/VoiceRecognition.html)来允许用户选择一种语言，对着手机说话，并查看他们刚才所说的内容。当我取出所有语言常量时它可以工作，但是当我放入语言选项时，我会出错。例如：

*   该类型的方法 getVoiceDetailsIntent(VoiceRecognition) 未定义
*   EXTRA_SUPPORTED_LANGUAGES 无法解析或不是字段
*   EXTRA_LANGUAGE_PREFERENCE 无法解析或不是字段
*   new Runnable(){} 类型的方法 run() 必须覆盖超类方法

我想我可能只需要更新 SDK 或其他东西，但一切都是最新的。我不知道出了什么问题，因为我完全按照提供的链接复制了活动。

```
package com.sample.voicerecog;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.os.Bundle;
import android.os.Handler;
import android.speech.RecognizerIntent;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Spinner;
import android.widget.SpinnerAdapter;
import android.widget.TextView;
import android.widget.Toast;
import java.util.ArrayList;
import java.util.List;

public class VoiceRecognition extends Activity implements OnClickListener {    
private static final String TAG = "VoiceRecognition";    
private static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;    
private ListView mList;    
private Handler mHandler;    
private Spinner mSupportedLanguageView;    

/**     
 * Called with the activity is first created.     
 */    
@Override    
public void onCreate(Bundle savedInstanceState) {        
    super.onCreate(savedInstanceState);        
    mHandler = new Handler();        

    // Inflate our UI from its XML layout description.        
    setContentView(R.layout.voice_recognition);        

    // Get display items for later interaction        
    Button speakButton = (Button) findViewById(R.id.btn_speak);        
    mList = (ListView) findViewById(R.id.list);        
    mSupportedLanguageView = (Spinner) findViewById(R.id.supported_languages);        
    // Check to see if a recognition activity is present        
    PackageManager pm = getPackageManager();        
    List<ResolveInfo> activities = pm.queryIntentActivities(                
            new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);        
    if (activities.size() != 0) {            
        speakButton.setOnClickListener(this);        
    } else {           
        speakButton.setEnabled(false);      
        speakButton.setText("Recognizer not present");   
    }      

    // Most of the applications do not have to handle the voice settings. If the application     
    // does not require a recognition in a specific language (i.e., different from the system     
    // locale), the application does not need to read the voice settings.      
    refreshVoiceSettings();  
}

/**
 * Handle the click on the start recognition button.     
 */    
public void onClick(View v) {        
    if (v.getId() == R.id.btn_speak) {           
        startVoiceRecognitionActivity();        
    }    
}   

/**     
 * Fire an intent to start the speech recognition activity.     
 */    
private void startVoiceRecognitionActivity() {       
    Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);        

    // Display an hint to the user about what he should say.      
    intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Speech recognition demo");    

    // Given an hint to the recognizer about what the user is going to say       
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,              
            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);    

    // Specify how many results you want to receive. The results will be sorted   
    // where the first result is the one with higher confidence.       
    intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 5); 

    // Specify the recognition language. This parameter has to be specified only if the     
    // recognition has to be done in a specific language and not the default one (i.e., the   
    // system locale). Most of the applications do not have to set this parameter.  
    if (!mSupportedLanguageView.getSelectedItem().toString().equals("Default")) {     
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE,                  
                mSupportedLanguageView.getSelectedItem().toString());  
    }    
    startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);   
}    

/**     
 * Handle the results from the recognition activity.     
 */    
@Override  
protected void onActivityResult(int requestCode, int resultCode, Intent data) {   
    if (requestCode == VOICE_RECOGNITION_REQUEST_CODE && resultCode == RESULT_OK) {           
        // Fill the list view with the strings the recognizer thought it could have heard           
        ArrayList<String> matches = data.getStringArrayListExtra(                 
                RecognizerIntent.EXTRA_RESULTS);          
        mList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,      
                matches));       
    } 
    super.onActivityResult(requestCode, resultCode, data);   
}

private void refreshVoiceSettings() {      
    Log.i(TAG, "Sending broadcast");    
    sendOrderedBroadcast(RecognizerIntent.getVoiceDetailsIntent(this), null,   
            new SupportedLanguageBroadcastReceiver(), null, Activity.RESULT_OK, null, null);   
} 

private void updateSupportedLanguages(List<String> languages) {    
    // We add "Default" at the beginning of the list to simulate default language.   
    languages.add(0, "Default");   

    SpinnerAdapter adapter = new ArrayAdapter<CharSequence>(this,    
            android.R.layout.simple_spinner_item, languages.toArray(    
                    new String[languages.size()])); 
    mSupportedLanguageView.setAdapter(adapter); 
}

private void updateLanguagePreference(String language) {      
    TextView textView = (TextView) findViewById(R.id.language_preference);     
    textView.setText(language); 
}  

/**     
 * Handles the response of the broadcast request about the recognizer supported languages.     
 *     
 * The receiver is required only if the application wants to do recognition in a specific language.     
 */  

private class SupportedLanguageBroadcastReceiver extends BroadcastReceiver {      
    @Override  
    public void onReceive(Context context, final Intent intent) {     
        Log.i(TAG, "Receiving broadcast " + intent);  
        final Bundle extra = getResultExtras(false); 
        if (getResultCode() != Activity.RESULT_OK) {    
            mHandler.post(new Runnable() {     
                @Override        
                public void run() {              
                    showToast("Error code:" + getResultCode());    
                }       
            });   
        }
        if (extra == null) {        
            mHandler.post(new Runnable() {          
                @Override             
                public void run() {  
                    showToast("No extra");       
                }
            });
        }      
        if (extra.containsKey(RecognizerIntent.EXTRA_SUPPORTED_LANGUAGES)) {         
            mHandler.post(new Runnable() {      
                @Override       
                public void run() {          
                    updateSupportedLanguages(extra.getStringArrayList(      
                            RecognizerIntent.EXTRA_SUPPORTED_LANGUAGES));     
                }
            });
        }      
        if (extra.containsKey(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE)) {    
            mHandler.post(new Runnable() {         
                @Override      
                public void run() {          
                    updateLanguagePreference(     
                            extra.getString(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE));       
                }
            });
        }
    }

    private void showToast(String text) {      
        Toast.makeText(VoiceRecognition.this, text, 1000).show();   
    }
}
} 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:00:28.343

您的项目的 API 级别似乎低于 8 级。要解决此问题，如果您使用的是 Eclipse，请右键单击您的项目并单击属性。从左侧菜单中选择 Android，然后选择不同的项目构建目标。如果没有找到 8 级或更高级别的，请单击 Window -> Android SDK Manager 并安装一个。[您可以在此处查看](http://developer.android.com/reference/android/speech/RecognizerIntent.html)各种 API 级别上可用的 RecognizerIntent 功能。

# java - 停止警报 Android 应用程序

> ID：10485358
> 
> 赞同：0
> 
> 时间：2012-05-07T16:07:53.820
> 
> 标签：java, android, alarm

谁能告诉我如何停止这个警报？

我试图通过使用处理程序来阻止它，但它没有阻止它继续重复？

这是我的代码：

//====================================更新后=========== =======================

```
 Button bStart, bStop ;
     long mCurrentTime;
     Calendar calendar;
     TextView tv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        bStart = (Button) findViewById (R.id.button1);
        bStop = (Button) findViewById (R.id.button2);
        tv = (TextView) findViewById (R.id.textView1);

        final Intent intent = new Intent(AlarmNewActivity.this, RepeatingAlarm.class);
        final  PendingIntent sender = PendingIntent.getBroadcast(AlarmNewActivity.this, 0, intent, 0);
        final AlarmManager am = (AlarmManager)getSystemService(ALARM_SERVICE);

        bStart.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                calendar = Calendar.getInstance();
                calendar.setTimeInMillis(System.currentTimeMillis());
                mCurrentTime = calendar.getTimeInMillis();
                //tv.setText(""+ mCurrentTime );

                 new Handler().postDelayed(new Runnable() {
                        public void run() {
                             bStop.performClick();
                             tv.setText(""+ mCurrentTime );
                        }
                    }, ( mCurrentTime + 30 * 1000 ));
                am.setRepeating(AlarmManager.RTC_WAKEUP,
                        mCurrentTime + 10 *1000, 5*1000, sender);

            }
        });

        //==================================================================================

        bStop.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                am.cancel(sender);
            }
        });
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:34:21.827

使警报管理器全局化，以便各种功能引用同一个对象

```
 Button bStart, bStop ;
     long mCurrentTime;
     Calendar calendar;
     TextView tv;
     AlarmManager am
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

       ...
       ...

        Intent intent = new Intent(AlarmNewActivity.this, RepeatingAlarm.class);
        PendingIntent sender = PendingIntent.getBroadcast(AlarmNewActivity.this, 0, intent, 0);
        am = (AlarmManager)getSystemService(ALARM_SERVICE);

        ..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:19:10.967

您好，您可以使用以下命令传递您的待处理意图：

```
am.cancel(yourPendingIntent); 
```

几个月前我在 AlarmManager 上写了一个很好的教程，你可以在这个[链接上找到](http://alchemiaandroid.altervista.org/pagina-92229.html)

# javascript - 将类似数组的字符串解析为数组

> ID：10485366
> 
> 赞同：1
> 
> 时间：2012-05-07T16:08:30.577
> 
> 标签：javascript, arrays, json, string

我有这个 JavaScript 字符串，其中包含格式错误的 JSON 数组，我想将其解析为它所代表的数组。字符串是：

`variable = [{ var1: 'value11', var12: 'value2', var3: 'value13' }, { var1: 'value21', var2: 'value22', var3: 'value23' }]`

是否可以解析它以使其成为实际的数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:16:16.533

我假设它`variable =`也作为字符串的一部分返回，所以如果我错了，请纠正我。

如果您使用的是 JavaScript，则可以对其进行评估，然后使用它。不幸的是，这确实意味着您仍然坚持使用该变量名。

[http://jsfiddle.net/2xTmh/](http://jsfiddle.net/2xTmh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:29:57.420

如果您使用的是 php，则可以使用正则表达式“修复”json 字符串。这有效：

```
<?php 
$json = "variable = [{ var1: 'value11', var12: 'value2', var3: 'value13' }, { var1: 'value21', var2: 'value22', var3: 'value23' }]";
// replace 'variable =' with '"variable" :' and surround with curly braces
$json = preg_replace('/^(\S+)\s*=\s*([\s\S]*)$/', '{ "\1" : \2 }', $json);
// quote keys and change to double quotes
$json = preg_replace("/(\S+): '(\S+)'/", '"\1": "\2"', $json);
echo $json . "\n";

$data = json_decode($json, true);

print_r($data);
?> 
```

这输出：

```
{ "variable" : [{ "var1": "value11", "var12": "value2", "var3": "value13" }, { "var1": "value21", "var2": "value22", "var3": "value23" }] }
Array
(
    [variable] => Array
        (
            [0] => Array
                (
                    [var1] => value11
                    [var12] => value2
                    [var3] => value13
                )

            [1] => Array
                (
                    [var1] => value21
                    [var2] => value22
                    [var3] => value23
                )

        )

) 
```

# .net - 扩展器作为 ListView 项

> ID：10485369
> 
> 赞同：2
> 
> 时间：2012-05-07T16:08:59.677
> 
> 标签：.net, wpf, listview, expander

我需要做一个具有单列的[ListView ，其中该列是](http://msdn.microsoft.com/en-us/library/system.windows.controls.listview(v=vs.90).aspx)[Expander](http://msdn.microsoft.com/en-us/library/system.windows.controls.expander(v=vs.90).aspx)。

特别是我有这样的课：

```
public class MyItemT
{
    public string Title { get; set; }
    public TextBlock Info { get; set; }
} 
```

以及这些对象的列表：

```
List<MyItemT> Mylist = new List<MyItemT>(); 
```

我需要用 Expander 对象填充 ListView，其中 Header 与 Title 绑定，Content 与 Info 属性绑定。

例如 Expander 的 ListView 是这样的：

```
<Expander Header="My Expander">
   <TextBlock TextWrapping="Wrap">
      Lorem ipsum dolor sit amet, consectetur
      adipisicing elit, sed do eiusmod tempor incididunt ut
      labore et dolore magna aliqua
   </TextBlock>
</Expander> 
```

![我的扩展器](../Images/0d58b558d73f7a8fbf5076384f916dfe.png)

> ...等等（很多，因为我的 ListView 有元素）...

ListView 不应该有标题栏，当然一切都将以编程方式完成。

应该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:31:00.067

只需为您的 ListView 定义一个 ItemTemplate 并在其中放置一个 Expander。这至少适用于 ListView 中的其他控件，因此它也应该在这里工作。

```
<ListView ItemsSource="{Binding YourSource}" Name="listView">
  <ListView.ItemTemplate>
    <DataTemplate>
      <Expander Header="{Binding Title}">
        <TextBlock TextWrapping="Wrap" Text="{Binding Info}" />
      </Expander>
    </DataTemplate>
  </ListView.ItemTemplate>
</ListView> 
```

绑定也可以通过这样的代码来完成。

```
List<MyItemT> Mylist = new List<MyItemT>();
listView.ItemsSource = Mylist; 
```

您必须更改的一件事是您的 Info 属性的类型，它应该是字符串类型。

哦，你的类应该实现[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)，否则绑定将不会总是正常工作。

# php - 困惑：PHP 致命错误：在第 0 行的 Unknown 中抛出没有堆栈帧的异常？

> ID：10485371
> 
> 赞同：35
> 
> 时间：2012-05-07T16:09:19.387
> 
> 标签：php, exception, error-handling

我发现错误的一个常见原因是[从异常处理程序中抛出异常](http://www.wamped.org/post/2174829567/exception-thrown-without-a-stack-frame-in-unknown-on-lin)。我很确定这不会发生在我正在尝试调试的应用程序中......但是我已经将所有初始化处理行放在 index.php 的顶部的 try/catch 中。*

这显然也可能发生，因为[有些事情不能序列化](https://stackoverflow.com/questions/5440640/session-saving-problem-getting-php-fatal-error-exception-thrown-without-a-stac) [以存储在 session 中](https://stackoverflow.com/questions/4624223/object-in-session-fatal-error-exception-thrown-without-a-stack-frame-in-unknow)。这个应用程序最多将数组存储到会话中（相当多），但我相信它不会在其中存储任何不寻常的东西。

有人评论说这发生在他们身上，因为他们的主键[需要是 CHAR(32) 而不是 INT(11)](https://stackoverflow.com/a/6795527/425767)。这个应用程序中的PK都是INT。

其他建议是，它可能是[在 5.3.6 中修复的](https://stackoverflow.com/questions/3662159/how-do-i-track-down-an-exception-thrown-without-a-stack-frame-in-unknown-on-lin)[PHP 5.3.3](https://stackoverflow.com/questions/5440640/session-saving-problem-getting-php-fatal-error-exception-thrown-without-a-stac) 的问题、[完整磁盘](https://stackoverflow.com/a/7482211/425767)以及[需要对 SimpleXML 值进行类型转换的](http://www.php.net/manual/en/function.set-exception-handler.php#101502)问题。我们确实正在运行 PHP 5.3.3，但在这种情况下升级必须是最后的手段。它并不总是这样做。

更新/注意：我自己实际上无法重现错误，只能在日志中看到它发生，请参阅下面的段落了解我*认为*错误发生的位置......

* 从错误日志来看，它似乎至少发生在一个地方是 index.php。我推断这一点只是因为它在某些条目中由引用 URL 指示。try/catch 代码目前仅围绕脚本的“顶部”初始化部分，其下方主要是 HTML 输出。输出中有一些 PHP 代码（虽然很简单），所以我可能需要对其进行测试。这是捕获部分，它不会在日志中产生任何输出：

```
} catch (Exception $e) {
    error_log(get_class($e)." thrown. Message: ".$e->getMessage(). "  in " . $e->getFile() . " on line ".$e->getLine());
    error_log('Exception trace stack: ' . print_r($e->getTrace(),1));
} 
```

真的很感激这方面的任何提示！

编辑：PHP 作为 Apache 模块运行（服务器 API：Apache 2.0 处理程序）。我认为没有使用任何 PHP 加速器，但可能只是我不知道如何判断。[维基百科上列出的](http://en.wikipedia.org/wiki/List_of_PHP_accelerators)没有一个在 phpinfo() 中。

据我所知，MPM 是 prefork。这是我第一次研究 MPM：

```
# ./httpd -l
Compiled in modules:
  core.c
  prefork.c
  http_core.c
  mod_so.c 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-24T22:17:31.893

## 问题

简而言之，您在某个地方抛出了一个异常，您不知道在哪里，直到现在您无法重现该错误：它只发生在某些人身上，但不会发生在您身上。您知道它发生在其他人身上，因为您在错误日志中看到了这一点。

## 重现问题

由于您已经消除了需要重现错误的常见原因。如果您知道哪个参数会导致错误，则应该很容易找到错误。

*   如果您知道所有 POST/GET 参数，很可能就足够了。
*   如果您不能仅使用这些进行复制，则需要了解其他请求标头。比如用户代理，accept-encoding，...
*   如果还是不能复现，那就很困难了：错误可能取决于状态（会话）、当前时间、源IP地址等。

### 自定义日志方法

让我们从简单的开始：要获取所有参数，您可以在受影响的 php 文件的最开头编写如下内容：

```
file_put_contents("/path/to/some/custom_error_log", date()."\n".print_r(get_defined_vars(), true), FILE_APPEND | LOCK_EX); 
```

不要忘记 custom_error_log 文件必须对您的 php 应用程序是可写的。然后，当错误日志中出现错误时，在您的 custom_error_log 文件中找到相应的行。希望每秒没有太多请求，以便您仍然可以识别请求。也许错误日志中的一些附加参数（如源 ip）可以帮助您识别请求（如果您的错误日志显示）。根据该数据，使用相同的 POST/GET 参数重建请求。

### tcpdump 方法

下一个选项也非常简单，但要求您在目标计算机上具有 root 访问权限，即安装 tcpflow。然后创建一个文件夹， cd 进入该文件夹并简单地执行 (as root) `tcpflow "port 80"`。选项（端口 80）是一个 pcap 过滤器表达式。要查看您可以使用它执行的所有操作，请参阅`man pcap-filter`。这些过滤器表达式可以做很多事情。

现在 tcpflow 将记录端口 80 上的所有 tcp 连接，通过组合属于一个连接的包并将此数据转储到一个文件来重建完整的数据交换，每个连接创建两个新文件，一个用于传入数据，一个用于传出数据。现在再次根据错误日志中的时间戳和文件的最后修改时间戳查找导致错误的连接的文件。然后你会得到完整的 http 请求头。您现在可以完全重构 HTTP 请求，包括设置相同的接受编码、用户代理等。您甚至可以将请求直接通过管道传输到 netcat，重放确切的请求。请注意，某些参数（如 sessionid）可能会妨碍您。如果 php 发现会话已过期，您可能只会重定向到登录或其他意外。

### 嘲笑更多的东西

如果这些都没有帮助，并且您无法在您的机器上重现错误，那么您可以尝试模拟所有难以模拟的内容。例如源 IP 地址。这可能需要一些特技，但这是可能的：您可以使用带有“-w”选项的 ssh 连接到您的服务器，创建一个隧道接口。然后将有问题的 ip 地址分配给您自己的机器并设置路由（路由添加主机）规则以使用特定 ip 的隧道。如果您可以将两台计算机直接连接在一起，那么您甚至可以在没有隧道的情况下做到这一点。

不要忘记嘲笑应该是最简单的会话。您可以使用 print_r(get_defined_vars()) 方法读取所有会话变量。然后，您需要创建一个具有完全相同变量的会话。

### 询问用户

另一种选择实际上是询问用户他在做什么。也许您可以按照与他相同的步骤进行复制。

### 如果这些都没有帮助

如果这些都没有帮助......好吧......那么它会变得非常困难。IP 的事情已经非常不可能了。它可能是一个 GEO-IP 库，导致来自特定区域的 IP 出现错误，但这些都是不太可能发生的事情。如果以上都没有帮助您重现问题，那么您可能只是在 custom_log_file-call / tcpflow 生成的所有数据中没有找到正确的请求。尝试通过获取更准确的时间戳来增加机会。您可以在 php 中使用 microtime() 作为 date() 的替代。检查您的网络服务器，如果您可以在错误日志中获得比秒数更准确的信息。编写您自己的“tail”实现，为您提供更准确的时间戳，...减少系统负载，这样您就不必从那么多数据中进行选择（尝试一天中的另一个时间，

## 一旦您可以重现问题，请圈出问题

现在一旦你可以重现它应该是在公园里散步找到真正的原因。您可以通过反复试验找到导致错误的参数，或者通过将其与其他导致错误的请求进行比较，寻找相似之处。然后你可以看到这个参数的作用，哪些库访问它等等。你可以一个一个地禁用每个使用该参数的组件，直到你不能再重现。然后你得到你的组件，可以更深入地研究这个问题。

告诉我们你发现了什么。我好奇 ;-）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T16:17:33.393

我也有这样的错误。发现我在会话类（由 session_handler 使用）中返回了一个 sql 对象，而不是返回任何内容或至少不返回 sql 对象。如果您也返回一些不正确的东西，请首先查看您的 _write 和 _read 方法。

[注意：......第 0 行未知 - 如何找到正确的行，它不是“第 0 行”](https://stackoverflow.com/questions/9076899/notice-unknown-on-line-0-how-to-find-correct-line-its-not-line-0)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T10:20:24.700

当您注册异常处理程序时会发生什么，而不是将代码包装在 try/catch 块中？显然，您的 try/catch 块没有捕获异常，从而导致将错误记录到 Apache。通过注册处理程序，您可以确保处理任何未捕获的异常。

此外，如果您在应用程序中使用命名空间，请确保在 catch 块中写入 \Exception（或通过 use 语句包含 Exception 类）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-03T20:07:28.943

我意识到这个问题已经得到解答，但我会添加这个，因为它可能对某人有帮助：

我设法（无意中）在没有堆栈帧的情况下从一个函数产生错误，该函数使用自己的错误处理程序来保持对执行的控制，同时调用一个潜在的“危险”函数，如下所示：

```
// Assume the function my_error_handler() has been defined to convert any
// PHP Errors, Warnings, or Notices into Exceptions.

function foo() {
    // maintain control if danger() crashes outright:
    set_error_handler('my_error_handler');

    try {
        // Do some stuff.

        $r = danger();
    } catch (Exception $e) {
        $r = 'Bad Stuff, Man!';
    }

    restore error_handler();
    return $r;
} 
```

如果“做一些事情”中的逻辑直接从 foo() 返回，绕过对 restore_error_handler() 的调用，则“无法追踪的失败”将*在程序执行结束时发生。*我从这次经历中得到的是：

1.  PHP 维护着*一堆*错误处理程序，每次调用 set_error_handler() 都会变得更深/更高。
2.  如果您将错误处理程序推入堆栈并且在程序“正常”退出之前不自行清理，则可能会发生坏事。

这是一个难以隔离的错误 - 我基本上将问题缩小到上述功能，然后盯着它直到我的眼睛流血。

那么，如果我知道我现在所知道的，我将如何追踪它呢？由于我不知道直接检查 PHP 错误处理程序“堆栈”的任何方法，我认为使用 Singleton 对象来封装 PHP 错误处理程序的所有设置/恢复操作可能是有意义的。至少可以在正常退出程序之前检查 Singleton 的状态，并且如果检测到“悬空”错误处理程序以在 PHP 崩溃之前生成合理的失败/警告消息。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-12T16:26:54.110

这可能有点晚了，但我在将站点从本地服务器移动到远程服务器时发现了一个问题。我正在使用 Concrete5 cms 在本地开发了我的站点（xampp 中的 windows 8），然后上传到运行 Cent 0S 的远程服务器

默认情况下，Windows mysql 不区分大小写，并创建了一个小写数据库。将其上传到远程服务器后，我收到“在第 0 行的未知中抛出没有堆栈帧的异常？”

然后我纠正了数据库表的情况，我的网站又开始工作了。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-27T15:53:16.997

对我们来说，这个错误是由于无意中序列化了 SimpleXML 对象。

如果您在 5.3.3 中使用 SimpleXML 对象，请确保在序列化会话中的值时将节点值转换为您需要的任何值（例如字符串）。

**之前**：

```
 $token = $response->Token->Value;
  /* token saved in session, results in line 0 error */ 
```

**之后**：

```
$token = (string) $response->Token->Value;
  /* token saved in session, no error */ 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-24T17:57:08.503

我有完全相同的错误。一个非常特殊的情况：如果您将未命名的函数（闭包）挂钩连接到对象实例的挂钩点。之后，您尝试序列化此对象。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-06-27T14:29:51.563

在错误地填充了 Illuminate Eloquent 模型的 Fillable 属性后，我遇到了同样的错误。请注意数组的最后 3 个元素，其中一个**缺少 coma**。

```
protected $fillable = [
    'budget',        
    'routestatus' ,
    'userroutenumber'
    'totalmovingseconds',
    'totalidleseconds'
]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-03T08:14:08.070

产生此错误的一种简单方法是使用`register_globals = On`. 那么你只需要两行代码：

```
<?php
    $_SESSION["my_var"] = "string";
    $my_var = new MyClass(); //could be any class, i guess
?> 
```

一旦你重新加载这个页面，你就会得到`Exception thrown without a stack frame in Unknown on line 0`- 错误。似乎类的实例和（会话）变量之间存在冲突。
至少这就是我得到这个很难调试的恼人错误的原因。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-20T13:27:55.130

我有同样的错误，它似乎将服务器从 centos 5 升级到 centos 6 并将 PHP 从 5.4 降级到 5.3。实际问题是 PHP apc，未正确配置。检查您的 APC。我使用的是 Symfony2，所以你可能会在[Symfony Unable to allocate memory for pool找到一些帮助](https://stackoverflow.com/questions/14363612/symfony-unable-to-allocate-memory-for-pool)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-29T23:43:02.940

您可能在数据库中有一个损坏/不一致的表。尝试转储数据库。如果你得到一个错误，那就是时候了。修复那张桌子，问题应该会消失。

这就是为什么全新安装有效的原因。干净的安装就是那么干净。

mysqlcheck 应该可以工作，但如果它没有显示并且问题仍然在上面。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-10-28T13:22:30.767

当我在几个 Symfony 包上更改名称空间时，我遇到了这个问题。删除 symfony 缓存目录中的文件解决了这个问题。

# java - 避免在读取和写入文件时松开换行符 (\n)

> ID：10485375
> 
> 赞同：4
> 
> 时间：2012-05-07T16:09:30.410
> 
> 标签：java, file-io, properties, line-breaks

我阅读了几个属性文件，以将它们与缺少键的模板文件进行比较。

```
FileInputStream compareFis = new FileInputStream(compareFile);
Properties compareProperties = new Properties();
compareProperties.load(compareFis); 
```

注意：我以同样的方式阅读模板文件。

阅读后，我比较它们并将缺少的键与模板文件中的值写入一个集合。

```
CompareResult result = new CompareResult(Main.resultDir);
[...]
if (!compareProperties.containsKey(key)) {
    retVal = true;
    result.add(compareFile.getName(), key + "=" + entry.getValue());
} 
```

最后，我将丢失的键及其值写入一个新文件。

```
for (Entry<String, SortedSet<String>> entry : resultSet) {
    PrintWriter out = null;
    try {
        out = new java.io.PrintWriter(resultFile);
        SortedSet<String> values = entry.getValue();
        for (String string : values) {
            out.println(string);
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } finally {
        out.flush();
        out.close();
    }
} 
```

如果我打开结果文件，我会看到模板文件值中的所有换行符“\n”都被替换为新行。例子：

```
test.key=Hello\nWorld! 
```

变成

```
test.key=Hello
World! 
```

虽然这基本上是正确的，但就我而言，我必须保留“\ n”。

有谁知道我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:15:26.123

由于您的输出似乎是一个属性文件，因此您应该使用[Properties.store()](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#store%28java.io.OutputStream,%20java.lang.String%29)来生成输出文件。这不仅会处理换行符的编码，还会处理其他特殊字符（例如非 ISO8859-1 字符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:16:24.910

使用`println`将使用特定于平台的行终止符结束每一行。您可以改为明确编写所需的行终止符：

```
for (Entry<String, SortedSet<String>> entry : resultSet) {
    PrintWriter out = null;
    try {
        out = new java.io.PrintWriter(resultFile);
        SortedSet<String> values = entry.getValue();
        for (String string : values) {
            out.print(string); // NOT out.println(string)
            out.print("\n");
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } finally {
        out.flush();
        out.close();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T16:39:27.100

[使用Properties.store()](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#store%28java.io.OutputStream,%20java.lang.String%29)将示例添加到 JB Nizet 答案（我认为最好的 ）

```
 FileInputStream compareFis = new FileInputStream(compareFile);
    Properties compareProperties = new Properties();
    compareProperties.load(compareFis);

 ....

    StringBuilder value=new StringBuilder();
    for (Entry<String, SortedSet<String>> entry : resultSet) {

            SortedSet<String> values = entry.getValue();
            for (String string : values) {
                value.append(string).append("\n");
            }
    }
    compareProperties.setProperty("test.key",value);
    FileOutputStream fos = new FileOutputStream(compareFile);
    compareProperties.store(fos,null);
    fos.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T16:12:33.333

你需要这样的东西：

```
"test.key=Hello\\nWorld!" 
```

`"\\n"`实际上在哪里`\n`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T16:13:37.767

在序列化之前转义 \n。如果您打算读取输出文件的内容，您的阅读代码将需要注意转义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T16:20:53.353

您还可以查看 Apache Commons StringEscapeUtils.escapeJava( String )。

# css - css相对定位

> ID：10485378
> 
> 赞同：-2
> 
> 时间：2012-05-07T16:09:42.603
> 
> 标签：css

我正在使用设计器来开发 UI，并且该设计器为组件生成绝对定位的 css。当某些组件未呈现时，我希望下一个组件相应地定位自己。我如何使用 css 来做到这一点。例如：

**我希望从文档中删除的 label3 `<div id="div1">` 向上移动并使用已删除的标签空间。**

```
<html>
<head>
<style type="text/css">
#set
{
position:absolute;
left:100px;
top:100px;
height:100px;
width:300px;
}

#div1{
position:relative;

}

#label1{
position:absolute;
left:10px;
top:30px;
height:10px;
width:10px
}

#label2{
position:absolute;
left:100px;
top:30px;
height:10px;
width:10px
}

#label3{
position:absolute;
left:20px;

}

</style>
</head>

<body>

<fieldset id="set">
<label id="label3">Male:</label>
<div id="div1">
<label  id="label1">Divlabel1:</label>
<label  id="label2">Divlabel2:</label>

</div>

</fieldset>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:39:10.890

我将页面的动态部分放在一个静态定位的 div 中。并将位置：绝对更改为位置：相对并删除顶部和左侧属性。静态定位的元素从文档中删除，但相对定位的元素一个接一个地放置。

# oracle - 如何计算具有“字符串”值的列

> ID：10485380
> 
> 赞同：1
> 
> 时间：2012-05-07T16:09:49.847
> 
> 标签：oracle

我的查询有问题我有一个表`newtable`并插入了值：

```
create table newtable(
col1 varchar2(3),
col2 varchar2(3),
col3 varchar2(3),
col4 varchar2(3),
col5 varchar2(3)
)

insert into newtable values(5,'m','q',4,3); 
```

我想将只有数字的列中的值加在一起。在这种情况下，我希望结果为 12 (5+4+3)。

在 Excel 中，我会对该函数执行类似的操作`countif`。我如何在 Oracle 中执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T16:16:09.557

您可以创建一个函数，将字符串转换为数字或返回 0 并在每一列上使用该函数

```
SQL> ed
Wrote file afiedt.buf

  1  create or replace function my_to_number( p_str in varchar2 )
  2    return number
  3  is
  4    l_num number;
  5  begin
  6    l_num := to_number( p_str );
  7    return l_num;
  8  exception
  9    when others then
 10      return 0;
 11* end;
SQL> /

Function created.

SQL> select my_to_number(col1) +
  2         my_to_number(col2) +
  3         my_to_number(col3) +
  4         my_to_number(col4) +
  5         my_to_number(col5)
  6    from newtable;

MY_TO_NUMBER(COL1)+MY_TO_NUMBER(COL2)+MY_TO_NUMBER(COL3)+MY_TO_NUMBER(COL4)+MY_T
--------------------------------------------------------------------------------
                                                                              12 
```

`varchar2`然而，在关系数据库中，当您希望随后将数据视为数字以执行诸如将数字相加之类的操作时，设计一个将数字数据存储在列中的数据模型几乎可以肯定是错误的。设计一个特定列有时存储一个数值，有时存储一个字符串的数据模型几乎可以肯定是错误的。所以我会特别担心`newtable`需要重新考虑的设计。

# cordova - 修改代码以使其成为基于导航的应用程序

> ID：10485384
> 
> 赞同：1
> 
> 时间：2012-05-07T16:09:53.460
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我为我的项目使用了[以下教程](http://docs.sencha.com/touch/2-0/#!/guide/getting_started)。我需要添加一个按钮，当用户单击该按钮时。我需要它导航到另一个 vire，但它应该被添加到导航堆栈中（因此默认情况下它会有一个后退按钮）。

**简而言之，我需要[修改本教程的代码，](http://docs.sencha.com/touch/2-0/#!/guide/getting_started)使其成为基于导航的应用程序。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:21:15.187

所有你需要的是[`Ext.navigation.View`](http://docs.sencha.com/touch/2-0/#!/api/Ext.navigation.View)

从上面的链接尝试这个简单的代码..

```
var view = Ext.create('Ext.NavigationView', {
    fullscreen: true,

    items: [{
        title: 'First',
        items: [{
            xtype: 'button',
            text: 'Push a new view!',
            handler: function() {
                //use the push() method to push another view. It works much like
                //add() or setActiveItem(). it accepts a view instance, or you can give it
                //a view config.
                view.push({
                    title: 'Second',
                    html: 'Second view!'
                });
            }
        }]
    }]
}); 
```

# javascript - 如何正确使用 setInterval 和 clearInterval 在两个不同的功能之间切换？

> ID：10485385
> 
> 赞同：15
> 
> 时间：2012-05-07T16:09:53.633
> 
> 标签：javascript, animation, counter, setinterval, clearinterval

为了练习，我试图显示一个从 0 - 9 递增，然后从 9 - 0 递减，并无限重复的数字。

到目前为止我的代码似乎很接近，但是在第二次迭代中`setInterval`，我的两个函数的调用`countUp`似乎`countDown`相互冲突，因为显示的数字没有按预期的顺序计算......然后浏览器崩溃。

这是我的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Algorithm Test</title>
    </head>

    <body onload = "onloadFunctions();">
        <script type = "text/javascript">
            function onloadFunctions()
            {
                countUp();
                setInterval(countUp, 200);
            }

            var count = 0;
            function countUp()
            {
                document.getElementById("here").innerHTML = count;
                count++;

                if(count == 10)
                {
                    clearInterval(this);
                    countDown();
                    setInterval(countDown, 200);
                }
            }
            function countDown()
            {
                document.getElementById("here").innerHTML = count;
                count--;

                if(count == 0)
                {
                    clearInterval(this);
                    countUp();
                    setInterval(countUp, 200);
                }       
            }
        </script>

        From 0 - 9, up and down:&nbsp;&nbsp;<div id = "here"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-07T16:11:44.753

您需要从`setInterval( ... )`变量中捕获返回值，因为这是对计时器的引用：

```
var interval;
var count = 0;

function onloadFunctions()
{
    countUp();
    interval = setInterval(countUp, 200);
}

/* ... code ... */

function countUp()
{
    document.getElementById("here").innerHTML = count;
    count++;

    if(count === 10)
    {
        clearInterval(interval);
        countUp();
        interval = setInterval(countUp, 200);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T17:08:18.750

@Claude，你是对的，我提出的另一个解决方案与原始代码太不同了。这是另一种可能的解决方案，使用`setInterval`和切换功能：

```
function onloadFunctions() {
    var count = 0;
    var refId = null;
    var target = document.getElementById("aux");

    var countUp = function() {
        target.innerHTML = count;
        count ++;
        if(count >= 9) {
            window.clearInterval(refId);
            refId = window.setInterval(countDown, 500);
        }
    }

    var countDown = function() {
        target.innerHTML = count;
        count --;
        if(count <= 0) {
            window.clearInterval(refId);
            refId = window.setInterval(countUp, 500);
        }
    }
    refId = window.setInterval(countUp, 500);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-07T16:13:54.380

`clearInterval(this);`. 你不能那样做。您需要将返回值保存在`setInterval`.

```
var interval;
function onloadFunctions()
{
    countUp();
    interval = setInterval(countUp, 200);
}

var count = 0;
function countUp()
{
    document.getElementById("here").innerHTML = count;
    count++;

    if(count == 10)
    {
        clearInterval(interval);
        countDown();
        interval = setInterval(countDown, 200);
    }
}
function countDown()
{
    document.getElementById("here").innerHTML = count;
    count--;

    if(count == 0)
    {
        clearInterval(interval);
        countUp();
        interval = setInterval(countUp, 200);
    }       
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T16:15:02.200

尝试这个：

```
...
<body onload = "onloadFunctions();">

    <script>
        var cup, cdown; // intervals
        var count = 0,
            here  = document.getElementById("here");

        function onloadFunctions() {
            cup = setInterval(countUp, 200);
        }

        function countUp() {
            here.innerHTML = count;
            count++;

            if(count === 10) {
                clearInterval(cup);
                cdown = setInterval(countDown, 200);
            }
        }
        function countDown() {   
            here.innerHTML = count;
            count--;

            if(count === 0) {
                clearInterval(cdown);
                cup = setInterval(countUp, 200);
            }       
        }
    </script>

    From 0 - 9, up and down:&nbsp;&nbsp;<div id = "here"></div>
</body> 
```

`#here`您还可以创建对元素的单个引用。总是使用`===`而不是`==`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T16:39:37.640

有很多方法可以解决这个问题，以下是我的建议：

```
function onloadFunctions() {
    var count = 0;
    var delta = 1;
    var target = document.getElementById("here");
    var step = function() {
        if(count <= 0) delta =  1;
        if(count >= 9) delta = -1;
        count += delta;
        target.innerHTML = count;
        window.setTimeout(step, 500);
    }
    step ();
} 
```

PS：使用起来`setTimeout`比`setInteval`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-01T23:38:52.130

```
 /** Tools */
const log = require('ololog').configure({
  locate: false
})

let count = 0
let interval__UP
let interval__DOWN

function countUp () {
  count++
  log.green('countUp(): ', count)

  if (count == 5) {
    clearInterval(interval__UP)
    interval__DOWN = setInterval(function () {
      countDown()
    }, 1000)
  }

}

function countDown () {

  count--
  log.red('countDown(): ', count)

  if (count == 0) {
    clearInterval(interval__DOWN)
    interval__UP = setInterval(function () {
      countUp()
    }, 3000)
  }
}

function start () {
  countUp()
  log.cyan('start()')
  interval__UP = setInterval(function () {
    countUp()
  }, 2000)
}

start() 
```

[控制台日志显示它正在工作](https://i.stack.imgur.com/RFJeU.png)

# mysql - 删除时的 MySQL 错误

> ID：10485387
> 
> 赞同：1
> 
> 时间：2012-05-07T16:10:04.997
> 
> 标签：mysql, sql-delete

我尝试从表中删除一行，但是当我尝试时出现错误：`#1241 - Operand should contain 1 column(s)`

我的查询是：`DELETE FROM Posts WHERE idPosts = 6;`

我不明白为什么我不能删除帖子（idPosts = 6 的帖子存在）

我的桌子上也有一个触发器：

```
CREATE TRIGGER post_delete_update_lastPost_topic after delete on Posts for each row
BEGIN
  UPDATE Topics SET lastPost = (SELECT *
                                FROM Posts
                                WHERE idTopic = old.idTopic
                                ORDER BY datePosts DESC
                                LIMIT 1)
  WHERE idTopics = old.idTopic;
END $$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:14:17.747

在您的触发器中，您正在执行一项操作`SELECT *`，而您应该只选择与 lastPost 对应的列。我想这就像`SELECT postId`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:15:26.227

UPDATE Topics SET lastPost = ( **SELECT *** FROM Posts WHERE idTopic = old.idTopic ORDER BY datePosts DESC LIMIT 1) WHERE idTopics = old.idTopic;

SELECT * 正在返回几列，请尝试 SELECT ID

# android - 再次在 Activity 生命周期中： onStart 在不应该被调用时被调用

> ID：10485392
> 
> 赞同：4
> 
> 时间：2012-05-07T16:10:27.693
> 
> 标签：android, android-activity, android-lifecycle

首先，我已经阅读了[关于活动如何开始、暂停、恢复和停止的精彩解释](https://stackoverflow.com/questions/4553605/difference-between-onstart-and-onresume)。没关系，但我还有另一个问题。

[Android 参考](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)中的 Activity 生命周期图告诉我，如果我调用另一个 Activity，将为调用的 Activity 调用 onPause()，稍后，当另一个 Activity 结束时，调用者将通过 onResume() 恢复。

因此，如果第一个活动是 Main 而另一个是 Other，则循环将如下所示（伪代码）：

```
Main.onCreate()
Main.onStart()
Main.onResume()
// Main is running...  Then, the user clicks a button and Other comes in front.
Main.onPause()
Other.onCreate()
// Other's lifecycle goes here... Finally, the user returns back.
Main.onResume()
// Main is running again. 
```

这就是图表所告诉的。但是我的 Main 先是 onStart()，然后是 onResume()。

这是为什么？我误解了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T16:27:03.030

发生这种情况是因为您的 Main 活动完全从视图中消失，这会触发 onStop，当您恢复时会触发 OnStart。如果你只是从你的 Main 中部分隐藏了视图，你只会得到 onResume。

如果你看一下图表，在 onPause 和 onStop 之间，有这个“活动不再可见”......这就是你所遇到的。

为了快速参考，活动生命周期图：

![在此处输入图像描述](../Images/1a3dfea2138e40a2e61dc1ea05e66819.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:26:17.893

您被主应用程序调用的原因之一`onStart()`是您的主活动正在停止。那就是它`onStop()`正在被调用。在这种情况下首先`onStart()`会`onResume()`被调用。

# jquery - 绑定命令以隐藏事件而不调用 .trigger('hide');

> ID：10485395
> 
> 赞同：0
> 
> 时间：2012-05-07T16:10:40.910
> 
> 标签：jquery, html, hide, bind

最近我问了一个问题，如何将命令绑定到`.fadeIn()`事件，而不必`.trigger('fadeIn')`每次都调用它们。[在这篇文章](https://stackoverflow.com/questions/10336442/is-there-a-way-to-bind-a-command-to-fadein-event-without-having-to-triggerfad)中，我得到了一个很好的解决方案。

但是，我尝试对这样的事件执行相同的程序`.hide()`：

```
var _old = $.fn.hide;
$.fn.hide = function(){
    var self = this;
    _old.apply(this,arguments).promise().done(function(){
        self.trigger("hide");
    });
}; 
```

它似乎一般工作，如这个jsfiddle所示：http: [//jsfiddle.net/gEVsX/5/](http://jsfiddle.net/gEVsX/5/)

但是当我将它添加到脚本中时，我从一个看似无关的位置收到错误消息。它是从这部分脚本中抛出的：

```
 $('#unique_div_id').dialog({
        autoOpen: false,
        show: "blind",
        hide: "explode",
        modal: true,
        buttons: {
            Cancel: function(){
                $(this).dialog("close");
            }
        }
    }); 
```

它只是将 div 初始化为模态对话框。我假设我收到此错误是因为我弄乱了 jQuery 隐藏代码。我收到此错误：

> 未捕获的类型错误：无法调用未定义的方法“addClass”

我已经复制了这个 jsfiddle 中的错误：http: [//jsfiddle.net/gEVsX/6/](http://jsfiddle.net/gEVsX/6/)

有谁知道我可以如何修复我的`.hide()`函数包装脚本？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:12:48.450

您违反了该方法的约定，该`hide()`方法应该是可链接的。

您需要`return this;`从新的`hide()`.

# c# - 如何为 Html.TextBoxFor( ... ) 文本框设置默认值？

> ID：10485402
> 
> 赞同：4
> 
> 时间：2012-05-07T16:11:32.757
> 
> 标签：c#, asp.net-mvc, textbox

我知道您可以使用 ASP.NET 创建一个文本框，该文本框将自动填充模型中的任何值，方法是使用

```
<%: Html.TextBoxFor(model => model.FirstName, new { id = "FirstName", placeholder = "[First Name]" }) %> 
```

如果为空，有没有办法给它一个默认值`model.FirstName`？

我试过添加一个 value 属性，但这没有用。

我也不能传入包含该值的模型，因为它会影响表单的其他区域。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T16:21:35.817

如果模型属性为空（或在创建模型时设置默认值），您可以更改模型属性以返回默认值，或者您可以使用`Html.TextBox`帮助程序而不是`Html.TextBoxFor`：

```
<%: Html.TextBox("FirstName", Model.FirstName ?? "The default value", new { id = "FirstName", placeholder = "[First Name]" }) %> 
```

或使用价值属性：

```
<%: Html.TextBoxFor(model => model.FirstName, new { @Value = "The default value", id = "FirstName", placeholder = "[First Name]" }) %> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T16:30:31.560

水印之类的东西是否适用于您要完成的工作？

jquery 有许多不同的实现 -[这](http://archive.plugins.jquery.com/project/TinyWatermark)看起来可以工作，并且可以选择使用 title 属性作为水印，这可能是模型的一部分。

# delphi - 缩进项目符号

> ID：10485407
> 
> 赞同：0
> 
> 时间：2012-05-07T16:11:48.967
> 
> 标签：delphi, delphi-7

我对编程如此陌生还不够糟糕；本周我进行了比以往更多的 Google 搜索和更少的 Google 搜索。

德尔福 v7

我已经弄清楚如何在我的 Richedit 控件中创建项目符号。我不知道当用户创建它们时如何缩进它们。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T19:32:22.227

设置`TRichEdit.Paragraph.FirstIndent`. 项目符号将缩进额外的数量`FirstIndent`。（您使用`FirstIndent`项目符号项是因为项目符号是新段落的第一行。）

```
RichEdit1.Paragraph.FirstIndent := RichEdit1.Paragraph.FirstIndent + 10; 
```

这是一个基于多年来随 Delphi 提供的 RichEdit 演示的快速演示。我只是添加了两个新`TToolButtons`按钮`ToolBar`（最右边的两个按钮，分别命名为`tbLessIndent`和，`tbMoreIndent`分别使用 Delphi 提供的 GlyFx 图像中的字形），并将以下事件处理程序添加到现有表单中作为`ToolButton.OnClick`事件：

```
procedure TMainForm.tbLessIndentClick(Sender: TObject);
begin
  Editor.Paragraph.FirstIndent := Editor.Paragraph.FirstIndent - 10;
  tbLessIndent.Enabled := Editor.Paragraph.FirstIndent > 9;
end;

procedure TMainForm.tbMoreIndentClick(Sender: TObject);
begin
  Editor.Paragraph.FirstIndent := Editor.Paragraph.FirstIndent + 10;
  tbLessIndent.Enabled := True;
end; 
```

这是一个示例新文档，其中添加了一些项目：

![RichEdit 子弹图像快照](../Images/277e387f5b79a44e375e5ca501bba375.png)

有关详细信息，请参阅有关[编号](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TParaAttributes.Numbering)和[FirstIndent](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TParaAttributes.FirstIndent)的文档（XE2 文档，但它们大致相同）

# foursquare - 间歇性 Foursquare API 响应为 500

> ID：10485409
> 
> 赞同：0
> 
> 时间：2012-05-07T16:12:09.450
> 
> 标签：foursquare

我发出一个经过身份验证的调用，`/venues/venue_id`但我收到一个`500`错误

> “Foursquare 服务器出现问题。请重试并检查 status.foursquare.com 以获取更新。”

我打了大约 60 个这样的电话，其中只有大约 20 个失败了。3天前它刚刚开始失败。有任何想法吗？我还需要提供什么？

编辑：我打的电话是：

> [https://api.foursquare.com/v2/venues/4ae2619bf964a520d58d21e3?oauth_token=xxxx&v=20120201](https://api.foursquare.com/v2/venues/4ae2619bf964a520d58d21e3?oauth_token=xxxx&v=20120201)

我做了大约 30 个，其中 10-12 个工作得很好，但其余的都失败了。我尝试了 Foursquare API Explorer，但仍然收到 500 响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T05:18:11.550

我的 API 请求突然开始工作。不知道为什么。

# android - 尽管图像是正确的白色，但图像并未完全显示为白色

> ID：10485410
> 
> 赞同：5
> 
> 时间：2012-05-07T16:12:10.387
> 
> 标签：android, colors, rgb

对于启动画面，我使用包含白色背景的图像（纯白色 - 在 Photoshop 中检查）。由于某种原因，它显示了一个轻微的绿色背景与活动的默认白色背景 - 如屏幕截图中标记的那样。仅在某些设备中，例如

![尽管图像使用白色，但 ImageView 图形现在显示为白色背景](../Images/fe75ed27ccf64b10aed0606165beca52.png)

我将此作为框架布局中的单个视图添加到活动中：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<ImageView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="fitCenter"
    android:src="@drawable/splashscreen" />

</FrameLayout> 
```

任何想法？我阅读了有关 RGB888 与 RGB565 的问题，但找不到合适的解决方案。

注意：我当然可以将图像中的白色更改为透明，但更愿意了解问题并找到适当的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T10:54:18.947

这真的很烦人。我想知道为什么很少有人遇到这个问题，因为它应该出现在所有 32 位显示器上。

你提到了关于 RGB888 格式的权利。问题的原因是，无论 APK 文件中的原始位图格式如何，所有位图都被压缩（在我的情况下为索引 256 色！wtf？）。

*我找不到阻止它的方法，所以如果有人知道正确的解决方案，请告诉。*

但是，我找到了两种解决白色问题的方法。

1)**每位图：**假设我们有一个名为 的可绘制位图资源`@drawable/mypng`，这会导致问题。我们需要添加一个额外的 XML drawable drawable/mypng_nofilter.xml

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/mypng"
    android:filter="false"
/> 
```

并`@drawable/mypng_nofilter`改用。

2）**对于整个活动：**在活动onCreate方法中我们需要添加

```
getWindow().setFormat(PixelFormat.RGB_565); 
```

现在窗口具有 16 位颜色深度，并且所有位图都显示为“正确”的白色。

同样，我更喜欢 32 位色深，但我不知道如何控制编译时图像压缩。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:15:07.070

我已经通过将`Bitmap.CompressFormat`类型更改为`PNG`而不是解决了这个问题`JPEG`：

```
Resources res = getResources();
Drawable drawable = res.getDrawable(R.drawable.nouv);
Bitmap bitmap = (Bitmap)((BitmapDrawable) drawable).getBitmap();
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T11:36:33.720

我在网络加载的图像上遇到了同样的问题。我通过禁用位图过滤器解决了这个问题。由于我在 ICS 和更新的设备上没有这个问题，我只为 ICS 之前的设备关闭了位图过滤器。以下是我使用的代码（将网络加载的位图设置为 ImageView。）

```
BitmapDrawable bitmapDrawable = new BitmapDrawable(imageView.getContext().getResources(), bitmap);
bitmapDrawable.setFilterBitmap(false);
imageView.setImageDrawable(bitmapDrawable); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-28T11:11:51.243

使用 Stackoverflow 中的所有解决方案后。从更改`android:src`到`app:srcCompact`和许多其他解决方案。帮助我的是我的图像在**drawable-anydpi**内部，我将图像从**drawable-anydpi 移动**到**drawable**，经过 2 小时的研究，它对我有用。

PS：它也可能对某人有帮助，这就是我把它放在这里的原因。:)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-07T16:16:17.193

由于您的图像中间只有一张图片，我建议您设置：

```
android:scaleType="centerCrop" 
```

它会在左侧和右侧裁剪图片的某些部分，但会使用整个屏幕......

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-07T16:19:41.420

您还可以使用图片的颜色（似乎是 F8FCF8）为 FrameLayout 或 ImageView 定义背景：

安卓：背景=“#F8FCF8”

# c# - 数据集上的行数与 datagridview 上的行数不同

> ID：10485412
> 
> 赞同：0
> 
> 时间：2012-05-07T16:12:14.660
> 
> 标签：c#, winforms, datagridview

我很确定这是我的数据绑定的问题，但我不确定到底是什么问题。使用 mysql，我的数据集中出现了行，但在我进行绑定后，我的 datagridview 中没有出现任何行。

```
conn = new MySqlConnection("server=localhost;database=mydb;uid=user;password=pass");
conn.Open();

grid = new DataGridView();
grid.Dock = DockStyle.Fill;
ds = new DataSet();

adpt = new MySqlDataAdapter("select * from test limit 6;", conn);
adpt.Fill(ds);
Debug.WriteLine("data set rows found " + ds.Tables[0].Rows.Count);

binding = new BindingSource();
binding.DataSource = ds;
grid.DataSource = binding;
Debug.WriteLine("data grid rows found " + grid.Rows.Count);

conn.Close();

Controls.Add(grid); 
```

对此的调试打印输出是 6 和 0。有人知道我的问题出在哪里吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:18:36.263

做就是了

```
grid.DataSource = ds.Tables[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:21:05.510

或者..如果你想使用 BindingSource （比如过滤），设置

```
binding.DataSource = ds.Tables[0]; 
```

# php - 在 zend 应用程序中动态定义 PHP 类

> ID：10485413
> 
> 赞同：1
> 
> 时间：2012-05-07T16:12:16.943
> 
> 标签：php, zend-framework, zend-autoloader

在 Zend 应用程序中，有没有办法定义一个不符合自动加载命名约定的类，并且当我以后尝试使用它时仍然可以识别它？我想你定义了这个类并以某种方式使用自动加载器注册它，但是在阅读了自动加载器手册页之后，我仍然不明白该怎么做。

我的用例是在测试期间（不，在这种情况下我不想要模拟或存根）。我在测试脚本的顶部定义了一个新类，但是当我的应用程序代码引用该类时，autolader 会根据命名约定积极地加载它。

```
<?php 

class Non_Conforming_Dummy_Class 
{
}

// should I register this new class with the autoloader right here? 

class Whatever
{
public function useIt()
    {
        $class = new Non_Conforming_Dummy_Class;
    }
} 
```

我得到一个寻找 Non/Conforming/Dummy/Class.php 的“没有这样的文件或目录”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:20:21.200

ZF Autoloader 将加载任何遵循 PSR-0 约定的类。任何不遵循该约定的类都不能使用自动加载器加载。但是，您可以

> 注册任意自动加载器回调，可选择使用特定命名空间（或命名空间组）。`Zend_Loader_Autoloader`在使用其内部自动加载机制之前，将首先尝试匹配这些。

这意味着，您可以将知道您的命名方案的自己的自动加载器添加到 ZF 的自动加载器：

```
$autoloader->pushAutoloader(array('myAutoloader', 'autoload'), 'MyPrefix'); 
```

请参阅[http://framework.zend.com/manual/en/zend.loader.autoloader.html](http://framework.zend.com/manual/en/zend.loader.autoloader.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:28:35.117

当 PHP 检测到一个尚未注册的类时，自动加载器是一种后备机制，因此如果您的代码就像顶部的那个，它不应该失败，因为该类是在同一个脚本中注册的，ej：

```
class foobar{}
class demo
{
    public function foo()
    {
         $bar = new foobar();
    }
} 
```

工作没有问题，如果你的类在另一个文件中，你可以 include() 它，或者 require() 它，当找不到类时，自动加载器将是最后一个调用的函数。

# sql - 加入多对多关系

> ID：10485414
> 
> 赞同：3
> 
> 时间：2012-05-07T16:12:17.803
> 
> 标签：sql, postgresql

我有三个表：applications、permissions 和 applications_permissions

```
|------------|   |------------------------|   |-----------|
|applications|   |applications_permissions|   |permissions|
|------------|   |------------------------|   |-----------|
| id         | <-| application_id         |   | id        |
| price      |   | permission_id          |-> | name      |
|------------|   |------------------------|   |-----------| 
```

对于应用程序有两类：免费和商业应用程序（价格 = '0' 和价格！= '0'）

现在我想知道每个权限有多少百分比的应用程序引用它；这对于这两个类别

自由：

```
id, percentage
1 , 20.0230
2 ,  0.0000
3 ,  0.0312
... 
```

商业的：

```
id, percentage
1 , 18.0460
2 ,  0.0000
3 ,  0.0402
... 
```

我已经制定了以下查询，但它不包括没有应用程序的权限 ID：/

```
SELECT (SELECT name FROM permissions WHERE id = applications_permissions.permission_id) AS "name",
        100::float * COUNT(*)/(SELECT COUNT(name) FROM applications WHERE price = \'0\') AS "percent"
  FROM applications, applications_permissions
  WHERE applications.id = applications_permissions.application_id 
    AND applications.price = \'0\'
  GROUP BY applications_permissions.permission_id
  ORDER BY percent DESC') 
```

我该怎么做呢？我已经尝试了几个小时（那个查询，misc JOINs）但它让我无法理解：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T18:33:06.697

^(简化。初稿非常理想。)
要在一个查询中计算所有内容：

```
SELECT p.id
     ,(100 * sum((a.price > 0)::int)) / cc.ct AS commercial
     ,(100 * sum((a.price = 0)::int)) / cf.ct AS free
FROM  (SELECT count(*)::float AS ct FROM applications WHERE price > 0) AS cc
     ,(SELECT count(*)::float AS ct FROM applications WHERE price = 0) AS cf
      ,permissions p
LEFT   JOIN applications_permissions ap ON ap.permission_id = p.id
LEFT   JOIN applications a ON a.id = ap.application_id
GROUP  BY 1, cc.ct, cf.ct
ORDER  BY 2 DESC, 3 DESC, 1; 
```

假设您的价格实际上是一个数字列 - 所以`0`而不是`'0'`.

这包括`permissions`根本没有附加`applications`的（`LEFT JOIN`）。

如果有可能`applications`没有附加到任何`permissions`列表，则列表加起来不会达到 100%。

我做了一次总计数（`ct`）并将其转换`float`为子查询。其余的计算可以用整数算术来完成，只有最终`/ ct`将数字转换为浮点数。这是最快和最精确的。

* * *

### 与 CTE 相同

如果您对更多新事物持开放态度：尝试使用[CTE（通用表表达式 - WITH 查询）](http://www.postgresql.org/docs/current/interactive/queries-with.html)进行相同操作 - 自 PostgreSQL 8.4 起可用。
它更干净，可能稍微快一些，因为我在一个 CTE 中同时计算并且更便宜`GROUP BY`- 这两者都可以通过子查询来完成：

```
WITH  c AS (
    SELECT sum((a.price > 0)::int) AS cc
          ,sum((a.price = 0)::int) AS cf
    FROM   applications
    ), p AS (
    SELECT id
          ,sum((a.price > 0)::int) AS pc
          ,sum((a.price = 0)::int) AS pf
    FROM   permissions p
    LEFT   JOIN applications_permissions ap ON ap.permission_id = p.id
    LEFT   JOIN applications a ON a.id = ap.application_id
    GROUP  BY 1
    )
SELECT p.id
     ,(100 * pc) / cc::float AS commercial
     ,(100 * pf) / cf::float AS free
FROM   c, p
ORDER  BY 2 DESC, 3 DESC, 1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T16:18:17.630

使用`LEFT OUTER JOIN`：

```
SELECT * FROM permissions LEFT OUTER JOIN
applications_permissions as rel on permissions.id = rel.permission_id LEFT OUTER JOIN
applications on rel.application_id = applications.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T16:19:07.270

这行得通吗？

对于这种`free`情况：

```
SELECT p.id, (100::float * COUNT(p.id)/(SELECT COUNT(*) from Applications)) Percent
FROM Applications a, Permissions p, Applications_Permissions a_p
WHERE a.id = a_p.application_id AND p.id = a_p.permission_id AND a.price = 0
GROUP BY p.id
ORDER BY Percent DESC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T23:45:08.137

这是一个查询的结果：

```
SELECT p.id
, p.name
, (CASE WHEN total.free=0 THEN NULL ELSE 100::float * sub.free::float / total.free::float END) AS percent_free
, (CASE WHEN total.comm=0 THEN NULL ELSE 100::float * sub.comm::float / total.comm::float END) AS percent_comm
FROM permissions AS p
LEFT JOIN (
  SELECT permission_id
  , SUM(CASE WHEN a.price<=0 THEN 1 ELSE 0 END) AS free
  , SUM(CASE WHEN a.price>0  THEN 1 ELSE 0 END) AS comm
  FROM applications_permissions AS pa
  JOIN applications AS a ON (pa.application_id=a.id)
  GROUP BY permission_id
) AS sub ON (p.id=sub.permission_id)
, (
  SELECT
    SUM(CASE WHEN price<=0 THEN 1 ELSE 0 END) AS free
  , SUM(CASE WHEN price>0  THEN 1 ELSE 0 END) AS comm
  FROM applications
) AS total 
```

或者仅适用于免费应用程序的结果（分别通过更改 where 子句的商业应用程序）：

```
SELECT p.id
, p.name
, (CASE WHEN total.nbr=0 THEN NULL ELSE 100::float * sub.nbr::float / total.nbr::float END) AS percent
FROM permissions AS p
LEFT JOIN (
  SELECT permission_id, COUNT(*) AS nbr
  FROM applications_permissions AS pa
  JOIN applications AS a ON (pa.application_id=a.id)
  WHERE (a.price<=0)
  GROUP BY permission_id
) AS sub ON (p.id=sub.permission_id)
, (
  SELECT COUNT(*) AS nbr
  FROM applications
  WHERE (price<=0)
) AS total 
```

# actionscript-3 - 使用 SWFLoader 加载时拖放不起作用？

> ID：10485420
> 
> 赞同：0
> 
> 时间：2012-05-07T16:12:38.077
> 
> 标签：actionscript-3, flash, apache-flex, actionscript-2

我目前正在使用 SWFLoader 在 flex 中加载 AS2 SWF，并且加载的 AS2 SWF 在其中具有拖放活动。当我在独立播放器中运行 AS2 swf 时，拖放工作正常，但是当我使用 SWFLoader 在 flex 中加载它时，拖放不起作用。对此的任何帮助都会很棒，谢谢。

[弹性代码](http://pastebin.com/uaWRdVyS)和[AS2 FLA](http://dl.dropbox.com/u/107176/slide_8.fla)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:35:47.600

当我处理将 as2 内容加载到 flex 时，我遇到了同样的问题，我所做的是在 as3 中重新实现拖放操作，如下所示：

```
var swfLoader:Loader = new Loader();
swfLoader.addEventListener(MouseEvent.MOUSE_DOWN,onMouseDown);

public function onMouseDown(e:MouseEvent):void
{
    stage.addEventListener(MouseEvent.MOUSE_MOVE,onDrag);
    stage.addEventListener(MouseEvent.MOUSE_UP,finishDrag);
}

public function onDrag(e:MouseEvent):void
{
    swfLoader.x = stage.mouseX;
    swfLoader.y = stage.mouseY;
}

public function finishDrag(e:MouseEvent):void
{
    stage.removeEventListener(MouseEvent.MOUSE_MOVE,onDrag);
    stage.removeEventListener(MouseEvent.MOUSE_UP,finishDrag);
} 
```

# java - 无法在 android 上修复此 ConcurrentModificationException

> ID：10485421
> 
> 赞同：-1
> 
> 时间：2012-05-07T16:12:38.777
> 
> 标签：java, android, exception

您好，我在 Android 3.2 中收到此错误，它没有指向我的代码，所以我不知道如何修复它

```
05-07 18:08:36.960: E/AndroidRuntime(12435): FATAL EXCEPTION: main
05-07 18:08:36.960: E/AndroidRuntime(12435): java.util.ConcurrentModificationException
05-07 18:08:36.960: E/AndroidRuntime(12435):    at java.util.ArrayList$ArrayListIterator.next(ArrayList.java:573)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:44)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at com.google.android.maps.MapView.onDraw(MapView.java:530)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.view.View.draw(View.java:9304)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.view.ViewGroup.drawChild(ViewGroup.java:2586)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2189)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.view.ViewGroup.drawChild(ViewGroup.java:2584)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2189)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.view.ViewGroup.drawChild(ViewGroup.java:2584)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2189)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.view.ViewGroup.drawChild(ViewGroup.java:2584)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2189)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.view.View.draw(View.java:9307)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.widget.FrameLayout.draw(FrameLayout.java:419)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2076)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.view.ViewRoot.draw(ViewRoot.java:1706)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1420)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.view.ViewRoot.handleMessage(ViewRoot.java:2066)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.os.Looper.loop(Looper.java:132)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at android.app.ActivityThread.main(ActivityThread.java:4126)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at java.lang.reflect.Method.invokeNative(Native Method)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at java.lang.reflect.Method.invoke(Method.java:491)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
05-07 18:08:36.960: E/AndroidRuntime(12435):    at dalvik.system.NativeStart.main(Native Method) 
```

但是这是导致错误的代码

```
protected ItemizedOverlay<OverlayItem> doInBackground(Void... params) {
...
synchronized (this.mapView) {//ConcurrentModificationException
                    if (!this.isCancelled())
                    {

                        for (Object element : this.mapView.getOverlays()) {
                            Overlay o  = (Overlay) element;
                            if (o instanceof GestionaleItemizedOverlay)
                            {
                                this.mapView.getOverlays().remove(o);//this one
                            }

                        }

                        if (overlay.size() > 0)
                        {
                            this.mapView.getOverlays().add(overlay);//or this one
                        }
                    }
                }
...

} 
```

那么我该如何更正我的代码呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:21:50.170

您不能在迭代列表时修改、添加/删除列表。您正在使用的 foreach 循环在后台创建一个`Iterator`对象。如果您想修改列表，请使用常规 for 循环。

试试下面的，你应该明白了。

```
List list = this.mapView.getOverlays();
for(int i = 0:i<list.size();i++){
    Overlay o  = (Overlay) list.get(i);
    if (o instanceof GestionaleItemizedOverlay)
    {
        this.mapView.getOverlays().remove(o);//this one
    }
} 
```

[这](https://stackoverflow.com/questions/9251761/mapview-concurrentmodificationexception-when-updating-overlays)是特定于 MapView 覆盖的更准确的解决方案。

# windows - Windows AWS Bootstrap 使用 CloudFormation 来自 S3 的文件

> ID：10485423
> 
> 赞同：2
> 
> 时间：2012-05-07T16:12:43.613
> 
> 标签：windows, bootstrapping, amazon-cloudformation

使用 AWS CloudFormation，我有两个堆栈（我们称它们为堆栈 A 和堆栈 B），它们都在 AWS 发布的 Windows AMI（预装 CloudFormation 工具）中启动时使用 cfn-init。

在这两个堆栈中，cfn-init 脚本从我的 S3 存储桶下载一堆文件。S3 存储桶在堆栈之前创建，存储桶中的文件是私有的。在堆栈创建期间将策略应用于 S3 存储桶 - “在此堆栈中创建的 IAM 用户应该能够从 S3 存储桶获取对象。”

当我创建这两个堆栈时，堆栈 A 会毫无问题地下载所有文件，因此我的应用程序没有任何问题。

但是堆栈 B 只下载“少数文件”，我所说的少数文件是指按字典顺序有时是一个，有时是前两个，有时是前三个文件，它假设下载 14 个不同的文件。

这阻碍了进一步的发展。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T05:54:36.493

确保您的依赖项设置正确。我已经看到了将安全性传播到 S3 的示例。但是，如果您将两个实例的依赖关系设置为需要安全和用户的应用程序，它应该会消失。

# javascript - 在不同计算机上执行时未捕获的 ReferenceError

> ID：10485424
> 
> 赞同：0
> 
> 时间：2012-05-07T16:12:45.313
> 
> 标签：javascript, jquery

下面的脚本在我的一台计算机上运行良好，但在另一台计算机上执行时我得到`uncaught referenceerror $ is not defined`. 这是另一个类似页面上的相同错误。它还说无法加载 ajax.google... 源的资源。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>

<script type="text/javascript">
    //add dynamic fields to add more addresses
    $(document).ready(function() {
        $('#btnAdd').click(function() {
            var $address = $('#address');
            var num = $('.clonedAddress').length;
            var newNum = new Number(num + 1);
            var newElem = $address.clone().attr('id', 'address' + 
newNum).addClass('clonedAddress');

            //set all div id's and the input id's
            newElem.children('div').each (function (i) {
                this.id = 'input' + (newNum*11 + i);
            });
            newElem.find('input').each (function () {
                this.id = this.id + newNum;
                this.name = this.name + newNum;
            });

            if (num > 0) {
                $('.clonedAddress:last').after(newElem);
            } else {
                $address.after(newElem);
            }

            $('#btnDel').removeAttr('disabled');

            if (newNum == 2) $('#btnAdd').attr('disabled', 'disabled');//number of 
field sets that can be added
        });
        $('#btnDel').click(function() {
            $('.clonedAddress:last').remove();
            $('#btnAdd').removeAttr('disabled');
            if ($('.clonedAddress').length == 0) {
                $('#btnDel').attr('disabled', 'disabled');
            }
        });
        $('#btnDel').attr('disabled', 'disabled');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:17:03.707

第二个错误将导致第一个错误。无法加载`jQuery`将导致`$`未定义。而且由于您是从 CDN 加载它，因此可能会出现以下两种情况之一：a) 您的网络已关闭，或 b) google 的 CDN 已关闭或不再通过该路径托管。既然您说它可以在另一台计算机上运行，​​我的倾向是 a) 您的网络已关闭。

正如 Rocket 在评论中解释的那样，可能不是您的网络完全关闭，而只是您无法访问 google CDN。防火墙或其他东西可能会导致此问题。

* * *

如果您的计算机可能网络中断，建议下载压缩的 jQuery 源代码并本地化该文件。如果你打算这样做，我强烈建议尽可能使用高于 1.3 的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:41:11.183

@Kirean 的回答是对的，但我想分享一下 HTML5-Boilerplate 使用什么来涵盖这种情况（评论太多了）

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/path/to/local/jquery-1.6.2.min.js"><\/script>')</script> 
```

它尝试从 Google 的 CDN 加载 jQuery，如果不成功（`window.jQuery`未定义），它会加载您的本地版本作为后备。

# android - 使用 AccountManager 将 Android 应用程序连接到 Gmail IMAP

> ID：10485429
> 
> 赞同：1
> 
> 时间：2012-05-07T16:13:15.300
> 
> 标签：android, oauth, gmail, imap, accountmanager

我正在制作一个定期连接到 Gmail 并分析用户消息以获取数据的 Android 应用程序。如果用户输入他们的用户名和密码，我可以很好地连接到 Gmail，但显然，我想要一个不同的解决方案，所以我不会将密码存储在手机上。

我想使用 AccountManager 但我遇到了问题。似乎很容易连接到*除*Gmail 之外的所有 Google 的 API。我无法找到如何使用 AccountManager 提供的令牌。

是否可以使用 AccountManager 连接到 Gmail 的 IMAP？如果是这样，怎么做？

# java - usernametoken-auth 壁垒/axis2 1.6.2

> ID：10485430
> 
> 赞同：2
> 
> 时间：2012-05-07T16:13:15.360
> 
> 标签：java, web-services, security, axis2

我刚刚升级到最新的axis2/rampart 版本，在提供需要用户名密码身份验证的网络服务时遇到了一个奇怪的行为。

到目前为止，我实现了自己的密码回调处理程序，它处理类型为 WSPasswordCallback.USERNAME_TOKEN_UNKNOWN 的 WSPasswordCallbacks。我在数据库中查找了提供的用户并检查了给定的密码。

在最新版本中，passwordcallback-usage 似乎总是 WSPasswordCallback.USERNAME_TOKEN 我必须为给定用户提供密码 - 但我无法提供密码，因为我不存储密码明文。我是否必须编写自己的 org.apache.ws.security.validate.UsernameTokenValidator？我必须在哪里注册？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:35:01.243

我在 Stackoverflow 上写了一个关于我遇到这个问题的总结，以及我找到的解决方法，[请在此处阅读](https://stackoverflow.com/questions/13817145/axis2-user-authentication/14998964#14998964)。

# firefox - 在本地提供网站的所有静态内容

> ID：10485431
> 
> 赞同：0
> 
> 时间：2012-05-07T16:13:17.543
> 
> 标签：firefox, browser, static-content

我想运行一个本地服务器，我可以在该服务器上保存网站的所有静态文件，当我运行网站时，我希望它动态更改 url 以从我的服务器获取静态内容。是否有 Firefox 插件或其他工具可以轻松做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:33:36.147

我以前用过 HTTrack Website Copier 来完成这类任务，它在 httrack.com 上，而且是免费的。

# python - 在 Python 中使用 urllib2。被服务器检测并拒绝

> ID：10485436
> 
> 赞同：2
> 
> 时间：2012-05-07T16:13:33.723
> 
> 标签：python, http, browser, urllib2

这段代码工作正常并阅读 html。然后该站点停止提供有关 read() 的任何数据。没有错误代码。

这是因为网络服务器检测到了一些不寻常的东西，对吧？（在我想设置用户代理之前，我遇到了错误 403：不良行为）

urllib2 是否有一些明显的标志可以引发标志？切换到另一个图书馆会有帮助吗？

我没有做任何可疑的事情。我看不出使用这个库读取页面和使用 lynx 浏览器之间的任何行为差异。

```
import urllib2
opener = urllib2.build_opener()
opener.addheaders = [('User-agent', 'Mozilla/5.0')]
search_url='http://www.google.com/?search=stackoverflow"'
raw = opener.open(search_url)
print raw.headers
print raw.read() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:32:22.207

鉴于您的打印语句，我假设您是通过 Python2.x 执行此操作的 大卫罗宾逊的建议可能在这里有所作为。

另一方面，我个人使用过以下示例片段

```
import urllib2

req = urllib2.Request('http://www.voidspace.org.uk')
response = urllib2.urlopen(req)
the_page = response.read() 
```

多次，在多个用例中，从未遇到过您的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T11:37:51.067

尝试使用 mechanize 而不是普通的 urllib2 来抓取搜索引擎，它可以更好地模仿浏览器的行为。

# ruby-on-rails - 如何基于 rails 3.1 环境设置路由变量？

> ID：10485441
> 
> 赞同：0
> 
> 时间：2012-05-07T16:13:40.190
> 
> 标签：ruby-on-rails, deployment, ruby-on-rails-3.1

在生产中，我们的 rails 3.1.4 应用程序被部署到 suburi server_ip/by。部署到 suburi /by 需要在调用 link_to 时将 /by 附加到自定义方法“view_handler”（用于记录观看历史）前面。以下是 Rails 生产中的示例：

```
<%= link_to 'Projects', "/by/view_handler?index=1&url=#{projects_path}" %> 
```

但是，在开发或测试环境中，不需要“/by”（会导致错误），并且 link_to 看起来像：

```
<%= link_to 'Projects', "/view_handler?index=1&url=#{projects_path}" %> 
```

在 routes.rb 中，我们有：

```
 match '/view_handler', :to => 'application#view_handler' 
```

有没有办法只在 rails 环境或 routes.rb 中设置而不更改 rails 代码本身以进行 suburi 部署？或者我们如何才能在 Rails 生产中只为 link_to 附加 suburi？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:35:33.310

尝试：

```
 scope(Rails.env=='production' ? '/by' : '') do
    resources :foos
    ....
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:09:19.197

我不确定我是否理解正确，但我可以想到两件事来尝试：

1）将您的生产路线放在您的开发路线前面，在 routes.rb 中。Rails 会先尝试匹配它，如果你在 dev/test 中它会失败，然后尝试匹配 dev/test 路由并成功。如果您在生产中，它当然会匹配第一条路线。

2) 将两条路线包装在条件语句中，`Rails.env.production?`用于根据环境确定要绘制的路线，例如

```
if Rails.env.production?
  match #production route
else
  match #dev/test route 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:46:08.850

这是我们决定用于解决路由中断问题的方法。在初始化程序中，my_constant.rb 是通过以下方式创建的：

```
if Rails.env.production?
  SUBURI = "/by"
else
  SUBURI = ''
end 
```

在每个 /view_handler 之前，添加 SUBURI。例如，

```
<%= link_to 'Projects', "/view_handler?index=1&url=#{projects_path}" %> 
```

变成：

```
<%= link_to 'Projects', SUBURI + "/view_handler?index=1&url=#{projects_path}" %> 
```

SUBURI 应该添加到每个传递变量的 url。该解决方案到目前为止有效。

# windows - 如何在 Windows 命令脚本中使用 sql*plus 来控制流量？

> ID：10485443
> 
> 赞同：8
> 
> 时间：2012-05-07T16:13:47.157
> 
> 标签：windows, oracle, batch-file, oracle10g, sqlplus

我正在尝试使用 sql*plus 来控制一个小的 Windows 命令脚本。

基本上，我想执行一些 PL/SQL（可能从视图或表中选择或执行一个函数），它向我显示数据库中某些行的状态，然后根据行的状态，执行一些 Windows 命令。

我的问题是如何将结果返回到命令脚本中。

```
sqlplus user/password@server @script.sql

IF <CONDITIONAL HERE BASED on script.sql results> GOTO :runprocess

REM log and email that process had to be skipped
EXIT

:runprocess
REM run various Windows service commands 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T07:15:19.227

我可能会从被调用者`script.sql`本身编写脚本（或条件，取决于要求）。

例如，以下`script.sql`创建一个*.bat 文件* `windows_commands.bat`：

```
set feedback off
set echo off
set trimspool on
set termout off
set serveroutput on size 100000 format wrapped
set lines 500
set pages 0

-- create the bat file to be executed later:
spool windows_commands.bat

declare
  c number;
begin

  select count(*) into c from dual;

  -- depending on a conditional, write the stuff to be executed into the
  -- bat file (windows_commands.bat)
  if c = 1 then
     dbms_output.put_line('@echo everthing ok with dual');
  else
     dbms_output.put_line('@echo something terribly wrong with dual');
  end if;

end;
/

spool off

exit 
```

然后，您可以`script.sql`从另一个*.bat 文件*中调用，如下所示：

```
@rem create oracle session, call script.sql
sqlplus %user%/%password%@%db% @script.sql

@rem script.sql has created windows_commands.bat.
@rem call this newly created bat file:
call windows_commands.bat 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T21:43:38.420

这就是我最终使用的。

我的 .cmd 脚本：

```
@ECHO OFF
ECHO Checking Oracle...

for /f %%i in ('sqlplus -s user/password@database @script.sql') do @set count=%%i
echo %count%

IF %count% GTR 0 GOTO :skipped
GOTO :runprocess 
```

其中script.sql：

```
SELECT COUNT(*)
FROM table
WHERE criteria = 1;

exit 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T16:25:12.167

我强烈建议您*不要*使用 .bat 文件。您还有很多其他选择：C/C++ 或 VB、[Windows 脚本](http://bitbach.wordpress.com/2010/06/28/passing-sqlplus-return-codes-to-the-cscript-ws-host/)或[Powershell](http://tiredblogger.wordpress.com/2009/11/09/powershell-recreating-sqlplus-ed-command/)，甚至是[Perl](http://www.activestate.com/activeperl/downloads)或[Bash](http://win-bash.sourceforge.net/)等免费下载。

但这里有一个在 .bat 文件中返回错误代码的示例：

*   [http://www.dbforums.com/oracle/1044496-sqlplus-return-value-help.html](http://www.dbforums.com/oracle/1044496-sqlplus-return-value-help.html)

但是请看我上面给出的一些链接。避免使用 .bat 文件会让您更轻松，并且更容易在未来维护。

恕我直言 ...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T16:20:43.960

我通过创建一个 .bat 文件来执行类似的操作，该文件执行 Windows 工作并根据需要调用 sql 脚本。使用 SQL 将您的结果后台打印到您可以阅读的文本文件中。

> ...这里的dos命令
> 
> sqlplus /nolog @C:\Dump\DropRecreateUsers.sql
> 
> sqlplus /nolog @C:\Dump\Cleanup.sql
> 
> ...dos 命令

在 sql 中使用此命令 spool C:\yourResults.txt 或更复杂的用法创建一个过程，该过程在调用时使用 UTL_FILE 将结果写入文本文件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T06:55:54.833

我鼓励您查看 Oracle XE 中包含的两个用于备份和恢复的脚本。这些脚本教会了我很多如何在 Windows 平台上处理批处理脚本和 Oracle。

*   C:\oracle\app\oracle\product\11.2.0\server\bin\Backup.bat
*   C:\oracleexe\app\oracle\product\11.2.0\server\bin\Restore.bat

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-24T09:13:14.117

连接到：Oracle 数据库 11g 企业版版本 11.2.0.1.0 - 64 位生产，具有分区、OLAP、数据挖掘和真正的应用程序测试选项

```
SQL> @f:\testa.txt 
```

# php - PHP中的传出websocket

> ID：10485449
> 
> 赞同：0
> 
> 时间：2012-05-07T16:14:10.587
> 
> 标签：php, sockets, websocket

我正在尝试使用 PHP 为第三方聊天服务创建一个机器人脚本。客户端-服务器通信基于 socket.io，但使用 websockets 效果最好 - 事实上，在支持 websockets 的浏览器中，如果没有 socket.io，很容易复制。然而，与 Javascript 不同，PHP 不能简单地使用`new Websocket('ws://host')`和连接。我查看了 PHP 的原始（？）套接字，例如[`fsockopen`](http://php.net/manual/en/function.fsockopen.php)and [`socket_create`](http://php.net/manual/en/function.socket-create.php)，但我不知道该使用什么 -`socket_create`附带了奢侈品[`socket_select`](http://php.net/manual/en/function.socket-select.php)，但我不知道如何使用该类型的套接字来定位除此之外的任何东西IP 地址 - 在 Javascript 中，websocket 连接到的 url 包括会话 ID。`fsockopen`另一方面，可以通过这种方式连接到 url，但我找不到任何等待套接字有可读取字节的函数。由于服务的限制，每个聊天室都需要一个新的套接字（和会话 id），所以我需要能够同时监听多个套接字。处理这个问题的最佳方向是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T02:58:42.993

原来 PHP 手册不是很明确 - 您可以使用 连接到 url `socket_connect`，它不必是 IP 地址。手动实现整个 websocket 协议会很烦人 - 但它至少是功能性的。

# iphone - 将数据保存到另一个数组，内存管理，Objective C

> ID：10485451
> 
> 赞同：2
> 
> 时间：2012-05-07T16:14:22.967
> 
> 标签：iphone, objective-c, memory-management

我的目的：对服务器进行 API 调用，然后从它们那里取回一个名为的数据数组，`dataArr`我想将这些数据存储到另一个数组中以备后用。

到目前为止我正在做的是

`myClass.h`：

```
@propery ( nonatomic, retain ) NSArray *dataList; 
```

`myClass.m`：

```
@implementation myClass
-(void)receivedData:(NSArray*) dataArr {
    // ???
} 
```

要在第 3 行填写，我有两个选项，选项 A：

```
dataList = dataArr; 
```

或选项 B：

```
[dataList release];
[dataArr retain];
dataList = dataArr; 
```

我认为选项 A 是正确的方法，因为在头文件`dataList`中声明。`retain`因此，setter 将确保释放当前数组 ( `dataList`) 并重新获得接收到的数组 ( `dataArr`)

我只是想仔细检查我是否走在正确的道路上。

如果我刚刚在中间犯了错误，请纠正我。谢谢 欢迎任何意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:23:15.477

```
dataList = [dataArr]; 
```

这不是有效的 Objecitve-C。如果你想写

```
dataList = dataArr; 
```

这仍然是不行的，因为您直接访问实例变量，而不是通过属性设置器，也就是说，您的数组将不会被保留并且它会严重崩溃。

```
[dataList release];
[dataArr retain];
dataList = dataArr; 
```

又错了。如果`dataList`与 相同`dataArr`，并且对象 ( `self`) 的引用是对它的最后一个引用，那么它将被释放，破坏以下`retain`消息，并且很可能再次崩溃。

如果你有一个属性设置器（你有），只需写

```
self.dataList = dataArr; 
```

这将正确保留数组。顺便说一句，setter 的实现类似于您的最后一个方法，但它会检查其中一个是否不相等：

```
- (void)setDataList:(NSArray *)dl
{
    if (dataList != dl)
    {
        [dataList release];
        dataList = [dl retain];
    }
} 
```

或 pre- `retain`s 要设置的对象：

```
- (void)setDataList:(NSArray *)dl
{
    [dl retain];
    [dataList release];
    dataList = dl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:27:32.320

添加@synthesize 数据列表；所以编译器可以生成默认的setter

然后在第 4 行添加：

```
self.dataList = dataArr; 
```

默认设置器将负责以正确的方式释放和保留

# jcarousellite - 两个导航相同的 jcarouselite 滑块

> ID：10485453
> 
> 赞同：1
> 
> 时间：2012-05-07T16:14:39.463
> 
> 标签：jcarousellite

我正在尝试创建一个类似于此处滑块的滑块：http: [//www.mako.co.il/](http://www.mako.co.il/)

我查看了代码，发现它是由两个不同的滑块构成的：1\. 小图片滑块 2\. 大图片滑块，它位于小图片的顶部。

两个滑块都有相同的导航箭头，一旦您单击“下一步”按钮，两个滑块就会一起移动。

现在，我使用 Jcarousele Lite 滑块来执行此操作，这是我得到的最好的：http: **[//jsfiddle.net/ZvU28/2/](http://jsfiddle.net/ZvU28/2/)**

我遇到的问题： 1\. 如果您单击下一个按钮（右侧） - “更大”的滑块会发疯，然后小滑块和大滑块之间没有同步。2\. 如果您在上一个按钮上单击几次，然后在下一个按钮上单击-效果很好-直到滑块到达结束/开始，然后大滑块再次变得疯狂。

所以 - 有什么建议吗？有一个更好的方法吗？我将不胜感激任何帮助！谢谢！

# postgresql - Postgresql - 排序集的全文排序

> ID：10485455
> 
> 赞同：0
> 
> 时间：2012-05-07T16:14:46.830
> 
> 标签：postgresql, full-text-search, full-text-indexing

我有一个包含 200k 元组的 Postgresql 表，所以没有那么多。我尝试做的是过滤掉一些行，然后使用全文匹配对它们进行排序：

```
SELECT * FROM descriptions as d 
WHERE d.category_id = ? 
AND d.description != '' 
AND regexp_replace(d.description, '(...)', '') !~* '...' 
AND regexp_replace(d.description, '...', '') !~* '...' 
AND d.id != ? 
ORDER BY ts_rank_cd(to_tsvector('english', name), plainto_tsquery('english', 'my search words')) DESC LIMIT 5 OFFSET 0'; 
```

描述字段上有一个 GIN 索引。

现在此查询仅在类别中的记录少于 4000 条左右时才能正常工作。当它更像 5k 或 6k 时，查询会变得非常慢。

我正在尝试这个查询的不同变体。我注意到的是，当我删除 WHERE 子句或 ORDER BY 子句时，我的速度会大大提高。（当然，我得到不相关的结果）

我能做些什么来加速这种组合？任何优化方式还是我应该在 Postgresql 之外寻找解决方案？

# 附加问题：

我正在进一步试验，例如这是我认为运行速度太慢的最简单查询。我可以从解释分析中看出它何时使用 gist 索引，何时不使用？

```
SELECT d.*, d.description <-> 'banana' as dist FROM descriptions as d ORDER BY dist DESC LIMIT 5

"Limit  (cost=16046.88..16046.89 rows=5 width=2425) (actual time=998.811..998.813 rows=5 loops=1)"
"  ->  Sort  (cost=16046.88..16561.90 rows=206010 width=2425) (actual time=998.810..998.810 rows=5 loops=1)"
"        Sort Key: (((description)::text <-> 'banana'::text))"
"        Sort Method: top-N heapsort  Memory: 27kB"
"        ->  Seq Scan on products d  (cost=0.00..12625.12 rows=206010 width=2425) (actual time=0.033..901.260 rows=206010 loops=1)"
"Total runtime: 998.866 ms"` 
```

已回答 (kgrittn)： DESC 关键字对于 KNN-GiST 不正确，实际上这里不需要它。删除它可以解决问题并给出正确的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:45:08.347

对于这种类型的应用程序，我们一直在从 tsearch 功能转移到 trigram 功能；当您想挑选少量最佳匹配时，它会快得多。无论如何，这里的人们通常更喜欢三元相似度匹配的语义而不是文本搜索排名。

[http://www.postgresql.org/docs/current/interactive/pgtrgm.html](http://www.postgresql.org/docs/current/interactive/pgtrgm.html)

从已编辑的问题中“借用”后面的查询，对其进行格式化，并包括索引创建语句，以使答案自包含而没有大量评论：

```
CREATE INDEX descriptions_description_trgm
  ON descriptions
  USING gist (description gist_trgm_ops);

SELECT d.*, d.description <-> 'banana' as dist
  FROM descriptions as d
  ORDER BY dist LIMIT 5; 
```

这*应该*以“距离”序列从 GiST 索引返回行，直到它到达`LIMIT`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T22:01:45.893

查询的输出`explain analyze`会有所帮助。但我想这`regexp_replace`条线是你的问题。Postgres 计划程序无法知道有多少行将匹配这两行，因此它正在根据这个有缺陷的问题猜测和计划查询。

我建议创建一个这样的函数：

```
create function good_description(text) returns boolean as $$
  select
   regexp_replace($1, '(...)', '') !~* '...' 
   and
   regexp_replace($1, '...', '') !~* '...'
$$ language sql immutable strict; 
```

并使用此函数[在表达式上](http://www.postgresql.org/docs/current/static/indexes-expressional.html)创建[部分](http://www.postgresql.org/docs/current/static/indexes-partial.html)索引：

```
create index descriptions_good_description_idx
  on good_description(description)
  where description != ''; 
```

然后以允许 Postgres 使用此索引的方式进行查询：

```
SELECT * FROM descriptions as d 
WHERE d.category_id = ? 
AND d.description != '' 
AND good_description(d.description)
AND d.id != ? 
ORDER BY ts_rank_cd(
  to_tsvector('english', name),
  plainto_tsquery('english', 'my search words')
) DESC
LIMIT 5 OFFSET 0; 
```

# events - 当作为应用程序进行身份验证时，无法为用户设置 RSVP 状态

> ID：10485456
> 
> 赞同：1
> 
> 时间：2012-05-07T16:14:50.187
> 
> 标签：events, facebook-graph-api

**该文档指出：**

> rsvp_event：使您的应用程序能够代表用户回复事件
> 
> 您可以通过向 EVENT_ID/attending 发出 HTTP POST 来回复用户“参加”事件。这需要 rsvp_event 权限，如果 RSVP 成功则返回 true，否则返回 false。

**问题：**

如果我作为应用程序进行了身份验证，那么我在哪里传递我代表 RSVPing 的人的 UID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-16T13:50:21.130

您不需要显式传递用户 ID。用户的身份由您传递的访问令牌标识。

# jakarta-ee - “内容编辑器”Java EE 6 Web 应用程序的设计/架构

> ID：10485458
> 
> 赞同：2
> 
> 时间：2012-05-07T16:14:52.310
> 
> 标签：jakarta-ee, architecture, jsf-2

**[Rev.02：由于Rev.01没有答案，请让我重新指定我的问题]：**

对于带有*JSF 2.x 前端*的 Java EE Web 应用程序，应使用以下 URL：

1.  最初（静态案例，并在数千本书示例中处理）：

    *   `www.acme.org/app/`
    *   `www.acme.org/app/index.jsf`
    *   `www.acme.org/app/contact.jsf`
    *   `www.acme.org/app/about.jsf`
    *   `www.acme.org/app/provider-registration.jsf`
    *   `www.acme.org/app/login.jsf`
        sys-admin 和 provider-admin 之间存在差异，并将 sys-admin 重定向到：
    *   `www.acme.org/app/sys-admin-console.jsf`
        `admin-console.jsf`和下面列出的提供者管理员。

2.  稍后（即动态创建和激活，以及我不清楚的方面）：

    *   `www.acme.org/app/providerName/`
    *   `www.acme.org/app/providerName/index.jsf`
    *   `www.acme.org/app/providerName/contact.jsf`
    *   `www.acme.org/app/providerName/login.jsf` 对于供应商管理员和供应商的客户
    *   `www.acme.org/app/providerName/admin-console.jsf`

    *   `www.acme.org/app/providerName/pageX.jsf`

    其中`providerName`是提供者选择并由系统验证+授予的任意名称，并且`pageX`是由每个提供者独立创建和任意命名的一个或多个页面。

3.  “系统领域”将了解“sys-admin”和“provider-admin”角色，而每个“提供者领域”将了解“provider-admin”和“customer”角色。

**我现在的问题是：**

1.  在最初的 FacesServlet 中，我必须做什么才能让这些“子领域”（sub-JSF-webapps）运行并且一个或多个 Servlet（一起）运行良好？

2.  如何实施访问控制规则？
    (a) 通过动态部署但静态的 Servlet 安全配置？或
    (b) 通过应用程序级别的内部安全组件而不是 servlet/web 容器级别？

我将非常感谢任何帮助或任何链接到处理此问题的示例。
娜塔莉亚。

# java - 为什么这个 JPA 查询不返回我的特定类的列表？

> ID：10485470
> 
> 赞同：0
> 
> 时间：2012-05-07T16:15:27.780
> 
> 标签：java, sql, jpa

我有一个 JPA 对象：

```
@Entity
@Table(name="WF_GROUP")
public class Group {
  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  private long id;
  private String groupName;
  private long parentId;

/* ... */

} 
```

我有一个使用这种方法的 GroupDAO：

```
public List<Group> getAllGroups() {
  List<Group> groups = new ArrayList<Group>();
  String query = "select * from WF_GROUP";
  Query q = getEntityManager().createNativeQuery(query);
  groups.addAll( q.getResultList() );
  return groups;
} 
```

问题是 q.getResultList() 返回一个 Object 类型的结果列表，而不是包含每个属性的对象数组。

为什么 q.getResultList() 不返回 Group 对象的列表？

谢谢！抢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:21:16.293

因为您没有指定本机查询应该返回哪个类。看看其他的[createNativeQuery](http://openjpa.apache.org/builds/1.2.3/apache-openjpa/docs/jpa_overview_sqlquery.html)方法，采用额外的参数。

请注意，使用 JPA 的目的是使用对象而不是数据库表。JPQL 就是为此而存在的。您应该使用以下代码：

```
String query = "select group from Group group"; // this is JPQL
TypedQuery<Group> q = getEntityManager().createQuery(query, Group.class);
groups.addAll(q.getResultList()); 
```

# observablecollection - ObservableCollection：如何使用 FirstOrDefault？

> ID：10485473
> 
> 赞同：0
> 
> 时间：2012-05-07T16:15:48.653
> 
> 标签：observablecollection

我有一个带有属性 ID 的自定义类。我们可以将这个类命名为 A，以及属性 ID。

我有一个可观察的 A 集合，我想获取 firstOrDefault 以了解是否存在具有确定 ID 的对象。大豆我做以下事情：

myObersableCollection.FirstOrDefault(a=>a.ID==2)

但我收到以下错误：无法将 A 隐式转换为 bool。

我究竟做错了什么？

谢谢。戴姆洛克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:18:08.243

`FirstOrDefault()`返回匹配的对象，而不是布尔值。

如果您只想检查是否有匹配的对象，请`.Any()`改为调用。

# shell - Unix 从标记化字符串导出变量

> ID：10485474
> 
> 赞同：0
> 
> 时间：2012-05-07T16:16:08.283
> 
> 标签：shell, unix, ksh, tokenize

假设我有一个字符串：

```
'EffTimeStamp="20110203-210000"#InputCtxNm="Forigen Exchange Today"#RunType="EOD"#Age="90" 
```

使用：

```
echo 'EffTimeStamp="20110203-210000"#InputCtxNm="Forigen Exchange Today"#RunType="EOD"#Region=US#Age="90"' \ |  awk -F# -v OFS="\n" '{for (i=1;i<=NF; i++) printf("%s%s", $i, (i==NF ? "\n" : OFS)) }' 
```

我将其转换为：

```
EffTimeStamp="20110203-210000"
InputCtxNm="Forigen Exchange Today"
RunType="EOD"
Region=US
Age="90" 
```

我想将这些导出为 Shell 变量。

注意：字符串中的变量数量可能会因用户而异。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:58:32.460

你的壳是什么？

假设 bash，试试这个：

```
source <(awk -v RS="#" '{print "export " $0}' <<< "$string") 
```

对于 ksh，这应该有效

```
. <(printf "%s\n" "$string" | awk -v RS="#" '{print "export " $0}') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:24:04.727

在你的 awk 中，使用

```
printf("export %s%s" 
```

然后用“eval”替换“echo”。

# python - python，使用 multiprocess.Pool 产生几个子进程调用

> ID：10485479
> 
> 赞同：1
> 
> 时间：2012-05-07T16:16:23.673
> 
> 标签：python, subprocess, multiprocessing

我搜索了几个相关的帖子，但没有一个明确回答我的查询。我正在尝试创建一个将使用多处理将作业分配到机器的类。“作业”是使用子进程的系统调用，我不希望脚本在生成后保持与作业的连接。我已经使用 Process 类完成了所有工作，但我想尝试 Pool 类，但我遇到了问题。

我的代码在这里： [https ://gist.github.com/2627589](https://gist.github.com/2627589)

相关方法是 run_queue 方法。您可以在 Test_pool 类中看到我覆盖了 Runner 类的 run_queue 方法。但是，当我运行它时，出现错误： PicklingError: Can't pickle : attribute lookup **builtin** .instancemethod failed

我的目标是能够定义一个应该保持忙碌的 MAX_NUM_CORES，并持续提交作业，只要分配的作业使用的核心数不超过定义的最大内核数（例如 MAX_NUM_CORES）。也许我没有使用正确的设计模式？欢迎提出建议。

# iphone - 如何将自定义彩色图像添加到 TabBarController 中的 tabBar？

> ID：10485482
> 
> 赞同：0
> 
> 时间：2012-05-07T16:16:40.217
> 
> 标签：iphone, uitabbarcontroller, uitabbar, uitabbaritem

我正在使用 UITabBarController，我想将自定义彩色图像加载到相应的 TabBar。我想为 UITabBar 项自定义文本的字体大小、颜色和类型。我通过使用 tabBar 的 image 属性尝试了许多可能性，并尝试创建一个 imageview 并将其作为子视图添加到 tabBar。有人可以提供这个问题的任何替代方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:21:46.723

唯一的方法是实现您自己的自定义标签栏控制器。如果你用谷歌搜索“自定义标签栏”，你可以在网上找到很多教程。[这是](http://www.hollance.com/2011/11/mhtabbarcontroller-a-custom-tab-bar-for-ios-5-using-the-new-container-apis/)iOS 5的一个。[在这里](http://rocksaucestudios.com/tapsauce/post/ios-custom-tab-bar/)，你可以找到另一个。

# php - 生成shell脚本时如何转义shebang行

> ID：10485483
> 
> 赞同：3
> 
> 时间：2012-05-07T16:16:44.487
> 
> 标签：php, bash, shell

我正在从脚本中生成一个 shell 脚本，它需要 root 权限，所以我使用

```
sudo bash -c "echo 'Hello There!' > '/var/www/cgi-bin/php-cgi-5.3.8'" 
```

如果我尝试输出 shebang 行并且我不确定如何转义它，我会得到一个错误——就像我对其他变量所做的那样。

```
sudo bash -c "echo '#!/bin/bash

version=\"5.3.8\"
export PHPRC=/etc/php/phpfarm/inst/php-\${version}/lib/php.ini
export PHP_FCGI_CHILDREN=3
export PHP_FCGI_MAX_REQUESTS=5000
exec /etc/php/phpfarm/inst/php-\${version}/bin/php-cgi' > '/var/www/cgi-bin/php-cgi-5.3.8'" 
```

我在哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T16:23:53.993

`!`正在寻找以`'`您的 bash_history 开头的命令。你应该有'！不加引号并用反斜杠转义它。您也可以`#`去掉引号并将其转义，因为 a`\`比两个引号短。

```
sudo bash -c "echo \#\!'/bin/bash

version=\"5.3.8\"
export PHPRC=/etc/php/phpfarm/inst/php-\${version}/lib/php.ini
export PHP_FCGI_CHILDREN=3
export PHP_FCGI_MAX_REQUESTS=5000
exec /etc/php/phpfarm/inst/php-\${version}/bin/php-cgi' > '/var/www/cgi-bin/php-cgi-5.3.8'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:22:41.230

`!`可能正在尝试用您历史中的某些内容替换。试试`...'#\!/bin/bash...`。

# ios - 使用 iTunes 安装 iOS 应用程序没有图像

> ID：10485494
> 
> 赞同：0
> 
> 时间：2012-05-07T16:17:46.083
> 
> 标签：ios, ios5, icons, itunes, ad-hoc-distribution

我创建了一个用于临时分发的应用程序，但是当我将其放入 iTunes 时，没有图像。然后我们将应用程序放到设备上，现在仍然有图像。我一定在某处错过了一步。

我使用 Xcode 将图像放在正确的位置，但仍然没有骰子。

**更新**

这是对塞尔吉奥的回应 ![在此处输入图像描述](../Images/3b17f1d83e0b751e16604ad76d1052de.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:28:35.953

我建议检查您项目中的 .plist 文件是否为应用程序图标设置了正确的设置。例如（图像）

![在此处输入图像描述](../Images/062ddd1856729ee4a473d614e5be89c4.png)

还要记住，至少有一次我有过应用程序图标不显示的经历，而我唯一能想到的就是图标有一个自定义名称（例如 myapp-icon）。将图标名称恢复为“Icon.png”一切正常。

# python - Python suds 中的自定义参数属性

> ID：10485495
> 
> 赞同：0
> 
> 时间：2012-05-07T16:17:50.630
> 
> 标签：python, wsdl, suds

我遇到了麻烦`suds`。

我正在尝试制作一个通用系统来调用 API，一些参数被定义为具有多个属性的类。最初所有这些属性都是空的，我试图传递一个字典来自动填充一些属性

例如：

```
from suds.client import Client

client = Client("...")
method = "getCampaignsByCriteria"
arg_repr = {"ids": [123]}
arg = client.factory.create("CampaignSearchCriteria")
for k, v in arg_repr.iteritems():
    setattr(arg, k, v)
service = client.service
args_map = {"searchCriteria": arg}
getattr(service, method)(**args_map) 
```

生成以下内容，所有默认字段`CampaignSearchCriteria`仍然存在，并`ids`正确设置：

```
<SOAP-ENV:Body>
  <ns1:getCampaignsByCriteria>
     <searchCriteria xsi:type="ns1:CampaignSearchCriteria">
        <ids xsi:type="ns1:ArrayOf_xsd_long">123</ids>
        <searchString xsi:type="ns0:string"/>
        <pageNumber xsi:type="ns2:int"/>
        <pageSize xsi:type="ns2:int"/>
        <advertiserIds xsi:type="ns1:ArrayOf_xsd_long"/>
        <archiveFilter xsi:type="ns1:ActiveFilter">
           <activeOnly xsi:type="ns2:boolean"/>
           <inactiveOnly xsi:type="ns2:boolean"/>
        </archiveFilter>
        <sortOrder xsi:type="ns1:SortOrder">
           <descending xsi:type="ns2:boolean"/>
           <fieldName xsi:type="ns0:string"/>
        </sortOrder>
     </searchCriteria>
  </ns1:getCampaignsByCriteria>
</SOAP-ENV:Body> 
```

但是，由于我只设置`ids`字段，我希望 SOAP 主体只考虑非空字段，如下所示：

```
<SOAP-ENV:Body>
  <ns1:getCampaignsByCriteria>
     <searchCriteria xsi:type="ns1:CampaignSearchCriteria">
        <ids xsi:type="ns1:ArrayOf_xsd_long">123</ids>
     </searchCriteria>
  </ns1:getCampaignsByCriteria>
</SOAP-ENV:Body> 
```

当您对方法使用自定义参数时，我找不到如何选择要包含的字段。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:24:35.123

您的 SOAP 请求的外观取决于您的 WSDL，特别是为您的消息指定模式的数据类型定义。
因此，您不能只省略某些字段，否则如果架构不允许，该消息将不再是有效请求。

如果我是正确的，那么[这](https://advertisersapi.doubleclick.com/v1.17/api/dfa-api/campaign?wsdl)应该是我们正在谈论的 wsdl，因为所有属性`minOccurs`都不存在，这意味着它默认为 1 并且您不能省略元素，尽管它们是可空的。

我的一般建议：不要过多考虑 SOAP 请求的外观。SOAP 是 xml，因此是一种人类可读的，但它并不是真正设计为由人类解释的。

# gdb - GDB CallStack 地址是虚拟的还是物理的？

> ID：10485496
> 
> 赞同：0
> 
> 时间：2012-05-07T16:17:59.583
> 
> 标签：gdb, virtual, symbols, nm

我的 gdb`bt`调用堆栈给出了函数名称和函数地址。然后我做了`nm binary` 并生成了函数名和地址映射。当我尝试将 gdb 地址与`nm`输出匹配时，它不匹配。函数地址`(gdb) bt`太高（看起来像物理地址）。

gdb 函数地址（例如`0x00007fffe6fc150f`）：

```
#9  0x00007fffe6fc150f in read_alias_file (fname=<value optimized out>, fname_len=<value optimized out>) at localealias.c:224
#10 0x00007fffe6fc1a4e in _nl_expand_alias (name=0x7fffffffed04 "en_IN") at localealias.c:189
#11 0x00007fffe6fbb62f in _nl_find_locale (locale_path=0x7fffe70df580 "/usr/lib/locale", locale_path_len=16, category=12, name=0x7fffffffdb90) at findlocale.c:119
#12 0x00007fffe6fbacf6 in *__GI_setlocale (catesagory=12, locale=<value optimized out>) at setlocale.c:303
#13 0x00007ffff17b8686 in 
```

但是当我`nm`从二进制文件中获取地址时，我得到的是这样的

```
0000000005ddda04 t StubGLBindFragDataLocationIndexed
0000000005ddda3f t StubGLBindFramebuffer
0000000005ddda65 t StubGLBindRenderbuffer
0000000005ddda8b t StubGLBindTexture
0000000005dddab1 t StubGLBlendColor
0000000005dddaef t StubGLBlendFunc
0000000005dddb15 t StubGLBlitFramebuffer
0000000005dddb7e t StubGLBufferData
0000000005dddbbd t StubGLBufferSubData
0000000005dddc00 t StubGLCheckFramebufferStatus
0000000005dddc1e t StubGLClear
0000000005dddc3c t StubGLClearColor
0000000005dddc7a t StubGLClearStencil
0000000005dddc98 t StubGLColorMask
0000000005dddcda t StubGLCompileShader 
```

机器是 64 位的。

据我所知，gdb 只显示虚拟地址。但我不知道为什么它会这么高并且与地址当前的 nm 输出不匹配

难道gdb地址都是虚拟地址？？？。`nm`o/p 看起来像实际的虚拟地址，因为它从 000000000 开始。但是为什么会自动添加基地址呢？

注意：我尝试使用示例 test.out。效果很好。调用堆栈地址是虚拟地址，`bt`与`nm a.out`符号输出完全匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T03:35:48.447

该`0x00007fffe6fc150f`地址来自共享库（`libc.so.6`在本例中）。它*是*虚拟地址，但它*不会*匹配输出，`nm /lib/libc.so.6`因为库是在某个*加载*地址加载的，该地址因执行而异。

您可以通过执行GDB 命令找出何时`libc.so.6`加载。`info proc map`一旦知道 的加载地址`libc.so.6`，将其添加到`nm`输出中的每个地址，结果*将*与 GDB 输出匹配。

这样做的原因很简单`a.out`，因为（与共享库不同）`a.out`链接到固定加载地址（通常`0x400000`在 Linux x86_64 上）加载，并且不会被动态加载程序重新定位。

# java - 如何在 mongo 查询中找到最小的数字？

> ID：10485497
> 
> 赞同：0
> 
> 时间：2012-05-07T16:18:01.647
> 
> 标签：java, mongodb, sorting, mongo-java

我的 mongo 数据库中有以下对象：

```
{
  "type" : "timetype"
  "time" : "18"
}
{
  "type" : "timetype"
  "time" : "5"
}
{
  "type" : "timetype"
  "time" : "43"
}
{
  "type" : "timetype"
  "time" : "23"
} 
```

我的java代码看起来像：

```
BasicDBObject query = new BasicDBObject();
query.put("type", "timetype");

 //I don't know what to put in the (...)
DBCursor cursor = Collection.find(query).sort(...).limit(1); 
```

我想在我的 mongo 数据库中找到满足查询参数的最短时间的条目，但我不知道要放置什么来实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:32:40.453

类似的东西

```
Collection.find(query).sort(new BasicDBObject( "time" , 1 )).limit(1); 
```

应该管用。

# python - Django - 模板上的日期格式错误

> ID：10485501
> 
> 赞同：0
> 
> 时间：2012-05-07T16:18:20.967
> 
> 标签：python, django

我有一个小问题，但不知道为什么。在我的 Django 外壳上：

```
In [2]: Post.objects.dates('created', 'month')
Out[2]: [datetime.datetime(2012, 5, 1, 0, 0, tzinfo=<UTC>)] 
```

但在我的模板上，

```
{% for d in dates %}                        
  <li><a href="#">{{ d|date:"m Y"}}</a></li>                        
{% endfor %} 
```

给出“04 2012”而不是“05 2012”。我错过了什么 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T16:19:36.443

时区差异。日期是 2012 年 5 月 1 日的午夜，因此如果您的服务器落后于 GMT，那么它只是 2012 年 4 月 30 日。

# asp.net - 列表视图中的下拉列表中选定的项目为空白

> ID：10485508
> 
> 赞同：0
> 
> 时间：2012-05-07T16:18:37.300
> 
> 标签：asp.net, listview, drop-down-menu, selectedindexchanged

我有一个复杂的项目，需要在列表视图中填充下拉列表。我能做到的。但是，当我从下拉列表中选择正确的值后单击更新时，它会在列表视图中返回一个空白值。我附上了一个示例代码，其中“日”来自一个拉自己，具体取决于月份。

那里的任何人都可以编辑我的代码以使其正常工作。从我所做的研究来看，我认为这与 Selected Index 的变化有关。

我正在使用visual web developer 2010 express 我也在使用framework 3.5

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>

    <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
        ConnectionString="<%$ ConnectionStrings:DispatchConnectionString %>" 
        SelectCommand="SELECT [day] FROM [TMP]"></asp:SqlDataSource>

</div>
<asp:ListView ID="ListView1" runat="server" DataKeyNames="month" 
    DataSourceID="SqlDataSource1" InsertItemPosition="LastItem">
    <AlternatingItemTemplate>
        <tr style="">
            <td>
                <asp:Button ID="DeleteButton" runat="server" CommandName="Delete" 
                    Text="Delete" />
                <asp:Button ID="EditButton" runat="server" CommandName="Edit" Text="Edit" />
            </td>
            <td>
                <asp:Label ID="monthLabel" runat="server" Text='<%# Eval("month") %>' />
            </td>
            <td>
                <asp:Label ID="dayLabel" runat="server" Text='<%# Eval("day") %>' />
            </td>
        </tr>
    </AlternatingItemTemplate>
    <EditItemTemplate>
        <tr style="">
            <td>
                <asp:Button ID="UpdateButton" runat="server" CommandName="Update" 
                    Text="Update" />
                <asp:Button ID="CancelButton" runat="server" CommandName="Cancel" 
                    Text="Cancel" />
            </td>
            <td>
                <asp:Label ID="monthLabel1" runat="server" Text='<%# Eval("month") %>' />
            </td>
            <td>
                <%--<asp:TextBox ID="dayTextBox" runat="server" Text='<%# Bind("day") %>' />--%>
                <asp:DropDownList ID="list" runat="server" DataSourceID="SqlDataSource2" 
                      DataTextField="day" DataValueField="day">
                  </asp:DropDownList>
            </td>
        </tr>
    </EditItemTemplate>
    <EmptyDataTemplate>
        <table runat="server" style="">
            <tr>
                <td>
                    No data was returned.</td>
            </tr>
        </table>
    </EmptyDataTemplate>
    <InsertItemTemplate>
        <tr style="">
            <td>
                <asp:Button ID="InsertButton" runat="server" CommandName="Insert" 
                    Text="Insert" />
                <asp:Button ID="CancelButton" runat="server" CommandName="Cancel" 
                    Text="Clear" />
            </td>
            <td>
                <asp:TextBox ID="monthTextBox" runat="server" Text='<%# Bind("month") %>' />
            </td>
            <td>
                <asp:TextBox ID="dayTextBox" runat="server" Text='<%# Bind("day") %>' />
            </td>
        </tr>
    </InsertItemTemplate>
    <ItemTemplate>
        <tr style="">
            <td>
                <asp:Button ID="DeleteButton" runat="server" CommandName="Delete" 
                    Text="Delete" />
                <asp:Button ID="EditButton" runat="server" CommandName="Edit" Text="Edit" />
            </td>
            <td>
                <asp:Label ID="monthLabel" runat="server" Text='<%# Eval("month") %>' />
            </td>
            <td>
                <asp:Label ID="dayLabel" runat="server" Text='<%# Eval("day") %>' />
            </td>
        </tr>
    </ItemTemplate>
    <LayoutTemplate>
        <table runat="server">
            <tr runat="server">
                <td runat="server">
                    <table ID="itemPlaceholderContainer" runat="server" border="0" style="">
                        <tr runat="server" style="">
                            <th runat="server">
                            </th>
                            <th runat="server">
                                month</th>
                            <th runat="server">
                                day</th>
                        </tr>
                        <tr ID="itemPlaceholder" runat="server">
                        </tr>
                    </table>
                </td>
            </tr>
            <tr runat="server">
                <td runat="server" style="">
                </td>
            </tr>
        </table>
    </LayoutTemplate>
    <SelectedItemTemplate>
        <tr style="">
            <td>
                <asp:Button ID="DeleteButton" runat="server" CommandName="Delete" 
                    Text="Delete" />
                <asp:Button ID="EditButton" runat="server" CommandName="Edit" Text="Edit" />
            </td>
            <td>
                <asp:Label ID="monthLabel" runat="server" Text='<%# Eval("month") %>' />
            </td>
            <td>
                <asp:Label ID="dayLabel" runat="server" Text='<%# Eval("day") %>' />
            </td>
        </tr>
    </SelectedItemTemplate>
</asp:ListView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:DispatchConnectionString %>" 
    DeleteCommand="DELETE FROM [TMP] WHERE [month] = @month" 
    InsertCommand="INSERT INTO [TMP] ([month], [day]) VALUES (@month, @day)" 
    SelectCommand="SELECT * FROM [TMP]" 
    UpdateCommand="UPDATE [TMP] SET [day] = @day WHERE [month] = @month">
    <DeleteParameters>
        <asp:Parameter Name="month" Type="String" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="month" Type="String" />
        <asp:Parameter Name="day" Type="String" />
    </InsertParameters>
    <UpdateParameters>
        <asp:Parameter Name="day" Type="String" />
        <asp:Parameter Name="month" Type="String" />
    </UpdateParameters>
</asp:SqlDataSource>
</form>
</body>
</html>

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
//using System.Web.UI.WebControls.button;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;

public partial class _Default : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
   {

   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:21:04.797

在下拉列表中的日期更改后，您必须重新绑定列表视图。我看到您在 EditItemTemplate 中有下拉列表。处理列表视图的更新事件并将数据源重新绑定到更新日期。

# ios - 将 MP4 视频直接从 S3 流式传输到 iPhone？

> ID：10485515
> 
> 赞同：7
> 
> 时间：2012-05-07T16:19:04.903
> 
> 标签：ios, amazon-s3, video-streaming

我在 S3 上有一堆 MP4 文件。是否可以直接从 S3 将 MP4 视频内容流式传输到 iPhone 上？如果是这样，我该怎么做？如果我不能这样做，我有哪些选项可以将视频流式传输到 iPhone？（例如在 EC2 上运行 HLs 流服务器？伪流或渐进式媒体下载？）

Cloudfront 可以流式传输视频，但显然只能使用 iOS 本身不支持的 RTMP 协议。我想本地流式传输（让事情变得更容易）。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T00:23:23.607

您可以流式传输，但视频文件必须分段为 .ts 文件和列出分段的 .m3u8 文件。请参阅[https://developer.apple.com/streaming/](https://developer.apple.com/streaming/)

# jquery - 如何制作对输入元素的焦点/模糊事件作出反应的简单的类似自动完成的 DIV？

> ID：10485516
> 
> 赞同：0
> 
> 时间：2012-05-07T16:19:05.297
> 
> 标签：jquery, autocomplete

我有这个简单的场景（为了这个问题而简化）：

```
<input type="text" id="input">
<div id="autocomplete">.. some links..</div>

<script>
  $('#input').bind('focus', function(){
    $('#autocomplete').show();
  }).bind('blur', function(){
    $('#autocomplete').hide();
  });
</script> 
```

我想要实现的是：

1.  当用户点击文本输入时，会出现自动完成。
2.  当用户单击自动完成 DIV 中的任何内容时，它会保持可见
3.  当用户点击输入和自动完成之外的任何地方时，自动完成就会消失。

我怎样才能做到这一点？特别是我正在寻找第二点的答案，因为它必须很容易实现。

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:00:32.147

如果我错了，请纠正我，但我相信您的代码适用于要求 #1 和 #3，但不适用于 #2：

> 当用户单击自动完成 DIV 中的任何内容时，它会保持可见

那是因为点击 div 会导致输入框失去焦点，所以模糊代码会立即隐藏 div。这意味着您不能使用该`blur`事件来隐藏 div。你可以绑定到`click`on `document`。在处理程序中，您必须检查是否应该隐藏 div：

```
$(document).click(function(e){
    var inputFocused = $('#input').is(':focus');
    var clickedInsideAcDiv = $(e.target).closest('#autocomplete').length > 0;
    if(!inputFocused && !clickedInsideAcDiv) {
        $('#autocomplete').hide();
    }
}); 
```

我不确定这是否会解释您实际页面上的所有内容，但我希望这个想法很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:21:02.407

我知道自己破解所有东西很酷，但你可能想看看这个 jQuery 自动完成插件：http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

**更新**

```
<script>
  $('#input').bind('focus', function() {
    $('#autocomplete').position($(this).position()); //Adjust this accordingly depending on where you want the autocomplete div to show up.
    $('#autocomplete').show();
  }).bind('blur', function(){
    $('#autocomplete').hide();
  });
</script> 
```

CSS：

```
<PARENT_OF_#autocomplete> {
    position: relative; /* Anything other than static or default one */
} 

#autocomplete {
    position: absolute;
} 
```

# objective-c - 2D 数组声明 - Objective C

> ID：10485521
> 
> 赞同：1
> 
> 时间：2012-05-07T16:19:25.053
> 
> 标签：objective-c, arrays, multidimensional-array

有没有办法分两步声明一个二维整数数组？我的范围有问题。这就是我想要做的：

```
//I know Java, so this is an example of what I am trying to replicate:

int Array[][];
Array = new int[10][10]; 
```

现在，在 OBJ-C 中，我想做类似的事情，但我无法正确使用语法。现在我一步一步完成了它，但我不能在我目前拥有它的 If 语句之外使用它：

```
int Array[10][10]; //This is based on an example I found online, but I need 
                   //to define the size on a seperate line than the allocation 
```

谁能帮我解决这个问题？我知道这可能是一个更基本的问题，但是您不能在消息之外使用关键字“new”（据我所知），并且您不能将消息发送到整数。:(

********编辑1：*************

 ****我的问题与范围有关。

```
//Declare Array Somehow
Array[][] //i know this isn't valid, but I need it without size

//if statement
if(condition)
Array[1][2]
else
Array[3][4]

//I need to access it outside of those IFs

//... later in code
Array[0][0] = 5; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T16:26:09.797

如果您知道其中一个边界的大小，这是我创建二维数组的首选方式：

```
int (*myArray)[dim2];

myArray = calloc(dim1, sizeof(*myArray)); 
```

并且可以一键释放：

```
free(myArray); 
```

不幸的是，必须修复其中一个界限才能使其正常工作。

但是，如果您不知道任何一个边界，这也应该有效：

```
static inline int **create2dArray(int w, int h)
{
    size_t size = sizeof(int) * 2 + w * sizeof(int *);
    int **arr = malloc(size);
    int *sizes = (int *) arr;
    sizes[0] = w;
    sizes[1] = h; 
    arr = (int **) (sizes + 2);

    for (int i = 0; i < w; i++)
    {
        arr[i] = calloc(h, sizeof(**arr));
    }

    return arr;
}

static inline void free2dArray(int **arr)
{
     int *sizes = (int *) arr;
     int w = sizes[-2];
     int h = sizes[-1];

     for (int i = 0; i < w; i++)
         free(arr[i]);

     free(&sizes[-2]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:21:01.877

您显示的声明（例如`int Array[10][10];`）是可以的，并且对于声明它的范围有效，如果您在类范围内执行，那么它将对整个类有效。

如果数组的大小不同，要么使用动态分配（例如`malloc`和朋友），要么使用`NSMutableArray`（对于非原始数据类型）****

# jquery - 如果元素包含单词 X 执行 Y

> ID：10485523
> 
> 赞同：1
> 
> 时间：2012-05-07T16:19:31.517
> 
> 标签：jquery, css

我正在尝试使用 jquery 来搜索其中一个元素是否包含特定单词，如果包含，我想在该特定元素上执行一些 jquery 代码。

关于我如何做到这一点的任何想法？

例子：

```
if $('div').contains('Bird'){ 

      ****execute jquery*****

} 
```

标记

```
<div>Dog x y z </div>
<div>Cat x y z </div>
<div>x y z Bird</div>
<div>x y z Fish</div> 
```

我尝试了什么：

```
if ($("#producttabs2 #producttabs ul li a").has('iPhone App')) {
    $(this).css("border","1px solid red");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T16:23:04.623

使用过滤器：

```
$('div').filter(function() {
    return this.innerHTML.indexOf(somestring) !== -1;
}).css("border","1px solid red"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T16:22:30.130

```
if ($('div').is((':contains("bird")'))
 // code here 
```

你想要[`:contains`选择器](http://api.jquery.com/contains-selector/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T16:27:52.780

简单的 jQuery：

```
$('div').each(function() {
    if( $(this).text().indexOf('Bird') != -1) {
     //do something
    }
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/gDu5t/)**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T16:40:59.767

```
$('div').filter(function() {
  return this.innerHTML.match(/bird/ig);
}).css({
    border: '1px solid #f00'
}); 
```

***[演示](http://jsfiddle.net/x46vz/)***

# actionscript-3 - 在 ActionScript 3.0 中，您可以为一个类使用 addEventListener 来响应另一个类的函数调用吗？

> ID：10485526
> 
> 赞同：0
> 
> 时间：2012-05-07T16:19:40.107
> 
> 标签：actionscript-3, events, actionscript

我知道如何对一个类使用 addEventListener 来响应另一个类的按钮被点击。如果您想将它用于比这更通用的目的怎么办？如果你想用它来响应被调用的另一个类的成员函数之一怎么办？有没有这样的语法？谢谢！

编辑：请注意，我已经用谷歌搜索了答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:25:36.307

如果你想监听另一个类的成员函数调用，你需要那个函数调用来调度一个事件。这很简单...

# 监听类

```
addEventListener("customEvent", listenerFunc); 
```

# Dispatcher 类^(（扩展 EventDispatcher / 实现 IEventDispatcher）)

```
dispatchEvent(new Event("customEvent")); 
```

只要侦听器类在对象层次结构中*高于*调度程序类，这将完美地工作。如果没有，您可能希望使用某种 Global EventDispatcher 类并在其上注册所有侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:27:28.753

您可以创建自己的事件并从其他类分派它们并在您的监听类中收听它们。这是一些代码

在 A 类中（假设它继承了 EventDispatcher）

```
public function classAMethod():void
{
   dispatchEvent(new Event("someCustomTypeForEvent"));
} 
```

在 B 类中（假设它有对 A 类的引用）

```
public function classBMethod():void
{
   classA.addEventListener("someCustomTypeForEvent",customHandler);
}

public function customHandler(e:Event):void
{
   trace("handle event");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T10:08:01.543

就像在 JAVA 中的 java.awt.Component 实例和所有扩展 java.awt.Component 的对象一样；在 AS3 中，您可以将侦听器添加到扩展 flash.display.Sprite 实例的所有对象，这些实例为您实现 IEventDispatcher 的方法...

因此，如果您有一个不扩展 flash.display.Sprite 的类，则必须扩展 EventDispatcher 才能将侦听器添加到您的实例并处理事件...

如果该类不能扩展 EventDispatcher，则必须实现 IEventDispatcher。

这是一个扩展 [class MovieClip] 的 [class MainClass]

这个 MainClass 实例创建：

[class ObjectA] 的一个实例，它扩展了 [class Object] 并实现了 IEventDispatcher，

[class ObjectB] 的一个实例，它扩展了 [class EventDispatcher]

这是使用扩展方法和实现方法的代码：我希望这个快速完成的示例对您有所帮助......（对不起我的英语，这不是我的母语。）

在**MainClass.as**：

```
package com
{
import flash.utils.getDefinitionByName;
import flash.display.MovieClip;
import flash.utils.getDefinitionByName;
import flash.utils.getQualifiedClassName;
import flash.utils.getQualifiedSuperclassName;
import com.classes.ObjectA;
import com.classes.ObjectB;
import flash.events.Event;

public class MainClass extends flash.display.MovieClip
{

    private static const DEBUG:Boolean = true;
    private static var instance:MainClass;
    private static var instanceOfA:ObjectA;
    private static var instanceOfB:ObjectB;

    public function MainClass()
    {
        MainClass.debug("MainClass constructor called");
        MainClass.debug(getClassInformations(MainClass));
        MainClass.debug(getClassInformations(ObjectA));
        MainClass.debug(getClassInformations(ObjectB));

        instanceOfA = new ObjectA();
        instanceOfB = new ObjectB();
        instanceOfA.addEventListener(ObjectA.DO_SOMETHING_EVENT,onInstanceOfA_doSomething,false,0,false);
        instanceOfB.addEventListener(ObjectB.DO_SOMETHING_EVENT,onInstanceOfB_doSomething,false,0,false);
        instanceOfA.doSomething();
        instanceOfB.doSomething();
    }
    public static function onInstanceOfA_doSomething(e:Event):void
    {
        trace("An ObjectA has Dispatched An Event of type \"" + e.type + "\"" + " on " + e.target);
    }
    public static function onInstanceOfB_doSomething(e:Event):void
    {
        trace("An ObjectB has Dispatched An Event of type \"" + e.type + "\"" + " on " + e.target);
    }
    public static function getDebugMode():Boolean
    {
        return DEBUG;
    }

    public static function debug(string:String)
    {
        if (getDebugMode())
        {
            trace(string);
        }
    }
    public static function getClassInformations(someClass:Class):String
    {
        var clss:Object = null;
        var supClss:Object = null;

        clss = getDefinitionByName(getQualifiedClassName(someClass));
        try
        {
            supClss = getDefinitionByName(getQualifiedSuperclassName(someClass));
        }
        catch (e:ArgumentError)
        {
            // Has no superClass (ex:Object)
        }
        if (supClss != null)
        {
            return ("class " + clss + " extends " + supClss);
        }
        else
        {
            return ("class " + clss);
        }
    }
}
} 
```

在**ObjectB.as**中（最简单的方法）：

```
package com.classes{
import com.MainClass;
import flash.events.EventDispatcher;
import flash.events.Event;

public class ObjectB extends EventDispatcher {
    public static var DO_SOMETHING_EVENT:String = "do_something_event";
    private var onDoSomethingEvent:Event = new Event(DO_SOMETHING_EVENT,false,false);
    public function ObjectB() {
        MainClass.debug("constructor ObjectB called");
    }
    public function doSomething():void{
        this.dispatchEvent(onDoSomethingEvent);
    }

}

} 
```

在 ObjectA.as 中（必须实现接口 IEventDispatcher 的所有方法）：

```
package com.classes
{
import com.MainClass;
import flash.events.IEventDispatcher;
import flash.events.EventDispatcher;
import flash.events.Event;

public class ObjectA implements IEventDispatcher
{
    public static var DO_SOMETHING_EVENT:String = "do_something_event";
    private var onDoSomethingEvent:Event = new Event(DO_SOMETHING_EVENT,false,false);
    private var dispatcher:EventDispatcher;
    public function ObjectA()
    {
        dispatcher = new EventDispatcher(this);
        MainClass.debug("constructor ObjectA called");
    }
    public function doSomething():void
    {
        this.dispatchEvent(onDoSomethingEvent);
    }
    public function addEventListener( 
    event_type:String, 
    event_listener:Function, 
    use_capture:Boolean = false, 
    priority:int = 0, 
    weakRef:Boolean = false 
    ):void
    {
        // implements addEventListener here
        dispatcher.addEventListener(event_type, event_listener, use_capture, priority, weakRef);
    }
    public function dispatchEvent(e:Event):Boolean
    {
        // implements dispatchEvent here
        return dispatcher.dispatchEvent(e);
    }
    public function removeEventListener(
    event_type:String, 
    event_listener:Function, 
    use_capture:Boolean = false
    ):void
    {
        // implements removeEventListener here
        dispatcher.removeEventListener(event_type, event_listener, use_capture);
    }
    public function hasEventListener(type:String):Boolean
    {
        // implements hasEventListener here
        return dispatcher.hasEventListener(type);
    }
    public function willTrigger(type:String):Boolean
    {
        // implements willTrigger here
        return dispatcher.willTrigger(type);
    }
}

} 
```

请注意，如果您扩展 EventDispatcher，您可能还希望重写某些方法。在这种情况下，您必须使用“覆盖关键字作为：

```
public override function dispatchEvent (e:Event):Boolean {
        // a method of EventDispatcher may be overridden if needed !
        // do what you need HERE...
        return dispatchEvent(e);
    } 
```

在 AS3 中，您必须指定 override 关键字，否则您将收到错误 1024：

“覆盖未标记为覆盖的函数。”

当您通过实现或扩展创建新的 EventDispatcher 时，您还可以为此对象指定其他参数和方法：

```
public function ListenerObject (v:View,m:Main) {
        dispatcher = new EventDispatcher(this);
        view = v;
        master = m;
    }
public function getView ():View {
        return view;
    }
public function getMain ():Main {
        return master;
    } 
```

然后在回调方法中使用这些方法：

```
public function callback(e:Event):void{
    e.target.getView ();
    //...
} 
```

# c++ - 如何从char数组中提取数字字符串成员

> ID：10485529
> 
> 赞同：2
> 
> 时间：2012-05-07T16:19:51.287
> 
> 标签：c++, arrays, casting

我想提取 char 数组的数字字符串值。实际上，我想提取嵌入在文件名中的数字以进行某些文件管理。例如，如果有一个文件名为**file21**，那么我想要这个文件名中的十进制数字**21**。

我怎样才能提取这些值？

我尝试了以下方法，但它导致了一个意外的值。我认为这是在进行算术运算时从 char 到 int 的隐式类型转换的结果。

```
char * fname;
cout<<"enter file name";
cin>>fname;

int filenum=fname[4]%10+fname[5];
cout<<"file number is"<<filenum; 
```

**注意：文件名严格采用fileXX**格式，**XX**是 01 到 99 之间的数字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:21:47.570

你得到未定义的行为，因为你从来没有为`char*`你读到的分配内存：

```
char * fname = new char[16];  //should be enough for your filename format 
```

或者更好

```
char fname[16]; 
```

另外，你有什么期望：

```
fname[4]%10+fname[5]; 
```

去做？神奇地连接数字？

首先，将第一个 char 转换为 an `int`，将其乘以`10`，将第二个 char 转换为 an`int`并添加到第一个。一个简单的谷歌搜索`char to int`将带你到那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T16:23:32.063

您需要减去`'0'`以获得数字字符的十进制值：

```
int filenum=(fname[4]-'0')*10+(fname[5]-'0'); 
```

更好的是，您应该使用`atoi`：

```
int filenum = atoi(fname+4); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T16:33:27.417

> 我怎样才能提取这些值？

有无数种方式。一种方法是使用`std::istringstream`：

```
#include <string>
#include <sstream>
#include <iostream>

int main () {
  std::string fname;
  std::cout << "Enter file name: ";
  std::getline(std::cin, fname);

  int filenum;
  std::istringstream stream(fname.substr(4,2));

  if(stream >> filenum)
    std::cout << "file number is " << filenum << "\n";
  else
    std::cout << "Merde\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T16:39:42.463

这是最简单的代码：

```
#include <iostream>
#include <sstream>
#include <string>
using namespace std;
int main()
{
  int filenum;
  string fname;
  cout<<"enter file name";
  cin>>fname;

  string str2 = fname.substr(4,2);
  istringstream(str2) >> filenum;
  cout<<"file number is"<<filenum;
  return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T16:48:25.930

如果您的输入定义得这么多，最简单的解决方案是 scanf：

```
int main()
{
    int theNumber = 0;
    scanf("file%d.txt", &theNumber);
    printf("your number is %d", theNumber);
} 
```

查看实际情况，从 char* 而不是 stdio 读取：[http ://codepad.org/JFqS70yI](http://codepad.org/JFqS70yI)

scanf (and sscanf) also throws in checking for proper input format: returns number of fields read successfully. In this case if return value is any other than 1, the input was wrong.

# iso8583 - OpenISO8583.Net BCD 格式轨道 2

> ID：10485533
> 
> 赞同：1
> 
> 时间：2012-05-07T16:20:11.887
> 
> 标签：iso8583, openiso8583.net

这是另一个问题。

我对 Track 2（位 35）的要求是：

> Z（数字 + X 'D' （BCD，D [1101] 的 ½ 字节表示，作为主帐号和到期日期之间的字段分隔符），BCD — 当奇数位数时，将最右半字节打包为 '0 '. 大小：可变为 37，前面是一个字节的 BCD 长度指示符

默认模板定义将第 35 位作为 2 字节长度的 Ascii 字段，所以我确定不是这样。我将其更改为 BcdVar(1, 37, Formatters.Bcd)。

以虚拟 track2 为例：

12345678901234567=9999999999999999999

我将 '=' 分隔符替换为 0x0D 整数值，它转换为“13”（1101）。我们现在有：

12345678901234567139999999999999999999

这有意义吗？我认为这不是正确的做法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:49:04.313

您遇到了 OpenIso8583.Net 的“功能”。当您使用 处理字段值`msg[3] = "123456"`时，您必须始终使用解压缩的值。

对于此 track2 数据，您需要将 track 2 构建为`12345678901234567D9999999999999999999`. 请注意数据中间的“D”作为分隔符。

现在，在您的`Template`设置字段 35 中，基本上有一个 BCD 格式化程序。

```
template[Bit._035_TRACK_2_DATA] = FieldDescriptor.BcdVar(2, 37, FieldValidators.Track2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T05:17:56.993

我有点重复了这个问题（[BCD 中的 Track2 - 'D' 字符](https://stackoverflow.com/questions/20168207/track2-in-bcd-d-character)）。

将字段视为二进制（**使用 BCD-Length-Indicator ！！！**）是一个可爱的技巧，它可能会成功。但是，仍然 - 没有方法：

```
 public static FieldDescriptor.BinaryVar(..., ILengthFormatter lengthFormatter) 
```

所以不要添加它（无论如何都应该这样做，对于 BinaryVar 字段的情况），可以添加：

```
 public static FieldDescriptor.BcdVar(..., IFieldValidator validator) 
```

并致电：

```
 msg[Bit._035_TRACK_2_DATA] = FieldDescriptor.BcdVar(2, 37, FieldValidators.Track2); 
```

'D' 将被视为 BCD - 银行知道什么...

* * *

关于**右填充**- 我想这就是**调整**器派上用场的地方。同样，我们需要添加一个带有*Adjuster*参数的静态方法，如下所示：

```
 var setAdjuster = new LambdaAdjuster(setLambda: value => value.PadRight(value.length + 1, '0')); 
```

这是真的 - 您可以在设置字段之前填充值，但这并不有趣（我们是极客，不是吗？）。

* * *

关于**向 FieldDescriptor 添加静态方法**- 我想可以使用泛型

```
 public static IFieldDescriptor Create(ILengthFormatter lengthFormatter, IFieldValidator fieldValidator, IFormatter formatter, Adjuster adjuster) 
```

但我是 C# 的新手，很高兴能得到关于我的理论的确认。

谢谢。

# scheme - 方案中的嵌套循环

> ID：10485549
> 
> 赞同：0
> 
> 时间：2012-05-07T16:21:33.117
> 
> 标签：scheme, racket

比如说我有

```
(define sample '("a" "b" "c")) 
```

我将如何创建一个可以与示例一起使用的嵌套循环。

```
 (define (runthis a)
    (cond
    (char? (car a)) ;given that this condition is true I go on to the nested loop

    (define (work sample)
    <dosomething>
    (work (cdr sample))))

    (else (write " ")
(runthis(cdr a)))) 
```

这是基本嵌套循环的正确模板吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:10:19.983

如果您需要嵌套循环，我建议使用 for 代替。这是一个小而愚蠢的例子。外部循环一次遍历列表中的单词。如果当前单词以 r 开头，则内部循环将一次打印每个字符。

```
#lang racket

(define (print-words-beginning-with-r words)
  (for ([word words]
        #:when (char=? (string-ref word 0) #\r))
    (for ([c word])
      (display c))
    (newline)))

(print-words-beginning-with-r '("racket" "rocks" "!")) 
```

这输出

```
racket
rocks 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:47:47.187

我没有方便的 Scheme 解释器，但它看起来不会运行。

我不确定您所说的“嵌套循环”究竟是什么意思，或者您试图满足什么要求，但在 Scheme 中不鼓励使用大量嵌套和长函数，因为它们会影响可读性/清晰度。您是否试图复制这种行为？

```
while(foo) {
    while(bar) {
        // Frob the fizzbits
    }
} 
```

我会推荐这样的东西，它在功能上是等效的，但更容易理解：

```
(define (inner-loop the-list)
  ; do things
)

(define (outer-loop the-list)
  (cond (char? (car a)) (inner-loop the-list)
        (else           (write " ")))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T16:57:40.580

另一种可能性是 named `let`，如：

```
(define (runthis a)
  (cond
    ((char? (car a))
     (let loop ((sample a))
       (cond 
         ((null? sample) '())
         (else (display (car sample))
           (loop (cdr sample))))))
    (else (write " ")))) 
```

# oracle - Oracle sp 中缺少括号

> ID：10485553
> 
> 赞同：0
> 
> 时间：2012-05-07T16:21:49.107
> 
> 标签：oracle, plsql

在此 Oracle 过程中，需要删除最后一条语句“AND TR.VALUE > 49)”。当我对此发表评论时，我在这里收到错误：AND (ARCH >= 0

错误缺少右括号。因为我们取出了最后一个语句，那么我应该在哪里做这个缺失的括号？

```
CREATE OR REPLACE PROCEDURE HPTC.THS_GET_CNA_PE_DET (
  FACILITYKEY VARCHAR2,
  STARTDATE DATE,
  ENDDATE DATE,
  MENUID NUMBER,
  MENUIDVALUE NUMBER,
  MINVALUE NUMBER,
  MAXVALUE NUMBER,
  SHIFTFACILITY VARCHAR2,
  THEUNIT VARCHAR2,
  THESHIFT NUMBER,
  OCURSOR OUT SYS_REFCURSOR
  )
AS
  ARCH NUMBER(1) := 0;
  SPLITDATE DATE;
BEGIN
  BEGIN
    SELECT NVL(SPLIT_DATE, TO_DATE('01012000', 'MMDDYYYY')) + 1
      INTO SPLITDATE
      FROM OGEN.GEN_P_ARCHIVE
     WHERE FACILITY_KEY = FACILITYKEY;
  EXCEPTION
    WHEN NO_DATA_FOUND THEN
      SPLITDATE := TO_DATE('01022000', 'MMDDYYYY');
  END;

  IF SPLITDATE <= ENDDATE THEN ARCH := ARCH + 1; END IF;
  IF SPLITDATE >= STARTDATE THEN ARCH := ARCH - 1; END IF;

OPEN OCURSOR FOR
   SELECT
     TR.FACILITY_KEY,
     TR.TR_DATETIME TRDATE,
     PM.NURSING_UNIT UNIT,
     TR.MENU_ID,
     NVL(D.DESCR_SHORT, 'Other') MTYPE,
     SH.DESCR SHIFT,
     PM.LAST_NAME,
     PM.FIRST_NAME,
     PM.PATIENT_ID,
     PM.MRN,
     TR.VALUE,
     U.NAME_FULL CNANAME
FROM  HPTC.THS_T_TRANSACTIONS1 TR,
   GEN.GEN_M_PATIENT_MAST PM,
   GEN.GEN_C_SHIFT SH,
   HPTC.THS_M_USERS1 U,
   HPTC.THS_M_MENU2 M1,
  (  SELECT *
  FROM  HPTC.THS_M_MENU2 M2
  WHERE   (M2.MENU_ID_PARENT  = 107)
) M2,
   HPTC.THS_C_MENU_DESCR D
WHERE   (TR.PAT_NUMBER  = PM.PAT_NUMBER)
 AND  ((TR.SHIFT_CODE  = SH.SHIFT_CODE
 AND  SH.FACILITY_KEY  = SHIFTFACILITY))
 AND  ((TR.USER_ID  = U.TS_USER_ID))
 AND  ((M1.MENU_ID (+) = TR.MENU_ID))
 AND  ((M2.MENU_ID (+) = M1.MENU_ID_PARENT))
 AND  ((D.DESCR_ID (+) = M2.DESCR_ID))
 AND  (ARCH >= 0

 AND  TR.FACILITY_KEY  = FACILITYKEY
 AND  TR.TR_DATETIME  BETWEEN STARTDATE  AND  ENDDATE
 AND  TR.EDIT_NO  < 0
 AND  TR.MENU_ID  IN ( 1070103  , 1070203  , 1070803  , 1070403  , 1070503  , 1070603  , 1070703  )
 AND  GEN.STR2NUM(TR.VALUE)  <= MAXVALUE
 AND  (DECODE(THEUNIT , '' , NULL , THEUNIT)  IS NULL
 OR  PM.UNIT_CODE  = THEUNIT)
 AND  (DECODE(THESHIFT , 0 , NULL , THESHIFT)  IS NULL
 OR  TR.SHIFT_CODE  = THESHIFT)
-- AND  TR.VALUE  > 49) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:20:22.743

您是否尝试删除评论文本并留下右括号？这样
“-- AND TR.VALUE > 49)”
就变成了：
“)”

# python - Python数字格式混乱

> ID：10485557
> 
> 赞同：2
> 
> 时间：2012-05-07T16:22:01.577
> 
> 标签：python, formatting

请让我摆脱痛苦。以下示例似乎使用`y`了两次而不是`y`然后`m`。

```
>>> m=8
>>> y=11
>>> print '20{0:02d}{0:02d}01'.format(y, m)
20111101 
```

我已经尽可能多地阅读了文档，但无法弄清楚旧程序相对简单的是什么：

```
>>> print '20%02d%02d01' % ( y, m )
20110801 
```

如果有人能解释我哪里出错了，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T16:25:03.443

这将做你想要的：

```
print '20{0:02d}{1:02d}01'.format(y, m) 
```

您两次提到第一个论点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T16:26:19.497

```
>>> print '20{0:02d}{1:02d}01'.format(y, m) 
```

您需要使用 arg 列表中的下一个 arg。

# jsf-2 - 为 TabView 组件声明一个新的渲染器

> ID：10485562
> 
> 赞同：0
> 
> 时间：2012-05-07T16:22:31.433
> 
> 标签：jsf-2, primefaces, custom-component, custom-renderer

我想在 PrimeFaces Tab/Tabview 组件的基础上构建一个新组件。它应该看起来像浏览器中的添加选项卡，并打开一个用于填写表单的页面。问题是我想将它集成到基于数据模型（[http://www.primefaces.org/showcase/ui/tabviewModel.jsf](http://www.primefaces.org/showcase/ui/tabviewModel.jsf)）的 TabView 中。现在，我可以将用于填写表单的选项卡与带有预定义数据的选项卡结合起来，也可以使用 TabView，它可以为我的数据动态创建选项卡。

我已经阅读了有关以两种方式创建自定义组件的 JSF 文档——作为复合组件或作为新的 Java 类。我试图创建一个自定义组件，但它似乎不像我描述的那样工作。

我的问题是：

1）是否有可能用复合组件解决这个问题？如果是的话，有人可以给我一个提示吗？

2）如果没有，是否有在现有 PrimeFaces 组件（可能是新的 TabView 类型）的基础上编写新组件的教程？

UPD：在做了一些研究之后，我意识到最简单的方法是为 TabView 编写一个新的渲染器。

我声明了一个新的渲染器类：

```
public class AddableTabViewRenderer extends TabViewRenderer 
```

并在 faces-config.xml 中注册：

```
<render-kit>
  <render-kit-id>HTML_BASIC</render-kit-id> 
  <renderer>
    <component-family>org.primefaces.component</component-family>
    <renderer-type>org.primefaces.component.TabView</renderer-type>
    <renderer-class>
      de.idealo.evaluation.jsf.webapp.component.AddableTabViewRenderer
    </renderer-class>
  </renderer>
</render-kit> 
```

但是，当渲染带有 TabView 组件的视图时，会调用 TabViewRenderer 的 encodeEnd 方法，而不是 AddableTabViewRenderer 的覆盖方法。你能告诉我问题可能出在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:25:02.130

我的配置中的渲染器类是错误的。我误解了有关注册组件的说明。我认为 render-type 是将使用自定义渲染器渲染的类。它必须是 org.primefaces.component.TabViewRenderer。现在它工作正常:)

# javascript - 为什么这种跨域请求解决方法有效？

> ID：10485564
> 
> 赞同：2
> 
> 时间：2012-05-07T16:22:38.610
> 
> 标签：javascript, ajax, cross-domain, jsonp

在[这篇 John Resig 文章中](http://ejohn.org/blog/dictionary-lookups-in-javascript/)，他正在使用 javascript 处理字典大小的单词列表，并且他正在通过 ajax 从 CDN 加载内容。

单词用分隔单词的换行符加载。然后他说跨域失败：

> 但是有一个问题：我们无法从 CDN 加载我们的字典！由于 CDN 位于另一个服务器上（或另一个子域，就像这里的情况一样），我们受制于浏览器禁止这些类型请求的跨域策略。一切都不会丢失 - 通过对字典文件进行简单的调整，我们可以跨域加载它。
> 
> 首先，我们用空格替换字典文件中的所有结束行。其次，我们用 JSONP 语句包装整行。因此最终结果看起来像这样：
> 
> dictLoaded('aah aahed aahing aahs aal... zyzzyvas zzz');
> 
> 这允许我们对文件执行 Ajax 请求并让它按预期工作 - 同时仍然受益于浏览器提供的所有缓存和压缩。

所以，如果我没看错的话，仅仅`dictLoaded('original content')`在原始内容周围添加他的方法就会导致 ajax 请求不会失败。

这（把它变成一个函数+参数）真的只需要吗？JSONP为什么能解决跨域访问限制的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T16:27:45.877

标签可以从`<script>`任何地方（甚至跨域）加载任何 JS 文件。它带来的好处是该脚本中的代码也被执行，因此，这是一种绕过跨域限制的方法。

问题是，当代码被执行时，它是在全局范围内执行的。所以有这个代码：

```
var test = 'foo' 
```

将在全局范围内创建一个`test`变量。

为了缓解这种情况，您可以将回复包含在一个函数中。这是“JSONP”中的“P”，意思是“填充”。这会将您的回复包含在函数调用中。

因此，如果您的外国脚本有：

```
myFunction({
    test : 'foo'
}); 
```

它使用具有 value 的 key调用`myFunction`并传递一个对象。接收函数如下所示：`test``foo`

```
function myFunction(data){
    //"data.test" is "foo"
} 
```

现在我们已经成功绕过了跨域限制。所需的基本部件是：

*   接收函数（使用后可以动态创建和丢弃）
*   “填充” JSON 回复

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T16:25:16.767

这是因为他添加了JSONP语句。

> “带填充的 JSON”是对基本 JSON 数据格式的补充。它提供了一种从不同域中的服务器请求数据的方法，由于同源策略，典型的 Web 浏览器禁止这样做。

这通过脚本元素注入工作。

> JSONP 仅在与脚本元素一起使用时才有意义。对于每个新的 JSONP 请求，浏览器必须添加一个新元素，或重用现有元素。前一个选项——添加一个新的脚本元素——是通过动态 DOM 操作完成的，被称​​为脚本元素注入。该元素被注入 HTML DOM，并将所需 JSONP 端点的 URL 设置为“src”属性。这种动态脚本元素注入通常由 javascript 帮助程序库完成。jQuery等框架有jsonp辅助功能；还有独立选项。

来源：[http ://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T16:25:23.677

> 这（把它变成一个函数+参数）真的只需要吗？

是的。

> 为什么这解决了跨域访问限制的问题？

您应该阅读有关[JSONP](http://en.wikipedia.org/wiki/JSONP)的信息。这个想法是您现在可以包含一个`<script>`动态指向资源的标签，而不是发送 AJAX 请求（这是被禁止的）。由于你已经用函数名包装了内容，这个函数将被执行并作为参数传递给 JSON 对象。所以剩下的就是定义这个函数。

# java - 将参数与 Eclipse 中多个方法调用的列对齐

> ID：10485572
> 
> 赞同：4
> 
> 时间：2012-05-07T16:22:57.127
> 
> 标签：java, eclipse

我正在寻找一种在 eclipse 中自动对齐多个方法调用的参数的方法。

例如
输入：

```
method( arg1, longarg2, anotherArg3);
method(arg1,arg2,aArg3);
method(argument1, arg2, anotherArg3);
method( argument1,longarg2,anotherArg3,extra); 
```

输出：

```
method( arg1,      longarg2, anotherArg3 );
method( arg1,      arg2,     aArg3       );
method( argument1, arg2,     anotherArg3 );
method( argument1, longarg2, anotherArg3, extra); 
```

Eclipse 命令、格式化程序设置、插件，各方面都胜出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:14:36.343

这在 Eclipse 标准工具中是不可能的。

也就是说，也没有必要。如果你多次调用同一个方法并且想要以这种方式对齐参数，这表明代码风格不好，因为你的代码中有很多代码重复。因此，请考虑如何重构代码以避免这些重复的方法调用。例如，将参数放在集合中，然后迭代集合。

# android - 当用户按下按钮直到用户释放该按钮时，如何调用函数重复

> ID：10485580
> 
> 赞同：4
> 
> 时间：2012-05-07T16:23:32.900
> 
> 标签：android

在安卓中，

从用户按下按钮直到他/她释放该按钮，如何重复调用函数？

我检查了 clickListener 和 longclicklistener，但他们似乎没有做我想做的事。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:33:53.173

您可以使用`OnTouchListener`：

```
public class MainActivity extends Activity implements OnTouchListener
{

    private Button button;

    // ...

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        // ...

        button = (Button) findViewById(R.id.button_id);
        button.setOnTouchListener(this);

        // ...
    }

    // ...

    @Override
    public boolean onTouch(View v, MotionEvent event)
    {
        /* get a reference to the button that is being touched */
        Button b = (Button) v;

        /* get the action of the touch event */
        int action = event.getAction();

        if(action == MotionEvent.ACTION_DOWN)
        {
            /*
                A pressed gesture has started, the motion contains
                the initial starting location.
            */
        }
        else if(action == MotionEvent.ACTION_UP)
        {
            /*
                A pressed gesture has finished, the motion contains
                the final release location as well as any intermediate
                points since the last down or move event.
            */
        }
        else if(action == MotionEvent.ACTION_MOVE)
        {
            /*
                A change has happened during a press gesture (between
                ACTION_DOWN and ACTION_UP). The motion contains the
                most recent point, as well as any intermediate points
                since the last down or move event.
            */
        }
        else if(action == MotionEvent.ACTION_CANCEL)
        {
            /*
                The current gesture has been aborted. You will not
                receive any more points in it. You should treat this
                as an up event, but not perform any action that you
                normally would.
            */
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:27:35.003

如果我是对的： 单击：用户按下并松开手指。触摸：用户的手指仍在设备上。

也许您应该尝试使用 onTouchListener？我从来没用过...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:32:40.023

使用 OnTouchListener 调用函数，直到用户释放按钮：

```
private OnTouchListener otl_conn = (OnTouchListener) new TouchListenerConn();
private Button bv = null;
bv = (Button) findViewById(R.id.xxxxbutton);
bv.setOnTouchListener(otl_conn);
 class  TouchListenerConn implements OnTouchListener  
    {
        public boolean onTouch(View v, MotionEvent event) {
            switch(event.getAction()){
            case MotionEvent.ACTION_DOWN:
            //call function here
            break;
            case MotionEvent.ACTION_UP:
            //DO SOMETHING
            xxxx....;
            break;
            }
            return true;
        }
    } 
```

# c# - 在 ListView 中指定 VisualStateGroups

> ID：10485581
> 
> 赞同：0
> 
> 时间：2012-05-07T16:23:35.177
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我正在尝试重新定义 ListView（Metro 风格的应用程序）的选定项目的外观。

`VisualStateGroups`我通过在我的模板中定义来实现它。

```
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="CommonStates">
        <VisualState x:Name="Normal" />
        <VisualState x:Name="PointerOver">
            <Storyboard>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="expenseItem" Storyboard.TargetProperty="Background">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="LightGray"/>
                </ObjectAnimationUsingKeyFrames>
            </Storyboard>
        </VisualState>
    </VisualStateGroup>

    <VisualStateGroup x:Name="SelectionStates">
        <VisualState x:Name="Unselected" />
        <VisualState x:Name="Selected">
            <Storyboard>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemLocationName" Storyboard.TargetProperty="Foreground">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ExpenseListHighlightedText}"/>
                </ObjectAnimationUsingKeyFrames>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="expenseItem" Storyboard.TargetProperty="Background">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ApplicationGradientBlue}"/>
                </ObjectAnimationUsingKeyFrames>
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

我的问题是，当我将光标放在所选项目上时，即使我不希望这样，背景也会发生变化。当我搬出时，该项目将获得“正常”背景，而不是保持“选定”背景。

如何指定所选项目的背景不得更改？

*编辑：*我仍然希望对未选择的项目产生过度影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:39:18.460

您需要从 PointerOver 状态中删除情节提要。

# javascript - 销毁地图实例的正确方法是什么？

> ID：10485582
> 
> 赞同：96
> 
> 时间：2012-05-07T16:23:37.417
> 
> 标签：javascript, google-maps-api-3

我最近开发了一个 html5 移动应用程序。该应用程序是一个页面，其中导航哈希更改事件替换了整个 DOM。该应用程序的一部分是使用 API v3 的 Google Map。在从 DOM 中删除地图 div 之前，我想删除任何事件处理程序/侦听器并释放尽可能多的内存，因为用户可能不会再次返回该部分。

销毁地图实例的最佳方法是什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-18T22:50:30.547

我在这个问题上添加了第二个答案，因为我不想删除我们通过对我之前的答案的后续评论所获得的来回。

但是我最近遇到了一些直接解决您的问题的信息，所以我想分享一下。我不知道您是否知道这一点，但在[2012 年 5 月 9 日的 Google Maps API Office Hours Video](https://www.youtube.com/watch?v=rUYs765QX-8&t=12m50s)中，来自 Google 的 Chris Broadfoot 和 Luke Mahe从 stackoverflow讨论了*这个问题。*如果您将视频播放设置为 12:50，那是他们讨论您问题的部分。

本质上，他们承认这是一个错误，但也补充说他们并不真正支持涉及创建/销毁连续地图实例的用例。他们强烈建议创建地图的单个实例并在任何此类场景中重用它。他们还谈到将地图设置为 null，并明确删除事件侦听器。您表达了对事件侦听器的担忧，我认为只需将地图设置为 null 就足够了，但看起来您的担忧是有效的，因为它们特别提到了事件侦听器。他们还建议完全删除包含地图的 DIV。

无论如何，只是想传递它并确保它包含在 stackoverflow 讨论中，并希望它对您和其他人有所帮助-

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-02-02T16:02:30.077

[官方](https://issuetracker.google.com/issues/35821412#comment32)的回答是你没有。单页应用程序中的地图实例应该被重用，而不是被销毁然后重新创建。

对于某些单页应用程序，这可能意味着重新构建解决方案，以便一旦创建地图，它可能会被隐藏或与 DOM 断开连接，但永远不会被销毁/重新创建。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-08-27T17:08:39.550

由于显然您不能真正销毁地图实例，因此可以减少此问题，如果

*   您需要在网站上同时显示多张地图
*   地图的数量可能会随着用户交互而改变
*   地图需要隐藏并与其他组件一起重新显示（即它们不会出现在 DOM 中的固定位置）

正在保留一个地图实例池。池跟踪正在使用的实例，当它被请求一个新实例时，它会检查是否有任何可用的地图实例是空闲的：如果是，它将返回一个现有的实例，如果不是，它将创建一个新的地图实例并返回它，将其添加到池中。这样，您将只有最大数量的实例等于您在屏幕上同时显示的最大地图数量。我正在使用这段代码（它需要 jQuery）：

```
var mapInstancesPool = {
 pool: [],
 used: 0,
 getInstance: function(options){
    if(mapInstancesPool.used >= mapInstancesPool.pool.length){
        mapInstancesPool.used++;
        mapInstancesPool.pool.push (mapInstancesPool.createNewInstance(options));
    } else { 
        mapInstancesPool.used++;
    }
    return mapInstancesPool.pool[mapInstancesPool.used-1];
 },
 reset: function(){
    mapInstancesPool.used = 0;
 },
 createNewInstance: function(options){
    var div = $("<div></div>").addClass("myDivClassHereForStyling");
    var map =   new google.maps.Map(div[0], options);
    return {
        map: map,
        div: div
    }
 }
} 
```

您将起始地图选项传递给它（根据 google.maps.Map 构造函数的第二个参数），它会返回地图实例（您可以在其上调用与 google.maps.Map 相关的函数）和容器，其中您可以使用“myDivClassHereForStyling”类设置样式，并且可以动态地附加到 DOM。如果需要重置系统，可以使用 mapInstancesPool.reset()。它将计数器重置为 0，同时保留池中的所有现有实例以供重用。在我的应用程序中，我需要一次删除所有地图并创建一组新地图，因此没有回收特定地图实例的功能：您的里程可能会有所不同。为了从屏幕上移除地图，我使用了 jQuery 的 detach，它不会破坏地图的 container 。

通过使用这个系统，并使用

```
google.maps.event.clearInstanceListeners(window);
google.maps.event.clearInstanceListeners(document); 
```

并运行

```
google.maps.event.clearInstanceListeners(divReference[0]);
divReference.detach() 
```

（其中 divReference 是从实例池返回的 div 的 jQuery 对象）在我删除的每个 div 上，我设法使 Chrome 的内存使用量或多或少保持稳定，而不是每次我删除地图并添加新地图时它都会增加。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-07T17:13:01.470

我会建议删除地图 div 的内容并`delete`在保存对地图的引用的变量上使用，并且可能显式地`delete`ing 任何事件侦听器。

但是，有[一个公认的错误](http://code.google.com/p/gmaps-api-issues/issues/detail?id=3803)，这可能不起作用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-23T06:39:52.217

由于谷歌没有为 api v3 提供 gunload() 更好地在 html 中使用 iframe 并将 map.html 作为该 iframe 的源。使用后将 src 设为 null。这肯定会释放 map 消耗的内存。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-07T16:40:27.023

当您移除 时`div`，即移除显示面板并且地图将消失。要删除地图实例，只需确保您对地图的引用设置为`null`并且对地图其他部分的任何引用都设置为`null`。那时，JavaScript 垃圾收集将负责清理，如：[垃圾收集在 JavaScript 中如何工作？](https://stackoverflow.com/q/4324133/1314132).

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-07T17:08:52.330

我猜你在说`addEventListener`. 当您删除 DOM 元素时，某些浏览器会泄漏这些事件并且不会删除它们。这就是为什么 jQuery 在删除元素时会做几件事的原因：

*   它会在可以使用时删除事件`removeEventListener`。这意味着它与它在此元素上添加的事件侦听器保持一个数组。
*   当 DOM 元素不可用时，它会删除有关事件（ 、 等）的属性（`onclick`不过`onblur`，它有一个数组来存储添加的事件）。`delete``addEventListener`
*   它将元素设置`null`为避免 IE 6/7/8 内存泄漏。
*   然后它会删除该元素。

# oracle - Oracle如何在内部选择语句中为作为计算属性的列起别名

> ID：10485586
> 
> 赞同：2
> 
> 时间：2012-05-07T16:24:07.883
> 
> 标签：oracle

这是在 Transact-sql 中完美运行的 SQL 语句

```
SELECT a.Account_ID, a.First_Name, a.Last_Name, m.number
FROM Account a,
(SELECT R_Account_ID, COUNT(Notification_ID) AS number
FROM Rcv_Send_Event_Notf 
GROUP BY R_Account_ID) m
WHERE a.Account_ID = m.R_Account_ID 
```

但它没有在 Oracle 中。`m.number`它在大多数选择语句中抱怨。我相信也是因为 AS`number`在第 3 行。

> 无效的 user.table.column、table.column 或列规范...

在 Oracle 中是否有不同的方法来给列起**别名？**

感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T16:32:55.337

`Number`是Oracle中的一个关键字，所以不使用双引号就不能作为别名使用。大多数人会建议不要将其用作别名，句号。

```
> select d.number from (select sysdate as number from dual) d

Error starting at line 3 in command:
select d.number from (select sysdate as number from dual) d
Error at Command Line:3 Column:9
Error report:
SQL Error: ORA-01747: invalid user.table.column, table.column, or column specification
01747\. 00000 -  "invalid user.table.column, table.column, or column specification"

> select d.number from (select sysdate as "number" from dual) d

Error starting at line 2 in command:
select d.number from (select sysdate as "number" from dual) d
Error at Command Line:2 Column:9
Error report:
SQL Error: ORA-01747: invalid user.table.column, table.column, or column specification
01747\. 00000 -  "invalid user.table.column, table.column, or column specification"

> select d."number" from (select sysdate as "number" from dual) d
number                    
------------------------- 
07-MAY-12 12:32:28 PM 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:31:21.163

如果我没有错过什么，你可以用

```
select a.account_ID, a.First_Name, a.Last_Name, count(*)
from Account a
inner join RCV_Send_Event_Notf m on a.Account_Id = m.R_Account_Id
Group by a.account_Id, a.First_Name, a.Last_Name; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T16:34:05.837

Oracle 可能不喜欢“数字”这个名称，因为它是一个关键字。我将查询“归结”并重命名为“数字”，它似乎可以工作

```
SELECT m.number_col
FROM dual a,
(SELECT   123 AS number_col
FROM dual ) m 
```

您还可以使用 WITH 子句：

```
 WITH m AS
(SELECT  sysdate  as number_col
FROM dual )
SELECT m.number_col
FROM dual a, m 
```

# java - 在 Java 中读取大量数据

> ID：10485589
> 
> 赞同：0
> 
> 时间：2012-05-07T16:24:26.680
> 
> 标签：java, types, large-data-volumes

我正在使用 Java 读取和处理来自[UCI Machine Learning Repository](http://archive.ics.uci.edu/ml/datasets.html)的一些数据集。我开始为每个数据集创建一个类并使用特定的类文件。数据集中的每个属性都由所需类型的类中的相应数据成员表示。这种方法效果很好，直到没有。归因于 <10-15。我只是增加或减少了类的数据成员，并更改了它们的类型以对新数据集进行建模。我还对功能进行了必要的更改。

问题：我现在必须处理很多大型数据集。以这种方式处理具有> 20-30 个属性的人非常乏味。我不需要查询。我的数据离散化算法只需要对数据进行 4 次扫描即可对其进行离散化。我的工作在离散化后立即结束。这里有什么有效的策略？

我希望我能够清楚地说明我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:43:48.547

一些选项：

1.  编写代码生成器来读取文件的元数据并生成等效的类文件。
2.  不要为上课而烦恼；将数据保存在 or 的数组中，`Object`并`String`根据需要进行转换。
3.  为您需要的所有类型创建一个包含*DataElements*和子类*DataElements*的集合的类，并使用元数据在运行时创建正确的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:20:55.207

创建一个简单的 DataSet 类，其中包含如下成员：

```
 public class DataSet {
     private List<Column> columns = new ArrayList<Column>();
     private List<Row> rows = new ArrayList<Row>();

     public void parse( File file ) {
         // routines to read CSV data into this class
     }
 }

 public class Row {
     private Object[] data;

     public void parse( String row, List<Column> columns ) {
         String[] row = data.split(",");
         data = new Object[row.length];

         int i = 0;
         for( Column column : columns ) {
             data[i] = column.convert(row[i]);
             i++;
         }
     }
 }

 public class Column {
     private String name;
     private int index;
     private DataType type;

     public Object convert( String data ) {
         if( type == DataType.NUMERIC ) {
            return Double.parseDouble( data );
         } else {
            return data;
         }
     }
 }

 public enum DataType {
     CATEGORICAL, NUMERIC
 } 
```

这将处理您希望使用的任何数据集。唯一的问题是用户必须通过将列及其各自的数据类型定义到 DataSet 来定义数据集。您可以在代码中执行此操作，也可以从文件中读取任何您认为更容易的方法。您可能可以默认很多配置数据（例如 CATEGORICAL），或者尝试解析该字段，如果失败，它必须是 CATEGORICAL 否则它的数字。通常，该文件包含一个标题，您可以解析以查找列的名称，然后您只需通过查看该列中的数据来确定数据类型。猜测数据类型的简单算法对您有很大帮助。本质上，这是每个其他包用于此类数据的完全相同的数据结构（例如 R、Weka 等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:56:44.043

我在我的一个项目中做了类似的事情；大量可变数据，就我而言，我是从互联网上获取数据的。由于我需要查询、排序等，我花了一些时间设计一个数据库来适应数据的所有变化（并非所有条目都具有相同数量的属性）。确实需要一段时间，但最后我使用相同的代码来获取任何条目的数据（在我的例子中使用 JPA）。我的 IDE (NetBeans) 直接使用数据库模式创建了大部分代码。

根据您的问题，尚不清楚您打算如何使用这些数据，所以我根据个人经验来回答。

# doctrine-orm - Doctrine2 - 在刷新前获取实体 ID

> ID：10485591
> 
> 赞同：19
> 
> 时间：2012-05-07T16:24:34.120
> 
> 标签：doctrine-orm, entity, flush, persist

有没有办法在持久/刷新之前获取实体 ID？我是说：

```
$entity = new PointData();
$form   = $this->createForm(new PointDataType(), $entity); 
```

如果我此时尝试**$entity->getId()**，它不会返回任何内容。

我可以通过以下方式使其工作：

```
$em->persist($entity);
$em->flush(); 
```

（假设**$em = $this->getDoctrine()->getEntityManager();**）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-08T20:48:39.087

如果您想在实体被持久化到数据库之前知道它的 ID，那么您显然不能使用生成的标识符。您需要找到某种方法来自己生成唯一标识符（也许某种散列函数可以产生足够唯一的值）。

不过，这很少是一个好主意，所以你应该小心。

我会非常仔细地考虑为什么我需要在刷新之前知道标识符。Doctrine 非常擅长让您构建一个大对象图，并一次性持久化/刷新它。您的架构中似乎有一些丑陋的东西需要解决。在使用 application-generated-id 路由之前查看它可能是一个好主意。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-06-20T00:46:33.963

您可以使用 @PostPersist 注释。带有注释的方法将在刷新终止之前执行，并且实体 ID 已经可用。

[https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/events.html](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/events.html)

postPersist - postPersist 事件在实体被持久化后发生在实体上。它将在数据库插入操作之后被调用。生成的主键值在 postPersist 事件中可用。

```
<?php

use Doctrine\ORM\Mapping as ORM;

/** 
 * @ORM\Entity 
 * @ORM\HasLifecycleCallbacks 
 */
class PointData
{
    /**
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
     private $id;

     ...

     /** 
      * @ORM\PostPersist 
      */
     public function onPostPersist()
     {
         // Put some simple logic here that required the auto-generated Id.

         $this->doSomething($this->id);
     }

     ...

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-23T12:41:45.683

[教义最佳实践](https://ocramius.github.io/doctrine-best-practices/#/62)说，

> 您应该避免自动生成的标识符。因为：
> 
> *   您的数据库操作将相互阻塞
> *   您拒绝批量插入
> *   您不能进行多请求交易
> *   您的对象在保存之前无效
> *   没有数据库，您的对象将无法工作
> 
> 所以你可以使用 **UUIDS**

```
public function __construct() {
     $this->id = Uuid::uuid4();  
} 
```

此外，Doctrine从 2.3 版本开始支持[UUID生成策略。](https://www.doctrine-project.org/projects/doctrine-orm/en/latest/reference/basic-mapping.html#doctrine-mapping-types)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-08T17:50:40.450

```
$em = $this->getDoctrine()->getManager();
$entity = new PointData();

$em->persist($entity);

$entity->getId() <-- return <int>

$em->flush(); 
```

坚持后你可以得到id

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-06T16:01:26.670

你可以使用自动生成的 ID 来获取一个键，比如通用唯一标识符 (UUID)，或者你可以获取 symfony 的事件： postFlush - postFlush 事件在刷新操作结束时发生。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-28T08:19:57.763

不确定为什么在刷新之前需要 ID，但是，如果您确实需要在不保存到数据库的情况下保留实体，您可以尝试使用[Transactions](https://www.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/transactions.html)。

尝试这样的事情：

```
$em->beginTransaction();
$em->persist($entity);
$em->flush();
$id = $entity->getId();
//do some stuff and save when ready
$em->commit(); 
```

# c# - OwnerDrawnElement 背景颜色为黑色，直到被选中

> ID：10485592
> 
> 赞同：2
> 
> 时间：2012-05-07T16:24:38.003
> 
> 标签：c#, xamarin.ios, monotouch.dialog

我有这个所有者绘制的元素：

```
using System;
using Tracktion.Service.WCF.Entities;
using MonoTouch.Dialog;
using MonoTouch.UIKit;
using MonoTouch.CoreGraphics;
using System.Drawing;
using MonoTouch.Foundation;

namespace Tracktion.iOS
{
public class EventListingElement : OwnerDrawnElement
{

    public static UIFont EventTitleFont = UIFont.BoldSystemFontOfSize (18f);
    public static UIFont EventTypeFont = UIFont.SystemFontOfSize (14f);
    public static UIFont CountsFont = UIFont.ItalicSystemFontOfSize (14f);
    public static UIFont DatesFont = UIFont.SystemFontOfSize (14f);
    public static UIColor DefaultBackgroundColor = UIColor.White;

    public EventListingElement (EventListingItem item) : base(UITableViewCellStyle.Default, "EventListingElement")
    {
        ev = item;
    }

    public EventListingElement (EventListingItem item, Action<EventListingItem> tapped) : this(item)
    {
        whenTapped = tapped;
    }

    EventListingItem ev;
    Action<EventListingItem> whenTapped = null;

    public override void Draw (RectangleF bounds, CGContext context, UIView view)
    {
        //view.BackgroundColor = EventListingElement.DefaultBackgroundColor;
        //CGContext currentContext = UIGraphics.GetCurrentContext ();
        SizeF sizeF;
        float num = 0f;
        UIColor.FromRGB (36, 112, 216).SetColor ();
        string dateStr;
        if (ev.StartTime.HasValue)
        {
            TimeSpan t = DateTime.Now - ev.StartTime.Value;
            if (DateTime.Now.Day == ev.StartTime.Value.Day)
            {
                dateStr = ev.StartTime.Value.ToShortTimeString ();
            }
            else
            {
                if (t <= TimeSpan.FromHours (24.0))
                {
                    dateStr = "Yesterday"; //.GetText ();
                }
                else
                {
                    if (t < TimeSpan.FromDays (6.0))
                    {
                        dateStr = ev.StartTime.Value.ToString ("dddd");
                    }
                    else
                    {
                        dateStr = ev.StartTime.Value.ToShortDateString ();
                    }
                }
            }
        }
        else
        {
            dateStr = "Date TBA";
        }
        // Setup counts
        string counts = "Staff & Volunteers: {0} reg, {1} in, {2} out\n";
        counts += "Students & Visitors: {3} reg, {4} in, {5} out";
        counts = string.Format (counts, ev.CountOfStaffAndVolunteersRegistered, ev.CountOfStaffAndVolunteersCheckedIn, ev.CountOfStaffAndVolunteersCheckedOut, ev.CountOfStudentsAndVisitorsRegistered, ev.CountOfStudentsAndVisitorsCheckedIn, ev.CountOfStudentsAndVisitorsCheckedOut);

        float left = 13f;

        // Draw
        sizeF = view.StringSize (dateStr, EventListingElement.EventTitleFont);
        float num2 = sizeF.Width + 21f + 5f;
        RectangleF dateFrame = new RectangleF (view.Bounds.Width - num2, 6f, num2, 14f);
        /*if (ev.StartTime != null && ev.StartTime.Value.Date == DateTime.Today)
        {
            currentContext.SaveState ();
            currentContext.AddEllipseInRect (dateFrame);
            currentContext.Clip ();
            currentContext.DrawLinearGradient (EventListingElement.EventIsTodayGradient, new PointF (10f, 32f), new PointF (22f, 44f), CGGradientDrawingOptions.DrawsAfterEndLocation);
            currentContext.RestoreState ();
        }*/
        view.DrawString (dateStr, dateFrame, EventListingElement.DatesFont, UILineBreakMode.Clip, UITextAlignment.Left);
        float num3 = view.Bounds.Width - left;
        UIColor.Black.SetColor ();
        if (!string.IsNullOrWhiteSpace (ev.EventType))
        {
            view.DrawString (ev.EventType, new PointF (left, 2f), num3 - num2, EventListingElement.EventTypeFont, UILineBreakMode.TailTruncation);
        }
        view.DrawString (ev.Name, new PointF (left, 23f), num3 - left - num, EventListingElement.EventTitleFont, UILineBreakMode.TailTruncation);
        UIColor.Gray.SetColor ();
        view.DrawString (counts, new RectangleF (left, 40f, num3 - num, 34f), EventListingElement.CountsFont, UILineBreakMode.TailTruncation, UITextAlignment.Left);
        /*if (this.NewFlag)
        {
            currentContext.SaveState ();
            currentContext.AddEllipseInRect (new RectangleF (10f, 32f, 12f, 12f));
            currentContext.Clip ();
            currentContext.DrawLinearGradient (MessageSummaryView.gradient, new PointF (10f, 32f), new PointF (22f, 44f), CGGradientDrawingOptions.DrawsAfterEndLocation);
            currentContext.RestoreState ();
        }
        */

        UIColor.Clear.SetFill();
        UIColor.Black.SetColor ();
    }

    public override UITableViewCell GetCell (UITableView tv)
    {
        var cell = base.GetCell (tv);
        cell.BackgroundColor = UIColor.Clear;
        cell.BackgroundView = new UIView(RectangleF.Empty) { BackgroundColor = UIColor.Clear };
        cell.SetNeedsDisplay();
        return cell;
    }

    public override float Height (RectangleF bounds)
    {
        return 90f;
    }

    public override void Selected (DialogViewController dvc, UITableView tableView, NSIndexPath path)
    {
        base.Selected (dvc, tableView, path);
        if (whenTapped != null)
            whenTapped(this.ev);
    }

}
} 
```

我还没有正确地布置好所有东西，因为我遇到了一个大问题——它最初总是将背景渲染为黑色，没有圆角。但是，在选择单元格并释放选择后，单元格看起来很好，圆角等等。关于我需要做什么的任何建议？我开始使用具有 2 个内部类的 UIView，一个用于单元格，一个用于视图，并且运气相同，并认为切换到 OwnerDrawnElement 可以解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:28:38.830

我删除了 OwnerDrawnElement 作为基类，并简单地扩展了 Element。我发现 Miguel 的一篇旧[博客文章](http://tirania.org/monomac/archive/2011/Jan-18.html)对解决这个问题很有帮助。

一些重要的点是扩展 Element 并实现 IElementSizing。GetCell 返回一个 MyDataCell 的实例，该实例具有一个覆盖 draw 方法的自定义 UIView。自定义 UIView 将其 BackgroundColor 设置为清除也非常重要。

```
public class EventListingElement2 : Element , IElementSizing
{
    EventListingItem _ev;

    public EventListingElement2 (EventListingItem item) : base ("")
    {
        _ev = item;
    }

    public override MonoTouch.UIKit.UITableViewCell GetCell (MonoTouch.UIKit.UITableView tv)
    {
        MyDataCell ret = tv.DequeueReusableCell ("xcx") as MyDataCell;
        if (ret == null) {
            ret = new MyDataCell (_ev, "xcx");
        }
        else {
             ret.UpdateCell (_ev);
        }

        return ret;
    }

    public override void Selected (DialogViewController dvc, UITableView tableView, MonoTouch.Foundation.NSIndexPath path)
    {
        base.Selected (dvc, tableView, path);
    }

    #region IElementSizing implementation
    public float GetHeight (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
    {
        return 90;
    }
    #endregion
}

public class MyDataView : UIView
{
    public MyDataView (EventListingItem myData)
    {
        Update (myData);
        this.BackgroundColor = UIColor.Clear;
    }

    public void Update (EventListingItem myData)
    {
        this._ev = myData;
        SetNeedsDisplay ();
    }

    EventListingItem _ev = new EventListingItem ();

    public override void Draw (RectangleF rect)
    {
        SizeF sizeF;
        float num = 0f;
        UIColor.FromRGB (36, 112, 216).SetColor ();
        string dateStr;
        if (_ev.StartTime.HasValue) {
            TimeSpan t = DateTime.Now - _ev.StartTime.Value;
            if (DateTime.Now.Day == _ev.StartTime.Value.Day) {
                dateStr = _ev.StartTime.Value.ToShortTimeString ();
            } else {
                if (t <= TimeSpan.FromHours (24.0)) {
                    dateStr = "Yesterday"; //.GetText ();
                } else {
                    if (t < TimeSpan.FromDays (6.0)) {
                        dateStr = _ev.StartTime.Value.ToString ("dddd");
                    } else {
                        dateStr = _ev.StartTime.Value.ToShortDateString ();
                    }
                }
            }
        } else {
            dateStr = "Date TBA";
        }
        // Setup counts
        string counts = "Staff & Volunteers: {0} reg, {1} in, {2} out\n";
        counts += "Students & Visitors: {3} reg, {4} in, {5} out";
        counts = string.Format (
            counts,
            _ev.CountOfStaffAndVolunteersRegistered,
            _ev.CountOfStaffAndVolunteersCheckedIn,
            _ev.CountOfStaffAndVolunteersCheckedOut,
            _ev.CountOfStudentsAndVisitorsRegistered,
            _ev.CountOfStudentsAndVisitorsCheckedIn,
            _ev.CountOfStudentsAndVisitorsCheckedOut
        );

        float left = 13f;

        // Draw
        sizeF = this.StringSize (dateStr, EventListingElement.EventTitleFont);
        float num2 = sizeF.Width + 21f + 5f;
        RectangleF dateFrame = new RectangleF (
            this.Bounds.Width - num2,
            6f,
            num2,
            14f
        );

        this.DrawString (
            dateStr,
            dateFrame,
            EventListingElement.DatesFont,
            UILineBreakMode.Clip,
            UITextAlignment.Left
        );
        float num3 = this.Bounds.Width - left;
        UIColor.Black.SetColor ();
        if (!string.IsNullOrWhiteSpace (_ev.EventType)) {
            this.DrawString (
                _ev.EventType,
                new PointF (left, 2f),
                num3 - num2,
                EventListingElement.EventTypeFont,
                UILineBreakMode.TailTruncation
            );
        }
        this.DrawString (
            _ev.Name,
            new PointF (left, 23f),
            num3 - left - num,
            EventListingElement.EventTitleFont,
            UILineBreakMode.TailTruncation
        );
        UIColor.Gray.SetColor ();
        this.DrawString (
            counts,
            new RectangleF (left, 40f, num3 - num, 34f),
            EventListingElement.CountsFont,
            UILineBreakMode.TailTruncation,
            UITextAlignment.Left
        );
    }

}

public class MyDataCell : UITableViewCell
{
    MyDataView _myDataView;

    public MyDataCell (EventListingItem myData, string identKey) : base (UITableViewCellStyle.Default, identKey)
    {
        _myDataView = new MyDataView (myData);
        ContentView.Add (_myDataView);
    }

    public override void LayoutSubviews ()
    {
        base.LayoutSubviews ();
        _myDataView.Frame = ContentView.Bounds;
        _myDataView.SetNeedsDisplay ();
    }

    public void UpdateCell (EventListingItem myData)
    {
        _myDataView.Update (myData);
    }
} 
```

# excel - 检索Excel中列等于某事的单元格列表

> ID：10485594
> 
> 赞同：2
> 
> 时间：2012-05-07T16:24:43.437
> 
> 标签：excel, excel-formula

我试图在不使用 VBA 宏的情况下在 Excel 中做某事。我怀疑这是可能的，但到目前为止有一些是空的。基本上对于表中的值，我想有条件地检索 A 列中所有值的列表，其中 B 列等于我提供的值。

例如，如果 B 列等于零，我想要一个函数，它基本上返回 A 列的单元格范围/描述。

```
Column A  Column B
   1          0
   2          0
   3          1
   4          0 
```

将返回描述单元格 a2、a3 和 a5 (1, 2, 4) 的范围。我希望能够使用公式而不是手动使用数据透视表来做到这一点。如果可以通过函数引用该表以给我适当的结果，我愿意使用数据透视表创建数据视图。如果这样做更容易，我也可以以任何方式对 B 列进行排序。

最终，我需要从 A 列中提取一个符合 B 列标准的随机值，以防在最终解决方案中很重要。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:25:52.283

使用数组公式。

输入：

`=INDEX($A$1:$A$4,SMALL(IF($C$1=$B$1:$B$4,ROW($B$1:$B$4)),ROW(1:1)),1)`

然后按 Ctrl+Shift+Enter。拖动并填充下面的单元格，直到`#NUM!`出现。此公式假定您要查找的值在`C1`其中并且没有标题（数据从第一行而不是第二行开始）。

# asp.net - ASPxUploadControl 获取文件大小

> ID：10485596
> 
> 赞同：0
> 
> 时间：2012-05-07T16:24:48.423
> 
> 标签：asp.net, vb.net, file-upload, devexpress

使用 ASPxUploadControl 上传图像时，是否有正确的方法来获取文件大小？上传文件时，我想显示文件大小。到目前为止，我还没有找到任何有关如何通过 Google 进行操作的示例代码。

我当前的代码：

VB.NET

```
<dxuc:ASPxUploadControl ID="ASPxUploadControl1" runat="server" ShowProgressPanel="True"
    ClientInstanceName="CompanyLogoUpload" FileUploadMode="OnPageLoad" ValidationSettings-GeneralErrorText="Upload Failed">
    <ClientSideEvents TextChanged="HandleFileInputTextChanged" FileUploadComplete="HandleFileUploadComplete" />
</dxuc:ASPxUploadControl> 
```

ASP.NET

```
 function HandleFileUploadComplete(e, s)
    {
        var imgSrc = $("img[id$=CompanyLogoImage]").attr("src");
        $("img[id$=CompanyLogoImage]").attr("src", imgSrc + "1");
    }

    function HandleFileInputTextChanged(e, s) {
        $("input[id$=UseCompanyLogoCheckBox]").attr("checked", true);
        $("#ChangeLogoContainer").removeClass("overlay");
        CompanyLogoUpload.Upload();
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:03:59.707

# **[参考](http://www.devexpress.com/Support/Center/p/Q237752.aspx)**

不可能得到`File Size`应得的`File Security`。你可以`PHP`很容易地做到这一点，但不能在这个标签中。

只能在`server`侧`Code Behind`码处检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:05:18.937

仅在使用“<strong>高级上传模式”时可以执行客户端**[MaxFileSize验证：](http://help.devexpress.com/#AspNet/DevExpressWebASPxUploadControlValidationSettings_MaxFileSizetopic)**

[高级上传模式 > 客户端验证](http://help.devexpress.com/#AspNet/CustomDocument9886)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:32:08.403

[这篇博](http://community.devexpress.com/blogs/paulk/archive/2009/09/29/using-the-aspxuploadcontrol-and-displaying-image-thumbnails.aspx)文展示了如何连接客户端事件以显示上传图像的缩略图。

```
<dxuc:ASPxUploadControl ID="ASPxUploadControl1" runat="server"  
                ClientInstanceName="uploader"  
                onfileuploadcomplete="ASPxUploadControl1_FileUploadComplete"> 
                <ClientSideEvents FileUploadComplete="function(s, e) { 
                  debugger; 
                  _aspxGetElementById('PreviewImage').src = e.callbackData; 
                }" /> 
            </dxuc:ASPxUploadControl> 
```

# html - 文本溢出和多行 div？

> ID：10485609
> 
> 赞同：1
> 
> 时间：2012-05-07T16:25:45.270
> 
> 标签：html, css

我想用 text-overflow: ellipsis 创建多行 div，但 div 只有一行。

参见示例： [http ://cssdesk.com/CDS4V](http://cssdesk.com/CDS4V)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:31:21.023

我想要类似的效果，最后我使用了[jquery dotdot 插件](http://dotdotdot.frebsite.nl/)。我发现它很容易使用，它就像魔法一样工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:31:16.477

如果您需要不同的解决方案，这里有另一个人提出了类似的问题：

[如果内容太宽，请在 HTML 标记中插入省略号 (...)](https://stackoverflow.com/questions/536814/insert-ellipsis-into-html-tag-if-content-too-wide)

# javascript - 将事件委托给 Backbone 中的父视图

> ID：10485610
> 
> 赞同：9
> 
> 时间：2012-05-07T16:25:47.407
> 
> 标签：javascript, model-view-controller, events, backbone.js, delegation

我的视图 ,`TuneBook`有几个类型为 的子视图`ClosedTune`。对于每首曲子，我也有单独的完整页面视图，`OpenTune`. `ClosedTune`和中绑定了相同的事件`OpenTune`，因此我设计了我的应用程序，以便它们都继承自共享的“抽象”视图`Tune`。

为了使我的应用程序更具可扩展性，我希望将每个事件`ClosedTune`委托给`TuneBook`，但为了可维护性，我希望使用相同的处理程序（`Tune`存储`TuneBook`在）。

我遇到的问题是，在 内`TuneBook`找到正确`ClosedTune`调用处理程序的方法。什么是构建这个的好方法，或者是否有其他好的解决方案可以将事件委托给父视图？

*注意*- 不是[Backbone View: Inherit and extend events from parent](https://stackoverflow.com/questions/9403675/backbone-view-inherit-and-extend-events-from-parent)的副本（这是关于从父类继承的子类，而我问的是 DOM 中父类的子节点的子节点）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T18:21:38.473

在您的父视图（也从 扩展`Backbone.Events`）中，我将绑定`onEvent`到 DOM 事件。在触发时，它会触发一个主干事件，包括您的子视图知道的一些“id”属性（大概是一些行 id？）。

```
var TuneBook = Backbone.View.extend(_.extend({}, Backbone.Events, {
    events: {
        "click .tune .button": "clickHandler"
    },
    clickHandler: function (ev) {
        this.trigger('buttonClick:' + ev.some_id_attr, ev);
    },

})); 
```

子视图自然会订阅与它们相关的父视图事件。下面我`initialize`通过传递父视图以及您之前在`options`.

```
var ClosedTune = Backbone.View.extend({

    initialize: function (options) {
        options.parent.on('buttonClick:' + options.id, this.handler, this);
    },

    handler: function (ev) {
        ...
    },

}); 
```

`Tune`当然，您也可以在或上设置类似的订阅者`OpenTune`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T17:42:14.267

这里有几种可能性。

# 1\. 中心化：将`ClosedTune`对象存储在`TuneBook`实例中

1.  存储对每个`ClosedTune`in的引用`tune_book.tunes`。你如何填充`tune_book.tunes`取决于你；既然你提到了一个加法器方法`TuneBook`，这就是我在下面说明的。

2.  在事件处理程序中，使用类似事件目标的属性作为键来`TuneBook`检索`ClosedTune`from 。然后调用or处理程序。`tune_book.tunes``id``Tune``ClosedTune`

[http://jsfiddle.net/p5QMT/1/](http://jsfiddle.net/p5QMT/1/)

```
var Tune = Backbone.View.extend({
  className: "tune",

  click_handler: function (event) {
    event.preventDefault();
    console.log(this.id + " clicked");
  },

  render: function () {
    this.$el.html(
      '<a href="" class="button">' + this.id + '</a>'
    );

    return this;
  }
});

var ClosedTune = Tune.extend({});

var OpenTune = Tune.extend({
  events: {
    "click .button" : 'click_handler'
  }
});

var TuneBook = Backbone.View.extend({
  events: {
    "click .tune .button" : 'click_handler'
  },

  click_handler: function (event) {
    var tune = this.options.tunes[
      $(event.target).closest(".tune").attr('id')
    ];

    tune.click_handler( event );
  },

  add_tune: function (tune) {
    this.options.tunes[tune.id] = tune;
    this.$el.append(tune.render().el);
  },

  render: function () {
    $("body").append(this.el);
    return this;
  }
});

var tune_book = new TuneBook({
  tunes: {}
});

[1, 2, 3].forEach(function (number) {
  tune_book.add_tune(new ClosedTune({
    id: "closed-tune-" + number
  }));
});

tune_book.render();

var open_tune = new OpenTune({
  id: "open-tune-1"
});

$("body").append(open_tune.render().el); 
```

# 2\. 去中心化：将视图对象与 DOM 对象关联起来使用`jQuery.data()`

1.  当您创建 时`ClosedTune`，存储对它的引用，例如`this.$el.data('view_object', this)`。

2.  在事件侦听器中，检索`ClosedTune`，例如`$(event.target).data('view_object')`。

`ClosedTune`如果需要，您可以对(in `TuneBook`) 和使用相同的处理程序`OpenTune`。

[http://jsfiddle.net/jQZNF/1/](http://jsfiddle.net/jQZNF/1/)

```
var Tune = Backbone.View.extend({
  className: "tune",

  initialize: function (options) {
    this.$el.data('view_object', this);
  },

  click_handler: function (event) {
    event.preventDefault();

    var tune =
      $(event.target).closest(".tune").data('view_object');

    console.log(tune.id + " clicked");
  },

  render: function () {
    this.$el.html(
      '<a href="" class="button">' + this.id + '</a>'
    );

    return this;
  }
});

var ClosedTune = Tune.extend({
  initialize: function (options) {
    this.constructor.__super__.initialize.call(this, options);
  }
});

var OpenTune = Tune.extend({
  events: {
    "click .button" : 'click_handler'
  }
});

var TuneBook = Backbone.View.extend({
  events: {
    "click .tune .button": Tune.prototype.click_handler
  },

  add_tune: function (tune) {
    this.$el.append(tune.render().el);
  },

  render: function () {
    $("body").append(this.el);
    return this;
  }
});

var tune_book = new TuneBook({
  tunes: {}
});

[1, 2, 3].forEach(function (number) {
  tune_book.add_tune(new ClosedTune({
    id: "closed-tune-" + number
  }));
});

tune_book.render();

var open_tune = new OpenTune({
  id: "open-tune-1"
});

$("body").append(open_tune.render().el); 
```

# 对评论的回应

> 我考虑了选项 1，但决定反对它，因为我已经在 Tunebook 中有一组 Tune 模型，并且不想要另一个我需要保持同步的对象

我想这取决于你觉得需要做什么样的家务/同步，以及为什么。

> （例如，在 TuneModel.remove() 中，我需要从 Tunebook 的视图列表中删除视图......可能需要事件来执行此操作，因此仅事件解决方案开始看起来更具吸引力）。

*为什么*你觉得你“需要从 Tunebook 的视图列表中删除视图”？（我并不是建议您不应该这样做，只是问您为什么*要这样做*。）既然您这样做了，您认为@ggozad 的方法在这方面有何不同？

这两种技术都将`ClosedTune`对象存储在`TuneBook`实例中。在@ggozad 的技术中，它只是隐藏在一个抽象背后，这可能会让你不那么明显。

在我的示例中，它们存储在一个普通的 JS 对象 ( `tune_book.tunes`) 中。在@ggozad 中，它们存储`_callbacks`在`Backbone.Events`.

添加一个`ClosedTune`：

1.

```
this.options.tunes[tune.id] = tune; 
```

2.

```
this.on('buttonClick:' + tune.id, tune.handler, tune); 
```

如果你想摆脱 a `ClosedTune`（假设你从文档中删除它`tune.remove()`并且你希望视图对象完全消失），使用@ggozad 的方法将留下一个孤立的引用`ClosedTune`in`tune_book._callbacks`除非你执行相同类型的内务管理感觉我建议的方法：

1.

```
delete this.options.tunes[tune.id];

tune.remove(); 
```

2.

```
this.off("buttonClick:" + tune.id);

tune.remove(); 
```

每个示例的第一行是可选的——取决于您是否要清理`ClosedTune`对象。

> 选项 2 或多或少是我现在正在做的事情，但是（出于其他原因）我还将模型作为数据属性存储在 view.$el 上，我不禁觉得必须有更好的方法而不是到处存储引用。

好吧，最终归结为您对如何构建事物的偏好。如果您更喜欢以更集中的方式存储视图对象，则可以将它们存储在`TuneBook`实例中，而不是使用`jQuery.data`. 参见#1：集中式。

您存储对`ClosedTune`对象的引用的一种或另一种方式：使用`jQuery.data`, 或在 中的普通对象中`TuneBook`，或`_callbacks`在`TuneBook`.

如果您出于理解的原因喜欢@ggozad 的方法，那就去吧，但这不是魔术。正如这里介绍的那样，与我在#1 中提出的更直接的版本相比，我不确定额外的抽象级别应该提供什么优势。如果有一些优势，请随时填写我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-09T19:49:27.007

我从这篇[文章](https://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/)（@dave-cadwallader 评论）中得到了很好的解决方案。

扩展一个通用主干事件对象并将其存储在参考中`vent`：

```
var vent = _.extend({}, Backbone.Events); 
```

将其传递给父视图：

```
var parentView = new ParentView({vent: vent}); 
```

子视图会触发一个事件：

```
ChildView = Backbone.View.extend({    
  initialize: function(options){
    this.vent = options.vent;
  },

  myHandler: function(){
    this.vent.trigger("myEvent", this.model);
  }
}); 
```

父视图正在监听子事件：

```
ParentView = Backbone.View.extend({    
    initialize: function(options){
        this.vent = options.vent;
        this.vent.on("myEvent", this.onMyEvent);

        let childView = new ChildView({vent: this.vent});
    },

    onMyEvent: function(){
        console.log("Child event has been ");
    }
}); 
```

免责声明 - 请注意必须将`vent`对象注入到每个视图中，因此您将在本文中找到更好的设计模式以供使用。

# php - 更新 MySQL 表

> ID：10485611
> 
> 赞同：0
> 
> 时间：2012-05-07T16:25:48.293
> 
> 标签：php, mysql

我需要编码来检查一个 mysql 数据库，看看它是否需要更新。数据库用于库存信息，并且仅当信息当前不在数据库中时才会下载信息。我试图弄清楚如何设计我的代码，而无需编写一些可以在几行代码中完成的冗长编码。

我目前正在为表使用 information_schema UPDATE_TIME 信息，所以我有该信息。但是我遇到的问题是如何使用 php 检查数据库是否需要更新。

所以本质上，我正在寻找一个代码片段，它会检查表是否需要更新，但会检查重复信息（即，如果它通过“if”语句实现，然后无论如何都会下载它，如果它是重复的信息，它不会插入它[我可以使用日期]）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:00:05.057

```
INSERT INTO table_name (id, column2)
SELECT {$int_id}, '{$str_column2}'
FROM table_name
WHERE id = {$int_id} AND column2 != 'what ever you want'
ON DUPLICATE KEY UPDATE column2 = VALUES(column2) 
```

table_name 是您自己的表名。

我假设你有一个 id 列。column2 只是一个例子。

您可以通过 WHERE 验证您的行并拥有您想要的任何条件。

您[的问题评论链接](http://dev.mysql.com/doc/en/insert-on-duplicate.html)到此示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:54:29.663

想想这个：

```
$result = mysql_query("SELECT * FROM tableName" WHERE ConditionYouHave)
or die(mysql_query("INSERT INTO tableName VALUES ('value1','value2','value3')")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:57:35.860

您是否有某种数据馈送可以运行以检查新数据？如果是这种情况，我将逐行浏览文件以查找新行。当你找到一个时，你将它插入到你的表中。如果该行已经存在，则继续下一行。这可以在 PHP 中相当简单地完成。

# html - IE中的客户端数据存储

> ID：10485612
> 
> 赞同：0
> 
> 时间：2012-05-07T16:25:57.660
> 
> 标签：html, internet-explorer, client-side-data

我正在制作一个手机应用程序，我使用 HTML5 提供的客户端数据库来存储信息。它适用于除 IE 之外的所有浏览器。我知道 IE 在 HTML5 方面存在一些问题，但有没有办法让 IE 使用客户端数据库？

谢谢

# haskell - runhaskell - 如何使脚本与 ghc 7.4 和 6 兼容？

> ID：10485614
> 
> 赞同：5
> 
> 时间：2012-05-07T16:26:17.643
> 
> 标签：haskell

在我升级到 ghc 7.4 后，我不得不`import System`从各种脚本中删除，但这使得它们与 GHC 6.0 中的 runhaskell 不兼容，后者仍在许多环境中使用。

有没有办法同时支持这两个版本？

我`import System`在 ghc 7.4 中运行脚本时收到的消息：

```
% ./script.hs
    Could not find module `System'
    It is a member of the hidden package `haskell98-2.0.0.1'.
    Use -v to see a list of the files searched for. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T16:30:23.597

该`System`模块是已弃用的非分层 Haskell 98 模块；您应该导入您需要的相关分层模块（例如`System.Environment`、`System.IO`和`System.Exit`；请参阅[基本包](http://hackage.haskell.org/package/base)以获取完整列表）。完成此操作的最简单方法可能是简单地删除`System`导入，并使用[Hoogle](http://www.haskell.org/hoogle/)从编译器错误中找出您需要的定义所在的模块。

在较旧的 GHC 中，Haskell 98 模块可以与分层模块一起使用，但这不再可能。更改导入应该相对容易，并且将使您的程序与最新的 Haskell 2010 标准保持同步。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T16:45:47.693

该`System`模块是一个旧的 Haskell-98 兼容模块，它的所有功能都可以在`System.Cmd`,`System.Environment`和`System.Exit`模块中找到，这些模块至少早在[GHC 5.04](http://www.haskell.org/ghc/docs/5.04/html/)就已经可用，所以只需修复你的import 语句来使用这些模块的一些适当的子集。

# perforce - 在代码协作者同行评审中更新未提交的 Perforce 变更列表

> ID：10485617
> 
> 赞同：1
> 
> 时间：2012-05-07T16:26:21.997
> 
> 标签：perforce, code-collaborator

我从未提交的 Perforce 更改列表创建了 Code Collaborator 同行评审。这很好用，同行评审也很顺利。发现了一个缺陷，并进行了更改。现在，我希望使用新版本的文件更新同行评审。

当我尝试上传文件的新版本时，它会将其添加为新资源，而不是已经在同行评审中的现有文件的新版本。当我尝试再次上传整个未提交的更改列表时，它显示为同一未提交更改列表的新版本。换句话说，我似乎无法让同行评审中的现有文件显示我的更改......我所做的一切都以某种形式或方式添加了另一个资源。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T20:32:09.450

从 CodeCollaborater 那里听说过。显然，解决此问题的方法是，当您希望任何更新出现在同行评审中时，始终上传整个待处理的更改列表。这仍将显示多组同行评审文件（一组用于上传挂起的更改列表的到达时间）。

但是，您可以将 Review Summary 屏幕的视图更改为将所有这些集合“压缩”为一个。每个想要查看此演示文稿的审阅者都需要在审阅的“审阅材料”部分中选择以下内容：

> 查看为：叠加

# html - 如何创建动态html

> ID：10485618
> 
> 赞同：0
> 
> 时间：2012-05-07T16:26:23.623
> 
> 标签：html

我的问题真的很奇怪。我正在做一个广告网站。我正在检查其他一些网站，如下所示

[http://www.XXXXXXX.com/XXXXX/XXXXXX/YYYY-available-3+1-YYYY-YYYYY-road.html](http://www.XXXXXXX.com/XXXXX/XXXXXX/YYYY-available-3+1-YYYY-YYYYY-road.html)

我的问题是当我浏览网站上的任何广告时，它会打开一个带有广告标题的 html 文件。如果网站有 10000 个广告，我相信他们不会创建 10000 个 html 文件。但是在浏览广告时，我们可以看到上面的 URL。

YYYY-available-3+1-YYYY-YYYYY-road.html 基本上是广告的标题。现在我怎么能做到这一点。

我已经用动态值在 jsp 中实现了。但我想像上面那样实现。请帮助和建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:31:42.340

映射`*.html`到 web.xml 文件中的 servlet。在这个 servlet 中，解析请求的 URL 并将其转换为某个广告 ID 或名称。使用您解析的 ID 或名称在您的广告数据库中获取广告文本，并将广告文本发送到响应。

# java - Android Beam：抑制“Tab to Beam”

> ID：10485621
> 
> 赞同：2
> 
> 时间：2012-05-07T16:26:27.883
> 
> 标签：java, android, nfc, android-beam

我一直在开发一个通过*Android Beam*发送 NDEF 消息的 Android 应用程序和一个接收它们的桌面应用程序。

一切都按预期工作；但是，我个人认为 Android Beam 的“Tab to Beam”屏幕过于间接。是否有一种方法可以抑制此屏幕并在例如单击按钮后简单地发送数据？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T09:08:23.097

除非您根植您的设备，否则这是不可能的。我已经为我的 Galaxy Nexus 破解了 Nfc.apk，以删除“点击发送”用户界面。这显然很脏，并且也会删除所有其他应用程序的功能。

# objective-c - 为私有方法和属性添加前缀

> ID：10485623
> 
> 赞同：1
> 
> 时间：2012-05-07T16:26:39.933
> 
> 标签：objective-c, cocoa

我使用类扩展来定义私有方法：

```
@interface DFPObfuscator ()

+ (NSData *)PS_transform:(CCOperation)encryptOrDecrypt data:(NSData *)data;

@end 
```

`PS_`Apple 推荐使用 like 前缀：

> ...如果您想绝对确定您的私有方法的名称与超类中的名称不同，您可以将您自己的前缀添加到您的私有方法中。前缀应尽可能唯一，可能基于您的公司或项目，格式为`XX_`. 因此，如果您的项目名为 Byte Flogger，则前缀可能是`BF_addObject:`.

但是私有财产呢？我应该在它们前面加上前缀`PS_`还是不是问题？

一个例子是：

```
@interface MTTController ()

@property (strong, nonatomic) Class modelClass;
@property (strong, nonatomic) Class viewClass;

@end 
```

如果超类中有**私有**财产`modelClass`，会有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:49:19.413

一般来说，子类化不需要此建议。如果 Apple 创建了一个不带下划线前缀的私有方法，则这是其框架中的一个错误。

好吧，我在这里开玩笑......这是他们框架中的一个错误，你应该针对它打开雷达，但他们一直在这样做。也就是说，这种为私有方法添加前缀的建议在实践中实际上并不适用。

首先，该方法是否是“私有的”并不重要。在 ObjC 中没有私有方法之类的东西。只有一些方法没有在头文件中声明。如果您声明一个与 Apple 的私有方法之一冲突的公共方法，您将遇到与您的方法是私有方法相同的问题。Apple 不应该在没有前导下划线的子类中拥有私有方法。试图避免他们这样做的情况会导致过早的精神错乱。在大多数情况下，这不值得担心。

但！（总是有一个但是）有一种情况你可能应该担心，那就是类别。如果 Apple 定义了一个类别方法`pop`on `NSMutableArray`，并且您还定义`pop`了 on `NSMutableArray`，那么运行哪个版本是未定义的。（我给出这个特殊的例子是因为它发生在我身上。）所以，如果你的类别方法可能有名称，你应该在它们上面加上一个前缀，以保护它们免受 Apple 做同样的事情。正如我之前所说，Apple 不应该在没有前导下划线的情况下创建私有类别方法，但它们确实如此，因此您的类别可能需要担心这一点。类别也是您最有可能添加“常用”名称（如“pop”）的地方。因此，它更有可能是一个问题。

这里话多。简短的版本是：

*   一般来说，您不需要为方法添加前缀。
*   您可能确实希望为具有非常明显名称的类别方法添加前缀。

请注意，类扩展不是类别。它们是 的扩展`@interface`，所以通常你也不应该在其中添加前缀。如果您正在合成属性，并且 Apple 具有相同的私有属性，您应该会收到编译错误。所以大多数时候属性不应该是一个问题，至少对于被设计为子类的类。

我希望有一个“这样做，你永远不会有问题”，但以上几乎是真正的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:31:57.933

一点问题都没有；）

但是你可以做的是：

当您 @synthesize myVariable 时，在您的 MTTController.m 中；只是这样做：

```
@synthesize myVariable = _myVariable; 
```

_ 通常代表类的属性。
或者您可以在 .h 中直接将其命名为 _myVariable

# javascript - 在 PHP 中为 JSON 输出验证字符串

> ID：10485633
> 
> 赞同：3
> 
> 时间：2012-05-07T16:27:19.687
> 
> 标签：javascript, json

**A.**我将标签存储在用户输入的数据库中。

**B.**对于视图，然后使用查询获取一组这些标签并将其连接起来。

**C.**我迭代了这种格式并打印了视图中的每个标签。

对于部分 BI，使用查询中的连接创建一个 JSON 数组。但现在我认为选择一种比 JSON 更轻量级的格式可能是值得的。我的理由是它会使验证进入数据库的用户标签变得更简单。

如果我要选择一个定界符，比如说`,`识别标记，唯一需要的验证是不允许这个字符作为标签吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:31:14.673

> 但现在我认为选择一种比 JSON 更轻量级的格式可能是值得的。

你为什么这么认为？通常情况下，使用 JSON 可以大大简化前端和后端的工作，因为您可以在 PHP 中执行 json_decode 和~~只是一个评估~~Javascript 中的 JSON.parse，然后您的 JSON 数据将被翻译成相应语言的本机对象，然后您可以轻松操作这些对象。所以我建议你坚持使用 JSON。

# c++ - 如何在 C++ 中使用 HidD_GetHidGuid()？

> ID：10485643
> 
> 赞同：1
> 
> 时间：2012-05-07T16:27:45.633
> 
> 标签：c++, guid, hid

我发布了一个类似的主题/问题，但这次有点不同。

我只是想使用 HidD_GetHidGuid() 函数来获取某些隐藏设备的窗口 guid，但它给了我一个错误 LNK2019: unresolved external symbol _HidD_GetHidGuid@4 referenced in function _main

这是我的代码：

```
//mainframe.cpp
#include<iostream>
#include<Windows.h>

extern "C"
{
#include<hidsdi.h>
#include<SetupAPI.h>
}

int main()
{
    int iQuit;
    LPGUID guid;
    HidD_GetHidGuid(guid);

    std::cout << "testing program" << std::endl;
    std::cout << guid << std::endl;

    std::cin >> iQuit;

    return 0;
} 
```

在我的 VC++ 目录中，我已将 C:\WinDDK\7600.16385.1\inc\ddk 和 C:\WinDDK\7600.16385.1\inc\api 添加到“包含目录”中。对于“库目录”，我添加了 C:\WinDDK\7600.16385.1\lib

但它只是给出这个 1 错误，不知道为什么......请帮助

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:43:00.067

根据[文档](http://msdn.microsoft.com/en-us/library/windows/hardware/ff538924%28v=vs.85%29.aspx)，您需要链接到`hid.lib`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T10:21:37.630

将此添加到您的标题中

# 杂注注释（lib，“hid.lib”）

# c++ - C ++中新内存的范围

> ID：10485647
> 
> 赞同：3
> 
> 时间：2012-05-07T16:27:59.090
> 
> 标签：c++, memory-management, memory-leaks

当我尝试执行以下操作时，我收到一条错误消息，提示我正在尝试读取或写入受保护的内存。

```
void func1(int * ptr) {
    int *ptr_b = new int[5];
    ptr = ptr_b; 
}

void main() {
    int *ptr_a;
    func1(ptr_a);
    delete [] ptr_a;
} 
```

这合法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T16:29:19.340

不，你犯了一个常见的初学者错误。您不记得指针只是按值传递的变量，除非您要求引用或指向它们。将函数的签名更改为`void func1(int *& ptr)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T16:29:06.050

将您的签名更改为：

```
void func1(int *& ptr) 
```

您按值传递指针，因此外部`ptr`不会改变。所以这就像做

```
int main() {  // <--- main returns int
    int *ptr_a;
    delete [] ptr_a;
} 
```

这是非法的，因为`ptr_a`没有初始化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-07T16:29:58.223

*您按值*传递了指针。这意味着该函数使用的指针是调用者指针的本地副本。因此调用者看不到您在函数中分配的值。

而是通过*引用*传递它，以便函数可以分配给调用者的指针，而不是分配给本地副本。

```
void func1(int* &ptr) 
```

或者，也许考虑返回新分配的指针：

```
int* func1()
{
    return new int[5];
} 
```

我更喜欢后一种方法。

# windows - findstr Windows 命令正则表达式

> ID：10485650
> 
> 赞同：2
> 
> 时间：2012-05-07T16:28:29.140
> 
> 标签：windows, command-line, findstr

`findstr`有没有办法使用Windows 命令行在字母之间连续搜索 2 个或更多空格？

例子：

```
Hello world!  - nomatch wanted
Hello  world! - match wanted 
```

什么是正则表达式语法？

`[ ]`另外，能否请您帮助我理解以下命令行会话（和之间的区别`[ ]*`；第二个命令不返回任何内容）：

```
c:\1>findstr -i -r  "view[ ]*data.sub" "view data sub.acf"
View Data Sub.ACF:            "].DATE_STAMP)>=[Forms]![MainNav]![View Data Sub]"
View Data Sub.ACF:            "].DATE_STAMP)<[Forms]![MainNav]![View Data Sub]"

c:\1>findstr -i -r  "view[ ]data.sub" "view data sub.acf"

c:\1> 
```

PS：只是好奇；我知道 awk、perl、C# 等，但是呢`findstr`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:07:36.553

如果您只想找到两个连续的空格：

```
findstr /C:"  " input.txt 
```

或者在不区分大小写的正则表达式中：

```
findstr /R /I /C:"lo  wo" input.txt 
```

重要的一点是`/C:`图案的前面。这告诉`findstr`将模式视为文字字符串。没有它， findstr 会在空格处将模式拆分为多个模式。根据我的经验，这永远不是你想要的。

**更新**

在字母之间做两个或多个空格：

```
findstr /R /I /C:"[a-z]   *[a-z]" input.txt 
```

请注意，模式中有三个空格。这匹配一个字母，两个空格后跟零个或多个空格（即两个或多个空格）和另一个字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:08:35.887

要查找字母之间的两个或多个连续空格：

```
C:\Users\harry> findstr /i /r /c:"o  [ ]*w" test.txt
Hello  world!
Hello   world! 
```

翻译：匹配包含'o'、两个空格、零个或多个空格、'w'的行。（方括号是多余的，但增加了清晰度。）想必，您已经知道这`findstr /?`将为您提供正则表达式语法的摘要？

至于你问题的第二部分：正如 arx 已经指出的那样，你没有得到你期望的结果的原因是你没有使用 /C 标志。考虑您的第一个命令：

```
findstr -i -r  "view[ ]*data.sub" "view data sub.acf" 
```

*这被解释为搜索与两个*正则表达式中的任何一个匹配的任何行，`view[`并且`]*data.sub`. 我做了一些实验，我相信第一个正则表达式要么被丢弃为格式不正确，要么被解释为需要空字符集的匹配。第二个正则表达式解释如下：零个或多个']'，'data'，一个任意字符，'sub'。碰巧，这恰好与您认为正在使用的单个正则表达式匹配相同的行。当你去掉星号时不是这样：

```
findstr -i -r  "view[ ]data.sub" "view data sub.acf" 
```

现在第二个正则表达式解释如下：恰好一个']'，'data'，一个任意字符，'sub'。由于字符串 ']data' 没有出现在您的文本中，因此没有任何行匹配。相反，您应该指定 /c：

```
findstr /i /r /c:"view[ ]data.sub" "view data sub.acf" 
```

现在您正在搜索单个正则表达式：“视图”、空格、“数据”、任意字符、“子”。这大概是你想要做的。

# javascript - 比较提交时的两个输入

> ID：10485651
> 
> 赞同：0
> 
> 时间：2012-05-07T16:28:31.453
> 
> 标签：javascript, forms

以下javascript通过在提交之前比较“required_email”和“verify_email”的两个输入“name”值来工作。问题是“名称”实际上是“必需的电子邮件”和“验证电子邮件”。javascript 中的名称似乎不支持破折号。显然，最简单的解决方案是使用下划线或不使用空格，但这是不可能的，因为服务器端表单处理会查找使用破折号的特定“名称”。

我可以为两个输入中的每一个添加一个 ID，所以我只需要知道如何修改以下 javascript 以将 #input1 与 #input2 进行比较（也就是使用 ID 而不是名称值）。

```
function checkEmail(theForm) {
    if (theForm.required_email.value != theForm.verify_email.value)
    {
        alert('Your emails don\'t match.');
        return false;
    } else {
        return true;
    }
} 
```

PS。我需要用纯 javascript（不是 jQuery 或其他框架）完成此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:32:40.360

```
function checkEmail(theForm) {
    if (document.getElementById("required-email").value != document.getElementById("verify-email").value)
    {
        alert('Your emails don\'t match.');
        return false;
    } else {
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:31:41.360

在这种情况下，您可以使用其他属性访问语法：

```
if (theForm["required-email"].value != theForm["verify-email"].value) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:35:04.577

如果你给他们两个id，那么它很简单：

```
var required = document.getElementById('required_email').value;
var verified = document.getElementById('verify_email').value;
if(required != verified){
  alert('emails do not match');
  return false;
}else{
  return true;
} 
```

# git - 无法从 git repo 中提取更改

> ID：10485654
> 
> 赞同：0
> 
> 时间：2012-05-07T16:28:38.033
> 
> 标签：git, github, git-svn, smartgit, phpfog

我开发了一个 php/Facebook 应用程序并将其托管在 phpfog 上，该应用程序的主要功能是向用户询问一些信息，然后将其 csv 格式放入记事本文件中。

为了访问 phpfog 存储库，我使用了一个名为 Smart-Git 3 的 git-ui，就后期更改而言，一切都很好。

但是，当我试图提取更改后的更新和新输入的信息时，我没有得到它，.txt 文件保持不变，并且没有向我显示添加的更新记录。

我对它感到很困惑，因为我的整个应用程序已完成并且人们已经在其中输入了信息，但我无法检索该信息。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T22:38:16.813

PHP Fog 使用 git 作为一种单向版本控制工具。这意味着您的应用程序所做的更改（例如缓存、上传和应用程序生成的 csv 文件）**将不会**被检入 PHP Fog git 存储库。您将无法提取 csv 文件。

如果需要，您可以安装文件管理器以下载该 csv 文件：http: [//phpfm.sourceforge.net/](http://phpfm.sourceforge.net/)

# windows-8 - 在 .cpp 文件中声明具有实现的 C++/CX WinRT 属性的语法是什么？

> ID：10485655
> 
> 赞同：8
> 
> 时间：2012-05-07T16:28:39.650
> 
> 标签：windows-8, windows-runtime, c++-cx

我有这样的课：

```
public ref class Test
{
public:
    property int MyProperty;
}; 
```

这行得通。现在我想将 MyProperty 的实现移动到 CPP 文件中。当我这样做时，我得到了属性已经定义的编译器错误：

```
int Test::MyProperty::get() { return 0; } 
```

什么是正确的语法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-07T16:36:22.050

在标题中将声明更改为：

```
public ref class Test
{
public:
    property int MyProperty
    {
        int get();
        void set( int );
    }
private:
    int m_myProperty;
}; 
```

然后，在 cpp 代码文件中编写您的定义，如下所示：

```
int Test::MyProperty::get()
{
    return m_myProperty;
}
void Test::MyProperty::set( int i )
{
    m_myProperty = i;
} 
```

您看到错误的原因是您已经声明了一个简单的属性，编译器会在该属性中为您生成一个实现。但是，然后您也尝试显式地提供一个实现。请参阅：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh755807 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh755807(v=vs.110).aspx)

大多数在线示例仅在类定义中直接显示实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T16:33:00.360

在类定义中，需要将属性声明为带有用户声明`get`和`set`方法的属性；它不能是速记属性：

```
public ref class Test
{
public:

    property int MyProperty { int get(); void set(int); }
}; 
```

然后在 cpp 文件中你可以定义`get()`和`set()`方法：

```
int Test::MyProperty::get()
{
    return 42;
}

void Test::MyProperty::set(int)
{ 
    // set the value
} 
```

# matlab - 首次更新后更新 MATLAB 等待栏失败

> ID：10485656
> 
> 赞同：0
> 
> 时间：2012-05-07T16:28:46.177
> 
> 标签：matlab, user-interface, matlab-guide

我在 MATLAB GUI 中更新等待栏时遇到问题。

我创建了一个按预期工作的简单示例。

```
steps = 5;
hWaitBar = waitbar(0, 'Testing...');
for i = 1:steps
   waitbar(i/steps, hWaitBar);
   pause(1);
end
close(hWaitBar); 
```

但是，当我在 GUI 中使用这种结构时......

```
numSteps = %calculated
hWaitBar = waitbar(0, 'Processing...');

if %conditional
    for i = 1:numSteps
        waitbar(i/numSteps, hWaitBar)
        % additional processing
    end
else %conditional
    % additional processing
end

close(hWaitBar); 
```

...等待栏仅在第一次 for 循环迭代时正确显示。

第二次交互失败并出现以下错误：

```
Error using waitbar(109)
Improper arguments for waitbar. 
```

*   我已验证等待栏进度值不超过 1。
*   我已经验证等待栏直到在 if/else 循环之外才被关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:14:51.653

我找到了解决方案——我误用了句柄图形。

在我的原始代码中：

```
numSteps = %calculated 
hWaitBar = waitbar(0, 'Processing...'); 

if %conditional 
    for i = 1:numSteps 
        waitbar(i/numSteps, hWaitBar) 
        % additional processing
        % *** call to imagesc caused the error
    end 
else %conditional 
    % additional processing 
end 

close(hWaitBar); 
```

使用调试器，我看到等待栏变成了当前图形，并且 imagesc 试图绘制到它而不是主窗体上的轴。在引用调用产生正确行为之前立即将适当的数字设置为当前数字。

更正的代码：

```
numSteps = %calculated 
hForm = gcf; % save the handle of the main form
hWaitBar = waitbar(0, 'Processing...'); 

if %conditional 
    for i = 1:numSteps 
        % set the waitbar to be the current figure before it is updated
        % note: this syntax will ensure window order will be preserved
        %       with waitbar on top
        set(0, 'CurrentFigure', hWaitBar); 
        waitbar(i/numSteps, hWaitBar); 

        % additional processing
        set(0, 'CurrentFigure', hForm);
        imagesc(...);
        % more processing
    end 
else %conditional 
    % additional processing 
end 

close(hWaitBar); 
```

# python - 如何在 Python 中获取 argparse 文件的目录？

> ID：10485660
> 
> 赞同：9
> 
> 时间：2012-05-07T16:29:01.983
> 
> 标签：python, path, argparse

我用来[`argparse`](http://docs.python.org/library/argparse.html)从用户那里获取文件：

```
import argparse, os
parser = argparse.ArgumentParser()
parser.add_argument('file', type=file)
args = parser.parse_args() 
```

然后我想知道这个文件所在的目录，比如：

```
print(os.path.abspath(os.path.dirname(args.inputfile))) 
```

但是，当然，作为`args.inputfile`一个`file`对象，这是行不通的。怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T16:36:16.550

您可以从`.name`属性中获取文件的名称，然后将其传递给`os.path.abspath`. 例如：

```
args = parser.parse_args()
path = os.path.abspath(args.file.name) 
```

# ios - UILabel 带有可点击的函数链接

> ID：10485663
> 
> 赞同：0
> 
> 时间：2012-05-07T16:29:17.437
> 
> 标签：ios, uilabel

我正在尝试创建一个新闻提要，例如：“用户（可点击）在中央公园（可点击）周围跑了 3 分钟”。可点击的链接应该只调用一个函数，我可以在其中推送一个新的 ViewController。

UILabel 不支持可点击链接，我想知道如何实现它。FancyLabel 看起来很旧（2008 年），TTTLabel 似乎只处理外部链接、电话和地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T01:48:03.933

您也可以只使用带有链接的 UIWebView 并处理按下链接

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:40:51.207

因此，您可以向 UILabel 添加轻击手势识别器：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(myMethodName)];
myLabel.userInteractionEnabled = YES;
[myLabel addGestureRecognizer:tap]; 
```

但根据您的要求，我可能会建议您改用 UIButton。我们习惯于点击网络中的链接，但在原生应用程序中，将可点击区域设置得稍大（Apple 建议至少 44 像素）通常对用户更友好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:01:25.847

使用带有委托方法的 uiwebview。

在情节提要中链接 uiwebview 和 uiviewcontroller（委托）。

```
- (BOOL)webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
    if ( inType == UIWebViewNavigationTypeLinkClicked ) {
        [[UIApplication sharedApplication] openURL:[inRequest URL]];
        return NO;
    }

    return YES;
} 
```

让 sur，你的网址有“http://”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T22:02:35.900

[花哨的 UILabel](http://furbo.org/2008/10/07/fancy-uilabels/)可能是您的解决方案。

# javascript - 如何在提交时传递切换数据？

> ID：10485665
> 
> 赞同：0
> 
> 时间：2012-05-07T16:29:33.590
> 
> 标签：javascript, html, toggle

我有以下表格

```
<html>
<head>
<style type="text/css">
.on { 
border:1px outset;
color:#369;
background:#efefef; 
}
.off {
border:1px outset;
color:#369;
background:#f9d543; 
}
</style>
<script language="javascript">
function togglestyle(el){
    if(el.className == "on") {
        el.className="off";
    } else {
        el.className="on";
    }
}
</script>
</head>
<body>
<form method="POST" action="#" >
<input type="button" id="btn" value="1" name="a[]" class="off" onclick="togglestyle(this)" />
<input type="button" id="btn" value="2" name="a[]" class="off" onclick="togglestyle(this)" />
<input type="button" id="btn" value="3" name="a[]" class="off" onclick="togglestyle(this)" />
<input type="button" id="btn" value="4" name="a[]" class="off" onclick="togglestyle(this)" />
<input type="button" id="btn" value="5" name="a[]" class="off" onclick="togglestyle(this)" />
<input type="button" id="btn" value="6" name="a[]" class="off" onclick="togglestyle(this)" />
<input type="submit" name="submit" value="Submit" />
</form>
</body>
</html> 
```

在这里我想使用切换动作，我不想在这里使用复选框，我想从这个表单传递切换值。有没有办法做到这一点？

在同一页面中，我已经有一些启用了检查操作的复选框，在这里我想传递最多 3 个切换值，我尝试使用单选框，但这仅适用于一个，而不适用于 3。如何做到这一点。

# vsto - VSTO Office 2010 中的缓存变量

> ID：10485666
> 
> 赞同：3
> 
> 时间：2012-05-07T16:29:36.007
> 
> 标签：vsto, office-interop

在浏览了网络之后，我发现以下帖子（如下）与我的问题非常相似。但是，在尝试了解决方案之后，我仍然卡住了。

[VSTO挫败感](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/227f3974-9585-463c-8209-6438ba81b0bd)

[在 VSTO 3.0 中设置缓存变量](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/204f7747-f121-42da-8442-9bd036c457dd/)

基本上，我想在将数据发送到客户端之前，在 Web 服务器上的 Excel 文件中填充一些数据。

这是我在工作簿中的代码：

```
namespace Inno.Data.Excel
{
  public partial class ThisWorkbook    
  {     
     [Cached]        
     public DataSet Config = new DataSet();     

     private void ThisWorkbook_Startup(object sender, System.EventArgs e)
     {
         //InitializeCachedData();          
         var baseUrl = (string)Config.Tables["Config"].Rows[0].ItemArray[0];            
         var streamIds = (string)Config.Tables["Config"].Rows[0].ItemArray[1];

         MessageBox.Show(baseUrl + " " + streamIds);
     }
  }
} 
```

在服务器端我有以下内容：

```
let rootUrl = Uri(x.Request.Url.GetLeftPart(UriPartial.Authority))

let setUpData (report : Report) (sd : ServerDocument) =
    let url = rootUrl.AbsoluteUri
    let streamIds = String.Join(",", report.series |> Seq.map(fun s -> s.id))

    let dt = new System.Data.DataTable("Config")
    dt.Columns.Add("BaseUrl", typeof<String>) |> ignore
    dt.Columns.Add("StreamIds", typeof<String>) |> ignore
    dt.Rows.Add([|box url; box streamIds|]) |> ignore
    dt.AcceptChanges()

    let cache = sd.CachedData.HostItems.["Inno.Data.Excel.ThisWorkbook"]
    let urlItem = cache.CachedData.["Config"]
    urlItem.SerializeDataInstance(dt)
    sd.Save()
    sd.Close()

let initialiseDocument (report : Report) (path : string) =
    let fileName = report.name.Replace(" ", "_") + ".xlsx"
    let sd = (new ServerDocument(path)) 
    sd |> setUpData report 
    fileName

let docPath = x.Request.MapPath(Path.Combine(liveReportPath, "Inno.Data.Excel.xlsx"))
let fileName = initialiseDocument report docPath
x.File(File.OpenRead(docPath), "application/vnd.ms-excel", fileName) :> ActionResult 
```

但是，当我下载文件后打开文件时，出现以下错误：

```
Microsoft.VisualStudio.Tools.Applications.Runtime.CannotFindObjectToFillException:    Cannot find any public instance member with ID Config in object Inno.Data.Excel.ThisWorkbook. 
```

我尝试过的事情： -

*   使用简单的字符串而不是 DataSet
*   打电话`StartCaching("Config")`
*   使用文件重载操作`ServerDocument`内存`byte[]`
*   复制原始Excel文件并在副本上进行操作

但现在我没有主意了。[我看到相当多的人遇到过这个错误，正如这篇文章](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/204f7747-f121-42da-8442-9bd036c457dd/)中指出的那样，VSTO 3.0 中存在一个已知的错误，即在内存中操作文件。

提前致谢。

# c++ - C++ 中赋值运算符和 c 字符串的问题

> ID：10485670
> 
> 赞同：2
> 
> 时间：2012-05-07T16:29:58.480
> 
> 标签：c++

我正在制作一个应该能够以与字符串类相同的方式分配 c 字符串的类：

```
string a = "My string"; 
```

我遇到的问题是它看起来不是`operator=( char operand )`用于此目的的。所以我的问题是：用什么代替？

是）我有的：

```
class exstring
{
    ...

    public:
    exstring& operator=( char* );

    ...
};

...

int main()
{
    exstring test = "test";
} 
```

这使：

```
main.cpp:9:22: error: conversion from ‘const char [19]’ to non-scalar type ‘std::exstring’ requested 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T16:32:24.160

你不是在`operator =`这里打电话给你的。您需要了解赋值和初始化之间的区别。你正在做的是初始化，你需要一个构造函数来接受你提供的参数。换句话说：

```
extring test = "test"; 
```

与以下内容完全相同：

```
extring test("test"); 
```

除了在后一种情况下构造函数可以是显式的，但在前一种情况下不是。

# php - PHP PDO -> 准备好的查询返回错误（相同的查询没有准备好工作）

> ID：10485671
> 
> 赞同：7
> 
> 时间：2012-05-07T16:30:08.053
> 
> 标签：php, pdo, prepared-statement

我使用以下 sql 来获取我的表的特定行的字段的值`que_id`，它工作正常。请注意 que_id(auto-incremented) 和行号是不一样的。

```
$qry_que_getid = $connexion->query('SELECT somefield FROM table ORDER BY somefield ASC LIMIT '.$lineNumberSeeked.', 1');

$row = $qry_que_getid->fetch(PDO::FETCH_ASSOC); 
echo $row['que_id']; 
```

当我尝试按如下方式将该查询转换为准备好的查询时，出现错误并且我没有得到它：

```
$qry_que_getid = $connexion->prepare('SELECT somefield FROM table ORDER BY somefield ASC LIMIT ?, 1');

$qry_que_getid->execute(array(4));

$row = $qry_que_getid->fetch(PDO::FETCH_ASSOC); 
echo $row['que_id']; 
```

我收到以下错误`SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''3', 1' at line 1`

希望有人能帮助我理解。先感谢您。干杯。马克。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T16:37:34.297

[来自http://www.php.net/manual/en/pdostatement.execute.php](http://www.php.net/manual/en/pdostatement.execute.php)的 PHP 手册：

> 一个包含与正在执行的 SQL 语句中的绑定参数一样多的元素的值数组。所有值都被视为 PDO::PARAM_STR。

我相信 LIMIT 子句需要一个整数，因此您应该改用 bindParam() 方法。

```
$limit = 4;
$qry_que_getid->bindParam(1, $limit, PDO::PARAM_INT);
$qry_que_getid->execute(); 
```

否则，参数将作为 PDO::PARAM_STR 类型而不是预期的 PDO::PARAM_INT 传递。

# c# - 不是双击时如何处理WinForms控件单击事件

> ID：10485676
> 
> 赞同：2
> 
> 时间：2012-05-07T16:30:37.380
> 
> 标签：c#, winforms, events, click, double-click

我需要区分单击和双击，但我需要在单击事件期间执行此操作。我需要这个，因为如果单击我想调用函数 A，如果双击我想调用函数 B。但只有在单击的情况下才必须调用函数 A。

我如何使用 C#（或 VB）中的标准 Winforms 来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:34:17.183

点击和双击可以分开处理

单击-> [http://msdn.microsoft.com/en-US/library/system.windows.forms.control.click(v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/system.windows.forms.control.click(v=vs.80).aspx)

双击-> [http://msdn.microsoft.com/en-US/library/system.windows.forms.button.doubleclick(v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/system.windows.forms.button.doubleclick(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T16:39:33.787

您将需要在单击事件之后使用计时器等待“一段时间”来确定单击是否为单次单击。您可以使用 SystemInformation.DoubleClickTime 属性来确定系统将连续单击视为双击的最大单击间隔。您可能想为此添加一点填充。

在您的点击处理程序中，增加一个点击计数器并启动计时器。在双击处理程序中，设置一个标志来表示发生了双击。在计时器处理程序中，检查是否引发了双击事件。如果没有，只需单击一下。

像这样的东西：

```
private bool _doubleClicked = false;
private Timer _clickTrackingTimer = 
    new Timer(SystemInformation.DoubleClickTimer + 100);

private void ClickHandler(object sender, EventArgs e)
{
    _clickTrackingTimer.Start();
}

private void DoubleClickHandler(object sender, EventArgs e)
{
    _doubleClicked = true;
}

private void TimerTickHandler(object sender, EventArgs e)
{
    _clickTrackingTimer.Stop();

    if (!_doubleClicked)
    {
        // single click!
    }

    _doubleClicked = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:40:08.570

另一种选择是创建一个从 Button 派生的自定义控件，然后在构造函数中调用 SetStyles() 方法，这是一个受保护的方法）并设置 ControlStyles 标志

```
class DoubleClickButton : Button
{
    public DoubleClickButton() : base()
    {

       SetStyle(ControlStyles.StandardDoubleClick, true);
    }
} 
```

# model-view-controller - 将 XML 集成到现有视图中

> ID：10485678
> 
> 赞同：0
> 
> 时间：2012-05-07T16:30:51.700
> 
> 标签：model-view-controller, rest, grails

我正在将 Grails 应用程序转换为使用 REST 架构，并希望使用现有视图。

我遇到的所有 REST 教程都涉及 URL 重定向和控制器操作。问题是，没有人关心显示数据，这就是重点！

当我访问信息时，它会显示格式正确的 XML。如何将其与现有视图一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:12:18.230

好吧，因为它是同一件事。

即 localhost/bookstore/book/1 将调用 book 控制器的 show

*   如果您从浏览器调用它，它将呈现 html 视图。
*   如果您使用 curl 或 postman (chrome) 调用并添加： Accept: text/xml Content-Type: text/xml 它将返回 XML

现在，如果您想从视图中调用休息动作，那是一个 ajax 问题。所以检查 jquery ajax 文档...

# android - intellij Querk 与否

> ID：10485679
> 
> 赞同：0
> 
> 时间：2012-05-07T16:30:56.477
> 
> 标签：android, intellij-idea

我刚开始使用 intellij，我只是注意到，当它设置您的初始 res 文件夹时，它不包括 Drawable。我知道我可以添加文件夹没什么大不了的，我只是在徘徊为什么。再说一次，也许我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:45:20.783

从[本视频](http://www.screenr.com/dWd8)的日志中可以看出，`res/drawable*`文件夹是由 Android SDK 工具创建的。它不是由 IDEA 处理的，它是 Android SDK 的一个功能。

# c++ - 使用静态初始化的副作用进行一次性初始化

> ID：10485680
> 
> 赞同：0
> 
> 时间：2012-05-07T16:31:00.727
> 
> 标签：c++, namespaces, initialization, shared-libraries

我想在一个共享库中初始化一些查找表，我想看看这是否是一种有效的方式，如果它继续在我即将编写的更多库中使用它。

```
typedef std::map<std::string, int> NAME_LUT;
NAME_LUT g_mLUT;
namespace
{
    bool OneTimeInit() 
    {
        ::g_mLUT.insert(NAME_LUT::value_type("open",          1));
        ::g_mLUT.insert(NAME_LUT::value_type("close",         2));
        return true;
    }
    bool bInit = OneTimeInit(); // Just to make initialization happen
} 
```

它似乎在 Visual Studio 和 gcc (Linux) 上都能正常工作。只有 gcc 抱怨`bInit`没有在任何地方使用。

1.  初始化是否可能被优化（`bInit`未使用），或者语言不允许它（因为副作用）。
2.  它看起来确实是处理一次性初始化的一种很好的跨平台方式，但我不确定这是否是最好的方法。
3.  `OneTimeInit`声明为静态有意义吗？（即 use `static bool OneTimeInit() {...}`），或单独命名空间是使其对这个编译单元唯一的更好方法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T16:39:46.337

我不太喜欢使用静态存储的变量的想法，但如果您打算这样做，您实际上可以通过编写一个初始化对象的函数来简化代码：

```
typedef std::map<std::string, int> NAME_LUT;
namespace {
   NAME_LUT create_lut() {
        NAME_LUT table;
        table.insert(NAME_LUT::value_type("open",          1));
        table.insert(NAME_LUT::value_type("close",         2));
        return table;
   }
}
NAME_LUT g_mLut = create_lut(); 
```

请注意，这具有所有常见的初始化顺序问题（跨不同的翻译单元，特别是动态库）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T16:34:40.600

是的，这是合法的，但由于您提到它在图书馆中，因此您必须确保您正在创建的翻译将被链接：

[如何强制在库中包含“未使用”的对象定义](https://stackoverflow.com/questions/4383602/how-to-force-inclusion-of-unused-object-definitions-in-a-library)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T16:49:33.270

如果您有 C++11 初始化程序列表，这对您来说会更好吗？

```
NAME_LUT g_mLUT = { {"open", 1}, {"close", 2}, }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T17:00:30.307

如果`bInit`得到优化（可能，特别是如果你的 lib 被`dlopen`编辑），那么你的初始化代码将不会运行。

让用户在一个健全的地方（启动后）对您的库进行设置调用是否有问题`main`？这样做可以消除代码中出现的许多可能难以调试的初始化顺序错误之一的任何可能性。如果这不是一个选项，我真的建议将 init 隐藏到具有静态本地的函数调用中，如下所示：

```
typedef std::map<std::string, int> NAME_LUT;
namespace
{
    bool OneTimeInit(NAME_LUT& mLUT) 
    {
        ::mLUT.insert(NAME_LUT::value_type("open",          1));
        ::mLUT.insert(NAME_LUT::value_type("close",         2));
        return true;
    }

    NAME_LUT& get_global_mLUT()
    {
        static NAME_LUT g_mLUT;
        static bool bInit = OneTimeInit(g_mLUT); // Just to make initialization happen
        return g_mLUT;
    }
} 
```

# ios - UITableViewCell initWithStyle:UITableViewCellStyleSubtitle 不工作

> ID：10485682
> 
> 赞同：3
> 
> 时间：2012-05-07T16:31:07.740
> 
> 标签：ios, uitableview

我在尝试在单元格中显示信息时遇到问题，一个在左侧，一个在右侧。我知道使用`initWithStyle`with `UITableViewCellStyleSubtitle`。我使用它，但它似乎不起作用。

这是一些示例代码：

```
- (UITableViewCell *)tableView:(UITableView *)ltableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Account Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)  {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:Cellidentifier];
    }

    Accounts *account = [self.fetchedResultsController objectAtIndexPath];
    cell.textLabel.text = account.name;

    cell.detailTextLabel.text = @"Price";

    return cell;
} 
```

我可以很好地显示 cell.textLabel.text，但是我无法显示简单的“价格”。我尝试了不同的方法，例如将字体大小设置为`cell.detailTextLabel`.

我也尝试`UITableViewCellStyleValue1`过一些在旧帖子中建议的方法。设置为“价格”后抛出 NSLog，将 cell.detailTextLabel 显示为 null。

不知道我做错了什么。

编辑：我发现这个： [cell.detailTextLabel.text is NULL](https://stackoverflow.com/questions/9792129/cell-detailtextlabel-text-is-null)

如果我删除`if (cell == nil)`它可以工作...该检查应该到位，那么在使用不同样式时如何使其工作？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-08T14:05:11.760

当使用故事板和原型单元格时，*总是*从 dequeue 方法返回一个单元格（假设存在具有该标识符的原型）。这意味着你永远不会进入`(cell == nil)`街区。

在您的情况下，原型单元格未在情节提要中使用字幕样式定义，因此从不使用带字幕的单元格，并且不存在详细文本标签。将情节提要中的原型更改为具有字幕样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T09:29:56.120

仅在您尝试这些行后删除所有代码并检查这是否有效。

```
 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
 {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
          cell = [[[UITableViewCell alloc]
             initWithStyle:UITableViewCellStyleSubtitle
             reuseIdentifier:CellIdentifier]
            autorelease];
 }

   cell.textLabel.text=[Array objectAtIndex:indexPath.row];
   cell.detailTextLabel.text=@"Price";

   return cell;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:30:43.977

我看到了问题：在您的方法名称中，`UITableView`变量名为`ltableView`，而不是`tableView`。将其更改为`tableView`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T16:40:21.923

`cell.detailTextLable.text`应该是`cell.detailTextLabel.text`。它看起来像一个简单的标签拼写错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-06T23:47:20.857

这里提到的所有答案实际上都是一种解决方法，即使用故事板。这是一种仅在代码中执行此操作的方法。

基本上不是在 viewDidLoad 中注册单元格的标识符，而是在 cellForRowAtIndexPath: 方法中只做一次。还重置在 viewDidLoad 中注册的单元格 __sCellRegistered = 0;

```
 static int _sCellRegistered = 0;
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  UITableViewCell *cell = nil;

if (__sCellRegistered == 0) {
    __sCellRegistered = 1;
    NSLog(@"register cell");

    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"CellIdentifier"];
    [self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"CellIdentifier"];
};

if (!cell) {
    NSLog(@"dequeue");

    cell = [tableView dequeueReusableCellWithIdentifier:@"CellIdentifier" forIndexPath:indexPath];
} 
```

# php - 使用 Oauth 发布推文

> ID：10485684
> 
> 赞同：5
> 
> 时间：2012-05-07T16:31:12.857
> 
> 标签：php, html, forms, twitter, oauth

我正在尝试创建一个 Web 应用程序，该应用程序允许用户直接在网页上从表单发布推文，而不是使用 Twitter 自己的预构建弹出窗口。问题是，我在网上看到的代码片段不起作用：

```
$message = "Hello there! This is a tweet!";

$twitterObj->post('statuses/update', array('status' => "$message")); 
```

当我尝试执行代码时，出现此错误：

警告：在第 76 行的 /twitter/EpiOAuth.php 中为 foreach() 提供了无效参数

警告：http_build_query() [function.http-build-query]：参数 1 应为数组或对象。/twitter/EpiOAuth.php 第 140 行中给出的值不正确

我正在构建示例并使用在此网址上找到的 OAuth 库：

[http://www.jaisenmathai.com/articles/twitter-php-sign-in.html](http://www.jaisenmathai.com/articles/twitter-php-sign-in.html)

有没有人有任何提示？

* * *

编辑

问题解决了！事实证明，这是我需要使用的正确语句：

```
$twitterObj->post_statusesUpdate(array('status' => 'Message goes here.')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:40:29.147

这就是我使用的：

```
$message = "Hello there! This is a tweet!";

$twitterObj->OAuthRequest('https://twitter.com/statuses/update.xml', array('status' => $message), 'POST');
```

这是在这里找到的库：[https ://github.com/abraham/twitteroauth](https://github.com/abraham/twitteroauth)

# unix - cron 的问题

> ID：10485689
> 
> 赞同：1
> 
> 时间：2012-05-07T16:31:26.443
> 
> 标签：unix, ubuntu, cron

我真的被困住了。我在很多机器上都使用过 cron，但我根本无法让它在 Ubuntu 服务器上运行。周末我已经尝试了我能想到的一切，但我很困惑。我希望有人可以帮助我。

我可以通过`pgrep cron`. 但是，`pgrep crond`什么也不返回。我正在尝试使用 cron 运行一个简单的 shell 脚本（test.sh）：

```
#!/bin/sh
/usr/bin/touch /home/jarvis/test.txt 
```

我已经`chmod +x`在 shell 脚本上运行，我的 crontab 看起来像这样：

```
01 * * * * /home/jarvis/test.sh 
```

我也有一个新的线路在该行之后结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:13:58.710

尝试将所有输出重定向到一个文件，看看是否有任何错误消息可以帮助您诊断问题，即

```
01 * * * * /home/jarvis/test.sh > /tmp/jarvis_test.log 2>&1 
```

此外，如果您从 Windows 环境中创建了任何这些文件，请不要忘记 `dos2unix filename`

**编辑** 我的观点是，除非您查看脚本是否输出错误消息，否则您不会知道脚本在 crontab 环境中执行的操作。错误消息也会发送到本地 crontab 用户的电子邮件，因此请尝试`mail`（作为同一用户）查看是否有大量来自 crontab 的消息。

* * *

`pgrep crond`什么都不返回听起来像是问题，但我不是系统管理员。也许你想标记这个并要求版主转到[https://serverfault.com/](https://serverfault.com/)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:41:18.167

我认为这与用户权限有关。尝试输入默认的 crontab 每小时、每周文件，如果它在那里工作，那么你的 cron 就很好。此外，检查 /var/log/messages 是否有任何 cron 条目。查看 /etc/crontab 了解详细配置。

# java - 音调的产生和检测

> ID：10485694
> 
> 赞同：1
> 
> 时间：2012-05-07T16:31:48.043
> 
> 标签：java, android, audio, dtmf

我正在寻找一种成功的方法来识别自我生成的声音。

我的想法是在立体声上使用两种不同的声音。这两种音调的频率不同。然后我在自制的麦克风电缆上打开音调。电缆有两个开关，可在左声道或右声道之间切换。

我想注意两个频率中的哪一个到达麦克风输入，然后计算它们。

我尝试了很多东西，但没有任何东西能带来预期的成功。好吧，我遇到了DTMF，但是在Android中的实现是不够的。

有谁知道我接下来可以尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:42:25.980

您需要对输入音频进行快速傅里叶变换 (FFT)。您需要做的是捕捉一小段音频，运行 FFT，然后分析结果。如果您不熟悉 FFT，它们会有点复杂，但如果它们在频率上足够分离，就可以计算和测量音调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:09:43.763

您可以使用 FSK 调制和解调。您不需要 FFT，因为这可以通过窄带 DSP 滤波器（几个 Goertzel 滤波器）或正交解调器更简单地完成。

# java - 寻找好的Java音频压缩库

> ID：10485696
> 
> 赞同：0
> 
> 时间：2012-05-07T16:31:48.770
> 
> 标签：java, audio, open-source, codec

我正在为 java 寻找一个可靠的开源音频压缩库。我正在开发一个封闭源代码的项目，所以没有复制许可。但我对无损和有损都感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:59:49.057

[http://flac.sourceforge.net/license.html](http://flac.sourceforge.net/license.html) <-- BSD 许可证/无损

[http://jflac.sourceforge.net/](http://jflac.sourceforge.net/) << Apache 许可证/无损

# php - 在 codeigniter 中获取控制器名称和子文件夹

> ID：10485697
> 
> 赞同：0
> 
> 时间：2012-05-07T16:31:57.623
> 
> 标签：php, codeigniter

我将控制器组织在子文件夹中，如下所示：

```
folder1/controller1
folder1/controller2
folder2/controller1
folder2/controller2 
```

我需要同时获取控制器和子文件夹名称，但现在我只能使用获取控制器名称

```
$CI =& get_instance();
$CI->router->class; 
```

我也试过这个：

```
$CI->uri->uri_string() 
```

但是如果我用一个方法调用我的控制器，它也会返回它，就像这样

完整网址：

```
http://localhost/codeigniter/folder1/controller1/index 
```

将返回

```
folder1/controller1/index 
```

代替

```
folder1/controller1 
```

我可以通过使用类名来删除方法和参数来做到这一点，但我想知道是否有更好的解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:33:28.503

```
print_r($this->router); 
```

在这里你有所有其他的好东西！

在你想要的情况下`$this->router->directory`

它`folders/to/controller/`以尾随返回`/`。

**示例：**
地址：www.example.com/folder1/controller1

`echo $this->router;`

**输出：**
`folder1/`

# php - if 语句未触发

> ID：10485698
> 
> 赞同：-1
> 
> 时间：2012-05-07T16:32:06.803
> 
> 标签：php, if-statement

这几乎是我已经问过的[问题的更新版本。](https://stackoverflow.com/questions/10359260/does-jquery-interfere-with-php)我很确定它的 j-query 我没有干扰。由于某种原因，我在这种情况下的 if 语句没有按应有的方式触发。长话短说：我可以限制回复，但无法显示错误消息。

一些 if 的工作，我一定会指出一个不是。

提前致谢。

这是有效的：

```
if(isset($_POST['sub_comment_reply'])) {
    if($_POST['reply'] == "" ) {
    $valid = false;
    $error_msgs_reply[] = "Whoops! You forgot to write your reply.";
    }else{

        $query = "SELECT COUNT(*) FROM `CysticAnswers_replies`
                  WHERE `FromUserID` = $auth->id
                    AND `date` = CURDATE()";
        $result = mysql_query($query, $connection);
        $post_count = mysql_result($result, 0);
        $max_reply_per_day = 5;

        //Debugging lines
        echo "Query: {$query}<br>\n";
        echo "Post count for user id {$auth->id} is {$post_count}<br>\n";

        if($post_count >= $max_reply_per_day){
                $valid = false;
                $error_msgs_replies_max[] = "Whoops! You have reached your limit of answers for the day.";
        }
        else
        {
        $query = "INSERT INTO `CysticAnswers_replies`
                                            ( `QuestionCommentID`,
                                              `FromUserID`,
                                              `comment`,
                                              `status`,
                                              `date`,
                                              `time`
                                            ) VALUES (

                                            '" . mysql_real_escape_string($_POST['comment']) ."',
                                            '" . $auth->id ."',
                                            '" . mysql_real_escape_string($_POST['reply'])."',
                                            'active',
                                            '" . date("Y-m-d") . "',
                                            '" . date("G:i:s") . "')";

            mysql_query($query, $connection);

} 
```

这是尝试触发错误消息的部分并且没有被触发：

```
<?php if(isset($_POST['sub_comment_reply']) && $post_count >= $max_reply_per_day ) {

    foreach($error_msgs_replies_max as $msg) { ?>
    <div id="error_x">
    <?php echo $msg; ?>
    </div>
    <?php }
?>

<?php } ?>
                <a name='reply_form_<?php echo $result['id']; ?>' style="clear:both"></a>
                <div id='reply_to_<?php echo $result['id']; ?>' class="respond_structure_future" <?php if(isset($_GET['reply_to']) && $_GET['reply_to'] == $result['id']) { echo 'style="display:block;"';}else{ echo 'style="display:none;"';} ?>>
                    <div class="respond_polaroid_future">
                        <a href="http://www.cysticlife.org/Profile.php?id=<?php echo $auth->id; ?>">
                            <img src="<?php echo $auth->img('mini'); ?>" />
                        </a>
                    </div>                              
                    <form name='comment_reply' action='<?php echo $_SERVER['REQUEST_URI']; ?>' method='post'>
                        <div class="respond_body_future round_10px">
                            <div class="respond_arrow_future"></div>
                            <div class="respond_tail_future"></div>
                            <div class="respond_data_future">
                                <textarea id="reply_to_<?php echo $result['id']; ?>_textarea" name='reply'></textarea><br />
                                <input type='hidden' name='comment' value='<?php echo $result['id']; ?>' />
                                <div class="respond_nevermind">
                                    <a href="reply_to_<?php echo $result['id']; ?>">nevermind</a>
                                </div>
                                <input type='submit' class="submit" name='sub_comment_reply' value='Reply' />
                            </div>
                        </div>
                    </form>
                </div>

        <?php } ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:38:01.097

你有没有尝试过：

```
if (isset($error_msgs_replies_max)) foreach($error_msgs_replies_max as $msg) {
  // Do stuff
} else print 'No variable $error_msgs_replies_max'; 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:40:25.557

这也是错误的，你同时使用两者`$error_msgs_replies_max`并`$error_msgs_reply`捕获错误..请只使用一个，例如`$error_msgs_reply`

你也可以更换

```
 foreach($error_msgs_replies_max as $msg) { ?> 
```

和

```
foreach ($error_msgs_reply as $msg) 
```

# wpf - 具有垂直网格线和背景颜色的 ListView

> ID：10485700
> 
> 赞同：0
> 
> 时间：2012-05-07T16:32:10.617
> 
> 标签：wpf, listview, gridlines

我有一个使用以下样式的带有垂直线的 WPF ListView：（对不起长度，但我认为我应该包括它）

```
 <SolidColorBrush x:Key="verticalLineColor" Color="Red" />
    <Style x:Key="{x:Static GridView.GridViewScrollViewerStyleKey}" TargetType="{x:Type ScrollViewer}">
        <Setter Property="Focusable" Value="false"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ScrollViewer}">
                    <Grid SnapsToDevicePixels="true" Background="{TemplateBinding Background}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <DockPanel Margin="{TemplateBinding Padding}">
                            <ScrollViewer Focusable="false" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden" DockPanel.Dock="Top">
                                <GridViewHeaderRowPresenter x:Name="viewHeaderRowPresenter"
                                        Margin="-2,0,-2,0"
                                        Columns="{Binding Path=TemplatedParent.View.Columns, RelativeSource={RelativeSource TemplatedParent}}"
                                        ColumnHeaderContainerStyle="{Binding Path=TemplatedParent.View.ColumnHeaderContainerStyle, RelativeSource={RelativeSource TemplatedParent}}"
                                        ColumnHeaderTemplate="{Binding Path=TemplatedParent.View.ColumnHeaderTemplate, RelativeSource={RelativeSource TemplatedParent}}"
                                        ColumnHeaderTemplateSelector="{Binding Path=TemplatedParent.View.ColumnHeaderTemplateSelector, RelativeSource={RelativeSource TemplatedParent}}"
                                        AllowsColumnReorder="{Binding Path=TemplatedParent.View.AllowsColumnReorder, RelativeSource={RelativeSource TemplatedParent}}"
                                        ColumnHeaderContextMenu="{Binding Path=TemplatedParent.View.ColumnHeaderContextMenu, RelativeSource={RelativeSource TemplatedParent}}"
                                        ColumnHeaderToolTip="{Binding Path=TemplatedParent.View.ColumnHeaderToolTip, RelativeSource={RelativeSource TemplatedParent}}"
                                        SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />

                            </ScrollViewer>

                            <ScrollContentPresenter x:Name="PART_ScrollContentPresenter"
                                        SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"                                         
                                        ContentTemplate="{TemplateBinding ContentTemplate}"
                                        KeyboardNavigation.DirectionalNavigation="Local"
                                        CanContentScroll="{TemplateBinding CanContentScroll}">

                                <ScrollContentPresenter.Content>
                                    <Grid>
                                        <!-- Container of vertical and horizontal lines -->
                                        <ItemsControl Margin="-1,0,0,0" ItemsSource="{Binding Path=TemplatedParent.View.Columns, RelativeSource={RelativeSource TemplatedParent}}">
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Width="{Binding Path=ActualWidth}" BorderThickness="0,0,.5,0" BorderBrush="{DynamicResource verticalLineColor}" Opacity="1" />
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <StackPanel Orientation="Horizontal" />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                        </ItemsControl>
                                        <ContentControl Content="{TemplateBinding Content}" />
                                    </Grid>
                                </ScrollContentPresenter.Content>
                            </ScrollContentPresenter>
                        </DockPanel>
                        <ScrollBar Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" Cursor="Arrow" x:Name="PART_HorizontalScrollBar" Grid.Row="1" Maximum="{TemplateBinding ScrollableWidth}" Minimum="0.0" Value="{Binding Path=HorizontalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" Orientation="Horizontal" ViewportSize="{TemplateBinding ViewportWidth}"/>
                        <ScrollBar Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" Cursor="Arrow" x:Name="PART_VerticalScrollBar" Grid.Column="1" Maximum="{TemplateBinding ScrollableHeight}" Minimum="0.0" Value="{Binding Path=VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" Orientation="Vertical" ViewportSize="{TemplateBinding ViewportHeight}"/>
                        <DockPanel Grid.Column="1" Grid.Row="1" Background="{Binding Path=Background, ElementName=PART_VerticalScrollBar}" LastChildFill="false">
                            <Rectangle Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" Width="1" Fill="White" DockPanel.Dock="Left"/>
                            <Rectangle Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" Height="1" Fill="White" DockPanel.Dock="Top"/>
                        </DockPanel>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

现在，这里一切正常。我现在遇到的问题是，如果我的字段之一为 0，我需要对 ListView 行之一进行遮蔽。我有以下代码可以让我完成 90% 的工作：

```
 <ListView.ItemContainerStyle>
            <Style TargetType="{x:Type ListViewItem}">
                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                <Setter Property="VerticalContentAlignment" Value="Top" />
                <Setter Property="Foreground" Value="Black"/>
                <Setter Property="Margin" Value="0,-2,0,-1"/>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding QtyInBox}" Value="0">
                        <Setter Property="Background" Value="LightGray"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ListView.ItemContainerStyle> 
```

现在，我遇到的问题是，当我设置背景时，它似乎“覆盖”了网格线。 ![在此处输入图像描述](../Images/cb3f62119ca18097512a4e22809d25b2.png)

有没有办法让这些垂直线显示出来？

编辑＃1：好的，所以在玩了一会儿之后，我想知道这是否可行；在以下代码部分中：

```
<DataTemplate>
    <Border Width="{Binding Path=ActualWidth}" BorderThickness="0,0,.5,0" BorderBrush="{DynamicResource verticalLineColor}" />
</DataTemplate> 
```

如果我能以某种方式连接到`Background`那里的房产，我应该能够让它工作。任何人都可以指出我在这里绑定的正确方向吗？我需要绑定到的字段`QtyInBox`在`ItemSource`ListView 上。

编辑#2：看起来我错了；这似乎绑定了整个专栏；所以我不能在那里设置一行的背景。回到绘图板...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:43:55.733

不幸的是，我无法找到真正的解决方案。

我能做的最好的是将背景的透明度设置为 0.6 或 0.7。

不是一个完美的解决方案；因为它导致文本有点模糊，但现在已经足够了。

# java - 如何向子进程发送命令

> ID：10485707
> 
> 赞同：2
> 
> 时间：2012-05-07T16:32:28.613
> 
> 标签：java, subprocess, multiprocessing, processbuilder

我正在创建一个模拟系统，该系统由一个使用 ProcessBuilder 创建多个流程的测试工具组成。我希望能够向单独的进程发送多个命令，而且我只想到了几个选项——这两个选项看起来都不是很有趣。

第一种方法是使用套接字在父进程和子进程之间进行通信，这是子进程相互通信的方式。另一种是使用 Writer 方法，我一直在使用 Reader 方法来读取和打印每个进程的输入流。我认为这两者都需要类似的簿记水平。理想情况下，像调用任何子类一样调用函数会很好，但我知道这不是多进程的工作方式。

请让我知道您认为实现此功能的最佳方法是什么！

谢谢，大卫

更新：我最终在与所有子进程通信的测试工具中创建了一个服务器套接字。系统设置好后，只需将消息添加到队列中，然后将其发送到正确的客户端即可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:18:45.377

这个答案是对您的陈述的回应：

> “理想情况下，像调用任何子类一样调用函数会很好，但我知道这不是多进程的工作方式。”

如果您愿意，如果子进程是在 JVM 上运行的 Java 程序，那么您可以这样做：

使用[远程方法调用](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136424.html)。维基[百科文章](http://en.wikipedia.org/wiki/Java_remote_method_invocation)有一个 RMI 服务器和客户端的小例子。

本质上，这通过以下方式起作用：

1.  *服务器*通过远程方法提供一些服务，通过实现“远程接口”（其定义也应该在客户端可用）
2.  当服务器启动时，它会创建一个实现服务的对象实例，并将其“绑定”到“RMI 注册表”
3.  客户端在“RMI Registry”中查找它想要调用方法的远程对象，并获得一个似乎实现远程接口的对象。
4.  然后客户端可以调用此对象的方法，RMI 运行时确保调用到达远程对象，并返回结果。

这似乎是一个“官方”的 Hello World 示例： [http ://docs.oracle.com/javase/1.5.0/docs/guide/rmi/hello/hello-world.html](http://docs.oracle.com/javase/1.5.0/docs/guide/rmi/hello/hello-world.html)

调用的参数必须是`Serializable`（以便它们可以通过网络传输）。通常，这应该像附加`implements Serializable`到它们的类型定义一样简单。

# android - Eclipse 项目窗口的奇怪行为

> ID：10485716
> 
> 赞同：0
> 
> 时间：2012-05-07T16:32:56.873
> 
> 标签：android, eclipse

从今天早上开始，我的 Eclipse indigo 项目和文件带有浅灰色。为什么？

![在此处输入图像描述](../Images/e6e8adef678f29b1609e2da1c608098d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:39:51.637

看起来您已启用 Mylyn 的“专注于活动任务”功能。它的工具栏按钮看起来像![在此处输入图像描述](../Images/32cc2a2ade228ec4f9c66fa17590e689.png)

# mysql - 我应该将root帐户留在mysql DB的用户表中吗？

> ID：10485718
> 
> 赞同：0
> 
> 时间：2012-05-07T16:33:10.867
> 
> 标签：mysql

如果我确保与 MySQL 数据库的连接没有使用 root 用户帐户。我已经创建了具有适当架构权限的特定于应用程序的用户。我只是有点怀疑我可能忽略了一些使用 root 用户的系统级功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:36:39.087

您应该留下一个 root 帐户 - 实际上我不确定您是否可以完全删除它而不会产生任何后果。我不确定，但我认为密码恢复需要它，如果所有管理员密码丢失 - 您可以使用特殊语法以无密码模式启动 MySQL 守护程序（或服务）。所以基本上，任何对你的服务器有 sudo 访问权限的人都可以随时访问/更改所有 MySQL 数据。

但是您应该明确地为 root 定义一个密码并将其安全地存储 - 不在服务器上，甚至不模糊，并且可能将其限制为只能从 localhost 连接。

默认情况下，root 用户无法从除 localhost 之外的任何主机连接，因此不要更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:01:03.323

您应该更改默认 MySQL root 用户的名称。我通常在我所有的 MySQL 安装上都这样做。

# iphone - 在特定日期显示 UIAlertView？

> ID：10485724
> 
> 赞同：0
> 
> 时间：2012-05-07T16:33:38.067
> 
> 标签：iphone, objective-c, uialertview

我想知道如何在某个日期显示 UIAlertView，例如，用户下载 iPhone 应用程序，然后在 8 月 12 日显示预定的 UIAlertView？我怎么能这样做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:46:41.000

你应该看看[UILocalNotification](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html) API。它允许您为应用程序创建和安排本地通知，然后使用徽章/弹出框/声音（与远程通知 API 的设置相同）在所需日期触发。

对于您的情况，您应该专门查看[火灾日期](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html#//apple_ref/occ/instp/UILocalNotification/fireDate)。示例代码看起来更像这样：

```
UILocalNotification *localNotification = [[UILocalNotification alloc] init];
localNotification.alertBody = @"Your message here";
localNotification.fireDate = [NSDate dateWithTimeIntervalSinceNow:60*60];
[[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; 
```

这将在一小时内触发带有“您在此处的消息”文本的本地通知。

# c# - add page number to pdf document (itextsharp)

> ID：10485728
> 
> 赞同：3
> 
> 时间：2012-05-07T16:33:57.613
> 
> 标签：c#, asp.net, itextsharp

I want to add page numbers to the footer of the itextsharp pdf file.Im generating pdf from html (asp.net repeater).And Im using XMLWorkerHelper to parse the html content.I searched a lot but cant find anything useful to achive this.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T17:09:09.200

You'll have to open the PDF with `iTextSharp` and add the page numbers yourself. I did something like this a while back, here's my function that might give you a start. The function adds the current page to the lower left, so you might have to place it somewhere else that fits your needs.

```
public static byte[] AddPageNumbers(byte[] pdf)
{
MemoryStream ms = new MemoryStream();
// we create a reader for a certain document
PdfReader reader = new PdfReader(pdf);
// we retrieve the total number of pages
int n = reader.NumberOfPages;
// we retrieve the size of the first page
Rectangle psize = reader.GetPageSize(1);

// step 1: creation of a document-object
Document document = new Document(psize, 50, 50, 50, 50);
// step 2: we create a writer that listens to the document
PdfWriter writer = PdfWriter.GetInstance(document, ms);
// step 3: we open the document

document.Open();
// step 4: we add content
PdfContentByte cb = writer.DirectContent;

int p = 0;
Console.WriteLine("There are " + n + " pages in the document.");
for (int page = 1; page <= reader.NumberOfPages; page++)
{
    document.NewPage();
    p++;

    PdfImportedPage importedPage = writer.GetImportedPage(reader, page);
    cb.AddTemplate(importedPage, 0, 0);

    BaseFont bf = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
    cb.BeginText();
    cb.SetFontAndSize(bf, 10);
    cb.ShowTextAligned(PdfContentByte.ALIGN_LEFT, +p + "/" + n, 7, 44, 0);
    cb.EndText();
}
// step 5: we close the document
document.Close();
return ms.ToArray();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:11:22.680

Something like this should work:

```
var sourceFileList = new List<string>();

//add files to merge

int sourceIndex = 0;
PdfReader reader = new PdfReader(sourceFileList[sourceIndex]);
int sourceFilePageCount = reader.NumberOfPages;

Document doc = new Document(reader.GetPageSizeWithRotation(1));
PdfWriter writer = PdfWriter.GetInstance(doc, new FileStream(destinationFileName, FileMode.Create));
doc.Open();

PdfImportedPage page;
PdfContentByte contentByte = writer.DirectContent;                

int rotation;
while (sourceIndex < sourceFileList.Count)
{
    int pageIndex = 0;
    while (pageIndex < sourceFilePageCount)
    {
        pageIndex++;

        doc.SetPageSize(reader.GetPageSizeWithRotation(pageIndex));
        doc.NewPage();

        page = writer.GetImportedPage(reader, pageIndex);
        rotation = reader.GetPageRotation(pageIndex);

        if (rotation.Equals(90 | 270))
            contentByte.AddTemplate(page, 0, -1f, 1f, 0, 0, reader.GetPageSizeWithRotation(pageIndex).Height);
        else
            contentByte.AddTemplate(page, 1f, 0, 0, 1f, 0, 0);
    }

    sourceIndex++;
    if (sourceIndex < sourceFileList.Count)
    {
        reader = new PdfReader(sourceFileList[sourceIndex]);
        sourceFilePageCount = reader.NumberOfPages;
    }
}

doc.Close(); 
```

# python - 如何在 Hamcrest 中组合多个 assert_that？

> ID：10485731
> 
> 赞同：2
> 
> 时间：2012-05-07T16:34:16.747
> 
> 标签：python, hamcrest

我正在使用 PyHamcrest，但我认为这个问题与语言无关。

我想转：

```
assert_that(actual0, matcher0)
assert_that(actual1, matcher1) 
```

成一个断言，这样如果两个断言都失败，错误消息就会这样说。这可以在 Hamcrest（或其他一些包/模块）中完成吗？

在 Python 中，我实现了：

```
def assert_all(*assertions):
    assertion_failed = False
    assertion_message = []

    for (actual, matcher) in assertions:
        try:
            hamcrest.assert_that(actual, matcher)
        except AssertionError as e:
            assertion_failed = True

            assertion_message.append(e.message)

    if assertion_failed:
        raise AssertionError(''.join(assertion_message)) 
```

所以我的测试会调用：

```
assert_all(
    (actual0, matcher0),
    (actual1, matcher1)) 
```

但我想知道是否已经有这样的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:50:36.120

将值的一系列值（列表或元组）`actual`以及与参数相同数量的匹配器传递给[`contains`](http://code.google.com/p/hamcrest/source/browse/trunk/hamcrest-python/hamcrest/library/collection/issequence_containinginorder.py)：

```
assert_that((actual0, actual1, ...), contains(matcher0, matcher1, ...)) 
```

匹配器列表按顺序应用于实际值的序列，一个接一个。所有必须匹配断言才能通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T15:53:33.510

Hamcrest 断言旨在成为单个对象的匹配器，因此您所要求的内容很难优雅地融入模型。一般来说，我认为你拼凑在一起的任何解决方案看起来至少和单独的断言一样糟糕。就我而言，为了清楚起见，我更喜欢单独的断言。

# objective-c - willSave 或 validateForUpdate 中的 NSManagedObject 动态属性更新

> ID：10485735
> 
> 赞同：2
> 
> 时间：2012-05-07T16:34:35.030
> 
> 标签：objective-c, ios, nsmanagedobject

我有一个 NSManagedObject，它的属性仅用于在 NSFetchedResultsController 中进行排序。该属性的值由其他属性或关系的值确定。

因此，当我准备保存对象时，我会弄清楚它的价值。从我阅读文档和实验来看，我似乎可以在`- (void) willSave`或`- (BOOL) validateForUpdate: NSError **error`.

我的实验向我展示了这些是串联调用的，首先`validateForUpdate`是`willSave`.

但是，由于我对幕后发生的事情的洞察力很差，我想知道是否有人可以建议一个地方是否比另一个地方更好来设置价值，为什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:46:55.977

如果您有派生值，您通常不想保存它，但如果您确实想保存它（因此否定了动态生成它的优势，但如果您有很多对象并且想要做一些花哨的谓词工作。）您可以在模型中将其设置为普通值，然后创建一个自定义访问器来检查是否设置了原始值，`primitiveValueForKey:@"propertyName"`例如...

```
.h 
@property()NSString* someProperty;

.m
@dynamic someProperty;
-(NSString *) someProperty
{
    pValue = [self primitiveValueForKey;@"someProperty"];
    if(!pValue)
    {
         //calculate pvalue
         pValue = [self derivedPValue];
         [self setPrimitiveValue: pValue forKey:@"someProperty"];
    }
 return pValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:48:59.087

你可能想加入`willSave`；从技术上讲，您不是在进行验证，并且对该[方法的讨论](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html#//apple_ref/doc/uid/TP30001171-BBCGBABB)参考了计算派生值。

# haskell - hGetContents 太懒了

> ID：10485740
> 
> 赞同：13
> 
> 时间：2012-05-07T16:35:05.950
> 
> 标签：haskell, file-io

我有以下代码片段，我将其传递给`withFile`：

```
text <- hGetContents hand 
let code = parseCode text
return code 
```

这里的 hand 是一个有效的文件句柄，打开`ReadMode`并`parseCode`是我自己的函数，它读取输入并返回一个 Maybe。实际上，该函数失败并返回 Nothing。相反，如果我写：

```
text <- hGetContents hand 
putStrLn text
let code = parseCode text
return code 
```

我得到了一个正义，因为我应该。

如果我这样做`openFile`，`hClose`我自己也会遇到同样的问题。为什么会这样？我怎样才能干净地解决它？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T18:57:37.583

`hGetContents`不是太懒，只是需要与其他东西适当地组合，才能达到预期的效果。如果改名`exposeContentsToEvaluationAsNeededForTheRestOfTheAction`或改名，情况可能会更清楚`listen`。

`withFile`打开文件，做某事（或什么都不做，随你所愿——在任何情况下，这正是你对它的要求），然后关闭文件。

揭示“懒惰 IO”的所有奥秘是不够的，但现在考虑一下括号中的这种差异

```
 good file operation = withFile file ReadMode (hGetContents >=> operation >=> print)
 bad file operation = (withFile file ReadMode hGetContents) >>= operation >>= print

-- *Main> good "lazyio.hs" (return . length)
-- 503
-- *Main> bad "lazyio.hs" (return . length)
-- 0 
```

粗略地说，`bad`在文件执行任何操作之前打开和关闭文件；`good`在打开和关闭文件之间做所有事情。你的第一个动作类似于`bad`. `withFile`应该管理您想要完成的所有操作，这取决于句柄。

如果您正在处理 .、小文件等，则不需要严格执行`String`器，只需了解组合的工作原理即可。同样，在`bad`关闭文件之前我所做的一切都是`exposeContentsToEvaluationAsNeededForTheRestOfTheAction`. 在我构思的其余动作中进行`good`撰写，然后关闭文件。`exposeContentsToEvaluationAsNeededForTheRestOfTheAction`

Patrick提到的熟悉的`length`+技巧，或+值得了解；你的第二个动作是一个变体。但是重组更好，除非惰性 IO 不适合您的情况。`seq``length``evaluate``putStrLn txt`

```
$ time ./bad
bad: Prelude.last: empty list  
                        -- no, lots of Chars there
real    0m0.087s

$ time ./good
'\n'                -- right
()
real    0m15.977s

$ time ./seqing 
Killed               -- hopeless, attempting to represent the file contents
    real    1m54.065s    -- in memory as a linked list, before finding out the last char 
```

不言而喻，ByteString 和 Text 值得了解，但考虑到评估的重组更好，因为即使有了它们，你也经常需要 Lazy 变体，然后它们涉及到掌握组合形式之间的相同区别。如果您正在处理此类 IO 不合适的（大量）类案例之一，请查看`enumerator`,`conduit`和 co.，一切都很棒。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-07T16:56:43.583

`hGetContents`使用惰性 IO；它仅在您强制更多字符串时从文件中读取，并且仅在您评估它返回的整个字符串时关闭文件句柄。问题是您将其封闭在`withFile`; 相反，只需直接使用`openFile`and `hGetContents`（或者，更简单地说，`readFile`）。完全评估字符串后，该文件仍将关闭。像这样的东西应该可以解决问题，通过预先强制整个字符串来确保文件被完全读取并立即关闭：

```
import Control.Exception (evaluate)

readCode :: FilePath -> IO Code
readCode fileName = do
    text <- readFile fileName
    evaluate (length text)
    return (parseCode text) 
```

像这种不直观的情况是当今人们倾向于避免惰性 IO 的原因之一，但不幸的是，您无法更改`hGetContents`. [在strict](http://hackage.haskell.org/package/strict)`hGetContents`包中提供了一个严格的 IO 版本，但可能不值得仅仅为那个功能而依赖包。

如果您想避免在这里遍历字符串两次所带来的开销，那么您可能应该考虑使用比 更有效的类型`String`，无论如何；对于许多基于 - 的 IO 功能，该`Text`类型具有[严格的 IO 等效项，](http://hackage.haskell.org/packages/archive/text/latest/doc/html/Data-Text-IO.html)[同样如此](http://hackage.haskell.org/packages/archive/bytestring/latest/doc/html/Data-ByteString.html#g:26)（如果您正在处理二进制数据，而不是 Unicode 文本）。`String`[`ByteString`](http://hackage.haskell.org/packages/archive/bytestring/latest/doc/html/Data-ByteString.html#g:26)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:51:29.883

您可以使用强制`text`评估的内容

```
length text `seq` return code 
```

作为最后一行。

# wpf - Validation.HasError 的 wpf 组合框触发器

> ID：10485741
> 
> 赞同：1
> 
> 时间：2012-05-07T16:35:08.960
> 
> 标签：wpf, validation, c#-4.0, datatrigger

我环顾四周，但无法具体找到我的问题。我知道 WPF 中的默认“错误”处理会在控件周围放置一个“装饰器”，以防基于 IDataErrorInfo 或 Validataion 规则导致给定控件失败的任何错误。这一切都很好，但是，使用选项卡式页面界面，如果任何控件被标记为无效，它们会被适当地装饰成红色边框。但是，一旦您从标签页 1 转到 2 并返回到 1，所有装饰器都消失了（坏的）。这已经被问过，并且解决方案被接受，但正在寻找更好的选择。

所以，我去了我的“主题”声明，对于文本框控件，我只是说将控件的整个背景颜色设置为红色，而不仅仅是边框。没有任何花哨的强制触发属性更改通知，如果我在页面之间交换，整个文本框的红色背景保持不变。

现在，转到组合框控件。对于那些自定义了自己的控件，甚至查看了默认的 MS 版本控件的人来说，它实际上是一堆控件、网格、列、按钮等的集合，以使组合框的魔力发挥作用。简单来说...

ControlTemplate Grid（两列，一列用于选择的文本显示，第二列用于下拉箭头） 跨越两列的边框路径（用于组合框的下拉图像的线条图/字形）

ControlTemplate TargetType 文本框（作为整个组合框集的一部分）边框特别是“PART_ContentHost”

组合框网格切换按钮下拉列表的 ControlTemplate 暴露显示列表其他触发器..

最后，由上述组件模板化的主要 ComboBox 声明。

无论如何，我不能为我的生活得到这个。在组合框声明的“切换按钮”区域中，我有一个触发器将背景更改为 OBVIOUS 关闭颜色，以证明在 ControlTemplate 声明中的正确位置测试触发器工作。

所以，知道这是组合框声明中的正确位置，如果数据有错误，我想用红色取代绿色背景颜色。我知道整体“Validation.HasError”被正确触发，如本机错误处理程序所示。无论模板中如何/在何处尝试将背景颜色更改为红色，它都不起作用。我什至尝试过 DataTriggers，使用转换器，尝试多个属性，但它似乎不合作。

有什么建议么？这真的很烦人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:11:40.087

终于，明白了……并不像我想象的那么明显。无论如何，这就是我发现的。如果您使用 Microsoft 组合框模板中的示例，它们首先提供整体的两列“ToggleButton”声明

```
<ControlTemplate TargetType="ToggleButton" 
   x:Key="baseComboBoxToggleButton" >

  ... blah blah...

</ControlTemplate> 
```

然后，组合框的“显示值”声明

```
<ControlTemplate TargetType="TextBox" x:Key="ComboBoxTextBox" >
   <Border x:Name="PART_ContentHost" Focusable="False" 
           Background="{TemplateBinding Background}" />
</ControlTemplate> 
```

然后，将它们捆绑在一起作为一个 Combobox“包装器”声明

```
<ControlTemplate TargetType="ComboBox" x:Key="ComboBoxGridControlTemplate" >
   <Grid x:Name="GridComboWrapper">
      <!-- This is the dropdown button that POINTS TO THE "baseComboBoxToggleButton at the top -->
      <ToggleButton Name="ToggleButton" 
        Template="{StaticResource baseComboBoxToggleButton}" 
        Grid.Column="2" Focusable="false"
        IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay,
                RelativeSource={RelativeSource TemplatedParent}}"
                ClickMode="Press" >
      </ToggleButton>

      ...
      rest of the content presenter,
      EDIT(able) textbox area,
      popup area of combobox when in drop-down mode

   </Grid> 

   <ControlTemplate.Triggers>

      <!-- PUT THE VALIDATION CHECK HERE -->
      <Trigger Property="Validation.HasError" Value="true">
         <Setter Property="ToolTip" 
                 Value="{Binding RelativeSource={x:Static RelativeSource.Self},
                 Path=(Validation.Errors)[0].ErrorContent}"/>

         <!-- THIS IS THE CRITICAL COMPONENT... I HAD TO EXPLICITLY TELL
              The TagetName as the "ToggleButton" and change ITs Background property
              and it now works -->
         <Setter TargetName="ToggleButton" Property="Background" 
                 Value="{StaticResource BrushDataInvalidBorder}" />
      </Trigger>

   </ControlTemplate.Triggers>
</ControlTemplate> 
```

所以，现在它按预期工作，并且不会因为给定表单上的活动页面更改并清除它而丢失任何装饰器......它按预期对每个单独的控件都是静态的......哇......这是一个多么好的 PITA曾是。

希望它可以帮助其他人在学习这种嵌套级别的东西的同时避免过度的头部撞墙。

# go - 包含切片的方法

> ID：10485743
> 
> 赞同：341
> 
> 时间：2012-05-07T16:35:37.753
> 
> 标签：go, slice

有没有什么类似于`slice.contains(object)`Go 中的方法而无需搜索切片中的每个元素？

* * *

## 回答 #1

> 赞同：316
> 
> 时间：2012-05-07T17:14:15.653

Mostafa 已经[指出](https://stackoverflow.com/a/10485970/)这样的方法写起来很简单，mkb 给了你一个使用 sort 包中的二分查找的提示。但是，如果您要进行大量此类包含检查，您也可以考虑使用地图。

`value, ok := yourmap[key]`通过使用习语来检查特定的映射键是否存在是微不足道的。由于您对该值不感兴趣，因此您还可以创建一个`map[string]struct{}`示例。在这里使用空`struct{}`的好处是它不需要任何额外的空间，并且 Go 的内部映射类型针对这种值进行了优化。因此，`map[string] struct{}`是围棋世界中集合的流行选择。

* * *

## 回答 #2

> 赞同：277
> 
> 时间：2012-05-07T16:56:58.983

不，这种方法不存在，但写起来很简单：

```
func contains(s []int, e int) bool {
    for _, a := range s {
        if a == e {
            return true
        }
    }
    return false
} 
```

如果查找是代码的重要部分，您可以使用地图，但地图也有成本。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-09-20T10:46:14.913

如果您的切片已排序或您愿意对其进行排序，则[sort包提供了构建块。](https://golang.org/pkg/sort/)

```
input := []string{"bird", "apple", "ocean", "fork", "anchor"}
sort.Strings(input)

fmt.Println(contains(input, "apple")) // true
fmt.Println(contains(input, "grow"))  // false

...

func contains(s []string, searchterm string) bool {
    i := sort.SearchStrings(s, searchterm)
    return i < len(s) && s[i] == searchterm
} 
```

`SearchString`承诺返回`the index to insert x if x is not present (it could be len(a))`，因此检查该字符串是否包含已排序的切片。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2014-12-03T12:45:04.510

而不是使用`slice`,`map`可能是更好的解决方案。

简单的例子：

```
package main

import "fmt"

func contains(slice []string, item string) bool {
    set := make(map[string]struct{}, len(slice))
    for _, s := range slice {
        set[s] = struct{}{}
    }

    _, ok := set[item] 
    return ok
}

func main() {

    s := []string{"a", "b"}
    s1 := "a"
    fmt.Println(contains(s, s1))

} 
```

[http://play.golang.org/p/CEG6cu4JTf](http://play.golang.org/p/CEG6cu4JTf)

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-05-07T16:40:19.287

如果切片已排序，则在包中实现了[二进制`sort`搜索](http://golang.org/pkg/sort/#Search)。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-11-04T04:19:40.157

```
func Contain(target interface{}, list interface{}) (bool, int) {
    if reflect.TypeOf(list).Kind() == reflect.Slice || reflect.TypeOf(list).Kind() == reflect.Array {
        listvalue := reflect.ValueOf(list)
        for i := 0; i < listvalue.Len(); i++ {
            if target == listvalue.Index(i).Interface() {
                return true, i
            }
        }
    }
    if reflect.TypeOf(target).Kind() == reflect.String && reflect.TypeOf(list).Kind() == reflect.String {
        return strings.Contains(list.(string), target.(string)), strings.Index(list.(string), target.(string))
    }
    return false, -1
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2022-01-21T14:16:26.763

在 Go 1.18+ 中，我们可以使用泛型。

```
func Contains[T comparable](s []T, e T) bool {
    for _, v := range s {
        if v == e {
            return true
        }
    }
    return false
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-09-01T04:00:19.833

您可以使用*reflect*包来迭代具体类型为切片的接口：

```
func HasElem(s interface{}, elem interface{}) bool {
    arrV := reflect.ValueOf(s)

    if arrV.Kind() == reflect.Slice {
        for i := 0; i < arrV.Len(); i++ {

            // XXX - panics if slice element points to an unexported struct field
            // see https://golang.org/pkg/reflect/#Value.Interface
            if arrV.Index(i).Interface() == elem {
                return true
            }
        }
    }

    return false
} 
```

[https://play.golang.org/p/jL5UD7yCNq](https://play.golang.org/p/jL5UD7yCNq)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-04-08T09:43:34.430

如果使用地图基于键查找项目不可行，则可以考虑使用[goderive](https://github.com/awalterschulze/goderive)工具。Goderive 生成​​特定于类型的 contains 方法实现，使您的代码既可读又高效。

例子;

```
type Foo struct {
    Field1 string
    Field2 int
} 

func Test(m Foo) bool {
     var allItems []Foo
     return deriveContainsFoo(allItems, m)
} 
```

要生成 derivedContainsFoo 方法：

*   安装goderive`go get -u github.com/awalterschulze/goderive`
*   `goderive ./...`在您的工作区文件夹中运行

将为deriveContains 生成此方法：

```
func deriveContainsFoo(list []Foo, item Foo) bool {
    for _, v := range list {
        if v == item {
            return true
        }
    }
    return false
} 
```

Goderive 支持一些其他有用的帮助方法来在 go 中应用函数式编程风格。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-09-20T13:30:26.260

不确定这里是否需要泛型。你只需要一个你想要的行为的合同。如果您希望自己的对象在集合中表现自己，例如通过覆盖 Equals() 和 GetHashCode()，执行以下操作与在其他语言中必须执行的操作一样。

```
type Identifiable interface{
    GetIdentity() string
}

func IsIdentical(this Identifiable, that Identifiable) bool{
    return (&this == &that) || (this.GetIdentity() == that.GetIdentity())
}

func contains(s []Identifiable, e Identifiable) bool {
    for _, a := range s {
        if IsIdentical(a,e) {
            return true
        }
    }
    return false
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-08-04T22:08:53.897

我认为`map[x]bool`比`map[x]struct{}`.

为不存在的项目索引地图将返回`false`。因此`_, ok := m[X]`，您可以直接说，而不是`m[X]`。

这使得在表达式中嵌套包含测试变得容易。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-01-29T16:15:41.913

我用这些答案的解决方案创建了一个非常简单的基准。

[https://gist.github.com/NorbertFenk/7bed6760198800207e84f141c41d93c7](https://gist.github.com/NorbertFenk/7bed6760198800207e84f141c41d93c7)

这不是一个真正的基准，因为最初，我没有插入太多元素，但可以随意分叉和更改它。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2022-02-18T23:54:59.980

从 Go 1.18 开始，您可以使用该`slices`包 - 特别是通用`Contains`函数： [https](https://pkg.go.dev/golang.org/x/exp/slices#Contains) ://pkg.go.dev/golang.org/x/exp/slices#Contains 。

```
go get golang.org/x/exp/slices 
```

```
import  "golang.org/x/exp/slices" 
```

```
things := []string{"foo", "bar", "baz"}
slices.Contains(things, "foo") // true 
```

请注意，由于它作为实验包在 stdlib 之外，因此它不受 Go 1 Compatibility Promise™ 的约束，并且在正式添加到 stdlib 之前可能会发生变化。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-11-19T23:14:36.517

有几个[包可以提供帮助](https://github.com/wesovilabs/koazee)，但这个似乎很有希望：

[https://github.com/wesovlabs/koazee](https://github.com/wesovilabs/koazee)

```
var numbers = []int{1, 5, 4, 3, 2, 7, 1, 8, 2, 3}
contains, _ := stream.Contains(7)
fmt.Printf("stream.Contains(7): %v\n", contains) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-11-15T12:03:46.597

围棋风格：

```
func Contains(n int, match func(i int) bool) bool {
    for i := 0; i < n; i++ {
        if match(i) {
            return true
        }
    }
    return false
}

s := []string{"a", "b", "c", "o"}
// test if s contains "o"
ok := Contains(len(s), func(i int) bool {
    return s[i] == "o"
}) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-05-29T14:23:39.273

如果你有一个`byte`切片，你可以使用`bytes`包：

```
package main
import "bytes"

func contains(b []byte, sub byte) bool {
   return bytes.Contains(b, []byte{sub})
}

func main() {
   b := contains([]byte{10, 11, 12, 13, 14}, 13)
   println(b)
} 
```

或`suffixarray`包装：

```
package main
import "index/suffixarray"

func contains(b []byte, sub byte) bool {
   return suffixarray.New(b).Lookup([]byte{sub}, 1) != nil
}

func main() {
   b := contains([]byte{10, 11, 12, 13, 14}, 13)
   println(b)
} 
```

如果你有一个`int`切片，你可以使用`intsets`包：

```
package main
import "golang.org/x/tools/container/intsets"

func main() {
   var s intsets.Sparse
   for n := 10; n < 20; n++ {
      s.Insert(n)
   }
   b := s.Has(16)
   println(b)
} 
```

*   [https://golang.org/pkg/bytes](https://golang.org/pkg/bytes)
*   [https://golang.org/pkg/index/suffixarray](https://golang.org/pkg/index/suffixarray)
*   [https://pkg.go.dev/golang.org/x/tools/container/intsets](https://pkg.go.dev/golang.org/x/tools/container/intsets)

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2021-02-25T01:25:39.380

我使用反射包创建了以下包含函数。该函数可用于各种类型，如 int32 或 struct 等。

```
// Contains returns true if an element is present in a slice
func Contains(list interface{}, elem interface{}) bool {
    listV := reflect.ValueOf(list)

    if listV.Kind() == reflect.Slice {
        for i := 0; i < listV.Len(); i++ {
            item := listV.Index(i).Interface()

            target := reflect.ValueOf(elem).Convert(reflect.TypeOf(item)).Interface()
            if ok := reflect.DeepEqual(item, target); ok {
                return true
            }
        }
    }
    return false
} 
```

contains 函数的用法如下

```
// slice of int32
containsInt32 := Contains([]int32{1, 2, 3, 4, 5}, 3)
fmt.Println("contains int32:", containsInt32)

// slice of float64
containsFloat64 := Contains([]float64{1.1, 2.2, 3.3, 4.4, 5.5}, 4.4)
fmt.Println("contains float64:", containsFloat64)

// slice of struct
type item struct {
    ID   string
    Name string
}
list := []item{
    item{
        ID:   "1",
        Name: "test1",
    },
    item{
        ID:   "2",
        Name: "test2",
    },
    item{
        ID:   "3",
        Name: "test3",
    },
}
target := item{
    ID:   "2",
    Name: "test2",
}
containsStruct := Contains(list, target)
fmt.Println("contains struct:", containsStruct)

// Output:
// contains int32: true
// contains float64: true
// contains struct: true 
```

请在此处查看更多详细信息： [https ://github.com/glassonion1/xgo/blob/main/contains.go](https://github.com/glassonion1/xgo/blob/main/contains.go)

* * *

## 回答 #18

> 赞同：-4
> 
> 时间：2020-02-07T05:14:31.037

它可能被认为有点“hacky”，但根据切片的大小和内容，您可以将切片连接在一起并进行字符串搜索。

例如，您有一个包含单个单词值的切片（例如“yes”、“no”、“maybe”）。这些结果被附加到一个切片中。如果您想检查此切片是否包含任何“可能”结果，您可以使用

```
exSlice := ["yes", "no", "yes", "maybe"]
if strings.Contains(strings.Join(exSlice, ","), "maybe") {
  fmt.Println("We have a maybe!")
} 
```

这实际上有多合适取决于切片的大小和其成员的长度。大切片或长值可能存在性能或适用性问题，但对于有限大小和简单值的较小切片，它是实现所需结果的有效单线。

# cakephp - 在没有文档根目录的情况下部署 CakePHP？

> ID：10485747
> 
> 赞同：0
> 
> 时间：2012-05-07T16:36:05.157
> 
> 标签：cakephp

我目前正处于使用 CakePHP（特别是 2.x）的调查阶段。我注意到在[部署文档](http://book.cakephp.org/2.0/en/deployment.html#set-document-root)中，我需要在 httpd.conf 中相应地设置文档根目录，不幸的是，对于这个项目，我无权访问 httpd.conf，也无权访问给定 webroot 下的任何目录。

鉴于此，我的两个问题是： 1\. 是否可以在不设置文档根目录的情况下仍然运行 CakePHP？2\. 这样做有什么潜在的缺点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:23:34.650

当然，您可以在任何子目录中使用 CakePHP。您可能会发现唯一有用的是 RewriteBase 指令，我认为这里有很好的解释：[RewriteBase 如何在 .htaccess 中工作](https://stackoverflow.com/questions/704102/how-does-rewritebase-work-in-htaccess)

我注意到的另一个小问题是，那里的一些 CakePHP 插件确实假定了一个根目录 :( 不幸的是，当我看到这些插件时，我不得不附加 Router::url("/") 。

除此之外，在子目录上运行 CakePHP 应该没有问题。

# ruby - 将随机数生成器偏置到具有偏差 b 的某个整数 n

> ID：10485752
> 
> 赞同：3
> 
> 时间：2012-05-07T16:36:28.580
> 
> 标签：ruby, algorithm, random

给定一个整数范围 R = [a, b]（其中 a >=0 和 b <= 100），R 中的一个偏置整数 n，以及一些偏差 b，我可以使用什么公式将随机数生成器偏向 n？

因此，例如，如果我有 1 到 10 的数字并且我没有指定偏差数字，那么理论上我应该有相同的机会随机抽取其中一个。

但是如果我确实给出了一个特定的偏差数（比如 3），那么数字生成器应该比其他数字更频繁地绘制 3 a。

如果我在偏置数之外指定一个偏差，比如说 2，那么数字生成器应该比从 6 到 10 更频繁地从 1 到 5 绘制。

我可以使用什么算法来实现这一点？

如果它更容易/更难，我正在使用 Ruby。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:40:38.723

我认为最简单的方法是从具有所需属性的正态（又名高斯）分布中进行采样，然后转换结果：

*   生成具有给定均值和 sd 的正常值
*   四舍五入到最接近的整数
*   如果超出给定范围（正常*可以*在从 -infinity 到 -infinity 的整个范围内生成值），丢弃并重复

如果您需要从制服生成法线，最简单的变换是“ [box-muller](http://en.wikipedia.org/wiki/Box%E2%80%93Muller_transform) ”。

您可能需要担心一些细节。特别是，box muller 的范围有限（它永远不会产生极不可能的值）。因此，如果您给出一个非常窄的范围，那么您将永远无法获得完整的值范围。其他转换不受限制 - 我建议使用 ruby​​ 提供的任何东西（寻找“正常”或“高斯”）。

另外，请注意对值进行*四舍五入*。例如，2.6 到 3.4 应该都变成 3。如果您简单地丢弃小数（因此 3.0 到 3.999 变为 3），您将有偏见。

如果您真的关心效率，并且不想丢弃价值，您可以简单地发明一些东西。一种作弊方法是将统一变量与偏差值混合（例如，9/10 倍生成统一，1/10 倍返回 3）。在某些情况下，您只关心样本的平均值，这就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:17:27.080

对于第一部分“但是如果我确实给出了一个特定的偏差数（比如 3），那么数字生成器应该比其他数字更频繁地绘制 3 a。”，一个非常简单的解决方案：

```
def randBias(a,b,biasedNum=None, bias=0):
   x = random.randint(a, b+bias)
   if x<= b:
       return x
   else:
       return biasedNum 
```

对于第二部分，我会说这取决于任务。如果您需要从同一分布中生成十亿个随机数，我会明确计算这些数字的概率并使用加权随机数生成器（请参阅[随机加权选择](https://stackoverflow.com/questions/2073235/random-weighted-choice)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:14:40.730

如果您想要一个单峰分布（其中偏差仅集中在您的数字范围的一个特定值中，例如，正如您所说的 3），那么 andrew cooke 提供的答案是好的——主要是因为它允许您非常准确地微调偏差。

但是，如果您希望做出几个偏差——例如，您想要一个三峰分布，数字 a、(a+b)/2 和 b 比其他数字更频繁，那么您最好实施加权随机选择。

[在 StackOverflow 最近的一个问题](https://stackoverflow.com/questions/10164303/weighted-random-selection-using-walkers-alias-method)中给出了一个简单的算法；它的复杂性是线性的。使用这样的算法，您只需维护一个列表，初始包含 {a, a+1, a+2,..., b-1, b}（大小为 b-a+1），当您需要要添加对 X 的偏见，您可以将 X 的多个副本添加到列表中——这取决于您想要偏见的程度。然后从列表中选择一个随机项目。

如果您想要更高效的方法，最有效的方法称为“别名方法”，它[由 Denis Bzowy 在 Python 中非常清楚地实现](http://code.activestate.com/recipes/576564-walkers-alias-method-for-random-objects-with-diffe/)；一旦你的数组被预处理，它就会在恒定时间内运行（但这意味着一旦你完成了预处理，你就不能再更新偏差了——或者你会重新处理表格）。

这两种技术的缺点是，与高斯分布不同，偏向 X，也不会偏向 X-1 和 X+1。要模拟这种效果，你必须做一些事情，比如

```
def addBias(x, L):
   L = concatList(L, [x, x, x, x, x])
   L = concatList(L, [x+2])
   L = concatList(L, [x+1, x+1]) 
   L = concatList(L, [x-1,x-1,x-1])
   L = concatList(L, [x-2]) 
```

# c# - 对象到字节的转换

> ID：10485753
> 
> 赞同：1
> 
> 时间：2012-05-07T16:36:31.567
> 
> 标签：c#, .net, conventions

当我尝试将对象转换为字节数组时，我得到了一个奇怪的数组。这是代码：

```
 using (MemoryStream ms = new MemoryStream())
        {
            BinaryFormatter bf = new BinaryFormatter();
            bf.Serialize(ms, obj);
            Console.WriteLine(ByteArrayToString(ms.ToArray()));
        }
//int obj = 50;

//string ByteArrayToString(byte[] byteArr) the functionality of this method is pretty obvious 
```

结果是这样的：

"00 01 00 00 00 FF FF FF FF 01 00 00 00 00 00 00 00 04 01 00 00 00 0C 53 79 73 74 65 6D 2E 49 6E 74 33 32 01 00 00 00 07 6D 5F 6560C 07 6D 5F 6560C 06 32 00 00 00 0B "

有人可以向我解释为什么吗？:) 最佳结果应该只有“32 00 00 00”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T16:41:02.320

由于序列化程序需要提供足够的信息来反序列化数据，它必须包含一些关于被序列化对象的元数据。具体来说，

```
53 79 73 74 65 6D 2E 49 6E 74 33 32 
```

部分代表`System.Int32`

如果您改用[`BinaryWriter`](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)and 它的`Write(Int32)`方法，您将获得所需的效果：您的内存流将仅包含整数中的四个字节。`Int32`如果不知道您将 an写入流中，您将无法反序列化它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T16:41:05.403

您将`BinaryFormatter`序列化与对象的*内存格式*混为一谈。写入流的内容仅仅是 的实现细节，`BinaryFormatter`不应依赖于任何不使用`BinaryFormatter`.

如果您正在寻找内置类型的字节表示，请使用[`BitConverter.GetBytes`](http://msdn.microsoft.com/en-us/library/system.bitconverter.getbytes.aspx)（对于字符串，请使用适当的[`Encoding.GetBytes`](http://msdn.microsoft.com/en-us/library/system.text.encoding.getbytes.aspx)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T16:49:16.757

序列化的字节数组既有数据本身也有类型信息。这就是为什么您获得的信息比您预期的要多。这是以后反序列化所必需的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-19T16:08:32.193

序列化过程使用额外的字节来存储有关类型的信息 - 这是确保序列化数据将被反序列化为相同类型的相同对象的唯一方法。如果您绝对确定自己在做什么并希望避免任何额外的字节，您可以使用自己的序列化并制作您的格式化程序和序列化程序，这非常复杂。或者，您可以使用编组：

```
var size = Marshal.SizeOf(your_object);
// Both managed and unmanaged buffers required.
var bytes = new byte[size];
var ptr = Marshal.AllocHGlobal(size);
// Copy object byte-to-byte to unmanaged memory.
Marshal.StructureToPtr(font.LogFont, ptr, false);
// Copy data from unmanaged memory to managed buffer.
Marshal.Copy(ptr, bytes, 0, size);
// Release unmanaged memory.
Marshal.FreeHGlobal(ptr); 
```

并将字节转换为对象：

```
var bytes = new byte[size];
var ptr = Marshal.AllocHGlobal(size);
Marshal.Copy(bytes, 0, ptr, size);
var your_object = (YourType)Marshal.PtrToStructure(ptr, typeof(YourType));
Marshal.FreeHGlobal(ptr); 
```

这在大多数情况下使用起来非常缓慢且不安全，但这是在不实现序列化和没有 [Serializable] 属性的情况下将对象严格转换为 byte[] 的最简单方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T16:39:10.267

结果中的额外内容将是 BinaryFormatter 对象。您不仅输出 int obj = 50，还输出 BinaryFormatter 中包含的所有内容。

# windows-phone-7 - 使用 MVVM 和多于一页的墓碑

> ID：10485755
> 
> 赞同：2
> 
> 时间：2012-05-07T16:36:36.683
> 
> 标签：windows-phone-7

我在哪里可以找到超过一页的关于 tombstononig 的信息？我有 2 个页面，每个页面都有他自己的视图模型，从第 1 页 nagite 到第 2 页，如果在这个页面中出现 tombstonig 如何保存和恢复第 1 页的视图模型？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:06:25.663

1.  `OnNavigatedFrom`如果手机墓碑或导航到第 2页，则保存第 1 页的状态
2.  恢复第 1 页的状态`OnNavigatedTo`。
3.  如果用户在第 1 页向后导航，则删除第 1 页的状态。

# facebook - Facebook open graph - 在最近的活动日志中使用对象名称作为标题

> ID：10485758
> 
> 赞同：3
> 
> 时间：2012-05-07T16:36:53.670
> 
> 标签：facebook, facebook-opengraph

我有动作名称“shot”和名为“GIF”的对象。

故事在时间轴上正确显示：

```
"Keepwalking shot a GIF" 
```

但最近的活动日志显示：

```
"Keepwalking shot a This is my new Gif" 
```

我怎样才能让它显示 GIF（对象的名称）而不是页面标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T00:53:37.020

您可以发布指向 OG 对象 URL 的链接吗？检查正在呈现的 og:title 值。

使用 Facebook 的 Open Graph 调试器查看 FB 在抓取您的对象时看到的内容：

[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

# c# - Neet 一个关于多客户端的简单示例 - C# 中的服务器

> ID：10485760
> 
> 赞同：-5
> 
> 时间：2012-05-07T16:37:06.773
> 
> 标签：c#

我正在使用 C# 开发我的练习应用程序！

我想使用 1 个服务器和 2 个连接到服务器的客户端！

例如

```
客户端 1：连接并向服务器发送一个字符串 - 服务器接收该字符串并说回复
```

```
客户 2：作为客户 1 工作
```

我希望它使用 RPC

// sr 关于我的英语，我是越南人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:39:59.397

[http://csharp.net-informations.com/communications/csharp-chat-server-programming.htm](http://csharp.net-informations.com/communications/csharp-chat-server-programming.htm)

[http://www.codeproject.com/Articles/12893/TCP-IP-Chat-Application-Using-C](http://www.codeproject.com/Articles/12893/TCP-IP-Chat-Application-Using-C)

[http://www.c-sharpcorner.com/UploadFile/nanujogi/chat_server11282005233459PM/chat_server.aspx](http://www.c-sharpcorner.com/UploadFile/nanujogi/chat_server11282005233459PM/chat_server.aspx)

谷歌是你的朋友。

# ruby-on-rails - Rails 从 dev 开始，说服务器是 http://0.0.0.0

> ID：10485762
> 
> 赞同：1
> 
> 时间：2012-05-07T16:37:22.050
> 
> 标签：ruby-on-rails, ruby

> **可能重复：**
> [为什么 Ruby on Rails 使用 0.0.0.0:3000 而不是 localhost:3000？](https://stackoverflow.com/questions/1478747/why-does-ruby-on-rails-use-http-0-0-0-03000-instead-of-http-localhost3000)

我在本地启动我的服务器，出于某种原因，我注意到这条线：

```
=> Rails 3.1.3 application starting in development on http://0.0.0.0:3000 
```

这正常吗？我的 /etc/hosts 文件：

```
127.0.0.1       localhost
255.255.255.255 broadcasthost
::1             localhost
fe80::1%lo0     localhost

127.0.0.1       app.cmply.local
127.0.0.1       api.cmply.local
127.0.0.1       m.cmply.local 
```

但我刚刚尝试在那里取出第一行。这会导致问题吗？我把第一行放回去了，但服务器仍然说[http://0.0.0.0](http://0.0.0.0)

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T16:43:49.723

0.0.0.0 表示监听所有接口；换句话说，任何知道您的 IP 地址的人都可以访问您的 Rails 应用程序。这个是正常的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T22:49:52.693

是的，这是运行 rails server 命令时应用程序的标准地址，当您在终端中运行该命令时，您会看到：

```
$ cd commandsapp
$ rails server
=> Booting WEBrick
=> Rails 3.1.0 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server 
```

该行：

```
=> Rails 3.1.0 application starting in development on http://0.0.0.0:3000 
```

是让您知道您的应用程序可以在浏览器中的所述地址查看。

查看我发布的 railsguides 链接以获取更多信息。

[http://guides.rubyonrails.org/command_line.html](http://guides.rubyonrails.org/command_line.html)

# c# - 组合 Where 语句的表达式

> ID：10485763
> 
> 赞同：2
> 
> 时间：2012-05-07T16:37:23.557
> 
> 标签：c#, linq, lambda, expression, expression-trees

> **可能重复：**
> [如何将 LINQ 表达式组合为一个？](https://stackoverflow.com/questions/1922497/how-do-i-combine-linq-expressions-into-one)

```
public bool IsUnique(params Expression<Func<Employee, bool>>[] properties)
{
    var combinedProperties = Combine(properties);
    var rowCount = _session.QueryOver<Employee>().Where(combinedProperties).ToRowCountQuery().RowCount();
    return rowCount == 0;
}

Expression<Func<Employee, bool>> Combine(Expression<Func<Employee, bool>>[] properties)
{
    ???
} 
```

用法：

```
var isUnique = _employeeRepository.IsUnique(x => x.FirstName == commandMessage.FirstName, x => x.LastName == commandMessage.LastName); 
```

有没有一种方法可以将谓词与 AND 运算符结合起来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T17:16:16.360

最简单的方法是遍历您的 params 数组并为每个表达式调用 .Where 。

```
Pseudo
var query = _session.QueryOver<Employee>()
for each expression in expressions
   query = query.Where(expression) 
```

我知道这并不是您所问的，但它可能已经足够好，因为它实现了总体目标？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:43:45.300

我认为扩展方法会更有用，并且适用于所有 IEnumerable 查询：

```
public static class MyExtensions
{
    // usage:
    // myList.CombinedWhere(x => x.Name == "John", x => x.City == "Miami", x => x.Code > 5);
    public static IEnumerable<T> CombinedWhere<T>(this IEnumerable<T> source,
        params Func<T, bool>[] predicates)
    {
        var query = source.Where(l => true);
        foreach(var pred in predicates)
        {
            query = query.Where (pred);
        }
        return query;
    }
} 
```

就像你使用 Where 扩展一样使用它，除了你可以使用可变数量的参数。

添加上述扩展后，您的代码会略有变化：

```
public bool IsUnique(params Func<Employee, bool>[] predicates)
{
    var rowCount = _session.QueryOver<Employee>()
             .CombinedWhere(predicates).ToRowCountQuery().RowCount();
    return rowCount == 0;
}

var isUnique = _employeeRepository.IsUnique(
             x => x.FirstName == commandMessage.FirstName,
             x => x.LastName == commandMessage.LastName); 
```

实际上，现在我看它，您可能只能将其归结为一个表达式：

```
var isUnique = (_session.QueryOver<Employee>()
   .CombinedWhere( 
        x => x.FirstName == commandMessage.FirstName, 
        x => x.LastName == commandMessage.LastName)
   .ToRowCountQuery()
   .RowCount()) == 0; // == 1? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:53:06.773

感谢 Brad Rem 和 Kenneth Ito，他们给了我一些灵感。

这是适用于 NHibernate 的 IQueryOver API 的解决方案。

存储库：

```
public bool IsUnique(int id, params Expression<Func<T, bool>>[] properties)
{
    var rowCount = _session.QueryOver<T>().CombinedWhere(properties).ToRowCountQuery().RowCount();
    // create
    if (id == 0)
    {
        return rowCount == 0;
    }
    // update
    return rowCount <= 1;
} 
```

IQueryOver 扩展：

```
public static class IQueryOverExtension
{
    public static IQueryOver<T, T> CombinedWhere<T>(this IQueryOver<T, T> source, params Expression<Func<T, bool>>[] predicates)
    {
        return predicates.Aggregate(source, (current, predicate) => current.Where(predicate));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T16:41:21.560

是的，您可以将[LinqKit](http://www.albahari.com/nutshell/linqkit.aspx)与 .Invoke() 一起使用

```
Expression<Func<Purchase,bool>> criteria1 = p => p.Price > 1000;
Expression<Func<Purchase,bool>> criteria2 = p => criteria1.Invoke (p)
                                                 || p.Description.Contains ("a"); 
```

# android - Android 的 FragmentTransaction.commit() 方法线程安全吗？

> ID：10485764
> 
> 赞同：2
> 
> 时间：2012-05-07T16:37:31.643
> 
> 标签：android, android-fragments

我只是好奇我是否必须在 UI-Thread 上调用它。根据文档，`commit`当它有时间时，它将在 UI 线程上运行。如果是这种情况，我可以`FragmentTransaction.commit()`在另一个线程上运行吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-12T02:14:03.390

这个问题已经有一年了，但我想解决它，因为我怀疑这是很多人都会遇到的问题。

使用 FragmentTransactions，包括调用 commit 方法，*在非 UI 线程上是安全的，*因为在 FragmentTransaction 中发生的任何工作都不会直接操作 UI。FragmentTransaction 上的方法调用被简单地打包为要执行的工作指令列表。

一旦调用了 commit 方法，该指令包就会被发送到 UI 线程进行处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T17:05:59.447

不完全确定你的意思。您可能总是有任何其他线程向调用 FragmentTransaction.commit() 的 UI 线程发送消息。

但是，我不太明白为什么您在所有事务之后不立即调用 commit。

我什至希望您甚至可能会遇到 NullPointer 错误，如果片段或其相关数据发生任何更改 - 我的意思是在延迟期间 - 这会导致您的应用程序的状态与您立即调用 commit 时不同。

同样在这种情况下，您应该致电`fragmentManager.executePendingTransactions()`以确保将进行所有更改，否则您可能会假设交易已经发生——实际上他们还没有发生。

# c# - 如何根据当前时间制作 if 语句以显示 xml 属性

> ID：10485767
> 
> 赞同：4
> 
> 时间：2012-05-07T16:37:39.570
> 
> 标签：c#, xml, linq, linq-to-xml, datetime-comparison

我有一个这样的 XML：

```
<PrayerTime
    Day ="1" 
    Month="5" 
    Fajr="07:00" 
    Sunrise="09:00"
    Zuhr="14:00"
/> 
```

像这样的一个类：

```
public class PrayerTime
{   
    public string Fajr { get; set; }
    public string Sunrise { get; set; }
    public string Zuhr { get; set; }
} 
```

并获得这样的价值：

```
XDocument loadedCustomData = XDocument.Load("WimPrayerTime.xml");
var filteredData = from c in loadedCustomData.Descendants("PrayerTime")
                   where c.Attribute("Day").Value == myDay.Day.ToString()
                   && c.Attribute("Moth").Value == myDay.Month.ToString()
                   select new PrayerTime()
                   {
                       Fajr = c.Attribute("Fajr").Value,
                       Sunrise = c.Attribute("Sunrise").Value,
                   };
myTextBox.Text = filteredData.First().Fajr; 
```

我如何根据当前时间说如果时间在 Fajr 的值和 Sunrise 的值之间，那么 myTextBox 应该显示 Fajr 的值。如果当前时间值在日出和 Zuhr 之间，显示 Zuhr？

如何让它在 myTextBox2 中显示属性名称？例如，myTextBox 显示值“07:00”，而 myTextBox2 显示“Fajr”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:49:13.627

首先，不要保留字符串，而是保留 TimeSpan 对象：

```
public TimeSpan Fajr { get; set; }
public TimeSpan Sunrise { get; set; } 
```

为此，将 XML 解析为 DateTime：

```
TimeSpan ts = TimeSpan.Parse(c.Attribute("attr")); 
```

所以：

```
TimeSpan now = DateTime.Now.TimeOfDay; // time part only
var data = filteredData.First();

string result = null;
if (data.Fajr <= now && now < data.Sunrise); // notice operators greed
    result = data.Fajr;
else if (data.Sunrise <= now && now <= data.Zuhr)
    result = data.Zuhr;
myTextBox.Text = result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:16:37.577

首先根据@abatischcev修改类

```
public class PrayerTime
{
    public TimeSpan Fajr { get; set; }
    public TimeSpan Sunrise { get; set; }
    public TimeSpan Zuhr { get; set; }
} 
```

然后将linq查询选择部分修改为：

```
select new PrayerTime()
{
    Fajr = TimeSpan.Parse(c.Attribute("Fajr").Value),
    Sunrise = TimeSpan.Parse(c.Attribute("Sunrise").Value),
    Zuhr = TimeSpan.Parse(c.Attribute("Zuhr").Value)
}; 
```

那么你的支票应该是：

```
var obj = filteredData.First();
TimeSpan currentTime = myDay.TimeOfDay;
string result = String.Empty;
if (currentTime >= obj.Fajr && currentTime < obj.Sunrise)
{
    result = "Fajar";
}
else if (currentTime >= obj.Sunrise && currentTime < obj.Zuhr)
{
    result = "Zuhar";
}
textbox1.Text = result; 
```

*（顺便说一句，Zuhr 时间应该在 Zuhr 和 Asar 之间 :)）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:15:19.513

这里的问题是您的代码是“字符串类型的”。我最好使用为时间设计的类型，例如[DateTime](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)，但要快速修复它：

```
 // don't you need a third one here?
               select new PrayerTime()
               {
                   Fajr = c.Attribute("Fajr").Value,
                   Sunrise = c.Attribute("Sunrise").Value,
               }; 
```

涂获取当前时间：

```
int currentHour = DateTime.Now.Hour; 
```

然后只是两个整数的简单比较。

```
var data = filteredData.First();
int fajrHour = int.Parse(data.Fajr.Substring(0, 2), CultureInfo.InvariantCulture);
int sunriseHour = int.Parse(data.Sunrise.Substring(0, 2), CultureInfo.InvariantCulture);
int zuhrHour = int.Parse(data.Zuhr.Substring(0, 2), CultureInfo.InvariantCulture);

if(fajrHour <= currenHour && currenHour < sunriseHour)
{
    myTextBox.Text = data.Fajr; // or to show value fajrHour.ToString()
}
if(sunriseHour <= currenHour && currenHour  < zuhrHour)
{
    myTextBox.Text = data.Zuhr; //    zuhrHour.ToString()
}
// don't you need a third one here? 
```

# mysql - mysql根据顺序用int更新列

> ID：10485769
> 
> 赞同：10
> 
> 时间：2012-05-07T16:37:49.273
> 
> 标签：mysql, sql, sql-order-by, identity

假设我有这些列

```
 uniqueID|Money|Quantity|MoneyOrder|QuantityOrder
1|23|12||
2|11|9||
3|99|100|| 
```

我想要做的是更新`MoneyOrder`并`QuantityOrder`基于`ORDER BY`.

所以结果将是：

```
uniqueID|Money|Quantity|MoneyOrder|QuantityOrder
1|23|12|2|1
2|11|90|1|2
3|99|100|3|3 
```

我希望更新像身份列一样运行，而不是实际使其成为身份列。我知道我可以按“x”排序，订单就是结果，但我想生成一个报告，您可以在其中逐行查看项目。

这样的事情可能`update mytable set Moneyorder = 'imnotsure' order by MoneyOrder asc`吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-07T16:41:01.220

```
SET @rownumber = 0;    
update mytable set Moneyorder = (@rownumber:=@rownumber+1)
order by MoneyOrder asc 
```

或在单个查询中执行此操作，您可以尝试

```
update mytable target
join
(
     select id, (@rownumber := @rownumber + 1) as rownum
     from mytable         
     cross join (select @rownumber := 0) r
     order by MoneyOrder asc
) source on target.id = source.id    
set Moneyorder = rownum 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T16:42:32.107

查看此问题的答案：

[更新列以使其包含行位置](https://stackoverflow.com/questions/4632696/updating-column-so-that-it-contains-the-row-position)

```
SET @counter = 0;

UPDATE 
my_table
SET MoneyOrder = @counter := @counter + 1
ORDER BY Money;

SET @counter = 0;

UPDATE 
my_table
SET QuantityOrder = @counter := @counter + 1
ORDER BY Quantity; 
```

# button - 如何创建stackoverflow类型的按钮？

> ID：10485773
> 
> 赞同：2
> 
> 时间：2012-05-07T16:38:40.143
> 
> 标签：button, extjs4

我想知道如何创建堆栈溢出类型的按钮（如下图所示的按钮）？是否可以使用 ExtJS 创建这样的按钮？

![在此处输入图像描述](../Images/00620b3cc9ab3ac70e4966082838a960.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T17:59:34.800

不久前有人对此进行了扩展。

它与 SO 按钮不*完全*一样，但您可以稍微玩一下 CSS，并可能添加一些覆盖以使其 100% 实现。

我认为第四个例子（forceSelection: false）可能是最相似的。只需隐藏字段框并更改关闭图标即可。

[以下](http://kveeiv.github.com/extjs-boxselect/examples/boxselect.html)是示例。

这是线程[。](http://www.sencha.com/forum/showthread.php?134751-Ext.ux.form.field.BoxSelect-Intuitive-Multi-Select-ComboBox)

# objective-c - presentPopoverFromRect 在旋转时侧向显示弹出框

> ID：10485785
> 
> 赞同：1
> 
> 时间：2012-05-07T16:39:27.977
> 
> 标签：objective-c, ipad, uialertview, uipopovercontroller, screen-rotation

-我有一个 UIView。
- 这个 UIView 有一个 UIButton，当点击它时会出现一个 UIAlertView。
-在这个 UIAlertView 中，我有另一个 UIButton，当单击它时调用 buttonClicked：
-在这个 buttonClicked: 方法中，我调用 presentPopoverFromRect 并在里面有一个自定义视图。（hourKeyboard 是自定义视图）

```
-(void)buttonClicked:(id)sender
{
    if(self.hourKeyboard==nil)
    {
        self.hourKeyboard = [[HourKeyboardViewController alloc] init];
        self.hourKeyboardPopover = [[UIPopoverController alloc] initWithContentViewController:self.hourKeyboard];
    }

    [self.hourKeyboardPopover presentPopoverFromRect:[sender bounds] inView:sender permittedArrowDirections:UIPopoverArrowDirectionLeft animated:YES];
} 
```

在正常人像模式下，这很好用。弹出框出现在按钮的右侧，箭头正确地指向按钮的左侧。

出现了 2 个问题：
1）虽然此弹出框可见，但当您旋转屏幕时，弹出框会稍微不正确地旋转（它不会重新定位它自己的 x 和 y 位置）
2）如果未显示弹出框。如果您旋转屏幕，然后调用“buttonClicked”，弹出框将出现，但是，它显示在按钮上方的侧面，箭头“向下”指向按钮（技术上相对于侧面弹出框视图而言是左侧）。如果你关闭它，旋转屏幕，然后调用“buttonClicked”，弹出框现在出现倒置，按钮指向“右”按钮（同样，技术上相对于侧面弹出框视图而言是左侧）！重复使其再次向侧面，然后再次向右上方。

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

我的想法：

1）我相信我可以重新定位 x 和 y，但是，我还读到您应该关闭弹出框并在旋转时再次显示它。我会看看我是否能让第一个工作，但我更关心第二个问题。

2）我不知道如何解决这个轮换问题。似乎当您旋转到横向时，弹出框不可见。然后你调用presentPopoverFromRect，弹出框是用iPad创建的，认为它仍然错误地处于纵向视图中。这就是它给出的行为，但是，我不确定如何让 iPad 不犯这个错误。

-=-=-=-=-=-=-=-=-=

再次感谢您提供的任何帮助！

-=-=-

轻微更新：
1）很容易从旋转的主视图中消除弹出框。这似乎是每个人处理这个问题的一般方式。

2）尝试各种事情，如改变框架，使用 CGAffineTransformMakeRotation 等等......但到目前为止还没有运气

-=-=-

另一个更新：

2）经过大量测试，似乎是UIAlertView的直接问题。如果我将视图放置在 UIAlertView 中（当前正在执行），则 AlertView 不会告诉弹出窗口屏幕已旋转...从而产生问题

看起来解决此问题的唯一方法是完全删除 UIAlertView。我将手动禁用各种背景视图（就像 Alert View 所做的那样），而不是显示 UIAlertView，然后显示一个看起来与 AlertView 非常相似的自定义 UIView。从那里，我应该能够毫无问题地显示弹出窗口。我会让你知道结果如何。

-=-=-=-=-=-=-=-

最终解决方案：

我最终只是创建了自己的视图，并让该视图模仿 UIAlertView。然后当我生成弹出框时，我将它放在根视图控制器中。工作得更好，但需要更多的工作，因为我必须手动创建自己的视图而不是预制的 UIAlertView。无论哪种方式，显然 UIAlertView 都无法告诉 UIPopoverover 子视图它在哪个旋转中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:10:36.660

关闭弹出窗口`willRotateToInterfaceOrientation`并在`didRotateFromInterfaceOrientation`.

它没有问题。

编辑：对不起，我误解了你的第二个问题。

如果您的视图层次结构的某些部分以错误的方向显示，则您的控制器之一可能缺少`shouldAutorotateToInterfaceOrientation`方法。

# css - css多背景定位

> ID：10485788
> 
> 赞同：0
> 
> 时间：2012-05-07T16:39:37.117
> 
> 标签：css, wordpress

我的 wordpress 主题有背景，

我有另一个图像，我想将它放置在页面的中心并从左到右水平重复它。

非常类似于这个网站[http://www.tcs.com/homepage/Pages/default.aspx](http://www.tcs.com/homepage/Pages/default.aspx)

非常感谢任何提示或说明。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:10:03.063

我会使用包装器来完成此操作。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style type="text/css">
body {
background-image: url(image1.jpg);
}
#wrapper {
background-position: center middle;
width:100%;
height:100%;
margin: 0px;
padding: 0px;
background-image: url(image2.jpg);
background-repeat: x-repeat;
}
</style>
</head>
<body>
<div id="wrapper">

</div>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:05:42.430

您可以像这样使用 CSS3设置[多个背景图像：](http://www.w3.org/TR/css3-background/#layering)

```
body {
  background: url(first_image.png) top left no-repeat,
              url(second_image.png) center center repeat-x;
} 
```

您只需用逗号分隔规则。它[得到了相当广泛的支持](http://caniuse.com/multibackgrounds)。

这是你要找的吗？

[http://jsfiddle.net/4S5HR/](http://jsfiddle.net/4S5HR/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:04:57.567

这取决于您拥有原始背景图像的位置。如果它像这样附加到 html

```
html {
    background: url(original-background.png) top left repeat-x;
    } 
```

您可以像这样将重复的水平图像附加到身体上

```
body {
    background: url(repeating-background.png) top center repeat-x;
    } 
```

您能否提供有关您的 CSS 的更多详细信息，我可以为您提供更详细的答案，但这应该可以满足您的要求。

# matlab - 单例展开的二元运算——标量输出

> ID：10485790
> 
> 赞同：1
> 
> 时间：2012-05-07T16:39:37.147
> 
> 标签：matlab, octave, bsxfun

有 bsxfun 之类的功能：http: [//www.mathworks.com/help/techdoc/ref/bsxfun.html](http://www.mathworks.com/help/techdoc/ref/bsxfun.html)但是它在逐个元素模式下工作。我想要在逐个向量模式下（以及标量输出）工作的类似函数。

作为说明，我会尝试以这种方式在这里使用 bsxfun。作为内部函数，我将使用（这只是一个示例）向量的点积。

```
function f = foo(a,b), f=a'*b; printf("called\n");, end 
```

上面的虚拟函数`foo`需要 2 个向量，结果是标量。每次调用它时，我们都会看到一条消息。

```
bsxfun(@foo,[2;3],[1 5;4 3]) 
```

结果是：

```
called
called
ans =

   14   19
    0    0 
```

所以，两个调用（很好），但是我们得到了一个矩阵，而不是一个向量（一对 2 个标量）。可以说，在这种情况下只获得第一行就足够了，因为矩阵是由 bsxfun 预先创建的，其余的将始终为零。

但情况并非总是如此——有时我得到了一些实际值，而不仅仅是零——而且恐怕会涉及到一些副作用（上面的点积是最简单的例子）。

## 问题

那么，是否有一个类似于 bsxfun 的函数，但它获取向量并期望每个向量的每个操作都有一个标量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:27:39.733

我认为没有内置函数，但使用 arrayfun 或 cellfun 你也许可以做一些事情。通常 arrayfun 也是元素方面的，但如果你首先将较大的数组拆分为一个单元格，那么你可以这样做：

```
foo = @(a,b) b*a
y = [2;3];
X = [1 5; 4 3];
% split X into cell array of rows
% apply foo to each row
cellfun(@(x) foo(y,x), num2cell(X,2))
ans = 
    17
    17 
```

我不确定它会带来任何速度优势（我想显式循环会更快），但有时它更容易阅读。

# image-processing - 图像的降维方法

> ID：10485809
> 
> 赞同：4
> 
> 时间：2012-05-07T16:40:38.300
> 
> 标签：image-processing, machine-learning, matlab, dimensionality-reduction

我正在尝试使用*Matlab Toolbox for Dimensionality Reduction*来减少一组图像的尺寸。问题是：我对降维知之甚少。所以我通过反复试验尝试每一个，将数据集传递给函数。到目前为止，我已经尝试了 6，PCA 正在返回一个带有复数的矩阵。其他的是冷冻matlab。哪些图像缩小方法适用于图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T21:23:30.200

看起来您正在尝试实现类似[eigenfaces](http://en.wikipedia.org/wiki/Eigenface)的东西，所以首先看看这篇文章。通常，您需要使用**PCA**或**SVD**获得特征向量。但是，如果您需要非常低的资源使用，请查看[随机投影](http://users.ics.tkk.fi/ella/publications/randproj_kdd.pdf)方法。

# lucene - 如何使用 Amazon S3 实施 LuceneNet

> ID：10485812
> 
> 赞同：2
> 
> 时间：2012-05-07T16:40:50.753
> 
> 标签：lucene, amazon-s3, lucene.net

我正在尝试使用 Amazon S3 在我的应用程序中实现 Lucene 来存储我生成的索引，但我可以找到任何代码示例或清晰的文章。所以任何有这方面经验的人请给一个指南或可以帮助我开始的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T23:35:29.333

[这里](https://stackoverflow.com/questions/9186137/is-there-a-way-to-configuring-solr-to-run-on-amazon-s3-with-the-index-files-on-s)有一个类似的问题。

[这](http://www.lucidimagination.com/blog/2010/02/01/solr-shines-through-the-cloud-lucidworks-solr-on-ec2/)是一篇有趣的文章，介绍了最大的 Solr 服务提供商 Lucid Imagination 如何提议在 EC2 上部署他们的 Solr 实现。
这是他们[的](http://www.lucidimagination.com/about/news/releases/lucid-imagination-search-service-powers-flexible-cost-effective-enterprise-wide)搜索即服务解决方案。

如果您未绑定到 S3，则可以使用名为[WebSolr](http://websolr.com/)的专用 Solr 云服务。

此外，如果您的开发项目需要完整的 ALM/CI 解决方案，[CloudBees](http://wiki.cloudbees.com/bin/view/RUN/Websolr)中包含一个 WebSolr 模块。

# wordpress - 非拉丁字符的Wordpress slug问题

> ID：10485825
> 
> 赞同：5
> 
> 时间：2012-05-07T16:41:30.330
> 
> 标签：wordpress

我在 WP 中使用永久链接：`domain.com/category/post_name`

问题是帖子名称包含非拉丁字符，例如*chinese、hebrew 和 arabic*。因此它将它们编码为：`%20%18%6b%20`因此它将每个符号的字符都视为一个实际字符，最终长度是它截断一些非常短的段的 3 倍。

如何解决？或者至少如何延长长度限制？我试图将数据库字段“post_name”的长度从 200 扩展到 500，但它仍然截短。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:32:23.033

您可以`post_name`通过应用过滤器来更改`sanitize_title`...
简短示例：

```
add_filter('sanitize_title', 'sanitize_title_custom', 10, 3);
function sanitize_title_custom($title, $raw_title, $context){
    // do some proccesing with title or raw_title
    // assign new result to $title ($title = str_replace(" ","-", $raw_title);// as example )
    return $title;
} 
```

但是，要小心......糟糕的消毒可能是安全风险...... sql注入等......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T17:43:40.873

Wordpress 不应该像那样对您的帖子进行编码。我一直在为客户使用 utf8 字符和标题。它工作正常。

你确定你的数据库表的字符集是 utf8 吗？如果是这样，它是否被任何列覆盖？还要`wp-config.php`检查`define('DB_CHARSET', 'utf8');`

我还将禁用任何插件并再次测试您的永久链接。也许你的一个插件正在搞砸你的帖子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T16:08:55.583

这是一个常见的情况，也让我感到沮丧。

检查这个插件。[清洁树干](http://www.adamwhippy.com/my-work/seo-plugin-wordpress-urls/)

1.  您可以在插件配置页面上设置最大 url 长度。（默认：35 个字符。）
2.  您还可以选择编辑提供的停用词列表。

希望这会有所帮助。干杯！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-02T22:52:36.667

对于非英语 URL：我正在使用带有 fcgi 的 IIS，并且我在网络上的不同位置找到了非英语 slug 的解决方案：对于希伯来语： [这里](http://www.livedns.co.il/KbArticle.aspx?ArticleID=1127) 了解有关 IIS7 URL 重写和符号的更多信息：[这里](https://serverfault.com/questions/33375/iis7-url-rewrite-and-symbols/33426#33426?newreg=8d843d6d8f27462da7355e8abdf22813) 通常除了 IIS 配置漂亮您需要添加到 wp-config.php 末尾的 url：

```
 if (isset($_SERVER['UNENCODED_URL']))
$_SERVER['REQUEST_URI'] = $_SERVER['UNENCODED_URL']; 
```

[在这里](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-configuration-reference#Preserving%5FOriginal%5FURL)您会找到更多关于 UNENCODED_URL

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-11T01:17:35.403

创建/保存永久链接时为什么不删除这些坏字符？

# java - 使用 Gson 显示枚举及其属性的映射

> ID：10485826
> 
> 赞同：0
> 
> 时间：2012-05-07T16:41:36.743
> 
> 标签：java, enums, gson

我正在使用 Gson，我想序列化并显示一个枚举。

我的枚举：

```
Tuple{

    SINGLE(1,"Single"), 
    DOUBLE(2,"Double")

    Tuple(int asInt,String properName){
        this.asInt=asInt;
        this.fullName=fullName;
    }

    public int AsInt;
    public String fullname;
} 
```

我想要这样的输出：

```
(SINGLE:{asInt:1,fullName:'Single'},DOUBLE:{asInt:2,fullname:'Double'}) 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:05:52.897

如果我没记错的话，您似乎需要一些自定义序列化和反序列化。检查[此](http://sites.google.com/site/gson/gson-user-guide#TOC-Custom-Serialization-and-Deserialization)链接。它有一个非常自我描述的示例，您可以将其用作 kickstart。

# php - 如何将 POST 变量发送到外部 URL？

> ID：10485834
> 
> 赞同：1
> 
> 时间：2012-05-07T16:43:21.180
> 
> 标签：php, symfony1, symfony-1.4

我正在做一个购物车。我想在去支付网关之前保存订单。我的支付网关需要我发送一个 POST 到外部地址，而不是如何通过控制器操作来完成。

```
public function executeBuy(sfWebRequest $request)
{
  sfProjectConfiguration::getActive()->loadHelpers('Url');

  // save the order
  $this->order = new Order();
  $this->save
  //etc....

  //go to TPV Payment gateway
  $dsAmount       = (float)$order->getPriceWithShipping() * 100;
  $dsOrder        = (int)$order->getId() * 400;
  $dsMerchantCode = (int)sfConfig::get('app_tpv_merchant_code');
  $dsCurrency     = (int)sfConfig::get('app_tpv_merchant_currency');
  $dsMerchantURL  = url_for('cart/ipn', true, array(
    'sf_culture' => $this->getUser()->getCulture(),
  ));
  $options = array(
    'Ds_Merchant_Amount'            => $dsAmount,
    'Ds_Merchant_Currency'          => $dsCurrency,
    'Ds_Merchant_Order'             => $dsOrder,
    'Ds_Merchant_Titular'           => $order->getAddress()->getCustomer()->getNameAndLastName(),
    'Ds_Merchant_MerchantCode'      => $dsMerchantCode,
    'Ds_Merchant_MerchantURL'       => $dsMerchantURL,
    'Ds_Merchant_MerchantSignature' => $digest,
    'Ds_Merchant_Terminal'          => $dsCurrency
  );

  //how to send post $options variables to external url?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:51:44.767

使用[cURL 发布数据](http://davidwalsh.name/execute-http-post-php-curl)：

```
//set POST variables
$dsMerchantURL = url_for('cart/ipn', true, array(
  'sf_culture' => $this->getUser()->getCulture(),
));

$options = array(
  'Ds_Merchant_Amount' => urlencode($dsAmount),
  'Ds_Merchant_Currency' => urlencode($dsCurrency),
  'Ds_Merchant_Order' => urlencode($dsOrder),
  'Ds_Merchant_Titular' => urlencode($order->getAddress()->getCustomer()->getNameAndLastName()),
  'Ds_Merchant_MerchantCode' => urlencode($dsMerchantCode),
  'Ds_Merchant_MerchantURL' => urlencode($dsMerchantURL),
  'Ds_Merchant_MerchantSignature' => urlencode($digest),
  'Ds_Merchant_Terminal' => urlencode($dsCurrency)
);

//url-ify the data for the POST
foreach($options as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string,'& ');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $dsMerchantURL);
curl_setopt($ch,CURLOPT_POST, count($options));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:30:23.437

在我们的网站（bpremium.com）上，我们通过 ajax 运行我们的支付系统，我们的网站通过网络服务向特定 url 发送诸如“创建销售”或“更新数量”之类的命令，这些 url 记录您购物车的当前状态并存储销售会话中的 ID。

然后当我们到达 TPV 时，我们执行一个 web 服务来获取表单的 html，生成、签名和散列，只需按下一个按钮即可。

这种技术非常适合高速，因为您不需要继续重定向和强迫用户等待，它的重量要轻得多，这意味着您只需将 TPV 打开到一个窗口中，填写它，merchantURL 就会捕获 POST 数据从 TPV 网关成功或失败时。

# c# - 多用户嵌入式数据库

> ID：10485837
> 
> 赞同：3
> 
> 时间：2012-05-07T16:43:45.853
> 
> 标签：c#, database, sqlite, ravendb, embedded-database

我的任务是找到一个非常适合用于即将进行的项目的数据库。我很难找到一个好的匹配。我们的应用程序是一个 .Net Framework 4.0 C# 应用程序。

首先我查看了 SQLite，但我遇到了问题，因为 SQLite 在写入期间锁定了它的数据库文件。

我有 2 个使用同一个数据库同时运行的独立应用程序，我无法确定一个应用程序何时正在编写。我试图等待锁释放，但这导致了一些数据丢失。所以我想我会发明一个队列系统，但是两个应用程序都需要使用相同的队列......所以我想我会做一个单独的 Window 服务。在我看来，所有这些听起来都像是传统的 RDBMS。

我决定回溯并问自己“我使用的是正确的数据库吗？”。

有人知道可能满足我给出的要求的数据库吗？

以下是我的要求： 1\. 易于安装。这包括没有单独的“安装程序”，用户必须与我们的应用程序安装分开运行。这首先让我相信我需要一个嵌入式数据库，但我认为可能有一些聪明的方法可以在我们的安装程序中包含数据库安装。

1.  很难打破。这里最大的需要是它应该能够通过命名管道而不是 TCP/IP 来解决安全问题（或任何降低人们的系统配置破坏我们应用程序的能力的东西）。我们的应用程序将始终在同一台机器上运行。他们需要共享同一个数据库，因此如果涉及防火墙/安全/“智能用户”，使用 TCP/IP 可能会导致问题。

2.  对数据库的长时间运行操作不应阻止其他用户读取/写入数据库。我想写一些代码来处理这个需求并且仍然使用 Sqlite 但决定做更多的功课。

3.  许可：我们想要一些可以免费重新分配版税的东西。我们不希望我们的最终用户需要为我们所依赖的数据库购买他们自己的单独许可证。

4.  大小限制：我们计划在这些数据库中存储相当多的数据，任意限制是不可接受的。我们愿意接受操作系统对文件大小施加的限制。SQLite 的大小限制（这是任何 Windows 机器文件的大小限制）大于 2 TB。

5.  很高兴拥有：能够使用实体框架。

6.  很高兴拥有：关系数据库。我们可能允许第 3 方应用程序读取我们的数据库，并且不介意它是关系数据库而不是文档或对象数据库。但是，我们愿意为满足我们所有要求的东西而让步。

到目前为止我看过的数据库：RavenDB SQLite CubeSQLite SQL CE

Oracle 和 Microsoft SQL Server 已获得许可，因此难以重新分发。

我了解这些要求非常严格。我什至不确定是否有现成的解决方案可用。我感谢任何人可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:16:22.080

您需要使用 SQL Server CE 4.0：

*   xcopy 部署
*   支持加密
*   可自由分发
*   仅从 4.0 版开始支持多标题（在您的情况下为多进程）
*   支持 4 Gb 空间
*   支持 EF（甚至 CodeFirst）
*   它是关系型的，并且支持 SQL Server T-SQL 的一个子集

您错误地认为它需要许可：

> Microsoft SQL Server Compact 4.0 是一个**免费**的嵌入式数据库，软件开发人员可以使用它来构建 ASP.NET 网站和 Windows 桌面应用程序。SQL Server Compact 4.0 占用空间小，支持在应用程序文件夹中私有部署其二进制文件，在 Visual Studio 和 WebMatrix 中轻松开发应用程序，以及将架构和数据无缝迁移到 SQL Server。

来自[Microsoft SQL Server Compact 4.0（MS 下载）](http://www.microsoft.com/en-us/download/details.aspx?id=17876)

除非 4Gb 对您来说不够用，否则您可以使用它。

SQL Server Express 也是免费的，限制较少，但需要安装。

SQL CE 和 SQL Server 之间的主要区别在于 CE 不支持 Sotred 过程。但是，如果您使用 EF，那根本不是问题。

**编辑**有关许可的附加信息：

> SQL Server Compact 4.0 可根据再分发许可协议自由再分发，再分发 SQL Server Compact 4.0 的应用程序开发人员可以选择在 SQL Server Compact 再分发站点注册。注册将帮助开发人员获取有关 SQL Server Compact 关键安全补丁和热修复程序的信息，这些补丁程序和热修复程序可以进一步应用于客户端安装。

在下载页面底部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T04:36:48.137

我意识到这是一个老问题，但我目前正在处理几乎相同的问题，并且想知道情况是否发生了变化，所以就这样吧！

从 SQLite 文档看来，使用 SQLite 绝对可以做到这一点。

他们明确表示支持在同一台计算机上进行多进程访问。只有当您尝试通过网络共享时，SQLite 才会出现问题。[http://www.sqlite.org/faq.html#q5](http://www.sqlite.org/faq.html#q5)

这部分特别有趣：“当任何进程想要写入时，它必须在其更新期间锁定整个数据库文件。但这通常只需要几毫秒。其他进程只是等待写入器完成然后继续他们的业务。其他嵌入式 SQL 数据库引擎通常只允许单个进程一次连接到数据库。

这不是解决问题的方法吗？似乎如果写入只需要几毫秒，您基本上可以循环调用直到它工作（具有适当的超时和延迟）。

我会选择 CE，但我只是太喜欢开源了；）

# c# - Type.GetFields 为公共字段返回一个空的 System.Reflection.FieldInfo 数组

> ID：10485842
> 
> 赞同：0
> 
> 时间：2012-05-07T16:44:23.363
> 
> 标签：c#, reflection

我有一个类，它只包含一些相当标准类型的公共字段。该调用`myObject.GetType().GetFields()`返回一个空数组。

问题可能是什么？

更新：对不起，问题是我正在使用 WCF 服务公开的类。原始类（比如 A）和公开的（WcfReference.A）是不同的类。A 的成员成为 WcfReference.A 中的私有字段并作为属性公开。

也许应该删除这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T16:53:38.330

不带参数的 GetFields() 将返回您类型的公共字段（不是@Kenneth Ito 注意到的属性）。

例子

```
public class Test {
   public string var_;//I'm a public field, I'll be returned
   private int id_; //I'm a private field, you'll have to do more to get me
   public int Id {get { return id_;} set {id_=value;}} //I'm a property, I don't feel concerned
} 
```

如果你这样做

```
var test = new Test();
test.GetType().GetFields(); 
```

将返回一个包含一项的数组：var_

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T14:08:35.660

在旧版本的 .NET 中（我正在向 1.1 项目添加功能，可怜我），默认方法`GetFields()`将返回一个空数组。在 1.1 之后，他们更新了此方法以包含所有公共属性。我不知道他们为什么做出这个改变，因为已经有一种`GetProperties()`方法可以做同样的事情。

这种方法是进入私有领域的方法，因此了解如何使用它是至关重要的。[方法GetFields(BindingFlags flags)](http://msdn.microsoft.com/en-US/library/6ztex2dc(v=vs.110).aspx)有一个重载。这使用[BindingFlags](http://msdn.microsoft.com/en-US/library/system.reflection.bindingflags(v=vs.110).aspx)的组合来确定您想要从对象中获得哪些字段。

因此，如果您想要实例私有字段，您可以调用：

```
GetFields(BindingFlags.Instance | BindingFlags.NonPublic); 
```

如果您只想要公共静态属性，您可以调用：

```
GetFields(BindingFlags.Static | BindingFlags.Public); 
```

您还可以继续为所有静态字段组合它们：

```
GetFields(BindingFlags.Static | BindingFlags.Public | BindingFlags.NonPublic); 
```

还有许多其他类型的`BindingFlags`，因此请查看上面链接的 MSDN 页面，了解您可能需要的任何其他类型。

# ajax - Ajax 如何在 JSF 上工作？

> ID：10485845
> 
> 赞同：3
> 
> 时间：2012-05-07T16:44:49.317
> 
> 标签：ajax, jsf

我是 JSF 的新手，但我对 ASP.NET 及其 Ajax 特性有一些经验。我知道 JSF 有一些 Ajax 标记可以使用 Ajax 完成一些任务，但我想知道它是如何使用 Ajax 的。它是否在 ASP.NET 中使用类似 ScriptManager 的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T16:53:56.997

每当您使用 JSF[`<f:ajax>`](http://download.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/ajax.html)标记时，[`jsf.js`](http://javaserverfaces.java.net/nonav/docs/2.1/jsdocs/index.html)脚本都会自动包含在 HTML 头中。它将处理所有的 ajax 魔法。生成的 HTML 元素的`on*`属性将在必要时进行更改，以便正确使用 ajax 脚本。您不必担心这一切，您需要做的就是指定和使用`<f:ajax>`文档中的 JSF 标记。您不需要像 ASP.NET ScriptManager 那样手动包含和配置脚本。

请注意，这仅在您使用 Facelets 作为视图技术时才有效，而不是其古老的前身 JSP。您还需要确保您在主模板中有一个`<h:head>`而不是纯 HTML `<head>`，否则 JSF 将无法自动包含该`jsf.js`脚本。

总之，JSF 最终会生成纯 HTML。只需在浏览器中打开页面，右键单击并*查看源代码*。如果您非常熟悉基本的 HTML 和 JS，那么一切都会一目了然。

# android - Gridview 和 FrameLayout 不正确地放置图像

> ID：10485849
> 
> 赞同：0
> 
> 时间：2012-05-07T16:45:06.570
> 
> 标签：android, gridview, android-framelayout

让我们简化这个问题。

我做了什么：

*   我创建了一个自定义 Gridview
*   我创建了框架布局的适配器视图

我想要完成的是类似于[Shelve view](http://code.google.com/p/shelves/)的东西。

现在，结果是正确查看 gridview 的背景如何使用正确的图像。但是，其他所有图像在高度和位置上都有些偏差。我似乎得到了正确的宽度。

图片放置不当的可能原因有哪些？

我将如何为适配器设置网格视图的正确定位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:38:37.960

根据我对您问题的原始版本的记忆，您正在为您的网格项目绘制自定义`GridView`背景`dispatchDraw`。我*认为*您要问的是为什么这些背景与您的适配器创建的实际子视图不一致。如果是这样，我必须查看一些代码/布局才能确定，但​​很可能存在填充/边距，因此子视图的布局并不完全均匀。我不确定为什么它是所有其他图像。

如果您正在尝试创建类似 Shelves 的东西，您可能只想从查看那里的代码开始……毕竟它是开源的。

# javascript - 我需要为一个简单的图片库创建一组链接

> ID：10485853
> 
> 赞同：3
> 
> 时间：2012-05-07T16:45:34.020
> 
> 标签：javascript, arrays, image, gallery

我已经建立了一个绘画作品集的网站。

当缩略图被点击并显示同一图像的中等大小的照片时。

我以数组的形式完成了这项工作，这非常简单。

我还为每个图像添加了信息，例如标题和大小，再次作为数组添加。

我想为每个图像添加一个链接，该链接将打开一个新窗口，如果他们愿意，用户可以查看更详细的更大图像。屏幕变灰的灯箱之类的东西。

我似乎无法将链接传递给数组，我确信这是一个简单的错误。有人能给我们一点建议吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:58:01.050

使用 Javascript 对象表示法。JSON。（或者只是 JS 对象）

使用对象数组代替字符串数组

这是详细的方式：

```
var myPaintings = new Array();

var painting = new Object();
painting.medium = "images/blah.jpg";
painting.link = "dosomething.html";
painting.caption = "this is a painting";

myPaintings.push( painting ); 
```

然后您可以更进一步，使用 json 作为您的数据存储和检索。对于此查找 JSON.stringify() 和 JSON.encode() 或 jquery $.JSON.parseJSON() 等。

```
var myPaintings = {

     [
         { 
             "medium":"images/blah.jpg",
             "link": "dosomething.html",
             "caption":"this is a painting"

         },
         { 
             "medium":"images/hello.jpg",
             "link": "dosomethingelse.html",
             "caption":"this is a painting also"
         }
     ]
} 
```

在前一种情况下，我想你可以省略第一个对象括号 {}，只使用 myPaintings = [...]。JSON 是对象文字表示法的子集，JSON 需要为键名加上引号。通常，这种表示法可以说是键/值对。

# php - 如何根据 $variable 值触发查询？

> ID：10485855
> 
> 赞同：0
> 
> 时间：2012-05-07T16:45:36.160
> 
> 标签：php, triggers

如果我没有正确说明这一点或使用正确的术语，请原谅我，因为我是 php 开发的新手。

我有一个名为photos.php 的页面，我想做一些类似photos.php?type=me 和photos.php?type=friends 的操作。正如您所推断的，使用 type=me 我想显示我的照片，使用 type=friends 我想显示朋友的照片。所以我想做类似的事情：

```
if $value == $me trigger type=me query and if $value == $friends trigger query to 
display only friends' photos. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T16:47:33.983

就像你写的一样简单：

```
if ($_GET['type'] == 'me') {
    $sql = 'me query';
} else if ($_GET['type'] == 'friends') {
    $sql = 'friends query';
} 
```

查询取决于您的数据库结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:49:20.790

```
$query = ($_GET['type'] == 'me') ? 'me query' : (($_GET['type'] == 'friends') ? 'friends query'); 
```

这应该够了吧

# android - 带有多个 ListView 的 ViewFlipper

> ID：10485857
> 
> 赞同：1
> 
> 时间：2012-05-07T16:45:42.937
> 
> 标签：android, listview, viewflipper

我是 android 开发的新手，我正在尝试实现一种方法来显示 6 个可以通过手势（左-右-fling、右-左-fling）更改的视图并使用以下 ListView [Pull-To-Refresh -列表视图](https://github.com/johannilsson/android-pulltorefresh)。这 6 个视图具有相同的结构，但内容不同。这就是为什么我认为一个带有 ViewFlipper**的 Pull-To-Refresh-Listview应该就足够了，并且****在 Fling 上**，只有 View 的内容应该被替换？

**主要的.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#E1E1E1"
android:orientation="vertical"
android:scrollbars="vertical" >

    <ViewFlipper
        android:id="@+id/viewFlipper"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <com.markupartist.android.widget.PullToRefreshListView
            android:id="@+id/listView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#AB1A1A"
            android:textColor="#FFFFFF" >
        </com.markupartist.android.widget.PullToRefreshListView>

    </ViewFlipper></LinearLayout> 
```

**MainActivity.java**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    m_objSeparatedListAdapter = new SeparatedListAdapter(this);
    m_objPullToRefreshListView = (PullToRefreshListView) findViewById(R.id.listView);

    m_linkedListDays.add("Te");
    m_linkedListMeals.add("st");

    ArrayAdapter<String> listadapter = new ArrayAdapter<String>(this, R.layout.list_item, m_linkedListMeals);
    for (int i = 0; i < m_linkedListDays.size(); i++) {
        m_objSeparatedListAdapter.addSection(m_linkedListDays.get(i), listadapter);
    }
    m_objPullToRefreshListView.setAdapter(m_objSeparatedListAdapter);

    m_objPullToRefreshListView.setOnRefreshListener(new OnRefreshListener() {
        @Override
        public void onRefresh() {
            // GET DATA
        }
    });

    m_objPullToRefreshListView.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
        public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
            // FORWARD TO THE OTHER VIEW
            return true;
        }
    });

    m_objAnimationLeftIn = AnimationUtils.loadAnimation(this, R.anim.slide_left_in);
    m_objAnimationLeftOut = AnimationUtils.loadAnimation(this, R.anim.slide_left_out);
    m_objAnimationRightIn = AnimationUtils.loadAnimation(this, R.anim.slide_right_in);
    m_objAnimationRightOut = AnimationUtils.loadAnimation(this, R.anim.slide_right_out);

    m_objGestureDetector = new GestureDetector(new MyGestureDetector());
    m_objPullToRefreshListView.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            return m_objGestureDetector.onTouchEvent(event);
        }
    });
} 
```

**我的手势检测器**

```
class MyGestureDetector extends SimpleOnGestureListener{ 

    DisplayMetrics dm = getResources().getDisplayMetrics();
    private int REL_SWIPE_MIN_DISTANCE = (int)(120.0f * dm.densityDpi / 160.0f + 0.5); 
    private int REL_SWIPE_MAX_OFF_PATH = (int)(250.0f * dm.densityDpi / 160.0f + 0.5);
    private int REL_SWIPE_THRESHOLD_VELOCITY = (int)(200.0f * dm.densityDpi / 160.0f + 0.5);

    // Detect a single-click and call my own handler.
    @Override 
    public boolean onSingleTapUp(MotionEvent e) {
        ListView lv = (PullToRefreshListView) m_objViewFlipper.getCurrentView();
        int pos = lv.pointToPosition((int)e.getX(), (int)e.getY());
        myOnItemClick(pos);
        return false;
    }

    @Override 
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        if (Math.abs(e1.getY() - e2.getY()) > REL_SWIPE_MAX_OFF_PATH) return false;

        if (e1.getX() - e2.getX() > REL_SWIPE_MIN_DISTANCE && 
            Math.abs(velocityX) > REL_SWIPE_THRESHOLD_VELOCITY) { 
            onRTLFling();
            m_objViewFlipper.setInAnimation(m_objAnimationLeftIn);
            m_objViewFlipper.setOutAnimation(m_objAnimationLeftOut);
            m_objViewFlipper.showNext();
        } else if (e2.getX() - e1.getX() > REL_SWIPE_MIN_DISTANCE && 
            Math.abs(velocityX) > REL_SWIPE_THRESHOLD_VELOCITY) { 
            onLTRFling();
            m_objViewFlipper.setInAnimation(m_objAnimationRightOut);
            m_objViewFlipper.setOutAnimation(m_objAnimationRightIn);
            m_objViewFlipper.showPrevious();
        }

        return false; 
    } 
} 
```

**那么，问题又是如何使用一个 Pull-To-Refresh-Listview 来管理多个视图 (6)，其中还包括投掷手势？**

感谢您的时间和帮助！

# database-design - 缩放应用

> ID：10485866
> 
> 赞同：2
> 
> 时间：2012-05-07T16:46:28.367
> 
> 标签：database-design, architecture, cross-platform

我在一个设计大型企业/商业在线项目的团队中。

规范是 100% 的可扩展性，因此我们希望在硬件方面采用云计算。

我们正在构建一个中央平台，其中包含用于外部应用程序/插件等的插件

最终用户当前登录平台并选择该平台必须提供的服务。

我的问题是......如果从 1000 个用户到 100 万个用户，我们将如何扩展数据库，为了可扩展性，当只有 100 个用户时，最好立即拆分数据库？

# java - AVL 平衡树 - 打印最后 10 个节点

> ID：10485872
> 
> 赞同：0
> 
> 时间：2012-05-07T16:47:12.613
> 
> 标签：java, avl-tree

我有一个 BST AVL，用 Java 编写，我需要通过打印最后十个节点来证明它是平衡的。我的 hack-y 解决方案是，知道节点的数量，从有序遍历的最后 10 个节点中获取值。它没有按预期工作。记录与姓氏键一起存储（不保留重复记录），每个节点大小的打印输出结果为 0。我的打印输出主要包含“Z”名称……正如预期的那样，然后它还包含打印输出的第一条记录（26000 条）。我猜测（希望）这是我如何设计打印输出的问题，而不是树中的错误？有没有更优雅的方法来打印最后 10 个节点，不会出现我现在遇到的错误，或者我的树旋转可能存在缺陷？

**InOrder 遍历和输出：（**通过 get 函数访问的输出）

```
public void inOrder(Node x)
{
    if (x == null)
        return; //stops recursion when there is no Node
    inOrder(x.left); //always traverse left first
    inOrder(x.right); //traverse right

    inOrderTraversalOutput += Integer.toString((size(x.left))  + 
(size(x.right))) + "\n"; 

    bstNodes++;
    //total nodes - 17151
    if (bstNodes > 17145)
        lastnodes += x.val.toString() + "Node left size: " + 
size(x.left) + "\n" + "Node right size: " + size(x.right) + 
"\n" + "----------------------------------------------------\n";

}
//modified to print total number of nodes
public String getTraversal()
{
    inOrderTraversalOutput += Integer.toString(bstNodes) + "\n";
    return inOrderTraversalOutput;
} 
```

**put 方法：（**通过传递根节点、键和值的方法调用）

```
private Node put(Node x, Key key, Value val)
{
    if (x == null)
    {
        return new Node(key, val, 0);
    }

    int cmp = key.compareTo(x.key);

    if (cmp < 0)
    {
        x.left = put(x.left, key, val);

        //AVL Balance
        if ((size(x.left) - size(x.right)) >= 2)
            {
                if (x.key.compareTo(x.left.key) < 0)
                {
                    x = rotateWithLeftsapling(x);
                } else
                {
                    x = doubleWithLeftsapling(x);
                }
        }

    } else if (cmp > 0)
    {
        x.right = put(x.right, key, val);

        //AVL Balance
        if ((size(x.right) - size(x.left)) >= 2)
        {
            if (x.key.compareTo(x.right.key) > 0)
            {
                x = rotateWithRightsapling(x);
            } else
            {
                x = doubleWithRightsapling(x);
            }
        }
    } else
    {
        x.val = val;
    }

    x.N = size(x.left) + size(x.right);
    return x;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:04:02.260

看起来您正在执行后订单遍历。要按顺序执行所有“工作”，应该在对 inorder(left) 和 inorder(right) 的调用之间进行。我想如果你解决这个问题，你会没事的。

实际上，您*实际上*是在最后一个根节点上完成工作，所以我希望它能够打印出来。

# sharepoint-2010 - 调试 SharePoint 2010 自定义活动

> ID：10485873
> 
> 赞同：0
> 
> 时间：2012-05-07T16:47:12.883
> 
> 标签：sharepoint-2010, sharepoint-designer, sharepoint-workflow, sharepoint-api

我正在尝试为 SharePoint 2010 构建一个自定义活动以在工作流中使用。在设计器中，我可以在“自定义活动”下的功能区上的“操作”下拉菜单中看到该活动。但是，该元素从未在设计器中实现，我不知道如何调试此问题。

我尝试将 Debugger.Break() 放入事件处理程序中，但这会导致应用程序事件日志中的条目显示`An unhandled exception ('Launch for user') occurred in w3wp.exe [xxxx]. Just-In-Time debugging this exception failed with the following error: Not enough storage is available to complete this operation.`此外，将调试器附加到`w3wp.exe`进程不会在任何断点处停止。

我已经在 SharePoint 2010 内部打开了详细日志记录（并且日志记录非常详细！），但它似乎不包含有关组件的任何信息或设计器未加载组件的原因。

这是这个非常基本的活动的相关代码片段。我在这里做错了什么？

```
using System;
using System.ComponentModel;
using System.Diagnostics;
using System.IO;
using System.Workflow.ComponentModel;
using System.Workflow.Activities;
using Microsoft.SharePoint;
using Microsoft.SharePoint.WorkflowActions;

namespace SharePoint.Activities.IO
{
    public partial class CopyFile : SequenceActivity
    {
        public CopyFile()
        {
            InitializeComponent();
        }

        public static DependencyProperty SourceDirectoryProperty = DependencyProperty.Register("SourceDirectory", typeof(string), typeof(CopyFile));
        public static DependencyProperty TargetDirectoryProperty = DependencyProperty.Register("TargetDirectory", typeof(string), typeof(CopyFile));
        public static DependencyProperty ResultProperty = DependencyProperty.Register("Result", typeof(string), typeof(CopyFile));
        public static DependencyProperty CreateDateProperty = DependencyProperty.Register("CreateDate", typeof(DateTime), typeof(CopyFile));
        public static DependencyProperty CompletionDateProperty = DependencyProperty.Register("CompletionDate", typeof(DateTime), typeof(CopyFile));
        public static DependencyProperty WFContextProperty = DependencyProperty.Register("WFContext", typeof(WorkflowContext), typeof(CopyFile));

        [Description("Path the files to perform the operation on")]
        [Browsable(true)]
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
        public string SourceDirectory
        {
            get { return (string)GetValue(SourceDirectoryProperty); }
            set { SetValue(SourceDirectoryProperty, value); }
        }
        [Description("Path the files are copied to")]
        [Browsable(true)]
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
        public string TargetDirectory
        {
            get { return (string)GetValue(TargetDirectoryProperty); }
            set { SetValue(TargetDirectoryProperty, value); }
        }
        [Description("Once the the operation completes, this is set to OK or the exception information")]
        [Browsable(true)]
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
        public string Result
        {
            get { return (string)GetValue(ResultProperty); }
            set { SetValue(ResultProperty, value); }
        }
        [Description("When the request was created")]
        [Browsable(true)]
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
        public DateTime CreateDate
        {
            get { return (DateTime)GetValue(CreateDateProperty); }
            set { SetValue(CreateDateProperty, value); }
        }
        [Description("When execution stoped")]
        [Browsable(true)]
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
        public DateTime CompletionDateDate
        {
            get { return (DateTime)GetValue(CompletionDateProperty); }
            set { SetValue(CompletionDateProperty, value); }
        }

        [Browsable(true)]
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
        public WorkflowContext WFContext { get { return (WorkflowContext)GetValue(WFContextProperty); } set { SetValue(WFContextProperty, value); } }

        protected override void Initialize(IServiceProvider provider)
        {
            TraceIn();
            base.Initialize(provider);
            TraceOut();
        }

        protected override void Uninitialize(IServiceProvider provider)
        {
            TraceIn();
            base.Uninitialize(provider);
            TraceOut();
        }
        public override string ToString()
        {
            TraceIn();
            var result = base.ToString();
            TraceOut();
            return result;
        }
        public override int GetHashCode()
        {
            TraceIn();
            // ReSharper disable BaseObjectGetHashCodeCallInGetHashCode
            var result = base.GetHashCode();
            // ReSharper restore BaseObjectGetHashCodeCallInGetHashCode
            TraceOut();
            return result;
        }
        public override bool Equals(object obj)
        {
            TraceIn();
            // ReSharper disable BaseObjectEqualsIsObjectEquals
            var result = base.Equals(obj);
            // ReSharper restore BaseObjectEqualsIsObjectEquals
            TraceOut();
            return result;
        }
        //This code causes the compiler to blow up! :)
        //protected override void Dispose(bool disposing)
        //{
        //    TraceIn();
        //    base.Dispose(disposing);
        //}
        protected override void SetBoundValue(ActivityBind bind, object value)
        {
            TraceIn();
            base.SetBoundValue(bind, value);
            TraceOut();
        }
        protected override void OnWorkflowChangesCompleted(ActivityExecutionContext executionContext)
        {
            TraceIn();
            base.OnWorkflowChangesCompleted(executionContext);
            TraceOut();
        }
        protected override void OnSequenceComplete(ActivityExecutionContext executionContext)
        {
            TraceIn();
            base.OnSequenceComplete(executionContext);
            TraceOut();
        }
        protected override void OnListChanging(ActivityCollectionChangeEventArgs e)
        {
            TraceIn();
            base.OnListChanging(e);
            TraceOut();
        }
        protected override void OnListChanged(ActivityCollectionChangeEventArgs e)
        {
            TraceIn();
            base.OnListChanged(e);
            TraceOut();
        }
        protected override void OnClosed(IServiceProvider provider)
        {
            TraceIn();
            base.OnClosed(provider);
            TraceOut();
        }
        protected override void OnActivityExecutionContextUnload(IServiceProvider provider)
        {
            TraceIn();
            base.OnActivityExecutionContextUnload(provider);
            TraceOut();
        }
        protected override void OnActivityExecutionContextLoad(IServiceProvider provider)
        {
            TraceIn();
            base.OnActivityExecutionContextLoad(provider);
            TraceOut();
        }
        protected override void OnActivityChangeRemove(ActivityExecutionContext executionContext, Activity removedActivity)
        {
            TraceIn();
            base.OnActivityChangeRemove(executionContext, removedActivity);
            TraceOut();
        }
        protected override void OnActivityChangeAdd(ActivityExecutionContext executionContext, Activity addedActivity)
        {
            TraceIn();
            base.OnActivityChangeAdd(executionContext, addedActivity);
            TraceOut();
        }
        protected override ActivityExecutionStatus HandleFault(ActivityExecutionContext executionContext, Exception exception)
        {
            TraceIn();
            var result = base.HandleFault(executionContext, exception);
            TraceOut();
            return result;
        }
        protected override object GetBoundValue(ActivityBind bind, Type targetType)
        {
            TraceIn();
            var result = base.GetBoundValue(bind, targetType);
            TraceOut();
            return result;
        }
        protected override ActivityExecutionStatus Cancel(ActivityExecutionContext executionContext)
        {
            TraceIn();
            var result = base.Cancel(executionContext);
            TraceOut();
            return result;
        }
        protected override void InitializeProperties()
        {
            TraceIn();
            base.InitializeProperties();
            TraceOut();
        }
        protected override ActivityExecutionStatus Execute(ActivityExecutionContext executionContext)
        {
            TraceIn();

            var isSiteAdmin = false;
            CreateDate = DateTime.Now;
            try
            {
                // Needs administrative credentials to get the web application properties ino
                SPSecurity.RunWithElevatedPrivileges(delegate
                                                         {
                                                             using (var site = new SPSite(WFContext.Site.ID))
                                                             {
                                                                 using (var web = site.AllWebs[WFContext.Web.ID])
                                                                 {
                                                                     isSiteAdmin = web.CurrentUser.IsSiteAdmin;
                                                                     if (string.IsNullOrEmpty(SourceDirectory)) throw new ArgumentException("SourceDirectory cannot be null or empty");
                                                                     if (!Directory.Exists(SourceDirectory)) throw new DirectoryNotFoundException("Could not find source directory: \"" + SourceDirectory + "\"");

                                                                     if (string.IsNullOrEmpty(TargetDirectory)) throw new ArgumentException("TargetDirectory cannot be null or empty");
                                                                     if (!Directory.Exists(TargetDirectory)) throw new DirectoryNotFoundException("Could not find target directory: \"" + TargetDirectory + "\"");
                                                                     // Do something 

                                                                 }
                                                             }
                                                         });

                Result = "OK";
            }
            catch (Exception ex)
            {
                Result = isSiteAdmin ? ex.ToString() : ex.Message;
            }
            CompletionDateDate = DateTime.Now;

            var result = base.Execute(executionContext);
            TraceOut();
            return result;
        }

        private static void TraceIn()
        {
            Trace("Entering");
        }

        private static void TraceOut()
        {
            Trace("Exiting");
        }

        private static void Trace(string direction)
        {
            Debugger.Launch();
            var stackTrace = new StackTrace(2, false);
            var frame = stackTrace.GetFrame(0);
            Debug.WriteLine(direction + " " + frame.GetMethod().Name);
        }
    }
} 
```

借助内置的跟踪，每当我尝试将活动添加到设计器中的工作流时，我都会看到对 GetHashCode() 和 Equals() 的调用，而没有其他任何内容。

这是它的 .actions 文件。

```
<?xml version="1.0" encoding="utf-8" ?>
<WorkflowInfo>
    <Actions
        Sequential="then"
        Parallel="and">
        <Action
            Name="IO Activities"
            ClassName="SharePoint.Activities.IO"
            Assembly="SharePoint.Activities.IO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=abfb622251cf6982"
            Category="Custom Actions"
            AppliesTo="all">
            <RuleDesigner
                Sentence="CopyFile %1">
                <FieldBind
                    Field="SourceDirectory,TargetDirectory,Result,CreateDate,CompletionDate"
                    Text="Copy the files"
                    DesignerType="CopyFile"
                    Id="1"/>
            </RuleDesigner>
            <Parameters>
                <Parameter
                    Name="SourceDirectory"
                    Type="System.String, mscorlib"
                    Direction="In"
                    DesignerType="StringBuilder"
                    Description="Directory where the source files are to move" />
                <Parameter
                    Name="TargetDirectory"
                    Type="System.String, mscorlib"
                    Direction="In"
                    DesignerType="StringBuilder"
                    Description="Directory where the files will be placed" />
                <Parameter
                    Name="Result"
                    Type="System.String, mscorlib"
                    Direction="Out" />
                <Parameter
                    Name="CreateDate"
                    Type="System.DateTime, mscorlib"
                    Direction="Out" />
                <Parameter
                    Name="CompletionDate"
                    Type="System.DateTime, mscorlib"
                    Direction="Out" />

                <Parameter 
                    Name="WFContext" 
                    Type="Microsoft.SharePoint.WorkflowActions.WorkflowContext, Microsoft.SharePoint.WorkflowActions" 
                    Direction="In" 
                    DesignerType="Hide" />
            </Parameters>
        </Action>
    </Actions>
</WorkflowInfo> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:49:28.187

我们从来没有找到调试问题的方法，而且似乎 SharePoint 只是默默地失败了。

事实证明，失败的原因很简单，而且相当尴尬。

```
<Action
    Name="IO Activities"
    ClassName="SharePoint.Activities.IO"
    Assembly="SharePoint.Activities.IO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=abfb622251cf6982"
    Category="Custom Actions"
    AppliesTo="all"> 
```

感兴趣的是`ClassName="SharePoint.Activities.IO"`. 那缺少什么？实际的类名。它应该是`ClassName="SharePoint.Activities.IO.FileCopy"`. 在完成并确保 web.config 和 .actions 文件中项目的类名正确之后，该操作现在加载并在设计器中呈现。

# c# - 如何编译 libmpg123 以在 Mono for Android 项目中使用

> ID：10485881
> 
> 赞同：0
> 
> 时间：2012-05-07T16:48:29.963
> 
> 标签：c#, mono, shared-libraries, xamarin.android, mfcc

我是 Mono for Android 开发的新手，但它似乎是我项目框架的最佳选择。我正在开发的应用程序需要非常快速的音频处理：

*   将 mp3 文件转换为 PCM
*   应用 FFT
*   提取文件的 MFCC
*   做进一步的计算

由于 mp3 解码器在频域中工作，因此在解码器中进行重新合成之前，很容易提取 MFCC，因此无需对 PCM 信号应用 FFT。所以我修改了mpg123 layer3.c文件，得到了mp3文件帧的原始数据。

现在我想在我的单声道项目中使用这个修改后的库。我如何编译（ARM 的交叉编译）它以及如何从那里使用它？

# css - 垂直文本在相对 div 中对齐

> ID：10485883
> 
> 赞同：1
> 
> 时间：2012-05-07T16:48:36.500
> 
> 标签：css, vertical-alignment, css-position

我有一个 div 位置：相对；包含在具有固定宽度的 div 中。在其中（具有相对位置的 div）有一些文本。问题是我需要将它垂直居中，在某些情况下，文本由一行组成，在其他情况下由两行组成。我的CSS代码是这样的：

```
.rollover{
position: relative;
width: auto;
background-color: #000;
opacity: 0.5;
height: 40px;
overflow: hidden;
padding-left: 10px;
}

.rollover a{
font-family: lucida;
font-size: 10px;
color: #FFF;
display: block;
line-height: 11px;
float: left;
text-decoration: none;
} 
```

我的html代码是：

```
<div class="rollover">
    <a href="">ONE LINE TEXT</a>
</div> 
```

或者

```
<div class="rollover">
    <a href="">FIRST LINE<br/>SECOND LINE</a>
</div> 
```

我能怎么做？

谢谢， 马蒂亚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:38:45.663

最近遇到了这个问题，我想出的解决方案（如果你必须在不能使用的情况下这样做`display:table-cell`）是添加一点标记并使用该`line-height`属性。

`line-height`当只有一行时，单独在外部 div 上工作正常。当您面对可能是多行的东西时，解决方案是使用两行高度。

使用的标记如下：

```
<div class="rollover">
    <span>
         <a href="">ONE LINE TEXT</a>
    </span>
</div>
<div class="rollover">
    <span>
         <a href="">FIRST LINE<br/>SECOND LINE</a>
    </span>
</div>​ 
```

注意添加的`<span>`.

诀窍是跨度将是具有行`40px`高的行（继承自`rollover`div）。它也将具有 float 属性。因为使用浮动元素，您不能使用`vertical-align`. 在该范围内，我们的链接将具有 11 像素的行高和垂直对齐中间。那是跨度的中间。它就在那里。

所需的css如下：

```
.rollover{
    position: relative;
    width: auto;
    background-color: #000;
    opacity: 0.5;
    height: 40px;
    overflow: hidden;
    padding-left: 10px;
    line-height:40px;
}

.rollover span{
    float: left;
}
.rollover a{
    font-family: lucida;
    font-size: 10px;
    color: #FFF;
    line-height: 11px;
    text-decoration: none;
    vertical-align:middle;
    display:inline-block;    
} 
```

请注意，我将 a 的显示从 更改`block`为`inline-block`，否则为 no `vertical-align`。

和一个小小提琴来展示它： http: [//jsfiddle.net/r5RFx/](http://jsfiddle.net/r5RFx/)（我添加了一些边框来查看页面上的块）

# android - Android Map Activity 在 Honeycomb 上加班变慢

> ID：10485884
> 
> 赞同：0
> 
> 时间：2012-05-07T16:48:48.603
> 
> 标签：android, performance, google-maps, android-3.0-honeycomb, slowdown

我正在实现一个 MapFragemt（使用对兼容性支持库的破解，使所有 FragmentActivities MapActivities）。Activity 会在地图 (0-30) 和用户当前位置上显示一些叠加层。该活动包含片段（地图）和操作栏。在片段中，我使用 MyLocationOverlay 和 LocationManager 来获取用户位置。问题是如果长时间保持打开状态，Activity 会变得非常缓慢且无响应（5-10 响应按钮按下、滚动等）。

我的应用程序的手机版本使用了几乎相同的代码（相同的片段和几乎相同的活动），并且手机上不会出现问题。一开始我以为可能是内存泄漏，但是做内存分析一直没能发现问题。此外，该应用程序使用的内存量似乎与加班时间大致相同。我正在测试 Honeycomb 3.2。它不会发生在手机的 ICS 上（我没有在 ICS 平板电脑上测试过）。

有人遇到过这个问题吗？？我没有发布代码，因为我真的不知道从哪里开始。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T00:26:31.543

我有同样的问题。

我在捆绑包中使用了一个可包裹物将叠加项目数据传递给我的地图片段。parcelable 使用的是 writeSerializable，由于开销，文档警告不要使用它。

检查您是否删除了叠加层以提高性能。如果是这样，这可能是您对支持数据集所做的事情。

# ruby - 在 win7 x86 机器上安装 capybara-webkit 时出错

> ID：10485885
> 
> 赞同：1
> 
> 时间：2012-05-07T16:48:53.173
> 
> 标签：ruby, installation, capybara-webkit

我在安装 capybara-webkit 时遇到问题。当我尝试 **gem install capybara-webkit**时，会发生以下错误

错误：安装 capybara-webkit 时出错：错误：无法构建 gem 原生扩展。C:/Ruby193/bin/ruby.exe extconf.rb

ruby v 1.9.3 p194，qt 4.7.4（也尝试使用 4.8）

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:01:30.447

尝试将 Qt 的 bin 目录添加到路径中。并且不要忘记安装[QT 4.7 OpenSource 版本](http://qt.nokia.com/downloads/windows-cpp)（支持 mingw32）。如果不这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:58:56.750

最后，我通过从 github 下载最新源并手动编译 gem 来修复它。

# c# - 使用 httpcontext 打开附件

> ID：10485887
> 
> 赞同：2
> 
> 时间：2012-05-07T16:49:09.727
> 
> 标签：c#, asp.net, .net, attachment, httpcontext

我有一个附件，其数据（类型为 varbinary）和 MIME 类型来自数据库。当用户单击链接时，我获取数据并将其写入 HttpContext.Response.BinaryWrite。目前，我让用户强制下载附件

```
r.AddHeader("Content-Disposition", "attachment; filename=" + a.FileName); 
```

相反，我想打开文件，我试过了

```
r.AddHeader("Content-Disposition", "inline; filename=" + a.FileName); 
```

但是，这只会打开图像文件，所有其他类型的附件都会自动下载。我如何让这些文件也显示出来？如果这些无法显示，我希望 Windows 通过显示“打开方式”对话框来处理它。

在我发布的**[这个](https://stackoverflow.com/questions/10340213/open-a-file-when-it-downloads-with-httpcontext)问题**中，有人说我可以渲染文件的 html 视图，我不确定如何做到这一点。我正在使用带有 C# 的 .NET 环境。

对此的任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:29:33.683

你可以试试

```
r.ContentType = "application/force-download" 
```

# php - 查询不同表中父类别下的项目计数

> ID：10485888
> 
> 赞同：0
> 
> 时间：2012-05-07T16:49:10.993
> 
> 标签：php, mysql

我有 stockcards 和 stockcategories 表。

我想显示类别并显示在此类别下打开了多少张股票卡。

```
SELECT a.stockCatID, a.stockCatName, f.nProductsInside 
FROM stockcategories a 
LEFT JOIN 
        (
            SELECT COUNT(b.stockID) AS nProductsInside 
            FROM stockcards b 
        ) 
        f ON a.stockCatID = f.stockCatID 
```

好吧，它返回`#1054 - Unknown column 'f.stockCatID' in 'on clause'` 显然我犯了一个错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:52:07.143

尝试类似的东西：

```
SELECT a.stockCatID, a.stockCatName, COUNT(b.stockID) AS nProductsInside
FROM stockcategories a 
LEFT JOIN stockcards b ON a.stockCatID = b.stockCatID
GROUP BY a.id 
```

表`a.id`中的主键在哪里`stockcategories`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:52:10.950

```
SELECT a.stockCatID, a.stockCatName, COUNT(b.stockID) as nProductsInside 
FROM stockcategories a 
LEFT JOIN stockcards b ON a.stockCatID = b.stockCatID 
group by a.stockCatID 
```

你也可以这样做（未经验证）你为了坚持你的查询

```
SELECT a.stockCatID, a.stockCatName, f.nProductsInside 
FROM stockcategories a 
LEFT JOIN 
(
    SELECT COUNT(b.stockID) AS nProductsInside, stockCatID
    FROM stockcards b 
) 
f ON a.stockCatID = f.stockCatID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:56:38.990

f 是 SELECT COUNT(b.stockID)... 结果的别名，所以 f 没有列

# python - 需要范围分配的数组类型

> ID：10485892
> 
> 赞同：1
> 
> 时间：2012-05-07T16:49:25.017
> 
> 标签：python, multidimensional-array, numpy, python-3.x

在 NumPy 中，可以将整个数组段`:`作为索引范围的通配符进行分配。例如：

```
>>> (n, m) = (5,5)
>>> a = numpy.array([[0 for i in range(m)] for j in range(n)])
>>> a
array([[0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0]])

>>> for i in range(n):
...     a[i, :] = [1 for j in range(m)]
>>> a
array([[1, 1, 1, 1, 1],
       [1, 1, 1, 1, 1],
       [1, 1, 1, 1, 1],
       [1, 1, 1, 1, 1],
       [1, 1, 1, 1, 1]]) 
```

但是，`numpy.array`仅保存数字数据。我需要一个可以容纳任意对象并且可以像 NumPy 数组一样寻址的数组类型。我应该使用什么？

编辑：我想要这个范围分配语法的完全灵活性，例如这也应该工作：

```
>>> a[:,1] = 42
>>> a
array([[ 1, 42,  1,  1,  1],
       [ 1, 42,  1,  1,  1],
       [ 1, 42,  1,  1,  1],
       [ 1, 42,  1,  1,  1],
       [ 1, 42,  1,  1,  1]]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:59:34.853

如果 numpy 不能满足您的需求，标准 Python 列表将：

```
>>> (n, m) = (5,5)
>>> 
>>> class Something:
...     def __repr__(self):
...         return("Something()")
... 
>>> class SomethingElse:
...     def __repr__(self):
...         return("SomethingElse()")
... 
>>> a = [[Something() for i in range(m)] for j in range(n)]
>>> 
>>> for i in range(n):
...     a[i] = [SomethingElse() for j in range(m)] #Use a[i][:] if you want to modify the sublist, not replace it.
... 
>>> a
[[SomethingElse(), SomethingElse(), SomethingElse(), SomethingElse(), SomethingElse()],
[SomethingElse(), SomethingElse(), SomethingElse(), SomethingElse(), SomethingElse()],
[SomethingElse(), SomethingElse(), SomethingElse(), SomethingElse(), SomethingElse()],
[SomethingElse(), SomethingElse(), SomethingElse(), SomethingElse(), SomethingElse()],
[SomethingElse(), SomethingElse(), SomethingElse(), SomethingElse(), SomethingElse()]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:54:32.783

也许我在这里遗漏了一些东西，但 numpy 实际上确实保存了对象和数字。

```
In [1]: import numpy

In [2]: complex = {'field' : 'attribute'}

In [3]: class ReallyComplex(dict):
   ...:     pass
   ...: 

In [4]: a = numpy.array([complex,ReallyComplex(),0,'this is a string'])

In [5]: a
Out[5]: array([{'field': 'attribute'}, {}, 0, this is a string], dtype=object)
In [6]: subsection = a[2:]

In [7]: subsection
Out[7]: array([0, this is a string], dtype=object) 
```

当您将复杂的对象放入一个 numpy 数组时，`dtype`会变成`object`. 您可以像使用普通 numpy 数组一样访问数组的成员和切片。我不熟悉序列化，但您可能会在该领域遇到缺点。

如果您确信 numpys 不是采用标准 Python 列表的方法，那么标准 Python 列表是维护对象集合的好方法，您也可以将 Python 列表切片为与 numpy 数组非常相似。

```
 std_list = ['this is a string', 0, {'field' : 'attribute'}]
 std_list[2:] 
```

# android - 为什么我不能从 Parcelable.writeToParcel(Parcel, int) 中抛出 IOException？

> ID：10485895
> 
> 赞同：0
> 
> 时间：2012-05-07T16:49:41.677
> 
> 标签：android, ioexception, parcelable

```
public void writeToParcel(Parcel parcel, int flags) throws IOException {
   doSomethingThatThrowsIOException();
} 
```

Quoth编译器：

> 异常 IOException 与 Parcelable.writeToParcel(Parcel, int) 中的 throws 子句不兼容

`Parcelable`我在文档或实际代码中的任何地方都没有看到 throws 子句。这是一个讨厌的线程问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:55:17.540

`Parcelable.writeToParcel(Parcel, int)`in`Parcelable`不会抛出 IOException。所以如果你扩展类并定义你自己的`writeToParcel(Parcel, int)`，它就不能抛出一个不在父类中的检查异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T16:55:51.120

“writeToParcel”方法被父类覆盖：Parcel。当你重写一个方法时，你不能改变原始方法的签名和 throws 子句。

这两个选项是：将引发 IOException 的内容外部化或在 try-catch 块中处理异常...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T16:55:44.217

这就是确切的问题，IOException 是一个检查异常，必须重新抛出或捕获。如果`super`不抛出这个异常，你也不能。

来自[JLS](http://docs.oracle.com/javase/specs/jls/se5.0/html/exceptions.html) §11.2：

> throws 子句中命名的检查异常类是方法或构造函数的实现者和用户之间契约的一部分。覆盖方法的 throws 子句可能不会指定此方法将导致抛出任何已检查的异常，而覆盖方法的 throws 子句不允许抛出该异常。当涉及接口时，一个以上的方法声明可能会被一个覆盖声明覆盖。在这种情况下，覆盖声明必须具有与所有覆盖声明兼容的 throws 子句（第 9.4 节）。

# ruby-on-rails - Ruby on Rails：多重多态关联

> ID：10485896
> 
> 赞同：0
> 
> 时间：2012-05-07T16:49:47.493
> 
> 标签：ruby-on-rails, database, project-management, polymorphism, polymorphic-associations

是否可以有多个多态关联？我解释得更好：

1.  我有**不同类型**的用户：simple_user、society、collaborator、admin，它们在 db 字段和应用程序授权方面是不同的。
2.  每个用户都可以**请求**某些东西
3.  请求可以针对**不同的服务**：翻译、咨询等

我正在考虑为每项服务提供一张桌子：翻译，咨询，其中：

```
has_one :request, :as => requestable 
```

然后只有一个表请求，其中：

```
belongs_to :requestable, :polymorphic => true 
```

但是是否可以**向用户表**添加另一个多态关联？我怎样才能更好地处理这种关系？感谢您的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:04:03.047

是的，您可以定义多个多态关联。他们都将使用自己的数据库列。

在表中创建两列`user_type`并定义此关联：`user_id``requests`

```
belongs_to :user, :polymorphic => true 
```

然后你应该能够将 a 分配`Collaborator`给 a `Request`：

```
Request.create!(:user => Collaborator.first) 
```

# php - 出口 Prestashop 产品

> ID：10485897
> 
> 赞同：0
> 
> 时间：2012-05-07T16:49:54.440
> 
> 标签：php, sql, prestashop

我需要将 Prestashop 中的所有产品导出到 Excel 文件。我构建了模块以将其导出到 Excel 文件。但是我使用的 SQL 查询缺少一些字段。有没有人可以帮助我从数据库中获取以下字段？

```
ID, TITLE, Quantity, Out of Stock, Quantity(min), Price, Date Added,
Last Modified Date, (plus all feature values) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:54:17.903

这是您所追求的格式 - 您需要修改和更改字段（在 phpmyadmin 中查看您的数据库或类似内容以获取列标题/表格）以获得您所追求的内容：

```
SELECT p.`id_product`, price, `name`, `description`, `link_rewrite`
FROM `ps_product` as p
LEFT JOIN `ps_product_lang` pl ON (pl.`id_product` = p.`id_product`) 
WHERE pl.`id_lang`= 1 GROUP BY p.`id_product`'; 
```

# mvvm-light - 没有安装 NuGet v4.1.21 的 MVVM Light 模板或片段

> ID：10485898
> 
> 赞同：1
> 
> 时间：2012-05-07T16:49:54.830
> 
> 标签：mvvm-light

我正在使用 Visual Studio 2010 Professional SP1

我之前使用 v4.0.0.19 MSI 安装程序安装了 MVVM Light，非常喜欢它。随着 v4.1.21 的发布，我决定切换到 NuGet，因此我卸载了旧版本并使用 NuGet 安装了更新的（完整）版本。我不再拥有 MVVM Light 模板或片段。

获得模板和片段的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T01:16:56.590

Nuget 只会在您的项目中添加对 MVVMLight 的引用；它不会对您的 Visual Studio 安装进行任何更改。

# c# - 是否可以在 Windows Phone 中将 PPT 转换为图像？

> ID：10485900
> 
> 赞同：0
> 
> 时间：2012-05-07T16:50:00.490
> 
> 标签：c#, .net, windows-phone-7, com, powerpoint

我尝试了 PIA，直到我了解到它们介于 .net 和 COM 对象之间，所以除非你安装了办公室，否则这是不可能的（这在 WP 上当然是不可能的）。有没有其他方法可以做到这一点？如果目前没有，未来的前景如何？

更新。不幸的是，我必须在没有服务的情况下这样做=（（不过，谢谢您的回答

更新2。顺便说一句，我也想知道为什么“没有合理的方法”？我的意思是有 PDF 转换器库（例如 C1 ），但没有 Office 转换器库。这么说的障碍是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T21:03:20.477

认为没有合理的方法可以在 Windows Phone 上转换 Ppt/Pptx。

最好的方法是在您的系统架构中。移动设备适用于客户端应用程序。因此，您需要客户端和服务器。服务器将负责将 ppt/pptx 转换为图像，客户端将让您下载或查看这些图像，例如 Evernote、Dropbox 等。更好的是，除了移动客户端和服务器应用程序，还有网页或桌面客户端，让用户可以从桌面上传 ppt/pptx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T21:17:25.403

使用 SketchFlow ( [http://www.microsoft.com/expression/products/SketchFlow_Overview.aspx](http://www.microsoft.com/expression/products/SketchFlow_Overview.aspx) ) 并导入您的 PPT，它可以从 PPT 中创建 XAML。您可以在您的应用程序中使用 XAML。

# android - 使用 Roboto 薄或浓缩

> ID：10485902
> 
> 赞同：11
> 
> 时间：2012-05-07T16:50:06.467
> 
> 标签：android, android-fonts

是否可以在 ICS 中使用[Roboto 薄或浓缩样式](https://dl-ssl.google.com/android/design/Roboto_Specimen_Book_20111129.pdf)而不必包含 .ttf 并手动加载它，我的意思是**不**使用：

```
Typeface.createFromAsset(this.getAssets(),"fonts/DroidSerif-Bold.ttf"); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-07T17:04:15.723

早于 4.1 的 Android 版本仅包含四种基本的 Roboto 样式：Regular、**Bold**、*Italic*和***BoldItalic***。在没有资产的情况下，无法在 ICS 中使用精简或精简样式。

Android 4.1 ( [JellyBean, API16](https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels) ) 及更高版本[包括更多 Roboto 样式](http://developer.android.com/about/versions/android-4.1.html#Fonts)：

*   常规的
*   斜体
*   胆大
*   加粗斜体
*   光
*   浅斜体
*   浓缩正则
*   浓缩斜体
*   浓缩粗体
*   浓缩粗斜体

# c# - 正则表达式从分隔符之间的字符串中提取值

> ID：10485903
> 
> 赞同：1
> 
> 时间：2012-05-07T16:50:54.687
> 
> 标签：c#, regex, string

我有一个大字符串，我需要从中提取字符串值。字符串值位于分隔符之间

```
category = ' 
```

和

```
'; 
```

这是我的正则表达式，但我需要避免输出分隔符。

```
String productCategory = Regex.Match(html, @"category = '(.*?)';").Value; 
```

这是示例 `category = 'Video Cards';`

我需要提取 `Video Cards`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:56:55.223

您可以使用前瞻和后向运算符，因此您最终会得到如下内容：

```
string pattern = @"(?<=category = ').*(?=';)";
string productCategory = Regex.Match(html, pattern ).Value; 
```

还值得一提的是，[用正则表达式解析 HTML 是个坏主意](https://stackoverflow.com/a/1732454/1159478)。您应该使用 HTML 解析器来解析 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:59:09.470

您是否考虑过使用该`MatchObj.Groups`物业？[如果您在像Derek Slager's](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx "德里克·斯莱格")这样的测试站点测试您当前的正则表达式，您会注意到您想要的正是第一个组。您应该能够简单地调用第一个组并获得所需的内容。

```
productCategory.Groups[0].Value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:57:13.647

您要提取组：

```
String productCategory = Regex.Match(html, @"category = '(.*?)';").Groups[1].Value; 
```

# c# - 从 C# 在 Oracle 数据库中输入日期参数 的正确格式是什么

> ID：10485904
> 
> 赞同：2
> 
> 时间：2012-05-07T16:51:09.813
> 
> 标签：c#, oracle, stored-procedures, ora-06550

这是我收到的错误消息

```
ORA-06550: line 1, column 15:
PLS-00306: wrong number or types of arguments in call to 'OBPL_SU_PLAN_UPDATE_PLAN_DTLS'
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

代码：

```
OracleCommand cmd = new OracleCommand();
cmd.Connection = conn;
cmd.CommandText = "CWPCDS.OBPL_SU_PROCESS_PKG.OBPL_SU_PLAN_UPDATE_PLAN_DTLS";
cmd.CommandType = CommandType.StoredProcedure;
cmd.Parameters.Add("P_PLAN_DETAIL_ID", OracleDbType.Int32).Value = detailId; 
cmd.Parameters.Add("P_PLAN_USER_DETAIL_ID", OracleDbType.Int32).Value = null; 
cmd.Parameters.Add("P_TRANSACTION_PLAN", OracleDbType.NVarchar2, 20).Value = null;
cmd.Parameters.Add("P_PLAN_REV_ID", OracleDbType.Int64).Value = planRev;                   
cmd.Parameters.Add("P_TRANSACTION_TYPE", OracleDbType.NVarchar2, 20).Value = transType;
cmd.Parameters.Add("P_PLAN_STATUS", OracleDbType.NVarchar2, 30).Value = status;  
cmd.Parameters.Add("P_DOC_ISSUE_DATE", OracleDbType.Date).Value = pid;
cmd.Parameters.Add("P_EST_OBLG_DATE", OracleDbType.Date).Value = eod;
cmd.Parameters.Add("P_AMT_TO_APPLY", OracleDbType.Int32).Value = amtApply;
cmd.Parameters.Add("P_WBS", OracleDbType.NVarchar2, 20).Value = wbs;
cmd.Parameters.Add("P_AMT1_TO_APPLY", OracleDbType.Int32).Value = 0;
cmd.Parameters.Add("P_AMT2_TO_APPLY", OracleDbType.Int32).Value = 0;
cmd.Parameters.Add("P_UPDATE_USER", OracleDbType.NVarchar2, 50).Value =
user;             
cmd.Parameters.Add("P_DESC_WORK", OracleDbType.NVarchar2, 50).Value = dow;
cmd.Parameters.Add("P_RET_CODE", OracleDbType.Int32).Direction =
ParameterDirection.Output;
cmd.Parameters.Add("P_RET_MSG", OracleDbType.Varchar2, 50).Direction =
ParameterDirection.ReturnValue;
cmd.ExecuteNonQuery(); 
```

我可以从 Toad 运行该程序而不会出现任何错误，Toad 中的日期格式是“05-MAY-2012”。如果我尝试在代码隐藏中的日期值中添加一个单独的 qoute，则会收到“字符文字中的字符过多”错误。非常感谢任何帮助或指导！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:57:21.883

我建议添加一个 DateTime .Net 值（变量），然后将参数分配给变量。这将为您处理转换。

```
DateTime dt = new DateTime(2012, 5, 7, 12, 23, 22, 0);
cmd.Parameters.Add(dt.ToString("dd-MMM-yyyy"), OracleDbType.Date).Value = dt; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:52:59.317

您可以使用：

[OracleCommandBuilder.DeriveParameters 方法](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oraclecommandbuilder.deriveparameters.aspx)

猜测每个参数所需的数据类型和名称。一旦你知道了，你就可以相应地修改你的方法。

有时您会收到错误，因为您决定使用的类型不是数据库所期望的类型（即对于 C# DateTime，可能有 TimeStamp、Date、SmallDate... 取决于 DB 类型。使用错误的参数类型可以导致错误或截断数据）。

切勿尝试将值作为字符串传递。将它们作为相应的 C# 类型传递。即传递日期，传递一个 DateTime 对象。该程序将注意将其转换为数据库可以理解的格式。如果您传递一个字符串，除非它是通用格式，否则如果您更改数据库配置，即默认语言，您可能会遇到麻烦。这就是为什么最好让系统处理转换细节的原因。它总是会以正确的方式进行。

# php - 检查数组是否包含其他数组的所有元素？

> ID：10485905
> 
> 赞同：4
> 
> 时间：2012-05-07T16:51:26.093
> 
> 标签：php

我有 2 个数组，第二个数组必须包含第一个数组中的所有元素，如何检查？谢谢

```
For example

array 1: Array ( [0] => Email [1] => 1_Name )
array 2:  Array ( [0] => 1_Name [1] => ) 

In this case it is invalid , as array 2 do not have Email

array 1: Array ( [0] => Email [1] => 1_Name )
array 2:  Array ( [0] => 1_Name [1] => Address [2]=> Email )

 In this case it is valid 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T16:55:22.173

使用[`array_intersect()`](http://us3.php.net/manual/en/function.array-intersect.php)并测试其输出的长度是否相同：

```
if (count(array_intersect($arr1, $arr2)) === count($arr1)) {
  // contains all
} 
```

对于键也必须匹配的关联数组，请[`array_intersect_assoc()`](http://us3.php.net/manual/en/function.array-intersect-assoc.php)改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T16:56:47.093

[`array_diff`](http://php.net/array-diff)在这里很有用。

```
if( array_diff($array1,$array2)) {
    // array1 contains elements that are not in array2
    echo "invalid";
}
else {
    // all elements of array1 are in array2
    echo "valid";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T16:55:24.953

```
$invalid = false;
foreach ($array1 as $key => $value) {
    if (!array_key_exists($key, $array2)) {
        $invalid = true;
        break;
    }
}
var_dump($invalid); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T16:57:07.087

`array_intersect()`就像@Michael建议的那样。如果您想知道缺少哪个元素，可以使用`array_diff()`.

# visual-studio-2010 - 来自 Windows Azure 辅助角色的 IntelliTrace 日志不起作用

> ID：10485911
> 
> 赞同：1
> 
> 时间：2012-05-07T16:51:43.970
> 
> 标签：visual-studio-2010, azure, load-testing, intellitrace

我一直在尝试使用 IntelliTrace 监控我的工人角色，特别是在我们承受高负载的时候。

当我尝试使用 Visual Studio 下载日志时，我得到：

> 无法打开 IntelliTrace 日志。错误信息：系统错误。

其他时候，当下载日志文件时，会产生另一个错误：无法完成操作。

我已经下载了[IntelliTraceReader](http://archive.msdn.microsoft.com/iTraceReader)并在调试时指出日志文件本身存在问题，并声明：

> 已添加具有相同密钥的项目

我看到关于 SO 的[帖子](https://stackoverflow.com/questions/3569070/intellitracefile-throwing-strange-error)指出这可能是一个已知问题，但是，我不确定如何解决它。还有比这更进一步的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:27:44.480

我建议通过 Microsoft 支持创建一个案例：

[https://support.microsoft.com/oas/default.aspx?&c1=501&gprid=14928&&st=1&wfxredirect=1&sd=gn](https://support.microsoft.com/oas/default.aspx?&c1=501&gprid=14928&&st=1&wfxredirect=1&sd=gn)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T23:48:02.230

这是不支持的操作，实际上与 Visual Studio 的 EULA 冲突。我认为您不会从 MSFT 得到任何不同的答案。

以下是 EULA 的引述：

> 不能使用 IntelliTrace DDA 和/或 IntelliTrace.exe：
> 
> *   在生产环境中的设备或服务器上。
>     
>     
> *   出于系统或应用程序监控的目的。
>     
>     
> *   在非交互式场景中，而不是作为自动化测试或调试数据收集会话的一部分。

完整的 EULA 在[这里](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=5&ved=0CIoBEBYwBA&url=http://www.micromail.com/files/admin/uploads/W285_Field_2_55626.pdf&ei=Z12oT-yAK4zN4QTYmIiVCQ&usg=AFQjCNE5Go7haLO0oDFSOTDoOvVz0xIVrA&sig2=tB2oLfMs53ygxWqdz4DMSg)。

我建议您最好对您的应用程序进行密切监视。或者使用市场上任何可用的性能监控应用程序。如[NewRelic](http://www.newrelic.com)、[AzureWatch](http://www.paraleap.com/AzureWatch)等。

# xna - 在游戏中随机化 AI 寻路

> ID：10485913
> 
> 赞同：0
> 
> 时间：2012-05-07T16:51:45.570
> 
> 标签：xna, path-finding

我是一名 C# 老手，以前从未玩过游戏。为了拓宽我的视野，我开始自学基本的 XNA 东西，试图制作一个简单的 2D 迷宫类型游戏，其中涉及一些典型的敌人射击。我的问题涉及多个敌人的寻路。

考虑一个典型的例子：吃豆子。

当你在吃豆人游戏中开始一轮时，幽灵会从盒子里出来，走上不同的看似随机的路径，但有一个例外——它们的权重是寻找玩家的当前位置。我以为我可以在玩家每次移动时重新计算每个敌人的路径以达到类似的效果，但我不希望敌人过多地重叠路径，所以我需要随机扭曲每个计算出的路径以赋予一定程度的独特性敌人。对此有标准方法吗？

我想我可以把它看作每个敌人本身就是一个障碍，因此没有敌人的路径可能涉及与另一个敌人相撞的路线。在没有新路径可以让玩家自由奔跑的情况下，我会让敌人继续其现有路径，直到找到可行路径或碰撞改变当前路径。这可能就足够了，但我是否过于简化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:40:02.910

也许您发现潜在领域方法很有用......

[http://aigamedev.com/open/tutorials/potential-fields/](http://aigamedev.com/open/tutorials/potential-fields/)

每个敌人都有一个正势场，玩家有一个负势场，如果你填满地图，你可以得到一个敌人不会因为相同的符号电荷重叠太多......当然算法很重要...... .但也许可以帮助你。

![在此处输入图像描述](../Images/6c7d866b019b7866ec0b5e03e1306927.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:01:54.767

有趣的想法，但它可能 - 对于简单的 Packman 示例 - 导致一些敌人无法找到路径。例如，如果 packman 在右下角，他只能向北或向西走。如果每条路径上都有一个敌人，那么其他敌人就找不到通往他的路径，并且会冻结或漫无目的地游荡。

也许给敌人一个比游戏中真正的障碍物更低的“重量”可以让他们仍然找到一条路径，并提供一个非常令人满意的时刻，当packman吃掉一个能量丸并且有几个鬼连续吞噬时向上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:44:44.203

我会用概率接近它..

也许像如果 A 路走 20 步，B 路走 30 步，那么怪物将在 60% 的时间内走 A 路，40% 走 B 路。然后添加某种规则，确保怪物总是会选择一条特定的路线，如果这条路线的可能性比另一条高 20% 以上。

这将创造一个场景，如果怪物足够近，它们总是走最近的路，在开阔区域采取不同的类似方式，并采取不同的方式，在远距离上花费几乎一样长的时间......

那么您需要添加一些方法来过滤掉最奇怪的行为，以消除无故改变方向的想法，并将实际数字配置到公式中:)（顺便说一句，这不是经过测试，只是推测）..

# javascript - HTML 表格在 TD 之间移动鼠标时触发 mouseOut

> ID：10485914
> 
> 赞同：3
> 
> 时间：2012-05-07T16:51:49.120
> 
> 标签：javascript, jquery, html

我在桌子上设置了 mouseOut 事件处理程序，但是如果我将鼠标移到 TD 上，则会触发该事件。如何防止TD之间的表格闪烁？ [http://jsfiddle.net/2ZRBx/](http://jsfiddle.net/2ZRBx/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T16:55:06.293

由于您使用的是 jQuery，我将删除内联 JavaScript 并执行以下操作：

```
function go2() {
    $("#t").effect("pulsate", {
        times: 1
    }, 200);
}
$('#t').mouseleave(function() {
    go2();
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/2ZRBx/2/)**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T16:58:15.417

使用 jQuery Event API 而不是您现在使用的内联事件触发。如果您使用 jQuery API，它可以正常工作。由于您使用的是 jQuery1.7.1：

```
jQuery(function($) {
    $("#t").on('mouseleave', function() {
        $(this).effect("pulsate", { times:1}, 200);
    });
}​);​ 
```

示例：http: [//jsfiddle.net/2ZRBx/6/](http://jsfiddle.net/2ZRBx/6/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T16:54:24.740

将表格包装在一个 div 中，然后将 mouseout 事件放在该 div 上。

# django - Django request.Get 将变量传递到下一页

> ID：10485918
> 
> 赞同：-3
> 
> 时间：2012-05-07T16:52:14.377
> 
> 标签：django, django-forms, django-views

我有一个关于请求的基本问题。进入 Django。我在下面给出了我的表格声明

现在，我需要将 v.position 传递到下一页。如果我的 v.position 已填充，如何验证 request.get

例如：- 下面的代码是否正确？

volpostion = request.GET['志愿者职位'].strip()

如果 volposition 执行所需的功能。

我读了那个请求。Get 得到一个表单字段的字典。这里的表单字段是指标签名称？

表格.py

```
<tr>
        <th colspan=4 align="left"><label for="id_Volposition">Volunteer Position:</label></th>
        <th colspan=.5 align="left"><a href="/signups/new/{{ v.position }}" class="username" <u>{{ v.volposition }}</u></a></th>
<tr> <td colspan="2" height="2" style="display:none">&nbsp;</td> </tr>
</tr>

<tr>
        <th colspan=4 align="left"><label for="id_roledesc">Role Description:</label></th>
        <th colspan=.5 align="left">{{ v.roledesc }}</th>
<tr> <td colspan="2" height="2" style="display:none">&nbsp;</td> </tr>
</tr> 
```

更多信息：

网址.py

```
urlpatterns = patterns('',
   (r'^new/$',                           sfp.view),
   (r'^volunteer/$',     volunteer_page),
   (r'^vollist/$', volunteer_list),
   (r'^volcont/$', volunteer_contact) 
```

视图.py

```
sfp = SimpleFormProcessing(
    form_class=VolunteerSignupForm,
    form_2_model=volunteersignupform_2_model,
    form2_class=VolunteerForm,
    form_template='signups/create_contact_form.dmpl',
    email_template='signups/response_email.dmpl',
    email_html_template='signups/response_email_html.dmpl',
    email_subject='Vibha Volunteer Signup',
    email_sender='volunteer@vibha.org',
    redirect_url='/signups/thanks/',
    do_captcha=True) 
```

SimpleFormProcessing.py

```
from django.shortcuts import render_to_response
from django.core.mail import EmailMultiAlternatives
from django.template.loader import render_to_string
from django.http import HttpResponseRedirect
from formwrappers import form_with_captcha, form_with_ipaddress
import pdb

class SimpleFormProcessing:

    def __init__(self, form_class, form_2_model, form2_class, form_template,
            email_template, email_subject, email_sender, redirect_url,
            do_captcha=False, record_ip_addr=False, email_html_template=None):
        self.form_class = form_class
        self.form_2_model = form_2_model
        self.form_template = form_template
        self.email_template = email_template
        self.email_html_template = email_html_template
        self.email_subject = email_subject
        self.email_sender = email_sender
        self.redirect_url = redirect_url
        self.do_captcha = do_captcha
        self.record_ip_addr = record_ip_addr

    def view(self, request, initial={}):
        pdb.set_trace()
        Form = self.form_class
        if self.do_captcha:
            Form = form_with_captcha(Form, request)
        if self.record_ip_addr:
            Form = form_with_ipaddress(Form, request)
        if request.method == 'POST':
            # Try processing the form
            if self.do_captcha and not accepts_cookies(request):
                return our_flatpage('Please enable cookies and try again.')
            else:
                form = Form(request.POST)
                if form.is_valid():
                    # The form is correct, process it
                    model = self.form_2_model(form)
                    if self.email_template:
                        text_content = render_to_string(self.email_template, {'model': model})
                        recipients = model.emailRecipients()
                        try:
                            bcc_recipients = model.emailBCCRecipients()
                        except:
                            bcc_recipients = None
                        msg = EmailMultiAlternatives(self.email_subject, text_content, self.email_sender,
                                recipients, bcc_recipients)

                        if self.email_html_template:
                            html_content = render_to_string(self.email_html_template, {'model': model})
                            msg.attach_alternative(html_content, "text/html")

                        msg.send()

                    return HttpResponseRedirect(self.redirect_url)
                else:
                    # Show the form with errors
                    return render_to_response(self.form_template, {'form': form})
        else:
            # Show the empty form

            form = Form(initial=initial)
            if self.do_captcha:
                accepts_cookies(request) 
```

志愿者列表.dmpl

```
{% extends "base.dmpl" %}
{% block title %}User Registration{% endblock %}
{% block head %}User Registration{% endblock %}
{% block contentBox %}
<h2>Volunteer Opportunities</h2>
<p>Vibha is currently looking for volunteers interested in helping the organization in the following areas:</p>
<div class="relation">
<ul>
{% for k in teamrel %}
        <li align="left"><a href="#{{ k }} "> <b> {{ k}} </b> </a> </li>
{% endfor %}
</ul>
</div>

<p>If you are interested in any of these opportunities please contact us by clicking on the position you are interested and filling out the form.</p>
<p>&nbsp;</p>

<table>

{% for v in vollist %}
{% ifchanged  v.teamrelation %}
<tr>
<th colspan=7 align="left"><h3><a name="{{ v.teamrelation }}"> {{v.teamrelation}} </a> </h3></th>
</tr>
{% endifchanged %}

<tr>
        <th colspan=4 align="left"><label for="id_Volposition">Volunteer Position:</label></th>
        <th colspan=.5 align="left"><a href="/signups/new/{{ v.position }}" class="username" <u>{{ v.volposition }}</u></a></th>
<tr> <td colspan="2" height="2" style="display:none">&nbsp;</td> </tr>
</tr>

<tr>
        <th colspan=4 align="left"><label for="id_roledesc">Role Description:</label></th>
        <th colspan=.5 align="left">{{ v.roledesc }}</th>
<tr> <td colspan="2" height="2" style="display:none">&nbsp;</td> </tr>
</tr>
<tr>
        <th colspan=4 align="left"><label for="id_timereqt">Time Requirements:</label></th>
        <th colspan=.5 align="left">{{ v.noofhours }} hours per month</th>
<tr> <td colspan="2" height="2" style="display:none">&nbsp;</td> </tr>
</tr>
<tr>
        <th colspan=4 align="left"><label for="id_qualreqt">Qualification and Requirements:</label></th>
        <th colspan=.5 align="left">{{ v.Qualreqt }}</th>
<tr> <td colspan="2" height="2" style="display:none">&nbsp;</td> </tr>
</tr>
<tr>
        <th colspan=4 align="left"><label for="id_duration">Duration of the Role:</label></th>
        <th colspan=20 align="left">  {{ v.Duration}} {{ v.Durationyrmon}}</th>
<tr> <td colspan="10" height="20" style="display:none">&nbsp;</td> </tr>
</tr>
{% endfor %}

</table>

{% endblock %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:05:00.427

您的问题很难解读，但据我所知，这里有一些提示：

1.  `request.GET`和字典的键`request.POST`（取决于使用的方法）将是`name`字段的 HTML 属性，而不是它们的标签。您没有发布任何包含任何字段的代码，但总的来说，如果您有类似的内容：

    ```
    <input type="hidden" name="volposition" value="0"> 
    ```

    然后，您会找到以下值：

    ```
    request.POST['volposition'] 
    ```

2.  `.get()`当您不确定该键是否存在时，请始终在字典上使用该方法。`IndexError`如果密钥不存在，您拥有的代码将引发异常。例如：

    ```
    volposition = request.GET.get('volposition') 
    ```

3.  表单实际上应该始终通过该`POST`方法发送。*罕见*的例外是搜索表单之类的东西，其中将提交的值作为查询字符串更有意义（这些通常通过`GET`方法发送）。经验法则是，如果您出于只读目的请求资源，请使用`GET`. 例如，搜索 Google，不会*改变*任何内容，您只是请求搜索结果列表，因此`GET`使用。但是，如果您正在进行任何类型的修改（创建、编辑，甚至只是更新会话数据......任何实际影响某种*更改*的东西），那么您使用`POST`. 您也不应该将两者混为一谈。例如，不要`POST`访问带有查询字符串的 URL。

说了这么多。您应该能够使用以下内容覆盖您的基础：

```
{% if request.REQUEST.volposition %}
<input type="hidden" name="volposition" value="{{ request.REQUEST.volposition }}">
{% endif %} 
```

`request.REQUEST`包含随 URL 传递的参数，无论是 by`GET`还是`POST`. 始终使用`request.GET`或`request.POST`当您*知道*将通过什么方法发送数据时，但在这种情况下，您只需要该值并且它可能来自任一方法，这`request.REQUEST`是可以接受的。

如果键*确实*存在，则隐藏的输入将以其值呈现。无论数据如何发送，`volposition`现在都将被传递。

# objective-c - 带有 .cxx_construct 的 Xcode

> ID：10485920
> 
> 赞同：1
> 
> 时间：2012-05-07T16:52:39.720
> 
> 标签：objective-c, xcode, macos

我对 Xcode 有一点问题。我导入了一个包含以下内容的标题：

```
- (id).cxx_construct;
- (void).cxx_destruct; 
```

所以我尝试在用户定义的构建设置中将 GCC_OBJC_CALL_CXX_CDTORS 设置为 yes ！但我仍然有这个错误：

```
Expected selector for Objective-C method 
```

我能做些什么 ？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:04:15.937

这些选择器由编译器生成。它们是 c++ ivar 构造和销毁的保留选择器。

`GCC_OBJC_CALL_CXX_CDTORS`此外，运行时会在启用时为您调用这些方法。无需自己调用或声明它们。

声明它们会导致编译错误。

> 我能做些什么？

为您的选择器选择一个唯一的名称，并且不要实现为您生成的名称（`GCC_OBJC_CALL_CXX_CDTORS`启用时）。

你想在这里做什么？

# sql - 使用 SQL Server 导入和导出向导中的 SQL 语句使用 Excel 中的数据更新数据库

> ID：10485928
> 
> 赞同：0
> 
> 时间：2012-05-07T16:53:39.593
> 
> 标签：sql, excel

我正在尝试将文件中的列中的`.xslx`数据导入数据库。我正在使用 SQL Server 2008 并在导入和导出向导中选择文件并转到“编写查询以指定数据传输”。我的 SQL 知识很基础，我不确定如何从文件中选择数据。

什么是从 Excel 文件中选择一列并用它更新数据库的 SQL 语句？（可以覆盖数据库中已有的任何对应值）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:55:33.223

让向导为您创建表并加载数据而不是编写查询会更容易。你试过吗？您需要它做一些具体的事情吗？将数据以某种形式存入数据库，然后将其处理成最终形式可能更容易。

# sql - 从唯一检查的时间戳中提取月份和年份？

> ID：10485930
> 
> 赞同：3
> 
> 时间：2012-05-07T16:53:50.183
> 
> 标签：sql, postgresql

我正在尝试创建一个带有时间戳列的表。问题是，我希望月份和年份组合是唯一的。我试过这个，但它没有帮助：

```
CREATE TABLE adempiere.SOIP_Deudas (
    --Columnas del sistema
    SOIP_Deudas_ID      numeric(10)     NOT NULL PRIMARY KEY,
    ad_client_id    numeric(10)     NOT NULL,
    ad_org_id   numeric(10)     NOT NULL,
    updatedby   numeric(10)     NOT NULL,
    createdby   numeric(10)     NOT NULL,
    updated     timestamp       NOT NULL,
    created     timestamp       NOT NULL,
    isactive    char(1)     DEFAULT 'Y'::bpchar NOT NULL,

    --Columnas del usuario
    SOIP_Departamentos_ID numeric(10) NOT NULL,
    fecha       timestamp   NOT NULL,
    monto       real        NOT NULL DEFAULT 0,

    FOREIGN KEY (SOIP_Departamatos_ID) REFERENCES SOIP_Departamentos(SOIP_Departamentos_ID),
    UNIQUE (EXTRACT (MONTH FROM TIMESTAMP fecha), EXTRACT(YEAR FROM TIMESTAMP fecha))
) 
```

知道如何在没有特定年份和月份列的情况下做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:03:37.030

快速解决方法：

```
create unique index on adempiere.SOIP_Deudas ( EXTRACT (MONTH FROM fecha), EXTRACT(YEAR FROM fecha)); 
```

# java - 多客户端java架构

> ID：10485932
> 
> 赞同：1
> 
> 时间：2012-05-07T16:53:54.617
> 
> 标签：java, spring, architecture

我正在使用 Spring（和 Spring Security）、struts2 和 hibernate 用 java 构建一个 Web 应用程序。

每个“用户”都属于一个“客户”。我需要设计它，以便当用户登录时，他只能访问他的“客户”的资源

最初，Web 应用程序是在没有“客户端”的情况下构建的。仅具有对 Web 应用程序的某些模块具有基于角色的访问权限的角色的用户。

这些角色将继续存在。唯一的区别是用户仅限于客户端资源。在客户端中，他们具有基于角色的访问权限，描述了他们能做什么和不能做什么。

架构方面，我有一个非常标准的网络应用程序，带有 Managers 和 Dao's。那么最好的架构方法是什么？

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:26:35.653

我有类似的工作。您可以添加“clientId”额外属性，例如，添加到默认的 UserDetails（您是否还没有自定义的），这样一旦用户登录，应用程序就会知道您的用户所属的客户端。

当用户想要执行某个操作时，应用程序应该从 userDetails 中获取“clientId”并根据此 id 执行操作。很可能，您的许多 DAO 方法（和表）都应该将 clientId 作为参数。

此解决方案不影响角色。

# .htaccess - 将子文件夹指向子域 - 不影响主域

> ID：10485933
> 
> 赞同：0
> 
> 时间：2012-05-07T16:53:55.077
> 
> 标签：.htaccess, mod-rewrite

我想要做的是将子文件夹指向子域

> `~/html/demos/app/index.php » http://demo.example.com`

这些是`~/html/.htaccess`文件中的当前设置：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    Options -Indexes
    Options +Followsymlinks
    RewriteCond %{HTTP_HOST} ^(www\.)?demo\.example\.com(\.*)$
    RewriteRule ^(.*)$ /html/demos/app/index.php$1 [R=301]
</IfModule> 
```

目前上述方法不起作用。`http://demo.example.com`以及都`http://example.com`指向`~/html/index.php`。主域*应*指向那里，而不是子域。

我需要实现的另一件事是设置环境变量。本地安装指向`http://demo.example.com.dev`，我不知何故需要在这些域之间切换（但不知道如何使用这些`SetEnv`东西）。

谢谢！

**编辑：**

我已经通过`php_info()`（它在那里）检查了对 mod_rewrite 的支持，并且还测试了重定向到谷歌，这是可行的。

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    Options -Indexes
    Options +Followsymlinks
    RewriteRule ^  http://www.google.de [R,L]
</IfModule> 
```

# asp.net-mvc-3 - 自定义 Orchard CMS 1.4 模块编辑器形状未呈现

> ID：10485939
> 
> 赞同：1
> 
> 时间：2012-05-07T16:54:32.490
> 
> 标签：asp.net-mvc-3, orchardcms

我正在按照 Kevin Kuebler 的 Pluralsight 教程在 Orchard 1.4 中构建一个自定义模块。我相信我拥有所需的一切，但是当我启用我的模块并尝试添加新文章（我的自定义内容类型）时，我没有看到我的自定义内容部分的字段。我按照教程从头开始重建了很多次，但一直卡在同一个地方。我已经用谷歌搜索了答案，但从我所看到的情况来看，我已经准备好了我需要的一切。以下是我的代码片段。

迁移.cs

```
using Orchard.Core.Contents.Extensions;
using Orchard.Data.Migration;
using Orchard.ContentManagement.MetaData;

    namespace Northern.Articles {
    public class Migrations : DataMigrationImpl {

        public int Create() {

            ContentDefinitionManager.AlterTypeDefinition("Article", builder =>
                builder.WithPart("CommonPart")
                .WithPart("TitlePart")
                .WithPart("AutoroutePart")
                .WithPart("BodyPart", partBuilder =>
                    partBuilder.WithSetting("BodyTypePartSettings.Flavor","Text")
                    )
                .Creatable()
                .Draftable()
                );

            return 1;
        }

        public int UpdateFrom1() {

            SchemaBuilder.CreateTable("ArticlePartRecord", table =>
                table.ContentPartRecord()
                .Column<int>("ArticleID")
                .Column<string>("PrimaryImage", col => col.WithLength(300))
                .Column<string>("ThumbImage", col => col.WithLength(300))
                .Column<bool>("IsFeatured"));

            ContentDefinitionManager.AlterTypeDefinition("Article", builder =>
                builder.WithPart("ArticlePart"));

            return 2;
        }
    }
} 
```

文章PartRecord.cs

```
using Orchard.ContentManagement.Records;
namespace Northern.Articles.Models
{
    public class ArticlePartRecord : ContentPartRecord
    {
        public virtual int ArticleID { get; set; }
        public virtual string PrimaryImage { get; set; }
        public virtual string ThumbImage { get; set; }        
        public virtual bool IsFeatured { get; set; }
    }
} 
```

文章Part.cs

```
using Orchard.ContentManagement;

namespace Northern.Articles.Models
{
    public class ArticlePart : ContentPart<ArticlePartRecord>
    {
        public int ArticleID {
            get { return Record.ArticleID; }
            set { Record.ArticleID = value; }
        }
        public string PrimaryImage
        {
            get { return Record.PrimaryImage; }
            set { Record.PrimaryImage = value; }
        }
        public string ThumbImage
        {
            get { return Record.ThumbImage; }
            set { Record.ThumbImage = value; }
        }
        public bool IsFeatured
        {
            get { return Record.IsFeatured; }
            set { Record.IsFeatured = value; }
        }
    }
} 
```

文章PartDriver.cs

```
using Orchard.ContentManagement.Drivers;
using Northern.Articles.Models;
using Orchard.ContentManagement;

namespace Northern.Articles.Drivers
{
    class ArticlePartDriver : ContentPartDriver<ArticlePart>
    {
        protected override string Prefix
        {
            get
            {
                return "Article";
            }
        }

        //GET
        protected override DriverResult Editor(ArticlePart part, dynamic shapeHelper)
        {
            return ContentShape("Parts_Article_Edit", () =>
                shapeHelper.EditorTemplate(TemplateName: "Parts/Article", Model: part, Prefix: Prefix));
        }

        // POST
        protected override DriverResult Editor(ArticlePart part, IUpdateModel updater, dynamic shapeHelper)
        {
            updater.TryUpdateModel(part, Prefix, null, null);
            return Editor(part, shapeHelper);
        }
    }
} 
```

文章处理程序.cs

```
using Orchard.ContentManagement.Handlers;
using Orchard.Data;
using Northern.Articles.Models;

namespace Northern.Articles.Handler
{
    public class ArticleHandler : ContentHandler
    {
        public ArticleHandler(IRepository<ArticlePartRecord> articlePartRepository)
        {
            Filters.Add(StorageFilter.For(articlePartRepository));
        }
    }
} 
```

视图\EditorTemplates\Parts\Article.cshtml

```
@model Northern.Articles.Models.ArticlePart

<fieldset>
    <legend>@T("Article Details")</legend>
    @Html.LabelFor(m => m.ArticleID, T("Article ID"))
    @Html.TextBoxFor(m => m.ArticleID)
    @Html.LabelFor(m => m.PrimaryImage, T("Primary Image"))
    @Html.TextBoxFor(m => m.PrimaryImage)
    @Html.LabelFor(m => m.ThumbImage, T("Thumbnail Image"))
    @Html.TextBoxFor(m => m.ThumbImage)
    @Html.LabelFor(m => m.IsFeatured, T("Is Featured"))
    @Html.CheckBoxFor(m => m.IsFeatured);
</fieldset> 
```

安置信息

```
<?xml version="1.0" encoding="utf-8" ?>
<Placement>
  <Place Parts_Article_Edit="Content:10"/>
</Placement> 
```

模块正确加载并在数据库中创建表，我只是在添加/编辑文章时没有看到这些字段。

看到我看不到的东西的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:54:05.500

在我看来，你已经准备好了一切。我在查看代码时注意到的一件事是您在 ArticlePartDriver 类上没有*公共*访问修饰符。如果您不将它们指定为公共，则类在 C# 中默认是内部的。我的猜测是 Orchard 无法创建 Driver 类，因为它不是公开的。

# android - 与 GA Android 广告系列跟踪的市场链接

> ID：10485941
> 
> 赞同：6
> 
> 时间：2012-05-07T16:54:45.973
> 
> 标签：android, google-analytics

我正在使用此 URL 构建器来配置 GA Android 广告系列跟踪： [https ://developers.google.com/analytics/devguides/collection/android/devguide#google-play-builder](https://developers.google.com/analytics/devguides/collection/android/devguide#google-play-builder)

它生成的 URL 使用标准方案： [https](https://play.google.com/store/apps/details?id=com.mysite.myapp) ://play.google.com/store/apps/details?id=com.mysite.myapp ...

使用这种风格的 URL 让客户可以选择在浏览器中打开还是在 Play 商店中打开，而 market://details?id=com.mysite.myapp... 不是（我们的首选 UX）。

问题：谁能确认这个 market:// URL 也适用于 GA 活动跟踪？我正在测试这个，但跟踪对我来说是不可靠的，我对我看到的结果没有信心。我希望谷歌能改进这个功能。

market://details?id=com.mysite.myapp...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T21:30:24.060

使用该`market://`方案将与谷歌分析活动跟踪一起使用。您可以使用[GA URL 构建器](https://developers.google.com/analytics/devguides/collection/android/v3/campaigns)，只需将方案替换为`market://`.

该`&referrer`链接上的参数（如果您包含一个参数）将在安装时作为附加字符串传递给您的应用程序`INSTALL_REFERRER`，无论您是使用`https://`还是`market://`方案。

GA 将使用该引荐来源字符串进行广告系列跟踪。

了解您更喜欢使用`market://`，但想向可能阅读此内容的其他人表明该`market://`方案已正式弃用，支持`https://`.

# php - file() [function.file]：在服务器配置错误中禁用 URL 文件访问

> ID：10485944
> 
> 赞同：3
> 
> 时间：2012-05-07T16:55:11.083
> 
> 标签：php

我的代码是

```
<?php
if ($_POST['hiddensms']) {
    ini_set("allow_url_fopen", "ON");
    ini_set("allow_url_include", "ON");
    $smsno = explode(',', $_POST['hiddensms']);
    foreach ($smsno as $mono) {
        $baseurl         = "http://api.xxxxxxxxxxxx.com";
        $sql_q           = "select firstname,lastname from tbl_newsletter where phone='" . $mono . "'";
        $resultcount     = mysql_query($sql_q);
        $row_total_count = mysql_fetch_array($resultcount);
        $first_name      = $row_total_count['firstname'];
        $last_name       = $row_total_count['lastname'];
        if ($_POST['sel_name_sms'] == 'FirstName') {
            $setname = $first_name;
        } else {
            $setname = $last_name;
        }
        $smsBodyText = $_POST['sal_sms'] . ' ' . $setname . '\n';
        $text        = urlencode($smsBodyText . $_POST['msg_body']);
        $to          = $mono;
        $url         = "$baseurl/http/auth?user=$user&password=$password&api_id=$api_id";
        // do auth call
        $ret         = file($url);
        // explode our response. return string is on first line of the data returned
        $sess        = explode(":", $ret[0]);
        if ($sess[0] == "OK") {
            $sess_id = trim($sess[1]); // remove any whitespace
            $url     = "$baseurl/http/sendmsg?user=xx&password=xxxxx&api_id=3370743&to=$to&text=$text";
            //ht$ret = file($url);
            $send    = explode(":", $ret[0]);
            if ($send[0] == "ID") {
                echo "success\nmessage ID: " . $send[1];
            } else {
                echo "send message failed";
            }
        } else {
            echo "Authentication failure: " . $ret[0];
        }
    }
}
?> 
```

我正在尝试通过 api 发送短信，但给了我这个错误

警告：file() [function.file]：在第 622 行 /xxxxxxxsubscriber-list.php 的服务器配置中禁用 URL 文件访问警告：file(http://api.xxxxx.com/http/auth?user =xx&xx&api_id=xx) [function.file]：打开流失败：在第 622 行的 /xxxxxx/subscriber-list.php 中找不到合适的包装器 身份验证失败：

我设置 .htaccess 喜欢

```
<IfModule mod_php5.c>
php_admin_value allow_url_fopen On
php_admin_value allow_url_include On
</IfModule> 
```

但它不工作。我不知道该怎么办，如果有任何想法，请帮助我

我在他们建议的一些网站上搜索了 `php.ini`

```
allow_url_fopen = On
allow_url_include = On 
```

但我无法访问`php.ini`，所以还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-27T20:35:25.543

此错误告诉您服务器上的 allow_url_fopen 已关闭。可以将服务器配置为忽略他们放置在 Web 根目录中的用户定义的 php.ini 文件。由于他们遇到了这个麻烦，他们可能也阻止了您进行其他黑客攻击（例如在您的 htaccess 文件中）。

出于安全原因，您的主机禁用了 allow_url_fopen！它应该并且应该保持禁用状态。所以停止尝试打开它。他们不希望知道什么的人跑来跑去，被黑客入侵，并使服务器上的其他人处于危险之中。

解决此问题的唯一方法是获取新主机，或者获取具有 root 访问权限的 VPS 或专用服务器。

allow_url_fopen 的替代方法是 cURL。你可以用 curl 做同样的事情。

cURL 示例： http: [//php.net/manual/en/curl.examples-basic.php](http://php.net/manual/en/curl.examples-basic.php)

# regex - 在 Fitnesse 中使用正则表达式测试货币值

> ID：10485948
> 
> 赞同：0
> 
> 时间：2012-05-07T16:55:20.997
> 
> 标签：regex, unit-testing, fitnesse

对 Fitnesse 来说非常新，我需要使用正则表达式编写一个测试来测试浮点精度......

```
$24.59   TEST: starts with '$' and precision is 2 decimal places 
```

我试过了，但没用，认为这是语法问题，我只需要正确的正则表达式，我不需要完整的测试夹具

```
/^$\d+.\d{2}$/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:02:57.140

您的第一个美元符号需要转义。

```
/^\$\d+\.\d{2}$/ 
```

正如另一个人指出的那样，点也应该被转义，否则它将匹配*任何*字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:18:10.550

如果要在字符串上匹配，则需要转义[匹配字符](http://www.cs.cf.ac.uk/Dave/PERL/node79.html)。在这种情况下，`$`和`.`。

```
/^\$\d+\.\d{2}$/ 
```

# java - 如何使用 Java 用交互式登录包装 rsync？

> ID：10485951
> 
> 赞同：3
> 
> 时间：2012-05-07T16:55:27.167
> 
> 标签：java, rsync, expectj

我正在尝试使用 java 包装 rsync，并且在处理交互式登录时遇到了困难。我可以让 unix 命令行实用程序`expect`工作，但我似乎无法找出 java 等效的`ExpectJ`. 这是我当前的代码：

```
import java.io.IOException;

import expectj.ExpectJ;
import expectj.Spawn;

public class ExpectjTest {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        // TODO Auto-generated method stub
        String mypassword= "example";
        String cmd = "rsync  -e ssh --list-only --recursive   user@host:~/\n";
        ExpectJ expectinator = new ExpectJ();
        Spawn rsync = expectinator.spawn("/bin/bash");
        try {

            rsync.send(cmd);
            rsync.expect("password:",2);
            rsync.send(mypassword+"\n");
            rsync.expectClose();

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
    }
} 
```

当我运行它时，我收到错误：

```
ssh_askpass: exec(/usr/libexec/ssh-askpass): No such file or directory
Permission denied (gssapi-keyex,gssapi-with-mic,publickey,keyboard-interactive). 
```

似乎没有启动正常的 ssh 交互式登录，因为我正在从 java 调用 rsync。使用的类似 shell 脚本`expect`工作得很好。此外，当我使用公钥授权时，类似的 java 代码似乎可以工作。如果我只是想使用`ssh`，我会使用 JSch 之类的库，但我并不真正信任任何 java rsync 库，所以我想包装命令行工具。

谢谢你的帮助！

# android - 升级到 ADT 18 后出现 ClassNotFoundException

> ID：10485960
> 
> 赞同：11
> 
> 时间：2012-05-07T16:56:17.960
> 
> 标签：android, eclipse, adt, classnotfoundexception

由于我将 ADT 更新到 19，我开始出现以下错误。每当我启动我的应用程序时都会出现问题。我检查了所有与此相关的以前的帖子，但似乎没有一个有帮助。任何想法将不胜感激......

我的设置

1.  我目前在 Windows 7 64 位中有 ADT 18、SDK 19、elcipse。
2.  我使用制作 ashare.jar 的库项目，我所有的外部 jar（即保管箱、公共编解码器）都在库项目（Ashare）的“libs”文件夹中。
3.  我不使用proguard。

我们如何看待这个问题。

1.  在 Eclipse > {MyProject} > 右键单击​​ > Android 工具 > 导出签名的应用程序包中创建 apk
2.  使用“adb install XXX.apk”在模拟器或 dev.phone 中安装 apk
3.  启动应用程序。然后，砰。它抛出错误。

一些值得注意的事情是

1.  在我将 Eclipse 中的 ADT 更新到版本 18 后，它开始发生
2.  仅当我制作签名的 apk 并在模拟器或 dev.phone 中运行它时才会发生这种情况。
3.  如果我使用 {MyProject} > Right click > Run As > Android Application 运行我的应用程序，我看不到问题
4.  当我检查 classes.dex 内部时，我发现那里缺少一些类。我不确定，但我觉得构建过程不包括 classes.dex 中的所有类
5.  在导出过程中，Eclipse 控制台没有错误（我在 Android>Build>Build 输出设置中使用了详细选项）

Java 异常

```
05-07 08:52:48.336: D/AndroidRuntime(3055): Shutting down VM
05-07 08:52:48.336: W/dalvikvm(3055): threadid=1: thread exiting with uncaught exception (group=0x40a3e1f8)
05-07 08:52:48.340: E/AndroidRuntime(3055): FATAL EXCEPTION: main
05-07 08:52:48.340: E/AndroidRuntime(3055): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.acj0.barcodeexpdemo/com.acj0.barcodeexpdemo.Launcher}: java.lang.ClassNotFoundException: com.acj0.barcodeexpdemo.Launcher
05-07 08:52:48.340: E/AndroidRuntime(3055):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
05-07 08:52:48.340: E/AndroidRuntime(3055):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-07 08:52:48.340: E/AndroidRuntime(3055):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-07 08:52:48.340: E/AndroidRuntime(3055):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-07 08:52:48.340: E/AndroidRuntime(3055):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-07 08:52:48.340: E/AndroidRuntime(3055):     at android.os.Looper.loop(Looper.java:137)
05-07 08:52:48.340: E/AndroidRuntime(3055):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-07 08:52:48.340: E/AndroidRuntime(3055):     at java.lang.reflect.Method.invokeNative(Native Method)
05-07 08:52:48.340: E/AndroidRuntime(3055):     at java.lang.reflect.Method.invoke(Method.java:511)
05-07 08:52:48.340: E/AndroidRuntime(3055):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-07 08:52:48.340: E/AndroidRuntime(3055):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-07 08:52:48.340: E/AndroidRuntime(3055):     at dalvik.system.NativeStart.main(Native Method)
05-07 08:52:48.340: E/AndroidRuntime(3055): Caused by: java.lang.ClassNotFoundException: com.acj0.barcodeexpdemo.Launcher
05-07 08:52:48.340: E/AndroidRuntime(3055):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
05-07 08:52:48.340: E/AndroidRuntime(3055):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
05-07 08:52:48.340: E/AndroidRuntime(3055):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
05-07 08:52:48.340: E/AndroidRuntime(3055):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
05-07 08:52:48.340: E/AndroidRuntime(3055):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
05-07 08:52:48.340: E/AndroidRuntime(3055):     ... 11 more 
```

**2012 年 5 月 7 日更新**

*   我所有的 jar 都在 Library 项目的“libs”文件夹中，我看到它们都包含在“Android Dependencies”中

**2012 年 5 月 18 日更新 - 暂时解决**

*   我找到了临时解决方案。在运行“导出签名的应用程序包”之前，我做了“清理”，没有选中“自动构建”选项。然后，我再也看不到错误了。我不知道为什么它有效。如果您有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:11:38.110

将您的外部 jar 放在 libs 目录中。你可以看看[这个链接](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T10:34:02.503

我遇到了同样的问题，尽管我按照[lujop 提到的链接中](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)的描述做了所有事情。以下是缺少的内容：

1.  右键单击您的项目>构建路径>配置构建路径...
2.  单击“订购和导出”选项卡
3.  勾选您所指的库（Android xxx、Android 依赖项）和其他项目旁边的复选框
4.  清理你的项目
5.  应该是这样

我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T16:31:22.040

这也让我发疯了一整天，才意识到清单中愚蠢的我应用程序名称是错误的。对于我的应用程序名称： android:name="com.diack.locdatafeeds"

它缺少我的主要活动 android:name="com.diack.locdatafeeds.Mainactivity"

希望它可以帮助某人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T01:10:03.917

我也有这个。这是我的解决方法。按照这里： [http ://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

使没有“引用库”。如果有任何右键单击它们并从构建路径中删除。该文件夹现在应该消失了，您应该只剩下“Android Dependencies”

# wordpress - 复选框输入助手 PodsCms

> ID：10485961
> 
> 赞同：0
> 
> 时间：2012-05-07T16:56:25.080
> 
> 标签：wordpress, helpers, podscms

我创建了一个多个复选框输入帮助程序，从这个[http://podscms.org/packages/checkboxradiobutton-yourvalues/调整代码](http://podscms.org/packages/checkboxradiobutton-yourvalues/)

我对其进行了修改，这样人们就不必将值硬编码到帮助程序中；取而代之的是从列注释字段中获取值（在 pod 2.0 中将赞赏列的数据字段！）

这是帮手： http: [//pastebin.com/w0UxDmnG](http://pastebin.com/w0UxDmnG)

我遇到了两个问题，第一个我已经解决了：

1.  在开始时，我将整个代码包含在一个函数中，以保持名称空间的清洁（这不是正确的做法吗？）。但我注意到我这样做了，当我有两个带有这个助手的列时，会发生许多奇怪的事情：第二列是空白的，不显示复选框。在使用此帮助程序的第二列之后，不再显示更多列。所有文本区域上的丰富编辑器命令都不会出现，并且文本区域本身是不可编辑的。我想是将代码包装在函数中的效果。打开代码，问题就解决了！（我写这个是因为它可以对那里的开发人员有所帮助。

2.  我想为使用复选框显示的选项之外的评论添加一个“其他”文本字段（例如，在谷歌表单中）。要触发这个“其他”（我共享的包中的“Altro”），pod 创建者必须在评论中写 []（例如：foo、bar、cat、[]）。我能够进行输入，但是，一旦填写了数据并保存了 pod，文本字段中的数据就会丢失。我真的不知道如何解决这个问题！

我希望我的经验，这个助手可以帮助某人，我希望有人可以帮助我改进它！

（请有人创建一个 podscms 标签！！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:43:54.087

Pods 2.0 解决了这类问题，它现在作为字段类型选项内置到核心中。享受！

# mysql - SQL 返回一组合并的结果

> ID：10485971
> 
> 赞同：2
> 
> 时间：2012-05-07T16:56:59.420
> 
> 标签：mysql, sql, relational-division

我有以下 SQL：

```
SELECT `table1`.`value`, `table2`.* 
FROM `table2` 
INNER JOIN `table1` ON `table2`.`product_id` = `table1`.`entity_id`
WHERE `table2`.`created_at` > '2012-04-23' and 
(`table1`.`value` = 264 OR `table1`.`value` = 260)
order by order_id 
```

它返回一个这样的结果集（这只是返回结果的一部分）：

```
value  order_id   ...
260    1234
260    1235
260    1236
264    1236
260    1237
260    1238
260    1239
264    1239
264    1240
260    1241 
```

我想要的是一个查询，它将获取这些结果，并且只返回 order_id 包含值 260 和 264 的订单。基于这个例子，我正在寻找的最终结果是

```
260   1236
264   1236
260   1239
264   1239 
```

我的想法是这可以用一个子集来完成，但我不确定完成它的细节。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T17:26:44.683

这可以通过[关系划分](http://en.wikipedia.org/wiki/Relational_algebra#Division_.28.C3.B7.29)来完成：

```
select r.order_id from (
  select 
    dividend.*  
  from your_table_or_query as dividend  -- assumes no duplicates in `dividend`; use `distinct` if there are any
  inner join divisor
  on dividend.value = divisor.value
) as r
group by r.order_id
having count(*) = (select count(*) from divisor); 
```

结果：

```
+----------+
| order_id |
+----------+
|     1236 |
|     1239 |
+----------+
2 rows in set (0.00 sec) 
```

`your_table_or_query`您的查询在哪里

```
select 260 as value from dual union select 264 as value from dual 
```

是`divisor`。

这将返回订单 ID 1236 和 1239；然后可以将它们`join`编入原始查询以获取具有这些订单 ID 的所有行，如果这是您想要的。

* * *

完整查询以及插入语句：

```
create table divisor (value int);
insert into divisor values (260), (264);

create table your_table_or_query (value int, order_id int);
insert into your_table_or_query values (260, 1234), (260, 1235), (260, 1236), (264, 1236), (260, 1237), (260, 1238), (260, 1239), (264, 1239), (264, 1240), (260, 1241);

select y.* from (
  select r.order_id from (
    select
      dividend.*
    from your_table_or_query as dividend
    inner join divisor
      on dividend.value = divisor.value
  ) as r 
  group by r.order_id
  having count(*) = (select count(*) from divisor)
) as quotient
inner join your_table_or_query y
  on quotient.order_id = y.order_id; 
```

结果：

```
+-------+----------+
| value | order_id |
+-------+----------+
|   260 |     1236 |
|   264 |     1236 |
|   260 |     1239 |
|   264 |     1239 |
+-------+----------+
4 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:14:39.303

这个怎么样？

```
SELECT table1.value, table2.* 
FROM table2 
INNER JOIN table1 
ON table2.product_id = table1.entity_id
WHERE table2.created_at > '2012-04-23' AND
(table1.value = 264 OR table1.value = 260)
AND table2.order_id IN (
    SELECT table2.order_id  
    FROM table2 
    INNER JOIN table1 
    ON table2.product_id = table1.entity_id
    WHERE table2.created_at > '2012-04-23' AND
    (table1.value = 264 OR table1.value = 260)
    GROUP BY table2.order_id
    HAVING COUNT(*) = 2
) 
```

（很抱歉省略了撇号，我不知道该字段中的 mysql 要求是什么；此语法符合 ms-sql）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T18:02:42.383

这将返回同时具有值​​ 260 和 264 的订单列表 - 如果有人只需要此结果而不是每个值的重复结果：

```
SELECT `table2`.* 
FROM `table2` 
INNER JOIN `table1` as `table1_264`
  ON `table2`.`product_id` = `table1_264`.`entity_id`
  AND `table1_264`.`value` = 264
INNER JOIN `table1` as `table1_260`
  ON `table2`.`product_id` = `table1_260`.`entity_id`
  AND `table1_260`.`value` = 260
WHERE `table2`.`created_at` > '2012-04-23'
order by order_id 
```

* * *

或者如果有人想要更快的解决方案而不需要昂贵的`having`条款（+当然你可以存储查询或使用 CTE 而不是重复它）

```
SELECT 264 as `value`, `table2`.* 
 FROM `table2` 
 INNER JOIN `table1` as `table1_264` ON `table2`.`product_id` = `table1_264`.`entity_id` AND `table1_264`.`value` = 264
 INNER JOIN `table1` as `table1_260` ON `table2`.`product_id` = `table1_260`.`entity_id` AND `table1_260`.`value` = 260
 WHERE `table2`.`created_at` > '2012-04-23'
UNION ALL
SELECT 260, `table2`.* 
 FROM `table2` 
 INNER JOIN `table1` as `table1_264` ON `table2`.`product_id` = `table1_264`.`entity_id` AND `table1_264`.`value` = 264
 INNER JOIN `table1` as `table1_260` ON `table2`.`product_id` = `table1_260`.`entity_id` AND `table1_260`.`value` = 260
 WHERE `table2`.`created_at` > '2012-04-23'
order by order_id 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-07T17:04:23.923

```
SELECT `table1`.`value`, `table2`.* 
FROM `table1` 
LEFT JOIN `table2` ON `table1`.`entity_id` = `table2`.`product_id`
WHERE
(`table1`.`value` = 264 OR `table1`.`value` = 260)
AND `table2`.`created_at` > '2012-04-23' 
ORDER BY `table2`.order_id 
```

左连接，因此它仅将 table1.value 结果与匹配项匹配，并将其他表中的信息留在外面

# c++ - 在 Clang 中确定访问的 CXXRecordDecl 是类、结构还是联合

> ID：10485974
> 
> 赞同：6
> 
> 时间：2012-05-07T16:57:16.963
> 
> 标签：c++, clang, abstract-syntax-tree

我使用**Clang从****C++**源代码构建 AST，并使用**RecursiveASTVisitor**来遍历树。

我想在访问的记录声明中决定它是类、结构还是联合。我有一个被覆盖的函数**VisitCXRecordDecl(clang::CXRecordDecl)**。在这个函数中，我可以[检查该类提供的有关 CXXRecordDecl](http://clang.llvm.org/doxygen/classclang_1_1CXXRecordDecl.html)的任何信息，但我不知道如何获取这些信息。

谁能帮我？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T06:27:21.170

只需使用[`isStruct`](http://clang.llvm.org/doxygen/classclang_1_1TagDecl.html#a14a0aad0b347c014f9520cd8e3388747)、`isClass`和`isUnion`成员函数，或者如果您愿意，可以调用`getTagKind`来获取[`TagKind`](http://clang.llvm.org/doxygen/namespaceclang.html#a9237bdb3cf715b9bff8bcb3172635548)您可以使用的值。`switch`他们在[`TagDecl`](http://clang.llvm.org/doxygen/classclang_1_1TagDecl.html)基类中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T17:46:54.287

在运行时，C++ 不区分类和结构，而联合仅通过其数据成员都共享地址空间这一事实来区分。

因此，实现这一点的唯一方法是在您的类/结构/联合定义中包含元数据，以支持对您很重要的区别。例如：

```
typedef enum { class_ct, struct_ct, union_ct } c_type;

class foo {
public:
    c_type whattype() { return class_ct; }
};

struct bar {
public:
    c_type whattype() { return struct_ct; }
};

union baz {
public:
    c_type whattype() { return union_ct; }
}; 
```

//B

# clojure - 匿名函数的正确语法

> ID：10485975
> 
> 赞同：2
> 
> 时间：2012-05-07T16:57:21.867
> 
> 标签：clojure, functional-programming, higher-order-functions

以下两个函数中的第一个函数 fn-apply-cmp-vals 返回在第二个函数 apply-cmp-vals 中使用的部分函数。

将 fn-apply-cmp-vals 作为匿名函数嵌入到 apply-cmp-vals 中的正确语法是什么？

```
(defn fn-apply-cmp-vals
    [fn cmp-sos cmp-idx]
    (partial fn cmp-sos cmp-idx))

(defn apply-cmp-vals
    [cmp-vec cmp-vals cmp-vec-idx]
    (let [fn-cmp (fn-apply-cmp-vals ret-non-match-rows cmp-vec cmp-vec-idx)]
        (map #(fn-cmp %1) cmp-vals))) 
```

具体来说，我想`fn-apply-cmp-vals ret-non-match-rows cmp-vec cmp-vec-idx)`用匿名函数代替函数调用。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:04:43.613

让我们一步一步地详细看一下。

您的目标是`fn-apply-cmp-vals`作为匿名函数内联到`apply-cmp-vals`. 所以让我们先这样做。这是您的函数在没有其他更改的情况下的样子：

```
(defn apply-cmp-vals
  [cmp-vec cmp-vals cmp-vec-idx]
  (let [fn-cmp ((fn [f cmp-sos cmp-idx] (partial f cmp-sos cmp-idx))
                  ret-non-match-rows cmp-vec cmp-vec-idx)]
    (map #(fn-cmp %1) cmp-vals))) 
```

这实现了您的目标，但仍有改进的余地。由于您的函数只是使用给定的参数调用，因此让我们用正确的参数`partial`直接调用替换匿名函数。`partial`这是有效的，因为`partial`返回一个部分应用的函数。

```
(defn apply-cmp-vals
  [cmp-vec cmp-vals cmp-vec-idx]
  (let [fn-cmp (partial ret-non-match-rows cmp-vec cmp-vec-idx)]
    (map #(fn-cmp %1) cmp-vals))) 
```

现在，让我们看看在哪里`fn-cmp`使用。它在自己的匿名函数中被调用，带有一个参数。由于您的部分函数满足此要求，因此您可以直接传递`fn-cmp`给 map 函数。

```
(defn apply-cmp-vals
  [cmp-vec cmp-vals cmp-vec-idx]
  (let [fn-cmp (partial ret-non-match-rows cmp-vec cmp-vec-idx)]
    (map fn-cmp cmp-vals))) 
```

最后，如果您愿意，您可以完全删除`let`表单：

```
(defn apply-cmp-vals
  [cmp-vec cmp-vals cmp-vec-idx]
  (map (partial ret-non-match-rows cmp-vec cmp-vec-idx) cmp-vals))) 
```

所以事实证明你根本不需要匿名函数！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T17:11:26.333

我认为您正在寻找的是：

```
(defn apply-cmp-vals
  [cmp-vec cmp-vals cmp-vec-idx]
    (let [fn-cmp (partial ret-non-match-rows cmp-vec cmp-vec-idx)]
      (map fn-cmp cmp-vals))) 
```

`fn-apply-cmp-vals`除了将其参数传递给`partial`.

`(partial ret-non-match-rows cmp-vec cmp-vec-idx)`将返回一个匿名函数。

`fn-cmp`是一个函数，所以替换`(map #(fn-cmp %1) cmp-vals)`为`(map fn-cmp com-vals)`.

# sql - 使用 FileTable 通过 SQL INSERT 创建子目录

> ID：10485978
> 
> 赞同：9
> 
> 时间：2012-05-07T16:57:29.840
> 
> 标签：sql, filestream, sql-server-2012, filetable

以前，[我请求过如何在`FileTable`不使用文件 I/O API](https://stackoverflow.com/q/10483906/175679)的情况下在 a 中创建目录。我现在想为我刚刚创建的父目录创建一个子目录。在插入期间如何分配我的父母？看来这`parent_path_locator`是一个计算列。

这创造了我的父母......

```
INSERT INTO FileTable0 (name,is_directory,is_archive) VALUES ('Directory', 1, 0); 
```

如何在我的 FileTable 中为该父级创建一个子目录？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T14:30:54.403

这就是我最终用来创建子目录的内容，因为它不会为我`GetPathLocator()`生成新`path_locator`值 - 它只会解释现有的`hierarchyids`.

```
DECLARE @parentdir table(path hierarchyid not null);
DECLARE @subdir_locator hierarchyid

-- Create Parent Directory, OUTPUT inserted parent path
INSERT INTO FileTable0 (name,is_directory,is_archive) 
OUTPUT INSERTED.path_locator into @parentdir
SELECT 'Directory', 1, 0

-- Create new path_locator based upon parent
SELECT @subdir_locator = dbo.GetNewPathLocator(path) from @parentdir

-- Create Subdirectory
INSERT INTO FileTable0 (name,path_locator,is_directory,is_archive) 
VALUES ('subdirectory', @subdir_locator, 1, 0); 
```

上面的代码块利用了[此处发现的默认 path_locator 值](http://www.sqlskills.com/BLOGS/BOBB/post/SQL-Server-2012-FileTables-in-T-SQL-part-2-new-rows.aspx)`hierarchyid`，该值从 GUID构建新表示（*利用[`newid()`](http://msdn.microsoft.com/en-us/library/ms190348.aspx)方法和简单解析*）。该函数`GetNewPathLocator()`在我能找到的 SQL Server 中的任何地方都不存在（*[`hierarchyid.GetDescendant()`](http://msdn.microsoft.com/en-us/library/bb677209.aspx)是我能找到的最接近的，但它没有使用 FileTable 依赖的本机结构*）。也许在 SQL.NEXT 中......

```
CREATE FUNCTION dbo.GetNewPathLocator (@parent hierarchyid = null) RETURNS varchar(max) AS
BEGIN       
    DECLARE @result varchar(max), @newid uniqueidentifier  -- declare new path locator, newid placeholder       
    SELECT @newid = new_id FROM dbo.getNewID; -- retrieve new GUID      
    SELECT @result = ISNULL(@parent.ToString(), '/') + -- append parent if present, otherwise assume root
                     convert(varchar(20), convert(bigint, substring(convert(binary(16), @newid), 1, 6))) + '.' +
                     convert(varchar(20), convert(bigint, substring(convert(binary(16), @newid), 7, 6))) + '.' +
                     convert(varchar(20), convert(bigint, substring(convert(binary(16), @newid), 13, 4))) + '/'     
    RETURN @result -- return new path locator     
END
GO 
```

该函数`GetNewPathLocator()`还需要一个 SQL 视图`getNewID` 来请求`newid()`使用[此 SO post 中的技巧](https://stackoverflow.com/a/775573/175679)。

```
create view dbo.getNewID as select newid() as new_id 
```

要调用`GetNewPathLocator()`，您可以使用默认参数生成新的`hierarchyid`或传入现有的`hiearchyid`字符串表示 ( *`.ToString()`*) 来创建子`hierarchyid`项，如下所示...

```
SELECT dbo.GetNewPathLocator(DEFAULT); -- returns /260114589149012.132219338860058.565765146/
SELECT dbo.GetNewPathLocator('/260114589149012.132219338860058.565765146/'); -- returns /260114589149012.132219338860058.565765146/141008901849245.92649220230059.752793580/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T14:36:15.770

我没有尝试在代码中重新创建 hierarchyid，而是选择在 SQL 创建它自己的 id 后更新 path_locator：

```
DECLARE @pathID hierarchyid;
DECLARE @parentdir table(path hierarchyid not null);

IF NOT EXISTS(SELECT 1 FROM FileAsset WHERE is_directory = 1 AND file_stream.GetFileNamespacePath() = '\Assets\Test')
INSERT INTO FileAsset (name, is_directory) VALUES( 'Test', 1)

SELECT @pathID = FileAsset.path_locator FROM FileAsset WHERE file_stream.GetFileNamespacePath() = '\Assets\Test'

INSERT INTO FileAsset (name, file_stream) OUTPUT INSERTED.path_locator into @parentdir VALUES('MyDoc.txt', 0x)

UPDATE FileAsset SET path_locator = '/' + REPLACE(@pathID.ToString(), '/','') + path_locator.ToString() WHERE path_locator = (SELECT [path] FROM @parentdir) 
```

其中“Assets”是我的 FileTable 目录的名称，“Test”是我要将文件放入的目录的名称，“MyDoc.txt”是文件名，0x 是文件流的零条目。

我确定我即将把它变成一个函数，很简单。

看...

```
CREATE PROCEDURE InsertFileAsset

    @fileName varchar(255),
    @dirName varchar(255),
    @data varbinary(MAX),
    @stream_id uniqueidentifier OUTPUT
AS
BEGIN
    DECLARE @pathID hierarchyid;
    DECLARE @parentdir table(path hierarchyid not null);
    DECLARE @streamID table(streamID uniqueidentifier not null);

    IF NOT EXISTS(SELECT 1 FROM FileAsset WHERE is_directory = 1 AND file_stream.GetFileNamespacePath() = '\Assets\' + @dirName)
    INSERT INTO FileAsset (name, is_directory) VALUES( @dirName, 1)

    SELECT @pathID = FileAsset.path_locator FROM FileAsset WHERE file_stream.GetFileNamespacePath() = '\Assets\' + @dirName

    INSERT INTO FileAsset (name, file_stream) OUTPUT INSERTED.path_locator into @parentdir VALUES(@fileName, @data)

    UPDATE FileAsset SET path_locator = '/' + REPLACE(@pathID.ToString(), '/','') + path_locator.ToString() OUTPUT inserted.stream_id INTO @streamID WHERE path_locator = (SELECT [path] FROM @parentdir)

    SELECT @stream_id = streamID FROM @streamID

    RETURN
END
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T23:30:40.413

另一种选择是使用 CLR 集成并将函数和存储过程创建为 C# 代码。

我刚刚为此创建了一个 GitHub CLR 集成项目。 [https://github.com/rhyous/Db.FileTableFramework](https://github.com/rhyous/Db.FileTableFramework)

它具有您想要的各种功能或过程：CreateFile、CreateDirectory、DirectoryExists。当然，在 GitHub 上，任何人都可以对其进行修改和改进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-07T22:17:15.753

我对答案做了一些改进：

1.  该函数返回hierarchyid而不是字符串
2.  如果有父级，则使用 hierarchyid::GetReparentedValue 函数生成新 ID，而不是字符串连接。

    ```
    create function doc.GetNewPathLocator (@parent hierarchyid = null) returns hierarchyid
    as
    begin 
        declare @id uniqueidentifier = (select new_id from dbo.GetNewID);
        declare @path hierarchyid = (convert(hierarchyid, '/' + 
                convert(varchar(20), convert(bigint, substring(convert(binary(16), @id), 1, 6))) + '.' +     
                convert(varchar(20), convert(bigint, substring(convert(binary(16), @id), 7, 6))) + '.' +     
                convert(varchar(20), convert(bigint, substring(convert(binary(16), @id), 13, 4))) + '/'));
        return case when @parent is null then @path else @path.GetReparentedValue(hierarchyid::GetRoot(), @parent) end;
    end
    go 
    ```

# spring - 在 InventoryController 类中有一些问题？

> ID：10485980
> 
> 赞同：0
> 
> 时间：2012-05-07T16:57:34.013
> 
> 标签：spring, jakarta-ee

这些天我正在通过[http://static.springsource.org](http://static.springsource.org)学习 spring 。我在这个页面[http://static.springsource.org/docs/Spring-MVC-step-by-step/part4.html](http://static.springsource.org/docs/Spring-MVC-step-by-step/part4.html)遇到了一些问题。我不清楚当调用 InventoryController 类时调用 setProductManager 方法时。我知道这可以用作前端控制器，当请求 hello.jsp 页面时，会执行 InventoryController 的 ModelAndView 方法。但我想知道何时调用 setProductManager 方法。

任何帮助都是不言而喻的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:20:33.950

Spring 是一个[ioc](/questions/tagged/ioc "显示标记为“ioc”的问题")容器，在这个特定的示例中，[依赖注入](/questions/tagged/dependency-injection "显示标记为“依赖注入”的问题")是使用 setter（*setter injection*）实现的。基本上，容器负责为您的 bean（在本例中为控制器）提供必要的依赖项。

回到您的问题：在您的 bean 被框架或任何其他需要它的 bean 使用之前执行依赖注入。此外，控制器是单例的。这意味着`setProductManager`在控制器处理任何请求之前调用 - 当应用程序启动时。而且因为控制器只有一个实例 - 它被调用一次。

# c# - 使用 HttpListener 提供要下载的文件时性能不佳

> ID：10485985
> 
> 赞同：1
> 
> 时间：2012-05-07T16:57:48.670
> 
> 标签：c#, httplistener

我正在尝试使用`HttpListener`in创建一个简单的 Web 服务器`C#`并提供要下载的文件。我发现传输率非常差，尤其是与从共享中复制同一文件相比。这是已知的`HttpListener`，可以做些什么来改进它？

这里有一些关于我对这个问题所做的研究的额外信息。本地连接时下载速率提高很多，但在这种情况下复制文件几乎是立即完成的，因此很难衡量差异率。但是，当远程连接（`LAN`环境，机器彼此相邻）时，传输时间大约是从共享中复制简单文件时间的 25 倍。似乎没有使用可用的网络带宽来加快速度。

我发现其他一些问题和讨论`HttpListener`似乎表明了类似的问题，请参见此处：

[HttpListener 与本机性能](https://stackoverflow.com/questions/4455887/httplistener-vs-native-http-performance)

[HttpListener 性能优化](https://stackoverflow.com/questions/6907841/httplistener-performance-optimization)（但这与下载无关）

[MSDN 文档](http://msdn.microsoft.com/de-de/library/ms229710.aspx)还指出，`HttpListener`它基于`http.sys`允许带宽限制。可能是这里发生了一些不需要的带宽限制，还是我的代码有问题？在我测试过的机器（Windows 7 和 Windows 2008 R2）上，没有 IIS。

在我的示例中，我开始`HttpListener`这样：

```
 HttpListener listener = new HttpListener();
  listener.Prefixes.Add("http://*:80/");
  listener.Start(); 
```

这是我的简单文件下载的代码：

```
 HttpListenerResponse response = null;
  try {
      HttpListenerContext context = listener.GetContext();

      response = context.Response;

      using( FileStream fs = File.OpenRead( @"c:\downloadsample\testfile.pdf" ) ) {

          byte[] buffer = new byte[ 32768 ];
          int read;
          while( ( read = fs.Read( buffer, 0, buffer.Length ) ) > 0 ) {
              response.OutputStream.Write( buffer, 0, read );
          }
      }

  } finally {
      if( response != null )
          response.Close();
  } 
```

（编辑：修复了一些链接......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-05T20:06:56.733

## 全面的

运行的两个测试（C# HttpListener 服务文件和 smb 文件复制测试）包含太多变量，无法得出关于 HttpListener 与本机代码性能的任何有用结论。

在这种情况下，所有其他代码都应该被怀疑会导致性能问题，并且应该从测试用例中删除。

不幸的是，提供文件的问题的实现不是最佳的，因为它将文件中的一个块读取到托管字节数组中，然后阻塞调用将该块写入内核。它将文件的字节复制到托管数组中并从托管数组中返回（在此过程中不添加任何值）。使用 .Net 4.5，您可以在文件流和输出流之间调用 CopyToAsync，这样您就无需考虑如何并行执行此操作。

## 结论

下面的测试表明，HttpListener 发送回字节的速度与 IIS Express 8.0 返回文件的速度一样快。对于这篇文章，我在一个普通的 802.11n 网络上使用虚拟机上的服务器对其进行了测试，并且使用 HttpListener 和 IIS Express 仍然达到了 100+ Mbps。

原始帖子中唯一需要更改的是它如何读取文件以将其转发回客户端。

如果您想通过 HTTP 提供文件，您可能应该使用现有的 Web 服务器来处理事物的 HTTP 端和文件打开/缓存/中继。您会发现很难击败现有的 Web 服务器，尤其是当您将 gzipping 动态响应带入图片时（在这种情况下，天真的方法会在发送任何响应之前意外地 gzip 整个响应，这会浪费本可用于发送字节）。

# 更好的测试来隔离 HttpListener 的性能

我创建了一个测试，它返回一个 10 MB 的整数字符串（在启动时生成一次），以允许测试 HttpListener 在预先给定整个块时返回数据的速度（这类似于使用 CopyToAsync 时可以执行的操作）。

# 测试设置

客户端计算机：MacBook Air 2013 年中，1.7 GHz Core i7 服务器计算机：iMac 2011 年中，3.4 GHz Core i7 - Windows 8.1 托管在 VMWare Fusion 6.0 中，桥接网络：802.11n via Airport Extreme（位于 8 英尺外）下载客户端：Mac OS X 上的 curl

# 试验结果

IIS Express 8.0 配置为提供 18 MB 的文件，HttpListenerSpeed 程序设置为返回 10 MB 和 100 MB 的响应。测试结果基本相同。

## IIS Express 8.0 结果

```
Harolds-MacBook-Air:~ huntharo$ curl -L http://iMacWin81.local:8000/TortoiseSVN-1.8.2.24708-x64-svn-1.8.3.msi > /dev/null
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 18.4M  100 18.4M    0     0  13.1M      0  0:00:01  0:00:01 --:--:-- 13.1M

Harolds-MacBook-Air:~ huntharo$ curl -L http://iMacWin81.local:8000/TortoiseSVN-1.8.2.24708-x64-svn-1.8.3.msi > /dev/null
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 18.4M  100 18.4M    0     0  13.0M      0  0:00:01  0:00:01 --:--:-- 13.1M

Harolds-MacBook-Air:~ huntharo$ curl -L http://iMacWin81.local:8000/TortoiseSVN-1.8.2.24708-x64-svn-1.8.3.msi > /dev/null
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 18.4M  100 18.4M    0     0  9688k      0  0:00:01  0:00:01 --:--:-- 9737k 
```

## HttpListenerSpeed 结果

```
Harolds-MacBook-Air:~ huntharo$ curl -L http://iMacWin81.local:8080/garbage > /dev/null
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 18.4M  100 18.4M    0     0  12.6M      0  0:00:01  0:00:01 --:--:-- 13.1M

Harolds-MacBook-Air:~ huntharo$ curl -L http://iMacWin81.local:8080/garbage > /dev/null
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 18.4M  100 18.4M    0     0  13.1M      0  0:00:01  0:00:01 --:--:-- 13.1M

Harolds-MacBook-Air:~ huntharo$ curl -L http://iMacWin81.local:8080/garbage > /dev/null
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 18.4M  100 18.4M    0     0  13.2M      0  0:00:01  0:00:01 --:--:-- 13.2M 
```

# HttpListenerSpeed 代码

```
using System;
using System.Threading.Tasks;
using System.Net;
using System.Threading;

namespace HttpListenerSpeed
{
    class Program
    {
        static void Main(string[] args)
        {
            var listener = new Listener();

            Console.WriteLine("Press Enter to exit");
            Console.ReadLine();

            listener.Shutdown();
        }
    }

    internal class Listener
    {
        private const int RequestDispatchThreadCount = 4;
        private readonly HttpListener _httpListener = new HttpListener();
        private readonly Thread[] _requestThreads;
        private readonly byte[] _garbage;

        internal Listener()
        {
            _garbage = CreateGarbage();

            _httpListener.Prefixes.Add("http://*:8080/");
            _httpListener.Start();
            _requestThreads = new Thread[RequestDispatchThreadCount];
            for (int i = 0; i < _requestThreads.Length; i++)
            {
                _requestThreads[i] = new Thread(RequestDispatchThread);
                _requestThreads[i].Start();
            }
        }

        private static byte[] CreateGarbage()
        {
            int[] numbers = new int[2150000];

            for (int i = 0; i < numbers.Length; i++)
            {
                numbers[i] = 1000000 + i;
            }

            Shuffle(numbers);

            return System.Text.Encoding.UTF8.GetBytes(string.Join<int>(", ", numbers));
        }

        private static void Shuffle<T>(T[] array)
        {
            Random random = new Random();
            for (int i = array.Length; i > 1; i--)
            {
                // Pick random element to swap.
                int j = random.Next(i); // 0 <= j <= i-1
                // Swap.
                T tmp = array[j];
                array[j] = array[i - 1];
                array[i - 1] = tmp;
            }
        }

        private void RequestDispatchThread()
        {
            while (_httpListener.IsListening)
            {
                string url = string.Empty;

                try
                {
                    // Yeah, this blocks, but that's the whole point of this thread
                    // Note: the number of threads that are dispatching requets in no way limits the number of "open" requests that we can have
                    var context = _httpListener.GetContext();

                    // For this demo we only support GET
                    if (context.Request.HttpMethod != "GET")
                    {
                        context.Response.StatusCode = (int)HttpStatusCode.NotFound;
                        context.Response.Close();
                    }

                    // Don't care what the URL is... you're getting a bunch of garbage, and you better like it!
                    context.Response.StatusCode = (int)HttpStatusCode.OK;
                    context.Response.ContentLength64 = _garbage.Length;
                    context.Response.OutputStream.BeginWrite(_garbage, 0, _garbage.Length, result =>
                    {
                        context.Response.OutputStream.EndWrite(result);
                        context.Response.Close();
                    }, context);
                }
                catch (System.Net.HttpListenerException e)
                {
                    // Bail out - this happens on shutdown
                    return;
                }
                catch (Exception e)
                {
                    Console.WriteLine("Unexpected exception: {0}", e.Message);
                }
            }
        }

        internal void Shutdown()
        {
            if (!_httpListener.IsListening)
            {
                return;
            }

            // Stop the listener
            _httpListener.Stop();

            //  Wait for all the request threads to stop
            for (int i = 0; i < _requestThreads.Length; i++)
            {
                var thread = _requestThreads[i];
                if (thread != null) thread.Join();
                _requestThreads[i] = null;
            }
        }
    }
} 
```

# c - char数组的sizeof操作

> ID：10485986
> 
> 赞同：0
> 
> 时间：2012-05-07T16:57:49.770
> 
> 标签：c, sizeof

> **可能重复：如何**[在 C 编程语言中](https://stackoverflow.com/questions/1975128/sizeof-an-array-in-the-c-programming-language)
> [找到数组的大小（指向数组的指针）大小？](https://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array)

```
#include<stdio.h>

void doit(char x[10]){
    printf("%d\n", sizeof(x));
}

void main(void){
    char x[10];
    printf("%d\n", sizeof(x));
    doit(x);
} 
```

** 我不知道为什么我的问题第一次被删除。** 这里的两个输出是不同的。显然第一个知道 x 是一个数组，第二个只知道它是一个 ptr。我的问题是为什么编译器知道在第一种情况下它是一个数组而不是一个ptr？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:22:35.460

我不是编译器专家，但在编译阶段，编译器会执行一些称为*语义分析*的操作。在此阶段，将完成类型检查。`sizeof`也是一个编译时运算符（可能不包括 VLArrays），并且在类型检查期间，编译器确定 in `main`,`x`是一个数组，而在`doit`函数中它是一个指针。

就像，编译器是房屋的所有者，*因此它知道其租户的类型*。

[在wiki](http://en.wikipedia.org/wiki/Compiler#Front_end)上阅读编译过程

# apache - Tomcat重定向将用户带到域外

> ID：10485987
> 
> 赞同：0
> 
> 时间：2012-05-07T16:57:58.980
> 
> 标签：apache, tomcat

我的 web.xml 中有这个配置

```
<servlet>
    <servlet-name>welcome</servlet-name>
    <servlet-class>com.me.util.WelcomeServletPublic</servlet-class>
    <init-param>
        <param-name>redirect</param-name>
        <param-value>/login/login.action</param-value>

    </init-param>
    </servlet>
<welcome-file-list>
        <welcome-file>welcome</welcome-file>
    </welcome-file-list> 
```

在我的开发环境中，这个重定向工作得很好。现在所有东西都移到了我的生产环境中，重定向不起作用。

应该发生的事情是当您转到[https://mydomain.com](https://mydomain.com)时，它会将您重定向到[https://mydomain.com/login/login.action](https://mydomain.com/login/login.action)

什么是它重定向到[https://login/login.action](https://login/login.action)，它失去了域名

现在让我想知道哪里出了问题的最重要的事情是我的生产服务器是如何配置的。

在前门，我有运行 mod_jk 的 apache。有两个监听器，80 和 443。80 监听器配置了 mod_rewrite 以获取 http:// url 并将其重写为 https://。然后 443 侦听器接收请求并将其转储到 mod_jk，mod_jk 通过端口 8009 将请求重定向到 tomcat。tomcat 正在运行大约 6 个应用程序，每个应用程序都在自己的虚拟主机中。

我从来没有做过这样的配置，也不知道在哪里解决这个问题。我知道我不能将前面的 / 从 servlet 中的 url 中取出，因为如果有人访问 mydomain.com/users，它会将他们重定向到 mydomain.com/users/login/login.action，所以我真的不不知道从哪里开始。

这是我的 apache vhost 配置

```
 <VirtualHost 10.99.10.30:80>
        ServerName boardingsurvey.mydomain.org
        ServerAlias boardingsurvey.mydomain.org

        RewriteEngine On
        RewriteCond %{HTTPS} off
        RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}
</VirtualHost>

<VirtualHost 10.99.10.30:443>
        ServerName boardingsurvey.mydomain.org
        ServerAlias boardingsurvey.mydomain.org
        DocumentRoot /var/www/vhosts/bss
        <Directory "/var/www/vhosts/bss">
                AllowOverride None
                Options Indexes FollowSymLinks
                Order allow,deny
                Allow from all
        </Directory>

        JkMount /* bss

        SSLEngine on
        SSLCipherSuite ALL:!ADH:!EXP56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL
        SSLCertificateFile /etc/apache2/ssl/ssl.crt
        SSLCertificateKeyFile /etc/apache2/ssl/ssl.key
        SSLCertificateChainFile /etc/apache2/ssl/intermediate.crt
</VirtualHost>

~ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:02:28.000

发生这种情况的完整解释如下。

通过在重定向中添加额外的“/”，用于重定向的路径是 //login/login.action

这种类型的 URL 通常被称为“协议相对”URL，尽管正确的名称是“网络路径引用”。请参阅 RFC 3986。第 4.2 节。用作重定向的绝对 URL 是使用 <current-protocol>:<network-path reference> 生成的，在这种情况下会给出[http://login/login.action](http://login/login.action)

当您想指定主机但不知道用户代理使用的是 http 还是 https 并且传递给重定向的字符串将是“//host:port/contextpath/”时，网络路径引用通常用于生成重定向servletpath/pathinfo”。对 Servlet 规范 3.0 和更早版本的严格解释不允许使用网络路径引用进行重定向。Servlet 3.1 将允许它们，而 Tomcat 7 的最新版本也允许它们用于 Servlet 3.0 和更早版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:40:46.167

[https://stackoverflow.com/users/1299005/mark-thomas](https://stackoverflow.com/users/1299005/mark-thomas)上面的评论是问题所在。我的welcomeservlet 在url 中添加了一个额外的/，这就是我重写的原因。

# php - 在php中打印javascript的值

> ID：10485988
> 
> 赞同：0
> 
> 时间：2012-05-07T16:57:59.680
> 
> 标签：php, javascript, printing

我需要编写类似的代码以在 php 中打印 javascript 的值

```
<?php

$url = ( Value of <script>document.write(top.location.href);</script> );

echo ''.$url.'';

?> 
```

* * *

**更新：** 我需要这个来打破框架，阻止代理网站和机器人，所以 $_SERVER 没用

请任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:59:45.930

不，这是不可能的，因为 PHP（服务器端）在 javascript（客户端）代码之前运行。你可以做相反的事情。您将不得不诉诸其中之一：

*   AJAX
*   隐藏场
*   请求参数

但是，如果您想阅读*当前*页面的 URL，您可以使用：

```
$_SERVER['REQUEST_URI'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T17:00:47.157

要在 PHP 中做你正在做的事情，你可以做`$url = $_SERVER['PHP_SELF'];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T17:01:59.870

您可能没有以正确的方式看待这个问题。您可以通过查看此变量来查看 url 中的当前路径

```
echo $_SERVER['REQUEST_URI']; 
```

[阅读更多](http://php.net/manual/en/reserved.variables.server.php)

**更新：**

由于您想防止您的网站位于 iframe 下，您可以使用谷歌框架破坏脚本，它完全是在 javascript 中完成的。

# javascript - 使用 Chrome 的用户脚本劫持变量

> ID：10485992
> 
> 赞同：11
> 
> 时间：2012-05-07T16:58:19.467
> 
> 标签：javascript, google-chrome, userscripts, content-script

我正在尝试使用用户脚本更改页面中的变量。我知道在源代码中有一个变量

```
var smilies = false; 
```

从理论上讲，我应该能够像这样改变它：

```
unsafeWindow.smilies = true; 
```

但它不起作用。当我试图在不劫持的情况下向控制台发出警报或将变量记录到控制台时，我发现它是未定义的。

```
alert(unsafeWindow.smilies); // undefined !!! 
```

**编辑：我正在使用 Chrome，如果它改变任何东西......**

[http://code.google.com/chrome/extensions/content_scripts.html](http://code.google.com/chrome/extensions/content_scripts.html)说：

> 内容脚本在称为孤立世界的特殊环境中执行。他们可以访问被注入页面的 DOM，但不能访问页面创建的任何 JavaScript 变量或函数。它查看每个内容脚本，就好像它正在运行的页面上没有执行其他 JavaScript。

这是关于 Chrome 扩展的，但我想这与用户脚本也是一样的吗？

谢谢你，Rob W。所以需要它的人的工作代码：

```
var scriptText = "smilies = true;";
var rwscript = document.createElement("script");
rwscript.type = "text/javascript";
rwscript.textContent = scriptText;
document.documentElement.appendChild(rwscript);
rwscript.parentNode.removeChild(rwscript); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-07T17:14:47.313

在[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html#execution-environment)`window`（Chrome 扩展）中，页面的全局对象和内容脚本的全局对象之间有严格的区分。

*   要注入代码，[必须注入脚本标签](https://stackoverflow.com/a/9517879/938089?building-a-chrome-extension-inject-code-in-a-page-using-a-content-script)。
*   覆盖变量很简单。
    覆盖变量，以防止变量被覆盖，需要使用^([Example + notes](https://stackoverflow.com/a/9348685/938089?stop-a-function-from-execute-with-chrome-extension))。[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)

最终内容脚本的代码：

```
// This function is going to be stringified, and injected in the page
var code = function() {
    // window is identical to the page's window, since this script is injected
    Object.defineProperty(window, 'smilies', {
        value: true
    });
    // Or simply: window.smilies = true;
};
var script = document.createElement('script');
script.textContent = '(' + code + ')()';
(document.head||document.documentElement).appendChild(script);
script.parentNode.removeChild(script); 
```

# drupal - Apachesolr 查询 - 按字段中的文本过滤

> ID：10485996
> 
> 赞同：0
> 
> 时间：2012-05-07T16:59:01.320
> 
> 标签：drupal, solr, drupal-7

我正在以编程方式在我的 Drupal 模块中构建一个 apachesolr 查询，并且在某些方面取得了成功，但在其他方面仍在苦苦挣扎。

到目前为止，我已经能够构建一个查询，该查询可以搜索特定文本并使用以下代码根据要过滤的术语限制结果：

```
$subquery_region->addFilter('tid', $term->tid);
$query->addFilterSubQuery($subquery_region, 'OR', 'AND'); 
```

我接下来想要实现的是能够通过添加过滤器来进一步缩小搜索范围，以在节点的特定**字段中查找特定文本。**有没有人能够做到这一点。

我一直在网上研究并尝试了很多不同的方法，例如将过滤器直接添加到主搜索查询中

```
$query->addParam('fl', 'ss_my_field');
$query->addFilter("ss_my_field", "field_substring_to_search_for"); 
```

以及将其分解为子查询以添加到主搜索查询

```
$subquery_test = apachesolr_drupal_query("Test");
$subquery_test->addParam('fl', 'ss_my_field');
$subquery_test->addFilter("ss_my_field", "field_substring_to_search_for");
$query->addFilterSubQuery($subquery_test, 'OR', 'AND'); 
```

但这些都不起作用。他们返回一个空集，即使我知道子字符串存在于我作为过滤器添加的字段中并且它已被索引。我已经通过 apachesorl 视图模块验证了搜索索引已经填充了该字段并且可以看到子字符串存在。

我的语法或构建查询的方式有什么问题吗？

如果您知道如何添加过滤器以在某些字段中搜索文本，请分享！它甚至可能无法使用 addFilter 函数完成，但这就是我迄今为止所尝试的全部。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:11:01.317

首先，您必须为该特定字段创建索引。

```
function hook_apachesolr_update_index(&$document, $node) {
  $document->ss_your_field_name = $node->your_field_name;
} 
```

其中 ss_* 是模式。
ss_* -> 字符串is_*
-> 整数
im_* -> 整数，多值

之后，您必须
1\. 删除索引 - admin/settings/apachesolr/index
2\. 重新索引内容
3\. 运行 cron
4\. 检查您创建的过滤器 - admin/reports/apachesolr/index

然后，您可以添加过滤器

```
$query->addFilter("ss_your_field_name", "value"); 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:36:41.133

```
function hook_apachesolr_modify_query(&$query, &$params, $caller){
  $subquery = apachesolr_drupal_query();
  $subquery->add_filter("ss_my_field", "field_substring_to_search_for");
  $query->add_subquery($subquery, "AND");
} 
```