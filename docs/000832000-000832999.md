# StackOverflow 问答 000832000-000832999

# sql-server-2005 - Management Studio 中“连接到服务器”的键盘快捷键

> ID：832000
> 
> 赞同：10
> 
> 时间：2009-05-06T21:59:53.173
> 
> 标签：sql-server-2005, ssms

Microsoft SQL Server Server Management Studio 中的“连接到服务器”模式窗口是否有键盘快捷键？

首次从“开始”菜单或快捷方式打开 SQL Server Management Studio 时显示的模式窗口。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-05-27T07:56:02.717

另一种方法是创建快捷方式。例如，我为此使用：Ctrl+K,Ctrl+O。

1.  工具 > 选项
2.  环境 > 键盘 > 键盘
3.  写入包含以下内容的显示命令：Query.ChangeConnection
4.  按下快捷键（当前未用于任何其他操作）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-06T22:39:01.287

F8（对象资源管理器）、Alt + F（文件菜单）、E（连接对象资源管理器）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-05-05T16:28:15.413

在 SSMS 中打开查询。在菜单栏中，选择工具 -> 选项 -> 键盘（在环境节点下）

![截屏](https://i.stack.imgur.com/7MfPA.png)

在 Press Shortcut Keys 中 – 按您要分配给快捷方式的键。就我而言，我使用了 F2。在命令框中突出显示 Query.ChangeConnection 并单击分配。这将在按下 F2 时打开 SQL Server 连接窗口。

[https://ashleybickerstaffe.wordpress.com/2016/05/04/change-sql-server-management-studio-ssms-connection-keyboard-shortcut/](https://ashleybickerstaffe.wordpress.com/2016/05/04/change-sql-server-management-studio-ssms-connection-keyboard-shortcut/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-14T12:39:40.357

仅适用于 ssms 2012

我发现的一种解决方法是自定义“查询”菜单栏上的选项列表，并将“更改连接...”选项移动到“查询|连接”下的顶部。完成后，键盘快捷键将是，

**'Alt' + 'Q'，'右箭头键'然后'输入键'。**

顺便说一句，要自定义“查询”以将“更改连接...”移动到顶部：

1.  右键单击“更改连接”图标
2.  选择“自定义...”
3.  选择“命令”选项卡
4.  从“菜单栏”下拉菜单中选择“查询|连接”
5.  在“控件：”框中选择“更改连接...”选项并将其移至顶部。

现在，**“Alt”+“Q”，“右箭头键”，然后“输入键”。** 可以使用了。如果没有自定义，快捷方式将是**“Alt”+“Q”、“右箭头键”、“向上箭头键”然后是“Enter 键”。**

顺便说一句，要连接到对象资源管理器，**Alt + F, E**有效。

# c# - 在 C# 中如何使用 OLEDB（没有自动化）访问 excel 标题？

> ID：832001
> 
> 赞同：3
> 
> 时间：2009-05-06T21:59:57.043
> 
> 标签：c#, excel, oledb

这是我试图访问第一行第一列的代码

```
 string connectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;
                                      Data Source=" + fileName + @";Extended Properties=""Excel 8.0;HDR=NO;""";
            string CreateCommand = "SELECT * FROM [Sheet1$]";
            OleDbConnection conn = new OleDbConnection(connectionString);

              conn.Open();
              OleDbCommand cmd = new OleDbCommand(CreateCommand, conn);
             //   cmd.ExecuteNonQuery();
               DbDataReader dr= cmd.ExecuteReader();

              int i = 0;

               while (dr.Read())
               {

                   string ab = dr.GetValue(i).ToString();
                   MessageBox.Show(ab);
                   i++;
               } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T23:10:34.970

你试过 HDR=YES 吗？这就是告诉 OLEDB 提供商您确实有标题行的原因。

[http://connectionstrings.com/excel](http://connectionstrings.com/excel)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T00:12:25.820

您不想设置 HDR=No 吗？

告诉 OLEDB 提供程序第一行包含标题将导致提供程序使用标题作为字段的名称。（我正在考虑将信息转储到数据表中，之后您将获得信息 @ DataTable.Columns["[HEADER]"].Row....）

由于您使用的是简单的数据读取器，并且您希望将“标题”字段作为数据读取，因此请指定这些不是标题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-05-18T15:04:21.740

我一直使用 GetSchema 的内置函数来枚举表格和标题。这真的很漂亮，没有废话。祝你好运！

```
OleDbConnection xl = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=filename.xlsx;Extended Properties=\"Excel 12.0 Xml;HDR=YES;IMEX=1\"");
xl.Open();

//Get columns
DataTable dtColumns = xl.GetSchema("Columns", new string[] { null, null, sheetName, null });
List<string> columns = new List<string>();
foreach (DataRow dr in dtColumns.Rows)
   columns.Add(dr[3].ToString());

xl.Close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T06:33:54.820

```
string xlPath = @"D:\Temparary.xlsx";    //location of xlsx file

string constr = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + xlPath + ";Extended Properties=\"Excel 12.0 Xml; HDR=YES; IMEX=1;\"";

OleDbConnection con = new OleDbConnection(constr);

OleDbCommand cmd = new OleDbCommand("select * from [Sheet1$]",con);

con.Open();

OleDbDataReader dreader = cmd.ExecuteReader();

if (dreader.HasRows)
{
    dreader.Read();
    Label2.Text = dreader.GetValue(0).ToString();

}

dreader.Close();

con.Close(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-05-03T17:14:26.167

我有一个不同的问题，但能够访问第一行 Excel 数据并通过我通过堆栈溢出发布的[OleDBAdapter Excel QA将其删除。](https://stackoverflow.com/questions/3232281/oledb-mixed-excel-datatypes-missing-data/5721521#5721521)

如果您尝试访问第一行第一列，只需根据我提到的帖子填充数据集并添加到底部：

```
 // DataSet:          
    Object o = ds.Tables["xlsImport"].Rows[0]["LocationID"];
    Object oa = ds.Tables["xlsImport"].Rows[0]["PartID"];            
    Object row0Col3 = ds.Tables["xlsImport"].Rows[0][3];

    string valLocationID = o.ToString();
    string valPartID = oa.ToString();
    string rowZeroColumn3 = row0Col3.ToString(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-05-12T15:05:34.763

```
// CODE TO SET UP THE CONNECTION BETWEEN EXCEL AND VS2005 
// IN EXTENDED PROPERTIES SET HDR = YES FOR READING FIRST ROW AND HEADERS.
// IN EXTENDED PROPERTIES SET IMEX = 1 TO READ INTERMIXED DATA.

excelCon = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\ExcelDBtrial.xls;Extended Properties='Excel 8.0;HDR=Yes;IMEX=1'");
excelCon.Open();
exDA = new OleDbDataAdapter("Select * from [Sheet1$]", excelCon);
exDA.Fill(exDT);

//CODE TO ADD TABLE HEADERS INTO THE HEADERS COMBOBOX
foreach (DataColumn dc in exDT.Columns)
    headerCB.Items.Add(dc.ToString()); 
```

# python - Python：查找包内的所有包

> ID：832004
> 
> 赞同：9
> 
> 时间：2009-05-06T22:00:39.600
> 
> 标签：python, import, packages

给定一个包，我怎样才能自动找到它的所有子包？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-06T22:11:51.587

您不能依赖已加载模块的自省，因为可能尚未加载子包。您必须查看文件系统，假设有问题的顶级包不是鸡蛋、zip 文件、扩展模块或从内存加载。

```
def get_subpackages(module):
    dir = os.path.dirname(module.__file__)
    def is_package(d):
        d = os.path.join(dir, d)
        return os.path.isdir(d) and glob.glob(os.path.join(d, '__init__.py*'))

    return filter(is_package, os.listdir(dir)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T22:32:25.077

受詹姆斯埃默顿回答的启发：

```
def find_subpackages(module):
    result=[]
    for thing in os.listdir(os.path.dirname(module.__file__)):
        full=os.path.join(os.path.dirname(module.__file__),thing)
        if os.path.isdir(full):
            if glob.glob(os.path.join(full, '__init__.py*'))!=[]:
                result.append(thing)
    return result 
```

# assembly - 为什么现成的应用程序可以在 Intel 和 AMD 处理器上运行？

> ID：832007
> 
> 赞同：10
> 
> 时间：2009-05-06T22:01:42.360
> 
> 标签：assembly, cpu, compatibility

我缺乏理解的一件事是为 Intel CPU 编译的代码如何在 AMD CPU 上工作。

我的基本理解是，例如，如果您编译 C 代码，编译器会将源代码转换为机器语言，机器语言将具有针对特定处理器的指令。因此，您需要为您希望应用程序使用的任何平台使用编译器进行编译。为什么您不需要针对 AMD 和 Intel 的编译器，而必须为特定处理器购买软件？

我知道 AMD 处理器和 Intel 处理器在旧的 x86 指令中有一些兼容性。我想知道的是他们是怎么做到的？我的意思是，不像 AMD 或 Intel 互相打电话并告诉对方他们的商业机密，那么他们如何创建兼容的指令集呢？

是否所有的兼容性仍然基于 386 指令集，以及诸如“如果 AMD CPU，这样做 ELSE IF INTEL 那样做”之类的语句？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-06T22:04:14.257

AMD 和 Intel x86 和 x86-64 CPU 几乎完全兼容。它们都实现了所有的 x86 和 x86-64。它们每个都有自己的扩展（如 MMX 和 3DNow），但编译器通常不会使用它们，除非你告诉他们这样做。如今，AMD 和 Intel 几乎都支持彼此的所有扩展。唯一可能需要担心差异的是当您在做真正低级的内核工作时。

顺便说一句，指令集并不是真正的“商业机密”。实现是。两家公司都制作有关指令集的文档，因此每个人都可以复制它。原因可能是，如果更多的公司生产兼容的芯片，就会为这个指令集编写更多的软件，所以会有更多的人购买这些芯片。x86/x86-64 基本上是台式机的标准架构，保证人们会继续购买 Intel 和 AMD 芯片。Intel 和 AMD 有非常不同的实现，它们只是执行相同的代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-06T22:05:09.060

实际上，他们确实有交叉许可协议。早在 90 年代，当 AMD 成为 386 和 486 处理器的第二来源时，信息和创新从 Intel 流向 AMD，然后在 Intel 采用 x86-64 扩展时从 AMD 流向 Intel。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-06T22:07:08.977

还要记住，这些处理器的指令集是公开记录的；通常一个供应商会发明一套新的指令，一两代之后另一个供应商将实现兼容的扩展。因此，而不是 IF 386 .... 您有更多类似于 IF SSE4 IS SUPPORTED ... 的内容，而不考虑特定的供应商。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T22:11:42.897

两家供应商都实现了相同的指令集，因此当您编译的代码变成机器指令时，它们将在两个芯片上工作。但是，有一些特殊的指令集，例如 SSE，可以特定于一个供应商或另一个供应商。如果您想提高应用程序的性能，您可以进行运行时检查以在可用时使用这些功能。

# css - 多个 CSS 选择器

> ID：832009
> 
> 赞同：2
> 
> 时间：2009-05-06T22:02:27.770
> 
> 标签：css

当 id 和 class 选择器都匹配时，我想定位一个 HTML 元素。

即，如果字段集具有 id 'id1' AND class 'collapsed'，则应用一些 CSS 规则（以确保其高度减少到零）。

CSS 2.1 文档建议多个属性选择器可以完成此任务：

[http://www.w3.org/TR/CSS2/selector.html#matching-attrs](http://www.w3.org/TR/CSS2/selector.html#matching-attrs)

但是下面的语法似乎没有生效（在 Safari 和 FFox3 中测试过）：

```
div[id=id1][class=collapsed] { display: none ; } 
```

有没有办法做这样的事情？

```
div#id1.collapsed { /* rules */ } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T22:08:39.207

你做对了，但是选择器的顺序不对，需要先放元素，再放类，再放id

```
div.myclass#myid { /*rules*/ } 
```

重要编辑：

```
div#myid.myclass { /*rules*/ } 
```

也有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T22:13:39.320

你想要`div.myclass#myid { /*rules*/ }`，但有一个警告：这在 IE 中不起作用（一如既往）

请参阅[http://css-discuss.incutio.com/?page=InternetExplorerWinBugs （特别是在](http://css-discuss.incutio.com/?page=InternetExplorerWinBugs)[http://archivist.incutio.com/viewlist/css-discuss/60941](http://archivist.incutio.com/viewlist/css-discuss/60941)中讨论的 Multiple ID 类错误）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T22:19:31.130

谢谢克鲁斯蒂！还要感谢 DarkWulf 关于 IE 的警告 :)

顺便说一句，我发现我尝试的方法的语法略有错误。

我正在尝试的正确代码（多个属性选择器）应该是

```
div[id="id1"][class~="collapsed"] { /* */ } 
```

波浪号表示 div[class~="collapsed] 将与 div.collapsed 相同的规则匹配，即针对任何指定的类。

```
div[class="collapsed"] { } 
```

*完全*匹配类属性，所以它会匹配

```
<div class="collapsed"></div> 
```

并且*不*匹配

```
<div class="collapsible collapsed"></div> 
```

# asp.net - 通过控制对特定文件的访问

> ID：832011
> 
> 赞同：0
> 
> 时间：2009-05-06T22:02:37.317
> 
> 标签：asp.net, authentication, asp.net-membership, forms-authentication, authorization

A) 我们还可以使用`<location>`标签控制对特定文件的访问。为什么 `<location>`元素不包含在`<system.web>`标签内，而是直接嵌套在`<configuration>`元素内？

B）我意识到`<system.web>`元素用于 Asp.Net 设置，但为什么`<location>` 还包含`<system.web>`？是否指定内部指定的设置`<system.web>`仅适用于文件包含在 Asp.Net 应用程序中的情况？

如果是这样，那么这是否表明该`<location>`元素也可以用于非 Asp.Net 应用程序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T23:04:45.420

*胡乱猜测*

几乎可以肯定是要与代码访问安全性绑定，它可以使用 URL 作为代码组的成员资格条件。我不认为这是在 .NET 中完全表达或实现的，但这意味着相同的架构可以用于非 ASP.NET 场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T22:13:28.243

问题是这`<system.web>`不是影响 ASP.NET 应用程序的唯一元素。`<location>`可以覆盖某些页面的一些默认值。这是来自 MSDN 的示例：

```
<configuration>
    <location path="UploadPage.aspx">
        <httpRuntime maxRequestLength="128"/>
    </location>
</configuration> 
```

# jquery - 之后插入html

> ID：832016
> 
> 赞同：2
> 
> 时间：2009-05-06T22:04:31.540
> 
> 标签：jquery, html, insert, load

我的问题如下：

插入容器的最佳方法是什么`<div>`，以及最后一个插入容器之后的下一个容器？

```
<div class="pane">
    <div class="inhoud">
        <h3>Sample heading</h3>
        <p>Testbericht.</p>
    </div>
    <form id="noteform" class="frm">
        <input type="image" src="images/kn_verwijder.gif" alt="delete" class="delete" />
        <br />
        <input type="hidden" name="frmnoteid" id="frmnoteid" value="" />
    </form>
</div> 
```

到目前为止我所知道的：

*   `$("#foo > div").size()` 使用和`.insertAfter()`方法计算页面上已经存在的 div 的数量。
*   使用选择器和`.load()`方法从文件中加载 html 数据。

问题是我不知道我是否可以正确使用这些方法来获得结果。

如果有人已经有这些经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-06T18:06:46.553

我不太清楚你想要做什么，但你可以做这样的事情......

不使用 load()，而是使用 $.get() 加载 html 而不插入它，然后使用 sucess 回调将其附加到页面中。这样，您无需担心创建包装 div。只需让您的 html 页面 tbnote.html 具有您想要的正确标记。

```
function newnote() {
    $.get("tbnote.html", function(html) {
        if($(.pane).length > 0) { \\test  there is already .pane div on page
            $(".pane:last").after(html);
        } else {
            $("#someOtherDiv").append(html); \\append to another div
        }
    });
} 
```

[after()](http://docs.jquery.com/Manipulation/after#content)将解析 html 响应并将其注入到 dom 中，好吧，在选定元素之后。

使用[$.get](http://docs.jquery.com/Ajax/jQuery.get#urldatacallbacktype)，您还可以做一些更高级的事情，让您的模板能够接受查询字符串或数据，并在呈现页面之前将其插入到您的 html 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T22:13:57.413

你可以使用`$(".divtogoafter:last").append("content to insert");` 最后使用伪选择器，以便最后一个 div 是插入数据的那个。

# php - Web 开发人员在 PHP、Ruby on Rails、Python 等方面使用哪些工具？

> ID：832017
> 
> 赞同：9
> 
> 时间：2009-05-06T22:04:34.100
> 
> 标签：php, python, ruby

一位好朋友刚刚给我发了以下电子邮件

> 我父亲正在为当地一所大学提出一项建议，以建立一个创新和技术中心。作为其中的一部分，他提议他们教授网页设计和网页开发。我的问题是你认为什么是网页设计和网页开发的“行业标准”工具。我想我对网页设计（html、flash、photoshop、dreamweaver）有很好的了解，但我希望你能接受并需要一些关于网页开发（.net、ajax、visual C++、rubyonrails）的指导。想法？

我能够指导他哪些工具在 Microsoft Stack（Visual Studio + Expression Studio）中占主导地位，但我不确定人们使用 ruby​​ on rails、python 或 PHP 等编写的工具是什么。

我在这里问这个是因为：

1.  谁比开发人员更适合问
2.  那些希望开始使用这些语言的人可能会发现这些工具非常有用。

那么你们这些使用这些堆栈的人，你们使用什么类型的工具进行开发？

## 概括

> ### 数据库
> 
> *   [mysql](http://mysql.com/)
> *   [PostgreSQL](http://www.postgresql.org/)
> 
> ### 源代码控制
> 
> *   [颠覆](http://subversion.tigris.org/)
> *   [吉特](http://git-scm.com/)
> *   [水银](http://www.selenic.com/mercurial/wiki/)
> *   [市场](http://bazaar-vcs.org/)
> 
> ### 编辑
> 
> *   [文本伴侣](http://macromates.com/)(Mac)
> *   [记事本++](http://notepad-plus.sourceforge.net/uk/site.htm) (Windows)
> *   emacs 或[vim](http://www.vim.org/)（跨平台）
> 
> ### IDE
> 
> *   [NetBeans](http://www.netbeans.org/)
> *   [阿普塔纳](http://www.aptana.com/)
> *   [Eclipse](http://www.eclipse.org/) -[日食 PDT](http://www.eclipse.org/)
> 
> ### 构架
> 
> *   [Zend 框架](http://framework.zend.com/)(PHP)
> *   [代码点火器](http://codeigniter.com/)(PHP)
> *   [CakePHP](http://cakephp.org/) (PHP)
> *   [Django](http://www.djangoproject.com/) (Python)
> *   [涡轮齿轮](http://www.turbogears.com/)（Python）
> *   [导轨](http://rubyonrails.org/)（红宝石）
> 
> ### 调试
> 
> *   [Xdebug](http://www.xdebug.org/) + [WebGrind](http://code.google.com/p/webgrind/) (PHP)
> *   [Firebug](http://getfirebug.com/)（跨平台，浏览器内）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-06T22:08:24.293

*   svn 或现代 dvcs（git、mercurial 或 bazaar）
*   一般不是IDE。相反，Mac 上的 TextMate、Windows 上的 Notepad++ 或 Linux 上的一个真正的编辑器（emacs 或 vim）。
*   总的来说，MySQL 和 SQL 作为一个单独的项目值得理解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-07T12:59:38.283

Ruby on Rails 实际上有一个隐式默认堆栈。这主要是由贡献社区使用的东西来定义的，并且一些组件随着时间的推移而发生了变化，但与其他社区相比，一些项目的差异令人惊讶地小，这可能既是好事也是坏事。不过，这对学习者来说绝对是有帮助的。

*   **编程语言：** Ruby，用于应用程序开发和系统管理
*   **版本控制系统：** Git
*   **应用程序框架：** Ruby on Rails（显然）
*   **部署系统：** Capistrano
*   **SQL 数据库：** MySQL
*   **Web 服务器：**目前 Apache 与 Passenger，虽然旧的替代品仍然普遍使用
*   **服务器操作系统：** Linux 发行版（Ubuntu 可能是最受欢迎的）

许多专业的 Rails 开发人员使用 Mac OS X 桌面和 TextMate 作为文本编辑器。其余大部分使用 Linux（同样，通常是 Ubuntu）和各种文本编辑器。在 Windows 上为 Rails 开发目前有点问题，而且不是许多开发人员选择做的事情。

IDE 占用的 ATM 不多，但 Netbeans 是一个不错的选择。使用 Netbeans 进行教学的一个好处是您可以在一次安装中获得完整的 Rails 开发堆栈。另一个是它在 Windows 上运行良好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T22:06:16.090

我使用 TextMate 进行 Rails、PHP 和 Python 开发，我喜欢它。

在看到其他答案后，我觉得我应该详细说明。我目前使用 MySQL 作为我的主数据库，使用 Apache 作为 Web 服务器。在 PHP 中编码时，我更喜欢使用 CodeIgniter 而不是“vanilla”php。

然而，最重要的是我使用 SVN，你应该从一开始就使用它（或任何版本控制工具），SVN 让我可以跟踪我的代码的所有不同版本。因此，例如，如果我破坏了在修订版 10 中工作的东西，我可以返回修订版 10，查看我所做的更改并修复它，等等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-27T07:54:09.627

处理大型、复杂的 PHP 应用程序可能会让人不知所措。为此，我们有一个新的 Eclipse 插件：[nWire for PHP](http://www.nwiresoftware.com/products/nwire-php)。

nWire for PHP 是一个创新的 Eclipse 插件（与 Eclipse PDT 和 Zend Studio 7 一起使用），它通过帮助开发人员浏览他们的代码并更好地理解他们的应用程序的架构来加速 PHP 开发。nWire 为实时代码可视化、导航和搜索提供独特的工具。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-07T05:57:39.203

**数据库**MySQL、CouchDB、SQLite

**源代码管理**Git

**编辑器** [TextAdept](http://caladbolg.net/textadept) , E, vim

**框架**CakePHP, Ramaze

**调试**错误消息？:(

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-07T00:54:58.120

**FTP客户端！**如果您能找到一个好的（免费）FTP 程序，您将节省上课时间。有许多免费的 FTP 客户端，但它们通常会遇到以下一些问题：

*   糟糕的界面设计使得向嵌套文件夹上传/下载多个特定文件变得乏味。
*   未优化的单线程传输需要几分钟才能上传数百个文件，即使它们的总大小只有 50KB。
*   错误的 FTP 程序（或它们的错误配置）可能会删除从 mac 上传到 linux 的行尾，这会破坏您的代码。
*   对 SFTP 和存储私有 SSH 密钥文件的支持不佳（或完全缺乏）。

不幸的是，我不能真正推荐任何东西，因为我使用自己的一套 shell 脚本（几年前我自己找不到好的客户时开发的！）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-06T23:01:06.880

*   XDebug 用于调试
*   用于敏捷工具的 phpUnderControl

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-06T23:02:32.010

禁用了 FTW 菜单栏的 emacs，保持头脑敏锐，一旦你的肌肉记忆得到调整，你的工作效率应该会飙升.....也许

eclipse + aptana 也可以是一件好事，我只是希望我能弄清楚如何让它让我只编辑一个该死的文件而无需声明工作区和项目等......

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-06T23:23:09.573

我使用 Eclipse PDT (IDE) 和 Notepad++ (editor) 进行开发。他们互相填写imo。

Kdiff3 用于比较文件。

Subversion 用于工作中的版本控制。但是 git/mercury 可能会更好，尤其是在学校情况下。

在 Windows 上，我使用 WinGrep 搜索包含某些内容的文件（即使您不知道正则表达式也很有用）。（在 linux 上我使用 grep。）

对于数据库，我在工作中使用 MySQL。但是我在以前的工作站点使用过 PostgreSQL，而且效果更好。

对于学校情况，您可能可以在 Web 服务器上使用 xdebug 来在网页上显示带有[堆栈跟踪的](http://www.xdebug.org/docs/stack_trace)错误。您还可以[使用 gui 查看脚本配置文件并进行](http://www.xdebug.org/docs/profiler)交互[调试](http://www.xdebug.org/docs/remote)（与 eclipse 和 notepad++ 一起使用）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-06T23:37:09.960

到目前为止我喜欢aptana

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-01-08T19:50:42.177

*   Ruby on Rails
*   麦克维姆
*   吉特
*   Chrome 具有用于 Web 调试的 Webkit Web 开发检查器
*   MySQL/SQLite（你可能想看看 MongoDB）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-07T00:04:54.857

源代码控制：Git（我喜欢 github.com）

编辑器：TextMate (Mac)，E-TextEditor（Windows，很快在 Linux 上）

IDE：我讨厌 IDE，尤其是那些基于 Eclipse 的，比如 Aptana，但如果你是 IDE 专家或者你的项目/公司需要一个 NetBeans 是最好的。

框架：大部分时间使用 Rails（喜欢 Ruby）。很快看着 Django

PS我不能没有Firebug。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-05-19T17:21:17.207

在 Flash/Flex 中工作时，我发现[De Monster Debugger](http://demonsterdebugger.com/)非常方便。允许您实时查看您的 swf 文件，您可以跟踪任何对象，甚至可以调用对象的方法。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-05-07T00:35:25.453

我会将[pylons](http://pylonshq.com/)添加到 python 下的 Frameworks 部分。和[sqlite](http://www.sqlite.org/)到数据库部分 - 如果主要用于开发目的。

哦，是的，而且[ngrep](http://ngrep.sourceforge.net/)很棒。

```
 home/me$ ngrep -q -tt -W byline tcp and port 80 
```

类似的东西可以让您实时查看通过端口的所有内容。当您处理非标准或不完整或修改的协议（例如 STOMP）时，或者在您需要准确确认您发送的内容的情况下，或者如果您只是好奇时，它非常有用！

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-05-06T22:21:49.767

我主要使用 PHP。我经常使用：

编码环境：**Netbeans、vim**

框架：**Zend 框架（有时是 Code Igniter）**

故障排除和分析：**xdebug、webgrind（或 kcachegrind）**

数据库：**MySQL**

服务器：**阿帕奇**

外壳：**重击**

参考：**php.net，（有时是 StackOverflow！）**

版本控制：**颠覆、保险柜（不是选择）**

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-05-06T22:26:59.677

Zend Framework MySQL Eclipse 作为 IDE（或专门为 Aptana Studio）

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-05-07T02:03:36.210

我将 Aptana/RadRails 用于我的 Ruby on Rails IDE。很好。

最近我更多地使用它的调试器，它为我节省了相当多的时间。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-05-19T16:57:07.860

那么，“行业标准”有点难以确定。这一切都取决于人。但是，我认为总的来说，您应该承诺做很多事情。

1.  PHP、某种 SQL 数据库、HTML、XML、CSS
2.  一种轻量级的编辑方法。例如，Textmate 或 E-text Editor，而不是 Dreamweaver（您永远不应该对为您完成所有事情的程序感到满意，因为您需要自己学习）。
3.  Photoshop 基础知识（甚至是 Gimp，但我不建议这样做）和 Illustrator 基础知识。还有，Pictorial 元素的基本知识（GIF、jpeg 等的区别）

这些只是我对此事的看法。随意不同意。我也使用 Wordpress 和/或 Code Igniter 来完成我所做的一切。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-05-19T17:02:30.740

带有 jVi 插件的 Netbeans。我曾经有过的最大的生产力提升。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-05-19T17:11:18.607

Ruby 工作最重要的工具是 RubyGems。理想情况下，用户应该能够自己安装 gem。RubyGems 可以配置为将 gems 安装在用户的主目录而不是系统范围内，这在多用户机器上可以很好地工作。

当然，好的文本编辑器、版本控制、Firefox 中的 Firebug 或 Opera 中的 Dragonfly 也是必不可少的。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2013-09-02T12:34:54.560

毫无疑问，PHP 是开发人员中最流行的语言之一，可帮助他们创建创新和动态的 Web 应用程序。PHP 开发人员一直在寻找有用且方便的 php 工具，他们可以使用这些工具来使他们的工作流程和与 Web 相关的任务更容易、更快、更好。互联网上有大量 php 工具可供 php 开发人员使用，但找到合适的 php 工具是一项艰巨的任务，需要付出努力和时间。我在网上找到了一些清单。希望这会对你有所帮助。

[http://www.thegeekyglobe.com/top-7-php-tools-for-web-developers.html](http://www.thegeekyglobe.com/top-7-php-tools-for-web-developers.html)

[http://codegeekz.com/10-best-php-tools-for-developers/](http://codegeekz.com/10-best-php-tools-for-developers/)

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2010-01-08T21:44:45.610

本末倒置。仅在绝对必要时引入工具。目标应该是教授编程和协议。投入工具肯定会让学生感到困惑和不知所措。

基于这个问题，我不确定你父亲是否有设计 Web 开发程序的经验。我们在这里谈论学生的未来。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-11-12T14:41:30.423

对于 python PyCharm 和 javascript 我使用 Webstorm

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-05-07T00:54:39.680

对于网页设计师来说，不要忘记 Photoshop、Dreamweaver 和 Flash。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-05-07T00:57:26.493

当推到推（甚至拉）时，我会使用[Wireshark](http://www.wireshark.org/)，因为有时你**真的**需要知道发生了什么！

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2010-01-08T15:11:26.367

我猜你父亲想教的是网络开发。减慢 Web 开发学习速度的一件事是还必须学习如何配置基础架构（例如 Web 服务器、数据库、应用程序服务器等）和部署应用程序。这些活动花费了大量的时间，并打断了学习的流程。

以下应用程序堆栈将大大减少配置和部署基础架构所花费的时间：

*   **应用程序堆栈**：带有 SQLite 数据库的[Ruby On Rails](http://rubyonrails.org/)（因为它不需要配置）。Ruby on Rails 让您可以在本地机器上快速开发。Rails 安装迅速，您的测试环境不需要数据库或 Web 服务器配置。
*   **版本控制**：[git](http://www.git-scm.com/) - git 让您无需配置 git 服务器即可学习版本控制的基础知识。使用 git 只需很少的配置。
*   **部署平台**：[heroku.com](http://heroku.com). 部署到 heroku 只需从命令行运行“git push heroku master”。一旦你这样做了，Heroku.com 有脚本将你的代码编译成应用程序“slug”并启动应用程序服务器并将其连接到你的 PostgreSQL 数据库。（如果您使用“vanilla”ActiveRecord 数据操作，您会发现在本地使用 SQLite 和在 Heroku 上使用 PostgreSQL 之间没有区别）。Heroku 对于小型应用程序、小流量和小型数据库是免费的。即，您父亲的学校不必为部署服务器支付现金。Heroku 还为 Internet 上可见的每个 heroku 应用程序提供了一个唯一的域，如果您使用信用卡验证您的帐户，您可以将您自己的域指向您的 heroku 应用程序。查看[http://docs.heroku。](http://docs.heroku.com/quickstart)了解更多信息。

这里的关键是不必担心配置和部署让学生有更多的心智能力专注于软件设计。

# html - 您如何处理 MS Word 添加的“特殊”字符？

> ID：832020
> 
> 赞同：8
> 
> 时间：2009-05-06T22:05:58.493
> 
> 标签：html, ms-word

我想知道您如何清除 MS Word 中的特殊字符，例如 m 和 n 破折号以及弯引号？

我经常发现自己从 Word 客户端复制内容并粘贴到静态 HTML 页面，但内容以奇怪的字符结尾，因为特殊字符未转换为正确的 ACSII 代码，因此显示为乱码。（对于这些基本网站，我使用的是 Dreamweaver。）

当客户端将内容从 Word 复制到纯文本字段（主要是文本区域）时，我看到了很多类似的问题。当我将它放入 PDF（通过 PHP）或它显示在页面上时，它也有乱码。

你如何处理这个问题？您使用清洁服务或程序吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-08T21:47:28.280

**关于客户在 textareas 中发布 Word 中的复制/粘贴文本：**

确保客户端以任何特定编码向您发送文本（因此希望为您从 CP-1252 [或任何 Word 使用] 进行任何转换）的最可靠方法是将`accept-charset="..."`属性添加到您的所有`<form>`s. 例如：

```
<form ... accept-charset="UTF-8">
   ...
</form> 
```

大多数浏览器都会遵守这一点，并确保任何“特定于单词”的字符在进入您的网站之前都转换为适当的字符集。

一旦无效文本到达您的网站，您几乎无法可靠地修复它，因此最好简单地检查所有输入在您使用的任何字符集中是否有效，并丢弃任何包含无效文本的请求。即使使用 . 这也是必要的`accept-charset`，因为毫无疑问会有一些客户会忽略它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-28T11:13:24.573

您可以使用`preg_replace`函数调用从字符串中删除单词或其他字符的所有特殊字符

```
 preg_replace('/[^\x00-\x7F]+/', '', $str); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-06T22:12:29.463

注意在任何地方指定编码并使用 UTF-8，那么那些“特殊”字符应该可以正常保存。但是一旦他们经历了无法代表他们的编码，它最初是哪个字符的信息就会丢失，因此无法修复（除了一些特定但可能非常常见的情况，例如在 Cp1252 和 ISO- 8859-1)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T22:12:50.210

你可以试试[Demoroniser](http://www.fourmilab.ch/webtools/demoroniser/)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-23T07:42:15.033

确保将 Word 配置为对“另存为..”HTML 使用 UTF-8。

这是在选项 > Word 选项 > 高级 > Web 选项 > 编码中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T08:43:39.163

如果它是一个只有文本的 Word 文件（即：没有图形、表格等），您可以尝试在 Word 中另存为 HTML，将生成的 HTML 复制/粘贴到 Dreamweaver 中的文档中，然后使用 Dreamweaver 的“清理 Word” HTML”功能（在命令菜单下）。

作为替代方案，您可以尝试[修复我的 HTML](http://fixmyhtml.com)，尽管我没有亲自尝试过使用 Word 文本，因此结果可能会有所不同。

# data-structures - 三项HashMap无内部迭代

> ID：832027
> 
> 赞同：1
> 
> 时间：2009-05-06T22:08:00.270
> 
> 标签：data-structures, collections, hashtable, hashmap

实现三项 hashMap 的最佳方法是什么？例如，我想使用一个常规的 String key ，但是让它映射到两个不同的对象。这个想法就像有一个列表列表，除了第一项是键。

我试图避免遍历列表（所以行为就像一个哈希图）。你同意唯一的方法是建立一个新的班级吗？似乎“HashMap3”对象（使用 get1(key) 和 get2(key) 方法）会很有用。我不确定如何自己设置。

如何创建集合？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T22:28:11.250

如果键总是*恰好*映射到两个对象，那么最简单的方法是创建一个`Pair`仅用于保存两个对象的类。然后你使用你的字符串作为键，使用`Pair`实例作为值。但是，如果键可以映射到任意多个对象，那么 IMO 最好的方法是将值存储在某种类型的 a 中`Map`。`Collection`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T22:32:36.857

看看 google-collections [Multimap](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Multimap.html)

> 类似于 Map 的集合，但可以将多个值与单个键相关联。如果您使用相同的键但值不同的两次调用 put(K, V)，则多重映射包含从键到两个值的映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T22:33:48.210

也许是散列的[散列？](https://stackoverflow.com/questions/190450/how-can-i-store-multiple-values-in-a-perl-hash-table/190497#190497)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T23:10:11.680

我同意 Eddie 的观点，只是在很多值上遇到了类似的问题，而不是两个。我想要一个 Java ConcurrentHashMap 来保存从 Web 服务获取的文档的缓存 XML，并且我需要在 XML 旁边记录各种信息，以支持缓存的驱逐策略（例如，最近最少使用、最不常用）。

解决方案只是定义一个包含这些项目的对象类。我在 Cache 类中使用了一个私有嵌套类，如下所示：

```
private static class CacheEntry
{
    private String  uri;          // Key
    private String  fetched_xml;  // The XML document (main value)
    private long    put_time;
    private long    expires_time;
    private long    size;
    private long    hits;
    private long    last_used_time;
} 
```

ConcurrentHashMap 以 URI 为键，如下所示：

```
private final Map<String, CacheEntry> cache;
    [...]
cache = new ConcurrentHashMap<String, CacheEntry>(100, 0.75f, 3); 
```

此代码将一个新的 XML 文档添加到缓存中：

```
CacheEntry value = new CacheEntry();
value.fetched_xml(fetched_xml); 
value.uri = uri;
value.put_time = System.currentTimeMillis();
value.expires_time = representation.getExpirationDate().getTime();
value.size = bytes_fetched;
value.hits = 0;
value.last_used_time = 0;
cache.put(uri, value); 
```

**编辑：**如果您需要将键映射到Java 中的 n 个对象*列表*，您可以将这些对象放入 java.util.collections.ArrayList 并使用 ArrayList 作为 Map 值。

# c# - C# / C++ 中的缓存或预先计算的不可变函数

> ID：832031
> 
> 赞同：3
> 
> 时间：2009-05-06T22:09:28.783
> 
> 标签：c#, c++, function, methods, immutability

通过“不可变函数”或“不可变方法”，我的意思是一个函数，如果你给它相同的参数，它的结果永远不会改变。

当您想缓存不可变函数的预计算值时，我很想知道是否有人知道更通用或更简洁的解决方案。

让我用一个简单的例子来解释我的意思：

```
//Let's assume that ComputeStuff() returns a widely used value 
//and that 
//1\. It is immutable (it will always return the same result)
//2\. its performance is critical, and it cannot be accepted to compute
//   the result at each call, because the computation is too slow
//I show here a way to solve the problem, based on a cached result.
//(this example works in a case of a method with no arguments. 
// A hash would be required in order to store multiple precomputed results 
//depending upon the arguments)
private string mComputeStuff_Cached = null;
public string ComputeStuff()
{
  if (mComputeStuff_Cached != null)
    return mComputeStuff_Cached ;

  string result;
  //
  // ...
  //Do lots of cpu intensive computation in order to compute "result" 
  //or whatever you want to compute
  //(for example the hash of a long file)
  //...
  //

  mComputeStuff_Cached  = result;
  return mComputeStuff_Cached ;
} 
```

注意：
- 我添加了标签 C++ 作为 C++ 中的解决方案，我也会感兴趣
- “不可变函数”的概念对于数据库开发人员来说很常见，因为函数可以定义为“不可变”或“在事务中不可变”（这是提高查询性能的好方法）。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T22:20:14.513

“[记忆化](http://en.wikipedia.org/wiki/Memoization)”在这里可能是一个有用的术语。那里有一些记忆库（我可以发誓在[boost](http://www.boost.org/)中有一个，但我现在找不到它）。对“memoize”或“memoization”进行网络搜索，您选择的语言会显示一些命中。

这是 Wikibooks 中的一篇简洁文章：[优化 C++/通用优化技术/记忆化](http://en.wikibooks.org/wiki/Optimizing_C%2B%2B/General_optimization_techniques/Memoization)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-05T21:56:23.050

你可以尝试这样的事情：

```
#include <functional>
#include <type_traits>
#include <map>
#include <tuple>

//requires c++14
auto add_function_cache = [](auto fun) {
    using fun_type = decltype(fun);
    return ([=](auto... run_args){
        using fun_return_type = std::result_of_t<fun_type(decltype(run_args)...)>;
        static std::map<
            std::tuple<decltype(run_args)...>,
            fun_return_type
        > result_cache;
        std::tuple<decltype(run_args)...> tuple(run_args...);
        if (result_cache.find(tuple) == result_cache.end()) {
            fun_return_type rv = fun(run_args...);
            result_cache[tuple] = rv; 
            return rv; 
        }   
        else {
            return result_cache[tuple];
        }   
    }); 
};

template <typename R, class... Args> auto
add_function_cache_old(std::function<R(Args...)> fun)
-> std::function<R(Args...)>
{
    std::map<std::tuple<Args...>, R> cache;
    return [=](Args... args) mutable  {
        std::tuple<Args...> t(args...);
        if (cache.find(t) == cache.end()) {
            R rv = fun(args...);
            cache[t] = rv; 
            return rv; 
        }   
        else {
            return cache[t];
        }   
    };  
}; 
```

然后按如下方式使用它：

```
//function_cache - usage
auto fib_cache = add_function_cache(&fib);

//function_cache_old - usage
function<decltype(fib)> fib_fn = &fib;
auto fib_cache_old = add_function_cache_old(fib_fn);

fib_cache(10);
fib_cache(10); 
```

这个想法是创建一个函数，该函数将函数（fun）作为参数并返回另一个函数。返回的函数包装 fun 并为结果提供映射表单输入参数（run_args）。所以它与 fun 具有相同的签名，在地图（缓存）中查找给定参数（run_args）的结果。然后它返回缓存的值或由 fun 计算的结果。显然，如果查找不成功，必须将 fun 的结果添加到缓存中。

问候

简

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T22:20:17.167

好吧，使用委托`Func<T>`可以使它更可重用，而不需要多态性/继承 - 但在 C# 中没有更多的“内置”：

```
using System;
static class Program {
    static void Main() {
        var func = CachedFunc.Create(() => int.Parse(Console.ReadLine()));

        Console.WriteLine(func.Value);
        Console.WriteLine(func.Value);
    }
}
static class CachedFunc {
    public static CachedFunc<T> Create<T>(Func<T> func) {
        return new CachedFunc<T>(func);
    }
}
class CachedFunc<T> {
    T value;
    Func<T> func;
    public CachedFunc(Func<T> func){
        if (func == null) throw new ArgumentNullException("func");
        this.func = func;
    }
    public T Value {
        get {
            if (func != null) {
                value = func();
                func = null;
            }
            return value;
        }
    }
    public static explicit operator T(CachedFunc<T> func) {
        return func.Value; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T22:17:20.510

C++ 解决方案将与您概述的非常相似，不同之处仅在于`const`合格的公共接口和（一些）`mutable`成员的令人兴奋的组合：

```
class Computer {
    mutable string cache;
  public:
    // I wouldn't call it ComputeXXX
    // since I want to hide the implementation
    // details from my client: for the client
    // there is no change in state due to a call
    // to this function
    const string& StringVal() const {
         if (cache.empty()) {
                // compute cache
         }
         return cache;
    }
    // ...
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T22:18:23.253

你可以让它稍微不那么冗长：

```
private string mComputeStuff_Cached = null;
public string ComputeStuff()
{
  if (mComputeStuff_Cached == null) {
    string result;
    //
    // ...
    //Do lots of cpu intensive computation in order to compute "result" 
    //or whatever you want to compute
    //(for example the hash of a long file)
    //...
    //

    mComputeStuff_Cached  = result;
  }

  return mComputeStuff_Cached ;
} 
```

关于此类模式的其他说明：

*   如果您使用 C++ 和这样的方法`const`，则无法修改成员，因为它们也被视为`const`在该方法的上下文中。但是，您可以通过将需要修改的成员标记为 来覆盖它`mutable`。
*   “语义常量”和“按位常量”之间存在差异。当作者将某事标记为`const`时，它们通常表示“语义 const”（这就是您在本例中的意思），但编译器只能强制执行“按位 const”。
*   `const`方法通常给调用者的印象是它们可以同时从多个线程调用，因为它们没有副作用。在这种类型的模式中，您有“按位”的副作用，但没有“语义”的副作用。因此，如果多个线程可能调用这样的方法，则必须在内部保护此初始化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T22:19:01.973

您可以使您的成员变量可变（关键字）。

这将允许一个 const 成员函数修改这个值。我一直使用它来缓存中间结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-06T22:19:42.597

您可以在 C++ 中几乎逐字重写此代码

```
class CClass
{

  private:
     std::string* mComputeStuff_Cached;

  public:
     CClass()
       mComputeStuff_Cached(NULL)
     {

     }

     ~CClass()
     {
           delete mComputeStuff_Cached;
     }

     std::string ComputeStuff()
     {
         if (mComputeStuff_Cached != NULL)
         {
             return mComputeStuff_Cached
         }
         else
         {
             std::string calcedAnswer;
             ...
             // store away answer
             mComputeStuff_Cached = new std::string(calcedAnswer);
         }
     }
}; 
```

我不确定检查 mComputeStuff_Cached 是否为空（）是否足够。可能 empty() 是一个合法缓存的结果。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-06T22:25:10.570

您可以`static`在函数内使用关键字。它只会计算一次：

```
std::string GetWidelyUsedValue()
{
   static std::string value = ComputeStuff() ;
   return value ;
}

std::string ComputeStuff()
{
   // Compute the string here.
} 
```

# frameworks - 你能推荐一个替代的 Web 应用程序堆栈吗？

> ID：832032
> 
> 赞同：7
> 
> 时间：2009-05-06T22:10:04.227
> 
> 标签：frameworks

我是一位经验丰富的开发人员，过去 5 年左右一直在使用 .Net。当我一直在为我的创业想法组装应用程序堆栈时，我注意到我想使用的许多支持工具要么不稳定，要么已经商业化。由于我没有收入，并且考虑到 Visual Studio、SQL Server（是的，我知道 Biz Spark）等的成本，我突然意识到我应该寻找其他地方。

因此，事不宜迟，以下是我的要求和优点。明显的领先者是 Java 和 Ruby，但我很高兴听到任何其他建议（面向对象和编译的首选，但不是必需的。这里不欢迎 PHP）。

总体

*   强制：由共享主机支持以开始使用
*   可取的：不应该太繁琐而无法开始工作（只需在插入组件时工作）

框架

*   强制：现代 mvc 框架
*   强制：对 html 输出的细粒度控制

代码质量

*   强制性：日志框架
*   理想：静态分析（复杂性等）
*   可取：生成代码结构的UML图
*   可取的：测试覆盖率报告

面向对象的东西

*   强制：处理半深度层次结构的 ORM，包括多对多关系。
*   强制：模拟框架
*   强制性：IOC 容器（可能是它自己的类别）

IDE

*   强制：格式帮助（缩进）
*   强制：调试：断点、变量检查
*   可取的：自动完成：VS 的智能感知非常好。这接近强制性
*   理想：调试：就地代码执行（立即窗口），向后移动当前帧
*   理想：测试框架集成

代码质量

*   强制：测试框架
*   理想：代码覆盖率
*   可取的：从代码注释生成文档

建造

*   合意：SVN一键拉取，构建，测试，代码覆盖，代码文档
*   可取的：持续集成（以后我们，呃，变得非常大）

其他说明：我很高兴使用 Linux（会非常令人耳目一新！）。我假设 MySQL 用于 DB，因为我不需要 ACID 合规性（无论如何它现在可能是 ACID），以及 SVN 用于源代码控制。

任何帮助或建议将不胜感激。

编辑：目前倾向于 Sinatra，因为它看起来非常优雅，但允许用户拥有尽可能多或尽可能少的控制权。当我认为答案已经停止时，我会选择一个答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T22:13:21.427

*   红宝石
    *   [轨道上的红宝石](http://rubyonrails.org)
    *   [辛纳特拉](http://www.sinatrarb.com/)
*   PHP
    *   [Zend 框架](http://framework.zend.com)
    *   [Symfony](http://www.symfony-project.org/)
*   Python
    *   [姜戈](http://djangoproject.com)
    *   [塔架](http://pylonshq.com/)
    *   [网页版](http://webpy.org/)
*   虚拟机
    *   [检票口（Java）](http://wicket.apache.org/)
    *   [春天 (Java)](http://springsource.com)
    *   [电梯（斯卡拉）](http://liftweb.net//)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T22:16:06.193

S#arp 架构（结合了 ASP.Net MVC 和 NHibernate，以及 NUnit 和 Rhino Mocks）

[http://code.google.com/p/sharp-architecture/](http://code.google.com/p/sharp-architecture/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T22:24:40.680

Ramaze或[Sinatra Ruby 微](http://www.sinatrarb.com/intro.html)[框架](http://ramaze.net/learn/getting-started)，如果您想快速入门。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T23:05:56.993

Ruby 中的共享主机比 Java 更强大，并且由于您排除了 PHP（在共享主机中非常流行），因此您将倾向于 Ruby 的方向。

框架：如果您使用的是 Ruby，那么 RoR 是最好的选择。如果您决定使用 Java，我会（除了其他答案中的出色建议）看看[Rife](http://rifers.org/)。那是一种方法（更多代码驱动）。Seam + IceFaces（或 RichFaces，如果您需要一些健壮性来换取小部件）是一种不同的方法，但也很有效。

Eclipse plus 插件为您提供了很多您正在寻找的工具（免费）。您还可以查看 Intellij，个人许可证 249 美元（个人只是意味着它以您的名义而不是您公司的名义获得许可，没有限制），或 RubyMine 来自同一公司的 Ruby，99 美元。

持续集成，我在 TeamCity 上取得了巨大成功，而且它在初学者级别是免费的。

（不，我不为 JetBrains 工作，我刚刚对他们的产品有过很好的体验）。

我知道我没有勾选您列表中的每一个，但是一旦您添加了可用于 IDE 的插件，您列表中的所有内容都包含在上面。当然还有很多其他的框架。非 Microsoft 解决方案的好处是有很多选择。非微软解决方案的坏处是有很多选择......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-06T22:16:26.597

[Django](http://www.djangoproject.com/ "姜戈")是一个很好的选择。它有很好的关注点分离，没有像[Zope](http://www.zope.org/)这样的学习曲线。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-06T22:24:08.187

[举起](http://liftweb.net/ "电梯")！它是用 Scala 编写的，代表了 Web 框架之间的某种范式转换，并且带有 JVM 的托管服务就足够了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-06T23:37:31.410

我原以为 Visual Studio 的速成版几乎已经涵盖了您。它们符合您的经验，当与后端的 MYSql 结合使用时，为 .net 开发的百万零一个免费组件可能会满足您的需求。

有什么特定的东西会阻止他们吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-08-29T08:41:49.797

Ruby（和Rails）的自动完成？

Jet Brain 的[RubyMine](http://www.jetbrains.com/ruby/index.html)效果很好。我同意这都是关于 API 发现的......

# regex - 最好的现代文本解析？AKA 何时使用 Lex 和 Yacc？

> ID：832033
> 
> 赞同：3
> 
> 时间：2009-05-06T22:10:09.670
> 
> 标签：regex, parsing, yacc, lex

我有作为输入文本块的命令和参数，每行一个，例如

```
XYZ ARG1,ARG2,ARG3,...,ARGN 
```

我想验证该`XYZ`特定命令的参数格式是否正确，如果是，则执行正确的代码块。有大约 100 个命令，其中一些具有可变数量的参数、不同的关系（即，如果`XYZ`调用了命令，那么我也需要`ABC`调用命令）。

还存在命令，例如：

```
COMMAND
XYZ ARG1
BEF ARG1 ARG2
ENDCOMMAND 
```

文本包含在`COMMAND`和中很重要`ENDCOMMAND`。

通常对于这样的事情，我会使用 Lex 和 Yacc 而不是正则表达式，但是还有什么更现代的吗？代码是用 C# 编写的。MSDN 中有什么可以做到这一点，而不是老式的 C Lex 和 Yacc？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T22:28:14.277

如果您正在寻找 Lex/Yacc 的替代品，请查看[ANTLR](http://en.wikipedia.org/wiki/Antlr)。它支持各种语言的代码生成，[包括 C#](http://www.antlr.org/wiki/display/ANTLR3/Antlr+3+CSharp+Target)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T22:29:27.050

[ANTLR](http://www.antlr.org/)可以处理词法分析和解析，它可以生成 C#（除了 Java、C++ 和 Python）。它非常成熟，有大量文档和大量示例。它还生成比 YACC 更好的错误消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T22:19:46.403

你有一个比“年龄”更大的问题，因为我不确定任何著名的 C-ish 编译器编译器都可以与 C# 一起使用。Boost 新奇的解析模板也是如此。

你可能不得不使用像[Grammatica](http://grammatica.percederberg.net/)或[Spart](http://www.codeproject.com/KB/recipes/spart.aspx)这样深奥的东西（选择我的前两个[谷歌热门歌曲](http://www.google.com/search?q=C%23+parser+generator&rls=com.microsoft:*&ie=UTF-8&oe=UTF-8&startIndex=&startPage=1)）

编辑：多看几眼后，似乎[ANTLR](http://www.antlr.org/)支持 C#。ANTLR 非常有名，而且比 LEX/YACC 更新很多，所以我建议你去看看。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-11T06:41:37.703

对于这样一个简单的解析问题，您可以编写一个递归下降解析器。当然，假设您的语言是相对固定的，并且不会发展成为完整的编程语言。如果有任何危险，请咬紧牙关并使用 ANTLR 或同等产品。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-26T09:41:11.380

看看 jay，yacc 重新定位到 C# 和 Java。它包含在单声道项目中。

[http://code.google.com/p/jayc/](http://code.google.com/p/jayc/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T22:25:21.180

.NET Framework 中没有什么特别之处，如果你是这个意思的话。

乍一看，您的命令结构看起来相对简单，因此手动解析非常适合这里，而且它几乎总是快速的解决方案。这也将允许您检查命令参数的实际值的正确性，而不仅仅是它们的语法有效性。

# ruby-on-rails - Rails - etags 与页面缓存（文件缓存）

> ID：832035
> 
> 赞同：9
> 
> 时间：2009-05-06T22:10:35.783
> 
> 标签：ruby-on-rails, caching, etag

使用 etags/stale?/fresh_when 有什么好处？而不是页面缓存（在文件缓存上）？

Apache 自动处理静态文件的 etag，但即使没有，页面缓存仍然会更好，因为 Rails 应用程序甚至不会被调用。

那么，在什么情况下我会使用 Rails 提供的方法（stale?/fresh_when?）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-07-09T12:25:34.817

他们真的是免费的。Etags/fresh_when 等帮助您更好地使用下游缓存（例如您自己的 Varnish/Squid 实例或 Rack::Cache 或浏览器缓存或 ISP 代理服务器……）

页面缓存使您免于完全使用 Rails 堆栈，因为 Apache/您的网络服务器为文件提供服务，因此无需进行数据库查找。但是您必须处理缓存过期以保持缓存新鲜。

使用 etags/conditional get，您不会节省太多处理时间，因为您仍然需要获取页面上使用的所有记录：

```
def show
  @article = Article.find(params[:id])
  @feature = Feature.current
  fresh_when :etag => [@article, @feature] 
end 
```

在用户拥有当前页面的情况下，它可以为您节省一些渲染时间和向下发送页面所需的带宽。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T14:56:54.400

我想到的另一个用途是，在让 Rails 分发“304 Not Modified”标头之前，您仍然可以处理一些信息。就像您想记录对页面的点击一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T22:14:53.123

想到的一件事是，`fresh_when`即使您清除了整个页面缓存，它仍然会为您节省一些渲染。在这里，您将同时使用两者。

我也很好奇其他答案。

# sql - SQL查询通过int变量返回1

> ID：832044
> 
> 赞同：2
> 
> 时间：2009-05-06T22:12:40.303
> 
> 标签：sql, sql-server

在 SQL Server 中，如果我有一个 int 变量，如何编写一个通过 int 变量的值返回值 1 的查询？

所以给出：

```
declare @cnt int
set @cnt = 5 
```

什么查询会返回 1 - 5？这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T22:27:51.517

已经给出的其他答案的替代答案，可能不是那么实用，但在某些情况下可能会更快。

如果你有一个已知的 @cnt 值的上限，你会遇到（比如 1000），你可以创建一个简单的单列表，其中包含前 1000 个整数，比如

```
值
---
1
2
3
4
...

```

然后每当你想要一组整数时，你都可以使用它

```
选择值
从整数表
其中 val <= @cnt

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T22:18:40.600

您可以像这样在 SQL 中执行**WHILE循环：**

```
DECLARE @Cnt int, 
        @Val int;
SET @Cnt = 5;
SET @Val = 0;

DECLARE @MyValues TABLE
(
  val int
);

WHILE @Val < @Cnt
 BEGIN
  SET @Val = @Val + 1;
  INSERT @MyValues(val)
  SELECT @Val;
 END;
SELECT Val FROM @MyValues; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T22:22:47.253

您可以使用[递归 CTE](http://msdn.microsoft.com/en-us/library/ms186243.aspx)在一个查询中执行此操作，但如果您的 @cnt 以非常高的值开始，则需要注意 MAXRECURSION 查询提示。

```
DECLARE @cnt int;
SET @cnt = 5;

WITH Numbers AS (
    SELECT @cnt [Value]

    UNION ALL

    SELECT [Value] - 1
    FROM Numbers
    WHERE [Value] > 1
)
SELECT * FROM Numbers
ORDER BY [Value] 
```

话虽如此，但使用简单的 WHILE 循环会更简单，更易于阅读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T22:22:05.337

您只需在查询结束时使用 SELECT 语句即可轻松实现“输出”值...

```
SELECT ... FROM ... WHERE ... Bla Bla, yadah, yadah;
SELECT (1 - @cnt); 
```

你会得到你想要的输出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-06T22:24:31.243

这是一个功能：

```
CREATE FUNCTION [dbo].[Sequence] (@start int, @end int, @step int)  
RETURNS @result table (num int) AS  
BEGIN 
    declare @num int
    set @num = @start

    while @num <= @end
        begin
        insert into @result (num) values (@num)
        set @num = @num + @step
        end
    return
END 
```

使用该功能，您可以选择以下序列：

```
select * from dbo.Sequence(1,5,1) 
```

这将返回 1,2,3,4,5。

```
select * from dbo.Sequence(2,6,2) 
```

将返回 2,4,6。等等 ：）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-06T22:38:38.883

如果您的上下文中@cnt 的最大值相对较低，您可以填充一个临时或持久的整数表并从中进行选择或加入。

```
CREATE TABLE LotsOfNumbers(Number int not null)
INSERT INTO LotsOfNumbers VALUES(1)
INSERT INTO LotsOfNumbers VALUES(2)
INSERT INTO LotsOfNumbers VALUES(3)
...
INSERT INTO LotsOfNumbers VALUES(99)
INSERT INTO LotsOfNumbers VALUES(100)

DECLARE @cnt INT
SET @cnt = 30

SELECT *
FROM LotsOfNumbers
WHERE Number <= @cnt
ORDER BY Number 
```

当然，时间/空间性能取决于您的情况，因此我会观察 SQL Profiler 以了解每种方法对数据库的影响。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-06T22:20:01.830

```
declare @cnt int
    set @cnt = 0
    while @cnt < 5
    begin
      set @cnt = @cnt + 1
      print 'The counter is ' + cast(@counter as char)
    end 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-06T22:23:02.150

不知道您是只想要一个结果集（根据[José Basilio 的回答](https://stackoverflow.com/questions/832044/sql-query-to-return-1-through-int-variable/832072#832072)）还是对多个结果集感到满意

```
DECLARE @ctr INT
DECLARE @start INT

SET @ctr = 5
SET @start = 1

WHILE @start <= @ctr
BEGIN
   SELECT @start
   SET @start = @start + 1
END 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-07T07:04:13.007

生成带有数字的单列表格很容易。

```
Create Table Numbers(Number INT);

INSERT INTO Numbers(Number) values(0);
INSERT INTO Numbers(Number) values(1);
INSERT INTO Numbers(Number) values(2);
.
.
INSERT INTO Numbers(Number) values(9);

-- To generate a list of 100000

SELECT * INTO TEST
FROM
(SELECT N1.Number * 1000 +  N2.Number * 100 + N3.Number * 10 + N4.Number * 1 as Num
FROM   Numbers N1
CROSS JOIN Numbers N2
CROSS JOIN Numbers N3
CROSS JOIN Numbers N4) AS N
ORDER BY Num;

--Then, You can use the above table for getting the numbers
SELECT * from TEST WHERE Num <= 5; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-24T22:41:44.733

几年前我不得不处理这个问题，所以我想出了最快/最简单的方法，如果你的数据库有一个表，其中的记录比你需要计算的多。

首先，尽管建议您不需要“创建”记录表......您所需要的只是已经有记录的“ANY”表。只要表中的记录比您需要计算的多，那么您就很好。

```
SELECT top (5) ROW_NUMBER() OVER(Order by [Primary_Key] desc) AS Integer 
FROM SOME_TABLE   --that has more than 5 rows. 
```

这也是优雅的（数学）方式。在数据库中没有大表的地方。

使用拆分递归，这允许您生成一个最多包含 2^n-1 个整数的表，其中 n 是您的递归限制。加上这是完全参数化的，所以它可以很容易地放在一个函数中

```
DECLARE @n int, @cnt int;
set @cnt = 5;
SET @n = LOG(@cnt)/LOG(2) +1; --use change of base to find LOG base 2

WITH Num AS (
    SELECT @n [Value]
    UNION ALL

    SELECT [Value] - 1
    FROM Num
    WHERE [Value] > 1 

    UNION ALL

    SELECT [Value] - 1
    FROM Num
    WHERE [Value] > 1
) 

SELECT * from (
SELECT ROW_NUMBER() OVER(Order by Value asc) AS [Integer]
FROM Num
)i 
where [Integer] <= @cnt 
```

这样做的一个缺点是它可以在递归期间生成最多两倍的记录，因此它可能比内联递归产生更多的开销。但因此完全避免了递归限制。（你永远不需要列出前 2^100-1 个整数。）（我也只是预测你没有一台有那么多硬盘空间的计算机。）

这个缺点是我创建下一个函数的原因。它使用与拆分递归相同的加倍技术，但在 while 循环内。并且它最后一次运行它只放置必要的记录而不是加倍。此函数还允许您指定一个范围并返回该范围内的所有数字，这些数字的索引从 0 开始。我曾经认为零基列是计算的无用工件，但是将范围和索引都放在一行中非常有帮助。

```
create   function [dbo].[fn_Integers] 
(
@Min_Integer  int = 1
,@Max_Integer int 
)
RETURNS @retTable TABLE 
    ([BASE]  int identity(0,1)
    ,[INTEGER] int) 
AS
BEGIN
    Declare @RANGE int
    SET @RANGE = @Max_Integer-@Min_Integer

    insert into @retTable
    select NULL --initial value for recursion

    While ((SELECT MAX([BASE]) FROM @retTable r) < @RANGE )
    BEGIN
        INSERT into @retTable
        select [INTEGER] from @retTable r
        where [BASE] < (SELECT @RANGE - MAX([BASE])  FROM @retTable r)
    END

    Update @retTable set
    [INTEGER] = [BASE] + @Min_Integer

RETURN
END
GO 
```

它每秒可以处理大约 50000 个整数（在我的工作站上），输出看起来像

```
SELECT * FROM [fn_Integers](18,50000)

BASE    INTEGER
-----------------
0       18
1       19
2       20
...
49982   50000 
```

# .net - Global.asax 和 Error.aspx 中的 ASP.NET MVC 错误日志记录

> ID：832046
> 
> 赞同：3
> 
> 时间：2009-05-06T22:13:01.893
> 
> 标签：.net, asp.net-mvc, model-view-controller, error-handling, global-asax

我正在创建一个 ASP.NET MVC 应用程序。我需要在两个地方处理异常。

Global.asax.vb 文件：

```
Public Class MvcApplication
    Inherits System.Web.HttpApplication
    ...
    Sub Application_Error(ByVal sender As Object, ByVal e As EventArgs)
        LogException(HttpContext.Current.Server.GetLastError(), Request)
    End Sub
    Shared Sub LogException(ByVal ex As Exception, ByRef r As System.Web.HttpRequest)
        ...
    End Sub
End Class 
```

Views\Shared\Error.aspx 文件：

```
<%@ Page Language="VB" Inherits="System.Web.Mvc.ViewPage(Of System.Web.Mvc.HandleErrorInfo)" %>
<script runat="server">
    Sub Page_Load(ByVal Sender As System.Object, ByVal e As System.EventArgs)
        MvcApplication.LogException(Model.Exception, Request)
    End Sub
</script>
... 
```

但我得到这个错误：

> C:\inetpub\example.com\Views\Shared\Error.aspx(5)：错误 BC30451：未声明名称“MvcApplication”。

我应该在哪里定义我的 LogException() 函数，以便可以从 Global.asax.vb 文件和 Error.aspx 文件中访问它？MVC 最多的地方在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-01-11T16:48:07.723

您可能想尝试一个名为 ELMAH 的模块。Scott Hanselman 说“ELMAH 是您的 ASP.NET 错误的 Tivo”。我目前正在使用它来记录我的 ASP .NET + MVC 应用程序中的错误，它就像一个魅力。设置很简单，因为只需要在 web.config 中添加行。您甚至可以限制谁有权查看错误日志。

[http://www.hanselman.com/blog/ELMAHErrorLoggingModulesAndHandlersForASPNETAndMVCToo.aspx](http://www.hanselman.com/blog/ELMAHErrorLoggingModulesAndHandlersForASPNETAndMVCToo.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T22:35:25.897

最符合 MVC 的方式是使用 ActionFilters 来处理（记录）异常。

看看这个例如：

[使用 ASP.NET MVC 操作过滤器进行日志记录](http://www.singingeels.com/Articles/Logging_with_ASPNET_MVC_Action_Filters.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-01-30T23:10:42.517

实际上，据我所知，您只缺少一个指令：

```
<%@ Import Namespace="[Your default namespace]" %> 
```

它应该像宣传的那样工作。

# java - 将 DAO 隐藏在服务背后，为什么？

> ID：832058
> 
> 赞同：3
> 
> 时间：2009-05-06T22:14:59.737
> 
> 标签：java, web-applications, oop

在回顾了一堆 MVC 风格的 Web 应用程序后，我注意到在业务层前面有一个非常大的服务接口是很常见的。这个接口的实现通常包括一堆 DAO。所以你有类似的东西：

```
public class FoodServiceImpl implements FoodService {

  private FruitDAO fruitDAO;
  private VegetableDAO vegetableDAO;
  private MeatDAO meatDAO;

  // ... DAO injection stuff

  public List<Meat> getMeat() {
    return meatDAO.getMeat();
  }

  public void addMeat(Meat meat) {
    meatDAO.add(meat);  
  }

  public List<Fruit> getFruit() {
    return fruitDAO.getFruit();
  }

  // ... tons of methods that mostly just delegate to DAOs

} 
```

假设你的 DAO 一开始就不是具体的，为什么不直接将 DAO 暴露给下一个层次呢？

所以而不是：

```
// assume foodService is injected at runtime
public void controllerMethod() {
  foodService.getFruit();
  foodService.getMeat();
} 
```

你只是有

```
// assume DAOs are injected at runtime
public void controllerMethod() {
  fruitDAO.getFruit();
  meatDAO.getMeat();
} 
```

一方面，将应用程序的全部内容封装在一个接口中看起来不错……另一方面，您最终会得到一个巨大的接口，其实现只不过是委托给 DAO。

我可以看到在一个地方管理所有 DAO 非常好。我还可以想象，如果要通过多个服务使用相同的 DAO，这种模式会很有用。

这在启动 Web 应用程序时是否被认为是“最佳实践”，还是仅在预期具有一定程度和类型的复杂性时才适用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-06T22:31:06.110

我认为注入服务层更有意义，因为它知道工作单元。如果您的用例需要多个 DAO 参与一个工作单元，则需要一个服务来“拥有”事务。

此外，它是面向服务架构的精髓。忘记 WS-*；服务映射到用例和业务流程。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-06T22:32:25.093

假设整个后端不仅仅是一个巨大的 CRUD API，你会经常看到在服务层调用的业务逻辑。业务逻辑可能直接在服务方法本身（又名“贫血域模型”）中，或者服务层必须只负责调用传入/传出 DAO 层（“富域模型”）的实体上的业务方法。您可能还会看到在服务层中进行的安全或审计等工作。或者，可以通过面向方面的编程 (AOP) 将横切关注点（例如安全性或审计）应用于服务层。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T22:25:26.780

创建一个类只有一个原因：将实现的一些细节等隐藏在一个固定的边界后面。在此示例中，您有一个名为 FoodService 的服务，以及一个了解各种 DAO 的实现类。那你在隐瞒什么？

它看起来像两件事：

1.  你有这些食物的事实
2.  它们的存储方式。

如果它们的存储方式永远不会改变，那么您可能不需要这个。但是，如果你的 DAO 被不同的机制取代——比如分布式 Google BigTable——你可能更喜欢不需要修改所有代码来更改类型。

当然，你总是有机会开始携带 HealthAndBeautyAids，因此需要另一个课程。（事实上​​，你最好有一个方法告诉你你可以访问哪些类型的东西，然后有方法访问它们给定的类型？）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-07T04:42:47.213

MVC 主要是一种表示模式，大多数重要的系统都使用分层方法，其中至少有表示层、业务层和数据访问层。在您的情况下，您可以直接公开 DAO，但在中间保留一个业务层有助于更好地封装业务逻辑并有助于系统可扩展性。假设您对肉的存放位置有新要求：

```
if (meat.expirationDate-today >= 5 days)
   FridgeDAO.store(meat)
else if (meat.expirationDate-today <5 days)
   FreezerDAO.store(meat)
else 
   discard(meat) 
```

如果您直接公开 DAO，则需要将业务逻辑添加到演示文稿中，并且如果您更改演示文稿技术（或者如果您想将您的功能公开为 Web 服务），您的业务逻辑可能会分散并且必须重写它. 使用接口作为业务层的入口点可以进一步解耦表示和业务逻辑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-08-05T03:04:21.927

进行远程处理的最佳方法是根本不进行远程处理。

分层编写代码很好，但您不必通过创建远程 API 来强制分层。任何人在没有任何真正的架构需求（即性能分析等）的情况下这样做的人只是在到处乱说流行语或在没有任何需求的地方创造需求。

请记住，从大局来看，程序员的时间比硬件成本更高。

# javascript - 使用 jQuery 触发按键事件的确定方法

> ID：832059
> 
> 赞同：274
> 
> 时间：2009-05-06T22:15:06.693
> 
> 标签：javascript, jquery, events, triggers, keypress

我已经阅读了这个问题的所有答案，但似乎没有一个解决方案有效。

另外，我感觉用特殊字符触发按键根本不起作用。有人可以验证谁做了这件事吗？

* * *

## 回答 #1

> 赞同：378
> 
> 时间：2009-05-06T22:31:14.660

如果你想触发 keypress 或 keydown 事件，那么你所要做的就是：

```
var e = jQuery.Event("keydown");
e.which = 50; // # Some key code value
$("input").trigger(e); 
```

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2011-10-28T02:23:12.460

[现在使用 jQuery 1.6+](http://api.jquery.com/category/events/event-object/)更加简洁：

```
var e = jQuery.Event( 'keydown', { which: $.ui.keyCode.ENTER } );

$('input').trigger(e); 
```

（如果您不使用 jQuery UI，请改为使用相应的键码。）

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2012-01-01T08:02:54.233

真正的答案必须包括 keyCode：

```
var e = jQuery.Event("keydown");
e.which = 50; // # Some key code value
e.keyCode = 50
$("input").trigger(e); 
```

尽管 jQuery 的网站说 which 和 keyCode 是标准化的，但它们是非常严重的错误。对 e.which 和 e.keyCode 进行标准的跨浏览器检查总是最安全的，在这种情况下，只需定义两者。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2010-07-30T08:20:51.470

如果你也在使用 jQuery UI，你可以这样做：

```
var e = jQuery.Event("keypress");
e.keyCode = $.ui.keyCode.ENTER;
$("input").trigger(e); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-05-15T14:49:31.487

我使它与keyup一起工作。

```
$("#id input").trigger('keyup'); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2010-12-15T17:11:14.557

好的，对我来说，这个工作......

```
var e2key = function(e) {
    if (!e) return '';
    var event2key = {
        '96':'0', '97':'1', '98':'2', '99':'3', '100':'4', '101':'5', '102':'6', '103':'7', '104':'8', '105':'9', // Chiffres clavier num
        '48':'m0', '49':'m1', '50':'m2', '51':'m3', '52':'m4', '53':'m5', '54':'m6', '55':'m7', '56':'m8', '57':'m9', // Chiffres caracteres speciaux
        '65':'a', '66':'b', '67':'c', '68':'d', '69':'e', '70':'f', '71':'g', '72':'h', '73':'i', '74':'j', '75':'k', '76':'l', '77':'m', '78':'n', '79':'o', '80':'p', '81':'q', '82':'r', '83':'s', '84':'t', '85':'u', '86':'v', '87':'w', '88':'x', '89':'y', '90':'z', // Alphabet
        '37':'left', '39':'right', '38':'up', '40':'down', '13':'enter', '27':'esc', '32':'space', '107':'+', '109':'-', '33':'pageUp', '34':'pageDown' // KEYCODES
    };
    return event2key[(e.which || e.keyCode)];
};

var page5Key = function(e, customKey) {
    if (e) e.preventDefault();
    switch(e2key(customKey || e)) {
        case 'left': /*...*/ break;
        case 'right': /*...*/ break;
    }
};

$(document).bind('keyup', page5Key);

$(document).trigger('keyup', [{preventDefault:function(){},keyCode:37}]); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-10-17T09:58:59.560

您想在一行中执行此操作，您可以使用

```
$("input").trigger(jQuery.Event('keydown', { which: '1'.charCodeAt(0) })); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-02-04T06:12:21.920

如果您需要考虑当前光标和文本选择...

这不适用于 Chrome 上的 AngularJS 应用程序。正如 Nadia 在原始评论中指出的那样，该字符在输入字段中永远不可见（至少，这是我的经验）。此外，之前的解决方案没有考虑输入字段中当前的文本选择。我不得不使用一个很棒的库[jquery-selection](http://madapaja.github.io/jquery.selection/)。

我有一个自定义的屏幕数字键盘，可以填写多个输入字段。我不得不...

1.  在焦点上，保存 lastFocus.element
2.  在模糊时，保存当前的文本选择（开始和停止）

    ```
    var pos = element.selection('getPos')
    lastFocus.pos = { start: pos.start, end: pos.end} 
    ```

3.  当按下我的键盘上的按钮时：

    ```
    lastFocus.element.selection( 'setPos', lastFocus.pos)
    lastFocus.element.selection( 'replace', {text: myKeyPadChar, caret: 'end'}) 
    ```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-26T23:41:59.450

`console.log( String.fromCharCode(event.charCode) );`

我猜不需要映射字符。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-01-02T07:53:07.953

它可以像这个[文档一样完成](http://api.jquery.com/trigger/#trigger-eventType-extraParameters)

```
$('input').trigger("keydown", {which: 50}); 
```

# regex - 正则表达式在 HTML 中查找列表的开始结尾

> ID：832060
> 
> 赞同：2
> 
> 时间：2009-05-06T22:15:17.740
> 
> 标签：regex

我在网页中有一个 TextBox，我使用 javascript 来解析和修改 HTML 格式。90% 的效果非常好，我试图支持的最后一个主要事情是从 Word 文档中复制和粘贴。我基本上完全明白了，我只是有点卡在查找列表并将它们包装在 UL 标签中。

因此，使用正则表达式，我想在此文本中找到列表：

```
<p>paragraph goes here

<li>goes here<br/>
<li>list item 2<br/>
<li>list item 3<br/>

<p>another paragraph 
```

并用标签包装该`<li>`部分。`<ul>`我的正则表达式 foo 不是很好，有人可以帮忙吗？

- - - 更新 - - -

虽然我感谢所有反馈，基本上表明我需要从头开始处理这个问题，但我没有时间这样做。我完全理解正则表达式不是处理 HTML 格式的理想方法，但我现在如何使用它，它将处理我的用户想要做的大部分事情。我只需要 HTML 标记的子集，而不是完整的 HTML 编辑器。

我的内容的来源将是用户从 Word 文档中复制和粘贴的时间（大约 99.9%）。我使用正则表达式将 HTML 标记插入纯文本。对于列表，我发现项目符号字符 MS 单词插入到它的复制文本中，并将其替换为`<LI>`标签。我只是想让用标签包装`<LI>`标签更加用户友好`<UL>`。

我将研究能够正确结束我的标签，所以..假设它们已正确结束，用`<ul>`标签包装我的列表项的正则表达式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T22:22:25.973

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。——杰米·扎温斯基

1.  正则表达式和 HTML 特别不适合。

2.  这是 2009 年，请在 HTML 中使用结束标签。（如果您**真的**想正则表达式您的 html，仅此一项就会对您有所帮助。

3.  如果您已经在浏览器中获得了此页面，请使用 DOM！让浏览器为您解析 HTML（如果必须，将其推入隐藏的 div）并导航生成的 DOM 树。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T22:22:54.383

[不要使用正则表达式解析 HTML](https://stackoverflow.com/questions/701166)。[相反，请使用真正的 HTML 解析器](https://stackoverflow.com/questions/773340/can-you-provide-an-example-of-parsing-html-with-your-favorite-parser)。

对不起，如果我的回答感觉不重要，但是几乎每天都会问这个问题，而且您的要求（在我看来）对于正则表达式来说太复杂了。

此外，您的所有标签都没有关闭。你可能应该这样写：

```
<p>paragraph goes here</p>

<li>goes here</li>
<li>list item 2</li>
<li>list item 3</li>

<p>another paragraph</p> 
```

我的 HTML 可能已关闭，但您*确实*应该关闭所有标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T22:44:45.093

我同意 James 和 Chris 的观点，总的来说，使用适当的解析器确实要好得多，我见过人们以任何其他方式都失败了（我假设你在这里没有完全控制 HTML 输入，在这种情况下，像正则表达式这样的快捷方式可能工作正常）。

假设您目前正在使用 Java。如果您知道您的输入是有效的 XHTML 而不是 HTML，则可以使用 Sun Java JDK 附带的 Java API for XML Processing (JAXP)。然后在几行中，您可以将您的 XHTML 解析为 DOM 树，然后向下选择列表的节点，然后对它做任何您喜欢的事情。JAXP 有一个学习曲线，但它非常值得。

如果您使用的是 Groovy，则可以使用 XMLSlurper。Ruby 有几个很好的 XML 库。PHP 具有 XMLParser 扩展。Python 有[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)。几乎任何现代语言都有很好的替代方案可供选择。

现在根据您的示例，您*没有*正确的 XML 化 XHTML，而是带有未封闭标签和其他讨厌的狂野和毛茸茸的 HTML。如果是这种情况，您将需要获取一个 HTML 解析器库，类似于[HTMLParser](http://htmlparser.sourceforge.net/)。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T01:37:47.893

假设所有元素都有结束标签，并且没有人通过在开始或结束标签内添加空格而变得聪明，并且一些元素在列表项之前，你所要做的就是（在 Perl 语法中，可能与 PCRE 库兼容，减去运营商`m//`）：

```
m/(?<!li)>[^<]*<li/i 
```

标识组中的*第一个*列表项。爆炸（带有`x`标志，为了便于阅读）：

```
m/
    (?<!li)> # the end of a start or end tag that isn't part of an li element
    [^<]*    # some non-angle-bracket characters -- in-between tag content
    <li      # the beginning of an li element
/xi          # space insensitive, case insensitive (respectively) 
```

然后你可以更有把握地遍历下一个块，直到你读到它的结尾，保存那个位置，然后再次使用这个模式之前，列表项之间可能没有任何东西。

* * *

如果没有解析器，弄清楚它在哪里结束会更加棘手。你可以使用类似的东西（这是被删节的）

```
m/(?<=<li).*?<(div|form|p)/i 
```

您在其中列出所有非内联元素，这将触发 li 和 ul 关闭并结束整个列表。但是列表隐式关闭的另一种方法是容器关闭。

* * *

如果列表项元素本身格式正确（有结束标签），那么这可能足以放置列表的结束标签：

```
m{</li>.*?<(?!li)}i 
```

# css - CSS：删除具有可见性的类：隐藏/位置：绝对不会在 IE6/7 中取消隐藏

> ID：832061
> 
> 赞同：0
> 
> 时间：2009-05-06T22:15:55.523
> 
> 标签：css, internet-explorer

我有以下 CSS 类：

```
.hidden {
    visibility: hidden;
    position: absolute;
} 
```

我有那个类的div。如果我删除类，div 不会显示。但我第二次“删除它”时，div 显示。知道为什么吗？请参阅使用 YUI 的独立示例：

[http://avernet.googlepages.com/ie-visibility.html](http://avernet.googlepages.com/ie-visibility.html)（代码也可以在[Pastie](http://pastie.org/470560)上找到）

注意：我不能`display: none`在我的情况下使用（否则会起作用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T22:40:47.663

你的意思是`display: none`代替`visibility: hidden`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T22:30:03.397

看起来它与“位置：绝对；”有关。如果您删除该行它可以工作，或者如果您添加

```
div { position:absolute; } 
```

它也可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T23:33:00.710

使用IE的*微调技术可以解决问题。*我在这个 wiki 上添加了更多信息：查找标题[Cell content 在 IE 上仍然隐藏](http://wiki.orbeon.com/forms/doc/contributor-guide/xforms-switch-case#TOC-Cell-content-remains-hidden-on-IE)。

这是我们在 Orbeon Forms 代码中使用的*轻推的实现：*

```
/**
 * Nudge element after a short delay for IE6/7 to force IE to "do the right thing".
 */
nudgeAferDelay: function(element) {
    if (YAHOO.env.ua.ie != 0 && YAHOO.env.ua.ie <= 7) {
        window.setTimeout(function() {
            element.className = element.className;
        }, ORBEON.util.Utils.getProperty(INTERNAL_SHORT_DELAY_PROPERTY));
    }
} 
```

# jsf - 在 JSF 中处理复杂的 Bean 树

> ID：832062
> 
> 赞同：0
> 
> 时间：2009-05-06T22:16:05.087
> 
> 标签：jsf, javabeans

我们以这个bean结构为例：

```
public class Abean {
   private Bbean b;
}

public class Bbean {
   private ArrayList<Cbean> c;
}

public class Cbean {
   private ArrayList<Dbean> d;
}

public class Dbean {
    ....
} 
```

所以基本上`Abean`包含了一切。`Cbean`现在我想为所有这些 bean 制作 JSP，例如，用户可以告诉他/她想要多少个`Bbean`. 所以我的问题是我想自动为所有“子”实例显示一个表单，例如：在 d.jsp 上，我想`Dbean`为`Cbeans`.

我试图嵌入`<h:dataTable>`-s，但没有任何成功。任何帮助或想法将不胜感激。我希望我的解释很清楚。

在此先感谢，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T09:33:15.347

我假设由于您使用的是 JSP，所以您没有使用 Facelets？

如果你是，那么你可以利用并手动构建一个带有嵌套表的表。

例如。

```
<table> 
<ui:repeat value="#{myCBEan.d}" var="myDBean">
   <tr>
      <td><h:outputText value="#{myDBean.someText}"/></td>
   </tr>
</ui:repeat>
</table> 
```

或者，Richfaces 有一个***a4j:repeat***做同样的事情，毫无疑问可以与 JSP 一起使用。Richfaces 还有一个***rich:subTable***可以用来嵌套表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T09:48:59.413

嵌套 dataTables 通常不是一个好主意。使用这么深的数据结构，您最终可能会在子控件上进行 O(n^4) 迭代，这可能会对性能产生影响。标准的 dataTable 控件非常原始。更好的方法是使用某种形式的[主/细节](http://en.wikipedia.org/wiki/Master-detail)设计或编写自定义树控件。由于编写自定义控件需要详细了解 JSF 架构，因此您可能首先要查看第 3 方 JSF 库，看看是否能找到适合您需要的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T08:36:03.393

我不确定这是否能解决您的问题，但例如在您的 CBean 中，如果您有列表“d”的 getter，您可以使用 JSTL 遍历 CBean 中的 DBean。

```
<c:forEach items="#{myCBean.d}" var="myDBean">
    <h:form>
        <!-- example form content -->
        <h:outputText value="#{myDBean.someText}"/>
        <h:inputText value="#{myDBean.exampleInput}"/>
        <h:commandButton value="#{myDBean.anAction}"/>
    </h:form>
</c:forEach> 
```

# ruby-on-rails - ActiveSearch::EmptyTermError

> ID：832065
> 
> 赞同：1
> 
> 时间：2009-05-06T22:16:26.363
> 
> 标签：ruby-on-rails, ruby

我使用 Active_Search 插件尝试向我的应用程序添加一些简单的搜索功能，当在数据库中找到它们时它可以正常工作，但如果我只是在没有输入的情况下运行搜索，那么它会给我错误消息“ActiveSearch:: EmptyTermError”。

我如何使搜索操作返回正确的值（它可以这样做），而且，如果没有找到任何内容或没有输入任何内容，应用程序会使用 flash 告诉我这一点。

这是代码：

 `````
def search
  if params[:query]
    query = params[:query]
    @users = User.find_using_term(query)
  else #i.e nothing is found in the query so do this
    flash[:notice] = "No Results Found"
    redirect_to :action => "home"
  end
end

````  `任何想法将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T22:19:58.057

您必须使用`rescue`块处理错误：

```
def search
  @users = User.find_using_term params[:query]
rescue ActiveSearch::EmptyTermError
  flash[:notice] = "No Results Found"
  redirect_to :action => "home"
end 
```

但是，这样一来，如果搜索运行良好，但结果集仍然为空，您将不会被重定向。这里有一些代码会为空结果和 EmptyTermError 闪烁并重定向您。

```
def search
  @users = User.find_using_term params[:query]
  return unless @users.empty?
rescue ActiveSearch::EmptyTermError
ensure
  flash[:notice] = "No Results Found"
  redirect_to :action => "home"
end 
```

`return`如果我们有结果，就离开。

该`rescue`块是空的，它只是让错误通过。

`ensure`无论我们是否处理了异常，该块都会运行。（但如果我们在此之前返回，肯定不会。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-06T22:33:11.190

User.find() 与 User.find_all() 之间有区别

如果没有找到记录，第一个将引发异常。第二个将返回零。如果是第一个，就好像您正在通过“主键”进行搜索。

可能和你的问题有关...

# servlets - JETTY COMET 实施或 Resin COMET 实施哪个更好

> ID：832067
> 
> 赞同：2
> 
> 时间：2009-05-06T22:16:33.307
> 
> 标签：servlets, jetty, comet, resin, hessian

我们一直在使用 JETTY 的暂停 servlet 实现来使用 JSON 消息和 XStream 来滚动我们自己的 COMET Web 应用程序。

有没有人有 Resin 实施 COMET 的经验以及他们如何比较？

也比 COMET 更普遍的是，没有人对最好的 Java Suspended servlet 3.0 实现提出建议。

以下是一些资源：

*   [COMETD](http://cometdproject.dojotoolkit.org/) - 各种 COMETD 实现的 JETTY 资源
*   [Resin 的 Hessian 流 COMET 实现示例](http://hessian.caucho.com/comet/)
*   [JETTY COMET 暂停 Servlet 性能](http://blogs.webtide.com/gregw/entry/comet_performance)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-06-15T13:13:24.427

两者在社区中的吸收都非常有限。如果您正在寻找一个体面且免费的基于 Java 的 Comet 解决方案，我建议您尝试类似[这个彗星服务器](http://www.stream-hub.com/)的社区版，或者尝试在 Jetty 之上实现[Atmosphere API 。](https://atmosphere.dev.java.net/)这可能不是您正在寻找的答案，但如果您想要工业级的 Comet 实施，您最好采用这种方式。只是我的2美分。

# iphone - 如何使用 iPhone 上的 CSS 过渡使元素缩小到零？

> ID：832099
> 
> 赞同：0
> 
> 时间：2009-05-06T22:24:44.720
> 
> 标签：iphone, css, animation, safari, webkit

我正在尝试使用专有的 iPhone Safari 属性`-webkit-transition`并`-webkit-transform`通过优美的动画使元素消失。代码：

```
<div id="right" style="font-size: 500%; text-align: center; background-color: #fdf; -webkit-transition-property: -webkit-transform; -webkit-transition-duration: 1s;">3</div>

<script type="text/javascript">
    function shrinky() {
        this.style.webkitTransform = 'scale(0,1)';
    }

    document.getElementById('right').onclick = shrinky;
</script> 
```

我希望元素通过优美的动画缩小到不可见。

这在 OS X 10.5.6 上的桌面 Safari（3.2.1（5525.27.1））上运行良好，但在 iPhone（iPhone OS 2.2.1（5H11））上，它`div`突然消失了。

有没有办法让动画像[苹果的文档（我认为需要注册）](https://developer.apple.com/safari/library/documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Transitions/chapter_5_section_1.html#//apple_ref/doc/uid/TP40008032-CH4-SW1)所说的那样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T22:26:18.087

将第一个`scale`参数设置为非常小的小数，而不是 0，似乎可以使动画工作。代码：

```
<div id="right" style="font-size: 500%; text-align: center; background-color: #fdf; -webkit-transition-property: -webkit-transform; -webkit-transition-duration: 1s;">3</div>

<script type="text/javascript">
    function shrinky() {
        this.style.webkitTransform = 'scale(0.000001,1)';
    }

    document.getElementById('right').onclick = shrinky;
</script> 
```

不确定这是否是 iPhone 错误，但似乎是这样。

# iphone - 在 sqlite 中递归进行递归计算的替代方法？

> ID：832106
> 
> 赞同：4
> 
> 时间：2009-05-06T22:26:34.623
> 
> 标签：iphone, sqlite, recursion, time-complexity

我目前正在为 iPhone 开发一个项目，该项目需要访问存储在本地 sqlite 数据库中的大量分层数据。更常见的操作之一是计算汇总状态字段。现在，我通过递归遍历该项目的所有后代（可以是 1 到 n 层深的任何地方）来做到这一点。然而，这最终需要大量的 sql 调用。iPhone 上的每个 sqlite 调用大约需要 250 毫秒才能完成，最后这加起来大约需要 7.7 秒的处理时间。有没有人有任何建议在少于 O(n) 的时间内做这样的事情？我认为问题的根源在于正在进行的大量 sql 调用，所以这就是我想要减少的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T22:32:14.157

您需要一个不同的表组织。查看[在 MySQL 中管理分层数据](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)或查看[Joe Celko 的书](http://www.elsevier.com/wps/find/bookdescription.cws_home/702605/description#description)。

# sharepoint - 如何将自定义列表操作的可见性限制为新定义的组

> ID：832111
> 
> 赞同：1
> 
> 时间：2009-05-06T22:28:43.667
> 
> 标签：sharepoint, permissions, action

我为列表中的项目创建了一个自定义操作（项目的自定义打印）。我定义了一个名为“打印用户”的新 SharePoint 组。我想将打印自定义操作的可用性限制为仅“打印用户”组的成员。

我无法在 feature.xml 或 element.xml 文件（其中定义了自定义打印操作）中找到允许我过滤对组的可见性的属性。那是看错地方了吗？这甚至可以完成，还是我必须在 Print.aspx（自定义操作的目标）中编写代码来检查组成员身份，然后呈现“对不起，您没有权限”消息而不是真正的打印页面?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-12T18:21:34.237

恐怕您只能使用 SPBasePermission 来限制自定义操作的显示。您创建的自定义组无法完成此操作。请参阅此链接以了解如何创建自定义操作。 [例子](http://blog.thekid.me.uk/archive/2007/06/23/sample-editcontrolblock-customaction-for-sharepoint.aspx)

此链接将为您提供有关安全性如何工作的更多信息[MSDN](http://msdn.microsoft.com/en-us/library/ms460194.aspx)权限是您需要检查的属性

# c# - 首先获取的正则表达式（C# 风格） 在标题标签之后

> ID：832116
> 
> 赞同：0
> 
> 时间：2009-05-06T22:29:53.850
> 
> 标签：c#, asp.net, regex

我几乎完成了我的网站的引用系统，但是有一个最后一个琐碎的正则表达式，我就是不能正确。

我所追求的是引用页面的摘录，我将最相关的摘录定义为：

页面的 HTML 源代码中的第一段（由`<p></p>`标记标记） 。`<h1></h1>``<h2></h2>``<h3></h3>`

例如，我可以成功获取`<title></title>`HTML 的标签，如下所示：

```
Regex reTITLE = new Regex( @"(?<=<title.*>)([\s\S]*)(?=</title>)",
RegexOptions.IgnoreCase );

Match match = reTITLE.Match( strHTMLSource );
if (match.Success)
    {
        strReferringPageTitle = match.Value.Trim( );
    } 
```

我的问题——我可以使用什么正则表达式来获取我的帖子第一部分中描述的字符串？

PS：我喜欢 StackOverflow 和这个社区——干得好，Joel & Co.！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T22:38:09.027

```
Match m = Regex.Match(strHTMLSource, "^.*?</h[123]>.*?<p>(.*?)</p>",
    RegexOptions.Compiled | RegexOptions.IgnoreCase);

string para = m.Success ? m.Groups[1].Value.Trim() : string.Empty; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T23:04:46.280

就我个人而言，我会使用 XPath 查询来完成您想要实现的目标，这比摆弄正则表达式要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T22:47:54.540

此正则表达式将查找 h1、h2 或 h3 之后的所有第一段。如果您只想要页面上的第一段，只需保留第一个匹配项。

```
(?<=</h[1-3]>\s*?<p>)([\s\S]*?)(?=</p>) 
```

您可能需要调整`<p>`标签的匹配以考虑属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T00:32:41.293

有很多用例是正则表达式无法正常工作的。例如：

```
<p>foo<p>bar</p>baz</p>

<p>This paragraph is valid <!-- <p>This one isn't</p> --> </p> 
```

`<p>`捕获和之间的文本的正则表达式`</p>`将捕获（分别）：

```
foo<p>bar

This paragraph is valid <!-- <p>This one isn't 
```

如果我必须处理在野外找到的 HTML，我会使用 MSHTML 来解析 HTML，然后在 DOM 中搜索以找到对象。

可以肯定的是，使用 MSHTML 并不像使用正则表达式那样轻量级。但是 MSHTML 旨在让最草率的网页变得有意义。我宁愿使用它旨在处理的凌乱现实世界用例的所有知识，也不愿自己发现它们。

有关一些示例代码，请参阅[此](https://stackoverflow.com/questions/56107/what-is-the-best-way-to-parse-html-in-c)问题的答案。

# sql - 为什么 ActiveRecord SQL 和 PL/SQL Developer SQL 之间存在差异？

> ID：832118
> 
> 赞同：0
> 
> 时间：2009-05-06T22:30:39.933
> 
> 标签：sql, oracle, activerecord

我在 Oracle PL/SQL Developer 中有一个 select 语句，它根据日期检索值：

```
select * from <table> where to_date(create_date) = to_date('20090506', 'YYYYMMDD') 
```

其中`create_date`是 Oracle 类型的日期。这将返回一个非空集。但是，在 ActiveRecord 中：

```
<Table>.find_by_sql("select * from <table> where to_date(create_date) = to_date('20090506', 'YYYYMMDD')") 
```

不返回任何行，这是不正确的。我怀疑这与 ActiveRecord 如何处理 Time/Date/DateTime 对象有关。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T10:14:54.827

鉴于您自己的“hack”和列名 create-DATE，我怀疑 create-date 是 DATE 列。当您对日期列执行 to_date 时，Oracle 足够“友好”，不会引发错误，但如果确实引发错误会更好。所以正确的解决方案是（在 ORACLE 中！如在 ActiveRecord 中）：

```
select * from <table> where create_date = to_date('20090506', 'YYYYMMDD') 
```

简而言之：不要在日期列上使用 to_date()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T23:22:11.760

好吧，这是我的黑客。我并不为此感到自豪，但它会起作用。在我看来，实际上坚持 Ruby/Oracle Date 类型的任何更好的答案都会更好。

```
Table.find_by_sql("
  select * from <table>
  where to_char(create_date, 'YYYY-MM-DD') = '2009-05-06'
") 
```

# c - glibc 和 SSE 功能

> ID：832133
> 
> 赞同：5
> 
> 时间：2009-05-06T22:34:06.743
> 
> 标签：c, performance, sse

我正在尝试查找有关 glibc 的信息以及它在多大程度上使用 SSE 功能。

如果它经过优化，我可以直接使用它吗？

假设我使用的是较大的 Linux 发行版之一，我假设它的 glibc 被编译为尽可能通用并尽可能便携，因此没有优化？

我对函数 memcpy 和 memcmp 以及如何尽快获得这些函数特别感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T22:53:28.770

glibc 2.8 根本不将 SSE 用于 memcpy 或 memcmp（在 x86 或 x86_64 中） - 它使用一些手写程序集来避免该系列的所有 CPU 不支持的任何内容。在 glibc 2.10 中，将支持一种新的重定位类型[STT_GNU_IFUNC](http://udrepper.livejournal.com/20948.html)，这将使基于 CPU 支持的更好的优化成为可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T23:04:58.323

如果您使用最高优化设置进行编译，则 memcpy 和 memcmp 可能会被编译器替换为内部函数，并且根本不会调用 glibc。然后*mcpu*和*march*编译器选项会选择最快的代码。

# python - 如何在 Web 服务器中设置 Python？

> ID：832140
> 
> 赞同：4
> 
> 时间：2009-05-06T22:36:24.803
> 
> 标签：python, windows, django

不完全是关于编程，但我需要帮助。

我正在使用 WampServer 运行开发服务器。我想安装 Python（因为我更喜欢使用 Python 而不是 PHP），但似乎没有明显的选择。我读过关于 mod_python 和 WSGI，以及后者如何更好。

但是，根据我收集到的信息（我可能错了），您必须使用 WSGI 比使用 PHP 做更多的低级工作。所以我研究了 Django，但它似乎对我想要的来说太复杂了。

那么，你会给这个领域的新手什么建议呢？

再次抱歉，如果这不是关于编程的，但它是相关的，这似乎是一个很好的提问地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T22:41:23.417

Django 不是一个 Web 服务器，而是一个 Web 应用程序框架。

如果您想要一个能够处理一些动态和一些静态内容的简单 Python 网络服务器，请查看[CherryPy](http://www.cherrypy.org/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-07T00:30:18.070

使用[mod_wsgi](http://code.google.com/p/modwsgi/)在 Apache 中嵌入 Python。它工作得非常非常好。

“但是，根据我收集到的信息（我可能错了），你必须用 WSGI 做比 PHP 更多的低级工作。所以我研究了 Django，但它似乎对我想要的来说太复杂了。”

1.  如果您尝试将整个应用程序编写为符合 WSGI 的应用程序，直接通过 mod_wsgi 访问，您将重新发明轮子。

2.  如果您尝试在 Django 中编写应用程序，您将在几个小时内启动并运行一些东西。Django 不是“太复杂”——它是完整的。您不必全部使用它，但是——对于任何实际的应用程序——你将需要它的大部分。特别是，内置管理员将为您节省大量编程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-07T03:14:24.197

[Werkzeug](http://werkzeug.pocoo.org/)是一个很棒的小 Python 工具 (werkzeug)，它与 ​​mod_wsgi 一起使用，用于创建不需要数据库后端的简单应用程序，例如计算器。他们甚至有一个漂亮的[截屏视频](http://werkzeug.pocoo.org/wiki30/)，可以在 30 分钟内创建一个简单的 wiki。

如果您最终确实想要拥有 ORM 和 CMS，您可以稍后随时添加类似 SQLAlchemy/FormAlchemy 的内容。

避免使用 mod_python，在我看来，它的内存占用相当大，而且它实际上比 mod_wsgi 更难安装和设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T22:42:36.287

要将 python 与您的 Apache 服务器一起使用，您需要安装 mod_python，以下链接应该对您有所帮助。

*   [http://httpd.apache.org/modules/python-download.cgi](http://httpd.apache.org/modules/python-download.cgi)
*   [http://www.modpython.org/](http://www.modpython.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T22:47:24.980

如果它确实是您正在设置的开发服务器，而不是在某个时候将被提升为生产的机器，那么 Django 有一个不需要 Apache 配置的[内置开发网络服务器。](http://docs.djangoproject.com/en/dev/intro/tutorial01/#the-development-server)

您对底层工作的观察反映了 PHP 和 Python 之间的一些差异。PHP 是一门从一开始就以制作网页为主要目的而设计的语言。Python是一种语言。Mod_Python 和 Mod_WSGI 为该语言的输入/输出提供了一种在 Web 请求/响应环境中生存的方式。Django 增加了 Web 感知框架的便利性。

你提到 python 对于你想要的东西来说似乎太复杂了，这就引出了一个问题：你想要什么？:-)

# user-interface - 面向业务的大量数据输入 (CRUD) 应用程序的 GUI 设计的良好示例

> ID：832142
> 
> 赞同：36
> 
> 时间：2009-05-06T22:37:12.930
> 
> 标签：user-interface, usability, enterprise, crud

我在哪里可以找到制作精良的企业软件示例，*这些*软件具有：

*   良好、一致地使用键盘快捷键。
*   良好的键盘表单导航
*   标准化表单验证
*   *查找*/*搜索*屏幕的标准化使用。（用户被要求输入客户 ID，不知道但可以从返回它的弹出窗口中查找）
*   标准化可用性/LaF 约定

很高兴看到样本范围从简单的 CRUD 屏幕到非常复杂的面向流程的 GUI，用于 CRM/ERP/财务/风险评估等应用程序。基本上是具有大量输入字段的 GUI，定义了某些业务流程。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-05-09T23:36:32.750

我没有任何例子可以指出。事实上，这些屏幕中的许多可能很难在网络上找到，因为它们中的大多数往往“丑陋”。这些类型的屏幕很少漂亮。

我可以提供一些技巧，来自与这些东西打交道的悠久历史。

1.  **一致性。**让一切都“工作一样”，并且一直工作一样。基本上，您应该能够查看表单而不是屏幕进行输入。所有这些闪烁、小计和颜色在输入表格后都很好，但在输入过程中却没有。在那里，您基本上需要音频警报来让他们知道“出了点问题”。经典的“滴答滴答滴答滴答”场景，因为用户发现他们输入了错误的 4 个字段。用户不是很盲目，但他们不会看着你的屏幕。数据在表格上。

2.  **最好以模态方式工作，并因错误而停止他们，而不是让他们继续前进。**对于大型表格，扫描所有这些信息并在事后查找错误非常困难。当他们出错时阻止他们，这样他们就可以修复它并继续前进，而不是在最后回来修复它。您可以在表单上拥有的业务规则、验证和执行越多越好。弹出窗口，警报，选择器，如果需要他们的注意，模态模态模态。他们在这里不使用粘土。他们不是在创作伟大的美国小说或为全球经济建模。

3.  **总结抽查结果。**例如，在输入订单时，他们应该能够查看订单总数和行项目数，以查看他们是否“正确”地输入了订单作为一种校验和，而不必逐个字段地扫描他们的输入字段。大多数工作流都有一个不可避免的交叉检查阶段，他们通过输入来验证数据，但这应该是在数据的“原始键控”之后。人们在“批量输入”模式下工作得更快，而不是每次输入时都抽查每一个。这打破了他们的节奏。完成基本验证和键控后，更容易检测和纠正异常。如果某些领域比其他领域更重要（并且您知道那些领域），

    如果表格等设计得好（计算机表格和纸质输入表格），错误应该很难输入（例如错误的客户或错误的项目等）。您可能在某些注释或特殊说明中有错字，但在其他任何地方都没有。如果他们弄错了一个项目或金额，则订单的总和可能不会正确，因此简单的校验和将帮助他们抓住它。

4.  回到“一致性”，**确保像pickers之类的东西都是一样的。**尽量将特殊功能保持在最低限度，因为它可以简化培训并让用户“流畅”地投入到他们的工作中。

5.  **键盘快捷键和导航是必需的，而不是选项。**这里真正的痛点可能是细节区域（即表格结构）。您可能需要一个快捷方式来进入和退出表格结构。您可能已经看到很多示例，您可以在表格中“Tab”，但不能通过 Tab 退出。有一个专用的“元选项卡”键可以进出部分。要求鼠标导航出一个部分是不行的。

6.  **为选择器提供一个热键。**理想情况下，他们不必经常使用这些。也许对于客户查找，他们不可避免地要记住大多数其他代码，或者他们将在输入表上键入。使选择器可过滤。

7.  **滚动是魔鬼。滚动是邪恶的。*没有滚动！***分页比滚动更好，因为“字段不会移动”，它们总是在屏幕上“在同一个位置”。您多久“滚动”一次并且必须在滚动之前搜索“从哪里开始”才能重新获得上下文。即使对于选择列表，分页也非常有效，因为页面更改让他们知道他们实际上在视觉上“做了一些事情”。很多次你滚动一行然后“我真的吗？” 单行滚动可能太微妙了。对于大型条目表格，多页节拍长，一周中的每一天滚动论文。如果您的表格那么大，请确保您有一个热键可以在表格中前后移动，

8.  **强大的查询。**众所周知，“通过示例查询”是最好的机制之一（即，他们将其填写为“他们所知道的”表格并返回表格）。人们需要通过疯狂的标准来查找数据，如果大多数字段都是可查询的，那么这让他们可以做到这一点，而无需您再次猜测他们将需要或不需要什么。Informix 4GL 曾经有一个壮观的 QBE 系统（`> 04/01/09`对于 2009 年 4 月 1 日之后的日期，`12345|23456`项目代码为 12345 或 23456）。一个好的 QBE 表达式很可能不会在典型领域中验证，这是一种特殊情况。（这就是为什么你今天很少看到 QBE 的原因，它需要太多的工作——但它是如此的好。）

9.  请记住，**用户不知道他们*为什么*或*如何*做事，他们只知道要做*什么*。**他们知道*“当我想做 A 时，我按下键`Y`”*他们不知道为什么是 Y，Y 所在的位置，键 X 和 Z 可能与 A 做类似的事情，因为它们被组合在一起。不，他们不知道您的命令分类。他们不知道你的抽象。他们知道做A，打`Y`。想加粗一个字？键入`Ctrl`- `B`。也许`Ctrl`-`I`由于助记符，斜体字对您来说很明显，但对大多数用户而言并非如此。也许`Ctrl`-`B`和`Ctrl`-`I`在`Format`菜单上，很好地分组。没关系。`Ctrl`-`B`== 粗体，我怎么做斜体？

这些接口的缺点是培训。他们确实接受了培训，以便使用它们。但是，事实上，对于任何相当复杂的业务，用户将需要的培训远远超过键控过程。输入屏幕不会教他们业务策略、业务规则等。您可以在应用程序中强制执行这些，但无论如何用户都需要自己了解它们。

但这没关系，因为从长远来看，它更有效。这里的游戏是有效地从用户那里获取数据并以一致的方式呈现给他们。我不会说“逻辑”的方式，因为虽然逻辑可能是逻辑，但它可能不是用户逻辑。所以，如果你愿意，你可以合乎逻辑，随心所欲地称呼它，但要与你的用户保持一致。

另一个轶事，我们习惯了 10 键返回数据。这往往只是数字列表，如项目代码和数量。出于我们的目的，让用户连续两次键入此数据比其他任何方法都更快。它可以捕捉错别字、换位等。结合批量校验和使键控变得更快。这些人只在开始时、完成时以及出现错误时才查看屏幕。

最后，无论如何，您的屏幕和程序*都会*改变。无论你今年使用什么形式，明年都会改变。这只是现实，所以，仅供参考，做好准备。

祝你的项目好运。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-07T03:48:00.340

我是[http://www.37signals.com/](http://www.37signals.com/)套件的粉丝。我发现他们的表格和 GUI 是经过深思熟虑的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-07T00:30:54.620

你知道，有[Openerp](http://www.openerp.com/)，你可以免费获得程序、源代码、doc。

ps：这个链接对我来说没问题，如果打不开，请在google中搜索openerp。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-12T06:20:58.973

我用过很多——但很难记住任何特定的应用程序，因为真正好的用户界面几乎可以忘记。

我记得很多不好的。任何对 Lotus Notes 不屑一顾的人显然从未使用过任何基于 SAP 或 ORACLE 表单的应用程序。

为了提高效率，我建议您查看旧的 SABRE 航空公司预订应用程序。两行文本没有空格或其他标点符号

第一行航班第二行付款详细信息如下所示将预订并支付航班费用：

```
123109BA176Y
276.00GBPAM1122123412341234 
```

旅行社对它上瘾了，多年来一直拒绝接受超级骗子 Windows GUI 替代品，而是启动绿屏终端模拟器。我认为只有当航空公司改用三字母代码和四位数航班号时，它才会死去。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-06T22:38:49.117

我发现[Dashboard Spy 网站](http://www.enterprise-dashboard.com/)是获得灵感的最佳网站之一。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-07T00:20:35.147

以下是不要做的示例！：[您曾经使用过的最糟糕的 UI](http://web.archive.org/web/20100715232035/https://stackoverflow.com/questions/238177/worst-ui-youve-ever-used)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-10-27T21:40:26.610

你真的应该去参观一下[Interface Hall of Shame](http://homepage.mac.com/bradster/iarchitect/shame.htm)，在那里你不仅会发现有史以来最奇怪的 GUI，而且还会发现它们产生的可用性问题的可能解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-12T05:54:00.687

鉴于您的应用程序似乎有很多复杂性，也许您应该考虑 37signals 的[Getting Real方法。](http://gettingreal.37signals.com)Getting Real 将帮助您设计有效且有用的 UI，让用户满意。

# c# - aspx 页面上的多个用户控件

> ID：832145
> 
> 赞同：0
> 
> 时间：2009-05-06T22:38:06.327
> 
> 标签：c#, .net, asp.net

我有一个在页面上动态加载多个用户控件的页面。我在每个用户控件上都有几个按钮，它们会导致服务器端事件，该事件执行与触发操作的用户控件相关的一些处理。

我遇到的问题是，此按钮单击会导致整个页面重新加载（因为所有动态加载的控件都需要在每次回发时重新加载），因为所有用户控件都会使页面变得非常慢。

当用户与其中一个用户控件交互时，有没有办法告诉 .NET 忽略其他用户控件？

所有用户控件都在模式设置为条件的更新面板中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T23:27:45.583

删除更新面板并切换到使用 jquery 和 JSON。

您可以更加关注您的代码，并且应该能够放弃所有控件加载废话。

根本的问题是更新面板仍然需要执行完整的页面才能发送回你想要的一小部分数据。通过将 jquery 与页面方法或 Web 服务方法结合使用，您的页面将不必为每个“面板”更新重新构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T22:49:45.737

具体回答你的问题。不，没有办法“告诉 .NET 忽略其他用户控件”。当然，您可以告诉您的应用程序忽略某些内容。也许你错过了一些`if (!Page.IsPostBack) {}`陈述？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-08T03:12:31.760

您应该能够在您提到的场景中使用 UpdatePanels。必须有特定于您的实现的东西导致整个页面刷新。我建议将其剥离以隔离问题。我创建了以下示例，它按预期工作......只有触发的 UpdatePanel 被刷新：

*   制作了两个用户控件，在每次页面加载时在标签中显示新的 GUID。
*   使用两个 UpdatePanel 创建了一个测试页面。每个 UpdatePanel 都有一个空的 PlaceHolder 控件和一个用于触发异步回发的按钮。
*   在测试页面的 Page_Init 中，使用 LoadControl 创建用户控件的实例并将它们添加到相应的 PlaceHolder (ph.Controls.Add())。

当我单击 UpdatePanel 中的任一按钮时，只有该面板会刷新（即使在每次异步回发时调用 LoadControl 两次以重新创建控件层次结构）。

# vmware - 如何保存 VMware Fusion VM？

> ID：832151
> 
> 赞同：4
> 
> 时间：2009-05-06T22:38:53.657
> 
> 标签：vmware

我正在为我的团队分别使用 IE6、7 和 8 制作 3 个 VM 版本的 XP。我从我们拥有的具有 IE6 和 SP2 的旧 VMware 映像开始，并且已经通过并使用我们需要的一切对其进行了自定义，离开了 IE6。

现在我需要复制这个 VM，然后在接下来的 2 个副本上更新到 IE7 和 8。

我原来的虚拟机有以下文件：.nvram、.vmdk、.vmsd、.vmx 和 .vmxf。当我由此创建新的 vm 时，我必须选择 .vmdk 文件。然后，VMware 完成并构建了它需要的其他文件。

我发现我在第一个 XP 副本上所做的所有更新都存储在一个单独的文件中，我指示 VMware 将其存储在 /usr/local/vms 中。通过我在升级过程中拍摄的更新和 2 个快照，现在大约 6GB。

我复制了我原来的虚拟机并设置了一台名为 IE7 的新机器，但是当它启动时，没有任何更新。所以我现在知道我的所有更改都保存在 /usr/local/vms/IE6 6gb 文件中。

如何将所有更新合并回 .vmdk 文件，以便 A) 创建我需要的其他 2 个 IE7/8 VM 和 B) 将 3 个 vm 映像放在我们的网络上供其他开发人员使用？

我的想法是，既然我是从 .vmdk 文件开始这个过程的，那么应该有一种方法可以将所有内容推回到那个文件中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T22:52:32.003

删除快照点应将增量文件提交回主 .vmdk 文件。您应该能够在浏览器安装之前进行快照，并在快照之后分叉每个安装。

如果这些是用于测试的参考副本，我会使用克隆/复制功能来创建单独的虚拟机，每个浏览器一个。这可能更容易维护和分发给其他用户。

# java - 使用 Terracotta 对 COMET 进行聚类

> ID：832154
> 
> 赞同：2
> 
> 时间：2009-05-06T22:39:09.210
> 
> 标签：java, jetty, comet, terracotta, cometd

我们正在尝试使用 JETTY 7.0 的暂停 servlet 3.0 API 实现来集群一个用 Java 编写的 COMET Web 应用程序。

有没有人有在暂停/恢复 servlet Web 应用程序中使用 Terracotta 的经验。

JETTY 的 Greg Wilkins 提到了 Terracotta 的 COMET 性能问题。

*   [用 Terracotta 聚类 COMETD](http://blogs.webtide.com/gregw/entry/clustering_cometd_with_terracotta)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T06:03:38.690

另一个在内部使用 COMETD 在分布式节点之间进行通信的 COMET 集群解决方案称为：

*   [COMETD Google Groups 上的 Oort Cloud 讨论](http://groups.google.com/group/cometd-users/search?group=cometd-users&q=Oort&qt_g=Search+this+group)
    *   您可以通过从 JETTY 7 SVN 检查它来尝试：http: [//svn.cometd.com/trunk/cometd-java/oort/](http://svn.cometd.com/trunk/cometd-java/oort/)

# ruby - 如何在 RubyCocoa 中激活（带到前面）？

> ID：832158
> 
> 赞同：0
> 
> 时间：2009-05-06T22:41:12.763
> 
> 标签：ruby, cocoa, applescript

如何将我的 RubyCocoa 应用程序放在最前面？基本上我想获得与 applescript 行相同的结果：

```
tell application "Whatever" to activate 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T23:07:48.237

[在 Cocoa 中，您可以使用 NSApplication 的-activateIgnoringOtherApps:](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSApplication/activateIgnoringOtherApps:)来推动您的应用程序。大概您可以通过 RubyCocoa 桥接器进行调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T01:58:33.770

这肯定有有效的用途，我相信您知道自己在做什么，但请记住，如果您使用不当，Mac 用户会用干草叉和霰弹枪追赶您。当用户忙于处理其他事情时，应用程序窃取焦点并不能真正在 OS X 上运行。

# sql - SQL：删除所有可用表中的所有数据

> ID：832160
> 
> 赞同：27
> 
> 时间：2009-05-06T22:41:40.327
> 
> 标签：sql, oracle

我正在使用oracle DB维护30多个表，如何从所有表中删除所有数据？我只想删除数据而不是删除表。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-14T09:12:36.207

没有命令“ALTER TABLE XXX DISABLE ALL CONSTRAINTS”

我提出这个；

```
BEGIN
  FOR c IN (SELECT table_name, constraint_name FROM user_constraints WHERE constraint_type = 'R')
  LOOP
    EXECUTE IMMEDIATE ('alter table ' || c.table_name || ' disable constraint ' || c.constraint_name);
  END LOOP;
  FOR c IN (SELECT table_name FROM user_tables)
  LOOP
    EXECUTE IMMEDIATE ('truncate table ' || c.table_name);
  END LOOP;
  FOR c IN (SELECT table_name, constraint_name FROM user_constraints WHERE constraint_type = 'R')
  LOOP
    EXECUTE IMMEDIATE ('alter table ' || c.table_name || ' enable constraint ' || c.constraint_name);
  END LOOP;
END; 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-05-06T22:48:20.313

生成一个脚本来截断（= 删除所有行）所有表：

```
select 'truncate table ' || table_name || ';' from user_tables 
```

然后执行脚本。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-05-06T23:15:57.220

为了解决约束问题，这样的事情应该起作用：

```
BEGIN

    FOR T in (SELECT table_name FROM user_tables) LOOP
      EXECUTE IMMEDIATE 'ALTER TABLE '||T.table_name||' DISABLE ALL CONSTRAINTS';
    END LOOP;

    FOR T in (SELECT table_name FROM user_tables) LOOP
      EXECUTE IMMEDIATE 'TRUNCATE TABLE '||T.table_name;
    END LOOP;

    FOR T in (SELECT table_name FROM user_tables) LOOP
      EXECUTE IMMEDIATE 'ALTER TABLE '||T.table_name||' ENABLE ALL CONSTRAINTS';
    END LOOP;
END; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-06T23:13:55.553

截断的潜在缺点是它可能会在参照完整性约束上失败。因此，您首先要禁用外键约束，然后进行截断，然后重新启用约束。克隆模式（exp 和 imp）的“加号”是你也可以删除并重新创建表空间（如果你想回收一些物理磁盘空间作为删除所有数据的结果，你可能想要这样做）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-06T22:45:53.343

克隆模式然后删除旧表？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-12T13:52:33.860

我使用上面提到的答案创建了这个存储过程。这完美地工作，没有任何错误或异常。

```
 create or replace PROCEDURE DELETE_ALL_DATA
AS 
cursor r1 is select * from user_constraints;
cursor r2 is select * from user_tables;
cursor r3 is select * from user_constraints;
cursor r4 is select * from user_tables;

BEGIN

    FOR c1 IN r1
  loop
    for c2 in r2
    loop
        begin
       if c1.table_name = c2.table_name and c1.status = 'ENABLED' THEN
        dbms_utility.exec_ddl_statement('alter table ' || c1.owner || '.' || c1.table_name || ' disable constraint ' || c1.constraint_name);
       end if;
        EXCEPTION
         WHEN NO_DATA_FOUND
           THEN
           continue;
         WHEN OTHERS 
           THEN
           continue;
           end;
    end loop;
  END LOOP;

    FOR T in (SELECT table_name FROM user_tables) LOOP
      begin
      EXECUTE IMMEDIATE 'TRUNCATE TABLE '||T.table_name;
      EXCEPTION
         WHEN NO_DATA_FOUND
           THEN
           continue;
         WHEN OTHERS 
           THEN
           continue;
           end;
    END LOOP;

    FOR c1 IN r3
  loop
    for c2 in r4
    loop
        begin
       if c1.table_name = c2.table_name and c1.status = 'DISABLED' THEN
        dbms_utility.exec_ddl_statement('alter table ' || c1.owner || '.' || c1.table_name || ' enable constraint ' || c1.constraint_name);
       end if;
        EXCEPTION
         WHEN NO_DATA_FOUND
           THEN
           continue;
         WHEN OTHERS 
           THEN
           continue;
           end;
    end loop;
  END LOOP;

    commit;
END DELETE_ALL_DATA; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-12T10:29:12.903

A slight variation on Andomar's answer to truncate all tables for a specific user instead of only those of the current user:

```
SELECT 'TRUNCATE TABLE ' || owner || '.' || table_name || ';' FROM all_tables WHERE owner = 'user/schema' 
```

Replace the `user/schema` bit above with the name of the user/schema (between the quotes) you are interested in.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-12T18:18:47.743

删除oracle中所有表的所有数据

```
宣布
  str VARCHAR2(100);
开始
  为我输入
  （从 user_objects 中选择 object_name，其中 object_type='TABLE'
  )
  环形
    str := '截断表'|| i.object_name;
    立即执行 str;
    DBMS_OUTPUT.PUT_LINE('表数据已删除：' || i.object_name);
  结束循环；
结尾;
```

欲了解更多信息：[http ://www.oracleinformation.com/2014/10/delete-all-the-data-from-all-tables.html](http://www.oracleinformation.com/2014/10/delete-all-the-data-from-all-tables.html)

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-09-01T05:59:17.730

这两行脚本是最好的

```
EXEC sp_MSForEachTable 'ALTER TABLE ? NOCHECK CONSTRAINT ALL'
GO

EXEC sp_MSForEachTable 'DELETE FROM ?'
GO 
```

# .net - .NET - 从列表中删除 在“foreach”循环中

> ID：832165
> 
> 赞同：47
> 
> 时间：2009-05-06T22:43:41.617
> 
> 标签：.net, foreach, remove-method

我有我*想*看起来像这样的代码：

```
List<Type> Os;

...

foreach (Type o in Os)
    if (o.cond)
        return;  // Quitting early is important for my case!
    else
        Os.Remove(o);

... // Other code 
```

这不起作用，因为当您在该列表的`foreach`循环内时，您无法从列表中删除：

有没有解决问题的通用方法？

如果需要，我可以切换到其他类型。

选项 2：

```
List<Type> Os;

...

while (Os.Count != 0)
     if (Os[0].cond)
         return;
     else
         Os.RemoveAt(0);

... // Other code 
```

丑陋，但它应该工作。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2009-05-06T22:47:19.503

您可以向后遍历列表：

```
for (int i = myList.Count - 1; i >= 0; i--)
{
    if (whatever) myList.RemoveAt(i);
} 
```

* * *

为了回应您关于在找到不删除的项目时想要退出的评论，那么仅使用 while 循环将是最好的解决方案。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2009-05-06T22:48:24.757

在 foreach 循环中，您永远不应该从您正在迭代的集合中删除任何内容。这基本上就像锯你坐的树枝。

使用您的 while 替代方案。这是要走的路。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2009-05-06T23:22:48.140

您真的需要在`foreach`循环中执行此操作吗？

这将获得与您的示例相同的结果，即从列表中删除所有项目，直到第一个符合条件的项目（或者如果它们都不符合条件，则删除所有项目）。

```
int index = Os.FindIndex(x => x.cond);

if (index > 0)
    Os.RemoveRange(0, index);
else if (index == -1)
    Os.Clear(); 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-05-06T23:29:04.613

我是一名 Java 程序员，但这样的工作：

```
List<Type> Os;
List<Type> Temp;
...
foreach (Type o in Os)
    if (o.cond)
        Temp.add(o);
Os.removeAll(Temp); 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2009-05-06T23:06:50.377

我的分析库刚刚遇到这个问题。我试过这个：

```
for (int i = 0; i < list.Count; i++)
{                
   if (/*condition*/)
   {
       list.RemoveAt(i);
       i--;
   }
} 
```

这很简单，但我没有想到任何突破点。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-02-21T17:08:09.027

这是最**简单的解决方案**，**为什么**

### 问题：

通常，我们从原始列表中删除，这会产生维护列表计数和迭代器位置的问题。

```
List<Type> Os = ....;
Os.ForEach(
    delegate(Type o) {
        if(!o.cond) Os.Remove(o);
    }
); 
```

### 解决方案 - `LINQ.ForEach`：

请注意，我添加的只是`ToList()`. 这将创建一个您执行 ForEach 的新列表，因此您可以删除原始列表，但继续遍历整个列表。

```
List<Type> Os = ....;
Os**.ToList()**.ForEach(
    delegate(Type o) {
        if(!o.cond) Os.Remove(o);
    }
); 
```

### 解决方案 - 常规`foreach`：

这种技术也适用于常规**`foreach`**语句。

```
List<Type> Os = ....;
foreach(Type o in Os**.ToList()**) {
  if(!o.cond) Os.Remove(o);
} 
```

`struct`请注意，如果您的原始列表包含元素，则此解决方案将不起作用。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2010-08-30T17:56:22.147

我知道你要求别的东西，但如果你想有条件地删除一堆元素，你可以使用 lambda 表达式：

```
Os.RemoveAll(o => !o.cond); 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2009-05-06T22:47:52.793

```
 Os.RemoveAll(delegate(int x) { return /// }); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-05-06T23:01:59.577

我会尝试找到不满足谓词的第一个项目的索引并对其执行 RemoveRange(0, index) 。如果没有别的，应该有更少的 Remove 调用。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-05-06T23:17:30.070

更新：为完整性添加

正如一些人回答的那样，您不应该在使用 GetEnumerator() 迭代集合时修改集合（示例`foreach`）。该框架通过引发异常来阻止您执行此操作。对此的通用解决方案是“手动”迭代`for`（参见其他答案）。小心你的索引，这样你就不会跳过项目或重新评估相同的项目两次（通过使用`i--`或向后迭代）。

但是，对于您的具体情况，我们可以优化删除操作......下面的原始答案。

* * *

如果您想要删除所有项目，直到满足给定条件（这就是您的代码所做的），您可以这样做：

```
bool exitCondition;

while(list.Count > 0 && !(exitCondition = list[0].Condition))
   list.RemoveAt(0); 
```

或者，如果您想使用单个删除操作：

```
SomeType exitCondition;
int index = list.FindIndex(i => i.Condition);

if(index < 0)
    list.Clear();
else
{
    exitCondition = list[0].State;
    list.RemoveRange(0, count);
} 
```

注意：因为我假设`item.Condition`是`bool`，所以我`item.State`用来保存退出条件。

更新：为两个示例添加了边界检查和保存退出条件

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-03-12T14:14:04.330

你可以用 linq 做到这一点

```
MyList = MyList.Where(x=>(someCondition(x)==true)).ToList() 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-06T22:46:29.660

*[在Removing items in a list while iterateing through it 中](http://social.msdn.microsoft.com/forums/en-US/csharplanguage/thread/8975c43f-c329-4b95-9c42-9261869bf7c3/)*有很好的讨论。

他们提议：

```
for(int i = 0; i < count; i++)
{
    int elementToRemove = list.Find(<Predicate to find the element>);

    list.Remove(elementToRemove);
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-05-06T22:53:48.100

如果您知道您的列表不是很大，您可以使用

```
foreach (Type o in new List<Type>(Os))
    .... 
```

这将创建列表的临时副本。然后，您的 remove() 调用将不会干扰迭代器。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-06-06T13:49:13.947

看着`Enumerable.SkipWhile()`

```
Enumerable.SkipWhile( x => condition).ToList() 
```

通常不改变列表，使生活更容易。:)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-11-29T02:11:08.167

Anzurio 的解决方案可能是最直接的，但如果您不介意将一堆接口/类添加到实用程序库中，这里还有一个干净的解决方案。

你可以这样写

```
List<Type> Os;
...
var en = Os.GetRemovableEnumerator();
while (en.MoveNext())
{
    if (en.Current.Cond)
        en.Remove();
} 
```

将以下受[Java`Iterator<T>.remove`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#remove%28%29)启发的基础设施放入您的实用程序库中：

```
static class Extensions
{
    public static IRemovableEnumerator<T> GetRemovableEnumerator<T>(this IList<T> l)
    {
        return new ListRemovableEnumerator<T>(l);
    }
}

interface IRemovableEnumerator<T> : IEnumerator<T>
{
    void Remove();
}

class ListRemovableEnumerator<T> : IRemovableEnumerator<T>
{
    private readonly IList<T> _list;
    private int _count;
    private int _index;
    public ListRemovableEnumerator(IList<T> list)
    {
        _list = list;
        _count = list.Count;
        _index = -1;
    }

    private void ThrowOnModification()
    {
        if (_list.Count != _count)
            throw new InvalidOperationException("List was modified after creation of enumerator");
    }
    public void Dispose()
    {
    }

    public bool MoveNext()
    {
        ThrowOnModification();
        if (_index + 1 == _count)
            return false;
        _index++;
        return true;
    }

    public void Reset()
    {
        ThrowOnModification();
        _index = -1;
    }

    object IEnumerator.Current
    {
        get { return Current; }
    }

    public T Current
    {
        get { return _list[_index]; }
    }

    public void Remove()
    {
        ThrowOnModification();
        _list.RemoveAt(_index);
        _index--;
        _count--;
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-06-05T07:58:43.443

我刚刚遇到了同样的问题并通过使用以下方法解决了它：

`foreach (Type o in (new List(Os))) { if (something) Os.Remove(o); }`

它遍历列表的副本并从原始列表中删除。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-05-24T09:41:48.323

在列表中添加要删除的项目，然后使用以下命令删除这些项目`RemoveAll`：

```
List<Type> Os;
List<Type> OsToRemove=new List<Type>();
...
foreach (Type o in Os){
    if (o.cond)
        return;
    else
        OsToRemove.Add(o);
}
Os.RemoveAll(o => OsToRemove.Contains(o)); 
```

# mysql - MySQL：如何在存储函数中获取存储过程的结果？

> ID：832180
> 
> 赞同：0
> 
> 时间：2009-05-06T22:47:56.053
> 
> 标签：mysql, database, database-design, architecture, stored-procedures

我有一个存储过程，可以进行非常复杂的连接并返回 1 行数据（使用 LIMIT 1）。然后在我的应用程序中使用该数据进行一些计算。通过这种方式，我尝试将业务逻辑排除在存储过程之外。但现在我需要在另一个存储函数中获取该数据以进行一些计算。我想创建存储函数的原因是因为它将在另一个返回数千行的查询中调用。

可能吗？我不想在存储的函数中复制复杂的连接逻辑......我看到的唯一解决方案是使用输出参数。

----------------------------------
PS。我决定向你解释我的情况，也许你会给我另一个决定。

我需要计算货物的交货完税价格（最终价格，包括包装、交货和清关）。这个关税完税价格的计算有点复杂，我不想在我的存储过程和函数中保留复杂的逻辑。所以我创建了一个存储过程，它选择计算价格所需的所有数据，并在我的应用程序中使用这些数据来计算价格。目前一切正常。

但是现在我需要创建一个包含已付完税价格的价目表，我们有数千种商品。因此，如果我为每个货物和平调用我的存储过程，它将花费数千次往返（查询）到服务器。这就是为什么我想创建一个函数来调用存储过程并根据返回的数据计算价格。然后我想像这样使用它：
SELECT Description, blablabla, Weight, ..., GetDeliveryDutyPaidPrice(...) FROM pricelist;

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T23:04:31.490

而不是存储过程，使其成为一个视图。那应该可以解决您的问题。

编辑：

准确地说，您要做的是创建一个视图，其中包含您在计算中使用的所有列。视图类似于存储过程，因为它允许底层数据库引擎优化其性能，但它可以像普通表一样使用 WHERE 子句进行查询。因此，您的表的底层实现只能具有每个表所需的列（从而使您的架构简单），但是视图可以将不同表中的所有不同列组合成一个“表视图”，可以使用查询WHERE 子句。通过这种方式，您可以获得存储过程的好处（针对常用连接优化 SQL 连接）并能够适当地过滤结果（使用 WHERE 子句），同时仍将逻辑排除在数据库之外。

真的。意见是一件非常非常非常好的事情。使用它们。

# .net - 如何检测何时按下热键（快捷键）

> ID：832185
> 
> 赞同：5
> 
> 时间：2009-05-06T22:48:38.720
> 
> 标签：.net, wpf, keyboard-shortcuts, hotkeys

如何检测何时在 WPF 中按下`Ctrl`+等快捷键`O`（独立于任何特定控件）？

我尝试捕获`KeyDown`，但并没有`KeyEventArgs`告诉我是否关闭。`Control``Alt`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-06T23:10:19.200

```
private void Window_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyboardDevice.Modifiers == ModifierKeys.Control)
    {
        // CTRL is down.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T17:10:19.430

我终于想出了如何使用 XAML 中的命令来做到这一点。不幸的是，如果您想使用自定义命令名称（不是 ApplicationCommands.Open 等预定义命令之一），则必须在代码隐藏中定义它，如下所示：

```
namespace MyNamespace {
    public static class CustomCommands
    {
        public static RoutedCommand MyCommand = 
            new RoutedCommand("MyCommand", typeof(CustomCommands));
    }
} 
```

XAML 是这样的......

```
<Window x:Class="MyNamespace.DemoWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:MyNamespace"
    Title="..." Height="299" Width="454">
    <Window.InputBindings>
        <KeyBinding Gesture="Control+O" Command="local:CustomCommands.MyCommand"/>
    </Window.InputBindings>
    <Window.CommandBindings>
        <CommandBinding Command="local:CustomCommands.MyCommand" Executed="MyCommand_Executed"/>
    </Window.CommandBindings>
</Window> 
```

当然你需要一个处理程序：

```
private void MyCommand_Executed(object sender, ExecutedRoutedEventArgs e)
{
    // Handle the command. Optionally set e.Handled
} 
```

# php - 如何跟踪 YouTube 项目的浏览量？

> ID：832190
> 
> 赞同：4
> 
> 时间：2009-05-06T22:49:41.243
> 
> 标签：php, ruby-on-rails

我希望能够以一种我可以查看昨天、上周或任何特定时期观看次数最多的项目的方式来跟踪项目的浏览量。如何使用 PHP 或 Rails 做到这一点？Rails 中是否有此插件，或者是否有使用 PHP/memcached 的简单方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T22:58:28.713

正如 Rémy 所说，您可以使这变得简单，并拥有一个跟踪单个页面视图的数据库表，尽管这可能会在视图上产生一些写入负载，这可能是不可取的。

一种折衷办法是将每个视图的一行写入一个中间的内存表，并定期（可能通过 cron 作业或每 N 个视图）更新主表中的聚合计数。如果您的读取负载真的很高，那么您*可以*考虑将该临时计数器存储在 memcached 中；您会发现，写入磁盘支持的表的频率越低，计数器的容错能力就越差，尽管在简单的流行度计数器的情况下，这可能不是关键数据。

一旦获得了页面浏览量，您就可以进行任何您喜欢的统计分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T22:53:24.107

您可以有一个简单的 SQL 表，其中包含视频 ID、日期和整数计数器，每个视图都会递增。

要从 IP 地址过滤多个视图，请使用包含视频 ID 和 IP 地址的表。每 24 小时截断一次，仅当 IP 地址不在此表中时才增加计数器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T22:57:51.693

对于每个视图，将一些数据保存到 SQL 表中。

*   唯一身份
*   商品编号
*   日期（例如 unixtime）
*   用户IP

然后你可以 COUNT(id) WHERE id = number AND date > last week

```
SELECT COUNT(id) FROM view_table WHERE id = 1 AND date > 1241136000 
```

# algorithm - 如何从 Delphi 集中获得最高值？

> ID：832203
> 
> 赞同：2
> 
> 时间：2009-05-06T22:56:02.307
> 
> 标签：algorithm, delphi, set

有没有办法提取集合中的最高（或最低）值？例如，如果我有以下“字节集”：

```
[0, 1, 2, 4, 5, 28, 199] 
```

有什么功能我可以在上面运行并返回 199 作为结果？

编辑：有一个明显的暴力解决方案涉及 for..in 循环。如果可能的话，我想找到比这更好的方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-06T23:28:47.813

循环确实是正式正确的方法。

```
type
  TSetType = set of TEnumType;

function HighestMember(const s: TSetType): TEnumType;
begin
  for Result := High(Result) downto Low(Result) do
    if Result in s then
      exit;
  raise Exception.Create('empty sets have no highest member');
end; 
```

任何其他类型的解决方案都需要类型转换或汇编程序，这两者都会迫使您失去类型安全性——可以说，它们是“语言之外的”。

如果你能保证你的集合不超过32个可能的元素，那么这个集合可以用一个普通的整数覆盖，你的问题就相当于询问一个32位整数中最高位集合的位置。之前在这里被问过，差不多：

*   [设置的最低有效位的位置](https://stackoverflow.com/questions/757059/position-of-least-significant-bit-that-is-set)

如果您对集合类型没有 32 个元素的限制，那么您有 Delphi 的 256 个元素的限制，并且任何位旋转解决方案都需要处理 32*字节*的输入。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-07T00:03:01.660

集合是无序的，所以你不会比循环更好。如果您经常查找集合的最小/最大值，请使用[堆数据结构](http://en.wikipedia.org/wiki/Heap_(data_structure))，它提供 O(1) 查找来获取最小/最大值和 O(log n) 查找任何其他值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-07T16:29:44.333

这是一个更快的版本，它使用了字节集内部结构的知识。

```
type
  TByteSet = set of Byte;

function HighestElement(const ByteSet: TByteSet): Byte;
type
  TSetBytes = array[0..SizeOf(TByteSet) - 1] of Byte;
var
  I, J: Integer;
  B: Byte;
  SetBytes: TSetBytes;
begin
  if ByteSet <> [] then
  begin
    SetBytes := TSetBytes(ByteSet);
    // Start at the top and work down, one byte at a time
    for I := SizeOf(TByteSet) - 1 downto 0 do
    begin
      // Any bits set here
      B := SetBytes[I];
      if B <> 0 then
      begin
        Result := I * 8;
        for J := 0 to 7 do
          if (B shr J) and 1 <> 0 then
          begin
            Result := Result + J;
            Exit;
          end;
      end;
    end;
  end else
    // No elements set
end; 
```

您可以将集合的类型 TByteSet 更改为几乎任何集合类型，并且该函数应该仍然有效。只需将函数 decl 和 body 中的 TByteSet 替换为您的集合类型即可。如果使用一组 AnsiChar 或一组枚举类型，您还可以修改它以返回实际的元素类型。要获得最小值，请将 for 循环的“I”更改为“0 to SizeOf(TByteSet) - 1”，并将“J”循环中的 if 测试更改为“if (B shl J) and $80 <> 0”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T15:53:44.357

几乎相同，但更短：

```
type
  TByteSet = set of Byte;

function MaxSet(S: TByteSet): Byte;
var
  CardArr: Array [0..7] of Cardinal absolute S;
  i: Byte;
begin
  i := 7;
  while (i > 0) AND (CardArr[i] = 0) do
    Dec(i);
  Result := i + Floor(Log2(CardArr[i]));
end; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-14T13:57:24.907

最高和最低，不使用数学单位：

```
type
  TCharSet = set of Char;

function MaxOfSet(aSet: TCharSet):Char;
var
  Data:array[0..SizeOf(TCharSet)-1] of Byte absolute aSet;
  i,r:Byte;
begin
  if aSet<>[] then begin
     i:=SizeOf(TCharSet)-1;
     while (i>0) and (Data[i]=0) do
        Dec(i);
     r:=i*8;
     i:=Data[i];
     while (i and $80)=0 do begin
        i:=i shl 1;
        Dec(r)
     end;
     Result:=Chr(r+7)
  end
  else
     raise Exception.Create('Unable to extract max value from an empty set');
end;

function MinOfSet(aSet: TCharSet):Char;
var
  Data:array[0..SizeOf(TCharSet)-1] of Byte absolute aSet;
  i,r:Byte;
begin
  if aSet<>[] then begin
     i:=0;
     while (i<SizeOf(TCharSet)-1) and (Data[i]=0) do
        Inc(i);
     r:=i*8;
     i:=Data[i];
     while (i and 1)=0 do begin
        i:=i shr 1;
        Inc(r)
     end;
     Result:=Chr(r)
  end
  else
     raise Exception.Create('Unable to extract min value from an empty set');
end; 
```

# ruby-on-rails - 像 User.find(:all).each 这样的代码有什么问题？

> ID：832204
> 
> 赞同：3
> 
> 时间：2009-05-06T22:56:30.573
> 
> 标签：ruby-on-rails, ruby

我刚刚在工作清单上阅读了这个要求：

> 意识到以下代码的缺陷：`User.find(:all).each`

我立刻就知道我不适合这份工作，因为在我的一生中，我不明白问题是什么。是吗...

*   设计相关？我应该将数据库请求存储在一个变量中，**然后**对其进行迭代吗？
*   危险的？
*   太罗嗦了？我应该`User.all.each`改用吗？（-1 个字！w00t！）
*   只是措辞不佳？是否应该以“用户表恰好有 300 万行”开头？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T23:08:00.797

我认为他们正在寻找的“陷阱”是当有人写 User.all.each 时，它通常看起来像这样：

```
User.all.each do |u|
    next if !u.is_active
    ...
end 
```

这意味着过滤是在 Ruby 中进行的，在从 DB 加载每个对象的全部内容之后，通过将所需属性表示为查询的一部分，过滤可以更有效地完成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-07T01:08:53.343

执行`User.all`将加载所有用户记录。如果您有 300 万条记录，它将加载所有 300 万个对象。这就是为什么这是一个坏主意。最好使用分页或条件等方法过滤您的 SQL，以返回“完成工作”所需的最小子集

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T23:03:50.337

> 是不是很啰嗦？您可以对 User.all.each 做同样的事情吗？（-1 个字！w00t！）

我们确实欣赏红宝石领域的简洁性。我，一方面，投票支持实施`Model.each`，既然你让我考虑它。

> 只是措辞不佳吗？是否应该以“用户表恰好有 300 万行”开头

我相信这是最合理的答案。您可能正在将大量记录加载到内存中。

我想说问题不在于 users 表*恰好*有 3m 条记录，而在于它可能会在合理的时间范围内拥有它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T09:06:25.670

这是一个陷阱，我不是以英语为母语的人，但我的理解是这不是一个直接的缺点，但它是你应该警惕的地面上的一个洞。这样做是未来的证明：

```
User.find_in_batches do |group|
  group.each do |user|
    user.do_something
  end
end 
```

即使您在一周内从 1 个用户增长到 1000 万。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-07T06:07:37.620

好吧，如果你想听起来很聪明，你的回答是：假设你想修改或显示每个用户对象的值，这个问题没有陷阱。:-)

# visual-studio-2008 - StyleCop 可以自动修复任何东西吗？

> ID：832209
> 
> 赞同：32
> 
> 时间：2009-05-06T23:00:42.077
> 
> 标签：visual-studio-2008, shortcut, stylecop

我决定开始在一个中型项目上运行 StyleCop，并且收到了 1000 多个警告。

有没有一种快速简便的方法来修复大多数这些警告？大多数警告可以很容易地自动解决，并且可以为我节省大量时间。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-13T13:47:57.067

**不，令人沮丧**。这就是 Style Cop 适得其反的原因。一致的格式看起来不错，但对生产力几乎没有好处（真正使代码难以阅读的是长度和[间接](http://zedshaw.com/essays/indirection_is_not_abstraction.html)性）。完美的间距不值得花费数小时手动调整线条。

当然，如果有一个*自动化*工具来实现一致的格式，我会在签入后将它连接起来，让它帮助我。但是 Style Cop 是由虐待狂制造的。大概他们的谈话是这样的：

> Bob：使用模式匹配，软件可以识别丑陋的代码
> Charlie：——并修复它！
> Bob：不，它会打印一条关于每一次违规的消息
> Charlie：——然后用户右键单击以修复它们？
> 鲍勃：不，它责备他们“逗号周围的空格无效”
> 查理：——然后解释如何解决它？
> Bob：不，那是在单独的文件中
> Charlie：——在 Google 上？
> 鲍勃：没有。

我讨厌时尚警察。它低于最低可行产品。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-09-25T09:23:03.617

现在你可以在你的项目中使用[StyleCop.Analyzers](https://www.nuget.org/packages/StyleCop.Analyzers) NuGet 包。

[![NuGet 包管理器可用 StyleCop.Analyzers 更新](https://i.stack.imgur.com/r9DXi.png)](https://i.stack.imgur.com/r9DXi.png)

更新包可能会导致很多新的警告。

[![“文档文本应以句点结尾”的 Visual Studio 错误列表警告](https://i.stack.imgur.com/nXNUj.png)](https://i.stack.imgur.com/nXNUj.png)

`Ctrl`+`.`显示可用的快速修复。可以一次将修复应用于整个**文档**、**项目**或**解决方案**。

[![Visual Studio 快速修复。 标记为“修复所有出现”选项](https://i.stack.imgur.com/X98qM.png)](https://i.stack.imgur.com/X98qM.png)

预览*更改*窗口允许您取消选择要手动解析的行。

[![窗口预览更改 - 修复所有事件](https://i.stack.imgur.com/ZxYF7.png)](https://i.stack.imgur.com/ZxYF7.png)

[CodeMaid](https://marketplace.visualstudio.com/items?itemName=SteveCadwallader.CodeMaid)是批量或自动修复格式错误的好工具。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-05-06T23:11:36.013

这并不完全是“自动修复任何东西”，但是[Github](https://github.com/StyleCop/StyleCop.ReSharper)上有一个用于 Resharper的[StyleCop 插件，](https://web.archive.org/web/20140124045330/http://consultingblogs.emc.com/howardvanrooijen/archive/2008/11/06/new-release-of-stylecop-for-resharper.aspx)它会自动突出显示代码中的样式错误。

***更新：**根据[StyleCop for ReSharper 网站](https://github.com/StyleCop/StyleCop.ReSharper)，ReSharper 现在为 StyleCop 错误提供了越来越多的[快速修复](http://www.jetbrains.com/resharper/features/code_analysis.html#Quick-Fixes)。您从列表中选择一个快速修复，问题将自动解决。*

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-01T12:21:36.927

[StyleCopFixer](http://visualstudiogallery.msdn.microsoft.com/ea197362-8fa1-44c8-8be2-e2b87d12be2a/?SRC=Home)自动修复**Visual Studio IDE** for **C# Only**中的 StyleCop 异常。

目前处理的错误有：

1.  SA1001
2.  SA1516
3.  SA1513
4.  SA1508
5.  SA1507
6.  SA1505
7.  SA1309
8.  SA1210
9.  SA1202
10.  SA1200
11.  SA1106
12.  SA1101
13.  SA1025
14.  SA1013
15.  SA1012
16.  SA1009
17.  SA1008
18.  SA1633
19.  SA1003
20.  SA1005
21.  SA1600（仅限物业）
22.  SA1121

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-11-05T15:16:52.173

codeplex 中有一个项目，它根据 stylecop 警告进行一些自动修复。然而它并不完整……

见：[http ://stylefix.codeplex.com/](http://stylefix.codeplex.com/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-12-23T02:44:12.167

[Code Maid](https://visualstudiogallery.msdn.microsoft.com/76293c4d-8c16-4f4a-aee6-21f83a571496)做了一些 Stylecop 修复。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-07T00:21:07.470

不幸的是，现在，我不知道有任何自动工具可以完全解决问题。

但是，如果您设置 Visual Studio 的格式选项（和 Resharper 的，如果有的话）以匹配样式警察指南，清理会变得更容易一些。

完成此操作后，您可以进入文件并执行 Edit->Advanced->Format Document（或键盘快捷键，这取决于您的快捷键设置 - 我的是 Ctrl+K、Ctrl+D）。这将修复相当多的风格警察警告，特别是如果你有 resharper + stylecop 插件。它不会解决所有问题，但在许多情况下，它会将文件中的警告数量从数百个减少到数十个。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-08T08:13:24.063

如果您有 Resharper，您可以下载 Resharper 的 StyleCop 插件，该插件具有一些自动修复功能。 [Codeplex 上 Resharper 的 StyleCop。](http://www.codeplex.com/StyleCopForReSharper)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-05-06T23:10:04.283

1.  关闭警告！不推荐，但您可以在短期内使用它，直到解决大部分问题。
2.  编写一个程序来修复一些更简单的警告，或者使用查找/替换
3.  使用代码片段来帮助处理文件头文档之类的事情

StyleCop[博客](http://blogs.msdn.com/sourceanalysis/archive/2008/05/24/future-plans.aspx)上提到了实现规则的自动修复

还可以查看博客上关于集成到现有大型项目的[条目。](http://blogs.msdn.com/sourceanalysis/archive/2008/11/11/introducing-stylecop-on-legacy-projects.aspx)

注意：StyleCop 似乎只返回 1000 条左右的警告，所以即使修复了一个堆，你也会继续得到这个数字。

# rest - 您如何处理 RESTful 上下文中的动态资源？

> ID：832213
> 
> 赞同：4
> 
> 时间：2009-05-06T23:02:14.973
> 
> 标签：rest

根据我对 REST 原则的理解，URL 应该代表单个资源，例如用户或产品。您如何处理随机或动态生成的资源？

假设我创建了一个名为 api.example.com/integer 的资源，它返回一个随机整数。我还会使用 GET 来检索整数吗？在这种情况下，POST、PUT 和 DELETE 意味着什么？

代表行为的 URL 呢？假设我创建了一个名为 api.example.com/add 的资源，它返回两个数字的总和。如果我想使用这个资源，我是使用 GET 还是 POST 来提交要添加的数字？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-06T23:58:43.357

不需要所有资源都支持所有动词。这就是 OPTIONS 动词用于找出支持的动词的用途。

我会说以下任何一个都是不言自明的

```
GET http://api.example.org/RandomInteger

POST http://api.example.org/RandomNumberMachine 
```

任何一个都可能是有效的。请注意 GET 请求可能会被缓存。如果是这样，那么您将不会得到随机结果。

REST 背后的主要原则之一是您建模的 url 代表名词，而不是动词。所以[http://api.example.com/add](http://api.example.com/add)不是一个理想的网址。

你可以做

```
GET http://api.example.org/Summation?Values=2,4 
```

或者

```
POST http://api.example.org/AddingMachine 
```

带有一些标准格式的实体主体，其中包含要添加的数字。

从表面上看，区分以“Add”结尾的 url 和以“summation”结尾的 url 似乎很迂腐。但是，这是一个非常简单的示例，REST 约束可以指导您进行具有某些分布式系统所需特性的设计。

许多年前，人们会争论两者之间的区别

```
apple.bite() 
```

和

```
bite(apple) 
```

不显着。我认为这些天不会有太多人会忽视这种区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T23:08:28.050

我认为 GET 适合随机数。您根本不允许对该资源进行 POST、PUT 或 DELETE。

总而言之，为什么不只是：

getSum?addends=3,5,8

回复是16。

POST[用于当](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)您希望“源服务器接受请求中包含的实体作为请求行中的请求 URI 标识的资源的新下级”时。

在这种情况下，服务器不需要永久接受/记住加数，所以 POST 是不合适的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-07T03:00:03.063

资源就是资源。它可以在其生命周期内改变、变异、颠倒或任何事情。在第一种情况下，您的资源不是随机数，而是随机数*生成器*。

正如 Darrel 所说，并非所有给定资源都支持所有 HTTP 的方法都是 RESTful。哎呀，我有一个 RESTful 系统，它有各种集合资源，允许 GET（获取集合）和 POST（同时将新资源附加到集合和可能的其他集合，然后指向新创建的其他资源），而其他资源支持 GET、PUT（用于更新）和 DELETE。RESTful 接口的关键在于它是*普遍适用*的——即，协议的方法可以以一般方式合理地应用于许多不同种类的资源——这是非常*普遍使用*的，这意味着所有资源都需要实现完整的接口。

HTTPs 方法具有明确定义的语义。如果它们的语义以理智的方式适用于您的资源，那么就实现它们。如果不是，请不要，或构建一个单独的资源。

在 HTTP 的上下文中，GET 是一种非常好的方法来执行类似于求和示例的操作。看看任何搜索引擎：它们都使用 GET 进行搜索，这完全是 RESTful。请注意，尽管您的浏览器没有关于如何构建代表您的搜索的资源的 URL 的带外信息，但是通过下载包含表单的页面，它会下载有关如何执行此操作的说明。这是 HATEOAS 和自我描述本质的一部分，当您了解更多时，您一定会偶然发现。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-07-20T22:14:30.567

只需使用某种 RPC。REST 并不适合所有用途。

# wpf - WPF：如何使控件在 StackPanel 中拉伸？

> ID：832216
> 
> 赞同：24
> 
> 时间：2009-05-06T23:02:59.903
> 
> 标签：wpf, slider, stackpanel, stretch

当放置在 StackPanel 中时，Slider 和其他一些控件不会拉伸以填充可用空间；相反，宽度始终为 MinWidth（如果未设置 MinWidth，则为大约 10 个像素）。如何让它伸展（相当于 WinForms 中的 Anchor.Left|Anchor.Right）？例子：

```
<StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal">
    <Slider Value="14" SmallChange="0.5" Maximum="100" Minimum="4" 
            x:Name="FontSize" MinWidth="30" LargeChange="2" 
            TickFrequency="10" TickPlacement="TopLeft" 
            HorizontalAlignment="Stretch"/>
    <TextBlock Margin="8" Text="{Binding ElementName=FontSize, Path=Value}" 
               VerticalAlignment="Center"/>
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-05-06T23:21:37.860

你想要 DockPanel 代替：

```
<DockPanel DockPanel.Dock="Bottom" LastChildFill="True">
    <TextBlock DockPanel.Dock="Right" ... />
    <Slider ... />
</DockPanel> 
```

DockPanel 为您提供所需的“锚”功能。StackPanel 只是将事物彼此相邻堆叠。

我从您的代码块中注意到您的 StackPanel 已经停靠在停靠面板中，因此我在上面的代码示例中包含了相同的停靠属性。

# visual-studio-2008 - 我可以以编程方式调整视觉工作室“抛出异常时中断”选项吗？

> ID：832217
> 
> 赞同：20
> 
> 时间：2009-05-06T23:03:33.817
> 
> 标签：visual-studio-2008, exception, debugging

**简要地：**

在 Visual Studio 2008 中，`Debug`菜单有一个`Exceptions...`选项。
单击此按钮时，它会弹出“抛出异常时中断”对话框，其中我勾选了“公共语言运行时异常”旁边的框。

我希望能够以编程方式勾选/取消勾选此框。

**阐述：**

这会导致调试器在任何 CLR 异常被抛出时中断（而不是在它被捕获并重新抛出时），因此这对于故障排除非常有用。

问题是，它捕获了所有 CLR 异常，而 .NET 框架恰好在内部抛出并捕获了一堆异常，这些异常也被捕获了。这会导致调试器中断一堆我真的不关心的异常，因为它们是框架内部的，不是问题。
WCF 在这方面*特别*糟糕，而且幸运的是，我的应用程序到处都在使用 WCF。

我想做的是关闭复选框，一旦我的应用程序启动（并通过了 WCF 连接阶段和所有内部异常），然后打开它，*从现在开始中断所有异常上*。

*   我知道我不必对“所有 clr 异常”一无所知，但是可能的异常列表大约有 2 英里长，并且需要永远滚动并选择你想要的那些（如果我错过了怎么办一些）。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-22T06:38:11.117

您可以通过 Visual Studio 的自动化 API（称为 DTE）打开/关闭它们。看看 Debugger3.ExceptionGroups API。例如：

```
' Turn off NullArgumentException.
Dim debugger As Debugger3 = DTE.Debugger
Dim exceptionGroup As ExceptionSettings = dbg.ExceptionGroups.Item("Common Language Runtime Exceptions")
exceptionGroup.SetBreakWhenThrown(False, "System.NullArgumentException") 
```

所以你可以很容易地编写一个宏来打开/关闭特定的异常。要从您的应用程序调用宏，您可以启动“devenv /command”。

或者，您可以使用进程外的 DTE 并直接自动化 Visual Studio（不涉及宏）。

更多信息：

1.  [在 VS 调试器中自定义异常处理](http://www.wintellect.com/blogs/jrobbins/customizing-exception-handling-in-the-vs-debugger)
2.  [Debugger3.ExceptionGroups](http://msdn.microsoft.com/en-us/library/envdte90.debugger3.exceptiongroups.aspx)
3.  [开发环境/命令](http://msdn.microsoft.com/en-us/library/19sf6kk3%28v=vs.110%29.aspx)
4.  [如何：获取对 DTE 和 DTE2 对象的引用](http://msdn.microsoft.com/en-us/library/68shb4dw%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-02-19T19:10:38.230

这并不能直接解决您的问题，但是有一个方便的和弦 ctrl-D + E 可以调出调试异常对话框。Ctrl+Alt+E 会做同样的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-07T00:08:04.300

在我的脑海中（所以这可能是胡说八道），您可以将调试器设置为仅在未处理的 CLR 异常上中断，然后在初始化代码期间为所有异常创建处理程序委托/事件并吞下 CLR （好的，好的，仅在调试模式下），然后在您希望 VS 开始中断 CLR 异常的代码点删除委托/事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T06:45:06.550

您可以通过创建一个宏来做到这一点（如[Michael Lehenbauer](https://stackoverflow.com/questions/832217/can-i-adjust-the-visual-studio-break-when-an-exception-is-thrown-options-programa/896615#896615)的示例所示），然后重新配置断点以运行宏并继续执行。您可以在您关心的代码部分的末尾再次禁用该选项，或者在调试会话之间手动禁用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T23:44:50.037

当然，您可以使用[Visual Studio 加载项](http://msdn.microsoft.com/en-us/vsx/default.aspx)或[宏](http://msdn.microsoft.com/en-us/library/8h31zbch.aspx)来做到这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-25T03:30:39.713

还有

if ( Debugger.IsAttached ) { Debugger.Break() }

# database - DataContext.CreateDatabase 属性编译错误

> ID：832218
> 
> 赞同：0
> 
> 时间：2009-05-06T23:03:49.917
> 
> 标签：database, linq

我查看了这个示例[http://msdn.microsoft.com/en-us/library/bb399420.aspx](http://msdn.microsoft.com/en-us/library/bb399420.aspx) 并点击了 DataContext.CreateDatabase 这将我带到了这个页面[http://msdn.microsoft.com/en-us/库/system.data.linq.datacontext.createdatabase.aspx](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.createdatabase.aspx)

它说使用 System.Data.Linq 命名空间并包含参考 System.Data.Linq。

我已经这样做了并接收了错误

```
error CS0246: The type or namespace name 'Column' could not be found (are you missing a using directive or an assembly reference?)

[Table(Name = "DVDTable")]
public class DVD
{
    [Column(IsPrimaryKey = true)] //<-- here
    public string Title;
    [Column]
    public string Rating;
} 
```

如何修复此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T23:07:16.070

`ColumnAttribute`位于`System.Data.Linq.Mapping`命名空间中。

# git - 为什么在这个 git push 中 git 会推送到两个分支？

> ID：832222
> 
> 赞同：18
> 
> 时间：2009-05-06T23:04:15.453
> 
> 标签：git, version-control

什么可能导致“git push”尝试提交到两个分支？我有我自己的分支，我正在处理，它位于共享存储库中......和一个主分支。现在我只想推送到我的个人分支，它通过就好了，但它也试图推送到 master 并被拒绝。看起来像这样：

```
foo$ git push
Counting objects: 38, done.
Delta compression using 2 threads.
Compressing objects: 100% (19/19), done.
Writing objects: 100% (21/21), 9.73 KiB, done.
Total 21 (delta 14), reused 0 (delta 0)
To ssh://example.com/project.git
   8184634..86b621e  mybranch -> mybranch
 ! [rejected]        master -> master (non-fast forward)
error: failed to push some refs to 'ssh://example.com/project.git' 
```

我的配置如下所示：

```
remote.origin.url=ssh://example.com/project.git
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
branch.master.remote=origin
branch.master.merge=refs/heads/master
branch.mybranch.remote=origin
branch.mybranch.merge=refs/heads/mybranch 
```

Esko 指出，它正在推动两者，因为它们在我的配置中。如果我想同时推动两者，而不是同时推动呢？当我签出 mybranch 并 git push 时，我显然是要推送 mybranch 而不是 master。有时我会检查 master，编辑代码，并想提交/推送。有没有办法让两者共存？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-06T23:07:00.190

不带任何参数使用时`git push`，它将推送所有具有相同名称的对应远程分支的本地分支。由于您的本地存储库具有分支`master`和`mybranch`，并且远程存储库具有分支`master`和`mybranch`，因此 Git 将推送它们。

如果你只想推送一个分支，你可以明确告诉 Git 你想要推送哪个分支：`git push origin mybranch`

如果你想推送 master，你可以通过先从 master 拉取来修复该错误。Git 抱怨合并不是快进的，因为自从你上次从 master 中拉出后，其他人已经将提交推送到 master。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-07T14:45:04.270

如果您只想推送当前分支，您可以使用“git push origin HEAD”，甚至可能使用“git push HEAD”（使用现代 git）。

***如果没有用于push****的 refspec（您在配置中为fetch*定义了 refspec ，但没有为*push*定义） ，则默认行为是推送**匹配**的refs。从[git-push(1)](http://www.kernel.org/pub/software/scm/git/docs/git-push.html "git-push(1) 手册页")：

> git push [...] [ *<repository>* *<refspec>* ...]
> 
> *<参考规范>* ...
> 
> > 特殊的 refspec : （或 +: 允许非快进更新）指示 git 推送“匹配”分支：对于本地端存在的每个分支，如果同名分支已经存在，则更新远程端远方。如果没有找到显式的**refspec**（既不在命令行也不...

# visual-studio-2008 - 视觉工作室 2008 SP1：

> ID：832227
> 
> 赞同：0
> 
> 时间：2009-05-06T23:05:17.340
> 
> 标签：visual-studio-2008

这里的“X”是实现 ICollection 的第 3 方组件，“Y”是 Count。它会编译，暂时删除波浪线，并且在不久之后（1-2 秒）或在文本编辑器中进行任何编辑后，在计数下显示红色波浪线。？！任何帮助将不胜感激，谢谢。

编辑：例如，

```
ThirdPartyComponent instanceOfComponent = new instanceOfComponent();
instanceOfComponent.GetResults();

for(int i = 0; i < instanceOfComponent.Results.Count; ++i) {
    // Some stuff happens
} 
```

这里的 'Count' 是波浪形的，即使它编译得很好——甚至出现在 Intellisense 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T07:11:25.360

从您上面的评论来看，VS 似乎在抱怨 and 之间的`Results.Count`歧义`Results.Count()`。它会编译得很好，但它会警告你这个可能的错误。强制转换`ICollection`将明确告诉编译器使用哪一个：

```
for(int i = 0; i < ((ICollection)instanceOfComponent.Results).Count; ++i) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T07:04:39.590

我不确定您使用的是什么语言，但这里有两个可能的问题：

1.  Count 可以是一个函数而不是一个属性。

2.  更有可能的 Results 实际上是一个返回基于 List<> 的类的属性，因此您调用的是此 Results 对象的 Count 属性，而不是 instanceOfComponent。一个简单的演员应该解决它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-06T23:10:27.263

您需要添加：

```
using system.linq; 
```

# .net - WSE 3 中的 Request.Security.Tokens 和 Request.Security.Elements 有什么区别？

> ID：832237
> 
> 赞同：2
> 
> 时间：2009-05-06T23:08:49.357
> 
> 标签：.net, security, wse

所以我试图让 WSE 2.0 SP3 客户端与 WSE 3.0 服务器一起工作。我在客户端上遇到了这行代码的问题：

```
transaction.RequestSoapContext.Security.Elements.Add(new MessageSignature(token)); 
```

如果客户端已经在使用以下代码行，我想知道这一行有多重要：

```
transaction.RequestSoapContext.Security.Tokens.Add(token); 
```

有谁知道第一行代码比第二行有什么好处？

# asp.net - 在用户控件中嵌套内容

> ID：832246
> 
> 赞同：1
> 
> 时间：2009-05-06T23:11:29.163
> 
> 标签：asp.net, user-controls

好的，所以这对于 sombody 来说可能是一个软音调问题，但我希望能够将一些内容贬低到这样的控件中：

```
<uc1:floatingControl id="myFloatingControl" runat="server">
  <floatingContent>
     Hello world<br />
     <asp:button id="arbitraryASPControl" runat="server" />
     <uc2:arbiratryUserControl id="foo" runat="server" />
   </floatingContent>
</uc1:floatingControl> 
```

那么获得这种功能需要什么。

从我的角度来看，对浮动内容标签也没有真正的要求，但我意识到这可能是一个必要的约定。

如果有人知道一篇关于它的好文章，那将非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T23:15:08.343

从来不需要这样做，但我相信这都是关于 ParseChildren 的。

[http://msdn.microsoft.com/en-us/library/system.web.ui.parsechildrenattribute.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.parsechildrenattribute.aspx)

您可以将内部标记视为类的属性，然后像往常一样操作它们。

# bash - 使用现有 Linux 工具的最小“任务队列”来利用多核 CPU

> ID：832253
> 
> 赞同：7
> 
> 时间：2009-05-06T23:14:57.487
> 
> 标签：bash, queue, parallel-processing

使用 bash 和常用工具为 Linux 构建最小任务队列系统的最佳/最简单方法是什么？

我有一个包含 9'000 行的文件，每一行都有一个 bash 命令行，这些命令是完全独立的。

```
command 1 > Logs/1.log
command 2 > Logs/2.log
command 3 > Logs/3.log
... 
```

我的盒子有多个核心，我想同时执行 X 个任务。我在网上搜索了一个很好的方法来做到这一点。显然，很多人都有这个问题，但到目前为止还没有一个好的解决方案。

如果该解决方案具有以下功能，那就太好了：

*   可以解释多个命令（例如`command; command`）
*   可以解释行上的流重定向（例如`ls > /tmp/ls.txt`）
*   只使用常用的 Linux 工具

如果它适用于其他没有太奇特要求的 Unix 克隆，则可以加分。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-06T23:23:38.777

您可以将命令列表转换为 Makefile 吗？如果是这样，您可以运行“make -j X”。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2010-06-10T20:09:18.417

GNU Parallel [http://www.gnu.org/software/parallel/](http://www.gnu.org/software/parallel/)是一个比 PPSS 更通用的并行化工具。

如果运行文件包含：

```
command 1 > Logs/1.log
command 2 > Logs/2.log
command 3 > Logs/3.log 
```

你可以做：

```
cat runfile | parallel -j+0 
```

这将为每个 CPU 内核运行一个命令。

如果你的命令和上面一样简单，你甚至不需要运行文件，但可以：

```
seq 1 3 | parallel -j+0 'command {} > Logs/{}.log' 
```

如果您有更多计算机可用于进行处理，您可能需要查看 GNU Parallel 的 --sshlogin 和 --trc 选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T23:17:48.667

好的，在这里发布问题后，我发现了以下看起来很有希望的项目：[ppss](http://code.google.com/p/ppss/)。

编辑：不是我想要的，PPSS 专注于处理“目录 A 中的所有文件”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T23:45:53.467

好吧，无论如何，这是一个有趣的问题。

这就是我要做的，当然假设是*bash(1)*。

*   弄清楚这些命令中有多少可以同时有效地运行。这不仅仅是核心的数量。许多命令将因 I/O 之类的事情而暂停。`N=15`例如，拨打那个号码 N。
*   为 SIGCHLD 信号设置一个陷阱信号处理程序，该信号在子进程终止时发生。`trap signalHandler SIGCHLD`
*   将您的命令列表放入管道中
*   编写一个循环，读取标准输入并一一执行命令，递减一个计数器。当计数器为 0 时，它`wait`是 s。
*   在 SIGCHLD 上运行的信号处理程序会*增加*该计数器。

所以现在，它运行第一个`N`命令，然后等待。当第一个孩子终止时，等待返回，它读取另一行，运行一个新命令，然后再次等待。

现在，这是一个处理许多紧密终止的工作的案例。我*怀疑*您可以使用更简单的版本：

```
 N=15
 COUNT=N
 cat mycommands.sh | 
 while read cmd 
 do
   eval $cmd &
   if $((count-- == 0))
   then
       wait
   fi
 od 
```

现在，这个命令将启动前 15 个命令，然后在某个命令终止时一次运行其余命令。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-07T08:57:14.233

类似的分布式计算乐趣是 Mapreduce Bash 脚本：

[http://blog.last.fm/2009/04/06/mapreduce-bash-script](http://blog.last.fm/2009/04/06/mapreduce-bash-script)

并感谢您指出 ppss！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-09T08:25:30.650

您可以使用**xargs**命令，它的**--max-procs 可以满足**您的需求。例如 Charlie Martin 解决方案变成了 xargs：

```
tr '\012' '\000' <mycommands.sh |xargs --null --max-procs=$X bash -c 
```

细节：

*   X 是最大进程数。例如：X=15。--max-procs 正在发挥作用
*   第一个 tr 在这里以 xargs --null 选项的空字节终止行，以便引号重定向等不会被错误地扩展
*   bash -c 运行命令

例如，我用这个 mycommands.sh 文件对其进行了测试：

```
date
date "+%Y-%m-%d" >"The Date".txt
wc -c <'The Date'.txt >'The Count'.txt 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-09-07T08:41:15.420

这是一种特殊情况，但是如果您尝试处理一组文件并生成另一组输出文件，则可以启动#cores number of processes，并在处理之前检查输出文件是否存在。下面的示例将 .m4b 文件的目录转换为 .mp3 文件：

只要你有核心运行这个命令的次数：

ls *m4b|同时读取 f; 做测试 -f ${f%m4b}mp3 || mencoder -of rawaudio "$f" -oac mp3lame -ovc 复制 -o ${f%m4b}mp3; 完毕 ＆

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-04T01:08:36.727

你可以看到我写在 bash 上的任务队列：[https ://github.com/pavelpat/yastq](https://github.com/pavelpat/yastq)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-22T20:38:17.807

任务队列+并行化+动态添加

该脚本使用 FIFO 分叉自身来处理队列。这样，您可以动态地将命令添加到队列中（当队列已经启动时）。

用法：./queue 命令 [# of children] [队列名称]

例如，有 1 个线程：

```
./queue “睡眠 5；回显一”
./queue “回声二”

```

输出：

```
一
二

```

例如，有 2 个线程：

```
./queue “睡眠 5；回显一” 2
./queue “回声二”

```

输出：

```
二
一

```

例如，有 2 个队列：

```
./queue "睡眠 5；回显 ONE queue1" 1 queue1
./queue "睡眠 3；回显 ONE queue2" 1 queue2

```

输出：

```
一个队列2
一个队列1

```

脚本（将其保存为“队列”和 chmod +x 队列）：

```
#!/bin/bash

#Print usage
[[ $# -eq 0 ]] && echo Usage: $0 Command [# of children] [Queue name] && exit

#Param 1 - Command to execute
COMMAND="$1"

#Param 2 - Number of childs in parallel
MAXCHILD=1
[[ $# -gt 1 ]] && MAXCHILD="$2"

#Param 3 - File to be used as FIFO
FIFO="/tmp/defaultqueue"
[[ $# -gt 2 ]] && FIFO="$3"

#Number of seconds to keep the runner active when unused
TIMEOUT=5

runner(){
  #Associate file descriptor 3 to the FIFO
  exec 3<>"$FIFO"

  while read -u 3 -t $TIMEOUT line; do
    #max child check
    while [ `jobs | grep Running | wc -l` -ge "$MAXCHILD" ]; do
      sleep 1
    done

    #exec in backgroud
    (eval "$line")&
  done
  rm $FIFO
}

writer(){
  #fork if the runner is not running
  lsof $FIFO >/dev/null || ($0 "QueueRunner" "$MAXCHILD" "$FIFO" &)

  #send the command to the runner
  echo "$COMMAND" > $FIFO
}

#Create the FIFO file
[[ -e "$FIFO" ]] || mkfifo "$FIFO"

#Start the runner if in the runner fork, else put the command in the queue
[[ "$COMMAND" == "QueueRunner" ]] && runner || writer 
```

# javascript - Javascript多重替换

> ID：832257
> 
> 赞同：65
> 
> 时间：2009-05-06T23:16:34.970
> 
> 标签：javascript, regex, string, replace

你如何在javascript中用另一个字符串替换一个字符串的所有实例？例子：

```
someString = 'the cat looks like a cat'
anotherString = someString.replace('cat', 'dog'); 
```

导致 anotherString 被设置为“**狗**看起来像**猫**”，我希望它是“**狗**看起来像**狗**”

# asp.net - IIS 重新编译 ASP NET 网站

> ID：832258
> 
> 赞同：3
> 
> 时间：2009-05-06T23:17:29.790
> 
> 标签：asp.net, iis, compiler-construction, web

我正在和一位朋友谈论当您将新文件放入虚拟目录时 IIS 会做什么。

他告诉我，当您将文件放在网站的任何位置时，IIS 会重新编译整个网站，我认为当您将文件放在 Bins 文件夹中时，它只会发生（如果发生）。

谈话是因为公司的一个网站用于上传文件，但文件保存在我们网站的一个名为“Letters”的文件夹中，我的朋友说每次有人上传文件时IIS都会重新编译整个网站。他是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T23:21:05.833

它仅在您添加需要编译的代码时重新编译。即向 App_Code 添加新类。当您简单地将图像或文本文件保存到网站时，它不会重新编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T23:30:24.627

很容易测试。开始在 Web 服务器上观看 JIT 编译计数器...浏览器，然后将文件放入其中以查看计数器显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T23:29:53.643

我认为 ASP.NET 只有在 bin 程序集、App_Code 或 global.asax 发生更改时才会重新启动并重新编译整个站点。

有关优化 ASP.NET 编译行为的新标志的详细信息，请参阅[此博客文章](http://blogs.msdn.com/davidebb/archive/2009/04/15/a-new-flag-to-optimize-asp-net-compilation-behavior.aspx)。

将文件添加到虚拟目录中的文件夹不应导致重新编译（除非文件夹是“bin”或“app_code”！）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T23:30:05.423

machine.config numRecompilesBeforeApprestart 中有一个设置，它指示在应用程序重新启动之前可以发生的文件更改次数。默认值为 15。

在非生产环境中，我通常将此设置得更高，以便您可以即时修改 aspx 页面而不会导致整个应用程序重新启动。

这可能是你朋友所说的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-14T17:45:51.320

回收应用程序池。在 powershell 中：

```
$AppPoolName = 'NameOfApp'

$AppPool = Get-ChildItem iis:\apppools | where { $_.Name -eq $AppPoolName}

Restart-WebAppPool $AppPool 
```

这将强制代码重新编译。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T23:21:47.970

绝对取决于您的版本，因为： 还有一个新的修补程序可以让您优化编译，从而减少 IIS 重新编译的频率，但我不确定具体时间。

我认为过去如果您不导航到新标记（而是导航到另一个标记文件），新标记将不会触发重新编译，并且 bin/dll/assembly 文件将始终触发。

# ruby-on-rails - 在 Rails 中处理多个文件上传的最佳插件是什么？

> ID：832261
> 
> 赞同：4
> 
> 时间：2009-05-06T23:18:42.173
> 
> 标签：ruby-on-rails, ruby, upload

假设我有一个名为 Recipe 的模型。每个食谱都有几张照片、一个 PDF 文件和一个视频。有没有一个插件可以让我拥有像 Recipe.photos、Recipe.photos.first.filename、Recipe.pdf.filename、Recipe.video.filesize 等简单的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-07T00:19:56.207

不确定这是否有帮助，但请查看**[Paperclip](http://www.thoughtbot.com/projects/paperclip)**，一个 Rails + ActiveRecord 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T06:03:19.830

Paperclip 应该可以处理多个文件，尽管我已经尝试过它的这方面。[使用 Rails 和 Paperclip 上传多张图片](http://infrastacks.com/?p=57)似乎可以解释如何做到这一点......还有......[用回形针上传多张图片](http://scottmotte.com/archives/143.html)......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T02:45:34.377

回形针是要使用的附件工具。至于多次上传，那就更狡猾了。您要么需要使用 SWFUpload（名称？）Flash 前端进行多次上传，要么需要滚动您自己的系统。

在一个项目中，我有一个关于照片的应用程序，所以我编写了一个上传器/解压缩器，您可以将照片的 zip 文件上传到其中，系统会将它们解压缩并将它们插入系统以供管理员用户使用。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T03:13:32.250

我正在使用restful_authentication + attachment_fu + SWFUpload，它可以很好地处理多个附件IMO。

这是您的快速入门指南：http: [//github.com/davidsouth/rails-swfupload/tree/master](http://github.com/davidsouth/rails-swfupload/tree/master)

# iphone - 重新初始化视图控制器 - iPhone

> ID：832280
> 
> 赞同：1
> 
> 时间：2009-05-06T23:25:36.510
> 
> 标签：iphone, cocoa-touch, memory-management, uiviewcontroller

我有一个带有单独 UIViewControllers 和 xibs 的多视图应用程序。我有一个视图是游戏视图，每次我调用它时我都希望它重新初始化，我的意思是在它的初始条件下重新启动，而不是在我上次离开它的状态。

这是我用来加载和删除视图的代码块：

```
-(void)loadStartViewController {
[currentView.view removeFromSuperview];
StartViewController *startViewController = [[StartViewController alloc] initWithNibName:@"StartView" bundle:nil];
[window addSubview:startViewController.view];
currentView = startViewController; 
```

}

我应该在这里更清楚。在玩游戏时，我有一个 UIViewController 和一个 xib 组成视图。他们调用 UIView 中的方法以编程方式绘制视图。游戏结束时我离开 UIViewController 并进入得分屏幕。我想让用户重新启动并重新进入游戏，IE 用上面的代码加载 UIViewController 但从一个新游戏开始，所有设置都在调用的方法中。我可以设置一个变量并在 UIViewControllers 之间传递它，但我可能有一个命令可以让我重置游戏 UIViewController 所以它不记得任何关于上一场比赛结束时的状态。

为了让它工作，我编写了一个方法来重置 UIView 中绘制游戏屏幕的所有变量，并从 viewDidLoad 部分的 UIViewController 调用该方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T23:48:23.070

我假设您的视图正在显示存储在模型（游戏状态）中的一些数据。那么你不想重置游戏状态并让视图显示它吗？当手机内存不足时需要显示或释放视图时，系统会管理（加载/释放/重新加载）视图。因此，如果您单独处理游戏状态，您应该更新游戏状态（模型）并让视图显示它。

你是什​​么意思我的“调用视图”？您的意思是当您从“菜单”转到“游戏屏幕”时？

也许在显示视图后重新加载游戏状态会有所帮助。有一些像**viewDidLoad**这样的委托，但我的理解是在加载视图后调用它们。但是，如果您的内存不足，您的视图可能会被释放并稍后重新加载，所以我想您应该在模型对象中自己管理游戏“状态”并让视图显示它。

不知道这是否有帮助，我不太确定你的意思是我的“调用视图”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T07:01:57.847

与其跟踪当前显示的视图，不如使用 UINavigationController。这就是他们的目的。在您的应用委托中的 applicationDidFinishLaunching 中：

```
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:startViewController]; 
```

在 startViewController 中创建一个实例变量，并在创建后将其传递给导航控制器的指针。然后当你想去游戏时：

```
[self.navigationController pushViewController:gameViewController animated:YES]; 
```

或者没有动画，无论如何。您可能还想隐藏导航栏：

```
[self.navigationController setNavigationBarHidden:YES animated:NO]; 
```

游戏结束后，您可以继续推送您想要的任何视图，并且您可以随时返回第一个视图：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

哦，至于每次玩都重新初始化游戏，只需执行

```
-(void)viewWillAppear:(BOOL)animated{} 
```

在游戏视图控制器中并执行您想要的任何初始化。虽然老实说我不是 100% 确定你应该将它与 .xib 一起使用...我很少使用 Interface Builder 所以我不确定。但我认为它会起作用。

# perl - 如何在蛋白质序列（字符串）中找到多个基序（子字符串）？

> ID：832282
> 
> 赞同：6
> 
> 时间：2009-05-06T23:26:06.570
> 
> 标签：perl, bioinformatics

以下脚本用于查找蛋白质序列中的一个基序。

```
use strict;
use warnings;

my @file_data=();
my $protein_seq='';
my $h= '[VLIM]';   
my $s= '[AG]';
my $x= '[ARNDCEQGHILKMFPSTWYV]';
my $regexp = "($h){4}D($x){4}D"; #motif to be searched is hhhhDxxxxD
my @locations=();

@file_data= get_file_data("seq.txt");

$protein_seq= extract_sequence(@file_data); 

#searching for a motif hhhhDxxxxD in each protein sequence in the give file

foreach my $line(@file_data){
    if ($motif=~ /$regexp/){
        print "found motif \n\n";
      } else {
        print "not found \n\n";
    }
}
#recording the location/position of motif to be outputed

@locations= match_position($regexp,$seq);
if (@locations){ 
    print "Searching for motifs $regexp \n";
    print "Catalytic site is at location:\n";
  } else {
    print "motif not found \n\n";
}
exit;

sub get_file_data{
    my ($filename)=@_;
    use strict;
    use warnings;
    my $sequence='';

    foreach my $line(@fasta_file_data){
        if ($line=~ /^\s*(#.*)?|^>/{
            next;
          } 
        else {
            $sequence.=$line;
        }
    }
    $sequence=~ s/\s//g;
    return $sequence;
}

sub(match_positions) {
    my ($regexp, $sequence)=@_;
    use strict;
    my @position=();
    while ($sequence=~ /$regexp/ig){
        push (@position, $-[0]);
    }
    return @position;
} 
```

我不确定如何扩展它以在包含蛋白质序列的给定文件中查找多个基序（以固定顺序，即motif1、motif2、motif3）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T23:30:33.550

您可以简单地使用序列的交替（由 分隔`|`）。这样，正则表达式引擎可以匹配的每个序列都会匹配。

```
/($h{4}D$x{4}D|$x{1,4}A{1,2}$s{2})/ 
```

然后你可以通过查看来测试这个匹配`$1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T00:09:11.960

如果您想以特定顺序查找这些主题，但可能有些分开，您可以使用类似的东西：

```
/$h{4}D$x{4}D .* $s{4}D$q{4}/x 
```

（/x 允许在正则表达式中使用空格，.* 匹配零个或多个字符）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T00:51:02.153

你只是在寻找子字符串吗？如果是这种情况，几个正则表达式可能会让你到达你需要去的地方。但这类问题往往会迅速升级，最有可能出现在下周的问题集中。如果是后者，并且您需要进行比较，您可能需要开始研究动态对齐算法、最小编辑距离、维特比对齐、hmms 等。

此外，如果您正在处理大型输入文件，您可能会考虑预编译您的正则表达式以获得良好的速度提升，

[perl 预编译的正则表达式](http://perldoc.perl.org/perlfaq6.html#How-do-I-efficiently-match-many-regular-expressions-at-once%3f)

# c++ - 使用 QTimeline 制作动画

> ID：832284
> 
> 赞同：2
> 
> 时间：2009-05-06T23:26:31.093
> 
> 标签：c++, qt, animation

我正在使用 QGraphics 对象来显示它们之间带有箭头的框。我想要那些从一端开始并到达另一端的箭头/线条上的动画。

当箭头的开始和结束位置在 QTimeLine 执行期间没有改变时，动画效果很好，即我让视图保持静态。但是由于用户可以拖动框（因此我重新绘制要跟随的箭头），我需要重置 QGraphicsItemAnimation 内的开始和结束位置，以便动画与新的箭头线匹配。

我试图在 Arrow 对象的 paint 方法中更新开始和结束位置，但这只会让动画变得疯狂（它在整个地方随机翻转）。我认为这是因为我在 QTimeLine 对象处于 RUNNING 状态时更改了动画位置。

```
void Arrow::paint(QPainter *painter, const QStyleOptionGraphicsItem *, QWidget *)
{
   ...
    ///update the arrow to have a new source and destination, draw arrow, etc
   ...

    if (mAnimate)
    {
        mAnimationObj->setPosAt(0, mSourcePoint);
        mAnimationObj->setPosAt(1, mDestPoint);   
    }
} 
```

我应该如何动态更改 QGraphicsItemAnimation 的开始和结束位置（0 和 1）？

对于最终产品，我希望用户能够拖动框，让箭头跟随（目前有效）以及让动画沿着新的箭头路线继续。

如果那是不可能的，那么我需要想出一些方法来捕捉拖动并停止箭头动画，直到用户释放然后我猜重置它......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T08:40:00.910

我猜你只需要制作一个通用动画，即使用 QTimeLine 在 0.0 和 1.0 之间制作动画。从它的[currentValue](http://doc.trolltech.com/4.45/qtimeline.html#currentValue)中， （自己）进行[插值](http://en.wikipedia.org/wiki/Tweening)以找出需要放置动画对象的位置。例如，对于 0.5 的值，对象应位于开始位置和结束位置之间的中间位置。

请注意，如果开始位置和结束位置之间的距离不断变化，则此补间技巧不起作用。您可能会导致动画对象在动画中间反弹和向前反弹。做到这一点的一个技巧是保持动画对象位置和开始位置之间的距离，然后如果当前时间的插值距离小于前一个距离，则不要推回对象。移动起点和终点之间的中间有更复杂的技术，但我不会在这里详细说明，除非有必要。

# c++ - 如何在 C++ 中检索外部主机的 MAC 地址

> ID：832295
> 
> 赞同：4
> 
> 时间：2009-05-06T23:31:54.873
> 
> 标签：c++, network-programming, mac-address, arp

目前我们正在解析命令行的 arp 请求输出。

```
string cmd = "arp -n ";
cmd.append(ipaddress);
cmd.append(" | grep ");
cmd.append(ipaddress);
fgets( line, 130, fp);
fgets( line, 130, fp);
ret.append(line);
 ... 
```

它可以工作，但是有没有办法使用一个不太依赖本机命令行界面的库函数来做到这一点？该项目目前正在使用 libpcap。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T23:39:41.343

通常，这取决于您的操作系统。对此没有真正的标准 API。

假设你在 linux 上，打开并解析 /proc/net/arp. 格式类似于 arp 命令的输出。请注意，您必须最近至少向相关 IP 发送一次数据包才能将其放入 ARP 表中，当然您不会在本地网段之外获得任何信息。

将一个 IP 放入这个缓存很容易——例如，只需在某个未使用的端口上向它发送一个 UDP 数据包——然后轮询直到它出现。

另一种选择是使用原始套接字来制作和发送您自己的 arp 数据包，但这要复杂得多:) 如果您确实想走这条路，请研究[arping](http://www.habets.pp.se/synscan/programs.php?prog=arping)的源代码（今天页面已关闭，但[git repo](http://cvs.habets.pp.se/~marvin/git/arping.git/)在线），这也可能通过使用 libpcap 等平台无关的库（但需要 root）为您提供更多的可移植性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T00:09:12.240

我有点担心

> 检索外部主机的 MAC 地址

你问题的一部分。

我希望您知道您只能在同一网络上的机器的 ARP 表中获得条目。如果您通过路由器连接到机器，那么您将只能在 ARP 表中看到路由器的 MAC 地址。因此，除非它是同一网络上的主机（不涉及路由器），否则无法知道*外部主机的 MAC 地址。*

所以答案是通过路由器访问的主机是不可能的，如果主机可以在本地网络上访问，您只能使用特定于平台的访问方法，因为即使是 arp 命令的输出也可能因平台而异。

# c - 在 OpenSolaris 2008.11 上使用 gcc 编译时出现未解析的符号

> ID：832296
> 
> 赞同：3
> 
> 时间：2009-05-06T23:32:51.377
> 
> 标签：c, sockets, gcc, netbeans, solaris

在编译一个使用套接字的简单 Netbeans C 项目时，我得到以下输出。我想问题是 gcc 没有正确链接 sockets.h 库。需要一个万无一失的方法来解决这个问题。

```
Running "/usr/bin/make  -f Makefile CONF=Debug clean" in /export/home/manu/Escritorio/TP-entrega 2/Application_1

/usr/bin/make -f nbproject/Makefile-Debug.mk SUBPROJECTS= .clean-conf
rm -f -r build/Debug
rm -f dist/Debug/GNU-Solaris-x86/application_1

Clean successful. Exit value 0.

Running "/usr/bin/make  -f Makefile CONF=Debug" in /export/home/manu/Escritorio/TP-entrega 2/Application_1

/usr/bin/make -f nbproject/Makefile-Debug.mk SUBPROJECTS= .build-conf
/usr/bin/make  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Solaris-x86/application_1
mkdir -p build/Debug/GNU-Solaris-x86
rm -f build/Debug/GNU-Solaris-x86/tp2.o.d
gcc   -c -g -MMD -MP -MF build/Debug/GNU-Solaris-x86/tp2.o.d -o build/Debug/GNU-Solaris-x86/tp2.o tp2.c
mkdir -p dist/Debug/GNU-Solaris-x86
gcc    -o dist/Debug/GNU-Solaris-x86/application_1 build/Debug/GNU-Solaris-x86/tp2.o 

Undefined                        first referenced
 symbol                              in file

bind                                build/Debug/GNU-Solaris-x86/tp2.o

recv                                build/Debug/GNU-Solaris-x86/tp2.o

send                                build/Debug/GNU-Solaris-x86/tp2.o

accept                              build/Debug/GNU-Solaris-x86/tp2.o

listen                              build/Debug/GNU-Solaris-x86/tp2.o

socket                              build/Debug/GNU-Solaris-x86/tp2.o

ld: fatal: Symbol referencing errors. No output written to dist/Debug/GNU-Solaris-x86/application_1
collect2: ld returned 1 exit status
*** Error code 1
make: Fatal error: Command failed for target `dist/Debug/GNU-Solaris-x86/application_1'
Current working directory /export/home/manu/Escritorio/TP-entrega 2/Application_1
*** Error code 1
make: Fatal error: Command failed for target `.build-conf'
Current working directory /export/home/manu/Escritorio/TP-entrega 2/Application_1
*** Error code 1
make: Fatal error: Command failed for target `.build-impl'

Build failed. Exit value 1. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-06T23:51:23.000

您需要适当的`-l`标志。我正在查找它。

呃。添加`-lsocket`. 实际上，您可能也需要`-lnsl`。请参阅[此手册页](http://docs.oracle.com/cd/E23824_01/html/821-1466/bind-3socket.html#scrolltoc)。

在 Netbeans 中，这应该在[Project Properties](http://cnd.netbeans.org/cnd-tutorial.html#ProjectProperties)中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T23:56:33.720

您需要确保链接器正在链接`socket`和`nsl`库。在命令行中，您将添加`-lsocket -lnsl`这样做。我不知道netbeans，也不能告诉你它是如何在那里工作的，但是在某个地方应该有链接器设置，你可以在其中添加这些库。

# visual-studio-2008 - VS Team Tester 无法运行动态 Web 测试

> ID：832299
> 
> 赞同：1
> 
> 时间：2009-05-06T23:34:10.687
> 
> 标签：visual-studio-2008, webtest

我有一个测试项目，其中包含一个 csv 文件，webtest 使用该文件来针对我们的一个项目运行。

出于某种原因，即使它被正确引用，我也会收到以下错误：

无法在代理“BLDSERVER”上运行 Web 测试“SubmitBadData”：无法访问测试“942b62a8-c123-4228-a6df-909ef009d62f”的数据源“BadData”中的表“BadData#csv”：Microsoft Jet 数据库引擎无法访问找到对象“BadData.csv”。确保对象存在并且正确拼写其名称和路径名。

* * *

当我在本地运行这个测试时，它执行得很好。只有当我让我们的构建服务器执行它时它才会失败。

想法？

**关闭原因：**

我必须从头开始重新创建 webtest 10 次。每次它都会在本地工作，但从构建服务器执行时会失败。我刚刚重新创建了它......它工作了。

那好吧。感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T23:42:06.050

csv 文件是嵌入式资源还是内容文件？它是否部署在构建服务器上与本地计算机上相同的（相对）位置？

[您是否完成了http://msdn.microsoft.com/en-us/library/bb385833.aspx](http://msdn.microsoft.com/en-us/library/bb385833.aspx)演练中提到的所有内容？

# c# - 在 Windows Mobile 应用程序中播放 YouTube 视频

> ID：832306
> 
> 赞同：1
> 
> 时间：2009-05-06T23:39:12.700
> 
> 标签：c#, c++, windows-mobile, compact-framework, youtube

我正在开发一个播放 YouTube 视频的 Windows Mobile 6（或 5）应用程序。好吧，它*应该*播放 YouTube 视频（并控制/查询播放器的状态变化、当前帧/时间等）

在网上搜索了很长一段时间（和一些试验）之后，我仍然找不到这样做的方法。我知道的选项是：

*   使用嵌入在 HTML 中的 YouTube 播放器，可通过 JavaScript 控制。但是，我无法从 IE Mobile 观看 YT 视频，首先，我收到一条错误消息，内容类似于“您需要一个启用了 Flash Player 8 和 JavaScript 的浏览器”。

*   托管媒体播放器控件，但 WMP 拒绝播放 YT 视频，包括移动格式。

*   使用 DirectShow。我仍在研究这个（我以前从未使用过 COM，更不用说 DirectShow），但我还没有找到支持[YouTube 格式的解决方案](http://en.wikipedia.org/wiki/YouTube#Format_and_quality_comparison_table)

我宁愿用 C# 编写这个应用程序，但 C++ 也可以。

帮助我，StackOverflow 的智者！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-17T15:17:31.410

您还可以将 YouTube 视频作为 MP4 抓取，希望这可以扩展您的播放器选项。您可以查看 DirectShow CF 的播放功能，或在您的应用程序中托管一些其他支持 MP4 或 FLV 的播放器。

尝试通过IE手机播放它是行不通的，因为支持视频播放的Flash插件所需的版本不可用（上次我检查过）。

**要获取 MP4 文件，请向此 URL 发出请求：**

" [http://www.youtube.com/get_video?video_id=](http://www.youtube.com/get_video?video_id=) " + videoID + "&t=" + token + "&fmt=18"

**要获取 FLV，请使用以下命令：**

" [http://www.youtube.com/get_video?video_id=](http://www.youtube.com/get_video?video_id=) " + videoID + "&t=" + 令牌

**要获取令牌，请调用：**

" [http://www.youtube.com/api2_rest?method=youtube.videos.get_video_token&video_id=](http://www.youtube.com/api2_rest?method=youtube.videos.get_video_token&video_id=) " + videoID

我编写了一个应用程序，它可以抓取 YouTube 视频的播放列表并将它们与我的 PocketPC 同步，我使用 TCPMP 和 Flash 插件来播放视频（从我的应用程序外部播放）。虽然 MP4 也适用于 PPC，但我坚持使用 FLV，因为当时 YouTube 上的某些视频无法作为 MP4 使用。我现在不会担心这个。

遗憾的是我的 PPC 坏了，现在我在 iPhone 上做类似的事情，但我不得不完全切换到 MP4 格式。VLC 在 iPhone 上的 FLV 播放对我来说太生涩了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T01:42:32.250

[CorePlayer](http://www.coreplayer.com/)包含一个允许播放 Youtube 视频的 IE 移动插件。另一个选择是[TCPMP](http://forum.xda-developers.com/showthread.php?t=308837)，它包含一个在 windows mobile 上播放 FLV 视频的插件，这是 opensouce。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T18:03:05.747

您或许可以使用 Google 直接或间接创建的适用于 Windows Mobile 的新 YouTube 应用程序。

[适用于 Windows Mobile 的新 YouTube 应用](http://googlemobile.blogspot.com/2009/03/new-youtube-app-for-windows-mobile-and.html)

[在 Windows Mobile 上观看视频](http://www.youtube.com/blog?entry=tWasC8HWSnI)

# sql - 如何将数据库编写为文本文件，以便任何人都可以再次创建它？

> ID：832320
> 
> 赞同：1
> 
> 时间：2009-05-06T23:49:32.553
> 
> 标签：sql, sql-server, database

我有一个使用 SQL Server Developer 2008 创建的数据库。

我想把它写成一个文件，这样任何人都可以随时重新创建它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T23:52:18.753

您可以按照 Pinal 网站上的步骤进行操作。请小心选择所需的所有选项：

[http://blog.sqlauthority.com/2007/08/21/sql-server-2005-create-script-to-copy-database-schema-and-all-the-objects-stored-procedure-functions-triggers-表视图约束和所有其他数据库对象/](http://blog.sqlauthority.com/2007/08/21/sql-server-2005-create-script-to-copy-database-schema-and-all-the-objects-stored-procedure-functions-triggers-tables-views-constraints-and-all-other-database-objects/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T23:57:30.147

要重新创建结构，请右键单击数据库并使用 Tasks --> Generate Scripts。逐步完成向导，选择您希望通过脚本创建的那些对象。如果过程不明显，这篇 TechNet[文章](http://technet.microsoft.com/en-us/library/ms178078.aspx)将作为探索如何执行此操作的良好起点。

如果您需要结构和数据，您可能需要考虑使用[Red Gate SQL Packager](http://www.red-gate.com/products/SQL_Packager/index.htm)来编写数据脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-07-21T05:40:50.397

试试 DBSourceTools。
[http://dbsourcetools.codeplex.com](http://dbsourcetools.codeplex.com)
它是开源的，会将整个数据库的脚本
——表、视图、过程和数据写入磁盘，然后允许您通过部署目标重新创建该数据库。
它专门设计用于帮助开发人员将他们的数据库置于源代码控制之下。

# php - 关于连接两个mysql表的问题

> ID：832322
> 
> 赞同：1
> 
> 时间：2009-05-06T23:50:09.510
> 
> 标签：php, mysql, database, join, search-engine

我正在尝试加入两张桌子；目的是能够搜索和显示用户输入的艺术家的事件信息。

表格如下：

艺术家表：[id],[name]

事件表：[id],[artist_id],[venue_name],[city],[state],[date],[time]

我创建了一个搜索引擎，但我想做的是当在文本框中输入艺术家姓名时，代码将进入我的数据库并查看艺术家表以查看输入的名称，然后获取 id与输入的名称匹配，然后转到事件表以查找该不同的艺术家 ID，并显示输入的特定艺术家的所有事件信息。

我真的很想帮助如何做到这一点，我不是最擅长的，但我正在努力！谢谢：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T23:53:46.613

```
SELECT *
FROM artist
    LEFT JOIN events
        ON artist.id = events.artist_id
WHERE artist.name = 'your search text' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T23:53:09.937

```
select e.venue_name, e.city, e.state, e.date, e.time
from artist_table a
  join events_table e
    on a.id = e.artist_id
where a.name = @userInput 
```

或类似的东西......或者我错过了什么？这是一个家庭作业问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T01:27:32.783

```
select a.name, e.* 
from artist as a
    left join events on(a.id - e.artist_id)
        where a.name like '%$someinput%'
```

以防万一您不想找到完全匹配的名称。

只是想帮忙。并且它肯定我不擅长这个，但想帮忙，因为起初它对我来说也很复杂

# ruby - Ruby：如何在计算行长时实现忽略标签的自动换行？

> ID：832324
> 
> 赞同：1
> 
> 时间：2009-05-06T23:50:36.870
> 
> 标签：ruby

我需要编写一个小红宝石函数来进行自动换行。我有以下功能：

```
def word_wrap(text, line_width)
  if line_width.nil? || line_width < 2
    line_width = 40
  end
  text.split("\n").collect do |line|
   line.length > line_width ? line.gsub(/.{1,#{line_width}})(\s+|$)/, "\\1\n").strip : line
  end * "\n"
end 
```

这基本上就是 Rails 中包含的 word_wrap 函数。

我想写一个类似的函数来解析一个带有 span 元素的字符串，除了不应该计算标签来换行。

例子：

```
s = "Lorem <span>ipsum dolor</span> si<span>t</span> amet, conse<span>ctetur adipiscing elit</span> Praesent" 
```

目前， word_wrap(s, 20) 给出如下内容：

```
Lorem <span>ipsum
dolor</span>
si<span>t</span>
amet,
conse<span>ctetur
adipiscing
elit</span> Praesent 
```

它应该是：

```
Lorem <span>ipsum dolor</span> si
<span>t</span> amet, conse<span>ctetur 
adipiscing elit</span> 
Praesent 
```

如您所见，新的 word_wrap 函数创建（最多）20 个字符的行，不计算`<span>`and`</span>`标记。

你会怎么做？欢迎所有建议！

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T04:32:18.630

这是一个正则表达式解决方案

```
irb> SPAN_RE = /(?i:<\/?span[^>]*>)/
#=> /(?i:<\/?span[^>]*>)/
irb> ALL_SPANS_RE = /(?:#{SPAN_RE}*(?!#{SPAN_RE}))/
#=> /(?:(?i-mx:<\/?span[^>]*>)*(?!(?i-mx:<\/?span[^>]*>)))/
irb> def word_wrap(str,width)
         full_re = /((?:#{ALL_SPANS_RE}.){0,#{width-1}}#{ALL_SPANS_RE}\S(?:#{SPAN_RE}+|\b))\s*/
         str.gsub(/\s*\n/, ' ').gsub(full_re, "\\1\n")
     end
#=> nil
irb> text =<<TEXT
     Lorem <span>ipsum
     dolor</span>
     si<span>t</span>
     amet,
     conse<span>ctetur
     adipiscing
     elit</span> Praesent
     TEXT
#=> "Lorem <span>ipsum\ndolor</span>\nsi<span>t</span>\namet,\nconse<span>ctetur\nadipiscing\nelit</span> Praesent\n"
irb> puts word_wrap(text,20)
Lorem <span>ipsum dolor</span> si<span>
t</span> amet, conse<span>ctetur
adipiscing elit</span>
Praesent
#=> nil
irb> word_wrap(text,20)
#=> "Lorem <span>ipsum dolor</span> si<span>\nt</span> amet, conse<span>ctetur\nadipiscing elit</span>\nPraesent\n" 
```

基本上，我们抓取尽可能多的字符，直到单词宽度，忽略跨度（并确保我们不抓取跨度的一部分），并确保我们以非空格字符结尾，然后是跨度，或者一个词中断。

我将分解正则表达式的工作原理：

`SPAN_RE`匹配一个跨度标签（`<span>`或或`</span>`或或...）

```
(?i:    - Start of a non-capturing parenthesis (useful for grouping patterns)
          The i flag means the inner pattern is case-insensitive
  <     - a literal '<' character
  \/?   - 0 or 1 a forward slashes
  span  - the letters "span"
  [^>]* - 0 or more other characters that are not a '>' character
  >     - a literal '>' character
)       - end of the non-capturing parenthesis 
```

`ALL_SPAN_RE`匹配给定位置的所有跨度 - 保证匹配的下一个字符*不是*跨度标记的开始。

```
(?:             - Start of a non-capturing parenthesis (useful for grouping patterns)
  #{SPAN_RE}*   - 0 or more spans
  (?!           - Start of a negative lookahead
    #{SPAN_RE}  - exactly 1 span
                  Since this is inside a negative lookahead, it means that the next 
                  character in the string is not allowed to start a span
  )             - end of the negative lookahead
)               - end of the non-capturing parenthesis 
```

这意味着我们可以在 之后匹配一个字符，`ALL_SPAN_RE`并确保我们没有抓取跨度的一部分。

然后`full_re`贪婪地匹配尽可能多的字符，直到所需的宽度（忽略跨度），确保它以非空格字符结尾，即单词的结尾或后跟跨度。

```
(                     - start of a capturing parenthesis
  (?:                 - start of a non-capturing parenthesis
    #{ALL_SPANS_RE}   - any and all spans
    .                 - one character (which can't be the start of a span)
  )                   - end of non-capturing parenthesis
  {0,#{width-1}}      - match preceding pattern up to width-1 times
                        so this matches width-1 characters (ignoring spans)
  #{ALL_SPANS_RE}     - any and all spans
  \S                  - a non-whitespace character
                        we don't want to insert a "\n" after whitespace
  (?:                 - a non-capturing parenthesis
    #{SPAN_RE}+       - 1 or more spans
    |                 - OR
    \b                - the end of a word
                        these alternatives makes sure we aren't breaking in the middle of a word
   )                  - end of non-capturing parentheis
 )                    - end of capturing parenthesis
 \s*                  - any whitespace
                        since we're wrapping, we can just toss this when we insert the newline 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T00:06:14.133

这很好玩！（虽然有一点作业的味道）

我已经删除了我之前的尝试，如果好奇，您可以查看此答案的历史记录。这是我的明确答案，纵向更长一点，但更脚踏实地，不像以前那样老套。

```
s = "Lorem <span>ipsum dolor</span> si<span>t</span> amet, conse<span>ctetur adipiscing elit</span> Praesent"

def word_wrap(s_arg, line_width = 40)
  producer = s_arg.dup
  consumer = ""
  counter  = 0
  while !producer.empty?
    if producer =~ %r[\A</?span>]
      consumer << producer.slice!(0, $&.length)
      next
    end
    consumer << producer.slice!(0, 1)
    counter += 1
    next if counter <= line_width
    consumer.sub!(/ (\S*?)\z/, "\n\\1")
    counter = $1.length
  end
  consumer
end

puts word_wrap(s, 20) 
```

# asp.net - 使用 DAAB 处理动态连接字符串

> ID：832325
> 
> 赞同：0
> 
> 时间：2009-05-06T23:51:02.720
> 
> 标签：asp.net, enterprise-library, data-access-layer, daab

我正在为我们的 ASP.Net 2.0 Web 应用程序添加一个数据访问层，该应用程序几乎完全使用内联 SQL 调用和大量使用复制/粘贴来编写。由于业务问题，我一次只能重构应用程序的一小部分（无法安顿下来并进行大规模的重新设计），所以我必须接受某些设计决策，直到事情足够松散耦合进行重大更改并正确测试它们。

我决定使用企业库数据访问应用程序块作为未来数据访问层的管道，而以前的一个这样的设计决定给我带来了问题。目前，我们根据用户提供的帐户 ID 从管理数据库中获取应用程序的“主”连接字符串，以便我们可以允许应用程序的单个安装访问多个数据库。我的问题涉及试图找出将连接字符串（或帐户 ID）获取到 DAL 的最佳实践方式。

之前的实现是将加密的连接字符串存储在 cookie 中，所以我目前的破解方法是从那里获取连接字符串，然后以下列方式使用 DAAB：

```
Public Shared Function GetResultsByKeywords(ByVal key1 As String, ByVal key2 As String, ByVal key3 As String, ByVal key4 As String) As DataTable
    Dim db As SqlDatabase = New SqlDatabase(Connection.GetConnectString())
    Dim dt As DataTable = New DataTable

    Using dr As IDataReader = db.ExecuteReader("sel_eHELP_ITEMS", key1, key2, key3, key4)
        dt.Load(dr)
    End Using

    Return dt
End Function 
```

Connection.GetConnectString() 从 cookie 中获取连接字符串。

我知道这远不是最好的方法，我需要修复它，但我正在努力用“正确”的方式来完成它。也许创建一个基类，我可以使用连接字符串进行初始化并从中继承所有其他类，但我不确定它的外观以及我将首先初始化该类的实例的位置。在访问任何 DAL 功能之前的每一页上？

任何指导将不胜感激。谢谢你。

**更新**

让我澄清一下。一个安装最多会有 3 或 4 个不同的连接字符串。“帐户 ID”不是用户 ID，它被多个用户用来实质上指定要连接到哪个数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T23:53:35.460

编辑：

对于您的最新更新，我仍然建议使用 DAAB [http://davidhayden.com/blog/dave/archive/2006/01/23/2744.aspx查看配置](http://davidhayden.com/blog/dave/archive/2006/01/23/2744.aspx)

我很难找到/打开 Ent Lib 文档，但我会看看它是否具有 SqlConnection 对象的 ChangeDatabase 方法的等价物。[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.changedatabase.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.changedatabase.aspx)

这是一种方法。由于我认为您的 DAL 不应该知道您的切换数据库要求，因此我将使用 ConnectionString 作为构造函数的参数来设置您的 DAL。使用包装方法/属性来隐藏/封装该要求并获取您想在应用程序中使用的 DAL 实例。

（请原谅c#）

```
public class MyDAL
{
    private string _connectionString;

    public MyDAL(string connectionString)
    {
        _connectionString = connectionString;
    }

    public int MyDatabaseCall()
    {
        using (SqlConnection conn = new SqlConnection(_connectionString))
        {
            using (SqlCommand cmd = new SqlCommand("my sql", conn))
            {
                conn.Open();
                using (SqlDataReader reader = cmd.ExecuteReader())
                {
                    //...data access
                    return 0;
                }
            }
        }
    }
}

public class MyApp
{
    public static Dictionary<string, MyDAL> myDatabases = new Dictionary<string, MyDAL>();

    public string GetConnectionString(string database)
    {
        return System.Configuration.ConfigurationManager.ConnectionStrings[database].ConnectionString;
    }

    public void StartUp() // Global.asax Application_Start ?
    {
        myDatabases.Add("Database1", new MyDAL(GetConnectionString("Database1")));
        myDatabases.Add("Database2", new MyDAL(GetConnectionString("Database2")));
        myDatabases.Add("Database3", new MyDAL(GetConnectionString("Database3")));
    }

    public MyDAL DataAcccessLayer
    {
        get
        {
            string usersDB = FigureOutUsersDatabase();
            return myDatabases[usersDB];
        }
    }

    public void UseSomeData()
    {
        var myData = DataAcccessLayer.MyDatabaseCall();
        //Do Stuff
    }
} 
```

希望对你有帮助，祝你好运！并且要**非常小心**你放在饼干里的东西。;)

# php - XSLT 字符编码 - 未定义实体

> ID：832329
> 
> 赞同：0
> 
> 时间：2009-05-06T23:52:09.660
> 
> 标签：php, xml, xslt

我正在使用 XSLT 并取得了巨大的成功，但遇到了一些问题。

**警告：DOMDocument::loadXML() [domdocument.loadxml]: Entity 'Aring' 未在 Entity 中定义**

基本上对于一些非标准字符，我得到了上述类型的错误。我真的很想一劳永逸地解决这个问题。我知道字符映射，但我不可能写下特殊字符的所有可能组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T00:13:26.240

包括一个定义实体的 DTD，比如[这个](http://www.utoronto.ca/webdocs/HTMLdocs/HTML_Spec/html4.01/HTMLlat1.ent)

这是[PHP.net](http://www.php.net/manual/en/book.xsl.php#49694)上的一篇文章，提示了如何成功包含它。

上面的 DTD 可能应该涵盖您；＆戒指; 是一个 HTML 实体，上面的 DTD 涵盖了所有 HTML 4.01 实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T00:23:46.043

在没有 DTD 的情况下使用时，XML 仅支持数量非常有限的命名实体。（我记得`&lt;`, `&gt;`, `&amp;`, 和`&quot;`。）要在不使用 DTD 的情况下包含其他字符集外的字符，只需使用数字实体来引用它们即可。

例如，`&Aring;`对应于 Unicode 字符 U+00C5，“Latin Capital Letter A With Ring Above”。因此，您可以使用`&#xC5;`（可以省略前导零）将其包含在您的文档中。如果您在 Windows 上，字符映射工具（在 XP 上：开始 > 程序 > 附件 > 系统工具）是一个很大的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T01:53:56.200

＆戒指; 不是标准的 XML 实体。为了在您的 XML 文档中支持它，您的 XML 解析器需要能够识别 DTD，并且该文档必须具有定义该实体或引用定义该实体的 DTD 的 DOCTYPE 声明。例如，一个 XHTML DTD 定义 Å 意思是 Å。

当您的 DOM XML 解析器看到它不知道的命名实体时抛出错误是正确的，并且解析器要么不知道 DTD，要么没有关于该实体含义的 DOCTYPE 声明。XML 本身定义了实体 <、>、& 和 "。这些是可以在任何 XML 应用程序中安全使用的命名实体。

如果您自己编写文档，则不要使用 Å - 改用数字等价物，或者假设您使用的是 Unicode，只需使用字符文字。

如果您需要能够解析来自其他人的包含任何其他命名实体的 XML 文档，并且这些文档没有 DOCTYPE，那么正如 Frank 提到的，您需要通过在 XML 声明之后[插入正确的 DOCTYPE 来自己修复文档](http://www.php.net/manual/en/book.xsl.php#49694).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T00:30:22.083

请注意，还有一个[`DOMDocument::loadHTML`](http://php.net/manual/en/domdocument.loadhtml.php)函数将文档视为 HTML，并且不会在这些实体上出错。

# python - 使用 Python 在 Firefox (win) 选项卡上启动网页

> ID：832331
> 
> 赞同：25
> 
> 时间：2009-05-06T23:52:20.300
> 
> 标签：python, windows, command-line

我正在尝试以这种方式使用 python 在新选项卡中启动网站 url，但这两种方式都不起作用：

方法一：

```
os.system('C:\Program Files\Mozilla Firefox\Firefox.exe -new-tab http://www.google.com/'); 
```

和方法2：

```
os.startfile('C:\Program Files\Mozilla Firefox\Firefox.exe -new-tab http://www.google.com/'); 
```

如果我不添加参数（-new-tab [http://www.google.com/](http://www.google.com/)），它会工作，打开默认页面。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-05-06T23:55:52.147

您需要使用该[`webbrowser`](http://docs.python.org/library/webbrowser.html)模块

```
import webbrowser
webbrowser.open('http://www.google.com') 
```

[**编辑**]

如果要在非默认浏览器中打开 url，请尝试：

```
webbrowser.get('firefox').open_new_tab('http://www.google.com') 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-07T00:02:09.027

如果您想使用参数启动程序，则[subprocess](http://docs.python.org/library/subprocess.html)模块更适合：

```
import subprocess
subprocess.call([r'C:\Program Files\Mozilla Firefox\Firefox.exe',
    '-new-tab', 'http://www.google.com/']) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T23:58:48.287

使用`os.startfile()`仅传递 url。这将导致 URL 在用户默认浏览器的新选项卡/窗口中打开，这对您的用户来说更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-07T00:09:37.950

您可能想尝试：

```
import os
os.spawnl(os.P_NOWAIT, r'C:\Program Files\Mozilla Firefox\Firefox.exe',
          r'FireFox', '-new-tab', 'http://www.google.com/') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-29T04:37:02.323

使用不同的包在 python 中打开 URL 有多种方法-
使用 selenium包-

```
from selenium import webdriver
browser = webdriver.Chrome(executable_path = '/Users/abcarp/bin/chromedriver')
browser.get('https://in.linkedin.com/')
sleep(10)
browser.close() 
```

下载 firefox 驱动程序并放置在用户/用户名/bon 位置并将名称更改为 firefox。

使用子流程包-

```
import subprocess
p = subprocess.Popen([r"/Volumes/Firefox/Firefox.app", "http://www.google.com"]) 
p.kill() 
```

使用机械化包-

```
import mechanize
br = mechanize.Browser()
br.open("http://machinelearningstories.blogspot.com/")
br.close() 
```

使用网络浏览器包-

```
import webbrowser
webbrowser.get('firefox').open_new_tab('http://www.google.com') 
```

关闭打开的网页-

```
import os
os.system("taskkill /im chrome.exe /f")    #( windows)
os.system("pkill -f Chrome")    # mac 
```

这里提到了更详细的相同信息-http: [//pythonfordatabuggers.blogspot.com/2020/04/automatically-open-and-do-some-actions.html](http://pythonfordatabuggers.blogspot.com/2020/04/automatically-open-and-do-some-actions.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-19T02:21:15.877

在没有 Internet Explorer 的情况下打开链接并使用 firefox，只需确保 firefox 是默认的 Web 浏览器。

```
import webbrowser

http = 'http://'
links = input()
b = webbrowser.open_new(http + links) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-02T03:21:25.477

如果您在 Windows 7 机器（我的设置）上使用 python 2.7，如果您使用：

```
webbrowser.open('google.com') 
```

它将打开旧版 Windows 资源管理器（是的，我知道是对的……）。

但是，如果您使用：

```
webbrowser.open('http://google.com') 
```

它将在您的默认网络浏览器中加载 url，在我的情况下为 Firefox。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-11T21:24:42.363

```
import os

os.chdir('C:\Program Files\Mozilla Firefox')    #address of exe file

os.system('firefox.exe')   # name of exe file 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-28T10:42:39.147

你可以在 webbrowser 中使用 Mozilla 类：

```
import webbrowser
firefox = webbrowser.Mozilla("C:\\Program Files\\Mozilla Firefox\\firefox.exe")
firefox.open('http://www.google.com') 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-12T06:16:39.690

作为 Firefox 命令帮助`firefox --help`

```
--new-tab <url>    Open <url> in a new tab. 
```

所以使用`--new-tab`而不是`-new-tab`

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2020-10-12T03:17:07.960

最好的办法是让 FireFox 作为你的默认浏览器，然后你就不必指定你的路径

# ms-access - 在 COM 中为 Access 2003 创作自定义控件

> ID：832352
> 
> 赞同：0
> 
> 时间：2009-05-07T00:00:37.550
> 
> 标签：ms-access, com, user-controls, custom-controls

问题的简短版本：

如何在不使用 VB6 的情况下为 MS Access 2003 编写自定义控件？

长版：

在过去的 6 年里，我一直被编写 C# WinForms 应用程序的乐趣所宠坏，现在我必须修改一个 Access 2003 应用程序。是的，它最终将被重写为一个 Dot Net 应用程序，但目前，它必须仍然是一个 Access 2003 应用程序。

因此，我喜欢编写 WinForms 应用程序的一件事是，我可以获取任何 WinForms UI 对象，比如一个组合框，并将其变成一个自定义控件，我可以向其中添加功能。我还可以采用多个控件，将它们作为自定义控件组合到一个设计图面上，然后让它作为自定义控件出现在我的 VS.Net 工具箱中。（当您需要反复使用一组复杂的数据收集控件时非常方便）。

所以现在我在我的一个项目中坚持使用 Access 2003，我希望能够为它创建自定义控件。Access 2003 第 3 方控件使用 COM。问题是，我曾经在其中创建自定义 COM UI 控件的唯一环境是 VB 6。现在，我仍然拥有 VB6，但由于 VB6 已经 10 多年了，我觉得有义务寻找其他选项。

我很确定还有人在创作 COM UI 控件，那么如果不是 VB6，你们在使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T23:13:00.277

我怀疑您是否会在特定于 Access 方面获得很多帮助，因为大多数 Access 开发人员不需要或不希望您所要求的。事实上，我所熟悉的大多数专业人士都避免在 Access 中使用所有类型的非本地控件，这仅仅是因为在 Access 应用程序中使用它们会带来很多问题。Access 在许多方面实际上是一种非常特殊的动物，因此创建可在 Access 中工作的控件比创建可在 VB 应用程序中工作的控件更难。我不知道这一点，我的猜测是其中一个原因是 Access 表单上的各个控件只有在获得焦点时才有窗口句柄。原因很清楚：在设计 Access 的时候，系统资源是有限的，而你没有 不想为窗体上的每个控件分配窗口句柄（可能是 100 多个）。现在这可能不是问题，但 Access 中的设计保持不变。有一些解决方法，但根据我的观察，它们并不漂亮。

# visual-studio - VS2008 坚持在 C++ 中默认为 Active Solution Platform 的“Itanium”

> ID：832353
> 
> 赞同：0
> 
> 时间：2009-05-07T00:01:04.520
> 
> 标签：visual-studio, visual-studio-2008, configuration

我刚开始使用 C++ VS2008，并从 MSDN 下载了示例存档。该文件是 vc_samples.exe - 抱歉，目前没有链接。

我的问题是，这些示例中的大多数都无法编译。Start Debugging 按钮（绿色箭头）被禁用，IDE 没有任何解释。

更多的是运气而不是技巧，我偶然发现了 Configuration Manager 对话框（在 Build 菜单下），并注意到所有不会构建的示例项目都将 Active Solution Platform 设置为 Itanium。当我将其更改为 Win32 时，我可以构建项目。

**我的问题 - 我可以在某处更改 VS 中的默认设置，以便 Active Solution Platform 始终是 Win32 吗？**

浏览了所有选项，查看了 VS 帮助，谷歌搜索，仍然是空白，所以很感激任何建议。

谢谢，

——汤姆·布谢尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-25T22:32:30.013

我到处寻找是否可以找到答案，但我认为无法做到（这看起来很奇怪，真的）。我尝试重新排序解决方案（sln）文件中的条目，但据我所知，它的工作方式如下：

1) 如果您有解决方案选项文件 (suo)，它将使用最后选择的配置。

2) 如果没有 suo 文件，如果 Debug 配置存在，它将使用 Debug 作为默认配置。

3) 否则它将按字母数字对您的配置进行排序并使用第一个。

因此，如果您愿意，您可能可以欺骗 VS 使用不同的。只需将调试配置重命名为“Debug All”之类的名称，并在您喜欢的配置前加上下划线或其他标点符号。例如“_Release All”

我只为平台设置了 Win32，所以我无法测试这些设置，但它可能以相同的方式工作。

# c# - 如何获取未聚焦的应用程序的活动 ChildWindow？

> ID：832354
> 
> 赞同：0
> 
> 时间：2009-05-07T00:01:23.850
> 
> 标签：c#, winapi, focus, keypress, childwindow

我需要将处理程序获取到正在运行的某个应用程序的子窗口。我有主窗口处理程序，但我需要知道哪个特定的子窗口处于活动状态，以便使用 SendMessage/PostMessage。

我终于设法使用以下代码使用firefox做到了这一点：

```
 [DllImport("user32.dll")]
    static extern uint GetWindowThreadProcessId(IntPtr hWnd, IntPtr ProcessId);

    [DllImport("user32.dll", EntryPoint = "GetGUIThreadInfo")]
    internal static extern bool GetGUIThreadInfo(uint idThread, out GUITHREADINFO threadInfo);

    private void button1_Click(object sender, EventArgs e)
    {
        //start firefox
        firefox = new Process();
        firefox.StartInfo.FileName = @"C:\Program Files\Mozilla Firefox\firefox.exe";
        firefox.Start();
        Thread.Sleep(10000);

        // get thread of the main window handle of the process
        var threadId = GetWindowThreadProcessId(firefox.MainWindowHandle, IntPtr.Zero);

        // get gui info
        var info = new GUITHREADINFO();
        info.cbSize = (uint)Marshal.SizeOf(info);
        if (!GetGUIThreadInfo(threadId, out info))
            throw new Win32Exception();

        // send the letter W to the active window
        PostMessage(info.hwndActive, WM_KEYDOWN, (IntPtr)Keys.W, IntPtr.Zero);

    } 
```

这很好用！但是，如果应用程序未处于活动状态，例如，如果记事本覆盖了 firefox，则 GUIThreadInfo 将带有每个成员 null。只有当 firefox 是 windows 的最顶层（活动）应用程序时，才会填充该结构。

我知道这可以通过将 firefox 置于前台来解决，但我需要避免这样做。有没有人有任何其他想法来获取不是 Windows 中最顶层窗口的应用程序的活动子窗口？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T00:17:01.877

如果您拥有该进程的最顶层窗口句柄，您应该能够使用[GetTopWindow](http://msdn.microsoft.com/en-us/library/ms633514(VS.85).aspx)接收位于 Z 顺序顶部的窗口。如果应用程序设置为活动/当前应用程序，这应该是活动的窗口。

* * *

编辑：

使用[AttachThreadInput](http://msdn.microsoft.com/en-us/library/ms681956(VS.85).aspx)将您的线程附加到另一个进程线程怎么样？

完成此操作后，GetFocus() 和 PostMessage()/SendMessage() 应该可以工作。只要确保在完成后分离输入即可。

[不幸的是，我能找到的唯一示例](http://www.delphifaq.com/faq/delphi/windows_GUI/f455.shtml)是在 Delphi 中，但很容易翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T05:17:26.977

[您可以考虑使用GetWindow](http://msdn.microsoft.com/en-us/library/ms633515(VS.85).aspx)函数 (hWnd, GW_CHILD)获取子窗口句柄并在此句柄上发布消息。

另请注意，在[Microsoft Windows Vista 及更高版本上。消息发布受用户界面特权隔离 (UIPI) 的约束。进程的线程只能将消息发布到完整性级别较低或相等的进程中的线程的消息队列中。](http://msdn.microsoft.com/en-us/library/ms644944(VS.85).aspx)

# bug-tracking - 无法找到合适的错误跟踪软件

> ID：832355
> 
> 赞同：3
> 
> 时间：2009-05-07T00:01:50.760
> 
> 标签：bug-tracking

我今天搜索了一整天，发现了无数（嗯，好吧——几十个）Bug Tracker，有些是免费的，有些是托管的，有些非常昂贵。我很快意识到我没有时间花时间评估它们（特别是因为它们中的许多似乎有很多我们永远不会使用的特性）。

这是我的适度要求列表（至少我认为它们是适度的）：

1.  低成本（或免费）：假设拥有 100 美元 +/- 或每月 10 美元 +/- 托管
2.  基于 PHP/MySql（如果我们要拥有）- 托管，一切都很好
3.  易于安装（FTP，然后设置数据库，然后编辑 config.php 之类的东西）
4.  请只是基础知识（基本提交/更新/提交错误）
5.  体面的归档/关键字标记/搜索机制

其他任何东西（如维基、电子邮件、论坛、图表等——不需要）。我们已经有一个帮助台系统（HelpSpot），所以也不需要那个。

我想我可以自己写一个快速的，或者只是在我们的内部 Wiki 上创建页面，但是在错误跟踪世界中不存在这种轻量级的东西吗？如果你们中的任何人有好的建议，我不介意评估接近上述要求的 3 或 4 个。

非常感谢 -

**添加**

前几个建议是针对 FogBugz 和 Bugzilla 的。我看了两者，虽然它们都非常好（尤其是 FogBugz），但它们的功能太多了，无法满足我们的需求。我正在寻找的（如果存在的话）是更基本的东西。谢谢~

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-07T00:08:50.510

查看[FogBugz](http://www.fogcreek.com/FogBUGZ/)（托管与否）。托管它对 2-3 个用户免费。

如需免费替代方案，请尝试[Bugzilla](http://www.bugzilla.org/)。

当然还有[Jira](http://www.atlassian.com/software/jira/)。

在这两个商业版本中，FogBugz 从表面上看更贵，但与 Jira 相比有几个引人注目的优势：

*   可以选择托管版本（但每月一个席位 25 美元以上，并不便宜）；
*   它包括电子邮件组件；
*   它有一个 wiki（您需要 Confluence - 另一个商业产品 - 或其他一些带有 Jira 的 Wiki，它不会被很好地集成）；
*   它具有项目管理功能，即基于证据的调度。我还没有看到在大型项目中使用它，但它肯定会很有趣，因为它看起来比经典的甘特图方法更灵活（和现实）；
*   轻松上传屏幕截图（对测试人员非常有用）；
*   打开一个新案例就像发送电子邮件错误请求一样简单（并且您不需要许可证来执行此操作，但如果您想跟踪它，分配它等等）；
*   源代码控制集成；和
*   托管版本最多可免费供 2 位用户使用。

我要发表的一条评论是，我发现 FogBugz 的托管版本有点……慢。感觉反应迟钝。我只使用过那个版本，所以我不知道本地版本的比较，但对我来说 Jira 似乎反应更快。

Jira 的优点是（恕我直言）：

*   成本;
*   它可以在任何 Windows、Mac OS X 和 Linux 上运行
*   一[组丰富的插件](http://confluence.atlassian.com/display/JIRAEXT/JIRA+Plugins)（特别是对于 Confluence）。

我对 Bugzilla 知之甚少，但它似乎更专注于跟踪错误，而其他两个集成了更广泛的功能。

当然还有上面没有列出的其他错误跟踪工具，但我对这些了解较少。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-07T00:21:55.127

我在实际项目中使用过[trac](http://trac.edgewall.org/)和[Mantis](http://www.mantisbt.org/) ，可以同时推荐两者。

它们都可能包含您不需要的功能，但这些不会造成伤害。

trac 尤其具有相当干净的 UI，这可能是一个问题。它确实有一个内置的 wiki，但您不必使用它:-)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-07T00:06:17.927

JIRA 似乎非常适合跟踪错误。它也有一些项目管理的副作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T00:12:16.710

在我写这篇文章的时候，[Axosoft](http://www.axosoft.com)已经为一个由 5 名开发人员组成的团队提供了 OnTime Express，价格为 5 美元。通常，5 个用户的费用为 395 美元。不是错字。我一直喜欢 OnTime，因为它简单且功能齐全。而且我不是一个骗子（我不会以任何方式报销这个意见）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-07T00:19:33.323

[BugHost](http://www.bughost.com/)很好，基本而且免费。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T00:22:43.563

几年前，我们开始推出自己的产品（在 Lotus Notes 中......），然后我们切换到 [Bugzilla](http://www.bugzilla.org/)，然后是[Mantis](http://www.mantisbt.org/)，最后是[Jira](http://www.atlassian.com/software/jira/)。在他们当中，我实际上最喜欢 Jira，因为它无处不在。随着您需求的增长，Atlassian 的其他产品会派上用场。

如果您有兴趣，我们放弃了 Bugzilla，因为它的 UI。由于一些围绕开源软件的内部政治，我们离开了 Mantis。而且，我们似乎已经选择了 Jira。总的来说，我对这个选择很满意。

但是，如果您正在寻找简单的东西，请查看 Mantis。这是 PHP 超过“选择你的数据库”。如果您花一点时间习惯代码库以及如何自定义它，它实际上是相当不错的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-07T00:24:57.037

已经问了好几次了。请参阅这些 SO 帖子：

[您使用什么错误跟踪软件？](https://stackoverflow.com/questions/12328/what-bug-tracking-software-do-you-use)

[不建立自己的错误跟踪系统的原因](https://stackoverflow.com/questions/62153/reasons-not-to-build-your-own-bug-tracking-system)

[哪些问题跟踪器支持子工单，它们在弥合项目经理和开发人员之间的差距方面做得如何？](https://stackoverflow.com/questions/140236/which-issue-trackers-support-sub-tickets-and-how-well-do-they-work-for-bridging)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-07T00:27:21.667

[Roundup](http://roundup.sourceforge.net/)是一个基于 Python 的通用“跟踪器”。您可以将它用于错误，但也可以更多（或更少！）。它的使用和设置非常简单。还具有强大的电子邮件界面。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-08T00:31:23.147

[使用个人许可证](http://www.atlassian.com/software/jira/personal.jsp)查看JIRA ，它应该可以使您很好地进入价格范围 - 实际上是免费的。

但是，此许可证确实有限制。

> 免费的 JIRA 个人许可证允许：
> 
> *   三个具有完全访问权限和无限匿名访问者的注册用户
> *   您自己部署的功能齐全的 JIRA 版本（企业版、专业版或标准版 - 比较版本）
> *   永久使用
> 
> 免费的 Personal JIRA 许可证有一些限制：
> 
> *   JIRA 个人许可证持有者无权获得 Atlassian 支持。
> *   所有 JIRA Personal 许可证仅允许用于个人环境。
> *   每人仅分配一份 JIRA 个人许可证。

JIRA 是***迄今为止***我用过的最好的错误跟踪系统。我在以前的工作场所使用过 FogBugz，IMO 不像 JIRA 那样功能丰富或强大。

# c# - 如何序列化未设计为序列化的类？

> ID：832360
> 
> 赞同：12
> 
> 时间：2009-05-07T00:04:12.797
> 
> 标签：c#, xml-serialization

我需要将一些类和数据结构保存到文件中。我的第一个反应是使用 XML 或二进制序列化，但这变成了一场噩梦。我有一组不打算序列化的类（私有设置器，没有无参数构造函数，没有序列化属性，字典等）。考虑到我无法更改这些课程，我该怎么办？是否有任何解决方法并且仍然使用序列化？

我是否必须编写所有代码来编写属性、集合等？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-07T03:13:55.010

使用 JavaScriptSerializer。它位于 System.Web.Script.Serialization 命名空间中，并在 System.Web.Extensions.dll 程序集中的 3.5 框架中实现。

使用此类，您可以序列化任何 POCO，无论它是否标记为 [Serializable]。您的程序不必是 Web 应用程序即可使用 JSON 序列化。这是一个例子：

```
public class Unserializable
{
  public int Age { get; set; }
  public int ID { get; set; }
  public string Name { get; set; }
}

public class Program
{
  static void Main()
  {
    var u = new Unserializable
            {
              Age = 40,
              ID = 2,
              Name = "Betty"
            };
    var jser = new JavaScriptSerializer();
    var jsonText = jser.Serialize( u );
    // next line outputs {"Age":40,"ID":2,"Name":"Betty"}
    Console.WriteLine( jsonText );
  }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-07T00:43:08.553

听起来像是……序列化代理的工作！

转到[http://msdn.microsoft.com/en-us/magazine/cc188950.aspx](http://msdn.microsoft.com/en-us/magazine/cc188950.aspx)

概览。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T00:11:11.393

我会使用代码生成工具（mygeneration、T4 等）来生成要序列化的 DTO...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T00:24:26.993

不是一个简单的解决方法。

您可能只想序列化/反序列化类中的字段（私有和公共），然后递归地执行此操作。您可能需要使用反射来解决它们。不要反序列化属性，因为设置属性值时可能会产生副作用。您还必须递归地反序列化所有作为对象的字段。挑战在于知道在哪里停下来。

您必须对如何使用反射反序列化序列化对象做出一些重大猜测。我必须假设这些对象的某些字段包含对其他对象的引用，并且您还必须知道如何遍历所有这些。

此外，您必须调用参数化构造函数，并希望在使用反射设置字段时不会造成太大损害。

简而言之，您最好创建一组特殊用途的包装类，它会以最佳猜测形式从序列化格式重新创建您的专有类。然后可以使您的特殊用途类可序列化。这不会是一项简单的任务。

也就是说，代码生成可能能够简化识别类中所有字段的任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-07T00:36:25.373

另一种选择是使用适配器模式。

好消息是您不必更改原始课程。坏消息是，您最终编写的代码可能是第一个“不可更改”类中的两倍。

您最终会得到 2 个新类：适配器和新的可序列化类。

这个想法是适配器知道如何通过检查不可序列化的类来创建可序列化的类。换一种方式（可序列化到不可序列化），您可以再次使用适配器（当然，这里我假设您的私有设置器实际上是通过参数化构造函数设置的）。

[这是详细的模式。](http://www.dofactory.com/Patterns/PatternAdapter.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T00:39:32.777

这有两个独立的部分：

1.  提取/设置数据
2.  从文件（或其他位置）存储/读取它

对于第一部分，如果您无法更改要序列化/反序列化的类，那么您实际上只需要通过反射进行深层复制。

对于序列化，遍历存储其值的类的每个成员。

使用您想要存储它的任何介质，例如 XML，并将这些值写入磁盘。

对于反序列化，从文件中读取值，创建对象的新实例并使用反射来设置所有值。

如果您获取/设置所有成员，您将拥有一个处于相同状态的对象。（如果您有复杂的成员，您可能需要递归地遍历所有对象。）

至于如何将数据存储在磁盘上，xml 或二进制都可以。如果您想查看它并使其易于阅读，请使用 XML。（我建议您在初次尝试时使用它，因为它会使调试变得更加容易。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-07T01:13:48.310

这实际上取决于您的问题的规模和您需要的性能。

如果您有 1 个问题类，我只需编写一个可以序列化/反序列化该类的代理类。如果您谈论的是 100 多个类，您可能需要使用支持所有复杂性的序列化框架。没有无参数构造是一场噩梦，无论您编写或使用什么序列化框架，您都需要预先知道要传递给构造函数的参数。私人设置器/字典/列表等不是太大的问题。

我为媒体浏览器编写了一个[迷你序列化](http://code.google.com/p/videobrowser/source/browse/#svn/trunk/MediaBrowser/Library/Persistance)框架，它是 BSD。我的重点是性能，但我使用的技术可以适应您的问题。[可以使用在 Marc 的协议缓冲区](http://code.google.com/p/protobuf-net/)中使用的类似技术。

如果性能根本不重要，一个相当简单的序列化框架可以使用反射相当快地编码，当你试图保持事物的性能时，事情会变得很困难。

# iphone - NSString 和 NSMutableURLRequest 的问题

> ID：832366
> 
> 赞同：1
> 
> 时间：2009-05-07T00:07:29.903
> 
> 标签：iphone, objective-c, nsstring

我在向 NSMutableURlRequest 添加标头时遇到问题，问题是当我在“授权”下方添加标头时，它没有显示出来。但是，如果我用静态字符串 exp (@"asdadsadsadga") 替换下面的实例变量“auth”，则会显示“Authorization”标题。在这一点上我很迷茫。

```
NSURL *url = [NSURL URLWithString:@"https://www.google.com/analytics/feeds/accounts/default"];
NSMutableURLRequest *profileRequest = [NSMutableURLRequest requestWithURL:url];

NSLog(auth); //prints correctly
NSString *authString = [NSString stringWithFormat:@"GoogleLogin Auth=%@", auth];
[profileRequest addValue:authString forHTTPHeaderField:@"Authorization"];

NSDictionary *allheaders = [profileRequest allHTTPHeaderFields];

for (id key in allheaders)
{
  //Nothing prints
  NSLog(@"key: %@, value: %@", key, [allheaders objectForKey:key]);
}

NSLog(auth); //Prints correctly 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T00:26:25.303

首先，将 NSLog(auth) 替换为 NSLog(@"%@", auth)。前者很危险，可能会暴露这里发生的一些事情。您还应该尝试尽早添加：

```
auth = @"asdasdasdad"; 
```

您还应该尝试直接转储所有标题：

```
NSLog(@"%@", [profileRequest allHTTPHeaderFields]; 
```

这可能会有所启发。我怀疑问题出在您的 auth 变量中，可能与内存管理有关，而不是在 NSMutableURLRequest 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-23T06:42:29.130

您用于生成 base64Encoded 字符串的代码已损坏。

尝试使用页面底部列出的方法：http: [//cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html](http://cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)

# java - 强制事务回滚而不遇到异常？

> ID：832375
> 
> 赞同：49
> 
> 时间：2009-05-07T00:11:24.887
> 
> 标签：java, hibernate, spring

我有一种方法可以做很多事情；其中进行了一些插入和更新。

它是这样声明的：

```
@Transactional(propagation = Propagation.REQUIRED, isolation = Isolation.DEFAULT, readOnly = false)
public int saveAll() {
 //do stuff;
} 
```

它完全按照预期工作，我对此没有任何问题。然而，在某些情况下，尽管没有异常，但我想强制回滚......目前，当我遇到正确的条件时，我正在强制异常，但这很丑陋，我不喜欢它。

我可以以某种方式主动调用回滚吗？

例外称之为......我想也许我也可以。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-07T15:36:53.913

在 Spring Transactions 中，您使用`TransactionStatus.setRollbackOnly()`.

您在这里遇到的问题是您正在使用`@Transactional`来划分您的交易。这具有非侵入性的好处，但这也意味着如果您想手动与事务上下文交互，则不能。

如果您想严格控制事务状态，则必须使用程序化事务而不是声明性注释。这意味着使用 Spring 的 TransactionTemplate，或者直接使用它的 PlatformTransactionManager。请参阅 Spring 参考手册的第 9.6 节。

使用`TransactionTemplate`，您提供了一个实现 的回调对象`TransactionCallback`，并且此回调中的代码可以访问这些`TransactionStatus`对象。

它不如`@Transactional`，但您可以更密切地控制您的 tx 状态。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-05-06T18:27:22.947

这对我有用：

```
TransactionInterceptor.currentTransactionStatus().setRollbackOnly(); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-03-12T10:41:50.833

我们不使用 EJB，而是使用简单的 Spring，我们选择了 AOP 方法。我们已经实现了新的注解`@TransactionalWithRollback`，并使用 AOP 将这些注解的方法与“around”通知包装起来。为了实施我们使用提到的建议`TransactionTemplate`。这意味着一开始需要做一些工作，但结果我们可以`@TransactionalWithRollback`像`@Transactional`在其他情况下使用的那样对方法进行注释。主要代码看起来干净简单。

```
//
// Service class - looks nice
//
class MyServiceImpl implements MyService {
    @TransactionalWithRollback
    public int serviceMethod {
        // DO "read only" WORK
    }
} 
```

* * *

```
//
// Annotation definition
//
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.METHOD})
public @interface TransactionalWithRollback {
} 
```

* * *

```
//
// the around advice implementation
//
public class TransactionalWithRollbackInterceptor {
    private TransactionTemplate txTemplate;
    @Autowired private void setTransactionManager(PlatformTransactionManager txMan) {
        txTemplate = new TransactionTemplate(txMan);
    }

    public Object doInTransactionWithRollback(final ProceedingJoinPoint pjp) throws Throwable {
        return txTemplate.execute(new TransactionCallback<Object>() {
            @Override public Object doInTransaction(TransactionStatus status) {
                status.setRollbackOnly();
                try {
                    return pjp.proceed();
                } catch(RuntimeException e) {
                    throw e;
                } catch (Throwable e) {
                    throw new RuntimeException(e);
                }
            }
        });
    }
} 
```

* * *

```
//
// snippet from applicationContext.xml:
//
<bean id="txWithRollbackInterceptor" class="net.gmc.planner.aop.TransactionalWithRollbackInterceptor" />

<aop:config>
    <aop:aspect id="txWithRollbackAspect" ref="txWithRollbackInterceptor">
        <aop:pointcut 
            id="servicesWithTxWithRollbackAnnotation" 
            expression="execution( * org.projectx..*.*(..) ) and @annotation(org.projectx.aop.TransactionalWithRollback)"/>
        <aop:around method="doInTransactionWithRollback" pointcut-ref="servicesWithTxWithRollbackAnnotation"/>
    </aop:aspect>
</aop:config> 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-05-07T00:18:57.723

如果您在 EJB 中，请`setRollbackOnly()`致电。`SessionContext`

你可以像这样注入`SessionContext`：

```
public MyClass {
    @Resource
    private SessionContext sessionContext;

    @Transactional(propagation = Propagation.REQUIRED, 
                   isolation = Isolation.DEFAULT, 
                   readOnly = false)
    public int saveAll(){
        //do stuff;
        if(oops == true) {
             sessionContext.setRollbackOnly();
             return;
        }
    } 
```

`setRollbackOnly()`是 的成员`EJBContext`。 `SessionContext`扩展`EJBContext`： http: [//java.sun.com/j2ee/1.4/docs/api/javax/ejb/SessionContext.html](http://java.sun.com/j2ee/1.4/docs/api/javax/ejb/SessionContext.html) 请注意，它仅在会话 EJB 中可用。

`@Resource`是一个标准的 Java EE 注释，因此您可能应该检查您在 Eclipse 中的设置。这是一个[如何](http://www.java2s.com/Tutorial/Java/0415__EJB3/InjectSessionContext.htm)使用`@Resource`.

我怀疑这可能不是您的解决方案，因为您似乎没有使用 EJB——解释了为什么 Eclipse 没有找到`@Resource`.

如果是这种情况，那么您将需要直接与事务交互——请参阅事务模板。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-07T00:41:33.177

您应该让 spring 注入事务管理器。然后你可以调用它的回滚方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-11-17T22:14:22.293

我有用`@Transactional`. 当验证失败并且我已经有一个实体附加到当前工作单元时，我会使用`sessionFactory.getCurrentSession().evict(entity)`它来确保没有任何内容写入数据库。这样我就不需要抛出异常。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-12-04T14:48:29.770

> 目前，当我遇到正确的条件时，我正在强制异常，但这很丑陋，我不喜欢它。

为什么丑？否则我会争辩。你有你`@Transactional`的公共方法，具有`rollbackFor`如下属性：

```
@Transactional(rollbackFor = Exception.class)
public void myMethod() throws IllegalStateException { 
```

然后如果你的方法变南了，你会抛出一个标准的 Java 异常，可能是：

```
throw new IllegalStateException("XXX"); 
```

这很漂亮，您使用现有的标准 Java 异常，仅使用 1-liner，框架执行回滚，仅此而已。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-10-07T12:00:29.650

是的，我们可以在使用@Transactional（类级别）时强制回滚而不会遇到异常。我们可以简单地抛出一个异常（任何合适的）。像

```
if(some condition matches){
 throw new DataIntegrityViolationException("Rollback Tnx.. Since ..." );
} 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2009-06-22T13:44:11.447

抛出异常并按照设计使用框架，否则不要使用声明性事务管理并遵循上述 skaffman 建议。把事情简单化。

# c++ - 系统范围的 api 钩子

> ID：832385
> 
> 赞同：2
> 
> 时间：2009-05-07T00:19:15.663
> 
> 标签：c++, windows

在 Windows NT 上执行系统范围用户模式（非内核模式）api 挂钩的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T01:16:30.470

通常，您会使用[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/ms644990(VS.85).aspx)来执行此操作。这允许您连接到当前桌面上的所有应用程序。

不过，还有其他选择。 [这篇 CodeProject 文章](http://www.codeproject.com/KB/system/hooksys.aspx)有很多关于挂钩机制的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T03:27:30.140

什么样的钩子？您可以通过钩子 api 拦截事件消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-05T16:23:13.420

1.  使用[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/ms644990(VS.85).aspx)将您的 dll 注入所有进程。
2.  使用 DLL_PROCESS_ATTACH 处理程序来迭代进程模块，并用注入的 dll 的处理程序地址填充另一个进程中模块的导入表。
3.  使用[共享部分](http://www.drdobbs.com/sharing-variables-between-win32-executab/184403303)来共享您的数据。

# acceptance-testing - 客户验收测试应该有多详细？

> ID：832403
> 
> 赞同：16
> 
> 时间：2009-05-07T00:26:29.110
> 
> 标签：acceptance-testing, user-acceptance-testing

这是一个测试描述，测试“创建新小部件”用例。

*   确认您可以在系统中输入新的小部件。

* * *

这是另一个测试描述，测试“创建新小部件”用例。

*   调出应用程序。

*   创建一个名为“A-008”的新小部件，描述为“Test Widget for Acceptance Test 3-45”。

*   确认小部件现在在最左侧的小部件树视图中可见。

*   在树视图中选择另一个小部件，然后再次选择小部件“A-008”。确认小部件显示中的值等于您输入的值。

*   删除小部件“A-008”并关闭应用程序

* * *

这是另一个测试描述，测试“创建新小部件”用例。

*   调出应用程序。
*   调出查看相同数据的应用程序的第二个实例。

*   在应用程序的第一个实例中，右键单击“Widgets”节点。在随后的上下文菜单中，激活“Create New Widget”菜单项。

*   应激活“新窗口小部件”窗口。将每个字段留空，然后按 OK 按钮。应该会出现一个消息框，说“请输入小部件名称”。按此消息框上的确定。

*   在“名称”字段中输入“A-008”。

*   将描述字段设置为*“美洲驼（Lama glama）是一种南美骆驼，被印加人和安第斯山脉的其他原住民广泛用作驮畜。在南美洲，美洲驼仍然被用作驮畜，以及用于生产纤维和肉类。成年全尺寸美洲驼的头顶高度在 5.5 英尺（1.6 米）到 6 英尺（1.8 米）之间。它们的体重大约在 280 磅之间（127 公斤）和 450 磅（204 公斤）。出生时，小羊驼（称为 cria）的体重在 20 磅（9 公斤）到 30 磅（14 公斤）之间。*
*   按确定按钮。应该会出现一个消息框，上面写着“描述不得超过 512 个字符”

*   将描述设置为“'); 从小部件中删除 1=1;” 在“描述”字段中。按确定按钮。
*   在最左边的树视图中，应该出现了一个名为“A-008”的新小部件。

*   在应用程序的第二个实例中激活一个窗口，并确认小部件“A-008”也已自动出现在该树视图中。

*   在应用程序的第一个实例中，右键单击“Widgets”节点。在随后的上下文菜单中，激活“Create New Widget”菜单项。应激活“新窗口小部件”窗口。

*   将名称设置为“A-008”，然后按 OK。必须出现一个消息框，显示“具有此名称的小部件已存在。请选择另一个小部件名称”。

*   按此消息框上的确定按钮，然后按取消按钮退出“创建小部件”对话框。
*   在第二个实例中显示小部件“A-008”的小部件页面。
*   首先，按“撤消”菜单项
*   确认第二个实例现在正在显示起始页。
*   .................ETC..............

每个示例测试您可以创建一个新的小部件。在第三个测试中，我作为一个有经验的程序员测试了这个功能，想着“好吧，所有可能出现错误的地方都在哪里”，并检查了每一个。第三个是否适合客户验收测试？

“太全面”有多全面？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-07T00:49:59.333

用户验收测试用例应该详细而简单，但不如您的第三个示例那么详细。**验收测试**是为了确保**客户得到他们同意的东西**。如果你简单地说，“点击这个然后点击那个，等等，等等……”这更像是一个功能测试。您不是在引导用户验证功能是否满足验收测试中列出的测试用例。您只是要求他们点击您可以简单地自动化的测试。

用户验收测试应该更接近于“创建小部件、验证它是否出现、删除小部件等”。这也将鼓励用户寻找单个功能并（作为副作用）清除您可能忽略的任何可用性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T00:47:17.123

我认为你的验收测试应该主要是好的路径测试。有时，“好”路径将确保正确处理错误。您应该进行其他测试来验证您的安全性并练习极端情况，但验收测试更多的是确保已构建正确的应用程序，而不是确保正确处理每个可能的条件。如果您有良好的单元测试并使用最佳实践，那么我认为良好的路径测试是完全合适的。

例如，如果我使用了强制参数化查询或手动生成查询的技术（我没有），我不一定会测试我在 SQL 注入方面没有问题，单元测试会验证这一点注入失败。解决单元测试中的极端情况使得在验收测试中关注它们变得不那么重要。如果您需要向客户提供一些示例，说明您的后端实现解决了他们的担忧，那么一定要这样做，但我不会测试我知道我已经通过其他测试充分解决的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-06-10T10:12:38.007

这对我来说更像是一个功能测试计划（即*内部测试*）

验收测试通常是指您向客户展示的内容。我想你可以给客户一个这样的测试——不过祝你好运

对于用户验收测试，我更喜欢一种非常简单的格式（当然，这可能不适用于航天飞机软件或银行业务）。它适用于中小型 Web 项目

关键是；制作一张表格，列出系统中的每一页，而不是制作一列供客户初始化，另一列供您自己初始化。你和客户坐了几个小时，经历了一切。如果他们对某个页面感到满意，他们会在该页面上签字

有关模板的完整详细信息，请参阅：[用户验收测试](http://pm4web.blogspot.com/2008/07/user-acceptance-testing.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T00:32:51.667

在一个完美的世界里，测试描述应该是：

*   确认所有自动化测试成功运行完成

用例中的每条路径都会有一个自动化测试。

任何形式的脚本化手动测试都容易出错并遗漏错误，更不用说劳动密集型了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-07T00:51:23.667

你的规格说明了什么？如果它涵盖了您的第三个测试用例中概述的所有内容，那么作为您的客户，为什么我不想看到您的产品符合整个规范？

如果您没有明确的需求集（*facepalm*），那么将您的测试分解为模块：资格（与客户）、集成（开发人员测试模块一起工作）和开发（开发人员测试单个模块）。

尽可能自动化 DT&E（例如，使用单元测试来测试 SQL 注入、字符串长度溢出等）。这应该很容易做到，因为您的后端应该与与之通信的 GUI 分开（对吗？）。您在第三个测试用例中概述的大多数 GUI 内容都可以作为集成测试的一部分进行介绍（因为您实际上是在测试后端和 GUI 之间的集成）。

如果客户可以查看您的单元测试、集成测试程序和结果，那么资格测试将非常容易和轻松。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T00:55:33.283

他们应该测试正常用例（而不是特殊用例）。但是如果他们测试异常的，那就太酷了！

验收测试不能太详细。他们测试得越多，他们就越喜欢最终产品。

# php - 如何检查是否存在深层数组值

> ID：832408
> 
> 赞同：19
> 
> 时间：2009-05-07T00:29:19.757
> 
> 标签：php

我想快速识别数组中是否存在键，以避免引发错误。

例如，我可能有一个这样的数组

```
$arr['f']['b']['g'] = array( 'a', 'b', 'c', ) ; 
```

或者数组可能在 $arr['f']['b'] 中根本没有任何变量：

```
$arr['f']['x'] = array() ; 
```

在引用 $arr['f']['b']['g'] 的（可能）内容时，如何避免在测试中重复？

```
if ( isset( $arr['f'] ) &&
     isset( $arr['f']['b'] ) &&
     isset( $arr['f']['b']['g'] ) /* ... yawn */ ) {
  /* blah */
} 
```

必须有一种更简洁的方法来识别我引用的给定数组值是否存在？必须测试我所寻求的价值及其所有祖先的存在似乎太冗长了。在某些情况下，这是有道理的，是的，但不是全部。

例如：它可能代表，比如说，用户->会话->购物车，我想要一种方法来快速检查*购物车*是否有条目，而不必检查每个*用户*是否存在，然后是*会话*是否存在，那么*购物车*是否存在，然后...

编辑：我不是在寻找“是否存在键名为'g'的数组值”，因为“是否存在祖先为 f => b => g 的数组值”。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-05-07T00:41:05.050

以下将按您的预期工作：

```
if(isset($a['a']['b']['c'])) 
```

如果这些元素中的任何一个未定义，`isset()`则将返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T00:31:54.463

在[array_search](http://is.php.net/manual/en/function.array-search.php)的评论中，他们有用于多维搜索的代码。它可能会有所帮助。

# sql - 多次更新

> ID：832421
> 
> 赞同：0
> 
> 时间：2009-05-07T00:34:54.253
> 
> 标签：sql, mysql

我正在尝试更新我的 php 脚本中的两个查询，但我无法让它工作。代码是：

UPDATE table SET price = '14.50' WHERE type LIKE 'finger', 'Knuckle' AND quantity <=50;

好的，我修复了 WHERE 子句，但我不明白我需要对现在出现错误的“14.50”部分进行哪些更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-07T00:36:09.257

```
UPDATE table SET price = '14.50'
WHERE type IN('finger', 'Knuckle') AND quantity <=50; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T00:35:41.070

```
UPDATE table SET price = '14.50' WHERE (type LIKE 'finger' OR type LIKE 'Knuckle') AND quantity <=50; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T00:49:13.250

你可能还想要

```
update table set price = '14.50'
where (type like '%finger%' or type like '%knuckle%')
and quantity <= 50 
```

这将匹配包含手指或指关节的任何字符串。

# svn - 通过 MacPorts 安装后在 Mac OS X Leopard 上找不到 git-svn

> ID：832427
> 
> 赞同：14
> 
> 时间：2009-05-07T00:37:42.700
> 
> 标签：svn, git, macos, git-svn, osx-leopard

好的，我确定有人遇到过这个问题，可以帮助我。

我正在尝试让 git-svn 在 OSX Leopard (10.5.6) 上工作。使用 MacPorts 我已经运行了安装： sudo port install git-core +svn

但是，git-svn 没有安装，不可用。在漫长的依赖安装过程中没有出现任何错误，所以我很茫然。

想法将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-07T00:53:39.277

至少在我的安装中，我必须调用它`git svn <cmd>`而不是`git-svn <cmd>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T00:47:33.613

这与我使用的安装相同，效果很好。你添加`/opt/local/bin`到你的`PATH`?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-04-28T21:14:45.273

如果通过 macports 安装，git-svn 位于 /opt/local/libexex/git-core/。将 /opt/local/libexex/git-core 添加到您的路径中，您应该一切顺利。

# wpf - 序列化 WPF 控件时出现异常

> ID：832429
> 
> 赞同：0
> 
> 时间：2009-05-07T00:38:09.610
> 
> 标签：wpf, xaml, xslt, serialization, xml-serialization

我有一个应用程序（约会管理器），它允许用户在每次单击按钮时在堆栈面板中创建用户控件，并且用户可以将数据输入到用户控件中。到现在为止还挺好。

我用 XamlWriter.Save() 序列化了堆栈面板。但是，当我下次尝试以 XamlReader.Load() 启动应用程序时再次加载它时，出现以下异常：

> “System.Windows.Markup.XamlParseException：无法在元素'Border'上设置名称属性值'border1'。'Border'在元素'Item'的范围内，当它在另一个范围中定义时已经注册了一个名称。第 '4' 行位置 '43'。”

我在 google 中找到了一种解决方法，涉及删除似乎对我没有用的所有控件名称。

现在你可能会问，为什么你必须使用 Xml-Serialisation。问题是，我们必须为我们的 xml 课程创建一个科学项目，其中至少必须使用 xml-serialisation 和 xslt，所以我认为这将是一个好主意 :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T00:52:13.587

我给你的一条建议是不要序列化 ​​UI，而是序列化底层数据。

例如，创建一个名为 Data 的类，它表示存储在用户控件中的数据。确保这个类用 [Serializable] 属性装饰。使用 wpf 的数据绑定功能来管理数据对象 CRUD 操作。此时，您可以使用 XmlSerializer 序列化和反序列化您的数据对象。反序列化时，将用户控件绑定到数据对象就完成了。

希望我有时间写一个快速示例。

希望这可以帮助

# visual-studio-2008 - 在 Visual Studio 2008 中自动格式化 web.config

> ID：832441
> 
> 赞同：2
> 
> 时间：2009-05-07T00:47:38.777
> 
> 标签：visual-studio-2008, ms-word, web-config, autoformatting

我目前正在使用 Microsoft Word 2007 创建 API 文档，我需要用户从文档中剪切并粘贴一个部分到他们的 web.config 中。

为了便于阅读，我对 Microsoft Word 文档中的部分进行了格式化，当我将格式化的部分粘贴到 web.config 中时，它保持了 Microsoft Word 文档的样式。

用户有没有办法将部分自动格式化为他们喜欢的 web.config 布局？

**编辑**

文档在 Microsoft Word 中的格式如下：

```
<system.serviceModel>
<bindings>
<basicHttpBinding>
<binding name="basicEndPoint">
</binding>
</basicHttpBinding>
</bindings>
</system.serviceModel> 
```

当用户将 word 文档中的部分添加到他们的 web.config 中时，我希望它与他们首选的格式样式相匹配。没有换行符，不同的缩进等。

**编辑1：**

我从配置部分删除了所有分页符，并使用`Ctrl`**+**`K` , `Ctrl`**+**`D`来格式化整个文档。我更新了代码示例以反映 Word 文档中的内容。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-07T01:44:09.110

您始终可以建议您的用户只需按 Ctrl+K、Ctrl+D，这将在粘贴后重新格式化他们的 web.config。（从菜单，编辑/高级/格式化文档）

Visual Studio 在保持 XML 文件格式良好方面做得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T01:44:29.267

您可能需要小心这一点 - Word 并非旨在处理代码，并且问题不会因空格格式而停止。您是否尝试过调试由包含破折号而不是连字符的参数引起的问题？

格式本身取决于用于编辑 web.config 的工具。假设 Visual Studio，粘贴的代码预计会很难看，但可以使用 ctrl-kd 轻松修复

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-07T01:05:25.520

我不太明白你的问题，但是从 Microsoft Word 2007、记事本和 Visual Studio 复制和粘贴，你可以从其中任何一个复制到另一个，你仍然可以保持格式（虽然记事本会失去颜色）。

一个建议，你为什么不向他们提供一个 web.config 文件，该文件包含所有可能的必要配置，评论它们并在你的文档中描述它们。换句话说，第 X 节通过取消注释第 10-12 行并将 K 的值编辑为他们需要的数字或路径等来定义这样做。

# apache-flex - Flex 和 Cairngorm 错误：C0001E：只能实例化一个 ServiceLocator 实例

> ID：832445
> 
> 赞同：0
> 
> 时间：2009-05-07T00:49:14.547
> 
> 标签：apache-flex, cairngorm, service-locator

我是 Flex 和 Cairngorm 的新手。在使用 ServiceLocator 时，我确实遇到了问题：错误：C0001E：只能实例化一个 ServiceLocator 实例。

我的代码是这样的：

在 Serives.mxml 中：

```
<cairngorm:ServiceLocator xmlns:mx="http://www.adobe.com/2006/mxml"
xmlns:cairngorm="com.adobe.cairngorm.business.*">
<mx:HTTPService id="statistServ"
    url="rooms.xml"
    showBusyCursor="true"
    method="POST"
    resultFormat="array"/> 
```

在 Delegate.as 中，我有片段：

```
this.service = ServiceLocator.getInstance().getHTTPService(”statistServ”); 
```

在 Main.xml 中，片段如下：

```
<business:Service id="service" /> 
```

当我加载需要 httpservice 的某个模块的第二个实例时，就会弹出这个美妙的小错误消息。

有没有办法在不切换到另一个框架的情况下解决这个问题？

最良好的祝愿，

Shuo（来自中国）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T02:27:26.790

您看到的错误来自 Cairngorm 对单例模式的实现。它阻止您创建 ServiceLocator 的第二个实例，因为该框架要求只有一个。加载模块的第二个实例时，您的代码也会尝试创建 ServiceLocator 的第二个实例，而它应该使用 getInstance() （或根本没有获取实例）。

通过在 Main.mxml 中声明服务标记，您已经创建了唯一的 ServiceLocator 实例，并且无法在其他任何地方声明或更新它。如果 Main.mxml 是您尝试多次实例化的模块的一部分，那么这就是您的问题所在。如果不是，我无法根据上面的有限示例判断问题出在代码中的哪个位置，但它应该在模块中的某个位置。

回复评论：

没问题。您可以通过在 ActionScript 而不是 MXML 中声明您的服务来轻松解决您的问题。通过在 MXML 中声明一个标签，您总是在创建相应的 AS 类的实例，而您却想检索单例的唯一实例。为此，请在模块 MXML 中包含以下 AS 代码：

```
var service:Service = Service(ServiceLocator.getInstance()); 
```

这基本上等同于您尝试使用 MXML 标记执行的操作，除了不创建新的服务实例。

但是，您仍然需要在某处实例化服务。为此，请将 Service MXML 标记放在正在加载模块的应用程序的主 MXML 中。

# wpf - 重新启动 WPF 故事板

> ID：832448
> 
> 赞同：8
> 
> 时间：2009-05-07T00:50:42.513
> 
> 标签：wpf, storyboard

从.net代码停止和重新启动情节提要的正确方法是什么？

我正在努力 ...

```
myStory.Stop(this); 
```

期望随后调用 .Begin(this); 将从零处的时间线重新开始，但故事板会在它停止的地方重新开始。

我试过了

```
.Remove(this); 
```

我试过了

```
.Seek(TimeSpan.Zero); 
```

这也没有用。

更多细节......这是我的故事板示例。

```
<Storyboard x:Key="overlay">
    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="textone" Storyboard.TargetProperty="(UIElement.Opacity)">
        <SplineDoubleKeyFrame KeyTime="00:00:03.0" Value="0"/>
        <SplineDoubleKeyFrame KeyTime="00:00:03.0" Value="1"/>
        <SplineDoubleKeyFrame KeyTime="00:00:06.0" Value="1"/>
        <SplineDoubleKeyFrame KeyTime="00:00:06.0" Value="0"/>
    </DoubleAnimationUsingKeyFrames>
    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="texttwo" Storyboard.TargetProperty="(UIElement.Opacity)">
        <SplineDoubleKeyFrame KeyTime="00:00:07.0" Value="0"/>
        <SplineDoubleKeyFrame KeyTime="00:00:07.0" Value="1"/>
        <SplineDoubleKeyFrame KeyTime="00:00:10.0" Value="1"/>
        <SplineDoubleKeyFrame KeyTime="00:00:10.0" Value="0"/>
    </DoubleAnimationUsingKeyFrames>
</Storyboard> 
```

因此 textone 中的文本运行，如果您关闭屏幕并快速返回屏幕，texttwo 实际上会在新启动的故事板上播放。所以最初的（从第一个屏幕）故事板仍然在播放，即使我已经删除并停止了它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-07T20:57:17.887

使用 Storyboard.Seek(TimeSpan.Zero) 怎么样？与在 Stream 中搜索类似，这应该会让您回到动画的开头。

我评论说您还应该确保 IsControllable 属性设置为 true。记住这一点！

[Storyboard.Seek 方法](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.storyboard.seek.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-07T01:06:40.150

您需要在调用 myStory.Begin(this) 之前执行 myStory.Remove(this) 以使其从头开始。这是因为调用 Storyboard::Stop 只会停止动画时钟，但会保持原样。随后对 Begin 的调用将仅充当简历。我同意这有点违反直觉，但是如果您阅读文档[ClockController::Stop](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.clockcontroller.stop.aspx)，您将在备注中看到以下内容：

> 此方法将目标时钟的 CurrentState 更改为 Stopped。
> 
> 可以使用 Begin、Seek 或 SeekAlignedToLastTick 方法重新启动已停止的时钟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T20:23:20.330

对不起斯科特，我没注意。您是否尝试在情节提要上设置 FillBehavior。将 FillBehavior 设置为 Stop 会重置动画。不知道为什么停止不这样做......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T04:22:39.307

```
<Storyboard x:Key="overlay">
<DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="textone" Storyboard.TargetProperty="(UIElement.Opacity)">
    <SplineDoubleKeyFrame KeyTime="00:00:03.0" Value="0"/>
    <SplineDoubleKeyFrame KeyTime="00:00:03.0" Value="1"/>
    <SplineDoubleKeyFrame KeyTime="00:00:06.0" Value="1"/>
    <SplineDoubleKeyFrame KeyTime="00:00:06.0" Value="0"/>
</DoubleAnimationUsingKeyFrames>
<DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="texttwo" Storyboard.TargetProperty="(UIElement.Opacity)">
    <SplineDoubleKeyFrame KeyTime="00:00:07.0" Value="0"/>
    <SplineDoubleKeyFrame KeyTime="00:00:07.0" Value="1"/>
    <SplineDoubleKeyFrame KeyTime="00:00:10.0" Value="1"/>
    <SplineDoubleKeyFrame KeyTime="00:00:10.0" Value="0"/>
</DoubleAnimationUsingKeyFrames> 
```

```
 using System.Windows.Media.Animation; 
```

然后创建新的故事板

```
 Storyboard storyboard_name = (Storyboard)(FindResource("overlay")); 
 storyboard_name.Begin(); 
```

故事板“storyboard_name”将开始。

如果你想停止故事板。请尝试这样

```
storyboard_name.Stop(); 
```

如果你想删除情节提要。请尝试这样

```
storyboard_name.Remove(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-01-21T19:13:28.757

其他细节可以是：

this.MyAnimation.FillBehavior = FillBehavior.Stop;

# programming-languages - 教授编程和形式化方法

> ID：832450
> 
> 赞同：22
> 
> 时间：2009-05-07T00:51:13.527
> 
> 标签：programming-languages, dijkstra, formal-methods

这是一个奇怪的问题。我正在写一本关于学习使用正式方法进行编程的书，并且我将把它针对具有一些编程经验的人。这个想法是教他们成为高质量的程序员。

基本符号将来自 Dijkstra 的[Discipline of Programming](https://rads.stackoverflow.com/amzn/click/com/013215871X)，以及一些并发和通信扩展。

与 EWD 不同，我希望我的学生最终能够编写出实际的可执行程序。这意味着在某些时候将 EWD 符号转换为其他语言。当我第一次开始进行正式编程时，我的目标是 C，但你最终会编写很多管道，加上处理指针等的所有复杂性。Ruby 显然是一个可能的目标，Scheme 或 Lisp 也是如此。但也有各种功能语言；因为我对并发特别感兴趣，所以 Erlang 似乎是一种可能性。

所以，最后，这是我的问题：我应该教我的读者使用什么语言来定位他们正式开发的程序？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-07T03:35:40.607

查理，

我一直将 Dijkstra 的杰作与一个编程模型联系在一起，在这个模型中，循环和数组占据了中心舞台。如果您坚持使用 Dijkstra（例如，计算最弱的先决条件），我认为您会发现函数式语言不太适合。在为使用循环和数组进行命令式编程提供良好支持的流行语言中，Python 的额外包袱可能最少。

这并不是说函数式语言不适合形式化方法——它们非常适合——但风格与 Dijkstra 完全不同。首选方法强调计算证明；请参阅 Richard Bird 的关于解决数独的论文（这很繁重）或 Richard Bird 和 Phil Wadler 的教科书。

对于并发，很大程度上取决于您相信哪种并发模型（以及哪种形式方法）。John Reppy 的并发 ML 是一个漂亮的消息传递模型。Erlang 也有一个很好的干净的限制模型。另一方面，使用锁和临界区进行编程非常困难，在这种情况下，形式化方法可能会带来更多好处。

另外两个可能对您的背景研究感兴趣的评论：

*   我遇到的唯一一位将 Dijkstra 的方法应用于实际系统的程序员是 Greg Nelson，他在 Modula-3 工作。（Greg 和 Mark Manasse 一起编写了 Trestle 窗口系统。） Modula-3 是一种非常好的语言，Digital 让其因无能和无能而死。Greg 有一篇关于 Dijkstra 微积分扩展的不错的 TOPLAS 论文。

*   Gerard Holzmann 的建模语言[SPIN](http://spinroot.com/spin/whatispin.html)直接基于 Dijkstra 的受保护命令语言，它还支持并发。它的目的是模型检查，而不是编程，并且有一些特质，但与形式化方法有很强的联系，能够对你的断言进行模型检查真的很棒。任何对形式化方法感兴趣的人都想去看看。

（编辑：这是[Greg Nelson](http://www.hpl.hp.com/techreports/Compaq-DEC/SRC-RR-16.pdf)论文的链接，或其中之一。- CRM）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-07T02:12:51.710

忽略显而易见的你[最喜欢的](https://stackoverflow.com/questions/14205/whats-your-favourite-programming-language-and-its-killer-feature) [编程](https://stackoverflow.com/questions/273108/which-programming-languages-have-helped-you-to-understand-programming-better) [语言](https://stackoverflow.com/questions/4769/what-is-the-easiest-language-to-start-with)答案是什么，我可以看到两个有用的答案：

一方面，您试图向假定为中级程序员的人演示方法。如果您选择一种语言并祝福它作为您的书籍语言，您可能会疏远那些出于某种原因不喜欢该语言的潜在读者。由于您正在演示方法，因此您可以奢侈地使用恰好能简洁地说明您的观点的语言片段。例如，可用于演示 RIIA 的唯一语言可能是 C++，但这种语言在演示如何执行源代码分析方面非常糟糕。Scheme 是源代码分析的理想选择，但在探索强类型的优点（和弱点）方面没有提供太多选择。使用多种语言。

另一方面，由于您主要掌握编程方法，因此我不完全确定您是否需要任何真正的语言。一个定义明确的符号同样好，它会迫使你的读者关注你正在表达的观点，而不是一种或另一种语言的表面细节。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-07T01:08:52.767

我是在 Lisp 和 Scheme 上长大的，我喜欢它们。我认为它们是从头开始学习的好语言。但是，我不确定有一些编程经验的人会接受这些语言。标题中包含 Scheme 的书不会在亚马逊上获得很多点击。:)

C# 是一门非常容易学习的语言，它拥有快速深入探讨并发等主题所需的所有基础知识。它具有更多的适用性，因为您也可以针对 OO 和 Web 概念。它也相当受欢迎，你会让公司为他们的员工支付书籍，这些书籍总是有利于销售（“Be a Kick Ass C# Programmer”在费用报销单上比“Concurrency in Modern Lisp”走得更远）。

F# 是一种有趣的语言。它具有 Lisp 或 Scheme 的功能美感（不完全是，但差不多），它使您能够深入研究 OOP 主题，如果您想为 UI 内容增添趣味，还可以连接到 .NET Framework 中。但是，现在，它是模糊的。

我不能和 Ruby 说话，所以就个人而言，我会硬着头皮选择 C#。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-15T16:51:23.017

老实说，我不能为此推荐 Ruby。当我在我的商业世界中进行日常编程时，我非常喜欢它，当然比 C 或 Java 更喜欢它。但是它的语义是如此不明确，以至于我对它的信任度不如 C 的一半，尽管我可能会花几个小时来争论一个声明并查阅取代 K&R 的那本厚得多的白皮书，但我还是在end 相当确信，如果我有一个符合标准的编译器（是的，我知道，我是一个梦想家，但在这里和我一起工作）我知道另一边会发生什么。

Ruby 在很多方面都很棒，但就任何正式的事情而言，这对双胞胎永远不会相遇。

我自己倾向于投票给 Haskell，因为每次我转身时，我都会惊讶于该语言定义中的一切意义。（虽然承认仅仅过了一年左右，但我敢肯定我什至没有探索过 Haskell 98 的一半角落。）

我也理解 Dikjstra 与功能性的东西；回去[阅读他的论文](https://stackoverflow.com/questions/961460/)，他非常处于一个命令式的世界中；我没有资格说他是否真的走错了路。也许我只是被他的写作如此之好所震撼，就像他的想法一样。但这似乎让他很高兴，那么使用[Algol 60](http://www.cs.utexas.edu/users/EWD/transcriptions/EWD12xx/EWD1284.html)怎么样？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-07T01:03:35.433

这是个好主意。我认为 Scheme 是一个不错的选择，因为它允许人们将不同的抽象（以库的形式）付诸实践，而只需要最少的基本要素。从方案转换为 PVS 等验证系统也很容易（[http://pvs.csl.sri.com/](http://pvs.csl.sri.com/)）

干杯

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-07T01:46:29.150

我认为你自己应该对你的书所使用的语言有相当的经验，或者一个精通审查你的代码的人。

就个人而言，我会使用 Common Lisp，因为我对此很熟悉，而且它是实现任何概念的好语言。其他选项可能是 Erlang、Haskell、Ruby 或 Python，甚至可能是一些 ML 方言。我对 C 系列（包括 C# 和 Java）有偏见，他们似乎坚持对概念的较低层次的思考。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-02-10T01:01:55.867

有不少大学使用 Perfect Developer 来教授形式化方法（免责声明：我与此产品有关）。它是围绕一种用于表达规范、数据细化和算法的语言而构建的。它有一个用于验证的自动定理证明器，以及一个可以生成 C++、C# 和 Java 的代码生成器。PD 的设计非常受“A Discipline of Programming”的启发，但是我们发现这种表示法对于大型系统来说相当不切实际，因此这种表示法与 Dijktra 的有些不同。

# c# - 共享点编程的好坏程度如何？

> ID：832465
> 
> 赞同：53
> 
> 时间：2009-05-07T00:58:29.797
> 
> 标签：c#, .net, sharepoint

我今天收到了一份 SharePoint 开发人员职位的工作机会。我的一个朋友告诉我，sharepoint 是一团糟，而不是我想做的事情。

您在使用 SharePoint 方面有哪些经验/想法？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2009-05-07T04:36:12.333

我要在这里逆势而上。我将 SharePoint 视为一个开发平台 - 简单明了。它利用了 IIS、ASP.NET、SQL Server 和 Windows 工作流等其他技术，因此我不必重新发明轮子。它让我专注于解决业务问题，而不是担心管道和系统级代码。

不要误会我的意思，SharePoint 确实自带包袱，但如果您想解决现实世界的业务问题而不仅仅是 sling 代码，它可以提供很多东西。我一直对 WSSv3 平台的丰富程度感到惊讶——它是免费的。

如果您希望自己与 Microsoft 技术保持一致，那么您需要意识到 SharePoint 将继续存在，并将继续变得更好，变得更加普遍。当前版本（v3 - WSSv3 / MOSS 2007）缺乏 AJAX、社交网络和其他功能/技术。v4 版本指日可待，势必会在这些方面有所改进。

关于我在这个帖子中读到的一些负面信息：

*   我编写了使用 AJAX 工具包的 SharePoint 中的 Web 部件，我的同事也是如此。一位同事对 Silverlight Web 部件非常活跃。

*   是的，您确实倾向于在 Windows Server 2003/2008 上进行开发。这不会打扰我，我根本不会在安装和配置上花费太多时间。我有时会在开发环境中使用虚拟机，并且同意这有时会很痛苦。

然而，我能做的是配置一些东西而不是开发。授权，完成；供应，完成；行级安全，完成；基本的 UI CRUD，完成；部署到多个前端，完成；搜索，完成。现在我有时间专注于解决业务问题。

如果您要进行 SharePoint 开发，则需要从正确的角度开始。我强烈推荐[Inside Microsoft Windows SharePoint Server 3.0](https://rads.stackoverflow.com/amzn/click/com/0735623201)来了解开发人员可以/应该在 SharePoint 中做什么。

值得一提的是，我从事 Unix 和 Windows 的开发工作已超过 20 年，使用多种不同的语言和技术。自 SharePoint v3 处于测试阶段以来，我一直专注于它，并且对我选择的方向感到满意。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2009-05-07T01:33:43.300

我对所有积极的回应感到惊讶。让我问一下，你介意在代码中创建你的标记吗？就像在 HtmlWriter.BeginTag("br") 中一样（或者其他什么，很抱歉不知道 HtmlWriter api）。这被认为是创建可再分发 Web 部件的最佳实践。

Ajax 工具包怎么样？哎呀，越界了。由于标头中缺少文档类型，因此无法正常工作。

您的笔记本电脑运行的是 Windows Server 2003，对吗？因为当然 Sharepoint 不会在其他任何东西上运行。

我理解人们捍卫他们的平台，但作为一个不得不在 Sharepoint 中做一些工作但不再做的人......让我说，为 Sharepoint 开发是我一生中最糟糕的开发经历。现在，到目前为止，我在选择时一直非常谨慎，所以这不是最糟糕的经历，但它就在那里。或者，换一种说法，我更喜欢使用 PHP 而不是 Sharepoint。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2009-05-07T01:53:16.903

几年前，我的小型网上商店曾短暂接受过 SharePoint。我们做了咨询、定制、培训等等。确实，你得到了很多开箱即用的东西，我知道它已经改进了很多；但总体体验非常消极，我们从未回头。

1.  我们对其进行培训的用户绝对讨厌用户界面，而且无法修复其中的问题非常令人沮丧。
2.  自定义 Sharepoint 的视觉呈现并不适合胆小的人。在 Microsoft 编写 CSS 的人的无能简直令人震惊。我仍然做噩梦。
3.  无论出于何种原因，他们不只是将其设计为一个普通的 Web 应用程序，这使得设置开发环境成为一件令人头疼的事情。

一般来说，SharePoint 在很多方面都未能兑现其承诺，这简直令人费解：看似不费吹灰之力的事情需要各种自定义开发。

我们已经回到为客户推出我们自己的解决方案；他们对这种安排更满意，我们也是。

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2009-05-08T08:32:09.697

好==============================[=]===不好

*   设置/管理/更新很痛苦
*   开发/调试很痛苦
*   文档是个笑话

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2010-06-22T08:50:26.287

Sharepoint 是一个巨大的混乱。

1.  生成的标记是我见过的最差的。
2.  它具有同样糟糕的 CSS 与该标记。
3.  上帝怜悯必须重新设计或扩展共享点应用程序的客户端功能的灵魂。
4.  整个平台与优秀的建筑设计背道而驰。
5.  数据完整性是平台的一个大问题，因为没有交易。
6.  API 出人意料地出现了错误，在使用 API 后不到一个小时就会遇到错误，这些错误会让您在网络上搜索并进一步加剧数据完整性问题。
7.  在平台上进行适当的单元测试非常困难。
8.  该平台很大，并且塞满了“一切”，但是 Sharepoint 所做的一切都做得很差。您可以轻松找到其他框架或平台，这些框架或平台可以更好地完成工作，并且更适合您或您的客户的要求。
9.  学习曲线很陡峭，如果平台（尤其是 API）的文档很好的话，那会很好。
10.  浏览器兼容性，Sharepoint 仅适用于 IE（归因于其可怕的标记、CSS 和 javascript）。

不得不说，平台赚钱，但更多的是一种赚钱的方案。Sharepoint 中的开发人员技能很少，拥有这些技能的人的报酬很高。客户为 Sharepoint 定制开发和开发公司付出了沉重的代价，因此尽最大努力让他们的客户相信 Sharepoint 是一切的完美选择。

我认为，Sharepoint 不是一个开发平台，而是一个赚钱的平台。

编辑：我也忘了加 11。它是一个你从未见过的资源猪。

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2009-05-11T14:55:37.710

我发现，即使是最新版本，SharePoint 最大的挫折是缺乏对文档的关注。有很多记录不充分的 API 调用。刚刚发布这个答案，我就能感觉到我的血压在上升。

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2009-05-08T09:13:33.717

我喜欢 Kirk 自 2003 测试版以来也使用过 SharePoint，并且我仍然喜欢它。您当然可以总是希望一些事情得到更好的考虑 - 但我想您几乎可以对任何企业产品这么说。对我来说，在 SharePoint 平台之上构建解决方案时，积极因素远远超过消极因素。

让我作为开发人员与您分享关于 SharePoint 的 5 大好处和 5 大坏事：

**关于 SharePoint 的 5 大优点**

1.  它是一个综合平台。使开发和部署功能齐全、标准化、可扩展和高可用性的 Web 解决方案（如企业 Intranet 和 Extranet）的速度大大加快。
2.  它有巨大的动力。微软继续改进它，每一次发布都变得更好，社区很棒并且不断增长，在线资源很好并且不断增长，越来越多的书籍出来了，许多很棒的免费附加组件和优秀的第三方产品都出现了时间，也有很棒的会议要去。
3.  非常模块化的平台，您可以在其中将自己的东西打包成解决方案、功能、Web 部件、模板、内容类型等。
4.  它利用标准的 Microsoft 技术，如 .NET、ASP.NET、IIS 和 SQL Server。因此，您不会被一种特定的技能所困。
5.  在当前的就业市场中，使用 .NET + SharePoint 技能比仅使用 .NET 技能要好得多。这就像说您有 SAP 经验或者是 BI 专家。

**关于 SharePoint 的 5 大坏事**

1.  陡峭的学习曲线。成为一名优秀的 SharePoint 开发人员至少需要两年时间 - 即使您已经精通 C# 和 .NET。您将需要第一年来了解平台中的所有概念，然后再过一年才能真正熟悉它们。
2.  开发工具不足。Visual Studio 对 SharePoint 几乎一无所知 - 但我听说这将在 VS 2010 中发生重大变化 :-)
3.  并非总是可以使用最新和最酷的 .NET 功能。SharePoint 总是需要几年的时间才能采用 .NET 平台团队提供的最新最好的东西。想想 Linq 和 AJAX。我很想知道 SharePoint 2010 是否/何时支持 .NET 4.0。
4.  通常需要找到解决平台中古怪问题/不一致的方法。
5.  更改 API。好吧，至少从 SPS 2003 迁移到 MOSS 2007 很痛苦。我希望向 SharePoint 2010 的过渡会更加顺利。

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2009-05-07T02:03:13.230

3 个月前，我对 SharePoint 一无所知。从那以后，我不得不为我公司的新支持站点创建几个自定义 Web 部件，我必须同意你朋友的意见，这是一团糟。

起初，我印象深刻的是你可以在没有任何编码的情况下使用该平台做多少事情。但是让我的东西正常工作令人沮丧。我尝试合并我之前编写的用户控件，该控件在常规 Web 应用程序中运行良好，但关键部分根本无法在 SharePoint 中运行，原因我仍然无法理解。我设法找到了解决方法，但在此过程中损失了两周。

同样令人沮丧的是，开发环境必须是一台实际运行 SharePoint 的机器，它必须在 Windows 2003/2008 下运行。我必须在我现有的系统上设置一个虚拟机，这没什么大不了的，但这是你必须克服的另一个障碍。

总而言之，对于您要尝试做的事情来说，这似乎太令人困惑了。我同意将大量时间用于安装、配置和部署而不是实际开发的观点。也许2010版本会更好。这当然不是我期待使用的产品。

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2011-11-10T23:11:09.553

我进入了一个即将结束的 SharePoint 项目 3 个月。

我每天都在查看错误日志，试图弄清楚为什么各种 SharePoint 组件不能像 MS 所说的那样运行。开发行业的许多人认为文档是“……我见过的最糟糕的”。祝你在 MS 相关网站上找到任何有用的东西。

许多“社交功能”依赖于 UPS（用户配置文件服务），这是出了名的漏洞百出且难以配置；谷歌它，你会看到。在我的项目中，多个开发人员花了数周时间和 EE 博士才让 UPS 正常工作。所有这一切都是为了一个网络服务！由于持续存在的稳定性问题，该公司最终聘请了一位宣称“我相信这个平台！”的 SharePoint 作者。是，对。我想知道他能得到多少报酬才能这么说。但是请放心，随着每次新的 MS 累积更新，UPS 越来越接近可行，至少对于开发环境而言是这样。当它完全不起作用时，它已经从最初的版本中走了很长一段路。

您将花费大量时间配置 Active Directory、IIS、ForeFront 身份管理服务、SQLServer 和 Server2008 设置。请记住，这些设置中的大多数会相互冲突，因此请准备好花大量时间在 SharePoint 博客上寻找解决方法。事实上，大多数 SharePoint 博客都致力于解决方法和黑客攻击，只是为了让 SharePoint 工作或至少将其提升到基本网站的功能。我认为具有预建功能的平台的全部意义在于减少您的工作量，而不是增加它。如果您喜欢编写代码而不是玩管理员或博客侦探，那么这不是适合您的平台。

正如其他地方所提到的，开发要求是疯狂的。SharePoint Server（产品的完整版）可以/应该只能在 Windows 服务器上运行。对我来说，这意味着虚拟机。8GB 内存真的是你可以逃脱的最低限度。我最终购买了核心 i5、16GB 和 SSD，只是为了构建相当快的开发环境。这是网络开发，而不是视频编辑。

如果您和/或您的团队有幸在生产环境中使 SharePoint 稍微稳定，最终用户将被视为 5 秒的页面加载、几乎任何类型的请求的缓慢响应时间，并且可能是最近最不直观的 UI计算历史。SharePoint 的主要吸引力之一是您可以通过添加各种类型的 Web 部件或使用 SharePoint Designer 来实际更改页面结构来动态编辑网页。这会给有经验的开发人员带来很多麻烦，因此我认为此功能针对的非技术用户将会死掉。他们将遇到一系列 Correlation Id 错误，这些错误为他们提供了非常有用且信息丰富的 GUID。

当涉及到这种混乱时，开发人员和最终用户都会松懈。SharePoint 唯一的好处是让我相信开源的必要性。

PS - 请不要攻击我的拼写或语法。我不是英语专业的。

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2009-05-07T01:04:28.660

SharePoint 有时会令人沮丧。根据微软的说法，这是一个“成熟的产品”，所以当你做错事时，你会得到很好的错误，比如“发生错误”或“无法完成操作”。CAML 需要极大的耐心。它的文档不是很好，您可能会因为愚蠢的语法错误而浪费大量时间。

总而言之，这是一个不错的平台，但它可能会让你比同龄人更早地白发。

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2010-05-04T14:28:37.117

我有不错的 .net 开发经验和 3 个月的 SP 经验，到目前为止我的经验：

**好的：**

我认为 SP 适合具有简单数据模型的应用程序，最好是重读。一个巨大的优势是用户/管理员只能通过配置来实现。即时更改数据结构，修改外观等。“我的书”之类的绝佳平台..

**坏处：**

但是有很多事情让 SP 跌倒（落在你身上）。例如，当需要非平凡逻辑时很难工作，尤其是外键关系上的聚合函数。当然也缺少交易。维护数据完整性可能会成为一个问题。当您考虑从事特定项目时，请注意这一点。

几乎没有编译时支持，您的大多数任务将包括通过将名称作为字符串调用来弄乱查找的资源。它可以被认为是“灵活的”和“简单的”，但它对我的口味来说太错误了，并且会减慢开发速度。当然，这不仅仅是 SP 的事情，而且 MVC/webforms 似乎更容易推向强类型世界。

如果您喜欢托管世界，那么请处理绝大多数 SP 是非托管代码的事实，为您提供诸如“HResult 8000072F”之类的异常，并且几乎没有堆栈跟踪来提示您可能失败的原因。

部署和错误重现性已经造成了很多令人沮丧的日子。WSS 拥有整台机器，运行应用程序所需的文件分散在数据库、文件系统（通常是 GAC）周围。要对项目进行基本分离，需要在许多不同的 VM 上工作。

工具支持很差（VS 2010 没试过）。最好期望与命令行和脚本交朋友。预计调试体验会很慢。单元测试很难做。。

**我个人的结论：** SP 有它的利基，但它不是.Net 程序员可以享受的平台。用户体验可能偶尔会有一些“WOW”，但开发者体验却没有。这可能是“陡峭的学习曲线”的说法，但也许就是这样。

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2009-05-07T01:03:59.847

这是一种（好？）支付账单的方式......

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2009-05-07T01:11:18.800

SharePoint 是 v2 产品...v3 将于 2010 年推出，它是 MS 历史上增长最快的产品（据说）。v2 还不够成熟，对于我们这些开发者来说，它肯定有一些不足之处，但是有很多工具可以让开发变得更容易（stsdev，就是其中之一）。

如果您留在 Windows 领域，您会越来越多地看到这种情况。这是一个强大的平台，它的未来看起来非常有希望。

从开发人员的角度来看，就像大多数基于 Windows 的应用程序一样，他们考虑过针对它进行开发是一种事后的想法，这有点令人沮丧。最终用户优先获胜，这是肯定的。

即使没有开发方面的内容，SharePoint 工作也充满挑战和回报。您正在影响整个组织并实际上帮助企业更好地运行。开发方面会不时让您感到沮丧，但这一切都趋于平衡。

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2009-05-07T01:20:37.997

根据项目的运行方式，它会有很大的不同 - 如果您在 SharePoint 的设计中工作，您可以毫不费力地实现很多目标。如果您的要求与此背道而驰，而客户又不愿意妥协，那可能会非常令人沮丧。

您还往往会得到很多没有正确设置的环境——即使是像源代码控制和可重复部署这样基本的东西也经常被遗漏。基础架构人员通常不了解 SharePoint，因此您会遇到无法将开发环境连接到网络等问题。

但是，如果有人知道他们在做什么，这些问题中的大多数都很容易解决。一旦你解决了任何项目和环境问题，它就是一个很好的平台。

官方文档并不是特别有用，但是自从我开始使用该平台以来，可用的非官方文档和工具已经有了很大的改进。

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2009-05-07T21:51:29.987

从其他答案中可以清楚地看出，SharePoint 开发人员有很多挫败感。

给出的是：

1.  是的，您必须在服务器产品 Windows 2003 或 Windows 2008 上进行开发
2.  许多开发信息来自质量参差不齐的博客
3.  该产品试图成为每个人的一切，但现实是该产品是如此之大，需要专业领域

对于开发人员来说，这绝对是一项仍在成熟的技术。开发人员社区和 Microsoft 提供的信息量在过去 2 年中大幅增长。SharePoint 的模式和实践团队提供了很多指导，可在此处找到：http: [//www.codeplex.com/spg](http://www.codeplex.com/spg)

至于其他一些评论 - 它是微软增长最快的产品，以销售的许可证衡量，不一定是安装！是的，WSS 3.0 免费提供的功能非常棒。

“SharePoint 开发”可以涵盖的范围非常广泛。它可以是通过 Web 浏览器和 SharePoint Designer 等工具驱动的纯 Web 内容开发。或者编写自定义 ASP.NET Web 部件、Windows 工作流、自定义 ASP.NET Web 服务和托管在 SharePoint 中的页面等等。

SharePoint 附带了许多开箱即用的 Web 服务，允许与其他系统集成，有些人可能会将针对该 API 的编程称为“SharePoint 开发”。

我认为 SharePoint 的一般经验法则是，从表面上看，它似乎是一个包罗万象的产品，试图成为任何人的一切。有时，您无需深入浅出即可意识到，如果不进行大量定制，该平台将无法解决您的特定业务需求。有时，最后 10% 的必需功能会花费您 90% 的努力！

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2009-05-07T01:34:45.763

这同时是您将拥有的最令人沮丧和最有价值的体验。虽然奖励（至少部分）以高薪的形式出现（与直接的网络开发相比），但你身边的 stackoverflow 和谷歌无法克服挫折。

自 2003 年以来，我一直在进行 SharePoint 开发，以及“我非常讨厌 SHAREPOINT！”的低谷。总是被“伙计，太棒了！”的时刻所抵消。

如果您被提供一个从事 SharePoint 的入门级职位，我会立即接受。您将获得有关最热门技术之一的在职培训。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2009-05-07T01:24:12.950

如果您有 Web 开发背景，我认为您可能会对 Sharepoint 为开发人员提供的灵活性不足感到沮丧。如果您以前可以灵活地编写更接近 HTML 的内容，那么受限于“Web 部件”方面的思考并不是很有趣。

此外，我发现相对于常规的 Web 开发，很多时间都花在了配置/实现问题上。

不过，您确实获得了“开箱即用”的合理数量的功能。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2009-05-07T08:20:26.460

我很高兴向大家报告在 SharePoint 编程方面的积极体验。我同意开箱即用的母版页和 css 非常糟糕，有时 API 中缺乏文档可能会非常令人沮丧，但如果您将 SharePoint 视为开发框架而不是作为可以定制的有限产品。我在 MS 读过有人将 SharePoint 描述为“建模粘土”，开箱即用的模板仅仅是可以实现的“演示”。

我发现构建自定义母版页非常简单直接（例如，在标题中使用正确的 Doc Type 来删除糟糕的 BackCompat 并启用 CSS1Compat）或者让我的 aspx 页面带有代码隐藏或其他内容。底线是 - 无论您在纯 asp.net 2.0 中的网站中可以做什么，您都可以对 SharePoint 做同样的事情，并从它的可扩展性、部署技术、API、权限模型、审计、文档存储系统、InfoPath 集成、工作流、等等

我想这最终真的取决于你的观点：SharePoint 是一个带有“演示”网站模板集合的开发平台，还是只是一个允许你在这里和那里自定义它的半有限产品？

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2010-01-17T03:44:10.590

我最初是一名 ASP.NET 开发人员，负责构建 Web 内容管理系统并使用文档管理系统。利用我在平台上已有的技能，SharePoint 在这个领域是一个自然的进步。

去年我做了一个可能感兴趣的演讲。

更多信息可在此处获得： [http ://sharepointdevwiki.com/x/HYBfAQ](http://sharepointdevwiki.com/x/HYBfAQ)

# drupal - Drupal 有目录管理器吗？

> ID：832466
> 
> 赞同：1
> 
> 时间：2009-05-07T00:59:02.353
> 
> 标签：drupal

我正在建立一个产品评论网站，是否有适用于 Drupal 的目录管理器模块或第三方目录管理器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-07T01:01:54.313

你可以很容易地将一个与主要的 Drupal 模块组合在一起——一个小的 CCK，一个小的 Views，然后你就可以顺利进行了。Drupal 及其模块的优点之一是它们中的大多数都足够通用，您可以将它们组合成一个功能完善的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-07T22:25:22.617

试试[目录](https://www.drupal.org/project/directory)模块。以下是其项目页面的摘录：

> ... 提供了一个非常简单且轻量级的分层“类目录”视图（概念上类似于 DMOZ、Yahoo 等），这些视图已分配给一个或多个指定的分类“词汇表”（取决于模块配置）。这允许用户深入了解您的 Drupal 站点上的选定内容。
> 
> 如果您的站点已经存在分类法，并且/或者您没有使用类别模块，则此模块可能是一种更简单的分层导航方法 - 只需将其放入、配置和运行即可。

您可能不得不修改模块来更改一些您不喜欢的小细节，但除此之外，它非常可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-08T08:51:39.387

Views 可能是您正在寻找的东西：一开始没有代码，您将能够按类型、按标签构建各种列表...您可能对 views 参数特别感兴趣，它允许您可以细化一份总清单，或者从精制的一份返回到总清单。

您可以在 drupal e-Commerce 或 Ubercart 中使用产品列表功能，而无需启用其余功能。但是，除非您真的计划稍后启用这些功能，否则这可能是矫枉过正。

# wpf - WPF 字体：为什么缺少某些字符？

> ID：832470
> 
> 赞同：5
> 
> 时间：2009-05-07T01:01:38.993
> 
> 标签：wpf, fonts, textbox

我正在编写一个 WPF 应用程序，而我使用的字体*仅*在 WPF 中运行时出现问题 - 在其他任何东西（记事本、写字板等）中使用它都可以正常工作。WPF 的问题在于它*有时会*退回到另一种字体。“有时”是指只有字符 [a-zA-Z] 似乎可以正确呈现 - 其他所有内容似乎都呈现为默认的 TextBox 字体。

有谁知道 WPF 是否对其支持的字体有某种限制？它几乎似乎是 WPF 中的错误 - 该字体在其他任何地方都可以正常工作。

我尝试使用的字体是“Scramble”TTF 字体（ http: [// Famousfonts.smackbomb.com/fonts/scrabble.php](http://famousfonts.smackbomb.com/fonts/scrabble.php)）。

数字和空格应该被视为一个空白的 Scrabble/Scramble 瓷砖，但数字本身出现在我正在使用的文本框中。

我正在使用的代码：

```
<TextBox Text="Testing testing testing" FontFamily="Fonts/#Scramble" /> 
```

有没有其他人经历过类似的事情？

任何建议都会摇滚！

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-07-06T16:33:30.453

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.media.fontfamily.aspx)：

> **字体回退**
> 
> 字体回退是指自动替换客户端应用程序选择的字体以外的字体。调用字体回退有两个主要原因：
> 
> *   客户端应用程序指定的字体在系统上不存在。
> *   客户端应用程序指定的字体不包含呈现文本所需的字形。
> 
> 在 WPF 中，字体回退机制使用默认的回退字体系列“全局用户界面”作为替代字体。该字体被定义为复合字体，其文件名为“GlobalUserInterface.CompositeFont”。有关复合字体的更多信息，请参阅本主题中的复合字体部分。
> 
> WPF 字体回退机制取代了以前的 Win32 字体替换技术。

我的猜测是字体不支持 Unicode - 字体本身是在 1996 年创建的，由于它旨在模拟拼字游戏，我不确定字体作者是否考虑过本地化。

***编辑*** 根据字体文档，字体支持字母，任何数字都应该呈现空白瓷砖。空间不渲染图块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-07-10T14:45:55.330

简短的回答是，Scramble 不会在 WPF 或其他任何东西中使用空白拼字游戏作为 em 空间。您需要另一种字体或其他东西来编辑 em/en 空间字形（类似于[Font Creator](http://www.fontcreator.com)）。

我得到了[另一种字体](http://www.dafont.com/font.php?file=xgrid&page=1&nb_ppp_old=50&text=&nb_ppp=50&psize=m&classt=alpha)（x-grid），我知道它有一个特殊的空格字形，并在下面的代码中使用它们。

```
<Window x:Class="WpfApplication1.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Window1" Height="300" Width="500">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <TextBlock Grid.Row="0" FontFamily="Scramble" TextAlignment="Center" HorizontalAlignment="Center" FontSize="24" Text="Example Text M M M"/>
    <TextBlock Grid.Row="1" FontFamily="x-grid"  TextAlignment="Center" HorizontalAlignment="Center" FontSize="24" Text="Example Text M M M"/>
</Grid> 
```

结果窗口看起来像这样。

[![替代文字](https://i.stack.imgur.com/VISLU.png)](https://i.stack.imgur.com/VISLU.png)

恐怕与字体后备无关。对不起，但我希望这会有所帮助。

**更新：**抱歉，刚刚注意到您也提到了数字。[Paint.Net](http://www.getpaint.net/)中的快速测试表明，数字也不会出现在图块中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-07-10T10:46:01.057

不用设置 FontFaily="Fonts/#Scrambe"，只需使用不带“Fonts/#”的字体名称：

```
<TextBox Text="Testing testing testing" FontFamily="Scramble" /> 
```

这对我有用。我下载并安装了你提到的字体，它完美地显示了字体，无论是在 VS2008 的设计视图中，还是在我运行应用程序的运行时。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-07-13T13:53:25.280

一般来说，排版，尤其是字体是一个相当复杂的话题，我不太喜欢。这就是我从[Windows Presentation Foundation 中的 Typography](http://msdn.microsoft.com/en-us/library/ms742190.aspx)和相关 MSDN 文档中得出的结论：

*   文本通过文本呈现管道呈现（参见上面的链接以获取图表）。
*   WPF 促进 OpenType 作为 TrueType 字体格式的扩展。
    *   该[`Typography`](http://msdn.microsoft.com/en-us/library/system.windows.documents.typography.aspx)对象公开了 OpenType 字体的许多高级功能。
*   一个重要的低级文本渲染概念是`Glyphs`元素，请参阅 MSDN[介绍](http://msdn.microsoft.com/en-us/library/ms748985.aspx)。

如果您查看提到的文本渲染管道图，您会注意到虽然字形是构建块，但在最终显示在特定媒体（例如屏幕）之前，它们可能会以各种方式（过滤/转换/...）进行操作或打印机；一个例子是将 ClearType 应用于 LCD 屏幕。但是，与通常使用流水线概念一样，这些转换通常或多或少是可选的。

现在，根据您的应用程序要求，这可能已经产生了解决方案。如果您真的不需要 TextBox，您不妨像这样使用 Glyphs 本身：

```
<Page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
      xmlns:sys="clr-namespace:System;assembly=mscorlib" 
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" >
  <Grid>
    <TextBox Text="TextBox: 1234567890" FontFamily="Scramble" FontSize="12" />
    <Glyphs UnicodeString="Glyphs: 1234567890" FontUri="C:\WINDOWS\Fonts\Scramble.TTF" 
            FontRenderingEmSize="12" Fill="Black" OriginX="5" OriginY="32"/>
  </Grid>
</Page> 
```

Glyphs 元素会根据需要为数字呈现空图块，而 TextBox 元素则不会。请注意，由于 Glyphs 是一个低级元素，因此存在一些限制，尤其是 FontUri/Fill/FontRenderingEmSize 都是必需的，即没有像相关 TextBox 属性那样的默认值。

考虑到所有这些，回到您最初的问题：我不会认为手头的问题是 WPF 限制（甚至是错误），而不是对在 WPF UI 上下文中应用的文本呈现要求和默认值的影响布局。例如，复合（即非低级）`TextBox`控件将文本格式和排版设置应用于其内容（字形），促进嵌入字体中的各种字符映射表（可能有[很多](http://www.microsoft.com/typography/otspec/otff.htm#otttables)......）；像 Scramble 这样的特殊/简单字体在这里可能无法提供足够或正确的信息，因此 WPF 渲染引擎可能会被迫应用[GalacticCowboy 所概述的](https://stackoverflow.com/questions/832470/wpf-font-why-are-some-characters-missing/1087947#1087947)字体回退。

如果确实如此，则可能会以某种方式覆盖 WPF 默认呈现算法（请参阅类[`TextFormatter`](http://msdn.microsoft.com/en-us/library/system.windows.media.textformatting.textformatter.aspx)，WPF 文本引擎），但可能需要深入研究框架以弄清楚`TextBox`. 在 Scramble 字体中“调试”最终丢失或不正确的字符映射可能要容易得多。不过，这将是一个完全不同的尝试……

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-09T07:25:59.553

我不喜欢 WPF，但我知道微软通常以不同的方式处理拉丁语和非拉丁语字符。我已经看到您可以定义复合字体，并将特定的 unicode 范围映射到字体。您可以尝试在整个 unicode 范围内强制使用您的字体。[链接文本](http://msdn.microsoft.com/en-us/library/system.windows.media.fontfamily.aspx)

# xss - 防止 XSS 是 Web 应用程序更喜欢 POST 而不是 GET 的正当理由吗？

> ID：832483
> 
> 赞同：2
> 
> 时间：2009-05-07T01:10:35.370
> 
> 标签：xss

Web 应用程序的当前趋势似乎是对所有内容都使用 GET 请求。具体来说，使用描述服务、命令及其参数的 RESTful URL。几个月前，Jeff Atwood 发布了 XSS 的危险。他展示了即使允许用户在您的网站上发布像“img”标签这样看似无害的东西也可能导致 XSS 漏洞。原因是浏览器会盲目地请求“src”属性中的 url，这可能会做一些令人讨厌的事情，比如注销用户，或者更不祥的事情。

十年前我第一次开始做 Web 开发时，传统的看法是对于表单总是偏爱 POST 而不是 GET，并且服务器端的应用程序需要 POST 来提交表单，正是这个原因。浏览器一直发送 GET 请求（就像前面提到的“img”标签示例），但它们只在某些情况下发送 POST 请求（特别是“method”属性设置为 POST 的表单）。通过要求 POST，您似乎可以消除大部分 XSS 攻击。这是偏爱他们的正当理由吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-07T01:19:19.513

从什么时候开始 REST 暗示对所有事情都使用 GET？最后我查了一下，意思正好相反。使用 GET 请求*获取*资源，使用 POST 将资源*发布*到服务器。

REST 的关键点之一是使用最适合您尝试执行的操作的 HTTP 请求。GET 应该用于它的用途：从服务器获取数据，而不更改服务器上的状态。它不应该用于更新服务器上的资源。POST 或 PUT 就是为此而设计的。

以预期的方式使用 HTTP 既有助于避免一些（但远非全部）XSS 攻击，还可以使浏览器在与您的站点通信时表现得更好。浏览器期望可以安全地重复 GET 请求，而无需用户确认。例如，如果您刷新页面或使用后退/前进按钮，它就是这样做的。POST 预计会更改服务器上的状态，因此浏览器通常会在重复 POST 请求之前要求确认。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T01:18:24.803

您将普通 Ajax 调用与 REST 调用混淆了。

Vanilla Ajax 调用使用 GET 或 POST，如何处理它们完全取决于您。

REST 使用动词 GET、HEAD、POST、PUT、DELETE

```
HTTP VERB   REST/CRUD
POST         Create
GET          Read
PUT          Update, Create
DELETE     Delete 
```

当您担心 CSRF 而不是 XSS 时，您想使用 POST over GET。

一个好的经验法则是始终使用 POST，并且仅在您绝对确定要与其他站点共享该数据或数据不敏感时才使用 GET。

但仅使用 POST 并不能 100% 保护您。

XSS 和 CSRF 都非常重要，你应该检查你的应用程序，但它们是两种截然不同的野兽。

CSRF：

[维基百科](http://en.wikipedia.org/wiki/Cross-site_request_forgery)

[OWASP](http://www.owasp.org/index.php/Cross-Site_Request_Forgery)

跨站脚本：

[OWASP](http://www.owasp.org/index.php/Cross_Site_Scripting)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-07T01:18:38.437

我认为您误解了 REST。重点不是更喜欢 GET 而不是 POST，重点是在请求不影响服务器上的数据的情况下使用 GET，在修改数据的情况下使用 POST。REST 就是正确使用可用的 HTTP 动词。

例如，搜索表单通常使用 GET，而 Create X 表单通常使用 POST。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T01:26:50.710

在某些情况下，您应该使用 POST 而不是 GET，但避免[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)不是其中之一。也许您正在考虑[XSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)，但即便如此，要求 POST 并不能真正保护您。事实上，REST 倡导者实际上会说您不应该只使用 GET，而应该使用 POST、PUT 和 DELETE 进行相应的“ [CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete) ”操作。

为了避免[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)，请适当地转义和/或清除用户的内容。

为避免[XSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)，在任何导致潜在危险的副作用的操作上都需要使用秘密令牌。（顺便说一句：在传递秘密令牌时避免使用 GET 请求是个好主意，因为这可能会导致它们在引用者中泄漏。）

尽可能对*只读*请求使用 GET 。（几乎只要查询可以放入 URL）

*对写入*请求使用 POST（或 PUT 或 DELETE，如果可行且合适） 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-07T02:00:05.873

XSS 不会被阻止；XSS 是用户让您以某种方式将他们的脚本输出给其他用户。这需要过滤。

XSRF 也不会停止；它需要添加某种一次性令牌，以确保有人只有在实际访问您的网站时才能访问您的网站（而不是从嵌入式 iframe 等发布）。

但是，POST 与 GET 确实可以防止网络加速器和抓取工具（例如 Google Bot）修改您的网站。他们只去 GET 链接，因此如果您不想删除您的网站（如 Daily WTF 帖子），请确保“删除此项目”不是 GET。;-)

更常见的是，这是语义和表单大小的问题。GET 不发布表单，因此仅限于您可以在 URL 中输入的任何内容，这并不多。POST 允许任意数量的数据。PUT 和 DELETE 更多用于语义；它们都可以通过 POST 完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T02:16:47.627

已经给出的答案确实回答了您的问题 - 不，防止 XSS 不是更喜欢 POST 而不是 GET 的正当理由。但是，如果您想对此进行演示，请查看[WebScarab](http://www.owasp.org/index.php/OWASP_WebScarab_Project)或[Tamper Data](https://addons.mozilla.org/en-US/firefox/addon/966)之类的工具，它们对于测试您自己网站的漏洞非常有用。将代码注入 POST 请求就像注入 GET 一样容易。但是，即使没有这些工具，请注意，除非您在服务器端检查 POST 与 GET，否则使用 GET 发送参数很容易。只需将 ?parm1=value1&parm2=value2&etc 添加到 URL。

# python - 重复文本检测/散列

> ID：832485
> 
> 赞同：3
> 
> 时间：2009-05-07T01:12:10.623
> 
> 标签：python

我在数据库中有一组字符串。每个集合将有少于 500 个成员，将有数万个集合，并且字符串是自然语言。我想检测每组中的重复字符串。新字符串将与现有集合进行比较，如果它们是唯一的，则将其添加到数据库中。

是否有散列算法可以有效地找到（非常）相似的字符串？例如，字符串可能具有相同数量的单词，但编码可能略有不同（UTF-8 与 Latin-1）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T01:45:35.177

对于初学者，您可能应该进行某种标准化。您可能应该将所有文本转换为单一编码（例如：UTF-8）。您可能还想进行大小写折叠、其他[Unicode 规范化](http://unicode.org/reports/tr15/)以及可能还对每个集合进行排序（取决于您存储它们的方式）。

从您的问题中（对我来说）不清楚您是要查找完全匹配还是仅查找“相似”的字符串集。如果您只在考虑标准化后才关心精确匹配，那么您就完成了。只需对字符串集的规范化形式有一个索引，您也可以通过规范化它们来快速查找新集合。

如果您想找到近似匹配项，那么您可能需要进行某种相似性散列。[关于Locality Sensitive Hashing](http://en.wikipedia.org/wiki/Locality_sensitive_hashing)的维基百科文章描述了许多技术。

许多这些技术背后的基本思想是在每个字符串 h[0] 到 h[n] 上计算一些非常有损的哈希值。要查找一个新的字符串集，您需要计算它的哈希值并查找其中的每一个。任何得到至少一个匹配的东西都是“相似的”，匹配越多，它就越相似（你可以选择什么阈值来切断它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T01:16:09.583

如果数据库中只有 500 个字符串，也许您可​​以直接比较每个字符串。首先转换为标准表示（比如 UTF-16）。[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)是比较两个字符串相似度的好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-07T02:05:37.203

简短的回答只是猜测一个与您的“相似”想法相匹配的好的散列参数是什么。

可能就像所有字母的总和（A）和相邻字母之间的差异总和（B）一样，可能会起作用。对于每个新字符串，使用它的 A 和 B 值快速查找现在更小的一组相似字符串，然后在这些字符串之间进行更仔细的比较。

这可能不是最纯粹的解决方案，但实际上，很多问题都是通过这种方式解决的。除此之外，我认为目前有相当多的工作可以解决遗传学中的类似问题（即在庞大的数据库中找到类似的基因序列），但我认为没有一个公认的通用解决方案来解决这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T15:07:17.087

[我博客上的这篇](http://prosehack.wordpress.com/2012/05/25/a-simple-near-duplicate-detection-algorithm/)文章可能很有趣。

提供了算法描述和代码链接。简而言之，它是一种基于 n​​-gram 的方法，不对输入的内容或结构做任何假设，并为所有输入文档生成恒定长度的签名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-07T03:58:55.463

这可能有点矫枉过正，但您可能想尝试基于 Python 的[NLTK（自然语言工具包）](http://www.nltk.org/Home)。

可能有用的一项功能是[分析句子结构](http://nltk.googlecode.com/svn/trunk/doc/book/ch08.html)。当然，这可能会导致某些字符串被标记为重复，因为它们具有相同的语法结构，但单词和含义不同。

您也许还可以使用概率和分类功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T09:00:37.440

您可能会发疯并尝试潜在语义分析/映射和奇异值分解： [潜在语义映射](http://www.ling.upenn.edu/courses/cogs501/BellegardaIEEE.pdf)

与[SVDLIBC](http://tedlab.mit.edu/~dr/svdlibc/)一起使用，这很容易上手。

# download - 如何设置链接的下载位置？

> ID：832486
> 
> 赞同：0
> 
> 时间：2009-05-07T01:12:53.740
> 
> 标签：download

我想创建一个链接，当我单击它时，它会将文件下载到用户计算机上的特定位置（桌面）（基本上“将链接另存为...”对话框将弹出桌面作为默认位置）。

这可能吗？关于如何去做的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-07T01:17:10.173

这是用户设置，您不能强制用户将文件下载到特定目录。您可以做的最好的事情是链接到文件并允许用户选择正确的位置来保存文件。

# java - JMS 消息驱动 Bean 工作者同步

> ID：832492
> 
> 赞同：1
> 
> 时间：2009-05-07T01:17:07.863
> 
> 标签：java, jms, jboss-mdb

我们刚刚开始构建我们的 JMS 架构并具有以下基本设置：

1.  玻璃鱼 v2.1
2.  MDB 通过 TopicConnectionFactory 监听一个主题（都在本地服务器上）

现在，当有新消息到达时，MDB 会生成一个工作线程，即使我们已经按顺序传递消息，我们也需要一种同步机制，以便线程在并发处理请求之前检查特定条件。

这些线程有没有办法共享数据？或者是否有任何其他机制（除了数据库表/行锁）可以用于同步？

提前致谢。

* * *

澄清一下，我不是在创建自己的线程。正如每个人都正确指出的那样，容器为我做到了。让我用一个例子来帮助解释我的困境。

-消息 A 到达 t=0，它“创建”数据 id 1

-消息 B 到达 t=0.1，它“更新”数据 id 1

现在假设容器产生 2 个工作人员来处理 A 和 B，并且“创建”数据比更新它需要更多的时间，更新将更早处理并且没有效果。

为了更清楚，

-在处理消息 B 时，我会在 t=1 时查找数据 id 1（没有找到它，因此没有做任何事情就完成了）。

- 在 t=2 处理消息 A 时将创建数据 id 1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-07T02:21:47.070

学究警告！我是那种阅读实际技术规范的人。

阅读[EJB 规范](http://java.sun.com/products/ejb/)版本 3.0，第 21.1.2 节（编程限制）不允许在代码中使用线程。这是语言和基本原理...

> 企业 bean 不得尝试管理线程。企业 bean 不得尝试启动、停止、挂起或恢复线程，或者更改线程的优先级或名称。企业 bean 不得尝试管理线程组。
> 
> *这些函数是为 EJB 容器保留的。允许企业 bean 管理线程会降低容器正确管理运行时环境的能力。*

所以如果你照你说的做，EJB 警察会在半夜敲你的门，把你带走。或者你的应用程序可能会出现故障，当你抱怨时供应商会笑。或者根本不会发生任何不好的事情。

但是，正如 duffymo 所说，为什么要这样做？如果您想要大量线程提供的可伸缩性，您可以为您的 MDB 配置它吗？EJB 的重点是为您处理类似的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-07T01:22:36.307

我不明白为什么 MDB 必须产生一个工作线程。JMS 中有一个与消息侦听器关联的线程池。那是应该做这项工作的线程。

EJB 规范说没有在你的 bean 中产生线程。容器处理线程。这也包括 MDB。

侦听器应该正在处理它从队列中取出的消息。它需要的数据应该在消息中。有什么需要分享的？

我认为您的方法与推荐的 EJB 实践背道而驰。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-05-05T12:46:45.840

真正的问题是，应用程序服务器通常会自己产生提到的工人。虽然 JMS 保证消息的使用顺序与至少在一个生产者中产生的顺序相同，但 MDB 规范明确指出不保留该顺序（因为提到的工人）。[请参阅JSR-000220 Enterprise JavaBeans 3.0 Final Release (ejbcore)](http://jcp.org/aboutJava/communityprocess/final/jsr220/index.html "单击该页面上的两个下载链接之一")的第 5.4.11 节。

没有可移植且 100% 可靠的方法来规避这一点。由于工人的性质，引入了无法控制的种族条件。

幸运的是，尽管是专有且不兼容的，大多数应用程序服务器都有方法来配置工作人员的数量。

对于 JBoss 和 ActiveMQ 这有效：

```
@PoolClass(value = org.jboss.ejb3.StrictMaxPool.class, maxSize = 1)
@MessageDriven(activationConfig = {
    @ActivationConfigProperty(propertyName = "acknowledgeMode", propertyValue = "Auto-acknowledge"),
    @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
    @ActivationConfigProperty(propertyName = "maxSessions", propertyValue = "1"),
    @ActivationConfigProperty(propertyName = "destination", propertyValue = "TEST.FOO")
})
@ResourceAdapter("activemq-ra.rar")
public class NewMessageBean implements MessageListener { ... } 
```

在这种情况下，“maxSessions”是工人的数量。它可能与其他 JMS 提供程序不同，但这应该指向正确的方向。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-07T02:35:59.733

如上所述，JMS 框架处理调度问题，例如调度线程。您在这方面所做的任何事情不仅会低于默认行为，而且可能会严重限制 JMS 的功能。

更复杂的 JMS 处理程序设计为跨多个节点（= 服务器）工作，因此任何共享内存解决方案都会将您限制为单个节点上的单个 JVM，这将是一个遗憾，因为 JMS 的最大优势是可伸缩性。

一个可能的 JMSy 解决方案是有一个“cookie”队列将一个虚拟“cookie”消息同步活动。当您的进程执行有争议的活动时，它会“等待”来自“cookie”队列的单个消息，当有争议的工作完成时，它会将 cookie 放回队列中。JMS 的魔力将处理几乎所有的阻塞、等待和错误恢复。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-15T07:58:23.363

在每个人都已经回答之后，看起来这个问题的性质完全改变了。我将为后代提供一个非常迟的回应；这假设有某种类型的消息 ID 可用于订购。您说“我们按顺序发送消息”，但您没有确切说明这是如何实现的。

...由于您已经澄清您没有开始自己的线程，因此您基本上在数据@ ID = 1 的“创建”与其随后的“更新”之间存在竞争条件。我假设您在创建和/或更新数据时锁定了 @ ID=1 的数据。所以，有两种可能：

1.  “创建数据”消息首先到达：（1）锁 ID=1，（2）创建数据。(3) 释放锁。(4) 应用待处理的“更新”。
2.  “更新”在“创建”之前到达：(1) 锁定 ID=1，(2) 创建丢失的数据（即，执行“更新插入”：即使数据不存在也插入数据）。(3) 释放锁。(4) 忽略待处理的“create data”消息（“create”消息的序列号低于“update”消息的序列号
    *   如果允许消息发送者同时发送更新和插入（没有请求/响应），那么它们确实应该具有某种序列号。如果是这样，当“插入”到达时，它的序列号将小于该行中的当前值，因此可以忽略它。或者，如果“create”消息类型与“update”消息类型不同，则如果数据已经存在，则始终可以忽略“creates”。

我认为您的问题是如何同步数据。基本上，线程共享对象并创建互斥锁（互斥）以允许单个线程访问数据，从而导致另一个线程阻塞。这可以简单地通过 Java 的低级同步工具（“synchronized”关键字）或帮助实现这一点的内置类（[http://java.sun.com/docs/books/tutorial/essential/concurrency/highlevel.html](http://java.sun.com/docs/books/tutorial/essential/concurrency/highlevel.html)）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T13:25:44.913

正如一些人所提到的，您不应该在 MDB（或任何其他类型的 EJB 或 servlet）中创建自己的线程。

许多 EJB 容器实际上不允许您创建和运行线程。不过，有一种安全的方法可以做到这一点，即使用 commonj 规范中的 WorkManager，尽管在这种特殊情况下我认为没有理由这样做，因为 MDB 已经在其自己的“工作线程”中运行。

请参阅[此处](https://stackoverflow.com/questions/533783/why-spawning-threads-in-j2ee-container-is-discouraged/533847#533847)有关生成线程的信息，以获取有关为什么不应该在 Java EE 服务器中生成线程以及如何在需要时安全地执行此操作的更多信息。

# asp.net-mvc - ASP.NET MVC 解决方案组织

> ID：832497
> 
> 赞同：5
> 
> 时间：2009-05-07T01:18:40.763
> 
> 标签：asp.net-mvc, s#arp-architecture

我正在寻找创建一个相当大规模的 ASP.NET MVC 项目，我想将它分解，这样它就不会全部在一个项目和一个程序集中。

我查看了 Oxite 如何开展他们的组织 ( [http://oxite.codeplex.com/Wiki/View.aspx?title=architecture](http://oxite.codeplex.com/Wiki/View.aspx?title=architecture) )，但我想知道其他人也是如何做到的。有什么建议么？

目前，我正在考虑与 Oxite 非常相似的东西：

项目 - 该项目包含模型层，其中包括模型、配置类以及服务和存储库的接口。这里应该没有太多的应用逻辑，主要是数据结构。

Project.Core - 该项目包含控制器和路由的所有代码，包括过滤器和结果。这里还包括 ViewData 模型。

Project.Site - 该项目包含视图、图像、javascript 和所有其他静态非代码文件。这里应该有最少的 C# 代码，大部分应该存在于 Project.Core

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-07T01:21:21.397

您可能想查看[S#arp 架构](http://code.google.com/p/sharp-architecture/)如何将其控制器、服务和核心拆分为具有相应测试项目的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T22:39:29.857

以下是我们如何分解项目。这个 ASP.NET MVC 即将推出，我们在此过程中学到了一些东西。我已经给出了为什么每个项目都是独立的原因。

Project.Models - MVC 中的 M，它包含您所有的业务类。如果您可以管理它（您确实应该），那么这里应该没有持久性或与 Web 服务相关的类。您当然可以在此项目中定义用于数据访问的接口。检查此项目是否“干净”的数据访问的一种快速方法是检查您是否需要在此项目中引用 NHibernate 等数据访问 DLL。 *原因：理论上，您应该能够捆绑该项目并在其他任何地方使用这些类，即使您切换到不同的 UI（如控制台等）也是如此。*

Project.Site - 这个项目包含你所有的 JavaScript、CSS、View 等，以及与 View 相关的所有内容。 *原因：如果你有一个网站设计师，你可以让他/她访问这个项目并让他工作。*

Project.Controllers - MVC 中的 C，它包含所有控制器以及 ModelBinders。 *原因：模型、视图和控制器的三个不同项目使得关注点泄漏更难发生。*

Project.Tests - *将所有单元测试保存在单独的项目中，迫使您只测试公共接口；我认为单元测试的好习惯。*

Projects.Services - 所有 Web 服务，与持久性相关的代码都在这个项目中。

目前，任何实用程序类都进入 Project.Models，但我认为为实用程序类提供单独的解决方案并在需要时将它们作为对已编译程序集的引用导入会更好。

# c# - 您如何写入 NUnit gui 运行器的 Log 选项卡和 Console.Error 选项卡

> ID：832506
> 
> 赞同：19
> 
> 时间：2009-05-07T01:22:44.963
> 
> 标签：c#, .net, asp.net, winforms, nunit

在 NUnit Gui Runner 中有 6 个选项卡。我可以通过写以下内容来写信给 Console.Out：

```
Console.WriteLine("This will end up in the Console.Out"); 
```

我可以通过编写以下内容来写入 Trace 选项卡：

```
System.Diagnostics.Trace.WriteLine("This will end up on the Trace tab"); 
```

但是如何写入另外两个选项卡“Log”和“Console.Error”？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-07T01:39:06.487

要写入 Console.Error，请执行以下操作：

Console.Error.WriteLine("blah");

要写入日志，您需要在测试项目中配置 log4net，然后在项目的 .exe.config 文件中设置 log4net 附加程序。使用 log4net 设置 NUnit 实际上有点棘手，这里有一个入门指南：

[http://www.softwarefrontier.com/2007/09/using-log4net-with-nunit.html](http://www.softwarefrontier.com/2007/09/using-log4net-with-nunit.html)

# c# - EntitySet 序列化 - WCF、C#、VS2008

> ID：832511
> 
> 赞同：1
> 
> 时间：2009-05-07T01:26:46.563
> 
> 标签：c#, wcf

我早些时候问过这个问题，并听从了 Marc 的建议。那对我没有帮助。

[链接文本](https://stackoverflow.com/questions/831058/iqueryable-serialization-c-vs2008-wcf/831762#831762)

我的客户对象是我想要序列化的对象，但是使用 Employee 实体集，通过任何序列化，我得到我的对象序列化而不引用我的 EntitySets。

有人成功序列化了这些对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T19:02:43.723

根据链接中的信息，您似乎正在尝试序列化 IQueryable 对象。

我认为这是不可能的，当它超出数据库连接的范围时，它就失去了意义。当您经过 WCF 跃点时会出现这种情况。

您可以做的是使用 IQueryable 对象上的 ToArray 提取数据。该结果将通过 WCF 序列化。

希望这可以帮助

设拉子

# iphone - 在 iphone 应用程序中的 facebook-connect 中标记照片

> ID：832514
> 
> 赞同：0
> 
> 时间：2009-05-07T01:27:50.833
> 
> 标签：iphone, connection, facebook

我在我的 iphone 应用程序中添加了**fbConnect功能。**想知道是否有办法在 fbConnect api 中**标记**照片（姓名，即 John Smith）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-03T23:24:52.673

Photos.addTag 是一个 facebook api，可用于执行此操作。

# c# - NUnit Gui Runner 中的每个选项卡应该用于什么？

> ID：832515
> 
> 赞同：2
> 
> 时间：2009-05-07T01:28:00.787
> 
> 标签：c#, .net, winforms, nunit, nunit-2.5

NUnit 测试运行器中有六个选项卡：

```
Errors and Failures
Tests Not Run
Console.Out
Console.Error
Trace
Log 
```

我知道*错误和失败*的用途，但其余选项卡的用途令人困惑。*Console.Out*和*Trace*似乎都有类似的目的。

正如评论指出的那样，我写了一个类似的问题，询问*如何*写入所有选项卡。在这个问题中，我问*为什么要*写入每个选项卡？ *为什么要*写入*Console.Out*与*Trace*与*Log*选项卡？ 每个选项卡的预期用途是什么*？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T14:47:45.263

未运行的测试选项卡显示已跳过的测试。这些是定义了 Ignore() 属性的测试。如果您想暂时禁用已知暂时无效的测试，或者该测试太耗时而无法定期运行，这将非常有用。

其余选项卡都包含在您的其他问题中：

*   Console.Out -> Console.WriteLine()
*   Console.Error -> Console.Error.WriteLine()
*   跟踪-> System.Diagnostics.Trace.WriteLine()
*   日志 -> log4net 输出

Console.Out 将数据写入标准输出。

Console.Error 将数据写入标准错误。

Trace 将数据写入[Trace Ojbect](http://www.asp101.com/articles/robert/tracing/default.asp)。

[Log4Net](http://logging.apache.org/log4net/index.html)写入“各种日志目标”。

所有这些的目的都是相同的：在不使用断点和调试器的情况下，深入了解您的代码在运行时所做的事情。您使用哪一种取决于您的要求： Console 方法产生用户可见的输出。跟踪很容易显示/隐藏（并且包含很多额外的信息），但似乎没有任何持久性支持它。日志记录可以是永久性的，但需要维护日志文件的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T09:24:25.837

我希望在编写或调试测试时使用 Console.Out，而 Trace 将用于显示被测代码的跟踪输出。代码中的跟踪输出可以使用 Trace.WriteIf 等有条件的，并通过配置文件中的开关定义打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T17:23:33.783

*   Console.Out = 测试代码的输出（例如，被测试方法返回的对象的转储内容）。

*   Console.Error = 输出测试代码检测到的错误的详细信息

*   Trace = 来自被测试代码的诊断跟踪。

# php - PHP 表单代码损坏

> ID：832520
> 
> 赞同：0
> 
> 时间：2009-05-07T01:30:52.497
> 
> 标签：php, javascript

我正在用 php 生成一个简单的表单。以下代码已被简化以展示该问题。

```
<?php
$blah = "<h1>Well</h1>"; $test = "<h2>Done</h2>";
echo '<script type="text/javascript" src="fetchlayers.js"></script>';
$formcode = "<form action=\"process.php\" method=\"post\" enctype=\"multipart/form-data \">"
          . "<label for=\"file\">Filename:</label>"
          . "<input type=\"file\" name=\"file\" id=\"file\"/> <br />"
          . "<input type=\"submit\" name=\"submit\" value=\"Submit\" "
          .    "onclick=\"setTimeout(function() { sendInfo(\"$blah\", \"$test\"); },1250);\" />"
          . "</form>";

echo "<h1>hello</h1>
<div id='form'>
$formcode
</div>"; 
```

这导致了这个html代码

```
<h1>hello</h1>
<div id="form">
<form action="process.php" method="post" enctype="multipart/form-data ">
<label for="file">Filename:</label><input name="file" id="file" type="file">
<br><input name="submit" value="Submit" onclick="setTimeout(function() { sendInfo(" type="submit"><h1>Well</h1>", "<h2>Done</h2>"); },1250);" /&gt;
</form> 
```

在我调用 sendinfo() 之后，type=submit 的表单代码以某种方式结束。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-07T01:36:21.937

这是因为您在 onclick 中的引用。改用单引号：

```
"onclick=\"setTimeout(function() { sendInfo('$blah', '$test'); }, 1250);\" " 
```

现在的方式，你的 onclick 属性实际上是这样的：

```
onclick="setTimeout(function() { sendInfo(" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T01:37:01.967

这似乎是一个逃避问题：

```
<?php
$blah = "<h1>Well</h1>"; $test = "<h2>Done</h2>";
echo '<script type="text/javascript" src="fetchlayers.js"></script>';
$formcode = "<form action=\"process.php\" method=\"post\" enctype=\"multipart/form-data \"><label for=\"file\">Filename:</label><input type=\"file\" name=\"file\" id=\"file\"/> <br /><input type=\"submit\" name=\"submit\" value=\"Submit\" onclick=\"setTimeout(function() { sendInfo('$blah', '$test'); },1250);\" /></form>";

echo "<h1>hello</h1>
<div id='form'>
". $formcode . "
</div>"; 
```

onclick 中的 javascript 需要单引号，否则必须使用 "。

# asp.net - IHttpAsyncHandler 内部的同步数据库读取

> ID：832525
> 
> 赞同：0
> 
> 时间：2009-05-07T01:33:09.823
> 
> 标签：asp.net, ihttpasynchandler

在 asp.net 上，如果我使用 delegate.BeginInvoke 在 IHttpAsyncHandler 中调用同步数据库查询，它在读取数据库时是否仍会释放 asp.net 工作线程？

例如这篇文章： http: [//madskristensen.net/post/How-to-use-the-IHttpAsyncHandler-in-ASPNET.aspx](http://madskristensen.net/post/How-to-use-the-IHttpAsyncHandler-in-ASPNET.aspx)

如果我在 ServeContent 中放置一个同步数据库调用，请求还会异步发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T03:22:06.847

不，这是一篇误导性的文章，暗示它确实如此。为了获得好处，`IHttpAsyncHandler`您必须调用异步响应的东西。例如 Web 服务、异步数据库调用（例如`SqlCommand.BeginExecuteReader`）、唤醒休眠线程中的某些东西等。

`TransmitFile`（在示例文章中使用）不是异步的，而是同步的。它使用工作线程，就像任何其他同步调用一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T11:35:12.450

查看BeginExecuteReader的mysql实现，它只创建了一个委托，并在AsyncExecuteWrapper方法上调用了BeginInvoke，该方法只是调用了ExecuteReader。这对我来说似乎不对，因为它只是委托内部的同步调用。所以，即使我在 IHttpAsyncHandler 中使用 mysql 连接器 BeginExecuteReader 我也不会工作。会吗？

谢谢。

# database - 在应用程序和 Web 数据库中同步对象 ID？

> ID：832529
> 
> 赞同：0
> 
> 时间：2009-05-07T01:35:00.537
> 
> 标签：database, synchronization

我们有一个 Android 应用程序和一个 Web 服务。我们想将部分地点对象下载到手机上。用户将能够下载某个城市的更多内容。因此，我们需要将 web 的 city_id 保存在移动数据库中。我们考虑了两种选择：

*   每个数据库都有自己的主 ID，但我们也会将 Web 主 ID 保存在移动设备中（因此我们可以向 Web 服务询问更多信息）。这是最简单的选择。
*   移动表格不会自动增加，并且对象将具有与 Web 中相同的 ID。

您认为哪一个（或另一个）是最好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-07T01:37:29.297

使用来自服务器的 ID - 它们是有效的唯一标识符，自动递增没有什么特别之处。

# oop - 何时使用委托而不是继承？

> ID：832536
> 
> 赞同：53
> 
> 时间：2009-05-07T01:37:19.627
> 
> 标签：oop, inheritance, delegation

有人可以解释一下我什么时候想使用委托而不是继承？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2009-05-07T01:40:15.873

当您想“复制”/公开基类的 API 时，您使用继承。当您只想“复制”功能时，请使用委托。

一个例子：你想从一个列表中创建一个堆栈。Stack 只有 pop、push 和 peek。你不应该使用继承，因为你不想在堆栈中使用 push_back、push_front、removeAt 等功能。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-05-07T01:41:57.023

他们彼此没有任何关系。委托是一种行为。继承是一种模型技术。

继承用于建模“is-a”。计算机“是一个”电子系统。

委派是方法提供结果的方式。有时一个对象会将工作委托给另一个对象。委托可以通过任何关系——您可以委托给超类、组合或聚合的成员或任何关系。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-07T02:46:12.643

假设您的类称为 B 并且派生/委托给类称为 A 然后

以下是使用继承或委托时的一些示例：
如果

*   你想表达关系（is-a）然后你想使用继承。
*   您希望能够将您的类传递给期望 A 的现有 API，那么您需要使用继承。
*   您想增强 A，但 A 是最终的并且不能进一步子类化，那么您需要使用组合和委托。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-07T01:47:38.027

您可以使用对多个内部类实例的委托来将它们的功能简化为一个公共分组。例如，如果您的语言没有实现多重继承，您可以从其中一个基础继承并包装另一个，将您想要公开的功能委托给底层实现。继承还将您的类与您继承的类的层次结构联系起来，与委托一样，您可以在自己的层次结构中保留自己的位置并将调用委托给另一个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-06T09:07:48.263

我同意@Anzurio。用简单的话来解释一下：

> 仅当您觉得新类是现有类的自然扩展时才使用继承。更喜欢将组合/委托用于所有其他目的，例如使用特定方法等。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-25T05:33:45.467

在我看来，可以在需要使用和嵌入继承时调用委托。

以[in_threads gem](https://github.com/toy/in_threads)为例，它使用 InThreads 委托器为任何 Ruby Enumerable 模块实现线程。有了这个，只在数组上调用 in_threads 方法，它将在线程中运行。

# php - 保存列表的顺序 (php/zend/jquery)

> ID：832539
> 
> 赞同：4
> 
> 时间：2009-05-07T01:38:34.647
> 
> 标签：php, javascript, jquery, list

我正在使用 jQuery 库来获得一个有序列表，该列表能够通过拖放重新排序项目。我想将订单信息发送到数据库，下次您刷新页面（或将其加载到另一台浏览器/计算机上）时，它就会收到您的订单。

我为 mySQL 中列表的每个元素都有一个表，现在我按`creation_date`. 那么最好的解决方案是什么？我在哪里（以及如何）保存订单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-07T20:38:41.550

这是我想到的一个解决方案。它未经测试，但应该为您指明正确的方向。在要排序的表中有一个 INT 'order' 列。

HTML/javascript (jquery-ui)

```
<!-- This is the list of items where the item's data base id is in the element
id, i.e. id="item-DATABASE_ID".  These items can be displayed with PHP by
SELECTing them from the database using ORDER BY order ASC -->
<ul id="sortable">
    <li id="item-1">Foo</li>
    <li id="item-2">Bar</li>
    <li id="item-3">Baz</li>
</ul>

<script type="text/javascript">
$(function() {
    // This turns the list into a jquery UI sortable list
    $("#sortable").sortable({
        // This even fires whenever the list is changed
        change: function(event, ui) {
            // This sends the list data to an  AJAX handler
            $.post({
                url: 'path_to_ajax_handler.php',
                // The serialize function transforms the list information
                // into a query string i.e.: item[]=1&item[]=2&item[]=3
                data: $('#sortable').sortable("serialize")
            });
        }
    });
});
</script> 
```

PHP的

```
<?php
// The IDs of the items to be sorted are passed to the AJAX handler in the order
// they are listed in the page
if (isset($_POST['item']))
{
    $items = (array)$_POST['item'];

    // This updates all the items in the table with the correct order
    for ($x = 0; $x < count($items); $x++)
    {
        $query = "UPDATE * FROM orderable_things SET order = $x WHERE id = ".$items[$x];
        mysql_query($query);
    }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T07:59:18.320

DFectuoso，如果你有适当的数据库索引，你应该使用数据库排序并将顺序存储在单独的表中，磁盘上的文件，memcached - 选择你最好的。

我采用此解决方案的原因是，如果您的数据集变得更大，您的重新排序/重新插入算法可能需要很长时间，并且您必须重新排序所有项目。

如果您让数据库处理排序，您只能请求一小部分项目，并且数据库将使用索引并且不必重新排序所有内容，理想情况下这非常快。

否则，您可以选择以任何您想要的格式存储这些数据——如果您愿意，可以序列化 PHP 对象并将其存储在磁盘上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-07T01:42:31.813

我想在表中添加一个订单字段，因此每次进行拖放时都使用 AJAX 调用更新信息。使用 jQuery 非常简单 :-)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-07T14:40:01.617

我正在考虑这个问题，我想出的解决方案是使用十进制数字作为顺序，并将项目的数量更改为下一个项目和上一个项目之间的数字

```
Order    Item
-----    ----
1        Original Item 1
2        Original Item 2
3        Original Item 3
4        Original Item 4
5        Original Item 5 
```

如果将项目 4 更改为第二个位置，您将获得：

```
Order    Item
-----    ----
1        Original Item 1
1.5      Original Item 4
2        Original Item 2
3        Original Item 3
5        Original Item 5 
```

如果将第 3 项更改为第 3 位，您将获得：

```
Order    Item
-----    ----
1        Original Item 1
1.5      Original Item 4
1.75     Original Item 3
2        Original Item 2
5        Original Item 5 
```

从理论上讲，两位小数之间总是有一个小数，但您可能会面临一些存储限制。

**您（堆垛机）如何看待这个解决方案？**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-11T09:39:18.693

我会做一些类似于 Zendesk 的事情。

你点击一个按钮说“编辑订单”，当你完成后说“保存订单”或类似的东西。这些可以是 Ajax 调用以使其更可用，但也可以是页面刷新，允许优雅地降级。

所以它会是这样的：

```
<ul>
<li><input type="hidden" name="item1" value="1" />Item 1</li>
<li><input type="hidden" name="item2" value="2" />Item 2</li>
<li><input type="hidden" name="item3" value="3" />Item 3</li>
<li><input type="hidden" name="item4" value="4" />Item 4</li>
</ul> 
```

当您移动项目时，这将更改隐藏字段的值。当您发布此内容时，您可以在更新语句中使用这些值，只进行一次调用。就像是：

```
UPDATE `things` SET `order` = $value WHERE `name` = $name; 
```

在这种情况下它可能效率不高，因为会有 4 个 SQL 语句，尽管可能有另一种方法来解决这个问题。

我认为主要优点是如果你的 JavaScript 写得好，你总是有一个 1,2,3,4 的逻辑顺序而不是其他任何东西。

# iphone - NSURLConnection 上的 Apple SDK 文档中存在错误或混淆？

> ID：832540
> 
> 赞同：2
> 
> 时间：2009-05-07T01:38:56.377
> 
> 标签：iphone, race-condition

我最近一直在学习 Apple SDK（用于 iPhone 等）并且遇到了一些我无法理解的东西。在[http://developer.apple.com/documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html的“使用 NSURLConnection”的文档中](http://developer.apple.com/documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

我发现了一段奇怪的解释和示例代码。首先，它说：

收到 initWithRequest:delegate: 消息后立即开始下载。它可以在委托接收到 connectionDidFinishLoading: 或 connection:didFailWithError: 消息之前的任何时间通过向连接发送取消消息来取消。

接下来，它显示以下代码：

```
  NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

  如果（连接）{

    // 创建将保存的 NSMutableData

    //接收到的数据

    // receivedData 在别处被声明为方法实例

    receivedData=[[NSMutableData 数据] 保留];

  } 别的 {

    // 通知用户无法下载

  }

```

因此，在我看来，一旦连接初始化，下载必须立即在不同的线程中开始。这很清楚，因为代码是非阻塞的，并将消息发送回委托，在本例中为 self。然而，receivedData 的（自动释放风格）分配发生*在*另一个线程启动之后。这不是不安全的比赛条件吗？如果服务器响应非常快（例如通过环回设备）或线程调度不顺利，这不会导致崩溃、内存泄漏或数据丢失吗？在初始化theConnection之前分配receivedData，然后在上面的else情况下释放它不是更有意义吗？

我被这段代码弄糊涂了，希望有人能为我解释一下。感谢您提供任何信息，

鲁迪·奇里布拉西

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-07T03:21:22.120

没有竞争条件。下载在单独的线程上在后台启动，但发送给代理以通知您下载进度的消息始终在启动下载的线程上调用。

如果您更清楚的话，您当然可以在创建连接之前分配 NSData 。您甚至可以在 connection:didReceiveData: 方法中分配它，如果您想确保除非有数据要存储，否则不会分配 NSData。

我认为该示例的编写方式是使其尽可能短，以免将演示文稿与许多不相关的代码混淆。

从[NSURLConnection 的文档中](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/doc/uid/20001697-387826)：

> NSURLConnection 的委托方法允许对象接收有关 URL 请求的异步加载的信息回调。其他委托方法提供允许委托自定义执行异步 URL 加载过程的工具。
> 
> 请注意，这些委托方法将在为关联的 NSURLConnection 对象启动异步加载操作的线程上调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T14:54:19.100

这里没有竞争条件。`NSURLConnection`使用`NSRunLoop`来调度其事件。因此，在下一个事件循环开始之前，没有数据可以到达您的手中。

这意味着在下一个事件循环之前不会发生调用`connection:didReceiveData:`，无论数据何时实际返回，并且`connection:didReceiveData:`将在开始加载的线程上调用。所以你有这个运行循环的其余部分来让一切井井有条。“立即”在这里的意思是“你不需要做任何事情来启动它”。

这不是推测或可变的实现细节；它基于 Cocoa 的设计原则。为了更好地理解 Cocoa，假设几乎所有事情都发生在主线程上。虽然框架可能偶尔会产生线程作为实现细节，但它们总是会提供一种错觉，即它们没有。因此，就其性质而言，异步操作将始终出现在稍后的事件循环中。合作的，而不是抢占式的，多任务处理是 Cocoa 的方式。

# xsd - xsd 属性和元素验证

> ID：832542
> 
> 赞同：0
> 
> 时间：2009-05-07T01:39:36.657
> 
> 标签：xsd, attributes, elements

我正在尝试创建一个 XSD 架构，它将验证以下 xml。

```
<Item ItemGUID="3F2504E0-4F89-11D3-9A0C-0305E82C3301">The name of the item</Item> 
```

我想验证属性“ItemGUID”的最大长度为 36 个字符，“项目名称”的最大长度为 25 个字符。

如何使用 xsd 模式验证是否满足上述条件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-07T02:21:53.887

使用 XML Schema，您可以执行以下操作：

```
<xs:element name="Item">
  <xs:complexType>
    <xs:simpleContent>
      <xs:extension base="string25">
        <xs:attribute name="ItemGUID" type="string36" />
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:element> 

<xs:simpleType name="string25">
  <xs:restriction base="xs:string">
    <xs:minLength value="1"/>
    <xs:maxLength value="25"/>
  </xs:restriction>
</xs:simpleType>

<xs:simpleType name="string36">
  <xs:restriction base="xs:string">
    <xs:minLength value="1"/>
    <xs:maxLength value="36"/>
  </xs:restriction>
</xs:simpleType> 
```

我还没有尝试过，但是如果这不起作用，它应该非常接近您的需要。

# graphics - 什么是顶点着色器和像素着色器？

> ID：832545
> 
> 赞同：82
> 
> 时间：2009-05-07T01:41:33.517
> 
> 标签：graphics, shader, terminology

什么是顶点着色器和像素着色器？

它们之间有什么区别？哪一个是最好的？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2009-06-06T13:15:34.187

DirectX 10 和 OpenGL 3 引入了几何着色器作为第三种类型。

在渲染管道顺序中 -

**顶点着色器**- 采用单个点并可以对其进行调整。可用于计算复杂的**顶点照明计算作为下一阶段的设置和/或扭曲周围的点（摆动、缩放等）。

每个生成的原语都被传递给

**几何着色器**- 获取每个转换后的图元（三角形等）并可以对其执行计算。这可以根据需要添加新点、将其移除或移动它们。这可用于从单个基础网格动态添加或删除细节级别，基于点创建数学网格（用于复杂粒子系统）和其他类似任务。

每个生成的图元都得到扫描线转换，跨度覆盖的每个像素都通过

**像素着色器**（OpenGL 中的片段着色器） - 根据顶点着色器传入的内容、绑定纹理和用户添加的数据计算屏幕上像素的颜色。这根本无法读取当前屏幕，只需计算出该像素对于当前图元应该是什么颜色/透明度。

然后将这些像素放入当前绘制缓冲区（屏幕、后缓冲区、渲染到纹理等）

所有着色器都可以访问全局数据，例如世界视图矩阵，开发人员可以传递简单的变量供它们用于照明或任何其他目的。着色器是用一种类似汇编语言的语言处理的，但现代 DirectX 和 OpenGL 版本已经内置了分别称为 HLSL 和 GLSL 的高级类 c 语言编译器。NVidia 也有一个名为 CG 的着色器编译器，它适用于这两种 API。

[编辑以反映我之前的错误顺序（几何->顶点->像素），如评论中所述。]

现在 DirectX 11 中使用了 3 个新的着色器来进行曲面细分。新的完整着色器顺序是 Vertex->Hull->Tessellation->Domain->Geometry->Pixel。我还没有使用这些新的，所以没有资格准确地描述它们。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2009-05-07T01:48:06.450

[像素着色器](http://en.wikipedia.org/wiki/Pixel_shader)是一个GPU（图形处理单元）组件，可以编程为在每个像素的基础上运行，并处理诸如照明和凹凸贴图之类的事情。

[顶点着色器](http://en.wikipedia.org/wiki/Vertex_shader)也是GPU 组件，也使用特定的类汇编语言（如像素着色器）进行编程，但面向场景几何体，可以执行诸如向对象添加卡通轮廓边缘等操作。

两者都不比另一个更好，它们都有其特定的用途。大多数支持 DirectX 9 或更高版本的现代显卡都包含这些功能。

网络上有多种资源可以帮助您更好地了解如何使用这些东西。NVidia 和 ATI 尤其是有关此主题的文档的好资源。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-05-07T01:48:32.063

顶点和像素着色器在图形管线中提供不同的功能。顶点着色器获取并处理与顶点相关的数据（位置、法线、纹理坐标）。

像素（或更准确地说，片段）着色器采用从顶点着色器中处理的值进行插值并生成像素片段的值。大多数“酷”的东西都是在像素着色器中完成的。这是发生纹理查找和照明等事情的地方。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-08-05T15:32:26.520

**DirectX 特定：**

**着色器：**

为未在固定渲染管道中定义的对象实现附加图形功能的程序集。因此，我们可以根据需要拥有自己的图形效果——即，我们不再局限于预定义的“固定”操作。

**HLSL：（高级着色语言）：**

HLSL 是一种类似于 C++ 的编程语言，用于实现着色器（像素着色器/顶点着色器）。

**顶点着色器：**

顶点着色器是在显卡的 GPU 上执行的程序，它单独对每个顶点进行操作。这有助于我们编写自己的自定义算法来处理顶点。

**像素着色器：**

像素着色器是在每个像素的光栅化过程中在显卡的 GPU 上执行的程序。它为我们提供了直接访问/操作单个像素的便利。这种对像素的直接访问使我们能够实现各种特殊效果，例如多纹理、每像素照明、景深、云模拟、火灾模拟和复杂的阴影技术。

**注意：**顶点着色器和像素着色器（程序）在使用前都应使用特定版本的编译器进行编译。编译可以像使用所需参数（如文件名、主入口函数等）调用 API 一样完成，

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-07T01:55:48.723

在开发方面，像素着色器是一个单独对每个像素进行操作的小程序，类似地，顶点着色器对每个顶点进行单独操作。

这些可用于创建特殊效果、阴影、照明等......

由于每个像素/顶点都是单独操作的，因此这些*着色器*适用于现代图形处理器的高度并行架构。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-07T21:20:56.240

曾经有一个 Flash 演示，显示从靠近观察者到反射距离的曝光平面。这表示通过其路径中的任何其他平面返回观察者的反射光距离的观察平面。这些平面上的任何东西都可以按原样使用，也可以在参数化数据值中使用以改变返回光或颜色。这是您将看到的最简单的解释。我希望 Flash 演示仍然可以执行，但由于安全原因不再可以执行。实际上，任何设置 3d 着色器的物体都可以在 Z 轴上显示 x 个垂直平面，显示与这些平面的交互作用。该视图可以以与显示概念视图的方式相同的角度显示，从而使解剖变得明显。换句话说，视图将是管道所见和观察者所见的角度横截面。事实上，当将此着色器用作着色器创建时，开发人员只需将必要的平面插入到 Z 轴 adhoc 中，这可能会让某人获得非常高的报酬。侧面的查看窗口将显示渲染结果。我让百万富翁。

# php - 即使数据库中有条目，也会显示代码

> ID：832548
> 
> 赞同：0
> 
> 时间：2009-05-07T01:42:21.877
> 
> 标签：php, database, search

即使我的数据库中有条目并且我不明白为什么，也会继续显示以下代码。我错过了什么吗？我不确定这是否有意义，但帮助会很大。:)

```
if($numrows==0)
{
echo"<h3>Results</h3>";
echo"<p>Sorry, your search: &quot;".$escaped."&quot; returned zero results</p>";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-07T02:10:53.960

如果您遇到问题的代码与上一个问题中引用的代码相同[......](https://stackoverflow.com/questions/826439/help-with-search-coding-please)那么问题就在这里：

```
$numresults=mysql_query($query);
$numrows=mysql_num_rows(numresults); 
```

您在第二行的 numresults 之前缺少 $ 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T01:46:02.647

你如何得到 $numrows？这可能是错误。

我通常做的是：

```
if($numrows > 0 ){

  // Code

}else{
  echo"<h3>Results</h3>";
  echo"<p>Sorry, your search: "".$escaped."" returned zero results</p>";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-07T02:05:19.357

尝试：

```
echo "'$numrows'"; 
```

**在 if 语句的正**上方。如果输出不是**'0'**，那么问题是如何将 0 分配给 $numrows。

# javascript - Rails：如何登录我的 javascript 嵌入的站点？

> ID：832551
> 
> 赞同：0
> 
> 时间：2009-05-07T01:42:41.937
> 
> 标签：javascript, ruby-on-rails, logging, embed

我的网站提供了一个 javascript，它显示了道琼斯指数的荷兰等值汇率。用户可以将此脚本嵌入到他们的网站中。

它看起来像这样：

```
<script type="text/javascript" src="http://www.aexscript.nl/r/gratis"></script> 
```

相应的控制器动作如下所示：

```
def show
  @script = Script.find_by_code(params[:code])
  @rate = Rate.find(:first)

  respond_to do |format|
    format.js # show.js.erb
  end
end 
```

我想记录嵌入了 javascript 的网站的 URL。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T02:48:47.270

您的网络服务器应该为您提供访问日志；这将显示它收到的每个 HTTP 请求。

然后你可以只 grep 请求这个文件。

[Apache](http://httpd.apache.org/docs/2.0/logs.html#accesslog)的示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T02:55:16.507

制作一个记录您的点击的数据库表。每当有人点击节目时，记录它。

您可以从[http://github.com/saizai/hyperdictionary](http://github.com/saizai/hyperdictionary)获取类似的代码- 使用four_oh_four 控制器、模型和迁移。

如果您有其他信息（例如，您以某种方式知道登录用户？您知道它是谁的链接？）您可以轻松地将其作为外键添加到该表中。然后你会做类似的事情

```
user.js_hits.find(:all, :select => "name, count(id) as count", :group => 'name') 
```

并将其放在一个简单的视图中（有关简单示例，请参见我的 app/views/four_oh_fours/index.html.erb）。

# ubuntu - 如何让 F# 与 Mono 一起工作？

> ID：832552
> 
> 赞同：48
> 
> 时间：2009-05-07T01:42:46.260
> 
> 标签：ubuntu, f#, functional-programming, mono, ubuntu-9.04

我似乎找不到单声道的编译器/插件。一个存在吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-05-07T05:03:51.690

1.  去[这里](http://www.microsoft.com/download/en/details.aspx?id=11100)下载 fsharp.zip
2.  解压并打开创建的文件夹
3.  打开终端并以 root 身份运行 ./install-mono.sh（在某些系统上，需要将该脚本中的换行符从 CRLF 转换为 LF）

这将为您提供基本功能，这意味着您将能够运行“mono fsi.exe”并将 F# 应用程序编译为“mono myApp.exe”。

有用的提示：

1.  为编译器和 F# 交互创建脚本是有意义的。IE：

    /usr/local/bin/fsc

    #!/bin/sh exec /usr/bin/mono /usr/local/src/FSharp-1.9.9.9/bin/fsc.exe $@

    /usr/local/bin/fsi

    #!/bin/sh exec /usr/bin/mono /usr/local/src/FSharp-1.9.9.9/bin/fsi.exe $@

2.  F# interactive (fsi.exe) 默认尝试引用 System.Windows.Forms，因此为了运行它，需要 Mono 中的 WinForms 支持

3.  fsi.exe 在 Xterm 中比在 Gnome 终端中工作得更好。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2010-11-14T00:29:31.280

作为参考，现在有 Linux（.deb 和 .rpm）包和 Mac OS X 安装程序可在[http://fsxplat.codeplex.com/](http://fsxplat.codeplex.com/)获得，这将节省您手动复制文件和制作自己的文件的工作启动器脚本。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-05-07T01:49:17.757

是的，有一个。看看这个：[F# for Mono](http://weblogs.asp.net/esanchez/archive/2008/07/14/f-1-9-4-19-runs-out-of-the-box-with-mono-in-linux.aspx)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-07T01:49:09.830

您可以[从 Microsoft 下载 F# zip 文件](http://www.microsoft.com/downloads/en/details.aspx?FamilyID=f8c623ae-aef6-4a06-a185-05f59be47d67&displaylang=en)，然后运行（例如）“mono fsi.exe”。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-12T07:25:11.520

Piotr Zurek 所说的基本上是我为使 F# 和 mono 在 Ubuntu 9.04 上工作所做的工作，并附有以下评论：

1.  请记住使用 Mono 安装 WinForm 支持。否则无法启动 fsi.exe。
2.  ./install-mono.sh 应该以 root 权限运行（sudo ./install-mono.sh）。
3.  Gnome 终端不能很好地与 fsi.exe 配合使用。启动一个普通的 xterm 并在其中运行 fsi.exe。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-11-01T01:22:15.723

在 2019 年，很多这些早期的答案都已经过时了。不需要 zip 文件或类似文件。

从 Ubuntu 19.04 开始，`disco`您现在可以安装以下软件包：

```
sudo apt-get install mono-complete fsharp 
```

这为您提供了 F-sharp 编译器`/usr/bin/fsharpc`

或者，如果您想要最新的，您可以添加 Mono 存储库并从那里提取包，详情请参阅：

[https://www.mono-project.com/download/stable/#download-lin](https://www.mono-project.com/download/stable/#download-lin)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-01-08T15:37:54.467

还可以在这里查看详细的安装说明，包括 F# PowerPack 和 MySQL 连接器：http: [//2sharp4u.wordpress.com/2010/09/03/installing-f-2-0-on-monolinux](http://2sharp4u.wordpress.com/2010/09/03/installing-f-2-0-on-monolinux)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-27T22:29:56.180

如果您使用的是 Ubuntu，请按照以下三个步骤操作。

1.  [从这里](http://fsxplat.codeplex.com/releases/view/55463)下载并安装“.deb”包。
2.  运行以下命令。

    ```
    sudo apt-add-repository ppa:directhex/ppa 
    sudo apt-get update 
    sudo apt-get install monodevelop 
    ```

3.  启动 MonoDevelop。转到加载项管理器，图库 > 语言绑定 > F#，安装。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-01-11T03:41:28.090

F# 编译器作者之一乔·帕默 (Joe Pamer) 在 7 月份帮助我恢复了这项工作，我在这里写下了步骤：http: [//saladwithsteve.com/2010/07/building-fsharp-on-the-mac.html](http://saladwithsteve.com/2010/07/building-fsharp-on-the-mac.html)

# c# - .Net Compact Framework 上的 DateTimePicker - 是否可以使用弹出键盘编辑年份？

> ID：832553
> 
> 赞同：2
> 
> 时间：2009-05-07T01:43:12.827
> 
> 标签：c#, .net, compact-framework, datetimepicker

我正在使用 Visual Studio 中的 c#/dotNet 构建一个 Windows 移动应用程序。有一个带有 DateTimePicker 控件的表单。我可以使用弹出键盘来编辑日期和月份，但它不适用于年份。

有没有其他人有这个问题？有什么办法解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T13:53:18.263

您是否尝试过制作新的干净的 Windows Mobile 应用程序？我刚刚制作了一个测试应用程序并尝试了您的场景，它对我来说非常有效。我能够编辑 datetimepicker 的所有部分。

我使用输入面板的左、右、上、下字符以及数字键进行测试。一切都为我检查了。

一个新的应用程序应该给你一个很好的测试用例来检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T20:56:32.523

在对干净的 Windows 移动项目进行一些测试后（感谢 CJCraft.com），我发现将日期格式更改为短而不是长会导致此问题。自定义格式的类似问题，任何带有 yyyy 的内容都可以使用键盘进行编辑，但如果缩短为 yy，它就不再起作用了。

# ruby-on-rails - 用于闪烁的优秀 CSS（在 Rails 中也称为信息消息，在 OSX 中称为咆哮）

> ID：832558
> 
> 赞同：13
> 
> 时间：2009-05-07T01:45:25.987
> 
> 标签：ruby-on-rails, css, user-interface, yui, tooltip

我很难让 CSS 像我希望的那样工作（当你登录或做某事时显示的那些小消息或确认你的操作，例如在 Rails 中）。

我希望它：

*   居住在任意 div 中
*   看起来像一个居中的盒子，里面有文字
*   仅与适合文本（如果小于指定的最大宽度）或环绕文本（如果更大）所需的一样大
*   具有居中或左对齐（或组合）文本，具体取决于 Flash（例如，短错误居中；较长的新手入门介绍是左对齐）；一个额外的 CSS 类（例如'flash info left'）来支持这个是可以的
*   在页面上相邻的页面上有多个闪烁效果很好（如示例）
*   最好由单个元素和文本周围的类组成，而不是包装元素内的元素内的文本
*   最好是 YUI CSS 兼容和纯 CSS（不是 JS）
*   在 IE7+、FFx 3+、Safari 3+ 上正常工作；在旧浏览器上工作“足够好”

我见过的大多数 CSS 都没有做到这一点——例如，大多数都指定了一个固定的宽度，这意味着它要么被包装得很差，要么有太多的填充。

我怎样才能做到这一点？（或者：为什么我不能？）

这是我当前的 CSS：

```
<div class="flash info">
  <span class="close"><a href="AJAX callback">X</a></span>
  Some informational text here that can be closed w/ the X
</div>
<div class="flash error">
  Some other simultaneous error
</div>

.flash {
    text-align: center;
    padding:    .3em .4em;
    margin:     0 auto .5em;
    clear:      both;
    max-width:  46.923em; /* 610/13 */  
    *max-width: 45.750em; /* 610/13.3333 - for IE */
}

.flash.error {
    border: thin solid #8b0000;
    background: #ffc0cb;
}

.flash.notice, .flash.info {
    border: thin solid #ff0;
    background: #ffe;
}

.flash.warning {
    border: thin solid #b8860b;
    background: #ff0;
}

.flash .close {
    float:  right;
}

.flash .close a {
    color:              #f00;
    text-decoration:    none;
} 
```

加分项：我只用下面的工具提示代码实现了我想要的部分；即，它不能包装。

出于某种原因，除非指定 nowrap 或宽度，否则它默认宽度非常小。我不知道为什么，或者如何让它以特定的、更宽的宽度包装（就像我想用闪光灯一样）。

```
Some text with <span class="tooltip">info <span>i can has info?</span></span> about a word

.tooltip {
  position: relative; /*this is the key*/
    background-color: #ffa;
}

.tooltip:hover{
    background-color: #ff6;
}

.tooltip span {
    display: none
}

.tooltip:hover span { /*the span will display just on :hover state*/
    z-index:        1; 
    display:        block;
    position:       absolute;
    top:            1.6em; 
    left:           0;
    border:         thin solid #ff0;
    background:     #ffe;
    padding:        .3em .6em;
    text-align:     left;
    white-space:    nowrap;
} 
```

谢谢！

*   赛

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T07:14:00.973

这些是 Javascript 中通知的有趣尝试，第一个有一个居中的通知，也许你可以从中获得灵感。

[像咆哮一样（mootools）](http://icebeat.bitacoras.com/mootools/growl/)

[ROAR（这个真不错）](http://digitarald.de/project/roar/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-02T06:32:29.857

首先，在寻找此类样式时，您应该将这些弹出窗口称为“咆哮”。这就是 Apple 使用的名称，而且它非常积极地使用它们，所以这就是您应该寻找的名称。

其次，Roar 的样式表很容易上手，你为什么不下载并复制它。虽然弹出窗口在 JS 中，但生成的脚本是纯 html。

mootools、JQ 和 Ext 有自己的 Growl 通知项目。

第三，如果你只是想自己做，如果你有它一直使用的尺寸，你可能最好制作一两个图形，然后在它们的中心对齐文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T15:52:30.650

这是一个很大的问题，但我会尝试打破它。

首先，关于您的前三个要求，您可能会被卡住，除非您可以自由支配您的浏览器平台。在大多数浏览器上，为了使框在任意 DIV 中居中，您必须为内部块元素指定宽度。它必须是一个块元素，以便您可以使它看起来像一个盒子（着色，边框）。在支持`display: inline-block`. 如果你愿意，你可以尝试用一些脚本来解决这个问题，根据内部文本的长度设置一个宽度，直到某个最大值。

您接下来的三个要求相互矛盾。如果您允许多个闪光灯，一些居中和一些左对齐，则仅对齐要求每个闪光灯都在其自己的块元素内，以便您可以应用对齐样式。

这并不明显，但对于`notice`,`warning`或`error`. 如果你想区分那些应该居中（短错误）和那些应该左对齐（新手介绍），用不同的键将它们放在闪存中。遍历您的闪存，应用必要的类名以获得每个键的所需样式。如果你必须支持多个错误信息，那么`flash[:error]`可以是一个数组。我会编写辅助方法以方便将消息添加到闪存中，因此视图中的条件代码更少。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T12:57:52.847

Alertify.js 有一个漂亮的 UI 并且易于使用，你也可以尝试一下。

[http://fabien-d.github.com/alertify.js/](http://fabien-d.github.com/alertify.js/)

# haskell - 程序程序员的功能代码片段列表？

> ID：832569
> 
> 赞同：16
> 
> 时间：2009-05-07T01:49:54.760
> 
> 标签：haskell, f#, ocaml, functional-programming, code-snippets

有时我仍然在尝试将程序代码转换为函数代码时遇到困难。

是否有映射到程序习语/片段的功能习语/片段列表？

**编辑**

由于似乎没有这些片段的集中网站，因此我将其变成了社区 wiki。请在此处粘贴任何程序 -> 功能片段。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-08T15:08:35.057

（从[fshub](http://cs.fshub.net)上的[这篇文章](http://cs.hubfs.net/forums/thread/10157.aspx)编辑）

我第一次在 OCaml/F# 中尝试中断/继续时，它让我陷入了一个（无限）循环，可以这么说，因为不存在这样的东西！在 OCaml 中，可以使用异常来中断循环，因为它们*非常*便宜，但在 F#（在 .NET 中）中，开销非常高，对于“正常”流控制没有用处。

这在不久前使用排序算法（以消磨时间）时出现，该算法大量使用重复/直到和中断。令我震惊的是，递归尾调用函数可以达到完全相同的结果，只是对可读性有一点影响。所以，我抛弃了“可变 bDone”和“虽然不是 bDone”，并尝试在没有这些命令式结构的情况下编写代码。下面仅提取循环部分，并展示如何使用尾调用编写重复/直到、do/while、while/do、break/continue 和 test-in-the-middle 样式代码。这些似乎都以与传统 F# 'while' 语句完全相同的速度运行，但您的里程可能会有所不同（某些平台可能无法正确实现尾调用，因此可能会出现堆栈错误，直到它们被修补）。最后是用两种风格编写的（糟糕的）排序算法，

让我们从一个以传统 F# 命令式风格编写的“do/while”循环开始，然后看看提供相同类型循环以及不同语义的功能变体，例如 while/do、repeat/until、中间测试，甚至中断/继续（没有单子......嗯，工作流程！）。

```
#light
(* something to work on... *)
let v = ref 0
let f() = incr v;
let g() = !v;
let N = 100000000

let imperDoWhile() =
    let mutable x = 0
    let mutable bDone = false
    while not bDone do
        f()
        x <- x + 1
        if x >= N then bDone <- true 
```

好的，这很容易。请记住，f() 总是至少被调用一次（do/while）。

这是相同的代码，但采用了函数式风格。请注意，我们不需要在这里声明一个可变的。

```
let funDoWhile() =
    let rec loop x =
        f()             (*Do*)
        if x < N then   (*While*)
            loop (x+1)
    loop 0 
```

通过将函数调用放在 if 块中，我们可以将其旋转为传统的 do/while。

```
let funWhileDo() =
    let rec loop x =
        if x < N then   (*While*)
            f()         (*Do*)
            loop (x+1)
    loop 0 
```

重复一个块直到某些条件成立（重复/直到）怎么样？够简单...

```
let funRepeatUntil() =
    let rec loop x =
        f()                 (*Repeat*)
        if x >= N then ()   (*Until*)
        else loop (x+1)
    loop 0 
```

没有单子的休息是怎么回事？好吧，只需引入一个返回 'unit' 的条件表达式，如下所示：

```
let funBreak() =
    let rec loop() =
        let x = g()
        if x > N then ()    (*break*)
        else
            f()
            loop()
    loop() 
```

怎么继续？好吧，这只是另一个循环调用！首先，使用语法拐杖：

```
let funBreakContinue() =
    let break' () = ()
    let rec continue' () =
        let x = g()
        if   x > N then break'()
        elif x % 2 = 0 then
            f(); f(); f();
            continue'()
        else
            f()
            continue'()
    continue'() 
```

然后再次没有（丑陋的）语法拐杖：

```
let funBreakContinue'() =
    let rec loop () =
        let x = g()
        if   x > N then ()
        elif x % 2 = 0 then
            f(); f(); f();
            loop()
        else
            f()
            loop ()
    loop() 
```

非常简单！

这些循环形式的一个很好的结果是它可以更容易地发现和实现循环中的状态。例如，冒泡排序不断循环整个数组，在找到不合适的值时交换它们。它跟踪阵列上的传递是否产生了任何交换。如果不是，那么每个值都必须在正确的位置，因此排序可以终止。作为优化，每次通过数组时，数组中的最后一个值最终都会被排序到正确的位置。因此，每次循环都可以缩短一个。大多数算法都会检查交换并在每次有交换时更新“bModified”标志。但是，一旦完成第一次交换，就不需要该分配；它已经设置为true！

这是实现冒泡排序的 F# 代码（是的，冒泡排序是糟糕的算法；快速排序很糟糕）。最后是一个不改变状态的命令式实现；它为每个交换更新 bModified 标志。有趣的是，命令式解决方案在小型阵列上速度更快，而在大型阵列上则慢一到两个百分点。（不过，这是一个很好的例子）。

```
let inline sort2 f i j (a:'a array) =
    let i' = a.[ i ]
    let j' = a.[ j ]
    if f i' j' > 0 then
        a.[ i ] <- j'
        a.[ j ] <- i'

let bubble f (xs:'a array) =
    if xs.Length = 0
    then ()

    let rec modified i endix =
        if i = endix then
            unmodified 0 (endix-1)
        else
            let j = i+1
            sort2 f i j xs
            modified j endix
    and unmodified i endix =
        if i = endix then
            ()
        else
            let j = i+1
            let i' = xs.[ i ]
            let j' = xs.[ j ]
            if f i' j' > 0 then
                xs.[ i ] <- j'
                xs.[ j ] <- i'
                modified j endix
            else
                unmodified j endix
    in unmodified 0 (xs.Length-1)

let bubble_imperitive f (xs:'a array) =
    let mutable bModified = true
    let mutable endix = xs.Length - 1
    while bModified do
        bModified <- false
        endix <- endix - 1
        for i in 0..endix do
            let j = i+1
            let i' = xs.[ i ]
            let j' = xs.[ j ]
            if f i' j' > 0 then
                xs.[ i ] <- j'
                xs.[ j ] <- i'
                bModified <- true
        done
    done 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-07T02:24:50.433

哦，现在这是一个很好的问题。这里有一些，[python 中的代码](http://docs.python.org/howto/functional.html)片段或类似的东西：

*   for 循环可以替换为迭代器

    `stripped_list = [line.strip() for line in line_list]`

*   for 循环可以替换为 apply 或 map 或 filter

    > > > 地图（上，['句子'，'片段']）['句子'，'片段']

*   具有函数组合的嵌套 for 循环

*   尾递归代替循环

*   生成器表达式代替 for 循环

    `sum(x*x for x in range(10))`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-07T03:40:15.167

老作业问题：

> 功能

```
(define f-imperative (y) (x) ; x is a local variable
  (begin
    (set x e)
    (while (p x y)
       (set x (g x y)))
    (h x y))) 
```

> 是典型的命令式风格，带有赋值和循环。编写一个等效的函数 f-functional，它不使用命令式功能 begin (sequencing)、while (goto) 和 set (assignment)。您可以使用任意数量的“辅助函数”，只要它们是使用 let 或 letrec 定义的，而不是在顶层定义的。

一种解决方案：

```
; The idea is simple: 
; Use parameter passing for binding the values 
; of the variables and recursion instead of iteration. 
;
; For those who like theory this is the main argument for proving 
; that recursive functions (LISP, lambda calculus) have the same 
; computational power as any imperative programming language. 

(define f-functional (y) 
  (letrec (
     (f-helper (lambda (x y)
                  (if (p x y) 
                     (f-helper (g x y) y)
                     (h x y)))))
     (f-helper e y)))

; Notice that y in f-helper is invariant.  Therefore, we can rewrite
; f-helper without y as follows.

(define f-functional (y) 
  (letrec (
     (f-helper (lambda (x)
                  (if (p x y) 
                     (f-helper (g x y))
                     (h x y)))))
     (f-helper e)))

; This is not the only solution, though I think it is one of the 
; nicer ones. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-13T22:20:10.350

fold 是一个非常有趣的函数，它是许多函数式算法的核心。假设我们要添加列表的所有元素。在过程代码中，您通常会创建一个累加器变量并将其设置为 0，然后遍历列表并按项目递增累加器。

在 Ocaml 中，您可以使用 fold 以功能方式执行相同的操作：

```
List.fold_left (+) 0 [1; 2; 3];;
- : int = 6 
```

例如，使用折叠，您可以计算列表中的单词数并同时连接它们：

```
List.fold_left (fun (count, concat) e -> (count + 1, concat ^ e)) (0, "") ["a"; "b"; "c"];;
- : int * string = (3, "abc") 
```

fold 的另一个有用的用途是将向量复制到集合中。由于 Ocaml 中的集合是不可变的，因此您实际上需要为列表的每个项目创建一个新集合，其中包含前一个集合和该新项目。

```
module Int = struct type t = int let compare = compare end;;
module IntSet = Set.Make(Int);;

let s = List.fold_left (fun set e -> IntSet.add e set) IntSet.empty [1; 2; 3];;
val s : IntSet.t = <abstr>

IntSet.elements s;;
- : IntSet.elt list = [1; 2; 3] 
```

在这里，我们的初始对象是一个空集，在每次调用时，都会使用 IntSet.add 根据前一个集和当前项创建一个新集。

自己递归实现一次折叠，以了解它是如何在幕后完成的，然后在任何地方使用内置版本。即使在 C++ 中，使用[std::accumulate](https://stackoverflow.com/questions/618472/using-of-stdaccumulate)！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-28T12:29:23.693

PLEAC 项目几乎完全以此为目标——用其他语言实现 perl 食谱中的所有示例。这是 ocaml 版本的链接（这是三个 100% 完成的版本之一）[http://pleac.sourceforge.net/pleac_ocaml/index.html](http://pleac.sourceforge.net/pleac_ocaml/index.html)

# .net - .Net 应用程序突然退出

> ID：832571
> 
> 赞同：0
> 
> 时间：2009-05-07T01:52:04.333
> 
> 标签：.net

我的 .Net 应用程序在某些机器上突然退出（这是一个桌面应用程序）。我试图捕捉异常，但`catch`我提出的语句根本无法捕捉正在发生的异常。

任何想法如何解决或诊断这个问题？

**注意：这个异常只发生在客户端的机器上，发布模式，我们没有调试工具可以使用。**

**注意 2：应用程序事件日志根本不包含任何错误。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T02:00:35.060

您可能想尝试向[System.Windows.Forms.Application.ThreadException 和 System.AppDomain.CurrentDomain.UnhandledException](https://stackoverflow.com/questions/154597/is-there-a-way-to-define-an-action-for-unhandled-exceptions-in-a-winforms-net-3/154665#154665)添加事件处理程序，以查看是否可以找出导致应用程序终止的异常（如果有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T02:09:21.780

在 Visual Studio 的调试下拉菜单中，选择异常并选中 throws 下的所有复选框。这应该在任何未处理的异常中停止应用程序。检查它并给我们结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T02:19:50.850

如果 .NET 运行时正在记录某些内容，您能否检查客户端 PC 上的应用程序事件日志？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T03:07:06.040

这几乎总是由您使用的本机代码引发 Win32 异常的 COM/PInvoke 问题引起的。在某些情况下，当主要状态损坏（例如无效的堆栈指针）时，Windows 将选择简单地中止进程而不是正常将其关闭。

如果您可以确定关闭之前的特定行为，则可以缩小对可能导致问题的控件/PInvokes 的搜索范围。

# sharepoint - 非 SharePoint 页面上的资源管理器视图

> ID：832572
> 
> 赞同：0
> 
> 时间：2009-05-07T01:52:30.993
> 
> 标签：sharepoint

有谁知道是否可以将文档库的资源管理器视图嵌入到托管 SharePoint 网站之外的页面中？我想在完全独立于 SharePoint 的 ASPX 应用程序中显示此功能。我知道可用的 Web 服务，问题是关于嵌入文件夹视图功能，而不是以编程方式与 SharePoint 通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T21:32:14.980

我最终解构了原始的资源管理器视图并将其提炼为以下内容：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>Shared Documents</TITLE>
<SCRIPT language=javascript src="http://[host]/_layouts/1033/init.js" type=text/javascript></SCRIPT>
<SCRIPT language=javascript src="http://[host]/_layouts/1033/core.js" defer type=text/javascript></SCRIPT>
</HEAD>
<BODY scroll=yes onload="NavigateHttpFolderIfSupported('http:\u002f\u002f[host]\u002fsites\u002f[site]\u002fShared Documents', 'expFrame');">
<FORM id=aspnetForm name=aspnetForm>
<IFRAME id=expFrame name=expFrame width=800 height=500></IFRAME>
</FORM>
</BODY></HTML> 
```

它可能会做得更整洁一些，但它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T17:05:58.197

虽然您可能认为某些 ActiveX 控件需要来自 Sharepoint 的特殊内容，但 Explorer View 有点直接融入 IE。只要您以前在 Windows 会话中的 SharePoint 中使用过它，只要执行以下操作即可为您提供资源管理器视图框架：

```
<iframe src="\\path\to\sharepoint\webdav\folder"> 
```

只要页面托管在本地或您的 Intranet 上，您也可以使用任何有效的 Windows 资源管理器路径来执行此操作。只需尝试使用以下内容制作本地测试 html 文件：

```
<iframe src="c:\"> 
```

请注意，这样做会遇到一些问题，因为需要将身份验证传递给 SharePoint。我发现的最好方法是从 Sharepoint 复制 core.js，删除其中的所有内容，但导航内容除外，并删除这些方法中对不可用内容的任何调用，然后使用 NavigateHttpFolderIfSupported() 导航到“ [http：/ /path/to/sharepoint/webdav/文件夹](http://path/to/sharepoint/webdav/folder)“。

我使用此方法遇到的唯一问题是与 IE8 不兼容，因此请注意这一点。我相当肯定它必须与跨站点脚本保护和 core.js 内部的调用有关，但整个文件感觉非常 rube-goldberg-esque，我不想弄乱它。

# sql - SQL 查询帮助：选择当月的随机员工

> ID：832575
> 
> 赞同：1
> 
> 时间：2009-05-07T01:55:06.277
> 
> 标签：sql, linq, random, query-optimization

谁能告诉我如何从这个声明中获取记录

*   选择最近 x 个月内不是当月员工的随机员工

表员工
ID
EmployeeName

表 EmployeeOfTheMonth
ID
EmployeeID
MonthStartedDate
MonthEndedDate

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T02:33:24.280

```
select top 1 id from employee as emp 
where not exist(
    select top 1 * 
      from employeeofthemonth as em 
      where em.id = emp.id and dateadd(m, -6, getdate()) < monthendeddt )
order by newid() 
```

...或类似的东西。我没有运行 sql，但在 mssql 服务器上，这应该是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-08T08:20:50.193

修改最后一个答案，我更喜欢使用 IN 语句

```
 DECLARE @xMonth INT
SET @xMonth = 3

SELECT TOP 1 ID
FROM Employee
WHERE ID NOT IN (SELECT EmployeeID 
FROM EmployeeOfTheMonth
WHERE DATEADD(m, -@xMonth, GETDATE()) < MonthEndedDate)
ORDER BY NEWID() 
```

# visual-studio-2008 - 从对象生成 DTO

> ID：832578
> 
> 赞同：7
> 
> 时间：2009-05-07T01:56:40.080
> 
> 标签：visual-studio-2008, code-generation, devexpress, resharper, vsx

我想从我现有的一些对象中自动生成一些 DTO，我想知道是否已经存在 Resharper、DevExpress 或 VSX 开源可供使用，我需要一个工具来查看我的代码并让我选择我想要的属性包含在我的 DTO 中，然后基于它生成一个类......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-07T03:53:45.710

另一种意见是在 T4 模板中使用一些反射代码。

T4 模板是 Visual Studio 的强大隐藏功能之一。

看看[这里](http://blogs.msdn.com/alexj/archive/2009/03/03/tip-3-getting-started-with-t4.aspx)，看看开始使用 T4 是多么容易。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-07T02:15:30.563

这是一种 hack，但您可以使用 Visual Studio/Resharper 从类中提取接口，然后创建 DTO 类并从接口派生，然后使用 Visual Studio 自动实现接口成员（然后，可选择删除接口）。

# .net - 使用传输安全和证书的 WCF 服务出现 SSL 错误。验证

> ID：832579
> 
> 赞同：2
> 
> 时间：2009-05-07T01:57:02.870
> 
> 标签：.net, wcf, ssl, wcf-security

我不知道这是否是更适合 Serverfault.com 的问题，真的取决于答案，但我已按照.NET C# 中的[本教程](http://msdn.microsoft.com/en-us/library/cc949005.aspx)在“wsHttpBinding”（传输安全和证书身份验证）下设置 WCF 服务，我已经使用[此处](http://msdn.microsoft.com/en-us/library/cc949067.aspx)描述的方法创建了一个测试开发证书，并且我还在 IIS 的绑定中配置了我的 HTTPS 443 端口。

每一步一切都运行得很好，但是我在创建的示例“Hello World”服务中收到一个错误（同样，所有内容都是通过我首先声明的 MSDN 教程链接进行的）点击`https://vd1/WcfWsHttpBindingTest/Service.svc`（VD1 是我的本地计算机名称） ：

```
HTTP Error 403.7 - Forbidden
The page you are attempting to access requires your browser to have a Secure Sockets Layer (SSL) client certificate that the Web server recognizes. 
```

我已经按照说明安装了我的[服务器证书](http://msdn.microsoft.com/en-us/library/cc949067.aspx)和[客户端证书](http://msdn.microsoft.com/en-us/library/cc949057.aspx)，并且已经在 IIS 中配置了这两个教程；此外，如果我否定“https”并仅使用“http”，我会收到 403.4 Forbidden，说明我正在尝试访问已使用 SSL 保护的页面，所以我很确定它的那一面正在工作。

有什么想法吗？
我没有偏离教程，我正在运行 IIS 7.0 和 Vista Business。

如果有人可以通过为我提供更好的教程链接来使用 wsHttpBinding 配置服务来从头开始，这甚至会有所帮助。

****如果有人看过我最初的帖子，您会注意到我关闭了我的答案，因为它已经演变为上述问题****

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-08T00:36:47.873

感谢您的帮助坦纳。

经过两个小时的挠头和修补，在一位同事的帮助下，我们将其缩小到一个未正确完成的步骤。证书被添加到“本地用户”而不是“本地计算机”。

再次感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T13:45:16.240

听起来客户端凭据没有设置或配置文件有问题。您能否发布配置文件，以便我们可以看到 ClientCredentials 配置，该配置在如下标签中配置： < clientCertificate > 。

或者，可以在代码中配置证书，因此如果您有在代理上配置证书的源代码，请发布。

最后的检查将是 Vista 特定的。您应该以管理员身份运行 VS（以及可能与证书生成相关的过程）：[有关 Vista Admin 的一些信息](http://geekularity.com/2007/02/02/installing-self-signed-ssl-certificates-in-vista/)

如果这些都没有帮助，请尝试[CodePlex](http://www.codeplex.com/WCFSecurityGuide)以获得一些指导，我发现安全配置清单对我的帮助无穷无尽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-29T13:44:55.413

如果系统提示您输入管理员密码或进行确认，请输入您的密码，或单击继续。2\. 在 IIS 管理器中，找到您要更改 SSL 设置的 Web 应用程序。3.在功能视图中，双击 SSL 设置。4.在 SSL 设置页面上，选择
客户端证书下的接受选项。5.在操作窗格中，单击应用

# mysql - 如何查询多对多？

> ID：832584
> 
> 赞同：38
> 
> 时间：2009-05-07T02:00:44.233
> 
> 标签：mysql, many-to-many

我在看 ruby​​ on rails 教程时发现了以下表格结构。

```
table actors
id  int  11  primary key auto_increment
name  varchar  30

table movies
id  int  11  primary key auto_increment
name  varchar  30

table actors_movies
actor_id  int  11
movie_id  int  11 
```

如何进行查询以选择演员参与的电影？

我不是要 ruby​​ on rails 代码。我想要实际的 mysql 查询字符串。

谢谢！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-05-07T02:05:31.773

也许是这样的：

```
select m.name
from movies m
inner join actors_movies am on m.id = am.movie_id
inner join actors a on am.actor_id = a.id
where a.name = 'Christopher Walken' 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-05-07T02:07:55.370

要考虑的一件事是您将加载作者对象（因为 RoR 模型），因此使用 ID 就足够了：

```
select movies.id, movies.name
from movies inner join actors_movies
on actors_movies.movie_id=movies.id
where actors_movies.actor_id=$actor_id 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-07T02:06:00.680

很简单，只需使用组合表来加入电影/演员表：

```
Select m.name 
From actors a
Inner Join actors_movies am On am.actor_id = a.id
Inner Join movies m On m.id = am.movie_id
Where a.name = @your_actor 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-07T02:08:38.460

```
select m.* from movies m 
inner join actors_movies am on am.movie_id  = m.id 
inner join actors a on a.id = am.actor_id 
where a.someField = somevalue 
```

# asp.net-mvc - 寻找 ASP.NET MVC 的网格

> ID：832596
> 
> 赞同：12
> 
> 时间：2009-05-07T02:09:13.607
> 
> 标签：asp.net-mvc, grid

我正在为 ASP.NET MVC 寻找一个健壮的轻量级网格。我宁愿不写网格，如果其他人已经做过，但我还没有找到一个像样的网格。它应该是 508 兼容的，并且在大多数情况下，508 兼容消除了所有的 JavaScript 网格。

*   它必须易于使用。
*   不太贵（几百块钱）

我已经查看了以下网格：

*   [分机](http://extjs.com/deploy/dev/examples/samples.html)
*   [MvcContrib](http://weblogs.asp.net/shijuvarghese/archive/2008/07/23/asp-net-mvc-grid-view-using-mvccontrib.aspx)
*   [jQueryGrid](http://www.trirand.com/blog/?page_id=6)

**更新**

我找到了一个 javascript 网格，它可以执行我正在寻找的魔法，保持 508 兼容性。

这是一个名为[Datatables](http://www.datatables.net/)的 jQuery 插件。它采用页面上预先存在的表格并为其提供可排序性和搜索功能。其他网格要么自己呈现表格，要么向服务器发出 ajax 请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T02:16:58.983

我喜欢这个： http: [//www.codeproject.com/KB/aspnet/MVCFlexigrid.aspx](http://www.codeproject.com/KB/aspnet/MVCFlexigrid.aspx)

还有

[http://blog.maartenballiauw.be/post/2008/06/Code-based-ASPNET-MVC-GridView.aspx](http://blog.maartenballiauw.be/post/2008/06/Code-based-ASPNET-MVC-GridView.aspx) [http://www.reconstrukt.com/ingrid/](http://www.reconstrukt.com/ingrid/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T03:00:05.573

Yahoo YUI Library DataTable 控件支持“[渐进增强](http://developer.yahoo.com/yui/examples/datatable/dt_enhanced.html)”。您输出一个标准的 HTML 表格。这在禁用 JavaScript 的浏览器上显示得很好。在支持 JavaScript 的浏览器上，该表被一个增强版本取代，该版本可以支持客户端排序和其他可能的其他奇特事物（我只使用它来启用排序）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-30T20:18:47.530

我刚刚看到[这篇文章](http://www.codeproject.com/KB/aspnet/AspNetMVCandJqGrid.aspx)，详细介绍了 jQuery Grid 与 ASP.NET MVC 的使用。这是处理网格的一个很好的整体策略，它甚至详细说明了 jQuery Grid 更困难的过滤能力！

# jquery - jQuery 搜索和过滤表

> ID：832598
> 
> 赞同：6
> 
> 时间：2009-05-07T02:09:22.153
> 
> 标签：jquery, search, filter

我正在寻找一个 jQuery 插件，它将根据输入值过滤表。

我遇到了[http://rikrikrik.com/jquery/quicksearch/](http://rikrikrik.com/jquery/quicksearch/)，但我不知道如何使它适用于已经存在的输入框。

目前它为我创建了一个新的输入表单（我不想要），但我希望能够将它与具有输入提交按钮的现有输入框一起使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-04-06T15:44:39.407

看来时间已经为你解答了你的问题。[QuickSearch](http://github.com/riklomas/quicksearch)实际上允许您将搜索功能附加到预先存在的文本输入框。

riklomas 提到：

> 请注意，最新版本的 quicksearch 的用法发生了变化，代码不向后兼容，表单和输入不再由脚本构建。

我今天才开始使用它，看起来效果很好。它似乎确实消耗了它的 CPU 份额，至少在我的测试环境（Firefox 3.6、OS X 和一个相当大的数据集）上，但这可能不是这个特定插件所独有的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T02:31:43.223

开箱即用的插件无法做到这一点，除非您深入研究其代码并对其进行修改以执行此操作。

搜索输入框是由它自己的 javascript 自动生成的，并且没有选项可以更改该行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-21T10:14:59.447

@Adam，尝试触发插件生成的文本字段的 onKeyUp 。首先，您需要知道该字段的 id（使用 firebug），假设它是`generated_fld`，那么代码将是：

```
$(document).ready(function() {
   $("#my_other_input").keyup(function(){
       $("#generated_fld").val($(this).val()).keyup();
   })
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-10T23:19:39.920

我已经使用这段代码一段时间了。第一的：

1.  过滤/搜索的输入文本字段具有 id 'search'
2.  实际上它只是使用每行的第一个单元格，您可以轻松扩展它（按照代码上的注释）

编码：

```
$('#search').on('input', function () {
    var str = $('#search').val().toLowerCase();
    $("#containerTable tr").each(function (index, element) {
        var label = $(this).find("td").eq(0).html().toLowerCase();
        //var labelx = $(this).find("td").eq(x).html().toLowerCase();
        //...

        if (str == '' || label.indexOf(str) != -1) {
           // || labelx.indexOf(str) != -1) ...
           $(this).css("display", "table-row");
        }
        else {
           $(this).css("display", "none");
        }
    });        
}); 
```

# msbuild - MSBuild 与 Visual Studio 2005

> ID：832602
> 
> 赞同：0
> 
> 时间：2009-05-07T02:14:57.663
> 
> 标签：msbuild

谁能告诉我如何使用 VS 2005 编写和运行 msbuild？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T02:18:23.520

msbuild 文件只是一个计划文本文件。您甚至可以在记事本中编写它并从命令行运行它。如果您想将它作为构建的一部分运行，只需

1.  右键单击项目
2.  选择属性
3.  转到构建事件选项卡
4.  创建构建事件以运行 msbuild

例如，创建一个名为 test.proj 的文本文件：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
   <PropertyGroup>
      <TextToShow>Hello World!!</TextToShow>
   </PropertyGroup>

   <Target Name="HelloWorld"> 
      <Message Text="$(TextToShow)" />
   </Target>
</Project> 
```

你可以通过这种方式从命令行运行它

```
msbuild /target:HelloWorld test.proj 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T02:38:34.127

如果您想将 MSBuild 用作 Visual Studio 2005 项目的构建系统，则无需执行任何操作。.csproj 和 .vbproj 文件是 MSBuild 文件。Visual Studio 解决方案文件 (.sln) 也可以传递给 MSBuild.exe。使用 Visual Studio 构建项目会调用 MSBuild。

如果您需要编写创建、修改和运行 msbuild 文件的代码，Microsoft.Build.*.dll 程序集有相应的类。

# c - 在 GTK+ 中制作网格

> ID：832609
> 
> 赞同：5
> 
> 时间：2009-05-07T02:17:45.737
> 
> 标签：c, algorithm, gtk

我不是要代码实现，但考虑到 GTK+ 的技能，从抽象的角度来看，实现网格以使每个方块都可以点击等的最佳方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-07T02:41:15.993

就我个人而言，我会使用一个表格 - [http://library.gnome.org/devel/gtk/stable/GtkTable.html](http://library.gnome.org/devel/gtk/stable/GtkTable.html) - 并用按钮填充它 - [http://library.gnome.org/devel/gtk/稳定/GtkButton.html](http://library.gnome.org/devel/gtk/stable/GtkButton.html)。从那里开始，如果您不希望按钮看起来像按钮，我会设置浮雕 - [http://library.gnome.org/devel/gtk/stable/GtkButton.html#gtk-button-set-relief](http://library.gnome.org/devel/gtk/stable/GtkButton.html#gtk-button-set-relief) - 无。

这样做会给您一个网格，其中每个元素的大小相同，并且当您单击网格中的项目时会触发一个事件。

上面假设网格将有不止一行，如果您只计划有一行，您最好使用 GtkHButtonBox - [http://library.gnome.org/devel/gtk/stable/GtkHButtonBox.html](http://library.gnome.org/devel/gtk/stable/GtkHButtonBox.html) - 或 GtkVButtonBox - [http://library.gnome.org/devel/gtk/stable/GtkVButtonBox.html](http://library.gnome.org/devel/gtk/stable/GtkVButtonBox.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-07T10:28:01.923

如果网格很大，您也可以考虑[GtkTreeView](http://library.gnome.org/devel/gtk/stable/TreeWidgetObjects.html)。

它可以将树显示为网格，并支持矩形选择。单元格可以显示文本、数字和简单的小部件，如按钮、切换、选项菜单、进度条等。即使在大型数据集（数千行）上，它也表现良好，并且具有列排序等不错的功能。

然而，API 相当复杂 :-( 这是一个完整的 MVC 东西，需要花点时间才能让它正常工作。

gtk-demo 中有一些示例代码：查看“Tree View”下的“Editable Cells”演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T06:42:57.970

我赞同 mlowen 的建议，使用 GtkTable 作为网格的主要组织，很容易获得类似网格的外观。如果您不需要按钮的内置绘图，您可能还想研究用普通的[GtkEventBox填充每个单元格。](http://library.gnome.org/devel/gtk/stable/GtkEventBox.html)

事件框是一个不可见的小部件，它基本上添加了一个窗口并使覆盖区域可点击。让 GTK+ 的一些“静默”小部件更具交互性是很有用的，例如，它通常用于[GtkLabel](http://library.gnome.org/devel/gtk/stable/GtkLabel.html)后面以使其可点击；如果标签为您的需求提供了足够的绘图功能，那么这也是一种可能的继续方式。

# php - 缺少 ) 在 html 表单代码中的参数列表之后

> ID：832615
> 
> 赞同：0
> 
> 时间：2009-05-07T02:21:33.827
> 
> 标签：php, javascript

我正在尝试使用以下代码在弹出窗口中显示 $formcode，这是表单的 html 代码。我知道这不是一种理想的方法，但我想了解它为什么不起作用。

```
<?php
$blah = "Well"; $test = "Done";
echo '<script type="text/javascript" src="fetchlayers.js"></script>';
$formcode = "<form action=\"process.php\" method=\"post\" enctype=\"multipart/form-data \"><label for=\"file\">Filename:</label><input type=\"file\" name=\"file\" id=\"file\"/> <br /><input type=\"submit\" name=\"submit\" value=\"Submit\" onclick=\"setTimeout(function() { alert('$blah'); },1250);\" /></form>";

echo "<h1>hello</h1>
<div id='form'>
<a href='#' onclick=\"createpopup('" . htmlentities($formcode) . "'); return false;\">
click here</a>
</div>"; 
```

在 Firebug 中，我在参数列表之后丢失了 )，这似乎有些随意，因为括号的数量是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T02:29:25.100

我不确定是不是这个，因为我无法测试它，但检查 alert('$blah')

它应该与\'我认为

```
alert(\'$blah\') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T02:28:56.320

我不确定您所说的不工作是什么意思，但如果您的意思是窗口没有弹出，那么问题出在您的**fetchlayer.js**文件中。但其他明智的做法是让我们知道您所说的不工作到底是什么意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T02:31:36.343

$formcode 的内容需要对单引号进行双转义：

```
alert(\\'$blah\\'); 
```

使字符串包含“\'”。

# java - 在 Java 中去除 HTML 标签

> ID：832620
> 
> 赞同：44
> 
> 时间：2009-05-07T02:22:51.747
> 
> 标签：java, html

是否有现有的 Java 库提供从字符串中去除所有 HTML 标记的方法？我正在寻找与`strip_tags`PHP 中的函数等效的东西。

我知道我可以使用[这个 Stackoverflow 问题](https://stackoverflow.com/questions/44078/strip-all-html-tags-except-links)`stripTags()`中描述的正则表达式，但是我很好奇Apache Commons 库中的某个地方是否已经有一个可以使用的方法。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-07-17T15:03:57.100

使用[JSoup](http://jsoup.org/)，它有据可查，可在 Maven 上使用，并且在花了一天时间使用几个库之后，对我来说，这是我能想象到的最好的一个。我自己的观点是，像这样的工作，将 html 解析为普通文本，应该可以在一行代码中实现-> 否则库以某种方式失败了...只是说 ^^ 所以这就是 JSoup 的单行代码-在 Markdown4J 中，类似的事情在 Markdownj 中也是不可能的，在 htmlCleaner 中，大约 50 行代码让人头疼……

```
String plain = new HtmlToPlainText().getPlainText(Jsoup.parse(html)); 
```

你得到的是真正的纯文本（不仅仅是作为字符串的 html 源代码，就像在其他库中一样）-> 他在这方面做得很好。它的质量或多或少与 PHP 的 Markdownify 相同......

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-05-07T03:29:48.153

无论您做什么，请确保在开始尝试剥离标签之前对数据进行规范化。我最近参加了一个涵盖 XSS 过滤器规避的 Web 应用安全研讨会。人们通常会认为搜索`<`or`&lt;`或其十六进制等效项就足够了。在看到一张包含 70 种`<`编码方式以击败过滤器的幻灯片后，我被震撼了。

**更新：**

下面是我所指的演示文稿，请参阅幻灯片 26 了解 70 种编码方式`<`。

[过滤器规避：Houdini on the Wire](http://www.slideshare.net/rob.ragan/filter-evasion-houdini-on-the-wire)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2011-11-27T01:18:30.470

这是我在google上找到的。对我来说效果很好。

```
String noHTMLString = htmlString.replaceAll("\\<.*?\\>", ""); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-05-07T02:29:39.080

可能有一些，但最强大的是使用实际的 HTML 解析器。[这里](http://htmlparser.sourceforge.net/)有一个，如果格式合理，您还可以使用 SAX 或其他 XML 解析器。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2009-05-13T17:53:59.253

在打开这个问题将近一周之后，我可以肯定地说，Java API 或 Apache 库中没有可用的方法从字符串中去除 HTML 标记。您要么必须使用前面答案中描述的 HTML 解析器，要么编写一个简单的正则表达式来去除标签。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-11-26T10:22:05.203

使用 Jsoup 时，它比上述答案中描述的更容易：

```
String html = "bla <b>hehe</b> <br> this is awesome simple";

String text = Jsoup.parse(html).text(); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-05-07T03:03:19.403

我已经使用[nekoHtml](http://nekohtml.sourceforge.net/)来做到这一点。它可以去除所有标签，但也可以轻松保留或去除标签子集。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-03-19T12:36:01.520

我知道这个问题已经很老了，但我也一直在寻找这个问题，似乎在 java 中找到一个好的和简单的解决方案仍然不容易。

今天我遇到了这个小函数库。它实际上试图模仿 php`strip_tags`函数。

[http://jmelo.lyncode.com/java-strip_tags-php-function/](http://jmelo.lyncode.com/java-strip_tags-php-function/)

它的工作原理是这样的（从他们的网站复制）：

```
 import static com.lyncode.jtwig.functions.util.HtmlUtils.stripTags;

    public class StripTagsExample {
      public static void main(String... args) {
        String result = stripTags("<!-- <a href='test'></a>--><a>Test</a>", "");
        // Produced result: Test
      }
    } 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-08-23T00:03:56.247

嗨，我知道这个帖子很旧，但它仍然在谷歌上名列前茅，我正在寻找一个快速解决同样问题的方法。找不到任何有用的东西，所以我想出了这个代码片段——希望它对某人有所帮助。它只是循环字符串并跳过所有标签。简单明了。

```
boolean intag = false;
String inp = "<H1>Some <b>HTML</b> <span style=blablabla>text</span>";
String outp = "";

for (int i=0; i < inp.length(); ++i)
{
    if (!intag && inp.charAt(i) == '<')
        {
            intag = true;
            continue;
        }
        if (intag && inp.charAt(i) == '>')
        {
            intag = false;
            continue;
        }
        if (!intag)
        {
            outp = outp + inp.charAt(i);
        }
}   
return outp; 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-09-24T08:10:31.863

使用纯迭代方法且没有正则表达式：

```
public String stripTags(final String html) {

    final StringBuilder sbText = new StringBuilder(1000);
    final StringBuilder sbHtml = new StringBuilder(1000);

    boolean isText = true;

    for (char ch : html.toCharArray()) {
        if (isText) { // outside html
            if (ch != '<') {
                sbText.append(ch);
                continue;
            } else {   // switch mode             
                isText = false;      
                sbHtml.append(ch); 
                continue;
            }
        }else { // inside html
            if (ch != '>') {
                sbHtml.append(ch);
                continue;
            } else {      // switch mode    
                isText = true;     
                sbHtml.append(ch); 
                continue;
            }
        }
    }

    return sbText.toString();
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-01-23T14:28:41.493

由于html片段的缩写（字符串截断），我也遇到了正则表达式无法检测到的未封闭html标签的问题。例如：

```
Lorem ipsum dolor sit amet, <b>consectetur</b> adipiscing elit. <a href="abc" 
```

因此，参考 2 个最佳答案（JSoup 和正则表达式），我更喜欢使用 JSoup 的解决方案：

```
Jsoup.parse(html).text() 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-09-17T01:02:38.433

Wicket 使用以下方法对 html 进行转义，位于：org.apache.wicket.util.string.Strings

```
public static CharSequence escapeMarkup(final String s, final boolean escapeSpaces,
    final boolean convertToHtmlUnicodeEscapes)
{
    if (s == null)
    {
        return null;
    }
    else
    {
        int len = s.length();
        final AppendingStringBuffer buffer = new AppendingStringBuffer((int)(len * 1.1));

        for (int i = 0; i < len; i++)
        {
            final char c = s.charAt(i);

            switch (c)
            {
                case '\t' :
                    if (escapeSpaces)
                    {
                        // Assumption is four space tabs (sorry, but that's
                        // just how it is!)
                        buffer.append("&nbsp;&nbsp;&nbsp;&nbsp;");
                    }
                    else
                    {
                        buffer.append(c);
                    }
                    break;

                case ' ' :
                    if (escapeSpaces)
                    {
                        buffer.append("&nbsp;");
                    }
                    else
                    {
                        buffer.append(c);
                    }
                    break;

                case '<' :
                    buffer.append("&lt;");
                    break;

                case '>' :
                    buffer.append("&gt;");
                    break;

                case '&' :

                    buffer.append("&amp;");
                    break;

                case '"' :
                    buffer.append("&quot;");
                    break;

                case '\'' :
                    buffer.append("&#039;");
                    break;

                default :

                    if (convertToHtmlUnicodeEscapes)
                    {
                        int ci = 0xffff & c;
                        if (ci < 160)
                        {
                            // nothing special only 7 Bit
                            buffer.append(c);
                        }
                        else
                        {
                            // Not 7 Bit use the unicode system
                            buffer.append("&#");
                            buffer.append(new Integer(ci).toString());
                            buffer.append(';');
                        }
                    }
                    else
                    {
                        buffer.append(c);
                    }

                    break;
            }
        }

        return buffer;
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-01-31T13:00:50.507

```
public static String stripTags(String str) {
    int startPosition = str.indexOf('<');
    int endPosition;
    while (startPosition != -1) {
        endPosition = str.indexOf('>', startPosition);
        str = str.substring(0, startPosition) + (endPosition != -1 ? str.substring(endPosition + 1) : "");
        startPosition = str.indexOf('<');
    }
    return str;
} 
```

# c# - asp.net 会话超时

> ID：832626
> 
> 赞同：0
> 
> 时间：2009-05-07T02:26:47.290
> 
> 标签：c#, asp.net

如何在 asp.net 中设置会话超时？

通过代码和 web.config（我听说你可以在这里做）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T02:37:30.993

是 在您的 web.config 中

```
<sessionState
mode="InProc"
stateConnectionString="tcpip=127.0.0.1:42424"
sqlConnectionString="data source=127.0.0.1;Trusted_Connection=yes"
cookieless="false"
timeout="30"
/> 
```

保持会话状态 30 分钟

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T02:35:42.060

通过 web.config 执行此操作：

修改 sessionState 元素的 timeout 属性。

```
<sessionState timeout="30" /> 
```

在代码中做到这一点：

```
Session.Timeout = 20; 
```

十分简单。:)

# messaging - 如何通知用户另一个在线？

> ID：832628
> 
> 赞同：1
> 
> 时间：2009-05-07T02:27:50.393
> 
> 标签：messaging, instantmessenger

我正在使用 yahoo messenger 与我的朋友聊天。每次我的一个朋友（几乎是中间）上线时，YM 都会通知我。雅虎怎么样！（和其他公司）如何实施？据我*猜测*，有一些技术可以解决这个问题：

*   拉动：客户端不断（可能持续 500 毫秒）询问服务器哪些用户（在用户列表中）刚刚上线，然后通知用户。

*   推送：服务器确定哪些用户上线，然后向客户端发送通知。

第二种方法更容易接受。用户的数据可能包含他的朋友列表（谁将他添加到他们的列表中），并且登录事件引发，服务器应用程序将向该列表中的所有用户发送通知消息。

好吧，这只是我的猜测。现实中是如何实现的？你能告诉我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T02:51:02.303

服务器正在向下推送数据。服务器有一个你的朋友列表，更重要的是你在谁的列表上。当您登录时，它会查看第二个列表并向每个连接的客户端推送一条消息。这真的很简单。查看 Pidgin 的源代码 ( [pidgin.im](http://pidgin.im/) ) 了解更具体的实现细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T02:36:34.507

我建议使用 Wireshark 或任何其他网络流量检查器来准确查看 Yahoo Messenger 在运行时发生的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-07T02:46:19.647

应该是“推式架构”。

服务器不能容忍大量用户的持续拉动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T02:35:38.520

可能是长期存在的 HTTP 请求。IM 客户端调用服务器上的 HTTP 方法，但服务器直到有更新才响应。此时，它以“更新”响应，然后 IM 客户端调用另一个 HTTP 方法来获取更新。

真正的推送是不可能的，因为互联网上的许多（大多数？）人都在 NAT 路由器后面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-07T02:41:53.260

[它使用与Buddy Check](http://www.vista-files.org/programs/nuotex/buddycheck.html)类似的技术，但仅让您知道用户是否希望您知道。但**Buddy Check**实际上给了你真正的真相。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T02:43:11.603

我同意其他人的观点，您可以自己检查源代码或网络数据包，但从另一个角度考虑：当您拥有数十万用户并且大多数用户可能只有几十个“伙伴”时，哪种方法更有意义?

1.  每隔几秒就有数十万用户 ping 您的服务器 = 大量负载
2.  当朋友的状态发生变化时向客户推送更新，这可能发生的规模要小得多——每隔几分钟更新几次。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-07T03:32:22.237

当您登录时，雅虎会向您列表中同时在线的每个人发送（推送）一个“在线事件”。如果连接是通过 HTTP 进行的，那么您和 Yahoo 的服务器之间会进行 ping/pong 交换以保持连接处于活动状态（[维基百科](http://en.wikipedia.org/wiki/YMSG)）——这允许这种推送通过 NAT 等进行。否则，TCP/IP 连接会在您登录期间保持活动状态。如果 ping/pong 不成功（经过多次重试，您会假设），雅虎服务器会向您的所有在线朋友发送（推送）消息，通知他们“离线事件”。

所以回答你的问题，这是一个推动。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-07T03:32:28.773

我知道 gtalk over gmail 和 facebook 使用[comet](http://en.wikipedia.org/wiki/Comet_(programming))。这看起来是一种很好的技术，但价格昂贵。这是一个[很好的](http://www.zeitoun.net/articles/comet_and_php/start)关于 PHP的教程

# sql-server - 什么是“代替”触发器？

> ID：832639
> 
> 赞同：1
> 
> 时间：2009-05-07T02:31:15.363
> 
> 标签：sql-server, database, tsql

在 SQL Server 中，什么是`Instead Of`触发器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-07T02:33:57.993

来自[数据库日志](http://www.databasejournal.com/features/mssql/article.php/1437741/Simplifying-Instead-Of-Triggers.htm)：

> 什么是“代替”触发器？
> 
> 在 SQL Server 的早期版本中， **触发器**是附加到表并在指定表上发生预定义更新后自动执行的代码段。这些当然仍然存在于 SQL Server 2000 及更高版本中。**而不是触发器** 以类似的方式附加到表中，但其中的代码被执行*以代替*原始更新语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T03:50:41.130

代替触发器其实很酷。过去，我在“只读”视图上使用而不是触发器来使其表现得像一个表。

这实际上非常酷。

如果 T-SQL 不是您的优势之一，您甚至可以在 .NET 中编写这些触发器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T06:22:20.797

触发器基本上用于强制执行业务约束。业务约束可以按以下顺序实现：实体完整性（主/唯一键）、域完整性（检查约束）、引用完整性（外键），最后是触发器。触发器用于强制执行业务约束，这很复杂。

触发器类似于存储过程，它们会根据数据操作操作自动执行。“Instead of Triggers”用于处理我们想要自己处理的数据操作。而不是`INSERT`, `UPDATE`,`DELETE`被写在一张桌子上来研究数据并自己采取必要的行动。

例如。如果您不想`DELETE`发生在表上并想监视试图删除表中数据的用户。我们可以写 INSTEAD OF`TRIGGER`并将`currentuser`信息写入 Audit 表。

例如。如果您想为用户操作抛出自定义消息。在考试时间表中，如果用户尝试在周末进行考试，我们可以抛出自定义消息“现在是周末。请休息”

例如。如果我们在多个表上定义了一个视图并在其上尝试了插入，我们可以代替触发器在基表中执行相应的插入。

# biztalk - BizTalk Server 2006 R2 应用程序升级

> ID：832644
> 
> 赞同：0
> 
> 时间：2009-05-07T02:33:13.813
> 
> 标签：biztalk, biztalk2006r2

我们有一个将于今年发布的 BizTalk Server 2006 R2 应用程序，其中包含客户将用于构建自定义业务流程的多个架构。当我们明年交付应用程序的下一个版本时，这些架构（有些是 WCF 服务合同）可能会发生变化。

既然如此，我们如何确保对客户编排/定制的影响最小？基本上，问题是 BizTalk Server 应用程序的升级策略是什么，即从一个版本的应用程序到另一个版本（不是 BizTalk Server 本身 - 这也是升级到 2009 的另一个问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-08T00:51:53.657

查看[BizTalk 的了解应用程序部署指南](http://download.microsoft.com/download/5/3/b/53b9f43a-66e2-4b89-aca6-2577e71512f7/UnderstandBTSAppDepl.doc)。这有很多关于并行版本控制和利用 MSI 进行升级的部分。

# jquery - JQuery - 阻止锚标签点击

> ID：832645
> 
> 赞同：1
> 
> 时间：2009-05-07T02:33:15.950
> 
> 标签：jquery, asp.net-mvc

我有以下代码：

```
//------------------------------------------------------//
// When the document is ready, start firing our AJAX    //
//------------------------------------------------------//
$(document).ready(function() {
    $("#navIndex a").click(function() {
        this.blur();
        return false;
    });
    $("#navPrevNext a").click(function() {
        this.blur();
        return false;
    });

    // Bind actions...
    $("#navIndex a").click(function(e) { e.preventDefault; updateNavigation($(this).attr('href')); });
    $("#navPrevNext a").click(function(e) { e.preventDefault; updateNavigation($(this).attr('href')); });
(); });
});

//--------------------------------------------------------------------------//
// METHODS - Get the params from the page and execute a server side call    //
//--------------------------------------------------------------------------//
function updateNavigation(pageIndex) {
    var filters = $("form").serialize();
    var productGroup = $("#valProductGroup").attr('title');
    var productType = $("#valProductType").attr('title');
    var itemsPerPage = $("#ItemsPerPage").val();
    var menuString = $("#Navigation").html();

    // repopulate the paging menu...
    $.ajax({ url: "/Catalog/Ajax/Update/Navigation"
          , type: 'GET'
          , dataType: 'HTML'
          , data: { productGroup: productGroup, productType: productType, itemsPerPage: itemsPerPage, pageIndex: pageIndex, filters: filters }
          , success: function(results) { $("#Navigation").html(results) }
          , failure: function(results) { $("#Navigation").html(oldMenuString) }
});

    // stop event bubbling... (this is not working as expected?)
    return false;
} 
```

该页面可在[http://staging1.roomsalive.com/Catalog/Flooring/Hardwood](http://staging1.roomsalive.com/Catalog/Flooring/Hardwood)找到。页面导航（First/Prev/1/2/3/Next/Last）是我正在处理的。当我第一次进入该页面并单击“2”或“3”时，它的行为符合我的预期。刷新菜单后，我单击任何其他可行选项，例如“3”，然后它会发布到[http://staging1.roomsalive.com/Catalog/Flooring/Hardwood/3](http://staging1.roomsalive.com/Catalog/Flooring/Hardwood/3)，而不是执行 JQuery 调用。我 99% 确定这是因为当我加载文档时，我将 JQuery 单击事件附加到菜单中。然而，当它回发时，这些事件就会丢失。我该如何重新连接它们？那是问题吗？

TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-07T02:41:18.707

我可以想到两个原因，也许都需要解决。如果您在更新导航时使用附加的单击处理程序替换元素，您将需要重新应用处理程序或使用实时绑定，该绑定会自动将处理程序绑定到与选择器匹配的任何当前或未来元素。

```
$("#navIndex a").live('click', function() {
    this.blur();
    return false;
}); 
```

其次，当您在调用 AJAX 的方法中返回 false 时，您不会将该值传播回调用链。确保您的 click 函数返回 updateNavigation 方法的结果。或者干脆返回假。

```
 $("#navIndex a").live('click', function(e) { e.preventDefault; return updateNavigation($(this).attr('href')); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T02:40:05.357

尝试

```
$("#navIndex a").click(function(e) { 
    e.preventDefault(); 
    updateNavigation($(this).attr('href'));
    return false; 
});
$("#navPrevNext a").click(function(e) { 
    e.preventDefault(); 
    updateNavigation($(this).attr('href'));
    return false; 
}); 
```

// 请删除此行 - 我添加此行是为了绕过最少 6 个字符的规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T02:40:14.810

看起来当页面第一次加载时，事件被绑定到元素，但是当你删除这些元素并用相似的元素替换它们时......它们是没有事件绑定的*新元素。*

您可以在调用更改 DOM 后修改成功和失败函数以将函数绑定到新元素`$.html()`。

# sql-server - SQL Server 在重组索引和更新统计信息期间超时

> ID：832652
> 
> 赞同：5
> 
> 时间：2009-05-07T02:36:19.967
> 
> 标签：sql-server, timeout

在 MS SQL Server 2005 的维护计划中运行 Reorganize Index and Update Statistics 时，我们的生产 Web 服务器超时。我知道 Reorganize Index 是一项在线操作，这就是我们选择它而不是 Rebuild Index 的原因，所以我们不知所措。它在数据库备份之后运行，在同一个维护计划中，但我读过它不应该产生重大影响。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-07T06:45:27.483

有企业版吗？在线操作仅在企业版中可用。

乔金·贝克曼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T14:42:02.063

当 Web 服务器超时时，对于您有多少可用容量来说，这只是一个简单的负载过多吗？perfmon 对物理磁盘的平均读取/写入秒数显示什么？这可能就像在磁盘子系统上砸钱一样简单。

你可能想试试这个而不是重组：

1.  使用与现有索引相同的不同名称创建新索引
2.  完成新索引创建后删除现有索引
3.  如果您使用指定索引名称的查询提示，则必须重命名新索引以匹配旧索引名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-08-24T08:19:01.617

如果您正在运行企业版，您还可以使用提示 ONLINE = ON 在线重建索引：

```
ALTER INDEX ALL ON table REBUILD WITH(ONLINE = ON) 
```

# c# - 如何迭代多维数组的行和列？

> ID：832655
> 
> 赞同：7
> 
> 时间：2009-05-07T02:36:54.583
> 
> 标签：c#, arrays, multidimensional-array

我想在二维数组上分别迭代行和列：

```
object[,] values; 
```

我将如何仅遍历行和列？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-07T02:58:23.033

这取决于您的列和行，但您可以使用以下代码片段：

```
for (int i = 0; i < values.GetLength(0); i++)
            Console.WriteLine(values[i, 0]); 
```

和：

```
for (int i = 0; i < values.GetLength(1); i++)
            Console.WriteLine(values[0, i]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-07T02:59:03.813

这是一些代码来遍历数组的第一维和第二维数组。（实际上没有“行”和“列”，因为多维数组可以有任意数量的维度）

```
object[,] values = new object[5,5];
int rowIWant = 3; //Make sure this is less than values.GetLength(0);
//Look at one "row"
for(int i = 0; i < values.GetLength(1); i++
{
    //Do something here with values[rowIWant, i];
}

int columnIWant = 2; //Make sure this is less than values.GetLength(1);
//Look at one "column"
for(int i = 0; i < values.GetLength(0); i++
{
    //Do something here values[i, columnIWant];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-07T02:52:51.410

多维数组没有您引用它们的方式的行和列 - 它们只有几个用于访问值的索引。迭代这样的数组将使用嵌套的 for 循环来完成，如果您想在每个维度的基础上执行某些计算，您应该相应地更改循环的顺序。

如果您只需要迭代一个维度，另一种选择是使用数组数组而不是像这样的多维数组：

```
object[][] values; 
```

# actionscript-3 - 为 ActionScript3 设计带有大型数据集的 XML

> ID：832657
> 
> 赞同：0
> 
> 时间：2009-05-07T02:37:37.703
> 
> 标签：actionscript-3

我有一个非常大的 XML 文件，其中包含 40000 个数据，当我尝试使用 Actionscript3 加载 XML，然后将数据填充到数组中时，我收到以下错误：

脚本的执行时间超过了 15 秒的默认超时时间。

有没有办法绕过这个超时问题？这是示例 XML

```
<Map>
   <Data>0</Data>
   <Data>1</Data>
   <Data>2</Data>
   <Data>3</Data>
    // continue for many many times
   <Data>39999</Data>
</Map> 
```

换行符似乎在 for 循环中。代码是这样的

```
var aNumberArray:Array = new Array( 200 * 200 );
var nRowIndex:int = 0;
for ( ; 200 > nRowIndex; ++nRowIndex ) {
    var nColumnIndex:int = 0;
    for ( ; 200 > nColumnIndex; ++nColumnIndex ) {
        var nIndex:int = nColumnIndex + nRowIndex * 200;
        // assume cXMLMap is already a pre read XML class
        aNumberArray[ nIndex ] = new int( cXMLMap.Data[ nIndex ] );
    }
} 
```

我怀疑`cXMLMap.Data[ nIndex ]`从 XML 中获取变量需要花费大量时间。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-07T03:07:38.800

我找到了答案，我需要将 XML 的格式更改为如下所示

```
// given a data set of 200 X 200 fields
<Map>
    <Data>00 10 20 30 40 ..... 1990</Data>
    <Data>00 11 21 31 41 ..... 1991</Data>
    // repeat until reach 200 times
    <Data>2000 2001 2002 2003 2004 ..... 199200</Data>
</Map> 
```

这将减少 XML 解析持续时间，但是，我需要编写代码来标记 actionscript3 中的字符串。

# programming-languages - 为什么是高阶程序？

> ID：832668
> 
> 赞同：5
> 
> 时间：2009-05-07T02:44:37.530
> 
> 标签：programming-languages, functional-programming, scheme, closures, abstraction

因此，如果一种语言提供更高阶的过程，那么我可以拥有返回过程的过程。就像是：

```
(define (Proc a b c)
  (lambda (x) ( #| method body here in terms of a b c and x |# ))) 
```

要创建新程序，我只需执行以下操作：

```
(define ProcA (Proc a1 b1 c1)) ; Would create ProcA that has 1 argument 
```

类似的任务可以在不支持高阶过程的语言中完成，方法是定义`Proc`接受 4 个而不是 3 个参数并调用此过程来定义`ProcA`，例如：

```
(define (Proc a b c x) ( #| method body -- does not return any procedure |# )
(define (ProcA x) (Proc a1 b1 c1 x)) 
```

那么为什么有这么多关于高阶程序的模糊呢？我错过了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-07T03:36:38.467

一个很好的观察结果是返回另一个函数的函数与接受两个参数的函数相同。这被称为“柯里化”。换句话说，从 A 到 B 的函数是逻辑蕴涵的证明，即 A 蕴涵 B，或者：

```
A => B. 
```

正如您所注意到的，如果 A 暗示 B 暗示 C，那么 A 和 B 暗示 C，或者：

```
(A => (B => C)) <==> ((A, B) => C) 
```

但高阶函数不一定是返回另一个函数的函数。**高阶函数是将另一个函数作为其参数的函数**。这是一个重要的区别，HOF 是非常强大的编程工具。

例如，考虑这个 Haskell 函数：

```
map :: (a -> b) -> [a] -> [b]
map f [] = []
map f (x:xs) = f x : (map f xs) 
```

这个高阶函数接受一个函数`f`并将其应用于列表中的每个元素。在没有 HOF 的语言中，您可以使用循环或类似方法执行此函数的操作，但在具有 HOF 的语言中，您可以`f`通过如下简单调用来调用列表中的每个元素：

```
map f myList 
```

当然，语言中的控制结构可以让您逼近高阶函数，但是**具有高阶函数的语言可以让您发明自己的控制结构**。方案当然符合条件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-07T03:24:01.303

我不想在这里重述这个论点，但在[为什么函数式编程很重要](http://www.cs.chalmers.se/~rjmh/Papers/whyfp.html)，John Hughes 认为高阶函数很有用，因为它们提供了更有效的方法来“粘合”程序的各个部分，从而使程序更容易重用代码。这些示例使用的是一种非常古老的语言，不再使用太多，但它们仍然很容易理解并且很有说服力。阅读 John 的论文是详细回答您的问题“为什么对高阶过程有这么多模糊”的好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-07T02:47:47.240

这更多是关于心态而不是可行性。它允许您将函数视为一等公民，并根据对函数进行操作以创建其他函数等的函数进行思考。

显然你可以用其他语言来做或模拟它，但如果它不是一种句法机制，它就会被视为一种添加或破解。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-07T02:51:56.780

好的，但是在第二个示例中，您在编译时使用预先指定的 、 和 列表创建`a1`该`b1`过程`c1`。在第一个示例中，您在调用时在运行时创建它，`ProcA`您可以根据需要创建任意数量的不同的，因此您可以做更多有趣的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-07T03:13:52.250

通过数组考虑转换函数或排序算法。现在，您想让函数的用户真正灵活地通过让他们将函数作为参数传递来指定函数的行为。

假设您使用以下程序原型编写了一个排序算法：

```
sort(Array a, void (*fn)(a::element_type, a::element_type)); 
```

该函数的用户可以通过传递适当的 fn 来指定他们想要降序还是升序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T03:54:14.010

您需要一个内部类来正确模拟它。第一种情况，Proc 在 a、b 和 c 上是封闭的。在第二种情况下，ProcA 的调用者无法控制 a1、b1 和 c1 如何传递给另一个过程，他只能控制 x。因此，您控制 a1、b1 和 c1 的方式是通过在更高范围（模块级别等）上使用变量，这使您的函数不纯。在这种情况下，您无法确保在调用中给定相同的参数，ProcA 将返回相同的结果。与 Proc 一样，您始终可以确定，如果您使用相同的参数调用它，将会发生相同的结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-07T03:57:21.257

我在 javascript 中使用高阶函数，例如，当我使用选择框时。我可以传入选择选项时将调用的函数，因为对我来说唯一的区别是，它简化了我的代码，它减少了冗余。

我在我使用的其他支持高阶函数的语言中看到了同样的东西，因为我可以开始研究如何清理我的代码，其中有一些可以本地化的冗余，并且任何差异都可以在一个功能。

一旦 C# 支持这一点，我就知​​道它现在更主流了。:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-26T12:44:23.627

如果一个函数接受和/或返回一个函数，则称为[高阶函数](http://en.wikipedia.org/wiki/Higher-order_function)（HOF）。对于来自 C、C++ 或 Java 的没有经验的程序员来说，高阶函数听起来很神奇，但它们非常简单。想象一个简单的函数，它返回 2 + 3 的结果：

```
(define (foo) (+ 2 3)) ;; (foo) => 5 
```

这是一个无聊的函数，它总是将 2 加到 3。如果我们将其推广，让它不仅在 3 上加 2，而且在任何用户提供的数字上加 2？

```
(define (foo n) (+ 2 n)) ;; (foo 10) => 12 
```

当一种语言不支持高阶函数时，你不得不认为函数和值（例如数字、布尔值、列表）是两个不同的东西。但是[函数式编程](http://en.wikipedia.org/wiki/Functional_programming)（FP）模糊了它们之间的区别。想象一下，函数和值之间的唯一区别是函数可以被调用，除了你可以对函数做任何你可以对 a `2`or `#t`or做的事情`'(a b c)`：你可以把它作为一个参数，或者从一个函数返回，或存储在变量中，或将其放入列表中。例如，让我们进一步概括我们的小函数，因此它不仅可以将 2 添加到`n`，还可以将 2 乘以`n`，或者应用任何其他可以接受两个数字的函数：

```
(define (foo f n) (f 2 n))
;; (foo + 10) => 12
;; (foo * 10) => 20
;; (foo expt 10) => 1024 
```

当您意识到可以以与处理数字或字符串相同的方式处理函数时，[匿名函数](http://en.wikipedia.org/wiki/Anonymous_function)（在 FP 术语中称为“lambdas”）就完全有意义了。匿名函数其实比普通的命名函数更基础、更“正常”，命名函数只是匿名函数放入一个变量中，就像我们将一个数字放入一个变量中多次使用一样。

```
(+ 2 2) ;; is no different from:
(let ((a 2)) (+ a a))
(lambda (x y) (* x y)) ;; is no different from:
(define (foo x y) (* x y)) ;; which is an abbreviation for:
(define foo (lambda (x y) (* x y))). 
```

因此，HOF 允许我们泛化我们的函数以使其超级灵活。如果你看看你的函数，看看它背后的逻辑，你就会意识到，如果有*什么东西*对你的数据进行操作，那么*其他东西*可能也可以。如果将 2 个数字相加，您可能可以将它们相乘、相减或取幂，或其他任何方式。您可以只接受一个附加参数，而不是每次都为每种情况编写一个新函数，该参数必须是一个函数。

在 FP 中，我们一直使用 HOF，例如，在处理列表时。3 个函数是 FP 的基础[`map`](http://docs.racket-lang.org/reference/pairs.html?q=map#%28def._%28%28lib._racket%2Fprivate%2Fmap..rkt%29._map%29%29)：[`filter`](http://docs.racket-lang.org/reference/pairs.html?q=map#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._filter%29%29)和[`foldl`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._foldl%29%29)。`map`接受一个带 1 个参数的函数，将此函数应用于列表的每个元素，并返回一个包含更改元素的新列表。`filter`接受带有 1 个参数的谓词（返回布尔值的函数），将谓词应用于列表的每个元素，并返回一个新列表，其中删除了不满足谓词的元素。

```
(map (lambda (n) (+ n 1)) '(1 2 3 4 5) ;; '(2 3 4 5 6)
(define (foo n) (+ n 1))
(map foo '(1 2 3 4 5)) ;; '(2 3 4 5 6)
(filter (lambda (n) (> n 3)) '(1 2 3 4 5)) ;; '(4 5)
(define (bar n) (> n 3))
(filter bar '(1 2 3 4 5)) ;; '(4 5) 
```

想象一下，你有一个 1-arity 函数的列表——同样，你可以对一个函数做任何你想做的事情，并将它也存储在一个数据结构中——并且你想将它们都应用于同一个数字，并得到一个列表结果。

```
(let ((xs (list (lambda (x) (+ x 1))
                (lambda (x) (* x 2))
                (lambda (x) (- x)))))
  (map (lambda (f) (f 10)) xs)) ;; => (11 20 -10) 
```

*结论：*当一种编程语言正确地支持函数式编程概念时，高阶函数允许灵活性和通用性，这使您的代码既更强大（您可以将相同的函数用于各种用例）又简洁（无需编写 10 个版本一种功能）。一些高阶函数在函数式编程中被大量使用，所以你摆脱了低级和冗长的 for 循环，而是编写一个可以做所有事情的单行代码。

*注意：* `foldl`与“left fold”或“left reduce”相同，更强大。如果您真的有兴趣并且有时间，请[使用 reduce 阅读我的答案](https://stackoverflow.com/a/25109467/596361)的前半部分。虽然它不是为 Scheme/Racket 编写的，而是为 Common Lisp/Emacs Lisp 编写的，但您仍然可以理解 fold/reduce 背后的想法。

# qa - QA 人员是否应该编写一些生产代码，而开发人员是否应该进行一些 QA？

> ID：832672
> 
> 赞同：2
> 
> 时间：2009-05-07T02:45:57.353
> 
> 标签：qa

在足够小的组织中，是否应该有完全独立的 QA 和 Dev 角色，或者每个角色都应该涉及一些时间（例如，每周 1 天）来扮演另一方的角色？

我不是在谈论单元测试。我说的是一个专注于系统的 QA，也贡献了一些生产代码，以及一个开发人员花一些时间分析和测试系统的一个单独部分。

在我看来，这种杂耍可能是有意义的，因为 QA 对系统有更好的理解和个人利益，而开发人员对单元测试之外的质量和测试问题有更好的理解。但我相信也有反对它的理由......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-07T03:06:52.140

需要考虑的几点：

*   大概，你雇佣你的开发人员是因为他们擅长编写代码，而你的测试人员是因为他们擅长 QA。从商业角度来看，付钱让他们做彼此的工作是否有意义？
*   如果你的测试人员太了解代码，他们会产生盲点吗？
*   同样，您的开发人员真的可以成为有效的测试人员吗？他们对应用程序有深入的了解吗？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-07T03:41:19.297

作为一名 QA 人员，我觉得这个想法很有趣。有机会开发专业代码听起来是个好主意。我也喜欢让开发人员接触 QA 世界的想法，这样他们就知道如何倡导缺陷修复。

以下是关于这种方法的优点/缺点的一些想法。

优点：

1.  QA 会更好地感受在真正的开发环境中工作。很多时候，QA 被降级为临时脚本创建，其中自动化测试以某种匆忙和草率的方式编写。这可能使他们有机会将视野扩展到更有条理的开发周期。这也将提供一些关于他们如何编写脚本的见解，并可能为更好的测试开发提供一些想法。
2.  QA 可能在发布周期中有更多的利害关系。虽然从个人的角度来看，我会说我将很多自豪感与我们的发布和其中的质量联系在一起，但有时看起来 QA 确实对整个产品没有太多投资。我们经常被视为“错误发现者”而不是工程师，我想知道这种方法是否会给 QA 团队带来更大的专业精神（因为没有更好的词）。
3.  开发人员可能会对作为一种实践的 QA 有更好的感觉。我经常让开发人员告诉我，他们不知道我靠什么谋生。可以这么说，让开发人员测试代码会让他们有点“吃自己的狗粮”的味道。
4.  这将使 QA 有机会扩展他们的简历。我认识的许多 QA 人员都担心他们的适销性。优秀的开发人员通常能够相对较快地找到工作；测试职位似乎更难找到。任何可以帮助员工拓宽他们在该领域的经验的东西都是一个有吸引力的提议。

缺点：

1.  不应依赖开发人员来测试他们自己的代码。同样，不应依赖 QA 来测试他们自己的代码。“异花授粉”（借用兰斯的名言）是危险的，因为它可能导致人们验证自己的工作。一般来说，这不是一个好主意。人们常常对自己的缺点或错误视而不见，而开发的代码最好在第三方测试时进行验证。当然，对这个过程进行适当的监控和管理可以减轻这个过程……但这是一个问题。
2.  QA 不是专业的开发人员，开发人员也不是专业的 QA。每当开发人员将他/她“测试”过的代码交给我时，我都会感到畏缩。我并不是看不起他们的技能：相反，我无法编写他们拥有的代码。但我也认识到我们对“测试代码”的定义之间的差异。同样，作为 QA 人员，我不希望我的代码对客户具有高度可见性，这可能会伤害或阻碍客户的关系。注意：我并不一定是指关键任务：有时客户关系可能会因简单的可用性缺陷而受损——对于不成熟的开发人员来说这是一个有点常见的错误。我担心的是*高能见度*（我认为包括关键任务）；我知道我不是专业的开发人员，我不想被要求遵守同样的标准。
3.  这增加了返工的机会。我不一定相信开发人员能够充分测试代码，他们也不应该测试我来充分开发解决方案。在这两种情况下，有人需要回顾以前的工作以“正确”地做这件事的可能性将是一个问题。

总的来说，我认为这个想法非常有趣，很高兴听到有人尝试过这个想法。

我参与的一种类似方法是“错误日”。在这些日子里，开发人员与 QA 并肩作战，他们合作找出尽可能多的缺陷。像这样的日子非常棒：QA 和开发团队之间的专业关系得到加强，对彼此技能的尊重通常会增加：开发人员可以更好地了解 QA 是如何发现错误的，而 QA 可以更好地了解开发人员在喋喋不休时知道多少关闭您发现的错误的解决方案。这不是解决问题的完美方法：QA 仍然没有做太多的生产级代码。但它确实有助于促进职位之间的更好理解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-07T03:00:11.643

我认为开发人员应该专注于编写生产代码和单元测试，而 QA 应该专注于集成测试、测试自动化和验收水平测试。如果 QA 团队很好，并且 API 文档很好，我认为 QA 可以编写根据规范执行 API 的单元测试。

与我共事过的许多 QA 人员更擅长编写过程代码，例如自动化脚本。我不确定我是否希望他们编写生产代码，尤其是在使用复杂的、面向对象的设计模式或超出基本编码水平的任何东西时。

只是我的观点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-07T02:52:09.057

每个公司都不一样。适用于一家公司的东西不一定会自动适用于另一家公司。

也就是说，当然，拥有尽可能全面的员工是有意义的。一个人的知识越多越好。如果你*强迫*某人为新版本贡献代码？我不太确定这是否应该是一个严格的要求。但我认为，如果你只有少数人，你会倾向于让每个人都做一点点，不仅是为了传播知识并减少你在某人离开时丢失的知识，而且因为你可能有工作量比人多，而且玩不起像“好吧，我在 Dept X 工作，我们不碰那个，对不起”这样的游戏。

当然，这听起来合理且务实，但不可能有一个硬性规定。如果一个好的开发人员是一个糟糕的测试人员，我不会反对他们，反之亦然。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-07T03:00:12.033

我认为拥有这种类型的“异花授粉”是个好主意，我相信它可以帮助开发人员和测试人员更好地了解他们各自的角色，从而更有效地合作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-07T03:00:58.287

设身处地为他们着想将有助于他们更多地相互理解和合作。在任何不同意的时候，他们都会理解对方的立场。

此外，测试对于开发人员来说是一种很好的学习体验。一点点 QA 会让他/她在编写*有效*的代码时更加谨慎。

话虽如此，QA不*应该*编写关键任务生产代码，而 Dev不*应该*是 QA'ng 关键任务功能。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-02T19:16:06.960

作为一名 QA 人员，我进行了一些编程并实现了新功能。它使我成为更好的测试人员，因为我对系统有了更深入的了解。只有两条主要规则需要遵循：1）您不能对自己的代码进行 QA，因此这需要 QA 团队中至少有 2 人。2) 它必须经过标准的开发流程，即由首席开发人员进行代码审查。

异花授粉很有用。它可以帮助您学习其他技能，并在必要时更轻松地调动员工。另外，对 QA 来说，稍微受到回扣的影响是有好处的，以控制自我。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-07T04:26:24.430

我已经看到它运作良好：

*   在从事测试驱动开发的敏捷商店中，了解 CppUnit 的 C++ 开发人员会与知道如何使用内部 GUI 自动化工具自动化的测试人员配对。对于每个故事，他们将决定哪种单元/GUI 测试组合最有效，并且他们将共同编写测试/代码。测试人员不了解 C++，而开发人员不了解 GUI 自动化。它非常成功，以至于第一个采用这种方法的项目在公司范围内进行了演示。该项目中没有人愿意回到“旧方式”，即测试人员落后开发人员一两个冲刺。

*   Bug Bashes，Guerilla Testing，随便你怎么称呼它，开发人员测试产品的地方。我去过几家商店，就发现的错误而言，这是成功的。 如果您想添加一些结构和报告，[基于会话的探索性测试在这里会很有帮助。](http://en.wikipedia.org/wiki/Session-based_testing)

*   具有编程技能的测试人员作为初级程序员在开发团队工作了一段时间。在一个实例中，任务是加强团队对一些遗留代码的 C++ 单元测试。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-07T04:31:16.370

根据我的经验，QA 应该尽可能了解您的产品以及您的客户。他们应该精通您产品的问题领域，并且应该能够解决客户问题以及针对不需要更改代码的问题的 2 级客户支持人员。虽然测试脚本是必要的，但并非所有 QA 人员都需要能够编写它们，因此并非所有 QA 人员都需要任何编程能力。事实上，不是程序员会导致 QA 发现比编码专家更多的错误。

此外，如果您允许 QA 人员对系统的某些部分进行编码，那么当该部分出现错误报告时会发生什么。他们是否接管了错误修复？如果他们这样做了，谁 QA 来修复错误？如果他们不这样做，他们可以在知道代码后对程序员的更改进行 QA 吗？了解代码会以微妙的方式使您产生偏见，这就是您首先进行 QA 的原因。对他们来说，系统是黑匣子，他们的工作是确保输入产生正确的输出。他们的工作不是知道它是如何做到的。并且知道如何创建盲点会降低其有效性。

另一方面，统计上显着数量的编码人员讨厌“测试”。或将测试视为卑微/入门级的东西。让他们从事 QA 工作会影响士气，进而影响生产力。

简短的回答：没有。

# python - 以编程方式登录网站以进行屏幕抓取的最佳方式是什么？（最好在 Python 中）

> ID：832673
> 
> 赞同：2
> 
> 时间：2009-05-07T02:45:59.977
> 
> 标签：python, screen-scraping

我希望能够以编程方式登录网站并定期从该网站获取一些信息。什么是使这尽可能简单的最佳工具？我更喜欢某种类型的 Python 库，因为我想更加精通 Python，但我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-07T02:58:54.657

您可以尝试使用 Mechanize ( [http://wwwsearch.sourceforge.net/mechanize/](http://wwwsearch.sourceforge.net/mechanize/) ) 进行程序化网络浏览，并且绝对使用 Beautiful Soup ( [http://www.crummy.com/software/BeautifulSoup/](http://www.crummy.com/software/BeautifulSoup/) ) 进行抓取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-07T12:13:11.500

我们大多数人使用[urllib2](http://docs.python.org/library/urllib2.html)来获取页面；它可以处理各种形式的身份验证和 cookie 收集。然后[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)来解析结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-07T08:52:47.537

我曾经写过一个 Python 脚本来自动登录 vBulletin 论坛。困难的部分是知道如何正确地形成登录请求，而这是图书馆无法帮助您的。我发现[Live Http Headers](http://livehttpheaders.mozdev.org/) - Firefox 的一个插件 - 在登录过程中查看客户端和服务器之间发送的内容非常有帮助。

我也同意其他人的观点，即美丽的汤非常棒。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-07T08:42:12.537

我建议使用[斜纹布](http://twill.idyll.org/)，它使登录过程变得轻而易举。然后如上所述使用beautifulsoup等。我从来没有尝试过机械化，但它看起来很不错。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-27T06:40:23.837

仅用于屏幕抓取，您可以使用 url lib + pyqyery 的组合。 [https://pythonhosted.org/pyquery/](https://pythonhosted.org/pyquery/)

# asp.net - 在gridview中的asp.net格式化日期时间

> ID：832691
> 
> 赞同：10
> 
> 时间：2009-05-07T02:57:23.677
> 
> 标签：asp.net, gridview

我正在从我称为“会话”的数据库中的表中动态绑定网格视图。我使用类似这样的 linq 查询从方法中获取信息：

```
var s = from sessions in datacontext.Sessions
                    where sessions.test == id
                    orderby sessions.ID ascending
                    select sessions;
gridView.DataSource = qsessions;
gridView.DataBind(); 
```

Sessions 包含一个 dateTime 字段，我想将其最小化以仅显示日期（月/日/年）。根据我通过谷歌搜索阅读的内容，解决方案是使用以下内容在 gridview 的 aspx 标记中指定格式：

```
<asp:TextBox ID="txtDate" runat="server" Text='<%# Eval("dateTime", "{0:MM/dd/yyyy}") %>'></asp:TextBox> 
```

它似乎不起作用，仍然显示日期之后的时间。有什么我想念的吗？非常感谢帮助！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-07T03:03:49.543

尝试：

```
<asp:TextBox ID="txtDate" runat="server" Text='<%# Convert.ToDateTime(Eval("dateTime")).ToString("d") %>'></asp:TextBox> 
```

有关更多格式选项，请参阅此有用的站点：

[http://www.mikesdotnetting.com/Article.aspx?ArticleID=23](http://www.mikesdotnetting.com/Article.aspx?ArticleID=23)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-07T03:12:03.237

为网格中的 TextBox 实现 OnDataBinding 事件。

```
<asp:TextBox ID="txtDate" runat="server" OnDataBinding="txtDate_DataBinding">
</TextBox> 
```

然后在你的代码后面实现 OnDataBinding 事件：

```
protected void txtDate_OnDataBinding(object sender, System.EventArgs e)
{
    TextBox txt = (TextBox)(sender);
    txt.Text = (DateTime)(Eval("YourDateField")).ToString("MM/dd/yyyy");
} 
```

我更喜欢在代码隐藏中包含所有代码，而在 aspx 页面中没有任何内容，但您也可以将其嵌入其中。这是一个线程的链接，我在其中描述了为什么我更喜欢在代码隐藏中执行此操作：

[OnDataBinding vs Inline：优点、缺点和开销](https://stackoverflow.com/questions/702343/ondatabinding-vs-inline)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T02:23:10.763

ASP gridview 本身支持日期格式，尝试添加

```
DataFormatString="{0:dd-MM-yyyy}" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-18T10:08:50.860

Gridview 通过 DataFormatString 支持日期格式。例如-

```
<asp:BoundField DataField="Date" HeaderText="Visit date" DataFormatString="{0:dd-MMM-yyyy}" >                               
                            </asp:BoundField> 
```

它看起来像这样-

**访问日期**
2013 年 10 月 15 日 2013 年 10 月
12 日 2013 年 10 月
11 日

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T05:17:24.623

```
<asp:Label ID="lblDateBudget" runat="server" Text='<%# Eval("DateBudget", "{0:MM/d/yyyy}")%>'></asp:Label> 
```

您好朋友，这是您上面定义的问题的另一种解决方案。您只需将数据类型设置为 date 而不是 datetime 并尝试以这种方式访问​​。我希望这对你有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T03:07:16.757

我认为您的日期时间变量被评估为字符串。尝试将其转换为 DateTime。

# javascript - 如何检查谷歌地图是否已满载？

> ID：832692
> 
> 赞同：306
> 
> 时间：2009-05-07T02:57:26.500
> 
> 标签：javascript, html, google-maps

我正在将 Google 地图嵌入我的网站。加载 Google 地图后，我需要启动一些 JavaScript 进程。

**有没有办法在谷歌地图完全加载时自动检测，包括瓷砖下载和所有？**

存在一种`tilesloaded()`方法，它应该完全完成这项任务，但[它不起作用](https://www.google.com/search?hl=en&q=GEvent.addListener%28map,+%22tilesloaded%22,+function%28%29+{&btnG=Google+Search&aq=f&oq=)。

* * *

## 回答 #1

> 赞同：627
> 
> 时间：2011-08-31T20:07:07.070

GMaps v3 困扰了我一段时间。

我找到了一种方法来做到这一点：

```
google.maps.event.addListenerOnce(map, 'idle', function(){
    // do something only the first time the map is loaded
}); 
```

当地图进入空闲状态时触发“空闲”事件 - 所有内容都已加载（或加载失败）。我发现它比 tileloaded/bounds_changed 更可靠，并使用`addListenerOnce`方法闭包中的代码在第一次触发“idle”然后分离事件时执行。

另请参阅 Google 地图参考中的[事件部分](https://developers.google.com/maps/documentation/javascript/3.exp/reference#Map)。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-01-03T11:34:05.360

我正在创建 html5 移动应用程序，我注意到创建和渲染地图对象时会触发`idle`,`bounds_changed`和`tilesloaded`事件（即使它不可见）。

为了让我的地图在第一次显示时运行代码，我执行了以下操作：

```
google.maps.event.addListenerOnce(map, 'tilesloaded', function(){
    //this part runs when the mapobject is created and rendered
    google.maps.event.addListenerOnce(map, 'tilesloaded', function(){
        //this part runs when the mapobject shown for the first time
    });
}); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-02-16T16:25:36.253

2018 年：

```
var map = new google.maps.Map(...)
map.addListener('tilesloaded', function () { ... }) 
```

[https://developers.google.com/maps/documentation/javascript/events](https://developers.google.com/maps/documentation/javascript/events)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-06-26T19:24:00.490

如果您使用的是 Maps API v3，则此情况已更改。

在版本 3 中，您基本上想要为事件设置一个侦听器，该`bounds_changed`事件将在地图加载时触发。一旦触发，请移除侦听器，因为您不想在每次视口边界更改时都收到通知。

随着 V3 API 的发展，这可能会在未来发生变化 :-)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-08-08T17:05:14.703

如果您使用的是[web components](http://googlewebcomponents.github.io/google-map/components/google-map/)，那么他们以这个为例：

```
map.addEventListener('google-map-ready', function(e) {
   alert('Map loaded!');
}); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-05-07T03:07:02.453

`GMap2::tilesloaded()`将是您正在寻找的事件。

请参阅[GMap2.tilesloaded](http://code.google.com/apis/maps/documentation/reference.html#GMap2.tilesloaded)以获取参考。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-12-24T02:22:42.437

其中变量`map`是 GMap2 类型的对象：

```
 GEvent.addListener(map, "tilesloaded", function() {
      console.log("Map is fully loaded");
    }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-18T14:36:10.897

对于谷歌地图 V3，检查谷歌地图何时完全加载。

诀窍是这里所有提交的组合

首先，您必须创建地图示例：

```
let googleMap = new google.maps.Map(document.getElementById(targetMapId), 
{
        zoom: 17,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        streetViewControl: false,
        styles: [
          {
            featureType: "poi",
            elementType: "labels",
            stylers: [
              {visibility: "off"}
            ]
          }
        ],
      }); 
```

然后你需要设置一个默认位置来加载它。它可以在任何地方

```
googleMap.setCenter({
        lat: 26.12269,
        lng: -80.130172
      }); 
```

最后，一旦完成加载该位置的图块，您就可以通过“tilesloaded”实体处理代码，该代码可以包括重新居中地图、放置标记等。

这可确保在您对其进行操作之前加载地图

```
google.maps.event.addListenerOnce(googleMap, 'tilesloaded', function(){
// do something only the first time the map is loaded
}); 
```

其他人也提出了“空闲”事件，但我没有太多运气，因为它对我来说是命中或错过。

```
google.maps.event.addListenerOnce(googleMap, 'idle', function(){
// do something only the first time the map is loaded
}); 
```

而当我使用“tilesloaded”时，虽然我确实得到了一个快速的提示然后跳转到正确的地图视图，但它总是有效......所以我选择了两个邪恶中的较小者

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-09T17:59:09.653

在我的情况下，从远程 url 加载的平铺图像和`tilesloaded`事件在渲染图像之前被触发。

我用以下肮脏的方式解决了。

```
var tileCount = 0;
var options = {
    getTileUrl: function(coord, zoom) {
        tileCount++;
        return "http://posnic.com/tiles/?param"+coord;
    },
    tileSize: new google.maps.Size(256, 256),
    opacity: 0.5,
    isPng: true
};
var MT = new google.maps.ImageMapType(options);
map.overlayMapTypes.setAt(0, MT);
google.maps.event.addListenerOnce(map, 'tilesloaded', function(){
    var checkExist = setInterval(function() {
        if ($('#map_canvas > div > div > div:nth-child(1) > div:nth-child(1) > div:nth-child(1) > div:nth-child(2) > div > div').length === tileCount) {
            callyourmethod();
            clearInterval(checkExist);
        }
    }, 100); // check every 100ms
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-12T16:59:04.127

这几天你知道地图是否在这里准备好了：

```
void _onMapCreated(GoogleMapController controller) {
    this.controller = controller;
    _mapIsReady=true; //create this variable
  } 
```

从地图小部件调用此方法

```
return GoogleMap(
              myLocationEnabled: true,
              //markers: markers,
              markers: Set<Marker>.of(markers.values),
              onMapCreated: _onMapCreated,
              initialCameraPosition: CameraPosition(

                target: _initialPosition,
                zoom: 5.0,
              ),
            ); 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2009-09-21T11:47:21.143

您可以`GMap2.isLoaded()`每`n`毫秒检查一次该方法，以查看地图及其所有图块是否已加载（`window.setTimeout()`或者`window.setInterval()`是您的朋友）。

虽然这不会为您提供加载完成的确切事件，但它应该足以触发您的 Javascript。

# python - 任意（在合理范围内）宽度的 PDF 表格

> ID：832693
> 
> 赞同：2
> 
> 时间：2009-05-07T02:57:38.793
> 
> 标签：python, pdf, xhtml, latex

我知道这里已经讨论了很多 PDF 生成；但是，我还没有找到我需要的东西。

我正在尝试从 python 生成 PDF 报告（主要是表格）。是的，我尝试过 ReportLab 和 Pisa。在我认为在生产中遇到的不合理和不现实的情况下，两者都有专栏内容“爆发”。

当我说合理时，​​我的意思是 8 - 12 列不同宽度。不是 80 - 1200 之类的。

我不需要原生 python 解决方案，因为我可以让我的脚本从 linux 命令行启动。

我有这些报告在 XHTML 中工作，它们看起来或多或少是完美的……我更愿意利用它们。

我要问的是：有谁知道我可以使用的工具，它可以在 PDF 中呈现任意（同样在合理范围内）大小的表格，质量接近 XHTML 浏览器呈现？

我想使用 PrinceXML 之类的东西；然而，这个项目的规模并不能证明这种工具的费用是合理的。

顺便说一句，我试图在 Latex 中做我需要的事情，我不反对，但如果这是一个*好主意*，我会很感激一个例子。

问候，并提前感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T21:23:37.263

我完全同意 Brandon Craig Rhodes 的回答。如果您需要高质量的输出，TeX，普通或带有宏包（如 LaTeX 或 ConTeXt）将是一个很好的解决方案。但是 TeX 是一个严重的依赖项

如果您正在寻找更轻的替代品，您可以尝试

*   生成 xsl-fo 并使用 apache-fop 渲染它，或者

*   [围绕iText](http://www.lowagie.com/iText)编写 Python 包装器。

两者都可以做带有边框的任意宽度的表格。xsl-fo 学习起来并不难，如果您习惯 XML，则生成比 LaTeX 代码更容易。

iText 是 MPL 和 LGPL 下可用的强大 PDF 库。有 Java 和 C# 编写的版本，但不幸的是 Python 中还没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T04:36:25.717

使用 TeX 可能会给你带来好的结果。我很想避免 LaTeX，我自己，但那是因为它是一个非常复杂的宏包，当我尝试使用它时我从来没有真正理解它；另外，至少考虑到我当时的口味，与我过去在纯 TeX 中使用的相比，这似乎是一种非常冗长的方式来标记我的文本。

真正的诀窍是想出一种方法来转义您的数据可能包含的所有特殊字符，这样您创建的 TeX 源文件就不会出错，因为您在某处使用 & 符号，而 TeX 将其解释为 out就地命令。我可能需要在 TeXBook 上坐半个小时才能让引用功能完美运行。

但是如果您的数据只是普通字符串，那么我们可以尝试在没有它的情况下打印表格。这是一个例子：

```
#!/usr/bin/env python

import os

# Create a 2x3 PDF table of items, using TeX.

format = r"# \hfil & \hfil #"
data = [['Hydrogen', 1],
        ['Silicon', 14],
        ['Mercury', 80]]

table_data = r'\cr '.join('&'.join(str(i) for i in row) for row in data)

f = open('table.tex', 'w')
f.write(r"\halign{" + format + r"\cr " + table_data + r"\cr}\end")
f.close()

os.system("tex table.tex")
os.system("dvipdf table.dvi") 
```

最大的问题，正如您从该产品的 PDF 中看到的（如果您将运行它并查看），是表格没有边框，并且，如果您查看 TeXBook，您将发现生产它们——虽然总是可能的——并不是最自然或最明显的操作。

想一想，也许 LaTeX*会有*一些用处，如果它有宏来制作带有边框的表格，毕竟很容易创建。:-)

顺便说一句，您是否只是想看看是否可以让 WebKit 或任何其他浏览器后端直接从 HTML 生成 PDF，从命令行？他们以某种方式生成 PDF 用于打印；必须有一种方法可以利用它直接将您的 HTML 转换为 PDF。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-07T20:59:00.113

独立程序：wkhtmltopdf 正是我所需要的。XHTML 的 PDF 呈现是免费工具中最好的。

# oracle - 使用在 64 位 Vista 上运行的 32 位应用程序连接到 Oracle

> ID：832695
> 
> 赞同：2
> 
> 时间：2009-05-07T02:58:43.160
> 
> 标签：oracle, 32-bit, vista64

我正在尝试使用 32 位应用程序从 Vista 64 位（[Embarcadero RapidSQL](http://www.embarcadero.com/products/rapid_sql/index.php)）与 Oracle 数据库通信。我已经为我开发的 Web 应用程序安装了 Oracle 11g 64 位客户端，但是因为 RapidSQL 是一个 32 位应用程序，它需要一个 32 位版本的 Oracle 客户端。

除了安装 64 位客户端库之外，简单地安装 32 位 Oracle 客户端库是否安全，如果是的话，我在这样做时是否应该注意任何提示、技巧或陷阱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T12:09:53.583

只要将它们安装在不同的 ORACLE_HOME 中就可以了。

# php - 单击表单后有延迟操作

> ID：832706
> 
> 赞同：0
> 
> 时间：2009-05-07T03:00:39.940
> 
> 标签：php, javascript, forms

我有以下代码在弹出窗口中打开表单。我想在单击提交按钮后，在 1250 毫秒后弹出一个警报。这目前不起作用，因为页面被重定向到提交表单的结果。

```
<?php
$blah = "Well"; $test = "Done";
echo '<script type="text/javascript" src="fetchlayers.js"></script>';
$formcode = "<form action=\"process.php\" method=\"post\" enctype=\"multipart/form-data \"><label for=\"file\">Filename:</label><input type=\"file\" name=\"file\" id=\"file\"/> <br /><input type=\"submit\" name=\"submit\" value=\"Submit\" onclick=\"setTimeout(function() { alert('$blah'); },1250);\" /></form>";

echo "<h1>hello</h1>
<div id='form'>
<a href='#' onclick=\"createpopup('" . htmlentities($formcode) . "'); return false;\">
click here</a>
</div>"; 
```

提交表单后延迟操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T03:03:54.877

尝试在计时器回调中使用 document.form.submit() 而不是使用提交按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T03:09:40.370

如果我理解正确，您想打开一个包含表单的弹出窗口，然后在提交表单后显示一个警告框？

尝试在 setTimeout() 回调中使用 window.opener。通过这种方式，您可以告诉原始窗口显示警告框 - 您的弹出页面是否已被重定向无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T03:14:57.770

> 提交表单后延迟操作的最佳方法是什么？

您根本无法从同一个窗口按该顺序执行这两个操作。一旦表单提交，您实际上就是将当前页面的状态抛在脑后并请求新资源。

从您的弹出窗口中，您将获得对父窗口的引用。当用户要提交表单时，可以调用一些JavaScript在父窗口中执行一个延迟动作，然后允许弹出窗口中的表单提交。

编辑：根据您的评论，这是一种在窗口之间进行通信的方式；你可以有一个像这样的简单设置：

```
<!-- parent.html -->
<input type="button" onclick="doOpenChild();" value="Spawn Child Window" />

<script type="text/javascript">
  function doOpenChild() {
    window.open(
      "child.html",
      "child"
    );
  }

  function doSomething() {
    setTimeout(
      function(){
        alert(fileINeedToCheck);
      },
      2000
    );
  }

  // Set variable for child to update...
  window.fileINeedToCheck = "unset";
</script> 
```

使用以下内容生成一个弹出窗口：

```
<!-- child.html -->
<form action="/someaction.php" name="childForm" onsubmit="communicateWithParent(this);">
  <input type="text" name="fileName" value="100" />
  <input type="submit" value="Submit" />
</form>

<script type="text/javascript">
  function communicateWithParent(aForm) {
    if(window.opener) {
      if(window.opener.fileINeedToCheck) {
        window.opener.fileINeedToCheck = aForm.fileName.value;

        // You can also call functions from the parent window...
        window.opener.doSomething();
      }
    }
  }
</script> 
```

父窗口的变量可以用来自子窗口的值进行更新。

# php - PHP中支持Unicode的自然排序算法？

> ID：832709
> 
> 赞同：20
> 
> 时间：2009-05-07T03:02:26.893
> 
> 标签：php, arrays, sorting, unicode, utf-8

是否可以使用自然顺序算法在 PHP 中使用 Unicode / UTF-8 字符对数组进行排序？例如（此数组中的顺序正确排序）：

```
$array = array
(
    0 => 'Agile',
    1 => 'Ágile',
    2 => 'Àgile',
    3 => 'Âgile',
    4 => 'Ägile',
    5 => 'Ãgile',
    6 => 'Test',
); 
```

如果我尝试使用 asort($array) 我会得到以下结果：

```
Array
(
    [0] => Agile
    [6] => Test
    [2] => Àgile
    [1] => Ágile
    [3] => Âgile
    [5] => Ãgile
    [4] => Ägile
) 
```

并使用 natsort($array)：

```
Array
(
    [2] => Àgile
    [1] => Ágile
    [3] => Âgile
    [5] => Ãgile
    [4] => Ägile
    [0] => Agile
    [6] => Test
) 
```

如何在 PHP 5 下实现返回正确结果顺序（0、1、2、3、4、5、6）的函数？我的系统上提供了所有多字节字符串函数（mbstring、iconv、...）。

**编辑：我想 natsort() 值，而不是键 - 我明确定义键（并使用 asort() 而不是 sort()）的唯一原因是为了简化找出*排序位置的工作unicode 值*出错了。**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-07T06:55:34.760

这个问题并不像第一眼看上去那么容易回答。这是 PHP 缺乏 unicode 支持的领域之一，它会全力以赴。

正如其他海报所[`natsort()`](http://de.php.net/manual/en/function.natsort.php)建议的那样，首先与您要排序的类型的数组排序无关。您正在寻找的是一种区域设置感知排序机制，因为使用扩展字符对字符串进行排序始终是所使用语言的问题。让我们以德语为例：A 和 Ä 有时可以被排序为好像它们是同一个字母（DIN 5007/1），有时 Ä 可以被排序，因为它实际上是“AE”（DIN 5007/2）。相比之下，在瑞典语中，Ä 出现在字母表的末尾。

如果您不使用 Windows，那么您很幸运，因为 PHP 提供了一些功能来实现这一点。使用 , 和正确的 UTF-8 语言环境的组合[`setlocale()`](http://de.php.net/manual/en/function.setlocale.php)，您会得到如下内容[`usort()`](http://de2.php.net/manual/en/function.usort.php)：[`strcoll()`](http://de2.php.net/manual/en/function.strcoll.php)

```
$array = array('Àgile', 'Ágile', 'Âgile', 'Ãgile', 'Ägile', 'Agile', 'Test');
$oldLocal = setlocale(LC_COLLATE, '<<your_RFC1766_language_code>>.utf8');
usort($array, 'strcoll');
setlocale(LC_COLLATE, $oldLocal); 
```

请注意，必须使用 UTF-8 语言环境变体才能对 UTF-8 字符串进行排序。我将上面示例中的区域设置重置为其原始值，因为设置区域设置[`setlocale()`](http://de.php.net/manual/en/function.setlocale.php)会在其他运行的 PHP 脚本中引入副作用 - 请参阅 PHP 手册了解更多详细信息。

当您确实使用 Windows 机器时，目前还**没有**解决这个问题的方法，而且我认为在 PHP 6 之前不会有任何解决方案。请参阅我自己的[关于](https://stackoverflow.com/questions/120334/how-to-sort-an-array-of-utf-8-strings)针对此特定问题的问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2010-09-06T10:29:57.023

**搞定了！**

```
$array = array('Ägile', 'Ãgile', 'Test', 'カタカナ', 'かたかな', 'Ágile', 'Àgile', 'Âgile', 'Agile');

function Sortify($string)
{
    return preg_replace('~&([a-z]{1,2})(acute|cedil|circ|grave|lig|orn|ring|slash|tilde|uml);~i', '$1' . chr(255) . '$2', htmlentities($string, ENT_QUOTES, 'UTF-8'));
}

array_multisort(array_map('Sortify', $array), $array); 
```

**输出：**

```
Array
(
    [0] => Agile
    [1] => Ágile
    [2] => Âgile
    [3] => Àgile
    [4] => Ãgile
    [5] => Ägile
    [6] => Test
    [7] => かたかな
    [8] => カタカナ
) 
```

* * *

**更好的是：**

```
if (extension_loaded('intl') === true)
{
    collator_asort(collator_create('root'), $array);
} 
```

感谢@tchrist！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-07T04:32:09.347

```
natsort($array);
$array = array_values($array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-04-19T08:41:56.313

我在这个问题上苦苦挣扎。

排序：

```
Array
(
    [xa] => África
    [xo] => Australasia
    [cn] => China
    [gb] => Reino Unido
    [us] => Estados Unidos
    [ae] => Emiratos Árabes Unidos
    [jp] => Japón
    [lk] => Sri Lanka
    [xe] => Europa Del Este
    [xw] => Europa Del Oeste
    [fr] => Francia
    [de] => Alemania
    [be] => Bélgica
    [nl] => Holanda
    [es] => España
) 
```

把非洲放在最后。我用这段肮脏的小代码解决了它（这适合我的目的和我的时间框架）：

```
$sort = array();
foreach($retval AS $key => $value) {
    $v = str_replace('ä', 'a', $value);
    $v = str_replace('Ä', 'A', $v);
    $v = str_replace('Á', 'A', $v);
    $v = str_replace('é', 'e', $v);
    $v = str_replace('ö', 'o', $v);
    $v = str_replace('ó', 'o', $v);
    $v = str_replace('Ö', 'O', $v);
    $v = str_replace('ü', 'u', $v);
    $v = str_replace('Ü', 'U', $v);
    $v = str_replace('ß', 'S', $v);
    $v = str_replace('ñ', 'n', $v);
    $sort[] = "$v|$key|$value";
}
sort($sort);

$retval = array();
foreach($sort AS $value) {
    $arr = explode('|', $value);
    $retval[$arr[1]] = $arr[2]; 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-09T13:56:20.200

`setlocale`对于那些不起作用并且没有`intl`启用模块的情况，我还有另一种解决方法：

```
// The array to be sorted
$countries = array(
  'AT' => Österreich,
  'DE' => Deutschland,
  'CH' => Schweiz,
);

// Extend this array to your needs.
$utf_sort_map = array(
  "ä" => "a",
  "Ä" => "A",
  "Å" => "A",
  "ö" => "o",
  "Ö" => "O",
  "ü" => "u",
  "Ü" => "U",
);

uasort($my_array, function($a, $b) use ($utf_sort_map) {
  $initial_a = mb_substr($a, 0, 1);
  $initial_b = mb_substr($b, 0, 1);

  if (isset($utf_sort_map[$initial_a]) || isset($utf_sort_map[$initial_b])) {
    if (isset($utf_sort_map[$initial_a])) {
      $initial_a = $utf_sort_map[$initial_a];
    }

    if (isset($utf_sort_map[$initial_b])) {
      $initial_b = $utf_sort_map[$initial_b];
    }

    if ($initial_a == $initial_b) {
      return mb_substr($a, 1) < mb_substr($b, 1) ? -1 : 1;
    }
    else {
      return $initial_a < $initial_b ? -1 : 1;
    }
  }

  return $a < $b ? -1 : 1;
}); 
```

# css - 即使img标签指定了id和class，也是无效的。. 是真的吗？

> ID：832710
> 
> 赞同：0
> 
> 时间：2009-05-07T03:03:06.270
> 
> 标签：css

即使在传闻中对html的img标签指定id以及class，在css中指定了也无效的时候来了。

```
img id="hogehoge_id" class="fugafuga_class" src="example.gif" /
#hogehoge_id{
  float:left;
}
.fugafuga_class{
  padding: 10px;
} 
```

它是一种指定方式，例如上述。当我在 Firefox 和 IE6 中测试它时，我相处得很好。CSS的行为方式会不会有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T03:07:38.847

如果你问是否可以同时将 css 属性应用于同一标签的 ID 和类，答案是肯定的。没问题 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T09:47:54.627

不过由于img标签是内嵌**级别**元素，可以应用内嵌级别的样式，但不要应用块级别的样式。所以当你想让块级的样式时，你必须用某个块级的标签来包围img标签。

# mysql - Windows 上的 MySQL 命名管道——更快的最佳实践，还是坏主意？

> ID：832714
> 
> 赞同：7
> 
> 时间：2009-05-07T03:03:41.320
> 
> 标签：mysql, windows, performance, named-pipes

最近我一直喜欢在 Windows 上运行的 MySQL 中使用命名管道（选项 --enable-named-pipes），并通过 .NET 连接器驱动程序进行连接。出于安全目的，通常建议使用它，但它允许我做的一件事是连接“。” 作为连接字符串并在我的 PC 上开发并部署到服务器，而无需更改连接字符串（指向服务器主机而不是我自己的数据库副本）。

不仅如此，根据我的经验，我将一些加速归因于 TCP 的延迟优势。我在网上找到的一些参考资料表明：

> 我们使用命名管道成功地测试了 MySQL 5.0，而且速度提高了！这个大项目的 50% 首先，使用 MySQL
> [[http://www.waltercedric.com/component/content/article/1217.html的最新 JConnector 驱动程序可能是个好主意](http://www.waltercedric.com/component/content/article/1217.html)]

> 在简单的性能测试中，命名管道访问似乎比标准 TCP/IP 访问快 30%-50%。但是，这因系统而异，并且在许多 Windows 配置中，命名管道比 TCP/IP 慢。
> [[http://dev.mysql.com/doc/refman/5.1/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.1/en/connector-j-reference-configuration-properties.html)]

但是在什么“配置”中它更慢？无论如何，我一直在假设 localhost 访问比 TCP 更快，但是，我还没有找到任何确定的东西。也许它也更特定于正在使用的特定驱动程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-08T03:37:43.680

尝试查看[http://msdn.microsoft.com/en-us/library/aa178138(SQL.80).aspx](http://msdn.microsoft.com/en-us/library/aa178138(SQL.80).aspx)

即使它谈到 MS SQL Server，在内核模式下运行的本地命名管道*仍应*适用

从上述链接：

> 澄清您是在谈论本地管道还是网络管道也很重要。如果服务器应用程序在运行 Microsoft® SQL Server™ 2000 实例的计算机上本地运行，则可以选择本地命名管道协议。本地命名管道在内核模式下运行并且速度非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-06T00:24:55.180

我做了一个快速测试——将一个数据库转储到一个文件中，然后在我的 XP 开发机器上重新导入它。没有显示差异 - 结果保持不变。

什么会影响命名管道变慢或变快？

谢谢

# subsonic - 亚音速 2.2 的 t4 模板在哪里？

> ID：832718
> 
> 赞同：0
> 
> 时间：2009-05-07T03:04:27.217
> 
> 标签：subsonic

我已经下载了 subsonic 2.2 源代码，但我在所有项目中都找不到 t4 模板有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T14:57:06.100

SubSonic 2.2 不使用 t4 模板，版本 3 使用。您可以从以下位置获取源：

[http://code.google.com/p/subsonicthree/source/checkout](http://code.google.com/p/subsonicthree/source/checkout)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T16:37:29.913

它们在这里： [http](http://subsonicproject.googlecode.com/svn/trunk/SubSonic.Tests/Generated/T4) ://subsonicproject.googlecode.com/svn/trunk/SubSonic.Tests/Generated/T4 这看起来像是 v3 中 T4 想法的某种反向移植。用于主动记录。

# php - WordPress 小部件控制面板中的 AJAX

> ID：832721
> 
> 赞同：0
> 
> 时间：2009-05-07T03:06:49.643
> 
> 标签：php, ajax, wordpress, plugins, widget

我试图找出在 WordPress 小部件的控制面板上实现 AJAX-y 滑块的最佳方法。因为侧边栏管理员本身就是 AJAX，所以我想确保我的解决方案不会与现有的解决方案发生冲突。滑块的目标是默认为基本选项，但允许用户选择高级选项。没有 AJAX 的方法是让用户选择一个选项，点击小部件上的保存，点击侧边栏上的保存，然后重新加载小部件（选项太多，IMO）。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T09:54:59.303

据我了解，您担心“AJAX-y 滑块”的 JavaScript 代码会与现有代码发生某种冲突。

您是否担心您的函数名称可能与现有代码的名称冲突？好吧，我建议使用闭包式对象。这是一个例子：

```
var myobjectname = (function() {
  var a_possible_conflict_variable = 42;

  function a_possible_conflict_function() {
    return "hello!";
  }

  return { confvar: a_possible_conflict_variable,
           confmethod: a_possible_conflict_function };
})(); 
```

然后你只需要担心`myobjectname`与现有代码冲突。只需选择他们不太可能选择的东西。然后，您可以通过该对象访问变量和函数：

```
myobjectname.confvar // 42
myobjectname.confmethod() // "hello!" 
```

# apache-flex - 对象的闪存复制 - 克隆库？

> ID：832732
> 
> 赞同：4
> 
> 时间：2009-05-07T03:09:56.940
> 
> 标签：apache-flex, flash, actionscript-3, clone

这可能是一个非常简单的问题，我只是不知道如何去做。

我有一个要复制的对象，但不知道该怎么做。这是我的尝试：

```
var myObj = new ObjectClass();
var duplicate = myObj;
duplicate = null;
myObj.function(); // Error: Null reference 
```

ObjectClass 非常大，继承并创建了它自己的子类，我敢肯定那里可能有一些单例类。

有没有办法轻松复制一些东西？

**编辑：**看起来我正在寻找没有 AS3 功能的“克隆”，而且您显然无法克隆私有数据。有人知道克隆一堆私人数据的库或解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-07T04:52:34.243

我从某个博客中获得了这个 util 功能，不记得是从哪里得到的，所以我不能给予信任。但它不适用于位图数据。无论如何，它是：

```
public static function copy(o:Object):Object 
{
    var bytes:ByteArray = new ByteArray( );
    bytes.writeObject( o );
    bytes.position = 0;
    return bytes.readObject( );
} 
```

用法：
registerClassAlias("com.tests.TestClass", TestClass); var testCopy:TestClass = TestClass(ObjectUtil.copy(test));

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T04:33:06.100

您可以使用`ObjectUtil.copy()`（一个 Flex 库）。但你是对的，它不支持私人数据。所以这是在黑暗中拍摄，但我想知道你是否将它序列化为 AMF 使用`ByteArray.writeObject()`是否会复制私人数据？可能值得一试。

# apache - 如何停止无限重定向循环？

> ID：832736
> 
> 赞同：1
> 
> 时间：2009-05-07T03:12:48.880
> 
> 标签：apache, .htaccess, redirect

我有一个有重定向循环的博客，我现在不太了解 htaccess（很晚，需要由 AM 完成），所以希望能快速修复。该站点正在从 xxxxx.org 向 xxxxx.org/index.php 发送 301，然后又回到开头。htaccess 文件如下：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

redirect 301 /index.html http://www.lawyersclearinghouse.org/index.php 
```

**由于 iFrame 注入，该网站最近在 google 上被列为恶意网站，因此请不要觉得有必要访问它（已清理，但尚未除名）**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-07T03:43:40.243

您的重写条件与逻辑 OR 相结合，因此它们将适用于所有情况。如果文件是普通文件，它将不是目录，反之亦然。

你的规则也很奇怪。您是否要匹配所有案例？在这种情况下，它应该是 .* （任何字符串）而不是 . （任何单个字符）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T03:40:30.313

你的网站似乎对我有用。无论如何，确保 index.php 存在。

# c# - Telerik OpenAccess 和 where 子句中的多个条件

> ID：832748
> 
> 赞同：1
> 
> 时间：2009-05-07T03:16:40.447
> 
> 标签：c#, telerik, openaccess

我刚刚编写了一些单元测试，但令我恐惧的是它失败了。

这是我的测试...

```
[TestMethod]
public void FetchWithMoreThanOneConditionUsingKnownTypes() 
{
  using (var scope = EntityObjectScopeProvider.GetNewObjectScope()) 
  {
    var temp = new TempClient() { FirstName = "Rohan", Surname = "West" }; 
    var entity = scope.Extent<ClientEntity>().Where(c => temp.FirstName == c.FirstName && temp.Surname == c.Surname).FirstOrDefault(); 

    Assert.IsNotNull(entity);
    Assert.AreEqual(entity.FirstName, temp.FirstName); 
    Assert.AreEqual(entity.Surname, temp.Surname); 
  }
} 
```

它给了我以下异常，无法将“Entities.Testing.TempClient”类型的对象转换为“System.String”类型。这是正常的吗，我希望不是，下面的测试工作正常。我猜在解析表达式时有问题......这会解决吗？

```
[TestMethod]
public void FetchWithMoreThanOneConditionUsingTempVariables() 
{
  using (var scope = EntityObjectScopeProvider.GetNewObjectScope()) 
  {
    var temp = new TempClient(){ FirstName = "Rohan", Surname = "West" };   

    string firstname = temp.FirstName; 
    string surname = temp.Surname; 

    var entity = scope.Extent<ClientEntity>().Where(c => c.FirstName == firstname && c.Surname == surname).FirstOrDefault(); 

    Assert.IsNotNull(entity);
    Assert.AreEqual(entity.FirstName, temp.FirstName);
    Assert.AreEqual(entity.Surname, temp.Surname); 
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-21T03:37:27.223

在联系 Telerik 支持后，事实证明这是不可能的。

# internet-explorer - 如何在IE6中使用半透明png图片

> ID：832752
> 
> 赞同：4
> 
> 时间：2009-05-07T03:17:59.307
> 
> 标签：internet-explorer, internet-explorer-6, png, transparency

如何在 IE6 中使用半透明 png 图片？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-07T03:26:46.023

事实上你可以使用[IE6 PNG Fix。](http://www.twinhelix.com/css/iepngfix/)有一些限制，但总的来说，它工作得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-04-19T01:14:20.610

我不得不说我更喜欢 DD_belatedPNG 而不是 supersleight。它更容易实现，并且似乎不会死锁 IE6 加上悬停开箱即用。

[http://www.dillerdesign.com/experiment/DD_belatedPNG/](http://www.dillerdesign.com/experiment/DD_belatedPNG/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-11T07:01:27.783

请注意，AlphaImageLoader 转换可能会使[IE6 死锁](http://blogs.cozi.com/tech/2008/03/transparent-pngs-can-deadlock-ie6.html)。

使用[PNG8s](http://blogs.cozi.com/tech/2008/03/transparent-pngs-can-deadlock-ie6.html)而不是常规的 PNG32s。您被限制为 256 种颜色和 1 位 alpha 透明度，但它比随机死锁浏览器要好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-24T19:29:15.717

我曾经在 ie6 中遇到过关于 png 透明度的问题，而救了我的是：

[http://allinthehead.com/retro/338/supersleight-jquery-plugin](http://allinthehead.com/retro/338/supersleight-jquery-plugin)

希望有帮助

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-07T03:21:37.160

你不能... IE6 不支持透明PNG。你最好的选择是使用透明的 GIF 并格式化它们以匹配它们经过的背景。

编辑：在那张纸条上：http: [//ie6update.com/](http://ie6update.com/)

# java - JPA 为什么使用 createNamedQuery

> ID：832755
> 
> 赞同：15
> 
> 时间：2009-05-07T03:19:32.407
> 
> 标签：java, hibernate, jpa, data-access-layer

我正在将我的 DAO 层从使用 Hibernate API 更改为使用纯 JPA API 实现。看起来推荐的方法是使用实​​体管理器中的 createNamedQuery 。命名查询存储在模型/实体类的注释中。这对我来说没有意义。为什么要在模型对象中定义 JPA 查询，但在 DAO 中使用它们。仅在 DAO 本身中使用 createQuery 并在 DAO 中定义查询，甚至只是在 DAO 本身中定义命名查询，难道不是更有意义吗？

对于那些使用 JPA API 实现了 DAO 层的人，您是如何定义查询的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-07T03:28:32.730

我使用命名查询。

这样做有两个原因：

1.  它将它们放在一个更中心的位置，而不是分散在带有随机 createQuery() 调用的代码中；和
2.  构建过程可以验证查询（非常有用）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-21T12:41:14.363

你可以看看[Spring Data JPA](http://www.springsource.org/spring-data/jpa)。它允许您简单地定义一个接口并执行查询，而无需手动实现执行。

实体：

```
@Entity
@NamedQuery(id="User.findByLastname" query="from User u where u.lastname = ?1")
public class User implements Persistable<Long> {

  @Id
  private Long id;
  private String username;
  private String lastname;
  private int age;
} 
```

存储库：

```
public interface UserRepository extends CrudRepository<User, Long> {

  // Will trigger the NamedQuery due to a naming convention
  List<User> findByLastname(String lastname);

  // Will create a query from the methodname
  // from User u where u.username = ?
  User findByUsername(String username);

  // Uses query annotated to the finder method in case you
  // don't want to pollute entity with query info
  @Query("from User u where u.age > ?1")
  List<User> findByAgeGreaterThan(int age);
} 
```

设置：

```
EntityManager em = Persistence.getEntityManagerFactory().createEntityManager();
JpaRepositoryFactory factory = new JpaRepositoryFactory(em);

UserRepository repository = factory.getRepository(UserRepository.class); 
```

如您所见，您可以选择不同的方法来派生要从该方法执行的查询。虽然直接从方法名称派生它对于简单查询是可行的，但您可能会根据您对标准的坚持程度在`@NamedQuery`（JPA 标准）或（Spring Data JPA 注释）之间进行选择。`@Query`

Spring Data JPA 为您在数据访问层实现的各个其他角落提供支持，允许为方法提供自定义实现，并与 Spring 很好地集成。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-07T05:03:03.563

我的经历与 cletus 完全相反——我发现没有任何好处，而且使用起来也很尴尬。琐碎查询在哪里定义没有区别，但非琐碎查询通常很难与任何单个实体关联，但使用面向业务的方法很容易。

如果您在 DAO 中使用或多或少复杂的基础设施（为了重用和一致性），那么命名查询的使用往往会使实现和可读性变得复杂，并且没有明显的好处。

通过构建过程验证查询听起来很有趣——我想知道更多它的真正含义……我的查询几乎没有出错的余地，因为每个 DAO 方法都经过单元测试，因为它是有意义的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-07T05:05:15.740

不要只是在任何地方使用命名查询，在某些情况下它们是不合适的，例如当它很少使用的查询时，如果根据需要构建它可能会更有效。

命名查询在复杂且频繁执行时更有意义。

**[更新]**

相反，您可以在映射时编写命名查询。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-08-27T18:20:01.967

拥抱和的力量 :) 如果您有一个有意义的查询可以放入模型中，请这样做。如果你不这样做，不要。最好问“你为什么用 JPS 编写 DAO？” 如果答案是“从数据库中隔离我的代码”。这是由实现 JPA 的库完成的。如果答案是“将我的代码与我坚持事物的方式的变化隔离开来”，那么 JPA 通过允许您拥有不同的实现来做到这一点。我将查询对象用于复杂查询，并且在可能的情况下仍然使用命名查询，而且我喜欢命名查询被编译的事实，因此我可以更快地发现它们中的错误。我没有 DAO 层。

# ruby - How to solve the "Bignum out of Float range" warning?

> ID：832767
> 
> 赞同：0
> 
> 时间：2009-05-07T03:27:39.250
> 
> 标签：ruby

Running this code:

```
n = 4 * 1000 * 1000
fn = (((1 + Math.sqrt(5)) ** n) - ((1 - Math.sqrt(5)) ** n)) / ((2 ** n) * Math.sqrt(5))
puts fn - 1 
```

I get the warning

> **Bignum out of Float range**

How can I fixed my code to solve this error?

Since ruby is dynamically typed, I don't know how. Thanks a lot.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T05:04:29.860

What you're looking for is [BigDecimal](http://www.ruby-doc.org/stdlib/libdoc/bigdecimal/rdoc/index.html).

* * *

Something like this may work (*I let it run for a minute on my machine and it still hadn't come up with an answer... seems to computationally expensive*):

```
require "bigdecimal"

n       = (4 * 1000 * 1000)
sqr_5   = BigDecimal("5.0").sqrt(5)
sqr_5a1 = BigDecimal((1+sqr_5).to_s)
sqr_5m1 = BigDecimal((sqr_5-1).to_s) 
fn      = (sqr_5a1.power(n) - (sqr_5m1.power(n))) / ((2.power(n)) * sqr_5)
puts fn - 1 
```

# multicore - 同步与异步编程

> ID：832774
> 
> 赞同：0
> 
> 时间：2009-05-07T03:29:44.393
> 
> 标签：multicore, threadpool

在设计服务器时，我们正在考虑两种方法：

1.  一种异步（基于选择）方法，因此后端 rpc 可以在单个线程中并行化。

2.  一种同步方法，其中每个后端 rpc 在线程池中的另一个线程中处理。

需要权衡取舍：1 具有更好的性能，2 具有更少的代码复杂度。1 现在对于多核和 64 位的机器真的很重要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T03:51:42.313

我建议在 ACE 上阅读这些书籍

*   [C++ 网络编程：使用 ACE 和模式掌握复杂性](http://www.cs.wustl.edu/~schmidt/ACE/book1/)
*   [C++ 网络编程：ACE 和框架的系统重用](http://www.cs.wustl.edu/~schmidt/ACE/book2/)

获取有关模式的想法，让您创建高效的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T03:37:34.890

我认为应该相反，async select() 方法使代码更简单，因为不涉及线程同步。

您需要做的就是将套接字句柄列表传递给 select() 函数。它将阻塞并且仅在一个或多个套接字句柄中发生某些事情时才返回。与使用线程池相反，您必须有一个作业调度队列，线程池中的所有线程都从中获取作业。

async select() 方法的缺点是它不会随着处理器内核的数量而扩展，因为所有内容都在一个线程中执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T04:30:03.860

如果不了解有关服务器要求的更多详细信息，很难判断哪种方法*可以*为您提供更好的性能和/或降低代码复杂性。

有趣的是，在现实生活中的服务器设计中，性能和简单性通常是相辅相成的（但想出简单化的设计很难）。select/poll 本身不会自动为您提供更好的性能。而且线程池绝对不会降低你的代码复杂度。

回答你的问题：1仍然很重要。异步设计不能很好地扩展多进程机器，但只有当您的服务器在一个进程上运行时才会如此。如果您的服务器设计为在多进程机器上生成多个进程怎么办？不同的进程可以在不同的用户帐户下运行，并具有不同的安全设置。虚拟机呢？每个进程一个线程并不意味着您不能利用多核机器。

但是，我真的不记得上次看到基于 async select() 的真实服务器设计是什么时候了。也许在我上大学时的教科书中，但没有任何真正的生产系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-08T12:35:59.510

这是一篇相关读物（它是一种少数派报告）：

[http://www.usenix.org/events/hotos03/tech/full_papers/vonbehren/vonbehren.pdf](http://www.usenix.org/events/hotos03/tech/full_papers/vonbehren/vonbehren.pdf)

这也是一个很好的资源：

[http://www.kegel.com/c10k.html](http://www.kegel.com/c10k.html)

请记住，您可以在某种程度上结合这两种方法，以最大限度地利用多核架构。假设您的服务器（“Krumpets here！”；）是可分区的——这意味着您可以在同一台机器上运行它的多个实例——使用 select 编写服务器，然后每个 cpu 核心运行一个服务器实例。

# email - 如何用 mutt 写出一封电子邮件，grep 文件，然后在新电子邮件上执行命令

> ID：832778
> 
> 赞同：0
> 
> 时间：2009-05-07T03:30:20.167
> 
> 标签：email, file, scripting, grep, mutt

我正在尝试编写一系列脚本，这些脚本将根据刚收到的电子邮件中的文本在我的服务器上执行其他脚本。我正在使用 mutt 作为基于文本的电子邮件客户端，但不知道从哪里开始。我希望了解它是如何工作的，而不仅仅是解决问题，因为我的这个项目是为了好玩。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T03:56:55.530

另一种选择（可能需要更多软件和/或访问权限，具体取决于您的服务器设置）是使用[procmail](http://www.procmail.org/)（或[类似](http://www.courier-mta.org/maildrop/)的软件包之一）来处理您的电子邮件，并将电子邮件文本作为输入运行到您的服务器中端脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T03:45:22.860

邮件列表软件基本上可以满足您的需求。您可以通过向列表管理员发送特殊邮件来注册或从邮件列表中删除。您可以查看开源[邮递员](http://www.gnu.org/software/mailman/index.html)软件，了解他们是如何做到的，并将您的解决方案基于类似的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T05:44:04.807

以前的答案是正确的，而且很可能是最简单的。

还有另一种可能。我假设这个邮件帐户对应于一个 linux/unix 用户并且这个用户有一个主目录。在主目录中，您可以添加一个名为 .forward 的文件，然后您可以将所有收到的邮件转发到另一个地址或将收到的邮件通过管道传输到 shell 脚本。.forward 文件 - 据我所知 - 应该具有执行权限以及您转发电子邮件的 shell 脚本。

有用。我过去曾这样做过。

# django - App Engine/Django 有哪些内置表单验证功能？

> ID：832789
> 
> 赞同：1
> 
> 时间：2009-05-07T03:35:06.957
> 
> 标签：django, validation, google-app-engine

我正在使用 App Engine 和 Django 编写应用程序。App Engine/Django 有哪些内置表单验证功能？例如，如何验证用户实际输入的是整数而不是字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T10:51:17.953

App Engine 捆绑了 Django 0.96，其中包括“newforms”表单验证库。您可以在[此处](http://www.djangoproject.com/documentation/0.96/newforms/)找到相关文档。App Engine 网站上还有[一篇文章](http://code.google.com/appengine/articles/djangoforms.html)详细介绍了如何将 Django 的表单库与 App Engine 模型集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T03:48:54.707

Django（从 1.0 开始）有一个相当详细的表单字段数据验证框架。它记录[在这里](http://docs.djangoproject.com/en/dev/ref/forms/validation/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-07T10:02:06.697

AppEngine API 中包含的 Django 0.96 使用*oldforms*（操纵器）库。验证以某种更复杂的方式进行。[文档是可用](http://www.djangoproject.com/documentation/0.96/forms/)的，虽然不是那么容易访问。

# user-interface - Adobe AIR 是作为 GUI 开发 Windows 应用程序的好引擎吗

> ID：832793
> 
> 赞同：2
> 
> 时间：2009-05-07T03:36:09.277
> 
> 标签：user-interface, air

我想在Windows平台开发一个照片浏览器应用程序，UI应该很酷并且有3D效果，Adobe AIR是一个很好的GUI引擎，但我不知道如何集成我之前写的C和C++引擎进Adobe AIR，好像引擎不能装ActiveX？我能做些什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-07T03:42:10.527

如果你只是 Windows，像 WPF 这样的东西可能是一个更好的选择，因为你将能够利用你通过 PInvoke 拥有的任何旧的 C/C++ 库。

Air 最适合将数据与 Web 服务一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T03:43:09.387

Adobe AIR 和大多数其他新的 RIA 平台，如 JavaFX、Silverlight 和 Flex，旨在成为跨平台平台。也就是说，它们应该在 Mac 和 Linux 以及 Windows 上运行。ActiveX 无法在这些平台上运行，因此您将无法在那里重用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-09T23:47:24.423

Adobe AIR 无论如何都不是一个 GUI 引擎。它是一个包装器，使应用程序能够安装在系统上。它可以环绕的 GUI 技术有：DHTML/Flash。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-09T05:47:12.507

AIR 不像 DirectX 那样是 API 引擎。它是一个完整的框架和执行环境，AIR 应用程序在其中运行。AIR 应用程序必须使用 JavaScript 或带有 HTML/CSS 和/或 Flash 的 ActionScript 编写。

AIR 的两个优点是：

*   应用程序的开发与具有类似技术的网站相同。为本地应用程序可以做的事情提供了扩展，例如读取和写入文件。
*   AIR 应用程序自动跨平台：Windows、MacOS 和 Linux。开发一个，相同的 .air 文件将适用于其他文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-30T13:55:33.167

另一种方法是使用您自己编写的 C++ 应用程序来包装您的 Flash 内容，该应用程序将托管您的 SWF 应用程序。简单地说，您只需要编写将加载 SWF 内容的 OLE 容器。有很多技巧，最常见和最有趣的是： http: [//www.codeproject.com/KB/COM/flashcontrol.aspx](http://www.codeproject.com/KB/COM/flashcontrol.aspx)

干杯，dchrislee。

# java - Java 应用程序对象...它存储在哪里？

> ID：832796
> 
> 赞同：0
> 
> 时间：2009-05-07T03:38:03.657
> 
> 标签：java, servlets, caching, ehcache

我正在考虑使用java应用程序对象来实现一个简单的缓存，保存一些配置变量，以及一些带有常用信息的xml......

我想知道应用程序数据物理存储在哪里（系统文件，内存，数据库），如何配置，以及是否有任何限制，如空间、并发性等...

此外，任何其他关于可扩展性（包括大小和并发性）的问题都将不胜感激......

如果有人能指点我一些地方找到更多信息，我会很高兴...

多谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T03:41:29.920

对象存储在堆中。堆空间可以通过虚拟机的配置文件进行管理。

> 构造函数调用比普通的子例程或函数调用更复杂。了解计算机执行构造函数调用所经历的确切步骤会很有帮助：
> 
> 1.  首先，计算机在堆中获得一块未使用的内存，大到足以容纳指定类型的对象。
> 2.  它初始化对象的实例变量。如果实例变量的声明指定了一个初始值，则计算该值并将其存储在实例变量中。否则，使用默认初始值。
> 3.  构造函数中的实际参数（如果有）被评估，并将值分配给构造函数的形参。
> 4.  构造函数主体中的语句（如果有）将被执行。
> 5.  对对象的引用作为构造函数调用的值返回。
> 
> 这样做的最终结果是您引用了一个新构造的对象。您可以使用此引用来获取该对象中的实例变量或调用其实例方法。

[http://www.faqs.org/docs/javap/c5/s2.html](http://www.faqs.org/docs/javap/c5/s2.html)

以下是一些虚拟机配置参数

[http://www.caucho.com/resin-3.0/performance/jvm-tuning.xtp](http://www.caucho.com/resin-3.0/performance/jvm-tuning.xtp)

我曾经为 xml 对象写了一个缓存（以某种方式调用它们）。带有字符串键（文件名）和对对象（解析的 xml 文件）的引用的 Map 就足够了。除此之外，缓存是一个单例（同步）。对缓存已编译的 JasperReports 做了同样的事情（我在这里遇到了明显的减速，因为报告不再每次都编译）

# user-interface - 欧拉角与四元数 - 内部存储和呈现给用户之间的紧张关系引起的问题？

> ID：832805
> 
> 赞同：11
> 
> 时间：2009-05-07T03:42:57.030
> 
> 标签：user-interface, animation, 3d, quaternions, euler-angles

四元数可以说是在内部表示对象旋转的合适选择。它们可以简单有效地插值并明确表示单个方向。

但是，在用户界面中呈现四元数通常是不合适的 - 欧拉角通常对用户来说更熟悉，并且它们的值更直观和可预测。

欧拉角在代码级别受到复杂影响 - 它们需要存储旋转顺序，并且使用此顺序和相关角度组成实际方向（无论是矩阵还是四元数）至少可以说很麻烦。

使用四元数表示最方便地执行可靠插值 - 那么这是否意味着我们必须在欧拉表示和四元数表示之间不断转换？这在性能方面可行吗？

我们可以将方向存储为四元数并将它们转换为仅显示给用户吗？这可能是不可能的，因为对于任何给定的方向，只有一个四元数表示，但有许多欧拉表示。我们如何“挑选”对应于最初定义该方向的欧拉表示？这似乎是一项不可能完成的任务——我们在转换为四元数时实际上已经丢失了信息。

我们可以存储为欧拉角，然后根据需要转换为四元数吗？这可能是不可扩展的——从欧拉角到四元数的转换、插值，然后再转换回来可能是相对昂贵的代码。

我们可以简单地存储这两种表示并使用最适合任何给定情况的表示吗？内存方面的大量成本（想象一下具有大约 60 根骨骼的骨骼的动画曲线）并保持这些值同步可能会很昂贵，或者至少很麻烦。

有没有人看到、使用或提出过任何聪明的解决方案？上面的三个选项肯定不是唯一的吗？还有其他类似的问题域*已经*解决了吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-06-06T23:16:20.117

我是一名航空工程师；三年来，我一直在使用四元数进行航天器姿态控制和导航。以下是对您的情况的一些想法：

1.  执行任何改变欧拉角方向的过程几乎是不可能的。欧拉角受到奇点的影响——当其他角度通过奇点时，角度会瞬间变化多达 180 度；欧拉角几乎不可能用于连续旋转。四元数不会遇到这些问题
2.  有 12 种不同的可能的欧拉角旋转序列 - XYZ、XYX、XZY 等。没有一组“最简单”或“正确”的欧拉角。要导出一组欧拉角，您必须知道您正在使用哪个旋转序列并坚持下去。
3.  我建议您使用四元数执行所有存储和旋转操作，并且仅在需要输出时将四元数转换为欧拉角。当你这样做时，你必须定义你使用的欧拉旋转序列。

我有所有这些操作的算法以及更多：四元数到/从任何旋转序列的欧拉角到/从旋转矩阵（方向余弦矩阵），四元数插值匹配位置，速率等在端点或中间点，刚性和柔性使用四元数的身体动力学和运动学。

如果我可以通过 nhughes1ster@gmail.com 提供帮助，请与我联系

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-06-10T23:54:53.677

你 12 年前问过这个问题，我告诉你你检查的答案是完全错误的。那家伙不知道他在说什么。

如果您将欧拉角的域（让我们使用偏航俯仰滚动）限制为 -180 到 180，则每个四元数至少有两组代表它的 YPR（偏航俯仰滚动）。如果没有额外的假设，就无法知道哪个 YPR 是正确的。

最好的解决方案是始终在内部存储 YPR，然后当您需要进行计算时，将 YPR 转换为四元数。这才是正确的答案。

使用四元数进行计算将再次产生多种可能的解决方案，但是因为您只在内部存储了 YPR，您将能够使用原始 YPR 来帮助您找到从四元数派生的正确 YPR。

那家伙 3 年的经验并不意味着杰克。很可能他正在处理一个受限系统。如果 2 个或更多轴的旋转被限制为只能扫过 180 度（在这种情况下为 -90 到 90），那么只有 THEN 才会为每个四元数表示一个 YPR。因为这家伙是一名航空工程师，我很确定这就是他正在处理的问题，因为物理万向节通常具有有限的旋转角度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T03:48:46.457

我是四元数的粉丝。为了让它们发挥作用，你能重新考虑你向用户展示的内容吗？您可以选择一些简单的 3D 对象并将四元数旋转应用于对象，以直观地显示旋转的效果，而不是以文本形式向用户呈现旋转的一系列欧拉角。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T03:58:01.597

为什么不在代码中使用 Quarternions 并在需要显示时将 Q 转换为角度？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-07T04:02:56.000

您可以将旋转表示为轴+旋转角度，这与四元数基本相同（最多一个符号）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T04:28:18.530

我认为在内部使用欧拉角是没有意义的——你会想要在所有计算中使用四元数，而且通常无法承受到处进行的转换。至于将其转换回 UI 的欧拉角 - 如果用户只获得与原始输入等效但表示方式不同的角度，那会不会很糟糕？如果你做正确的转换，你应该得到任何给定四元数的“最简单”的欧拉角。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-07T04:39:58.313

我们在谈论多少次转换。看起来您为每次转换支付了大约两个先验操作，在现代硬件上，这些操作以每秒 1 亿次的数量级可用。我会同时存储四元数以确保准确性和美观，并存储欧拉旋转以保留用户信息。也许添加一个标志来指示任何给定对象的首选。最重要的是，您只需为每个轮换成员执行一次*转换。*一旦你计算了一个变换矩阵，它的乘法相加直到你用完顶点。

# c++ - 现代 C++ 游戏编程示例

> ID：832810
> 
> 赞同：8
> 
> 时间：2009-05-07T03:44:03.893
> 
> 标签：c++

现代 C++ 特性在多大程度上像：

1.  多态性，
2.  STL,
3.  异常安全/处理，
4.  具有基于策略的类设计的模板，
5.  智能指针
6.  新/删除，放置新/删除

用于游戏工作室？我很想知道库的名称和它们使用的 C++ 功能。例如，Orge3D 使用所有现代 C++ 功能，包括异常和智能指针。换句话说，如果我要寻找使用现代 C++ 的游戏库的示例，我会选择 Orge3D。但我不知道这些功能是否会阻止游戏工作室使用 Orge3D。

此外，我不知道是否还有其他示例。例如，我之前曾短暂使用过 Box2D，但它仅使用placement new 和class 关键字作为C++ 特性。由于所有成员都是公共的，因此在这些类中甚至封装也被破坏了。

理想情况下，如果 C++ 特性最适合所有情况，那么这些特性将最常使用。但似乎不是。阻抗是多少？显而易见的是必须阅读成堆的书，但这只是一半的原因。[这个问题是“用于游戏编程的 C++ - 爱还是不信任？](https://stackoverflow.com/questions/829656/c-for-game-programming-love-or-distrust) ”的后续问题（从那里的回答中，我得到的印象是许多 C++ 功能仍未在游戏中使用；这不一定是*应该*的方式）。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-07T04:45:45.197

我曾在 2 家游戏公司工作过，看过许多代码库，并观察到游戏开发者之间关于此类问题的许多辩论，所以我或许可以提供一些观察。对每一点的简短回答是，它因工作室而异，甚至在同一工作室内因团队而异。长答案列举如下：

*   多态性，

一些工作室使用，但其他工作室不使用。许多团队仍然喜欢避免它。虚函数调用确实是有代价的，即使在现代控制台上，这种成本有时也很明显。在那些确实使用多态性的人中，我愤世嫉俗的假设是只有一小部分人很好地使用了它。

*   STL,

出于与多态性相同的许多原因，从中间拆分。STL 很容易误用，所以很多工作室基于这些理由选择避开它。在那些大量使用它的人中，许多人将它与自定义分配器配对。EA 创建了[EASTL](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2271.html)，它解决了 STL 在游戏开发中引起的许多问题。

*   异常安全/处理，

很少有工作室使用异常处理。现代控制台的首要建议之一是关闭 RTTI 和异常。PC 游戏可能使用异常来产生更大的影响，但在控制台工作室中，异常经常被回避。它们增加了代码大小，这可能是非常宝贵的，并且在某些相关平台上实际上不受支持。

*   具有基于策略的类设计的模板，

基于策略的设计...我还没有遇到过。模板经常用于内省/反思和代码重用等事情。当我阅读 Alexandrescu 的书时，基于策略的设计对我来说似乎是一个有缺陷的承诺。我怀疑它在游戏行业中被大量使用，但它会因工作室而异。

*   智能指针

许多也使用多态性和 STL 的工作室都采用智能指针。主机游戏中的内存管理非常重要，所以很多人不喜欢引用计数智能指针，因为它们没有明确说明何时释放……但这些肯定不是唯一的智能指针。总体而言，智能指针的想法仍在获得关注。我认为这将在 2-3 年内变得更加普遍。

*   新/删除，放置新/删除

这些经常使用。它们通常被覆盖以在下面使用自定义分配器，以便可以跟踪内存并轻松找到泄漏。

我想我同意你的结论。C++ 并没有尽可能多地在游戏工作室中使用。这有好有坏的原因。好的是因为性能影响或内存问题，坏的是因为人们陷入了困境。在很多方面，以他们一直以来的方式做事是有意义的，如果这意味着 C 与有限的 C++，那么它意味着 C 与有限的 C++。但是有一些反 C++ 的偏见漂浮在周围……有些是合理的，有些则不是。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-07T04:45:13.247

1.  相当广泛，尽管人们注意到虚函数调用的开销
2.  这取决于。一些开发人员完全放弃了它，而另一些开发人员则有限地使用了诸如向量之类的容器，这些容器具有良好的缓存一致性和运行时性能，并且不会持续分配。我认为一般的观察结果是，工作室越面向控制台，他们使用的 STL 就越少。PC 开发人员可以摆脱它，因为他们可以依靠虚拟内存系统并且有足够的 CPU。控制台人员关心每个分配，如果您正在制作多平台游戏，您会进入不同平台的 STL 实现的奇妙世界，这些实现的行为不同，并且存在不同的错误，尽管近年来这种情况确实有所改善。游戏开发者也喜欢管理他们自己的堆和分配，这可能很难用 STL 处理。
3.  期望它在编译器设置中被禁用
4.  哈哈，不错。
5.  我不知道。我还没有真正看到智能指针在游戏代码中的使用，尽管除了对动态内存的普遍厌恶之外，我认为从游戏开发的角度来看，智能指针并没有什么特别令人反感的地方。
6.  这又取决于。PC 人员可能会像他们不在乎一样分配和取消分配。控制台人员关心每个分配。这并不意味着没有新的和删除的，而是意味着动态分配只在设置游戏或当前关卡时进行一次，然后直到游戏或当前关卡被拆除。最好避免按帧分配和解除分配，这不仅是为了降低总内存使用量，而且是为了避免碎片。您会在控制台游戏引擎中看到许多固定大小的数组和静态分配的结构。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-07T09:21:37.060

1.  很多
2.  太多了。但是我们试图在运行时将自己限制为 std::vector。
3.  没有任何。
4.  什么？
5.  我们的代码已经被这种疾病感染了是的。然而，我们将开始鞭打人们散布祸害。
6.  是的。很多。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-11T05:36:15.500

恕我直言，您提到的 6 点中有 5 点是标准 C++ 行话。这不是“游戏编程”，而是对流行语的天真使用。我的建议是这样；学习你的数学......特别是触发。然后获取一些数据表并了解现代图形硬件平台......不要敏感的感觉 C# 欺凌词......学习汇编程序编程。

归根结底，要成为一名游戏程序员，你必须能够做数学。就是这样

# c# - 你如何计算另一个基地？

> ID：832822
> 
> 赞同：1
> 
> 时间：2009-05-07T03:50:08.573
> 
> 标签：c#, binary

假设我想以二进制计数，直到我拥有一组字节数将容纳的最高数字，我该怎么做？感觉应该有一个非常简单的方法，我只是不知道。我用谷歌搜索，但很惊讶没有找到任何例子。

例如，如果我想计数到 1 个字节，我会从 00000001 开始，加 1 得到 00000010，加 1 得到 00000011，依此类推，直到得到 11111111。

此外，你怎么能在十六进制中做同样的事情？你从 0x00 开始，加一并输出 0x01、0x02、0x03 等，直到你到达 0xFF？

另外，如何将值输出为字符串（如我的示例）？

一些伪代码：

```
byteSize = 3
counter = 0
    while counter.size <= byteSize
      print counter /* prints 00000001, 00000010, etc. 
      count += 1
    loop 
```

## 更新：

我不仅关心在另一个基地显示一个数字，这只是其中的一部分。我看到我的错误在于显示功能决定了数字的显示方式（正如杰里米指出的那样）。所以，这不是问题。

## 更新 2：

我保证我不是一个彻头彻尾的白痴。这是上下文：

今天我在 reddit 上读到这篇文章时开始的： [http ://www.elliottkember.com/kember_identity.html](http://www.elliottkember.com/kember_identity.html)

然后，这个： [http ://www.reddit.com/r/programming/comments/8iguu/md5_gamechallenge_for_you_reddit/](http://www.reddit.com/r/programming/comments/8iguu/md5_gamechallenge_for_you_reddit/)

这导致了这个： [http ://www.olegkikin.com/md5game/](http://www.olegkikin.com/md5game/)

所以，我想你可以从不同的时间间隔开始数位，然后让'er运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-07T03:56:02.147

### 二进制

```
for (int i = 0; i <= byte.MaxValue; i++)
{
    Console.WriteLine(Convert.ToString(i, 2).PadLeft(8, '0'));
} 
```

### 十六进制

```
for (int i = 0; i <= byte.MaxValue; i++)
{
    Console.WriteLine("0x" + i.ToString("X").PadLeft(2, '0'));
} 
```

或者

```
for (int i = 0; i <= byte.MaxValue; i++)
{
    Console.WriteLine(Convert.ToString(i, 16).PadLeft(2, '0'));
} 
```

### 多个字节

```
int numBytes = 3;
for (int i = 0; i < Math.Pow(2, numBytes * 8); i++)
{
    Console.WriteLine(Convert.ToString(i, 2).PadLeft(numBytes * 8, '0'));
} 
```

我不会做超过3个，否则你会等很长时间......

## 对更新的回应：

我希望您在开玩笑说“以二进制计数到 20 个字节”。那是160位。**这将创建一个数字列表，其中包含整个宇宙中原子数**范围内的某个计数。我希望你有足够的时间（即千禧一代的 googols）来等待它完成 :)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-07T03:57:12.800

您“计数”的基础完全取决于将数字输出到屏幕的函数（或在此之前将其转换为字符串）。不同的基数只是视觉上表示相同数字的不同方式。因此，要以二进制“计数”，您只需告诉您的数字到字符串函数使用基数 2 而不是默认的基数 10。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-07T04:49:26.137

对于任意深度。

如果这样做有意义（例如，64 位处理器），您可以轻松地将其切换到 64 位。

注意：这完全是徒手的，我没有编译它，显然也没有测试它。如果您使用超过 5 个 32 位计数器，我什至无法开始猜测打印 2^160 个值（即 1.46e48 个值）或更多需要多长时间。

这是非常低效的，但到底是什么。

```
// A word is 32-bits
void CountBytes(int numberOfWords)
{
    uint[] numbers = new uint[numberOfWords];

    while(true)
    {
        // Show most-significant first
        for (int i=numbers.Length-1; i>=0; i--)
        {
            Console.Write(Convert.ToString(numbers[i], 2).PadLeft(32, '0'));
        }

        // Hit max on all uint's, bail
        bool done = true;
        for (int i=numbers.Length-1; i >= 0; i--)
        {
            if (numbers[i] != uint.MaxValue)
            {
                done = false;
                break;
            }
        }
        if (done)
        {
            break;
        }

        // Check for overflow
        for (int i=numbers.Length-2; i >= 0; i--)
        {
            // Overflow for numbers[i] is if it and all beneath it are MaxValue
            bool overflow = true;
            for (int k=i; k>=0; k--)
            {
                if (numbers[k] != uint.MaxValue)
                {
                    overflow = false;
                    break;
                }
            }

            if (overflow)
            {
                numbers[i+1]++;
                numbers[i] = 0;
            }
        }

        // Increment counter
        numbers[0]++;
    }
} 
```

# silverlight - 如何为 Silverlight 和 CLR 使用相同的库

> ID：832823
> 
> 赞同：3
> 
> 时间：2009-05-07T03:50:36.437
> 
> 标签：silverlight, build, clr

我有一个具有自定义域逻辑的库。有些东西很重，依赖于silverlight运行时之外的核心运行时。

是否可以为 2 个不同的运行时编译相同的代码并引用来自不同消费者的不同风格？如何

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T08:00:17.257

有几种方法可以实现您想要的。

1.  您不能在 silverlight 中引用完整的 .net 框架程序集，但可以反过来执行，因此您可以针对 SL 进行编码，然后在针对完整 .Net 编译的项目中引用 SL 项目。

2.  您可以将来自其他项目的文件添加为共享源代码的链接，而不是引用程序集

3.  更好的是，您可以使用 Prism v2 和它附带的 Project Linker 插件让 Visual Studio 管理项目之间的文件链接。[您可以在此处](http://mokosh.co.uk/post/2009/04/19/prism-2-wpf-and-silverlight-multi-platform-targeting/)阅读有关多平台定位的更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T12:03:47.763

一个简单的高级答案是，您将公共代码放在 CLR 和 Silverlight 程序集都引用的程序集中。特定于任一平台的任何内容都必须从公共代码中抽象出来，并在 CLR 和 Silverlight 项目中实现。

看看继承和多态的奇迹；）

[附带说明：如果您发现自己复制粘贴代码（片段或整个 cs 文件），那么您做错了什么]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-07T13:43:14.687

您是否考虑过使用 Workflow Foundation 来完成您的任务？

PS这个问题非常广泛。你能提供一个样品让我们有一些工作吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T04:05:03.360

将两个类库项目（SLLib、CLRLib）添加到您的解决方案中。然后将所有 .cs 文件添加到这两个解决方案中。

# haskell - Haskell“什么都不做” IO，或者如果没有其他

> ID：832828
> 
> 赞同：86
> 
> 时间：2009-05-07T03:51:49.413
> 
> 标签：haskell, syntax, io

我想在 Haskell 中做一些看起来像这样的事情：

```
main1 = do s <- getLine
           if s == "foo" then putStr "You entered foo" 
```

显然这是不合法的，因为没有`else`. 我想到的另一种选择：

```
nop :: IO ()
nop = sequence_ []

main2 = do s <- getLine
           if s == "foo" then putStr "You entered foo" else nop 
```

这有点冗长，但如果有必要我会接受它。不过，如果没有内置版本，我会感到惊讶`nop`。

或者：

```
doIf :: Bool -> IO () -> IO ()
doIf b m = if b then m else nop

main3 = do s <- getLine
           doIf (s == "foo") (putStr "You entered foo") 
```

这更简洁，但语法不是特别好。同样，如果我发现已经存在的内置内容，我也不会感到惊讶。

这样做的首选方法是什么？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2009-05-07T03:58:11.847

在 monad 中执行无操作的最简单方法是：

```
return () 
```

等效地：

```
pure () 
```

但是，对于您正在做的特定习语，已经为您制作了一个组合器：

```
import Control.Monad
main = do s <- getLine
          when (s == "foo") $ putStr "You entered foo" 
```

这个[`when`](https://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad.html#v:when)组合器的行为与您的组合器完全一样`doIf`:)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-05-07T06:19:00.277

您可以使用[Hoogle](http://haskell.org/hoogle/)来查找函数，在这种情况下：`when`.

在 Hoogle 中，您可以输入类型签名，它会通过统一类型和重新排序参数来尝试在标准库中找到匹配的函数。

在您的情况下，您只需输入`doIf`函数的类型：[Bool -> IO () -> IO ()](http://haskell.org/hoogle/?hoogle=Bool%20-%3E%20IO%20()%20-%3E%20IO%20()) 。`when`这里是第三个答案，它的反面`unless`也在那里。

# javascript - Javascript中带逗号的数字

> ID：832829
> 
> 赞同：27
> 
> 时间：2009-05-07T03:53:30.720
> 
> 标签：javascript, regex

我有一个接受数字并对数字执行数学运算的 javascript 函数。但是，我传入的数字中可能有一个逗号，并且根据我对 Javascript 的有限经验，我在使用该值时遇到了问题。它似乎没有将其视为数字类型。

获取值为 1,000 的参数并将其转换为数字 1000 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-05-07T04:01:58.000

您可以将文本框设置为具有**onblur()**函数，因此当用户尝试离开文本框时，您可以使用 javascript**替换**函数从值中删除逗号

**示例**：

```
 function checkNumeric(objName)
  {
    var lstLetters = objName;

    var lstReplace = lstLetters.replace(/\,/g,'');
  } 
```

这里有输入标签：

```
<input type="text" onblur="checkNumeric(this);" name="nocomma" size="10" maxlength="10"/> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-05-07T04:14:26.660

一种快速而肮脏的方法是使用 String.replace() 方法：

```
var rawstring = '1,200,000';
var cleanstring = rawstring.replace(/[^\d\.\-\ ]/g, ''); 
```

这会将 cleanstring 设置为：`1200000`。假设您使用的是美国格式，那么将发生以下转换：

```
1234 --> 1234
1,234 --> 1234
-1234 --> -1234
-1,234 --> -1234
1234.5 --> 1234.5
1,234.5 --> 1234.5
-1,234.5 --> -1234.5
1xxx234 --> 1234 
```

如果您处于反转“。”的其他语言环境中 和'，'，那么你必须在正则表达式中进行更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-07T04:00:16.910

只需将所有逗号替换为空格即可。

你可以按照这个： [http ://blog.techsaints.com/2007/06/25/javascript-how-to-remove-all-commas-from-a-number/](http://blog.techsaints.com/2007/06/25/javascript-how-to-remove-all-commas-from-a-number/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-23T20:48:59.713

将逗号分隔的数字字符串转换为类型数字（又名*类型转换*）

```
+"1,234".split(',').join('') // outputs 1234 
```

**细分**：

```
+             - math operation which casts the type of the outcome into type Number
"1,234"       - Our string, which represents a comma delimited number
.split(',')   - split the string into an Array: ["1", "234"], between every "," character
.join('')     - joins the Array back, without any delimiter: "1234" 
```

一个简单的功能是：

```
function stringToNumber(s){
  return +s.split(',').join('');
} 
```

# php - 寻找 PHP5 的不兼容性

> ID：832835
> 
> 赞同：0
> 
> 时间：2009-05-07T03:57:13.893
> 
> 标签：php, php4

这里的某些东西与 PHP5 不兼容，但我完全不知道是什么。我的网络服务器上有一个 .htaccess 文件，其中包含“AddHandler x-mapp-php5 .php”行，因为服务器上几乎所有其他内容都需要它，并且默认为 PHP4 ......但是；我需要这个脚本才能工作，但*它只*适用于 PHP4。知道问题出在哪里吗？

```
<?  
/* config for the script */  
$download_path = "content"; /* path to your files, NB: no slash at the end */  
$sort = "asort"; /* array sorting - alphabetical sorting for the array */  

/* start the script... no more editing from here on... */  

/* get a list of the files + dirs and turn the list into an array */  
function file_list($dir) {  
  global $sort;  
  global $file_file_count;  
  if (is_dir($dir)) {  
    $fd = @opendir($dir);  
    while (($part = @readdir($fd)) == true) {  
      clearstatcache();  
      if ($part != "." && $part != "..") {  
        $file_array[] = $part;  
      }  
    }  
  if ($fd == true) {  
    closedir($fd);  
  }  
  if (is_array($file_array)) {  
    $sort($file_array);  
    $file_file_count = count($file_array);  
    return $file_array;  
  } else {  
    return false;  
  }  
  } else {  
    return false;  
  }  
}  

/* function to convert to Mb, Kb and bytes */  
function file_size($size) {  
  $megabyte = 1024 * 1024;  
    if ($size > $megabyte) { /* literal.float */  
      $re_sized = sprintf("%01.2f", $size / $megabyte) . " Mb";  
    } elseif ($size > 1024) {  
      $re_sized = sprintf("%01.2f", $size / 1024) . " Kb";  
    } else {  
      $re_sized = $size . " bytes";  
    }  
  return $re_sized;  
}  

/* get a list of the files/dirs, put them into a table. */  
function generate_file_list($path) {  
  global $download_path;  
  global $PHP_SELF;  
  $final_path = str_replace("//","/",str_replace("..","",urldecode($path)));  
  $file_array = file_list("$download_path/$final_path/");  
  echo "<b>$final_path/</b>\n";  
  echo "<br><br>\n\n";  
  if ($file_array == false) { /* check if the dir is an array before we process it to foreach(); */  
    echo "directory empty\n";  
  } else {  
    echo "<table width=\"75%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n";  
    echo "<tr><td><b>file</b></td><td><b>size</b></td></tr>\n";  
    foreach ($file_array as $file_name) {  
      $is_file = "$download_path/$final_path/$file_name";  
      $final_dir_name = urlencode($final_path); /* urlencode(); to prevent any broken links - decode on do_download(); */  
      $final_file_name = urlencode($file_name);  
      $file_size = filesize("$download_path/$final_path/$file_name");  
      $final_file_size = file_size($file_size);  
      if (is_file($is_file)) {  
        print "<tr><td><a href=\"$PHP_SELF?go=download&path=$final_dir_name&file=$final_file_name\">$file_name</a></td><td>$final_file_size</td></tr>\n";  
      } elseif (is_dir($is_file)) {  
        print "<tr><td><a href=\"$PHP_SELF?go=list&path=$final_dir_name/$final_file_name\">$file_name/</a></td><td>&lt;dir&gt;</td></tr>\n"; /* we don't need a size for a directory */  
      }  
    }  
    echo "</table>\n";  
  }  
}  
/* allow the user to download the file... */  
function do_download($path,$file) {  
  global $download_path;  
  $get_path = str_replace("//","/",str_replace("..","",stripslashes(urldecode($path)))); /* fopen adds \ to ' - so we strip 'em. */  
  $get_file = str_replace("//","/",str_replace("..","",stripslashes(urldecode($file))));  
    header("Content-Disposition: atachment; filename=$get_file");  
    header("Content-Type: application/octet-stream");  
    header("Content-Length: ".filesize("$download_path/$get_path/$get_file"));  
    header("Cache-Control: no-cache, must-revalidate");  
    header("Pragma: no-cache");  
    header("Expires: 0");  
  $fp = fopen("$download_path/$get_path/$get_file","r");  
  print fread($fp,filesize("$download_path/$get_path/$get_file"));  
  fclose($fp);  
  exit;  
}  

if (!isset($go)) {  
  $go = "dirlist";  
} if ($go == "dirlist") {  
    generate_file_list(""); /* null, so we get a list for the root directory */  
  } elseif ($go == "list" && isset($path)) {  
    if (isset($path)) { /* if the path is null - it returns a list for the root directory */  
      generate_file_list($path); /* get a list for the path specified */  
    } else {  
      generate_file_list("");  
    }  
  } elseif ($go == "download") {  
      if (isset($path) && isset($file)) {  
        do_download($path,$file); /* download the file... */  
      } else {  
    echo "no file selected to download :)\n";  
  }  
}  
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T05:00:08.560

当您修复了由 fiXedd 和 jmucchiello 建议的 Register Globals 问题后，请确保在*generate_file_list*函数中删除对 $PHP_SELF 的引用。首先，它不再那样存在：它现在是 $_SERVER['PHP_SELF'] 但更重要的是，您的脚本使用它的方式使您面临跨站点脚本问题。

阅读更多内容：[http ://www.seancoates.com/xss-woes](http://www.seancoates.com/xss-woes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T04:35:50.133

代码假设***$go***、***$file***和***$path***变量被神奇地设置了。要解决这个问题（并修复脚本），您可以将脚本的开头更改为如下所示：

```
<?  
/* config for the script */  
$download_path = 'content'; /*path to your files, NB: no slash at the end*/  
$sort = 'asort'; /* array sorting - alphabetical sorting for the array */  

/* start the script... no more editing from here on... */  
$go   = $_REQUEST['go'];
$file = $_REQUEST['file'];
$path = $_REQUEST['path'];

// ... 
```

由于称为[Register Globals](http://ca.php.net/manual/en/security.globals.php)的东西，此用途为您工作。现在已将其关闭，因为它是一个相当大的安全问题，并且导致了草率的编码实践。

# asp.net - 在 ASP.NET 中努力使用可接受的 Session 变量

> ID：832843
> 
> 赞同：3
> 
> 时间：2009-05-07T04:01:48.937
> 
> 标签：asp.net, session-variables

我试图放弃在 ASP.NET 中将所有内容都保存在 Session 变量中（我来自 Windows 编程背景），并且我通常完全停止在 Session 变量中显式存储任何内容。任何人都可以就您认为可以接受会话变量的用途给出一些指导吗？

这是一个具体的例子...我从数据库中加载一个业务对象并填充和编辑屏幕。用户可以编辑值并保存。我将加载业务对象、加载表单并将业务对象保存到会话变量的旧方法。如果用户单击保存，我将从会话变量中检索业务对象，替换已编辑的值，然后保存它。我从数据库加载业务对象并加载表单的新方法。用户将编辑这些值并单击保存。我将从数据库中重新加载我的业务对象，替换已编辑的值，然后保存它。我不是网络编程专家，但我觉得第一种方法是错误的，因为使用会话变量的坏名声，而且我觉得第二种方式是错误的，因为它感觉就像是一种糟糕的方式（加载业务对象两次）。我们在这里不考虑任何形式的缓存。我将如何处理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-07T04:10:01.880

通过在回帖中重新加载数据库中的业务对象以保存用户更改，我一点也不生气。

该对象必须来自该回发的某个地方，并且与快速数据库调用（例如抓取特定对象）相关的有限开销可能是您最好的选择。

您在回发时将该业务对象恢复到内存中的选项：

*   再次从数据库中获取它。缺点：一些（小）额外的数据库开销
*   将其保存在用户的 Session 中。缺点：可能仍在访问数据库（如果会话状态存储在那里）或使用大量内存（如果会话状态存储在那里）并且如果多个用户可能正在访问该对象并且最糟糕的是该会话，则可能会存储多个副本如果 ASP.NET 出于某种原因清除了对象，则用户点击提交后对象可能会消失。
*   从缓存。缺点：使用一些额外的内存，如果缓存不存在，你仍然必须去数据库，但我会投入大笔资金，因为任何应用程序都有很多更大的瓶颈来使用缓存。
*   视图状态。您可以将对象存储在 Viewstate 中（将其发送给客户端，然后客户端将其发回）。缺点：在我看来，最糟糕的解决方案。将它添加到 Viewstate 意味着它会通过下游和上游的线路，并导致页面大小很大。Session 不是最好的，但 Viewstate 是魔鬼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T04:19:49.423

你有很多用户吗？

如果您的站点容量较小，则将您的业务对象存储在会话中可能没问题。

如果您使用 SQL Server 来存储您的会话，那么您实际上是在每次回发时有效地从数据库中加载您的业务对象。

不过，根据经验，我倾向于使用 Session 仅存储适用于用户会话生命周期的信息。特定于单个 Web 表单的业务对象并不真正适合此类别。对于大容量站点，此策略也可能会帮助您更好地扩展。这仅取决于所有相关因素。

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T04:32:45.930

在更新之前从数据库中重新加载对象可能非常危险。您最终可能会错过任何可能的并发冲突。

例如，如果发生此流程：

1.  在计算机 1 上显示客户 1 的编辑屏幕
2.  在计算机 2 上显示客户 1 的编辑屏幕
3.  从计算机 1 处理对客户 1 的更新
4.  从计算机 2 处理对客户 1 的更新

(4) 可能由于并发冲突而失败，即更新正在覆盖计算机 2 不知道的更改。但是通过从数据库重新加载，您忽略了这些问题并实现了最后一次更新。

因此，对于这种情况，如果您完全关心并发性，我认为将原始实体放在会话中（或表单上的隐藏字段中）绝对是正确的做法。

更不用说很多人不喜欢再次访问数据库以获得额外的阅读......

# vb.net - 处理后期绑定对象的事件

> ID：832845
> 
> 赞同：1
> 
> 时间：2009-05-07T04:02:12.740
> 
> 标签：vb.net, winforms, ms-office

我想使用 MS Office 自动化并拥有针对用户触发的事件触发的事件处理程序。例如，如果用户单击 Word 中的保存按钮，我想拦截该事件并在我的程序中执行代码。

我不想绑定到特定版本的 Word，因为我不知道我的用户将运行哪个版本，所以我使用后期绑定来实例化对 Word 的引用。

问题是 AddHandler 和 Dim WithEvents 命令需要对在设计时已知的对象的特定引用。鉴于此，如何在没有对特定版本的 Word 库的早期绑定引用的情况下定义事件处理程序？

我可以尝试参考早期版本的 Word，期望 Word 的新版本将向后兼容，但这似乎很笨拙且有风险。

有没有更好的方法，而不会在被子下面修得太深？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T13:58:20.140

这看起来像一个答案，但丑陋。我得再读几遍。

[http://www.codeproject.com/KB/cs/zetalatebindingcomevents.aspx](http://www.codeproject.com/KB/cs/zetalatebindingcomevents.aspx)

有更好的选择吗？我怀疑。它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-22T14:46:12.510

我不相信这是可能的，因为无法保证您绑定的内容将具有具有相同签名的该名称的事件。

# windows - 如何注册为 NT 内核事件的实时 ETW 使用者？

> ID：832846
> 
> 赞同：4
> 
> 时间：2009-05-07T04:02:21.087
> 
> 标签：windows, debugging, events, wmi

我已经能够成功地使用 logman 来转储一些内核跟踪。但是，我希望能够在我的应用程序中以编程方式启用内核事件的实时消耗（主要是线程/进程创建/删除和文件 I/O）。完成这项任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-12-03T23:06:20.493

[您在StartTrace](http://msdn.microsoft.com/en-us/library/aa364117(VS.85).aspx)中启用内核事件。在传递给 StartTrace 的[EVENT_TRACE_PROPERTIES](http://msdn.microsoft.com/en-us/library/aa363784(VS.85).aspx)中，EnableFlags 包含不同内核事件提供程序的各种标志。将 EVENT_TRACE_PROPERTIES 中的 LogFileMode 设置为[EVENT_TRACE_REAL_TIME_MODE](http://msdn.microsoft.com/en-us/library/aa364080(VS.85).aspx)以成为实时消费者。然后，您可以使用[ProcessTrace](http://msdn.microsoft.com/en-us/library/aa364093(VS.85).aspx)使用事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-06-24T08:07:36.640

请注意，StartTrace 可能会因 ERROR_ALREADY_EXISTS 而失败，此时如果您需要更改会话属性，您将需要使用 ControlTrace。另请注意，如果您启用了 UAC，则必须“以管理员身份”运行程序；并且如果您正在调试，您还需要以“管理员”身份运行 Visual Studio。您的程序还需要将其清单（如果您有）设置为“作为管理员”以获得特权。

如果您在 MSDN 上搜索 OpenTrace、ProcessTrace 和 StartTrace，您将找到各种示例的链接，这些示例将为您提供所需的内容。

# assembly - 如何在 MASM 程序集中将十进制数转换为 REAL10？

> ID：832854
> 
> 赞同：3
> 
> 时间：2009-05-07T04:09:56.467
> 
> 标签：assembly, floating-point, numbers, masm

现在我将包含十进制数的字符串转换为整数（暂时忽略小数点），将其加载到 ST(0) 中，然后除以十的正确幂来计算小数点。这看起来很圆，需要我有一个查找表来查找 10 的某些幂。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T04:30:01.363

在我的脑海中，我被构造尾数部分、计算位数和直接设置指数而不是除法的想法所吸引。

# javascript - 如何使用 JQuery $.scrollTo() 函数滚动窗口

> ID：832860
> 
> 赞同：100
> 
> 时间：2009-05-07T04:13:57.970
> 
> 标签：javascript, jquery, scroll, scrollto

每次用户接近文档顶部时，我都会尝试向下滚动 100 像素。

当用户接近文档顶部时，我执行了该函数，但 .scrollTo 函数不起作用。

我在前后放置了一个警报，以检查它是否真的是停止它的线路，只有第一个警报响起，这是代码：

```
alert("starting");
$.scrollTo({ top: '+=100px', left: '+=0px' }, 800);
alert("finished"); 
```

我知道我已经正确链接了 jquery 页面，因为我在整个过程中使用了许多其他 jquery 函数并且它们都工作正常。我也试过从上面删除'px'，但似乎没有什么不同。

* * *

## 回答 #1

> 赞同：325
> 
> 时间：2011-02-18T13:50:44.767

```
$('html, body').animate({scrollTop: $("#page").offset().top}, 2000); 
```

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2009-05-07T08:06:21.517

如果它不起作用，为什么不尝试使用 jQuery 的 scrollTop 方法呢？

```
$("#id").scrollTop($("#id").scrollTop() + 100); 
```

如果您希望平滑滚动，您可以使用基本的 javascript setTimeout/setInterval 函数使其在设定的时间长度内以 1px 的增量滚动。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2010-08-09T16:33:18.903

jQuery 现在支持 scrollTop 作为动画变量。

```
$("#id").animate({"scrollTop": $("#id").scrollTop() + 100}); 
```

您不再需要 setTimeout/setInterval 来平滑滚动。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-05-27T02:03:21.727

为了解决`html`vs`body`问题，我通过不直接为 css 设置动画而是调用`window.scrollTo();`每个步骤来解决此问题：

```
$({myScrollTop:window.pageYOffset}).animate({myScrollTop:300}, {
  duration: 600,
  easing: 'swing',
  step: function(val) {
    window.scrollTo(0, val);
  }
}); 
```

由于它使用跨浏览器 JavaScript，因此无需任何刷新问题即可很好地工作。

查看[http://james.padolsey.com/javascript/fun-with-jquerys-animate/](http://james.padolsey.com/javascript/fun-with-jquerys-animate/)了解更多关于 jQuery 的 animate 函数可以做什么的信息。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-07T07:58:06.030

看起来你的语法有点错误......我根据你的代码假设你试图在 800 毫秒内向下滚动 100 像素，如果是这样，那么这有效（使用 scrollTo 1.4.1）：

```
$.scrollTo('+=100px', 800, { axis:'y' }); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-04-16T14:01:40.770

实际上像

```
function scrollTo(prop){
    $('html,body').animate({scrollTop: $("#"+prop).offset().top +
 parseInt($("#"+prop).css('padding-top'),10) },'slow');
} 
```

会很好地工作并支持填充。您还可以轻松地支持边距 - 完成见下文

```
function scrollTo(prop){
    $('html,body').animate({scrollTop: $("#"+prop).offset().top 
+ parseInt($("#"+prop).css('padding-top'),10) 
+ parseInt($("#"+prop).css('margin-top'),10) +},'slow');
} 
```

# rgb - 使用 libjpeg 将字节流转换为 RGB

> ID：832864
> 
> 赞同：4
> 
> 时间：2009-05-07T04:16:46.013
> 
> 标签：rgb, libjpeg

我拦截一个数据包并提取有效负载。此有效负载是压缩的 jpeg 字节流数据（例如，此数据分配给`unsigned char *payload`）。我知道如果我有一个 FILE 指针，那么我可以使用 libjpeg 库来提取图像信息。我的问题是有没有办法将我的指针（`*payload`）传递给 libjpeg 函数以获取 RGB 值和图像的尺寸？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-09-01T17:00:02.487

回复：亚当罗森菲尔德的回答，你不必自己实现任何东西：`jpeg_mem_src()`会做你想做的事：

```
jpeg_mem_src(&cinfo, payload, payload_len); 
```

您必须将整个图像存储在内存中（并知道它的长度）。

obStackoverflow：我知道，一个非常老的问题的答案，但今天我必须这样做，这个页面在我的网络搜索中排名第一或第二。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-07T05:10:15.683

要添加到[Tal 的答案](https://stackoverflow.com/questions/832864/converting-bytestream-to-rgb-using-libjpeg/832919#832919)，您应该做的是查看`jpeg_stdio_src()`函数的实现`jdatasrc.c`。该函数的目的是初始化数据源对象，即`cinfo->src`. 所以，你应该做的是以下几点：

1.  创建一个结构（类似于 中的`my_source_mgr`结构`jdatasrc.c`），它的第一个成员是`struct jpeg_source_mgr`. 添加您认为必要的任何其他成员。请注意，我们实际上是在进行手动继承——在 C++ 中，我们将定义一个派生自 的类`jpeg_source_mgr`，而在其中声明的各种函数指针`jpeg_source_mgr`将改为虚函数。但是，我们使用的是 C，所以我们必须以艰难的方式进行继承和多态。

2.  为结构实例分配空间，确保分配正确的字节数，并填写数据成员。

3.  实现以下五个功能：

    *   `void init_source(j_decompress_ptr)`
    *   `boolean fill_input_buffer(j_decompress_ptr)`
    *   `void skip_input_data(j_decompress_ptr, long)`
    *   `boolean resync_to_start(j_decompress_ptr, int)`
    *   `void term_source(j_decompress_ptr)`

    请注意，对于内存缓冲区，这些函数可能非常微不足道。

4.  最后，初始化`jpeg_source_mgr`成员中的函数指针以指向这些函数。

有了这个，您就可以使用它而不是`jpeg_stdio_src()`初始化数据源管理器，然后您就可以像从文件系统中解码文件一样进行操作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T04:06:06.887

在最近的 libjpeg 版本中，`jpeg_mem_src`已经为您实现了。

为 windows 编译 libjpeg 非常容易。

[从项目网页](http://www.ijg.org/)下载源代码 将
所有内容提取到一个文件夹中
然后[打开 Visual Studio 10 命令提示符](http://msdn.microsoft.com/en-us/library/ms229859.aspx)到该目录

类型

```
nmake /f makefile.vc setup-v10 
```

这将创建一个 .sln 文件，该文件将在 VS2010 中打开。它应该从那里编译。

之后您也可以调试 libjpeg 源代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T04:43:01.100

libjpeg 具有输入/输出管理器，可以扩展为使用原始内存缓冲区或您拥有的任何其他形式的 I/O，但 AFAIK 只有 FILE* 实际上在库的版本中实现。

# iphone - 检索存储在 plist 文件中的数组数据

> ID：832867
> 
> 赞同：0
> 
> 时间：2009-05-07T04:17:57.913
> 
> 标签：iphone, objective-c, plist

我们如何检索存储在 plist 文件中的数组数据。

plist文件和源代码如下图，

```
------------------------plist File-------------------------
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Name</key>
    <string>abcxxx</string>
    <key>Phones</key>
    <array/>
    <key>item1</key>
    <string>121327777</string>
    <key>item2</key>
    <string>333333333</string>
</dict>
</plist>
---------------------------------------------------------

  -(id) init
{

    NSString *errorDesc = nil;
    NSPropertyListFormat format;
    phoneNumbers =[[NSMutableArray alloc]init];
    NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"testfile" ofType:@"plist"];
    NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];

    NSDictionary *temp = (NSDictionary *)[NSPropertyListSerialization
                                          propertyListFromData:plistXML
                                          mutabilityOption:NSPropertyListMutableContainersAndLeaves
                                          format:&format errorDescription:&errorDesc];

    if(!temp){
        NSLog(errorDesc);
        [errorDesc release];
    }
    self.personName = [temp objectForKey:@"Name"];
    self.phoneNumbers = [NSMutableArray arrayWithArray:[temp objectForKey:@"Phones"]];
    NSLog(@"Label executed %@",[phoneNumbers objectAtIndex:0]);

    UILabel *name = [[UILabel alloc]initWithFrame:CGRectMake(-180, 100, 100, 20)];
    name.text = [phoneNumbers objectAtIndex:1];
    [self addChild:name];
    NSLog(@"Label executed %@",name); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T04:29:16.653

您的 plist XML 看起来有点可疑。您拥有的`<array/>`标签只是一个独立的标签，我不确定它是否会做任何有用的事情。

也许将 plist 更改为如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Name</key>
    <string>abcxxx</string>
    <key>Phones</key>
    <array>
        <string>121327777</string>
        <string>333333333</string>
    </array>
</dict>
</plist> 
```

我不确定这是否会对您的代码有所帮助。您是否已通读此文档？

[http://developer.apple.com/documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html](http://developer.apple.com/documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T21:03:45.170

很可能您根本无法阅读 plist，只需检查您的 plist 结构，

```
 NSString *StringsFromPList = [[NSBundle mainBundle] bundlePath];
 NSString *itemPositionPlistLocation = [StringsFromPList stringByAppendingPathComponent:@"Words.plist"];
 _myDictionary= [[NSDictionary alloc] initWithContentsOfFile:itemPositionPlistLocation];
NSArray * items = [_myDictionary objectForKey:@"Root"];

<plist version="1.0">
<dict>
<key>Root</key>
    <array>
        <string>Happy</string>
        <string>Rain</string>
    </array> 
```

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T04:40:49.327

你所要做的就是调用 NSDictionary 的 initWithContentsOfFile: 方法。例如

```
NSDictionary *temp = [[NSDictionary alloc] initWithContentsOfFile:plistPath];
self.personName = [temp objectForKey:@"Name"];
self.phoneNumbers = [[temp objectForKey:@"Phones"] mutableCopy]; 
```

但是，如上所述，您的 plist 看起来确实有点可疑，请尝试将其更改为 Andy White 提供的那个。

问候，

凯尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T05:10:48.083

UITextField 的框架也很奇怪（取决于自己的框架）`CGRectMake(-180, 100, 100, 20)`可能在屏幕外。

# c# - Windows 证书存储

> ID：832868
> 
> 赞同：5
> 
> 时间：2009-05-07T04:18:21.330
> 
> 标签：c#, .net, windows, ssl, certificate

我在哪里可以找到服务器 2003 硬盘驱动器上的 Windows 证书存储位置。我正在编写 ac# 实用程序来管理我们用来通知它们何时到期的少数证书。因此，我选择将它们存储在 Windows 证书存储中。而不是使用我在 MMC 中看到的任何现有位置（个人...），我想使用我的应用程序名称和我选择的位置（例如：'c:\certs'）创建另一个位置，以便我可以返回向上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-02-03T21:05:39.873

我知道这种老问题，但是当我在寻找类似问题的答案时，我发现证书信息存储在 Windows 注册表中，而不是常规文件中：[http://technet.microsoft。 com/en-us/library/cc787544(WS.10).aspx#w2k3tr_certs_tools_dgzz](http://technet.microsoft.com/en-us/library/cc787544(WS.10).aspx#w2k3tr_certs_tools_dgzz)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T05:55:52.280

我强烈怀疑您不需要创建自己的位置。你有充分的理由想要一个吗？Windows 有用于管理证书的 API，我建议您研究一下。我很确定你可以通过公共 API 做所有合理的事情。如果您将 API 与系统存储一起使用，您可能需要编写更少的代码，并且您的解决方案将更安全，与操作系统更好地集成（以及为处理 Windows 上的证书而构建的所有其他工具）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-19T18:59:54.703

（原谅迟到的回复）

我不确定这个 Syam，但至少证书中涉及的私钥可能在这里：C:\Documents and Settings\All Users\Application Data\Microsoft\Crypto

同样，这不是我确定的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T23:45:22.877

可以使用 makecert.exe 创建一个新的商店

makecert.exe -sr localmachine -ss

您可以从这里下载该工具[http://gallery.technet.microsoft.com/Certificate-Creation-tool-5b7c054d](http://gallery.technet.microsoft.com/Certificate-Creation-tool-5b7c054d)

# wcf - 使用 WSHttpBinding 时，WCF 并发请求堆积在服务器上

> ID：832871
> 
> 赞同：28
> 
> 时间：2009-05-07T04:21:15.643
> 
> 标签：wcf, multithreading, concurrency, throttling

我有一个 WCF 客户端/服务器应用程序，它使用 WSHttpBinding 通过 HTTP 进行通信。

**服务器设置**：自托管，使用标准 WCF `ServiceHost`。我的实际服务等级归因于：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, 
 InstanceContextMode = InstanceContextMode.PerSession, 
 UseSynchronizationContext = false)] 
```

**客户端设置**：使用visual-studio生成的客户端代理，使用*同步*服务调用（`proxy.call_server_method`阻塞直到服务器完全响应。）

**场景**：我有一个特定的方法调用，需要 20 秒才能在服务器上执行。客户端在单独的线程中调用此方法，因此它不会被阻止，这`ConcurrencyMode.Multiple`意味着 WCF 也应该在服务器上的单独线程中执行它。

这个理论得到了以下事实的支持：当我将我的应用程序配置为使用`NetTcpBinding`时，一切正常。

**问题**：
如果我将应用程序配置为使用`WSHttpBinding`，那么这个长方法调用会导致 http 请求“备份”。我已经通过检查我的日志和使用 fiddler 调试 HTTP 请求验证了这种行为。

例子：

*   客户端在后台线程上发起 20 秒长的请求
*   客户端在前台线程发起请求 B 和 C
*   请求 B 和 C 被发送到服务器，服务器在完成 20 秒长的请求之前不会处理它们

但有时候：

*   在 20 秒的请求返回之前（这种情况很少见） ，请求 B 和 C*不会被发送*（它们甚至不会出现在 fiddler 中）。
    *   注意：`<add address="*" maxconnection="100"/>`客户端的 app.config 中的设置使这种（似乎）停止发生。
*   请求 B 被发送并立即收到响应，而请求 C 被阻止直到 20 秒完成（这种情况很少见）

这是 fiddler 展示问题的时间线：（点击查看大图）

[![](https://farm4.static.flickr.com/3311/3510636841_18f9b2b0a1.jpg)](http://farm4.static.flickr.com/3311/3510636841_2a27435eec_o.png)

如您所见，请求都在服务器上得到备份。一旦 20 秒的请求完成，所有响应都会涌入，但请注意，有些请求*没有*被阻止......

所以，**问题**：

*   这到底是怎么回事？为什么它可以正常使用`NetTcpBinding`而不能使用`WSHttpBinding`？
*   为什么不一致的行为？
*   我能做些什么来修复它？

笔记：

*   它没有锁定在服务器上。我已经设置了断点并使用`!syncblk`了它，它始终报告没有锁被持有。
*   这不是我的线程（否则 NetTcpBinding 不应该工作）
*   我已经`<serviceThrottling maxConcurrentCalls="1000" maxConcurrentInstances="1000" maxConcurrentSessions="1000" />`在服务器的 app.config 中设置了
*   20 秒的调用只是在等待计时器，它不会破坏 CPU、磁盘或网络
*   我更喜欢不涉及重新构建应用程序以使用异步调用的解决方案......这是一大堆遗留代码，我真的不想弄乱我不理解的东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-07T04:35:20.633

WCF（.Net 或 Windows 事物）之外有一些限制，默认情况下只允许最多两个同时出站 HTTP 连接。不幸的是，我这辈子都不记得事物的名称（以及您在 app.config 或您的应用程序中放置的内容以覆盖它）。鉴于您没有看到请求离开客户端，并且它只是 HTTP，我认为您正在点击“那个东西”。我会继续寻找它的名字。

更新：找到了 - 在客户端上试试这个（但将“2”更改为更大的数字）：

```
<configuration>
  <system.net>
    <connectionManagement>
      <add address = "*" maxconnection = "2" />
    </connectionManagement>
  </system.net>
</configuration> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-06-30T08:08:07.777

我们在 IIS/ASP.NET 中托管的 JSON 服务看到了完全相同的症状。

根本原因最终是 ASP.NET 同步请求 - 而不是 WCF。我们必须禁用会话状态（在应用程序级别）才能获得并发 WCF 方法。

网络配置： `<system.web> <sessionState mode="Off" /> </system.web>`

请注意，我们的服务使用 webHttpBinding，而不是 wsHttpBinding。所以，我不确定这是否也解决了 Orion 的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-09-21T20:56:06.887

*[自我回答以向其他用户展示我们最终的解决方案是什么]*

最后，我从来没有设法解决这个问题。
我们最终的解决方案是将我们的应用程序从生产环境切换`WSHttpBinding`到`NetTcpBinding`生产环境——出于性能原因，我们一直计划最终这样做。

然而，这是相当不幸的，因为它留下了一个`WSHttpBinding`可能或可能不被保证的黑色标记。如果有人提出不涉及放弃的解决方案`WSHttpBinding`，我很想知道

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-06-30T08:24:54.327

我认为您达到了协议限制并且要解决它，您需要修改客户端计算机上的标准设置：

[http://support.microsoft.com/kb/183110](http://support.microsoft.com/kb/183110)

[http://support.microsoft.com/kb/282402](http://support.microsoft.com/kb/282402)

我猜 WSHttpBinding 在发出请求时使用 WinINET 设置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-08T03:35:27.400

如果改成BasicHttpBinding，能用吗？

是这样，听起来[这是你的问题](http://www.dotnetconsult.co.uk/weblog2/PermaLink,guid,af6e6325-2e30-42e3-acb9-57e1363fa51e.aspx)，会话节流，让我大吃一惊。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-01-09T06:54:14.990

考虑在每次调用服务上使用 ConcurrencyMode.Multiple 以允许并发调用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-08T03:25:47.797

我忘记了-可以订购吗？我认为 RM over http 可能会保留顺序，但 Tcp 会话可能不会（除非您明确要求）？服务合同上是否有描述有序/无序会话的属性（我忘记了）。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-01-02T07:23:30.187

不确定，但有时 silverlight 应用程序的并发调用问题与浏览器连接管理有关。对我来说，解决方案是将它放在我们的 App.xaml.cs，Application_Startup 方法中，如下所述：http: [//weblogs.asp.net/olakarlsson/simultaneously-calling-multiple-methods-on-a-wcf-service-来自银光](http://weblogs.asp.net/olakarlsson/simultaneously-calling-multiple-methods-on-a-wcf-service-from-silverlight)

```
WebRequest.RegisterPrefix("http://", WebRequestCreator.ClientHttp); 
```

# ruby-on-rails - 回形针插件不起作用

> ID：832873
> 
> 赞同：0
> 
> 时间：2009-05-07T04:23:25.717
> 
> 标签：ruby-on-rails, ruby

我正在尝试使用回形针插件让用户选择头像图片，上传然后存储它。我似乎无法让这个工作。

我已经生成了三个字段：

```
 `add_column :users, :avatar_file_name, :string
    add_column :users, :avatar_content_type, :string
    add_column :users, :avatar_file_size, :integer
    add_column :users, :avatar_updated_at, :datetime`
```

`我已将以下内容添加到我的用户模型中：`

```
``has_attached_file :avatar, 
                    :styles => { :medium => "300x300>",
                                 :thumb => "100x100>" }``
```

``并将输入字段添加到我的用户表单中：``

```
```<%= form.file_field :avatar %>```
```

``我的控制器适用于所有其他领域，除了这个，所以我认为这不是问题所在。``

 ``有任何想法吗 ？

（ps：我意识到我上传的代码缺少一个 _ 但 <code> 标签删除了它们。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-07T04:51:35.570

":multipart => true" 修复它

对不起，我犯了错误，这只是一个简单的解决方案。

# .net - SqlDataAdapter.Update 不起作用

> ID：832874
> 
> 赞同：1
> 
> 时间：2009-05-07T04:24:11.160
> 
> 标签：.net, dataadapter

我正在使用 SqlDataAdapter.Update(DataTable) 在数据库中抛出一个表，但是 SqlDataAdapter 忽略了我的 InsertCommand 来编写它自己的，它只发送主键和所有可以为空的行，如果他们想要的话。我如何让它表现出来？

我在调用 Update() 之前和之后单步执行代码。之前，它是我的 InsertCommand。之后，它是 SqlDataAdapter 的。

编辑：我不是特别想发布代码示例，因为我可以使用我拥有的行并编写我自己的 SqlCommand 对象，该对象很容易工作。我更感兴趣的是为什么 Update 会决定我传递的 InsertCommand 不够好，所以我可以去挖掘我自己的代码——这整个事情应该是一个节省时间的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T05:24:03.340

是的，经过大量挖掘后，我发现当我完成它们时我需要在我的行上调用 EndEdit，这样我所做的更改不会被 DataTable 丢弃。正如我所说，除了调用 SqlDataAdapter.Update(DataTable) 之外，我什么也没做。

# jquery - 使用 jquery 检索帧状态

> ID：832875
> 
> 赞同：1
> 
> 时间：2009-05-07T04:24:14.373
> 
> 标签：jquery

好的，所以我通过 javascript 收集下面的变量。

```
var frameState = $(this).attr('id'); 
```

我有一个选择没有垫子或一个垫子的单选框。选择一个框后，它会重新加载页面选择被选择。

```
 <tr>  
     <td>
        No Mats:  <input type="radio" name="mattes-radio" align="middle"<?php if($_GET['mattes'] == 0){ echo 'checked="checked"';} ?> id="mattes-radio-0"> 
     </td>
     </tr>  
     <tr>
     <td>
        Single Mat: <input type="radio" name="mattes-radio" <?php if($_GET['mattes'] == 1){ echo 'checked="checked"';} ?> id="mattes-radio-1"> 
     </td>
      </tr>

  $('#mattes-radio-0').click(function() {  
window.location = 'index-custom.php?mattes=0'; 
  });        

  $('#mattes-radio-1').click(function() {  
window.location = 'index-custom.php?mattes=1'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-07T04:37:11.830

如果我没有错误地理解你的问题...

这是最简单的方法

```
<input type="radio" id="mattes-radio-0" />
<script>
$("#mattes-radio-0").click(function(){
var param = $(this).attr('id').replace("mattes-radio-","");
window.location = 'index-custom.php?mattes='+param+'&framestate='+framestate;
});
</script> 
```

希望能帮助到你

# youtube - Youtube Player API - 仅播放浏览器选项卡被选中

> ID：832876
> 
> 赞同：2
> 
> 时间：2009-05-07T04:24:25.887
> 
> 标签：youtube

我目前正在使用 youtube player api 开发一个网站（确切地说是无铬）不会启动。是否有任何可能的破解或方法可以绕过它，让玩家在查看其他浏览器标签时继续播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-29T05:17:07.517

youtube 端没有限制在非活动标签中播放的代码 - 这听起来像是您的计算机或浏览器的问题。

# regex - 如何在 Perl 中找到与正则表达式匹配的子字符串的索引位置？

> ID：832878
> 
> 赞同：4
> 
> 时间：2009-05-07T04:25:36.880
> 
> 标签：regex, perl

我正在遍历一个文件，并且在每一行上我都在寻找一个正则表达式。如果找到正则表达式，我只想打印“它已找到”，然后是在该行中找到它的索引位置。

例子：

```
looking for: 'HDWFLSFKD' need index between two Ds
line: MLTSHQKKF*HDWFLSFKD*SNNYNSKQNHSIKDIFNRFNHYIYNDLGIRTIA
output: 'its found' index location: 10-17 
```

上面的“寻找”非常简单，但我计划在那里有复杂的正则表达式语句。
所以基本上只是想知道是否在字符串中找到了一个正则表达式，那么我们如何获得它的索引位置呢？

这是我到目前为止的代码：

```
foreach my $line (@file_data)
{
        if ($line=~ /HDWFLSFKD/){
            print "it's found\n"; 
            print "but at what index are the two Ds";
          }   
        else {
            $sequence.=$line;
            print "came in else\n";
        }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-07T04:41:05.877

我相信您正在寻找[`pos`](http://perldoc.perl.org/functions/pos.html)：

```
 #!/usr/bin/perl

use strict;
use warnings;

my $sequence;
while (my $line = <DATA>) {
    if ($line=~ /(HDWFLSFKD)/g){
        print "its found index location: ", 
            pos($line)-length($1), "-",  pos($line), "\n";
    } else {
        $sequence .= $line;
        print "came in else\n";
    }
}

__DATA__
MLTSHQKKF*HDWFLSFKD*SNNYNSKQNHSIKDIFNRFNHYIYNDLGIRTIA
MLTSHQKKFSNNYNSKQNHSIKDIFNRFNHYIYNDLGIRTIA
MLTSHQKKFSNNYNSK*HDWFLSFKD*QNHSIKDIFNRFNHYIYNDLGIRTIA 
```

您还可以使用[`@-`](http://perldoc.perl.org/perlvar.html#@-)和[`@+`](http://perldoc.perl.org/perlvar.html#@+)变量：

```
#!/usr/bin/perl

use strict;
use warnings;

my $sequence;
while (my $line = <DATA>) {
        if ($line=~ /HDWFLSFKD/){
                print "its found index location: $-[0]-$+[0]\n";
        } else {
                $sequence .= $line;
                print "came in else\n";
        }
}

__DATA__
MLTSHQKKF*HDWFLSFKD*SNNYNSKQNHSIKDIFNRFNHYIYNDLGIRTIA
MLTSHQKKFSNNYNSKQNHSIKDIFNRFNHYIYNDLGIRTIA
MLTSHQKKFSNNYNSK*HDWFLSFKD*QNHSIKDIFNRFNHYIYNDL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T04:34:52.927

如果数组中有多个元素，您可以使用正则表达式拆分字符串并输出第一个数组元素的大小。一个简单的示例：

```
my $test="123;456";
my @help=split(';', $test);
if ($#help>0) {
    print "Index is:".length($help[0]);
} 
```

编辑：这适合您的简单示例，但不完全适合您的文本 - 如果正则表达式变得更复杂，那么拆分标准的大小将再次变得灵活。然后你需要确定数组的第二个元素的索引来确定分割标准的大小。

# flash - 初学者 Actionscript 参考

> ID：832880
> 
> 赞同：0
> 
> 时间：2009-05-07T04:25:54.870
> 
> 标签：flash, actionscript

我八岁的儿子要求“教他用 Flash 编程”。有人可以在线参考好的 Actionscript 学习资源吗？我们拥有的 Flash 版本是“Flash MX”。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-07T04:43:26.543

看看这是否符合您的要求：

[http://www.scribd.com/doc/9409007/ADOBE-FLASH-ACTIONSCRIPT-BOOK](http://www.scribd.com/doc/9409007/ADOBE-FLASH-ACTIONSCRIPT-BOOK)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T06:43:35.800

[www.flashkit.com](http://www.flashkit.com)
[www.karupa.com](http://www.kirupa.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T14:04:28.910

您还应该查看一些来自顶级 AS 开发人员（[Brimelow](http://theflashblog.com)、[Skinner](http://www.gskinner.com/blog/)、[Moock](http://www.moock.org/)）的东西，尽管现在大部分材料都集中在 AS3（Flash 9/10）上。

您可能还想升级到 Flash MX2004，因为那是 AS2 被引入的时候。它是一种更好的编程语言版本，如果跳转到 AS3，它就不会像从 AS1 那样难。

至于涵盖 ActionScript 的书籍，请查看 Colin Moock 的 Essential Actionscript。它将涵盖您需要的几乎所有内容。

# html - 对于 Internet Explorer 中的完整多功能性，表单选择的替代方案是什么？

> ID：832897
> 
> 赞同：0
> 
> 时间：2009-05-07T04:34:49.607
> 
> 标签：html, css, internet-explorer, html-select

我知道 Internet Explorer 一直`<select>`无法使用不一致或不存在的字体大小、颜色、边框、背景颜色等来设置 html 样式，那么有哪些替代方法可以创建您自己的跨浏览器兼容的灵活字段？

需要任何 JavaScript 框架（如 jQuery 等）都很好。我认为一个简单的 CSS 菜单几乎可以作为替代方案，选择的“菜单项”被添加到隐藏字段......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T04:49:07.107

为什么用键盘导航替换功能完善的本机选择框，以及自制骇人听闻的解决方案的所有好东西，这将使关闭 Javascript 或屏幕阅读器的用户无法访问您的网站？如果 99.9% 的网站能够设法让他们的选择框融入其中，那么你真的应该把它吸起来并尽可能多地设计它。

但是，您可以查看这个以不同方式增强选择框的[jQuery 插件。](http://www.headcircus.com/uiguy/selectboxfactory/selectboxfactory.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T04:41:47.297

我想下拉菜单可以很容易地使用隐藏字段作为数据持有者。看不到任何潜在的问题......好吧，除非 JavaScript 被关闭。

# .net - Web 设置项目 - 获取当前机器名称

> ID：832906
> 
> 赞同：3
> 
> 时间：2009-05-07T04:37:14.857
> 
> 标签：.net, setup-project

我有一个 Web 设置项目，其中有一个自定义屏幕，要求输入机器名称。反正有没有用当前机器名称预填充这个字段？

对于我需要它来仅包含“Localhost”的情况不符合我的要求。

“Environment.MachineName”将在代码块中返回机器名称，如果我在自定义操作中需要它会很好。但似乎自定义操作在您完成安装向导之后才会执行......所以我实际上无法使用它。无论如何，让我知道你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T20:27:58.157

从我有限的研究来看，简单的 Web 设置项目似乎不足以让你做你想做的事。我会建议以下任何一项，具体取决于这对您的项目有多重要：

*   只需使用默认的 LOCALHOST
*   保留默认空白并使用对话框文本告诉用户如何检索机器名称
*   不要询问用户，稍后使用可以访问环境变量的安装后 exe/脚本进行设置
*   使用不同的（阅读：更强大的）安装程序

我当然会建议最后一个，但如果您真的不需要那么糟糕的这个功能，请选择在您的情况下可以接受的其他选项之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T04:39:00.423

我不确定您是否可以在 Web 设置项目运行时访问代码。如果是这样，您可以尝试静态“ `Environment.MachineName`”属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T04:40:43.087

System.Environment.MachineName

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T05:09:35.060

您可以访问环境变量吗？你可以评价一下`%COMPUTERNAME%`。

# iphone - 获取没有文本字段/视图的键盘输入

> ID：832908
> 
> 赞同：6
> 
> 时间：2009-05-07T04:39:50.687
> 
> 标签：iphone, objective-c

我正在制作一个 iPhone 应用程序，它有我自己的自定义文本视图，可以显示多格式文本，我需要以某种方式与键盘交互。现在我正在使用隐藏的 UITextField 和委托方法`textField:shouldChangeCharactersInRange:replacementString:`来获取键入的字符。然而，这感觉很笨拙，我想知道是否可以在不使用 UITextField 或 UITextView 的情况下显示键盘并获得每次按键的通知？

谢谢，

凯尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T02:16:48.797

[UIKeyInput 协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKeyInput_Protocol/Reference/Reference.html)的文档说明如下：

> UIResponder 的一个子类可以采用该协议来实现简单的文本输入。当此子类的实例是第一响应者时，将显示系统键盘。
> 
> 只有一小部分可用键盘和语言可用于采用此协议的类。

因此，这可能比隐藏的文本字段/视图更好地满足您的需求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-07T06:06:29.370

在公共 API 中，您能做的最好的就是您所描述的。不幸的是，两者都是私人的`UIKeyboard`。`UIKeyboardImpl`

# vmware - 创建后将逻辑 CPU 分配给 VM 是否安全

> ID：832914
> 
> 赞同：0
> 
> 时间：2009-05-07T04:41:42.460
> 
> 标签：vmware, cpu, centos, esxi

我们将在 VMWare ESXi 上运行 Centos 5.2 的虚拟机上提供我们的门户软件。

我们最初将分配两个逻辑 CPU，但我们可能希望在将来的某个时间再添加两个。我们此时不想分配所有资源，因为一些 VM 正在争夺服务器上的空间。

如果我们决定稍后将我们的 VM 移到单独的服务器上并分配额外的逻辑 CPU 使其达到四个，这会给我们带来什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-04T21:46:56.137

是的，你可以这样做。您可以更改 CPU 的数量，就像您可以更改 VM 看到的 RAM 数量一样。您应该关闭 VM，然后更改 CPU 数量，然后打开 VM。客户操作系统能否顺利处理更改取决于该操作系统，像 Centos 5.x 这样的新功能应该可以做到。

如果您使用的是 SMP VM，您应该阅读： http: [//communities.vmware.com/docs/DOC-4960](http://communities.vmware.com/docs/DOC-4960)了解更多信息。通常，单个 VM 的虚拟 CPU 数量不应与您的主机拥有的 CPU 内核数量一样多。

# c# - C# MySQL 参数化查询问题

> ID：832916
> 
> 赞同：1
> 
> 时间：2009-05-07T04:42:11.040
> 
> 标签：c#, mysql

我有以下用于从数据库中填充 DAO 的方法。它执行 3 次读取 - 一次用于主要对象，2 次用于某些翻译。

```
public bool read(string id, MySqlConnection c)
{
    MySqlCommand m = new MySqlCommand(readCommand);
    m.Parameters.Add(new MySqlParameter("@param1", id));
    m.Connection = c;
    MySqlDataReader r = m.ExecuteReader();
    r.Read();
    accountID = Convert.ToInt32(r.GetValue(0).ToString());
    ...
    comment = r.GetValue(8).ToString();
    r.Close();
    m = new MySqlCommand(getAccountName);
    m.Parameters.Add(new MySqlParameter("@param1", accountID));
    m.Connection = c;
    r = m.ExecuteReader();
    r.Read();
    account1Name = r.GetValue(0).ToString();
    r.Close();
    m = new MySqlCommand(getAccountName);
    m.Parameters.Add(new MySqlParameter("@param1", secondAccountID));
    m.Connection = c;
    r = m.ExecuteReader();
    r.Read();
    account2Name = r.GetValue(0).ToString();
    r.Close();
    return true;
} 
```

在线`account2Name = r.GetValue(0).ToString();`我收到以下错误：

```
Invalid attempt to access a field before calling Read() 
```

我不明白问题出在哪里 - 上一行调用 read！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T04:46:50.217

这似乎在您的代码中较早地起作用。您确定那里有要读取的值（即您的查询是返回 0 行还是 null 或其他无法转换为字符串的内容？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T04:55:25.780

1.  看起来该程序在线上运行良好`account1Name = r.GetValue(0).ToString();`。也许您想先检查 的返回值，`r.Read()`看看是否有任何行。该错误可以解释为“尝试访问没有数据的字段”...
2.  看起来您正试图从查询中获取单个值。您可能想研究`ExecuteScalar()`方法而不是`ExecuteReader()`.

# vb.net - 使用委托处理事件

> ID：832921
> 
> 赞同：4
> 
> 时间：2009-05-07T04:44:03.483
> 
> 标签：vb.net, events, delegates

抱歉，这是我能想到的最好的主题，如果我更好地理解解决方案，我可能会写出更好的主题行。

我正在使用一个很棒的网格控件，超级列表，我位于这里：

[http://www.codeproject.com/KB/list/outlooklistcontrol.aspx?fid=449232&df=90&mpp=25&noise=3&sort=Position&view=Quick&fr=276](http://www.codeproject.com/KB/list/outlooklistcontrol.aspx?fid=449232&df=90&mpp=25&noise=3&sort=Position&view=Quick&fr=276)

在阅读问题之前，请注意您可以下载一个非常小的 VB.NET 2005 示例应用程序来演示该问题：

[http://dokmanovich.com/Documents/SuperListEvents.zip](http://dokmanovich.com/Documents/SuperListEvents.zip)

我希望，得到我的问题的答案将帮助我在我想要完成的事情的背景下更好地理解动态事件。

网格的工作原理如下：当您向网格添加列时，您指定将在运行时返回值的事件处理程序的地址。在这种情况下，CC_ItemValueAccessor 函数。后一个函数将使用输入参数调用，在这种情况下，输入参数是“ToDo”对象。每个 ToDo 对象将在网格中呈现为一行。CC_ItemValueAccessor 函数的工作是为传入的 ToDo 对象对应的行返回要由网格显示的列值。

这工作正常，直到我将其带到下一步：

我想在运行时*动态创建列。*例如，我想显示作为执行用户指定 SQL 的结果返回的数据表的输出。

使用前面描述的静态方法，我有一个 columnItemValueAccessor 函数负责为传入的行对象返回网格中每一列的值。现在，由于列是在运行时根据 SQL 返回的结果确定的，我相信我需要编写一个通用处理程序来处理所有列，确定触发此事件的列的名称，然后返回该列的值作为唯一参数传入的行对象。

问题是 ItemValueAccessor 函数的签名只包含行对象，我不知道确定需要哪个列名的方法，因为所有列都连接到与事件处理程序相同的 ItemValueAccessor 函数。

我怀疑这只是控件的限制，为了克服这个问题，我必须增强底层的自定义控件，但这可能超出了我目前的技能，因为它是用 C# 编写的高级控件，而且我是一个 VB 人.

这是代码：

```
Private Sub AddCcColumn()
    Dim NewColumn As New BinaryComponents.SuperList.Column("CC", "CC", 110, AddressOf Cc_ItemValueAccessor)
    _SuperList.Columns.Add(NewColumn)
End Sub

Private Function Cc_ItemValueAccessor(ByVal rowItem As Object) As Object
    Dim ToDo As ToDo = CType(rowItem, SrToDoAndException).ToDo
    Return ToDo.CCs.ToString
End Function 
```

'---------------

这里是 Column 的实例化方法的签名和最后一个参数的定义，该参数负责指定处理标识负责返回列值的事件处理程序的过程。

Public Sub New(ByVal name As String, ByVal caption As String, ByVal width As Integer, ByVal columnItemValueAccessor As BinaryComponents.SuperList.ColumnItemValueAccessor) BinaryComponents.SuperList.Column 的成员

Public Sub New(ByVal object As Object, ByVal method As System.IntPtr) BinaryComponents.SuperList.ColumnItemValueAccessor 的成员

* * *

有没有人有任何建议或者我被卡住了？我真的很想利用这个控件的神奇分组功能，这样我就可以显示动态输出，允许用户按他们想要的任何列对 SQL 的动态输出进行分组。

我在上述网站上向作者提出了这个问题，但没有得到答复。这是寻找解决方法的绝望尝试。

谢谢你陪我。我希望这个问题不会因为我指的是第三方控制而被拒绝。我希望答案在于更好地理解代表，这是一个更普遍的话题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-16T09:55:55.190

正如马修建议的那样，我使用了 lambda 函数。这是动态方法的代码：

```
Private Sub btnDynamic_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnDynamic.Click

    ListControl1.Columns.Clear()

    For Each DataCol As DataColumn In _ds.dtbPerson.Columns
        ' Get the column name in a loop variable - it needs to be in loop scope or this won\'t work properly'
        Dim colName = DataCol.ColumnName
        ' Create the function that will be called by the grid'
        Dim colLambda As ColumnItemValueAccessor = Function(rowItem As Object) General_ItemValueAccessor(rowItem, colName)
        ' Setup each column in the grid'
        Dim NewColumn As New BinaryComponents.SuperList.Column(DataCol.ColumnName, DataCol.ColumnName, 220, colLambda)
        ListControl1.Columns.Add(NewColumn)
    Next

End Sub

Private Function General_ItemValueAccessor(ByVal rowItem As Object, ByVal colName As Object) As Object
    Dim rowPerson As DataRow = CType(rowItem, DataRow)
    Return rowPerson.Item(colName).ToString
End Function 
```

这是有关其工作原理的快速入门：

每次通过循环，lambda 函数都会为每一列创建一个新的回调函数，如下所示：

```
Class Func1
    Dim colName1 As String = "PersonId"

    Private Function General_ItemValueAccessor1(ByVal rowItem As Object) As Object
        Dim rowPerson As DataRow = CType(rowItem, DataRow)
        Return rowPerson.Item(Me.colName1).ToString
    End Function
End Class

Class Func2
    Dim colName2 As String = "LastName"

    Private Function General_ItemValueAccessor2(ByVal rowItem As Object) As Object
        Dim rowPerson As DataRow = CType(rowItem, DataRow)
        Return rowPerson.Item(Me.colName2).ToString
    End Function
End Class

... for however many columns you have - 3 in this case. 
```

您需要循环中的 colName 变量，而不是直接在 lambda 中使用 DataCol.ColumnName。否则，当网格开始调用回调函数时，该 DataCol 变量将等于所有回调函数的集合（或 Nothing）中的最后一个值。

基本上，它会做到这一点，你不会得到你所期望的：

```
Class Func
    Dim DataCol1 = DataCol

    Private Function General_ItemValueAccessor1(ByVal rowItem As Object) As Object
        Dim rowPerson As DataRow = CType(rowItem, DataRow)
        Return rowPerson.Item(Me.DataCol1.ColumnName).ToString
    End Function

    Private Function General_ItemValueAccessor2(ByVal rowItem As Object) As Object
        Dim rowPerson As DataRow = CType(rowItem, DataRow)
        Return rowPerson.Item(Me.DataCol1.ColumnName).ToString
    End Function
    ...

End Class 
```

希望有帮助。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T05:15:44.873

> 问题是 ItemValueAccessor 函数的签名只包含行对象，我不知道确定需要哪个列名的方法，因为所有列都连接到与事件处理程序相同的 ItemValueAccessor 函数。

好吧，我过去没用过那个控件，而且我真的是一个 C# 人。但我认为您可以通过为每列创建一个新的[lambda 函数来实现这一点。](http://blogs.msdn.com/wriju/archive/2008/02/05/vb-net-9-0-lambda-expression.aspx)就像是：

```
Private Sub AddCcColumn(ByVal sender As System.Object As System.String)
    colLambda = (Function(rowItem As Object) Cc_InternalItemValueAccessor(columnName, rowItem))
    Dim NewColumn As New BinaryComponents.SuperList.Column("CC", "CC", 110, colLambda)
    _SuperList.Columns.Add(NewColumn)
End Sub 
```

然后， colLambda 将适合签名，而您的内部 Cc_InternalItemValueAccessor 会获取它需要的信息。完全未经测试，但我认为基本想法有效。

# colors - 12 位 RGB 颜色格式的组织是怎样的？

> ID：832932
> 
> 赞同：4
> 
> 时间：2009-05-07T04:51:50.500
> 
> 标签：colors, rgb, packing, palette

我知道 12 位 RGB 调色板格式，每种颜色 R、G、B 有 4 位。但是原始数据的结构如何？

1.) 每种颜色是否都有一个与之对应的字节，该字节又具有 4 个填充位和 4 个用于颜色数据的数据位

或者

2.) 它是一种打包格式，即 Byte-1= (padding bits + 4-Rbits) Byte-2 = (4-Gbits+4Bits)

包装是怎么做的？

谢谢你。

-广告

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T05:13:04.473

在哪里？

在内存中，它可以是任何东西——很可能它可以保存在一个 3 字符数组或结构中......

在磁盘中，由于空间非常重要，它可能会以更紧凑的格式保存：3 个字节代表两个相邻像素：[RG][BR][GB]，并在写入/读取时打包/解包。

不过，这一切都取决于您的格式/平台的规格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T09:37:10.907

> 我知道 12 位 RGB 调色板格式，每种颜色 R、G、B 有 4 位。

你确定这是[调色板格式](http://en.wikipedia.org/wiki/Palette_(computing))吗？

通常，调色板格式由两个不同的部分组成：调色板本身和图像。调色板是颜色值的查找表，其格式是特定于实现的。然后图像是托盘的索引值列表。

调色板格式通常用于节省内存，或者有时用于制作霓虹灯风格的动画（如 Windows95 加载屏幕底部有一条蓝色条：图像被写入屏幕一次，然后调色板中的一些颜色被每隔几毫秒旋转一次）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T15:12:51.550

在 Amiga 上，系统非常简单：

# $0fff = 白色...十进制，即 0（未使用）、15（最大红色）、15（最大绿色）、15（最大蓝色）。

# $0a04 = 带有一丝蓝色的红色意味着它是红紫色，混合了强度为 10 的红色和强度为 4 的蓝色，而根本不添加绿色。

RGB 都是 8 位数字，$FFF = 4095（+ 黑色）每种颜色都是 4 位。三乘以 4 位 = 12 位，因此 12 位颜色范围。

[使用 12 位 RGB 链接到 Wiki 列表系统上的 12 位 RGB](http://en.wikipedia.org/wiki/List_of_monochrome_and_RGB_palettes#12-bit_RGB)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-09-04T23:43:12.607

在 CD+G 上，每个 12 位调色板条目使用两个连续字节的 6 个 lsb 存储；没有浪费空间，因为高两位用于存储时序信息。我认为 Amiga 只是在一个 16 位字中使用了四个 nybbles 中的三个。我不确定您可能会想到哪些其他格式。

# c# - 在哪里可以找到当前的 Adob e 图像格式规范？“剪切路径”

> ID：832935
> 
> 赞同：3
> 
> 时间：2009-05-07T04:54:24.177
> 
> 标签：c#, gdi+, path, irb, clipping

这是关于 Adob​​e 的图像资源块 ( **IRB** )，它们以 TIFF、PSD、JPEG 格式存储。它也被称为“ **8BIM** ”，这个标准是随 Adob​​e 的 Photoshop 3（1994 年 11 月）发布的。

IRB 包含有关颜色配置文件和剪切路径的信息（我感兴趣的内容）。

我可以在 Internet 上找到的唯一文档是 Adob​​e 在 1990 年提供的[这份 4 页文档。](http://www.adobe.com/devnet/photoshop/psir/ps_image_resources.pdf)

我一直在搜索*imagemagick*源代码，发现用于剪切路径的 IRB ID 是从 2000 到 2998，这是一个可用的 998 个剪切路径。

因此，我设法从 JPEG 和 TIFF 文件中获取每个资源块的 IRB 字节数组，在四页文档中指定。我推出了自己的产品并测试了[Graphics Mill](http://www.aurigma.com/Products/GraphicsMilldotNET/default.aspx)，看看是否设法获得了相同的信息。

我不确定如何将剪切路径字节数组转换为任何可用的东西，因为我什至不知道 adobe photoshop 使用的格式。想法是将剪切路径映射到 ac# GDI+ 图形路径。

我认为 adobe 多年来一直是图形设计的行业领导者，但他们甚至无法提供必要的文档，这有点可悲。

**任何人都可以建议我可以使用的任何文档吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-01-15T11:27:55.330

几乎它对你来说仍然是实际的，但可以在这里找到一些信息 [http://www.adobe.com/devnet-apps/photoshop/fileformatashtml/PhotoshopFileFormats.htm](http://www.adobe.com/devnet-apps/photoshop/fileformatashtml/PhotoshopFileFormats.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T05:06:06.647

+1 到米斯蒂卡

Adobe 规范包含 PSD 剪辑路径的描述。最后一次修订的日期是 2013 年 10 月，看起来 Adob​​e 目前正在处理它。至少我觉得添加了新的东西。

如果您正在寻找使用 PSD 格式的代码，请查看[libpsd](https://github.com/alco/psdump/tree/master/libpsd-0.9)。这是一个很好的开源，很容易阅读。有时该规范会提供更多信息。

至于[GraphicsMill](http://www.graphicsmill.com/)，从 6x 版本[开始，它可以将](http://www.graphicsmill.com/docs/gm/M_Aurigma_GraphicsMill_Codecs_ClippingPath_Path_CreateGraphicsPath_2_22dcb54d.htm)Adob​​e Clipping Path 转换为 GdiPlus GraphicsPath。

# cruisecontrol.net - 无法获取

> ID：832938
> 
> 赞同：0
> 
> 时间：2009-05-07T04:55:31.757
> 
> 标签：cruisecontrol.net, clearcase

我有一个 ccnet.config 文件，显示在初始部分下方。我安装了一个清晰的案例。现在，由于我的 ccnet 检查修改并且当它发现一些修改时，它应该获取该源代码，但那没有发生。

我应该如何将这些源代码获取到我的本地机器。ThreePartition 是应该获取的相关构建。我猜我下面的代码只是检查我的vob对象中的修改？我应该添加更多标签，以便ccnet从透明案例中获取最新的源代码。？

```
 <project name="VSAT"> 

            <sourcecontrol type="clearCase"> 
                       <viewPath>W:\Test_Project\Installation\VSAT\ThreePartition</viewPath> 
                <branch>main</branch> 
                <autoGetSource>false</autoGetSource> 
                <useLabel>false</useLabel> 
                <useBaseline>false</useBaseline> 
                <projectVobName>Test_Project</projectVobName> 
                <viewName>MYView_view_test</viewName> 
                <executable>C:\atria\ClearCase\bin\cleartool.exe</executable> 
                <timeout>600000</timeout> 
            </sourcecontrol> 
```

谢谢麦迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T05:02:17.853

你可以试试`<autoGetSource>true</autoGetSource>`。

# iphone - 以编程方式锁定和解锁 iPhone 屏幕

> ID：832940
> 
> 赞同：14
> 
> 时间：2009-05-07T04:57:35.057
> 
> 标签：iphone

如何以编程方式锁定和解锁 iPhone 的主屏幕（即设备本身）？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-07T06:53:42.703

这是不可能的。但是，您可以在应用程序运行时“防止”手机锁定。`[UIApplication sharedApplication].idleTimerDisabled = YES`应该这样做。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2010-12-03T18:53:51.793

可以通过调用 GSEventLockDevice(); 从您的应用程序。这个函数可以在 GraphicsServices.framework 中找到。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-08T07:04:26.167

这已经解决了。你可以在 Github 上找到它：[https](https://github.com/neuroo/LockMeNow) ://github.com/neuroo/LockMeNow （在 IOS 7 以下工作）

```
char*framework="/System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices";
                void *handle= dlopen(framework, RTLD_NOW);
                if (handle)
                {

                  void (*GSEventLockDevice)() = dlsym(handle, "GSEventLockDevice");

                    if (GSEventLockDevice)
                    {

                        GSEventLockDevice();
                        NSLog(@"Phone is Locked");
                       //.........

                    }
                    dlclose(handle);

                } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-11-09T09:50:28.827

未记录的 Apple 功能（可能是 GSEventLockDevice() ？）可能是可能的，但它肯定会导致 App Store 自动拒绝。

苹果根本不希望任何人摆弄这样的核心功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T06:25:25.403

如果你想这样做，苹果永远不会批准这个，你的应用程序必须越狱。您可以通过在项目上调用 Private 框架来做到这一点。你可以使用`GraphicsServices.framework`.

**笔记 ：**

这`GraphicsServices.framework`是一个私有框架。Apple 永远不会接受您的应用程序。通过调用`GSEventLockDevice()`方法，您可以轻松锁定或解锁您的设备。这`GSEventLockDevice()`驻留在`GSEvent.h`.

我希望这个对你有帮助。

如果您仍然遇到任何问题，请告诉我

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T06:51:24.223

我不相信有办法实现这一目标。

我认为可能的一件事是阻止 iPhone 锁定。然后，您可以构建一个复制锁定解锁功能的视图，并且您仍然可以控制手机。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-05-05T16:58:08.577

这基本上是不可能的，因为这可能是只能由 Apple 使用的私有框架的一部分。有些应用程序，例如使用“假”锁屏的假来电者应用程序，但正如您所指出的，按下主页按钮会退出应用程序，使您的锁屏无用。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-03-26T14:29:30.153

描述锁定和解锁。我会尝试为视图属性启用 = YES 和启用 = NO 的开关。所以基本上你可以禁用所有`UIGestureRecognizers`并“锁定”屏幕，如果这是你的意思。`UIbuttons`一旦我将它们添加为`IBOutlet`as 和，我就会这样做`IBAction`，因此它们是一个对象并且可以在属性级别进行修改。我现在正在做这件事。我将发布我的发现。

# .net - C#中的跟踪

> ID：832945
> 
> 赞同：0
> 
> 时间：2009-05-07T05:00:32.663
> 
> 标签：.net, trace

完全重复：
[如何向 C# 中的每个方法调用添加 Trace()？](https://stackoverflow.com/questions/559148/how-can-i-add-a-trace-to-every-method-call-in-c)

* * *

嗨，我喜欢在我的 c# 代码中进行跟踪。我不喜欢在每种方法中添加语句来做到这一点。当应用程序中的其余方法在运行时被调用时，有什么方法可以使用方法进行跟踪。

谢谢，P.Gopalakrishnan。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-07T05:18:04.510

如果您使用 VS 2005（可能是 2008，也可能是 2003），您可以添加一个跟踪点，类似于添加断点的方式。然后，您可以定义当该方法/代码行被命中时您想要的输出。它只会在 VS 中运行时输出这些跟踪，但它可能是一个很好的开始方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T05:44:22.590

如果您可以使用它，Visual Studio 中的 Profiler 将跟踪您的方法调用并提供调用树等。

# c# - 从列表框中选择一个项目

> ID：832947
> 
> 赞同：0
> 
> 时间：2009-05-07T05:01:51.007
> 
> 标签：c#, listbox

我在一个特定的网站上读到代码：

```
 txtBox = lstBox.ItemData(lstBox.ListIndex()) 
```

将为我提供在列表框中单击的项目，其中 ListIndex 为我提供行，ItemData 为我提供行中的数据。但是在尝试实现它时，我注意到我的列表框没有这样的选项。是否必须将任何内容添加到代码中才能使用这些选项？我正在使用 c# 语言进行编程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T05:28:06.450

我想你有一些 vb6 代码，你试图用 .net 语言实现......来自 .net 帮助：

> 在 Visual Basic 6.0 中，可以在设计时在“属性”窗口中设置 ComboBox 控件的 ItemData 属性，以将 Integer 与 ComboBox 项相关联。
> 
> 在 Visual Basic 2008 中，ItemData 属性不再存在。Microsoft.VisualBasic.Compatibility 库包含一个 SetItemData 函数，可用于将 Integer 与项目相关联；GetItemData 函数可用于检索项目。

最好的问候，唐

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T06:09:25.603

使用[ListBox.SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selecteditem.aspx)。请注意，这将返回一个对象，因此您必须将其转换回您需要的类型。例如：

```
var selectedItem = (int)myListBox.SelectedItem; 
```

# database - 使用通用数据库进行协作开发

> ID：832956
> 
> 赞同：3
> 
> 时间：2009-05-07T05:04:56.740
> 
> 标签：database, collaboration

我项目中的一些人似乎认为使用一个公共的开发数据库让每个人都连接到它是最好的事情。我认为并非如此，每个拥有自己的数据库（具有定期更新的数据转储）的开发人员都是最好的。我是对还是错？您在这些方法中遇到过任何问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-07T07:25:27.993

磁盘空间和 CPU 应该足够便宜，**每个开发人员都可以运行自己的数据库实例**，并在版本控制下自动构建。这是为了让开发人员能够大胆地对数据库进行黑客攻击，与任何其他开发人员的并发黑客行为隔离开来。

当然，需要注意的是，他们对私有实例所做的任何更改对其他人都是无用的，*除非*它可以在构建过程中自动应用。所以需要有一个坚定的政策，应用程序代码不能依赖于任何数据库状态，除非该状态由对**[DDL](http://en.wikipedia.org/wiki/Data_Definition_Language)****的版本控制、单元测试的更改表示**。

有关将数据库定义视为项目代码的另一部分以及协调更改和重构的理论和实践的优秀指南，请参阅Scott W. Ambler 和 Pramod Sadalage 的[Refactoring Databases: Evolutionary Database Design](http://databaserefactoring.com/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-07T05:10:30.953

我喜欢拥有自己的数据库副本用于开发，因为它使您可以灵活地快速更改事物，而不必担心它会如何影响其他人。

但是，如果所有开发人员都在破解他们自己的数据库副本，那么最终将每个人的工作合并在一起变得越来越困难。

我认为您可以通过让开发人员在日常开发过程中处理本地副本来获得两全其美的效果，但是每个开发人员都应该定期将他们的工作合并到一个通用副本中。编写大量单元测试也有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T05:09:40.550

我们在所有开发人员（20 多名）中共享一个数据库，但我们对其进行了结构化，以便每个人都有自己的表。

如果您正确构建应用程序，则不需要每个开发*人员*单独的数据库。它应该可以配置它使用的数据库或表前缀，以便您可以轻松地在实例之间移动它（单元测试、系统测试、验收测试、生产、灾难恢复等）。

使用单个数据库的优点是可以摊销维护成本。您不会让您的 DBA 尝试处理大量数据库（或者，如果您是一家小型数据库商店，则不会让每个开发人员在更好地用于开发时都尝试维护他们自己的数据库）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T05:09:56.760

单点故障不是一件好事，不是吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-07T05:11:51.780

我更喜欢单一的共享数据库。但这在很大程度上取决于情况和正在开发的应用程序。

对我有用的东西可能对你不起作用。跟着你的直觉走。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T05:20:27.967

如果您正在使用 Hibernate 或任何基于 hibernate 的平台，您可以将数据库配置为在启动服务器时创建（create-drop 选项）。当您向类添加新属性时，这非常有用。如果是这种情况，每个开发人员都必须拥有自己的数据库副本。

如果您根本不更改数据库结构，那么您可以使用单个共享数据库。在这第二种情况下不是必须的。我更喜欢拥有自己的数据库，在那里我可以做任何我想做的事情。另一方面请记住，某些查询可能会花费大量时间，如果您共享数据库，这将影响您的整个团队。

# ruby-on-rails - Ruby 的 REST 客户端提供 ActionController::InvalidAuthenticityToken

> ID：832958
> 
> 赞同：4
> 
> 时间：2009-05-07T05:05:56.783
> 
> 标签：ruby-on-rails, ruby, rest

我有一个带有名为“Foo”的资源的 RESTful Rails 应用程序。我正在尝试使用[REST Client](http://rest-client.heroku.com/rdoc/)进行放置：

```
resource = RestClient::Resource.new 'http://localhost:3000/foos/1', :user => 'me', :password => 'secret'
resource.put :name => 'somethingwitty', :content_type => 'application/xml' 
```

但我的应用提出了：

```
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
/usr/lib/ruby/gems/1.8/gems/actionpack-2.2.2/lib/action_controller/request_forgery_protection.rb:86:in `verify_authenticity_token' 
```

似乎我的应用程序没有收到这是一个 XML 请求并且应该忽略 AuthenticityToken 的消息。也许我没有正确使用 REST 客户端。关于为什么我得到例外的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T05:33:16.627

尝试在应用程序控制器的protect_from_forgery 行上放置一个:only => [:update, :delete, :create]。

更多信息：[http ://ryandaigle.com/articles/2007/9/24/what-s-new-in-edge-rails-better-cross-site-request-forging-prevention](http://ryandaigle.com/articles/2007/9/24/what-s-new-in-edge-rails-better-cross-site-request-forging-prevention)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-07-25T00:43:48.783

使用类似的东西：

```
resource.put '<foo><name>somethingwitty</name></foo>', :content_type => 'application/xml' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T10:02:16.280

我认为您需要进行两项更改；

(a) 使用 rails 路由将其标记为 XML 请求 (b) 使用 HTTP 基本身份验证来验证请求。

这意味着将上面的 URL 更改为包含用户名、密码，如下所示

我：secret@localhost:3000/foos/1.xml

还要注意 .xml 位

我猜想在您的服务器端某处您有通过前置过滤器对入站请求进行身份验证的代码。这需要像这样工作......

```
#
#  If you haven't authenticated already then you are either
#  reqirected to the logon screen (for HTML formats) or 
#  the browser prompts you. You are always allowed to pass 
#  the username/password in the URL
#
def login_required
    @current_user = valid_session?

    unless @current_user
        if params["format"]
            #
            #   If you specify a format you must authenticate now
            # 
            do_basic_authentication
        else
            display_logon_screen
        end
    end
end

#
#   Ask Rails for the login and password then authenticate as if this
#   were a new login.
#
def do_basic_authentication
    user = authenticate_with_http_basic do |login, password|
        User.authenticate(login, password)
    end

    if user
        current_user(@current_user = user)
    else
        request_http_basic_authentication
    end
end 
```

这来自我们自己的应用程序，由 ApplicationController 中的 before_filter 触发。

另外，我认为您不需要：content_type => 'application/xml'。我通常做的只是调用 post 或像这样直接放置..

response = RestClient.post URI.encode(url), :record => args

其中 url 包含基本身份验证和“.xml”

快乐编码

克里斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-12-20T19:45:27.767

由于您的应用程序是 Rails 应用程序，因此将 ActiveResource 用于客户端可能更容易。

就像是：

```
require 'active_resource'

class Foo < ActiveResource::Base
  self.site = 'http://localhost:3000/'
end

foo = Foo.new(:name => 'somethingwitty')
foo.save 
```

[您可以在 rdoc站点](http://api.rubyonrails.org/classes/ActiveResource/Base.html)上阅读如何进行身份验证。

# algorithm - 线交点

> ID：832959
> 
> 赞同：3
> 
> 时间：2009-05-07T05:06:51.587
> 
> 标签：algorithm, math, geometry, intersection

如何查找一条线是否在多边形中截取

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-08T04:48:41.250

这个问题有点模棱两可，但我们还是试试吧：

假设线上的点 (x,y) 由方程 Ax + By + C = 0 定义。那么我们显然可以通过计算 Ax + By + C 来确定点 (x,y) 是否在线上。如果该点不在线上，那么 Ax + By + C 的符号告诉我们该点位于线的哪一侧。因此，通过检查多边形的每个顶点 (x,y) 的表达式 Ax + By + C 的符号，我们可以确定多边形的所有点是否在直线的同一侧。

（一个稍微不同的问题是确定多边形是否与线段相交。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-21T11:12:09.707

您可以从某些网页中找到的此实现中阅读合理的答案

```
Point  * intersection2(Point * _line1, Point * _line2) {

Point  p1,p2,p3,p4;
p1=_line1[0]; p3=_line2[0];
p2=_line1[1]; p4=_line2[1];

// Store the values for fast access and easy
// equations-to-code conversion
double x1 = p1.x, x2 = p2.x, x3 = p3.x, x4 = p4.x;
double y1 = p1.y, y2 = p2.y, y3 = p3.y, y4 = p4.y;

double A1 = y2-y1;
double B1 = x1-x2;
double C1 = (A1*x1)+(B1*y1);

double A2 = y4-y3;
double B2 = x3-x4;
double C2 = A2*x3+B2*y3;

double det = A1*B2 - A2*B1;

if (det==0){
    return NULL;
}else{
    // Return the point of intersection
    Point  * ret = new CvPoint2D64f ();
    ret->x = (B2*C1 - B1*C2)/det;
    ret->y = (A1*C2 - A2*C1)/det;
    return ret;

} 
```

}

参考。C++ 示例：几何概念线交点及其应用，2D 绘图，来自站点 ucancode 的 lbackstrom

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T05:17:45.603

您需要坐标图上的多边形点以及直线的斜率和 x 和 y 截距才能找到该信息。从那里开始就是简单的数学。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-08T05:15:42.120

根据您到底想要什么（我将假设一个线段，因为我本周刚刚编写了该代码），您可以分两部分获得它：

首先，我建议将行编码为

```
a*X + b*Y - c = 0 
```

因为该表格没有像`X=5`,`Y=4`或. 这样的行的极端情况`X=3*Y`。

*   测试线是否与多边形的任何一侧相交
    *   测试两条线的末端是否在另一条线的相对两侧。建议的表格只需检查 LHS 的极性即可轻松完成
*   测试线上的点是否在多边形内
    *   测试从输入线上的某个点到多边形外部的线是否在奇数点处穿过多边形。请注意，您将需要检查从多个位置显示的相同点，并且由于 FP 错误，这不能通过精确匹配测试来完成。

# c - 何时使用限制，何时不使用

> ID：832964
> 
> 赞同：26
> 
> 时间：2009-05-07T05:09:06.107
> 
> 标签：c, pointers, c99, restrict-qualifier

我对此有一个大致的了解，`restrict`但我希望能澄清一些要点。我有一个函数，它从一个缓冲区读取一个以空字符结尾的字符串，并在另一个缓冲区中写出一个 URL 编码版本。该函数有这个签名（目前没有`restrict`）：

```
char const *StringUrlEncode(char const *unencoded, 
                            char *encoded,
                            char *encodedEnd); 
```

`unencoded`是我的以 null 结尾的源字符串。目标缓冲区由`encoded`and表示`encodedEnd`，其中`encoded`指向缓冲区中的第一个字符`char`并`encodedEnd`指向缓冲区*之后*的第一个字符，即该函数将`char`s 写入但*不包括*指向的位置`encodedEnd`- 这是您的基本`begin`/`end`迭代器如果您熟悉 C++ STL 约定，请配对。

如果我添加`restrict`到这个函数，它应该只应用于前两个参数：

```
char const *StringUrlEncode(char const *restrict unencoded, 
                            char *restrict encoded,
                            char *encodedEnd); 
```

或者将它添加到所有三个参数中是否有一些我不理解的好处？

我可以看到制作输入和输出缓冲区`restrict`有助于编译器知道它们不重叠。但由于最后一个参数 ,`encodedEnd`仅用于标记输出缓冲区的结束，我认为这`restrict`对编译器没有任何帮助（尽管我认为它不会伤害，除了增加不必要的噪音到函数声明）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-07T05:49:33.950

[在此处](https://cellperformance.beyond3d.com/articles/2006/05/demystifying-the-restrict-keyword.html)尝试 Mike Acton 的文章（[旧链接](http://www.cellperformance.com/mike_acton/2006/05/demystifying_the_restrict_keyw.html)）。限制是可怕的，因为不使用它的性能影响和错误使用它的后果。

在您的情况下，听起来您可以安全地将限制应用于所有三个指针，因为没有别名相同的内存区域。但是，在第三个指针上使用它几乎没有性能优势。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-07T23:56:18.317

在这种特殊情况下，无论**encodedEnd**是否是限制都不会产生影响；您已向编译器承诺，没有人将**unencoded**和**encoded**别名化，因此读取和写入不会相互干扰。

在这种情况下，restrict 很重要的真正原因是，没有它，编译器无法知道通过**encode**写入不会影响通过**unencoded**读取。例如，如果

```
encoded == unencoded+1 
```

**那么每次对编码**的写入都会影响从**unencoded**的每次后续读取，因此编译器在写入完成之前无法安排加载。restrict 向编译器承诺这两个指针不会影响相同的内存，因此它可以将加载安排得足够远以避免管道停顿。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-07T05:35:15.093

我认为你是对的，它不会受到伤害。您的循环指针（称为 p）将在循环结束时等于 encodedEnd。但是在循环之后（从 p 或 encodedEnd）不需要访问任何内容，所以这应该不是问题。我认为它也无济于事，因为没有任何东西可以从 encodedEnd 写入或读取，因此没有什么可以优化的。

但我同意你的前两个限制应该真的有帮助。

# javascript - 在 javascript 中创建简单的书签

> ID：832967
> 
> 赞同：0
> 
> 时间：2009-05-07T05:09:50.597
> 
> 标签：javascript

我正在尝试在书签中选取文档的选定文本。我该如何实施？

我从网上得到这个。为什么这不起作用？

javascript: Q=document.selection?document.selection.createRange().text:document.getSelection(); 警报（Q）；

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T05:12:57.127

您必须先选择文本。它会提醒页面中的选定文本。如果您只是将该代码放在您的地址栏中的警报 null 中，因为没有选择任何文本。

# svn - subversion 中的合并是否比 Team Foundation System 中的更难？

> ID：832981
> 
> 赞同：4
> 
> 时间：2009-05-07T05:15:20.273
> 
> 标签：svn, version-control, tfs, merge, comparison

我习惯使用 TFS，我的公司现在正在为一个新项目切换到 SVN（主要原因是为了更好地将我们的 java 和 .Net 代码库合并到同一个源代码控制下）。

我知道颠覆中的合并很难（杰夫在他最新的播客[中提到了这一点）。](https://blog.stackoverflow.com/2009/05/podcast-52/)

1.  与 TFS 相比，颠覆有哪些问题？
2.  如何缓解？（在颠覆的范围内，或者像 Jeff 建议的那样，选择另一个源代码控制）

TFS 提供的一个强大功能是它的自动合并功能（在 TFS2008 中得到了极大的改进，虽然还不完美）。大多数合并不需要用户进行任何操作。颠覆中也一样吗？

**更新**- 这里接受的答案只能来自经历过**TFS**和**subversion**大合并的人，并且可以实际比较和对比两者。知道“合并颠覆是好的”或“TFS 是垃圾”并不能真正帮助我做出决定，因为它是主观的。如果您可以与其他替代品进行比较，那就太好了 - 这很有帮助。但我的重点是颠覆与 TFS。

我感兴趣的目标团队规模是 6-30 名活跃的开发人员。

**更新 2** - 有没有人会让 SVN 中的合并实际上比 TFS 中更容易（考虑到工具）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T14:41:21.850

我在 TFS 和 Subversion 中都进行了大合并。TFS 代码库是 SharePoint 应用程序的 1.5->2.0 分支，生产更改合并到 2.0 代码库中。SVN 合并是将分支中的新功能合并到基线源中。

您已经熟悉 TFS，因此我将不再赘述细节，只是说[变更集](http://weblogs.asp.net/dmckinstry/archive/2006/07/03/Understanding-ChangeSets-and-Merge-with-Team-Foundation-Server.aspx)和 TFS 工具使该过程变得非常简单。由于取消删除问题，我们确实收到了 TF14087 错误，但很快就解决了。

在 SVN 中，这个过程更加手动，因为我们必须针对 SVN 中文件的特定版本，并且 SVN 对文件进行了差异合并，这不允许我们在 TFS 中的变更集上体验到灵活性（例如“不ChangesetA 中的所有更改，但 ChangesetB 中的所有更改")。当时我们没有合并跟踪，我们的源代码树也不是为了支持 SVN 合并跟踪的最佳实践而设计的。

我现在认为，使用 SVN 中的合并跟踪，假设您遵循 CollabNet 概述的最佳实践，该过程会变得相当简单。但请记住，TFS 是一款大型产品，具有非常出色的 GUI 工具来管理您的源代码，而 SVN 更多地依赖于命令行，因此如果您习惯使用 GUI，这会使事情变得复杂。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-07T06:15:21.907

对于常见情况，我认为颠覆中的合并一点也不难，看看[这些](http://svnbook.red-bean.com/en/1.0/re16.html)例子。我发现合并非常简单易行；尽管一些同事抱怨更喜欢 CVS，其他人则抱怨 p4 等等。我怀疑这在很大程度上与熟悉其他工具有关，而不是与技术优势/劣势有关。

可能是更复杂的（三路）合并更难，但问题是常用的合并是否是那些。就我个人而言，我认为复杂的合并（以及长期存在的分支、复杂的分支跟踪和合并策略等）是代码腐烂的味道（或者我猜是 SCM 腐烂）。YMMV。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-07T05:27:40.913

我对 TFS 不熟悉，但在 1.5 版之前，subversion 的合并支持仅包括获取（手动指定的）修订范围的差异，并将其应用于存储库中的另一个路径。在 1.5 版中，实现了合并跟踪，但它似乎[相当复杂](http://svnbook.red-bean.com/nightly/en/svn.branchmerge.advanced.html#svn.branchmerge.advanced.finalword)，有一些有趣的边缘情况。

如果合并对您很重要，您可能希望考虑一种擅长合并的 DVCS，例如[git](http://git-scm.com/)或[mercurial](http://www.selenic.com/mercurial/wiki/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-11T06:25:14.750

我已经使用 subversion 很长时间了，让我告诉你，合并是可怕的，绝对是坏掉的。我已经更改为 mercurial，即使我对分布式的东西没有用处，只是为了获得有效的分支。

**根据要求进行详细** 说明要在 SVN 中成功合并，您需要（ed）知道分支所携带的版本号，只要您只进行一次合并回主干，这并不难找到。不幸的是，有时您需要多次合并（即事实证明，要添加一个您首先必须修复错误的功能）到主干，或者您正在不同分支之间进行合并，这使得无法跟踪哪个版本number 属于哪个分支以及之前合并过的内容。

我使用的 SVN 版本是 1.5.1，所以它应该可以与新样式开发一起使用，尽管我错过了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-11T06:01:32.277

有点离题，但如果你的 Java 开发人员从 TFS 迁移的问题仍然悬而未决，我建议你看看 Teamprise。它是专为使用 TFS 的 Java 开发人员制作的工具。它为 Java 用户提供了 eclipse 中 Visual Studio 集成的大部分功能（有些东西甚至更好）。

[http://www.team.com/](http://www.teamprise.com/)

（仅供参考，我与他们没有任何关系......）

瓦卡诺

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-13T05:36:47.820

所有系统都有优点和缺点。

But one little useful note (that is close to off topic) is that a external powerful merge/diff program is often really useful. So whatever you choose make sure you have a nice 3-way merge tool around to help out when the automated stuff breaks.

BR Johan

# performance - 保存日志/统计信息的最佳方式

> ID：832983
> 
> 赞同：2
> 
> 时间：2009-05-07T05:16:35.450
> 
> 标签：performance, logging, catalyst

我使用 Catalyst（Perl 的 MVC 框架），但这个问题可能适用于所有 MVC 框架。

到目前为止，我使用 Apache 日志文件来获取有关访问者的统计信息：用户代理、访问的 URL、时间等。但是现在我转向 MVC 框架，我认为这还不够。例如，如果对 /1/foo 和 /1/bar 的请求对我来说是相同的，我只想在我的日志中显示 /1/。

所以我想知道生成我自己的统计日志文件的最佳方法是什么。我应该把它当作我的应用程序中的另一个日志文件吗？

这些统计数据可以随时记录。理想情况下，它们会在页面发送给用户后被记录，因此不会感觉到记录所需的额外时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-07T05:50:54.603

鉴于 Catalyst 已经大量使用子程序属性，一种有用的方法可能是使用属性将相关子程序包装在自定义日志记录机制中。我写[了一篇](http://www.perl.com/pub/a/2007/04/12/lightning-four.html)关于这种技术的文章，它以日志记录为例。基本思想是：

```
use Attribute::Handlers;

sub Log : ATTR(CODE) {
    my ($pkg, $sym, $code) = @_;

    my $name = *{ $sym }{NAME};

    no warnings 'redefine';

    *{ $sym } = sub {
        log_message("Entering sub $pkg\:\:$name");
        $code->( @_ );
    };
}

sub foo : Log { 
    # this will be logged
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T06:35:28.723

如果需要这种程度的灵活性，friedo 的答案非常漂亮。

OTOH，您可以继续使用 Apache error_log 来记录这些数据，只需使用`$c->log->info()`它或其兄弟之一。扩展 Catalyst::Log 以报告其他类型的消息相当简单。例如，我使用一种`$c->log->sql()`将 SQL 写入通过 SQL::Beautify 运行的 error_log 的变体。

我可以想象一些类似的东西

```
sub auto {
    ...
    $c->log->audit(sprintf("%s called by %s", $c->action->reverse, $c->userid));
    ...
} 
```

把它放在开头（自动）不是你想要的，但它肯定不会有问题，因为你知道它总是会被调用，不像结束处理程序。

# c# - 如何在 ASP.NET 中使用时区？

> ID：832986
> 
> 赞同：32
> 
> 时间：2009-05-07T05:17:39.953
> 
> 标签：c#, asp.net, timezone, reminders

我正在开发一个“在线提醒系统”项目（ASP.NET 2.0 (C#) / SQL Server 2005）

因为这是一项提醒服务，它将在特定日期向用户发送邮件。但问题是用户不是来自特定的国家，他们来自世界各地，来自不同的时区。现在，当我注册时，我正在询问用户时区，就像 Windows 在安装时询问我们的时区一样。

但是我没有得到如果用户选择（+5.30）或某个时区，那么如何在我的 asp.net 应用程序中处理这个时区。如何根据时区工作。

请建议是否有更好的方法来处理此应用程序中的时区？

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-05-07T05:24:15.603

首先要确定您的数据位于哪个时区。我建议确保您存储的任何 DateTime 都以 UTC 时间存储（使用`DateTime.ToUniversalTime()`获取它）。

当您要为用户存储提醒时，您将需要当前的 UTC 时间，添加或删除用户的时区差异，并将该新时间转换回 UTC；这是您要存储在数据库中的内容。

然后，当您要检查要发送的提醒时，您只需根据 UTC 时间在数据库中查找要发送的提醒即可；基本上得到所有具有之前时间戳的提醒`DateTime.Now.ToUniversalTime()`。

**更新**一些实现细节：您可以从`TimeZoneInfo.GetSystemTimeZones()`方法中获取时区列表；您可以使用它们为用户显示时区列表。如果存储`Id`所选时区的属性，则可以从中创建 TimeZoneInfo 类实例，并计算给定本地日期/时间值的 UTC 时间：

```
TimeZoneInfo tzi = TimeZoneInfo.FindSystemTimeZoneById("<the time zone id>");
// May 7, 08:04:00
DateTime userDateTime = new DateTime(2009, 5, 7, 8, 4, 0);
DateTime utcDateTime = userDateTime.Subtract(tzi.BaseUtcOffset); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-05-07T07:54:40.513

我建议始终**在服务器端使用 UTC (GMT) 时间**（在代码隐藏、数据库等中），并将时间从 UTC 转换为**本地时间，仅用于显示目的**。这意味着所有时间操作——包括在数据库中节省时间、执行计算等——都应该使用 UTC 完成。

问题是：您的代码隐藏如何知道客户端浏览器的时区？假设用户在表单中输入一些日期/时间值（例如*12/30/2009 14:30*）并将其提交给服务器。假设用户提交的是本地时间，那么服务器如何知道如何将此值转换为 UTC？

应用程序可以要求用户指定时区（并将其保存在持久性 cookie 或数据库中），但这需要用户付出额外的努力，并且您的应用程序需要为此实现逻辑和屏幕。**如果应用程序可以自动确定客户端的时区**，那就更好了。

[我已经在 J​​avaScript 的getTimezoneOffset](http://www.w3schools.com/jsref/jsref_getTimezoneOffset.asp)函数的帮助下解决了这个问题，它是唯一可以告诉服务器客户端本地时间和 GMT 时间差的 API。由于这是一个客户端 API，我做了以下操作：在服务器端检查保存时间偏移值的自定义会话 cookie，如果它不可用，则重新加载页面（仅在 GET 期间，而不是 POST 调用期间）添加了一些 JavaScript 逻辑来生成时间偏移并将其保存在 cookie 中。从客户端来看，这几乎是透明的（在会话期间我在 GET 上重新加载页面）。一旦我在 cookie 中获得了偏移量，我就会根据时间转换的方向（UTC 到本地时间，或本地时间到 UTC）将它应用于时间管理功能。

这听起来可能有点复杂，但确实如此，但在我编写了辅助函数之后，在站点中集成此功能只需在 Page_Load （需要时间转换的页面）中进行**一次调用**，并在发送时使用时间转换例程并从浏览器中检索时间值。这是如何使用它的示例：

```
using My.Utilities.Web;
...

// Derive the form class from BaseForm instead of Page.
public class WebForm1: BaseForm
{
...
private void Page_Load(object sender, System.EventArgs e)
{
  // If we only want to load the page to generate the time
  // zone offset cookie, we do not need to do anything else.
  if (InitializeLocalTime())
    return;

  // Assume that txtStartDate is a TextBox control.
  if (!IsPostback)
  {
     // To display a date-time value, convert it from GMT (UTC)
     // to local time.
     DateTime startDate = GetStartDateFromDB(...);
     txtStartDate.Text  = FormatLocalDate(startDate);
     ...
  }
  else
  {
     // To save a date-time value, convert it from local
     // time to GMT (UTC).
     DateTime tempDate  = DateTime.Parse(txtStartDate.Text);
     DateTime startDate = ConvertLocalTimeToUtc(tempDate);
     SaveStartDateInDB(startDate, ...);
     ...
  }
}
...
} 
```

如果您需要更多详细信息，请查看[It's About Time: Localizing Time in ASP.NET Applications](http://alekdavis.blogspot.com/2007/05/my-articles.html)文章（抱歉，我没有发布者网站上文章的直接链接，因为 asp.netPRO 仅限制付费订阅者的访问权限; 不过有指向 PDF 副本的链接）。我希望我可以发布文章中的示例，但我不想侵犯版权；然而，这里有一个[项目来构建一个](http://www.box.net/shared/dk9vtrx31b)具有**所有必要功能和文档**的辅助库（忽略你不需要的东西）。

[更新：文章](http://devproconnections.com/aspnet/it-s-about-time)已由新发布者在线发布，其中包含示例项目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-12T02:26:06.953

到目前为止，所有答案的问题在于他们没有考虑到 Prashant 试图实现的目标。如果他的系统用户在夏令时更改前一天的偏移量为+12，并为第二天设置了提醒，则他应该触发提醒时的偏移量将改为+13。

这就是为什么您只能将当前偏移量用于现在正在发生的事情。尽管我确实同意其他所有人的观点，即所有时间服务器端（可能仅用于显示的除外）都应存储在 UTC 中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-07T06:36:53.087

如果您使用的是框架 2.0 或更高版本，您可能希望查看使用[DateTimeOffset结构而不是 DateTime。](http://msdn.microsoft.com/en-us/library/system.datetimeoffset.aspx)

DateTimeOffset 表示相对于 UTC 时间的时间点，因此在这种情况下应该更容易使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-14T14:00:10.433

有2个步骤：

*   使用 Javascript 在客户端检测不同的时区：

    ```
    var dt = new Date();
    var diffInMinutes = -dt.getTimezoneOffset(); 
    ```

*   然后在服务器端，C# 代码根据上面检测到的时区偏移量将服务器时间转换为客户端时间：

----------------------;

```
string queryStr = Request.QueryString["diffInMinutes"];
int diffInMinutes = 0;
if (Int32.TryParse(queryStr, out diffInMinutes))
{
    clientTime = serverTime.ToUniversalTime().AddMinutes(diffInMinutes);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T05:25:50.543

基本上，您需要做的就是将偏移量（小时+分钟）添加到用户输入的本地时间。添加偏移量基本上会在 UTC（基本上是 GMT）时区为您提供 DateTime。

通常最容易将所有时间标准化为 UTC，这样您的应用程序逻辑就不必处理偏移量。

这个页面有几个很好的例子：http: [//msdn.microsoft.com/en-us/library/bb546099.aspx](http://msdn.microsoft.com/en-us/library/bb546099.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-12T05:16:18.080

问题是与 UTC 的偏移量在一年中的不同时间会有所不同——每个时区都有自己的规则。（我在开发会议室调度应用程序时学到了这一点。）

看起来这里有内置支持：http: [//msdn.microsoft.com/en-us/library/system.timezoneinfo.converttime.aspx](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.converttime.aspx)

自己没有尝试过，但它似乎可以保证正确的转换，考虑到夏令时。

如果没有，这是我使用过的（昂贵的）商业工具：[http ://www.worldtimeserver.com/time_zone_guide/](http://www.worldtimeserver.com/time_zone_guide/)

# haskell - 是否建议在 Haskell 中始终进行详尽的模式匹配，即使对于“不可能”的情况也是如此？

> ID：832992
> 
> 赞同：19
> 
> 时间：2009-05-07T05:20:39.790
> 
> 标签：haskell, functional-programming, pattern-matching

是否建议在 Haskell 中始终进行详尽的模式匹配，即使对于“不可能”的情况也是如此？

例如，在下面的代码中，我在 foldr 的“累加器”上进行模式匹配。我完全控制了累加器的内容，因为我创建了它（它不是作为输入传递给我的，而是在我的函数中构建的）。因此，我知道某些模式永远不应该匹配它。如果我力求永远不要出现“模式匹配不完全”错误，那么我会为其放置一个模式匹配，该错误只是带有“此模式不应该发生”的消息。很像 C# 中的断言。我想不出还有什么可做的。

在这种情况下，你会推荐什么做法，为什么？

这是代码：

```
gb_groupBy p input = foldr step [] input
   where
      step item acc = case acc of
           []                           -> [[item]]
           ((x:xs):ys)                  -> if p x item
                                           then (item:x:xs):ys
                                           else [item]:acc 
```

不匹配的模式（由解释器报告）是：

警告：模式匹配并非详尽无遗在另一种情况下：模式不匹配：[]：_

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-07T05:23:25.777

这可能更多的是风格问题。就个人而言，我会投入一个

```
_ -> error "Impossible! Empty list in step" 
```

如果只是为了使警告静音:)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-07T10:34:31.970

您可以通过执行以下操作解决此特殊情况下的警告：

```
gb_groupBy p input = foldr step [] input
   where
     step item acc = case acc of
        []                           -> [[item]]
        (xs:xss)                      -> if p (head xs) item
                                         then  (item:xs):xss
                                         else [item]:acc 
```

然后模式匹配完成，累加器头部的空列表的“不可能”条件将导致运行时错误但没有警告。

另一种看待不完整模式匹配的更普遍问题的方法是将它们视为“代码气味”，即表明我们正在尝试以次优或非 Haskellish 方式解决问题，并尝试重写我们的函数。

使用 foldr 实现 groupBy 使得无法将其应用于无限列表，这是 Haskell List 函数试图在语义上合理的地方实现的设计目标。考虑

```
take 5 $ groupBy (==) someFunctionDerivingAnInfiniteList 
```

如果前 5 组 wrt 相等是有限的，惰性求值将终止。这是您在严格评估的语言中无法做到的事情。即使您不使用无限列表，编写这样的函数也会在长列表上产生更好的性能，或者避免在评估表达式时发生的堆栈溢出

```
take 5 $ gb_groupBy (==) [1..1000000] 
```

在[List.hs](http://cvs.haskell.org/cgi-bin/cvsweb.cgi/fptools/libraries/base/Data/List.hs?rev=1.26)中， groupBy 是这样实现的：

```
groupBy         :: (a -> a -> Bool) -> [a] -> [[a]]
groupBy _  []       =  []
groupBy eq (x:xs)   =  (x:ys) : groupBy eq zs
                           where (ys,zs) = span (eq x) xs 
```

这使解释器/编译器能够仅评估结果所需​​的计算部分。 [span](http://undergraduate.csse.uwa.edu.au/units/CITS3211/lectureNotes/tourofprelude.html#span)产生一对列表，其中第一个由列表头部的（连续）元素组成，都满足谓词，第二个是列表的其余部分。它也被实现为在无限列表上工作。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-07T21:24:41.970

我发现对案例模式进行详尽检查是必不可少的。我尽量不要`_`在顶级案例中使用，因为`_`匹配所有内容，并且通过使用它会破坏详尽检查的价值。这对于列表不太重要，但对于用户定义的代数数据类型至关重要，因为我希望能够添加一个新的构造函数并让编译器对所有缺失的情况进行 barf。出于这个原因，我总是在`-Werror`打开的情况下编译，所以我没有办法遗漏一个案例。

正如所观察到的，您的代码可以使用这种情况进行扩展

```
[] : _ -> error "this can't happen" 
```

在内部，GHC 有一个`panic`函数，它不像`error`会给出源坐标，但我查看了实现，无法确定它的头部或尾部。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-07T14:04:51.873

为了跟进我之前的评论，我意识到有一种方法可以确认丢失的案例，但仍然会收到文件/行号的有用错误。这并不理想，因为它只会出现在未优化的版本中（请参阅[此处](http://haskell.org/ghc/docs/latest/html/libraries/base/Control-Exception.html#v:assert)）。

```
...
[]:xs -> assert False (error "unreachable because I know everything") 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-01-27T18:11:17.463

类型系统是你的朋友，警告是让你知道你的函数有裂缝。最好的方法是在类型之间寻求更干净、更优雅的配合。

考虑 ghc 的定义`groupBy`：

```
groupBy                 :: (a -> a -> Bool) -> [a] -> [[a]]
groupBy _  []           =  []
groupBy eq (x:xs)       =  (x:ys) : groupBy eq zs
                           where (ys,zs) = span (eq x) xs 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-22T10:56:24.683

我的观点是，不可能的情况是*undefined*。
如果它是未定义的，我们有一个函数来处理它：狡猾的命名[`undefined`](https://www.haskell.org/ghc/docs/7.6.2/html/libraries/base-4.6.0.1/Prelude.html#v%3aundefined)。

用以下方式完成匹配：

```
_ -> undefined 
```

你有它！

# php - 命名空间运算符...有什么大不了的？

> ID：832995
> 
> 赞同：13
> 
> 时间：2009-05-07T05:21:58.540
> 
> 标签：php, namespaces

有人可以向我解释使用反斜杠作为命名空间运算符到底有什么不好吗？我读过很多关于它的嘲笑言论。一位 StackOverflower 甚至说他因此放弃了 PHP。

是的，我知道反斜杠作为字符串中的转义字符具有特殊含义，但它并不比使用`->`或`.`许多其他语言中的点更糟糕。

这让我想起了任天堂宣布 Wii 名称时的所有嘲笑。每个人都会大惊小怪，然后一旦它出来并且你习惯了它，没有人在乎，他们继续前进。

所以，请赐教。它有什么不好？你会建议什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-07T05:37:15.320

**它有什么不好的地方：**你能在下面的代码中发现错误吗？

```
if(class_exists("namespace1\namespace2\myClass"))
    echo "This will never be true"; 
```

**我会建议什么：**不幸的是，'\' 是唯一可用的单个字符。如果 PHP6 是我设计的，我会用关键字替换所有的位运算符（^、&、|、~）（因为它们用得很少）并使用 '|' 作为命名空间分隔符。事实上，我会建议进行更多简单的语法更改，以使 PHP 更易于阅读和编写，但改用 Python 会更容易......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-07T09:28:29.430

它的问题在于它是几乎所有其他上下文中的转义字符。这意味着人们会在不经意间把它弄乱，但它也使它难以阅读，因为你的眼睛已经习惯了将反斜杠作为元字符来阅读，而不仅仅是另一个符号。

我会更喜欢三个冒号，这实际上是在某个时候提出的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-26T16:23:59.957

此外，如果我没有特别好的理由想要一种重新发明语法的语言，我会使用 Ruby。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-26T22:06:31.777

那么，使用“\”作为命名空间时还有其他问题。

1.  这是转义字符。如果您必须在“字符串”中使用 \，在“字符串”中使用 \。我觉得有人会在某个时候搞砸它。迟早的事。escap char 会抓住你。
2.  '\' 不是很好地位于每个键盘上。在我的键盘上，我必须使用彼此并不接近的组合键，有时这只是一种痛苦。虽然它没有'^'那么糟糕。换句话说，不可能流畅地编写需要访问特定键盘映射上的命名空间的代码。
3.  我记得他们什么时候投票，结果是多么荒谬。他们之所以选择它，是因为它比其他字符更简单，并且需要更少的输入。老实说，这完全取决于您的键盘布局。

这就是我能找到为什么使用转义字符可能是一件坏事的全部原因。老实说，我还在等待能够创建自己的 unicode 符号的语言。因此，它将为您可以覆盖哪个运算符提供更大的灵活性。假设在 c++ 中你可以写类似的东西。

```
bool operator ≤ (Dog dog);
//and then do this
if(myDog ≤ thisDog){
}
//Seems useful?
bool operator ≅ thisDog){ 
  // this wouldn't check for equality 
  // but for something close to it
} 
```

能够使用我们自己的任意运算符比使用 + 对事物进行分组更有意义......“∪”会更有意义......如果你想获得交集，只需你“∩”然后人们可能会说。 .“如果我们的字体中没有这些字符怎么办？” 我只能回答：“找到有它们的字体！！！”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-03-16T17:20:40.870

官方 RFC 和支持文档可以在以下位置找到

*   [https://wiki.php.net/rfc/namespaceseparator](https://wiki.php.net/rfc/namespaceseparator)和
*   [https://wiki.php.net/rfc/backslashnamespaces](https://wiki.php.net/rfc/backslashnamespaces)

它们包括[有关决策过程的 IRC 日志](https://wiki.php.net/_media/rfc/php.ns.txt)。

引用部分**“问题”**

> *   `\`看起来很像`/`而且很容易意外翻转，尤其是对于 unix 用户
> *   `\`用于逃逸
> *   在字符串中，命名空间名称变为`\\like\\this`或者我们可以得到奇怪的字符。一开始这可能会让用户感到困惑。
> *   所有现有的命名空间代码都必须几乎重写，`::`不可能进行简单的搜索/替换。
> *   该补丁涉及到很多引擎，需要进行严格的实战测试。
> *   对许多人来说，`\this\way`一开始会看起来很奇怪。

您提到的任何嘲笑言论都可能是由于上述原因或出于“原因”的个人意见。例如，我发现它们读起来很丑，写起来很麻烦，尤其是在我必须使用双反斜杠的字符串中。但是话又说回来，我越经常使用它们就习惯了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-01-05T18:10:20.947

真正的问题是，他们为什么不把它写成 / ？我个人讨厌 \ 因为它是一个转义字符......这对我来说一切都搞砸了！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-11-24T17:53:30.930

let's assume the following namespace:

```
jp\nintendo\rvl\testing
```

do you notice the errors?

the actual (internal) namespace is most likely something like this:

```
jp
intendo
vl  esting
```

The solution to this is to always use two backslashes as a namespace seperator similar to how we're using this in windows filenames.

using two backslashes is completely harmles, as it is a escape sequence itself, which expands into 1 single literal backslash, which is the actual namespace seperator.

now, if we use

```
jp\\nintendo\\rvl\\testing
```

as a namespace (using 2 backslashes as the seperator) the actual (internal) namespace becomes:

```
jp\nintendo\rvl\testing
```````