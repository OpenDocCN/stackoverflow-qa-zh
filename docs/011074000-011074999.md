# StackOverflow 问答 11074000-11074999

# visual-studio-2010 - Visual Studio 2010 工具箱“隐藏”控件

> ID：11074000
> 
> 赞同：1
> 
> 时间：2012-06-17T19:01:24.533
> 
> 标签：visual-studio-2010, silverlight, controls, toolbox

我对视觉工作室有一个有点奇怪的问题。几乎每次我在 VS10 中创建或打开 Silverlight 项目时，控件组都会从工具箱中“消失”。到目前为止，我发现如下：

1.  每次我启动 VS10 时，我都必须等待一分钟左右，看到这条消息：

> 从包“Microsoft.VisualStudio.IDE.ToolboxControlsInstaller”加载工具箱内容。工具箱安装程序包' {2C298B35-07DA-45F1-96A3-BE55D91C8D7A}

1.  消失的控件并没有真正消失，只是不可见，所以如果我将鼠标悬停在控件通常所在的位置，我可以在工具提示中看到控件名称，这样也可以将其添加到 XAML。

所以，它仍然可行，但非常烦人，并且由于某种原因加载需要时间，这里有没有人知道我需要做什么来解决这个问题？？？

在使用 ASP.NET、WCF、WPF 或 WinForms 项目时，它永远不会发生，只有 Silverlight。

谢谢你的帮助。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:17:00.600

您可以尝试以下步骤：

*   选择`Tools`菜单然后选择`Toolbox Items`
*   选择`Silverlight Components`
*   点击重置并确认
*   关闭窗口并再次打开工具箱视图
*   如果没有显示项目，请右键单击工具箱并选择重置。

# java - 如何在android的后台进程中创建设置计时器的程序

> ID：11074005
> 
> 赞同：0
> 
> 时间：2012-06-17T19:01:54.583
> 
> 标签：java, android, timer

我是android编程的新手。我想创建一个定时器程序，可以通过独立定义数据来设置时间。

例如，我可以设置 5 秒启动和 10 秒停止第三方程序，它们像这样切换时间，直到电池减少到指定的值（假设 100 到 90%），然后计时器将停止在 90%。

此外，我也想收集调用 start 和 stop 的日志数据时间。例如，在上午 9 点开始 5 秒，然后在上午 9.06 到 9.15 停止，然后在 9.15 到 9.20 开始，并在每个级别收集百分比电池。

当我关闭屏幕时，计时器是否会继续运行或停止，因为 android 进入睡眠模式？如果我关闭屏幕，日志会收集吗？我应该将程序编码为服务以便在后台进程上运行吗？

干杯男孩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:42:40.540

执行后台操作的方法有很多，但是根据您的描述，使用 TimerTask 类 + Timer 来调度后台任务似乎是一个经典案例：

[http://developer.android.com/reference/java/util/TimerTask.html](http://developer.android.com/reference/java/util/TimerTask.html)

您也可以通过以下几个示例了解如何使用它：

[http://thedevelopersinfo.wordpress.com/2009/10/18/scheduling-a-timer-task-to-run-repeatedly/](http://thedevelopersinfo.wordpress.com/2009/10/18/scheduling-a-timer-task-to-run-repeatedly/)

[http://android.okhelp.cz/timer-task-timertask-run-cancel-android-example/](http://android.okhelp.cz/timer-task-timertask-run-cancel-android-example/)

[如何使用 TimerTask 运行线程？](https://stackoverflow.com/questions/10029831/how-do-you-use-a-timertask-to-run-a-thread)

如果您希望任务是相互依赖的（不附加到某些活动的生命周期），并在您的应用程序处于后台时运行（您的应用程序没有正在运行的活动），那么您应该从服务运行计时器任务。在这种情况下 - 屏幕是打开还是关闭都没有关系 - 计时器任务将根据时间表完成工作。

# javascript - javascript中的正则表达式

> ID：11074006
> 
> 赞同：0
> 
> 时间：2012-06-17T19:01:57.310
> 
> 标签：javascript, expression

我正在尝试获取它，以便如果输入到文本框中的值不是 0.0 到 4.9 之间的十进制数，小数点前后只有一位，则弹出警报消息，但无论我是什么数字都会弹出消息输入，我认为我的正则表达式有问题，但我无法弄清楚。

```
if ((textBox.value.search("/^[0-4]\\.[0-9]$/")) == -1) {
    alert("Invalid Entry");
    return false;
} 
```

return false 在那里，因为如果数字无效，那么函数将退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:39:01.587

您也可以在不使用 RegExp 的情况下执行此操作，方法是通过[parseFloat将值解析为数字并通过](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat)[isFinite](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/isFinite)检查结果。

```
// Parse the value as a float. If the value cannot be parsed,
// `parseFloat` will return NaN    
var toFloat = parseFloat( textBox.value );

// Use `isFinite` to verify that parsing was successful. If it
// was, just check the range (i.e. between 0 and 4.9)
if ( isFinite( toFloat ) && toFloat >= 0 && toFloat <= 4.9 ) {
    // Input is valid
} else {
    // Input is invalid
} 
```

希望有帮助。干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:08:16.560

它应该是：

```
if ((textBox.value.match(/^[0-4]\.[0-9]$/))) {
    alert("Invalid Entry");
    return false;
} 
```

在这里，您对匹配的位置不感兴趣，而只对匹配的事实感兴趣，因此不必使用`search`,`match`就足够了。

# ruby-on-rails - 用户可以“阅读”的范围记录的常用方法是什么？

> ID：11074008
> 
> 赞同：2
> 
> 时间：2012-06-17T19:02:35.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, performance, activerecord, authorization

我正在使用 Ruby on Rails 3.2.2，我想知道当必须检查用户是否具有“读取”记录“列表”中存在的记录的适当授权时，什么是常用方法。也就是说，此时我有以下内容：

```
class Article < ActiveRecord::Base
  def readable_by_user?(user)
    # Implementation of multiple authorization checks that are not easy to
    # translate into an SQL query (at database level, it executes a bunch of
    # "separate" / "different" SQL queries).

    ... # return 'true' or 'false'
  end
end 
```

*通过使用上面的代码，我可以对单个*文章对象执行授权检查：

```
@article.readable_by_user?(@current_user) 
```

但是，当我想`index`通过准确检索 10 个对象来制作（通常在我的控制器操作中）类似以下内容时

```
Article.readable_by_user(@current_user).search(...).paginate(..., :per_page => 10) 
```

我仍然必须对每个对象执行授权检查。那么，***我可以做些什么来以******“智能”/“高性能”的方式***`Article`对记录的“列表”（对象数组）执行授权检查？也就是说，例如，我是否应该加载（可能通过创建的数据对它们进行排序，将 SQL 查询限制为 10 条记录，......）然后迭代每个对象以执行授权检查？还是我应该做一些不同的事情（也许使用一些 SQL 查询技巧、一些 Ruby on Rails 工具或其他东西）？*`Article.all`*

 *# @Matzi 回答后更新

我试图“手动”检索用户*可读*的文章，例如使用以下[`find_each`](http://apidock.com/rails/ActiveRecord/Batches/find_each)方法：

```
# Note: This method is intended to be used as a "scope" method
#
#   Article.readable_by_user(@current_user).search(...).paginate(..., :per_page => 10)
#
def self.readable_by_user(user, n = 10)
  readable_article_ids = []

  Article.find_each(:batch_size => 1000) do |article|
    readable_article_ids << article.id if article.readable_by_user?(user)

    # Breaks the block when 10 articles have passed the readable authorization 
    # check.
    break if readable_article_ids.size == n
  end

  where("articles.id IN (?)", readable_article_ids)
end 
```

这时候，上面的代码是我能想到的最“性能折中”了，即使它有一些陷阱：它将检索到的对象的数量“*限制*”在给定`id`s 的给定记录数量（默认为 10 条记录）在上面的例子中）；实际上，*它“真的”不会检索用户可读的所有对象，*因为当您尝试进一步确定使用范围方法的相关`ActiveRecord::Relation`“where”/“with which”`readable_by_user`时（例如，当您还搜索文章时`title`添加进一步的 SQL 查询子句），它会将记录*限制*为那些`where("articles.id IN (?)", readable_article_ids)`（即，它“限制”/“限制”*由用户搜索时将被忽略`title`）。为了使该`readable_by_user`方法与其他范围方法一起正常工作，解决该问题的方法可能是*不* `break`阻止以加载所有*可读*文章，但是当有很多记录时，出于性能原因（也许，另一种解决方案可能是将`id`用户可读的所有文章存储在某处，但我认为这不是解决问题的常见/简单解决方案）。*

 *那么，***有一些方法可以以一种高效且“真正”正确的方式完成我想做的事情（也许，通过改变上述方法）？***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:10:42.783

这取决于你的`readable_by_user`功能。如果它很容易翻译成 SQL，那么它就是前进的方向。如果它比这更复杂，那么您很可能必须手动进行检查。

更新：为了阐明为可读列表创建 SQL 查询的意义，我举了一个例子。假设文章对给定用户的可读性取决于以下因素：

*   用户自己的文章 ( `SELECT a.user == ? FROM Articles a WHERE a.id = ?`)
*   文章对所有人开放（`SELECT a.state == 0 FROM Articles a WHERE a.user = ?`）
*   用户是有权访问文章的组的成员

sql：

```
SELECT max(g.rights) > 64
FROM Groups g 
JOIN Groups_users gu on g.id = ug.group_id
WHERE gu.id = ? 
```

*   用户被分配给给定的文章

sql：

```
SELECT 1
FROM Articles_users au
WHERE au.article_id = ? AND au.user_id = ? 
```

这些可以总结在以下查询中：

```
def articles_for_user(user) 
  Articles.find_by_sql(["
    SELECT a.*
    FROM Articles a
    LEFT OUTER JOIN Articles_users au on au.article_id = a.id and au.user_id = ?
    WHERE a.user_id = ? 
       OR au.user_id = ?
       OR 64 <= (SELECT max(g.rights) 
                 FROM Groups g 
                 JOIN Groups_users gu on g.id = ug.group_id
                 WHERE gu.id = ?)
  ", user.id, user.id, user.id, user.id])
end 
```

这肯定是一个复杂的查询，但却是最有效的解决方案。数据库应该做数据库的东西，如果你只使用 SQL 查询和一些逻辑来评估你的`readable_bu_user`，那么你可以将它转换成一个纯 SQL 查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T19:30:47.847

我认为您应该寻找[declarative_authorization gem](https://github.com/stffn/declarative_authorization)。使用它的`with_permissions_to`方法，您可以轻松地执行此类数据库查询。例如：`Article.with_permissions_to(:read).limit(10).offset(20)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T04:21:07.600

我在目前正在使用的系统上遇到了同样的问题。

我发现最有效的方法是实现一个预先计算每条记录的授权状态的批处理作业。我使用了类似的东西`accessible_by_companies`并存储了一个包含所有可以访问这些记录的公司代码的数组，但`accessible_by_users`如果这是你的情况，你也可以使用。

在“显示”动作上，我重新计算了授权公司列表以供记录，用它来执行授权检查，并再次存储。

我使用[ElasticSearch](http://www.elasticsearch.org/)来存储预先计算的值以及执行查询和列表所需的所有数据。只有在查看记录或批处理作业时才会触及数据库。这种方法有很大的性能提升，试一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T08:22:24.070

为了获得最佳性能，我建议在会话中存储用户可读文章的列表 - 用户不会在会话中更改，您可以单独考虑刷新频率和/或条件。假设您的 Articles.list() 可以通过 id 过滤，您需要做的就是将用户可读的 id 列表传递给 Articles.list() 功能。用户可读列表更新：您应该相对不频繁地更新它 - 每次搜索最多一次，您不想在每次页面加载时刷新完整列表，原因很简单，新结果可能会出现在用户已经出现的页面中无论如何滚动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T20:56:32.043

cancan [gem](https://github.com/ryanb/cancan)具有此功能。事实上，从 1.4 版开始，它会自动限定您的查询范围以返回当前用户可以访问的对象。

有关更多信息，请参阅此页面：[https ://github.com/ryanb/cancan/wiki/Fetching-Records](https://github.com/ryanb/cancan/wiki/Fetching-Records)**

# sql-server-2008 - 存储过程询问空列的输入

> ID：11074010
> 
> 赞同：1
> 
> 时间：2012-06-17T19:02:36.847
> 
> 标签：sql-server-2008, tsql, stored-procedures, sql-server-2008-r2

我有两个具有主外键关系的表。外键关系中的表有一些可以为空的列（不是 fk 列）当我使用所有输入值运行以下 sp 时，除了可以接受空值的列（Path1、Path2、...编译器抛出 Path1、Path2...Path5 不能为空的错误。

```
ALTER PROCEDURE [dbo].[Submit_Product]
    @SubjectId uniqueidentifier,
    -- ... other required parameters ...

    -- optional parameters:
    @Path1 nvarchar(75),
    @Path2 nvarchar(75),
    @Path3 nvarchar(75),
    @Path4 nvarchar(75),
    @Path5 nvarchar(75)
AS
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T19:23:07.537

我猜错误来自您的应用程序，而不是来自编译存储过程？

在任何情况下，您都应该在存储过程中设置默认值，如下所示：

```
ALTER PROCEDURE [dbo].[Submit_Product]  
    (  
    @SubjectId uniqueidentifier,  
    @City nvarchar(30),  
    @Area nvarchar(20),  
    @Description nvarchar(400),  
    @ContactNo nvarchar(15),  
    @UserId int,  
    /*Fk Table*/  
    @Path1 nvarchar(75) = null,  
    @Path2 nvarchar(75) = null,  
    @Path3 nvarchar(75) = null,  
    @Path4 nvarchar(75) = null,  
    @Path5 nvarchar(75) = null 
    )  
AS 
```

作为最佳实践，我建议在您的插入语句中指定列名，以避免将来出现向后兼容性陷阱......

```
INSERT INTO dbo.ImagePath (Id, Path1, Path2, Path3, Path4, Path5) 
VALUES (
  @SubjectId, 
  @Path1, 
  @Path2, 
  @Path3, 
  @Path4, 
  @Path5 
) 
```

这样，您可以添加另一个具有默认值的列，并且您现有的存储过程不会受到影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T19:06:53.457

您必须在 SP 中为应该接受空值的值添加默认值。

例如：

```
@test nvarchar(200) = NULL 
```

然后，如果您不提供任何其他值，它将插入一个空值。

# c# - 如何从应用程序外部获取我的 Toast 通知？

> ID：11074012
> 
> 赞同：0
> 
> 时间：2012-06-17T19:02:50.993
> 
> 标签：c#, silverlight, windows-phone-7, push-notification, mpns

嗨，我遇到了这个问题，我不知道如何从应用程序外部获取 Toast 通知，我无法像这样从内部获取它：

```
private void ToastNotificationReceived(NotificationEventArgs e)
    {
        //liste_notifications.Items.Add("Toast : " + e.Collection["wp:Text1"]);
        if (e.Collection["wp:Text1"].Contains("Client"))
        {
            ClientNotification cn = new ClientNotification();
            cn.FromWho = e.Collection["wp:Text1"].Substring(6, 6);
            cn.Notification = e.Collection["wp:Text1"].Substring(12);
            cn.Date = DateTime.Now;
            ClientItems.Add(cn);
            PersistData();
        } 
```

但我不知道如何从外面做到这一点。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:35:48.560

Toast 通知出现在屏幕顶部，并且在您的应用程序内部没有执行任何代码/事件

# iis-7.5 - 应用程序池重置时会发生什么？

> ID：11074016
> 
> 赞同：22
> 
> 时间：2012-06-17T19:03:23.300
> 
> 标签：iis-7.5, windows-server-2008-r2

在 IIS 7 中回收应用程序池时会发生什么？IIS 是否会突然停止该网站上的所有内容并对用户产生影响，或者它是否透明地进行并且用户从未注意到任何事情？

我们应该做回收吗？它的优点和缺点是什么？

我正在考虑每天深夜交通非常低的时候这样做。任何最佳实践，建议？

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-18T19:41:14.503

如果你真的是指Application Pool Recycle，那么它就是一个在线操作。创建了一个新的 w3wp 进程来服务后续请求，而之前的 w3wp 进程具有可配置的时间量来完成所有未完成的请求（默认情况下为 90 秒）。由于必须重新加载内存中的项目，因此会影响性能，但不会出现中断。

如果您遇到内存泄漏问题，则进行夜间回收，然后进行某种预热（将项目加载到内存中）是一个好主意，但真正的优势是能够在低负载期间进行预热（否则您'最好在真正需要之前不要回收）。

如果您实际上是指重置（通常称为 IIS 重置，或者对于应用程序池，先停止，然后再启动），那么是的，存在中断。不，如果可以避免，就不应该这样做。

# javascript - 使用 Javascript 的选定单词的索引

> ID：11074017
> 
> 赞同：1
> 
> 时间：2012-06-17T19:03:34.737
> 
> 标签：javascript, html, selection

如何使用 Javascript 获取 HTML 中选定文本的索引？例如，在 HTML 文件中，有如下段落：

> 我住在印度。印度是一个非常美丽的国家。

现在，如果用户`India`在第一句中选择，那么应该有一个`alert 5`，如果用户选择`India`第二行，那么应该有一个`alert 6`。

如何获取用户选择的单词的索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T23:59:56.933

您可以使用我的[Rangy 库](https://code.google.com/p/rangy/)的新[TextRange 模块](https://github.com/timdown/rangy/wiki/Text-Range-Module)来做到这一点。Rangy 的 Range 对象具有和方法，允许您在任一方向上一次扩展一个单词的范围。`moveStart()``moveEnd()`

这是一个演示：http: [//jsfiddle.net/timdown/ArMHy/](http://jsfiddle.net/timdown/ArMHy/)

代码：

```
var sel = rangy.getSelection();
if (sel.rangeCount > 0) {
    var range = sel.getRangeAt(0);

    // Expand the range to contain the whole word
    range.expand("word");

    // Count all the preceding words in the document
    var precedingWordCount = 0;
    while (range.moveStart("word", -1)) {
        precedingWordCount++;
    }

    // Display results
    alert("Selection starts in word number " + (precedingWordCount + 1));        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:42:50.643

如果要通过索引查找字符串，可以使用-

```
string.match(regularExpression)[index] 
```

参数值-

**正则表达式**= 必需。要搜索的值，作为正则表达式。

**index** = 正则表达式的索引。

> 现在您可以将其视为一个对象并为其分配事件处理程序。

# python - 使用python在现有的xml文档中插入xml节点

> ID：11074021
> 
> 赞同：1
> 
> 时间：2012-06-17T19:04:13.397
> 
> 标签：python, xml

我正在尝试在此文档中插入 xml 节点：

```
</providers>

</root> 
```

我写了这段代码： import xml.dom.minidom as m

```
doc = m.parse("monfichier.xml")
valeurs = doc.getElementsByTagName("providers")
element = doc.createElement("provider")
valeurs.appendChild(element)

elthost = doc.createElement("hostnamep") 
eltLTVC = doc.createElement("LocalTrustValueC")
element.appendchild(elthost)
element.appendchild(eltLTVC)

texteHost = doc.createTextNode("machinename")
texteLTVC = doc.createTextNode("23") 
eltHost.appendChild(texteHost)
eltLTVC.appendChild(texteLTVC)
doc.writexml(open("monfichier.xml","w")) 
```

我想在最后获得这个 xml 文档：machinename 23

```
 </provider> 
</providers>

</root> 
```

但我得到了这个错误： valeurs.appendChild(element) AttributeError: 'NodeList' object has no attribute 'appendChild'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:20:02.860

根据 OP 对 XSLT 解决方案的兴趣：

**这是一个完整而简短的 XSLT 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="providers">
  <providers>
        <provider>
            <hostnamep>machinename</hostnamep>
            <LocalTrustValueC>23</LocalTrustValueC>
        </provider>
  </providers>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
    <providers> 
    </providers>
</root> 
```

**产生了想要的正确结果：**

```
<root>
   <providers>
      <provider>
         <hostnamep>machinename</hostnamep>
         <LocalTrustValueC>23</LocalTrustValueC>
      </provider>
   </providers>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T20:18:02.407

基于对[http://docs.python.org/library/xml.dom.html#dom-node-objects](http://docs.python.org/library/xml.dom.html#dom-node-objects)的一些快速阅读，NodeList 似乎没有 appendChild 方法。相反，您想获取结果集中的第一个节点（因为您的帖子暗示只有一个）并在该节点上调用 appendChild。

```
valeurs = doc.getElementsByTagName("providers").item(0)
element = doc.createElement("provider")
valeurs.appendChild(element) 
```

# c++ - 链表泄露？

> ID：11074023
> 
> 赞同：1
> 
> 时间：2012-06-17T19:04:50.273
> 
> 标签：c++, list

我不太精通C++，但我的任务是设计和实现一个链表。这是我交的：

```
template <typename T>
struct Node
{
    Node() : next(nullptr) {}
    Node(T const & val) : next(nullptr), value(val) {}

    Node * next;
    T value;
};

template <typename T>
class LinkedList
{
    public:
        LinkedList()
        {
            begin_ = new Node<T>;
            current_ = begin_;
        }
        ~LinkedList()
        {
            delete begin_;
        }

        void insert(T const & value)
        {
            Node<T> * node = new Node<T>(value);
            node->next = current_->next;
            current_->next = node;
            current_ = current_->next;
        }

        void remove()
        {
            Node<T> * tmp = current_->next;
            if(!end())
            {
                current_->next = current_->next->next;
            }
            delete tmp;
        }

        bool end() const
        {
            return current_->next == nullptr;
        }

        void reset()
        {
            current_ = begin_;
        }

        void advance()
        {
            if(!end())
            {
                current_ = current_->next;
            }
        }

        T get() const
        {
            return current_->next->value;
        }

    private:
        Node<T> * begin_;
        Node<T> * current_;
}; 
```

我通过了作业，但我的老师`delete begin_`在析构函数中划了下划线`~LinkedList()`并写了“这泄漏了！” 在它的旁边。我一直在想怎么`delete begin_`可能泄漏，但我还是不明白。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:07:06.953

您必须遍历列表中的每个节点并删除。持有一个单独的指向下一个指针，删除当前，然后向前移动并继续删除，直到下一个指针为空。

```
~LinkedList()
{
    Node * current = begin_;
    Node * aNext = begin_->next;

    while (null != aNext){
        delete(current);
        current = aNext;
        aNext = current->next;
    }
} 
```

像这样的东西。不知道你是从哪里开始的，但是......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:07:31.650

在 Node 的析构函数中，它应该发送删除命令以`next`释放列表中的所有节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T19:13:29.103

我想你会这样更好地理解它：

```
~LinkedList()
{
  reset();
  while(!end()) remove();
} 
```

# ruby - 如何在 Ruby 中获取当前目录的名称？

> ID：11074024
> 
> 赞同：35
> 
> 时间：2012-06-17T19:05:18.980
> 
> 标签：ruby, directory

如何在 Ruby 中获取当前目录的名称？我发现的只是`File.dirname(__FILE__)`，但这只会返回`.`，我想要实际名称。我该怎么做呢？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-17T19:08:44.973

```
dirname = File.basename(Dir.getwd) 
```

`File.basename()`即使其参数是目录的路径，也会返回基本名称。

要获得**绝对路径**，**[Dir.pwd](http://ruby-doc.org/core/classes/Dir.html#M002316)**似乎可以解决问题。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-06-29T16:04:08.287

在 Ruby 2.0 或更高版本中，您可以使用[`Kernel#__dir__`](http://www.ruby-doc.org/core-2.0.0/Kernel.html#method-i-__dir__)：

```
__dir__ 
```

从文档：

> 返回调用此方法的文件目录的规范化绝对路径。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-17T19:07:40.263

```
File.expand_path(File.dirname(File.dirname(__FILE__))) 
```

# c++ - 我如何告诉 acgmake 使用 -pthread？

> ID：11074027
> 
> 赞同：0
> 
> 时间：2012-06-17T19:06:04.437
> 
> 标签：c++, linux, gcc, makefile

我正在使用 VMware 虚拟机（linux guest）在 Windows 上构建这个应用程序，它可以在其他 linux 机器上编译。它有一个makefile并完成。然后我运行 acgmake，它应该会生成运行所需的所有文件。我收到此错误：

```
Build executable  Debian64_gcc4.6_dbg/libsrc_CadModel.so  ->  Debian64_gcc4.6_dbg/cadmodel
/home///intel/mkl/10.2.2.025/lib/em64t/libiomp5.so: undefined reference     to `pthread_atfork' 
```

我发现我需要`-pthread`为 gcc （或其他东西）指定标志。这是怎么做到的？`ACGMakefile`包含：（编辑：CadModel/ACGmakefile ）

```
#==  SYSTEM PART -- DON'T TOUCH  ==============================================
include $(ACGMAKE)/Config
#==============================================================================
CXX_CFLAGS += -DQT_THREAD_SUPPORT

ifeq ($(findstring g++,$(CXX_COMP)),g++)
CXX_CFLAGS +=  -Wno-write-strings -Wno-ignored-qualifiers
CXX_LDFLAGS += -Xlinker --no-warn-search-mismatch
endif

SUBDIRS     = $(call find-subdirs)
PACKAGES   := ftgl opencascade qt4 glut opengl x11 math mkl
PROJ_LIBS   =  OpenMesh/Core
MODULES    := moc4 rcc cxxlib cxx

 all: build

info:
@echo "Using compiler $(filter g++, $(CXX_COMP))"
#   @echo "CFLAGS = $(CXX_LDFLAGS)"

#==  SYSTEM PART -- DON'T TOUCH  ==============================================
include $(ACGMAKE)/Rules
#==============================================================================

 run: $(cxx-exes)
./$(cxx-exes) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:09:02.173

`-lpthread`或者`-pthread`是链接器需要的。

`LD_LIBRARY_PATH`如果未在,中设置库，您可能还想告诉链接器在哪里可以找到库`-L/path/to/lib`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:52:52.723

尝试添加`-pthread`到

```
ifeq ($(findstring g++,$(CXX_COMP)),g++)
CXX_CFLAGS += -Wno-write-strings -Wno-ignored-qualifiers -pthread 
CXX_LDFLAGS += -Xlinker --no-warn-search-mismatch -pthread 
endif
```

# php - PHP 框架应该放在网络服务器的什么位置？

> ID：11074028
> 
> 赞同：-3
> 
> 时间：2012-06-17T19:06:13.880
> 
> 标签：php, codeigniter, frameworks, yii, directory-structure

有没有人知道在哪里上传 PHP 框架（如 Yii 或 CodeIgniter）最好？我应该将文件上传到我网站的子目录中，还是直接上传到服务器的主公共目录或 public_html 之类的根目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:16:12.647

就个人而言，我喜欢在我的主目录中创建文件夹来放置 Web 应用程序。然后将您的域名指向该文件夹。这使您可以在同一主机上托管其他 Web 应用程序或拥有具有单独代码的子域。

```
#myapp.com
   => ../public_html/myapp/public/

#admin.myapp.com
   => ../public_html/myappadmin/public/

#myotherapp.com
   => ../public_html/myotherapp/public/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T18:21:48.520

实际上，通常认为将框架文件/任何数据库连接凭据放在 webroot 文件夹之外是更好的做法。如果您的网络服务器以某种方式被错误配置，您不希望人们能够浏览您的所有私人凭据、模型等。

这是一篇关于如何做到这一点的好文章： [Yii 框架：moving-project-code-outside-of-webroot-plus-multiple-project-support](http://www.yiiframework.com/wiki/116/moving-project-code-outside-of-webroot-plus-multiple-project-support/)

我通常将受保护的文件夹移出我的 webroot 文件夹。我并不担心运行时文件夹，因为我只是在我的 .gitignore 文件中忽略了它。

# php - 从最近的 5 个帖子中选择所有标签分配

> ID：11074030
> 
> 赞同：1
> 
> 时间：2012-06-17T19:06:34.983
> 
> 标签：php, mysql, tags, blogs, posts

我有三张桌子：

1.  `post`(id) - 包含所有条目
2.  `tag`(id) - 拥有所有标签
3.  `assign`(post_id,tag_id) - 为帖子分配标签，一个帖子可能有多行

这是我到目前为止所拥有的：

> $sql_post = mysql_query("SELECT title,content,time,web FROM post ORDER BY time DESC LIMIT 5");
> 
> $sql_tag = mysql_query("SELECT tag.name,tag.id,post.id FROM assign LEFT JOIN tag ON assign.tag_id=tag.id LEFT JOIN post ON assign.post_id=post.id WHERE post.time>(SELECT MIN (time) FROM (SELECT time FROM post ORDER BY time DESC LIMIT 6) 二)");

我正在考虑将它们全部放入一个大数组中，所以像这样（草率的总结）：

```
array(
    post_id => array(
        "title" => "post's title...",
        "content" => "post's content...",
        "tag" => array(
            tag_id => "tag 1's name",
            tag_id => "tag 2's name 
```

...然后使用 foreach 将它们显示在我的博客上。

我需要帮助的地方是 .sql 文件`$sql_tag`。我如何使它选择最近 5 个帖子的所有作业？它只为帖子选择一个标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:13:06.027

为什么不循环浏览您感兴趣的帖子？

```
$sql_post = mysql_query("SELECT id, title,content,time,web FROM post ORDER BY time DESC LIMIT 5");

while ($row = mysql_fetch_assoc($sql_post)) {
     $sql_tag = mysql_query("SELECT tag.name,post.id FROM assign LEFT JOIN tag ON assign.tag_id=tag.id WHERE assign.post_id='".$row['id']."'");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:31:06.253

尝试：

```
SELECT
    c.id,
    c.name,
    a.id
FROM
    (
        SELECT id
        FROM post
        ORDER BY time DESC
        LIMIT 5
    ) a
LEFT JOIN
    assign b ON a.id = b.post_id
LEFT JOIN
    tag c ON b.tag_id = c.id 
```

# gcc - 使用 -L/-l 时，GCC 链接器在 64 位系统上找不到 32 位库？

> ID：11074038
> 
> 赞同：1
> 
> 时间：2012-06-17T19:07:12.243
> 
> 标签：gcc, 32bit-64bit, ld

在 64 位系统中，如果我尝试使用以下命令编译`configure`测试，它会失败：

```
$ gcc -m32 -o conftest -L/usr/lib/i386-linux-gnu/ conftest.c -lfreetype
/usr/bin/ld: cannot find -lfreetype
collect2: ld returned 1 exit status 
```

但如果我这样做是成功的：

```
$ gcc -m32 -o conftest conftest.c /usr/lib/i386-linux-gnu/libfreetype.so.6 
```

为什么第一种情况下 ld 找不到 32bit libfreetype.so.6？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:27:20.990

运行时系统和开发系统之间存在差异。链接器正在寻找`libfreetype.so`但没有找到。运行时的程序正在寻找`libfreetype.so.6`并找到它。

您应该安装 FreeType 开发包。

不过，在进行这么多努力之前，您可以通过首先检查 中`libfreetype.so`不存在的内容来验证这个假设`/usr/lib/i386-linux-gnu`，然后使用 root 权限执行以下操作：

```
cd /usr/lib/i386-linux-gnu
ln -s libfreetype.so.6 libfreetype.so 
```

然后重试第一个命令行。

如果可行，则删除刚刚创建的符号链接，然后安装 FreeType 开发包。

# php - PHP 在从测试服务器传输后不会让我访问以上 webroot？

> ID：11074040
> 
> 赞同：1
> 
> 时间：2012-06-17T19:07:30.727
> 
> 标签：php, security, root

仅提供一点背景知识：我使用 Dreamweaver CS5 编写 php 代码，使用 XAMPP apache 作为测试服务器，使用 000WebHost.com 免费托管以在远程服务器上进行测试。

我使用登录表单编写了一个应用程序，该表单请求图像并将它们与其他一些安全文件一起存储在 webroot 之上。作为我笔记本电脑上的测试服务器，所有程序都可以在 apache 上 100% 完美运行。第二次我将文件复制到我的远程服务器，任何试图访问 webroot 外部的链接都被破坏了。我可以访问我的登录页面和 webroot 下的简单处理脚本，但不能通过它。

为什么我的链接突然断开了？我使用以下文件结构三重检查了所有相对路径是否正确：

*   包括
*   图片
*   安全的
*   public_html

从public_html，我使用了文件路径：$path = '../Secure/test1.php';

感谢您的帮助，我真的需要尽快完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:39:15.330

正如 Musa 所说，您不应该能够访问“public_html”目录之外的任何内容。相反，您应该将所有其他目录放入其中，并更改（如果需要）链接的相对路径，以便它们使用 ha 结构，如下所示：

```
public_html
|
|_Includes
|
|_Images
|
|_Secure 
```

编辑：正如我在对此答案的评论中所说，我指的是您正在使用的托管公司，而不是那里的每个托管商。它是免费的，并非一切都如我们所愿:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:13:49.427

如果我没记错的话，您正在尝试将存储在私有目录中的图像直接加载到您的主页上。问题是访问者无法访问私有目录。您页面中包含的任何路径都会导致 404。在您的本地计算机上，您的网络服务器可能已经为您提供了可用的图像或链接，因为您是本地计算机；您的操作系统不会检查您是否是网络服务器并且应该能够查看文件。

您应该将应该可以访问的文件公开存储在公共文件夹中，或者您应该创建某种代理方法，例如使用 PHP 来检查请求的文件并从磁盘加载并显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T19:12:02.440

检查错误日志（如果有），当您遇到错误并且没有收到错误消息时，它们通常是您最好的信息来源。一个可能的问题可能是您的文件权限 - 确保`Secure`Web 服务器可以读取目录和其中的所有内容。

# java - 在 Hibernate 中将表映射到 XML 中的 MEMORY (HEAP)

> ID：11074043
> 
> 赞同：0
> 
> 时间：2012-06-17T19:07:34.647
> 
> 标签：java, hibernate

这个问题与缓存无关。
我需要这个内存表来进行许多小的更新和复杂的查询。
我必须将它放在多个节点之间共享的服务器上。

MySQL 有[MEMORY (HEAP) 存储引擎](http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html)，这正是我所需要的。

`<class>`在 XML 中定义 a 或 '`时，我可以告诉 Hibernate 创建这样的表吗？
还有其他解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:49:15.863

不，您不能通过 Hibernate 生成这些表。Hibernate 选择基于方言的存储引擎，对于 MySQL 5 可用的方言是[MySQL5InnoDBDialect](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/dialect/MySQL5InnoDBDialect.html)和[MySQL5Dialect](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/dialect/MySQL5Dialect.html)。

如果通过 Hibernate 生成数据库结构真的很重要，那么您当然可以自己创建方言。正如您从[MySQL5InnoDBDialect 的源代码中](http://grepcode.com/file/repo1.maven.org/maven2/org.hibernate/hibernate-core/4.1.3.Final/org/hibernate/dialect/MySQL5InnoDBDialect.java#MySQL5InnoDBDialect)看到的那样，它归结为“ENGINE = MEMORY”。

# iphone - 如何很好地将控件粘贴到 IB 中的 UIScrollView 中？

> ID：11074052
> 
> 赞同：1
> 
> 时间：2012-06-17T19:08:20.323
> 
> 标签：iphone, ios, uiscrollview, interface-builder

每次我在 UIView 中布局我的所有控件，然后忘记它们需要在 UIScrollView 中，我必须将它们剪切并粘贴到滚动视图中。

它当然可以工作，但它失去了我所有的布局，只是将所有控件相互倾倒，我不得不重新调整它们的位置。

是否有任何秘密密钥组合或我缺少的东西可以保留他们的位置，或者这就是 IB 的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:37:45.737

在选择 UIView 中的所有对象后，最接近的修复是这个 XCode 菜单命令：

**编辑器 > 嵌入 > 滚动视图**

然后将新创建的 UIScrollView 从 IB 中的 UIView 中拖出，然后删除现在为空的 UIView。嘘！

此外，在你的显示器下面有一个便条，上面写着：“你确定要将它放在 UIView 中吗？” 可能有帮助。=)

# data-structures - 什么样的数据结构符合这个描述？

> ID：11074054
> 
> 赞同：1
> 
> 时间：2012-06-17T19:08:37.777
> 
> 标签：data-structures

我需要一个数据结构，它包含唯一值（如集合），但也对它们进行排序（如优先级队列）并允许随机访问二进制搜索（如数组）。哪种类型的数据结构可以满足这些需求？我可以不用排序（最后我总是可以自己排序）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T19:10:48.417

这听起来像是一棵平衡二叉树，在其插入操作中具有唯一性限制，并实现了该`OS-SELECT`操作（参见：[算法简介](https://rads.stackoverflow.com/amzn/click/com/0262033844)，第 3 版中的第 14 章）以在给定其在 O 中的排名（“索引”）的情况下检索元素(lg n)。

建议的数据结构和增强的操作将允许您：

*   保持唯一值，在 O(lg n) 中执行插入操作
*   使用 O(lg n) 搜索操作保持元素排序
*   访问给定其在 O(lg n) 中的排名的元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:35:26.497

[TreeSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)或[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)怎么样？

*   唯一值 - 两者都只存储唯一值
*   排序 - 使用元素的自然顺序或提供给它们的自定义比较器对条目进行排序
*   随机访问 - 两者都提供随机 (O(1)) 访问。

# android - 带有奇怪文字的微调器下拉菜单

> ID：11074059
> 
> 赞同：1
> 
> 时间：2012-06-17T19:09:15.017
> 
> 标签：android, spinner, android-arrayadapter

我正在开发一个带有微调器的 Android 应用程序。

我有这个问题：

![在此处输入图像描述](../Images/eb04c5bbe2a4ba933734e8d428bfd422.png)

这是微调器数组适配器代码：

```
public class OrderArticlesAdaper extends ArrayAdapter<Article>
{
    private Context mContext;
    private int layoutResourceId;
    private ArrayList<Article> articles;

    public OrderArticlesAdaper(Context context, int listItemResourceId,
            ArrayList<Article> dbArticles)
    {
        super(context, listItemResourceId, dbArticles);

        this.mContext = context;
        this.layoutResourceId = listItemResourceId;
        this.articles = dbArticles;
    }

    public ArrayList<Article> getArticles()
    {
        return this.articles;
    }

    @Override
    public int getCount()
    {
        return articles.size();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        Log.v("OrderArticlesAdaper", "getView.postion: " + position);
        View row = convertView;
        if (row == null)
        {
            LayoutInflater inflater = ((Activity)mContext).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);
        }

        Article article = articles.get(position);
        if (article != null)
        {
            TextView formNameView = (TextView)row.findViewById(android.R.id.text1);
            formNameView.setText(new Long(article.getArticleId()).toString());
        }
        return row;
    }
} 
```

这是一个加载微调器数据的异步任务：

```
private class LoadEReportAsyncTask extends AsyncTask<String, Void, Boolean>
{
    private Context mContext;
    private ProgressDialog loadingDialog;
    private EReport eReport;
    private QAP qap;

    public LoadEReportAsyncTask(Context context)
    {
        Log.v("LoadEReportAsyncTask", "constructor");
        eReport = null;
        qap = null;

        this.mContext = context;
        loadingDialog = new ProgressDialog(mContext);
        loadingDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        loadingDialog.setMessage(getString(R.string.msg_loading_ereport));
        loadingDialog.setCancelable(false);
        loadingDialog.show();
    }

    @Override
    protected Boolean doInBackground(String... params)
    {
        Log.v("LoadEReportAsyncTask", "doInBackground");
        DBManager dbMan;
        dbMan = new DBManager(mContext);

        // Es un nuevo EReport, por lo tanto lo creo en la base de datos.
        if (eReportId == -1)
        {
            // Time In
            TextView aux = (TextView)((EReportFinalInspecActivity) mContext).findViewById(R.id.timeInVal);

            Calendar c = Calendar.getInstance();
            SimpleDateFormat df3 = new SimpleDateFormat("dd-MM-yyyy HH:mm:ss");
            String timeIn = df3.format(c.getTime());
            aux.setText(timeIn);

            eReport = new EReport();
            eReport.setOrderId(orderId);
            eReport.setQapId(qapId);
            eReport.setTimeIn(timeIn);

            eReportId = dbMan.insertEReport(eReport);
        }
        else
        {
            eReport = dbMan.getEReport(eReportId);
        }

        qap = dbMan.getQPA(params[0]);
        ordersArticles = dbMan.getOrderArticles(orderId);

        selectedArticles = new ArrayList<Article>(ordersArticles.size());

        return true; // TODO: Controlar los errores
    }

    protected void onPostExecute(Boolean result)
    {
        Log.v("LoadEReportAsyncTask", "onPostExecute");

        EReportFinalInspecActivity act = (EReportFinalInspecActivity) mContext;
        if (result)
        {
            Toast.makeText(getApplicationContext(), getString(R.string.msg_ereport_got_correct), Toast.LENGTH_SHORT).show();

            act.fillEReport(eReport, qap);
            Spinner articleSpin = (Spinner) act.findViewById(R.id.articlesSpiner);
            OrderArticlesAdaper spinAdapter = new OrderArticlesAdaper(mContext, android.R.layout.simple_spinner_item, ordersArticles);
            spinAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            articleSpin.setAdapter(spinAdapter);

            // TODO: Esto hay que cambiarlo porque siempre habrá QAP.
            if (qap != null)
                act.eReportHasQAP(true, qap.getName());
            else
                act.eReportHasQAP(false, null);
        }
        else
        {
            Toast.makeText(getApplicationContext(), getString(R.string.msg_ereport_problem), Toast.LENGTH_LONG).show();
        }

        loadingDialog.dismiss();
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:26:57.353

尝试：

```
formNameView.setText(Long.toString(article.getArticleId())); 
```

**编辑：**

这只是一个猜测，但也许 Android 正在使用 Article.toString() 填充微调器下拉文本视图，因为您的适配器处理 Article 类型的对象。

要对此进行测试，请在 Article 类中覆盖 toString。

```
public class Article {
    ...
    @Override
    public String toString() {
        mArticleId.toString(); // This is the private field holding the long id.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T20:16:50.207

这不是干净的做法，但你能试试吗

```
formNameView.setText(article.getArticleId()+""); 
```

# c++ - C ++中的“通用字符名称转换”是什么意思？

> ID：11074060
> 
> 赞同：12
> 
> 时间：2012-06-17T19:09:20.170
> 
> 标签：c++, compiler-construction, compilation

C++98 显然将此作为编译阶段的标准之一。这是什么意思，为什么最初执行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T19:19:56.600

通用字符名称看起来像`\uFFFD`or `\U0010FFFD`。这是一种在源代码中编写字符的方法，其中源代码编码不包含该字符。

C++ 指定在翻译的第一阶段将不在基本源字符集中的字符转换为通用字符名称。这样做的原因是通用字符名称和不在基本源字符集中但在源字符集中的字符得到相同的处理。

*as-if*规则意味着实际上并不需要实现来执行此通用字符名称转换，只要它将作为通用字符名称编写的扩展字符与在源中按字面出现的扩展字符相同对待。

# database - 如何将记录同时插入到两个数据库表中？

> ID：11074061
> 
> 赞同：6
> 
> 时间：2012-06-17T19:09:30.850
> 
> 标签：database, delphi, ms-access

我是 Delphi 中数据库和 db 的新手，通过在线教学材料了解两者。我正在努力解决现实生活与我找到的例子之间的差异。具体来说，考虑常见的 Books 和 Authors 多对多关系。假设您有一个 Book 表（book_id、book_title 等）、一个 Author 表（author_id、author_name 等）和一个 AuthorBook 连接表。所有三个表都将具有唯一的 ID，自动生成，作为主键。

示例始终以已插入各自表中的作者和书籍信息开头。但是，在现实生活中，我认为您会尝试同时将记录插入两个表中，*即*，用户会看到一个表单或网格，其中包含输入书名及其作者的位置。假设数据感知控件、底层 Access 数据库（或其他可通过 SQL 更改的东西），如何在 Delphi 中编写类似的代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T19:42:53.797

如果您从这些表格开始。. .

```
create table books (
  book_id integer primary key,
  book_title varchar(15) not null
);

create table authors (
  author_id integer primary key,
  author_name varchar(15) not null
);

create table book_authors (
  book_id integer not null references books (book_id),
  author_id integer not null references authors (author_id),
  primary key (book_id, author_id)
); 
```

. . . 如果你需要同时插入一本新书和一个新作者，你可以像这样执行一个 SQL 事务。

```
begin transaction;
insert into books values (1, 'First book');
insert into authors values (1, 'First author');
insert into book_authors (book_id, author_id) values (1, 1);
commit; 
```

使用单个事务可以保证所有三个插入都写入数据库，或者一个都不写入。替代品是

*   在数据库中构建一个可更新的视图，连接所有三个表，并插入到视图中，
*   在数据库中编写存储过程，并通过存储过程插入，以及
*   分别插入到每个表中，这假设即使您不知道作者，这本书的存在也很重要，反之亦然。（这可能是我为书籍和作者所做的。）

如果您要为现有作者添加新书，您将执行稍有不同的事务。

```
begin transaction;
insert into books values (2, 'Second book');
insert into book_authors (book_id, author_id) values (2, 1);
commit; 
```

我想 Delphi 就像这里的任何其他客户端语言一样。您将引用数据感知控件的某些属性，而不是文字整数，可能是“值”或“文本”属性。您将在按钮的“单击”事件中执行事务。

如果 Delphi 足够“数据感知”——使用绑定到数据库中的列和行的控件，比如 Access 的本机控件——你可能不需要执行任何 SQL 或做任何特殊的事情来保存任何自动 ID 号到 dbms生成；它将可以通过控件的属性之一访问。（Access 的表单和控件具有高度的数据感知能力；这就是*它们*的工作方式。）但是，如果您必须这样做，并且您正在使用 Microsoft 的 OLEDB 提供程序来访问 Access，您可以使用它`select @@identity`来获取通过您的连接使用的最后一个 ID 号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T01:06:42.143

如果使用 SQL，请执行以下操作（伪代码）

```
startTransaction;
INSERT INTO Book VALUES('Book1');
bookID:=SELECT LastAutoInc FROM #Dummy;
INSERT INTO Author VALUES('Author1');
authorID:=SELECT LastAutoInc FROM #Dummy;
INSERT INTO BookAuthor VALUES(bookID, autherID);
commit; 
```

关键是在*事务*`LastAutoInc`中使用函数（或数据库中的等效函数）。

# c++ - 双参数数组

> ID：11074064
> 
> 赞同：1
> 
> 时间：2012-06-17T19:09:52.857
> 
> 标签：c++, arrays

我正在读一本书，我遇到了一段代码，书中没有解释，但有一些让我很困惑的部分，粗体部分，我想知道它是关于什么的。

```
void Set::intersection(const Set& s1, const Set& s2)
{
    Set s;
    s.arrayA = new double[ s1.sizeA<s2.sizeA ? s1.sizeA : s2.sizeA];
    int i, j, k;
    while(i < s1.sizeA && j < s2.sizeA)
        if(s1.arrayA[i] < s2.arrayA[j])
            i++;
        else if (s1.arrayA[i] > s2.arrayA[j])
            j++;
        else
            s.arrayA[k++] = s1.arrayA[j++,i++]; // question is about this line

    s.sizeA= k;
    deleteA();
    copyA(s);  
} 
```

它有什么作用，为什么 [] 括号内有两个参数？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:14:32.273

括号内的两个参数是使用[逗号运算符](http://en.wikipedia.org/wiki/Comma_operator)的表达式。这种表达式的结果是最后一项的结果（`j++, i++`给 i 加一，而 j 也加一）。所以`s.arrayA[i++] = s1.arrayA[j++,i++];`真的可以转化为equal`j++, s.arrayA[i++] = s1.arrayA[i++];`

此代码与集合和[相交](http://en.wikipedia.org/wiki/Intersection_%28set_theory%29)。似乎代码表明对数组（实现集合）进行了排序。代码正在运行，如果两个集合中都存在某个元素，则将该元素放在.`s1``s2``s1.arrayA``s2.arrayA``s.arrayA`

# javascript - grails 刷新谷歌图表

> ID：11074065
> 
> 赞同：0
> 
> 时间：2012-06-17T19:10:37.747
> 
> 标签：javascript, ajax, grails, gsp

我的 grails 应用程序中有一个页面 X，其中有一个显示图表的按钮。它将使用域对象的 id 调用控制器，并且图表在另一个页面中呈现。到这里我都清楚了。

但是我必须每 20 秒**重新加载一次渲染的图表页面。**我的网站是一个私人网站，只有少数管理员用户。所以我决定使用简单的 javascript 轮询来进行刷新。这是图表`gsp`页面中的片段，我想每 20 秒重新加载一次。也许使用 javascript `setInterval`。
`<g:render id="chart" template="/building/${chartTemplate}" model="${model}"></g:render>`

我的控制器需要在创建图表时传入传感器 ID，我可以使用 java 脚本来执行此操作吗？如果是这样，我怎样才能将它从最初将它重定向到这里的控制器中获取到 javascript 函数。

这是我呈现图表的 GSP 模板。

```
<div id="linechart"></div>
<gvisualization:lineCoreChart dynamicLoading="${true}" elementId="linechart" title="${title}" 
 width="${750}" height="${450}" columns="${columns}" data="${data}"/> 
```

我使用过一些奇怪的 javascript，但无法正常工作。

```
<input type="text" id="sensorid" disabled="disabled" value="${sid }"/>
            <g:javascript>
                var int=self.setInterval("chart()",1000);
                var sensid;
                function chart(){
                    var d=new Date();
                    var t=d.toLocaleTimeString();
                    sensid = document.getElementById("sensorid").value;
                }
                ${remoteFunction(controller:"building", action:"createChart", params:"'sid=' + sensid")}
            </g:javascript> 
```

有没有办法让javascript重新加载页面。整页重新加载也很好。我对 javascript 的了解几乎为零，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:17:45.047

既然您提到重新加载整个页面是可以接受的，那么两种简单的方法是：

1) 在您的 GSP 中包含 META REFRESH 标签。例如：

```
<meta http-equiv="refresh" content="5"> 
```

这非常方便，特别是如果您不需要更改参数（例如，如果控制器处理诸如用于更新图表的当前日期/时间等任何事情）。

2）通过Javascript“setTimeout”或特定操作，调用重新加载（或“history.go(0)”或“window.location.href=window.location.href”）。

例如，一个按钮动作来测试它：

```
<input type="button" value="Reload this page" onClick="window.location.reload();"> 
```

或者每 5 秒自动执行一次，例如在这个（非常精简，所以是的，我跳过了诸如 head、body 和其他标签之类的东西。） HTML 示例：

```
<script>
setTimeout("window.location.reload()",5000);
</script>

Hello world. 
```

这使您可以更好地控制您所调用的内容，并且可以轻松修改以重定向到不同的控制器、具有新参数的相同控制器等。

# wpf - 如何使 ViewBox 在具有 ColumnSpan 的网格单元内拉伸？

> ID：11074072
> 
> 赞同：2
> 
> 时间：2012-06-17T19:12:04.060
> 
> 标签：wpf, layout

我正在创建一个测试 WPF 项目（计算器）来测试命令绑定和日志记录的实现。基本布局是一个网格。计算器的显示是一个跨越两列并拉伸以填充所有可用空间的文本框。这可以正常工作，但是当主窗体使用 ViewBox 调整大小时，我想调整显示中的文本大小。我尝试以多种方式引入 ViewBox，但是当显示中的文本调整大小时，TextBox 不再拉伸以填充所有空间。

我该如何解决这个问题？XAML 下面。

```
<Grid>
        <Grid.Resources>
            <Style TargetType="Label">
                <Setter Property="Margin" Value="5"/>
            </Style>
            <Style TargetType="TextBox">
                <Setter Property="Margin" Value="5"/>
            </Style>
            <Style TargetType="Button">
                <Setter Property="Margin" Value="5"/>
            </Style>
        </Grid.Resources>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Button Grid.Column="0" Grid.Row="1">M+</Button>
        <Button Grid.Column="0" Grid.Row="2">MR</Button>
        <Button Grid.Column="1" Grid.Row="2"
                Click="Button_Click">1</Button>
        <Button Grid.Column="2" Grid.Row="2"
                Click="Button_Click">2</Button>
        <Button Grid.Column="3" Grid.Row="2"
                Click="Button_Click">3</Button>
        <Button Grid.Column="1" Grid.Row="3"
                Click="Button_Click">4</Button>
        <Button Grid.Column="2" Grid.Row="3"
                Click="Button_Click">5</Button>
        <Button Grid.Column="3" Grid.Row="3"
                Click="Button_Click">6</Button>
        <Button Grid.Column="1" Grid.Row="4"
                Click="Button_Click">7</Button>
        <Button Grid.Column="2" Grid.Row="4"
                Click="Button_Click">8</Button>
        <Button Grid.Column="3" Grid.Row="4"
                Click="Button_Click">9</Button>
        <Button Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="5"
                Click="Button_Click">0</Button>
        <Button Grid.Column="3" Grid.Row="5"
                Click="Button_Click">.</Button>
        <Button Grid.Column="4" Grid.Row="2">=</Button>
        <Button Grid.Column="4" Grid.Row="3">+</Button>
        <Button Grid.Column="4" Grid.Row="4">-</Button>
        <Button Grid.Column="5" Grid.Row="3">x</Button>
        <Button Grid.Column="5" Grid.Row="4">:</Button>
        <Button Grid.Column="4" Grid.Row="1">C</Button>
        <Button Grid.Column="5" Grid.Row="1">CE</Button>
        <Viewbox Grid.Column="1" Grid.Row="1">
            <Label >M</Label>
        </Viewbox>
        <!-- Display -->
        <TextBox Grid.Column="2" Grid.Row="1" Grid.ColumnSpan="2"  
                 HorizontalContentAlignment="Right"
                 Text="{Binding CurrentValue}"/>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:57:41.937

```
<Viewbox Grid.Column="2" Grid.Row="1" Grid.ColumnSpan="2" >
        <TextBox Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Viewbox}, Path=ActualWidth}"    
             HorizontalContentAlignment="Stretch" 
             Text="{Binding CurrentValue}"/>
</Viewbox> 
```

这对我行得通。然后我的伴侣就走了！就这样做

```
<Viewbox Grid.Column="2" Grid.Row="1" Grid.ColumnSpan="2" >
        <TextBox Width="100"     
         HorizontalContentAlignment="Stretch"  
         Text="{Binding CurrentValue}"/>
</Viewbox> 
```

哇，效果更好

# c++ - C++ 编译中有哪些不同的标记类型？

> ID：11074073
> 
> 赞同：3
> 
> 时间：2012-06-17T19:12:08.390
> 
> 标签：c++, parsing, compiler-construction, compilation, lexer

Walter Bright 关于 C++ Compilation 的文章谈到了这两个短语

“转换为预处理令牌。”
什么是初始令牌？预处理令牌是什么样的？

“预处理令牌到 C++ 令牌的转换” 这个 C++ 令牌是什么，为什么一开始没有转换成它？

参考：[http ://www.drdobbs.com/blogs/cpp/228701711](http://www.drdobbs.com/blogs/cpp/228701711)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T19:16:50.570

预处理标记是预处理器语法的一个元素。来自 C++ 标准中的 [lex.pptoken]：

> *预处理令牌*：
> 
> *   *标题名称*
> *   *标识符*
> *   *pp号*
> *   *字面量*
> *   *用户定义字符文字*
> *   *字符串字面量*
> *   *用户定义的字符串文字*
> *   *预处理操作或穿孔*
> *   每个不能是上述之一的非空白字符
> 
> ...
> 
> 预处理标记是翻译阶段 3 到 6 中语言的最小词汇元素。

因此，“转换为预处理标记”是对翻译单元进行词法分析并识别单个标记的过程。

[lex.token] 中列出了 C++ 标记（实际上只是“标记”）：

> *令牌*：
> 
> *   *标识符*
> *   *关键词*
> *   *文字*
> *   *操作员*
> *   *标点符号*

这些仅在所有其他翻译阶段发生（宏扩展等）之后才存在。

有关整个过程的更多信息，我建议阅读 C++ 标准中的 [lex.phases]。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T23:55:34.837

**一个更简单的解释。**

而且，您可能知道，许多编译器都有一个词法分析过程，其中源代码被拆分为标记。

这个源代码：

```
void main()
{
  int x = -3 - -5;
  printf("Hello World");
} // void main() 
```

变成类似这样的东西：

```
+--------------+------------------+
| 代币 | 正文 |
+--------------+------------------+
| 无效 | “空虚” |
+--------------+------------------+
| 标识符 | “主要” |
+--------------+------------------+
| 左卷曲 | "{" |
+--------------+------------------+
| 标识符 | “整数” |
+--------------+------------------+
| 标识符 | "x" |
+--------------+------------------+
| 分配 | “=” |
+--------------+------------------+
| 减号 | "-" |
+--------------+------------------+
| 整数 | "3" |
+--------------+------------------+
| 减号 | "-" |
+--------------+------------------+
| 减号 | "-" |
+--------------+------------------+
| 整数 | "5" |
+--------------+------------------+
| 分号 | “;” |
+--------------+------------------+
| 标识符 | “打印” |
+--------------+------------------+
| 左派 | "(" |
+--------------+------------------+
| 字符串 | “你好世界” |
+--------------+------------------+
| 正确的 | ")" |
+--------------+------------------+
| 分号 | “;” |
+--------------+------------------+
| 右卷曲 | "}" |
+--------------+------------------+
| 评论 | "// 无效 main()" |
+--------------+------------------+

```

每一段被称为“令牌”的文本都有其含义。

* * *

有时，在编译过程的其他部分，标记可能会被其他标记替换：

```
+--------------+------------------+
| 代币 | 正文 |
+--------------+------------------+
| 无效 | “空虚” |
+--------------+------------------+
| 函数dec | “主要” |
+--------------+------------------+
| 左卷曲 | "{" |
+--------------+------------------+
| 类型 | “整数” |
+--------------+------------------+
| 变量dec | "x" |
+--------------+------------------+
| 分配 | “=” |
+--------------+------------------+
| 负| "-" |
+--------------+------------------+
| 整数 | "3" |
+--------------+------------------+
| 减 | "-" |
+--------------+------------------+
| 负| "-" |
+--------------+------------------+
| 整数 | "5" |
+--------------+------------------+
| 分号 | “;” |
+--------------+------------------+
| 函数调用 | “打印” |
+--------------+------------------+
| 左派 | "(" |
+--------------+------------------+
| 字符串 | “你好世界” |
+--------------+------------------+
| 正确的 | ")" |
+--------------+------------------+
| 分号 | “;” |
+--------------+------------------+
| 右卷曲 | "}" |
+--------------+------------------+
| 评论 | "// 无效 main()" |
+--------------+------------------+

```

* * *

从“减号”标记到“负号标记”和“减法标记”的转换是“预处理标记”到“最终标记”的一个很好的例子。

这是一个非常概念化的解释。您可能希望阅读有关特定编译器文档的更详细的技术信息。

干杯

# mysql - MySQL基于多行选择值

> ID：11074075
> 
> 赞同：0
> 
> 时间：2012-06-17T19:12:18.113
> 
> 标签：mysql

我有一个这样的 MySQL 表；

```
foo      bar
1        21
23       17
31       17
23       21
19       9
23       4
31       4
3        27
51       6
31       44
23       44
31       71 
```

我想要的是选择与列和列`bar`中对应*的* 所有唯一值。`23``31``foo`

即对于这张表，我会得到以下结果；

```
bar
17
4
44 
```

`17`, `4`, 和all 都被选中，因为对于所有这些值，存在**两**`44`行对应于列中的和。 **`23``31``foo`**

 **即使值`21`and `71`in`bar`对应于`23`and `31`in `foo`，它们也**不会**被选中，因为与`bar`其他数字对应的另一行中不存在相同的值。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:17:22.283

```
SELECT 
    bar
FROM 
    tbl
WHERE
    foo IN (23,31)
GROUP BY
    bar
HAVING
    COUNT(*) = 2 
```

`2`in`COUNT(*)`表示您正在检查的值的数量——`foo`在本例中为两个。例如，如果您希望`bar`s 对应于所有 (23,31,7)，请将其更改为，`COUNT(*) = 3`因为要满足三个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T19:18:22.587

试试这个 ：：

```
Select tab1.bar
from
(select bar from table where foo=/*?(say 23)*/) tab1
inner join 
(Select bar from table where foo=/*?(say 31)*/) tab2
on (tab1.bar=tab2.bar) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T19:20:16.877

这个怎么样？

```
SELECT bar
FROM mytable
WHERE foo IN (23,31)
GROUP BY bar
HAVING count(bar) >= 2 
```

## [演示](http://sqlfiddle.com/#!2/79bcc/13)**

# python - python请求模块不加载响应内容

> ID：11074078
> 
> 赞同：0
> 
> 时间：2012-06-17T19:12:26.473
> 
> 标签：python, module, python-requests

我在使用 python 请求模块对我的应用程序进行文档测试时遇到了一些问题，直到现在才能够得到它。有时会发生缺少响应主体的情况。但是当我用 ngrep 查看网络请求/响应时，我可以看到响应正文。所以它似乎被python模块忽略了。这使我的文档测试非常不稳定，因此毫无用处。

```
>>> response = requests.get('/api/v1/profile/%s/affiliations' % urllib.quote(profileId1))
>>> affiliations = response.json
>>> pprint(affiliations)
[{u'name': u'Affiliation A'},
 {u'name': u'Affiliation B'}]

Failed example:
    pprint(affiliations)
Differences (ndiff with -expected +actual):
    + None
    - [{u'name': u'Affiliation A'},
    -  {u'name': u'Affiliation B'}] 
```

ngrep 跟踪如下所示：

```
###########
T 127.0.0.1:62252 -> 127.0.0.1:9000 [AP]
GET /api/v1/profile/4fde28e80364cb830f649ee1/affiliations HTTP/1.1.
Host: localhost:9000.
Connection: close.
Accept-Encoding: identity, deflate, compress, gzip.
Accept: application/json.
User-Agent: python-requests/0.13.0.
.

##
T 127.0.0.1:9000 -> 127.0.0.1:62252 [AP]
HTTP/1.1 200 OK.
Content-Type: application/json; charset=utf-8.
Content-Length: 63.
.
[{"name":"Affiliation A"},{"name":"Affiliation B"}]
########### 
```

# serial-port - Arduino伺服平滑

> ID：11074079
> 
> 赞同：3
> 
> 时间：2012-06-17T19:12:35.223
> 
> 标签：serial-port, usb, arduino, processing

我正在使用带有处理软件的计算机发送 Arduino（通过 USB 串行连接）数据以设置一些伺服系统的角度。现在一切都很好，但是有很多震动。我使用鼠标移动来控制每个伺服旋转多少。理论上它应该和屏幕上的鼠标一样流畅，但实际上存在一些抖动。无论如何要减少这种抖动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T20:44:01.793

这其中的原因很多。

不是最不重要的，如果不是第一个，就是力量不足。在这种情况下，伺服系统通常会在固定在所需位置之前[发出咆哮](https://www.google.com/search?q=servo+growl)和振荡。如果您的伺服系统已经在驱动一个机构，您可能还需要确保它们是否提供足够的扭矩。

另一个因素 - 您的输入速度可能超过伺服的最大转速，查看规格并计算是否是这种情况。

另一个 - 串行连接不是那么快，最轻微的时间偏差可能会导致不均匀的运动。您可能希望使用记录伺服命令时间和坐标的代码来增强您的 Arduino 固件，然后根据收集的数据绘制图表 - 您将非常清楚地看到是否是这种情况。

解决这个问题的一种可能方法是实现基于 Arduino 定时器中断的伺服处理程序，只需给它所需的结束角度和到达时间，然后让它计算出来——这将使串行时序脱离图片。

而且，最后，您的伺服系统可能不是一流的质量 - 如果内部摩擦过大，无论输入多么平稳，它们都不会平稳移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:05:16.923

您可能正在尝试将角度更改为快速，您可以通过每隔几毫秒更新一次角度来解决它，而不是立即更改角度。

# vb.net - VB.Net 设计器

> ID：11074081
> 
> 赞同：0
> 
> 时间：2012-06-17T19:13:04.817
> 
> 标签：vb.net, winforms, visual-studio-2010

长话短说，我在 VB.Net 项目中制作了一个表格，其中包含许多图标和图像。我的问题是当我构建我的项目，然后回到那个表单时，突然出现了错误。

错误说：

> “‘MyProject.MyResources.Resources’类型没有名为‘myicon’的属性”。

需要明确的是，在我进行构建之前它运行良好，并且它发生在我在 Resource 上的每一个图像上。

当我选择“忽略并继续”时，我使用的所有图像都消失了。

我试图用谷歌搜索它，有人说要删除我在 Application/Bin/Debug 文件夹中的 .exe 文件，该文件正在运行。

但是这个问题有点烦人，因为每次我构建它都会再次发生。

有人可以告诉我如何解决这个问题吗？或者这是 Visual Studio 2010 的固定错误？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T06:37:12.700

我也有这个错误。

起初，我重新启动了我的 PC/笔记本电脑，它又恢复了正常。但是当我构建我的项目时，它又重新开始了。然后我尝试了这个：

项目 -> 项目属性 -> 资源 -> 图像以删除您的 png 图像。如果没有，那就去做，看看它是否在那里，否则丢弃它。

另一种解决方案是：

```
Me.Button1.Image = My.Resources.Resources.myicon 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:41:16.160

如果您删除对项目本身的引用，您可以解决这个问题，我这样做了，问题就消失了。

# html - 如何使用 Struts 2.x 指定 HTML5 属性？

> ID：11074087
> 
> 赞同：6
> 
> 时间：2012-06-17T19:13:52.113
> 
> 标签：html, struts

我在我的应用程序中广泛使用了 Struts2。现在我想添加 HTML5 属性，例如`autocorrect`和`type="email"`。我没有看到任何 HTML5 插件。`<s:textfield..>`例如，标签是否有标准方式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T10:56:17.083

您可以将`HTML5`属性直接添加到`textfield`标签中。我已经成功地完成了它`pattern`，`min`并且`max`它们在 HTML 中正确呈现。

```
<s:textfield type="number" name="..." value="%{...}" pattern="[0-9]+" min="40" max="700" /> 
```

# asp.net - Windows Azure 虚拟机网站设置

> ID：11074088
> 
> 赞同：9
> 
> 时间：2012-06-17T19:14:17.580
> 
> 标签：asp.net, windows, azure

我有一个 Windows Azure 虚拟机。我可以在虚拟机（本地主机 URL）上查看我的 ASP.Net 网站。当我 ping 我的 Windows Azure 虚拟机 IP 时，我收到超时错误。

我的域名已在 ISP 注册，但我想在我的 VM 网站上使用该域名。

是否可以？

我其实想知道：-

1.  如何在 VM 之外访问我的网站？

2.  我也想设置我的 DNS 名称。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-17T19:48:05.373

有几个问题

> 1.  如何在 VM 之外访问我的网站？

如果您创建一个基于 Windows Server的真实**虚拟机**`80`（我猜，因为您的站点是 ASP.NET），那么您需要将端口上的流量重定向到该机器。默认情况下，仅当您创建时`VM`才会`RDP`重定向到您的 VM，仅此而已。您可以在设置的**ENDPOINTS**选项卡中实现`VM`：

在您的 Windows Azure 门户中：-

1.  选择虚拟机
2.  点击端点
3.  添加端点
4.  为 ENDPOINT 输入一些名称，为公共和私有端口输入 80

![在此处输入图像描述](../Images/967d6621aa09aad101bf4a4d271f6ce6.png)

* * *

```
2\. I also would like to setup my DNS name. 
```

我通常会使用`CNAME`指向我`www.mydomain.com`的`myvmname.cloudapp.net`，就像正常的云服务开发一样。

但是，如果您真的只需要运行 ASP.NET 网站，我强烈建议您尝试使用常规的云服务方法（使用 WebRole）。

**更新**

**`CNAME`**：[http ://en.wikipedia.org/wiki/CNAME_record](http://en.wikipedia.org/wiki/CNAME_record)

我通常会为该点添加一条`CNAME`记录`www.mydomain.com``mydeployment.cloudapp.net`

您可以从您的域名注册商控制面板使用它。

# php - Wordpress 分类术语 - foreach()：未按预期工作

> ID：11074090
> 
> 赞同：0
> 
> 时间：2012-06-17T19:14:18.937
> 
> 标签：php, wordpress, foreach, custom-taxonomy

我想为自定义 Wordpress 分类中的每个术语创建一个链接。

我不明白为什么这不起作用。A`var_dump($artwork_media)`返回完整的数组，但放在`var_dump($artwork_medium)`foreach 循环中只返回第一项。此外，HTML 根本不会被输出。

```
<?php $artwork_media = get_terms( 'artwork_media' , array('taxonomy' => 'artwork_media', 'hide_empty' => 0) ); ?>

<div class="link-block">
  <ul class="artwork-list row">

  <?php foreach( $artwork_media as $artwork_medium ): ?>
    <a href="/artwork/<?php echo $artwork_medium['slug']; ?>/" class="span3"><li><?php echo $artwork_medium['name']; ?></li></a>
  <?php endforeach; ?>

  </ul>
</div> 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:47:35.157

我刚刚在检查我的 error_log 时意识到 $artwork_media 数组包含对象，而不是数组。解决方案是使用 `$artwork_medium->slug`和 `$artwork_medium->name`

# ajax - 配置 Glassfish 以启用 CORS

> ID：11074094
> 
> 赞同：2
> 
> 时间：2012-06-17T19:15:18.070
> 
> 标签：ajax, glassfish, cross-domain, cors

搜索后我找不到任何关于 glassfish3.1 和 CORS 的信息

是否可以像在 Apache2 上一样[启用 CORS](http://enable-cors.org/)

我需要从 apache 服务器到其 8080 端口上查询 glassfish 的“相同域”ajax 请求，我可以使用中间 php 脚本，但它似乎减慢了一切

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:00:48.030

看起来没有：http: [//java.net/jira/browse/GLASSFISH-16049](http://java.net/jira/browse/GLASSFISH-16049)。

在此错误中，请查看 4.0 的修复版本 - 产品线中的下一个版本。

使用您拥有的任何其他常规方法。例如，配置 Apache mode_rewrite 以响应 HTTP 选项动词。

最好的

# inventory - 库存 - 计算可用于 POS 的数量

> ID：11074097
> 
> 赞同：0
> 
> 时间：2012-06-17T19:15:36.370
> 
> 标签：inventory

从我读过的

现有数量是库存物品的实际数量[http://www.businessdictionary.com/definition/quantity-on-hand.html](http://www.businessdictionary.com/definition/quantity-on-hand.html)

可用数量是现有数量减去出库项目（例如订购数量） [http://community.intuit.com/posts/quantity-on-hand-vs-quantity-available-2](http://community.intuit.com/posts/quantity-on-hand-vs-quantity-available-2)

这仍然适用于 POS 吗？由于物品是立即取货，POS系统中是否有出库物品？

如果不是，这是否意味着 POS 的 QtyOnHand = QtyAvailable？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:19:33.807

通常在 POS 中，您只有可用数量。

WMS（仓库管理系统）和其他系统（如电子商务等）必须控制手头的数量和分配的物品，以停止“超卖”产品，但由于 POS 最常用于销售本身，这些控制应该已经完成​​，特别是如果它是在实体店中，因为客户显然将物品握在他/她的手中。:)

# memory - 分段内存与平面内存

> ID：11074099
> 
> 赞同：20
> 
> 时间：2012-06-17T19:16:22.597
> 
> 标签：memory, assembly, flat

我只是不明白。任何手册都太技术性了。什么是平面内存和分段内存？寻址内存的方式，在内存中组织字节的方式？其中哪一个最适合 32 位计算机？谁能解释一下？实模式和保护模式与平面或分段内存有什么关系？谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-17T19:36:18.607

如果您只对在现有 32/64 位操作系统上运行的应用程序感兴趣，您可以简单地忘记分段内存。在 32 位操作系统上，您可以假设您有 4 GB 的“平坦”内存空间。Flat 意味着您可以使用 32 位值和寄存器来操作地址，正如您所期望的那样。

在 16 位处理器上，我相信一个地址是 20 位宽，你不能将它存储在一个寄存器中，所以你必须将一个基数存储在一个寄存器中，并且要指定一个实际地址，你必须添加一个偏移量那个基地。（如果我没记错的话，基数乘以 16，然后加上偏移量得到实际地址。）这意味着您一次只能寻址 64 KB；内存必须以 64 KB 块“分段”。

老实说，我认为初学者仍然听说它的唯一原因是很多旧的 16 位教程和书籍仍然存在。真的不需要了解程序在汇编级别是如何工作的。现在，如果您想学习操作系统开发，那就另当别论了。由于 PC 以 16 位模式启动，因此您至少需要学习足够的知识才能激活平面 32 位模式。

刚刚注意到您还询问了实模式与保护模式。实模式是 MS DOS 使用的模式。任何程序都可以访问任何硬件功能，例如直接与显卡的控制器对话以打印某些东西是很常见的。它没有引起任何问题，因为它不是多任务操作系统。

但是在任何现代操作系统上，普通程序都不会直接访问硬件，它们甚至不会直接访问内存。操作系统管理硬件并决定哪个进程在处理器上运行。它还为每个进程管理一个虚拟地址空间。这种功能在保护模式下可用，我相信它是 386 附带的，它是 PC 的第一个 32 位处理器。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-18T06:43:16.460

使用地址（内存、I/O、内存映射 I/O 等）访问某些内容的指令有时会提供完整的（从处理器执行层的角度来看）地址，有时它们会提供偏移量。例如，您的近距离或相对跳转程序计数器是基地址，而指令提供了该基地址的偏移量，将两者相加，您将获得地址（在该级别）。

采用 16 位系统，其中有 16 位寄存器和 64KByte 的最大地址空间限制。扩展该内存的一种非常简单的方法是分段。指令中的寄存器不是包含整个地址的寄存器，而是包含一个基址的偏移量，很像相对于 pc 的指令。除了在这种情况下，还有另一个寄存器用作基地址。您可以在许多希望轻松扩展其地址范围而无需对内核进行太多修改的架构中看到这一点。（可以在内存控制器中完成，无需修改内核）在 x86 的情况下，有几个寄存器。一个用于扩大执行范围，分支。另一个扩展数据访问、加载和存储的范围。非 pc 相对分支的地址是使用左移 4 位的代码段计算的，然后添加到指令中指定的寄存器中。对于与 pc 无关的加载和存储，使用了数据段寄存器，左移 4 位添加指令中指定的寄存器。所以如果你想寻址0x123456789，你可以让段寄存器包含0x12340000，用于寻址的寄存器包含0x56789，或者段0x12345678和gpr包含0x9。pc相对寻址当然是segment + pc + offset。所以如果你想寻址0x123456789，你可以让段寄存器包含0x12340000，用于寻址的寄存器包含0x56789，或者段0x12345678和gpr包含0x9。pc相对寻址当然是segment + pc + offset。所以如果你想寻址0x123456789，你可以让段寄存器包含0x12340000，用于寻址的寄存器包含0x56789，或者段0x12345678和gpr包含0x9。pc相对寻址当然是segment + pc + offset。

这导致采用各种内存模型。小，小，中，大，大。您可以想象最小的模型将具有规则或假设在 x86 的情况下所有内容都在 64K 内存空间内，编译器和您的代码永远不必担心段寄存器，假设它们保持不变。对于较大的模型或当使用远指针到达更远没什么大不了时，您设置数据段，然后设置数据偏移并执行加载或存储。对于代码，您可以想象它有点困难，因为一旦您更改代码段寄存器，它就会影响您获取指令的整体地址。您可能需要一个硬件解决方案来允许分支修改段和偏移量，或者您可以在代码中进行（如果硬件允许）。我暂时不会把你和那个混为一谈。

每当您在代码中有一个数组时：

```
unsigned char abc[123]; 
```

那基本上是一样的。基地址，数组在内存中开始的地址就像你的段，索引是你的偏移量。如果上面的 abc 位于地址 0x1004，则 abc[5] 位于地址 0x1004+5 = 0x1009。不像 x86 段：偏移地址那样移动，而是添加基数和偏移量的相同概念。您没有添加的某些分段架构，某些寄存器中的某些位是高位。在这些系统之一上获取地址 0x12345，0x1 必须在段中，0x2345 在 16 位 gpr 中。您可以将其视为移位并根据需要添加，但与 x86 段：偏移不同，您也可以将其视为移位和或。

平坦的内存空间有点像错觉，尤其是在 x86 系统中。x86 计算机，32 位甚至许多 64 位，将插入卡的平面内存空间限制为总共 1Gig，对于总共有 4 Gig 地址空间的 32 位系统来说很有意义，并且这就是为什么其中一些给你一个 3 gig 的限制，或者给你 4 gig 的错觉，但是为了插卡而砍掉了一些。（您在主板上的许多项目以及实际的插卡都在这个空间中）。根据视频卡和分辨率等，您有时无法将整个帧缓冲区放入该外围空间的子集中，因此您必须对访问进行分段。BIOS 可能已将地址 0x80000000 作为 x86 地址空间中的基地址，然后在视频卡的其他寄存器中指定视频卡地址空间内的地址。出于演示目的，假设您在 x86 地址 0x80000000 处获得了一个 16MByte 的窗口。16Mbytes 是 0x01000000。如果您想访问视频内存中的地址 0x04321888，您可以想象必须将视频卡中的段寄存器设置为 0x04，然后在 x86 地址空间（也是 pci(e) 地址空间）中使用地址 0x80321888。

这里的底线是从这里取一些位，从那里取一些位，把它们放在一起，这就是目标的地址。在处理外设时，无论是显卡还是板载 I/O 控制器，或者 pci 或 pcie 控制器，您都必须学会从目标地址空间的角度进行思考。从您的程序的角度来看，处理器有一个地址空间。mmu 可以并且确实将其打乱到物理地址空间中，然后您拥有您的 pcie 地址空间，然后通过 pcie 访问的外围设备拥有自己的地址空间。英特尔和基于英特尔的 pc 世界所做的是使处理器的物理地址空间和 pcie 地址空间相同。mmu 中的虚拟与物理加扰仍然存在，进入外设地址空间的窗口仍然存在，

真实和受保护与访问有关。例如，在 C 中，您可以创建指针、更改指针并创建您想要的任何地址，这是否意味着您可以在另一个应用程序内存或内核内存中四处寻找？理想情况下，您不想让这种情况发生，因此当您为该应用程序执行指令时，您在一个虚拟机中的每个应用程序，如果您愿意，每个内存访问（无论是代码还是指令）都会经过过滤器。该过滤器检查该访问是否在程序允许的空间内，如果它超出该空间，则发生异常（认为中断）该异常允许内核（没有这些限制或具有不同的限制）决定允许该访问，或者虚拟化对某物的访问，或向用户发出警告（一般保护故障）。以像 vmware 这样的实际虚拟机程序为例，允许虚拟化程序在处理器上实际运行指令，当该虚拟化程序访问它认为是显卡的地址时，发生保护故障，vmware 驱动程序/应用程序（想想内核级别）获取该地址并伪造视频卡响应并将控制权返回给应用程序。让指令在金属上执行允许更快的虚拟化，而不是模拟每个处理器指令。这是极端情况，即使您正在阅读本文的 Web 浏览器也已被虚拟化，因此它认为它有一个基于诸如 0x000 或 0x8000 之类的基地址的内存空间，您将特定操作系统的每个程序编译到相同的平面虚拟内存空间，操作系统负责将地址从虚拟地址更改为物理地址。您的网络浏览器对其地址 0x8000 的访问可能是物理地址 0x12345678，而您的 mp3 播放器程序 0x8000 访问可能是物理地址 0x2345678，但对于这两个应用程序，它们的指令都在计算 0x8000。

问什么是最好的总是一个相对的术语，一个人最好是另一个人最差。你必须为自己定义最好的和最坏的。势头和公众舆论将 x86 推向了平坦的内存空间，或者至少从程序员的角度来看是平坦的内存空间的错觉，因此您在顺应潮流时会遇到更少的麻烦。

我建议购买一份 8086/8088 编程器和硬件参考手册，几块钱就能买到。

[http://www.amazon.com/Manual-Programmers-Hardware-Reference-240487-001/dp/1555120814/ref=sr_1_1?ie=UTF8&qid=1340000636&sr=8-1&keywords=8088+programmers+reference](https://rads.stackoverflow.com/amzn/click/com/1555120814)

拿一个像 pcemu 这样的模拟器（我有一个为此目的的克隆[http://github.com/dwelch67/pcemu_samples](http://github.com/dwelch67/pcemu_samples)) 并使用指令集，在虚拟化、保护等之前的老派。回到上面计算的段和偏移量时，将段左移四位并添加偏移量（这在本手册中都有描述）。从那以后，每一代人都在尝试改进，同时尝试反向兼容。这当然帮助了利润，但把处理器变成了讨厌的野兽。你最好忘记 x86 的细节并学习一些更干净的系统，因为 x86 的发展方式，你将获得最小的收益，例如尝试用 asm 编写一些东西而不是编译的代码。由于来自不同系列的处理器以不同的速度执行相同的代码，因此新一代通常以更慢的速度执行来自先前的手动调整的代码。您不能手动调整某些东西以在所有平台上快速运行，而不是比编译器更快，因此只需将 x86 asm 代码留给编译器即可。在没有这些问题的健全平台上工作，并且可以根据需要进行调整或制作更好的编译器等。

# matlab - 为什么for循环只读取矩阵的最后一个元素 - Matlab

> ID：11074100
> 
> 赞同：0
> 
> 时间：2012-06-17T19:16:32.703
> 
> 标签：matlab, for-loop

嗨，我有以下代码

```
for j = 1:2,

    for i = 1:24,

        for K = 1:3,

            for M = 1:3,
                PV_output(:,:,K) = real(PV_power_output(:,:,K));
                WT_output(:,:,M) =  WT_power_output(:,:,M);
                PVenergy = sum(sum(PV_output(:,:,1)));
                WTenergy = sum(sum(WT_power_output(:,:,1)));
                f = [((CRF*CC_PV)/PVenergy)+OM_PV; ((CRF*CC_WT)/WTenergy)+OM_WT];
                A = [-PV_output(j,i,K) -WT_output(j,i,M)];
                b = -Demand(j,i);
                lb = zeros(2,1);
                ub = [max_PV_area/PV_area max_WT_area/WT_area]';
            end
        end
    end
end 
```

`PV_output`并且`WT_output`是 365 x 24 矩阵，其中包含我试图单独检查的三组不同矩阵。`Demand`是 365 x 24 矩阵。

当我运行`linprog`时，它似乎只读取上述矩阵的最后一个元素，并且当我检查大小时`A`，`b`我得到一个 1x2 和 1x1，而我应该得到一个 365x24x3 和 365x24

有什么帮助吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:28:36.000

当你这样做时

```
 A = [-PV_output(j,i,K) -WT_output(j,i,M)]; 
```

您在每次迭代时将 A 分配为 1 x 2 数组。`-PV_output(j,i,K)`和返回的变量`-WT_output(j,i,M)` 是标量，所以你不应该期望 A 是 1 x 2 大小的任何东西。

相似地

```
 b = -Demand(j,i); 
```

`Demand`只返回矩阵的标量元素，`b`大小为 1 x 1。

您似乎希望将这些值用作更大矩阵中的元素，因此您应该将它们分配给矩阵 A 和 b 中的适当索引。

类似的东西

```
 b(index1,index2) = -Demand(j,i); 
```

其中 index1 和 index2 指定`b`您希望它们存储的位置。通过将值存储在矩阵 b 中的特定（适当）元素处，而不是像当前那样每次都覆盖它，您应该通过在每次迭代中计算出适当的索引来获得所需的结果。同样，如果 A 是 3 维数组，那么您需要类似但具有 3 个索引的东西。

我不能给你一个代码解决方案，因为你在这里有 4 个循环，我不清楚你到底存储了什么数据。也许其他人可以为您提供准确的线路解决方案，但如果不是，我希望这可以为您提供足够的帮助，让您了解需要做些什么来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T20:10:24.940

```
 for j = 1:2

for i = 1:24
   for K = 1:3
      for M = 1:3

   PV_output(:,:,:) = real(PV_power_output(:,:,:));
         WT_output(:,:,:) =  WT_power_output(:,:,:);

         PVenergy = sum(sum(PV_output(:,:,1)));
         WTenergy = sum(sum(WT_power_output(:,:,1)));

          f= [((CRF*CC_PV)/PVenergy)+OM_PV; ((CRF*CC_WT)/WTenergy)+OM_WT];

         A(:,:,:) = [-PV_output(:,:,K) -WT_output(:,:,M)];

            b(:) = -Demand(j,i);

           lb = zeros(2,1);

           ub = [max_PV_area/PV_area max_WT_area/WT_area]';

      end
   end 
```

结束结束

```
 x(:,:,:) = linprog(f,A,b,[],[],lb,ub) 
```

# md5 - 使用 MD5 哈希作为数据库的主键？

> ID：11074104
> 
> 赞同：0
> 
> 时间：2012-06-17T19:17:00.120
> 
> 标签：md5

首先，请温柔一点，我对数据库设计知之甚少。我正在与 Splunk 合作，根据客户呼叫信息（呼叫详细记录）生成记录。由于体积，我不能真正使用 splunk 来处理一些数据，因为它是非关系的。所以我会把数据拿进来，用 splunk 做一些简单的警报，监控奇怪的模式，做一些其他更高级的事情。我最容易获得的数据源已经在系统上近乎实时地可用。我想做的是获取传入的 SIP 呼叫 ID（根据 RFC 定义必须是全局唯一的），传出的 SIP 呼叫 ID（同样，必须是全局唯一的），当前的 unix 纪元时间，然后随机生成1-2^31 的数字，将它们连接在一起，然后将结果的 md5 哈希值用作主键。我们遇到碰撞的可能性有多大？任何关于其他方法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:26:24.603

发生冲突的可能性约为 2^128 分之一，但由于 md5 有点损坏，如果对手知道您的 RNG 的某些信息，他们可能会通过某种方式制作合适的调用 ID 来更频繁地创建冲突。我认为您可以直接使用该创造的价值而无需散列，或者以其他方式考虑碰撞可能导致的风险并为此制定计划。

# android - 让滚动视图填满整个屏幕，除了屏幕底部的相对布局的高度

> ID：11074106
> 
> 赞同：2
> 
> 时间：2012-06-17T19:17:01.500
> 
> 标签：android, scrollview, fill

我被困在如何用顶部布局填充整个屏幕，除了底部布局所需的空间。我正在使用相对布局来根据需要放置布局，但我希望我的顶视图占据除底视图所需空间之外的所有空间（顶视图高度将根据用户输入而变化）。请参阅下面的 xml。现在，我的顶视图只占用滚动视图内的线性布局所需的空间 + myTopButton 占用的空间。XML:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/bg"
        android:paddingBottom="10dip"
        android:focusable="true"
        android:focusableInTouchMode="true">
   <RelativeLayout android:id="@+id/topLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="80dip"
        android:layout_alignParentTop="true">
     <ScrollView android:id="@+id/myscroll"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginBottom="65dip"
        android:paddingRight="2dip"
        android:paddingLeft="6dip"
        android:fillViewport="true">
        <LinearLayout style="@style/LinearLayoutInner"
        android:orientation="vertical">
        </LinearLayout> 
    </ScrollView>
    <LinearLayout android:orientation="horizontal"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentBottom="true">
            <Button android:id="@+id/search"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
                android:layout_marginBottom="10dip"
                android:text="@string/search_viewdoses"/>
    </LinearLayout>
   </RelativeLayout>
   <RelativeLayout android:id="@+id/bottomLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginTop="-60dip"
        android:layout_alignParentBottom="true">
            <TextView android:id="@+id/myText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="@string/mytext"></TextView>
            <EditText android:id="@+id/myEdit" 
                android:layout_width="80dip"
                android:layout_height="50dip"
            android:layout_alignParentBottom="true"
            android:layout_toRightOf="@+id/myText"
            android:singleLine="true"
            android:inputType="numberDecimal"></EditText>
            <Button android:id="@+id/save"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_marginBottom="10dip"
                android:text="@string/mybuttontext"/>
    </RelativeLayout>
</RelativeLayout> 
```

现在屏幕：![在此处输入图像描述](../Images/129eef418e48a1e24b8e490c05f9a035.png)

想要的屏幕：![在此处输入图像描述](../Images/c8779d45e83482f7b77f111a59afc117.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T19:29:03.313

只需从中删除底部边距`topLayout`并添加`android:layout_above="@+d/bottomLayout"`到它。不过，您必须在 xml中定义`bottomLayout`之前的内容。`topLayout`我认为您还应该从`bottomLayout`.

实际的滚动视图和按钮也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-07T06:37:15.227

在布局标签中

```
 <RelativeLayout android:id="@+id/topLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="80dip"
    android:layout_alignParentTop="true"> 
```

只需删除`android:layout_marginBottom="80dip"`，你应该准备好了。它是在顶部底部产生丑陋、不需要的空间的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T19:24:38.593

尝试穿上`android:layout_weight="1"`ScrollView。

# android - JNI移植的libusb-compat在应用程序中找不到设备，可以在应用程序之外

> ID：11074108
> 
> 赞同：1
> 
> 时间：2012-06-17T19:17:41.377
> 
> 标签：android, usb, libusb

我有一个内置 USB 主机支持的三星 Galaxy SII，还有一个也有 USB 主机“被入侵”的摩托罗拉 Droid（原版）。SGSII 运行 Android 3.x，Droid 运行 2.x。

我将 libusb-compat 移植到 Android（主要是交叉编译它），这样我就可以插入一个外部设备并使用它，它有一个需要 libusb-compat 的驱动器。该驱动程序也被移植到 Android 并链接到我的 libusb-compat 端口。最重要的是一个应用程序，它有一个 JNI 接口来使用驱动程序和 libusb-compat。

在运行 Android 2.x 的 Droid 上，所有这些都可以完美运行。我可以用我移植的驱动程序初始化设备，它可以使用 libusb-compat 来做它的事情。

但是，在运行 3.x 的 SGSII 上，调用 libusb-compat 以列出 USB 设备、查询它们等都失败了。在我的应用程序中运行的 Libusb-compat 能够找到根 USB 总线，但 USB 设备列表总是空的，并且对它们的查询失败。

现在，如果我编译一个链接到 libusb-compat 的简单独立可执行文件，并尝试列出 USB 设备并在我的应用程序*之外*运行它（例如，在 adb shell 中），它能够找到根总线和所有SGSII 上的 USB 设备。这让我相信应用程序在 Android 3.x 上运行的沙箱阻止了 libusb-compat 访问 USB 设备。可能是支持 USB 主机的设备上的权限问题。

我尝试将此添加到我的清单中，但没有帮助：

```
<uses-feature android:name="android.hardware.usb.host" /> 
```

是否有什么突出我做错或需要添加 libusb-compat 在我的应用程序中工作？同样，如果我使用我的 libusb-compat 驱动程序的 ndk 构建一个独立的应用程序，它就可以工作。

# java - 哪个 noSQL DB 是合适的

> ID：11074111
> 
> 赞同：1
> 
> 时间：2012-06-17T19:17:57.990
> 
> 标签：java, database, nosql, embeddable

我有一个应用程序正在接收数千个（比如 50,000 个）主题的数据。

每个数据元组包含一个 subjectId 和文本数据。

我正在寻找一个可嵌入的 Java 数据库，它将为我提供以下功能：

*   快速存储数据（每秒数千个元组）。
*   为 subjectId 提供文本数据的查找。
*   （提供有效的方法）删除超过 X 天的数据。
*   必须嵌入到 Java 进程中

理想情况下，Berkeley JE 数据库似乎满足我的要求，除了它是一个键值数据库并且我的数据本质上是多值的。我不确定这是否会成为重复数据的性能问题。

这个简单的元组模式还有哪些其他可嵌入选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:37:18.680

如果您希望数据库为您索引数据，您将需要一个面向文档的数据库。如果您只需要按键查找，您可以使用 kyro 或协议缓冲区之类的东西自己序列化数据。如果您可以使用模式，SQLite 或 Derby 可能是很好的解决方案。OrientDB 或 Neo4j 是可以嵌入的图形数据库。OrientDB 不太成熟，但有更好的许可证。Cassandra 是一个可以嵌入式运行的面向列的存储。LevelDB 和 Bitcask 是数据库库。两者都有很好的许可证，但会是其他语言的端口，可能没有完整的功能集。如果您无法在内存中设置完整的密钥，LevelDB 是一个更好的选择。

# c# - C#：在 UserControl WinForm 中加载带有图像的 TreeView

> ID：11074115
> 
> 赞同：1
> 
> 时间：2012-06-17T19:19:33.367
> 
> 标签：c#, xml, winforms, visual-studio-2010, treeview

在 Winform 中，我有一个 UserControl TreeView，它从 XML 文件加载实时数据。在 treeView 中成功加载 XML 文件。

我想为不同的数据集生成具有不同图像的 TreeView。此链接说明为特定数据数组生成树视图。[http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.imagelist][1]

如何为每个父节点和子节点添加不同的图像，在 XML 中，我想为`Global` `Files` `Section`和`Data`. 请用一些片段向我解释。

```
<Global>
 <Files name="Bit_RunvsDepth" >
      <Section name="Linguini">
        <Data>measured depth</Data>
      </Section>
      <Section name="Process">
        <Data>Tree</Data>
        <Section name="Arguments">
          <Data>None</Data>
        </Section>
        <Section name="Extras">
          <Data>0.01</Data>
          <Data>Foodg</Data>
        </Section>
      </Section>
      <Section name="Color">
        <Data>0.0</Data>
      </Section>
      <Section name="MinScale">
        <Data>0</Data>
      </Section>
      <Section name="MaxScale">
        <Data>1000</Data>
      </Section>
    </Files>
</Global> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:34:53.587

TreeNode 类不是密封的，因此您可以构建自定义节点类型的层次结构。

```
 abstract class CustomTreeDataNode : TreeNode
     {
        public CustomTreeDataNode()
        {
        }   

        protected void ReadChildNodes<T>(XmlNode parent, string childNodeName)  
             where T: CustomTreeDataNode, new()
       {
              foreach(XmlNode node in parent.SelectNodes(childNodeName))
              {
                  T item = new T();
                  item.Fill(node);
                  Nodes.Add(item);
              }
       }

        public void Fill(XmlNode node)
        {
             Nodes.Clear();
             InitProperties(node);
        }

        protected abstract void InitProperties(XmlNode node);

     }

     class RootNode : CustomTreeDataNode
     {
        protected override void InitProperties(XmlNode source)
        {
            Text = "Root";
            ItemIndex = ROOT_ITEMINDEX;
            SelectedIndex = ROOT_SELECTEDINDEX;
            ReadChildNodes<FileNode>(source, "Files"));
        }
     }

     class FileNode : CustomTreeDataNode
     {
        protected override void InitProperties(XmlNode source)
        {
            Text = source["name"];
            ItemIndex = FILE_ITEMINDEX;
            SelectedIndex = FILE_SELECTEDINDEX;
            ReadChildNodes<SectionNode>(source, "Section"));
        }
     }  

     class SectionNode : CustomTreeDataNode
     {
        protected override void InitProperties(XmlNode source)
        {
            Text = source["name"];
            ItemIndex = SECTION_ITEMINDEX;
            SelectedIndex = SECTION_SELECTEDINDEX;
            ReadChildNodes<DataNode>(source, "Data"));
        }
     }  

     class DataNode : CustomTreeDataNode
     {
        protected override void InitProperties(XmlNode source)
        {
            Text = source.Text;
            ItemIndex = DATA_ITEMINDEX;
            SelectedIndex = DATA_SELECTEDINDEX;
        }
     }  

     ...
     RootNode root = new RootNode();
     root.Fill(rootXmlNode); 

     treeView1.Nodes.Add(root); 
```

绘制图像 TreeView 依赖于 ImageView 组件。[此链接](http://msdn.microsoft.com/en-us/library/system.windows.forms.imagelist.images)说明如何以编程方式加载图像

# asp.net-mvc - ASP.Net WebAPI 区域支持

> ID：11074117
> 
> 赞同：37
> 
> 时间：2012-06-17T19:19:37.897
> 
> 标签：asp.net-mvc, asp.net-web-api

我正在尝试向我的 asp.net 4 RC 站点添加一些 WebAPI 支持，并希望将其放入一个区域。我已经看到有人设法在测试版（[这里](http://netmvc.blogspot.co.uk/2012/03/aspnet-mvc-4-webapi-support-areas-in.html)）上运行它，但老实说，不知道我在 RC 中在做什么。

有没有人设法为 WebAPI 的 RC 添加区域支持？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-18T07:18:53.603

您可以将 Api 控制器放在您喜欢的任何文件夹中，不需要像 MVC 那样创建区域。我通常做的是在 MVC 站点的“Controllers”文件夹中创建一个子文件夹“Api”。只需为您的 Api 控制器注册路由，它就会工作。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-02-20T15:16:29.597

**Web API URL 中的支持区域**

您只需注册 Web API 路由。

但是这个路由必须在其他路由之前注册。否则，对 Web API 的请求将被错误地处理，就好像它们是 MVC 操作一样。

当您使用区域时，您必须考虑到区域路由的注册通常在非区域路由的注册之前完成。即，`Global.asax Application_Start`您有这些代码行，按以下顺序：

```
AreaRegistration.RegisterAllAreas();
// ...
RouteConfig.RegisterRoutes(RouteTable.Routes); 
```

第一个方法调用将调用`RegisterArea`每个找到的`xxxAreaRegistration`类的方法。而且，在这个配置中，你通常会有这样的东西：

```
context.MapRoute(
    "AreaName_default",
    "AreaName/{controller}/{action}/{id}",
    new { action = "Index", id = UrlParameter.Optional }
); 
```

如果您想在此区域内拥有 Web API 控制器，则必须在此区域之前添加 Web API 路由，如下所示：

```
context.Routes.MapHttpRoute("AreaName_WebApiRoute",
    "AreaName/Api/{controller}/{id}",
    new { id = RouteParameter.Optional }); 
```

在这种情况下，我假设您想使用这样的 url 调用您的 API 控制器`/AreaName/Api/ControllerName/Id`：

我通常将 Web API 控制器存储在`Api`area 文件夹内的文件夹中，但将它们放在哪里并不重要。考虑到 API 控制器无论在哪里都可以找到，如果您在不同的区域为它们使用相同的名称，您会遇到冲突：它们是通过类名找到的，而不是完全限定的（命名空间）姓名。

简而言之：对区域没有真正的支持，但是您可以将它们包含在区域内自己的文件夹中，并在 URL 上提供它们，这些 URL 看起来就像区域内的 MVC 控制器的那些。

**支持路由命名空间**

如果您想在不同的区域拥有相同名称的 Web API 控制器怎么办？如果您真的想为 Web API 控制器的区域提供真正的支持，您必须实现并注册一个自定义[IHttpControllerSelector](https://stackoverflow.com/questions/11886197/what-is-the-equivalent-of-defaultcontrollerfactory-in-asp-net-web-api)。

你有一个很好的解释，这里有一个示例实现：[ASP.NET Web API: Using Namespaces to Version Web APIs](https://blogs.msdn.microsoft.com/webdev/2013/03/07/asp-net-web-api-using-namespaces-to-version-web-apis/)

此示例使用名称空间进行版本控制，但可以稍微修改代码以支持区域名称空间。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-17T17:41:33.253

ASP.NET MVC 4 不支持区域中的 WebAPI。

可以扩展`DefaultHttpControllerSelector`来执行此操作，但您应该仔细阅读这篇出色的（且简短的）文章：[ASP.NET MVC 4 RC：让 WebApi 和 Areas 玩得很好](http://blogs.infosupport.com/asp-net-mvc-4-rc-getting-webapi-and-areas-to-play-nicely/)。它工作得很好。

我已经用便携式区域（[MVCContrib](http://mvccontrib.codeplex.com/)）成功地测试了这个解决方案。基本上，您必须：

*   将扩展方法“AreaRegistrationContextExtensions”放在 PA 项目中（`PortableAreaRegistration.RegisterArea()`方法需要）：您可以将静态类复制到 PA 项目中，但我建议将其放入共享项目中。
*   将类“AreaHttpControllerSelector”（继承自`DefaultHttpControllerSelector`）添加到宿主项目中。
*   将以下行添加到 Global.asax App_Start()：

    GlobalConfiguration.Configuration.Services.Replace(typeof(IHttpControllerSelector), new AreaHttpControllerSelector(GlobalConfiguration.Configuration));

对于 的实现有一个警告`AreaHttpControllerSelector`：区域名称必须对应于 ApiController 的命名空间。例如，这是我的`PortableAreaRegistration`课：

```
namespace PortableAreasSample.MembershipArea
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using MvcContrib.PortableAreas;
    using System.Web.Http;
    using System.Web.Mvc;
    using System.Web.Routing;

    public class MembershipRegistration : PortableAreaRegistration
    {
        public override void RegisterArea(System.Web.Mvc.AreaRegistrationContext context, IApplicationBus bus)
        {
            // GET /MembershipArea/GetAllUsers
            context.MapHttpRoute("MembershipApi",
                AreaName + "/{controller}/{id}",
                new { area=AreaName, controller = "GetAllUsers", id = RouteParameter.Optional });
        }

        public override string AreaName
        {
            get { return "MembershipArea"; }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-18T18:46:41.543

确保在默认路由之前注册 API 路由，否则默认路由会贪婪地捕获所有内容！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-29T15:24:18.797

只是为了完成，存在以下属性，这可以帮助人们摆脱束缚（谁不会遵循上面 eric 的建议......）

```
[Route ("api/interesting/{id?}")]
[RoutePrefix("api/interesting")] 
```

[http://www.asp.net/web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2](http://www.asp.net/web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2)

# c# - WPF 交互事件触发器

> ID：11074119
> 
> 赞同：1
> 
> 时间：2012-06-17T19:19:57.650
> 
> 标签：c#, wpf, combobox, ribbon

首先是导致问题的代码：

```
<my:Ribbon x:Name="ribbon">
    <interactivity:Interaction.Triggers>
        <interactivity:EventTrigger EventName="SelectionChanged">
            <command:EventToCommand Command="{Binding RibbonTabSelectedCommand}" PassEventArgsToCommand="True" />
        </interactivity:EventTrigger>
    </interactivity:Interaction.Triggers>
    <my:RibbonTab Header="Chart" Tag="Chart"
                  IsEnabled="{Binding SelectedSearchResult, 
                  Converter={StaticResource nullToBoolConverter}}">
        <my:RibbonGroup>
            <ComboBox ItemsSource="{Binding SelectedSearchResult.Values}" 
                      SelectedValue="{Binding SelectedFrequency, Mode=TwoWay}">

            </ComboBox>
        </my:RibbonGroup>
    </my:RibbonTab>
</my:Ribbon> 
```

我想要做的是使用 MvvmLight 框架处理 RibbonTab 的 SelectionChanged，并将事件转换为视图模型命令。它工作得很好。问题是在添加 ComboBox 后，组合框的选择更改也由此代码处理。我不希望这种情况发生。功能区是来自 Microsoft WPF 功能区的功能区。

我试过这个，但没有奏效：

```
<interactivity:EventTrigger EventName="SelectionChanged" SourceName="ribbon" SourceObject="{Binding ElementName=ribbon}" > 
```

有任何想法吗？谢谢！

# html - 在 Div 中将文本和图像并排放置 - CSS

> ID：11074123
> 
> 赞同：2
> 
> 时间：2012-06-17T19:21:32.420
> 
> 标签：html, css, wrapper, image

我试图在包装器 div 内的图像旁边放置一段文本，但到目前为止我所有的尝试都失败了，导致我使用图像来完成我想要做的事情。为了避免混淆，我不会在代码中发布我失败的尝试，但到目前为止我得到了什么：

**HTML**

```
<html>
    <head>

  <link rel="stylesheet" href="/css/header.css" />

    </head>

<meta http-equiv="Content-Type" content="text/html; charset=big5" /></head>

<body style="margin:0; padding:0;">

<div id="wrapper">
    <div class="logo"><img src="/images/logo-top.png"></div>
    <div class="linked"><a href="http://www.linkedin.com/in/me" target="_blank"><img border="0" src="/images/connect-linkedin.png" alt="LinkedIn Profile" width="217" height="23" /></a></div>
</div>

<div id="header-bg"> 
</div>

</body>
</html> 
```

**CSS**

```
#wrapper {
    postion: fixed;
    width: 940px;
    height: 66px;
    top: 0;
    left: 0;
    right: 0;
    margin-left: auto; 
    margin-right: auto;
    z-index: 1;

} 

.logo {
    height: 66px;
    width: 171px;
    float: left;

}

.linked {
    height: 23px;
    width: 217px;
    margin-top: 12px;
    margin-right: 0;
    left: 0;
    float: right;

}

#header-bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    width: 100%;
    height: 50px;       
    background-image: url("/images/header-bg.png");
    background-repeat: repeat-x;
    z-index: -1;

} 
```

**产生这个： http:** [//oi46.tinypic.com/2vmd9v8.jpg](http://oi46.tinypic.com/2vmd9v8.jpg)

^这就是我在布局方面的目标，但是 - 我最终希望“与我联系”并将 LinkedIn 徽标分成文本和徽标图像，而不是一个图像聚集在一起。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T00:19:37.657

首先，您需要删除所有那些不必要的 div。将 bg-header 设为一个 div 并将其更改为一个类（假设 bg-header 是黑条。）在该 div 中将徽标和
链接图像放在那里。通过为 bg-header 类设置所需的左侧填充量，仅将徽标图像向左浮动并向右移动徽标和链接。

像这样

HTML

```
<div class="bg-header">
   <img src="/images/log-top.png>
    <a href="http://www.linkedin.com/in/me" target="_blank"><img border="0" src="/images/connect-linkedin.png" alt="LinkedIn Profile" width="217" height="23" /></a>
</div> 
```

CSS

```
.bg-header { padding-left: /*Insert value here*/; }
img { float: left; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:44:42.603

我建议用这个 css 删除填充：

```
.logo {
height: 66px;
width: 171px;
float: left;
padding: 0px;
margin: 0px;
border: 0px;
}
.linked {
height: 23px;
width: 217px;
margin-top: 12px;
margin-right: 0;
left: 0;
float: right;
padding: 0px;
margin: 0px;
border: 0px;
} 
```

# ruby-on-rails - mongoid 中父对象中子对象引用 id 的最佳方法是什么？

> ID：11074124
> 
> 赞同：0
> 
> 时间：2012-06-17T19:21:55.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, mongoid

我有 2 个对象；

**板子.rb**

```
class Board
  include Mongoid::Document
  has_many :posts, :autosave => true, dependent: :destroy
  field :collected, :type => Array, :default => []
end 
```

**post.rb**

```
class Post
  include Mongoid::Document
  belongs_to :board
end 
```

**除了**默认创建的关系之外，我还想创建一个字段来存储或引用父对象 ( **Board** ) 中的帖子。

是否可以在不需要复制对象的情况下创建引用？以及默认创建的关系？最好的方法是什么？

创建一个数组字段（**collected field**）并输入所有帖子的 id 还是有更好的方法？

我不想要重复的对象，我只想引用原始对象，然后我想用**where**查询或**find**查询找到这个对象。

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:51:58.783

`Board`对象将响应`posts`一个数组。如果您想要一个仅包含引用对象的 ID 的数组，请调用：`board.posts.collect {|p| p.id}`。如果您需要经常使用它，您可以在模型中定义一个返回它的方法。

# php - Apache2 查询并行性

> ID：11074127
> 
> 赞同：0
> 
> 时间：2012-06-17T19:22:32.810
> 
> 标签：php, ajax, parallel-processing, apache2

如果我有多个，同时，Ajax javascript 查询 domain/somefile.php，

somefile.php 必须从 curl 请求 (curl_exec) 到 domain/somehandler 的响应并返回它们

Apache2 如何处理并行性？，它真的比我直接在域/somehandler 上执行 Ajax 查询慢吗？

谢谢解释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:30:33.043

`how is handled parallelism by Apache2?`- 就 Apache 而言，没有真正的问题，除非您将其配置得*非常*糟糕，以至于它没有足够的进程/线程来处理负载。它更多的是关于硬件资源和网络带宽，而不是其他任何东西。这里要注意的事情与 Apache 无关，实际上与我将在下面解释的 PHP 会话有关，但首先...

`Is it really slower than if I was doing the Ajax queries directly on domain/somehandler?`- 是的，不可避免的。这是因为您立即将完成事务所需的 HTTP 请求数量增加了一倍。您还增加了所需的带宽量和总体 CPU 时间。它是否会*明显*变慢以及是否会导致问题取决于一千个因素，例如您正在做什么、如何设置 cURL 脚本、两个后端服务器之间的网络链接有多快等等等等， ETC...

* * *

[在这里反复](https://stackoverflow.com/questions/8894005/running-concurrent-php-scripts)[出现](https://stackoverflow.com/questions/10911429/do-php-timeouts-stop-people-on-the-same-network-loading-pages)的与PHP 驱动的应用程序的并发问题有关的问题的答案与[Sessions](http://www.php.net/manual/en/book.session.php)相关。许多站点使用会话来跟踪用户数据、登录状态、各种信息，这本身并没有什么*问题*（尽管应尽可能避免使用它们，并且与[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)完全不兼容），但它可能会导致并发问题如果他们没有正确处理。

这样做的原因是 PHP 将会话的数据存储在服务器本地文件系统中的文件中。当会话打开时，文件被锁定以防止会话因并发写入而损坏。这意味着尝试使用会话文件的第二个请求将“阻塞”（即等待），直到第一个请求释放它对会话文件的锁定。

大多数时候人们没有注意到这一点，我在这里看到的最常见的事情是尝试通过基于 PHP 的 servlet 脚本提供文件下载的人，并且他们在发送文件时让会话文件保持打开状态。这会导致用户在下载文件时无法从站点加载任何页面。

`session_write_close()`完成会话数据后立即调用可以轻松避免该问题。

...当然，如果您不使用会话，那么无论如何这些都不会影响您。

# django - 如何处理表单集中的无效删除表单

> ID：11074129
> 
> 赞同：7
> 
> 时间：2012-06-17T19:22:59.377
> 
> 标签：django, django-forms

如果用户在 formset 中填写的表单不完整，然后将其标记为删除，我的表单处理会非常糟糕。删除的表单会阻止 formset.cleaned_data 工作，因为它们没有验证，因此表单没有 clean_data 属性。如果我尝试遍历 formset.deleted_forms 并从 formset.forms 中删除表单，则 formset.cleaned_data 由于索引超出范围而崩溃。

我应该如何处理这些用户不想要的无效表单？

（这是我的错误，我从[谷歌组](http://groups.google.com/group/django-users/browse_thread/thread/f9196e07d88f019c)复制了描述）

我不明白这个错误，因为查看 django 代码我可以读到这个：

```
def is_valid(self):
    """
    Returns True if form.errors is empty for every form in self.forms.
    """
    if not self.is_bound:
        return False
    # We loop over every form.errors here rather than short circuiting on the
    # first failure to make sure validation gets triggered for every form.
    forms_valid = True
    err = self.errors
    for i in range(0, self.total_form_count()):
        form = self.forms[i]
        if self.can_delete:                           <-------
            if self._should_delete_form(form):
                # This form is going to be deleted so any of its errors
                # should not cause the entire formset to be invalid.
                continue
        if bool(self.errors[i]):
            forms_valid = False
    return forms_valid and not bool(self.non_form_errors()) 
```

此时，这是我避免错误的代码：

```
formFac = modelformset_factory(prm_model, extra = extra, can_delete = prm_can_delete )

if request.method == 'POST':
    formSet = formFac( request.POST )
    hi_ha_errors = False
    if formSet.is_valid():
        for form in formSet:
            if form not in formSet.deleted_forms:
                form.save()
        for form in formSet.deleted_forms:
            instance = form.instance
            if instance.pk:
                try:
                    instance.delete()
                except Exception, e:                    
                    form._errors.setdefault(NON_FIELD_ERRORS, []).append( 
                          'This row is referenced by others.'  )
                    hi_ha_errors = True

        if not hi_ha_errors:
            return HttpResponseRedirect( prm_url_next ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-18T22:26:07.640

我解决这个问题的`full_clean()`方法是覆盖我在 Formset/ModelFormset 中使用的 Form/ModelForm的方法

```
class MyModelForm(ModelForm):

    def full_clean(self, *args, **kwargs):
        super(MyModelForm, self).full_clean(*args, **kwargs)
        if hasattr(self, 'cleaned_data') and self.cleaned_data.get('DELETE', False):
            self._errors = ErrorDict() 
```

如果选中表单删除框，则会清除错误列表。表单将显示为没有错误。但是如果用户取消选中删除框并重新提交，那么表单将照常显示错误。

# java - 将活动与数据库 ID 关联

> ID：11074131
> 
> 赞同：0
> 
> 时间：2012-06-17T19:23:01.077
> 
> 标签：java, android, sqlite, android-activity

我有一个基于我数据库中的适配器的主 ListView。每个数据库 id 通过 ListView 被“分配”给一个 Activity。在我的 AndroidManifest 中，每个活动都有一个带有自定义操作的意图过滤器。现在有了这个，我不得不创建这个类：

```
public final class ActivityLauncher {
    private ActivityLauncher() { }

    public static void launch(Context c, int id) {
        switch(id) {
         case 1:
            Intent intent = new Intent();
            intent.setAction(SomeActivity.ACTION_SOMEACTIVITY);
            c.startActivity(intent);
            break;
        case 2:
            ...
            break;
        ...
        }
    }

    private static void st(Context context, String action) {
        Intent intent = new Intent();
        intent.setAction(action);
        context.startActivity(intent);
    }
} 
```

所以我必须手动为 switch 语句创建一个新案例。如果我必须重新排列或删除一个 ID，这会很麻烦。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:14:13.280

我不完全确定你的推理，但这是一个平局。制作一个封装您想要的行为的对象。

```
public class User {
    private static final User[] users = new User[2];
    static {
         user[0] = new User(0, "Action_0");
         user[1] = new User(1, "Action_1");
    }

    private final int id;
    private final String action;

    public User(int id, String action){
          this.id = id;
          this.action = action;
    }

    public int getId(){
           return this.id;
    }

    public Intent getIntent(){
           Intent intent = new Intent();
           intent.setAction(this.action);
           return intent;
    }

    public static User getUser(int id){
        for(int i=0; i < users.length; i++){
             User user = user[i];
             if(id == user.getId()){
                 return user;
             }
        }
        throw new Resources.NotFoundException("User not found with id: "+id);
    }

} 
```

因此，在您的活动中，您可以拥有：

```
 public void launch(Context c, int id) {
       Intent intent = User.getUser(id).getIntent();
       c.startActivity(intent);
 } 
```

or something along those lines, you could extend this further and pass round '`User`' objects instead of your raw id. You could also pass the context into the `getIntent` method and change it to a '`start`' method. `User` is probably a bad name for this class I'm just unsure on your domain.

# extjs - extjs 禁用单元格编辑

> ID：11074132
> 
> 赞同：0
> 
> 时间：2012-06-17T19:23:04.260
> 
> 标签：extjs

如何禁用 xml 数据文件中的特定单元格编辑？

像这样：

```
<price disabled="true">9.37</price> 
```

请给我例子提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:00:46.440

首先，要从 XML 响应中读取属性，您需要在模型中包含一个`mapping`对属性进行配置的字段，请参阅[这篇文章](http://www.sencha.com/forum/showthread.php?158026-Load-XML-with-attributes-in-a-store&highlight=xml%20attributes)。在你的情况下是这样的：

```
Ext.define('yourApp.model.Price', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'price',     type: 'float'},
        {name: 'disabled',  type: 'boolean',  mapping: 'price/@disabled'}
    ]
}); 
```

自从我使用 XML 响应以来已经有一段时间了，所以您可能不得不尝试一下。

然后，您应该简单地在您的网格面板的[`beforeedit`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-event-beforeedit)事件中包含一个检查，以防止在记录的`disabled`字段为真时进行编辑。

如果您使用的是 MVC 模式，它将是这样的：

```
// controllers init function
init: function() {

    this.control({

        'yourgridpanel': {

            // prevent disabled edits
            beforeedit: function(plugin, edit) {

                if (edit.record.get('disabled')) {
                    return false;
                }
            }
        }
    });
} 
```

如果您不使用 MVC 模式，则处理程序将如下所示：

```
yourGridPanel.on('beforeedit', function(plugin, edit) {
    if (edit.record.get('disabled')) {
        return false;
    }
}); 
```

# php - php 将固定日期值添加到 strtotime()

> ID：11074134
> 
> 赞同：2
> 
> 时间：2012-06-17T19:23:12.290
> 
> 标签：php, datetime, time, strtotime

我`strtotime($my_time);`用来创建我在 php 数学中使用的时间戳。

该变量`$my_time`采用`HH:mm:ss`从数据库中提取的 24 小时格式。

我正在设置时间，但我不知道正在制作什么日期。出于这个原因，我试图设置一个固定的日期。我尝试了以下方法，但我的计算结果错误。

```
strtotime('2007-12-21', $my_time);

strtotime( '+1 day', strtotime('2007-12-21', $my_time); //should produce 2007-12-21 00:00:00 ? 
```

请帮助我了解如何设置固定日期`strtotime()`和动态时间？

注意：`DateTime`该类不是我正在使用的代码中的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:28:53.463

strtotime 将 Unix 时间戳格式的整数视为第二个值，如[PHP 文档中所示](http://php.net/manual/en/function.strtotime.php)

也许您打算使用点而不是逗号，如下所示：

```
strtotime('2007-12-21 ' . $my_time);

strtotime( '+1 day', strtotime('2007-12-21 ' . $my_time); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T19:24:53.867

这可能只是空间问题。尝试：

```
strtotime( '+1 day', strtotime('2007-12-21 ' . $my_time); 
```

仅供参考，如果`$my_time`确实包含一个值，`00:00:00`那么您可以安全地从`strtotime()`. 没有它它也能工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T19:26:00.513

您应该将字符串连接成一个参数，而不是提供两个参数。

```
strtotime('1970-01-01 ' . $my_time); 
```

我还切换到 1970-01-01 作为日期，因为那是 UNIX 时间戳开始的时间，它只给你几秒钟的时间。以这种方式进行故障排除可能更容易，因为您可以一眼看出一个数字是否大于另一个数字，您还可以轻松发现 >86400 等故障。

# c# - 无法在客户端/服务器应用程序上引发事件

> ID：11074136
> 
> 赞同：2
> 
> 时间：2012-06-17T19:23:25.747
> 
> 标签：c#, .net, events, client-server, .net-remoting

我正在使用 .NET Remoting 实现多人游戏。客户端连接到服务器，我可以玩游戏了。但是，连接等没有问题；我在客户端订阅了事件，当事件被触发时，什么也没有发生。

服务器端网络实现是这样的：

```
SetupTcpChannel();
RemotingConfiguration.RegisterWellKnownServiceType(typeof(GamePlay),
"MyGame.soap", WellKnownObjectMode.Singleton);
RemotingConfiguration.CustomErrorsEnabled(false); 
```

客户端：

```
SetupTcpChannel();
var myGame = (IGamePlay)Activator.GetObject(typeof(IGamePlay), "tcp://localhost:13101/MyGame.soap");

private void SetupTcpChannel()
{
    // Creating a custom formatter for a TcpChannel sink chain.
    BinaryServerFormatterSinkProvider server_provider = new         BinaryServerFormatterSinkProvider();
    server_provider.TypeFilterLevel = Formatters.TypeFilterLevel.Full;

    BinaryClientFormatterSinkProvider client_provider = new BinaryClientFormatterSinkProvider();

    // Creating the IDictionary to instantiate the channel with custom sinkprovider
    IDictionary properties = new Hashtable();

    properties["port"] = "0"; //let the system choose the portnumber to prevent double portnumbers with multiple clients

    // Pass the properties for the port setting and the server provider in the server chain argument. (Client remains null here.)
    TcpChannel channel = new TcpChannel(properties, client_provider, server_provider);
    ChannelServices.RegisterChannel(channel, false);
} 
```

IGamePlay 接口中的委托和事件：

```
public delegate void getMessageDel();
event getMessageDel event_message; 
```

GamePlay 类中的函数：

```
public void function() {
    if (event_game_started != null)
        event_game_started();
} 
```

在客户端订阅事件：

```
myGame.event_game_is_over += new gameIsOverDel(myGame_event_game_is_over);
void myGame_event_game_is_over()
{
    MessageBox.Show("Game is over!");
} 
```

# objective-c - 如何使用 CGRect 中的蒙版剪辑图像/视图

> ID：11074137
> 
> 赞同：0
> 
> 时间：2012-06-17T19:23:31.457
> 
> 标签：objective-c, xcode, cocoa, cgrect

我有一个类，我在其中使用以下方法绘制形状：

```
- (void)drawRect:(CGRect)rect{...} 
```

我想用这个形状来掩盖我的图像或视图，这实际上是填充进度条。我怎样才能做到这一点？

现在我只有这个类和progressFilled.png......仅此而已。让我知道如何使用类构建的形状剪辑此图像。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:38:14.060

```
 UIImage *image = [UIImage imageNamed: @"progressFilled.png"];
[image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)]; 
```

# php - 在 foreach 循环中使用函数调用

> ID：11074141
> 
> 赞同：45
> 
> 时间：2012-06-17T19:24:28.463
> 
> 标签：php

在 foreach 循环中使用函数调用在效率方面是否存在任何问题。例如：

```
foreach ($this->getValues() as $value) {
  //Do something with $value
} 
```

相对

```
$values = $this->getValues();
foreach ($values as $value) {
  //Do something with $value
} 
```

本质上，php 是否足够聪明，可以在第一个示例中只调用一次 $this->getValues()，还是在每次迭代时调用它。如果它在每次迭代中调用它，那么它如何跟踪它当前所在的元素，

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-17T19:28:03.917

这两者本质上是一样的：

```
foreach ($this->getValues() as $value) {
 //
}

$values = $this->getValues();
foreach ($values as $value) {
  //
} 
```

`$this->getValues()`只会运行一次，因为它不在循环本身内。如果您稍后需要再次使用 的返回值`getValues`，请继续将其分配给变量，这样您就不必再次调用该函数。如果没有，你真的不需要变量。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-17T19:34:50.947

可能存在差异，但对于 99.9% 的实际案例来说，差异可以忽略不计。在任何一种情况下，PHP 都只会调用你的函数/方法一次。当您使用时，内部发生的事情`foreach`是 PHP 对 iteratee（ 之前的部分`as`）进行一次评估，存储结果，然后循环遍历它，将当前元素放入`as`. 如果您自己将迭代对象写入局部变量，您实际上只是在重复 PHP 的工作，因此第一种方法可能会带来额外的开销，但还不足以担心。我会优化可读性：如果函数调用很短并且是自描述的，则内联它；如果它很复杂或晦涩难懂，请将其存储在描述性变量中。

请注意，典型的`for`和`while`循环的情况有所不同，这可能是您得到这个概念的地方。例如，在以下代码中：

```
for ($number = 0; $number < $this->getNumberOfItems(); ++$number) {
    // do stuff...
} 
```

...`getNumberOfItems()`每次迭代都会调用该方法。在这种情况下，预先计算它并将其存储在局部变量中是有意义的。

# java - 读取文件时线程“主”java.lang.NullPointerException 中的异常

> ID：11074146
> 
> 赞同：-4
> 
> 时间：2012-06-17T19:24:57.190
> 
> 标签：java, file-io

```
Exception in thread "main" java.lang.NullPointerException
    at Library.loadBooks(Library.java:179)
    at UseLibrary.main(UseLibrary.java:105) 
```

这个错误让我抓狂！

```
public void loadBooks(String s) throws IOException{
    String str[] = new String[6];
    String inFName = ".//" + s ;
    BufferedReader input = new BufferedReader(new FileReader(inFName));
    int x;
    double y;
    String line = "";
    while(line != null){

        for(int i=0; i<6; i++){
            str[i] = new String();
            line = input.readLine();
            str = line.split("[-]");
            x = Integer.parseInt(str[1]);
            y = Double.parseDouble(str[2]);
            Book a = new Book(str[0], x, y, str[3], str[4], str[5]);
            add(a);
        } 

    }
} 
```

这段代码有什么问题？

我初始化了数组，但它没有运行！

## 更新 1

在`save.txt`我有

```
1 Don Knuth-290-23.45-The Art of Programming with Java-HG456-Engineering-5 
2 A. Camp-400-13.45-An Open Life-HSA234-Philosophy-1 
3 James Jones-140-12.11-Oh, Java Yeah!-SDF213-Science Fiction-2 
4 J. Campbell-250-32.45-An Open Life-JH45-Science-3 
5 Mary Kennedy-230-56.32-Intro to CS Using Java as the Language-USN123-Science-4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:37:12.413

很难理解在哪一行抛出异常，但我猜在这些：

```
x = Integer.parseInt(str[1]);
y = Double.parseDouble(str[2]); 
```

在解析之前检查 if`str[1]`和`str[2]`is not `null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:38:05.953

## 我认为的问题是

你有 5 行或更少的行，`saved.txt`因为第 6 次迭代的 for 循环，因为行没有数据，你得到`NullPointerException`.

请按照以下步骤，让我知道你得到了什么......

## 代替

```
while(line != null){

    for(int i=0; i<6; i++){
        str[i] = new String();
        line = input.readLine();
        str = line.split("[-]");
        x = Integer.parseInt(str[1]);
        y = Double.parseDouble(str[2]);
        Book a = new Book(str[0], x, y, str[3], str[4], str[5]);
        add(a);
    } 

} 
```

## 采用

```
while ((line = input.readLine()) != null) {
        str = line.split("[-]");
        Book a = new Book(str[0], Integer.parseInt(str[1]), Double.parseDouble(str[2]), str[3], str[4], str[5]);
        add(a);
} 
```

如果您还有任何问题，请告诉我。

## 更新 1

根据您的更新，

在`save.txt`我有

```
1 Don Knuth-290-23.45-The Art of Programming with Java-HG456-Engineering-5 
2 A. Camp-400-13.45-An Open Life-HSA234-Philosophy-1 
3 James Jones-140-12.11-Oh, Java Yeah!-SDF213-Science Fiction-2 
4 J. Campbell-250-32.45-An Open Life-JH45-Science-3 
5 Mary Kennedy-230-56.32-Intro to CS Using Java as the Language-USN123-Science-4 
```

如您所见，文件中有 5 行，对于第 6 次迭代，您将获得`NullPointerException`.

***另请阅读[如何在 Java 中打印文件内容](http://answers.yahoo.com/question/index?qid=20080331201418AAzsIdJ)。***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T19:39:01.663

你有一个`while`检查是否`line`为空的循环，它不是这样 while 循环运行，但是你有一个 for 循环调用`line = input.readLine();`6 次，并且从不检查它是否为空。在某些时候，`line`可能为 null，因为您已到达文件末尾。您需要检查`line`for 循环内是否为 null 或以不同的方式计算循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T19:39:10.057

您的问题在于这两行代码：

```
line = input.readLine();
str = line.split("[-]"); 
```

首先，您从文件中读取一行。您假设该文件至少有 6 行，这显然是一个错误的假设。*如果已到达流的末尾，则*[`BufferedReader#readLine`](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine%28%29)返回。您不检查是否为空，而是调用导致 NPE 的空对象。`null` *`line``split`*

# php - 如何使用codeIgniter从视图文件夹中的文件连接数据库？

> ID：11074147
> 
> 赞同：0
> 
> 时间：2012-06-17T19:25:02.087
> 
> 标签：php, database, codeigniter

在代码点火器中，您可以连接数据库并在控制器中进行查询，例如：

```
$this->db->query(Your query);
$this->db->get(); 
```

如何从视图文件夹中的文件连接数据库？这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:35:02.883

你可以，但你不应该。

即使在视图文件中，`$this`仍然指代当前控制器，因此与在`$this->db->get('my_table')`控制器中的工作方式完全相同。

但是，您肯定听说过，建议将变量从控制器传递给视图，而不是在视图文件本身中执行与视图无关的任务，并在其中执行数据库操作（获取数据、更新、删除等）模型层。这是 MVC 架构的基础之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:35:31.010

MVC（模型、视图、控制器）的目的是分离关注点。处理数据库查询不是视图的**工作。**这应该在您的模型中严格处理。而是在您的模型中编写查询并让您的控制器将其返回到您的视图中。

# android - TabHost.TabSpec 崩溃的应用程序

> ID：11074148
> 
> 赞同：-1
> 
> 时间：2012-06-17T19:25:09.777
> 
> 标签：android, android-tabhost

**我最终删除了声音活动，并且与它和应用程序相关的所有调用都有效。**

尝试添加 tabSpec 时，我的应用程序强制关闭。我昨天有一个正在运行的构建，但没有保存它，当我编辑它时，我的规范没有添加正确。我研究了基本相同的问题，但这些答案没有帮助。这是我的代码

控制活动

```
package com.control.driswave;

import android.app.TabActivity;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.Toast;

import com.control.driswave.R;
import com.stericson.RootTools.RootTools;

public class ControlActivity extends TabActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    if (RootTools.isAccessGiven()) {
        Toast root = Toast.makeText(getApplicationContext(), 
                "Root Granted", Toast.LENGTH_SHORT);
        root.show();
    } else {
        Toast noRoot = Toast.makeText(getApplicationContext(), 
                "Root Access Needed To Continue", Toast.LENGTH_LONG);
        noRoot.show();
        finish();
    }

    Resources res = getResources(); // used to get res drawings (i.e. display files)
    TabHost tabHost = getTabHost(); // used to create TabHost located in main.xml
    TabHost.TabSpec spec; //TabHost specifications which are the same in each view
    Intent intent; //intent for each tab. *RESEARCH INTENT*

    // New Class Added Caused FC. Was working. Spec no longer working again.

     //____Display
    intent = new Intent().setClass(this, DisplayActivity.class);

    spec = tabHost.newTabSpec("display").setIndicator("Display",
            res.getDrawable(R.drawable.ic_tab_display))
            .setContent(intent); // create picture to be used for tab
    tabHost.addTab(spec);

    //____Power
    intent = new Intent().setClass(this, PowerActivity.class);

    spec = tabHost.newTabSpec("power").setIndicator("Power", 
            res.getDrawable(R.drawable.ic_tab_display))
            .setContent(intent);
    tabHost.addTab(spec);

    //____Sound
    intent = new Intent().setClass(this, SoundActivity.class);

    spec = tabHost.newTabSpec("sound").setIndicator("Sound",
            res.getDrawable(R.drawable.ic_tab_display))
            .setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(2); 
```

显示活动

```
package com.control.driswave;

import java.io.File;

import com.stericson.RootTools.RootTools;

import android.app.Activity;
import android.os.Bundle;
import android.provider.Settings;
import android.widget.CheckBox;
import android.widget.Toast;

public class DisplayActivity extends Activity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.display);

    //_____Disable Boot Animation_____//
    CheckBox dba = (CheckBox) findViewById(R.id.DBA);
    if (dba.isChecked()) {
        RootTools.remount("/system/", "rw");
        File ba = new File("/System/Media/bootanimation.zip");
        ba.renameTo(new File("/System/Media/bootanimation.zip.bak"));
        Toast.makeText(getApplicationContext(), "Boot Animation Disabled", Toast.LENGTH_SHORT);

    }

    //_____Disable Window Animations_____//
    CheckBox dwa = (CheckBox) findViewById(R.id.DWA);
    if (dwa.isChecked()) {
        Settings.System.putInt(getContentResolver(), Settings.System.WINDOW_ANIMATION_SCALE, 0);
    } else {
        Settings.System.putInt(getContentResolver(), Settings.System.WINDOW_ANIMATION_SCALE, 1);

    }

}

} 
```

显示.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/bcTitle"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<CheckBox
    android:id="@+id/DBA"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/dabCB" />

<CheckBox
    android:id="@+id/DWA"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/DWA" /> 
```

主.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.control.driswave"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<application
    android:debuggable="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".ControlActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".DisplayActivity"
        android:label="@string/displaytab" >
    </activity>
    <activity
        android:name=".PowerActivity"
        android:label="@string/powertab" >
    </activity>
    <activity
        android:name=".SoundActivity"
        android:label="@string/soundtab" >
    </activity>
</application> 
```

日志猫

```
06-17 15:33:32.927: E/dalvikvm(18685): could not disable core file generation for pid 18685: Operation not permitted
06-17 15:33:33.075: D/dalvikvm(18685): GC_EXPLICIT freed 57K, 43% free 3067K/5379K, external 2540K/2666K, paused 35ms
06-17 15:33:34.380: D/AndroidRuntime(18685): Shutting down VM
06-17 15:33:34.380: W/dalvikvm(18685): threadid=1: thread exiting with uncaught exception (group=0x4001e560)
06-17 15:33:34.466: E/AndroidRuntime(18685): FATAL EXCEPTION: main
06-17 15:33:34.466: E/AndroidRuntime(18685): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.control.driswave/com.control.driswave.ControlActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.control.driswave/com.control.driswave.DisplayActivity}: java.lang.SecurityException: Permission Denial: writing com.android.providers.settings.OverlaySettingsProvider uri content://settings/system from pid=18685, uid=10125 requires android.permission.WRITE_SETTINGS
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1702)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1722)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.app.ActivityThread.access$1500(ActivityThread.java:124)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:974)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.os.Looper.loop(Looper.java:130)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.app.ActivityThread.main(ActivityThread.java:3821)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at java.lang.reflect.Method.invokeNative(Native Method)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at java.lang.reflect.Method.invoke(Method.java:507)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at dalvik.system.NativeStart.main(Native Method)
06-17 15:33:34.466: E/AndroidRuntime(18685): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.control.driswave/com.control.driswave.DisplayActivity}: java.lang.SecurityException: Permission Denial: writing com.android.providers.settings.OverlaySettingsProvider uri content://settings/system from pid=18685, uid=10125 requires android.permission.WRITE_SETTINGS
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1702)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.app.ActivityThread.startActivityNow(ActivityThread.java:1530)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:696)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.widget.TabHost.setCurrentTab(TabHost.java:328)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.widget.TabHost.addTab(TabHost.java:218)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at com.control.driswave.ControlActivity.onCreate(ControlActivity.java:46)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1666)
06-17 15:33:34.466: E/AndroidRuntime(18685):    ... 11 more
06-17 15:33:34.466: E/AndroidRuntime(18685): Caused by: java.lang.SecurityException: Permission Denial: writing com.android.providers.settings.OverlaySettingsProvider uri content://settings/system from pid=18685, uid=10125 requires android.permission.WRITE_SETTINGS
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.os.Parcel.readException(Parcel.java:1322)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:183)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:137)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.content.ContentProviderProxy.insert(ContentProviderNative.java:460)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.content.ContentResolver.insert(ContentResolver.java:608)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.provider.Settings$NameValueTable.putString(Settings.java:604)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.provider.Settings$System.putString(Settings.java:813)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.provider.Settings$System.putInt(Settings.java:896)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at com.control.driswave.DisplayActivity.onCreate(DisplayActivity.java:34)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-17 15:33:34.466: E/AndroidRuntime(18685):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1666)
06-17 15:33:34.466: E/AndroidRuntime(18685):    ... 20 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:45:54.920

你`android.permission.WRITE_SETTINGS`在你的 Android 清单文件中有权限吗？

# c++ - 将字符串转换为 const char*（带有二进制数据）

> ID：11074150
> 
> 赞同：0
> 
> 时间：2012-06-17T19:25:29.077
> 
> 标签：c++, binary

我想要做的是将字符串转换为 const char*。

理想情况下，我可以只使用“const char* myConstChar = myString.c_str()”，但如下面的示例所示；它不适用于二进制数据：

```
#include <iostream>
#include <fstream>
#include <stdio.h>
#include <string.h>

using namespace std;

int main(){
    string myString;  // This need to be string
    ifstream infile;
const char* myConstChar;  // This need to be const char*

infile.open("binary.bin");

if(infile){
        while(getline(infile, myString)){ 
        std::cout << "Data: " << myString << " string length: "; 
            std::cout << myString.length() << "\n";
            myConstChar = myString.c_str();
            std::cout << "const char Data: " << myConstChar; 
            std::cout << " const char length: "<< strlen(myConstChar) <<"\n";
        }
    }

    infile.close();
    return 0;
} 
```

这将返回“字符串长度：13”和“const char 长度：3”。

`const char*`显然，将字符串转换为using时会丢失一些数据`myString.c_str()`！

如何在不丢失二进制数据的情况下将字符串转换为 const char*？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T19:28:09.633

这几乎可以肯定是因为您的二进制数据包含零值字节。这些与空终止符相同，它们的功能类似于`strlen`用于确定字符串的结尾。

It's arguable that arbitrary binary data shouldn't be treated as a string. So use `std::vector<char>` instead, and don't use functions like `strlen`.

# ruby - 红宝石“包括？” 当元素出现在数组中时输出 false

> ID：11074154
> 
> 赞同：1
> 
> 时间：2012-06-17T19:26:12.060
> 
> 标签：ruby

我正在编写一个简单的程序来通过正则表达式从给定字符串中过滤掉股票报价。我对数组中的打印结果没有问题，但是当我尝试使用“包含？”时 要输出特定打印结果的布尔值，我收到错误消息。

此代码演示了我的确切问题：

[http://ideone.com/JiQlA](http://ideone.com/JiQlA)

我已经显示了匹配项、元素的数量，并验证了它是代码中的一个数组，但是当我尝试使用“include”拉出特定的打印元素“A”时？（第 10 行），它无法输出“true”。

如果有人能在这里解释我的错误，或者我将如何适当地查找特定元素是否在数组中，我将非常感激。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T19:30:18.867

Array 中的元素不是字符串，它们是 MatchData，碰巧打印为字符串。由于 String`"A"`不等于`#<MatchData "A" 1:nil>`，因此`include?`失败。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T19:30:14.037

`puts matches.map{|x| x.to_s}.include?("A")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T19:31:52.977

因为`matches`是一个`MatchData`对象数组，[如此处所示](http://ideone.com/JPAoh)。您需要先将元素转换为字符串，因此请在您的`map`调用中执行此操作：

```
matches = s.to_enum(:scan, r).map { Regexp.last_match.to_s } 
```

# python - 将 IDLE 集成到 Tkinter 程序中

> ID：11074159
> 
> 赞同：1
> 
> 时间：2012-06-17T19:27:07.880
> 
> 标签：python, tkinter, python-2.7

有没有办法将 IDLE 作为小部件集成到 Tkinter 程序中？我已经在谷歌上搜索了很长一段时间，但没有提出任何建议。即使是正确方向的一点也很棒。预先感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:54:18.520

不知道怎么做，但你有 python idlelib 库（在 PythonXX/Lib/idlelib 中）。文档很少，但我发现有些人从那里使用类。我认为库中的主要空闲模块是 pyshell（idle.py 调用 pyshell）。你可以从那里开始...

如果如注释中所示，您希望将解释器外壳嵌入到 tkinter 程序中，并且您不需要外壳处于空闲状态，则可以嵌入 IPython 外壳。IPython 为您提供了非常好的工具。至少有一个嵌入 ipython 的 tkinter 应用程序。在这里你有[代码](http://wiki.ipython.org/Old_Embedding/Tkinter)。

**更新：**
上面指向 ipython wiki 的链接目前已损坏。您可以在 josePhoenix github 存储库中找到代码（请参阅下面的评论）

# email - 如何在 DNS 中配置 SPF 记录以允许 Google Apps Gmail 和我的网站主机也正确发送邮件？

> ID：11074170
> 
> 赞同：1
> 
> 时间：2012-06-17T19:28:34.203
> 
> 标签：email, record, configure, spf

我将 Google Apps (gmail) 用于我的业务。我还托管自己的 Web 服务器，其中包含论坛和其他需要电子邮件验证和注册的东西。因此，我已经配置了我的 DNS SPF 记录以批准 Google 的邮件服务器，并且我还需要允许从我的主机邮件服务器发送邮件，这样它就不会被视为垃圾邮件。我对此并不陌生，但由于某种原因，它似乎不起作用。该主机不接收我的域的邮件，而只是发送邮件。这是我目前的 SPF 记录以及我认为“应该”的记录。我尝试了几种不同的方法，但似乎无法解决我的问题。

v=spf1 ip4:xxx.xxx.xxx.xxx 包括:_spf.google.com ~all

我已将它作为 SPF 和 TXT 并同时作为两者放入。但似乎没有纠正它。我究竟做错了什么？

# java - 更改 ScrollBar 结束按钮的背景颜色

> ID：11074172
> 
> 赞同：2
> 
> 时间：2012-06-17T19:28:42.870
> 
> 标签：java, swing, colors, uimanager, jscrollbar

在 Java 中，我一直在研究如何更改滚动条末端按钮的背景颜色。我还没有找到解释如何解释的站点，并且我还查看了 UIManager Defaults 以尝试查找某些内容，但我找不到任何东西。因此，如果有人能告诉我如何更改滚动条上按钮的背景颜色，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:48:33.373

创建一个新`BasicScrollBarUI`的并覆盖`createDecreaseButton`and`createIncreaseButton`方法：

```
final Color newColor = ...
ScrollBarUI yourUI = new BasicScrollBarUI() {
    @Override
    protected JButton createDecreaseButton(int orientation) {
        JButton button = super.createDecreaseButton(orientation);
        button.setBackground(newColor);
        return button;
    }

    @Override
    protected JButton createIncreaseButton(int orientation) {
        JButton button = super.createIncreaseButton(orientation);
        button.setBackground(newColor);
        return button;
    }
};
JScrollPane scroll = ...
scroll.getVerticalScrollBar().setUI(yourUI);
scroll.getHorizontalScrollBar().setUI(yourUI); 
```

# ruby - 如何在初始化父类时返回子类的新实例？

> ID：11074175
> 
> 赞同：11
> 
> 时间：2012-06-17T19:29:03.027
> 
> 标签：ruby, oop, class, inheritance

给定一个类层次结构如下：

```
class A
  def initialize(param)
    if param == 1 then
      #initialize and return instance of B
    else
      #initialize and return instance of C
    end
  end
end

class B < A
end

class C < A
end 
```

是否可以实际初始化并在初始化时返回`B`或的实例？即将导致成为类的实例或取决于 的值，这将被签入。`C``A``my_obj = A.new(param)``my_obj``B``C``param``A.initialize(param)`

在我的用例中，它只在运行时知道要使用哪个子类（`B`或`C`），而父类（`A`）基本上从未真正使用过。我认为将决定是否`B`或`C`转移到他们共同祖先的逻辑可能是一个好主意。

如果这是不可能的（或不好的风格），我应该在哪里检查`param`并决定初始化哪个类？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T23:36:46.583

你在这里打破了一个基本的 OO 原则——类应该对它们的子类一无所知。当然，有时原则应该被打破，但这里没有明显的理由这样做。

一个更好的解决方案是将实例化逻辑转移到单独类中的工厂方法。工厂方法采用与上面 A 的初始化程序相同的参数，并返回适当类的实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T19:34:44.440

问题是， 的返回值`initialize`被忽略了。这是您致电时会发生的情况`A.new`：

*   `new`调用一个特殊的类方法`allocate`——这将返回该类的一个空实例
*   `new`然后调用返回`initialize`的`allocate`对象，并返回该对象

要做你想做的事，你需要覆盖`new`并让它做你想做的事：

```
class A
  def self.new(args*)
    if(args[0]==1)
      B.new(*args[1..-1])
    else
      C.new(*args[1..-1])
    end
  end
end 
```

不过，还有其他事情需要考虑。if`A`从来没有真正单独使用过，你应该使用某种工厂方法，或者，只是一个简单的 if 语句。例如：

```
def B_or_C(param,args)
  (param == 1 ? B : C).new(args)
end 
```

设计实际上取决于您使用它们的目的。例如，当您有一个可用于处理某事物的多个版本（例如 HTML）的类时，您可能有一个主类`HTMLParser`，它可以覆盖`new`并返回其任何子类：`HTML1Parser`、`HTML2Parser`、`HTML3Parser`、`HTML4Parser`和`HTML5Parser`。

注意：您必须`new`在子类中将方法覆盖为默认值，以防止无限循环：

```
def self.new(args*)
  obj=allocate
  obj.send(:initialize, *args)
  obj
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-26T20:43:27.683

您可以创建一个`self.instantiate`方法，然后调用`.new`.

# actionscript-3 - flash as3如何强制moviclip代码服从界面

> ID：11074178
> 
> 赞同：1
> 
> 时间：2012-06-17T19:29:44.687
> 
> 标签：actionscript-3, flash, oop, interface, movieclip

很多时候，我喜欢将我的movieclip 代码***放在****movieclip 中（在时间轴*上的一个图层上）。

有没有办法让movieclip代码实现接口（例如，时间线代码实现接口）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:59:37.820

干净的方法是，创建一个符号并实现一个类，该类扩展了 MovieClip 并实现了所需的接口。在此类中，您将实现视图行为。

时间线代码总是要被接口修饰，你不能通过时间线代码来实现接口。

# html - 将标签文本放在输入字段上

> ID：11074188
> 
> 赞同：2
> 
> 时间：2012-06-17T19:30:58.653
> 
> 标签：html, css

我有以下登录表单：

```
div.field {
    position: relative;
}
label {
   font-size: 14px;
    position: absolute;
    top: 20px;
    left: 3px;
}​

<div class="username field">
    <label for="username">Enter email</label><br />
    <input type="text" class="field" name="email" id="id_email">
</div>
<div class="password field">
    <label for="password">Enter password</label><br />
    <input type="password" class="field" name="password" id="id_password">
</div>​ 
```

[http://jsfiddle.net/5yBz5/](http://jsfiddle.net/5yBz5/)

目前，如果用户单击标签文本所在的任何位置，则不会发生任何事情（即，因为用户单击的是标签文本而不是文本输入）。我希望标签文本出现在文本输入中，但是，当用户单击文本输入字段时，它应该忽略标签文本。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T19:33:54.357

您应该改为查看 html5[占位符](http://www.w3.org/TR/2011/WD-html5-20110525/common-input-element-attributes.html#the-placeholder-attribute)属性。这是推荐的方法。

例子：

```
<input type="text" placeholder="placeholder text"></input> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T19:45:20.040

添加`onclick="this.innerHTML=''"`到`label`元素。这远非完美的解决方案，但具有最佳可用性的解决方案将采用不同的方法（在输入元素之前标记元素），并且不会出现问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T19:47:13.797

方法二：

使用 jQuery（可选）捕获标签上的单击事件，然后聚焦输入元素：

```
​$("label").on("click",function(){
    $(this).parent().children("input").focus();
});​​​ 
```

[http://jsfiddle.net/SsZTh/](http://jsfiddle.net/SsZTh/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T19:47:32.250

为占位符文本使用标签根本不是一个好主意，因为它为尝试填写表单的人提供了糟糕的用户体验。

除此之外，还有几点需要注意：

*   关闭你的`input`标签
*   标签的 for 属性`<label>`应该等于`id`相关元素的属性才能将它们绑定在一起。

如果您想提供占位符文本，请使用 javascript 执行文本替换。例如：

```
<div>
    <label for="email">Enter email</label>
    <input type="text" class="defaultText" name="email" id="email" title="Enter email" />
</div>
<div>
    <label for="password">Enter password</label>
    <input type="text" name="password" id="password" />
</div> 
```

注意，jQuery的使用：

```
$(function() {
    $(".defaultText").focus(function () {
        if ($(this).val() == $(this)[0].title) {
            $(this).removeClass("defaultTextActive");
            $(this).val("");
        }
    });

    $(".defaultText").blur(function () {
        if ($(this).val() == "") {
            $(this).addClass("defaultTextActive");
            $(this).val($(this)[0].title);
        }
    });

    $(".defaultText").blur(); 
})(); 
```

小提琴示例：http: [//jsfiddle.net/5yBz5/4/](http://jsfiddle.net/5yBz5/4/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-20T15:48:22.500

将标签的 z-index 设置为 -1 并使输入字段透明。这样，标签会呈现在输入字段“后面”，这样当您单击它时，输入字段会接收事件而不是标签。

```
div.field {
    position: relative;
}
label {
    font-size: 14px;
    position: absolute;
    top: 20px;
    left: 3px;
    z-index:-1;
}
input {
    background: transparent;
} 
```

# content-management-system - 如何允许在没有在果园编程的情况下为匿名/经过身份验证的用户创建内容？

> ID：11074189
> 
> 赞同：3
> 
> 时间：2012-06-17T19:31:00.340
> 
> 标签：content-management-system, content-type, orchardcms

如果不让用户访问管理面板并授予他们作者权限，我们就无法授予用户这种可能性。

我们想要实现的就像任何其他 CMS 一样，创建一个内容类型，并让用户基于此创建内容，但无需访问管理面板。我们要求的不是很多吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T23:07:51.623

Orchard 1.5 将处理这种情况。在早期版本中，如果不构建自己的模块是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:50:47.427

今天浏览 Orchard Gallery 时，我看到了这个模块[uSubmit](http://gallery.orchardproject.net/List/Modules/Orchard.Module.uSubmit)。

听起来它可以处理您需要的内容：“需要 Orchard 1.4。此模块提供了一个名为 UserSubmission 的 ContentType，用于允许匿名访问者向您的站点提交内容。他们可以创建的内容项包括标题、图像、故事和可选他们的姓名、电子邮件地址和标签。故事是使用 Markdown 编辑器输入的，允许他们提供有限的格式。用户提交的内容保存为草稿内容，并且必须由 Orchard 用户（如管理员）发布具有发布权限。”

希望这可以帮助。

# php - Google 2 因素身份验证二维码问题

> ID：11074191
> 
> 赞同：3
> 
> 时间：2012-06-17T19:31:07.140
> 
> 标签：php

我试图创建一个 Google 2 Factor Authorization 只是作为一个实验，而不是出于任何真正的实际原因。

我正在使用提供的代码：[这里](http://www.idontplaydarts.com/wp-content/uploads/2011/07/ga.php_.txt)

我通过一个有两个参数 $username 和 $secret 的函数构建一个二维码 URL

`$qrcode_url = "https://www.google.com/chart?chs=200x200&chld=M|0&cht=qr&chl=otpauth://totp/{$username}%3Fsecret%3D{$secret}";`

这正确地构建了一个 URL。

`$username`参数是正在登录的用户。

该`$secret`参数由`Google2FA::generate_secret_key()`

但是，当我加载请求 QR 码的页面时，Google 会声明它“您的客户发出了格式错误或非法的请求”。这就是令人讨厌的地方。如果我单击地址栏并再次发送请求，它将加载提供正确 OTP（一次性密码）的 QR 码。然后，如果我重新加载带有 QR 码的页面，这也将正确加载。

关于是什么导致这个问题的任何想法？这与我在本地 XAMPP 上运行它的事实没有任何关系，不是吗？

提前致谢！:]

编辑：只是让你知道，我不认为这是一个缓存问题，因为我已经清除了它，它仍然很糟糕。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T03:38:52.270

我似乎已经通过混合使用 cURL 和不同的 URL 来访问图像来解决这个问题。

这是我的完整解决方案：

```
<?php
public static function get_qr_code_url( $username, $secret )
{
    $h              =   100;
    return  'http://chart.apis.google.com/chart?chs=' . $h . 'x' . $h . 
            '&chld=M|0&cht=qr&chl=' . urlencode( 'otpauth://totp/' . $username . '@' . $_SERVER['HTTP_HOST'] . '?secret=' . $secret );
}

public static function get_qr_code( $username, $secret )
{
    if( FALSE === $secret )
    {
        return FALSE;
    }
    $url        =   self::get_qr_code_url( $username, $secret );
    $curl_handle    =   curl_init();
    $headers    =   array( 'Expect:' ); 
    $options    =   array(
        CURLOPT_URL     =>  $url,
        CURLOPT_CONNECTTIMEOUT  =>  2,
        CURLOPT_RETURNTRANSFER  =>  1,
        CURLOPT_USERAGENT   =>  'My-Google-Auth',
        CURLOPT_HTTPHEADER  =>  $headers
    );
    curl_setopt_array( $curl_handle, $options );

    $query  =   curl_exec( $curl_handle );
    curl_close( $curl_handle );

    $base_64=   chunk_split( base64_encode( $query ) );

    return '<img class="google_qrcode" src="data:image/gif;base64,' . $base_64 . '" alt="QR Code" />';
}
    ?> 
```

我想我可以改进的唯一方法是将图像实际保存到服务器并保留本地副本，直到重新生成密钥或其他东西。但那是如果我要在适当的环境中实现它！:]

感谢@Brad 的帮助！

# c++ - 在程序初始化时调用函数

> ID：11074195
> 
> 赞同：0
> 
> 时间：2012-06-17T19:31:59.233
> 
> 标签：c++, templates, factory-pattern, template-meta-programming

所以我希望能够在初始化时调用一个函数。这是一个 void 函数，但我希望副作用（在本例中为更新工厂函数表）在`main()`调用时到位。现在我正在做的只是返回一个 int 并用它初始化一个静态变量：

```
//Factory inherits from FactoryBase
class FactoryBase
{
    ...
private:
    static std::unordered_map<std::string, FactoryBase*> factoryTable;
public:
    template<class C>
    static int addClass(const std::string& name)
    {
        factoryTable[name] = new Factory<C>;
        return 0;
    }
};
...
int Foo::uselessStaticInt = FactoryBase::addClass<Foo>("foo");
//class Foo is now associated with the string "foo" 
```

有没有一种方法可以在不需要静态 int 的情况下调用静态函数？

我可以发布 Factory 类的完整源代码，但我更感兴趣的是编译时或初始化时函数调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:38:02.753

正如@interjay 正确指出的那样，您实际上是在初始化时（静态对象初始化时）调用函数，而不是在编译时。AFAIK 如果没有静态对象，您将无法做到这一点。您可以在某些静态对象的构造函数中执行此操作，但这可能会使代码看起来稍微简单一些：

```
ClassRegister<Foo> fooRegister("foo"); // Call FactoryBase::addClass<Foo>("foo")
                                       // in the constructor of ClassRegister<Foo> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:43:51.053

我经常使用一个辅助注册器类，以及一个单一的全局实例：

**头文件`FactoryBase.hpp`：**

```
template <typename T> struct Registrator
{
    explicit Registrator(char const * s)
    {
        FactoryBase<T>::addClass(s);
    }
}; 
```

`FactoryBase`（如果您愿意，这可以是一个公共嵌套类。）

**翻译单位：**

```
#include <FactoryBase.hpp>
#include <Foo.hpp>

namespace
{
    Registrator<Foo> fooRegistrator("foo");
} 
```

# algorithm - 深度优先搜索？

> ID：11074197
> 
> 赞同：-1
> 
> 时间：2012-06-17T19:32:29.420
> 
> 标签：algorithm, computer-science, depth-first-search

> 前向边缘导致非子后代

*   如果一个顶点通向另一个顶点，根据定义，第二个顶点是第一个顶点的子顶点。因此，顶点如何导致非子节点？根据定义，顶点的孩子是由它导致的。

> 交叉边既不通向祖先也不通向后代

*   如果一个顶点通向另一个顶点，则第二个顶点是第一个顶点的孩子。因此，如果根据定义一个顶点导致的任何东西都是它的孩子，那么交叉边怎么会导致非后代呢？

*   来源是如何挑选的？DFS 算法如何知道*从哪里*开始？

*   边的类型是否取决于算法从哪里开始？例如，如果算法从顶点 A 开始并在顶点 Z 结束，则从 Z 到 A 的边将是后边。但是，如果算法从 Z 开始并在 A 结束，它将是一个前沿。我的推理正确吗？每次运行时边缘的类型都会改变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:39:10.787

> 如果一个顶点通向另一个顶点，根据定义，第二个顶点是第一个顶点的子顶点。

不; 这里的“子”是指表示搜索空间的树，而不是“叠加”在其上以显示搜索顺序的图。[请参阅Wikipedia](http://en.wikipedia.org/wiki/Depth-first_search#Output_of_a_depth-first_search)中的有用插图。

您的其他问题也有类似的困惑。

选择源以反映*问题*。它会一直持续到您找到可接受的*解决方案*。

假设您想了解如何从浴室到卧室。那么你的起始节点必须是一间浴室——你真正迷路的地方。你在房子里四处走动，倒退并尝试其他门，当你找到卧室（解决方案）时，你停下来。有两张图：一张是搜索树；另一个是搜索顺序的线性路径。实际上是三个，如果你包括问题空间本身。

问题空间，具有`<>`表示双向边缘（大多数人的房子里的所有门都可以允许任何方向的人进入）：

```
 BATHROOM
              <> 
ENTRANCE <> HALLWAY  <>  DINING ROOM
              <>
            STAIRWAY <>  KIDS ROOM
              <>
            BEDROOM 
```

搜索图 - 树（`->`表示母女关系；在树中，它们通常被认为是单向的）

```
Bathroom -> Hallway -> Entrance
                    -> Stairway -> Kids Room
                                -> Bedroom                            
                    -> Dining Room 
```

搜索顺序 - 显示您如何遍历树的线性图。

```
Bathroom -> Hallway -> Entrance -> Stairway -> Kids Room -> Bedroom 
```

在 BFS 中，给定相同的图表，它将是：

```
Bathroom -> Hallway -> Entrance -> Stairway -> Dining Room -> Kids Room -> Bedroom 
```

开始节点由问题设置：“我在浴室”。目标节点也是由问题设定的：“我想去卧室”。

在另一个问题中：“我在奥赛罗的特定位置。（开始）我想赢。（目标）”

另请注意，如果我在走廊里迷路了，我仍然可以使用 DFS；您只需将图形转换为树，并将任何边固定为远离起点：

```
Hallway -> Entrance
        -> Dining Room
        -> Stairway -> Kids Room
                    -> Bedroom
        -> Bathroom 
```

# javascript - 带有标签的 Chrome 扩展程序

> ID：11074202
> 
> 赞同：4
> 
> 时间：2012-06-17T19:33:55.707
> 
> 标签：javascript, google-chrome, tabs, google-chrome-extension, autofill

我过去三天一直在尝试完成这项工作，所以请不要回复 chrome API 的链接或类似的东西。

我正在开发一个与 mySql 数据库通信的 Chrome 扩展程序，以获取用户最喜欢的网站，以及每个网站的登录名/密码（比如说 facebook fbuser fbpass、google gguser ggpass ...）

所以扩展的目标是为每个网站打开一个新标签，并进行登录。

我已经建立了与数据库的通信，并且可以成功打开网站的新标签，但我一直在忙于在每个网站上插入用户名和密码。我的问题是我不能使用 document.getElementsById('input')... 因为它返回我弹出窗口上的元素，而不是网页上的元素。

因此，我已经阅读了有关 chrome.tabs.executeScript() 的内容，并且正在尝试使用它（看来这是我需要用来访问网页的 DOM 的内容）。

所以我正在使用类似的东西：

```
chrome.tabs.create({"url": web[i],"selected":false},function(tab) {
        chrome.tabs.executeScript(tab.id, {file:"write.js"}, function(){
        });
        }); 
```

并且“write.js”必须进行自动填充。

所以这里开始我的问题：

我有一个“警报（“我在”）；“ write.js 中的消息，并且它永远不会显示（因此永远不会调用函数的其余部分）。（我在互联网上找到了这个函数“write.js”）。

在这里，我将发布我的弹出 html、清单和 js 的部分内容，也许我必须在那里更改一些内容，因为我已经尝试了我在大多数示例中看到的内容并且不适合我。

清单.json：

```
{
  "name": "MyExtension",
  "version": "1.0",
  "description": "My chrome extension",
  "icons":{
      "128":"icon_128.png"
  },
  "browser_action":   {
      "default_icon": "icon.png",
      "popup": "consulta_empleados.html"
  },
  "permissions": [
    "http://*/*",
    "https://*/*"
  ]
} 
```

Consulta_empleados.html（弹出窗口）：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Consulta Registro con AJAX</title>
<script src="ajax.js"></script>
</head>
<body>
<form name="form1" method="post" >
  <label>
  <div align="center">Email<br>
    <input type="text" name="email" id="email">
  </div>
  </label>
  <p align="center">
    <label>
    <input type="submit" name="open" id="open" value="Log In" onClick="runScript()">
    </label>
  </p>
</form>
<div id="resultado"></div>
<div id="prova"></div>
</body>
</html> 
```

文件 ajax.js：

```
function runScript(){
      ...
      //here I fill a vector with the usernames, the websites and the passwords from the data coming from my database. var num is the number of websites
      ...
  var i=0;
  while(i<num){
    chrome.tabs.create({"url": web[i],"selected":false},function(tab) {
        chrome.tabs.executeScript(tab.id, {file: "write.js"}, function(){

        });
        });
    i++;
  }

}

write.js:
function write() {
     ...
      alert("I'm in");
     ...      
} 
write(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:29:07.817

恕我直言，而不是 "selected":false 你需要 "active":false

您还可以通过在 chrome.tabs.executeScript 之前添加另一个警报来了解这一点，以查看是否正在调用 chrome.tabs.create 的回调

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:00:42.710

看看你的开发工具的控制台，一定有一些错误信息。要使用 contentscript，您需要`tabs`权限

```
{
  "name": "My extension",
  ...
  "permissions": [
    "tabs", "http://www.google.com/*"
  ],
  ...
} 
```

# unix - 如何在第 1 行 libsvm 获得正确的输入格式

> ID：11074204
> 
> 赞同：2
> 
> 时间：2012-06-17T19:34:13.757
> 
> 标签：unix, machine-learning, svm, libsvm

我最近才开始使用 libsvm。我一直在尝试训练我的特征得到模型，然后用相应的特征进行预测。不幸的是，我不断收到错误的文件格式。我经常做这个措施来削减我的特征，然后对它们进行训练，我得到了一个模型。

这就是我训练获得模型的方式。我正在通过 unix 命令行 btw 执行此操作。

> ./svm-train -t 0 -b 1 svmtrainModel1Revised.txt TrainedModel1.svm

```
0 1:8.109121    2:11.063075 3:9.265099 4:7.392232  5:9.577386
0 1:7.497237    2:10.314889 3:9.330452 4:8.658748 5:9.493017
0 1:7.579283    2:9.853208 3:9.863712 4:8.48306 5:9.84812
1 1:7.683603    2:10.323639 3:10.616027 4:7.039438 5:10.321418
1 1:7.645213    2:9.742212 3:9.957533 4:8.810831 5:8.86067
0 1:7.738999    2:9.956453 3:9.643299 4:8.553764 5:9.824224
1 1:7.968907    2:10.610946 3:9.061123 4:7.84069 5:9.793263 
```

我从上面得到的模型是基于此预测的。

> ./svm-predict -b 1 svmtest1RevisedA.txt TrainedModel1.svm labelmodel1.txt

这些特征的格式与上述相同，只是它们缺乏基本事实。

```
8.139867    10.146595   9.554127    8.409128    9.380923
7.691873    9.820682    9.777709    9.136581    9.038513
8.629565    10.684548   9.192018    9.031779    9.733009
7.796154    10.871736   9.113837    7.329961    10.071653
7.235544    9.994834    10.601161   8.720384    10.112152
8.008006    10.75276    10.755063   7.517268    9.415618
7.857692    9.936756    9.556366    8.941176    8.933603
7.806821    9.934397    9.324827    8.422852    8.797105 
```

没有逗号，每个元素之间只有一个空格，但是当我预测时它告诉我`Wrong input format at line 1`。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:52:16.257

您需要将训练标签设为 1 或 -1。这是机器学习世界的 SVM 子世界中的标准。此外，您可能想要取出任何选项卡并确保您的空白仅包含空格。

以下是我使用 libsvm 训练的文件中的几行：

```
-1 1:0.000000 2:0.274121 3:0.448146 4:0.586426 5:0.599033 6:0.112481
1 1:0.406015 2:0.411721 3:0.588133 4:0.757176 5:0.462532 6:0.196860
-1 1:0.131868 2:0.432938 3:0.614296 4:0.711778 5:0.178528 6:0.217912
1 1:0.489093 2:0.393096 3:0.568940 4:0.744675 5:0.527169 6:0.590553
-1 1:0.077703 2:0.226890 3:0.408387 4:0.523369 5:0.837690 6:0.454314 
```

如果您仍然对输入格式感到困惑，请使用脚本 checkdata.py。它位于`libsvm-3.12/tools`目录中（相对于您的 libsvm 安装），并且可以解释格式中的错误（如果存在）。

# ms-access - 在 Access 多列列表框中设置“选定”值

> ID：11074207
> 
> 赞同：1
> 
> 时间：2012-06-17T19:34:44.940
> 
> 标签：ms-access, listbox, set, selected, multiple-columns

我在 Access 表单上使用了几个绑定的 ListBox 控件。ListBox 的内容是相关的，因此，除其他外，当用户单击一个 ListBox 时，所选行可以在其他行中更改。一切正常，我已经做过很多次了，只要 ListBox 有一个列。我使用超级简单的 VBA 语法 lstBoxWhosis = "SomeText"

并且只要 ListBox 确实包含该项目，所选行就会成为包含该文本的行，而无需其他搜索、查找或重新定位命令。

我目前的头疼是多列ListBox。最左边的列没有唯一的条目，当我使用上述语法时，我得到一个重新定位，但仅限于包含文本的第一行。我需要根据两列中的值进行定位。是否有一些类似的方法可以对多列执行此操作，还是我必须手动搜索 ListBox 内容？

我已经尝试用空格、逗号和分号连接列，还有语法

> lstBoxWhosis = array("SomeText1","SomeText2")

这些都没有运气。

雷木：

我现在就是这样做的，实际上很简单。这是代码：

```
lstSpoje = lstKatastr
Do Until lstSpoje.Column(1) = lstOblast
  lstSpoje.Selected(lstSpoje.ListIndex + 1) = True
Loop 
```

第一行直接定位到第一列中块的开头，第二行一步一步，检查第二列，直到它得到正确的行。重复的数量并不保证更有效的搜索方法。它工作正常，除了在重新定位期间显示会颤动。

否则，我会发布我认为相关的所有内容。ListBoxes 是绑定的，正如我在第一句话中所说的，这意味着它们基于表或查询。如果您认为还有其他信息可以帮助某人解决此问题，请告诉我可能是什么。

雷木：

是的，这无疑会奏效。实际上，我已经做了类似的事情，其中​​一个 ListBox 有近 15,000 个项目，所以为了帮助用户定位内容，我放入了 26 个带有字母的 CommandButton，将 ListBox 移动到该字母的开头。我使用以下代码来定位 ListBox

```
x = ActiveControl.Caption
i = CurrentDb.OpenRecordset("SELECT Count(*) FROM TableOfKatastrs WHERE Left(Katastr,1)<'" & x & "'").Fields(0)
lstKatastr.Selected(i) = True 
```

我可能会为此采用类似的方案 - 它可以消除闪烁问题并且启动速度更快。但是我希望在我的第一个示例中使用一些鲜为人知的语法，其中一行代码可以完成所有操作：

```
lstBoxWhosis = "SomeText" 
```

雷木：

我会满足于两个，因为我使用的是两列。:) 但说真的，简单的赋值语法是如此直接和优雅，而且经常有一些奇怪的措辞很少使用，鲜为人知，可以解决这样的问题。我已经尝试了各种其他的东西，比如

```
lstSpoje.Column(1) = "SomeText2" 
```

但我得到的只是语法错误。也许它真的只适用于第一（或唯一）列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-25T12:39:52.987

我正在寻找这些方面的东西，并遇到了这个旧帖子。我知道这是一条路，所以这更多地是为了为任何未来的读者在搜索档案时可能遇到这个问题而填写信息。

我想出了另一种方法 -**复制**我想将列表框的正确行设置为第一列的列（或将列连接成一列），并将其宽度设为零。它不会显示，因此列表框对用户来说看起来很正常，但标准语法

```
lstBoxWhosis = "value" 
```

然后将正常工作。

# php - Android - 上传文件并将变量发送到 php 表单

> ID：11074212
> 
> 赞同：1
> 
> 时间：2012-06-17T19:35:20.463
> 
> 标签：php, android, file-upload, http-post, httpclient

我有一个 PHP 文件，它以一个文件和一个或多个变量作为输入，所有这些都由 post 方法给出。
我必须在 Android 中对该 PHP 文件执行 HTTP POST 请求，将其发送文件（图像）和变量。
我知道如何只发送文件（[发布文件](http://getablogger.blogspot.it/2008/01/android-how-to-post-file-to-php-server.html)）或数据/变量（[发布数据](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)），但是如何修改这些片段以在同一个请求上执行两个操作（发送文件 + 发送数据）？
谢谢

编辑：发送表格是这样的：

```
<form action="receive.php" method="post" enctype="multipart/form-data">
    <p><input type="file" name="file" id="file" /></p>
    <p><input name="firstVar" type="text" /></p>
    <p><input name="secondVar" type="text" /></p>
    <p><input type="submit" value="send" /></p>
</form> 
```

所以，在接收方，我将把我的 vars 放在`$_POST["firstVar"]`and上`$_POST["secondVar"]`，上传的文件放在`$_FILES["file"]`.

# android - Eclipse：如何在透视图中恢复默认设置？

> ID：11074213
> 
> 赞同：14
> 
> 时间：2012-06-17T19:35:24.753
> 
> 标签：android, eclipse

我在 Eclipse 调试透视图中丢失了“调试”面板/工具栏（带有黄色卷曲箭头步骤工具）并且无法取回它。

点击窗口 | 显示视图 | 调试（甲虫）似乎什么都不做。

如何取回它，或恢复默认设置（不更改任何其他内容）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-13T10:54:52.897

如果您的 Eclipse 由于任何原因而搞砸了。你试一试

`Window`->`Reset Perspective`

它会将布局重置为下图。

![在此处输入图像描述](../Images/fb74196efeaad44ea140f1a921b9ddc6.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-17T20:22:59.533

如果显示视图/调试似乎什么都不做，那么视图已经可见，这就是它似乎什么都不做的主要原因。

也许您的视图不可见，因为您已将视图移动到悬停窗口中（通过从视图标题的弹出菜单中选择分离视图），或者将其转换为快速视图（在这种情况下，视图显示在状态栏的某处在图标中 - 默认情况下在窗口的左下角）。如果是这种情况，请尝试移回 Debug 视图。

您是否尝试过从窗口菜单重置透视图（当然，当调试透视图处于活动状态时）？这将恢复 Debug 透视图的默认布局，保留所有其他设置。

我的另一个想法是您使用的是最新的 Eclipse 3.8/4.2，其中有一个新功能可以将这些图标放到主工具栏：[有关详细信息，请参阅以下帖子](http://eclipse-debug.blogspot.hu/2011/10/debug-top-level-toolbar.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-29T18:06:08.773

如果你想恢复，那么你应该删除

```
cd %USERPROFILE%\eclipse-workspace\ 
```

文件夹

> .元数据

# c# - 我应该使用哪个控件来实现带有拆分器的网格布局？

> ID：11074217
> 
> 赞同：1
> 
> 时间：2012-06-17T19:35:40.247
> 
> 标签：c#, wpf, xaml

我需要实现草图上显示的布局。

1.  多列 - 用户可以调整宽度
2.  垂直分隔成 2 个区域 - 用户可以调整高度
3.  每列将包含多个项目 - 我将使用 List

我应该为此使用网格吗？还是DataGrid会更合适？我担心 Grid 会给我带来我想要的拆分方式的问题，但我想知道 DataGrid 是否会在这种情况下变得“沉重”？

此外，所有内容都将采用重样式，因此易于操作也很重要。

**编辑：**

忘了提几件事：

1.  列数不会固定，但会受到限制 - 最多 7 个
2.  我会将观点注入那些“细胞”
3.  是否可以在 MVVM 场景中隐藏/显示列？我在想，如果我使用 GridSplitter 并绑定拆分器可见性，那只是因为如果“宽度”设置为“自动”，我可以隐藏拆分器并从列中删除内容 - 我将实现“隐藏”它的场景。

![在此处输入图像描述](../Images/7d91d0df5644df3dc70dad95c1988f52.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:01:01.810

恕我直言，考虑到列数是固定的，`Grid`是这里的方法。您需要有一些逻辑来设置`MaxHeight`第一行，这样用户将无法拖动网格底部下方的水平拆分器（是的，我知道，它应该是默认行为...... :( ）。

`MaxWidth`每列的 也是如此。只是它更复杂，因为您必须考虑所有列的实际宽度。此外，当拖动垂直拆分器之一时，您需要更新所有列的宽度，因此网格的整体宽度保持不变。

`DataGrid`将是矫枉过正，你不会获得任何有价值的东西 - 垂直分割器将被照顾，第一次看 - 但是你有你必须考虑的滚动条，禁用它们会弄乱重新调整列大小的能力。此外，水平拆分器仅在行标题中可用，而不是在控件的所有宽度上可用。此外，必须手动计算第一行的高度，然后以某种方式强制数据网格。

现在我考虑一下，我可能会使用一个自定义面板（MyPanel）和一个继承`Thumb`.

对于列表，我可能会使用`HeaderedContentControl`自定义控件模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:59:43.540

您可以使用任何您想要的控件。实际上，您可以将 DataGrid 与特殊类一起用于您的情况，它称为[GridSplitter](http://msdn.microsoft.com/en-us/library/system.windows.controls.gridsplitter.aspx)（如本例所示：[CodeBetter](http://codebetter.com/stevehebert/2008/04/16/creating-a-horizontal-gridsplitter-for-real/)）。[您可以使用DataTemplates](http://msdn.microsoft.com/en-us/library/ms742521.aspx)自定义单元格甚至行以存档最佳效果

# visual-studio-2010 - 使用 Visual Studio 调试 .net 类库

> ID：11074225
> 
> 赞同：0
> 
> 时间：2012-06-17T19:36:24.457
> 
> 标签：visual-studio-2010, debugging, class-library, build-events

## 情况

我遇到了以前从未遇到过的情况。我有一个使用`dll`被调用的应用程序`client.dll`。应用程序保留在`bin\debug\`文件夹中，并在每次应用程序构建时使用*Build Events...运行。*这很好用，程序在程序构建后启动，一切顺利......*直到......*

*抛出异常/错误！* 该应用程序不再被调试，因为 VS2010 实际上不再连接到 DLL。

* * *

## 我的问题

你们中有人知道我处理这个问题的更好方法吗？无论如何，我是否可以像使用这个类库项目的普通 WinForms 应用程序一样进行逐行调试？

* * *

## 信息

**构建事件：** *CALL "$(SolutionDir)Client\bin\Debug\ClientRunner.exe"*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:57:53.947

调试器从一开始就没有附加。不要对构建事件执行此操作。而是将调试器配置为在您使用 F5 开始调试时运行您的 ClientRunner.exe 进程。项目 + 属性，调试选项卡。勾选“启动外部程序”选项并选择您的 .exe。

你会想在你的类库源代码中设置一个调试中断，无论你想在哪里开始调试。然后按 F5。

将创建 ClientRunner.exe 的项目添加到您的解决方案并使其成为 Startup 项目当然也可以工作。

# .net - F# 中泛型 ParamArray 参数的处理不一致

> ID：11074227
> 
> 赞同：4
> 
> 时间：2012-06-17T19:36:48.373
> 
> 标签：.net, f#

[在这个问题](https://stackoverflow.com/q/11068527/917053)的上下文中发现这种看似不一致的行为可以在 F#2.0 和 F#3.0 RC 中重现：

```
type Heterogeneous =
    static member Echo([<ParamArray>] args: Object[]) = args

type Generic =  
    static member Echo<'T>([<ParamArray>] args: 'T[]) = args 
```

用法： 返回：

```
Heterogeneous.Echo 0              // [|0|]                OK
Generic.Echo 0                    // [|0|]                OK
Heterogeneous.Echo (0,1)          // [|0; 1|]             OK
Generic.Echo (0,1)                // [|0; 1|]             OK
Heterogeneous.Echo [|0|]          // [|[|0|]|]            OK?
Generic.Echo [|0|]                // [|0|]                OOPS!!
Heterogeneous.Echo ([|0|],[|1|])) // [|[|0|]; [|1|]|]     OK
Generic.Echo ([|0|],[|1|]))       // [|[|0|]; [|1|]|]     OK 
```

谁能解释观察到的行为是错误还是功能？

**更新：** 这个[相关答案](https://stackoverflow.com/a/11068724/917053)传达了 F# 开发团队的确认，即到目前为止，在处理具有`ParamArray`属性的泛型类型参数时存在一个错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T20:08:50.463

这种情况有点令人困惑，因为当您将数组用作标有 的参数的实际参数时`ParamArray`，该语言会尝试将其解释为好像您将数组传递给普通数组类型的参数（因此`ParamArray`如果可能，它会忽略该属性）。

在您的示例中，这在第二种情况下是可能的：

```
Generic.Echo [|0|] 
```

编译器推断`'T`是`int`这样，因此您将传递`int[]`给类型的参数，`int[]`因此编译器会忽略`ParamArray`属性，并且该方法仅获取包含`0`.

在另一种情况下，这是不可能的：

```
Heterogeneous.Echo [|0|] 
```

该方法需要一个类型的参数，`obj[]`而实参的类型是`int[]`，所以这两种类型不能统一（关键是编译器不会自动转换`int[]`为`obj[]`）。由于这是不可能的，它会考虑`ParamArray`属性并尝试将其转换`int[]`为`obj`并将其作为成员传递`ParamArray`- 这是编译器可以自动执行的转换，因此您会得到您描述的结果。

如果你调用`Heterogeneous.Echo`with`obj[]`作为参数，那么它的行为类似于`Generic.Echo`. 例如：

```
Heterogeneous.Echo [| box 0 |] 
```

如果你想深入了解，你可以看第 14.4 节。的[F# 语言规范](http://research.microsoft.com/apps/pubs/default.aspx?id=79948)。但是，重载解决规则非常复杂，因此我没有解释此行为的确切参考 - 只是上面的非正式解释。

# android - GPS 清单：App 中的 GPS 是可选的，也希望它可用于没有 GPS 的设备

> ID：11074228
> 
> 赞同：28
> 
> 时间：2012-06-17T19:37:11.423
> 
> 标签：android, gps, android-manifest

今天在将我的应用程序上传到市场时，我发现它仅适用于具有 GPS 的设备，因此不包括某些平板电脑。

我的应用程序中的 GPS 是可选的。是否可以为有和没有 GPS 的设备发布一个应用程序，或者我是否需要制作一个额外的版本（不过没问题）？

如果可能的话，我想有某种方法可以检查 if(deviceHasGPS()){...}。有吗？

这是我的清单的一部分：

```
<uses-permission android:name="android.permission.PREVENT_POWER_KEY" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.WRITE_SETTINGS" />
<uses-permission android:name="com.android.vending.CHECK_LICENSE" /> 
```

编辑：感谢[Raghav Sood](https://stackoverflow.com/users/1069068/raghav-sood)的回答！

添加到清单：

```
<uses-feature android:name="android.hardware.location.gps" 
              android:required="false" /> 
```

执行以下操作：

```
locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
boolean deviceHasGPS = false;
    if (locationManager.getAllProviders().contains(LocationManager.GPS_PROVIDER)) {
        deviceHasGPS = true;
    } 
```

要在带有 gps 的设备上测试它，只需用 if(deviceHasGPS){...} 包围 gps 的东西，然后在清单中删除：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

将 deviceHasGPS 设置为始终为 false 并查看 App force 是否关闭。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-17T19:40:38.417

将以下内容添加到您的清单中

```
<uses-feature android:name="android.hardware.location.gps" android:required="false" /> 
```

这将告诉 Google Play，虽然您的应用具有 GPS，但绝对要求并非如此。但是，您应该优雅地处理应用程序中缺少 GPS 的问题，而不是让它崩溃。

要检查设备是否具有 GPS，您可以调用`LocationManager.getAllProviders()`并检查是否`LocationManager.GPS_PROVIDER`包含在列表中。

# java - 如何根据一些规则按降序创建功绩列表？

> ID：11074231
> 
> 赞同：1
> 
> 时间：2012-06-17T19:37:41.073
> 
> 标签：java, sql, algorithm, oracle10g, comparator

我正在做一个为大学创建录取系统的项目。这些技术是 Java 和 Oracle。

学院在全国设有5个分校。学院邀请候选人提交申请表，但所有与候选人相关的数据都从位于德里的总部集中存储和处理。为 SC、ST、OBC、PH 候选人等预留了 40% 的席位，中央总部负责创建分公司、部门、类别的优秀名单，按总分（为简单起见）降序排列以填补席位（例如每个部门 30 个席位）。现在，如果两个候选人获得相同的分数，那么在申请的科目中获得更高分数的候选人将被优先考虑。现在为简单起见，假设所有需要的数据都存储在一个平面表中，比如 application_details{appl_no, form_no, branch, department, name, gender, dob, category, subject_marks,

此外，将有一个等候名单，这将是座位数的 2 倍。

我很困惑，关于如何使用 Oracle 过程和函数处理排序和比较全部数据（所有五个分支大约 5 万个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:53:47.190

这只是您需要的 SQL 查询，您可能不需要任何过程代码（例如函数、过程或 java）来获得答案。

例如，给定一组具有 {appl_no, subject_marks, total_marks} 的应用程序，您可以按照 total_marks 的降序对它们进行排序，当某些行的 total_marks 相同时，可以按照 subject_marks 的降序对它们进行排序，例如：

```
SELECT *
FROM   application_details
ORDER BY total_marks DESC, subject_marks DESC; 
```

如果您想查看谁获得了 30 个席位，您可以将结果限制为前 30 个结果，例如：

```
SELECT *
FROM (
  SELECT *
  FROM   application_details
  ORDER BY total_marks DESC, subject_marks DESC
  )
WHERE ROWNUM <= 30; 
```

（这也可以使用 ROW_NUMBER 分析函数来完成。）

但是，这并没有解决算法的不公平性，因为如果您有 30 个席位，并且 2 人或更多人并列第 30 个席位，您将有效地随机选择其中一个，而另一个人将输掉。

另一种方法是更改​​规则，*最多*分配 30 个席位；如果第 30 个席位有任何关系，则空缺。为此，您可以使用合适的分析子句，例如：

```
SELECT *
FROM   (
  SELECT DENSE_RANK()
         OVER (ORDER BY total_marks DESC,
                        subject_marks DESC) dr,
         ad.*
  FROM   application_details ad
  )
WHERE dr <= 30; 
```

这将返回最多 30 个排名靠前的结果，但如果第 30 位（或者实际上是第 29 位或第 28 位等）出现平局，则不会返回结果。

您使用哪一个将取决于您需要遵守的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T02:34:52.090

一种方法是主要使用 java 语言，使用像 hibernate 这样的 ORM 工具将您的表映射到实现可比较接口的实体。然后，您可以对应用程序进行排序并将结果保存到同一表的另一列或具有表外键的新表中。

当然，您可以使用 pl/sql 过程，但这将是一个更难以维护的代码，即使它具有更好的运行时性能。

# php - mysql查询使用另一个查询的数组结果

> ID：11074237
> 
> 赞同：1
> 
> 时间：2012-06-17T19:37:56.407
> 
> 标签：php, mysql, arrays, mysqli

我有一个简单的查询，可以找到在给定纬度和经度一定距离内的城市。

```
$query = "SELECT city,state,((ACOS(SIN($lat * PI() / 180) * SIN(lat * PI() / 180) + COS($lat * PI() / 180) * COS(lat * PI() / 180) * COS(($lon - lon) * PI() / 180)) * 180 / PI()) * 60 * 1.1515) AS distance FROM us_cities WHERE population<>'' HAVING distance<=30 ORDER BY distance ASC limit 1, 10"; 
```

然后显示结果：

```
$rows = mysqli_num_rows($result);           
for ($i = 0; $i < $rows; ++$i) {            
$row = mysqli_fetch_assoc($result);
echo $i+1;
echo $row['city'] . "<br />";
echo $row['state'] . "<br />";
} 
```

我想要做的不是回显结果，而是采用该数组并执行另一个查询，该查询在另一个表中包含有关这些城市的信息，然后回显结果。有没有办法我可以做到这一点而不必做 10 个子查询：

```
Select * FROM table2 WHERE city=city AND state=state; 
```

我怎么说“从 table1 中获取城市和州的数组，并使用该数组从 table2 中选择所有内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T19:40:59.833

两者之间的简单`INNER JOIN`将完成这项工作：

```
SELECT 
  /* Need to add table name or alias in select list since both tables have these cols */
  us_cities.city,
  us_cities.state,
  ((ACOS(SIN($lat * PI() / 180) * SIN(lat * PI() / 180) + COS($lat * PI() / 180) * COS(lat * PI() / 180) * COS(($lon - lon) * PI() / 180)) * 180 / PI()) * 60 * 1.1515) AS distance 
FROM
   us_cities
   /* Join on city and state */
   INNER JOIN table2 
      ON us_cities.city = table2.cities 
      AND us_cities.state = table2.state
WHERE population <>''
HAVING distance<=30
ORDER BY distance ASC 
limit 1, 10 
```

# matlab - 修改时间向量

> ID：11074250
> 
> 赞同：0
> 
> 时间：2012-06-17T19:39:57.777
> 
> 标签：matlab, datetime, interpolation

我有一个时间向量（格式 h、min、sec、msec）。

```
TIME_=
[120844.950000000
120853.870000000
120854.120000000
120854.370000000
120854.620000000
120854.860000000
120855.100000000
120859.980000000
120900.220000000
120900.490000000

.
.
.
121024.420000000
]; 
```

现在我想让它统一

```
TIME_NEW=[STARTTIME: INCREMENT:ENDTIME ]; % INCREMENT=0.2sec; 
```

我看到 matlab 中有可用的功能`setuniformtime`。

我希望有喜欢

```
TIME_NEW= setuniformtime(TIME_(:,1),'StartTime',TIME_(1,1),'EndTime',TIME_(end,1),'Interval',0.2); 
```

但是我没有这个matlab版本。有什么帮助吗？

我的时间格式有问题

```
ith element 
```

TIME_NEW= [ 120859.980000000 , 120859.98000000+0.2 , 120860.18 ]

现在应该是`120860.18-->120900.18.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T00:25:33.020

听起来问题的根源在于，对于时间值，您使用的数值不符合正常的 base-10（或 base-anything）规则。如果您想继续使用这种格式，您应该做的是
1) 转换为以秒为单位的时间（或仅在常规编号系统中的某个其他单位）
2) 以秒为单位创建统一向量（或其他单位）
3) 转换回到你的其他格式。

要将您的格式转换为秒，您可以执行以下操作：

```
#% format = hhmmss.msec
TIME_     = 120859.98 #% and others if you want
HOURS = floor(TIME_/10000);
MINS  = floor(mod(TIME_,10000) / 100 );
SECS  = mod(TIME_,100); #% keep the milliseconds part too
TIME_IN_S = HOURS*3600 + MINS*60 + SECS #% convert hours/mins/secs to seconds 
```

您已经知道如何进行间距。剩下的就是转换回原始格式。

```
HOURS_PLACE = floor(TIME_IN_S/3600) * 10000;
MINS_PLACE  = floor(mod(TIME_IN_S,3600),60) * 100;
SECS_PLACE  = mod(TIME_IN_S,60);
UNIFORM_TIME = HOURS_PLACE + MINS_PLACE + SECS_PLACE; 
```

这应该可以消除秒位置大于 60 等的“问题”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:57:50.847

您已经或多或少地写下了答案：

```
time_new = [time(1):0.2:time(end)]; 
```

当然，`time(end)`输出向量中很可能不会出现 的值。

# ruby-on-rails - Rails升级未定义方法`cookie_verifier_secret`

> ID：11074251
> 
> 赞同：4
> 
> 时间：2012-06-17T19:40:01.647
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, upgrade

在上一个版本中收到弃用警告消息。

现在我根本无法运行服务器，我得到了 `config/initializers/cookie_verification_secret.rb:7:in <top (required)>': undefined method cookie_verifier_secret=' for ActionController::Base:Class (NoMethodError)`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T12:26:04.893

解决方法是改变：

```
config/initializers/cookie_verification_secret.rb 
```

改变：

```
ActionController::Base.cookie_verifier_secret= 
```

到

```
ActionController::Base.config.secret_token= 
```

# actionscript-3 - BlazeDS + Flash Builder：关于设置 Web 应用程序参数

> ID：11074252
> 
> 赞同：0
> 
> 时间：2012-06-17T19:40:02.083
> 
> 标签：actionscript-3, apache-flex, blazeds

我有一个具有以下设置的工作 Flex/BlazeDS 应用程序（用于简单的 AMF 远程处理）：

服务器配置.xml：

```
<channel-definition id="my-secure-amf" class="mx.messaging.channels.SecureAMFChannel">
    <endpoint url="https://www.mydomain.com:443/myapp/messagebroker/amfsecure.amf" 
          class="flex.messaging.endpoints.AMFEndpoint"/>
    <properties>
        <add-no-cache-headers>false</add-no-cache-headers>
        <polling-enabled>false</polling-enabled>
    </properties>
</channel-definition> 
```

在 Flash Builder 4.6 > 属性 > Flex 服务器中：

```
Root URL: http://www.mydomain.com/myapp
Context Root: /myapp/ 
```

问题是我的所有 java 文件都位于一个目录中：

```
WEB-INF/classes/ 
```

并且简单地使用系统默认包（例如在java文件中没有指定包）。最终，文件的绝对数量变得不堪重负。为了改进我的组织，我开始使用包，并在此过程中创建了以下目录：

```
WEB-INF/classes/com/mydomain/
WEB-INF/classes/com/mydomain/mytools/
WEB-INF/classes/com/mydomain/hr/
WEB-INF/classes/com/mydomain/utilities/
etc... 
```

现在目录中没有 java 文件`WEB-INF/classes/`（它们已被移动到它的各种子目录中）。

我的问题是如何修改`services-config.xml`文件和/或 Flash Builder > Properties > Flex Server 设置？我尝试了许多不同的设置，但总是收到以下错误：

```
Channel.Connect.Failed error NetConnection.Call.Failed: HTTP: Status 404: url:... 
```

我的想法是大多数人使用`WEB-INF/classes/com/mydomain/`架构来组织他们的项目，所以我希望有人可以与我分享他们的设置是什么样的。

Adobe 的网站提供了以下信息，但我看不出我做错了什么：`The root folder specifies the top-level directory of the web application (the directory that contains the WEB-INF directory). The root URL specifies the URL of the web application, and the context root specifies the root of the web application.`

提前感谢您的任何评论/提示尝试什么。

更新1：

这是我的目的地（来自 remoting-config.xml）：

```
<destination id="mySecureDestination">
    <channels>
        <channel ref="my-secure-amf"/>
    </channels>
        <properties>
            <source>myApplicationClass</source> 
            <scope>application</scope>
        </properties>
</destination> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:51:53.870

在`destination`定义的源标记中，您必须编写目标类的完整类路径。所以假设你搬到`myApplicationClass`，`WEB-INF/classes/com/mydomain/`这应该是：

```
<destination id="mySecureDestination">
    <channels>
        <channel ref="my-secure-amf"/>
    </channels>
        <properties>
            <source>com.mydomain.myApplicationClass</source> 
            <scope>application</scope>
        </properties>
</destination> 
```

# c - 如何计算 C 字符串中字符“/”的出现次数？

> ID：11074256
> 
> 赞同：5
> 
> 时间：2012-06-17T19:40:31.350
> 
> 标签：c, string

如何计算 C 字符串中出现的次数`/`？

我可以做这个：

```
int countSlash(char str[])
{
    int count = 0, k = 0;
    while (str[k] != '\0')
    {
          if (str[k] == '/')
              count++;
          k++;
    }
    return count;
} 
```

但这不是一种优雅的方式；关于如何改进它的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T19:44:09.777

[`strchr`](http://en.cppreference.com/w/c/string/byte/strchr)会做一个更小的循环：

```
ptr = str;

while ((ptr = strchr(ptr '/')) != NULL)
    count++, ptr++; 
```

我应该补充一点，我不会为了简洁而赞同简洁，我将始终选择*最清晰*的表达方式，所有其他条件都相同。我确实发现`strchr`循环更*优雅*，但问题中的原始实现很清楚并且存在于一个函数中，所以我不喜欢另一个，只要它们都通过单元测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T19:50:10.347

你的已经足够好了。也许，这对某些人来说看起来更漂亮：

```
int countSlash(char * str)
{
    int count = 0;
    for (; *str != 0; ++str)
    {
        if (*str == '/')
            count++;
    }
    return count;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T08:56:42.947

通用接口、明显的方法、适当的类型和纯粹的惯用表达方式：

```
size_t str_count_char(const char *s, int c)
{
    size_t count = 0;

    while (s && *s)
         if (*s++ == c)
             ++count;

    return count;
} 
```

Oli Charlesworth 可能会引起对同一行的作业和条件的担忧，但我认为它隐藏得相当好；-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T19:52:48.177

这也将起作用：

```
int count=0;
char *s=str;
while (*s) count += (*s++ == '/'); 
```

# jquery - jQuery click 事件在单击后停止工作

> ID：11074261
> 
> 赞同：0
> 
> 时间：2012-06-17T19:41:50.740
> 
> 标签：jquery, load, click, live

我有一个 div (#replyLoop)，当点击它时，链接 id *lmor*从 href 元素*data-posts*中提取内容。第一次点击可以正常工作，但之后什么都不做。我怀疑它与代码的结构有关，而不是与使用的事件有关——“live”和“click”都具有相同的结果，删除 return false 也是如此；并且仅使用链接的 data-posts 元素并删除 href 部分。（返回 false；禁用链接的 href 触发）。

当谈到 js 时，我似乎总是错过最明显的事情——我想知道这里是否是这种情况。

（tooltip-e 确保在加载新内容时调用*Tipsy函数。（工具提示））*

“实时”标记 -

```
$(function(){
$("#lmor").live("click",function() {
    $('#replyLoop').load($(this).attr('data-posts'), function(data) {
            $('.tooltip-e').tipsy({
            gravity: 'e',
            fade: true,
            html: true
            });
        });
        return false;
    });
}); 
```

“点击”标记——

```
$(function(){
$("#lmor").click(function() {
    $('#replyLoop').load($(this).attr('data-posts'), function(data) {
            $('.tooltip-e').tipsy({
            gravity: 'e',
            fade: true,
            html: true
            });
        });
    return false;
    });
}); 
```

关于我所缺少的任何想法？

**编辑** 我想通了 - 使用 .live 的组合并在适当的文件中包含“加载更多”，我已经让它工作了。

问题：它在正在加载的页面之外被调用 - 所以当它正在寻找“下一个”页面时，那个“下一个”页面还没有被推送到链接，因为它不知道它有已加载。

我还标记了实时代码以使用 's 而不是 "s。感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:17:57.540

如果我们不需要猜测会更容易回答，但这是我的猜测：#lmor 是否在第一次单击时加载到 #replyLoop 的 html 中？我猜是这样，问题是 $("#lmor").live 是在 DOM 元素#lmor 上设置的，然后当您加载新内容时，您会删除该 dom 元素并创建一个新元素。这样做的方法是：

```
$(document).on("click", "#lmor", function...); 
```

这样，当您创建新的#lmor（加载新内容时）时，它也会获取事件侦听器。

一个优化的版本可能是：

```
$("#replyLoop").on("click", "#lmor", function...); 
```

如果#lmor 在#replyLoop 内

# image-processing - 如何在图像的特定区域应用阈值？

> ID：11074263
> 
> 赞同：0
> 
> 时间：2012-06-13T06:11:29.010
> 
> 标签：image-processing, matlab

我有一个 240x20 像素的图像。我已经计算了一个最佳阈值来找到图像中的噪声。在观察到图像的特定区域后，x 方向上包含从 20 到 70 的噪声。

现在我想在该特定区域应用阈值。是否有任何简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:05:32.327

如果我正确理解您的问题，这可能会奏效（仅在八度音阶中测试）：

```
bw = im2bw(I(y1:y2, x1:x2, :), threshold);
% y1 = start row
% y2 = end row
% x1 = start column
% x2 = end row
% the last column is for color images, so you address all color channels
% bw is an extract from the image I with the threshold applied 
```

# wordpress - 是否可以使用参数重写 URL？

> ID：11074267
> 
> 赞同：0
> 
> 时间：2012-06-17T19:42:26.623
> 
> 标签：wordpress, .htaccess, url, mod-rewrite

我有这个网址`example.com/photo?people`

我想以以下形式重写此 URL：`example.com/photo/people`

可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:45:51.923

```
RewriteEngine On
RewriteBase /
RewriteRule ^photo/(\w+)$ /photo?$1 
```

# javascript - 多个密码

> ID：11074275
> 
> 赞同：1
> 
> 时间：2012-06-17T19:43:40.617
> 
> 标签：javascript

再会。我正在使用“pasuser 表单”作为网站页面的密码保护。下面的脚本只允许使用一个密码和用户名。有谁知道如何更改脚本以使用多个密码/用户名？基本上，我希望每个用户都有他唯一的密码/用户名。非常感谢您的时间和帮助。

```
function pasuser(form) {

if (form.id.value != "user") return alert("Invalid UserID");
if (form.pass.value != "pass") return alert("Invalid Password");
location = "http://tempuri.org/";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:51:20.470

客户端代码中的密码保护只是愚蠢的，但该原则可能对其他东西有用......

将用户名和密码放在一个数组中，然后遍历这些项目：

```
var pass = [
  { user: 'ebby', pwd: 'john3' },
  { user: 'john', pwd: 'kate4' },
  { user: 'kate', pwd: 'ebby1' }
];
// look for a match
var found = false;
for (var i = 0; i < pass.length; i++) {
  if (form.id.value == pass[i].user && form.pass.value == pass[i].pwd) {
    found = true;
    break; // exit from loop
  }
}
// act on the result
if (found) {
  location = "http://tempuri.org/";
} else {
  alert('User name or password is wrong.');
} 
```

注意：习惯上*不*告诉访问者用户名是否正确。登录过程不应该用于查明特定用户是否存在。（当用户名和密码在页面源中清晰可见时并不重要，但无论如何......）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-17T19:59:41.517

设置 cookie 并在身份验证期间获取它们。客户端无法查看 cookie 中的内容。但是最好使用php。

# java - 是否使用 if-else 替代 try-catch 异常处理机制

> ID：11074278
> 
> 赞同：1
> 
> 时间：2012-06-17T19:44:23.610
> 
> 标签：java, exception-handling, try-catch

最近，我正在研究抛出我们自己的异常，我想也许我们可以用它来检查“可疑”代码，然后在块`if-else`中处理它。`if`在相应的`else`块中，我们可以继续进行，就好像没有出现异常一样。

* * *

我知道使用语句来尝试捕获所有异常可能有点困难，`if`但这是可能的。另外，我想它在内存使用方面也会更好，因为我听说`try-catch`块在内存使用方面非常昂贵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:48:46.180

实际上在旧语言中没有`try...catch`关键字，您应该始终使用自己的方式来处理异常（是的，`if-else`可以使用）。

但是今天在像 Java 这样的语言中，由于检查异常，有些代码你必须使用 try/catch。因此，根据语言和您正在编码的内容，您不能完全停止使用`try...catch`块。

[http://en.wikipedia.org/wiki/Exception_handling#Checked_exceptions](http://en.wikipedia.org/wiki/Exception_handling#Checked_exceptions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:50:55.853

异常由JVM处理；客户不可能忽略已检查的异常。

您可以添加任何您喜欢的“可疑”代码验证，但您仍应在需要时使用 try/catch。

写出正确的 Java 习语。我认为您的方案没有任何优势，并且可能会让任何必须在您之后维护您的代码的人感到困惑。（那个可怜的人甚至可能在 6-12 个月后就是你。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T19:47:54.913

Try / Catch 的想法是它“捕获”您可能错过的任何专门编码的错误。我个人认为您应该尝试为您可以预见的所有条件显式编码，然后使用 Try/Catch 来处理您没有预见到的错误（并且总会有一些错误）。

# objective-c - 在后台执行任务

> ID：11074280
> 
> 赞同：0
> 
> 时间：2012-06-17T19:45:07.133
> 
> 标签：objective-c, ios

在我的应用程序中，用户按下开始按钮后，我会`for`循环执行一些代码。在此期间如何让应用程序负责用户交互？C#中有BackgroundWorker类，IOS有类似的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:49:09.507

像下面这样使用 gcd

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^  {  
   //Put your heavy code here it will not block the user interface
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T19:56:35.883

您可以像这样使用选择器：

```
[self performSelectorInBackground:@selector(yourForCycle:) withObject:nil];

-(void)yourForCycle:(id)sender {

    //Your for cycle...
} 
```

# asp.net-mvc - MVC中的模型含义

> ID：11074283
> 
> 赞同：6
> 
> 时间：2012-06-17T19:46:04.140
> 
> 标签：asp.net-mvc, model

为什么 ASP.NET MVC 中的 MODEL 有时用作与[此处](http://blog.agafonov.net.ua/image.axd?picture=2010/9/mvc-rails.png)的数据库通信的应用程序的一部分，有时用作跨应用程序传递数据的业务对象，例如[此处](http://prajwal-tuladhar.net.np/wp-content/uploads/2008/10/mvc-architecture.png)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T19:58:37.023

正如您所发现的，自从 Smalltalk 开始以来，MVC 已经朝着不同的方向发展，它经常被用来描述非常不同的架构。

Martin Fowler 在这里写了关于 MVC 演变的博客。[http://martinfowler.com/eaaDev/uiArchs.html](http://martinfowler.com/eaaDev/uiArchs.html)

这里有对 MVC、MVP 和 MVVM 之间差异的解释：http: [//joel.inpointform.net/software-development/mvvm-vs-mvp-vs-mvc-the-differences-explained/](http://joel.inpointform.net/software-development/mvvm-vs-mvp-vs-mvc-the-differences-explained/)

我的10c：

ASP.NET MVC 3 的许多示例比 MVC 更接近于 MVVM 模式。在 MVVM 中，ViewModels 是为每个 View 的数据细节量身定制的（即，“ViewModels”不仅仅是域模型，而是装饰有 View/Presentation Tier 关注点，例如验证规则、字段提示/名称、字段可见性等）。

（回到 MVC）在不需要太多后端分层的较小的以数据为中心的项目中，M 可以像 ORM 模型（例如，带有一些自动生成的 POCO 的 .EDMX）一样简单，具有一些规则。在这种情况下，MVC 几乎可以被视为一种应用程序架构。

但是在使用 MVC 的大型项目中，模型的原始（Smalltalk）“M”现在被分成几个其他层，例如域实体、服务外观、服务（例如 SOA）、业务和数据层等（所以在这里， M *VC*是表示层模式，M 是系统的其余部分）。因此，例如在这样的项目中，您的 MVC 项目的“模型”文件夹可能只是代理服务引用和代理域实体，用于与系统的“后端”通信，甚至是这种通信的抽象（例如，参见复合应用程序块中使用的服务代理/服务外观）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T20:03:52.903

因为这两件事都是 MVC 中的“模型”组件应该做的事情的一部分。

粗略地说，这三个组件的作用是：

*   **模型**实现了整个领域逻辑。这通常涉及持久性（例如数据库），但也涉及业务逻辑 - 在完美的 MVC 中，对域数据的任何修改都作为模型例程实现。
*   **控制器**从 UI（或任何面向公众的接口）读取输入，并将其分派到正确的模型例程。
*   **View**将原始模型数据转换为 UI 可以呈现给公共界面的东西。

与多层架构不同，MVC 不区分域逻辑和数据持久性：模型实现了两者。

然而，实际上，大多数 MVC 实现并不是 100% 正确的。将模型简化为数据访问层是很常见的，大部分领域逻辑都发生在控制器中。事实上，有时不清楚输入验证（控制器的工作）在哪里结束，而实际的域处理（模型的工作）从哪里开始。关于数据如何从 Model 流向 View 也存在一些争议——Controller 是读回 Model 数据并将其传递给 View，还是 Model 主动将其结果传递给 View？或者视图应该是活动部分，向模型查询数据？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T20:04:37.097

在模型视图控制器模式中，控制器处于领先地位。它确定渲染哪个视图以及传递给该视图的数据。

大多数时候，我们习惯于使用数据库来持久化模型的架构。但这不是一个要求。该模型还可以持久化到其他东西（例如 XML 或 Web 服务）。

M 也可以代表视图模型。这意味着您没有将实际模型从数据库传递到控制器以进行查看，而是您使用的是专门为视图量身定制的模型。

使用域驱动设计时，您的控制器仅用于调用域中的函数。域模型包含实际的业务逻辑并公开服务以访问您的持久性存储（存储库）并创建新对象（工厂）。控制器应尽可能平坦。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T20:05:08.700

模型是 MVC 中最难理解的部分。

有些人从业务模型的角度来思考，所以他们会做一些事情，比如让他们的模型直接与数据库对话。

其他人则根据视图模型进行思考，因此他们最终得到了更简单的数据类。

就个人而言，我支持第二组，因为我认为它提供了更好的关注点分离。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-17T19:59:38.417

第一张图片告诉您控制器从数据库构建模型，然后将模型传递给视图。第二个是相同的，但只包含一个简单的视图。

您可能需要检查：

[了解 MVC](http://www.codinghorror.com/blog/2008/05/understanding-model-view-controller.html)

[DTO 模式 + 延迟加载 + 实体框架 + ASP.Net MVC + 自动映射器](https://stackoverflow.com/questions/10908889/dto-pattern-lazy-loading-entity-framework-asp-net-mvc-auto-mapper)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-17T20:01:15.187

我认为它是“业务逻辑”或“用户从网站获得的东西，而不是它的外观”。

# php - 递归函数 - 使用计步器的安全网

> ID：11074285
> 
> 赞同：0
> 
> 时间：2012-06-17T19:46:13.623
> 
> 标签：php, recursion

在开发过程中实现递归函数时，我会使用计数器并在达到一定限制时退出，以免出错时崩溃。

问题：我应该将它保留在生产环境中，还是应该对代码进行如此良好的测试，以至于不需要这样做。

有问题的函数是生成站点地图的递归函数。迭代一组都可以有子节点的节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:56:37.340

您不能 100% 测试所有内容，但您应该尽可能多地进行测试。看看单元测试，它通常是一个非常简单的过程，将有助于消除大多数错误。

# r - 如何将案例分配到不规则的时间间隔？

> ID：11074286
> 
> 赞同：4
> 
> 时间：2012-06-17T19:46:17.163
> 
> 标签：r, time-series, zoo

我有以下数据框

```
> head(elo)
        date    elo
1 1921-12-18   1597
2 1922-05-14   1583
3 1922-05-28   1595
4 1922-09-03   1595
5 1922-10-01   1612
6 1923-06-03   1597
[...]
> head(coaches)
      surname       start        stop
        Smith  1921-12-18  1922-05-28
        White  1922-06-01  1923-06-28
        Black  1923-09-13  1928-01-01 
```

输出应如下所示：

```
 date    elo  coach
1 1921-12-18   1597  Smith   
2 1922-05-14   1583  Smith  
3 1922-05-28   1595  Smith  
4 1922-09-03   1595  White  
5 1922-10-01   1612  White  
6 1923-06-03   1597  White      
[...] 
```

如何根据和列分配`coaches$surname`给行？数据帧中的间隔不重叠。`elo``start``stop``coaches`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T20:34:17.763

```
lst <- lapply(1:nrow(coaches),function(x) 
             elo[which(elo$date >= coaches$start[x] & elo$date <= coaches$stop[x]),])
cbind(as.data.frame(do.call(rbind, lst)),
      coach = rep(coaches$surname, sapply(lst, function(x) nrow(x))))
        date  elo coach
1 1921-12-18 1597 Smith
2 1922-05-14 1583 Smith
3 1922-05-28 1595 Smith
4 1922-09-03 1595 White
5 1922-10-01 1612 White
6 1923-06-03 1597 White 
```

# c++ - new A[0] -- 合法，但有什么用？它实际上是做什么的？

> ID：11074289
> 
> 赞同：3
> 
> 时间：2012-06-17T19:46:54.153
> 
> 标签：c++, new-operator

根据 C++03 标准 (5.3.4/7)：

> 当 direct-new-declarator 中表达式的值为零时，调用分配函数来分配一个没有元素的数组。

根据我的阅读，这意味着该代码是合法的并且具有特定的效果：

```
#include <iostream>
#include <string>
using namespace std;

class A
{
public:
    A() : a_(++aa_) {};
    int a_;
    static int aa_;
};
int A::aa_ = 0;

int main()
{
    A* a = new A[0];
    // cout << "A" << a->a_ << endl; // <-- this would be undefined behavior
} 
```

当我在调试器下运行这段代码时，我看到`A`' 的构造函数从未被调用过。 `new`不抛出，并返回一个非空的、明显有效的指针。但是， at 的值`a->a_`是未初始化的内存。

问题：

1.  在上面的代码中，`a`实际指向什么？
2.  “分配一个没有元素的数组”是什么意思？
3.  分配一个元素为零的数组有什么实际用途？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T19:53:18.100

> 在上面的代码中，a 实际指向什么？

指向一个零元素数组。

> “分配一个没有元素的数组”是什么意思？

这意味着我们得到了一个有效的数组，但大小为零。我们无法访问其中的值，因为没有，但是我们现在每个零大小的数组都指向不同的位置，我们甚至可以创建一个指向过去的迭代器`&a[0]`。所以我们可以像使用其他数组一样使用它。

> 分配一个元素为零的数组有什么实际用途？

它只是使您免于`n = 0`每次调用时检查`new`。请注意，大小为零的静态数组是非法的，因为静态数组具有来自常量表达式的静态大小。此外，允许您使用一对迭代器调用任何标准或自定义算法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T19:51:46.343

您的`a`点（有效）为零连续元素，并且已经构造了零元素。表达式`a->a_`与 相同`a[0].a_`，超出范围，因此行为未定义。

此外，“处的值`a->a_`是未初始化的内存”这句话似乎没有意义：一个值就是一个值，而内存就是内存——一个值不能*是*内存。由于我们已经确定您永远不能取消引用`a`，因此要求任何类型的变量值`a`指向：`a`只是没有指向任何有用的地方是没有意义的。

`delete[] a;`释放分配的内存并销毁所有零对象仍然是完全有效的（并且是预期的？！） 。

（请注意，C 的`malloc`函数也可以使用 argument 调用`0`，但不能保证它的返回值除您可以之外`free`。在 C++ 中，`::operator new[]`实际上每次都需要返回一个*不同*的*非 null*值（取决于重用值已传递给`::operator delete[]`)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T01:18:29.780

它归结为：`new whatever[0]`导致返回一个有效地址，与任何其他当前分配的对象不同，但您不能取消引用。

它的典型用途是分配不同大小的数组的代码，因此有时您可能有一个包含正数元素的数组，但有时是一个包含零元素的数组。即使您不能取消引用它，使用“正常”（有效）指针而不是（例如）空指针仍然可以简化相当多的代码。

仅举一个例子，考虑存储数组开始地址的典型情况，以及数组末尾之外的地址（并且具有从一个到另一个遍历的循环）。使用空指针，您不能进行这样的算术运算，因此任何处理过尾指针的事情都需要对空指针进行特殊的大小写。在您无法取消引用的有效非空指针的情况下，您仍然可以在没有任何特殊情况的情况下形成起始地址和结束地址。您编写的普通循环在数组为空时执行零次迭代，而不是只为非空指针执行循环的特殊情况代码。

# android - Android UI重力=“对”不起作用

> ID：11074290
> 
> 赞同：2
> 
> 时间：2012-06-17T19:47:06.320
> 
> 标签：android, xml, android-layout, user-interface

我正在尝试构建一个 UI 屏幕。这是main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="bottom"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="0.33"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/kartoMap"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:layout_gravity="left"
        android:src="@drawable/ic_launcher" />

    <VideoView
        android:id="@+id/robotVideo"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="right"
        android:layout_weight="1" />
  </LinearLayout>

  <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="0.66"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="0.2"
        android:orientation="vertical" >

        <ToggleButton
            android:id="@+id/stepsBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:layout_weight="1"
            android:text="Steps"
            android:textOff="STEPS"
            android:textOn="STEPS" />

        <Button
            android:id="@+id/ArmsBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Arms HOLDER" />

    </LinearLayout>

    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        >

        <ImageView
            android:id="@+id/joystickRight"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:src="@drawable/joystick" />

        <ImageView
            android:id="@+id/innerCircle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/inner_circle" />

    </FrameLayout>
    </LinearLayout>
 </LinearLayout> 
```

问题出在名为“joystickRight”的 ImageView 中。我希望它被绑定到屏幕的右侧，但取而代之的是 - frameLayout 和 linearLayout 被划分在下部屏幕中，而 imageView 保持在 frameLayout 的中心。为什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:00:36.987

因为 FrameLayout 的高度和宽度都设置为 wrap_content。因此它在 FrameLayout 内对齐，该 FrameLayout 仅与图像视图一样宽。

做这个`FrameLayout android:layout_width="fill_parent"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T22:53:22.023

尝试在你想看到左边的元素和你想看到右边的元素之间的水平 LinearLayout 中添加空视图，例如：

```
 <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <View
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="1"
            />                

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

    </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T19:55:19.907

为什么不使用 a`RelativeLayout`而不是，`FrameLayout`然后为您的 joystickRight 使用选项`android:layout_alignParentRight="true"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T21:17:33.107

您应该使用 `android:layout_gravity="right" 并且视图将在父级中向右对齐。

或者您可以按照 Phobos 的建议进行操作，并将视图宽度设置为“match_parent”，然后`android:gravity`按照您的预期工作。

# javascript - 早午餐如何禁用 RequireJS 模块包装

> ID：11074297
> 
> 赞同：11
> 
> 时间：2012-06-17T19:47:41.487
> 
> 标签：javascript, coffeescript, angularjs, brunch

> **更新：** 对于任何有兴趣将[早午餐](http://brunch.io/)与[AngularJS](http://angularjs.org/)一起使用的人，我已经整理了一个种子项目[angular-brunch-seed](https://github.com/scotch/angular-brunch-seed)

我正在使用带有[AngularJS的](http://angularjs.org/)[早午餐](http://brunch.io/)。[AngularJS](http://angularjs.org/)提供了一个模块系统，因此使用 commonJS / AMD 导入文件的需要是多余的。是否可以对目录中的文件禁用此功能？本质上，我希望它像对目录一样编译未更改的文件。`/app``/vendor`

所以首选的结果是：

```
 joinTo:
    'js/app.js': /^app/
    'js/vendor.js': /^vendor/ 
```

两者都包含`js/app.js`并`js/vender.js`包含来自每个文件夹的编译文件，但都没有包装。

有没有人有任何想法？

***更新*** 语法从@jcruz回答时发生了变化。这是现在执行此操作的方法。

最后，我使用了@jcruz 答案的修改版本。

```
exports.config =
  modules:
    definition: false
    wrapper: (path, data) ->
      """
(function() {
  'use strict';
  #{data}
}).call(this);\n\n
      """
  files:
    javascripts:
      defaultExtension: 'coffee'
      joinTo:
        'js/app.js': /^app/
        'js/vendor.js': /^vendor/ 
```

默认情况下，“原始”包装器不包括咖啡脚本的标准包装器。通过将 jsWrapper 设置为：

```
wrapper: (path, data) ->
  """
(function() {
  'use strict';
  #{data}
}).call(this);
  """ 
```

文件将按预期包装。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-16T07:53:44.383

这已更改为模块配置，据我所知： [https ://github.com/brunch/brunch/blob/stable/docs/config.md#modules](https://github.com/brunch/brunch/blob/stable/docs/config.md#modules)

```
exports.config =
  paths:
    ...
  files:
    ...
  modules:
    wrapper: false
    definition: false 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T16:57:46.270

最近刚刚在[https://github.com/brunch/brunch/commit/ec158cffd1b66d5db2093cf766000673aa0dd3a5中添加了禁用模块包装的功能](https://github.com/brunch/brunch/commit/ec158cffd1b66d5db2093cf766000673aa0dd3a5)

我不相信带有这些功能的版本在 npm 上，但你可以从 github repo 重新安装早午餐

完成早午餐后，在 config.coffee 中将 jsWrapper 设置为“raw”

像这样的东西...

```
exports.config =
  jsWrapper: 'raw'
  files:
    javascripts:
      defaultExtension: 'js'
      joinTo:
        'javascripts/app.js': /^app/
        'javascripts/vendor.js': /^vendor/ 
```

'brunch b' 和包装代码应该消失

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-30T05:49:28.030

从（几乎）2017 年 1 月开始，必须将 npm 启用声明为 false 以及模块设置。不过，我花了一段时间才发现。（通过[GitHub 问题](https://github.com/brunch/brunch/issues/1315#issuecomment-214185074)找到了这个）。希望这可以帮助。干杯。

这是一个工作配置文件：

```
// See http://brunch.io for documentation.
module.exports = {
    files: {
      javascripts: {
        joinTo: {
          '/js/app.js': /^app/,
          '/js/vendor.js': /^(?!app)/
        }
      },
      stylesheets: {
        joinTo: 'css/app.css'
      }
    },

    paths: {
      public: '/priv/static'
    },

    npm: {
      enabled: false
    },

    modules: {
      wrapper: false,
      definition: false
    }
} 
```

# javascript - Codeigniter 将常量发送到 js.php 文件

> ID：11074301
> 
> 赞同：1
> 
> 时间：2012-06-17T19:48:17.837
> 
> 标签：javascript, codeigniter

我有单独的配置 js 文件，它包含在标题中。

```
<script type="text/javascript" src="<?php echo base_url();?>assets/js/config.js.php"></script> 
```

在这个文件中，我保留了以后 js 中需要的所有配置 js 变量。一个文件如下所示：

```
var CONFIG = (function() {                  
     var private = {
         'IMAGE_DIR': 'example1',
         'UPLOAD_IMAGE_LANG': 'Upload photo',
         'BASE_URL':'',
         'USER_UPLOAD_URL':''

     };

     return {
        get: function(name) { return private[name]; }
    };
})(); 
```

我遇到的问题是如何将值从 php CI 配置常量传递到这个文件，所以我不需要在两个地方输入相同的配置值。

tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T05:49:17.703

You would load that dynamic JS from your controller via a view.

Something like this

[https://stackoverflow.com/a/10110790/876117](https://stackoverflow.com/a/10110790/876117)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T20:06:51.553

CodeIgniter 的课程将为您提供您能想到的所有信息。如果你这样做...

```
<?php
 echo "<pre>";
 print_r($this->session);
 echo "</pre>";
?> 
```

它将显示大量信息。这是我运行它时的输出示例。

```
[config] => CI_Config Object
(
    [config] => Array
        (
                [base_url] => http://localhost/test/root/
                [index_page] => 
                [uri_protocol] => AUTO
                [url_suffix] => 
                [language] => english
                [charset] => UTF-8
                [enable_hooks] => 
                [subclass_prefix] => MY_
                [permitted_uri_chars] => a-z 0-9~%.:_\-
                [allow_get_array] => 1
                [enable_query_strings] => 
                [controller_trigger] => c
                [function_trigger] => m 
```

这只是它输出的数据的 1%。您应该能够在其中找到所需的数据，然后像使用任何数组一样引用它。你可以看到“base_url”在那里。[在此处](http://codeigniter.com/user_guide/libraries/sessions.html)阅读有关 CodeIgniter 会议的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T22:01:47.040

我会使用普通的PHP：

```
<?php require_once('../../application/config/your_file.php'); ?>

...

'IMAGE_DIR': <?php echo $config['IMAGE_DIR'];?> 
```

Simple, no requirements for anything

# ios - NSURLConnection 和 NSFetchedResultsController

> ID：11074302
> 
> 赞同：0
> 
> 时间：2012-06-17T19:48:21.433
> 
> 标签：ios, core-data, nsurlconnection, nsfetchedresultscontroller, nsmanagedobjectcontext

我正在撕扯我的头发试图让它发挥作用。

我已经查看了所有与 StackOverflow 相关的问题，但我无法完成最后一步！

我有`NSFetchedResultsController`来自 Core Data 的显示数据。这一切都完美无缺。当那里有数据时，它会显示数据，一切都很好。

但是，我有一个异步更新，它从在线服务器中提取更多数据并将其保存到 Core Data。

我想要发生的是`NSFetchedResultsController`拾取这些更新，然后显示它们（即将它们动画到当前显示的 tableView 上）。

我现在的设置是这样的......

感谢您对此的回复，我又尝试了一次尝试使其正常工作，但我仍然没有看到“实时”更新。

我想我应该试着解释一下我现在在哪里。我发现我的初始设置存在一些问题，我现在已经修复了这些问题，但仍然没有。

好的，那么首先是课程以及在哪里发生的事情......

[Class = AppDelegate]
[已 managedObjectContext（主上下文）加上持久存储等...]
[方法 = mergeChanges:notifiaction 这使用 GCD 回到主线程并执行 mergeChangesWithObjectblahblah]

[Class = NetworkDataClass]
[这有它自己的 ManagedObjectContext，它在初始化时被创建（在主线程中）]
[Method = saveContext
1\. 添加 AppDelegate 作为 bgContext 的 didsavenotification 的观察者。
2\. 保存上下文。
3\. 删除 AppDelegate 作为观察者] （我知道观察正在工作，因为我在 AppDelegate 中有一个断点，当它保存时会停止。）
[方法 = getDataFromOnline（不是实际名称，但你明白了要点）
1\. GCD 到 bg 线程.
2\. 创建一个 NSURLRequest。
3\. 同步运行请求。
4\. 将数据放入类上下文中。
5.运行self saveContext]

[Class = tableViewClass]
[有tableView和NSFetchedResultsController也使用NSFetchedResultsControllerDelegate]
[Method = viewWillAppear
1.在我的网络类单例中运行getDataFromOnline方法]

我在那里有一些默认数据以确保它正在显示，当我进入 tableViewClass （上面详述）时，我可以以正确的排序顺序正确地看到数据以及正确的部分标题等......所以我可以清楚地看到fetchedresults 控制器正在工作。

我还可以看到（带有断点）它正确触发了 getDataFromOnline 方法。我可以看到数据进来了，我可以看到它是通过我的 ManagedObject 子类添加的，这一切都发生在 bgthread 中。

我还可以看到，当它保存 AppDelegate 时，它​​正在正确运行它的 mergeChanges 函数。

我唯一看不到的是正在使用新数据更新的表。

如果我 popToRootViewController 并返回我的表，那么所有新数据都在那里，所以我知道合并已经完成并且新数据已经添加和合并，但它只是在合并时没有出现。

有什么我想念的吗？

我需要在桌子上运行 reloadData 吗？我是否需要从 fetchedresultscontroller 触发“重新获取”或其他内容？

现在真的在为此苦苦挣扎。

感谢您提供的任何（更多）帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:51:50.727

我会尝试给你一些建议并重定向到一些好的链接。

一、关于你的问题

> 我是否需要将 NSFetchedResultsController 添加到“监视”以进行合并？或者仅仅创造它就足以做到这一点？

**正如Eimantas**建议的那样，您可以简单地设置`viewController`您正在用作您的代表`NSFetchedResultsController`。为此，您需要实现`NSFetchedResultsControllerDelegate`类的方法。当上下文更新时，获取的控制器将自动响应更改。

> NSManagedObjectContextObjectsDidChangeNotification 的观察者需要去哪里？是否可以在 AppDelegate 中（与 NSFetchedResultsController 所在的类不同）。

是否可以在 appDelegate 中注册并合并更改。确保您注册的通知来自您的上下文并在主线程中执行。

> 我还需要添加其他观察员吗？

不，`NSFetchedResultsControllerDelegate`很好。

> 我能做些什么来看看哪里出了问题？即 NSFetchedResultsControllerDelegate 是否应该运行我可以设置断点的任何方法？

首先，您可以查看核心数据通知是否包含您期望的对象。你可以简单地为它写一个日志。

我可以建议您阅读这个 SO question（由我编写）和**Jody Hagins**的相关答案。也许它可能有用。

[NSFetchedResultsController 不显示来自不同上下文的更新](https://stackoverflow.com/questions/10428271/nsfetchedresultscontroller-doesnt-show-updates-from-a-different-context)

如果可能的话，你能更好地解释一下你的意思是什么

> 我有一个 NSFetchedResultsController 显示来自核心数据的数据。这一切都完美无缺。当那里有数据时，它会显示数据，一切都很好。

?

您是否在不同线程中执行核心数据插入？

希望有帮助。

# jquery - jquery标签内的jquery datepicker

> ID：11074311
> 
> 赞同：0
> 
> 时间：2012-06-17T19:49:21.113
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-tabs

我有一组出现故障的 jquery datepickers，因为我将它们放在 jquery tabs 插件中，所以它们无法正常工作。

以下是代码：主页（索引）：

```
 <?php
include 'all.php';
?>
<html>
    <head>
        <meta charset=iso-8859-1" />
        <link type="text/css" href="css/smoothness/jquery-ui-1.8.21.custom.css" rel="Stylesheet" />
        <link rel="stylesheet" type="text/css" href="css.css"></link>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>    
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
        <script type="text/javascript" src="maskMoney.js"></script>

        <title>Financeiro</title>
    </head>

    <body>
        <script>
    $(function() {
        $( "#tabs" ).tabs({
            ajaxOptions: {
                error: function( xhr, status, index, anchor ) {
                    $( anchor.hash ).html(
                        "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                        "If this wouldn't be a demo." );
                }
            }
        });
    });
    </script>

        <div>
<div id="tabs">
    <ul>
        <li><a href="financeiro_ver.php">Buscar saída</a></li>
        <li><a href="financeiro_criar.php">Criar saída</a></li>
    </ul>
</div>
            </div>
        <script type="text/javascript" src="view.js"></script>
        <script type="text/javascript" src="create.js"></script>
    </body>
</html> 
```

选项卡的 javascript 代码（指日期选择器）：选项卡 1（“Buscar saída”）：

```
$(
    function(){
        $("#data1 , #data2").datepicker({ 
            dayNames              : ["Domingo", "Segunda", "Terça", "Quarta", "Quinta", "Sexta", "Sabado"], 
            dayNamesMin           : ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sab"], 
            changeMonth           : true,
            changeYear            : true,
            monthNames            : ["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],
            monthNamesShort       : ["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],
            showAnim              : "fadeIn",
            dateFormat            : "yy-mm-dd"
        });
    }
    ); 
```

选项卡 2（“Criar saída”）：

```
$(
    function(){
        $("#data").datepicker({ 
            dayNames              : ["Domingo", "Segunda", "Terça", "Quarta", "Quinta", "Sexta", "Sabado"], 
            dayNamesMin           : ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sab"], 
            changeMonth           : true,
            changeYear            : true,
            monthNames            : ["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],
            monthNamesShort       : ["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],
            showAnim              : "fadeIn",
            dateFormat            : "yy-mm-dd"
        });
    }
    ); 
```

**问题**：受人尊敬的 javascript 效果仅在第一次打开选项卡时发生，如果您更改选项卡并且更改回它会崩溃。

PS.：moneyMask 也不起作用（在制表符之前工作），但我认为它是同一个问题的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:04:17.080

您需要对选项卡进行更多配置，因为您正在 ajax 加载它们。

当您在页面中的任何位置加载新 html 时，您需要在加载后将插件绑定到该新 html，即使它与它所替换的 html 具有相同的结构、ID 等。

您可以在`load`加载 ajax 内容后触发的选项卡选项中执行此操作。您可能还想查看`cache`在每个选项卡中仅加载一次 ajax 内容的选项。

```
 $( "#tabs" ).tabs({
      load: function(event, ui) {
        var $curr_panel=$(ui.panel);
         $curr_panel.find( selector).datepicker()
     }
 }); 
```

您还可以`tabsload`在代码中的任何位置绑定到事件，而不仅仅是在选项卡初始化代码中。

[请参阅选项卡文档](http://jqueryui.com/demos/tabs/)中的事件选项卡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:19:43.443

Insted of id`#tabs`使用一个类`datepicker`

```
<script type="text/javascript">
    $(function () {
        $(".datepicker").datepicker();
    });
</script> 
```

# hardware - 如何计算内存系统延迟（访问时间）？

> ID：11074312
> 
> 赞同：1
> 
> 时间：2012-06-17T19:49:42.983
> 
> 标签：hardware, computer-science, latency, computer-architecture

我一直在寻找某种类型的方程式或解释，说明如何在给定带宽、访问之间的预充电（刷新）时间以及正在传输的数据字节数时找到内存系统的延迟（访问时间）。

此外，我不确定内存交错将如何改变这种延迟。

* * *

我能够找到这个延迟公式：

```
latency = seek time + rotational delay + transfer time + controller delay 
```

但显然它适用于硬盘驱动器，而不是系统内存。是否有系统内存延迟的公式/它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:45:09.993

我在我的手机上，所以直接参考并不容易，但我认为关于带宽的维基百科文章有一些很好的知识。

据我了解，带宽大致是`bandwidth = frequency / latency x data rate x bus width`. 也许这会有所帮助。

# java - 如何记录第 3 方库的修改？

> ID：11074313
> 
> 赞同：3
> 
> 时间：2012-06-17T19:50:02.600
> 
> 标签：java, documentation, comments

有时我需要修改第三方库以满足我的特定需求。它可以是错误修复、性能改进、添加功能等。

例如，我将 JSoup 和 Android 支持库源包含到我的项目中并进行了一些更改。我也对来自 Android 源代码的 2 个 Java 文件做了同样的事情。

我应该如何记录这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T19:58:00.753

# 规则1

不。维护库的分叉版本很痛苦，尤其是当您想要升级库并需要一次又一次地向后移植您的更改时。更不用说有一天有人会忘记您的版本并使用标准版本。

因此，请始终尝试包含在没有您更改的情况下失败的测试用例（暴露代码中显示的外部库中的错误*）*。

# 规则 0

始终将您的更改提交给原始作者/维护者。提交问题并包含您的补丁。如果您的更改值得违反规则 -1，它可能会包含在下一个版本中。

# 规则1

提交库的原始源文件而不做任何更改。然后使用描述性消息提交每一个改进/错误修复。最好包括问题/票证 ID，它将指向您（或图书馆）票务系统中的解释。

这样，在浏览此给定目录或项目的提交列表时，您可以轻松查看已更改的内容。如果提交消息不足以描述分叉和修改外部库的需要，您可以随时浏览问题/票证。同样在理想的世界中，这样的提交构成了理想的补丁（参见规则 0）。

* * *

**奖励**：我曾经有过通过[maven](/questions/tagged/maven "显示标记为“maven”的问题")插件自动分叉和修补外部库的想法。基本上，我们指示这个假设的插件在特定库上应用给定的补丁。Maven 可以轻松地下载源代码、重建、安装并自动包含修改后的版本，而不是目标工件中的原始版本。

无需维护分叉的二进制文件，只要补丁仍然干净地应用于新版本，升级就很容易。有人在这里有太多空闲时间吗？

# dns - 使用 cloudstack 云管理器进行名称解析

> ID：11074315
> 
> 赞同：0
> 
> 时间：2012-06-17T19:50:40.820
> 
> 标签：dns, cloud, fqdn

我刚刚使用 cloudstack 3.0 建立了一个云。我已经在 IP 地址为 10.129.34.15 的系统上安装了它的管理服务器，可以使用以下 url 在浏览器中访问它：“http://10.129.34.15:8080/client”

现在我在 DNS 服务器中做了如下的条目： 10.129.34.15:8080 映射到 www.cse.iitb.ac.in/rcloud

所以我可以使用浏览器访问cloudstack界面： [http ://www.cse.iitb.ac.in/rcloud/client](http://www.cse.iitb.ac.in/rcloud/client)

现在，当我使用“http://www.cse.iitb.ac.in/rcloud/client”并在界面中输入我的用户名和密码时，它会显示用户名/密码无效并且不允许我登录。但是如果我在同一个子网中使用“http://10.129.34.15:8080/client”，那么它允许我登录并且那里一切都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:10:42.760

This may not help my karma, but here goes:

Due to CloudStack being a relatively new Apache Foundation Incubator project, the best place to ask this question is on the **cloudstack-users@incubator.apache.org** email list.

You can subscribe by sending an email to **cloudstack-users-subscribe@incubator.apache.org** [details here](http://mail-archives.apache.org/mod_mbox/incubator-cloudstack-users/)

The bulk of the original development team still read the email list, so you'll get a response very quickly.

# haskell - cabal build-depends：如何找到？

> ID：11074317
> 
> 赞同：2
> 
> 时间：2012-06-17T19:50:58.980
> 
> 标签：haskell, cabal

如何找出需要进入 module.cabal build-depends 的内容？我的意思是，有些模块可能已经是 Haskell 平台的一部分，而其他模块可能不是？我如何找出/知道我必须在这里写什么，以便我提供的模块将与 cabal 一起安装在“外面”的大多数 Haskell 安装中？

我的情况是它在我的系统上运行，但不记得我实际上必须安装其他模块的导入以及我使用的 Haskell 平台的一部分。我现在如何最好地找到从我的情况到 cabal 可安装包的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T20:33:06.810

如果您使用 Cabal 构建您的项目，它只会查看 .cabal 文件中列出的模块，即使您在本地安装了其他模块。

所以你所要做的就是按原样运行它（在depends声明中没有任何内容），它会给你需要指定的每个模块一个错误。我认为该错误甚至会告诉您包的名称。

# ruby-on-rails - Rails 迁移错误 - 关系 'users' 不存在（'"users"'::regclass） - (rails 3.2.6 / Postgresql)

> ID：11074320
> 
> 赞同：1
> 
> 时间：2012-06-17T19:51:40.020
> 
> 标签：ruby-on-rails, ruby, postgresql, authlogic, database-migration

下午好，

我在让我的数据库备份和运行时遇到了严重的问题。本周早些时候我放弃了我的桌子（想要重建）并且遇到了各种各样的问题。

我做了以下事情：

```
rake db:drop:all
rake db:create:all
rake db:migrate 
```

我收到以下错误（将完整的堆栈跟踪放在底部）：

```
PG::Error: ERROR:  relation "users" does not exist
LINE 4:              WHERE a.attrelid = '"users"'::regclass
                                        ^
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"users"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum 
```

Authlogic 是这里的问题。我能够看到这个错误（真正的错误）的唯一原因是因为我隐藏了 authlogic 错误：

```
You must establish a database connection before using acts_as_authentic 
```

正如这篇文章中所建议的：[堆栈溢出线程](https://stackoverflow.com/questions/9518976/authlogic-doesnt-work-with-my-rails-3-2-app)

用户迁移：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string    :name,               :null => false
      t.string    :email,               :null => false
      t.string    :plan, :default => "basic"
      t.boolean   :verified, :default => false
      t.boolean   :admin, :default => false
      t.integer   :selected_portfolio_id
      t.datetime  :last_email_at
      t.hstore    :data

      t.string    :crypted_password,    :null => false
      t.string    :password_salt,       :null => false
      t.string    :persistence_token,   :null => false
      t.string    :perishable_token,    :null => false

      # magic fields (all optional, see Authlogic::Session::MagicColumns)
      t.integer   :login_count,         :null => false, :default => 0
      t.integer   :failed_login_count,  :null => false, :default => 0
      t.datetime  :last_request_at
      t.datetime  :current_login_at
      t.datetime  :last_login_at
      t.string    :current_login_ip
      t.string    :last_login_ip

      # optional, see Authlogic::Session::Params
      #t.string    :single_access_token, :null => false  
      t.timestamps
    end

    add_index :users, ["email"], :name => "index_users_on_email", :unique => true
    add_index :users, ["persistence_token"], :name => "index_users_on_persistence_token", :unique => true
  end
end 
```

为什么 authlogic 试图加载数据库迁移？我假设这一定是问题....完整的堆栈跟踪：

```
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/postgresql_adapter.rb:1151:in `async_exec'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/postgresql_adapter.rb:1151:in `exec_no_cache'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/postgresql_adapter.rb:664:in `block in exec_query'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/notifications/instrumenter.    rb:20:in `instrument'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/postgresql_adapter.rb:663:in `exec_query'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/postgresql_adapter.rb:1276:in `column_definitions'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/postgresql_adapter.rb:859:in `columns'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/schema_cache.rb:12:in `block in initialize'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/model_schema.rb:228:in `yield'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/model_schema.rb:228:in     `default'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/model_schema.rb:228:in     `columns'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/model_schema.rb:248:in     `column_names'
/Users/brandon/Documents/authlogic/lib/authlogic/acts_as_authentic/base.rb:67:in `db_setup?'
/Users/brandon/Documents/authlogic/lib/authlogic/acts_as_authentic/base.rb:31:in `acts_as_authentic'
/Users/brandon/Dropbox/code/myapp/app/models/user_related/user.rb:14:in `<class:User>'
/Users/brandon/Dropbox/code/myapp/app/models/user_related/user.rb:1:in `<top (required)>'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:469:in `load'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:469:in     `block in load_file'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:639:in     `new_constants_in'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:468:in     `load_file'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:353:in     `require_or_load'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:502:in     `load_missing_constant'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:192:in     `block in const_missing'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:190:in `each'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:190:in     `const_missing'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/inflector/methods.rb:229:in     `block in constantize'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/inflector/methods.rb:228:in     `each'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/inflector/methods.rb:228:in     `constantize'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/core_ext/string/inflections.    rb:54:in `constantize'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activemodel-3.2.6/lib/active_model/observing.rb:189:in `block in     observe'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activemodel-3.2.6/lib/active_model/observing.rb:189:in `collect!'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activemodel-3.2.6/lib/active_model/observing.rb:189:in `observe'
/Users/brandon/Dropbox/code/myapp/app/models/user_related/user_observer.rb:2:in `<class:UserObserver>'
/Users/brandon/Dropbox/code/myapp/app/models/user_related/user_observer.rb:1:in `<top (required)>'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:469:in `load'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:469:in     `block in load_file'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:639:in     `new_constants_in'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:468:in     `load_file'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:353:in     `require_or_load'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:502:in     `load_missing_constant'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:192:in     `block in const_missing'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:190:in `each'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:190:in     `const_missing'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/inflector/methods.rb:229:in     `block in constantize'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/inflector/methods.rb:228:in     `each'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/inflector/methods.rb:228:in     `constantize'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/core_ext/string/inflections.    rb:54:in `constantize'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activemodel-3.2.6/lib/active_model/observing.rb:86:in     `instantiate_observer'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activemodel-3.2.6/lib/active_model/observing.rb:59:in `block in     instantiate_observers'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activemodel-3.2.6/lib/active_model/observing.rb:59:in `each'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activemodel-3.2.6/lib/active_model/observing.rb:59:in     `instantiate_observers'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/railtie.rb:117:in `block (2     levels) in <class:Railtie>'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:36:in     `instance_eval'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:36:in     `execute_hook'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:26:in     `block in on_load'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:25:in     `each'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:25:in     `on_load'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/railtie.rb:116:in `block in <    class:Railtie>'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:34:in     `call'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:34:in     `execute_hook'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:43:in     `block in run_load_hooks'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:42:in     `each'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:42:in     `run_load_hooks'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/railties-3.2.6/lib/rails/application/finisher.rb:59:in `block in <    module:Finisher>'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `run'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/railties-3.2.6/lib/rails/initializable.rb:55:in `block in     run_initializers'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `each'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in     `method_missing'
/Users/brandon/Dropbox/code/myapp/config/environment.rb:5:in `<top (required)>'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in     `require'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in     `block in require'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in     `load_dependency'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in     `require'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/railties-3.2.6/lib/rails/application.rb:103:in     `require_environment!'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/railties-3.2.6/lib/rails/application.rb:292:in `block (2 levels) in     initialize_tasks'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/brandon/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/Users/brandon/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
/Users/brandon/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
Tasks: TOP => db:migrate => environment 
```

**更新 1**

我能够通过注释掉“行为真实”，迁移数据库，然后重新应用来解决这个问题。虽然它是创可贴，但它似乎并不正确。我该如何正确解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:46:46.353

实际上，UserObserver 负责加载用户类，而后者又会加载产生错误的 AuthLogic 代码。

检查是否注释掉观察者配置

```
config.active_record.observers = :user_observer 
```

使问题消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T05:05:16.253

我必须这样做才能让它工作：

```
Object.const_defined?("User") 
```

# perl - perl 的 -i 不带参数是否会在 Cygwin 上创建备份文件？

> ID：11074322
> 
> 赞同：16
> 
> 时间：2012-06-17T19:51:50.253
> 
> 标签：perl, cygwin

我有一个可靠人的错误报告，在 Cygwin 和 Perl 5.14.2 上，使用`-i`没有值的 perl 开关会创建一个*.bak*备份文件。它不应该根据[perlrun](http://perldoc.perl.org/perlrun.html)中的文档：

```
If no extension is supplied, no backup is made and the current
file is overwritten. 
```

我目前无法访问 Cygwin。有没有其他人看到这种行为？你能解释一下吗？是关于创建备份文件的事情，它应该只是一个临时文件，并且无法删除它？

这是我建议重新创建它的步骤。请记住，这是针对 Cygwin 的：

1.  创建并更改为空目录
2.  在该目录中创建一个文本文件。内容不重要
3.  跑`perl -p -i -e 's/perl/Perl/g' filename`
4.  完成后检查*.bak*文件

如果您找到该备份文件，请保存答案以说明可能发生的情况。对“是的，我看到了”或“不，无法复制”的先前评论进行投票可能是非正式的民意调查。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-17T22:17:44.893

[perldoc perlcygwin](http://perldoc.perl.org/perlcygwin.html#*-Miscellaneous) sayeth（为清楚起见进行了编辑）：

> 由于 Windows 限制，文件的就地编辑`perl -i` 必须为每个正在编辑的文件创建备份。因此 Perl 会`.bak`自动添加后缀——就像调用 with 一样`perl -i.bak`——如果你使用`perl -i`没有明确的备份扩展名。

可以说，这些信息也应该在[perlport](http://perldoc.perl.org/perlport.html)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T13:43:19.730

是的。例如：

```
 # show we're in cygwin
% uname -a
CYGWIN_NT-6.1-WOW64 xzodin 1.7.15(0.260/5/3) 2012-05-09 10:25 i686 Cygwin
    # show that directory is empty
% ls
    # create a file
% touch foo
    # invoke 'perl -pi' (but do nothing)
% perl -pi -e "" foo
    # show that a backup file with extension '.bak' is created.
% ls
foo  foo.bak 
```

# ios - 在 iPad 应用程序中调用第二个视图

> ID：11074329
> 
> 赞同：0
> 
> 时间：2012-06-17T19:53:24.440
> 
> 标签：ios, ipad

我正在尝试使现有应用程序适应 iPad 应用程序。该应用程序有一个主视图，它调用“View2.xib”中的 View2。一切都运行良好，直到我输入以下内容：

```
if(!view2Controller)
{
view2Controller = [[View2Controller alloc] initWithWindowNibName:@"View2"];
}
[view2Controller showWindow:self]; 
```

这在我原来的 Cocoa 程序中有效，但在 iPad 应用程序中，它当前返回警告：“Thread1：程序收到信号”SIGBRT“在使用它时，我还收到一条消息 Method -initWithWindowNibName not found。同样，我方法 showWindow 有同样的问题。

我想知道当我尝试将其转换为 iPad 应用程序时，这个问题是如何出现的。我已经没有想法可以检查了，希望能得到一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:56:20.423

您需要将其更改为以下内容

```
if(!view2Controller)
{
     view2Controller = [[UIViewController alloc] initWithNibName:@"View2" bundle:nil]
}

//If you are in a view controller use
[self presentModalViewController:view2Controller animated:YES]; 
```

# javascript - 渐变的Javascript函数

> ID：11074330
> 
> 赞同：0
> 
> 时间：2012-06-17T19:53:38.693
> 
> 标签：javascript, dom-events, settimeout

我使用本[教程](http://www.javascriptkit.com/dhtmltutors/fadingtext.shtml)创建了一个基本的 Javascript 函数，用于在给定时间段内实现更改。

```
function fadetext(){ 
if(hex>0) {
hex-=11;
document.getElementById("sample").style.color="rgb("+hex+","+hex+","+hex+")";
setTimeout("fadetext()",20); 
}
else
hex=255
} 
```

**问题一：**如何通过`function`;输入变量 例如`fadetext(element, time)`。我无法通过简单地用变量替换值来做到这一点。

**问题2：**通过javascript逐步实现更改是标准（也是正确的）方法吗？我的困惑点是我们`fadetext()`在自己的函数中使用函数。这不会造成过载吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T19:57:52.597

您需要将函数而不是字符串传递给`setTimeout`：

```
function fadeText(element, duration) {
    ...
    setTimeout(function() {
        fadeText(element, duration);
    }, 20);
} 
```

此代码传递一个匿名函数，该函数捕获闭包中的原始参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T19:56:25.203

`fadetext()`是的，您应该为函数外部设置计时器并将`hex`外部定义为全局变量，这样您就解决了这两个问题:) 并使用`setInterval()`避免每次调用 setTimeout，并调用函数而不是字符串。（正如一位用户指出的那样，我的代码存在可重用性问题）。

```
var hex = 255;
setInterval(fadetext,20);

function fadetext(){ 
   if(hex>0) {
   hex-=11;
   document.getElementById("sample").style.color="rgb("+hex+","+hex+","+hex+")";
   }
} 
```

* * *

作为奖励，您可以研究**jQuery**，淡化（和其他动画任务）变得非常容易实现，通常在单个命令或命令行中。

# json - 将 JSON 字符串反序列化为 Haxe 中的类实例

> ID：11074340
> 
> 赞同：5
> 
> 时间：2012-06-17T19:55:02.310
> 
> 标签：json, deserialization, haxe

我正在尝试将 JSON 字符串反序列化为 Haxe 中的类实例。

```
class Action
{
    public var id:Int;
    public var name:String;

    public function new(id:Int, name:String)
    {
        this.id = id;
        this.name = name;
    }
} 
```

我想做这样的事情：

```
var action:Action = haxe.Json.parse(actionJson);
trace(action.name); 
```

但是，这会产生错误：

> TypeError：错误 #1034：类型强制失败：无法将 Object@3431809 转换为操作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:23:43.277

Json 没有映射语言特定数据类型的机制，仅支持 JS 中包含的数据类型的子集。要保留有关 Haxe 类型的信息，您当然可以构建自己的机制。

```
// This works only for basic class instances but you can extend it to work with 
// any type.
// It doesn't work with nested class instances; you can detect the required
// types with macros (will fail for interfaces or extended classes) or keep
// track of the types in the serialized object.
// Also you will have problems with objects that have circular references.

class JsonType {
  public static function encode(o : Dynamic) {
    // to solve some of the issues above you should iterate on all the fields,
    // check for a non-compatible Json type and build a structure like the
    // following before serializing
    return haxe.Json.stringify({
      type : Type.getClassName(Type.getClass(o)),
      data : o
    });
  }

  public static function decode<T>(s : String) : T {
    var o = haxe.Json.parse(s),
        inst = Type.createEmptyInstance(Type.resolveClass(o.type));
    populate(inst, o.data);
    return inst;
  }

  static function populate(inst, data) {
    for(field in Reflect.fields(data)) {
      Reflect.setField(inst, field, Reflect.field(data, field));
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-09T02:30:18.133

我扩展了[Franco 的答案](https://stackoverflow.com/questions/11074340/can-you-deserialize-a-json-string-to-a-class-instance-with-haxe/11084893#11084893)，以允许在您的 json 对象中递归地包含对象，只要`_explicitType`在该对象上设置了该属性。

例如，以下 json：

```
{
   intPropertyExample : 5,
   stringPropertyExample : 'my string',
   pointPropertyExample : {
      _explicitType : 'flash.geom.Point',
      x : 5,
      y : 6
   }
} 
```

将正确地序列化为类如下所示的对象：

```
import flash.geom.Point;

class MyTestClass
{
   public var intPropertyExample:Int;
   public var stringPropertyExample:String;
   public var pointPropertyExample:Point;
} 
```

打电话时：

```
var serializedObject:MyTestClass = EXTJsonSerialization.decode([string of json above], MyTestClass) 
```

这是代码（请注意，它使用[TJSON](https://github.com/martamius/TJSON)作为解析器，正如[CrazySam](https://stackoverflow.com/questions/11074340/can-you-deserialize-a-json-string-to-a-class-instance-with-haxe/15373807#15373807)推荐的那样）：

```
import tjson.TJSON;

class EXTJsonSerialization
{
    public static function encode(o : Dynamic) 
    {
        return TJSON.encode(o);
    }

    public static function decode<T>(s : String, typeClass : Class<Dynamic>) : T 
    {
        var o = TJSON.parse(s);
        var inst = Type.createEmptyInstance(typeClass);
        EXTJsonSerialization.populate(inst, o);
        return inst;
    }

    private static function populate(inst, data) 
    {
        for (field in Reflect.fields(data)) 
        {
            if (field == "_explicitType")
                continue;

            var value = Reflect.field(data, field);
            var valueType = Type.getClass(value);
            var valueTypeString:String = Type.getClassName(valueType);
            var isValueObject:Bool = Reflect.isObject(value) && valueTypeString != "String";
            var valueExplicitType:String = null;

            if (isValueObject)
            {
                valueExplicitType = Reflect.field(value, "_explicitType");
                if (valueExplicitType == null && valueTypeString == "Array")
                    valueExplicitType = "Array";
            }

            if (valueExplicitType != null)
            {
                var fieldInst = Type.createEmptyInstance(Type.resolveClass(valueExplicitType));
                populate(fieldInst, value);
                Reflect.setField(inst, field, fieldInst);
            }
            else
            {
                Reflect.setField(inst, field, value);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-03T15:12:45.897

用于此目的的现代、基于宏的库是[**json2object**](https://github.com/elnabo/json2object)。它可以这样使用：

```
var parser = new json2object.JsonParser<Action>();
var action:Action = parser.fromJson('{"id": 0, "name": "run"}', "action.json"); 
```

* * *

另一个选项，也是宏驱动的，是[**tink_json**](https://github.com/haxetink/tink_json)。在这种情况下，它有点冗长，因为它需要您指定应该如何使用[`@:jsonParse`metadata](https://github.com/haxetink/tink_json#custom-parsers)来解析一个类：

```
@:jsonParse(function(json) return new Action(json.id, json.name))
class Action {
// ... 
```

解析是单行的：

```
var action:Action = tink.Json.parse('{"id": 0, "name": "run"}'); 
```

# powershell - 如何从 XML 获取子节点列表

> ID：11074341
> 
> 赞同：5
> 
> 时间：2012-06-17T19:55:18.307
> 
> 标签：powershell

给定以下示例脚本（在我的硬盘上保存为**sample.txt ）：**

```
DECLARE @xVar XML
SET @xVar = 
  '<bookstore>
      <book>
        <title>Writing Secure Code</title>
        <author>
          <first-name>Michael</first-name>
          <last-name>Howard</last-name>
        </author>
        <author>
          <first-name>David</first-name>
          <last-name>LeBlanc</last-name>
        </author>
        <price>39.99</price>
      </book>
      <book>
        <title>Old Man and the sea</title>
        <author>
          <first-name>Earnest</first-name>
          <last-name>Hemmingway</last-name>
        </author>
        <price> 9.99</price>
      </book>
    </bookstore>
    '

SELECT nref.value('first-name[1]', 'nvarchar(50)') FirstName,
       nref.value('last-name[1]', 'nvarchar(50)') LastName
FROM   @xVar.nodes('//author') AS R(nref)
WHERE  nref.exist('.[first-name != "David"]') = 1 
```

我想提取 XML 并确定是否已将任何子节点添加到 node **book**。对于这个用例，假设**作者**是新节点。

我写了一个有效的脚本，但它似乎非常低效：

```
Set-StrictMode -Version Latest

cls
#The list of fields that I want to find
[array]$expected_fields = "title", "price"

#extract the xml from sample.txt and put it in an xml variable
[string]$file_script = Get-Content "C:\PowerShellScripts\sample.txt"
[int]$start_pos = $file_script.IndexOf("'") + 1
[int]$end_pos = $file_script.SubString($start_pos + 1).IndexOf("'") + 1
[xml]$xml_result = $file_script.SubString($start_pos,$end_pos)

#NOTE:  THIS IS THE PART THAT FEELS WRONG
#Convert the xml snipput into CSV file and then get the headers (which is the only thing I want)
$export_file_name = "C:\PowerShellScripts\test.csv"
Select-Xml 'child::bookstore/book' $xml_result  | Select-Object -expand Node | Export-Csv $export_file_name -NoTypeInformation -Delimiter:"`t" -Encoding:UTF8 
[string]$field_names = Get-Content $export_file_name | Select-Object -first 1
Remove-Item "C:\Users\Jennifer\Google Drive\PowerShellScripts\test.csv"
[array]$found_fields = $field_names.Replace("""","").Split("`t")

#report new fields
foreach ($specific_field in $found_fields) {
    if ($expected_fields -notcontains $specific_field)
    {
        Write-Host "New field found:" $specific_field
    }
} 
```

有没有更好的方法来填充 *$found_fields* 而不是创建 CSV 文件，将第一行存储在变量中，然后删除 CSV 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T21:27:20.823

尝试将您的`-Expand`从**Node**更改为**Name**（并`Where-Object`排除*title*和*price*）

```
$xml_result.SelectNodes("bookstore/book/*") | Select-Object -Expand Name | Where-Object { ($_ -ne "title") -and ($_ -ne "price") } 
```

这将为您提供任何意外的子节点`book`。

# php - Javascript插入数组

> ID：11074343
> 
> 赞同：2
> 
> 时间：2012-06-17T19:55:26.133
> 
> 标签：php, javascript

我有类似这样的javascript代码——

```
var count=3;
var pl=new Array(count);
var il=new Array(count); 

pl.push('<?php echo $var1; ?>');
il.push('<?php echo $var2; ?>'); 
```

为什么这不起作用？

但如果我尝试这样的事情

```
pl[0]='<?php echo $var1; ?>'; 
```

有用。有人能指出问题吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T19:58:33.760

通过使用`Array`构造函数，您正在创建一个已经定义了许多“槽”的数组。在您的情况下，当您创建数组时，它们都有 3 个元素（每个元素的值都是`undefined`.）

使用 时，会向该数组`push`添加一个*额外的元素。*当您在特定索引处设置元素时，您只需设置该元素的值。

我建议不要使用`Array`构造函数，而是创建数组文字：

```
var pl = [];
var il = [];
pl.push('<?php echo $var1; ?>');
il.push('<?php echo $var2; ?>'); 
```

这一次，创建的数组没有元素，所以当你使用时，`push`你将一个元素推入索引 0，而不是 4。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T19:58:10.593

尝试这个：

```
var pl=[];
var il=[]; 
pl.push('<?php echo $var1; ?>');
il.push('<?php echo $var2; ?>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T20:56:08.937

`new Array(count)`创建一个设置为的新`Array`对象，但没有设置索引。打印数组时，您会得到times 。现在，`length``count``array.length``undefined`

```
array.push(value); 
```

是相同的

```
array[array.length] = value;
array.length ++; 
```

之后`new Array(3)`将设置元素编号 3（第 4 个元素）；

```
pl[0] = '<?php echo $var1; ?>';
pl[1] = '<?php echo $var2; ?>';
pl[2] = '<?php echo $var3; ?>'; 
```

确实“正确”工作；这是符合预期的；但是您仍然不需要初始化数组的长度；甚至在做

```
var pl = [];
pl[0] = 1;
pl[1] = 2;
pl[2] = 3; 
```

仍然会导致`pl.length`为 3。

* * *

然而，您的 PHP 代码有一个严重的缺陷，可能会破坏您的网站和使用它的用户的安全性。如果`$var1`包含一个`'`字符（因为它来自用户或者你不小心插入了它），你会在脚上开枪 - 比如说如果`$var1`设置为：

```
$var1 = "'; $.ajax('/user/delete', { method: 'post' }); '" 
```

请帮自己一个忙，并使用该`json_encode`函数来正确引用值：

```
var pl = [],
    il = []; 
pl.push(<?php echo json_encode($var1); ?>);
il.push(<?php echo json_encode($var2); ?>); 
```

甚至更好地注意到您可以使用`json_encode`轻松创建数组，如

```
var pl = <?php echo json_encode(array(1, 'a', 'b', 5.7)) ?>; 
```

这将产生 JavaScript 代码：

```
var pl = [1,"a","b",5.7]; 
```

* * *

您必须小心 unicode 字符 U+2028 和 U+2029，因为它们是[正确的 JSON 但不是正确的 JavaScript](http://timelessrepo.com/json-isnt-a-javascript-subset)。`json_encode`似乎确实将它们编码为安全的`\u2028`。`\u2029`

# vb.net - 从另一个线程访问 Excel 对象模型

> ID：11074344
> 
> 赞同：1
> 
> 时间：2012-06-17T19:55:29.447
> 
> 标签：vb.net, multithreading, excel, interop

我正在用 VB.NET 编写一个有助于生成 Excel 报告的库。
我是 .NET/VS2010 的新手，如果我试图做错事，我很抱歉。
我需要的一个功能是一个例程，它会启动一个线程来做一些工作（从 Access 数据源刷新工作簿），而主线程会检查 Excel 窗口中是否由于刷新失败而弹出任何对话框。

我遇到的问题是新线程无法引用 Excel.Application 对象。它不会产生错误，它只是冻结。
这是我的情况的演示：

```
Imports System.Threading
Imports System.Diagnostics
Imports System.Runtime.InteropServices
Imports Microsoft.Office.Interop

Public Class xlTest
    Public xlApp As Excel.Application

    Sub DoBackgroundStuff()
        MsgBox ("DoBackgroundStuff() says: " & xlApp.Version)
    End Sub

    Sub New()
        xlApp = New Excel.Application
        MsgBox ("New() says: " & xlApp.Version)

        Dim t As New System.Threading.Thread(AddressOf DoBackgroundStuff)
        t.Start()
        Do While t.IsAlive
            System.Threading.Thread.Sleep (100)
        Loop

        xlApp.Quit()
    End Sub
End Class 
```

DoBackgroundStuff 过程在尝试引用 XlApp 的任何部分时冻结，而不会引发异常。如果我在 DoBackgroundStuff 中添加一个断点并尝试观察 XlApp，它的所有属性都会变成“无法评估表达式”。
- 线程可以读取类的任何其他成员就好了。
- 我尝试了一种解决方法，方法是从进程 ID 获取 Excel.Application 对象（效果很好），但是由于此方法使用 MainWindowHandle，如果 Excel 窗口不可见，它会失败，这使解决方法对我来说不可用。

请指出我做错了什么。
非常感谢！

# android - registerMediaButtonEventReceiver / 处理音量按钮问题

> ID：11074345
> 
> 赞同：8
> 
> 时间：2012-06-17T19:56:15.537
> 
> 标签：android

在我的应用程序中，我需要处理物理按钮事件，例如音量按钮点击。为此，我使用了 audiomanager 的 registerMediaButtonEventReceiver 方法。有[一篇](http://android-developers.blogspot.com/2010/06/allowing-applications-to-play-nicer.html)与我的情况相关的文章，虽然我无法让它工作。

这是我正在使用的代码：

```
public class VolumeBroadcastActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        AudioManager manager = (AudioManager) getSystemService(AUDIO_SERVICE);
        manager.registerMediaButtonEventReceiver(new ComponentName(getPackageName(), RemoteControlReceiver.class.getName()));
    }

    public class RemoteControlReceiver extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {

            Toast.makeText(VolumeBroadcastActivity.this, "1",1).show();
            if (Intent.ACTION_MEDIA_BUTTON.equals(intent.getAction())) {
            }
        }
    }
}

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="localhost.volume.broadcast"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".VolumeBroadcastActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver android:name="RemoteControlReceiver">
            <intent-filter>
                <action android:name="android.intent.action.MEDIA_BUTTON" />
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:55:27.953

您`RemoteControlReceiver`的班级是`VolumeBroadcastActivity`. 你的清单没有这么说，我认为它不可能。使它成为一个常规类，并在其前面`android:name`加上一个点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:54:17.147

您可能需要此权限（在清单中声明）： uses-permission android:name="android.permission.BLUETOOTH"

# ruby-on-rails - 黄瓜未定义方法

> ID：11074355
> 
> 赞同：4
> 
> 时间：2012-06-17T19:57:44.913
> 
> 标签：ruby-on-rails, rspec, cucumber, rspec-expectations

我正在`cucumber`使用`capybara`

我有几个类似的错误。

对于步骤：

```
Then /I should see movies of rating 'PG' or 'R'/ do
  page.body.should match(/<td>PG<\/td>/)
  page.body.should match(/<td>R<\/td>/)
end 
```

黄瓜错误：

```
undefined method `match' for #<Cucumber::Rails::World:...> (NoMethodError)
./features/step_definitions/movie_steps.rb:37:in 
   `/I should see movies of rating 'PG' or 'R'/' 
```

对于步骤：

```
Then /I should see an empty table/ do
  page.body.scan(/<tr>/).length.should == 0
end 
```

黄瓜错误：

```
undefined method `should' for 1:Fixnum (NoMethodError)
./features/step_definitions/movie_steps.rb:46:in 
      `/I should see an empty table/' 
```

对于步骤：

```
Then /I should see all of the movies/ do
  Movie.find(:all).length.should page.body.scan(/<tr>/).length
end

undefined method `should' for 10:Fixnum (NoMethodError)
./features/step_definitions/movie_steps.rb:59:in 
    `/I should see all of the movies/' 
```

整个步骤文件在[这里](https://gist.github.com/2945554)

如您所见，这些错误非常相似，但我不明白是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T20:56:43.250

在我看来，您在 rspec-expectations 方面遇到了问题。尝试添加

```
require 'rspec/expectations' 
```

到你的 env.rb 和你的 Gemfile 的等价物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T20:07:12.227

如果您使用 MiniTest 而不是 Rspec，请尝试`assert`

IE

```
assert page.body.scan(/<tr>/).length == 0, "Expected to not find <tr> in page. " 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T21:08:11.300

只是为了提供替代方案（认为@dabai 的解决方案可能是最好的），您可以使用断言代替，例如：

```
assert Movie.find(:all).length == page.body.scan(/<tr>/).length 
```

# ms-word - 查找word文档是否打开

> ID：11074366
> 
> 赞同：0
> 
> 时间：2012-06-17T19:58:56.867
> 
> 标签：ms-word

我正在使用 VBSCRIPT 打开一个 MS Word 文档。我想知道它是否已经打开（即使未激活），如果是，请避免再次打开它。只检查 Winword 是没有用的 - 用户可能打开了其他 Word 文档。

我试过`tasklist /V /FI "IMAGENAME eq WINWORD.EXE"`了，但这只会返回当前活动的 Word 窗口的文档（WindowTitle）的名称。

我也看过

```
Set objWMIService = GetObject("winmgmts:" _
& "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set colProcessList = objWMIService.ExecQuery _
("Select * from Win32_Process") 
```

但这并没有提供任何有用的信息。

我真的想要任务管理器中的应用程序列表，但它会显示所有打开的 Word 文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:57:08.500

GetObject 不适合吗？

```
 Set doc = GetObject("Z:\Docs\Doc.doc")
 doc.Application.Visible = True 
```

如果文档已经打开，它将劫持它。如果它已关闭，它将在新的 Word 实例中打开它。

# c# - C# 对象的深拷贝

> ID：11074381
> 
> 赞同：8
> 
> 时间：2012-06-17T20:01:52.180
> 
> 标签：c#, deep-copy

我正在处理一些用 C# 编写的代码。在这个应用程序中，我有一个自定义集合，定义如下：

```
public class ResultList<T> : IEnumerable<T>
{
  public List<T> Results { get; set; }
  public decimal CenterLatitude { get; set; }
  public decimal CenterLongitude { get; set; }
} 
```

结果使用的类型是三种自定义类型之一。每个自定义类型的属性只是原始类型（ints、strings、bools、int?、bool?）。以下是其中一种自定义类型的示例：

```
public class ResultItem
{
  public int ID { get; set; }
  public string Name { get; set; }
  public bool? isLegit { get; set; }
} 
```

如何执行我创建的 ResultList 对象的深层副本。我找到了这篇文章：[Generic method to create deep copy of all elements in a collection](https://stackoverflow.com/questions/2744750/generic-method-to-create-deep-copy-of-all-elements-in-a-collection)。但是，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-17T20:07:31.570

涉及最少编码工作的方法是通过`BinaryFormatter`.

您可以定义以下扩展方法（取自[Kilhoffer 的回答](https://stackoverflow.com/a/129395/1149773)）：

```
public static T DeepClone<T>(T obj)
{
    using (var ms = new MemoryStream())
    {
        var formatter = new BinaryFormatter();
        formatter.Serialize(ms, obj);
        ms.Position = 0;
        return (T)formatter.Deserialize(ms);
    }
} 
```

…然后只需调用：

```
ResultList<T> clone = DeepClone(original); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-17T20:51:11.503

您的 ResultList 类不能与 Jon Skeet 的[示例](https://stackoverflow.com/questions/2744750/generic-method-to-create-deep-copy-of-all-elements-in-a-collection)一起使用的原因之一是它没有实现 ICloneable 接口。

在您需要克隆的所有类上实现 ICloneable，例如

```
public class ResultItem : ICloneable
{
  public object Clone()
  {
    var item = new ResultItem
                 {
                   ID = ID,
                   Name = Name,
                   isLegit = isLegit
                 };
    return item;
  }
} 
```

并且在 ResultList 上：

```
public class ResultList<T> : IEnumerable<T>, ICloneable where T : ICloneable
{
  public List<T> Results { get; set; }
  public decimal CenterLatitude { get; set; }
  public decimal CenterLongitude { get; set; }

  public object Clone()
  {
    var list = new ResultList<T>
                 {
                   CenterLatitude = CenterLatitude,
                   CenterLongitude = CenterLongitude,
                   Results = Results.Select(x => x.Clone()).Cast<T>().ToList()
                 };
    return list;
  }
} 
```

然后制作对象的深层副本：

```
resultList.clone(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-14T15:54:02.443

扩展@Georgi-it，我不得不修改他的代码来处理类型继承 List 的属性：

```
public static class ObjectCloner {
    public static T Clone<T>(object obj, bool deep = false) where T : new() {
        if (!(obj is T)) {
            throw new Exception("Cloning object must match output type");
        }

        return (T)Clone(obj, deep);
    }

    public static object Clone(object obj, bool deep) {
        if (obj == null) {
            return null;
        }

        Type objType = obj.GetType();

        if (objType.IsPrimitive || objType == typeof(string) || objType.GetConstructors().FirstOrDefault(x => x.GetParameters().Length == 0) == null) {
            return obj;
        }

        List<PropertyInfo> properties = objType.GetProperties().ToList();
        if (deep) {
            properties.AddRange(objType.GetProperties(BindingFlags.Instance | BindingFlags.NonPublic));
        }

        object newObj = Activator.CreateInstance(objType);

        foreach (var prop in properties) {
            if (prop.GetSetMethod() != null) {
                var proceed = true;
                if (obj is IList) {
                    var listType = obj.GetType().GetProperty("Item").PropertyType;
                    if (prop.PropertyType == listType) {
                        proceed = false;
                        foreach (var item in obj as IList) {
                            object clone = Clone(item, deep);
                            (newObj as IList).Add(clone);                               
                        }                           
                    }                       
                }

                if (proceed) {
                    object propValue = prop.GetValue(obj, null);
                    object clone = Clone(propValue, deep);
                    prop.SetValue(newObj, clone, null);
                }                   
            }
        }

        return newObj;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-11T14:31:20.893

这是我需要并编写的东西，它使用反射来复制每个属性（如果指定，还有私有属性）

```
public static class ObjectCloner
{
    public static T Clone<T>(object obj, bool deep = false) where T : new()
    {
        if (!(obj is T))
        {
            throw new Exception("Cloning object must match output type");
        }

        return (T)Clone(obj, deep);
    }

    public static object Clone(object obj, bool deep)
    {
        if (obj == null)
        {
            return null;
        }

        Type objType = obj.GetType();

        if (objType.IsPrimitive || objType == typeof(string) || objType.GetConstructors().FirstOrDefault(x => x.GetParameters().Length == 0) == null)
        {
            return obj;
        }

        List<PropertyInfo> properties = objType.GetProperties().ToList();
        if (deep)
        {
            properties.AddRange(objType.GetProperties(BindingFlags.Instance | BindingFlags.NonPublic)); 
        }

        object newObj = Activator.CreateInstance(objType);

        foreach (var prop in properties)
        {
            if (prop.GetSetMethod() != null)
            {
                object propValue = prop.GetValue(obj, null);
                object clone = Clone(propValue, deep);
                prop.SetValue(newObj, clone, null);
            }
        }

        return newObj;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-11T09:56:01.583

对于对象的深度处理，您可以使用以下代码：

```
public static T DeepCopy<T>(T obj) {
    var str = Newtonsoft.Json.JsonConvert.SerializeObject(obj);
    var ret = Newtonsoft.Json.JsonConvert.DeserializeObject<T>(str);
    return ret;
} 
```

# c - C线程变量在从另一个线程声明后具有值

> ID：11074382
> 
> 赞同：1
> 
> 时间：2012-06-17T20:01:58.870
> 
> 标签：c, multithreading, thread-safety, pthreads

我正在尝试在 C 中做一些简单的事情，但我很困惑。程序很简单，主要功能是根据作业队列结构处理线程。它一次最多打开 4 个线程。大约300个线程直到结束。线程函数始终相同，但参数不同。

孔代码有点长，粘贴在这里，所以我将粘贴一些部分。

使用以下参数打开线程：

```
pthread_attr_init(&attr);
pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_DETACHED); 
pthread_create(&pth, &attr, dothejob, (void *) varis); 
```

线程调用函数

```
void *dothejob(void * varis){
unsigned char * arr1;
arr1 = (unsigned char*) calloc(3000000, sizeof (unsigned char));
unsigned char * arr2;
arr2 = (unsigned char*) calloc(3000000, sizeof (unsigned char));
// doing some calculations and comparisons and stuff
unsigned int topten[10];  
// <---- here topten has some values from previous threads, but why ? 
// picking top ten and putting it in the var topten[
free(arr1);
free(arr2);
pthread_detach(pthread_self());
} 
```

如果有人知道，请帮助我。先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T20:09:54.863

当您在函数中编写此代码时：

```
unsigned int topten[10]; 
```

数组值未初始化为`0`。它们包含内存中位置`topten`指向的任何内容。`topten`使用数组中的值而不先将自己的新值写入数组是未定义的行为。如果你想让你的数组用`0`s 填充，你应该像这样初始化它：

```
unsigned int topten[10] = {0}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T20:51:56.467

`topten`是一个*自动数组*并在堆栈上分配。原则上，自动变量是未初始化的，它们的内容可以是之前堆栈中的任何内容。同样默认情况下，当您没有为新线程显式指定堆栈空间时，`pthreads`会自动管理此空间，并且可以将已加入线程的堆栈空间重用于新线程。

您创建的第一个线程为其堆栈获取一些新映射的内存，并且该内存由操作系统（或线程库）归零。后来的线程重用这个空间，它不再归零。

始终显式初始化自动变量和数组！

# apache-pig - PIG 中的多级 JSON

> ID：11074385
> 
> 赞同：3
> 
> 时间：2012-06-17T20:02:29.707
> 
> 标签：apache-pig

我是 PIG 脚本和使用 JSON 的新手。我需要在 PIG 中解析多级 json 文件。说，

```
{
     "firstName": "John",
     "lastName" : "Smith",
     "age"      : 25,
     "address"  :
     {
         "streetAddress": "21 2nd Street",
         "city"         : "New York",
         "state"        : "NY",
         "postalCode"   : "10021"
     },
     "phoneNumber":
     [
         {
           "type"  : "home",
           "number": "212 555-1234"
         },
         {
           "type"  : "fax",
           "number": "646 555-4567"
         }
     ]
 } 
```

我能够通过 JsonLoader() 解析单个级别的 json 并进行连接和其他操作，并获得所需的结果为 JsonLoader('name:chararray,field1:int .....'); 是否可以使用 PIG 0.10.0 的内置 JsonLoader() 函数解析上述 JSON 文件。如果是。请解释一下它是如何完成的并访问特定 JSON 的字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-13T07:42:30.710

您可以使用 Twitter 的 Elephant Bird 处理嵌套的 json 加载：[https ://github.com/kevinweil/elephant-bird](https://github.com/kevinweil/elephant-bird)

```
a = LOAD 'file3.json' USING com.twitter.elephantbird.pig.load.JsonLoader('-nestedLoad') 
```

这会将 JSON 解析为地图[http://pig.apache.org/docs/r0.11.1/basic.html#map-schema](http://pig.apache.org/docs/r0.11.1/basic.html#map-schema) JSONArray 被解析为地图的 DataBag。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-14T04:23:33.470

可以通过创建自己的 UDF。下面的链接显示了一个简单的 UDF 示例

[http://pig.apache.org/docs/r0.9.1/udf.html#udf-java](http://pig.apache.org/docs/r0.9.1/udf.html#udf-java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-17T07:36:24.943

C = 使用 JsonLoader('firstName:chararray,lastName:chararray,age:int,address:(streetAddress:chararray,city:chararray,state:chararray,postalCode:chararray), phoneNumber:{(type:chararray,数字：字符数组）}'）

# delphi - Delphi XE2 - 在 FireMonkey 中返回系统语言环境

> ID：11074389
> 
> 赞同：0
> 
> 时间：2012-06-17T20:03:45.863
> 
> 标签：delphi, locale, delphi-xe2, firemonkey

我有一个在 Win32 和 MacOSX 上运行的 Delphi XE2 FireMonkey 应用程序。我想返回应用程序正在运行的当前系统区域设置（例如 en_GB），无论是 Win32 还是 MacOSX。是否有一个 FireMonkey 类/属性可以提供这个，可能类似于 TOSVersion？还是其他找回方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:09:08.107

尝试[TPlatform.GetCurrentLangID](http://docwiki.embarcadero.com/Libraries/XE2/en/FMX.Platform.TPlatform.GetCurrentLangID)属性

检查这个样本

```
uses
  FMX.Platform;

procedure TForm1.FormCreate(Sender: TObject);
begin
  ShowMessage(Platform.GetCurrentLangID);
end; 
```

# python - 机械化流式下载python

> ID：11074398
> 
> 赞同：2
> 
> 时间：2012-06-17T20:05:53.620
> 
> 标签：python, mechanize, mechanize-python

我正在尝试从需要 htaccess - 样式身份验证以及 cookie 的站点下载文件，并且正在使用 python mechanize 下载这些文件。有没有办法在将整个文件加载到内存之前开始写入？

编辑：我正在使用 mechanize.Browser 来跟踪身份验证/cookie，因此我需要一种在调用 urlopen 时使用浏览器状态的方法，或者是一种更好的用户浏览器方法。

edit2：使用 urllib2 进行了重写，但如果有一个简单的解决方案，我仍然有点好奇。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-17T20:38:02.603

假设您使用[urllib2](http://docs.python.org/library/urllib2.html)进行 http 连接，答案是肯定的。 [`urlopen()`](http://docs.python.org/library/urllib2.html#urllib2.urlopen)返回一个类似文件的对象，您可以从中读取（）可以一次写入磁盘的数据块。

# nhibernate - nHibernate3 + FluentNHibernate - “CreateDate”成员在更新时不可用

> ID：11074400
> 
> 赞同：1
> 
> 时间：2012-06-17T20:06:13.043
> 
> 标签：nhibernate

我的域对象有一个“CreateDate”和“ModidfyDate”成员（DateTime）。

当用户更新域对象（Asp.Net MVC）时，我的视图模型不包含这些值。（将在我的存储库“创建”和“更新”方法中设置）

因此，当我更新一个对象时，我没有可用的“CreateDate”，因此更新方法将失败。我似乎有 2 个选项，但我也不喜欢： 1) 在“CreateDate”属性（表单中的隐藏字段）上有我的 viewmodel 标签，所以我有原始的 CreateDate 可用。2）或者，在我的“更新”存储库方法中，首先从数据库中获取原始记录并设置我要更新的对象的 CreateDate 成员（对数据库的不必要调用）

处理这个的“正常”方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:19:22.990

一个很好的处理方式`CreateDate`是`ModifyDate`使用 NHibernate 的事件监听器。

以下是一些关于如何使用`IPreInsertEventListener`and创建简单审计的示例`IPreUpdateEventListener`：

[http://ayende.com/blog/3987/nhibernate-ipreupdateeventlistener-ipreinserteventlistener](http://ayende.com/blog/3987/nhibernate-ipreupdateeventlistener-ipreinserteventlistener)
[http://nhforge.org/wikis/howtonh/creating-an-audit-log-using-nhibernate-events.aspx](http://nhforge.org/wikis/howtonh/creating-an-audit-log-using-nhibernate-events.aspx)

* * *

附带说明一下，您的方法不应该有`CreateDate`问题`Update`。你的`Update`方法看起来如何？

通常的工作流程是在 POST ActionMethod 中获取您的视图模型，使用 NHibernate 的 ISession 或您的自定义存储库从数据库中加载实体对象，然后手动或使用类似的工具将视图模型中的属性映射到实体[自动映射器](http://automapper.org/)。`CreateDate`在视图模型到实体的映射中应该忽略类似的属性。

# c - 运行 ac 程序的命令行参数

> ID：11074401
> 
> 赞同：3
> 
> 时间：2012-06-17T20:06:22.763
> 
> 标签：c

```
#include<stdio.h>
#include<math.h>

int main(int argc, char **argv){

    // read in the command-line argument
    double x,c;
    double epsilon = 1e-15;    // relative error tolerance
    double t ; // estimate of the square root of c
    //scanf("%lf",&t);
    t=**argv-'0';
    printf("%lf ",t);
    c=t;
    // repeatedly apply Newton update step until desired precision is achieved
    while (fabs(t - c/t) > epsilon*t) {
        t = (c/t + t) / 2.0;
    }
    // print out the estimate of the square root of c
    printf("%lf",t);

    return 0;
} 
```

在这个程序中，我想使用命令行参数运行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:09:41.330

命令行参数的数量在`argc`. 每个参数都在`argv[0]`,`argv[1]`等中。通常，`argv[0]`包含可执行文件的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T20:12:59.150

打开一个终端（命令行）并输入“gcc nameOfFile.c argument1 argument2”，但不要输入引号。您键入的每个参数都将传递给您的程序，并且可以通过 argv[0]、argv[1] 等访问

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T20:27:29.380

代替`scanf`（对标准输入进行操作），使用`sscanf`对字符串进行操作。
所以那将是

```
sscanf(argv[1], "%lf", &t); 
```

扫描第一个命令行参数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T20:32:59.530

看起来您想将双精度值传递给您的程序。但是您正在使用`**argv`检索从命令行传递的双重。但`**argv`实际上是一个字符。

您需要做的是使用`atof()`.

```
t = atof(argv[1]); // argv[1] is the 1st parameter passed. 
```

另一个潜在的问题是，这里：`fabs(t - c/t)`如果`t`曾经变为 0，您可能会面临*被零除*。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-15T09:19:42.143

要从终端运行命令行参数，您需要使用此语法

```
gcc filename.c

./a.out "your argument her without quotation mark" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-17T20:27:45.620

1）您需要使用 argc（#/命令行参数）和 argv[]（参数本身）。

2) 在访问命令行变量之前检查 argc 总是一个好主意（即，在您尝试使用它之前，确保您确实*获得了命令行参数）。*

3）有几种方法可以将命令行参数（字符串）转换为实数。一般来说，我更喜欢“sscanf()”。

这是一个例子：

```
#include<stdio.h>
#include<math.h>

int main(int argc, char **argv){

    double x,c;
    double epsilon = 1e-15;    // relative error tolerance
    double t ; // estimate of the square root of c

    //scanf("%lf",&t);
    if (argc != 2) {
      printf ("USAGE: enter \"t\"\n")l
      return 1;
    } 
    else  if (sscanf (argv[1], "%lf", &t) != 1) {
      printf ("Illegal value for \"t\": %s\n", argv[1]);
      return 1;
    }

    printf("%lf ",t);
    c=t;
    // repeatedly apply Newton update step until desired precision is achieved
    while (fabs(t - c/t) > epsilon*t) {
        t = (c/t + t) / 2.0;
    }
    // print out the estimate of the square root of c
    printf("%lf",t);

    return 0;
} 
```

# macos - Mac OS 风格的 TabView

> ID：11074403
> 
> 赞同：1
> 
> 时间：2012-06-17T20:06:30.210
> 
> 标签：macos, cocoa, appkit

我刚刚开始为 Mac OS X 编写代码，我对选项卡控件感到非常兴奋，就像这个：

![在此处输入图像描述](../Images/caa12ad44d42ba526288dbe92d47e6e1.png)

但我不明白如何实现它。是否有标准的 UIKit 控件或一些外部控件，或者这只是一组按钮？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T20:12:44.043

[UIKit](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKit_Framework/_index.html)是[iOS](http://en.wikipedia.org/wiki/IOS)特定的，不用于 OS X。您正在寻找[`NSToolbar`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSToolbar_Class/Reference/Reference.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T20:12:17.030

这是标准`NSToolbar`控制。您可以在 Xcode 的标准控件面板中找到它。

# ruby-on-rails - Rspec没有路由匹配

> ID：11074404
> 
> 赞同：2
> 
> 时间：2012-06-17T20:06:45.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, rspec, rspec2

rspec 出现以下错误：

```
1) LandingController landing#index returns http success
 Failure/Error: get :index
 ActionController::RoutingError:
   No route matches {:controller=>"landing"}
 # ./spec/controllers/landing_controller_spec.rb:7:in `block (3 levels) in <top (required)>' 
```

这是测试

```
require 'spec_helper'

describe LandingController do

  describe "landing#index" do
    it "returns http success" do
      get :index
      response.should be_success
    end
  end

end 
```

我将它安装为`root :to => 'landing#index'`. 所有其他测试都通过了，只有这个失败了，有人可以帮我理解为什么吗？

为了完整起见，这是来自`rake routes`

```
root                         /                                      landing#index
auth_google_oauth2_callback  /auth/google_oauth2/callback(.:format) sessions#create
                    signout  /signout(.:format)                     sessions#destroy
                  dashboard  /dashboard(.:format)                   dashboard#index 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:54:49.867

如果您使用的是 Spork，您可能需要在更新路由时重新启动服务器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-17T20:13:56.263

您是否尝试使用 访问根页面`get '/'`？应该管用。

# java - 将 JTextField 转换为带有异常的 int 数组

> ID：11074406
> 
> 赞同：0
> 
> 时间：2012-06-17T20:07:20.727
> 
> 标签：java, arrays, eclipse, exception, jtextfield

所以我一直试图弄清楚这一点，但无济于事。我必须将 JTextField 转换为 int 数组，同时有两个异常 NumberFormatException 和 ArrayIndexOutOfBoundsException。我能够找到一种方法来转换它，但是当我输入字母时它不会抛出 NumberFormatException 。

```
try {
    int j=0;
    String str = "" + numbersField.getText();
    char digit[] = str.toCharArray();
        for (int i=0; i<digit.length; i++) {
            if (Character.isDigit(digit[i])) {
                array[j]=Character.getNumericValue(digit[i]);
                System.out.print(array[j] + " "); //Checking if it works
                ++j;
            }
        }
    } catch (NumberFormatException e1) {
        System.err.println("NumberFormatException: Array can only hold integers");

    } catch (ArrayIndexOutOfBoundsException e1) {
                System.err.println("ArrayIndexOutOfBoundsException: Array can only hold up to 10 elements");
    } 
```

就个人而言，我相信它不会抛出 NumberFormatException，因为它将 JTextField 转换为 char，但我可能完全错了。任何帮助表示赞赏。

编辑：我只包含了程序的一部分，因为在我看来它有点长。数组在此之前被初始化。这部分程序的最终目标是让用户输入最多 10 个数字，同时在输入字母或超过 10 个数字时抛出异常。这是我第一次使用异常，所以我对它还是比较陌生，所以请原谅我犯的任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:20:54.297

您可以检查整个文本是否只有数字，然后将文本转换为`int`然后将所有数字放入数组。

尝试替代方案：

```
String str = numbersField.getText();

try {
    int value = Integer.parseInt(str);

    int[] array = new int[str.lenght - 1];
    j = array.length - 1;
    while (value > 0) {
        array[j] = value % 10;
        value /= 10;
        --j;
    }

} catch (NumberFormatException ex) {
    System.out.println("Enter only digits!")
} 
```

UPD：您还需要检查是否`value < 0`并显示错误（如果您不接受减号）并在转换为 int 之前使用 str.trim()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T20:41:30.017

嗯，也许这可能会有所帮助，也许不是最有效的，但可以完成它的工作：

```
 import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextField;

public class JTextFieldIntToArrayValidation extends JFrame {

    private int[] integerArray;
    private JButton button;
    private JTextField tf;

    public JTextFieldIntToArrayValidation() {
        createAndShowUI();
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JTextFieldIntToArrayValidation test = new JTextFieldIntToArrayValidation();
                test.setVisible(true);
            }
        });
    }

    private void createAndShowUI() {
        setTitle("Converting JTextField to an int array with exceptions");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        addComponentsToPane();
        addListeners();
        pack();
        tf.grabFocus();
    }

    private void addComponentsToPane() {
        button = new JButton("Convert JTextfield to array");
        tf = new JTextField(10);
        getContentPane().add(tf, BorderLayout.EAST);
        getContentPane().add(button, BorderLayout.WEST);
    }

    private void addListeners() {
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent ae) {
                String tmp = tf.getText();
                char[] chars = tmp.toCharArray();
                integerArray = new int[chars.length];

                try {

                    if (integerArray.length > 10) {//if digits entered are greater then 10\. This however only allows for single digits!!!
                        throw new ArrayIndexOutOfBoundsException("Array cannot be larger then 10: " + integerArray.length);
                    }
                    for (int i = 0; i < tmp.length(); i++) {
                        if (!Character.isLetter(chars[i])) {//if its not a letter
                            integerArray[i] = Integer.parseInt(chars[i] + "");//stops java handling chars as ints
                        } else {//its a letter
                            throw new NumberFormatException("Only valid integers must be entered no letters: " + chars[i]);
                        }
                    }
                    printArray();
                } catch (NumberFormatException | ArrayIndexOutOfBoundsException ex) {
                    JOptionPane.showMessageDialog(getContentPane(), ex.getMessage());
                }
            }
        });
    }

    private void printArray() {
        for (int i : integerArray) {
            System.out.println(i);
        }
    }
} 
```

# java - 关闭连接后无法通过本地端口连接

> ID：11074412
> 
> 赞同：2
> 
> 时间：2012-06-17T20:07:58.437
> 
> 标签：java, networking, network-programming, hole-punching

我正在尝试按照本文[http://www.brynosaurus.com/pub/net/p2pnat/](http://www.brynosaurus.com/pub/net/p2pnat/)中的描述对 NAT 的 TCP 打孔进行原型设计。

我有这段简单的代码，它试图在特定本地端口上打开与服务器的连接。我试图在公共服务器上观察 NAT 是否将两个连接都映射到同一个 NAT 映射。

```
int localPort = getFreeLocalPort();

     while (true) {

        Socket connection = new Socket(_publicServerHost,_publicServerPort,
                 getLocalSocketAddress(), localPort);

        connection.setReuseAddress(true);

        connection.close();

     } 
```

第一次连接正常。但是第二次尝试它会引发异常：

选择用于打孔的本地端口：65416

2012-06-17 15:55:21,545 错误 - 地址已在使用中：连接

2012-06-17 15:55:25,175 调试 - 详细信息：java.net.BindException：地址已在使用中：在 java.net.PlainSocketImpl.socketConnect(Native Method) 处连接 ~[na:1.6.0_24] 在 java.net .PlainSocketImpl.doConnect(PlainSocketImpl.java:351) ~[na:1.6.0_24] at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213) ~[na:1.6.0_24] at java.net.PlainSocketImpl.connect (PlainSocketImpl.java:200) ~[na:1.6.0_24] at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366) ~[na:1.6.0_24] at java.net.Socket.connect(Socket.java :529) ~[na:1.6.0_24] at java.net.Socket.connect(Socket.java:478) ~[na:1.6.0_24] at java.net.Socket.(Socket.java:375) ~[ na:1.6.0_24] 在 java.net.Socket.(Socket.java:249) ~[na:1.6.0_24]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:13:41.320

尝试`connection.setSoLinger(true, 0);`在 connection.close(); 之前直接添加。

像这样：

```
connection.setSoLinger(true, 0);
connection.close(); 
```

这会强制操作系统释放套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T21:28:49.500

选择本地港口的依据是什么？显然不是一个健全的人。您最好让系统选择它，通过指定零，并在打开后*从*套接字获取实际值（如果您需要它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:39:50.813

你解决了你的问题吗？应在分配端口之前调用 setReuseAddress()。

```
Socket connection = new Socket();
connection.setReuseAddress(true);
connection.bind( ...); 
```

# c# - WPF 中的 C# 和 XAML – 它们如何协同工作？

> ID：11074414
> 
> 赞同：5
> 
> 时间：2012-06-17T20:08:15.130
> 
> 标签：c#, wpf, xaml

在 winforms 中——有一个消息泵等待事件发生——当事件发生时——调用***C#***中的适当事件处理程序。

在 WPF 中还有 XAML。什么时候执行？C# 代码调用它还是调用 C# 代码？换句话说：事件是触发 C# 代码运行，还是触发 XAML 执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:30:26.463

似乎（如果我错了，请纠正我）WPF 在来自 winforms 的事物流中并没有真正的不同。消息泵将调用 C# 事件处理程序，表单的初始化将在一个`InitializeComponent`方法中完成。

不同之处在于`InitializeComponent`WPF 表单的方法将包括解析 XAML 文件，因此本质上，开发人员使用 XAML 而不是 C# 来描述表单的初始外观。

（当然“C#”在这里可以与“VB”互换。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T20:27:09.640

这是有关 wpf 应用程序的一些信息，它是“生命周期”。 [http://msdn.microsoft.com/en-us/library/ms743714.aspx](http://msdn.microsoft.com/en-us/library/ms743714.aspx)

这里有一些关于 InitializeComponent 的信息以及它在 Xaml 解析中所起的作用。 [InitializeComponent() 有什么作用，它在 WPF 中是如何工作的？](https://stackoverflow.com/questions/245825/what-does-initializecomponent-do-and-how-does-it-work-wpf)

我会看看是否可以找到有关 Xaml 解析的更官方的帖子。

来自[http://msdn.microsoft.com/en-us/library/aa970678.aspx](http://msdn.microsoft.com/en-us/library/aa970678.aspx)

" XAML 文件由标记编译器解析。

为该 XAML 创建一个已编译的表示并将其复制到 obj\Release 文件夹。

新部分类的 CodeDOM 表示被创建并复制到 obj\Release 文件夹。

此外，还会为每个 XAML 文件生成一个特定于语言的代码文件。例如，对于 Visual Basic 项目中的 Page1.xaml 页面，会生成一个 Page1.g.vb；对于 C# 项目中的 Page1.xaml 页面，会生成一个 Page1.g.cs。文件名中的“.g”表示该文件是生成的代码，该代码具有标记文件的顶级元素（例如 Page 或 Window）的部分类声明。该类在 C# 中使用 partial 修饰符（在 Visual Basic 中为扩展）声明，以指示该类在别处有另一个声明，通常在代码隐藏文件 Page1.xaml.cs 中。"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T20:10:32.397

XAML 解析器解析它并从中创建相应的 CLR 对象，这就是它。

# jquery - 有没有办法让默认浏览器工具提示出现得更快？

> ID：11074415
> 
> 赞同：2
> 
> 时间：2012-06-17T20:08:33.313
> 
> 标签：jquery

> **可能重复：**
> [使 alt 标签显示更快](https://stackoverflow.com/questions/2493968/make-alt-tag-display-quicker)

我想知道是否有一种简单的方法可以使默认浏览器工具提示（立即）显示得更快。

# windows - 如何在 mp3 文件中找到 X 秒的静音？

> ID：11074416
> 
> 赞同：1
> 
> 时间：2012-06-17T20:08:39.230
> 
> 标签：windows, audio, mp3, audio-analysis

我需要在 mp3 文件中找到静音。就那么简单。

例如：

*   在“file.mp3”中找到大于 X 秒的静音，如果找到 X 秒的静音，则发送错误代码 0，如果未找到静音，则发送错误代码 1。

我可以在 Batch、VBS、Ruby 或 Python 中尝试它（因为我必须练习，但我只知道 Batch）。我不知道音乐库和那些东西......

无论我是否需要 3rd 方软件来完成像 CommandLine APPS 这样的工作......

注意：静音也可以在 mp3 文件的中间。例如，在名为“隐藏曲目”的文件中，即：1 首歌曲 + 1 分钟的大静音 + 另一首歌曲（全部在 1 个 mp3 文件中）所以我需要一些东西来搜索 X selince 到整个文件中，不仅接近结尾文件的...

注意 2：我需要在 Windows 中进行。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T20:22:42.893

使用 sox 和它的[静音过滤器](http://digitalcardboard.com/blog/2009/08/25/the-sox-of-silence/)

检查输出`sox $infile -n stat`并`sox $infile -n silence 1 0.1 1% -1 0.1 1% stat`比较原始文件和修剪文件的长度应该可以解决问题

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T20:28:20.127

做这个：

*   用一些 mp3 解码库解码 mp3，你会从中得到 PCM。
*   PCM数据是一个`short`接一个，表示16位有符号数
*   您将不得不找到`short`绝对小于某个小值的连续数量的 s，例如 100（范围为 32767）
*   短裤数量的长度取决于：您想要的静音持续时间、文件中的通道数、采样频率
*   如果你有这么多更小的短裤，你就有了沉默。

请使用评论向您需要更多信息的领域添加问题，或为此添加新问题，因为任务有很多步骤，我想所有这些步骤都会使这个问题过于具体。

# perl - 如何获取 perl 模块中当前启用的一组警告检查？

> ID：11074417
> 
> 赞同：10
> 
> 时间：2012-06-17T20:08:40.027
> 
> 标签：perl

在[perllexwarn](http://perldoc.perl.org/perllexwarn.html)中定义了所有可以设置的警告。

但是这里没有关于如何打印出我当前启用的警告的内容。

例如：

```
use strict;
use warnings;

print warnings::enabled->pretty_print(); #fictional... 
```

这怎么可能？

例子：

```
use strict;
use 5.012;
use warnings;

my $aaa;
say "$aaa";

say warnings::enabled("uninitialized") ? "yes" : "no"; 
```

以上将输出：

```
Use of uninitialized value $aaa in string at y line 6.

no 
```

因此，“未初始化”警告类别是“设置”，因为它会打印警告，但`warnings::enabled("uninitialized")`不返回`true`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T22:24:28.107

阅读[perllexwarn](http://p3rl.org/perllexwarn)

> ...对模块作者有用的函数。当您想向调用模块报告特定于模块的警告时使用这些警告，调用模块已通过“警告”杂注启用警告。

如果我理解正确，这意味着函数 ( `enabled`, `warnif`) 仅适用于特定于模块的警告，不适用于标准类别。（文档中的“has”之前可能缺少“that”。）

**更新：**似乎标准类别也有效，但仅在模块中：

```
package MY;
use warnings::register;
sub S {
    my $x;
    print $x, "\t";
    print warnings::enabled("uninitialized"),"\n";
}

package main;
use warnings;
MY::S();
no warnings;
MY::S(); 
```

# java - 从 HTML 源代码中提取一个标签（使用 Java）

> ID：11074419
> 
> 赞同：-2
> 
> 时间：2012-06-17T20:09:03.867
> 
> 标签：java, android, html

在字符串中：

```
 "<span >x </span><span >y</span> <span >z</span>" 
```

我想提取第三个`<span>`标签中的数据，即“z”。如何直接引用第三个？

```
 import org.jsoup.*;
    import org.jsoup.nodes.*;
    import org.jsoup.Jsoup;
    import org.jsoup.nodes.Element;

    String str = "  <span >x </span>  <span >y</span>   <span>  z   </span>  ";
    Document doc = Jsoup.parse(str);
    Elements link = doc.getElementsByTag("span");

    for (Element link2 : link)
    {
        p= link.text();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:22:17.573

要在 Java 中查找 String 的第三个实例，请尝试以下简单操作：

```
String key = "<span >";
int index = -1;
for(int i = 0; i < 3; i++) {
    index = str.indexOf(key, index + key.length());
}

if(index > -1) {
    // Found it
    String result = str.substring(index, str.indexOf("</span>", index + key.length()));
} 
```

此外，如果只有三个`<span >`元素，您可以简单地使用：

```
index = str.lastIndexOf(key); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T20:22:34.797

我看到你正在使用 JSoup。我对此并不熟悉，但由于文档说它类似于 jQuery，我猜想像`doc.select('parent_element_selector').find('span').get(0)`.

我相信[这](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#select%28java.lang.String%29)就是你想要的。

# javascript - 更改大小后如何覆盖表格元素

> ID：11074429
> 
> 赞同：0
> 
> 时间：2012-06-17T20:10:19.277
> 
> 标签：javascript, html, css, overlay

我正在开发一个允许用户发布广告的网站——它们在黑板上显示为一张便利贴表。我使用 JSP 的 c:forEach 标记生成它们（广告存储在 XML 文件中）——每个广告都是表格的一个单元格。我添加了一个功能，允许在点击后查看广告的全部内容（我还更改了广告 div 的大小）。这是我的问题 - 我希望更大版本的广告（点击它们之后）与附近的其他广告重叠，而不是移动它们。这样的事情可能吗？

PS：对不起我的英语，我希望你明白我想要达到的目标。

* * *

或者也许我会改变我的问题 - 我想在新窗口中显示完整版的广告，但我不知道如何将整个 bean 转发到 JSP 页面（我想在新窗口中打开的页面） . 我将非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:59:41.823

是的，您可以为扩展视图设置不同的 css 类，然后在表格单元格中放置一个 div，当广告显示时，您可以为 td 设置“溢出：可见”以查看其完整大小的内容。

[有关溢出属性，请参见此链接](http://css-tricks.com/the-css-overflow-property/)

# regex - 这个正则表达式有什么问题

> ID：11074432
> 
> 赞同：0
> 
> 时间：2012-06-17T20:10:49.050
> 
> 标签：regex

我要匹配的模式是一些字符（字母+数字+连字符`(-)`），然后是 5 位数字，然后是 9 位数字。模式的每个部分由连字符分隔`(-)`5 位和 9 位部分是可选的，这意味着其中一个可能存在，而另一个可能不存在或可能两者都存在或可能两者都不存在。所以模式可以是这样的

```
bla-12-bla-98-bla-12345-123456789     all parts(characters+5-digit+9-digit)
bla-bla-123-12345                     9-digit part absent
blasd-123456789                       5-digit part absent
no-1045-numeric-bla-bla               both numeric parts absent 
```

我想出的正则表达式是这个

```
.+(\d{5})?-?(\d{9})?$ 
```

上面的推理是这样的。由于`.+`开头匹配所有字符，因此`(\d{5})?`表示 5 位数部分可能有 0 个或 1 个实例，因此使其成为可选。

因为`-?`，如果两个数字部分都不存在，那么不会有任何`-`数字部分，但如果两个数字部分都存在，那么就会有 1 `-`，所以我再次将其设为可选。

同样对于`(\d{9})?`。

但是上面的模式不匹配任何东西。我正在使用 python 所以两者`group(1)`都`group(2)`返回`None`。

以上有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:18:07.837

问题是`.+`一开始。正则表达式解释器无法推断何时`.+`应该结束。因此，您的模式确实匹配，但您的匹配组将始终`None`如您所观察到的那样。如果你只是使用

```
(\d{5})?\-?(\d{9})?$ 
```

相反，它仍然会匹配您的所有示例，并且您的匹配组将被正确识别。

# ios-simulator - AIR 本机扩展 - 缺少“library.swf”

> ID：11074434
> 
> 赞同：0
> 
> 时间：2012-06-17T20:11:02.240
> 
> 标签：ios-simulator, air-native-extension

我正在尝试使用以下命令为 iOS 模拟器打包一个 AIR 3.3 本机扩展：

> adt -package -target ane MyANE.ane extension.xml -swc MySWC.swc -platform iPhone-x86 library.swf MyLib.a

但我不断收到以下错误：

```
Missing 'library.swf' for platform: iPhone-x86 
```

我正在使用覆盖 AIR 3.3 的 Flex 4.6 SDK 创建 swc。我正在使用 -swf-verion 14 和 3.1 命名空间。我正在从同一个 swc 中提取 library.swf 文件。

好像我是按照书本做的，所以我不知道为什么它不会打包。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:07:08.723

好的，所以解决方案是从与 MySWC.swc 文件相同的路径/级别运行命令。我正在使用

```
-platform iPhone-x86 /Users/Me/library.swf 
```

这行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:52:23.247

试试看：

[http://www.adobe.com/devnet/air/articles/ios-simulator.html](http://www.adobe.com/devnet/air/articles/ios-simulator.html)

# php - 使用 XMLHttpRequest 将大型数组从 Javascript 发布到 PHP

> ID：11074435
> 
> 赞同：1
> 
> 时间：2012-06-17T20:11:44.190
> 
> 标签：php, javascript, post, xmlhttprequest

我正在尝试通过 PHP 将一个大型数组从 Javascript 发送到 mySQL。我正在尝试使用 POST，但以下方法不起作用。http.onreadystatechange 中的“警报”弹出并似乎只包含下面的代码。代码看起来很简单。任何帮助表示赞赏。

```
<?php 

if (isset($_POST['params'])) {
echo 'YES isset';
$phpobj = ($_POST['params']);
echo $phpobj;

}else{
echo 'No isset';
}

?>

<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">

if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
http=new XMLHttpRequest();
}else{// code for IE6, IE5
http=new ActiveXObject("Microsoft.XMLHTTP");
}

var url = "PostArray.php";
var params = "lorem=ipsum&name=binny";
http.open("POST", url, true);

//Send the proper header information along with the request
http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
http.setRequestHeader("Content-length", params.length);
http.setRequestHeader("Connection", "close");

http.onreadystatechange = function() {//Call a function when the state changes.
if(http.readyState == 4 && http.status == 200) {
    alert(http.responseText);
}
}
http.send(params);

</script> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-17T20:21:28.350

1.  您要传递的数据中没有名为 params 的变量，只有 lorem 和 name
2.  你甚至没有发布，因为你还没有将变量 params（在 javascript 中）传递给 http 对象

# vim - 如何遍历我的 vimscript 中的寄存器？

> ID：11074440
> 
> 赞同：3
> 
> 时间：2012-06-17T20:12:25.843
> 
> 标签：vim

我需要将所有没有空字符串的寄存器放入列表中。

首先，它们是否已经存在于某个列表中？

其次，如果他们没有，是否有一种更简单的方法可以将它们放入列表中，而不是手动浏览它们并检查它们是否为空？

也许我可以创建一个已定义寄存器的列表并在该列表上使用 getreg() 但我想我希望该列表已经存在所以我不必创建它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T00:30:31.847

这是我想出的：

```
" Description:
"   Get a list of all the non-empty register indexes
" Example Usage:
"   :call GetNonEmptyRegsIndex( 'print' )    """ To print the registers
"   for n in GetNonEmptyRegsIndex() | echo nr2char(n)." = ".getreg(nr2char(n)) | endfor
" Resources:
"   http://www.ibm.com/developerworks/linux/library/l-vim-script-3/index.html
"   irs channel #vim <jamessan>
function! GetNonEmptyRegsIndex( ... )
  " Create the list of register 'indexes' where the the elements are in char2nr form
  let regnum =  range(char2nr('a'), char2nr('z'))
  let regnum += range(char2nr('0'), char2nr('9'))
  let regstr =  ['"','-','*','%','/','.','#',':']
  let regnum += map(regstr, 'char2nr(v:val)')

  " Remove the registers that are empty
  "let regnum = filter( regnum, 'getreg(nr2char(v:val)) != ""' )
  let regnum = filter( regnum, 'getreg(nr2char(v:val)) !~ "^$"' )

  " Remove the registers that are just spaces
  let regnum = filter( regnum, 'getreg(nr2char(v:val)) !~ "^\s\+$"' )

  " Remove the registers that have no alpha-num
  "let regnum = filter( regnum, 'getreg(nr2char(v:val)) !~ "^\W\+$"' )
  return regnum
endfunction 
```

必须从 string 转换为 num 并再次返回使代码有点难看，但它可以工作。

这是自动完成注册信息的完整工作解决方案。稍后我可能会对其进行更多调整，但它为我提供了我想要的基础知识。

```
inoremap <F5> <C-R>=AutoCompleteRegs()<CR>

function! AutoCompleteRegs()
  call complete( col('.'), GetNonEmptyRegs() )
  return ''
endfunction

" Description:
"   Get a list of all the non-empty registers.
function! GetNonEmptyRegs()
  " Create the list of register 'indexes' where the the elements are in char2nr form
  let regIndexNum = GetNonEmptyRegsIndex()

  " Convert the list of indexes to values
  let regs = map(regIndexNum, 'getreg(nr2char(v:val))')
  "let regs = map(regs, 'substitute(v:val,  "^(.*)", "\\U\\1", "g")')
  "let regs = map(regs, "echo substitute(v:val,  '^(.*)', '\U\1', 'g')")
  return regs
endfunction

" Description:
"   Get a list of all the non-empty register indexes
" Example Usage:
"   :call GetNonEmptyRegsIndex( 'print' )    """ To print the registers
"   for n in GetNonEmptyRegsIndex() | echo nr2char(n)." = ".getreg(nr2char(n)) | endfor
" Resources:
"   http://www.ibm.com/developerworks/linux/library/l-vim-script-3/index.html
"   irs channel #vim <jamessan>
function! GetNonEmptyRegsIndex( ... )
  " Create the list of register 'indexes' where the the elements are in char2nr form
  let regnum =  range(char2nr('a'), char2nr('z'))
  let regnum += range(char2nr('0'), char2nr('9'))
  let regstr =  ['"','-','*','%','/','.','#',':']
  let regnum += map(regstr, 'char2nr(v:val)')

  " Remove the registers that are empty
  "let regnum = filter( regnum, 'getreg(nr2char(v:val)) != ""' )
  let regnum = filter( regnum, 'getreg(nr2char(v:val)) !~ "^$"' )

  " Remove the registers that are just spaces
  let regnum = filter( regnum, 'getreg(nr2char(v:val)) !~ "^\s\+$"' )

  " Remove the registers that have no alpha-num
  "let regnum = filter( regnum, 'getreg(nr2char(v:val)) !~ "^\W\+$"' )
  return regnum
endfunction 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T21:15:44.130

没有这样的列表，至少不能用 vimscript 访问。您可以解析由 捕获的`:silent reg`（`silent`没有可见输出，但仍可捕获）的输出，`:redir`但我不太喜欢这个命令（由于“没有嵌套重定向”以及 while 目标变量将在该位置创建的事实在第一个 redir 发生的地方，它填充在第二个 redir 发生的地方，并在那里按名称引用，从而可以将数据附加到任何变量或抛出错误，如`E121: Undefined variable`)。我只是不喜欢这种不可预测的命令。

# javascript - 我可以检测到传递给 javascript 方法的未使用的额外参数吗？

> ID：11074444
> 
> 赞同：1
> 
> 时间：2012-06-17T20:13:08.620
> 
> 标签：javascript

在 Javascript 中，我可以调用任何具有超过必要参数数量的方法，并且额外的参数会被静默忽略。

例如

```
letters = ['a','b','c']
//correct
letters.indexOf('a')
//This also works without error or warning
letters.indexOf('a', "blah", "ignore me", 38) 
```

有没有办法检测发生这种情况的情况？

我的动机是，根据我的经验，发生这种情况的情况通常是错误。通过代码分析或在运行时识别这些错误将有助于追踪这些错误。

当人们期望对可能没有发生的基本类型进行更改时，这些情况尤其普遍。记录发生这种情况的警告

例如

```
Date.parse('02--12--2012', 'dd--MM--YYYY') 
```

注意：要清楚，我想要一个不涉及我在我的代码和其他人的代码上撒上检查的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:18:33.750

您可以使用该`arguments`对象。

```
function myFunction(param1,param2)
{
   if (arguments.length!=2)
   {
       // wrong param number!
   }
   ...
} 
```

* * *

根据您的编辑：如果您想实现自动形式的检查，**而无需触及原始功能**：

您仍然必须使用以下方法处理每个功能：

```
functionName = debug(functionName, numberOfExpectedArgs); 
```

此操作通过检查参数数量来包装函数。

所以我们保留一个示例函数*不变*：

```
// this is the original function... we want to implement argument number
// checking without insertint ANY debug code and ANY modification

function myFunction(a,b,c)
{
    return a + " " + b + " " + c;
}

// the only addition is to do this...
myFunction = debug(myFunction,3); // <- implement arg number check on myFunction for 3 args

// let's test it...    
console.log(myFunction(1,2,3));
console.log(myFunction(1,2)); 
```

你需要实现这个`debug()`功能：

```
function debug(f, n)
{
    var f2 = f;
    var fn = function()
        {
            if (arguments.length!=n) console.log("WARNING, wrong argument number");
            return f2.apply(f2, arguments);
        };
    return fn;
}

​ 
```

根据已经定义的功能，这个解决方案是完全透明的，所以它可能是你想要的。我**强烈**建议检查弃用（有一些）和跨浏览器兼容性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T21:49:54.610

JavaScript 中的函数是对象。因此，它们具有属性。你想要的可以通过长度[^(MDN)](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/length)属性来实现，它指定函数***期望****的**参数数量***。**

 **```
function say ( hello, world ) {
    alert ( 
      "arguments length = " + arguments.length + "\n" +
      "defined with = " + say.length
    );
}
say ( "this ", "brave ", "new ", "world" );​ 
```

这甚至适用于 IE8。[演示](http://jsfiddle.net/ABvbQ/)。在你的情况下，你可以做这样的[事情](http://jsfiddle.net/ABvbQ/1/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T20:41:40.493

Javascript 是一种非常动态的语言，它的许多有用功能也使得无法静态地进行一些检查。

隐式对象的存在`arguments`意味着无法自动确定函数期望所有函数有多少参数。许多 var-arg 函数不声明正式参数并`arguments`专门使用该对象。

您可以可靠地做的就是像 Cranio 建议的那样在每个功能中手动检查它。

如果您想进行自动检查，例如作为单元测试的一部分，您可以利用`length`Function 对象的属性，该属性返回形式参数的数量。对于 var-arg 函数，只是不包括检查。例如：

```
function checkNumberOfArguments(args) {
    if (args.length != args.callee.length) {
        throw new Error('Wrong number of arguments');
    }
};

// Use it like

function a(b) {
    checkNumberOfArguments(arguments);
}

a(1);
a(1,2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T20:20:38.397

您可以在函数内部使用`arguments`对象，它包含一个数组，该数组包含在调用函数时提供给函数的所有参数。

```
function x(){
  return arguments.length;
}

x()
=> 0
x(1,1,1,1,1,1,1,1,1)
=> 9 
```**

# wcf - 在 WP7 应用程序中引用 WCF 时为空配置文件

> ID：11074445
> 
> 赞同：1
> 
> 时间：2012-06-17T20:13:17.073
> 
> 标签：wcf, windows-phone-7, wcf-client

我正在尝试从 WP7 应用程序使用我自己的 WCF 服务。

WCF 服务中的配置文件

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true"/>
  </system.web>  
  <system.serviceModel>
    <services>

      <service name="mergedServices.MergedService">

        <endpoint address="" binding="wsHttpBinding" contract="mergedServices.RelationGeneratorServiceInterface">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <endpoint address="" binding="wsHttpBinding" contract="mergedServices.keywordSearchServiceInterface">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <endpoint address="" binding="wsHttpBinding" contract="mergedServices.QAServiceInterface">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <endpoint address="" binding="wsHttpBinding" contract="mergedServices.CompareWithOnePredicateInterface">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <endpoint address="" binding="wsHttpBinding" contract="mergedServices.ComparisonServiceInterface">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Design_Time_Addresses/mergedServices/" />
          </baseAddresses>
        </host>
      </service>

    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

当我在控制台客户端中引用 WCF 服务时，客户端配置文件如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <wsHttpBinding>
                <binding name="WSHttpBinding_RelationGeneratorServiceInterface"
                    closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00"
                    sendTimeout="00:01:00" bypassProxyOnLocal="false" transactionFlow="false"
                    hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="524288"
                    maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8"
                    useDefaultWebProxy="true" allowCookies="false">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="Message">
                        <transport clientCredentialType="Windows" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="Windows" negotiateServiceCredential="true"
                            algorithmSuite="Default" />
                    </security>
                </binding>
                <binding name="WSHttpBinding_keywordSearchServiceInterface" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                    allowCookies="false">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="Message">
                        <transport clientCredentialType="Windows" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="Windows" negotiateServiceCredential="true"
                            algorithmSuite="Default" />
                    </security>
                </binding>
                <binding name="WSHttpBinding_QAServiceInterface" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                    allowCookies="false">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="Message">
                        <transport clientCredentialType="Windows" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="Windows" negotiateServiceCredential="true"
                            algorithmSuite="Default" />
                    </security>
                </binding>
                <binding name="WSHttpBinding_CompareWithOnePredicateInterface"
                    closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00"
                    sendTimeout="00:01:00" bypassProxyOnLocal="false" transactionFlow="false"
                    hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="524288"
                    maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8"
                    useDefaultWebProxy="true" allowCookies="false">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="Message">
                        <transport clientCredentialType="Windows" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="Windows" negotiateServiceCredential="true"
                            algorithmSuite="Default" />
                    </security>
                </binding>
                <binding name="WSHttpBinding_ComparisonServiceInterface" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                    allowCookies="false">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="Message">
                        <transport clientCredentialType="Windows" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="Windows" negotiateServiceCredential="true"
                            algorithmSuite="Default" />
                    </security>
                </binding>
            </wsHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:8732/Design_Time_Addresses/mergedServices/"
                binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_RelationGeneratorServiceInterface"
                contract="ServiceReference1.RelationGeneratorServiceInterface"
                name="WSHttpBinding_RelationGeneratorServiceInterface">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
            <endpoint address="http://localhost:8732/Design_Time_Addresses/mergedServices/"
                binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_keywordSearchServiceInterface"
                contract="ServiceReference1.keywordSearchServiceInterface"
                name="WSHttpBinding_keywordSearchServiceInterface">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
            <endpoint address="http://localhost:8732/Design_Time_Addresses/mergedServices/"
                binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_QAServiceInterface"
                contract="ServiceReference1.QAServiceInterface" name="WSHttpBinding_QAServiceInterface">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
            <endpoint address="http://localhost:8732/Design_Time_Addresses/mergedServices/"
                binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_CompareWithOnePredicateInterface"
                contract="ServiceReference1.CompareWithOnePredicateInterface"
                name="WSHttpBinding_CompareWithOnePredicateInterface">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
            <endpoint address="http://localhost:8732/Design_Time_Addresses/mergedServices/"
                binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_ComparisonServiceInterface"
                contract="ServiceReference1.ComparisonServiceInterface" name="WSHttpBinding_ComparisonServiceInterface">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

问题是当我尝试使用 WP7 项目中的 WCF 服务时，当我引用该服务时，这是配置文件中的内容：

```
<configuration /> 
```

就是这样............当我启动应用程序时，出现以下运行时错误：

```
System.Collections.Generic.KeyNotFoundException was unhandled
  Message=KeyNotFoundException
  StackTrace:
       at System.ThrowHelper.ThrowKeyNotFoundException()
       at System.Collections.Generic.Dictionary`2.get_Item(String key)
       at System.ServiceModel.Configuration.ServiceModelSectionGroup.get_Client()
       at System.ServiceModel.Description.ConfigLoader.LookupChannel(String configurationName, String contractName, Boolean wildcard)
       at System.ServiceModel.Description.ConfigLoader.LoadChannelBehaviors(ServiceEndpoint serviceEndpoint, String configurationName)
       at System.ServiceModel.ChannelFactory.ApplyConfiguration(String configurationName)
       at System.ServiceModel.ChannelFactory.InitializeEndpoint(String configurationName, EndpointAddress address)
       at System.ServiceModel.ChannelFactory`1..ctor(String endpointConfigurationName, EndpointAddress remoteAddress)
       at System.ServiceModel.ChannelFactory`1..ctor(String endpointConfigurationName)
       at System.ServiceModel.EndpointTrait`1.CreateSimplexFactory()
       at System.ServiceModel.EndpointTrait`1.CreateChannelFactory()
       at System.ServiceModel.ClientBase`1.CreateChannelFactoryRef(EndpointTrait`1 endpointTrait)
       at System.ServiceModel.ClientBase`1.InitializeChannelFactoryRef()
       at System.ServiceModel.ClientBase`1..ctor()
       at MergedServicesConsumer.WeetitService.QAServiceInterfaceClient..ctor()
       at MergedServicesConsumer.MainPage.button1_Click(Object sender, RoutedEventArgs e)
       at System.Windows.Controls.Primitives.ButtonBase.OnClick()
       at System.Windows.Controls.Button.OnClick()
       at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs e)
       at System.Windows.Controls.Control.OnMouseLeftButtonUp(Control ctrl, EventArgs e)
       at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName) 
```

绑定后引用应该返回配置文件，我不确定出了什么问题，我没有在 IIS 上托管 WCF，我只是在试用 WP7 应用程序期间在后台运行 WCF 库的项目模拟器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T07:33:36.983

windows phone 7 的运行时间是 silverlight，不支持`WSHttpBinding`. 您必须将服务绑定更改为`basicHttpBinding`Silverlight 项目支持的唯一绑定。:(

这`KeyNotFoundException`是由于默认绑定 ( `BasicHttpBinding`) 不存在于服务的绑定列表中（仅`WSHttpBinding`在您的服务中找到）。

如果您不能或不想接触原始`WSHttpBinding`配置的 WCF 服务，您仍然可以通过利用**适配器设计模式**来解决它。

当我开发使用`WSHttpBinding`WCF 服务的 Windows Phone 应用程序时，我遇到了这个确切的问题。最后，我必须实现一个**适配器**WCF 服务，该服务本身已`BasicHttpBinding`配置并使用原始`WSHttpBinding`服务。然后让 Windows Phone 应用程序改为使用适配器服务。

尽管这种**适配器**方法需要一些额外的工作，但它仍然是一种优雅的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:36:45.297

我遇到了同样的问题。我所做的是：
1\. 右键单击​​服务参考。
2\. 选择“配置服务参考...”
3\. 无需更改出现的对话框中的任何内容。
4\. 在对话框中单击“确定”。

这为我重新生成了“ServiceReferences.ClientConfig”文件。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-10T12:50:34.313

要在 vs2013 上使用 windows phone 8 项目中的 WCF 服务，我遇到了同样的问题（空配置客户端），我无法创建客户端服务引用的实例。以下对我有用：

1- 右键单击​​文件夹 ServiceReference 下的引用服务。2- 在菜单中选择配置服务参考以访问**服务参考设置**。3- 在程序集列表上方，选择“**在指定的引用程序集中重用类型：** ”。4- 检查列表“ **System.ServiceModel** ”，然后按**OK**。

我希望这将有所帮助。

# html - 在不使用 JavaScript 的情况下悬停时更改 div 及其兄弟姐妹的颜色

> ID：11074446
> 
> 赞同：1
> 
> 时间：2012-06-17T20:13:18.637
> 
> 标签：html, css

我有两个 div 并排浮动：

```
<div id="parent">
    <div id="child_1" style="float:left"> content </div>
    <div id="child_2" style="float:left"> content </div>
    <div style="clear:both"></div>
</div> 
```

当任一 div 悬停在上方时，我想更改两个 div 的颜色（更改为不同的颜色）。说，一个黄色，另一个红色。有没有办法做到这一点？我把 div`id="parent"`放在那里，以为当它悬停时我可以做点什么；将具有此 id（或类）的 div 更改为父级中的此颜色。但我真的不知道这是否可能。此外，jquery 悬停事件似乎总是相对于 css 非常延迟，所以我试图避免使用脚本。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:20:20.347

```
div#parent:hover div#child_1 {
  color: red;
}

div#parent:hover div#child_2 {
  color: yellow;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T20:22:48.477

为 child_1 和 child_2 添加一个类，将其称为“孩子”或您想要的任何名称。然后使用这个 CSS：

```
.children:hover #child_1 { color: red; }
.children:hover #child_2 { color: yellow; } 
```

# geometry - 来自 BSP 的多边形

> ID：11074447
> 
> 赞同：2
> 
> 时间：2012-06-17T20:13:30.563
> 
> 标签：geometry, space-partitioning, bsp-tree

我有一个由二进制空间分区树给出的 3d 卷。通常这些是由多边形模型制成的，并且分割的多边形已经存储在树节点中。

但我的不是，所以我没有多边形。每个节点都只有一个剖切面（例如，由法线和原点距离给出）。因此，树仍然代表一个实体的 3d 体积，由所有切割定义。但是，为了可视化，我需要这个体积的多边形网格。如何有效地重建它？

粗略的方法是将叶子的无限半空间转换为足够大的多面体（例如立方体）并将它们中的每一个向上推到树上，通过它通过的每个节点的平面切割它。这似乎非常昂贵，因为树可能是不平衡的（例如，如果愚蠢地由凸多面体制成）。有没有经典的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:15:40.627

为了恢复多边形表面，您需要与平面相交。其中多边形的每个顶点由三个平面的交点生成，每个边由两个平面的交点生成。但是，使这种高效且数值稳定的任务并非易事。所以我建议使用`qhalf`它是[qhull](http://www.qhull.org/)的一部分。`qhalf`可以在[此处](http://www.qhull.org/html/qhalf.htm)找到输入和输出的文档。当然，您可以将`qhull`（以及来自 的功能`qhalf`）用作[库](http://www.qhull.org/html/qh-code.htm#library)。

# coldfusion - 如何在自动建议中显示额外的详细信息，但在输入字段中仅显示 ID？

> ID：11074450
> 
> 赞同：1
> 
> 时间：2012-06-17T20:13:36.110
> 
> 标签：coldfusion, autosuggest

我正在为我的 UserID 字段使用 ColdFusion 自动建议。当用户开始输入用户 ID 时，会弹出一个用户 ID 列表和与之关联的用户名（由 cfc 函数填充）。示例代码：

```
<cfinput name="userID" type="text" value="#userID#" autoSuggest="cfc:Utilities.suggestUser({cfautosuggestvalue})" matchcontains="true" /> 
```

建议以“ ”格式列出`User Name <userID>`。因此，如果用户开始输入 123，则会弹出一个示例建议，即“Harvey Mann <1234>”。

问题是，如果用户选择该建议，我不想将整个建议文本插入到输入字段中 - 我只想插入用户 ID（在本例中为“1234”）。如果可能，我还希望能够将用户名（“Harvey Mann”）插入相邻的字段/区域。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T13:36:57.307

由于您使用的是 CF 的内置自动建议实现，因此您只能访问一个返回值。因此，如果该值由多个“部分”组成，并且您希望将值的不同“部分”插入到不同的列中，则必须解析该值并从字符串中提取适当的部分。在您的示例情况下，您可以将该值视为由 < 分隔的列表。在这种情况下，您可以使用

```
trim(listfirst(form.userID, "<")) 
```

和 id 'part' 与

```
replace(listlast(form.userID, "<"), ">", "") 
```

或者，您始终可以使用 jQuery UI 自动完成实现——您必须为它编写自己的 javascript，但它比内置 cf 的实现给您更多的控制权。查看 jQuery UI 文档了解更多信息：http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

更新：再想一想，如果您只想在同一页面的另一个区域显示选定值的“名称”部分，您*可以*只使用 CF 的内置自动提示和一些 javascript 来实现。尝试将此代码添加到页面的 HEAD 部分：

```
<cfajaxproxy bind="javaScript:showName({userID})">
<script type="text/javascript">
showName = function(strUserId) {
 document.getElementById("someID").innerHTML = strUserId.split('<')[0];
}
</script> 
```

# ruby-on-rails - 是否可以创建和传递模型对象的实例但不能将其保存在 Ruby on Rails 中？

> ID：11074458
> 
> 赞同：0
> 
> 时间：2012-06-17T20:14:56.077
> 
> 标签：ruby-on-rails

我希望能够创建一个包含模型对象实例`User`但不将其保存到数据库的变量。这可能吗？现在，当我执行以下操作时，它会将其保存到数据库中：

```
user = User.new
user.name = "John"
user.save 
```

我想创建一个`user`变量来保存以前的信息，但不必将其保存在数据库中。原因是我需要使用的函数需要一个`User`对象，而我还不想在代码中保存用户。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:35:39.157

正如戴夫所说，只是不要保存用户变量：

```
user = User.new(:name => "John") 
```

现在您仍然可以通过传入用户变量来使用方法，即使它没有保存到数据库中：

```
puts "The user's name is: #{user.name}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T20:27:14.903

您可以将其保存在会话中：`session[:user] = user`.

# python - “markup_tags”不是有效的标签库

> ID：11074461
> 
> 赞同：2
> 
> 时间：2012-06-17T20:15:17.480
> 
> 标签：python, django, pinax

每次我将特定对象添加到我的数据库（这只影响我网站上的一个特定应用程序）时，我都会得到 TemplateSyntaxError 'markup_tags' is not a valid tag library。

具体来说，它不能加载这个：{% load markup_tags %}。但这很奇怪，因为当我打开一个 Django shell 时，`import markup`一切都很好。

这个问题之前在 StackOverflow 上被问过：[Django markup templatetags error](https://stackoverflow.com/questions/6399649/django-markup-templatetags-error/6400140#comment14486841_6400140)

但是，我不明白*为什么*会发生这种情况，我也不知道如何解决它。他们说 render_to_response 模板。但我不确定我将如何从 shell 中执行此操作（此处为 Django noob）。

![在此处输入图像描述](../Images/e1e3f51e807255e713976069b0222cb4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:31:44.427

所以问题是我实际上没有正确地将模块导入到包含`markup_tags`. 虽然该库在我的环境中可用，但在我的环境中我`settings.py`没有正确引用它。愚蠢的错误，但可能会帮助别人。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T19:53:34.410

考虑`{% load markup %}`在您的模板中尝试。

# algorithm - 行进立方体歧义与行进四面体

> ID：11074462
> 
> 赞同：16
> 
> 时间：2012-06-17T20:15:26.340
> 
> 标签：algorithm, computational-geometry, marching-cubes

我已经成功实现了行进立方体算法。我使用标准材料作为参考，但我完全从头开始重写。它有效，但我正在观察导致网格中出现孔洞的歧义。

我正在考虑行进四面体算法，据说它不会受到歧义的影响。我看不出这是怎么可能的。

行进四面体算法使用六个四面体代替立方体，每个四面体都有三角剖分。但是，假设我要实现行进立方体算法，但是对于 256 个三角剖分中的每一个，只需选择立方体四面体三角剖分的“总和”（并集）吗？据我所知，这就是行进四面体*所做*的——那么为什么这能神奇地解决歧义呢？

我认为有 16 个独特的案例，其他 240 个只是这 16 个案例的反映/旋转。我记得在某处读过一些论文，为了解决歧义，你需要 33 个案例。这可能与为什么行进的四面体不会出现问题有关吗？

所以，问题：

1.  为什么行进的四面体不会出现歧义？
2.  如果没有，为什么人们不使用行进立方体算法，而是使用四面体的三角剖分呢？

我觉得我在这里遗漏了一些东西。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T03:40:28.917

好的，我刚刚完成了我的行进四面体版本，虽然我很容易看到歧义会导致行进立方体的网格出现问题，但行进四面体的网格似乎在拓扑上始终是正确的。沿着非常细的点有*一些*烦人的特征，其中一些顶点无法完全决定他们想要在分界线的哪一侧，但网格始终是水密的。

回答我的问题：

1.  为了解决行进立方体算法中的歧义，据我所知，人们在单元格中更仔细地评估了函数。在四面体算法中，明确地对单元的中心进行采样并将其多边形*化*。我怀疑因为四面体网格特别包括这个顶点，所以隐含地处理了歧义。侧面的其他额外顶点可能也与它有关。作为一个关键点，当你去细化它时，实际上是在更多的地方对函数进行采样。
2.  我很确定他们会。我的行进四面体算法就是这样做的，我认为，在内部，它与经典的行进四面体算法做同样的事情。在我的实现中，所有可能的立方体都列出了四面体的三角形，我怀疑这比单独为每个单独的四面体找出一个或两个三角形更快。

如果我有时间和注意力（我都没有），重新划分每个立方体的内部以使用更少的三角形可能是有益的，我*认为*这不会伤害它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-07T10:38:39.930

回答“为什么行进四面体算法有歧义？”这个问题。需要了解为什么在 Marching Cubes 中首先会出现歧义。

* * *

当立方体中有两个对角相对的“正”顶点和两个对角相对的“负”顶点时，可能会出现歧义。我花了一些时间来思考它，但含糊不清的问题是它们理论上允许为彼此不兼容的相邻立方体创建等值面补丁。这是显而易见的部分。有趣的是，如果（**且仅当**）其中一个分隔“负”顶点，而另一个分隔“正”顶点，则来自两个模棱两可配置的两个相邻等值面补丁是不兼容的。

这是来自 Rephael Wenger 的巨著*“等值面几何、拓扑和算法”*的相关引述（不能发布超过 2 个链接，因此我将书中的所有相关图像合并为[一个](http://i.stack.imgur.com/2ndOx.png)）：

> 立方体的 3D 等值面片的边界在立方体的每个方形面上定义了一个等高线。如果某个配置的等值面贴片将小平面上的负顶点分开，而相邻配置的等值面贴片将正顶点分开，那么公共小平面上的等值面边将不会对齐。图 2.16 中的等值面补丁不会分离任何面上的正顶点。此外，在配置的任何旋转或反射中派生的等值面曲面片也不分离任何面上的正顶点。因此，任何两个相邻立方体中的等值面块在它们的边界上正确对齐。一个同样有效但组合不同的，

这意味着如果**所有**使用的模棱两可的配置都遵循相同的模式（即总是分开的“负”顶点），那么就不可能产生拓扑不正确的表面。如果您对单个等值面使用“来自两个世界”的配置，则会出现问题。

使用相同的歧义分辨率模式构建的表面仍然可能包含像[这样](http://i.stack.imgur.com/8WMqr.png)的不需要的错误（取自Thomas Lewiner Helio Lopes、Antonio Wilson Vieira 和 Geovan Tavares*的“Efficient implementation of Marching Cubes' case with topologies”*文章），但它正如你所说，将是*无懈可击*的。

为此，您需要使用基于图 2.16 所示的 22 种独特配置（不是标准的 14 或 15 种）的查找表。

* * *

现在，最后回到最初的问题——为什么 Marching Tetrahedrons 不会出现歧义？出于同样的原因，如果按照上述方法完成，Marching Cubes 中不会有歧义 - 因为您任意选择使用歧义配置解析的两种可用变体之一。在 Marching Cubes 中，这甚至是一种选择并不明显（至少对我来说，不得不做很多挖掘），但在 Marching Tetrahedrons 中**，它是由算法本身为您完成的**。这是 Rephael Wenger 书中的另一句话：

> 规则网格立方体具有不明确的配置，而四面体分解则没有。模棱两可的配置怎么了？这些配置是通过选择三角测量来解决的。例如，在图 2.31 中，第一个三角剖分给出了一个等值面补丁，其中两个分量对应于图 2.22 中的 2B-II，而第二个三角剖分给出了一个等值面补丁，其中一个分量对应于 2B-I。

请注意图 2.31 中立方体是如何以两种不同的方式切割成四面体的。这种切片或另一种切片的选择是解决歧义的秘诀。

有人可能会问自己——如果可以通过对所有立方体使用相同的模式来解决歧义问题，那么为什么会有这么多关于更复杂解决方案的书籍和论文呢？为什么我需要渐近决策者和所有这些东西？据我所知，这一切都取决于您需要实现的目标。如果拓扑正确性（例如，没有漏洞）对您来说就足够了，那么您就不需要所有高级的东西。如果您想解决上面显示的*“行进立方体的有效实施”*文章中所示的问题，那么您需要更深入地研究。

我强烈建议阅读 Rephael Wenger 的*《Isosurfaces Geometry, Topology & Algorithms》*一书中的相关章节，以更好地了解这些算法的本质、问题是什么、问题从何而来以及如何解决。

正如李小生所指出的，首先仔细研究行进广场算法可以更好地理解基础知识。其实整个答案都是李小生写的，我只是稍微扩展了一下。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-24T10:09:24.767

以下面的二维示例（引入歧义）为例：

01

10

如果我们把这个正方形分成两个三角形，我们会在我们选择分割正方形的对角线上得到不同的结果。沿着 0-0 对角线，我们得到三角形 (010,010)，而对于 1-1 对角线，我们得到三角形 (101,101)。显然，不同的平方分解会导致不同的结果。两者都是正确的，对于 3D 立方体也是如此。

MT 实际上并没有解决歧义，但它可以通过为所有立方体选择相同的分解策略来产生拓扑一致的结果。这样就摆脱了模棱两可的痛苦。

# php - 滚动/悬停选项卡在 IE8 中未正确显示

> ID：11074464
> 
> 赞同：0
> 
> 时间：2012-06-17T20:15:55.750
> 
> 标签：php, jquery

检查此页面。在 firefox、chrome 或 IE9 / 10 上，标题上的选项卡显示统一并正确悬停。但是在 IE8 上，选项卡会下降并从标题中消失。有谁熟悉这个问题？

[http://www.seanprovost.com/frah_dev/newclients.php](http://www.seanprovost.com/frah_dev/newclients.php)

```
$(document).ready( function() {
$("#nav1").animate({
    marginTop: "50px"
}, 'slow');
$("#nav2").animate({
    marginTop: "50px"
}, 'slow');
$("#nav3").animate({
    marginTop: "50px"
}, 'slow');
$("#nav4").animate({
    marginTop: "50px"
}, 'slow');
$("#nav5").animate({
    marginTop: "50px"
}, 'slow');

//Animal Care Animation
$("#link_ac").hover( function() {
    $("#nav1").animate({ marginTop: "0px" }, 'slow');
}, function() {
    $("#nav1").animate({ marginTop: "50px" }, 'slow');
});
//Animal Care Rollover
$("#link_ac").hover( function() {
    $("#nav1").css({"background-image" : "url('i/nav_ac_o.png')" });
}, function() {
    $("#nav1").css({"background-image" : "url('i/nav_ac.png')" });
});
//Our Team Animation
$("#link_ot").hover( function() {
    $("#nav2").animate({ marginTop: "0px" }, 'slow');
}, function() {
    $("#nav2").animate({ marginTop: "50px" }, 'slow');
});
//Our Team Rollover
$("#link_ot").hover( function() {
    $("#nav2").css({"background-image" : "url('i/nav_ot_o.png')" });
}, function() {
    $("#nav2").css({"background-image" : "url('i/nav_ot.png')" });
});
//Boarding Animation
$("#link_b").hover( function() {
    $("#nav3").animate({ marginTop: "0px" }, 'slow');
}, function() {
    $("#nav3").animate({ marginTop: "50px" }, 'slow');
});
//Boarding Rollover
$("#link_b").hover( function() {
    $("#nav3").css({"background-image" : "url('i/nav_b_o.png')" });
}, function() {
    $("#nav3").css({"background-image" : "url('i/nav_b.png')" });
});
//New Clients Animation
$("#link_nc").hover( function() {
    $("#nav4").animate({ marginTop: "0px" }, 'slow');
}, function() {
    $("#nav4").animate({ marginTop: "50px" }, 'slow');
});
//New Clients Rollover
$("#link_nc").hover( function() {
    $("#nav4").css({"background-image" : "url('i/nav_nc_o.png')" });
}, function() {
    $("#nav4").css({"background-image" : "url('i/nav_nc.png')" });
});
//Grooming Animation
$("#link_g").hover( function() {
    $("#nav5").animate({ marginTop: "0px" }, 'slow');
}, function() {
    $("#nav5").animate({ marginTop: "50px" }, 'slow');
});
//Grooming Rollover
$("#link_g").hover( function() {
    $("#nav5").css({"background-image" : "url('i/nav_g_o.png')" });
}, function() {
    $("#nav5").css({"background-image" : "url('i/nav_g.png')" });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:38:53.350

导航元素的 css 需要一些工作。使用控制台检查`LI`和 `<a>`标签等会看到 IE 看​​到它们的位置不同，因为主要元素上缺少 css 结构并且在这些元素中浮动。

验证器也在页面中显示损坏的标签。加强导航上的 css，修复损坏的标签，你应该更好地跨浏览器

编辑：禁用 javascript 并会看到 jQuery 不是罪魁祸首

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T20:26:44.247

而不是使用两个`hover`处理程序，您可以将它们组合起来，然后尝试`stop()`方法：

```
 $("#link_ac").hover( function() {
        $("#nav1").stop().animate({ marginTop: "0px" }, 'slow');
        $("#nav1").css({"background-image" : "url('i/nav_ac_o.png')" });
    }, function() {
        $("#nav1").stop().animate({ marginTop: "50px" }, 'slow');
        $("#nav1").css({"background-image" : "url('i/nav_ac.png')" });
    }); 
```

# xcode - 在 Xcode 4 中将基于 Jam 的目标升级为本机目标

> ID：11074465
> 
> 赞同：3
> 
> 时间：2012-06-17T20:16:18.290
> 
> 标签：xcode, macos

我在 Lion 上运行 Xcode 4.3.2，并且我有一个非常古老的 Xcode 1.0 项目，其目标是基于 Jam 的。当我尝试构建这样的目标时，Xcode 告诉我“Jam 已被弃用并已被删除；使用 Jam 的目标必须升级到本机目标。有关执行此操作的更多信息，请参阅 Xcode 文档。”。

不幸的是，我在 Xcode 4 的文档中找不到任何内容，也无法在 Xcode 4 的任何地方找到 Xcode 3 的“项目 > 升级到本机目标”菜单项。

如何在 Xcode 4 中进行目标转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T20:17:25.733

从缺乏答案我得出结论，只有两种方法可以实现我想要的：

*   设置 Xcode 3 进行转换或

*   在 Xcode 4 中手动重新创建项目。

# html - 将 d3.js SVG 代码转换为独立程序 - 示例？

> ID：11074469
> 
> 赞同：1
> 
> 时间：2012-06-17T20:16:52.770
> 
> 标签：html, svg, d3.js, headless-browser

使用无头浏览器、谷歌文件系统 API 或其他方式。

这个问题说你可以，但不是如何。 [将 d3.js SVG 代码转换为独立程序——有什么建议吗？](https://stackoverflow.com/questions/8235989/converting-d3-js-svg-code-to-a-standalone-program-any-suggestions) google groups 有更多提示，但没有示例。

我花了很多时间玩 node-canvas 示例以及 phantomJS svg 示例。我不知道如何让他们一起玩。显然在 Linux 中，x-windows Javascript 渲染引擎无论如何都不是很好。

我的 JavaScript、d3.js、SVG、CSS 和其他 HTML 内容的 API 阅读列表已经很多了——我要做的就是保存一个用 d3.js 生成的 .svg 图像。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T02:04:53.910

这既不容易，也不会过于复杂。主要原因是 Web 浏览器无法单独从 DOM 渲染中保存 SVG 文件，除非它是 Chrome 版本 12。

问题是 SVG 图像只是一个带有一堆渲染指令的纯文本文件。您指向的解决方案基本上说您必须在服务器端执行此操作。尽管他们建议使用 node.js，但您可以使用任何您喜欢的服务器端语言来执行此操作。

诀窍是获取您的 JavaScript/HTML 接口，使其跟踪您创建的所有对象，或者能够序列化所有对象，然后将该数据（例如：通过 ajax）发送到服务器端程序，该程序将将其重构为 SVG 文件并提供下载。

挑战在于，您的程序（客户端、javascript 和服务器端：php/etc.）或多或少都必须重新实现 SVG 规范以使其正常工作，并且对您如何将其序列化为传播。几乎没有库存组件可以为您做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:54:58.043

有一些使用 64B 编码的 node().parentNode.innerHTML 的例子，但我不知道如何使用它。 [https://groups.google.com/forum/?fromgroups#!topic/d3-js/aQSWnEDFxIc](https://groups.google.com/forum/?fromgroups#!topic/d3-js/aQSWnEDFxIc)

到目前为止，我发现的最简单的解决方案是 FileSaver.js 演示：http: [//eligrey.com/demos/FileSaver.js/](http://eligrey.com/demos/FileSaver.js/)

它使用 HTML5 文件保护程序界面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-10T12:48:29.890

我今天遇到了这个，我没有尝试过，但也许有人会发现它很有用：

[https://github.com/d3-node/d3-node](https://github.com/d3-node/d3-node)

```
 const D3Node = require('d3-node')
 const d3n = new D3Node()      // initializes D3 with container element
 d3n.createSVG(10,20).append('g') // create SVG w/ 'g' tag and width/height
 d3n.svgString() // output: <svg width=10 height=20 xmlns="http://www.w3.org/2000/svg"><g></g></svg> 
```

# c# - Winforms 中的简单“声音播放器”控件

> ID：11074470
> 
> 赞同：1
> 
> 时间：2012-06-17T20:17:01.347
> 
> 标签：c#, winforms, audio, controls, media-player

我想在我的 Winforms 程序中嵌入一个简单的 WAV 播放器。它可能看起来像这样（源自 Media Player Classic）：

![](../Images/bcbeaa6f61cf43fe8af8814be841426e.png)

我想要以下“功能”：

1.  控制声音/音乐的滑块不应占用其他 GUI 的输入（也许后台工作人员会在这里提供帮助）
2.  根据我的要求，输入将是 WAVE
3.  应该有播放/停止/暂停按钮
4.  声音应该从 RAM 中的 byte[] 数组（即 WAV）播放，最好不要从文件中播放
5.  滑块的粒度应该很好（即不像 Youtube 粗略的“到最近 10 秒”风格）
6.  轻量级（如果可能，最好已经包含在 .NET 中）
7.  低延迟播放/停止声音（即按下按钮后不等待半秒）

经过一番研究，我发现[了这个低级声音生成问题](https://stackoverflow.com/questions/3743591/real-low-level-sound-generation-in-c)，还有一个叫做[NAudio](http://naudio.codeplex.com/)的东西。但是，前者不容易提供“停止”功能，也没有提供滑块代码。后者有点矫枉过正（包括显示 WAV 和许多其他功能）。

还有[Windows Media Player](http://msdn.microsoft.com/en-us/library/windows/desktop/dd564585%28v=vs.85%29.aspx)控件，但这也有点矫枉过正（包括视频等），而且您显然需要确保在用户的计算机上安装了所需的 Windows Media Player 版本，因此兼容性可能是一个问题。

有什么，简单快速有效吗？

# c# - T4MVC 插件和 ASP.NET MVC 如何集成和协同工作？

> ID：11074471
> 
> 赞同：1
> 
> 时间：2012-06-17T20:17:09.227
> 
> 标签：c#, asp.net, asp.net-mvc, t4mvc

我有一个开源 ASP.NET MVC 应用程序，有一个名为 T4MVC 的加载项，我可以看到所有 html、aspx、图像、控制器、视图文件都集成在一起，我想知道它是如何工作的。如果我创建一个文件（aspx，html ...），是否需要手动将其集成到该模板（T4MVC）或默认情况下它会被混合？有人可以告诉我如何让这个（T4MVC）和 MVC 一起工作，因为我是 ASP.net MVC 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T20:42:48.247

T4MVC 是一个模板，当您将文件保存在编辑器中时，Visual Studio 将编译和执行（有工具可以自动执行此操作；搜索 AutoTT 或 Chirpy 以检查它们）。

该模板扫描您的项目以查找控制器、视图、图像等，并生成允许您在代码的其他地方以编程方式引用这些项目的代码。每当您添加、删除或重命名资源（模板查找的任何项目）时，必须再次执行模板以重新生成代码输出。

T4MVC 的优势（相对于使用字符串来引用事物）是您可以获得编译时检查，以及智能感知和重构支持。

# assembly - 组装 - 读取虚拟磁盘的下一个扇区

> ID：11074483
> 
> 赞同：4
> 
> 时间：2012-06-17T20:18:30.897
> 
> 标签：assembly, x86-16, hard-drive, osdev, sector

作为世界上至少有一次在他/她的生活中的程序员，我正在尝试创建我的“革命性”，新的和唯一的操作系统。:D

好吧，我正在使用一个虚拟模拟器（Oracle VM Virtual Box），为此我创建了一个新的未知操作系统，带有一个 vmdk 磁盘。我喜欢 vmdk 因为它们只是普通文件，所以我可以将引导加载程序粘贴到虚拟硬盘的前 512 个字节上。

现在，我正在尝试读取该虚拟磁盘的下一个扇区，我将在该扇区上粘贴一个显示消息的简单内核。

我有两个问题：

*   我是否正确读取了第二段（前 -512 字节 - 被引导加载程序占用）？ *代码：*

    ```
    ReadDisk:
        mov bx, 0x8000  ; segment
        mov es, bx
        mov bx, 0x0000  ; offset

        mov ah, 0x02  ; read function
        mov al, 0x01  ; sectors - this might be wrong, trying to read from hd
        mov ch, 0x00  ; cylinder
        mov cl, 0x02  ; sector
        mov dh, 0x00  ; head
        mov dl, 0x80  ; drive - trying to read from hd
        int 0x13   ; disk int
        jc ReadDisk
        jmp [es:bx]   ; buffer 
    ```

    在这里，我在检查 CF 后收到错误消息。但是，如果我使用 INT 13, 1 来获取最后一条状态消息，则 AL 为 0 - 因此不会保存任何错误。

*   我是否将我的简单内核粘贴到 vmdk 内的正确位置？我所做的是将它粘贴在文件的第 512 个字节之后，正如我所说，前 512 个字节是引导加载程序。该文件如下所示：

    ```
    BE 45 7C E8 16 00 EB FE B4 0E B7 00 B3 07 CD 10 <- First sector
    C3 AC 08 C0 74 05 E8 EF FF EB F6 C3 B4 00 B2 80
    CD 13 BE 5D 7C 72 F5 BB 00 80 8E C3 BB 00 00 B4 
    02 B0 06 B5 00 B1 01 B6 00 B2 07 CD 13 BE 4E 7C 
    72 CF 26 FF 27 57 65 6C 63 6F 6D 65 21 00 52 65 
    61 64 69 6E 67 20 65 72 72 6F 72 21 00 52 65 73 
    65 74 74 69 6E 67 20 65 72 72 6F 72 21 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 55 AA <- Boot-loader signature
    B4 0E B0 2E CD 10 EB FE 00 00 00 00 00 00 00 00 <- Start of the second sector
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    ```

所以，这就是我试图将内核添加到第二个扇区的方式。你认为这有什么问题？谢谢！

更新

好的，我现在没有收到任何错误，但我没有看到正在执行的加载代码。它应该在窗口上显示一个点：

```
;--------------------------------------------
; 'load.asm'
; loaded from 'boot.asm'

[org 0x8000]
[bits 16]

;--------------------------------------------

main:
mov ah, 0x0E  ; print function
mov al, '.'   ; ascii char
int 0x10   ; IO int

jmp $    ; hang 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T09:56:04.580

这里有一个问题：

```
jmp [es:bx] 
```

这将读取一个地址，一个 16 位偏移量，实际上是从包含在寄存器`es`（段部分）和`bx`（偏移量部分）中的地址处的内存位置开始，然后设置`ip`为该 16 位偏移量。

您可能想要使用的是：

```
jmp some_constant1:some_constant2 
```

这将设置`cs`为`some_constant1`和。不出所料，这两个常量的好候选分别是 0x8000 和 0，因为这是加载代码的位置。`ip``some_constant2`

现在，第二个问题在这里：

```
[org 0x8000] 
```

这`org`告诉 NASM 以这样一种方式生成代码，即如果在偏移量 0x8000 处加载它就可以工作。现在，偏移量 0x8000 与段 0x8000 不同。如果您使用`jmp 0x8000:0`，那么您还应该使用：

```
[org 0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T21:33:41.203

失败后重试。我认为当磁盘旋转时您会收到没有消息的错误指示，因此模拟器可能会在第一次故意失败。在 bochs 和 qemu 中，四次尝试对我来说效果很好，但我没有在其他任何东西上尝试过。您可能还需要在读取之前重置驱动控制器以清除任何先前的错误。使用带有`al`清除的中断 0x13 和中的驱动器号`dl`。

* * *

注意：对驱动器编号进行硬编码目前可能有效，但不支持从其他驱动器启动。启动引导加载程序时， BIOS 应保留驱动器号`dl`，以便您保存。

# javascript - 数组引用到空字符串 + true 是 JavaScript 中的有效字符吗？

> ID：11074488
> 
> 赞同：7
> 
> 时间：2012-06-17T20:18:51.480
> 
> 标签：javascript

我不确定这行 javascript 中发生了什么：

```
alert( (''+[][[]])[!+[]+!+[]] ); // shows "d" 
```

我发现了什么：

```
var a = ! + []; // == true
var b = ! + [] + ! + []; // == 2 
```

似乎第二部分是对字母数组或某种类型的引用，但我不明白这是怎么来的

```
(''+[][[]]) 
```

还：

```
alert( (''+[][])[2] ); // nothing happens; console says "unexpected token ]"
alert( (''+[[]][])[2] ); // nothing happens; console says "unexpected token ]"
alert( (''+[[]][[]])[2] ); // shows "d"
alert( (""+true)[2] ); // shows "u" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T20:37:55.753

我给你分解一下：

```
 ('' + [][[]])[!+[]+!+[]]
= ('' + undefined)[!+[]+!+[]]  // [][[]] grabs the []th index of an empty array.
= 'undefined'[! + [] + ! + []]
= 'undefined'[(! + []) + (! + [])]
= 'undefined'[true + true]
= 'undefined'[2]
= 'd' 
```

`! + [] == true`在这里解释[一元加号和减号运算符的重要用途是什么？](https://stackoverflow.com/questions/5450076/whats-the-significant-use-of-unary-plus-and-minus-operators)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T20:21:11.300

因为`"" + true`是字符串`"true"`，第三个字符（索引 2）是`u`.

`! + []`工作之类的东西`+`也可以是一元运算符，请参阅[此 SO question](https://stackoverflow.com/questions/5450076/whats-the-significant-use-of-unary-plus-and-minus-operators)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T20:23:34.730

```
alert( (""+true)[2] ); // shows "u" 
```

它返回字符串“true”的第三个字母。

这会返回什么？

```
alert( (''+[[]][[]])); 
```

# postgresql - Postgres：在交叉表查询中，桶总是从左边填充

> ID：11074489
> 
> 赞同：3
> 
> 时间：2012-06-17T20:19:45.183
> 
> 标签：postgresql, crosstab

我的查询如下所示：

```
SELECT mthreport.*
FROM crosstab
('SELECT 
to_char(ipstimestamp, ''mon DD HH24h'') As row_name, 
varid::text || log.varid || ''_'' || ips.objectname::text As bucket, 
COUNT(*)::integer As bucketvalue
FROM loggingdb_ips_boolean As log 
INNER JOIN IpsObjects As ips 
ON log.Varid=ips.ObjectId
WHERE ((log.varid = 37551) 
OR (log.varid = 27087) 
OR (log.varid = 50876)
OR (log.varid = 45096)
OR (log.varid = 54708)
OR (log.varid = 47475)
OR (log.varid = 54606)
OR (log.varid = 25528)
OR (log.varid = 54729))
GROUP BY to_char(ipstimestamp, ''yyyy MM DD HH24h''), row_name, objectid, bucket        
ORDER BY to_char(ipstimestamp, ''yyyy MM DD HH24h''), row_name, objectid, bucket' )

As mthreport(item_name text,  varid_37551 integer, 
            varid_27087  integer , 
            varid_50876  integer , 
            varid_45096  integer , 
            varid_54708  integer , 
            varid_47475  integer , 
            varid_54606  integer , 
            varid_25528  integer , 
            varid_54729  integer , 
            varid_29469 integer) 
```

可以使用以下连接字符串针对测试表测试查询：“host=bellariastrasse.com port=5432 dbname=IpsLogging user=guest password=guest”

该查询在语法上是正确的并且运行良好。我的问题是 COUNT(*) 值总是填充最左边的列。然而，在许多情况下，左列应该有一个零或 NULL，并且只有第 2（或第 n）列应该被填充。我的大脑正在融化，我无法弄清楚出了什么问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:55:45.600

您的问题的解决方案是使用带有**两个参数**`crosstab()`的变体。

 **第二个参数（另一个查询字符串）生成输出列的列表，以便正确分配数据查询（第一个参数）中的 NULL 值。

检查[tablefunc 扩展的手册](http://www.postgresql.org/docs/current/interactive/tablefunc.html)，特别是[`crosstab(text, text)`](http://www.postgresql.org/docs/current/interactive/tablefunc.html#AEN144882)：

> 交叉表的单参数形式的主要限制是它对组中的所有值都进行相同的处理，**将每个值插入到第一个可用列**中。如果您希望值列与特定的数据类别相对应，并且某些组可能没有某些类别的数据，则效果不佳。交叉表的双参数形式通过提供**与输出列对应的类别的显式列表来**处理这种情况。

强调我的。[我最近在这里](https://stackoverflow.com/a/10777417/939860)或[这里](https://stackoverflow.com/a/9592419/939860)或[**这里**](https://stackoverflow.com/a/10110519/939860)发布了几个相关的答案。**

# android - 如何获取特定组中联系人的所有详细信息，Android？

> ID：11074496
> 
> 赞同：-1
> 
> 时间：2012-06-17T20:20:44.230
> 
> 标签：android

我正在尝试获取一组的所有详细信息（例如 - 家庭）。

编码：

```
Cursor c = managedQuery(Data.CONTENT_URI, new String[] {
            Contacts.DISPLAY_NAME, Contacts._ID,GroupMembership.CONTACT_ID },
            GroupMembership.GROUP_ROW_ID + " = ?",
            new String[] { groupID }, Phone.TIMES_CONTACTED + " DESC"); 
```

获取姓名和照片：

```
while (c.moveToNext()&&temp_id<30)
        {           
            String id = c.getString(personIdx);

            //c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
            Log.e("myTag", id); 

            // get name
            try{
                personNameText = c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

            }catch (Exception e) {
                e.printStackTrace();
            }
            // get photo
            try{
                bmp = loadContactPhoto(getContentResolver(),Long.parseLong( id));
                bmp = bmp.createScaledBitmap(bmp, getResources().getDrawable(R.drawable.contact).getIntrinsicWidth(),
                        getResources().getDrawable(R.drawable.contact).getIntrinsicHeight(), false);

            }catch (Exception e) {
                // TODO: handle exception
            }

            // get number and email
            try
            {
                String hasPhone = c.getString(c.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));

                if ( hasPhone.equalsIgnoreCase("1"))
                    hasPhone = "true";
                else
                    hasPhone = "false" ;

                if (Boolean.parseBoolean(hasPhone)) 
                {   

                    getNumbers(id);
                }
            }catch (Exception e) {
                e.printStackTrace();
            }

            // get email
            String email = "";
            try{
                Cursor emailCur = getContentResolver().query( 
                        ContactsContract.CommonDataKinds.Email.CONTENT_URI, 
                        null,
                        ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", 
                        new String[]{id}, null); 

                while (emailCur.moveToNext()) { 
                    email = emailCur.getString(
                            emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                } 
                emailCur.close();

            }catch (Exception e) {
                e.printStackTrace();
            } 
```

插入数据库

```
temp_id++;

                insertData(temp_id, bitmaptoByteArray(bmp), phoneNamberText, personNameText,
                        email); 
```

这里提到的所有功能都很好用！问题是我只得到人名而不是其他细节。我认为问题是我弄错了身份证。我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:01:29.280

managedQuery() 方法中的第二个参数，即投影，指定要返回的列。

此刻你得到：

```
new String[] {Contacts.DISPLAY_NAME, Contacts._ID,GroupMembership.CONTACT_ID } 
```

要获取其他信息，您需要将它们包含在该参数中。如果您希望联系人显示姓名、电话号码和电子邮件地址，您的投影将如下所示：

```
new String[] {Contacts.DISPLAY_NAME, Phone.NUMBER, Email.ADDRESS} 
```

查看[CommonDataKinds](http://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.html)，了解在联系人数据表中查找内容时使用的常量的概述。

有关更多信息，请阅读[此](http://developer.android.com/reference/android/provider/ContactsContract.Data.html)

# facebook - 控制 fb.login 对话框图像

> ID：11074504
> 
> 赞同：0
> 
> 时间：2012-06-17T20:21:47.620
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我想知道如何控制连接对话框上的图像？我从我的主页上得到一些随机图像（质量很差），而不是 facebook 应用程序的个人资料图像。
我尝试在我的网站主页上设置 og:image 元标记，但它不会使用它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:29:01.293

在您的应用设置中，在“身份验证对话框”下，编辑徽标。

# ruby-on-rails - 使用 Facebook 的 Access_token 进行 Rails 身份验证

> ID：11074505
> 
> 赞同：12
> 
> 时间：2012-06-17T20:21:50.177
> 
> 标签：ruby-on-rails, ios, devise

我目前正在构建一个带有 rails 后端的 iPhone 应用程序。我在 iphone 上仅使用 facebook 的 Single Sign On (SSO)，并且身份验证在客户端上运行良好。我在rails上使用设计作为后端。

**注意**我已经[在 iOS 应用程序中咨询了 Facebook 身份验证设计，该应用程序也](https://stackoverflow.com/questions/4623974/design-for-facebook-authentication-in-an-ios-app-that-also-accesses-a-secured-we)已经访问了安全的 Web 服务

我看到这个设计有一个叫做 token_authenticable 的东西，它本质上是那个线程第 5 步中描述的“票”。这是我看到的电流

1.  用户在手机上登录 facebook SSO
2.  用户使用 { access_token: X } 调用 myserver.com/sessions/fb_sso
3.  在服务器端（在 SessionsController#fb_sso，我将使用 access_token 对 facebook 进行 API 调用
4.  如果 access_token 有效，则检查用户是否存在于数据库中。如果用户不存在，则创建一个新用户
5.  现在我们可以将 { user_id: X, devise_auth_token: Y } 返回到 1) 上的调用

这很简单。但是，我有几个问题：

1.  使用 devise_auth_token，这是否意味着我不再需要从 devise 调用 sign_in("user", resource) ？（在这里找到[http://jessewolgamott.com/blog/2012/01/19/the-one-with-a-json-api-login-using-devise/](http://jessewolgamott.com/blog/2012/01/19/the-one-with-a-json-api-login-using-devise/)）
2.  哪里是放置 3-4 代码的最佳位置？
3.  我似乎在谷歌上找不到太多关于这个话题的信息。为什么对于一个如此普遍的过程没有这么少的教程？我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T07:06:22.217

你为什么不能使用omniauth-facebook gem。如果您使用设计，它是获取访问令牌的一个非常简单的解决方案，它的潜力将加倍。确保您需要在不同的登录时间获取不同的访问令牌。

你可以通过这个链接[https://github.com/pramodv-nyros/social-login-in-rails](https://github.com/pramodv-nyros/social-login-in-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:54:29.837

您必须在服务器和 ios 客户端上使用相同的令牌。一个简单的解决方案是通过设备+omniauth将所有逻辑放在服务器端，iOS只处理UI和来自服务器端的响应。如果您想像使用 facebook iOS SDK 一样从 iOS 获取令牌，您应该将令牌告诉服务器端，但看起来不安全。

# c# - 如何有效地将数百万条记录从 .NET 流式传输到 SQL Server

> ID：11074510
> 
> 赞同：1
> 
> 时间：2012-06-17T20:22:31.050
> 
> 标签：c#, .net, sql

我有一个 C# .NET 程序，它一次处理几百万条记录，然后将它们存储在平面文件或 SQL Server 数据库中。

目前，为了将它们存储在 SQL Server 数据库中，程序将所有记录写入一个平面文件，然后使用 bcp 导入 SQL Server。

是否有更有效的方法可以绕过在导入 SQL 之前将每条记录写入硬盘的需要？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T20:33:00.903

考虑使用命名空间[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy)中的类`System.Data.SqlClient`。你可以像这样使用它：

```
using (var conn = new SqlConnection(connectionString))
using (var bulkCopy = new SqlBulkCopy(conn))
{
    conn.Open();
    {
        bulkCopy.DestinationTableName = "dbo.MyTable";
        DataTable dt = BuildMyData();
        try
        {
            bulkCopy.WriteToServer(dt);
        }
        catch (Exception ex){Console.WriteLine(ex.Message);}
    }
} 
```

该`WriteToServer`方法被重载，将接受 3 种不同的参数数据类型：

*   `DataRow[]`
*   `DataTable`
*   `IDataReader`

# c# - 使用 Mono Cecil 添加 try-catch

> ID：11074518
> 
> 赞同：12
> 
> 时间：2012-06-17T20:23:37.367
> 
> 标签：c#, mono.cecil

我正在使用 Mono Cecil 在另一种方法中注入代码。我想在我的代码周围添加一个 Try-Catch 块。

所以我写了一个带有try catch块的HelloWorld.exe并反编译了它。

Try-Catch 的 Reflector 中看起来像这样：

```
.try L_0001 to L_0036 catch [mscorlib]System.Exception handler L_0036 to L_003b 
```

我怎样才能通过mono cecil注入这样的try catch？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-17T21:27:05.650

使用 Mono.Cecil 添加异常处理程序并不困难，它只需要您知道异常处理程序在元数据中的布局方式。

假设您有 C# 方法：

```
static void Throw ()
{
    throw new Exception ("oups");
} 
```

如果你反编译它，它应该看起来有点像这样：

```
.method private static hidebysig default void Throw ()  cil managed 
{
    IL_0000:  ldstr "oups"
    IL_0005:  newobj instance void class [mscorlib]System.Exception::.ctor(string)
    IL_000a:  throw 
} 
```

现在假设您想在此方法中注入代码，例如它类似于 C# 代码：

```
static void Throw ()
{
    try {
        throw new Exception ("oups");
    } catch (Exception e) {
        Console.WriteLine (e);
    }
} 
```

也就是说，您只想将现有代码包装在 try catch 处理程序中。您可以通过 Cecil 轻松做到这一点：

```
 var method = ...;
    var il = method.Body.GetILProcessor ();

    var write = il.Create (
        OpCodes.Call,
        module.Import (typeof (Console).GetMethod ("WriteLine", new [] { typeof (object)})));
    var ret = il.Create (OpCodes.Ret);
    var leave = il.Create (OpCodes.Leave, ret);

    il.InsertAfter (
        method.Body.Instructions.Last (), 
        write);

    il.InsertAfter (write, leave);
    il.InsertAfter (leave, ret);

    var handler = new ExceptionHandler (ExceptionHandlerType.Catch) {
        TryStart = method.Body.Instructions.First (),
        TryEnd = write,
        HandlerStart = write,
        HandlerEnd = ret,
        CatchType = module.Import (typeof (Exception)),
    };

    method.Body.ExceptionHandlers.Add (handler); 
```

这段代码正在操作之前的方法，看起来像这样：

```
.method private static hidebysig default void Throw ()  cil managed 
{
    .maxstack 1
    .try { // 0
      IL_0000:  ldstr "oups"
      IL_0005:  newobj instance void class [mscorlib]System.Exception::'.ctor'(string)
      IL_000a:  throw 
    } // end .try 0
    catch class [mscorlib]System.Exception { // 0
      IL_000b:  call void class [mscorlib]System.Console::WriteLine(object)
      IL_0010:  leave IL_0015
    } // end handler 0
    IL_0015:  ret 
} 
```

我们添加了三个新指令：一个对 Console.WriteLine 的调用，一个优雅地退出 catch 处理程序的离开，最后（双关语），一个 ret。然后我们简单地创建一个 ExceptionHandler 实例来表示一个 try catch 处理程序，它的 try 包含现有的主体，并且它的 catch 是 WriteLine 语句。

需要注意的重要一点是范围的结束指令不包含在范围内。它基本上是一个 [TryStart:TryEnd[ 范围。

# visual-c++ - 将数值映射到字符

> ID：11074520
> 
> 赞同：1
> 
> 时间：2012-06-17T20:24:16.773
> 
> 标签：visual-c++

使用 C++，我正在尝试编写一个加密字符串的程序。我必须将字母表中的每个字母映射到一个数值：例如，a = 0、b = 1、c = 2 等等。到目前为止，我已经创建了一个将字符串作为参数并使用 switch 语句输出值的 void 函数。问题是，这些值是字符，而不是整数，我不能使用数学运算符来改变它们。我的源代码如下：

```
#include <iostream>
#include <cstdlib>
#include <ctime>
#include <cstring>
#include <string>
#include <cctype>

using namespace std;

void mapped_string(string in)
{   string mapped_string;
    int length = in.length();

    for (int i = 0; i < length; i++)
    {   
        switch (in[i])
        {
        case 'a':
            cout<<"0";
            break;
        case 'b':
            cout<<"1";
            break;
        case 'c':
            cout<<"2";
            break;
        case 'd':
            cout<<"3";
            break;
        case 'e':
            cout<<"4";
            break;
        case 'f':
            cout<<"5";
            break;
        case 'g':
            cout<<"6";
            break;
        case 'h':
            cout<<"7";
            break;
        case 'i':
            cout<<"8";
            break;
        case 'j':
            cout<<"9";
            break;
        case 'k':
            cout<<"10";
            break;
        case 'l':
            cout<<"11";
            break;
        case 'm':
            cout<<"12";
            break;
        case 'n':
            cout<<"13";
            break;
        case 'o':
            cout<<"14";
            break;
        case 'p':
            cout<<"15";
            break;
        case 'q':
            cout<<"16";
            break;
        case 'r':
            cout<<"17";
            break;
        case 's':
            cout<<"18";
            break;
        case 't':
            cout<<"19";
            break;

        default:
            cout<< in[i];
        }
    }
}

int main()
{   string str1 = "Hello";

    mapped_string(str1);

        cout    << "Press any key to exit." << endl;
        cin.ignore(2);
        return 0;
} 
```

我需要这个函数将字符串中的每个字符映射到一个 int 值，并将 int 值存储在一个名为 mapped_string 的新字符串中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:34:37.300

```
//stringstream is used as string 'builder'.
std::stringstream storedstr;

for (int i = 0; i < length; i++)
{   
    //As op's code but without the lengthy switch statement. Just cast to get an int.
    int intEquiv = (int)(in[i]);
    if (in[i] > 'z' || in[i] < 'a') intEquiv = (int)(in[i]) - 'a'
    storedstr << intEquiv;

    //Show what we are adding, like in original loop;
    std::stringstream ss;
    ss << intEquiv;
    std::cout << ss.str();
}
mapped_string = storedstr.str(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T21:08:02.773

C/C++ 中的字符有数值，ASCII 格式，'A' 是 65，'B' 是 66 ...'a' 是 97，'b' 是 98 等等，因此您可以对它们应用数学运算符，可能更容易坚持众所周知的 ASCII 格式，而不是创建自己的[http://en.wikipedia.org/wiki/ASCII](http://en.wikipedia.org/wiki/ASCII)

```
string str1 = "Hello";
for (int index = 0; index < str1.length(); index++)
    cout << "char: " << str1[index] << " ascii numeric values: " << (int)(str1[index]) << endl; 
```

印刷：

```
char: H ascii numeric values: 72
char: e ascii numeric values: 101
char: l ascii numeric values: 108
char: l ascii numeric values: 108
char: o ascii numeric values: 111 
```

一个简单/朴素的加密方案是简单地将字符移动一定量（移位密码），但在使用加密方案时，您应该始终小心溢出，具体取决于您正在实施的方案。

```
 string str1 = "Hello", cipher = "";    
  for (int index = 0; index < str1.length(); index++)
      cipher += (char)(str1[index] + 10);
  cout << "original: " << str1 << " cipher " << cipher << endl; 
```

印刷：

```
 original: Hello cipher Rovvy 
```

要取回原始值，只需减去偏移量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T06:27:23.473

使用 C++11：

```
#include <iostream>
#include <string>
#include <algorithm>
using namespace std;

string mapped_string(string in, char password)
{
    transform(in.begin(), in.end(), in.begin(), [password](char& x){ return x ^ password; });
    return in;
}

int main(int argc, char* argv[])
{
    char password = '1';
    string str1 = "Hello";
    string str2 = mapped_string(str1, password); // encrypt str1
    string str3 = mapped_string(str2, password); // decrypt str2
    cout << "Original: " << str1 << endl;
    cout << "Encrypt:  " << str2 << endl;
    cout << "Decrypt:  " << str3 << endl;
    cin.ignore();
    return 0;
} 
```

**输出：**
原始：Hello
加密：yT]]
解密：Hello

# python - 临时设置随机种子，如“new Random()”

> ID：11074523
> 
> 赞同：15
> 
> 时间：2012-06-17T20:25:07.927
> 
> 标签：python, random

在 Python 中，使用某个种子生成一些随机数但不重新设置全局状态的最佳方法是什么？在 Java 中，您可以简单地编写：

```
Random r = new Random(seed);
r.nextDouble(); 
```

并且标准`Math.random()`不会受到影响。在 Python 中，我能看到的最佳解决方案是：

```
old_state = random.getstate()
random.seed(seed)
random.random()
random.setstate(old_state) 
```

这是惯用的 Python 吗？它似乎比不需要“恢复”旧种子的 Java 解决方案干净得多。我很想知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-17T20:30:42.013

您可以实例化您自己的[`Random`](http://hg.python.org/cpython/file/2.7/Lib/random.py#l72)对象。

```
myrandom = random.Random(myseed) 
```

该`random`模块管理自己的 实例`Random`，该实例不受对 所做的更改的影响`myrandom`。

# typo3 - TYPO3 StoragePid 和 Current

> ID：11074525
> 
> 赞同：1
> 
> 时间：2012-06-17T20:25:41.957
> 
> 标签：typo3, typoscript, fluid, extbase

我构建了一个简单的注释 extbase 扩展，我想将它与打字稿一起包含在项目扩展（也是 extbase）中。项目扩展中的流体代码如下所示：

```
<f:for each="{project.reports}" as="report">
    ...Content...
    {report -> f:cObject(typoscriptObjectPath: 'lib.comments')}
</f:for> 
```

“报告”是一个 id 数组。lib.comments 排版如下所示：

```
lib.comments = USER
lib.comments  {
    userFunc = tx_extbase_core_bootstrap->run
    extensionName = Comments
    pluginName = Comments
    persistence.storagePid = ?
} 
```

StoragePid 应该与报告 id 匹配，所以我尝试了： persistence.storagePid.cObject = TEXT persistence.storagePid.cObject.current = 1

但它不起作用。有谁知道，将“当前”设置为 storagePid 的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:05:54.633

您可以通过将方法放在其开头来禁用存储库中的存储 PID 检查：

```
public function initializeObject() {
    $this->defaultQuerySettings->setRespectStoragePage(FALSE);
} 
```

然后通过`id`将当前页面作为公共参数传递给存储库查找器并包括作为公共约束来使用当前页面。

当然，您像往常一样获取当前页面的 UID：

```
$currentUid = $GLOBALS['TSFE']->id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T16:25:43.990

`persistence.storagePid.field = uid`

与“report -> f:cObject”一起传递的“report”的所有字段都可用于 stdWrap 属性“.field”。

你也可以做

```
persistence.storagePid.debugData = 1 
```

列出 $cObj->data 的所有可用字段

# c# - 如何从 C# 中的 com 对象返回数组（double []）？

> ID：11074527
> 
> 赞同：0
> 
> 时间：2012-06-17T20:26:32.727
> 
> 标签：c#, c++, com

我从 C++ COM 库返回 C# 中的 COM 对象。该对象具有返回类型 C# - **"object"**的属性。文档表明它的类型是**“Variant” （在 C++ 中）并且包含三个****“double”**值的一维数组​​​。选好演员后，

```
Object obj = m.TextPosition;  // "m" - is com object
var d3 = (System.Double[])obj;// cast 
```

我收到错误消息：**“无法将 'System.Double[*]' 类型的对象转换为 'System.Double[]' 类型**。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:33:05.207

您需要创建一个下限为 0 的 SAFEARRAY 以与 .NET double[] 兼容。

如果这不是一个选项，那么您需要在 C# 代码中转换为 Array 并使用其 GetValue() 方法来访问元素。使用 GetLowerBound() 知道从哪里开始。

# size - 如何减小 Clozure Common Lisp 可执行文件的大小？

> ID：11074528
> 
> 赞同：8
> 
> 时间：2012-06-17T20:26:35.540
> 
> 标签：size, common-lisp, executable, ccl

我保存了这个简单的程序

```
(defun hello-world ()
  (format t "Hello, world"))

(defun main ()
  (hello-world)) 
```

使用[`ccl:save-application`](http://ccl.clozure.com/manual/chapter4.9.html)

```
(ccl:save-application "test"
                      :toplevel-function #'main
                      :prepend-kernel t
                      :purify t
                      :impurify t) 
```

来自 Clozure Common Lisp REPL。

生成的可执行文件在 Mac OS X 上的大小为 25M。我知道它包含 Lisp 内核和 Lisp 系统的内存表示。对于这样一个简单的程序来说，25M 似乎还是有点大。参数`purify`和`impurify`似乎没有太大的影响。

我有哪些选项可以减小可执行文件的大小？有吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T22:56:51.333

您对 CCL 无能为力。

一件事可能是通过不记录各种调试信息（参数列表、文档、源位置...）来使用自定义配置创建更小的基础映像。

您还可以压缩可执行文件并发送压缩文件。

CCL AFAIK 缺乏用于缩小应用程序的交付工具——像 Allegro CL 和 LispWorks 这样的工具。

# jquery - 在禁用选项上选择 jquery

> ID：11074530
> 
> 赞同：6
> 
> 时间：2012-06-17T20:26:37.510
> 
> 标签：jquery, jquery-chosen

我有一个带有一些选项的选择：

```
 <select id="select">
   <option>1</option>
   <option disabled="true">2</option>
   <option>3</option>
 </select> 
```

我正在为 jQuery 使用选择的插件，问题是禁用的选项已从视图中删除。但我需要将其显示为不可点击的禁用元素。

jquery选择的插件有机会吗？

-- 该示例将转换为：

```
 <ul class="chzn-results">
   <li id="location_select_chzn_o_0" class="active-result result-selected">1</li>
   <li id="location_select_chzn_o_2" class="active-result">3</li>
</ul> 
```

所以第二个元素并没有变得不可见，它根本不存在。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T16:34:44.600

nicholmikey 的方法是正确的，但是这里是你需要在 selected.jquery.js 中替换的代码，它只是几行简单的行（下面注释）。希望这可以帮助。

```
AbstractChosen.prototype.result_add_option = function(option) {
  var classes, style;

    option.dom_id = this.container_id + "_o_" + option.array_index;
    classes = option.selected && this.is_multiple ? [] : ["active-result"];
    if (option.selected) {
      classes.push("result-selected");
    }
    if (option.group_array_index != null) {
      classes.push("group-option");
    }

    // THIS IS NEW ---------------
    if (option.disabled) {
      classes.push("disabled");
    }
    // ---------------------------

    if (option.classes !== "") {
      classes.push(option.classes);
    }
    style = option.style.cssText !== "" ? " style=\"" + option.style + "\"" : "";
    return '<li id="' + option.dom_id + '" class="' + classes.join(' ') + '"' + style + '>' + option.html + '</li>';
}; 
```

还有这个

```
Chosen.prototype.result_select = function(evt) {
  var high, high_id, item, position;
  if (this.result_highlight) {
    high = this.result_highlight;
    high_id = high.attr("id");
    this.result_clear_highlight();
    if (this.is_multiple) {
      this.result_deactivate(high);
    } else {
      this.search_results.find(".result-selected").removeClass("result-selected");
      this.result_single_selected = high;
      this.selected_item.removeClass("chzn-default");
    }
    high.addClass("result-selected");
    position = high_id.substr(high_id.lastIndexOf("_") + 1);
    item = this.results_data[position];

    // THIS IS NEW ---------------
    if(this.form_field.options[item.options_index].disabled){
      return false;
    }
    // ---------------------------

    item.selected = true;
    this.form_field.options[item.options_index].selected = true;
    if (this.is_multiple) {
      this.choice_build(item);
    } else {
      this.selected_item.find("span").first().text(item.text);
      if (this.allow_single_deselect) this.single_deselect_control_build();
    }
    if (!(evt.metaKey && this.is_multiple)) this.results_hide();
    this.search_field.val("");
    if (this.is_multiple || this.form_field_jq.val() !== this.current_value) {
      this.form_field_jq.trigger("change", {
        'selected': this.form_field.options[item.options_index].value
      });
    }
    this.current_value = this.form_field_jq.val();
    return this.search_field_scale();
  }
}; 
```

最后为了让它们变灰，我添加了这个 css ......

```
.chzn-results .disabled{color:#CCC;} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T14:53:22.020

您需要按照此处所述编辑插件：

[http://bitsmash.wordpress.com/2012/10/01/making-disabled-elements-visible-with-the-jquery-chosen-plugin/](http://bitsmash.wordpress.com/2012/10/01/making-disabled-elements-visible-with-the-jquery-chosen-plugin/)

该插件读取一个选择，将其从 DOM 中删除，并添加一个新的 ul。将 li 添加到新 ul 时会跳过标记为“已禁用”的选项

这是在 selected.jquery.js 中感兴趣的方法

```
AbstractChosen.prototype.result_add_option = function(option) {
  var classes, style;
  if (!option.disabled) {
    option.dom_id = this.container_id + "_o_" + option.array_index;
    classes = option.selected && this.is_multiple ? [] : ["active-result"];
    if (option.selected) classes.push("result-selected");
    if (option.group_array_index != null) classes.push("group-option");
    if (option.classes !== "") classes.push(option.classes);
    style = option.style.cssText !== "" ? " style=\"" + option.style + "\"" : "";
    return '<li id="' + option.dom_id + '" class="' + classes.join(' ') + '"' + style + '>' + option.html + '</li>';
  } else {
    return "";
  }
}; 
```

请注意，如果禁用某个选项，则它不会返回任何内容。走线

```
return ""; 
```

并放入您想要的禁用项目的 html/css。或者，您可以删除 if (!option.disabled) 块，并添加一个新的 if (!option.disabled) 块，该块在项目被禁用时添加一个特殊的 CSS 类。

接下来，您需要确保当用户单击禁用的项目时没有任何反应。您需要编辑此方法：

```
 Chosen.prototype.result_select = function(evt) {
  var high, high_id, item, position;
  if (this.result_highlight) {
    high = this.result_highlight;
    high_id = high.attr("id");
    this.result_clear_highlight();
    if (this.is_multiple) {
      this.result_deactivate(high);
    } else {
      this.search_results.find(".result-selected").removeClass("result-selected");
      this.result_single_selected = high;
      this.selected_item.removeClass("chzn-default");
    }
    high.addClass("result-selected");
    position = high_id.substr(high_id.lastIndexOf("_") + 1);
    item = this.results_data[position];
    item.selected = true;
    this.form_field.options[item.options_index].selected = true;
    if (this.is_multiple) {
      this.choice_build(item);
    } else {
      this.selected_item.find("span").first().text(item.text);
      if (this.allow_single_deselect) this.single_deselect_control_build();
    }
    if (!(evt.metaKey && this.is_multiple)) this.results_hide();
    this.search_field.val("");
    if (this.is_multiple || this.form_field_jq.val() !== this.current_value) {
      this.form_field_jq.trigger("change", {
        'selected': this.form_field.options[item.options_index].value
      });
    }
    this.current_value = this.form_field_jq.val();
    return this.search_field_scale();
  }
}; 
```

添加一个块，如果禁用，则返回 false，然后当用户单击该项目时，不会发生任何事情。

# php - Yii：使用 CGridView 和 CArrayDataProvider 进行客户端排序和分页

> ID：11074535
> 
> 赞同：1
> 
> 时间：2012-06-17T20:27:11.360
> 
> 标签：php, yii

这是我要解决的用例：

我有一个在网格中显示的数据数组。我正在使用 CGridView，并使用 CArrayDataProvider 包装该数组。

我在一个请求中获取数组的所有数据，我想纯粹在客户端（使用 javascript）进行分页。IE：如果我的数组有 100 个项目，我想一次显示 20 个并进行分页/排序 - 无需为分页/排序功能发出任何额外的服务器请求。

在做了一堆谷歌搜索之后，我无法找到一个已经存在并且不需要编写我自己的 CSort / CPagination 实现的解决方案。有没有人碰巧有解决方案/可以指出一些有用的东西？

# spring - jdbc-initialize-database 找不到脚本文件 - DataAccessResourceFailureException

> ID：11074537
> 
> 赞同：6
> 
> 时间：2012-06-17T20:27:23.917
> 
> 标签：spring, cloud-foundry

我无法让我的 Spring Web 应用程序找到我的脚本。我已经配置了 jdbc 命名空间。我已经编写了脚本，但是，我无法弄清楚为什么无论我将脚本放在哪里，都找不到它们。我特别标记文件夹是“类文件夹”。我把它们和我所有的罐子放在同一个文件夹里……我扔了一百块石头。就好像列出的错误并不是我的错误。

这应该很简单，但有时，我只是碰到树桩。

最终，我试图让代码到位，这样我就可以初始化一个我已经提升到 CloudFoundry 的数据库。

我得到“无法从类路径资源 [etcog-schema.sql] 读取 SQL 脚本”。这是我的代码——就像我发现的所有其他示例一样。

```
<jdbc:initialize-database data-source="dataSource">
  <jdbc:script location="classpath:etcog-schema.sql"/>
  <jdbc:script location="classpath:etcog-data.sql"/>
</jdbc:initialize-database> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T01:59:02.277

如果您使用的是 STS 并且您已经使用 Spring 模板创建了应用程序，那么如果您只是将 *.sql 文件放在**src/main/resources**中，您应该能够通过类路径访问它们：...

# java - 使用 G1 收集器时 JVM 泄漏内存？

> ID：11074540
> 
> 赞同：1
> 
> 时间：2012-06-17T20:28:07.380
> 
> 标签：java, garbage-collection, jvm, jvm-hotspot, g1gc

当使用 G1 收集器时，是否有人遇到过 JVM（热点）泄漏内存的问题？

我已将堆大小固定为 60GB（-ms 和 -ms 都设置为 60G），但 java 进程的大小（根据 ps 命令的 vsz 列）从 64GB 左右开始，但增加到 84GB 7小时内。

使用并行收集器，进程大小在 20 小时运行后保持稳定，大约为 65GB 左右。

有没有其他人对 G1 收集器有类似的问题？我正在运行一个非常简单的基准测试，并且我没有使用任何直接缓冲内存或其他堆外内存（我知道）。

Java版本为1.7.0，更新5

（我已经向 Oracle 提出了一个关于这个问题的错误，但我想我也会在这里检查一下，以防有人有解决方法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:37:02.667

有没有其他人对 G1 收集器有类似的问题？

很快——是的。

这是关于导致内存泄漏的主题：

[使用 Java 创建内存泄漏](https://stackoverflow.com/questions/6470651/creating-a-memory-leak-with-java)

它包含有关**G1的信息**

> 使用 InflaterInputStream 在 c-tor（例如 PNGImageDecoder）中传递 new java.util.zip.Inflater() 而不是调用 inflater 的 end()。好吧，如果您只传入新的 c-tor，则没有机会......并且是的，如果将充气器作为 c-tor 参数手动传递，则在流上调用 close() 不会关闭充气器。这不是真正的泄漏，因为它会被终结器释放......当它认为有必要时。直到那一刻它严重消耗本机内存，它可能导致 linux oom_killer 杀死进程而不受惩罚。主要问题是 Java 中的最终确定非常不可靠，G1 直到 7.0.2 才使情况变得更糟。故事的寓意：尽快释放原生资源，终结器太差了。

这里也提到了泄漏： http://bugs.sun.com/bugdatabase/view_bug.do?bug_id= [7152954](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7152954)

# php - Codeigniter 正则表达式匹配时间不起作用

> ID：11074542
> 
> 赞同：1
> 
> 时间：2012-06-17T20:28:23.953
> 
> 标签：php, regex, codeigniter

我正在尝试使用此正则表达式`([01]?[0-9]|2[0-3]):00:00`将 24 小时格式与 00 分钟和秒相匹配。

在 codeigniter 的表单验证规则中，我正在输入正则表达式

```
regex_match[([01]?[0-9]|2[0-3]):00:00] 
```

并不断获得

```
Message: preg_match() [function.preg-match]: No ending matching delimiter ‘)’ found 
```

正则表达式在 php 中工作，但不是通过 CI 正则表达式规则。我究竟做错了什么？：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:16:13.130

您可以使用回调而不是使用正则表达式匹配器。

就像是：

```
$this->form_validation->set_rules('number', 'Number', 'callback_validate_24hourtimestamp');

function validate_24hourtimestamp ($num)
{
    return preg_match('/^([01]?[0-9]|2[0-3]):00:00$/', $num);
} 
```

# ios - 使用蓝牙 LE 和 iOS 进行接近检测

> ID：11074543
> 
> 赞同：3
> 
> 时间：2012-06-17T20:28:23.790
> 
> 标签：ios, core-bluetooth, bluetooth-lowenergy

我一直在研究蓝牙 LE，尤其是在阅读了一些谣言之后，苹果可能正在实施某种“iWallet”来使用这项技术进行支付。对于那些更熟悉这项技术的人，我是否可以通过将设备真正靠近并按下按钮来轻松地将设备连接在一起，而无需配对？IE，如果我想向我旁边的朋友发送文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:53:17.487

iOS 上的 BTLE 不需要完整的配对步骤，除非您需要安全连接。但是，它没有文件传输的带宽。它适用于少量数据。想想心脏监视器和温度传感器。BTLE 不会取代完整的蓝牙或 WiFi。它增强了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T00:43:06.957

您已经可以使用`GameKit`框架使用内置蓝牙，但请注意，这仅适用于 iOS 到 iOS。您不能将 gamekit 用于多平台通信。

另一种选择是`Bonjour`，否则您将不得不创建一个网络服务器后端。即将文件发送到网络服务，然后发送回您朋友的手机。

此页面显示了一些有关如何检测靠近您的对等点的示例代码：[https ://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/FindingPeerswithPeerPicker/FindingPeerswithPeerPicker.html#//apple_ref/ doc/uid/TP40008304-CH102-SW1](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/FindingPeerswithPeerPicker/FindingPeerswithPeerPicker.html#//apple_ref/doc/uid/TP40008304-CH102-SW1)

这是一个很好的一般起点：[https ://developer.apple.com/technologies/ios/networking.html](https://developer.apple.com/technologies/ios/networking.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T21:34:48.360

我写了这个小代码来快速开始使用 iBeacons - 希望它有助于 [https://github.com/manishnath/iBeaconCenter](https://github.com/manishnath/iBeaconCenter) 谢谢，Manish

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-14T23:58:52.580

我为 iOS 编写了一个超级简单的基于蓝牙 LE 邻近度的共享项目——你可以查看源代码，看看我的设置是否适合你，或者将项目拖到你的应用程序中，然后使用委托方法来共享字符串数组附近的手机之间。

例如，您可以通过蓝牙 LE 在手机之间共享一组用户 ID 或照片 ID，接收器可以使用这些用户 ID 或照片 ID 从 Web 服务下载大量数据（用户配置文件、大照片）。

[SimpleShare - 适用于 iOS 的基于近距离的轻松共享](http://github.com/lauraskelton/simple-share)

# spring - 在Controller中抛出并开始新的事务后是否可以完成事务？

> ID：11074544
> 
> 赞同：0
> 
> 时间：2012-06-17T20:28:38.873
> 
> 标签：spring, spring-mvc, jta, spring-transactions

我有一个标有事务注释的控制器。方法*连接*可能会抛出异常，我在@ExceptionHandler 注释的帮助下通过方法*句柄进行处理。*

```
public String join(Model uiModel) {
  ... here exception occures
}

@ExceptionHandler(BalanceException.class)
public String handle() {
    return "someView";
} 
```

当*handle*方法返回视图的名称时，一切都很好。不幸的是，我需要重定向到另一个需要事务的控制器。

是否有可能完成这笔交易并开始新的交易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:43:33.647

在我看来，您永远不应该在视图层中启动事务，而是使用服务层来处理事务逻辑。这意味着您应该在服务层的 Spring bean 上使用 @Transactional 注释。

# regex - 根据位置匹配字符串中的字符

> ID：11074545
> 
> 赞同：0
> 
> 时间：2012-06-17T20:28:55.993
> 
> 标签：regex

我很好奇是否有可能获得一些帮助来构建一个可以检查字母位置与传入字符串匹配的正则表达式。例如，假设我在第一个字符中有'f'，在第二个字符中有'o'等等......然后在我循环字符串时验证它。

希望这是有道理的！如果您需要更多详细信息，请告诉我！谢谢！

附言。这都是纯 ol' ASCII。

* * *

编辑：

为了更清楚地了解字符位置匹配，例如，如果我有一个模式：

```
- e - p 
```

我希望能够将“derp”字符串匹配为真（因为它击中了第二个和第四个字符）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:39:24.887

将连字符更改为点：

```
^.e.p$ 
```

点表示匹配除换行之外的任何字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T20:40:02.147

任何单词字符

*e?p -> **\w+e\wp**

或任何 aplha

*e?p -> **[az]+e[az]p**

*和 4 个字符*

任何单词字符

?e?p -> **\we\wp**

或任何 aplha

?e?p -> **[az]e[az]p**

**更新**

使用上述模式创建更具体的匹配，其中 * 和 ? 很喜欢。例如：

mis?i?n ->**错误[az]i[az]n**

*i?n -> **[az]+i[az]n**

第一个将匹配“使命”，第二个将匹配“使命”和“激情”和“时尚”......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T20:32:52.220

这可能是第五个最容易构建的正则表达式。如果要匹配输入字符串的位置 0 到 4（例如）中的特定字符串，并且要匹配的字母是“abcde”，则以下正则表达式可以解决问题：

```
/^(abcde)/ 
```

# php - 使用 codeigniter 的日期格式

> ID：11074547
> 
> 赞同：-3
> 
> 时间：2012-06-17T20:29:03.200
> 
> 标签：php, codeigniter

关于为什么我会遇到语法错误的任何想法？

```
$this->db->select("DATE_FORMAT(".$this->news_articles_table."'.date_posted', '%M %D, %Y'"); 
```

更新：

```
$this->db->select("DATE_FORMAT(".$this->news_articles_table."'.date_posted', '%M %D, %Y')"); 
```

> 发生数据库错误
> 
> 错误号：1064
> 
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“FROM ( `news_articles`) JOIN `news_categories`ON `news_articles`.`news_categorie”附近使用正确的语法
> 
> 选择`news_articles`。`id`, `news_articles`. `article_title`, `news_categories`. , CONCAT(first_name, ' ', last_name) 作为作者, DATE_FORMAT `category_name`(news_articles'.date_posted', `'%M`%D, , `%Y')`. `statuses`FROM `status_name`( `news_articles`)`news_categories` 加入`news_articles`. `news_categories_id`= `news_categories`.`id`加入 . = .加入 . = .`users``news_articles``author_id``users``user_id``statuses``news_articles``status_id``statuses``id`
> 
> 文件名：/home/xtremer/public_html/kowmanager/modules/news/models/news_model.php
> 
> 行号：74

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T20:49:49.120

问题隐藏在错误消息中。看看你的 SQL 查询语法：

```
DATE_FORMAT(news_articles'.date_posted', `'%M` %D, `%Y')` 
```

这看起来不太对，是吗？

因为[CI 正在尝试自动保护您的列名](http://codeigniter.com/user_guide/database/active_record.html#select)。因此，要解决此问题，您需要传递`FALSE`给 的第二个参数`$this->db->select()`，这将阻止 CI 尝试自动保护这些名称。

这应该有效：

```
$this->db->select("DATE_FORMAT(".$this->news_articles_table.".date_posted, '%M %D, %Y')", FALSE); 
```

# ios - cocos2d中的枪射击

> ID：11074550
> 
> 赞同：0
> 
> 时间：2012-06-17T20:30:07.430
> 
> 标签：ios, xcode, cocos2d-iphone

刚开始学习iphone的Cocos2d编程，有一个关于在Cocos2d中进行射击模仿的问题。我有一个*精灵*。当我将它拖到另一个地方并放下它时，我想用另一个名为*shell*的小精灵开始在一个方向上永久拍摄。所以我需要在 -ccTouchesEnded 中永远重复一个两步循环：

1.*外壳*开始远离*精灵*（模仿射击）（CCMoveTo）；

2.当*shell*停止时（它的移动范围有限）它应该消失或应该变成不可见。（removeChild：，可见：或什么？）

它需要永远重复（CCRepeatForever actionWithAction[CCSequence actions:];

所以，我需要帮助来设置这两个动作的永恒循环。

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:03:55.883

我真的不明白你在问什么。我会尽力帮助你了解我所理解的。

当您想移除贝壳时，只需将它们设置为不可见即可。一直调用**addChild:**和**removeChild:**会导致您的设备哭泣。

相反，在您的游戏开始时，根据您的需要创建一个固定数量（可能是 15 - 20）并将它们存储在一个数组中。将它们全部设置为不可见。然后，每次您需要一个外壳时，获取一个未使用的外壳，将其设置为可见，然后对其应用操作。当您不再需要它时（当它停止时），只需将其设置为不可见。

如果您能详细说明一下，那么我很乐意尝试回答您的其余问题:)

编辑：

在您的 .h 文件中，创建一个名为 shells 的 NSMutableArray。初始化它。创建一个 int (bulletIndex = 0) 然后在您的应用程序开始时调用：

```
- (void)createBullets {
    for (int i = 0; i < 15; i++) {
        CCSprite *shell = [CCSprite spriteWithFile:@"shell.png"]; //Create a sprite
        shell.visible = NO; //Set it invisible for now
        [self addChild:shell]; //Add it to the scene
        [shells addObject:shell]; //Add it to our array
    }
} 
```

现在你的 touchesEnded: 方法：

```
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    [self schedule:@selector(shootingTimer:) interval:1.0f]; //This schedules a timer that fires the shootingTimer: method every second. Change to fit your app
} 
```

我们上面安排的方法：

```
- (void)shootingTimer:(ccTime)dt {
    CCSprite *shell = (CCSprite*)[shells objectAtIndex:bulletIndex]; //Get the sprite from the array of sprites we created earlier.
    shell.visible = YES; //Set it visible because we made it invisible earlier
    //Do whatever you want to with a shell. (Run your action)
    bulletIndex++; //Increment the index so we get a new shell every time this method is called
    if (bulletIndex > shells.count - 1) bulletIndex = 0; //We don't want to go out of our arrays (shells) bounds so we reset bulletIndex to zero if we go over
} 
```

然后，如果你想在 touchesBegan 上关闭它：

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [self unschedule:@selector(shootingTimer:)];
} 
```

最后，就你的 shell 的操作而言，你会想要做这样的事情：

```
id shellMove = [CCMoveTo actionWithDuration: yourDuration position: yourPosition]; //Move it to wherever you want
id shellEnd = [CCCallFuncN actionWithTarget: self selector:@selector(endShell:)]; //This will call our custom method after it has finished moving
id seq = [CCSequence actions:shellMove, shellEnd, nil]; //Create a sequence of our actions
[shell runAction:seq]; //Run the sequence action 
```

endShell 方法可能如下所示：

```
- (void)endShell:(id)sender {
    CCSprite *sprite = (CCSprite*)sender;
    sprite.visible = NO;
} 
```

希望这可以解释您的大部分问题（如果不是全部的话）。如果您需要进一步的帮助，请告诉我。

# uiimageview - 标题和图像居中的 UIButton

> ID：11074555
> 
> 赞同：1
> 
> 时间：2012-06-17T20:30:39.687
> 
> 标签：uiimageview, uibutton, uilabel, title

我想要一个带有图像**和**标题的 UIButton。我得到了使用出现的文本`-setTitleEdgeInsets`。

但我不想通过反复试验来获得正确的位置，因为按钮的标题应该是动态的。我尝试确定 UIButtons titleLabel 对象的大小和位置，并使用以下代码设置与其对应的 titleEdgeInsets：

```
[myButton setTitleEdgeInsets:UIEdgeInsetsMake(myButton.center.y - (myButton.titleLabel.bounds.size.height / 2),
                             - (myButton.center.x - (myButton.titleLabel.bounds.size.width / 2)),
                             myButton.center.y + (myButton.titleLabel.bounds.size.height / 2),
                             myButton.center.x + (myButton.titleLabel.bounds.size.width / 2))]; 
```

我在这里遗漏或误用了什么吗？

在此先感谢，致以诚挚的问候-朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:11:03.997

按钮在管理标签和图像子视图方面可能会有点麻烦——它不会给你太多控制权。这是因为它们会在按钮状态更改（甚至更频繁）时更新这些值，因此如果您手动设置了参数，您的设置就会丢失。这就是为什么你需要使用这样的方法`setTitleEdgeInsets:`- 你在正确的轨道上。:)

需要注意的事项：

*   您的使用`myButton.center`可能不正确。那将是您的按钮在其父视图中的中心，您可能希望在此处使用按钮大小的一半。
*   可能的情况是，当您的代码被调用时，按钮尚未完成其子视图布局，因此尚未为`titleLabel`.

您可以调用`layoutSubviews`按钮和/或`sizeToFit`标签。但是，您确实受制于 的不透明实现细节`UIButton`，因此最好计算您认为的文本/标签大小（使用 中的一种`sizeWithFont:*`方法`NSString`）并将顶部和左侧边缘插入设置为定位文本。

# sql - 将列名显示为数据

> ID：11074559
> 
> 赞同：0
> 
> 时间：2012-06-17T20:31:20.583
> 
> 标签：sql, sql-server-2008

如果源表是：

```
City         1996-MAY  1996-june  1996-july 1996-aug  1996-sep  1996-okt
 -----------  --------  --------  --------  --------  --------  --------
New Orleans         6          3         3         3         3         3    
Los Angeles         4          3         3         3         3         3 
```

```
select city, 1996-MAY, 1996-june, 1996-july, 1996-aug, 1996-sep, 1996-okt
  from a 
```

请求的结果是：

```
City         People    Date
-----------  --------  --------
New Orleans         6  1996-MAY
Los Angeles         4  1996-MAY  
New Orleans         3  1996-june
Los Angeles         3  1996-june  
New Orleans         3  1996-july 
Los Angeles         3  1996-july 
....            ...        ..... 
```

我该怎么做？

这不仅是一列，而且是截至 2003 年 5 月的许多列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:08:00.853

使用`UNPIVOT`：

```
SELECT  City, Date, People
FROM    T
        UNPIVOT 
        (   People 
            FOR Date IN ([1996-May], [1996-June], [1996-July])
        ) upvt 
```

您也可以动态执行此操作：

```
DECLARE @SQL NVARCHAR(MAX) = ''

SELECT  @SQL = ',' + QUOTENAME(Name)
FROM    SYS.COLUMNS 
WHERE   OBJECT_ID = OBJECT_ID('TableName')  
AND     Name != 'City'

SET @SQL = 'SELECT  City, Date, People
            FROM    T
                    UNPIVOT 
                    (   People 
                        FOR Date IN (' + STUFF(@SQL, 1, 1, '') + ')
                    ) upvt'

EXECUTE SP_EXECUTESQL @SQL 
```

# iphone - ios中的数据管理

> ID：11074562
> 
> 赞同：0
> 
> 时间：2012-06-17T20:32:10.567
> 
> 标签：iphone, ios, sqlite, data-management

在 iPhone 应用程序中，从在线数据库中检索数据的最佳方法是什么？（SQLite 或 mysql）

我想要实现的是在我的应用程序中读取和写入在线数据。

此外，开发人员如何从服务器端资源（xml、json、数据库表等）检索信息到他们的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T05:33:07.227

使用 REST 接口与在线服务进行交互。查看 RestKit 以将 REST 添加到您的 iOS 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T20:37:26.690

不要从您的 iOS 应用程序访问数据库，我不鼓励这样做，始终在其上创建一个 RESTful 层，它更安全，并且您可以通过许多其他方式从 RESTful 层中受益。

# paperclip - 尝试将 Jcrop 添加到 Paperclip 时无法批量分配虚拟属性

> ID：11074563
> 
> 赞同：0
> 
> 时间：2012-06-17T20:32:32.340
> 
> 标签：paperclip, ruby-on-rails-3.2, jcrop

我正在尝试使用 Paperclip 进行裁剪，并一直在关注 Ryan Bates 的解决[方案](http://railscasts.com/episodes/182-cropping-images)。

它工作正常，直到我提交表单并收到批量分配错误无法批量分配受保护的属性：crop_x、crop_y、crop_w、crop_h。

我认为 attr_accessor 为虚拟属性处理了这个？

退后一步，我不确定这是否是最佳的整体解决方案。我想要做的实际上是裁剪图像然后保存它，而不是之后更新它，但我不确定 Paperclip 是否可以处理这个问题，因为它似乎需要处理 Paperclip 的一个实例来执行裁剪？

谢谢。

这是我的模型、控制器和crop.html.erb 视图的要点。

[https://gist.github.com/2945549](https://gist.github.com/2945549)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:36:10.470

`attr_accessor :some_attribute`只是为这个类的对象创建方法`some_attribute`和对象。`some_attribute=`

`attr_accessible`管理批量分配的白名单。

# c# - c# HTMLElement 获取特定的孩子

> ID：11074575
> 
> 赞同：1
> 
> 时间：2012-06-17T20:33:30.623
> 
> 标签：c#, html, dom

假设我将 HTML 存储在 HTMLElement 对象中。它的 outerHTML 属性看起来像这样。

```
<table>
   <tr>
      <td>
         a
      </td>
      <td>
         b
      </td>
      <td>
         c
      </td>
   </tr>
</table> 
```

如何`<td>`使用 innerHTML获得第三个`"c"`？我将数据切换到其他对象没有问题，我只想能够轻松地做到这一点？我正在考虑将其解析为 XML，然后使用 XPath，但我没有运气......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:41:50.997

使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)加载文档，然后您可以在其上应用 XPath 以检索您感兴趣的节点。您的案例中的表达式为：

```
//table/tr/td[position()=2] 
```

如果您有更多行，那么它将从每行返回位置为 2（从零开始的索引）的所有 td 元素。

# c++ - gdb SIGABRT 而不是 SIGSEGV

> ID：11074584
> 
> 赞同：1
> 
> 时间：2012-06-17T20:34:50.133
> 
> 标签：c++

嘻嘻

我正在使用 gdb 来利用我的程序

```
int main(int argc, char *argv[]) {
if(argc < 2) {
    printf("You have vergotten to fill in a value\n");
    exit(0);
}

char buffer[10];
strcpy(buffer, argv[1]);
printf("the value you supplie is ");
printf(buffer);
printf("\n");

return 0;
} 
```

在他输入的vindeo教程中，在gdb中“运行AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA”应该变成：

```
program received signal SIGSEGV, sementation fault.
0x41414141 in ?? () 
```

但我得到了 SIGABRT

```
*** stack smashing detected ***: /root/Desktop/out terminated
======= Backtrace: =========
/lib/libc.so.6(__fortify_fail+0x37)[0x7ffff7b59217]
/lib/libc.so.6(__fortify_fail+0x0)[0x7ffff7b591e0]
/root/Desktop/out[0x400759]
/lib/libc.so.6(__libc_start_main+0xfd)[0x7ffff7a78c4d]
/root/Desktop/out[0x400609]
======= Memory map: ========
00400000-00401000 r-xp 00000000 08:01 148883                                 /root/Desktop    /out
00600000-00601000 r--p 00000000 08:01 148883                             /root/Desktop    /out
00601000-00602000 rw-p 00001000 08:01 148883                             /root/D 
```

等等，然后是 SIGABRT

我得到 SIGABRT 而不是 SIGSEGV 的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T20:40:29.387

您的编译器实现[*堆栈粉碎保护*](http://www.research.ibm.com/trl/projects/security/ssp/)。运行时告诉你它。尝试将缓冲区放在函数之外 - 您最有可能遇到分段错误。

顺便说一句，在`root`.

# c# - 在可执行文件中嵌入和更改数据

> ID：11074585
> 
> 赞同：0
> 
> 时间：2012-06-17T20:34:51.463
> 
> 标签：c#, file, executable

是否可以将文本文件放入可执行文件中，然后在程序运行时对文件进行更改？我需要这样做，因为我正在制作一个需要密码才能打开的便携式程序，并且用户需要能够更改密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T21:03:03.090

将有所谓的“备用数据流”非常适合此类任务。如果应用程序当前正在运行，您的便携式程序的可执行文件将无法通过正常方式向其附加数据（如文本文件），但仍然可以通过添加“备用数据流”访问它。此处有一个关于如何将“备用数据流”添加到文件的示例/文章：[Manipulate-Alternate-Data-Streams](http://www.codeproject.com/Articles/9387/Manipulate-Alternate-Data-Streams)。只需重新编写示例以将流添加到您自己的可执行文件中。它就像一个隐藏的文件属性，只要“属性名称”未知，用户就不会知道它。即使在这种情况下，用户也需要一个工具来使属性/数据流可见。

# video-streaming - hls 分段器，接受要分段的关键帧列表

> ID：11074598
> 
> 赞同：1
> 
> 时间：2012-06-17T20:36:38.127
> 
> 标签：video-streaming, http-live-streaming, mediastreamsegmenter

我正在使用 x264 创建变体 h.264 流。使用 qpfile (http://mewiki.project357.com/wiki/X264_Settings#qpfile) 我确保我的变体流具有共同的关键帧。但是，如果编码器优化器需要，它们可以在流之间具有不同的其他关键帧，因为我没有在 qpfile 中指定视频的每一帧。

是否有可用的分段器允许我指定允许哪些关键帧开始新分段？否则，如果我仅按目标持续时间进行分段，我的变体流很可能会被分段不同步。

我问是因为我想将 hls 添加到我当前的编码过程中而不更改它。我还没有看到任何允许这样做的分段器或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:18:06.880

据我所知，没有这样的工具。

制作自己的分段器可能不会太难，它会读取只有公共关键帧的 qpfile，但它是可行的。

# css - 对角楔形 CSS - 边缘到边缘在浏览器中居中

> ID：11074601
> 
> 赞同：12
> 
> 时间：2012-06-17T20:37:12.853
> 
> 标签：css, shape, css-shapes

我一直在尝试用 CSS 制作这个形状。

理想情况下，它将跨越浏览器窗口的整个长度，并可能延伸到视野之外以支持更大的屏幕，并且还可以居中以使角度不会改变。

任何人有任何解决方案？

![在此处输入图像描述](../Images/2d877b8119bf8da05187cb247e142ba4.png)

另外我认为我可能会遇到角度混叠的问题。我可能需要求助于使用图像。虽然想使用CSS。

** 图像拼写错误。（无限期并非不可避免）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-17T20:56:42.947

不需要 CSS3 支持的解决方案：

[jsfiddle](http://jsfiddle.net/Matt_Coughlin/UYRFY/)演示

HTML

```
<div class="shape">
    <div class="top"></div>
    <div class="bottom"></div>
</div> 
```

CSS

```
.shape {
    width:400px;
    margin:0 auto;
}
.top {
    height:0;
    border-width:0 0 150px 400px;
    border-style:solid;
    border-color:transparent #d71f55 #d71f55 transparent;
}
.bottom {
    height: 50px;
    background-color:#d71f55;
}

/* Support transparent border colors in IE6\. */
* html .top {
    filter:chroma(color=#123456);
    border-top-color:#123456;
    border-left-color:#123456;
} 
```

**注意：**您有时会在某些浏览器中对对角线进行过度抗锯齿（如夸张的模糊或阴影）。这个技巧在现代浏览器上可能有点不可预测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-06T15:08:35.510

我创建了一个扩展（和一个 Sass）版本的 Matt Coughlins 伟大的答案，[我在我的博客（德语）中发布了它](https://www.jumplink.eu/blog/post/diagonal-linien-reinem-css-sass-fur-schrage-layouts)并分叉了他的[jsfiddle 演示](https://jsfiddle.net/1paf1sj8/4/)。

**HTML**

```
<div class="diagonal-shape bl-to-tr"></div>
<div class="block">Diagonal Shape</div>
<div class="diagonal-shape tr-to-bl"></div>
<br><br><br><br><br>
<div class="diagonal-shape tl-to-br"></div>
<div class="block">block2</div>
<div class="diagonal-shape br-to-tl"></div> 
```

**CSS**

```
/**
 * Draw a diagonal shape, e.g. as diagonal segregation
 * 
 * @author: Matt Coughlin, Pascal Garber
 *
 * @param $color: The color of the shape, default #d71f55
 * @param $direction:
 *  bl-to-tr for bottom-left to top right
 *  tr-to-bl for top-right to bottom left
 *  tl-to-br for top-left to bottom right
 *  br-to-tl for bottom-right to top left
 * @param $height: The height of the shape, default 100px
 * @param $width: The width of the shape, default 100vw
 * @param $color: The color of the shape, default #d71f55
 *
 * @see also: http://stackoverflow.com/a/11074735/1465919
 */
.diagonal-shape.bl-to-tr {
  height: 0;
  border-style: solid;
  border-width: 0 0 100px 100vw;
  border-color: transparent #d71f55 #d71f55 transparent;
}
.diagonal-shape.tr-to-bl {
  height: 0;
  border-style: solid;
  border-width: 100px 100vw 0 0;
  border-color: #d71f55 transparent transparent #d71f55;
}
.diagonal-shape.tl-to-br {
  height: 0;
  border-style: solid;
  border-width: 0 100vw 100px 0;
  border-color: transparent transparent #d71f55 #d71f55;
}
.diagonal-shape.br-to-tl {
  height: 0;
  border-style: solid;
  border-width: 100px 0 0 100vw;
  border-color: #d71f55 #d71f55 transparent transparent;
}

.block {
    height: 200px;
    line-height: 200px;
    background-color: #d71f55;
    color: white;
    text-align: center;

}

/* Support transparent border colors in IE6\. */
* html .top {
    filter:chroma(color=#123456);
    border-top-color:#123456;
    border-left-color:#123456;
} 
```

**SCSS**

```
/**
 * Draw a diagonal shape, e.g. as diagonal segregation
 * 
 * @author: Matt Coughlin, Pascal Garber
 *
 * @param $color: The color of the shape, default #d71f55
 * @param $direction:
 *  bl-to-tr for bottom-left to top right
 *  tr-to-bl for top-right to bottom left
 *  tl-to-br for top-left to bottom right
 *  br-to-tl for bottom-right to top left
 * @param $height: The height of the shape, default 100px
 * @param $width: The width of the shape, default 100vw
 * @param $color: The color of the shape, default #d71f55
 *
 * @see also: http://stackoverflow.com/a/11074735/1465919
 */
@mixin diagonal-shape($color: #d71f55, $direction: 'bl-to-tr', $height: 100px, $width: 100vw) {
    height: 0;
    border-style: solid;

    @if $direction == 'bl-to-tr' {
        border-width: 0 0 $height $width;
        border-color: transparent $color $color transparent;
    } @else if $direction == 'tr-to-bl' {
        border-width: $height $width 0 0;
        border-color: $color transparent transparent $color;
    } @else if $direction == 'tl-to-br' {
        border-width: 0 $width $height 0;
        border-color: transparent  transparent $color $color;
    } @else if $direction == 'br-to-tl' {
        border-width: $height 0 0 $width;
        border-color: $color $color transparent  transparent ;
    }
}

.diagonal-shape {
    &.bl-to-tr {
        @include diagonal-shape($brand-primary, 'bl-to-tr');
    }
    &.tr-to-bl {
        @include diagonal-shape($brand-primary, 'tr-to-bl');
    }
    &.tl-to-br {
        @include diagonal-shape($brand-primary, 'tl-to-br');
    }
    &.br-to-tl {
        @include diagonal-shape($brand-primary, 'br-to-tl');
    }
} 
```

使用 SCSS Mixin，您可以轻松创建自己的类：

```
.your-claas {
    @include diagonal-shape($color, $direction, $height, $width);
} 
```

# php - 使用 isset 进行 js 重定向和新的 php 脚本检查后，使用 php 设置的 cookie 不可用

> ID：11074602
> 
> 赞同：0
> 
> 时间：2012-06-17T20:37:20.450
> 
> 标签：php, javascript, cookies

所以这是我第一次使用 cookie，我在设置它们时遇到了一些麻烦。我认为我做的一切都是正确的（但你知道编程是怎样的）。无论如何，我正在创建一个登录系统，它将通过`jquery.ajax`调用`validateLogin.js`一个 php 脚本（autologin.php），通过另一个脚本（login.php）中的函数检查用户及其密码是否在数据库中，在`login.php`如果用户存在且密码相同，则设置 cookie 并`autologin.php`返回一些 json 数据，然后将更多 json 数据返回给原始`jquery.ajax`方法`success`函数。然后该`success`函数将重定向到`userarea.html`，其中 js 函数将自动加载用户数据，以便可以使用。这是通过另一个`ajax`调用完成的`loaduserdata.js`which 调用`loaduserdata.php`which checks `isset($_COOKIE['user']`，然后根据发生的情况返回一些 json 数据。但是`isset($_COOKIE['user']`失败了，我在控制台或任何日志（php、mysql、apache）中都没有收到任何错误。所以我真的很难过。这是我的代码：

`validateLogin.js`

```
function validateLogin(){
  $(document).ready(function(){
    $("#loginform").submit(function(){
      $.ajax({
        type: "POST",
        url: "./php/autologin.php",
        data: {
          'login': $("#login").val(), 
          'password': $("#password").val()
        },
        dataType: "json",
        success:function(data){
          if(data.status == "success"){
            alert(data.message);
            window.location = "./userarea.html";
          } else if (data.status == "error"){
            alert(data.message);
          }
        },
        error:function(thrownError){
          console.log(thrownError);
        }
      }); 
      return false;
    });

  });
} 
```

`autologin.php`

```
<?php

include './login.php';
$login = $_POST['login'];
$password = $_POST['password'];
$loginattempt = login($login, $password);
$loginattemptdata = json_decode($loginattempt);
if ($loginattemptdata->{'status'} === "success") {
  echo json_encode(array('status' => "success", 'user' => $loginattemptdata->{"user"}, 'message' => "Login Successful!"));
  die();
} else {
  echo json_encode(array('status' => "error", 'error' => "loginfailure", 'message' => $loginattemptdata->{"message"}));
  die();
}
?> 
```

`login.php`

```
<?php
include './connect_to_mysql.php';

function login($log, $pass) {
  $link = connect_to_mysql();
  $linkdata = json_decode($link);
  if ($linkdata->{'status'} === "success") {
    $sqlquery = mysql_query("SELECT * FROM userdata WHERE login='$log' AND password='$pass'") or die(mysql_error());
    if (mysql_num_rows($sqlquery) == 1) {
      setcookie("user", $log, 86400, '/', 'localhost');
      return json_encode(array('status' => "success", 'message' => "Login Successful.", 'user' => $log));
      die();
    } else {
      return json_encode(array('status' => "error", 'error' => "loginfailure", 'message' => mysql_error()));
      die();
    }
  } else {
    return json_encode(array('status' => "error", 'error' => "connectionerror", 'message' => $linkdata->{'message'}));
    die();
  }
}

?> 
```

`loaduserdata.js`

```
$(document).ready(function(){
  $.ajax({
    type:"POST",
    url:"./php/loaduserdata.php",
    success:function(data){
      if(data.status === "success"){
        alert(data.status);
        alert(data.user);
      } else if (data.status === "error"){
        alert(data.status);
        alert(data.message);
        window.location = "./index.html";
      }
    },
    error:function(thrownError){
      console.log(thrownError);
    }
  });
}); 
```

`loaduserdata.php`

```
<?php
if (isset($_COOKIE['user'])) {
  $user = $_COOKIE['user'];
  echo json_encode(array('status' => "success", 'message' => $user));
  die();
} else {
  echo json_encode(array('status' => "error", 'message' => "Please login before continuing."));
  die();
}
?> 
```

从我读过的内容来看，您需要在设置 cookie 以使其可用于新脚本后刷新或重定向，我相信这就是我正在做的事情。任何帮助或方向将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:45:37.357

依赖客户端 cookie 获取登录状态是一个坏主意。想象一下，如果用户使用随机（有效）用户名制作自己的 cookie，会发生什么？他无需密码即可访问您的系统。

您是否考虑过切换到基于 $_SESSION 的身份验证过程？

这个概念是为每个访问者分配一个唯一的 ID（会话 ID），该 ID 存储为 cookie 客户端。当访问者加载页面时，会传递 sessid cookie，php 从会话存储中加载它（如果您尚未配置会话，很可能是 /tmp/ 中的文件）。此文件反映在 $_SESSION 变量中，您可以在其中保存只能由相应会话 ID 访问的数据。因此，用户名或登录状态是在服务器端处理的，而不是在客户端处理的。

```
<?php
# login.php
include './connect_to_mysql.php';

function login($log, $pass) {
  $link = connect_to_mysql();
  $linkdata = json_decode($link);
  if ($linkdata->{'status'} === "success") {
    $sqlquery = mysql_query("SELECT * FROM userdata WHERE login='$log' AND password='$pass'") or die(mysql_error());
    if (mysql_num_rows($sqlquery) == 1) {
      session_start();
      $_SESSION['user'] = $log;
      return json_encode(array('status' => "success", 'message' => "Login Successful.", 'user' => $log));
    } else {
      return json_encode(array('status' => "error", 'error' => "loginfailure", 'message' => mysql_error()));
    }
  } else {
    return json_encode(array('status' => "error", 'error' => "connectionerror", 'message' => $linkdata->{'message'}));
  }
}
?> 
```

更改： (1) 返回后丢弃 die()。他们永远不会被处决。(2) 通过 session_start() 和 $_SESSION['user'] = $log 保存到会话；而不是使用您自己的 cookie。

```
<?php
# loaduserdata.php
session_start();
if (isset($_SESSION['user'])) {
  $user = $_SESSION['user'];
  echo json_encode(array('status' => "success", 'message' => $user));
  die();
} else {
  echo json_encode(array('status' => "error", 'message' => "Please login before continuing."));
  die();
}
?> 
```

更改：使用 session_start() 和 $_SESSION['user'] 而不是依赖客户端 cookie。

# objective-c - 拦截粘贴操作

> ID：11074604
> 
> 赞同：1
> 
> 时间：2012-06-17T20:37:40.097
> 
> 标签：objective-c, cocoa

如何让我的 Cocoa 应用程序找出另一个应用程序是否**即将**从粘贴板执行粘贴？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T23:18:42.757

您不能拦截其他应用程序的功能行为。

# iphone - UITableViewCell 问题中的 UIProgressbar

> ID：11074605
> 
> 赞同：0
> 
> 时间：2012-06-17T20:37:40.987
> 
> 标签：iphone, uitableview, asihttprequest

在我的应用程序中，我有一个表格视图。每个单元格包含一个 UIButton、UIImageView 和一个 UILabel。而当点击按钮时，会使用 ASINetworkQueue 下载一组文件，此时按钮会被 UIProgressView 替换。在下载过程中，如果我滚动表格，应用程序会崩溃。我在 ASIHTTPRequest.m 类中得到错误点，

```
+ (void)updateProgressIndicator:(id *)indicator withProgress:(unsigned long long)progress ofTotal:(unsigned long long)total
{
    #if TARGET_OS_IPHONE
        // Cocoa Touch: UIProgressView
        SEL selector = @selector(setProgress:);
        float progressAmount = (float)((progress*1.0)/(total*1.0));

    #else
        // Cocoa: NSProgressIndicator
        double progressAmount = progressAmount = (progress*1.0)/(total*1.0);
        SEL selector = @selector(setDoubleValue:);
    #endif

    if (![*indicator respondsToSelector:selector]) { // here i am getting the error 
        return;
    }

    [progressLock lock];
    [ASIHTTPRequest performSelector:selector onTarget:indicator withObject:nil amount:&progressAmount callerToRetain:nil];
    [progressLock unlock];
} 
```

这是我的代码：我写了一个 UITableViewCell 类，例如，

```
@interface UIMenuItemCell : UITableViewCell{
    UILabel *cellItemName;
    UIImageView *cellitemImage;
    UIButton *cellItemButton;
    UIProgressView *cellItemProgress;
}
@property (nonatomic, retain) UILabel *cellItemName;
@property (nonatomic, retain) UIImageView *cellitemImage;
@property (nonatomic, retain) UIButton *cellItemButton;
@property (nonatomic, retain) UIProgressView *cellItemProgress; 
```

和

```
- (UIMenuItemCell *) getCellContentView:(NSString *)cellIdentifier {

    CGRect CellFrame = CGRectMake(0, 0, 150, 60);
    CGRect imgFrame = CGRectMake(20, 48, 110, 123);
    CGRect btnFrame = CGRectMake(25, 140, 100, 26);

    UIImageView *itemImg;
    UIButton *itemBtn;

    UIMenuItemCell *cell = [[UIMenuItemCell alloc] init] ;
    cell.frame = CellFrame;

    //Initialize ImageView
    itemImg = [[UIImageView alloc]initWithFrame:imgFrame];
    itemImg.tag = 2;
    [cell.contentView addSubview:itemImg];

    //Initialize Button
    itemBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    itemBtn.frame = btnFrame;
    itemBtn.tag = 3;
    itemBtn.titleLabel.textColor = [UIColor blueColor];
    itemBtn.titleLabel.font = [UIFont systemFontOfSize:9.0];
    [cell.contentView addSubview:itemBtn];

    return cell;
}
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UIMenuItemCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil)
        cell = [self getCellContentView:CellIdentifier];

    cell.cellitemImage = (UIImageView *)[cell viewWithTag:2];
    cell.cellItemButton = (UIButton *)[cell viewWithTag:3];

    DataBaseClass *itemObj = [appDelegate.itemArray objectAtIndex:indexPath.row];
    NSString *url;
    if ([itemObj.itemStatus isEqualToString:@"NotAvailable"]) {
        url = [NSString stringWithFormat:@"%@",itemObj.notAvialableIcon];
        [cell.cellItemButton setTitle:date forState:UIControlStateNormal]; 
        cell.cellItemButton.userInteractionEnabled = NO;
        cell.userInteractionEnabled = NO;
        [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"not_available_bttn_bck_img"] forState:UIControlStateNormal];
    }else if([itemObj.itemStatus isEqualToString:@"Available"]){
        cell.cellItemButton.userInteractionEnabled = YES;
        cell.userInteractionEnabled = YES;
        [cell.cellItemButton setTitle:@"" forState:UIControlStateNormal];
        [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"img_normal"] forState:UIControlStateNormal];
        [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"img_pressed"] forState:UIControlStateHighlighted];
        [cell.cellItemButton addTarget:self action:@selector(download) forControlEvents:UIControlEventTouchUpInside];
        url = [NSString stringWithFormat:@"%@",itemObj.availableIcon];
    }

    [cell.cellitemImage setImageWithURL:[NSURL URLWithString:url] placeholderImage:[UIImage imageNamed:@"item01.png"]];

    cell.cellItemName.text = [NSString stringWithFormat:@"%@",itemObj.itemName];

    return cell;
} 
```

和下载动作：

```
- (void)download{
//adding custom method to add the uiprogressview into the selected cell
//and setting the progress delegate for the queue
[self.myQueue setDownloadProgressDelegate:currentProgress];
//then starts download
[self.myQueue go];
} 
```

请分享你的想法。 **编辑：**在这里我同时实现多个下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:41:31.930

发生的情况是，当您的单元格离开屏幕时，进度条会被释放并且 ASI 将尝试更新已发布的对象，您要做的就是将两者分开，您可以创建一个下载器类并让这个班级向单元格发送通知，请注意，这需要你做一些工作，祝你好运:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T21:51:28.037

@Omar 关于这个问题是正确的。这是一个解决方案的草图：

将“downloadProgress”之类的属性添加到 DatabaseClass。这可以是一个浮点数，当没有下载发生时它的值为负数，而当下载发生时它的值介于 0.0 和 1.0 之间。

将隐藏的进度指示器添加到您的自定义单元格。

按下下载按钮时，获取相应的数据库项目并开始下载（将项目的 downloadStatus 设置为 0.0）。随着异步过程的进展，更新该项目的下载状态。

每次你这样做时，让表知道状态发生了变化（NSNotification 在这里可能是一个很好的机制）。表 VC 应该调用 reloadRowsAtIndexPaths: 并带有一个包含与数据库项对应的索引路径的数组。

配置单元格时，表 VC 应检查项目的下载状态。如果是肯定的，取消隐藏状态指示器并根据浮动设置它的进度。

此外，关于崩溃：看起来在输入指标 (id *) 的 updateProgress 方法中至少还有一个问题。这就像一个指向 id 的指针，几乎可以肯定不是你想要的。只需使用 id，不要将正文中的指标称为 *indicator。

# java - 使用大于 120GB RAM 的并发标记清除垃圾收集器

> ID：11074608
> 
> 赞同：18
> 
> 时间：2012-06-17T20:37:49.760
> 
> 标签：java, garbage-collection, jvm, jvm-hotspot, concurrent-mark-sweep

有没有人设法在具有超过 120GB RAM 的热点中使用并发标记扫描垃圾收集器 (UseConcMarkSweepGC)？

如果我将 -ms 和 -mx 设置为 120G，则 JVM 可以正常启动，但如果我将它们设置为 130G，则 JVM 在启动时会崩溃。JVM 在并行收集器和 G1 收集器上启动良好（但它们有自己的问题）。

有没有人设法使用超过 120GB 堆的并发标记扫描收集器？如果是这样，您是否需要做一些特别的事情，或者我只是在这里不走运？

来自 JVM 错误转储的堆栈如下：

```
Stack: [0x00007fbd0290d000,0x00007fbd02a0e000],  sp=0x00007fbd02a0c758,  free space=1021k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [libc.so.6+0x822c0]  __tls_get_addr@@GLIBC_2.3+0x822c0
V  [libjvm.so+0x389c01]      CompactibleFreeListSpace::CompactibleFreeListSpace(BlockOffsetSharedArray*, MemRegion, bool, FreeBlockDictionary::DictionaryChoice)+0xc1
V  [libjvm.so+0x3d1ae0]  ConcurrentMarkSweepGeneration::ConcurrentMarkSweepGeneration(ReservedSpace, unsigned long, int, CardTableRS*, bool, FreeBlockDictionary::DictionaryChoice)+0x100
V  [libjvm.so+0x49d922]  GenerationSpec::init(ReservedSpace, int, GenRemSet*)+0xf2
V  [libjvm.so+0x48d0b9]  GenCollectedHeap::initialize()+0x2e9
V  [libjvm.so+0x824098]  Universe::initialize_heap()+0xb8
V  [libjvm.so+0x82657d]  universe_init()+0x7d
V  [libjvm.so+0x4cf0dd]  init_globals()+0x5d
V  [libjvm.so+0x80f462]  Threads::create_vm(JavaVMInitArgs*, bool*)+0x1e2
V  [libjvm.so+0x51fac4]  JNI_CreateJavaVM+0x74
C  [libjli.so+0x31b7]  JavaMain+0x97 
```

[我已经用 Oracle ( http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7175901](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7175901) )提出了一个错误，但我想知道是否有其他人看过它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T22:03:29.163

这似乎已被甲骨文接受为错误：[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7175901](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7175901)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T15:40:48.843

有同样的问题。我们将 ms 减少到 140 以下，它似乎有效。将 mx 留在 400g 并编写了一个测试程序。

# nhibernate - 奇怪的映射要求

> ID：11074610
> 
> 赞同：0
> 
> 时间：2012-06-17T20:37:58.013
> 
> 标签：nhibernate, fluent-nhibernate

我有两个类和集合的映射：

```
class User
{
    Guid ID;
    string Name;
}

class Group
{
    Guid ID;
    string Name;
    IList<User> Members;
}

// GroupMap
HasMany(x=>x.Members).Inverse().Cascade.AllDeleteOrhpan().etc. 
```

这个有效。当我将用户添加到成员集合时，NHibernate 会级联操作。删除和更新也是如此。

现在我想稍微改变一下我的模型，这也会改变映射。集合是 IList `<Guid`>。我真正想要的是留下的级联。这意味着我必须做一些自定义持久性或 IUserType。映射应该告诉像 HasMany(x=>x.Members) 这样的对象类型，并且集合将保存 ID

```
class User
{
    Guid ID;
    string Name;
}

class Group
{
    Guid ID;
    string Name;
    IList<Guid> Members;
}

// GroupMap
HasMany<User>(x=>x.Members).Inverse().Cascade.AllDeleteOrhpan().etc. 
```

任何想法我可以从哪里开始？我认为没有开箱即用的解决方案，但谁知道......

PS：NHib 用户组：[https ://groups.google.com/forum/#!topic/nhusers/pSUOaGxdxVM](https://groups.google.com/forum/#!topic/nhusers/pSUOaGxdxVM)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:34:35.867

*对于第一条评论：自定义 persiter 或其他东西**应该**注意反向引用。*

所以第一个映射实际上已经不起作用了吗？您可以在 User 上映射虚拟反向引用并通过拦截器进行设置，如果需要，我可以发布一些内容。但是我几乎看不到任何优势。

*对于第二个：组和用户是两个聚合根。我只想通过他们的身份来连接这两个 AR。两个 AR 不需要任何其他信息，除了对方的 ID。*

```
// readonly mapping
HasMany(x => x.Members).Column("Group_Id").Element("Id").Readonly(); 
```

我认为当您有一个指向用户的非只读 guid 集合时，您会遇到很多微妙的问题。例如，应该为什么生成 sql：

```
var user = new User { Id = Guid.New(), Name = "Joe", Age = 12 };
group.Members.Add(user.Id);

session.SaveOrUpdate(group);
session.Flush();

a) INSERT INTO Users (Id, Group_id) Values(...);
b) nothing
c) INSERT INTO Users (Id, Group_id, Name, Age) Values(...); 
```

或这个

```
group.Members.Remove(someGuid);

session.SaveOrUpdate(group);
session.Flush();

a) DELETE FROM Users WHERE group_id = 1;
b) DELETE FROM Users WHERE id = <guid>;
c) Update Users Set group_id = null WHERE Id = <guid>; 
```

# html - 里面有图片吗 标签在您“打开”详细信息之前或之后加载？

> ID：11074613
> 
> 赞同：1
> 
> 时间：2012-06-17T20:38:28.600
> 
> 标签：html, bandwidth, details-tag

就像标题所说的那样，如果我将图像放在详细信息标签中，我会为用户节省带宽，所以直到他们打开它才会加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:50:06.423

我认为 W3C 没有定义任何此类加载行为，因此这可能取决于实现。也就是说，**不，这不能保证这会为您的用户节省任何带宽，但是如果您想折叠图像并希望尽可能多地为您的用户节省带宽，那么这是您最好的纯 HTML 赌注。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T20:47:05.780

不，你什么都不保存。图像将作为页面的其余部分加载。它将根据详细信息标签的定义按需可见。

# c++ - 当我将 true 分配给 int 变量时，为什么编译器不抱怨？

> ID：11074615
> 
> 赞同：2
> 
> 时间：2012-06-17T20:38:40.717
> 
> 标签：c++, types, type-conversion

我有一个看起来像这样的程序：

```
#include <stdio.h>
#include <stdlib.h>
#include "string.h"
#include <sstream>

class A{
    int num1;
    char char1;

    public:
        void set_print_num(int);
};

void A::set_print_num(int n){
    num1 = true;
    printf("this is %d", num1);
}

int main(void){
    A a_inst;
    a_inst.set_print_num(5);
} 
```

即使我将 num1 设置为 true 而不是 int，我也没有收到编译器错误。有什么不对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:40:40.923

您的所有变量都保留其类型。但是，一种类型的值可以转换为另一种类型。

`true`是 type 的值`bool`，它可以隐式转换为 type `int`，值`false`变为`0`，值`true`变为`1`。

C++ 中有许多隐式转换，其中大多数允许数字类型之间的转换，并且可以编写用户定义的转换，以允许与用户定义的类型进行隐式转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T20:40:46.237

A`bool`可以隐式转换为`int`。提高你的警告级别，你应该得到一个，但不是错误，因为这是合法的*C++*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T20:44:11.480

因为布尔类型被隐式转换为整数类型。例如，true + true 计算为 2。

# c++ - 将 boost 的 multi_array 和 optional 与 C++11 unique_ptr 混合不起作用

> ID：11074619
> 
> 赞同：5
> 
> 时间：2012-06-17T20:38:54.817
> 
> 标签：c++, c++11, unique-ptr, boost-multi-array, boost-optional

我已经用 G++ 4.7 组合了一个最前沿的设置（尽管目前我仍在使用`sudo apt-get boost-all-dev`Debian Wheezy 附带的 boost 1.48）。

我的代码设置在要使用的逻辑数据结构是 unique_ptr 的多维数组的地方。但是`multi_array`，如果其中有一个 unique_ptr ，似乎甚至无法构造一个空的单元素数组。因此这是有效的：

```
boost::multi_array<int, 1> arrWorks (boost::extents[1]); 
```

但这不会：

```
boost::multi_array< unique_ptr<int>, 1> arrFails (boost::extents[1]); 
```

我想编译器的相关抱怨是：

> /usr/include/c++/4.7/bits/stl_uninitialized.h:225: 来自 'void std::uninitialized_fill_n(_ForwardIterator, _Size, const _Tp&) [with _ForwardIterator = std::unique_ptr*; _Size = 无符号整数；_Tp = std::unique_ptr]'</p>

`optional< unique_ptr<...> >`即使我应用了此处提供的补丁，我也遇到了一些问题：

[https://svn.boost.org/trac/boost/ticket/1841](https://svn.boost.org/trac/boost/ticket/1841)

*（注意：通过[Is it possible to move a boost::optional 找到的？](https://stackoverflow.com/questions/10783391/is-it-possible-to-move-a-boostoptional)）*

例如：

```
boost::optional< unique_ptr<int> > optWorks (new int);

// Fails
boost::optional< unique_ptr<int> > optFails (std::move(optWorks)); 
```

我觉得我在做的事情是合法的。事实上，通过将 unique_ptr 合并到这个项目中，我已经在所有权转移语义方面发现了一些错误。所以我不想说*“哦，这太复杂了，只需使用原始指针”*。

这是否在 boost 的议程上支持？有时间表吗？在此期间我可以使用任何简单的解决方法吗？

# java - 来自其他类的 JFrame/JPanel 绘图

> ID：11074624
> 
> 赞同：1
> 
> 时间：2012-06-17T20:40:06.983
> 
> 标签：java, swing, jframe, jpanel, paintcomponent

我正在用java开发一个简单的游戏。虽然这可能是一个愚蠢的问题，但我确实需要一些帮助。我的游戏将具有多个级别。我希望能够从新的类文件中加载每个级别以使其更易于管理。如果这不是一个稳定的解决方案，请告诉。

现在我的问题是这个。如果我的 JPanel 在类文件 A 中，我如何从类文件 B 中绘制它？想象类文件 B 是我的级别，因此我将拥有类文件 C、D、E 等等，我希望能够将所有不同的级别绘制到保存我的 JPanel 的类文件 A 中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:51:12.453

两种可能的解决方案是：

将类文件传递给`JPanel`，例如：

```
JPanel j = new JPanel();
Level l1 = new Level(1);
Level l2 = new Level(2);
j.initlevel(l1);
//wait until level 1 is done
j.initlevel(l2); 
```

并让 initlevel 进行加载：

```
public void initlevel(Level l){
    // for all level parts, load them into "this"
} 
```

或者您可以将某些属性`JPanel`设为公共，并将其传递给关卡：

```
JPanel j = new JPanel();
new Level(1, j);
//wait until level 1 is done
new Level(2, j); 
```

并制作Level的构造函数：

```
public Level(int level, JPanel j){
    //for all level parts load them into "j"
} 
```

请注意，这是一个非常基本的结构，如果您的游戏变得有点复杂，您可能需要考虑阅读模型-视图-控制器模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T21:01:51.860

理想的设计使 UI 绘图远离游戏逻辑，因此您走在正确的轨道上。一个这样的解决方案的一个示例可能是一个组成一个 JPanel 的类，该 JPanel 在级别更改时得到通知。例如

```
public class LevelViewController implements LevelChangedListener {
   private JPanel viewPane;

   public LevelViewController(JPanel viewPane) {
      this.viewPane = viewPane;
   }

   public void levelChanged(Level level) {
      // Update JPanel with logic now the level has changed
      ...
   }
}

public interface LevelChangedListener {
     void levelChanged(Level level);
} 
```

任何知道玩家要进入下一个级别的人都需要通知其 LevelChangedListeners 集合（您的 LevelViewController 就是其中之一），这将反过来更新您的 JPanel。如果您希望在级别更改后更新其他内容，那么您也可以挂钩其他 LevelChangedListeners。

# spring - mule 配置中的属性占位符是从一个文件解析的，但不是从另一个文件解析的

> ID：11074625
> 
> 赞同：0
> 
> 时间：2012-06-17T20:40:22.767
> 
> 标签：spring, configuration, mule

我遇到了一个奇怪的问题。我有一个骡子配置文件。它没有什么真正令人兴奋的东西并且工作正常。至少它奏效了...

当我开始将配置参数放入几个属性文件时，问题就开始了。如果我在一个文件中定义一个属性，它会被解析，但另一个文件没有。

没有错误消息表明读取文件失败或任何...

我的场景告诉我，这与配置文件由 org.mule.config.spring.SpringXmlConfigurationBuilder 读取的事实有关...

有没有人有类似的问题？或者有谁知道到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:31:42.623

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:my-mule-app.properties</value>
                <value>classpath:my-mule-app-override.properties</value>
            </list>
        </property>
    </bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:11:43.467

我不确定您如何配置上下文占位符，但如果您使用多个属性，则应声明一个逗号分隔的位置列表，如下所示：

```
<context:property-placeholder
         location="classpath:my-mule-app.properties,
                   classpath:my-mule-app-override.properties" /> 
```

如果您需要任何进一步的信息，您可以 在该主题[的官方文档页面中找到它们](http://www.mulesoft.org/documentation/display/MULE3USER/Using+Parameters+in+Your+Configuration+Files)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:18:28.657

多谢你们。

这样神秘的问题就解决了。在我的集成测试中，我需要一个启动的 hornetq/mule 服务器对。对于测试，我想从通常的 spring XML 配置中注入所有可能的对象。所以我在 spring XML 配置文件中定义了我的 MuleServer bean，并使用了将 mule 的配置文件作为字符串数组的构造函数。我不知道（或没有考虑过）MuleServer 类创建了自己的应用程序上下文......

因此，在我的测试应用程序上下文中，我实例化了一个创建自己的应用程序上下文的对象......

由于属性占位符是某种特殊的 bean，并且必须在所有其他 bean 之前初始化，这导致了上述奇怪的行为。

解决方案是我在我的测试 setUp 方法中使用 new 关键字实例化 MuleServer 。

这对我有用。

# mysqli - 如何避免第二个“准备”语句的重复 MySQLi 连接？

> ID：11074628
> 
> 赞同：0
> 
> 时间：2012-06-17T20:40:36.483
> 
> 标签：mysqli, prepared-statement

为什么它停止在第二个`$mysqli->prepare($query)`语句上工作？

```
$mysqli = @new mysqli(HOSTNAME, USERNAME, PASSWORD, DATABASE);
...
if ($stmt = $mysqli->prepare($query)) {
    // Code is working fine
    ...
    if ($stmt2 = $mysqli->prepare($query2)) {
        // Code does not work
        ...
    }
} 
```

并且可以通过重复`mysqli`连接正常工作：

```
$mysqli = @new mysqli(HOSTNAME, USERNAME, PASSWORD, DATABASE);
$mysqli2 = @new mysqli(HOSTNAME, USERNAME, PASSWORD, DATABASE);
...
if ($stmt = $mysqli->prepare($query)) {
    // Code is working fine
    ...
    if ($stmt2 = $mysqli2->prepare($query2)) {
        // Code is working fine
        ...
    }
} 
```

如何避免第二条语句`mysqli`的重复连接？`prepare`

* * *

**更新：正如我所见，社区想要一个真实的例子：**

`fruits`带有数据的db 表：

```
CREATE TABLE IF NOT EXISTS `fruits` (
  `id` varchar(8) NOT NULL,
  `group` varchar(8) NOT NULL,
  `name` varchar(250) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `fruits` (`id`, `group`, `name`) VALUES
('03E7', '', 'Berries'),
('0618', '03E7', 'blueberry'),
('051B', '03E7', 'raspberry'),
('02AA', '03E7', 'strawberry'),
('035F', '', 'Citrus'),
('07A5', '035F', 'grapefruit'),
('0633', '035F', 'lime'),
('05E1', '', 'Pear'); 
```

php脚本：

```
<?php

$mysqli = new mysqli('localhost', 'root', 'password', 'test');
//$mysqli2 = new mysqli('localhost', 'root', 'password', 'test');

$query1 = "SELECT id, name FROM fruits WHERE `group`=''";
$query2 = "SELECT name FROM fruits WHERE `group`=?";

$stmt1 = $mysqli->stmt_init();
$stmt2 = $mysqli->stmt_init();
//$stmt2 = $mysqli2->stmt_init();

if($stmt1->prepare($query1)){
    $stmt1->execute();
    $stmt1->bind_result($id, $name1);

    while($stmt1->fetch()){
        echo $name1;

        if($stmt2->prepare($query2)){
            $stmt2->bind_param('s', $group);
            $group = $id;
            $stmt2->execute();
            $stmt2->bind_result($name2);

            echo ':';

            while($stmt2->fetch()){
                echo ' ' . $name2 . ',';
            }
        }

        echo '<br>';
    }
}

?> 
```

结果：

```
Berries
Citrus
Pear 
```

预期结果：

```
Berries: blueberry, raspberry, strawberry,
Citrus: grapefruit, lime,
Pear: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:32:03.353

要解决此问题，请删除

```
$stmt1 = $mysqli->stmt_init();
$stmt2 = $mysqli->stmt_init(); 
```

并在之后添加`$stmt1->execute();`

```
$stmt1->store_result(); 
```

`$stmt1->prepare($query1)`并将,替换`$stmt2->prepare($query1)`为

```
$stmt1 = $mysqli->prepare($query1)
$stmt2 = $mysqli->prepare($query2) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T14:15:34.837

您的代码是否有以下内容？

```
$stmt = $mysqli->stmt_init();
$stmt2 = $mysqli->stmt_init(); 
```

然后你可以这样做：

```
if($stmt->prepare($query)) ...
if($stmt2->prepare($query2)) ... 
```

请发布所有代码，以便我可以更好地了解发生了什么。

**编辑：好的，这是我的工作示例：**

这是我`links`的数据表：

```
CREATE TABLE IF NOT EXISTS `links` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32),
  `group` varchar(32),
  `array` int(32),
  PRIMARY KEY (`id`)
) ENGINE=MyISAM;

INSERT INTO `links` (`id`, `name`, `group`, `array`) VALUES
(1, 'link1', '', 1),
(2, 'link1-sub-link1', '1', 1),
(3, 'link1-sub-link2', '1', 1),
(4, 'link2', '', 2),
(5, 'link3', '', 2),
(6, 'link3-sub-link1', '5', 2),
(7, 'link3-sub-link2', '5', 3),
(8, 'link3-sub-link3', '5', 3); 
```

以下 php 代码对我来说执行没有错误：

```
<?php
$mysqli = new mysqli("localhost", "root", "password", "things");

$query = "SELECT id, name FROM links WHERE `group`='' ORDER BY array ASC";
$query2 = "SELECT name FROM links WHERE `group`=? ORDER BY array ASC";

$stmt1 = $mysqli->stmt_init();
$stmt2 = $mysqli->stmt_init();
if($stmt1->prepare($query)){
    $stmt1->execute();
    $stmt1->bind_result($id, $name1);
    while($stmt->fetch()){
    echo $name1;
        if($stmt2->prepare($query2)){
            $stmt2->bind_param('s', $group);
            $group = $id;
            $stmt2->execute();
            $stmt2->bind_result($name2);
            while($stmt2->fetch()){
                echo 'related to: ' . $name2 . "\n";
            }
        }
    }
}
?> 
```

# c#-4.0 - 碰撞检测系统

> ID：11074630
> 
> 赞同：0
> 
> 时间：2012-06-17T20:40:44.100
> 
> 标签：c#-4.0, xna

我正在尝试制作一个简单的平台游戏。玩家是一个正方形，所有的平台都是正方形。我是 XNA 的初学者，但我有适度的 C# 4.0 经验。

我的代码的问题是，当我的角色穿过平台的底部时，即使我将其设置为他不应该穿过，他也会继续穿过。

提前我想问一下是否有人可以帮助我，因为我无法解决这个问题。

以下是不同代码段如何协同工作：

*   在平台结构中加载图像并存储一个枚举，它可以保存三个值之一：可通过（可以通过）、不可通过（完全实心）和平台（可以通过底部并停在顶部）
*   需要修复的碰撞检测方法（它检查交叉点，检查该特定平台的枚举，然后确定它是否可以通过并返回一个数组，其中包含：{isabove, isbelow, isleft, isright}该平台）
    *   如果玩家在平台顶部，它确实返回 true，但当他们到达底部时没有任何反应
*   我的球员的垂直运动处理重力和垂直运动，这可能是罪魁祸首，但我不能说。碰撞检查在开始时在更新循环中运行，然后在之后运行垂直运动方法

这是碰撞的代码：

```
 public bool[] environmentCollisionDetect(Charachter thing, ScreenObjects sreenobjectlist, bool[] platformstatus)
    {
        //Defaults the collision to false
        platformstatus[0] = false;  //Above platform
        platformstatus[1] = false;  //Below Platform
        platformstatus[2] = false;  //Left
        platformstatus[3] = false;  //Right

        //Store the player in boxA
        boxA.Height = thing.image.Height;
        boxA.Width = thing.image.Width;
        boxA.X = (int)thing.position.X;
        boxA.Y = (int)thing.position.Y;

        //Find a collision
        foreach (Platform platform in screenobjectlist)
        {
            //Makes sure the platform cannot be passed through
            if (platform.platformCollisionProperty != platformCollision.passable)
            {
                //Store the platform's rectangle
                boxB = platform.destinationrectangle;
                boxB.Height = platform.image.Height;
                boxB.Width = platform.image.Width;
                boxB.X = (int)platform.destinationrectangle.X;
                boxB.Y = (int)platform.destinationrectangle.Y;

                //Collision Check
                if (boxA.Intersects(boxB))
                {
                    switch (platform.platformCollisionProperty)
                    {
                        //Platform is Solid
                        case platformCollision.impassible:

                            //Player is below it
                            if (boxA.Top > boxB.Bottom)
                            {
                                platformstatus[1] = true;
                            }

                            //Player is above it
                            if (boxA.Bottom > boxB.Top)
                            {
                                platformstatus[0] = true;
                            }
                            break;

                        //Platform can be passed through bottom
                        case platformCollision.platform:
                            if (boxA.Bottom > boxB.Top)
                            {
                                platformstatus[0] = true;
                            }
                            break;
                    }

                    break;
                }
            }
        }
      return platformstatus;
    } 
```

这是垂直运动代码：

*   当跳转按钮被激活时，isJumping bool 设置为 true
*   isinair bool 仅在此循环中用于确定玩家是否仍在空中滑行
*   最后我被用作计数器，因为我无法让计时器工作

    ```
    public void verticalMotionI(GameTime gametime)
    {
        //Resets the bools if not standing on platform
        if ((this.isJumping == true) && (this.platformstatus[0] == false))
        {
            this.i = 0;
            this.isJumping = false;
            this.isinair = false;
        }

        //Jumps if A button is activated and standing on a platform
        else if ((this.isJumping == true) && (this.platformstatus[0] == true))
        {
            //Set up bools to jump
            this.isJumping = false;
            this.isinair = true;

            //Overwrites the start time
            this.starttime = currentime;

            //Move up
            this.position.Y -= this.playermovementspeed * 1.5f;

            //Increase counter
            this.i++;
        }

        //Pulls stops moving player if jumptimer had elapsed
        else if ((this.isinair == true) && (i == this.jumptime))
        {
            this.isinair = false;

            //Apply gravity
            Gravity.forceofGravity(this);
        }

        //Stops the jump if bottom of a platform is hit
        else if ((this.isinair == true) && (this.platformstatus[1] == true))
        {
            //Reset bools
            this.isinair = false;

            //reset I
            this.i = 0;

            //Apply gravity
            Gravity.forceofGravity(this);
        }

        //Continues the jump if in air
        else if ((this.isinair == true) && (this.platformstatus[1] == false))
        {
            //Move up
            this.position.Y -= this.playermovementspeed * 1.5f;

            //Increase counter
            this.i++;
        }

        //Apply Gravity
        else if ((this.isinair == false) && (this.platformstatus[0] == false))
        {
            //reset I
            this.i = 0;

            Gravity.forceofGravity(this);
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:21:49.880

如果 Gravity 符合我的假设，看起来您并没有明确设置玩家在撞击平台时的位置，我看到的是您切换您的 isInAir 标志，并应用重力......出于测试目的并解决您的问题，试试这样的伪代码：

```
if(dude is jumping & dude collides with platform){
   set the top of dudes head to be at position under the platform;
} 
```

希望这能有所帮助。:)

不是为了打败一匹死马或一头驴，而是你在重新发明轮子。看看那里的一些物理引擎。我一直在玩 Farseer 3+，非常棒。在第一次弄清楚 World Body Fixture 模式时有一个轻微的学习曲线，但是一旦你有了顿悟，就可以在你的 body/fixture 上设置一些属性并启动 OnCollision 方法。

Farseer 是 .NET 的 Box2D 物理引擎端口，它是开源的，一旦你完成了学习曲线，它就会令人惊叹。

快速浏览一下[这个farseer doc](http://farseerphysics.codeplex.com/documentation)，你可能会喜欢你所看到的。:) 即使您不喜欢它，它也是开源的，并且可以为您提供一些关于如何*咳嗽*复制* 以您自己的方式实现某些功能的想法。

如果你想要的只是简单的跳跃、对象状态和交互功能，你不需要实现引擎的所有有趣的复杂功能，这些都很好地包装在 Farseer 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:12:22.847

`if (boxA.Top > boxB.Bottom)`- 如果`boxA.Intersects(boxB)`. 你的意思是`if (boxA.Top < boxB.Bottom && boxA.Top > boxB.Center.Y)`？

只是重新发布我的评论探索作为将来参考的答案。由于我有回答空间而不是评论空间，因此我还可以解释一些事情。

显然，`Rectangle.Intersects(Rectangle)`只有当它们以某种方式重叠时才会成立。诀窍在于，在解释这一点时，我们需要记住屏幕上的 Y 坐标实际上是从上到下移动的。Y = 0 位于屏幕顶部，Y = 位于底部。如果您不熟悉 2D 游戏编程，这可能看起来有点倒退，但这正是图形适配器的工作方式。

因此，通过说 boxA 的顶部 > boxB 的底部，您实际上是在说 boxA 的顶部在屏幕上 boxB 的底部下方，这永远不会是真的，因为我们已经知道它们重叠。我转过条件并添加了一个额外的逻辑点，以提供所需的功能。`boxA.Top > boxB.Center.Y`表示您的 boxA在 boxB*下方*专门相交。如果我将其保留为 just ，则如果 boxA 从 boxB*上方*`boxA.Top < boxB.Bottom`掉落，则条件也为真，考虑到我们必须区分平台和实体块以实现涉及瓷砖下方玩家的逻辑，我认为您不希望这样做，所以我们必须在代码中做出这种区分。另外，当然，您的评论说。*`//player is below it`*

 *最后，提一句调试建议：如果您注意到某些行为没有发生，请在指示该行为的行上放置一个断点（在本例中为`platformstatus[1] = true`）。如果您从未遇到过该断点，那么您现在就知道为什么它没有发生了。现在只需在封闭的条件上放置一个断点。当它到达该断点时，手动查看这些值，将它们与预期值进行比较，并查看您是否使用了适当的逻辑。有时每个人都会在条件句中犯错误，这是我个人的第一个弱点。*

# c++ - vs2012 rc中基于范围的for循环

> ID：11074635
> 
> 赞同：1
> 
> 时间：2012-06-17T20:41:34.973
> 
> 标签：c++, visual-c++, c++11, visual-c++-2012

以下基于范围的 for 循环在 VS2012 中运行良好：

```
int values[] = {1, 2, 3};
for(int i: values)
{
} 
```

但是，这个不起作用：

```
for(int i: {1, 2, 3})
{
} 
```

有什么不同？

PS：我也找不到 std::initializer_list 模板类。我需要知道这个新的 VS2012 RC 支持哪些 C++11 特性。任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T20:42:59.967

Visual C++ 2012 不支持初始值设定项列表。

Visual C++ 2012 中支持 C++11 功能的最佳资源是 Visual C++[博客](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)上的这篇博文。

# cakephp - 数据从 Behavior 的 beforeValidate() 丢失到 Model 的 beforeSave()

> ID：11074640
> 
> 赞同：0
> 
> 时间：2012-06-17T20:42:09.390
> 
> 标签：cakephp, cakephp-2.2

**更新：**

使用`saveAll()`. 我让它在`save()`之后立即执行`saveAll`，它现在可以工作，但它是一个明显的 kludge，如果可能的话，我宁愿让它工作`saveAll`......我有其他模型应该产生 slug，我宁愿不每次都必须双重保存才能创建一个蛞蝓。

* * *

**原始问题：**

试图实现这种行为： [https ://github.com/vduglued/CakePHP-Sluggable-Behavior/blob/master/sluggable.php](https://github.com/vduglued/CakePHP-Sluggable-Behavior/blob/master/sluggable.php)

它工作正常，但最近它停止了......我不确定问题是什么，或者我们改变了什么，但**我已经缩小了问题的**范围。

在行为的`beforeValidate();`函数中，它向数据中添加了正确的 slug。当我当时调试`$model->data`时，它显示：

```
Array('Article' => array('slug'=>'test_1234')  ... 
```

在其他数据中。

`$this->data`如果我在我的 Article 模型中删除 THAT 调试和调试`beforeSave()`，它会显示所有数据，但不会显示应该通过`SluggableBehavior`.

我认为我不应该改变行为，因为我认为它之前工作正常..但也许 CakePHP 版本的最近更新改变了行为和模型的通信方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:09:58.937

这是 saveAssociated() 中的错误，请更新您的蛋糕核心

# matlab - 从控制点获取变换矩阵

> ID：11074642
> 
> 赞同：1
> 
> 时间：2012-06-17T20:42:14.507
> 
> 标签：matlab, image-processing, matrix, registration, transformation

我们可以通过'cp2tform'函数使用控制点构造一个'TFORM'结构，但是我想知道我们是否可以获得显式变换矩阵形式，而不是'TFORM'结构，以便我可以计算变换后的像素大小来自原始图像的图像，其中像素大小 dx 不等于 dy。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:15:29.943

如果`TFORM`是返回的结构，您可以访问转换矩阵：

```
TFORM.tdata.T 
```

和

```
TFORM.tdata.Tinv 
```

一个用于正向变换，另一个用于逆向变换。

您可以在 IPT 工具箱中编辑`maketform.m`文件并查看它们在内部是如何使用的。

# c# - 在页面视图上设置会话变量

> ID：11074643
> 
> 赞同：2
> 
> 时间：2012-06-17T20:42:30.997
> 
> 标签：c#, asp.net, asp.net-mvc-3, page-lifecycle

我正在编写一个多品牌的应用程序（即，它根据不同的用户从哪里来显示不同的外观）。

最终用户使用查询字符串来设置客户端 ID，例如

```
mysite?clientID={GUID} 
```

我想要做的是设置执行以下检查

```
If Session["ClientID"] is null or empty
    if querystring has ClientID 
        Set Session[ClientID] to QueryString[ClientID]
    else if the user has their clientID set in the db
        Set Session[ClientID] to DB Value 
    else 
        Use default ClientID
End 
```

检查我可以轻松解决的各种项目的代码，我现在很难过的是在哪里“推”这个代码，以便在每个页面加载时检查它。更具体地说，如果我应该使用应用程序生命周期事件挂钩，哪个最适合这个，所以我可以在呈现任何页面之前访问 Membership 对象、QueryString 和 Session 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:59:58.520

您可以在 global.asax 中使用该`Application_BeginRequest`事件，或者您可以将它放在 MasterPage 的代码隐藏中（如果有的话），或者放在 BasePage 文件的代码隐藏中（如果您的页面继承自一个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T21:00:17.677

您的 global.asax（在主目录中）是最好的地方。

```
protected internal void Application_BeginRequest(object sender, EventArgs e)
{
   // your code
} 
```

[在http://msdn.microsoft.com/en-us/library/2027ewzw.aspx](http://msdn.microsoft.com/en-us/library/2027ewzw.aspx)阅读更多内容

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T21:19:10.603

这是请求生命周期（等等）：

*   应用程序_开始请求。
*   Application_AuthenticateRequest。
*   应用程序_授权请求。
*   Application_PostAuthorizeRequest。
*   Application_ResolveRequestCache。
*   Application_AcquireRequestState。
*   Application_PreRequestHandler 执行。
*   您的页面事件处理程序已执行
*   Application_PostRequestHandler 执行。
*   Application_ReleaseRequestState。
*   Application_UpdateRequestCache。
*   应用程序_结束请求。

有关详细规范：http: [//msdn.microsoft.com/en-us/library/system.web.httpapplication.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.aspx)

所以我认为最适合您需求的活动是：

**Application_PostAuthorizeRequest**

MSDN 说明

> 在当前请求的用户已获得授权时发生。

来源：

[http://msdn.microsoft.com/en-us/library/system.web.httpapplication.postauthorizerequest.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.postauthorizerequest.aspx)

# report - 如何在 Stimulsoft 报告中对字段的值求和

> ID：11074644
> 
> 赞同：0
> 
> 时间：2012-06-17T20:42:46.687
> 
> 标签：report, stimulsoft

我正在使用 Stimulsoft 报告。如何在页面上的表格中获取字段的总和值，而不是全部报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:46:56.523

计算容器或页面的总数非常简单。为此，有必要在聚合函数的名称之前添加小写的拉丁字母“c”。例如：

```
{cCount(DataBand1)} 
```

此表达式将返回一页的行数。

**注意**。页面也是一个容器。因此，页面总数的计算与容器总数的计算方式相同。

当计算面板或页面的总数时，有必要通过聚合函数的计算来指定数据带。这是必要的，因为一页上可以放置多个数据带。

可以在一个页面或一个面板上使用任意数量的聚合函数。Stimulsoft Reports 没有限制。可以将页面的总数与条件相结合。例如：

```
{CountIf(DataBand1, Products.UnitsInStock = 0)} 
```

该表达式将返回此页面上为零的元素数。

在 Stimulsoft 报告中，总数的计算可以以另一种方式 - 立即生成。您应该使用特殊的 Totals 前缀。总计的计算发生在调用函数的地方，与标准结果相反，计算是在报告呈现时执行的。

以带有分组的报表为例，考虑报表中总计的计算。计算组中条目与报告中条目的比率，并以百分比显示总数。为此，请在 GroupFooterBand 中添加一个文本组件，其中包含以下内容

```
{Count(DataBand1) / (double)Totals.Count(DataBand1)} 
```

表达式，其中 Count(DataBand1) 函数将计算组中的行数，而 Totals.Count(DataBand1) 函数将计算报表中的行数。要以百分比显示总值，您应该将文本组件的 Text Format 属性设置为 Percentage。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T09:11:33.020

字典->函数->总计-> SUM()..

# javascript - 在 javascript 调用中将 css 样式应用于 :after 伪元素

> ID：11074646
> 
> 赞同：1
> 
> 时间：2012-06-17T20:42:53.753
> 
> 标签：javascript, css-selectors

我有一个下拉 div，当单击某个元素时我需要向下滑动，所以我编写了一个 js 函数，到目前为止它似乎工作。对于这个特定元素，我使用`:before`并`:after`创建了一个类似箭头的图形，如果下拉 div 向下或向上滑动，我需要更改样式。

```
function opere_slide(){

    ul=document.getElementById('opere');
    opere_tag=document.getElementById('opere_tag');
    margin=ul.style.marginTop;
    if(margin=='0px'){
       ul.style.marginTop='-200px';
       opere_tag.style.backgroundColor='white';
       opere_tag.style.borderBottomColor='#BCD2EE';
    }
    else{
       ul.style.marginTop='0px';
       opere_tag.style.backgroundColor='#F8F8F8';
       opere_tag.style.borderBottomColor='#E0E0E0';
    }
} 
```

这就是为什么我在上面的函数中添加了一个应该创建 HTML 样式元素并应用我需要的新 css 代码的和平。问题是：功能似乎不再起作用。

```
function opere_slide(){

    head=document.getElementsByTagName('head')[0];
    stylesheet=document.createElement('style');
    ul=document.getElementById('opere');
    opere_tag=document.getElementById('opere_tag');
    margin=ul.style.marginTop;
    if(margin=='0px'){
       ul.style.marginTop='-200px';
       opere_tag.style.backgroundColor='white';
       opere_tag.style.borderBottomColor='#BCD2EE';
    }
    else{
       ul.style.marginTop='0px';
       opere_tag.style.backgroundColor='#F8F8F8';
       opere_tag.style.borderBottomColor='#E0E0E0';
       text=document.createTextNode('div#opere_tag:before{border-top:10px solid #E0E0E0;}
       div#opere_tag:after{border-top:10px solid #F8F8F8;}');
       stylesheet.appendChild(text);
       head.appendChild(stylesheet);
    }
} 
```

PS：最后一件事可能很重要。该函数是“回显” HTML 脚本元素的 php echo 函数的内部。这就是我只使用单引号的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:52:43.347

由于文本节点字符串中的换行符而出现语法错误：

```
text=document.createTextNode('div#opere_tag:before{border-top:10px solid #E0E0E0;}
   div#opere_tag:after{border-top:10px solid #F8F8F8;}'); 
```

只需删除该换行符：

```
text=document.createTextNode('div#opere_tag:before{border-top:10px solid #E0E0E0;} div#opere_tag:after{border-top:10px solid #F8F8F8;}'); 
```

有关更多信息，请查看“[如何在 JavaScript 中的多行代码中拆分字符串？](https://stackoverflow.com/q/508269/288773) ”在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T20:55:13.373

您可以尝试以下方法：

```
<div class="???">
 ...
</div> 
```

当您滚动时，您将 div 上的类更改为 scrollDown 或 scrollUp，并更改您的 css，使其具有不同的箭头

```
.scrollUp div#opere_tag:after{...}
.scrollDown div#opere_tag:after{...} 
```

# c# - 在 VC++ 6.0 项目中导入 C# dll

> ID：11074648
> 
> 赞同：1
> 
> 时间：2012-06-17T20:43:29.243
> 
> 标签：c#, .net, visual-c++, com, unmanaged

我有两个项目。一个 C# 项目和一个 VC++ 6.0 项目。我想在非托管项目中导入 C# 项目的功能。我按照[本](http://support.microsoft.com/kb/828736)指南创建 dll 并使用以下方法导入 VC++ 6.0 项目：
`#import "..\ManagedDLL\bin\Debug\ManagedDLL.tlb" raw_interfaces_only`

我的项目构建正常，但是当我尝试运行它时，当我尝试使用以下方法初始化 COM 对象时，我收到来自调试器的异常：
`HRESULT hr = CoInitialize(NULL);`

我的消息得到的输出是：

> Loaded 'C:\XXXXX.dll' 符号文件中没有本机符号。
> W7.exe 中 0x75befbae 处的第一次机会异常：Microsoft C++ 异常：内存位置 0x0349bde0
> 处的 EEFileLoadException。W7.exe 中 0x75befbae 处的第一次机会异常：Microsoft C++ 异常：内存位置 0x00000000 处的 [rethrow] ..
> 第一次机会异常在 W7.exe 中的 0x75befbae：Microsoft C++ 异常：[重新抛出]在内存位置 0x00000000..
> W7.exe 中 0x75befbae 的第一次机会异常：0xE0434F4D:0xe0434f4d。
> W7.exe 中 0x75befbae 处的第一次机会异常：Microsoft C++ 异常：内存位置 0x00000000 处的 [rethrow]
> 。W7.exe 中 0x75befbae 处的第一次机会异常：Microsoft C++ 异常：内存位置 0x0349ec60 处的 _com_error。
> W7.exe 'W7.exe' 中发生了“System.Runtime.InteropServices.SEHException”类型的第一次机会异常：已加载“C:\Windows\System32\version.dll”，找不到或打开 PDB 文件
> 未处理的异常W7.exe 中发生“System.Runtime.InteropServices.SEHException”类型

我不知道在哪里看......我会很感激任何帮助。

# ssl - SSL 和加密

> ID：11074651
> 
> 赞同：0
> 
> 时间：2012-06-17T20:43:36.280
> 
> 标签：ssl

我主要是要求解释。我有一个网站在 joomla 上使用 mercurial。我也有一个不想使用任何网关支付程序的客户。目前，我使用一个简单的信用卡详细信息表格，这当然很糟糕。

我已经购买了一个 SSL 并等待它被激活。

这个 SSL 可以用于加密表格吗？或者我是否需要编辑表格以使其加密。

他们曾经拥有的是一个信用卡支付区域，您可以在其中输入您的详细信息并单击提交。他们（公司）收到一封带有链接的电子邮件，然后您单击该链接以查看包含客户信用卡详细信息的加密电子邮件。

我以前从未使用过美德玛特，也从未使用过 SSL。所以一些帮助会很棒。

不介意删除表格，但需要以某种方式在网站上提供安全的信用卡表格。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T22:40:08.870

> 我买了一个 SSL

您已购买 SSL*证书。*当你们都使用 SSL*协议*时，这会向客户端识别您的网站，该协议执行身份验证、加密和各种其他事情以确保隐私和完整性。

您需要定义对表单的*访问，*以便它需要 HTTPS 而不是 HTTP。

# ios - 为什么我的 uitextfield 不能在触摸时打开键盘？

> ID：11074659
> 
> 赞同：0
> 
> 时间：2012-06-17T20:45:26.270
> 
> 标签：ios, uitableview

出于某种原因，无法选择我的部分标题中的搜索字段以调出键盘。此外，我的表格视图单元格上没有任何内容，我不确定为什么。我的代码如下：

```
- (void)viewDidLoad {
  [super viewDidLoad];  

  self.view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];

  self.tableView = [[UITableView alloc] initWithFrame:self.view.frame style:UITableViewStylePlain];
  self.tableView.delegate = self;
  [self.view addSubview:self.tableView];
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField {
  [self.searchField resignFirstResponder];

  return NO;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
  return 1;
}

- (NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section {
  return 8;
}

- (CGFloat)tableView:(UITableView *)tableView
heightForRowAtIndexPath:(NSIndexPath *)indexPath {
  return 60;
}

- (UIView *)tableView:(UITableView *)tableView
viewForHeaderInSection:(NSInteger)section {

  UIView *customHeader = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 50)];

  // Add search field
  UITextField *field = [[UITextField alloc] initWithFrame:CGRectMake(40, 20, 250, 50)];
  field.borderStyle = UITextBorderStyleRoundedRect;
  field.delegate = self;
  [customHeader addSubview:field];

  return customHeader;
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  NSString *cellIdentifier;

  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
  if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];

    NSLog(@"i am here");

    UITextField *field = [[UITextField alloc] initWithFrame:CGRectMake(40, 20, 250, 50)];
    field.borderStyle = UITextBorderStyleRoundedRect;
    field.delegate = self;
    [cell.contentView addSubview:field];
  }

  return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:38:00.687

我会说它不起作用，因为您没有为该部分指定标题高度。你应该有类似的东西

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
  return 50.0;
} 
```

如果您有多个部分，请确保您只为所需部分执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T21:19:52.380

为什么不使用 nib 文件或情节提要？根据苹果文档，如果您无法从情节提要或 nib 文件加载 uiviewcontroller 的视图，则应覆盖

```
-loadView 
```

设置视图层次结构的方法。[阅读视图管理部分](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html)这可能会解决您的搜索字段问题。要解决第二个问题，请设置 cellidentifier

```
NSString *cellIdentifier = @"Your identifier"; 
```

我不认为它可以是零。我希望，我的回答会有所帮助。如果没有，请发表评论。

# entity-framework - EF 4.3 CF 在保存更改时不更新关系

> ID：11074662
> 
> 赞同：0
> 
> 时间：2012-06-17T20:45:45.583
> 
> 标签：entity-framework, entity-relationship

我有一个带有关系集合 ICollection ClubUsers 的 ClubItem 对象。我从上下文中加载了一个 ClubItem，并向 CluItem 添加了几个新用户。将 ClubItem 保存为断开状态时，上下文不会将新的 ClubUsers 视为新实体。如何告诉上下文发生了变化？我已经用它来改变 ClubItem 的实体状态：

```
 public virtual void Update(IEntity entityToUpdate)
    {
        DbSet.Attach(entityToUpdate);
        Context.Entry(entityToUpdate).State = EntityState.Modified;

        SaveChanges();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:30:16.637

在您的特定情况下，您可能只需删除该`Attach`行。`Attach`将包含对象图中其他分离实体的分离实体置于状态`Unchanged`。当您将状态更改为`Modified`仅影响父实体时，子实体仍处于状态`Unchanged`。如果你打电话`SaveChanges`给孩子们将不会被保存，因为他们的状态是`Unchanged`。

如果你不打电话`Attach`给孩子们保持分离，直到`SaveChanges`被调用，EF 将假定它们是新实体（因为它们没有附加到上下文）并将它们的状态设置为`Added`. 然后它们将被插入到数据库中。

但是，如果删除该`Attach`行，则不能再使用该方法来更新现有父级和现有子级之间的关系。

通常，当分离的实体包含已更改的实体的子集合时，添加已从您那里删除的实体通常必须从数据库中重新加载原始对象图并将更改合并到其中。复杂分离对象图的这种更新不能以通用方式工作，并且需要特定于实体类型的代码。一个例子在这里：[https ://stackoverflow.com/a/5540956/270591](https://stackoverflow.com/a/5540956/270591)

# r - 计算累积平均值（平均值）

> ID：11074665
> 
> 赞同：12
> 
> 时间：2012-06-17T20:46:16.103
> 
> 标签：r, average, cumulative-sum

我想知道如何计算某些数字的累积平均值。我将举一个简单的例子来描述我在寻找什么。

我有以下号码

```
vec <- c(1, 2, 3, 4, 5) 
```

如果我对这些数字进行平均，我将得到 3。

现在，如何计算这些数字的累积平均值。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-07-26T13:33:20.293

类似于列表的累积总和，我建议：向量*x的累积平均**avg*将包含从第一个位置到位置*i*的平均值。

 **一种方法是通过对所有先前值求和并除以它们的数量来计算每个位置的平均值。

通过将[算术平均值](http://en.wikipedia.org/wiki/Arithmetic_mean)的定义重写为*递归*公式。一个得到

```
avg(1) = x(1) 
```

和

```
avg(i) = (i-1)/i*avg(i-1) + x(i)/i;    (i > 1) 
```

为向量的每个元素（或列表、一维数组，或者你怎么称呼它）评估这个表达式会给你累积平均值。

如果您必须计算非常大或非常多的整数的平均值，并且如果您必须存储它们的累积和，则会遇到溢出，这种递归方法会派上用场。

### 例子

在你的例子中

```
1, 2, 3, 4, 5 
```

我们得到

```
1, 1.5, 2, 2.5, 3 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-06-26T13:34:56.737

这是一个老问题，从那时起发生了很多变化。我只是想用`dplyr`答案更新它。`dplyr`有一个`cummean`函数直接给出向量的累积平均值。

```
vec <- c(1, 2, 3, 4, 5)
library(dplyr)
cummean(vec)

#[1] 1.0 1.5 2.0 2.5 3.0 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-08-08T19:35:04.657

问题如何在 R 中创建累积平均值？回答：这个答案是由 Jim Holtman jholtman@gmail.com 提供的。他使用了这个`cumsum()`函数，`seq_along()`所以阅读了这些函数。但是提供的代码清楚地表明了这一点。6、6 + 16、6 + 16 + 8 等等

```
 x <- sample(1:20)
    x
 # [1]  6 16  8  1 17 11  2 19 18  5 15 13  3 20  9 14  7 10 12  4

    cumsum(x) / seq_along(x)
 # [1]  6.000000 11.000000 10.000000  7.750000  9.600000  9.833333  8.714286
 #10.000000 10.888889 10.300000
 #[11] 10.727273 10.916667 10.307692 11.000000 10.866667 11.062500 10.823529
 #10.777778 10.842105 10.500000 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-17T20:48:42.637

只需保持数字的运行总和，以及它们的运行计数。平均值只是计数的总和。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-13T14:57:47.467

这个问题表明严重缺乏研究，但我还没有足够的声誉来否决这个问题。如果我正确理解了这个问题，那么需要的是*累积移动平均*线。

[维基百科](http://en.wikipedia.org/wiki/Moving_average#Cumulative_moving_average)非常清楚地描述了累积移动平均线。我不允许在此处发布图片，但请按照该链接获取一个简单的公式（先前平均值和新值的加权平均值）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-10T12:56:29.203

我做了一个简单的 C++ 类。

```
#include <iostream>

using namespace std;

class Average {

public:
    Average(const double initVal=0.0){accumVal=initVal;}
    double getAverage(const double newVal) {

        accumVal += newVal;
        return accumVal / ++numAccumVal;
    }
    void clear(const double clearedVal=0.0) {

        accumVal = clearedVal;
        numAccumVal = 0;
    }
private:
    double accumVal;
    unsigned int numAccumVal=0;
};

int main(int argc, const char * argv[]) {

    Average avg;

    for (size_t i=1; i<=5; ++i) { //feed in 1 to 5

        double result = avg.getAverage(i);
        cout << "Result : " << result << endl; //print the result
    }
    return 0;
} 
```

如果你运行代码，你会得到如下结果。

```
Result : 1
Result : 1.5
Result : 2
Result : 2.5
Result : 3
Program ended with exit code: 0 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-22T14:00:53.313

```
mynum
#[1] 1 2 3 4 5

cumsum(mynum)/seq(from=1, to=5)
#[1] 1.0 1.5 2.0 2.5 3.0 
```**

# ruby-on-rails - ruby on rails 手动设置数据库和控制器

> ID：11074666
> 
> 赞同：0
> 
> 时间：2012-06-17T20:46:19.063
> 
> 标签：ruby-on-rails, ruby

我是 Ror 的新手，我在我的共享服务器上设置了一个新的 rails 应用程序。根据指南，我应该运行`rake db:create`但我不能，因为它托管在服务器上。有什么办法可以手动完成吗？即通过编辑文件？

更新：或者可能正在我的系统上开发整个应用程序并将所有文件复制到服务器？一定有什么办法！像[http://blog.jetbrains.com/ruby/2011/07/deployment-from-rubymine-sync-files-via-ftpsftp-etc/](http://blog.jetbrains.com/ruby/2011/07/deployment-from-rubymine-sync-files-via-ftpsftp-etc/)这样的东西有效吗？我的意思是我在我的系统上进行编码并使用 ruby​​mine 上传并运行服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:02:37.833

我建议你应该使用一些非常专业的 Ruby/Rails 应用程序，比如 Heroku.com（它有一个免费版本），或者在你有 SSH 访问权限的地方获取一些东西。

# actionscript-3 - 如何向 Flash 平台添加新的 API 以启用增强音频？

> ID：11074670
> 
> 赞同：0
> 
> 时间：2012-06-17T20:47:17.300
> 
> 标签：actionscript-3, apache-flex, audio, flex4.5, microphone

***增强的音频 API***

此功能在所有受支持的 Flash Player 和 AIR 桌面平台上均可用。我们向 Flash 平台添加了一个新的 API，用于启用增强的音频。此功能在所有受支持的桌面平台上都可用，而**不是 Flash Player 和 AIR 的移动平台**。新 API 仅在 ActionScript 3 中可用。您必须在创作环境中以 Flash Player 10.3 或 AIR 2.7（或更高版本）和 SWF 版本 12 为目标，并且必须更新 playerglobal.swc。

以下类受到影响： 麦克风：向此类添加了一个新的静态方法，以创建增强的麦克风和用于配置增强麦克风选项的读/写属性。MicrophoneEnhancedOptions：这个新类允许您配置增强的麦克风设置。MicrophoneEnhancedMode：这个新类枚举了增强的麦克风操作模式。

[您可以在 Flash Player 中的声学回声消除最佳实践中](http://www.adobe.com/devnet/flashplayer/articles/acoustic-echo-cancellation.html)看到这一点

我已经使用这个 API（Microphone、MicrophoneEnhancedOptions 和 MicrophoneEnhancedMode 类）开发了一个 FMS 桌面客户端。这个客户端运行良好，没有任何噪音。

但是最近的 flex sdk(flex sdk4.6) 不支持移动平台的这个 API。如何增强移动平台上的麦克风，包括噪声抑制。

这是我的源代码：

/ *-----------------桌面-----------------* /

```
microphone = Microphone.getEnhancedMicrophone();

if(microphone)
{
    var options : MicrophoneEnhancedOptions = new MicrophoneEnhancedOptions();
    options.mode = MicrophoneEnhancedMode.FULL_DUPLEX;
    options.autoGain = false;
    options.echoPath = 128;
    options.nonLinearProcessing = true;

    microphone.enhancedOptions = options;

    microphone.gain = 85;

    // set codec to speex
    microphone.codec = SoundCodec.SPEEX;
    microphone.encodeQuality = 5;
    microphone.framesPerPacket = 1;
    microphone.rate = 16; 
    microphone.setUseEchoSuppression(true);             
} 
```

/ *------------------android-----------------* /

```
microphone = Microphone.getMicrophone();

if(microphone)
{
    //settings
    microphone.rate = 16;
    microphone.gain = 85;
    microphone.setUseEchoSuppression(false);
    microphone.setLoopBack( false );
    microphone.setSilenceLevel( 0, 20000 );                     
    microphone.codec = SoundCodec.SPEEX;
    microphone.encodeQuality = 5;
    microphone.framesPerPacket = 1;         
} 
```

如何使 android 代码像桌面一样运行？如何实现 MicrophoneEnhancedOptions 类和 MicrophoneEnhancedMode 类的功能？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:50:54.737

很可能，你不能。这些 API 由本机代码支持，在 android 的 flash 版本中根本不存在。

# android - adb 拉取多个文件

> ID：11074671
> 
> 赞同：93
> 
> 时间：2012-06-17T20:47:32.327
> 
> 标签：android, adb

使用拉取多个文件的最佳方法是什么

```
adb pull 
```

我有`/sdcard/`以下名称的 25 个文件：

```
gps1.trace
gps2.trace
...
gps25.trace 
```

通配符不起作用：

```
adb pull /sdcard/gps*.trace . 
```

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-06-28T17:40:53.313

您可以使用接受通配符`xargs`的命令的结果。`adb shell ls`这允许您复制多个文件。令人讨厌的是，该`adb shell ls`命令的输出包含换行控制字符，您可以使用`tr -d '\r'`.

例子：

```
# Using a relative path
adb shell 'ls sdcard/gps*.trace' | tr -d '\r' | xargs -n1 adb pull
# Using an absolute path 
adb shell 'ls /sdcard/*.txt' | tr -d '\r' | sed -e 's/^\///' | xargs -n1 adb pull 
```

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2012-10-01T18:15:43.127

`adb pull`可以接收目录名称而不是文件，它将提取包含所有文件的目录。

在 /sdcard/gpsTraces 中提取所有 gps 轨迹

```
adb pull /sdcard/gpsTraces/ . 
```

递归目录的示例`adb pull`和示例：`adb push`

```
C:\Test>adb pull /data/misc/test/ .
pull: building file list...
pull: /data/misc/test/test1/test2/test.3 -> ./test1/test2/test.3
pull: /data/misc/test/test1/test2/test.2 -> ./test1/test2/test.2
pull: /data/misc/test/test1/test2/test.1 -> ./test1/test2/test.1
pull: /data/misc/test/test1/test.3 -> ./test1/test.3
pull: /data/misc/test/test1/test.2 -> ./test1/test.2
pull: /data/misc/test/test1/test.1 -> ./test1/test.1
pull: /data/misc/test/test.3 -> ./test.3
pull: /data/misc/test/test.2 -> ./test.2
pull: /data/misc/test/test.1 -> ./test.1
9 files pulled. 0 files skipped.
0 KB/s (45 bytes in 0.093s)

C:\Test>adb push . /data/misc/test/
push: ./test1/test2/test.3 -> /data/misc/test/test1/test2/test.3
push: ./test1/test2/test.2 -> /data/misc/test/test1/test2/test.2
push: ./test1/test2/test.1 -> /data/misc/test/test1/test2/test.1
push: ./test1/test.3 -> /data/misc/test/test1/test.3
push: ./test1/test.2 -> /data/misc/test/test1/test.2
push: ./test1/test.1 -> /data/misc/test/test1/test.1
push: ./test.3 -> /data/misc/test/test.3
push: ./test.2 -> /data/misc/test/test.2
push: ./test.1 -> /data/misc/test/test.1
9 files pushed. 0 files skipped.
0 KB/s (45 bytes in 0.062s) 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-03-11T10:58:10.367

`./adb pull /sdcard` <-- 失败

`./adb pull /sdcard/` <-- 递归工作 - 注意尾部斜杠

使用 Nexus 5 进行测试，adb 于 2014 年 3 月下载。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-02-28T18:53:06.173

解析“ls”的输出通常是个坏主意。相反，使用“查找”。

```
adb shell 'find /sdcard/ -name "gps*.trace" -print0' | xargs -0 -n 1 adb pull 
```

[为什么你不应该解析 ls 的输出](http://mywiki.wooledge.org/ParsingLs)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-18T10:57:54.297

即使`adb pull`命令开始接受远程参数的文件夹名称，我仍然更喜欢使用`tar`命令。它提供了更大的灵活性——允许文件名模式（*包括*和*排除*）、符号链接控制、保留文件权限。从 Android 6.0 开始，您可以使用内置的。在此之前，您必须使用 3rd-party 工具，例如`busybox`：

```
adb exec-out tar c sdcard/amazonmp3 > amazon.tar 
```

确保省略`/`路径中的前导。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-08-18T10:52:40.500

我已经为 Windows 机器创建了这个，使用通配符传输文件而不安装文件系统非常有用。您可以在路径环境中的某处包含此脚本。

adbpull.bat

```
@echo off
setlocal enabledelayedexpansion
if %1.==. (
    echo Wilcard parameter is required.
    goto end
)
for /F "tokens=* USEBACKQ" %%F in (`adb shell ls %1`) do (
    set text=%%F
    set mfile=!text:~0,-1!
    adb pull "!mfile!"
)
:end
endlocal 
```

例子： `adbpull /sdcard/DCIM/Camera/IMG_2016*`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-06-17T20:50:52.157

如果您使用的是 linux 或 mac [，ADBFS 是一个用于 Android 调试桥的 FUSE 文件系统](http://collectskin.com/adbfs/)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-03-09T17:48:51.020

目录拉取可在新的 android 工具上使用。（我不知道它是从哪个版本添加的，但它适用于最新的 ADT 21.1）

```
adb pull /sdcard/Robotium-Screenshots
pull: building file list...
pull: /sdcard/Robotium-Screenshots/090313-110415.jpg -> ./090313-110415.jpg
pull: /sdcard/Robotium-Screenshots/090313-110412.jpg -> ./090313-110412.jpg
pull: /sdcard/Robotium-Screenshots/090313-110408.jpg -> ./090313-110408.jpg
pull: /sdcard/Robotium-Screenshots/090313-110406.jpg -> ./090313-110406.jpg
pull: /sdcard/Robotium-Screenshots/090313-110404.jpg -> ./090313-110404.jpg
5 files pulled. 0 files skipped.
61 KB/s (338736 bytes in 5.409s) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-05-09T17:46:14.823

基于大卫的回答，我发现这稍微好一些：

```
adb shell ls /foo | tr -d '\r' | xargs -n1 adb pull 
```

除了少一个字符（大不了）之外，它不会将 转换`-r`为空格。这是一个显着的区别，就好像你尝试做

```
adb shell ls /foo/myFile* | tr '\r' ' ' | xargs -i -n1 adb pull {} someDir 
```

你会得到错误说

```
remote object '/foo/myFile1 ' does not exist 
```

相反，您可以这样做，这将起作用：

```
adb shell ls /foo/myFile* | tr -d '\r' | xargs -i -n1 adb pull {} someDir 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-31T12:22:25.720

通配符在我的情况下有效，我一直在使用以下简单脚本将我的虚拟设备的 Whatsapp 图像导入我的桌面

```
#! /bin/bash
mkdir -p ~/Pictures/Pictures_adb
rm -f ~/Pictures/Pictures_adb/*
cd ~/Pictures/Pictures_adb
adb root
adb shell 'cp /data/media/0/WhatsApp/Media/WhatsApp\ Profile\ Photos/* /sdcard/Pictures/;exit'
adb pull /sdcard/Pictures
mv ~/Pictures/Pictures_adb/Pictures/* ~/Pictures/Pictures_adb/
rmdir ~/Pictures/Pictures_adb/Pictures
cd 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-10-29T16:54:01.633

电源外壳：

`adb shell ls /sdcard/gps*.trace | foreach {adb pull $_}`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-07T14:44:00.023

这可以使用`adb exec-out`. 例如，要获取今天的所有屏幕截图，您可以执行以下操作：

```
adb exec-out "cd /sdcard/Pictures/Screenshots; tar c Screenshot_20210907*" | tar x 
```

这将传输临时 tar 存档中的所有文件并将其解压缩到您当前的工作目录。归功于[https://stackoverflow.com/a/39429196/3347392](https://stackoverflow.com/a/39429196/3347392)。

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2015-05-21T21:28:54.447

在Android中，有一些具有相关权限的文件夹！某些文件夹属于根用户或系统用户。

你们应该在执行“adb pull”之前更改这些文件、文件夹的权限。

以下命令可能会有所帮助：

```
adb shell
su
chmod -R 777 target_folder
exit
...
adb pull /.../target_folder/ . (current local folder) 
```

# c# - c# for语句变量在语句外的使用

> ID：11074674
> 
> 赞同：-3
> 
> 时间：2012-06-17T20:48:00.387
> 
> 标签：c#, loops, for-loop, console.writeline

```
for (i = 0; i < 14; i++)
{
     //display data here
}

Console.WriteLine("{0}", i);
Console.ReadLine(); 
```

我想显示我在 for 语句之外迭代的总次数，所以它只显示一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:49:57.730

你可以做：

```
int i = 0;
for(;i < 50; i++)
{
    // Do some stuff
}
Console.WriteLine(i.ToString()); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T20:50:31.347

`i`只需在 for 循环之前添加一个声明：

```
int i;
for (i = 0; i < 14; i++)
{
     //display data here
}

Console.WriteLine("{0}", i);
Console.ReadLine(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T20:49:41.773

您需要在循环`i`外声明。`for`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T20:49:59.797

在循环之前定义变量 i 并将其初始化为 0；

# c# - 使用拆分器使 ItemsControl 子项可调整大小

> ID：11074675
> 
> 赞同：5
> 
> 时间：2012-06-17T20:48:18.010
> 
> 标签：c#, wpf, xaml, layout

我想将小部件插入我的`ItemsControl`并使其可调整大小。我如何实现这一目标？

这是我的 XAML：

```
<ItemsControl ItemsSource="{Binding TestForList, Mode=OneWay}">

    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal"                
                        VerticalAlignment="Stretch"                
                        HorizontalAlignment="Stretch" />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>

    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Border Margin="5" 
                    BorderThickness="1" 
                    BorderBrush="Black">
                <TextBlock FontSize="100" Text="{Binding}" />    
            </Border>                    
        </DataTemplate>
    </ItemsControl.ItemTemplate>

</ItemsControl> 
```

绑定到：

```
public List<string> TestForList
{
    get
    {
        return new List<string> { "A", "B", "C" };
    }
} 
```

我想以某种方式在项目之间添加拆分器，以便调整它们的大小。有什么内置的东西可以实现这一点吗？

![在此处输入图像描述](../Images/6d1c54239638048d24074080b41c8335.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T00:43:53.693

你应该可以添加一个装饰器。我会做一个样本，但我不想。看看这篇文章[这是这篇文章](http://www.codeproject.com/Articles/22952/WPF-Diagram-Designer-Part-1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T22:14:07.673

我不认为有任何内置的东西可以做到这一点。我的第一个想法是您需要创建自己的[自定义 Panel](http://msdn.microsoft.com/en-us/library/ms754152.aspx#Panels_custom_panel_elements)实现来处理此问题。

# jquery - 无论类规范如何，JQuery 部分选择器

> ID：11074676
> 
> 赞同：0
> 
> 时间：2012-06-17T20:48:21.953
> 
> 标签：jquery

我试图只选择最上面的部分 H1s。在[这个 fiddle](http://fiddle.jshell.net/chrisfrisina/FD2jg/)中，我只是试图选择 ba、ss、we、a 和 tt 的 h1 HTML。然而，鉴于我目前的试验选择它们，我以某种方式抓住了“我们”部分的较低级别的 H1。我唯一的猜测是“我们”部分有子部分的类声明，而其他部分没有。那么我如何只使用 JQuery 选择这 5 个 H1。

到目前为止，这是我的尝试（也在小提琴的 JS 面板中）：

```
$('.block section:parent h1')
$('.gc section >h1:first')
$('.block.gc section >h1')
$('.gc section >h1:first')
$('.block.gc section >h1')
$('.block.gc section >h1:first')
$('.gc section >h1:first-child') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T20:54:01.840

像这样？[http://jsfiddle.net/RAzkq/6/](http://jsfiddle.net/RAzkq/6/)

这是选择器：

```
$('.block > section > h1') 
```

# java - FileUpload (Apache Commons) 和 Java POI IOException：无法读取整个标头

> ID：11074683
> 
> 赞同：1
> 
> 时间：2012-06-17T20:49:33.737
> 
> 标签：java, apache-poi, multipart, apache-commons-fileupload

我正在尝试使用 Apache Commons Streaming API 从 Excel 电子表格中获取信息。我不断收到以下错误：

```
 SEVERE: org.apache.commons.fileupload.FileUploadBase$InvalidContentTypeException: the request doesn't contain a multipart/form-data or multipart/mixed stream, content type header is null
    at org.apache.commons.fileupload.FileUploadBase$FileItemIteratorImpl.<init>(FileUploadBase.java:908)
    at org.apache.commons.fileupload.FileUploadBase.getItemIterator(FileUploadBase.java:331)
    at org.apache.commons.fileupload.servlet.ServletFileUpload.getItemIterator(ServletFileUpload.java:148)
    at eBooks.controller.ReportServlet.processRequest(ReportServlet.java:54)
    at eBooks.controller.ReportServlet.doPost(ReportServlet.java:178)
    at eBooks.controller.ReportServlet.doGet(ReportServlet.java:170)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

INFO: Reports
INFO: Form field upload_report_btnwith valueUpload Report detected
SEVERE: org.apache.commons.fileupload.FileUploadBase$InvalidContentTypeException: the request doesn't contain a multipart/form-data or multipart/mixed stream, content type header is null
    at org.apache.commons.fileupload.FileUploadBase$FileItemIteratorImpl.<init>(FileUploadBase.java:908)
    at org.apache.commons.fileupload.FileUploadBase.getItemIterator(FileUploadBase.java:331)
    at org.apache.commons.fileupload.servlet.ServletFileUpload.getItemIterator(ServletFileUpload.java:148)
    at eBooks.controller.ReportServlet.processRequest(ReportServlet.java:54)
    at eBooks.controller.ReportServlet.doPost(ReportServlet.java:178)
    at eBooks.controller.ReportServlet.doGet(ReportServlet.java:170)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

SEVERE: org.apache.commons.fileupload.FileUploadBase$InvalidContentTypeException: the request doesn't contain a multipart/form-data or multipart/mixed stream, content type header is null
    at org.apache.commons.fileupload.FileUploadBase$FileItemIteratorImpl.<init>(FileUploadBase.java:908)
    at org.apache.commons.fileupload.FileUploadBase.getItemIterator(FileUploadBase.java:331)
    at org.apache.commons.fileupload.servlet.ServletFileUpload.getItemIterator(ServletFileUpload.java:148)
    at eBooks.controller.ReportServlet.processRequest(ReportServlet.java:54)
    at eBooks.controller.ReportServlet.doPost(ReportServlet.java:178)
    at eBooks.controller.ReportServlet.doGet(ReportServlet.java:170)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

这是处理信息的 ReportServlet 代码：

```
package eBooks.controller;

/**
 * @author L10
 */

import eBooks.business.Account;
import eBooks.business.Report;
import eBooks.business.User;

import java.io.*;

import java.util.logging.Level;
import java.util.logging.Logger;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.Cookie;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpSession;

import org.apache.commons.fileupload.FileItemIterator;
import org.apache.commons.fileupload.FileItemStream;
import org.apache.commons.fileupload.FileUploadException;

import org.apache.commons.fileupload.servlet.ServletFileUpload;
import org.apache.commons.fileupload.util.Streams;

import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.poifs.filesystem.POIFSFileSystem;

public class ReportServlet extends HttpServlet
{

        protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        try 
        {
            // Check that we have a file upload request
            boolean isMultipart = ServletFileUpload.isMultipartContent(request);

            //Create a new file upload Handler
            ServletFileUpload upload = new ServletFileUpload();

            //Parse the request
            FileItemIterator iter = upload.getItemIterator(request);                    

            while(iter.hasNext())
            {
                FileItemStream item = iter.next();
                String name = item.getFieldName();
                InputStream stream = item.openStream();

                        if(item.isFormField())
                        {
                            System.out.println("Form field " + name + "with value" + Streams.asString(stream) + " detected" );                            
                        }
                        else
                        {

                            POIFSFileSystem fs = new POIFSFileSystem(stream);               
                            HSSFWorkbook wb = new HSSFWorkbook(fs);
                            HSSFSheet sheet = wb.getSheetAt(0);
                            System.out.println(wb.getSheetName(0));

                            //  session
                            HttpSession session = request.getSession();

                            //Define define values obatained from the document

                            Report report = new Report();
                            User user = new User();
                            Account account = new Account();                    

                            int reportType = report.getReportType();

                            String emailAddress = user.getEmailAddress();
                            String account_id = account.getAccount_id();
                            String accountName = account.getAccountName();
                            String userRole = user.getUserRole();

                            String reportName = report.getReportName(); // is the spreadsheet Name
                            String reportDate = report.getReportDate(); // is the period on the report

                            double totalUS = report.getMonthTotalUS();
                            double totalEUR = report.getMonthTotalEUR();
                            double grandTotal = report.getMonthGrandTotal();

                            double averagePrice = report.getAverageSalePrice();

                            int totalUnitsSold = report.getTotalUnitsSold();
                            double monthlyAverageUnitsSold = report.getMonthlyAverageUnitsSold();
                            double dailyAverageUnitsSold = report.getDailyAverageUnitsSold();

                            int totalUnitsRefunded = report.getTotalUnitsRefunded();
                            double monthlyAverageUnitsRefunded = report.getMonthlyAverageUnitsRefunded();
                            double dailyAverageUnitsRefuded = report.getDailyAverageUnitsRefuded();

                            double monthlyAverageRoyalties = report.getMonthlyAverageRoyalties();

                            // set values for the user, account & report objects

                            report.setReportType(reportType);

                            user.setEmailAddress(emailAddress);
                            account.setAccount_id(account_id);
                            account.setAccountName(accountName);
                            user.setUserRole(userRole);

                            report.setReportName(reportName); // is the spreadsheet Name
                            report.setReportDate(reportDate); // is the period on the report

                            report.setMonthTotalUS(totalUS);
                            report.setMonthTotalEUR(totalEUR);
                            report.setMonthGrandTotal(grandTotal);

                            report.setAverageSalePrice(averagePrice);

                            report.setTotalUnitsSold(totalUnitsSold);
                            report.setMonthlyAverageUnitsSold(monthlyAverageUnitsSold);
                            report.setDailyAverageUnitsSold(dailyAverageUnitsSold);

                            report.setTotalUnitsRefunded(totalUnitsRefunded);
                            report.setMonthlyAverageUnitsRefunded(monthlyAverageUnitsRefunded);
                            report.setDailyAverageUnitsRefuded(dailyAverageUnitsRefuded);

                            report.setMonthlyAverageRoyalties(monthlyAverageRoyalties);

                        // TODO: Add information to the database

                            // set Session for the user, account & report
                            session.setAttribute("User", user);
                            session.setAttribute("Account", account);
                            session.setAttribute("Report", report);                  

                            Cookie emailCookie = new Cookie("emailCookie", emailAddress);
                            emailCookie.setMaxAge(60*60*24*365*2);
                            emailCookie.setPath("/");
                            response.addCookie(emailCookie);

                            String url = "/WEB-INF/view/Dashboard.jsp";
                            RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(url);
                            dispatcher.forward(request, response);

                        }
            }

        }catch (FileUploadException ex) {
            Logger.getLogger(ReportServlet.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        doPost(request, response);

    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

} 
```

这是我的表单的外观：

```
<form action="ReportServlet" method="post" enctype="multipart/form-data">
                    <input type="file" name="file"/> 
                    <br />
                    <input type="submit" value="Upload Report" name="upload_report_btn" />
                </form> 
```

我用的是玻璃鱼。任何想法为什么我不断收到此消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T00:44:34.197

在您的循环中，您似乎假设到达的第一个也是唯一的多部分对象将是电子表格文件。表格本身也会出现。线索就是消息

```
Unable to read entire header; 13 bytes read; expected 512 bytes 
```

注意，表单的上传值为`Upload Report`，恰好是 13 个字节长。

如果您使用基于浏览器的调试工具（例如 Firebug 或 Fiddler），您可能很容易看到这一点。这些工具之一应该在您的工具集中。

# c++ - 通过覆盖来“更新”文件中的一行

> ID：11074697
> 
> 赞同：1
> 
> 时间：2012-06-17T20:51:13.873
> 
> 标签：c++, file, fstream, copying, rewriting

我正在尝试编写一个函数，当调用该函数时，它将在我的文本文件中搜索与参数匹配的内容，然后通过覆盖文件来“更新”它。

这是我当前的功能：

编辑：这是新的更新代码，仍然无法正常工作：/

这是它发送到 UpdateGem 的行：（示例 sTempTxt：“AB:5.55”）

```
ostringstream stream; 
stream << std::setprecision(3)  << fEindgem;
string sTempTxt = sVak + ":" + stream.str() + "\n";
UpdateGem(sTempTxt);

void UpdateGem(string text)
{
     ifstream f;
     f.open("GEM.txt");
     string sGEMS[100];
     string temp[3];
     splitstring(text, ":", temp[0], temp[1]);
     bool OverWrite;
     int count = 0;
     string Delete, line;

     while(true)
     {
         getline(f, sGEMS[count], '\n');
         if(f.eof()) break;
         splitstring(sGEMS[count], ":", temp[1], temp[2]);
         if (temp[0] == temp[1])
         {
              OverWrite = 1;
              Delete = sGEMS[count];
         }
         count++;
     }

// Don't set count to 0, since we need it
// count = 0;
   ofstream f2;
   f2.open("GEM2.txt"/*,std::ios_base::app*/);
   if (OverWrite) 
   {
      f.seekg(0, std::ios::beg);
      for (int i = 0; i < count; ++i) 
      {
         if (sGEMS[i] != Delete) f2 << sGEMS[i];
      }
   }
     f.close();
     f2.close();
     remove("GEM.txt");
     rename("GEM2.txt", "GEM.txt");

     ofstream file;
     file.open("GEM.txt",std::ios_base::app);
     file << text;
     file.close();     

} 
```

它必须替换的行采用 NAME:NUMBER 的形式，其中数字可以不同，因此我使用 splitstring 函数将名称与找到的行的名称进行比较，然后完全擦除该行并“更新”稍后重新添加它。但是，我当前的代码只将更新的行写入文件，而不是旧的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:03:45.357

从您的程序看来，您假设“GEM.txt”中的文本永远不会超过 100 行。但是，在您对文件的初始扫描中，您不记得读入了多少行。因此，为了弥补这一点，您尝试通过重新读取原始“GEM.txt”文件来记住多少行，并将您保存的行写入“GEM2.txt”。

正如 jrok 正确指出的那样，在您的第二个循环中，您从第一个循环中已经遇到的“GEM.txt”开始读取`feof`。因此，您的第二个循环永远不会进入`while`循环，因为`getline`调用认为没有什么可获取`f`的（因为位于文件末尾）。`while`所以 jrok 给了你在第二个循环之前添加的代码行：

```
f.seekg(0, std::ios::beg); 
```

但是，由于您已经将所有行保存在一个数组中，您可以直接将数组写出`sGEMS`到您的新文件中。

```
// Don't set count to 0, since we need it
// count = 0;
ofstream f2;
f2.open("GEM2.txt"/*,std::ios_base::app*/);
if (Overwrite) {
    for (int i = 0; i < count; ++i) {
        if (sGEMS[i] != Delete) f2 << sGEMS[i] << std::endl;
    }
}
//... 
```

如果文件超过 100 行，则使用向量而不是使用数组会更安全。而且，您将不再需要`count`，因为它是由`vector`.

```
std::vector<std::string> sGEMS;
//...
while (true) {
    getline(f, line);
    if (f.eof()) break;
    sGEMS.push_back(line);
    //...
} 
```

如果您希望“GEM.txt”文件非常大，您可能需要重新考虑如何处理该文件。特别是，您应该只记住要跳过的行号，并将行从“GEM.txt”复制到“GEM2.txt”，就像您最初尝试做的那样。

最后，在您的代码的最后写入中，您打开文件进行追加，而不是输出。C++ 认为这意味着您想要丢弃文件的内容。相反，将`ios_base::out`标志添加到您的公开通话中。

```
ios_base::openmode mode = ios_base::out|ios_base::app;
file.open("GEM.txt",mode);
file << text << std::endl;
file.close(); 
```

`f2`但是，您可以在关闭它之前将其粘贴到末尾，而不是这样做。

根据我的建议，最终形式`UpdateGem`应该是：

```
void UpdateGem(string text) {
    ifstream f;
    ofstream f2;
    vector<string> sGEMS;
    string temp[3];
    bool OverWrite;
    string Delete, line;

    splitstring(text, ":", temp[0], temp[1]);
    sGEMS.reserve(100);
    f.open("GEM.txt");
    while (true) {
        getline(f, line);
        if (f.eof()) break;
        sGEMS.push_back(line);
        splitstring(line, ":", temp[1], temp[2]);
        if (temp[0] == temp[1]) {
            OverWrite = 1;
            Delete = line;
        }
    }
    f.close();
    f2.open("GEM2.txt"/*,std::ios_base::app*/);
    if (OverWrite) {
        for (int i = 0; i < sGEMS.size(); ++i) {
            if (sGEMS[i] != Delete) f2 << sGEMS[i] << std::endl;
        }
    }
    f2 << text << std::endl;
    f2.close();
    remove("GEM.txt");
    rename("GEM2.txt", "GEM.txt");
} 
```

我使用以下`main`程序测试了代码：

```
int main () { UpdateGem("Test:0001"); } 
```

并`splitstring`像这样实现：

```
bool splitstring (string s, string match, string &a, string &b)
{
    int x = s.find(match);
    if (x != string::npos) {
        a = s.substr(0, x);
        b = s.substr(x+match.size());
        return true;
    }
    return false;
} 
```

当输入以下输入“GEM.txt”时：

```
a:x
b:x
Test:1234
c:x 
```

程序将“GEM.txt”的内容修改为：

```
a:x
b:x
c:x
Test:0001 
```

# java - 访问数组列表中的实例的函数

> ID：11074703
> 
> 赞同：-2
> 
> 时间：2012-06-17T20:52:25.717
> 
> 标签：java, oop, class

我正在尝试访问数组列表中的实例的函数。**有没有办法在不使用实例的类名**的情况下做到这一点？

```
import java.util.ArrayList;
import java.util.List;

class apple {
    int price;

    public void myFunction(int iPrice)
    {
        price=iPrice;
    }
}

class orange {
    int price;

    public void myFunction(int iPrice)
    {
        price=iPrice;
    }
}

public class main {

    public static void main(String[] args) {
        List list= new ArrayList();

        //create 3 apple object to list
        list.add( new apple() );
        list.add( new apple() );
        list.add( new orange() );

        list.get(0).myFunction(1); /* Error: The method myFunction(int) is undefined for the type Object*/

    }
} 
```

我知道; `((apple) list.get(0)).myFunction(1);`是一种方法，但**我不想**在调用函数时使用任何类名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:07:38.610

是的 - 你需要使用*泛型*和接口。

您现在需要“使用”类名的原因是 Java 是强类型的。你不能调用对象的方法，除非对象的类型暴露了这样的方法。就目前而言，当你从 a 中得到一些东西时，`List`它可以是任何类型的——所以 Java 编译器不能确定它`list.get(0)`是**有**方法的东西`myFunction`。

所以你使用泛型参数到列表中，来限制可以添加哪些类型的对象。这样，当您检索对象时，它是已知类型的，因此可以调用适当的方法。那么 - 您的列表包含什么类型的对象？嗯，它是“水果”，但你还没有这个概念。

所以你可以定义一个*接口*来描述“实现这些方法的东西”。让我们像这样定义它：

```
public interface Fruit {
    void myFunction(int iPrice);
} 
```

这里的所有都是它的。您需要更改类的定义以声明它们确实实现了此接口（它不是自动的）：

```
class Apple implements Fruit {
    // rest as before
    // ...
} 
```

和同样的`Orange`。 **现在**你可以声明你的列表`Fruits`是`Fruit`. 所以你可以调用`myFunction(int)`它。

所以在主要方法中：

```
public static void main(String[] args) {
    List<Fruit> list= new ArrayList<Fruit>();

    //create 3 apple object to list
    list.add( new Apple() );
    list.add( new Apple() );
    list.add( new Orange() );

    list.get(0).myFunction(1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T20:55:42.657

你所要求的在 Java 中是不可能的，不是没有反射，也就是说。或者在它之上构建一个框架，比如表达式语言解析器。Java 是一种静态类型语言，编译器不会让你调用他看不到的方法。

您可以考虑的另一种选择是使用接口。

```
public interface Fruit{
    void doSomething(int i);
} 
```

现在让两个实现都实现它，您可以在不知道它是哪个类的情况下调用该方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T21:30:20.787

由于到目前为止给出的答案只涵盖了解决方案，但没有解释为什么有效，所以我用非常简单的语言告诉你幕后真正发生的事情：

该列表中可以有任意对象。这意味着，它可能是没有方法的对象`myFunction()`。

不，将类定义视为合同。如果你像这样生成一个苹果类型的新对象

```
苹果苹果 = 新苹果（）；
```

你是说“我想要一个新对象，它遵守所有‘苹果’类型的约定，我希望它是一个新苹果”。所以，编译器知道你的`Apple`类型**必须有**那个函数，所以你可以调用

```
苹果.myFunction()
```

. 但是如果你说

```
对象 o = new Apple();
```

您是在说“我想要一个遵守所有‘对象’类型约定的新对象，并且我希望它是一个苹果”。您可以这样做，因为所有类都隐含地存在 java.lang.Object，所以 new Apple() 也是一个新对象。但是如果你想调用

```
o.myFunction()
```

然后编译器说“哎呀，不可能。'o'遵守'Object'的所有约定，其他一切都是可选的。我在这里为对象提供的合同不包括名为myFunction的方法”。

现在，您的列表也会发生同样的情况。您正在创建一个*Objects*列表。编译器只能确定此列表中有对象 - 但不能做出其他假设。

但是，您可以通过使用 (Apple) 强制编译器将此特定对象**视为**Apple。

解决这个问题的另一种方法是使用泛型，这意味着，通过创建一个`new ArrayList<Apple>`. 这样，您只能将苹果存储在该列表中，并且 list.get(x) 将返回一个**已知**符合 Apple 标准的对象。

现在，如果你创建一个接口*Fruit*来定义一个方法`myFunction`并创建子类 Apple、Banane 以及任何实现 Fruit 的东西。您可以创建一个 Fruit 类型的 List 并将 Apples 和 Bananas 存储在其中并轻松调用 list.get(x).myFunction()，因为该列表中的每个对象**都必须是**一个 Friut，因此**必须具有**方法 myFunction( ）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T20:54:45.917

您需要使用泛型以及`abstract`类或接口：

```
abstract class Fruit {
    public abstract void myFunction(int price);
}

List<Fruit> list= new ArrayList<Fruit>(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-17T20:57:55.463

也许这不是最佳解决方案，但您可以`list.get(0)`转换为`apple`：

```
if (list.get(0) instanceof apple)
{
    ( (apple)list.get(0) ).myFunction(1);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-17T21:14:15.067

如果您真的不能/不想使用泛型/转换/扩展抽象类 Fruit，您可以随时尝试反射 :)

```
 List list = new ArrayList();

    // create 2 apple and 1 orange to list
    list.add(new apple());
    list.add(new apple());
    list.add(new orange());

    Object o=list.get(0);
    // if class of "o" object contains method "myFunction" we can call
    // it this way
    try {
        o.getClass().getDeclaredMethod("myFunction", int.class).invoke(o, 1);
    } catch (NoSuchMethodException | SecurityException
            | IllegalAccessException | IllegalArgumentException
            | InvocationTargetException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

# windows-runtime - 我如何迭代一个 IIterable 在 C++/CX 中？

> ID：11074705
> 
> 赞同：5
> 
> 时间：2012-06-17T20:52:42.517
> 
> 标签：windows-runtime, c++-cx

（这也可以表述为“如何迭代从 C++/CX 中的 C# Windows 运行时组件返回的集合？”）

我尝试使用`std::for_each`但`IIterable<T>`得到以下编译时错误

> 错误 C2664: 'std::begin' : 无法将参数 1 从 'my_collection_type ^' 转换为 'Platform::String ^' 没有可用的用户定义转换运算符，或指向的类型不相关；转换需要 reinterpret_cast、C-style cast 或 function-style cast

如何迭代集合？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-27T00:13:46.930

这也应该有效

```
for (IIterator<T> iter = iterable->First(); iter->HasCurrent; iter->MoveNext())
{
   T item = iter->Current;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-17T20:52:43.360

为此，您需要添加

```
#include "collection.h" 
```

（和可选）

```
using namespace Windows::Foundation:Collections 
```

到您的源文件。

然后，您可以按如下方式遍历集合

```
for_each (begin(my_collection), 
          end(my_collection), 
          [&](my_collection_type^ value) {
          // code goes here...
}); 
```

注意：您可能还需要`using namespace std`（对于`for_each`）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-31T08:23:58.377

在 C++/CX 中编写 Windows 运行时组件时，您可以使用类似 C# 的构造：

```
for each (auto item in collection)
{
    item->DoSomething();
} 
```

# iphone - iphone本地通知

> ID：11074708
> 
> 赞同：0
> 
> 时间：2012-06-17T20:53:17.777
> 
> 标签：iphone, uilocalnotification

以前，我一直在处理本地通知，但现在我遇到了问题。假设今天，我必须在我的应用程序中设置日期前 1 天的通知：07/07/2012。我怎么能做到这一点。我正在设置这样的通知..

```
- (IBAction) scheduleNotification:(id) sender {

    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSDateFormatter *formatter = [[[NSDateFormatter alloc]init]autorelease];

    for (int i = 0; i< [delegate.viewController.contactList count] ; i++) {
        UILocalNotification *localNotification = [prototypeNotification copy];
        NSString *name = [[delegate.viewController.contactList objectAtIndex:i]objectForKey:NAME_KEY];
        NSString *birthday = [[delegate.viewController.contactList objectAtIndex:i]objectForKey:BIRTHDAY_KEY];
        if (birthday) {
            [formatter setDateFormat:@"MM/dd/yyyy"];
            NSDate *date = [formatter dateFromString:birthday];
            if (date == nil) {
                [formatter setDateFormat:@"MM/dd"];
                NSDate *date = [formatter dateFromString:birthday];
            }
            else {

            }
            self.alarmTime = [date dateByAddingTimeInterval:10];
            localNotification.fireDate = alarmTime;
            localNotification.timeZone = [NSTimeZone defaultTimeZone];
            localNotification.applicationIconBadgeNumber = 1;

            NSString *itemName = @"B'day Alert!!!";
            NSString *msgName = [NSString stringWithFormat:@"Celebrate %@'s B'day",name];
            NSDictionary *userDict = [NSDictionary dictionaryWithObjectsAndKeys:itemName,MessageKey, msgName,TitleKey, nil];
            localNotification.userInfo = userDict;
            localNotification.soundName = self.soundName;
            // Schedule the notification
            [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];

        }

        else {
//            write else part
        }
        [localNotification release];
    }

} 
```

当我遇到`NSDate *date = [formatter dateFromString:birthday];`这条线时，日期不准确，所以我无法正确设置本地通知。如果我做错了什么，请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:58:49.220

NSDateFormatter 的行为与您想象的不同。如果您对它是否使用 GMT、UTC、基于我们当前系统区域设置的时区或其他内容感到困惑，请阅读此问答：[NSDateFormatter return wrong date from string](https://stackoverflow.com/questions/8783667/nsdateformatter-return-incorrect-date-from-string)

# f# - 用于 Rx 的 F# 工作流构建器

> ID：11074710
> 
> 赞同：3
> 
> 时间：2012-06-17T20:53:31.503
> 
> 标签：f#, system.reactive, using, computation-expression

这里有一个很好的 Rx F# 工作流构建器：

[http://blogs.msdn.com/b/dsyme/archive/2011/05/30/nice-f-syntax-for-rx-reactive-extensions.aspx](http://blogs.msdn.com/b/dsyme/archive/2011/05/30/nice-f-syntax-for-rx-reactive-extensions.aspx)

我一直在尝试为工作流做一个 Using 实现，但我一直在碰壁。也许在这里为时已晚。

一个人将如何创造这个？

```
type RxBuilder () =

    // ...

    member this.Using (disposable, f) =
        Observable.Using(???) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T00:17:39.320

首先，对于最新的 Rx 版本，原始代码需要稍微更新。即，`For`并且`While`应该实现为：

```
member this.For (xs : 'a seq, f: 'a -> 'b IObservable) =
    Observable.SelectMany(xs.ToObservable(), new Func<_, IObservable<_>>(f)) 

member this.While (f, xs: 'a IObservable) =
    Observable.TakeWhile (xs, new Func<_,bool>(fun _ -> f())) 
```

然后，基于[此](https://github.com/panesofglass/FSharp.Reactive/blob/master/src/Observable.fs)，您可以使用以下实现`Using`：

```
member this.Using(res:#IDisposable, body) = this.TryFinally(body res, fun () -> match res with null -> () | disp -> disp.Dispose()) 
```

# ios - 核心数据实体中的空字符串与 nil

> ID：11074713
> 
> 赞同：0
> 
> 时间：2012-06-17T20:53:51.953
> 
> 标签：ios, xcode, core-data, nsfetchedresultscontroller, nsmanagedobject

我有一个应用程序，它提供了一个预填充的 sqlite 数据库，用户以后可以扩展它。当我构建数据库时，我对其进行了设置，以便值必须是浮点数（包含浮点数的 NSNumber）。在数据库的某些“单元格”上没有值，所以我没有填写它。

但是，当我使用 Firefox 扩展探索 sqlite Db 时，我看到以下内容：

![在此处输入图像描述](../Images/dfc84ed3e7108240b4261f07fc6f4e66.png)

我没有填充的“单元格”是蓝色的。根据 Firefox 扩展设置，蓝色的“单元格”表示一个字符串。红色表示 nil/null。

我正在尝试获取特定属性的值，过滤那些“字符串”并执行以下操作：

```
Entity  *entity = [[self.managedObjectContext executeFetchRequest:request error:&error] objectAtIndex:0];
[entity setValue:nil forKey:@"attribute"]; // I would do a loop for all the items in the array 
```

但是，我找不到获取那些似乎是字符串的值的方法。我唯一能做的就是选择所有浮点值为 0 的值，但问题是实际上存在 0 的值并且它实际上是有意义的。

关于如何做到这一点的任何想法？

如果我获取不为零的所有内容，它们就在那里。所以他们不被认为是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:37:04.057

CoreData 不是数据库。它是一个对象图关系管理器。您正在尝试执行数据库操作，但它无法正常工作。如果需要直接修改数据库，则需要使用实际的数据库工具，例如 SQLite 库（或`sqlite3`CLI 工具）。

# windows - 如何为任何给定的 Windows 注册表项找到相应的 WMI/COM 对象？

> ID：11074714
> 
> 赞同：1
> 
> 时间：2012-06-17T20:53:56.917
> 
> 标签：windows, winapi, com, wmi

你好，

我想请教您如何为**任何**给定的 Windows 注册表项找到相应的 WMI/COM 对象。Web 上的此映射或 API 中的函数是否有任何有用的表？

（说“任何”我的意思是任何，存在这样的映射。）

**编辑：**

我问是因为我发现一些 WMI 对象将它们的值反映到 Windows 注册表项。

例如有映射来自

```
root\cimv2:Win32_OSRecoveryConfiguration.AutoReboot
```

到

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\CrashControl\AutoReboot
```

谢谢
——Radek
Holý
捷克共和国

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:16:25.080

对于 WMI 部分，您可以阅读WMI 类的`MappingStrings` [限定符，或者您可以使用](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393650%28v=vs.85%29.aspx)[WMI Delphi 代码创建](http://code.google.com/p/wmi-delphi-code-creator/)器之类的工具来获取此信息。

![在此处输入图像描述](../Images/b707fcede8473da72a06d6c32f74d6f5.png)

您也可以阅读本文[`How obtain the source of the WMI Data`](http://theroadtodelphi.wordpress.com/2012/04/09/how-obtain-the-source-of-the-wmi-data/)以查看 delphi 示例代码。

# visual-studio - $(OutDir) 的含义

> ID：11074717
> 
> 赞同：24
> 
> 时间：2012-06-17T20:54:17.440
> 
> 标签：visual-studio, msbuild, environment-variables

我正在查看我的视觉工作室项目的属性，并看到以下内容：

```
$(OutDir)\$(ProjectName).exe 
```

我很好奇 Visual Studio 如何知道 outdir 的值以及我如何看到这个值。此外，这是哪种语言，例如 C#、python？换句话说，用什么语言`$(OutDir)\$(ProjectName).exe`写的

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-17T20:58:04.700

`$(OutDir)`是一个 Visual Studio 生成属性宏。

您可以使用许多属性对话框中的*宏 >>按钮查看宏的值。*

例如，在*Properties->General->Output Directory*中，单击值文本框中的下拉菜单，选择*Edit...*，然后在结果对话框中单击*Macros >>*按钮。这将为您提供所有宏及其当前值的列表。

`$(OutputDir)`应设置为当前配置的输出目录，例如`$(SolutionDir)/$(Configuration)\`.

请注意，您的 Windows 环境变量在项目中作为 Build Property 宏导入，因此在宏列表中您会看到，例如`$(Path)`、`$(HOME)`、`$(TEMP)`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-08T08:50:33.400

这些宏由 Microsoft 在[生成命令和属性的宏](https://msdn.microsoft.com/en-us/library/c02as0cs.aspx)主题中记录。（该链接适用于 Visual Studio 2015。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T20:56:11.407

这些是 MSBuild 属性。它们可以是用户定义的或环境变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-17T10:01:41.873

您可以修改文件 `the_name_of_your_prog.VCPROJ` （在示例中：ttfmfc）

`$(SolutionDir)$(ConfigurationName)` 并将 :和替换 `$(SolutionDir)`为 F:\debug （F:\debug 在 ramdisk 或任何其他文件夹中）

在下面的示例中，仅更改了调试配置：
Visual Studio 2008 将每个 [ 替换为（小于符号）和 ] 替换为（大于符号）

```
[?xml version="1.0" encoding="Windows-1252"?]

[VisualStudioProject
    ProjectType="Visual C++"
    Version="9.00"
    Name="ttsmfc"
    ProjectGUID="{0B52B3C5-7AD5-4780-92E9-98674E486261}"
    RootNamespace="ttsmfc"
    Keyword="MFCProj"
    TargetFrameworkVersion="196613"
    ]

    [Platforms]

        [Platform
            Name="Win32"
        /]

    [/Platforms]

    [ToolFiles]

    [/ToolFiles]

    [Configurations]

        [Configuration
            Name="Debug|Win32"
            OutputDirectory="F:\Debug"
            IntermediateDirectory="F:\Debug"
            ConfigurationType="1"
            UseOfMFC="2"
            CharacterSet="1"
            ]

            [Tool
                Name="VCPreBuildEventTool"
            /]

            [Tool
                Name="VCCustomBuildTool"
            /]

            [Tool
                Name="VCXMLDataGeneratorTool"
            /]

            [Tool
                Name="VCWebServiceProxyGeneratorTool"
            /]

            [Tool
                Name="VCMIDLTool"
                PreprocessorDefinitions="_DEBUG"
                MkTypLibCompatible="true"
                SuppressStartupBanner="true"
                TargetEnvironment="1"
                TypeLibraryName="f:\Debug/ort.tlb"
                HeaderFileName=""
            /]

            [Tool
                Name="VCCLCompilerTool"
                Optimization="0"
                PreprocessorDefinitions="WIN32;_WINDOWS;_DEBUG"
                MinimalRebuild="true"
                BasicRuntimeChecks="3"
                RuntimeLibrary="3"
                UsePrecompiledHeader="2"
                PrecompiledHeaderThrough="stdafx.h"
                PrecompiledHeaderFile="F:\Debug/ort.pch"
                AssemblerListingLocation="F:\Debug/"
                ObjectFile="F:\Debug/"
                ProgramDataBaseFileName="F:\Debug/"
                WarningLevel="3"
                DebugInformationFormat="4"
            /]

            [Tool
                Name="VCManagedResourceCompilerTool"
            /]

            [Tool
                Name="VCResourceCompilerTool"
                PreprocessorDefinitions="_DEBUG"
                Culture="1036"
                AdditionalIncludeDirectories="$(IntDir)"
            /]

            [Tool
                Name="VCPreLinkEventTool"
            /]

            [Tool
                Name="VCLinkerTool"
                AdditionalDependencies="winmm.lib"
                LinkIncremental="2"
                GenerateDebugInformation="true"
                SubSystem="2"
                TargetMachine="1"
            /]

            [Tool
                Name="VCALinkTool"
            /]

            [Tool
                Name="VCManifestTool"
            /]

            [Tool
                Name="VCXDCMakeTool"
            /]

            [Tool
                Name="VCBscMakeTool"
            /]

            [Tool
                Name="VCFxCopTool"
            /]

            [Tool
                Name="VCAppVerifierTool"
            /]

            [Tool
                Name="VCPostBuildEventTool"
            /]

        [/Configuration]

        [Configuration
            Name="Release|Win32"
            OutputDirectory="$(SolutionDir)$(ConfigurationName)"
            IntermediateDirectory="$(ConfigurationName)"
            ConfigurationType="1"
            UseOfMFC="2"
            CharacterSet="1"
            WholeProgramOptimization="1"
            ]

            [Tool
                Name="VCPreBuildEventTool"
            /]

            [Tool
                Name="VCCustomBuildTool"
            /]

            [Tool
                Name="VCXMLDataGeneratorTool"
            /]

            [Tool
                Name="VCWebServiceProxyGeneratorTool"
            /]

            [Tool
                Name="VCMIDLTool"
                PreprocessorDefinitions="NDEBUG"
                MkTypLibCompatible="false"
                ValidateParameters="true"
            /]

            [Tool
                Name="VCCLCompilerTool"
                Optimization="2"
                EnableIntrinsicFunctions="true"
                PreprocessorDefinitions="WIN32;_WINDOWS;NDEBUG"
                MinimalRebuild="false"
                RuntimeLibrary="2"
                EnableFunctionLevelLinking="true"
                UsePrecompiledHeader="2"
                WarningLevel="3"
                DebugInformationFormat="3"
            /]

            [Tool
                Name="VCManagedResourceCompilerTool"
            /]

            [Tool
                Name="VCResourceCompilerTool"
                PreprocessorDefinitions="NDEBUG"
                Culture="1036"
                AdditionalIncludeDirectories="$(IntDir)"
            /]

            [Tool
                Name="VCPreLinkEventTool"
            /]

            [Tool
                Name="VCLinkerTool"
                AdditionalDependencies="winmm.lib"
                LinkIncremental="1"
                GenerateDebugInformation="true"
                SubSystem="2"
                OptimizeReferences="2"
                EnableCOMDATFolding="2"
                TargetMachine="1"
            /]

            [Tool
                Name="VCALinkTool"
            /]

            [Tool
                Name="VCManifestTool"
            /]

            [Tool
                Name="VCXDCMakeTool"
            /]

            [Tool
                Name="VCBscMakeTool"
            /]

            [Tool
                Name="VCFxCopTool"
            /]

            [Tool
                Name="VCAppVerifierTool"
            /]

            [Tool
                Name="VCPostBuildEventTool"
            /]

        [/Configuration]

    [/Configurations]

    [References]

    [/References]

    [Files]

        [Filter
            Name="Fichiers sources"
            Filter="cpp;c;cc;cxx;def;odl;idl;hpj;bat;asm;asmx"
            UniqueIdentifier="{4FC737F1-C7A5-4376-A066-2A32D752A2FF}"
            ]

            [File
                RelativePath=".\Buffer.cpp"
                ]

            [/File]

            [File
                RelativePath=".\ChangeRes.cpp"
                ]

            [/File]

            [File
                RelativePath=".\errorprint.cpp"
                ]

            [/File]

            [File
                RelativePath=".\MainFrm.cpp"
                ]

            [/File]

            [File
                RelativePath=".\Mot.cpp"
                ]

            [/File]

            [File
                RelativePath=".\Pipe.cpp"
                ]

            [/File]

            [File
                RelativePath=".\PtrFifo.cpp"
                ]

            [/File]

            [File
                RelativePath=".\Reco.cpp"
                ]

            [/File]

            [File
                RelativePath=".\SoundBase.cpp"
                ]

            [/File]

            [File
                RelativePath=".\SoundFile.cpp"
                ]

            [/File]

            [File
                RelativePath=".\SoundIn.cpp"
                ]

            [/File]

            [File
                RelativePath=".\SoundOut.cpp"
                ]

            [/File]

            [File
                RelativePath=".\stdafx.cpp"
                ]

                [FileConfiguration
                    Name="Debug|Win32"
                    ]

                    [Tool
                        Name="VCCLCompilerTool"
                        UsePrecompiledHeader="1"
                    /]

                [/FileConfiguration]

                [FileConfiguration
                    Name="Release|Win32"
                    ]

                    [Tool
                        Name="VCCLCompilerTool"
                        UsePrecompiledHeader="1"
                    /]

                [/FileConfiguration]

            [/File]

            [File
                RelativePath=".\ttsmfc.cpp"
                ]

            [/File]

            [File
                RelativePath=".\ttsmfcDoc.cpp"
                ]

            [/File]

            [File
                RelativePath=".\ttsmfcView.cpp"
                ]

            [/File]

            [File
                RelativePath=".\vegView.cpp"
                ]

            [/File]

        [/Filter]

        [Filter
            Name="Fichiers d&apos;en-tête"
            Filter="h;hpp;hxx;hm;inl;inc;xsd"
            UniqueIdentifier="{93995380-89BD-4b04-88EB-625FBE52EBFB}"
            ]

            [File
                RelativePath=".\Buffer.h"
                ]

            [/File]

            [File
                RelativePath=".\errorprint.h"
                ]

            [/File]

            [File
                RelativePath=".\fister.h"
                ]

            [/File]

            [File
                RelativePath=".\MainFrm.h"
                ]

            [/File]

            [File
                RelativePath=".\Mot.h"
                ]

            [/File]

            [File
                RelativePath=".\Pipe.h"
                ]

            [/File]

            [File
                RelativePath=".\PtrFifo.h"
                ]

            [/File]

            [File
                RelativePath=".\Reco.h"
                ]

            [/File]

            [File
                RelativePath=".\Resource.h"
                ]

            [/File]

            [File
                RelativePath=".\SoundBase.h"
                ]

            [/File]

            [File
                RelativePath=".\SoundFile.h"
                ]

            [/File]

            [File
                RelativePath=".\SoundIn.h"
                ]

            [/File]

            [File
                RelativePath=".\SoundOut.h"
                ]

            [/File]

            [File
                RelativePath=".\stdafx.h"
                ]

            [/File]

            [File
                RelativePath=".\targetver.h"
                ]

            [/File]

            [File
                RelativePath=".\ttsmfc.h"
                ]

            [/File]

            [File
                RelativePath=".\ttsmfcDoc.h"
                ]

            [/File]

            [File
                RelativePath=".\ttsmfcView.h"
                ]

            [/File]

            [File
                RelativePath=".\type.h"
                ]

            [/File]

            [File
                RelativePath=".\vegView.h"
                ]

            [/File]

        [/Filter]

        [Filter
            Name="Fichiers de ressources"
            Filter="rc;ico;cur;bmp;dlg;rc2;rct;bin;rgs;gif;jpg;jpeg;jpe;resx;tiff;tif;png;wav"
            UniqueIdentifier="{67DA6AB6-F800-4c08-8B7A-83BB121AAD01}"
            ]

            [File
                RelativePath=".\res\Toolbar.bmp"
                ]

            [/File]

            [File
                RelativePath=".\res\ttsmfc.ico"
                ]

            [/File]

            [File
                RelativePath=".\ttsmfc.rc"
                ]

            [/File]

            [File
                RelativePath=".\res\ttsmfc.rc2"
                ]

            [/File]

            [File
                RelativePath=".\res\ttsmfcDoc.ico"
                ]

            [/File]

        [/Filter]

        [File
            RelativePath=".\ReadMe.txt"
            ]

        [/File]

    [/Files]

    [Globals]

        [Global
            Name="RESOURCE_FILE"
            Value="ttsmfc.rc"
        /]

    [/Globals]

[/VisualStudioProject] 
```

# ruby - 肌腱（ruby web scraper）示例在我的机器上不起作用

> ID：11074718
> 
> 赞同：0
> 
> 时间：2012-06-17T20:54:26.177
> 
> 标签：ruby, web-crawler, web-scraping, nokogiri, popen

我正在尝试从肌腱源代码运行示例，但它无法在我的机器上运行。这是示例（直接取自他们的 github）：

```
get "http://www.amazon.com/gp/bestsellers/books/ref=sv_b_3"
noko.css(".zg_itemRow").each do |item|
  row = { }
  row[:url] = item.css(".zg_title a").first[:href]
  row[:title] = item.css(".zg_title")
  row[:img] = item.css(".zg_itemImage_normal img").first[:src]
  csv_emit(row)
end 
```

我正在使用带有 ruby​​ 1.9.3 和 rvm 的 ubuntu 12.04。这是我输入的内容，然后是错误。

```
jefferton@ubuntu:~/IdeaProjects/sinew_scrape$ sinew sell_list.sinew
curl http://www.amazon.com/gp/bestsellers/books/ref=sv_b_3
/home/jefferton/.rvm/gems/ruby-1.9.3-head/gems/sinew-1.0.2/lib/sinew/text_util.rb:48:in `popen': No such file or directory - tidy -asxml  -bare  -quiet  -utf8  -wrap 0 --doctype omit --hide-comments yes --force-output yes -f /dev/null (Errno::ENOENT)
from /home/jefferton/.rvm/gems/ruby-1.9.3-head/gems/sinew-1.0.2/lib/sinew/text_util.rb:48:in `html_tidy'
from /home/jefferton/.rvm/gems/ruby-1.9.3-head/gems/sinew-1.0.2/lib/sinew/main.rb:33:in `html'
from /home/jefferton/.rvm/gems/ruby-1.9.3-head/gems/sinew-1.0.2/lib/sinew/main.rb:59:in `noko'
from sell_list.sinew:9:in `_run'
from /home/jefferton/.rvm/gems/ruby-1.9.3-head/gems/sinew-1.0.2/lib/sinew/main.rb:121:in `instance_eval'
from /home/jefferton/.rvm/gems/ruby-1.9.3-head/gems/sinew-1.0.2/lib/sinew/main.rb:121:in `_run'
from /home/jefferton/.rvm/gems/ruby-1.9.3-head/gems/sinew-1.0.2/lib/sinew/main.rb:16:in `initialize'
from /home/jefferton/.rvm/gems/ruby-1.9.3-head/gems/sinew-1.0.2/bin/sinew:19:in `new'
from /home/jefferton/.rvm/gems/ruby-1.9.3-head/gems/sinew-1.0.2/bin/sinew:19:in `block in <top (required)>'
from /home/jefferton/.rvm/gems/ruby-1.9.3-head/gems/sinew-1.0.2/bin/sinew:18:in `each'
from /home/jefferton/.rvm/gems/ruby-1.9.3-head/gems/sinew-1.0.2/bin/sinew:18:in `<top (required)>'
from /home/jefferton/.rvm/gems/ruby-1.9.3-head/bin/sinew:19:in `load'
from /home/jefferton/.rvm/gems/ruby-1.9.3-head/bin/sinew:19:in `<main>'
from /home/jefferton/.rvm/gems/ruby-1.9.3-head/bin/ruby_noexec_wrapper:14:in `eval'
from /home/jefferton/.rvm/gems/ruby-1.9.3-head/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我希望我知道要问的更具体的问题，但我不确定在这里做什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:30:39.663

您必须先安装 Html-Tidy 和 Curl，请参阅[https://github.com/gurgeous/sinew/wiki](https://github.com/gurgeous/sinew/wiki) 您在这里得到的错误是因为未找到 Html-Tidy。将其安装到没有空格（不是程序文件）的文件夹中，并将路径添加到您的系统或用户 PATH 变量。对卷曲做同样的事情。从命令行而不是在它们自己的地图中测试这两个应用程序，看看它们是否工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T01:37:54.717

That library might be worth looking into but I can't imagine why they would use curl over mechanize or what html tidy is supposed to be for. And shelling out to executables like that is just a bad approach. My opinion is to avoid it and use mechanize instead.

# java - MongoDB：如何索引 Map 的键

> ID：11074722
> 
> 赞同：11
> 
> 时间：2012-06-17T20:55:08.600
> 
> 标签：java, mongodb

在 Java 中，我有一个看起来像这样的对象：

```
class MyDoc {
     ObjectId docId;
     Map<String, String> someProps = new HashMap<String,String>(); 
} 
```

其中，当持久保存到 MongoDB 时，会生成以下文档：

```
{
    "_id" : ObjectId("4fb538eb5e9e7b17b211d5d3"),
    "someProps" : {
        "4fda4993eb14ea4a4a149c04" : "PROCESSED",
        "4f56a5c4b6f621f092b00525" : "PROCESSED",
        "4fd95a2a0baaefd1837fe504" : "TODO"
    }
} 
```

我需要查询如下。

```
DBObject queryObj =  
new BasicDBObject("someProps.4fda4993eb14ea4a4a149c04","PROCESSED");                        
DBObject explain =  
getCollection().find(queryObj).hint("props_indx").explain(); 
```

应该是找到我的 MyDoc 文档，这些文档有一个带有键“4fda4993eb14ea4a4a149c04”和值“已处理”的 someProps

我在集合中存储了数百万个 MyDoc 文档，因此我需要对 someProps 嵌入对象的键进行有效索引。

事先不知道地图的键（它们是动态生成的，它们不是一组固定的键），因此我无法为每个 someProps 键创建一个索引。（至少我不认为如果我错了我可以纠正我）

我尝试直接在 someProps 上创建索引，但查询需要很长时间。

如何在 someProps Map 键上建立索引？我需要不同的文档结构吗？

重要说明：

1\. someProps 中只能有一个元素具有相同的键。例如 ：

```
{
"_id" : ObjectId("4fb538eb5e9e7b17b211d5d3"),
    "someProps" : {
        "4fda4993eb14ea4a4a149c04" : "PROCESSED",
        "4f56a5c4b6f621f092b00525" : "PROCESSED",
        "4f56a5c4b6f621f092b00525" : "TODO"
    }
} 
```

将是无效的，因为 4f56a5c4b6f621f092b00525 在地图中找不到两次（因此首先使用地图）

2\. 我还需要有效地更新 someProps，只更改值（例如：将“4fda4993eb14ea4a4a149c04”：“PROCESSED”更改为“4fda4993eb14ea4a4a149c04”：“CANCELLED”）

我有什么选择？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T13:06:35.750

如果你想保持你的属性嵌入，你也可以使用 Kyle Banke 在“MongoDB in Action”中提出的动态属性模式。因此，不要将道具放在他们自己的集合中，而是将 mydocs 集合修改为如下所示：

```
{
  "_id" : ObjectId("4fb538eb5e9e7b17b211d5d3"),
  "someProps" : [
      { k: "4fda4993eb14ea4a4a149c04", v: "PROCESSED" },
      { k: "4f56a5c4b6f621f092b00525", v: "PROCESSED" },
      { k: "4fd95a2a0baaefd1837fe504", v : "TODO" }
  ]
} 
```

然后对嵌入的文档键进行索引：

```
db.mydoc.ensureIndex({'someProps.k' :1}, {'someProps.v' :1}) 
```

这与 Sergio 的建议非常接近，但您的数据仍将是单个集合中的一个文档。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T21:30:59.163

像这样构建文档怎么样：

```
{
"_id" : ObjectId("4fb538eb5e9e7b17b211d5d3"),
    "someProps" : {
        "PROCESSED":["4fda4993eb14ea4a4a149c04","4f56a5c4b6f621f092b00525"],
        "TODO" : ["4f56a5c4b6f621f092b00526"],
        "CANCELLED" : [ ]
    }
} 
```

这样做的三个好处是：

1.  您可以通过将查询从 "someProps.4fda4993eb14ea4a4a149c04","PROCESSED" 翻转到 "someProps.PROCESSED", "4fda4993eb14ea4a4a149c04" 来查看是否处理了某个对象

2.  您可以在“someProps.TODO”上创建一个索引，在“someProps.PROCESSED”上创建另一个索引（您不能在多个并行数组上创建一个复合索引，但听起来您会按单个状态进行查询，对吧？

3.  您可以将文档从一种状态自动移动到另一种状态，如下所示：

.

```
db.collection.update({"someProps.PROCESSED": "4fda4993eb14ea4a4a149c04"},
                     {$pull:{"someProps.PROCESSED":"4fda4993eb14ea4a4a149c04"},
                      $push:{"someProps.CANCELLED":"4fda4993eb14ea4a4a149c04"}}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T21:46:29.200

我建议将这些属性扩展到它们自己的文档中。所以你的例子：

```
{
    "_id" : ObjectId("4fb538eb5e9e7b17b211d5d3"),
    "someProps" : {
        "4fda4993eb14ea4a4a149c04" : "PROCESSED",
        "4f56a5c4b6f621f092b00525" : "PROCESSED",
        "4fd95a2a0baaefd1837fe504" : "TODO"
    }
} 
```

变成这个

```
{_id: {id1: ObjectId("4fb538eb5e9e7b17b211d5d3"), id2: "4fda4993eb14ea4a4a149c04"}, v: "PROCESSED"}
{_id: {id1: ObjectId("4fb538eb5e9e7b17b211d5d3"), id2: "4f56a5c4b6f621f092b00525"}, v: "PROCESSED"}
{_id: {id1: ObjectId("4fb538eb5e9e7b17b211d5d3"), id2: "4fd95a2a0baaefd1837fe504"}, v: "TODO"} 
```

这`id1`是您以前的父实体（无论是应用程序还是其他）的 id，并且`id2`是属性 id。

唯一性由`_id`字段的属性强制执行。原子更新是微不足道的。索引很容易

```
db.props.ensureIndex({'_id.id2': 1}) 
```

唯一的缺点是一些存储开销。

# javascript - 如何使用 WebGL 在画布上设置像素的颜色？

> ID：11074725
> 
> 赞同：11
> 
> 时间：2012-06-17T20:55:26.347
> 
> 标签：javascript, html, canvas, webgl

我对 WebGL 很陌生，但不是 Javascript 或 Canvas。本质上，我需要一种非常快速的方法来改变画布上任意坐标处像素的颜色。我觉得这可以使用 WebGL 片段着色器来完成。这可能吗，有没有更好的方法？我该怎么做呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-15T03:24:04.787

这不是一个详尽的渲染指南，因为它不包括有关着色器管理的内容。相反，它侧重于如何实际执行 WebGL 基元的绘制，以及如何使用正交投影在屏幕上精确定位顶点。

有关更多信息，我强烈推荐以下来源：

*   [学习 WebGL - 教程](http://learningwebgl.com)
*   [WebGL 规范](http://www.khronos.org/registry/webgl/specs/latest/)
*   [类型化数组规范](http://www.khronos.org/registry/typedarray/specs/latest/)

WebGL 使用顶点缓冲区对象 (VBO) 进行所有绘图，因此您需要将所有数据编译为 3D 顶点，并以尽可能少的 VBO 将它们发送到视频卡（以最大限度地提高性能）。

可以像这样在 WebGL 中创建 VBO：

```
var vbo = gl.createBuffer(); 
```

然后您需要将数据发送到缓冲区，通常以`Float32Array`. 如果您已经拥有常规 JavaScript 数组形式的数据，那么您可以使用从的内容`new Float32Array(jsArray)`初始化。不过尽量少做。类型化数组非常快，但初始化非常慢。最好创建一次并尽可能重复使用它们。`Float32Array``jsArray`

一旦你有了`Float32Array`，你可以像这样将数据传递到缓冲区：

```
gl.bindBuffer(gl.ARRAY_BUFFER, vbo);
gl.bufferData(gl.ARRAY_BUFFER, float32Data, gl.DYNAMIC_DRAW); 
```

每次数据更改时，您都需要执行`bufferData`或调用。`bufferSubData`

此时数据在显卡上，所以你只需要实际*绘制*它：

```
// bind the VBO to be drawn if you haven't already
gl.bindBuffer(gl.ARRAY_BUFFER, vbo);
// send the vertex data to the shader program
gl.vertexAttribPointer(vertexAttributeLocation, 3, gl.FLOAT, false, 0, 0);
// draw the buffer
gl.drawArrays(gl.POINTS, 0, float32Data.length / 3); 
```

请注意，虽然显卡可以容纳相当多的 VBO，但您应该尽可能少地使用它们，因为`drawArrays`您必须执行的调用越多，速度就越慢。事实上，如果你在给定的 VBO 中一次只渲染一个像素，运行起来会太慢。

的长度`Float32Array`除以 3 的原因是因为每个单个数据元素都是一个 3D (X, Y, Z) 坐标，所以每个数据元素由 3 个浮点分量组成。请注意， 的第一个参数`gl.drawArrays`是`gl.POINTS`。这指示图形卡为数组中的每个项目绘制一个点（默认情况下，大小为单个像素）。还有其他绘制方式，如果您需要*填充*一组像素，其他绘制模式之一（例如`gl.TRIANGLES`）可能更符合您的喜好。

至于点亮特定像素，这取决于着色器的编写方式，但*很可能*您正在使用模型视图矩阵和投影矩阵。模型视图矩阵表示相机相对于绘制点的方向，投影矩阵表示相机尺寸（宽度和高度、视野、最近和最远的可见范围等）。所以如果你想照亮特定的像素，你最好的办法是应用*正交*投影矩阵的宽度和高度等于画布的宽度和高度；和一个模型视图矩阵设置为身份（无转换）。在正交投影中，对象在远离相机时不会缩小，因此它们对于指定相对于屏幕的准确位置非常有帮助。此外，如果您给它们适当的尺寸，您可以非常精确地定位顶点 -如果您愿意，可以*在特定像素处。*

不同的矩阵库以不同的方式工作，但例如，要在[gl-matrix](http://github.com/toji/gl-matrix)中设置正交矩阵，您可以这样做：

```
var ortho = mat4.ortho(left, right, bottom, top, near, far); 
```

确切的数字取决于您的偏好；如果你想将原点 (0, 0) 放在画布的左下角，你可以这样做：

```
var ortho = mat4.ortho(0, canvas.width, 0, canvas.height, 0.01, 200); 
```

请注意，每个点的 Z 值仍然必须位于`near`和之间`far`才能被渲染，但是，该`near`值不能设置为`0`。

让我知道这是否需要澄清。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T03:47:23.697

如果您只想绘制单个像素，最好使用 canvas 2d。

否则，您可能可以从本教程中找出它以像素为单位绘制矩形，因此将宽度和高度设置为 1x1，您将获得单个像素。

[http://games.greggman.com/game/webgl-fundamentals/](http://games.greggman.com/game/webgl-fundamentals/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T18:54:15.337

绘图时可以使用 GL_POINTS。基本上，您会将一组点连同颜色和位置一起传递给 GPU。然后，您使用正确的数据调用 drawArrays。

这可能与其他事情联系得太紧密了，但这可能会对您有所帮助：

[https://github.com/funkaster/ChesterGL/blob/master/chesterGL/primitivesBlock.js#L126](https://github.com/funkaster/ChesterGL/blob/master/chesterGL/primitivesBlock.js#L126)

[https://github.com/funkaster/ChesterGL/blob/master/chesterGL/primitivesBlock.js#L260](https://github.com/funkaster/ChesterGL/blob/master/chesterGL/primitivesBlock.js#L260)

这就是我在chesterGL 的原始块中渲染几个点的方式。

# c++ - 使用发布 CRT 在调试中构建应用程序，但在 boost 上存在依赖问题

> ID：11074727
> 
> 赞同：1
> 
> 时间：2012-06-17T20:55:51.890
> 
> 标签：c++, boost, crt

我正在构建一个依赖于 boost 的应用程序。我的应用程序输出是最终被另一个客户端应用程序使用的库。我最近发现我正在使用 /MDd 以调试模式构建我的应用程序以生成代码（调试 CRT 库），并且即使在调试模式下，客户端应用程序也是针对发布 CRT 构建的。因此，这可能会导致一些内存堆损坏错误。为了确认，我在发布模式下测试了所有内容，一切正常。

为了解决这个问题，我在调试模式下针对 CRT 发布库构建了我的应用程序......但现在我的应用程序（在独立测试中）在运行时失败了。我的理解是这是由于 boost 依赖，并且 boost 调试可能是针对调试 CRT 库构建的？我查看了 boost 文档，但找不到我想要的确切内容......这是如何针对发布 CRT 重建 boost（在调试模式下）？感谢任何帮助/想法/示例。谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:54:44.283

除了@AlKepp 的回答，我想建议看看*Dependency Walker* (http://dependencywalker.com/)。它是一个免费工具，可向您显示您的库或应用程序所依赖的库。通常您应该确保仅显示 Microsoft C/C++ 运行时 DLL 的 Release 或 Debug 版本（例如`MSVCP90.DLL`vs `MSVCP90D.DLL`）。

如果您的应用在运行时加载更多库（例如插件），*请*使用`Profile->Start Profiling`. 然后它将向您显示在执行期间实际加载或尝试加载的所有库。

这对解决任何依赖问题都有很大帮助，它对我帮助很大，尤其是在这种意外混合发布和调试版本的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T21:04:18.703

我过去也有类似的问题。我通过仅使用打开调试功能的发布版本解决了这个问题。您可以更改默认发布配置以生成所有必需的调试信息并省略优化或其中一些，或者您可以创建默认发布配置的克隆，让您拥有原始版本（即真正的发布）和调试-启用发布配置。

# php - Next 关联数组的迭代器方法

> ID：11074730
> 
> 赞同：18
> 
> 时间：2012-06-17T20:56:17.477
> 
> 标签：php, arrays, iterator

我想将关联数组与 PHP 迭代器一起使用：

[http://php.net/manual/en/class.iterator.php](http://php.net/manual/en/class.iterator.php)

是否可以？

我定义了这些方法：

```
 public function rewind(){    
    reset($this->_arr);
    $this->_position = key($this->_arr);
  }

  public function current(){    
    return $this->_arr[$this->_position];
  }

  public function key(){
    return $this->_position;
  }

  public function next(){    
    ++$this->_position;
  }

  public function valid(){    
    return isset($this->_arr[$this->_position]);
  } 
```

问题是它没有正确迭代。我只得到一个元素。

我认为这是因为`++$this->_position`next() 方法中的代码没有任何效果，因为 _position 是一个字符串（关联数组的键）。

那么我怎样才能进入这种数组的下一个元素呢？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-17T21:38:38.157

```
function rewind() {
    reset($this->_arr);
}

function current() {
    return current($this->_arr);
}

function key() {
    return key($this->_arr);
}

function next() {
    next($this->_arr);
}

function valid() {
    return key($this->_arr) !== null;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T23:46:23.587

为什么不创建一个`ArrayObject`from Your associative `Array`？然后，您可以根据需要`getIterator()`从中`ArrayObject`调用`key()`，`next()`等等...

一些例子：

```
$array = array('one' => 'ONE', 'two' => 'TWO', 'three' = 'THREE');
// create ArrayObject and get it's iterator
$ao = new ArrayObject($my_array);
$it = $ao->getIterator();
// looping
while($it->valid()) {
    echo "Under key {$it->key()} is value {$it->current()}";
    $it->next();
} 
```

[ArrayObject](http://php.net/ArrayObject)
[ArrayIterator](http://php.net/manual/en/arrayobject.getiterator.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T21:03:36.193

[http://ideone.com/Fxt0j](http://ideone.com/Fxt0j)

```
class myIterator implements Iterator {
    private $position = 0;
    private $keys;

    public function __construct(array $arr) {
        $this->array = $arr;
        $this->keys = array_keys($arr);
        $this->position = 0;
    }

    function rewind() {
        $this->position = 0;
    }

    function current() {
        return $this->array[$this->key()];
    }

    function key() {
        return $this->keys[$this->position];
    }

    function next() {
        ++$this->position;
    }

    function valid() {
        return isset($this->keys[$this->position]);
    }
}

$it = new myIterator(array(
        'a' => "firstelement",
        'b' => "secondelement",
        'c' => "lastelement",
    ));

foreach($it as $key => $value) {
    var_dump($key, $value);
    echo "\n";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-17T09:24:11.063

```
class MyItrator implements Iterator 
{
    private $_arr;

    public function __construct(array $arr) 
    {
        $this->_arr = $arr;
    }

    public function rewind()
    {
        reset($this->_arr);
    }

    public function current()
    {
        return current($this->_arr);
    }

    public function key()
    {
        return key($this->_arr);
    }

    public function next()
    {
        next($this->_arr);
    }

    public function valid()
    {
        return isset($this->_arr[key($this->_arr)]);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-06T16:16:41.030

我知道这是一个老问题，但它可以很简单

```
public function current()
{
    return $this->array[array_keys($this->array)[$this->position]];
}

public function next()
{
    ++$this->position;
}

public function key()
{
    return array_keys($this->array)[$this->position];
}

public function valid()
{
    return array_key_exists($this->position, array_keys($this->array)[$this->position]);
}

public function rewind()
{
    $this->position = 0;
} 
```

我知道@zerkms 发布了类似的答案，但恕我直言，如果对象已经构建并且您具有扩展数组的功能，则该答案不起作用

# c# - WebClient网站登录

> ID：11074731
> 
> 赞同：2
> 
> 时间：2012-06-17T20:56:22.967
> 
> 标签：c#, login, browser, webclient, webpage

我无法登录网页 (http://hurt.prosto.pl)；它一直返回到登录页面源...知道如何解决吗？

```
var loginData = new NameValueCollection();
loginData.Add("username", username);
loginData.Add("password", password);

var client = new CookieAwareWebClient();
client.BaseAddress = @"http://hurt.prosto.pl/accounts/login/?next=/hurt/";
client.UploadValues("http://hurt.prosto.pl/accounts/login/?next=/hurt/", "POST", loginData);

// now you are logged in and can request pages    
string htmlSource = client.DownloadString("http://hurt.prosto.pl/hurt/myorders/--/category/all1/");
webBrowser2.DocumentText = htmlSource; 
```

这是我的 CookieAwereWebClient 类：

```
namespace HTMLParser
{
    internal class CookieAwareWebClient : WebClient
    {
        private CookieContainer cookie = new CookieContainer();

        protected override WebRequest GetWebRequest(Uri address)
        {
            WebRequest request = base.GetWebRequest(address);
            if (request is HttpWebRequest)
            {
                (request as HttpWebRequest).CookieContainer = cookie;
            }
            return request;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:19:30.343

像我一样为 ppl 提供解决方案的 Anwser :) gl

```
string loginData = "username=***&password=***&next=/hurt/";
            WebClient wc = new WebClient();
            string cookie = string.Empty;
            wc.BaseAddress = @"http://hurt.prosto.pl/accounts/login/";

            wc.Headers.Add("Content-Type: application/x-www-form-urlencoded");
            wc.Headers.Add("User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5");
            wc.Headers.Add("Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
            wc.Headers.Add("Accept-Encoding: identity");
            wc.Headers.Add("Accept-Language: en-US,en;q=0.8");
            wc.Headers.Add("Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3");

            wc.UploadString("http://hurt.prosto.pl/accounts/login/", "POST", loginData);
            cookie = wc.ResponseHeaders["Set-Cookie"].ToString();
            wc.Headers.Add("Cookie", cookie);
            wc.UploadString("http://hurt.prosto.pl/accounts/login/", "POST", loginData);
            webBrowser1.DocumentText = wc.DownloadString("http://hurt.prosto.pl/hurt/myorders/--/category/all1/"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T21:20:25.420

```
string string loginData = "username=***&passowrd=***&next=/hurt/";

WebClient wc = new WebClient();

wc.Headers.Add("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5");
wc.Headers.Add("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
wc.Headers.Add("Accept-Encoding", "identity");
wc.Headers.Add("Accept-Language", "en-US,en;q=0.8");
wc.Headers.Add("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.3");
wc.Headers.Add("ContentType", "application/x-www-form-urlencoded");
string response = wc.UploadString("http://hurt.prosto.pl/accounts/login/", "POST", loginData); 
```

饼干：

```
// general retrieve
string cookie = wc.ResponseHeaders["Set-Cookie"].ToString();

// general send
wc.Headers.Add("Cookie", cookie); 
```

# c++ - 与 if 语句按位与

> ID：11074739
> 
> 赞同：0
> 
> 时间：2012-06-17T20:57:13.780
> 
> 标签：c++

我可以在下面的 C++ 代码中使用按位 & 吗？该方法根据按位运算的结果返回一个布尔值。

```
bool SetValue( myType a )
{
    if( a & notMyType == notMyType )
    {
        return false;
    }

    if( a & newMyType == newMyType )
    {
        SendNew(a);
        return true;
    }

    if( a & oldMyType == oldMyType )
    {
        SendOld(a);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T21:01:54.260

`==`具有比`&`您应该使用括号更高的优先级：

```
a & notMyType == notMyType 
```

被评估为

```
a & (notMyType == notMyType) 
```

所以你应该改用：

```
(a & notMyType) == notMyType 
```

实际上，您使用的是按位 AND 运算符 ( `&`)，但您可能想使用逻辑 AND 运算符 ( `&&`)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T20:59:41.157

**简短的回答：**没有。

通常，对非原始类型的任何东西使用按位运算被认为是一个坏主意（无论如何我都看不到它完成了什么）。此外，我很少看到按位运算证明对非自然数有用的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T21:07:30.683

是的，有一些假设和修复可能没问题。

假设：

*   `MyType`是一个整数类型
*   常量通常是位值 (1, 2, 4, ...) 或其语义上的自然组合

您的最后一个比较看起来像一个错字（您选择使用一个标志，然后与另一个标志进行比较）。这仍然可以与某些值组合一起使用，但充其量只会令人困惑。

您还需要修复运算符优先级。

```
a & flag == flag 
```

真正意思

```
a & (flag == flag) 
```

这意味着，假设这都是完整的并且没有异常重载，

```
a & 1 
```

意思是

```
(a & 1) == 1 
```

这不是你想要的。添加括号或简单地写

```
a & flag 
```

依靠 this 将转换为`true`当且仅当`a`has flag `flag`。此条件看起来不像布尔值，但 C++ 提供了到布尔值的隐式转换。零值转换为`false`，任何其他值转换为`true`。

# java - 临时存储/查询数据的最佳方法？

> ID：11074740
> 
> 赞同：1
> 
> 时间：2012-06-17T20:57:19.113
> 
> 标签：java

我有一个临时存储用户信息的应用程序。我不想弄乱 mysql，因为它太过分了——我需要存储一个 id、用户名和一些额外的字段。我需要能够通过 id 轻松查询、显示全部或按用户提取列表。

哈希映射可以正常工作，但在需要根据条件提取列表时似乎效率低下。我对 java 还是很陌生，但不是编程，有没有更好的数据库系统或者更适合我的任务的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:06:04.073

可以使用内存中的缓存（没有基于磁盘的存储）——例如 HazelCast/Redis/EHCache。HazelCast 有地图、多地图、集合、列表、队列和主题（类似的功能在其他内存存储中可用）。如果您不想使用 Java 集合/内存缓存，也可以使用内存数据库，例如 H2 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T21:01:12.560

您可以使用像[Apache Derby](http://db.apache.org/derby/)这样的内存数据库，这将为您提供两全其美的优势：直接集成到您的应用程序和数据库的全部功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:56:21.277

您可以使用休眠 imo。我正在使用 java play 框架，它使用 H2 作为数据库引擎。它可以像普通的数据库引擎（HQL 和 SQL）一样在内存上运行 db，不需要安装任何数据库服务器，如果需要，您还可以将数据存储为简单的文件格式。

# search-engine - 谷歌结果删除

> ID：11074763
> 
> 赞同：-1
> 
> 时间：2012-06-17T21:01:50.220
> 
> 标签：search-engine

如果我在错误的地方问这个问题，我真的很抱歉，但我一直在想：

*   有没有办法让谷歌从他们的数据库中删除特定结果/结果范围/特定标准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T21:05:47.240

抱歉不行。但是，您可以自行搜索并要求链接网站删除您的姓名和相关页面。

其实是有办法的，只是你可能做不到。如果您向 Google 提交法院命令将其删除（这需要对网站所有者提起诉讼，并且法院认为这是诽谤），Google 会将该网站从其搜索结果中列入黑名单。

# authentication - nginx 组 http 身份验证

> ID：11074766
> 
> 赞同：7
> 
> 时间：2012-06-17T21:01:59.000
> 
> 标签：authentication, nginx

来自 apache2 我无法归档的唯一功能：在密码数据库中拥有用户（`htpasswd`）并允许访问不同的文件/文件夹/虚拟服务器。

我启用的基本 http auth 有效：

```
location ~ ^/a/ {
    # should allow access for user1, user2
    auth_basic            "Restricted";
    auth_basic_user_file  /etc/nginx/auth/file_a;
}
location ~ ^/b/ {
    # should allow access for user2, user3
    auth_basic            "Restricted";
    auth_basic_user_file  /etc/nginx/auth/file_b;
} 
```

如果我有*user1* , *user2* in`file_a`和*user2* , *user3* in `file_b`，这可行，但是当我更改*user2*的密码时，我必须更新这两个文件（所有位置的密码都应该相同）。由于我将拥有超过 15 个具有不同访问权限的不同位置和超过 10 个用户，这并不容易处理。（我喜欢细粒度的访问权限！）

使用 Apache，我为每个位置定义了不同的组，并且需要正确的组。更改访问权限就像在组中添加/删除用户一样简单。

有没有类似的东西，或者如何使用 nginx 轻松处理这种情况？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-19T21:22:58.503

您可以使用`AuthDigest`模块和领域作为组来完成此工作 - 您将为一个用户拥有多个条目，但您可以将它们逐行放在一个文件中。不完美，但比你现在的噩梦要好。

配置中的小改动（参见第二个位置的 auth_digest 和 user_file）：

```
location ~ ^/a/ {
    # should allow access for user1, user2
    auth_digest            "Restricted";
    auth_digest_user_file  /etc/nginx/auth/file_a;
}
location ~ ^/b/ {
    # should allow access for user2, user3
    auth_digest            "Restricted2";
    auth_digest_user_file  /etc/nginx/auth/file_a;
} 
```

和file_a：

```
user1:Restricted1:password_hash
user2:Restricted1:password_hash
user2:Restricted2:password_hash
user3:Restricted2:password_hash 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-08T16:42:39.053

我终于用基本的http auth这样管理它：

*   对于每个组，我都有一个单独的密码文件，例如`group_a.auth`, `group_b.auth`, ...
*   另外，我有一个文件，其中写入了每个用户和密码，例如`passwords.txt`
*   `passwords.txt`具有与身份验证文件相同的格式，因此类似于`user1:password_hash`
*   我有一个 ruby​​ 脚本`update.rb`来同步用户的密码`password.txt`到所有`.auth`文件（更多的是一个包装器`sed`）：

红宝石脚本`update.rb`：

```
#!/usr/bin/env ruby

passwords = File.new("./passwords.txt","r")

while pwline = passwords.gets
    pwline.strip!
    next if pwline.empty?

    user, _ = pwline.split(':')
    %x(sed -i 's/#{user}:.*/#{pwline.gsub('/','\/')}/g' *.auth)
end 
```

*   更新用户密码：update password in`passwords.txt`并执行`update.rb`
*   将用户添加到组（例如添加`new_user`到`group_a`）：打开`group_a.auth`并添加行`new_user:`。然后添加`new_user:password_hash`到`passwords.txt`如果用户不存在并最终运行`update.rb`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-16T14:52:54.887

我正在使用一个脚本 nginx-groups.pl 来解析 apache 风格的密码和分组文件，并为每个组生成单独的密码文件。因此，它基本上与 Markus 回答中的 Ruby 脚本执行相同的操作，但它对所有组仅使用一个文件，并且组文件的格式与 apache 相同。

该脚本的当前版本是：

```
#! /usr/bin/env perl

use strict;

die "Usage: $0 USERSFILE GROUPSFILE\n" unless @ARGV == 2;
my ($users_file, $groups_file) = @ARGV;

my %users;
open my $fh, "<$users_file" or die "cannot open '$users_file': $!\n";
while (my $line = <$fh>) {
    chomp $line;
    my ($name, $password) = split /:/, $line, 2;
    next if !defined $password;
    $users{$name} = $line;
}

open my $fh, "<$groups_file" or die "cannot open '$groups_file': $!\n";
while (my $line = <$fh>) {
    my ($name, $members) = split /:/, $line, 2 or next;
    next if !defined $members;
    $name =~ s/[ \t]//g;
    next if $name eq '';
    my @members = grep { length $_ && exists $users{$_} } 
                  split /[ \t\r\n]+/, $members;

    my $groups_users_file = $name . '.users';

    print "Writing users file '$groups_users_file'.\n";

    open my $wh, ">$groups_users_file" 
        or die "Cannot open '$groups_users_file' for writing: $!\n";

    foreach my $user (@members) {
        print $wh "$users{$user}\n"
            or die "Cannot write to '$groups_users_file': $!\n";
    }

    close $wh or die "Cannot close '$groups_users_file': $!\n";
} 
```

以您喜欢的任何名称保存它并使其可执行。不带参数调用它会打印一个简短的使用信息。

有关详细信息，请参见[http://www.guido-flohr.net/group-authentication-for-nginx/](http://www.guido-flohr.net/group-authentication-for-nginx/)！

# matlab - Matlab linprog错误 - A中的行数必须与b的元素数相同

> ID：11074768
> 
> 赞同：0
> 
> 时间：2012-06-17T21:02:19.457
> 
> 标签：matlab, linear-algebra, mathematical-optimization, linear-programming

嗨，我有以下用于 linprog 优化的代码。

```
for j = 1:2

 for i = 1:24
   for K = 1:3
      for M = 1:3

   PV_output(:,:,:) = real(PV_power_output(:,:,:));
         WT_output(:,:,:) =  WT_power_output(:,:,:);

         PVenergy = sum(sum(PV_output(:,:,1)));
         WTenergy = sum(sum(WT_power_output(:,:,1)));

          f= [((CRF*CC_PV)/PVenergy)+OM_PV; ((CRF*CC_WT)/WTenergy)+OM_WT];

         A(:,:,:) = [-PV_output(:,:,K) -WT_output(:,:,M)];

            b(:,:) = -Demand(j,i);

           lb = zeros(2,1);

           ub = [max_PV_area/PV_area max_WT_area/WT_area]';

      end
   end
  end
 end

            x(:,j,i,K,M) = linprog(f,A,b,[],[],lb,ub) 
```

其中 WT_output 和 PV_output 是 3 维 365x24 数组，Demand 是 365x24

我正在尝试为 Demand 的每个 365x24 元素和每个维度优化 x1 和 x2，以便找到最佳的 K 和 M 组合

但是，就目前的代码而言，我不断收到错误消息-“A 中的行数必须与 b 的元素数相同。”

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:16:33.260

[的文件`linprog`](http://www.mathworks.fr/help/toolbox/optim/ug/linprog.html)指出：

> x = linprog(f,A,b) 求解 min f'*x 使得 A*x ≤ b。

因此，显然 A 中的行数必须与 b 的元素数相同，因为 A 可以是矩阵，而 b 是向量

如果您的问题是“为什么我没有合适的尺码？” 只需尝试在每一步打印向量/矩阵的大小，以查看错误在哪里（例如，您经常忘记转置矩阵）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T05:55:43.193

您的工作区对 A 和 B 的大小有何看法？ChrisJamesC 对.. 它也发生在我身上.. 我在执行操作时忘记了转置矩阵。尝试通过放置断点在每一步检查工作区。这可能会有所帮助

# delphi - URLOpenBlockingStream 给出相同的页面

> ID：11074772
> 
> 赞同：2
> 
> 时间：2012-06-17T21:03:22.203
> 
> 标签：delphi, webserver

我编写了一个 Delphi 函数从另一个应用程序中检索网页。

当我使用文件通过以下方式存储信息时，这很好用

> 结果：= URLDownloadToFile（无，PChar（XmlUrl），PChar（XmlFileName_），0，无）；

当我使用 URLOpenBlocking-stream 时，我得到了正确的信息，但是当我第二次向网络服务器发出请求时，我得到了旧页面，尽管页面已经改变。

有人知道可能是什么原因吗？

```
function MyDownloadToBlockingSteam( URL : String; Var bsXmlStr : AnsiString): LongInt;
var
  ppStream  : ActiveX.IStream;
  statstg   : TStatStg;
  dwRead    : Integer;
begin
  Result := 1;

  bsXmlStr := '';

  If (URLOpenBlockingStream(nil, PChar(URL), ppStream, 0, nil) = S_OK) then
  Begin
    // Resource protection
    try
      if (ppStream.Stat(statstg, STATFLAG_NONAME) = S_OK) then // Get the stat from the IStream interface
      begin
        if (statstg.cbSize > 0) then // Make sure size is greater than zero
        begin
          SetLength ( bsXMLStr, statstg.cbSize+1 );
          Result := ppStream.Read( @bsXMLStr[1], statstg.cbSize, @dwRead); // Read from the stream
        end;
      end;
    finally
      ppStream:=nil; // Release the IStream interface
    end;
  end;//If ..
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T02:22:40.593

考虑使用`InternetOpenUrl()`and`InternetReadFile()`代替。手动完成与您在内部执行的相同操作将需要几行额外的编码`URLOpenBlockingStream()`，但`InternetOpenUrl()`确实有一个`dwFlags`参数接受一个`INTERNET_FLAG_RELOAD`标志以强制从 URL 下载最新数据。 `URLOpenBlockingStream()`没有那个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T21:17:45.903

您可以通过在 URL 末尾附加一个随机数来避免缓存。有关详细信息，请参阅[此 SO 页面](https://stackoverflow.com/questions/4667927/javascript-url-containing-random-number)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-15T15:45:23.620

作为替代方案，您可以使用`URLDownloadToFile()`or`URLOpenBlockingStream()` 如果您`DeleteUrlCacheEntry()`先调用。

# php - 如何获得格式良好的 PHP Web 服务响应？

> ID：11074777
> 
> 赞同：1
> 
> 时间：2012-06-17T21:05:03.010
> 
> 标签：php, wsdl

我调用了这样的 API：

```
$service = new Class_Service();

$parameters = new GetClasses();
$parameters->Request = new GetClassesRequest();

$parameters->Request->SourceCredentials = new SourceCredentials();
$parameters->Request->SourceCredentials->SourceName = "Name";
$parameters->Request->SourceCredentials->Password = "Pass";
$parameters->Request->SourceCredentials->SiteIDs = array(
12
);

$classes = $service->GetClasses($parameters);

var_dump($classes); 
```

并收到这样的回复：

```
object(GetClassesResponse)#7 (1) { 
  ["GetClassesResult"]=> 
    object(GetClassesResult)#8 (6 {
      ["Classes"]=> 
        object(stdClass)#9 (1) { 
          ["Class"]=> array(25) { 
            [0]=> object(Mi_Class)#10 (21) {
               ["ClassScheduleID"]=> int(15)
               ["Visits"]=> NULL
               ["Clients"]=> NULL 
               ["Location"]=> object(Location)#11 (30) { 
                 ["BusinessID"]=> NULL
                 ["SiteID"]=> int(12)
                 ["BusinessDescription"]=> NULL
                 ["AdditionalImageURLs"]=> object(stdClass)#12 (0) { }
                 ["FacilitySquareFeet"]=> NULL 
```

响应通常看起来像这样吗？如何以格式化的方式获取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:57:01.930

你可以像这样遍历你的类：

```
foreach ($classes->GetClassesResult->Classes->Class as $class) {
    // ... do your stuff here
    print_r($class);
} 
```

# python - 如何在 Django 中使用 Ajax 从views.py 呈现模板标签上下文？

> ID：11074784
> 
> 赞同：2
> 
> 时间：2012-06-17T21:06:39.860
> 
> 标签：python, django, django-views, django-templates

在我的模板中：

```
<div class="widget-content">
    {% render_widget settings %}
</div> 
```

`render_widget`是一个`settings`带有参数的模板标签。

这里我们有模板标签中定义的方法代码：

```
def render_widget(settings):
   # some processing and then save into context
   t = get_template(#)      
  return t.render(Context(context)) 
```

上面的代码工作正常！上下文已成功呈现给给定模板。

现在我`load_ajax`在`views.py`. 在这种方法中应该发生以下事情：

此`load_ajax`方法应该从`context`and`t`变量中获取并使用 .`render_widget`渲染`context`at`t`模板`'Ajax'`。

我是 Django 和 Ajax 的新手。我应该怎么办 ？

## 更新！

load_ajax 方法：

```
def load_ajax(request):
from myapp.templatetags.file_want_import import render_widget
if request.ajax:
    # some code and render to the template with below lines
return direct_to_template(request, t,
                          extra_context=context) 
```

以上`Context`和`t`应该来自`render_widget`方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T02:01:51.250

由于误解了模板标签的工作原理，您将自己投入了一个逻辑循环：

*   您正在调用视图以获取响应
*   那么你的视图期望模板标签给它一个上下文
*   但是模板标签应该接收上下文，而不是提供它们

重新开始，不要使用模板标签：

*   调用视图以获得响应
*   将您的上下文与渲染模板所需的所有数据放在一起（毕竟它只是一个字典）
*   渲染并返回模板

在视图中收集所有数据然后渲染模板更容易。目前尚不清楚为什么需要模板标签。如果你想渲染一些设置，只需将它们作为上下文的一部分传递到模板中。例如：

视图.py：

```
ctx = { "setting_var": settings.some_var }
return render_to_response(... context=ctx) 
```

模板：

```
<div>
    {{ setting_var }}
</div> 
```

# jquery - JQuery Mobile：动态改变 data-type='horizo ntal' 到 data-type='vertical'

> ID：11074785
> 
> 赞同：0
> 
> 时间：2012-06-17T21:06:53.550
> 
> 标签：jquery, mobile

### 问题

我有一个 JQuery Mobile 站点，我正在尝试将字段集的属性从 动态更改`data-type='horizontal'`为`data-type='vertical'`. 我可以让 DOM 更改，但我无法让 JQM 在进行更改后刷新浏览器中的 DOM 视图。

我已经看到了很多刷新列表和单选按钮属性而不是字段集属性的示例。

### 代码

```
if(e.orientation == "portrait"){
    //In portrait mode, all radio buttons should be vertical.
    $('fieldset').attr('data-type', 'vertical').controlgroup('refresh');
}
else{
    //In landscape mode, all radio buttons should be horizontal.
    $('fieldset').attr('data-type', 'horizontal').controlgroup('refresh');
}
//trigger the page to recreate itself.
$('#newentry').trigger('create'); 
```

### 结论

我试过了：

```
checkboxradio('refresh') 
```

这给了我：

```
cannot call methods on checkboxradio prior to initialization; attempted to call method 'refresh'. 
```

对此的任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:17:08.307

调用`checkboxradio();` 而不是`checkboxradio('refresh');` 可能会为您初始化它，如果没有看到更多代码就不确定

# modeling - 用于构建 WebML（RIA 扩展）图表的工具？

> ID：11074788
> 
> 赞同：1
> 
> 时间：2012-06-17T21:08:00.673
> 
> 标签：modeling, rich-internet-application

您是否知道任何用于对富 Internet 应用程序 (RIA) 的数据、业务逻辑和表示（UI、交互等）进行建模的免费工具？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:13:19.260

Eclipse 是一个很好的免费工具，可以引导您完成愿望清单上的大部分内容。对于 RIA-s，您可以查看

*   [Eclipse RCP 和 RAP 包](http://www.eclipse.org/downloads/packages/eclipse-rcp-and-rap-developers/indigosr2)
*   “一套完整的工具，适用于想要创建 Eclipse 插件、富客户端或富 Ajax 应用程序 (RCP+RAP) 以及 Mylyn 和 XML 编辑器的开发人员。除了 CVS Eclipse Team 提供程序之外，它还包含用于访问 Git 版本控制系统的 EGit 工具。”

或者，您可以使用 Netbeans 查看 JavaFX。我上次使用 JavaFX 时没有太多工具。随着 JavaFX 越来越受欢迎，这种情况可能会改变。

如果您想要更高级别的东西，请环顾四周。但是，如果您刚刚开始，我建议您还是从那里开始，因为 Eclipse 承诺提供许多不同的建模和构建工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:44:44.983

[WebRatio](http://www.webratio.com)实际上已经包含了对基本 RIA 和 AJAX 行为的支持。如果需要非常高级和复杂的动态页面，该工具也可以与[RUX-Tool一起使用。](http://www.homeria.com)此外，[WebML](http://www.webml.org)将很快演变为[IFML](http://www.ifml.org)，它正在作为 OMG 标准进行评估。IFML 将是一种更全面的语言，它本身将包括自定义事件管理和丰富的交互（不仅限于 Web 界面）。

[免责声明：我与 Politecnico di Milano 和 WebRatio 合作，也是 WebML/IFML 的发明者之一]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-22T09:42:06.577

我不知道这里的工具是领域特定语言：对于数据，您使用实体-关系模型（ER 模型）对于业务逻辑，您应该使用业务流程建模语言（BPML）对于 UX 和 UI，您可以同时使用 WebMl（Web 建模语言）或交互流建模语言（IFML），但是我喜欢 webml，但正在被 IFML 取代。

你现在可以用谷歌搜索每种语言的特定工具。

# ruby-on-rails - Rails 搜索表单，带有用于选择搜索条件的单选按钮

> ID：11074791
> 
> 赞同：0
> 
> 时间：2012-06-17T21:08:06.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我在我的应用程序中实现了一个简单的 Rails 搜索。在我这样做的时候，我只需要完成工作，但是我确信我做的方式远非 DRY，所以任何关于如何改进它的建议都将不胜感激。我基本上想要一个搜索文本框，带有 4 个单选按钮，用户可以选择它们来选择他们想要搜索的内容。

我目前的指数：

```
<%= form_tag("/search", :method => "get") do %>
  <%= label_tag(:q, "Search for Product Title:") %>
  <%= text_field_tag(:q) %>
  <%= submit_tag("Search Title") %>
<% end %>
<br>
<%= form_tag("/search", :method => "get") do %>
  <%= label_tag(:d, "Search for Product Description:") %>
  <%= text_field_tag(:d) %>
  <%= submit_tag("Search Description") %>
<% end %>
<br>
<%= form_tag("/search", :method => "get") do %>
  <%= label_tag(:a, "Search for Category Names:") %>
  <%= text_field_tag(:a) %>
  <%= submit_tag("Search Category Name") %>
<% end %>
<br>
<%= form_tag("/search", :method => "get") do %>
  <%= label_tag(:i, "Search for ID Str:") %>
  <%= text_field_tag(:i) %>
  <%= submit_tag("Search ID Str") %>
<% end %>

<<results from search here>> 
```

控制器：

```
class SearchController < ApplicationController

  def index
    if params[:commit] == "Search Title"
      # Great, now lets figure out what sort of query we're after
      @searchQuery_title = params[:q]
      @resultsReceived_title = true
      if 
         @sqlResults_title_published_size = Product.where("title like ? AND published like ?", "%" + params[:q] + "%", '1')
         @sqlResults_title_size = Product.where("title like ? OR categories like ?", "%" + params[:q] + "%", "%" + params[:q] + "%")
         @sqlResults_title = Product.where("title like ? OR categories like ?", "%" + params[:q] + "%", "%" + params[:q] + "%").page(params[:page]).per(200).order("published DESC")
      end
    else
      @resultsReceived_title = false
      @sqlResults_title = []
    end

     if params[:commit] == "Search Description"
        # Great, now lets figure out what sort of query we're after
        @searchQuery_descr = params[:d]
        @resultsReceived_descr = true
        if 
           @sqlResults_descr_published_size = Product.where("long_descr like ? AND published = ?", "%" + params[:d] + "%", '1')
           @sqlResults_descr_size = Product.where("long_descr like ?", "%" + params[:d] + "%")
           @sqlResults_descr = Product.where("long_descr like ?", "%" + params[:d] + "%").page(params[:page]).per(200).order("published DESC")
        end
      else
        @resultsReceived_descr = false
        @sqlResults_descr = []
      end

      if params[:commit] == "Search Category Name"
          # Great, now lets figure out what sort of query we're after
          @searchQuery_cat = params[:a]
          @resultsReceived_cat = true
          if 
             @sqlResults_cat_published_size = Product.where("category_names like ? AND published = ?", "%" + params[:a] + "%", '1')  
             @sqlResults_cat_size = Product.where("category_names like ?", "%" + params[:a] + "%")
             @sqlResults_cat = Product.where("category_names like ?", "%" + params[:a] + "%").page(params[:page]).per(200).order("published DESC")
          end
        else
          @resultsReceived_cat = false
          @sqlResults_cat = []
        end

        if params[:commit] == "Search ID Str"
            # Great, now lets figure out what sort of query we're after
            @searchQuery_idstr = params[:i]
            @resultsReceived_idstr = true
            if 
               @sqlResults_idstr_published_size = Product.where("id_str like ? AND published = ?", "%" + params[:i] + "%", '1')  
               @sqlResults_idstr_size = Product.where("id_str like ?", "%" + params[:i] + "%")  
               @sqlResults_idstr = Product.where("id_str like ?", "%" + params[:i] + "%").page(params[:page]).per(200).order("published DESC")
            end
          else
            @resultsReceived_idstr = false
            @sqlResults_idstr = []
          end

    # Render the page when we're done.
    respond_to do |format|
      format.html
    end

  end
end 
```

也可以做一个 Product.where("title like ? OR categories like ? **AND published = ?** ", "%" + params[:q] + "%", "%" + params[:q] + " %", **'1'** ).page(params[:page]).per(200).order("已发布 DESC")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:58:14.817

**表格** 4 表格是多余的。实现单选按钮直接发送，表单为 param `:in`，搜索词为`:q`.

```
<%= form_tag("/search", :method => "get") do %>
  <%= label_tag(:q, "Search:") %>
  <%= text_field_tag(:q) %>
  <% [ 'product title', 'product description', 'categories', 'ID string' ].each do |in| %>
    <br>
    <%= radio_button_tag 'in', in %>
    <%= in.humanize %>
  <% end %>
  <%= submit_tag("Search") %>
<% end %> 
```

如果您坚持在每种搜索类型中放置不同的按钮文本，请在单选按钮上使用 javascript 挂钩来更改它。

**控制器**。将搜索抽象为模型中的命名范围（见下文）。由于每种类型的搜索都收集相同的产品模型实例，因此最佳实践是在`Product`. 然后你的控制器看起来像：

```
def index
  @result_scope = Product.search(params[:in],params[:q])
  @results = @result.page(params[:page]).per(200).order("published DESC")
  @results_size = @result.count
  @results_published_size = @result.published.size
end 
```

我省略了 resultreceived 等变量，因为这可以在视图中计算出来`params[:in]`。为此使用辅助方法，然后在索引视图模板中调用它。你也可以通过这个来了解@results 中放入了哪个结果集合。（如果您根本需要知道，因为无论我如何搜索结果产品，您都可能以相同的方式呈现结果产品。）所以我只使用一个变量将结果传递给视图。

如果您使用 rails 默认渲染并且您的视图模板具有正确的路径（这称为隐式渲染），则此部分在操作中是不必要的：

```
# Render the page when we're done.
respond_to do |format|
  format.html
end 
```

**模型**

```
class Pruduct < ActiveRecord::Base
  # ...
  scope :search, lambda { |q,in|
    #...
  }
  scope :published, where(published: true)
end 
```

希望这可以帮助。

# android - 软键盘打开时Android对话框布局挤压

> ID：11074792
> 
> 赞同：2
> 
> 时间：2012-06-17T21:08:19.920
> 
> 标签：android, layout, dialog

我有一个打开对话框的活动，对话框类扩展了 Dialog。使用 dialog.show。

现在 - 当软键盘膨胀所有布局挤压时，而不是在对话框顶部打开键盘。

在对话框的布局中，我在线性布局中有 3 个滚动视图（其中只有 1 个可见）。

我尝试使用： dialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);

但它不起作用。

约夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T22:05:39.293

查看您可以在清单中使用的此属性。您可能希望为该活动使用adjustPan：http: [//developer.android.com/guide/topics/manifest/activity-element.html#wsoft](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-12T21:32:21.047

我遇到了同样的问题，我尝试了每一个：

1 - **android:windowSoftInputMode="adjustPan"** -> Manifest（或 adjustNothing）上的活动标签或对话框布局 xml 文件的根标签中的相同属性

2- **dialog.getWindow ().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN); （或 SOFT_INPUT_ADJUST_NOTHING）**

3- 在对话框的布局 xml 文件中，设置 android:windowFullscreen="true"。

在许多情况下，它们中的每一个都得到了解决。但是对于对话场景，类似于您的问题，我唯一有效的解决方案是：

```
 DisplayMetrics displayMetrics = new DisplayMetrics();
    activity.getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
    int heightPx = displayMetrics.heightPixels;
    int widthPx = displayMetrics.widthPixels;
    dialog.getWindow().setLayout(widthPx, heightPx); 
```

为给定的活动和对话框的布局文件在清单上设置了**adjustPan 。**

# php - PHP 视频上传表单超时

> ID：11074793
> 
> 赞同：0
> 
> 时间：2012-06-17T21:08:21.980
> 
> 标签：php, forms, video, upload, timeout

我正在尝试编写一个简单的脚本，该脚本允许我将不同类型的媒体上传到 Web 服务器，其中包括当前的视频和照片格式。我遇到的问题是当我尝试上传视频时，页面上的表单似乎无法提交。就像我单击提交按钮一样，页面会挂起片刻，然后返回到显示的表单，就像未提交一样。

我试图增加 $max_file_size 中的 fileszie 但这没有任何效果，它似乎没有达到使用它的地步。

我也在互联网上搜索过，它建议我使用代码顶部列出的“ini_set”功能来排除任何 PHP 表单提交问题——这些似乎没有效果。

```
<?php
ini_set('upload_max_filesize', '45M');  
ini_set('post_max_size', '45M');  
ini_set('max_input_time', 30000);  
ini_set('memory_limit', '45M');

$file_types_array=array("avi", "JPG", "jpeg", "flv", "mpeg", "FLV"); 
// File Size maximum set in bytes
$max_file_size=35645847; 
// Test directory created on the server to allow for uploads
// potential to direct to user spercific areas for secuirty concerns
$upload_dir="uploads\\"; 
// Holds Unix Time in seconds, used for a unique stamp per upload to
// avoud multiple images/videos having the same ID
$stamp = time();
// Unique User ID - 123 for testing
$UserID = 123;
/* If the form is not submitted, display the form */
if(!isset($_POST["submitted"])){ 
    $form = "<form action='' method='post' enctype='multipart/form-data'>Upload files:<br /><input type='hidden' name='submitted' value='TRUE' id='".time()."'><input type='hidden' name='MAX_FILE_SIZE' value='".$max_file_size."'>"; 
        $form .= "<input type='file' name='file[]'><br />"; 
    $form .= "<input type='submit' value='Upload'><br />Valid file type(s): "; 
    // Displays the valid file types set in $file_types_array
        for($x=0;$x<count($file_types_array);$x++){ 
            if($x<count($file_types_array)-1){ 
                $form .= $file_types_array[$x].", "; 
            }else{ 
                $form .= $file_types_array[$x]."."; 
            } 
        } 
    $form .= "</form>"; 
    echo($form); 
}else{ 
    foreach($_FILES["file"]["error"] as $key => $value){
        if($_FILES["file"]["name"][$key]!=""){ 
            if($value==UPLOAD_ERR_OK){ 
                $fileID = $_FILES["file"]["name"][$key]; 
                $filename = explode(".", $_FILES["file"]["name"][$key]); 
                $filenameext = $filename[count($filename)-1]; 

    // Checks for file extension        
    $file_ext_allow = FALSE; 
    for($x=0;$x<count($file_types_array);$x++){ 
        if($filenameext==$file_types_array[$x]){ 
            $file_ext_allow = TRUE; 
        } 
    } 
    if($file_ext_allow){ 
        if($_FILES["file"]["size"][$key]<$max_file_size){ 
        $fileWrite = $UserID."_".$stamp.".".$filenameext; 
            if(move_uploaded_file($_FILES["file"]["tmp_name"][$key], $upload_dir.$fileWrite)){ 
                echo("File uploaded successfully.<br />"); 
            }else{  // Catch for unprepared error
                echo($fileID." was not successfully uploaded<br />"); 
            } 
            }else{ // Catch for File Size too big
                echo($fileID." was too big, not uploaded<br />"); 
            } 
            }else{ // Catch for bad File Name
                echo($fileID." had an invalid file extension, not uploaded<br />"); 
            } 
            }else{ // Successful Output
                echo($fileID." was not successfully uploaded<br />"); 
            } 
        } 
    } 
}
?> 
```

任何关于这个主题的帮助将不胜感激，因为我已经盯着这段代码太久了......

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:54:25.950

我不会使用 PHP 上传大文件，我会考虑使用类似的东西[或](http://code.google.com/p/swfupload/)使用 HTML5 上传大文件。您仅限于使用普通的旧表单上传可以做的事情，最终用户不知道发生了什么。

# ruby-on-rails - 无法安装 ruby -debug-base19x gem

> ID：11074794
> 
> 赞同：17
> 
> 时间：2012-06-17T21:08:24.633
> 
> 标签：ruby-on-rails, ruby, debugging

当我尝试安装 ruby​​-debug-base19x gem 以使用 RubyMine IDE 调试我的应用程序时，我收到以下错误消息，有人可以帮助我吗？

我正在使用 Mac OS X 10.7.4

```
/Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for rb_method_entry_t.body in method.h... no
checking for vm_core.h... no
/Users/danilobarsotti/.rvm/gems/ruby-1.9.3-p194/gems/ruby_core_source-0.1.5/lib/ruby_core_source.rb:39: Use RbConfig instead of obsolete and deprecated Config.
checking for rb_method_entry_t.body in method.h... no
checking for vm_core.h... yes
checking for iseq.h... yes
checking for insns.inc... yes
checking for insns_info.inc... yes
checking for eval_intern.h... yes
creating Makefile

make
compiling breakpoint.c
compiling ruby_debug.c
ruby_debug.c:24: error: conflicting types for ‘rb_iseq_compile_with_option’
/Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby-1.9.3-p194/vm_core.h:505: error: previous declaration of ‘rb_iseq_compile_with_option’ was here
ruby_debug.c: In function ‘call_at_line_unprotected’:
ruby_debug.c:474: warning: implicit conversion shortens 64-bit value into a 32-bit value
ruby_debug.c: In function ‘filename_cmp’:
ruby_debug.c:538: warning: implicit conversion shortens 64-bit value into a 32-bit value
ruby_debug.c:539: warning: implicit conversion shortens 64-bit value into a 32-bit value
ruby_debug.c: In function ‘optional_frame_position’:
ruby_debug.c:1695: warning: implicit conversion shortens 64-bit value into a 32-bit value
ruby_debug.c: In function ‘do_jump’:
ruby_debug.c:2310: warning: implicit conversion shortens 64-bit value into a 32-bit value
ruby_debug.c: In function ‘context_jump’:
ruby_debug.c:2378: warning: comparison between signed and unsigned
ruby_debug.c:2392: warning: comparison between signed and unsigned
make: *** [ruby_debug.o] Error 1 
```

**编辑**

当我尝试使用“RubyMine Gem Tools”（在 RubyMine IDE 内）安装 gem 时，我收到以下消息：

> 运行开发时出错：myproject: 无法安装 Gems。未安装以下 gem：/Applications/RubyMine.app/rb/gems/ruby-debug-base19x-0.11.30.pre10.gem：安装 ruby​​-debug-base19x-0.11.30.pre10.gem 时出错：错误：失败构建 gem 原生扩展。/Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 检查 rb_method_entry_t.called_id 在 method.h... *** extconf.rb 失败 ***由于某种原因无法创建 Makefile，可能缺少必要的库和/或头文件。检查 mkmf.log 文件以获取更多详细信息。您可能需要配置选项。提供的配置选项： --with-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=$ {opt-dir}/lib --with-make-prog --without-make-prog --srcdir=。--curdir --ruby=/Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/bin/ruby --with-ruby-dir --without-ruby-dir --with-ruby-include - -without-ruby-include=${ruby-dir}/include --with-ruby-lib --without-ruby-lib=${ruby-dir}/lib /Users/danilobarsotti/.rvm/rubies/ruby- 1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError) You have to install development tools first. from /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:491:in` block in try_compile' 来自 /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9。 1/mkmf.rb:443:in `with_werror' from /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:491:in` try_compile' 来自 /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:1002:in `block in have_struct_member' from /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:790:in` block in checks_for' 来自 /Users/danilobarsotti/.rvm/rubies /ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone' from /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in` open' 来自 /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9 .1/mkmf.rb:284:in `block in postpone' from /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in` open' 来自 /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:280:in checks_for `postpone' from /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:789:in` ' 来自 / Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:1001:in `have_struct_member' from extconf.rb:6:in`block in '来自 extconf.rb:31:in `call' from extconf.rb:31:in`block in '来自 /Users/ danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:527:in `with_cppflags' from extconf.rb:30:in`' Gem 文件将继续安装在 /Users/danilobarsotti/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug-base19x-0.11.30.pre10 中以供检查。结果记录到 /Users/danilobarsotti/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug-base19x-0.11.30.pre10/ext/ruby_debug/gem_make.out /Users/danilobarsotti/Library/Preferences /RubyMine40/rb/linecache19-0.5.13.gem：安装 linecache19-0.5.13.gem 时出错：错误：无法构建 gem 原生扩展。/Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 检查 vm_core.h... *** extconf.rb 失败 ***由于某种原因无法创建 Makefile，可能缺少必要的库和/或头文件。检查 mkmf.log 文件以获取更多详细信息。您可能需要配置选项。提供的配置选项： --with-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=$ {opt-dir}/lib --with-make-prog --without-make-prog --srcdir=。--curdir --ruby=/Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/bin/ruby --with-ruby-dir --without-ruby-dir --with-ruby-include - -without-ruby-include=${ruby-dir}/include --with-ruby-lib --without-ruby-lib=${ruby-dir}/lib /Users/danilobarsotti/.rvm/rubies/ruby- 1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError) You have to install development tools first. from /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:506:in` try_cpp' 来自 /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/ mkmf.rb:931:in `block in have_header' from /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:790:in` 阻止从 /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone' from /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in` open' 来自 /Users/danilobarsotti/.rvm/rubies /ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone' from /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in` open' 来自 /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9 .1/mkmf.rb:280:in checks_for `postpone' from /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:789:in` ' 来自 /Users/danilobarsotti/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:930:in `have_header' from extconf.rb:15:in`block in '来自/Users/danilobarsotti/.rvm/gems/ruby-1.9.3-p194/gems/ruby_core_source-0.1.5/lib/ruby_core_source.rb:18:in `call' from /Users/danilobarsotti/.rvm/gems/ruby-1.9.3-p194/gems/ruby_core_source-0.1.5/lib/ruby_core_source.rb:18:in` create_makefile_with_core' from extconf.rb:19:in ` ' Gem 文件将继续安装在 /Users/danilobarsotti/.rvm/gems/ruby-1.9.3-p194/gems/linecache19-0.5.13 以供检查。结果记录到 /Users/danilobarsotti/.rvm/gems/ruby-1.9.3-p194/gems/linecache19-0.5.13/ext/trace_nums/gem_make.out

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-18T00:42:19.393

[1) 尝试从http://rubyforge.org/frs/?group_id=8883](http://rubyforge.org/frs/?group_id=8883)下载 linecache19-0.5.13.gem 和 ruby​​-debug-base19-0.11.26.gem

2) 宝石安装 linecache19-0.5.13.gem

3) gem install ruby​​-debug-base19-0.11.26.gem -- --with-ruby-include=[your ruby​​ source] 或者你可以试试**gem install ruby​​-debug-base19x --pre**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T23:06:52.497

你可以试试

```
gem install ruby-debug-ide19 
```

（根据[维基](https://github.com/ruby-debug/ruby-debug-base19)）。这在 OS X 10.7.4 上为我安装，但您可能想试一试[调试器](https://github.com/cldwalker/debugger)gem ( `gem install debugger`)。与大多数 ruby​​-debug* gem 不同，它实际上得到了维护。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T09:06:32.890

只需从您的 gems/gemset 中删除所有与调试相关的 gem，然后让 RubyMine 重新安装正确的 gem。为我工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-22T15:37:08.040

@gamov 的解决方案对我有用，只需让 RubyMine 安装调试所需的所有 gem。

如果您自己安装所有 gem，确保版本正确很重要。

无论如何，这里是 RubyMine 调试我的代码真正需要的 gem 列表：

宝石清单

*   大十进制 (1.1.0)
*   调试器-ruby_core_source (1.2.3)
*   io 控制台 (0.3)
*   json (1.5.5)
*   小测试 2.5.1)
*   耙子 (0.9.2.2)
*   rdoc (3.9.5)
*   ruby-debug-base19x (0.11.30.pre12)
*   红宝石调试IDE 0.4.17）

希望这会有所帮助，并希望更多的人不必诉诸于我们过去一直在做的旧方式。

请确保在尝试使用 RubyMine 进行调试之前安装 DevKit。您应该能够从 ruby​​ 安装程序页面获取 DevKit（注意：不同的 DevKit 版本可用于不同的 ruby​​ 版本）解压缩 DevKit Zip 文件并在您将 DevKit 解压缩到的目录中执行以下操作：'Ruby dk. rb init' 'Ruby dk.rb 安装'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-25T11:14:24.237

我遇到了一个不同的问题，它阻止了我安装 ruby​​-debug-base19x，但导致了与 danilodeveloper 不同的特定错误。在这里提到它，因为那些有我问题的人可能会首先找到这个问题：

RubyMine 5.4.3.2.1 [喜欢那个版本号] 安装了 debugger-ruby_core_source gem (1.1.9) 的版本，对于它想要的 ruby​​-debug-base19x (0.11.30.pre12) 和/或我正在使用的红宝石（1.9.3-p484）。解决方案是

```
gem update debugger-ruby_core_source 
```

（将其带到 1.3.2）并让 RubyMine 尝试再次安装 ruby​​-debug-base19x，它成功了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-23T21:25:44.643

我在 ruby​​mine 中设置了错误的 ruby​​ 版本；在菜单栏中转到“Rubymine”->“preferences”->“Ruby SDK and Gems”并确保它指向您期望的 Ruby 版本。

在这里找到了这个想法：[https ://stackoverflow.com/a/21056201/1462575](https://stackoverflow.com/a/21056201/1462575)

# php - 当字符串包含标点符号时检查字符串是否相等

> ID：11074795
> 
> 赞同：0
> 
> 时间：2012-06-17T21:08:32.057
> 
> 标签：php, string, equality

当标点符号在字符串中时，PHP可以检查是否相等？我尝试与 比较，但`hello'`与比较时`hello'`它们不相等`==`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:10:26.987

它正确地比较字符串：

```
"hello'" == "hello'" // true 
```

[键盘](http://codepad.viper-7.com/llwSq1)

你一定做错了什么。也许您`'`在单引号字符串中使用而没有像这样转义它`\'`并且得到奇怪的结果。

# php - PHP - 获取变量名称？不是它的内容……它的名字？

> ID：11074797
> 
> 赞同：0
> 
> 时间：2012-06-17T21:09:17.720
> 
> 标签：php, variables

请看这个例子：

```
if (strlen($_SESSION['userDetails']['THISNAME']) == 0)
{
    $_SESSION['userDetails'][''.$THISNAME.'Error'] = "autofocus";
    include "$docRoot/html/forms/reg/user_info.html.php";
    exit();
} 
```

我将如何使用`THISNAME`我所做的名称来创建一个在名称上附加错误的新变量，所以在本例中输出将是`THISNAMEError`？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T21:22:21.723

您已经知道“THISNAME”以便测试它的长度。为什么你不能把它再放在你想要的地方？

不过，作为更一般的事情，您可以使用 获取数组的键列表[`array_keys()`](http://php.net/array-keys)，或使用 循环遍历它们[`foreach($input as $key=>$value)`](http://php.net/foreach)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T21:10:48.323

```
//if(strlen($_SESSION['userDetails'][$THISNAME]) == 0)
//|
//|->if you are checking for $THISNAME,
//   why you then create a new varialbe $THISNAME.'Error' ?

//if(strlen($_SESSION['userDetails']["$THISNAME_Error"]) == 0) {
if( ! isset($_SESSION['userDetails']["$THISNAME_Error"])) {

   $_SESSION['userDetails'][$THISNAME.'_Error'] = "autofocus";
   //or
   $_SESSION['userDetails']["$THISNAME_Error"] = "autofocus";

} 
```

应该管用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T21:26:22.737

```
$required_fields = array( 'name', 'email', 'password', 'password_verification' );
$errors = array();

foreach ( $required_fields as $field )
{
   if ( !isset($_POST[$field]) )
   {
      $errors[$field] = 'not set';
   }
}

if ( count($errors) > 0 )
{
    // there will be errors in thy forms
} 
```

这是你想要的 ？

# caching - 缓存策略

> ID：11074798
> 
> 赞同：1
> 
> 时间：2012-06-17T21:09:31.990
> 
> 标签：caching, outputcache

浏览器缓存 

整页缓存

边缘侧包括 (ESI)

应用程序输出缓存

应用程序对象缓存

数据库查询缓存

一些缓存策略 - 我几乎都了解它们，但应用程序对象缓存？我如何决定哪一个是最好的？

我只是想找出一个好的组合 - 以获得良好的性能和可扩展性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:32:04.830

这些都是正交的。您描述的缓存都可以同时实现。更多的缓存通常更好。计算机系统在所有级别都有缓存，从 CPU 内的多级内存缓存一直到您在此处描述的应用程序或数据特定缓存。首先实现哪一个在很大程度上取决于计算或获取的数据成本高昂、使用该数据的频率以及通过缓存它可以加快多少速度。

一个好的缓存的关键是它应该比它正在缓存的工作快得多，并且它应该缓存经常被重用的东西。您还必须有一种方法可以从缓存中删除过期数据。

* * *

`Application Object Caching`指的是在不同层（不同程序、集群中的计算机等）之间传输的对象。这些对象可能会缓存在接收端，因此不需要在每次访问时都传输它们。

# mongodb - Mongo / Mongoose 如何扩展 DBRef

> ID：11074799
> 
> 赞同：0
> 
> 时间：2012-06-17T21:09:32.927
> 
> 标签：mongodb, schema, mongoose, database-schema, dbref

假设有一个多人游戏定义如下：

```
 var GameSchema = new Schema({
      players : {type : [Schema.ObjectID], ref : 'User', required : true}
    }); 
```

我想知道为每个用户存储分数的最佳方式是什么，因为我知道每个游戏都有自己的分数。这里有几个选项：

1.  添加一个单独的属性数组

    ```
    var GameSchema = new Schema({
      players : {type : [Schema.ObjectID], ref : 'User', required : true}
     ,scores  : {type : [Number]}
    }); 
    ```

    创建关系的唯一方法是引用索引位置。似乎不是一个好主意。

2.  添加播放器嵌入式文档

    ```
    var PlayerSchema = new Schema({
      user  : {type : [Schema.ObjectID], ref : 'User', required : true}
     ,score : {type : Number, default : 0 }
    });

    var GameSchema = new Schema({
      players : {type : [PlayerSchema], required : true}
    }); 
    ```

    我对这种方法的主要问题是用户信息被埋得更深了。不得不调用 game.players.user 而不是 game.players 似乎也不对。

3.  将 DBRref 扩展为嵌入式文档？

    理想情况下，我应该能够做到

    ```
    var PlayerSchema = new Schema({
      _id  : {type : [Schema.ObjectID], ref : 'User'}
     ,score : {type : Number, default : 0 }
    });

    var GameSchema = new Schema({
      players : {type : [PlayerSchema], required : true}
    }); 
    ```

    这种方法本质上类似于#2，只是将用户直接引用为 Player 的 id。我假设这个“映射”用户到玩家，以便可以调用 game.players[player_id].score。不幸的是，上面的代码不起作用。

什么是最佳做法？还有其他选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:35:22.400

MongooseArrays 上有一种`id`方法可以提供帮助。这个[要点](https://gist.github.com/2955422)是一个工作示例。它更接近，虽然不是完全干净的 b/c _id 需要保持分开。

当您填充字段时，您想要的 ( `game.players[player_id].score`) 并没有真正意义 b/c，它将完全替换为查询结果。

# php - PHP：常量作为函数中的变量

> ID：11074800
> 
> 赞同：8
> 
> 时间：2012-06-17T21:09:39.390
> 
> 标签：php, constants, type-hinting

我正在尝试使用常量作为函数参数，是否可以检查此常量的类型。

我想要的示例：

```
class ApiError {
  const INVALID_REQUEST = 200;
}

class Response {
  public function status(ApiError $status) {
    //function code here
  }
} 
```

利用：

```
$response = new Response();
$response->status(ApiError::INVALID_REQUEST); 
```

这应该检查给定的 $status 是类 ApiError 的常量。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T21:35:09.670

正如其他人提到的，没有通用的解决方案。但是，如果您想以一种非常干净的方式进行操作，请为您正在处理的每个“对象”建模（= 每个可能的状态），例如：

```
interface ApiError {   // make it an abstract class if you need to add logic
    public function getCode();
}

class InvalidRequestApiError implements ApiError {
    public function getCode() {
        return 200;
    }
}

// Usage:
$response = new Response();
$response->status( new InvalidRequestApiError() );

class Response {
    public function status(ApiError $status) {
        echo "API status: " . $status->getCode();
    }
    // ...
} 
```

这给您留下了很多类，因为您封装了简单的数字，而且还具有输入提示的能力。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T21:11:57.633

您可以使用`in_array()`针对白名单值进行测试，当您需要验证特定值集的输入时，这是推荐的策略：

```
// Test if it is in an array of valid status constants...
$valid_statuses = array(
   ApiError::INVALID_REQUEST, 
   ApiError::INVALID_SOMETHINGELSE, 
   ApiError::STATUS_OK
);
if (in_array($status, $valid_statuses)) {
   // it's an acceptable value
} 
```

要将类的所有常量列入白名单，您可以使用反射并从`ApiError` [通过检索常量`ReflectionClass::getconstants()`](http://www.php.net/manual/en/reflectionclass.getconstants.php)

```
$refl = new ReflectionClass('ApiError');
$valid_statuses = $refl->constants(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-13T12:02:51.020

另一种方法是更改​​呼叫。如果我们想检查 const 是否存在，这行就太晚了。 `$response->status(ApiError::INVALID_REQUEST);`

php 解释器还将检查 const 是否存在，并会因致命错误而死。使用 try() 是无法捕捉到的。

所以我建议使用字符串作为参数来检查是否存在使用**定义（）**和**常量（）**

```
class ApiError {
  const INVALID_REQUEST = 200;
}

class Response {
  public function status($status) {
    if (!defined('ApiError::'.$status)) {
      return false; // Or throw Exception / other error handling
    }

    $errorCode = constant('ApiError::'.$status);

    //function code here
    return true;
  }
} 
```

然后使用将如下所示：

```
$response = new Response();
$response->status('INVALID_REQUEST'); 
```

不好的是这个解决方案没有类型提示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-13T18:24:36.780

我最喜欢这种方法：

```
class NoticeType {
    const INFO = 'neutral';
    const WARN = 'alert';
    const FAIL = 'critical';
    const PASS = 'success';
    const LITE = 'brand';

    private $_type;

    function __construct($NOTICE_constant)
    {
        if (!preg_match('/neutral|alert|critical|success|brand/', $NOTICE_constant))
            throw new \Exception('Invalid parameter for '.__CLASS__.' constructor');
        $this->_type = $NOTICE_constant;
    }
    function getType() {
        return $this->_type;
    }
    function __toString() {
        return $this->_type;
    }
    static function INFO () {
        return new NoticeType(self::INFO);
    }
    static function WARN () {
        return new NoticeType(self::WARN);
    }
    static function FAIL () {
        return new NoticeType(self::FAIL);
    }
    static function PASS () {
        return new NoticeType(self::PASS);
    }
    static function LITE () {
        return new NoticeType(self::LITE);
    }
} 
```

用法非常简单，您必须不遗余力地搞砸：

```
function test (NoticeType $n) {
    echo ($n == NoticeType::INFO)."\n";
}

test (NoticeType::INFO()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-06T04:32:16.433

[SplEnum](http://php.net/manual/en/class.splenum.php)可以提供帮助。PHP 文档中的示例：

```
class Month extends SplEnum {
    const __default = self::January;

    const January = 1;
    const February = 2;
    const March = 3;
    const April = 4;
    const May = 5;
    const June = 6;
    const July = 7;
    const August = 8;
    const September = 9;
    const October = 10;
    const November = 11;
    const December = 12;
}

echo new Month(Month::June) . PHP_EOL;

try {
    new Month(13);
} catch (UnexpectedValueException $uve) {
    echo $uve->getMessage() . PHP_EOL;
} 
```

输出：

```
6
Value not a const in enum Month 
```

# php - 在没有bom的情况下以utf-8保存文件

> ID：11074801
> 
> 赞同：0
> 
> 时间：2012-06-17T21:09:42.273
> 
> 标签：php, file, utf-8, save

我有一个越南语表格，它将数据提交到网络服务。此 Web 服务将该数据保存在一个文件中。但文件总是包含“0000”，没有别的......

在没有bom的情况下以utf-8保存数据编码的正确方法是什么？谢谢

这是我的 webservice.php：

```
if ($_SERVER["REQUEST_METHOD"] == "POST"){
    $data = $_POST["author"] . "\n" . $_POST["title"] . "\n" + $_POST["category"] . "\n" + $_POST["article"];
    $fileName = mb_convert_encoding($_REQUEST["author"], "UTF-8", "auto");
    $data = mb_convert_encoding($data, 'UTF-8', "auto");
    file_put_contents($fileName, $data, FILE_APPEND | LOCK_EX);
    print $data;
}else{
    invalidRequest();
} ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:19:38.557

您缺少 file_put_contents() 的文件名参数，您的代码不会将任何内容保存到文件中。

* * *

**`<edit>`**

也看看这个：

```
 + $_POST["category"] . "\n" + $_POST["article"];
  ^                           ^ 
```

您正在使用数学运算符 + ，因此您的字符串将被转换为数字（在这种情况下为 0）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T21:24:51.477

您的表格应包含

```
<form ... accept-charset="UTF-8"> 
```

然后你可以在没有 mb_convert_encoding() 的情况下写入文件。但永远不要使用

```
$fileName = $_REQUEST["author"]; 
```

！就像是

```
$fileName = $author_names[$_REQUEST["author_id"]]; 
```

应该是安全的。

# java - 如果名称变量带有下划线前缀，则 Bean 验证不起作用

> ID：11074802
> 
> 赞同：4
> 
> 时间：2012-06-17T21:09:44.413
> 
> 标签：java, jsf, glassfish, bean-validation

我正在尝试一些 bean 验证，但我偶然发现了“奇怪”的行为。我正在使用 Glassfish 和 Primefaces 作为前端（如果有什么不同的话）。在我的项目的其他地方，我使用 Hibernate-validator，我不确定它是否正在验证 JSF（否则它是 Glassfish 中的默认设置）。我有一个托管 bean：

```
@javax.faces.bean.ManagedBean
@javax.faces.bean.ViewScoped
public class TestBean
{
    @Size(min=8)
    private String _testString;

    public String getTestString()
    {
        return _testString;
    }

    public String setTestString(String testString)
    {
        _testString = testString;
    }

    public void doSomethind()
    {
        // Do something with the test string
    }
} 
```

以及一个包含以下内容的 JSF 页面：

```
<h:form id="testForm">
    <h:outputLabel for="testInput" value="Input:"/>
    <p:inputText id="testInput" value="#{testBean.testString}"/>
    <p:message id="testInputMsg" for="testInput"/>
    <p:commandButton value="Aanmaken" action="#{testBean.doSomething}" update="@form"/>
</h:form> 
```

`_testString`不会以这种方式得到验证。但是，当我将字段更改为：

```
@Size(min=8)
private String testString; 
```

或者当我注释 getter 而不是字段时：

```
private String _testString;

@Size(min=8)
public String getTestString()
{
    return _testString;
} 
```

按照我们的编码指南，我们必须在私有字段前加上下划线。这让我只有一个选择；注释吸气剂。

有人可以解释为什么它会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T21:22:31.410

从[JSR 303 规范](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)：

> ### 3.2\. 约束声明
> 
> 约束声明主要通过注释放置在类或接口上。约束注释（参见第 2.1 节）可以应用于类型、类型的任何字段或任何**符合 JavaBeans 的**属性。

^(*（强调我的）*)

来自[JavaBeans 规范](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)：

> ### 8.3.1 简单属性
> 
> 默认情况下，我们使用设计模式通过查找以下形式的方法来定位属性：
> 
> ```
> public <PropertyType> get<PropertyName>();
> public void set<PropertyName>(<PropertyType> a); 
> ```

因此，使用 属性名称`_testString`，它正在寻找一个调用的 getter/setter `get_testString()`，并且`set_testString()`在您的情况下不存在。

您的代码指南与 JavaBeans 规范冲突，因此当您将注释放在名称与 JavaBeans 规范冲突的属性上时，JSR-303 bean 验证根本不起作用。JSR-303 找不到与属性名称关联的 getter/setter，因此在调用它们时将无法执行验证。

要么修复你的代码指南以符合标准，要么将注释放在 getter 上并使用它。另请参阅[标准 Java 代码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)。

# ruby-on-rails - 无法登录到 Active Admin

> ID：11074806
> 
> 赞同：0
> 
> 时间：2012-06-17T21:10:37.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

每次我重置和播种我的数据库时，它都会清除 Active Admin 的标准 admin@example.com 登录。

在我的种子文件中，我将用户设置为具有角色：admin 但此登录仅适用于应用程序的前端，而不适用于后端活动管理员登录。我该如何补救？谢谢！

注意*我正在使用 Devise + cancan + rolify

种子.rb

```
user2 = User.create! :name => 'Second User', :email => 'user2@example.com', :password => 'please', :password_confirmation => 'please', :confirmed_at => Time.now.utc
puts 'New user created: ' << user2.name
user.add_role :admin 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T21:31:21.357

Active Admin 通常有另一个名为 admin_users 的用户表。请在您的控制台中尝试以下操作

```
user = AdminUser.create :email => 'user2@example.com', :password => 'please' 
```

# gsm - 用于禁用无线电信号强度指示等的 AT 命令？

> ID：11074808
> 
> 赞同：2
> 
> 时间：2012-06-17T21:10:53.870
> 
> 标签：gsm, at-command, rssi

我正在开发一个使用 GSM 调制解调器和我的电脑发送和接收 SMS 的程序。

我已经开始发送和接收工作 - 很好。

有时，由于调制解调器混淆了有关无线电信号强度指示等信息，我的程序被发送到完全崩溃的状态，同时还为我的程序提供消息的十六进制代码。

我的代码可以很好地处理十六进制代码。但是我在解码字节流时看到了以下行弹出：

```
^RSSI: 2 
```

到目前为止，我已经看到它发出了 1 到 10 之间的值。

是否有可以禁用它们的 AT 命令？我不需要他们。

或者替代方案：它们是否有通用语法，所以我可以在解码之前将它们过滤掉？

我倾向于过滤解决方案。但是，如果我知道调制解调器何时以以下形式发送：“^SOMETHING：xxx”，那么这将更容易实现，那么很高兴知道它是否总是跟进是一个分隔符，例如“\r” .

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T07:12:10.073

您应该尝试使用 AT^CURC=0 关闭定期消息。

关于 AT^CURC 命令的信息：

> AT^CURC? 周期性状态消息的当前设置
> 
> AT^CURC=? 看看你可能的价值观是什么
> 
> AT^CURC=0 关闭周期性状态消息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-10T22:10:05.260

解决这种情况的最佳方法是将响应的那部分替换为空字符串，否则，即使发送用于禁用它的命令是否有效，也很难检查。

这个正则表达式将匹配所有这些。理想情况下，您可以用空字符串替换它们。

```
(\\n|\\r|\\r\\n)\\^.*(\\n|\\r|\\r\\n) 
```

# maven - maven 生命周期配置

> ID：11074811
> 
> 赞同：0
> 
> 时间：2012-06-17T21:11:51.620
> 
> 标签：maven, plugins, lifecycle

我正在玩 maven 插件，特别是我正在尝试为 eclipse 开发一个自定义的 maven 插件。一切顺利，它从控制台构建......等直到：`

> “生命周期配置未涵盖插件执行”

出现。我研究并发现：

[http://wiki.eclipse.org/M2E_plugin_execution_not_covered](http://wiki.eclipse.org/M2E_plugin_execution_not_covered)；

显然我不想忽略插件的执行，执行指令似乎不起作用，至于项目配置器的委托，我找不到

> AbstractJavaProjectConfigurator.java。

我在 org.eclipse.jdt 、 core 和 source 中进行了搜索，但没有提及我正在搜索的内容，我能找到的最佳匹配是在这里：

[http://git.eclipse.org/c/m2e/m2e-core.git/tree/org.eclipse.m2e.jdt/src/org/eclipse/m2e/jdt](http://git.eclipse.org/c/m2e/m2e-core.git/tree/org.eclipse.m2e.jdt/src/org/eclipse/m2e/jdt)

总之，我想要实现的是：“从 m2e 1.1 开始，maven 插件开发人员能够提供生命周期映射元数据作为插件本身的一部分。” 如我插入的第一个链接所述。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:22:05.933

要简单地绕过 mojo 执行或告诉 m2e 通过 maven embedder 简单地执行您的 mojo，您需要以下内容：

1.  如您的链接中所述的正确的生命周期映射。参考：[https://github.com/php-maven/maven-php-plugin/blob/master/ide-plugins/eclipse/tags/2.0.3/org.phpmaven.eclipse.core/lifecycle-mapping-metadata。但是我把它放在eclipse](https://github.com/php-maven/maven-php-plugin/blob/master/ide-plugins/eclipse/tags/2.0.3/org.phpmaven.eclipse.core/lifecycle-mapping-metadata.xml) 项目的根目录中以便能够调试它（如果你把它们放在 src 文件夹中，有时会发现那些额外的资源会失败）。

2.  将其嵌入构建的构建属性：[https ://github.com/php-maven/maven-php-plugin/blob/master/ide-plugins/eclipse/tags/2.0.3/org.phpmaven.eclipse.core /build.properties](https://github.com/php-maven/maven-php-plugin/blob/master/ide-plugins/eclipse/tags/2.0.3/org.phpmaven.eclipse.core/build.properties)

3.  通过依赖项和扩展激活：

希望这可以帮助。我也对项目配置器感到困惑。但是上面的例子不需要任何项目配置器。

# android - Android NFC Intents 没有开始我的活动

> ID：11074812
> 
> 赞同：10
> 
> 时间：2012-06-17T21:11:56.543
> 
> 标签：android, android-intent, nfc

我正在尝试编写一个简单的应用程序来与 NFC 标签进行交互，但我似乎无法让我的手机执行任何操作，只能触发默认的 NFC 标签应用程序。我真的只想能够拦截我扫描的任何标签，确定它是否有一些数据，并采取相应的行动。

现在我的清单文件看起来像

```
<uses-sdk android:minSdkVersion="10" />
<uses-feature android:name="android.hardware.nfc" android:required="true"/>
<uses-permission android:name="android.permission.NFC"/>

<application 
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".NfcActivity"
        android:label="@string/app_name">
        <intent-filter>
           <action android:name="android.intent.action.MAIN"/>
           <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
        </intent-filter>
    </activity>
</application> 
```

但是，在扫描 NFC 标签时，我从未看到活动开始。我在这里错过了什么吗？我尝试将意图过滤器放在 a`BroadcastReceiver`中，但也没有运气......

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-17T21:41:13.087

您不能让您的应用程序由您扫描的所有 NFC 标签启动。Android 将根据意图过滤器的具体程度来确定最合适的应用程序。但是，如果您的应用程序在前台运行，您可以使用[NFC 前台调度](http://developer.android.com/guide/topics/nfc/advanced-nfc.html#foreground-dispatch)来捕获所有 NFC 意图。

补充`onCreate()`：

```
mAdapter = NfcAdapter.getDefaultAdapter(this);
PendingIntent pendingIntent = PendingIntent.getActivity(
  this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0); 
```

补充`onResume()`：

```
mAdapter.enableForegroundDispatch(this, pendingIntent, null, null); 
```

补充`onPause()`：

```
mAdapter.disableForegroundDispatch(this); 
```

您可以像这样获取NFC`onNewIntent`标签：

```
Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-17T21:17:23.323

SDK 文档将此作为一个基本示例。

```
<intent-filter>
    <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <data android:mimeType="text/plain" />
</intent-filter> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-26T07:16:15.093

您期望标签以 NDEF 格式定义。所以你的程序只有在被读取的标签是 NDEF 格式时才会启动。

您可以尝试更通用的意图过滤器，例如 TAG_DISCOVERED 或 TECH_DISCOVERED。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T21:21:12.923

Android 会自动选择*最相关的应用程序*来处理扫描的 NFC 标签。您需要在您的 中更具体`intent-filter`，即只收听 TEXT-Tags、URL-Tags 或 CONTACT-Tags。这可以通过进一步指定过滤器来完成，使用您的示例， `<data android:mimeType="text/plain" />`用于 TEXT-Tags。否则，将触发默认的 NFC-Tag 应用程序。

# jquery - jquery触发器悬停在锚点上

> ID：11074815
> 
> 赞同：29
> 
> 时间：2012-06-17T21:12:15.013
> 
> 标签：jquery, triggers, hover, mouseover

我正在使用 jQuery 在 Web 环境中进行开发。

我想知道为什么

```
 $("#a#trigger").trigger('mouseenter');
 $("#a#trigger").trigger('hover');
 $("#a#trigger").trigger('mouseover'); 
```

所有这三个都无法激活我拥有的悬停功能。

```
$(function() {

        $('a#trigger').hover(function(e) {
          $('div#pop-up').show();

             }, function() {
          $('div#pop-up').hide();
        });

     });

      }); 
```

`a#trigger`是锚的名称，并且`#pop-up`是我的 web 中的一个 div 元素。

问题是我想将鼠标悬停在 FullCalendar 插件中的某些事件上，而这些功能不起作用。谢谢。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-06-17T21:15:12.290

你在正确的轨道上，问题是`#`选择器中的额外内容，只需删除第一个哈希：

```
$("a#trigger").trigger('mouseenter'); 
```

请注意，由于 ID 必须是唯一的，因此无需指定元素类型，`$('#trigger')`效率更高。

另请注意：

> **在 jQuery 1.8 中已弃用，在 1.9 中删除：**`"hover"`用作 string 简写的名称`"mouseenter mouseleave"`。它为这两个事件附加了一个事件处理程序，处理程序必须检查`event.type`以确定事件是`mouseenter`还是`mouseleave`。不要将`"hover"`伪事件名称与`.hover()`接受一两个函数的方法混淆。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-17T21:14:49.417

你的 jQuery 选择器应该写成例如

```
$('a#trigger'); 
```

代替`$('#a#trigger');`

在 jQuery 中，选择器中的 # 匹配一个 id。在这种情况下`trigger`是一个 id，但`a`它是一个 HTML 元素并且不需要前缀。

您的最终代码将是：

```
$("a#trigger").trigger('mouseenter');
$("a#trigger").trigger('hover');
$("a#trigger").trigger('mouseover'); 
```

# r - 缺失值真/假：循环中的错误不是一次性的

> ID：11074820
> 
> 赞同：1
> 
> 时间：2012-06-17T21:12:41.760
> 
> 标签：r, testing, date, if-statement, boolean

我是 R 新手，我想编码的循环中的测试有问题。使用如下所示的数据框（tabetest）：

```
 Date    25179M103
1   14977   77.7309
2   14978   77.2567
3   14979   77.7507 
```

我有：

```
> if (tabetest[3,"Date"] - tabetest[1,"Date"] > 1){ print("ok") }

[1] "ok" 
```

但：

```
j = 1 
position = 1
price = tabetest

for (i in 1:nrow(tabetest) - position){
   if (tabetest[i + position,"Date"] - tabetest[position,"Date"] > 20{
       price[i + position,j] = price[i + position,j] / price[position,j] - 1}
       position = position + 1
   } 
```

返回错误。R 表示在以下情况下需要 true/false 的缺失值：

```
 if (tabetest[i + position, "Date"] - tabetest[position, "Date"] > 
```

我在这个错误上花了很长时间，但仍然不明白它来自哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T21:22:06.077

首先，您有一个操作顺序问题。你需要用括号括起来`nrow(tabetest)-position`

以下与以下相同`c(1, 2, 3) - 1`

```
> 1:3-1
[1] 0 1 2 
```

但是，这与`c(1, 2)`

```
> 1:(3-1)
[1] 1 2 
```

但是，在您修复它之后，您仍然会遇到问题。第二次通过循环，`i`是 2 和`position`是 2。这意味着那`tabetest[i + position, "Date"]`是`NA`因为`position + i == 4`，但只有 3 行`data.frame`。

这主要是一个猜测，但也许您只想在语句中`position`的条件如下时递增：`if``TRUE`

```
for (i in 1:(nrow(tabetest)-position)){
    if(tabetest[i+position,"Date"]-tabetest[position,"Date"]>20){
        price[i+position,j]=price[i+position,j]/price[position,j]-1
        position=position+1
    }
} 
```

# objective-c - 如何在 Facebook 墙上插入标签链接

> ID：11074822
> 
> 赞同：1
> 
> 时间：2012-06-17T21:12:59.560
> 
> 标签：objective-c, ios, facebook-graph-api

 如何使用 Facebook iOS SDK 插入 html 链接，如下面的 2 个帖子？ 

[图片链接！](http://img98.imageshack.us/img98/9639/screenshot20120617at518.png)

在 Train Conductor 和 The Fleas 帖子的“itunes.apple.com”中，他们使用了 bit.ly 链接。

我尝试使用 html 标签`<a href="www.mystuff.com">`What<\a> 但它不起作用。

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"My game in iTunes", @"name",
                               @"http://www.mystuff.com", @"link",
                               @"Check out this cool game for iPhone.", @"description",
                               nil]; 
```

这段代码有效，但这只是一个普通的帖子。

# jquery - 在自身内部调用 jQuery 插件

> ID：11074824
> 
> 赞同：2
> 
> 时间：2012-06-17T21:13:21.057
> 
> 标签：jquery, jquery-plugins, plugins, comet

我正在尝试创造像彗星一样的东西。我有一个从 php 页面收集数据的插件。问题是我不知道如何调用插件本身。

如果它是一个函数，我可以这样：`function j () {setTimeout(j(), 1000);}`，但我使用的是 jQuery 插件。

这是我的插件代码：

```
(function($) {
$.fn.watch = function(ops) {
    var
        $this_ = this,
        setngs = $.extend({
            'type'  : 'JSON',
            'query' : 'GET',
            'url'   : '',
            'data'  : '',
            'wait'  : 1000
        }, ops);

        if (setngs.type === '') {
            return false;
        } else if (setngs.query === '') {
            return false;
        } else if (setngs.url === '') {
            return false;
        } else if (setngs.wait === '') {
            return false;
        } else if (setngs.wait === 0) {
            setngs.wait = 1000;
        }

        var xhr = $.ajax({
            type        : setngs.query,
            dataType    : setngs.type,
            url         : setngs.url,
            success     : function(data) {
                var i = 0;
                for (i = 0; i < data.length; i++) {
                    var html = $this_.html(), str = '<li class="post" id="post-' + data[i].id + '"><div class="inner"><div class="user">' + data[i].user + '</div><div class="body">' + data[i].body + '</div></div></li>';
                    $this_.html(str + html);
                }
                setTimeout($this_, 1000);
            }
        });
};
})(jQuery); 
```

它说`setTimeout($this_, 1000);`这是我遇到麻烦的地方。我不知道该怎么称呼这个插件。`$this_`是我认为可能有效的方法，但我错了。那是我需要更换的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:34:48.723

在这里，我可能会使用 JavaScript`call()`来调用函数。[MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Call)。

因此，在插件中，您可以使用`$.fn.watch.call(this)`. 传入的参数`call`设置了它的范围，因此传入`this`以在同一范围内调用它。

我整理了一个基本示例，说明它是如何在[JSBin](http://jsbin.com/oyuqes/edit#javascript,html)上工作的。

您可以`setTimeout`像这样使用它：

```
setTimeout(function() { $.fn.watch.call(this) }, 1000); 
```

[JSBin 示例](http://jsbin.com/oyuqes/2/edit)

希望这可以帮助 ：）

# facebook - 通过 Facebook API 停用

> ID：11074825
> 
> 赞同：0
> 
> 时间：2012-06-17T21:13:56.213
> 
> 标签：facebook, facebook-graph-api

知道任何让我通过 API 停用我的 Facebook 帐户的解决方案。Facebook Graph，核心库任何东西！我正在开发一个移动应用程序，如果他已经授权使用 FACEBOOK，我想让用户能够从应用程序中停用他的帐户。我认为由于一个大的安全问题这可能是不可能的，但我只想知道是否存在任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:56:12.877

不，用户停用其帐户的唯一方法是通过 Facebook 自己的 UI 或应用程序 - 没有用于该功能的 API

# html - 图片链接问题

> ID：11074827
> 
> 赞同：1
> 
> 时间：2012-06-17T21:14:00.330
> 
> 标签：html, css, image, hyperlink

两天前，我自发地给自己买了一个域名。在那之前的一天，我什至几乎不知道域名到底是什么。从那以后，我第一次尝试自学 HTML。基本上我想说的是，我很新——而且我的解释可能很差。

我刚刚成功制作了一个“图像按钮”，有点像。这是我制作按钮状图像的地方，然后将其用作我网站上的导航（就像常规链接一样）。我的问题是链接“边框”本身比图像大，所以你可以在图像本身之外按一英寸，它就会起作用。如何使不可见的链接“边框”与按钮的大小相同？

这是我的网站： http: [//www.djeveln.com](http://www.djeveln.com)

在测试页面 (djeveln.com/test) 上是我测试的地方。就是我说的那个按钮，以防你不能很好地理解我的解释。

这是我的 HTML：

```
<a class="ButtonLink" href="http://www.djeveln.com" title="Home"> 
<img src="/images/button.png" class="TestButton"></a> 
```

这是我用于图像位置和大小的 CSS：

```
img.TestButton { /* Dette linker til selve størrelsen av knappen (bildet)*/ 
    position: absolute; 
    width: 100px; 
    height: 75px; 
    top: 400px;
    right: 250px; 
} 
```

希望你能帮我！:P

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T21:18:45.657

您的按钮图像包含一个大的透明区域（实际按钮或多或少位于中心），这就是导致“边框”的原因。

尽管有 CSS 解决方法，但我建议您只需在 Photoshop（或任何其他图像编辑器）中打开图像，然后将透明区域裁剪掉。使您的图像与按钮的大小完全相同。

还有一个提示，它可以让你的学习变得更轻松：使用 Chrome 开发者工具或 Firebug 之类的调试工具（如果你使用的是 Firefox）。有了这些，您可以检查 HTML 上的任何元素（右键单击它并选择“检查”），检查为它们应用的 CSS（并动态修改它以进行测试）等等。这就是我在您的图像上发现透明边框的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T21:21:36.070

快速浏览一下，您似乎只是将图像制作得太大了。按钮外部有很多透明图像，它们是点击目标的一部分。你是怎么做按钮的？

例如，如果您是在 Photoshop 中制作的，您应该将图像裁剪为紧贴按钮的边框。

你可以在 CSS 中做到这一点，但你会为自己工作——我会修改源图像。

# delphi - 如何唯一标识一个显示器？

> ID：11074830
> 
> 赞同：6
> 
> 时间：2012-06-17T21:14:31.260
> 
> 标签：delphi, screen, multiple-monitors

我正在做一个项目，我在其中截取各个监视器 ( `TMonitor`) 并通过网络传输它们的图像（远程桌面查看）。假设添加/删除了一个监视器（我已经可以识别），我需要同步这发生在*哪个监视器上。*因为，假设有 3 个监视器，索引 0、1、2。监视器 1 被删除。我不想自动将索引 2 更改为 1，我希望它始终保持一个 ID。我可以在`TMonitor`类 ( `Screen.Monitors[i]`) 中识别出任何属性来唯一标识它吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-17T21:26:35.100

我会说 的`Handle`属性`TMonitor`在任何时候都是独一无二的。

根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144968%28v=vs.85%29.aspx)：

> 只要物理显示器`HMONITOR`是桌面的一部分，它就具有相同的功能。

# java - 使用 require.js 和 Java/Rhino 解析模块

> ID：11074836
> 
> 赞同：8
> 
> 时间：2012-06-17T21:15:05.360
> 
> 标签：java, javascript, require, requirejs, rhino

我正在尝试让 require.js 使用 Java 6 和 Rhino 在服务器端加载模块。

我能够加载 require.js 本身就好了。Rhino 可以看到这个`require()`功能。我可以说出来，因为 Rhino 抱怨当我更改`require()`为`requireffdkj()`.

但是当我尝试需要一个简单的 JS 时，比如`hello.js`

```
var hello = 'hello'; 
```

使用以下任一方法：

```
require('hello');
require('./hello'); 
```

它不起作用。我明白了

```
Caused by: javax.script.ScriptException: sun.org.mozilla.javascript.internal.JavaScriptException: [object Error] (<Unknown source>#31) in <Unknown source> at line number 31
    at com.sun.script.javascript.RhinoScriptEngine.eval(RhinoScriptEngine.java:153)
    at com.sun.script.javascript.RhinoScriptEngine.eval(RhinoScriptEngine.java:167)
    at javax.script.AbstractScriptEngine.eval(AbstractScriptEngine.java:247) 
```

我`hello.js`在 Java 类路径的顶部有我的。这也是我所拥有`require.js`的。我尝试移动到`hello.js`任何我认为可能会移动的地方，包括我的硬盘驱动器的根目录、我的用户目录的根目录、我正在运行我的 Java 应用程序的目录等。没有任何效果。

我查看了 CommonJS 规范（[http://wiki.commonjs.org/wiki/Modules/1.0](http://wiki.commonjs.org/wiki/Modules/1.0)），它说顶级 ID（如`hello`）是从“概念模块名称空间根”解析的，而相对 ID（ like `./hello`) 针对调用模块进行解析。我不确定这些基线在哪里，我怀疑这就是问题所在。

有什么建议么？我什至可以使用 Rhino 的 require.js 吗？

**编辑：**认为我需要按照 Pointy 在下面评论中的建议设置环境，我也尝试评估[`r.js`](https://github.com/jrburke/r.js)。（我在评估之后尝试评估`require.js`，然后在之前再次评估`require.js`。）在任何一种情况下，我都会收到错误：

```
Caused by: javax.script.ScriptException: sun.org.mozilla.javascript.internal.EcmaError: ReferenceError: "arguments" is not defined. (<Unknown source>#19) in <Unknown source> at line number 19
    at com.sun.script.javascript.RhinoScriptEngine.eval(RhinoScriptEngine.java:153)
    at com.sun.script.javascript.RhinoScriptEngine.eval(RhinoScriptEngine.java:167)
    at javax.script.AbstractScriptEngine.eval(AbstractScriptEngine.java:247) 
```

“参数”似乎是一个变量`r.js`。我认为它是用于命令行参数的，所以我认为这不是`r.js`我想要做的事情的正确路径。不过不确定。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-17T23:42:57.723

require.js 适用于 rhino。最近，我在一个项目中使用它。

1.  您必须确保使用[r.js](http://requirejs.org/docs/download.html#rjs) (not require.js) ，这是 rhino 的 require.js 的修改版本。
2.  你必须扩展`ScritableObject`类来实现`load`和`print`运行。当你调用 时`require(["a"])`，会调用这个类中的 load 函数，你可以调整这个函数来从任何位置加载 js 文件。在下面的示例中，我从`classpath`.
3.  您必须`arguments`在示例代码中定义共享范围中的属性，如下所示
4.  或者，您可以使用 , 来配置子路径`require.config`，以指定 js 文件所在的类路径中的子目录。

**JsRuntimeSupport**

```
public class JsRuntimeSupport extends ScriptableObject {

    private static final long serialVersionUID = 1L;
    private static Logger logger = Logger.getLogger(JsRuntimeSupport.class);
    private static final boolean silent = false;

    @Override
    public String getClassName() {
        return "test";
    }

    public static void print(Context cx, Scriptable thisObj, Object[] args,
            Function funObj) {
      if (silent)
        return;
        for (int i = 0; i < args.length; i++)
          logger.info(Context.toString(args[i]));
    }

    public static void load(Context cx, Scriptable thisObj, Object[] args,
            Function funObj) throws FileNotFoundException, IOException {
        JsRuntimeSupport shell = (JsRuntimeSupport) getTopLevelScope(thisObj);
        for (int i = 0; i < args.length; i++) {
            logger.info("Loading file " + Context.toString(args[i]));
            shell.processSource(cx, Context.toString(args[i]));
        }
    }

    private void processSource(Context cx, String filename)
            throws FileNotFoundException, IOException {
        cx.evaluateReader(this, new InputStreamReader(getInputStream(filename)), filename, 1, null);
    }

    private InputStream getInputStream(String file) throws IOException {
        return new ClassPathResource(file).getInputStream();
    }
} 
```

**示例代码**

```
public class RJsDemo {

    @Test
    public void simpleRhinoTest() throws FileNotFoundException, IOException {
    Context cx = Context.enter();

    final JsRuntimeSupport browserSupport = new JsRuntimeSupport();

    final ScriptableObject sharedScope = cx.initStandardObjects(browserSupport, true);

    String[] names = { "print", "load" };
    sharedScope.defineFunctionProperties(names, sharedScope.getClass(), ScriptableObject.DONTENUM);

    Scriptable argsObj = cx.newArray(sharedScope, new Object[] {});
    sharedScope.defineProperty("arguments", argsObj, ScriptableObject.DONTENUM);

    cx.evaluateReader(sharedScope, new FileReader("./r.js"), "require", 1, null);
    cx.evaluateReader(sharedScope, new FileReader("./loader.js"), "loader", 1, null);

    Context.exit();

  }

} 
```

**加载器.js**

```
require.config({
    baseUrl: "js/app"
});

require (["a", "b"], function(a,  b) {
    print('modules loaded');
}); 
```

`js/app`目录应该在你的类路径中。

# java - 使用 JavaMail 解析 MIME 消息

> ID：11074839
> 
> 赞同：3
> 
> 时间：2012-06-17T21:15:40.210
> 
> 标签：java, parsing, email, scala, jakarta-mail

我正在尝试使用 JavaMail API 解析 mime 消息，我做了一些研究，但我发现的步骤对我不起作用，其中一个是这里回答的内容： [Java Email message Parser？](https://stackoverflow.com/questions/3444660/java-email-message-parser)

我正在传递一个 InputStream，因为 ByteArrayInputStream 来自我要解析的内容。当我这样做时，我的 message.getContent 会导致一个空字符串。

我正在使用 Scala，顺便说一句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T21:53:21.460

我最近遇到了这个问题，所以你的研究不可能那么好。当我说最近时，我的意思是最近几天！:P

但这就是我阅读电子邮件所做的（或者至少在某种程度上阅读了电子邮件。它返回一大块 HTML 文本，这在 JEditorPane 中并不总是很漂亮

```
private void tableMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tableMouseReleased
    final java.awt.event.MouseEvent e = evt;
    Thread t = new Thread(new Runnable() {
        @Override
       public void run() {
           if(table.getRowCount() == 0 || message == null || message.length == 0) {
        // Do nothing
    } else {
        try {
            int row = table.rowAtPoint(e.getPoint());                
            String subject = message[row].getSubject();
            String from = InternetAddress.toString(message[row].getFrom());
            StringBuilder body = new StringBuilder();
            Multipart mp = (Multipart) message[row].getContent();
            for(int i = 0; i < mp.getCount(); i++) {
                BodyPart bp = mp.getBodyPart(i);
                String disp = bp.getDisposition();
                if(disp != null && (disp.equals(BodyPart.ATTACHMENT))) {
                    // Do something
                } else {
                    body.append(bp.getContent());
                }
            }
            EmailContent ec = new EmailContent(new JFrame(),true,from,subject,"<html>" + body.toString());
        } catch (IOException ex) {
            Logger.getLogger(MailPanel.class.getName()).log(Level.SEVERE, null, ex);
        } catch (MessagingException ex) {
            Logger.getLogger(MailPanel.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
       } 
    });
    t.start();
 } 
```

我必须用消息填充表格，然后当您单击表格中的消息时，它会显示一个包含该消息的新窗口。消息数组只是一个填充了消息对象的数组。因此，您显然需要一条消息来执行此操作。但你所追求的部分是这样的：

```
 StringBuilder body = new StringBuilder();
 Multipart mp = (Multipart) message[row].getContent();
    for(int i = 0; i < mp.getCount(); i++) {
        BodyPart bp = mp.getBodyPart(i);
        String disp = bp.getDisposition();
        if(disp != null && (disp.equals(BodyPart.ATTACHMENT))) {
            // Do something
        } else {
            body.append(bp.getContent());
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T21:44:49.140

它应该可以工作，所以我们需要更多关于你正在做什么的细节来找出问题所在。

首先，让我们确保问题不在于您的代码并且邮件消息的格式正确。使用 JavaMail 附带的 msgshow.java 演示程序来显示消息。使用 -m 选项并从包含 MIME 消息的文件中重定向标准输入。它显示什么？

如果正确，请向我们展示您用于阅读消息的代码。

# jquery - 使用 JQuery 在单击期间跟踪鼠标运动

> ID：11074843
> 
> 赞同：3
> 
> 时间：2012-06-17T21:15:51.960
> 
> 标签：jquery

如何使用 JQuery 在 mousedown 到 mouseup 之后跟踪鼠标运动？跟踪应该在单击某个目标元素时开始并继续 mouseup，即使鼠标移出目标元素也是如此。

```
<div id="some_elt">
   <div id="target">
   </div>
</div> 
```

我能想到的唯一方法是绑定到整个文档并根据我从设置和取消设置`mousemove`的全局标志调用我的运动处理程序。`$("target").mousedown``$("target").mouseup`

还有比这更优雅的方法吗？

**编辑：**我想我需要添加一点......我的目标已经`draggable()`应用到它。我正在尝试制作一个像样的图像查看器。我有一个`div`包含可拖动的视口`img`。我正在尝试通过 shift+m​​iddle-click 等方式使图像可缩放，而不会干扰可拖动的导航。我是否将不得不背负 JQuery 在引擎盖下所做的事情以使可拖动的工作？

**Edit2：**回答我的编辑：当然不是！jQuery 太棒了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:28:44.497

使用事件目标开始跟踪

```
$(document).mousedown(function(event){
   if( event.target.id=="target"){
     $(this).on('mousemove',function(event){
          /* do tracking*/
      })
   }
}).mouseup(function(){
    $(this).off('mousemove');
}) 
```

对于低于 1.7 的 jQuery 版本

```
$(document).mousedown(function(event){
   if( event.target.id=="target"){
     $(this).mousemove(function(event){
          /* do tracking*/
      })
   }
}).mouseup(function(){
    $(this).unbind('mousemove');
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T21:27:32.263

我认为最优雅的方法之一是使用[jQuery UI draggable](http://jqueryui.com/demos/draggable/)：

```
$("#target").draggable({
    start: function(event, ui) { console.log("start dragging"); },
    drag: function(event, ui) { console.log("continue dragging"); },
    stop: function(event, ui) { console.log("stop dragging"); }
}); 
```

# iis - 尝试在 IIS 模式下配置 RavenDB 时出错

> ID：11074844
> 
> 赞同：4
> 
> 时间：2012-06-17T21:15:56.157
> 
> 标签：iis, web-config, iis-7.5, ravendb, ravendb-studio

按照[本教程中的步骤，](http://ravendb.net/docs/server/deployment/as-iis-application)在inetmgr中点击“Modules”后的“Setting up with IIS 7.5”第一项，出现如下错误：

![模块错误](../Images/5c1fef5fcdd6538bf7670cf8c54bc7a1.png)

> 完整图片：http: [//i.stack.imgur.com/QCM4s.png](https://i.stack.imgur.com/QCM4s.png)

## RavenDB 中的 Web.config

```
<configuration>
    <appSettings>
        <add key="Raven/DataDir" value="~\Data"/>
        <add key="Raven/AnonymousAccess" value="Get"/>
    </appSettings>
    <system.webServer>
        <handlers>
            <add name="All" path="*" verb="*" type="Raven.Web.ForwardToRavenRespondersFactory, Raven.Web"/>
        </handlers>
        <modules runAllManagedModulesForAllRequests="true">
            <remove name="WebDAVModule" />
        </modules>
    </system.webServer>
    <runtime>
        <loadFromRemoteSources enabled="true"/>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <probing privatePath="Analyzers"/>
        </assemblyBinding>
    </runtime>
</configuration> 
```

## 应用程序主机配置

[http://pastebin.com/UJTJfB9f](http://pastebin.com/UJTJfB9f)

## 尝试

几次尝试，我试图改变

这..

```
<section name="modules" allowDefinition="MachineToApplication" overrideModeDefault="Deny" /> 
```

到这个..

```
<section name="modules" allowDefinition="MachineToApplication" overrideModeDefault="Allow" /> 
```

## 结果

尝试访问“在 inetmgr 模块中工作！”时

**但是**RavenDB Studio 不起作用。下图：

![错误 RavenDB Studio](../Images/c8a0925c5ef43141fc3bfcf9a2dad860.png)

* * *

```
Config Error
   This configuration section cannot be used at this path. This happens when the section is locked at a parent level. Locking is either by default (overrideModeDefault="Deny"), or set explicitly by a location tag with overrideMode="Deny" or the legacy allowOverride="false".  

Config File
   \\?\C:\Users\Riderman\RavenDB-Build-960\Web\web.config 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:45:27.617

检查您的服务器 web.config 并`overrideModeDefault`从更改`Deny`为`Allow`.

```
<configSections>
  <sectionGroup name="system.webServer">
    <section name="handlers" overrideModeDefault="Deny" /> 
    <section name="modules" allowDefinition="MachineToApplication" overrideModeDefault="Deny" /> 
```

您还可以在 IIS 管理控制台中管理 Web 服务器级别的部分（只需在左窗格中选择服务器），然后选择“功能委派”：

[![替代文字](../Images/d0ca2e745178a62bdb53e9d809b89b6f.png)](https://i.stack.imgur.com/Ndn2o.jpg)

正如您在上图中看到的，所有功能都是读/写。目前在我的机器上，模块功能是只读的，所以我需要将其更改为读/写 - 在设置功能委派的右侧窗格中，只需单击读/写...

# cuda - 打印推力迭代器指向的值

> ID：11074846
> 
> 赞同：0
> 
> 时间：2012-06-17T21:16:13.477
> 
> 标签：cuda, gpu, thrust

请看下面的代码：

```
thrust::device_vector<int>::iterator whereToBegin = copyListOfNgramCounteachdoc.begin();
end = thrust::unique_by_key(end.first, end.first + numUniqueNgrams,end.second);
thrust::device_vector<int>::iterator end1 = end.first;
thrust::device_vector<int>::iterator iter;
for(iter = whereToBegin; iter!=end1; iter++){
    //PRINT VALUE POINTED AT BY ITERATOR
 } 
```

这个问题真的很简单。我如何打印`iter`指向的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:17:23.880

在您的主机代码中：

```
std::cout << *iter << std::endl; 
```

就像标准容器一样。

# ruby-on-rails - authlogic 不适用于 rails 2.3

> ID：11074847
> 
> 赞同：0
> 
> 时间：2012-06-17T21:16:16.873
> 
> 标签：ruby-on-rails, ruby, rubygems

我正在使用 authlogic gem。我正在关注 railscasts 视频寻求帮助 [http://railscasts.com/episodes/160-authlogic?autoplay=true](http://railscasts.com/episodes/160-authlogic?autoplay=true) 我在执行 sudo rake gems:install 时遇到问题：安装它给了我一个错误：

```
at /usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rdoctask.rb

rake aborted!

(eval):1:in `define_callbacks': compile error

(eval):1: syntax error, unexpected tEQ, expecting '\n' or ';'
...  def self.terminatorresult == false(*methods, &block)      ...

                          ^ 
```

我尝试卸载 rake gem 并再次安装。我尝试使用较低版本的 rake，但也没有用。

我应该在这里做什么？

我是否需要编辑 rake gem 并将其包含在其中..

```
base.define_callbacks :persist, :terminator => "result == true" 
```

[我在http://pastebin.com/Q3eL53ZJ](http://pastebin.com/Q3eL53ZJ)上找到了上述内容

如果是，那怎么办？如果有更好的解决方案，请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:28:42.947

确保您没有尝试将 master 分支与 Rails 2.x 一起使用，它仅与 Rails 3.x 兼容。

如果您使用的是 Rails 2.x，请使用 rails2 分支，我实际上只是使用了旧版本，因为我只想维护一些遗留站点，而不必过多担心升级 gem。我使用了 2.1.5 版本，它运行良好。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:30:17.467

为了解决这个问题，我首先删除了我所有的 authlogic gem：

```
  gem 卸载 authlogic

```

我正在使用 rails 2.3.15，因为这就是 hostgator 正在使用的。匹配的 authlogic 版本是 2.1.3，所以我在 config/environment.rb 中添加了这个：

```
config.gem "authlogic", :version => '2.1.3'

```

然后做了 rake gems:install。之后，一个`script/generate controller user_sessions`命令实际上在模型中生成了 user_session.rb。

# iphone - 在 iOS 中更改视图时丢失数据变量

> ID：11074848
> 
> 赞同：2
> 
> 时间：2012-06-17T21:16:23.027
> 
> 标签：iphone, objective-c, ios

我的 viewcontroller.h 中有一个变量声明为

```
@property (nonatomic) uint size; 
```

在 viewcontroller.m 上，我在按下按钮时为该变量设置了一个值。

问题是，当我更改视图并返回时，我的变量值丢失了。

我能做些什么来解决这个问题？我不需要将它声明为全局变量，因为我只是在 ViewController.m 中使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:24:39.977

我要做的是`viewWillDissapear`我会保存价值

```
[[NSUserDefaults standardUserDefaults] setObject:[NSString stringWithFormat:@"%i", size] forKey:@"mySize"]; 
```

我只会在 viewWillAppear 上检索这个值

```
size = [[[NSUserDefaults standardUserDefaults] objectForKey:@"mySize"] intValue]; 
```

然后，如果您想从应用程序中删除值，只需使用：

```
[[NSUserDefaults standardUserDefaults] removeObjectForKey:@"mySize"]; 
```

我还想尝试的一件事是声明没有非原子的属性（也许你会因此保留屏幕之间的值！）：

```
@property uint size; 
```

# batch-file - 在批处理的新窗口中运行批处理文件？

> ID：11074849
> 
> 赞同：36
> 
> 时间：2012-06-17T21:16:33.277
> 
> 标签：batch-file, window, command

我知道这似乎以前被问过，但我需要一个批次才能在新窗口中打开另一个批次。我试过了：

```
start abc.bat

cmd abc.bat

run abc.bat 
```

和别的。他们都在同一个窗口中打开或只是在新窗口中打开命令提示符，忽略我的批处理。是否有批处理命令可以在新窗口中打开批处理文件？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-17T22:15:25.207

这是你的追求吗？

```
start "New Window" cmd /c test.cmd 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-17T21:24:41.523

`start abc.bat`不起作用有点奇怪，但我认为这是因为您在另一批次的中间运行它。您可能需要`call`：

```
22:22:38.85 c:\help call
Calls one batch program from another.

CALL [drive:][path]filename [batch-parameters] 
```

给你`start call abc.bat`或`call start abc.bat`取决于确切的问题是什么。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-17T10:47:17.797

简单地做到这一点就是

```
start cmd /c "exampleexample.bat" 
```

这也适用于空格；

```
start cmd /c "example example.bat" 
```

和目录。

```
start cmd /c "C:\NAME\Example\Hi there\example example.bat" 
```

我用这个创建了我的通用批次，这完美无瑕。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T21:20:31.497

`start abc.bat`为我工作。你的情况是什么问题？你也可以试试`start cmd /c abc.bat`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T21:23:54.947

不幸的是，我不知道这样的方法（我遇到同样的事情）。但是，尝试在启动批处理时杀死旧窗口

abc.bat：

```
abd.bat
stop 
```

abd.bat：

```
@echo off
@echo It works! 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-11T12:39:19.817

我发现了一些有用的东西：

```
call "C:\FILEPATH HERE\abc" 
```

演示：

```
@echo off

call "C:\Users\USERNAME HERE\Desktop\abc" 
```

这应该工作<3

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-06-02T13:13:26.710

如果要在不同的命令提示符下运行它，请键入 start C:\abc.bat 或任何 abc.bat 的目录，或者如果要在同一命令提示符下打开它，请键入 call "C:\ abc.bat”，无论目录在哪里。它应该工作

要么：调用“C:\abc.bat”或启动 C:\abc.bat

# c# - 单元测试抛出异常但看不到消息

> ID：11074850
> 
> 赞同：8
> 
> 时间：2012-06-17T21:16:56.973
> 
> 标签：c#, visual-studio, unit-testing, mstest

大家好，我正在使用测试驱动开发将国际象棋 AI 作为业余项目。但由于某种原因，我的测试给出的唯一消息是“测试引发了异常：...”。因此省略了唯一重要的事情。我现在必须右键单击并查看测试结果详细信息，而不是直接读取错误。我已经尝试添加和删除列，但我无法直接显示整个消息。

是否可以设置 VS2010，以便为每个单元测试直接显示异常消息？

编辑：我正在使用标准 VS 单元测试：

```
[TestClass]
public class MiniMaxTest
{
    [TestMethod]
    public void TestConstructor()
    {
        throw new Exception("Must I click view details to see this?");
    }
} 
```

为什么要问这些问题？你们可以复制这些东西。调试或运行测试给出相同的消息： ![异常消息仍然隐藏](../Images/a98ebdc9aaa00225fdee2ab9c7dccb8c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T22:56:38.947

不，我不相信您可以配置 VS 以不同方式显示它。IDE 显示异常消息的第一行，并且完整的消息文本中有一个换行符，因此您需要单击详细信息才能查看整个内容。

但是，您*可以*做的是滥用 MSTest 框架来显示您自己的消息。

MS 测试断言都是通过抛出异常来实现的。所有 MS Test`Assert`函数都会引发异常，这些异常源自`UnitTestAssertException`. Visual Studio 对这类异常有特殊处理。

例如：如果你写这个测试：

```
[TestMethod]
public void AllAboard()
{
    throw new AssertFailedException("Failboat");
} 
```

`AssertFailedException`是大多数其他断言失败的标准基类。

您会注意到 VS2010 不会*打印*通用的“测试引发异常”消息，而是仅打印“Failboat”。

现在您可以做的是将您的测试包含在将正常异常转换为的东西中`AssertFailedException`，然后您可以打印任何您喜欢的消息。

```
[TestMethod]
public void TestStuff()
{
    try
    {
        string o = null; // pretend this came from some real code
        var x = o.Split(new[] { ',' }); // this will throw NullRefException
    }
    catch (Exception e)
    {
        throw new AssertFailedException(e.Message, e);
    }
} 
```

当然，我不建议您实际这样做...它很冗长，更重要的是，您丢失了调用堆栈...但是嘿，现在您的工具带中多了一个工具

# web-services - 带有 SimpleJaxWsServiceExporter 的 Spring Web 服务

> ID：11074853
> 
> 赞同：3
> 
> 时间：2012-06-17T21:17:28.510
> 
> 标签：web-services, spring, jax-ws

基于[http://www.subshel](http://www.subshell.com/en/subshell/blog/article-Publishing-Webservices-with-Java-6-and-Spring-WS100.html) ​​l.com/en/subshel​​l/blog/ article-Publishing-Webservices-with-Java-6-and-Spring-WS100.html 我尝试在 Tomcat 7 上使用 SimpleJaxWsServiceExporter 运行 Webservice。

浏览器中的 localhost:8081/WSTest/TourWS?wsdl 导致错误 404。

TourWS.java

```
@WebService
@SOAPBinding(style=Style.DOCUMENT)
public interface TourWS {
@WebMethod
public void declareTours(ArrayList<TourWSEntity> tours);
@WebMethod
public void declareTour(TourWSEntity tour);
@WebMethod
public String whoAmI(); 
```

}

TourWSImpl.java

```
@WebService(serviceName="TourWS")
public class TourWSImpl implements TourWS {
public TourWSImpl(){}

@Override
public void declareTours(ArrayList<TourWSEntity> tours) {
    // impl
}

@Override
public void declareTour(TourWSEntity tour) {
    // impl
}

@Override
public String whoAmI(){
    return "JAX-WS Web Service - TourWS";
} 
```

spring-ws-servlet.xml

```
<beans ...>
<bean class="org.springframework.remoting.jaxws.SimpleJaxWsServiceExporter">
    <property name="baseAddress" value="http://localhost:8081/" />
</bean>
<bean id="tourWSImpl" class="tour.spring.ws.impl.TourWSImpl" />
</beans> 
```

web.xml

```
<web-app ...>
<servlet>
    <servlet-name>spring-ws</servlet-name>
    <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>spring-ws</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>
</web-app> 
```

pom.xml

```
<dependency>
<groupId>org.springframework</groupId>
<artifactId>spring-web</artifactId>
<version>3.1.0.RELEASE</version>
</dependency>
<dependency>
<groupId>org.springframework.ws</groupId>
<artifactId>spring-ws-core</artifactId>
<version>2.0.5.RELEASE</version>
</dependency> 
```

控制台输出：

```
2012-06-17 22:29:52 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jdk\bin;.;...
2012-06-17 22:29:52 org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:WSSpring' did not find a matching property.
2012-06-17 22:29:52 org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
2012-06-17 22:29:52 org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
2012-06-17 22:29:52 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 572 ms
2012-06-17 22:29:52 org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
2012-06-17 22:29:52 org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.6
2012-06-17 22:29:53 org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory docs
2012-06-17 22:29:53 org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory examples
2012-06-17 22:29:53 org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextInitialized()
2012-06-17 22:29:53 org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextInitialized()
2012-06-17 22:29:53 org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory host-manager
2012-06-17 22:29:53 org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory manager
2012-06-17 22:29:53 org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory ROOT
2012-06-17 22:29:53 org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["http-bio-8080"]
2012-06-17 22:29:53 org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
2012-06-17 22:29:53 org.apache.catalina.startup.Catalina start
INFO: Server startup in 799 ms
2012-06-17 22:29:54 org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'spring-ws'
2012-06-17 22:29:54 org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'spring-ws': initialization started
2012-06-17 22:29:54 org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing WebApplicationContext for namespace 'spring-ws-servlet': startup date [Sun Jun 17 22:29:54 CEST 2012]; root of context hierarchy
2012-06-17 22:29:54 org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/spring-ws-servlet.xml]
2012-06-17 22:29:55 org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@3ca754: defining beans [org.springframework.remoting.jaxws.SimpleJaxWsServiceExporter#0,tourWSImpl]; root of factory hierarchy
2012-06-17 22:29:55 com.sun.xml.internal.ws.model.RuntimeModeler getRequestWrapperClass
INFO: Dynamically creating request wrapper Class tour.spring.ws.impl.jaxws.DeclareTours
2012-06-17 22:29:55 com.sun.xml.internal.ws.model.RuntimeModeler getResponseWrapperClass
INFO: Dynamically creating response wrapper bean Class tour.spring.ws.impl.jaxws.DeclareToursResponse
2012-06-17 22:29:55 com.sun.xml.internal.ws.model.RuntimeModeler getRequestWrapperClass
INFO: Dynamically creating request wrapper Class tour.spring.ws.impl.jaxws.DeclareTour
2012-06-17 22:29:55 com.sun.xml.internal.ws.model.RuntimeModeler getResponseWrapperClass
INFO: Dynamically creating response wrapper bean Class tour.spring.ws.impl.jaxws.DeclareTourResponse
2012-06-17 22:29:55 com.sun.xml.internal.ws.model.RuntimeModeler getRequestWrapperClass
INFO: Dynamically creating request wrapper Class tour.spring.ws.impl.jaxws.WhoAmI
2012-06-17 22:29:55 com.sun.xml.internal.ws.model.RuntimeModeler getResponseWrapperClass
INFO: Dynamically creating response wrapper bean Class tour.spring.ws.impl.jaxws.WhoAmIResponse
2012-06-17 22:29:55 org.springframework.ws.soap.saaj.SaajSoapMessageFactory afterPropertiesSet
INFO: Creating SAAJ 1.3 MessageFactory with SOAP 1.1 Protocol
2012-06-17 22:29:55 org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'spring-ws': initialization completed in 1125 ms 
```

请告诉我可能出了什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T09:16:06.963

试试这个：`localhost:8081/TourWS?wsdl` 所以`WSTest`从地址中删除。

# javascript - 无法使用 JavaScript 发送电子邮件

> ID：11074855
> 
> 赞同：0
> 
> 时间：2012-06-17T21:17:38.160
> 
> 标签：javascript, email, html-email

Stack Overflow 上的一个旧帖子讨论了如何使用 JavaScript 填写 mailto 电子邮件：

[使用 Javascript 发送电子邮件](https://stackoverflow.com/questions/271171/sending-emails-with-javascript)

我对应用该技术很感兴趣，但无法使其发挥作用。

在下面的代码中，当我在 makecontact() 方法的 return false 上设置断点并查看它记录的 URL 时，它看起来很好。

但是浏览器没有打开电子邮件客户端。

如果我在提交按钮的 href 中硬编码相同的 URL，它会启动电子邮件客户端。

为什么设置href不起作用？

答案：这是错误的href。

固定版本：

```
<!-- TODO: Validate name and text fields and don't allow submit until they are valid. Limit total mailto URL length to 2000\. -->
<form name="contact">
<br/>Reason for contact:
<br/>
<input type="radio" name="reason" value="Product Inquiry/Presales Questions" checked="checked"/>Product Inquiry/Presales Question<br/>
<input type="radio" name="reason" value="Support/Warranty"/>Support/Warranty<br/>
<input type="radio" name="reason" value="Feedback"/>Feedback<br/>
<input type="radio" name="reason" value="Other"/>Other<br/>
<input type="text" name="name" id="name"/>Your name:</div>
<textarea name="contacttext" rows="20" cols="60" id="contacttext"></textarea>
<button id="submit">Submit</button>
</form>
<script type="text/javascript" id="contactjs">

<!--
var submit = document.getElementById("submit");

function getreason() {
    var radios, i, radio;

    radios = document.getElementsByName("reason");

    for (i = 0; i < radios.length; i += 1) {
        radio = radios[i];
        if (radio.checked) {
            break;
        }
    }

    return encodeURIComponent(radio.value);
}

function makecontact(e) {
    var subject, name, text;

    subject = getreason();
    name = document.getElementById("name").value;
    text = document.getElementById("contacttext").value;
    body = "From: '" + name + "', Content: '" + text + "'";
    body = encodeURIComponent(body);

    document.location.href = "mailto:contact@analogperfection.com?Subject=" + subject + "&Body=" + body;
    console.log(document.location.href);

    e.preventDefault();

    return false;
}

if (submit.addEventListener) {
    submit.addEventListener("click", makecontact, true);
} else if (form.attachEvent) {
    submit.attachEvent("onclick", makecontact);
} else {
    submit.click = makecontact;
}
//-->
</script>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:28:13.203

```
 body = "From: ' 
" + name + " 
', Content: ' 
" + text + " 
'"; 
```

这不是有效的 JavaScript。它将导致“未终止的字符串常量”错误。试试这个：

```
 body = "From: '\n" + name + "\n', Content: '\n" + text + "\n'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T21:38:34.243

你有两个主要问题：

1.  `button`元素没有`href`s ( [HTML4](http://www.w3.org/TR/REC-html40/interact/forms.html#h-17.5) , [HTML5](http://www.w3.org/TR/html5/the-button-element.html#the-button-element) )。设置一个不会做任何事情。在提交处理程序结束时，您应该设置`document.location.href`：

    ```
    document.location.href = "mailto:contact@analogperfection.com?Subject=" + subject + "&Body=" + body; 
    ```

2.  JavaScript 中的字符串中不能有文字换行符。改用`\n`：

    ```
    body = "From: ' \n" + name + " \n', Content: ' \n" + text + " \n'"; 
    ```

还要注意……</p>

1.  您应该在事件处理程序中接受一个事件对象，并调用`event.preventDefault()`而不是仅从事件处理程序返回 false 来阻止提交表单。

2.  没有名为 的函数`resume`，但如果既不存在`addEventListener`也不`attachEvent`存在，则您正在使用它。

# php - 我正在创建一个类似于 Youtube 或 Facebook 的“赞”按钮，但在存储独特的赞时遇到了一些问题

> ID：11074857
> 
> 赞同：-1
> 
> 时间：2012-06-17T21:18:10.060
> 
> 标签：php, jquery, mysql, facebook

我还没有开始创建代码，所以我没有任何东西要展示，但我要创建的是在我的网站上的每个帖子之后创建一个简单的按钮，允许用户“喜欢”帖子。我唯一的问题是弄清楚我的 MySQL 表对于这个壮举应该是什么样子。我想在我的 'tbl_posts' 表中添加一个 'rating' 列来存储计数，但我不知道如何做到这一点，以便每个用户只能对帖子进行一次投票。关于如何以这种方式创建数据库的任何想法？

另外，我想使用 jQuery 创建“喜欢”按钮。您推荐的是创建“赞”按钮的最佳方式。

格拉西亚斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:21:26.293

我建议实现喜欢按钮的最佳方法不是开发新按钮，而是使用 facebook 的 API:s 来做到这一点。

如果你*真的*觉得需要自己实现它，你应该在你的 SQL 表中有一个带有用户 ID 的 UNIQUE 列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T21:24:16.353

如果您在您的页面上谈论注册用户，您可以在您的帖子和用户表之间创建一个 user_likes_post m:n 关系。

如果您谈论的是页面访问者，您将不得不求助于 IP 地址和/或 cookie 以确保每个人只能投票一次。

对于按钮本身，我推荐[jQuery UI](http://jqueryui.com/)

# python - 如何以尊重大小写的方式对字典值进行排序？

> ID：11074860
> 
> 赞同：-2
> 
> 时间：2012-06-17T21:18:49.340
> 
> 标签：python

我们如何根据大写字母对以下字典进行排序，即`person[:][1][2]`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:42:24.533

您可能只想使用值，而不是字典。字典通常没有排序，因为您希望允许通过散列优化数据结构。

```
sorted(persons.values(), key=lambda item: item[2]) 
```

是获取包含字典值的排序列表的最简单方法。

但**也许你一开始就打算使用 a`list`而不是 a `dict`？**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T22:24:01.443

这个问题在现代 Python 中很容易解决：

```
>>> from collections import OrderedDict
>>> d={....your data....}

>>> d = OrderedDict(sorted(d.items(), key=lambda item: item[1][2])) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T21:33:36.537

```
lst = list(person.items())
lst.sort(key=lambda x: x[1][2]) 
```

如果你想按字母排序，然后是姓氏，然后是名字：

```
lst = list(person.items())
lst.sort(key=lambda x: x[1][2] + ' ' + x[1][0] + ' ' + x[1][1]) 
```

# c++ - std::remquo 目的和用法？

> ID：11074865
> 
> 赞同：4
> 
> 时间：2012-06-17T21:19:34.927
> 
> 标签：c++, c, c++11, floating-point, c99

`std::remquo`该函数的目的是什么？什么是您何时使用它而不是常规`std::remainder`函数的示例？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T21:25:26.863

`remquo`在 C++ 之前首次出现在 C99 中，以下是 C99 的基本原理：

> remquo 函数旨在实现可以利用商的一些低位的参数缩减。请注意，x 相对于 y 的大小可能非常大，以至于商的精确表示是不切实际的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T02:02:42.570

假设我正在实现一个正弦函数。实现正弦的典型方法是设计一些多项式 s，使 s(x) 近似于 x 的正弦，但该多项式仅适用于 -π/4 <= x <= π/4。在该区间之外，多项式偏离 sine(x) 并且是一个不好的近似值。（使多项式在更大的区间上良好需要一个具有更多项的多项式，并且在某些时候，多项式变得比有用的要大。）通常，我们还会设计一个多项式 c，使得 c(x) 近似于x，在类似的区间。

remquo 函数帮助我们使用这些多项式来实现正弦。我们可以使用“r = remquo(x, pi/2, &q)” 并使用 q 来确定 x 在圆的哪个部分。（注意，正弦是周期为 2π 的周期，所以我们只需要知道低的几个商的位。较高的位仅表示 x 已绕圆并重复正弦值。）根据 x 所在的圆的部分，例程将返回 s(r)、-s(r)、c (r)，或 -c(r) 表示 x 的正弦。

当然，有装饰，但这是基本思想。它仅适用于较小的 x 值，不超过 2π 的几个倍数。这是因为每次 x 加倍时，除数的另一位会移动到精确结果的计算中。但是，我们不能将 π/2 准确地传递给 remquo，因为 double 类型的精度是有限的。因此，随着 x 的增长，误差也会增长。

# android - Android - adb tcpip 错误

> ID：11074868
> 
> 赞同：3
> 
> 时间：2012-06-17T21:20:01.723
> 
> 标签：android, adb

我想通过`adb`网络连接到 Android 设备。我熟悉[如何通过 TCP 使用 ADB 连接到 Android？](https://stackoverflow.com/questions/2604727/how-can-i-connect-to-android-with-adb-over-tcp)并使用[https://developer.android.com/guide/topics/usb/index.html](https://developer.android.com/guide/topics/usb/index.html)并遵循指南。具体来说，我做了以下事情：

```
# adb kill-server
# adb tcpip 5555
* daemon not running. starting it now on port 5037 *
* daemon started successfully *
restarting in TCP mode port: 5555
# adb connect 192.168.1.101:5555
unable to connect to 192.168.1.101:5555:5555 
```

由于最后一个错误，我也尝试过

```
# adb connect 192.168.1.101
unable to connect to 192.168.1.101:5555 
```

我也尝试重新启动设备本身，但它没有帮助。为什么它不起作用？

**更新：**为了消除任何疑问，我确定这是我的设备内部 IP 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:33:46.107

I also met same scenario as your, TCPIP setup succeseed, but adb connet failed. I finally found it's my network problem, the ping also failed under that scenairo. After i made the ping works, the adb connect works as well. So, my suggestion is to check your network environment.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:22:33.743

我的无根设备也遇到了同样的问题。与普遍的看法相反，它似乎`adb tcpip <port>`需要模拟器或调试版本或 root 权限；至少根据源代码。

master 分支：[https](https://github.com/android/platform_system_core/blob/master/adb/adb.c#L898) ://github.com/android/platform_system_core/blob/master/adb/adb.c#L898看看`should_drop_privileges`哪个可以防止[https://github.com/android/platform_system_core/blob/master/adb/adb。 c#L966](https://github.com/android/platform_system_core/blob/master/adb/adb.c#L966) `adb_main`打开 TCP/IP 套接字连接。

在较旧的分支中，识别权限的逻辑`adbd`本身`adb_main`就是。见：[https ://github.com/android/platform_system_core/blob/froyo-release/adb/adb.c#L860](https://github.com/android/platform_system_core/blob/froyo-release/adb/adb.c#L860)

因此，为了进一步证明`adbd`不会进入 TCP/IP 模式（即使没有`adb tcpip`给出错误），请查看以下内容：

`adb shell getprop | grep 'ro.secure\|debuggable\|qemu'`，我的设备的输出：

```
[ro.secure]: [1]
[ro.debuggable]: [0] 
```

这不符合能够获得`secure`0 in 值的条件`adbd`，因为我没有运行模拟器（默认情况下需要 TCP/IP），我没有运行 Android 的可调试版本，而且我正在不是根。

此外，如果您发出`adb shell netstat`命令，您将看到没有人在侦听端口 5037 或 5555 或您在 TCP/IP 模式下运行时提供给`tcpip`命令的任何其他内容。`adbd`

希望这有帮助，祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T19:54:02.343

使用 tcpip 传输重新启动 adbd 的能力因设备而异。如果不确切知道您正在使用哪种设备，就很难知道确切的原因。

我在运行 4.2.1 的 Galaxy Nexus (takju) 上测试了“adb tcpip 5555”，发现它可以工作。我还在其他几个设备上进行了测试，但这些都不起作用。

我设法在 Motorola Droid 3 上使用 root 访问权限使其工作。请注意 ro.secure=1 和 ro.debuggable=0 仍然。我只需手动将 service.adb.tcp.port 设置为“5555”，如下所示：

```
    devbox:~/droid3$ adb shell
    shell@cdma_solana:/$ getprop | grep 'ro.secure\|可调试\|qemu'
    [ro.secure]：[1]
    [ro.debuggable]：[0]
    shell@cdma_solana:/$ su -c 'setprop service.adb.tcp.port 5555'
    shell@cdma_solana:/$ 退出
    devbox:~/droid3$ adb tcpip 5555
    在 TCP 模式下重启端口：5555
    devbox:~/droid3$ adb connect 172.16.0.14
    连接到 172.16.0.14:5555
    devbox:~/droid3$ adb -s 172.16.0.14:5555 外壳
    壳@cdma_solana:/$

```

虽然我在运行“adb tcpip”时指定了 5555，但它会被设备忽略。似乎这个特定设备没有必要的访问权限来设置没有 root 的“service.adb.tcp.port”属性。

同样，您可以像这样返回 USB：

```
    shell@cdma_solana:/$ getprop | grep 亚行
    [persist.service.adb.enable]：[1]
    [ro.sys.atvc_allow_all_adb]：[0]
    [persist.adb.tcp.port]：[]
    [init.svc.adbd]：[运行中]
    [service.adb.tcp.port]：[5555]
    shell@cdma_solana:/$ su -c 'setprop service.adb.tcp.port ""'
    shell@cdma_solana:/$ 退出
    devbox:~/droid3$ adb -s 172.16.0.14:5555 usb
    以 USB 模式重新启动
    devbox:~/droid3$ adb shell
    壳@cdma_solana:/$

```

这可能不适用于其他设备的原因各不相同。

在我测试的 Galaxy Nexus 上，shell 用户能够设置“service.adb.tcp.port”属性。目前尚不清楚为什么会有所不同。

有趣的是，如果启用 TCPIP，droid3 似乎不会继续在 USB 上监听。但是，Galaxy Nexus 会。

希望这可以帮助..

PS。另请参阅：[如何通过 TCP 使用 ADB 连接到 Android？](https://stackoverflow.com/questions/2604727/how-can-i-connect-to-android-with-adb-over-tcp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-16T01:47:42.253

嗨，我知道这是一个老问题，但我遇到了同样的问题。我不确定你的情况是否相同，但对我来说，问题是我通过 USB 扩展连接我的 Android 设备，只要我将 Android 设备直接连接到我的 MAC 中的 USB 端口，它就可以工作了。

只是为了澄清尝试将Android设备直接连接到计算机或尝试切换USB端口。

# c# - JSON 自动完成，不显示结果

> ID：11074873
> 
> 赞同：2
> 
> 时间：2012-06-17T21:21:06.410
> 
> 标签：c#, jquery, asp.net-mvc, json, razor

我第一次尝试为自动完成输入类型实现 JSON。

```
@{
    ViewBag.Title = "Index";
}

<script type="text/javascript">
function searchFailed(){
$("#searchresults").html("Sorry, there was a problem with the search.");
}
    $("input[data-autocomplete-source]").each(function () {
        var target = $(this);
        target.autocomplete({ source: target.attr("data-autocomplete-source") });
    });
</script>

<h2>Index</h2>

@using (Ajax.BeginForm("QuickSearch", "Search", new AjaxOptions { InsertionMode = InsertionMode.Replace, HttpMethod = "GET", OnFailure = "searchFailed", LoadingElementId = "ajax-loader", UpdateTargetId = "searchresults", }))
{
<input type="text" name="q" data-autocomplete-source="@Url.Action("QuickSearch", "Search")" />

} 
```

但它抱怨 data-autocomplete-source 不是一个有效的属性。它进入快速搜索，但我没有看到自动完成结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:18:41.607

```
 target.data("autocomplete-source"); 
```

使用数据属性。jQuery。[数据](http://api.jquery.com/jQuery.data/)

* * *

代替：

```
$("input[data-autocomplete-source]").each(function () {
    var target = $(this);
    target.autocomplete({ source: target.attr("data-autocomplete-source") });
}); 
```

和：

```
$(function () {
    $("input[data-autocomplete-source]").each(function () {
        var target = $(this);
        target.autocomplete({ source: target.data("autocomplete-source") });
    });
}); 
```

您使用`$(function () {})`等待页面“准备好”并且元素存在。

* * *

改变：

```
<input type="text" name="q" data-autocomplete-source="@Url.Action("QuickSearch", "Search")" /> 
```

至：

```
<input class="my-autocomplete" type="text" name="q" data-autocomplete-source="@Url.Action("QuickSearch", "Search")" /> 
```

并改变：

```
$("input[data-autocomplete-source]").each 
```

至：

```
$("input.my-autocomplete").each 
```

# java - 在多个 ImageView 上旋转动画

> ID：11074875
> 
> 赞同：1
> 
> 时间：2012-06-17T21:21:07.653
> 
> 标签：java, android, animation, rotation, duration

我想为 28 个不同的视图分配 28 个不同的旋转动画，并在活动开始时启动它们。动画都应该有随机的 startOffset 和 Duration。我已经尝试使用此代码，但似乎所有动画都具有相同的值。

```
RotateAnimation rotate = new RotateAnimation(0.0f, 360.0f,
        Animation.RELATIVE_TO_SELF, 0.9f, Animation.RELATIVE_TO_SELF, 0.5f);

ImageView imageView;

Random r = new Random();
int delayOffset = 0;
int rotationDuration = 200;

for (int i = 0; i < ids.length; i++) {

    rotate.reset();

    imageView = (ImageView) findViewById(ids[i]);
    imageView.clearAnimation();

    delayOffset = r.nextInt(500 - 0);
    rotationDuration = r.nextInt(10000 - 200) + 200;

    rotate.setStartOffset(delayOffset);
    rotate.setDuration(rotationDuration);

    imageView.startAnimation(rotate);
} 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:49:51.133

您使用的是完全相同的动画实例，因此所有视图都以最新的值开始它。

您应该为每个视图创建一个全新的动画。

# c# - 如何使用c#创建图表

> ID：11074877
> 
> 赞同：0
> 
> 时间：2012-06-17T21:21:22.100
> 
> 标签：c#

我需要根据可以从我拥有的 6 个组合框获取的数据创建一个图表。

组合框中的数据是数字。一旦我在组合框中选择了所需的数字，我就会按下一个按钮，该按钮会根据这些值创建一个图表。

我的问题是我只能做一次。一旦我更改组合框中的值并再次单击该按钮，我就会收到异常。

我知道每次按下按钮时我都需要创建一个新图表的实例，但我不知道如何。

```
private void button1_Click(object sender, EventArgs e)
{
    chart1.ChartAreas.Add("chart");
    chart1.ChartAreas["chart"].AxisX.Minimum = 0;
    chart1.ChartAreas["chart"].AxisX.Maximum = 20;
    chart1.ChartAreas["chart"].AxisX.Interval = 1;

    chart1.ChartAreas["chart"].AxisY.Minimum = 0;
    chart1.ChartAreas["chart"].AxisY.Maximum = 100;
    chart1.ChartAreas["chart"].AxisY.Interval = 5;

    chart1.Series.Add("xxx");
    chart1.Series.Add("yyy");

    chart1.Series["xxx"].Color = Color.Black;
    chart1.Series["yyy"].Color = Color.Red;

    chart1.Series["xxx"].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Line;
    chart1.Series["yyy"].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Line;

    chart1.Series["xxx"].Points.AddXY(comboBox1.Text, comboBox4.Text);
    chart1.Series["yyy"].Points.AddXY(comboBox1.Text, comboBox4.Text);

    chart1.Series["xxx"].Points.AddXY(comboBox2.Text, comboBox5.Text);
    chart1.Series["yyy"].Points.AddXY(comboBox1.Text, comboBox4.Text);

    chart1.Series["xxx"].Points.AddXY(comboBox3.Text, comboBox6.Text);
    chart1.Series["yyy"].Points.AddXY(comboBox1.Text, comboBox4.Text);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T21:28:47.530

尝试将 chart1 设置为 Chart 的新实例（我假设就是这样！）

所以它会是这样的：

```
 private void button1_Click(object sender, EventArgs e) 
 { 
    chart1 = new Chart();
    chart1.ChartAreas.Add("chart"); 
    chart1.ChartAreas["chart"].AxisX.Minimum = 0; 
    chart1.ChartAreas["chart"].AxisX.Maximum = 20; 
    chart1.ChartAreas["chart"].AxisX.Interval = 1; 

    chart1.ChartAreas["chart"].AxisY.Minimum = 0; 
    chart1.ChartAreas["chart"].AxisY.Maximum = 100; 
    chart1.ChartAreas["chart"].AxisY.Interval = 5; 

    chart1.Series.Add("xxx"); 
    chart1.Series.Add("yyy"); 

    chart1.Series["xxx"].Color = Color.Black; 
    chart1.Series["yyy"].Color = Color.Red; 

    chart1.Series["xxx"].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Line; 
    chart1.Series["yyy"].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Line; 

    chart1.Series["xxx"].Points.AddXY(comboBox1.Text, comboBox4.Text); 
    chart1.Series["yyy"].Points.AddXY(comboBox1.Text, comboBox4.Text); 

    chart1.Series["xxx"].Points.AddXY(comboBox2.Text, comboBox5.Text); 
    chart1.Series["yyy"].Points.AddXY(comboBox1.Text, comboBox4.Text); 

    chart1.Series["xxx"].Points.AddXY(comboBox3.Text, comboBox6.Text); 
    chart1.Series["yyy"].Points.AddXY(comboBox1.Text, comboBox4.Text); 
} 
```

# vba - VBA Excel 2010 CreateObject ExtendedProperty 获取图像宽度属性

> ID：11074882
> 
> 赞同：0
> 
> 时间：2012-06-17T21:22:02.340
> 
> 标签：vba, excel, createobject

我正在使用类似的函数通过使用一些 vba 代码来获取一些属性属性，如`Filename`, `bit depth`,等。该函数的最后一行将类似于以下内容：`dimensions``size`

```
PicSize = CreateObject("Shell.Application").Namespace(vPth2).Parsename(sPic2).ExtendedProperty("size") 
```

现在，我想获取该图像文件的高度和宽度。我已经将`height`and`width`放入`ExtendedProperty`属性值中，但它没有给我该文件的高度和宽度。

请注意，在该图像文件的属性对话框中，在摘要选项卡中，它正在显示，`Bit depth`但放置它不起作用。然后我把`bitdepth`它成功地工作了。名称不区分大小写。

好的！现在我只想获取所选图像文件的高度和宽度。我怎样才能做到这一点？我的意思是在里面放什么`ExtendedProperty()`来获得高度和宽度。

非常感谢您尽早回复解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:46:04.337

无法解释为什么`Height`和`Width`不工作，但`Dimensions`似乎工作，返回一个字符串，如`?493 x 376?`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-30T16:37:11.890

我建议解决方法

`size`在您的代码中替换

```
PicSize=CreateObject("Shell.Application").Namespace(vPth2).Parsename(sPic2).ExtendedProperty("size") 
```

你会`Dimensions` 得到类似的东西`?493 x 376?`

现在宣布

一个字符串`t = "?493 x 376?"`

'搜索“x”的索引

```
search_x = InStr(t, "x") 
```

'我们会得到宽度和高度

```
width = Mid(t, 2, search_x - 2)

height = Mid(t, search_x + 2, Len(t) - 8) 
```

不知道为什么，但我发现宽度从“2”开始，高度从“-8”开始，这样会给出一个数字

# php - 上传后获取要发布到 MySQL 的图片 url

> ID：11074885
> 
> 赞同：1
> 
> 时间：2012-06-17T21:22:25.440
> 
> 标签：php, mysql

所以这个语法确实连接并获取发布到数据库的信息，但我不知道如何获取图像的 url 以发布到数据库。无论我将 test1 更改为什么，它都不会发布。

```
protected function trim_file_name($name, $type, $index) {
    // Remove path information and dots around the filename, to prevent uploading
    // into different directories or replacing hidden system files.
    // Also remove control characters and spaces (\x00..\x20) around the filename:
    $file_name = trim(basename(stripslashes($name)), ".\x00..\x20");
    // Add missing file extension for known image types:
    if (strpos($file_name, '.') === false &&
        preg_match('/^image\/(gif|jpe?g|png)/', $type, $matches)) {
        $file_name .= '.'.$matches[1];
    }
    if ($this->options['discard_aborted_uploads']) {
        while(is_file($this->options['upload_dir'].$file_name)) {
            $file_name = $this->upcount_name($file_name);
        }
    }
    $con = mysql_connect("localhost","-----","-----");
    if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("-----", $con);

    mysql_query("INSERT INTO posts (postid, post_content)
    VALUES ('', 'test1')");

    mysql_close($con);
    {
    header("Location: http://snarb.com/index.php");
    }
    return $file_name;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:53:08.927

将您的 mysql_query 行更改为：

```
 mysql_query("INSERT INTO posts (post_content) VALUES ('" . mysql_real_escape_string($file_name) . "')"); 
```

# c++ - 在 C++ 文件中声明全局类实例

> ID：11074892
> 
> 赞同：1
> 
> 时间：2012-06-17T21:23:32.477
> 
> 标签：c++, class

我虽然对 C++ 的工作原理有很好的理解，但我对它的一部分使用感到困惑。如果我在 .cpp 文件（不与类关联）中全局声明一个类实例，例如

```
Class b(constructor parameters) 
```

它不会引起问题。我的理解是，以这种方式声明类在堆栈框架中为它们所在的方法分配它们，而不是在堆上。但是，如果我在全局范围内声明它，就没有方法，因此也没有堆栈框架，对吗？为什么允许我这样做，更重要的是正在发生什么，这在 C++ 中是不是有什么大不了的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:28:13.797

它只是一个静态对象。它被视为任何其他全局变量。

它不会绑定到任何堆栈帧，并且会在第一次加载文件中的任何内容时创建。

一般来说，从设计的角度来看，人们**不会**推荐依赖全局变量。不过，这取决于，它们可能是合理的。

如果你正在做任何类型的线程，他们可能是一个问题。您还想最小化应用程序的不同部分，*因为知道*事物是全局变量，这会导致大量意大利面条式代码。

如果变量没有在文件之外被引用，或者是为了[横切关注点](http://en.wikipedia.org/wiki/Cross-cutting_concern)，那么有时它可能是一件好事。

最好的建议是尽可能避免它，当你不能时不要[过度设计它](http://en.wikipedia.org/wiki/Singleton_pattern)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T22:37:44.893

作为全局变量的对象（或更准确地说是“在命名空间范围内”的变量）具有静态存储持续时间。这意味着它们一直存在到程序结束，并且它们在程序启动期间被初始化（在静态或动态初始化阶段）。

初始化的顺序一般没有规定，除了所有这样的全局对象在`main()`调用之前初始化，并且初始化不引入数据竞争。

（对相互依赖的全局初始化进行排序的常用技术是将裸全局变量替换为全局 getter 函数和块静态变量：

```
Foo & getFoo() { static Foo impl; return impl; } 
```

现在，在其自己的构造函数中使用的任何其他全局`getFoo()`变量都将在*之后* `impl`初始化。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T23:08:59.287

**快速评论**

您可能希望将帖子的标题更改为：

*在 C++ 文件中声明全局类实例？*

或者：

*在 C++ 中，全局对象、它的声明以及之后如何存储在内存中？*

我可能错了，但在我看来，就像您使用其他面向对象、编程语言、基于参考的工作一样，并尝试将您的经验应用于 C++。

* * *

**例子**

C++，它混合了：过程编程和面向对象编程，以及其他一些东西，比如函数式。

您可能希望将程序程序视为单个*对象*，该类已被声明并创建一个实例。并且，有这个公共`main`方法，自动执行，就像一个*构造函数*。

当您读取这样的 C++ 文件时：

```
// file: "example.cpp"

// class declaration without local variables
class CoordinateClass
{
  int x;
  int y;
};

// a global variable
CoordinateClass MyCoordinates;

int main (char[][] args)
{
  // dont care about this in this example
  int ErrorCode = 0;

  // DoSomething();

  // dont care about this in this example
  return ErrorCode;
} // int main() 
```

你可能想这样想：

```
// file: "example.cpp"

public: class example: program
{
  public:
    // class declaration without local variables
    class CoordinateClass
    {
      int x;
      int y;
    };

   // a global variable, works like a field of a class
   CoordinateClass MyCoordinates;

   int main (char[][] args)
   {
     // dont care about this in this example
     int ErrorCode = 0;

     // DoSomething();

     // dont care about this in this example
     return ErrorCode;
   } // int main()   

};

// this is done automatically:
example MyExample;
MyExample.main(); 
```

* * *

干杯。

# python - 共享UDP广播接收——python示例

> ID：11074895
> 
> 赞同：5
> 
> 时间：2012-06-17T21:24:10.667
> 
> 标签：python, udp, broadcast

我有一些数据的 UDP 广播。我可以在 OSX 10.6.8 下的 python 2.6.1 中打开以下客户端，并且可以正常工作。我可以捕捉到数据，一切都很好。

但是：这段代码“消耗”了端口，因为我无法打开另一个端口，第二次绑定尝试失败......而且我必须允许多个监听器。这是打开端口的代码：

```
import select, socket
port = 58083        # port msg is broadcast upon

# Create listening port
# ---------------------
s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
try:
    s.bind(('', port))
except:
     print 'failure to bind'
    s.close()
    raise
s.setblocking(0) 
```

...由于 UDP*旨在*向多个客户端广播（除其他外），我认为我做错了什么。我就是想不通是什么。

我在 activestate 上找到了一个示例，该示例建议：

```
s.bind(('<broadcast>',port)) 
```

...但这每次都失败了。绑定到`0.0.0.0`作品，但也遭受“一个客户”的问题。绑定到本地 IP（例如`192.168.1.100`）根本不起作用。删除绑定根本不起作用。

任何人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:59:07.740

如果需要多个进程监听58083，需要先`SO_REUSEADDR`在socket上设置`socket.bind()`

```
import select, socket
port = 58083        # port msg is broadcast upon

# Create listening port
# ---------------------
s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)  # Allow other processes to
                                                         #    bind to port
try:
    s.bind(('0.0.0.0', port))
except:
     print 'failure to bind'
    s.close()
    raise
s.setblocking(0) 
```

在底部添加一个无限循环，并在我的 linux 服务器上运行两次（一次作为 root，另一个作为 unpriv 用户），我看到：

```
root@tsunami# lsof | grep 58083
python    25908       root    3u     IPv4             284835      0t0        UDP *:58083
python    25945   mpenning    3u     IPv4             284850      0t0        UDP *:58083
root@tsunami# 
```

# c++ - 显示图像时在最小化/最大化期间保留纵横比？

> ID：11074900
> 
> 赞同：2
> 
> 时间：2012-06-17T21:24:58.163
> 
> 标签：c++, qt, qpixmap, qmainwindow, qlabel

我正在尝试使用 qt creator 实现一个可扩展的图像小部件，它将保留图像的纵横比。我发现的所有示例或帖子都建议扩展 QLabel 并重新实现 resizeEvent。这就是我所做的，它几乎可以工作，但有一些问题。

1.  当主窗口第一次打开时，图像会稍微变大并扩大主窗口的大小（这不是太大的问题）。

2.  当我最大化窗口时，所有图像都会放大，但是当我取消最大化窗口时，图像无法缩小。

我尝试更改 QLabel 子类（称为 ClickableImage）和包含 ClickableImage 布局的父小部件的 resizeEvents。这是一些相关的代码。

```
void ClickableImage::resizeEvent(QResizeEvent *e)
{
    qDebug() << "Resizing : " << ticker;
    ticker++;

    int w = e->size().width();
    int h = e->size().height();

    qDebug() << "W : " << w;
    qDebug() << "H : " << h;

    image = QPixmap(fname);
    image = image.scaled(w-7, h-7, Qt::KeepAspectRatio);
    setPixmap(image);
} 
```

此外，我还阅读了以下资料，

[Qt：调整包含 QPixmap 的 QLabel 的大小，同时保持其纵横比](https://stackoverflow.com/questions/8211982/qt-resizing-a-qlabel-containing-a-qpixmap-while-keeping-its-aspect-ratio)

[https://docs.huihoo.com/qt/4.2/desktop-screenshot.html](https://docs.huihoo.com/qt/4.2/desktop-screenshot.html)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:59:31.177

我有四件事你应该尝试。如果您放一个更大的代码示例，我可能会为您尝试，但这是我为您准备的：

1.  您可能需要[`adjustSize()`](http://qt-project.org/doc/qt-4.8/qwidget.html#adjustSize)在调整大小事件结束时调用。你可能不需要一个`update()`电话，但你可以试着把一个电话放在那里，看看它是否有所作为。

2.  最小化事件应该与 a 相同[`hideEvent()`](http://qt-project.org/doc/qt-4.8/qwidget.html#hideEvent)，因此如果您希望它更改最小化时的图像大小，也可以将一些图像缩放放在那里。

3.  [Window 和 Dialog Widgets](http://doc.qt.nokia.com/4.7-snapshot/application-windows.html#window-geometry)上的文档可能有助于调整某些大小，但它也可能是在调整小部件大小时设置小部件大小的递归性质的一部分。

4.  所有这一切的替代方法是让小部件为您确定调整大小。QLabel 有一个选项可以让它根据它允许占用的大小来缩放它的内容，所以如果你创建一个 QLabel，设置它的像素图并设置缩放内容属性，那么它会自动为你做快速缩放调整大小。您可能仍需要将其缩小以最小化。

希望有帮助。如果您仍有问题，请告诉我。

# mysql - 在 MySQL 中加速 GROUP BY 类型查询的最快方法是什么？

> ID：11074901
> 
> 赞同：1
> 
> 时间：2012-06-17T21:25:05.793
> 
> 标签：mysql, performance, group-by

我有一个文章表、一个作者表和一个将文章映射到作者的表。

我正在执行以下查询以找出文章最多的作者：

```
SELECT a.*, count(*) c
FROM articleAuthors aa
LEFT JOIN authors a ON aa.author_id=a.id
GROUP BY (author_name)
ORDER BY c DESC LIMIT 50 
```

但是，此查询需要一整分钟才能完成。该数据库在articles_to_authors 表中有大约1,000,000 条记录。

我怎样才能加快这个 GROUP BY 查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:39:00.980

假设 articleAuthors 表有 50 多个不同的作者，我将只预查询该组件并限制为您想要的 50 条记录。确保 (author_id) 上存在索引。此外，确保您的作者表在 (id) 上有一个索引。将您的查询更改为

```
select
      a.*,
      JustAuthorIDs.cntPerAuthor
   from
      ( select 
              aa.author_id, 
              count(*) cntPerAuthor
           from
              articleAuthors aa
           group by 
              aa.author_id
           order by
              cntPerAuthor DESC
           limit 50 ) JustAuthorIDs
      JOIN Authors a
         on JustAuthorIDs.author_ID = a.id 
```

预查询中按计数递减的顺序将预刷新并首先按最大计数进行预排序，并在 50 条记录后停止。然后，简单地连接到作者表以获取名称和其他任何内容。

我根据作者 ID 而不是名称来分组，如果您有两个名为“广告牌”的作者...实际 ID 在他们两个之间是不同的。

现在，由于以上是查询，您将始终需要每次查询所有百万条记录。对于这样的事情，最好在作者表中添加一个“AuthoredItems”列。然后，通过 authorArticles 表上的触发器，当添加或删除条目时，只需更新 author 表上一位作者的最终计数。然后，在“AuthoredItems”列上建立索引。然后，您可以通过执行超级简化查询

```
select a.*
   from authors a
   order by a.AuthoredItems
   limit 50 
```

# android - 在（android？）p2p 应用程序中实现 NAT 穿越技术的示例

> ID：11074903
> 
> 赞同：0
> 
> 时间：2012-06-17T21:25:37.270
> 
> 标签：android, p2p, traversal, nat

我目前正在开发一个 Android 点对点应用程序。当然，我们很快意识到最困难的任务之一是弄清楚如何穿越 NAT 以允许 2 个（或更多）设备通过 Internet 相互通信，而不管它们之间的距离如何。

我一直在做一些研究，阅读了 STUN(T)、ICE、TURN 并发现了一些实现，包括 Ice4j、JStun、[IcedJava](http://java.net/projects/siptools/pages/IcedJava)、[NUTSS](http://nutss.gforge.cis.cornell.edu/stunt.php) ...

您是否知道这些技术中至少一种的实际使用示例，可​​能在现有（android 或其他）对等应用程序中？对我们最有用的是那些不需要应用程序使用任何额外中继服务器的应用程序。

也欢迎其他建议！

提前非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:42:43.580

只需通过 NAT 知道设备的 Ip 和端口，其他设备连接到该设备。IcedJava 实现 RFC5389，JStun 实现 RFC3489。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T14:24:56.570

AFAIK 使用 Android 应用程序无法避免某种中继服务器：电信公司分配给移动设备的 IP 不是固定的，也不能公开访问：您无法建立与移动设备的直接连接。

# css - yui css reset 导致我的图像背景被截断

> ID：11074904
> 
> 赞同：0
> 
> 时间：2012-06-17T21:25:51.110
> 
> 标签：css, yui

我不确定我必须设置什么来覆盖 yui css reset 所做的任何事情，但这是我添加 bg 的方法：

```
body{background:#ffffff url('../assets/images/background/bg.jpg') no-repeat center top; font-family:HelveticaNeue,Helvetica Neue,Helvetica,Arial,sans-serif; width:100%; height:100%; margin:0px; padding:0px;} 
```

问题是我的bg图像停在我页面上的某个点，我认为它与正文中的内容量没有任何关系。当然，当我删除重置时，它看起来很好。

我没有对'html'标签做任何事情，但也许我应该这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:30:38.237

是的，你应该添加这个

```
html, body {
    height: 100%;
} 
```

# php - 如何从 php 文件中读取每一行？

> ID：11074908
> 
> 赞同：1
> 
> 时间：2012-06-17T21:26:44.530
> 
> 标签：php, file, login

我是学习 php 的新手，在我的第一个程序中，我想制作一个基本的 php 网站，该网站具有登录功能以及用户和密码数组。

我的想法是将用户名存储为列表参数并将密码作为内容，如下所示：

```
arr = array(username => passwd, user => passwd); 
```

现在我的问题是我不知道如何从文件（`data.txt`）中读取，所以我可以将它添加到数组中。

```
data.txt sample:
username passwd
anotherUSer passwd 
```

我已经打开文件`fopen`并将其存储在`$data`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-17T21:30:45.667

您可以使用该[`file()`](http://php.net/file)功能。

```
foreach(file("data.txt") as $line) {
    // do stuff here
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T21:31:28.880

修改这个 PHP 示例（取自官方 PHP 站点...*总是*先检查！）：

```
$handle = @fopen("/path/to/yourfile.txt", "r");
if ($handle) {
    while (($buffer = fgets($handle, 4096)) !== false) {
        echo $buffer;
    }
    if (!feof($handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($handle);
} 
```

至：

```
$lines = array();
$handle = @fopen("/path/to/yourfile.txt", "r");
if ($handle) {
    while (($buffer = fgets($handle, 4096)) !== false) {
        lines[] = $buffer;
    }
    if (!feof($handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($handle);
}

// add code to loop through $lines array and do the math... 
```

请注意，您不应将登录详细信息存储在另外未加密的文本文件中，这种方法存在严重的安全问题。我知道您是 PHP 新手，但最好的方法是将其存储在数据库中并使用 MD5 或 SHA1 等算法加密密码，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T21:32:03.667

您不应该将敏感信息存储为纯文本，但要回答您的问题，

```
$txt_file = file_get_contents('data.txt'); //Get the file
$rows = explode("\n", $txt_file); //Split the file by each line

foreach ($rows as $row) {
   $users = explode(" ", $row); //Split the line by a space, which is the seperator between username and password
   $username = $users[0];
   $password = $users[1];
} 
```

[看看这个线程。](https://stackoverflow.com/questions/1289061/best-way-to-use-php-to-encrypt-and-decrypt)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T21:29:45.730

这也适用于非常大的文件：

```
$handle = @fopen("data.txt", "r");
if ($handle) {
    while (!feof($handle)) { 
        $line = stream_get_line($handle, 1000000, "\n"); 
        //Do Stuff Here.
    } 
fclose($handle);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T21:36:40.170

使用 file() 或 file_get_contents() 创建数组或字符串。

根据需要处理文件内容

```
// Put everything in the file in an array
$aArray = file('file.txt', FILE_IGNORE_NEW_LINES);

// Iterate throug the array
foreach ($aArray as $sLine) {

    // split username an password
    $aData = explode(" ", $sLine);

    // Do something with the username and password
    $sName = $aData[0];
    $sPass = $aData[1];
} 
```

# javascript - 我应该如何组织一个对象以使一切尽可能地解耦？

> ID：11074909
> 
> 赞同：3
> 
> 时间：2012-06-17T21:27:00.170
> 
> 标签：javascript

我终于问这个问题了，因为我从来没有真正找到答案。如果我有一个结构如下的 javascript 对象：

```
var someObj = {

    "categoryA" : {
        "func1" : function(){},
        "func2" : function(){},
    },

    "categoryB" : {
        "func3" : function(){},
        "func4" : function(){},
    }

} 
```

`func4`想打电话`func2`。我有什么方法可以不说就叫`someObj.func2()`吗？在我看来，这很丑陋，因为它确保应用程序不能轻易重命名，并且似乎更紧密地耦合了内部功能。或者这只是它通常的组织方式并且不被视为问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:40:51.777

您始终可以将您的对象声明重构为如下所示的内容：

```
var someObj = (function() {

    function func1(){}
    function func2() {}
    function func3() {}

    function func4() {
        func2();
    }

    var self = {
        "categoryA" : {
            "func1" : func1,
            "func2" : func2,
        },

        "categoryB" : {
            "func3" : func3,
            "func4" : func4,
        }
    };

    return self;
}()); 
```

它通常被称为“模块模式”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T21:53:43.837

您可以使用一些“私有”变量名称在模块内部使用（在我的示例中为“me”）并将其“导出”到另一个变量以供外部使用（“someObj”）。

```
var someObj = (function(){
  var me = {
    A:{
      fn1:function() {return 1}
    },
    B:{
      fn2:function() {return me.A.fn1()}
    }
  };
  return me;
})();

someObj.B.fn2() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T21:47:50.600

由于以下原因，这实际上是不可能的。想象一下这样的事情：

```
var obj1 = {}, obj2 = {};

var categoryA = {
    "func1" : function(){},
    "func2" : function(){},
};

var categoryB = {
    "func3" : function(){},
    "func4" : function(){},
};

obj1.categoryA = categoryA;
obj1.categoryB = categoryB;

obj2.categoryA = categoryA;
obj2.categoryB = categoryB; 
```

你可以看到`obj2.categoryB.func4()`不知道该怎么做。

# android - 重写 AsyncTask 的构造函数时应该调用 super() 吗？

> ID：11074913
> 
> 赞同：11
> 
> 时间：2012-06-17T21:27:10.957
> 
> 标签：android, android-asynctask, overriding

在我在网上看到的许多示例中，`AsyncTask`被扩展，构造函数被覆盖，并且 super() 没有被调用。例如，在hackbod的[这个答案中：](https://stackoverflow.com/a/3359003/312499)

```
static class Worker extends AsyncTask<URL, Integer, Long> {
    MyActivity mActivity;

    Worker(MyActivity activity) {
        mActivity = activity;
    }

    [...]

} 
```

新的构造函数不会回调父构造函数。

CommonsWare在[这个示例项目](https://github.com/commonsguy/cw-android/blob/master/Rotation/RotationAsync/src/com/commonsware/android/rotation/async/RotationAsync.java)中有类似的代码。

那么这是正确的吗？还是`super()`真的应该叫？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-17T21:42:16.223

如果未显式调用 super()，则默认调用超级构造函数。所以真的没有任何区别。我会使用较短的版本（省略 super()），这似乎是 Java 中的常见做法。

ps 另请参阅此线程：[Java 中的默认构造函数和继承](https://stackoverflow.com/questions/525548/default-constructors-and-inheritance-in-java)

# ruby-on-rails-3 - 根路由上的 Rails assert_routing 引发 ActionController::RoutingError

> ID：11074918
> 
> 赞同：0
> 
> 时间：2012-06-17T21:27:39.663
> 
> 标签：ruby-on-rails-3, rspec2

我正在尝试测试请求根路径 ( `/`) 路由到我的 beta 控制器的`:new`操作。当我手动（在我的浏览器中）执行此操作时，它工作正常。但是我的自动化测试失败了`No route matches "/"`。

在`config/routes.rb`我有

```
MyRailsApp::Application.routes.draw do
  root to: 'beta#new' # Previously: `redirect('/beta/join')`
end 
```

在我`spec/routing/root_route_spec.rb`尝试过

```
require 'spec_helper'
describe "the root route" do
  it "should route to beta signups" do
    get('/').should route_to(controller: :beta, action: :new)
  end
end 
```

并且也尝试过

```
require 'spec_helper'
describe "the root route" do
  it "should route to beta signups" do
    assert_routing({ method: :get, path: '/' }, { controller: :beta, action: :new })                                                                                                                                     
  end
end 
```

但两人都抱怨`No route matches "/"`

```
1) the root route should route to the beta signups
   Failure/Error: get('/').should route_to "beta#new"
     No route matches "/"
   # ./spec/routing/root_route_spec.rb:5:in `block (2 levels) in <top (required)>' 
```

当我在浏览器中转到 时`localhost:3000`，我已正确路由到该`BetaController::new`操作。

什么解释了`No route matches "/"`错误？

我正在使用 Rails 3.1.3 和 RSpec-2.10。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:22:39.027

您应该测试`/`重定向到`/beta/join`，然后作为单独的问题测试`/beta/join`路由到控制器的`:new`操作。`:beta`

重定向是在 中测试的`requests`，而不是`routing`.

```
# spec/requests/foobar_spec.rb
describe 'root' do
  it "redirects to /beta/join" do
    get "/"
    response.should redirect_to("/beta/join");
  end
end 
```

和

```
# spec/routing/beta_spec.rb
...
it 'routes /beta/join to the new action'
  get('beta/join').should route_to(:controller => 'beta', :action => 'new')
end 
```

# jquery - jQuery 仅在特定浏览器宽度之间重新加载浏览器窗口

> ID：11074920
> 
> 赞同：1
> 
> 时间：2012-06-17T21:28:07.743
> 
> 标签：jquery, resize, window, refresh, reload

我成功地使用了这段代码：

```
$(window).bind('resize',function() {
    window.location.href = window.location.href;
}); 
```

但我的问题是，我只想在 320px 和 480px 之间缩放时重新加载/刷新窗口。例如，如果我在 480px 和 960px 之间调整大小，我不需要重新加载窗口，所以我需要找到一种方法将其限制为 <= 480px。

任何帮助将不胜感激。

谢谢，

**在下面编辑**

回应科林克：

好的，所以我有点让它使用这个：

```
$(window).bind('resize',function() {

    var winWidth = $(window).width();

    if (winWidth < 480) {

        window.location.href = window.location.href;

    } 
    else {
        // nothing
    }

}); 
```

现在的问题是，它不断地在 iphone 上重新加载。如果我在 iPhone 上从纵向转到横向，它只会一遍又一遍地重新加载。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T21:29:06.260

只需使用一个简单的`if`语句，检查窗口的大小并仅在必要时重新加载。

# css - 输入区域在 IE 和 Chrome 中显示不同

> ID：11074924
> 
> 赞同：0
> 
> 时间：2012-06-17T21:28:34.353
> 
> 标签：css, internet-explorer, google-chrome

我使用表格和标准 CSS 为我的网站创建了一个登录区域。我的问题是 IE 在那里添加了一些东西，这使得它与 Firefox 和 chrome 呈现不同。

我希望 input[type=text"] 是固定宽度并像在 chrome 中一样显示在表格中。

![上图是 IE，下图是 Chrome](../Images/2d184ee76469fad022bef449c1f5b844.png)

上图是 IE，下图是 Chrome。IE 没有设置固定宽度，而是在其中添加了某种填充。

CSS：

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p,
blockquote, pre, a, abbr, acronym, address, big,
cite, code, del, dfn, em, font, img,
ins, kbd, q, s, samp, small, strike, sub, sup, tt, var, dl, dt, dd, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
center, u, b, i, marquee {margin: 0px;padding: 0px;/*border: 0px;*/outline: 0px;}
body  {background: #F4F4F3 url(../images/bg.gif) repeat 0 0;font-size: .80em;font-family: ‘Lucida Grande’, ‘Lucida Sans’, ‘Lucida Sans Unicode’, Arial, sans-serif;margin: 0px;padding: 0px;color: #2B2818;}
#ctl00_login td {max-height:28px;padding:0px;}
#ctl00_login input[type="text"] {padding:0px; margin:0px;width:155px;} 
```

.aspx 文件

```
 <div id="login" runat="server" visible="false">
                    <table style="margin: 0 auto;" cellpadding="0" cellspacing="0" border="1">
                        <tr>
                            <td valign="middle" width="64px">
                                Username:
                            </td>
                            <td valign="middle">
                                <asp:TextBox ID="logUser" runat="server" CssClass="login-input"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="logUserRqd" ControlToValidate="logUser" runat="server"
                                    Text="&nbsp;<img src='images/err.png' alt='*' title='Please enter your username'>"
                                    ErrorMessage="Please enter your username"></asp:RequiredFieldValidator>
                            </td>
                        </tr>
                        <tr>
                            <td valign="middle" width="64px">
                                Password:
                            </td>
                            <td valign="middle">
                                <asp:TextBox TextMode="Password" ID="logPwd" runat="server" CssClass="login-input"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="logPwdRqd" ControlToValidate="logPwd" runat="server"
                                    Text="&nbsp;<img src='images/err.png' alt='*' title='Please enter your password'>"
                                    ErrorMessage="Please enter your password"></asp:RequiredFieldValidator>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <a class="fancybox fancybox.iframe" href="~/Account/Register.aspx">Register</a>
                            </td>
                            <td align="right">
                                <asp:Button ID="loginBtn" runat="server" Text="Login" onclick="loginBtn_Click" class="button" Style="margin: 3px 25px 0 0;" />
                            </td>
                        </tr>
                    </table>
                </div> 
```

**编辑** 我发现第二个的固定宽度是因为它是 type="password" 而不是文本，所以这是固定的。现在只是填充问题。

**更新** 所以不确定发生了什么。没有更改任何 CSS 或任何内容，而是将 JQuery 1.7.1 添加到我的页面中，然后在页面上执行 ctrl+F5 并突然修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:42:47.627

你用的是哪个版本的IE？已知某些版本的 IE 会错误地显示 HTML，尤其是填充/边距和对齐方式。事实上，IE（尤其是旧版本）的问题是如此令人沮丧和耗时，以至于一家澳大利亚电子商务公司正在向 IE7 的用户收取额外费用，以支付与支持它相关的额外费用！

如前所述，CSS 重置是解决此问题的一种方法。

解决此问题的另一种方法是有条件地在模板中包含特定于 IE 的样式表。例如。

```
<!--[if lte IE 8]>
    <link href="older.css" type="text/css" rel="stylesheet">
<![endif]--> 
```

此示例将样式表“older.css”应用于任何早于 8 的 IE 版本（例如 IE7、IE6），但不适用于 IE8 本身。您可以使用 lte/gte 来定位小于/大于指定版本的版本，或者您可以完全省略它们以定位特定版本。如果您愿意，也可以针对其他浏览器。

这不是您问题的完整答案，但应该为您指明正确的方向。我希望它有帮助！

# java - 新 Java 套接字的状态

> ID：11074933
> 
> 赞同：3
> 
> 时间：2012-06-17T21:29:12.727
> 
> 标签：java, sockets

当我在 Java 中声明时

```
Socket s = new Socket((String)null, 12345); 
```

这实际上是打开一个套接字并使用系统和网络资源，还是推迟到我附加输入/输出缓冲区？我想`Socket`在我的程序开始时创建一个对象，该对象全部设置为连接到服务器，并根据需要打开/关闭它，而不必传递地址和端口（看起来更干净），但是如果这意味着端口将一直打开，则不会。

**编辑**
从答案看来，这不会像我想要的那样工作。如何创建一个全部设置了地址并且只需要连接的*封闭套接字？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:36:10.860

[http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#Socket(java.net.InetAddress,%20int)](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#Socket(java.net.InetAddress,%20int)) <- 这取决于您使用的构造函数。对于您指定的构造函数，它会连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T21:42:22.850

根据[http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#Socket(java.lang.String,int)](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#Socket(java.lang.String,int)) ，您初始化对象的方式将被连接.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T21:59:57.423

Socket 的每个构造函数都会创建一个底层套接字，它使用系统资源，并且除了无参数构造函数之外的所有构造函数都连接它，它使用网络资源。没有像 'attach[ing] an input/output buffer' 到 Socket 这样的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T21:50:08.553

供您编辑：您必须设置自己的类来保存所有设置信息，然后可以稍后打开。也许你只是将​​数据存储在那里并创建一个返回套接字的方法。这取决于你，有很多方法可以做到这一点。但请确保所有套接字最后都正确关闭；）

# android - 当我想在 java servlet 中访问他时，从 android 应用程序发送的 JSON 对象为空

> ID：11074934
> 
> 赞同：1
> 
> 时间：2012-06-17T21:29:13.627
> 
> 标签：android, json, servlets

我正在用 android 编写一个应用程序，我正在将一个 json 对象发送到一个 java servlet。

这是安卓代码：

```
HttpClient httpClient = new DefaultHttpClient();
HttpPost post = new HttpPost(URL);
JSONObject jsonObjectToPass  = returnJsonStringObject();
List<NameValuePair> postParams = new ArrayList<NameValuePair>();
postParams.add(new BasicNameValuePair("jsonGPSParameter",jsonObjectToPass.toString()));
UrlEncodedFormEntity entity = new UrlEncodedFormEntity(postParams);
entity.setContentEncoding(HTTP.UTF_8);
entity.setContentType("application/json");   
post.setHeader("Content-type", "application/json");
post.setEntity(entity);
response = httpClient.execute(post); 
```

这是java servlet代码

```
request.getParameter("jsonGPSParameter"); 
```

问题是 getParameter() 方法返回 null。我无法发现问题。如果有人可以帮助我，那将是一个很大的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:10:29.913

为了使代码正常工作，我必须从 android 代码中删除下一行：

```
entity.setContentType("application/json");   
post.setHeader("Content-type", "application/json"); 
```

# c# - 在 C# 中创建虚拟驱动器

> ID：11074936
> 
> 赞同：0
> 
> 时间：2012-06-17T21:29:44.793
> 
> 标签：c#, winapi

我正在寻找创建虚拟驱动器的代码。我遇到了 DefineDosDevice API 函数，但该函数存在一个大问题。我无法更改已创建驱动器的 VolumeLabel。

[这里创建虚拟硬盘](https://stackoverflow.com/questions/3753758/creating-virtual-hard-drive)就是一个例子。如果您将 SetVolumeName 与该驱动器一起使用，则会返回错误。

有人知道如何解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:39:27.580

您无法设置“DosDevice”的卷名，因为没有可以存储它的地方。物理卷通常有一个隐藏的元数据（类似于`$VOLUME`NTFS）文件来存储卷名。虚拟设备不存在这样的位置，因为它只是文件夹的别名）。

# mysql - 我怎样才能拥有一个每天只有一次的数据库表？

> ID：11074938
> 
> 赞同：1
> 
> 时间：2012-06-17T21:30:12.623
> 
> 标签：mysql

嗨，我正在用 Java 语言开发一个纳税申报程序，这是我第一次用数据库开发一个程序。我有三个表格，这意味着我的数据库中需要三个表，我将在其中存储每个表格的信息。我的第一个表格用于客户，第二个用于预订，第三个用于税务记录我已成功使客户表格与数据库一起使用，但由于我需要正确的语法，因此我卡在了预订表格中。在我的预订表中，我需要存储日期和时间，这是合乎逻辑的，我每天只有一个预订时间，我该怎么做。我将不胜感激任何帮助谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:33:41.720

这取决于字段的类型。

如果字段为日期，则某些实现假定时间为 00:00:00 ...其中许多只是存储确切的时间戳，但会根据需要截断并给出值。

最好的方法是在插入时，自己手动指定确切的时间。这是最跨数据库的做事方式。

# mysql - MySQL选择所有关系在哪里x

> ID：11074945
> 
> 赞同：0
> 
> 时间：2012-06-17T21:31:00.220
> 
> 标签：mysql, sql, join

我有两个 MySQL 表 j 和 t，以及第三个规范化表 jt。

```
t.tID

j.jID

jt.status
jt.tID
jt.jID 
```

如何在所有 jt.status="x" 的地方选择所有 j？也就是说，我想选择 aj 的所有 jt 都是 x 时，而不仅仅是 aj 的一个或多个 jt 是 x 时。

我认为表 t 可能与此无关。

（我希望我能理解自己，我发现它很难解释。如果你愿意，可以评论问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:35:24.820

看起来好像您想要该[`not exists`](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)子句。

```
select jt.*
  from jt
 where not exists ( select 1 from jt where status <> 'x' and jID = jt.jID ) 
```

这会选择该表`jt`中不`x`存在单个值的所有内容。

# c# - 如何从子窗口更改 menuStrip 菜单文本？

> ID：11074948
> 
> 赞同：3
> 
> 时间：2012-06-17T21:31:35.933
> 
> 标签：c#, winforms, mdi, menustrip

我需要从子窗口更改主窗口（mdi 容器）的 menuStrip 项文本，

像这样的东西：

> 文件
> -登录

到

> 文件
> -注销

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:56:45.107

在主窗口中添加这些：

```
public static MainForm Current;

public string FileLogin
{
    get { return fileLoginToolStripMenuItem.Text; }
    set { fileLoginToolStripMenuItem.Text = value; }
} 
```

显然，使用您为登录/注销菜单项的菜单条项设置或自动设置的名称。然后在主窗体的窗体构造函数中，设置 Current.

```
public MainForm()
{
    InitializeComponent();
    Current = this;
} 
```

然后从另一个窗口/表单你可以调用（设置值）：

```
MainForm.Current.FileLogin = "Logout"; 
```

**但比这更好**的是你在你的子窗口上做一个事件，

```
public event Action UserLoggedIn = delegate { }; 
```

在 MainForm 上让 MainForm 订阅该事件，与上述相反...

```
ChildForm.Current.UserLoggedIn += () => FileLogin = "Logout"; 
```

并让孩子在用户登录时引发事件，使用`UserLoggedIn()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T22:02:33.520

您可以向您的 MDI 容器添加可从其任何子级调用的公共方法。
假设调用了这个方法`SetLoggedStatus`

（在 MDI 容器中）

```
public void SetLoggedStatus(bool status)
{
    ToolStripMenuItem loginMenu = MenuStrip1.Items(0) as ToolStripMenuItem:
    loginMenu.DropDownItems[0].Text = (status == true ? "Logout" : "Login");
} 
```

现在我们需要从 MDI Child 窗体调用这个公共方法。每个 MDIChild 表单都有一个指向 MDIParent 的属性 我们可以使用该属性将通用表单实例转换为正确的 MDI 父级

（在登录后的 MDIChild 中，假设 MDIParent 是一个名为 MyParentForm 的表单类）

```
MyParentForm f = this.MDIParent as MyParentForm;
if(f != null) 
    f.SetLoggedStatus(true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T08:49:49.567

这是您可以从 MDI Child 访问主菜单项的方式：

```
// this button in the child form
private void button1_Click(object sender, EventArgs e) {  
   ToolStripMenuItem tsm;
   // file menu
   tsm = (ToolStripMenuItem)this.MdiParent.MainMenuStrip.Items[0];
   MessageBox.Show( tsm.DropDownItems[0].Name);
   // first menu under File Menu
   tsm.DropDownItems[0].BackColor = Color.Red;
   // second menu under File Menu
   tsm.DropDownItems[1].BackColor = Color.Wheat;
} 
```

您可以以相同的方式更改字体或文本；您可以使用 . 而不是背景颜色`.text`。

# objective-c - ThreadedCoreData 示例（来自 Apple）是否在主线程上创建 NSManagedObjectContext？

> ID：11074949
> 
> 赞同：2
> 
> 时间：2012-06-17T21:31:44.400
> 
> 标签：objective-c, ios, core-data, thread-safety, nsmanagedobjectcontext

来自[http://goo.gl/MkV8V](http://goo.gl/MkV8V)

您必须在将要使用的线程上创建托管上下文。如果您使用 NSOperation，请注意它的 init 方法是在与调用者相同的线程上调用的。因此，您不能在队列的 init 方法中为队列创建托管对象上下文，否则它与调用者的线程相关联。相反，您应该在 main（对于串行队列）或 start（对于并发队列）中创建上下文。

来自[http://goo.gl/6CMO4](http://goo.gl/6CMO4)

在 ConnectionDidLoading 方法中：

```
ParseOperation *parseOperation = [[ParseOperation alloc] initWithData:self.earthquakeData];
[self.parseQueue addOperation:parseOperation];
[parseOperation release];   // once added to the NSOperationQueue it's retained, we don't need it anymore 
```

ConnectionDidiLoading 正在主线程上调用。现在在 ParseOperation::initWIthData 方法中，我们有这样的东西：（参见 ParseOperation.m 文件）

```
 // setup our Core Data scratch pad and persistent store
    managedObjectContext = [[NSManagedObjectContext alloc] init];
    [self.managedObjectContext setUndoManager:nil];

    SeismicXMLAppDelegate *appDelegate = (SeismicXMLAppDelegate *)[[UIApplication sharedApplication] delegate];
    [self.managedObjectContext setPersistentStoreCoordinator:appDelegate.persistentStoreCoordinator]; 
```

# #

我的理解是这个 managedObjectContext 仍然是在主线程上创建的。

如果有人澄清或纠正我的理解，将不胜感激，因为 Apple 的示例代码不太可能不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:10:29.683

在我看来你是对的。Apple 似乎在此示例代码中打破了自己的规则。然而，在实践中，这似乎并没有太多宣传，只要托管对象上下文仅在一个线程上使用，您就是安全的，无论上下文是在哪个线程上创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T22:30:10.163

好点在这里。似乎代码不正确（但也许我错了）。根据我的经验，您应该在 start 方法中创建上下文（例如），否则可能会发生一些奇怪的事情。

另一条规则是你不能`NSManagedObject`在踏板之间通过。`NSManagedObjectID`而是通过。在传递它们之前，您需要保存到磁盘。

这些规则已在 iOS 5 中强制执行。从 iOS 5 开始，您可以利用 Core Data 新 API 在私有队列（还有一个主队列）中创建上下文并在那里执行长时间运行的计算。此外，如果您`NSManagedObject`在线程之间传递，则会发生异常。

# php - 正则表达式 php preg_match 尝试将字符串验证为 sha1

> ID：11074951
> 
> 赞同：0
> 
> 时间：2012-06-17T21:32:06.240
> 
> 标签：php, regex, preg-match, sha1

我正在尝试使用 sha1 验证字符串`preg_match()`，但似乎失败了。

这是我正在寻找的示例字符串

```
$str = 'ad209b77134af9c598894a36ed46fc703a0c1e78'; 
```

这是我试图让它匹配的模式，任何有足够正则表达式经验的人都能够告诉我出了什么问题，因为我对正则表达式很糟糕。

```
$pattern = '#^[a-f0-9]{40}$#i'; 
```

那么这就是我使用它的方式

```
return (bool) preg_match($pattern, $str)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:57:09.047

我在我正在构建的函数中发现了我的错误，它的原因是在我称之为“模式”、“模式”的一个特定规则上，所以它导致了意外的错误结果。

# java - 找不到所需的 Maven 存储库/原型

> ID：11074952
> 
> 赞同：0
> 
> 时间：2012-06-17T21:32:14.387
> 
> 标签：java, eclipse, maven, resteasy

我正在尝试遵循本教程[Resteasy](http://www.javacodegeeks.com/2011/01/restful-web-services-with-resteasy-jax.html)。为此，我必须从中获取 *webapp-jee5*原型`org.codehaus.mojo.archetypes`并使用它。

我的问题是我没有在我的目录中看到它。有谁知道我如何导入这个？

# php - 如何在 php 变量中获取 iframe 的内容？

> ID：11074955
> 
> 赞同：1
> 
> 时间：2012-06-17T21:32:34.217
> 
> 标签：php, javascript, html

我的代码有点像这样：

```
<?php

if($_REQUEST['post'])
{
    $title=$_REQUEST['title'];
    $body=$_REQUEST['body'];
    echo $title.$body;
}
?>

<script type="text/javascript" src="texteditor.js">
</script>

<form action="" method="post">
       Title: <input type="text" name="title"/><br>

       <a id="bold" class="font-bold"> B </a> 
       <a id="italic" class="italic"> I </a>

       Post: <iframe id="textEditor" name="body"></iframe>

       <input type="submit" name="post" value="Post" />
</form> 
```

texteditor.js 文件代码为：

```
$(document).ready(function(){
document.getElementById('textEditor').contentWindow.document.designMode="on";
document.getElementById('textEditor').contentWindow.document.close();
$("#bold").click(function(){
    if($(this).hasClass("selected")){
        $(this).removeClass("selected");
    }
    else{
        $(this).addClass("selected");
    }
    boldIt();
});

$("#italic").click(function(){
    if($(this).hasClass("selected")){
        $(this).removeClass("selected");
    }
    else{
        $(this).addClass("selected");
    }
    ItalicIt();
});

});

function boldIt(){
    var edit = document.getElementById("textEditor").contentWindow;
    edit.focus();
    edit.document.execCommand("bold", false, "");
    edit.focus();
}

function ItalicIt(){  
    var edit = document.getElementById("textEditor").contentWindow;
    edit.focus();
    edit.document.execCommand("italic", false, "");
    edit.focus();
}

function post(){
    var iframe = document.getElementById("body").contentWindow;
} 
```

实际上，我想从中获取数据`text editor`（使用`iframe`and创建`javascript`）并将其存储在其他地方。我无法获取在编辑器中输入的内容（即 iframe）。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:33:51.360

你不能这样做，因为这是不允许的。

Javascript 不允许访问其他框架/iframe，因为它会导致安全漏洞。

尝试在 a 中实现您的编辑器内联，`<div></div>`而不是`iframe`

# python - 此代码中导致脚本错误的内容是什么？

> ID：11074956
> 
> 赞同：1
> 
> 时间：2012-06-17T21:32:39.527
> 
> 标签：python

```
if (blue_percentage > (red_percentage * 0.49)) and \
   (red_percentage < ((blue_percentage / 1.44) + 1)) and \
   (red_percentage > ((blue_percentage / 4.35)-1) and \
   (blue_decimal > green_decimal) and \
   (red_decimal > green_decimal):
    print "<div>The hue is: <b>Purple</b>.</div>" 
```

它说

```
: 
```

是无效的语法。

如果我拿出线

```
 (red_percentage > ((blue_percentage / 4.35)-1) and \ 
```

该程序工作得很好。我是在引起某种矛盾的陈述还是什么？我看不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:34:56.583

您在该行中缺少右括号：

```
(red_percentage > ((blue_percentage / 4.35)-1) and \ 
```

它应该是

```
(red_percentage > ((blue_percentage / 4.35)-1)) and \
#                                             ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T21:35:01.920

```
 (red_percentage > ((blue_percentage / 4.35)-1) and 
```

缺少一个结束`)`

如果您更熟悉代码/应用程序，则可能可以更简化这个大表达式，但现在，作为一种简单的方法来分解它并使其更易于管理，您可以尝试如下所示的方法。

请注意，我将整个表达式放在括号中，*消除了*[PEP-8](http://www.python.org/dev/peps/pep-0008/)推荐的那些讨厌的`\`行继续标记的需要。

*注意*：我并不是说这是一个理想的解决方案，只是一种管理复杂性的方法，直到您能找到更好的方法来分解相关表达式。

```
cond1 = blue_percentage > (red_percentage * 0.49)
cond2 = red_percentage < ((blue_percentage / 1.44) + 1)
cond3 = red_percentage > ((blue_percentage / 4.35) - 1)

if (cond1 and cond2 and cond3 and 
    (blue_decimal > green_decimal) and  
    (red_decimal > green_decimal)):
    # do stuff ... 
```

`( )`即使现在你也可以在 if 语句中使用你的大表达式，而无需更改代码中的任何内容并轻松摆脱`\`字符 - 它们有时可能是另一个问题来源。

# ruby-on-rails - 新的 ruby on rails 设置，gem 更新缓慢的问题

> ID：11074957
> 
> 赞同：2
> 
> 时间：2012-06-17T21:33:01.360
> 
> 标签：ruby-on-rails, rubygems, ubuntu-12.04

在我正在构建的新生产服务器上更新我的 gem 时遇到了一个大问题。

我在 Ubuntu 12.04 LTS 上运行它。

我有 ruby​​gems 版本 1.8.24、ruby 版本 1.9.3-p125、rails 版本 3.2.3。

每当我运行命令`gem update`或 gem`update --system`时，第一次完成需要几个小时。

关于为什么这会很慢的任何想法？

我正在尝试查看它是否与我们的防火墙有关；但是当我查看来自该特定服务器的流量时，我没有看到任何拒绝消息。

下面我在执行 sudo gem install rails -V 时添加了命令行视图

这不是所有代码，它只是最后 1000 行，因为我的终端窗口有限制。

希望这可以更深入地了解可能发生的事情

[gem install rails 详细代码](http://pastebin.com/cqmyxH6c)

# android - PhoneGap 中的 AutoCompleteTextView (ArrayAdapter) NullPointerException

> ID：11074958
> 
> 赞同：1
> 
> 时间：2012-06-17T21:33:14.270
> 
> 标签：android, cordova

我正在将一个旧的 WebOS 应用程序改编为 android，并且几乎所有的应用程序都使用 phonegap（因为旧代码是 javascript，这很方便），但我希望使用本机 AutoCompleteTextView 进行输入。我收到 NullPointerException，可能是由于我的异国情调混合应用程序。但让我从头开始。我像这样附加了一个页脚（根据我在这里找到的帖子）

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    super.loadUrl("file:///android_asset/www/index.html");

    /* ... boring things here ... */

    // http://stackoverflow.com/questions/7320910/android-phonegap-with-native-controls
        View footer = View.inflate(getContext(), R.layout.footer, null);
        root.addView( footer );

    // setContentView(root);
    // http://www.kwpro.net/blogs/2011/1/10/1651_Android_AutoComplete_Tutorial_Amendment.html        
} 
```

我在博客上发现了一些注释，建议我的问题的解决方案可能是 setContentView，但这似乎不起作用。无论如何，我使用这个（通过window.f.setAutoComplete（）通过java接口）从javascript中设置了一次自动完成文本。

```
public void setAutoComplete(String []s) {
    Log.d(TAG, "[native]: setting autocomplete text");

    AutoCompleteTextView textView = (AutoCompleteTextView) findViewById(R.id.inpu);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.list_item, s);
    textView.setAdapter(adapter);
} 
```

无论如何，一切似乎都正常。也就是说，选择列表会弹出，您有时可以选择一个（有时），然后我会收到强制关闭应用程序的 NullPointerException。我觉得自己没有能力处理这个问题，所以我想我会公开问。

异常转储如下所示：

```
W/dalvikvm( 1832): threadid=11: thread exiting with uncaught exception (group=0x409c01f8)
E/AndroidRuntime( 1832): FATAL EXCEPTION: WebViewCoreThread
E/AndroidRuntime( 1832): java.lang.NullPointerException
E/AndroidRuntime( 1832):        at android.widget.AbsListView$RecycleBin.getScrapView(AbsListView.java:5900)
E/AndroidRuntime( 1832):        at android.widget.AbsListView.obtainView(AbsListView.java:2003)
E/AndroidRuntime( 1832):        at android.widget.ListPopupWindow$DropDownListView.obtainView(ListPopupWindow.java:1168)
E/AndroidRuntime( 1832):        at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
E/AndroidRuntime( 1832):        at android.widget.ListPopupWindow.buildDropDown(ListPopupWindow.java:1095)
E/AndroidRuntime( 1832):        at android.widget.ListPopupWindow.show(ListPopupWindow.java:524)
E/AndroidRuntime( 1832):        at android.widget.AutoCompleteTextView.showDropDown(AutoCompleteTextView.java:1062)
E/AndroidRuntime( 1832):        at android.widget.AutoCompleteTextView.updateDropDownForFilter(AutoCompleteTextView.java:939)
E/AndroidRuntime( 1832):        at android.widget.AutoCompleteTextView.onFilterComplete(AutoCompleteTextView.java:921)
E/AndroidRuntime( 1832):        at android.widget.Filter$ResultsHandler.handleMessage(Filter.java:285)
E/AndroidRuntime( 1832):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 1832):        at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 1832):        at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:728)
E/AndroidRuntime( 1832):        at java.lang.Thread.run(Thread.java:856) 
```

我最好的猜测是，我遇到了“只有一个线程可以做 UI 的东西”......啊......范式，但我不确定如何解决这个问题，如果是这样的话，如果那不是案例，我不知道下一步该尝试什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:49:13.327

Never did get a response on this, but in case anyone else runs into it... The auto complete choices are part of the ui, so you have to ask the ui to update it. Pretty simple really. I had surmised it in the question itself, but didn't reason it out all the way.

```
public void setAutoComplete(String []s) {
    Log.d(TAG, "[native]: setting autocomplete text");

    autoCompleteArray = s;

    handler.post(new Runnable() {
        public void run() {
            hist.clear();
            for(int i=0; i<autoCompleteArray.length; i++)
                hist.add(autoCompleteArray[i]);
            hist.notifyDataSetChanged();
        }
    });
} 
```

# javascript - 如何清理这个 jQuery 函数？

> ID：11074959
> 
> 赞同：0
> 
> 时间：2012-06-17T21:33:14.823
> 
> 标签：javascript, jquery, coffeescript

我有这个函数，我想把它浓缩成一些迭代器。如何清理此功能？

都需要按顺序执行，如：当一个函数返回时，下一个函数开始。所有奇数子项都应在淡入后淡出，所有偶数子项应在淡入后不淡出。

请注意，这段代码在 CoffeeScript 中，所以没有分号。

在第 8 个孩子之后，我也遇到了问题（例如，如果我继续使用 '.title-sword:nth-child(9) 等），该功能将停止工作。我的想法是嵌入式功能的深度有限，但我无法验证这一点。

```
$('.title-sword:nth-child(2)').css('visibility', 'visible').hide().fadeIn('fast').fadeOut('fast', ->
    $('.title-sword:nth-child(3)').css('visibility', 'visible').hide().fadeIn('fast', ->
        $('.title-sword:nth-child(4)').css('visibility', 'visible').hide().fadeIn('fast').fadeOut('fast', ->
            $('.title-sword:nth-child(5)').css('visibility', 'visible').hide().fadeIn('fast', ->
                $('.title-sword:nth-child(6)').css('visibility', 'visible').hide().fadeIn('fast').fadeOut('fast', ->
                    $('.title-sword:nth-child(7)').css('visibility', 'visible').hide().fadeIn('fast', ->
                        $('.title-sword:nth-child(8)').css('visibility', 'visible').hide().fadeIn('fast').fadeOut('fast')
                    )
                )
            ) 
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:44:14.817

尝试这样的事情（没有 CoffeeScript，因为我只是一个普通的 JS 人）：

```
(function() {
    var i=2, elm,
        step = function() {
            elm = $('.title-sword:nth-child('+i+')');
            if( !elm) return;
            elm.css('visibility','visible').hide();
            if( i%2 == 0) elm.fadeIn('fast').fadeOut('fast',step);
            else elm.fadeIn('fast',step);
            i++;
        };
    step();
})(); 
```

此代码将从第二个孩子开始运行所需的功能，并重复直到没有更多孩子为止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T21:42:37.800

尝试这个：

```
$('.title-sword:nth-child(n+2):not(:nth-child(n+9))').css('visibility', 'visible').hide().fadeIn('fast').fadeOut('fast') 
```

[http://jsfiddle.net/RfHj2/1/](http://jsfiddle.net/RfHj2/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T21:45:20.403

假设元素都是兄弟姐妹，这应该有效：

```
function doFades($el){
    $el.css('visibility', 'visible').hide().fadeIn('fast').fadeOut('fast', function(){
            var $next=$(this).next();
            if($next.length){
                doFades( $next);
            }
    }); 
}

doFades( $('.title-sword:nth-child(2)') ); 
```

我不熟悉咖啡脚本的语法，但应该很容易修改

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T22:20:18.140

我更喜欢只运行一次选择器操作，然后遍历结果。这是一个可用于您的目的的通用函数：

```
fadeInOutChildren(parentSelector, lowChild, highChild) {
    var items = $(parentSelector).children();
    var index = lowChild;

    function next() {
        if (index <= highChild) {
            items.eq(index++).css('visibility', 'visible').hide().fadeIn('fast').fadeOut('fast', next);
        }
    }
    next();
}

fadeInOutChildren(".title-sword", 1, 7); 
```

# operating-system - 使用 linux 内核构建模块以实现自定义风格

> ID：11074961
> 
> 赞同：0
> 
> 时间：2012-06-17T21:33:29.767
> 
> 标签：operating-system, linux-kernel, kernel

我按照链接中给出的说明：http: [//blog.avirtualhome.com/how-to-compile-a-new-ubuntu-11-04-natty-kernel/](http://blog.avirtualhome.com/how-to-compile-a-new-ubuntu-11-04-natty-kernel/) 构建自定义内核并启动它。一切正常，除了在构建它时，我使用了选项 skipmodule=true （如此链接中给出的），所以我猜模块不是为这个内核构建的。所以我有两个问题：

1.  既然我已经构建了内核的其余部分，我如何只构建适合我的风格的模块？如果我没记错的话，“制作模块”只会为通用风格构建它。
2.  每次我对我的一个模块进行更改时，是否还需要我构建整个内核源代码“fakeroot debian/rules binary-i5”（i5 是我的自定义功能）？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T00:49:41.787

1) 要从模块源目录为特定内核构建 linux 内核模块，请执行以下操作：
`make -C {path-to-kernel-source} M=`pwd` modules`

-C 选项 tell 用于指向内核源代码树，它可以在其中找到内核的顶级 Makefile。M=`pwd` 选项将其指向模块源目录，在该目录中构建“模块”目标。

2) 不，不需要构建源内核。拥有内核源代码树或内核头文件就足够了。

# wamp - 如何使我的 wamp 图标变为绿色？

> ID：11074965
> 
> 赞同：11
> 
> 时间：2012-06-17T21:33:39.970
> 
> 标签：wamp, wampserver

1) 我在 windows XP 32bit 上安装了 32 位版本的 wamp 2.2E。该图标当前为橙色。我没有Skype的。

2）windows主机文件确实有这一行：127.0.0.1 localhost

3a) 尝试在浏览器中输入 //127.0.0.1/ 导致错误：“导航到网页已取消”

3b) 或 //localhost/ 导致错误：“访问被拒绝”

4) Apache 和 PHP 错误日志即使在重新启动服务后也是空的。

5）在services.msc下重新启动服务“wampmysqld”，没有帮助

6) 先停止然后重新启动所有服务没有帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T12:35:49.033

请注意，发生这种情况是因为端口 80 上运行了一些其他应用程序，该端口由 wamp 使用。

您可以通过 wamp-> apache-> service -> Test port 80 检查。它将列出端口 80 使用的应用程序。

在我们的例子中 IIS 服务器正在运行 http 服务，所以启动任务管理器，首先单击显示所有进程，停止 HTTP

在此修复后，我在 localhost 上遇到了 IIS 页面问题，当我们在 WINDOWS 文件夹中检查您的主机文件的以下步骤时解决了该问题，如果条目 127.0.0.0 localhost 被注释，则通过删除该行前面的 # 来取消注释。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T00:59:50.367

问题已解决：我下载了旧版本的 wampserver 2.1e - 并且 bam，它可以工作。注意：在安装过程中，windows防火墙弹出，问我是否要继续阻止apache http的某些元素，我选择了unblock，bam它起作用了！现在我想知道这是否是 2.2e 的问题，如果我需要进入防火墙并且某些东西阻止了 apache。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-17T21:45:27.937

当您尝试启动 WAMP 时，请确保 Yahoo Messenger、Skype 或 ICQ 等应用程序未运行。如果这 3 个应用程序中的任何一个正在运行，WAMP 将无法启动，因为由于某种原因它们也使用本地地址。先停止应用程序，重启 WAMP，当它是绿色的时候，你可以重启你的 IM。希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-17T21:39:35.087

当 wamp 服务运行不正确时，您经常会卡在这个位置。从开始菜单运行“services.msc”查找任何提及 wamp（按字母顺序排序）的服务，并确保它们都显示“已启动”。

如果这仍然不起作用，请尝试停止 wamp 服务并重新启动它们，菜单可能需要一两分钟才能刷新和工作。

# r - 为什么函数中使用的 xpathSApply (XML-package) 与 lapply 一起使用时会引发错误

> ID：11074966
> 
> 赞同：0
> 
> 时间：2012-06-17T21:33:40.667
> 
> 标签：r, xpath

这是我的功能：

```
# Purpose: Scrape Floraweb.de for plant species data (photograph, sociology, ecology, anatomy)
# Author: Kay Cichini
# Date: 2012-06-10
# Output: PDF saved to created folder .~/FLORAWEB
# Packages: XML, jpeg, 
# Licence: cc by-nc-sa

floraweb_scraper <- function(input) {

    # I didn't get around this encoding issue other than with gsub..
    spch_sub <- function(x) {
        x <- gsub("Ã¼", "ü", x)
        x <- gsub("Ã¤", "ä", x)
        x <- gsub("Ã¶", "ö", x)
        x <- gsub("Ã„", "Ä", x)
        x <- gsub("Ãoe", "Ü", x)
        x <- gsub("Ã¼", "Ä", x)
        x <- gsub("Ã–", "Ö", x)
        x <- gsub("ÃŸ", "ß", x)
        x <- gsub("Ã©", "é", x)
        x <- gsub("Ã-", "í", x)
        x <- gsub("Ã¡", "á", x)
        x <- gsub("Â±", "~", x)
        x <- gsub("Â ", "", x)  # pattern for backspaces
    }

    # automated package installation:
    pkgs <- c("XML", "jpeg")

    pkgs_miss <- pkgs[which(!pkgs %in% installed.packages()[, 1])]
    if (length(pkgs_miss) > 0) {
        install.packages(pkgs_miss)
    }

    # load packages:
    require(XML)
    require(jpeg)

    # prepare input and get parsed script:
    input1 <- gsub("[[:space:]]", "+", input)
    URL <- paste("http://www.floraweb.de/pflanzenarten/taxoquery.xsql?taxname=", 
                 input1, sep = "")
    doc <- htmlParse(URL)

    # get returned species names (dismiss last row with additional info):
    sp <- xpathSApply(doc, "//div[@id='contentblock']//a", xmlValue)
    sp <- sp[1:length(sp)-1]

    # get species ids from contentblock:
    con <- getNodeSet(doc, "//div[@id='contentblock']//a")[1:len]
    urls <- sapply(con, xmlGetAttr, "href")
    id_1 <- gsub("[^0-9]", "", urls)

    # check matching and assign to resulting dataframe:
    match <- numeric()
    for (i in 1:len) {
        match[i] <- sum(unlist(strsplit(tolower(sp), " ")[i]) %in% unlist(strsplit(input, 
            " ")) == 0)
    }
    df <- data.frame(sp, id_1, match)

    # select the one with best match:
    sel <- id_1[rank(df$match)][1]

    # build urls for retrieving species data
    url <- paste("http://www.floraweb.de/pflanzenarten/druck.xsql?suchnr=", sel, sep = "")

    doc <- htmlParse(url)
    img_src <- xpathSApply(doc, '//*/p[@class="centeredcontent"]/img/@src')
    img_url <- gsub("../", "http://www.floraweb.de/", img_src, fixed = T)

    # get infos:
    infos <- xpathSApply(doc, "//div[@id='content']//p", xmlValue)[c(2, 7, 22, 33, 35, 14)]

    # replace special characters:
    infos <- spch_sub(infos)

    # make dir to save data:
    dir.create(path.expand("~/FLORAWEB/"), showWarnings = F)
    setwd(path.expand("~/FLORAWEB/"))

    # download image:
    download.file(img_url, "floraweb.jpg", mode = "wb")

    # open device:
    pdf(paste(spch_sub(df$sp[df$id_1 == sel]), ".FloraWeb.pdf", sep = ""), paper = "a4")

    # read image:
    img <- readJPEG("floraweb.jpg")
    w <- dim(img)[2]
    h <- dim(img)[1]

    # print img to plot region:
    par(mar = rep(0, 4), oma = rep(0, 4), mfrow = c(2, 1))
    plot(NA, xlim = c(0, w), ylim = c(0, h), xlab = "", ylab = "", axes = F, 
    type = "n", yaxs = "i", xaxs = "i", asp = 1)
    rasterImage(img, 0, 0, w, h)

    # print text:
    plot(NA, xlim = c(0, 1), ylim = c(0, 1), xlab = "", ylab = "", axes = F, type = "n", 
        yaxs = "i", xaxs = "i")
    # text left intendent and center adjustment:
    l <- 0.5
    c_adj <- c(0.5, 0.5)

    # plot text:
    text(l, 0.95, paste("Eingabe = ", input, " / Gefunden = ", infos[1], sep = ""), font = 2, adj = c_adj, cex = 0.7)
    text(l, 0.5, paste(strwrap(infos[-1], width = 112), collapse = "\n"), adj = c_adj, cex = 0.7)

    # Credit:
    text(l, 0.05, "Die hier verwendeten Daten sind der Internet-Seite FloraWeb.de entnommen.", 
        adj = c_adj, cex = 0.4, font = 3)

    graphics.off()
    message(paste(sp_name, "PDF wurde erzeugt\n\n", sep = "\n -- "))

    # remove jpegs:
    unlink(dir(pattern = ".jpg"))
}

# Examples:
floraweb_scraper("Poa alp")

pfl_liste <- c("leuc alp", "Poa badensis", "Poa alp")
lapply(pfl_liste, FUN = floraweb_scraper) 
```

它在第一个示例中运行良好，但与 lapply 一起使用时会引发错误 - 有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:22:33.703

对象`len`未定义

```
for (i in 1:len) {
        match[i] <- sum(unlist(strsplit(tolower(sp), " ")[i]) %in% unlist(strsplit(input, 
            " ")) == 0)
    } 
```

你可能已经在你的工作区中定义了它。当您调用第一个函数时，一切正常。也许你在使用`lapply`. 在您的函数中定义`len`可能会解决问题

# php - 写时复制会防止阵列上的数据重复吗？

> ID：11074970
> 
> 赞同：11
> 
> 时间：2012-06-17T21:34:13.633
> 
> 标签：php, arrays, duplicates, copy-on-write

我正在用 PHP 编写一个 Web API 客户端，它将 CSV 数据解析为关联数组，我想在使用这些数组时保护我的用户免受数据重复。

我的用户永远不会写入这些数组（理论上他们可以，但在实践中没有意义）。

现在我的问题是......如果我的用户将这些数组作为参数传递给方法，PHP 的写时复制机制是否会防止数据重复，或者任何未明确接受对数组的引用的方法都会收到完整的副本数组的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-17T22:18:52.617

顾名思义，写时复制意味着在写入内容之前不会复制任何变量；只要传递的变量中没有一个字节发生变化，PHP 就会自动避免不必要的重复，并且由于这种机制而无需使用显式引用。

[本文](http://hengrui-li.blogspot.de/2011/08/php-copy-on-write-how-php-manages.html)详细解释了这是如何在 PHP 的源代码中实现的，并且正如文章所建议的，使用 xdebug 可以通过函数 xdebug_debug_zval 轻松检查变量是否重复。

此外，这里关于 SO 的[答案](https://stackoverflow.com/questions/628938/what-is-copy-on-write)有更多关于 Copy-on-Write 的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T21:35:43.027

如果您不更改它们，则不会复制数组。

# c++ - 使用 dll 库编译程序

> ID：11074971
> 
> 赞同：0
> 
> 时间：2012-06-17T21:34:23.807
> 
> 标签：c++, dll, dllimport

我使用 WinInet 库。为了使程序正常运行，我必须安装 MS Redistributable Package，否则会弹出错误。是否可以使用程序编译库以使其在不安装库的情况下工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T21:56:02.797

MS Redistributable 包是 VC 运行时，它与`wininet.dll`. 一个选项是静态链接 VC 运行时（[`MT`编译器开关，而不是`MD`](http://msdn.microsoft.com/en-US/library/2kzt1wy3%28v=vs.80%29)）。

# android - 如何从 Android 开发者控制台上的应用程序列表中删除应用程序

> ID：11074972
> 
> 赞同：393
> 
> 时间：2012-06-17T21:34:36.707
> 
> 标签：android, google-play, google-play-console

有什么方法可以取消发布然后从 Android 开发者控制台上的应用程序列表中永久删除应用程序？

* * *

## 回答 #1

> 赞同：410
> 
> 时间：2012-06-17T21:37:12.700

**不可以，您可以取消发布，但一旦您的应用程序`live`投放市场，您就无法删除它**。（每个包名都是唯一的，Google 会记住所有包名，*因此您可以使用此提醒*）

“删除”按钮仅适用于您的应用的未发布版本。一旦您发布了您的应用程序或其特定版本，您就无法将其从市场中删除。但是，您仍然可以“取消发布”它。“删除”按钮仅在您上传新版本时才派上用场，然后您意识到自己犯了错误并想在发布之前删除该新版本。

[参考](http://www.cynosurex.com/Forums/DisplayComments.php?file=Java/Android/Tips_and_Tricks_for_Uploading_Apps_to_Google_Market)

* * *

2016 年更新

您现在可以从您的列表中**过滤**掉未发布或草稿的应用程序。

![在此处输入图像描述](../Images/16316d65ea93e348c9949dc7878091bd.png)

**取消发布选项可以在已发布文本旁边的标题区域中找到。** ![取消发布链接](../Images/3494a5d72b35e3a94391cfe9884472c9.png)

* * *

**2020 年**更新****

 **由于新游戏控制台的变化，取消发布选项被移动到不同的位置，如下所示。在左侧窗格中
单击。`All Apps`然后单击要删除的应用程序。

然后在`Setup`左窗格中的选项下，单击`Advanced Settings`。

然后在`App Availablity`右侧，将状态更改为`UnPublished`并单击`Save Changes`底部。

看看下面的图片：
![新的取消发布屏幕截图](../Images/227a5954aeb0849fe03086ac0266f03f.png)

* * *

## 回答 #2

> 赞同：170
> 
> 时间：2017-08-04T03:41:14.660

选择**Store Presense**，然后选择**Pricing Distribution**并选择 Unpublish from App Availability。 [![在此处输入图像描述](../Images/914d4189473662ea8aea5fac89f2615e.png)](https://i.stack.imgur.com/tz9p9.png)

谷歌的帮助在这里： https: [//support.google.com/googleplay/android-developer/answer/113476#unpublish](https://support.google.com/googleplay/android-developer/answer/113476#unpublish) *（截至 2020 年 2 月）*

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2015-08-10T18:27:26.593

您可以通过单击应用标题下方、“已发布”绿色状态标签右侧的小标签从商店中删除应用或“取消发布”。

[![在此处输入图像描述](../Images/d50efc93608715590131666c53844b41.png)](https://i.stack.imgur.com/lIALr.jpg)

即使您的应用程序已经上线（发布）了很长时间，我的应用程序也是如此。

问候。

* * *

## 回答 #4

> 赞同：59
> 
> 时间：2017-10-13T09:07:04.827

[![在此处输入图像描述](../Images/11f3b8331cc5add8b223c3c0b8084086.png)](https://i.stack.imgur.com/bthYw.png)

在 Google Play Console 中，选择您的应用。选择**Store Presence** ，然后从侧面菜单中选择**定价和分发。****发布**和**取消发布**应用程序有一个切换开关。选择***取消***发布 ，然后单击右上角的**提交更新**按钮。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2018-06-20T11:34:58.143

实际上现在部分可能： https: [//support.google.com/googleplay/android-developer/answer/9023647](https://support.google.com/googleplay/android-developer/answer/9023647)

> **报告更新**
> 
> 在 2018 年 5 月下旬，您可能会开始看到基于用户删除数据的应用指标的变化。一些指标是根据同意与开发人员共享数据的用户的数据计算得出的。
> 
> 我们在 Play 管理中心提供的指标经过调整，可以更准确地反映所有用户的数据。但是，Google 不会显示低于某些最低阈值的数据。
> 
> **删除应用或游戏**
> 
> 您可以从 Play 管理中心永久移除草稿应用或游戏。您还可以删除：
> 
> 1.  尚未在任何设备上安装的已发布应用或游戏
> 2.  用户无权重新安装的已发布应用或游戏
> 
> 在这些情况下，请联系我们的支持团队，请求永久删除您的应用或游戏数据。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2020-08-16T12:00:09.363

**注意：**随着发布/取消发布选项移动到不同位置，添加新答案。

如其他答案中所述，您无法删除该应用程序。使用更新的 Google Play 管理中心（测试版），**取消发布**选项移动到不同的位置：

**设置 -> 高级设置 -> 应用程序可用性**

相应地启用已**发布**/**未发布**！

[![在此处输入图像描述](../Images/5f9cfe3fd723525512bc19d6575f23c1.png)](https://i.stack.imgur.com/ApDAX.png)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-05-15T05:05:30.310

不可以，一旦您在 Google Play 中发布了应用程序，就无法删除它。Google 会保留所有的 apk 文件。但是，如果您不希望该版本可供用户使用，您可以取消发布该版本。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2020-04-17T08:45:32.990

您不能删除该应用程序，但可以取消发布它。通过这样做，它将无法在 Play 商店中使用，但拥有您的应用程序的用户仍然可以使用您的应用程序。

取消发布您的应用的步骤： 在 Google Play 商店中取消发布您的应用：

1.  转到[https://market.android.com/publish/Home](https://market.android.com/publish/Home)，然后登录您的 Google Play 帐户。
2.  单击要删除的应用程序。
3.  单击 Store Presence 菜单，然后单击“Pricing and Distribution”项。
4.  点击取消发布

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2017-09-12T19:32:59.143

值得注意的一个例外是，虽然*您*不能删除应用程序，但*如果*该应用程序既未发布且终生安装次数为 0，Google Play 开发者支持的人员就可以删除。因此，如果您的应用有 0 次生命周期安装，那么您可能很幸运。

首先，您需要取消发布应用程序并等待 24 小时（以允许更新全局统计信息并确保没有发生最后一分钟的安装）。假设在这 24 小时内没有发生最后一分钟的安装，您可以联系 Google Play 开发人员支持并检查他们是否可以将其删除。

请注意，他们对 0 次安装的要求是硬性要求。不能有任何例外（即使您出于测试目的自行安装了该应用程序）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-04-05T07:27:12.630

一旦应用程序发布，一旦它无法从您的控制台列表中删除，您只能取消发布它，如果您愿意，您可以使用过滤器将其从列表中隐藏，但草稿应用程序您可以删除它们或隐藏它们.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-09-29T02:00:45.933

谷歌商店还没有提供删除/删除生产应用程序的服务，您也不能更改生产版本以获得最佳测试。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-08-04T13:56:14.750

一旦通过发布应用程序使其生效，则无法删除它，尽管可以使用“删除应用程序”按钮删除未发布的应用程序，如下所示：

[![在此处输入图像描述](../Images/7414e844f54e5ce4975de56ee7f0beee.png)](https://i.stack.imgur.com/iWT5n.png)**

# r - 使用“source”会破坏函数的返回

> ID：11074982
> 
> 赞同：2
> 
> 时间：2012-06-17T21:36:23.697
> 
> 标签：r

我有一个简单的函数脚本，最后一行是调用函数

```
fun<-function(){
    readline("This is a test")
    x<-c(4,5)
    y<-c(5,6)
    add<-x+y
    sub<-x-y
    return(list(add,sub))
}

fun() 
```

如果我将其复制到我的 R 控制台中，我会得到预期的结果

```
This is a test
[[1]]
[1]  9 11

[[2]]
[1] -1 -1 
```

但我一直在尝试使用“源”来自动提取我的脚本。如果我尝试使用源

```
source("/Users/Me/Desktop/R.test.R") 
```

我失去了我的输出。我仍然得到 readline，但我丢失了返回数据，所以我得到了这个：

```
This is a test 
```

如果我删除最后一行，我仍然可以使用 source 命令访问我的函数，然后手动输入“fun()”

```
source("/Users/Me/Desktop/R.test.R")
fun() 
```

但我想把它变成一步交易。

有人可以解释为什么“剪切和粘贴”与使用源代码之间的区别，以及我如何使用源代码一步调用我的函数吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T21:45:17.187

当您直接在控制台中键入内容时，R 默认情况下会调用`print`该对象以显示它。但它只直接在控制台中执行此操作。

`print.eval = TRUE`调用时尝试设置`source`。要查看发生了什么，请使用以下脚本尝试两种方式：

```
fun<-function(){
    readline("This is a test")
    x<-c(4,5)
    y<-c(5,6)
    add<-x+y
    sub<-x-y
    return(list(add,sub))
}

fun()

x <- 5
x 
```

现在它更明确了。只需`x`在控制台静默输入就会导致 R 进入`print`它。如果你在采购时想要这种行为，你必须这么说。

# symfony - Symfony2中FormType中的动态选择

> ID：11074983
> 
> 赞同：1
> 
> 时间：2012-06-17T21:36:33.037
> 
> 标签：symfony, symfony-forms

我的 index.twig 中有一个动态选择标签 选择的代码是

```
 <select name="portfolio" style="width: 265px; height:28px;">
   <option selected="selected" value="default">Switch Your Portfolio</option>
   {% for portfolio in portfolios %}
      <option value={{ portfolio.id }}>{{ portfolio.portfolioName }}</option>
   {% endfor %}
 </select> 
```

现在我有了 SwitchPortfolioType，我想在我的 Type 中创建这个动态选择

```
class SwitchPortfolioType extends AbstractType
{
   public function buildForm(FormBuilder $builder, array $options)
   {
    $builder
    ->add('availability', 'choice', array(
        'choices'   => array(
            //dynamic options here
     ),
            'empty_value' => 'Switch your Portfolio',
    ));
   }
} 
```

我如何在 Symfony2 中做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:00:16.977

我已经以这种方式实现了我们项目中的代码......

```
class SwitchPortfolioType extends AbstractType
{
   public function buildForm(FormBuilder $builder, array $options)
   {

       $builder
            ->add('name')
            ->add('description')
            ->add('parentid', 'entity', array('class'=>'MusicCoreBundle:MusicCategory',
                'property'  => 'name',
                'required'  => false,
                'query_builder' => function(EntityRepository $er) {return $er->createQueryBuilder('s')->orderBy('s.name', 'ASC');},
                'empty_value' => 'No category'));

   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:27:24.287

创建一个将数组作为`SwitchPortfolioType`类参数的构造函数：

```
public function __construct($myArray)
{
    $this->myArray = $myArray;
} 
```

并且，在您的控制器中，当您创建表单对象时，将您的动态数组传递给它：

```
$form = $this->createForm(new SwitchPortfolioType($myArray), $entity); 
```

现在您可以在表单类型中使用数组`$this->myArray`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-22T18:56:27.053

请参阅本文档页面，您可以使用`FormEvents::PRE_SET_DATA`表单构建器区域设置动态数据。

[http://symfony.com/doc/current/cookbook/form/dynamic_form_modification.html#how-to-dynamically-generate-forms-based-on-user-data](http://symfony.com/doc/current/cookbook/form/dynamic_form_modification.html#how-to-dynamically-generate-forms-based-on-user-data)

# html - 这是覆盖 div 元素的正确方法吗？

> ID：11074986
> 
> 赞同：1
> 
> 时间：2012-06-17T21:36:50.967
> 
> 标签：html, css

我试图将评论`div`元素覆盖在主要`div`元素上，但不确定以下内容；

1.  它是否正确？
2.  有没有更好的方法来实现它？

可以在[http://jsfiddle.net/fTbP5/找到代码示例](http://jsfiddle.net/fTbP5/)

**代码**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type=" content="text/html; charset=UTF-8" />
    <meta http-equiv="content-language" content="en-us" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <meta name="copyright" content="&copy; 2012" />

    <title>sample layout</title>

    <base href="" />

    <link rel="stylesheet" type="text/css"  media="all" href="" />

    <style type="text/css" media="all">

        * {
            margin: 0px;
            padding: 0px;
        }

        body {
            background-color: #eeeeee;
            font-family: Arial, Verdana, sans-serif;
            color: #ffffff;
        }

        #content {
            width: 700px;
            margin-top: 10px;
            margin-right: auto;
            margin-bottom: 10px;
            margin-left: auto;
            border-width: 1px;
            border-color: #ffffff;
            border-style: solid;
            overflow: auto;
            padding-top: 40px;
            padding-bottom: 40px;
        }

        #header {
            font-size: 1em;
            color: #FFC700;
            margin-left: 100px;
            margin-bottom: 20px;
        }

        .main {
            float: left;
            width: 300px;
            height: 300px;
            background-color: #00ACED;
            margin-left: 100px;
            padding: 20px;
            position: relative;
        }

        .comments {
            width: 320px;
            background-color: black;
            position: absolute;
            top: 305px;
            left: 0px;
            padding: 10px;
        }

        .shoutbox {
            float: left;
            width: 100px;
            height: 100px;
            background-color: orange;
            margin-left: 50px;
            margin-bottom: 20px;
        }

        .border {
            border-width: 15px;
            border-color: #ffffff;
            border-style: solid;    
        }

    </style>

    <script type="text/javascript">

    </script>
</head>

<body>
    <div id="container">
        <div id="content">
            <div id="header"><h1>Title</h1></div>
            <div class="main border">
                Hi {Name}, <br /> Your details are.
                <div class="comments">comments</div>
            </div>
            <div class="shoutbox border">shoutbox1</div>
            <div class="shoutbox border">shoutbox2</div>
        </div>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T22:47:53.710

正如我在上面的评论中所说，我认为您的解决方案完全可以。您的评论 div 嵌套在 main 中，并且绝对位于其中。我在这里没有看到黑客攻击。

但这不是实现这一目标的唯一方法，我将向您展示另一种更灵活的方法。也就是说，它使您的主框和评论框允许可变高度的内容（而使用您当前的解决方案，文本会溢出到它们的容器之外）。

它基于两件事：

1.  另一个带有类的 div`main-contents`来包装内容。这是一个孩子`.main`
2.  使用`min-height`on和`.main`,来保证您的原始尺寸，但如果需要可以向下扩展。`.main-contents``.comments`

**HTML**

```
<div class="main border">
    <div class="main-contents">
        Hi {Name}, <br /> Your details are.
    </div>
    <div class="comments">comments</div>
</div> 
```

**CSS**

```
.main {
    width: 340px;
    min-height: 340px;
    background-color: #00ACED;
    margin-left: 100px;
}

.main-contents {
    padding: 20px;
    min-height: 262px;
}

.comments {
    background-color: black;
    padding: 10px;
    min-height: 18px;
}

.border {
    border-width: 15px;
    border-color: #ffffff;
    border-style: solid;    
}​ 
```

为了证明这一点，我设置了一个[实时示例](http://jsfiddle.net/Fn6qS/)，显示了您的原始内容，以及下面有更高内容的另一个块。

# c# - c++ Metro 应用程序与 C# 库构建错误 WMC1006

> ID：11074987
> 
> 赞同：2
> 
> 时间：2012-06-17T21:36:59.313
> 
> 标签：c#, microsoft-metro, windows-runtime, c++-cx

我刚刚开始一个地铁应用程序。主应用程序是一个 C++ Metro 应用程序。该应用程序构建并运行良好。

我在解决方案中添加了 ac# 库，它构建的一切都很好。

我从 C++ 应用程序中引用了 C# 库，它不会生成以下错误：

> 错误 WMC1006：无法解析程序集或 Windows 元数据文件“System.Runtime.dll”
> 
> 错误 EMC9999：类型 Universe 无法解析程序集：System.Runtim，版本......

有什么想法吗？我没有添加对我的 c# 类库的任何引用。这是一个香草地铁图书馆。

谢谢！埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:05:56.943

不幸的是，正如 Kris Vandermotten 所指出的，C++/CX 不能使用 C# 类库（仅限 WinMD 文件），并且对托管类库不存在的 WinMD 文件有很多限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T03:59:07.310

我在我的应用程序中遇到了类似的问题并且遇到了同样的错误

> 无法解析程序集或 Windows 元数据文件“System.Runtime.dll”
> 
> 类型 Universe 无法解析程序集：System.Runtime

我的应用程序是一个混合的 C#/C++ Windows Store 应用程序，其中主要项目是 C#。我正在使用 VS 2012 Pro。

当我试图解决另一个问题时，我的问题来自于从系统中删除 .net SDK。

我的解决方案正在运行（在管理员命令提示符下）

```
DISM.exe /Online /Cleanup-Image /RestoreHealth 
```

然后在我的 Visual Studio 2012 Professional 安装上进行修复（程序和功能 -> 更改 -> 修复）。

这些是允许我再次构建应用程序的唯一步骤。

# windows-8 - Windows8 列表视图行高

> ID：11074991
> 
> 赞同：0
> 
> 时间：2012-06-17T21:37:45.907
> 
> 标签：windows-8, microsoft-metro

我已将 ListView 添加到 Metro Style Blank 应用程序中。添加到 ListView 的是 3 个字符串。我想更改 LineHeight ，但找不到属性。下面是我的 xaml 代码。

```
 <Grid Background="{StaticResource ApplicationPageBackgroundBrush}">
    <ListView HorizontalAlignment="Left" Height="277.167" Margin="235.51,161,0,0" VerticalAlignment="Top" Width="100" RenderTransformOrigin="0.5,0.5" UseLayoutRounding="False" d:LayoutRounding="Auto">
        <ListView.RenderTransform>
            <CompositeTransform SkewX="-0.338" TranslateX="-0.327"/>
        </ListView.RenderTransform>
        <x:String>test 1</x:String>
        <x:String>Test2</x:String>
        <x:String>Test3</x:String>
   </ListView>
</Grid> 
```

如何减少、增加 ListView 框中字符串的行高？我想减少线条之间的空间。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:00:53.417

尝试编辑 ItemContainerTemplate，然后使用可用的属性，如边距和填充。在此处查看我的答案： [Windows8 中的 WPF ComboBox 自定义](https://stackoverflow.com/questions/12706056/wpf-combobox-customization-in-windows8/12775497#12775497)

如果您需要任何帮助，请告诉我。

# php - Codeigniter 将参数传递给控制器 索引

> ID：11074993
> 
> 赞同：2
> 
> 时间：2012-06-17T21:37:59.547
> 
> 标签：php, codeigniter

我正在使用 codeigniter 构建一个教程系统，并希望实现以下 URL 结构：

*   /tutorials --> 一个包含所有类别列表的介绍页面
*   /tutorials/{a category as string} --> 这将给出给定类别的教程列表，例如 /tutorials/php
*   /tutorials/{a category as string}/{an ID}/{tutorial slug} --> 这将显示教程，例如 /tutorials/php/123/how-to-use-functions
*   /tutorials/add --> 添加新教程的页面

问题是当我想使用前两种类型的 URL 时，我需要将参数传递给控制器​​的 index 函数。第一个参数是可选的类别，第二个是可选的教程ID。在发布之前我做了一些研究，所以我发现我可以添加一个类似的路由`tutorials/(:any)`，但问题是当使用最后一个 URL (/tutorials/add) 时，这个路由也会`add`作为参数传递。

有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-17T21:45:48.343

您的路由规则可能按以下顺序排列：

```
$route['tutorials/add'] = "tutorials/add"; //assuming you have an add() method
$route['tutorials/(:any)'] = "tutorials/index"; //this will comply with anything which is not tutorials/add 
```

然后在控制器的 index() 方法中，您应该能够确定传递的是类别 ID 还是教程 ID！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-21T10:01:02.850

如果您想向控制器添加更多方法，而不仅仅是“添加”，我确实认为重新映射必须对您的问题更有用。这应该完成任务：

```
function _remap($method)
{
  if (method_exists($this, $method))
  {
    $this->$method();
  }
  else {
    $this->index($method);
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-17T21:42:45.443

发布几分钟后，我想我已经找到了一个可能的解决方案。（我感到羞耻）。

在伪代码中：

```
public function index($cat = FALSE, $id = FALSE)
{
    if($cat !== FALSE) {
        if($cat === 'add') {
            $this->add();
        } else {
            if($id !== FALSE) {
                // Fetch the tutorial
            } else {
                // Fetch the tutorials for category $cat
            }
        }
    } else {
        // Show the overview
    }
} 
```

欢迎对此解决方案提供反馈！

# makefile - 对 GNU makefile 命令中的字符串列表进行条件检查

> ID：11074995
> 
> 赞同：0
> 
> 时间：2012-06-17T21:38:27.813
> 
> 标签：makefile, command, conditional, gnu

在尝试将文件编译到 GNU makefile 中之前，我正在尝试根据列表检查文件。每次调用规则时会评估下面的条件 ifneq 还是只评估一次？条件似乎总是以相同的方式评估。

如果不是，那么将条件放入 shell 命令的唯一方法是什么？我意识到目标列表可能“不好”似乎很奇怪……Make系统当然可以修复以消除这种奇怪，但痛苦会更大。

有什么建议么？伊莱

```
OKSRC := realfile1.cpp realfile2.cpp

%.o: %.cpp
ifneq ($(findstring $<,$(OKSRC),),)
        ... do the compile
else
        #skip the file
endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:18:30.577

引用[Make 文档](http://www.gnu.org/software/make/manual/make.html#Reading-Makefiles)：

> 立即解析条件指令。这意味着，例如，自动变量不能在条件指令中使用，因为在调用该规则的配方之前不会设置自动变量。如果您需要在条件指令中使用自动变量，则必须将条件移动到配方中并改用 shell 条件语法。

`ifneq`是一个条件指令，`$<`是一个自动变量。简而言之，您的上述代码将不起作用，因此您必须使用基于 shell 的条件。

但我强烈建议您修复根本原因（即错误的依赖生成），而不是试图绕过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T10:49:54.223

我认为你可以使用`if`函数来推迟自动变量的扩展，直到条件被评估。

```
OKSRC = realfile1.cpp realfile2.cpp

.cpp.o:
    $(if $(findstring $<,$(OKSRC)),$(CC) $(CFLAGS) -c $<,@echo skip $<) 
```

结果显示：

```
$ make realfile1.o realfile2.o realfile3.o
cc  -c realfile1.cpp
cc  -c realfile2.cpp
skip realfile3.cpp 
```

# ajax - 使用插入参数在特定元素之前插入 Ajax.Updater 内容

> ID：11074999
> 
> 赞同：0
> 
> 时间：2012-06-17T21:38:55.597
> 
> 标签：ajax, prototypejs, insertion

我认为这会相当简单，但事实证明它并没有像我想象的那样工作。

```
new Ajax.Updater('myContainer','/url/',{
   insertion: {before: 'anotherElementId'}
}); 
```

这是如何正确完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:19:25.300

如文档中所述[`Ajax.Updater`](http://api.prototypejs.org/ajax/Ajax/Updater/)：

> 该`insertion`选项采用四个字符串之一 - `top`, `bottom`, `before`, 或`after`

您正在传递一个对象文字，这就是它不起作用的原因。第一个参数引用的元素`Ajax.Updater`是要修改的元素。这就是该方法的全部思想（作为一种速记，而不是在正常的 AJAX 请求回调中手动插入）。

所以我认为你的目标是：

```
new Ajax.Updater('anotherElementId','/url/',{
   insertion: 'before'
}); 
```