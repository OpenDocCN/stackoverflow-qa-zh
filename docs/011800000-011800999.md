# StackOverflow 问答 11800000-11800999

# jquery - mvc c# jquery facebook-like notification（顶部图标上的那个数字）

> ID：11800003
> 
> 赞同：2
> 
> 时间：2012-08-03T16:52:19.240
> 
> 标签：jquery, asp.net-mvc, comet

我试图在我的网站上应用这种通知。但想知道jquery是否应该是要走的路？如果记录有任何新的更新，比如每 5 秒刷新一次页面的一部分？

还是我应该做这篇文章中详细介绍的“彗星”事情？

[如何实现类似facebook的通知？](https://stackoverflow.com/questions/5359773/how-to-implement-facebook-like-notification)

不太确定如何最好地去做。

此外，当事件发生时，此通知将在每月的特定日期进行大量刷新，所以我不确定是否每隔几秒点击一次 dbase 是最好的方法？或者如果我只使用彗星（它只是在没有请求的情况下接收数据），甚至会有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:43:18.477

您不需要每隔几秒钟就访问一次数据库。您需要在触发新通知时向连接的客户端广播（在数据库中插入通知后）

您可以通过使用集线器的[SignalR轻松完成此操作。](https://github.com/SignalR)[查看这个文档](https://github.com/SignalR/SignalR/wiki/Hubs)，它展示了如何只向指定的客户端广播。

# rest - 如何使用 BaseX RESTXQ 获取整个查询字符串？

> ID：11800005
> 
> 赞同：2
> 
> 时间：2012-08-03T16:52:19.830
> 
> 标签：rest, query-string, basex

我正在使用 BaseX RESTXQ`.xqm`脚本从 URI 获取 HTTP 查询参数`price`，例如；

```
URI:    /foo/?price=20
Result: <price>20</price> 
```

这是`.xqm`代码；

```
declare
  %rest:path("foo")
  %rest:query-param("price", "{$price}")
  function page:foo($price) {
    <price>{$price}</price>
  }; 
```

但是，我怎样才能得到整个查询？例如;

```
URI:     /foo/?hello=world&this=that&foo=bar
Result:  <query>hello=world&this=that&foo=bar</query> 
```

我的问题是我不知道查询将有多少参数或者这些参数可能被调用。可能有任意数量的参数（零到 n），它们可能被称为任何东西。能够将整个查询作为单个字符串获取将解决我的问题。

这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T22:57:31.437

当前的 RESTXQ 草案没有提供动态请求查询参数的解决方案。

在相关的 JAX-RS 规范中，`Context`存在几个注释以使附加请求信息可用于 Java 函数（参见[示例](http://www.mkyong.com/webservices/jax-rs/jax-rs-queryparam-example)）。BaseX 的较新版本将提供一个[Request Module](http://docs.basex.org/wiki/Request_Module)，可以对其进行扩展以提供对所有查询参数的动态访问。您可能想写信给[basex-talk](https://mailman.uni-konstanz.de/mailman/listinfo/basex-talk)邮件列表或 Adam Retter（RESTXQ 的发明者）以进一步推动这样的扩展。

# php - 正则表达式匹配 php 中以 % 结尾的字符串

> ID：11800006
> 
> 赞同：-2
> 
> 时间：2012-08-03T16:52:21.363
> 
> 标签：php, regex

我这样做对吗？

`preg_match("/%$/",$line,$matches)`

但它不会工作！请有任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:58:33.900

你不需要正则表达式

```
if($str[strlen($str)-1] == '%')
     //do stuff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:58:34.167

您的解决方案应该是正确的。

[http://rubular.com/r/ovrRr2N7Ze](http://rubular.com/r/ovrRr2N7Ze)

您也不能使用正则表达式，因为这是一个非常简单的情况：

```
$string = trim($string);
$matches = $string[strlen($string)-1] == '%';
if($matches) {
  //do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:01:33.917

你想匹配以百分号结尾的单词吗？ `$`匹配输入（或行）的结尾，而不是单个单词的结尾。如果要匹配所有以百分号结尾的单词，请使用以下正则表达式：

```
preg_match_all('/\b\w+%\b', $input, $matches); 
```

`$matches`然后将包含所有匹配的单词。

将正则表达式分开：

*   `\w`匹配任何*单词*字符（字母、数字和下划线）
*   `+`匹配至少一次出现（“一次或多次”）
*   `\b`匹配单词边界
*   `%`只是一个百分号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T16:56:38.580

试着把它扔进一个`if`声明中。默认情况下，`preg_match`返回一个整数，其值为真或假。

你没有测试结果。

```
if(preg_match('/%$/', $line)){
    echo "Line ends with %\n";
} 
```

# .net - 是否可以在 .NET 中以编程方式获取 GC 跟踪分配对象的总数？

> ID：11800007
> 
> 赞同：1
> 
> 时间：2012-08-03T16:52:24.153
> 
> 标签：.net, memory, garbage-collection, runtime, memory-profiling

是否可以在 .NET 中以编程方式获取 GC 跟踪分配对象的总数？

您可以通过附加内存分析器来做到这一点。但是我似乎在运行时找不到这个数字。可能吗？最好是每一代。

# vba - 将 VBA 函数转换为 Google Apps 脚本函数

> ID：11800009
> 
> 赞同：-1
> 
> 时间：2012-08-03T16:52:26.163
> 
> 标签：vba, google-apps-script

我在 Excel 中继承了一个预测模型文件，该文件使用了一个用户定义的 VBA 函数，我想将其移至 Google 电子表格。这是您在电子表格中调用的自定义函数，标题和衰减是用户在调用函数时定义的两个范围（将始终与具有 1 行和不同列数的范围一起使用）。

VBA代码：

```
Function views(titles,decay)
    indx = titles.Count
    vtotal = 0

    For ct = 1 To indx
      vtotal = vtotal + titles(ct) * decay(indx - ct + 1)
    Next

    views = vtotal
End Function 
```

我在 Google Apps 脚本中执行此操作的（微弱）尝试不起作用：

```
function views(titles, decay) {
    var indx = titles.length;
    var vtotal = 0;

    for (var i = 0; i <= indx; i++) {
        var vtotal = vtotal + titles[i] * decay[indx - i + 1]
    }
    return vtotal
} 
```

我可以像在这里尝试的那样将范围传递给自定义函数吗？是否有另一种方法可以得出相同的答案？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:13:01.090

将电子表格范围传递给函数时，它们始终表示为 2D Javascript 数组，即使它们是一行高（或一列宽）。另外，我认为您可能必须在 for 循环中使用“从零开始”的索引进行相同的小修改。如果范围是一排高，请尝试：

```
function views(titles, decay) {
    var indx = titles[0].length;
    var vtotal = 0;

    for (var i = 0; i < indx; i++) {
        var vtotal = vtotal + titles[0][i] * decay[0][indx - i - 1]
    }
    return vtotal
} 
```

# jquery - 获取 jquery datetimepicker 到网格到分钟

> ID：11800011
> 
> 赞同：2
> 
> 时间：2012-08-03T16:52:28.460
> 
> 标签：jquery, datetimepicker

我目前正在使用[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)。我希望当用户拖动“分钟”滑块时增加 15。所以分钟只能是 0、15、30、45。那怎么可能呢？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T16:55:09.833

检查您发送的链接上的示例 #6，您可以设置“stepMinute”选项：

```
$('...').datetimepicker({
    stepMinute: 15
}); 
```

玩得开心！

# iphone - 如何下载 iAd 的代码

> ID：11800014
> 
> 赞同：0
> 
> 时间：2012-08-03T16:52:33.767
> 
> 标签：iphone, ios, ipad, html, iad

据我了解，iAd 是用 html5、js 和 css3 制作的——因此我假设驱动它的代码已下载到设备上进行显示。如果我的 ipad 与我的笔记本电脑在同一个无线网络上，我将如何将它下载到我的笔记本电脑以查看它是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:40:13.180

您是否尝试在将您的应用部署到应用商店之前进行 iAD 测试？您的 iAd 与您的 Apple Developer 帐户相关联，因此在将应用程序上传到商店之前只需要您的代码签名。回答您的问题，如果您想测试 iAds 是否适用于通用广告，以下是有关如何执行此操作的代码：

在视图控制器的 .h 文件中

```
#import "iAd/ADBannerView.h" //Add the iAd.framework to your Build

    @interface YourViewController: UIViewController <ADBannerViewDelegate> { 
//Dont forget to add the delegate

BOOL bannerDisplayed;

} 
```

然后在你的 .m 文件中

```
 - (void) viewDidLoad {
   ADBannerView *adBanner = [[ADBannerView alloc] initWithFrame:CGRectMake(0, -50, 320, 50)]; 
    adBanner.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    adBanner.delegate = self;
    [self.view addSubview:adBanner];
}

- (void) bannerViewDidLoadAd:(ADBannerView *)banner {

    if(!bannerDisplayed) {
        NSLog(@"iAd Banner Appear");
        [UIView beginAnimations:@"bannerAppear" context:NULL];
        banner.frame = CGRectOffset(banner.frame, 0, 411);
        [UIView commitAnimations];
        bannerDisplayed = YES;
    } else {
        NSLog(@"iAd Banner Appear Error. Not a FailAdWithError.");
    }
}

- (void) bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error {
    if(bannerDisplayed) {
        NSLog(@"Banner Error. Remove Ad from Screen");
        [UIView beginAnimations:@"bannerDisappear" context:NULL];

        banner.frame = CGRectOffset(banner.frame, 0, -411);
        [UIView commitAnimations];

        bannerDisplayed = NO;
    }
} 
```

Apple 要求 iAd 能够自行移除/隐藏，以防您的 iAd 实例未检索到广告时发生错误。因此，可能需要一两秒钟才能出现，然后将其移除以模仿成功或失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:55:02.313

我不确定您是否或如何下载 iAd，但您应该查看 iAd Producer [https://developer.apple.com/iad/iadproducer/](https://developer.apple.com/iad/iadproducer/)，它为您提供了足够的示例来了解它是如何工作的。

# python - 将评论数添加到 Django 中的查询集

> ID：11800016
> 
> 赞同：2
> 
> 时间：2012-08-03T16:52:44.717
> 
> 标签：python, django, comments

我想在 Django 中显示帖子以及评论数。我目前没有帖子模型中的评论数量，我想我可以编写某种模型函数来显示帖子有多少评论，而无需在`comment_count`模型中放入类似的东西。

这是我的帖子模型：

```
class Post(models.Model):
    user = models.ForeignKey(User, unique=False)
    headline = models.CharField(max_length=400, verbose_name="post headline")
    type = models.CharField(max_length=4)
    branch = models.ForeignKey(Branch, verbose_name="branch name", validators=[branch_exists])
    upvotes = models.IntegerField()
    is_starred = models.BooleanField()
    url_title = models.SlugField()
    creation = models.DateTimeField()
    thumbnail = models.URLField(blank=True)
    body = models.TextField(max_length=90000, blank=False)
    link = models.URLField(blank=False, verbose_name="your link URL")

    def __unicode__(self):
        return u"`%s' posted by %s at %s\n" % (self.headline, self.user, self.creation) 
```

这是我的评论模型：

```
class Comment(models.Model):
    user = models.ForeignKey(User, unique="False")
    time = models.DateTimeField()
    upvotes = models.IntegerField()
    post = models.ForeignKey(Post, unique="False")
    formatting = models.BooleanField(verbose_name="Format comment?")
    text = models.TextField(max_length=9000, blank=False)
    anonymous = models.BooleanField(verbose_name="Post comment anonymously?") 
```

我想做类似的事情：

```
def __unicode__(self):
    return u"`%s' posted by %s at %s with %s comments" % (self.headline, self.user, self.creation, self.comment_count) 
```

但没有 comment_count 字段；我希望将评论的数量与帖子一起从数据库中提取。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:57:09.847

[注释](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)……显然是 Django 保守得最好的秘密：

```
from django.db.models import Count
Post.objects.annotate(comment_count=Count('comment')) 
```

然后，每个实例都会有一个`comment_count`您可以使用的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:55:44.213

您可以使用该`comment_set`属性访问与帖子关联的评论（这是默认设置，如果您在模型上设置`related_name`ForeignKey `post`，`Comment`则可以将其设置为其他内容）。要仅检索计数，请使用`self.comment_set.count()`.

Django 文档在[以下关系后面](https://docs.djangoproject.com/en/dev/topics/db/queries/#backwards-related-objects)有一个部分。

# linux - 从分段地址计算文字地址

> ID：11800020
> 
> 赞同：0
> 
> 时间：2012-08-03T16:53:03.780
> 
> 标签：linux, x86, segment

例如，假设我有类似的东西：

```
 0x33:0x10 
```

我想得到一个表格中的地址：

```
 0x???????? 
```

从中。这样做最简单的方法是什么？这是在 Linux x86 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:35:39.653

[段寄存器中的选择器被解码以给出描述符表说明符和描述符表索引。表和索引中给出的基数被添加到偏移量中，以便给出进程空间内的最终地址。](http://pdos.csail.mit.edu/6.828/2005/readings/i386/s05_01.htm)为了将进程内存转换为物理内存，[必须读取和解码页表。](http://pdos.csail.mit.edu/6.828/2005/readings/i386/s05_02.htm)

# unit-testing - 反对两种可能的结果之一

> ID：11800025
> 
> 赞同：1
> 
> 时间：2012-08-03T16:53:25.023
> 
> 标签：unit-testing

我正在尝试为具有两个可能的正确结果的测试用例编写 UnitTest。返回哪个结果取决于实际的实现，但与需求无关；要么是可以接受的。

两个断言不起作用 - 一个总是会失败。

目前我将这两个结果添加到一个列表中，并断言计算结果在该列表中：

```
Assert.IsTrue(list.Contains(result)); 
```

这行得通，但如果测试失败，它不会给出预期/实际输出（这通常很有帮助）。

有没有更优雅的方法来断言两个可能的期​​望值之一？

（我目前正在使用 MSTest，但我愿意听取其他框架可以提供什么，或者是否有一般建议）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:49:02.300

[NUnit](http://www.nunit.org/index.php?p=conditionAsserts&r=2.2.7)和MSTest中的[Assert.IsTrue](http://msdn.microsoft.com/en-US/library/ms243754%28v=vs.100%29.aspx)都有重载来设置断言失败时显示的消息。对于您的情况，您可以像这样编辑断言

```
Assert.IsTrue(list.Contains(result), 
    "The list did not contain the value " + result); 
```

此消息可以像您希望的那样明确

```
Assert.IsTrue(list.Contains(result), 
    "The list was expected to contain the value " + result
    + Environment.NewLine + "but had the values " + 
    methodToPrintContentsOfList(list)); 
```

这应该有助于解决您遇到的模糊断言消息问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:07:01.553

使用 fest 断言和：

```
assertThat(calculatedResult).isIn(1, 4, 15, 37); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-01T17:12:47.293

```
assertIn(a, b) 
```

测试 a in b 是否在 3.1 中新增

[https://docs.python.org/3/library/unittest.html](https://docs.python.org/3/library/unittest.html)

# sql - 在 SqlDeveloper 上导出工作，但不使用 Exp Oracle 命令

> ID：11800027
> 
> 赞同：1
> 
> 时间：2012-08-03T16:53:33.673
> 
> 标签：sql, oracle, export, oracle-sqldeveloper

我可以使用 SQLDeveloper 导出表，它工作正常。但是使用 oracle 的 Exp 命令，我有以下错误

```
C:\>exp CHORUS_RO/uiopfdsq@C2PROD TABLES=(USER_CHORUS.CHO_FAQ_ITEM) file='D:\exports'

Export: Release 11.2.0.2.0 - Production on Ven. Ao¹t 3 18:30:47 2012

Copyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.

Connected to: Oracle Database 10g Enterprise Edition Release 10.2.0.5.0 - 64bit
Production
With the Partitioning, Real Application Clusters, OLAP, Data Mining
and Real Application Testing options
Export done in WE8MSWIN1252 character set and AL16UTF16 NCHAR character set
server uses AL32UTF8 character set (possible charset conversion)

About to export specified tables via Conventional Path ...
EXP-00009: no privilege to export USER_CHORUS's table CHO_FAQ_ITEM
Export terminated successfully with warnings. 
```

为什么 ？除了给予出口特权，因为我无法做到这一点，我还能做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T21:07:49.187

您不能在没有特权的情况下在其他模式上使用导出实用程序 - 这是一个安全问题。

[从文档](http://docs.oracle.com/cd/E11882_01/server.112/e10701/original_export.htm#BABJIGDI)：

> 如果您没有 EXP_FULL_DATABASE 角色中包含的系统权限，则无法导出其他用户架构中包含的对象。例如，您无法在其他用户的架构中导出表，即使您为其创建了同义词。

另请注意，从 11g 开始不支持使用 exp。最好使用 expdp。

一种可能的解决方法是通过以该用户身份调用 exp 来导出 USER_CHORUS 的模式。

# bash - Bash脚本以递归方式将文件添加到多个目录

> ID：11800030
> 
> 赞同：1
> 
> 时间：2012-08-03T16:54:01.473
> 
> 标签：bash, directory, copy

我在 /home/servers2 中有一堆目录（比如几千个），并且在 server2 的每个目录中都有一个名为 plugins Ex 的目录。/home/servers2/MyServer/plugins

现在在每个文件中都有一个名为 AutoStopFinal.jar 的文件，我需要将其删除，然后将 AutoStop1.3.001 从 /home/servers/template/plugins 复制到插件目录。我想非破坏性地测试它，所以我尝试了这个：

```
echo " Script to copy a plugin to all server plugin directories"

for i in /home/servers2/*/plugins; do
    echo rm -f $i/AutoStopFinal.jar
    echo cp -f /home/servers/template/plugins/AutoStop1.3.001.jar "$i"
done

echo " completed script ..." 
```

但只有脚本将插件复制到所有服务器插件目录。大约 5 分钟后，我控制了 C'd。但是我没有从循环内部得到回声，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:14:32.123

您可能可以像这样使用 find 为您执行此操作：

```
cd /home/servers2
find . -type d -name plugins -exec cp -f /home/servers/template/plugins/AutoStop1.3.001.jar {} \; -exec rm -f {}/AutoStopFinal.jar \; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:31:33.980

此命令将删除文件：

```
find ./servers2 -name AutoStopFinal.jar |xargs -n1 rm 
```

此命令会将新文件复制到位：

```
find ./servers2 -name plugins |xargs -n1 cp ./servers/template/plugins/AutoStop1.3.001.jar 
```

# asp.net-mvc - ASP.NET MVC - Razor View 中的本地时间是在客户端还是服务器上计算的？

> ID：11800031
> 
> 赞同：4
> 
> 时间：2012-08-03T16:54:01.390
> 
> 标签：asp.net-mvc, datetime, utc

这可能是一个愚蠢的问题，但是当我在 ASP.NET MVC 3 的剃刀视图中编写以下内容时，是在客户端还是服务器上计算的本地时间？

```
@Html.LabelFor(x=>x.MyDate.ToLocalTime()) 
```

我想它是服务器端的，因为视图是在服务器上组装的，然后再将其发送回客户端，但我并不完全有信心。

谢谢

J.P

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T16:55:54.107

这是服务器端。您的 Razor 视图在服务器上执行，因此所有 DateTime.ToLocalTime() 方法都使用服务器的时区在服务器上进行评估。

如果您需要它在客户端的上下文中进行评估，那么您将需要某种方法来允许客户端提供其时区信息，然后使用[`TimeZoneInfo`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx)and[`TimeZone`](http://msdn.microsoft.com/en-us/library/system.timezone)类来处理该时区，可能使用[`TimeZone.ToLocalTime()`](http://msdn.microsoft.com/en-us/library/system.timezone.tolocaltime)方法。

# android - GLSurfaceView 无法解析为类型

> ID：11800033
> 
> 赞同：2
> 
> 时间：2012-08-03T16:54:03.360
> 
> 标签：android, opengl-es

我正在尝试在 android 上开始使用 opengl。

我找到的所有教程都假设 GLSurfaceView 可用。我正在尝试编译我的项目，我得到了

```
GLSurfaceView cannot be resolved to a type 
```

我假设这是因为缺少 jar，但我找不到确切必须包含哪个 jar。

有人可以指出我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T16:57:51.263

将以下 import 语句添加到 java 文件的顶部：

```
import android.opengl.GLSurfaceView; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T07:05:02.153

解决此问题的一个非常简单的方法是使用完整的包名称，如下所示：

```
class YourOwnClass implements android.opengl.GLSurfaceView.Renderer  {
    ...
} 
```

# c# - HtmlAgilityPack 检查表的数量并找到它们的“标题”

> ID：11800034
> 
> 赞同：0
> 
> 时间：2012-08-03T16:54:04.607
> 
> 标签：c#, html-agility-pack

我正在尝试从包含 2-6 个带有 HtmlAgilityPack 的表的 DIV 中提取信息。

只要有相同数量的表，我就可以通过使用毫无问题地获取信息

```
var thirdTable = res.SelectSingleNode("table[3]"); 
```

每个表都包含 tds，第一个表包含我要检查的名称。目前它是由

```
<table border="0" cellspacing="1" cellpadding="4" width="100%">
    <tbody>
        <tr bgcolor="#505050">
            <td colspan="2" class="white">
                <b>Character Deaths</b>
            </td>
        </tr>
    </tbody>
</table>

var charTest = thirdTable.ChildNodes[0].InnerText.StartsWith(checkInfo); 
```

但由于表的数量不时不同，我无法在没有 NullReferenceException 的情况下提取信息。

我如何检查表的数量然后告诉存在哪些表？

编辑：

```
 var URLCharacter = "http://www..." + tbSearch.Text;
       HtmlAgilityPack.HtmlWeb doc = new HtmlAgilityPack.HtmlWeb();
       htmldocObject = doc.Load(URLCharacter);
       //Find the right contentdiv
       var res = htmldocObject.DocumentNode.SelectSingleNode("//div[@class='BoxContent']"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:58:12.210

我要做的是*尝试*通过选择所有表来获得第三张表，跳过前两张，然后选择下一张（第三张）。如果你得到一个元素，就用它做你想做的事，否则什么也不做。

```
var thirdTable = res.Elements("table").Skip(2).FirstOrDefault();
if (thirdTable != null)
{
    // do stuff
} 
```

如果您在使用该`Elements()`方法时遇到问题，您可以使用`SelectNodes()`适当的 xpath 进行替换。

```
var thirdTable = res.SelectNodes("table").Skip(2).FirstOrDefault(); 
```

# mongodb - 如何对嵌套文档数组的第一个或最后一个文档的字段进行排序

> ID：11800035
> 
> 赞同：0
> 
> 时间：2012-08-03T16:54:17.807
> 
> 标签：mongodb

我的文档看起来像这样

```
{
  field1: somevalue,
  field2: some other value,

  nested_documents: [ // array of nested document
    { ip: , session_id: , datetime: }, // first nested document
    { ip: , session_id: , datetime: }, // second nested document

    // ...many more nested documents
  ]
}, 
```

是否可以根据数组`datetime`的第一个、第二个或最后一个文档的字段来获得排序的文档？`nested_documents`如果是，那我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:19:42.057

很抱歉打扰这个问题。我意识到有一个位置运算符可用于查询数组，因此在排序时尝试了该运算符并且它起作用了。

它可以通过使用位置运算符来完成。这就是我从外壳中做到的

```
sorting by the first nested document's field

   db.sample.find().sort({"nested_documents.0.field_name" : -1})   // for descending order sort

sorting by the second nested document's field

   db.sample.find().sort({"nested_documents.1.field_name" : -1})   // for descending order sort

Now for sorting by last document's field i have to keep track of length of the array so if length of array is 10 my query would be

   db.sample.find().sort({"nested_documents.9.field_name" : -1})   // for descending order sort 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:31:31.140

您可以使用[位置运算符](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29#DotNotation%28ReachingintoObjects%29-ArrayElementbyPosition)按​​数组中的特定索引进行排序：

```
db.foo.drop();

db.foo.insert({
    _id: 1,
    docs: [
        { date: new ISODate("2012-01-01T00:00:00Z") },
        { date: new ISODate("2010-01-01T00:00:00Z") }
    ]
});

db.foo.insert({
    _id: 2,
    docs: [
        { date: new ISODate("2011-01-01T00:00:00Z") },
        { date: new ISODate("2013-01-01T00:00:00Z") }
    ]
});

jsTest.log("Sorting by first embedded document's date, ascending");
db.foo.find({}, { "docs.date": 1 }).sort({"docs.0.date": 1}).forEach(printjson);

jsTest.log("Sorting by second embedded document's date, ascending");
db.foo.find({}, { "docs.date": 1 }).sort({"docs.1.date": 1}).forEach(printjson); 
```

# function - Lua中的函数串联

> ID：11800037
> 
> 赞同：1
> 
> 时间：2012-08-03T16:54:22.143
> 
> 标签：function, lua, concatenation

我正在尝试通过使用 Lua 连接一个函数，因为它实际上是一个玩家姓名的变量。游戏再次成为命令与征服：叛徒。

错误是：`Attempt to concatenate local 'Value' (a function value)`这是通过使用 Get_Player_Name_By_ID 发生的，但是，我不知道使用它的任何方法，因为我需要能够确定哪个用户有哪些杀手！此外，它出现在第 210 行附近。那是在 WriteINI 函数中。

这是我的代码：

```
function OnChat(pID, Type, Message, Target)
FindWords(Message)

if Message == "!killstreaks" then
InputConsole("pamsg %d Killstreaks are a fundamental part of our server. You choose 3 killstreaks to be enabled for use, when you achieve a certain number of kills. Now type !select <Assault/Support>", pID)
end

if FirstW == "!select" or FirstW == "!choose" then
    if SecondW == "Assault" or SecondW == "assault" then
        InputConsole("pamsg %d Attack Chopper   Strafe Run   AH-6 Overwatch   Reaper   Assault Drone   AC130   Pavelow   Juggernaut   Oseprey Gunner", pID)
        InputConsole("pamsg %d UAV   Care Package   IMS   Predator Missile   Sentry Gun   Precision Airstrike", pID)
        InputConsole("pamsg %d  Now type !ks1 <killstreak>, then !ks2 <killstreak>, then !ks3 <killstreak> with 3 of these killstreaks:", pID)
            WriteINI("killstreaks.ini", "Choice", "Assault", Get_Player_Name_By_ID)
    elseif SecondW == "Support" or SecondW == "support" then
        InputConsole("pamsg %d EMP   Juggernaut Recon   Escort Airdrop", pID)
        InputConsole("pamsg %d UAV   Counter UAV   Ballistic Vests   Airdrop Trap   SAM Turret   Recon Drone   Advanced UAV   Remote Turret   Stealth Bomber", pID)
        InputConsole("pamsg %d Now type !ks1 <killstreak>, then !ks2 <killstreak>, then !ks3 <killstreak> with 3 of these killstreaks:", pID)
            WriteINI("killstreaks.ini", "Choice", "Support", Get_Player_Name_By_ID)
    end
end
return 1
end

function ReadINI(File, Section, KeyName)

blnSection = false
intAction = 0
strBracket = [[[]]

   if File ~= nil and Section ~= nil and KeyName ~= nil then
      if File ~= "" and Section ~= "" and KeyName ~= "" then
         i = io.open(File, "r")
         if i ~= nil then
            while true do
               local Line = i:read()   -- Reads a line
               if Line == nil or intAction ~= 0 then
                  break
               else
                  if blnSection == false then
                     Found = string.sub(Line, 0, 1)
                 if Found == strBracket then -- Found Header
                    Header = string.sub(Line, 2, -2)
                    if Header == Section then
                       blnSection = true
                    end
                 end
              else
                 Header = string.sub(Line, 0, 1)
                 if Header == strBracket then
                    intAction = 2
                 elseif Header == ";" then
                    -- Ignor Comments
                 elseif Line == "" then
                    -- Ignor Blank Lines
                 else
                    strFindEqual = string.find(Line, "=")
                    if strFindEqual ~= nil then
                       strKeyname = string.sub(Line, 0, strFindEqual - 1)
                       if strKeyname == KeyName then
                          intAction = 1
                          Value = string.sub(Line, strFindEqual + 1)
                       end   
                    end
                 end
              end
           end
        end

        i:close()

        if intAction == 1 then
           return Value
        elseif intAction == 2 then
           return NoneError
        else
           return NoneError
        end   
     else
        return FileError
     end
      else
         return ArgError
      end
   else
      return ArgError
   end
end

function WriteINI(File, Section, KeyName, Value)

   blnSection = false
   intAction = 0
   strBracket = [[[]]
   strCloseBracket = [[].]]
   strCloseBracket = string.sub(strCloseBracket, 1, 1)
   Save = ""

   if File ~= nil and Section ~= nil and KeyName ~= nil and Value ~= nil then
      if File ~= "" and Section ~= "" and KeyName ~= "" and Value ~= "" then
         i = io.open(File, "r")
         if i ~= nil then
        while true do
           local Line = i:read()   -- Reads a line
           if Line == nil then
              break
           else
              if intAction == 0 then
                 if blnSection == false then
                    Found = string.sub(Line, 0, 1)
                    if Found == strBracket then -- Found Header
                       Header = string.sub(Line, 2, -2)
                       if Header == Section then
                          blnSection = true
                       end
                    end
                 else
                    Header = string.sub(Line, 0, 1)
                    if Header == strBracket then
                       blnSection = false
                       Line = KeyName .. "=" .. Value .. "\n" .. Line
                       intAction = 1
                    elseif Header == ";" then
                       -- Ignor Comments
                    elseif Line == "" then
                       -- Ignor Blank Lines
                    else
                       strFindEqual = string.find(Line, "=")
                       if strFindEqual ~= nil then
                          strKeyname = string.sub(Line, 0, strFindEqual - 1)
                          if strKeyname == KeyName then
                             Line = KeyName .. "=" .. Value
                             intAction = 1
                          end   
                       end
                    end
                 end
              end

              Save = Save .. Line .. "\n"
           end
        end

        i:close()

        if intAction ~= 1 then
           if blnSection == false then
              Save = Save .. strBracket .. Section .. strCloseBracket .. "\n" .. KeyName .. "=" .. Value
           else
              Save = Save .. KeyName .. "=" .. Value
           end
        end

        i = io.open(File, "w")
           i:write(Save)
        i:close()
     else
        i = io.open(File, "w")
           i:write(strBracket .. Section .. strCloseBracket .. "\n" .. KeyName .. "=" .. Value)
        i:close()
       end
      else
         return ArgError
      end
   else
      return ArgError
   end
end

function FindWords(Text)

   Found = string.find(Text, " ")
   if Found ~= nil then
      FirstW = string.sub(Text, 0, Found - 1)
      SecondW = string.sub(Text, Found + 1)
      SecondPlus = SecondW

      Found = string.find(SecondW, " ")
      if Found ~= nil then
     ThirdW = string.sub(SecondW, Found + 1)
     SecondW = string.sub(SecondW, 0, Found - 1)
     ThirdPlus = ThirdW

     Found = string.find(ThirdW, " ")
     if Found ~= nil then
        FourthW = string.sub(ThirdW, Found + 1)
        ThirdW = string.sub(ThirdW, 0, Found - 1)

        Found = string.find(FourthW, " ")
        if Found ~= nil then
           FourthW = string.sub(FourthW, 0, Found - 1)
        end
     else
        FourthW = ""
     end
     else
     ThirdW = ""
     ThirdPlus = ""
     FourthW = ""
  end
   else
  FirstW = Text
  SecondW = ""
  SecondPlus = ""
  ThirdW = ""
  ThirdPlus = ""
  FourthW = ""
   end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:33:09.997

错误在于您如何调用 WriteINI。你在打电话

```
WriteINI(a,b,c,Get_Player_Name_By_ID) 
```

而你应该打电话

```
WriteINI(a,b,c,Get_Player_Name_By_ID(Player_ID)) 
```

# ruby-on-rails - 尝试在 Rails lib 目录中自动加载类时出现 NoMethodError

> ID：11800038
> 
> 赞同：0
> 
> 时间：2012-08-03T16:54:47.913
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有以下内容：

```
# lib/devblog_extensions.rb
module DevblogExtensions
  class Time
    def self.random_date
      # implementation ...
    end
  end
end

# spec/factories/posts.rb
FactoryGirl.define do
  factory :post do
    release_date Time.random_date # NoMethodError occurs
  end
end 
```

然后在`config/application.rb`我有：

`config.autoload_paths += %W(#{config.root}/lib)`

但是当我跑步时，`rspec`我仍然得到一个`NoMethodError`，所以我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:14:54.190

您可能缺少包括

```
# spec/factories/posts.rb
include DevblogExtensions

FactoryGirl.define do
  factory :post do
    release_date Time.random_date # NoMethodError occurs
  end
end 
```

更新：快速修复

```
# lib/devblog_extensions.rb
module DevblogExtensions
end

class Time
  def self.random_date
    Time.now
  end
end 
```

# django - 跨多个模板将项目添加到 Bootstrap 导航栏

> ID：11800055
> 
> 赞同：1
> 
> 时间：2012-08-03T16:55:59.143
> 
> 标签：django, django-templates, twitter-bootstrap

是否可以使用引导程序将多个模板中的项目添加到一个导航栏？具体来说，我有一个几乎所有其他页面都扩展的 HTML 模板，它包括一个引导导航栏。我想从各个模板向同一个导航栏添加其他菜单选项（例如：在日程安排页面上，我想添加一个链接以创建新事件）有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:25:46.000

一种方法是在基本模板中设置一个块

```
{% block navbar %} 
```

在您的导航栏 div 中，然后在其他模板中，您可以在该块中添加您想要的任何额外元素，它们将出现在导航栏中。

# android - Android 上的 SenchaTouch 和 Phonegap - 输入字段焦点未移动

> ID：11800056
> 
> 赞同：1
> 
> 时间：2012-08-03T16:55:59.050
> 
> 标签：android, cordova, input, focus, sencha-touch

我对 Android、SenchaTouch 1.1.1 和 WebView 有疑问。我有一个带有 2 个输入的简单表单。一个是文本和其他密码字段。现在有两个问题。

1.  如果您关注密码字段，您会得到一个覆盖字段，即使您向上或向下滚动它也会浮动，它会保持绝对定位
2.  如果没有密码字段但只有 2 个文本字段，并且您在 android 虚拟键盘上按下一步，则焦点不会移动到下一个输入字段。这实际上适用于任意数量的输入字段

所有这一切都发生在 android 2.1 上，但我认为这是 WebView 和 CSS 的一个更广泛的问题。它可以在 Chrome 中的 iPhone 和 Android 4.X 上正常工作。如果我从 SenchaTouch 中删除 CSS，一切都会按预期工作。所以这不是 DOM 而是 CSS 问题。defsult CSS 中的某些东西一定会导致这一切。代码是：

```
Ext.regApplication(
{
  name: 'MyHome',
  launch: function()
  {
    this.launched = true;
    this.mainLaunch();    
  },
  mainLaunch: function()
  {
    AuthPanel =
    {
      id: 'ID_SM_LoginForm',
      csl: 'CS_SM_LoginForm',

      xtype: 'formpanel',
      flex: 1,

      layout:
      {
        type: 'vbox',
        pack: 'center'
      },
      items:
      [
        {
          id: 'ID_Auth_UserName',
          cls: 'CS_Auth_Field',
          xtype: 'fieldset',
          title: "Username",
          items:
          [
            {
              id: 'ID_Auth_Field_UserName',              
              useClearIcon: false,
              xtype: 'textfield',
              name: 'UserName'
            }
          ]
        },
        {
          id: 'ID_Auth_Password',
          cls: 'CS_Auth_Field',
          xtype: 'fieldset',
          title: "Password",
          items:
          [
            {
              id: 'ID_Auth_Field_Password',
              xtype: 'textfield',
              useClearIcon: false,
              name: 'Password'
            }
          ]
        }
      ],
      listeners:
      {
        afterrender: function(panel)
        {
        }
      }
    };

    if (Ext.is.Phone)
    {
      AuthPanel.fullscreen = true;
    }
    else
    {
      document.body.style.background = "white";

      Ext.apply(AuthPanel,
      {
        autoRender     : true,
        floating       : true,
        modal          : true,
        centered       : true,
        hideOnMaskTap  : false,
        height         : 540,
        width          : 400
      });
    }

    MainPanel = new Ext.Panel(AuthPanel);
    MainPanel.show();
  }
}); 
```

任何人都可以分享有关 CSS 的哪一部分导致此问题的任何见解。有很多 CSS，我不知道从哪里开始寻找。而且没有办法切换到 SenchaTouch 2

# java - NFC 意图过滤器 Android - 匹配 application/vnd.wfa.wsc 记录

> ID：11800057
> 
> 赞同：3
> 
> 时间：2012-08-03T16:56:06.103
> 
> 标签：java, android, nfc

我在标签（NFC Handover wifi）记录类型上写了“application/vnd.wfa.wsc”记录。现在我想用一个扫描标签的给定活动来启动我的应用程序。

我做了以下事情：

我通过编写标签添加了这个：

`NdefRecord.createApplicationRecord("at.nfc.wifi");` （包名）

现在通过扫描标签，adb logcat 向我显示以下内容：

```
...
I/ActivityManager(  252): START {flg=0x10008000 cmp=com.android.nfc/.NfcRootActivity (has extras) u=0} from pid 479
I/NfcDispatcher(  479): matched AAR to NDEF
W/IntentResolver(  252): resolveIntent failed: found match, but none with Intent.CATEGORY_DEFAULT
I/ActivityManager(  252): START {act=android.nfc.action.NDEF_DISCOVERED pkg=at.nfc.wifi (has extras) u=0} from pid 479
W/InputMethodManagerService(  252): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@41877bf8 attribute=null 
```

这里的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="at.nfc.wifi"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="14" />
    <uses-feature 
        android:name="android.hardware.nfc"
        android:required="true" />
    <uses-permission android:name="android.permission.NFC" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".activities.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.nfc.action.NDEF_DISCOVERED" />
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
             <intent-filter>
                <action android:name="android.nfc.action.NDEF_DISCOVERED" />
                <data android:mimeType="application/vnd.wfa.wsc" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity android:name=".activities.NFCWriterActivity"></activity>
        <activity android:name=".activities.NFCReaderActivity"></activity>
        <activity android:name=".activities.WifiManagerActivity"></activity>
        <activity android:name=".activities.WifiConfiguratorActivity"></activity>
        <activity android:name=".activities.TagWriterOptionsActivity"></activity>
        <activity android:name=".activities.WifiScannerTagActivity"></activity>
        <activity android:name=".activities.WifiScannerActivity"></activity>

    </application>

</manifest> 
```

恢复功能：

```
@Override
protected void onResume() {
    super.onResume();
    Intent intent = new Intent(this, this.getClass());
    intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, 0);
    nfcAdapter.enableForegroundDispatch(this, pendingIntent, null, null);
} 
```

所以我想要的是我扫描标签，然后 at.nfc.wifi.activities.NFCReaderActivity 应该启动。

首先 adb logcat 说： W/IntentResolver(252): resolveIntent failed: found match, but none with Intent.CATEGORY_DEFAULT 这是什么意思？

其次，我可以匹配 application/vnd.wfa.wsc 记录类型吗？或者我该怎么做，我的 t.nfc.wifi.activities.NFCReaderActivity 从扫描标签开始。

谢谢你的提示:)

* * *

编辑：现在我的应用程序开始于：

```
 <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>

     <intent-filter>
        <action android:name="android.nfc.action.NDEF_DISCOVERED" />
        <action android:name="at.nfc.wifi.activities.NFCReaderActivity" />

       <category android:name="android.intent.category.DEFAULT" /> 
    </intent-filter> 
```

是否正确，如果我想启动一个子活动而不是主应用程序，我必须在 Launch-Activity 中检查 if (getIntent().getAction().equals(NfcAdapter.ACTION_NDEF_DISCOVERED)) 然后启动一个？我可以过滤这个特殊的应用程序/wsc... 记录吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:45:32.670

只需`<action android:name="android.nfc.action.NDEF_DISCOVERED" />`从第一个（原始）意图过滤器中删除。我认为这应该修复“application/vnd.wfa.wsc”MIME 类型的匹配。

您应该将第二个意图过滤器添加到您希望在收到此类意图时启动的 Activity 的 Activity 声明中。因此，例如将其移至“.activities.NFCReaderActivity”部分。

# ajax - 如何使用 Ajax a4j 重新渲染 panelGroup：支持

> ID：11800059
> 
> 赞同：1
> 
> 时间：2012-08-03T16:56:11.950
> 
> 标签：ajax, jsf, richfaces

首先让我说我显然对 ajax / jsf 很陌生，所以请原谅。首先，我一直在阅读一些richFaces 文档，但仍然不清楚“render”和“reRender”之间的区别。

**我想要实现的是**一个带有两个“区域”的页面，默认情况下这些区域是隐藏/不呈现的。当用户选择一个时，`<h:selectBooleanCheckbox>`这将触发与此 BooleanCheckbox 对应的“区域”的呈现。这似乎比它应该做的工作要多得多，也许我错过了一些非常基本的东西。

这是我的代码。

```
<h:outputLabel for="saveNote" value="Create Note "/>            
<h:selectBooleanCheckbox id="saveNote" value="#{noteController.saveNote}" immediate="true" >            
    <a4j:support event="onchange" reRender="noteArea"/>                         
</h:selectBooleanCheckbox>
<h:outputLabel for="sendEmail" value="Send Email "/>    
<h:selectBooleanCheckbox id="sendEmail" value="#{noteController.sendEmail}" immediate="true">
    <a4j:support event="onchange" reRender="emailArea"/>                                                        
</h:selectBooleanCheckbox> 
```

这是嵌套在一个`<h:form>`

我试图控制渲染的“区域”如下......

```
<h:panelGroup id="noteArea" rendered="#{noteController.saveNote}" layout="block"> 
```

这也嵌套在`h:form`与`<h:selectBooleanCheckbox>`

请帮忙，ajax 开始让我发疯了！

提前非常感谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:10:44.547

reRender 属性将在回发时呈现许多客户端 ID。这应该是客户端 ID，而不是`noteArea`.

除非在您的`h:form`元素中指定`prependId`为 false，否则表单 id 将位于表单中的 panelGroup id 之前，以形成您唯一的客户 id。

```
form1:noteArea 
```

此外，我认为您不想`immediate`在复选框上设置为 true。

# networking - Usenet 使用哪些协议？ISP 检测到它的难易程度如何？

> ID：11800060
> 
> 赞同：0
> 
> 时间：2012-08-03T16:56:13.453
> 
> 标签：networking, ip, usenet

我想弄清楚 ISP 是否可以检测到 Usenet？

我的 ISP 已将我置于 NAT 之后，并且可能正在监视每个数据包。我想知道我是否可以使用网络。我的 usenet 客户端可以选择使用 SSL 来获取文章。那么它是不可检测的吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:29:54.103

根据维基百科（我看的第一个地方），Usenet 使用网络新闻传输协议。至于您的 ISP 监控数据包，这听起来很荒谬。除非您有一个非常小的侵入性 ISP，否则他们没有理由这样做。我不明白他们为什么会特别关心 Usenet。但是 SSL 不会使连接不可检测，它只会隐藏通过连接传输的数据。如果这是一个问题，您可能想尝试 Tor。

[torproject.org](https://www.torproject.org/)

# coffeescript - 在 AngularJS 中处理具有相关模型的表单提交的最佳方法是什么？

> ID：11800061
> 
> 赞同：2
> 
> 时间：2012-08-03T16:56:17.287
> 
> 标签：coffeescript, tastypie, angularjs

我的项目使用 AngularJS + Django Tasypie。我正在使用我在下面发布的 CoffeeScript 代码处理表单提交。由于我刚刚开始使用 Angular 进行开发，因此我想提出改进建议。也许使用服务和/或 $resource？重要的是要注意“项目”实体具有一对多“客户”关系。

谢谢你。

**通用模型类：**

```
class window.Model
    constructor: (options) ->
        @$scope = options.$scope
        @$http = options.$http
        @id = if options.id? then options.id

    fetch: (cb= ->) =>
        @$http.get(@url + '/' + @id).success (data) =>
            @toScope(data)
            cb(data)

    fetchAll: (cb= ->) =>
        @$http.get(@url).success (data) =>
        @toScopeAll(data)
        cb(data)

    save: (data, cb= ->) ->
        @update data, cb if @id? else @create data, cb

    create: (cb= ->) ->
        @$http.post(@url + '/', @fromScope()).success cb

    update: (cb= ->) =>
        @$http.put(@url + '/' + @id, @fromScope()).success cb

    remove: (cb= ->) ->
        @$http.delete(@url + '/' + @id).success cb 
```

**项目/客户模型类：**

```
 class window.ProjectModel extends Model
        url: '/api/project'

        toScope: (data) =>
            @$scope.project = data
            @$scope.client = @$scope.project.client.id

        fromScope: (data) =>
            id: @$scope.project.id
            name: @$scope.project.name
            client: id: @$scope.client

    class window.ClientModel extends Model
        url: '/api/client'

        toScopeAll: (data) =>
        @$scope.clients = [id: '0', name: 'Choose...'].concat data.objects 
```

**控制器代码：**

```
window.ProjectCtrl = ($scope, $routeParams, $http) ->

    redirect = -> window.location = '#/projects'
    $scope.save = -> project.save redirect
    $scope.delete = -> project.remove redirect
    $scope.cancel = redirect

    $scope.client = '0'
    client = new ClientModel($scope: $scope, $http: $http)
    client.fetchAll()

    project = new ProjectModel($scope: $scope, $http: $http)

    if $routeParams.projectId?
        $scope.formType = 'update'
        project.id = $routeParams.projectId
        project.fetch() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:02:59.463

感觉就像您被挂断在每个数据实体一条路由上，这可能源于您将序列化层与数据模型耦合。我建议你在这里重新考虑你的方法。这感觉就像是动机不良的继承。

试着让你的模型简单、无逻辑的 JavaScript 对象。然后，您应该使用适用于所有数据结构的单个序列化/持久层。尝试避免继承，它在这里没有帮助。根据经验，我更喜欢[组合而不是继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)。

最后，您似乎需要进行批量交易。由于您的持久层现在是独立的，您可以修改持久层以一次更新多个 javascript 对象！然后，您可以在服务器上创建事务路由，接受类似于以下的数据结构：

```
[
  ['create', 'project', {project_name: ...}]
  ['create', 'client', {client_attrs}]
] 
```

作为额外的好处，由于单个调用可以处理整个事务，因此如果其中一个操作失败了业务逻辑，您可以在服务器上处理回滚。

# 更新

我刚刚意识到您需要将客户端与项目 ID 相关联。如果您可以在客户端上生成您的 ID（使用 UUID？），那么这种方法将按原样工作。

否则，您可以通过整个“嵌套属性”路径为嵌入了客户端的项目提交数据结构，如下所示：

```
{
  project_name: "...",
  clients: [{client1_attrs}, ...]
} 
```

这种方法经常被使用，但我不喜欢它，因为根据我的经验，它很少能很好地工作。（您如何处理删除？您是否需要指定所有属性并每次更新每个关联的客户端？如果客户端与多个项目关联怎么办？您可以看到它崩溃的速度有多快。）

我认为我更喜欢的方法是，考虑到 UUID 是不可能的，让您的事务服务器控制器能够设置前面步骤返回的值：

此数据结构将告诉事务控制器查找在事务列表第 0 位序列化的数据实体的字段“id”，并在序列化之前将其设置为该客户端的 project_id。

```
[
  ['create', 'project', {project_name: ...}]
  ['create', 'client', {client_attrs}, {project_id: [0, 'id']}]
] 
```

# cakephp - CakePHP - 很难返回一些 3 级深度的数据

> ID：11800062
> 
> 赞同：2
> 
> 时间：2012-08-03T16:56:20.190
> 
> 标签：cakephp

我正在尝试学习 CakePHP，但我很难获得一些数据。我正在开发一个跟踪曲棍球统计数据（真正的基本统计数据）的网站。我有 5 张桌子。

*   季节（id、date_start、date_end）
*   比赛（id、日期、score_team1、score_team2、team1_id、team2_id、season_id）
*   团队（id，名称，颜色）
*   玩家（id、first_name、last_name）
*   player_teams (id, player_id, team_id)

我能够从游戏视图中获得游戏的 2 支球队。我还能够从团队视图中获取团队的所有球员。

从比赛的角度来看，我需要帮助弄清楚如何让球队的所有球员都参与进来。我尝试了很多东西，但似乎都没有。我很难通过从我的游戏视图中执行 $game['Team1']['Players'] 之类的操作来获得一个团队的所有球员，但它不起作用。我试图从一场比赛中深入了解一支球队的球员。Season->Game->Team1->Players，但我被困在 team1 级别。

这是我的一些代码

/cakephp/teams -> 调试（$teams[1]）

```
array(
    'Team' => array(
        'id' => '2',
        'name' => 'Rouge',
        'color' => 'Rouge'
    ),
    'Players' => array(
        (int) 0 => array(
            'id' => '2',
            'first_name' => 'Player2FN',
            'last_name' => 'Player2LN',
            'PlayersTeam' => array(
                'id' => '2',
                'player_id' => '2',
                'team_id' => '2'
            )
        ),
        (int) 1 => array(
            'id' => '4',
            'first_name' => 'Player4FN',
            'last_name' => 'Player4LN',
            'PlayersTeam' => array(
                'id' => '4',
                'player_id' => '4',
                'team_id' => '2'
            )
        )
    )
) 
```

但是从游戏详细信息视图中我得到了这个 -> debug($game) ：

```
array(
    'Game' => array(
        'id' => '2',
        'date' => '2012-09-16 19:30:00',
        'score_team1' => '8',
        'score_team2' => '4',
        'team1_id' => '2',
        'team2_id' => '1',
        'season_id' => '1'
    ),
    'Team1' => array(
        'id' => '2',
        'name' => 'Rouge',
        'color' => 'Rouge'
    ),
    'Team2' => array(
        'id' => '1',
        'name' => 'Bleu',
        'color' => 'Bleu'
    ),
    'Season' => array(
        'id' => '1',
        'date_start' => '2012-09-09',
        'date_end' => '2013-04-07'
    )
) 
```

我很确定这是一个模型问题，所以这是我的团队和游戏模型

```
<?php
    class Game extends AppModel {
        public $name = 'Game';
        public $belongsTo = array(
            'Season',
            'Team1' => array (
                'className' => 'Team',
                'foreignKey' => 'team1_id'
            ),
            'Team2' => array (
                'className' => 'Team',
                'foreignKey' => 'team2_id'
            )
        );
    }
?>

<?php
    class Team extends AppModel {
        public $name = 'Team';
        public $hasAndBelongsToMany = array(
            'Players' =>
                array(
                    'className'              => 'Player',
                    'joinTable'              => 'players_teams',
                    'foreignKey'             => 'team_id',
                    'associationForeignKey'  => 'id'
                )
        );
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:16:19.247

采用

```
 $this->Game->recursive=2; 
   $this->Game->find('all'); 
```

# r - 在 R 中使用 zoo.plot 交替 y 轴

> ID：11800063
> 
> 赞同：0
> 
> 时间：2012-08-03T16:56:21.047
> 
> 标签：r, data-visualization, zoo

我正在使用 zoo.plot 绘制一个多重堆叠图，其中 4 个 y 轴超过 1 个 x 轴。有没有办法交替 y 轴标签和刻度线的一侧，这样它们就不会在同一侧重叠。即顶部图，y 轴在左边，下一个图在右边等等？

我的情节代码如下所示：

```
library(zoo)
z <- with(df, zoo(cbind(depth, angle, Y, Z),as.POSIXct(time))) 
plot.zoo(z,  ylab=c("Depth (m)", "Pitch Angle (degrees)", "Swaying Acceleration (m/s^2)", "Heaving Acceleration (m/s^2)"), col=c("black", "blue", "darkred", "darkgreen"), 
     xlab = c("Time"), lwd=2, plot.type="multiple", ylim=list((rev(range(dive195.11drift$DEPTH))), c(-90,90), c(-10,10), c(-10,10))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:32:33.933

我认为你必须自己做：

```
z <- zoo(cbind(a = 1:10, b = 10:1, c = rep(1:5, each = 2))) # test data

nc <- ncol(z)
opar <- par(mfrow = c(nc, 1), mar = c(2, 2, 1.5, 2))
for(i in 1:nc) { plot(z[, i], yaxt="n", main=colnames(z)[i]); axis(2+2*i%%2) } 
```

# python - 快速（呃）numpy花式索引和减少？

> ID：11800075
> 
> 赞同：11
> 
> 时间：2012-08-03T16:57:05.897
> 
> 标签：python, optimization, numpy, scipy, cython

我正在尝试使用和加速花式索引来“加入”两个数组并在结果轴之一上求和。

像这样的东西：

```
$ ipython
In [1]: import numpy as np
In [2]: ne, ds = 12, 6
In [3]: i = np.random.randn(ne, ds).astype('float32')
In [4]: t = np.random.randint(0, ds, size=(1e5, ne)).astype('uint8')

In [5]: %timeit i[np.arange(ne), t].sum(-1)
10 loops, best of 3: 44 ms per loop 
```

有没有一种简单的方法来加速语句`In [5]`？我应该使用 OpenMP 和类似`scipy.weave`or`Cython`的东西`prange`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T00:27:59.793

`numpy.take`由于某种原因，它比花式索引要快得多。唯一的技巧是它将数组视为平面。

```
In [1]: a = np.random.randn(12,6).astype(np.float32)

In [2]: c = np.random.randint(0,6,size=(1e5,12)).astype(np.uint8)

In [3]: r = np.arange(12)

In [4]: %timeit a[r,c].sum(-1)
10 loops, best of 3: 46.7 ms per loop

In [5]: rr, cc = np.broadcast_arrays(r,c)

In [6]: flat_index = rr*a.shape[1] + cc

In [7]: %timeit a.take(flat_index).sum(-1)
100 loops, best of 3: 5.5 ms per loop

In [8]: (a.take(flat_index).sum(-1) == a[r,c].sum(-1)).all()
Out[8]: True 
```

我认为，除此之外，您将看到速度大幅提升的唯一另一种方法是使用[PyCUDA 之](http://documen.tician.de/pycuda/)类的东西为 GPU 编写自定义内核。

# qt - Qt 默认菜单

> ID：11800083
> 
> 赞同：0
> 
> 时间：2012-08-03T16:57:56.573
> 
> 标签：qt

我需要添加应用程序中存在的常规菜单，包括（文件、设置、帮助......）。是否有我可以包含的默认结构来执行此操作，或者我应该通过按钮和堆栈结构手动添加它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:26:15.830

要创建菜单，您只需使用[QMenuBar](http://qt-project.org/doc/qt-4.8/QMenuBar.html)，然后将 QMenu/QAction 对象放在上面。

如果你有一个 QMainWindow，它的方法 menuBar() 将在主窗口中创建一个菜单。

您也可以在设计器中编辑它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:33:40.977

是的，您需要手动添加它们，没有“默认结构”。

[QMenuBar](http://qt-project.org/doc/qt-4.8/QMenuBar.html)

# php - MAMP-Mac OS X

> ID：11800085
> 
> 赞同：4
> 
> 时间：2012-08-03T16:58:02.917
> 
> 标签：php, mysql, apache, localhost, mamp

我已经在端口 8888 上使用 MAMP 一段时间了，所以我在浏览器中访问网站，如下所示：`http://localhost:8888/website`

但是我刚刚安装了一个 Wordpress Multisite，因此想要切换到端口 80 以允许我正常访问网站并拥有子目录，例如`http://website.co.uk`，`http://subdomain.website.co.uk`

我已经在 MAMP 中设置了 vhosts 文件，并在 MAMP 首选项中将端口更改为 80，但此后执行此 MAMP 将不会启动 Apache。MySQL 启动正常，但 Apache 无法启动。

我试图通过在终端中运行以下命令来手动启动 apache：

`sudo ./startApache.sh`

但每次我这样做时，我都会收到以下错误：

```
(48)Address already in use: make_sock: could not bind to address [::]:80
(48)Address already in use: make_sock: could not bind to address 0.0.0.0:80
no listening sockets available, shutting down
Unable to open logs 
```

如果我切换回端口 8888，MAMP 将再次工作。谁能指出我正确的方向来解决这个问题？

```
sudo lsof | grep LISTEN

launchd      1           root   11u     IPv6  0x8754c7c05566afd       0t0      TCP *:afpovertcp (LISTEN)
launchd      1           root   12u     IPv4  0x8754c7c0556bae5       0t0      TCP *:afpovertcp (LISTEN)
launchd      1           root   30u     IPv6  0x8754c7c0556671d       0t0      TCP localhost:ipp (LISTEN)
launchd      1           root   31u     IPv4  0x8754c7c0556b3ad       0t0      TCP localhost:ipp (LISTEN)
httpd       21           root    4u     IPv6  0x8754c7c0556633d       0t0      TCP *:http (LISTEN)
kdc         43           root    6u     IPv6  0x8754c7c05565f5d       0t0      TCP *:kerberos (LISTEN)
kdc         43           root    8u     IPv4  0x8754c7c0556a53d       0t0      TCP *:kerberos (LISTEN)
httpd      191           _www    4u     IPv6  0x8754c7c0556633d       0t0      TCP *:http (LISTEN)
Dropbox    293            Ell   19u     IPv4  0x8754c7c0a8db6cd       0t0      TCP *:17500 (LISTEN)
Dropbox    293            Ell   25u     IPv4  0x8754c7c0a8da125       0t0      TCP localhost:26164 (LISTEN)
mysqld     454            Ell   10u     IPv4  0x8754c7c0ba8085d       0t0      TCP *:ddi-tcp-2 (LISTEN) 
```

更新：

```
ps 21
PID   TT  STAT      TIME COMMAND
21   ??  Ss     0:00.39 /usr/sbin/httpd -D FOREGROUND 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T17:06:53.863

您可以使用以下命令检查哪些进程正在侦听哪些端口`lsof`：

```
sudo lsof | grep LISTEN 
```

寻找正在监听的进程`*:http`等。

**更新：**

您会看到一个进程已经在使用`*:http`，它是一个名为`httpd`pid 21`httpd`的进程。很可能是一个 Apache 进程。所以我猜你的系统已经在某个地方安装了 Apache（可能会自动启动），或者 MAMP Apache 出于某种原因已经在运行。

尝试运行`ps 21`以获取有关该过程的更多信息。在我安装了 MAMP 的系统上，我看到了这个：（65696 是`httpd`我系统上的 pid）。

```
mattias@waderbook:~$ ps 65696
  PID   TT  STAT      TIME COMMAND
65696   ??  Ss     0:00.57 /Applications/MAMP/Library/bin/httpd -k start 
```

如果您看到`/usr/sbin/httpd`它很可能是与 OS X 捆绑在一起的 Apache 正在运行。尝试通过转到“首选项”中的“共享”并禁用“网络共享”来禁用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T11:54:08.257

就我而言，使用 grep on 时没有任何发现`lsof`。

我一直在寻找几个小时来找到创建 Listen 指令重叠但没有结果的原因。

所以我使用了一个快速修复，那就是将我在 httpd.conf 中的监听端口更改为 8000

`Listen 8000`

改变它，然后重新启动你的apache2。应该做的伎俩...

# php - 使用 passthru()、system() 或 exec() 的异常冒泡

> ID：11800088
> 
> 赞同：1
> 
> 时间：2012-08-03T16:58:16.210
> 
> 标签：php, exception, exec, try-catch

在我自己的测试中，我无法使用类似系统的命令冒泡异常。只是好奇是否有办法使这种情况发生？

**测试1.php：**

```
<?php

   try {

      // None of these (which throw an exception)
      // allow exception to be caught here
      passthru("php -f test2.php");
      system("php -f test2.php");
      exec("php -f test2.php");

   } catch (Exception $e) {
      echo( "Caught exception: " . $e->getMessage() );
   }
?> 
```

**测试2.php：**

```
<?php

   // Throw an exception
   throw new Exception();       

?> 
```

我知道它可以被包含捕获，但出于[我的目的](https://stackoverflow.com/questions/11797471/php-uninclude-or-remove-from-memory)，我不能使用它。以这种方式执行脚本时，有没有办法捕获或“冒泡”异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:04:34.227

就像@minitech 说的那样，你必须听`STDERR`。

当您通过访问命令调用 PHP 脚本时`system()`，它会将它们作为单独的进程运行，您的调用脚本无法访问该进程。

如果您想这样做，您可以查看[`POSIX`](http://php.net/manual/en/book.posix.php)扩展程序。

如果没有，您将不得不测试来自`system()`呼叫的响应，而不是试图捕捉`Exception`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:59:58.627

不，你能做的最好的就是阅读 STDERR。`php`只能输出文本。

# jquery - 动画 jQuery 滚动顶部

> ID：11800090
> 
> 赞同：4
> 
> 时间：2012-08-03T16:58:32.403
> 
> 标签：jquery, jquery-ui, jquery-animate, scrolltop

我在 jQuery 中有一个 scrollTop 函数，但我不能为它设置动画。是否可以？

```
$(".loadmore").click(function() {
  $(this).toggleClass("up-arrow", 1000);
  $(window).scrollTop($('.docs').offset().top, 2000);
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-03T17:30:24.103

你可以用`animate()`这个。

应用于 a`div`的示例代码如下：

```
//Scroll to bottom
$('div').animate({scrollTop: $('div').get(0).scrollHeight}, 3000);

//$('div').get(0).scrollHeight - will give the full height of div.
//scrollTop - will be used to animate from the current position to page end.
//3000 - will be the duration. 
```

演示可以在这里找到：http: [//jsfiddle.net/codebombs/GjXzD/](http://jsfiddle.net/codebombs/GjXzD/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-29T07:20:34.510

```
$('html, body').animate({ scrollTop: $('.docs').offset().top}, 2000); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-14T08:52:51.347

```
$('#ID').click(function(){
$("html, body").animate({ scrollTop: 0 }, 1000);
return false;         }); 
```

试试这段 Jquery 代码

# sql - SQLITE - 将行正确转换为列

> ID：11800093
> 
> 赞同：7
> 
> 时间：2012-08-03T16:58:39.020
> 
> 标签：sql, database, sqlite

我有一个包含产品订单表的数据库，如下所示：

```
order_id | prod_code | prod_color | size | quantity |  
-----------------------------------------------------
1          SHIRT       001          S      10
1          SHIRT       001          M      7
1          SHIRT       001          L      8
1          SHIRT       001          XL     1
1          SHIRT       995          S      2
1          SHIRT       995          M      1
1          SHIRT       995          L      0
1          SHIRT       995          XL     1
2          PANTS       .... 
```

和这样的产品价格表：

```
prod_code | prod_color | price | currency
-----------------------------------------
SHIRT       001          10      EUR
SHIRT       001          9       USD
SHIRT       001          50      YEN
SHIRT       001          15      RUB
SHIRT       995          20      EUR
SHIRT       995          29      USD
SHIRT       995          100     YEN
SHIRT       995          45      RUB 
PANTS       .... 
```

我想要得到的是这样的视图（为简单起见，按 order_id 过滤）：

```
order_id | prod_code | prod_color | size | quantity | EUR | USD | YEN | RUB
---------------------------------------------------------------------------
1          SHIRT       001          S      10         10    9     50    15
1          SHIRT       001          M      7          10    9     50    15
1          SHIRT       001          L      8          10    9     50    15
1          SHIRT       001          XL     1          10    9     50    15
1          SHIRT       995          S      2          20    29    100   45
1          SHIRT       995          M      1          20    29    100   45
1          SHIRT       995          L      0          20    29    100   45
1          SHIRT       995          XL     1          20    29    100   45 
```

我已经浏览了网络和 SO，我发现[这个问题](https://stackoverflow.com/questions/3611542/sql-columns-for-different-categories)向我展示了我需要做什么，但我认为有一些修改......

我尝试在数据库上运行此查询：

```
SELECT o.order_id, o.prod_code, o.prod_color, o.size, o.quantity,
MAX(CASE WHEN p.currency = 'EUR' THEN p.price END) AS 'EUR',
MAX(CASE WHEN p.currency = 'USD' THEN p.price END) AS 'USD',
MAX(CASE WHEN p.currency = 'YEN' THEN p.price END) AS 'YEN',
MAX(CASE WHEN p.currency = 'RUB' THEN p.price END) AS 'RUB'
FROM products_order o JOIN products_prices p ON o.prod_code = p.prod_code
WHERE o.order_id = 1
GROUP BY o.order_id, o.prod_code, o.prod_color, o.size, o.quantity 
```

将在价格列中返回，对于每一行，在整个列中找到的 MAX 值：所以对于 [product_color = 001] 和 [product_color = 995] 我的价格都等于 20 欧元（当 001 更便宜时，只有10欧元！）

我也尝试过不使用 MAX，但它为每个价格提供了一行，使许多单元格为空（然后我明白了 MAX 的用途：D）。

你知道一种方法来做我想做的事吗？如何在单个 prod_color 中使用 MAX，而不是通过每个 prod_color 使用？

我希望你能理解我写的东西，在此先感谢，任何帮助表示赞赏。

（如果您需要更清楚的解释，请询问并尽快回复。

再次感谢，最好的问候

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T17:31:14.120

我添加了一个额外的`JOIN`条件：`AND o.prod_color = p.prod_color`

[http://sqlfiddle.com/#!5/fadad/5](http://sqlfiddle.com/#!5/fadad/5)

```
SELECT
  o.order_id, o.prod_code, o.prod_color, o.size, o.quantity,
  MAX(CASE WHEN p.currency = 'EUR' THEN p.price END) AS 'EUR',
  MAX(CASE WHEN p.currency = 'USD' THEN p.price END) AS 'USD',
  MAX(CASE WHEN p.currency = 'YEN' THEN p.price END) AS 'YEN',
  MAX(CASE WHEN p.currency = 'RUB' THEN p.price END) AS 'RUB'

FROM products_order o
JOIN products_prices p
  ON o.prod_code = p.prod_code
 AND o.prod_color = p.prod_color /* this line is added */

WHERE o.order_id = '1'
GROUP BY
  o.order_id,
  o.prod_code,
  o.prod_color,
  o.size,
  o.quantity 
```

`GROUP BY`没有显示差异的简化示例查询：

[http://sqlfiddle.com/#!5/fadad/13](http://sqlfiddle.com/#!5/fadad/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-16T14:00:53.160

动态查询方法（`CASE`每个数据透视列都有表达式）应该是首选的方法，但是当您预先不知道数据透视列或者由于某种原因很难在应用程序端生成查询时，可以使用 pivot_vtab 形式的替代[方法](https://github.com/jakethaw/pivot_vtab)SQLite 虚拟表扩展。在撰写本文时它不太实用，因为它似乎是一项概念验证工作，但这并不意味着它可以/不会改进。

我不会详细介绍如何构建扩展——您可以在这个[相关的答案](https://stackoverflow.com/a/67537581/2072035)中看到它们。我正在使用这样的问题中的数据。

```
CREATE TABLE products_order(
  order_id INTEGER,
  prod_code TEXT,
  prod_color INTEGER,
  size TEXT,
  quantity INTEGER
);

INSERT INTO products_order(order_id, prod_code, prod_color, size, quantity)
VALUES
  (1, 'SHIRT', 001, 'S', 10),  (1, 'SHIRT', 001, 'M', 7),
  (1, 'SHIRT', 001, 'L', 8),   (1, 'SHIRT', 001, 'XL', 1),
  (1, 'SHIRT', 995, 'S', 2),   (1, 'SHIRT', 995, 'M', 1),
  (1, 'SHIRT', 995, 'L', 0),   (1, 'SHIRT', 995, 'XL', 1);

CREATE TABLE products_prices(
  prod_code TEXT,
  prod_color INTEGER,
  price INTEGER,
  currency TEXT
);

INSERT INTO products_prices(prod_code, prod_color, price, currency)
VALUES
  ('SHIRT', 001, 10, 'EUR'),  ('SHIRT', 001, 9, 'USD'),
  ('SHIRT', 001, 50, 'YEN'),  ('SHIRT', 001, 15, 'RUB'),
  ('SHIRT', 995, 20, 'EUR'),  ('SHIRT', 995, 29, 'USD'),
  ('SHIRT', 995, 100, 'YEN'), ('SHIRT', 995, 45, 'RUB'); 
```

枢轴是这样构建的（我假设扩展已加载，`.load ./pivot_vtab`）。

1.  因为扩展仅限于一个“行”列（您在其上分组），所以创建一个临时映射。我假设 order 键在功能`(order_id, prod_code, prod_color, size)`上`quantity`取决于`order_id`，因此无需对其进行分组，但它将在第 3 步中使用。

    ```
    CREATE TABLE rowmap AS 
    SELECT 
      ROW_NUMBER() OVER(ORDER BY 1) row_id, 
      order_id,  
      prod_code,  
      prod_color,  
      size, 
      quantity
    FROM products_order
    GROUP BY 2, 3, 4, 5; 
    ```

2.  `pivot`使用表创建`rowmap`表。请注意，第三个枢轴“矩阵填充”查询也只需要单列。

    ```
    CREATE VIRTUAL TABLE pivot USING pivot_vtab(
      (SELECT row_id FROM rowmap),
      (SELECT currency, currency FROM products_prices GROUP BY currency),   
      (
        SELECT price
        FROM products_order o
        JOIN products_prices p USING(prod_code, prod_color)
        JOIN rowmap m USING(order_id, prod_code, prod_color, size)
        WHERE o.order_id = 1 AND m.row_id = ?1 AND p.currency = ?2
        GROUP BY o.order_id, o.prod_code, o.prod_color, o.size, p.currency
      )
    ); 
    ```

3.  重新组合`rowmap`列。

    ```
    SELECT order_id, prod_code, prod_color, size, quantity, p.*
    FROM pivot p
    JOIN rowmap r ON p.row_id = r.row_id; 
    ```

    结果集应如下所示（我有`.headers on`和`.mode column`）。

    ```
    order_id    prod_code   prod_color  size        quantity    row_id      EUR         RUB         USD         YEN       
    ----------  ----------  ----------  ----------  ----------  ----------  ----------  ----------  ----------  ----------
    1           SHIRT       1           L           8           1           10          15          9           50        
    1           SHIRT       1           M           7           2           10          15          9           50        
    1           SHIRT       1           S           10          3           10          15          9           50        
    1           SHIRT       1           XL          1           4           10          15          9           50        
    1           SHIRT       995         L           0           5           20          45          29          100       
    1           SHIRT       995         M           1           6           20          45          29          100       
    1           SHIRT       995         S           2           7           20          45          29          100       
    1           SHIRT       995         XL          1           8           20          45          29          100 
    ```

4.  或者，如果您想删除该`row_id`列，您可以使用另一个临时表删除它（`ALTER TABLE ... DROP COLUMN`自 SQLite 3.35 起支持）。

    ```
    CREATE TABLE result_pivot AS 
    SELECT order_id, prod_code, prod_color, size, quantity, p.*
    FROM pivot p
    JOIN rowmap r ON p.row_id = r.row_id;

    ALTER TABLE result_pivot DROP COLUMN row_id;

    SELECT * FROM result_pivot; 
    ```

# jquery - 这个带有上一个/下一个按钮的 JQuery 滑块如何在一个页面中的两个画廊上使用？

> ID：11800096
> 
> 赞同：1
> 
> 时间：2012-08-03T16:58:43.073
> 
> 标签：jquery, button, slider

基于 adaneo 的这个带有上一个/下一个按钮的出色图像滑块，在这个答案中：[图片库下一个和上一个按钮](https://stackoverflow.com/questions/8924862/image-gallery-next-and-previous-button)

他的 JSFiddle 在这里，它完成了我需要它做的事情，除了我需要它在一个页面中的两个单独的画廊上工作：http: [//jsfiddle.net/adeneo/5VEeH/3/](http://jsfiddle.net/adeneo/5VEeH/3/)

这是我的分叉 JSFiddle，除了复制标记外，我没有做太多工作：http: [//jsfiddle.net/cbp9T/1/](http://jsfiddle.net/cbp9T/1/)

我怎样才能重写它，以便我可以在一页中使用它两次？我会将整个事情变成它自己的函数，最后杀死变量值，然后将它复制到一个新函数中，并为第二个画廊提供新的选择器吗？或者？

非常感谢收到回答此类问题的 JSFiddles 的建议/链接，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:26:12.220

您需要为`display`、`next`、`prev`和`img-list`以及`display`在 CSS 中设置每个样式的唯一 ID。

[**演示**](http://jsfiddle.net/sZqXs/)

```
(function($) {
    $.fn.extend({
        gallerify: function(o) {
            return this.each(function() {
                var $this = "#" + this.id;
                var E = $("a", o.imgList), N = 0, T = E.length-1;
                $($this).html('<img src="'+$(E[N]).attr('href')+'" />');
                var btns = o.next.concat(",",o.prev);
                $(btns).on('click', function() {
                    var A = this.id == (o.next).substr(1,o.next.length),X=A?T:0,Y=A?0:T,Z=A?N+1:N-1;N=N==X?Y:Z;
                    $($this).html('<img src="'+$(E[N]).attr('href')+'" />');
                });
                E.on('click', function(e) {
                    var S = $(this).attr('href');
                    $($this).html('<img src="'+S+'" />');
                    e.preventDefault();
                });
            });
        }
    });
})(jQuery);

$("#display").gallerify({imgList:'#img-list',next:'#next',prev:'#prev'});
$("#display2").gallerify({imgList:'#img-list2',next:'#next2',prev:'#prev2'}); 
```

# iframe - iframe 是解决此问题的正确方法吗？

> ID：11800098
> 
> 赞同：0
> 
> 时间：2012-08-03T16:58:59.487
> 
> 标签：iframe

我为更大的网站建立微型网站。目前，我发送 HTML/CSS/JS 并将其嵌入到页面中。99% 的时间，我需要修改我的代码，因为页面上现有的 CSS 和 JS 搞砸了我的内容。父页面使用 XHTML 1.0 Transitional 作为文档类型、旧版本的 jQuery (1.2)、编写不佳的样式等，而我的代码使用更新的脚本和特定于我的页面的 CSS。

如果我将我的内容加载到 . `<iframe>`，我可以完全避免这些问题。但是我担心如果我这样做，会对谷歌抓取页面产生什么样的影响。Google 会将整个页面视为一个页面，还是将其`<iframe>`视为一个“链接”并将其作为单独的页面进行跟踪？

我希望我可以覆盖默认的 CSS 样式，因为它们有一些愚蠢的样式，`body a p span div { font-size:18px; font-family:Times; }`但有太多需要覆盖。我知道我可以使用[作用域 CSS 样式](http://css-tricks.com/saving-the-day-with-scoped-css/)，但现在这似乎有点 hacky。

那么 iframe 会是一个不可接受的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:16:04.470

我刚刚搜索了这个。正如您所担心的那样，显然 iframe 对 SEO 不利。我并不是要听起来粗鲁，但你应该在问这个问题之前先搜索一下自己。我不知道如何解决您的 CSS/JS 问题。

[http://www.straightupsearch.com/search-marketing/best-practices/seo_iframes_a_g/](http://www.straightupsearch.com/search-marketing/best-practices/seo_iframes_a_g/)

# c# - 如何检查某个控件是否属于某种类型？

> ID：11800099
> 
> 赞同：5
> 
> 时间：2012-08-03T16:58:59.813
> 
> 标签：c#, asp.net

当我使用下面的代码时，它可以工作。所有控件都被隐藏。

```
foreach (Control ctr in eItem.Controls)
{
    ctr.visible = false;                  
} 
```

但是，我只想隐藏标签和下拉列表。这就是为什么我试图使用下面的代码但没有成功

```
foreach (Control ctr in eItem.Controls)
{
    if(ctr is Label | ctr is DropDownList)
    {
       ctr.visible = false;
    }              
} 
```

**编辑**

这是整个方法

```
 private void HideLabelAndDDLOnPageLoad()
    {
        foreach (ListViewItem eItem in lsvTSEntry.Items)
        {
            foreach (Control ctr in eItem.Controls)
            {
                if (ctr is Label || ctr is DropDownList)
                {
                    ctr.Visible = false;
                }  
            }
        }
    } 
```

当我删除 if 时，所有控件都被隐藏了。当我把它放回去时，什么也没有发生。

感谢您的帮助

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T17:00:49.540

我认为您所追求的是`||`将其更改为`||`...这是逻辑或运算符。

```
foreach (Control ctr in eItem.Controls)
{
    if(ctr is Label || ctr is DropDownList)
    {
       ctr.Visible = false;
    }              
} 
```

`|`= 位运算符

`||`= 逻辑或运算符

# 根据您的编辑

`updatepanel`如果您想要循环访问更新面板的内容模板容器中的所有控件，那么您的控件似乎位于.

干得好：

```
foreach (Control ctr in UpdatePanel1.ContentTemplateContainer.Controls)
 {
  // rest of code
   if(ctr is Label || ctr is DropDownList)
     {
        ctr.Visible = false;
     }         
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:01:04.353

如果没有您的确切标记，我们只能在这里猜测解决方案。

您必须使用另一个容器将控件包装在 ListView 中的 ItemTemplate 中，例如 Panel 或其他容器。当您在列表视图项上获得控件时，您实际上获得的是变形容器而不是其子项（标签、下拉列表等）。对此的一种解决方案是：

```
foreach (ListViewItem item in lsvTSEntry.Items)
{
    item.FindControl("myLabel").Visible = false;
    item.FindControl("myDropdownList").Visible = false;
} 
```

基本上，您尝试通过 id 查找控件并隐藏它们。请注意，那里没有错误检查，因此如果 FindControl 返回 null，您可能会得到 NullReferenceException。

如果您在 ItemTemplate 中有嵌套容器，并且想要隐藏所有标签和下拉列表，无论它们在哪里，您都可以实现自己的递归 FindControl，如下所示：

```
private Control FindControlRecursive(Control rootControl, string controlId)
{
    if (rootControl.ID == controlId)
    {
        return rootControl;
    }

    foreach (Control controlToSearch in rootControl.Controls)
    {
        Control controlToReturn = FindControlRecursive(controlToSearch, controlId);
        if (controlToReturn != null)
        {
            return controlToReturn;
        }
    }

    return null;
} 
```

不是最优雅的，但是....您可以将其更改为采用一系列 Id 以提高速度。基于此，您当然可以按控件类型实现搜索，而不是将 controlId 作为参数，而是采用要查找的控件类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T17:01:46.613

该| 是按位或运算符。您正在寻找 ||，逻辑或运算符。

```
 if(ctr is Label || ctr is DropDownList) 
```

# php - 如何在不超时的情况下解析大型 CSV 文件？

> ID：11800101
> 
> 赞同：3
> 
> 时间：2012-08-03T16:59:14.540
> 
> 标签：php, mysql, csv, timeout

我正在尝试解析一个 50 兆字节的 .csv 文件。该文件本身很好，但我试图解决所涉及的大量超时问题。每个都设置为上传明智，我可以轻松上传并重新打开文件，但在浏览器超时后，我收到 500 内部错误。

我的猜测是我可以将文件保存到服务器上，打开它并保留我处理的行的会话值。在某一行之后，我通过刷新重置连接并在我离开的那一行打开文件。这是一个可行的想法吗？之前的开发者做了一个效率很低的 MySQL 类，它控制着整个网站，所以我不想写自己的类，如果我没有必要，我也不想乱他的类。

**TL;DR 版本：**保存我当前在具有 38K 行产品的 CSV 文件中的最后一行，然后在 X 行之后，重置连接并从我离开的地方开始是否有效？还是有另一种方法来解析大型 CSV 文件而不会超时？

**注意：**这是 PHP 脚本执行时间。目前在 38K 行，通过命令行运行大约需要 46 分 5 秒。当我从浏览器中删除它时，它 100% 正常工作，这表明它是浏览器超时。据谷歌告诉我，Chrome 的超时是不可编辑的，而 Firefox 的超时很少起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:07:08.923

你可以这样做：

```
<?php

namespace database;

class importcsv
{
    private $crud;

    public function __construct($dbh, $table)
    {
        $this->crud = new \database\crud($dbh, $table);
        return $this;
    }

    public function import($columnNames, $csv, $seperator)
    {
        $lines = explode("\n", $csv);

        foreach($lines as $line)
        {
            \set_time_limit(30);
            $line = explode($seperator, $line);

            $data = new \stdClass();

            foreach($line as $i => $item) 
            {
                if(isset($columnNames[$i])&&!empty($columnNames[$i]))
                    $data->$columnNames[$i] = $item;
            }

            @$x++;

            $this->crud->create($data);
        }

        return $x;
    }

    public function importFile($columnNames, $csvPath, $seperator)
    {
        if(file_exists($csvPath))
        {
            $content = file_get_contents($csvPath);
            return $this->import($columnNames, $content, $seperator);
        }
        else
        {
            // Error
        }
    }
} 
```

TL；DR：`\set_time_limit(30);`每次循环一行都可能会解决您的超时问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T17:19:22.760

我建议从命令行运行 php 并将其设置为 cron 作业。这样您就不必修改代码。不会有超时问题，您可以轻松解析大型 CSV 文件。

~~还要检查这个[链接](http://www.webpronews.com/php-cli-and-cron-2004-04)~~

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T17:06:33.553

由于拼写错误和语法，您的帖子有点不清楚，您能编辑一下吗？

如果你说 Upload 本身没问题，但延迟在处理文件，那么最简单的做法是使用多个线程并行解析文件。您可以使用 java 内置的 Executor 类，或者 Quartz 或 Jetlang 来执行此操作。

*   查找文件的大小或行数。
*   选择一个线程负载（假设每个线程 1000 行）
*   启动执行器
*   循环读取文件。
*   对于每 1000 行，创建一个 Runnable 并将其加载到 Executor
*   启动执行器
*   等到所有线程完成

每个可运行文件都这样做：

1.  获取连接
2.  插入 1000 行
3.  记录结果
4.  关闭连接

# core-plot - 核心图 - 仅绘制图形特定范围内的点

> ID：11800106
> 
> 赞同：1
> 
> 时间：2012-08-03T16:59:37.630
> 
> 标签：core-plot

我有一个简单的散点图，上面有大约 500,000 个点。图表上有这么多点确实让我的应用程序滞后，这并不奇怪。我想知道是否有办法只为特定的 x 范围（如 0-100 或 500-1000）绘制点。用户只会查看图表的某些点（通过放大），因此如果程序只需要绘制少量这些点，它会减少延迟。

每次用户放大/缩小或移动轴时，我都尝试过重新绘制图形，但这实际上似乎使应用程序运行速度变慢。这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T00:14:14.123

您必须过滤数据，并且只为数据源中的绘图提供可见点。使用绘图空间委托来检测可见区域何时发生变化并根据需要调整数据。做到这一点的最佳方式将取决于您的应用程序如何在内部存储其数据。您将需要使用一种数据结构来快速确定需要绘制哪些点。

您不想在每次发生变化时重新加载所有数据。这些图具有插入和删除数据点范围的方法，同时保留其余数据。如果您一次只更改几个点，这比每次重新加载所有数据要快得多。Plot Gallery 应用程序中的“实时绘图”演示展示了使用这些方法的一种方法。

# javascript - 将样式表、javascript 和图像分离到不同文件夹的优势？

> ID：11800111
> 
> 赞同：-2
> 
> 时间：2012-08-03T17:00:03.010
> 
> 标签：javascript, html, css, web-applications, assets

将样式表、javascript 和图像放在 Web 项目中的单独文件夹中是否有任何真正的优势？将所有内容放在“资产”文件夹中有什么问题？

这背后的古老原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:02:52.757

单独的文件夹可以具有以下优点：

1.  如果所有类似类型的资产位于自己的文件夹中，则可以更轻松地同时管理它们。例如，如果您可以更轻松地对位于一个位置的所有 JS 文件进行操作而不是与其他所有文件混合，那么推出仅 javascript 的升级可能会更容易。

2.  如果您在一个大型站点上有数以万计的文件，则将可管理数量的文件保存在多个目录中可能比将所有文件都保存在一个巨大的目录中更容易。

3.  在某些情况下，目录中较少数量的文件在某些​​文件系统中性能更好。

4.  在某些情况下，您可能希望为不同的人提供对不同类型文件的不同维护权限。如果给定类型的文件一起保存在某个目录中，则按目录可能更容易做到这一点。

如果您没有超大量的文件来达到文件系统性能的极限，那么所有这些都可以通过其他技术来克服，因此它更像是一种组织风格选择，并且最适合您的其余部分开发、源代码控制和推出/部署系统。

# c++ - 类的C++指针变量

> ID：11800112
> 
> 赞同：0
> 
> 时间：2012-08-03T17:00:07.927
> 
> 标签：c++, variables, pointers, private

这是一个解释我的问题的例子：

```
//myfile.h
class thing
{
public:
    void doSomething();
private:
    Book *text;
}; 
```

现在，在 doSomething 方法中，如何调用 Book 对象的方法 read()？Read() 是非静态的。对于这个例子，假设我创建了一个名为 obj 的事物对象，它称为 doSomething()。

正确的调用是：obj->read() 还是 this.obj->read()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:01:31.543

正确的调用是`text->read()`. 您也可以使用`this->text->read()`.

在您的示例中，无需使用`this`. 另请注意，这`this`是一个指针，因此`this.next->read()`甚至不会编译。

**编辑**如果您“创建了一个名为 obj 的事物对象，该对象称为 doSomething()”，那么甚至不必是`this`.，具体取决于您在*哪里*实例化`thing`. 如果`thing`不是另一个对象的数据成员，那么您只需要：

```
thing obj;
....
obj.doSomething(); 
```

无论如何，你不能调用，`obj.read()`因为`thing`没有`read()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:01:27.393

它只是：

```
text->read() 
```

# multithreading - 多线程闪存

> ID：11800121
> 
> 赞同：1
> 
> 时间：2012-08-03T17:01:07.770
> 
> 标签：multithreading, flash, actionscript

我想做多线程！我想用播放/暂停/停止按钮制作一个计时器，当用户按下播放按钮时，计时器开始计数。我想做计数过程，而这个，另一个操作应该做，因为有了这个计时器，用户想要测量正在发生的某事，无论如何，场景中的其他地方，我想要某事，并且用户测量需要多长时间！！！我是 Flash 新手，但据我所知，解决方案是多线程！或者是否有任何计时器或类似的东西可以测量时间，而不会导致程序挂起！我正在使用 as2 ，但如果 as3 是唯一的方法，那很好！tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:09:56.093

Flash player 11.4 通过新的并发（actionscript workers）特性提供了多线程。在这里阅读：http: [//blogs.adobe.com/flashplayer/2012/08/flash-player-11-4-and-air-3-4.html](http://blogs.adobe.com/flashplayer/2012/08/flash-player-11-4-and-air-3-4.html)

Flash 11.3 及更低版本不提供多线程。您的问题虽然并不特别需要多线程。flash.utils.Timer 类和 flash.utils.setTimeout() 是异步的，不会挂起您的代码堆栈。

我建议在 adobe 文档上查看这些类。 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html) http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils /package.html#setTimeout()

要在评论中解决您的问题：

```
var timer:Timer = new Timer(1000); //fire every second, make this number smaller to have it update faster
timer.addEventListener(TimerEvent.TIMER, updateLabel);

var timeStamp:int;
function startTimer():void {
    timeStamp = getTimer();
    timer.reset();
    timer.start();
}

function updateLabel(e:Event):void {
    var timePassedSoFar:int = getTimer() - timeStamp;
    //update your label to show how much time has passed (it's in milliseconds)
} 
```

如果您只需要秒数，您也可以只使用 timer.currentCount 属性（而不是 getTimer()），它会告诉您计时器触发了多少次，在上面的示例中，它是每次触发一次所经过的秒数第二。

# html - Html5 视频设置为浏览器全屏 - 与 flash 电影的 noborder 相同

> ID：11800124
> 
> 赞同：1
> 
> 时间：2012-08-03T17:01:21.030
> 
> 标签：html, video, html5-video, fullscreen

我正在尝试将 html5 视频设置为完整的浏览器大小。我可以做到，但不是我想要的。

我在使用闪存之前使用“Scale”等于“noborder”。结果如下：http: [//inoq.com/lxgo/transportes.html](http://inoq.com/lxgo/transportes.html) - 单击右侧菜单，将打开一个带有视频的弹出窗口。

我想用 HTML5 视频做同样的事情。我可以将其设置为完整的浏览器大小，但会根据屏幕大小在顶部和底部或左右显示黑条以保持比例。这是结果：http: [//inoq.com/lxgo2/cidade.html](http://inoq.com/lxgo2/cidade.html)

关于如何做的任何想法？有可能吗？

谢谢布鲁诺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T00:06:28.493

对于 HTML5`video`元素，缩放其中一个维度会导致另一个维度自动缩放以保持纵横比。因此，如果您将元素的`height`of设置为of ，并将其居中在一个包含set to的包含中，您应该会得到您正在寻找的效果。`video``height``window``div``overflow``hidden`

**HTML：**

```
 <div id="container">
        <video id="player" autoplay loop>
          <source src="http://inoq.com/lxgo2/videos/transtejo.mp4" type="video/mp4" />
          <source src="http://inoq.com/lxgo2/videos/transtejo.webm" type="video/webm" />
          <source src="http://inoq.com/lxgo2/videos/transtejo.ogv" type="video/ogg" />
          Your browser does not support the video tag.
        </video>
  </div> 
```

**JavaScript：**

```
 // Using jQuery for ease
    var $player = $('#player');
    var $window = $(window);

    // if you only set one of width and height, the other dimension is automatically 
    // adjusted appropriately so that the video retains its aspect ratio.
    // http://dev.opera.com/articles/view/everything-you-need-to-know-about-html5-video-and-audio/        
    $player[0].height = $window.height(); 

    // centre the video 
    $player.css('left', (($window.width() - $player.width()) / 2) + "px"); 
```

**CSS：**

```
 #container { 
      position: absolute; 
      width: 100%; 
      height: 100%; 
      overflow: hidden; 
  }

  #player { 
      position: absolute; 
  } 
```

# eclipse - eclipse中的编辑器消失了

> ID：11800134
> 
> 赞同：12
> 
> 时间：2012-08-03T17:01:49.297
> 
> 标签：eclipse

感觉有点像n00b第一次遇到windows，但是在Eclipse中丢失了编辑器窗口。我已将两个选项卡之一拖到一侧，以便我可以并排查看两个文件，然后它就消失了。傻傻的，然后我把剩下的tab拖到同一个位置，发现它也消失了。当我选择“Windows”>“导航”>“下一个编辑器”时，我可以看到两个文件仍处于打开状态。我试过打开其他文件，虽然它们确实打开了，但它们同样是不可见的。我尝试重新设置视角，但编辑器缺席了。我的想法已经用完了，所以非常欢迎任何贡献！顺便说一句，我正在使用mac。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-08-13T18:34:28.867

透视重置或窗口-> 新编辑器对我不起作用。但有效的是使用 Window->New Window 创建一个新窗口，然后在隐藏编辑器的情况下关闭第一个窗口。希望这有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-06T09:41:17.527

就这样将这种情况更改为“已回答”：我最终使用 cmd-W 逐个关闭编辑器，然后能够打开一个新编辑器。我仍然不明白是什么导致了问题，但至少现在已经解决了。非常感谢您的建议！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T19:00:17.523

仅当编辑器未最小化时，按**F12键通常会聚焦编辑器。**

编辑器视图最小化后，窗口 -> 新编辑器也将被禁用。

肯定会起作用的是通过做来重置视角`Window -> Reset Perspective`。这应该让编辑器重新进入视野。

看看**[这个](http://youtu.be/-qm70Vq7y3M)**截屏视频，它展示了如何做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T17:11:25.783

他们可能在一个单独的窗口中。尝试右键单击 Dock 上的 Eclipse 图标，看看是否有编辑器。如果是，请将它们拖到您的 IDE 中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-02T10:45:29.077

我今天遇到了同样的问题。我解决了它只是`Window > Reset perspective...`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-08T18:55:51.303

我也失去了编辑器进行拖放。我在这里尝试了所有，最后我使用了 Window > New Widow，第二个带有编辑器。

# html - CSS 最初没有加载

> ID：11800135
> 
> 赞同：0
> 
> 时间：2012-08-03T17:01:49.820
> 
> 标签：html, css

实际上，我以前有一个更长的问题，但我认为这将是最容易找到的。当我最初加载我的页面时，navigationBanner 中的一些项目会移位。但是在我在文本框中输入订单号并重新加载后……一切都在它应该在的地方。我假设我的 CSS 在它应该加载的时候没有加载，但我不完全确定，因为我对 html 和 css 完全不熟悉。

谁能给我解释一下？

这是我的导航栏 html

```
<div id="background"><img src="images/blue%20background.jpg" alt="background" width="100%" height="100%" /></div>
    <div id="header">
        <div id="navigationContainerWrap">
            <div id="navigationBanner">
                <a href="">
                    <img src="images/facebook.png" alt="Facebook Link" border="0" style="margin: 4px 0 5px 44px;" /></a>

                <a href="">
                    <img src="images/twitter-2.png" alt="Twitter Link" border="0" style="margin: 4px 0 5px 2px;" /></a>

                <a href="">
                    <img src="images/pinterest-icon.png" alt="Pinterest Link" border="0" style="margin: 4px 0 5px 2px;" /></a>

                <img src="images/txtNewCustomers.png" alt="New Customers txt" style="margin: 0px 0 5px 50px;" />

                <img src="images/txtExistingCustomers.png" alt="Existing Customers txt" style="margin: 0 0 5px 50px;" />

                <a href="">
                    <img src="images/email.png" alt="Email Link" border="0" style="margin: 4px 10px 6px 0;
                        float: left;" /></a>

                <p style="float: left;">
                    1.800.BLAH.BLAH</p>

                <a href="">
                    <img src="images/btnOrder.png" alt="New Customers Button" border="0" style="float: left;
                        margin: 0 0 0 45px;" /></a>

                <a href="">
                <img src="images/btnLogIn.png" alt="Log in Button" border="0" style="float: left;
                                margin: 0 10px 0px 25px;" /></

            <!-- Order tracking Form input -->    
                 <div class="trackingInput">
                    Order Status<br />
                    BloopBloop Order Number:<br /> 
                    <input id="txtOrderID" type="text" onkeydown="if (event.keyCode == 13) document.getElementById('btnOrder').click()" />
                <input type="button" id="btnOrder" value="Submit" onclick="return btnOrder_onclick()" />             
                </div>

</div> 
```

Annnnd 我认为是相关的 CSS

```
.trackingInput
{
    float: right;
    /*padding: 0 5px 0px 0;*/
    z-index: 35;
    font-weight: normal;
    font-family: "Century Gothic";
    height: 85px;
    margin-top: -45px;
    position: relative;
    margin-left: -1px;
    width: 178px;
}

#navigationBanner
{
    background-color: black;
    background-repeat: no-repeat;
    height: 85px;
    width: 600px;
    float: right;
    color: White;
    font-weight: bold;
    font-size: small;
}
#navigationContainerWrap
{
    background-position: center;
}
#header
{
    background-color: White;
    background-image: url(../Images/GenericLogo.png);
    width: 960px;
    height: 140px;
    background-repeat: no-repeat;
    margin: 0 auto;
    position: relative;
    z-index: 10;
} 
```

提前致谢！抱歉信息超载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:08:13.940

可能性：

1.  您不会两次发出相同的 CSS
2.  您不会两次发出相同的 HTML（例如，您使用不同的标签和/或类）

使用 Internet Explorer 跟踪此问题的一种方法：

1.  在 IE 中加载您的第一页（未按预期工作的页面）
2.  按 F12 打开开发者工具
3.  点击开发者工具中的箭头图标进入选择模式
4.  单击网页中未正确显示的部分
5.  单击 Trace Styles 选项卡（在开发人员工具中）
6.  探索样式树以查看每种样式的来源

# database - Teradata FastExport 脚本 - 无法运行 - 系统找不到指定的文件

> ID：11800136
> 
> 赞同：0
> 
> 时间：2012-08-03T17:01:49.267
> 
> 标签：database, teradata

我是 teradata 的新手。我编写了一个 fastexport 脚本来从数据库中获取一些数据并将其导出到一些 excel 文件中。剧本一切都很好。我就是跑不了！

我正在运行 cmd `fexp < C:\Documents\ScriptName`（这不是实际路径）

其中 ScriptName 是包含脚本的 .txt 文件。

我得到错误：

> “该系统找不到指定的文件”

我曾尝试更改文件的位置等，但总是得到相同的错误。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:07:03.147

我找到了答案。正确的命令是：

fexp < "C:\文件路径\ScriptName.txt"

# android - Robolectric HTTP 测试因 NoSuchMethodError 失败：org.apache.http.impl.client.DefaultRequestDirector

> ID：11800138
> 
> 赞同：2
> 
> 时间：2012-08-03T17:01:54.710
> 
> 标签：android, junit, robolectric

我正在尝试使用 Robolectric 测试框架的[HTTP 层](http://robolectric.blogspot.hu/2011/01/how-to-test-http-requests.html)来测试 HTTP 调用。

我的测试类已经用 RunWith(RobolectricTestRunner.class) 进行了注释。这是一个示例 HTTP 测试用例：

```
@Test
public void testHttpGet() {
    Robolectric.addPendingHttpResponse(200, "All your requests are belong to Robolectric");
    String response = ConnectionUtils.sendRequest();
    assertThat(response, equalTo("All your requests are belong to Robolectric"));
} 
```

此测试失败并且 JUnit 失败跟踪报告以下 DefaultRequestDirector 异常（源自 sendRequest() 调用）：

```
java.lang.NoSuchMethodError: org.apache.http.impl.client.DefaultRequestDirector.<init>(Lorg/apache/commons/logging/Log;Lorg/apache/http/protocol/HttpRequestExecutor;Lorg/apache/http/conn/ClientConnectionManager;Lorg/apache/http/ConnectionReuseStrategy;Lorg/apache/http/conn/ConnectionKeepAliveStrategy;Lorg/apache/http/conn/routing/HttpRoutePlanner;Lorg/apache/http/protocol/HttpProcessor;Lorg/apache/http/client/HttpRequestRetryHandler;Lorg/apache/http/client/RedirectHandler;Lorg/apache/http/client/AuthenticationHandler;Lorg/apache/http/client/AuthenticationHandler;Lorg/apache/http/client/UserTokenHandler;Lorg/apache/http/params/HttpParams;)V
at org.apache.http.impl.client.AbstractHttpClient.createClientRequestDirector(AbstractHttpClient.java:660)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:625)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:576)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:554) 
```

任何想法可能导致 Apache 类抛出异常？

使用当前最新的库 robolectric-1.2-20120730.165026-113-jar-with-dependencies.jar。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T17:17:23.853

在 Robolectric Google Group 上找到答案：[https ://groups.google.com/forum/#!msg/robolectric/jWwWjQ23wHI/X9b_ZdDMJg0J](https://groups.google.com/forum/#!msg/robolectric/jWwWjQ23wHI/X9b_ZdDMJg0J)

1.  右键单击 Robolectric Java 测试项目 > 属性 > Java 构建路径 > 订购和导出。
2.  将 robolectric jar 移动到库列表的顶部。
3.  查找并删除`cached-robolectric-classes.jar`. 如果您按照 Robolectric 的 Eclipse 安装说明进行操作，此文件将位于 [您的主要 Android 项目]/tmp 下。
4.  重新运行 JUnit 并重新开始工作。

# php - 无法让 PHP fsockopen 忽略错误

> ID：11800142
> 
> 赞同：0
> 
> 时间：2012-08-03T17:02:10.450
> 
> 标签：php, fsockopen

我正在使用 etsy 的开源[statsd 库](https://github.com/etsy/statsd)对我的 PHP 脚本进行报告。我的联系基于他们给定的示例，但我遇到了一个问题，似乎`fsockopen`忽略`try/catch`并打印其错误。

当 statsd 服务器启动并运行时，一切正常 - 但如果它关闭或 php 脚本无法连接到它：

```
Warning: fsockopen(): php_network_getaddresses: getaddrinfo failed: 
Name or service not known 
```

我什至尝试`@`在 fsockopen 前面添加，但没有骰子。它似乎也完全忽略了超时设置，因为返回错误大约需要 20 秒：

```
 try {
            $host = 'stats.thisserverisdown.com';
            $port = '8125';
            if ( $fp = @fsockopen("udp://$host", $port, $errno, $errstr, 1) ) {
                if (!(get_resource_type($fp) == 'stream')) { return false; }
                stream_set_timeout($fp,1);
                stream_set_blocking($fp,false);
                foreach ($sampledData as $stat => $value) {
                    @fwrite($fp, "$stat:$value");
                }
                @fclose($fp);
            }
            return true;
        } catch (Exception $e) {
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:13:17.527

`fsockopen`没有抛出错误。因为`fsockopen`必须解析您提供的主机名，所以它调用`getaddinfo()`，这是失败的。

尝试提供 IP 地址，或者：

```
fsockopen( @"udp://$host", ... 
```

# javascript - 这种语法差异有什么影响（如果有的话）？

> ID：11800144
> 
> 赞同：0
> 
> 时间：2012-08-03T17:02:14.477
> 
> 标签：javascript, design-patterns

> **可能重复：**
> [(function() {…}()); 之间有区别吗？和 (function() {…})();?](https://stackoverflow.com/questions/3783007/is-there-a-difference-between-function-and-function)

我见过两种使用自执行匿名函数模式略有不同的方法。

1：

```
(function(){
    //do stuff
}()) 
```

2：

```
(function(){
    //do stuff
})(); 
```

语法差异是否有任何可能不明显的隐含效果，或者这两种技术是否完全相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:05:37.450

他们是一样的。人们倾向于使用第一个。我也认为 JSLint 建议使用第一个版本。我更喜欢第二种。这真的取决于你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:20:39.943

完全一样

它称为自执行函数

有三种模式（但第三种模式不能返回值）

一二是你的问题

一：

```
(function(){
    //do stuff
}()) 
```

二：

```
(function(){
    //do stuff
})(); 
```

第三个是'！' 特点

```
!function(){ 
    //do stuff
}(); 
```

祝你好运！

# java - 如何在 Hadoop 中加载自定义字符集？

> ID：11800145
> 
> 赞同：1
> 
> 时间：2012-08-03T17:02:14.350
> 
> 标签：java, hadoop, classloader

背景：我有一个数据供应商，它提供带有虚假字符编码的 XML 文档。它不是一个有效的编码名称（但它本质上是 ISO 8859-1。）我无法让这个供应商更改格式。

尝试使用 DOM 解析器解析这些 XML 文档会导致`UnsupportedEncodingException`抛出异常。这可能是正常行为，我可以通过编写`Charset`包装 ISO-8859-1 字符编码的 a 并编写 a`CharsetProvider`来支持它来解决它。当我将此提供程序添加到 时`META-INF/services/java.nio.charset.spi.CharsetProvider`，一切正常，并且我的 Charset 用于读取 XML，无需额外编码。

这是我无法解决的问题：**如何让 Hadoop 识别这个 Charset 和 CharsetProvider。**我正在运行 Hadoop 作业以从 HDFS 读取序列文件，其中每条记录都是上述 XML 文档之一。我无法让 DOM 解析器识别和使用我的 Charset。该系统运行 Java 1.6、Hadoop 0.20.2，XML 解析器是 Java 1.6 中内置的内部 Xerces 解析器。

一些额外的细节：

我可以通过执行以下操作（使用“上下文类加载器”）强制 CharsetProvider 在我的代码中手动加载，但我仍然无法实例化 Charset，并且 XML 解析失败：

```
ClassLoader cl = Thread.currentThread().getContextClassLoader();
ServiceLoader<CharsetProvider> serviceLoader = ServiceLoader.load(CharsetProvider.class, cl);
for (CharsetProvider i : serviceLoader) {
    LOG.info("CharsetProvider[1]: " + i);
} 
```

查看可用字符集列表，当我作为独立 Java 应用程序运行时，我看到我的编码存在，但在 Hadoop 中运行时不存在。

```
Set<String> charsetNames = Charset.availableCharsets().keySet();
for (String name : charsetNames) {
    LOG.info("Charset: " + name);
} 
```

以下在 Hadoop 下失败，但在其他情况下有效：

```
Charset cs = Charset.forName(MY_CHARSET_NAME); 
```

我怀疑我需要一些神奇的配置来告诉 Hadoop 加载我的 CharsetProvider，但我不知道怎么做。

# regex - 使用正则表达式从数组中获取项目

> ID：11800147
> 
> 赞同：0
> 
> 时间：2012-08-03T17:02:19.267
> 
> 标签：regex, actionscript-3

我正在使用动作脚本，并且我有一个包含超过 400.000 个字符串的**数组，现在我正在使用循环并将正则表达式应用于数组的每个项目以检查它是否有效。**如果它有效，我将此类项目放入结果数组中。

这个过程耗时太长，所以很麻烦，因为所有过程都必须执行多次。

我一直在考虑是否有任何其他方式（更快）可以用于将正则表达式应用于所有项目而不使用循环。

任何人都可以给我一个想法？

**编辑**

在这里我附上使用的代码：

```
 var list:Array;
        var list_total:Array = new Array;
        var pattern:String = '^['+some_letters+']{'+n+'}$';
        var cleanRegExp:RegExp = new RegExp(pattern, 'gi');

        for (var i:int=0; i<_words.length; i++) {
            list = _words[i].match(cleanRegExp);
            if (list != null)
                for (var j:int=0; j < list.length; j++)
                    list_total.push(list[j]);
        } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:01:29.323

这不是一个完整的答案，但可以帮助您优化代码。

尝试在循环中进行尽可能高效的操作。使用全局函数对它们进行计时，`getTimer()`以便您可以比较哪些方法最有效。在测量/比较时，您可能希望多次触发您的代码，以便这些差异显而易见。

```
// before test
var startTime:Number = getTimer();
// do the expensive operation
var endTime:Number = getTimer();
trace("operation took ", endTime - startTime, " milliseconds."); 
```

例如，在 for 循环中的一项改进是不每次都查询数组的长度：

```
for (var i:int = 0; i < myArray.length; i++) 
```

相反，将长度存储在数组外部的局部变量中并使用它：

```
var length:int = myArray.length;
for (var i:int = 0; i < length; i++) 
```

区别是微妙的，但是从局部变量访问长度比从数组中获取要快。

您可以测试的另一件事是正则表达式本身。尝试提出替代表达式，或使用替代函数。我不记得具体细节，但在一个项目中，我们确定（在我们的案例中）使用该`RegEx.test()`方法是进行此类比较的最快方法。这可能会很快`String.match()`——但除非你测量这些东西，否则你不会知道。

[Grant Skinner](http://gskinner.com)在他的网站上有一些很棒的资源。它们值得一读。这个[关于性能的幻灯片/演示文稿](http://gskinner.com/talks/quick/)值得一看。使用箭头键更改幻灯片。

**编辑**

如果没有听过格兰特的介绍，最初的幻灯片可能看起来没有那么有趣。然而，它确实在幻灯片 #43 周围变得非常有趣（带有具体的代码示例）：http: [//gskinner.com/talks/quick/#43](http://gskinner.com/talks/quick/#43)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:35:30.110

我认为没有什么好的方法可以避免使用循环。不过，可以进一步优化循环。

1.  就像有人已经建议将数组长度读取到 var 一样，因此循环不必在每次迭代时检查长度。
2.  代替嵌套循环，使用 concat 将列表数组连接到 lists_total。我不确定这是否真的更快。我想这取决于正则表达式得到多少匹配。

这是修改后的代码。

```
 var list:Array;
    var list_total:Array = new Array;
    var pattern:String = '^['+some_letters+']{'+n+'}$';
    var cleanRegExp:RegExp = new RegExp(pattern, 'gi');
    var wordsLength:int = _words.length;
    for (var i:int=0; i<wordsLength; i++) {
        list = _words[i].match(cleanRegExp);
        if (list != null)
            lists_total = lists_total.concat(list);
    } 
```

# jquery - 如何根据一天中的时间沿路径为div设置动画

> ID：11800148
> 
> 赞同：1
> 
> 时间：2012-08-03T17:02:24.150
> 
> 标签：jquery, jquery-animate, raphael, ellipse, angle

这个问题让我发疯了，我正在寻找解决这个问题的最佳方法。

我有一个 div $(".sun") 我想沿着椭圆的圆周移动，这是我用 Raphael.js 生成的，所以椭圆与屏幕一样宽，水平居中，和一样高作为宽度的一半，并且绝对定位在 0,0（左上角）：

```
//draw ellipse that is as wide as the window and half as tall as the width
var paper = Raphael(document.getElementById("ellipse"), Wwidth, halfIt);
var c = paper.ellipse(Wwidth/2, halfIt/2, Wwidth/2, halfIt/2);
c.attr({'fill': 'transparent', 'stroke': 'red'}); 
```

[jsfiddle here](http://jsfiddle.net/jelewis8/y47Cr/3/)（在 jsfiddle 中更改了用于演示的值）

椭圆是天体在天空中行进路径的程式化表示。这意味着在早上 6 点，太阳位于屏幕最左侧的椭圆长轴上。中午 12 点，太阳将位于屏幕的顶部中心，下午 6 点，太阳位于椭圆长轴的最右侧。

以度数表示，早上 6 点 = 180 度，中午 12 点 = 90 度，下午 3 点 = 45 度，以此类推。从本质上讲，早上 6 点到下午 6 点之间的每个小时相隔 15 度。添加分钟计算：

```
var hours = new Date().getHours();
(removed code that converts the numerical hour to my stylized degrees for brevity)
var mins = new Date().getMinutes();     
var minsdegree = mins * .25;    
var skyangle = hourdegree + minsdegree; 
```

例如，如果是上午 11:39，skyangle 将等于 114.75 度。

*挑战：* 如何沿椭圆路径为太阳设置动画，使其根据时间与我的自定义角度相对应。从技术上讲，我不需要它来“动画”，只要在页面加载时对应正确的角度即可。但是，如果您保持页面打开足够长的时间，让它沿着路径动画会很整洁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:22:09.677

给你：http: [//jsfiddle.net/y47Cr/54/](http://jsfiddle.net/y47Cr/54/)

每秒更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:28:12.267

我将忽略你的小提琴，因为它不起作用。假设您有以下变量：

*   `cx`, `cy`-- 椭圆中心的坐标；
*   `rx`, `ry`-- 椭圆的 x 和 y 半径；
*   `skyangle`-- 要映射到椭圆上的当前角度；
*   `sun_width`, `sun_height`-- 太阳 div 的宽度和高度。
*   `sun_margin`-- 一个值，以像素为单位，表示您希望在太阳和椭圆之间允许的任何额外间隙（在 0 时，太阳将居中

您应该能够使用此 javascript 计算太阳的位置：

```
var sun_x = cx + Math.cos( Raphael.rad( skyangle ) ) * ( rx + sun_width + sun_margin );
var sun_y = cy + Math.sin( Raphael.rad( skyangle ) ) * ( ry + sun_height + sun_margin ); 
```

就是这么简单。但是，我确实相信 jeffery_the_wind 在我自言自语的时候就做到了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:15:46.450

我想您会想使用正弦函数来求解坐标。由于 x 轴较长，您可能希望将 x 坐标乘以某个乘数。

这是我想出的一个主意。自从数学以来已经有一段时间了，所以我的一些术语可能是错误的。

```
var x, y, top, left,
    originX = 100,
    originY = 50,
    axisLengthX = originX*2,
    axisLengthY = originY*2,
    dist = Math.sin(deg) * axisLengthX,
    sunEle = document.getElementById("sun");

x = dist;
y = dist * (axisLengthX / axisLengthY); // relationship between X and Y axis length of ellipse

top = originY - y;
left = originX - x;

sunEle.style = "top: " + top + "; left:" + left; 
```

# javascript - 在Javascript中的内联函数中将参数作为值传递

> ID：11800150
> 
> 赞同：1
> 
> 时间：2012-08-03T17:02:39.343
> 
> 标签：javascript, jquery, html

当我单击 Javascript / jQuery 中的链接时，我试图让我的页面幻灯片滚动，但我无法弄清楚如何将`for`循环的当前增量值作为参数传递，以`for`绑定我的点击事件链接。当我单击时，它会调用我定义的函数，但使用 my 的当前值`i`，而不是定义函数时的值......这是我的一些代码：

```
temp[0] = 0;
for(var i = 1; i < 8; i++) {
  temp[i] = defaultPositions["slide" + i].top;
  console.log(defaultPositions["slide" + i].top);
  $('a.slide' + i).bind('click', function() {
    $('html, body').animate({scrollTop:(defaultPositions['slide' + i].top / slidesScrollSpeed)}, 1000, function() {
      parallaxScroll();
    });
    return false;
  });
} 
```

如何传递`i`值，以便当我单击链接时，每个链接都具有预期值而不是全部存在`slide8`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:05:36.283

概括：

```
for (var i=1;i<8;++i){
  (function(i){
    // Your code using `i` in callbacks here
  })(i);
} 
```

您的问题是所有闭包之间共享一个变量`i`（为处理程序创建的匿名函数`click`，所有“关闭”在`i`函数外部声明的值），因此当该变量的值增加时循环中的所有函数仍然引用相同的更新值。

通过将循环体包装在一个传入 值的函数中，每次迭代`i`都会获得一个**新**的、不同的变量`i`，以便函数结束。为了更清楚发生了什么，您也可以将其写为：

```
for (var i=1;i<8;++i){
  (function(slideNum){
    // Your code using `slideNum` in callbacks here
  })(i);
} 
```

或者，您可以为闭包创建一个自定义变量，如下所示：

```
for (var i=1;i<8;i++){
  var slideNum = 'slide'+i; // Create a new variable to use in the closure
  temp[i] = defaultPositions[slideNum].top;
  $('a.slide'+i).bind('click', function() {
    $('html, body').animate({
      scrollTop:(defaultPositions[slideNum].top/slidesScrollSpeed)
    }, 1000, function() { parallaxScroll(); });
    return false;
  });
} 
```

另外，请注意 - 根据实现`parallaxScroll()`- 您可能可以将该行简化为：

```
$('html, body').animate({
  scrollTop:(defaultPositions[slideNum].top/slidesScrollSpeed)
}, 1000, parallaxScroll ); 
```

# twitter-bootstrap - 基于 Twitter Bootstrap 的页面小部件样式

> ID：11800151
> 
> 赞同：1
> 
> 时间：2012-08-03T17:02:45.350
> 
> 标签：twitter-bootstrap

我有一个基于 Twitter Bootstrap > [http://wacico.com/carousel-01.htm的页面](http://wacico.com/carousel-01.htm)

我需要让卡通片在每个图像之间以 1px 的边距或 0px 的边距很好地显示。

这似乎是我需要在第二个样式表中添加更多信息的东西怎么做？

我正在尝试使用卡通条显示，使其适合台式机的宽度为六，并且对移动设备具有响应性，甚至不确定我对居中事物的使用是否正确？

我的想法是，我可能需要在纸箱条显示上方和下方显示当前标记为广告的内容，以及在同一文章代码中 - 如果这有意义吗？

有人可以帮忙吗？似乎有多种方法可以做到这一点，但哪种方法最好，尤其是哪种方法最好作为 WP 小部件的一部分工作？

# c# - LINQ to Entities 中不支持指定的类型成员

> ID：11800157
> 
> 赞同：3
> 
> 时间：2012-08-03T17:03:13.313
> 
> 标签：c#, linq, entity-framework-4.1

我正在尝试按照主要政策和子政策（下面的policy.ID，policy.POL2）分配的保险单付款进行分组。理想情况下，我想要最后 3 笔付款、到期日、付款日期、金额和暂记金额，无论付款是否拆分。

如果分期付款，我需要将支付给主保单和副保单的金额相加，但其他三个字段应该相同，所以我不希望重复记录。

我认为这样的事情会起作用，但我得到了一个

> LINQ to Entities 不支持指定的类型成员“PAYDUE”。仅支持初始化程序、实体成员和实体导航属性。

因为 PAYDUE 是一个日期时间。如您所见，我尝试使用内置的 EntityFunctions 方法，但仍然得到相同的错误

```
var mc = new ModelContext();
var policy = mc.Polmasts.Find("N400603");
var payments = from p in mc.Paymnts
               where p.POLICY == policy.ID ||
                     p.POLICY == policy.POL2
               orderby p.PAYPD_ descending
               group p by p.PAYPD_
               into g
               select new 
                       {
                           payduedate = EntityFunctions.TruncateTime(g.FirstOrDefault().PAYDUE),
                           paypaiddate = EntityFunctions.TruncateTime(g.FirstOrDefault().PAYPD),
                           paymentamount = g.Sum(a=>a.AMOUNT),
                           paysuspense = g.FirstOrDefault().SUSP
                       };
foreach (var payment in payments)
{
    Console.WriteLine("%=========== \n PAY DUE DATE: {0} \n PAYMENT DATE: {1} \n AMOUNT: {2} \n SUSPENSE: {3}", payment.payduedate, payment.paypaiddate, payment.paymentamount, payment.paysuspense);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:29:12.167

看看[这个问题](https://stackoverflow.com/questions/6919709/only-initializers-entity-members-and-entity-navigation-properties-are-supporte)。我猜 PAYDUE 不是表架构的一部分？

您可以尝试分离出最终选择，以便在执行选择之前使其具体化表格。像这样的东西（虽然我还没有测试过！）

```
var paymentsRaw = (from p in mc.Paymnts
               where p.POLICY == policy.ID ||
                     p.POLICY == policy.POL2
               orderby p.PAYPD_ descending
               group p by p.PAYPD_).ToList();

var payments = from g in paymentsRaw 
               select new 
                       {
                           payduedate = EntityFunctions.TruncateTime(g.FirstOrDefault().PAYDUE),
                           paypaiddate = EntityFunctions.TruncateTime(g.FirstOrDefault().PAYPD),
                           paymentamount = g.Sum(a=>a.AMOUNT),
                           paysuspense = g.FirstOrDefault().SUSP
                       }; 
```

# wcf - 扩展名“webHttp”未在 system.serviceModel/extensions/behaviorExtensions 的集合中注册

> ID：11800159
> 
> 赞同：0
> 
> 时间：2012-08-03T17:03:20.570
> 
> 标签：wcf, rest, iis, webhttpbinding

我在 IIS 6.1 中托管 REST 服务。我收到以下错误。

```
The extension name 'webHttp' is not registered in the collection at system.serviceModel/extensions/behaviorExtensions 
```

有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:40:43.147

为了解决这个问题，我已经将服务模型、asp.net 2.0 和 4.0 重新注册到 IIS。并在应用程序池配置（高级设置）中启用 32-Bit Applications made true（因为它是 X64 系统）

```
"%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regiis" –i –enable
"%WINDIR%\Microsoft.Net\Framework\v3.0\Windows Communication Foundation>ServiceModelReg.exe -i
"%WINDIR%\Microsoft.Net\Framework\v4.0.30319\aspnet_regiis" –i –enable
"%WINDIR%\Microsoft.Net\Framework\v4.0.30319\ServiceModelReg.exe" -iru 
```

我猜这个问题是因为 32 位应用程序被禁用了。

# primefaces - 在复合组件中时，标题不会出现在 PrimeFaces p:column 中

> ID：11800160
> 
> 赞同：0
> 
> 时间：2012-08-03T17:03:22.400
> 
> 标签：primefaces, composite-component

我尝试将复合组件制作为 Primefaces p:column: **/resources/ezcomp/columnBd_1.xhtml**：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns=   "http://www.w3.org/1999/xhtml"
      xmlns:h= "http://java.sun.com/jsf/html"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:p= "http://primefaces.org/ui">

    <!-- INTERFACE -->
    <cc:interface componentType="org.primefaces.component.Column" preferred="true" shortDescription="Extended Datatable">
        <cc:attribute name="header"/>
        <cc:attribute name="value"/>
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
        <cc:actionSource name="#{component}">
            <p:column headerText="#{cc.attrs.header}">
                <h:outputText value="#{cc.attrs.value}"/>
            </p:column> 
        </cc:actionSource>

    </cc:implementation>
</html> 
```

当我在 p:dataTable 中使用它时：

```
<ez:columnBd_1 header="#{msg.colPriceCloseBid}" value="#{row.closeBid}"/> 
```

我有一列填充了值，但没有标题文本。除了使用标签文件有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:09:28.803

尝试使用 outputText 组件声明标题方面。

```
<p:column>
  <f:facet name="header">
    <h:outputText value="#{cc.attrs.header}" />
  </f:facet>
</p:column> 
```

# f# - 如何使用原语在 F# 中实现列表过滤功能

> ID：11800168
> 
> 赞同：0
> 
> 时间：2012-08-03T17:04:07.793
> 
> 标签：f#, functional-programming, pointfree

我正在阅读[为什么函数式编程很重要](http://www.cs.kent.ac.uk/people/staff/dat/miranda/whyfp90.pdf)，作者使用 foldr 和函数组合实现了几个应用程序。我在 F# 中做了其中的一些，例如 map 函数：

```
let cons a lst = a::lst
let map f lst = List.foldBack (f>>cons) lst [] 
```

然后我想实现列表过滤功能，结果卡住了：

```
let filter pred lst = List.foldBack (what-goes-here?) lst [] 
```

这里*有什么？*函数应该将列表项、累积过滤列表作为输入，如果谓词返回 false，则返回相同的列表，如果返回 true，则返回 cons:ed 列表。

我想我需要这里的选项类型，但不知道如何将它们粘合在一起。是否可以使用 pred 和 cons（可能还有其他一些原语）来组合一个函数来实现这一点**，而无需**编写一个自定义的 lambda 函数来完成所有的工作？这是计算表达式的情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:56:27.297

对您的问题的务实答案是：

```
whatGoesHere = fun x xs -> if f x then x :: xs else xs 
```

匿名函数、if-then-else 和列表都被 F# 从业者视为原语。这是编写此代码的最清晰、最可维护的方式。

唉，您还没有接受前一个响应者的等效正确答案，并且您坚持要查看不涉及 lambda 表达式的代码。不客气：

```
``s``s`ks``s`k`s`ks``s``s`ks``s`k`s`ks``s`k`s`kk``s
`k`s`k``s``s`ks``s`k`s`ks``s`k`s`kk``s``s`ks``s`kki
`ki`k`ki``s``s`ks``s`kki`ki
`k``s``s`ks``s`kk``s`k``s``s`ks``s`kk``s`ks``s`k`s`ks
``s`k`s`kk``s`k`si``s`kki`k``s``s`ks
``s`k`s`ks``s`k`s`kk``s``s`ks``s`kki`ki
`k`kii`ki`k`ki 
```

以上是`whatGoesHere`在 SKI 组合器演算中使用布尔值和列表的合适表示，以 Unlambda 表示法打印。

为方便起见，这里是从无类型 lambda 演算到 SKI 组合子的示例编译器，以及与您的问题相对应的 lambda 演算术语的 F# 定义：

[http://gist.github.com/3277850](http://gist.github.com/3277850)

虽然组合逻辑和 lambda 演算的等价性使得 lambda 表达式在理论上是不必要的，但它们对于表达你作为程序员的意图是必不可少的。“为什么函数式编程很重要”绝不提倡避免 lambda 表达式和辅助函数。相反——定义函数（包括高阶函数）的能力是函数式编程的核心。函数是由组合定义还是明确使用 lambda 演算几乎无关紧要：两者都是论文所讨论的“粘合剂”。

我建议你再读一遍这篇论文（也许还有它的优秀参考资料），然后安装 Haskell 或 Clean。鉴于作者提倡纯惰性默认评估模型，F# 不是探索这些想法的好平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T14:33:08.523

```
let consT pred a lst = if pred a then a::lst else lst
let filter pred lst = List.foldBack (consT pred) lst [] 
```

# mysql - 匹配两个数据库并将相同的行插入另一个

> ID：11800170
> 
> 赞同：0
> 
> 时间：2012-08-03T17:04:17.547
> 
> 标签：mysql, sql, database, merge

我有 2 个名为 DB1 和 DB2 的数据库以及一个名为`movies`. `movie`包含`movie_name`、`year`、`synopsis`等`AKA`。如您所见`synopsis`，`AKA`列是空的。我想匹配两列 (`movie_name`和`year`) 并将相同的结果插入 DB1 的空列。

**DB1.movi​​es**

```
movie_name | year | synopsis | AKA
----------------------------------------
titanic    | 1997 |          |
matrix     | 1999 |          |
alien      | 1979 |          | 
```

**DB2.movi​​es**

```
movie_name | year | synopsis | AKA
----------------------------------------
titanic    | 1997 | xxxxxxx  | XXX
matrix     | 1999 | yyyyyyy  | YYY
alien      | 1979 | zzzzzzz  | ZZZ 
```

之后，DB1.movi​​es 应如下所示：

**DB1.movi​​es**

```
movie_name | year | synopsis | AKA
----------------------------------------
titanic    | 1997 | xxxxxxx  | XXX
matrix     | 1999 | yyyyyyy  | YYY
alien      | 1979 | zzzzzzz  | ZZZ 
```

我能做些什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:21:58.850

（我将假设`movies`在每个数据库中都调用了这些表。）

如果您想用 DB2 中的电影替换数据（并且两个数据库中的表具有匹配的主键），那么您可以执行以下操作：

```
replace into db1.movies select * from db2.movies 
```

如果您只想更新现有行中的`synonpsis`and字段，请执行以下操作：`AKA`

```
update db1.movies mov1, db2.movies mov2
   set mov1.synopsis   = mov2.synopsis,
       mov1.AKA        = mov2.AKA
 where mov1.movie_name = mov2.movie_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:17:20.980

这应该可以解决问题：

```
UPDATE db1.table1 JOIN db2.table2 on db1.table1.movie_name = db2.table2.movie_name AND db1.table1.year = db2.table2.year SET db1.table1.synopsis = db2.table2.synopsis, db1.table2.AKA = db2.table2.AKA 
```

注意我不知道 db1 和 db2 中的表的表名，所以我分别称它们为 table1 和 table2。

# active-directory - 完成 LDAP 查询以从 Microsoft Active Directory 中提取活动用户和服务帐户

> ID：11800171
> 
> 赞同：0
> 
> 时间：2012-08-03T17:04:18.093
> 
> 标签：active-directory

`light`我在 LDAP中看不到;) ...

这是用例：我正在尝试设置 Jira 以同步 LDAP 目录以进行登录，但由于目录很大，我确实需要对如何进行查询非常敏感，以消除垃圾。

我需要用户和服务帐户。

以下是要求（您可以自由提出更多建议）：

1.  帐户不应以`_` `#`或 `开头
2.  应该是普通帐户（不是机器，信任或其他）
3.  它不应该是一个邮件列表
4.  它不应该是会议室

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T17:04:18.093

这是我的部分解决方案，但仍然不完全满意。为了便于阅读，我将条件分开。

它们是为了提高查询速度而排序的：

```
(samAccountType=805306368)                         // user/person (optimum test)
(userAccountControl:1.2.840.113556.1.4.803:=512)   // normal account
(!(userAccountControl:1.2.840.113556.1.4.803:=32)) // allow only accounts with passwords        
(mail=*)                                           // with email
(uSNChanged=*)                                     // eliminates few invalid accounts
(!(sAMAccountName=_*))
(!(sAMAccountName=#*))
(!(sAMAccountName=$*)) 
```

编译查询：

```
(&(samAccountType=805306368)(!sAMAccountName=*)(userAccountControl:1.2.840.113556.1.4.803:=512)(!(userAccountControl:1.2.840.113556.1.4.803:=32))(mail=*)(uSNChanged=*)(!sAMAccountName=_*)(!sAMAccountName=#*)(!sAMAccountName=$*))
```

# ios - 从 UIImage 创建 Leptonica PIX 结构

> ID：11800177
> 
> 赞同：0
> 
> 时间：2012-08-03T17:04:31.037
> 
> 标签：ios, core-graphics

我想从 UIImage 创建一个 PIX 数据结构。PIX的结构：

```
struct Pix
{
     l_uint32             w;           /* width in pixels                   */
     l_uint32             h;           /* height in pixels                  */
     l_uint32             d;           /* depth in bits                     */
     l_uint32             wpl;         /* 32-bit words/line                 */
     l_uint32             refcount;    /* reference count (1 if no clones)  */
     l_int32              xres;        /* image res (ppi) in x direction    */
                                       /* (use 0 if unknown)                */
     l_int32              yres;        /* image res (ppi) in y direction    */
                                       /* (use 0 if unknown)                */
     l_int32              informat;    /* input file format, IFF_*          */
     char                *text;        /* text string associated with pix   */
     struct PixColormap  *colormap;    /* colormap (may be null)            */
     l_uint32            *data;        /* the image data                    */
 };
 typedef struct Pix PIX;

struct PixColormap
 {
     void            *array;     /* colormap table (array of RGBA_QUAD)     */
     l_int32          depth;     /* of pix (1, 2, 4 or 8 bpp)               */
     l_int32          nalloc;    /* number of color entries allocated       */
     l_int32          n;         /* number of color entries used            */
}; 
```

我怎样才能在 iOS 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:20:59.927

您将从 UIImage 开始，然后使用“CGImage”从中获取 CGImageRef。使用 CGImageRef，您可以查询它的宽度、高度、深度、wpl（您将从图像中获得 bytesPerRow，然后通过除以像素大小进行修改）。要获取您需要将其呈现到上下文中的数据，请获取要点，然后将该数据复制到 NSData 对象中。大小将是按 bytesPerRow 值计算的行数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:26:20.930

您可以创建一个`CGBitmapContext`并将图像绘制到其中。您需要使用 RGB 颜色空间来创建上下文。您可能需要在参数中试验`kCGBitmapByteOrder32Little`并以正确的顺序获取 R、G 和 B 分量。`kCGBitmapByteOrder32Big``bitmapInfo`

然后，您可以`struct Pix`使用 、 和 等函数`CGBitmapContextGetWidth`来`CGBitmapContextGetBytesPerRow`初始化您的`CGBitmapContextGetData`。、`xres`、`yres`、`informat`和元素不对应于or的任何属性`text`，因此您可能应该将它们设置为 0 或 NULL。`colormap``CGBitmapContext``UIImage`

查看[*CGBitmapContext 参考*](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CGBitmapContext/Reference/reference.html)以获取有关`CGBitmapContext`.

另请参阅[*Quartz 2D Programming Guide*](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_context/dq_context.html#//apple_ref/doc/uid/TP30001066-CH203-CJBHBFFE)以获取创建位图上下文的帮助，以及将图像绘制到上下文中的帮助。

# python - 如何摆脱 matplotlib 颜色图中的多余行？

> ID：11800181
> 
> 赞同：1
> 
> 时间：2012-08-03T17:04:47.783
> 
> 标签：python, matplotlib

我在 matplotlib 中创建了以下颜色图：

![颜色图](../Images/3721611e7461fa8ddd88c285c917a200.png)

我不知道如何摆脱多余的行，也不知道是什么原因造成的。

我的代码如下：

```
# Create colormap
c = pcolor(data)
set_cmap('jet')
c = pcolor(data, edgecolors='w',linewidths = '3')

# Set x and y-axes
xticks = np.arange(.5,len(x_labels),1)
xlabels = x_labels
plt.xticks(xticks, xlabels)
xlabel('Species')
yticks = np.arange(.5,len(y_labels),1)
ylabels = y_labels
plt.yticks(yticks, ylabels)
ylabel('Experiments')

# Set the range of values to between 0 and 1
plt.clim(-1,1)
#colorbar()
# Either save to file or show
if filename:
    savefig(filename + '.png')
else:
    show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T07:59:04.010

克里斯明确的回答总是有效的。另一种解决方案是告诉 matplotlib 你想要什么，让系统处理细节。你想要一个紧密的轴，所以插入

```
axis('tight') 
```

之前`show()`。或者`axis(image)`也有效，可以说是使细胞呈方形的令人愉快的副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:12:14.717

`matplotlib.pyplot.ylim(ymax=7.5)`使用.更改 y 轴限制怎么样？

# php - Joomla中的mysql orderby中的下一个和上一个SQL语句

> ID：11800183
> 
> 赞同：4
> 
> 时间：2012-08-03T17:04:53.660
> 
> 标签：php, mysql, joomla

我知道事情被错误地转义了，但是我正在尝试编写一个上一个/下一个查询来获取订单中的下一个 id 和上一个 id，但是我的输出与它应该的 phpmyadmin 排序不匹配。我只写了“下一个”，并且会用相反的条件写上一个。这个查询似乎给了我订单中下一个最高的 ID 值...我需要订单索引中的下一个或上一个...有人可以帮忙吗？

```
$db = JFactory::getDBO();
$query = "SELECT image_id FROM #__jxgallery_images WHERE image_id >".$currentid."' ORDER   BY '".$ordering." ".$direction." LIMIT 1";
// Executes the current SQL query string.
    $db->setQuery($query);
// returns the array of database objects
    $list = $db->loadObjectList();
// create the list of ids
    foreach ($list as $item) {
    $next = $item->image_id;
    echo $next.'<br/>';
    }
echo 'The next ID in this sort state is&nbsp;'.$next.'<br />';
?> 
```

这是phpmyadmin，它是正确的......

```
SELECT * FROM `jos_jxgallery_images` 
ORDER BY `jos_jxgallery_images`.`hits` DESC 
LIMIT 0 , 30 
```

我现在已经在我的代码中匹配了这个查询以获得相同的结果。我的变量填充了我的子句中的 ($ordering) 'hits' 字段和 'desc' ($direction)。这很好用。image_ids 和 hits 并不特别……只是数字。当命中排序时，image_ids 会重新匹配。对于该字段中的内容，我不需要 image_id 的下一个值。我需要下一行或上一行，无论值如何，都基于当前的 image_id I 插件。

这些是实际的 image_ids LIMIT 5，它们按 hits 字段降序排列：

```
52791 
52801 
52781 
52771 
52581` 
```

现在，如果我正在查看的当前图像的 id 为`52791`，那么 previous 应该是 nothing 而 next 应该是`52801`。我认为我的查询正在做的是给我一个更高值的 image_id 作为“下一个”，因为这是下一个最高 VALUED 的 image_id，而不是下一行。我可以看到为什么在查询中，我要求大于...但我只需要下一行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T04:41:32.327

我认为问题在于您的 WHERE 条件：`WHERE image_id >".$currentid."'`

如果我了解您要执行的操作，则一种方法是：

```
$query = "SELECT image_id FROM `#__jxgallery_images` ORDER BY ".$ordering." ".$direction." LIMIT 2";

$db->setQuery($query);

$list = $db->loadObjectList();

$next_item = $list[1]->image_id; 
```

请注意，从查询中删除了 WHERE 条件，并且我也更改`LIMIT 1`为`LIMIT 2`. 这样，查询基本上会返回您的最高值和具有下一个最高“命中”值的值。

我希望这有帮助。

# php - 如何从 Zend_Mail_Message 中获取发件人的电子邮件地址？

> ID：11800184
> 
> 赞同：4
> 
> 时间：2012-08-03T17:05:04.287
> 
> 标签：php, zend-framework, email

我正在使用 Zend_Mail_Message 类在我的 PHP 应用程序中显示电子邮件，并且能够输出主题、内容、日期甚至发件人的姓名（使用 $message->from），但我不知道如何获取发送消息的人的电子邮件地址。文档没有帮助，谷歌搜索找到了一百万个关于如何使用 Zend 发送消息的结果，但没有关于获取发送消息的地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:11:42.330

编辑：

~~这就是我最终做到的方式。经过一番挖掘，我在一个名为“return-path”的字段中找到了发件人的电子邮件。不幸的是，这个字段的名称中有一个破折号（WTF??）所以要访问它，我必须这样做： $return_path = 'return-path'; $message->reply_to = $zendMessage->$return_path;~~

使用返回路径会导致一些电子邮件出现一些问题，特别是来自无回复帐户（mail-noreply@gmail.com、member@linkedin.com 等）的消息。这些地址最终看起来像这样：

m-9xpfkzulthmad8z9lls0s6ehupvordjdcor30geppm12kbvyropj1zs5@bounce.linkedin.com

...这显然不适用于前端的“来自”字段中的显示。Apple Mail 和 Gmail 等电子邮件客户端显示 mail-noreply@gmail.com 或 member@linkedin.com，所以这也是我想要的。

无论如何，经过更多研究，我发现 Zend 邮件消息对象中的“发件人”字段总是如下所示：

`"user account name" <user@email.com>`

< > 中的部分是我所追求的，但只是简单地做 $from = $zend_message->from 只给了我用户的帐户名（因此我的原始问题）。在玩了一些之后，这就是我最终让它工作的方式：

```
 $from   = $zendMessage->from;
  $start  = strpos($from, '<');
  $email  = substr($from, $start, -1);
  $result = str_replace('<', '', $email); 
```

希望这可以节省一些人的挫败感。如果有人知道更简单的方法，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-28T02:51:53.633

这个很好用。。

```
 $senderMailAddress = null;
        foreach ( $message->getHeader('from')->getAddressList() as $address ) {
            if ( $senderMailAddress === null) {

                $senderMailAddress = $address->getEmail();
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T22:57:13.910

这里的主要问题是，许多电子邮件程序、中继代理和病毒扫描程序沿途对一个实际上简单且定义明确的电子邮件标准做了一些有趣的事情。

Zend_Mail_Message 扩展到 Zend_Mail_Part，它有一个名为`getHeaders()`. 这会将来自电子邮件的所有数据存储在头部与访问的正文`getContent()`和实际电子邮件中。

使用此方法，您将在标头中获得所有键/值对的数组，并且在开发过程中您应该能够确定您实际需要的标头字段。一旦您知道，您就可以`getHeader('field_name')`直接获取带有或带有实际名称的实际字段。

但是，如果您有许多不同的电子邮件发件人，您可能希望坚持使用完整的标头数组并评估多个字段以获得最佳结果，例如是否有“回复”地址。同样存在许多不确定性，因为并不总是遵守标准。

# php - 代码存在时增加值

> ID：11800185
> 
> 赞同：1
> 
> 时间：2012-08-03T17:05:08.170
> 
> 标签：php, mysql, html

我有一个包含 2 列的 MySQL 表，第一列是 IP 地址，第二列是应该递增的整数。

当一个新的 IP 访问该网站时，对应于该 IP 的整数应该增加 1。PHP 脚本还应该处理 IP 地址已经存在于数据库中的情况。

这是为了更新整数：

```
UPDATE user SET points = points + 1 WHERE code = '$u' 
```

这是为了向数据库添加一个新的 ip（我使用属性“唯一”，不能保存双精度值）：

```
INSERT IGNORE INTO $DB_Table (ip,code) values(INET_ATON('$ip'),'$code') 
```

现在我希望整数仅在新 IP 访问该网站时增加 1。如果我可以减少两个查询并在 1 个查询中完成工作，那就太好了。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:09:04.250

是的，你可以使用这样的东西

```
INSERT INTO table (ip, code, points) values ('ip value', 'code value', 1) ON DUPLICATE KEY UPDATE points = points + 1 WHERE ip = 'ip value'; 
```

请注意，您需要 ip 上的主键或唯一索引才能使其正常工作。我不确定“代码”值代表什么，因此如果它也是唯一键，那么更新子句实际上可能会出现问题。

请注意，我在插入子句中为点添加了初始值 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:09:52.490

`INSERT INTO $DB_Table (ip,code) values(INET_ATON('$ip'),'$code') ON DUPLICATE KEY UPDATE user SET points = points + 1 WHERE code = '$u'`

在 MYSQL 表中有`points`DEFAULT = 1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T17:10:13.207

您可以使用以下[`INSERT ... ON DUPLICATE KEY`](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)方法将两者合并在一起：

```
INSERT INTO visitors (ip, code, counter) VALUES (INET_ATON($ip), '$code', 1) ON DUPLICATE KEY UPDATE counter = counter + 1; 
```

# eclipse - 如何在 Eclipse 中添加编辑器？

> ID：11800186
> 
> 赞同：4
> 
> 时间：2012-08-03T17:05:09.903
> 
> 标签：eclipse

我今天注意到我的列表中没有`HTML`编辑。**如果需要，我如何添加它和其他？**

![在此处输入图像描述](../Images/56b51ed9690b28cb716498d521c54972.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:08:16.847

安装[Web 工具平台](http://www.eclipse.org/webtools/)——或 Eclipse 的 EE Devlopers 版本，其中包括 Web 工具平台。

其他类型的文件通常作为文本文件自动加载。要获得特定的语言功能，您通常需要将该语言的开发库安装到 Eclipse 中。即 C++ 的 CDT，Python 的 PyDev 等。

您还可以在此处找到如何将任意文件类型与特定编辑器相关联：[Eclipse 文件类型关联](http://publib.boulder.ibm.com/infocenter/satinfo/v3r2/index.jsp?topic=/com.ibm.sat.doc/concepts/cirerwp.htm)。

# user-interface - 查看记录编辑历史的前端用户界面

> ID：11800188
> 
> 赞同：0
> 
> 时间：2012-08-03T17:05:27.860
> 
> 标签：user-interface, history

我有一个从数据库中插入/更新/删除记录的 Web 应用程序。每次对表进行事务时，都会使用修改类型和触发器中的先前值记录更改。向用户查看此类交易的良好 Web 用户界面布局是什么？目前我们只是将整个历史表以 html 表格行和列的格式转储给用户。我正在寻找一些界面提示来更好地呈现这些编辑历史。

感谢您的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:21:28.477

您可以使用数据库表的网格表示、纯 html 或由 js 框架生成，那里有很多选项。

对于新插入的没有更新的记录，只显示插入日期时间的记录。

对于已更新的记录，您可以在行的末尾添加一个链接/按钮，其标题为“历史”或“以前的版本”或类似的标题，当用户点击它时，您可以在下面打开一个子网格此记录或带有新网格的弹出窗口（取决于您将如何首先实现网格），它将仅显示此记录的历史记录。

已删除的记录，您可以添加它们（可能在表格的底部），但显示为灰色或被删除。如果您想要它，即使是已删除的记录，您也可以再次添加历史记录选项。

编辑：您还可以在网格上方添加一些过滤功能，供用户选择/查看仅插入/更新/删除的记录，当然还有网格列上的排序功能

# jquery - 无法更改 H3 标记内的 SPAN 标记的文本，其中包含不应使用 jQuery 更改的其他文本

> ID：11800195
> 
> 赞同：0
> 
> 时间：2012-08-03T17:05:54.010
> 
> 标签：jquery, click, html

我的目标是，当用户单击 时，包含`<div class="title">`内容内的文本会发生变化，当再次单击时，它将恢复到以前的值。`<span>``<h3>`

```
<div class="title">
    <h3>Text The Doesn't Change <span>Text That Changes</span></h3>
</div> 
```

但是，当我单击 div 时，无论单击多少次，文本都会更改一次然后停止。

如果我从代码中删除跨度之前的文本：

```
<div class="title">
    <h3><span>Text That Changes</span></h3>
</div> 
```

然后它工作正常，但是我需要为我的特定应用程序提供该文本。

这是我的 jQuery 代码：

```
$('div.title').click(function(){
    $(this).children('h3').children('span').text($(this).text() == '-' ? '+' : '-');;
}); 
```

这是一个链接到页面，看看我是什么：[演示](http://proofs.mm4solutions.com/otis-warren/website/portfolio.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:09:12.537

替换`.children(...)`为`.find(...)`-- 在您的第一个代码块中，`<span>`实际上是文本节点的直接子节点，而不是`<h3>`. 使用`.find`将根据需要向下钻取以找到`<span>`.

**更新**

您在方法`this`内部的使用`.text()`并不指向您的想法。尝试使用回调函数：

```
$('div.title').click(function(){
    $(this).find('span').text(function(i,t) {
        return (t=='-') ? '+' : '-';
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:23:35.690

在这种情况下，您正在访问错误的元素 ( `div.title`)：

```
$(this).text() == '-' ? '+' : '-' 
```

这应该是：

```
$('h3 > span', this).text() === '-' ? '+' : '-' 
```

一切都可以简化为：

```
$('div.title').click(function(){
  var $span = $('h3 > span', this);
  $span.text($span.text() === '-' ? '+' : '-');
}); 
```

​</p>

# memory - 当redis中的内存已满时，为什么数据没有保存在磁盘上？

> ID：11800198
> 
> 赞同：3
> 
> 时间：2012-08-03T17:06:30.897
> 
> 标签：memory, redis, configuration-files, disk

在 redis.conf 文件中，我们将最大内存策略设置为 allkeys-random 的驱逐策略，并分配 4GB 作为最大内存。我们插入了 500 万个密钥，但当我们实际检查 dbsize 时，它​​只显示了大约 250 万个。

所以我有一个问题，驱逐策略是否只从内存或磁盘中删除密钥？

理想情况下，只要给定的 maxmemory 已满，应将选择用于驱逐的键刷新到磁盘，以便以后可以在需要时从磁盘检索它们。

conf 文件注释只提到键将被删除，但它并没有说明它们是仅从内存中删除还是从磁盘（即持久存储）中删除。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:08:27.657

逐出的键将从内存中删除。未触及磁盘快照。但是，创建下一个快照时，磁盘上的值也将消失。

# c# - 如何在 ASP.NET MVC 3 项目的服务层生成 URL

> ID：11800202
> 
> 赞同：4
> 
> 时间：2012-08-03T17:06:43.617
> 
> 标签：c#, asp.net-mvc-3, url, web-applications, service-layer

我正在寻找一种简单的方法（如果存在）在服务类中为 ASP.NET MVC 3 Web 应用程序中的指定控制器和操作生成 URL。我想在服务层执行此操作，因为需要将此 URL 编码为 QR 码。

这在视图或控制器中很简单，因为通过 System.Web.Mvc 可以使用 UrlHelper，所以我可以在使用我的服务类的控制器操作中创建 URL 的开头，但我希望在点二维码生成。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T17:11:33.093

具有不同层的一个主要原因是关注点分离。服务层不应该关心请求路由。

我会将 URL 传递到服务层并让服务层返回生成的二维码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-07T00:28:49.263

我理解关注点的分离，但有时开发人员必须做开发人员必须做的事情！

所以这就是我所做的：

```
 var Url = new UrlHelper(HttpContext.Current.Request.RequestContext);
    var myUrl= Url.RouteUrl("routeName", new { controller="ControllerName", action="Index", area="", otherDictionaryEntries="otherId"}); 
```

问候！

# java - 用 ChartPanel 覆盖paintComponent

> ID：11800203
> 
> 赞同：1
> 
> 时间：2012-08-03T17:06:46.207
> 
> 标签：java, jfreechart, paintcomponent

我在图表上显示一条线时遇到问题。我有一个`JFreeChart`，如果我使用`paintComponent()`如下，我会看到线条但看不到图表。提前感谢您的帮助。

```
import java.awt.Color;
import java.awt.Graphics;
import javax.swing.JFrame;
import javax.swing.JPanel;
import org.jfree.chart.*;
import org.jfree.data.general.SeriesException;
import org.jfree.data.time.*;
import org.jfree.data.xy.XYDataset;

public class TestChartPanel extends JPanel {

    private static XYDataset createDataset() {

        final TimeSeries series = new TimeSeries("Random Data");
        Day current = new Day(1, 1, 1990);
        double value = 100.0;
        for (int i = 0; i < 4000; i++) {
            try {
                value = value + Math.random() - 0.5;
                series.add(current, new Double(value));
                current = (Day) current.next();
            } catch (SeriesException e) {
                System.err.println("Error adding to series");
            }
        }
        return new TimeSeriesCollection(series);
    }

    private static JFreeChart createChart(final XYDataset dataset) {
        JFreeChart chart = ChartFactory.createTimeSeriesChart(
            "Test",
            "Day",
            "Value",
            dataset,
            false,
            false,
            false);
        return chart;
    }

    /**
    * @param args
    */
    public static void main(String[] args) {

        JFrame f = new JFrame();
        XYDataset xyd = createDataset();
        JFreeChart jfc = createChart(xyd);
        ChartPanel cPanel = new ChartPanel(jfc) {

            /**
            *
            */
            private static final long serialVersionUID = 1L;

            public void paintComponent(Graphics g) {
                super.paintComponents(g);

                System.out.println("paooooooooooooooooooooooo");
                g.setColor(Color.RED);

                g.drawLine(100, 100, 200, 200);
            }
        };
        JPanel jp = new JPanel();
        jp.add(cPanel);
        f.getContentPane().add(jp);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.pack();
        f.setVisible(true);
    }
} 
```

**我认为我做错了`JFrame`，`JPanel`但无法弄清楚我的错误；完整代码已发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T23:47:06.403

你的覆盖`paintComponent()`应该调用

```
super.paintComponent(g); 
```

不是

```
super.paintComponents(g); 
```

# jquery - 如何初始化可能在 MVC3 应用程序中动态加载的 jquery ui 小部件

> ID：11800204
> 
> 赞同：2
> 
> 时间：2012-08-03T17:06:47.190
> 
> 标签：jquery, asp.net-mvc-3

我有一个实现为 MVC3 PartialView 的可重用组件。该组件包括需要 javascript 初始化代码才能运行的 jquery-ui 小部件。下面是一个简化的例子：

==== MySimplifiedPartialView.cshtml ====

```
<div id="myTabs">
    <ul>
        <li><a href="#myTabs-tab1">Tab 1</a></li>
        <li><a href="#myTabs-tab2">Tab 2</a></li>
        <li><a href="#myTabs-tab3">Tab 3</a></li>
        <li><a href="#myTabs-tab4">Tab 4</a></li>
    </ul>
    <div id="myTabs-tab1">
       ...content
    </div>
    <div id="myTabs-tab2">
       ... content
    </div>
    ... etc ...
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $("#myTabs").tabs();
    });
</script> 
```

当这个 PartialView 正常加载到页面中时，`$(document).ready`会运行初始化代码并正确初始化小部件（在本例中为 jquery-ui 选项卡）。

但是，我也希望能够动态地将这个 PartialView 加载到 DOM 中，例如作为 AJAX 请求的结果。在这种情况下，确保初始化代码运行的常用方法是什么？在 ASP.NET WebForms 应用程序中，我会使用`UpdatePanel`, 并通过处理加载事件来实现这一点，例如：

```
Sys.Application.add_load(function () {
    $("#myTabs").tabs();
}); 
```

MVC3 应用程序中的等价物是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:14:05.527

你有几个选择。最简单的通常是在局部视图中包含脚本：

```
<div id="#partial_view">Here is content in my partial view</div>
<script type="text/javascript">
    (function($) {
        $('#partial_view #myTabs').tabs();
    } (jQuery));
</script> 
```

[tsegay 还表明您可以在 ajax 成功事件期间执行此操作](https://stackoverflow.com/a/11800315/304832)。

作为第二个选项的变体，由于您担心封装，因此不显眼地初始化 javascript 行为。例如：

```
<div data-tabs="true">Here is content in my partial view</div> 
```

然后，您可以将初始化封装到一个公共对象中，如下所示：

```
<script type="text/javascript">
    (function($) {
        $.myApp = {
            obtruders: {}
        };

        // apply obtrusive behaviors
        $.myApp.obtrude = function (selector, obtruders) {
            var obtruder;
            obtruders = obtruders || $.myApp.obtruders;
            for (obtruder in obtruders) { // execute every registered obtruder
                if (obtruders.hasOwnProperty(obtruder)) { // skip any inherited members

                    // apply an unobtrusive behavior
                    if (typeof obtruders[obtruder] === 'function') {
                        obtruders[obtruder].apply(this,
                            Array.prototype.slice.call(arguments, 0, 1) || document);
                    }

                    // apply all unobtrusive behaviors in set
                    if (typeof obtruders[obtruder] === 'object') {
                        $.myApp.obtrude(selector, obtruders[obtruder]);
                    }
                }
            }
        };

        // apply tabs behavior
        $.extend($.myApp.obtruders, {
            tabs: function (selector) {
                $(selector).find('[data-tabs=true]').tabs();
            }
        });

        $(function() {
            // initialize unobtrusive behaviors
            $.myApp.obtrude(document);
        );

    } (jQuery));
</script> 
```

上面的代码中有一些初始设置，但最终您可以在 ajax 成功事件期间执行此操作：

```
success: function(html) {
    $('#partial_placeholder').html(html);
    $.myApp.obtrude($('#partial_placeholder'));
} 
```

视图不需要知道它必须在局部视图中的任何内容上调用 .tabs() ，只需知道局部具有一些不显眼的 UX 行为。您可以使用不显眼的日期选择器或其他需要初始化的东西来做同样的事情。您只需要 $.myApp 对象中的另一个 $.extend 部分：

```
// apply datepickers
$.extend($.myApp.obtruders, {
    datepickers: function(selector) {
        $(selector).find('[data-datepicker=true]').datepicker();
    }
}); 
```

这样做的另一个优点是您不需要对普通（非部分）视图进行任何初始化。$(function(){..}); 在脚本第一次加载到浏览器中时，通过调用 $myApp.obtrude(document) 来为您处理上述大脚本的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:15:37.177

一种选择是您可以在 ajax 调用结束后加载 jquery-ui 选项卡

如果您使用 jquery 进行 ajax 调用

```
$.get('..',{},function(){
$("#myTabs").tabs(); //this will load the jquery-ui tabs
}); 
```

# entity-framework - 为什么 EF Power Tools 生成的类不是部分的？

> ID：11800206
> 
> 赞同：0
> 
> 时间：2012-08-03T17:06:55.283
> 
> 标签：entity-framework, code-generation, partial-classes

我正在使用 Reverse Engineered Code First 代码并看到如下存根：

```
public class User
{
    public User()
    {
        this.Addresses = new List<Address>();
        ...
    }

    public int ID { get; set; }
...
} 
```

[什么时候，基于这个问题，我希望看到部分课程。](https://stackoverflow.com/questions/11202016/why-poco-classes-generated-ef-4-x-dbcontext-generator-for-c-sharp-are-partial)

这不会改变用我自己的代码扩展生成的类的首选方式（在链接的答案中很好地总结了，顺便说一句）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:53:30.847

有一种方法可以通过更改 TT 文件来自定义实体对象的输出。

[Rowan Miller 有一篇关于如何做到这一点的优秀博客文章。](http://romiller.com/2012/05/09/customizing-reverse-engineer-code-first-in-the-ef-power-tools/)

在您的示例中，您可以更新模板中的 Entity.TT 文件

由此：

```
public class <#= efHost.EntityType.Name #> 
```

对此：

```
public partial class <#= efHost.EntityType.Name #> 
```

它将创建您正在寻找的部分类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T21:04:51.670

我们的目标是尽可能生成最简单的类，尽可能接近您手写的内容。将它们更改为部分没有问题 - 这正是我们使生成可定制的原因。

〜罗文

# r - write plots to png file

> ID：11800212
> 
> 赞同：0
> 
> 时间：2012-08-03T17:07:20.027
> 
> 标签：r, plot, png, ggplot2

I can use ggplot2 to store the output of ggplot command to an object and call that object within grid.arrange to write to a file in an R script, as below:

```
p<-ggplot(x, aes(x=Date, y=Date)) + geom_bar(aes(x=Date,y=Data)

png("data.png", height=700, width=650)

grid.arrange(p, main=textGrob("Data"), gp=gpar(cex=2)               

dev.off() 
```

I am creating bunch of forecast graphs using plot but I cannot do the same thing. Any one has any suggestion how can I write the ouput of plot to a png file in a script?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:55:03.173

We don't have data to work with and the questions not clear so here's an example of what I think the OP is after (separate plots for each plot) using the mtcars data set:

```
dat <- split(mtcars, mtcars$cyl)

lapply(dat, function(x) {
    ggplot(x, aes(mpg, disp, colour=gear)) + geom_point()
    }
)

#a way to get separate plots for each plot
plot2 <- function(theplot, name, ...) {
    name <- paste0(name, ".png")
    png(filename=name)
    print(theplot)
    dev.off()
} #plotting function

lapply(seq_along(dat), function(i) {
    x <- dat[[i]]
    z <- ggplot(x, aes(mpg, disp, colour=gear)) + geom_point()
    plot2(z, name=paste0("TEST", names(dat)[i]))
    }
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:27:32.860

```
data <- data.frame(x=1:10,y=rnorm(10))
p <- ggplot(data, aes(x,y)) + geom_point()
p
library(gridExtra)
Loading required package: grid
grid.arrange(p,p,p)
ggsave('~/Desktop/grid.png') 
```

Does this approach not work with forecast graphs?

# jquery - 错误 jquery 元素 DOM

> ID：11800214
> 
> 赞同：0
> 
> 时间：2012-08-03T17:07:27.363
> 
> 标签：jquery, dom, element

```
 var foto = 'htp://midomain.com/folder/pic.jpg';
  var img = new Image();
  $(img).attr({'src': foto, 'width':'100', 'height': '100'})
        .load(function(){
          $(this).hide();                                   
          $(this).fadeIn('slow');
    })
    .click(function(){
      var ancho = 0;
      var img2 = new Image();
      $(img2)
       .attr('src', $(this).attr('src'))
       .load(function(){
            $(this).hide();                                 
            $(this).fadeIn('slow');
            ancho = $(this).width();
            $(img2).attr({'width': $(this).width(), 'height': $(this).height()});
       });

$('body').appendTo(img);

console.log(ancho); //0
console.log($(img2).attr('width')); //undefined
//get width img2 :( 
```

alguien puede obtener el valor de 宽度和高度

有人可以帮助我，我需要获取元素 img2 的宽度

编辑：我需要图片的原始宽度谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:18:42.107

```
 var ancho = 0;
  var img2 = new Image();
  $(img2)
   .attr('src', $(this).attr('src'))
   .load(function(){
        $(this).hide();                                 
        $(this).fadeIn('slow');
        ancho = $(this).width();
        $(img2).attr({'width': $(this).width(), 'height': $(this).height()});
   }); 
```

在此代码块之前添加：

$(那个) = $(这个)

然后像这样使用 $(that) ：

$(img2) .attr('src', $(that).attr('src') ...等

问题是，当您为 $(img2) 调用链式函数时，$(this) 的范围现在指的是 img2，而不是 img1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:25:32.233

您有一个范围问题，并且您绑定加载事件和设置属性的顺序存在一个小问题。

```
var foto = 'https://www.toontrack.com/getdbimage.asp?myproducts=7';
var img = new Image();
$(img).load(function() {
    $(this).hide();
    $(this).fadeIn('slow')
}).attr({
    'src': foto,
    'width': '100',
    'height': '100'
}).click(function() {
    var ancho = 0;
    var img2 = new Image();
    $(img2).load(function() {
        ancho = this.width;
        console.log(ancho);
    }).attr('src', $(this).attr('src'));
}).hide();
$('body').append(img);​ 
```

演示：http: [//jsfiddle.net/9yw5H/](http://jsfiddle.net/9yw5H/)

此外，您可以使用 html5 将其缩短为：

```
var foto = 'https://www.toontrack.com/getdbimage.asp?myproducts=7';
var img = new Image();
$(img).load(function() {
    $(this).hide();
    $(this).fadeIn('slow')
}).attr({
    'src': foto,
    'width': '100',
    'height': '100'
}).click(function() {
    var ancho = this.naturalWidth;
    console.log(ancho);
}).hide();
$('body').append(img);​ 
```

演示：http: [//jsfiddle.net/9yw5H/1/](http://jsfiddle.net/9yw5H/1/)

# jquery - 如何强制图像首先加载

> ID：11800216
> 
> 赞同：0
> 
> 时间：2012-08-03T17:07:29.807
> 
> 标签：jquery, html, css, image

我有一个照片库，根据图片的数量，加载可能需要一些时间。我有一个 .gif 加载图像，已设置为在加载画廊时显示。但是，由于某种原因，.gif 本身需要几秒钟才能出现在屏幕上。

如何强制 .gif 在页面上的其他图像之前加载，以便用户立即看到“加载”图像？

这是网站[照片库](http://daemondeveloper.com/photography/gallery.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:10:19.557

第 1 步：Ajax 调用加载 gif

第 2 步：在 ajax 回调中加载其余部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:18:25.287

图像的大小是整个问题。背景，全尺寸照片，所有这些都增加了带宽。即使在宽带上也需要很长时间，因为需要单独下载太多图像。

用两个小 PNG 替换您的巨大背景，并为实际画廊使用小缩略图。你的问题就会消失。

# python - python 瓶子 css 图像和 css 路由

> ID：11800219
> 
> 赞同：1
> 
> 时间：2012-08-03T17:07:55.407
> 
> 标签：python, python-2.7, bottle

`@route('/image/')`在不通过瓶子（或`@route('/css/')`）路由并使用 static_file 返回的情况下，我将如何将 css 和图像链接到模板？因为我无法正常链接 css（它找不到 css/图像），如果我通过 static_file 进行链接，任何人都可以转到该链接并查看 css/图像（IE`www.mysite.com/css/css.css`或`www.mysite.com/image/image.png`）。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:24:22.463

为了让网络浏览器能够下载和呈现 css 或图像，它必须是您页面的一部分（人们可以通过查看页面的源来查看它）或可通过 URL 访问。

因此，如果您试图让人们只能查看您的 css 或仅查看您的图像，那么答案是没有办法绕过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T03:54:40.510

在文档中查看如何路由到瓶中的静态文件，这里：[http ://bottlepy.org/docs/dev/tutorial.html#tutorial-static-files](http://bottlepy.org/docs/dev/tutorial.html#tutorial-static-files)

# java - 将 Spring 与 JSF2 集成

> ID：11800224
> 
> 赞同：2
> 
> 时间：2012-08-03T17:08:09.233
> 
> 标签：java, spring, jsf-2

我在一个项目上工作`jsf2` `spring`和`hibernate`。当我想将 jsf2 与 spring 集成时，在启动我的 JSF 时出现此错误`tomcat7`。我有罐子**myfaces-impl & api**。我搜索了互联网，但直到现在都没有找到解决方案。

```
Grave: Exception lors de l'envoi de l'évènement contexte initialisé (context initialized) à l'instance de classe d'écoute (listener) com.sun.faces.config.ConfigureListener
java.lang.NoClassDefFoundError: com/sun/facelets/tag/TagHandler
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2823)
at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1160)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1655)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1533)
at com.sun.faces.util.Util.loadClass(Util.java:205)
at com.sun.faces.config.processor.AbstractConfigProcessor.loadClass(AbstractConfigProcessor.java:289)
at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.processHandlerClass(FaceletTaglibConfigProcessor.java:365)
at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.processTags(FaceletTaglibConfigProcessor.java:351)
at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.processTagLibrary(FaceletTaglibConfigProcessor.java:299)
at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.process(FaceletTaglibConfigProcessor.java:248)
at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:313)
at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:208)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4765)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5260)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1525)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1515)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: com.sun.facelets.tag.TagHandler
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1688)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1533)
... 25 more 
```

**网页.xml：**

```
<listener>
<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
<listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>/WEB-INF/application-context.xml</param-value>
</context-param>

<servlet>
<servlet-name>Faces Servlet</servlet-name>
<servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>Faces Servlet</servlet-name>
<url-pattern>*.jsf</url-pattern>
</servlet-mapping>

<filter>
<filter-name>RichFaces Filter</filter-name>
<filter-class>org.ajax4jsf.Filter</filter-class>
</filter>
<filter-mapping>
<filter-name>RichFaces Filter</filter-name>
<servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

**面孔-config.xml：**

```
<application>
<el-resolver>
org.springframework.web.jsf.el.SpringBeanFacesELResolver
</el-resolver>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:00:05.510

您需要添加`jsf2`库。如果您已添加它，那么它不在您的类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:14:51.603

在 JSF 2 中使用旧的 facelets jar 没有意义，因为实现捆绑了 facelets VDL。相反，似乎在 JSF 2 应用程序中使用了一些 JSF 1.2 库，这是不对的。如果您使用 JSF 2，只需更新您的库。

# events - 如何向 AsyncCompletedEventArgs 发送参数

> ID：11800229
> 
> 赞同：0
> 
> 时间：2012-08-03T17:08:22.287
> 
> 标签：events, asynchronous, c#-3.0

我必须将`mobilId`(int) 传递给方法`UpdateStatus`，我不知道该怎么做

```
Update_Completed += new EventHandler<AsyncCompletedEventArgs>(UpdateStatus);

protected void UpdateStatus(object sender, AsyncCompletedEventArgs e, int mobilId)
{
    Define(Id, e.Cancelled, e.Error, mobilId);
} 
```

这两种方法都在同一个文件中。请让我知道是否有任何方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:11:41.163

最初的通话是什么样的？您应该能够在第一个方法调用时设置一个 UserState 选项。它是对象类型，所以它可以是任何东西。

# sql - VS2010中为CLR存储过程添加对服务器的引用

> ID：11800236
> 
> 赞同：0
> 
> 时间：2012-08-03T17:09:06.700
> 
> 标签：sql, visual-studio-2010, clrstoredprocedure

我需要添加对尚未部署的 CLR 存储过程的引用。根据解决方案属性下的数据库部分，我需要的 dll 位于我连接的远程服务器上。如果我只是选择 References->Add Reference 我看不到我需要的 dll。我尝试了“添加服务引用”并输入了“jdbc:sqlserver://serverName\instanceName”，但是这给了我以下消息：

“无法初始化 MetadataExchangeClient 实例，因为方案'jdbc'没有可用的绑定。您可以在构造函数中提供绑定，或指定配置名称。参数名称：方​​案如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。”

这是我第一次这样做，所以我也可能朝着完全错误的方向前进:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:32:14.830

看起来这只是一个访问/位置问题。该 dll 未显示，因为它位于错误的文件夹中。

# eclipse - 注解在 Groovy 类中不起作用

> ID：11800237
> 
> 赞同：1
> 
> 时间：2012-08-03T17:09:08.590
> 
> 标签：eclipse, groovy

我有用于 Juno 的 Groovy-Eclipse，但我的 Groovy 类无法识别任何注释。我得到了`Groovy:class Translation is not an annotation in @Translation`。或者`Groovy:class Override is not an annotation in @Override`例如：

```
import somewhere.Translation
@Translation(translationContext = TranslationContext.SOMETHING)
class SOMECLASS extends SOMETHING {

@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface Translation { 
```

这里所有的注释`@Target,@Retention`和`@interface`编译都很好，因为`Translation`
我的项目库中包含了所有的 jar。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:26:28.290

看起来您的项目/工作区配置为 Java 1.4 或更早版本。由于源级别不允许注释，因此无法识别注释。

转到项目 -> 属性 -> Java 编译器。启用项目设置并将合规级别设置为 1.5 或更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:32:21.983

*   你进口了`import java.lang.annotation.*;`吗？
*   被`translationContext`定义为像中的一个方法`@interface`？
*   在类路径中是正确`Translation`的，并且没有重复项。

这段代码在 groovy 控制台中对我有用：

```
@Translation    
class A{
def meth = { print "HzzzI" }
​}

@Target(ElementType.TYPE)@Retention(RetentionPolicy.RUNTIME)
public @interface Translation {
} 

A a = new A();
a.meth() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-25T21:50:54.513

我遇到了同样的问题。我的 Eclipse IDE 强调了注释，但代码工作正常！试着运行它。对我来说就是这样。希望这也适合你）

# c# - 摆脱按钮单击时的刷新

> ID：11800240
> 
> 赞同：1
> 
> 时间：2012-08-03T17:09:20.013
> 
> 标签：c#, asp.net, button, postback

我有一个具有`onclick`功能的 asp:Button。有没有办法消除发生的刷新？

当前包含按钮的 HTML。

```
<div id="user" class="font">
                <div id="userPanel">

            <asp:TextBox ID="txtSearch"  runat="server" Width="400px" align="left"></asp:TextBox>

            <asp:Button  ID="searchbutton" text="enter" runat="server" 
                onclick="searchbutton_Click" />

            <asp:Label ID="test" runat="server"></asp:Label>

            </div>

            <asp:UpdatePanel ID="userinfoupdatepanel" runat="server">
                <ContentTemplate>
                    <div class="topcontent">
                        <ul>...</ul>
                    </div> 
                </ContentTemplate>
            </asp:UpdatePanel> 
```

按钮单击然后调用填充 UL 内容的函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:13:38.183

您可以使用`OnClientClick`绑定 Javascript 函数来处理浏览器中的点击。如果您`false`从该功能返回，则不会发生回发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:16:41.677

您还可以使用 Attributes 集合添加客户端事件。

```
searchbutton.Attributes.Add("onclick", "alert('Test')");
searchbutton.Attributes.Add("onclick", "return fnSomeThing(this);"); 
```

# mysql - 用下划线替换表格中的空格

> ID：11800244
> 
> 赞同：2
> 
> 时间：2012-08-03T17:09:45.670
> 
> 标签：mysql, special-characters, case-sensitive

如何编写 SQL 查询以用下划线替换表中所有出现的空格并将所有字符设置为小写？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-03T17:13:07.200

要更新单个表中的单个列，可以使用[`LOWER()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_lower)和的组合[`REPLACE()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)：

```
UPDATE table_name SET column_name=LOWER(REPLACE(column_name, ' ', '_')) 
```

要“复制”现有列，并对副本执行更新（根据您在评论中的问题），您可以在查询`ALTER`之前使用 MySQL 的命令：`UPDATE`

```
ALTER TABLE table_name ADD duplicate_column_name VARCHAR(255) AFTER column_name;
UPDATE table_name SET duplicate_column_name = LOWER(REPLACE(column_name, ' ', '_')); 
```

只需确保更新`ALTER`命令中的数据类型以反映您的实际数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-13T11:15:53.680

在 SQL 中使用 UPDATE 语句时，请始终记住包含 WHERE 子句——MYSQL Workbench 就是这样说的！:D

不过我的回答是：

```
REPLACE(string1, find_in_string, replacementValue); 
```

# asp.net - 为什么 MVC 对不显眼的验证属性进行双重编码？

> ID：11800253
> 
> 赞同：0
> 
> 时间：2012-08-03T17:10:23.813
> 
> 标签：asp.net, asp.net-mvc

例如：

```
data-val-equalto="&amp;#39;MyProperty5&amp;#39; and &amp;#39;MyProperty4&amp;#39; do not match." 
```

**问题：**为什么 & 字符再次编码为`&amp;`( `&amp;#39;`)，而不是按原样 ( `&#39;`) 输出字符引用？

jquery.validate 插件似乎解析`&amp;#39;`为`&#39;`.

* * *

问题似乎不在 Razor 中，而是在生成不显眼的验证属性的代码中，以下代码：

```
<span title="@("'MyProperty5' and 'MyProperty4' do not match.")"></span> 
```

...正确输出：

```
<span title="&#39;MyProperty5&#39; and &#39;MyProperty4&#39; do not match."></span> 
```

* * *

发现问题出在 ASP.NET MVC 中，有一种方法称为 `GetValidationAttributes`将 HTML 编码的值添加到字典中，然后将值再次编码为`TagBuilder`. 很高兴知道他们为什么这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:12:55.900

尝试使用[Html.Raw](http://msdn.microsoft.com/en-us/library/gg480740%28v=vs.98%29.aspx)方法输出。

否则，Razor 不会*假定*您正在尝试输出编码的 HTML 并再次对其进行编码。

给定

```
string text = `Bread &amp; Breakfast`; 
```

`@text`将被输出为`Bread &amp;amp; Breakfast`因为 & 是 HTML 编码的

`@Html.Raw(text)`将输出为“面包和早餐”

**更新**基于您的更新

我不能告诉你*为什么*jQuery Validate 会这样工作，但是有一句古老的格言“如果你做 X 的时候很痛，就停止做 X”。

您实际上并不需要在输出 HTML 中编码单引号。以下两者产生相同的结果：

```
<span title="&#39;MyProperty5&#39; and &#39;MyProperty4&#39; do not match.">
Span With Encoded Title
</span>
<br />
<span title="'MyProperty5' and 'MyProperty4' do not match.">
Span With non-Encoded Title
</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T00:42:29.843

此问题已在 MVC v4 上修复。

# c# - Request.Cookies 和 Response.Cookies 之间的区别

> ID：11800254
> 
> 赞同：41
> 
> 时间：2012-08-03T17:10:42.490
> 
> 标签：c#, asp.net, .net

我在我的代码中多次使用这两种方法并且真的不知道有什么区别，如果设置了 cookie，它在请求和响应中不应该完全相同吗？请求是最新的还是响应？

编辑：

好的，我得到了请求和响应之间的区别，但是如果我输入

```
string a = HttpContext.Current.Request.Cookie["a"].Value; 
```

大多数情况下是一样的

```
string a = HttpContext.Current.Response.Cookie["a"].Value; 
```

但我想知道使用两者有什么区别。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-03T17:22:00.410

正如大家所说`Request.Cookies`，应该是来自客户端（浏览器）`Response.Cookies`的cookie，并且是将发送回客户端（浏览器）的cookie。

当您将~~cookie~~`Response`添加到. 结果，看起来您在和中都有相同的 cookie 。请注意，这些复制的 cookie 并非来自客户端……所以要小心做出错误的决定。`Request.Cookies``Response``Request``Response`

这是讨论代码的链接：[http](http://forums.asp.net/t/1279490.aspx) ://forums.asp.net/t/1279490.aspx 。特别是，以下列方式添加的 cookie 将显示在`Request.Cookies`集合中：

```
Response.Cookies.Add(HttpCookie("MyCookie", "MyValue")) 
```

* * *

`Response.Cookies`*本文中记录了从其中复制 cookie 的行为[`HttpResponse.Cookies`](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.cookies.aspx)：

> 使用集合添加 cookie 后，即使尚未将响应发送到客户端`HttpResponse.Cookies`，该 cookie 也会立即在集合中可用。`HttpRequest.Cookies`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T17:13:11.650

请求 cookie 是从客户端发送到服务器的内容（因此是浏览器提供的内容）。响应 cookie 是您要放置在浏览器中的 cookie。接受来自响应对象的 cookie 的浏览器的下一个连接将在请求对象中提供 cookie。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T18:38:23.550

[Asp.net 中使用Response](http://msdn.microsoft.com/en-us/library/ms525405%28v=vs.90%29.aspx)一词将数据从服务器发送到客户端，[Request](http://msdn.microsoft.com/en-us/library/ms524948%28v=vs.90%29.aspx)用于从客户端获取数据（以 cookie、查询字符串的形式）等。示例：

```
Response.Write("will write the content on the form which will return to the client");
// Response.Cookies will send the cookie to the client browser.
 Response.Cookies.Add(HttpCookie("MyCookie", "MyValue"))
//and Request.Cookies is used to get the cookie value which is already present in the clinet browswer 
```

正如你提到的

```
string a = HttpContext.Current.Request.Cookie["a"].Value;
// I think this will check the cookie which is present in the client browser [ If client has sent the cookie to the server ]

string a = HttpContext.Current.Response.Cookie["a"].Value;
// and this will see the only Response object. If the cookie present in the response object then it will return you otherwise not. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T17:13:31.227

得看什么语境。

请求是随每个 http 请求发送到服务器的数据。Response 是服务器*向*客户端发出请求后的*响应*。

# javascript - 仅在未选中复选框时调用 Javascript 函数

> ID：11800257
> 
> 赞同：17
> 
> 时间：2012-08-03T17:10:55.330
> 
> 标签：javascript, checkbox, dom-events

我试图弄清楚如何仅在未选中复选框时调用 Javascript 函数。

这是我的复选框：

```
<input type="checkbox" id="icd" name="icd" value="icd" /> 
```

这是函数的名称：

```
planhide(); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-03T17:12:57.110

```
document.getElementById('icd').onchange = function() {
    if ( document.getElementById('icd').checked === false ) {
        planhide();
    }
};​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T17:13:22.867

在输入标签中包含 onchange 选项，然后添加一个中间函数，相应地检查和调用 planhide() 如下：

```
<input type="checkbox" id="icd" name="icd" value="icd" onchange=check()/> 
```

然后定义 check() 来检查状态并调用函数如下：

```
function check()
{
if(document.getElementById("icd").checked==false)
planhide();
} 
```

此外，您还可以在提交按钮选项上使用 onclick 来代替 onchange 来调用 check() 函数，如下所示：

```
<input type="button" onclick=check()/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:12:26.390

只需在您的输入上注册一个`onchange`处理程序，在调用处理程序时检查“检查”属性，如果检查为假，则调用该方法。

[这是一个小提琴。](http://jsfiddle.net/Tw96C/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-05T01:48:57.323

```
$(document).ready(function () {
   $('#icd').change(function () {
      if (!this.checked) {
          planhide();
    }
   });
}); 
```

# android - 通过自定义权限启用两个 Android 应用程序之间的通信

> ID：11800258
> 
> 赞同：4
> 
> 时间：2012-08-03T17:10:56.013
> 
> 标签：android, android-intent, android-permissions

我的一个 Android 应用程序需要一些在权限方面“危险”的功能。他们需要一些权限，例如“互联网访问”，这些权限与私人数据相结合是至关重要的。

这就是为什么我想创建一个单独的“附加组件”，即提供这些权限关键功能的第二个应用程序。因此，如果用户需要它们，他们可以安装附加组件，但主应用程序在没有这些权限的情况下仍然可以运行。

使用 a`sharedUserId`显然是最简单的解决方案，但之后添加它，当很多用户已经使用该应用程序时，可能会导致严重的问题。这不是意味着应用程序不能再访问自己的数据了吗？

所以我不得不选择另一种方法。ContentProviders 是我尽量避免的，因为在我看来它们对于这个简单的需求来说太复杂了。

我认为自定义权限可以解决这个问题。他们可以吗？我已将以下权限声明添加到主应用程序以及作为子项的附加组件到`manifest`标签中`AndroidManifest.xml`：

```
<permission
    android:name="com.my.package.ADDON"
    android:label="@string/permission_title"
    android:description="@string/permission_description"
    android:permissionGroup="android.permission-group.PERSONAL_INFO"
    android:protectionLevel="signature" /> 
```

此外，两个清单文件现在都有这部分：

```
<uses-permission android:name="com.my.package.ADDON"></uses-permission> 
```

附加应用程序`IntentService`现在包含一个具有以下属性的应用程序：

```
android:permission="com.my.package.ADDON" 
```

这不应该完成这项工作，以便我可以`IntentService`通过此代码从我的主应用程序调用附加组件吗？

```
Intent addonIntent = new Intent();
addonIntent.setClassName("com.my.package", "com.my.package.MyService");
startService(addonIntent); 
```

不幸的是，这个调用总是失败，并出现以下异常：

```
E/AndroidRuntime(16721): java.lang.SecurityException: Not allowed to start service Intent { cmp=com.mypackage.addon/.MyService } without permission com.mypackage.permission.ADDON 
```

我做错什么了？非常感谢您！

**添加 #1 - 附加清单：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      android:versionCode="1"
      android:versionName="1.0"
      package="com.mypackage.addon">
    <uses-sdk android:minSdkVersion="8" />
    <permission
        android:name="com.mypackage.permission.ADDON"
        android:label="@string/permission_title"
        android:description="@string/permission_description"
        android:permissionGroup="android.permission-group.PERSONAL_INFO"
        android:protectionLevel="signature" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:permission="com.mypackage.permission.ADDON"
    android:exported="true">
    <service
        android:enabled="true"
        android:name=".MyService" />
</application>
</manifest> 
```

**补充 #2 - 主应用清单：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      android:versionCode="1"
      android:versionName="1.0"
      package="com.mypackage.mainapp">
    <uses-sdk android:minSdkVersion="8" />
    <permission
        android:name="com.mypackage.permission.ADDON"
        android:label="@string/permission_title"
        android:description="@string/permission_description"
        android:permissionGroup="android.permission-group.PERSONAL_INFO"
        android:protectionLevel="signature" />
    <uses-permission android:name="com.mypackage.permission.ADDON"></uses-permission>
<application android:icon="@drawable/ic_launcher" android:label="@string/app_name" android:name="MyApp">
    <activity android:name=".MainActivity" android:launchMode="singleTask" android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T17:31:55.133

> 这不是意味着应用程序不能再访问自己的数据了吗？

正确的。

> 我添加了以下权限

我会转储`permission-group`，因为这不是必需的。

> 此外，两个清单文件现在都有这部分

只有打电话给你的人`IntentService`可能需要那个。

> 这不应该完成这项工作，以便我可以通过此代码从我的主应用程序调用附加组件的 IntentService 吗？

如果`IntentService`不导出，则不会。确保您的`IntentService`any 具有`<intent-filter>`or `android:exported="true"`。我建议您走这`<intent-filter>`条路线，这样您就可以声明和使用自定义操作字符串，这样您就可以摆脱客户端应用程序中的硬编码包和类名称。

[这是一个包含两个使用这种基本方法的示例项目的目录](https://github.com/commonsguy/cw-omnibus/tree/master/Introspection/CPProxy)，尽管在我的情况下，通信是基于安全的`ContentProvider`而不是安全的`IntentService`。但是，这个概念是相同的，因此通过这些细微的调整，我希望您所做的一切都能正常工作。

# java - 当 JRockit 控制台窗口打开时，ColdFusion Java 堆运行完美，但是当 JRockit 控制台关闭时，内存使用猛增然后崩溃

> ID：11800271
> 
> 赞同：1
> 
> 时间：2012-08-03T17:12:09.150
> 
> 标签：java, coldfusion, jvm, heap-memory, jrockit

我们的 ColdFusion 服务器和正确配置 JRE 时遇到问题。为了解决这个问题，我们安装了 Oracle JRockit 并切换了 jvm.config 以尝试查找任何内存泄漏。

安装 JRockit 后，我​​们的服务器运行得比以往任何时候都好。我们将 JRockit 程序和控制台打开了几天，内存使用量保持在 200mb 以下。我们最终关闭了服务器上的程序，并且立即返回了内存使用问题。

这是来自 FusionReactor 的 Java 堆的屏幕截图，用于说明正在发生的事情。

由于我还没有足够的声誉点，所以我无法直接在此处发布此内容： [http ://www.weblisters.com/icm/FusionReactorJavaHeap-JRockit-Console.png](http://www.weblisters.com/icm/FusionReactorJavaHeap-JRockit-Console.png)

以下是我们 jvm.config 文件中的主要设置：

```
java.home=C:/Progra~2/Java/jrockit-jdk1.6.0_33-R28.2.4-4.1.0/jre  

java.args=-server -Xms1024m -Xmx1024m  -Xgc:parallel -Dsun.io.useCanonCaches=false -Dcoldfusion.rootDir={application.home}/ -XX:+HeapDumpOnOutOfMemoryError -Xmanagement:ssl=false,authenticate=false,autodiscovery=true 
```

在我们关闭 Jrockit 控制台后立即抛出此错误：错误：没有足够的存储空间可用于在 tsStartJavaThread (src/jvm/threads/vmthread/lifecycle.c:1096) 中处理此命令。

```
Attempting to allocate 1G bytes There is insufficient native memory for the Java Runtime Environment to continue. 
```

有谁知道为什么垃圾收集 (GC) 在 JRockit 控制台窗口打开并运行的情况下工作得更好？我们不能将其作为永久解决方案开放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T23:02:00.310

我想我会发布一个最终为我们工作的决议的更新。我不确定为什么在使用 JRockit 时 GC 似乎运行得更好（特别是在内存泄漏测试期间），但我们发现 JVM 机器的设置似乎使我们能够控制调用 GC 的频率.

```
-Dsun.rmi.dgc.client.gcInterval=27000 -Dsun.rmi.dgc.server.gcInterval=27000 
```

这两个设置使我们可以根据需要频繁或不频繁地专门调用 GC，我们需要将其更改为默认设置。我们还根据一些很棒的博客文章（链接在底部）更新了整个 java.args 行。这是我们更新的 java.args 让我们的服务器正常运行。

```
java.args= -server -DJINTEGRA_NATIVE_MODE -DJINTEGRA_PREFETCH_ENUMS -Xmx1024m -Xms1024m -XX:MaxPermSize=192m -XX:PermSize=192m  -XX:+UseParallelGC -Dsun.rmi.dgc.client.gcInterval=27000 -Dsun.rmi.dgc.server.gcInterval=27000 -Dcoldfusion.rootDir={application.home}/ -Djava.compiler=NONE -Xnoagent -Xdebug 
```

博客文章：

[Trunkful.com CF_GEMS 如何调优 JVM 第 1 部分](http://www.trunkful.com/index.cfm/2008/5/19/How-to-Tune-the-JVM-Part-1)

[Trunkful.com CF_GEMS 如何调优 JVM 第 2 部分](http://www.trunkful.com/index.cfm/2008/11/25/How-to-Tune-the-JVM-Part-2)

# javascript - 显示“为获得最佳效果，请启用 Javascript”

> ID：11800272
> 
> 赞同：-1
> 
> 时间：2012-08-03T17:12:11.913
> 
> 标签：javascript, html

我试图在我的 opencart 商店中启用横幅。

该网站是 PHP 的，我基本上只需要在页面顶部有一个横幅来提醒没有打开 JS 的用户打开它。

我用了

```
 <noscript>
   <div id="noscript-warning">We reccomend using javascript for the best viewing pleasure ></div>
   </noscript> 
```

但是，这似乎没有执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:23:53.483

没有从评论中得到反馈，所以我会发布可能的问题。

*   您正在启用 JavaScript 进行测试

*   您的元素的 CSS 样式隐藏了消息

*   您的其他元素的 CSS 样式隐藏了消息

*   您发布了一个未反映实际代码的修改示例

*   您的尾随`>`正在破坏您用于测试的任何浏览器中的布局*（不太可能）*

*   您正在尝试使用 JavaScript 生成无脚本元素`:P`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:25:15.657

该`<noscript>`标签已被弃用（http://www.html-5.com/changes/noscript-tag.html），但我怀疑这是问题所在。

在任何情况下，您都可以创建一个脚本来删除“您需要启用 Javascript”的 div。

```
<div id="jserror">Enable Javascript Please!</div>
<script>

        document.getElementById("jserror").style.display = "none";

</script> 
```

编辑：`eventListener`甚至不需要。

# visual-studio - 是否可以跳转到任何表达式的右括号，而不仅仅是 IntelliJ 中的范围？

> ID：11800276
> 
> 赞同：0
> 
> 时间：2012-08-03T17:12:24.523
> 
> 标签：visual-studio, scope, intellij-idea, shortcut

因此，我可以在 IntelliJ 中跳转到范围的开头和结尾。但是，我也希望能够在圆括号之间跳转 - '(' 和 ')'，就像我在 VS 中所做的那样。

这有捷径吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:52:04.453

您可能知道`Ctrl`+`[`和`Ctrl`+`]`以及它们如何不适用于圆括号。

不过，您也许可以使用`Ctrl`+`w`和`Ctrl`+ `Shift`+`w`组合对您有利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:04:15.397

没有捷径，因为这个功能还不存在，[请投票](http://youtrack.jetbrains.com/issue/IDEA-12068)。

# android - 如何在 RadioButton 中居中图像和文本？

> ID：11800278
> 
> 赞同：2
> 
> 时间：2012-08-03T17:12:42.287
> 
> 标签：android, radio-button, android-relativelayout, centering, radio-group

我有两个并排的自定义 RadioButtons 填充屏幕的宽度。我想在文本右侧有文本和图像，以按钮为中心。

drawableRight 将图像绘制到按钮右侧，而不是靠近文本。我不能使用 drawableEnd 因为我没有 Android 4.0

我试过使用 Spannable，但问题是图像比文本大。我不希望它与文本的底部或基线对齐；我希望它自己居中在按钮中。

我发现的最佳解决方案是制作一个可点击的 RelativeLayout，其中 TextView 和 ImageView 居中。这使按钮看起来像我想要的那样，但要做到这一点似乎需要做很多工作，并且要对每个 RelativeLayout 进行编程，使其像 RadioGroup 中的 RadioButton 一样工作。

有没有更简单的方法，或者我错过了什么？还是我应该保留我的 RelativeLayout 想法？这是我的xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <RelativeLayout
        android:id="@+id/first_relativelayout"
        android:clickable="true"
        android:background="@drawable/radio_button"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal">
        <TextView
            android:id="@+id/first_textview"
            android:text="@string/first_radiobutton_label"
            android:textAppearance="?android:attr/textAppearanceButton"
            android:textColor="@android:color/white"
            android:layout_centerVertical="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"></TextView>
        <ImageView
            android:contentDescription="@string/image_description"
            android:id="@+id/first_imageview"
            android:layout_centerVertical="true"
            android:src="@drawable/it"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/first_textview">
        </ImageView>
    </RelativeLayout>

     <RelativeLayout
        android:id="@+id/second_relativelayout"
        android:clickable="true"
        android:background="@drawable/radio_button"
        android:layout_weight="1"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal">
        <TextView
            android:id="@+id/second_textview"
            android:text="@string/second_radiobutton_label"
            android:textAppearance="?android:attr/textAppearanceButton"
            android:textColor="@android:color/white"
            android:layout_centerVertical="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"></TextView>
        <ImageView
            android:contentDescription="@string/image_description"
            android:id="@+id/second_imageview"
            android:layout_centerVertical="true"
            android:src="@drawable/it"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/second_textview">
        </ImageView>
</RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:38:48.423

我继续使用RelativeLayout 解决方案。它需要的工作比看起来应该值得的要多，但它工作得很好。

# performance - 在 .NET ActiveMQ 中异步发送

> ID：11800280
> 
> 赞同：1
> 
> 时间：2012-08-03T17:12:50.810
> 
> 标签：performance, asynchronous, activemq, blocking, throughput

我希望提高针对 ActiveMQ 编写的高吞吐量生产者的性能，根据[这个](http://activemq.apache.org/connection-configuration-uri.html)useAsyncSend 将：

> 强制使用异步发送，从而大幅提升性能；但意味着无论消息是否已发送，send() 方法都会立即返回，这可能导致消息丢失。

但是我看不出它对我的简单测试用例有什么影响。

使用这个非常基本的应用程序：

```
const string QueueName = "....";
const string Uri = "....";

static readonly Stopwatch TotalRuntime = new Stopwatch();

static void Main(string[] args)
{
    TotalRuntime.Start();
    SendMessage();
    Console.ReadLine();
}

static void SendMessage()
{
    var session = CreateSession();
    var destination = session.GetQueue(QueueName);
    var producer = session.CreateProducer(destination);

    Console.WriteLine("Ready to send 700 messages");
    Console.ReadLine();

    var body = new byte[600*1024];

    Parallel.For(0, 700, i => SendMessage(producer, i, body, session));         
}

static void SendMessage(IMessageProducer producer, int i, byte[] body, ISession session)
{
     var message = session.CreateBytesMessage(body);

     var sw = new Stopwatch();
     sw.Start();
     producer.Send(message);
     sw.Stop();

     Console.WriteLine("Running for {0}ms: Sent message {1} blocked for {2}ms", 
            TotalRuntime.ElapsedMilliseconds, 
            i, 
            sw.ElapsedMilliseconds);
}       

static ISession CreateSession()
{
     var connectionFactory = new ConnectionFactory(Uri)
                                    {
                                        AsyncSend = true,
                                        CopyMessageOnSend = false
                                    };
     var connection = connectionFactory.CreateConnection();
     connection.Start();
     var session = connection.CreateSession(AcknowledgementMode.AutoAcknowledge);
     return session;
} 
```

我得到以下输出：

```
Ready to send 700 messages

Running for 2430ms: Sent message 696 blocked for 12ms
Running for 4275ms: Sent message 348 blocked for 1858ms
Running for 5106ms: Sent message 609 blocked for 2689ms
Running for 5924ms: Sent message 1 blocked for 2535ms
Running for 6749ms: Sent message 88 blocked for 1860ms
Running for 7537ms: Sent message 610 blocked for 2429ms
Running for 8340ms: Sent message 175 blocked for 2451ms
Running for 9163ms: Sent message 89 blocked for 2413ms
..... 
```

这表明每条消息发送大约需要 800 毫秒，并且调用`session.Send()`阻塞大约需要两秒半。即使文档说

> “send() 方法将立即返回”

`AsyncSend = true`如果我将并行 for 更改为正常的 for 循环或更改为，这些数字也基本相同，`AlwaysSyncSend = true`所以我不相信异步开关在所有工作......

谁能看到我在这里缺少什么来使发送异步？

* * *

进一步测试后：

根据 ANTS 性能分析器，绝大多数运行时间都花在等待同步上。看来问题在于各种传输类通过监视器在内部阻塞。特别是我似乎迷上了[MutexTransport](http://svn.apache.org/viewvc/activemq/activemq-dotnet/Apache.NMS.ActiveMQ/tags/1.5.6/src/main/csharp/Transport/MutexTransport.cs?view=markup)的 OneWay 方法，该方法一次只允许一个线程访问它。

看起来对 Send 的调用将阻塞，直到上一条消息完成，这解释了为什么我的输出显示第一条消息阻塞了 12 毫秒，而下一条消息阻塞了 1858 毫秒。我可以通过实现一个每消息连接模式来进行多种传输，这种模式可以改善问题并使消息发送并行工作，但大大增加了发送单个消息的时间，并且消耗了如此多的资源，看起来不像正确的解决方案。

我已经用 1.5.6 重新测试了所有这些，没有发现任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:55:24.413

一如既往，最好的办法是更新到最新版本（撰写本文时为 1.5.6）。如果代理启用了生产者流控制并且您已达到队列大小限制，则发送可能会阻塞，尽管使用异步发送这不应该发生，除非您使用 producerWindowSize 集进行发送。获得帮助的一种好方法是创建一个测试用例并通过 Jira 问题将其提交到 NMS.ActiveMQ 站点，以便我们可以使用您的测试代码对其进行调查。自 1.5.1 以来已经有很多修复，所以我建议尝试新版本，因为它可能已经不是问题了。

# actionscript-3 - AS3 将 mc 拖到另一个 mc 或其他对象内并在外出时剪切

> ID：11800281
> 
> 赞同：0
> 
> 时间：2012-08-03T17:12:53.513
> 
> 标签：actionscript-3, stage, mc

最简单的方法是：

在舞台上 400x400 我有 rect 200x200，rect 里面有几个 mc 对象。我可以拖放 StartDrag 并添加 200x200 作为此移动的限制，但是当拖动对象时，它们可以在矩形边界附近“可见”，换句话说，如果我将圆形拖入 200x200 矩形如何制作当它触及 200x200 矩形的边界时，该圆圈的“消失”部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:18:06.330

您需要为圆圈添加蒙版。以下是上述场景的示例：

```
var squareBG:Shape = new Shape();
squareBG.graphics.beginFill(0);
squareBG.graphics.drawRect(0,0,200,200);
squareBG.graphics.endFill();
addChild(squareBG);

var circle:Sprite = new Sprite();
circle.graphics.beginFill(0xFF0000);
circle.graphics.drawCircle(0,0,100);
circle.graphics.endFill();
circle.y = 125;
addChild(circle);

var circle2:Sprite = new Sprite();
circle2.graphics.beginFill(0xFFFF00);
circle2.graphics.drawCircle(0,0,100);
circle2.graphics.endFill();
addChild(circle2);
circle2.x = 150;

var myMask:Shape = new Shape();
myMask.graphics.copyFrom(squareBG.graphics);    
addChild(myMask);

var myMask2:Shape = new Shape();
myMask2.graphics.copyFrom(squareBG.graphics);    
addChild(myMask2);

circle.mask = myMask;
circle2.mask = myMask2; 
```

# c# - 这些命名空间属性在做什么？

> ID：11800283
> 
> 赞同：1
> 
> 时间：2012-08-03T17:12:54.317
> 
> 标签：c#, asp.net, xml, database, xml-namespaces

我知道这很愚蠢，但只是想知道是否有人有链接或确切地知道这段代码在我的页面上做什么？

```
namespace com.gvinet.EblAdapter.ebl
{
    [Serializable]
    [DesignerCategory("code")]
    [GeneratedCode("System.Xml", "4.0.30319.225")]
    [DebuggerStepThrough]
    [XmlType(Namespace = "http://addresshere")]
    public class TSAPassenger
    { 
```

那么这是表单的所有字符串，例如名称，地址等

我认为它正在尝试获取从数据库创建的 XML 文件，但只是想确定一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:19:39.000

和属性指示 XML 序列化程序可以序列化该类以及这样做时要使用的模式`Serializable`。`XmlType`

*   [XmlType](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmltypeattribute.aspx)属性
*   [可序列化](http://msdn.microsoft.com/en-us/library/System.SerializableAttribute.aspx)属性
*   [DesignerCategory("code")](http://msdn.microsoft.com/en-us/library/System.ComponentModel.DesignerCategoryAttribute.aspx)属性
*   [DebuggerStepThrough](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerstepthroughattribute.aspx)属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:20:59.060

它不是。这些都只是元数据属性。

Serializeable - 使用标准 XmlSerializer 获取公共属性和字段并转换为 XML 以进行传输，无需对格式进行自定义（如 ISerializable 那样）。它通常仅在退出进程时使用（远程处理、Web 服务、WCF 等）

DesignerCategory - 这可以通过多种方式使用。Visual Studio 中的属性网格倾向于将其用作组织部分的一种方式。

GeneratedCode - 应用程序使用 4.0 版中的 System.Xml 命名空间为您生成它。

DebuggerStepThrough - 如果您正在单步执行代码 (F11)，默认情况下，请跳过此处的任何内容（例如，不要单步执行获取属性）。

XmlType - 序列化程序的一部分，允许您提供在输出中生成的特定命名空间。

这里的项目实际上并没有得到任何东西，只是描述了如何加载/处理某物的某些方面。

希望这是有道理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:25:46.017

这些是属性——用于声明式编程——你可以在网上找到更多关于声明式编程的信息。但这里是 .net 属性层次结构页面的链接，可帮助您入门：http: [//msdn.microsoft.com/en-us/library/aa311259 (VS.71).aspx](http://msdn.microsoft.com/en-us/library/aa311259(VS.71).aspx)

此外，这些页面可能会有所帮助：

*   什么是属性：[.NET 中的属性是什么？](https://stackoverflow.com/questions/20346/net-what-are-attributes)
*   C# 中的属性：http: [//www.codeproject.com/Articles/2933/Attributes-in-C](http://www.codeproject.com/Articles/2933/Attributes-in-C)

# java - Java在真正内存不足之前抛出内存不足异常？

> ID：11800293
> 
> 赞同：6
> 
> 时间：2012-08-03T17:13:26.250
> 
> 标签：java, arrays, memory, out-of-memory, large-data

我希望创建一个几乎填满 JVM 可用内存的大型 int 数组。以这段代码为例：

```
 final int numBuffers = (int) ((runtime.freeMemory() - 200000L) / (BUFFER_SIZE));
    System.out.println(runtime.freeMemory());
    System.out.println(numBuffers*(BUFFER_SIZE/4)*4);
    buffers = new int[numBuffers*(BUFFER_SIZE / 4)]; 
```

当以 10M 的堆大小运行时，这会引发 OutOfMemoryException，尽管 printlns 的输出是：

```
9487176
9273344 
```

我意识到阵列会有一些开销，但肯定不是 200k 吗？为什么java无法为它声称有足够空间的东西分配内存？在 Java 运行它之前，我必须设置减去 4M 左右的常量（此时 printlns 看起来更像：9487176 5472256）

更令人困惑的是，如果我用 2D 数组替换缓冲区：

```
buffers = new int[numBuffers][BUFFER_SIZE / 4]; 
```

然后它使用上面显示的 200k 减法毫无怨言地运行 - 即使两个数组中存储的整数数量相同（并且 2D 数组的开销不会大于 1D 数组的开销，因为它得到了所有那些对要存储的其他数组的引用）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T17:23:23.523

VM 会将堆内存划分为不同的区域（主要用于垃圾收集器），因此当您尝试分配几乎整个堆大小的单个对象时，您将耗尽内存。

此外，JRE 已经使用了一些内存。200k对于今天的内存大小来说不算*什么*，而 10M 堆对于大多数应用程序来说几乎是不切实际的小。

数组的实际开销相对较小，在 32 位 VM 上，它的 12 字节 IIRC（加上如果大小小于最小粒度，即 AFAIK 8 字节，则会被浪费掉）。所以在最坏的情况下，每个数组会有 19 个字节的开销。

请注意，Java 没有 2D（多维）数组，它在内部将其实现为数组数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:23:13.677

在 2D 情况下，您分配了更多、更小的对象。内存管理器反对占用大部分堆的单个大对象。为什么这令人反感是垃圾收集方案的一个细节——这可能是因为它可以在几代之间移动较小的对象，而堆不能容纳移动单个大对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:26:24.443

这可能是由于内存碎片和 JVM 在给定当前堆的情况下无法分配该大小的数组。

想象一下你的堆有 10`x`长：

```
xxxxxxxxxx 
```

然后，你在这里分配一个对象`0`。这使您的堆看起来像：

```
xxxxxxx0xx 
```

现在，您不能再分配这 10 个`x`空间。`x`尽管可用内存是 9 秒，但您甚至不能分配 8`x`秒。

事实是数组数组不会遇到同样的问题，因为它不是连续的。

**编辑**：请注意，以上是对问题的一个非常简单的看法。当堆中需要空间时，Java 的垃圾收集器将尝试收集尽可能多的内存，并且如果真的非常需要，尝试压缩堆。但是，某些对象可能不可移动或不可回收，从而产生堆碎片并使您处于上述情况。

您还必须考虑许多其他因素，其中一些包括：VM 中的内存泄漏（不太可能）或您的应用程序（对于简单的场景也不太可能），使用`Runtime.freeMemory()`的不可靠性（GC 可能运行正确调用之后可用的可用内存可能会改变），每个特定 JVM 的实现细节等。

关键是，根据经验，不要总是期望`Runtime.freeMemory()`您的应用程序可以使用全部数量。

# mysql - mysql insert on duplicate key update 知道是否发生了

> ID：11800300
> 
> 赞同：2
> 
> 时间：2012-08-03T17:14:08.763
> 
> 标签：mysql, perl, dbi, insert-update, on-duplicate-key

在我正在构建的应用程序中，我在重复键更新上使用了大量插入。我的问题是，在我的应用程序中，我需要知道它是插入还是更新，以便我的代码可以做出适当的决定。有谁知道我如何测试这个？

如果有人知道特定的方法，我正在使用 perl 的 DBI 模块。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T17:23:35.697

根据[文档](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)：

> 使用 ON DUPLICATE KEY UPDATE，如果将行作为新行插入，则每行的受影响行值为 1，如果更新现有行，则值为 2。

因此，您应该能够检查查询的返回值`INSERT .. ON DUPLICATE KEY`；如果为 1，则插入该行，如果为 2，则更新该行。

# java - 无法将流输出到浏览器

> ID：11800302
> 
> 赞同：6
> 
> 时间：2012-08-03T17:14:13.457
> 
> 标签：java, browser, io, stream

我刚刚写了一个小程序来测试一些东西，如下：

```
public class Main {

    public static void main(String[] args){
        ServerSocket serverSocket = null;
        Socket clientSocket = null;
        DataInputStream dataInputStream= null;

        BufferedWriter bufferedWriter = null;
        String line ;

        try {
            serverSocket = new ServerSocket(80);
            clientSocket = serverSocket.accept();

            dataInputStream = new DataInputStream(clientSocket.getInputStream());

            while((line = dataInputStream.readLine()) != null){
                System.out.println(line);
            }

            bufferedWriter = new BufferedWriter(new OutputStreamWriter(clientSocket.getOutputStream()));
            bufferedWriter.write("HTTP/1.0 200 OK \n Date: Fri, 31 Dec 1999 23:59:59 GMT \n Content-Type: text/html \n Content-Length: 1354 \n <html>abcde<html/>");

            bufferedWriter.flush();

        } catch (IOException e) {
            System.out.println("socket port cannot be opened.");
            e.printStackTrace();
        } finally{
            try {
                serverSocket.close();
                bufferedWriter.close();
            } catch (IOException e) {
                System.out.println("socket port cannot be closed.");
                e.printStackTrace();
            }
        }

    }

} 
```

我从网上找到了http响应格式，应该是正确的。问题是我的浏览器一直在等待响应数据（从旋转的标志确定），但数据没有返回成功。我犯了什么错误？

我通过在浏览器中键入“localhost”连接到 Java 程序，我可以在 Java 程序中打印出请求字符串，但只是无法发回响应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:20:07.340

首先，发送的 HTTP 消息存在一些问题：HTTP 消息的每一行都由 CR LF 分隔/结束，而不仅仅是换行（虽然我怀疑这可能是问题，你应该替换“ \n" 与 "\r\n")。另外，Content-Length 不等于消息体的实际大小，应该替换。在实际正文之前，所有 HTTP 消息都应该有一个空行，而您没有。最后，正斜杠 at`<html/>`也应该出现在 之前`html`，如下所示：`</html>`

总结一下：

```
bufferedWriter.write("HTTP/1.0 200 OK\r\nDate: Fri, 31 Dec 1999 23:59:59 GMT\r\nContent-Type: text/html\r\nContent-Length:18\r\n\r\n<html>abcde</html>"); 
```

现在是真正的问题：读取循环一直在等待更多数据。将 readLine() 的结果与 null 进行比较实际上并不能满足您的要求。TCP 连接产生数据流，您永远不知道客户端是否在特定时刻停止发送数据。相反，您可以一直阅读，直到找到一个空行，这标志着 HTTP 消息头部的结束。Web 浏览器通常不会在 GET 消息中发送附加内容，因此您不会丢失任何数据。

```
 BufferedReader reader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
    while(!(line = reader.readLine()).isEmpty()){
        System.out.println(line);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T17:16:33.697

可能是 Content-Length 标头字段吗？尝试用这个替换响应：

```
bufferedWriter.write("HTTP/1.0 200 OK \n Date: Fri, 31 Dec 1999 23:59:59 GMT \n Content-Type: text/html \n Content-Length: 18\n <html>abcde<html/>"); 
```

（注意`Content-Length: 18`与原来的对比`Content-Length: 1354`）

我怀疑浏览器正在等待您的应用程序发送更多数据。

编辑：这对我有用：

```
import java.util.*;
import java.io.*;
import java.net.*;

public class Main {

    public static void main(String[] args) throws Exception{
        ServerSocket serverSocket = null;
        Socket clientSocket = null;
        DataInputStream dataInputStream= null;

        BufferedWriter bufferedWriter = null;

        try {
            serverSocket = new ServerSocket(8080);
            clientSocket = serverSocket.accept();

            BufferedReader reader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

            while (clientSocket.getInputStream().available() > 0) {
                String line = reader.readLine();

                if (line == null) {
                    break;
                }

                System.out.println(line);
            }

            bufferedWriter = new BufferedWriter(new OutputStreamWriter(clientSocket.getOutputStream()));
            bufferedWriter.write("HTTP/1.0 200 OK \n Date: Fri, 31 Dec 1999 23:59:59 GMT \n Content-Type: text/html \n\n <html>abcde<html/>");
            bufferedWriter.flush();
            clientSocket.close();
        } catch (IOException e) {
            System.out.println("socket port cannot be opened.");
            e.printStackTrace();
        } finally{
            try {
                serverSocket.close();
                bufferedWriter.close();
            } catch (IOException e) {
                System.out.println("socket port cannot be closed.");
                e.printStackTrace();
            }
        }

    }

} 
```

罪魁祸首是while循环。您为获取更多数据而调用的方法一直处于阻塞状态，直到该数据可用（这永远不会发生）。我不确定我所做的是否完全有必要，但它确实有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T17:19:45.030

我看到两个问题：

content-length 标头说后面是 1354 个字节。你只写了20个左右。内容长度是可选的；如果您没有使用正确的值，请不要包含它。

您需要在标题末尾和内容之前有一个空行：`".... Content-Length: xx\n\n<html>..."`

# wpf - 在 WPF 中创建条纹画笔

> ID：11800303
> 
> 赞同：18
> 
> 时间：2012-08-03T17:14:30.883
> 
> 标签：wpf, brush

如博客所示，如何为条纹创建画笔（DrawingBrush）：

[http://blog.pixelingene.com/2008/09/quick-tip-to-get-a-striped-background/](http://blog.pixelingene.com/2008/09/quick-tip-to-get-a-striped-background/)

我不能使用它，因为它使用缩放变换，这意味着如果 UI 元素很小，则条纹几乎不可见或靠得太近。

我不能使用图像画笔，因为我需要绑定颜色。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-04-11T14:37:21.800

只需使用 MappingMode="Absolute"：

```
<LinearGradientBrush MappingMode="Absolute" x:Key="HatchBrush"  StartPoint="0,0" EndPoint="4,4" SpreadMethod="Repeat">
  <GradientStop Offset="0" Color="LightCoral"/>
  <GradientStop Offset="0.75" Color="LightCoral"/>
  <GradientStop Offset="0.75" Color="Gray"/>
  <GradientStop Offset="1" Color="Gray"/>
</LinearGradientBrush> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-03T18:11:17.470

创建向下 45 度角的条纹图案。更改视口以更改条纹的大小

```
<DrawingBrush Stretch="UniformToFill" ViewportUnits="Absolute" Viewport="0,0,10,10" TileMode="Tile">
    <DrawingBrush.Drawing>
        <DrawingGroup>
            <DrawingGroup.Children>
                <GeometryDrawing Brush="Black">
                    <GeometryDrawing.Geometry>
                        <GeometryGroup FillRule="Nonzero">
                            <PathGeometry>
                                <PathFigure StartPoint="0,0">
                                    <LineSegment  Point="100,0"/>
                                    <LineSegment  Point="100,100"/>
                                    <LineSegment  Point="0,100"/>
                                </PathFigure>
                            </PathGeometry>
                        </GeometryGroup>
                    </GeometryDrawing.Geometry>
                </GeometryDrawing>
                <GeometryDrawing Brush="#FF404040">
                    <GeometryDrawing.Geometry>
                        <GeometryGroup FillRule="Nonzero">
                            <PathGeometry>
                                <PathFigure StartPoint="0,0">
                                    <LineSegment  Point="25,0"/>
                                    <LineSegment  Point="100,75"/>
                                    <LineSegment  Point="100,100"/>
                                    <LineSegment  Point="75,100"/>
                                    <LineSegment  Point="0,25"/>
                                    <LineSegment  Point="0,0"/>
                                </PathFigure>
                                <PathFigure StartPoint="75,0">
                                    <LineSegment  Point="100,25"/>
                                    <LineSegment  Point="100,0"/>
                                </PathFigure>
                                <PathFigure StartPoint="0,75">
                                    <LineSegment  Point="25,100"/>
                                    <LineSegment  Point="0,100"/>
                                </PathFigure>
                            </PathGeometry>
                        </GeometryGroup>
                    </GeometryDrawing.Geometry>
                </GeometryDrawing>
            </DrawingGroup.Children>
        </DrawingGroup>
    </DrawingBrush.Drawing>
</DrawingBrush> 
```

或者，您可以使用多重绑定将缩放变换绑定到控件的高度和宽度。然后使用转换器，您将比例更改为最大高度或宽度，然后条纹将保持相同大小。

# cassandra - CQL：无法在“Where”子句中为空检查

> ID：11800309
> 
> 赞同：6
> 
> 时间：2012-08-03T17:14:58.683
> 
> 标签：cassandra, cql

尝试返回特定字段为空或不为空的所有行。

```
select * from ADDRESS where addr1 = null; 
```

或者

```
select * from ADDRESS where addr1 = 'NULL'; 
```

addr1 可以是布尔值或文本字段。

我试过`!= null`, `is null`, `<> null`, 和`isnull(addr1, 'NULL')`

但我明白了

```
no viable alternative at input '=' 
```

或者

```
no index columns present in by-columns clause with "equals' operator" 
```

使用 Cassandra 1.1.1 和 Java 1.7_05

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T21:58:32.857

CQL 没有 NULL 的概念（见[CASSANDRA-3783](https://issues.apache.org/jira/browse/CASSANDRA-3783)）。相反，正确的做法取决于您的具体情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-07T09:10:37.473

一种方法是使用 cqlsh 选择所需的列 - 通常是使用 -e 选项的主键和感兴趣的列，并使用 grep 来识别空条目。在查询中也设置“分页关闭”以获取所有结果，否则默认情况下仅返回 100 行。

cqlsh <ip> -u <user name> -p <password> -e "paging off;select * from ADDRESS where addr1 = null;" | grep null

# ruby-on-rails-3 - 收集所有具有方法 'GET' 的 Rake 路由

> ID：11800311
> 
> 赞同：0
> 
> 时间：2012-08-03T17:15:10.030
> 
> 标签：ruby-on-rails-3, rake

我有一组 rake 路由，我正在尝试提取所有具有 route.conditions[:request_method] 作为 GET 的路由。

问题：

```
:request_method is a regex (:request_method=>/^GET$/)

> routes.select { |route| route.conditions[:request_method] == /GET/ }  
> [] 
```

我认为我的选择是正确的。这有效，并输出所有路由方法：

```
> routes.each { |route| print route.conditions[:request_method] }
> {:request_method=>/^GET$/}{:request_method=>/^GET$/}{:request_method=>/^PUT$/}{:request_method=>/^GET$/}{:request_method=>/^PUT$/}{:request_method=>/^POST$/}{:request_method=>/^GET$/}{:request_method=>/^GET$/} 
```

任何想法我可以如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:40:10.340

找到了我的答案。routes.each 返回 Journey 对象，所以我首先创建了自己的自定义哈希：

```
routes = Rails.application.routes.routes.to_a
routes = routes.collect { |route| {name: route.name, method: route.verb} }
routes = routes.select { |route| route[:method] == /^GET$/ } 
```

我相信这可以更优雅地重新设计，所以我愿意接受改变。它有效，这是最重要的部分。

# git - GIT：在主分支上将多个提交合并为一个，同时保留测试分支上的所有提交

> ID：11800313
> 
> 赞同：0
> 
> 时间：2012-08-03T17:15:11.177
> 
> 标签：git, git-merge, git-rebase

我有一个带有提交 a1、a2、a3、a4 的测试分支。我想对主分支进行更改，但只在一次提交而不是四次提交。所以我做了：

```
`git checkout master
git merge -Xtheirs test
git rebase -i a1` 
```

 ``````
squash a4
squash a3
squash a2
pick a1

````  `所以在主分支上，我得到了一个提交 b1，其中包括来自 a1、a2、a3、a4 的更改。第一次完成时，这很好用。然后我继续我的测试分支，添加提交 a5、a6、a7、a8。我签出 master 并再次合并 - 我必须解决奇怪的冲突，因为 a5 是 a4 的延续，因此也是 b1 的延续。请注意，`git diff`在 a4 和 b1 上没有输出任何差异。然后我试图从 a5 变基，并且发生了更多的冲突。

所以看起来这`git rebase`不是我需要的。加入提交后，git 将 a4 和 b1 视为具有*不同历史*的不同提交对象，更糟糕的是甚*至在图中的不同位置。*

我想要类似的东西：

```
b0 --- b0
| |
a1 |
| |
a2 |
| |
a3 |
| |
a4 ---- b1
| |
a5 |
| |
a6 |
| |
a7 |
| |
a8 ---- b2
| |   
a9 |
| |
... --- b3

```

这甚至可能吗？

请注意，我可以为每组提交创建一个分支，即一个用于 a1、a2、a3、a4 的分支，然后与 master 进行合并和变基，并从 b1 为提交 a5、a6、a7、a8 创建另一个分支，然后执行与 master 合并和 rebase 以获得 b2 等等。但这不是我想要的——每天有一个分支是不可取的。我只想有两个分支——一个包含所有提交的测试分支和一个粒度更粗的主分支。这样当我推动主人时，他们就不会看到我所做的每一个小改动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T20:12:30.937

也许您想将`--no-ff`选项与`git merge`? 这样，您将始终获得合并提交，而不是 git 对提交进行快进合并。在您的情况下`b0`，`b1`, ... 将是合并提交。

**编辑：**不可能在没有合并冲突的情况下在主分支上只提交 b0、b1 提交。但是如果不需要隐藏中间提交，上面是一个很好的选择。一般来说，你要么做rebase和/或cherry-pick并处理冲突，要么推送所有提交对象而不必处理冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T05:20:36.877

开启时`master`，您可以`git cherry-pick a1..a4`将这些新提交压缩到`master`. 这将使测试分支中的提交保持不变，并让您推送，`master`这样其他人就不会看到您所做的每一个更改（根据您的要求）

当然，在这种情况下 b1 和 a4 将是两个不同的提交。事实上， b1 和 a4 永远不会是同一个提交。如果您希望图形工具从 a4 指向 b1，则必须使用`--no-ff`Mattias 上面提到的合并。```

# mysql - 如何在数据库中创建动态“类型”

> ID：11800314
> 
> 赞同：1
> 
> 时间：2012-08-03T17:15:18.200
> 
> 标签：mysql, database, database-design

我的问题与一个带有 mysql 数据库的 php 网站有关。

目前在数据库中，我们有一个“令牌”实体

一个令牌可以包含 0 个或多个“对象”实体，这些对象中的每一个都可以是 x、y、z 类型

所以

```
----------
| Token  |
|--------|

--------------
|token_object|
|            |
|tokenID     |
|objectID    |
--------------

------------
| object   |
|          |
|objectType|
------------

------------  --------- ---------
| objectX  |  |objectY| |objectZ|
|          |  |       | |       |
------------  --------- --------- 
```

现在这工作正常，因为当我想要来自一个对象的数据时，由于我们缓存系统的性质，这个对象几乎总是一个对象，我可以进行两次查询以从对象和 objectX/Y/ 中获取数据Z

```
(SELECT * FROM object WHERE id = $id) 
```

和

```
switch($objectType)
case 'objectX':
    SELECT * from ObjectX WHERE id = $id
case 'objectY':
etc etc.. 
```

但现在我被要求允许网站用户创建新的对象类型，即 objectA/B 等。

我可以为每个新的对象类型创建一个新的 objectXn 表，并为 objectType 选择一个可以工作的好值

```
(SELECT * FROM $objectType WHERE blabla) 
```

但这似乎不是一个非常干净的解决方案，尤其是创建新表

有没有更好的解决方案？

值得注意的是，我希望有很多与令牌相关的对象，并且创建额外的对象类型不会发生很多/几乎永远不会发生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:20:42.540

你到底在存储什么？它是否需要针对它的复杂查询，或者您是否需要通过 id 进行简单的对象存储？在后一种情况下，您可以创建一个具有 ID、Type 和 Data 的表，其中 data 是您可以在代码中恢复的序列化对象（例如，将对象存储为 JSON，并使用存储的类型和数据）。如果这不能满足您的需求，请在您的问题中提供更多背景信息。

# sql - 使用按 ID 分组的 CTE Sql Server 2008 运行减法总计#

> ID：11800316
> 
> 赞同：2
> 
> 时间：2012-08-03T17:15:44.720
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我需要根据它们的行号来区分两个值。CTE 返回数据，如 ![在此处输入图像描述](../Images/50a67191bb8fc6e0dd8566b44b652d2a.png)

我想要做的是`60`在 rehabWait 列（92-32）中读取第 2 行，第 3 行也为 60（152-92`）等，直到患者 ID 发生变化。所以对于第 11 行，我希望 rehabwait 是 110 (114-4)。我的查询将运行，但我返回所有 NULLS

```
with x as 
    (
     SELECT row_number() over (order by patientid, admissiondate, claimsfromdate, datediff(dd,admissiondate, claimsfromdate))as rn,
     patientid, admissiondate, claimsfromdate,
            DATEDIFF(dd, admissiondate, claimsfromdate) as rehabWait, hcpcs
     FROM    Claims
     WHERE   hcpcs in ('g0151', '97001', '97002', '9339') and
             claimsfromdate > admissiondate 
      group by patientid, admissiondate, claimsfromdate, hcpcs
      --adding this group by clause will keep rehabWait from showing up
      --however many times they patient has the HCPCS code for rehab
    )

select  x.patientid
        ,x.admissiondate
        ,x.claimsfromdate

        ,(select x2.rehabWait-x.rehabwait from x where x.patientid=x2.patientid 
        and x.rn > x2.rn and x.admissiondate=x2.admissiondate and x.claimsfromdate=x2.claimsfromdate
        )
        from x inner join
        x as x2 on x.patientid=x2.patientid and x.admissiondate=x2.admissiondate and x.claimsfromdate = x2.claimsfromdate 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:38:50.980

```
with x as 
(
 SELECT row_number() over (PARTITION BY patientid order by patientid, admissiondate, claimsfromdate, datediff(dd,admissiondate, claimsfromdate))as rn,
 patientid, admissiondate, claimsfromdate,
        DATEDIFF(dd, admissiondate, claimsfromdate) as rehabWait, hcpcs
 FROM    #Claims
 WHERE   hcpcs in ('g0151', '97001', '97002', '9339') and
         claimsfromdate > admissiondate 
  group by patientid, admissiondate, claimsfromdate, hcpcs
  --adding this group by clause will keep rehabWait from showing up
  --however many times they patient has the HCPCS code for rehab
)
select  x.patientid
    ,x.admissiondate
    ,x.claimsfromdate
    , CASE WHEN x2.rn = 1 
           THEN x.rehabWait 
           ELSE  x2.rehabWait - x.rehabWait END AS rehabWait
    from x INNER join
    x as x2 on x.patientid=x2.patientid AND CASE WHEN x2.rn = 1 AND x.rn = 1 THEN x2.rn - 1 ELSE x.rn END = x2.rn - 1 
```

选择中的两个 CASE 语句确保您获得第一行。PARTITION BY 确保每个患者 ID 从 rn = 1 开始并上升。

编辑：我给您的第一个查询将在您的示例中丢失第 1 行和第 10 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:42:34.397

由于康复重量正在增加，您可以执行以下操作：

```
with x as 
    (
     SELECT patientid, admissiondate, claimsfromdate,
            DATEDIFF(dd, admissiondate, claimsfromdate) as rehabWait, hcpcs
     FROM    Claims
     WHERE   hcpcs in ('g0151', '97001', '97002', '9339') and
             claimsfromdate > admissiondate 
      group by patientid, admissiondate, claimsfromdate, hcpcs
  --adding this group by clause will keep rehabWait from showing up
  --however many times they patient has the HCPCS code for rehab
    )
select patientid, admissiondate, claimsfromdate,
       (RehabWait - prevRehabWait), hcpcs
from (select patientid, admissiondate, claimsfromdate, hcpcs, RehabWait,
             (select max(RehabWait)
              from x x2
              where x2.patientid = x.patientid and x2.claimsfromdate < x.claimsfromdate
             ) as prevRehabWait
      from x
     ) t 
```

为此，您不需要 row_number() 。相关子查询可以在日期字段上工作。

# entity-framework - 需要一些关于 MVVM + 轻量级对象 + EF 的建议

> ID：11800319
> 
> 赞同：0
> 
> 时间：2012-08-03T17:16:06.563
> 
> 标签：entity-framework, design-patterns, mvvm

我们用相当大的数据库开发后台应用程序。将所有内容从数据库加载到内存是不合理的，因此当请求模型的属性时，我们从数据库（通过 EF）读取但我们的许多 UI 只是简单的实体列表，其中包含一些（！）属性呈现给用户。例如，我们只想显示 Id、Title 和 Name。稍后当用户选择项目并想要执行某些操作时，需要整个对象。现在我们有了存储在内存中的项目列表。某些属性包含大文本、图像或其他数据。EF 与实体一起工作，读取一堆大对象会显着降低性能。

据我了解，可以通过创建轻量级实体并在适当的上下文中使用它们来解决问题。

第一的。恐怕每个视图都会让我们创建新的 LightweightEntity，我们最终会以臃肿的对象上下文结束。

第二。由于模型包装了 EF，我们需要为各种实体提供方法。

第三。ViewModel 相互通信和传递实体。

所以我坚持所有这些考虑，需要好的建筑设计建议。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:09:36.863

对于大文本的图像，您可以考虑[表格拆分](http://blogs.msdn.com/b/adonet/archive/2008/12/05/table-splitting-mapping-multiple-entity-types-to-the-same-table.aspx)，这通常用于将表格拆分为轻量级实体和“重”实体。

但我认为你所说的轻量级“实体”是数据传输对象（DTO）。这些不是由上下文提供的（因此它不会变得臃肿），而是由实体的投影提供，这是在存储库或服务中完成的。

对于投影，您可以使用[AutoMapper ，尤其是我](http://automapper.org/)[在这里](https://stackoverflow.com/a/11679134/861716)描述的它的新功能。这使您可以减少需要为“各种实体”（DTO）提供的方法的数量，因为可以在泛型类型参数中给出要投影的类型。

# node.js - 带有nodejs的多rabbitmq客户端/服务器

> ID：11800320
> 
> 赞同：0
> 
> 时间：2012-08-03T17:16:06.787
> 
> 标签：node.js, rabbitmq

我对 Rabbitmq 很陌生，我正在开发一个系统，中央路由器可以接收来自客户端的消息，将其路由到目标，并将响应发送到 resquestor 客户端。

基本上，有 3 个模块，每个模块都可以发送针对另一个模块的消息。我希望消息具有以下流程：

*   module1 向路由器发送消息
*   路由器将消息发送到模块 3（=模块 1 的目标）
*   module3 处理消息并向路由器发送响应
*   路由器将响应转发给模块1（请求者）

RabbitMQ 似乎是一个很好的候选者，但我不确定实现它的最佳方法是什么。REQ/REP 方法会更合适吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:11:16.293

听起来像是 RPC 的经典案例

此链接详细解释了（使用 python）RabbitMQ 中的 RPC 是如何工作的。[RPC 客户端](https://github.com/rabbitinaction/sourcecode/blob/master/python/chapter-4/rpc_client.py)和[RPC 服务器](https://github.com/rabbitinaction/sourcecode/blob/master/python/chapter-4/rpc_server.py)

但基本上，从上面的示例中会发生什么：

（来自 RPC 客户端）

Module1 将连接到 RabbitMQ 代理 (14/17)，并声明一个独占队列 (24)，然后它将创建消息的基本属性并设置 reply_to (26)（这是一个队列名称），然后将消息发布到交易所 (28)

（来自 RPC 服务器）

模块 3，将订阅来自模块 1 的消息将最终进入的队列，然后在收到消息 (31) 时从该队列开始消费 (40)，它将处理它，然后重新发布结果，将路由键设置为 reply_to (38) 那么你的消费者 (Module1) 将需要从中消费（参见 rpc 消费者第 42 行）

# php - PHP crypt() 错误

> ID：11800324
> 
> 赞同：-1
> 
> 时间：2012-08-03T17:16:27.370
> 
> 标签：php, mysql

我阅读了关于`crypt()`功能的 php.net 手册。这是我的代码：

```
#code.....
#we retrieve existing salt and password from database
$salt=$saltquery['salt'];
#$ex_password - existing password
$ex_password=$saltquery['pass'];
#$pass defined earlier. that's input
$password_hash=crypt($pass, '$2a$07$'.$salt.'');
if (crypt($password_hash, $ex_password)==$ex_password) {
 #everything is ok
} else {
 #username/password combination doesn't exists
 $msgText = "Oops! Check your username and password";
 $pass=NULL;
} 
```

我仍然收到错误“糟糕！检查您的用户名和密码'。我检查数据库和输出`$password_hash`，它们匹配。也许像这样编码更好：

```
#.....
if ($password_hash==$ex_password){}
#..... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:23:27.887

为什么你加密 $password_hash 两次？

我认为您的比较会更像这样：

```
$password_hash=crypt($pass, '$2a$07$'.$salt);
$password_hash_check($ex_password, '$2a$07$' . $salt);
if ($password_hash === $password_hash_check) {
 #everything is ok
} else {
 #username/password combination doesn't exists
 $msgText = "Oops! Check your username and password";
 $pass=NULL;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T17:26:03.257

检查密码时，您必须将用户输入传递给 crypt 函数（请参阅[`crypt`文档](http://php.net/crypt)）：

```
if (crypt($user_input, $hashed_password) == $hashed_password) {
   echo "Password verified!";
} 
```

您当前正在计算一个新的（不同的）密码哈希并将其与存储的密码进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T17:30:22.617

我相信这就是你想要的：

```
$password_hash=crypt($pass, '$2a$07$'.$salt.''); // crypt input
if ($password_hash== $ex_password) // check against crypted 
                                   // password stored in the database 
```

# android - Android游戏编程大布局

> ID：11800326
> 
> 赞同：1
> 
> 时间：2012-08-03T17:16:31.130
> 
> 标签：android, android-layout, android-view

我想开始一个新项目。有点“Jump n Run”，但我有疑问：关卡会比屏幕大。如何制作大布局并进行编辑？以及如果玩家移动，视图如何“跟随”玩家。我不想要代码示例。我只想要基本的想法如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:43:56.203

我建议你看看[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)。它允许您将位图渲染到屏幕上。在您的情况下，您可以创建一个大于屏幕的位图，并让用户使用他们的手指导航它（因此您还必须使用您的触摸屏）。基本上，当用户想要去一个新位置时，您将要更改的`src rect parameter`是 drawBitmap 方法。

我希望这能让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:24:24.320

您可以将布局指定为您想要的任何像素大小（即使它大于任何屏幕大小），然后使用滚动视图允许用户滚动到屏幕的其他区域。查看[水平滚动视图上的 Android 开发者文档](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)。

# binding - 如何绑定到 /bin 文件夹外的程序集

> ID：11800331
> 
> 赞同：1
> 
> 时间：2012-08-03T17:16:39.907
> 
> 标签：binding, .net-assembly

我在 IIS7 中建立了一个名为 CCESD 的网站；我的应用程序根文件夹是 D:\Websites\CCESD\CCESD。我在 D:\Websites\CCESD\CCESD\BinCommon 也有一个包含第三方程序集（并非所有这些程序集都是强名称）的文件夹：这是因为我在 IIS 的这个根站点下还有许多其他 Web 应用程序，它们将共享 DLL，其中一些是非托管代码，因此无法进入 GAC。我的 web.config 文件如下所示：

```
<compilation defaultLanguage="c#" debug="true" targetFramework="4.0"> 
  <assemblies> 
    ... 
    <add assembly="Telerik.Web.UI, Version=2012.1.288.40, Culture=neutral, PublicKeyToken=121FAE78165BA3D4" /> 
  </assemblies> 
</compilation> 

... 

<runtime> 
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1"> 
    <probing privatePath="BinCommon" /> 
  </assemblyBinding> 
</runtime> 
```

但是，当我尝试运行 Web 应用程序时，出现以下错误（在启用程序集绑定错误日志记录之后）：

> 解析器错误消息：无法加载文件或程序集“Telerik.Web.UI，版本=2012.1.288.40，文化=中性，PublicKeyToken=121fae78165ba3d4”或其依赖项之一。该系统找不到指定的文件。
> 
> 源文件：D:\Websites\CCESD\CCESD\web.config 行：144
> 
> 程序集加载跟踪：以下信息有助于确定为什么无法加载程序集“Telerik.Web.UI, Version=2012.1.288.40, Culture=neutral, PublicKeyToken=121fae78165ba3d4”。
> 
> 从以下位置加载程序集管理器：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll
> 
> 在可执行文件 c:\windows\system32\inetsrv\w3wp.exe 下运行
> 
> --- 详细的错误日志如下。
> 
> === 预绑定状态信息 ===
> 
> 日志：用户 = IIS APPPOOL\CCESD
> 
> 日志：DisplayName = Telerik.Web.UI，Version=2012.1.288.40，Culture=neutral，PublicKeyToken=121fae78165ba3d4（完全指定）
> 
> 日志：Appbase = file:///D:/Websites/CCESD/CCESD/
> 
> 日志：初始 PrivatePath = D:\Websites\CCESD\CCESD\bin 调用程序集：（未知）。===
> 
> LOG：此绑定在默认加载上下文中开始。
> 
> LOG：使用应用程序配置文件：D:\Websites\CCESD\CCESD\web.configLOG：使用主机配置文件：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet.config
> 
> LOG：使用 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config 中的机器配置文件。
> 
> 日志：政策后参考：Telerik.Web.UI，版本=2012.1.288.40，文化=中性，PublicKeyToken=121fae78165ba3d4
> 
> 日志：正在尝试下载新的 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/e11e9098/9e133b72/Telerik.Web.UI.DLL。
> 
> 日志：尝试下载新 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/e11e9098/9e133b72/Telerik.Web.UI/Telerik.Web.UI .DLL。
> 
> 日志：尝试下载新的 URL 文件：///D:/Websites/CCESD/CCESD/bin/Telerik.Web.UI.DLL。
> 
> 日志：尝试下载新的 URL 文件：///D:/Websites/CCESD/CCESD/bin/Telerik.Web.UI/Telerik.Web.UI.DLL。
> 
> 日志：正在尝试下载新的 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/e11e9098/9e133b72/Telerik.Web.UI.EXE。
> 
> 日志：尝试下载新 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/e11e9098/9e133b72/Telerik.Web.UI/Telerik.Web.UI 。EXE文件。
> 
> 日志：正在尝试下载新的 URL 文件：///D:/Websites/CCESD/CCESD/bin/Telerik.Web.UI.EXE。
> 
> 日志：正在尝试下载新的 URL 文件：///D:/Websites/CCESD/CCESD/bin/Telerik.Web.UI/Telerik.Web.UI.EXE。

我已检查该文件是否存在并且版本和公钥信息是否正确。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:43:45.847

我最终找到了它；最后，归结为：

```
<configuration xmlns="http://schemas.microsoft.com/.NetConfiguration/v2.0"> 
```

我的项目开始于 Visual Studio 2005；因此上面显示的 xmlns 属性存在于我的 web.config 文件的包含元素中。删除它解决了问题，现在我的程序集正在正确加载。

谷歌搜索显示 xmlns 属性可以在 Visual Studio 中启用智能感知（确实如此）：它没有说明对加载程序集有任何影响，所以这有点奇怪（更不用说烦人了）。不过，现在它正在工作。

# css - 为什么列表项不遵循内联 CSS 规则？

> ID：11800334
> 
> 赞同：0
> 
> 时间：2012-08-03T17:17:15.060
> 
> 标签：css, html-lists

我的清单有问题。我已将 a`white-space: nowrap;`和 a放在它们所属的位置，但由于某种原因，列表项`display: inline;`后仍有换行符。`notes`输出如下所示：

```
4 Months Ago    904 Notes
Laughing Squid    laughingsquid 
```

什么时候应该是这样的：

```
4 Months Ago    904 Notes    Laughing Squid    laughingsquid 
```

我无法弄清楚是什么导致中间出现奇怪的换行符。任何帮助澄清问题并纠正它都会很棒。

HTML：

```
<div class="meta">
<ul>
    <li class="date"><i class="icon-time"></i> <a href="http://creativeplayground.tumblr.com/post/19181776541/laughingsquid-tifa-the-cat-thinks-shes-a-dog" title="Creative Playground">4 months ago</a></li>
    <li class="notes"><i class="icon-heart"></i> <a href="http://creativeplayground.tumblr.com/post/19181776541/laughingsquid-tifa-the-cat-thinks-shes-a-dog#notes" title="Creative Playground">904 notes</li>
    <li class="source"><i class="icon-info-sign"></i> <a href="http://laughingsquid.com/tifa-the-cat-thinks-shes-a-dog/" title="Laughing Squid">Laughing Squid</a></li>
    <li class="reblog"><i class="icon-retweet"></i> <a href="http://links.laughingsquid.com/post/19181722635/tifa-the-cat-thinks-shes-a-dog" title="laughingsquid">laughingsquid</a></li>
</ul>
<hr class="spacer">
<ul class="tags">
    <li class="tags"><i class="icon-tags"></i></li>
    <li class="tag"><a href="http://creativeplayground.tumblr.com/tagged/fancy-tag" title="fancy tag">fancy tag</a></li><li class="tag"><a href="http://creativeplayground.tumblr.com/tagged/sample-tage" title="sample tage">sample tage</a></li><li class="tag"><a href="http://creativeplayground.tumblr.com/tagged/tag-1" title="tag 1">tag 1</a></li><li class="tag"><a href="http://creativeplayground.tumblr.com/tagged/tag-2" title="tag 2">tag 2</a></li><li class="tag"><a href="http://creativeplayground.tumblr.com/tagged/tag-3" title="tag 3">tag 3</a></li><li class="tag"><a href="http://creativeplayground.tumblr.com/tagged/tag-4" title="tag 4">tag 4</a></li><li class="tag"><a href="http://creativeplayground.tumblr.com/tagged/tag-5" title="tag 5">tag 5</a></li><li class="tag"><a href="http://creativeplayground.tumblr.com/tagged/tag-6" title="tag 6">tag 6</a></li><li class="tag"><a href="http://creativeplayground.tumblr.com/tagged/tag-7" title="tag 7">tag 7</a></li><li class="tag"><a href="http://creativeplayground.tumblr.com/tagged/tag-8" title="tag 8">tag 8</a></li>
</ul>
</div> 
```

CSS：

```
.meta {
    width: 110%;
    margin: 5px -8px -8px -8px;
    padding: 5px;
    background-color: rgba(255,255,255,0.8);
    box-shadow: inset -5px 1px 5px #555;
    font-size: 10pt;
    color: #555;
}
.meta a:link, .meta a:visited { color: #555; }
.meta > ul, ul.tags { display: inline; list-style: none; margin: 0; }
.meta > ul > li, li.tag { display: inline; margin: 0 8px 0 0; white-space: nowrap; }
li.tag:before { content: "#"; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:52:03.880

感谢@Zeta 指出这一点，但答案很简单。我在`notes`列表项上缺少一个结束锚标记。有问题的行应为：

```
<li class="notes"><i class="icon-heart"></i> <a href="#" title="notes">904 notes</a></li> 
```

# android - 可以调试从 Play 下载的 android 应用程序吗？

> ID：11800338
> 
> 赞同：2
> 
> 时间：2012-08-03T17:17:24.320
> 
> 标签：android, eclipse, debugging, android-emulator, google-play

我的应用程序在从 Google Play 下载时显示了一些我无法用 eclipse 模拟的错误，甚至无法直接在设备上进行调试。

我在这里发布了这个问题的更多细节：[Facebook Connect 在模拟器/设备上的工作方式不同，但在 Google Play 上没有](https://stackoverflow.com/questions/11688296/facebook-connect-works-different-on-emulator-device-but-not-on-google-play)

但是我想知道如果我从 Play 下载它是否可以调试我的应用程序，即无需从 Eclipse 安装 apk。如果不调试，至少我可以在 LogCat 中看到日志消息吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:22:12.953

是的。这与使用 eclipse debug apk 进行调试相同。您可以查看日志消息，截取屏幕截图。不确定断点，但其余的都是一样的。

请记住，如果您使用 ProGuard 或类似工具，堆栈跟踪将需要再次通过他们的工具运行才能有意义。

# java - 识别方法的不同执行（执行对象）？

> ID：11800339
> 
> 赞同：1
> 
> 时间：2012-08-03T17:17:31.653
> 
> 标签：java, aop, aspectj

我有一些（静态）Java 方法。

我有一个切入点来执行这些方法中的任何一个：

```
pointcut calculation() : execution(* myMethod_*(..)); 
```

现在我想分别测量每次执行的时间。问题是执行可能随时触发，而其他执行仍在运行。我考虑了两个建议，`before()`和`after()`，它们识别呼叫者来管理不同呼叫者的计时器。

```
before() : calculation() {

}

after() : calculation() {

} 
```

我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:31:37.147

around() 建议应该有效：

```
 Object around() : calculation() {
        long start = System.nanoTime();
        Object result = proceed();
        long end = System.nanoTime();
        logger.info(String.format("%s took %d ns", thisJoinPointStaticPart.getSignature(),
                (end - start)));
        return result;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:08:39.960

我无法评论 Biju 的答案，所以我正在创建一个新答案：

您询问：

> 有一个问题：“建议 [...] 尚未应用 [Xlint:adviceDidNotMatch]” - 切入点似乎与 Java 方法不再匹配

嗯，应该怎么搭配？在执行你的**静态**方法（你自己提到过）时没有`this`对象，所以切入点应该是`call()`而不是`execution()`. 这是我为您创建的完整代码示例以进行演示：

应用类：

```
package de.scrum_master.aspectj.sample;

import java.util.Random;

public class Dummy {
    static Random random = new Random();

    static void myMethod_one() throws InterruptedException {
        Thread.sleep(random.nextInt(1000));
    }

    static String myMethod_two(int dummy) throws InterruptedException {
        Thread.sleep(random.nextInt(1000));
        return "dummy";
    }

    static int myMethod_three(double foo, String... dummy) throws InterruptedException {
        Thread.sleep(random.nextInt(1000));
        return -1;
    }

    public static void main(String[] args) throws InterruptedException {
        // We have no "this" here (static method), so advice is not applied
        myMethod_two(5);
        myMethod_one();
        myMethod_three(7.7, "foo", "bar");

        // Now let's create an object, so we have "this"
        new Dummy().doStuff();
    }

    void doStuff() throws InterruptedException {
        // Here advice is applied because we have "this"
        myMethod_one();
        myMethod_two(5);
        myMethod_one();
        myMethod_three(7.7, "foo", "bar");
        myMethod_three(3.3, "zot", "baz");
        myMethod_two(11);
    }
} 
```

时序方面：

```
package de.scrum_master.aspectj.sample;

aspect TimingAspect {
    pointcut calculation(Object thisObject) :
        call(* myMethod_*(..)) && this(thisObject);

    Object around(Object thisObject) : calculation(thisObject) {
        long start = System.nanoTime();
        Object result = proceed(thisObject);
        long end = System.nanoTime();
        System.out.println(String.format(
            "%s (this = %s) took %d ns",
            thisJoinPointStaticPart.getSignature(),
            thisObject,
            end - start
        ));
        return result;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:24:18.373

最好的方法是用一个具有开始时钟和结束时钟的对象来包装每个方法。您可以使用：

```
System.nanoTime(); 
```

保存开始和结束时间。因此，您的通话前后可以设置开始和结束时间值。或者您可以将它们包装到一个运行命令中，该命令设置开始，运行方法，然后设置结束。

通过将方法包装在一个对象中，您可以将时序控制抽象到该对象，并根据需要并行执行任意数量的操作——每个都负责为自己的方法计时。

# android - 将android程序与数据库连接

> ID：11800340
> 
> 赞同：-1
> 
> 时间：2012-08-03T17:17:51.853
> 
> 标签：android

我想将一个android程序与数据库（不是mysql或sqlite）连接起来。我想使用 apache tocat 服务器。接下来，我将我的 android 程序转换为 JSP（java 服务器页面）。我想使用相同的数据库。（对于 jsp 和 android 应用程序）所以，我的问题是我需要使用哪个数据库？最佳做法是什么？并给我一些指导和好的教程网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:38:15.397

你可以试试这个[http://courses.coreservlets.com/Course-Materials/csajsp2.html](http://courses.coreservlets.com/Course-Materials/csajsp2.html)。您可以创建一个服务器/客户端应用程序，在服务器端，您可以连接到数据库并提供您的应用程序可以使用的 Web 服务。在这种方法中，您可以使用任何支持 java 编程语言的数据库。

# algorithm - 如何根据 Dalal 和 Triggs 获得“一个”细胞的直方图方向？

> ID：11800341
> 
> 赞同：1
> 
> 时间：2012-08-03T17:17:54.187
> 
> 标签：algorithm, image-processing, computer-vision

我正在尝试实现 Dalal 和 Triggs 的方法。我可以在图像上实现第一阶段*计算梯度*，我可以创建在单元格中遍历图像的代码，但我不明白这个阶段*背后的逻辑。*

我知道有必要首先在`signed`（0-360 度）或`unsigned`（0-180 度）梯度之间进行识别。

我知道我必须创建一个数据结构来存储每个单元格直方图，包括 n 个 bin。我知道什么是直方图，因此我知道我必须访问每个像素，但我并不完全了解对每个像素进行分类、获取该像素的梯度方向并使用该数据构建直方图的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:02:08.043

简而言之，HOG 只不过是梯度方向的密集表示，由它们在重叠的局部邻域上的强度加权。

你问找到每个像素梯度方向的意义是什么。在图像中，每个像素的梯度方向表示该位置对象的边界（两个纹理之间的边缘）相对于 X 和 Y 轴的方向。因此，如果您将补丁或块或对象的一部分的方向分组，它以非常强的方式或独特的方式表示对象在该区域的边缘方向的分布......现在让我们举一个简单的例子，如果您将圆的梯度方向绘制为直方图，您将得到一条直线（不要想象 HOG 只是一个简单的梯度方向图），因为如果您在 360 处采样，圆的边缘的方向范围从 0 度到 360 度连续的位置，对于不同的对象，它是不同的，

希望有用...

# asp.net - 如何使用 MapRoute，使用 ActionLink()？

> ID：11800346
> 
> 赞同：0
> 
> 时间：2012-08-03T17:18:01.197
> 
> 标签：asp.net, asp.net-mvc-3, routes, target

我里面有这个路线值`Global.asax`

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
);

routes.MapRoute(
    "Edit", // Route name
    "Admin/{controller}/{action}/{id}", // URL with parameters
    new { controller = "Edit", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

我使用这个 ActionLink 方法来调用 Edit 路由

```
@Html.ActionLink("Edit", "Topic", "Edit", new { id = item.ID }) 
```

现在生成的链接结果是这样的……

```
http://localhost:777/Admin/Topic?Length=4 
```

如何使用 ActionLink 方法正确使用路由和目标。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:36:11.763

使用正确的重载`ActionLink`来获得预期的结果

```
@Html.ActionLink("Edit", "Topic", "Edit", new { id = item.ID }, null) 
```

过载是`ActionLink(string linkText, string actionName, string controllerName, object routeValues, object htmlAttributes)`

当您向操作提供参数时，需要添加`null`as null HTML 属性。或者，如果您确实需要将 HTML 属性应用于链接，您可以使用：

```
@Html.ActionLink("Edit", "Topic", "Edit", new { id = item.ID }, new { @class = "MyCustomCssClassName" } ) 
```

# jquery - 为什么 jQuery 会在 $.ajax 成功回调中吞下异常？

> ID：11800349
> 
> 赞同：2
> 
> 时间：2012-08-03T17:18:18.550
> 
> 标签：jquery

看起来 jQuery 1.6.4 故意在 $.ajax 成功回调中吞下异常。

如果我这样做：

```
$.get('/', function() {console.log('doodoo');}) 
```

我在（Chrome）控制台中得到了这个：

```
Object
doodoo 
```

但如果我这样做，

```
$.get('/', function() {throw 'doodoo';}) 
```

我在控制台中没有错误：

```
Object 
```

快速浏览一下 jQuery 源代码会发现这显然是故意的：

```
try {
    while( callbacks[ 0 ] ) {
        callbacks.shift().apply( context, args );
    }
} catch(e) { } 
```

有谁知道为什么 jQuery 会这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:30:05.117

我在这里猜测，但原因可能是因为您无论如何都无法捕捉到错误。由于它是一个回调，因此您将无法将其包装在 try/catch 中。如果 jQuery 没有捕捉到它，您的应用程序将会崩溃，这很可能不是您想要的。如果您需要检查错误，请将代码包装在回调中的 try/catch 中。

```
try {
    $.get('/', function() {throw 'doodoo';})
} catch(e) {
    // this wont do anything, even if jQuery didn't catch the error
}

$.get('/', function() {
    try {
        throw 'doodoo';
    } catch(e) {
        // this is the proper way to do it
    }
}) 
```

# regex - 处理 ISAPI 中的编码字符 - 正则表达式

> ID：11800350
> 
> 赞同：0
> 
> 时间：2012-08-03T17:18:22.997
> 
> 标签：regex, url-rewriting, isapi-rewrite

我有一个包含 的 url，`~`我需要处理这个字符的编码版本`%7E`。

目前，我们有两条规则来处理这种情况。

```
^/folder/([\w-]+)~(\d*).aspx$
^/folder/([\w-]+)%7E(\d*).aspx$ 
```

我可以将其合并为一个规则吗？我尝试了以下方法，但它不起作用：

```
^/folder/([\w-]+)[~|%7E](\d*).aspx$ 
```

对此规则的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:31:32.433

也许你想试试

```
^/folder/([\w-]+)(~|%7E)(\d*)\.aspx$ 
```

或者

```
^/folder/([\w-]+)(?:~|%7E)(\d*)\.aspx$ 
```

如果您的正则表达式引擎支持此语法，则保持您的捕获组相同。

这`[…]`构造了一个*字符类*，而不是一组替代品。So`[~|%7E]`的意思是“文字`~`, `|`, `%`,`7`或`E`.

为此，您必须使用括号。你应该转义`.`in`\.aspx`因为`.`在正则表达式中意味着“任何字符”。

# jquery - 在 jquery 对话框中调用嵌套按钮函数

> ID：11800351
> 
> 赞同：0
> 
> 时间：2012-08-03T17:18:23.823
> 
> 标签：jquery, jquery-ui

我试图`start`从下面调用按钮`restart`它不起作用我该如何实现它？因为它在取消按钮情况下工作

```
 $( "#flash_screen" ).dialog({
            autoOpen: false,
            height: 500,
            width: 1050,
            modal: true,
            buttons: {
                "Start": function() { alert('start');
                },

                restart: function(){

                $( this ).dialog( "Start" );

                },

                Cancel: function() {
                    $( this ).dialog( "close" );
                    }
                },
                close: function() {
                allFields.val( "" ).removeClass( "ui-state-error" );
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:27:47.557

您实际上并没有调用 Close 函数 - 您正在将“close”命令传递给`dialog`调用定义的`close`事件处理程序的 。

要执行您想要的操作，您应该创建一个单独的`Start`函数，将其指定为事件处理程序`restart`和`start`事件处理程序：

```
function startHandler () { alert('start'); }

$( "#flash_screen" ).dialog({
        autoOpen: false,
        height: 500,
        width: 1050,
        modal: true,
        buttons: {
            "Start": startHandler,

            restart: startHandler,

            Cancel: function() {
                $( this ).dialog( "close" );
                }
            },
            close: function() {
            allFields.val( "" ).removeClass( "ui-state-error" );
            }
        }); 
```

# php - 如何通过 PHP 表单生成“config.php”？

> ID：11800355
> 
> 赞同：1
> 
> 时间：2012-08-03T17:18:26.533
> 
> 标签：php

我正在构建一个基于 php 的小型应用程序，它需要一个包含用户名和密码的“config.php”文件。与其要求最终用户在将应用程序上传到他们的服务器之前手动修改“config.php”，不如从设置表单中动态生成“config.php”。

**基本上，我想用这个：**

```
<form method="POST" action="?setup-config">
<fieldset>
    <div class="clearfix">
        <label for="username">Desired User Name</label>
        <div class="input">
            <input type="text" name="username" id="username">
        </div>
    </div>
    <div class="clearfix">
        <label for="password">Desired Password</label>
        <div class="input">
            <input type="password" name="password" id="password">
        </div>
    </div>
    <div class="actions">
        <input type="submit" value="Save Username &amp; Password">
    </div>
</fieldset>
</form> 
```

**创建“config.php”：**

```
<?php

$username = 'entered username';
$password = 'entered password'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:26:38.130

我建议`file_put_contents()`：

```
$config[] = "<?php";
$config[] = "\$username = '$_POST['username']';";
$config[] = "\$password = '$_POST['password']';";

file_put_contents("config.php", implode("\n", $config)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:21:52.507

一个**非常**基本的例子。这可以改进*很多*。

```
<?php
$fp = fopen('config.php', 'w');
fwrite($fp, "<?php\n");
fwrite($fp, "\$username = '$_POST['username']';\n");
fwrite($fp, "\$password = '$_POST['password']';\n");
fclose($fp);
?> 
```

# sql - SQL脚本扫描一个数据table1，找到特定的字段，然后将其复制到table2中

> ID：11800356
> 
> 赞同：0
> 
> 时间：2012-08-03T17:18:27.743
> 
> 标签：sql, sql-server

谁能帮我修复这个脚本？

> 我收到此错误：消息 4104，级别 16，状态 1，行 1 无法绑定多部分标识符“#Temp3.EmpID”。

错误来自： -- 更新到 Keyshop.EmployeeTable UPDATE EmployeeTable SET Status = 'False' WHERE #Temp3.EmpID = EmployeeTable.EmpID

该脚本非常不言自明，但如果您需要我提供更多信息，请告诉我。谢谢

```
-- Update into Keyshop.EmployeeTable
UPDATE EmployeeTable SET Status = 'False' WHERE #Temp3.EmpID = EmployeeTable.EmpID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:23:54.940

这不是一个有效的更新语句，因为它引用了一个不在`UPDATE`子句或可选`FROM`子句中的表

```
UPDATE EmployeeTable
 SET Status = 'False' 
WHERE #Temp3.EmpID = EmployeeTable.EmpID 
```

有几种方法可以使用`IN`可能是最容易理解的

```
UPDATE EmployeeTable
 SET Status = 'False' 
WHERE EmployeeTable.EmpID IN (SELECT EmpID  FROM #Temp3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:22:57.097

调换这些人。而不是这个：

```
UPDATE EmployeeTable SET Status = 'False' WHERE #Temp3.EmpID = EmployeeTable.EmpID 
```

拥有这个

```
UPDATE EmployeeTable SET Status = 'False' WHERE EmployeeTable.EmpID in (SELECT EmpID  FROM #Temp3) 
```

编辑：我错过了 #Temp3.EmpID 是一个表，而不是一个变量。

# desire2learn - 课程部分的替换字符串？

> ID：11800371
> 
> 赞同：2
> 
> 时间：2012-08-03T17:19:53.773
> 
> 标签：desire2learn

是否可以使用替换字符串来定位课程中的特定部分？我知道我可以将`{OrgUnitName}`其用作课程名称的替换字符串，但是是否有可以用于课程中特定部分的替换字符串？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:58:51.070

从版本 10 开始，似乎没有任何课程部分令牌。这些是似乎可用的：

*   有机体
*   组织类型id
*   组织路径
*   单位名称
*   组织代码
*   有机的
*   组织名称
*   用户身份
*   用户名
*   名
*   姓
*   组织定义ID
*   电子邮件
*   内部电子邮件
*   外部电子邮件
*   角色ID
*   角色代码
*   角色名

# operating-system - 在使用 inode 和磁盘块的磁盘上可以存储的最大文件大小是多少

> ID：11800381
> 
> 赞同：0
> 
> 时间：2012-08-03T17:20:57.400
> 
> 标签：operating-system

我在这里有一个问题，我不知道如何计算可以存储在使用 inode 和磁盘块的磁盘上的文件的最大大小。

假设一个页大小为 4096 字节，一个指向一个帧的页表项占用 8 个字节（4 个字节用于指针加上一些标志），一个指向另一个页表的页表项占用 4 个字节，有多少级如果每个级别的页表必须适合单个页面，则需要页表来映射 32 位地址空间？

可以在使用存储 4096 字节的 inode 和磁盘块的磁盘上存储的最大文件大小。每个inode可以存储10个条目，第一个inode保留后两个条目用于级联inode？？？

对于问题的第一部分，我得到的关卡总数是 3，但我不知道如何做第二部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:32:00.577

你所描述的听起来像 EXT 文件系统。

EXT3 总共使用了 15 个指针。

前 12 个条目是直接的：它们直接指向数据块。第三个到最后一个条目是 1 级间接：它指向一个完全由 1 级条目填充的块。第二个到最后一个条目是 2 级间接：它指向一个完全充满 1 级间接的块。最后一个条目是 3 级间接。

此系统上的最大文件大小通常是操作系统的限制，通常在 16GB 和 2TB 之间。

理论最大值为 12I + I^2/P + I^3/P^2 + I^4/P^3，其中 I 是以字节为单位的 inode 大小（通常为 4096，尽管可能有不同的值），P 为指针大小，以字节 (4) 为单位。这产生了 4,402,345,721,856 字节的最大理论大小。

[EXT3 Inode 指针结构](http://en.wikipedia.org/wiki/Inode_pointer_structure)

# node.js - Node.js 和 twilio 集成

> ID：11800385
> 
> 赞同：1
> 
> 时间：2012-08-03T17:21:00.823
> 
> 标签：node.js, integration, twilio

我正在尝试将 twilio 与 Node.js+express 集成。

我还没有网站。我应该为 HOSTNAME 提供什么值，以及 SID 和 AUTH_TOKEN，这些值是我从 twilio 站点获得的。

我已经编写了一些代码，无论下面给出的任何建议都放在 twiclient.js 中的 views 文件夹中，我已经在 app.js 中添加了一条路由，以在 /twi 被调用时重定向请求，但我没有得到任何结果。控制台中出现了一些错误，请您帮我弄清楚我做错了什么？我已经放置了正确的 SID、令牌和主机名，如下所示。

app.js 有以下条目，是否需要为 twilio 调用部分执行其他操作？

另外，我应该在哪里定义用于在视图文件夹中调用电话的 GUI？

```
var TwilioClient = require('twilio').Client,
      Twiml = require('twilio').Twiml,
      sys = require('sys');
var client = new TwilioClient('MY_ACCOUNT_SID', 'MY_AUTH_TOKEN', 'MY_HOSTNAME');

var phone = client.getPhoneNumber('+2323232323');
phone.setup(function() { phone.makeCall('+15555555555', null, function(call) {});
phone.setup(function() {
    phone.makeCall('+15555555555', null, function(call) {
        call.on('answered', function(callParams, response) {
            response.append(new Twiml.Say('Hey buddy. Let\'s meet for drinks later tonight.'));
            response.send();
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:37:50.040

主机名是“api.twilio.com”。您的 SID 和 AUTH_TOKEN 来自您的 twilio 帐户。登录后，转到仪表板。您会在此处找到您的 SID 和 AUTH_TOKEN。

这是我用来向 twilio 发出呼叫请求的代码。它应该可以帮助您入门。

```
var https = require('https');
var qs = require('querystring');

var api = 'your api key';
var auth = 'your auth token';

var postdata = qs.stringify({
    'From' : '+5554321212',
    'To' : '+5552226262',
    'Url' : 'http://yourwebsite.com/call'
});

var options = {
    host: 'api.twilio.com',
    path: '/2010-04-01/Accounts/<your api key>/Calls.xml',
    port: 443,
    method: 'POST',
    headers: {
        'Content-Type' : 'application/x-www-form-urlencoded',
        'Content-Length' : postdata.length
    },
    auth: api + ':' + auth
};

var request = https.request(options, function(res){
    res.setEncoding('utf8');
    res.on('data', function(chunk){
        console.log('Response: ' + chunk);
    })
})

request.write(postdata);
request.end(); 
```

# python - Python：获取在 Python 中获得的计数总和

> ID：11800388
> 
> 赞同：2
> 
> 时间：2012-08-03T17:21:30.573
> 
> 标签：python, count, sum

我是一个每天都在与 Python 苦苦挣扎的初学者。我有一个大型数据集，第二列中有动物名称。我有一个程序可以按每个动物的名称来计算每个动物的数量（每行有 1 个动物名称和 1 个“计数”数据）。我正在尝试获取使用 Python 获得的计数数据的总和，但我无法做到这一点。我到目前为止的代码是：

```
import csv, collections

reader=csv.reader(open('C:\Users\Owl\Data.txt','rb'), delimiter='\t')

counts=collections.Counter()

for line in reader:
   Name=line[1]
   counts[Name]+=1

for (Name, count) in sorted(counts.iteritems()):
   Output=list('%s' % count) #Make output string to a list
   Sum=sum(Output) # Sum function requires a list
   print 'Total kinds of Animals: %s' % Sum 
```

我收到一条错误消息`" File "sum_count.py", line 17, in <module> Sum=sum(Output) # Sum function requires a list TypeError: unsupported operand type(s) for +: 'int' and 'str'".`

到目前为止我发现的是，因为`sum`显然要求输入类型是一个列表，我将计数数据（它是字符串）转换为一个列表，但是当我这样做时`Output=list('%s' % count)`，似乎所有计数数据都超过 2数字是分开的。例如，当我打印输出时，它会是这样的：

```
['1', '6', '3']
['3']
['1', '8', '5', '9']
['7', '9'] 
```

代替

```
['163']
['3']
['1859']
['79'] 
```

我在这里要做的是获得这些元素的单一“总和”。在这里，它将是 4。四种动物。

我在想这可能是我收到上述错误的原因。我可能错了，但有人可以帮我解决这个问题吗？提前谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:29:15.707

我认为你不需要使用`sum`.

试试这个：

```
for (Name, count) in sorted(counts.iteritems()):
    print 'Species total: %s' % count 
```

或者，可能更好：

```
for (Name, count) in sorted(counts.iteritems()):
    print 'Total for species %s: %s' % (Name, count) 
```

`sum`适用于当您有一个数字列表并想要找到该数字列表的总和时。你已经收集了每只动物的总和`counts`——你只需要显示它。

**编辑**

要总结计算的动物总数，您可以这样做：

```
total = sum(counts.values())
print 'Total number of animals: %d' % total 
```

**编辑 2**

计算的动物种类数就是`counts`字典的长度：

```
print 'Number of kinds of animals: %d' % len(counts) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T17:24:54.600

（在评论讨论后重新编写；原始答案只是指出 OP 正在尝试添加字符串。）

其他答案有更多的扩展机会（所以我会推荐它们），但如果您*只想*快速计算动物类型的数量，您可以简单地计算文件中的行数并使用您对文件是结构化的。例如，如果你的 csv 文件有一个像`Name, Count, etc.`下一行一样的标题，后面只有你感兴趣的数据，那么动物的数量将是文件中非空行的数量，减去一个作为标题。然后，您可以使用以下代码打印计数：

```
print sum(1 for line in open('test.csv') if line.strip() != '') - 1 
```

以下是该代码的每个部分的作用：

*   `sum()`在其中添加列表的所有元素。在这种情况下，里面没有一个列表，而是一个生成器表达式，这里可以认为是一个没有进入内存的列表。
*   `1 for line in open('test.csv')`这是生成器表达式的第一部分。它本身会产生一个生成器，其长度是其中的行数，`test.csv`并且每个元素都在其中（如果文件中有五行`1`，类似的列表将是）。`[1,1,1,1,1]`
*   `if line.strip() != ''`这是生成器表达式的第二部分。它确保 a`1`仅在行上有任何内容时才添加到生成器中。
*   `-1`从返回值中减去一个`sum(...)`以忽略 csv 的标头

好吧，我希望在某种程度上有所帮助，我应该重申，这种方法只是一种快速而肮脏的方法；例如，如果您正在对数据做其他事情，您就不会使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T17:28:52.957

### 获取计数

我认为问题源于您将“计数”与“总数”区分开来。“计数”*是*该项目的出现总数。此外，您正在滥用`collections.Counter()`，它可以使您的工作变得*更*轻松。这是我认为您要实现的目标的编码示例：

```
counts = collections.Counter(line[1] for line in reader if len(line) > 1)
#Now all the occurrences of each item are summed up, AND ordered by number of occurrences

print "Total number of animals: %d" % len(counts)
#This is what I THINK you are trying to do. 
```

此外：

```
for name, number in counts.items():
    print "# of %s: %d" % (name, number) 
```

### 关于你的`TypeError`：

您有一个字符串列表，而不是整数列表。

一个例子：

```
mylist = ['1', '2', '3'] 
```

所做`sum()`的只是对可迭代对象执行累积加法，类似于：

```
total = 0
for item in mylist:
    total = total + item 
```

在这种情况下`total`是一个`int`（值 0）并且`item`是一个`str`（值 '1'）。Python 不知道如何处理`0 + 'string'`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T17:52:34.373

首先，您使用的是 Counter 对象，但仅将其用作 defaultdict 的替代品。如果你想用它来做你的计数，你可以像这样传递你的输入（假设物种出现不止一次，你想知道每个物种出现的频率）：

```
counts = collections.Counter(map(lambda item: item[0], reader)) 
```

但是如果你想计算所有动物的总和（不管物种），你必须在你的第一个循环中添加这个计数。正如其他人所说，由于您正在读取字符串，因此您首先必须从该计数中取出一个整数。

```
import csv

reader=csv.reader(open('in','rb'), delimiter='\t')

counts = dict()

for data in reader:
    animal = data[1]
    if animal not in counts:
        counts[animal]= 1
    else:
        counts[animal]+= 1

for animal in counts:
    print 'Animals of scpecies %s: %s' % (animal, counts[animal])   

print 'Species total: %s' % len(counts)
print 'All animals: %s' % sum(counts.values()) 
```

# javascript - 即使验证失败，表单也会提交

> ID：11800399
> 
> 赞同：0
> 
> 时间：2012-08-03T17:22:17.540
> 
> 标签：javascript, html

我有一个页面，我在提交 10 秒后禁用按钮，如果验证成功则提交表单。但是，即使验证返回 false，表单也会被提交。

我尝试使用

```
<input type="submit"> 
```

而不是图像仍然是同样的问题。

下面是代码：

```
<html>
    <head>
        <script>
            function enableMe(myBtn) {
                myBtn.disabled = false;
            }
            function doValidation() {
                document.getElementById('hidden1').value = 'true';
                return false;
            }
        </script>

    </head>
    <body>
        <form id="loginForm" method="post" action="https://www.mySite.com/authService">
            <label for="userid">Username</label><br/>
            <input type="text" value="" id="userid" name="userid"/>
            <br/>

            <label for="password">Password</label>
            <br/>
            <input type="password" value="" id="password" name="password"/>
            <br/>
            <br/>

            <input type="image" id="submitBtn" src="btn_login.gif"
                   onsubmit="this.disabled=true; setTimeout(enableMe,10000,this); return doValidation();">
            <input type="hidden" id="hidden1" name="hidden1" value="false"/>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:25:37.720

验证应附加到表单，而不是输入元素...

```
<form id="whatever" ... onsubmit="return doValidation();"> 
```

# mysql - 如何将信息从 xslt 传递到 mysql

> ID：11800402
> 
> 赞同：0
> 
> 时间：2012-08-03T17:22:38.360
> 
> 标签：mysql, xml, xslt, xslt-1.0

我需要知道如何将我的 xsl 转换链接到我的数据库我目前已将其设置为进行 html 转换，但需要将数据插入到数据库中 xslt 是一个仅用于转换的文件，并且在 php 脚本中运行，几天前我在上面看到了一个线程，但忘了保存它，现在我一辈子都找不到关于它的任何东西。xml 是一个提要而不是一个文件这是 xsl 的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<xsl:variable name="ref" select="lr_rates/hoel_ref"/>
     <xsl:for-each select="//room">
      <xsl:variable name="ref" select="ref"/>
      <xsl:variable name="type" select="type_description"/>
      <xsl:variable name="descr" select="description"/>
      <xsl:variable name="avail" select="rooms_available"/>
      <xsl:variable name="rate" select="rack_rate"/>
      <xsl:variable name="cur" select="rate/requested_currency"/>
    </xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

那么这就是数据库请求的样子

```
 "DELETE FROM `pt_rooms` WHERE hotel_ref = '$id'";
 "INSERT INTO `pt_rooms`(hotel_ref,room_ref,room_type,description,availability,price,currency) VALUES ('$id','$ref','$type','$descr','$avail','$rate','$cur')"; 
```

我想我可能需要一个 mysql_connect 语句以及它不是一个应用程序，只是一个 php 脚本中的 singl xsl 如果有人可以链接到一个好的解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:26:47.627

XSLT 是一种 XML 转换，这意味着您可以将任何 XML 文件从 XML 转换为您可以提出的任何其他基于文本的格式。如果没有某种处理代码来获取结果并执行查询，它就不会神奇地与您的数据库交互。由于您需要这个并提到了 PHP，因此您最好首先在 PHP 中处理 XML 并以这种方式填充数据库。

# mysql - 表中的列值作为视图中的列

> ID：11800405
> 
> 赞同：0
> 
> 时间：2012-08-03T17:22:50.217
> 
> 标签：mysql, pivot, views

我有一张桌子：

```
CityID     ParamName      ParamValue
------    -----------     ----------
  1       Temperature        23    
  1       Humidity           56
  2       Temperature        27
  2       Humidity           49 
```

我想创建一个视图，如下所示：

```
CityID    Temperature     Humidity
------    -----------     --------
  1          23              56
  2          27              49 
```

我的数据库引擎是 MySQL。

有人可以帮我定义这样的观点吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:26:26.903

MySQL 没有`PIVOT`函数，所以你需要给你一个`CASE`声明：

```
SELECT CityId,
    SUM(CASE WHEN ParamName = 'Temperature' THEN ParamValue END) Temperature,
    SUM(CASE WHEN ParamName = 'Humidity' THEN ParamValue END) Humidity
FROM yourTable
GROUP BY CityId 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/93f4b/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:30:29.127

就像是

```
select someTable.CityID,temps.ParamValue as Temperature,Hums.ParamValue as Humidity
From SomeTable
inner join someTable temps 
On someTable.CityID = temps.CityID and temps.ParamName = 'Temperature'
inner join SomeTable hums  
On someTable.CityID = hums.CityID and hums.ParamName = 'Humidity' 
```

# .htaccess - htaccess 从子文件夹中获取内容

> ID：11800407
> 
> 赞同：1
> 
> 时间：2012-08-03T17:23:00.823
> 
> 标签：.htaccess, nested, directory

我搜索了很多，但找不到我想要的信息。我有一个域`http://mydomain.com`，我的 html 文件嵌套在 3 级子文件夹中（例如`thingy.html`嵌套在`t/h/i/`文件夹中，`testy.html`嵌套在`/t/e/s/`文件夹中

现在我想在浏览器中输入`http://mydomain.com/testy.html`或`http://mydomain.com/thingy.html`，它应该显示这些文件的内容而不被重定向到`http://mydomain.com/t/h/i/thingy.html`和`http://mydomain.com/t/e/s/testy.html`

这是可行的吗？

有人可以帮我吗？我是 .htaccess 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:46:56.533

除非这些 3 级子文件夹的命名有某种确定性，否则您必须明确且分别地执行每个子文件夹。例如，文档根目录中的 htaccess 文件，您可以拥有：

```
RewriteEngine On
RewriteRule ^/?thingy.html$ /t/h/i/thingy.html [L]
RewriteRule ^/?testy.html$ /t/e/s/testy.html [L] 
```

等等

# ruby-on-rails-3 - 有没有关于 faye on rails 的功能齐全的教程或示例？

> ID：11800408
> 
> 赞同：4
> 
> 时间：2012-08-03T17:23:01.683
> 
> 标签：ruby-on-rails-3, faye

我以前在 node 上使用过 faye，但现在想将它添加到 rails 应用程序。我找到了很多快速集成指南并启动并运行它，但我目前的实现非常笨拙。我已经找不到任何更长的教程或示例，包括服务器订阅 faye 频道、与 rails 模型交互以及发布响应的良好约定。有谁知道好的资源吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T09:56:25.703

以下链接可能对您有用，

[http://railscasts.com/episodes/260-messaging-with-faye?view=asciicast](http://railscasts.com/episodes/260-messaging-with-faye?view=asciicast)

第一个展示了在 faye 的帮助下在 Rails 中的简单即时消息应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T22:23:51.603

我发现**[How to Use Faye as a Real-Time Push Server in Rails](http://net.tutsplus.com/tutorials/ruby/how-to-use-faye-as-a-real-time-push-server-in-rails/)**教程是一个好的开始：

> 我们将构建一个简单的聊天服务。现在，Ryan Bates 在[Railscast #260](http://railscasts.com/episodes/260-messaging-with-faye)中介绍了这一点，但是，我们将在本教程中采用稍微不同的方法。首先，我们将创建一个聊天服务，用户进入公共房间，每个人都可以公开聊天。我们将添加的第二个功能是私人消息。此外，我们将使用 Ryan Bate 的[private_pub](https://github.com/ryanb/private_pub) gem 将一些安全性集成到我们的实现中。

在大约一个小时内，您将亲身体验并了解 Faye，无论是作为服务器还是作为客户端。最后，您将进行非常基本的聊天；不仅如此，您的聊天也通过[private_pub](https://github.com/ryanb/private_pub)安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T17:14:42.060

Faye 已经转向机架兼容性，因此`rackup`建议使用 config.ru 文件并使用命令引导（listen 方法不适用于最新版本的 faye）。

不鼓励使用 rails 引导 Faye，因为 FAYE 与 rails 中的开发中间件不兼容，这意味着您将始终需要在生产模式下运行。

编写了一个简约的[准系统示例](https://github.com/TheNotary/faye_rails_example)项目，它可以干净地部署到 heroku，正如在[faye-rails-example.herokuapp.com](https://faye-rails-example.herokuapp.com/)上观察到的那样。

# unicode - 将 DictWriter 用于 utf-8 时出现 UnicodeEncodeErrors

> ID：11800426
> 
> 赞同：2
> 
> 时间：2012-08-03T17:24:42.837
> 
> 标签：unicode, utf-8, python-2.7, export-to-csv

我正在尝试将包含 utf-8 字符串的字典写入 CSV。我正在按照[这里](https://stackoverflow.com/questions/5838605/python-dictwriter-writing-utf-8-encoded-csv-files)的说明进行操作。然而，尽管对这些 utf-8 字符串进行了精心编码和解码，但我得到了一个涉及“ascii”集的 UnicodeEncodeErrors。

我有一个字典列表，其中包含字符串和整数作为与维基百科文章更改相关的值。下面的列表对应于[这种变化](http://en.wikipedia.org/w/index.php?diff=121862749&oldid=prev)，例如：

```
edgelist = [{'articleName': 'Barack Obama', 'editorName': 'Schonbrunn', 'revID': '121844749', 'bytesAdded': '183'}, 
{'articleName': 'Barack Obama', 'editorName': 'Eep\xc2\xb2', 'revID': '121862749', 'bytesAdded': '107'}] 
```

问题是`list[1]['editorName']`。它有类型`'str'`并且`el[1]['editorName'].decode('utf-8')`是`u'Eep\xb2'`

我正在尝试的代码是：

```
_ENCODING = 'utf-8'
def dictToCSV(edgelist,output_file):
    with codecs.open(output_file,'wb',encoding=_ENCODING) as f:
        w = csv.DictWriter(f,sorted(edgelist[0].keys()))
        w.writeheader()
        for d in edgelist:
            for k,v in d.items():
                if type(v) == int:
                    d[k]=str(v).encode(_ENCODING)
            w.writerow({k:v.decode(_ENCODING) for k,v in d.items()}) 
```

这将返回：

```
dictToCSV(edgelist,'test2.csv')
File "csv_to_charts.py", line 129, in dictToCSV
w.writerow({k:v.decode(_ENCODING,'ignore') for k,v in d.items()})
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/csv.py", line 148, in writerow
return self.writer.writerow(self._dict_to_list(rowdict))
UnicodeEncodeError: 'ascii' codec can't encode character u'\xb2' in position 3: ordinal not in range(128) 
```

其他排列，例如将 decode 交换为 encode 或最后有问题的行中没有任何内容也会返回错误：

1.  `w.writerow({k:v.encode(_ENCODING) for k,v in d.items()})`返回`'UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 56: ordinal not in range(128)`
2.  `w.writerow({k:v for k,v in d.items()})`返回`UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 56: ordinal not in range(128)`
3.  在[此](https://stackoverflow.com/questions/3285578/csv-dictwriter-unicode-and-utf-8)之后，我更改`with codecs.open(output_file,'wb',encoding=_ENCODING) as f:`为`with open(output_file,'wb') as f:`并仍然收到相同的错误。

排除列表元素或包含此有问题的字符串的键，否则脚本可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:05:44.837

我刚刚按如下方式编辑了您的代码，并且 csv 已成功编写。

```
from django.utils.encoding import smart_str
import csv

def dictToCSV(edgelist, output_file):
    f = open(output_file, 'wb')
    w = csv.DictWriter(f, fieldnames=sorted(edgelist[0].keys()))
    w.writeheader()
    for d in edgelist:
        w.writerow(dict(k=smart_str(v)) for k, v in d.items())
    f.close() 
```

复制 Django 代码并根据需要对其进行自定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:56:30.970

ASCII 编码的严格解释只允许序数 0-127。根据定义，超出该范围的任何值都不是 ASCII。由于 \xc2 和 \xb2 的序数均高于 127，因此它们不能被解释为 ASCII。

*我不是 Python 用户*，[CSV 的 RFC](https://www.rfc-editor.org/rfc/rfc4180)提到 ASCII 作为一种常见用法，但为 MIME 类型定义了一个可选的 'charset' 参数；我想知道您使用的作家是否也可能有“编码”设置？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T00:43:46.823

您的字符串已经采用 UTF-8 格式，而 DictWriter 不适用于`codecs.open`. 按照[那个](https://stackoverflow.com/questions/5838605/python-dictwriter-writing-utf-8-encoded-csv-files)例子：

```
# coding: utf-8
import csv

edgelist = [
    {'articleName': 'Barack Obama', 'editorName': 'Schonbrunn', 'revID': '121844749', 'bytesAdded': '183'},
    {'articleName': 'Barack Obama', 'editorName': 'Eep\xc2\xb2', 'revID': '121862749', 'bytesAdded': '107'}]

with open('out.csv','wb') as f:
    f.write(u'\ufeff'.encode('utf8')) # BOM (optional...Excel needs it to open UTF-8 file properly)
    w = csv.DictWriter(f,sorted(edgelist[0].keys()))
    w.writeheader()
    for d in edgelist:
        w.writerow(d) 
```

输出：

```
articleName,bytesAdded,editorName,revID
Barack Obama,183,Schonbrunn,121844749
Barack Obama,107,Eep²,121862749 
```

注意，您可以`'editorName': 'Eep²'`直接使用而不是`'editorName': 'Eep\xc2\xb2'`. `# coding: utf-8`如果您将源文件保存为 UTF-8，则字节字符串将按 UTF-8 编码。

# file - 尝试上传文件时 Codeigniter 不显示任何内容

> ID：11800428
> 
> 赞同：0
> 
> 时间：2012-08-03T17:24:52.123
> 
> 标签：file, codeigniter, upload

我在 CodeIgniter 中上传文件时遇到问题。这是我的自动加载：`$autoload['helper'] = array('url', 'form', 'file');`

我已经回应了`realpath(APPPATH . '../images');`，这是正确的位置。当我点击提交时，什么也没有发生，也没有显示错误；它只是重新加载视图。

模型：

```
<?php
class Gallery_model extends CI_Model{

var $gallery_path;

function __construct()
{
    parent::__construct();

    $this->gallery_path = realpath(APPPATH . '../images');

}

function do_upload()
{

    //handle userfile
    $config = array(
        'allowed_types' => 'jpg|jpeg|gif|png',
        'upload_path' => $this->gallery_path

    );

    $this->load->library('upload', $config);
    $this->upload->do_upload();

}

}

?> 
```

控制器：

```
<?php
class Gallery extends CI_Controller
{
function index()
{
    $this->load->model('Gallery_model');
    if($this->input->post('upload'))
    {
        //handle upload
        $this->Gallery_model->do_upload();
    }

    $this->load->view('gallery');
}

}

?> 
```

看法：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Gallery</title>

</head>

<body>
<div id="gallery">

</div>

<div id="upload">

<?php

echo form_open_multipart('gallery');
echo form_upload('userfile');
echo form_submit('upload', 'Upload');
echo form_close();
?>

</div>

</body>
</html> 
```

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:42:24.970

确保“应该放置上传的文件夹的路径。该文件夹必须是可写的，并且路径可以是绝对的或相对的。”

我只是复制代码，图像可以上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:05:46.270

在你有的地方`$this->upload->do_upload()`，将其替换为：

```
if(!$this->upload->do_upload()) 
{
    die($this->upload->display_errors());
} 
```

这样您就可以找出错误所在。

# javascript - javascript中setInterval函数的闭包

> ID：11800436
> 
> 赞同：3
> 
> 时间：2012-08-03T17:25:21.107
> 
> 标签：javascript, closures, setinterval

`setInterval`不使用全局变量如何使用？我更愿意将 setInerval 调用的函数的所有变量包装在某种闭包中，如下所示：

```
var wrap = function (f){
 var local1, local2, ...;
 return function () { return f(); }
} 
```

这不起作用，但我的想法是我会通过`wrap(f)`而不是`f`to `setInterval`，以便本地人`f`被很好地包装并且不会污染全局范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:34:22.247

javascript没有动态绑定。（除了这个关键字）

使用匿名函数可以归档你的想法。（它称为闭包）

```
var fnc = function(){
    var local1, local2;

    return function(){
         // using local1, local2
    }
};

setInterval(fnc, 1000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T17:52:46.450

我假设你正在寻找这样的东西......

```
var wrap = function (f){
    var locals = Array.prototype.slice.call(arguments, 1);
    return function () { f.apply(this, locals); }
};

function logger_func() {
    console.log.apply(console, arguments);
}

for (var i = 0; i < 10; i++) {
    setTimeout( wrap(logger_func, i, "foo_" + i), // <-- wrapping i
                i * 1000 );
} 
```

* * *

请注意，现代环境允许您将额外的参数传递给`setTimeout`...

```
for (var i = 0; i < 10; i++) {
    setTimeout(logger_func, i * 1000, i, "foo_" + i);
} 
```

# jquery - Soundcloud iframe 在 iOS 下停止工作

> ID：11800437
> 
> 赞同：10
> 
> 时间：2012-08-03T17:25:22.120
> 
> 标签：jquery, ios, cordova, soundcloud

我编写了 phoneGap/Cordova 代码，其中包括 iframe 中的一些 soundcloud 小部件播放器。该代码在 android 和 iOS 下的桌面浏览器中运行良好。

今天iOS版停止播放音乐。我还尝试在移动 safari 和不同的 iPhone 和模拟器上运行代码，结果相同。

所有其他平台仍在按预期工作。

Xcode 控制台没有显示任何异常，但移动 safari 显示错误：

```
>Unsafe JavaScript attempt to access frame with URL http://domainname/ from frame with URL http://w.soundcloud.com/player/?url=http://api.soundcloud.com/tracks/12345\. Domains, >protocolls and ports must match. 
```

我不确定这以前是否有过，但这是我能找到的最好的。

这是代码的相应部分：

```
 SC.get('/resolve', {
         url : 'http://soundcloud.com/' + trackURL[c]
    }, function(track) {
            SC.get('/tracks/' + track.id + '/comments', function(comments) {
                if (c == 0) {
                $("#track1").append("<div style='height:110px; white-space:normal;overflow:visible;'> <img src='" + track.artwork_url + "' class='trackTitle' > <img src='img/play.png'  id='play1' class='mainPlay'/> <h3 style='margin-top:75px;margin-left:120px; font-size:10px; position:absolute; line-height:10px;'> " + track.title + "</h3></div>");
                $("#track1").css("background", "none");
                $('#sc-widget1').attr("src", "http://w.soundcloud.com/player/?url=http://api.soundcloud.com/tracks/" + trackID[0]);
            }

    var widgetIframe = document.getElementById('sc-widget1');
    widget1 = SC.Widget(widgetIframe);

    $("#play1").on('click', function() {
        widget1.toggle();
    } 
```

我想知道这是否真的是一个跨域问题。非常感谢您的帮助。

谢谢！

小附录：在物理 iphone 上运行时，我有时会得到：

```
Failed to load webpage with error: The operation couldn‚Äôt be completed. (NSURLErrorDomain error -999.) 
```

但情况并非总是如此，它不会对（非）功能产生影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:02:57.787

这可能是由于 soundcloud js 播放器将从 soundcloud 的域（JSON 和实际音频）加载资源，某些浏览器将其定义为不安全。

您可以尝试按照[http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html)使用通配符“*”将所有域列入白名单，看看是否有效。如果是这样，那么您可以将白名单缩小到您从中加载内容的特定域。

我还刚刚注意到您的代码中有对 w.soundcloud.com 的引用，单 w 是否正确？

# c# - 运行时错误 - 找不到指定的模块

> ID：11800439
> 
> 赞同：0
> 
> 时间：2012-08-03T17:25:27.430
> 
> 标签：c#, winforms, visual-studio-2010, windows-7-x64

当我运行编译为 x86 的应用程序时，我得到：

“指定的模块无法找到”

它可以很好地编译为 x64。该应用程序可以从[codeproject](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)下载。我需要在 32 位应用程序中运行这个类库。

我在[depency walker](http://www.dependencywalker.com/)中看到的错误：

> 错误：发现具有不同 CPU 类型的模块。警告：至少没有找到一个延迟加载依赖模块。警告：由于延迟加载依赖模块中缺少导出功能，至少有一个模块存在未解析的导入。

依赖walker中的更多信息...

`IESHIMS.DLL not found`

此代码导致问题：

```
 s_MouseHookHandle = SetWindowsHookEx(
            WH_MOUSE_LL,
            s_MouseDelegate,
            Marshal.GetHINSTANCE(
                Assembly.GetExecutingAssembly().GetModules()[0]),
            0); 
```

后来在路上...

`int errorCode = Marshal.GetLastWin32Error();//error code comes back as 126`

知道如何在 32 位应用程序中运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:17:04.993

通过配置管理器添加一个 x86 解决方案平台，并将两个项目的平台更改为 x86。“在 C# 中处理全局鼠标和键盘挂钩”与 x86 一样工作正常。

[http://msdn.microsoft.com/en-us/library/kwybya3w(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/kwybya3w(v=vs.80).aspx)

# css - 如何使div背景限制在某个区域

> ID：11800449
> 
> 赞同：0
> 
> 时间：2012-08-03T17:25:57.153
> 
> 标签：css, background

我做了一个css例子。我面临问题的主要部分是：

```
#sign
{
 font-size: xx-large;
 color:white;
 background-color:blue;
 font-weight:bolder;
 text-align: right;
 position:right;
} 
```

我正在实施它：

```
<div id="sign">Me and Me</div> 
```

这里背景颜色显示为带状。现在我希望背景颜色仅限于文本区域“我和我”。我必须做哪些修改才能实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:28:32.020

您是否有理由不能只为您想要样式的任何元素设置背景？

* * *

使用[此链接](http://www.dotvoid.com/2011/10/background-color-for-inline-text/)，您可以看到您需要的是一个`display: inline;`电话。我写了一个快速的 jsFiddle 给你看，这应该是你想要的...... [http://jsfiddle.net/NjAUR/](http://jsfiddle.net/NjAUR/)

* * *

看到你想要它在右手边，摆脱`position: right`声明，并使用`float: right`. 这是更新版本... [http://jsfiddle.net/NjAUR/1/](http://jsfiddle.net/NjAUR/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:38:21.340

`display:inline;`与您的 CSS 一起使用。如果您也需要在右侧使用它`float:right`。

查看[演示](http://jsfiddle.net/randeep161/f3p4z/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T17:54:03.840

好的，我将“我和我”文本包裹在`span`. 删除`background-color`的属性`#sign`并将其添加到`span`.

HTML

```
<div id="sign"><span>Me and Me</span></div>​ 
```

CSS

```
#sign
{
    font-size: xx-large;
    color:white;
    font-weight:bolder;
    text-align: right;
    position:right;
}
#sign span { background-color:green; } /* or any color of your choice */ 
```

**[演示链接](http://jsfiddle.net/vMRzX/1/)**

# c++ - 查找长度为 10,000 的字符串的子序列

> ID：11800451
> 
> 赞同：6
> 
> 时间：2012-08-03T17:26:04.590
> 
> 标签：c++, string, permutation

我有一个字符串，其大小可以大到“10,000”。我必须计算那些能被 9 整除的子序列。

子序列：子序列是保持给定字符串的字符**顺序的排列。**例如：如果给定字符串是 10292，那么它的一些子序列是 1、102、10、19、12、12（12 是 2 的两倍）、129、029、09、092 等。有些数字不是给定字符串的子序列是：201（2 和 0 不能在 1 之前）、921、0291 等。

我尝试使用位移生成给定字符串的所有子序列（powerset），并检查每个字符串是否可被 9 整除。但只要字符串的长度<=10，这就可以正常工作。之后，我没有得到正确的子序列（一些子序列显示为负数）。

下面是我的代码：

```
 scanf("%s", &str); //input string 

    int n=strlen(str); //find length of string

    //loop to generate subsequences
    for(i=1;i<(1<<n);++i){

        string subseq;

        for(j=0;j<n;++j){

            if(i&(1<<j)){

                subseq+=str[j]; // generate subsequence
            }
        }

        //convert generated subseq to int; number is 'long' tpye
        number=atol(subseq.c_str());printf("%ld\n", number); 

        //ignore 0 and check if number divisible by 9
        if(number!=0&&number%9==0)count++;
    }

        printf("%ld\n", count); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:00:33.287

由于一个数字可以被 9 整除当且仅当它的数字之和可以被 9 整除，所以你可以使用`O(n)`递归算法来解决这个问题。

这个想法如下：在每一步，将子序列分成两个并确定（递归地）有多少序列的数字之和为`i % 9`，`i`范围从`0`到`8`。然后，您通过以下方式“合并”两个表，为整个范围构建同一个表`O(1)`。假设`L`是左侧拆分表和右侧拆分表`R`，您需要`F`为整个范围构建表。

然后你有：

```
for (i = 0; i < 9; i++) {
  F[i] = L[i] + R[i];
  for (j = 0; j < 9; j++) {
    if (j <= i)
      F[i] += L[j] * R[i - j]
    else
      F[i] += L[j] * R[9 + i - j]
  }
} 
```

只有一位数字的子序列的基本情况`d`很明显：只需将`F[d % 9] = 1`所有其他条目设置为零。

完整的 C++11 实现：

```
#include <iostream>
#include <array>
#include <tuple>
#include <string>

typedef std::array<unsigned int, 9> table;

using std::tuple;
using std::string;

table count(string::iterator beg, string::iterator end)
{
    table F;
    std::fill(F.begin(), F.end(), 0);
    if (beg == end)
        return F;
    if (beg + 1 == end) {
        F[(*beg - '0') % 9] = 1;
        return F;
    }
    size_t distance = std::distance(beg, end);
    string::iterator mid = beg + (distance / 2);
    table L = count(beg, mid);
    table R = count(mid, end);

    for (unsigned int i = 0; i < 9; i++) {
        F[i] = L[i] + R[i];
        for(unsigned int j = 0; j < 9; j++) {
            if (j <= i)
                F[i] += L[j] * R[i - j];
            else
                F[i] += L[j] * R[9 + i - j];
        }
    }
    return F;
}

table count(std::string s)
{
    return count(s.begin(), s.end());
}

int main(void)
{
    using std::cout;
    using std::endl;
    cout << count("1234")[0] << endl;
    cout << count("12349")[0] << endl;
    cout << count("9999")[0] << endl;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T18:19:26.287

我有个主意！

由于您只需要*计算*子字符串，因此您不必关心它们实际上*是*什么。因此，您可以只存储它们可能总和的计数。

那么，如果你有一个函数可以组合两个子串集的计数表，并给你它们组合的计数呢？

既然我知道这是一个可怕的解释，我会举一个例子。假设你得到了号码：

```
2493 
```

将其分成两半并继续拆分，直到获得单个数字：

```
 2493
   /  \
 24    93
 /\    /\
2  4  9  3 
```

可以`2`总结什么？容易： `2`。并且`4`只能求和`4`。您可以构建每个值有多少子字符串总和的表（mod 9）：

```
 0 1 2 3 4 5 6 7 8
2: 0 0 1 0 0 0 0 0 0
4: 0 0 0 0 1 0 0 0 0
9: 1 0 0 0 0 0 0 0 0
3: 0 0 0 1 0 0 0 0 0 
```

组合两个表很容易。添加第一个表、第二个表以及两个 mod 9 的每个组合（对于第一个组合，这相当于`2`、`4`和`24`；对于第二个、`9`、`3`和`93`）：

```
 0 1 2 3 4 5 6 7 8
24: 0 0 1 0 1 0 1 0 0
93: 1 0 0 2 0 0 0 0 0 
```

然后再做一次：

```
 0 1 2 3 4 5 6 7 8
2493: 3 0 2 2 2 2 2 2 0 
```

这就是你的答案，坐在`0`专栏里： `3`。这对应于子字符串`243`、`2493`和`9`。但是，您不知道，因为您只存储了计数 - 幸运的是，您不在乎！

一旦实施，这将为您提供`O(n)`性能 - 您只需弄清楚如何在`O(1)`. 但是，嘿 - 作业，对吧？祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:33:26.943

如果你使用**int**那么你不应该把它左移太多。如果这样做，则设置符号位。使用**无符号整数**。或者不要离开太多。如果你坚持**int** ，你可以在完成后右移。

为了

```
printf("%ld\n", count); 
```

printf 在显示长整数类型时可能会出现问题。你试过 cout 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T18:04:25.317

这是根据 Akappa 算法的 C++ 代码。然而，该算法对于包含一个或多个 0 的数字（即在“10292”和“0189”的情况下失败）但对“1292”和“189”给出正确答案。如果有人可以调试它以给出所有情况的答案，将不胜感激。

```
#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<cmath>
#include<string>
#include<cstring>
#include<vector>
#include<stack>
#include<sstream>
#include<algorithm>
#include<cctype>
#include<list>
#include<set>
#include<set>
#include<map>
using namespace std;
typedef vector<int> table;
table count(string::iterator beg, string::iterator end)
{

    table F(9);
    std::fill(F.begin(), F.end(), 0);
    if (beg == end)
        return F;

    if (beg + 1 == end) {
        F[(*beg - '0') % 9] = 1;
        return F;
    }

    size_t distance = std::distance(beg, end);
    string::iterator mid = beg + (distance / 2);
    table L = count(beg, mid);
    table R = count(mid, end);

    for (unsigned int i = 0; i < 9; i++) {
        F[i] = L[i] + R[i];
        for(unsigned int j = 0; j < 9; j++) {
            if (j <= i)
                F[i] += L[j] * R[i - j];
            else
                F[i] += L[j] * R[9 + i - j];
        }
    }
    return F;
}

table count(std::string s)
{

    return count(s.begin(), s.end());
}

int main()
{

     cout << count("1234")[0] << endl;

    cout << count("12349")[0] << endl;

    cout << count("9999")[0] << endl;

    cout << count("1292")[0] << endl;cout << count("189")[0] << endl;
    cout << count("10292")[0] << endl;cout << count("0189")[0] << endl;
    system("pause");

   } 
```

# java - Java - 小程序异常

> ID：11800453
> 
> 赞同：1
> 
> 时间：2012-08-03T17:26:09.867
> 
> 标签：java, mysql, jar, applet, policy

我有一个包含 1 个 JApplet 的 Java 项目。我能够在桌面模式下运行小程序（将小程序添加到 main[] 方法中的框架）。但它在浏览器中不起作用。得到这个错误：我已经签署了所有的罐子。

我相信它与mysql连接器jar有关。

有任何想法吗？

```
Exception occurred: java.lang.ExceptionInInitializerError (uncaught)"thread=AWT-
EventQueue-1", java.awt.EventDispatchThread.run(), line=156 bci=152 
```

如果我将 grant all 添加到 java.policy 它运行良好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:29:30.560

您应该确保：

*   您的[小程序已签名](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/signed.html)以允许数据库连接。
*   您的 mysql 连接器 jar 在您的“下载”路径上可用，就像您的小程序 jar 文件一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:21:09.287

从网络服务器运行应用程序解决了这个问题。

# jquery-plugins - 虚拟机中的 Android X86 是否代表了 Android Emulator 的真正替代品？

> ID：11800463
> 
> 赞同：6
> 
> 时间：2012-08-03T17:26:34.330
> 
> 标签：jquery-plugins, cordova, android-emulator, android-x86

我正在使用 jQuery Mobile、Phonegap 和用于 Google 地图的 jQuery 插件开发一个 Android 应用程序。模拟器加载网页的时间太长，使我的代码测试成为一个痛苦的操作。我在虚拟机上安装了 Android x86 并将其链接到 Eclipse 以调试我的应用程序。

此解决方案比模拟器更快，但问题是我的应用程序总是崩溃，而模拟器中并非如此。这让我产生疑问：虚拟机上的 Android x86 是模拟器的稳定替代品吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T14:19:19.420

根据我的经验，答案肯定**是 Yes**。

与您描述的情况不同，我的应用程序永远不会在 Android-x86 VM 上崩溃，并且由于 SDK 的模拟器[不支持麦克风输入](https://stackoverflow.com/questions/12008104/is-there-any-android-emulator-that-supports-microphone-input)，它实际上是测试我的应用程序的唯一方法，而无需为[每个变体](http://en.wikipedia.org/wiki/Android_version_history)购买真实设备安卓。

此外，正如您所指出的，它运行***得****更快*。与 Google 声称的“接近原生速度”相反，Android 的 SDK 运行速度比 Android-x86 慢得多，而且肯定比真正的手机或平板电脑慢。

您的应用程序在 Android-x86 VM 上运行时崩溃的事实实际上可能是一件好事：有机会检查如何使您的应用程序在[不可预见的情况下](https://stackoverflow.com/a/11353687/562776)更加健壮（您知道，那里有许多类型的设备）。

[Android-x86](http://www.makeuseof.com/tag/install-android-netbook/)的唯一缺点是它仅适用于 ICS (Android 4.0.4)，这意味着您无法在 Jelly Bean (Android 4.1.x) 中测试您的应用程序。这可以通过构建您自己的[VirtualBox](http://www.buildroid.org/blog/?page_id=38) - [AOSP](http://www.buildroid.org/blog/?page_id=121)来解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T05:11:15.323

许多虚拟化软件和系统依赖于 CPU（VT 等）的硬件虚拟化能力，但即使没有它，VirtualBox 也能很好地（快速）运行 Android x86 (eeepc iso)。有明显的限制，但请记住，任何模拟器都只能走这么远。

如果你的 CPU 不支持硬件虚拟化，这是一个非常好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:36:09.623

Google 的 Android SDK Emulator 从版本 17 开始原生。

谷歌在他们的 ADT 版本 17[变更日志中说](http://android-developers.blogspot.co.uk/2012/03/updated-sdk-tools-and-adt-revision-17.html#links)

> 其中一项新功能是对 Android 模拟器的重大更新——英特尔对 AOSP 的贡献意味着该模拟器现在可以在 Windows 和 Mac OS X 上以接近本机的速度运行。

因此，如果您使用最新版本的 sdktools 和仿真器，您应该不会看到应用程序运行速度的巨大差异。

# facebook - Facebook Open Graph 未在时间轴上显示

> ID：11800466
> 
> 赞同：5
> 
> 时间：2012-08-03T17:26:37.820
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, fb-graph

我在我的应用程序中使用 FB Open Graph。它没有完全工作。当我发布一个对象时，它会出现在用户最近的活动中；但是，它并没有出现在他们的时间线上。元数据没有错误，我正在使用 FBGraph gem，但是当我使用 curl 时它也不起作用。有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-13T00:45:12.673

您是否尝试在您的 URL 中使用 'fb:explicitly_shared=true'。参考：[https ://developers.facebook.com/docs/technical-guides/opengraph/explicit-sharing/](https://developers.facebook.com/docs/technical-guides/opengraph/explicit-sharing/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:49:38.313

当您处于开发模式且您的操作尚未获得 Facebook 批准时，发布的操作仅对您和对您的 FB 应用程序具有开发人员、管理员或测试人员权限的其他人可见。

请参阅：[Facebook 操作提交](http://developers.facebook.com/docs/technical-guides/opengraph/opengraph-tutorial/#submit)

此外，打开的图形操作将不再出现在用户的新闻提要甚至 Ticker 中：http: [//developers.facebook.com/bugs/398546930211799/](http://developers.facebook.com/bugs/398546930211799/)。因此，您不应期望在您的应用程序中执行的活动会出现在用户的时间线中，除非这些活动被标记为“明确共享”，即使那样也不能保证它们会出现。

只有直接的、活跃的股票或多或少地保证会出现在时间轴中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:30:11.257

您是否提交了您的操作以获得 Facebook 的批准？如果您不这样做，它将仅适用于您的 Facebook 帐户。

另外，您确定在用户进行身份验证时请求正确的权限，例如“publish_stream”吗？

# string - 为 Excel Visual Basic 创建字符串编辑宏

> ID：11800468
> 
> 赞同：0
> 
> 时间：2012-08-03T17:26:43.683
> 
> 标签：string, excel, vba

我需要帮助为 Visual Basic 中的 excel 创建字符串编辑宏。我将描述我需要做的事情，但如果无法获得完整的答案，任何一点点信息都会对我有所帮助。我正在创建一个重定向列表以导入网站。在我的 Excel 表的 A 列中，我有 3,500 个 URL，看起来像这样[http://www.realitynation.com/tv-shows/snooki-jwoww/drag-queen-lap-dances/17772/attachment/02_shot_jenni_snooki_081-2/](http://www.realitynation.com/tv-shows/snooki-jwoww/drag-queen-lap-dances/17772/attachment/02_shot_jenni_snooki_081-2/)我需要为这些页面创建重定向列表。它需要重定向到的页面是[http://www.realitynation.com/tv-shows/snooki-jwoww/drag-queen-lap-dances/17772/](http://www.realitynation.com/tv-shows/snooki-jwoww/drag-queen-lap-dances/17772/)看起来熟悉？那是因为它是去掉“附件/...”的同一个 URL。我想创建一个可以为我执行此操作的宏并将结果放在 B 列中。问题是我有大量的 Java 背景而不是 Visual Basic，事实上我什至不知道可以这样做在 Excel 中直到今天。无论如何，我没有要求任何人解决我的问题，但任何帮助或指导将不胜感激。同时，我将研究 VB 中的一些字符串编辑来尝试解决这个问题。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:36:55.567

您不需要为此使用 vba。将此公式复制到单元格 B1 中并将其复制下来。

```
=LEFT(A1,SEARCH("/attachment",A1,1)) 
```

如果你仍然想要 VBA，那么看看这个

```
Sub Sample()
    Dim ws As Worksheet
    Dim lRow As Long

    Set ws = Sheets("Sheet1")

    With ws
        lRow = .Range("A" & .Rows.Count).End(xlUp).Row

        .Range("B1:B" & lRow).Formula = "=LEFT(A1,SEARCH(""/attachment"",A1,1))"
    End With
End Sub 
```

# dns - 我可以使用 Bluehost 作为 .fr 域的主机，Gandi.net 作为我的注册商吗？

> ID：11800470
> 
> 赞同：0
> 
> 时间：2012-08-03T17:27:02.810
> 
> 标签：dns, bluehost

**我在 Gandi.net 注册了一个 .fr 域名。昨天我订阅了 Bluehost 进行托管**（作为初学者，通过 Bluehost 安装 Wordpress 更容易）。

我不得不更改 Gandi 上的 DNS。我这样做了，并且还在 Gandi 上创建了一个 DNS 区域（不确定我是否应该两者都做）。它奏效了，我今天开始创建我的网站。

突然间，网站刚刚切换回 Gandi 作为主机（因为显示的是默认的 Gandi 页面而不是我的 Wordpress 页面）。

**现在我刚刚阅读了这个页面：** [https ://my.bluehost.com/cgi/help/536](https://my.bluehost.com/cgi/help/536)

**这是否意味着我根本无法通过 Bluehost 托管 .fr 域？** 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:44:59.827

如文章所述，从 Bluehost 获取服务器的 A 记录（只需向他们索取即可），然后转到 Gandi 的控制面板并将 A 记录设置为该 IP。

如果您还在该域上使用电子邮件，请以相同的方式设置 MX 记录（向 Bluehost 询问并在 Gandi 的控制面板中更改它）。

# html - django 形式与传统形式

> ID：11800471
> 
> 赞同：6
> 
> 时间：2012-08-03T17:27:04.940
> 
> 标签：html, django, django-models, django-forms

我目前正在制作一个 django 网站，我对使用 Django-Forms 和传统的手工编码 HTML 表单感到困惑。HTML 表单在很多方面都对我有利，但我也尝试过 django 表单，它们肯定有其优势。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:44:47.407

在我看来，当您有一个简单的应用程序以接近您希望将其存储在数据库中的方式从用户那里获取数据时，Django 表单非常棒。在这种情况下，您可以简单地编写模型并使用模型表单为您的表单生成正确的 HTML。

您还可以使用表单从用户那里获取与模型不对应的数据，方法是使用普通表单并定义其属性。

使用 Django 表单，您还可以免费获得一些验证，您可以将字段设为可选或必填，还可以创建下拉选项。

当您有某些要以自定义方式显示的字段时，情况会变得更加困难。您仍然可以使用 Django 表单，但需要更加努力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T17:37:26.580

将 Django 表单视为 HTML 表单的 DRY。
使用 Django 表单，标准表单 HTML 会为您自动生成，您只需为要自定义表单的位置编写代码。
Django 表单还为您处理表单验证，只有当您需要一些特殊情况验证时，您才可以使用自己编写的代码进行覆盖。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T17:33:29.067

如果您使用 django 开发您的网站，我认为最好只使用 django-forms，因为它们已内置验证并且可以轻松与您的模型链接。您还将拥有一致的格式，并且不需要每次都输入 html。

您可能还想查看[脆皮表格](https://github.com/maraujop/django-crispy-forms/)以进行更多自定义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T17:38:27.407

Django 表单是一种在页面上生成表单并对其进行管理的方式。您可以在页面上手动编写表单代码，并且只要您使用与表单类期望的字段名称兼容的字段名称，您就可以使用表单类与响应中发送的数据进行交互。

最终，django forms 肯定会让你的生活更轻松。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-12T11:09:08.877

Django 表单的主要目的是验证数据。

您可以将它们用于未通过 HTML POST 提交的数据。将它们渲染为 HTML 是他们所做的其他事情，但这不是他们的主要目的。

# ruby - 以编程方式将 VPC 节点添加到 ELB

> ID：11800472
> 
> 赞同：3
> 
> 时间：2012-08-03T17:27:08.677
> 
> 标签：ruby, rubygems, amazon-web-services

以下代码旨在将 VPC 中新部署的 EC2 实例添加到负载均衡器。（这很明显是测试/虚拟代码，但实际系统中的一般工作流程是相同的）

```
require 'yaml'
gem 'aws-sdk','1.6.0'
require 'aws-sdk'

AWS.config({
  :access_key_id => KEY,
  :secret_access_key => SECRET_KEY
})
ec2 = AWS::EC2.new
elb = AWS::ELB.new

i = ec2.instances["i-abcd1234"]
elb.load_balancers["lb-name"].instances.register(i) 
```

当我运行此代码时，我收到此错误：

```
AWS::ELB::Errors::ValidationError: ELB in VPC is not supported in this version of API. Please try 2011-11-15 or newer. 
```

我的 aws-sdk gem 是通过 RubyGems 获得的最新版本，它已于本周更新。这只是 Ruby SDK for AWS 中不可用的功能吗？我可以通过此 gem 或其他方式使用 Ruby 代码将 VPC 节点添加到负载均衡器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T15:43:22.507

已解决：此错误是 aws-sdk gem 的 ELB 部分使用旧版本的 AWS API 的结果。2012 年 8 月 6 日发布了一个新的 gem 版本 (1.6.1)，它导致 ELB 使用 2012-06-01 版本的 API，现在可以使用问题中的代码将实例添加到 ELB。

# java - 在 java tcp 中导入 eneter 时出错

> ID：11800476
> 
> 赞同：0
> 
> 时间：2012-08-03T17:27:44.090
> 
> 标签：java, android, tcpserver

我正在开发一个 tcp 服务器通信器，我正在使用在这个[网站](http://www.codeproject.com/Articles/340714/Android-How-to-communicate-with-NET-application-vi)上找到的编码。我在导入 eneters 时遇到错误，前 5 个导入。它说它无法解决。我该怎么做才能获得这些进口？

```
import eneter.messaging.diagnostic.EneterTrace;
import eneter.messaging.endpoints.typedmessages.*;
import eneter.messaging.messagingsystems.messagingsystembase.*;
import eneter.messaging.messagingsystems.tcpmessagingsystem.TcpMessagingSystemFactory;
import eneter.net.system.EventHandler;
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.*;

public class AndroidNetCommunicationClientActivity extends Activity {
    // Request message type
    // The message must have the same name as declared in the service.
    // Also, if the message is the inner class, then it must be static.
    public static class MyRequest {
        public String Text;
    }

    // Response message type
    // The message must have the same name as declared in the service.
    // Also, if the message is the inner class, then it must be static.
    public static class MyResponse {
        public int Length;
    }

    // UI controls
    private Handler myRefresh = new Handler();
    private EditText myMessageTextEditText;
    private EditText myResponseEditText;
    private Button mySendRequestBtn;

    // Sender sending MyRequest and as a response receiving MyResponse.
    private IDuplexTypedMessageSender<MyResponse, MyRequest> mySender;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tcp_server);

        // Get UI widgets.
        myMessageTextEditText = (EditText) findViewById(R.id.messageTextEditText);
        myResponseEditText = (EditText) findViewById(R.id.messageLengthEditText);
        mySendRequestBtn = (Button) findViewById(R.id.sendRequestBtn);

        // Subscribe to handle the button click.
        mySendRequestBtn.setOnClickListener(myOnSendRequestClickHandler);

        try {
            openConnection();
        } catch (Exception err) {
            EneterTrace.error("Open connection failed.", err);
        }
    }

    @Override
    public void onDestroy() {
        // Stop listening to response messages.
        mySender.detachDuplexOutputChannel();
    }

    private void openConnection() throws Exception {
        // Create sender sending MyRequest and as a response receiving
        // MyResponse
        IDuplexTypedMessagesFactory aSenderFactory = new DuplexTypedMessagesFactory();
        mySender = aSenderFactory.createDuplexTypedMessageSender(
                MyResponse.class, MyRequest.class);

        // Subscribe to receive response messages.
        mySender.responseReceived().subscribe(myOnResponseHandler);

        // Create TCP messaging for the communication.
        // Note: 10.0.2.2 is a special alias to the loopback (127.0.0.1)
        // on the development machine
        IMessagingSystemFactory aMessaging = new TcpMessagingSystemFactory();
        IDuplexOutputChannel anOutputChannel = aMessaging
                .createDuplexOutputChannel("tcp://10.0.2.2:8060/");

        // Attach the output channel to the sender and be able to send
        // messages and receive responses.
        mySender.attachDuplexOutputChannel(anOutputChannel);
    }

    private void onSendRequest(View v) {
        // Create the request message.
        MyRequest aRequestMsg = new MyRequest();
        aRequestMsg.Text = myMessageTextEditText.getText().toString();

        // Send the request message.
        try {
            mySender.sendRequestMessage(aRequestMsg);
        } catch (Exception err) {
            EneterTrace.error("Sending the message failed.", err);
        }
    }

    private void onResponseReceived(Object sender,
            final TypedResponseReceivedEventArgs<MyResponse> e) {
        // Display the result - returned number of characters.
        // Note: Marshal displaying to the correct UI thread.
        myRefresh.post(new Runnable() {
            @Override
            public void run() {
                myResponseEditText.setText(Integer.toString(e
                        .getResponseMessage().Length));
            }
        });
    }

    private EventHandler<TypedResponseReceivedEventArgs<MyResponse>> myOnResponseHandler

    = new EventHandler<TypedResponseReceivedEventArgs<MyResponse>>() {
        @Override
        public void onEvent(Object sender,
                TypedResponseReceivedEventArgs<MyResponse> e) {
            onResponseReceived(sender, e);
        }
    };

    private OnClickListener myOnSendRequestClickHandler = new OnClickListener() {
        public void onClick(View v) {
            onSendRequest(v);
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:59:04.213

我从 eneter 网站下载了 jar 文件。这样做之后，我能够更改我的构建路径，并且 eclipse 能够理解导入。

# iphone - XCode 4.4 如何将文件永久添加到项目中

> ID：11800479
> 
> 赞同：0
> 
> 时间：2012-08-03T17:28:11.707
> 
> 标签：iphone, ios, xcode, file, settings

我刚开始iOS开发，如果这太简单了，请原谅

我在 XCode 中打开了一个项目，当我创建一个新的 storyboard/xib/view.h/view.m 文件时，它从文件夹层次结构中很好地显示在 xcode 中。但是，每当我退出 xcode 并再次启动 xcode 时，文件就会从文件夹层次结构中消失。我必须手动然后右键单击父文件夹并每次都执行“将文件添加到'项目'”。（在我重新启动 XCode 之前它工作得很好）

我的配置有什么问题？我的 xcode.proj 没有被修改还是什么？（我认为它在版本控制下被锁定）如果是这样，我在哪里可以找到这个文件？

还是我缺少其他东西？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:30:28.800

.xcodeproj 目录中的 project.pbxproj 是写保护的。使用您的源代码控制系统检查它（或使用像 git 这样不锁定文件的体面的系统：）。

# c# - web.downloadstring 路径中 的非法字符

> ID：11800480
> 
> 赞同：5
> 
> 时间：2012-08-03T17:28:13.450
> 
> 标签：c#, webforms

我正在尝试使用正则表达式从网站检索名称。但是，当我运行程序时，使用“路径中的非法字符”出现错误。这是代码：

```
private void button1_Click(object sender, EventArgs e)
{
    List<string> givenNames = new List<string>();

    WebClient web = new WebClient();

    for (int i = 10000; i <= 33852; i++)
    {   
        string numberurl = i.ToString();
        string mainurl = "www.cpso.on.ca/docsearch/details.aspx?view=1&id=+" + numberurl;
        String html = web.DownloadString(mainurl);

        Match m = Regex.Match(html, @"</strong>\s*(.+?)\s*&nbsp;", RegexOptions.Singleline);

        string givenName = m.Groups[1].Value;
        givenNames.Add(givenName);
    }
    listBox1.DataSource = givenNames; 
} 
```

错误发生在`String html = web.DownloadString(mainurl);`。我尝试使用`HttpUtility.UrlEncode`，但仍然无法正常工作。我很感激帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T17:32:37.960

您需要在 URL 中包含 http://。

```
string mainurl = "http://www.cpso.on.ca/docsearch/details.aspx?view=1&id=+" + numberurl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-16T14:51:32.647

我的 URL 是从 API 端点获取的，因此它作为带引号的字符串返回，例如`"\"http://someurl.com/somefile.txt\""`. 引用的字符串是在尝试下载文件时让 WebClient 感到不安的原因。

为了修复它，我在这个字符串上调用了方法`myUrl.Trim('"')`，使它从字符串的开头和结尾删除引号。

在此之后，字符串变为`"http://someurl.com/somefile.txt"`（没有内引号），然后网络客户端能够成功地从 URL 下载文件。

# java-me - 如何在 j2me (java) 的列表和表单屏幕上显示图像

> ID：11800481
> 
> 赞同：0
> 
> 时间：2012-08-03T17:28:15.980
> 
> 标签：java-me, lcdui, midp-2.0

当我们创建这样的列表时，我想在 LCDUI 列表屏幕标题上显示图像并形成屏幕标题（顶部） List list=new List("Title",List.Implicit); 然后将在列表屏幕标题（顶部）上看到标题，对于表单也类似但是，我的要求是在列表屏幕标题（顶部）的“标题”旁边显示图像并形成屏幕标题？我该如何显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:41:15.857

您可以使用以下代码

List list = new List("Title", List.IMPLICIT, listText, listImage);

# php - 基于位置的搜索的搜索方法

> ID：11800484
> 
> 赞同：1
> 
> 时间：2012-08-03T17:28:33.180
> 
> 标签：php, mysql, xml, search, bitmapdata

我需要实现基于位置的搜索功能，用户可以选择城市和位置（城市内），继续提及关键字并单击搜索。假设我们有 10 个城市，每个城市平均有 100 个地方。将考虑用户提供的位置作为起点并在远离用户位置的地方对其他结果进行排序（这样，特定关键字的城市结果将保持不变，只有排序会改变）。 php 中的最佳方法？

1）计算各地之间的距离，预先存储在mySqldatabase中。这将意味着地区的 100X100 矩阵（每个地区与其他地区的距离）。还有与 db 中的城市一样多的表。所以 10 个这样的表 + 添加更多的可能性。这仅用于订购。

2）将所有数据放在一个XML而不是mysql数据库中。

3) 使用位图和压缩图像？

将性能和可扩展性视为主要标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:27:09.807

您首先按城市和标签过滤数据，然后希望按距离对结果进行*排序*，而不是按距离*过滤*。即，即使是最远的点也应该从数据库中检索。在这种情况下，如果您在执行请求时计算与给定位置的距离，则不应该有太多的惩罚。毕竟，这只是每行一个公式评估，然后按该值对结果进行排序。

如果您的数据是使用纬度和经度坐标给出的，那么理论上这将意味着使用复杂的公式计算球体上测地线的长度。但是在一个城市中，地理网格可以合理地假设为矩形（不是正方形！）。因此，如果您存储每个城市的一纬度和一经度之间的比率，那么您可以将所有坐标转换为方形网格，计算与输入位置在*x*和*y*方向上的差异，平方并添加它们。无需取平方根，因为按平方排序也可以。

这些方面的东西：

```
 SELECT location.name, location.lat, location.lon, …
    FROM locations, cities
   WHERE location.city = city.id
     AND city.name = ?
     AND location.tag = ?
ORDER BY POW((location.lat - ?), 2) + POW((location.lon - ?)*city.geoaspect, 2) 
```

其中参数是城市名称、所选标签和输入的纬度和经度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:46:43.213

您还可以使用矩形网格计算 geohash，无需 Mercantor 投影和 harvesine 公式，或使用 mysql 中的点和空间索引数据结构。然后计算查询中的距离会快一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-31T07:36:34.070

这是我试图提供一次示例查询的内容。

创建表`markers`（ `id`INT NOT NULL AUTO_INCREMENT PRIMARY KEY， `name`VARCHAR（60）NOT NULL， `address`VARCHAR（80）NOT NULL， `lat`FLOAT（10,6）NOT NULL， `lng`FLOAT（10,6）NOT NULL）引擎= MYISAM;

// 询问

SELECT id, ( 3959 * acos( cos( 弧度(37) ) * cos( 弧度( lat ) ) * cos( 弧度( lng ) - 弧度(-122) ) + sin( 弧度(37) ) * sin( 弧度( lat ) ) ) ) AS距离标记 HAVING distance < 25 ORDER BY distance LIMIT 0 , 20;

# javascript - 用于操作的 Javascript 字符串验证

> ID：11800495
> 
> 赞同：2
> 
> 时间：2012-08-03T17:29:15.497
> 
> 标签：javascript, string, validation

我有一串数据，通常会这样读：“0010,0010,0030”。如果所有数字都不匹配，我需要通过设置警报来向用户验证该字符串。因此，如果字符串看起来像“0010, 0010, 0010”，那么就没有问题，我的逻辑按计划进行。但如果它看起来像这样：“0010,0010,0030”，那么我需要提醒用户他们选择了错误的操作（其中 0010 和 0030 是逻辑中的操作），他们必须重新选择。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:31:33.277

只需拆分字符串`,`，然后比较条目。

类似于以下内容（我**没有**测试过，但它是一个大纲）

```
var input = "0010, 0010, 0010",
    tokens = input.split(','),
    result = true;

for (var i = 0; i <= tokens.length - 1; i++) {
   if (i <= tokens.length - 2) {
      // get rid of whitespace
      if (tokens[i].replace(/\s/g, '') !== tokens[i+1].replace(/\s/g, '')) result = false;
   }    
}

alert(result);​ 
```

[这是一个小提琴。](http://jsfiddle.net/WeJZ8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:38:26.067

试试这个：

```
var split="0010, 0010, 0030".split(", ");
var ok = true;
for (i = 0; i < split.length - 1; i++)
{
   if (split[i] != split[i + 1])
   {
      //reset_logic();
      ok = false;
      break;
   }
}
if (ok)
{
   //all_good();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:40:29.043

我会推荐一个正则表达式：

```
// gives you an array with values "0010", "0010", and "0030"
var matches = '0010, 0010, 0030'.match(/(\d+)/); 
```

然后只需循环匹配并比较它们的邻居。如果有任何不常见的，你有你的答案，所以跳出循环。

```
var allMatch = true;
for (var i = 1; i < matches.length; i++) {
    if (matches[i-1] !== matches[i]) {
        allMatch = false;
        break;
    }
}

if (allMatch) {
    ...
} else {
    ...
} 
```

# python - 为什么设置语言环境不能修复此 UnicodeError？

> ID：11800499
> 
> 赞同：6
> 
> 时间：2012-08-03T17:29:38.007
> 
> 标签：python, unicode, utf-8, locale

我有以下 Python 脚本：

```
# -*- coding: utf-8 -*-
import sys, locale
locale.setlocale(locale.LC_ALL, 'en_US.utf8')
print '肥皂' # This works
print u'肥皂' 
```

运行脚本时，我得到：

```
肥皂
Traceback (most recent call last):
  File "../pycli/samples/x.py", line 5, in <module>
    print u'肥皂'
UnicodeEncodeError: 'latin-1' codec can't encode characters in position 0-1: ordinal not in range(256) 
```

但是，当我在 shell 中明确设置 LC_ALL 环境变量时，它就可以工作了

```
export LC_ALL=en_US.utf8 
```

所以我想知道为什么 setlocale() 没有相同的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:37:16.177

该值仅用于指定解释器启动时输出的默认字符集。换句话说，一旦脚本启动并运行，您就为时已晚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:21:23.067

Unicode 就像只存在于程序中的文本概念。

它的优点是它可以支持任何字符，但缺点是它不能按原样输出，因此必须编码为某种可以显示的编码。

所以，你想要一些输入，它会被编码，你必须解码它，如果你想输出 unicode，你必须对其进行编码。

如果您不这样做，python 将尝试为您执行此操作（使用 ASCII，或您的环境中可能找到的内容，如您的情况），但您不应该依赖它，因为 python 可能会出错（如您的案子）。

非常有趣的是，您会注意到在您的情况下您的终端支持 utf8，但是 python 没有意识到它可能正在使用 utf8。

这就是为什么您应该*始终*对输出进行编码和对输入进行解码（最好尽可能使用 utf8！）

您可以使用 unicode 编码方法和字符串解码方法来实现这一点，并将编码作为参数。

# android - Android - 将 RelativeLayout 中的视图与 TableLayout 中的视图对齐

> ID：11800503
> 
> 赞同：2
> 
> 时间：2012-08-03T17:29:51.417
> 
> 标签：android, android-layout

我的根布局是一个`RelativeLayout`，其中包含一些 TextViews、Buttons 和 ImageViews。在屏幕的底部，我有一个`TableLayout`代表 4x4 网格的 TextViews。我想显示一个与网格中每个 TextView 的**右下角对齐的视图（例如 TextView）。**

所以我有一个

```
 <TableLayout ...>
   <TableRow ...>
     <TextView android:id="@+id/x0y0".../>
     <TextView android:id="@+id/x0y1".../>
   ....
 </TableLayout>
 ...
 <TextView  android:layout_alignTop="@id/x0y0"
    android:layout_alignLeft="@id/x0y0" ... />
 <TextView  android:layout_alignTop="@id/x1y1"
    android:layout_alignLeft="@id/x1y1" ... /> 
```

但它位于屏幕的**左上角**。我怀疑RelativeLayout 中的视图只能与同一个RelativeLayout 中的另一个视图对齐，但我希望得到确认，或者更好的是关于如何解决这个问题的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:35:45.477

没错，relativelayout 只能对齐它的子节点。您需要表格中的每个单元格都包含一个相对布局，伪代码：

```
<TableRow ...>
 <RelativeLayout ...>
  <TextView id=id/x0y0 alignParentTop="true" alignParentLeft="true" ...>
  <View alignParentRight="true" layout_below=id/x0y0 ...>
 </RelativeLayout> 
```

您也可以使用垂直 LinearLayout 和重力来右对齐新视图。

# css - css选择列表和列表项

> ID：11800504
> 
> 赞同：0
> 
> 时间：2012-08-03T17:29:51.467
> 
> 标签：css, list

我有一个 css 文件，它的部分看起来像

```
.mylist ul { ..configuration .. }
.mylist li { ..configuration .. } 
```

如果 html 看起来像

```
<div class="mylist">
  <ul>
    <li>item1</li>
  </ul>
</div> 
```

样式应用得当。

如果我做

```
 <ul class="mylist">
    <li>item1</li>
  </ul> 
```

似乎不是。

为什么我需要那个额外的 div 标签？在这两种情况下，样式不应该以相同的方式应用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:33:56.863

因为`.mylist ul`表示 的`ul`as 子项`.mylist`。

尝试这个：

```
ul.mylist { ..configuration .. }
ul.mylist li { ..configuration .. } 
```

和：

```
<ul class="mylist">
  <li>item1</li>
</ul> 
```

希望这可以帮助。

# css - 为什么这块文本不垂直居中，只有一行？

> ID：11800510
> 
> 赞同：0
> 
> 时间：2012-08-03T17:30:15.340
> 
> 标签：css, html

[http://tinkerbin.com/ojXJuQfl](http://tinkerbin.com/ojXJuQfl)

我设法使用来自另一个用户的指令并将文本垂直居中，但它不允许我将整个内容垂直居中。我想如果我将文本放在它自己的 div 中，它会这样做，但它没有。如何在箭头旁边居中 PARAGRAPH？

垂直对齐 CSS 非常混乱......

CSS

```
#arrow {
       width:33px;
       height:25px;
       background-image:url('http://i.imgur.com/26tbf.png');
       margin-left:55px;
       background-position:0 50%;
       float:left;
       height:100%;
       background-repeat:no-repeat;
 } 

#bulletwrap {
       border:1px solid black;
       width:325px;
       height:75px;
 } 

#text {
      background-position:0 50%;
      line-height:75px;    
 } 
```

HTML

```
<div id="bulletwrap"><div id="arrow"></div><div id="text">This is some longer text that needs to be centered next to the arrow grouped together</div></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:39:57.710

[这是我](http://tinkerbin.com/RRICo4zr)在`display: table-cell and vertical-align: middle; height: whatever;`文本`div`和`display: table`子弹包装上使用的版本`div`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T17:40:35.143

垂直居中某些东西可能相当困难。我对您的解决方案有另一个建议。这是一个有点老套的解决方案，但据我所知，它是最好和最有效的。

你需要让你的#bulletwrap div（或任何其他容器类型元素）表现得像一个表格，而你的#text（段落或div，没关系）作为一个表格单元格。这将允许您使用`vertical-align: middle;`#text 元素，使其垂直居中。

这是重要的CSS：

```
#bulletwrap {
  border:1px solid black;
  width:325px;
  height:75px;
  display: table; /*set your container to behave as table*/
} 

#text {
  display: table-cell; /*set your text to behave as table cell*/
  vertical-align: middle; /*... and vertically align it*/
} 
```

这是在行动[http://tinkerbin.com/jSocLUGX](http://tinkerbin.com/jSocLUGX)

我希望这已经足够清楚了。如果您有任何其他问题或觉得您的问题没有得到真正的回答，请随时提出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:39:35.957

箭头必须在 a 中是否有原因`div`？通常，垂直对齐图像的最简单方法是将[其用作背景](http://tinkerbin.com/RVoZZLtL)。

```
<div id="bulletwrap">
  <div id="text">
    This is some longer text that needs to be centered next to the arrow grouped together and what happens if there is even more text then that is not going to work out so well
  </div>
</div> 
```

和 CSS

```
#bulletwrap {
       border:1px solid black;
       width:325px;
       background:url('http://i.imgur.com/26tbf.png') no-repeat left center;
       padding: 10px 0 10px 35px
 } 
```

注意 - 为了使文本居中，我只是让顶部和底部的填充相同。实际上，您应该将填充应用于容器。这也允许框随文本一起扩展，尽管您可能不希望这种行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T17:40:12.617

行高：75px；是罪魁祸首。line-height 将应用于包装文本中的每一行，而不是整个文本“块”。可能最好使用 radixhound 的解决方案或边距/填充方法。

# javascript - 在父类中初始化变量（JavaScript/CoffeeScript 习惯用法）

> ID：11800518
> 
> 赞同：1
> 
> 时间：2012-08-03T17:30:50.547
> 
> 标签：javascript, class, coding-style, coffeescript, idioms

这个问题涉及 CoffeeScript，但同样的问题仍然适用于 JavaScript。考虑这个例子：

```
class Parent    
    func: ->
        alert @member

class Child extends Parent    
    constructor: ->
        @greet()

    greet: ->
        @member = 'hello!'
        @func() 
```

`Parent`本身是没有用的。`(new Parent).func()`返回`undefined`。

我的问题是：

*   定义`Parent`只为子类提供通用功能和属性的类有什么问题吗？`Parent`可以是它自己文件中的一个复杂类，为原型链中的类提供功能。如果没有文档，这可能会令人困惑。

*   在`Child.greet`中，我们动态地添加`member`到一个 Child 对象。向对象添加新成员而不首先在构造函数中初始化它们有什么问题吗？这样做更好`constructor: -> @member = null; @greet()`吗？这样，下一个程序员就知道对象将拥有哪些成员，并将避免未定义变量的问题。另一方面是代码会有更多的噪音，这是 JavaScript 不需要的。

*   最后，是否有源代码是 CoffeeScript 中惯用 OOP 的一个很好的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:37:11.583

关于你的第一个问题，不，我不认为这样做有什么本质上的错误。我会说这是[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)的一种情况（使用属性访问而不是方法，但基本相同）。我确实为您的代码结构增加了一些复杂性，因此，如果可以以更简单的方式解决它，我建议使用更简单的解决方案。

关于不在构造函数中初始化成员变量，理想情况下构造函数应该使对象处于可用状态，这并不一定意味着初始化每个可能的成员变量。对于那个特定的代码片段，`@member = null`在我看来，添加不会增加任何东西。一个糟糕的构造函数的例子是要求用户在使用它之前做更多的事情而不是实例化对象，例如：

```
c = new Circle
c.radius = 5 # Need to set the radius to get the area.
console.log c.area() # If i hadn't set the radius this would break. 
```

我不知道惯用的 OO CoffeeScript 的良好来源。我认为 Smooth CoffeeScript 是一本学习这门语言的好书，它有一[章是关于 OO](http://autotelicum.github.com/Smooth-CoffeeScript/interactive/interactive-coffeescript.html#object-oriented-programming)的，但如果它足够透彻的话我不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:14:38.470

是的，这绝对是模板方法模式的一个案例。对于 Coffeescript 的一些惯用指南，我会查看[http://coffeescriptcookbook.com/](http://coffeescriptcookbook.com/)。

但是任何关于惯用 Ruby 的 Ruby 书籍/参考资料肯定也会有所帮助。

# python - 在 python 中保持格式的同时将字符串列表转换为整数

> ID：11800522
> 
> 赞同：5
> 
> 时间：2012-08-03T17:31:28.457
> 
> 标签：python, list, formatting, integer

所以我想做的事情似乎比较简单，但对于我的生活，我就是不能完全得到它。我有一个 .txt 文件，例如

```
4 2
6 5 1
9 4 5 
```

我希望它的信息可以像这样提供给我（即，除非有必要，否则我不需要编写新的 .txt 文件。）...

```
3 1
5 4 0
8 3 4 
```

或者，`1`从每个数字中减去，但格式保持不变。永远不会有比`1`原始数字更大的数字，因此不可能出现负数。这整个头痛是由于将索引转换为以开头`0`而不是`1`. 可能使事情复杂化的是原始文件的打印方式如下

```
['4 2 /n','6 5 1 /n', '9 4 5 /n'] 
```

**我做了什么**

好吧，它是我在 StackOverflow 上[发现的](https://stackoverflow.com/questions/10351772/converting-list-of-string-to-list-of-integer?rq=1)[各种不同](https://stackoverflow.com/questions/642154/how-to-convert-strings-into-integers-in-python?lq=1)东西的混搭，但我认为我会以最繁琐的方式来处理它。当我实现它时，[这个](https://stackoverflow.com/questions/10351772/converting-list-of-string-to-list-of-integer)没有意义..虽然它可能与空格问题在同一轨道上..

```
origianl = open(file, 'r')
for line in original.readlines():
    newline = line.replace(" \n","")
    finalWithStrings.append(newline)

finalWithIntegers = [map(int,x) for x in finalWithStrings]
finalWithIntegers[:] = [x-1 for x in finalWithIntegers] 
```

我的想法是，我需要删除“/n”并将这些字符串转换为整数，以便可以从中减去`1`。并以某种方式保持格式。格式必须相同，因为每一行都包含另一个文件的类似索引行的信息，这一点很重要。我不想在最终结果（或打印语句）中看到“/n”，但我仍然想要换行开始的效果。然而，上面的代码不起作用有两个原因（我知道）。

`int(n[:])`抛出一个错误，因为它不喜欢空格，当我在其中输入一个值（比如 0）时，代码会在每一行上打印第一个数字并减去一个......并将其全部放在一行上。

```
[3, 5, 8] 
```

因此，取出一个回车并必须再输入一个似乎是多余的，但我确实需要保持格式，并且有办法获取所有数字！

这也不起作用：

```
for line in original.readlines():
    newline = line.replace(" \n","")
    finalWithStrings.append(newline)

finalWithIntegers = [map(int,x) for x in finalWithStrings]
finalWithIntegers[:] = [x-1 for x in finalWithIntegers] 
```

但不仅仅是一个错误的输出，而是一个错误：

```
ValueError:invalid literal for int() with base 10:'' 
```

有没有人对我在这里做错了什么以及如何解决这个问题有任何想法？我正在使用 Python 2.6 并且是初学者。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T17:32:46.550

```
with open("original_filename") as original:
    for line in original:
        #if you just want the line as integers:
        integers = [ int(i) - 1 for i in line.split() ]
        #do something with integers here ...

        #if you want to write a new file, use the code below:
        #new_line = " ".join([ str(int(i) - 1) for i in line.split() ])
        #newfile.write(new_line + '\n') 
```

在上面的示例中，我在上下文管理器中打开了您的文件，因为这是一种很好的做法（从 2.5 版开始）。上下文管理器确保您的文件在您退出该上下文时正确关闭。

**编辑**

看起来您可能正在尝试创建一个 2D 列表...为此，可以使用以下方法：

```
data = []
with open("original_filename") as original:
    for line in original:
        integers = [ int(i) - 1 for i in line.split() ]
        data.append(integers) 
```

或者，如果您更喜欢 1-liner（我不喜欢）：

```
with open("original_filename") as original:
    data = [ [int(i) for i in line.split()] for line in original ] 
```

现在如果你打印它：

```
for lst in data:
    print (lst)    # [3, 1]
                   # [5, 4, 0]
                   # [8, 3, 4] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T17:39:11.323

这是使用正则表达式完成此任务的一种非常直接的方法。这里的好处是格式可以保证保持完全相同，因为它将替换原处的数字而不会触及任何空白：

```
import re

def sub_one_repl(match):
    return str(int(match.group(0))-1)

for line in original.readlines():
    newline = re.sub(r'\d+', sub_one_repl, line).rstrip('\n') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T18:00:43.333

另一种方法是使用 csv 模块和列表理解：

```
from csv import reader

data = [[int(j) - 1 for j in i] for i in reader(open("your_file"), delimiter=' ')] 
```

例如，它会使用您的数据：

```
[[3, 1], [5, 4, 0], [8, 3, 4]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T17:43:39.027

试试这个：

```
with open(filepath) as f:
    for line in f:
        print " ".join([str(int(i)-1) for i in line.split()]) 
```

希望有帮助

# actionscript-3 - 使用 javascript 触发 Actionscript 按钮事件

> ID：11800524
> 
> 赞同：0
> 
> 时间：2012-08-03T17:31:29.933
> 
> 标签：actionscript-3, actionscript

是否可以通过 javascript 触发 Flash 按钮单击事件？

这是我的代码，我从 javascript 调用 fromJS() 并且它触发没有任何问题，但包含此函数：

```
myButton.dispatchEvent(new MouseEvent(MouseEvent.CLICK)); 
```

不工作！

```
package 
{

import flash.external.*;
import flash.net.FileReferenceList;
import flash.display.MovieClip;
import flash.events.MouseEvent;
import flash.system.Security;

public class MultiSelectClass extends MovieClip
{
    private var fileRef:FileReferenceList;

    function MultiSelectClass()
    {
        Security.allowDomain( "*" );
        myButton.addEventListener(MouseEvent.CLICK, myButtonClick);
        addCallbacks();
    }

    private function addCallbacks():void
    {
        if (ExternalInterface.available)
        {
            ExternalInterface.addCallback("sendToFlash", fromJS);
        }
        return;
    }

    function myButtonClick(ev:MouseEvent):void
    {
        fileRef = new FileReferenceList();
        fileRef.browse();
    }

    private function fromJS():void
    {
         myButton.dispatchEvent(new MouseEvent(MouseEvent.CLICK));
    }

    private function sendToJS():void
    {
        if (ExternalInterface.available)
        {
            ExternalInterface.call("alert","Hello as3");
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:35:03.947

您可以使用 ExternalInterface 类并将回调处理程序添加到所述函数来执行此操作。闪存端看起来像这样：

```
if (ExternalInterface.available) {
    ExternalInterface.addCallback("fromJS", fromJS);
} 
```

然后在您的 javascript 中，您只需从 flashObject 调用该方法。

```
 mySwfObject.fromJS(); 
```

这是官方 adobe 文档的链接：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)

**-您在评论中的问题-**

出于安全原因，Flash 不会让您在没有实际单击鼠标的情况下弹出文件浏览器，手动调度鼠标事件不会欺骗它，并且没有（或至少不应该）解决此问题。用户必须实际单击您的 Flash 按钮才能打开文件浏览器（或全屏显示 Flash 应用程序）。

# ruby-on-rails - Michael Hartl 的 Ruby on Rails 教程是否需要使用 rspec？

> ID：11800526
> 
> 赞同：0
> 
> 时间：2012-08-03T17:31:31.980
> 
> 标签：ruby-on-rails, rspec

我正在阅读他的教程，该教程要求使用 rspec。为了完成他的教程，我需要执行任何 rspec 步骤，还是可以跳过它们？

更重要的是，rspec是什么，有什么好处？

我来自一个非常松散的 PHP 世界。我以前从未使用过框架，所有测试都只是在启动生产之前在本地服务器上进行手动测试。我得到了测试应用程序的好处，我只是不知道我会真正使用它。

如果你能说服我（不是我要求你），我真的很擅长遵循理性和逻辑的道路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:36:01.917

您可以通过忽略谈论测试的部分来跳过它们。

但是，我强烈建议您至少看看它是如何工作的。

如果您想开发一个生产站点，能够告诉您您的核心功能正在按照您的预期工作是无价的（例如电子商务网站的购物车管理）。

因此，每次您在应用程序中更改某些内容时，您所要做的就是执行测试，您就会知道应用程序的核心按预期工作（好吧，如果您编写了好的测试，那就是）。

如果您没有测试，那么在对代码库进行重大修改时，您最终会浪费时间对每个页面进行浏览器测试。

# html - 我如何将 rtp: 协议作为 src 嵌入到 html 中的播放器中？

> ID：11800534
> 
> 赞同：1
> 
> 时间：2012-08-03T17:31:56.973
> 
> 标签：html, streaming, video-streaming, flash, rtp

我正在尝试使用 Flash 播放器从 url rtp://224.168.116.253:4568 流式传输实时视频有人可以告诉我如何将这个 url 参数作为 src 传递，我怎样才能让它工作，我已经用播放器检查过了播放器正在流畅地流式传输视频现在我想嵌入代码并在网络上显示它。

这是我正在处理的网页：

```
<html>
    <title>Live Streaming</title>
    <body>
        <OBJECT id='mediaPlayer1' width="480" height="550" 
                classid='CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95' 
                codebase='http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701'
                standby='Loading Microsoft Windows Media Player components...' type='application/x-    oleobject'>
            <param name='url' value="rtp://224.168.116.253:4568">
            <param name='fileName' value=url>
            <param name='animationatStart' value='true'>
            <param name='transparentatStart' value='true'>
            <param name='autoStart' value="true">
            <param name='showControls' value="true">
            <param name ="ShowAudioControls"value="true">
            <param name="ShowStatusBar" value="true">
            <param name='loop' value="false">
            <EMBED type='application/x-mplayer2'
                    pluginspage='http://microsoft.com/windows/mediaplayer/en/download/'
                    id='mediaPlayer' name='mediaPlayer' displaysize='6' autosize='1' 
                    bgcolor='darkblue' showcontrols="true" showtracker='1' 
                    showdisplay='1' showstatusbar='1' videoborder3d='1' width="420" height="380"
                    src="rtp://224.168.116.253:4568" autostart="true" designtimesp='5311' loop="true">
            </EMBED>
        </OBJECT>
        <br />
    </body>
</html> 
```

# java - 如何将 JScrollPane 设置为围绕 JList 的固定最大大小

> ID：11800536
> 
> 赞同：1
> 
> 时间：2012-08-03T17:31:59.173
> 
> 标签：java, swing, jscrollpane, jlist

我的程序创建了一系列 JScrollPanes，每个都包含一个 JList。JList 垂直显示，每个都有固定的行数。它们所在容器的初始大小不足以显示完整的 JList，因此无法显示滚动窗格，但可以调整大小。

我希望每个 JScrollPane 在达到足以显示完整 JList 的大小时停止增长。

我尝试设置 JList SetVisibileRowCount，然后将 ScrollPane 的 MaximumSize 设置为 JList 的 MaximumSize，但似乎没有任何影响。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:58:29.263

此[示例](https://stackoverflow.com/a/5760093/230513)显示了一种方法：它动态调用`setVisibleRowCount()`以限制最大大小。它可以帮助您构建一个[sscce](http://sscce.org/)。

# ruby - FasterCSV 是否会在读取时打开整个文件？

> ID：11800539
> 
> 赞同：0
> 
> 时间：2012-08-03T17:32:15.117
> 
> 标签：ruby, file-io, csv, fastercsv

在这样的情况下：

```
FasterCSV.parse(uploaded_file) do |row|
  @rows[i] = row
  i += 1
  break row if i == 10
end 
```

FasterCSV 是读取整个文件还是仅读取前 10 行？我想显示 CSV 文件的前几行，但不想将整个文件存储在内存中。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:54:33.317

您可以使用 FasterCSV 逐行解析文件。

来自[FasterCSV 文档](http://fastercsv.rubyforge.org/classes/FasterCSV.html)：

```
A Line at a Time
  FasterCSV.foreach("path/to/file.csv") do |row|
    # use row here...
  end

All at Once
  arr_of_arrs = FasterCSV.read("path/to/file.csv") 
```

（注意：在您的问题中，您使用的是 FasterCSV.parse，它仅用于将字符串解析为 CSV。因为您要使用文件，请查看 .foreach 和 .parse 方法，它们将处理打开和扫描文件以查找你。）。

# python - 为什么我的 python 进程占用了这么多内存？

> ID：11800544
> 
> 赞同：13
> 
> 时间：2012-08-03T17:32:26.910
> 
> 标签：python, optimization, memory, numpy

我正在从事一个项目，该项目涉及使用 python 来读取、处理和写入有时高达几百兆字节的文件。当我尝试处理一些特别大的文件时，程序偶尔会失败。它没有说“内存错误”，但我怀疑这是问题所在（实际上它根本没有给出失败的理由）。

我一直在测试较小文件上的代码并观看“顶部”以查看内存使用情况，通常会达到 60%。top 说我有 4050352k 总内存，所以 3.8Gb。

同时，我正在尝试使用以下代码来跟踪 python 本身的内存使用情况（请参阅我[昨天](https://stackoverflow.com/questions/11784329/python-memory-usage-of-numpy-arrays)的问题）：

```
mem = 0
for variable in dir():
    variable_ = vars()[variable]
    try: 
        if str(type(variable_))[7:12] == 'numpy':
            numpy_ = True
        else:
            numpy_ = False
    except:
        numpy_ = False
    if numpy_:
        mem_ = variable_.nbytes
    else:
        mem_ = sys.getsizeof(variable)
    mem += mem_
    print variable+ type: '+str(type(variable_))+' size: '+str(mem_)
print 'Total: '+str(mem) 
```

在运行该块之前，我将所有不需要的变量设置为无，关闭所有文件和图形等。在该块之后，我使用 subprocess.call() 运行下一阶段所需的 fortran 程序加工。在 fortran 程序运行时查看顶部显示，fortran 程序正在使用 ~100% 的 cpu 和 ~5% 的内存，而 python 正在使用 0% 的 cpu 和 53% 的内存。然而，我的一小段代码告诉我，python 中的所有变量加起来只有 23Mb，应该是 ~0.5%。

那么发生了什么？我不希望那个小片段能给我一个关于内存使用的位置，但它应该准确到几 Mb 以内吗？还是只是 top 没有注意到内存已被放弃，但如果有必要，它可供其他需要它的程序使用？

根据要求，这是使用所有内存的代码的简化部分（file_name.cub 是一个 ISIS3 立方体，它是一个包含同一地图的 5 层（波段）的文件，第一层是光谱辐射，下一层4 与纬度、经度和其他细节有关。这是我正在尝试处理的来自火星的图像。StartByte 是我之前从 .cub 文件的 ascii 标头中读取的值，告诉我数据的起始字节 Samples和 Lines 是地图的尺寸​​，也从标题中读取。）：

```
latitude_array = 'cheese'   # It'll make sense in a moment
f_to = open('To_file.dat','w') 

f_rad = open('file_name.cub', 'rb')
f_rad.seek(0)
header=struct.unpack('%dc' % (StartByte-1), f_rad.read(StartByte-1))
header = None    
#
f_lat = open('file_name.cub', 'rb')
f_lat.seek(0)
header=struct.unpack('%dc' % (StartByte-1), f_lat.read(StartByte-1))
header = None 
pre=struct.unpack('%df' % (Samples*Lines), f_lat.read(Samples*Lines*4))
pre = None
#
f_lon = open('file_name.cub', 'rb')
f_lon.seek(0)
header=struct.unpack('%dc' % (StartByte-1), f_lon.read(StartByte-1))
header = None 
pre=struct.unpack('%df' % (Samples*Lines*2), f_lon.read(Samples*Lines*2*4))
pre = None
# (And something similar for the other two bands)
# So header and pre are just to get to the right part of the file, and are 
# then set to None. I did try using seek(), but it didn't work for some
# reason, and I ended up with this technique.
for line in range(Lines):
    sample_rad = struct.unpack('%df' % (Samples), f_rad.read(Samples*4))
    sample_rad = np.array(sample_rad)
    sample_rad[sample_rad<-3.40282265e+38] = np.nan  
    # And Similar lines for all bands
    # Then some arithmetic operations on some of the arrays
    i = 0
    for value in sample_rad:
        nextline = sample_lat[i]+', '+sample_lon[i]+', '+value # And other stuff
        f_to.write(nextline)
        i += 1
    if radiance_array == 'cheese':  # I'd love to know a better way to do this!
        radiance_array = sample_rad.reshape(len(sample_rad),1)
    else:
        radiance_array = np.append(radiance_array, sample_rad.reshape(len(sample_rad),1), axis=1)
        # And again, similar operations on all arrays. I end up with 5 output arrays
        # with dimensions ~830*4000\. For the large files they can reach ~830x20000
f_rad.close()
f_lat.close()
f_to.close()   # etc etc 
sample_lat = None  # etc etc
sample_rad = None  # etc etc

#
plt.figure()
plt.imshow(radiance_array)
# I plot all the arrays, for diagnostic reasons

plt.show()
plt.close()

radiance_array = None  # etc etc
# I set all arrays apart from one (which I need to identify the 
# locations of nan in future) to None

# LOCATION OF MEMORY USAGE MONITOR SNIPPET FROM ABOVE 
```

所以我在关于打开多个文件的评论中撒谎，这是同一个文件的许多实例。我只继续使用一个未设置为 None 的数组，它的大小约为 830x4000，尽管这以某种方式构成了我可用内存的 50%。我也尝试过 gc.collect，但没有任何变化。我很高兴听到有关如何改进任何代码（与此问题或其他相关）的任何建议。

也许我应该提一下：最初我是完全打开文件（即不是像上面那样逐行打开），逐行打开是为了节省内存的初步尝试。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-03T17:39:06.080

仅仅因为你已经尊重你的变量并不意味着 Python 进程已经将分配的内存还给了系统。请参阅[如何在 Python 中显式释放内存？](https://stackoverflow.com/q/1316767/3924118).

如果`gc.collect()`对您不起作用，请调查使用 IPC 在子进程中分叉和读取/写入文件。这些进程将在完成后结束并将内存释放回系统。您的主进程将继续以低内存使用率运行。

# objective-c - 以编程方式获取 OSX 中应用程序文件夹的名称

> ID：11800545
> 
> 赞同：3
> 
> 时间：2012-08-03T17:32:29.267
> 
> 标签：objective-c, macos, localization

在美国和欧洲，应用程序文件夹是命名的`Applications`，但在中文或日文本地化下它是如何命名的？

有没有办法以编程方式获取文件夹的名称？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T17:40:10.123

文件系统中的目录名称始终为英文。目录可以附加本地化名称以向用户显示，但这些不是您用于访问目录的名称。来自[*国际化编程主题*](https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPInternational/Articles/LocalizingPathnames.html#//apple_ref/doc/uid/20002141-96921-TPXREF109)：

> 您需要了解应用程序中的本地化路径名并适当地显示它们。本地化路径名仅用于显示目的，在访问文件系统时绝不应使用。在代码中处理文件和目录时，包括需要写入缓存或用户首选项时，您应该继续使用实际路径名。唯一应该使用本地化路径名的情况是，当您希望通过应用程序的用户界面向用户显示该路径时。

也就是说，您可以使用以下方式以编程方式获取路径`NSSearchPathForDirectoriesInDomains`：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSApplicationDirectory, NSLocalDomainMask, YES);
// Returns an NSArray containing the string "/Applications" 
```

您还可以使用`-[NSFileManager URLsForDirectory:inDomains:]`：

```
NSArray *urls = [[NSFileManager defaultManager] URLsForDirectory:NSApplicationDirectory inDomains:NSLocalDomainMask];
// Returns an NSArray containing the NSURL "file://localhost/Applications" 
```

如果您需要向用户显示本地化名称，请查看[*Internationalization Programming Topics*](https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPInternational/Articles/LocalizingPathnames.html#//apple_ref/doc/uid/20002141-96921-TPXREF109)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T17:42:29.807

```
[[[NSFileManager defaultManager] URLsForDirectory: NSApplicationDirectory inDomains:NSLocalDomainMask] lastObject]; 
```

我认为应该工作（[参考](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/URLsForDirectory%3ainDomains%3a)）。如果您使用的是以前版本的 OS X 并且 URLsForDirectory 不受支持，`NSSearchPathForDirectoriesInDomains()`则可以选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-11T17:50:11.593

要获取适合呈现给用户的文件夹（或具有本地化名称的应用程序）的本地化名称，请使用：

```
NSString *localizedName = [[NSFileManager defaultManager] displayNameAtPath:path]; 
```

对于 Applications 文件夹，您可以使用：

```
NSString *localizedApplicationDirectoryName = [[NSFileManager defaultManager] displayNameAtPath:NSSearchPathForDirectoriesInDomains(NSApplicationDirectory, NSLocalDomainMask, YES).lastObject]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-22T19:53:07.177

迅速：

```
let urls = FileManager().urls(for: .applicationDirectory, in: .localDomainMask) 
```

> ▿ 1 个元素
> ▿ 0 : file:///Applications/

```
let urls = FileManager().urls(for: .allApplicationsDirectory, in: .localDomainMask) 
```

> ▿ 4 个元素
> ▿ 0：file:///Applications/
> ▿ 1：file:///Applications/Utilities/
> ▿ 2：file:///Developer/Applications/
> ▿ 3：file:///Applications/Demos/

# ios - cvCreateFileCapture 总是返回“NULL”

> ID：11800552
> 
> 赞同：1
> 
> 时间：2012-08-03T17:32:50.483
> 
> 标签：ios, opencv, ffmpeg

我正在使用 Xcode 4.3.3 和 OpenCV 2.4 制作一个 iphone 应用程序

我使用“cvCreateFileCapture（“simtom.mp4”）”从“.mp4”文件中获取帧，但不幸的是，cvCreateFileCapture（）总是返回“NULL”。

问题是什么？

这是我的源代码。

```
 CvCapture *m_pMusicVideo;     

 m_pMusicVideo = cvCreateFileCapture("simtom.mp4"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:43:58.943

确保 simtom.mp4 文件与可执行文件位于同一文件夹中。如果您将它与源文件放在同一文件夹中，则不会找到它。在 Xcode 4 中，这意味着派生数据文件夹。转到 Xcode -> Preferences -> Locations 以查看它在哪里。

**编辑**

我没有意识到您正在尝试在 iOS 下运行。（我在您的问题中添加了该标签。）那么，您的问题是 simtom.mp4 文件没有与应用程序一起被复制到 iPhone。为了实现这一点，您需要将 simtom.mp4 嵌入到您的应用程序包中并从那里打开它。您应该能够获取文件的路径

```
[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"simtom.mp4"]; 
```

您将文件包含在目标的构建阶段中的捆绑包中：

![构建阶段](../Images/4e37af441142e74c933aa25c6e097c92.png)

这是[关于 NSBundle 资源](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/ImageSoundResources/ImageSoundResources.html)的开发者文档。一般的[Bundle Programming Guide](https://developer.apple.com/library/ios/#documentation/CoreFoundation/Conceptual/CFBundles/Introduction/Introduction.html)也是一本不错的读物。

# android - CloneNotSupportedException，但我从不调用 clone()

> ID：11800553
> 
> 赞同：0
> 
> 时间：2012-08-03T17:33:00.863
> 
> 标签：android, cloneable

我收到一个 CloneNotSupportedException，但在我的代码中找不到我调用 clone() 的任何地方。我查看了 Java 文档，除了我在对象上调用 clone() 之外，我找不到任何引发此异常的原因。

有谁知道调用此异常的另一个原因？当我将一个对象设置为另一个对象时，是否会调用 clone()？我的课程都没有实现 Cloneable。

这是我的 LogCat ：

```
08-03 13:04:02.751: E/AndroidRuntime(3223): FATAL EXCEPTION: main
08-03 13:04:02.751: E/AndroidRuntime(3223): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.eti.commander/my.eti.commander.MainMenu}: java.lang.CloneNotSupportedException: Class doesn't implement Cloneable
08-03 13:04:02.751: E/AndroidRuntime(3223):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at android.os.Looper.loop(Looper.java:130)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at android.app.ActivityThread.main(ActivityThread.java:3683)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at java.lang.reflect.Method.invokeNative(Native Method)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at java.lang.reflect.Method.invoke(Method.java:507)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at dalvik.system.NativeStart.main(Native Method)
08-03 13:04:02.751: E/AndroidRuntime(3223): Caused by: java.lang.CloneNotSupportedException: Class doesn't implement Cloneable
08-03 13:04:02.751: E/AndroidRuntime(3223):     at java.lang.Object.clone(Object.java:155)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at my.eti.commander.RelayAPIModel$NativeCalls.InitRelayJava(Native Method)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at my.eti.commander.MainMenu.initMain(MainMenu.java:241)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at my.eti.commander.MainMenu.onCreate(MainMenu.java:81)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-03 13:04:02.751: E/AndroidRuntime(3223):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-03 13:04:02.751: E/AndroidRuntime(3223):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:36:38.720

从堆栈跟踪我猜你的本机代码中有一些东西

```
my.eti.commander.RelayAPIModel$NativeCalls.InitRelayJava(Native Method) 
```

试图克隆一个传递给它的 Java 对象，而该对象不支持 Cloneable。

# matlab - 用于对象检测的 HOG 描述符

> ID：11800554
> 
> 赞同：5
> 
> 时间：2012-08-03T17:33:00.783
> 
> 标签：matlab, image-processing, feature-detection, object-detection, matlab-cvst

我想知道，对于像“汽车”这样的对象的 HOG 描述符是否有任何实现，而不是 MATLAB 中的 Human？

但万一，只有人类，你能引导我到那个代码，并给我这样的提示，以改进用于“汽车或摩托车等物体”的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T15:46:03.647

现在在计算机视觉系统工具箱中有一个函数[extractHOGFeatures 。](http://www.mathworks.com/help/vision/ref/extracthogfeatures.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T04:04:34.323

HOG 是一种特征描述符，它可以应用于您想要的任何对象。除了块大小、单元大小、块步长等参数外，实现不会有任何变化。要获得汽车的描述符，您需要提供它们的正样本和负样本。Opencv 提供了用户训练分类器的功能。如果 matlab 提供了训练分类器的代码，它应该是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-08T07:03:10.827

那么你可以使用[VLFeat Toolbox](http://www.vlfeat.org/)，它对 HOG 的实现非常有效，你可以找到任何对象的 hOG 特征，也可以可视化。如果“im.jpg”如果你的输入图像，你可以使用 `hog = vl_hog("im.jpg",8,'verbose')` 这里 8 是你的窗口大小来获得 HOG 特征，你可以相应地调整。

用于显示功能 `imhog = vl_hog('render',hog,'verbose')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-19T18:28:53.267

这是一个完全实现 Dalal 算法的优秀 Matlab 代码。我已经在许多主要的学术项目中测试并使用了这段代码。

[http://hi.baidu.com/fpmaldfoamdfmze/item/4f3b3ac881affcb00c0a7b11](http://hi.baidu.com/fpmaldfoamdfmze/item/4f3b3ac881affcb00c0a7b11) 所有功劳归发布者所有！

HOG 并非特定于行人检测。您可以将它与任何刚性（或近似刚性）对象一起使用。

要使用此代码，您需要了解如何在一个区域上计算 HOG。该区域被划分为重叠的“块”。块由许多“单元”组成。在每个块中计算空间方向直方图。最终的向量是通过连接这些空间直方图形成的。您可以调整的参数是

**cellpw, cellph**：分别是单元格的像素宽度和高度。

**nblockw, nblockh** : 块大小分别由 x 和 y 方向的单元格数计算。

**nthet**：角度箱的数量。

**issigned** : 是否采用有符号或无符号梯度

**重叠**：指定为分数的块之间的重叠量

**isglobalinterpolate** : 3d 直方图的全局或局部插值

**normmethod** : 使用的规范类型

您可以尝试使用默认参数 -

单元格 = 8; 细胞 = 8; nblockw = 2; nblockh = 2; nthet = 9; 重叠 = 0.5; isglobalinterpolate = 'localinterpolate'; 已签名 = '未签名'; normmethod = 'l2hys';

在 matlab 中获取功能类似于

```
I = imread('car.png');
Ig = rgb2gray(I);
F = hogcalculator(Ig, 8, 8, 2, 2, 9, 0.5,'localinterpolate', 'unsigned', 'l2hys'); 
```

F 的尺寸/长度取决于您选择的参数。

回答您的评论，是的，您必须为正面（汽车）和负面（非汽车）图像构建这些功能以构建检测系统。SVM 通常用作分类器。我建议使用 libsvm 库 -

[http://www.csie.ntu.edu.tw/~cjlin/libsvm/](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)

建立训练集后，使用训练集进行训练。调整 SVM 参数以获得最高精度。示例中给出的参数可能不是最好的，您可以随时尝试不同的设置。我会先尝试更改 nthet、cellpw 和 cellph。祝你好运！

# database - 使用 Spring Data JPA 或 Hibernate 的新 Spring MVC 项目？

> ID：11800556
> 
> 赞同：1
> 
> 时间：2012-08-03T17:33:24.277
> 
> 标签：database, spring, hibernate, jpa, spring-mvc

我们目前开始在一个新项目中使用 Spring MVC，我们想知道使用什么技术来连接我们的数据库最好？Spring Data JPA 还是 Hibernate？

PS：这是我们第一个使用这些技术的项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T17:50:21.317

Spring Data JPA 还是休眠？如果需要，JPA 是一个接口，Hibernate 是实现。您将 Hibernate 指定为您的 JPA 提供者。

但是，当您掌握了这一点时，我会鼓励您使用 Spring Data JPA。首先，它非常简单，代码更少等。我在最近的两个项目中都使用过它，我很喜欢它。您可以为类型安全的查询添加 Query DSL，您的生活将变得更加有趣。

这实际上是一个非常好的起点：

[Spring Data JPA 教程](http://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-part-one-configuration/)

# xml - 为什么这个 XML/XSD 组合不能从 Excel 2007 导出？

> ID：11800557
> 
> 赞同：2
> 
> 时间：2012-08-03T17:33:25.037
> 
> 标签：xml, excel, xsd, excel-2007, xsd-validation

我正在开发一个 XML 数据库，并且我相信我的 Schema 和 XML 是有效的。在遥远的将来，当我在这个列表中填充了数千个不同的项目时，我想使用 MS Excel。但是，我无法正确导入甚至导出简单的 XML 文档。

我的架构如下：[http](http://dl.dropbox.com/u/27596075/StackOverFlow/Example.xsd) ://dl.dropbox.com/u/27596075/StackOverFlow/Example.xsd 这是我的示例 XML 文件：[http ://dl.dropbox.com/u/27596075/StackOverFlow/Example .xml](http://dl.dropbox.com/u/27596075/StackOverFlow/Example.xml)

作为一个新秀 Stack Overflow 用户，我已经用尽了我的 2 个超链接，否则我会发布一些截图。

我相信我的 XSD 是有效的，因为我已经对其进行了在线验证，并且当我将它包含到 MS Excel 2007 中时，我看到它在源窗格中正确列出。当我导入我的示例 XML 数据时，我在 Excel 表中获得了多行不一致的映射。作为一个新秀 Stack Overflow 用户，我已经用尽了我的 2 个超链接，否则我会发布一些截图。

导入后，我无法导出此数据。Excel 告诉我 root_Map 不可导出，因为它包含以下内容： --List of lists --无法保留映射元素与其他元素的关系。

我相信这个案子应该是公开和关闭的，但正如你所看到的，我一直被证明是错误的。数小时的搜索还没有得到实质性的答案，我真的很想避免在 CSV 或文本编辑器上处理这个数据库。我读过一些关于 XSLT 的简短说明，但我不明白 XSLT 如何帮助将我的 XML 数据映射到 XML 电子表格。

请就此问题的任何解决方法或我的方法是否需要改进提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T23:03:06.823

物有所值 ...

您的 XSD 模式文档对我来说看起来不错，并且 Xerces J 可以毫无问题地使用它进行验证。

但是您的 XML 文档对模式无效。Xerces 在第 15 行报告了问题，其中 XML 有一个`nks`元素，而模式需要一个`kn`元素。（一旦我添加了一个空`nks`的 ，该文档对模式是模式有效的。）

您在使用 Excel 时遇到的一些问题可能是由于文档对架构无效吗？

# ms-word - Word 属性不在“摘要”选项卡中

> ID：11800562
> 
> 赞同：1
> 
> 时间：2012-08-03T17:33:37.053
> 
> 标签：ms-word, office-interop, doc

我一直在努力通过 COM 接口为 word 文档设置 customProperties（和内置属性）并且成功了。但是，这些属性仅在 Word 中可见，而在摘要选项卡中不可见。

**问题**

好的，所以在开场白中，我有点误导以简化问题。我正在使用 netOffice 包装器与单词 interop 组件进行交互（使部署变得非常容易），它用于通过 ASP.Net 门户自动执行邮件合并。我使用相同的方法将文档 ID 添加到 CustomDocumentProperties。

此 ID 随后由控制台应用程序获取，该应用程序使用 DSOFile.dll 访问 OLE/Summary 属性。

现在，虽然我可以在 word 中看到我的自定义 databaseID 字段，但它不在摘要选项卡中（见下文），我认为这是 DSOFile 从中获取它们的地方，内置和自定义属性都会发生这种情况。我对这两者有何不同或为什么它们失去同步一无所知。

**测试**

从我所做的测试中，我很惊讶添加/更改属性然后保存它们并不能解决文档属性的问题。但是，将它们保存到新文件将更新摘要。此外，在保存摘要选项卡甚至不出现的位置后，还会出现明显的延迟，看起来后台进程负责更新它们。

如果您没有适合我的解决方案，我很想知道摘要属性与 word 文档中存储的属性有何不同。

![显示属性不是在摘要选项卡中设置的，而是在 word 中设置的。](../Images/f3e9f0ba1739587d05ad95b95e091460.png)

如果它很重要，我今天添加属性的问题不是文档不是“脏”时的典型保存。相反，我保持模板打开以及完成的文档，并且需要在保存之前激活它。

如果我错过了任何重要的细节，请告诉我，提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-20T19:21:37.670

（这是对这个问题的一些评论的合并）

当文档在 Word 中打开时，您不太可能在文件系统的属性查看器中查看自定义属性。

这可能是一种安全机制，可以防止两个单独的进程同时更新属性。

OLE 结构化存储文件是 OLE 对象。它们仅在对象的 OLE 引用计数减少到 0 时才会关闭。

因此，例如，如果某些代码正在使用 DSOFile 添加属性并且没有释放 OLE 对象，则文件将保持打开状态。如果 OLE 对象被释放并且文件被“关闭”，尝试更新文件的其他进程的行为可能与它们的行为不同。

# java - Android - 单击按钮时播放声音 - 强制关闭

> ID：11800565
> 
> 赞同：0
> 
> 时间：2012-08-03T17:33:49.830
> 
> 标签：java, android, xml, android-layout, development-environment

我正在尝试编写一个在单击图像时播放声音剪辑的应用程序。剪辑大约 1 秒长。每当打开应用程序时，它都会强制关闭。这是我的编码。为什么会强制关闭？

主要活动

```
package com.jeremy.vroom;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.media.MediaPlayer;
import android.widget.Button;
import android.view.View.OnClickListener;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button zero = (Button)this.findViewById(R.id.btnZero);
        zero.setOnClickListener(new OnClickListener() {

            public void onClick(View view) {     
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(MainActivity.this, R.raw.rev);   
                        mp.start();
                    }
                }.start();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

活动主.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/btnZero"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/uro5" 
    android:clickable="true"
    android:contentDescription="@string/desc" ></ImageView> 
```

日志

```
08-03 17:21:29.156: D/AndroidRuntime(272): Shutting down VM
08-03 17:21:29.156: W/dalvikvm(272): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-03 17:21:29.298: E/AndroidRuntime(272): FATAL EXCEPTION: main
08-03 17:21:29.298: E/AndroidRuntime(272): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.jeremy.vroom/com.jeremy.vroom.MainActivity}: java.lang.ClassCastException: android.widget.ImageView
08-03 17:21:29.298: E/AndroidRuntime(272):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
08-03 17:21:29.298: E/AndroidRuntime(272):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-03 17:21:29.298: E/AndroidRuntime(272):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-03 17:21:29.298: E/AndroidRuntime(272):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-03 17:21:29.298: E/AndroidRuntime(272):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-03 17:21:29.298: E/AndroidRuntime(272):  at android.os.Looper.loop(Looper.java:123)
08-03 17:21:29.298: E/AndroidRuntime(272):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-03 17:21:29.298: E/AndroidRuntime(272):  at java.lang.reflect.Method.invokeNative(Native Method)
08-03 17:21:29.298: E/AndroidRuntime(272):  at java.lang.reflect.Method.invoke(Method.java:521)
08-03 17:21:29.298: E/AndroidRuntime(272):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-03 17:21:29.298: E/AndroidRuntime(272):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-03 17:21:29.298: E/AndroidRuntime(272):  at dalvik.system.NativeStart.main(Native Method)
08-03 17:21:29.298: E/AndroidRuntime(272): Caused by: java.lang.ClassCastException: android.widget.ImageView
08-03 17:21:29.298: E/AndroidRuntime(272):  at com.jeremy.vroom.MainActivity.onCreate(MainActivity.java:18)
08-03 17:21:29.298: E/AndroidRuntime(272):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-03 17:21:29.298: E/AndroidRuntime(272):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
08-03 17:21:29.298: E/AndroidRuntime(272):  ... 11 more
08-03 17:21:32.588: I/Process(272): Sending signal. PID: 272 SIG: 9 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:36:23.320

尝试改变：

```
Button zero = (Button)this.findViewById(R.id.btnZero); 
```

到

```
Button zero = (Button) findViewById(R.id.btnZero); 
```

看看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:36:30.217

采用

```
ImageView zero = (ImageView)findViewById(R.id.btnZero); 
```

代替

```
 Button zero = (Button)this.findViewById(R.id.btnZero); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T17:38:38.030

在您的 XML 中，您已将 btnZero 声明为 ImageView，而在代码中您将其引用为 Button。这会导致您的 ClassCastException。尝试使用：

```
ImageView zero = (ImageView)findViewById(R.id.btnZero); 
```

代替

```
 Button zero = (Button)this.findViewById(R.id.btnZero); 
```

# javascript - 在我的页面中获取 Google 博客式滚动标题的优雅方式是什么？

> ID：11800570
> 
> 赞同：0
> 
> 时间：2012-08-03T17:34:12.510
> 
> 标签：javascript, html, css

谷歌有一个优秀的[博客](http://googleblog.blogspot.ca/)，它有一个相当整洁的标题 - 当你向下滚动时，标题中的灰色条会向上移动，直到它在屏幕顶部停止（它也做了一些花哨的 z-index 技巧，但我我对那些不感兴趣）。

虽然我知道 CSS 的 position:fixed，但 Google 似乎所做的是结合 position:fixed 和 position:relative 基于垂直滚动条的当前位置。我想我可以使用滚动事件、花哨的数学和一些凌乱的脚本 jQuery/CSS 来复制这种行为，但我想知道是否有一个更干净、优雅、也许是第三方的解决方案来做到这一点，而不是重新发明轮子，第一次可能会也可能不会。

在我的网页中获取 Google 博客样式标题的最简洁方法是什么，最好使用 CSS2 和 jQuery 以实现 x 浏览器兼容性？

编辑 - 如果有一种方法不需要为要滚动的元素上方的元素指定高度，则可以加分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:36:46.690

对于 jQuery 解决方案，您将使用滚动事件来确定距顶部的偏移量并相应地调整 DOM 中的元素以“缩小”标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:11:34.320

使用占位符复制他们的 css（或多或少），然后使用一些简单的 javascript 会产生非常平滑的效果。

见[http://jsfiddle.net/n9yPH/31/](http://jsfiddle.net/n9yPH/31/)

使用的 Jquery 是这样的：

```
$(function()
   {
       var start = $("#second").offset().top;
       $(window).scroll(function(e){
           var top = $("body").scrollTop();
           if (start-top >=0) $("#second").css("top",(start-top)+"px");
           else $("#second").css("top","0px");
       });
   });​ 
```

# c# - C# 中的事件参数是通过引用还是值传递？

> ID：11800573
> 
> 赞同：15
> 
> 时间：2012-08-03T17:34:26.333
> 
> 标签：c#, .net, events, event-handling, reference-type

一个相当简单的问题（我认为），但我似乎还没有看到答案。我知道有些值是通过值传递的（如 int 和 long），而其他值是通过引用传递的（如字符串），当您将它们传递给函数时。

在我的程序中，我使用后台工作程序，这样当我们在后台进行长时间的处理时，GUI 就不会锁定。我需要将数据从另一个文件传回 UI 线程，所以我一直在使用事件。现在我需要将字符串数组列表发送回 GUI 线程以在那里处理，我担心它会如何处理。基本上，在工作线程中，我有一个循环来填充列表，通过事件处理程序将其发送回 GUI，然后清除它，以便它可以在下一次通过循环时填充它并重新开始。

我担心当我这样做时，如果列表是通过引用传递的，那么在 UI 线程上，我会认为它会在读取中被清除，因为工作线程仍会在后台清除它。在这种情况下，通过会更好，我可以找到强制它的方法（复制到某个持有者数组或添加互斥锁或类似的东西），但我认为最好知道事件参数是否通过一般的引用或值，还是只是与方法相同，它会将它们作为通常传递的参数传递？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-03T17:37:09.330

> 我知道有些值是通过值传递的（如 int 和 long），而其他值是通过引用传递的（如字符串），当您将它们传递给函数时。

没有。默认情况下，所有内容都是按值传递的——但是当您使用引用类型时，“所有内容”都是引用。该引用是按值传递的。这*与*通过引用传递不同。有关详细信息，请参阅[我关于参数传递的文章。](http://pobox.com/~skeet/csharp/parameters.html)

事件参数完全相同——任何引用都是按值传递的，假设相应的委托不使用`out`或`ref`参数。

编辑：所以为了解决您的问题：是的，如果您的事件参数是可变的并且您将在不同的线程上采取行动，您应该首先创建一个副本......或者，传递现有的引用，然后创建一个新的 (空）在您的工作线程中列出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T17:37:11.697

默认情况下，参数本身是按值传递的。但是，根据它们的类型，它们可以是值或对您正在使用的实际值的引用。

请注意，这与通常所说*的按引用传递*不同，因为实际传递给参数的值是被复制的（即*按值传递*）。但是，效果是相似的，如果您在方法内更改引用的对象，更改也将在方法外（在您调用该方法的代码中）可见。

现在，当按值传递时，事件参数没有什么特别之处；是复制值还是仅复制它们的引用完全取决于它们的类型。因此，正如您所说，`int`参数`long`（以及更多，任何`struct`类型）是值类型，而其他类似`string`（以及任何类实例）是引用类型。

请注意，在 C# 中也可以*通过引用进行真正的传递*，但这需要[`ref`关键字](http://msdn.microsoft.com/en-us/library/14akc2c7.aspx).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T17:43:20.133

在标准事件模式中，传入了两个引用：

```
 void FormClosing(object sender, FormClosingEventArgs e) { ... } 
```

这两个引用是“按值”传递的，例如使用`sender = null`在处理方法之外没有任何影响。

但是您可以轻松地传回一个值：

```
void FormClosing(object sender, FormClosingEventArgs e)
{
    ...
    e.Cancel = true;  // this will pass back to the caller
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T17:38:15.397

事件参数根据参数***的类型***和***事件处理程序委托的签名***（*in*、 out 或 ref ）传递 - 如果是类，则传递引用的副本，如果是结构，则值的副本被传递（假设签名没有指定 out 或 ref）。

事件参数通常是一个类（通常从[EventArgs](http://msdn.microsoft.com/en-us/library/system.eventargs.aspx)继承）并且通常用于向调用者返回诸如 eventArgs.DoCancel 之类的值。

# gwt - flextable 冻结和/或锁定列和标题

> ID：11800580
> 
> 赞同：2
> 
> 时间：2012-08-03T17:35:23.600
> 
> 标签：gwt, expression, locked, flextable

这个站点上有大量的冻结/锁定列解决方案，但据我所知，它们都没有给我所需的答案。我正在使用 GWT 2.4 和 FlexTable 并且不创建两个表我希望能够冻结标题行，以便在垂直滚动期间始终可见，并且能够冻结左列，以便它们在期间始终可见水平滚动。这适用于使用 css 表达式的 GWT 1.7（前段时间编写的代码），但是 GWT 决定删除对 css 表达式的支持，我不知道如何替换它们以恢复功能。

**用于标题的 css 表达式：** top: expression(parentNode.parentNode.parentNode.parentNode.scrollTop-2);

**用于锁定列的 css 表达式：** left: expression(parentNode.parentNode.parentNode.parentNode.scrollLeft-2);

我见过使用两个表的解决方案，但是我真的需要一个表解决方案，我只是不知道足够的 javascript 或 jquery 将这些 css 表达式转换为有效的东西。

谢谢你的时间。

# actionscript-3 - AS3 - 使用参数访问子类的变量

> ID：11800584
> 
> 赞同：0
> 
> 时间：2012-08-03T17:35:39.047
> 
> 标签：actionscript-3, subclass

好的，我正在编写一个函数，它允许许多不同类型的子弹与许多不同类型的对象交互：

```
private function checkBulletCollisions() :void{

    var bullet:MovieClip;
    for (var j:int = 0; j < shootableArray.length; j++){
        shootableObject = shootableArray[j];
        for(var i:int = 0; i < bulletArray.length; i++){
            bullet = bulletArray[i];
            if (shootableObject.hitTestPoint(bullet.x, bullet.y, true)) {

                container.removeChild(bullet);
                bulletArray.splice(i,1);

                if (shootableArray[j] is Enemy){

                    shootableObject.enemyHealth += zArrow.power; //Working code for zArrow only
                    shootableObject.enemyHealth += bullet.power; //Error throwing code
                    //(I'm not using both lines at the same time, in case you were wondering)

                    if(shootableObject.enemyHealth <= 0){
                        container.removeChild(shootableArray[j]);
                        shootableArray.splice(j,1);
                    }
                }
            }
        }
    } 
```

现在，我有两种类型的子弹（zArrow 和 Dice），它们都扩展了 Bullet 类。这是 zArrow 类：

```
package
{
   import Bullet;
   public class zArrow extends Bullet
   {
      public static var power = -1

      public function zArrow(anything:*):void
      {
         super(anything);
      }
   }
} 
```

我试图根据两个子弹类中的任何一个中的“power”变量（无论哪个被击中）来减少敌人对象的健康，但我无法弄清楚为什么它在我时不断向我抛出以下错误使用上面提到的问题代码：

```
ReferenceError: Error #1069: Property power not found on zArrow and there is no default value.
    at GameDocumentClass2/checkBulletCollisions()
    at GameDocumentClass2/enterFrameHandler() 
```

它似乎肯定知道我正在尝试访问单个类的变量，那么为什么它不读取变量呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:10:26.827

我看到您想通过类实例访问静态变量。静态变量是类变量。例如：如果你的类有一个静态属性`power`，你可以通过这种方式访问​​它`SomeButtonClass.power`。

静态变量不被子类继承。只有非静态`public`的`protected`和`internal`属性是继承的。

# php - LDAP_搜索 PHP

> ID：11800586
> 
> 赞同：2
> 
> 时间：2012-08-03T17:35:39.673
> 
> 标签：php, ldap

我需要使用 LDAP 研究 AD-PHP，但每次都没有成功。

我正在按 sAMAccountName 过滤。当我使用名称简单的用户（**例如：** printer）时，一切正常，但是当名称不简单（**例如：** paulo.neves）时，它就不起作用了。

有任何想法吗？

```
    $usuario = "保罗.内维斯";

    $base_dn = "ou=Administradores, dc=tiisa, dc=com, dc=br";

    $filter = "(&(objectClass=user)(objectCategory=person)(cn=*)(samaccountname=$usuario))";

    if (!($search=@ldap_search($connect, $base_dn, $filter))) {
    die("无法搜索 ldap 服务器");
    }

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:52:40.803

我愿意打赌`.`必须逃脱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:39:33.063

属性值在[RFC4511](https://www.rfc-editor.org/rfc/rfc4511#section-4.1.5)中定义。属性值中使用的八位字节由相关属性类型的语法定义。`samAccountName`如果允许点 ( ) 字符的语法`.`不要求对所述字符进行转义，则它们不需要转义。

母语总是可能需要转义字符。

*   使用`ldapsearch`命令行工具验证是否`cn`可以从目录中检索到值中带有点的条目

*   `\2e`只是为了笑，通过使用“ ”而不是“”来转义属性值中的点，`.`看看会发生什么。

*   可能与您的问题无关，但是如果每个条目都有一个`cn`属性，则无需`cn=*`在搜索过滤器中使用当前过滤器组件

### 也可以看看

*   [使用 ldapsearch](http://ff1959.wordpress.com/2011/07/27/mastering-ldapsearch/)

# c++ - 为什么在这种情况下 STL priority_queue 不比 multiset 快多少？

> ID：11800587
> 
> 赞同：9
> 
> 时间：2012-08-03T17:35:42.623
> 
> 标签：c++, performance, stl, priority-queue, multiset

我正在比较 STL (g++) priority_queue 的性能，发现 push 和 pop 没有我预期的那么快。请参阅以下代码：

```
#include <set>
#include <queue>

using namespace std;

typedef multiset<int> IntSet;

void testMap()
{
    srand( 0 );

    IntSet iSet;

    for ( size_t i = 0; i < 1000; ++i )
    {
        iSet.insert(rand());
    }

    for ( size_t i = 0; i < 100000; ++i )
    {
        int v = *(iSet.begin());
        iSet.erase( iSet.begin() );
        v = rand();
        iSet.insert(v);
    }
}

typedef priority_queue<int> IntQueue;

void testPriorityQueue()
{
    srand(0);
    IntQueue q;

    for ( size_t i = 0; i < 1000; ++i )
    {
        q.push(rand());
    }

    for ( size_t i = 0; i < 100000; ++i )
    {
        int v = q.top();
        q.pop();
        v = rand();
        q.push(v);
    }
}

int main(int,char**)
{
   testMap();
   testPriorityQueue();
} 
```

我编译了这个 -O3 然后运行 ​​valgrind --tool=callgrind，KCachegrind testMap 占 CPU 总量的 54% testPriorityQueue 占 CPU 的 44%

（不带-O3 testMap比testPriorityQueue快很多）调用testPriorityQueue似乎占用大部分时间的函数

```
void std::__adjust_heap<__gbe_cxx::__normal_iterator<int*, std::vector<int, std::allocator<int> > >, long, int, std::less<int> > 
```

该函数似乎是从 pop() 调用中调用的。

这个函数具体是做什么的？有没有办法通过使用不同的容器或分配器来避免它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T17:49:26.047

优先级队列被实现为一个[堆：](http://en.wikipedia.org/wiki/Heap_(data_structure))*每次*删除头元素时都必须“重新平衡” 。在链接描述中，`delete-min`是一个`O(log n)`操作，实际上是因为`min`（或头）元素是扁平二叉树的*根。*

该集合通常实现为[红黑树](http://en.wikipedia.org/wiki/Red-black_tree)，最小元素将是最左边的节点（所以要么是叶子，要么最多有一个右孩子）。`pop`因此，它最多有 1 个要移动的子节点，并且根据允许的不平衡程度，重新平衡可以分摊到多个调用中。

请注意，如果堆有任何优势，它很可能位于引用位置（因为它是连续的而不是基于节点的）。*这正是 callgrind可能*更难以准确测量的那种优势，所以我建议在接受这个结果之前也运行一些经过的实时基准测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:00:37.843

我已经实现了一个优先级队列，它在使用 -O3 编译时似乎运行得更快。也许只是因为编译器能够比 STL 情况下更多的内联？

```
#include <set>
#include <queue>
#include <vector>
#include <iostream>

using namespace std;

typedef multiset<int> IntSet;

#define TIMES 10000000

void testMap()
{
    srand( 0 );

    IntSet iSet;

    for ( size_t i = 0; i < 1000; ++i ) {
        iSet.insert(rand());
    }

    for ( size_t i = 0; i < TIMES; ++i ) {
        int v = *(iSet.begin());
        iSet.erase( iSet.begin() );
        v = rand();
        iSet.insert(v);
    }
}

typedef priority_queue<int> IntQueue;

void testPriorityQueue()
{
    srand(0);
    IntQueue q;

    for ( size_t i = 0; i < 1000; ++i ) {
        q.push( rand() );
    }

    for ( size_t i = 0; i < TIMES; ++i ) {
        int v = q.top();
        q.pop();
        v = rand();
        q.push(v);
    }
}

template <class T>
class fast_priority_queue
{
public:
    fast_priority_queue()
        :size(1) {
        mVec.resize(1); // first element never used
    }
    void push( const T& rT ) {
        mVec.push_back( rT );
        size_t s = size++;
        while ( s > 1 ) {
            T* pTr = &mVec[s];
            s = s / 2;
            if ( mVec[s] > *pTr ) {
                T tmp = mVec[s];
                mVec[s] = *pTr;
                *pTr = tmp;
            } else break;
        }
    }
    const T& top() const {
        return mVec[1];
    }
    void pop() {
        mVec[1] = mVec.back();
        mVec.pop_back();
        --size;
        size_t s = 1;
        size_t n = s*2;
        T& rT = mVec[s];
        while ( n < size ) {
            if ( mVec[n] < rT ) {
                T tmp = mVec[n];
                mVec[n] = rT;
                rT = tmp;
                s = n;
                n = 2 * s;
                continue;
            }
            ++n;
            if ( mVec[n] < rT ) {
                T tmp = mVec[n];
                mVec[n] = rT;
                rT = tmp;
                s = n;
                n = 2 * s;
                continue;
            }
            break;
        }
    }
    size_t size;
    vector<T> mVec;
};

typedef fast_priority_queue<int> MyQueue;

void testMyPriorityQueue()
{
    srand(0);
    MyQueue q;

    for ( size_t i = 0; i < 1000; ++i ) {
        q.push( rand() );
    }

    for ( size_t i = 0; i < TIMES; ++i ) {
        int v = q.top();
        q.pop();
        v = rand();
        q.push(v);
    }
}

int main(int,char**)
{
    clock_t t1 = clock();
    testMyPriorityQueue();
    clock_t t2 = clock();
    testMap();
    clock_t t3 = clock();
    testPriorityQueue();
    clock_t t4 = clock();

    cout << "fast_priority_queue: " << t2 - t1 << endl;
    cout << "std::multiset: " << t3 - t2 << endl;
    cout << "std::priority_queue: " << t4 - t3 << endl;
} 
```

当使用 g++ 4.1.2 标志编译时：64 位 Linux 上的 -O3 这给了我：

```
fast_priority_queue: 260000
std::multiset: 620000
std::priority_queue: 490000 
```

# android - 数字选择器对话框

> ID：11800589
> 
> 赞同：15
> 
> 时间：2012-08-03T17:35:45.243
> 
> 标签：android, widget

![在此处输入图像描述](../Images/fca249f0fe5f9dd13880ceedd8a5624e.png)

有谁知道我在哪里可以找到关于如何在 android 上实现这种数字选择器对话框的教程或示例？我用谷歌搜索了所有内容，但只找到了必须使用自定义图像等创建自己的按钮的示例。这可以通过简单的方式完成吗？

我所能找到的只是：[http](http://www.quietlycoding.com/?p=5) ://www.quietlycoding.com/?p=5 但它对我没有多大帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T17:46:20.210

如果您的目标是 API 级别 11 或更高，您可以使用[NumberPicker](http://developer.android.com/reference/android/widget/NumberPicker.html)

如果您的目标是较早的 API 级别，则必须编写自己的 NumberPicker 或使用第三方库中的一个。

[这](https://www.youtube.com/watch?v=eDRsf7KX4rs)是一个很好的视频教程。

祝你好运！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-03T17:45:39.977

最简单的方法是使用[默认的 Android NumberPicker](http://developer.android.com/reference/android/widget/NumberPicker.html)。

按照您的意愿设计它的方法是创建您的自定义对话框并将其中一个嵌入其中，例如：

```
LayoutInflater inflater = (LayoutInflater)
    getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View npView = inflater.inflate(R.layout.number_picker_dialog_layout, null);
    return new AlertDialog.Builder(this)
        .setTitle("Text Size:")
        .setView(npView)
        .setPositiveButton(R.string.dialog_ok,
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {

                }
            })
            .setNegativeButton(R.string.dialog_cancel,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                    }
                })
            .create(); 
```

# c - Miller-Rabin 实现中的错误

> ID：11800596
> 
> 赞同：2
> 
> 时间：2012-08-03T17:36:14.083
> 
> 标签：c, primes

我正在实施[Wikipedia 的 Miller-Rabin 算法](http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test)，但似乎并没有得到非常恰当的结果。7, 11, 19, 23 等被报道为复合材料。事实上，当 k>12 时，即使 5 也显示为复合。我已经阅读了 Miller-Rabin 背后的数学，但不太了解它，并且盲目地依赖算法。关于我哪里出错的任何线索？

这是我的代码：

```
#include<stdio.h>
#include<math.h>

int modpow(int b, int e, int m) {
    long result = 1;

    while (e > 0) {
        if ((e & 1) == 1) {
            result = (result * b) % m;
        }
        b = (b * b) % m;
        e >>= 1;
    }

    return result;
}

int isPrime(long n,int k){
        int a,s,d,r,i,x,loop;
        if(n<2)return 0;
        if(n==2||n==3)return 1;
        if(n%2==0)return 0;

        d=n-1;
        s=0;
        while(d&1==0){
                d>>=1;
                s++;
        }

        for(i=0;i<k;i++){
                loop=0;
                a=(int)(rand()*(n-1))+1;
                x=modpow(a,d,n);
                if(x==1 || x==n-1){
                        continue;

                }
                for(r=1;r<=s;r++){
                        x=modpow(x,2,n);
                        if(x==1)return 0;
                        if(x==n-1){
                                loop=1;
                                break;
                        }
                }
                if(!loop)return 0;

        }
        return 1; 

}

int main(){
        int i,k;
        scanf("%d",&k);
        for(i=5;i<100;i+=2){
                printf("%d : %d\n",i,isPrime(i,k));
        }
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:59:10.750

如果基数与候选者不互质，则强费马检查总是返回“不是可能的素数”。

带着你的错误

```
a=(int)(rand()*(n-1))+1; 
```

对于素数，当且仅当结果具有形式时，底数与（的倍数）`p`不互质`p``p``rand()`

```
k*p + 1 
```

对于小素数，即使迭代很少，这实际上也可以保证发生。

基数应介于 2 ans 之间`n/2`（选择大于的基数`n/2`是不必要的，因为`a`当且仅当`n - a`是一个时，它是复合性的见证），所以你想要类似的东西

```
a = rand() % (n/2 - 2) + 2; 
```

如果您不介意随机数生成中偏向小余数的模偏差，或者

```
a = rand() /(RAND_MAX + 1.0) * (n/2 - 2) + 2; 
```

如果您想在整个可能范围内分配偏差。

# blackberry - 黑莓 IT 策略检查

> ID：11800605
> 
> 赞同：1
> 
> 时间：2012-08-03T17:36:53.930
> 
> 标签：blackberry

有人知道如何从设备端检查 BES IT 策略吗？

我的意思是，net.rim.device.api.itpolicy.ITPolicy 中有一个 API，例如 ITPolicy.getBoolean(String name, boolean defaultValue)，但我应该使用什么“名称”来检查，例如“禁用 GPS “ 规则？
它被提交到设备并在选项 > 安全 > 安全状态信息中可观察到，但此方法始终返回 defaultValue，即使对于“Disable_GPS”和“DisableGPS”也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:24:56.243

这是一个非常有趣的问题。碰巧`ITPolicy`该类仅用于检索由管理员在 BES 服务器中定义的自定义 IT 策略，而不是诸如 GPS 之类的常规策略。例如，您的应用程序的自定义策略，如“doihaveadminaccess”，BES 管理员创建一个新策略并将其推送到您的 BB，然后您的应用程序可以获得它的 BES 设置。

但是，该类还允许您检索内置的 BES 策略，但 RIM 从未在其文档中发布 ID。我猜，获取 ID（字符串或整数）的唯一方法是黑客攻击。

# jquery - 重置 jQuery one() 使其再次触发

> ID：11800611
> 
> 赞同：5
> 
> 时间：2012-08-03T17:37:22.153
> 
> 标签：jquery

我在`one()`事件处理程序上使用 jQuery 方法触发一次，然后自行注销。就像是：

```
$(".main").one('mousedown', '.resizeBar', function (e) { /* my code */ }); 
```

然后一些 ajax（实际上是 .net 回发）重置大部分页面（无需重新加载），我想再次设置事件处理程序。有没有办法将事件处理程序重新设置为`one()`再次活动？显然，以这种方式手动重新触发它是行不通的：

```
$(".main .resizeBar").trigger("mousedown"); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-03T17:40:34.217

只需将该代码包装在一个函数中

```
function mainMouseDownOne() {
    $(".main").one('mousedown', '.resizeBar', function (e) { /* my code */ });
}

$(document).ready(function(){
    mainMouseDownOne();

    .ajax({
        ...
        success: function() {
            ...
            mainMouseDownOne();
        }
    })
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T17:43:20.523

我建议将 one() 方法 bind 包装在函数调用中，然后您可以在页面加载时调用该函数（以绑定初始事件处理程序），并在 Ajax 调用成功时再次调用。

```
var bindEvents = function(){
  $(".main").one('mousedown', '.resizeBar', function (e) { /* my code */ });
};

$(function(){ bindEvents(); }); // call the one() method on page load.

$.post(pageURL, function(data){
  bindEvents(); // As an example, after some sort of Ajax or post-reset event.
}); 
```

# oop - 在这种情况下如何处理代码重用？

> ID：11800613
> 
> 赞同：0
> 
> 时间：2012-08-03T17:37:34.020
> 
> 标签：oop, code-reuse

我开始为 HTML5 游戏制作引擎。很快，我对另一个项目产生了兴趣，基本上是一个进化模拟。模拟将在服务器上运行，但实际渲染将在客户端进行。我意识到我也可以在服务器端使用来自游戏引擎的大部分类和代码。

现在，我不确定我应该怎么做。我可以选择创建一个“单片引擎”，它具有双方的特定功能和通用功能。或者，我可以创建一个单独的“游戏引擎”，并使用它来渲染模拟和制作游戏，以及一个具有模拟特定功能的单独“模拟引擎”。

单一方法的问题是代码库中的代码太大且不相关，而分离方法的问题是两个代码库中的类相同。

我该如何处理这种情况？

如果它改变了任何东西，我正在用 Javascript 编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:57:15.323

听起来您需要隔离您认为两种用法之间的共同功能并将这些部分提取到自己的库中，我将其称为“引擎核心”。那么你基本上有3个东西：“游戏引擎”，“模拟引擎”和“引擎核心”。游戏引擎和模拟引擎都会引用引擎内核，所以每当您对某个引擎内核进行更新时，游戏引擎和模拟引擎都会收到更新。具体如何实现将取决于您使用的语言，但想法是相同的。

# string - 将输出捕获到终端的 Bash 脚本

> ID：11800614
> 
> 赞同：11
> 
> 时间：2012-08-03T17:37:38.173
> 
> 标签：string, bash, shell

我想将某些命令的输出捕获到我的 bash 脚本中（在变量中），该命令将其输出打印到终端。我尝试了以下方法：

```
TEST_OUT=`the_command ARG1`   #Nope

#Putting the line "the_command ARG1" into a separate script, testing2.sh,

TEST_OUT=$(./testing2.sh)   #Nope

testing2.sh
TEST_OUT=$?  #Nope 
```

我 100% 确定当我跑步时...

```
> the_command ARG1 
```

...在终端中，它将我想要捕获的信息准确地打印到终端。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-03T17:49:43.470

如果输出被发送到标准错误，您需要将其重定向到标准输出，然后才能在您的 var 中捕获它。尝试：

```
TEST_OUT=$(the_command ARG1 2>&1) 
```

# jquery - 灯箱的 CSS

> ID：11800616
> 
> 赞同：0
> 
> 时间：2012-08-03T17:37:38.793
> 
> 标签：jquery, html, css, lightbox

我有一个灯箱。html代码：

```
<a id="show-panel" href="#">Show Panel</a>

<div id="lightbox-panel">
<h2>Lightbox Panel</h2>
<p>You can add any valid content here.</p>
<p align="center">
    <a id="close-panel" href="#">Close this window</a>
</p>
</div><!-- /lightbox-panel -->
<div id="lightbox"> </div><!-- /lightbox --> 
```

CSS：

```
 * /Lightbox background */
 #lightbox {
 display:none;
 background:#000000;
 opacity:0.9;
 filter:alpha(opacity=90);
 position:absolute;
 top:0px;
 left:0px;
 min-width:100%;
 min-height:100%;
 z-index:1000;
}
 /* Lightbox panel with some content */
 #lightbox-panel {
  display:none;
  position:fixed;
  top:100px;
  left:50%;
  margin-left:-200px;
  width:400px;
  background:#AFFFFF;
  padding:10px 15px 10px 15px;
  border:2px solid #CCCCCC;
  z-index:1001;
} 
```

[演示](http://jsfiddle.net/zhshqzyc/HjCyA/)当然是完美的。

但是，如果我们删除灯箱的 CSS，[http://jsfiddle.net/zhshqzyc/HjCyA/1/](http://jsfiddle.net/zhshqzyc/HjCyA/1/) 表单根本没有改变。我只是想知道灯箱的CSS的作用是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:44:21.133

你觉得这条评论有什么奇怪的地方吗？

```
* /Lightbox background */
#lightbox { 
```

这目前不是评论，而是一个非常畸形的选择器：

```
* /Lightbox background */ #lightbox { 
```

让我们修复它：

```
/* Lightbox background */
#lightbox { 
```

现在你可以看到是什么`#lightbox`:)

[http://jsfiddle.net/HjCyA/3/](http://jsfiddle.net/HjCyA/3/)

# jquery - Google AnnotatedTimeline 的有趣怪癖

> ID：11800617
> 
> 赞同：0
> 
> 时间：2012-08-03T17:37:40.043
> 
> 标签：jquery, jquery-ui, google-visualization, annotatedtimeline

所以我正在构建一个使用各种 jQuery UI 小部件的 Web 应用程序。特别是我正在使用手风琴小部件。我有像这样设置手风琴的 jQuery 代码：

```
$('#graph').accordion({autoHeight:false, collapsible:true}); 
```

显然，里面有一个图表。对于图表，我使用的是 Google AnnotatedTimeline 可视化。现在，如果我将手风琴选项设置`active`为 false 或者如果手风琴折叠，每当我尝试绘制图表时，它都会告诉我它正在寻找的元素不存在。这是因为`div`当手风琴折叠时，包含图表的内部变得“隐藏”？如果是这样，我该如何解决？

这很重要的原因是用户可能在使用其他元素时折叠了手风琴。该图表旨在实时更新。但如果它甚至找不到绘制图形所需的元素，它就不会被更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T08:49:23.187

如果您可以使用[jsfiddle](http://jsfiddle.net/)说明/重现此问题，那将很有用。

从您的问题来看，您似乎正在定义一个带有 id 的元素`'graph'`并将其设置为 jquery ui 手风琴`$('#graph').accordion({..})`。您试图将图表插入到哪个元素？假设在您尝试呈现图表之前，您计划包含图表的 div 存在，那么您至少应该不会在这方面出现错误。

我要添加的第二个相关说明是，对于带注释的时间序列图表 ( [docs](https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline) )，您必须明确设置图表的宽度和高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:13:11.960

我确实发现手风琴确实将任何包含的 div 的宽度和高度设置为 0。因此，当我尝试通过 AnnotatedTimeline 访问它时，它找不到有效的宽度或高度并抛出错误。所以我的解决方案是简单地添加一个更改回调函数以在选择图形时重绘图形并重置我的更新间隔。当它被取消选择时，我只需清除我的更新间隔。

# javascript - 存储并排序多个 Json 对象

> ID：11800619
> 
> 赞同：0
> 
> 时间：2012-08-03T17:37:43.647
> 
> 标签：javascript, arrays, sorting

我阅读了这篇关于如何对从 Json 检索到的对象进行排序的优秀文章对[JavaScript 对象数组进行排序。](https://stackoverflow.com/questions/979256/how-to-sort-an-array-of-javascript-objects)但是，如果我想访问数组的特定元素，我找不到方法。例如，

如果我们有这个-：

```
var homes = [{
   "h_id": "3",
   "city": "Dallas",
   "state": "TX",
   "zip": "75201",
   "price": "162500"
}, {
   "h_id": "4",
   "city": "Bevery Hills",
   "state": "CA",
   "zip": "90210",
   "price": "319250"
}, {
   "h_id": "5",
   "city": "New York",
   "state": "NY",
   "zip": "00010",
   "price": "962500"
}]; 
```

在我的数组中，我有类似的对象

```
for (i to n)
var date = -----something----
var message = -----something----
    var homes=[{date,message}] 
```

现在排序后，如果我想访问日期并将其存储在某个地方，我该怎么做？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:48:03.780

由于您的 json 是对象数组，因此您可以使用 array.push() 方法将对象推送到数组中，如下所示：

```
homes.push({date:new Date(), message :"shreedhar"}); 
```

如果您想将日期和消息推送到 json 中的每个对象中，您可以执行以下操作：

```
for( var i=0; i<homes.length;i++){
homes[i].message = "some msg";
homes[i].date = "some date";
}
console.log(homes); 
```

现在，如果您想访问 json 中的任何内容

```
homes[0].message; // gives you "some msg"
homes[0].date; // gives you "some date" 
```

# ruby-on-rails - 嵌入到第二个模型导轨中的时事通讯表格

> ID：11800620
> 
> 赞同：0
> 
> 时间：2012-08-03T17:37:46.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试创建一个非常简单的时事通讯注册，我可以在我的应用程序中使用它。

我创建了一个只收集电子邮件地址的时事通讯模型。我没有为时事通讯创建单独的控制器，因为我的印象是我可以在我的 Jobs 控制器中定义我需要的所有内容。

我遇到的问题是我想在我的`jobs#index`页面上显示时事通讯注册表单（这显然使用了我的工作控制器）。

我无法解决的是如何在我的工作控制器中为我的时事通讯定义新的和创建的？

理想情况下，我希望我的表单位于一个部分中，然后我可以渲染到我的工作页面上，看起来像这样：

```
 <%= Form_for @newsletter do |f| %>

    <%= f.label :email %>
    <%= f.text_field :email %>

 <% end %> 
```

如果有人能就实现这一目标的最佳方法向我提出建议，那就太好了？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:07:41.330

您可以在作业控制器中使用自定义操作（例如 new_newsletter 和 create_newsletter）来完成此操作，也就是说，您最好使用创建操作创建时事通讯控制器，然后在创建后进行重定向。这样会更容易有一个部分，你可以从应用程序的其他部分调用它，而不仅仅是工作

# javascript - 使第二个选项卡首先处于活动状态

> ID：11800621
> 
> 赞同：0
> 
> 时间：2012-08-03T17:37:47.690
> 
> 标签：javascript, jquery, html, css

我有这个非常有名的脚本，我正在尝试开始工作，目前一切都很好，但是当你第一次打开页面时，它会显示第一个选项卡，正如它应该的那样，我想要的是它显示第二个选项卡. （第一个只是一个邮件撰写选项卡，第二个是实际的收件箱）

这是javascript

```
 <script type="text/javascript">

$(document).ready(function() {

    //Default Action
    $(".tab_content").hide(); //Hide all content
    $("ul.tabs li:first").addClass("active").show(); //Activate first tab
    $(".tab_content:first").show(); //Show first tab content

    //On Click Event
    $("ul.tabs li").click(function() {
        $("ul.tabs li").removeClass("active"); //Remove any "active" class
        $(this).addClass("active"); //Add "active" class to selected tab
        $(".tab_content").hide(); //Hide all tab content
        var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
        $(activeTab).fadeIn(); //Fade in the active content
        return false;
    });

});

</script> 
```

这是选项卡的 html

```
> <ul class="tabs">
>     <li><a href="#compose" class="compose"></a></li>
>     <div id="mail_sidebar_top">
>         <li><a href="#inbox" class="inbox">Inbox(0)</a></li>
>         <li><a href="#sent_mail" class="sent_mail">Sent Mail(0)</a></li>
>         <li><a href="#trash" class="trash">Trash(0)</a></li>
>         <li><a href="#reported" class="reported">Reported</a></li>
>         <li><a href="#drafts" class="drafts">Drafts</a></li>
>         
>     </div><!---end mail_sidebar_top--->
>     
>     <div id="mail_sidebar_middle">
>         <li><a href="#notifications" class="notifications">Notifications</a></li>
>         <li><a href="#alerts" class="alerts">Alerts</a></li>
>         
>     </div><!---end mail_sidebar_top--->
>    
>     </ul> 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:22:02.857

为了显示第二个选项卡，更改这些行

```
 $("ul.tabs li:eq(1)").addClass("active").show(); //Activate second tab
   $(".tab_content:eq(1)").show(); //Show second tab content 
```

基本上，在您当前的版本中，当页面加载时，您会添加基于 jQuery 选择器的活动选项卡内容和类。因为您的 html 内容与选项卡的顺序相同，而不是在第一个实例中使用选择器（即`:first`），我们可以将其更改为`:eq(1)`. （在这种情况下是一个，因为 jquery 引用数组中的 DOM 元素，因此第一个选项卡位于索引 0 处，第二个选项卡位于索引 1 处）。要在开始时显示不同的选项卡，您只需将`:eq(1)`其中`:eq(n)`的 n 更改为您想要的选项卡的数组索引。

**编辑**一个更好的解决方案是使用 jQuery 提供的实际 eq() 函数，因为它增加了性能提升：

```
 $("ul.tabs li").eq(1).addClass("active").show(); //Activate second tab
   $(".tab_content").eq(1).show(); //Show second tab content 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T17:41:44.130

```
$(".tabs").tabs({
    selected: 1
}); 
```

[这里](http://jqueryui.com/demos/tabs/#option-selected)有很多选择。

# javascript - 覆盖浏览器滚动行为？

> ID：11800622
> 
> 赞同：2
> 
> 时间：2012-08-03T17:37:47.970
> 
> 标签：javascript, scroll

我有一个用户界面的想法，需要覆盖浏览器的滚动功能，这样我就可以为滚动操作创建自己的行为。

有没有办法防止用户滚动时窗口滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:46:26.547

你可以试试这个

```
​$(window).scroll(function() {
   $(this).scrollTop(0);
});​​ 
```

[**演示**](http://jsfiddle.net/6RLnp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:48:19.900

您可以尝试使用[jQuery Scrollbar](http://naeka.github.com/jquery-scrollbar/)库，它需要：

1.  jQuery（版本 1.6+）
2.  jQuery UI 小部件（用于小部件工厂）

您可以在此处下载该库：[https](https://github.com/Naeka/jquery-scrollbar) ://github.com/Naeka/jquery-scrollbar 。这是一个[演示](http://naeka.github.com/jquery-scrollbar/)。

以下是滚动条的选项：

```
$("#scroll").scrollbar({
    classes: '',         // Extra classes for css styling
    wheel: 40,           // Scroll offset on mousewheel
    scroll: true,        // Allow / disallow mouse scrolling
    overlay: true,       // Scrollbars are overlaid
    autohide: true,      // Scrollbars are automatically hidden
    animate: {           // Scroll wheel animation - set to false to disable
        duration: 300,
        easing: 'swing'
    }
}); 
```

您可以滚动到特定事件页面中的特定 ID：

```
$("#scroll").scrollbar("scrollTo", "#p"); 
```

以下是 scrollTo 使用的更多选项：

```
scrollTo([offsetX, offsetY])
scrollTo(selector)
scrollTo(jQuery object) 
```

# graph - 将 ZedGraph 图例定位在右中而不是右上角？

> ID：11800623
> 
> 赞同：1
> 
> 时间：2012-08-03T17:37:50.323
> 
> 标签：graph, zedgraph

有没有办法使用 ZedGraph 定位图例，使其位于右侧，但垂直居中。使用：

```
output.Legend.Position = ZedGraph.LegendPos.Right 
```

将图例定位在右上角，但在饼图旁边，这看起来没有对齐。有没有办法让图例垂直居中？改变`output.Legend.Location.Y`似乎没有效果，尝试也没有`output.Legend.Location.AlignV = ZedGraph.AlignV.Center`

为响应下面的第一个答案而添加...

浮动、减小图表大小和定位标签确实垂直居中，并且比我之前管理的要好。不幸的是，它有一个副作用，因为图例切换到多列并试图占据整个图表区域的一半宽度，因此通常与图表重叠（见图）。查看 ZedGraph 源代码，这种更宽的模式用于除左和右之外的所有布局。

![多列图例](../Images/e54e9201cb2cdbbb124dde94fa7e98b8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T21:04:10.993

`Location`仅在`Legend.Position`设置为时启用`Float`。

你可以这样做（C#）：

```
output.Legend.Position = LegendPos.Float;
output.Legend.Location = 
   new Location(1.05f, 0.5f, CoordType.ChartFraction, AlignH.Right, AlignV.Center); 
```

可能不希望的“特征”是图例部分绘制在图表内：

![图表中的图例](../Images/5ac73c28787d57f764aa973c784db103.png)

要解决此问题，我相信您还必须手动调整图表大小：

```
output.Chart.Rect = new RectangleF(xstart, ystart, xsize, ysize); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T08:51:06.807

安德斯的回答几乎奏效了，除了它有改变图例宽度的副作用。这导致我下载源代码找出原因，我发现图例定位代码实际上很琐碎。 `LegendPos.Right`仅在代码中引用了两次，两次都在`Legend.CalcRect` 添加新项中`LegendPos.MiddleRight`只需要将其添加到枚举中，这是`MiddleRight`添加到第一个 Switch 的情况，它运行与`Right`. 并在第二个 Switch 中`CalcRect`：

```
 case LegendPos.MiddleRight:
        newRect.X = clientRect.Right - totLegWidth;
        newRect.Y = tChartRect.Top + tChartRect.Height / 2 - totLegHeight / 2;
        tChartRect.Width -= totLegWidth + gapPix;
        break; 
```

`LegendPos.Right`除了 newRect.Y 行之外，这是相同的代码。

# mysql - 将 MySQL 联系人与邮件服务器或 Outlook/Mac 邮件同步

> ID：11800625
> 
> 赞同：1
> 
> 时间：2012-08-03T17:37:56.143
> 
> 标签：mysql, contacts, sync

任何建议将不胜感激！

设置：

数据库 - Mac Mini OSX 办公服务器上的 MySql 5.5.9

邮件服务器 - Kerio Connect

应用程序 - 各种 PC、Mac、iPhone 等上的 Outlook、Mac 邮件、联系人等。

我的公司有一个内部 Mac Mini 服务器用于我们的 MySQL 数据库，它不用于任何电子邮件服务。我需要将我们的联系人列表从数据库同步或推送到 Kerio Connect 上的公共文件夹或电子邮件程序。Kerio 会自动在设备和计算机之间同步，所以如果我可以将数据库中的记录保存到 Outlook 等程序中，剩下的就可以处理了。

我已经试用了 GeniusConnect 的演示版，但遇到了许多错误。这是开箱即用解决方案的唯一选择吗？

# quartz-scheduler - Quartz 调度程序：否决作业执行导致触发器不再触发

> ID：11800628
> 
> 赞同：3
> 
> 时间：2012-08-03T17:38:09.843
> 
> 标签：quartz-scheduler

我正在使用 Java Web 应用程序中的石英实现。我们已经实现了 TriggerListener 类，因此当触发器触发时，它会调用 vetoJobExecution(Trigger trigger, JobExecutionContext jobExecutionContext) 方法。我们检查参考表以查看作业是否应该运行。所有这一切都很好。

损坏的部分是作业是否不应运行，因此 vetoJobExecution 方法返回 false。在那之后，触发器将永远不会再次触发。这是我不明白的部分。似乎触发器应该继续触发，并且应该继续调用 vetoJobExecution 方法以查看作业是否应该运行。这根本不会发生 - 一旦作业被否决，触发器不会再次触发，并且永远不会调用 vetoJobExecution 方法。

我们使用的是 Quartz 1.5.2（是的，它很旧，我知道）。

*让石英作业不*使用 TriggerListener 接口运行但下次仍然触发触发器的正确​​策略是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:39:06.780

通过升级到版本 1.7.3 修复。

# google-maps-api-3 - 偏移谷歌地图 DirectionsService 折线

> ID：11800630
> 
> 赞同：0
> 
> 时间：2012-08-03T17:38:13.060
> 
> 标签：google-maps-api-3

我在谷歌地图 api v3 方向服务上绘制了两条折线。

我的问题是它们在地图的一部分重叠的地方，一个覆盖了其他的。我想一共画6条线，它们是我所在城市的公交线路。所有路线都返回城市的同一区域，但很难将它们区分开来。

有没有办法稍微偏移每一行？

```
function busRoute2(source,destination){
        // show route between the points
        directionsService = new google.maps.DirectionsService();
        directionsDisplay = new google.maps.DirectionsRenderer(
        {
            suppressMarkers: true,
            suppressInfoWindows: true,
            polylineOptions: { strokeColor: '#000000', strokeOpacity: 0.5 } 
        });
        directionsDisplay.setMap(map);
        var request = {
            origin:source, 
            destination:destination,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
        };
        directionsService.route(request, function(response, status) 
        {
            if (status == google.maps.DirectionsStatus.OK) 
            {
                directionsDisplay.setDirections(response);

            }
        });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T01:31:31.803

忘记我的建议。我试图创建一个重复图标（2 像素点），每从折线偏移 4 个像素重复一次。它看起来非常恶心并且落后于浏览器。

我将不得不创建一个函数，在加载时根据角度 dLat、dLng 和缩放比例编辑折线的坐标。

因为您希望您的标记（站点、公共汽车）和线路位于道路的一侧，朝一个方向行驶，而在相反的一侧返回。您也不想掩盖地图上的道路名称

如果有人想帮助我，请发送电子邮件至huntington@beachincalifornia.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T07:27:24.937

这是工作代码（非常基本）[折线偏移贴图动画](http://beachincalifornia.com/pt/testlines.php)注意：图标“偏移”属性是图标沿线的偏移百分比。您需要操作图标（在您的情况下为线）本身的相对“路径”坐标（SVG 格式），以便将其从线偏移

# php - 无法使用 PHP 数组格式化 JSON 响应

> ID：11800636
> 
> 赞同：0
> 
> 时间：2012-08-03T17:38:31.480
> 
> 标签：php, arrays, json, formatting

我想要以下 JSON：

```
{"success": false,"errors": {"err1": "some error","err2": "another error"}} 
```

我正在使用的代码：

```
$rs = array("success"=>true);
$rs['errors'][] = array("err1"=>"some error");
$rs['errors'][] = array("err2"=>"another error");
json_encode($rs); 
```

产生以下内容：

```
{"success":false,"errors":[{"err1":"some error"},{"err2":"another error"}]} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:41:14.863

`errors`应该是一个关联数组。

```
$rs = array('success' => false, 'errors' => array());
$rs['errors']['err1'] = 'some error';
$rs['errors']['err2'] = 'another error';
echo json_encode($rs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:51:01.953

您尝试创建的 JSON 字符串中没有任何数组。它有嵌套对象。您需要创建一个对象才能复制该 JSON 字符串，如下所示：

```
$root_obj = new StdClass();
$root_obj->success = false;
$root_obj->errors = new StdClass();
$root_obj->errors->err1 = 'some error';
$root_obj->errors->err2 = 'another error'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:42:03.600

`errors`包含单个对象，而不是数值数组中的多个对象。这应该有效：

```
$a = array(
  "success" => false,
  "errors" => array(
    "err1" => "some error",
    "err2" => "another error"
  )
);
json_encode($a); 
```

# java - 找不到公共日志记录类

> ID：11800638
> 
> 赞同：7
> 
> 时间：2012-08-03T17:38:37.110
> 
> 标签：java, maven

真奇怪。我只是在我的 Web 应用程序中更改了一些内容，但无法还原这些内容，因为我不记得我所做的更改。

尝试运行我的 web 应用程序时出现此异常：

```
Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:270)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1701)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
    ... 12 more 
```

这是我的 pom.xml 文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>com.example</groupId>
    <artifactId>example</artifactId>
    <name>example</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>

    <properties>
        <java.version>1.6</java.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <spring.version>3.1.1.RELEASE</spring.version>
        <slf4j.version>1.6.4</slf4j.version>
    </properties>

    <dependencies>

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>

        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                 </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${spring.version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                 </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${spring.version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>                       
        </dependency>

        <!-- Wro4j -->
        <dependency>
            <groupId>ro.isdc.wro4j</groupId>
            <artifactId>wro4j-extensions</artifactId>
            <version>1.4.7</version>
        </dependency>

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${slf4j.version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${slf4j.version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${slf4j.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
            <scope>runtime</scope>
        </dependency>

        <!-- Hibernate -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.1.Final</version>
        </dependency>
        <dependency>
            <groupId>postgresql</groupId>
            <artifactId>postgresql</artifactId>
            <version>9.1-901-1.jdbc4</version>
        </dependency>

        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Apache Tiles -->
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>2.2.2</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging-api</artifactId>
                 </exclusion>
            </exclusions>
        </dependency>

        <!-- JSR 303 with Hibernate Validator -->
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.1.0.Final</version>
        </dependency>

        <!-- JSR 250 -->
        <dependency>
            <groupId>javax.annotation</groupId>
            <artifactId>jsr250-api</artifactId>
            <version>1.0</version>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${spring.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
            <scope>test</scope>
        </dependency>

        <!-- Custom tag libraries -->
        <dependency>
            <groupId>com.github.slugify</groupId>
            <artifactId>slugify-taglib</artifactId>
            <version>1.0-RELEASE</version>
        </dependency>

        <!-- Joda Time -->
        <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time</artifactId>
            <version>2.1</version>
        </dependency>

    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

我只记得我添加了 Joda Time 和 JSR 250 API，但两者都对 commons-logging 没有任何依赖？！

如果需要更多代码，请告诉我，我会提供。

**编辑**

依赖树：

```
[INFO] +- cglib:cglib:jar:2.2.2:compile
[INFO] |  \- asm:asm:jar:3.3.1:compile
[INFO] +- commons-logging:commons-logging:jar:1.1.1:provided (scope not updated to compile)
[INFO] +- org.springframework:spring-context:jar:3.1.1.RELEASE:compile
[INFO] |  +- org.springframework:spring-aop:jar:3.1.1.RELEASE:compile
[INFO] |  +- org.springframework:spring-beans:jar:3.1.1.RELEASE:compile
[INFO] |  +- org.springframework:spring-core:jar:3.1.1.RELEASE:compile
[INFO] |  +- org.springframework:spring-expression:jar:3.1.1.RELEASE:compile
[INFO] |  \- org.springframework:spring-asm:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework:spring-orm:jar:3.1.1.RELEASE:compile
[INFO] |  \- org.springframework:spring-jdbc:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework:spring-tx:jar:3.1.1.RELEASE:compile
[INFO] |  \- aopalliance:aopalliance:jar:1.0:compile
[INFO] +- org.springframework:spring-webmvc:jar:3.1.1.RELEASE:compile
[INFO] |  +- org.springframework:spring-context-support:jar:3.1.1.RELEASE:compile
[INFO] |  \- org.springframework:spring-web:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework.security:spring-security-web:jar:3.1.1.RELEASE:compile
[INFO] |  \- org.springframework.security:spring-security-core:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework.security:spring-security-config:jar:3.1.1.RELEASE:compile
[INFO] +- ro.isdc.wro4j:wro4j-extensions:jar:1.4.7:compile
[INFO] |  +- ro.isdc.wro4j:wro4j-core:jar:1.4.7:compile
[INFO] |  +- org.apache.commons:commons-lang3:jar:3.1:compile
[INFO] |  +- commons-io:commons-io:jar:2.1:compile
[INFO] |  +- commons-pool:commons-pool:jar:1.6:compile
[INFO] |  +- com.google.code.gson:gson:jar:1.6:compile
[INFO] |  +- com.google.javascript:closure-compiler:jar:r1918:compile
[INFO] |  |  +- args4j:args4j:jar:2.0.12:compile
[INFO] |  |  +- com.google.guava:guava:jar:10.0.1:compile
[INFO] |  |  +- com.google.protobuf:protobuf-java:jar:2.4.1:compile
[INFO] |  |  +- org.json:json:jar:20090211:compile
[INFO] |  |  +- org.apache.ant:ant:jar:1.8.2:compile
[INFO] |  |  |  \- org.apache.ant:ant-launcher:jar:1.8.2:compile
[INFO] |  |  +- com.google.code.findbugs:jsr305:jar:1.3.9:compile
[INFO] |  |  \- com.googlecode.jarjar:jarjar:jar:1.1:compile
[INFO] |  +- org.mozilla:rhino:jar:1.7R3:compile
[INFO] |  +- com.github.lltyk:dojo-shrinksafe:jar:1.7.2:compile
[INFO] |  +- org.jruby:jruby-complete:jar:1.6.7.2:compile
[INFO] |  +- me.n4u.sass:sass-gems:jar:3.1.16:compile
[INFO] |  +- nz.co.edmi:bourbon-gem-jar:jar:2.1.0:compile
[INFO] |  \- org.codehaus.gmaven.runtime:gmaven-runtime-1.7:jar:1.3:compile
[INFO] |     +- org.codehaus.gmaven.feature:gmaven-feature-support:jar:1.3:compile
[INFO] |     |  \- org.codehaus.gmaven.feature:gmaven-feature-api:jar:1.3:compile
[INFO] |     +- org.codehaus.gmaven.runtime:gmaven-runtime-support:jar:1.3:compile
[INFO] |     |  +- org.codehaus.gmaven.runtime:gmaven-runtime-api:jar:1.3:compile
[INFO] |     |  +- org.sonatype.gshell:gshell-io:jar:2.0:compile
[INFO] |     |  +- org.codehaus.plexus:plexus-utils:jar:2.0.1:compile
[INFO] |     |  \- com.thoughtworks.qdox:qdox:jar:1.10:compile
[INFO] |     +- org.codehaus.groovy:groovy-all:jar:1.7.4:compile
[INFO] |     \- jline:jline:jar:0.9.94:compile
[INFO] +- org.slf4j:slf4j-api:jar:1.6.6:compile
[INFO] +- org.slf4j:jcl-over-slf4j:jar:1.6.6:compile
[INFO] +- org.slf4j:slf4j-log4j12:jar:1.6.6:runtime (scope not updated to compile)
[INFO] +- log4j:log4j:jar:1.2.17:runtime
[INFO] +- org.hibernate:hibernate-core:jar:4.1.1.Final:compile
[INFO] |  +- antlr:antlr:jar:2.7.7:compile
[INFO] |  +- org.jboss.logging:jboss-logging:jar:3.1.0.GA:compile
[INFO] |  +- org.jboss.spec.javax.transaction:jboss-transaction-api_1.1_spec:jar:1.0.0.Final:compile
[INFO] |  +- dom4j:dom4j:jar:1.6.1:compile
[INFO] |  |  \- xml-apis:xml-apis:jar:1.0.b2:compile
[INFO] |  +- org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.1.Final:compile
[INFO] |  +- org.javassist:javassist:jar:3.15.0-GA:compile
[INFO] |  \- org.hibernate.common:hibernate-commons-annotations:jar:4.0.1.Final:compile
[INFO] +- postgresql:postgresql:jar:9.1-901-1.jdbc4:compile
[INFO] +- javax.servlet:servlet-api:jar:2.5:provided
[INFO] +- javax.servlet:jstl:jar:1.2:compile
[INFO] +- org.apache.tiles:tiles-jsp:jar:2.2.2:compile
[INFO] |  +- org.apache.tiles:tiles-servlet:jar:2.2.2:compile
[INFO] |  |  \- org.apache.tiles:tiles-core:jar:2.2.2:compile
[INFO] |  |     \- commons-digester:commons-digester:jar:2.0:compile
[INFO] |  |        \- commons-beanutils:commons-beanutils:jar:1.8.0:compile
[INFO] |  \- org.apache.tiles:tiles-template:jar:2.2.2:compile
[INFO] |     \- org.apache.tiles:tiles-api:jar:2.2.2:compile
[INFO] +- javax.validation:validation-api:jar:1.0.0.GA:compile
[INFO] +- org.hibernate:hibernate-validator:jar:4.1.0.Final:compile
[INFO] +- javax.annotation:jsr250-api:jar:1.0:compile
[INFO] +- junit:junit:jar:4.10:test (scope not updated to compile)
[INFO] |  \- org.hamcrest:hamcrest-core:jar:1.1:test
[INFO] +- org.springframework:spring-test:jar:3.1.1.RELEASE:test
[INFO] +- commons-dbcp:commons-dbcp:jar:1.4:test
[INFO] +- com.github.slugify:slugify-taglib:jar:1.0-RELEASE:compile
[INFO] |  \- com.github.slugify:slugify:jar:1.0-RELEASE:compile
[INFO] |     \- commons-lang:commons-lang:jar:2.6:compile
[INFO] \- joda-time:joda-time:jar:2.1:compile 
```

**编辑 2**

注释掉所有与 spring-security 相关的东西会导致这个运行时异常（将所有排除替换为 commons-logging 依赖与 scope `provided`）：

```
Exception sending context destroyed event to listener instance of class org.springframework.web.context.ContextLoaderListener
java.lang.ExceptionInInitializerError
    at org.springframework.web.context.ContextLoaderListener.contextDestroyed(ContextLoaderListener.java:144)
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4819)
    at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5466)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:160)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.IllegalStateException: org.slf4j.LoggerFactory could not be successfully initialized. See also http://www.slf4j.org/codes.html#unsuccessfulInit
    at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:303)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:269)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:156)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:132)
    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:272)
    at org.springframework.web.context.ContextCleanupListener.<clinit>(ContextCleanupListener.java:43)
    ... 12 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T16:49:29.290

这似乎是一个 IDE 错误...我已经将 Eclipse 与 WTP 和 Maven 一起使用。有一个 tmp0 和 tmp1 文件夹，我重新创建了工作区。现在它又开始工作了……奇怪的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T18:10:49.330

[此](http://www.slf4j.org/faq.html#excludingJCL)页面中的选项 2可能会对您有所帮助。

> 通过在项目的 pom.xml 文件中提供的范围内声明 Commons-logging，可以相当简单方便地将其排除为依赖项。实际的公共日志记录类将由 jcl-over-slf4j 提供。

（参见示例 POM 片段的链接）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:46:04.597

我在 pom 中看到了公共日志记录的排除，并且异常还说它找不到公共日志记录的 jar。检查一下

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T19:18:31.733

看起来 spring-webmvc 也依赖于 commons-logging。您应该为它添加一个排除项，就像为 spring-framework 和 spring-security 一样。

# wcf - WCF 独立进程会意外死亡吗？

> ID：11800642
> 
> 赞同：0
> 
> 时间：2012-08-03T17:39:00.390
> 
> 标签：wcf, crash

我想确定作为独立可执行文件（或 Windows 服务）运行的 WCF 服务不会崩溃。

如果不是很明显，我正在寻找的不仅仅是是或否的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:42:43.723

是的。它可能会耗尽磁盘空间或内存空间。或者一些具有受保护访问的应用程序可能会出现并破坏它的内存。CPU 可能会遇到间歇性硬件故障，从而导致一些原本不可能的变量值集导致崩溃。它们有无数种可能但不太可能导致它意外崩溃的场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:46:25.187

以我的经验，这些通常是由于代码中的错误或在访问正在运行的进程外部的资源时缺乏异常处理而死的。IE 文件、数据库、Web 服务等。

斯宾塞的评估说明了您无法控制的事情。

# javascript - 将变量组合成一个函数

> ID：11800653
> 
> 赞同：0
> 
> 时间：2012-08-03T17:39:49.037
> 
> 标签：javascript, variables

我希望将变量组合成一个文本字符串。

```
$(function(){
var txt = $("#titleDisplay");
$("#para1").html(txt);
}); 
```

以上是我到目前为止所拥有的，我想采取它并添加见下文

```
$(function(){
var txt = '<img src=\"' $("#titleDisplay") + $("#titleDisplay") + $("#titleDisplay") '\">';
$("#para1").html(txt);
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:43:35.517

您似乎缺少`+`字符串和变量之间的内容。这就是你所需要的。

我什至不会问你为什么要

```
<img src="[object Object][object Object][object Object]"> 
```

# objective-c - 从 NSDictionary 中检索 NSArray

> ID：11800663
> 
> 赞同：-2
> 
> 时间：2012-08-03T17:40:34.270
> 
> 标签：objective-c, ios, arrays, dictionary

我正在尝试获取一个包含我的数据的数组，当我运行它时，我一直收到 BAD_ACCESS 错误，尽管在调用我没有包含在此处的数组时，但我什至注释掉了该代码并尝试将其调用到日志中并仍然收到 BAD_ACCESS 错误。该数组存储在一个字典中，该字典包含一个数字键。我不确定我在这里做错了什么。

```
ISData *is = [[ISData alloc] init];
NSDictionary *dic = [is getData:@"right" : isNumber];

NSArray *array = [[NSArray alloc] initWithArray:[dic valueForKey:@"2"]];

NSString *out = [array objectAtIndex:0]; 
```

字典是如何创建的：

```
NSNumber* key = [NSNumber numberWithInt:isNumber];
NSArray *values = [NSArray arrayWithObjects:[NSString stringWithUTF8String:name], [NSString stringWithUTF8String:desc], [NSString stringWithUTF8String:intent], nil];

[dic setObject:values forKey:key]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:46:50.567

您的数组很可能是空的。您可以尝试打印`NSLog(@"count = %d", array.count);`以查看是否是这种情况。

如果你`dic`是在第二个代码块中设置的，那么`NSDictionary *dic = [is getData:...]`第一个块中的那个东西是什么？

您是否有理由无法直接设置阵列？当字典只有一个键时，你有理由使用它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:47:52.083

您没有确切说明它在哪里崩溃，并且这里没有明显的崩溃错误，因此很难诊断出您的实际问题。这可能是您提供的代码之外的内存管理问题。但是这里发生了一些可疑的事情：

1.  `[MyClass alloc]`没有电话，您永远不应该裸露`-init`。你的 init 应该调用 super 的 init，它负责设置新对象。

2.  你`-valueForKey:`应该是`-objectForKey:`。在这种情况下，差异可能并不重要，但前者用于“KVC”编码，而您没有使用它。如果将其设置为对象，则将其作为对象获取。

3.  你`@"2"`作为字典的键与你的输入不匹配，这是一个 NSNumber。NSNumbers 不是数字的字符串版本，因此您不太可能在那里找到任何值。相反，请使用相同的`[NSNumber numberWithInt:2]`模式。

# google-chrome - Chrome 错误：不安全的 Javascript 尝试

> ID：11800667
> 
> 赞同：1
> 
> 时间：2012-08-03T17:41:04.333
> 
> 标签：google-chrome, iframe, dns, xss

我的页面上有一个 iframe。iframe 中的页面属于同一个域。尝试在 iframe 中打开弹出窗口时，iframe 中的页面出现错误。

下面是我从 chrome 控制台收到的错误消息的快照。

[![铬错误](../Images/5725be736f914e812653d7b92e2257b2.png)](https://i.stack.imgur.com/IBDbn.png)
[（来源：[farfromthere.org](http://farfromthere.org/wp-content/uploads/2012/08/Chrome-iframe-bug.png)）]

iframe 中弹出窗口的功能在使用 firefox 时效果很好。所以这似乎只是一个 chrome 问题。如您所见，主页和 iframe 都在同一个域中，并且都是 HTTPS 协议。

我不知道这是一个错误，还是我做错了什么。

请帮忙。

# android - 无法获得连接工厂客户端mapactivity android？我该如何解决？

> ID：11800669
> 
> 赞同：-1
> 
> 时间：2012-08-03T17:41:28.527
> 
> 标签：android, eclipse, android-layout, map, android-mapview

我在我的应用程序中使用地图视图并使用 Google Api 2.2 作为基础 sdk。但是当我运行应用程序时，地图视图未显示，并且此错误显示在日志中无法获取连接工厂客户端，所以问题是什么以及如何我可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:53:23.920

`MapView`当我在以前的项目中使用该类时，我注意到了同样的事情，谷歌搜索了这条消息，显然它是无害的。

我的应用程序运行良好，地图也运行良好，但我仍然不时收到此日志消息，没有任何明显的东西。

有人说“您需要一个适当的 API 密钥/一个位置/一个适当的 ItemizedOverlay/一个以中心为中心的点/权限集”。我得到了所有这些，但我仍然收到错误消息。堆栈跟踪表明它与我调用和使用类的方式无关，所以我只是忍受它并忽略它。

我发现的最合理的答案是它实际上是课堂上的一个错误：

*   [http://code.google.com/p/android/issues/detail?id=8816](http://code.google.com/p/android/issues/detail?id=8816)
*   [无法获取连接工厂客户端](https://stackoverflow.com/questions/2199403/couldnt-get-connection-factory-client)

# perl - Log4Perl：如何更改运行代码中使用的记录器文件？（叉后）

> ID：11800670
> 
> 赞同：2
> 
> 时间：2012-08-03T17:41:28.547
> 
> 标签：perl, log4perl

我在 perl 中设置了一个 ETL 进程来处理许多文件，并将它们加载到数据库中。

最近，出于性能原因，我通过使用 fork() 调用和对 system("perl someOtherPerlProcess.pl $arg1 $arg2") 的调用将代码设置为多线程。

我最终得到了大约 12 个使用不同参数运行的 someOtherPerlProcess.pl 实例，这些进程每个都通过一个包含文件的目录（对应于我们数据库中的一个表）工作。

应用程序的主要功能可以工作，但我在弄清楚如何配置我的日志记录时遇到了问题。

理想情况下，我希望所有 someOtherPerlProcess.pl 共享相同的 $log_config 值来初始化他们的记录器，但让每个人在他们正在处理的目录中创建一个日志文件。

我一直无法弄清楚如何做到这一点。我还注意到，在我调用这些 perl 脚本的目录中，我看到了几个包含我所有日志消息的文件（ARRAY(0x260eec)、ARRAY(0x313f8) 等）！

有没有一种简单的方法可以从运行代码中更改 log4perl.appender.A1.filename 值？或者以其他方式动态配置我们使用的文件名，但使用配置文件中的所有其他值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:43:58.717

我为此想出了一个不太理想的解决方案，即直接从 someOtherPerlProcess.pl 配置我的记录器。

```
my $FORKED_LOG_CONF = "log4perl.appender.A1.filename=$directory_to_load/log.txt
log4perl.rootLogger=WARN, A1
log4perl.appender.A1=Log::Log4perl::Appender::File
log4perl.appender.A1.mode=append
log4perl.appender.A1.autoflush=1
log4perl.appender.A1.layout=PatternLayout
log4perl.appender.A1.layout.ConversionPattern=[%p] %d{yyyy-MM-dd HH:mm:ss}: %m%n";

#Logger start up
Log::Log4perl::init( \$FORKED_LOG_CONF);
my $logger = get_logger(); 
```

$directory_to_load 是记录器的进程特定部分，它在运行的 perl 进程的上下文中工作，并且该变量具有（本地）值，但如果在外部配置文件中使用该方法将失败。

我很高兴听到任何替代解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T05:25:49.007

在您的配置文件中：

```
log4perl.appender.A1.filename=__LOGFILE__ 
```

在您的脚本中：

```
use File::Slurp;
my $log_cfg = read_file( $log_cfgfile );
my $logfile = "$directory_to_load/log.txt";
$log_cfg =~ s/__LOGFILE__/$logfile/;
Log::Log4perl::init( \$log_cfg ); 
```

# xcode - IB选课有什么作用？

> ID：11800676
> 
> 赞同：0
> 
> 时间：2012-08-03T17:42:26.407
> 
> 标签：xcode, class, identity

新手问题。

我正在 Snow Leopard 上使用 xcode 4.2 构建一个可可应用程序。假设我想要一个带有视图控制器的表视图。我选择 File->New->New File，选择 Objective-C 类，将其命名为 foo 并指定它是 NSViewController 的子类。xcode 为我创建了 foo.h、foo.m 和 foo.xib。然后我创建另一个新类，将其命名为 bar，指定它是 NSTableView 的后代，xcode 创建 bar.h 和 bar.m。

当我在 IB 中打开 foo.xib 时，我看到一个标有“自定义视图”的蓝色矩形。我选择该视图，然后在 Identity Inspector 中将其类设置为 bar，即我刚刚创建的 NSTableView 后代。我希望 IB 中自定义视图的外观会变为 TableView 的外观，就好像我从对象库中拖动了一个 NSTableView 并将其放到自定义视图上一样。但这不会发生。相反，自定义视图的名称只是更改为 bar。我不知道我是否有表格视图。

创建新表视图和控制器的正确方法是什么？

# css - div的一部分被相对div隐藏了

> ID：11800677
> 
> 赞同：0
> 
> 时间：2012-08-03T17:42:27.687
> 
> 标签：css, internet-explorer, internet-explorer-8

我做了一个下拉菜单。它应该通过单击`absolute`定位内的按钮出现`div`。

效果很好，但是 IE8 隐藏了出现在`absolute`定位的底部边框下的部分菜单`div`。

![截屏](../Images/5a6f109a427e523e1895474fefef281d.png)

这是代码（没有js）：http: [//jsfiddle.net/cQcJ5/1/](http://jsfiddle.net/cQcJ5/1/)

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:49:59.070

我没有要测试的 IE8，但这听起来像是标题或菜单中某处的 z-index 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:21:50.720

您是否在标记开始时使用 DOCTYPE 声明？

尝试：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"> 
```

# google-analytics - 谷歌分析数据到 PHP 页面

> ID：11800679
> 
> 赞同：1
> 
> 时间：2012-08-03T17:42:29.480
> 
> 标签：google-analytics, google-api

我有一个多作者博客，我在其中使用自定义变量跟踪每个作者及其在 Google Analytics 中的广告收入。我想知道是否可以使用 Google Analytics API 将这些数据导出到具有以下格式的 PHP 页面：

```
Author | Revenue
------------------
Jean   | $3.21
Sammy  | $1.43
Mona   | $7.21 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:47:19.890

您将要使用 Google 放在一起的 API 库：

[http://analytics.blogspot.com/2012/05/new-google-analytics-easy-dashboard.html](http://analytics.blogspot.com/2012/05/new-google-analytics-easy-dashboard.html)

# mysql - Rails，将列添加到选择语句

> ID：11800680
> 
> 赞同：3
> 
> 时间：2012-08-03T17:42:30.330
> 
> 标签：mysql, ruby-on-rails, ruby, activerecord

```
@products=@products
  .group('products.id')
  .joins(:inventories)
  .select('products.*, sum(inventories.units_available) as `level`') 
```

是我可以选择的东西，尽管我不想使用产品。* 因为我不希望每次都使用所有数据，我只想将 sum() 添加到 Select {stuff} 中的内容中产品

如何将某些内容附加到栏轨选择而不是覆盖它？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T17:52:15.210

默认情况下，Rails 会选择“*”，所以这有点违背你所说的只想选择一些列。您是否尝试过只做您需要的列，然后在需要时选择获取更多/所有列？我假设你需要`product_id`加入才能工作..

```
@products = @products
  .group('products.id')
  .joins(:inventories)
  .select('products.id, inventories.product_id, inventories.units_available, sum(inventories.units_available) as `level`')

if i_need_some_other_column
  @products = @products.select('products.some_other_column') 
end

if i_really_need_all_the_columns
  @products = @products.select('products.*, inventories.*')
end 
```

我 99% 确信链接选择将智能地添加其余列。

# javascript - 放置由 javascript 生成的同一图像的多个实例

> ID：11800686
> 
> 赞同：0
> 
> 时间：2012-08-03T17:42:53.833
> 
> 标签：javascript, jquery, html, css

我正在制作一个测试页面，用户在其中输入他们消耗了多少糖，然后生成一个图形仪表，向他们显示该值如何对应于每日推荐的糖摄入量。

仪表本身是一个图形，我将其分为三个部分：开始盖、中间盖和结束盖。请参阅以下链接：http: [//i.imgur.com/CfFI7.jpg](http://i.imgur.com/CfFI7.jpg)

我的问题是我当前正在运行的代码不想在包含的 div 中附加一个以上中间部分的实例。在这种情况下，我只需更改图形该部分的宽度就足够了，但我宁愿能够将图形复制 x 次，直到它填充适当数量的条。图形的每个部分（开始、中间和结束）都是 10 像素宽。

注意：我正在尝试对其进行编码，以便它根据我在 css 中给出的大小动态填充仪表（而不是使用固定宽度的条/米）。

这是我的javascript：

```
function showbar() {
    //GRAPHICS OF BAR
    sugarbar = document.getElementById('bar1');
    bar_width = parseInt($('#bar1').css("width"))
    $('#bar1').css({
        "height": "10px", "width": "300px", "border-radius" : "4px", "border": "1px solid #666633", "background-color": "cccc66" });

    //CALCULATION OF SUGAR LEVELS
    sugarunit = (parseInt($('#bar1').css("width")))/100;
    sugaramount = sugarunit*data.sugar;

    //MUST SET IMAGE HEIGHT
    barheight = "10" 

    //VALUE ON BAR
    bar_start = new Image();
    bar_start.src = "startcap.png";
    bar_start.height = barheight; 

    bar_middle = new Image();
    bar_middle.src = "midbar.png";
    bar_middle.height = barheight; 

    bar_end = new Image();
    bar_end.src = "endcap.png";
    bar_end.height = barheight;

    //IF THE SUGAR INTAKE IS LESS THAN THE PIXEL WIDTH OF THE STARTING CAP
    if (sugaramount<bar_start.width) {
        bar_start.width=sugaramount;
        sugarbar.appendChild(bar_start);
        sugarbar.appendChild(bar_end);
    }

    //IF THE SUGAR INTAKE IS BETWEEN THE WIDTH OF THE STARTING CAP AND BEFORE THE END CAP CAN BEGIN
    else if (sugaramount>=bar_start.width) {
        sugarbar.appendChild(bar_start);

        i = Math.floor(sugaramount-(bar_start.width+bar_end.width));

        for (j=1; j<=i; j++) {
            sugarbar.appendChild(bar_middle);
        }

        bar_middle.width = sugaramount%10;
        sugarbar.appendChild(bar_middle);
        sugarbar.appendChild(bar_end);
    }
} 
```

编辑：澄清一下，appendChild 不想包含我创建的图像的多个实例。它只显示一次，即使我写了 sugarbar.appendChild(bar_middle); 多次。是否有一个原因？

EDIT2：如果您想尝试使用它，我制作了一个 jsfiddle [http://jsfiddle.net/7W6HY/1/](http://jsfiddle.net/7W6HY/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:52:53.093

每次状态更改时，您都需要调用此函数。因此，当用户输入消耗了多少糖时，该事件需要调用此函数：

```
var input = document.getElementById('yourinput');
input.addEventListener('blur', showbar, false); 
```

当然，我建议将参数传递给`showbar()`具有糖量的函数。

但是，每次调用该函数时，都需要从 DOM 中删除其他图像（或隐藏它们）。检查图像是否存在。如果是，则将其删除（或隐藏）。

# php - PHP数组排序（）

> ID：11800688
> 
> 赞同：1
> 
> 时间：2012-08-03T17:42:59.590
> 
> 标签：php, sorting

我遇到了一个排序问题，我有一个包含 10 个数字 (1-10) 的数组，我需要按以下方式对它进行排序，例如，10 会在 1 之后...

**期望的结果**

```
$arr['a1','a10','a2','a3','a4','a5','a6','a7','a8','a9']; 
```

**实际结果**

```
$arr['a1','a2','a3','a4','a5','a6','a7','a8','a9','a10'];

sort($arr);

$arr['a10','a1','a2','a3','a4','a5','a6','a7','a8','a9']; 
```

我不知道这种排序的名称或如何执行它，如果有人可以帮助我，将不胜感激。

注意：数字是字符串的一部分

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T17:45:08.497

尝试`sort($arr,SORT_STRING)`将输入显式视为字符串。

编辑：现在你已经给出了你的实际字符串，试试这个：

```
usort($arr,function($a,$b) {
    $a = explode("=",$a);
    $b = explode("=",$b);
    return $a[0] == $b[0] ? strcmp($a[1],$b[1]) : strcmp($a[0],$b[0]);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:50:03.720

当然，您想按字母顺序排序，而不是按数字排序。

```
sort($arr, SORT_STRING); 
```

参考： http: [//php.net/manual/en/function.sort.php](http://php.net/manual/en/function.sort.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:54:47.447

您可以使用它的第二个参数更改排序的行为。

试试这个：

```
sort($arr, SORT_STRING); 
```

# javascript - 如何禁用适用于 InternetExplorer 和 Mozilla Firefox 的 div 标签

> ID：11800689
> 
> 赞同：0
> 
> 时间：2012-08-03T17:43:10.353
> 
> 标签：javascript

如何禁用适用于 InternetExplorer 和 Mozilla Firefox 的 div 标签

我正在使用 document.getElementById("xx").disabled = true; 但这在 Mozilla Firefox 中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:48:25.387

[演示](http://jsfiddle.net/JAgzU/)

使用此功能将禁用 div、文本框等中的任何内容...我假设这就是您所需要的。

```
toggleDisabled(document.getElementById('test'));

function toggleDisabled(el) {
    try {
        el.disabled = el.disabled ? false : true;
    }
    catch (e){ }

    if (el.childNodes && el.childNodes.length > 0) {
        for (var x = 0; x < el.childNodes.length; x++) {
            toggleDisabled(el.childNodes[x]);
        }
    }
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:56:56.900

您可以使用 div 的样式隐藏和显示 div：

```
document.getElementById("xx").style.display = 'none'
document.getElementById("xx").style.display = 'block' 
```

以下是一个演示：

```
<html>
<body>

<a href="javascript://" onclick="document.getElementById('hideme').style.display = 'none'">hide</a>
<a href="javascript://" onclick="document.getElementById('hideme').style.display = 'block'">show</a>

<div id="hideme">
hello world
</div>

</body>
</html> 
```

# .net - 防止 System.Net.Sockets 服务器-客户端中的 MITM

> ID：11800702
> 
> 赞同：1
> 
> 时间：2012-08-03T17:44:10.133
> 
> 标签：.net, security, tcp, client-server

我有一个用作服务器的 TCP 侦听器和连接到该服务器并共享我真的不希望被 MITM 泄露的关键信息（中间人攻击）的 TCP 客户端

**我的问题（非常清楚）我如何确保我的客户端连接到我的服务器而不是任何其他假服务器**[所以我确保攻击者没有制作假服务器并使用客户端而不支付帐户费用]

**注意：**正如我在开始时所说的那样，我没有使用 webservice ，它只是一个侦听所有客户端连接的 Socket 侦听器

*我被告知要使用带有证书的 SSLStream，但是没有很好的文档，所以有什么方法可以实现我想要的，或者使用证书的 SSLStream 的任何好的 [BASIC] 文档*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:06:04.050

它很简单——你使用 SSL。这是一种在互联网和专用网络中使用的久经考验的真实技术。

关键是验证服务器提供的证书是您信任的证书。

第一步是产生一个监听套接字 SSL，并给套接字一个证书。检查客户端是否可以连接到它，并且 SSL 会话正在建立。之后，您可以在 SSLStream 类中实现验证回调，以检查服务器提供的证书是否是您期望的证书。

# css - 子 div 在最大 div 之后调整大小

> ID：11800703
> 
> 赞同：0
> 
> 时间：2012-08-03T17:44:10.283
> 
> 标签：css, html

我正在尝试在父 div 中设置 3 个 div，父 div 将在子 div 的最大高度后调整大小，但我也希望其他 2 个子 div 的大小与高度最大的 div 相同。

```
<div id="parent">
  <div class="child"></div>
  <div class="child"></div>
  <div class="child"></div>
</div> 
```

父 div 的宽度为 600px，没有给出高度，因此它将根据子 div 的最大高度进行扩展。

```
#parent {
  width: 600px;
  overflow: auto;
}

.child {
  width: 200px;
  float: left;
} 
```

这是我到目前为止得到的，但是如果子 div 的高度不同，则父 div 高度是子 div 高度中最大的，但其他 2 个子 div 不采用父级的高度（最大子 div 的高度） ）。

提前谢谢你，丹尼尔！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:32:06.117

这个：[http](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks) ://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks这个：[http ://buildinternet.com/2009/07/four-methods-to-create-等高列/](http://buildinternet.com/2009/07/four-methods-to-create-equal-height-columns/)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-15T16:22:57.500

一种方法是使用 CSS 的新功能`display: grid`

```
#parent {
  display: grid;
  width: 100%;
  grid-template-columns: auto auto auto;

  /* Just for styling */
  text-align: center;
}

.child {  
  /* Just for styling */
  box-sizing: border-box;
  background-color: lightyellow;
  border: 2px dashed red;
  padding: 20px;
}
```

```
<div id="parent">
  <div class="child">This is first</div>
  <div class="child">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse volutpat dolor ante, eu ultricies eros molestie nec. Fusce laoreet laoreet nibh, vel vehicula nunc varius ut</div>
  <div class="child">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse volutpat dolor ante, eu ultricies eros molestie nec. Fusce laoreet laoreet nibh, vel vehicula nunc varius utLorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse volutpat dolor ante, eu ultricies eros molestie nec. Fusce laoreet laoreet nibh, vel vehicula nunc varius ut</div>
</div>
```

或者另一个将是`display: flex`.

```
#parent {
  display: flex;
  flex-flow: row nowrap;
}

.child {
  width: 33.3333%;  /* Force the column to be a third of the parent width */

  /* Just for styling */
  box-sizing: border-box;
  background-color: lightyellow;
  border: 2px dashed red;
  text-align: center;
  padding: 20px;
}
```

```
<div id="parent">
  <div class="child">The first one</div>
  <div class="child">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse volutpat dolor ante, eu ultricies eros molestie nec. Fusce laoreet laoreet nibh, vel vehicula nunc varius ut</div>
  <div class="child">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse volutpat dolor ante, eu ultricies eros molestie nec. Fusce laoreet laoreet nibh, vel vehicula nunc varius utLorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse volutpat dolor ante, eu ultricies eros molestie nec. Fusce laoreet laoreet nibh, vel vehicula nunc varius ut</div>
</div>
```

# c# - 类似于 Jericho HTML for .Net/C# 的解析器

> ID：11800705
> 
> 赞同：2
> 
> 时间：2012-08-03T17:44:21.743
> 
> 标签：c#, .net, html, parsing

我有一个 Java 应用程序，它使用 Jericho HTML Parser 来遍历 HTML、替换、修改等节点。我现在需要在具有相同 HTML 源的 .Net/C# 应用程序中执行相同的功能。谁能为此推荐一个好的.Net库/包？我发现“Html Agility Pack”看起来很相似：

[http://html-agility-pack.net](http://html-agility-pack.net)

有更好的我应该看吗？谢谢。，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:47:34.327

在 .NET 中寻找 html 操作库时，HTML Agility Pack 似乎是事实上的赢家

# c++ - 将向量作为参数传递并使用它，为什么它会崩溃？

> ID：11800706
> 
> 赞同：6
> 
> 时间：2012-08-03T17:44:37.873
> 
> 标签：c++, function, stl, vector, crash

我对 C++ 尤其是 STL 相当陌生。我正在尝试将向量作为参数传递给函数，但这会导致应用程序崩溃。我正在使用 Code::Blocks 和 MingW。这是一个简单的代码。

```
#include <iostream>
#include <vector>

using namespace std;

void foo(const vector<int> &v)
{
    cout << v[0];
}
int main(){
    vector<int> v;
    v[0] = 25;
    foo(v);
return 0;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T17:46:19.867

`v[0]`它崩溃是因为你用- 这是未定义的行为写到了向量的末尾。如果你什么都不做，它的初始大小为 0。（您随后也读到了同样的内容，但在那之前所有的赌注都已经结束了）。

你可能想做：

```
vector<int> v;
v.push_back(25);
foo(v); 
```

或许：

```
vector<int> v(1);
v.at(0) = 25;
foo(v); 
```

如果您使用`v.at(n)`而不是 [] 运算符，您将抛出异常而不是未定义的行为。

# struts - 如何在 struts 1.3 属性文件中编写上标（如正方形、幂）？

> ID：11800712
> 
> 赞同：0
> 
> 时间：2012-08-03T17:44:53.160
> 
> 标签：struts, struts-1, struts-config, struts-validation

我需要在前端打印 m(square) 之类的单位。因此，为此我必须在属性文件中提及。但是属性文件不接受这样写。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T04:25:07.987

在属性文件中添加`sup`html-tag：

```
dsprocess.unit=Volume(cm<sup>2</sup>) 
```

# javascript - 博主 iframe 评论表单是否限制自定义？

> ID：11800715
> 
> 赞同：1
> 
> 时间：2012-08-03T17:45:26.230
> 
> 标签：javascript, html, css, iframe, blogger

我是一个搞乱代码的初学者......我正在尝试自定义博客评论表单。我用 chrome 跟踪元素，我发现一个 iframe **src**到一个只有博主评论表单的 html 文件。从评论表单源 html 中，我找到了一个外部 css 链接，其中包含我需要自定义的所有 css。

但是我在模板中发现了空的**src**。如果我像上面提到的那样编辑主机并编辑 HTML 文件，（带有编辑的 css 链接）我可以自定义 iframe css 吗？还是被博主限制（使用令牌？）？

或者，有没有办法用 javascript/jquery 覆盖 css？

（不能发布到源的链接，链接很大，stackoverflow 不会让我）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:27:41.770

您无法访问 iframe 的样式。您必须将此视为页面中的另一个浏览器窗口。你页面上的css不会影响它，你不能用javascript访问它。这就是 iframe 的缺点...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:41:15.467

如果我理解，这是可能的。编辑：但不能跨域工作。可能出于安全原因。

首先，您应该阅读此链接 [http://benvinegar.github.com/seamless-talk/](http://benvinegar.github.com/seamless-talk/)

那么， [如何将 CSS 应用到 iframe 中呢？](https://stackoverflow.com/questions/217776/how-to-apply-css-to-iframe)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-05T00:37:54.237

我见过一些带有精致 iframe 评论表单的[Blogger 模板](https://nubia-soratemplates.blogspot.com/2016/08/8-yoga-poses-you-can-do-in-your-desk.html)……所以我认为这是可能的……实际上，它是 Blogger 的一个新的（我的意思是刷新，因为它可能已经存在很长时间了）评论表单皮肤。

也许它可以帮助一些人，所以这里是诀窍：

1) 确保您当前使用的是 Blogger 模板版本 2，否则，请在模板顶部使用此代码行更新它（小心，因为这会添加一些 css`widget`和`section`类，这可能会破坏我们的设计）：

```
<html b:version='2' class='v2' expr:dir='data:blog.languageDirection' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'> 
```

`</b:skin>`2)在您的 Blogger HTML 编辑器中的标记之前添加这些代码行

```
/* Variable definitions ====================
<Group description="New Comment Required – Dont edit">
  <Variable name="body.background" description="Body Background" type="background" color="#000" default="#000 none repeat scroll top left" value="#000 none repeat scroll top left" />
  <Variable name="body.font" description="Font" type="font" default="normal normal 14px Arial, sans-serif" value="normal normal 14px Arial" />
  <Variable name="body.text.color" description="Text Color" type="color" default="#222" value="#222222" />
  <Variable name="body.text.font" description="2" type="font" default="$(body.font)" value="normal normal 14px Arial, sans serif" />
  <Variable name="posts.background.color" description="6" type="color" default="#fff" value="#ffffff" />
  <Variable name="body.link.color" description="7" type="color" default="#ffa015" value="#ffa015" />
  <Variable name="body.link.visited.color" description="8" type="color" default="$(body.link.color)" value="#ffa015" />
  <Variable name="body.link.hover.color" description="9" type="color" default="$(body.link.color)" value="#ffa015" />
  <Variable name="blog.title.font" description="10" type="font" default="$(robotoBold45)" value="$(robotoBold45)" />
  <Variable name="blog.title.color" description="11" type="color" default="#fff" value="#ffffff" />
  <Variable name="header.icons.color" description="12" type="color" default="#fff" value="#ffffff" />
  <Variable name="tabs.font" description="13" type="font" family="$(body.font.family)" size="$(body.font.size)" default="700 normal $(size) $(family)" value="700 normal $(size) $(family)" />
  <Variable name="tabs.color" description="14" type="color" default="#ccc" value="#cccccc" />
  <Variable name="tabs.selected.color" description="15" type="color" default="#fff" value="#ffffff" />
  <Variable name="tabs.overflow.background.color" description="16" type="color" default="$(posts.background.color)" value="#ffffff" />
  <Variable name="tabs.overflow.color" description="17" type="color" default="$(posts.text.color)" value="#222222" />
  <Variable name="tabs.overflow.selected.color" description="18" type="color" default="$(posts.title.color)" value="#212121" />
  <Variable name="posts.title.color" description="19" type="color" default="#212121" value="#212121" />
  <Variable name="posts.title.font" description="20" type="font" default="$(robotoBold22)" value="$(robotoBold22)" />
  <Variable name="posts.text.font" description="21" type="font" default="$(body.text.font)" value="normal normal 14px &#39;roboto&#39;, sans-serif" />
  <Variable name="posts.text.color" description="22" type="color" default="$(body.text.color)" value="#222222" />
  <Variable name="posts.icons.color" description="23" type="color" default="#ffa015" value="#ffa015" />
  <Variable name="labels.background.color" description="24" type="color" default="$(sidebar.backgroundColorTopHD)" value="$(sidebar.backgroundColorTopHD)" />
</Group>
*/ 
```

注意：您可以在那里轻松自定义颜色和字体（原始 Blogger 强调色是`#ffa015`）

3）全部替换 `data:post.commentFormIframeSrc` 为 `data:post.commentFormIframeSrc + &quot;&amp;skin=contempo&quot; + data:variantParam`

Tadam... 无需再浪费时间尝试一些 iframe 自定义。

# mysql - MySQL 行输出单元格成列

> ID：11800716
> 
> 赞同：2
> 
> 时间：2012-08-03T17:45:37.823
> 
> 标签：mysql, sql, group-by, pivot

我的问题是如何将行单元格输出到单独的列中，以使查看该数据更具可读性。

我有以下 SQL 查询：

```
SELECT TD.name AS Conditions, PV.value AS Frequency, MSL.name AS  
Mailing_List_Subscriptions, Count(CI.uid) AS Users_Signup_Count
FROM conditions_interest CI
INNER JOIN profile_values PV
ON CI.uid = PV.uid
INNER JOIN hwmailservice_user_lists MSUL
ON CI.uid = MSUL.uid
INNER JOIN hwmailservice_lists MSL
ON MSUL.list_id = MSL.list_id
INNER JOIN term_data TD
ON CI.tid = TD.tid
WHERE (PV.value = 'daily' OR PV.value = 'weekly') AND CI.email = '1'
GROUP BY PV.value, TD.name, MSL.name
ORDER BY TD.name; 
```

使用以下输出：

![SQL 输出](../Images/3b31a9f49dacd6c46931452855ed7792.png)

因此，所有邮件列表订阅都会有自己的单独列，其中包含与条件相关的计数。所以像这样：

```
Conditions Frequency Newsletter Partners Annoucements marketing
Abscessed Tooth Daily 95 91 98 98
Abscessed Tooth Weekly 6 4 7 7 
```

如果需要更多说明，我将编辑我的帖子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:51:40.080

MySQL 没有`PIVOT`您正在执行的功能，因此您需要使用`CASE`：

```
SELECT x.Conditions,
  x.Frequency,
  SUM(CASE WHEN Mailing_List_Subscriptions = 'newsletter' THEN Users_Signup_Count END) newsletter,
  SUM(CASE WHEN Mailing_List_Subscriptions = 'partners' THEN Users_Signup_Count END) partners,
  SUM(CASE WHEN Mailing_List_Subscriptions = 'announcements' THEN Users_Signup_Count END) announcements,
  SUM(CASE WHEN Mailing_List_Subscriptions = 'marketing' THEN Users_Signup_Count END) marketing
FROM
(
  SELECT TD.name AS Conditions, PV.value AS Frequency, 
    MSL.name AS  Mailing_List_Subscriptions, 
    Count(CI.uid) AS Users_Signup_Count
  FROM conditions_interest CI
  INNER JOIN profile_values PV
    ON CI.uid = PV.uid
  INNER JOIN hwmailservice_user_lists MSUL
    ON CI.uid = MSUL.uid
  INNER JOIN hwmailservice_lists MSL
    ON MSUL.list_id = MSL.list_id
  INNER JOIN term_data TD
    ON CI.tid = TD.tid
  WHERE (PV.value = 'daily' OR PV.value = 'weekly') AND CI.email = '1'
  GROUP BY PV.value, TD.name, MSL.name
) x
GROUP BY x.Conditions, x.Frequency
ORDER BY x.name 
```

# encoding - 处理 contenteditable div 中的 HTML 实体

> ID：11800719
> 
> 赞同：0
> 
> 时间：2012-08-03T17:45:43.660
> 
> 标签：encoding, html-entities, phpmailer, php

我正在使用 contenteditable`<div>`来编辑电子邮件（特别是使用[NicEdit](http://nicedit.com/)）。我希望能够以表单形式提交消息正文，使用 PHP 处理它，并使用`mail()`函数（或[PHPMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)）发送它。

我遇到的问题与特殊字符和编码有关。当一个特殊字符（例如`π`or `á`）输入到 div 中时，它保持不变，而不是被转换为类似`&pi;`or的 html 实体`&aacute;`。在某些情况下它会被转换，`<`例如`&lt;`.

所以在提交表单的时候，PHP接收到的数据是很难处理的。写作

```
pi is "less than" 2 × pi:
π < 2π 
```

将以下数据放入 contenteditable div

```
<div>pi is "less than" 2 × pi:</div>
<div>π < 2π</div> 
```

这就是 PHP 收到的内容。但是使用`htmlentities()`给出

```
&lt;div&gt;pi is &quot;less than&quot; 2 &times; pi:&lt;/div&gt;
&lt;div&gt;&pi; &lt; 2&pi;&lt;/div&gt; 
```

这是正确的，除了 HTML 标签，所以这个方法似乎没用。最初收到的数据可以很好地插入数据库（我认为），但是当我尝试将其作为电子邮件发送时，编码会混乱。

从我的角度来看，似乎解决方案是对 HTML 标记之外的实体进行编码以获得如下内容：

```
<div>pi is &quot;less than&quot; 2 &times; pi:</div>
<div>&pi; &lt; 2&pi;</div> 
```

但从谷歌和 StackOverflow 上搜索这似乎是一件坏事。所以我认为我一定在某个时候对编码做错了，无论是在发送电子邮件之前还是在返回原始内容可编辑数据之前。我正在寻找一种可行的解决方案，理想情况下没有像 HTMLPurifier 这样的复杂库。

有任何想法吗？

**编辑：**当特殊字符不在标签中时，我已经尝试过将特殊字符转换为 html 实体的[解决方案。](https://stackoverflow.com/questions/1364933/htmlentities-in-php-but-preserving-html-tags/10277635#10277635)当我尝试输入特殊字符（如`π`. 但是该链接的答案已被否决，[类似的答案](https://stackoverflow.com/a/6332363/870965)说该方法从根本上是错误的。谁能告诉我为什么会这样，为什么我不应该坚持`htmlentitiesOutsideHTMLTags`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:16:11.083

只是一个想法：

*   **第 1 步**：将您的转换`<div> <b></b> </div>`为 [div] [b] [/b] [/div]
*   **第 2 步**：你的重要性
*   **第 3 步**：将您的 [div] [b] [/b] [/div] 转换为`<div> <b> </b> </div>`

顺便说一句，我认为您可以在步骤 1 之前使用 strip_tags() ...

# python - 用于操作excel表格的python脚本

> ID：11800726
> 
> 赞同：3
> 
> 时间：2012-08-03T17:45:53.783
> 
> 标签：python, excel

我正在尝试编写一个 python 脚本来操作 excel 电子表格。

假设如果，我有样本数据：

```
Gene        chrom    strand  TSS        TES         Name

NM_145215   chr5     +       135485168  135488045   Abhd11

NM_1190437  chr5     +       135485021  135488045   Abhd11

NM_1205181  chr14    +       54873803   54888844    Abhd4

NM_134076   chr14    +       54878906   54888844    Abhd4

NM_9594     chr2     +       31615464   31659747    Abl1

NM_1112703  chr2     +       31544075   31659747    Abl1

NM_207624   chr11    +       105829258  105851278   Abl1

NM_9598     chr11    +       105836521  105851278   Ace2

NM_1130513  chrX     +       160577273  160626350   Ace2

NM_27286    chrX     +       160578411  160626350   Ace2 
```

对于那些相似的名称（第 6 列），我想检索 TSS 最少的整行。例如，对于前 2 行 - Abhd11 名称，我想将第二行保存在我的结果中，因为 TSS 135485021 < 135485168。对于所有具有相同名称的集合，依此类推。

任何想法和意见表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:07:06.973

**输入**

如果可能的话，我会将 excel 文件保存为 csv 文件，然后使用[`csv`模块](http://docs.python.org/library/csv.html)加载到 python 中。

或者，您可以使用该[`xlrd`模块来读取 excel 文件](https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html)- 尽管我没有使用过它并且对此了解不多。

[`openpyxl`](http://packages.python.org/openpyxl/)是解析 excel 文件的附加选项（干杯只是另一个笨蛋）。

**操纵**

ernie 的想法似乎可行，我将按如下方式实施。假设这`linesreadfromfile`是使用读取的列表列表，`csv.reader`即每个列表元素是对应于文件中该行的分隔条目的值列表，

```
finaldict = {}
for row in linesreadfromfile:
    if finaldict.has_key(row[5]):
        if finaldict[row[5]][3] > row[3]:
            finaldict[row[5]] = row
    else:
        finaldict[row[5]] = row 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T18:18:12.910

我同意 mutzmatron 并推荐该`xlrd`模块。这是一个简单的例子：

```
import xlrd

# Create your file handle
file_handle = xlrd.open_workbook(file_name)

# Use the first page in the spreadsheet (0-based indexes)
sheet = file_handle.sheet_by_index(0)

# Create dictionary for storing values
abc = {}

# Loop through every row
for i in range(sheet.nrows):
  line = sheet.row_values(i)

  # Get your 'Name' and 'TSS' columns
  name = line[5]
  tss = line[3]

  # Add this 'Name' to your dictionary if it's new, or keep the max value
  if name not in abc.keys():
    abc[name] = tss
  else:
    abc[name] = max(abc[name],tss) 
```

显然，根据您的规范更改您需要保存的内容（整行、某些值等）。

- - 编辑 - -

```
 # If this 'Name' is new, save this line
  if name not in abc.keys():
    abc[name] = {'tss': tss, 'line': line}

  # Else, if this 'Name' is not new and the TSS is less, keep this new line
  elif tss < abc[name]['tss']:
    abc[name]['line'] = line 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:11:39.233

您可以使用[IronSpread](http://www.ironspread.com/)，它为您提供了一个 python 控制台和一种在 python 中编写此类操作脚本的方法。它还支持 UDF，您可以将其用作普通的 excel 函数，这很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T18:17:18.307

您可以使用 Python Tools for Visual Studio 团队提供的 Pyvot。它提供了一个全面的 API，用于处理来自 CPython 的 Excel 电子表格。

您可以从 PyPi 获取代码：[http](http://pypi.python.org/pypi/Pyvot) ://pypi.python.org/pypi/Pyvot 您可以从 Pytools 站点获取文档：[http ://pytools.codeplex.com/wikipage?title=Pyvot](http://pytools.codeplex.com/wikipage?title=Pyvot)

# java - Glassfish：在部署期间修改 EAR 的部署描述符

> ID：11800738
> 
> 赞同：2
> 
> 时间：2012-08-03T17:46:31.320
> 
> 标签：java, jakarta-ee, glassfish, java-ee-6, glassfish-3

经过几天的搜索、尝试和猛烈抨击，我将这个问题发布给 SO，尽管它*似乎*已经得到了回答。

这是场景：我有一个 EAR 应用程序，其中包含（目前）一个 WAR 和一个 EJB 模块。EJB 模块使用 JPA (persistence.xml)，一些无状态会话 Bean 通过 Web 服务公开。Web 服务使用带有 jdbc 领域的基本身份验证。Web 模块使用具有相同领域的表单身份验证。

*要求*：我需要能够在不同的服务器（dev/test/prod）或具有不同部署描述符的同一**服务器**（**或**集群）上部署此应用程序。*每个应用程序实例*中需要不同的部署设置是：

 ****   persistence.xml 中的 jta-data-source
*   web.xml 中的领域名称
*   web.xml 中的 javax.faces.PROJECT_STAGE
*   glassfish-ejb-jar.xml 中的 webservice-endpoint\endpoint-address-uri 和 login-config\realm
*   application.xml 中的上下文根（如果有任何区别，我可以将其移至 web.xml，见下文）
*   glassfish-application.xml 中的领域

在我的研究过程中，我管理了以下内容：

*   我可以使用覆盖 javax.faces.PROJECT_STAGE`asadmin set-web-context-param`
*   我可以使用部署计划覆盖 glassfish-ejb-jar.xml 中的所有设置`asadmin deploy`
*   这同样适用于 glassfish-application.xml
*   我*可能*可以在期间覆盖上下文根`asadmin deploy`（我不知道这将如何与 EAR 中的多个 Web 模块一起使用）

到现在为止还挺好。这给我留下了以下问题：

*   如何*轻松*修改 web.xml 中的领域名称？
*   如何*轻松*修改persistence.xml 中的jta-data-source？

*很容易*，我的意思是在部署期间或使用类似于部署计划 jar 的东西。仅使用修改后的 .xml 文件来维护 ejb.jar 或 war 的多个副本不是一种选择。

需要明确的是，需要有不同的数据库（在不同的开发阶段或针对不同的客户）使用相同的应用程序。该应用程序使用一个持久性单元，但它需要指向不同的数据库（因此是 jta-data-source）。*该领域是一个 jdbc 领域（在同一个数据库上），每个应用程序实例*也需要不同。

任何帮助或指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:52:50.850

您是否考虑过为部署描述符准备模板，并在构建期间使用属性文件中的值填充它们？如果您使用的是 ant，则可以使用`expandproperties`过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:58:43.867

您可以使用部署计划 jar 来完成所有这些事情。

在与部署相关的任何繁重工作发生之前，部署计划 jar 的内容似乎已被推送到应用程序的存档/目录树中。

看

[http://java.net/projects/glassfish/sources/svn/content/trunk/main/appserver/deployment/javaee-core/src/main/java/org/glassfish/javaee/core/deployment/DolProvider.java](http://java.net/projects/glassfish/sources/svn/content/trunk/main/appserver/deployment/javaee-core/src/main/java/org/glassfish/javaee/core/deployment/DolProvider.java)

和

[http://java.net/projects/glassfish/sources/svn/content/trunk/main/appserver/deployment/dol/src/main/java/com/sun/enterprise/deployment/archivist/Archivist.java](http://java.net/projects/glassfish/sources/svn/content/trunk/main/appserver/deployment/dol/src/main/java/com/sun/enterprise/deployment/archivist/Archivist.java)***

# jakarta-ee - JSP 到 Servlet1 到 Servlet2 调用失败

> ID：11800740
> 
> 赞同：0
> 
> 时间：2012-08-03T17:46:39.507
> 
> 标签：jakarta-ee, servlets

我正在运行一个 JSP 调用 servlet1 的应用程序。这个 servlet1 在内部调用 servlet2 来获取一些数据。Servlet 1 自己计算一些数据并从 servlet2 获取一些数据并将其发送回 JSP。

但我收到以下错误：

HTTP 状态 500 -

* * *

类型异常报告

信息

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

java.lang.IllegalStateException：提交响应后无法转发 RoutingParser.doPost(RoutingParser.java:389) javax.servlet.http.HttpServlet.service(HttpServlet.java:754) javax.servlet.http.HttpServlet.service(HttpServlet .java:847)

note Apache Tomcat/7.0.16 日志中提供了根本原因的完整堆栈跟踪。

## 我的代码是这样写的：

```
 import java.awt.List;
    import java.io.File;
    import java.io.IOException;
    import java.io.PrintWriter;
    import java.sql.Connection;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    import java.util.ArrayList;
    import java.util.Collections;
    import java.util.Enumeration;
    import java.util.HashSet;
    import org.w3c.dom.Element;

    //import javax.lang.model.element.Element;
    import javax.servlet.RequestDispatcher;
    import javax.servlet.ServletContext;
    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;
    import javax.swing.text.Document;
    import javax.xml.parsers.DocumentBuilder;
    import javax.xml.parsers.DocumentBuilderFactory;

    import org.w3c.dom.Node;
    import org.w3c.dom.NodeList;

    import javax.xml.parsers.DocumentBuilderFactory;
    import javax.xml.parsers.DocumentBuilder;

    import org.w3c.dom.NodeList;
    import org.w3c.dom.Node;

    import java.io.File;
    import java.util.ArrayList;

    import java.io.IOException;
    import java.io.PrintWriter;
    import java.sql.Connection;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    import java.util.ArrayList;
    import java.util.Collections;
    import java.util.Enumeration;
    import java.util.HashSet;

    //import com.sun.xml.internal.bind.v2.schemagen.xmlschema.List;

    public class RoutingParser extends HttpServlet {

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

     response.setContentType("text/html");
     PrintWriter writer = response.getWriter();

     System.out.println("Routing Parser is accessible");

     System.out.println("i reached servlet");
          try {

              ArrayList inputlist1= new ArrayList();

                                        inputlist1.add(request.getParameter("CardNetwork"));//CardNetwork
                inputlist1.add(request.getParameter("Currency"));//Currency
                inputlist1.add(request.getParameter("TxnCategory"));//TxnCategory
                inputlist1.add(request.getParameter("TxnType"));//TxnType

                ArrayList list1=new ArrayList();
                ArrayList returnedData= new ArrayList();

                System.out.println("i reached servlet");
                  try {

                    File fXmlFile = new File("c:\\eclipse\\RoutingTable.xml");
                    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
                    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
                    org.w3c.dom.Document doc = dBuilder.parse(fXmlFile);
                    doc.getDocumentElement().normalize();

                    System.out.println("Root element :" + doc.getDocumentElement().getNodeName());
                    NodeList nList = doc.getElementsByTagName("Entry");
                    System.out.println("-----------------------");

                    for (int temp = 0; temp < nList.getLength(); temp++)
                    {

                                //some piece of code

                              returnedData.add(data1);
                              returnedData.add(extra_info);
                              break;
                          }

                       }

                       /*it is important to remove the earlier node elements as the comparison starts from 0 all the time, we make a purely fresh arraylist for every node
                       * if we dont remove, the arraylist will keep on adding elements to the end and the comparison will not be made with latest node elements.
                       */ 
                       for (int remove = 0; remove < 26; remove++){
                           list1.remove(0);
                       }

                    }
                    //this will be returned to JSP page

                    ServletContext context = this.getServletContext();
                    RequestDispatcher dispatcher = context.getRequestDispatcher("/Mid");

                    // change your request and response accordingly

                    dispatcher.forward(request, response);

                    request.setAttribute("returndata",returnedData);
                    System.out.println("data1 set in arraylist for JSP page is: "+ returnedData.get(0));
                    System.out.println("extra_info set in arraylist for JSP page is: "+ returnedData.get(1));

                  } catch (Exception e) {
                    e.printStackTrace();
                  }

                  System.out.println("array list in end is: " + list1);
          } finally {

                RequestDispatcher requestDispatcher = getServletContext().getRequestDispatcher("/show_result_combination_2.jsp");
                requestDispatcher.forward(request,response);

          }
              }

              private static String getTagValue(String sTag, Element eElement) {
                NodeList nlList = (eElement).getElementsByTagName(sTag).item(0).getChildNodes();

                    Node nValue = (Node) nlList.item(0);

                return nValue.getNodeValue();
              }

} 
```

有人可以帮我解决这个错误。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:54:54.253

问题是您尝试在转发后写入响应。Servlet 2 可能正在提交响应。

尝试改用 RequestDispatcher.include。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T23:12:47.470

你有一个逻辑问题。finally 块中的代码应该在 catch 块内移动几行（据我所知，如果一切正常，您希望将响应转发到 /Mid，如果没有，您希望将其重定向到 /show_result_combination_2.jsp）

如果不是这种情况，那么您应该修改您的代码，因为您有两个可能发生的前向条件。这就是导致错误的原因。如果第一个被执行，那么第二个转发产生异常

# javascript - 在 URL 中传递下拉列表的选定值

> ID：11800746
> 
> 赞同：4
> 
> 时间：2012-08-03T17:47:05.513
> 
> 标签：javascript, asp.net, drop-down-menu

当我从列表中选择一个项目时，我有一个下拉列表会打开一个新窗口。如何将下拉列表值传递到 URL 中的新窗口？

我的代码如下所示：

```
<asp:DropDownList ID="ddlAdd" runat="server" CssClass="ddl" OnChange="javascript:openWindow('add.aspx?ddlAddValue=', 800, 885)">
    <asp:ListItem>One</asp:ListItem>
    <asp:ListItem>Two</asp:ListItem>
    <asp:ListItem>Three</asp:ListItem>
</asp:DropDownList> 
```

这是 JavaScript 函数：

```
function openWindow(url, windowHeight, windowWidth)
{
    var centerHeight = (screen.height - windowHeight) / 2;
    var centerWidth = (screen.width - windowWidth) / 2;
    var features = "height=" + windowHeight + ", width=" + windowWidth + ", top=" + centerHeight + ", left=" + centerWidth + ", scrollbars=" + 1;
    var popUp = window.open(url, "", features);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:53:04.937

您可以简单地参考以`this.value`获取底层选择的值。

```
OnChange="javascript:openWindow('add.aspx?ddlAddValue=' + escape(this.value), 800, 885)" 
```

此外，这很容易在 jQuery 中处理，如果你是这样滚动的：

```
$(function(){

  $('select[id$=ddlAdd]').change(function () {

      var addValue = $(this).val();

      if (addValue) { 
          // window opening logic here
      }

      return false;
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:50:50.943

您可以像这样将下拉对象直接传递到javascript中...

```
onchange="openWindow('add.aspx?ddlAddValue=', 800, 885, this)" 
```

（注意，命令中不需要`javascript:`前缀`onchange`- 浏览器已经知道它是 javascript）

然后在你的功能中......

```
function openWindow(url, windowHeight, windowWidth, dd)
{
   url = url + encodeURIComponent(dd.options[dd.selectedIndex].value);
   ... 
```

# python - Python 列表 - 查找字符串出现的次数

> ID：11800755
> 
> 赞同：6
> 
> 时间：2012-08-03T17:47:54.543
> 
> 标签：python

我如何找到每个字符串在我的列表中出现的次数？

说我有这个词：

```
"General Store" 
```

那在我的清单中大约有 20 次。我怎样才能知道它在我的列表中出现了 20 次？我需要知道这一点，以便我可以将该数字显示为一种`"poll vote"`答案。

例如：

```
General Store - voted 20 times
Mall - voted 50 times
Ice Cream Van - voted 2 times 
```

我将如何以与此类似的方式显示它？：

```
General Store
20
Mall
50
Ice Cream Van
2 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-03T17:49:44.173

使用`count`方法。例如：

```
(x, mylist.count(x)) for x in set(mylist) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-03T18:00:25.673

虽然其他答案（使用 list.count）确实有效，但在大型列表上它们可能会非常慢。

考虑使用`collections.Counter`，如[http://docs.python.org/library/collections.html中所述](http://docs.python.org/library/collections.html)

例子：

```
>>> # Tally occurrences of words in a list
>>> cnt = Counter()
>>> for word in ['red', 'blue', 'red', 'green', 'blue', 'blue']:
...     cnt[word] += 1
>>> cnt
Counter({'blue': 3, 'red': 2, 'green': 1}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T17:53:38.253

只是一个简单的例子：

```
 >>> lis=["General Store","General Store","General Store","Mall","Mall","Mall","Mall","Mall","Mall","Ice Cream Van","Ice Cream Van"]
   >>> for x in set(lis):
        print "{0}\n{1}".format(x,lis.count(x))

    Mall
    6
    Ice Cream Van
    2
    General Store
    3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-29T01:13:32.977

您可以使用字典，您可能想考虑从头开始使用字典而不是列表，但这是一个简单的设置。

```
#list
mylist = ['General Store','Mall','Ice Cream Van','General Store']

#takes values from list and create a dictionary with the list value as a key and
#the number of times it is repeated as their values
def votes(mylist):
d = dict()
for value in mylist:
    if value not in d:
        d[value] = 1
    else:
        d[value] +=1

return d

#prints the keys and their vaules
def print_votes(dic):
    for c in dic:
        print c +' - voted', dic[c], 'times'

#function call
print_votes(votes(mylist)) 
```

它输出：

```
Mall - voted 1 times
Ice Cream Van - voted 1 times
General Store - voted 2 times 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T17:55:36.783

首先使用 set() 获取列表的所有唯一元素。然后遍历集合以计算列表中的元素

```
unique = set(votes)
for item in unique:
    print item
    print votes.count(item) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-03T18:14:14.443

我喜欢这样的问题的单线解决方案：

```
def tally_votes(l):
  return map(lambda x: (x, len(filter(lambda y: y==x, l))), set(l)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-24T22:54:04.453

如果你愿意使用 pandas 库，这个真的很快：

```
import pandas as pd 

my_list = lis=["General Store","General Store","General Store","Mall","Mall","Mall","Mall","Mall","Mall","Ice Cream Van"]
pd.Series(my_list).value_counts() 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-12-17T05:08:10.203

```
votes=["General Store", "Mall", "General Store","Ice Cream Van","General Store","Ice Cream Van","Ice Cream Van","General Store","Ice Cream Van"]

for vote in set(votes):
    print(vote+" - voted "+str(votes.count(vote))+" times") 
```

尝试这个。它会输出

```
General Store - voted 4 times
Ice Cream Van - voted 4 times
Mall - voted 1 times 
```

# c# - 尝试使用 Sync Framework 中的批处理进行同步时出现 System.Error

> ID：11800758
> 
> 赞同：1
> 
> 时间：2012-08-03T17:48:05.393
> 
> 标签：c#, wcf, sync, microsoft-sync-framework

我正在编写一个将 Sync Framework v2.1 与 WCF Web 服务结合使用的 n 层应用程序。我的代码基于这个例子：[Database-Sync](http://code.msdn.microsoft.com/Database-Sync-SQL-Server-7e88adab)

同步似乎没有问题。但是，当我添加批处理功能时，我得到了一个难以调试的错误。

在解决方案的客户端部分（WPF 应用程序）中，我有一个继承自 KnowledgeSyncProvider 的虚拟类。它还实现了 IDisposable 接口。我使用这个类来调用我编写的 WCF 服务并在那里使用同步功能。当同步代码运行时（调用了 orchestrator.Synchronize()），一切似乎都正常工作，并且我编写的 EndSession 函数覆盖运行没有错误。但是，在执行离开该函数后，Microsoft.Synchronization.CoreInterop.ISyncSession.Start 内部会发生 System.Error（据我所知）。

我为提供 IDisposable 功能而编写的函数从未被调用过，在 EndSession 之后发生了一些事情，但在我的应用程序的 KnowledgeSyncProvider 虚拟类可以被释放之前。

这是错误信息：

_message：“系统错误。” 堆栈跟踪：在 Microsoft.Synchronization.KnowledgeSyncOrchestrator.DoOneWaySyncHelper(SyncIdFormatGroup sourceIdFormats，SyncIdFormatGroup destinationIdFormats，KnowledgeSyncProviderConfiguration 目标位置，SyncChangeCallbacks DestinationCallbacks，IDataSyncProvider 回调目标，目标回调，IDataSyncProvider sourceIdFormats 的 Microsoft.Synchronization.CoreInterop.ISyncSession.Start(CONFLICT_RESOLUTION_POLICY resolutionPolicy，_SYNC_SESSION_STATISTICS& pSyncSessionStatistics) Microsoft.Synchronization.KnowledgeSyncOrchestrator.DoOneWayKnowledgeSync（SyncDataConverter sourceConverter、SyncDataConverter destinationConverter、SyncProvider sourceProvider、

我启用了跟踪信息，但在这种情况下似乎没有提供任何有用的信息。

任何人都可以就我如何找出导致此错误的原因提出建议吗？

提前感谢您提供的任何帮助。

这是处理同步的代码：

```
public void SynchronizeProviders() 
```

{ CeDatabase localDb = new CeDatabase(); localDb.Location = Directory.GetCurrentDirectory() + "\Data\SYNCTESTING5.sdf"; RelationalSyncProvider localProvider = ConfigureCeSyncProvider(localDb.Connection); MyAppKnowledgeSyncProvider srcProvider = new MyAppKnowledgeSyncProvider(); localProvider.MemoryDataCacheSize = 5000; localProvider.BatchingDirectory = "c:\batchingdir"; srcProvider.BatchingDirectory = "c:\batchingdir";

```
SyncOrchestrator orchestrator = new SyncOrchestrator();
orchestrator.LocalProvider = localProvider;
orchestrator.RemoteProvider = srcProvider;
orchestrator.Direction = SyncDirectionOrder.UploadAndDownload;

CheckIfProviderNeedsSchema(localProvider as SqlCeSyncProvider, srcProvider);
SyncOperationStatistics stats = orchestrator.Synchronize(); 
```

}

这是用于创建 srcProvider 的 KnowledgeSyncProviderClass：

```
 class MyAppKnowledgeSyncProvider : KnowledgeSyncProvider, IDisposable
{
    protected MyAppSqlSync.IMyAppSqlSync proxy;
    protected SyncIdFormatGroup idFormatGroup;
    protected DirectoryInfo localBatchingDirectory;
    protected bool disposed = false;

    private string batchingDirectory = Environment.ExpandEnvironmentVariables("%TEMP%");

    public string BatchingDirectory
    {
        get { return batchingDirectory; }
        set 
        {
            if (string.IsNullOrEmpty(value))
            {
                throw new ArgumentException("value cannot be null or empty");
            }
            try
            {
                Uri uri = new Uri(value);
                if (!uri.IsFile || uri.IsUnc)
                {
                    throw new ArgumentException("value must be a local directory");
                }
                batchingDirectory = value;
            }
            catch (Exception e)
            {
                throw new ArgumentException("Invalid batching directory.", e);
            }
        }
    }

    public MyAppKnowledgeSyncProvider()
    {
        this.proxy = new MyAppSqlSync.MyAppSqlSyncClient();
        this.proxy.Initialize();
    }

    public override void BeginSession(SyncProviderPosition position, SyncSessionContext syncSessionContext)
    {
        this.proxy.BeginSession(position);
    }

    public DbSyncScopeDescription GetScopeDescription()
    {
        return this.proxy.GetScopeDescription();
    }

    public override void EndSession(SyncSessionContext syncSessionContext)
    {
        this.proxy.EndSession();
        if (this.localBatchingDirectory != null)
        {
            this.localBatchingDirectory.Refresh();

            if (this.localBatchingDirectory.Exists)
            {
                this.localBatchingDirectory.Delete(true);
            }
        }          
    }

    public override ChangeBatch GetChangeBatch(uint batchSize, SyncKnowledge destinationKnowledge, out object changeDataRetriever)
    {
        MyAppSqlSync.GetChangesParameters changesWrapper = proxy.GetChanges(batchSize, destinationKnowledge);
        changeDataRetriever = changesWrapper.DataRetriever;

        DbSyncContext context = changeDataRetriever as DbSyncContext;
        if (context != null && context.IsDataBatched)
        {
            if (this.localBatchingDirectory == null)
            {
                string remotePeerId = context.MadeWithKnowledge.ReplicaId.ToString();
                string sessionDir = Path.Combine(this.batchingDirectory, "MyAppSync_" + remotePeerId);
                this.localBatchingDirectory = new DirectoryInfo(sessionDir);
                if (!this.localBatchingDirectory.Exists)
                {
                    this.localBatchingDirectory.Create();
                }
            }

            string localFileName = Path.Combine(this.localBatchingDirectory.FullName, context.BatchFileName);
            FileInfo localFileInfo = new FileInfo(localFileName);

            if (!localFileInfo.Exists)
            {
                byte[] remoteFileContents = this.proxy.DownloadBatchFile(context.BatchFileName);
                using (FileStream localFileStream = new FileStream(localFileName, FileMode.Create, FileAccess.Write))
                {
                    localFileStream.Write(remoteFileContents, 0, remoteFileContents.Length);
                }
            }
            context.BatchFileName = localFileName;
        }
        return changesWrapper.ChangeBatch;
    }

    public override FullEnumerationChangeBatch GetFullEnumerationChangeBatch(uint batchSize, SyncId lowerEnumerationBound, SyncKnowledge knowledgeForDataRetrieval, out object changeDataRetriever)
    {
        throw new NotImplementedException();
    }

    public override void GetSyncBatchParameters(out uint batchSize, out SyncKnowledge knowledge)
    {
        MyAppSqlSync.SyncBatchParameters wrapper = proxy.GetKnowledge();
        batchSize = wrapper.BatchSize;
        knowledge = wrapper.DestinationKnowledge;
    }

    public override SyncIdFormatGroup IdFormats
    {
        get
        {
            if (idFormatGroup == null)
            {
                idFormatGroup = new SyncIdFormatGroup();

                idFormatGroup.ChangeUnitIdFormat.IsVariableLength = false;
                idFormatGroup.ChangeUnitIdFormat.Length = 1;

                idFormatGroup.ReplicaIdFormat.IsVariableLength = false;
                idFormatGroup.ReplicaIdFormat.Length = 16;

                idFormatGroup.ItemIdFormat.IsVariableLength = true;
                idFormatGroup.ItemIdFormat.Length = 10 * 1024;
            }
            return idFormatGroup;
        }
    }

    public override void ProcessChangeBatch(ConflictResolutionPolicy resolutionPolicy, ChangeBatch sourceChanges, object changeDataRetriever, SyncCallbacks syncCallbacks, SyncSessionStatistics sessionStatistics)
    {
        DbSyncContext context = changeDataRetriever as DbSyncContext;
        if (context != null && context.IsDataBatched)
        {
            string fileName = new FileInfo(context.BatchFileName).Name;
            string peerId = context.MadeWithKnowledge.ReplicaId.ToString();
            if (!this.proxy.HasUploadedBatchFile(fileName, peerId))
            {
                FileStream stream = new FileStream(context.BatchFileName, FileMode.Open, FileAccess.Read);
                byte[] contents = new byte[stream.Length];
                using (stream)
                {
                    stream.Read(contents, 0, contents.Length);
                }
                this.proxy.UploadBatchFile(fileName, contents, peerId);
            }

            context.BatchFileName = fileName;
        }
        SyncSessionStatistics stats = this.proxy.ApplyChanges(resolutionPolicy, sourceChanges, changeDataRetriever);
        sessionStatistics.ChangesApplied += stats.ChangesApplied;
        sessionStatistics.ChangesFailed += stats.ChangesFailed;
    }

    public override void ProcessFullEnumerationChangeBatch(ConflictResolutionPolicy resolutionPolicy, FullEnumerationChangeBatch sourceChanges, object changeDataRetriever, SyncCallbacks syncCallbacks, SyncSessionStatistics sessionStatistics)
    {
        throw new NotImplementedException();
    }

    ~MyAppKnowledgeSyncProvider()
    {
        Dispose(false);
    }

    #region IDisposable Members

    public virtual void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (!this.disposed)
        {
            if (disposing)
            {
                if (this.proxy != null)
                {
                    CloseProxy();
                }
            }

            disposed = true;
        }
    }

    public virtual void CloseProxy()
    {
        if (this.proxy != null)
        {
            this.proxy.Cleanup();
            ICommunicationObject channel = proxy as ICommunicationObject;
            if (channel != null)
            {
                try
                {
                    channel.Close();
                }
                catch (TimeoutException)
                {
                    channel.Abort();
                }
                catch (CommunicationException)
                {
                    channel.Abort();
                }
            }
            this.proxy = null;
        }
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:13:29.510

奇怪的是，它才刚刚开始工作。

我在 Visual Studio 2010 中收到一条通知，我应该“更新组件”或“安装组件”。它安装了一些 Web 组件。

现在，我的代码运行没有错误。

虽然我很高兴克服了这个错误，但我以一种非常不满意的方式克服了它。

出色地。我会拿走我能得到的。

# c++ - 虚函数 C++ 中的动态绑定

> ID：11800759
> 
> 赞同：0
> 
> 时间：2012-08-03T17:48:07.607
> 
> 标签：c++

我有一个带有 1 个虚函数的基类

```
class Base
{
public:
    virtual void print() {
        cout<<"IN BASE\n";
    }
} 
```

现在我使用创建它的对象

```
Base b 
```

和呼叫

```
b.print(); 
```

这是动态绑定吗，因为“基”类包含 1 个虚函数并创建了它的 VTable。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:55:28.463

在创建对象的同一上下文中，编译器不需要使用虚拟调度，因为它知道确切的类型。但这与虚函数的数量无关（是的，只要至少有一个，编译器就会生成一个*vtable*并将*vptr*存储在您的对象中）。

```
Base b;
b.print(); // can be optimized to b.Base::print(),
           // with no virtual dispatch

void f( Base& b ) {
   b.print();       // must use virtual dispatch (ignoring potential inlining)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:56:21.067

术语“动态绑定”通常意味着其他东西 - 允许您从外部文件（DLL 或 SO）调用函数的管道，就好像它们是可执行文件的一部分一样。

该类`Base`有一个 vtable 是正确的 - 毕竟，在编译当前文件时，编译器无法确定在项目的其他地方是否有它的任何派生类。

现在，调用是否遵循 vtable 是一个实现细节——它取决于编译器和设置。一方面，它应该。另一方面，如果对象像这样是自动的，那么它的类型在编译时是已知的，并且不可能是`Base`. 一个好的编译器可能会优化 vtable 查找。

启用装配列表的构建肯定会向您展示。

# eclipse - 如何在 Eclipse 中设置快捷方式以格式化 Javadoc 中的元素？

> ID：11800761
> 
> 赞同：0
> 
> 时间：2012-08-03T17:48:14.723
> 
> 标签：eclipse, keyboard-shortcuts, javadoc

在 Eclipse 中编写 Javadocs 时，通常需要格式化一些东西，例如`<i>someArgumentName</i>`或`<code>hereIs.aPiece(); // of code</code>`.

如何配置快捷方式以添加标签，如、`<code>`和用于编写 Javadocs？`<pre>``<b>``<i>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:20:51.413

如果您开始`<code`在 javadoc 中编写类似的内容并按 Ctrl + Space，自动完成应该会启动并为您提供`<code></code>`.

我创建了一个快速截屏来说明我的意思。看看[**这里**](http://youtu.be/hU7LWVok6TE)。

您可以在 Eclipse Preferences 中查看默认配置的代码模板，`Windows -> Preferences -> Java -> Editor -> Templates`如下所示：

![在此处输入图像描述](../Images/2c9be493a60304d17cad728119426358.png)

注意`${word_selection}`上面模板预览中的使用。

# java - Spring 3.0 Java REST 返回 PDF 文档

> ID：11800763
> 
> 赞同：4
> 
> 时间：2012-08-03T17:48:19.477
> 
> 标签：java, spring, model-view-controller, rest

我在后端生成了一个 PDF 文档。我想使用 Spring MVC REST 框架返回它。MarshallingView 和 ContentNegotiatingViewResolver 应该是什么样的？

根据我找到的示例，控制器将返回以下内容：

```
return new ModelAndView(XML_VIEW_NAME, "object", 
    byteArrayResponseContainingThePDFDocument); 
```

-谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-03T22:41:25.273

您可以通过以下方式定义您的方法以显式接收`HttpServletRequest`并`HttpServletResponse`直接流式传输到 HttpServletResponse：

```
@RequestMapping(value="/pdfmethod", produces="application/pdf")
public void pdfMethod(HttpServletRequest request, HttpServletResponse response){
    response.setContentType("application/pdf");
    InputStream inputStream = null;
    OutputStream outputStream = null;
    try{
        inputStream = getInputStreamFromYourPdfFile();
        outputStream = response.getOutputStream();
        IOUtils.copy(inputStream, outputStream);
    }catch(IOException ioException){
        //Do something or propagate up..
    }finally{
        IOUtils.closeQuietly(inputStream);
        IOUtils.closeQuietly(outputStream);
    }
} 
```

# php - 如何在 PHP 脚本中混合音轨？

> ID：11800769
> 
> 赞同：0
> 
> 时间：2012-08-03T17:48:38.027
> 
> 标签：php, linux, audio, command-line-interface

我正在寻找编写一个 PHP 脚本，它需要一个较长的背景音轨音频文件，并以特定的时间间隔混入其他较短的音轨。

我想我会寻找一个 PHP 可以与之交互的基于 Linux 的 CLI 工具？

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:12:25.637

这里是命令行也可以与 php 一起使用： http: [//sox.sourceforge.net/](http://sox.sourceforge.net/)

# javascript - 如何将图像附加到本地存储中？

> ID：11800770
> 
> 赞同：1
> 
> 时间：2012-08-03T17:48:39.677
> 
> 标签：javascript, jquery

我正在尝试将图像附加到本地存储中。

我有一个 div，我想保存所有这些图像。像这样简单的东西：

```
<div id="imageContainer">
<!--have images go here-->
</div> 
```

我想要完成的是这样的：

```
if (Math.floor((Math.random()*3)+1) == 1) { // 1/3 chance of conditional being true
  // append some image to #imageContainer and have it locally stored
} else {
  alert('no luck this time...');
} 
```

那么，每次上述条件为真时，我将如何将图像附加到`#imageContainer`本地并将其保存在本地？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:56:03.710

如果图像很小，您可以将图像作为 base64 编码数据 URI 存储在 localStorage 中。例如，这里是作为[数据 URI](http://www.nczonline.net/blog/2009/10/27/data-uris-explained/)的 StackOverflow 图像：

> 数据：图像/ PNG; BASE64，iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8 / 9hAAABSElEQVR42mP8DwQMeMDfrx8Z7uc6gWn59g0MHEo6KPKMhAwAgZezaxg + 7FnBwMzNDzaEVVyWNANA4Fl / LsPnE9vBLpCpWQg2DKcBPx4cZPjz4QEDj0E8ileetMQz / Lh3hYHXwpNBqnAybgNeLg8EG8IioMAg6FjPwKXhDxb // fIxw8PKALBhAi4RDOKpLdgNANn + fn8jw7cbG8F8ZINghoCA4uR9 + MPg348PDB + PTwQbBDIUZJCwZz9QQhgsDwoPDAMu7FzIwM7Fy8AnIsMgIq8BZPOBNf96cRFsGBMHP4N45HrcsTAr3QTDJUrGLkDDNBmEuL4xiMlqMXAo2OM2AOSCNw + VM / z89onh6fVTGIalzTyDmZDS09PBnJkzZ2JoABn05uENhk9vngDZnxkM3OMZkNVjGABj4wLIamhjADEApwGkAqoYAABh69q0dfMNBwAAAABJRU5ErkJggg ==

所以你会在这样的图像中显示：

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAA...[snip]" /> 
```

您所要做的就是创建一个`<img>`并将`src`属性设置为数据 URI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:56:13.657

以防万一您不考虑图像，而实际上只是指 HTML，因为上面的人确实很好地回答了 localStorage 和 dataURL，您会做这样的事情......

```
localStorage['imageContainerHTML'] = document.getElementById('imageContainer').innerHTML; 
```

这只是存储 HTML，而不是图像。对于图像，请使用其他人的建议。

# javascript - Internet Explorer - “对象不支持这种属性......”

> ID：11800771
> 
> 赞同：1
> 
> 时间：2012-08-03T17:48:41.473
> 
> 标签：javascript, internet-explorer, object, onkeyup

在 onkeyup 事件期间，我正在从位于父级中的 iframe 调用位于父级窗口中的 Javascript 函数。IE 抱怨并且 IE8 中内置的调试器停止并突出显示此代码中的“if 块”说 - “对象不支持这种属性或方法”

PS - 这段代码在 FF 中有效！

```
 <td class="grid" align="left">
     <input type="text" name="invqty${topitem.itemIdentifier}-<c:out value = "1"/>"
        id="invqty${topitem.itemIdentifier}-<c:out value = "1"/>" 
        value="0" 
        onFocus="this.select()" 
        onkeyup="if(!parent.validateFloat(this.id)) { this.value = '0'; } 
                 else { parent.updateBalance(${topitem.itemIdentifier}); }">
     </td> 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:05:55.953

您的`name`属性中有无效字符。阅读[此处](https://stackoverflow.com/a/79022/448232)以进一步了解有效字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:46:49.427

您是否像从“file://”一样在本地运行此设置？那是行不通的。IE 对本地运行的文件的 iframe 通信具有非常严格的安全模型。您需要通过 Web 服务器运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:02:19.090

哇！！！所以问题是这样的——

我在 iframe 中定义了大约 5 个函数。它们都发生在一个“脚本块”中

其中一个功能是使用“for each”循环。这 5 个函数之一中的一个循环导致 IE 忽略了我正在执行此操作的整个“脚本块”。关键是 IE8 中的调试器告诉我问题出在一些虚假的行号上，这让我认为我的 iframe 以及我如何尝试定义我的 JS 函数存在问题。最后，我放弃了，去请有 MAC 的人使用 Safari 进行调试。Safari 调试器使用 for each 循环确定了确切的行。我评论说，对于每个循环代码，IE 也开始工作了！

逆天！

IE8 浏览器调试器的开发人员应该因为他们的无能而被用尺子殴打。我在这上面浪费了 3 天。对 Apple 的窥视者表示敬意。

在这里学到的教训——

编写 Javascript 时不要使用“for each”循环！不要使用 Microsoft IE 品牌的调试器！他们很糟糕，会浪费你的时间。

感谢您的帮助 Bergi 和 Nivas！

# php - 使用 MySQLi 和 PHP 更新表

> ID：11800772
> 
> 赞同：0
> 
> 时间：2012-08-03T17:48:42.740
> 
> 标签：php, select, mysqli, sql-update

我正在尝试使用 MySQLI 和 PHP 更新表中的信息。我知道数据正在进入更新部分，因为我已经在许多地方使用`print_r()`并`var_dump()`验证了某些东西是否存在，但表中没有任何变化。这是我的更新：

```
$conn->query("update inventory set cost = $cost, csmt = $csmt, 
    hold = {$data[$n]['hold']}, commission_level = " . $cLvl .",
    date_process = '$today' where sku = {$data[$n]['sku']}"); 
```

如果我只是添加成本，那么表格将更新，但如果我更改`csmt`或`hold`字段，则不会更新任何内容。

如果我对 MySQL 查询中的值进行硬编码，它可以正常工作。因此，PHP代码似乎存在一些问题。

**任何人都知道我在哪里出错了吗？**

```
$today = date('Y-m-d');
$data = json_decode($_POST['data'], true); 

foreach ($data as $value) {
    // check to see if it was taken  off hold
    if ($data[$n]['cost']> 0 || $data[$n]['csmt'] !== 0) {

        //update commission information
        //gather data
        $result = $conn->query("SELECT book_code FROM book_type WHERE book_type_id = {$data[$n]['booktype']}");
        if ($result) { $bookType = $result->fetch_assoc(); }

        $result = $conn->query("SELECT book_type_3 FROM feature WHERE feature_id = {$data[$n]['featureid']}");
        if ($result) { $bookType3 = $result->fetch_assoc(); }

        $result = $conn->query("SELECT condition_id FROM defect WHERE defect_id = {$data[$n]['defect']}");
        if ($result) { $cId = $result->fetch_assoc(); }

        $result = $conn->query("select source_id from inventory where sku = {$data[$n]['sku']}");
        if ($result) { $buyer = $result->fetch_assoc(); }

        $result = $conn->query("SELECT class_code, notes, price, usedbuying_price FROM follette_title WHERE isbn13 = {$data[$n]['isbn']}");
        if ($result) {
            $follett = $result->fetch_assoc();
            $follett_price = $follett['usedbuying_price'];
        }

        if ($data[$n]['cost'] == 0 || $bookType3['book_type_3'] == "DMG")
        {
            $cLvl = null;
        }
        elseif ($bookType['book_code'] == "IE" || $bookType['book_code'] == "AIE")
        {
            $cLvl = 3;
        }
        elseif ($cId['condition_id'] == 1 || $cId['condition_id'] == 2 || $cId['condition_id'] == 3 || $cId['condition_id'] == 4 || $follett['class_code'] == "D" || strpos($follett['notes'],"(T)") == true)
        {
            $cLvl = 2;
        }
        elseif ($cId['condition_id'] == 5)
        {
            $cLvl = 1;
        }

        if ($data[$n]['csmt'] == 0) {
            //get buyer commission rate
            if (!empty($cLvl))
            {
                $result = $conn->query("SELECT lvl" . $cLvl . " FROM buyers WHERE buyer_id = {$buyer['source_id']}");
                //echo"SELECT lvl" . $cLvl . " FROM buyers WHERE buyer_id = {$buyer['source_id']}"; die;
                if ($result) { $comRate = $result->fetch_assoc(); } //print_r($comRate); die;
            }

            //calculate final cost
            if (!empty($comRate['lvl'.$cLvl]))
            {
                $cost = ($data[$n]['cost']) + (($data[$n]['cost']) * $comRate['lvl'.$cLvl]);
            }

        }

        $csmt = $data[$n]['csmt'];
        $conn->query("update inventory set cost = $cost, csmt = $csmt, 
            hold = {$data[$n]['hold']}, commission_level = " . $cLvl .",
            date_process = '$today' where sku = {$data[$n]['sku']}"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:54:34.013

```
$conn->query("update inventory set cost = ?, csmt = ?, hold = ?, commission_level = ?, date_process = ? where sku = ?"); 
$conn->bindParam("ssssss", $cost, $csmt, $data[$n]['hold'], $clvl, $today, $data[$n]['sku']); 
$conn->execute(); 
```

您需要将`s`（在 bindParam 中）更改为每个变量的相应数据类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:22:55.997

经过多次试验和错误，这里是正确的代码，效果很好。

```
 $today = date('Y-m-d');
$data =json_decode($_POST['data'], true); 

foreach($data as $value){
// check to see if it was taken  off hold
if($data[$n]['cost']> 1 || $data[$n]['csmt'] == 1)  {

    //update commission information
        //gather data
$result = $conn->query("SELECT book_code FROM book_type WHERE book_type_id = {$data[$n]['booktype']}");
if($result){$bookType = $result->fetch_assoc();}

$result = $conn->query("SELECT book_type_3 FROM feature WHERE feature_id = {$data[$n]['featureid']}");
if($result){$bookType3 = $result->fetch_assoc();}

$result = $conn->query("SELECT condition_id FROM defect WHERE defect_id = {$data[$n]['defect']}");
if($result){$cId = $result->fetch_assoc();}

    $result = $conn->query("select source_id from inventory where sku = {$data[$n]['sku']}");
    if($result) {$buyer = $result->fetch_assoc();}

$result = $conn->query("SELECT class_code, notes, price, usedbuying_price FROM follette_title WHERE isbn13 = {$data[$n]['isbn']}");
if($result){
            $follett = $result->fetch_assoc();
            $follett_price = $follett['usedbuying_price'];
            }
            if($data[$n]['cost'] == 0 || $bookType3['book_type_3'] == "DMG")
    {
        $cLvl = null;
    }
    elseif($bookType['book_code'] == "IE" || $bookType['book_code'] == "AIE")
    {
        $cLvl = 3;
    }
    elseif($cId['condition_id'] == 1 || $cId['condition_id'] == 2 || $cId['condition_id'] == 3 || $cId['condition_id'] == 4 || $follett['class_code'] == "D" || strpos($follett['notes'],"(T)") == true)
    {
        $cLvl = 2;
    }
    elseif($cId['condition_id'] == 5)
    {
        $cLvl = 1;
    }

    if($data[$n]['csmt'] == 0){
    //get buyer commission rate
    if(!empty($cLvl))
    {
        $result = $conn->query("SELECT lvl" . $cLvl . " FROM buyers WHERE buyer_id = {$buyer['source_id']}");//
                    //echo"SELECT lvl" . $cLvl . " FROM buyers WHERE buyer_id = {$buyer['source_id']}"; die;
        if($result) {$comRate = $result->fetch_assoc();}//print_r($comRate); die;
    }

    //calculate final cost
    if(!empty($comRate['lvl'.$cLvl]))
    {
        $cost = ($data[$n]['cost']) + (($data[$n]['cost']) * $comRate['lvl'.$cLvl]);
    }

}
// update inventory table
$conn->query("update inventory set cost = $cost, csmt = {$data[$n]['csmt']}, hold = {$data[$n]['hold']}, commission_level = " . $cLvl .",
         date_process = '$today' where sku = {$data[$n]['sku']}");

$holdList[$n] = array('buyer' => $data[$n]['buyer'],
            'process date' => $today,
                );
$n++;
} else {
    $n++; }// end of if statement 
```

}

我只是想给出最终答案，以防其他人有同样的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T18:04:21.077

根据您尝试更新的数据类型（INT、STRING、VARCHAR 或其他），可能需要对某些数据进行格式化，然后才能将其发送到数据库。

如果 $csmt 引用来自用户的 TEXT 或 VARCHAR 或项目或其他内容，则文本可能包含引号或其他字符，这些字符在发送到数据库之前需要正确格式化。如果发送到数据库的部分命令无效，数据库将不接受数据。

很高兴确切知道您的变量代表哪种数据类型，但假设您的 $csmt 是某种类型的测试，您将需要使用

这将对字符串值进行编码 ->

```
$value = mysql_real_escape_string( $csmt ); // Formats the string for database storage 
```

并且应该使用 $value 而不是 $csmt

这将解码字符串值->

```
$todisplay = htmlspecialchars( $csmt, ENT_QUOTES ); // $csmt from database
// $todisplay = the value to display on your page. 
```

# javascript - Javascript 面向对象的编程技术，这叫什么？

> ID：11800775
> 
> 赞同：2
> 
> 时间：2012-08-03T17:49:11.380
> 
> 标签：javascript

似乎有相当多的技术可以用于创建客户端对象。我发现真正令人困惑的是确定每种技术的名称。我以前用过原型

```
MyObject.prototype.someMethod = function (e, a) {
      .....
}; 
```

但我也看到过像这样创建的不同对象

```
MyObject.someMethod = function () {
      ....
} 
```

第二种技术叫什么，为什么要使用一种而不是另一种？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:51:54.873

第一个示例类似于在类上定义方法。该类的每个实例都使用相同的代码；`this`in 这样的方法指向调用该方法的实例。

第二个类似于在类上定义静态方法。您调用该方法，例如

`MyObject.someMethod();`

在实例上调用该方法没有意义。

我想您可以调用第一个“原型方法”和第二个“构造函数/类方法”。

如果您在谈论 javascript 时习惯使用经典的 OO 术语，这有点尴尬，因为 Javascript 使用原型继承，您可以调用第一个“实例方法”和第二个“静态方法”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:58:42.937

最简单的答案是，使用原型关键字在对象上定义方法将允许该方法用于从它继承的所有对象。

JavaScript 中没有类，但您可以通过使用原型对象（属性）来模拟继承。

myObject.prototype.method 将为从 myObject 派生的所有对象添加一个“方法”（您可以在 jQuery 加载后对 jQuery 执行此操作 - $.prototype.method [$.fn.method] 将为所有 jQuery 对象添加一个方法无论它们是何时创建的）。

myObject.method 只会向 myObject 添加一个“方法”，就像执行那行代码时一样（静态方法）。在此行执行之前调用的任何 myObject 都无法访问“方法”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T18:18:22.943

Javascript 使用所谓的[**原型继承**](http://javascript.crockford.com/prototypal.html)来实现特征的继承。考虑以下示例：

```
Superclass = function() {
   //constructor code
}

Superclass.prototype.toString=function() {
    return "Derp!";
}
Superclass.derp= function(){return 'herp!'}

var instance = new Superclass();
instance.toString();//valid
instance.derp();//fails 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T18:52:05.033

这里发生了几件事。首先，在担心定义对象的方法之前，先考虑对象的创建。

因此，有几种创建对象的方法。首先，您可以突然创建一个内联对象：

```
var obj = { property : "myProperty", func : function () {} }; 
```

您现在有了一个全新的对象。事后，您可以通过添加该对象来扩展该对象。

```
obj.property02 = "myOtherProperty";
obj.otherFunc = function () { return this.property02; }; 
```

但是构造内联对象的缺点是***所有***的属性和方法都是 100% 公开的。

为了解决这个问题，您可以使用一个构造函数来创建并返回一个对象。

```
var MakeWallet = function (starting_amount, pin) {
    var balance = 0,
        wallet = {};

    wallet.add = add_balance;
    wallet.deduct = deduct_amount;
    wallet.amount = check_balance;

    return wallet;

    function check_balance (pin) { /*...*/ }
    function validate_pin (user_pin) { /*...*/ }
    function add_balance (amount, pin) { /*...*/ }
    function deduct_amount (amount, pin) { /*...*/ }

};

var myWallet = MakeWallet(1, 9274); 
```

我得到什么来解决我的麻烦？所有数据都是防篡改的。

用户可能仍然可以重写`wallet.deduct`，但他们实际上不会获得 pin 的实际价值，或获得钱包中的金额，或获得我不希望他们拥有的任何内部功能，包括任何我想授予的内部安全号码或实体/序列号来跟踪钱包。

这就是以这种方式构建的好处。

同样，我可以在钱包中添加方法和属性，之后：

```
myWallet.breakItOpen = function () { return this.balance; };
myWallet.stuffIt = function () { balance = 400000000; }; 
```

但是这些东西实际上都不能访问原始 myWallet 中的变量或函数。
只有在创建时存在的功能才能访问。

在其他更传统的创建方法中，您可以使用类似类的构造函数，使用`this`.

```
function MakeWalletClass (starting_amount, pin) {
    var balance = 0,
        serial_and_pin = generate_serial() + "_" + pin;

    this.balance = balance;
    this.checkBalance = function () { return this.balance; };
}

var myWalletInstance = new MakeWalletClass(1, 1234); 
```

但是有一个问题：
`myWalletInstance.balance`是公开的。
任何人都可以看到或更改它。
不好。

我们可以通过这样做来解决这个问题：

```
function MakeWalletClass (starting_amount, pin) {
    var balance = 0,
        serial_and_pin = generate_serial() + "_" + pin;

    this.checkBalance = function () { return balance; };
}

var myWalletInstance = new MakeWalletClass(1, 1234); 
```

现在，`this.checkBalance`正在读取隐藏`balance`变量，而不是公开可编辑的属性。

现在，`MakeWalletClass.prototype`.

当您使用构造函数模式时（即：添加属性`this`并返回的函数`this`，或者不返回任何内容 - 它`this`在后台返回 - 并使用`new`关键字调用），添加`prototype`属性和方法将添加属性和方法它们可用于您创建的对象的***每个***实例。

因此，如果您的银行被称为“鲍勃银行”，您可以添加：

```
MakeWalletClass.prototype.bankName = "The Bank of Bob"; 
```

现在每个实例`new MakeWalletClass();`都有一个`bankName`属性，每个实例都将是完全相同的值，并且每个实例都将是公开可用的。

```
var yourWalletInstance = new MakeWalletClass(500, 2341);
yourWalletInstance.bankName; // "The Bank of Bob"; 
```

在将属性添加到构造函数的原型***之前***，这些`prototype`属性甚至可以在您创建的对象上使用。

 *您可以`prototype`以相同的方式添加方法。

```
var myWalletInstance = new MakeWalletClass(1, 1234);
MakeWalletClass.prototype.getBalance = function () { return balance; };
myWalletInstance.getBalance(); // undefined; 
```

哎呀！
它不起作用。

原型函数只能访问***公共***属性（它们可以调用的任何东西`this.XXX`）。

所以添加`prototype`属性的好处是可以节省大量内存。如果您的程序需要 3000 个钱包，并且您将 a 添加`prototype function`到构造函数中，则该函数仅在内存中存在 1 次。

添加原型的缺点是它只能做公共的事情，所以除非你想平衡或固定公共属性（提示：不要），原型对私人工作毫无用处。

因此，对于这 3000 个钱包，您需要 3000 个处理余额或密码的任何方法的副本。

既然您已经了解了所有这些，以及它们`prototype`的用途......之间的真正区别：

```
MakeWalletClass.prototype.say_bankName = function () { /*...*/ }; 
```

和

```
MakeWalletClass.say_bankName = function () { /*...*/ }; 
```

是`prototype`适用于实例 ( `wallet = new MakeWalletClass`)，而 的方法`MakeWalletClass`不适用——它仅在您希望将函数附加到`MakeWalletClass`.

也许你想要一个返回钱包数量的函数......*

# php - 在字符串中查找数字并将其加 50

> ID：11800776
> 
> 赞同：0
> 
> 时间：2012-08-03T17:49:21.393
> 
> 标签：php

我想找到一个字符串中的所有数字并将它们加 50。

所以我有这个开始：

> ```
> 'text' => string 'Word (9), WordSomething (5)'
> 'text' => string 'Word (15)' 
> ```

结果：

> ```
> 'text' => string 'Word (59), WordSomething (55)'
> 'text' => string 'Word (65)' 
> ```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T17:51:46.913

您可以为此使用正则表达式来捕获括号之间的数字，然后使用以下方法应用您自己的自定义回调[`preg_replace_callback()`](http://php.net/preg_replace_callback)：

```
$result = preg_replace_callback( '/\((\d+)\)/', function( $match) {
    return '(' . ($match[1] + 50) . ')';
}, $string); 
```

所以，给定这个输入字符串：

```
Word (9), WordSomething (5) 
```

输出[将是](http://viper-7.com/UjdwVx)：

```
Word (59), WordSomething (55) 
```

对于变量输入，使用闭包：

```
$number = 50;
$result = preg_replace_callback( '/\((\d+)\)/', function( $match) use( $number) {
    return '(' . ($match[1] + $number) . ')';
}, $string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:56:07.960

编辑：如果您对正则表达式有非理性的恐惧，我认为这应该可行。

Edit2：这里是完整且有效的 java 代码： http: [//pastebin.com/Z6uyDizz](http://pastebin.com/Z6uyDizz)

我pseduo java代码：

```
var str = "Some3people6love20code102"
var newstr = ""
var tmp = ""

for (int i = 0; i<str.length; i++){
    if((int)str[i] >= 48 && (int)str[i] <= 57){
        tmp += str[i]
    }else{
        newstr+=((Integer.parseInt(tmp)+50)+"");
        newstr+=str[i] 
        tmp = "";
    }
} 
```

# sql-server - 如何解决 Index/Key 相关的死锁

> ID：11800778
> 
> 赞同：6
> 
> 时间：2012-08-03T17:49:22.970
> 
> 标签：sql-server, sql-server-2008, tsql, concurrency, database-deadlocks

我使用[SQL Server 2008 中的死锁图](https://dba.stackexchange.com/questions/10644/deadlock-error-isnt-returning-the-deadlock-sql/10646#10646)诊断出我的 sql server 中的死锁问题。

问题与我的索引有关。我有两个查询：一个包含大量连接和子查询的长期运行报告，根据基表上的两个不同日期提取数据，以及一个快速更新查询，它更新该基表上的相同日期。我有两个索引，报告希望对它们都有一个共享的 KEY 锁，而更新查询希望对它们都有一个独占的 KEY 锁，并且不知何故，每个查询只能设法获取其中一个键，因此两者都无法继续。

我能做些什么来解决这个问题？

以下是关于我的情况的所有详细信息：

我的基表如下所示：

```
CREATE TABLE job_tb{
    job_id int IDENTITY(1,1),
    createDate datetime NULL,
    upDate datetime NULL,
    dataField1 nchar(1),
    dataField2 nchar(2),
    --etc...
} 
```

我的索引如下所示：

```
CREATE NONCLUSTERED INDEX idx_createDate ON job_tb(
  createDate DESC
)
INCLUDE(dataField1, dataField2)

CREATE NONCLUSTERED INDEX idx_upDate ON job_tb(
  upDate DESC
)
INCLUDE(dataField1, dataField2) 
```

最后，我的更新如下所示：

```
BEGIN TRANSACTION;
    UPDATE job_tb
    SET
        dataField1 = @data
        upDate = @upDate
    WHERE
        job_id = @job_id
COMMIT TRANSACTION; 
```

报告是按日期统计各种统计数据，所以我不会在这里包括。我有意将 idx_createDate 和 idx_upDate 设计为“覆盖”或包含 dataField1，因为它在该报告中被大量使用。

我相信该报告在其中一个索引上获取了共享锁，然后点击子查询并请求在第二个索引上锁。同时，更新查询希望在两个索引上都有一个排他锁，以便同时更新 upDate 和包含的 dataField1。

你们有什么感想？

**编辑：** 这是 XML 死锁图，根据要求：

```
<deadlock-list>  <deadlock>
<victim-list>
    <victimProcess id="processcf65288"/>
</victim-list>
<process-list>
    <process id="processcf65288" taskpriority="0" logused="0" waitresource="KEY: 6:72057597970874368 (eee1799e706c)" waittime="122" ownerId="421742704" transactionname="SELECT" lasttranstarted="2012-08-03T05:37:21.257" XDES="0x8611e8800" lockMode="S" schedulerid="50" kpid="8560" status="suspended" spid="70" sbid="0" ecid="0" priority="0" trancount="0" lastbatchstarted="2012-08-03T05:37:21.257" lastbatchcompleted="2012-08-03T05:37:21.257" clientapp="Internet Information Services" hostname="xxx" hostpid="11964" loginname="xxx" isolationlevel="read committed (2)" xactid="421742704" currentdb="6" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056">
        <executionStack>
            <frame procname="" line="28" stmtstart="1276" stmtend="4826" sqlhandle="0x03000600311ac36c65a31701a1a000000100000000000000">
            </frame>
            <frame procname="" line="1" sqlhandle="0x01000600f61bee3600932ae3090000000000000000000000">
            </frame>
        </executionStack>
        <inputbuf> exec MonthlyReport @id = 41
        </inputbuf>
    </process>
    <process id="processd2b6bc8" taskpriority="0" logused="1908" waitresource="KEY: 6:72057597970939904 (8e8117a49479)" waittime="2242" ownerId="421742551" transactionname="user_transaction" lasttranstarted="2012-08-03T05:37:20.447" XDES="0x7e84ad0a0" lockMode="X" schedulerid="63" kpid="12700" status="suspended" spid="89" sbid="0" ecid="0" priority="0" trancount="2" lastbatchstarted="2012-08-03T05:37:20.443" lastbatchcompleted="2012-08-03T05:37:20.443" clientapp="Internet Information Services" hostname="xxx" hostpid="11964" loginname="xxx" isolationlevel="read committed (2)" xactid="421742551" currentdb="6" lockTimeout="4294967295" clientoption1="673185824" clientoption2="128056">
        <executionStack>
            <frame procname="" line="47" stmtstart="2342" stmtend="2640" sqlhandle="0x03000600e7dd9c717cbbb900ec9f00000100000000000000">
            </frame>
            <frame procname="" line="1" sqlhandle="0x01000600311d7a152032f9be040000000000000000000000">
            </frame>
        </executionStack>
        <inputbuf> exec UpdateJob @dataField1 = &apos;C&apos;, @upDate = &apos;8/3/2012 5:37:20 AM&apos;, @job_id = 1542687
        </inputbuf>
    </process>
</process-list>
<resource-list>
    <keylock hobtid="72057597970874368" dbid="6" objectname="" indexname="" id="lock612859900" mode="X" associatedObjectId="72057597970874368">
        <owner-list>
            <owner id="processd2b6bc8" mode="X"/>
        </owner-list>
        <waiter-list>
            <waiter id="processcf65288" mode="S" requestType="wait"/>
        </waiter-list>
    </keylock>
    <keylock hobtid="72057597970939904" dbid="6" objectname="" indexname="" id="lock612a15300" mode="S" associatedObjectId="72057597970939904">
        <owner-list>
            <owner id="processcf65288" mode="S"/>
        </owner-list>
        <waiter-list>
            <waiter id="processd2b6bc8" mode="X" requestType="wait"/>
        </waiter-list>
    </keylock>
</resource-list>  
</deadlock> /deadlock-list> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T18:18:30.650

根据评论中的 Q/A 讨论和分析死锁图后，这是当前两个索引未完全覆盖报表查询的情况。该报告将首先开始查看非聚集索引。它没有找到所有需要的信息。因此，它对主表进行键查找以获取剩余数据。但是更新的工作方式完全相反。更新将首先锁定主表，并更新它的数据，然后查找所有索引并更新它们。因此陷入僵局。

解决此问题的一种方法是按索引覆盖整个报表查询。但这意味着更新会变慢。

其他解决方案是将报表查询一分为二，使用临时表变量从索引中收集数据，然后进行键查找。注意报表查询不应该在可序列化事务模式下运行。否则事务不会释放它刚刚读取的读锁。

希望我很清楚。如果您有任何疑问，请告诉我。

# asp.net-mvc - 没有密钥的 MVC 3 模型绑定

> ID：11800783
> 
> 赞同：0
> 
> 时间：2012-08-03T17:49:47.133
> 
> 标签：asp.net-mvc, key, model-binding

我有一个关于 ASP.NET MVC3 模型绑定的问题。如果我有一个试图用作模型的类，但我不希望将密钥放在页面上，则模型不会绑定到 POST。这是一个例子：

```
//Data Model
public class MyModel
{
    [Key]
    public string MyKey {get;set;} //Perhaps this is an ssn that I don't want on the form.
    public string MyValueToGet {get;set;} //This is the value I want the user to enter.
}

//Conroller code.
public ViewResult Index()
{
    MyModel model = new MyModel{ MyKey = "SecretInfo", MyValueToGet = "" };
    return View(new model);
}
public ActionResult Edit(MyModel model)
{
    repository.SaveChanges(model)
}

//View code.
@using(Html.BeginForm("Edit", "Home", FormMethod.Post))
{
    Enter a value: @Html.EditorFor(m => m.MyValueToGet)
    <input type="submit" value="Salve" />
} 
```

所以我的问题是在表单提交时调用 Edit 方法时模型为空。我可以通过将 MyKey 放在页面上的某个位置（可能作为隐藏字段）来解决此问题，但如果它是某种敏感数据，这是不可接受的。有没有办法解决这个问题？我是 MVC 的新手，所以我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:11:34.850

另一种方法是在将 id 发送给客户端之前对其进行加密。查看这篇文章以获取有关如何完成此操作的更多信息。 [Asp MVC 3：修改发送到视图的值](https://stackoverflow.com/questions/5909352/asp-mvc-3-modifiy-values-sent-to-view)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:34:05.383

创建另一个唯一但无意义的标识符，如（auto increment int）并使用它来绑定。

换句话说，将您的模型修改为：

```
public class MyModel
{
    [Key]
    public int ID {get; set;}
    public string MyKey {get;set;} //Now this can be sensitive, it doesn't matter because you no longer rely on it.
    public string MyValueToGet {get;set;} //This is the value I want the user to enter.
} 
```

**编辑**

我相信您最好的选择是更改 MyModel 对象，因为它的设计存在缺陷。大多数情况下的主键（我认为这是其中之一）应该是一个简单的自动递增整数，除了它作为表键的作用之外毫无意义。

虽然 Luke 建议使用 Session 是一个可行的选择和可行的解决方案，但我个人会做一些类似于我将在这里解释的事情，因为在我看来它更像是做事的“mvc 方式”。

**数据模型：** 要么将您当前的模型更改为我上面建议的模型，要么，如果由于某种原因（破坏依赖关系或 FK 关系）不可行，则创建一个可用作连接或代理的新表，如果你会：

```
public class Proxy
{
    public int ProxyId {get;set;}
    public MyModel MyModel {get; set;}
} 
```

显然，您必须做一些工作来填充此表，但是您可以使用它来获取记录，`MyModel`而无需直接访问该`MyKey`属性。

直接在视图中使用数据模型不是很好的做法，因此您还想创建一个**视图**模型

```
public class MyModelViewModel
{
    public int ModelId {get; set;}
    public string ModelValueToGet {get; set;}
} 
```

请注意，我们甚至不需要在视图模型中包含敏感数据的键。

然后将您的**视图**输入到 viewModel，而不是数据模型，并为 ModelId 包含一个隐藏字段

```
@using(Html.BeginForm("Edit", "Home", FormMethod.Post))
{
    Enter a value: @Html.EditorFor(m => m.ModelValueToGet)
    @Html.HiddenFor(m => m.ModelId)
    <input type="submit" value="Save" />
} 
```

现在在你的**控制器**中你有你的 get 方法

```
public ViewResult Index()
{
    //fetch the users record from the database 
    //if you're using the Proxy table, you'll want to write a LINQ query here
    //instantiate a viewModel and populate it's properties using the fetched record
    //remember, the viewModel.ModelId should be set to MyModel.ID or Proxy.ProxyId 
    //render the view
} 
```

和 post 方法

```
public ViewResult Edit (MyModelViewModel viewModel)
{
    //fetch the users record from the database using viewModel.ModelId
    //If you're using the proxy table, you'll need to use that LINQ query again here
    //update the record you fetched with the new data the user just entered
    //you have complete control here of what gets updated and what stays the same
    //pass the updated record to the repository to save the changes.
    //redirect the user to be on their merry way
} 
```

我认为这已经差不多了。希望这是有道理的。

# model-view-controller - 为不同的用户类型、MVC、PHP 生成导航

> ID：11800784
> 
> 赞同：1
> 
> 时间：2012-08-03T17:49:47.663
> 
> 标签：model-view-controller, navigation, role-based

我有这样的想法，即生成一组取决于用户角色的用户链接。

用户可以是学生或管理员。

我想到的是使用`foreach`循环生成仅对某些用户可用的链接列表。

`Navigation`我的问题是，我创建了一个名为数组到一页。

跟进问题，您认为我应该在哪里保留仅适用于学生和管理员的链接。我应该将它们保存在文本文件中吗？

或者，如果可以创建一个传递链接数组的控制器，例如`nav_controller`类中的一个方法 ->`studentLinks(){}`会将链接数组发送到辅助类，那么辅助类会将其发送到视图。

对不起，如果我很疯狂地解释。你有相关的资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:49:46.390

根据您的描述，您似乎正在构建一些与教育相关的系统。以这种方式创建实现是有意义的，以便您以后可以扩展项目。期望稍后添加“讲师”作为角色似乎是合理的。

话又说回来..我不确定您对 MVC 设计模式的了解有多大。

也就是说，在这种情况下，我会考虑两种方法来解决这个问题：

1.  查看从模型层请求当前用户的状态，并根据响应请求其他数据。然后查看使用管理员或用户模板并创建响应。

    您可以硬编码模板中的特定导航项，从中构建响应，或者可用导航项的点亮可以是您从模型层请求的附加信息的一部分。

    这种方法的缺点是，每次您需要添加另一个组时，您都必须重写一些（如果不是全部）视图类。

2.  将模型层的结构包装在一个*包含对象*中（本文中提供的实现基础 [）](https://stackoverflow.com/a/9685039/727208)，这可以让您限制返回的数据。

    使用这种方法时，views 会从模型层请求所有可用信息，但其中一些会返回`null`，在这种情况下，不会应用模板。为了实现这一点，可用导航项的列表必须由模型层提供。

**PS**你可能已经从这个描述中注意到，视图不是模板，模型不是类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:59:28.620

这实际上取决于您已经在使用什么以及您的项目规模。如果您使用的是数据库 - 将其粘贴在那里。如果您使用 xml/json/yaml/whatever - 将其存储在具有相应格式的文件中。如果您两者都没有 - 对其进行硬编码。我的意思是——避免使用多种技术来存储数据。此外，如果链接不会经常更新并且用户将无法自定义它们，我会对其进行硬编码。如果应用程序大部分是静态的，那么为了动态而创建非常复杂的东西是没有意义的。

请注意，这个问题不太适合stackoverflow。programmers.stackexchange.com 可能更合适

# jquery - 包装 jQuery 按钮集

> ID：11800788
> 
> 赞同：1
> 
> 时间：2012-08-03T17:50:07.710
> 
> 标签：jquery, css, jquery-ui

我有一个动态填充的 jquery 按钮集。唯一的问题是，如果动态添加的按钮太多，它们会换行到下一行，而不是优雅地执行。这是显示的内容：
`(element a|about|us|lorem|
|ipsum|and|done)`

这样做的主要问题是第一行最右边的元素和第二行最左边的元素没有圆角，它们像所有其他按钮元素一样有方角在按钮组的第一个或最后一个位置。反正有这样的显示器吗？
`(element a|about|us|lorem)
(ipsum|and|done)`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:43:09.927

正如彼得所说的那样使用`offset()`绝对是正确的方向。找到正确的元素后，您需要做的就是添加`.ui-corner-right`和`.ui-corner-left`类。

```
$("#box label").each(function(){   //loop through all the labels for the buttons
    var self = $(this);
    if( self.offset().top > self.height() ){ //find the first element on the second line
        self.addClass("ui-corner-left")
        .prev().prev().addClass("ui-corner-right") // move to the previous label on the above line
        return false;  // break out of the .each
   }
}); 
```

[http://jsfiddle.net/KEfau/](http://jsfiddle.net/KEfau/) 当然，这仅适用于两行的内容，并且 .each() 中的条件可能会根据您的布局而有所不同。对于多行按钮，我将有一个变量来存储该行的当前顶部偏移量，然后当一个元素与其不匹配时执行类添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:35:22.830

您可以尝试使用 jQuery offset() 检测换行符，并将中断前的项目设置为与您上次相同的类，并将中断后的项目设置为与您的第一个相同的类。我不确定这是否可行，取决于元素如何获得圆角，我对 jQuery-ui 并不熟悉

# android - 应用集成的“发送反馈”

> ID：11800790
> 
> 赞同：17
> 
> 时间：2012-08-03T17:50:09.503
> 
> 标签：android, google-plus, user-feedback

我正在寻找一个 .jar 或库项目，它允许我的应用程序用户轻松地**从应用程序内部**发送有关他们体验的反馈。

正如在[这个问题](https://stackoverflow.com/questions/11320685/how-to-implement-send-feedback-feature-in-android)中所问的那样，我正在寻找类似于 Google Plus 中使用的崩溃报告工具的东西，除了留下差评之外，它还允许用户与我联系。

在其他问题的答案中出现了一些不完全的解决方案：

1.  [ACRA](https://github.com/ACRA/acra)：Android 应用程序崩溃报告（用作崩溃报告工具）
2.  [Hockey Kit](http://hockeykit.net/index.html)：帮助分发测试版，与向开发人员发送反馈无关。

有这样的图书馆吗？有没有一种简单的方法可以从应用程序中收集用户反馈？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T16:00:48.337

如需功能齐全的用户支持服务，您可以查看 Capptain： http: [//www.capptain.com/](http://www.capptain.com/)

但是使用 ACRA，您还可以通过编程方式触发报告。例如，当用户在您的首选项屏幕中选择一个选项时，您可以调用方法 handleException(new UserRequestedException())。

然后，您将为包含 UserRequestedException 的所有堆栈跟踪过滤您的 ACRA 报告电子表格。

UserRequestedException 将是您将实现的自定义异常。

NOTIFICATION 模式可以配置为显示包含电子邮件字段和评论字段的表单。用户第一次提供的电子邮件保存在应用程序的偏好中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T19:42:01.207

回答你的问题有点晚了，但你可能想看看这个：[http](http://www.android-feedback.com/) ://www.android-feedback.com/ 。它是一个应用内反馈/支持系统。它尚未上线，但测试阶段将在几周后开始。（并且 beta 测试人员一旦上线就会被撞到高级/付费计划）

**编辑**：免责声明：它是我的项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-27T03:41:55.723

截至今天（2018 年 4 月 27 日），HockeyApp 可以处理此问题。它使用户能够向开发人员发送应用内反馈，然后开发人员可以通过仪表板进行访问。

退房：[www.hockeyapp.net](http://www.hockeyapp.net)

我在实现 HockeyApp 时遇到的问题是，反馈表要求用户添加不必要的详细信息，例如姓名、电子邮件等。我似乎找不到以编程方式添加这些详细信息的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-14T11:34:56.867

我认为您需要使用像[instabug](https://instabug.com/ "安装")这样的工具，它为您提供了一种收集错误报告和有关用户体验的反馈的方法，您还可以与他们交谈

# php - 创建动态关联数组

> ID：11800792
> 
> 赞同：-1
> 
> 时间：2012-08-03T17:50:21.113
> 
> 标签：php

所以基本上我创建了这个数组来将索引数组转换为 assoc 数组。

说这是我的输入数组

```
$input = array('this is the title','this is the author','this is the location','this is the quote'); 
```

这是我的功能

```
function dynamicAssocArray($input)
{
    $result = array();
    $assocArrayItems = array('title', 'author', 'location', 'quote');
    $assocItem;

    foreach ($input as $value)
    {
        for ($i=0; $i <= 3; $i++)
        {
            $assocItem = $assocArrayItems[$i];
        }
        $result = $result[$assocItem] = $value;
    }
    return $result;
} 
```

我收到此错误“警告：非法字符串偏移 'quote'”，输出为 string(1)“t”

我完全不明白，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:58:40.317

您不必在 php 中启动变量，这会使行`$assocItem;`变得毫无意义。下面的代码应该可以解决问题。

```
function dynamicAssocArray($input)
{
    $result = array();
    $assocArrayItems = array('title', 'author', 'location', 'quote');

    foreach ($input as $i => $value)
    {
        $assocItem = $assocArrayItems[$i];
        $result[$assocItem] = $value;
    }
    return $result;
} 
```

甚至更好地使用[array_combine()](http://www.php.net/manual/en/function.array-combine.php)：

```
function dynamicAssocArray($input)
{
    $assocArrayItems = array('title', 'author', 'location', 'quote');
    $result = array_combine($assocArrayItems, $input);
    return $result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:58:35.500

你是

1.  覆盖`$assocItem`四次（只留下最后一个值）
2.  分配`$value`给您的`$result`数组（使其成为字符串）。

你真的需要循环吗？只有四个值，更容易明确地编写它：

```
function dynamicAssocArray($input)
{
    return array(
      'title' => $input[0],
      'author' => $input[1],
      'author' => $input[2],
      'quote' => $input[3]
    );
} 
```

或者，正如[deceze](https://stackoverflow.com/users/476/deceze)在评论线程中所说：只需使用内置[`array_combine`](http://php.net/array_combine)函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T18:02:46.233

试试这个

```
function dynamicAssocArray($input)
{
    $result = array();
    $assocArrayItems = array('title', 'author', 'location', 'quote');
    $assocItem;

        for ($i=0; $i <= 3; $i++)
        {
            $assocItem = $assocArrayItems[$i];
            $result[$assocItem] = $input[$i];
        }

    return $result;
}

echo "<pre>";
print_r(dynamicAssocArray($input)); 
```

输出

```
Array
(
    [title] => this is the title
    [author] => this is the author
    [location] => this is the location
    [quote] => this is the quote
) 
```

# ruby-on-rails - Rails 3 将默认英文数字更改为阿拉伯数字

> ID：11800798
> 
> 赞同：1
> 
> 时间：2012-08-03T17:50:30.970
> 
> 标签：ruby-on-rails, internationalization, numbers, arabic

当用户切换到阿拉伯语界面时，我想将默认数字从英语更改为阿拉伯语。

13 => ١٣

89 => ٨٩

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:00:38.517

我添加了辅助模块

```
ARABIC_NUMBERS = %w(٠ ١ ٢ ٣ ٤ ٥ ٦ ٧ ٨ ٩)
def ta numbers
  numbers = numbers.to_s if numbers.is_a? Integer
  results = numbers.chars.map { |char| ARABIC_NUMBERS[char.to_i] }.join
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:01:19.463

检查此代码：[https](https://github.com/gdotdesign/rails-arabic-convert/blob/master/app/helpers/convert_helper.rb) ://github.com/gdotdesign/rails-arabic-convert/blob/master/app/helpers/convert_helper.rb 。

它是一个将英文数字转换为阿拉伯数字的助手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:53:02.057

我想出了这个快速的解决方案。我在 ApplicationHelper 中添加了以下功能

```
def tn(num)
  num.to_s.split(//).map{|r|t("n"+r)}.join
end 
```

然后为每个数字添加从 0 到 9 的翻译，`config/locals/ar.yml`格式如下：

```
n1: "١"
n2: "٢"
n3: "٣"
.
.
. 
```

现在我们可以调用新的数字翻译函数，通过`tn(13)`它`١٣`以阿拉伯语本地化输出

# php - PHP 脚本不会在命令行上运行

> ID：11800801
> 
> 赞同：0
> 
> 时间：2012-08-03T17:50:43.267
> 
> 标签：php, command-line-interface, daemon, gremlin

编码：

```
#!/usr/bin/php -q
<?php
while(true){
    $rate_limit = json_decode(file_get_contents('http://api.twitter.com/1/account/rate_limit_status.json'),true); # Check how many API calls remain

    $wait = round(3600/150);
    # *** IMPORTANT ***
    # Twitter limits API calls to 150/hr so regardless of the number of handles, we can only make one request every 24 seconds (which is 3600/150).
    # As a result, it takes one hour to run through 150 handles one time each.  Since we'll probably never monitor that many, each handle may get updated multiple times an hour.

    # Establish the database connection
    if(!$mysqli = mysqli_connect('localhost','twitterd','password','twitterd')){
        file_put_contents('tweet_gremlin.log', date('r') . ' Cannot connect to the database');
        break;
    }

    $get_handles = mysqli_query($mysqli,"SELECT `handle` FROM twitter_handles"); # Grab the Twitter handles from the database

    #  Append them to the $handles array
    while($row = mysqli_fetch_array($get_handles,MYSQLI_NUM)){
        $handles[] = $row[0];
    }

    #  Check the remaining API calls
    if($rate_limit['remaining_hits']<count($handles)){
        file_put_contents('tweet_gremlin.log', date('r') . ' Rate limit reached', FILE_APPEND);
        sleep(600);
        continue;
    }else{
        # Loop through the $handles values, make an API call, and insert the tweets.
        foreach($handles as $value){
            file_put_contents('tweet_gremlin.log', date('r') . ' Processing ' . $value . '\'s data...' . PHP_EOL, FILE_APPEND); # Tell the log what we're doing

            $user_data = json_decode(file_get_contents('http://search.twitter.com/search.json?q=from:' . $value . '&rpp=100&include_entities=1'),true); # Get the handle's timeline and put it into $user_data
            $user_data = $user_data['results']; # Put only the results index (tweets) into into $user_data

            if(count($user_data)<1){
                file_put_contents('tweet_gremlin.log', date('r') . ' No data for ' . $value . PHP_EOL, FILE_APPEND);
            }

            for($i=0;$i<count($user_data);$i++){
                # Lazy method for sanitizing variables
                $id = mysqli_real_escape_string($mysqli,$user_data[$i]['id']);
                $created_at = mysqli_real_escape_string($mysqli,$user_data[$i]['created_at']);
                $from_user_id = mysqli_real_escape_string($mysqli,$user_data[$i]['from_user_id']);
                $profile_image_url = mysqli_real_escape_string($mysqli,$user_data[$i]['profile_image_url']);
                $from_user = mysqli_real_escape_string($mysqli,$user_data[$i]['from_user']);
                $from_user_name = mysqli_real_escape_string($mysqli,$user_data[$i]['from_user_name']);
                $text = mysqli_real_escape_string($mysqli,$user_data[$i]['text']);

                $needles = array('hack','tango down','dump','breach','data');

                # Check the tweet relevance
                foreach($needles as $needle){
                    $needle = '/' . $needle . '/i'; # So we don't have to manually type out the regex

                    # Make a call based on the tweet contents
                    if(preg_match($needle,$text) == 0){
                        file_put_contents('tweet_gremlin.log', date('r') . ' No relevant tweet data in tweet #' . $id .PHP_EOL, FILE_APPEND);
                    }else{
                        file_put_contents('tweet_gremlin.log', date('r') . ' Processing tweet #' . $id .PHP_EOL, FILE_APPEND);
                        $insert_tweets = "INSERT INTO tweets (`id`,`created_at`,`from_user_id`,`profile_image`,`from_user`,`from_user_name`,`text`) VALUES ('{$id}','{$created_at}','{$from_user_id}','{$profile_image_url}','{$from_user}','{$from_user_name}','{$text}');";
                        mysqli_query($mysqli,$insert_tweets);
                    }
                }
            }
            file_put_contents('tweet_gremlin.log', date('r') . ' Sleeping for ' . $wait . ' seconds before processing the next handle' .PHP_EOL, FILE_APPEND);
            sleep($wait);
        }
    }
    mysqli_close($mysqli);
}
?> 
```

如果我像这样在命令行上运行它：

```
./tweet_gremlin.php 
```

它运行良好。但如果我这样运行它：

```
./tweet_gremlin.php & 
```

它什么也不做。我不知道为什么。

编辑：我不得不取出几乎所有的代码，因为它不会让我全部提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:23:41.597

您使用 & 符号创建一个后台作业。

根据底层操作系统，后台作业更改为状态“已停止”，因为它想要从 STDIN 读取和/或想要写入 STDOUT。

启动后进入 `jobs`同一个终端`./tweet_gremlin.php &`
这告诉你工作的状态。

如果作业的状态为“已停止”，则丢弃 STDOUT+STDERR 和 STDIN：`./tweet_gremlin.php </dev/null &>/dev/null &`

如果您的脚本现在运行，您需要以不同的方式处理 STDIN 和/或 STDOUT+STDERR，`./tweet_gremlin.php &`
例如写入日志文件而不是 STDOUT+STDERR。

您还可以测试终端的行为。
由于缺少分号，以下会在 STDERR 上创建 PHP 错误：

```
php -r 'echo "backgrounding sucks\n"' &
jobs
fg1 
```

以下在 STDOUT 上创建正常输出：

```
php -r 'echo "backgrounding sucks\n";' &
jobs
fg1 
```

如果您无法解决代码中的问题，请查看终端设置。注意 stty tostop（SIGTTOU 信号）

# java - 如何重新设置一个小程序，让信息不会每次都堆积如山？

> ID：11800802
> 
> 赞同：0
> 
> 时间：2012-08-03T17:50:43.310
> 
> 标签：java, applet, reload, restart, destroy

我正在编写一个带有重置按钮的java小程序，以便用户可以使用指定数量的对象重新启动应用程序，并且当单击重置按钮时，我定义的这个方法被调用：

```
 public void reload(int new_number){
   init_num_objects =  new_number;
   this.destroy();
   this.init();
 } 
```

这个按钮在技术上完全符合我的要求，它改变了 init 调用并重新启动小程序的变量的值：

```
public void init(){
  load_objects(init_num_objects);
} 
```

问题是用户点击重置按钮的次数越多，程序（因此用户的计算机）变得越慢。就好像小程序每次都在重新加载，而没有从前一个进程中清除内存空间。有没有办法让程序完全关闭并重新启动而不会减慢客户端机器的速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:28:13.187

> 如何重新设置一个小程序，让信息不会每次都堆积如山？

```
// in the applet..
this.getAppletContext().showDocument( this.getDocumentBase() ); 
```

JVM会自动调用`stop()`& `destroy()`，刷新页面，调用`init()`and `start()`。更改文档基本 URL 以包含“计数”参数。使用 JS 读取参数并相应地写入新的小程序元素。

当小程序调用旨在由 JVM 自动调用的方法时，出现问题我并不感到惊讶。

# c++ - 快速排序问题 (C++)

> ID：11800803
> 
> 赞同：2
> 
> 时间：2012-08-03T17:50:45.637
> 
> 标签：c++, quicksort

使用QUICKSORT，对包含偶数的整数数组进行升序排序，奇数降序排序。

例如：输入 int a[8]={4,6,1,2,5,3,8,7} => 输出为 {2,4,6,8,7,5,3,1}。

* * *

我认为 QSort 函数会让我看起来像这样 B={4,6,2,8,1,3,7,5} 我会将 B 数组拆分为两个数组 C 和 D。

* * *

C 数组包含偶数 {4,6,2,8}，我将使用 QuickSort 对 C 数组进行排序，如下所示 {2,4,6,8}

* * *

D数组包含uven编号{5,3,1,7}，我将使用QuickSort对D数组进行排序{7,5,3,1}之后我将加上C和D。最后我的预期结果是{2,4,6,8,7,5,3,1} 这是我的代码 :(！非常感谢！

```
 void Input(int a[], int n)
    {
        for(int i = 0; i<n;i++)
        {
            cout<<"a["<<i<<"]: ";
                cin>>a[i];
        }
    }
    void Display(int a[],int n)
    {
        for(int i = 0;i < n; i++)
        {
            cout<<a[i]<<" ";
        }
        cout<<endl;
    }
    void Swap(int &a, int &b)
    {
        int temp = a;
        a=b;
        b=temp;
    }
    void QuickSort(int a[],int Left ,int Right)
    {
        int i, j, x;
        x = a[(Left + Right)/2];
        i = Left;j = Right;
        do
        {
            while( a[i]<x) i++;
            while(a[j]>x) j--;
            if(i<=j)
            {
                Swap(a[i],a[j]);
                    i++; j--;
            }
        }while (i<=j);
        if(i<Right) QuickSort(a,i,Right);
        if(Left<j) QuickSort(a,Left,j);

    }
   //after sort the array with function QuickSort, i was suggested to use 1 more       QuickSort 
   // to move evennumber to the top of the array
    void QSort(int a[],int Left,int Right)
    {
        int i, j, x;
        x = a[(Left + Right)/2];
        i = Left;j = Right;

        {
            while(a[i]%2==0 && a[i]<x ) i++;
            while(a[j]%2==1 && a[j]>x) j--;
            if(i<=j)
            {
                Swap(a[i],a[j]);
                    i++; j--;
            }
        }while (i<=j);
        for (i = 0; i<r;i++)
        {

        }
        if(i<Right) QSort(a,i,Right);
        if(Left<j) QSort(a,Left,j);
    }

    int main()
    {
          //n is numbers of integer array
        int a[Max],n;
            cout<<"Insert numbers of array: ";
            cin>>n;
            Input(a,n);
            cout<<"Array:\n";
            Display(a,n);
            cout<<endl;

            cout<<"Array after arrange: \n";
            QuickSort(a,0,n-1);
            Display(a,n);
            cout<<endl;

            cout<<"move even number to the top:\n";
            QSort(a,0,n-1);
            Display(a,n);

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:14:32.740

那么，数字 1 到 10 应该排序为`{2,4,6,8,10,9,7,5,3,1}`?

无需查看您的代码，我可以告诉您，您不需要两个快速排序函数。

让偶数比奇数少。相同奇偶校验的数字按指定进行比较。

# powershell - 使用 Kerberos 进行机器身份验证时，CredSSP PowerShell 会话失败

> ID：11800816
> 
> 赞同：3
> 
> 时间：2012-08-03T17:52:05.013
> 
> 标签：powershell, kerberos, powershell-remoting

我们正在尝试将 CredSSP 身份验证用于[多跳 PowerShell 远程处理](http://msdn.microsoft.com/en-us/library/windows/desktop/ee309365.aspx)，并且我们的一个客户端遇到了一个障碍，阻止他们在指定目标服务器的 FQDN 时使用 CredSSP 创建 PSSession。服务器和客户端都加入了同一个域，并且不相交的命名空间没有什么特别的。

在调试过程中，我们把能想到的所有相关安全选项都打开了；具体来说：

*   我们已启用 GP 设置以允许使用通配符 SPN wsman/* 委派新凭据（标准和“仅使用 NTLM”）
*   我们已使用 *.domain.com 启用 WSMan 受信任主机设置
*   我们（当然）在服务器和客户端上为 CredSSP 启用了 WSMan
*   我们在服务器上设置了 LocalAccountTokenFilterPolicy

打开所有这些设置后，我们在为 PSSession 尝试不同的身份验证方法时会得到以下结果：

*   使用 Kerberos 进行具有显式域凭据的委派工作正常。
*   使用 Negotiate 进行具有显式域凭据的委派工作正常。
*   使用 CredSSP 进行委派：
    *   使用域凭据连接到服务器的 FQDN 失败并显示错误[当前没有可用于服务登录请求的登录服务器](http://msdn.microsoft.com/en-us/library/ms838310.aspx)
    *   使用域凭据，仅连接到服务器的主机名，失败并出现相同的错误
    *   使用服务器上本地帐户的凭据（我相信因此强制 NTLM 进行服务器身份验证），连接到服务器的 FQDN，工作正常
    *   使用域凭据，连接到服务器的 IP 地址（从而强制 NTLM 进行服务器身份验证），工作正常

因此，简而言之，只要我们使用 NTLM 进行服务器身份验证，CredSSP 就可以工作，而当我们使用 Kerberos 时，CredSSP 就会失败，但是如果我们也使用 Kerberos 进行委派，Kerberos 肯定可以正常工作。这怎么可能，我们可以做些什么来使 CredSSP+Kerberos 正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:58:16.327

在微软部分工程师的帮助下，我们解决了这个问题：客户站点的**域控制器**是 Server 2003，不支持 CredSSP（需要 Server 2008 或更高版本）。

也就是说，带有 NTLM 的 CredSSP 可以工作，因为 NTLM 不涉及域控制器——它只是在客户端 (Windows 7 x64) 和服务器 (Server 2008 R2 x64) 之间。当您将 CredSSP 与 Kerberos 一起使用时，您现在涉及到域控制器 (KDC)，它不知道如何处理 CredSSP 连接，因此它失败了。

因此，在客户可以升级他们的域控制器之前，他们将使用本地用户帐户通过我们的部署工具进行远程操作，从而将域从图片中删除。

# javascript - Jquery Animate 不适合我

> ID：11800818
> 
> 赞同：0
> 
> 时间：2012-08-03T17:52:11.253
> 
> 标签：javascript, jquery, jquery-ui, jquery-animate

我为动画背景鼠标悬停创建了这段代码，但它不起作用，只会改变另一个背景，但在我使用函数时不显示效果`animate`：

```
$(".b_header").mouseover(function() {

$(this).css("background-image","url(images/bot/head_down.png)");

/*

Also I've tried other effects and nothing 

$(this).css( {backgroundPosition: "0 0"} );

$(this).animate(
{backgroundPosition:"(-20px -53px)"}, 
{duration:500});
*/

$(this).animate({ opacity: 5 }, 3000);

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:02:49.580

**首先**，确保你已经使用*了 document.ready*

```
$(document).ready(function() {
     ......
     $(this).animate({ opacity: 1 }, 3000);
}); 
```

**其次**，在你的 CSS 文件中确保你设置了跨浏览器的**不透明度**属性

```
opacity: 0; /* Chrome 4+, FF2+, Saf3.1+, Opera 9+, IE9, iOS 3.2+, Android 2.1+ */
filter: alpha(opacity=0); /* IE6-IE8 */ 
```

**最后**，不透明度值范围从 0（隐藏）到 1（不透明），没有 5 值，但它会像 1 一样正常工作

这是一个工作示例=> [http://jsfiddle.net/abdullahdiaa/PxGwz/](http://jsfiddle.net/abdullahdiaa/PxGwz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:54:38.580

jQuery 的 animate 函数不适用于采用多个值的 CSS 属性。您通常可以分别为每个单独的值设置动画。因此，这可以解释为什么尝试为**background-position**的两个值设置动画都行不通。

来自[jQuery 文档`.animate()`](http://api.jquery.com/animate/)：

> 所有动画属性都应动画为单个数值，

对于**opacity**的动画，它的取值范围是 0 到 1，而不是 5，并且要查看使用 opacity 的动画，对象必须以不同于您制作动画的不透明度开始。

这是动画不透明度的一个工作示例：http: [//jsfiddle.net/jfriend00/zCL7S/](http://jsfiddle.net/jfriend00/zCL7S/)

# android - 禁用通过手势滚动 ScrollView

> ID：11800820
> 
> 赞同：0
> 
> 时间：2012-08-03T17:52:20.317
> 
> 标签：android, view, scroll

如何禁用用户对 Scrollview 的滚动？我想通过代码滚动它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:47:04.027

要回答这个问题：

我做了一些研究，以下效果最好：

```
scroll.setOnTouchListener(new OnTouchListener()
{ 
    public boolean onTouch(View v, MotionEvent event) 
    {
        return true; 
    }
}); 
```

从我的工作代码中解析。

# css - 完全覆盖移动浏览器的 css？

> ID：11800821
> 
> 赞同：1
> 
> 时间：2012-08-03T17:52:32.190
> 
> 标签：css, mobile, overriding

所以我使用@media 查询在我的网站的移动版本上使用不同的 css 文件。这是我的html的头：

```
<link rel="stylesheet" type="text/css" media="screen,projection" href="<?php bloginfo('stylesheet_url'); ?>" title="Simplr" />

<link media="only screen and (max-device-width: 800px)" href="mobile.css" type="text/css" rel="stylesheet" /> 
```

但是，我发现移动 css 只是“添加”到桌面 css，而不是*仅*在 mobile.css 中加载 css 规则的预期效果。例如，在 mobile.css 中有一条关于背景颜色为红色的规则，不仅会给我一些带有红色背景的未格式化的 Web 内容，而且会用红色背景渲染桌面 css。

我想完全从头开始，使用空白的 css 文件在手机上建立一个漂亮的功能性网站视图，但我不想手动撤消我为使网站适合桌面所做的许多调整. 特别是，我希望能够消除一些杂散的桌面 css 阻止网站在移动设备上以正确比例呈现的可能性。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:57:41.487

```
<link media="only screen and (min-device-width: 0px) and (max-width:800px)" href="mobile.css" type="text/css" rel="stylesheet" />

<link media="only screen and (min-device-width: 801px) and (max-width:9999px)" href="<?php bloginfo('stylesheet_url'); ?>" title="Simplr" type="text/css" rel="stylesheet" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:55:28.913

将您的桌面 css 包装在针对桌面的媒体查询中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:56:21.277

以这样的条件方式使用您的媒体查询：

```
@media screen and (max-width: 800px) {
  <link to mobile stylesheet
}

@media screean and (min-width: 801px) {
  <link to full stylesheet
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T18:01:33.347

请注意，所有平台都将使用“@media screen”，因此您无法仅使用媒体类型进行可靠的设备检测。最常见的是，您将使用设备宽度来帮助您对客户端将是什么类型的设备进行有根据的猜测。

具有高 DPI 的设备通常会假装它们更小，因此 iPhone 3GS 和 iPhone 4（例如）都可以与同一组查询匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T18:07:03.013

无论您是链接“仅屏幕和（最大设备宽度：800px）”还是构建到您的 CSS“@media @...”

您需要封装“桌面”样式，以使移动设备根本无法识别它们。

所以基本上

```
only screen and (max-device-width: 800px) - for your mobile devices 
```

和

```
only screen and (min-width: 801px) - for desktops 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-03T17:57:26.407

如果您将移动设备放在最后，那么您可以将 CSS 重置添加到移动样式表的顶部。

# c# - 我怎样才能使这个异常处理代码遵守 DRY 原则？

> ID：11800823
> 
> 赞同：7
> 
> 时间：2012-08-03T17:52:34.437
> 
> 标签：c#, .net, design-patterns, exception-handling

我有一种特殊情况，我需要捕获异常并将一个对象返回给客户端以代替异常。我**不能**将异常处理逻辑放在更高级别，即将 Foo 包装在 try 子句中。

最好用一些示例代码来演示。异常处理逻辑模糊了方法的意图，如果我有许多类似意图的方法，在 Foo 类中，我发现自己重复了大部分的 catch 逻辑。

在下面的代码中包装常见异常功能的最佳技术是什么？

```
public class Foo
{
     public Bar SomeMethodThatCanThrowExcepetion()
     {
          try
          {
              return new Bar().Execute();
          }
          catch(BazException ex)
          {
              WriteLogMessage(ex, Bar.ErrorCode);
              return new Bar() { ErrorMessage = ex.Message, ErrorCode = Bar.ErrorCode;}                  
          }
     }

     public Baz SomeMethodThatCanThrowExcepetion(SomeObject stuff)
     {
          try
          {
              return new Baz(stuff).Execute();
          }
          catch(BazException ex)
          {
              WriteLogMessage(ex, Baz.ErrorCode);
              return new Baz() { ErrorMessage = ex.Message, ErrorCode = Baz.ErrorCode;}                  
          }
     }
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T18:05:23.550

*根据李的评论更新*

* * *

一种可能性是使用通用辅助方法。像这样的东西：

```
T TryExecute<T>(Func<T> action, int ErrorCode)
{
    try
    {
        return action();
    }
    catch (Exception ex)
    {
        result = Activator.CreateInstance<T>();
        typeof(T).GetProperty("ErrorMessage").SetValue(result, ex.Message, null);
        typeof(T).GetProperty("ErrorCode").SetValue(result, ErrorCode, null);
        return result;
    }
    return result;
} 
```

如果您可以修改*Bar*和*Baz*，那么您可以通过对*T*提出要求来改进它：

```
public interface IError
{
    public string ErrorMessage { get; set; }
    public int ErrorCode { get; set; }
}

T TryExecute<T>(Func<T> action, int ErrorCode) where T : IError
{
    try
    {
        return action();
    }
    catch (Exception ex)
    {
        result = Activator.CreateInstance<T>();
        result.ErrorMessage = ex.Message;
        result.ErrorCode = ErrorCode;
        return result;
    }
} 
```

然后你会使用：

```
return TryExecute<Bar>(new Bar().Execute, Bar.ErrorCode); 
```

和：

```
return TryExecute<Baz>(new Baz(stuff).Execute, Baz.ErrorCode); 
```

对于您的特定设计，这可能是也可能不是过度抽象；细节决定成败。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T18:05:26.530

基类怎么样：

```
public class ErrorCapable {
  public string ErrorMessage { set; get; }
  public int ErrorCode { set; get; }

  public static ErrorCapable<T> Oops(Exception exc) where T : ErrorCapable, new() {
    // Code for logging error here
    return new T() { ErrorMessage = exc.Message, ErrorCode = exc.ErrorCode };
  }
}

public class Bar : ErrorCapable {
  //...
}
public class Baz : ErrorCapable {
  //...
} 
```

然后在catch中，只需使用，例如：

```
return ErrorCapable.Oops<Bar>(ex); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T18:07:28.143

我认为你能做的最好的事情是：

```
public T TryOrDefault<T>(Func<T> act, int errorCode, Func<BazException, T> onError)
{
    try
    {
        return act;
    }
    catch(BazException ex)
    {
        WriteLogMessage(ex, errorCode);
        return onError(ex);
    }
} 
```

那么您可以根据它编写其他方法：

```
public Bar SomeMethodThatCanThrowException()
{
    Bar b = new Bar();
    return ExecOrDefault(() => b.Execute(), Bar.ErrorCode, ex => new Bar { ErrorMessage = ex.Message, ErrorCode = Bar.ErrorCode });
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T17:57:51.230

您真的需要在每种方法中显式登录吗？不要在每个方法中都有异常逻辑，而是在程序的`Main`方法中使用一个处理程序并通用处理异常。

此外，如果您确实需要在那里进行日志记录，则不需要从 catch 块返回任意对象，只需使用`throw;`它来让它在堆栈中游荡。

# c# - COMException: 80040154

> ID：11800828
> 
> 赞同：2
> 
> 时间：2012-08-03T17:52:51.430
> 
> 标签：c#, visual-studio-2010, com

我有一些用 C++ 编写的 COM .dll，我已通过 regsvr32 注册。有问题的机器是 32 位机器，.dll 本身也是 32 位的。

在 C# Visual Studio 中，我添加了对 COM 应用程序的引用，并尝试创建一个已定义的 coclass。但是，当我尝试运行时收到以下错误消息。

```
Creating an instance of the COM component with CLSID {125F6114-3444-41B0-A5CC-7333EAA8020A} from the IClassFactory failed due to the following error: 80040154. 
```

我在注册表中查找该 CLSID 并在所有正确的位置找到它。如果连 Visual Studio 都可以找到 COM 组件，我怎么会无法创建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-12T18:01:03.270

在我尝试以管理员身份运行 Visual Studio 之前，我遇到了同样的问题并且没有任何效果。

# c# - 使用 Entity Framework/ADO.NET 从表中删除

> ID：11800830
> 
> 赞同：0
> 
> 时间：2012-08-03T17:52:55.493
> 
> 标签：c#, .net, database, entity-framework, ado.net

我正在尝试从表中删除一整行数据。我正在使用的代码是：

```
OModel.Cart pncart = database.Carts.FirstOrDefault(
                        pn => pn.OrderId == Session["OOID"] && 
                        pn.PartNumber == Request.QueryString["PartNumber"]);

database.Carts.DeleteObject(pncart);
database.SaveChanges(); 
```

它给我的错误是：

> LINQ to Entities 无法识别方法“System.Object get_Item(System.String)”方法，并且该方法无法转换为存储表达式。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.NotSupportedException：LINQ to Entities 无法识别方法“System.Object get_Item(System.String)”方法，并且此方法无法转换为存储表达式。

它说了一些关于`NotSupportException`，所以我猜你不能这样做。

那么，我将如何从表中删除？我认为这是正确的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:56:27.103

我会为 and 声明变量，`Session["OOID"]`而`Request.QueryString["PartNumber"]`不是在你的 linq 表达式中使用它们。

我相信它告诉您它无法翻译这些操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T17:58:57.170

LINQ to Entities 卡在嵌入式表达式上（LINQ to SQL 处理得更好）。您必须分解嵌入的表达式，以便 lambda 仅包含字符串常量。

```
string ooid = Session["OOID"];
string partNo = Request.QueryString["PartNumber"];

OModel.Cart pncart = database.Carts.FirstOrDefault(
                        pn => pn.OrderId == ooid && pn.PartNumber == partNo); 
```

# excel - 在 Excel 2010 的不同窗口中打开同一工作簿的不同选项卡

> ID：11800831
> 
> 赞同：10
> 
> 时间：2012-08-03T17:52:56.433
> 
> 标签：excel, excel-2010

在 Excel 2010 中，有没有办法在不同的窗口中打开同一工作簿的不同选项卡？可以通过打开多个 Excel 实例在单独的窗口中打开不同的工作簿，但这不适用于打开同一工作簿的不同选项卡，因为会出现错误消息，表明工作簿已被锁定以进行编辑。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-03T17:56:10.773

功能区的“视图”选项卡上有一个“新窗口”按钮。

如果您通过单击“全部排列”来跟进此操作，您可以在两个不同的位置（并排或堆叠）查看同一个工作表。

你是这么想的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-08T19:55:37.983

我做了查看 | 全部安排 | 然后选择“活动工作簿的窗口”。由于我只有两个活动工作表，这让我可以看到两个选项卡。起初，它在两个窗口中显示相同的选项卡。只需选择您想在一个窗口中查看的另一个选项卡，然后“繁荣”，您就可以看到并在两者之间切换。

# json - Google Drive SDK jsonRequest header 含义

> ID：11800835
> 
> 赞同：1
> 
> 时间：2012-08-03T17:53:22.017
> 
> 标签：json, rest, request, google-drive-api

“使用文件和文件夹”部分中的 google drive sdk 文档说明了有关帖子标题的内容。这是：

```
POST https://www.googleapis.com/drive/v2/files
Authorization: Bearer {ACCESS_TOKEN}
Content-Type: application/json 
```

这是什么意思？标头是否真的存在于 jsonRequest 中？这个帖子应该去哪里？我们是否应该先键入头部，然后将 json 请求与 json 字符串一起放入，然后将其发布到服务器？还是像这样将 ACCESS_TOKEN 和其余信息与 URL 作为获取一起发布？

```
POST https://www.googleapis.com/drive/v2/files?access_token={ACCESS_TOKEN}&etc=whatever&... 
```

我知道您需要获得访问令牌或 API 密钥，但是这会去哪里呢？这是在 url 字符串上，还是在 post 值或 jsonRequest 中？

我已经阅读了 json.org 中的 jsonRequest，但仍然无法得到它。我是否需要考虑我的内容类型、内容长度和内容编码的真正含义？如果我愿意，所有这些信息应该去哪里？

有时，答案只是盯着我的脸，不知不觉中，我已经错过了重点。那么，任何人都可以给我一些启示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:38:55.790

标头是 HTTP 请求的标准部分。http请求的标准是header字段和request方法。

`POST https://www.googleapis.com/drive/v2/files`

此示例中的请求方法是 POST，它将数据发送到 google drive api 服务器。这意味着，Google Drive API 将接受 POST 请求。

`Authorization: Bearer {ACCESS_TOKEN}`

在这种情况下，授权是一个 ACCESS_TOKEN，即 API_KEY。服务器也可能收到一个 GET 请求。服务器在执行它的过程之前检查用户是否被授权：创建、删除、更新或获取文件（取决于 Http Request json 数据发送的内容）。

`Content-Type: application/json`

Content-Type 告诉服务器将要发送的 HTTP 请求的 Mime 类型是一个 json 字符串。Mime 类型可能已经是服务器的标准，这意味着您甚至不必将其放在代码中的任何位置，因为它假定您将发送一个 json 字符串，并且一旦您执行 POST，它就会接收它。否则会报错。Content-Type 字段将始终接收 Mime 类型。（有关 Mime 类型的列表，您可以参考[http://en.wikipedia.org/wiki/MIME_type](http://en.wikipedia.org/wiki/MIME_type)。）

由于 HTTP 标头是一种标准，因此您需要了解 Google Drive API 服务器使用的标准类型。然后，跟随标题字段的位置。例如，ACCESS_TOKEN 作为 GET 位于 url 字符串中，而 json 字符串位于 POST 中。（对于 HTTP Header 的列表，您还可以从[http://en.wikipedia.org/wiki/List_of_HTTP_header_fields](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)获得参考。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:58:32.757

Google Drive API 是一个使用 HTTP 请求作为通信机制的 RESTFul API。标`Authorization`头是一个 HTTP 标头，需要随请求一起发送以对其进行授权。JSON 仅用作资源表示。

但是，Drive API 也支持将 OAuth 2.0 访问令牌作为`?access_token=`查询参数传递，这对您来说更方便。

如果您使用的是受支持的客户端库之一，所有这些都将通过类抽象为您处理。

# php - 警告：imagecreatefromjpeg(.jpg) 无法打开流：没有这样的文件或目录

> ID：11800843
> 
> 赞同：-5
> 
> 时间：2012-08-03T17:53:46.427
> 
> 标签：php

我正在尝试随机化背景图片并在其上生成一些文本。所以这是我的一段代码：

```
$background=$option.".jpg";
$opt="0,1,2,3,4,5,6,7";
$opt=explode(",",$opt);
$option=$opt[rand(0,7)]; 
```

和

```
$im = imagecreatefromjpeg ($background); 
```

请告诉我为什么我在 rand 时收到此错误？！？

图片是数字0-7。

![](../Images/83d8a069172776eccb3b7ca7a2f4fa6c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:59:17.903

您收到此错误是因为您在将 $option 变量实际设置为所需的值之前尝试使用它。

```
$background=$option.".jpg";
$opt="0,1,2,3,4,5,6,7";
$opt=explode(",",$opt);
$option=$opt[rand(0,7)]; 
```

应该：

```
$opt="0,1,2,3,4,5,6,7";
$opt=explode(",",$opt);
$option=$opt[rand(0,7)];
$background=$option.".jpg"; 
```

另外，为什么要打扰字符串？为什么不使用这个：

```
$background=rand(0,7).".jpg"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:59:28.623

如果您确定您的脚本具有正确的文件路径（回显 $background），则可能是权限问题。确保您运行的任何 Web 服务器都有权读取相关文件。

# asp.net - 使用 ASP.NET Web API 作为图像服务

> ID：11800844
> 
> 赞同：5
> 
> 时间：2012-08-03T17:53:49.993
> 
> 标签：asp.net, image, web-services, rest, asp.net-web-api

我有一个在网络和移动平台上运行的应用程序，它的用户可以使用该应用程序上传照片。我需要一个网络服务来处理在网络和移动应用程序上上传和显示图像。

将 ASP.NET Web API 用作图像服务并在其上发出 POST 请求以上传照片是个好主意吗？这种方法有哪些优点和缺点？是否为这样的服务使用 ASP.NET Web API 开销？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-04T18:07:37.550

ASP.NET Web API 与异步 I/O 配合得很好——它使用 .NET 4（尤其是 .Net 4.5）中新的基于任务的异步模型，这使得构建异步控制器和协调多个异步操作变得直接。如果这个模型对你来说是新的，那么我会推荐[这个在 channel9 上的演示](http://channel9.msdn.com/Events/aspConf/aspConf/Async-in-ASP-NET)。

对于上传，ASP.NET Web API 支持基于表单的通用 HTML 文件上传模型的完全异步 MIME 分段文件上传。[您可以在作为 source 的 FileUploadSample](http://aspnet.codeplex.com/SourceControl/changeset/view/7032a5db4d6a#Samples/Net45/CS/WebApi/FileUploadSample/Controllers/FileUploadController.cs)中看到一个示例。

使用 StreamContent 异步提供文件也很简单。在这里，您（在控制器中）打开一个文件，创建一个 HttpResponseMessage 并以包装文件的 StreamContent 的形式附加一个 HttpContent ，就是这样。

这一切都发生在没有阻塞 I/O 上的任何线程的情况下。

希望这可以帮助，

亨里克

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T18:36:31.750

这取决于您的应用程序可能有多少并发和多少用户。

这种应用程序的本质是以 I/O 为中心，这意味着您的 ASP.NET 服务器将大部分时间等待 I/O 操作完成。在高并发的情况下，这将导致您的 ASP.NET 托管线程池因线程不足而崩溃。

我会推荐：

1) 如果您保持 ASP.NET 主动权，请实现 IAsync 编程模型。这将使您的 Web 应用程序更能够扩展。

2）如果您不想处理 IAsyncResult，则在中间放置一些负载均衡器并水平扩展，根据需要添加更多服务器。这可能需要将您的 ASP.NET 应用程序重新设计为 Web Farm，从而增加一些复杂性（会话状态管理、身份验证、授权等）。

3) 尝试不同的技术，Node.js 以处理 I/O 高延迟、编程模型而闻名。

# ios - 调度队列的表格视图单元格中填充了错误的数据

> ID：11800846
> 
> 赞同：2
> 
> 时间：2012-08-03T17:53:57.727
> 
> 标签：ios, uitableview, grand-central-dispatch

我有一个 iOS 应用程序，它有一个 UITableView 和包含 UIImageView 的自定义 TableViewCells。该图像是从 Web 服务加载的，因此在初始加载期间，我会显示一个“正在加载”的图像，然后使用 gcd 调度并获取与该单元格的数据匹配的图像。

当我使用 DISPATCH_QUEUE_PRIORITY_HIGH 全局队列来执行图像提取时，我偶尔会在 tableview 单元格中加载错误的图像。如果我使用自己的自定义队列，那么正确的图像会填充到单元格中，但 tableview 性能很糟糕。

这是代码...

```
 // See if the icon is in the cache
if([self.photoCache objectForKey:[sample valueForKey:@"api_id"]]){
    [[cell sampleIcon]setImage:[self.photoCache objectForKey:[sample valueForKey:@"api_id"]]];
}
else {
    NSLog(@"Cache miss");
        [cell.sampleIcon setImage:nil];
        dispatch_queue_t cacheMissQueue = dispatch_queue_create("cacheMissQueue", NULL);
        //dispatch_queue_t cacheMissQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
        dispatch_async(cacheMissQueue, ^{
            if(sample.thumbnailFilename && sample.api_id){
                NSData *thumbNailData = [[NSData alloc] initWithContentsOfFile:sample.thumbnailFilename];
                UIImage *thumbNailImage = [[UIImage alloc]initWithData:thumbNailData];
                if(thumbNailImage){
                    // Set the cell
                    dispatch_sync(dispatch_get_main_queue(), ^{
                        [[cell sampleIcon]setImage:thumbNailImage];
                        [cell setNeedsLayout];
                    });
                    // save it to cache for future references
                    NSLog(@"DEBUG: Saving to cache %@ for sample %@",sample.thumbnailFilename,[sample objectID]);
                    [self.photoCache setObject:thumbNailImage forKey:sample.api_id];
                }
            }
        });
        dispatch_release(cacheMissQueue);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:49:21.493

观看 WWDC 2012 会议 #211 帮助很大，我将代码从使用 GCD 更改为 NSOperationQueue 并解决了问题。

新代码...

```
[[self imgQueue]addOperationWithBlock:^{
            if(sample.thumbnailFilename && sample.api_id){
                NSData *thumbNailData = [[NSData alloc] initWithContentsOfFile:sample.thumbnailFilename];
                UIImage *thumbNailImage = [[UIImage alloc]initWithData:thumbNailData];
                if(thumbNailImage){
                    // Set the cell
                    [[NSOperationQueue mainQueue]addOperationWithBlock:^{
                        [[cell sampleIcon]setImage:thumbNailImage];
                        [cell setNeedsLayout];
                    }];
                    // save it to cache for future references
                    [self.photoCache setObject:thumbNailImage forKey:sample.api_id];
                }
            }

        }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:07:17.873

当你最终得到一个图像时，你需要在单元格的 indexPath 和图像之间建立一个关联。由于这是在后台线程上，我建议你做的是使用一个块向 mainQueue 发布一个通知，表明这样的图像可用。仅在主线程上，您向 tableView 询问可见单元格的数组，如果您有图像的单元格正在显示，那么您可以在那时直接设置图像（您在主线程上，您知道单元格在那里并且正在显示，并且对于此运行循环迭代它不会改变。）如果单元格未显示，没问题，下次该单元格进入范围时，您将有图像等待它。我现在正在我的应用程序中执行此操作，它已经发布了好几个月，并且一切正常，并且在响应性方面获得了好评（就像您的应用程序一样，如果您这样做！）

# java - Ruby/Rails 开发人员的 JSP 工具？

> ID：11800847
> 
> 赞同：2
> 
> 时间：2012-08-03T17:54:00.410
> 
> 标签：java, ruby-on-rails, ruby, jsp, tomcat

我是一名全职 ruby​​ist，非常喜欢 rails、Sinatra 等。然而，目前我发现自己正在从事 Java/TomCat/JSP 项目。

我希望有人可以帮助我找到工具、文章、书籍和任何其他让我更舒服的资源？

我知道 Java 与 Ruby 非常不同，社区也非常不同。话虽如此，围绕 Java 的所有文档（我发现的）都是一团糟，在这个社区中发现非常困难。

我特别要找的东西：

*   开发环境设置提示
*   记录器、日志记录、彩色输出、最佳实践等
*   图书馆资源和文档
*   易于浏览的 Java SE 6 文档
*   你发现的任何能让你的日常生活变得更好的东西

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:31:51.433

如果您要加入一个现有的 Java 项目，那么您可能想看看已经在使用的工具，并让现有的开发人员/同事作为第一个停靠点让您快速了解它们。

话虽如此，这里是我的主要提示：

*   **熟悉主要的 Java IDE 之一**。Eclipse（我个人的选择）、Netbeans 或 IntelliJ 一旦您了解它们，它们都是非常出色且非常强大的工具。重构/代码导航工具可能比您在 Ruby 世界中使用的任何工具都要好，它们会为您提供很多帮助。有了良好的 IDE 设置，Java 就不会那么痛苦了。
*   **学习 Maven** - 这将需要一些时间投资，但它对于自动化您的依赖管理和构建过程非常强大。一旦你让它工作，你将节省大量的项目/构建管理时间。Maven 还通过各种公共 Maven 存储库提供对等价于 Ruby gem 的自动访问。

这里有一些特别有用的资源：

*   [Java 教程](http://docs.oracle.com/javase/tutorial/)- 很好地了解核心 Java 库。
*   [Java 6 API](http://docs.oracle.com/javase/6/docs/api/) - 作为核心 Java 中可用的所有类和功能的参考资源非常有用（其中很多也是通过 IDE 提供的）
*   [JSP 文档](http://java.sun.com/products/jsp/docs.html)- 用于 JSP/Java EE 方面

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T23:59:15.707

作为一个小注解，不要忘记学习 JSTL 和表达式语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T18:53:45.530

首先，您在正确的道路上发现 Java EE 是多么的优雅。由于您讨论了各种主题，我将把我的答案分成不同的部分：

*   开发环境：不用多说，我建议你直接去选择你的 eclipse Java EE Juno（最新版本）版本，但是如果你想看看其他 IDE，你可以查看 NetBeans 7.2（最新版本）或IntelliJIDEA 11.2 Ultimate（我知道并且拥有的最新版本）。基本上，Eclipse 拥有大量的插件和特性，并得到了一个非常伟大、庞大且充满激情的社区的支持。

[我个人尝试过 NetBeans 和 IntellijIDEA，但因为它的外观、功能、冷色主题等，我觉得 Eclipse 更舒服]

对于 JSP 和 HTML、CSS、JS 的东西，我推荐 Jetbrains Webstorm 的优秀 IDE，它具有 Zen 编码以及许多其他功能，例如快速自动完成和对许多框架的支持。

最后，选择 Sublime Text 2 作为文本编辑器进行快速编辑或仅检查源文件，它具有非常漂亮的布局并支持多种语言以及大量插件。

*   资源和文件：

所有 Java API 规范都可以在 Oracle 网站上免费离线查看，并与那里提供的各种 SDK 打包在一起。

*   易于浏览的文档：Eclipse IDE 可以很容易地将 JavaDoc 和 Source 附加到组成 JDK 的不同 jar 文件中，也就是说，一旦你设置了它，你的学习和编码经验将大大增加。所以当例如，您在 IDE 中键入 Connection，您可以简单地按住 Ctrl 命令然后右键单击它，类实现的源代码将在不同的选项卡中打开。是的，是的，这就是开源世界的力量 :)

*   关于提示和技巧：我建议您使用 //TODO 注释，因为 Eclipse 支持它们，您可以在设置中设置自己的 TODO 注释，也可以使用 TASK 注释，您也可以使用 Mylyn 来管理您的错误、任务本地或通过连接器连接到您最喜欢的错误和问题跟踪器，因为许多连接器可用于此目的。向此列表添加配置书签的可能性，以帮助您在源文件满行时管理它们。

*   关于 Tomcat：如果您的目标是制作不需要 Java EE 规范的高级特性的 Java EE 应用程序，那么您可以使用甜蜜的 Tomcat，它易于使用和配置，并且是一个众所周知的 Web 容器。

但是，如果情况并非如此，并且您想专注于 Java 并花费大量时间来尝试了解这个庞大规范的来龙去脉，那么您可能需要一个经过认证的支持所有 Java EE 组件的应用程序服务器。有很多可用的，但既然你征求意见，我在这里给出我的适度建议，我建议你选择 GlassFish Application Server，它是开源的，一旦你在 Eclipse IDE 上安装它，它将是与 Java EE 5 和 Java EE 6 API 文档捆绑在一起。这意味着没有时间浪费在浏览不同的工具和选项卡上，您将在 Eclipse IDE 中分组所有内容，以便您 100% 处理手头的任务。

ps：如果您还有任何问题，请随时联系我。

*   任何好的提示或技巧：享受 Java 的乐趣，因为您每天都会学习新的东西 :)

ps：我没有提到任何框架，因为当您习惯 Java EE 时，您将能够选择适合您需求的框架。也忘了提到 JUnit（测试框架）和一个很棒的 eclipse 插件 EClemma 用于代码覆盖（比 Cobertura/eCobertura 好得多，并且更容易使用），当然你可以尝试 Maven 作为另一个帖子提到的，或者尝试 Apache Ant 作为构建工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T19:06:18.100

如果您来自 Rails 背景，我会为最初的挫折做好准备。在 IDE 中设置项目可能会很耗时，而且通常使用 Tomcat 启动和运行基本的 Web+应用程序服务器比使用 Ruby 更痛苦。

对于 REPL，我会推荐[Groovy](http://groovy.codehaus.org/)（事实上它已经预装在 Intellij 上），但您也可以使用[BeanShell](http://www.beanshell.org/)。Grails 或 groovy on rails 可能是我们拥有的最接近类似 Rails 的环境的东西。

正如其他人所说，对于 Java，使用 IDE 确实是最好的。我喜欢 Intellij IDEA，但 eclipse 和 NetBeans 也不错。

对于构建和依赖管理，Maven 可能与我们必须的标准一样接近，尽管我听说过有关[Gradle](http://www.gradle.org/)的好消息。

java中有太多的日志框架，使用你项目当前使用的任何东西，可能是log4j或SLF4J。了解如何全面更改日志级别，以及在包级别。

在图书馆方面，谷歌的[Guava](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CF8QFjAA&url=http://code.google.com/p/guava-libraries/&ei=ACEcULSkN-fY0QHzxYCICQ&usg=AFQjCNE4z91wPxF5-hFfz8PNXRZICqqn5A)每天都让我的生活变得更好。关于 java 的最佳“技巧、窍门和一般最佳实践”一书是 Josh Bloch 的[Effective Java](http://java.sun.com/docs/books/effective/)。对于文档，[Javadoc](http://docs.oracle.com/javase/6/docs/api/)是权威来源。学习阅读和编写好的 javadocs。

对于测试驱动开发，jUnit 可能是使用最广泛的库，一个非常流行的库是[mockito](https://code.google.com/p/mockito/)，它也恰好是我的最爱。

# jquery - 带有鼠标移出和单击的 jQuery 滑动面板

> ID：11800855
> 
> 赞同：0
> 
> 时间：2012-08-03T17:54:49.730
> 
> 标签：jquery, jquery-animate, toggle, panel

我正在尝试制作一个简单的 jQuery 面板滑块，并将它基本上放在我想要的地方减去两个功能。您可以在以下位置查看它的一个版本：http: [//jsfiddle.net/7WArj/](http://jsfiddle.net/7WArj/)

当前，面板在内容上向下滑动并在单击关闭按钮时关闭。按钮会发生变化，因为我希望最终成为按钮的图像在打开时指向上方，在关闭时指向下方。

我很想添加一个功能，当您不再将鼠标悬停在面板上时，它会超时并在 x 秒后滑回。

我还想添加一个功能，如果您单击滑动面板上的任何位置，它也会触发面板向上滑动。

我尝试了其中的一些，`.toggle()`但`.bind`无法使其正常工作。菜单会随机上下滑动等。

如果还有更好的方法来编写我的代码，那将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:09:36.890

我很确定这就是你想要的，代码用我所做的注释：

演示：http: [//jsfiddle.net/SO_AMK/jhYWk/](http://jsfiddle.net/SO_AMK/jhYWk/)

jQuery：

```
jQuery(document).ready(function() {
    jQuery("div#toppanel").attr('tabindex', -1); //Let the DIV have focus

    jQuery("div#toppanel").blur(function(){
        jQuery("div#panel").animate({height: "0px"}, "fast"); // On blur, hide it
    });

    timerRunning = false;
    jQuery("div#panel").hover(function(){ //on mouse over clear a timeout if it exists
        if (timerRunning) {
            clearTimeout(hoverTimeout);
            timerRunning = false;
        }
    },
    function(){ //on mouse out set the timeout
        hoverTimeout = setTimeout(function(){
            jQuery("div#panel").animate({height: "0px"}, "fast");
        }, 2000);
        timerRunning = true;
    });

    jQuery('#toppanel').click(function(event){
         event.stopPropagation();
     });

    jQuery("div.panel_button").click(function(){
        jQuery("div#panel").focus().animate({ height: "250px" }, "fast");
        jQuery("div.panel_button").toggle()
    }); 

    jQuery("div#hide_button").click(function(){
        jQuery("div#panel").animate({height: "0px"}, "fast"); 
    });
}); 
```

​</p>

CSS：

```
#toppanel {
    outline: 0; /* Remove yellow outline in Chrome */
    z-index: 25;
    text-align: center;
    position: absolute;
    top: 0px;
    left: 0px;
}
#panel {
    position: relative;
    height: 0px;
    margin-left: auto;
    margin-right: auto;
    z-index: 10;
    overflow: hidden;
    text-align: left;
    height: 0px;
    display: block;
    background-color: #efefef;
    border: 1px solid #000;
    width: 150px;
}
#panel_contents {
    height: 100%;
    width: 603px;
    position: absolute;
    z-index: -1;
}
.the_content {
    margin-top:40px;
} 
```

​</p>

​ HTML：相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:50:35.807

它工作得很好，但我发现了一个问题，如果你用“Button Down”打开它而不是 mouseout 并等待它关闭 => 很好。

此时的问题是，如果您再次使用“Button Down”打开它，它会立即关闭。

如果可以的话，我建议在 mouseleave 时关闭的解决方案，所以

```
$( "#toppanel" ).mouseleave(
function( event ){
    var container = $( "#panel" );
    if (container.is( ":visible" )){
    $('#panel').delay(1800).slideUp(300);}
}); 
```

# php - preg_replace 除了 bbcode 中的内容之外的所有内容

> ID：11800859
> 
> 赞同：1
> 
> 时间：2012-08-03T17:55:00.623
> 
> 标签：php, preg-replace, bbcode

我正在尝试用空白空间替换我的内容中的所有内容，除了我的 bbcode 中的内容（以及 bbcode 本身）。

这是我的代码来消除我的 bbcode。BBCode 只是识别重要内容的小帮手。

```
$content = preg_replace ( '/\[lang_chooser\](.*?)\[\/lang_chooser\]/is' , '$1' , $content ); 
```

是不是可以否定这个代码？

```
$content = preg_replace ( '/^[\[lang_chooser\](.*?)\[\/lang_chooser\]]/is' , '' , $content ); 
```

干杯并感谢四位您的帮助！

**编辑** *这里是我的解决方案*（对不起，我现在不能回答我自己的问题）

```
$firstOcc = stripos($content, '[lang_chooser]');
$lastOcc = stripos($content, '[/lang_chooser]');
$content = substr($content, $firstOcc, $lastOcc + strlen('[/lang_chooser]') - $firstOcc);
$content = preg_replace('/' . addcslashes('[lang_chooser](.*?)[/lang_chooser]', '/[]') . '/is', '$1', $content); 
```

我认为这不是最好的解决方案，但它目前正在工作。也许有更好的方法来做到这一点;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:59:26.633

除了在字符类中，^ 字符不取反。这意味着匹配字符串的开头（如果您处于多行模式，则匹配该行）。

可以有否定的前瞻和后视，但不能否定我认为的整个正则表达式。

如果您只想用该字符串的一部分替换字符串，请使用 preg_match 并将匹配数组分配给您的文本

```
if( preg_match ( '/(\[lang_chooser\].*?\[\/lang_chooser\])/is', $content, $matches ) )

    echo $matches[ 0 ]; // should have what you want 
```

为了便于阅读，我使用 addcslashes 来转义 / 和 [：

```
if( preg_match ( '/' . addcslashes( '([lang_chooser].*?[/lang_chooser])', '/[]' ) . '/is', $content, $matches ) ) 
```

addcslashes 最好的部分是您可以获取任何正则表达式（来自变量、来自搜索框值、来自配置）并安全地调用 preg 函数，而无需担心使用什么分隔符。

您可能还需要 u 修饰符以符合 unicode 规范，除非出于某种奇怪的原因您不使用 utf-8：

```
if( preg_match ( '/' . addcslashes( '([lang_chooser].*?[/lang_chooser])', '/[]' ) . '/isu', $content, $matches ) ) 
```

* * *

同时，我稍微改进了 addlashes 方法。它允许在正则表达式中使用字符串文字，而不必担心元字符。Xeoncross 指出 preg_quote。拥有这样的转义类可能仍然很好，因此您可以从某个地方获取一个固定的分隔符以保持您的代码更整洁。此外，您可能希望在某个时候添加其他正则表达式风格，或者能够在不更改代码库的其余部分的情况下捕捉未来对 preg_quote 的更改。目前只支持pcre：

```
class Escape
{
    /*
     * escapes meta characters in strings in order to put them in regular expressions
     * 
     * usage:
     * pcre_replace( '/' . Escape::pcre( $text ) . '/u', $string );
     * 
     */

    static
    function pcre( $string )
    {
        return

            preg_quote( $string, '/' )

        ;
    }
} 
```

# replication - Oracle 到 Vertica 数据库的复制模型有哪些？

> ID：11800861
> 
> 赞同：-1
> 
> 时间：2012-08-03T17:55:05.007
> 
> 标签：replication, database-replication, vertica

我正在研究将实时数据从 Oracle 复制到 Vertica 数据库。
到目前为止，我找不到任何能够做到这一点的东西！
但是我已经找到了似乎在 Mysql 到 Vertica 中运行良好的 Tungsten 复制器（还没有测试它）。
我的问题是：
是否有任何工具或方法可以做到这一点（oracle => vertica）？？？如果是这样，将如何处理更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T01:19:02.230

WisdomForce - 被 Informatica 收购 - 在 oracle 和 vertica 之间进行数据复制。 [http://www.wisdomforce.com/](http://www.wisdomforce.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T20:43:48.897

看看钨复制器。它从 MySQL/Oracle 复制到 Vertica，并且是完全开源的 (GPL V2)。您可以在 code.google.com 上找到 Tungsten Replicator 项目。（免责声明：我为 Continuent 工作并编写了大量的复制器代码。）

# java - 如何使用记事本++导入枚举

> ID：11800862
> 
> 赞同：-1
> 
> 时间：2012-08-03T17:55:09.487
> 
> 标签：java, enums

我正在尝试`enum`从另一个文件导入一个。我在第一个文件中有以下代码：

```
public class Colour {

    public enum Color {
        RED, ORANGE, YELLOW, GREEN, BLUE, BLACK, WHITE; // ; is optional

        @Override
        public String toString() {
            switch (this) {
            case RED:
                return "red";
            case ORANGE:
                return "orange";
            case YELLOW:
                return "yellow";
            case GREEN:
                return "green";
            case BLUE:
                return "blue";
            case BLACK:
                return "black";
            case WHITE:
                return "white";
            default:
                throw new IllegalStateException();
            }
        }

    } 
```

现在我想将这些导入另一个，比如说 class `Test`。

```
public class Test { } 
```

我将如何在这两个文件中做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:57:46.773

如果它们在同一个包中，则不必像任何其他 java 类一样导入它们。

如果他们不是，你会像导入一个类一样做：

```
import com.mycompany.mypackage.Colour.Color; 
```

编辑：我刚刚注意到它是一个嵌套枚举（对不起） - 如果它在同一个包中，你仍然不需要导入它，但要声明它你会使用`Colour.Color`.

请注意，您将在`Colour.java`文件中定义包，如下所示：

```
package com.mycompany.mypackage; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:11:56.570

这不是答案，但注释不会让我格式化大块代码。我只是想提出一些代码改进。要准确地执行您的枚举`toString()`正在执行的操作，您可以简单地使用以下命令显着缩短它：

```
@Override
public String toString() { return this.name().toLowerCase(); } 
```

当然，如果您希望能够改变小写表示的值，则使用构造函数将 displayValue 设置为这样（比 case 语句好得多）。

```
public class Colour {

    public enum Color {
        RED("red-ish"),
        ORANGE("orange-ish"),
        YELLOW("yellow-like"),
        GREEN("very green"),
        BLUE("like the sky"),
        BLACK("blanco"),
        WHITE("weiss");

        String displayVal;

        Color(String displaVal) { this.displayVal = displayVal; }

        public String toString() { return displayVal; }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:58:41.303

假设枚举和类都在同一个包中，只需声明为：

```
Colour myColour = Colour.RED; 
```

也建议使用[Eclipse](http://eclipsetutorial.sourceforge.net/totalbeginner.html)，它使用快捷键（CTRL + Shift + M）为您整理导入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T17:59:27.437

如果它们在同一个包中，则根本不需要导入它们。如果它们位于不同的包中，请使用[java import 语句](http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html)。或查看[此讨论](https://stackoverflow.com/questions/2903166/meaning-of-import-statement-in-java-file)以获取更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T19:13:35.563

[停止使用记事本并切换到像Eclipse](http://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops4/R-4.2-201206081400/eclipse-SDK-4.2-win32.zip)这样的集成开发环境 (IDE) 。您可以免费下载它，它可以帮助您进行导入、编译、代码格式化、自动完成和许多其他工作。了解所有功能可能需要一段时间，但它会立即改善您作为开发人员的生活。

看来您不了解 Java 中的包。请参阅我解释软件包的[此答案。](https://stackoverflow.com/questions/1510291/eclipse-java-project-folder-organization/1510717#1510717)

# django-haystack - 无法订购 Haystack/Whoosh 结果（而且速度极慢）

> ID：11800863
> 
> 赞同：4
> 
> 时间：2012-08-03T17:55:12.007
> 
> 标签：django-haystack

我正在使用[Haystack](http://www.haystacksearch.org)和[Whoosh使用](http://whoosh.ca)[Geonames](http://www.geonames.org)项目中的城市数据搜索自定义应用程序。

我只导入了少量 Geonames 城市数据（22917 条记录）。我想按城市人口排序结果，但我无法获得好的结果。

当我`order_by`在 my 上使用时`SearchQuerySet`，结果非常慢。它还针对“名称”字段而不是“人口”正确排序，所以我认为我可能只是做错了什么。

这是搜索索引：

```
class EntryIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    name = indexes.CharField(indexed=False, model_attr='ascii_name')
    population = indexes.CharField(indexed=False, model_attr='population')
    django_id = indexes.CharField(indexed=False, model_attr='id')

    def get_model(self):
        return Entry

    def index_queryset(self):
        return self.get_model().objects.all() 
```

这是模板：

```
{{ object.ascii_name }}
{{ object.alternate_names }}
{{ object.country.name }}
{{ object.country.iso }}
{{ object.admin1_division.ascii_name }}
{{ object.admin1_division.name }}
{{ object.admin1_division.code }}
{{ object.admin2_division.ascii_name }}
{{ object.admin2_division.name }} 
```

这是相关的视图代码：

```
query = request.GET.get('q', '')
results = SearchQuerySet().models(Entry).auto_query(query).order_by('population') 
```

当我`order_by`取消查询时，它会在不到一秒的时间内返回。开启它，几乎需要 10 秒才能完成，而且结果不按人口排序。按名称排序有效，但也需要约 10 秒。

*注意：我也尝试过使用内置的 Haystack 搜索视图，当我尝试按人口排序时它非常慢：*

```
qs = SearchQuerySet().order_by('-population')

urlpatterns = patterns('',
    ...
    url(r'^demo2/$', SearchView(searchqueryset=qs)),
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:04:05.510

我正在做几乎相同的事情，并且订购对我来说快速而正确。

您所做的唯一显着不同的是：

```
query = request.GET.get('q', '')
results = SearchQuerySet().models(Entry).auto_query(query).order_by('population') 
```

由于您指定了请求，我假设您已经创建了自己的视图。您不需要自定义视图。我在我的 urls.py 中实现了这个：

```
from haystack.forms import ModelSearchForm
from haystack.query import SearchQuerySet
from haystack.views import SearchView, search_view_factory

sqs = SearchQuerySet().models(MyModel).order_by('-weight')

urlpatterns += patterns('',
    url(r'^search/$', search_view_factory(
        view_class=SearchView,
        template='search/search.html',
        searchqueryset=sqs,
        form_class=ModelSearchForm
    ), name='search'),
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:39:05.580

我发现我也无法使用 order_by 订购结果。我得到了看起来很奇怪的部分排序。我最终意识到默认排序是按相关性排名。我使用的 order_by 大概只是在每个等级内排序。Haystack 文档中并没有真正提出这一点。

我想这个教训可能是，如果你希望你的结果顺序忽略相关性，你需要在显示它们之前对结果进行后期处理。

可能有点跑题了，但我有点惊讶你的索引人口字段是一个 CharField。这与您的模型匹配吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-28T09:22:38.317

我知道我迟到了三年，但最近我在一个项目中遇到了同样的问题。

我想唯一的问题是`indexed=False`您传递给`population`CharField 的参数。

我通过删除它来解决我的问题。

# javascript - Twitter Bootstrap 2.0.4 Modal - 如何将模态淡入效果应用于新创建的模态类样式？

> ID：11800868
> 
> 赞同：4
> 
> 时间：2012-08-03T17:55:27.783
> 
> 标签：javascript, css, jquery-plugins, twitter-bootstrap, modal-dialog

我正在自学网页设计，现在我开始使用 twitter bootstrap 的模态 JavaScript 插件。

我创建了一个名为 modal-login 的新模式类，它是模式窗口内的登录表单。事情一直很好，但是淡入淡出效果/向下滑动不起作用。将模态框从顶部拉到中心的效果。

我对javascript和jQuery还没有深入的了解。

我现在的问题是，我们可以编辑 bootstrap-modal.js 文件，以便我可以包含名为 modal-login 和 modal-register 的新模式类吗？以便它可以利用模态淡入淡出效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:32:04.087

您不需要编辑**bootstrap-modal.js**文件。您只需要将`fade`类添加到模态框，然后添加一些 CSS 规则。

例如：

```
.modal-login.fade {
  top: -25%;
  -webkit-transition: opacity 0.3s linear, top 0.3s ease-out;
     -moz-transition: opacity 0.3s linear, top 0.3s ease-out;
      -ms-transition: opacity 0.3s linear, top 0.3s ease-out;
       -o-transition: opacity 0.3s linear, top 0.3s ease-out;
          transition: opacity 0.3s linear, top 0.3s ease-out;
}

.modal-login.fade.in {
  top: 50%;
} 
```

`modal`如果您仍然将普通类保留在新类上，并且只使用新类进行覆盖，那就更好了。这样你就可以继承上面的 CSS，而不必复制它。

# scala - 在 MK 802+ 上播放 2.0

> ID：11800870
> 
> 赞同：1
> 
> 时间：2012-08-03T17:55:31.033
> 
> 标签：scala, arm, playframework-2.0, ubuntu-12.04

我有一台装有 Allwinner A10 的迷你电脑 (MK 802)。我想使用这台迷你电脑作为家庭服务器来托管我的 play 2.0 Scala 应用程序。目前我在这台迷你电脑上安装了 Lubuntu 12.04。如何在此设备上安装 Play Framework？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:17:26.467

您可能必须下载 OpenJDK 的源代码并在您的 MK 802 上构建它。如果幸运的话，您可能已经安装了软件包 (icedtea)。该文档可能会有所帮助： http: [//mail.openjdk.java.net/pipermail/jdk6-dev/2009-April/000455.html](http://mail.openjdk.java.net/pipermail/jdk6-dev/2009-April/000455.html)

至于 Play 2.0 和 Scala，您只需下载并将它们放在一个目录中并设置一些 ENV 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:24:25.770

我在 Ubuntu 12.04 上运行了很多东西。我通常只安装 openjdk-7-jre 然后拉下 sbt jar。由于 Play 2.0 中的构建系统基于 sbt，因此它会根据需要引入 play 和 scala。我所要做的就是设置 java 和 sbt，然后从项目目录中执行“sbt run”，一切都会按需下拉。

# java - Eclipse 调试器图标

> ID：11800871
> 
> 赞同：0
> 
> 时间：2012-08-03T17:55:31.823
> 
> 标签：java, eclipse, icons

我正在寻找一种能够找到 Eclipse Java 调试器使用的图标的方法（特别是变量调试视图中使用的图标）。有谁知道图标在 eclipse 文件夹中的位置，或者是否有某种简单的方法 eclipse 为开发人员提供了允许他们轻松访问这些图标的简单方法（例如，我可以轻松地为这些特定图标导入 ISharedImages）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:37:53.627

这是一个在线[资源](http://eclipse-icons.i24.cc/)：

[另外，在官方网站上](http://www.eclipse.org/articles/Article-UI-Guidelines/Index.html)ctrl+f 用于“重用” ：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:50:48.517

您可能想直接从源代码库尝试

[http://dev.eclipse.org/viewcvs/viewvc.cgi/org.eclipse.debug.ui/icons/](http://dev.eclipse.org/viewcvs/viewvc.cgi/org.eclipse.debug.ui/icons/)

# javascript - javascript：通过给定的分隔符将数组拆分为子数组

> ID：11800873
> 
> 赞同：0
> 
> 时间：2012-08-03T17:55:37.830
> 
> 标签：javascript, arrays, multidimensional-array, split

我想通过一个/或多个给定的分隔符将一个数组拆分为一个子数组列表。

像这样的东西：

```
var myArray = [null, 5, 'whazzup?', object, '15', 34.6];
var mySeperators = [null, '15'];

splitArray(myArray, mySeperators) 
```

应该导致：

```
[[], [5, 'whazzup?', object], [34.6]] 
```

源数组可以多次包含分隔符。如何做到这一点？

当它使解决方案更容易时，我使用 mootools 作为基础库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:59:35.307

鉴于 ECMAScript 5，可以使用以下命令来完成此操作[`Array#reduce`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)：

```
myArray.reduce(function(currentArrays, nextItem) {
    if(~mySeparators.indexOf(nextItem))
        currentArrays.push([]);
    else
        currentArrays[currentArrays.length - 1].push(nextItem);

    return currentArrays;
}, [[]]); 
```

我没有使用 MooTools 的经验；但是，如果需要向后兼容，它[似乎是 polyfill 。`Array#reduce`](http://mootools.net/docs/more/Types/Array.Extras)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:16:16.110

尝试这个 ：）

[http://jsfiddle.net/baP66/1/](http://jsfiddle.net/baP66/1/)

```
var myArray = [null, 5, 'whazzup?', {}, '15', 34.6];
var mySeperators = [null, '15'];

var splitArray = function(arr, aSep){
    var acc = [[]];
    var sp = function(){
        for (var i=0; i<arr.length; i++){
            var item = arr[i];
            var last = acc[acc.length-1];

            if (aSep.indexOf(item) > -1){
                acc.push([]);
            }else{
                last.push(item);
            }
        };
    };
    sp();

    return acc;
};

var res = splitArray(myArray, mySeperators);

console.log(res); 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T18:13:15.737

答案假定支持 Array.indexOf

```
function splitArray(orgArr, splits){
    var i, newArr=[], vals = orgArr.slice();  //clone the array so we do not change the orginal
    for (i=vals.length-1;i>=0;i--) {  //loop through in reverse order
       if (splits.indexOf(vals[i]) !== -1) {  //if we have a match time to do a split
         newArr.unshift( vals.splice(i+1, vals.length-i) ); //grab the indexes to the end and append it to the array
         vals.pop();  //remove the split point
       }
    }
    newArr.unshift(vals);  //add any of the remaining items to the array
    return newArr;  //return the split up array of arrays
}

var myArray = [null, 5, 'whazzup?', {}, '15', 34.6];
var mySeperators = [null, '15'];
console.log( splitArray(myArray, mySeperators) ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T18:14:08.563

这应该在浏览器中非常通用，并且不需要任何库：

```
function splitArray(a, seps) {
  var i, res = [], parts = [];
  for (i = 0; i < a.length; i++) {
    if (seps.indexOf(a[i]) > -1) {
      res.push(parts);
      parts = [];
    } else {
      parts.push(a[i]);
    }
  }
  res.push(parts);
  return res;
} 
```

如果你需要支持没有内置 indexOf 支持的浏览器（例如 IE 6-8），那么首先添加这个 polyfill：

```
//This prototype is provided by the Mozilla foundation and
//is distributed under the MIT license.
//http://www.ibiblio.org/pub/Linux/LICENSES/mit.license

if (!Array.prototype.indexOf)
{
  Array.prototype.indexOf = function(elt /*, from*/)
  {
    var len = this.length;

    var from = Number(arguments[1]) || 0;
    from = (from < 0)
         ? Math.ceil(from)
         : Math.floor(from);
    if (from < 0)
      from += len;

    for (; from < len; from++)
    {
      if (from in this &&
          this[from] === elt)
        return from;
    }
    return -1;
  };
} 
```

# sql - sql约束不允许空值的自动存在验证

> ID：11800876
> 
> 赞同：0
> 
> 时间：2012-08-03T17:56:04.040
> 
> 标签：sql, ruby-on-rails-3, postgresql

**我不喜欢数据库中的空值**

多年来，我已经看到由于 null 有时令人惊讶的性质而出现了太多错误。特别是对于我们不希望包含空值的列，我们很容易无法考虑它们的含义并得到不好的结果。我坚信字符串字段的空性（如果允许）通常应在数据库中表示为空字符串与空字符串。（但最糟糕的是允许将两者混合在一起，它们的含义相同。）

因此，由于我对过去问题的经验，我有条不紊地考虑了每个字段，并将约束 :null => false 添加到数据库中我没有充分理由允许空值的任何字段。对于我想允许空字符串的情况，我将其设置为默认值。

到目前为止，一切都很好。

**我喜欢 ruby​​ 如何处理默认值**

当我这样做时，我注意到 ActiveRecord 采用我在数据库中定义的默认值，并使用该值初始化对象的属性。我喜欢那个！

但这让我想要更多。因为现在我发现我正在添加类似的代码

```
validates :name, :presence => true 
```

除了我选择提供默认空字符串的情况外，我在数据库中定义了非空约束的所有情况。但是我为什么要重复自己呢？所以我在想——如果 ActiveRecord 为我做这件事不是很好吗？

**如何从数据库属性添加验证存在**

有没有一种方法可以为数据库中存在非空约束的每种情况自动创建这些验证 - 除了在我允许空字符串并通过将其设置为默认值来发出信号的特殊情况下？

奖励：如果有一种方法可以让 rails 在 db 列中添加对不同于空字符串的检查，然后仅在字符串字段同时具有非空约束和非空字符串检查时才自动添加对存在性的验证，那真是太好了。只是不知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:04:58.720

我想你可以通过添加一个默认进行验证的[观察者来实现类似的效果。](http://guides.rubyonrails.org/active_record_validations_callbacks.html#observers)但是，我不确定是否有办法从观察者方法中取消操作，就像您可以使用回调一样。

# javascript - 使用 jquery 从 div 内容中删除 HTML 注释标签的跨浏览器方法

> ID：11800881
> 
> 赞同：-2
> 
> 时间：2012-08-03T17:56:12.287
> 
> 标签：javascript, jquery, html, comments

我有这个代码

```
<div id="_right-content-top">   
  <!-- <iframe src="/ads/banner.jsp" width="160" height="600" frameborder="0" scrolling="no" marginwidth="0" marginheight="0"></iframe>  -->    
</div> 
```

使用 jquery 或任何其他方法（纯 js）我想将此 div 的值分配给另一个 div 但没有注释，以这种方式：

```
<div id="right-content-top">   
  <iframe src="/ads/banner.jsp" width="160" height="600" frameborder="0" scrolling="no" marginwidth="0" marginheight="0"></iframe>   
</div> 
```

我怎样才能完成在所有浏览器中工作的这项任务？我感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:16:36.967

```
<html>
<script type="text/javascript">
function move()
{
    t = document.getElementById('a').innerHTML.slice(5, -4)
    document.getElementById('b').innerHTML = t
}
</script>
<body>

<a href="javascript://" onclick="move()">move</a>
<div id="a"><!-- hello world --></div>
<div id="b"></div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:01:52.013

如上面的评论所述，仅在整个页面加载后加载广告的最佳方法是在您的页面上放置以下空 div：

```
<div id="right-content-top"></div>​ 
```

然后在 DOM 加载后运行此命令将广告添加到 div：

```
$(document).ready(function() {
    $("#right-content-top").append('<iframe src="/ads/banner.jsp" width="160" height="600" frameborder="0" scrolling="no" marginwidth="0" marginheight="0"></iframe>');
});​ 
```

或者只有在页面的其余部分完全加载后才将广告添加到 div：

```
$(window).load(function() {
    $("#right-content-top").append('<iframe src="/ads/banner.jsp" width="160" height="600" frameborder="0" scrolling="no" marginwidth="0" marginheight="0"></iframe>');
});​ 
```

# git - 为什么阅读挂起我的 bash 脚本？

> ID：11800889
> 
> 赞同：0
> 
> 时间：2012-08-03T17:56:32.937
> 
> 标签：git, bash, unix, git-post-receive, post-receive-email

我在使用 Python 时遇到了类似的问题，`readlines()`但我不确定这里是否相同。

该`read`命令正在挂起我的 bash 脚本。

```
generate_email()
{
    # --- Arguments
    oldrev=$(git rev-parse $1)
    newrev=$(git rev-parse $2)
    refname="$3"

    # ... some code ...
}

# ... more code ...

while read oldrev newrev refname
do
    generate_email $oldrev $newrev $refname
done 
```

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:56:27.730

您不是在告诉 read 读取任何内容。所以它只是在等待来自`stdin`.

如果你想从文件中读取，你需要`read`像这样使用：

```
while read -r oldrev newrev refname; do
  generate_email "$oldrev" "$newrev" "$refname"
done < /path/to/file 
```

注意`< /path/to/file`. 这就是你实际上告诉 read 从文件中读取的地方。

如果你想从输入流中读取，你可以`while read`像这样使用：

```
grep 'stuffInFile' /path/to/file |
while read -r oldrev newrev refname; do
  generate_email "$oldrev" "$newrev" "$refname"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:56:17.993

我会说它不是挂起，而只是等待输入。

但请注意并确保`generate_email`不会从同一输入流中读取。

# javascript - 在主干.js 的“el”上应用 jQuery 函数以获取其子项的值

> ID：11800890
> 
> 赞同：0
> 
> 时间：2012-08-03T17:56:39.977
> 
> 标签：javascript, jquery, backbone.js, backbone-events, backbone-views

我对骨干真的很陌生，所以这个问题可能看起来有点幼稚。但我试图弄清楚如何在 'el' 上应用 jQuery 来获取输入的值。

基本上我有一个表单，我希望每当用户对输入进行一些更改时，更改的值都会自动保存到模型中。但我无法获得输入值。

在我看来，我有

```
 events : {
    'change input' : 'updateValue'
  } 
```

然后我有这样的`updateValue`方法：

```
 updateValue : function (e) {
    var input = $(this.el).find(input).val();
    console.log(input)
    this.model.updateValue(input);
  } 
```

但我的控制台正在打印`undefined`。如果我这样做`var input = this.el`，它可以打印整个`el`，但是当我尝试这样做`find(input)`时，它说它不支持该方法。我也试过`this.$el`了，也不管用。

所以我想知道找到输入值的正确方法是什么，并想知道这是否是自动保存表单信息的正确方法。提前致谢！

**编辑：**

多亏了 asawyer，我把它改成了它`var input = this.$('input').val()`，它就像一个魅力。

这也有效：`var input = $(e.currentTarget).val()`

并查看下面接受的答案以获得一些解释。非常感谢你们=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:14:53.117

实际上，这更像是一个 jquery 问题。这就是你的代码应该是这样的：

```
updateValue : function (e) {
  var input = this.$(":input").val();
  console.log(input)
  this.model.updateValue(input);
} 
```

你错过了输入周围的“”，但我也冒昧地加入了一些主干/jquery技巧。

该`this.$(":input")`方法是`$(":input", this.el)`在视图元素中查找 jquery 选择器的快捷方式，请参阅[文档](http://backbonejs.org/#View-dollar)。在这种情况下，":input" 匹配所有表单输入，包括 textarea、select 等，请参阅[jQuery :input selector](http://api.jquery.com/input-selector/)。

Also, if you want to catch all inputs, not just the `<input>` element, try:

```
events : {
  'change :input' : 'updateValue'
} 
```

# url - 为什么 IIS 7.5 / Coldfusion 9 在 URL 字符串中添加了一个奇怪的字符？

> ID：11800892
> 
> 赞同：1
> 
> 时间：2012-08-03T17:56:45.620
> 
> 标签：url, iis, coldfusion, iis-7.5, coldfusion-9

我们在产品中构建了一个“重定向”引擎，因此我们的客户可以添加/编辑/删除自定义重定向，而无需我们在服务器上维护一堆重写规则。

在传递到我们代码中的 URL 中出现了一些问题。我们从 Coldfusion 填充的属性中提取这些`CGI.QUERY_STRING`（它接收 IIS/Coldfusion 抛出的 404，它将错误的 URL 附加为查询字符串，如`?404;http://www.mysite.com:80/nonexistent-file.cfm`）。

我们看到的是一些特殊字符在其中得到了一个额外的字符（一个 Â）字符。取这个 URL（%A9 是版权符号）：

`http://www.mysite.com/%A9/`

报告`CGI.QUERY_STRING`为：

`http://www.mysite.com:80/Â©/`

我不知道这个额外的“Â”是从哪里来的。我有一种预感，这是由 IIS 引入的，但它也可能与 Coldfusion 一起使用，因为它必须填充`CGI`变量。

关于为什么会发生这种情况以及如何解决它的任何想法？似乎并非所有百分比编码/特殊字符都这样做......

编辑：

我可能会放弃我的确切问题，但是，知道为什么 IIS 或 Coldfusion 会抛出这个额外的字符（特别是对于某些转义序列而不是其他转义序列）仍然是有益的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:15:54.000

哇……好难啊。通常人们设计网站时使用字母数字加上波浪号 (~) 和破折号 (=)。我什至不确定 RFC 是否允许将文案符号作为主机标头的一部分。我不肯定它应该在 URL 的方案部分中被允许。这篇[文章](http://www.faqs.org/rfcs/rfc1738.html)可能会为您提供一些启示。至于 IIS - 您也许可以添加一个特定的重写规则来解决这个问题。就我个人而言，我会在 URL 的架构部分中避免使用这些字符。

# vb.net - 向列表中添加内容时出现 NullReferenceException

> ID：11800894
> 
> 赞同：1
> 
> 时间：2012-08-03T17:56:51.867
> 
> 标签：vb.net, nullreferenceexception

当我尝试使用我正在处理的这个 web 服务时，我得到一个空引用异常。我在对象 ipadarticle 中有两个字段，称为 fullname 和 tags，它们被声明为列表，以便 ipadarticle 可以返回多个标签和作者。空引用异常指向

```
ipadarticle2.FullName.Add(a_var.firstname + " " + a_var.lastname)
ipadarticle2.Tag.Add(a_var.tagtext) 
```

我对 vb 编程很陌生，所以我不确定是什么原因造成的。为了澄清，发生了什么是这个存储过程正在从一个数据库中获取条目，该数据库有一个文章列表，其中包括与之相关的标签和作者。由于文章有多个标签和作者，因此每篇文章都有多个条目。当我在 Web 服务中返回信息时，我试图让到达文章只返回一个 ipadarticle 对象，然后包含与每篇文章关联的多个标签和作者的列表。我很头疼试图弄清楚这一点。

```
 Dim lq As New lqDFDataContext
            Dim var = lq.mobile_IpadGetSavedArticlesAR(simpuser.UserID, tempParamKW(0), tempParamKW(1), tempParamKW(2), tempParamKW(3), tempParamKW(4), pageNum, pageLen)
            Dim ipadarticle2 As New ipadArticle()

        For Each a_var In var

            If a_var.articleID <> temp Then

                If flag = 0 Then
                    result.add(ipadarticle2)
                    Dim ipadarticle1 As New ipadArticle()
                    ipadarticle2 = ipadarticle1
                End If

                ipadarticle2.ArticleID = a_var.articleID
                ipadarticle2.PublishedOn = a_var.publicationdate
                ipadarticle2.Title = a_var.title
                ipadarticle2.MedAbbr = a_var.medabbr.Replace(" ", "-").ToLower()
                ipadarticle2.FullName.Add(a_var.firstname + " " + a_var.lastname)
                ipadarticle2.Tag.Add(a_var.tagtext)

                flag = 1

            Else
                ipadarticle2.Tag.Add(a_var.tagtext)
                ipadarticle2.FullName.Add(a_var.firstname + " " + a_var.lastname)
                flag = 0
            End If

            temp = a_var.articleID

        Next
    End If
    Return result 
```

ipad文章类：

```
Imports Microsoft.VisualBasic

Public Class ipadArticle
    Inherits SimpleObject

    Public Sub New()

    End Sub

    Private _ArticleID As Integer
    Public Property ArticleID() As Integer
        Get
            Return _ArticleID
        End Get
        Set(ByVal value As Integer)
            _ArticleID = value
        End Set
    End Property

    Private _Title As String
    Public Property Title() As String
        Get
            Return _Title
        End Get
        Set(ByVal value As String)
            _Title = value
        End Set
    End Property
    Private _PublishedOn As String
    Public Property PublishedOn() As String
        Get
            Return _PublishedOn
        End Get
        Set(ByVal value As String)
            _PublishedOn = value
        End Set
    End Property

    Private _MedAbbr As String
    Public Property MedAbbr() As String
        Get
            Return _MedAbbr
        End Get
        Set(ByVal value As String)
            _MedAbbr = value
        End Set
    End Property

    Private _Tag As List(Of String)
    Public Property Tag() As List(Of String)
        Get
            Return _Tag
        End Get
        Set(ByVal value As List(Of String))
            _Tag = value
        End Set
    End Property

    Private _FullName As List(Of String)
    Public Property FullName() As List(Of String)
        Get
            Return _FullName
        End Get
        Set(ByVal value As List(Of String))
            _FullName = value
        End Set
    End Property

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:21:20.930

最可能的原因是对象 FullName 和 Tag 尚未在 ipadarticle2 中创建（都没有）。这些最有可能在类构造函数中创建为新对象。

编辑：

根据发布的类，上述假设是正确的：FullName 和 Tag 被定义为 List(Of String)，但从不创建支持成员。

这可以通过以下几种方式解决：

1）直接在其定义中实例化支持成员变量，即：

```
Private _FullName As New List(Of String) 
```

2）在构造函数中实例化支持成员变量：

```
Public Sub New()
  _FullName = New List(Of String)
  _Tag = New List(Of String)
End Sub 
```

3）如果它什么都不是，则在 getter 中实例化支持成员变量：

公共属性 Tag() As List(Of String) Get If _Tag is nothing Then _Tag = New List(Of String) End If Return _Tag End Get

基本上，除了简单数据类型之外的任何变量类型都必须在它们可以使用之前被实例化（除非你测试它们的虚无）。

# ios - 在 for in 循环中修改数据结构是否安全？

> ID：11800895
> 
> 赞同：0
> 
> 时间：2012-08-03T17:56:53.627
> 
> 标签：ios, loops, data-structures, for-in-loop

我想使用 for-in 循环遍历我的集合，但是在这样的循环中修改我的数据结构（可以是字典或数组）的内容是不安全的。那是对的吗？会不会有什么副作用？我应该使用带索引的 for 循环吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:00:52.187

只要您不添加或删除对象，就可以了。也就是说，如果集合中的对象是可变对象，并且您对此进行了更改，那很好。只有当您向集合中删除、添加或替换对象时，您才会遇到麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:02:52.123

简单的答案是，是的，理论上它会产生副作用。这取决于你在循环中做什么。如果没有更多信息，我会说坐下来用铅笔和纸进行合理的数学论证（归纳可选但推荐）以表明此过程永远不会破坏您的数据。

如果您正在修改数组的内容（例如，如果它是像素数组，则更改颜色），如果您计划好您的代码，您可能不会遇到太多麻烦。如果您要添加、删除或移动元素，*请谨慎*操作。

# networking - tshark 无法读取 icmp6 字段

> ID：11800896
> 
> 赞同：1
> 
> 时间：2012-08-03T17:56:55.970
> 
> 标签：networking, ipv6, wireshark, wireshark-dissector, tshark

我可以使用 tshark 读取/重放所有标头和字段，直到达到 IPv6 标头（以太网标头和 IPv6 标头），但是当我尝试重放 pcap 文件以读取 icmpv6 字段时，这些字段没有显示任何内容。

这是tshark的错误吗？是否有任何替代工具可以读取数据包所有标头中的所有字段？

我使用的 tshark 版本是 1.2.11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:24:09.337

[Bro](http://www.bro-ids)是一个完全支持 IPv6 的网络流量分析工具，而 tshark 似乎与 IPv6 斗争。在 Bro 中，您可以通过在跟踪上运行它来获取连接摘要，如下所示：

```
bro -C -r trace.pcap 
```

并检查`conn.log`同一目录中的结果文件。您可能会发现随附的工具`bro-cut`有助于仅提取列的子集，例如，

```
bro-cut id.orig_h id.resp_h id.orig_p id.resp_p proto < conn.log 
```

将提取连接 5 元组并将其打印到 STDOUT，以便您可以使用您最喜欢的文本咀嚼工具继续处理它。

# php - php图片调整大小不适用于图片上传

> ID：11800898
> 
> 赞同：0
> 
> 时间：2012-08-03T17:57:10.647
> 
> 标签：php, image, forms, upload, resize

我正在尝试调整上传到我的 php 表单上的图像的大小。图片正在保存，但未调整大小。基本上，除了调整图像部分的大小外，一切正常。我把我的代码放在下面。

用 php 调整大小的 html 表单

```
<?php include "base.php"; ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 
Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Submit an Album</title>
</head>
<body>

<?php
   if( isset($_POST['submit']) ) {

      include('SimpleImage.php');
      $image = new SimpleImage();
      $image->load($_FILES['albumCover']['tmp_name']);
      $image->resize(150,150);
      $image->output();
   } else {

?>

     <table>
        <tr>
        <td align="center">Submit an Album</td>
        </tr>
        <tr>
        <td>
     <table>
        <form enctype="multipart/form-data" action="submitAlbumForm.php" method="post">
        <tr>
          <td>Artist Name</td>
          <td><input type="text" name="artistName" size="20">
          </td>
        </tr>
        <tr>
          <td>Album Name</td>
          <td><input type="text" name="albumName" size="20">
          </td>
        </tr>
        <tr>
        <tr>
          <td>Release Date</td>
          <td><input type="text" name="releaseDate" size="20">
          </td>
        </tr>
        <tr>        
        <tr>
          <td>Leak Date</td>
          <td><input type="text" name="leakDate" size="20">
          </td>
        </tr>
        <tr>
        <tr>
          <td>Where It Leaked</td>
          <td><input type="text" name="whereItLeaked" size="20">
          </td>
        </tr>
        <tr>
        <tr>
          <td>Album Cover</td>
          <td><input type="file" name="albumCover">
          </td>
        </tr>
        <tr>        
          <td></td>
          <td align="right"><input type="submit" name="submit" value="Add"></td>
        </tr>
        </form>
        </table>
      </td>
    </tr>
</table>

<?php
   }
?>

</body>
</html> 
```

submitAlbumForm.php，用于将表单信息上传到数据库的 php 表单

```
<?php
include "base.php";

//Setting up images directory
$target = "images/"; 
$target = $target . basename( $_FILES['albumCover']['name']);

$albumCover=($_FILES['albumCover']['name']); 

//inserting data order
$order = "INSERT INTO albums
            (artistName, albumName, releaseDate, leakDate, whereItLeaked, albumCover)
            VALUES
            ('$_POST[artistName]',
            '$_POST[albumName]',
            '$_POST[releaseDate]',
            '$_POST[leakDate]',
            '$_POST[whereItLeaked]',
            '{$_FILES['albumCover']['name']}')";

 //Writes image to database
 mysql_query("INSERT INTO `albums` VALUES ('albumCover')") ; 

  if(move_uploaded_file($_FILES['albumCover']['tmp_name'], $target)) 
 { 

 //Tells you if its all ok 
 echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded, and your information has been added to the directory"; 
 } 
 else { 

 //Gives an error if its not 
 echo "Sorry, there was a problem uploading your file."; 
 } 

//declare in the order variable
$result = mysql_query($order);  //order executes
if($result){
    echo("<br>Thank you for submitting!");
} else{
    echo("<br>Sorry, something went wrong! Please try again!");
}
?> 
```

SimpleImage.php，我用来调整图像大小的脚本-

```
<?php

/*
* File: SimpleImage.php
* Author: Simon Jarvis
* Copyright: 2006 Simon Jarvis
* Date: 08/11/06
* Link: http://www.white-hat-web-design.co.uk/articles/php-image-resizing.php
*
* This program is free software; you can redistribute it and/or
* modify it under the terms of the GNU General Public License
* as published by the Free Software Foundation; either version 2
* of the License, or (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
* GNU General Public License for more details:
* http://www.gnu.org/licenses/gpl.html
*
*/

class SimpleImage {

   var $image;
   var $image_type;

   function load($filename) {

      $image_info = getimagesize($filename);
      $this->image_type = $image_info[2];
      if( $this->image_type == IMAGETYPE_JPEG ) {

         $this->image = imagecreatefromjpeg($filename);
      } elseif( $this->image_type == IMAGETYPE_GIF ) {

         $this->image = imagecreatefromgif($filename);
      } elseif( $this->image_type == IMAGETYPE_PNG ) {

         $this->image = imagecreatefrompng($filename);
      }
   }
   function save($filename, $image_type=IMAGETYPE_JPEG, $compression=75, $permissions=null) {

      if( $image_type == IMAGETYPE_JPEG ) {
         imagejpeg($this->image,$filename,$compression);
      } elseif( $image_type == IMAGETYPE_GIF ) {

         imagegif($this->image,$filename);
      } elseif( $image_type == IMAGETYPE_PNG ) {

         imagepng($this->image,$filename);
      }
      if( $permissions != null) {

         chmod($filename,$permissions);
      }
   }
   function output($image_type=IMAGETYPE_JPEG) {

      if( $image_type == IMAGETYPE_JPEG ) {
         imagejpeg($this->image);
      } elseif( $image_type == IMAGETYPE_GIF ) {

         imagegif($this->image);
      } elseif( $image_type == IMAGETYPE_PNG ) {

         imagepng($this->image);
      }
   }
   function getWidth() {

      return imagesx($this->image);
   }
   function getHeight() {

      return imagesy($this->image);
   }
   function resizeToHeight($height) {

      $ratio = $height / $this->getHeight();
      $width = $this->getWidth() * $ratio;
      $this->resize($width,$height);
   }

   function resizeToWidth($width) {
      $ratio = $width / $this->getWidth();
      $height = $this->getheight() * $ratio;
      $this->resize($width,$height);
   }

   function scale($scale) {
      $width = $this->getWidth() * $scale/100;
      $height = $this->getheight() * $scale/100;
      $this->resize($width,$height);
   }

   function resize($width,$height) {
      $new_image = imagecreatetruecolor($width, $height);
      imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());
      $this->image = $new_image;
   }      

}
?> 
```

我知道我现在有很多安全漏洞，很快就会解决这些漏洞！多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:06:25.110

乍一看，您的图像大小调整代码在`if( isset($_POST['submit']) ) {`表单的检查中，但是当表单提交到`submitAlbumForm.php`完全不同的页面时，此代码将永远不会运行。我认为您只需将调整大小的代码移动到 submitAlbumForm.php 中，可能在`if(move_uploaded_file(...)`块内并根据需要更改路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:23:08.370

我看不到 if 块如何`if( isset($_POST['submit']) )`被击中，如果它被击中，那么图像数据将直接输出，这将不起作用，因为它被 HTML 包围。输出调整大小图像数据的单独脚本将更适合由单独的脚本处理。（也许一个需要 GET 参数作为大小的参数？）如果您尝试保存图像的调整大小副本而不是原始大小的图像，那么您可能应该在`move_uploaded_file`. 你可能会用它`SimpleImage::save()`来做到这一点。也许这会起作用：

```
if(move_uploaded_file($_FILES['albumCover']['tmp_name'], $target)) 
{ 
    require_once 'SimpleImage.php';
    $image = new SimpleImage();
    $image->load($target);
    $image->resize(150,150);
    $image->save($target); // Overwrites the image with a resized one

    // Tells you if its all ok 
    echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded, and your information has been added to the directory"; 
} 
else ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-02T01:52:58.030

你可以试试我自己的程序。我确实上传并存储了数据，并且可以减小我们可以更改的图像的大小。

我使用 php 和 xampp。目录 ：

```
C:\xampp\htdocs\phpyan\6_Database_2
6_Database_2 :
..images (dir)
..packages (dir)
..input_personal_info.php (file)

..images
   ..small(dir)
   ..more pict (file picture)
-----------------------------
..packages
   ..ClassDatabase.php 
   ..Personal.php 
```

在“图像文件夹”中有一个名为“小”的文件夹

注释： *在包文件夹中，我将类保留为存储数据和上传小尺寸图像的功能*

input_personal_info.php

```
<?php
 include 'packages/ClassDatabase.php';
 include 'packages/Personal.php';
?>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Input Personal Information</title>
  </head>
 <body>
  <h1>Personal Information</h1>
  <form enctype="multipart/form-data" action="" name="frm_personal_info" method="post">
    <table>
     <tr>
      <td>First Name</td>
      <td><input type="text" name="First_Name"></td>
     </tr>
     <tr>
      <td>Last Name</td>
      <td><input type="text" name="Last_Name"></td>
     </tr>
     <tr>
      <td>Date Birth</td>
      <td><input type="text" name="Date_Birth"></td>
     </tr>
     <tr>
      <td>Gender</td>
      <td>
        <select name="Gender">
         <option value="">Gender...</option>
         <option value="Pria">Pria</option>
         <option value="Wanita">Wanita</option>
         <option value="Lainnya">Lain..</option>
        </select>
      </td>
     </tr>
     <tr>
      <td>Photo Profile</td>
      <td><input type="file" name="Photo_Profile"></td>
     </tr>
      <tr>
      <td>About</td>
      <td><textarea name="About" rows="4" cols="30"></textarea></td>
     </tr>
      <tr>
      <td colspan="2"><input type="submit" name="submit" value="Save"></td>
     </tr>
    </table>
  </form>
 </body>
</html>
<?php
// connect with database
$connector = new ClassDatabase("localhost","root","","RawnayDB");
$connector->connect();
 if (isset($_POST['submit'])) {
    // assign values on variabel
      $first_name = $_POST['First_Name'];
    $last_name = $_POST['Last_Name'];
    $date_birth = $_POST['Date_Birth'];
    $gender = $_POST['Gender'];
    $about = $_POST['About'];
    $dir = "images/";
    $dir2 = "images/small/";
    $photo_name = $_FILES['Photo_Profile']['name'];
    $photo_error = $_FILES['Photo_Profile']['error'];
    $photo_type = $_FILES['Photo_Profile']['type'];
    $photo_size = $_FILES['Photo_Profile']['size'];
    $photo_tmp = $_FILES['Photo_Profile']['tmp_name'];

    $personals = new Personal();

    // save file foto
    $personals->uploadPic($dir,$photo_name,$photo_tmp);
    // save pic small
    $personals->thumbPic($dir2,$photo_name);
    // save data
    $personals->savePersData($first_name,$last_name,$date_birth,$gender,$photo_name,$about);

 }
?> 
```

包/ClassDatabase.php

```
<?php
// class Database
class ClassDatabase{
  var $host;
  var $user;
  var $pswd;
  var $db;

  function ClassDatabase($host,$user,$pswd,$db){
    $this->host = $host;
    $this->user = $user;
    $this->pswd = $pswd;
    $this->db = $db;
  }

  function connect(){
  // Connection Test
    if(mysql_connect($this->host,$this->user,$this->pswd))
    {mysql_select_db($this->db);} else {echo "Connection Failed";}

  }
}
?> 
```

packages/Personal.php //> 类

```
<?php
// class personal

class Personal{

  var $tabel = "personal";
  var $photo_original;
  var $photo_small;
  var $width;
  var $height;
  var $thumbWidth = 100;
  var $thumbHeight;

  function savePersData($fstnm,$lstnm,$dtbrth,$gndr,$photo_name,$about){
      $small = $this->photo_small;
      $original = $this->photo_original;
      $photo_name = "Pic".$fstnm;
      $query = "INSERT INTO $this->tabel VALUES('','$fstnm','$lstnm','$dtbrth','$gndr','$photo_name','$small','$original','$about');";
      if(mysql_query($query)){
        echo "<script>alert('penyimpanan sukses');</script>";
      }
  }

  function uploadPic($dir,$photo_name,$photo_tmp){
     is_uploaded_file($photo_tmp);
     $check = move_uploaded_file($photo_tmp,$dir.$photo_name);
     if($check){
     $this->photo_original=$dir.$photo_name;
     }
  }

  function thumbPic($dir2,$filename){
    $photo_original = imagecreatefromjpeg($this->photo_original);
    $this->width = imagesx($photo_original);
    $this->height = imagesy($photo_original);
    $this->thumbHeight = ($this->thumbWidth/$this->width)*$this->height;
    // resample picture
    $gbr_thumb = imagecreatetruecolor($this->thumbWidth,$this->thumbHeight);
    imagecopyresampled($gbr_thumb,$photo_original,0,0,0,0,$this->thumbWidth,$this->thumbHeight,$this->width,$this->height);
    // Save your directory
    $acak = rand(00000,999999);
    imagejpeg($gbr_thumb, $dir2."Small_Rawnay_Pic_".$acak.".jpeg");
    $this->photo_small = $dir2."Small_Rawnay_Pic_".$acak.".jpeg";
  }
}
?> 
```

# jsf - 有没有办法让 JSF 页面在 bean 值更改时自动更新网页？

> ID：11800902
> 
> 赞同：1
> 
> 时间：2012-08-03T17:57:40.823
> 
> 标签：jsf, webserver, java-ee-6

（使用 JEE6）是否可以让网页自动更新（或侦听）来自 bean/类中的值，并在这些更改发生时将它们显示在 JSF 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:23:47.673

正如 KayKay 提到的，您可以使用 javascript 实现某种轮询方法，以定期要求服务器发送更新（如果有）。除非您使用 ajax，否则您将不得不满足于仅完整的页面刷新。

尽管 JSF 很好，但它位于基本的无状态 Web 技术之上。因此，除非您使用 Ajax 或某些自定义代码，否则服务器只会响应来自客户端的请求。一些像icefaces这样的库已经合并了一个“推送”组件，它允许你正在寻找什么（据我了解，这是icefaxes的一个基本部分）。也就是说，将服务器端的更改推送到客户端。

您必须在您的一端设置一个侦听器，以便在服务器上发生值更改时通知您的 bean（例如在服务器上的支持 bean 中）。当更改发生时，您可以要求说“icefaces push”（或其他库，如 primefaces，您表示您不想使用）向客户发送通知。客户端代码（通常是 ajax/javascript）将处理通知，然后根据正常的请求响应发送整个对象的请求。那就是通知告诉客户它有兴趣更改的内容，以便客户可以要求更新。除了通知，仍然请求/响应。

我提到 icefaces push 是因为它现在似乎是最受欢迎的库。但其他人也有这个。我不相信标准的 JSF 2.0 AJAX 库有这个。

这里有几个资源可供查看：

（视频是了解正在发生的事情的好开始，然后使用网站的其余部分） [http://www.icesoft.org/demos/icepush-demos.jsf](http://www.icesoft.org/demos/icepush-demos.jsf)

较旧但我认为仍然与 IBM 教程有关，以库存更改为例：

[http://www.ibm.com/developerworks/web/library/wa-aj-dynamic/index.html](http://www.ibm.com/developerworks/web/library/wa-aj-dynamic/index.html)

另一个相关的堆栈问题：

[JSF 2.0 有比 Icefaces 更好的 Ajax Push](https://stackoverflow.com/questions/3489654/is-there-a-better-ajax-push-for-jsf-2-0-than-icefaces)

不幸的是，您似乎无法仅使用 JSF 来做到这一点，您将不得不使用其中一个库，或者更难的是，使用您自己的推送机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:10:03.103

我不知道这样做的 JSF 功能。我会简单地做一些 javascript 轮询，例如使用[jquery load 方法](http://api.jquery.com/load/)来刷新页面中显示值的部分。

知道你想做什么会有所帮助：当有变化时刷新整个页面，更新从一开始就显示的一些值，或者向页面添加新值。

# checkbox - 单击文本以选中复选框

> ID：11800909
> 
> 赞同：0
> 
> 时间：2012-08-03T17:58:04.957
> 
> 标签：checkbox

我注意到在某些网站上，如果你想勾选或关闭一个复选框，你只需要点击相应的文本。当我在我的页面上放置一个带有一些描述性文本的复选框时，我必须实际点击复选框才能选中它。前一种效果是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:34:36.930

考虑`<label>`在本例中使用 a ：

```
<input type="checkbox" name="call" id="willcall">
<label for="willcall">click on this text to select the checkbox</label> 
```

这个例子来自：[http ://www.askdavetaylor.com/make_text_adjacent_to_checkbox_clickable.html](http://www.askdavetaylor.com/make_text_adjacent_to_checkbox_clickable.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:06:17.947

我确信他们使用 JS 脚本来实现这一点。它很可能是一个被点击的标签，他们可能会向标签添加一个 onclick() 事件，该事件使用 javascript 来查找复选框并向其添加 CHECKED 属性。很抱歉没有提供代码，但我希望这能让您对这些网站的功能有所了解。

# javascript - 快速移动鼠标永远不会触发 mouseleave 事件

> ID：11800910
> 
> 赞同：4
> 
> 时间：2012-08-03T17:58:05.900
> 
> 标签：javascript, mouseleave

将鼠标悬停在我网站上的某些按钮上时，我希望出现指示用户的工具提示。基本上，只要将鼠标悬停在具有“has_tooltip”类的按钮上，就会附加一个工具提示。

```
$('.has_tooltip').live({
    mouseenter  : function(e) {
        if($('#tooltip_container').length > 0){
            $('#tooltip_container').remove();
        }

        var $t = $(this), text = $t.attr('rel'), left = e.pageX-25, top = e.pageY-25;
        if($t.attr('rev') === '1') {
            text += ' <span class="tooltip_warning">You must be <a href="/users/login" class="modal-dynamic">logged in</a> to make use of this.</span>'
        }
        $tooltip = $('<div id="tooltip_container">'+text+'</div>');
        $('body').prepend($tooltip);

        $tooltip.css({
            left: left+'px',
            top: top+'px'
        });

    },

}); 
```

当用户的光标离开新创建的工具提示框时，它应该消失

```
$('#tooltip_container').live({
    mouseleave : function(e){
        $(this).remove();
    }

}); 
```

但是，快速移动鼠标在具有“has_tooltip”类的按钮上会添加工具提示，但移动太快而无法触发 mouseleave 事件。

有人对我如何解决这个问题有一些提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:06:34.103

'如果鼠标没有进入tooltip（tooltip出现在鼠标下方），浏览器可能不会触发mouseleave事件。您可能需要添加一个额外的选择器。尝试这个：

```
$('#tooltip_container','.has_tooltip').live({
    mouseleave : function(e){
        $('#tooltip_container').remove();
    }
}); 
```

我强烈建议从您的工具提示方法中删除 HTML...尝试创建一个空 div 并在您显示它时添加工具提示文本和定位 - 尝试向 DOM 添加尽可能少的内容（创建一个隐藏的 div对于大多数工具提示 HTML，并且只根据需要更改它的实际文本内容）。

理想情况下，您的 mouseenter 应该简单地替换工具提示文本并以正确的位置显示 div。mouseleave 事件应该只是 hide() 工具提示 div（而不是将其从 DOM 中删除，以便稍后创建并再次添加）。

# html - 挂在缓存清单文件上的 HTML5 浏览器

> ID：11800912
> 
> 赞同：0
> 
> 时间：2012-08-03T17:58:28.950
> 
> 标签：html, offline-caching, cache-manifest, offline-browsing, manifest.cache

我正在使用 HTML5 appcache 并且大多数情况下它运行良好。然而，有时，用户的浏览器（Chrome 或 Safari）会保留缓存的清单文件，即使我确信服务器有一个全新的清单文件，其中包含一个唯一的版本号（例如“# app version 1.0.0.8" 或其他）。

在 IIS（版本 6）中，内容过期设置为 1 天，这可能是问题所在吗？我似乎无法重现这个使调试变得困难的问题。作为预防措施，在 IIS 中，我已将存储清单文件的目录的内容过期更改为“立即过期”。这可以解释为什么即使有新版本可用，一些浏览器也会挂在清单文件上？

我还注意到，当浏览器以这种方式运行时，即使我删除了服务器上的清单文件，用户的浏览器也会使用它自己的清单文件缓存副本，如果文件不再可用，则不应该发生这种情况在我的理解中。

谢谢，

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:05:34.733

取自我在这里的回答：[https ://stackoverflow.com/a/13282735/727575](https://stackoverflow.com/a/13282735/727575)

是的，这是当前的“正确”行为。它与 IIS 内容过期无关。这就是发生的事情：

当您刚刚对清单文件进行更改并刷新浏览器时，会发生这种情况（假设您在线）

*   浏览器首先加载回缓存中的所有文件
*   然后浏览器在线检查您的清单文件
*   它检测到清单文件已更改，然后将继续下载新文件
*   但是，请记住，此时，您仍然会查看“旧文件”，因为浏览器在上线下载“新文件”之前已经加载了旧文件
*   如果此时，如果您再次点击刷新（第二次），您应该获得“新文件”
*   这是目前的标准行为。有些人放了一些事件处理程序来提示用户进行另一次刷新（第一次刷新后）

所以基本上，您需要刷新两次或从“window.applicationCache”中抛出一个事件来处理它

要查看使用 window.applicationCache 的示例，请访问此处：[http ://www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

它在“更新缓存”部分下。

# python - Django：删除用户配置文件

> ID：11800913
> 
> 赞同：1
> 
> 时间：2012-08-03T17:58:31.307
> 
> 标签：python, django, django-users

如果我有以下代码来创建用户配置文件，当我从数据库中删除用户时是否必须删除它？如果是这样，怎么做？

```
def create_user_info(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:10:40.517

假设您的 UserProfile 模型上有一个指向用户的 OneToOneField，那么您不必显式删除配置文件。

在这种情况下，Django 的删除级联将自动遵循从用户到配置文件的关系，并为您删除配置文件对象。

# sql - 进一步按计数分组

> ID：11800915
> 
> 赞同：2
> 
> 时间：2012-08-03T17:58:39.587
> 
> 标签：sql, sql-server-2008

当前 SQL 语句：

```
SELECT count(installUserID) as userCount
  FROM installUsers
  group by installationID 
```

电流输出：

```
userCount
4
2
1
1
1
2
4
1
3
1 
```

我正在尝试计算`userCount`1 和 2 等的次数...

所需输出的示例：

```
userCount = 1, 5 times
userCount = 2, 2 times
userCount = 3, 1 times
userCount = 4, 2 times 
```

我环顾了互联网，我想我可以用聚合函数做一些事情，也许用`grouping`，但我仍然不清楚如何用纯 sql 来实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:00:54.533

看来您想要计数。为此，您可以使用外部选择：

```
SELECT userCount, COUNT(*) AS userCountcount
FROM
(
    SELECT COUNT(installUserID) as userCount
    FROM installUsers
    GROUP BY installationID
) AS T1
GROUP BY userCount
ORDER BY userCount 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T18:10:54.010

或者，您可以使用 CTE。也许为此而过度杀戮，但非常方便。

```
WITH count_cte(usercount)
AS
(
  SELECT COUNT(installUserID) AS userCount
  FROM installUsers
  GROUP BY installationID
)

SELECT  usercount  ,COUNT(usercount) AS times  FROM count_cte GROUP BY usercount 
```

# javascript - 对角线鼠标悬停与 3 级深度 jquery 下拉菜单

> ID：11800920
> 
> 赞同：1
> 
> 时间：2012-08-03T17:58:54.863
> 
> 标签：javascript, jquery, html, css, drop-down-menu

首先，我将要解释的一切都在这个小提琴中展示：

[http://jsfiddle.net/rxaBH/3/](http://jsfiddle.net/rxaBH/3/)

考虑一个深入 3 个级别的导航选项卡；第一级选项卡，第二级：下拉列表。3rd level 向侧面打开的第二个下拉列表。这是一个视觉效果：

![在此处输入图像描述](../Images/17dcd0836ca309d6d82e04fe6e0493ff.png)

. 它的简化 HTML 看起来像这样：

```
<ul id = "maintabs">
    <li>child 1</li>
    <li>child 2
        <ul>
            <li>grand child 1</li>
            <li>grand child 2
                <ul>
                    <li>great grand child 1</li>
                    <li>great grand child 2</li>
                    <li>great grand child 3</li>
                </ul>                
            </li>
        </ul>    
    </li>
</ul> 
```

​我不会费心把 CSS 代码放在这里，因为它太长了，但可以在小提琴[链接](http://jsfiddle.net/rxaBH/3/)中找到。

这是基于鼠标悬停显示/隐藏菜单的 jQuery 代码：

```
$("ul#maintabs li").hover(function () {
    $('ul:eq(0)', this).stop(true, true).animate({
        height: 'show',
        opacity: 'show'
    }, 150);
}, function () {
    $('ul:eq(0)', this).animate({
        height: 'hide',
        opacity: 'hide'
    }, 150);
}) 
```

所有这一切都很好，但用户交互可以改善导航到第 3 级项目。假设您要导航到西瓜 > 绿色 > 真正的深绿色。所以你可以将鼠标悬停在“西瓜”上，然后出现下拉菜单，然后将鼠标悬停到“绿色”，然后出现侧面下拉菜单。然后从“绿色”水平悬停到“较暗”，然后垂直向下悬停到“真正深绿色”。这是一个视觉。鼠标移动由红色箭头表示：

![在此处输入图像描述](../Images/8e9136703e93986c6d6258553a151ed1.png)

但是如果用户想要从“绿色”直接斜向“深绿色”而不是先水平滚动怎么办？这是所需行为的视觉效果：

![在此处输入图像描述](../Images/79545301c010df103761464445be6bc6.png)

这会导致鼠标离开“绿色”，结果菜单折叠并完全消失。那么如何解决呢？

我尝试增加 mouseleave 的超时时间，但是出现了另一个问题：如果您想在途中从绿色直接变为“真正的深绿色”，那么您会将鼠标悬停在“红色”上，也可能会悬停在“紫色”上。如果“红”也有孩子呢？然后将鼠标从“绿色”移到“红色”上也会显示“红色”的子菜单，然后您将同时打开 1 个以上的 3 级菜单，这看起来很糟糕。

希望所有这些都是有道理的！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-13T06:15:12.423

```
$(document).ready(function() {
    $("ul.nav li").hover(function() { //When trigger is hovered...
        $(this).children("ul.sub").stop(true).slideDown();
    }, function() {
        $(this).children("ul.sub").stop(true).slideUp();
    });
}); 
```

这解决了我的问题

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T18:10:02.013

您是否考虑过使用门垫？使用多层导航不是一个明智的想法，它存在许多可用性问题。

这就是您想要的理想行为。Onmouseout，您希望元素消失，否则它将持续存在。

检查 ibm 网站上的门垫菜单，我相信你会喜欢的。

[http://www.ibm.com/us/en/](http://www.ibm.com/us/en/)

# java - xml dom解析器在java中按名称查找标签

> ID：11800931
> 
> 赞同：4
> 
> 时间：2012-08-03T18:00:14.410
> 
> 标签：java, xml, parsing, dom

我有一个 xml： [http ://netmobileag.accu-weather.com/widget/netmobileag/weather-data.asp?slat=48.04960&slon=21.71420&metric=1](http://netmobileag.accu-weather.com/widget/netmobileag/weather-data.asp?slat=48.04960&slon=21.71420&metric=1)

我只想得到城市和温度，我试过这个：

```
HttpParams httpParameters = new BasicHttpParams();

HttpClient httpclient = new DefaultHttpClient(httpParameters);
HttpGet httpget = new HttpGethttp://netmobileag.accu weather.com/widget/netmobileag/weather-data.asp?slat=48.04960&slon=21.71420&metric=1");

HttpResponse response = httpclient.execute(httpget);

InputStream in = response.getEntity().getContent();

String res = "";

DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse(new InputSource(in));
doc.getDocumentElement().normalize();

NodeList loc = doc.getElementsByTagName("local");

for (int i = 0; i < loc.item(0).getChildNodes().getLength(); i++) {
    res = res + "\n" + loc.item(0).getChildNodes().item(0).getNodeValue();
} 
```

但资源将是

```
#text
#text
 ... 
```

总结 25 倍。如何获取城市和温度值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:36:26.740

正确的做法是实际使用 Xpath。您是否使用 Regex 或 SQL 在数据库中进行搜索？同样在这里，在 XML 文件中的搜索是通过 XPath 完成的。

```
 package xpath;

 import javax.xml.parsers.DocumentBuilder;
 import javax.xml.parsers.DocumentBuilderFactory;
 import javax.xml.xpath.XPath;
 import javax.xml.xpath.XPathConstants;
 import javax.xml.xpath.XPathExpression;
 import javax.xml.xpath.XPathFactory;

 import org.w3c.dom.Document;
 import org.w3c.dom.NodeList;

 public class SimpleParsing {
public static void main(String[] args) throws Exception {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(false); // never forget this!
    DocumentBuilder builder = factory.newDocumentBuilder();

    Document doc = builder.parse("/Users/eugenrabii/Desktop/MyFile.xml");

    XPathFactory xPathFactory = XPathFactory.newInstance();
    XPath xpath = xPathFactory.newXPath();

    XPathExpression xPathExpression = xpath.compile("//city/text()");

    Object result = xPathExpression.evaluate(doc, XPathConstants.NODESET);

    System.out.println(result.toString());

    NodeList nodes = (NodeList) result;

    System.out.println(nodes.getLength());
    for (int i = 0; i < nodes.getLength(); i++) {
        System.out.println(nodes.item(i).getNodeValue()); 
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:13:28.903

尝试 getTextContent() 而不是 getNodeValue()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:16:28.717

试试下面的代码

```
HttpParams httpParameters = new BasicHttpParams();

HttpClient httpclient = new DefaultHttpClient(httpParameters);
HttpGet httpget = new HttpGethttp://netmobileag.accu weather.com/widget/netmobileag/weather-data.asp?slat=48.04960&slon=21.71420&metric=1");

HttpResponse response = httpclient.execute(httpget);

InputStream in = response.getEntity().getContent();

String res = "";

DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse(new InputSource(in));
doc.getDocumentElement().normalize();

NodeList loc = doc.getElementsByTagName("local");

for (int i = 0; i < loc.item(0).getChildNodes().getLength(); i++) {
    res = res + "\n" + loc.item(0).getChildNodes().item(0).getTextContent();
} 
```

# mysql - 选择时剥离

> ID：11800934
> 
> 赞同：0
> 
> 时间：2012-08-03T18:00:30.273
> 
> 标签：mysql, matching, stripping

1.  我有两个表，一个是列表，`students_playing`但它大约有 10 个字符长，名字和姓氏结合在一起......
2.  我想从中进行选择，`avail_students`但我不想选择与前 5 个字符匹配的同名学生。

我现在的选择命令是：

```
select * from avail_students where lastplayed<now() and name not IN strip(students_playing),5) 
```

我知道最后一部分不正确，但我什至不知道从哪里开始。

非常感谢我从中获得的任何帮助。先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:14:20.870

我认为[LEFT 函数](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_left)和[嵌套子查询](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)是您正在寻找的。

下面的示例应仅比较前 5 个字符。

```
SELECT * FROM avail_students 
WHERE lastplayed < now() 
AND NOT EXISTS (
    SELECT * FROM students_playing
    WHERE LEFT( students_playing.name, 5 ) = LEFT( avail_students.name, 5 )
) 
```

# php - MeioUpload not creating thumbnails with cakePHP

> ID：11800938
> 
> 赞同：0
> 
> 时间：2012-08-03T18:00:42.787
> 
> 标签：php, cakephp

I am currently using the MeioUpload Plugin located here:

[MeioUpload](https://github.com/jrbasso/MeioUpload)

The file uploading is all working like a charm, but the thumbnails are not being generated.

Has anyone else had this issue? I am using cakePHP 2.1.

I have followed the readme file strictly.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T21:36:00.833

I was able to get this working by adding this code into the model:

```
class Image extends AppModel {
    var $actsAs = array(
        'MeioUpload.MeioUpload' => array(
            'filename' => array(
                'thumbsizes' => array(
                    '320x90' => array(
                        'width' => 320,
                        'height' => 90
                    )
                )                   
            )
        )
    );

} 
```

You can vary the size of the thumbnail with the given parameters above.

# jquery - jQuery循环功能仅适用于最后一个元素

> ID：11800943
> 
> 赞同：2
> 
> 时间：2012-08-03T18:00:51.017
> 
> 标签：jquery, loops

我正在为新闻页面开发一个简单的 JQuery 函数。基本上这个想法很简单......我有一个新闻文本 div，然后我将为不同的新闻项目添加各种按钮。这个想法是，当用户单击按钮时，div 会在数组中加载正确的新闻文本。似乎只适用于最后一个按钮，所以我的循环有问题。我是新手，所以我有点难过！

代码

```
<div id="textbtn0">Btn1</div>
<div id="textbtn1">Btn2</div>
<div id="textbtn2">Btn3</div>
<div id="textbox">This is text</div> 
```

查询代码

```
jQuery(document).ready(function() {
    var newsItems=new Array();
    newsItems[0]="News1";
    newsItems[1]="News2";
    newsItems[2]="News3";
    for(a=0;a<newsItems.length;a++){
        var num=a;
        jQuery("#textbtn"+num).mouseover(function() {
             $("#textbtn"+num).css('cursor', 'pointer');
        });

        $("#textbtn"+num).click(function()
        {
            $("#textbox").html(newsItems[num]);
        });
    };
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:10:57.893

对不起，但你可以避免一些问题做一些更优化的代码。这就是我认为你可以做的。希望你喜欢！我创建了一个小提琴（[here](http://jsfiddle.net/EA2xu/1/)）以确保它像你想要的那样工作。

```
<div class="textHover" alt="News 1">Btn1</div>
<div class="textHover" alt="News 2">Btn2</div>
<div class="textHover" alt="News 3">Btn3</div>
<div id="textbox" >This is text</div> 
```

* * *

```
jQuery(document).ready(function() {
    jQuery(".textHover").css('cursor', 'pointer');
    jQuery(".textHover").click(function()
    {
        $("#textbox").html($(this).attr('alt'));
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:12:55.257

我不明白为什么你不会优化一点，我做到了，[这就是 jsFiddle 结果](http://jsfiddle.net/d58tr/)。

* * *

为了准确解释我做了什么，我摆脱了 jQuery css 声明，并使用了常规 css。我将所有 ID 更改为类，因为它们都共享相同类型的信息。此外，mouseover 事件应该是完全没有必要的，因为`cursor: pointer`在所有浏览器中都只适用于 mouseover。将数组放入一行只是偏好，如果您愿意，可以像以前一样单独初始化它。希望你喜欢这个解决方案！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:13:40.900

你可以简单地使用[jQuery.each](http://api.jquery.com/jQuery.each/)

```
jQuery(document).ready(function() {
    var newsItems=new Array();
    newsItems[0]="News1";
    newsItems[1]="News2";
    newsItems[2]="News3";
    $.each( newsItems, function(i, l){
        $("#textbtn"+i).mouseover(function() {
            $("#textbtn"+i).css('cursor', 'pointer');
        });
        $("#textbtn"+i).click(function(){
            $("#textbox").html(newsItems[i]);
        });
    });
}); 
```

这是一个工作示例=> [http://jsfiddle.net/abdullahdiaa/aawcn/](http://jsfiddle.net/abdullahdiaa/aawcn/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-04T06:15:45.287

这些工作示例是完全正确的。但我仍然想纠正你的代码。

```
jQuery(document).ready(function() {
    var newsItems=new Array();
    newsItems[0]="News1";
    newsItems[1]="News2";
    newsItems[2]="News3";
    for(let a=0;a<newsItems.length;a++){
        let num=a;
        jQuery("#textbtn"+num).mouseover(function() {
             $("#textbtn"+num).css('cursor', 'pointer');
        });

        $("#textbtn"+num).click(function()
        {
            $("#textbox").html(newsItems[num]);
        });
    }
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-03T18:06:05.740

这是（a？）jQuery的做法：

```
jQuery(document).ready(function() {
    var newsItems=new Array();
    newsItems[0]="News1";
    newsItems[1]="News2";
    newsItems[2]="News3";
    for(a=0;a<newsItems.length;a++){
        jQuery("#textbtn"+a).mouseover({num:a},function(e) {
            $("#textbtn"+e.data.num).css('cursor', 'pointer');
        });
        $("#textbtn"+a).click({num:a},function(e){
            $("#textbox").html(newsItems[e.data.num]);
        });
    }
}); 
```

编辑：修复了错过的点击事件

# qt - 表格视图中的复选框和 itemdelegate

> ID：11800946
> 
> 赞同：7
> 
> 时间：2012-08-03T18:01:05.187
> 
> 标签：qt, qtableview, qitemdelegate, qcheckbox

我正在实现一个从 QitemDelegate 继承的 CheckBox，以将其放入 QTableView。

问题是当我向左插入时我得到了，我需要它居中。

据我了解负责油漆的方法。我把它写成如下：

```
void CheckBoxDelegate::paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const
{
bool checkValue;

QStyleOptionButton BtnStyle;
BtnStyle.state = QStyle::State_Enabled;

if(index.model()->data(index, Qt::DisplayRole).toBool() == true)
{
BtnStyle.state |= QStyle::State_On;
checkValue = true;
}else{
BtnStyle.state |= QStyle::State_Off;
checkValue = false;
}

BtnStyle.direction = QApplication::layoutDirection();
BtnStyle.rect = option.rect;
QApplication::style()->drawControl(QStyle::CE_CheckBox,&BtnStyle,painter );
QApplication::style()->drawControl(QStyle::CE_CheckBox,&BtnStyle,painter );
} 
```

缺少什么以显得居中？

所以我有委托：

。H

```
class BooleanWidget : public QWidget
{
    Q_OBJECT
    QCheckBox * checkBox;

    public:
    BooleanWidget(QWidget * parent = 0)
    {
        checkBox = new QCheckBox(this);
        QHBoxLayout * layout = new QHBoxLayout(this);
        layout->addWidget(checkBox,0, Qt::AlignCenter);

    }

    bool isChecked(){return checkBox->isChecked();}
    void setChecked(bool value){checkBox->setChecked(value);}
};

class CheckBoxDelegate : public QItemDelegate
{
    Q_OBJECT
private:
    BooleanWidget *checkbox;

public:
    CheckBoxDelegate(QObject *parent);
    ~CheckBoxDelegate();
    void setEditorData( QWidget *editor,const QModelIndex &index )const;
    void setModelData( QWidget *editor,QAbstractItemModel *model,const QModelIndex &index )const;
    QWidget *createEditor( QWidget *parent,const QStyleOptionViewItem &/* option */,const QModelIndex &/* index */ )const;
    void paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const;

public slots:
    void changed( bool );

}; 
```

.cpp

```
void CheckBoxDelegate::changed( bool value )
{
    BooleanWidget *checkbox = static_cast<BooleanWidget*>( sender() );
    emit commitData( checkbox );
    emit closeEditor( checkbox );
}

QWidget *CheckBoxDelegate::createEditor( QWidget *parent,const QStyleOptionViewItem &/* option */,const QModelIndex &/* index */ ) const
{
  BooleanWidget *editor = new BooleanWidget( parent );
  connect( editor, SIGNAL( toggled ( bool ) ), this, SLOT( changed( bool ) ) );

  return editor;
}

void CheckBoxDelegate::setEditorData( QWidget *editor,const QModelIndex &index ) const
{
    int value = index.model()->data(index, Qt::DisplayRole).toInt();

    BooleanWidget *checkbox = static_cast<BooleanWidget*>(editor);

    if(value == 1)
    {
        checkbox->setChecked(true);
    }
    else
    {
        checkbox->setChecked(false);
    }

}

void CheckBoxDelegate::setModelData( QWidget *editor,QAbstractItemModel *model,const QModelIndex &index ) const
{
    BooleanWidget *checkBox = qobject_cast<BooleanWidget*>( editor );
    Qt::CheckState value;

    if(checkBox->isChecked())
        value = Qt::Checked;
    else
        value = Qt::Unchecked;

    model->setData( index, value, Qt::DisplayRole);
}

void CheckBoxDelegate::paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const
{
    drawCheck(painter, option, option.rect, index.data().toBool() ? Qt::Checked : Qt::Unchecked);
    drawFocus(painter, option, option.rect);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T19:31:48.580

如果您正在扩展`QItemDelegate`该类，它有一个[drawCheck()](http://qt-project.org/doc/qt-4.8/qitemdelegate.html#drawCheck)函数，它会为您绘制一个居中的复选框。您可以在paint() 函数中使用它。

**编辑：**

这是一个示例，假设您有一个名为 的类`BooleanEditor`，它继承自[QItemDelegate](http://doc.qt.nokia.com/4.7-snapshot/qitemdelegate.html)：

```
void BooleanEditor::paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const
{
    drawCheck(painter, option, option.rect, index.data().toBool() ? Qt::Checked : Qt::Unchecked);
    drawFocus(painter, option, option.rect);
} 
```

为了在进入编辑模式时保持复选框居中，您可以执行以下操作：

```
class BooleanWidget : public QWidget
{
    Q_OBJECT
    QCheckBox * checkBox;

    public:
    BooleanWidget(QWidget * parent = 0)
    {
        checkBox = new QCheckBox(this);
        QHBoxLayout * layout = new QHBoxLayout(this);
        layout->addWidget(checkBox,0, Qt::AlignCenter);
    }

    bool isChecked(){return checkBox->isChecked();}
    void setChecked(bool value){checkBox->setChecked(value);}
}; 
```

并在您的 ItemDelegates createEditor() 方法中返回此 BooleanWidget 类的实例。在您的 setModelData() 和 setEditorData() 中，您现在可以将输入小部件投射到此 BooleanWidget：

```
BooleanWidget * widget = qobject_cast<BooleanWidget*>(editor); 
```

然后使用 is/setChecked 方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-06-12T21:41:17.730

我使用以下项目委托解决了这个问题：

booleanitemdelegate.h

```
#ifndef BOOLEANITEMDELEGATE_H
#define BOOLEANITEMDELEGATE_H

#include <QItemDelegate>

class BooleanItemDelegate : public QItemDelegate
{
public:
    BooleanItemDelegate(QObject *parent);

public:
    void paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const;public:
    bool editorEvent(QEvent *event, QAbstractItemModel *model, const QStyleOptionViewItem &option, const QModelIndex &index);
};

#endif // BOOLEANITEMDELEGATE_H 
```

booleanitemdelegate.cpp

```
#include "booleanitemdelegate.h"

BooleanItemDelegate::BooleanItemDelegate(QObject *parent):
    QItemDelegate(parent)
{

}

void BooleanItemDelegate::paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const
{
    drawCheck(painter, option, option.rect, index.data().toBool() ? Qt::Checked : Qt::Unchecked);
    drawFocus(painter, option, option.rect);
}

bool BooleanItemDelegate::editorEvent(QEvent *event, QAbstractItemModel *model, const QStyleOptionViewItem &option, const QModelIndex &index)
{
    if(event->type() == QEvent::MouseButtonRelease){
        model->setData(index, !model->data(index).toBool());
        event->accept();
    }
    return QItemDelegate::editorEvent(event, model, option, index);
} 
```

我希望，我能帮上忙。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-27T23:11:51.430

这就是我为使编辑器控件居中对齐所做的：

```
QWidget *checkBoxDelegate::createEditor(QWidget *parent, const QStyleOptionViewItem &option, const QModelIndex &index) const {
    QCheckBox *editor = new QCheckBox(parent);
    editor->setTristate(allowTriState); //my class' variable
    // this does the trick :)
    editor->setStyleSheet("QCheckBox {margin-left: 43%; margin-right: 57%;}"); 
    // this should do it better
    // editor->setStyleSheet("QCheckBox {margin-left: auto; margin-right: auto;}");
    // but in my case the checkbox is slightly to the left of original
    return editor;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T20:17:14.123

解决了如下问题：

认为从 itemDelegate 继承 QStyledItemDelegate 并重新实现方法“paint”和“editorEvent”。

在方法“editorEvent”中发出一个信号，指示选择了哪一行。

这是代码

```
class ItemDelegate : public QStyledItemDelegate
{
    Q_OBJECT

signals:
    void clickSignal(int);

public:
    ItemDelegate(QObject *parent = 0)
        : QStyledItemDelegate(parent)
    {
    }

    void paint ( QPainter * painter, const QStyleOptionViewItem & option, const QModelIndex & index ) const
    {
        QStyleOptionViewItemV4 viewItemOption(option);

        if (index.column() == 0) {
            const int textMargin = QApplication::style()->pixelMetric(QStyle::PM_FocusFrameHMargin) + 1;
            QRect newRect = QStyle::alignedRect(option.direction, Qt::AlignCenter,
                                                QSize(option.decorationSize.width() + 5,option.decorationSize.height()),
                                                QRect(option.rect.x() + textMargin, option.rect.y(),
                                                      option.rect.width() - (2 * textMargin), option.rect.height()));
            viewItemOption.rect = newRect;
        }
        QStyledItemDelegate::paint(painter, viewItemOption, index);

    }

    virtual bool editorEvent(QEvent *event, QAbstractItemModel *model, const QStyleOptionViewItem &option,
                             const QModelIndex &index)
    {
        Q_ASSERT(event);
        Q_ASSERT(model);

        // make sure that the item is checkable
        Qt::ItemFlags flags = model->flags(index);
        if (!(flags & Qt::ItemIsUserCheckable) || !(flags & Qt::ItemIsEnabled))
            return false;
        // make sure that we have a check state
        QVariant value = index.data(Qt::CheckStateRole);
        if (!value.isValid())
            return false;
        // make sure that we have the right event type
        if (event->type() == QEvent::MouseButtonRelease) {
            const int textMargin = QApplication::style()->pixelMetric(QStyle::PM_FocusFrameHMargin) + 1;
            QRect checkRect = QStyle::alignedRect(option.direction, Qt::AlignCenter,
                                                  option.decorationSize,
                                                  QRect(option.rect.x() + (2 * textMargin), option.rect.y(),
                                                        option.rect.width() - (2 * textMargin),
                                                        option.rect.height()));

        } else {
            return false;
        }
        Qt::CheckState state = (static_cast<Qt::CheckState>(value.toInt()) == Qt::Checked
                                ? Qt::Unchecked : Qt::Checked);

        emit(clickSignal(index.row()));

        return model->setData(index, state, Qt::CheckStateRole);
    }

}; 
```

我有一个连接 QTableView 的类这样做：

```
connect(check,SIGNAL(clickSignal(int)),this,SLOT(CheckMark(int))); //check the itemDelegate 
```

使用标记的检查执行操作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-28T02:11:14.813

不用太多大惊小怪，直接设置rect：

```
BtnStyle.rect = option.rect; 
```

构造一个新的 QRect 并将 x 坐标尽可能向右移动：

```
QRect r = option.rect;
QRect r1(r.x() + 34, r.y(), r.width(), r.height());
BtnStyle.rect = r1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-08T15:23:13.443

Python中的解决方案使复选框居中并允许用户[在此处选中/取消选中](https://stackoverflow.com/questions/4403704/qt-qtableview-alignment-of-checkbox-when-using-isusercheckable/59230434#59230434)

# jquery - IE9：我的网站上的 CPU 使用率总是很低

> ID：11800952
> 
> 赞同：4
> 
> 时间：2012-08-03T18:01:34.463
> 
> 标签：jquery, jquery-ui, internet-explorer-9

我已经使用 JQuery 和许多运行良好的拖放元素开发了一个网站。

然而，在 IE9 上，当大量拖放元素被动态加载（使用 .load()）并显示时，浏览器总是消耗少量 CPU（~10%）（用于刷新？），即使什么都没有由用户长时间不触摸鼠标或滚动页面完成。

我没有任何计时器，Chrome 和 Safari 上的行为还可以。

这是上下文以及我在测试后发现的内容：

**语境**

在我的主网页中，我使用[load() 函数](http://api.jquery.com/load/)将用户视图加载到 div 中。加载的视图包含几个带有可拖动元素的容器。这些容器是可放置的，并且在每次放置事件后使用 load() 函数进行刷新。

1.  `<br>`如果我首先在我的网页中插入 50 个标签，则在我的页面中不滚动就不会显示图形元素：我的 CPU 利用率 = 0%
2.  当我滚动以仅显示包含图形元素的一半视图时，我的 CPU 利用率 = 10%
3.  当显示我的所有图形元素时：我的 CPU 利用率 = 20%
4.  当我减小窗口大小时：我的 CPU 利用率根据窗口大小而降低

任何人都可以解释为什么？给我一个建议？是因为很多 JQuery 事件吗？有什么解决方案可以监视我的代码的哪一部分占用了 CPU 资源？

欢迎任何建议！

**编辑**

当我删除加载视图中的所有 JQuery 事件（单击、鼠标悬停...）和所有 JQueryUI 元素声明（.draggable()、.droppable()）时，CPU 利用率仍然存在。

但请记住，视图始终使用 .load() 函数动态加载。仅供参考，我也尝试使用 $.post() 加载我的视图。

我今天早上尝试使用新的 JQuery 版本 1.8.0 和 JQueryUI 1.8.22，但这并没有改变任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:13:16.677

jQuery 使用计时器来管理动画。计时器每 13 毫秒运行一次。

您可以下载开发 jquery 代码，查找“interval: 13”并将其更改为，例如，interval: 150。

**编辑**

从 JQuery 1.4.3 开始，`jQuery.fx.interval`可以操作该属性来调整每秒运行动画的帧数。默认值为 13 毫秒。

[http://api.jquery.com/jQuery.fx.interval/](http://api.jquery.com/jQuery.fx.interval/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T18:05:36.583

您应该在 Internet Explorer 中[分析](http://blogs.msdn.com/b/cbowen/archive/2011/06/27/internet-explorer-9-developer-tools-deep-dive-part-4-profiling-javascript.aspx)您的网站 - 这将使您开始了解 CPU 使用情况。（你要了一个工具。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T07:15:59.430

这可能不是您的情况，因为我不知道您是否正在使用 Sortable，但是；

当我使用 JQueryUI Sortable 处理拖放时，我遇到了与 IE 类似的问题。我在页面上有多个 UL 元素，每个元素都有几个 LI 元素，我在各种 UL 元素之间拖放。

我的大部分开发都是在 Chrome 中完成的，这很好。当我切换到 IE 进行一些测试时，结果如您所述。

碰巧在开发过程中，我在某个时候指定了“connectWith”选项（这样我可以将选定的元素从一个拖到另一个）和“items”选项（这样我可以说元素内的哪些项目应该是可排序的）。

现在，当我通过 JQuery UI 的源代码进行调试时，它在后台进行了大量的 DOM 操作，例如删除和插入节点以及绑定各种事件等等。事实证明，当我在代码中设置了上面提到的两个选项时，JQuery UI 在循环类型的东西中做了某种循环，它设置相同元素的位置和样式的次数是（项目计数 * ConnetWith 计数）。

我在 CSS 中处理了一些样式（非滚动页眉、页脚和侧边栏菜单），并且当 JQuery UI 操作节点时，它导致浏览器执行布局并重新计算样式请求，从而导致重新应用 CSS。我在页面上可见的元素越多，需要布局和样式的元素就越多。当 IE 需要进行大量插入操作时，这可能会成为 IE 上的一个问题，例如表中有大量行，但大多数情况下它并不那么明显。然而，再加上 JQuery UI 处理/循环导致的布局请求几乎呈指数增长，我在 IE 上遇到了一个真正的问题。我使用的是 1920 x 1080 的屏幕，所以在 CPU 停止发疯之前，在一台快速机器上需要大约 40 秒。在其他浏览器上，它只存在大约一秒钟左右。

更改页眉、页脚和侧边栏的样式很有帮助。但对我来说更重要的是，当我从代码外壳中删除“项目”选项时，样式更新循环显着下降，CPU 只是短暂地闪了一下，然后又回到 0-1%。

# c# - 为什么不编译多次使用 PreApplicationStartMethodAttribute？

> ID：11800954
> 
> 赞同：5
> 
> 时间：2012-08-03T18:01:50.563
> 
> 标签：c#, system.web

System.Web.PreApplicationStartMethodAttribute 定义为：

```
[AttributeUsage(AttributeTargets.Assembly, AllowMultiple=true)]
public sealed class PreApplicationStartMethodAttribute : Attribute 
{} 
```

即它允许多次使用（AllowMultiple=true）。但是，如果我尝试将此属性的几种用法添加到我的程序集中：

```
[assembly: PreApplicationStartMethod(typeof(MyType1), "Start")]
[assembly: PreApplicationStartMethod(typeof(MyType2), "Start")] 
```

我得到编译器错误：

> 错误 2 重复的“PreApplicationStartMethod”属性

**为什么是这样？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T18:05:52.147

我怀疑您正在查看[.NET 4.5 版本](http://msdn.microsoft.com/en-us/library/system.web.preapplicationstartmethodattribute%28v=vs.110%29.aspx)，该版本被记录为具有`AllowMultiple = True`.

[.NET 4.0 版本](http://msdn.microsoft.com/en-us/library/system.web.preapplicationstartmethodattribute.aspx)的文档显示为`AllowMultiple = false`：

```
[AttributeUsageAttribute(AttributeTargets.Assembly, AllowMultiple = false)]
public sealed class PreApplicationStartMethodAttribute : Attribute 
```

因此，如果您以 .NET 4.5 为目标，应该没问题。

# javascript - html5 多个 xmlhttprequest 更多响应

> ID：11800955
> 
> 赞同：1
> 
> 时间：2012-08-03T18:01:54.837
> 
> 标签：javascript, html, xmlhttprequest, response

**嗨，大家好！**

我的**HTML5 XMLHttprequest**上传器有点问题。

我从*多个文件输入中读取具有***Filereader**类的文件，然后将一个作为二进制字符串上传。在服务器上，我捕获输入流中的位，将其放入 tmp 文件等。这部分很好。程序正常终止，发送响应，我在标题中看到它（例如使用 FireBug）。但是对于 JS，我只捕获了“ *onreadystatechange* ”中的最后一个。

 **我没有看到所有的回应。为什么？如果有人能解决这个问题，那就太好了:)

你会看到相同的 jQuery 和模板，别担心 :D

*这是JS：*

```
function handleFileSelect(evt)
{
    var files = evt.target.files; // FileList object

    var todo = {
            progress:function(p){
                $("div#up_curr_state").width(p+"%");
                },

            success:function(r,i){

                $("#img"+i).attr("src",r);
                $("div#upload_state").remove();
                },

            error:function(e){
                alert("error:\n"+e);
                }
        };

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {
        // Only process image files.
        if (!f.type.match('image.*')) {
            continue;
        }

        var reader = new FileReader();
        var row = $('ul#image_list li').length;
            row = row+i;
        // Closure to capture the file information.
        reader.onload = (function(theFile,s) {
            return function(e) {
            // Render thumbnail.
            $("span#prod_img_nopic").hide();
            $("div#prod_imgs").show();
            var li = document.createElement('li');
            li.className = "order_"+s+" active";
            li.innerHTML = ['<img class="thumb" id="img'+s+'" src="', e.target.result,
                                '" title="', escape(theFile.name), '"/><div id="upload_state"><div id="up_curr_state"></div>Status</div>'].join('');
            document.getElementById('image_list').insertBefore(li, null);
            };
        })(f,row);

        // Read in the image file as a data URL.
        reader.readAsDataURL(f);

        //upload the data
        //@param object fileInputId     input file id
        //@param int    fileIndex       index of fileInputId
        //@param string URL             url for xhr event
        //@param object todo            functions of progress, success xhr, error xhr
        //@param string method          method of xhr event-def: 'POST'

        var url = '{/literal}{$Conf.req_admin}{$SERVER_NAME}/{$ROOT_FILE}?mode={$_GET.mode}&action={$_GET.action}&addnew=product&imageupload={literal}'+f.type;

        upload(f, row, url, todo);
} 
```

上传功能：

```
function upload(file, fileIndex, Url, todo, method)
 {
        if (!method) {
            var method = 'POST';
        }

        // take the file from the input

        var reader = new FileReader();
        reader.readAsBinaryString(file); // alternatively you can use readAsDataURL
        reader.onloadend  = function(evt)
        {
                // create XHR instance
                xhr = new XMLHttpRequest();

                // send the file through POST
                xhr.open(method, Url, true);

                // make sure we have the sendAsBinary method on all browsers
                XMLHttpRequest.prototype.mySendAsBinary = function(text){
                    var data = new ArrayBuffer(text.length);
                    var ui8a = new Uint8Array(data, 0);
                    for (var i = 0; i < text.length; i++) ui8a[i] = (text.charCodeAt(i) & 0xff);
                    var bb = new (window.MozBlobBuilder || window.WebKitBlobBuilder || window.BlobBuilder)(); 
                    bb.append(data);
                    var blob = bb.getBlob();
                    this.send(blob);
                }

                // let's track upload progress
                var eventSource = xhr.upload || xhr;
                eventSource.addEventListener("progress", function(e) {
                    // get percentage of how much of the current file has been sent
                    var position = e.position || e.loaded;
                    var total = e.totalSize || e.total;
                    var percentage = Math.round((position/total)*100);
                    // here you should write your own code how you wish to proces this
                    todo.progress(percentage);        
                });

                // state change observer - we need to know when and if the file was successfully uploaded
                xhr.onreadystatechange = function()
                {  
                        if(xhr.status == 200 && xhr.readyState == 4)
                        {                                
                            // process success                               
                            resp=xhr.responseText;

                            todo.success(resp,fileIndex);
                        }else{
                            // process error
                            todo.error(resp);
                        }                            
                };

                // start sending
                xhr.mySendAsBinary(evt.target.result);
        };
   }

    }
} 
```

和启动事件

```
document.getElementById('files').addEventListener('change', handleFileSelect, false); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T22:16:01.590

这是一个很小的错误：您忘记添加`var`语句：

```
 // create XHR instance
    var xhr = new XMLHttpRequest();
//  ^^^ add this 
```

使用`readystatechange`像你这样的处理函数

```
function() {  
    if (xhr.status == 200 && xhr.readyState == 4) {       
        resp=xhr.responseText; // also a missing variable declaration, btw
        todo.success(resp,fileIndex);
    } else {
        todo.error(resp);
    }                            
} 
```

仅检查了最新的 xhr 实例的它们`status`以及`readyState`任何请求触发事件时。因此，只有当最后一个 xhr 触发事件本身时，才会执行成功函数。

*解决方案*：修复所有变量声明，我想这不是唯一的（尽管严重影响行为）。您也可以在事件处理程序中使用`this`而不是`xhr`作为对当前实例的引用。`XMLHttpRequest`**

# c# - 在 C# 中使用 ping

> ID：11800958
> 
> 赞同：101
> 
> 时间：2012-08-03T18:02:07.553
> 
> 标签：c#, ping

当我用 windows ping 一个远程系统时，它说没有回复，但是当我用 c# ping 时它说成功。Windows 是正确的，设备未连接。为什么我的代码在 Windows 不通时能够成功 ping？

这是我的代码：

```
Ping p1 = new Ping();
PingReply PR = p1.Send("192.168.2.18");
// check when the ping is not success
while (!PR.Status.ToString().Equals("Success"))
{
    Console.WriteLine(PR.Status.ToString());
    PR = p1.Send("192.168.2.18");
}
// check after the ping is n success
while (PR.Status.ToString().Equals("Success"))
{
    Console.WriteLine(PR.Status.ToString());
    PR = p1.Send("192.168.2.18");
} 
```

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2012-08-03T23:08:51.760

```
using System.Net.NetworkInformation;    

public static bool PingHost(string nameOrAddress)
{
    bool pingable = false;
    Ping pinger = null;

    try
    {
        pinger = new Ping();
        PingReply reply = pinger.Send(nameOrAddress);
        pingable = reply.Status == IPStatus.Success;
    }
    catch (PingException)
    {
        // Discard PingExceptions and return false;
    }
    finally
    {
        if (pinger != null)
        {
            pinger.Dispose();
        }
    }

    return pingable;
} 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-10-17T20:08:30.297

在 C# 中使用 ping 是通过使用方法来实现的，该方法`Ping.Send(System.Net.IPAddress)`对提供的（有效）IP 地址或 URL 运行 ping 请求并获得称为[Internet 控制消息协议 (ICMP) 数据包](https://en.wikipedia.org/wiki/Ping_(networking_utility))的响应。该数据包包含一个 20 字节的标头，其中包含来自接收 ping 请求的服务器的响应数据。.Net 框架`System.Net.NetworkInformation`命名空间包含一个名为的类，该类`PingReply`具有旨在翻译`ICMP`响应并提供有关被 ping 服务器的有用信息的属性，例如：

*   **IPStatus**：获取发送 Internet 控制消息协议 (ICMP) 回显回复的主机的地址。
*   **IPAddress**：获取发送 Internet 控制消息协议 (ICMP) 回显请求并接收相应的 ICMP 回显回复消息所用的毫秒数。
*   **RoundtripTime** *(System.Int64)*：获取用于将回复传输到 Internet 控制消息协议 (ICMP) 回显请求的选项。
*   **PingOptions** *(System.Byte[])*：获取在 Internet 控制消息协议 (ICMP) 回显回复消息中接收到的数据缓冲区。

以下是一个简单的示例，`WinForms`用于演示 ping 在 c# 中的工作原理。通过在 中提供一个有效的 IP 地址`textBox1`并单击`button1`，我们将创建一个`Ping`类的实例、一个局部变量`PingReply`和一个用于存储 IP 或 URL 地址的字符串。我们分配`PingReply`给 ping`Send`方法，然后通过比较回复的状态和属性`IPAddress.Success`状态来检查请求是否成功。最后，我们从`PingReply`我们需要向用户显示的信息中提取，这就是上面描述的。

```
 using System;
    using System.Net.NetworkInformation;
    using System.Windows.Forms;

    namespace PingTest1
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }

            private void button1_Click(object sender, EventArgs e)
            {
                Ping p = new Ping();
                PingReply r;
                string s;
                s = textBox1.Text;
                r = p.Send(s);

                if (r.Status == IPStatus.Success)
                {
                    lblResult.Text = "Ping to " + s.ToString() + "[" + r.Address.ToString() + "]" + " Successful"
                       + " Response delay = " + r.RoundtripTime.ToString() + " ms" + "\n";
                }
            }

            private void textBox1_Validated(object sender, EventArgs e)
            {
                if (string.IsNullOrWhiteSpace(textBox1.Text) || textBox1.Text == "")
                {
                    MessageBox.Show("Please use valid IP or web address!!");
                }
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-31T15:04:20.050

```
Imports System.Net.NetworkInformation

Public Function PingHost(ByVal nameOrAddress As String) As Boolean
    Dim pingable As Boolean = False
    Dim pinger As Ping
    Dim lPingReply As PingReply

    Try
        pinger = New Ping()
        lPingReply = pinger.Send(nameOrAddress)
        MessageBox.Show(lPingReply.Status)
        If lPingReply.Status = IPStatus.Success Then

            pingable = True
        Else
            pingable = False
        End If

    Catch PingException As Exception
        pingable = False
    End Try
    Return pingable
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-24T09:17:40.820

```
private async void Ping_Click(object sender, RoutedEventArgs e)
{
    Ping pingSender = new Ping();
    string host = @"stackoverflow.com";
    await Task.Run(() =>{
         PingReply reply = pingSender.Send(host);
         if (reply.Status == IPStatus.Success)
         {
            Console.WriteLine("Address: {0}", reply.Address.ToString());
            Console.WriteLine("RoundTrip time: {0}", reply.RoundtripTime);
            Console.WriteLine("Time to live: {0}", reply.Options.Ttl);
            Console.WriteLine("Don't fragment: {0}", reply.Options.DontFragment);
            Console.WriteLine("Buffer size: {0}", reply.Buffer.Length);
         }
         else
         {
            Console.WriteLine("Address: {0}", reply.Status);
         }
   });           
} 
```

* * *

## 回答 #5

> 赞同：-11
> 
> 时间：2016-11-03T19:51:39.783

```
private void button26_Click(object sender, EventArgs e)
{
    System.Diagnostics.ProcessStartInfo proc = new System.Diagnostics.ProcessStartInfo();
    proc.FileName = @"C:\windows\system32\cmd.exe";
    proc.Arguments = "/c ping -t " + tx1.Text + " ";
    System.Diagnostics.Process.Start(proc);
    tx1.Focus();
}

private void button27_Click(object sender, EventArgs e)
{
    System.Diagnostics.ProcessStartInfo proc = new System.Diagnostics.ProcessStartInfo();
    proc.FileName = @"C:\windows\system32\cmd.exe";
    proc.Arguments = "/c ping  " + tx2.Text + " ";
    System.Diagnostics.Process.Start(proc);
    tx2.Focus();
} 
```

# extjs4 - 重新调整表单内容的大小以适合浏览器窗口 - 使用卡片布局

> ID：11800960
> 
> 赞同：0
> 
> 时间：2012-08-03T18:02:24.253
> 
> 标签：extjs4, extjs4.1

我需要标签面板来适应浏览器窗口的大小。我用过`card layout`，它没有重新调整大小以适应浏览器窗口。我想我在我的`viewPort`.

```
launch: function() {                           
        Ext.create('Ext.container.Viewport', {    
            layout: 'card',
            items: [  
            { 
                xtype: 'panel',   
                items: { xtype: 'tabP1' } 
            },
            {
                xtype: 'panel',
                items: { xtype:'tabP2' }
            }                
            ,
            {
                xtype: 'panel',
                items: { xtype:'tabP3' }
            }           
            ]
        }); 
    }, 
```

2.) 我的一个标签面板；我正在使用`absolute layout`. 我正在使用这种布局，因为它很容易在我想要的地方设置表单组件。因此，我想要一个适用于相同布局的解决方案。

```
Ext.define('MyApp.view.MyForm', {
    extend: 'Ext.form.Panel',
     alias:'widget.tabP1',
   // height: 250,
   // width: 726,
 layout: {
    type: 'absolute'
},
    bodyPadding: 10,
    title: 'My Form',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'gridpanel',
                    title: 'My Grid Panel',
                    columns: [
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'string',
                            text: 'String'
                        },
                        {
                            xtype: 'numbercolumn',
                            dataIndex: 'number',
                            text: 'Number'
                        },
                        {
                            xtype: 'datecolumn',
                            dataIndex: 'date',
                            text: 'Date'
                        },
                        {
                            xtype: 'booleancolumn',
                            dataIndex: 'bool',
                            text: 'Boolean'
                        }
                    ],
                    viewConfig: {

                    }
                }
            ]
        });

        me.callParent(arguments);
    }

}); 
```

**更新 2**

**更新 2**

```
launch: function() {                           
            Ext.create('Ext.container.Viewport', {    
                layout: 'card',
                items: [  
                { 

                     xtype: 'tabP1'  
                },
                {

                    xtype:'tabP2' 
                }                
                ,
                {

                    xtype:'tabP3' 
                }           
                ]
            }); 
        },

onSuccess: function() {  
     this.getViewport().getLayout().setActiveItem(1); 
    }, 
```

当我使用你的代码时，我得到一个错误，说这`this.getViewport().getLayout().setActiveItem(1)`不是一个函数。我想这是因为我使用了`border layout`. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:12:38.567

您的问题是“过度嵌套”为什么要将“tabPFoo”放在没有布局的面板中？它们充其量是多余的，也会导致布局系统在不需要时花费更多的周期。

```
Ext.require('*');

Ext.onReady(function(){

    var vp = new Ext.container.Viewport({
        layout: 'card',
        items: [{
            xtype: 'grid',
            store: {
                fields: ['name'],
                data: [{
                    name: 'Name 1'
                }]
            },
            columns: [{
                flex: 1,
                dataIndex: 'name',
                text: 'Name'
            }],
            listeners: {
                itemclick: function(view){
                    var grid = view.ownerCt,
                        next = grid.nextSibling();

                    vp.getLayout().setActiveItem(next);
                }
            }
        }, {
            xtype: 'grid',
            store: {
                fields: ['name'],
                data: [{
                    name: 'Name 2'
                }]
            },
            columns: [{
                flex: 1,
                dataIndex: 'name',
                text: 'Name'
            }],
            listeners: {
                itemclick: function(view){
                    var grid = view.ownerCt,
                        next = grid.nextSibling();

                    vp.getLayout().setActiveItem(next);
                }
            }
        }, {
            xtype: 'grid',
            store: {
                fields: ['name'],
                data: [{
                    name: 'Name 3'
                }]
            },
            columns: [{
                flex: 1,
                dataIndex: 'name',
                text: 'Name'
            }],
            listeners: {
                itemclick: function(view){
                    var grid = view.ownerCt,
                        next = grid.previousSibling().previousSibling();

                    vp.getLayout().setActiveItem(next);
                }
            }
        }]
    });

}); 
```

显然这不是 MVC 风格，但这是布局应该采用的结构。

# post - 将文件直接上传到 Amazon S3 的示例/生成器（使用 POST）

> ID：11800962
> 
> 赞同：0
> 
> 时间：2012-08-03T18:02:35.513
> 
> 标签：post, upload, amazon-s3, amazon, generator

是否有工作示例或生成器可以帮助我创建将文件直接上传到 Amazon S3 服务器所需的 HTML 表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:02:35.513

一个将生成有效 HTML 的简单脚本：[https ://github.com/zx/amazon-s3-direct-post-upload](https://github.com/z-x/amazon-s3-direct-post-upload)

您只需要编辑 PHP 文件中的前几行并运行脚本。

# ios - 当 iOS 键盘在控制器之间停留时，如何检测它？

> ID：11800963
> 
> 赞同：2
> 
> 时间：2012-08-03T18:02:36.577
> 
> 标签：ios, keyboard

只是对于初学者：我已经在听键盘会出现/消失/更改通知。他们没有开火。两者都没有出现/消失/改变。

当我将键盘向上推并在顶部推动一个也使键盘向上的控制器时（viewWillAppear 中的-[UITextView becomeFirstResponder]），不会触发任何键盘通知。这是有道理的，因为键盘在这个动画中实际上并没有*移动*，但在这种情况下它肯定是不可取的。

我将如何检测这种情况，和/或在未触发任何通知时如何获取键盘的当前位置？全局共享侦听器是一种选择，但如果可能的话，我更愿意避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:21:48.917

您需要找到 firstResponder，如果它是 UITextField 或 UITextView，则键盘已启动或移动。没有通知意味着它已经启动，所以它的旧框架（相对于窗口）仍然有效。不幸的是，没有简单的方法可以找到第一个响应者。我抓住了一些递归遍历所有当前视图的子视图的代码，寻找它。

编辑：

```
- (UIView *)findFirstResponder
{
    if (self.isFirstResponder) {
        return self;     
    }

    for (UIView *subView in self.subviews) {
        UIView *firstResponder = [subView findFirstResponder];
        if (firstResponder) return firstResponder;
    }
    return nil;
} 
```

# html - HTML表格需要列之间的间距，而不是行

> ID：11800975
> 
> 赞同：77
> 
> 时间：2012-08-03T18:03:47.683
> 
> 标签：html

我有一个 HTML 表格。我需要在表格列之间有间距，但不是表格行。

如果我使用`cellspacing`CSS 属性，它会在行和列之间执行。我也不能在我所做的事情中使用 CSS。我需要使用纯 HTML。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2015-03-24T19:22:29.693

更好的方法是使用 Shredder 的 css 规则：padding: 0 15px 0 15px only 而不是 inline css，定义一个适用于所有 tds 的 css 规则。通过在页面中使用样式标签来做到这一点：

```
<style type="text/css">
  td {
    padding: 0 15px;
  }
</style> 
```

或者给表格一个像“paddingBetweenCols”这样的类，并在网站css中使用

```
.paddingBetweenCols td {
  padding: 0 15px;
} 
```

站点 css 方法定义了一个可以被所有页面重用的中心规则。

如果您使用站点 css 方法，最好定义一个像上面这样的类并将填充应用于该类......除非您希望整个站点上的所有 td 都应用相同的规则。

[使用样式标签的小提琴](http://jsfiddle.net/ordw66Ly/ "使用样式标签")

[使用网站 css 的小提琴](http://jsfiddle.net/q8dh0uh7/ "使用网站 CSS")

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-08-03T18:12:09.433

如果您可以使用内联样式，则可以在每个 . 上设置左右填充`td`。或者您可以在列之间使用额外的`td`并设置多个不间断空格，如@rene 建议的那样。

[http://jsfiddle.net/u5mN4/](http://jsfiddle.net/u5mN4/)

[http://jsfiddle.net/u5mN4/1/](http://jsfiddle.net/u5mN4/1/)

两者都很丑；p css ftw

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-07-09T10:00:20.507

```
<table cellpadding="pixels"cellspacing="pixels"></table>
<td align="position"valign="position"></td> 
```

`cellpadding`="length in pixel" ~`<table>`标签中使用的 cellpadding 属性指定在每个表格单元格的内容与其各自的边框之间显示多少空白空间。该值定义为以像素为单位的长度。因此，一个`cellpadding="10"`属性值对将在该表中每个单元格内容的所有四个边上显示 10 个像素的空白区域。

`cellspacing`="length in pixel" ~ 也用在`<table>`标签中的 cellspacing 属性定义了在相邻表格单元格之间以及表格单元格和表格边框之间显示多少空白空间。该值定义为以像素为单位的长度。因此，一个`cellspacing="10"`属性值对将水平和垂直分隔相应表格中的所有相邻单元格，长度为 10 个像素。它还将所有单元格从表格框架的所有四个边偏移 10 个像素的长度。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-01-18T17:24:05.697

在大多数情况下，最好仅在右侧填充列，以便仅填充列之间的间距，并且第一列仍与表格对齐。

CSS：

```
.padding-table-columns td
{
    padding:0 5px 0 0; /* Only right padding*/
} 
```

HTML：

```
<table className="padding-table-columns">
  <tr>
    <td>Cell one</td>
     <!-- There will be a 5px space here-->
    <td>Cell two</td>
     <!-- There will be an invisible 5px space here-->
  </tr>
</table> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-09-30T17:15:52.780

这可以通过使用 CSS 在列*之间放置填充来实现。*您可以在除第一列之外的所有列的左侧添加填充，也可以在除最后一列之外的所有列的右侧添加填充。您应该避免在最后一列的右侧或第一列的左侧添加填充，因为这会插入多余的空白。您还应该避免对类过于规范，以指定哪些列应该具有额外的填充，因为如果您稍后添加新列，这将使维护变得更加困难。

' [lobotomised owl selector](https://css-tricks.com/lobotomized-owls/)`th` ' 允许您选择所有兄弟姐妹，无论它们是`td`还是其他。

```
tr > * + * {
  padding-left: 4em;
}
```

```
<table>
  <thead>
    <tr>
      <th>Column 1</th>
      <th>Column 2</th>
      <th>Column 3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Data 1</td>
      <td>Data 2</td>
      <td>Data 3</td>
    </tr>
  </tbody>
</table>
```

# php - 每行一个句子的正则表达式

> ID：11800976
> 
> 赞同：-2
> 
> 时间：2012-08-03T18:04:00.790
> 
> 标签：php, regex

我正在尝试获取文本区域值并通过正则表达式运行它以将其拆分为行。

所以如果有人写了一行然后输入另一行并输入 i 将有一个数组，每个数组值的每一行

到目前为止我想出的表达是：

```
 (.+?)\n|\G(.*) 
```

这就是我使用它的方式（来自我用来测试表达式的网站[http://myregextester.com/](http://myregextester.com/)）

```
 $sourcestring="
 this is a sentense yeaa
 interesting sentense
 yet another sentese
 ";
 preg_match_all('/(.+?)\n|\G(.*)/',$sourcestring,$matches);
 echo "<pre>".print_r($matches,true); 
```

但是，数组中有 1 个对象始终为空，我正试图找到一种方法来摆脱它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:05:20.007

您不需要正则表达式，只需使用[`explode()`](http://php.net/explode)，如下所示：

```
$lines = explode( "\n",  trim( $input)); 
```

现在用户的每一行都`$input`将是`$lines`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:08:04.913

这将完成并摆脱数组开头和结尾的空行

```
explode("\n", trim($sourcestring)); 
```

参见示例：http: [//viper-7.com/pNqtvV](http://viper-7.com/pNqtvV)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:09:18.637

有各种类型的换行符。在 HTML 表单上下文中，您通常会收到`CR` `LF`行尾。一个愚蠢的爆炸会做，但如果你使用正则表达式会捕获所有变化`\R`。因此`\r\n`and `\n`or `\r`and others 将由以下人员处理：

```
 $lines = preg_split(':\R:', $text); 
```

[`preg_split()`](http://php.net/preg_split)相当于 PHP 的explode()。所以你不需要使用`preg_match_all`.

# entity-framework - 从 EF 存储库创建 MVCController 的模式

> ID：11800985
> 
> 赞同：0
> 
> 时间：2012-08-03T18:05:01.903
> 
> 标签：entity-framework, asp.net-mvc-4, asp.net-mvc-controller

[这篇博客文章标题为：'[将多个 Include 语句传递到存储库](http://www.appetere.com/Blogs/SteveM/May-2012/Passing-Include-statements-into-a-Repository)中'提供了一个很好的概述，介绍了在水合基于 EF dbContext 的对象时如何控制加载的子项的深度。用 Linq 表达式提供存储库的一个非常好的解释。

但是该博客留下了一个问题，该问题将通过解释控制器本身的外观来真正完善所涉及的工作流程。

如果瘦控制器通常被认为是一件好事，并且如果 EF 正在成熟到主流使用的程度，那么在存储库和控制器之间最好的调解模式是什么？

乔治更好地表达了这个问题：

> 这是完美的，但是如何编写控制器来处理对象及其子对象希望被请求的所有不同方式？是创建 CustomerOrderController 和 CustomerOrderLineItemsController 的问题吗？

注意：[此链接是由 SO 自动提供的](https://stackoverflow.com/questions/11613268/generate-repositories-from-ef-code-first-with-created-dbcontext-model-classes)，可能涉及“*如何执行*”-我仍然需要对要使用的语法进行概述。

关注

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:13:51.540

您是否考虑过使用[通用存储库](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)？

在实现工作单元模式方面，这篇文章比你想要的更进一步。您的标签包括 MVC，因此我建议您使用它来帮助保持所有存储库和对象同步。

然后，在控制器中的操作中，您可以选择需要包含哪些属性：

```
 private UnitOfWork _unitOfWork;

        public YourController()
        {
            _unitOfWork = new UnitOfWork();
        }
        //
        // GET: /Market/
        public ActionResult Index()
        {
            return View(_unit.YourRepository.Get(m => m.IsActive, null, "CollectionToLoad1,CollectionToLoad2"));
        } 
```

在此示例中，我将获取具有 IsActive 位的每个项目为真，包括 CollectionToLoad1 和 CollectionToLoad2

如果你不想实现一个工作单元，你可以简单地在控制器而不是单元中声明 repo，然后直接调用。

# css - 由文本后面的 div 突出显示

> ID：11800986
> 
> 赞同：3
> 
> 时间：2012-08-03T18:05:07.697
> 
> 标签：css, html, dom, z-index

我想`div`通过 z-index* 将 a 悬停在文本后面来突出显示文本。如果包含文本的元素没有背景，它可以正常工作：

![在此处输入图像描述](../Images/60444783ec0a90a1cf83df7c2e23895b.png)

但是，如果元素有`background`or `background-color`，则它不起作用，因为背景会阻挡它后面的 div 的视图：

![在此处输入图像描述](../Images/a16b1ab253d0642c3c46e4a55cb498aa.png)

当然，我可以让 div 位于顶部，但这看起来很糟糕，因为它会为文本本身着色：

![在此处输入图像描述](../Images/29bef351368cee8b0b409864f923c925.png)

[您可以在此处](http://jsfiddle.net/paleozogt/V3Kae/)使用 jsfiddle 看到这个问题。我的问题是：我怎样才能`div`在文本*后面*但在背景*之上*？

* * *

* 为什么我`span`不像[其他人](https://stackoverflow.com/questions/5149542/pretty-html-highlighting-using-span)那样使用？因为有了`div`我可以为突出显示从一个词到另一个词的移动设置动画。这也在 jsfiddle 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:18:43.143

[http://jsfiddle.net/V3Kae/9/](http://jsfiddle.net/V3Kae/9/) 你可以这样做。将容器的 z-index 设置为低于高亮，文本的 z-index 设置为高于高亮。

# php - 用 PHP 动态改变页面的标题

> ID：11800988
> 
> 赞同：-3
> 
> 时间：2012-08-03T18:05:10.460
> 
> 标签：php

我有一个博客，我希望 HTML 文档的 head 部分中的标记使用 PHP 动态更改。这是我的PHP代码：

```
<?php 
    session_start();
if(isset($_SESSION['admin']) and !empty($_SESSION['admin'])){

    echo '<a href="logout.php" style="color:yellow;">Logout</a>';

}

    require('mysql2.php');

        //Displaying the information from the DB to the user
        //with pagination, i.e different pages

            function post(){

            $sp_query = mysql_query("SELECT COUNT(id) FROM posts");
            $pages = ceil(mysql_result($sp_query, 0) / 1);

        $page = (isset ($_GET['page'])) ? (int)$_GET['page'] :     1;   

            $start = ($page - 1) * 1;

            $query = mysql_query("SELECT id,title, article, datetime  

  FROM posts ORDER BY id DESC LIMIT $start, 1 ");

            //Check if there are any rows in the DB
                    if(mysql_num_rows($query)){

                while($result = mysql_fetch_assoc($query)){

            //displaying the results

                        echo '<article class="blog-post">
                        <div class="blog-info">

 '.stripslashes($result['title']).'  ';

                        echo  

 stripslashes($result['datetime']).'<div>';

                        echo 

 nl2br(stripslashes($result['article'])).'</article>';

                        $title[] = $result['title'];

                        $id = 

mysql_real_escape_string((int)$result['id']);
                        echo '<input type="hidden" 

value="'.$result['id'].'" />';
                        $_SESSION['post_id'] = $id;

            //If the admin is logged in, session variables
            //for editing and deleting a post must be set
            //and the conforming links should be displayed

                        if(isset($_SESSION['admin']) and 

 !empty($_SESSION['admin'])){

//$_SESSION['post_id'] = $id;

                        $_SESSION['edit_post'] = $id;

                        echo '<article class="blog-post">';
                            echo '<a href="delete.php" 

  id="delete" onclick="return del();">Delete this post</a>';
                            echo '<br /><a 

   href="edit_post.php">Edit this post</a>';
                        echo '</article>';
                }
                }   
                }

        //The drop down menu 

            function options(){

                $new_query = mysql_query("SELECT title FROM posts 

 ORDER BY id DESC");
            $num = 1;
                while($array = mysql_fetch_assoc($new_query)){

                    echo '<option 

  value="blog.php?page='.$num++.'">'.$array['title'].'</a></option>';

                }
            }

        ?> 
```

这是HTML：

```
 <?php require('mysql2.php');
    require('blog_process.php');
        ?>

 <!DOCTYPE html>
  <html>
  <head>
    <!--Meta Data-->
    <meta charset="utf-8">
    <meta name="description" content="About Chris Shilts">
    <meta name="author" content="Chris Shilts">
    <meta name="keywords" content="chris, shilts">
    <meta name="viewport" content="width=device-width, initial-scale=1,    

               maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <!--css-->
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">

    <!-- Javascript -->
    <script type="text/javascript" src="delete.js"></script>
    <!-- Favicons-->
    <link rel="shortcut icon" href="favicon.ico">
    <!--Title-->

    <title id="title"><?php //php code should go here?></title>

</head>
<body>
    <!--Contains all content-->
    <div id="container">
        <!--Content at start of page, generally the same-->
        <header>
            <div id="logo">
            Hello There!
            </div>
            <!--Primary Navigation-->
            <nav>
            <a href="#">Link</a>
            <a href="#">Link</a>
            <a href="#">Link</a>
            </nav>
        </header>

        <!--Blog Posts-->

        <?php post();?>

    <!-- The navigation bar for the blog posts -->

   <select onclick="navigation();" id="select">

    <option value="" selected="selected"></option>

    <?php options(); ?>

    </select>

        <!--First Footer-->
        <footer id="footer-one">
        Site Design By <a href = "#">Chris Shilts</a> | Programming by   

    <a     href = "#">Stefany Dyulgerova</a>
        </footer>
        <!--Second Footer-->
        <footer id="footer-two">
            <a href="http://www.w3.org/html/logo/">
            <img id="html5" src="http://www.w3.org/html/logo/badge 

   with CSS3 / Styling">
            </a>
        </footer>

        <!--/container-->
    </div>
</body>
</html> 
```

我也有一个 mysql 数据库，这里是那里的字段：

```
id title article dateime 
```

请帮我！

我试图将 $result['title'] 放入这样的数组中

```
$title[] = $result['title']; 
```

然后根据 $_SESSION['post_id'] 中的 id 在元素中循环它，但问题是我必须重新加载页面两次才能使标题生效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:09:06.053

Trying to save the blog title in an array isnt't work for you because the $title variable is only accessible within the post function.

You could have post return the $title array...

```
//initialize the array at the beginning of the post function like so
$title = array();

//return the array at the end of the function like so
return $title; 
```

Then in the page, you'd replace

```
<?php post();?> 
```

With

```
<?php $title = post();?> 
```

However, You need $title BEFORE you the call to post. So that won't really help you.

I would suggest...

1) Create a Class Object with a global title variable. Have an initialize function to handle the database call. Then make post a function on the class that prints out the page HTML.

2) Create a title function that returns the correct page title and call it like so..

```
<title id="title"><?php get_page_title(); ?></title> 
```

Update:

In your php file add the following function after the options function:

```
public function get_page_title() {
    //add code to get the page title
    // not sure what title you want since you are showing multiple posts on one page
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:49:07.813

这是需要修复的代码片段：`<title id="title"><?php echo $result['title']; ?></title>`

如果有一个标题，这将起作用，否则取第一个：`<title id="title"><?php echo $result['title'][0]; ?></title>`

# javascript - 在 jQuery Mobile 中使用 pageInit() 初始化代码

> ID：11800999
> 
> 赞同：0
> 
> 时间：2012-08-03T18:05:58.783
> 
> 标签：javascript, jquery, jquery-mobile, this, page-init

我正在尝试使用 pageInit() 函数为 jQuery 移动页面初始化 javascript。我在下面概述了一些我似乎无法工作的尝试。谁能告诉我我做错了什么。还有没有办法使用 $(this) 而不是使用页面显式名称来做到这一点？

pageInit.html：

```
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css"
    />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://jqueryui.com/ui/jquery-1.7.1.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script>
    <script src="http://jqueryui.com/ui/jquery.ui.core.js"></script>
    <script src="http://jqueryui.com/ui/jquery.ui.widget.js"></script>
    <script src="http://jqueryui.com/ui/jquery.ui.position.js"></script>
    <script src="http://jqueryui.com/ui/jquery.ui.autocomplete.js"></script>
    <script src="http://code.jquery.com/ui/1.8.20/jquery-ui.min.js"
    type="text/javascript"></script>
    <script src="functions.js"></script>
</head>

<body>
    <script>
        alert("script");
        $(this).live('pageinit', function (event) {
            //$('pageInit.html').live( 'pageinit',function(event){
            //$('#pageInit').live( 'pageinit',function(event){
            //$('#pageInit.html').live( 'pageinit',function(event){
            alert("Page Initialized");
        });
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:11:21.513

该`pageinit`事件在文档上触发。使用 也没有意义`live`。相反，我会使用`bind`. 例如：

```
$(document).bind('pageinit', function (event) {
        alert("Page Initialized");
    }); 
```

查看[jQuery 移动文档](http://jquerymobile.com/test/docs/api/events.html)以获取更多信息。