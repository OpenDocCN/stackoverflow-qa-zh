# StackOverflow 问答 11170000-11170999

# objective-c - 我将如何从用户输入的 NSString 创建我的类的新对象

> ID：11170008
> 
> 赞同：0
> 
> 时间：2012-06-23T13:47:45.820
> 
> 标签：objective-c

我想使用 NSString 形式的用户输入名称来创建我的类的新实例。我见过 NSClassFromString 但我不明白。我的最终目标是让用户输入费用的名称，然后使用输入的名称（存储在 NSString 变量中）创建我的类的新实例。然后用户将输入更多内容来设置新对象的实例变量。

这一切都将在一个循环中，用户将能够根据需要创建任意数量的新对象，并且这些对象将存储在一个数组中以供以后存储和使用。但我坚持如何动态创建我的类的新实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:21:44.983

你想创建什么样的对象？你总是想创建同一种对象，还是想让用户输入对象类型，然后创建那个类型的对象？

如果您想始终创建相同类型的对象并将其中一个属性设置为用户输入的字符串，这很容易。

将 UITextField 和按钮添加到视图控制器。在按钮的操作方法中，从文本字段中获取文本值，并使用它来设置对象中的文本：

```
MyObject *anObject = [[MyObject alloc] init];
anObject.stringProperty = theTextField.text; 
```

如果您希望用户能够输入类名，请不要。那太脆弱了。用户可以很容易地为一个类输入一个类名，这会导致您的应用程序出现意外行为，甚至崩溃。为此，您将使用 NSClassFromString，但让用户指定类名是一个非常糟糕的主意。不要这样做。

相反，让用户从不同选项列表中选择（使用按钮、表格视图、步进器或其他东西），然后使用 switch 语句创建请求类型的新对象。对于用户可以创建的每种受支持的对象类型，您都有一个案例。

# c++ - OpenCL 速度和浮点精度

> ID：11170012
> 
> 赞同：3
> 
> 时间：2012-06-23T13:48:09.487
> 
> 标签：c++, windows, opencl, x86-64, floating-point-precision

我刚刚开始使用 OpenCL。但是，我发现 OpenCl 的一些奇怪行为，我无法理解。我构建和测试的源代码是[http://www.codeproject.com/Articles/110685/Part-1-OpenCL-Portable-Parallelism](http://www.codeproject.com/Articles/110685/Part-1-OpenCL-Portable-Parallelism)。我有一个 ATI Radeon HD 4770 和一个 AMD Fx 6200 3.8 ghz 6 核 cpu。

## 速度

首先，速度与最大工作组项目的数量不成线性关系。我运行 App Profiler 来分析内核执行期间花费的时间。结果有点令人震惊，我的 GPU 每组只能处理 256 个工作项，用了 2.23008 毫秒来计算 5079040 个数字的平方。请注意，这是没有考虑内核加载时间...

但是，我的 cpu 每组可以处理 1024 个工作项，使用 13.41895 毫秒来计算数字。我认为工作组中的工作项是同时运行的，换句话说，cpu 应该更快。我想知道，工作组是否同时运行？就像，在我的设置中，GPU 会比 CPU 同时运行更多的工作组。

另一个因素可能是 GPU 计算浮点运算的速度更快，但我的 cpu 的时钟速度快了 4 倍，所以还是很奇怪。我知道通常 GPU 在屈服于 opencl 时应该更快，但我想要一个很好的解释为什么。

编辑：我尝试计算 1024、2048...5120 个工作项，现在 cpu 比 GPU 快。所以我了解到 CPU 在工作时间少的情况下工作得更好，而 GPU 在工作项目很多时效果最好。

我还看到，我的 CPU 在工作组大小（4096、6144、8192）的三倍时计算速度要慢得多。所以看起来我的 CPU 同时占用了三个工作组。

## 浮点精度

问题移至此处： [OpenCL 浮点精度](https://stackoverflow.com/questions/11176990/opencl-floating-point-precision)

提前感谢所有答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:11:36.203

> 我想知道，工作组是否同时运行？就像，在我的设置中，GPU 会比 CPU 同时运行更多的工作组。

这个问题有一个很好的答案：[OpenCL 工作项是否并行执行？](https://stackoverflow.com/questions/8980044/are-opencl-work-items-executed-in-parallel)

# excel - 如何用R计算相关系数？

> ID：11170013
> 
> 赞同：-3
> 
> 时间：2012-06-23T13:48:16.130
> 
> 标签：excel, r, correlation

> **可能重复：**
> [r 中的相关矩阵](https://stackoverflow.com/questions/10680658/correlation-matrix-in-r)

我有一个 700 列和 25 行的 Excel 表。我的文件示例如下所示。我想计算 A1 和 A700、A2 和 A700、A3 和 A700、A4 和 A700 等之间的相关系数。用 R 最简单的方法是什么？

```
 A1     A2     A3     A4   ---- --- A700

 A    2.7     5       4     34             34
 B    5.67   7.8      6     45            25.6
 C    2.3    -9      12.5   13            2.8
 D    5.6    6       -56    2.5          -66.7
 E    7.8    5       20     6.7          -56.8 
--
--
--
-- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T13:51:41.670

看看`?cor`。

例如：

```
m <- matrix(rnorm(100), nrow=10)
cor(m) 
```

为您提供所有相关性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T14:00:38.520

这可能会奏效：

```
table <- read.xls(file)
x <- table[1:699]
y <- table[700]
cor(x, y) 
```

# android - 实现 AChartEngine 的折线图

> ID：11170017
> 
> 赞同：0
> 
> 时间：2012-06-23T13:48:57.247
> 
> 标签：android, achartengine

我正在尝试使用文件中保存的值绘制折线图。我对 AChartEngine 网站上提供的原始演示代码进行了轻微更改以应用我的。但是，有一个我无法理解的错误。请给我一些帮助。

有错误的主代码：'setChartSettings(...);' 显示错误消息。（缺少许多语法错误和返回类型的方法）

```
public class WeightGraph extends AbstractDemoChart {
     ...
    double[] values = getValue();
    int color =  Color.BLUE;
    PointStyle style = PointStyle.CIRCLE;
    XYMultipleSeriesRenderer renderer = buildRenderer(color, style);
    setChartSettings(renderer, "Weight", "Time", "Weight(kg)", 0, 10, 30, 70, Color.LTGRAY, Color.LTGRAY);
    renderer.setXLabels(12);
    renderer.setYLabels(10);
    renderer.setShowGrid(true);
    renderer.setXLabelsAlign(Align.RIGHT);
    renderer.setYLabelsAlign(Align.RIGHT);
    renderer.setZoomButtonsVisible(true);

    Intent intent = ChartFactory.getLineChartIntent(context, buildDataset(titles, x, values),
        renderer, "Average temperature");
    return intent;
  }

/*AbstractDemoChart Class, which the code above has extended:*/
 public abstract class AbstractDemoChart implements IDemoChart {
 ...
 protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,
      String yTitle, double xMin, double xMax, double yMin, double yMax, int axesColor,
      int labelsColor) {
    renderer.setChartTitle(title);
    renderer.setXTitle(xTitle);
    renderer.setYTitle(yTitle);
    renderer.setXAxisMin(xMin);
    renderer.setXAxisMax(xMax);
    renderer.setYAxisMin(yMin);
    renderer.setYAxisMax(yMax);
    renderer.setAxesColor(axesColor);
    renderer.setLabelsColor(labelsColor);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:55:24.257

嗨，首先创建一个新的活动作为 WeightGraph 并使用一些布局设计你的 line.xml 文件。然后使用下面的代码。你会得到结果。

```
 public class WeightGraph extends Activity 
 {
   public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.line);
        LinearLayout line_chart_layout;
        line_chart_layout = findViewById(R.id.line_chart);

        .................             

        double[] values = getValue();
        int color =  Color.BLUE;
        PointStyle style = PointStyle.CIRCLE;
        XYMultipleSeriesRenderer renderer = buildRenderer(color, style);
        setChartSettings(renderer, "Weight", "Time", "Weight(kg)", 0, 10, 30, 70,     Color.LTGRAY, Color.LTGRAY); 
        renderer.setXLabels(12);
        renderer.setYLabels(10);
        renderer.setShowGrid(true);
        renderer.setXLabelsAlign(Align.RIGHT);
        renderer.setYLabelsAlign(Align.RIGHT);
        renderer.setZoomButtonsVisible(true);

        line_chart_layout.addView(ChartFactory.getLineChartIntent(context, ui  ldDataset(titles, x, values), renderer, "Average temperature"));

    }
    protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,String yTitle, double xMin, double xMax, double yMin, double yMax, int axesColor,int labelsColor) 
    {
       renderer.setChartTitle(title);
       renderer.setXTitle(xTitle);
       renderer.setYTitle(yTitle);
       renderer.setXAxisMin(xMin);
       renderer.setXAxisMax(xMax);
       renderer.setYAxisMin(yMin);
       renderer.setYAxisMax(yMax);
       renderer.setAxesColor(axesColor);
       renderer.setLabelsColor(labelsColor);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T05:46:08.637

```
ArrayList<Integer> z = new ArrayList<Integer>();
        // int z[]={0,1,2,3,4,5,6,7};

        List<Double> values_len = new ArrayList<Double>();
        List<Double> values = new ArrayList<Double>();

        XYSeries xSeries = new XYSeries("");

            for (int i = 0; i < yaxes_value.size(); i++) {
                values.add((double) Long.parseLong(yaxes_value.get(i)));
                xSeries.add(i+1, values.get(i));
            }

        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        dataset.addSeries(xSeries);

        XYSeriesRenderer Xrenderer = new XYSeriesRenderer();
        Xrenderer.setColor(Color.parseColor("#99CC33"));
        Xrenderer.setPointStyle(PointStyle.CIRCLE);
        Xrenderer.setShowLegendItem(true);
        Xrenderer.setDisplayChartValues(false);
        Xrenderer.setChartValuesSpacing(25);
        Xrenderer.setChartValuesTextSize(25f);
//      Xrenderer.setChartValuesTextAlign(Align.LEFT);
        Xrenderer.setPointStrokeWidth(10);
        Xrenderer.setDisplayChartValuesDistance(10);
        Xrenderer.setLineWidth(2);

        XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();

        mRenderer.setChartTitle("Simple Line Chart");
        mRenderer.setXTitle(X_title);
        mRenderer.setYTitle(Y_title+type);
        mRenderer.setMargins(new int[] { 50, 100, 40, 20 });// TOP,LEFT,BOTTOM,RIGHT
        mRenderer.setYLabelsPadding(2);
        mRenderer.setXLabelsPadding(15);
        mRenderer.setXLabelsAngle(335);
        mRenderer.setYAxisMin(0);
//      mRenderer
//              .setYAxisMax((Collections.max(values)) + (Collections.min(values)));
        mRenderer.setXAxisMin(-1);

        mRenderer.setLabelsTextSize(20);
        mRenderer.setYLabelsAlign(Align.RIGHT);
        mRenderer.setXLabelsAlign(Align.CENTER);
        mRenderer.setChartValuesTextSize(20);
        mRenderer.setDisplayValues(true);
        mRenderer.setMarginsColor(Color.WHITE);
        mRenderer.setLegendTextSize(20);
        mRenderer.setAxesColor(Color.BLACK);
        mRenderer.setYLabelsColor(0, Color.BLACK);
        mRenderer.setXLabelsColor(Color.BLACK);
        mRenderer.setLabelsColor(Color.BLACK);
        mRenderer.setZoomButtonsVisible(false);
        mRenderer.setChartTitleTextSize(20);
        mRenderer.setAxisTitleTextSize(25);
        mRenderer.setXLabels(0);
        mRenderer.setYLabels(10);
        mRenderer.setShowLabels(true);
        mRenderer.setPanEnabled(false);
        mRenderer.setPanEnabled(false, false);
        mRenderer.setZoomEnabled(false, false);
        mRenderer.setZoomEnabled(false);
        mRenderer.setGridColor(Color.BLACK);
        mRenderer.setShowGrid(true);
        mRenderer.setApplyBackgroundColor(true);
        mRenderer.setBackgroundColor(Color.WHITE);

        for (int i = 0; i < Xaxes_value.size(); i++) {
            mRenderer.addXTextLabel(i + 1, Xaxes_value.get(i));
        }

        for (int i = 0; i < z.size(); i++) {
            mRenderer.addXTextLabel(i, Xaxes_value.get(i));
        }
        mRenderer.addSeriesRenderer(Xrenderer);

        GraphicalView mChart = (GraphicalView) ChartFactory.getLineChartView(
                getBaseContext(), dataset, mRenderer);

        line_chart_layout.addView(mChart); 
```

# android - 如何在android中分离布局

> ID：11170020
> 
> 赞同：0
> 
> 时间：2012-06-23T13:49:28.640
> 
> 标签：android, android-layout

我不确定如何正确描述我的问题。我的布局包含一个带有线性布局的顶部菜单，下面是一个用滚动视图包裹的表格布局。我的问题是当我向上滚动时，内容表格布局向上移动并阻止顶部菜单视图。所以有人知道如何解决这个问题，请指出我。谢谢

这是我的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/menu_bar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:background="@drawable/menu_bar" >

    </LinearLayout>

    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scrollbars="none" >

        <TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/myTableLayout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="140dp"
            android:stretchColumns="1" >
        </TableLayout>
    </ScrollView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:52:31.737

您必须将 ScrollView 设置在 LinearLayout 下方，否则它会堆叠在上面。

希望这可以帮助！

# ios - IOS - 当我创建一个新的 Objective C 类时，检查“为 iPad 制造”选项会做什么？

> ID：11170021
> 
> 赞同：1
> 
> 时间：2012-06-23T13:49:41.363
> 
> 标签：ios

我正在制作一个新的 Objective C 类，它提供了两个选项作为复选框：

1）针对iPad 2）制作XIB接口

如果我想制作一个可以在 iphone 和 ipad 上运行的应用程序怎么办？我可以这样做还是我基本上需要重新做应用程序，所以如果我先在手机上测试它，我不应该选中那个框？或者那个盒子只会让东西与 iPad 兼容？

此外，对于 XIB 界面 - 我可以在其中放置 ui 元素，对吗？但是我可以将 UI 元素放在故事板上的按钮上吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T14:00:21.497

据我所知，它将为 iPhone 和 iPad 屏幕尺寸创建 XIB 文件。

您不需要制作 2 个应用程序，您可以为这两个应用程序使用 1 个应用程序逻辑，只需更改视图即可。

**几条笔记**

1.  这是 MVC 很重要的一个地方。
2.  在 xcode 的项目摘要中，您应该将应用程序标记为通用。
3.  可以帮助您的其他几行是：

    ```
    + (BOOL)isDeviceAniPad {
        #ifdef UI_USER_INTERFACE_IDIOM
          return (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad);
        #else
          return NO;
        #endif
     } 
    ```

当您的代码需要对 iPhone 和 iPad 执行不同的操作时，您可以使用此代码检查用户设备。

另一种选择是创建 2 个目标 - 一个用于 iPad，一个用于 iPhone，并让目标共享相同的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T13:56:30.283

是的，XIB 界面（如情节提要）是您可以交互删除 UI 元素的地方。XIB 是情节提要的更原始版本（随 iOS 5 提供），但与此同时，如果您正在处理一个项目，其中有很多人和开发人员在一个项目上工作，或者有很多屏幕和视图控制器（其中将制作一个非常庞大且笨拙的故事板），坚持使用 xib 文件可能是值得的。

如果您选择“以 iPad 为目标”，您可能只能获得适合 iPad 大小屏幕的情节提要。

如果您选择“制作 XIB 界面”，您的新类将使用 xib 文件而不是情节提要。

# c++ - 输入和输出带二进制的多维向量

> ID：11170022
> 
> 赞同：0
> 
> 时间：2012-06-23T13:50:02.067
> 
> 标签：c++, file, stl, input

我正在尝试为我的游戏中的地图创建一个简单的类。地图是由“平铺”结构组成的二维向量。我正在尝试找出按行输入/输出这些图块的最佳方法。

例如，我曾经使用基于 .txt 的加载格式。.txt 文件如下所示：

```
1 0 2 0 0 0 2 4 5 6 3 
2 4 5 0 0 0 2 0 0 3 4
0 3 5 2 5 3 0 5 5 3 4
0 2 0 5 0 6 0 5 7 8 4 
```

然后我会逐行查找每个图块的 ID 整数。1 代表草，0 代表水，依此类推。当解析器到达一行的末尾时，它会跳到下一行整数。

现在我试图通过 fwrite 和 fread 使用二进制文件和结构而不是整数来做到这一点。我该怎么做呢？我所看到的只是如何将结构数组存储在二进制文件中，而不是如何存储多维结构数组。有任何想法吗？

**编辑：** 是的，我可以只将 2D 矢量存储在文件中，但这不允许我进行我需要的无缝地图加载。我有大型地图文件，因此一次加载 100k 瓷砖会占用 CPU。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:01:01.530

如果您希望您的地图是人类可读的，您需要编写一个解析器。

但是，如果您不在乎，您应该做一些完全不同的事情：使用序列化，例如来自[Boost](http://www.boost.org/doc/libs/1_49_0/libs/serialization/doc/index.html)。

您的情况的第三种选择（在游戏中很常见）是将地图存储为图像文件。然后，您可以在您最喜欢的图像处理程序中编辑地图，并且您的程序很容易解释它。许多库可以为您读取图像数据（并将其作为二维数组呈现给您），并且在游戏中您可能已经有了类似的东西。

# camera - 如何使用佳能相机sdk在佳能相机上启用AEB（自动包围曝光）？

> ID：11170023
> 
> 赞同：1
> 
> 时间：2012-06-23T13:50:17.073
> 
> 标签：camera, edsdk

我正在使用最新的佳能 sdk 版本 2.11。我想在手动拍摄模式下设置自动曝光包围。不幸的是没有运气。

我可以看到 kEdsPropID_AEBracket 属性，但不知道应该使用什么参数值来设置级别。

有人知道在佳能相机中设置AEB很热吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:02:05.087

我不相信您可以在手动模式下使用自动包围曝光。在这种模式下，您必须手动指定所有参数。要使用自动包围曝光，您需要处于完整程序模式或光圈/快门优先模式。

# iphone - NSArray 不迭代

> ID：11170026
> 
> 赞同：0
> 
> 时间：2012-06-23T13:50:33.830
> 
> 标签：iphone, objective-c, for-loop, int

我正在尝试`NSArray`使用 for 循环遍历一个。结果仅返回数组中的最后一个值，即使 int 变量`i`打印正确（0,1,2...）。

另外，如果我将迭代设置为`5`，我将得到数组中的第 6 个对象，这是正确的。我这样做是为了缩小可能原因的范围。

有任何想法吗？

```
int i;
int j;
Buffer *vocalBuffer; 
for (i=0; i < numberOfBuffers; i++){ // loop through every vocal buffer

    Buffer *mixedBuffer = [[Buffer alloc] init];
    int array[sizeLoopBuff];
    mixedBuffer.buffer = array;
    mixedBuffer.numFrames = sizeLoopBuff;
    NSLog(@"Vocal buffer number --> %i", i);
    NSInteger iteration = i;
    vocalBuffer = [arrayOfVocalBuffers objectAtIndex:iteration]; // grab the vocal buffer

    for (j=0; j < sizeLoopBuff; j++){ // run through a beat loop cycle.
        mixedBuffer.buffer[j] = loopBuffer.buffer[j]; // add the beats to return buffer.
        if (j > insertPoint && j < insertPoint+ vocalBuffer.numFrames){
            mixedBuffer.buffer[j] = loopBuffer.buffer[j] + vocalBuffer.buffer[j-insertPoint];
        }
    }
    [mutArray addObject:mixedBuffer];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:00:54.263

正如评论中所指出的，使用指向堆栈存储的指针存在一些问题。一个是当它在范围内时，它的内容会被循环中的每次使用覆盖；具有指向它的指针的单个对象没有唯一的副本。

另一个问题是，一旦方法返回并且不需要它的堆栈空间（就运行时而言），就无法预测该空间将做什么。

每个对象都有一个唯一缓冲区的必要行为表明，对象应该在创建时动态分配自己的缓冲区。

# css - 适用于所有屏幕尺寸的 css

> ID：11170028
> 
> 赞同：0
> 
> 时间：2012-06-23T13:51:03.870
> 
> 标签：css, resize

我想用一个按钮输入两个输入，让用户输入他们的用户名和密码，我正在使用这个 css 代码来控制我网站中的输入标签，以便在所有屏幕尺寸上正确显示它，它工作正常。

```
.controller {
 width: 98%;
 margin: 0;
 padding: 7px 5px 4px;
 color: #555;
 font-size: 18px;
 font-family: inherit;
 border-style: solid;
 border-width: 0 1px 1px 0;
    } 
```

我想要一些动态文本，这些文本是从用户的这两个输入下方的数据库中检索出来的。现在我的问题是，如果文本很长，它不会正确显示在输入下方并影响它们不适合屏幕，只要文本只有 5 到 10 个单词就没有问题。

这是输入的html文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
    <form method="post" action="answer">
                <ul>
                    <li>
                        Login Name:<input type="text" name="id" class="controller"></input>
                    </li>
                    <li>
                        Password:<input type="password" name="pass" class="controller"></input>
                    </li>
                    <li>
                        <input type="submit" value="Login"></input>
                    </li>
                </ul>
    </form>     
</body> 
```

这是CSS代码

```
 .controller {
 width: 98%;
 margin: 0;
 padding: 7px 5px 4px;
 color: #400;
 font-size: 18px;
 font-family: inherit;
 border-style: solid;
 border-width: 0 1px 1px 0;
    } 
```

请任何人都可以告诉我我必须做什么或提供一个CSS代码来控制问题。

非常感谢您的任何回答，并对我的长问题感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:13:43.390

所以，我认为这就是你想要做的。在你的表格之后，

```
<div id="response">
    <p> Some Long Block Of Text That Will Wrap Around This Div </p>
</div> 
```

然后，在 CSS 中你会得到这样的事情：

```
#response
{
    width: 75px; /*desired width*/
    margin-top: 25px; /*distance from the form above*/
}
#response p
{
    /*anything you want to do to that specific <p> */
} 
```

我不确定你是如何获取动态文本的，但我猜它是一个脚本，它从获取信息`answer`并将其放入 html 中。只需将该信息放在`<p>`里面`#response`

# php - 如何在 MySQL 查询中引用表点列表示法

> ID：11170029
> 
> 赞同：0
> 
> 时间：2012-06-23T13:51:04.117
> 
> 标签：php, mysql, select, left-join

```
SELECT * from meets
 LEFT JOIN teams as hteam on meets.meet_hometeam=hteam.team_id 
 LEFT JOIN teams as ateam on meets.meet_awayteam=ateam.team_id 
 LEFT JOIN teams as altloc on (meets.meet_altloc=altloc.team_id and meets.meet_altloc!='')
 where meet_date between ($now+(4*86400)) and ($now+(5*86400) or meets.meet_id='2') 
```

在 PHP 中：

```
$var = $queryvar->fetch_object(); 
```

当我称`$var->ateam.team_town`它只是将点视为连接而不是表的对象时，我遇到了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:43:50.717

`SELECT *`做`JOIN`或`UNION`查询时不要。相反，请具体说明您需要的列，如果不同表中的列具有相同的名称，则需要为它们分配别名。

除了区分具有相似名称的列的*必要性*之外，您还可以确定它们返回的顺序，并防止将来的架构更改添加您*不希望*自动拉入其中的列（如图像blob 数据什么的）。

```
SELECT
  /* specify columns from each table with aliases */
  hteam.team_id AS hometeam_id,
  ateam.team_id AS awayteam_id,
  hteam.team_town AS hometeam_town,
  ateam.team_town AS awayteam_town,
  ...
  ...
  etc...
FROM meets
 LEFT JOIN teams as hteam on meets.meet_hometeam=hteam.team_id 
 LEFT JOIN teams as ateam on meets.meet_awayteam=ateam.team_id 
 LEFT JOIN teams as altloc on (meets.meet_altloc=altloc.team_id and meets.meet_altloc!='')
 WHERE meet_date between ($now+(4*86400)) and ($now+(5*86400) or meets.meet_id='2') 
```

然后在您的 PHP 中，只需通过您选择的别名调用它：`$var->hometeam_town, $var->hometown_id, $var->awayteam_town`等等...

# macos - 从 webview 中删除弹性

> ID：11170038
> 
> 赞同：2
> 
> 时间：2012-06-23T13:52:26.007
> 
> 标签：macos, cocoa, webview

我有一个网络视图，我想从中消除弹性。就像现在一样，当滚动一个比 webview 小的页面时，它会产生弹性效果，露出下面的背景。我想删除这个。

我试过做以下但没有成功。它找到了`WebDynamicScrollBarsView`但是设置了这个弹性，并没有改变任何东西。

```
- (void)awakeFromNib
{
    NSScrollView *scrollView = [self findScrollViewInSubviews:self.subviews];
    scrollView.horizontalScrollElasticity = NSScrollElasticityNone;
    scrollView.verticalScrollElasticity = NSScrollElasticityNone;
}

- (NSScrollView *)findScrollViewInSubviews:(NSArray *)subviews
{
    for (NSView *view in subviews)
    {
        if ([view isKindOfClass:[NSScrollView class]])
            return (NSScrollView *) view;
        else
            return [self findScrollViewInSubviews:view.subviews];
    }

    return nil;
} 
```

有谁知道如何从 webview 中删除弹性效果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T16:37:27.053

在我的 WebView 子类中（或者您可以直接使用`webView.mainFrame.frameView.documentView.enclosingScrollView`，但这对我个人而言更容易）

```
// return the scroll view that we are currently using, if applicatble
- (NSScrollView *)mainScrollView {
    return [[[[self mainFrame] frameView] documentView] enclosingScrollView]; // can be nil
} 
```

然后在完成加载时，正如安妮在我输入答案时所指出的那样：），

```
- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame {
    NSScrollView *mainScrollView = [sender mainScrollView];
    [mainScrollView setVerticalScrollElasticity:NSScrollElasticityNone]; 
    [mainScrollView setHorizontalScrollElasticity:NSScrollElasticityNone];
} 
```

我不确定是否有必要在内容加载后执行此操作，但我现在没有我的 mac 可以尝试。

# google-apps-script - 从电子表格公式调用函数

> ID：11170043
> 
> 赞同：0
> 
> 时间：2012-06-23T13:53:51.213
> 
> 标签：google-apps-script, google-sheets, formulas

我开始学习 Google Apps 脚本并尝试完成“您的第一个自定义函数”教程。也许有些事情发生了变化，他们忘记更新教程了？当我输入`=in2mm(10)`一个单元格时，它会显示`#NAME`并`Unknown function name`显示弹出窗口。

那么如何从电子表格公式中调用我自己的函数呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T14:14:25.510

通过编辑器的菜单只运行一次您的函数以确保它被正确保存然后在电子表格中使用它在单元格 B1 中像这样使用它，例如如果 A1 包含一个数值：

```
=in2mm(A1) 
```

或者如果您愿意，就像在您的示例中一样：`=in2mm(10)`它将显示 254 ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:02:00.717

我通过删除函数声明部分“function in2mm(inNum)”中的“inNum”来解决它，在电子表格中不带任何参数运行一次并得到 THINKING ... 和错误，然后在函数声明部分重新键入“inNum”“函数 in2mm(inNum)"，运行并得到思考和正确的结果。当您直接从网页复制和粘贴时，可能是编码问题。

# batch-file - 有一个批处理文件从保管箱中读取一个文本文件并将其作为批处理文件中的变量执行

> ID：11170044
> 
> 赞同：0
> 
> 时间：2012-06-23T13:53:54.230
> 
> 标签：batch-file

我正在尝试让批处理文件从保管箱中读取文本文件并将其作为批处理文件中的变量执行。

这是我正在尝试的，但它不起作用，请帮助！

```
SetLocal EnableDelayedExpansion
set content=

for /F "delims=" %%i in (DROPBOX-LINK-HERE) do set content=!

content! %%i

%content%
EndLocal 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:52:25.110

我不确定你的意思是什么`DROPBOX-LINK-HERE`，但我使用的是一个普通的文本文件作为内容。

您必须用括号分隔每一行，`&`否则将内容括在括号中并用 . 分隔每一行`<linefeed>`。换行解决方案更复杂，但对内容的限制较少。

如果启用延迟扩展，则内容中的任何`!`字符都将在 FOR 变量扩展期间损坏。但是需要延迟扩展来保留未引用的特殊字符。所以延迟扩展需要创造性地打开和关闭。

这是我认为可以满足您要求的代码。

```
@echo off
setlocal disableDelayedExpansion

::Define a carriage return variable
for /f %%a in ('copy /Z "%~dpf0" nul') do set "CR=%%a"

::Create a newline variable
set LF=^

::The above 2 blank lines are critical - do not remove

::Both CR and LF should be expanded using delayed expansion only.

::Load the content into a variable.
::We want to separate lines with linefeed, but FOR /F won't preserve linefeeds.
::So use carriage return as a place holder for now.
set "content=("
setlocal enableDelayedExpansion
for /f %%C in ("!CR! ") do (
  endlocal
  for /f "delims=" %%A in (test.txt) do (
    setlocal enableDelayedExpansion
    for /f "delims=" %%B in ("!content!") do (
      endlocal
      set "content=%%B%%C%%A"
    )
  )
)

::Now replace carriage returns with newline and append terminating )
setlocal enableDelayedExpansion
for /f %%C in ("!CR! ") do for %%N in ("!LF!") do set "content=!content:%%C=%%~N!%%~N)"

::Execute the content
endlocal&%content% 
```

该代码有效，但可以从变量执行的代码类型存在限制。

*   除非您使用 CALL，否则无法使用普通扩展来扩展变量。例如，行 like`echo %var%`不会起作用，但`call echo %var%`会起作用。另一种选择是使用延迟扩展。`SETLOCAL EnableDelayedExpansion`并且`ENDLOCAL`可以根据需要包含在内容中。

*   您不能`CALL`或`GOTO`在`:LABEL`内容中。

这就是我目前能记住的全部内容，但可能（可能有）其他限制。

我有一个问题：

***如果内容已经在文本文件中，那么为什么不简单地给文本文件一个 .BAT 扩展名并执行它呢？***

# java - 相机活动未在第二次启动

> ID：11170045
> 
> 赞同：0
> 
> 时间：2012-06-23T13:54:01.863
> 
> 标签：java, android, android-camera

我制作了一个基于标签的应用程序。有三个选项卡。选项卡之一用于相机。因此，当我按下相机选项卡时，它会打开相机活动，以便我可以拍照。直到这里它工作正常。当我拍照时，那张照片会显示在 ImageView 中。**从这里开始，当我按下任何其他选项卡然后按下相机选项卡时，相机活动不会启动。**它不断向我展示 ImageView 上的前一张图像。我想要的是每当用户点击相机选项卡时，它应该打开相机活动。**我怎样才能达到这个效果？**

这是我的代码。下面是相机活动中的 os oncreate 方法。因此，当按下相机选项卡时，它会打开此活动。

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.camera);

    userFunctions = new UserFunctions();
    globalUID = getIntent().getExtras().getString("globalUID");
    Toast.makeText(getApplicationContext(), globalUID, Toast.LENGTH_LONG).show();
    ivUserImage = (ImageView)findViewById(R.id.ivUserImage);
    bUpload = (Button)findViewById(R.id.bUpload);
    openCamera();
}

private void openCamera() {
    i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(i, CameraResult);
} 
```

**更新**

我这样做了，但仍然是同样的问题

```
boolean flag = true;
@Override
protected void onResume() {
    super.onResume();
    //flag = true;
    if(flag) {
        openCamera();
        flag = false;
    }
} 
```

**编辑**

在遵循伊姆兰的回答之后，我的代码现在看起来像这样。我还添加了额外的代码。但是这段代码仍然不起作用。

```
public class Camera extends Activity {
    ImageView ivUserImage;
    Button bUpload;
    Intent i;
    int CameraResult = 0;
    Bitmap bmp;
    public String globalUID;
    UserFunctions userFunctions;
    String photoName;
    InputStream is;
    String largeImagePath;
    int serverResponseCode = 0;
    public static boolean flag = true;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.camera);

        userFunctions = new UserFunctions();
        globalUID = getIntent().getExtras().getString("globalUID");
        //flag = getIntent().getExtras().getBoolean("flag");
        Toast.makeText(getApplicationContext(), globalUID, Toast.LENGTH_LONG).show();
        ivUserImage = (ImageView)findViewById(R.id.ivUserImage);
        bUpload = (Button)findViewById(R.id.bUpload);
        //openCamera();
        if(flag ==true)
            openCamera();
    }

    @Override
    protected void onResume() {
        super.onResume();
        if(flag==true)
            openCamera();
    }

    private void openCamera() {
        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(i, CameraResult);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        super.onActivityResult(requestCode, resultCode, data);
        flag = false;
        if(resultCode == RESULT_OK) {

            //set image taken from camera on ImageView
            Bundle extras = data.getExtras();
            bmp = (Bitmap) extras.get("data");
            ivUserImage.setImageBitmap(bmp);

            //Create new Cursor to obtain the file Path for the large image
            String[] largeFileProjection = {
                MediaStore.Images.ImageColumns._ID,
                MediaStore.Images.ImageColumns.DATA
            };

            String largeFileSort = MediaStore.Images.ImageColumns._ID + " DESC";
            Cursor myCursor = this.managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, largeFileProjection, null, null, largeFileSort);

            try {
                myCursor.moveToFirst();
                //This will actually give you the file path location of the image.
                largeImagePath = myCursor.getString(myCursor.getColumnIndexOrThrow(MediaStore.Images.ImageColumns.DATA));

                File f = new File("" + largeImagePath);

                photoName = f.getName();

                bUpload.setOnClickListener(new View.OnClickListener() {   
                    public void onClick(View v) {
                        new Upload().execute(largeImagePath, globalUID, photoName);
                    }

                });

            } finally {
                myCursor.close();
            }
        }
    }
} 
```

**这是我的标签活动代码**

```
public class DashboardActivity extends TabActivity {
    UserFunctions userFunctions;
    public String globalUID;
    DatabaseHandler db;
    boolean flag = true;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dashboard);

        db = new DatabaseHandler(getApplicationContext());
        // Check login status in database
        userFunctions = new UserFunctions();

        if(userFunctions.isUserLoggedIn(getApplicationContext())){
            //globalUID = getIntent().getExtras().getString("globalUID");
            HashMap<String, String> data = db.getUserDetails();
            globalUID = data.get("uid");
            Resources res = getResources(); // Resource object to get Drawables
            TabHost tabHost = getTabHost();  // The activity TabHost
            TabHost.TabSpec spec;  // Resusable TabSpec for each tab
            Intent intent;  // Reusable Intent for each tab

            //Home
            intent = new Intent(this, Home.class);
            intent.putExtra("globalUID", globalUID);
            spec = tabHost.newTabSpec("home").setIndicator("", res.getDrawable(R.drawable.home_icon)).setContent(intent);
            tabHost.addTab(spec);

            //Camera
            intent = new Intent(this, Camera.class);
            intent.putExtra("globalUID", globalUID);
            //intent.putExtra("flag", flag);
            spec = tabHost.newTabSpec("camera").setIndicator("", res.getDrawable(R.drawable.camera_icon)).setContent(intent);
            tabHost.addTab(spec);

            //Albums
            intent = new Intent(this, Albums.class);
            intent.putExtra("globalUID", globalUID);
            spec = tabHost.newTabSpec("albums").setIndicator("", res.getDrawable(R.drawable.albums_icon)).setContent(intent);
            tabHost.addTab(spec);

            //tabHost.setCurrentTab(1);
        } else {
            // user is not logged in show login screen
            Intent login = new Intent(getApplicationContext(), LoginActivity.class);
            login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(login);
            // Closing dashboard screen
            finish();
        }
    }   
} 
```

**这是我的整个相机活动**

```
public class Camera extends Activity {
    ImageView ivUserImage;
    Button bUpload;
    Intent i;
    int CameraResult = 0;
    Bitmap bmp;
    public String globalUID;
    UserFunctions userFunctions;
    String photoName;
    InputStream is;
    String largeImagePath;
    int serverResponseCode = 0;
    public static boolean flag = true;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.camera);

        userFunctions = new UserFunctions();
        globalUID = getIntent().getExtras().getString("globalUID");
        //flag = getIntent().getExtras().getBoolean("flag");
        Toast.makeText(getApplicationContext(), globalUID, Toast.LENGTH_LONG).show();
        ivUserImage = (ImageView)findViewById(R.id.ivUserImage);
        bUpload = (Button)findViewById(R.id.bUpload);
        //openCamera();
        //if(flag ==true)
            openCamera();
    }
    /*
    @Override
    protected void onResume() {
        super.onResume();
        if(flag==true)
            openCamera();
    }*/

    private void openCamera() {
        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(i, CameraResult);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        super.onActivityResult(requestCode, resultCode, data);
        flag = false;
        if(resultCode == RESULT_OK) {

            //set image taken from camera on ImageView
            Bundle extras = data.getExtras();
            bmp = (Bitmap) extras.get("data");
            ivUserImage.setImageBitmap(bmp);

            //Create new Cursor to obtain the file Path for the large image
             String[] largeFileProjection = {
                     MediaStore.Images.ImageColumns._ID,
                     MediaStore.Images.ImageColumns.DATA
             };

             String largeFileSort = MediaStore.Images.ImageColumns._ID + " DESC";
             Cursor myCursor = this.managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, largeFileProjection, null, null, largeFileSort);

             try {
                 myCursor.moveToFirst();
                 //This will actually give you the file path location of the image.
                 largeImagePath = myCursor.getString(myCursor.getColumnIndexOrThrow(MediaStore.Images.ImageColumns.DATA));

                 File f = new File("" + largeImagePath);

                 photoName = f.getName();

                 bUpload.setOnClickListener(new View.OnClickListener() {   
                     public void onClick(View v) {
                         new Upload().execute(largeImagePath, globalUID, photoName);
                     }

                 });

             } finally {
                 myCursor.close();
             }
        }
    }

    public class Upload extends AsyncTask<String, Integer, String> {

        ProgressDialog dialog;

        protected void onPreExecute() {
            dialog = ProgressDialog.show(Camera.this, "", "Uploading file...", true);
        }

        @Override
        protected String doInBackground(String... arg0) {
            // TODO Auto-generated method stub
            String success = "false";
            Bitmap bitmapOrg = setImageToImageView(largeImagePath);//BitmapFactory.decodeFile(largeImagePath);
            ByteArrayOutputStream bao = new ByteArrayOutputStream();
            bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);

            byte [] ba = bao.toByteArray();
            String ba1=Base64.encodeToString(ba, 0);

            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("image",ba1));
            nameValuePairs.add(new BasicNameValuePair("imageName", photoName));
            nameValuePairs.add(new BasicNameValuePair("uid", globalUID));

            try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://www.example.info/android/fileupload.php");
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                if(response != null) {
                    success = "true";
                }
                is = entity.getContent();
            } catch(Exception e) {
                Log.e("log_tag", "Error in http connection "+e.toString());
            }
            dialog.dismiss();
            return success;
        }

        protected void onProgressUpdate(Integer...progress) {

        }

        protected void onPostExecute(String f) {
            Toast.makeText(getApplicationContext(), "File uploaded", Toast.LENGTH_LONG).show();
        }

    }

    public Bitmap setImageToImageView(String filePath) { 
        // Decode image size 
        BitmapFactory.Options o = new BitmapFactory.Options(); 
        o.inJustDecodeBounds = true; 
        BitmapFactory.decodeFile(filePath, o); 

        // The new size we want to scale to 
        final int REQUIRED_SIZE = 1024; 

        // Find the correct scale value. It should be the power of 2\. 
        int width_tmp = o.outWidth, height_tmp = o.outHeight; 
        int scale = 1; 
        while (true) { 
            if (width_tmp < REQUIRED_SIZE && height_tmp < REQUIRED_SIZE) 
            break; 
            width_tmp /= 2; 
            height_tmp /= 2; 
            scale *= 2;
        } 

        // Decode with inSampleSize 
        BitmapFactory.Options o2 = new BitmapFactory.Options(); 
        o2.inSampleSize = scale; 
        Bitmap bitmap = BitmapFactory.decodeFile(filePath, o2); 
        return bitmap;

    }

    public boolean fileData(String guid, String photoName) {
        Toast.makeText(getApplicationContext(), photoName, Toast.LENGTH_LONG).show();

        JSONObject json = userFunctions.uploadFileData(guid, photoName);

        try {
            if(Integer.parseInt(json.getString("success")) != 1) {
                Toast.makeText(getApplicationContext(), json.getInt("error_msg"), Toast.LENGTH_LONG).show();
                //register_error.setText(json.getString("error_msg"));
                return false;
            }
        } catch (NumberFormatException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:58:36.427

这是因为当您在选项卡之间切换时，您的活动不会再次调用 onCreate。

尝试将呼叫转移到 openCamera(); 进入 onResume 方法，应该没问题。

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.camera);

    userFunctions = new UserFunctions();
    globalUID = getIntent().getExtras().getString("globalUID");
    Toast.makeText(getApplicationContext(), globalUID, Toast.LENGTH_LONG).show();
    ivUserImage = (ImageView)findViewById(R.id.ivUserImage);
    bUpload = (Button)findViewById(R.id.bUpload);

}

protectd void onResume(){
      super.onResume();
      openCamera();
}

private void openCamera() {
    i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(i, CameraResult);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T13:58:47.880

出于效率的原因，每个`Activity`人只`TabHost`调用一次。`onCreate()`这就是为什么`openCamera()`不会一次又一次地调用它的原因。

为了处理这个问题，您可以在父级`Activity`中实现并注册一个`OnTabChangeListener`，您可以在其中捕获单击了哪个选项卡并执行任何所需的操作。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T14:00:38.250

添加`onResume()`您的活动并调用 openCamera(); 从 onResume() 也可以：

```
public static boolean flag = true;

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.camera);

    userFunctions = new UserFunctions();
    globalUID = getIntent().getExtras().getString("globalUID");
    Toast.makeText(getApplicationContext(), globalUID, Toast.LENGTH_LONG).show();
    ivUserImage = (ImageView)findViewById(R.id.ivUserImage);
    bUpload = (Button)findViewById(R.id.bUpload);
if(flag ==true)
    openCamera();
}

       @Override
        protected void onResume() {
            super.onResume();
if(flag==true)
            openCamera();
        } 
```

并在`onActivityResut()`

```
flag =false; 
```

或在 tabclick

```
YourflagActivity.flag=true; 
```

# c# - 带有按钮的 Texbox

> ID：11170046
> 
> 赞同：0
> 
> 时间：2012-06-23T13:54:10.380
> 
> 标签：c#, wpf, xaml, textbox

如何在 WPF 中创建一个文本框（使用 XAML），其中有一个按钮，就像 Google Chrome 地址栏一样。我想要如下图所示的东西：

![在此处输入图像描述](../Images/1ecb6e1c409459a377d8fd268cbdc368.png)

然后如何将按钮的位置更改为左右？（我正在使用 C#）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:59:45.450

您可以将按钮嵌套在 TextBox 顶部的 Grid 中，因为听起来您只需要使用一次：

例如

```
<Grid>
  <TextBox Text="Hello" />
  <Button HorizontalAlignment="Right" Content="Click Me" />
</Grid> 
```

唯一的问题是文本将显示在按钮下方。另一种方法是制作自己的用户控件或编辑文本框的控件模板（但这可能没有您想要的功能）。

我会在 2 列网格的左列中创建一个文本框，然后在右列中创建按钮。然后删除文本框上的背景和边框，并将此背景/边框放在网格上。这将给出一个带有按钮的文本框的外观，其中文本不能位于按钮下方

例如

```
 <Border BorderBrush="LightGray" BorderThickness="1" Height="30">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"></ColumnDefinition>
                <ColumnDefinition Width="auto"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <TextBox VerticalAlignment="Center" BorderBrush="Transparent" Background="Transparent" Text="Hello World this is a really long bit of text that wont go underneath the button (it will get clipped)"></TextBox>
            <Button Content="Click me" Grid.Column="1" Margin="4"></Button>
        </Grid>
    </Border> 
```

唯一的问题是您没有获得镀铬悬停效果等。带有控件模板的用户控件是您的最佳选择，但这会给您一些想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T06:08:41.040

这样做的方法：

```
<Border x:Name="TextboxBorder" BorderBrush="#FFB8AAAA" BorderThickness="1" Grid.Column="2"        Margin="3,1.5,4.084,1.5" Height="27" Background="White" CornerRadius="3">
    <Grid x:Name="TextboxGrid">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="33"/>
        </Grid.ColumnDefinitions>
        <Button x:Name="btn" Grid.Column="1" Margin="3.5,4.833,4.5,3.5" BorderBrush="{x:Null}" Style="  {DynamicResource      SearchButtonStyle}" >
            <Button.Background>
                <ImageBrush ImageSource="Images/search.png"/>
            </Button.Background>
        </Button>
        <TextBox Padding="0,1.2,0,0" x:Name="txt" Margin="1.541,0.5,2.041,0.5"       TextWrapping="Wrap" Text="سلام" BorderThickness="0" FontSize="16"/>
    </Grid>
</Border> 
```

按钮样式是：

```
 <Style x:Key="SearchButtonStyle" TargetType="{x:Type Button}">
     <Setter Property="FocusVisualStyle" Value="{StaticResource ButtonFocusVisual}"/>
     <Setter Property="Background" Value="{StaticResource ButtonNormalBackground}"/>
     <Setter Property="BorderBrush" Value="{StaticResource ButtonNormalBorder}"/>
     <Setter Property="BorderThickness" Value="1"/>
     <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
     <Setter Property="HorizontalContentAlignment" Value="Center"/>
     <Setter Property="VerticalContentAlignment" Value="Center"/>
     <Setter Property="Padding" Value="1"/>
     <Setter Property="Template">
     <Setter.Value>
     <ControlTemplate TargetType="{x:Type Button}">
         <Border BorderThickness="0" Margin="1.875,0.5,1.75,-0.375" Background="{TemplateBinding Background}"     Width="16" Height="16"/>
          <ControlTemplate.Triggers>
              <Trigger Property="IsKeyboardFocused" Value="true"/>
              <Trigger Property="ToggleButton.IsChecked" Value="true"/>
              <Trigger Property="IsEnabled" Value="false">
              <Setter Property="Foreground" Value="#ADADAD"/>
              </Trigger>
         </ControlTemplate.Triggers>
    </ControlTemplate>
    </Setter.Value>
    </Setter>
</Style> 
```

然后 WPF 摇滚！！！

# html - AS3 正则表达式使 html 标签大写

> ID：11170050
> 
> 赞同：1
> 
> 时间：2012-06-23T13:54:39.490
> 
> 标签：html, regex, actionscript-3

我想转换一个包含 HTML 标签的字符串，以便所有标签和属性都为大写（最好使用正则表达式）。

例如，以下字符串：

```
'<bla>something <br/><a href="foo">bar</a></bla>' 
```

应该改为

```
'<BLA>something <BR/><A HREF="foo">bar</A></BLA>' 
```

这可以使用正则表达式替换单个字符串吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:23:52.840

仅将 HTML 元素标记名称更改为大写非常容易。使用 String 替换方法的回调函数版本，如下所示：

```
function HtmlTagName2Upper(text) {
    return text.replace(/(<\/?\w+\b)([^<>]*>)/g,
                function(m0, m1, m2) {
                    return m1.toUpperCase() + m2;});
} 
```

上面的正则表达式捕获标签名称`$1`和所有属性（如果有的话）`$2`。上面的正则表达式可以很好地工作，但不处理带有尖括号的属性值，也不大写属性名称。

处理在其属性值中具有尖括号的 HTML 元素并将元素属性名称设为大写有点复杂：

```
function HtmlTagAndAttributeNames2Upper(text) {
    return text.replace(/(<\/?\w+\b)((?:[^<>'"]+|"[^"]*"|'[^']*')*>)/g,
                function(mo0, mo1, mo2) {
                    mo2 = mo2.replace(/(\s+[\w\-.:]+)((?:\s*=\s*(?:"[^"]*"|'[^']*'|[\w\-.:]+))?)/g,
                            function(mi0, mi1, mi2) {
                                return mi1.toUpperCase() + mi2});
                    return mo1.toUpperCase() + mo2;});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:04:13.727

老实说，我不是AS3的专家。但是**，解决**方法可能如下：

1.  通过这样的正则表达式查找所有 html 标签：`<[^>]+>`
2.  将找到的所有*html 标签*替换为其大写版本（通过使用`toUpperCase()`方法）。

# android - 如何在android中动态创建TableLayout？

> ID：11170052
> 
> 赞同：0
> 
> 时间：2012-06-23T13:55:08.267
> 
> 标签：android, tablelayout, dynamically-generated

我试图动态创建一个 TableLayout。我想创建 3X3 的行和列。

* * *

```
public class PortAFareActivity extends Activity {

@Override

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TableLayout seatTable=new TableLayout(this);        
    ImageButton[][] seatButton=new ImageButton[3][3];
    seatTable.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
    TableRow[] seatRow=new TableRow[3];        
    for (int i = 0; i < 3; i++) {
        seatRow[i]=new TableRow(this);
        seatRow[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));           
        for (int j = 0; j < 3; j++) {               
            seatButton[i][j]=new ImageButton(this);
            seatButton[i][j].setImageResource(R.drawable.seat);             
            seatButton[i][j].setLayoutParams(new LayoutParams(50,30));
            seatRow[i].addView(seatButton[i][j]);
        }   
        seatTable.addView(seatRow[i]);
    }
    LinearLayout lin=(LinearLayout)findViewById(R.id.linLayout);
    lin.addView(seatTable,new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
    lin.invalidate();
    Toast.makeText(this, " "+seatTable.getChildCount() , Toast.LENGTH_SHORT).show();    
 }
} 
```

* * *

我的布局 XML 文件包含一个带有 id **linLayout的 LinearLayout**

任何帮助，将不胜感激。=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:19:18.430

试试这个它会工作

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.registration);

    TableLayout seatTable=new TableLayout(this);
    ImageButton[][] seatButton=new ImageButton[3][3];
    seatTable.setBackgroundColor(Color.RED);
    seatTable.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
    TableRow[] seatRow=new TableRow[3];
    for (int i = 0; i < 3; i++) {
        seatRow[i]=new TableRow(this);
        seatRow[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
        for (int j = 0; j < 3; j++) {
            seatButton[i][j]=new ImageButton(this);
            seatButton[i][j].setImageResource(R.drawable.seat);
            //seatButton[i][j].setLayoutParams(new LayoutParams(50,30));//<--------problem 
            seatRow[i].addView(seatButton[i][j]);
        }
        seatTable.addView(seatRow[i]);
    }
    LinearLayout lin=(LinearLayout)findViewById(R.id.linLayout);
    lin.addView(seatTable);//<-------- not the problem but not required 
    lin.invalidate();
    Toast.makeText(this, " "+seatTable.getChildCount() , Toast.LENGTH_SHORT).show();
 } 
```

# java - 网络浏览器插件和 Java 小程序？

> ID：11170053
> 
> 赞同：1
> 
> 时间：2012-06-23T13:55:40.863
> 
> 标签：java, javascript, applet, japplet, browser-addons

我有一个使用 java 小程序执行客户端任务的在线服务，但用户必须打开托管小程序的网页才能让它工作，我的问题是 -

如果我通过网络浏览器插件在本地运行这个小程序，用户可以关闭网页并且小程序将继续在后台运行吗？

此外，在本地启动小程序是否仍会产生初始启动安全警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:03:10.760

> 如果我通过网络浏览器插件在本地运行这个小程序，用户可以关闭网页并且小程序将继续在后台运行吗？

不会。当页面关闭时，浏览器/JRE 将调用`close()`then`stop()`方法。当它适合他们时，JVM 将停止。这可能会在最后一个小程序（在该 JVM 中）停止后 30-60 秒发生。

# javascript - 用javascript比较日期

> ID：11170054
> 
> 赞同：27
> 
> 时间：2012-06-23T13:55:48.647
> 
> 标签：javascript, date

我在 javascript 中有两个日期：

```
var first = '2012-11-21';
var second = '2012-11-03'; 
```

我想做：

```
 if(first > second){
   //...
 } 
```

如果没有外部库，最好的方法是什么？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-23T13:57:16.510

```
if( (new Date(first).getTime() > new Date(second).getTime()))
{
    ----------------------------------
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-23T14:16:33.273

如果您的日期是严格`yyyy-mm-dd`格式的字符串，如问题所示，那么您的代码将按原样工作，而无需转换为日期对象或数字：

```
if(first > second){ 
```

...将进行字典（即字母数字“字典顺序”）字符串比较 - 它将比较每个字符串的第一个字符，然后是每个字符串的第二个字符，等等。这将给出你想要的结果......

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-30T09:00:07.713

你可以这样做，它会正常工作：

```
var date1 = new Date('2013-07-30');
var date2 = new Date('2013-07-30');

if(date1 === date2){ console.log("both are equal");}  //it does not work 
==>undefined  //result
if(+date1 === +date2){ console.log("both are equal");} //do it this way! 
//(use + prefix for a variable that holds a date value)
==> both are equal //result 
```

注意：- 不要忘记使用 + 前缀

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-08-06T11:41:48.723

最好的办法是，

```
var first = '2012-11-21';
var second = '2012-11-03';

if (new Date(first) > new Date(second) {
    .....
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-23T14:03:51.560

由于您的日期格式，您可以使用以下代码：

```
if(parseInt(first.replace(/-/g,""),10) > parseInt(second.replace(/-/g,""),10)){
   //...
} 
```

它将检查`20121121`数字是否大于`20121103`或不大于。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-03T10:47:16.960

在 javascript 中使用此函数进行日期比较：

```
 function fn_DateCompare(DateA, DateB) {
      var a = new Date(DateA);
      var b = new Date(DateB);

      var msDateA = Date.UTC(a.getFullYear(), a.getMonth()+1, a.getDate());
      var msDateB = Date.UTC(b.getFullYear(), b.getMonth()+1, b.getDate());

      if (parseFloat(msDateA) < parseFloat(msDateB))
        return -1;  // less than
      else if (parseFloat(msDateA) == parseFloat(msDateB))
        return 0;  // equal
      else if (parseFloat(msDateA) > parseFloat(msDateB))
        return 1;  // greater than
      else
        return null;  // error
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-19T12:16:08.587

你也可以这样做。

```
if (dateFormat(first, "yyyy-mm-dd") > dateFormat(second, "yyyy-mm-dd")) {
        console.log("done");
} 
```

或者

```
if (dateFormat(first, "mm-dd-yyyy") >  dateFormat(second, "mm-dd-yyyy")) {
        console.log("done");
} 
```

我为 dateFormat() 使用以下插件

```
 var dateFormat = function () {
        var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,
            timezone = /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,
            timezoneClip = /[^-+\dA-Z]/g,
            pad = function (val, len) {
                val = String(val);
                len = len || 2;
                while (val.length < len) val = "0" + val;
                return val;
            };

        // Regexes and supporting functions are cached through closure
        return function (date, mask, utc) {
            var dF = dateFormat;

            // You can't provide utc if you skip other args (use the "UTC:" mask prefix)
            if (arguments.length == 1 && Object.prototype.toString.call(date) == "[object String]" && !/\d/.test(date)) {
                mask = date;
                date = undefined;
            }

            // Passing date through Date applies Date.parse, if necessary
            date = date ? new Date(date) : new Date;
            if (isNaN(date)) throw SyntaxError("invalid date");

            mask = String(dF.masks[mask] || mask || dF.masks["default"]);

            // Allow setting the utc argument via the mask
            if (mask.slice(0, 4) == "UTC:") {
                mask = mask.slice(4);
                utc = true;
            }

            var _ = utc ? "getUTC" : "get",
                d = date[_ + "Date"](),
                D = date[_ + "Day"](),
                m = date[_ + "Month"](),
                y = date[_ + "FullYear"](),
                H = date[_ + "Hours"](),
                M = date[_ + "Minutes"](),
                s = date[_ + "Seconds"](),
                L = date[_ + "Milliseconds"](),
                o = utc ? 0 : date.getTimezoneOffset(),
                flags = {
                    d:    d,
                    dd:   pad(d),
                    ddd:  dF.i18n.dayNames[D],
                    dddd: dF.i18n.dayNames[D + 7],
                    m:    m + 1,
                    mm:   pad(m + 1),
                    mmm:  dF.i18n.monthNames[m],
                    mmmm: dF.i18n.monthNames[m + 12],
                    yy:   String(y).slice(2),
                    yyyy: y,
                    h:    H % 12 || 12,
                    hh:   pad(H % 12 || 12),
                    H:    H,
                    HH:   pad(H),
                    M:    M,
                    MM:   pad(M),
                    s:    s,
                    ss:   pad(s),
                    l:    pad(L, 3),
                    L:    pad(L > 99 ? Math.round(L / 10) : L),
                    t:    H < 12 ? "a"  : "p",
                    tt:   H < 12 ? "am" : "pm",
                    T:    H < 12 ? "A"  : "P",
                    TT:   H < 12 ? "AM" : "PM",
                    Z:    utc ? "UTC" : (String(date).match(timezone) || [""]).pop().replace(timezoneClip, ""),
                    o:    (o > 0 ? "-" : "+") + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),
                    S:    ["th", "st", "nd", "rd"][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10]
                };

            return mask.replace(token, function ($0) {
                return $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);
            });
        };
    }();

    // Some common format strings
    dateFormat.masks = {
        "default":      "ddd mmm dd yyyy HH:MM:ss",
        shortDate:      "m/d/yy",
        mediumDate:     "mmm d, yyyy",
        longDate:       "mmmm d, yyyy",
        fullDate:       "dddd, mmmm d, yyyy",
        shortTime:      "h:MM TT",
        mediumTime:     "h:MM:ss TT",
        longTime:       "h:MM:ss TT Z",
        isoDate:        "yyyy-mm-dd",
        isoTime:        "HH:MM:ss",
        isoDateTime:    "yyyy-mm-dd'T'HH:MM:ss",
        isoUtcDateTime: "UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"
    };

    // Internationalization strings
    dateFormat.i18n = {
        dayNames: [
            "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat",
            "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"
        ],
        monthNames: [
            "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec",
            "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"
        ]
    };

    // For convenience...
    Date.prototype.format = function (mask, utc) {
        return dateFormat(this, mask, utc);
    }; 
```

# ios - UIImagePickerController didFinishPickingMediaWithInfo

> ID：11170055
> 
> 赞同：2
> 
> 时间：2012-06-23T13:55:51.877
> 
> 标签：ios, camera, uiimagepickercontroller, photo

Bellow 是我的 didFinishPickingMediaWithInfo 方法，我知道我有很多不必要的代码、保留、发布等......但这是我可以让它工作的方式，我害怕在尝试优化它时破坏它。

任何人都可以帮我脱掉不必要的东西并让这个方法干净吗？

另外，我有一个视图控制器，它将加载 4 张照片（相机胶卷或相机），在选择器选择第二张或第三张照片后，应用程序崩溃，或者至少，我收到了下面的这些警报之一。我做错了什么？谢谢！

-2012-06-23 10:54:07.399 LookdoDia[6525:707] 收到内存警告。

-wait_fences：未能收到回复：10004003

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    [self dismissModalViewControllerAnimated:YES];   

    UIImage *img = [info objectForKey:UIImagePickerControllerEditedImage];
    if(!img) img = [info objectForKey:UIImagePickerControllerOriginalImage];

    uiimvImagem.image = [img retain];
    uiimvImagem.alpha = 0;
    UIImageView *tempImageView = [[UIImageView alloc] initWithImage:img];
    self.uiimvImagem = [tempImageView retain];
    [tempImageView release];

    CGRect frame = uiimvImagem.frame;
    frame.size.width = 359;
    frame.size.height = img.size.height / (img.size.width / 359);
    uiimvImagem.frame = frame;

    uisv1.showsVerticalScrollIndicator = NO;
    uisv1.showsHorizontalScrollIndicator = NO;
    uisv1.contentSize = CGSizeMake(uiimvImagem.frame.size.width, uiimvImagem.frame.size.height);
    uisv1.maximumZoomScale = 3.0;
    uisv1.minimumZoomScale = 0.8;
    uisv1.clipsToBounds = YES;
    uisv1.delegate = self;

    [uisv1 addSubview:uiimvImagem];

    [img release];

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T14:22:17.970

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    UIImage *img = [info objectForKey:UIImagePickerControllerEditedImage];
    if(!img) img = [info objectForKey:UIImagePickerControllerOriginalImage];

    uiimvImagem.image = img; //why bother?
    uiimvImagem.alpha = 0; //why bother?
    UIImageView *tempImageView = [[UIImageView alloc] initWithImage:img];
    self.uiimvImagem = tempImageView; //Make sure your self.uiimvImagem is a retained property! Also, don't forget to nil it out in your dealloc method
    [tempImageView release];

    CGRect frame = uiimvImagem.frame;
    frame.size.width = 359;
    frame.size.height = img.size.height / (img.size.width / 359);
    uiimvImagem.frame = frame;

    uisv1.showsVerticalScrollIndicator = NO;
    uisv1.showsHorizontalScrollIndicator = NO;
    uisv1.contentSize = CGSizeMake(uiimvImagem.frame.size.width, uiimvImagem.frame.size.height);
    uisv1.maximumZoomScale = 3.0;
    uisv1.minimumZoomScale = 0.8;
    uisv1.clipsToBounds = YES;
    uisv1.delegate = self;

    [uisv1 addSubview:uiimvImagem];

    [self dismissModalViewControllerAnimated:YES];   

} 
```

这应该会好一点——虽然我不确定其余部分是如何连接的（即属性声明，我不确定 uisv1 分配在哪里。）仍然有一些看起来不正确的东西——你正在分配一个图像到图像视图，然后使用新分配的 UIImageView 运行整个过程。

# asp.net-mvc-3 - .sdf 文件打开时出错

> ID：11170056
> 
> 赞同：0
> 
> 时间：2012-06-23T13:55:54.460
> 
> 标签：asp.net-mvc-3, sql-server-ce-4

这是我的第一个 ASP.NET MVC3 应用程序，它正在运行，除了打开文件夹`.sdf`中的 DB 文件 ()外，一切都很好`App_Data`。我收到错误

> 操作无法完成。未指定的错误。

我这边做的事情是：

1.  显示所有文件、包含在项目中等所有操作都是在此文件夹和文件上完成的。
2.  SQL Server Compact 4.0（运行时+工具支持）安装到我的机器上。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:39:11.587

我对 MVC 4 有同样的问题。安装 VS2010 SP1 为我修复了它。

[VS2010 SP1](http://www.microsoft.com/en-us/download/details.aspx?id=23691)

# maven - Maven Polyglot 发生了什么？

> ID：11170057
> 
> 赞同：29
> 
> 时间：2012-06-23T13:56:26.647
> 
> 标签：maven, maven-3, pom.xml

[曾经位于http://polyglot.sonatype.org/](http://polyglot.sonatype.org/)的 Maven Polyglot 项目发生了什么？

如[本文所述](http://weblogs.java.net/blog/johnsmart/archive/2009/10/21/writing-your-pom-files-groovy-sneek-preview-maven-3s-polyglot-feat)，

> Maven 3 中一个令人兴奋的新特性是它能够处理以非 XML 表示法编写的 pom 文件。Maven 核心现在提供了一个底层 DSL 来访问 Maven 内部，并以您选择的语言编写 POM 文件。这目前包括 Groovy、Ruby 等脚本语言。简而言之，您将能够为几乎任何您喜欢的脚本语言编写 DSL，它可以挂接到 Maven 内部并引导 Maven 构建过程。

我发现网上还有几篇引用该功能的文章。

*   [http://www.thinkplexx.com/learn/article/maven-learn-material/maven3/maven3-pom-using-groovy-ruby-scala-yaml-sonatype-polyglot](http://www.thinkplexx.com/learn/article/maven-learn-material/maven3/maven3-pom-using-groovy-ruby-scala-yaml-sonatype-polyglot)
*   [http://mattgivney.blogspot.com/2011/05/maven-3-polyglot-support.html](http://mattgivney.blogspot.com/2011/05/maven-3-polyglot-support.html)

但是多语言站点现在重定向到 sonatype.org，而我在[Maven 3 发行说明](http://maven.apache.org/release-notes-all.html)中没有提到这个特性。

所以发生了什么事？是被剪掉了还是在里面，只是没有在发行说明中记录？如果它确实为 Maven 3 提供了帮助，您能否指出一些文档。我也对我链接到的第一篇文章中提到的翻译工具感兴趣。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-18T06:43:51.650

这个项目现在被命名为[tesla-polyglot](https://github.com/tesla/tesla-polyglot)。我刚刚为它完成了 Scala DSL，现在应该很快就会发布 tesla-polyglot。我们只是在等待 Maven 3.1.1 推出。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-03T10:14:31.897

Jason van Zyl 对 maven 用户列表进行了更新：[http ://maven.40175.n5.nabble.com/What-happened-to-Polyglot-Maven-td5715529.html](http://maven.40175.n5.nabble.com/What-happened-to-Polyglot-Maven-td5715529.html)

> 我还在和其他几个人一起努力。Dhanji 使用[Atom 标记](https://github.com/dhanji/sitebricks/blob/master/pom.atom)，Kristian 实现了[Ruby DSL](https://gist.github.com/3244352)，Jason Dillon 实现了[Groovy DSL](https://gist.github.com/3244367)，它创建了合成插件来将任意脚本绑定到 Maven 的生命周期。我最初是想看看 Maven 的基础设施如何被其他标记和 DSL 所利用。就消费者而言，这些示例确实呈现为可互操作的格式。Maven 本身显然不能运行 Ruby DSL，但如果你喜欢 Ruby DSL，你可以使用它来构建一个不影响消费者：你可以构建并部署到 Maven 存储库，其他人可以使用库存 Maven 使用依赖项。
> 
> 我现在可以一对一地处理所有早期采用者，因为我真的不能处理很多，但如果你有更多的兴趣，请随时私下给我发电子邮件。

看起来它还活着:-)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-03-19T09:09:56.847

你不会相信，但[它已经发布了](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22io.takari.polyglot%22%20AND%20a%3A%22polyglot%22)（如果你可以将 0.1 版本称为发布）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-04-19T14:26:54.060

截至 2016 年 4 月，
主页为[https://github.com/takari/polyglot-maven](https://github.com/takari/polyglot-maven)，
最新版本为`0.1.15`

有用于 Eclipse 的[Polyglot Maven IDE Pack](http://www.nodeclipse.org/updates/polyglot-maven-ide-pack/)，其中包含一些插件。

还有 maven-tiles 项目[https://github.com/repaint-io/maven-tiles](https://github.com/repaint-io/maven-tiles)，[快速试用](https://github.com/takari/polyglot-maven/issues/82)Maven 风格的效果很好，这表明 Groovy 比其他人做得更好。

请注意[巴比伦塔问题](https://github.com/takari/polyglot-maven/issues/15)，因此大多数开发人员使用相同的风味实际上会更好。

![](../Images/ae73600439e3aad6446987386939b857.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-26T10:59:24.463

最新信息来自[这里](http://takari.io/2014/02/03/maven-speed.html)

“Polyglot for Maven 仍在继续发展，我们最近在 JRuby 团队的 Cristian Meier 的 Ruby DSL 和 Typesafe 的 Chris Hunt 的 Scala DSL 上看到了很多活动。我们希望这项初步工作可以作为灵感用于帮助 POM 发展。对于那些对 XML 替代方案的外观感兴趣的人，您可以查看现有的实现：

Ruby DSL Groovy DSL Scala DSL YAML Atom"

# android - 未找到启动器活动，启动只会同步设备上的应用程序包

> ID：11170064
> 
> 赞同：3
> 
> 时间：2012-06-23T13:57:31.157
> 
> 标签：android, android-emulator, android-manifest

在模拟器上运行我的应用程序时，我从控制台收到此警告

```
No Launcher activity found!
The launch will only sync the application package on the device! 
```

事实上，我已经在 AndroidManifest.xml 文件中声明了一个活动作为主启动器

```
 <activity
            android:name=".myActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

我不需要任何其他意图过滤器来使用该活动.. 只是基本的主和启动器

什么原因？请给我一个解决方案..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T14:25:38.797

如果启动器活动在另一个包中，您还需要指定它。例如，从我的一个个人项目中：

```
<activity
    android:name=".activities.MainScreen"
    android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

MainScreen.java 位于活动包中。此外，检查大写或小写字母的拼写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-24T19:52:42.483

看来您必须在“android.intent.category.LAUNCHER”之前立即指定“android.intent.action.MAIN”。当我遇到以下问题时，我遇到了与您相同的问题：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <action android:name="android.intent.action.SEARCH" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

只有当我重新订购时，问题才得到解决，如下所示：

```
<intent-filter>
    <action android:name="android.intent.action.SEARCH" />
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:53:23.467

在所有正常情况下，听听其他人怎么说。

我能够使用 Mac Book Pro 和 Eclipse Indigo 复制您的问题。当你创建你的 android 项目时，你必须让 Eclipse 从一个模板化的活动开始（比如一个空白活动）。如果您不这样做，并且您稍后尝试将活动添加到您的清单中，则 Eclipse 只是 derps 并且找不到启动器。（我查看了其他清单文件，我看不出任何差异。在这种特殊情况下，我真的不认为这是你糟糕的清单的错。）

这是你懒惰的简单修复：

开始一个新项目，并复制所有文件（确保先备份您的文件，以防删除错误或弄乱排序）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-26T00:45:22.443

使用 Eclipse Indigo，打开运行配置窗口，单击项目并使用 Android 选项卡上的启动默认活动，选择自动选择兼容设备...并应用。

# qt - QLineEdit 和转义信号

> ID：11170067
> 
> 赞同：1
> 
> 时间：2012-06-23T13:57:54.067
> 
> 标签：qt, signals, qlineedit

我想创建一个派生自的类`QLineEdit`，但我无法为 Escape 按钮分配信号。

代码一直有效，直到我添加`cancel_signal()`然后

> LNK2019/LNK1120

出现错误。

如何为 Escape 按钮分配信号？

* * *

**LineEditAlphaNum.h：**

```
#ifndef _LINEEDIT_ALPHA_NUM_
#define _LINEEDIT_ALPHA_NUM_

#include <QtGui>

class LineEditAlphaNum : public QLineEdit
{
public:
    LineEditAlphaNum(QWidget* parent);

    void setPrevNextWidget(QWidget* prev, QWidget* next);

protected:
    void keyPressEvent(QKeyEvent *);

private:
    void keyLogic(QString& str, int key);

    int keyIndex;
    int lastKey;

    QWidget* m_pPrev;
    QWidget* m_pNext;

signals:
    void cancel_signal();
};

#endif // _LINEEDIT_ALPHA_NUM_ 
```

* * *

**LineEditAlphaNum.cpp：**

```
#include "LineEditAlphaNum.h"

LineEditAlphaNum::LineEditAlphaNum(QWidget *parent) :
    QLineEdit(parent),
    keyIndex(0),
    lastKey(0)
{
}

void LineEditAlphaNum::keyPressEvent(QKeyEvent *e)
{
    QString str = text();

    switch( e->key() )
    {
    case Qt::Key_Escape:
        emit cancel_signal();
    case Qt::Key_Up:
        m_pPrev->setFocus(Qt::OtherFocusReason);
        break;
    case Qt::Key_Down:
        m_pNext->setFocus(Qt::OtherFocusReason);
        break;
    case Qt::Key_Right:
        keyIndex = 0;
        lastKey = e->key();
        break;
    case Qt::Key_0:
    case Qt::Key_1:
    case Qt::Key_2:
    case Qt::Key_3:
    case Qt::Key_4:
    case Qt::Key_5:
    case Qt::Key_6:
    case Qt::Key_7:
    case Qt::Key_8:
    case Qt::Key_9:
        keyLogic(str, e->key());
        break;
    case Qt::Key_Backspace:
        str.remove(str.size()-1, 1);
        break;

    default:
        break;
    }

    setText(str);
}

void LineEditAlphaNum::keyLogic(QString& str, int key)
{
    char* Keys[] = {"0 ",
                    "1",
                    "2ABC",
                    "3DEF",
                    "4GHI",
                    "5JKL",
                    "6MNO",
                    "7PQRS",
                    "8TUV",
                    "9WXYZ"};

    char* keymap = Keys[ key - Qt::Key_0 ];
    int length = strlen(keymap);

    if ( lastKey == key )
    {
        keyIndex = (++keyIndex) % length;
        str.remove( str.size()-1, 1 );
    }
    else
    {
        keyIndex = 0;
        lastKey = key;
    }

    str.append( QChar( keymap[keyIndex] ) );
}
void LineEditAlphaNum::setPrevNextWidget(QWidget* prev, QWidget* next)
{
    m_pPrev = prev;
    m_pNext = next;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:06:13.673

您收到此链接错误，因为信号是尚未定义的 C++ 函数。这通常由 完成`moc`，它不会生成您的类的某些代码。

每当您想在`QObject`派生类中使用信号和插槽或需要其他使用 的东西时`QMetaObject`，您需要添加

```
Q_OBJECT 
```

在类定义的左大括号之后。

请注意，当您添加此宏时，您还需要**手动运行 qmake**，因为 QtCreator 会尝试智能并在`.pro`文件未更改的情况下跳过此构建步骤。但是必须将宏的预先或不存在`Q_OBJECT`视为对 qmake 的更改，因为`moc`（元对象编译器）需要运行在类定义中具有`Q_OBJECT`宏的所有文件。

# objective-c - 应用组织：类与数组

> ID：11170069
> 
> 赞同：1
> 
> 时间：2012-06-23T13:58:04.590
> 
> 标签：objective-c, ios, oop

我正在尝试创建一个为我生成发票的应用程序（我的第一个）。最初我的想法是有以下课程：

*   用户（以下所有应用程序数据属于谁）
*   客户（计费对象：姓名、公司名称、BillingAddress、电话等...）
*   任务（发票上的一个项目：名称、描述、HourlyRate 等...）
*   发票（由客户和多个任务组成的最终输出）

我想我可以让用户选择“添加新客户”，这将创建一个客户对象，然后将该对象存储到客户数组中。与“添加新任务”相同，它将创建一个任务对象并将其添加到任务数组中。然后，我将能够创建一个 Invoice 对象，该对象指向客户数组中的某个值和任务数组中的多个任务。

我遇到的问题是我不知道每次有人按下“添加新客户”或“添加新任务”时如何创建一个新对象。我试过做这样的事情：

```
Customer *customer = [[Customer alloc] init];
[customer setName:@"John Doe"];
[customer setCompanyName:@"John's Swimming Pools"];

[user1 addCustomer:customer];

[customer setName:@"Jane Smith"];
[customer setCompanyName:@"Cupcakes by Jane"];

[user1 addCustomer:customer];

for (int i = 0; i < [[user1 customers] count]; i++) {
    NSLog(@"%@",[[[user1 customers] objectAtIndex:i] name]);
} 
```

我意识到这不起作用，因为指向客户的指针被 Jane 覆盖，所以当打印数组时，其中的两个值都说“Jane Smith”。

每次用户决定添加客户/任务时，如何创建指向对象的新指针？还是我要解决这一切都错了，应该对所有内容使用数组而不是类？我觉得这是非常基本的 OOP，我正在努力解决它。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:12:17.207

如果每次有人按下并且只添加一个客户，那么为什么要在同一个地方添加两次？可以在客户类中定义一个简单的添加客户的工厂方法。首先在 Customer.h 中声明它，例如：

```
+(Customer*)createCustomerWithName:(NSString*)name AndCompany:(NSString*)cp; 
```

然后在 .m ：

```
+(Customer*)createCustomerWithName:(NSString*)name AndCompany:(NSString*)cp
{
   Customer *customer = [[Customer alloc] init];
   [customer setName:name];
   [customer setCompanyName:cp];
   return customer;
} 
```

然后在您的代码中，当您需要添加客户时，只需调用：

```
[user1 addCustomer:[Customer createCustomerWithName:@"ALan" AndCompany:@"MS"]]; 
```

并随时调用它。你的问题应该得到解决。

注意您必须在调用此工厂方法的类中导入 Customer.h。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:03:50.243

试试这个：

```
Customer *customer = [[Customer alloc] init];
[customer setName:@"John Doe"];
[customer setCompanyName:@"John's Swimming Pools"];

[user1 addCustomer:customer];

[customer release]; // if NOT using ARC
// or "customer = nil;" if using ARC

// now initialize a second customer object
customer = [[Customer alloc] init];
[customer setName:@"Jane Smith"];
[customer setCompanyName:@"Cupcakes by Jane"];

[user1 addCustomer:customer];

[customer release]; // if NOT using ARC; otherwise this won't compile

for (int i = 0; i < [[user1 customers] count]; i++) {
    NSLog(@"%@",[[[user1 customers] objectAtIndex:i] name]);
} 
```

在添加第一个客户之后，我不是 100% 确定“ `customer = nil;`”的事情（如果且仅当使用 ARC），但重要的是您需要实例化第二个客户对象，当您将其添加到数组时，您'将有两个单独的客户对象和记录。

# powershell - 用于检查 reg 密钥并将文件或文件夹复制到位置的 Powershell 脚本

> ID：11170071
> 
> 赞同：0
> 
> 时间：2012-06-23T13:58:24.447
> 
> 标签：powershell, batch-file, registry

尝试在 VDI 环境中为基于位置的打印编写脚本。登录到 VDI 会话后，网络打印机将根据客户端（瘦/零客户端）IP（使用 GPO）进行映射。根据该打印机名称（即“PRN-Printer1”），我需要将文件从共享（\Server\share\printer1）复制到本地 c:\drive\location。对于“PRN-Printer2”，它将从\Server\share\printer2 等复制。

我找到了一些用于检查 reg 密钥的脚本和另一个用于复制文件的脚本，但我需要一些帮助来将它们放在一起。我不是脚本专家，但我可以通过一些衬里摸索。

任何帮助将不胜感激！！！

这是我到目前为止...

检查注册表（不确定这是查找密钥的最佳方式）

```
reg query HKLM\SYSTEM\CurrentControlSet\Control\Print\Printers  /f "PRN-" /t REG_SZ /s /k  | find "Name" 
```

或者

```
pushd;sl HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Print\Printers; if(test-path PRN-){--???--}ELSE{"Printer does not exist"};popd 
```

复制文件：

```
ls "C:\drive\location" -r -i * | % {cp -force $_ ($_ -replace "c:\\drive\\location", "\\Server\share1")} 
```

或者

```
Copy-Item \\Server\Share\printer1\* C:\drive\location\ 
```

不确定如何将此逻辑放在一起或在注册表中检查此打印机的最佳方式，因为 VDI 会话中可能有多个打印机。

基本上，我需要一些东西：

如果 reg key (HCLM..) 是“PRN-printer1”，则将文件 \Server\share\printer1 复制到 c:\drive\location else... 检查打印机 2....printer3...等。 ..

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:34:56.313

You can use Get-Item to get list of all printers and store it in a variable $printername

```
$printername=(Get-Item "HKLM:\SYSTEM\CurrentControlSet\Control\Print\Printers\*").pschildname 
```

Heres what you will have in $printername

```
PRN-printer1
PRN-printer2
PRN-printer3 
```

Now for each $printer in $printername you can execute below script to copy files based on printer

```
ForEach($printer in $printername) {

if ($p -match  "PRN-printer1")

{
Copy-Item "\\Server\Share\printer1\*" "C:\drive\location"

}

elseif ($p -match  "PRN-printer1")

{

Copy-Item "\\Server\Share\printer2\*" "C:\drive\location"

}

elseif ($p -match  "PRN-printer1")

{

Copy-Item "\\Server\Share\printer2\*" "C:\drive\location"

}

} 
```

# c++ - C ++：func模板的实例化问题

> ID：11170075
> 
> 赞同：0
> 
> 时间：2012-06-23T13:58:59.277
> 
> 标签：c++, templates

我正在开发一个项目，其中包括我编写的类和函数模板。编译时出现此错误：

```
SNN.h In function `void KNN(const std::vector<T, std::allocator<_CharT> >&, std::vector<Cluster<T, K>, std::allocator<Cluster<T, K> > >&) [with T = int, unsigned int K = 5u]': 
```

其次是这个错误（我认为它们是连接的）：

```
1)instantiated from `void ClusteringExample() [with T = int]'
2)instantiated from here:ClusteringExample<int>();
3)SNN.h [Warning] comparing floating point with == or != is unsafe
**4) conversion from `<unknown type>' to non-scalar type `__gnu_cxx::__normal_iterator<const Product*, std::vector<Product, std::allocator<Product> > >' requested** 
```

当 ClusteringExampke 是 func 模板时。这是它的实现：

```
template <typename T>
void ClusteringExample()
    {
        std::vector<T> T_input;
        std::vector<Cluster<T,cluster_size> > clusters_T;
        FillVector( T_input, count_per_line );
        SNN( T_input, clusters_T);
        for (typename std::vector<Cluster<T,cluster_size> >::size_type i=0;       
    i<clusters_T.size(); i++ )
        {
            clusters_T[i].Print();
            std::cout << std::endl;
        }
        std::cout  << "===="<< std::endl; 
    } 
```

KNN 代码：**

```
void  KNN( const std::vector<T>& all_items, std::vector<Cluster<T,K> >& result )
{
     result.clear(); 
     if ( K > all_items.size() ) return; //we cannot create clusters bigger than the number of all items
     //for each item in all_items we will create a cluster
     for (typename std::vector<T>::size_type i=0; i < all_items.size(); i++ )
     {
         //this vector will save distances to the item i
         std::vector<double> distances;
         //passing over all items and calculating distance to the item i
         for (typename std::vector<T>::size_type j=0; j < all_items.size(); j++ )
         {
             distances.push_back( Distance(all_items[i], all_items[j] ));
         }
          //creating new cluster
         Cluster<T,K> new_cluster;
         //we are looking for K nearest distances
         std::sort( distances.begin(), distances.end() );
         for ( std::vector<double>::size_type d=0; d<K; d++ )
         {
              for (typename std::vector<T>::size_type j=0; j < all_items.size(); j++ )
               {
                  if (Distance(all_items[i], all_items[j] ) == distances[d] ) //every item which is closer then the "farest" is added to the cluster
                  {
                     new_cluster.Add( all_items[j] ); //we don't use the return value of Add in this implementation, but you need to support it
                  }
               }
         }
         result.push_back( new_cluster ); 
```

** 不得不说：我试图实例化的所有类型（int、double 和类类型）都会发生这种情况。这个错误对我来说没有太多信息。任何人都知道问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:34:04.200

如果你真的有这个代码：

```
template<typename T, size_t K> void Cluster<T,K>::Print() const {
  for(typename vector<T>::const_iterator iter=_cluster_vec.begin;iter!=_cluster_vec.end();++iter) {
    cout<<(*iter)<<" "; 
  }
} 
```

然后（a）您需要更改`begin`为`begin()`，并且（b）如果您在原始问题中发布了带有错误的代码，您将很快得到答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:28:02.127

该表达式`Distance(all_items[i], all_items[j] ) == distances[d]`有时可能会产生令人惊讶的效果...您永远不应该比较浮点数（`float`或`double`）是否相等或不相等。

我建议您阅读 IEEE 754 标准和 google 以进行*双重相等比较*以获取更多信息。

此外，比较和评论似乎并不同步，您正在比较平等，但评论声称：

```
//every item which is closer then the "farest" is added to the cluster 
```

也许你的意思是`<=`？

# vb.net - VB.net 获取窗口信息

> ID：11170076
> 
> 赞同：1
> 
> 时间：2012-06-23T13:59:13.277
> 
> 标签：vb.net

有人可以发布允许我通过名称读取特定窗口的位置和分辨率的代码，例如

```
private function findposition(byval windowtitle as string) 
```

欢呼马丁

我在用

```
Private Declare Function FindWindow Lib "user32" Alias _
    "FindWindowA" (ByVal lpClassName As String, ByVal _
    lpWindowName As String) As IntPtr

Private Declare Function GetWindowRect Lib "user32" (ByVal _
        hwnd As IntPtr, ByVal lpRect As Rectangle) As Integer

Dim lobbywindow As IntPtr = FindWindow("Appclass", "Appname")
Dim lobbyrectangle As New Rectangle

GetWindowRect(lobbywindow, lobbyrectangle) 
```

请协助解决这个问题，因为我收到错误

调用 PInvoke 函数 'App!App.Form1::GetWindowRect' 使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T14:08:34.000

在这种情况下，您需要使用 Windows API，此处描述了类似的问题：[http ://www.activevb.de/tipps/vb6tipps/tipp0111.html](http://www.activevb.de/tipps/vb6tipps/tipp0111.html)

你需要实施

```
Private Declare Function FindWindow Lib "user32" Alias _
        "FindWindowA" (ByVal lpClassName As String, ByVal _
        lpWindowName As String) As Long

Private Declare Function GetWindowRect Lib "user32" (ByVal _
        hwnd As Long, lpRect As RECT) As Long 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T14:08:57.783

我认为它适用于任何窗口，即使是外部的？这样的事情可能会有所帮助：

```
 [DllImport("user32.dll")]
    private static extern IntPtr FindWindow(string className, string windowName);

    [DllImport("user32.dll")]
    private static extern int GetWindowRect(IntPtr hwnd, out Rectangle rect);

    private void button2_Click(object sender, EventArgs e)
    {
        string className = "yourClassName";
        string windowName = "yourWindowName";

        Rectangle rect;
        IntPtr hwnd = FindWindow(className, windowName);
        GetWindowRect(hwnd, out rect);
    } 
```

# html - 用户电子邮件地址的自动填充对于 Internet Explorer 失败，但适用于 FireFox 和 Safari

> ID：11170082
> 
> 赞同：0
> 
> 时间：2012-06-23T14:00:16.303
> 
> 标签：html, visual-studio-2010, internet-explorer

IE 的自动填充失败，但适用于 Safari 和 FireFox。

我的 VisualBasic2010 网站的用户必须输入他们的电子邮件地址两次才能登录。但是当他们回到网络时，IE 永远不会自动填写。

这是页面上的内容............

输入您的电子邮件地址：[文本框]

再次输入您的电子邮件地址：[文本框]

这是 HTML ......................

```
<input name="USER_EMAIL_ADDRESS1" type="text" id="USER_EMAIL_ADDRESS1" title="Your email address for your Prayer Shepherd account." style="width:385px;"/>
<br/>
&nbsp;&nbsp;&nbsp; <span id="LOGIN_STATUS_MESSAGE1" style="background-color:#FFFF80;"></span>
<br/>
<span id="EMAIL_AGAIN_LABEL" title="Entering your email address again confirms that it is correct.">Enter your email address again:<br>
</span>
<input name="USER_EMAIL_ADDRESS_AGAIN" type="text" id="USER_EMAIL_ADDRESS_AGAIN" title="Your email address again, to verify that it is correct." style="width:385px;"/>
<br/>
<input type="submit" name="LOGIN_BUTTON" value="Login..." id="LOGIN_BUTTON" title="Logs in and shows all commands." style="font-size:X-Small;"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:30:03.690

你有哪个版本的IE？这个网站有一个解决这个问题的办法，适用于 IE8：

[http://answers.microsoft.com/en-us/ie/forum/ie8-windows_other/ie8-auto-complete-not-working/28e05990-d80e-4edc-9271-299f1c61555e](http://answers.microsoft.com/en-us/ie/forum/ie8-windows_other/ie8-auto-complete-not-working/28e05990-d80e-4edc-9271-299f1c61555e)

你在另一台电脑上试过吗？还可以尝试通过工具>选项重置浏览器设置，还有一些附加组件或工具栏可能会停止自动填充，例如谷歌工具栏。

# magento - 库存状态未显示在magento的产品页面中？

> ID：11170088
> 
> 赞同：0
> 
> 时间：2012-06-23T14:00:38.963
> 
> 标签：magento, magento-1.6

我在商店中添加了一个主题，之后一切正常，但 Instock status msg 停止显示。Out of stock 状态显示完美。

有人可以建议我哪里存在问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:04:06.973

该代码可能已从您的主题模板中删除。此代码所在的位置取决于您的 Magento 版本。

在 Magento 1.7 中，此文件位于：

```
app/deisgn/frontend/base/default/template/catalog/product/view/type/default.phtml 
```

包含：

```
<?php if ($_product->isAvailable()): ?>
    <p class="availability in-stock"><?php echo $this->__('Availability:') ?>     <span><?php echo $this->__('In stock') ?></span></p>
<?php else: ?>
    <p class="availability out-of-stock"><?php echo $this->__('Availability:') ?> <span><?php echo $this->__('Out of stock') ?></span></p>
<?php endif; ?> 
```

这将在您的文件的新主题版本中丢失：

```
app/deisgn/frontend/default/[THEMENAME]/template/catalog/product/view/type/default.phtml 
```

旧版本的 magento 将代码放在一个稍微不同的文件中，只需搜索它:)

# matlab - 为什么 arrayfun 没有提高我的结构数组操作性能

> ID：11170089
> 
> 赞同：1
> 
> 时间：2012-06-23T14:00:44.507
> 
> 标签：matlab, struct, profiler, vectorization

这是输入数据：

```
 % @param Landmarks:
  %           Landmarks should be 1*m struct. 
  %           m is the number of training set.
  %           Landmark(i).data is a n*2 matrix 
```

*旧*功能：

```
 function Landmarks=CenterOfGravity(Landmarks)
  % align center of gravity

  for i=1 : length(Landmarks)
      Landmarks(i).data=Landmarks(i).data - ones(size(Landmarks(i).data,1),1)...
          *mean(Landmarks(i).data);
  end
  end 
```

*使用arrayfun的*新函数：**

 *```
 function [Landmarks] = center_to_gravity(Landmarks)
  Landmarks = arrayfun(@(struct_data)...
                          struct('data', struct_data.data - repmat(mean(struct_data.data), [size(struct_data.data, 1), 1]))...
                                              ,Landmarks);
  end %function center_to_gravity 
```

使用分析器时，我发现时间的使用*不是*我所期望的：

```
 Function          Total Time    Self Time*
  CenterOfGravity     0.011s      0.004 s
  center_to_gravity   0.029s      0.001 s 
```

有人能告诉我为什么吗？

顺便说一句...我不能将“arrayfun”添加为我的声誉的新标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T15:10:41.060

使用`arrayfun`并不能算作“矢量化代码”，正如每篇 Matlab 性能博客文章中所描述的那样。

如果您的`.data`字段对于地标的所有条目的长度相同，您可以通过首先将所有数据放入单个 DATASIZE-BY-LANDMARKSIZE martix 来矢量化此代码，然后运行此命令

```
meanRemovedData = bsxfun(@minus, data, mean(data,1)); 
```

但是这样你会失去很多代码清晰度。（我很确定它`bsxfun`通常具有类似矢量化的速度优势，但我今天早上还没有进行任何测试。）

* * *

至于为什么，我真的不是问这个问题的合适人选。但是向量化的许多优点都依赖于对连续的内存块执行简单的操作。存储在结构数组中的数据（我相信）存储为指向不同内存位置的指针数组，这就是为什么您可以在`Landmarks(i).data`不重新分配整个结构数组的情况下更改大小或类的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T01:54:16.117

感谢 Amro 和 Pursuit 对我的问题的热情。

我从[Jan Simon](http://mathworks.com/matlabcentral/answers/contributors/869888-jan-simon)那里得到了Matlab 答案的*最佳*解决方案：

[为什么 arrayfun 没有提高我的结构数组操作性能](http://mathworks.com/matlabcentral/answers/41876-why-arrayfun-does-not-improve-my-struct-array-operation-performance)

有一些点确实可以提高性能：

1.  令人惊讶的是，SUM/LENGTH 比 MEAN 快
2.  [timeit](http://www.mathworks.com/matlabcentral/fileexchange/18798-timeit-benchmarking-function)可以给出更准确的结果。
3.  最快的方法使用这样的技巧：

    m =总和（数据，1）/大小（数据，1）；数据(:, 1) = 数据(:, 1) - m(1);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T22:47:18.687

考虑以下三个实现（全部使用 BSXFUN 进行矢量化）：

```
function s = func1(s)
    for i=1:numel(s)
        s(i).data = bsxfun(@minus, s(i).data, mean(s(i).data));
    end
end

function v = func2(s)
    v = arrayfun(@(ss) bsxfun(@minus,ss.data,mean(ss.data)), ...
        s, 'UniformOutput',false);
    v = struct('data',v);
end

function v = func3(s)
    v = arrayfun(@(ss) struct('data',bsxfun(@minus,ss.data,mean(ss.data))), ...
        s, 'UniformOutput',true);
end 
```

解释：

*   首先使用 for 循环遍历结构数组。
*   第二个使用 ARRAYFUN 返回数据矩阵的元胞数组，然后将其传递给 STRUCT 以构建结构数组。
*   最后一个使用 ARRAYFUN 并在每次迭代时直接构建一个结构。

这是一个比较时间的简单测试：

```
function testArrayStruct()
    %# sample array of structures
    s = struct('data',[]);
    for i=5000:-1:1
        s(i).data = rand(randi(1000),2);
    end

    %# timing
    tic; v1 = func1(s); toc
    tic; v2 = func2(s); toc
    tic; v3 = func3(s); toc

    %# check all have the same output
    assert(isequal(v1,v2,v3))
end 
```

结果：

```
Elapsed time is 0.357796 seconds.         %# func1
Elapsed time is 0.427568 seconds.         %# func2
Elapsed time is 0.537971 seconds.         %# func3 
```

所以你可以看到基于循环的解决方案实际上是最快的..*

# asp.net-mvc-3 - 如何在 MVC3 中添加和使用多个布局

> ID：11170097
> 
> 赞同：0
> 
> 时间：2012-06-23T14:02:39.993
> 
> 标签：asp.net-mvc-3, layout, razor

我是 MS MVC3 的新手。我在 MVC3 中使用带有剃刀视图引擎的 C#。有一个“共享”文件夹（在 MVC3 框架中），其中一个 _Layout.cshtml 文件由其他视图文件共享。但是我怎样才能创建更多像 _Layout.cshtml 这样的文件呢？我如何添加和使用多个 _Layout.cshtml 文件，这些文件将通过特定的视图文件共享设计，请让我一步一步知道，因为我是 MVC3 的新手。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T14:09:30.440

您可以根据`Layouts`需要创建任意数量。视图的默认布局在`_ViewStart.cshtml`文件中设置。

如果您想在视图中使用不同的布局，您所要做的就是`Layout`在视图的开头设置属性。

```
@{
    Layout = "~/Views/Shared/_MyLayout.cshtml";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:12:50.673

如果您在解决方案资源管理器中右键单击该文件夹，它将为您提供一个菜单，其中会显示添加->。如果您选择“新建”，弹出窗口会给您一个列表，您可以从菜单中选择布局视图。选择添加视图后，您可以从下拉列表中选择布局。

# objective-c - PocketSphinx 可以识别语音字符串中是否包含单词吗？

> ID：11170098
> 
> 赞同：1
> 
> 时间：2012-06-23T14:03:17.667
> 
> 标签：objective-c, ios5, speech-recognition

我正在为 iOS 开发一个语音控制程序，并使用 Pocketsphinx 作为我的识别引擎。我希望它识别口头命令是否包含单词“Morning”，并以morningGreetings 数组中的一个短语作为响应。我的代码看起来像这样-

```
if([hypothesis rangeOfString:@"morning"].location == !NSNotFound) {
    NSString *text= [morningGreetings objectAtIndex:arc4random() % [morningGreetings count]];;
    [self.fliteController say:[NSString stringWithFormat:text] withVoice:self.firstVoiceToUse];
} 
```

但是，使用此代码，识别器仅在“Morning”是语音字符串中的第一个单词时才执行命令。我希望它回应“早上好”、“早上好，不是吗”、“你今天早上好吗？”等。我可以改变什么来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:11:31.480

> 我希望它识别口语命令是否包含单词“Morning”（...）但是，使用此代码，识别器仅在“Morning”是口语字符串中的第一个单词时才执行命令。

您的条件`location == !NSNotFound`相当于`location == 0`因为`!NSNotFound`等于 0，因此它仅在“morning”是字符串中的第一个单词时执行。你想要的是`location != NSNotFound`.

像这样改变条件：

```
if ([hypothesis rangeOfString:@"morning"].location != NSNotFound) { ... } 
```

# arrays - 将数据复制（导入）到 PostgreSQL 数组列中

> ID：11170099
> 
> 赞同：16
> 
> 时间：2012-06-23T14:03:21.730
> 
> 标签：arrays, postgresql, postgresql-8.4

应该如何格式化（CSV？）文本文件，以便可以将其导入（使用`COPY`？）到 PostgreSQL（8.4）表中的数组列中？

给定表`testarray`：

```
 Column  |          Type           |
---------+-------------------------|
 rundate | date                    | 
 runtype | integer                 | 
 raw     | double precision[]      | 
 labels  | character varying(16)[] | 
 results | double precision[]      | 
 outcome | character varying(8)[]  | 
```

和

```
COPY testarray from '/tmp/import.txt' CSV 
```

没有以下`import.txt`工作内容：

```
2010/06/22,88,{{1,2},{3,4}},{{1,2},{3,4}},{{1,2},{3,4}},{{1,2},{3,4}}
2010/06/22,88,1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4
2010/06/22,88,'{{1,2},{3,4}}','{{1,2},{3,4}}','{{1,2},{3,4}}','{{1,2},{3,4}}'
2010/06/22,88,'1,2,3,4','1,2,3,4','1,2,3,4','1,2,3,4' 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-23T14:28:14.107

```
COPY testarray from '/tmp/import.txt' CSV

2010-06-22,88,"{{1,2},{3,4}}","{{1,2},{3,4}}","{{1,2},{3,4}}","{{1,2},{3,4}}" 
```

# .net - 使用 MSDeploy 自动迁移数据库

> ID：11170104
> 
> 赞同：9
> 
> 时间：2012-06-23T14:04:06.767
> 
> 标签：.net, sql-server, continuous-integration, msdeploy, webdeploy

我是一个持续交付迷，我对自动化构建、测试和部署过程充满热情。我真正需要帮助的一件事是在自动化部署中部署数据库迁移脚本时的最佳实践是什么。这些是我的技术堆栈的相关细节。

*   ASP.NET MVC 3 网站
*   Visual Studio 2010 数据库项目
*   SQL Server 2008 R2 数据库
*   视窗服务器 2008 R2
*   通过 Web Deploy 2.0 (MS Deploy) 进行远程部署

目前，我能够使用 Web Deploy 2.0 工具部署我们的 ASP.NET MVC 网站（哇，设置起来很有趣！）。MSDeploy 有一个“dbFullSql”提供程序，但这只能用于部署整个数据库，而不是迁移。MSDeploy 为扩展“runCommand”提供程序敞开大门，以便在远程服务器上执行任意进程。我想我可以利用它以这种方式执行我的迁移脚本。但是，我觉得应该有更好的方法来做到这一点。

回答时请记住，我想将 MSDeploy 用于与远程部署目标的所有交互。尽管如果您知道一种可用于将迁移安全地推送到不是 MSDeploy 的远程目标的工具，我也会有兴趣了解它！

编辑：回答者（谁删除了他们的答案！）参考了以下文章：[http ://www.asp.net/web-forms/tutorials/deployment/web-deployment-in-the-enterprise/deploying-database-项目](http://www.asp.net/web-forms/tutorials/deployment/web-deployment-in-the-enterprise/deploying-database-projects)

这是一个很棒的资源，我不知道。我以一种或另一种形式阅读过大部分内容，不幸的是，这篇特定的文章再次证实了我自己的怀疑。从本质上讲，没有简单的方法可以使用当前工具推送自定义增量更新（vaporware 承诺在典型 MS 风格的未来版本中提供更好的功能）。

在它提到的文章主题的注释中。

> ... 使用 VSDBCMD 是增量数据库发布的推荐方法。

然而，VSDBCMD 只能在源和目标之间生成增量脚本，我根本不相信迁移，尤其是在生产部署中。本文提到的通过 Web Deploy 推送增量更新的唯一解决方案是创建包含自定义 SQL 迁移脚本的自定义 WPP 目标文件。

> 您可以将 Web 部署配置为运行数据库项目生成的 SQL 部署脚本，但为此，您需要为您的 Web 应用程序项目创建一个自定义 WPP 目标文件。这大大增加了部署过程的复杂性。此外，Web Deploy 不直接支持对现有数据库的增量更新。有关此方法的更多信息，请参阅[扩展 Web 发布管道以打包数据库项目部署的 SQL 文件](http://blogs.msdn.com/b/webdevtools/archive/2010/03/24/extending-the-web-publishing-pipeline-to-package-database-project-deployed-sql-file.aspx)。

啊！它确实看起来很复杂。我以前读过这个，我希望有更好的方法。目前，我仍然倾向于执行 SQLCMD 的 MSDeploy 'runCommand' 提供程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T03:25:53.230

您实际上可以将 SQL 脚本指定为 dbFullSql 提供程序 ( `-source:dbfullsql="C:\sqlcmd.sql"`) 的“源”，它只会运行该脚本。我之前使用过它来部署一个自定义的迁移脚本管理工具，该工具会生成。

我确实希望数据库项目对 CD 更友好，因为当需要进行 db 重构时，“自动”的东西往往会很快崩溃。

[Web 部署 dbFullSql 提供程序](http://technet.microsoft.com/en-us/library/dd569036%28v=ws.10%29.aspx)参考

# azure - 如何将 Azure Blob 移动到其他订阅

> ID：11170107
> 
> 赞同：1
> 
> 时间：2012-06-23T14:04:27.097
> 
> 标签：azure, azure-blob-storage

我需要将 Azure blob 移动到另一个订阅（这些 blob 主要是图像）。

我有哪些选择？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:40:42.263

您可以使用[RedGate 云服务](https://cloudservices.red-gate.com)来做到这一点（无从属关系）。他们有一个功能，您可以同步两个存储帐户。最重要的是，前 10 天**免费。**如果您只需要初始副本，您基本上可以免费完成。

这就是你的做法：

1.  前往：
    [https ://cloudservices.red-gate.com/](https://cloudservices.red-gate.com/)
2.  注册（免费）
3.  转到：
    [https ://cloudservices.red-gate.com/Sync/AzureAzure](https://cloudservices.red-gate.com/Sync/AzureAzure)
4.  输入您的存储帐户数据，点击继续并等待

# javascript - 如何使用“this”作为选择器的一部分？

> ID：11170109
> 
> 赞同：2
> 
> 时间：2012-06-23T14:04:47.177
> 
> 标签：javascript, jquery

我试着这样做：

```
$(this + ' li:not(:nth-last-child(2)):not(:last-child)').hide() 
```

完整代码示例：

```
$('.comments').each(function(){
    $(this + ' li:not(:nth-last-child(2)):not(:last-child)').hide()
    var template = $('#expand').html();
    $(this).prepend(template)
}); 
```

我需要将它作为“每个”函数运行，因为我想稍后输入一个条件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T14:06:08.900

试试*这个*：

```
$('li:not(:nth-last-child(2)):not(:last-child)', this).hide(); 
```

来自[文档](http://api.jquery.com/jQuery/)

> jQuery( 选择器 [, 上下文] )
> 
> 选择器 - 包含选择器表达式的字符串
> 
> context - 用作上下文的 DOM 元素、文档或 jQuery

所以你可以`this`用作上下文参数：

```
$('.comments').each(function(){
    $('li:not(:nth-last-child(2)):not(:last-child)', this).hide()
    var template = $('#expand').html();
    $(this).prepend(template)
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T14:06:03.487

如果你想找到所有`li:not(:nth-last-child(2)):not(:last-child)`inside `this`，你可以使用`find()`：

```
$(this).find('li:not(:nth-last-child(2)):not(:last-child)').hide(); 
```

另外值得注意的是，如果您知道要查找的元素只会是一级深度，那么您应该使用`children()`而不是`find()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T14:07:59.663

这是一个对象而不是字符串，您可以将其他字符串附加到该对象上以构建您需要的选择器。

只需使用[find()](http://api.jquery.com/find/)来遍历代码：

```
$('.comments').each(function(){
    $(this).find('li').not(':nth-last-child(2)').not(':last-child').hide();
    var template = $('#expand').html();
    $(this).prepend(template);
}); 
```

# objective-c - 单击时更改按钮背景颜色

> ID：11170116
> 
> 赞同：5
> 
> 时间：2012-06-23T14:06:15.193
> 
> 标签：objective-c, xcode, uibutton

我创建了一个按钮，我想在用户单击时更改它的颜色。我看到了“setimagebackground ... forstate ...”选项，但没有其他选项可以更改背景颜色。我在 viewdidload 中更改了 y 按钮的值，当我使用“settint color:[uicolor redcolor]”时什么也没发生。我该如何解决？这是我的代码：

```
 button1.layer.borderColor = [[UIColor purpleColor]CGColor];
    button1.layer.cornerRadius = 8.0f;
    button1.layer.masksToBounds = YES;
    button1.layer.borderWidth = 1.0f; 
    [button1.tintColor = [UIColor redColor]CGColor];
    [button1 setTintColor:[UIColor blueColor]];
    [button1 setTitleColor:[UIColor cyanColor] forState:UIControlStateNormal];
    [button1 setTitleColor:[UIColor redColor] forState:UIControlStateHighlighted];
    [button1 setTintColor:[UIColor redColor]]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T14:54:12.303

带图像：

```
[button1 setBackgroundImage:[UIImage imageNamed:@"redButton.png"]]; 
```

无图像：

```
[button1 setBackgroundColor:[UIColor redColor] ]; 
```

有了这个，你可以获得圆形边框：

```
 CALayer * layer = [button1 layer];     
     [layer setCornerRadius:8.0f];
     [layer setMasksToBounds:YES];
     [layer setBorderWidth:1.0f];
     [layer setBorderColor:[[UIColor whiteColor] CGColor]];
     button1.backgroundColor = [UIColor redColor]; 
```

对于选中状态子类 UIButton 用这种方式：

在 .h 文件中：

```
@interface MyButton : UIButton 
{
@private
    NSMutableDictionary *backgroundStates;
@public

}

- (void) setBackgroundColor:(UIColor *) _backgroundColor forState:(UIControlState) _state;
- (UIColor*) backgroundColorForState:(UIControlState) _state;

@end 
```

在 .m 文件中：

```
#import "MyButton.h"

@implementation MyButton

- (void) setBackgroundColor:(UIColor *) _backgroundColor forState:(UIControlState) _state {
    if (backgroundStates == nil) 
        backgroundStates = [[NSMutableDictionary alloc] init];

    [backgroundStates setObject:_backgroundColor forKey:[NSNumber numberWithInt:_state]];

    if (self.backgroundColor == nil)
        [self setBackgroundColor:_backgroundColor];
}

- (UIColor*) backgroundColorForState:(UIControlState) _state {
    return [backgroundStates objectForKey:[NSNumber numberWithInt:_state]];
}

#pragma mark -
#pragma mark Touches

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesBegan:touches withEvent:event];

    UIColor *selectedColor = [backgroundStates objectForKey:[NSNumber numberWithInt:UIControlStateHighlighted]];
    if (selectedColor) {
        CATransition *animation = [CATransition animation];
        [animation setType:kCATransitionFade];
        [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
        [self.layer addAnimation:animation forKey:@"EaseOut"];
        self.backgroundColor = selectedColor;
    }
}

- (void) touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesCancelled:touches withEvent:event];

    UIColor *normalColor = [backgroundStates objectForKey:[NSNumber numberWithInt:UIControlStateNormal]];
    if (normalColor) {
        CATransition *animation = [CATransition animation];
        [animation setType:kCATransitionFade];
        [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
        [self.layer addAnimation:animation forKey:@"EaseOut"];
        self.backgroundColor = normalColor;
    }
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesEnded:touches withEvent:event];

    UIColor *normalColor = [backgroundStates objectForKey:[NSNumber numberWithInt:UIControlStateNormal]];
    if (normalColor) {
        CATransition *animation = [CATransition animation];
        [animation setType:kCATransitionFade];
        [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
        [self.layer addAnimation:animation forKey:@"EaseOut"];
        self.backgroundColor = normalColor;
    }
}

- (void) dealloc {
    [backgroundStates release];
    [super dealloc];
}

@end 
```

然后在你的 ViewController 中（记得包含你的自定义类）你可以这样设置颜色：

```
[button1 setBackgroundColor:[UIColor colorWithRed:0.8 green:0.7 blue:0.6 alpha:1.0] forState:UIControlStateHighlighted]; 
```

# asp.net-mvc-4 - ASP.NET MVC4 移动站点在本地主机而非部署服务器上正确显示

> ID：11170117
> 
> 赞同：1
> 
> 时间：2012-06-23T14:06:45.240
> 
> 标签：asp.net-mvc-4, opera-mobile

我有一个包含移动内容的 ASP.NET MVC4 站点。当我在本地开发机器上部署它时，移动内容就是我在 Opera Mobile 中访问 localhost/mysite 时看到的内容。但是，当我将它部署到我的实际服务器时，我在 Opera Mobile 上看到了桌面版本。在我的 Windows Phone 上访问该站点时，我获得了相同的桌面视图。

我假设这不是 DisplayModeProvider 问题，因为站点在本地主机上按预期工作。我应该看什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:13:04.013

安装的 .NET 4.5 RC 解决了这个问题。我可能在 ASP.NET MVC4 需要 .NET 4.5 的文档中错过了这一点。

# dbus - DBus SystemBus 政策

> ID：11170118
> 
> 赞同：10
> 
> 时间：2012-06-23T14:07:08.530
> 
> 标签：dbus, policy

我编写了一个通过 dbus 作为会话服务运行的程序。
如果由 root (uid 0) 执行，我想让它作为系统服务运行（创建 dbus.SystemBus 总线名称）。
我正在尝试为 dbus.SystemBus 运行我目前为 dbus.SessionBus 运行的程序，但出现策略错误。
代码（python，但它并不重要），从所有不必要的东西中清除，我运行是这样的：

```
import gobject
import dbus
import dbus.service
from dbus.mainloop.glib import DBusGMainLoop

DBusGMainLoop(set_as_default=True)
loop = gobject.MainLoop()

class dbusService(dbus.service.Object):
    def __init__(self):
        bus_name = dbus.service.BusName('org.testobj.service', bus=dbus.SystemBus())
        dbus.service.Object.__init__(self, bus_name, '/org/testobj/service')

a = dbusService() 
```

并得到：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in __init__
  File "/usr/lib/python2.7/site-packages/dbus/service.py", line 131, in __new__ retval = bus.request_name(name, name_flags)
  File "/usr/lib/python2.7/site-packages/dbus/bus.py", line 303, in request_name 'su', (name, flags))
  File "/usr/lib/python2.7/site-packages/dbus/connection.py", line 651, in call_blocking message, timeout)
dbus.exceptions.DBusException: org.freedesktop.DBus.Error.AccessDenied: Connection ":1.48" is not allowed to own the service "org.testobj.service" due to security policies in the configuration file 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-07-10T16:21:18.530

使用上述示例的最简单方法是编辑`/etc/dbus-1/system.conf`并添加以下行：

```
<policy>
    ...
    <allow own="org.testobj.service"/>
</policy> 
```

[相关文件](http://dbus.freedesktop.org/doc/dbus-daemon.1.html)。

# python - 没有行为的对象

> ID：11170120
> 
> 赞同：7
> 
> 时间：2012-06-23T14:07:59.103
> 
> 标签：python, object-oriented-analysis

我正在考虑一种情况，我有一个对象“交易”，它有很多属性，比如帐户、金额、日期、货币、类型等。

我从不打算改变这些数据点，计算逻辑将存在于其他类中。我的问题是，为了保存数据而实例化数千个对象是不是很糟糕的 Python 设计？我发现嵌入类中的数据更容易处理，而不是试图将其塞进某种数据结构的组合中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T14:13:01.220

不，这完全没问题。事实上，Python 在标准`collections`模块中已经支持它：

```
from collections import namedtuple

Transaction = namedtuple("Transaction", ["account", "amount"]) 
```

而不是`class Transaction(object):`等。请注意，这`namedtuple`是一种“类工厂”，您需要将要构造的类的名称作为字符串传递给它。这不一定是您将结果绑定到的名称，但这样做仍然是一个好主意。命名元组类型类似于 Pascal 中的记录或 C 中的结构：具有命名成员但自身没有重要行为的数据持有者。

用法：

```
>>> t = Transaction(account="my private account", amount=+1000)
>>> t
Transaction(account='my private account', amount=1000)
>>> t.amount
1000
>>> t.amount += 1
Traceback (most recent call last):
  File "<ipython-input-6-ae60188f2446>", line 1, in <module>
    t.amount += 1
AttributeError: can't set attribute 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:31:42.723

我想说无论如何，所有的价值都是对象。假设您将有一个字典 {'transaction name':[123,'GBP','12/12/12',1234,'in']}，而不是事务类实例。现在这个字典又是一个对象，不同的是它不是你自己的类。无论如何，一切都是对象。某物是一个物体这一事实，并不会自动使它变得笨重、大、慢或其他。可能您仍然需要考虑在给定时间内要在内存中保留多少对象的这些事务？

在我看来，这是清晰的代码设计问题。假设现在您有一本具有操作方法的类书，接受事务对象作为属性。当此操作方法将使用对象属性时，它会比引用列表的第 n 个元素要清晰得多。

事实上，它是一个类，它也让您有机会在未来修改或添加功能。例如，您可能想要添加所有交易的日志记录，或者在某个时候提取方法。

# android - Android 搜索对话框如何将输入限制为仅限数字？

> ID：11170123
> 
> 赞同：0
> 
> 时间：2012-06-23T14:08:19.960
> 
> 标签：android, validation, search-dialog

我正在为我的 Android 应用程序构建一个邮政编码搜索页面，所以我想强制用户输入 5 个数字。我到处搜索，但没有看到[Search Dialog](http://developer.android.com/guide/topics/search/search-dialog.html)的任何方法。我知道可以将文本输入字段设置为数字类型，我该如何为搜索对话框执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:14:46.907

在`searchable`您定义的中，您可以设置输入类型。

有关更多信息，请参阅此处：

[http://developer.android.com/guide/topics/search/searchable-config.html](http://developer.android.com/guide/topics/search/searchable-config.html)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:15:38.250

您可以使用可搜索配置

在那你可以指定

```
android:inputType="inputType"
android:imeOptions="imeOptions" 
```

了解更多信息

[http://developer.android.com/guide/topics/search/searchable-config.html](http://developer.android.com/guide/topics/search/searchable-config.html)

# windows-phone-7 - 如何从 Windows Phone 7 的密码框中获取文本？

> ID：11170126
> 
> 赞同：1
> 
> 时间：2012-06-23T14:08:35.987
> 
> 标签：windows-phone-7

我试图从密码框中获取价值以开发简单的登录功能，但是，像文本框一样，没有文本属性。那么如何获取密码框的值呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T14:18:04.003

只需使用`string password = yourPasswordBox.Password;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T14:14:26.047

您需要使用[Password](http://msdn.microsoft.com/en-us/library/system.windows.controls.passwordbox.password%28VS.95%29.aspx)属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-14T18:55:29.360

如果你使用 caliburn micro，你可以像这个例子一样做

看法

`<TextBox x:Name="login"/> <TextBox x:Name="key"/> <Button cal:Message.Attach="[Event Click] = [Action ConfirmButton(login.Text,key.Password)]"/>`

视图模型

```
public void ConfirmButton(String user, String key)
    {
        Debug.WriteLine("LOGIN -> USER -> " + user + " key -> "+key);

    } 
```

# google-apps-script - 我无法从 Contacts[i].getCustomFields("Organization ID");

> ID：11170127
> 
> 赞同：1
> 
> 时间：2012-06-23T14:08:38.987
> 
> 标签：google-apps-script

我一直在尝试从为我们的大多数联系人定义的自定义字段中获取自定义值，但是我们没有从下面的脚本中获取任何数据，任何人都可以找出我的脚本哪里出错了。下面是我正在使用的示例脚本。

在下面的脚本中，我可以获得主要电子邮件值，但所有联系人的自定义字段值都是空白的，即使联系人中存在该值。

```
function GetContactDir() {

var All_Contacts = ContactsApp.getContacts();  

var email = new String();
var cust = new String();  
var Con_arr = new Array();

for (var i=0; i<All_Contacts.length; i++)
{

  email = "";
  email = All_Contacts[i].getPrimaryEmail();

  Con_arr = All_Contacts[i].getCustomFields("Organization ID");  //NOT WORKING

  if (!(email=="") && !(email==null) )
    Browser.msgBox(email + " **" + Con_arr[0] +  " ** " + String(i) ); 
}

} 
```

问候， Saravana Kumar P.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:02:28.057

请试试这个：使用

```
`Con_arr = All_Contacts[i].getCustomFields();`  //without the string value 
```

并替换你的行`Browser.msgBox ...`

有了这个 ：

```
if(!(Con_arr.length==0)){Logger.log(email + " **" +Con_arr[0].getLabel()+" = "+Con_arr[0].getValue() )}; 
```

然后查看记录器（菜单>查看>日志）

编辑：这是完整的简化测试代码：

```
function GetContactDir() {

var All_Contacts = ContactsApp.getContacts();  

var email = '';
var cust = '';  
var Con_arr = new Array()

for (i=0; i<All_Contacts.length; i++){

  email = All_Contacts[i].getPrimaryEmail();

  Con_arr = All_Contacts[i].getCustomFields() ;  
  if (!(email=="") && !(email==null) )

    if(Con_arr.length>0){Logger.log(email + " **" +Con_arr[0].getLabel()+" = "+Con_arr[0].getValue() )}; 
}
} 
```

EDIT2：让我们尝试以另一种方式解决问题，按自定义字段搜索：（请用有效值替换值）

```
function GetContact_test() {
var All_Contacts = ContactsApp.getContactsByCustomField('value of the field', 'name of the custom field');// note that the first term is a 'QUERY' so you don't need to give the entire ID, a single letter can bring results !
for(n=0;n<All_Contacts.length;++n){
Logger.log(n+'  '+All_Contacts[n].getFullName()); 
}
} 
```

# php - 按包含 html 实体的第一个字母拆分数组

> ID：11170132
> 
> 赞同：1
> 
> 时间：2012-06-23T14:09:18.703
> 
> 标签：php, unicode, utf-8, html-entities

我有一个像这样的国家的数组

```
array(249) {
  [0]=>
  array(4) {
    ["country_id"]=>
    string(1) "2"
    ["country_name_en"]=>
    string(19) "&Aring;land Islands"
    ["country_alpha2"]=>
    string(2) "AX"
    ["country_alpha3"]=>
    string(3) "ALA"
  }
  etc.
} 
```

我想用第一个字母分割它，所以我得到一个这样的数组

```
array(26) {
 'A' => array(10) {
    array(4) {
      ["country_id"]=>
      string(1) "2"
      ["country_name_en"]=>
      string(19) "&Aring;land Islands"
      ["country_alpha2"]=>
      string(2) "AX"
      ["country_alpha3"]=>
      string(3) "ALA"
    }
    etc.
  }
  etc.
} 
```

但问题是国家名称数组包含 html 实体作为第一个字符。

任何想法如何做到这一点？

提前致谢

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:08:36.600

如果你想`Åland Islands`被归档`A`，你需要比已经建议的[html_entity_decode()](http://php.net/html_entity_decode)做更多的事情。

[intl](http://php.net/intl)包含[Normalizer::normalize()](http://www.php.net/manual/en/normalizer.normalize.php)，一个要转换`Å`为`Å`. 迷茫了吗？该 unicode 符号 (U+00C5 ) 在 UTF-8 中可以表示为`0xC385`(Composition) 和(Decomposition)。是，是。`0x41CC8A``0x41``A``0xCC8A``̊`

因此，要正确归档您的岛屿，您需要执行以下操作：

```
$string = "&Aring;land Islands";
$s = html_entity_decode($string, ENT_QUOTES, 'UTF-8');
$s = Normalizer::normalize($s, Normalizer::FORM_KD);
$s = mb_substr($s, 0, 1); 
```

很有可能，您的环境没有安装[intl](http://php.net/intl)。如果是这种情况，您可能会查看[urlify()](https://gist.github.com/909692)，这是一个将字符串简化为字母数字部分的函数。

* * *

有了以上你应该能够

1.  循环原始数组
2.  提取国名
3.  清理国家名称并提取第一个字符
4.  根据（3）的特征构建一个新数组

注意：请注意，国家`Armenia`和`Austria`地区`Australia`都将在`A`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:12:52.873

遍历数组，使用[html_entity_decode()](http://www.php.net/manual/en/function.html-entity-decode.php)解码 html 实体，然后使用[mb_substr()](http://php.net/manual/en/function.mb-substr.php)进行拆分。

```
foreach($array as $values) {
    $values['country_name_en'] = html_entity_decode($values['country_name_en']);
    $index = mb_substr($values['country_name_en'], 0, 1);

    $new_array[$index] = $values;
} 
```

* * *

或者您可以使用 jlcd 建议的功能：

```
function substr_unicode($str, $s, $l = null) {
    return join("", array_slice(
        preg_split("//u", $str, -1, PREG_SPLIT_NO_EMPTY), $s, $l));
}

foreach($array as $values) {
    $values['country_name_en'] = html_entity_decode($values['country_name_en']);
    $index = substr_unicode($values['country_name_en'], 0, 1);

    $new_array[$index] = $values;
} 
```

# python - 将 MySQL 与 Django 一起使用 - 用户“@”localhost 的访问被拒绝

> ID：11170133
> 
> 赞同：25
> 
> 时间：2012-06-23T14:09:28.320
> 
> 标签：python, mysql, django

所以我正在通过这个资源学习 Django (1, 3, 1, 'final', 0)：http: [//www.djangobook.com/en/2.0/chapter05/](http://www.djangobook.com/en/2.0/chapter05/)

我通过 Synaptic 安装了“mysql-server”和“python-mysqldb”。我更改了 settings.py 中的相关设置。

上面提到的书告诉我们从 manage.py shell 运行：

```
>>> from django.db import connection
>>> cursor = connection.cursor() 
```

运行这些命令后出现此错误：

```
OperationalError: (1044, "Access denied for user ''@'localhost' to database 'mydb'")

  Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/django/db/backends/__init__.py", line 250, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "/usr/lib/python2.7/dist-packages/django/db/backends/mysql/base.py", line 322, in _cursor
    self.connection = Database.connect(**kwargs)
  File "/usr/lib/python2.7/dist-packages/MySQLdb/__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
  File "/usr/lib/python2.7/dist-packages/MySQLdb/connections.py", line 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
OperationalError: (1044, "Access denied for user ''@'localhost' to database 'mydb'") 
```

MySQL第一次安装时确实要求我设置root密码，这里可以使用吗？或者是别的什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-23T14:25:14.343

您的用户无权访问数据库。使用以下命令设置您的数据库。

```
DROP DATABASE IF EXISTS `mydb`;
CREATE DATABASE `mydb`
    DEFAULT CHARACTER SET utf8
    DEFAULT COLLATE utf8_general_ci;

USE 'mysql';
GRANT ALL PRIVILEGES ON mydb.* TO 'mydb_user'@'localhost' IDENTIFIED BY 'your_password'

WITH GRANT OPTION;
FLUSH PRIVILEGES; 
```

此外，您需要有足够的权限才能运行它。然后将其另存为 script.sql，

```
$mysql -u root -p < script.sql 
```

比 settings.py 需要确保您的数据库设置正确设置的地方

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'mydb',                  
        'USER': 'mydb_user',             
        'PASSWORD': 'your_password',                  
        'HOST': '',                     
        'PORT': '',                      
    }
} 
```

和

```
python manage.py syncdb 
```

你就完成了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-03T21:20:24.530

[在遵循 Django 测试教程（ https://docs.djangoproject.com/en/dev/intro/tutorial05/](https://docs.djangoproject.com/en/dev/intro/tutorial05/)）时，我也遇到了这个问题。在尝试测试民意调查应用程序时，我收到以下错误：

```
user@host:~/django/mysite$ python manage.py test polls

Creating test database for alias 'default'...
Got an error creating the test database: (1044, "Access denied for user 'admin'@'localhost' to database 'test_django_mysite'")
Type 'yes' if you would like to try deleting the test database 'test_django_mysite', or 'no' to cancel: 
```

问题是 django 正在创建一个名为 test_django_mysite 的临时数据库。
我能够通过授予对它试图创建的 test_django_mysite 数据库上的“admin”@“localhost”的访问权限来解决这个问题。

```
mysql> GRANT ALL PRIVILEGES ON test_django_mysite.* TO admin@localhost IDENTIFIED BY 'mypassword';
Query OK, 0 rows affected (0.04 sec) 
```

值得注意的是，我只授予了 test_django_mysite 的权限。我不需要实际创建它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-04T21:39:22.730

我的问题是我正在编辑**settings.py**而配置应该在**local_settings.py中完成**

现在一切似乎都奏效了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T14:13:53.793

django 书现在已经相当老了。特别是，数据库设置现在是一个字典，而不是 django 书中描述的一堆变量。

查看回溯的最后一行，看起来它正在尝试在没有用户名的情况下进行连接。

尝试改变

```
DATABASE_ENGINE = ''
DATABASE_NAME = ''
DATABASE_USER = ''
DATABASE_PASSWORD = '' 
```

到

```
DATABASES = {
    'default': {
        'ENGINE': '',
        'NAME': ''
        'USER': ''
        # etc
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-18T14:58:51.090

如果您更改了数据库密码并更新了 settings.py，您还必须重新启动 wsgi.py 进程，例如通过重新启动 apache。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-08T10:18:54.177

您需要验证*settings.py*文件中的数据库配置，以及您的 db 用户是否有权访问数据库并对其执行操作。

请查看[此处](https://stackoverflow.com/a/52700000/1846656)提到的解决方案是否适合您。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-16T04:22:16.930

我遇到了类似的问题，但所有设置似乎都是正确的。后来我注意到 MySQL 正在使用端口 3308，但我的 Django 设置文件中有端口 3306。我更新了设置文件以解决问题。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-09-01T09:33:02.830

只是将我的答案留在这里，因为我在这件事上失去了几分钟（近一个小时）。

注意你的复制粘贴:)不幸的是，mysql返回成功，同时授予不存在的用户对不存在的数据库的权限......

两个查询：

```
GRANT ALL PRIVILEGES ON python_user.* TO 'python_db'@'%' WITH GRANT OPTION; 
```

和：

```
GRANT ALL PRIVILEGES ON python_db.* TO 'python_user'@'%' WITH GRANT OPTION 
```

将返回成功。奥尔多我没有名为 python_db 的用户和名为 python_user 的数据库。:) 这很可悲。我的错误，但 MySql 对输出的帮助也不够。:)

# actionscript-3 - 我的 JPGEncoder 出了什么问题

> ID：11170136
> 
> 赞同：0
> 
> 时间：2012-06-23T14:09:46.257
> 
> 标签：actionscript-3

这是我的代码

```
 if (event.target.content is Bitmap)
{

    infotext.text = "got something";
    var image:Bitmap = Bitmap(event.target.content);
    var bitmapData:BitmapData = image.bitmapData;
    this.addChild(image);
    var j:JPGEncoder = new JPGEncoder(100);
    var bytes:ByteArray = new ByteArray();
    bytes=j.encode(bitmapData);
}
else
{
    throw new Error("What the heck bob?");
} 
```

当我运行调试会话时，一切正常，直到到达该行

```
 bytes=j.encode(bitmapData); 
```

之后什么都没有发生，我的程序就陷入了困境请帮助

* * *

我根据您的建议对代码进行了更改

```
 var myImage:Bitmap =Bitmap(e.target.content);

    var bitmapData:BitmapData = new      BitmapData(myImage.width,myImage.height,true,0xffffffff);
    bitmapData.draw(myImage);

    var encoder:JPGEncoder = new JPGEncoder();
    var bytes:ByteArray = encoder.encode(bitmapData);

    this.addChild(myImage); 
```

但之后又卡住了

```
 var bytes:ByteArray = encoder.encode(bitmapData); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:54:26.970

以防万一有人遇到这种情况，请确保您使用的是 bytearray JPEGEncoder 类，它更快：[http ://www.bytearray.org/?p=775](http://www.bytearray.org/?p=775)

as3core 是 JPGEncoder 而不是 JPEGEncoder。JPG vs JPEG ......这也让我着迷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:25:21.957

很确定我很久以前遇到过同样的问题，所以我从那时起提取了我的代码，我开始工作了。
查看代码后，我发现唯一不同的是我首先构造了 bitMapData 并通过加载函数分配图像。
所以我认为你的问题在于 bitmapData var 的构造。
下面的代码块是从我创建的一个函数中删除的，该函数做了很多其他的图像处理。
所以基本上它是一个精简版并且未经测试，但它应该可以工作。

```
var myImage:Image = new Image();
myImage.load( Bitmap(event.target.content) );

var bitmapData:BitmapData = new BitmapData(myImage.width, myImage.height, true, 0xffffffff );
bitmapData.draw(myImage); 

var encoder:JPEGEncoder = new JPEGEncoder();
var data:ByteArray = encoder.encode(bitmapData);

this.addChild(myImage); 
```

# segmentation-fault - 在 OS X 上初始化 D 运行时

> ID：11170139
> 
> 赞同：3
> 
> 时间：2012-06-23T14:10:36.397
> 
> 标签：segmentation-fault, d, dylib, druntime

编辑：这似乎是一个长期存在的问题，没有迫在眉睫的解决方案： [http ://d.puremagic.com/issues/show_bug.cgi?id=8133](http://d.puremagic.com/issues/show_bug.cgi?id=8133) [http://www.digitalmars.com/d/archives/digitalmars/D /Ideas_for_runtime_loading_of_shared_libraries._154126.html](http://www.digitalmars.com/d/archives/digitalmars/D/Ideas_for_runtime_loading_of_shared_libraries._154126.html) [http://lists.puremagic.com/pipermail/dmd-internals/2011-December/002853.html](http://lists.puremagic.com/pipermail/dmd-internals/2011-December/002853.html)

在 ac 程序中加载的 ad dylib 中启动 d 运行时似乎有问题。每当我调用 Runtime.initialize() 时，我都会遇到段错误。

C代码：

```
#include <stdio.h>
#include <dlfcn.h>

int main() {
    void *library;
    int (*fptr)();
    library = dlopen("testlib.dylib", RTLD_LAZY);
    if(library == NULL)
        puts("couldn't load the library");
    else {
        *(void **)(&fptr) = dlsym(library,"number");
        if(fptr == NULL) {
        puts("couldn't load function");
        } 
        else {
            printf("the result is %d\n",(*fptr)());
        }
    }
    return(0);
} 
```

用 gcc 编译，没有标志。

d 代码：

```
import core.runtime;

extern(C) int number() {
    Runtime.initialize();
    return(4);
} 
```

使用 dmd -shared 编译

回溯：

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: 13 at address: 0x0000000000000000
0x000000010003de28 in __tls_get_addr ()
(gdb) bt
#0  0x000000010003de28 in __tls_get_addr ()
#1  0x000000010003cdfc in thread_attachThis ()
#2  0x000000010003ccb8 in thread_init ()
#3  0x000000010003e312 in gc_init ()
#4  0x0000000100044ff5 in rt_init ()
#5  0x000000010003b637 in D4core7runtime7Runtime10initializeFDFC6object9ThrowableZvZb ()
#6  0x0000000100034ee9 in number ()
#7  0x0000000100000e84 in main () 
```

在 OS X 10.7 中完成所有编译和调试

注意：如果 Runtime.initialize(); 行被注释掉，库被加载并正确运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:45:24.137

这现在已在 github 的最新运行时中修复

# alfresco - 从 Alfresco Enterprise 降级到 Alfresco Community

> ID：11170141
> 
> 赞同：6
> 
> 时间：2012-06-23T14:10:41.847
> 
> 标签：alfresco

我们正在考虑将我们的 Alfresco Enterprise 3.4.1 降级为 Alfresco Community。

我习惯了 Alfresco Enterprise，但我没有使用 Community 版本的经验。

我们正在使用 EMC、Alfresco Explorer 以及我们自己的基于 Web 服务 API 和 Foundation API 的开发。

我担心数据库迁移。我可以简单地配置 Alfresco Community 3.4.e 以使用我们的 Oracle Database for Alfresco Enterprise 3.4.1 吗？模式是否兼容社区和企业发行版？我应该使用哪个版本的 Alfresco Community？3.4.e? 发行版之间的降级路径是什么？两个发行版的版本之间是否有任何对应关系？

欢迎任何降级经验、指南或任何相关信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T05:20:28.313

Alfresco 社区版是开源的，并且使用完全开源的堆栈。您的数据库选项是 PostGreSQL（推荐）或 MySQL。

Alfresco Enterprise 支持 Community 支持的开源数据库 PostGreSQL 和 MySQL，以及一些专有数据库。您可以查看[数据库配置页面](http://wiki.alfresco.com/wiki/Database_Configuration)以获取更多信息。对 Oracle 数据库的支持仅在 Enterprise 中可用。

如果您想继续为您的数据库许可证支付 Oracle 的所有费用，那么您需要继续向 Alfresco 支付一小部分费用以获得企业许可证。Community 是开源的，仅支持完全开源的堆栈，因此您不能将 Community 与您的超级昂贵的专有数据库一起使用！

如果您使用的是 PostGreSQL 或 MySQL 等开源数据库，那么您可以在升级过程中进行切换。企业服务包（例如 3.4.1）通常比该系列的等效社区版本更新（社区在 Head 上获得错误修复）。不建议从 3.4.x 企业服务包迁移回 3.4 社区，但从 3.4.x 企业迁移到 4.x 社区​​可能会奏效。但是，这不是经过测试的迁移路径，因此您很可能独自一人... Alfresco QA 测试社区 -> 较新社区、企业 -> 较新企业和社区升级到企业，这是受支持的路径。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-23T21:06:19.437

这个问题与[关于社区版和企业版之间的区别](https://stackoverflow.com/q/5256425/478015)的问题类似 你不能将 Oracle 数据库用于社区版。它仅适用于企业。任何 Alfresco 版本都没有降级路径。如果您使用的是 Enterprise 3.4.2，请尝试使用相同的社区版本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-25T14:52:03.710

我也在网上搜索了从企业版降级到社区版的可能性。我找到的答案是“您可以降级，但从未支持或测试过”。

降级时，你要记住，社区版 X 通常比同版本号的企业版有更多的功能。

因此，降级是实验性的。我已经看到降级失败的日志文件。

也许您可以选择导出所有内容并在具有社区版本的新系统上导入此 ACP 文件？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-25T19:24:15.173

请仔细阅读您的合同。在您的情况下，支持和许可可能不是一回事。如果您不想再向 Alfresco 付费，您可能有权继续使用当前的企业版本，但您将不再获得支持。在考虑降级之前，请检查您的合同。如果将来您想再次获得支持和升级，使用您当前的 Alfresco Enterprise 版本可能会更容易。

但是，正如我所说，这取决于您与 Alfresco 的协议。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-26T19:25:40.733

迁移 Alfresco repo 数据库一点也不好玩。没有官方方式切换数据库，在 3.x 版本中，您可能有序列化的对象，这些对象可以由特定的 hibernate db 存储。当 Alfresco 在 3.4 之后删除大部分休眠依赖项时，情况发生了一些变化。可以选择先迁移到 4.0 EE，将 db 迁移到 postgres（比 mysql 更接近 oracle），最后升级到 Alfresco Community 4.2.f（带有 Web 服务 API 的最新版本）。这可能需要做很多工作（即使在您的代码中），但应该可以。

在德国，如果您出售支持订阅（至少对于您可能拥有的旧合同），及时限制软件使用在法律上是有问题的，因此这里的客户可以在取消订阅合同之前请求支持时间无限制的 EE 许可证密钥。我建议您采用这种方式，将旧的 3.4 更新到可用的最新 3.4.x 或 4.x 企业版本，如果您不关心这些成本，请继续使用 Oracle db。无论如何都应该完成这一步;-)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-23T11:16:12.827

为了在本地机器上创建开发环境，我之前做过，

首先不能使用Oracle数据库所以必须使用postgresql（推荐）或MySql，不推荐导出和导入数据库，所以必须创建存储库层次结构并修复规则等，然后复制所有自定义jar（作业、操作、工作流...）和库从 lib 文件夹到新文件夹，

如果您使用的是基于 alfresco uuids 的外部应用程序，请确保在创建存储库和规则后更新了 uuids

# .htaccess - htaccess 和 mod_rewrite 使用多个查询字符串

> ID：11170147
> 
> 赞同：0
> 
> 时间：2012-06-23T14:11:46.127
> 
> 标签：.htaccess, mod-rewrite, query-string

我目前正在使用 htaccess 使用以下内容将单个查询字符串重写为其页面名称，并且工作正常...

```
 Options +FollowSymLinks

RewriteEngine on
  RewriteBase /

  RewriteCond %{HTTP_HOST} !^www\.
  RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

  # Rewrites urls in the form of /parent/child/
  # but only rewrites if the requested URL is not a file or directory
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.+)$ /index.php?page=$1 [QSA] 
```

我的问题是我现在正在尝试在原始查询字符串之上实现其他查询字符串。我可以成功访问该页面`/property-listing&property=12-Langworthy-Royston-Grove`

但是，我希望能够将其重写为`&property=`正斜杠，因此基本上删除了额外的查询字符串参数，同时在没有传递额外的查询字符串参数的情况下保持正常的重写规则。

谢谢你的帮助，

马特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T12:17:00.073

尝试在最后添加此规则：

```
RewriteRule ^(.+)&property=(.*)$ /index.php?page=$1/$2 [L,QSA] 
```

但是请注意，这仅在`&property=`是 URI 的一部分时才有效（在您展示的示例中），因为它只是 URI 是重写规则的主题，而不是查询字符串。

# javascript - 如果鼠标没有悬停在 div 上，它会淡出

> ID：11170150
> 
> 赞同：0
> 
> 时间：2012-06-23T14:11:50.733
> 
> 标签：javascript, jquery

如果鼠标没有悬停在它上面，我想要一个 div 淡出的代码。这是使 div 可见的代码。它一显示就淡出。我希望如果用户在它淡出时将鼠标悬停在它上面，它会停止淡出并变成最初的样子。然后当用户悬停在其中时，它会再次消失。

```
$('#popuup_div').css({left:leftVal,top:topVal}).show().fadeOut(2000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:18:34.277

jQuery 有一个[stop()](http://api.jquery.com/stop)函数，它可以停止在一个元素上发生的所有动画。[在mouseover()](http://api.jquery.com/mouseover/)事件处理程序中使用它就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:28:59.573

检查这个小提琴。[http://jsfiddle.net/6WMDz/1/](http://jsfiddle.net/6WMDz/1/)

```
$('#popuup_div').on('mouseover', function() {
     $(this).fadeIn();
}); 
```

​</p>

我已经习惯`mouseover`了`fadeIn`div。您也可以使用`stop`，但它不会将显示重置为初始状态。

# android - 执行显示 IllegalArgumentException 的“doInBackground()”

> ID：11170151
> 
> 赞同：-1
> 
> 时间：2012-06-23T14:11:55.990
> 
> 标签：android, android-asynctask

我的应用程序从新闻网页下载标题并将它们显示在列表视图中，有点像 RSSReader，现在当我尝试运行它但它显示错误。

**代码：-**

```
public class RSSReaderActivity extends ListActivity
{   List headlines, links;
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        new DoSomeTask().execute();
    }
    // DoSomeTask class will do all the work on another thread so there will be no
    // ANR and UI hanging.
    private class DoSomeTask extends AsyncTask<Void, Void, Void>
    {

        /* (non-Javadoc)
         * @see android.os.AsyncTask#doInBackground(Params[])
         */
        @Override
        protected Void doInBackground(Void... arg0) {
            try {
                headlines = new ArrayList();
                links = new ArrayList();

                URL url = new URL("http://feeds.pcworld.com/pcworld/latestnews");

                XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
                factory.setNamespaceAware(false);
                XmlPullParser xpp = factory.newPullParser();

                    // We will get the XML from an input stream
                xpp.setInput(getInputStream(url), "UTF_8");

                boolean insideItem = false;

                    // Returns the type of current event: START_TAG, END_TAG, etc..
                int eventType = xpp.getEventType();
                while (eventType != XmlPullParser.END_DOCUMENT) 
                {
                        if (eventType == XmlPullParser.START_TAG) 
                    {

                        if (xpp.getName().equalsIgnoreCase("item")) 
                        {
                            insideItem = true;
                        } 
                        else if (xpp.getName().equalsIgnoreCase("title")) 
                        {
                            if (insideItem)
                                headlines.add(xpp.nextText()); //extract the headline
                        } 
                        else if (xpp.getName().equalsIgnoreCase("link")) 
                        {
                            if (insideItem)
                                links.add(xpp.nextText()); //extract the link of article
                        }
                    }
                    else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item"))
                    {
                        insideItem=false;
                    }

                    eventType = xpp.next(); //move to next element
                }

            } catch (MalformedURLException e) {
                e.printStackTrace();
            } catch (XmlPullParserException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            return null;
        }
        protected void onPostExecute(Void params) 
        {
            try{
             // Binding data
            ArrayAdapter adapter = new ArrayAdapter(RSSReaderActivity.this,
                    android.R.layout.simple_list_item_1, headlines);

            setListAdapter(adapter);
            }catch (Exception e) {}

        }   
    }

    public InputStream getInputStream(URL url) {
           try {
               return url.openConnection().getInputStream();
           } catch (IOException e) {
               return null;
             }
        }

        protected void onListItemClick(ListView l, View v, int position, long id) {
           Uri uri = Uri.parse((String) links.get(position));
           Intent intent = new Intent(Intent.ACTION_VIEW, uri);
           startActivity(intent);
        }
} 
```

**日志猫：-**

```
06-23 19:37:57.505: W/dalvikvm(7450): threadid=8: thread exiting with uncaught exception (group=0x400207d8)
06-23 19:37:57.785: E/AndroidRuntime(7450): FATAL EXCEPTION: AsyncTask #1
06-23 19:37:57.785: E/AndroidRuntime(7450): java.lang.RuntimeException: An error occured while executing doInBackground()
06-23 19:37:57.785: E/AndroidRuntime(7450):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
06-23 19:37:57.785: E/AndroidRuntime(7450):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
06-23 19:37:57.785: E/AndroidRuntime(7450):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
06-23 19:37:57.785: E/AndroidRuntime(7450):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
06-23 19:37:57.785: E/AndroidRuntime(7450):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-23 19:37:57.785: E/AndroidRuntime(7450):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
06-23 19:37:57.785: E/AndroidRuntime(7450):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
06-23 19:37:57.785: E/AndroidRuntime(7450):     at java.lang.Thread.run(Thread.java:1096)
06-23 19:37:57.785: E/AndroidRuntime(7450): Caused by: java.lang.IllegalArgumentException
06-23 19:37:57.785: E/AndroidRuntime(7450):     at org.kxml2.io.KXmlParser.setInput(KXmlParser.java:1040)
06-23 19:37:57.785: E/AndroidRuntime(7450):     at mohit.apps.rssreaderfast.RSSReaderActivity$DoSomeTask.doInBackground(RSSReaderActivity.java:56)
06-23 19:37:57.785: E/AndroidRuntime(7450):     at mohit.apps.rssreaderfast.RSSReaderActivity$DoSomeTask.doInBackground(RSSReaderActivity.java:1)
06-23 19:37:57.785: E/AndroidRuntime(7450):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
06-23 19:37:57.785: E/AndroidRuntime(7450):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-23 19:37:57.785: E/AndroidRuntime(7450):     ... 4 more 
```

所以是的，错误在doInBackground（）中，因为我是新的多线程编程，请指出代码有什么问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:20:17.173

问题很可能出在这段代码中：

```
try {
       return url.openConnection().getInputStream();
    } catch (IOException e) {
       return null;
} 
```

从 KXmlParser 的源代码：

```
if (is == null)
    throw new IllegalArgumentException(); 
```

正在发生的事情是在您的调用中引发了一个异常，`url.openConnection().getInputStream();`导致该方法返回 null，而 XMLPullParser`setInput`反过来又引发了一个 InvalidArgumentException，从其源代码中可以看出。尝试在返回 null 之前将 catch 块中的堆栈跟踪打印到控制台`(Log.e("some_tag", "some message", e);`并查看异常是什么，然后从那里开始。

此外，要解决另一张海报提出的“UTF_8”与“UTF-8”之争，只需使用`xpp.setInput(getInputStream(url), HTTP.UTF_8);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:40:21.460

您在以下行中有错误

```
xpp.setInput(getInputStream(url), "UTF_8"); 
```

替换`UTF_8`为`UTF-8`

同时删除`setContentView(R.layout.main);`

下面是片段。

```
package org.sample;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlPullParserFactory;

import android.app.ListActivity;
import android.content.Intent;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class SampleActivity extends ListActivity {
    List headlines, links;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        new DoSomeTask().execute();
    }

    // DoSomeTask class will do all the work on another thread so there will be
    // no
    // ANR and UI hanging.
    private class DoSomeTask extends AsyncTask<Void, Void, Void> {

        /*
         * (non-Javadoc)
         * 
         * @see android.os.AsyncTask#doInBackground(Params[])
         */
        @Override
        protected Void doInBackground(Void... arg0) {
            try {
                headlines = new ArrayList();
                links = new ArrayList();

                URL url = new URL("http://feeds.pcworld.com/pcworld/latestnews");

                XmlPullParserFactory factory = XmlPullParserFactory
                        .newInstance();
                factory.setNamespaceAware(false);
                XmlPullParser xpp = factory.newPullParser();

                // We will get the XML from an input stream
                xpp.setInput(getInputStream(url), "UTF-8");

                boolean insideItem = false;

                // Returns the type of current event: START_TAG, END_TAG, etc..
                int eventType = xpp.getEventType();
                while (eventType != XmlPullParser.END_DOCUMENT) {
                    if (eventType == XmlPullParser.START_TAG) {

                        if (xpp.getName().equalsIgnoreCase("item")) {
                            insideItem = true;
                        } else if (xpp.getName().equalsIgnoreCase("title")) {
                            if (insideItem)
                                headlines.add(xpp.nextText()); // extract the
                                                                // headline
                        } else if (xpp.getName().equalsIgnoreCase("link")) {
                            if (insideItem)
                                links.add(xpp.nextText()); // extract the link
                                                            // of article
                        }
                    } else if (eventType == XmlPullParser.END_TAG
                            && xpp.getName().equalsIgnoreCase("item")) {
                        insideItem = false;
                    }

                    eventType = xpp.next(); // move to next element
                }

            } catch (MalformedURLException e) {
                e.printStackTrace();
            } catch (XmlPullParserException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            return null;
        }

        protected void onPostExecute(Void params) {
            try {
                // Binding data
                ArrayAdapter adapter = new ArrayAdapter(AbcActivity.this,
                        android.R.layout.simple_list_item_1, headlines);

                setListAdapter(adapter);
            } catch (Exception e) {
            }

        }
    }

    public InputStream getInputStream(URL url) {
        try {
            return url.openConnection().getInputStream();
        } catch (IOException e) {
            return null;
        }
    }

    protected void onListItemClick(ListView l, View v, int position, long id) {
        Uri uri = Uri.parse((String) links.get(position));
        Intent intent = new Intent(Intent.ACTION_VIEW, uri);
        startActivity(intent);
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-24T05:53:28.337

呸...最后它的固定。

我刚变

```
xpp.setInput(getInputStream(url), "UTF_8"); 
```

到

```
xpp.setInput(url.openConnection().getInputStream(), "UTF_8"); 
```

和中提琴:)

# facebook - 无法获得 FB.ui 方法：oauth 工作

> ID：11170152
> 
> 赞同：0
> 
> 时间：2012-06-23T14:11:55.863
> 
> 标签：facebook, facebook-javascript-sdk, facebook-opengraph, facebook-oauth, fb.ui

我整个上午都在和这个作斗争。

我实际上是在尝试让自定义 Open Graph Actions 起作用。我已经成功了，将来自各处的信息拼凑在一起，现在我有一个按钮，它发布了一个“想要”操作，流程如下：

```
> User Clicks Button
> FB.api checks response.
    > if response code is 200 the user has not granted publish_stream permission
        > call FB.ui({ method:
                  "permissions.request",
                  "perms": 'email,publish_stream'
                }
        > call back to original function and post to stream
    > if user has already granted permission, then just publish 
```

这一切都很可爱。

不过，我需要的是捕捉用户根本没有登录 Facebook 的情况。

这似乎是`2500`不存在访问令牌的响应代码

所以我有这个代码片段，它抓住了这种情况

```
.....
} else if (((response.error.code) * 1) == 2500) {
    doLogin('publish_stream', postWant, itemId); 
    // post want being the original function and itemId being the item we are "wanting"
} 
```

我的 doLogin 函数如下所示：

```
 function doLogin(permRequired, callingFunction, urlAppend) {
        FB.ui({ 
            method: 'oauth', 
            scope: 'email,' + permRequired
        },
        function (response) {
            // DO THINGS NOW WE'RE LOGGED IN
        });
    }; 
```

这与我获取扩展权限的功能基本完全相同，如下所示：

```
 function getPermission(permRequired, callingFunction, urlAppend) {
        FB.ui({ method:
            "permissions.request",
            "perms": 'email,' + permRequired
        },
        function (response) {
            // DO THINGS NOW WE HAVE PERMISSION
        });
    }; 
```

后一个示例有效，但登录示例只是加载一个弹出窗口，上面写着“抱歉，出了点问题，请稍后再试”

显然 FB.init 已经被调用，APP 设置正确，在 FB.init 中声明的 APP_ID 等等，显然，就像其他东西一样。

FB Login froma FB Login 按钮有效，但我需要它来完成此流程，以便“无摩擦”行为运行（即，我不能点击另一个按钮）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:36:47.777

不要将 FB.ui 与 method:"permissions.request" 一起使用 - 只需使用 FB.login，并将 options 参数设置为您需要的（附加）权限范围。

[https://developers.facebook.com/docs/reference/javascript/FB.login/](https://developers.facebook.com/docs/reference/javascript/FB.login/)

# javascript - 如何将函数（委托？）作为参数传递给 Javascript 中的另一个函数，然后使用它

> ID：11170158
> 
> 赞同：3
> 
> 时间：2012-06-23T14:12:45.447
> 
> 标签：javascript, jquery, function, delegates

我想将一个函数传递给另一个函数。我认为像这样传递的函数是调用委托？我很难在网上为这种事情找到一个很好的解释。这是正确的方法吗？

```
function getCellContentByColumnIndex = function(row, index) {
    return $(row.children().get(index)).text();
}
function naturalSort(a, b, func) {
    //...
    var $a = func(a);
    var $b = func(b);
    //...
}

//usage  
naturalSort(x, y, getCellContentByColumnIndex); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T14:31:23.957

你的代码：

```
function getCellContentByColumnIndex = function(row, index) {
    return $(row.children().get(index)).text(); 
} 
```

是语法错误。下面是一个函数声明：

```
functon foo() {} 
```

这是一个函数表达式：

```
var foo = function(){} 
```

这是一个命名函数表达式：

```
var foo = function bar(){} 
```

这里有很多关于差异的答案，在“[揭秘命名函数表达式](http://kangax.github.com/nfe/)”一文中有详细解释，其中还涵盖了函数声明和表达式的许多其他方面。

术语“匿名函数”是一个函数表达式的行话，它没有名称并且没有分配给任何东西，例如

```
someFn( function(){...} ) 
```

where`someFn`被调用并传递了一个没有名字的函数。它可以在 中分配一个名称，也可以不分配`someFn`。Ic 可以被引用为`arguments[0]`.

传递函数不是委派，这是将侦听器放在父元素上并捕获冒泡事件的做法的行话，在可以用单个侦听器替换表格中每个单元格上的点击侦听器的情况下，它是首选桌子。

无论如何，传递一个函数就像传递任何其他对象一样：

```
function foo(){
  alert('foo');
}

function callIt(fn) {
  fn();
}

callIt(foo);  // 'foo' 
```

在上面，`foo`被传递`callIt`并分配给局部变量`fn`，然后被调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T14:15:57.077

您将函数作为变量传递，如下所示：

```
var getCellContentByColumnIndex = function(row, index) {
    return $(row.children().get(index)).text();
}

function naturalSort(a, b, func) {
    //...
    var $a = func(a);
    var $b = func(b);
    //...
}

//usage  
naturalSort(x, y, getCellContentByColumnIndex); 
```

这被称为使用匿名函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T14:15:32.910

匿名函数..

```
var getCellContentByColumnIndex = function(row, index) {
    return $(row.children().get(index)).text();
} 
```

会工作..其余的调用内容在您的代码中已经很完美了..:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T14:24:14.727

在 JavaScript 中，函数被视为一等公民，这意味着您可以像简单的变量一样到处乱扔它们。关键是，当你想引用函数时使用 FunctionName 并使用 FunctionName() 来调用它。

这一行：`naturalSort(x, y, getCellContentByColumnIndex);`

可以写成

```
naturalSort(x, y, function (){
    return $(row.children().get(index)).text();
}); 
```

在这种情况下，它会被称为传递**匿名函数**

# css - CSS 精灵位置

> ID：11170162
> 
> 赞同：0
> 
> 时间：2012-06-23T14:12:54.507
> 
> 标签：css, css-sprites

我有一个链接，我想用它加上，它会在悬停时改变颜色。

![加](../Images/8d7e9bd61e270ac1d2fb4941a76d57f9.png)

但在过去的一个小时里，我无法弄清楚如何用恶意来做这个把戏。

这是一个链接，没什么特别的

```
<a href="detailed.html" class="plus">Find Out More!</a> 
```

我的CSS代码

```
.block a.plus {
    background: url("images/plus.png") no-repeat 0% 40%;
    background-position: 10px , 0px;
    font-size: 12px;
    padding-left: 25px;
}

.block a.plus:hover{
    /*Just for example*/
    background-position: -15px -1px;
} 
```

还有加img![在此处输入图像描述](../Images/dd74241a80650f7efa8a177999621ac4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:28:19.117

CSS sprite 通常是垂直排列的，因为这将使您能够在 sprite 文件中仅显示特定的行。为了在水平排列的图像上使用 sprite 技术，您必须创建第二个具有非透明背景的元素：

```
<a href="detailed.html" class="plus">
    <span>Find Out More!</span>
</a>

.block a.plus {
    background: url("images/plus.png") no-repeat 0% 40%;
    background-position: 10px , 0px;
    font-size: 12px;
    display: inline-block;
    padding-left: 16px; /* actual width of one icon */
}
.block a.plus:hover{
    /*Just for example*/
    background-position: 0 -16px;
}   
.block a.plus span{
    background-color: #fff;
} 
```

如果你不想使用第二个元素，你应该重新排列你的图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:00:39.200

您可以使用 :before 选择器来实现这一点。

```
<a href="detailed.html" class="plus">Find Out More!</a>

a.plus {
    position: relative;
    padding-left: 25px;
}

a.plus:before {
    position: absolute;
    left: 0;
    content: " ";
    width: 15px;
    height: 15px;
    background: red url("images/plus.png") 10px 0 no-repeat;
}
​ 
```

颜色`red`仅用于测试，您可以将其排除在外。`-10px 0`是图像在精灵中的位置 ( `x y`)。

# java - Android：以编程方式设置权重参数与我想要的相反

> ID：11170164
> 
> 赞同：7
> 
> 时间：2012-06-23T14:13:21.793
> 
> 标签：java, android, android-layout, android-layout-weight

我的安卓有问题。我在 Java 中设置 Weight 参数，但它的作用与我想要的完全相反。

这是代码

```
LinearLayout container = new LinearLayout(context);
// some code ...
container.setWeightSum(1f);

View v1 = new View(context);
v1.setBackgroundColor(Color.parseColor("#ff0000"));
LinearLayout.LayoutParams p1 = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT);
p1.weight=0.1f;

View v2 = new View(context);
v2.setBackgroundColor(Color.parseColor("#000000"));
LinearLayout.LayoutParams p2 = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT);
p2.weight=0.9f;

container.addView(v1,p1);
container.addView(v2,p2); 
```

我重复这个过程 7 次，在容器布局之间添加一条黑线。通常我应该在左边得到一个小的红色柱子，和一个大的黑色柱子，但这就是我用这段代码得到的：

![http://i.stack.imgur.com/PPgoy.png](../Images/88daca1275b46e0dab02a03d8500758d.png)

为什么它与代码完全相反？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T14:22:33.190

当我们使用权重宽度应该为零

尝试将宽度 0 用于容器内的孩子......

```
 LinearLayout.LayoutParams p1 = new LinearLayout.LayoutParams(0,LinearLayout.LayoutParams.WRAP_CONTENT);

LinearLayout.LayoutParams p2 = new LinearLayout.LayoutParams(0,LinearLayout.LayoutParams.WRAP_CONTENT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:23:29.370

您将两个宽度都设置为“wrap_content”......使用权重时，您应该将受影响的方向设置为“0dp”（或者它是程序等效的）。

# android - 带复选框的联系人列表

> ID：11170165
> 
> 赞同：1
> 
> 时间：2012-06-23T14:13:24.600
> 
> 标签：android, android-listview, listactivity, android-contacts

我正在尝试创建一个联系人列表，每个联系人旁边都有一个复选框。我找到了一个对我有很大帮助的代码，但我仍然无法让它工作。这里是：

```
 import java.util.ArrayList;
    import android.app.ListActivity;
    import android.app.ProgressDialog;
    import android.content.Context;
    import android.database.Cursor;
    import android.os.Bundle;
    import android.provider.ContactsContract;
    import android.util.SparseBooleanArray;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.view.View.OnClickListener;
    import android.widget.ArrayAdapter;
    import android.widget.CheckBox;
    import android.widget.Toast;

    public class ContactReadActivity extends ListActivity {
    private ArrayList<Contact> contacts = null;
    private ProgressDialog progressDialog = null;
    private ContactAdapter contactAdapter = null;
    private Runnable viewContacts = null;
    private SparseBooleanArray selectedContacts =   new SparseBooleanArray()  ; 

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main2);
            contacts = new ArrayList<Contact>();
            this.contactAdapter = new ContactAdapter(this, R.layout.read_contacts, contacts);
            setListAdapter(this.contactAdapter);

            viewContacts = new Runnable(){
                @Override
                public void run() {
                    getContacts();
                }
            };
            Thread thread =  new Thread(null, viewContacts, "ContactReadBackground");
            thread.start();
            progressDialog = ProgressDialog.show(ContactReadActivity.this,"Please wait...", "Retrieving contacts ...", true);

        }

        private void getContacts(){
            try{

                String[] projection = new String[] {
                        ContactsContract.Contacts.DISPLAY_NAME,
                        ContactsContract.Contacts.HAS_PHONE_NUMBER,
                        ContactsContract.Contacts._ID
                };

                Cursor cursor = managedQuery(ContactsContract.Contacts.CONTENT_URI, projection, ContactsContract.Contacts.HAS_PHONE_NUMBER+"=?", new String[]{"1"}, ContactsContract.Contacts.DISPLAY_NAME);

                contacts = new ArrayList<Contact>();

                while(cursor.moveToNext()){
                    Contact contact = new Contact();

                    String contactId = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));

                    contact.setContactName(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME)));

                    contacts.add(contact);

                }
                cursor.close();

              runOnUiThread(returnRes);
          }
            catch(Exception e){
                e.printStackTrace();
            }
        }

        private Runnable returnRes = new Runnable() {

            @Override
            public void run() {
            // close the progress dialog
            if (progressDialog.isShowing())
            progressDialog.dismiss();

            contactAdapter.notifyDataSetChanged();
            }
            };

        public class ContactAdapter extends ArrayAdapter<Contact> {

            private ArrayList<Contact> items;

            public ContactAdapter(Context context, int textViewResourceId, ArrayList<Contact> items) {
                    super(context, textViewResourceId, items);
                    this.items = items;
            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                    View view = convertView;
                    if (view == null) {
                        LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                        view = vi.inflate(R.layout.read_contacts, null);
                    }
                    Contact contact = items.get(position);
                    if (contact != null) {
                            CheckBox nameCheckBox = (CheckBox) view.findViewById(R.id.checkBox);

                            nameCheckBox.setChecked(selectedContacts.get(position));

                            if (nameCheckBox != null) {
                                nameCheckBox.setText(contact.getContactName());
                            }

                            nameCheckBox.setOnClickListener(new OnItemClickListener(position,nameCheckBox.getText(),nameCheckBox));
                    }

                    return view;
            }

        }

        class OnItemClickListener implements OnClickListener{          
            private int position;
            private CharSequence text;
            private CheckBox checkBox;
            OnItemClickListener(int position, CharSequence text,CheckBox checkBox){
                    this.position = position;
                    this.text = text;
                    this.checkBox = checkBox;
            }
            @Override
            public void onClick(View arg0) {

                selectedContacts.append(position, true);

                Toast.makeText(getBaseContext(), "Clicked "+position +" and text "+text,Toast.LENGTH_SHORT).show();

            }              
        }

        public class Contact {
            private String contactName;

            public String getContactName() {
                return contactName;
            }
            public void setContactName(String contactName) {
                this.contactName = contactName;
            }

        }
    } 
```

我有两个 XML 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    />

    </LinearLayout> 
```

和：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="horizontal">

            <CheckBox android:text=""
                android:id="@+id/checkBox"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="25sp"/>
    </RelativeLayout> 
```

当然我得到了清单中的许可

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

谁能告诉我我做错了什么？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:59:12.160

尝试使用 ASyncTask 并简化您的实现..

**活动**

```
public class YourListActivity extends ListActivity {  

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(..);

        // DoStuff

        ListView lv = getListView();
        new LoadContacts().execute();

        // DoStuff
    }    
} 
```

**异步任务**

```
class LoadContacts extends AsyncTask<String, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            // Do Dialog stuff here
        }

        protected String doInBackground(String... args) {
            // Put your implementation to retrieve contacts here
            getContacts();
        }

        protected void onPostExecute(String file_url) {
            // Dismiss Dialog
            runOnUiThread(new Runnable() {
                public void run() {
                    // Create list adapter and notify it                    
                }
            });

        }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:42:36.570

代码对我来说似乎很好。我对 ArrayAdapter 不太满意，我更喜欢使用 SimpleAdapter。在阅读了您的目的之后，我认为使用一个简单的适配器似乎很容易实现。[这是](http://eureka.ykyuen.info/2010/01/03/android-simple-listview-using-simpleadapter/)一个简单的启动。

更多关于 ListView，我认为最好的，总是帮了我很多： [http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

还有更多关于 SimpleAdapter，它真的很简单： [http ://wptrafficanalyzer.in/blog/listview-with-images-and-text-using-simple-adapter-in-android/](http://wptrafficanalyzer.in/blog/listview-with-images-and-text-using-simple-adapter-in-android/)

# c++ - 在 C++ 中读取行时过滤非字母数字字符？

> ID：11170169
> 
> 赞同：0
> 
> 时间：2012-06-23T14:13:48.517
> 
> 标签：c++, inputstream, user-input

是否可以仅从给定的输入行读取字母数字字符而忽略 C/C++ 中的所有其他内容？我试图一次阅读整行。

假设我们必须阅读以下行：

```
 aaa, bbb, ccc . 
```

在这里，我的意图是在输入时忽略逗号、点和空格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T14:26:52.757

您可以通过多种方式执行此操作，例如，最简单的方法是读取整行，然后删除您以后不需要的位：

```
#include <algorithm>
#include <iostream>
#include <string>
#include <functional>
#include <ctype.h>

int main() {
  std::string line;
  while (std::getline(std::cin, line)) {
    line.erase(std::remove_if(line.begin(), line.end(), std::not1(std::ptr_fun(isalnum))), line.end());
    std::cout << line << "\n";
  }
} 
```

读取一行，然后删除任何返回 false 的字符`isalnum`。（在 C++11 中你可以稍微简化一下）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-23T14:22:53.820

您可以编写一个字符串数组并使用逗号、点和空格作为字符串分隔符。将每个字符串存储在数组中，然后输出。

```
aaa, bbb, ccc .

aaa will be stored in string[0]
bbb will be stored in string[1]
ccc will be stored in string[2] 
```

然后只需通过 for 循环输出字符串，您将得到

aabbcc

# jquery - HTML5/CSS3 - 如何制作“无尽”旋转背景 - 360 度全景

> ID：11170173
> 
> 赞同：8
> 
> 时间：2012-06-23T14:14:13.653
> 
> 标签：jquery, css, html, jquery-animate

我有一张 JPG 图像，可以看到城市的 360 度全景（9000 像素 x 1000 像素）。我需要创建一个**背景无限旋转**的页面——例如，给用户一种旋转网络摄像头的印象。

第一部分——从左到右滚动图像非常简单——只需使用 jQuery.animate(...)。但是我怎样才能无缝地返回到图像的开头（在完成 359 度转弯之后），所以用户不会注意到“跳跃”或类似的东西？

网络上可能有任何例子吗？

我只针对 HTML5/CSS3 (webkit) 浏览器，我可以使用最新的 jQuery。

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T14:51:36.657

旋转背景背后的主要思想是绘制两张图像：一张是图像的宽度，`(x, 0)`另一张是图像`(x - w, 0)`的`w`宽度。您可以`x`随着时间的推移而增加，并且一旦`x === w`您重置`x = 0`. 您不会在视觉上看到此重置，因为第二张图像与第一张图像位于完全相同的位置。重置后可以重新开始，让旋转*看起来*无穷无尽。

（假设我使用了两张图片`width of container <= width of image`。）

你可以使用例如：

*   画布：http: [//jsfiddle.net/yQMAG/](http://jsfiddle.net/yQMAG/)。这个动画在我的机器上有点生涩。
*   CSS3 动画：http: [//jsfiddle.net/k5Bug/](http://jsfiddle.net/k5Bug/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T18:48:03.633

You can do this without jquery by using CSS3 animations. I'm assuming the city background image is set up to repeat-x seamlessly on the container.

You set up your keyframes to animate the background image the width of the repeatable image and tell it to loop infinitely with no delay. For example, my drifting clouds image is 1456 px wide and repeats x:

```
@keyframes DriftingClouds {
    0%      { background-position: 0 0; }
    100%    { background-position: -1456px 0; }
}

#wrapper {
    background: url(/images/clouds.png) repeat-x 0 0;
    animation: DriftingClouds 165s linear infinite;
} 
```

Make sure you set @-webkit-keyframes, @-moz-keyframes, @-o-keyframes and -webkit-animation, -moz-animation, -o-animation the same to cover FF, Safari and Chrome.

[http://jsfiddle.net/JQjGZ/](http://jsfiddle.net/JQjGZ/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T14:54:31.490

那里有他们称之为“图像拼接”的解决方案，人们为此制作了插件。

[http://www.jquery4u.com/plugins/jquery-360-degrees-image-display-plugins/](http://www.jquery4u.com/plugins/jquery-360-degrees-image-display-plugins/)

这个也适用于移动设备。 [http://spritespin.ginie.eu/examples.html](http://spritespin.ginie.eu/examples.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T14:25:40.700

如果您只针对 webkit-browsers，您可以单独使用 CSS3 完成此操作。CSS3 内置了对动画的支持。通过使用迭代计数属性指定“无限”，您的动画将永远持续下去......你明白了;-)

```
@-webkit-keyframes rotateEndlessly
{
    from 
    {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    to 
    {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
    }
}

img 
{
    -webkit-animation-name: rotateEndlessly;
    -webkit-animation-duration: 2s;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: linear;

} 
```

当然，您的 HTML 中的图像：

```
<img src="image.jpg" alt="image" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-23T14:55:08.387

您可以使用背景位置和 jquery animate 函数，请参见示例：

[http://jsfiddle.net/DG8PA/3/](http://jsfiddle.net/DG8PA/3/)

在完成事件中获取一个无限的背景并从 0 到背景宽度设置背景位置为 0 并再次触发动画。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T00:32:12.347

You could use [CSS animations](https://developer.mozilla.org/en/CSS/CSS_animations) to achieve such a "look around" effect - great for parallax!

Instead of adding multiple images and animating their `left` etc, you could just set a background and animate its `background-position`:

```
#bgscroll {  
    background:url(/*some nice seamless texture*/);
    -moz-animation-duration: 13s;  
    -moz-animation-name: bgscroll;
    -moz-animation-iteration-count: infinite;
}  
@-moz-keyframes bgscroll{  
    from {background-position: 0 0;}
    to   {background-position: 100% 0;}  
} 
```

This would work with new Gecko/Chromium browsers (w/vendor prefix adjusted); [fiddled](http://jsfiddle.net/ovfiddle/6gAYu/1/)

# c# - 在不绘制的情况下调整 Texture2D 的大小

> ID：11170176
> 
> 赞同：0
> 
> 时间：2012-06-23T14:14:19.527
> 
> 标签：c#, xna, textures

正如标题所述，我`Texture2D`什至在考虑`SpriteBatch.Draw()`. 我这样做的原因是我试图填充一个任意多边形，该多边形由`Vector2D`s 定义的顶点布置，具有任意`Texture2D`.

我在想的是创建适合多边形的矩形，将 缩放`Texture2D`到该矩形，然后通过`Texture2D`'s`GetData<>()`和使多边形外部的像素透明`SetData<>()`。

我已经到了找到适合多边形的矩形的地步，但是有没有办法调整`Texture2D`它的大小，或者我是在完全错误的方式？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:39:53.123

你的做法是错误的。设置纹理数据是昂贵的。（过滤也可能存在一些问题。）

您要做的是设置您正在绘制的顶点的**纹理坐标**（“UV 坐标”）。这将导致纹理的特定位置出现在多边形的该顶点处。然后将落在多边形之外的纹理根本不会被绘制（它被多边形边缘“剪裁”）。

纹理坐标从纹理的左上角到右下角在 0.0 到 1.0 的范围内指定（在 U 和 V 轴上 - 水平和垂直）。

如果您使用顶点缓冲区进行绘图，XNA 包含一些内置的顶点结构，例如`VertexPositionTexture`允许`VertexPositionColorTexture`您指定一个`TextureCoordinate`值。

如果您使用自己的顶点结构，请`VertexElementUsage.TextureCoordinate`在指定`VertexElement`. 如果您正在创建自己的着色器，则该值将显示在`TEXCOORD0`（用于使用索引 0）。

* * *

如果您只是用 绘制矩形，则在调用时`SpriteBatch`指定 a 。`sourceRectangle``Draw`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:21:16.860

听起来您应该在 Draw 方法上使用重载（我意识到您出于某种原因不想这样做，但这是有充分理由的）：

```
public void Draw (
     Texture2D texture,
     Vector2 position,
     Nullable<Rectangle> sourceRectangle,
     Color color,
     float rotation,
     Vector2 origin,
     Vector2 scale,
     SpriteEffects effects,
     float layerDepth
) 
```

sourceRectangle、scale 参数和 origin 应该足够了。不要修改内存中的纹理，这样做相对昂贵（尤其是每帧都这样做！）

[http://msdn.microsoft.com/en-us/library/bb196420(v=xnagamestudio.31).aspx](http://msdn.microsoft.com/en-us/library/bb196420(v=xnagamestudio.31).aspx)

你能解释一下为什么你不想在 Draw() 中进行缩放吗？

# jsf - JSF value 不更新 bean 属性

> ID：11170179
> 
> 赞同：2
> 
> 时间：2012-06-23T14:14:31.183
> 
> 标签：jsf

所以我对 JSF 很陌生，我几天前才开始使用它，我正在尝试从 youtube 教程和几本书中学习。但我不知道为什么这不起作用。这是我的代码：

```
 <h:form styleClass="formStyle">
        <h1>Log In</h1>
        <fieldset id="inputs">
            <h:inputText id="username" type="text"  value="#{redirectBean.name}">
            </h:inputText>
            <h:inputSecret id="password" type="password"  value="#{redirectBean.password}">
            </h:inputSecret>
        </fieldset>
        <fieldset id="actions">
            <h:button type="submit" styleClass="test" value="Log in" outcome="#{redirectBean.login}">
            </h:button>
        </fieldset>
    </h:form> 
```

redirectBean.java 只是一个包含 3 个私有字符串（login="welcome"、名称和密码）及其 getter/setter 的类。

单击登录按钮后，我被重定向到welcome.xhtml，但redirectBean.name 或redirectBean.password 没有任何更改。

有什么想法吗？我错过了什么？

编辑：所以 BalusC 解释说我需要改用 h:commandButton ，但这并没有重定向我。在反复尝试找出原因之后，这是我目前正在获取的服务器日志（它现在使用命令按钮重定向我，但仍然没有将值传递给 bean。我也得到了一些关于 RI 和 MyFaces 的信息冲突，但类路径中的一些修补似乎已经解决了这个问题）：

```
SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException:
java.lang.IllegalArgumentException: java.lang.ClassNotFoundException:
org.apache.myfaces.webapp.StartupServletContextListener     at
org.apache.catalina.core.StandardContext.start(StandardContext.java:5332)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)   at
org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at
org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at
org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at
com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
    at
com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at
com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at
org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at
com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at
com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at
org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at
com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at
com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at
com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at
com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at
com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at
com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at
com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at
com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at
com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at
com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at
com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at
com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at
com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at
com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at
com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at
com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)     at
com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at
com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662) Caused by:
java.lang.IllegalArgumentException: java.lang.ClassNotFoundException:
org.apache.myfaces.webapp.StartupServletContextListener     at
org.apache.catalina.core.StandardContext.addListener(StandardContext.java:2743)
    at
org.apache.catalina.core.StandardContext.addApplicationListener(StandardContext.java:1966)
    at
com.sun.enterprise.web.TomcatDeploymentConfig.configureApplicationListener(TomcatDeploymentConfig.java:235)
    at
com.sun.enterprise.web.TomcatDeploymentConfig.configureWebModule(TomcatDeploymentConfig.java:94)
    at
com.sun.enterprise.web.WebModuleContextConfig.start(WebModuleContextConfig.java:274)
    at
com.sun.enterprise.web.WebModuleContextConfig.lifecycleEvent(WebModuleContextConfig.java:172)
    at
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:149)
    at
org.apache.catalina.core.StandardContext.start(StandardContext.java:5329)
    ... 39 more Caused by: java.lang.ClassNotFoundException:
org.apache.myfaces.webapp.StartupServletContextListener     at
org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1509)
    at
org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
    at
org.apache.catalina.core.StandardContext.loadListener(StandardContext.java:4806)
    at com.sun.enterprise.web.WebModule.loadListener(WebModule.java:1599)
    at
org.apache.catalina.core.StandardContext.addListener(StandardContext.java:2740)
    ... 46 more

WARNING: java.lang.IllegalStateException: ContainerBase.addChild:
start: org.apache.catalina.LifecycleException:
java.lang.IllegalArgumentException: java.lang.ClassNotFoundException:
org.apache.myfaces.webapp.StartupServletContextListener
java.lang.IllegalStateException: ContainerBase.addChild: start:
org.apache.catalina.LifecycleException:
java.lang.IllegalArgumentException: java.lang.ClassNotFoundException:
org.apache.myfaces.webapp.StartupServletContextListener     at
org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:921)
    at
org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at
org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at
com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
    at
com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at
com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at
org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at
com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at
com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at
org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at
com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at
com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at
com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at
com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at
com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at
com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at
com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at
com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at
com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at
com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at
com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at
com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at
com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at
com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at
com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at
com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)     at
com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at
com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)

SEVERE: Exception while invoking class
com.sun.enterprise.web.WebApplication start method
java.lang.Exception: java.lang.IllegalStateException:
ContainerBase.addChild: start: org.apache.catalina.LifecycleException:
java.lang.IllegalArgumentException: java.lang.ClassNotFoundException:
org.apache.myfaces.webapp.StartupServletContextListener     at
com.sun.enterprise.web.WebApplication.start(WebApplication.java:138)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at
org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at
com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at
com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at
org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at
com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at
com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at
com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at
com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at
com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at
com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at
com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at
com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at
com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at
com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at
com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at
com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at
com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at
com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at
com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at
com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at
com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)     at
com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at
com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)

SEVERE: Exception while loading the app SEVERE: Exception while
loading the app : java.lang.IllegalStateException:
ContainerBase.addChild: start: org.apache.catalina.LifecycleException:
java.lang.IllegalArgumentException: java.lang.ClassNotFoundException:
org.apache.myfaces.webapp.StartupServletContextListener 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T14:18:23.350

你需要使用`<h:commandButton>`，而不是`<h:button>`。`<h:button>`仅发送 GET 请求，而通过`<h:commandButton>`POST 提交表单。

```
<h:commandButton styleClass="test" value="Log in" action="#{redirectBean.login}" /> 
```

和

```
public String login() {
    // Do your business job.

    return "welcome";
} 
```

### 也可以看看：

*   [我们的 JSF 标签 wiki 页面](https://stackoverflow.com/tags/jsf/info)- 包含一些 Hello World 示例和很好的教程链接

# ruby - ruby 显式方法返回类型

> ID：11170182
> 
> 赞同：3
> 
> 时间：2012-06-23T14:14:51.733
> 
> 标签：ruby, methods

我正在学习 ruby​​（具有 java/groovy 背景），看起来在编写方法时，方法签名是

```
def method_name
    # do something
end 
```

凭借 ruby​​ 的动态特性，我理解为什么没有显式声明返回类型。但是，假设我有一个名为`get_name`. 作为代码的调用者，我可能不确定它是返回 String 还是某些自定义 Name 类型。有没有办法显式声明返回类型？并且（如果可能的话）这是否真的在 ruby​​ 中做过以明确返回值是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T14:22:45.850

2019 年更新：ruby 中仍然没有内置静态类型或类型注释，但我们现在有 3rd 方类型检查器。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/57132394/125816)。

* * *

Java 执行静态类型检查。它确保在编译时满足所有类型要求。Ruby 更加动态，它不进行编译时检查，它的类型系统通常被称为“鸭子类型”。也就是说，“如果它像鸭子一样走路，像鸭子一样嘎嘎叫，那么它一定是鸭子”。

如果一个方法需要一个响应某些消息的对象（具有某些方法），那么只要它符合协议，它就不会关心对象的实际类型。如果这有良好的测试套件支持，那么它（可以说）是一种更好的方法，因为它允许更快的原型设计并减少视觉混乱。更少的视觉混乱 - 代码更具表现力和可理解性。这样做的好处是显而易见的。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-21T10:40:54.587

2019 年，Stripe 发布了他们的红宝石类型检查器[Sorbet](https://sorbet.org/)。现在可以指定方法签名。可以是这样的：

```
 sig {returns(String)}
  def name
    "Sergio"
  end 
```

例如，如果你在类型上犯了错误，你会得到有趣的错误。

代码：

```
 sig {returns(Integer)}
  def name
    "Sergio"
  end 
```

错误：

```
editor.rb:12: Returning value that does not conform to method result type https://srb.help/7005
    12 |    "Sergio"
            ^^^^^^^^
  Expected Integer
    editor.rb:11: Method name has return type Integer
    11 |  def name
          ^^^^^^^^
  Got String("Sergio") originating from:
    editor.rb:12:
    12 |    "Sergio"
            ^^^^^^^^
Errors: 1 
```

[您可以在网上游乐场](https://sorbet.run/#%23%20typed%3A%20true%0Aclass%20A%0A%20%20extend%20T%3A%3ASig%0A%0A%20%20sig%20%7Breturns(Integer)%7D%0A%20%20def%20name%0A%20%20%20%20%22Sergio%22%0A%20%20end%0Aend%0A%0Adef%20main%0A%20%20A.new.name%20%20%23%20error%3A%20Type%20mismatch!%0Aend)玩跳棋。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T14:21:34.847

简短的回答是：这是不可能的，也永远不会成为可能。它永远不会被使用。

这是一个很长的答案：Ruby 不对类型进行操作。Ruby 对通用对象进行操作。在某些时候，一切都只是一个`BasicObject`. Ruby使用Duck Typeing，有核心原理

> 如果它像鸭子一样走路，像鸭子一样说话，解释者很乐意把它当作鸭子对待。

您可以使用`Object#class`(返回对象的类) 和来检查类`Object#is_a?(klass)`，但社区强烈反对这样做。只需逻辑思考，阅读源代码并使用文档即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-27T23:40:12.423

我发现 RubyMine / IntelliJ 提供的注释注释对此非常有帮助。例如：

```
# @param [String] time_zone_offset_string eg. +10:00
# @return [Array] An array containing sign, hours and minutes
def self.parse_timezone_string(time_zone_offset_string)
  ... parse the timezone string ...
  return [sign, hours, minutes]
end 
```

这些注释似乎不是[RDoc](http://ruby-doc.org/stdlib-2.1.4/libdoc/rdoc/rdoc/RDoc/Markup.html)的特性——如果它们是的话，那就太好了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T14:20:45.653

据我所知，ruby 不可能定义方法返回值的类型。但是你可以使用 is_a 之类的方法吗？或类来检查类型。

# php - 获取 Facebook 用户的收件箱消息

> ID：11170189
> 
> 赞同：-2
> 
> 时间：2012-06-23T14:15:57.673
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我正在创建一个 Facebook 应用程序，用于使用 Facebook PHP SDK 列出所有用户收件箱消息。

我使用此代码获取所有用户的照片。

```
<?php
$facebook->api('/me/albums');
?> 
```

如何获取所有用户的收件箱消息？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-23T16:31:03.563

检查他们的`inbox`.

[http://developers.facebook.com/docs/reference/api/user/#inbox](http://developers.facebook.com/docs/reference/api/user/#inbox)

`$messages = $facebook->api('me/inbox');`

资源管理器：http: [//developers.facebook.com/tools/explorer/ ?method=GET&path=me%2Finbox](http://developers.facebook.com/tools/explorer/?method=GET&path=me%2Finbox)

# python - Django：manage.py 标准命令不起作用

> ID：11170201
> 
> 赞同：1
> 
> 时间：2012-06-23T14:18:08.673
> 
> 标签：python, sql, database, django, command

我正在使用 Django 1.4 和 PyCharm 2.5 作为我的 IDE 和 Postgres 数据库，在 Python 2.7 中开发一个 Web 应用程序。我能够运行 manage.py 命令，例如创建 SQL`sql`和`syncdb`表，但无法识别其他命令。当我尝试运行`sqlreset`（或任何其他删除表或更改数据的命令）时，我收到“未知命令”错误：

```
runnerw.exe C:\Python27\python.exe "C:\Program Files (x86)\JetBrains\PyCharm 2.5.1\helpers\pycharm\django_manage.py" sqlreset EventMapperApp C:/Users/Karen/PycharmProjects/eventsMap
Unknown command: 'sqlreset'
Type 'manage.py help' for usage.

Process finished with exit code 1 
```

谁能帮我弄清楚发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:50:21.450

你确定你正在运行 Django 1.4 吗？`sqlreset`我认为自 1.3 以来已被弃用，并[计划在 1.5 中删除](https://docs.djangoproject.com/en/1.4/internals/deprecation/#id3)。[它存在于 Django 1.4](https://docs.djangoproject.com/en/1.4/ref/django-admin/#sqlreset-appname-appname)中，但在开发版本中已被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:36:42.977

没有一个`sqlreset`。

此处信息：[https ://docs.djangoproject.com/en/dev/ref/django-admin/](https://docs.djangoproject.com/en/dev/ref/django-admin/)

或`manage.py help`如您的帖子所示...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T15:08:19.337

Django 的管理命令不会自动运行可能会破坏数据库的命令（例如更改表或更改列类型的命令）。

如果您想完全重置您的应用程序 - 就像您刚刚运行一样`syncdb`，您需要手动进行。

我写了这个要重置你的数据库的[要点。](https://gist.github.com/2704588)它不可移植（仅适用于 *inx-like 系统），但它可能会对您有所帮助。

注意：这将删除（删除）所有内容。

```
echo 'from django.conf import settings; print settings.INSTALLED_APPS; quit();' | \
python manage.py shell --plain 2>&1 | \
tail -n1 | sed -r "s|^.*\((.*)\).*$|\1|; s|[',]| |g; s|django\.contrib\.||g" | \
xargs python manage.py sqlclear | \
python manage.py dbshell && python manage.py syncdb 
```

# wpf - WPF 无法正确加载图像

> ID：11170206
> 
> 赞同：0
> 
> 时间：2012-06-23T14:18:39.730
> 
> 标签：wpf

我的 WPF 项目中有一些图标，以使应用程序更加用户友好。WPF 显示我计算机上的所有图标，但是当我在其他计算机上运行该应用程序时，它会显示一些图标，但不是全部。我该如何解决？

更新：

```
<Image Source="Office/Add-Female-User.ico" Stretch="None" /> 
```

我确信所有图像都可以访问，因为其中一些是可见的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:14:54.547

您将图像（在图像控件中）引用为内容而不是资源。我怀疑问题是您的图像没有复制到输出目录。查看丢失图像文件的属性并将构建操作设置为 Content 和 Copy 以将输出目录设置为 Copy（如果较新）。

有关资源参考，请参阅[http://msdn.microsoft.com/en-us/library/aa970069.aspx](http://msdn.microsoft.com/en-us/library/aa970069.aspx)。

# visual-studio-2010 - Visual Studio 2010 在视图属性上崩溃

> ID：11170207
> 
> 赞同：0
> 
> 时间：2012-06-23T14:18:51.073
> 
> 标签：visual-studio-2010

不知何故，我的“属性”窗口已分离。当我在解决方案资源管理器中查看任何项目的属性时，它会弹出，但随后我收到一条消息，表明 Visual Studio 已意外停止。

我已经完成了我的解决方案并删除了所有 .user 和 .suo 文件，但它仍然会发生。我也尝试过重置布局选项，但没有运气。

必须有一个我可以删除或编辑的对接信息文件。

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:24:19.023

它们通常存储在 .vssettings 文件中。所以你可以找到它并删除/重命名它。

尝试在命令行中运行它：

> devenv.exe /resetuserdata

# ruby - 使用 Hosted Chef 和 Vagrant 的 Http 404 错误

> ID：11170213
> 
> 赞同：0
> 
> 时间：2012-06-23T14:20:17.920
> 
> 标签：ruby, chef-infra, vagrant

我正在尝试开始使用 Chef 和 Vagrant，当我启动 vagrant 实例时，Chef 遇到 404 Http 错误，完整输出如下所示。有人有什么主意吗？

```
[default] VM already created. Booting if it's not already running...
[default] Clearing any previously set forwarded ports...
[default] Forwarding ports...
[default] -- 22 => 2222 (adapter 1)
[default] -- 3000 => 3000 (adapter 1)
[default] Creating shared folders metadata...
[default] Clearing any previously set network interfaces...
[default] Booting VM...
[default] Waiting for VM to boot. This can take a few minutes.
[default] VM booted and ready for use!
[default] Mounting shared folders...
[default] -- v-root: /vagrant
[default] Running provisioner: Vagrant::Provisioners::ChefClient...
[default] Creating folder to hold client key...
[default] Uploading chef client validation key...
[default] Generating chef JSON and uploading...
[default] Running chef-client...
stdin: is not a tty
[Sat, 23 Jun 2012 04:46:51 -0700] INFO: Starting Chef Run
/usr/lib/ruby/1.8/net/http.rb:2101:in `error!'
:
404 "Not Found"
 (
Net::HTTPServerException
)
        from /usr/lib/ruby/1.8/chef/rest.rb:233:in `run_request'
        from /usr/lib/ruby/1.8/chef/rest.rb:95:in `post_rest'
        from /usr/lib/ruby/1.8/chef/client.rb:221:in `create_registration'
        from /usr/lib/ruby/1.8/chef/client.rb:199:in `register'
        from /usr/lib/ruby/1.8/chef/client.rb:73:in `run'
        from /usr/lib/ruby/1.8/chef/application/client.rb:186:in `run_application'
        from /usr/lib/ruby/1.8/chef/application/client.rb:178:in `loop'
        from /usr/lib/ruby/1.8/chef/application/client.rb:178:in `run_application'
        from /usr/lib/ruby/1.8/chef/application.rb:57:in `run'
        from /usr/bin/chef-client:25
The following SSH command responded with a non-zero exit status.
Vagrant assumes that this means the command failed!

chef-client -c /tmp/vagrant-chef-1/client.rb -j /tmp/vagrant-chef-1/dna.json 
```

我的流浪文件的内容：

```
# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant::Config.run do |config|
  config.vm.box = "lucid32-rvm-ruby193"
  config.vm.forward_port 3000, 3000
  config.vm.provision :chef_client do |chef|
    chef.chef_server_url = "https://api.opscode.com/organizations/xxx"
    chef.validation_key_path = "xxx-validator.pem"
    chef.validation_client_name = "xxx-validator"
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:36:57.383

这就是您输入 chef_server_url 错误时应该得到的错误。例如，如果您输入：

```
chef.chef_server_url = "https://www.opscode.com/organizations/xxx" 
```

注意 www 而不是 API，你会得到那个错误。如果没有返回 404 的有效服务器，您将收到另一个错误（如果是拼写错误，可能是名称解析）。检查`/tmp/vagrant-chef-1/client.rb`文件以验证其具有正确的 URL，并仔细检查`Vagrantfile`以确保您使用的是正确的 URL。

# sql-server-2012-express - SQL Server 2012 Express 版本之间有什么区别？

> ID：11170215
> 
> 赞同：140
> 
> 时间：2012-06-23T14:20:47.107
> 
> 标签：sql-server-2012-express, sql-server-2008-express

我遇到了这个页面[http://www.microsoft.com/en-us/download/details.aspx?id=29062](http://www.microsoft.com/en-us/download/details.aspx?id=29062)我对这里的不同版本有点困惑。

所以我想知道有什么区别

*   `SQLEXPR_x64_ENU.exe`
*   `SQLEXPRADV_x64_ENU.exe`
*   `SQLEXPRWT_x64_ENU.exe`

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-06-23T14:29:31.227

在该页面上向下滚动，您将看到：

> *Express **with Tools** (with LocalDB) 包括数据库引擎和 SQL Server Management Studio Express)*
> 此软件包包含将 SQL Server 安装和配置为数据库服务器所需的一切。根据上述需求选择 LocalDB 或 Express。

那就是`SQLEXPRWT_x64_ENU.exe`下载....（**WT** =带工具）

* * *

> *Express with **Advanced Services***（包含数据库引擎、Express Tools、Reporting Services 和全文搜索）
> 此软件包包含 SQL Express 的所有组件。这是比“使用工具”更大的下载，因为它还包括全文搜索和报告服务。

那就是`SQLEXPRADV_x64_ENU.exe`下载...（**ADV** =高级服务）

* * *

该`SQLEXPR_x64_ENU.exe`文件只是数据库引擎 - 没有工具，没有报告服务，没有全文搜索 - 只是准系统引擎。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-02-04T01:27:29.777

此链接直接来自 Microsoft[的最佳比较图表。](http://msdn.microsoft.com/en-us/library/cc645993%28v=SQL.110%29.aspx "Detailed edition comparison on MSDN")它比较了所有 MS SQL 服务器版本的所有方面。要比较您询问的三个版本，只需关注其中每个表格的最后三列。

**从上述文件编译的**摘要：****

 **```
    * = 包含特征
                                           SQLEXPR SQLEXPRWT SQLEXPRADV
 -------------------------------------------------- --------------------------
    > SQL Server 核心 * * *
    > SQL Server 管理工作室 - * *
    > 分布式重播 - 管理工具 - * *
    > 本地数据库 - * *
    > SQL Server 数据工具 (SSDT) - - *
    > 全文和语义搜索 - - *
    > 查询语言规范 - - *
    > 一些报告服务功能 - - *

```**

# ios - 如何在更新期间删除捆绑包中的旧图像？

> ID：11170222
> 
> 赞同：0
> 
> 时间：2012-06-23T14:21:28.733
> 
> 标签：ios, xcode, image, sdk, bundle

我制作了一个应用程序，其中的图像 *.png 直接放在包中。在更新中，当我从项目中删除图像时，它仍保留在我的应用程序中！如何完全删除此图像？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:23:34.113

如果是模拟器，则需要将应用程序从模拟器中彻底删除。Xcode 在从构建的产品文件夹中删除未引用的 PNG 和其他资源方面并不是非常聪明。

如果是设备，那么您可能只需要清理项目的目标（在 Xcode 的“构建”菜单下），然后进行新的构建并安装到设备上。

# asp.net-mvc-3 - jquery ui对话框消失

> ID：11170224
> 
> 赞同：0
> 
> 时间：2012-06-23T14:21:42.817
> 
> 标签：asp.net-mvc-3, jquery-dialog

我在父视图中单击父视图中的按钮时我想在 jquery ui 对话框中加载另一个视图的内容。我尝试使用以下代码。但是 jquery ui 对话框最初显示另一个视图的内容，然后它不显示另一个视图的内容。

```
 <button id="btn_newtrade" name="btn_newtrade" class="newtrade">New Trade</button>

 <script type="text/javascript"> 
 $(function () {
  $('#dialog').dialog({

       autoOpen:false,
       width: 1400, 
       height:600,
        resizable: false,
        title: 'New Trades',
        modal: true,
        open: function(event, ui) {

            $(this).load('@Url.Action("NewTrade","Trade")');
        },
        buttons: {
            "Close": function () {
                $(this).dialog("close");
            }
        }
    });
});

$('.newtrade').click(function () {
    $('#dialog').dialog('open');

});
 </script>

 <div id="dialog"  style="display:none;"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:40:03.313

你可以试试这样的

```
$('.newtrade').click(function () {
    $('#dialog').load('@Url.Action("NewTrade","Trade")').dialog('open');
}); 
```

并删除`open`事件处理程序。

# javascript - 在javascript（jquery）中更改日期格式

> ID：11170226
> 
> 赞同：0
> 
> 时间：2012-06-23T14:22:02.720
> 
> 标签：javascript, jquery

我有两个日期：

```
var first = '21-11-2012';
var second = '03-11-2012'; 
```

像这样格式化它的最佳方法是什么：

```
var first = '2012-11-21';
var second = '2012-11-03'; 
```

我应该使用 jQuery 还是仅使用 JavaScript？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T14:27:49.893

您不需要 jQuery，只需像这样使用 JavaScript：

```
function formatDate(d){
    return d.split('-').reverse().join('-');
} 
```

虽然如果您想要更多可重用的代码，请考虑使用[JavaScript 日期对象](http://www.w3schools.com/jsref/jsref_obj_date.asp)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T14:42:56.903

无需为基本的字符串操作考虑 jQuery：[标准的 JS String 方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String#Methods_2)绰绰有余，（我认为）这就是 jQuery 实际上没有等效方法的原因。

其他答案中的正则表达式`.replace()`或拆分/反向/连接概念都可以在一行中完成。我建议熟悉我链接到的 MDN 页面上的方法，但同时：

```
first = first.replace(/^(\d\d)-(\d\d)-(\d\d\d\d)$/,"$3-$2-$1"); 
```

（相同的`second`- 如果需要，封装在一个函数中。）

这使用正则表达式来匹配日期的不同部分并将它们反转。

更新 - 根据要求，我使用的正则表达式的解释：

```
^            // match beginning of string
(\d\d)       // match two digits, and capture them for use
             // in replacement expression as $1
-            // match the literal hyphen character
(\d\d)       // match two digits, and capture for use as $2
-            // match the literal hyphen character
(\d\d\d\d)   // match four digits, and capture for use as $3
$            // match end of string 
```

因为模式从字符串的开头到结尾匹配，所以整个字符串将被替换。括号中的表达式部分是“捕获的”，如果在替换字符串中使用，可以称为 $1、$2 等（按它们在表达式中出现的顺序编号），因此`"$3-$2-$1"`颠倒这些捕获部分的顺序和在它们之间放置连字符。（如果输入字符串不符合该格式，则正则表达式将不匹配并且不会进行替换。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T14:27:22.423

```
first=first.split("-").reverse().join("-")
second=second.split("-").reverse().join("-") 
```

# javascript - jquery砌体图像追加

> ID：11170227
> 
> 赞同：1
> 
> 时间：2012-06-23T14:22:07.603
> 
> 标签：javascript, jquery, html, jquery-masonry

晚上好，

我遇到了砌体的问题。

这是我所有的相关代码：

```
var $test;
var $iterator = 0; 
$(document).ready(function() {
    $("#demo-input").tokenInput("php-example.php" ,{
        classes: {
            tokenList: "token-input-list-facebook",
            token: "token-input-token-facebook",
            tokenDelete: "token-input-delete-token-facebook",
            selectedToken: "token-input-selected-token-facebook",
            highlightedToken: "token-input-highlighted-token-facebook",
            dropdown: "token-input-dropdown-facebook",
            dropdownItem: "token-input-dropdown-item-facebook",
            dropdownItem2: "token-input-dropdown-item2-facebook",
            selectedDropdownItem: "token-input-selected-dropdown-item-facebook",
            inputToken: "token-input-input-token-facebook"
        },
        hintText: "Type in the names of your Tags",
        noResultsText: "No results",
        searchingText: "Searching..."
    });
});

var $container = $('#container');

$container.imagesLoaded( function(){
    $container.masonry({
        itemSelector: '.box',
        columnWidth: 1,
        isAnimated: !Modernizr.csstransitions
    });
});

$(document).ready(function() {
    $("input[type=button]").click(function () {
        $.ajax({ url: "generatehtml.php",
        data: {action: $(this).siblings("input[type=text]").val()},
        type: 'post',
        dataType: "json",
        success: 
            function(response){
                $test=response;
                $iterator =  $test.length;

                for (i=0; i<10; i++){
                    var $boxes = $(balls($iterator));
                    $container.append( $boxes ).imagesLoaded( function(){$container.masonry( 'appended', $boxes);});            
                }
                var $boxes = $( '<div class="box" STYLE="color: rgba(255, 255, 255, 1);">These results are ranked from<BR> most similar, to least similar.<BR>The percentage below each game <BR>indicates how similar to the <BR>original input that game is.<BR></div>' );
                $container.prepend( $boxes ).masonry( 'reload' );       
            }
        });
    });
});

window.onscroll = scroll;

function scroll() {  
    var $boxes = $(balls($iterator));
    $container.append( $boxes ).imagesLoaded( function(){$container.masonry( 'appended', $boxes, true);});
}  
//+'<img src="timthumb.php?src='+$test[$iterator][2]+'&q=100&w=300"/>' Replace this with the one below when timthumb is whitelisted
function balls($i){
    $iterator -= 1;
    var $width = 7.5;
    return ('<div class="box">'
    +''+$test[$iterator][1][2]+''
    +'<img src="'+$test[$iterator][2]+'"  width="280" height="160"/>'
    +'<div id=boxBottom>'+Math.floor($test[$iterator][0]*100)+'%</div>'
    +'</div>');
} 
```

我期望的行为：加载页面，从第二个搜索栏中选择游戏，点击“提交”。
填充 10 个结果，滚动后填充更多结果。

但是格式无处不在，我知道您应该使用 imagesLoaded() 插件，但我确实这样做了。

无论如何，这是有问题的网站：

[http://newgameplus.nikuai.net/TEST/](http://newgameplus.nikuai.net/TEST/) （顺便说一句，第一个搜索栏不起作用，所以忽略它）

任何决议将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T14:41:16.063

尝试将您的 columnWidth 更改为与框中的图像相同：

```
$container.imagesLoaded( function(){
    $container.masonry({
        itemSelector: '.box',
        columnWidth: 280,
        isAnimated: !Modernizr.csstransitions
    });
}); 
```

更新行：

```
$container.append( $boxes ).imagesLoaded( function(){$container.masonry( 'appended', $boxes);}); 
```

到：

```
$container.append( $boxes ).masonry('appended', $boxes); 
```

我也认为你应该修改你的`$(document).ready`部分。您目前有 2 个，并且在`#container`两者之间检索元素。我认为您应该只拥有一个并确保`$container`在`$(document).ready`.

更新代码：

```
var $test;
var $iterator = 0; 
$(document).ready(function() {
    $("#demo-input").tokenInput("php-example.php" ,{
        classes: {
            tokenList: "token-input-list-facebook",
            token: "token-input-token-facebook",
            tokenDelete: "token-input-delete-token-facebook",
            selectedToken: "token-input-selected-token-facebook",
            highlightedToken: "token-input-highlighted-token-facebook",
            dropdown: "token-input-dropdown-facebook",
            dropdownItem: "token-input-dropdown-item-facebook",
            dropdownItem2: "token-input-dropdown-item2-facebook",
            selectedDropdownItem: "token-input-selected-dropdown-item-facebook",
            inputToken: "token-input-input-token-facebook"
        },
        hintText: "Type in the names of your Tags",
        noResultsText: "No results",
        searchingText: "Searching..."
    });

    var $container = $('#container');

    $container.imagesLoaded( function(){
        $container.masonry({
            itemSelector: '.box',
            columnWidth: 280,
            isAnimated: !Modernizr.csstransitions
        });
    });

    $("input[type=button]").click(function () {
        $.ajax({ url: "generatehtml.php",
        data: {action: $(this).siblings("input[type=text]").val()},
        type: 'post',
        dataType: "json",
        success: 
            function(response){
                $test=response;
                $iterator =  $test.length;

                for (i=0; i<10; i++){
                    var $boxes = $(balls($iterator));
                    $container.append( $boxes ).masonry('appended', $boxes);            
                }
                var $boxes = $( '<div class="box" STYLE="color: rgba(255, 255, 255, 1);">These results are ranked from<BR> most similar, to least similar.<BR>The percentage below each game <BR>indicates how similar to the <BR>original input that game is.<BR></div>' );
                $container.prepend( $boxes ).masonry( 'reload' );       
            }
        });
    });
}); 
```

# javascript - 改变 HTML5 音频适用于 Chrome 但不适用于 Safari

> ID：11170228
> 
> 赞同：3
> 
> 时间：2012-06-23T14:22:17.577
> 
> 标签：javascript, jquery, html, safari, html5-audio

我正在尝试制作一个适用于每个主要浏览器的 HTML5 音频播放列表：Chrome、Safari、Firefox、IE9+。但是，我不知道如何以跨浏览器兼容的方式更改源。

**更新**例如，更改`<source>`标签的`src`s 在 Chrome 中有效，但在 Safari 中无效。虽然下面使用@eivers88 的解决方案有效，但对我来说只是更改标签的s`canPlayType`似乎更容易。谁能向我解释为什么我下面的代码可以在 Chrome 中运行，但不能在 Safari 中运行？`<source>``src`

JS：

```
var audioPlayer=document.getElementById('audioPlayer');
var mp4Source=$('source#mp4');
var oggSource=$('source#ogg');
$('button').click(function(){    
  audioPlayer.pause();
  mp4Source.attr('src', 'newFile.mp4');
  oggSource.attr('src', 'newFile.ogg');
  audioPlayer.load();
  audioPlayer.play();
}); 
```

HTML：

```
<button type="button">Next song</button>
<audio id="audioPlayer">
  <source id="mp4" src="firstFile.mp4" type="audio/mp4"/> 
  <source id="ogg" src="firstFile.ogg" type="audio/ogg" />                      
</audio> 
```

单击按钮后检查 HTML，`<source src=""/>`Safari 中确实发生了变化，只是没有发出 HTTP 请求，因此文件没有被`load()`编辑和`play()`编辑。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T04:08:01.180

这是一个工作[示例](http://aaroneivers.com/html5/audio.html)。它与您所拥有的有点不同，但希望这会有所帮助。

HTML：

```
<button type="button">Next song</button> 
```

Javascript/jQuery：

```
 var songs = [
    '1976', 'Ballad of Gloria Featherbottom', 'Black Powder' 
]
var track = 0;
var audioType = '.mp3'
var audioPlayer = document.createElement('audio');

$(window).load(function() {

    if(!!audioPlayer.canPlayType('audio/ogg') === true){
        audioType = '.ogg' //For firefox and others who do not support .mp3
    }

    audioPlayer.setAttribute('src', 'music/' + songs[track] + audioType);
    audioPlayer.setAttribute('controls', 'controls');
    audioPlayer.setAttribute('id', 'audioPlayer');
    $('body').append(audioPlayer);
    audioPlayer.load();
    audioPlayer.play();

});

$('button').on('click', function(){
    audioPlayer.pause();
    if(track < songs.length - 1){
        track++;
        audioPlayer.setAttribute('src', 'music/' + songs[track] + audioType);
        audioPlayer.load();
        audioPlayer.play();
    }
    else {
        track = 0;
        audioPlayer.setAttribute('src', 'music/' + songs[track] + audioType);
        audioPlayer.load();
        audioPlayer.play();
    }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T05:20:17.223

出于某种原因，Safari 不能使用`<source>`标签在歌曲之间交换，但 Chrome 可以。只需更改加载到标签`src`属性中的内容即可`<audio>`在 Chrome 和 Safari 上运行，但随后会出现 ogg 与 mp3 的问题。

我想解决这个 ogg 与 mp3 问题的一种方法是使用 Modernizr 进行功能检测来加载 Firefox 中的 ogg mime 类型和 Chrome/Safari 中的 mp3。这是一个参考： [Detecting html5 audio support with Modernizr](https://stackoverflow.com/questions/7867807/detecting-html5-audio-support-with-modernizr)。

# php - 在 WHERE 条件不起作用后全选

> ID：11170235
> 
> 赞同：0
> 
> 时间：2012-06-23T14:23:21.643
> 
> 标签：php, mysql, select, where

当我尝试使用“选择所有选项”作为 sql 查询中的值时，我在发送和接收数据时遇到问题。这种方法是正确的还是我做错了什么？我也在尝试“*”、“ALL”、“%”和“？”....

php:

```
SQL = select table1 where name='$selected_options1' and instructor_name='$selected_options2'

$selected_options1=$_POST['selected_name'];

$selected_options2=$_POST['selected_instructor_name']; 
```

html:

```
<INPUT TYPE=checkbox NAME='selected_name' VALUE='Mat'>Mat
<INPUT TYPE=checkbox NAME='selected_name' VALUE='Ann'>Ann
<INPUT TYPE=checkbox NAME='selected_name' VALUE='Peter'>Peter
<INPUT TYPE=checkbox NAME='selected_name' VALUE='Tom'>Tom
<INPUT TYPE=checkbox NAME='selected_name' VALUE='*'>All names

<INPUT TYPE=checkbox NAME='selected_name' VALUE='Ron'>Ron
<INPUT TYPE=checkbox NAME='selected_name' VALUE='Tim'>Tim
<INPUT TYPE=checkbox NAME='selected_name' VALUE='Greg'>Greg
<INPUT TYPE=checkbox NAME='selected_name' VALUE='Bob'>Bob
<INPUT TYPE=checkbox NAME='selected_name' VALUE='*'>All instructors 
```

现在我的查询看起来像：

```
("SELECT * FROM `table1` WHERE instruktor in ('$instruktor1', '$instruktor2', '$instruktor3', '$instruktor4', '$instruktor5', '$instruktor6', '$instruktor7', '$instruktor8', '$instruktor9', '$instruktor10', '$instruktor11', '$instruktor12') AND (instruktor_poczatkowy='$instruktor_poczatkowy1' OR instruktor_poczatkowy='$instruktor_poczatkowy2
 OR instruktor_poczatkowy='$instruktor_poczatkowy3 OR instruktor_poczatkowy='$instruktor_poczatkowy4 OR instruktor_poczatkowy='$instruktor_poczatkowy5
 OR instruktor_poczatkowy='$instruktor_poczatkowy6 OR instruktor_poczatkowy='$instruktor_poczatkowy7 OR instruktor_poczatkowy='$instruktor_poczatkowy8
 OR instruktor_poczatkowy='$instruktor_poczatkowy9 OR instruktor_poczatkowy='$instruktor_poczatkowy10 OR instruktor_poczatkowy='$instruktor_poczatkowy11)
  AND (klub='$klub1' OR klub='$klub2') order by nazwisko"); 
```

这仍然不能解决我的问题。你可以在我的评论中读到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:36:28.267

**复选框应该是：**

```
<form action="checkbox-form.php" method="post">
Which buildings do you want access to?<br />
<input type="checkbox" name="formDoor[]" value="A" />Acorn Building<br />
<input type="checkbox" name="formDoor[]" value="B" />Brown Hall<br />
<input type="checkbox" name="formDoor[]" value="C" />Carnegie Complex<br />
<input type="checkbox" name="formDoor[]" value="D" />Drake Commons<br />
<input type="checkbox" name="formDoor[]" value="E" />Elliot House
<input type="submit" name="formSubmit" value="Submit" />
</form> 
```

你将如何获得多值...

```
<?php
  $aDoor = $_POST['formDoor'];
  if(empty($aDoor))
  {
    echo("You didn't select any buildings.");
  }
  else
  {
    $N = count($aDoor);
    echo("You selected $N door(s): ");
    for($i=0; $i < $N; $i++)
    {
      echo($aDoor[$i] . " ");
    }
  }
?> 
```

查询应如下所示：

```
$SQL="select * from table1 where name in (name1,name2,name3)"; 
```

只需制作一串名称（逗号分隔）并从 for 循环中替换上面的“name1，name2，name3”。

好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:28:37.360

`SELECT column WHERE name='*'`只会选择字面上的那些名称`*`。您需要完全放弃条件以选择所有内容。

```
SELECT column FROM table 
```

您还可以使用`1`(true) 作为选择所有内容 ( `SELECT column FROM table WHERE 1`) 的条件。

PHP 中的逻辑是这样的：

```
if( $selected_options1 == '*' ) {
    $condition1 = '1';
}
else {
    $condition1 = "name = '$selected_options1'";
}

if( $selected_options2 == '*' ) {
    $condition2 = '1';
}
else {
    $condition2 = "instructor_name = '$selected_options2'";
}

$query = "SELECT column1, column2, etc FROM table1 WHERE $condition1 AND $condition2"; 
```

请记住[保护自己免受 SQL 注入](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-23T14:28:10.713

给定查询：

```
select table1 where name='$selected_options1' and instructor_name='$selected_options2', 
```

您可以在 $selected_options2 中输入任何值，这意味着它应该接受所有内容。在这种情况下，您应该省略 where 子句的那部分，所以它变成：

```
select table1 where name='$selected_options1' 
```

通常，您会从语句的 select 部分开始，并根据需要添加 where 条件。

更重要的是，您已经设计了表单，以便返回多个值，并且您不能简单地插入单个值，对吗？有两种方法可以使用这种约束查询 sql。要么是这样的：

```
where x=a or x=b or x=c 
```

或者

```
where x in (a,b,c) 
```

选择哪种格式有时会考虑性能，但它们在语义上是等效的。无论哪种情况，您都不能简单地使用硬编码字符串并插入单个值。

# iphone - 核心数据获取不一致

> ID：11170236
> 
> 赞同：0
> 
> 时间：2012-06-23T14:23:27.967
> 
> 标签：iphone, objective-c, ios, cocoa-touch, core-data

我正在处理一个可以[从这里下载](https://github.com/acburk/CoreData-Tutorial-1/zipball/Tutorial3)的非常小的示例项目。我正在尝试做的是调试为什么在我自己的项目中获取需要这么长时间，但我已经将此项目用作一种基准。我已`-com.apple.CoreData.SQLDebug 1`在我的方案中启用，因此我可以看到哪些命令正在通过我的提取发送到 SQLite 存储。

首先，在 AppDelegate 中，我只是将第一部分（正在创建银行的地方）包装在一个 for 循环中以创建 1000 个对象。他们注释掉来自 AppDelegate 的获取请求。

然后，在 FBCFMasterViewController 中，那里有一个获取请求。在保存 1000 个项目并将它们提取到 NSFetchedResultsController 后运行应用程序时，您将看到数千条类似于以下内容的输出行：

```
2012-06-23 09:16:30.374 FailedBankCD[90166:fb03] CoreData: annotation: sql connection fetch time: 0.0004s
2012-06-23 09:16:30.375 FailedBankCD[90166:fb03] CoreData: annotation: total fetch execution time: 0.0009s for 1 rows.
2012-06-23 09:16:30.375 FailedBankCD[90166:fb03] CoreData: annotation: fault fulfilled from database for : 0xc3e9060 <x-coredata://60E5B64A-83AB-4E6A-BEAD-5FFF50DB7F66/FailedBankDetails/p823>
2012-06-23 09:16:30.376 FailedBankCD[90166:fb03] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZCLOSEDATE, t0.ZUPDATEDATE, t0.ZZIP, t0.ZINFO FROM ZFAILEDBANKDETAILS t0 WHERE  t0.Z_PK = ? 
```

我猜这是因为 sortDescriptor 是用关键 details.closeDate 初始化的，这是一个关系，所以当它按该属性排序时，它必须获取每个对象的错误，导致出现数千行输出。

所以我更改了 sortDescriptor 以对属性进行排序`city`，这次运行时，我得到以下输出：

```
2012-06-23 08:53:04.924 FailedBankCD[89564:fb03] CoreData: sql: SELECT 0, t0.Z_PK FROM ZFAILEDBANKINFO t0 ORDER BY t0.ZCITY DESC
2012-06-23 08:53:04.929 FailedBankCD[89564:fb03] CoreData: annotation: sql connection fetch time: 0.0049s
2012-06-23 08:53:04.930 FailedBankCD[89564:fb03] CoreData: annotation: total fetch execution time: 0.0059s for 1009 rows.
2012-06-23 08:53:04.936 FailedBankCD[89564:fb03] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZCITY, t0.ZNAME, t0.ZSTATE, t0.ZDETAILS FROM ZFAILEDBANKINFO t0 WHERE  t0.Z_PK IN  (?,?,?,?,?,?,?,?,?,?)  ORDER BY t0.ZCITY DESC LIMIT 10
2012-06-23 08:53:04.938 FailedBankCD[89564:fb03] CoreData: annotation: sql connection fetch time: 0.0013s
2012-06-23 08:53:04.939 FailedBankCD[89564:fb03] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZCLOSEDATE, t0.ZUPDATEDATE, t0.ZZIP, t0.ZINFO FROM ZFAILEDBANKDETAILS t0 WHERE  t0.ZINFO IN  (?,?,?,?,?,?,?,?,?,?)  
2012-06-23 08:53:04.971 FailedBankCD[89564:fb03] CoreData: annotation: sql connection fetch time: 0.0318s
2012-06-23 08:53:04.972 FailedBankCD[89564:fb03] CoreData: annotation: total fetch execution time: 0.0326s for 10 rows.
2012-06-23 08:53:04.973 FailedBankCD[89564:fb03] CoreData: annotation: Prefetching with key 'details'.  Got 10 rows.
2012-06-23 08:53:04.974 FailedBankCD[89564:fb03] CoreData: annotation: total fetch execution time: 0.0372s for 10 rows. 
```

我不再重复数千行输出，这似乎是预期的输出。但是，如果我再次运行，甚至不修改任何内容，我将再次获得类似于以下内容的数千行输出：

```
2012-06-23 09:19:31.263 FailedBankCD[90216:fb03] CoreData: annotation: sql connection fetch time: 0.0006s
2012-06-23 09:19:31.264 FailedBankCD[90216:fb03] CoreData: annotation: total fetch execution time: 0.0010s for 20 rows.
2012-06-23 09:19:31.264 FailedBankCD[90216:fb03] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZCITY, t0.ZNAME, t0.ZSTATE, t0.ZDETAILS FROM ZFAILEDBANKINFO t0 WHERE  t0.Z_PK IN  (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)  ORDER BY t0.ZCITY DESC LIMIT 20 
```

这是奇怪的行为，不是吗？任何人都可以快速复制并解释发生了什么，以及为什么我会得到数千行输出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:14:52.020

`close_date`并且`city`没有被索引，这解释了成千上万的查询，并且可能性能低下。对于运行之间的差异，我敢打赌您正在使用的缓存：

```
NSFetchedResultsController *theFetchedResultsController =
[[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:managedObjectContext sectionNameKeyPath:nil
                                               cacheName:@"Root"]; 
```

# c++ - Code::Blocks 出现无效的工具链错误

> ID：11170241
> 
> 赞同：3
> 
> 时间：2012-06-23T14:23:47.760
> 
> 标签：c++, codeblocks

```
"Hello - Debug" uses an invalid compiler. Probably the toolchain path within the compiler options is not setup correctly?! Skipping... 
```

当我尝试运行`HelloWorld`如下简单程序时收到上述消息。

```
#include <iostream>

using namespace std;

int main()
{
    cout << "Hello world!" << endl;
    return 0;
} 
```

关于为什么会发生这种情况以及如何解决它的任何想法都会很有用仅供参考：我目前正在使用 GNU GCC 编译器，我也尝试过更改它，但没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T14:40:26.770

感谢@Thrustmaster 的评论。对于将来遇到类似问题的任何人，只需转到`Settings->Compiler and Debugger->ToolChain Executables ->Click Auto Detect on the compiler's installation directory`. 快！IDE 自动检测路径并正常工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:34:46.073

好吧，您可以使用终端（假设 Linux 或 Mac OSX，并且安装了 GCC）：

```
g++ -o hello hello.cpp 
```

或者，要在 OSX 上安装 GCC，您必须安装 Xcode（免费注册），然后进入**Xcode** → **Preferences** → **Downloads** → **Components**，然后单击“命令行工具”旁边的安装按钮。

要在基于 Debian 的 Linux 发行版上安装 GCC，请使用：`sudo apt-get install g++`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-29T05:47:55.160

1.  转到设置->编译器和调试器->工具链可执行文件
2.  在 Compilers 安装目录中，浏览并选择您的 MinGW 安装目录
3.  对于 C 编译器，浏览并转到 MinGW 内的 bin 文件夹并选择 mingw32-gcc.exe
4.  对于 C++ 编译器，从那里选择 mingw32-g++.exe
5.  对于 Linker for dynamic libs ，从那里选择 mingw32-g++.exe
6.  对于静态库的链接器，从那里选择 ar.exe
7.  对于调试器，从那里选择 gdb.exe
8.  对于资源编译器，从那里选择 windres.exe
9.  从那里制作程序 mingw32-make.exe

这就是它对我有用的方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-03T06:43:54.057

发生这种情况是因为您的编译器设置未配置。这就是我**解决**问题的方法

*   下载**MinGW 安装管理器**
*   **通过MingGW**下载`mingw32-gcc`和`mingw32-g++`编译器并应用更改。
***   转到代码块，然后`settings/toolchain executables`*   在程序文件部分配置 C 编译器`mingw32-gcc`和 C++ 编译器和`mingw32-g++`编译器**

# symfony - Symfony2 - 样式表更改未反映

> ID：11170246
> 
> 赞同：0
> 
> 时间：2012-06-23T14:24:43.990
> 
> 标签：symfony

我正在开发一个 Web 应用程序并第一次使用 Symfony2。

我有这个问题：我有一个引用样式表的模板。现在，当我对样式表进行更改（例如更改字体颜色）时，当我在浏览器中打开页面时，它们不会反映在页面上。它继续使用原始样式表的值，就好像它从未改变过一样（事实上，我什至完全删除了样式表，页面仍然显示原始样式表的值）。

这是模板中的代码：

我已经尝试清除缓存并运行 Assetic:dump 没有成功。任何帮助将不胜感激！

ps 我在开发环境中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:52:24.870

默认情况下，symfony 会在 web 目录中制作你的资产的硬拷贝。如果您想让您的更改自动反映，您需要创建符号链接而不是硬拷贝。

你可以使用这个命令：

```
php app/console assets:install --symlink 
```

# android - Android LinearLayout 制作按钮不起作用

> ID：11170248
> 
> 赞同：1
> 
> 时间：2012-06-23T14:24:54.237
> 
> 标签：android, android-layout, android-event

我的布局中有很多按钮，它们运行良好。我想将两个按钮放在同一行，所以我将 LinearLayout 设为水平，但是当我这样做时，第二个按钮的单击事件不起作用。它没有显示我的文本视图

```
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/bAnswerQuestoinShowChoices"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Show Choices"
            android:visibility="invisible" />

        <Button
            android:id="@+id/bAnswerQuestionShowHints"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Show Hint 1"
            android:visibility="invisible" />
    </LinearLayout> 
```

如果我删除 LinearLayout 它工作正常，但我想要 linearlayout 因为我希望两个按钮位于同一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:32:07.430

android:layout_height="match_parent" //<---------------------这是让它扭曲内容的问题

```
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent" //<----------------------this is the issue make it warp content
        android:orientation="horizontal" > 
```

# sas - 如何从一个表中选择与另一个表中数值相似的行？

> ID：11170250
> 
> 赞同：1
> 
> 时间：2012-06-23T14:25:05.160
> 
> 标签：sas

我有一个测试和控制组数据。测试组和对照组的表都有 cust_id 和 NRx（数值）。测试组只有 300 行，而对照组有 40,000 行。我需要使用SAS选择300-400行对照组作为另一个表，使对照组的NRx与测试组的NRx在合理范围内紧密匹配。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:31:24.003

最好的方法可能是对排序的控制列表进行第 n 个样本。

在 SQL 中，您可以使用以下构造在某些数据库中执行此操作：

```
select t.*
from (select t.*, row_number() over (order by cust_id) as seqnum
      from t
     ) t
where mod(t, 100) = 7 
```

这将为测试组选择从第 7 条开始的每 100 条记录。

大多数数据库都支持 row_number() 函数。如果您没有，那么您可以在 SAS 的数据步骤中轻松地做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:45:59.243

选择最接近测试组平均值的 300 个。或者，将对照组与测试组成比例地分箱，并将样本按比例从测试组中的分布中拉出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T15:55:31.263

首先确定您的选择标准（您对“合理范围”的评论）；假设您想要包含来自 CONTROL 的记录，这些记录在 SAMPLE 平均值的正负一个标准差范围内。试试这个（一个没有替换的简单随机样本，见[这个 SAS note](http://support.sas.com/kb/24/722.html)）：

```
proc sql noprint;
  /* Find mean and std dev of TEST group into two macro variables */
  select mean(nrx)
      ,  std(nrx) 
  into :mean_nrx, :std_nrx
  from TEST;

  /* Create TARGET based on +/- 1 std deviation  */
  create table TARGET as
  select *
  from   CONTROL
  where  NRx between (&mean_nrx - &std_nrx) and (&mean_nrx + &std_nrx);
quit;

/* Create sample of size K from TARGET */
data sample(drop=k n);

  retain k 300 n;
  if _n_=1 then n=total;
  set TARGET nobs=total;

  if ranuni(1230498) <= k/n then do;
     output;
     k=k-1;
     end;

  n=n-1;

  if k=0 then stop;
run; 
```

请注意，这会创建一个 TARGET 数据集，其中包含符合样本条件的记录。将 K 的值更改为您想要的任何样本大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-06T10:54:45.687

proc sql 函数 monotonic() 将为您提供行号。

它不受支持/记录，因此不要在生产系统中使用

# php - 我如何插入 mysql 数据库并加载相同的函数结果-> ? I'm interested about Jquery and ajax to use with php&mysql. I have been reading articles about loading intervall like 10 seconds. But that is not working with my page. (in select with 1000ms loading doe

> ID：11170253
> 
> 赞同：0
> 
> 时间：2012-06-23T14:25:19.983
> 
> 标签：php, mysql, ajax, select, insert

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:27:21.353

通过您的评论澄清，我认为您正在寻找***Long Polling***。有一些插件可以为你做到这一点，但我不确定你想怎么做，所以这里有几个地方可以开始看看你怎么做。

*   [类似 Facebook 的实时通知](https://stackoverflow.com/questions/1086380/how-does-facebook-gmail-send-the-real-time-notification)
*   [如何用 PHP 实现 COMET](http://www.zeitoun.net/articles/comet_and_php/start)
*   [谷歌“ajax 长轮询”](https://www.google.com/search?sugexp=chrome,mod=14&sourceid=chrome&ie=UTF-8&q=javascript%20long%20polling#hl=en&safe=off&pwst=1&sa=X&ei=ZRXnT5KvCOiemQWbn4j7Cg&ved=0CAYQvwUoAQ&q=ajax%20long%20polling&spell=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=58c0f6de0f1c3337&biw=1398&bih=721)

正在做一些额外的研究，并遇到了这个[关于使用 node.js 的最优秀的教程](http://www.nodebeginner.org/)

# android - 如何检索正在运行的 AsyncTask 实例？

> ID：11170256
> 
> 赞同：0
> 
> 时间：2012-06-23T14:25:50.870
> 
> 标签：android, android-asynctask

我正在开发的应用程序中实现类似 DownloadManager 的功能。我使用 AsyncTask 将下载推送到后台。
此 AsyncTask 位于名为 example 的服务中，该服务`DownloadService`在我的一个活动上实例化。所以这意味着可以从一个活动的不同实例开始多个下载。
我想要做的是有一个特定的活动，我可以让所有当前正在运行的下载显示他们的进度，并有按钮来暂停或恢复下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:31:59.377

如果你想要这样的东西，你可以将所有在服务中启动的异步任务存储在一个数组中，然后使用[http://developer.android.com/reference/android/os/AsyncTask.html#getStatus检查它们的状态%28%29](http://developer.android.com/reference/android/os/AsyncTask.html#getStatus%28%29)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:32:33.490

与其将其容纳`DownloadService`在 Activity 中，`Application`不如将其作为类成员容纳在应用程序的类中，因为每个应用程序仅存在一个此类的实例。然后，您可以通过调用在您的活动中检索它`((YourApplication)getApplication()).getDownloadService()`。你不得不：

1.  创建一个扩展应用程序的类，比如 YourApplication
2.  在清单文件的`<application>`标签中将其声明为`android:name="YourApplication"`
3.  通过调用在您的活动中使用它`((YourApplication)getApplication()).someMethodToGetDownloadService()`

# silverlight - 如何使用属性通过 XAML 绑定文本块的文本？

> ID：11170257
> 
> 赞同：1
> 
> 时间：2012-06-23T14:25:55.967
> 
> 标签：silverlight, xaml, binding

我正在开发一个 Silverlight 应用程序，我想通过字符串类型的属性绑定 textblock 的简单文本属性。

我所做的是：

```
<TextBlock Text="{Binding Name}"/> 
```

后面的代码：

```
public string Name{get;set;}

Name = "Testing..!"; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:31:30.047

扩展 anatoliiG 的答案（这将起作用）：默认情况下，数据绑定是指`DataContext`当前元素属性上的属性。这意味着您的

```
<TextBlock Text="{Binding Name}" /> 
```

实际上被翻译成

> 将`Text`属性值设置为`this.DataContext.Name`

（`DataContext`是继承的，所以如果它没有明确设置`TextBlock`它会检查父级，然后是父级的父级等）

您可以通过以下两种方式之一解决您的问题：

1.  您可以将父级`this.DataContext`上的值设置为父级本身（如 anatoliiG 建议的那样）。这意味着当它查找时`this.DataContext.Name`，它将检查`Page`自身，即您的`Name`财产所在的位置。

2.  您可以更改您的`Binding`，以便它在查找绑定时查看`Page`而不是。您可以使用标记扩展`Page.DataContext`来实现此目的：`RelativeSource`

这转化为：

> `TextBlock`找到类型为的 的第一个祖先`Page`，并绑定到该`Name`对象的属性

最后一点，如果您要`INotifyPropertyChanged`更改.`DataContext``Name`

哦，你*应该*使用视图模型`DataContext`而不是`Page`它本身！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:00:38.493

您的问题的答案是：在`Page_Loaded`event set`LayoutRoot.DataContext = this;`中。但这更像是hack，而不是好的做法。

您应该查看 MVVM 模式`INotifyPropertyChanged`并创建包含此属性的 ViewModel。

# c# - 用户在 asp.net MVC 3 url 中输入正斜杠“/”

> ID：11170258
> 
> 赞同：2
> 
> 时间：2012-06-23T14:26:03.287
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-routing

使用.Net 4，是否可以在路由参数中包含正斜杠，或者应该**强制用户使用连字符** `-`代替

示例： `mysite.com/user/{id}/{year}`映射到 `mysite.com/user/01/2012`

*在上面`{id} = {user/01}`的`{year} = 2012`例子中*

如果这是最后一个路由参数，则如下面的答案中所指出的那样会更容易。但它不是

我读过这些，和我一样的问题

*   [URL 中的 URL 编码斜杠](https://stackoverflow.com/questions/591694/url-encoded-slash-in-url)
*   [如何传递特殊字符以便 ASP.NET MVC 可以正确处理查询字符串数据？](https://stackoverflow.com/questions/373599/how-to-pass-special-characters-so-asp-net-mvc-can-handle-correctly-query-string)
*   [如何使 ASP.NET Routing 转义路由值？](https://stackoverflow.com/questions/2174538/how-to-make-asp-net-routing-escape-route-values)

但我并没有真正得到我想要的。如果我想生成 URL，我可以使用这个解决方案。

**但是如果用户在浏览器中输入 url 会发生什么？**

还是应该避免这种情况并强制用户使用其他格式，例如将“/”替换为“-”？如：mysite.com/user/usr-01/2012

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:56:59.763

松散解释： *路由参数可以包含正斜杠吗？*

答案：**不**。只是避免这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T15:35:34.683

如果我没听错的话。用户 ID 是“mhis/001”，年份是 2012，那么你想使用这样的 URL： `http://localhost:59025/User/mhis/001/2012`

### Global.asax - 定义路线：

```
routes.MapRoute(
                "UserDetails", // Route Name
                "User/{idpart1}/{idpart2}/{year}", // URL with parameters
                new { controller = "User", action = "Details", year= UrlParameter.Optional} // Parameter defaults
            ); 
```

“year”参数设置为可选，因此如果用户输入`http://localhost:59025/User/mhis/001/2012`，则年份将为 2012，如果不输入任何内容，则年份将为空。

### 一个虚拟用户类：

```
public class User
{
    public String Id { get; set; }
    public String Name { get; set; }

    /// <summary>
    /// just a helper to get the first part of the userID
    /// </summary>
    public string IDPart1 { get { return Id.Split('/')[0]; } }
    /// <summary>
    /// just a helper to get the second part of the userID
    /// </summary>
    public string IDPart2 { get { return Id.Split('/')[1]; } }
} 
```

向 User 类添加了两个帮助器属性，将用户名分开（IDPart1，IDPart2），因此在视图中更易于使用

### 具有虚拟用户列表的控制器：

```
public class UserController : Controller
{
    /// <summary>
    /// user list...
    /// </summary>
    List<User> _users = new List<User> {
        new User{ Id="mhis/001", Name="John Smith"},
        new User{ Id="mhis/002", Name="Some Body Else"}
    };    

    /// <summary>
    /// This is actually a user list, but...
    /// </summary>
    /// <returns></returns>
    public ActionResult Index()
    {
        return View(_users);
    }

    public ActionResult Details(string idpart1, string idpart2, int? year)
    {
        //do what you have to do with the year...
        ViewBag.year = year;            

        string realUserID = String.Format(@"{0}/{1}", idpart1, idpart2);
        var user = _users.FirstOrDefault(u => u.Id == realUserID);

        return View(user);
    }
} 
```

### 列表视图：

```
 @foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>            
                @Html.ActionLink("Details", "Details", new { idpart1 = item.IDPart1, idpart2 = item.IDPart2 }) 
            </td>
        </tr>
    } 
```

有趣的部分是：`@Html.ActionLink("Details", "Details", new { idpart1 = item.IDPart1, idpart2 = item.IDPart2 })`，你得到你想要的。

### 详情查看：

```
 @model MvcApplication1.Controllers.User

    @{
        ViewBag.Title = "Details";
    }
    @if(Model != null) {
    <h2>Details</h2>

    <fieldset>
        <legend>User</legend>

        The year is: "@ViewBag.year"

        <div class="display-label">Name</div>
        <div class="display-field">
            @Html.DisplayFor(model => model.Name)
        </div>
    </fieldset>

    <p>@Html.ActionLink("Back to List", "Index")</p>

    } else {//this should be handled in the controller...
        <h2>User not found!</h2> 
    } 
```

# ruby-on-rails - 在emacs的rails项目中显示缓冲区切换期间的文件路径

> ID：11170259
> 
> 赞同：0
> 
> 时间：2012-06-23T14:26:30.070
> 
> 标签：ruby-on-rails, emacs

我使用 Emacs 和 Ruby Electric 和 Rinari 扩展来进行 Rails 开发和 ISwitchB 进行缓冲区切换。在 Rails 中，我们经常有两个同名的文件，例如 _form.html.erb，用于不同的视图。使用 Cx b 切换缓冲区时，我看到的是文件名，但看不到文件所属的路径，所以我想要哪个不是很明显。其他编辑器，例如 Sublime Text 显示，但我想坚持使用 Emacs :) 有没有办法在切换缓冲区时也显示文件的路径？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:51:37.330

将以下内容添加到我的 .emacs

```
(require 'uniquify)
(setq uniquify-buffer-name-style 'forward) 
```

# .net - System.IO.Packaging：无法确定域的身份

> ID：11170262
> 
> 赞同：3
> 
> 时间：2012-06-23T14:27:02.647
> 
> 标签：.net, isolatedstorage, open-packaging-convention

我正在使用 System.IO.Packaging 在完全托管的桌面（Windows 窗体）应用程序中创建文件。

在某些情况下，写入 OPC 包会引发*“无法确定域的身份”*异常。我了解到它与独立存储有关，因为打包 API 有时会在那里创建临时数据。

我还没有找到可靠的复制品，但我相信当数据超过一定大小（压缩几兆字节）时会发生这种情况，并且可能还取决于运行应用程序的用户帐户的类型。

*   什么是“域”？我的应用程序域？是什么控制了普通 Windows 窗体应用程序中的“身份”？

*   我怎样才能避免这个问题（除了手动创建没有 OPC 的 zip 存档文件）？

# java - 指定的 JRE 安装不存在

> ID：11170263
> 
> 赞同：41
> 
> 时间：2012-06-23T14:27:02.913
> 
> 标签：java, windows, tomcat, maven, java-7

我正在尝试在 eclipse indigo EE 上的 tomcat 7 上启动服务器，
但出现以下错误：

"'starting Tomcat v7.0 server at localhost'遇到问题。
指定的JRE安装不存在"

我检查了构建路径配置，在库部分我将
JDK7 作为 JRE System Libraray，当我检查“已安装的 JRE...”时，正确的
路径就在那里 - “C:\Program Files\Java\jdk1.7.0_01” .

还有什么可以做的？非常感谢。

ps - 我也在使用 maven 3.0.3

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-10-22T15:31:06.067

双击服务器以调出概览。

单击运行时环境。

从下拉列表中选择 JRE。您可能需要通过单击已安装的 JRE 并单击添加来进行设置。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-18T19:04:45.987

如果上述说明没有帮助，您可以执行以下操作：

1-从运行菜单中选择“运行配置...”

2- 选择您的 Maven 运行配置文件，然后单击“JRE”选项卡。

3- 选择“Alternate JRE”，然后从下拉列表中选择“jdk1.7xxx”（或您想使用的任何 jdk），您还可以选择工作区默认 jre。

我面临同样的问题，这有帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-23T19:38:23.713

转到构建文件。

右键单击它。

根据屏幕截图执行以下操作

![在此处输入图像描述](../Images/c74e02ff0054ffb675a0df076031acf6.png)

![在此处输入图像描述](../Images/92b1fff45e9665581691a0aa09909ab7.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-02-17T07:43:46.183

窗口-->首选项-->服务器-->运行时环境；像这样....![在此处输入图像描述](../Images/2f24e123aeae9b147d087cdbe6d4739b.png)

编辑你的 Apache，然后选择你的 jdk 目录....

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-12-18T08:00:15.117

转到*属性*→ *Java 构建路径*→*库*。

在这里，您将在路径不正确的库上看到一个红十字。

选择此库，单击*编辑*按钮，并将其更改为正确的路径。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-07-10T12:29:20.590

这是一个带图片的解决方案

[http://javahonk.com/specified-jre-installation-does-not-exist/](http://javahonk.com/specified-jre-installation-does-not-exist/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-23T16:02:37.240

它在运行“mvn install clean -P prepare”后工作

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-08-18T21:33:47.440

对于 Eclipse MARS，对于 maven 项目。

按照说明安装新 JRE 后（例如：http: [//javahonk.com/specified-jre-installation-does-not-exist/](http://javahonk.com/specified-jre-installation-does-not-exist/)），不要使用旧配置，而是**创建新配置**。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-07T07:23:34.680

更新了 Java、JRE。所以我遇到了同样的问题，我已经尝试了所有这些，但我继续解决这个问题。然后在那之后，我从应用程序中删除了服务器，然后添加了新服务器，我提到了新的 JRE 版本，现在它工作正常。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-04T07:22:15.583

打开eclipse并找到服务器选项卡并尝试打开它。有点击运行时环境

通过单击 Installed JREs and Add 从下拉列表中选择 JRE 进行设置。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-01-20T14:50:58.923

如果您使用 Maven，请尝试：

[EclipseMavenJRE_1](https://i.stack.imgur.com/LKhd0.png)

[EclipseMavenJRE_2](https://i.stack.imgur.com/koNIF.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-02-17T07:38:36.347

窗口-->首选项-->服务器-->运行时环境；像这样.... [在此处输入图像描述](https://i.stack.imgur.com/04oui.png)

编辑你的 Apache，然后选择你的 jdk 目录....

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-10-08T20:04:35.203

它在更新服务器运行时环境 JRE 后工作。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-10-15T20:34:11.313

就我而言，我已经更改了安装在 Eclipse 上的 JRE，但消息仍然出现。

所以，

```
1 - Right click at the JBoss Server > Open Lauch Configuration

2 - Select tab Classpath and click "Restore Default Entries"

3 - Close the window and Right click again the Jboss Server

4 - Select Properties > General

5 - Click two times 'Switch Location' (it returns to [workspace
metadata])

6 - Click Apply and Close 
```

之后，在 Jboss Server > Clean 处重新右键单击，Jboss Server 停止了消息。

希望能帮助到你。

# ip - 我可以捕获每个登录我网站的用户的 IP 地址吗

> ID：11170268
> 
> 赞同：2
> 
> 时间：2012-06-23T14:27:40.823
> 
> 标签：ip, ip-address

我被要求获取登录我们网站的每个用户的详细信息。是否可以捕获登录我们网站的每个用户的 IP 地址，我可以使用 IP 查找软件从中收集详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:34:02.477

它已经被捕获了。无论您的网络服务器是什么，请查看网络日志。

在 IIS 中，它可能在`C:\Windows\System32\LogFiles`. Apache 通常会在`/var/log`.

您可以调整它捕获的细节，但默认情况下始终包含 IP 地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T15:12:43.547

除非明确要求您自己存储 ip:s，否则我建议使用[Google Analytics](http://www.google.com/analytics/)，它会整理出唯一/回访者、地理位置等。

# svn - 使用 TortoiseSVN 强制刷新“未更改”文件

> ID：11170270
> 
> 赞同：0
> 
> 时间：2012-06-23T14:27:50.177
> 
> 标签：svn, vb6, tortoisesvn

我有一个 VB6 项目，当我打开它时，VisualBasic IDE 认为删除它没有参考的所有控件就可以了。

出于某种原因，TortoiseSVN 无法识别这些更改，尽管所有受影响的文件都发生了时间戳更改，并且在您运行 diff 时发生了非常明显的更改。我无法恢复有问题的文件，因为它们未被识别为已更改，如果我强制执行递归更新，它会跳过它们，因为它们已经是“最新的”......我不想吹走我的文件夹并重新开始如果我不必。所有文件都在我的 C 盘。

关于如何强制刷新这些文件的建议？

（一个类似的未解决问题：[Tortoisesvn doesn't identify changed files after update](https://stackoverflow.com/questions/8167250/tortoisesvn-doesnt-recognize-changed-files-after-update)）

# c - 存储文件夹的路径

> ID：11170275
> 
> 赞同：1
> 
> 时间：2012-06-23T14:28:21.150
> 
> 标签：c

我在哪里可以存储文件夹的路径，可以从 C 程序中的每个函数/变量访问？前任。我在 path 中有一个名为 do_input.exe 的可执行文件`c:\tests\myprog\bin\do_input.exe`，在等中有一个名为 do_input.exe 的可执行文件`C:\tools\degreesToDms.exe`，等等。我应该如何以及在哪里存储这些？

我将它们作为字符串存储在一个头文件中，该头文件包含在每个项目的文件中，但有人不鼓励这样做。他们是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:36:43.803

`.h`如果它们保持不变，那么我认为在引用路径的所有各种 .c 文件中包含的“”头文件中定义这些路径没有任何问题。但是运行这个东西的每台计算机都可能有不同的路径（“ `Tests`”而不是“ `test`”），所以这是一种超级危险的编程，并且只有在你控制的单台机器或一组机器上运行它时才可能安全直接地。

如果路径会*改变*，那么您需要为这些路径创建一个存储位置（例如静态字符数组等），然后有方法允许这些路径被获取并可能动态重置（例如，而不是将输出文件写入“ `results`” ，也许用户想要改变一些东西以将文件写入“ `/tmp`”）。完全取决于您在代码中执行的操作以及您编写的工具将执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:38:22.270

> 我将它们作为字符串存储在一个头文件中，该头文件包含在每个项目的文件中，但有人不鼓励这样做。他们是对的吗？

是的，他们是绝对正确的：将带有文件系统中路径的安装特定字符串“烘焙”到编译代码中并不是一个好的决定，因为您必须重新编译以更改某些关键文件的位置。这限制了团队其他成员运行测试的灵活性，并且可能会阻止您的测试在自动化测试环境中自动运行。

更好的解决方案是使用带有关键目录位置的纯文本配置文件，以及读取该文件并在运行时生成正确位置的函数。

或者，您可以将关键目录的位置作为命令行参数提供给您的程序。这样，运行您的程序的用户无需重新编译即可设置正确的位置。

# java - 在 Heroku 上运行 Web 应用程序

> ID：11170277
> 
> 赞同：0
> 
> 时间：2012-06-23T14:28:51.617
> 
> 标签：java, heroku

当我试图运行我的 Play 时！Herocu 上的应用程序我有一条消息，我应该使用“play -DapplyEvolutions.default=true”命令运行它。但是我该怎么做呢？

现在我正在做的是将我的 webapp 推送到 heroku 并使用命令进行操作：“heroku ps”和“heroku logs”。最后一个给了我错误的详细信息。如何远程在 heroku 上运行应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:56:33.190

这是游戏2吗？如果是这样，您将需要一个`Procfile`包含：

```
web: target/start -Dhttp.port=$PORT -DapplyEvolutions.default=true -Ddb.default.driver=org.postgresql.Driver -Ddb.default.url=$DATABASE_URL 
```

# html - CSS 固定水平居中元素

> ID：11170280
> 
> 赞同：0
> 
> 时间：2012-06-23T14:29:05.700
> 
> 标签：html, css

如何水平居中元素并同时保持固定？

这可能吗？页面上的其他元素可以使用 html 或 css。

例子：

![例子](../Images/a783676ad9a66a16688043bccfc7b42a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T07:44:27.087

试试`margin: auto;`。它水平居中，但元素必须具有宽度。

# android - 如何根据 web 上的 HTML 文档进行 textview 更改

> ID：11170281
> 
> 赞同：0
> 
> 时间：2012-06-23T14:29:26.383
> 
> 标签：android, android-layout

我和几个朋友正在建立一个小应用程序业务，我们正在创建我们的通用应用程序，以查找有关我们其他应用程序的所有最新消息。但是我们有一个小问题。

我们有一个布局 xml 文件，其中包含一个表格行。在表格行中，我们要显示两个文本视图。一个显示当前应用程序版本（我们已成功完成），另一个将显示来自现在活动的 HTML 页面的一些数字。

我想知道，如何将 Web 上的 HTML 文档中的文本获取到该文本视图，或者我们可以使用的任何其他东西。

（我们知道清单必须允许互联网）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:37:35.133

那么在这个TextView中，你想展示HTML页面的内容吗？如果是这种情况，您可以做的最好的事情是将 TextView 替换为 WebView，您可以在其中通过其 url 加载 HTML 页面。

如果不是这种情况，您可以向该 HTML 发出 GET 请求（即使用异步任务），获取结果并将它们呈现在 TextView 中。

希望这可以帮助！

# c# - C# SQL 聚合 ExecuteScalar 返回查询

> ID：11170283
> 
> 赞同：2
> 
> 时间：2012-06-23T14:29:36.120
> 
> 标签：c#, null, aggregate-functions, tostring, executescalar

一个 SQL 聚合函数，用于计算 DB 中名称输入的数量。

```
string cnnStr = ConfigurationManager.ConnectionStrings["LGFConnectionString"].ConnectionString;
string mySQL = "SELECT COUNT(*) FROM  " + which.table + " WHERE " + which.column + " = ?pram;";
string value = null;

using (MySqlConnection cnn = new MySqlConnection(cnnStr))
{
        using (MySqlCommand cmd = new MySqlCommand(mySQL, cnn))
        {
            MySqlParameter param = new MySqlParameter("?pram", MySqlDbType.VarChar, 128);
            param.Value = which.text;
            cmd.Parameters.Add(param);

            cnn.Open();

            value = cmd.ExecuteScalar() as string;
            value = cmd.ExecuteScalar().ToString();

            cnn.Close();
        }
} 
```

请注意，我已经打`cmd.ExecuteScalar`了两次电话。有趣的部分是查询返回不同的结果。

```
value = cmd.ExecuteScalar() as string; 
```

不返回正确的值。如果 name 列中存在或缺少 name，则返回 null。

```
value = cmd.ExecuteScalar().ToString(); 
```

正确返回。如果存在则返回“1”，如果缺失则返回“0”。

在网上搜索，我没有找到可以理解的解释。

我已经读过，如果 name 列中缺少 name，那么`cmd.ExecuteScalar`将返回`null`.

有什么区别：

```
value = cmd.ExecuteScalar() as string;
value = cmd.ExecuteScalar().ToString(); 
```

谢谢你，德狗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:34:45.537

`as`在[文档中](http://msdn.microsoft.com/en-us/library/cscsdfbt%28v=vs.71%29.aspx)

> as 运算符用于执行兼容类型之间的转换。
> 
> as 运算符类似于强制转换，只是它在转换失败时产生 null 而不是引发异常

```
// if cmd.ExecuteScalar() is string then return string
// if not then return null
// this will return null, because cmd.ExecuteScalar() won't return string
// for your code it should return Int32
value = cmd.ExecuteScalar() as string; 
```

`ToString()`在[文档中](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)

> ToString 是 .NET Framework 中的主要格式化方法。它将对象转换为其字符串表示形式，以便它适合显示。（有关 .NET Framework 中的格式化支持的信息，请参阅格式化类型。）

```
// return a string that represents the current object
// will return correct value because it casts Int32 value to string value
value = cmd.ExecuteScalar().ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:34:13.560

你在上面做两件不同的事情。让我们将您的代码更改为以下内容：

```
decimal value = cmd.ExecuteScalar();
string str1 = value as string;
string str2 = value.ToString(); 
```

str1 将为空，因为十进制不能转换为字符串。str2 将是值，因为您可以在小数点上调用 ToString()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T14:40:03.570

如果对象类型与您尝试将其转换为的类型不匹配，则“as”关键字将返回 null。

在您的情况下发生的事情是返回的对象是一个 int 并且当您对此调用 toString 时，它将为您提供整数的字符串表示形式。当你使用它时，它会给你一个空值。

# c# - 鼠标点击原点

> ID：11170284
> 
> 赞同：0
> 
> 时间：2012-06-23T14:29:49.340
> 
> 标签：c#, click

我正在对机器人进行分析。

有没有办法知道按钮单击是“以编程方式”执行的还是使用鼠标设备执行的？

（如果解决方案在 .Net 中，那会很好）问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:58:27.377

如果这是 Asp.Net，AjaxControlToolKit 有一个漂亮的控件，我觉得效果很好：

```
<asp:NoBot ID="NoBot1" runat="server" ResponseMinimumDelaySeconds="10" /> 
```

否则，您可以测量显示表单和返回答案之间的时间，因为机器人以毫秒为单位测量响应，我们人类要慢得多。

对于 NoBot 控件，有一个事件`OnGenerateChallengeAndResponse`可以自定义响应。

请参阅此博客文章：[Ajax Control Toolkit NoBot 控件和会话状态](http://jlchereau.blogspot.com/2007/10/ajax-control-toolkit-nobot-control-and.html)

# javascript - 是否可以使用 css/js 将带有滚动条的元素自动调整到相同的位置？

> ID：11170289
> 
> 赞同：2
> 
> 时间：2012-06-23T14:30:21.487
> 
> 标签：javascript, css, html, scrollbar

我画了这个问题，以便您更好地理解它： ![问题：](../Images/2c48b83705121f60f5aaf1f043019d33.png)

所以，问题 - 是否有可能为两个蓝色元素获得相同的位置？我不能只添加“padding-right”——在不同的操作系统/浏览器中，滚动条可以有不同的宽度......

可以用css做吗？如果没有，是否有 JavaScript 解决方案可以手动获取滚动条元素的宽度和中心蓝色元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:33:23.810

您可以在蓝色框周围添加一个不可见的包装器，该包装器占用父级中的所有空间减去滚动条的宽度。这将使蓝色框始终与容器 2 中的大小相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:37:14.340

只需让滚动条始终可见，而不是想出一个聪明的解决方案。根据您的内容/应用程序，滚动条可能在 95% 的时间内始终可见（至少在我遇到此类问题时是这样的）。

# performance - matlab从矩阵中选择向量并隐藏单个维度

> ID：11170291
> 
> 赞同：1
> 
> 时间：2012-06-23T14:30:59.947
> 
> 标签：performance, matlab, vector, matrix, slice

如何选择矩阵的某些部分并切割单个维度？

示例：B = zeros(100,100,3,'double');

当我选择 B(2,3,:) 时，我得到一个`1x1x3`矩阵作为结果 - 这不是预期的结果，因为对于某些操作（如 norm），我需要一个向量作为结果。为了处理这个问题，我使用`squeeze`了 ，但是这个操作似乎非常耗时，尤其是在大量使用的时候。

如何仅选择矢量并“剪切”单个维度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:50:34.783

在您的情况下，您可以使用冒号运算符，如下所示：

```
x = B(2,3,:);
x = x(:); 
```

这将 X 的所有元素放入元素数乘以 1 的向量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T22:04:11.030

您还可以排列尺寸以将非单件放在前面。任何一个：

```
>> permute(B(2,3,:),[3 1 2])
ans =
      0.97059
      0.69483
       0.2551 
```

或者

```
>> permute(B(2,3,:),[1 3 2])
ans =
      0.97059      0.69483       0.2551 
```

取决于您想要行向量还是列向量。

# css - CSS3渐变错误，替换背景颜色

> ID：11170293
> 
> 赞同：2
> 
> 时间：2012-06-23T14:31:03.980
> 
> 标签：css

我正在尝试使用 CSS3 制作此按钮： ![在此处输入图像描述](../Images/7eb09988d014f22a2d798e7fec2c62fc.png)

但我的按钮现在看起来像这样：

![在此处输入图像描述](../Images/27824d4f96e69fa9c23d434225133968.png)

CSS3 渐变效果以某种方式去除了蓝色，为什么会这样做以及如何修复它。

这是一个 jsFiddle 示例：http: [//jsfiddle.net/fjYWZ/](http://jsfiddle.net/fjYWZ/)

HTML 代码：

```
<a class="button large facebook radius nice" href="#">Logga in med facebook</a> 
```

CSS 代码：

```
 .button{

                -moz-transition-duration: 0.1s;
                -moz-transition-property: opacity;
                -moz-transition-timing-function: ease-in;

                background-color: #999999;
                border: 1px solid #999999;
                color: #FFFFFF;
                cursor: pointer;
                display: inline-block;
                font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
                font-size: 1.3rem;
                font-weight: bold;
                line-height: 34px;
                margin: 0;
                outline: medium none;
                padding: 0 34px;
                position: relative;
                text-align: center;
                text-decoration: none;
        }
        .large {
            font-size: 18px;
            line-height: 48px;
            padding: 0 40px;
            width: auto;
        }

        .facebook {
            background-color: #3B5998;
            border-color: #3B5998;
            color: #FFFFFF;
        }
        .button.radius {
            border-radius: 7px 7px 7px 7px;
        }
        .full-width {
            padding-left: 0 !important;
            padding-right: 0 !important;
            text-align: center;
            width: 100%;
        }
        .nice {
            background: -moz-linear-gradient(center top , rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0)) repeat scroll 0 0%, none repeat scroll 0 0 #999999;
            box-shadow: 0 1px 0 rgba(255, 255, 255, 0.5) inset;
            text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.3);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:01:38.747

只需在您的`.button`课程 中添加此属性

```
.button{
   /*Your existing styling*/
   background: -webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.4)), to(rgba(255, 255, 255, 0)));
} 
```

试试这个更新[的小提琴](http://jsfiddle.net/fjYWZ/2/)

**编辑**我已经更新了代码以支持多种颜色在这里你可以找到两个不同颜色的按钮。我添加了两个类作为`.red`& `.blue`。请参考新[小提琴](http://jsfiddle.net/fjYWZ/3/)

```
.blue{
    background: -webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.4)), to(rgba(255, 255, 255, 0)));
        background: -moz-linear-gradient(center top , rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0)) repeat scroll 0 0%, none repeat scroll 0 0 #999999;
}

.red{
    background: -webkit-gradient(linear, left top, left bottom, from(rgba(255, 0, 0, 0.4)), to(rgba(255, 0, 0, 0)));
        background: -moz-linear-gradient(center top , rgba(255, 0, 0, 0.4) 0%, rgba(255, 0, 0, 0)) repeat scroll 0 0%, none repeat scroll 0 0 #999999;
} 
```

**注意：**`body`从类中删除这些属性。还要添加尽可能多的颜色类，并将此类添加为样式标签中的第二个参数

```
<a class="button blue large facebook radius nice" href="#">Logga in med facebook</a> 
```

这里`class="button blue large facebook radius nice"`使用第二类作为新的颜色类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T15:03:05.730

您`-moz-linear-gradient`将背景重置为`#999999`...将其更改为`#3B5998`并且效果很好。

请记住 -moz 前缀意味着这仅适用于 Firefox。

# scala - 是否可以告诉 scaladoc 使所有指向源的链接在新选项卡中打开？

> ID：11170300
> 
> 赞同：1
> 
> 时间：2012-06-23T14:31:27.010
> 
> 标签：scala, scaladoc

目前，scaladoc 尝试在同一框架中打开所有链接 - 如果源位置无法在框架中工作（例如，github 页面），则会导致错误。

例如：[扇贝](http://rogach.github.com/scallop/#org.rogach.scallop.Scallop%24)

尝试通过左键单击链接来打开源代码会导致 Chrome 中*没有任何内容*，并且 Opera 中会出现错误。

有没有办法解决这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:34:49.547

在 Scala 2.10 上，在单独的窗口中打开源代码是默认设置。

# php - 如何使用 UPC 代码检索 ebay 产品？

> ID：11170308
> 
> 赞同：1
> 
> 时间：2012-06-23T14:33:24.300
> 
> 标签：php, rest, ebay-api

我有一个数码相机的 UPC（佳能 EOS 350D），我想在 ebay 上找到与此 UPC 匹配的产品。我已阅读 API 文档并尝试了以下操作：

[http://open.api.ebay.com/shopping?callname=FindProducts&responseencoding=XML&appid=MYAPPID&siteid=0&ProductID.Value=8714574585628&ProductID.Type=UPC&version=773](http://open.api.ebay.com/shopping?callname=FindProducts&responseencoding=XML&appid=MYAPPID&siteid=0&ProductID.Value=8714574585628&ProductID.Type=UPC&version=773)

但是，即使我在 ebay.co.uk 上搜索该 UPC 时有结果，这也不会给我带来结果

如何让与此 UPC 匹配的列表返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-07T08:19:28.060

最简单的方法是使用 Finding API -> FindItemsAdvanced 调用。这是一个调用您需要的示例。

```
<?xml version="1.0" encoding="UTF-8"?>
<findItemsAdvancedRequest xmlns="http://www.ebay.com/marketplace/search/v1/services">
    <descriptionSearch>true</descriptionSearch>
    <paginationInput>
        <entriesPerPage>10</entriesPerPage>
    </paginationInput>
    <keywords>753182925158</keywords>
</findItemsAdvancedRequest> 
```

当然，这不是唯一的方法。但我觉得这是最简单的。

# delphi - virtualtreeview 添加图标失败

> ID：11170316
> 
> 赞同：1
> 
> 时间：2012-06-23T14:34:21.097
> 
> 标签：delphi, icons, virtualtreeview

这是我将文件名及其关联图标添加到 virtualtreeview 的简单代码

```
 PFileInfoRec = ^TFileInfoRec;
  TFileInfoRec = record
    strict private
      vFullPath: string;
      vFileName: string;
      vFileIcon: hIcon;
    public
      constructor Create(const FullPath: string);
      property FullPath: string read vFullPath;
      property FileNam : string read vFileName;
      property FileIcon: hIcon read vFileIcon;
  end; 
```

在我使用 shGetFileInfo Api 获得图标句柄之后

```
procedure TMainFrm.VSTGetImageIndex(Sender: TBaseVirtualTree;
  Node: PVirtualNode; Kind: TVTImageKind; Column: TColumnIndex;
  var Ghosted: Boolean; var ImageIndex: Integer);
var
  FileInfo: PFileInfoRec;
  Icon: TIcon;
begin
  FileInfo := Sender.GetNodeData(Node);
  Icon := TIcon.Create;
  try
    Icon.Handle := FileInfo.FileIcon;
      if Kind in [ikNormal , ikSelected] then
      begin
        if Column = 1 then ImageIndex := ImageList.AddIcon(Icon);
      end;
  finally
    Icon.Free; //here the probelme
  end;
end; 
```

删除 Icon.Free 时让我感到困惑的是什么；代码工作正常文件添加了图标，但是当免费的 TIcon 对象添加图标失败！任何人向我解释这段代码有什么问题？

我在这里先向您的帮助表示感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:23:39.273

首先，你必须停止打电话`ImageList.AddIcon`。`OnGetImageIndex`我不会详细重复该建议，而只是将您引荐给[您之前的问题](https://stackoverflow.com/questions/11098822/add-small-icon-to-virtualtreeview)。

至于这里发生了什么，这就是正在发生的事情：

1.  您创建一个图标句柄，`vFileIcon`.
2.  然后，您将该图标的所有权传递给`TIcon`实例。
3.  您释放图标实例，这反过来又删除了图标句柄。
4.  下次您调用`OnGetImageIndex`时，图标句柄`vFileIcon`指的是已销毁的句柄，因此您使用该图标的尝试自然会失败。

将此图标添加到图像列表的最简单方法实际上是使用[`ImageList_AddIcon`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761399.aspx)而不是创建`TIcon`实例。

```
FileInfo := Sender.GetNodeData(Node);
ImageList_AddIcon(ImageList.Handle, FileInfo.FileIcon); 
```

* * *

当实例被销毁时，可以使用 a`TIcon`而不会销毁句柄。`TIcon`调用[`ReleaseHandle`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Graphics.TIcon.ReleaseHandle)以告知`TIcon`实例它不再拥有图标句柄。

```
Icon := TIcon.Create;
try
  Icon.Handle := SomeIconHandle;
  SomeImageIndex := ImageList.AddIcon(Icon);
  Icon.ReleaseHandle;
finally
  //because ReleaseHandle was called, this no longer destroys the icon handle
  Icon.Free;
end; 
```

# mysql - MySQL 独占行选择

> ID：11170322
> 
> 赞同：3
> 
> 时间：2012-06-23T14:35:28.397
> 
> 标签：mysql

我有一个名为“survey_product”的表，其结构如下：

```
id int(11)
order_id int(11)
product_id int(11)
pq1 varchar(2)
pq2 varchar(2)
pq3 varchar(2) 
```

此表存储通过系统订购的产品。

以下是该表中的一些数据记录：

```
(1, 2, 20, '1', '1', 'y')
(2, 2, 21, '1', 'y', 'y')
(3, 2, 22, '1', 'y', 'n')
(4, 2, 23, '1', 'y', 'y')
(5, 2, 24, '1', 'n', 'y')
(6, 3, 20, '1', 'n', 'y')
(7, 3, 24, '1', 'n', 'y')
(8, 3, 25, '1', 'n', 'y')
(9, 4, 20, '1', 'n', 'y')
(10, 4, 21, '1', 'n', 'y')
(11, 4, 23, '1', 'n', 'y')
(12, 4, 24, '1', 'n', 'y') 
```

上面我们有 3 个订单（order_id 2、3 和 4）。

我需要为所有具有 product_id = 21 但不是 product_id = 20 的订单获取 order_id（订单中的其他 product_id 无关紧要 - 我只对 21 和 20 感兴趣）。

然后我需要知道同时具有 product_id 20 和 21 的订单（同样，订单中的其他产品无关紧要）。

这是立即拉取特定产品的所有订单的基本查询：

```
SELECT order_id FROM survey_product 
WHERE product_id = 20
AND (pq1 = '1' OR pq1 = '2' OR pq1 = '3') 
```

关于如何实现这一目标的任何想法？

我试过了

```
SELECT order_id FROM survey_product 
WHERE product_id IN (20) AND product_id NOT IN (21)
AND (pq1 = '1' OR pq1 = '2' OR pq1 = '3') 
```

但它也排除了所有其他值。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T14:59:26.837

在这种情况下，使用 JOIN 而不是嵌套查询通常是有益的：

```
 SELECT sp.order_id
      FROM survey_product AS sp
 LEFT JOIN 
           (SELECT order_id FROM survey_product WHERE product_id = 20) AS sp_t
        ON sp.order_id = sp_t.order_id
     WHERE sp_t.order_id IS NULL
       AND sp.product_id = 21
       AND sp.pq1 IN ('1', '2', '3') 
```

获得`order_id`20 和 21 in的查询`product_id`是相似的：您只需使用 `INNER JOIN`而不检查`sp_t.order_id`. 或者只是保持原样，但如果你很懒，请替换为 - 但我想那会运行得更慢`IS NULL`。`IS NOT NULL`)

这是一个可以使用的[SQL 小提琴](http://sqlfiddle.com/#!2/646f9/7)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T14:41:29.097

我通常通过在 WHERE 条件下使用嵌套查询来做到这一点：

```
SELECT order_id
FROM survey_product
WHERE product_id = 21
AND pq1 IN ('1', '2', '3')
AND order_id NOT IN (
    SELECT order_id 
    FROM survey_product
    WHERE product_id = 20) 
```

基本上，您从 where 行中找到所有`order_id`s，`product_id = 20`然后将它们从主查询中排除，即您`order_id`从 where`product_id = 21`但不在`order_id`子查询产生的 s 中的行中选择 s。

# javascript - 获取字符串的最后一部分

> ID：11170323
> 
> 赞同：1
> 
> 时间：2012-06-23T14:35:33.170
> 
> 标签：javascript, jquery, string

我有一个带有名称属性的输入字段，例如`field[subkey][subkey2]`

如何`subkey2`在 javascript 中获取字符串的最后一部分？

```
$('input').each(function(){
 var name = $(this).attr('name');

 // here I need only the last part of "name"

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:37:54.880

第一个想法：

```
var string = "field[subkey][subkey2]",
    parts = string.split('['),
    variable2 = parts[2].substring(0,parts[2].length - 1); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Zkpsw/)。

或者：

```
var string = "field[subkey][subkey2]",
    variable2 = string.substring(string.lastIndexOf('[') + 1,string.length - 1); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Zkpsw/1/)。

如果要使用 jQuery 选择相关元素：

```
$('input').each(
    function() {
        var string = this.name;
        $(this).val(string.substring(string.lastIndexOf('[') + 1, string.length - 1));
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Zkpsw/3/)。

参考：

*   [`string.lastIndexOf()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/lastIndexOf).
*   [`string.split`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split).
*   [`string.substring()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T14:37:37.037

```
"field[subkey][subkey2]".match(/\[([^\]]*)\]$/)[1]
//"subkey2" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T14:39:59.313

```
str='field[subkey][subkey2]';
spl=str.split('][');
new_str=spl.pop();
final=new_str.substr(0,new_str.length-1);

//final=subkey2 
```

如果你有一个可变的深度

# javascript - 根据度数计算方向

> ID：11170325
> 
> 赞同：2
> 
> 时间：2012-06-23T14:35:37.210
> 
> 标签：javascript, jquery, math, graph, trigonometry

所以我正在使用 javascript 和画布开发粒子发射器。
我希望能够根据角度设置粒子发射的方向。

这可以通过这个函数来完成：

```
y = Math.tan(45 * Math.PI/180); 
```

如果角度为 45，则返回 1。等等。

但我不完全知道我应该如何实现这一点，因为像素的计算方式略有不同。将 -1 视为每步删除一个像素，将 1 视为添加一个像素。

如果角度为 45，则 Y 为 1，X 为 1，这是正确的。
但是要让像素在 315 度处行进，Y 是 -1，X 应该是 1。
在 225 度时，Y 应该是 -1（但为 1），X 应该是 -1。

如果函数应该像这样工作，它应该是什么样子？

这是我如何思考的图像：（
发射器在原点。）

![发射器在原点](../Images/7a2ca7530f5e3bf6a595bd68a1b672c9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:48:02.210

其实很简单，

```
angle = (angle * Math.PI/180) % 360;
tangent = Math.tan(angle); 
```

因为你不知道 x 在哪里；

```
section_x_positive = (angle<90||angle>270?1:-1);
section_y_positive = (angle>0&&angle<180?1:-1);
x = abs(tangent) * section_x_positive;
y = abs(tangent) * section_y_positive; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T18:08:21.643

在我看来，您的问题是您正在考虑方向，这是一个向量，就好像它是一个标量一样。

您需要记住，二维向量表示为两个分量：

![在此处输入图像描述](../Images/4340f07b6f33f2a4a5f88e2d6195f160.png)

![在此处输入图像描述](../Images/3d2e37468ce4577bc5a4bef5c33bd593.png)

您可以根据单位向量工作，因此幅度 r = 1。

因此，如果您有一个方向角，应该以弧度为单位，沿逆时针方向增加，并从 x = 0 水平轴开始，您将得到指向您想要的方向的单位矢量的两个分量.

# php - 从 MySQL 表中选择看不见的随机行

> ID：11170328
> 
> 赞同：0
> 
> 时间：2012-06-23T14:36:03.760
> 
> 标签：php, mysql

我们在 MySQL 数据库中有一个问题列表，并希望它向用户显示一个随机批准的问题。当您单击随机按钮时，我们希望显示另一个随机问题，但不显示用户已经看过的任何问题。

现在脚本看起来像这样：

```
<?php

mysql_connect("localhost", "username", "password") or die(mysql_error());
mysql_select_db("aldrig") or die(mysql_error());

$result = mysql_query("SELECT * FROM spg WHERE approved='1' ORDER BY RAND() LIMIT 1;") 
or die(mysql_error());    

while($row = mysql_fetch_array( $result )) {
    echo "<div class='contentTitle'><h1>";
    echo $row['text']; 
    echo "</h1></div>";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:10:44.230

我建议您获取所有问题，而不是在您的代码中解决曾经已经显示的问题，如果您不想将它们从结果列表中取出并放入新列表中，那么您就可以将它们扔掉。

```
 <?php

mysql_connect("localhost", "username", "password") or die(mysql_error());
mysql_select_db("aldrig") or die(mysql_error());

$result = mysql_query("SELECT * FROM spg WHERE approved='1'") or die(mysql_error());
$answers = mysql_fetch_array($result);

start_session();

if (isset($_COOKIE["answers"]))
    $alreadyShownAnswers = json_decode($_COOKIE["answers"]);
else
    $alreadyShownAnswers = array();

$answerToShow = $answers[$randomIndex];
$alreadyShownAnswers[] = $answers[$randomIndex];
unset($answers[$randomIndex]);
$answers = array_values($answers);

echo "<div class='contentTitle'><h1>";
echo $answerToShow; 
echo "</h1></div>";

$_COOKIE["answers"] = json_encode(alreadyShownAnswers);

?> 
```

像这样的东西？

**编辑：**

使用 cookie 或 session 的方法

```
start_session();
$_COOKIE["answer1"] = $answer1;
$_SESSION["answer2"] = $answer2; 
```

现在，当您想在重新调整后再次检索这些值时，请执行此操作。

```
start_session();
$answer1 = $_COOKIE["answer1"];
$answer2 = $_SESSION["answer2"]; 
```

使用 JavaScript 进行持久存储使用草坪椅：http: [//brian.io/lawnchair/](http://brian.io/lawnchair/)

例子：

```
var store = new lawnchair({name:'testing'}, function(store) {

    // create an object
    var me = {key:'brian'};

    // save it
    store.save(me);

    // access it later... yes even after a page refresh!
    store.get('brian', function(me) {
        console.log(me);
    });
}); 
```

**编辑2：**

用新代码更新了第一个代码块，我没有对此进行测试，但类似的东西应该可以工作。

# java - 使用 JENA api 读取文件时出错

> ID：11170335
> 
> 赞同：1
> 
> 时间：2012-06-23T14:36:53.060
> 
> 标签：java, jena

对于以下代码：

```
Model m2=ModelFactory.createDefaultModel();
m2.read("Untitled.xml"); 
```

我得到错误：`Exception in thread "main" com.hp.hpl.jena.shared.JenaException: java.net.MalformedURLException: no protocol: Untitled.xml`

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T14:46:11.000

它需要一个网址，请尝试`m2.read(new File("Untitled.xml").toURL().toString());`

# ruby-on-rails - Redmine 2.0.1 - 缺少 CSS？

> ID：11170336
> 
> 赞同：0
> 
> 时间：2012-06-23T14:37:12.527
> 
> 标签：ruby-on-rails, ruby, passenger, redmine

我正在使用的版本：

```
 Redmine version                          2.0.1.stable
  Ruby version                             1.8.7 (i386-linux)
  Rails version                            3.2.3
  Environment                              production
  Database adapter                         MySQL 
```

奇怪的是按`Ctrl`+`F5`几次后，我会得到这样的东西：

![在此处输入图像描述](../Images/f890a834408e6ae7aba1934298fd0624.png)

我在以下内容中找不到任何有趣的内容`production.log`：

```
Started GET "/admin/info" for 192.168.3.40 at Sat Jun 23 21:14:50 +0700 2012 
Processing by AdminController#info as HTML 
  Rendered admin/info.html.erb within layouts/admin (2.2ms) 
  Rendered admin/_menu.html.erb (7.8ms) 
  Rendered layouts/base.html.erb (72.9ms) 
Completed 200 OK in 93ms (Views: 79.1ms | ActiveRecord: 8.3ms) 
```

**/etc/httpd/conf.d/passenger.conf**

```
LoadModule passenger_module /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/ext/apache2/mod_passenger.so
PassengerRoot /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12
PassengerRuby /usr/bin/ruby 
```

**/etc/httpd/conf.d/vhost.conf**

```
<VirtualHost *:80>
    ServerName  redmine.domain.vn
    ServerAdmin quanta@domain.vn
    DocumentRoot /var/www/html/redmine/public/
    RailsBaseURI /  
    ErrorLog logs/redmine.error_log

    <Directory "/var/www/html/redmine/public/">
        Options -MultiViews
        Order allow,deny
        Allow from all
        AllowOverride none
        Satisfy Any
    </Directory>
</VirtualHost> 
```

`.htaccess`文件夹中没有`public`可能导致乘客出现问题的文件：

**ls -la /var/www/html/redmine/public/**

```
-rw-rw-r--  1 apache apache  485 May 28 14:25 404.html
-rw-rw-r--  1 apache apache  674 May 28 14:25 500.html
-rwxr-xr-x  1 apache apache  473 Jun  2 11:34 dispatch.fcgi
-rwxrwxr-x  1 apache apache  473 May 28 14:25 dispatch.fcgi.example
-rw-rw-r--  1 apache apache 7886 May 28 14:25 favicon.ico
drwxrwxr-x  2 apache apache 4096 May 28 14:25 help
-rw-rw-r--  1 apache apache 1441 May 28 14:25 htaccess.fcgi.example
drwxrwxr-x  4 apache apache 4096 May 28 14:25 images
-rw-r--r--  1 apache apache   20 Jun 23 18:59 info.php
drwxrwxr-x  4 apache apache 4096 May 28 14:25 javascripts
drwxrwxr-x  2 apache apache 4096 May 28 14:25 stylesheets
drwxrwxr-x  4 apache apache 4096 May 28 14:25 themes 
```

有什么想法吗？

* * *

**更新 2012 年 6 月 23 日星期六 22:50:44 ICT**

缺少 CSS 时的来源：

```
<link href="/themes/classic/stylesheets/I.application.css,q1338189946.pagespeed.cf.0ULULhmylO.css" media="all" rel="stylesheet" type="text/css"/>

<script src="/javascripts/prototype.js,q1338189946.pagespeed.jm.ix8Kb1Gh8H.js" type="text/javascript"></script>
<script src="/javascripts/effects.js,q1338189946.pagespeed.jm.2gOWX1ohLv.js" type="text/javascript"></script>
<script src="/javascripts/dragdrop.js,q1338189946.pagespeed.jm.vpl0THRgUC.js" type="text/javascript"></script>
<script src="/javascripts/controls.js,q1338189946.pagespeed.jm.-zBskbSR2S.js" type="text/javascript"></script>
<script src="/javascripts/rails.js,q1338189946.pagespeed.jm.unwctb3Jeq.js" type="text/javascript"></script>
<script src="/javascripts/application.js,q1338189946.pagespeed.jm.Su1eFnevwF.js" type="text/javascript"></script> 
```

这显示了带有 CSS 的页面：

```
<link href="/themes/classic/stylesheets/application.css?1338189946" media="all" rel="stylesheet" type="text/css"/>

<script src="/javascripts/prototype.js?1338189946" type="text/javascript"></script>
<script src="/javascripts/effects.js?1338189946" type="text/javascript"></script>
<script src="/javascripts/dragdrop.js?1338189946" type="text/javascript"></script>
<script src="/javascripts/controls.js?1338189946" type="text/javascript"></script>
<script src="/javascripts/rails.js?1338189946" type="text/javascript"></script>
<script src="/javascripts/application.js?1338189946" type="text/javascript"></script> 
```

这些导致错误`href`和`src`路径的奇怪字符来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:52:21.083

看来罪魁祸首是`mod_pagespeed`…… 打开 Firebug 时，我看到以下错误：

`"NetworkError: 500 Internal Server Error - http://redmine.domain.vn/javascripts/prototype.js,q1338189946.pagespeed.jm.ix8Kb1Gh8H.js"`

禁用它，现在 Redmine 工作正常：

```
<VirtualHost *:80>
    ServerName  redmine.domain.vn
    ServerAdmin quanta@domain.vn
    DocumentRoot /var/www/html/redmine/public/
    RailsBaseURI /  
    ErrorLog logs/redmine.error_log

    ModPagespeed off

    <Directory "/var/www/html/redmine/public/">
        Options -MultiViews
        Order allow,deny
        Allow from all
        AllowOverride none
        Satisfy Any
    </Directory>
</VirtualHost> 
```

# image - 在服务器端 JPG 上重新创建 AS3 颜色转换

> ID：11170338
> 
> 赞同：0
> 
> 时间：2012-06-23T14:37:25.890
> 
> 标签：image, actionscript-3, image-processing, imagemagick, gd

哦，明智的清单，

我们需要一个可扩展的解决方案，该解决方案可以处理许多并发请求，以在 Flash 中的低分辨率 jpeg --> 服务器上的高分辨率 jpeg 上重新创建颜色转换。

我想创建以下过程：[http ://cl.ly/24371N3f0g0W041R380f](http://cl.ly/24371N3f0g0W041R380f)

我们应该将这些数据发送到 GDLibrary 吗？图像魔术？和服务器端 Air 应用程序？

或者也许在客户端闪存应用程序中使用 C++ 库？并将这些转换命令发送到服务器上的 C++ 应用程序以在高分辨率图像上使用？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:20:24.560

首先，你的颜色转换有多疯狂？它只是 ColorTransform/ColorMatrix 吗？

Image Magic 具有着色功能和颜色转换功能。

[http://www.imagemagick.org/script/command-line-options.php?#colorize](http://www.imagemagick.org/script/command-line-options.php?#colorize)

*   以百分比形式指定着色量。可以使用逗号分隔的着色值列表（例如，-colorize 0,0,50）将单独的着色值应用于图像的红色、绿色和蓝色通道。

然而，这只会让你到目前为止，因为这只是 r/g/b 乘数，而不是偏移量。对于偏移量，您必须创建自己的自定义函数来循环遍历库。ColorTransform 相当简单——

它是：颜色*乘数+偏移或（颜色+偏移）*乘数

远离服务器端的空中应用程序——我会选择一个已经面向服务器的定制...... ImageMagick，（我个人更喜欢 GMagick，这几乎是一样的）

# javascript - 使用淘汰赛访问模型之外的其他 javascript 中的 observables？

> ID：11170343
> 
> 赞同：0
> 
> 时间：2012-06-23T14:37:59.690
> 
> 标签：javascript, jquery, knockout.js

所以我有一个像这样的视图模型：

```
var viewModel = function() {
    var self = this;
    this.chartSeries = ko.observableArray(['All Series']);
}

ko.applyBindings(new viewModel());

$(function (){
//I want to access it here
} 
```

我该如何做到这一点？

当我尝试`viewModel().chartSeries`,等时`viewModel.chartSeries`，`viewModel.chartSeries()` 我得到未定义的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T15:33:40.143

您收到未定义的错误，因为您在范围内没有视图模型的实例。最简单的事情是：

```
var vm = new viewModel();
ko.applyBindings(vm);

$(function (){
  // do stuff with vm
  vm.chartSeries.push('Series A');
} 
```

# gwt - 如何 i18N 在 GWT TabLayoutPanel 中本地化选项卡的标题

> ID：11170344
> 
> 赞同：2
> 
> 时间：2012-06-23T14:38:03.383
> 
> 标签：gwt, internationalization

我无法使用 GWT 的常用 i18N 本地化来本地化 TabLayoutPanel 中的选项卡名称（“标题”）。

这有效：

```
<g:TabLayoutPanel addStyleNames='LocationsModule' barUnit="PX" barHeight="30" >
        <g:tab>
    <g:header>Locations</g:header> 
```

但我无法让任何其他版本工作：

```
 <g:header text='{messages.layersTabTitle}' /> 
```

或者

```
 <g:customHeader>
    <g:Label text='{messages.locationsTabTitle}' />
    <g:Label>'{messages.locationsTabTitle}'</g:Label>
    </g:customHeader> 
```

任何人都能够做到这一点，而不诉诸代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T13:07:04.433

我认为您需要在这里使用稍微不同的语法：

检查这个例子： [http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/test/com/google/gwt/uibinder/test/client/I18nMessageTest.ui.xml? r=7940](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/test/com/google/gwt/uibinder/test/client/I18nMessageTest.ui.xml?r=7940)

所以它应该是这样的：

```
<g:customHeader>
    <g:Label><ui:text from="{messages.locationsTabTitle}" /></g:Label>
    </g:customHeader> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:02:30.003

您还可以直接在 g:header 元素中使用 ui:text 元素，避免使用 g:customHeader 或 g:Label，例如：

```
<g:header><ui:text from="{messages.locationsTabTitle}" /></g:header> 
```

（这与 Arne 链接到的文件如何在 h2 元素中使用 ui:text 类似 - 尽管不完全相同 - [http://code.google.com/p/google-web-toolkit/source/browse/ trunk/user/test/com/google/gwt/uibinder/test/client/I18nMessageTest.ui.xml?r=7940](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/test/com/google/gwt/uibinder/test/client/I18nMessageTest.ui.xml?r=7940) )

在 GWT 2.4.0 中测试。

# iphone - iphone dev：如何控制视图过渡动画？

> ID：11170345
> 
> 赞同：0
> 
> 时间：2012-06-23T14:38:08.690
> 
> 标签：iphone, ios

我正在使用这样的代码来呈现一个新的视图，我不知道它好不好。目前默认动画是从下往上显示视图，但我希望它从右到左动画（飞入），是否可以更改默认动画类型以及如何更改？谢谢。

```
[self presentModalViewController:navController animated:animated]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:49:14.657

您可以像这样禁用上滑动画：

```
[self presentModalViewController:navController animated:NO]; 
```

然后你可以提供你自己的动画代码：

```
navController.view.frame = CGRectMake(320, 0, navController.view.frame.size.width, navController.view.frame.size.height);

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
navController.view.frame = CGRectMake(0, 0, navController.view.frame.size.width, navController.view.frame.size.height);
[UIView commitAnimations]; 
```

此示例为您提供了具有平滑速度曲线的右侧“飞入”。

另一种方法是使用带有导航控制器的右侧内置滑入：

```
[self.navigationController pushViewController:navController animated:YES]; 
```

在这一个中，您的 top-viewcontroller 需要是 UINavigationController 并且它的 rootcontroller 需要是您的 viewcontroller。然后你可以推送其他视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:15:49.390

我已经这样做了，它对我有用，试试看：

```
[UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:0.6];
            [UIView setAnimationDelegate:self];
            [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.View2.superview cache:YES];
            [self.View2 removeFromSuperview];   
            [self performSelector:@selector(replaceViews2) withObject:nil afterDelay:0.6];
            [UIView commitAnimations]; 
```

# jquery - jQuery - 如何使用多张幻灯片制作单个 html 页面 - 一次只能看到一个

> ID：11170346
> 
> 赞同：1
> 
> 时间：2012-06-23T14:38:21.410
> 
> 标签：jquery, html

我正在为平板电脑开发 HTML5 应用程序。思路如下：app由5篇文章组成，每篇文章有10张左右的幻灯片。每张幻灯片都非常适合屏幕，并且有左/右按钮可以移动到下一张或上一张幻灯片。幻灯片也可能有一些 jQuery 动画、计时器设置等。还有一个顶级菜单，其中列出了所有文章，用户可以导航到它们。

所以，现在我有 5 个 html 文件，每个文件中有 10 个 DIV，并且我有一些逻辑可以根据用户操作隐藏/显示 div。要求是将所有 5 个文件合并为 1 个 HTML 文件。原因 - 使文章之间的过渡平滑（现在屏幕闪烁 - 因为加载了另一个 HTML 文件）。

我知道我可以使用与现在所有这 50 个 div 相同的方法 - 但是会有很多代码，而且很难理解。我正在考虑为文章/幻灯片之间的转换制作某种状态机：

```
function changeSlide(bool forward)
{
    disableAnimationForAllSlides();

    var articleNumber = getArticle();
    var currentSlideNumber = getCurrentSlide();

    if (currentSlideNumber == 1 && forward == false)
    {
        goToArticleList();
        return;
    } else if (currentSlideNumber == 10 && forward == true)
    {
        goToArticleList();
        return;
    }
    else
    {
        hideAllSlides();
        displaySlide(articleNumber, currentSlideNumber + 1);
        enableAnimationForSlide(articleNumber, currentSlideNumber + 1);
    }
}

function changeArticle(newArticleNumber)
{
    disableAnimationForAllSlides();
    hideAllSlides();

    displaySlide(newArticleNumber, 1);
    enableAnimationForSlide(newArticleNumber, 1);
} 
```

我认为这一切都相对简单——但我不想重新发明轮子……当然，我的情况比这个例子复杂得多。**所以我的问题是**：

1.  这项任务的标准方法是什么 - 在一个 HTML 文件中包含多个幻灯片，并在它们之间进行转换？例如，我应该如何定义下一个/上一个元素等？
2.  有没有我可以使用的库/框架？
3.  互联网上有没有我可以看的例子？

它是 HTML5/CSS3/jQuery 项目。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T14:44:45.967

你可能想看看[Deck.js](http://imakewebthings.com/deck.js/)

这是一个使用 HTML5 和 JavaScript 构建的功能齐全的幻灯片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T15:09:31.613

[这是一个可爱的例子](http://slides.html5rocks.com/#landing-slide)。这是一个 HTML5 网站，构建为幻灯片，展示了许多新的和闪亮的 HTML5 内容。它具有幻灯片之间的过渡，支持箭头键甚至不同的样式（按 T 切换主题）。

# android - Phonegap：拍照后删除保存丢弃确认

> ID：11170348
> 
> 赞同：1
> 
> 时间：2012-06-23T14:38:30.047
> 
> 标签：android, cordova, android-camera

我在 phonegap 1.8 for android 2.3 中使用以下相机 api 来循环捕获图片。

`navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50, destinationType: destinationType.DATA_URL });`

拍照后，显示保存或丢弃数据的确认信息。无论如何我可以阻止该确认对话框并默认执行“保存”。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:16:35.857

手机间隙使用安卓相机app拍照。相机应用程序不会为用户提供禁用确认屏幕的选项。

因此，现有的 phonegap api 无法做到这一点。

但是，我们可以使用 android 中的 Camera 库编写自定义应用程序。（[见此](http://developer.android.com/guide/topics/media/camera.html#custom-camera)）

然后我们可以构建一个 phonegap 插件来使用这个应用程序。（[见此](http://wiki.phonegap.com/w/page/36753494/How%20to%20Create%20a%20PhoneGap%20Plugin%20for%20Android)）

# c++ - 如何迭代 C++ 字符串向量？

> ID：11170349
> 
> 赞同：23
> 
> 时间：2012-06-23T14:38:57.917
> 
> 标签：c++, vector, loops

如何迭代这个 C++ 向量？

`vector<string> features = {"X1", "X2", "X3", "X4"};`

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-23T14:41:10.457

尝试这个：

```
for(vector<string>::const_iterator i = features.begin(); i != features.end(); ++i) {
    // process i
    cout << *i << " "; // this will print all the contents of *features*
} 
```

如果您使用的是 C++11，那么这也是合法的：

```
for(auto i : features) {
    // process i
    cout << i << " "; // this will print all the contents of *features*
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-23T14:41:03.770

如果编译，您正在使用的 C++11 允许以下内容：

```
for (string& feature : features) {
    // do something with `feature`
} 
```

[这是基于范围的`for`循环。](http://www.cprogramming.com/c++11/c++11-ranged-for-loop.html)

如果您不想改变该功能，您也可以将其声明为`string const&`（或只是`string`，但这会导致不必要的副本）。

# ios - UIPinchGestureRecognizer 向内捏“慢”

> ID：11170350
> 
> 赞同：2
> 
> 时间：2012-06-23T14:39:03.667
> 
> 标签：ios, ios5, uigesturerecognizer, cgaffinetransform, uipinchgesturerecognizer

我在我的应用程序中使用 UIPinchGestureRecognizer 来放大视图（是的，我不使用 UIScrollView 是有原因的）。当我用手指向外捏合时，视图会按预期放大，如果我在不将手指从屏幕上移开的情况下反向捏合，它也会向右缩放。*但是，如果我通过向内*捏来启动缩放，则视图缩放的速度会大大降低。我猜这是因为 UIPinchGestureRecognizer 的工作原理 - 向外捏时 UIPinchGestureRecognizer 的比例为 >1，向内捏时为 <1。不幸的是，我不知道如何在我的代码中准确地反映这一点。

```
- (IBAction)didDetectPinchGesture:(id)sender {
    UIPinchGestureRecognizer *gestureRecognizer = (UIPinchGestureRecognizer *)sender;

    CGFloat scale = [gestureRecognizer scale];

    switch ([gestureRecognizer state]) {
        case UIGestureRecognizerStateBegan:
            _lastScale = [gestureRecognizer scale];
            break;

        case UIGestureRecognizerStateChanged:

            CGFloat currentScale = [[self.imageView.layer valueForKeyPath:@"transform.scale"] floatValue];

            // Constants to adjust the max/min values of zoom
            const CGFloat kMaxScale = 5.0;
            const CGFloat kMinScale = 1.0;

            CGFloat newScale = 1 -  (_lastScale - scale); // new scale is in the range (0-1)
            newScale = MIN(newScale, kMaxScale / currentScale);
            newScale = MAX(newScale, kMinScale / currentScale);

            NSLog(@"%f", newScale);

            CGAffineTransform transform = CGAffineTransformScale([self.imageView transform], newScale, newScale);
            self.imageView.transform = transform;

            _lastScale = scale;  // Store the previous scale factor for the next pinch gesture call
            break;

        default:
            _lastScale = [gestureRecognizer scale];
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-05T07:39:48.310

`gestureRecognizer scale`一个非常简单的解决方案是在完成后将 back重置为 1：

```
 ...
    default:
        _lastScale = [gestureRecognizer scale];
        // Add this:
        [gestureRecognizer setScale:1];
        break;
    } 
```

# jsf - 将参数从同一页面中的另一个对话框网格传递给对话框网格

> ID：11170353
> 
> 赞同：1
> 
> 时间：2012-06-23T14:39:41.243
> 
> 标签：jsf, primefaces, uirepeat

我在一个 xhtml 页面中当然有一个 bean 绑定的消息。

现在消息在一个列表中，我正在使用 ui:repeat 来显示消息和所有内容。现在，当我打开一条消息时，dialogGrid 中有一个回复按钮，它会在同一页面上打开另一个对话框，我只需要将数据传递给该回复对话框。首先，它工作正常，我的意思是，如果您直接单击回复按钮，它工作正常，但是当您打开消息然后单击回复时，它不会更新对话框。

我 [在同一页面中看到了这个 Pass 参数到对话框](https://stackoverflow.com/questions/8839224/pass-parameter-to-dialog-in-the-same-page)

但是***我的 Bean 是请求范围的***

这是我的 xhtml 代码

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" type="text/css" href="../Styles/homepage-style.css" />
        <link rel="stylesheet" type="text/css" href="../Styles/profile.css" />
        <title>Shadi Bandhan | We find the best match for you</title>
    </h:head>

    <h:body>

        <div id="header">
            <ui:insert name="header" >
                <ui:include src="header.xhtml" />
            </ui:insert>
        </div>

        <div id="main-content">
            <p:growl autoUpdate="true" />

            <div id="left-pane">

                <div id="profile-info-area">
                    <ui:insert name="profile_info_area" >
                        <ui:include src="profileInfoArea.xhtml" />
                    </ui:insert>
                </div>

                <div id="home-main-area">
                    <div id="messages-wrapper">

                        <div id="messages-header">

                            <div id="m-heading">
                                Messages - Inbox
                            </div>

                            <div id="m-search">

                                <div id="searchbox">
                                    Search Messages <input type="text" value="Search" />
                                </div>

                                <div id="newmessage">
                                    <a href="#"> + New Message </a>
                                </div>

                            </div>

                        </div>

                        <h:form id="messagesForm">
                            <div id="messages">

                                <p:dialog id="messagesDialog" modal="true" widgetVar="messageDialog" resizable="false"  width="750" height="300" header="New Message" >  

                                    <h:panelGrid columns="2" id="dialogGrid">
                                        <p:column>
                                            <h:outputLabel for="msgRecepient"  value="To"/>
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel id="msgRecepient" value="#{userMsg.userFullname}"  >

                                            </h:outputLabel>
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel for="msgContents"  value="Message"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputTextarea maxlength="300"  id="msgContents" value="#{messagesManagedBean.msg.message}" cols="65" rows="3" >
                                                <p:watermark for="msgContents" value="#{userMsg.userId}" />
                                            </p:inputTextarea>

                                        </p:column>

                                        <p:column>
                                            <p:commandButton id="msgSend" value="Send" action="#{messagesManagedBean.sendMessage('reply')}" oncomplete="messageDialog.hide()"  >
                                                <f:param value="#{userMsg.userId}" name="messageSenderId" />
                                            </p:commandButton> 
                                        </p:column>

                                    </h:panelGrid>

                                </p:dialog>

                                <p:dialog id="messagesDialog2" modal="true" widgetVar="messageDialog2" resizable="false"  width="750" height="300" header="New Message" >  

                                    <h:panelGrid columns="2" id="dialogGrid2">
                                        <p:column>
                                            <h:outputLabel for="msgRecepient2"  value="From"/>
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel id="msgRecepient2" value="#{userMsg.userFullname}"  >

                                            </h:outputLabel>
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel for="msgContents2"  value="Message"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputTextarea readonly="true" id="msgContents2" value="#{userMsg.message}" cols="65" rows="3" >

                                            </p:inputTextarea>
                                        </p:column>
                                        <p:column>
                                            <p:commandButton styleClass="reply-btn" value="Reply" update=":messagesForm:dialogGrid"
                                                             oncomplete="messageDialog.show(), messageDialog2.hide()">
                                                <f:param name="userMsg" value="#{userMsg}" />
                                            </p:commandButton>
                                        </p:column>

                                    </h:panelGrid>

                                </p:dialog>

                                <ui:repeat var="userMsg" value="#{messagesManagedBean.paginator1.model}">

                                    <center><img class="h-diff" src="../images/differentiator-profile.jpg" width="437" height="1" /></center>

                                    <div id="message">

                                        <div id="senderImg">
                                            <img class="senderImg" src="../images/profile-pic.jpg" width="50" height="50" />
                                        </div>
                                        <div id="message-txt-area">

                                            <div id="senderName">
                                                <p:commandLink styleClass="senderName" value="#{userMsg.userFullname}" action="#{myProfileManagedBean.loadProfileFrontInformation(userMsg.userId)}"></p:commandLink>
                                            </div>
                                            <ui:fragment rendered="#{userMsg.isRead}">
                                                <div id="message-txt">
                                                    #{userMsg.message}
                                                </div>
                                            </ui:fragment>
                                            <ui:fragment rendered="#{not userMsg.isRead}">
                                                <div id="message-txt" class="msgNotRead">
                                                    #{userMsg.message}
                                                </div>
                                            </ui:fragment>
                                            <div id="msgAction">

                                                <p:commandLink styleClass="reply-btn"
                                                               value="Reply" oncomplete="messageDialog.show()" update=":messagesForm:dialogGrid">
                                                    <f:param name="userMsg" value="#{userMsg}" />
                                                </p:commandLink>

                                                <ui:fragment rendered="#{userMsg.isRead}">
                                                    <p:commandLink styleClass="open-btn" value="Open" 
                                                                   oncomplete="messageDialog2.show()" update=":messagesForm:dialogGrid2">
                                                        <f:param name="userMsg" value="#{userMsg}" />
                                                    </p:commandLink>
                                                </ui:fragment>

                                                <ui:fragment rendered="#{not userMsg.isRead}">
                                                    <p:commandLink styleClass="open-btn" value="Open" 
                                                                   action="#{messagesManagedBean.messageOpenedListener(userMsg.messageId)}" 
                                                                   oncomplete="messageDialog2.show()" update=":messagesForm:dialogGrid2">
                                                        <f:param name="userMsg" value="#{userMsg}" />
                                                    </p:commandLink>
                                                </ui:fragment>
                                            </div>

                                        </div>
                                    </div>

                                </ui:repeat>
                                <h:commandButton value="&lt; prev" action="#{messagesManagedBean.paginator1.prev}"/>
                                <h:outputText value="#{messagesManagedBean.paginator1.pageIndex} / #{messagesManagedBean.paginator1.pages}"/>
                                <h:commandButton value="next &gt;" action="#{messagesManagedBean.paginator1.next}"/>
                                <h:inputHidden value="#{messagesManagedBean.paginator1.pageIndex}"/>

                            </div>
                        </h:form>

                    </div>
                </div>
            </div>

            <div id="right-pane">
                <ui:insert name="right-pane" >
                    <ui:include src="right-pane.xhtml" />
                </ui:insert>
            </div>
        </div>

        <div id="footer">
            <ui:insert name="footer" >
                <ui:include src="footer.xhtml" />
            </ui:insert>
        </div>

    </h:body>
</html> 
```

# html - CSS3 的第一个孩子和最后一个孩子的伪属性

> ID：11170358
> 
> 赞同：1
> 
> 时间：2012-06-23T14:40:03.603
> 
> 标签：html, css, css-selectors

我尝试使用第一个子项和最后一个子项创建样式，但遇到了问题。

当我使用第一个孩子时，因为之前有一个强大的项目，所以样式不适用。但我的最后一个孩子工作得很好。

HTML：

```
<br />
<h2 class="title_block">Info <strong>1</strong>
    <span class="title_block_info">+2</span>
    <span class="title_block_info">+1</span>
</h2>​ 
```

CSS：

```
h2 .title_block_info,
h2 strong {
    border: 1px solid #000;
}
h2 .title_block_info:first-child {
    border-radius: 10px 0 0 10px;
}
h2 .title_block_info:last-child {
    border-radius: 0 10px 10px 0;
}​ 
```

这里的例子：http: [//jsfiddle.net/mYKRW/](http://jsfiddle.net/mYKRW/)

有谁知道为什么会这样？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:50:17.560

这是因为你有一个“强”标签作为第一个孩子，而不是`title_block_info`你要去的班级。`first-child`仅当它实际上是元素的第一个子元素时才有效。

这有效

```
<h2 class="title_block">
    <span class="title_block_info">+2</span>
    <span class="title_block_info">+1</span>
</h2>​ 
```

[http://jsfiddle.net/mYKRW/1/](http://jsfiddle.net/mYKRW/1/)

* * *

如果你需要在那里的强文本，你可以试试这个，注意我是如何将你的两个跨度标签包装在另一个跨度标签中的。这将允许您使用第一个孩子和最后一个孩子

```
h2 .title_block_info,
h2 strong {
    border: 1px solid #000;
}
h2 span .title_block_info:first-child {
    border-radius: 10px 0 0 10px;
}
h2 span .title_block_info:last-child {
    border-radius: 0 10px 10px 0;
}​ 
```

```
<h2 class="title_block">
    Info <strong>1</strong>
    <span>
      <span class="title_block_info">+2</span>
      <span class="title_block_info">+1</span>
    </span>
</h2>​ 
```

[http://jsfiddle.net/mYKRW/6/](http://jsfiddle.net/mYKRW/6/)

* * *

[`first-of-type`](http://reference.sitepoint.com/css/pseudoclass-firstoftype)最后，如果您想完全按照自己的意愿保留 html，则可以使用伪类，只需更改您的 css。

```
h2 .title_block_info,
h2 strong {
    border: 1px solid #000;
}
h2 .title_block_info:first-of-type {
    border-radius: 10px 0 0 10px;
}
h2 .title_block_info:last-of-type {
    border-radius: 0 10px 10px 0;
}​ 
```

[http://jsfiddle.net/mYKRW/9/](http://jsfiddle.net/mYKRW/9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T14:51:40.497

***如果***它*也是*父元素的，则`:first-child`伪类从选择器中选择第一个匹配的元素；正如您所注意到的，这不起作用，因为还有另一个元素是父元素的第一个子元素。`.title_block_info` **`:first-child`**

 **在您的情况下，您可以删除在 DOM 中`strong`占据位置的元素`:first-child`，或者您可以使用`:first-of-type`伪类来代替：

```
h2 .title_block_info:first-of-type {
    border-radius: 10px 0 0 10px;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/mYKRW/5/)。

如果您的 HTML 将保持类似的可预测性（`.title_block_info`元素将*始终*跟随`:first-child`元素），您可以改为：

```
h2 :first-child + .title_block_info {
    border-radius: 10px 0 0 10px;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/mYKRW/10/)。

参考：

*   [`:first-of-type`伪类](http://www.w3.org/TR/selectors/#first-of-type-pseudo)。
*   [`:first-of-type`兼容性](http://www.quirksmode.org/css/contents.html#t34)。**

# jquery - addClass 添加了一个类但不会改变它的css？

> ID：11170359
> 
> 赞同：2
> 
> 时间：2012-06-23T14:40:04.490
> 
> 标签：jquery, html, css

我有一个 Jquery 方法，它添加一个带有 的类，它假设当您单击 div 时`addClass()`添加一个名为“”的类。`active`

它工作得很好，因为我可以在萤火虫中看到它确实添加了类名“活动”。

```
 <div class="rateWrapper L">
        <div class="upV rateBtn">
        </div>
        <div class="numV largeFont">
            5
        </div>
        <div class="dwnV rateBtn">
        </div>
    </div> 
```

问题是，我看不到 css 的变化。

这是我的CSS：

```
.wrapper .tutVWrapper .rateWrapper .upV .rateBtn .active{ background:url('../img/up_V_active.png');}
.wrapper .tutVWrapper .rateWrapper .numV{ font-weight: bold; margin-bottom: 15px; margin-top: 15px; text-align: center;}
.wrapper .tutVWrapper .rateWrapper .dwnV{ background:url('../img/dwn_V_none.png'); width: 20px; height: 20px; cursor: pointer;}
.wrapper .tutVWrapper .rateWrapper .dwnV .rateBtn .active{ background:url('../img/dwn_V_active.png'); } 
```

我该如何解决这个泡菜？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:43:05.077

我不知道您要将`active`类添加到哪个元素，但从您的 HTML 来看 - 到也具有`rateBtn`类的元素。

您的 CSS 由空格分隔，`.rateBtn .active`仅`.active`适用于`.rateBtn`. 我猜你想写`.rateBtn.active`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T14:43:12.140

如果两个类属于同一个元素，则 CSS 规则中类名之间没有空格。空格表示“任何后代”。

所以例如`.upv .rateBtn .active`应该是`.upv.rateBtn.active`

# java - java中受密码保护的xls/xlsx文件

> ID：11170363
> 
> 赞同：2
> 
> 时间：2012-06-23T14:40:33.010
> 
> 标签：java, xls, xlsx, jxl, jexcelapi

我在[http://java.sys-con.com/node/1258827](http://java.sys-con.com/node/1258827)的帮助下创建了带有 xls 文件的密码保护 zip 文件。

我的问题是，是否有任何 java api 可以创建受密码保护的 xls 文件而不是 zip 文件。我想直接在 xls 文件上应用密码。加密/解密是选项，但想在双击文件时提示。

编辑：我得到了这个
`HSSFSheet.protectSheet("xyz");`，但它只使工作表只读。

即使我已经尝试过，`hssfworkbook.writeProtectWorkbook("abc", "abc");`但它没有提示输入密码。

编辑1：`org.apache.poi.hssf.record.crypto.Biff8EncryptionKey`包中有打开密码保护的excel文件 的`org.apache.poi.hssf.record.crypto.Biff8EncryptionKey.setCurrentUserPassword(password);` 方法有没有在未受保护的excel文件上设置密码的方法？

Edit2：我尝试了 JExcel API

`Workbook w=Workbook.getWorkbook(new File("c:\\employees22533.xls"));
Sheet ws=null;
ws=w.getSheet("Employee List");
SheetSettings sh=ws.getSettings();
sh.setPassword("abc");`

但它没有设置任何密码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:30:13.253

我个人使用过`JExcelApi`，但我不记得在其中看到过有关密码保护的内容。就`JExcelApi`许多特征而言，已知答案为“否”：

*   数据透视表
*   下拉列表
*   单元格中的富文本
*   设置重复行
*   **密码保护**

我个人认为，如果密码保护已经成为可能（使用开源 api）他们将在互联网上提供很多教程，您可以通过快速谷歌搜索来搜索它们，不幸的是，似乎没有免费提供的 Java 电子表格 API支持编写加密的电子表格。

但是，如果您愿意使用商业 api/库，请查看[此](http://www.aspose.com/demos/java-components/aspose.cells/java/quick-start/security/default.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T09:41:26.943

您可以使用[JACOB](http://danadler.com/jacob/)来完成。这是无保护 temp.xsl 文件到受保护 temptest.xsl 文件的代码。你需要在你的类路径中有 jacob.jar 和 jacob-XX-XX.dll

```
package test;

import com.jacob.activeX.ActiveXComponent;
import com.jacob.com.Dispatch;
import com.jacob.com.Variant;

public class excel 
{
 private ActiveXComponent excelApp = null;
 public excel()
 {
 String xlsFile = "D:\\temp.xls";
 excelApp = new ActiveXComponent("Excel.Application");
 excelApp.setProperty("Visible", new Variant(false));
 Object workbooks = excelApp.getProperty("Workbooks").toDispatch();
 Object workbook = Dispatch.invoke((Dispatch) workbooks,"Open",Dispatch.Method,new Object[] {xlsFile, new Variant(false),new Variant(true) }, new int[1]).toDispatch();           

 Dispatch.call((Dispatch)workbook, "SaveAs", new Variant("D:\\temptest.xls"),new Variant("1"),new Variant ("pass"));

 excelApp.invoke("Quit", new Variant[] {});
 }

 public static void main(String arg[])
 {
  System.out.println("hello");
  new excel();
 }

 } 
```

# javascript - jQuery获取搜索选择器，如果元素不存在

> ID：11170365
> 
> 赞同：1
> 
> 时间：2012-06-23T14:41:04.107
> 
> 标签：javascript, jquery, jquery-plugins, jquery-selectors

如果一个元素不存在，我如何得到一个被搜索的选择器的字符串？

例如：

`$( 'parent child.class' ).plugin( )`

在我的插件中，我想获取 string `"parent child.class"`，但`$( 'parent child.class' )`不存在。

我将开始深入研究 jQuery 源代码，但我想我会问一下，以防有更深入了解的人知道这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:05:49.023

你不能。

jQuery 对象有一个`.selector`属性，你可以在你的插件中使用它（虽然它似乎是为了与 jQuery 一起使用），但是 - 这是一个很大的但 - 并非所有 jQuery 对象都是使用选择器字符串创建的。考虑这个例子使用`.yourPlugin()`：

```
$('div.someClass').add(document.getElementById("test"))
                  .add("<div>Hello</div>")
                  .filter(function() {
                      return $(this).attr("data-test") == "blah";
                  })
                  .parents()
                  .yourPlugin(); 
```

考虑是什么选择器导致 jQuery 对象最终传递给 是没有意义的`.yourPlugin()`，无论它是否包含任何元素。

（我想如果你知道你的插件只会被你使用并且你只会传递使用选择器创建的jQuery对象，*那么*你可以`this.selector`在你的插件中使用......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T14:49:28.140

有选择器属性：

```
$.fn.plugin = function() {
  if (this.length == 0) {
    return this.selector;
  }
}; 
```

# jsf - ui:repeat 未呈现

> ID：11170371
> 
> 赞同：1
> 
> 时间：2012-06-23T14:41:37.713
> 
> 标签：jsf, jsf-2

我在 Java 服务器端的 Netbeans IDE 7.1.2 中编写了一个 Web 程序，但`ui:repeat`标签有问题

```
<h:form id="arrangmentForm" rendered="false" >
  <ui:repeat value="#{arrangement.arItemArrangment}" var="itemArrangment"  >
    <h:panelGrid   style="position: absolute;top:#{itemArrangment.place.top / 10}px;left: #{itemArrangment.place.left/10}px;height: 30px;width:30px">
      <h:commandLink  id="linkItemArrangment" actionListener="#{arrangement.showbtnArrangement()}" style="text-decoration: none;color: black">
        <p:graphicImage value="../images/#{itemArrangment.place.objType}.jpg"  />
        <h:outputText value="#{itemArrangment.place.objTitle}" />
        <br />
        <h:outputText value="#{itemArrangment.gethOrder().gethOrdersTotal()}" />
        <br />
        <f:setPropertyActionListener value="#{itemArrangment}" target="#{arrangement.selectPlace}" />
      </h:commandLink>
    </h:panelGrid>
  </ui:repeat>
</h:form> 
```

此代码在 Netbeans 中运行良好。

但是，当我尝试将我的程序部署到 Web 服务器（Tomcat7、Glassfish 开源和企业版）时，`ui`标签不起作用，在我的 Web 浏览器中，我只收到`form`标签，没有其他任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:15:12.103

你有`rendered="false"`你的 h:form 所以什么都没有显示。这是正常的行为。

如果要显示表单的内容，请删除`rendered="false"`

# javascript - 我的 Facebook 应用程序突然停止向用户提要发布帖子

> ID：11170375
> 
> 赞同：-1
> 
> 时间：2012-06-23T14:41:55.857
> 
> 标签：javascript, facebook-graph-api

我已经使用 Javascript SDK 构建了一个 Facebook 应用程序，该应用程序已经启动并运行了大约 6 个月，它一直运行良好，如果他们超过了当前的最佳分数，它就会将帖子发布到用户墙上。它一直工作到现在。该应用程序本身仍在运行，但向用户供稿发布帖子的能力似乎已损坏，我无法弄清楚为什么？

我没有更改我的应用程序中的任何代码，并且还在我的另一个应用程序中测试了代码，它工作正常。该应用程序具有我和我的用户似乎拥有的所有正确权限请求。我没有收到任何来自 facebook 的邮件说他们以任何理由阻止了我的出版权。有谁知道为什么会这样？

这是发布的代码：

```
var params = {};
params['message'] = 'Just achieved my highest score';
params['name'] = 'Game Name';
params['caption'] = "Caption";
params['link'] = 'my link to my app';
params['picture'] = 'a link to a pic for my app';
params['description'] = 'Description of my app';

FB.api('/me/feed', 'post', params, function(response) 
{
  if (!response || response.error) 
  {
    //alert(response.error);
  } else {
    //alert('Post ID: ' + params['message']);
  }
}); 
```

返回的响应是错误的，但以前从未如此？

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T00:39:45.020

在用户流中发布的策略已更改。见那里： [https](https://developers.facebook.com/docs/reference/rest/stream.publish/) ://developers.facebook.com/docs/reference/rest/stream.publish/ 。

```
We are in the process of deprecating the REST API, so if you are building a new application you shouldn't use this function. Instead use the Graph API and POST a Post object to the `feed` connection of the User object 
```

# apache - 阿帕奇删除请求

> ID：11170377
> 
> 赞同：2
> 
> 时间：2012-06-23T14:42:17.137
> 
> 标签：apache, .htaccess, php-5.3

我有个问题。当我发送 DELETE 请求时，我的网络服务器会收到 403 响应。我不想删除请求中的东西，我只需要知道使用的方法是删除。如何配置我的网络服务器不再发送那些 403 消息？我不希望启用 WebDAV 或类似的东西。我只想知道请求方法是否为 DELETE（在我的 php 文件中，但由于 403 而没有执行）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T18:52:43.973

从我读到的应该是这样的：

```
<Limit DELETE>
  Order deny,allow
  Allow from all
</Limit> 
```

# php - 为什么在获取变量中使用会话名称和会话 ID 不起作用？

> ID：11170378
> 
> 赞同：0
> 
> 时间：2012-06-23T14:42:26.963
> 
> 标签：php, session, get, file-get-contents

我有以下代码：

```
$location .= 'red=no&'.session_name() . "=". session_id();
$content = file_get_contents($location);
echo $content; 
```

如果我运行它，我的浏览器中会显示注释。但是，如果我按以下方式修改它：

```
$location .= 'red=no';
$content = file_get_contents($location);
echo $content; 
```

一切正常（我在浏览器中看到了内容）。

还奇怪的是，如果我显示第一个示例（url）中的 $location 变量的值并将其手动粘贴到浏览器的地址行中，我确实看到了内容。所以，我的浏览器能够使用这个 URL 而`file_get_contents`不是。

有人知道如何解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:12:07.933

这没有意义。如果文件是远程的，并且 $location 是一个 url，那么我认为正在发生的事情是远程服务器没有通过 $_GET 获取会话 ID（或者当您的服务器发出请求时它拒绝服务器提供的会话 ID ，或类似的）。

如果文件是本地文件，那么问题在于您显然有一个名为**red=no&whatever=c8ec2afe8bb7388175f2065f1cb0c868**的文件。实际上，在这种情况下，我怀疑该文件可能被命名为**red=no**。如果不是，则＆符号正在扔掉东西。逃脱它，你没事。

或者不要使用这种可怕的文件名。

# asp.net-mvc-3 - IValidatableObject Validate() 用于不同的场景

> ID：11170382
> 
> 赞同：0
> 
> 时间：2012-06-23T14:42:47.803
> 
> 标签：asp.net-mvc-3, validation

我一直在模型实体上实现**IValidatableObject ，并使用****Validate(ValidationContext)**执行验证，通常很复杂。

我可以使用**ValidationContext**来区分不同的验证场景吗？

例如，以我有 3 个验证场景的用户模型为例：

*   注册 - 我想测试一封电子邮件是否唯一，并且已输入一小部分必填字段
*   更改详细信息 - 不同的电子邮件唯一性检查，注册后需要更多详细信息，此处不更改密码，因此不需要检查
*   更改密码 - 仅验证密码字段

这是一个适当的用途，如果是这样，我*如何*确保在帖子之后和调用 Validate() 之前设置正确的 ValidationContext 属性？还是我应该采取完全不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:09:44.877

用于针对`IValidatableObject`单个模型执行多个验证。在您的情况下，您有一个`User`模型，并且您想要进行三个验证，您可以通过`IValidatableObject`在`User`模型中实现完美地做到这一点。

并`ValidationContext`没有带来太多好处（除了提供对上下文的访问），因为我们可以直接在`Validate`方法中访问所有属性。

执行与单个模型相关的多个验证的示例`IValidatableObject`。（那么`ValidationContext`这里有什么用？）

```
public class Party : IValidatableObject
{
    [Required(ErrorMessage = "Start date is required")]
    [FutureDateValidator(ErrorMessage = "Start date should be a future date")]
    public DateTime StartDate { get; set; }

    [Required(ErrorMessage = "Duration is required")]    
    public int DurationInHours { get; set; }

    [Required(ErrorMessage = "No. of joinees is required")]
    [Range(2, 10, ErrorMessage = "No. of joinees should be minimum 2 and not more than 10")]
    public int NoOfJoinees { get; set; }    

    public bool Drinks { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (StartDate.TimeOfDay > new TimeSpan(22 - DurationInHours, 0, 0))
        {
            yield return new ValidationResult("The party should not exceed after 10.00 PM");
        }

        if (NoOfJoinees < 5 && Drinks)
        {
            yield return new ValidationResult("Drinks are only allowed if no. of joinees is 5 or more.");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T15:00:22.723

对于我的两分钱，我会说您的模型要么处于有效状态（应用所有验证标准），要么不是。如果在某些情况下，您不想应用验证，那么我认为您真的应该使用单独的模型（实际上是 ViewModel）。

在您的示例中，我将创建一个`RegisterViewModel`用于注册和一个单独`EditUserViewModel` 的用于更改详细信息。然后，它们中的每一个都有自己的验证，并且他们将[承担单一的责任](http://msdn.microsoft.com/en-us/magazine/cc546578.aspx#id0390008)。

创建一个在许多不同视图中重用的胖模型，恕我直言，有点代码味道。我有很多理由这么想。首先，假设您有一个模型用于与用户数据的所有交互。它看起来像这样：

```
public class UserModel
{
    public int UserId { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
    public bool IsAdministrator { get; set; }
} 
```

稍后您决定跟踪在网站注册期间使用的浏览器。你在哪里添加？它真的与用户无关，所以它不应该放在`UserModel`模型上。如果您有一个单独的`RegisterViewModel`，您可以在您的注册过程发生变化时根据需要对其进行修改，而不用担心它会如何影响使用它的其他地方。

例如，如果您将上述模型与 MVC 的 DefaultModelBinder 一起使用，则会出现更严重的问题。[如此处](http://www.diaryofaninja.com/blog/2012/03/11/what-aspnet-mvc-developers-can-learn-from-githubrsquos-security-woes)所述，即使您没有`IsAdministrator`表单上的字段（通过利用批量分配漏洞），用户也可以创建自己的请求并授予自己管理员权限。同样，如果在没有该属性的情况下使用单独的 ViewModel `IsAdministrator`，它将减少安全漏洞的表面积。

以上只是一个例子，但我相信你明白了。

# c# - 如何使用 C# 声明全局函数或方法？

> ID：11170383
> 
> 赞同：13
> 
> 时间：2012-06-23T14:42:48.490
> 
> 标签：c#

谁能告诉我如何在 c# 中声明一个全局函数，类似于 a`Module`在 VB.net 中的作用？我需要调用一个可以在我的form1、form2和form3中调用的函数。

* * *

我有这个代码：

```
using System.Data.OleDb;

namespace XYZ
{
    public static class Module
    {
        public static void dbConnection()
        {
            OleDbConnection con = new OleDbConnection();
            con.ConnectionString = "provider= microsoft.jet.oledb.4.0;data source=..\\dbCooperative.mdb";
            con.Open();
        }
    }
} 
```

和表格1：

```
using System.Data.OleDb;
using XYZ;

namespace XYZ
{
    public partial class frmReports : Form
    {
        public frm1()
        {
            InitializeComponent();
        }

        private void frm1_Load(object sender, EventArgs e)
        {
            Module.dbConnection();
            OleDbCommand cm = new OleDbCommand("SELECT * FROM table", con);
        }
    }
} 
```

但我有一个错误：“名称'con'在当前上下文中不存在”。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2017-01-11T00:02:50.430

如果您使用的是 C# 6.0 或更高版本，则可以使用[`using static`](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/using-static).

例如，

```
using static ConsoleApplication.Developer;

namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            // Global static function, static shorthand really 
            DeveloperIsBorn(firstName: "Foo", lastname: "Bar")
                .MakesAwesomeApp()
                .Retires();
        }
    }
}

namespace ConsoleApplication
{
    class Developer
    {
        public static Developer DeveloperIsBorn(string firstName, string lastname)
        {
            return new Developer();
        }

        public Developer MakesAwesomeApp()
        {
            return this;
        }

        public Developer InsertsRecordsIntoDatabaseForLiving()
        {
            return this;
        }

        public void Retires()
        {
           // Not really
        }        
    }
} 
```

再举一个例子：

```
using static System.Console;

namespace ConsoleApplication7
{
    class Program
    {
        static void Main(string[] args)
        {
            WriteLine("test");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-23T14:44:01.270

您可以创建一个静态类。

```
namespace MyNamespace
{
    public static class MyGlobalClass
    {
        public static void MyMethod() { ... }
    }
} 
```

`using`然后，您将在调用类的部分中添加命名空间以访问它。像这样：

```
using MyNamespace;

public class CallingClass
{
    public  void CallingMethod()
    {
        MyGlobalClass.MyMethod();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T14:50:14.830

您可以创建一个静态类（甚至将其包含在它自己的命名空间中，以免污染主项目命名空间），然后从任何地方调用它：

```
namespace SomeNamespace
{
    public static class SomeClass
    {
        public static string SomeMethod() 
        {
            ...
        }
    }
} 
```

然后，在您的代码中，您可以使用以下命令调用它：

```
string x = SomeNamespace.SomeClass.SomeMethod(); 
```

`using`或者，您可以在代码顶部设置 a并在没有命名空间的情况下引用它：

```
using SomeNamespace;
...
string x = SomeClass.SomeMethod(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-10T00:34:04.427

@kol 是对的，C# 中没有全局函数。看看这个帖子[MSDN 帖子](https://social.msdn.microsoft.com/Forums/vstudio/en-US/7fbd0c3e-64dd-46f3-b278-2700b7ca8b03/global-functions-in-c-replacement-of-module?forum=csharpgeneral)。我会使用图层（我将您的“模块”类重命名为“TransactionsModule”），它看起来像这样：

```
using System;
using System.Collections.Generic;
using System.Data.OleDb;

namespace XYZ
{
    public class TransactionsModule
    {
        public List<Person> GetPersons(string query, string connectionString)
        {
            List<Person> dbItems = new List<Person>();

            OleDbConnection conn = new OleDbConnection(connectionString);

            try 
            {
                conn.Open();
                var cmd = new OleDbCommand(query, conn);
                cmd.CommandText = query;

                using (OleDbDataReader reader = cmd.ExecuteReader())
                {
                    Person objPerson = new Person();

                    //These are the columns returned
                    objPerson.Name = Convert.ToString(myReader["Name"]);
                    objPerson.Age = Convert.ToInt32(myReader["Age"]);

                    dbItems.Add(objPerson);
                }
            } 
            catch(OleDbException ex)
            {
                throw ex;
            }
            finally
            {
                conn.Close();
            }
            return dbItems;           
        }

    }

    //This class should be in another Layer, but I placed it here since It's a quick Example
    public class Person
    {
        public string Name { get; set; }
        public int Age { get; set; }
    }
} 
```

所有的逻辑都被抽象到TransactionsModule 类中，然后只需要调用方法：GetPersons。看一看：

```
using System;
using System.Collections.Generic;
using XYZ.TransactionsModule;

namespace XYZ
{
    public partial class frmReports : Form
    {      
        public frm1()
        {
            InitializeComponent();
            protected TransactionsModule moduleTran;
        }

        private void frm1_Load(object sender, EventArgs e)
        {
            //We initialize the Data Access Layer class
            moduleTran = new TransactionsModule();

            //This ConnectionString should be in your app.config
            string conString = "provider= microsoft.jet.oledb.4.0;data source=..\\dbCooperative.mdb";
            string sqlQuery = "SELECT * FROM table";

            List<Person> ItStaff = moduleTran.GetPersons(sqlQuery, conString);
        }
    }
} 
```

# typo3 - 在 tt_news 中自动设置作者和电子邮件

> ID：11170387
> 
> 赞同：4
> 
> 时间：2012-06-23T14:43:08.493
> 
> 标签：typo3, tt-news

我知道我可以将 tt_news 配置为自动将作者和电子邮件设置为给定值，如下所示：

```
TCAdefaults.tt_news.author = full name
TCAdefaults.tt_news.author_email = name@domain.tld 
```

但是我可以从当前登录的 BE 用户的信息中检索电子邮件的名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:32:23.603

为了使每次更改都可以填充值（如果为空），您需要在某处注册一个钩子，即在您自己的扩展中

`typo3conf/ext/yourext/hooks/class.tx_ttnews_hooks.php`

```
class tx_ttnews_hooks {
// hook for prefilling TCA values
function getSingleField_preProcess($table, $field, &$row, $altName, $palette, $extra, $pal, $pObj) {

        switch($field) {
            case 'author_email':
                if($row[$field] == '') {
                    $row[$field] = $GLOBALS['BE_USER']->user['email'];
                }
                break;

            case 'author':
                if($row[$field] == '') {
                    $row[$field] = $GLOBALS['BE_USER']->user['realName'];
                }
                break;
         }
    }
} 
```

然后将其添加到`typo3conf/ext/yourext/ext_localconf.php`：

```
$TYPO3_CONF_VARS['SC_OPTIONS']['t3lib/class.t3lib_tceforms.php']['getSingleFieldClass'][] 
    = 'EXT:yourext/hooks/class.tx_ttnews_hooks.php:tx_ttnews_hooks'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T16:20:33.210

有一个[扩展](http://typo3.org/extensions/repository/view/cron_setdefaultauthor)程序可以满足您的需求。我自己没有使用过它，但描述听起来很有希望。

作为另一种解决方案，您可以编写一些添加动态用户 ts 的 php 代码。我只[在 German 中找到了一个示例](http://wissen.netzhaut.de/typo3/extensionentwicklung/tt_news-defaultwert-fur-archivierungsdatum/)，但无论如何这可能会有帮助。

# c# - 在 C# 中如何以及在何处使用 i++ 运算符？

> ID：11170392
> 
> 赞同：3
> 
> 时间：2012-06-23T14:43:42.547
> 
> 标签：c#, asp.net

我想知道是否有人可以告诉我有关`i++`C# 中的运算符的信息。

我知道它会在 int 值上加一，但我不知道在哪里使用它，以及它是否只是 for 循环语句，或者可以在一般项目中使用。

如果我能得到一些你可以在哪里使用`i++`操作符的实际例子，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T14:57:56.217

这是`post-increment`，这意味着将在语句执行后完成增量

```
int i=0;
Console.Write(i++);  // still 0
Console.Write(i);    // prints 1, it is incremented 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T14:47:44.393

一般来说，鉴于此声明：

```
var myNum = 0; 
```

您通常会这样做的任何地方：

```
myNum += 1; 
```

你可以这样做：

```
myNum++; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T14:51:49.510

您指的是 C# 后增量运算符，常见用例是：

*   在标准 for 循环中递增计数器变量
*   在while循环中增加计数器变量
*   按顺序访问数组**(3)**

示例**（3）**：

```
int[] table = { 0, 1, 2, 3, 4, 5, 6 };
int i = 0;
int j = table[i++]; //Access the table array element 0
int k = table[i++]; //Access the table array element 1
int l = table[i++]; //Access the table array element 2 
```

那么，后自增运算符到底是做什么的呢？ **它返回变量的值，然后将其值增加 1 个单位。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T15:54:42.483

表达式`i++`就像`x == y > 0 ? x : z`两者都是语法糖一样。

`x = i++`节省您的写作空间`x=i; i=i+1;`

是好还是坏？这个问题真的没有确切的答案。

我个人避免使用这些表达式，因为它们使我的代码看起来很复杂，有时难以调试。始终考虑代码的**可读性**而不是可**写性**，始终考虑您的代码看起来如何可读而不是编写它的难易程度

# c++ - QueueUserAPC - 抛出异常崩溃，可能的 mingw 错误

> ID：11170395
> 
> 赞同：1
> 
> 时间：2012-06-23T14:44:09.717
> 
> 标签：c++, windows, multithreading, winapi, terminate

**已解决：**我从 mingw 4.6.2 升级到 4.7.0 并且运行良好，猜想这只是一个错误

我开始对如何正确终止多线程应用程序进行一些研究，我发现了那两个帖子（[首先](https://stackoverflow.com/a/4325286/1393574)关于如何使用信号通知其他线程终止、[第二）。](https://stackoverflow.com/questions/209086/how-do-i-guarantee-fast-shutdown-of-my-win32-app/210385#210385)`QueueUserAPC`

我想我应该试一试，当我从 APCProc 抛出异常时，应用程序不断崩溃。

代码：

```
#include <stdio.h>
#include <windows.h>

class ExitException
{
public:
    char *desc;
    DWORD exit_code;

    ExitException(char *desc,int exit_code): desc(desc), exit_code(exit_code)
    {}
};

//I use this class to check if objects are deconstructed upon termination
class Test 
{
public:
    char *s;

    Test(char *s): s(s)
    {
        printf("%s ctor\n",s);
    }

    ~Test()
    {
        printf("%s dctor\n",s);
    }
};

DWORD CALLBACK ThreadProc(void *useless)
{
    try
    {
        Test t("thread_test");

        SleepEx(INFINITE,true);

        return 0;
    }
    catch (ExitException &e)
    {
        printf("Thread exits\n%s %lu",e.desc,e.exit_code);
        return e.exit_code;
    }
}

void CALLBACK exit_apc_proc(ULONG_PTR param)
{
    puts("In APCProc");
    ExitException e("Application exit signal!",1);
    throw e;

    return;
}

int main()
{
    HANDLE thread=CreateThread(NULL,0,ThreadProc,NULL,0,NULL);

    Sleep(1000);

    QueueUserAPC(exit_apc_proc,thread,0);

    WaitForSingleObject(thread,INFINITE);

    puts("main: bye");

    return 0;
} 
```

我的问题是为什么会发生这种情况？

我使用 mingw 进行编译，我的操作系统是 64 位的。

这可能是原因吗？我读到您不应该`QueueApcProc`从 32 位应用程序调用在 64 位进程中运行的线程，反之亦然，但事实并非如此。

**编辑：**我用 Visual Studio 的 c++ 编译器 2010 编译了它，它运行完美，这可能是 gcc/mingw 中的一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:12:36.693

我可以用 VS2005 重现同样的东西。问题是编译器优化了`catch`离开。为什么？`extern "C"`因为根据 C++ 标准，如果函数因异常退出会发生什么是未定义的。所以编译器假定`SleepEx`（即`extern "C"`）永远不会抛出。在内联之后`Test::Test`，`Test::~Test`它看到`printf`也没有抛出，因此如果这个块中的某些东西通过异常退出

```
 Test t("thread_test");

    SleepEx(INFINITE,true);

    return 0; 
```

行为未定义！

在 MSVC 中，代码不能与`/EHsc`Release 构建中的开关一起使用，但可以与`/EHa`or一起使用`/EHs`，这告诉它假设 C 函数可能会抛出。也许 GCC 也有类似的标志。

# php - 如何从我的服务器发送和 jpg 图像到我的 c# 应用程序？

> ID：11170397
> 
> 赞同：0
> 
> 时间：2012-06-23T14:44:18.623
> 
> 标签：php

我的服务器正在运行 php，我希望它能够向我发送图像。例如“profile.jpg”。

在 C# 中，我只是用源填充位图图像，但是如何创建源，即输出图像二进制数据的文件？

我有这个：

```
<?php
$file = 'profil.jpg';
$image = imagecreatefromjpeg($file);
imagealphablending($image, false);
imagesavealpha($image, true);

// start buffering
ob_start();
imagepng($image);
$contents =  ob_get_contents();
ob_end_clean();

echo "<img src='data:image/jpeg;base64,".base64_encode($contents)."' />";

imagedestroy($image);
?> 
```

但它输出 HTML，我可以`echo base64_encode($contents)`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:09:16.600

我会说你错过了标题，而不是*清理*缓冲区，你应该*刷新*它，类似的东西（在我的头顶上）

```
<?php
$file = 'profil.jpg';
$image = imagecreatefromjpeg($file);
imagealphablending($image, false);
imagesavealpha($image, true);

// start buffering
ob_start();

header('Content-Description: File Transfer');
header('Content-type: image/png');
header('Content-Disposition: attachment; filename="'.$file.'"');
header('Content-Transfer-Encoding: binary');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0'); 
header('Pragma: public');

imagepng($image);
$contents =  ob_get_contents();

// echo $contents;
// ob_end_flulsh();
/* OR */
ob_get_fllush();

echo "<img src='data:image/jpeg;base64,".base64_encode($contents)."' />";

imagedestroy($image);
?> 
```

类似的东西。您当然可以在标题中添加更多信息或减少信息，具体取决于您在另一端的需要。[HTTP/1.1：标头字段定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)。也[输出控制功能](http://www.php.net/manual/en/ref.outcontrol.php)

# typo3 - tt_news 中的默认类别

> ID：11170400
> 
> 赞同：3
> 
> 时间：2012-06-23T14:44:54.640
> 
> 标签：typo3, tt-news

有没有办法为 tt_news 设置默认类别，这样用户在创建新闻时不需要显式分配类别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T16:08:35.657

你可以设置它`PageTS`：

```
TCAdefaults.tt_news.category = 123 
```

确保编辑用户（如果不是管理员）具有编辑类别字段的适当权限，否则将不会保存默认类别。

# javascript - 有没有办法使用多个关键事件

> ID：11170401
> 
> 赞同：0
> 
> 时间：2012-06-23T14:44:56.590
> 
> 标签：javascript, jquery, javascript-events

我想知道是否有可能做这样的事情。我想要文本框的 keyup 函数的能力，但我希望它也可以与复选框一起使用，而不必编写另一个函数

```
$('#title, #business').keyup.change(function() { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T14:47:25.383

使用~~[`bind()`](http://api.jquery.com/bind/)~~或[`on()`](http://api.jquery.com/on/)：

```
$('#title, #business').on('keyup change', function() {
  // do something
});    

// Deprecated since jQuery 1.7
$('#title, #business').bind('keyup change', function() {
  // do something
}); 
```

AhamedMustafaM [+1]是对的：从 jQuery 1.7 开始，[`on()`](http://api.jquery.com/on/)是添加事件侦听器的首选方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T14:51:33.567

使用 jQuery`on`函数，如

```
$("input .someclass").on({
  keyup: function(){
    $(this).toggleClass("active");
  },
  change: function(){
    $(this).addClass("inside");
  },
  mouseleave: function(){
    $(this).removeClass("inside");
  }
}); 
```

截至`jQuery v1.7`,`on`是添加偶数处理程序的首选方法

# mysql - MySQL 中的“默认”varchar(255) 是什么意思？

> ID：11170402
> 
> 赞同：1
> 
> 时间：2012-06-23T14:45:44.203
> 
> 标签：mysql, sql-server, database

我在 MySQL 脚本中遇到了这一行

```
 `other_validator` varchar(5000) NOT NULL DEFAULT '',
   `default` varchar(255) NOT NULL DEFAULT '',
  `widget` varchar(255) NOT NULL DEFAULT '', 
```

这条线代表什么？

```
`default` varchar(255) NOT NULL DEFAULT '', 
```

这如何在 SQL Server 中实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:51:04.300

您看到的是名称不佳的列。尝试为列选择一个更具描述性的名称。如果你这样做，其他开发人员会过得更好。

您可以对 SQL Server 使用方括号分隔符。

```
CREATE TABLE foo (
    [defaultXyz] varchar(255)
) 
```

SQL Server 将允许您仅使用方括号为列指定此名称。只是不要这样做。这就像给一个孩子起一个名字'Kid'。

![在此处输入图像描述](../Images/be02866ee2897c030e22a29a0eeeb446.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T14:49:16.327

它会在您的表中创建一个名为“default”的字段，该字段的类型为 VARCHAR，长度最多为 255 个字符。它不能为 NULL 并且默认为空字符串，如果在`INSERT`.

这里没什么特别的......只是简单的 ole SQL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T14:49:24.470

SQL Server 对保留字使用方括号。例如 [默认]

但是：请不要这样做。每当您忘记引用没有括号的列或表时，您都会遇到非常严重的错误。

# java - 在 jboss 中运行 run.bat 时出现“tools.jar 意外”错误

> ID：11170408
> 
> 赞同：0
> 
> 时间：2012-06-23T14:46:24.237
> 
> 标签：java, jboss

我正在将 JBoss 4.0.0 安装到我的机器上。但是在 jboss 中运行 run.bat 时，它给了我一个错误，说 tools.jar 意外。我在这里错过了什么？任何想法？

Java 主页：C:\Program Files (x86)\Java\jdk1.6.0
JRE 主页：C:\Program Files (x86)\Java\jre1.6.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:59:52.507

错误是因为**空间**

> C:\Program 文件 (x86)

将 JDK 文件夹移动（剪切 + 粘贴）到没有空间的路径中

例子：

> C:\Java

现在，JDK 路径将是

> C:\Java\jdk1.6.0

现在设置`JAVA_HOME`到上面的文件夹。

# android - 如何在 EditText 中禁用光标定位和文本选择？（安卓）

> ID：11170409
> 
> 赞同：33
> 
> 时间：2012-06-23T14:46:45.843
> 
> 标签：android, android-edittext, textselection, android-cursor

我正在寻找一种方法来防止用户将光标位置移动到任何地方。光标应始终停留在当前 EditText 值的末尾。除此之外，用户应该不能在 EditText 中选择任何内容。您知道如何在 Android 中使用 EditText 实现这一点吗？

澄清：用户应该能够插入文本，但只能在末尾。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-19T20:49:00.240

我有同样的问题。这最终为我工作：

```
public class CustomEditText extends EditText {

    @Override
    public void onSelectionChanged(int start, int end) {

        CharSequence text = getText();
        if (text != null) {
            if (start != text.length() || end != text.length()) {
                setSelection(text.length(), text.length());
                return;
            }
        }

        super.onSelectionChanged(start, end);
    }

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-12T09:04:24.057

试试这个：

```
mEditText.setMovementMethod(null); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-23T15:04:11.550

这会将光标焦点重置到文本的最后一个位置

```
editText.setSelection(editText.getText().length()); 
```

此方法将禁用触摸时光标移动

```
public class MyEditText extends EditText{

    @Override
    public boolean onTouchEvent(MotionEvent event)
    {
         final int eventX = event.getX();
         final int eventY = event.getY();
         if( (eventX,eventY) is in the middle of your editText)
         {
              return false;
         }
         return true;
    }
} 
```

您可以使用 xml 属性

> 机器人：光标可见

或java函数

> setCursorVisible（布尔值）

禁用edittext的闪烁光标

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T16:17:30.487

听起来最好的方法是创建自己的`CustomEditText`类并覆盖/修改任何相关方法。您可以在此处查看源[代码](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/android/widget/EditText.java/?v=source)`EditText`。

```
public class CustomEditText extends EditText {

    @Override
    public void selectAll() {
        // Do nothing
    }

    /* override other methods, etc. */

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-11T20:44:08.563

是的，我知道怎么做 =) 就去做吧：

复制辅助类：

```
class SelectionSpanWatcher(
  private val listener: OnChangeSelectionListener
) : SpanWatcher {

  override fun onSpanAdded(text: Spannable?, what: Any?, start: Int, end: Int) {
    /* do nothing */
  }

  override fun onSpanRemoved(text: Spannable?, what: Any?, start: Int, end: Int) {
    /* do nothing */
  }

  override fun onSpanChanged(text: Spannable?, what: Any?, oStart: Int, oEnd: Int, nStart: Int, nEnd: Int) {
    when (what) {
      SELECTION_START -> listener.onSelectionChanged(Selection.START, oStart, oEnd, nStart, nEnd)
      SELECTION_END   -> listener.onSelectionChanged(Selection.END, oStart, oEnd, nStart, nEnd)
    }
  }

  enum class Selection {
    START,
    END
  }

  fun interface OnChangeSelectionListener {
    fun onSelectionChanged(selection: Selection, oStart: Int, oEnd: Int, nStart: Int, nEnd: Int)
  }
} 
```

然后复制扩展方法：

```
fun Editable.setOnSelectionChangedListener(listener: OnChangeSelectionListener?) {
  getSpans(0, length, SelectionSpanWatcher::class.java)
    .forEach { span -> removeSpan(span) }

  if (listener != null) {
    setSpan(SelectionSpanWatcher(listener), 0, length, Spanned.SPAN_INCLUSIVE_INCLUSIVE)
  }
} 
```

然后使用复制的代码如下（使用`androidx.core.widget.addTextChangedListener`from `android-ktx`）：

```
editText.addTextChangedListener(afterTextChanged = { editable ->
  editable?.setOnSelectionChangedListener { _, _, _, _, _ ->
    editText.postOnAnimation {
      editText.setSelection(editText.text.length)
    }
  }
}) 
```

# json - YouTube API 调用可能超载？

> ID：11170410
> 
> 赞同：0
> 
> 时间：2012-06-23T14:46:52.600
> 
> 标签：json, youtube-api

我正在处理的一个项目多次调用 YouTube gdata API。通常，当我大量使用该网站并浏览多个使用 API 的页面时，我只是停止从 API 获得任何回报。网站的这些部分可以正常加载，但是通常由 API 收集的内容会突然停止加载一段时间。这是因为 API 无法像那样处理来自我的连续调用，还是因为我的代码不好？

我知道这可能不是 Stack Overflow 最有建设性的答案，所以如果我需要删除它，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:54:50.263

我认为您遇到了某种请求限制。如常见问题解答中所述[https://developers.google.com/youtube/faq#operation_limits](https://developers.google.com/youtube/faq#operation_limits) Youtube 限制各种选项以防止大量数据/请求。

# google-apps-script - 输出其他内容类型；除了带有 Apps 脚本的 HTML

> ID：11170411
> 
> 赞同：2
> 
> 时间：2012-06-23T14:47:09.297
> 
> 标签：google-apps-script

有没有办法让一个独立的应用程序输出除 HTML 之外的任何其他内容类型。即如果我想输出纯文本以便它可以被另一个应用程序使用（创建一个简单的网络服务）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T00:26:19.163

本周我们推出了 ContentService，它允许您以 JSON、ATOM 和纯文本等格式返回内容。

```
function doGet(e) {
  return ContentService.createTextOutput('Hello World')
      .setMimeType(ContentService.MimeType.TEXT);
} 
```

# android - 首选项屏幕不支持 NoTitleBar 主题

> ID：11170412
> 
> 赞同：1
> 
> 时间：2012-06-23T14:47:17.393
> 
> 标签：android, android-layout, android-preferences, preferenceactivity, preferencescreen

我的偏好活动有一个偏好类别，其中包含多个偏好屏幕。屏幕是在运行时动态添加的。我在代码中构建每个并将其添加到首选项组。屏幕实际上并没有在设备上设置首选项。相反，他们调用服务器将它们设置在那里。这是通过将它们全部设置为 persistent = false 并在每个上配置首选项更改侦听器来完成的。

我的问题是：我的应用不使用标题栏。我已经通过在清单中设置“@android:style/Theme.NoTitleBar”主题来禁用它们，但是我的偏好活动中的每个偏好屏幕创建的视图仍然有一个标题栏。其文本设置为首选项屏幕的标题。

我不能只是不设置标题，因为当显示偏好活动时它不存在。

我尝试在代码中的 PreferenceScreen 上设置布局资源并让该资源使用 NoTitleBar 主题，但是当屏幕的视图被放大时，它似乎忽略了我在代码中设置的所有标题、摘要等（而不是在参考布局）。

我还尝试在首选项活动的布局上设置 NoTitleBar 主题，以及首选项类别。没有效果。

我什至考虑对 PreferenceScreen 进行子类化并覆盖 getView() 以在视图返回之前设置我的所有动态信息，但 PreferenceScreen 被声明为最终视图。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:51:58.590

真奇怪！！

放入`requestWindowFeature(Window.FEATURE_NO_TITLE);`PreferenceActivity

# python - 升级到 Lion 后如何让 virtualenv 工作？

> ID：11170414
> 
> 赞同：5
> 
> 时间：2012-06-23T14:47:33.037
> 
> 标签：python, osx-lion, virtualenv

我刚刚从 SnowLeapord 升级到 Lion，现在无法创建 virtualenvs。我知道升级后有新的 Python 安装，没有站点包，并尝试再次安装 pip 和 virtualenv 以及升级到 Xcode4，但我总是收到此错误：

```
~ > virtualenv --distribute env
New python executable in env/bin/python
Installing distribute........
Complete output from command /Users/jaderberg/env/bin/python -c "#!python
\"\"\"Bootstra... main(sys.argv[1:])
" --always-copy -U distribute:
Traceback (most recent call last):
File "<string>", line 23, in <module>
File "/Users/jaderberg/env/lib/python2.7/distutils/__init__.py", line 16, in <module>
exec(open(os.path.join(distutils_path, '__init__.py')).read())
IOError: [Errno 2] No such file or directory: 'System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/__init__.py'
----------------------------------------
...Installing distribute...done.
Traceback (most recent call last):
File "/usr/local/bin/virtualenv", line 9, in <module>
load_entry_point('virtualenv==1.7.2', 'console_scripts', 'virtualenv')()
File "/Library/Python/2.7/site-packages/virtualenv-1.7.2-py2.7.egg/virtualenv.py", line 942, in main
never_download=options.never_download)
File "/Library/Python/2.7/site-packages/virtualenv-1.7.2-py2.7.egg/virtualenv.py", line 1049, in create_environment
search_dirs=search_dirs, never_download=never_download)
File "/Library/Python/2.7/site-packages/virtualenv-1.7.2-py2.7.egg/virtualenv.py", line 603, in install_distribute
search_dirs=search_dirs, never_download=never_download)
File "/Library/Python/2.7/site-packages/virtualenv-1.7.2-py2.7.egg/virtualenv.py", line 570, in _install_req
cwd=cwd)
File "/Library/Python/2.7/site-packages/virtualenv-1.7.2-py2.7.egg/virtualenv.py", line 1020, in call_subprocess
% (cmd_desc, proc.returncode))
OSError: Command /Users/jaderberg/env/bin/python -c "#!python
\"\"\"Bootstra... main(sys.argv[1:])
" --always-copy -U distribute failed with error code 1 
```

我有点像 unix/python 新手，只是无法弄清楚如何让它工作。有任何想法吗？如果不使用 --distribute 标签，我会收到此错误：

```
~ > virtualenv env
New python executable in env/bin/python
Installing setuptools.............
  Complete output from command /Users/jaderberg/env/bin/python -c "#!python
\"\"\"Bootstra...sys.argv[1:])

" /Library/Python/2.7/...ols-0.6c11-py2.7.egg:
  Traceback (most recent call last):
  File "", line 279, in 
  File "", line 207, in main
  File "/Library/Python/2.7/site-packages/distribute-0.6.27-py2.7.egg/setuptools/__init__.py", line 2, in 
    from setuptools.extension import Extension, Library
  File "/Library/Python/2.7/site-packages/distribute-0.6.27-py2.7.egg/setuptools/extension.py", line 2, in 
    import distutils.core
  File "/Users/jaderberg/env/lib/python2.7/distutils/__init__.py", line 16, in 
    exec(open(os.path.join(distutils_path, '__init__.py')).read())
IOError: [Errno 2] No such file or directory: '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/__init__.py'
----------------------------------------
...Installing setuptools...done.
Traceback (most recent call last):
  File "/usr/local/bin/virtualenv", line 9, in 
    load_entry_point('virtualenv==1.7.2', 'console_scripts', 'virtualenv')()
  File "/Library/Python/2.7/site-packages/virtualenv-1.7.2-py2.7.egg/virtualenv.py", line 942, in main
    never_download=options.never_download)
  File "/Library/Python/2.7/site-packages/virtualenv-1.7.2-py2.7.egg/virtualenv.py", line 1052, in create_environment
    search_dirs=search_dirs, never_download=never_download)
  File "/Library/Python/2.7/site-packages/virtualenv-1.7.2-py2.7.egg/virtualenv.py", line 598, in install_setuptools
    search_dirs=search_dirs, never_download=never_download)
  File "/Library/Python/2.7/site-packages/virtualenv-1.7.2-py2.7.egg/virtualenv.py", line 570, in _install_req
    cwd=cwd)
  File "/Library/Python/2.7/site-packages/virtualenv-1.7.2-py2.7.egg/virtualenv.py", line 1020, in call_subprocess
    % (cmd_desc, proc.returncode))
OSError: Command /Users/jaderberg/env/bin/python -c "#!python
\"\"\"Bootstra...sys.argv[1:])

" /Library/Python/2.7/...ols-0.6c11-py2.7.egg failed with error code 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T16:09:03.157

事实证明，虽然我将 Xcode 升级到了版本 4，但它并没有自动安装命令行工具。我跟着这个[http://blog.cingusoft.org/mac-osx-lion-virtualenv-and-could-not-call-in](http://blog.cingusoft.org/mac-osx-lion-virtualenv-and-could-not-call-in)。

基本上，安装 Xcode，进入首选项，然后下载并安装“命令行工具”。现在可以了。

命令行工具也可以直接从[https://developer.apple.com/downloads/index.action#获得](https://developer.apple.com/downloads/index.action#)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:49:17.913

我还必须升级我的 setuptools。

`pip install setuptools --upgrade`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T10:53:39.643

```
cd /usr/lib/python2.7
sudo ln -s plat-x86_64-linux-gnu/_sysconfigdata_nd.py . 
```

# php - 从 Soundcloud 嵌入代码中获取用户 ID

> ID：11170419
> 
> 赞同：0
> 
> 时间：2012-06-23T14:48:32.243
> 
> 标签：php, regex, soundcloud

我需要在我的网站中嵌入 soundcloud url，所以我要求网站用户提交他们希望在其页面上嵌入的 SOUNDCLOUD URL

有什么方法可以让我使用 PHP 1\. src 2 中 iframe 中的 url 值和用户 ID 即 822654

```
<iframe width="100%" height="450" scrolling="no" frameborder="no" src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Fusers%2F847884 &show_artwork=true"></iframe> 
```

我尝试了 parse_url(PHP 函数) 但未能获取我想要的内容 如果有人 , 可以帮助我也知道每个用户是否获得像 847884 之类的 id （在上述情况下）或者嵌入代码可能有虚 url （比如代替 847884 可以用户有 /bob/ 或 /andrew/) 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:55:28.053

***脚本：***

```
<?php

$subject = "<iframe width=\"100%\" height=\"450\" scrolling=\"no\" frameborder=\"no\" src=\"http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Fusers%2F847884&show_artwork=true\"></iframe>";

$pattern = '/<iframe[^>]*\ssrc="[^"]*\?url=([^&]*%2Fusers%2F(\d+)[^&]*)&/';
preg_match($pattern, $subject, $matches);

echo urldecode($matches[1]), "\n";
echo $matches[2], "\n";

?> 
```

***输出：***

```
http://api.soundcloud.com/users/847884
847884 
```

[在这里](http://ideone.com/APoHK)查看并测试它。

# c++ - 如何编译thrust和c++项目？

> ID：11170420
> 
> 赞同：1
> 
> 时间：2012-06-23T14:48:39.043
> 
> 标签：c++, compilation, cuda, thrust

当我想同时使用推力和 c++ 时，我遇到了关于编译的大问题。

这是项目结构（只是一个测试项目）：

**排序库.h**

```
#include<iostream>
#include <thrust/device_vector.h>
using namespace std;

template<class T>
class SortBase
{
public:
        void Init()
        {
        }
        void resize(const int &x)
        {
                CV.resize(x);
                cout<<"resize succeed!"<<endl;
        }
private: 
        thrust::device_vector<T> CV;
}; 
```

**排序器.h**

```
#ifndef __SORTER_H__
#define __SORTER_H__
#include <iostream>
#include <thrust/device_vector.h>
#include "sortbase.h"
using namespace std;

template<class T>
void ttest()
{cout<<"tttttttttttttttt";cout<<endl;}
        template<class KEY>
        class Sorter
        {
        public:
                Sorter():CV(NULL)
                {
                        CV=new SortBase<KEY>();
                }
                ~Sorter()
                {
                        if (CV!=NULL)
                        {
                                delete CV;
                                CV=NULL;
                        }
                }
                __host__ __device__
                virtual bool operator()(const KEY& x,const KEY& y)const
                {
                        return (x<y);
                }
                void test()
                {
                        //ttest<KEY>();
                        resize(5);
                }
        private:
                void resize(const int &x)
                {
                        CV->resize(x);
                        cout<<"resize: "<<x<<endl;
                }
        private:
                SortBase<KEY> *CV;
        };

#endif 
```

**主文件**

```
#include <iostream>
#include "include/sorter.cu"
using namespace std;

int main(int argc,char **argv)
{
        Sorter<int> *sorter=new Sorter<int>();
        sorter->test();
        return 0;
} 
```

我喜欢这样：

```
nvcc -c sorter.cu
g++ -c main.cpp -I/usr/local/cuda/include
g++ sorter.o main.o -o sorter 
```

但是第二步给出了错误信息，很多警告和错误信息。谁能帮我？一些警告和错误消息，如下所示：

```
/usr/local/cuda/include/thrust/detail/device/cuda/for_each.inl: In function \u2018RandomAccessIterator thrust::detail::device::cuda::for_each_n(RandomAccessIterator, Size, UnaryFunction) [with RandomAccessIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long unsigned int, UnaryFunction = thrust::detail::generate_functor<thrust::detail::fill_functor<int> >]\u2019:
/usr/local/cuda/include/thrust/detail/device/dispatch/for_each.h:56:   instantiated from \u2018RandomAccessIterator thrust::detail::device::dispatch::for_each_n(RandomAccessIterator, Size, UnaryFunction, thrust::detail::cuda_device_space_tag) [with RandomAccessIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long unsigned int, UnaryFunction = thrust::detail::generate_functor<thrust::detail::fill_functor<int> >]\u2019
/usr/local/cuda/include/thrust/detail/device/for_each.inl:43:   instantiated from \u2018OutputIterator thrust::detail::device::for_each_n(OutputIterator, Size, UnaryFunction) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long unsigned int, UnaryFunction = thrust::detail::generate_functor<thrust::detail::fill_functor<int> >]\u2019
/usr/local/cuda/include/thrust/detail/dispatch/for_each.h:84:   instantiated from \u2018OutputIterator thrust::detail::dispatch::for_each_n(OutputIterator, Size, UnaryFunction, thrust::device_space_tag) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long unsigned int, UnaryFunction = thrust::detail::generate_functor<thrust::detail::fill_functor<int> >]\u2019
/usr/local/cuda/include/thrust/detail/for_each.inl:41:   instantiated from \u2018OutputIterator thrust::detail::for_each_n(OutputIterator, Size, UnaryFunction) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long unsigned int, UnaryFunction = thrust::detail::generate_functor<thrust::detail::fill_functor<int> >]\u2019
/usr/local/cuda/include/thrust/detail/generate.inl:47:   instantiated from \u2018OutputIterator thrust::generate_n(OutputIterator, Size, Generator) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long unsigned int, Generator = thrust::detail::fill_functor<int>]\u2019
/usr/local/cuda/include/thrust/detail/device/cuda/fill.inl:87:   instantiated from \u2018OutputIterator thrust::detail::device::cuda::detail::fill_n(OutputIterator, Size, const T&, thrust::detail::false_type) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long unsigned int, T = int]\u2019
/usr/local/cuda/include/thrust/detail/device/cuda/fill.inl:117:   instantiated from \u2018OutputIterator thrust::detail::device::cuda::detail::fill_n(OutputIterator, Size, const T&, thrust::detail::true_type) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long unsigned int, T = int]\u2019
/usr/local/cuda/include/thrust/detail/device/cuda/fill.inl:138:   instantiated from \u2018OutputIterator thrust::detail::device::cuda::fill_n(OutputIterator, Size, const T&) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long unsigned int, T = int]\u2019
/usr/local/cuda/include/thrust/detail/device/dispatch/fill.h:57:   instantiated from \u2018OutputIterator thrust::detail::device::dispatch::fill_n(OutputIterator, Size, const T&, thrust::detail::cuda_device_space_tag) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long unsigned int, T = int]\u2019
/usr/local/cuda/include/thrust/detail/device/fill.inl:47:   instantiated from \u2018OutputIterator thrust::detail::device::fill_n(OutputIterator, Size, const T&) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long unsigned int, T = int]\u2019
/usr/local/cuda/include/thrust/detail/dispatch/fill.h:76:   instantiated from \u2018OutputIterator thrust::detail::dispatch::fill_n(OutputIterator, Size, const T&, thrust::device_space_tag) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long unsigned int, T = int]\u2019
/usr/local/cuda/include/thrust/detail/fill.inl:46:   instantiated from \u2018OutputIterator thrust::fill_n(OutputIterator, Size, const T&) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long unsigned int, T = int]\u2019
/usr/local/cuda/include/thrust/detail/vector_base.inl:757:   instantiated from \u2018void thrust::detail::vector_base<T, Alloc>::fill_insert(typename thrust::detail::contiguous_storage<T, Alloc>::iterator, typename thrust::detail::contiguous_storage<T, Alloc>::size_type, const T&) [with T = int, Alloc = thrust::device_malloc_allocator<int>]\u2019
/usr/local/cuda/include/thrust/detail/vector_base.inl:561:   instantiated from \u2018void thrust::detail::vector_base<T, Alloc>::insert(typename thrust::detail::contiguous_storage<T, Alloc>::iterator, typename thrust::detail::contiguous_storage<T, Alloc>::size_type, const T&) [with T = int, Alloc = thrust::device_malloc_allocator<int>]\u2019
/usr/local/cuda/include/thrust/detail/vector_base.inl:223:   instantiated from \u2018void thrust::detail::vector_base<T, Alloc>::resize(typename thrust::detail::contiguous_storage<T, Alloc>::size_type, typename thrust::detail::contiguous_storage<T, Alloc>::value_type) [with T = int, Alloc = thrust::device_malloc_allocator<int>]\u2019

include/sortbase.h:14:   instantiated from void SortBase<T>::resize(const int&) [with T = int]
include/sorter.cu:40:   instantiated from void Sorter<KEY>::resize(const int&) [with KEY = int]
include/sorter.cu:35:   instantiated from void Sorter<KEY>::test() [with KEY = int]
main.cpp:9:   instantiated from here
/usr/local/cuda/include/thrust/detail/device/cuda/for_each.inl:93: error: invalid     application of sizeof to incomplete type thrust::detail::STATIC_ASSERTION_FAILURE<false>
/usr/local/cuda/include/thrust/detail/device/cuda/arch.h: At global scope:
/usr/local/cuda/include/thrust/detail/device/cuda/arch.h:59: warning: inline function size_t thrust::detail::device::cuda::arch::compute_capability() used but never defined 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:46:54.857

我认为问题在于您从 .cpp 文件中包含了 .cu 文件。只能从 .cu 文件中使用推力代码，该文件必须由 NVCC 编译，而不是由主机编译器 g++ 编译。因此，您需要将所有 Thrust 和 CUDA 设备代码移动到可以从 .cpp 文件调用的函数中的 .cu 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T21:16:13.660

哈里斯主义是对的。如果要使用 gpu 编译文件，`.cu`则必须使用 for 文件，`nvcc`例如：

```
nvcc -o test test.cu 
```

# jsf-2 - 在 Glassfish 服务器上运行的 JSF 2.0 应用程序中测试域模型

> ID：11170423
> 
> 赞同：0
> 
> 时间：2012-06-23T14:49:02.530
> 
> 标签：jsf-2, junit, glassfish, jsfunit

我刚刚实现了一些实体和一些支持 bean。但是，我想知道是否有某种方法可以在应用程序服务器上测试域模型或实体，在这种情况下是 Glassfish。

例如，当我添加了一个新实体时，我想通过写入和读取实体来测试持久性是否正确，并可能进行一些操作。

我已经将 JUnit 用于标准应用程序，但现在部署在应用程序服务器上的 Web 应用程序让我感到困惑。

处理这个问题的标准方法是什么。我听说过有关 JSFUnit 的一些信息，但我没有看到 Glassfish 的任何示例（也许没关系？）

PS。我的项目涉及 EJB，我认为这需要在嵌入式应用程序服务器或托管服务器下进行测试？

你能帮我理解处理这类事情的最佳做法是什么吗？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:31:13.680

最好你想在容器外进行测试，这是很有可能的，因为 JPA 在容器外工作。只需设置一个专为测试而设计的新 persistence.xml，就像您只使用 Java SE 一样进行配置，然后您就可以测试您的实体了。您必须自己设置 entitymanager 实例，因为您不在容器内。要么让您的测试类从您正在测试的 EJB 继承，并将受保护的 EntityManager 实例设置为来自您的 EntityManagerFactory 的实例，或者在您的每个 DAO EJB 中为您的 EntityManager 添加一个设置器。那么你应该准备好了。不过，您将不得不手动处理您的事务，这对于大多数调用应该是可能的，因为您可能希望从每个测试中回滚更改。

# clojure - 在 Clojure 中返回时保持代理状态

> ID：11170424
> 
> 赞同：3
> 
> 时间：2012-06-23T14:49:04.580
> 
> 标签：clojure

我正在通过代理获取 url，其中每个代理的状态都是一个向量，其中包含代理主机和它从中获取的端口。

我试图返回获取的页面的内容，同时将代理的状态保持为包含主机和端口的向量。

这就是我到目前为止所拥有的。

```
(defn fetch-url-with-proxy [url]
  (letfn [(fetch-fn [host-port url]
            (let [[host port] host-port]
              (fetch-url url host port)
              host-port))]
    (send-off (agent-from-pool proxy-pool) fetch-fn url))) 
```

不幸的是，我目前返回代理，而不是 fetch-url 的内容。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:30:56.403

使用 promise 等待结果：

```
(defn fetch-url-with-proxy [url]
  (letfn [(fetch-fn [host-port url result]
      (let [[host port] host-port]
        (deliver result (fetch-url url host port))
          host-port))]
  (let [result (promise)]
    (send-off (agent-from-pool proxy-pool) fetch-fn url result)
    @result))) 
```

# django - 如何在 django 中对文件上传进行单元测试

> ID：11170425
> 
> 赞同：122
> 
> 时间：2012-06-23T14:49:08.113
> 
> 标签：django, unit-testing, file-upload

在我的 django 应用程序中，我有一个完成文件上传的视图。核心片段是这样的

```
...
if  (request.method == 'POST'):
    if request.FILES.has_key('file'):
        file = request.FILES['file']
        with open(settings.destfolder+'/%s' % file.name, 'wb+') as dest:
            for chunk in file.chunks():
                dest.write(chunk) 
```

我想对视图进行单元测试。我计划测试快乐路径和失败路径..即，`request.FILES`没有关键“文件”的情况，`request.FILES['file']`有`None`..

如何设置快乐路径的帖子数据？有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2014-12-07T17:07:38.873

我以前也这样做，`with open('some_file.txt') as fp:`但后来我需要 repo 中的图像、视频和其他真实文件，而且我正在测试经过良好测试的 Django 核心组件的一部分，所以目前这就是我一直在做的事情：

```
from django.core.files.uploadedfile import SimpleUploadedFile

def test_upload_video(self):
    video = SimpleUploadedFile("file.mp4", "file_content", content_type="video/mp4")
    self.client.post(reverse('app:some_view'), {'video': video})
    # some important assertions ... 
```

在**Python 3.5+**中，您需要使用`bytes`object 而不是`str`. 更改`"file_content"`为`b"file_content"`

它运行良好，`SimpleUploadedFile`创建了一个`InMemoryFile`行为类似于常规上传的内容，您可以选择名称、内容和内容类型。

* * *

## 回答 #2

> 赞同：133
> 
> 时间：2012-06-23T14:55:00.680

来自 Django 文档[`Client.post`](https://docs.djangoproject.com/en/dev/topics/testing/tools/#django.test.Client.post)：

> 提交文件是一种特殊情况。要发布文件，您只需提供文件字段名称作为键，并提供要上传的文件的文件句柄作为值。例如：

```
c = Client()
with open('wishlist.doc') as fp:
  c.post('/customers/wishes/', {'name': 'fred', 'attachment': fp}) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-23T15:00:27.277

我建议你看看 Django [RequestFactory](https://docs.djangoproject.com/en/dev/topics/testing/advanced/#the-request-factory)。这是模拟请求中提供的数据的最佳方式。

话虽如此，我在您的代码中发现了几个缺陷。

*   “单元”测试意味着只测试**一个**“单元”的功能。因此，如果您想测试该视图，您将测试视图和文件系统，ergo，而不是真正的单元测试。为了更清楚地说明这一点。如果您运行该测试，并且视图工作正常，但您没有保存该文件的权限，那么您的测试将因此而失败。
*   其他重要的是**测试速度**。如果你在做 TDD 之类的事情，那么测试的执行速度真的很重要。 **访问任何 I/O 都不是一个好主意**。

因此，我建议您**重构**视图以使用如下函数：

```
def upload_file_to_location(request, location=None): # Can use the default configured 
```

并对此进行一些嘲笑。您可以使用[Python Mock](https://docs.python.org/3/library/unittest.mock.html)。

PS：您也可以使用 Django [Test Client](https://docs.djangoproject.com/en/dev/topics/testing/tools/#default-test-client)但这意味着您要添加更多东西来测试，因为该客户端使用会话、中间件等。与单元测试没有任何相似之处。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-23T16:50:28.453

我为自己的事件相关应用程序做了类似的事情，但你应该有足够多的代码来处理你自己的用例

```
import tempfile, csv, os

class UploadPaperTest(TestCase):

    def generate_file(self):
        try:
            myfile = open('test.csv', 'wb')
            wr = csv.writer(myfile)
            wr.writerow(('Paper ID','Paper Title', 'Authors'))
            wr.writerow(('1','Title1', 'Author1'))
            wr.writerow(('2','Title2', 'Author2'))
            wr.writerow(('3','Title3', 'Author3'))
        finally:
            myfile.close()

        return myfile

    def setUp(self):
        self.user = create_fuser()
        self.profile = ProfileFactory(user=self.user)
        self.event = EventFactory()
        self.client = Client()
        self.module = ModuleFactory()
        self.event_module = EventModule.objects.get_or_create(event=self.event,
                module=self.module)[0]
        add_to_admin(self.event, self.user)

    def test_paper_upload(self):
        response = self.client.login(username=self.user.email, password='foz')
        self.assertTrue(response)

        myfile = self.generate_file()
        file_path = myfile.name
        f = open(file_path, "r")

        url = reverse('registration_upload_papers', args=[self.event.slug])

        # post wrong data type
        post_data = {'uploaded_file': i}
        response = self.client.post(url, post_data)
        self.assertContains(response, 'File type is not supported.')

        post_data['uploaded_file'] = f
        response = self.client.post(url, post_data)

        import_file = SubmissionImportFile.objects.all()[0]
        self.assertEqual(SubmissionImportFile.objects.all().count(), 1)
        #self.assertEqual(import_file.uploaded_file.name, 'files/registration/{0}'.format(file_path))

        os.remove(myfile.name)
        file_path = import_file.uploaded_file.path
        os.remove(file_path) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-02-02T08:46:46.967

我做了类似的事情：

```
from django.core.files.uploadedfile import SimpleUploadedFile
from django.test import TestCase
from django.core.urlresolvers import reverse
from django.core.files import File
from django.utils.six import BytesIO

from .forms import UploadImageForm

from PIL import Image
from io import StringIO

def create_image(storage, filename, size=(100, 100), image_mode='RGB', image_format='PNG'):
   """
   Generate a test image, returning the filename that it was saved as.

   If ``storage`` is ``None``, the BytesIO containing the image data
   will be passed instead.
   """
   data = BytesIO()
   Image.new(image_mode, size).save(data, image_format)
   data.seek(0)
   if not storage:
       return data
   image_file = ContentFile(data.read())
   return storage.save(filename, image_file)

class UploadImageTests(TestCase):
   def setUp(self):
       super(UploadImageTests, self).setUp()

   def test_valid_form(self):
       '''
       valid post data should redirect
       The expected behavior is to show the image
       '''
       url = reverse('image')
       avatar = create_image(None, 'avatar.png')
       avatar_file = SimpleUploadedFile('front.png', avatar.getvalue())
       data = {'image': avatar_file}
       response = self.client.post(url, data, follow=True)
       image_src = response.context.get('image_src')

       self.assertEquals(response.status_code, 200)
       self.assertTrue(image_src)
       self.assertTemplateUsed('content_upload/result_image.html') 
```

create_image 函数将创建图像，因此您无需提供图像的静态路径。

注意：您可以根据您的代码更新代码。此代码适用于 Python 3.6。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-11-05T09:32:55.440

正如[Django 的官方文档](https://docs.djangoproject.com/en/2.2/topics/testing/tools/#django.test.Client.post)中提到的：

> 提交文件是一种特殊情况。要发布文件，您只需提供文件字段名称作为键，并提供要上传的文件的文件句柄作为值。例如：

```
c = Client()
with open('wishlist.doc') as fp:
    c.post('/customers/wishes/', {'name': 'fred', 'attachment': fp}) 
```

* * *

# 更多信息：如何检查文件是否作为参数传递给某个函数？

在测试时，有时我们希望确保文件作为参数传递给某个函数。

例如

```
...
class AnyView(CreateView):
    ...
    def post(self, request, *args, **kwargs):
        attachment = request.FILES['attachment']
        # pass the file as an argument
        my_function(attachment)
        ... 
```

在测试中，使用[Python 的 mock](https://docs.python.org/3/library/unittest.mock.html)如下：

```
# Mock 'my_function' and then check the following:

response = do_a_post_request()

self.assertEqual(mock_my_function.call_count, 1)
self.assertEqual(
    mock_my_function.call_args,
    call(response.wsgi_request.FILES['attachment']),
) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-11-11T12:10:30.557

如果您想通过文件上传添加其他数据，请按照以下方法

`file = open('path/to/file.txt', 'r', encoding='utf-8')`

```
 data = {
        'file_name_to_receive_on_backend': file,
        'param1': 1,
        'param2': 2,
        .
        .
    }

    response = self.client.post("/url/to/view", data, format='multipart')` 
```

唯一的`file_name_to_receive_on_backend`将作为文件接收，其他参数通常作为后参数接收。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-03-10T22:58:29.827

在 Django 1.7 中，TestCase 存在一个问题，可以通过使用 open(filepath, 'rb') 来解决，但是在使用测试客户端时，我们无法控制它。我认为最好确保 file.read() 总是返回字节。

来源：[https](https://code.djangoproject.com/ticket/23912) ://code.djangoproject.com/ticket/23912，作者：KevinEtienne

如果没有 rb 选项，则会引发 TypeError：

```
TypeError: sequence item 4: expected bytes, bytearray, or an object with the buffer interface, str found 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-07-11T10:30:34.833

```
from rest_framework.test import force_authenticate
from rest_framework.test import APIRequestFactory

factory = APIRequestFactory()
user = User.objects.get(username='#####')
view = <your_view_name>.as_view()
with open('<file_name>.pdf', 'rb') as fp:
    request=factory.post('<url_path>',{'file_name':fp})
force_authenticate(request, user)
response = view(request) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-11-28T20:36:53.990

```
from django.test import Client
from requests import Response

client = Client()
with open(template_path, 'rb') as f:
    file = SimpleUploadedFile('Name of the django file', f.read())
    response: Response = client.post(url, format='multipart', data={'file': file}) 
```

希望这可以帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-15T01:28:03.663

我正在使用 Python==3.8.2，Django==3.0.4，djangorestframework==3.11.0

我试过`self.client.post`但有一个`Resolver404`例外。

以下为我工作：

```
import requests
upload_url='www.some.com/oaisjdoasjd' # your url to upload
with open('/home/xyz/video1.webm', 'rb') as video_file:
    # if it was a text file we would perhaps do
    # file = video_file.read()
    response_upload = requests.put(
        upload_url,
        data=video_file,
        headers={'content-type': 'video/webm'}
    ) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-11T09:56:40.813

我正在使用 django rest 框架，我必须测试多个文件的上传。

我终于通过`format="multipart"`在我的`APIClient.post`请求中使用它来获得它。

```
from rest_framework.test import APIClient
...
    self.client = APIClient()
    with open('./photo.jpg', 'rb') as fp:
        resp = self.client.post('/upload/',
                                {'images': [fp]},
                                format="multipart") 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-12T11:22:51.843

我正在使用 GraphQL，上传测试：

```
with open('test.jpg', 'rb') as fp:
    response = self.client.execute(query, variables, data={'image': [fp]}) 
```

类突变中的代码

```
@classmethod
def mutate(cls, root, info, **kwargs):
    if image := info.context.FILES.get("image", None):
        kwargs["image"] = image
    TestingMainModel.objects.get_or_create(
        id=kwargs["id"], 
        defaults=kwargs
    ) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-09T13:56:58.273

非常方便的[模拟解决方案](https://mock.readthedocs.io/en/latest/)

```
from django.test import TestCase, override_settings
#use your own client request factory
from my_framework.test import APIClient

from django.core.files import File
import tempfile
from pathlib import Path
import mock

image_mock = mock.MagicMock(spec=File)
image_mock.name = 'image.png' # or smt else

class MyTest(TestCase):

    # I assume we want to put this file in storage
    # so to avoid putting garbage in our MEDIA_ROOT 
    # we're using temporary storage for test purposes
    @override_settings(MEDIA_ROOT=Path(tempfile.gettempdir()))
    def test_send_file(self):
        client = APIClient()
        client.post(
            '/endpoint/'
            {'file':image_mock},
            format="multipart"
        ) 
```

# php - 使用邮件功能php发送了多少封电子邮件

> ID：11170437
> 
> 赞同：0
> 
> 时间：2012-06-23T14:50:20.353
> 
> 标签：php, email, while-loop

有什么方法可以从 php 邮件功能中找出已发送电子邮件的总数。我的邮件功能在一个while循环中，我想知道已发送电子邮件的数量。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T15:20:08.527

如果您只想知道在 while 循环中接受投递的邮件数量，请添加一个计数器变量：

```
$mailsSent = 0;
while($condition) {
    if (mail('foo@example.com', 'My Subject', 'My Message')) {
        $mailsSent++;
    }
}
echo $mailsSent; 
```

对于接受投递的邮件总量，您可以在 php.ini 中配置一个日志文件

> **`mail.log`**细绳
> 
> 将记录所有`mail()`调用的日志文件的路径。日志条目包括脚本的完整路径、行号、To 地址和标题。

参考： http: [//php.net/manual/en/mail.configuration.php#ini.mail.log](http://php.net/manual/en/mail.configuration.php#ini.mail.log)

If you want to know the number of mails which actually got sent, check the sendmail log.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:55:04.820

**重新编辑答案！请立即检查。一开始我很困惑！**

您可以使用此脚本检查已发送的邮件数量：

```
<?php
    $count = 0;
    while ($condition) {
        if(mail($to, $subject, $message))
            $count++;
    }
    echo "Totally, $count messages have been sent!";
?> 
```

# c++ - C ++通过引用将`this`传递给方法

> ID：11170440
> 
> 赞同：11
> 
> 时间：2012-06-23T14:50:29.167
> 
> 标签：c++, reference, pass-by-reference

我有一个类构造函数，它期望对另一个类对象的引用作为参数传入。我知道当不执行指针算术或不存在空值时，引用比指针更可取。

这是构造函数的头声明：

```
class MixerLine {

private:
    MIXERLINE _mixerLine;

public:

    MixerLine(const MixerDevice& const parentMixer, DWORD destinationIndex); 

    ~MixerLine();
} 
```

这是调用构造函数（MixerDevice.cpp）的代码：

```
void MixerDevice::enumerateLines() {

    DWORD numLines = getDestinationCount();
    for(DWORD i=0;i<numLines;i++) {

        MixerLine mixerLine( this, i );
        // other code here removed
    }
} 
```

MixerDevice.cpp 的编译失败并出现以下错误：

> 错误 3 错误 C2664: 'MixerLine::MixerLine(const MixerDevice &,DWORD)' : 无法将参数 1 从 'MixerDevice *const' 转换为 'const MixerDevice &'

但我认为指针值可以分配给引用，例如

```
Foo* foo = new Foo();
Foo& bar = foo; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-23T14:52:21.523

`this`是一个指针，要获得引用，您必须取消引用 ( `*this`) 它：

```
MixerLine mixerLine( *this, i ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T15:11:35.920

您应该取消引用`this`，因为`this`是指针，而不是引用。要更正您的代码，您应该编写

```
for(DWORD i=0;i<numLines;i++) {

    MixerLine mixerLine( *this, i ); // Ok, this dereferenced
    // other code here removed
} 
```

**注意：**`const`构造函数参数的第二个`const MixerDevice& const parentMixer`是完全没用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T15:20:47.430

如前所述，要从指针获取引用，您需要取消对指针的*引用。*此外（可能是由于复制到问题中？）构造函数不应该编译：

```
const MixerDevice& const parentMixer 
```

那不是正确的类型，引用不能是 const 限定的，只有被引用的类型可以是，所以两个（完全等价的）选项是：

```
const MixerDevice& parentMixer
MixerDevice const& parentMixer 
```

（请注意，可以通过任何一种方式进行`const`限定`MixerDevice`，并且含义完全相同）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T14:52:09.480

指针值可以分配给指针，但不能分配给引用！¹

```
Foo* foo = new Foo();
Foo& bar = *foo;
           ^
           ^ 
```

* * *

[1\. 好吧，它们可以用来初始化对指针的引用，但这不是你在这里所拥有的......]

# python - SQLAlchemy：如何在几个模型之间建立关系？

> ID：11170443
> 
> 赞同：0
> 
> 时间：2012-06-23T14:50:50.790
> 
> 标签：python, sqlalchemy

例如，有这样的模型：

```
class User(Base):
    photo_id = Column(ForeignKey('photo.id'))

class Group(Base):
    photo_id = Column(ForeignKey('photo.id'))

class Photo(Base):
    __tablename__ = 'photo'

    user = relationship('User', backref='photo')
    group = relationship('Group', backref='photo') 
```

但是在最后一个模型中，`User`与 and`Group`的关系并不好，因为在一种情况下，第一个关系将是 None，而在另一种情况下，第二个关系将是 None（因为照片所有者只能是用户或组，但不能同时是两者）......如果有使用外键建模的模型超过 2 个`Photo`- 情况会更糟。如何正确处理这种关系？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:55:21.860

如果您的 User 和 Group 没有存储在同一个表中，那么用两个关系定义它们并没有错。这两个关系意味着两个不同的 SQL 查询，您的情况实际上需要这两个不同的查询。

如果您的用户和组可以存储在同一个表中，则可以使用继承。并创建到父表 [http://docs.sqlalchemy.org/en/latest/orm/inheritance.html的关系商店](http://docs.sqlalchemy.org/en/latest/orm/inheritance.html)

或为该 [http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#reflecting-views创建一个视图](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#reflecting-views)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:45:36.427

使用表继承：[http ://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/declarative.html#joined-table-inheritance](http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/declarative.html#joined-table-inheritance)

我向您推荐这张幻灯片：[http](http://www.slideshare.net/tyler4long/quickorm) ://www.slideshare.net/tyler4long/quickorm 。它是关于基于 SQLAlchemy 的 quick_orm。您将看到如何通过表继承解决相同的问题。

幻灯片 7：许多模型应该与“评论”有关系幻灯片 8：添加一个名为“Commentable”的父类来解决问题。

语法与 SQLAlchemy 不同，但您可以了解主要思想。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:59:10.027

我认为没有一种正确的方法来模拟这种关系。基数、适航性也是要考虑的事实。

对于与您的建模问题非常相似的解决方案，请参阅[通用关联](http://docs.sqlalchemy.org/en/rel_0_7/orm/examples.html#generic-associations)示例。这些示例起初可能看起来有些复杂，但是如果您阅读 Mike 的关于[Polymorphic Associations with SQLAlchemy](http://techspot.zzzeek.org/2007/05/29/polymorphic-associations-with-sqlalchemy/)的博客，应该很清楚那里发生了什么。您最终会得到一些不同的模型，并且通过单个属性（或）导航回`Photo`正确的父级可能无法实现，但是您真的需要从 的一侧导航关系吗？`parent``owner``Photo`

# f# - F# 自定义类型提供程序：“容器类型已设置”错误

> ID：11170446
> 
> 赞同：6
> 
> 时间：2012-06-23T14:51:16.107
> 
> 标签：f#, type-providers

最近我参加了 Keith Battochi 关于类型提供程序的教程，他在 MSDN 教程中介绍了 MiniCsv 类型提供程序的一个变体。不幸的是，我的笔记本电脑不可用，所以我不得不尽可能地手写代码。我相信我已经重新创建了类型提供程序，但我得到了

```
error FS3033: The type provider 'CsvFileTypeProvider+CsvFileTypeProvider' reported an error: container type for 'CsvFileProvider.Row' was already set to 'CsvFileProvider.CsvFile,Filename="events.csv" 
```

当我查看代码时，我看不到如何将 Row 类型添加到容器两次（或添加到其他容器）。删除选定的代码行没有帮助。

这是我在 fsi 中调用代码的方式：

```
#r "CsvFileTypeProvider.dll"
open CsvFileProvider
let eventInfos = new CsvFile<"events.csv">() ;; 
```

这是代码本身：

```
module CsvFileTypeProvider
open Samples.FSharp.ProvidedTypes
open Microsoft.FSharp.Core.CompilerServices

let getType str =
    if System.DateTime.TryParse(str, ref Unchecked.defaultof<_>) then
        typeof<System.DateTime>, (fun (str:Quotations.Expr) -> <@@ System.DateTime.Parse(%%str) @@>)
    elif System.Int32.TryParse(str, ref Unchecked.defaultof<_>) then
        typeof<System.Int32>, (fun (str:Quotations.Expr) -> <@@ System.Int32.Parse(%%str) @@>)
    elif System.Double.TryParse(str, ref Unchecked.defaultof<_>) then
        typeof<System.Double>, (fun (str:Quotations.Expr) -> <@@ System.Double.Parse(%%str) @@>)
    else
        typeof<string>, (fun (str:Quotations.Expr) -> <@@ %%str @@>)

[<TypeProvider>]
type CsvFileTypeProvider() =
    inherit TypeProviderForNamespaces()

    let asm = typeof<CsvFileTypeProvider>.Assembly
    let ns = "CsvFileProvider"

    let csvFileProviderType = ProvidedTypeDefinition(asm, ns, "CsvFile", None)
    let parameters = [ProvidedStaticParameter("Filename", typeof<string>)]

    do csvFileProviderType.DefineStaticParameters(parameters, fun tyName [| :? string as filename |] ->
        let rowType = ProvidedTypeDefinition(asm, ns, "Row", Some(typeof<string[]>))

        let lines = System.IO.File.ReadLines(filename) |> Seq.map (fun line -> line.Split(','))
        let columnNames = lines |> Seq.nth 0
        let resultTypes = lines |> Seq.nth 1 |> Array.map getType

        for idx in 0 .. (columnNames.Length - 1) do
            let col = columnNames.[idx]
            let ty, converter = resultTypes.[idx]
            let prop = ProvidedProperty(col, ty)
            prop.GetterCode <- fun [row] -> converter <@@  (%%row:string[]).[idx] @@>
            rowType.AddMember(prop)

        let wholeFileType = ProvidedTypeDefinition(asm, ns, tyName, Some(typedefof<seq<_>>.MakeGenericType(rowType)))
        wholeFileType.AddMember(rowType)

        let ctor = ProvidedConstructor(parameters = []) // the *type* is parameterized but the *constructor* gets no args
        ctor.InvokeCode <- //given the inputs, what will we get as the outputs? Now we want to read the *data*, skip the header
            fun [] -> <@@ System.IO.File.ReadLines(filename) |> Seq.skip 1 |> Seq.map (fun line -> line.Split(','))  @@>
        wholeFileType.AddMember(ctor)
        wholeFileType
        )

    do base.AddNamespace(ns, [csvFileProviderType])

[<TypeProviderAssembly>]
do() 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T19:38:43.007

定义“行”类型时需要使用另一个构造函数。现有的 ProvidedTypeDefinition 类型公开了两个构造函数：

*   (assembly, namespace, typename, base type) - 定义容器为命名空间的顶级类型。
*   (typename, basetype) - 定义应该添加到其他类型的嵌套类型。

现在 Row 类型是使用第一个构造函数定义的，因此它被视为顶级类型。稍后将此类型作为嵌套添加到 wholeFileType 时引发异常。

# javascript - onBackKeyDown 获取特定页面

> ID：11170456
> 
> 赞同：0
> 
> 时间：2012-06-23T14:52:10.383
> 
> 标签：javascript, jquery, jquery-mobile, cordova

我想使用 backkey @ android 手机返回到某个特定页面。我的代码（JS）：

```
function onBackKeyDown() {
    currentId = $.mobile.activePage.attr('id');
    if(currentId == "#swipediv"){
    $.mobile.changePage("#home", "slide", false, true);
    }
    else{
    history.go(-1);
    }
} 
```

HTML：

```
<div data-role="page" data-theme="a" id="home">
      <div data-role="header"><h1>Test</h1></div>
        <div data-role="content">
          <p>Home</p>
        </div>

      </div>
    </div>

    <div id="swipediv">
        <div data-role="page" data-theme="a" id="1">
            <div data-role="header"><h1>1</h1></div>
            <div data-role="content">
                <p>1</p>
            </div>
         </div>
    </div> 
```

怎么了 ？有什么建议么？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:06:28.927

您是否正确添加了这样的后退按钮侦听器？

```
 function onDeviceReady() {
        // Register the event listener
        document.addEventListener("backbutton", onBackKeyDown, false);
    } 
```

如果是，那么您检查 pageid`currentId == "#swipediv"`应该使用没有`#` Like this

```
currentId == "swipediv" 
```

# architecture - 讨论 - 客户端服务器应用程序架构

> ID：11170457
> 
> 赞同：2
> 
> 时间：2012-06-23T14:52:11.853
> 
> 标签：architecture, .net-4.0, client-server

我想使用 .Net 4、C# 和 SQL Server 开发基于客户端-服务器的桌面应用程序。

请参阅图片了解我的想法。 ![客户端服务器应用架构](../Images/f3dfa37a02e8ee0eb3232d5a9486d097.png)

将有一个服务器应用程序访问 Windows 服务或 Web 服务。客户端应用程序将具有多文档接口。

以下是我正在考虑的观点 -

1.  客户端应用程序将使用与服务器应用程序的套接字连接，以便从服务器获得身份验证，并跟踪服务器上客户端连接的记录。
2.  该服务将是一个网络服务
3.  成功认证后，客户端应用程序将直接访问 Web 服务，因此服务器不会过载。

我希望您对此提出反馈意见，这是一种实施的好方法还是有更好的方法？我应该使用 Windows 服务而不是 Web 服务吗？我应该对所有数据通信使用套接字连接而不是直接使用 Web 服务吗？

感谢您分享您的时间和智慧。

问候

伊尔凡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:01:14.173

绝对可以为所有客户端/服务器通信使用 Web 服务边界。

[WCF](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx)会做你想做的一切。[您可以使用不同的绑定](http://msdn.microsoft.com/en-us/library/ms733027.aspx)公开多个端点，甚至[自定义它们使用的安全类型](http://msdn.microsoft.com/en-us/library/ms731925.aspx)。

花一些时间深入研究[WCF 文档](http://msdn.microsoft.com/en-us/library/ee354381.aspx)，我想你会发现它非常适合你的架构图，而且你需要的一切都是开箱即用的。

# ruby-on-rails - Rails Activerecord 基于字段值的最后 5 条记录

> ID：11170460
> 
> 赞同：0
> 
> 时间：2012-06-23T14:52:37.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我想获取 transfer = something 的最后 5 条记录。目前我正在使用：`Model.limit(5).order('id desc')`但这显示了`Call.all`. 如何通过添加 where 子句或指定特定值作为查询的一部分来表达这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:57:35.063

简单地

```
Model.where(:transfer => 'something').order('id desc').limit(5) 
```

`created_at`但按或`updated_at`代替订购可能更有意义`id`。

# core-data - UILabel 没有更新

> ID：11170464
> 
> 赞同：0
> 
> 时间：2012-06-23T14:53:38.340
> 
> 标签：core-data, uitableview, reloaddata

我有一个`UITableView`由核心数据填充的。现在，当我单击一个单元格时，它会将我推到另一个视图，我可以在其中编辑该特定索引中的数据，当我返回时，系统要么崩溃，要么不会将更改加载到标签上，任何想法? 下面的代码

```
-(void)viewWillAppear:(BOOL)animated 
{    
    searchCriteria = [[NSMutableString alloc] initWithString:@"clientName"];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"clientName" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Client" inManagedObjectContext:managedObjectContext];
    [fetchRequest setEntity:entity];    
    fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:managedObjectContext sectionNameKeyPath:nil cacheName:@"Root"];

    [self.clientTableView reloadData];
    [super viewWillAppear:animated];    
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    Client * client = [self.fetchedResultsController objectAtIndexPath:indexPath];
    clientNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 0.0, 250.00, 30.0)];
    clientNameLabel.tag = 1;
    clientNameLabel.backgroundColor = [UIColor clearColor];
    clientNameLabel.textColor = [UIColor whiteColor];
    clientNameLabel.font =  [UIFont boldSystemFontOfSize:13];
    clientNameLabel.text = client.clientName;
    [cell.contentView addSubview:clientNameLabel];

    clientAccountNumberLabel = [[UILabel alloc] initWithFrame:CGRectMake(15.0, 35.0, 250.00, 30.00)];
    clientAccountNumberLabel.tag = 2;
    clientAccountNumberLabel.textColor = [UIColor whiteColor];
    clientAccountNumberLabel.backgroundColor = [UIColor clearColor];
    clientAccountNumberLabel.font =  [UIFont boldSystemFontOfSize:13];
    clientAccountNumberLabel.text = client.clientAccountNumber;
    [cell.contentView addSubview:clientAccountNumberLabel];

    clientTelephoneNumberLabel = [[UILabel alloc] initWithFrame:CGRectMake(300.0, 0.0, 250, 30.00)];
    clientTelephoneNumberLabel.tag = 3;
    clientTelephoneNumberLabel.textColor = [UIColor whiteColor];
    clientTelephoneNumberLabel.backgroundColor = [UIColor clearColor];
    clientTelephoneNumberLabel.font =  [UIFont boldSystemFontOfSize:13];
    [cell.contentView addSubview:clientTelephoneNumberLabel];

    addressLine1Label = [[UILabel alloc] initWithFrame:CGRectMake(315.0, 35.0, 250, 30.00)];
    addressLine1Label.tag = 4;
    addressLine1Label.textColor = [UIColor whiteColor];
    addressLine1Label.backgroundColor = [UIColor clearColor];
    addressLine1Label.font =  [UIFont boldSystemFontOfSize:13];
    addressLine1Label.text = client.addressLine1;
    [cell.contentView addSubview:addressLine1Label];

    addressLine2Label = [[UILabel alloc] initWithFrame:CGRectMake(315.0, 35.0, 250, 30.00)];
    addressLine2Label.tag = 5;
    addressLine2Label.textColor = [UIColor whiteColor];
    addressLine2Label.backgroundColor = [UIColor clearColor];
    addressLine2Label.text = client.addressLine2;
    addressLine2Label.font =  [UIFont boldSystemFontOfSize:13];
    [cell.contentView addSubview:addressLine2Label];

    addressLine3Label = [[UILabel alloc] initWithFrame:CGRectMake(315.0, 35.0, 250, 30.00)];
    addressLine3Label.tag = 6;
    addressLine3Label.textColor = [UIColor whiteColor];
    addressLine3Label.backgroundColor = [UIColor clearColor];
    addressLine3Label.font =  [UIFont boldSystemFontOfSize:13];
    addressLine3Label.text = client.addressLine3;
    [cell.contentView addSubview:addressLine3Label];

    addressLine4Label = [[UILabel alloc] initWithFrame:CGRectMake(315.0, 35.0, 250, 30.00)];
    addressLine4Label.tag = 7;
    addressLine4Label.textColor = [UIColor whiteColor];
    addressLine4Label.backgroundColor = [UIColor clearColor];
    addressLine4Label.font =  [UIFont boldSystemFontOfSize:13];
    addressLine4Label.text = client.addressLine4;
    [cell.contentView addSubview:addressLine4Label];

    return cell;
} 
```

崩溃日志如下：

```
2012-06-23 17:08:05.541 iSalesForce[11773:15803] no object at index 1 in section at index 0 
```

您可能会发现其他一些有用的代码是：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [fetchedObjects count];
}

- (float)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 70.0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:01:40.973

问题很可能在于您的 fetchedResultsController 已经过时（您使用的是 ARC 吗？那 fetchedResultsController 是“ `strong`”属性吗？

或者可能只是因为您的 fetchedResultsController 没有对象，并且您坚持在您的“ `numberOfSectionsInTableView`”方法中只有一个对象，而不管“”的真实内容如何`fetchedResultsController`。

试试这个新的和改进的功能：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    if(cell == nil)
    {
        // this should never happen, but just in case...
        NSLog( @"cell is still - unexpectedly - nil" );
    } else {
        if(self.fetchedResultsController == nil)
        {
            NSLog( @"surprise, fetchedResultsController is nil" );
        } else {
            Client * client = nil;
            @try {
                client = [self.fetchedResultsController objectAtIndexPath:indexPath];
            }
            @catch (NSException * e) {
                NSLog( @"exception thrown while trying to fetch something from fetchedResultsController - %@ %@", [e name], [e reason] );
            }
            @finally {
                clientNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 0.0, 250.00, 30.0)];
                clientNameLabel.tag = 1;
                clientNameLabel.backgroundColor = [UIColor clearColor];
                clientNameLabel.textColor = [UIColor whiteColor];
                clientNameLabel.font =  [UIFont boldSystemFontOfSize:13];
                clientNameLabel.text = client.clientName;
                [cell.contentView addSubview:clientNameLabel];

                clientAccountNumberLabel = [[UILabel alloc] initWithFrame:CGRectMake(15.0, 35.0, 250.00, 30.00)];
                clientAccountNumberLabel.tag = 2;
                clientAccountNumberLabel.textColor = [UIColor whiteColor];
                clientAccountNumberLabel.backgroundColor = [UIColor clearColor];
                clientAccountNumberLabel.font =  [UIFont boldSystemFontOfSize:13];
                clientAccountNumberLabel.text = client.clientAccountNumber;
                [cell.contentView addSubview:clientAccountNumberLabel];

                clientTelephoneNumberLabel = [[UILabel alloc] initWithFrame:CGRectMake(300.0, 0.0, 250, 30.00)];
                clientTelephoneNumberLabel.tag = 3;
                clientTelephoneNumberLabel.textColor = [UIColor whiteColor];
                clientTelephoneNumberLabel.backgroundColor = [UIColor clearColor];
                clientTelephoneNumberLabel.font =  [UIFont boldSystemFontOfSize:13];
                [cell.contentView addSubview:clientTelephoneNumberLabel];

                addressLine1Label = [[UILabel alloc] initWithFrame:CGRectMake(315.0, 35.0, 250, 30.00)];
                addressLine1Label.tag = 4;
                addressLine1Label.textColor = [UIColor whiteColor];
                addressLine1Label.backgroundColor = [UIColor clearColor];
                addressLine1Label.font =  [UIFont boldSystemFontOfSize:13];
                addressLine1Label.text = client.addressLine1;
                [cell.contentView addSubview:addressLine1Label];

                addressLine2Label = [[UILabel alloc] initWithFrame:CGRectMake(315.0, 35.0, 250, 30.00)];
                addressLine2Label.tag = 5;
                addressLine2Label.textColor = [UIColor whiteColor];
                addressLine2Label.backgroundColor = [UIColor clearColor];
                addressLine2Label.text = client.addressLine2;
                addressLine2Label.font =  [UIFont boldSystemFontOfSize:13];
                [cell.contentView addSubview:addressLine2Label];

                addressLine3Label = [[UILabel alloc] initWithFrame:CGRectMake(315.0, 35.0, 250, 30.00)];
                addressLine3Label.tag = 6;
                addressLine3Label.textColor = [UIColor whiteColor];
                addressLine3Label.backgroundColor = [UIColor clearColor];
                addressLine3Label.font =  [UIFont boldSystemFontOfSize:13];
                addressLine3Label.text = client.addressLine3;
                [cell.contentView addSubview:addressLine3Label];

                addressLine4Label = [[UILabel alloc] initWithFrame:CGRectMake(315.0, 35.0, 250, 30.00)];
                addressLine4Label.tag = 7;
                addressLine4Label.textColor = [UIColor whiteColor];
                addressLine4Label.backgroundColor = [UIColor clearColor];
                addressLine4Label.font =  [UIFont boldSystemFontOfSize:13];
                addressLine4Label.text = client.addressLine4;
                [cell.contentView addSubview:addressLine4Label];

            }

            Client * client = [self.fetchedResultsController objectAtIndexPath:indexPath];
        }
    }
    return cell;
} 
```

（我实际上并没有对此进行测试……但我确实为您添加了一些新的错误检查和异常处理）

# android - 应用内购买解锁付费功能

> ID：11170466
> 
> 赞同：8
> 
> 时间：2012-06-23T14:54:25.007
> 
> 标签：android, in-app-purchase

我希望发布我的应用程序的两个版本：免费和付费。付费应用程序将具有更多功能，但没有额外的内容。最初我打算在市场上发布两个独立的应用程序，但事实证明很难保持一个代码库并拥有两个独立的应用程序。

应用内购买会是更好的方法吗？所以我发布了一个免费的应用程序，然后允许用户购买额外功能的解锁。这也意味着我不必明确使用 Android 开发的许可部分，因为这是在应用内购买中处理的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-23T15:01:00.447

我想到了三种策略：

1.  **发布两个版本，免费版和付费版。付费版本包含附加功能。**为了使开发更容易，您应该使用[Android 库](http://developer.android.com/tools/projects/index.html#LibraryProjects)。这些可以防止代码重复。

    **优点：**

    *   实现更简单。
    *   像 Android 市场一样在其他市场上工作，因为它不依赖于它。

    **坏处：**

    *   如果用户在免费版本中有一些数据，您必须为付费版本提供导入功能，否则用户将丢失数据。
    *   您必须获得市场上获得不同评论的版本。
2.  **发布两个版本：包含所有功能但某些功能被锁定的免费版本。使用“解锁应用程序”解锁他们，这是一个在市场上发布的简单付费应用程序。**

    **优点：**

    *   实施简单。
    *   像 Android 市场一样在其他市场上工作，因为它不依赖于它。

    **缺点：**

    *   不是那么直观，因为用户安装了一个“无用”的应用程序。
3.  发布一个版本：包含所有功能但某些功能被锁定的免费版本。使用应用内购买解锁它们。 **优点：**

    *   细粒度解决方案：您可以以不同的价格解锁不同的功能。

    **缺点：**

    *   实现起来并不简单，In-App-API 很棘手
    *   没有 Android 市场就无法工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-16T08:46:26.310

你也可以使用两种不同的口味。一个用于免费版本，另一个用于付费版本。无需重写另一个老板项目。

[https://developer.android.com/studio/build/build-variants.html](https://developer.android.com/studio/build/build-variants.html)

# algorithm - 检查碰撞中的重合线

> ID：11170469
> 
> 赞同：-1
> 
> 时间：2012-06-23T14:54:39.150
> 
> 标签：algorithm, actionscript-3

这是对我最后一个问题的某种跟进。我需要找到一种算法来检测线交叉/重叠。

以下代码在大多数情况下运行良好，但不能正确处理重合行：

```
public static function checkLinesIntersection(p_a:Point,p_b:Point,p_c:Point,p_d:Point):Point
{

    // Denominator
    var d:Number = (p_d.y - p_c.y) * (p_b.x - p_a.x) - (p_d.x - p_c.x) * (p_b.y - p_a.y);

    //
    var n_a:Number = (p_d.x - p_c.x) * (p_a.y - p_c.y) - (p_d.y - p_c.y) * (p_a.x - p_c.x);
    var n_b:Number = (p_b.x - p_a.x) * (p_a.y - p_c.y) - (p_b.y - p_a.y) * (p_a.x - p_c.x);

    var ua:Number = n_a / d;
    var ub:Number = n_b / d;

    var p_intersection:Point = new Point();

    //coincidental but also happenes when lines are just aligned on the same plane
    if(d + n_a + n_b == 0){

        //how can i find if the lines really coincide and are not just in alignment, or parallel?

    };
    if ((ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1))
    {
        p_intersection.x = p_a.x + (ua * (p_b.x - p_a.x));
        p_intersection.y = p_a.y + (ua * (p_b.y - p_a.y));
        return p_intersection;
    }
    return null;
} 
```

如何改进代码，以便仅将重合线而非平行线评估为交点？

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:36:23.267

检测两条重合线很容易。您需要做的就是取两个段的较低点，我们称它们为 m1,m2 和较高的点 M1,M2。

现在检查 m1M2 是否与 m2M1 相交。

如果他们不这样做，那么他们就在同一条线上。

现在只需检查较低段的高端是否在较高的段中。 ![插图](../Images/a0efb2039dbc6454a434d2ca275eb408.png)

# mysql - 选择查询的计算字段错误

> ID：11170476
> 
> 赞同：1
> 
> 时间：2012-06-23T14:55:34.267
> 
> 标签：mysql, sql

此查询给我一个错误 #1054 - 'where 子句'中的未知列 'totalamount'

```
 SELECT (amount1 + amount2) as totalamount 
 FROM `Donation` 
 WHERE totalamount > 1000 
```

我知道我可以通过使用 group by 子句来解决此错误，并将 where 条件替换为 having 子句。但是除了使用having子句之外还有其他解决方案吗？如果 group by 是唯一的解决方案，那么我想知道为什么我必须使用 group by 子句，即使我没有使用任何聚合函数

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:02:10.120

我不希望 MySQL 会给出该错误消息，但许多其他数据库会给出。在其他数据库中，您可以通过重复列定义来解决它：

```
SELECT  amount1 + amount2 as totalamount 
FROM    Donation
WHERE   amount1 + amount2 > 1000 
```

或者您可以使用子查询来避免重复：

```
SELECT  totalamount 
FROM    (
        select  amount1 + amount2 as totalamount
        ,       *
        from    Donation
        ) as SubQueryAlias
WHERE   totalamount  > 1000 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!2/ce40c/2/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:58:46.753

没门。

**WHERE**过滤列，而**HAVING**过滤聚合。

见[SQL 有](http://www.w3schools.com/sql/sql_having.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T15:03:25.310

根据 SQL 方言，您不能将派生列放在 where 子句中。

而是使用这个 where 子句。

```
WHERE (amount1 + amount2) > 1000 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T15:11:07.457

我建议您使用 Andomar 答案中的一种变体。

MySQL 允许的是这个（不要使用它，它不是标准的，几乎任何其他 DBMS 都不允许它）：

```
SELECT (amount1 + amount2) AS totalamount 
  FROM Donation 
  HAVING totalamount > 1000 ; 
```

# python - python和C之间的通信

> ID：11170478
> 
> 赞同：0
> 
> 时间：2012-06-23T14:56:44.523
> 
> 标签：python, c

我有一个用c开发的命令行程序。可以说，我有一个用 C 编写的解析器。现在我正在用 python 中的 gui 开发一个项目，我需要该解析器用于 python 项目。在 c 中，我们可以调用系统调用并将输出重定向到 system.out 或文件。有什么办法可以做到这一点蟒蛇？我有c程序的代码和可执行文件。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:00:16.830

要调用其他程序并与它们交互，请使用该[`subprocess`](http://docs.python.org/library/subprocess.html)模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T15:00:53.320

当然可以，去一个子进程。文档在这里：[http ://docs.python.org/library/subprocess.html#module-subprocess](http://docs.python.org/library/subprocess.html#module-subprocess)

# python - Mongoengine 整数 id 和用户创建

> ID：11170479
> 
> 赞同：0
> 
> 时间：2012-06-23T14:56:47.547
> 
> 标签：python, django, mongodb, mongoengine, nosql

1.  MongoDB 使用 string(hash) _id 字段而不是整数；那么，如何获得经典的 id 主键？每次创建类实例时增加一些变量？

    ```
    class Post(Document):
        authors_id = ListField(IntField(required=True), required=True)
        content = StringField(max_length=100000, required=True)
        id = IntField(required=True, primary_key=True)

        def __init__(self):
            //what next? 
    ```

2.  尝试创建新用户引发异常：

    ```
    mongoengine.queryset.OperationError: Tried to save duplicate unique keys 
    (E11000 duplicate key error index: test.user.$_types_1_username_1
     dup key: { : "User", : "admin" }) 
    ```

代码：

```
user = User.create_user(username='admin', email='example@mail.com',
                        password='pass')
user.is_superuser = True
user.save() 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T21:39:35.787

您可以使用它`SequenceField`来提供此功能。但如前所述，增加 id 不能很好地扩展，它们真的需要吗？你不能使用`ObjectId`或代替蛞蝓吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T19:10:13.957

如果您想使用递增的整数 ID，执行此操作的方法如下所述：

[http://www.mongodb.org/display/DOCS/How+to+Make+an+Auto+Incrementing+Field](http://www.mongodb.org/display/DOCS/How+to+Make+an+Auto+Incrementing+Field)

这不适用于各种大型数据库/应用程序，但它适用于小型或中型应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T15:13:43.297

1）如果你真的想这样做，你必须覆盖保存文档的 mongoengine 方法，使其查找具有最高 id 值的文档并使用该 id+1 保存文档。这将产生开销（并且每次写入都会额外读取一次），因此我不鼓励您遵循此路径。您还可能遇到重复 ID 的问题（如果您同时保存两条记录，您将读取最后一个 id 两次 - 比如说 1 并保存两次 id 1+1 = 2 => 这真的很糟糕 - 避免这种情况问题你需要在每次插入时锁定整个集合，通过失去性能）。

2）您不能使用相同的用户名保存多个用户（正如错误消息告诉您的那样） - 而且您已经有一个名为“admin”的用户。

# php - 自定义 WP 循环的正确 PHP 语法

> ID：11170480
> 
> 赞同：1
> 
> 时间：2012-06-23T14:56:51.053
> 
> 标签：php, wordpress, variables, loops

我正在尝试在我的 wordpress 网站中插入一个排序选项。我已经让它工作了，但需要帮助正确地使用它和 wordpress 循环。目前，我有：

**在页面上，有按字母顺序或时间顺序排序的选项：**

```
<a href="?sort=date">Newest</a>
<a href="?sort=title">Alphabetical</a> 
```

**排序代码从这里开始，放置在循环上方：**

```
<?php $sort= $_GET['sort']; 
    if($sort == "title") { $order= "'orderby'=>'title','order'=>ASC'"; } 
    elseif($sort == "date") { $order= "'orderby'=>'date'"; } 
    else{ $order= "'orderby'=>'date','order'=>'DESC'"; } 
?> 
```

*注意：我很确定问题出在变量 $order 上面*

**Wordpress 循环使用变量`$order`作为参数**

```
<?php $loop = new WP_Query( array( $order, 'post_type' => 'films', 'post_parent' => 0, 'posts_per_page' => -1 ) ); ?>

<?php while ( $loop->have_posts() ) : $loop->the_post(); ?>

    Wordpress loop stuff here

<?php endwhile; ?> 
```

循环正确显示项目，但排序链接不起作用。这段代码与 query_posts 配合得很好，但我试图让它适用于 WP_Query（上图）。这里有什么想法吗？

**更新**：这种技术在使用如下 query_posts 时效果很好（但我仍然需要它为 WP_Query 工作）：

```
<?php $sort= $_GET['sort']; 
    if($sort == "title") { $order= "&orderby=title&order=ASC"; } 
    elseif($sort == "date") { $order= "&orderby=date"; } 
    else{ $order= "&orderby=date&order=DESC"; } 
?>

<?php $posts = query_posts($query_string . $order); ?>
<?php if(have_posts()) : while(have_posts()) : the_post(); ?>
       Wordpress Stuff Here
<?php endwhile; ?>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:37:50.943

~~`WP_Query`期望参数的关联数组 ( `array('param' => 'value')`)，而 query_posts 只接受“查询字符串” ( `"param=value&param=value"`)。您正在混合这两个选项，这就是它不起作用的原因。您需要将`$order`变量更改为数组而不是字符串，例如：`$order = array('orderby' => 'title', 'order' => ASC');`.~~

上面的答案不完整，可能会产生误导。`WP_Query`文档在这里：[https](https://codex.wordpress.org/Class_Reference/WP_Query) ://codex.wordpress.org/Class_Reference/WP_Query 。这个类接受两种风格，但它们的形式必须有所不同。我不知道该怎么做，因为它不是写在类文档中，但你最好使用数组，所以：

```
if($sort == "title") { $order = array('orderby' => 'title', 'order' => 'ASC'); } 
elseif($sort == "date") { $order= array('orderby' => 'date'); } 
else{ $order= array('orderby' => 'date', 'order' => 'DESC'); } 
```

仅供参考，在两种类型之间转换使用函数`parse_str()`： http: [//php.net/manual/en/function.parse-str.php](http://php.net/manual/en/function.parse-str.php)和`http_build_query()`：[http ://www.php.net/manual/en/function.http-build-查询.php](http://www.php.net/manual/en/function.http-build-query.php)。

# linux - Qimage 到 cv::Mat 转换的奇怪行为

> ID：11170485
> 
> 赞同：4
> 
> 时间：2012-06-23T14:57:21.803
> 
> 标签：linux, qt, opencv, qimage

我正在尝试创建一个应用程序，我试图在其中集成 opencv 和 qt。

我使用以下代码成功地将 cv::Mat 转换为 QImage：

```
void MainWindow::loadFile(const QString &fileName)
{
    cv::Mat tmpImage = cv::imread(fileName.toAscii().data());
    cv::Mat image;

    if(!tmpImage.data || tmpImage.empty())
    {
        QMessageBox::warning(this, tr("Error Occured"), tr("Problem loading file"), QMessageBox::Ok);
        return;
    }

/* Mat to Qimage */
    cv::cvtColor(tmpImage, image, CV_BGR2RGB);
    img = QImage((const unsigned char*)(image.data), image.cols, image.rows, QImage::Format_RGB888);

    imgLabel->setPixmap(QPixmap::fromImage(img));
    imgLabel->resize(imgLabel->pixmap()->size());

    saveAsAct->setEnabled(true);
} 
```

但是，当我尝试使用以下代码将 QImage 转换为 cv::Mat 时：

```
bool MainWindow::saveAs()
{
    if(fileName.isEmpty())
    {
        QMessageBox::warning(this, tr("Error Occured"), tr("Problem loading file"), QMessageBox::Close);
        return EXIT_FAILURE;
    }else{
        outputFileName = QFileDialog::getSaveFileName(this, tr("Save As"), fileName.toAscii().data(), tr("Image Files (*.png *.jpg *.jpeg *.bmp)\n *.png\n *.jpg\n *.jpeg\n *.bmp"));

    /* Qimage to Mat */
    cv::Mat mat = cv::Mat(img.height(), img.width(), CV_8UC4, (uchar*)img.bits(), img.bytesPerLine());
    cv::Mat mat2 = cv::Mat(mat.rows, mat.cols, CV_8UC3 );
    int from_to[] = {0,0,  1,1,  2,2};
    cv::mixChannels(&mat, 1, &mat2, 1, from_to, 3);

    cv::imwrite(outputFileName.toAscii().data(), mat);
}

saveAct->setEnabled(true);
return EXIT_SUCCESS;
} 
```

我没有成功，结果是完全混乱的形象。在我搜索的网络中，我看到人们正在使用这种方式，而没有提及任何具体问题。有人对可能导致问题的原因有任何想法吗？提前致谢。

西奥多

PS我在带有gnome-3.4的Arch Linux系统下使用opencv 2.4和Qt 4.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T17:37:14.797

只需找出将 QImage**复制**（而不是引用）到 cv::Mat的“正确”解决方案

马丁贝克特的答案几乎是正确的

```
for (int i=0;i<image.height();i++) {
    memcpy(mat.ptr(i),image.scanline(i),image.bytesperline());
} 
```

我没有看到完整的代码，但我猜你可能想这样使用它

```
cv::Mat mat(image.height(), image.width(), CV_8UC3);
for (int i=0;i<image.height();i++) {
        memcpy(mat.ptr(i),image.scanline(i),image.bytesperline());
    } 
```

但是这段代码存在一个问题，由 cv::Mat 分配的内存**可能**与 QImage 的“bytesperline”不同

我找到的解决方案是先引用 QImage ，然后克隆它

```
return cv::Mat(img.height(), img.width(), format, img.bits(), img.bytesPerLine()).clone(); 
```

Martin Beckett 建议的解决方案在大多数情况下都可以产生正确的结果，直到我遇到它时才注意到有错误。

无论如何，我希望这是一个“正确”的解决方案。如果您发现任何错误，请让每个人都知道，以便我们可以进行更改以改进代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:50:06.990

[感谢 jose](http://opencv-users.1802565.n2.nabble.com/convert-cv-Mat-to-QImage-td7223286.html)，这就是我从这里得到的。它帮助我克服这一点。

要在 Qt (QImage) 中可视化 OpenCV 图像 (cv::Mat)，您必须按照以下步骤操作：

1.  反转颜色序列：`cv::cvtColor(imageBGR, imageRGB, CV_BGR2RGB);`
2.  将 OpenCV 格式更改为 Qt：`QImage qImage((uchar*) imageRGB.data, imageRGB.cols, imageRGB.rows, imageRGB.step, QImage::Format_RGB888);`
3.  使用 QPainter 渲染图像。

请注意 QImage::Format 的使用。阅读有关此问题的 Qt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T16:49:47.403

opencv 图像是阶梯式的，因此每一行都以 32 位的倍数开始，这使得内存访问更快。如果您使用的是 3 字节/像素格式，那么除非您的宽度是 4 的倍数的 1/3，否则您将在每行的末尾有“备用”内存

安全的方法是一次复制一行图像数据。opencv mat.ptr(row) 返回一个指向每一行开头的指针，QImage .scanline(row) 成员做同样的事情

请参阅[如何在 Qt 中输出此 24 位图像](https://stackoverflow.com/questions/4730563/how-to-output-this-24-bit-image-in-qt)

编辑：类似的东西

```
for (int i=0;i<image.height();i++) {
    memcpy(mat.ptr(i),image.scanline(i),image.bytesperline());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T21:18:06.160

从[这个源代码](http://code.google.com/p/qt-opencv-multithreaded/source/browse/trunk/src/MatToQImage.cpp?spec=svn75&r=75)

```
QImage MatToQImage(const Mat& mat)
{
    // 8-bits unsigned, NO. OF CHANNELS=1
    if(mat.type()==CV_8UC1)
    {
        // Set the color table (used to translate colour indexes to qRgb values)
        QVector<QRgb> colorTable;
        for (int i=0; i<256; i++)
            colorTable.push_back(qRgb(i,i,i));
        // Copy input Mat
        const uchar *qImageBuffer = (const uchar*)mat.data;
        // Create QImage with same dimensions as input Mat
        QImage img(qImageBuffer, mat.cols, mat.rows, mat.step, QImage::Format_Indexed8);
        img.setColorTable(colorTable);
        return img;
    }
    // 8-bits unsigned, NO. OF CHANNELS=3
    if(mat.type()==CV_8UC3)
    {
        // Copy input Mat
        const uchar *qImageBuffer = (const uchar*)mat.data;
        // Create QImage with same dimensions as input Mat
        QImage img(qImageBuffer, mat.cols, mat.rows, mat.step, QImage::Format_RGB888);
        return img.rgbSwapped();
    }
    else
    {
        qDebug() << "ERROR: Mat could not be converted to QImage.";
        return QImage();
    }
} // MatToQImage() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T17:44:06.343

我想你可能会觉得这很有用。[http://www.jdxyw.com/?p=1480](http://www.jdxyw.com/?p=1480)

它使用 IplImage 来获取数据，但您可以使用 cv::Mat 和 Mat.data 来获取指向原始矩阵的指针。我希望你会发现这很有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-30T18:05:03.753

如果您仍在寻找解决方案。这是一个：

Cv::Mat 到 QImage ：

```
QImage Mat2QImage(cv::Mat &image )
{
    QImage qtImg;
    if( !image.empty() && image.depth() == CV_8U ){
        if(image.channels() == 1){
            qtImg = QImage( (const unsigned char *)(image.data),
                            image.cols,
                            image.rows,
                            QImage::Format_Indexed8 );
        }
        else{
            cvtColor( image, image, CV_BGR2RGB );
            qtImg = QImage( (const unsigned char *)(image.data),
                            image.cols,
                            image.rows,
                            QImage::Format_RGB888 );
        }
    }
    return qtImg; 
} 
```

对于 QImage 到 cv::Mat 。

```
cv::Mat QImage2Mat(QImage &image) {

cv::Mat cvImage;
  switch (image.format()){
  case QImage::Format_RGB888:{
      cvImage = cv::Mat(image.height(),
                        image.width(),
                        CV_8UC3,
                        image.bits(),
                        image.bytesPerLine());
      cv::cvtColor(cvImage, cvImage, CV_RGB2BGR);
      return cvImage;
  }
  case QImage::Format_Indexed8:{
      cvImage = cv::Mat(image.height(),
                        image.width(),
                        CV_8U,
                        image.bits(),
                        image.bytesPerLine());
      return cvImage;
  }
  default:
      break;
  }
  return cvImage;
} 
```

# android - 在 AndEngine 中排队多个实体修饰符

> ID：11170486
> 
> 赞同：3
> 
> 时间：2012-06-23T14:57:33.733
> 
> 标签：android, andengine

我试图让一个精灵（下面的“指针”）沿着两条路径，一个接一个。这是我的代码：

```
 scene.attachChild(pointer);

    pointer.clearEntityModifiers();
    pointer.registerEntityModifier(new MoveModifier(
        1.0f, 540, 960, 1000, 1000,
        new IEntityModifierListener() {
            public void onModifierStarted(IModifier<IEntity> pModifier, IEntity pItem) {}
            public void onModifierFinished(IModifier<IEntity> pModifier, IEntity pItem) {
                clickSound.play();

                pointer.clearEntityModifiers();
                pointer.registerEntityModifier(new MoveModifier(
                    1.0f, pointer.getX(), pointer.getY(), 500, 2500,
                    new IEntityModifierListener() {
                        public void onModifierStarted(IModifier<IEntity> pModifier, IEntity pItem) {}
                        public void onModifierFinished(IModifier<IEntity> pModifier, IEntity pItem) {
                            pointer.clearEntityModifiers();
                            pointer.detachSelf();
                        }
                    },
                    EaseCubicInOut.getInstance()
                ));
            }
        },
        EaseCubicInOut.getInstance()
    )); 
```

指针按预期沿着第一条路径移动，然后 clickSound 播放，然后什么也没有发生。第二个 MoveModifier 没有任何效果。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T03:34:19.780

我不确定您的代码为什么不起作用，但我认为您可以使用以下方法实现相同的目的`SequenceEntityModifier`：

```
scene.attachChild(pointer);

    pointer.clearEntityModifiers();
    pointer.registerEntityModifier(new SequenceEntityModifier(
        new MoveModifier#1(...),
        new MoveModifier#2(...))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T00:27:26.827

我的第一个猜测是，之后的代码`pointer.clearEntityModifiers();`不再执行，因为它取消了修饰符的注册。我只是在这里大声思考，所以如果我错了，请告诉我。也许您可以尝试记录一些内容以查看该方法是否在此行之后返回。就像是：

```
pointer.clearEntityModifiers();
Log.v("EntityModifier", "the method continues..."); 
```

由于从内部访问的变量的状态，我总是发现很难管理内部类定义。就像你的情况一样`pointer`。如果没有其他方法，您仍然可以尝试一次完成所有操作。因此，与其处理第一个修饰符侦听器并注册另一个，不如创建您自己的侦听器，并在某处使用一个标志来告诉它要做什么并重用该侦听器：

```
public class MyModifierListener extends IEntityModifierListener{

    private Pointer pointer;   // declare your pointer, so you have a reference within the listener
    private boolean firstRun;  // a flag to check if it is the first time the modifier is used

    public MyModifierListener(Pointer pointer){
        super();
        this.pointer = pointer;  // init the pointer within the constructor
        this.firstRun = true;    // should be true the first time
    }

    public void onModifierStarted(IModifier<IEntity> pModifier, IEntity pItem) {
    }

    public void onModifierFinished(IModifier<IEntity> pModifier, IEntity pItem) {
        if(firstRun){
             clickSound.play();
         firstRun=false;
             pointer.registerEntityModifier(new MoveModifier(1.0f, pointer.getX(), pointer.getY(), 500, 2500, this), EaseCubicInOut.getInstance());
        }else{
             pointer.detachSelf();
        }
    }
} 
```

并像这样使用它：

```
MyModifierListener myListener = new MyModifierListener(pointer);
pointer.registerEntityModifier(new MoveModifier(1.0f, 540, 960, 1000, 1000,     myListener), EaseCubicInOut.getInstance()); 
```

我无法对此进行测试，所以这些只是疯狂的猜测。告诉我你是否发现了什么。

问候克里斯托夫

# javascript - 在 Sencha touch 2.0 中使用 Ajax 请求获取 Cookie

> ID：11170488
> 
> 赞同：0
> 
> 时间：2012-06-23T14:57:40.553
> 
> 标签：javascript, ajax, cookies, extjs, sencha-touch-2

我正在使用 Sencha touch 2.0 开发一个网络移动项目

我提出了一个ajax请求如下：

```
Ext.Ajax.request({
  url: myUrl,
  params: {
    format: 'xml',
    callback: 'success'
  },
  method :'POST',
  xmlData :MyXMLData
  proxy:{
    type: 'ajax',
    reader:{
      type: 'xml',
      rootProperty:'ns2:user'
    }
  }, 
```

在服务器端，我设置了以下标头：

```
header("Access-Control-Allow-Origin: *"); 
```

服务器返回一个 XML 响应和 cookie

通过使用 Chrome 的调试工具，我可以看到返回了各种 Set-Cookie 标头

问题是如何获取这些 Cookie 以便与其他请求一起设置？

笔记：

我尝试了 response.getAllResponseHeaders() 但这不适用于 Set-Cookies。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:18:27.147

在这里找到答案：[https ://stackoverflow.com/a/7189502/1106877](https://stackoverflow.com/a/7189502/1106877)

不幸的是，Sencha 论坛的答案几乎没有提供有关如何执行此操作的指导。在 Sencha Touch 中，上面链接的等效解决方案是：

```
Ext.Ajax.request({
            url: 'http://myurl/log_user_in.json',
            params: { username: user, password: pass, app_id: id },
            withCredentials: true,
            useDefaultXhrHeader: false,
            method: "POST" }); 
```

它也适用于使用 Ajax 的商店代理。

确保 withCredentials 为 true 并且 useDefaultXhreader 为 false。这允许您的 ajax 请求查找、设置和请求可用的 cookie。当然，所有这些都假设您的服务器已设置为跨域 Ajax 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T09:14:03.497

As far as I know , you can send the cookie to the server which is in a different domain by making a cross domain AJAX call.Just include

```
 withCredentials : true,
    useDefaultXhrHeader : false, 
```

The set-Cookie value can be seen in request and response headers , but it cannot be accessed through javascript if the client and server are on different servers.

# c# - C# listView Control LargeIcon View without columns / without subitems：如何在MiddleCenter对齐项目文本？

> ID：11170489
> 
> 赞同：1
> 
> 时间：2012-06-23T14:57:49.983
> 
> 标签：c#, listview, controls, listviewitem, text-alignment

我在 LargeIcon 视图中有一个 System.Windows.Forms ListView 控件，元素的文本奇怪地左对齐显示。到目前为止，我发现 ListView 控件没有属性可以对齐 ListViewItems 中间或中间中心的文本。我的 ListView 中没有列，也没有子项可以通过 header 属性来管理它（因为 LargeIcon 视图）。

我将如何允许用户将 ListViewItem 移动到我的 ListView 中的另一个位置？不知何故，所有项目似乎都是自动捕捉的，不管我是否使用 AutoArrange。如果我不使用 AutoArrange，ListViewItems 只是左对齐，只有 ListView 的最左边框用于显示项目，并且会出现一个长的垂直滚动条（不是有意的）。但是，在这两种情况下，用户似乎都无法将 LargeIcon 项移动到 ListView 中的另一个位置。所有项目都固定在它们的位置上。关于如何改变这种行为的任何想法？

# git - Git 在提交之前不会同步文件，即使在不同的分支中签出也是如此

> ID：11170491
> 
> 赞同：1
> 
> 时间：2012-06-22T23:40:05.910
> 
> 标签：git, branch

好的，我在 Windows 上有 git 1.7.11.1，我有一个带有 2 个分支的本地测试存储库。一是掌握index.php和help.php。然后我创建另一个名为 slave 的分支 :)

我从 git 运行`bash rm help.php`，它从文件夹中消失了，但我什么也没做。我切换到 checkout master 分支，它应该恢复文件 help.php 因为它没有在 master 分支中修改，不是吗？

它不这样做。当我回到从属分支并提交然后切换到结帐主时，会出现 help.php。这是它应该工作的方式吗？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:11:44.430

这听起来像`help.php`in的版本`master`并且`slave`是相同的版本，否则 git 不会让你更改分支。

未暂存和暂存的更改尚未提交到任何分支，因此，如果没有冲突，git 将允许您在分支之间进行这些更改。如果您已提交删除到，`slave`那么文件将在您切换时返回`master`。

实际上，您可以使用以下命令“撤消”删除（在任一分支上）：

```
git checkout -- help.php 
```

这会将索引版本检出`help.php`到您的工作树中。

如果您已暂存但未提交删除，则必须使用以下命令检查`HEAD`版本：

```
git checkout HEAD -- help.php 
```

# ios - 如何在委托函数中处理多个 MKOverlay

> ID：11170493
> 
> 赞同：0
> 
> 时间：2012-06-23T14:58:33.423
> 
> 标签：ios, xcode, mkoverlay

我想要一个带有两个不同叠加层的 MKMapView。

首先，我有一个“地图上的图像叠加层”（TileOverlay），其次我想在地图上绘制一条路线作为叠加层。

如果我在两个不同的项目中执行此操作，一切正常（一个带有图像叠加层，另一个带有路径叠加层）

现在，我想知道如果我合并我的项目，viewForOverlay 委托函数应该是什么样子？

对于我的图像（平铺）覆盖，我目前看起来像这样：

```
- (MKOverlayView *) mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{    
    TileOverlayView *tileView = [[TileOverlayView alloc] initWithOverlay:overlay];
    tileView.tileAlpha = 1.0;
    return tileView;
} 
```

对于我的路线 Overlay，它看起来像这样：

```
- (MKOverlayView*)mapView:(MKMapView *)mapView viewForOverlay:(id<MKOverlay>)overlay 
{
    MKPolylineView *polylineView = [[MKPolylineView alloc] initWithPolyline:overlay];
    polylineView.lineJoin = kCGLineJoinRound;
    polylineView.strokeColor = [[UIColor blueColor] colorWithAlphaComponent:0.4];
    return polylineView;
} 
```

现在，如果我想将这些“合并”（到一个项目中），这种方法应该是什么样子？

```
 - (MKOverlayView*)mapView:(MKMapView *)mapView viewForOverlay:(id<MKOverlay>)overlay 
{
    //what comes here?
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T15:19:13.117

您可以通过首先检查传递给您的方法的叠加层类型来处理这种情况`mapView:viewForOverlay:`，如下所示：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay {

    if ([overlay isKindOfClass:[MKPolyline class]]) {   

        MKPolylineView *polylineView = [[MKPolylineView alloc] initWithPolyline:overlay];
        polylineView.lineJoin = kCGLineJoinRound;
        polylineView.strokeColor = [[UIColor blueColor] colorWithAlphaComponent:0.4];
        return polylineView;

    } else {

        TileOverlayView *tileView = [[TileOverlayView alloc] initWithOverlay:overlay];
        tileView.tileAlpha = 1.0;
        return tileView;
    } 
```

# emacs - 控制台模式下的emacs不起作用

> ID：11170498
> 
> 赞同：1
> 
> 时间：2012-06-23T14:59:13.253
> 
> 标签：emacs

当我在控制台模式或带有 -nw 选项的终端中启动 emacs 时，emacs 在终端中启动，但没有任何键起作用。我无法输入任何内容，甚至无法通过 Cx Cc 退出。虽然我可以看到一个闪烁的光标。相同的 emacs 在 GUI 模式下工作正常。任何线索都会有所帮助。我正在运行 debian 2.6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T03:10:58.453

我终于通过安装 emacs23-nox 解决了这个问题。可能它安装了任何缺少的依赖项。现在在终端模式下启动 emacs 可以工作。有趣的是，当我再次卸载并安装 emacs 时，并没有解决问题。无论如何，我都准备好了。

# javascript - 在 dom 中移动 div 的最快方法是什么？

> ID：11170501
> 
> 赞同：1
> 
> 时间：2012-06-23T14:59:49.147
> 
> 标签：javascript, jquery, html, dom

在 dom 中移动 div 时我有点迷茫。我基本上需要改变一些div的顺序。我应该删除它然后以某种方式重新插入它，还是有更好的方法将它移动到 dom 树中。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T15:06:50.270

如果您只需要移动它，并且不需要使用 JavaScript 对元素进行任何触发回流的更改，只需使用`appendChild()`.

另一方面，如果您需要对元素进行更改，更新其属性或“物理”尺寸会触发文档重排，那么值得将其从 DOM 中删除并进行更改，然后使用`appendChild()`或重新插入`insertBefore()`。

请记住，已经存在一个文档重排，只需重新定位元素，但如果要进行任何其他更改，则尝试在重新插入之前将元素/节点作为 documentFragment 进行“幕后”操作。

参考：

*   [`appendChild()`](https://developer.mozilla.org/en/DOM/Node.appendChild).
*   [`insertBefore()`](https://developer.mozilla.org/en/DOM/Node.insertBefore).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T15:04:33.003

您不需要删除它，您可以使用`appendChild`or`insertBefore`或 jQuery 方法重新定位节点，例如`insertAfter`, 等。

例如：

```
var newOrder = ['id2', 'id1', 'id4', 'id3'];
var container = document.getElementById('container');

for(var i = 0, l=newOrder.length; i<l; i++) {
    container.appendChild(document.getElementById(newOrder[i]));
} 
```

这会将具有 id 的节点移动`id*`到容器的末尾，但按照定义的顺序`newOrder`

# apache-flex - 如何包含其他编译器选项“includes”和“include-libraries”？

> ID：11170503
> 
> 赞同：0
> 
> 时间：2012-06-23T14:59:50.143
> 
> 标签：apache-flex

我如何包含附加的编译器选项“includes”或“include-libraries”？我想包含一个名为 myClass 的类或包资产。所以我想要我必须在附加编译器参数区域中声明的内容。谢谢！

# php - PHP Regex 拆分 SQL 字段列表

> ID：11170505
> 
> 赞同：6
> 
> 时间：2012-06-23T15:00:03.723
> 
> 标签：php, regex

我正在寻找一个正则表达式来从 SQL SELECT 语句中拆分字段列表。

我已经从查询的其余部分中提取了字段列表，所以我留下了一个可能看起来像这样的字符串：

```
field1,field2,field3,CONCAT(field1,field2) AS concatted,IF(field1 = field2,field3,field4) AS logic 
```

我认为合乎逻辑的方法是将字符串拆分为逗号，前提是逗号没有出现在括号内，所以我只需要找到正确的正则表达式来做到这一点......？

我试图实现的最终结果是找出哪些字段似乎是从表中直接选择的，哪些字段是由 SQL 表达式组成的，以便稍后我可以决定是否使用 WHERE 或 HAVING 子句过滤它们.

获得字段列表后，我可以检查是否存在“AS”关键字，尽管它并不完美，但应该可以使用我编写 SQL 的方式。

（**建议**另一种方法来区分不是表达式但有别名的字段与可能没有别名的表达式，或者可能是但不使用'AS'的表达式）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T15:03:09.617

这个正则表达式应该工作：

```
/,(?![^()]*+\\))/ 
```

PHP中的一个示例实现，在这里：

```
$vv = 'field1,field2,field3,CONCAT(field1,field2) AS concatted,IF(field1 = field2,field3,field4) AS logic';

$arr = preg_split ("/,(?![^()]*+\\))/", $vv);
foreach ($arr as &$value) {
    print($value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:18:36.890

在解析 SQL 等不规则语言时，您应该始终使用适当的解析器而不是一些正则表达式。

在您的情况下，您可以在 PHP或[PEAR 的 SQL_Parser中使用此](http://pear.php.net/package/SQL_Parser)[SQL 解析器](http://code.google.com/p/php-sql-parser/)。

# facebook - 使用 Everyauth/Express 和多种配置？

> ID：11170506
> 
> 赞同：4
> 
> 时间：2012-06-23T15:00:08.013
> 
> 标签：facebook, node.js, express, everyauth

我成功地使用 Node.js + Express + Everyauth ( [https://github.com/abelmartin/Express-And-Everyauth/blob/master/app.js](https://github.com/abelmartin/Express-And-Everyauth/blob/master/app.js) ) 从我的应用程序登录到 Facebook、Twitter 等。

我试图解决的问题是 Everyauth 似乎是“配置并忘记”。我设置了一个everyauth 对象并将其配置为express 的中间件，然后就忘了它。例如，如果我想创建一个移动 Facebook 登录，我会这样做：

```
var app = express.createServer();
everyauth.facebook
      .appId('AAAA')
      .appSecret('BBBB')
      .entryPath('/login/facebook')
      .callbackPath('/callback/facebook')
      .mobile(true);     // mobile!
app.use(everyauth.middleware());
everyauth.helpExpress(app);
app.listen(8000); 
```

问题是：移动客户端和非移动客户端都将连接到我的服务器，在连接建立之前我不知道哪个正在连接。更糟糕的是，我需要支持多个 Facebook 应用程序 ID（同样，在客户端连接并部分解析输入之前，我不知道要使用哪个应用程序 ID）。因为everyauth 是一个配置一次的单例，所以我看不到如何根据发出的请求对配置进行这些更改。

看起来我需要创建某种中间件，该中间件在everyauth 中间件之前起作用以配置everyauth 对象，以便everyauth 随后使用正确的appId/appSecret/mobile 参数。我不知道该怎么做...

建议？

这是迄今为止我最好的想法，虽然它看起来很糟糕：为*每个可能的配置创建一个everyauth对象，为每个配置*使用不同的entryPath...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:11:48.837

显然，我在早上喝咖啡之前抢先写了这个，因为我回答了自己的问题，而且很容易实现。基本上，我只需要创建自己的自定义 express 中间件来切换everyauth 配置，然后everyauth 就会在请求中获得它的肮脏爪子，所以......

```
var configureEveryauth = function()
{
    return function configure(req, res, next) {
        // make some changes to the everyauth object as needed....          
        next();
    };
} 
```

现在我的设置变为：

```
var app = express.createServer();
everyauth.facebook
  .entryPath('/login/facebook')
  .callbackPath('/callback/facebook');
app.use(configureEveryauth());
app.use(everyauth.middleware());
everyauth.helpExpress(app);
app.listen(8000); 
```

请注意，我什至没有在启动期间完全配置everyauth Facebook 对象，因为我知道中间件将填充缺少的参数。

# sql - SQL连接三张表并选择信息

> ID：11170515
> 
> 赞同：0
> 
> 时间：2012-06-23T15:00:59.930
> 
> 标签：sql

我有 3 张桌子

*   医生 - Staff_ID、姓名、职位。
*   Consists_Of - Staff_Id、Team_Code。
*   团队 - Team_Code、Telephone_No、Staff_ID

团队表由每个团队的团队负责人组成，该团队负责人也是医生，

我需要返回一个包含 team_code、staff_Id、name、position 的表

我有

```
SELECT DISTINCT Team.team_code, Doctor.staff_ID, name, position
FROM Doctor, Team LEFT OUTER JOIN consists_of
ON Team.Team_code = consists_of.Team_code 
```

但这是给每个留队的成员一个团队代码，t1，然后是 t2，然后是 t3，依此类推。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:25:21.413

您需要的是使用 JOIN。发生重复是因为您没有指定应加入 Doctor 和 Team 的字段

```
SELECT Team.team_code, Doctor.staff_ID, name, position
FROM Doctor
LEFT OUTER JOIN consists_of
   ON Doctor.Staff_Id=consists_of.Staff_Id
LEFT OUTER JOIN Team 
   ON Team.Team_code = consists_of.Team_code 
```

但是为什么 Team 表中有 Staff_Id 呢？

# iphone - 如何在没有 .caf 容器的情况下使用 AVAudioRecorder 进行录制？

> ID：11170517
> 
> 赞同：5
> 
> 时间：2012-06-23T15:01:03.297
> 
> 标签：iphone, avaudiorecorder, aac, m4a, caf

我正在使用 AVAudioRecorder 实例来录制设置`AVFormatIDKey` 为`kAudioFormatMPEG4AAC`. 它以 AAC 格式记录音频，但`.caf`音频容器会打包音频文件。（我可以在记录器文件中看到 caff 标头）。如何记录，以便 caff 容器不存在，而是纯 m4a 格式，以便我可以跨平台使用文件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-24T18:15:50.320

找到了答案。AVAudioRecorder 的工作方式很奇怪。

**AVAudioRecorder 保存文件的格式取决于您为保存的文件指定的 URL/字符串。这取决于您保存的文件名的扩展名。**

如果您没有指定任何扩展名或录音机无法理解的扩展名，那么它将添加 Core Audio 容器。所以，基本上要注意扩展和`AVFormatIDKey`匹配。喜欢`aac`使用格式使用`.aac`扩展名 with `kAudioFormatMPEG4AAC`as`AVFormatIDKey`

# architecture - Yii 保存管理员设置 - 这是正确的做法吗

> ID：11170521
> 
> 赞同：0
> 
> 时间：2012-06-23T15:01:18.260
> 
> 标签：architecture, model, controller, yii

是的，唯一的问题是我这样做是否正确。也许可以解决它。

我在 Yii 中有一个应用程序，其中有一个简单的管理后端，我可以在其中放入一些预定义的设置。

MySQL数据库表：

![我的 MySQL admin_setting 表](../Images/a381366d630a7a681633abd47a93e9a7.png)

我有一个管理员控制器： *我只显示预期的操作*

```
class AdminController extends Controller
{

    public function actionIndex()
    {
        // Update a setting
        if (isset($_POST['submit']))
        {
            AdminSetting::updateSetting('topCategory', $_POST['topCategory']);
            AdminSetting::updateSetting('marketRegion', $_POST['marketRegion']);
        }

        // Get all settings
        $topCategory = AdminSetting::model()->find('name = :name', array(':name' => 'topCategory'));
        $marketRegion = AdminSetting::model()->find('name = :name', array(':name' => 'marketRegion'));

        if (isset($marketRegion->value))
            $marketRegion = $marketRegion->value;
        if (isset($topCategory->value))
            $topCategory = $topCategory->value;

        $this->render('index', array('topCategory' => $topCategory, 'marketRegion' => $marketRegion));
    }
} 
```

模型 AdminSetting.php： *我只显示添加的功能：updateSetting*

```
class AdminSetting extends CActiveRecord
{

    public static function updateSetting($name, $value)
    {
        Yii::app()->db->createCommand("UPDATE admin_setting SET value = '$value' WHERE name = '$name'")->execute();
    }
} 
```

用户界面：

![简单的用户界面](../Images/83baf37cb6b124d15234f1e023e25110.png)

我是这样做的，因为我有一页，有多条记录显示数据。这不是 Yii 默认的工作方式。无论我在哪里搜索，我只看到其他程序员一次编辑一条记录。

第二个问题出现了：如何使用 ActiveRecordModel 的默认功能一次将多条记录保存到数据库中。

我看到如果我继续这样下去，我的 actionIndex 中有一个不断增长的列表，可以手动保存每个字段。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:32:38.570

这里最好的方法是编写一个从[`CActiveForm`](http://www.yiiframework.com/doc/api/1.1/CActiveForm). 为此，您将必须覆盖表单模型`__get`和`__set`方法以获取所有配置设置的列表（假设从硬编码数组中，因为实际的数据库条目可能因任何原因最终丢失）并且表现得像所有它们作为模型的属性存在。

完成此操作后，您现在已准备好获得巨大的收益：

### 您可以像配置设置是表单模型的属性一样工作

*   不再需要将每个变量作为自己的变量传递；只需传递`$model`给视图并访问类似的设置`$model->settingName`（您的`__get`覆盖需要确保它有效）

*   您现在可以将所有配置选项大量设置为属性：

    ```
    $model = new MyAdminFormModel;
    $model->attributes = $_POST['MyAdminFormModel']; 
    ```

### 您可以轻松地将整个表单一次性渲染为一系列字段

通过创建一个新的`CForm`并动态填充其`elements`属性来做到这一点（`MyAdminFormModel`应该有所有必要的信息来做到这一点）。然后，您可以使用类似的东西轻松呈现表单

```
foreach($form->getElements() as $element) {
    echo $element->render();
} 
```

当然，所有这些都需要大量的代码，但是当你设置它时，你将能够只向数组中添加一行（`MyAdminFormModel`从中获取数据），然后其他*一切*都会自动工作。

# html - HTML 5 或 Objective-C & NativeSDK

> ID：11170522
> 
> 赞同：2
> 
> 时间：2012-06-23T15:01:23.663
> 
> 标签：html

我想知道，如果我想为 iOS 和 Android 制作应用程序，是否值得学习整个 HTML-CSS-JavaScript 路线，还是应该学习他们的原生 SDK？

我想我想知道 HTML5 的未来到底有多少。它真的会取代原生移动应用吗？

我知道没有人有水晶球，但我只是寻求更有经验/或更资深的开发人员的意见。

非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T22:40:28.500

现实情况是，HTML5 永远不会成为内置于 iOS 和 Android 的原生应用程序的现实替代品，因为它不够强大或不够健壮，无法做到这一点。此外，仅当您打算创建非常简单的应用程序时，才能使用 HTML5。即使这样，你也会遇到问题。

以 iOS 中的表格视图为例。它可以以始终超越第三方远程解决方案（例如 HTML5）的方式针对速度和交互进行高度优化。请注意，表格视图是您在创建 iOS 应用程序时要做的最简单的事情之一。

此外，从长远来看，了解 Java (Android) 和 Objective-C (iOS) 将对您的开发生涯有益。

有一个真正的例外：如果您的应用程序将成为 Web 应用程序（即 Facebook）的本机表示，那么使用主要的 Web 方法（HTML5/Javascript/CSS）实际上是有意义的。事实上，这正是 Facebook 所做的。然而，在一年的大部分时间里，即使是 Facebook 在移动设备上也经历了一个非常错误且容易崩溃的存在。

总之，据我所知，没有哪个应用程序开发人员认真考虑将 HTML5 作为构建移动应用程序的竞争者（除了具有类似 Web 功能的大量基于 Web 的应用程序）。当然，梦想是 HTML5 将成为开发人员的“银弹”或“金锤”，开启一个勇敢的新时代，我们能够专注于学习一套适用于各种设备的技术。不幸的是，这只是一个梦想。至少现在。

# python - argparse 可选参数的可选依赖项

> ID：11170523
> 
> 赞同：3
> 
> 时间：2012-06-23T15:01:25.110
> 
> 标签：python, argparse

我需要开始这样的工作：

```
./foo.py [-b option [-a]] 
```

使用 argparse。我考虑过使用 sub_parsers，但我不知道如何使它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:55:27.283

直接的方法是简单地在代码中添加规则，如果 -a 存在而不是 b，则可以选择抛出错误（并将其记录在用户帮助中）。您还可以使用`usage`关键字覆盖使用字符串：http: [//docs.python.org/dev/library/argparse.html#usage](http://docs.python.org/dev/library/argparse.html#usage)

sub_parsers 很好，但我认为它们不符合您的需求。他们的用例更像是把很多特性放在一个可执行文件中（想想 svn add、svn ci、svn co 等）

# azure - Azure 网站和 Google Api

> ID：11170528
> 
> 赞同：4
> 
> 时间：2012-06-23T15:02:21.257
> 
> 标签：azure, google-api, azure-web-app-service

我一直在玩天蓝色的网站。我正在使用一些谷歌 API，但似乎一旦部署在 Azure 网站上，请求谷歌 API 时就会出现问题：

> 请求被中止：无法创建 SSL/TLS 安全通道。

我不确定它来自哪里，因为我可以使用 HTTPS 浏览我的网站，也许它来自 IIS ARR 插件？

编辑我正在添加一些代码

@mcollier 我正在使用 WebClient 拨打电话。下载结果将失败（http get request）

```
 try
  {
     WebClient webClient = new WebClient();

     string request = string.Format("https://www.googleapis.com/books/v1/volumes?q=intitle:{0}&fields=items(volumeInfo)&maxResults=1&printType=books&key={1}", infos.Value, ConfigurationHelper.GoogleKey);
     content = webClient.DownloadString(request);
   }               
   catch (Exception ex)
   {
       throw new Exception("content from WebClient : " + content, ex);
       // Log.
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T22:40:05.150

将此添加到 Global.asax.cs 中的 Application_Start 应该可以解决您的问题：

```
ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3; 
```

# hibernate - HQL 关联对象不存在

> ID：11170530
> 
> 赞同：0
> 
> 时间：2012-06-23T15:02:49.193
> 
> 标签：hibernate, nhibernate, hql

我看过几页接近这个，但我正在寻找一个更简单的答案。

我有一个`FinancialStatementLine`可以引用*实体*`Payment`的对象。我想使用 HQL 来查找符合某些条件但**没有**关联对象的`FinancialStatementLine`实体。我的 HQL 语句如下所示：**`Payment`**

 **```
var query = _Session.CreateQuery(
    @"select lines from FinancialStatementLine lines
        inner join fetch lines.Statement statement  
        where statement.FinancialStatementId := statementId
        and lines.Payment is null
        and length(lines.CheckNumber) > 0")
    .SetParameter("statementId", financialStatementId); 
```

似乎这就是答案，但是我得到了一个`NHibernate.Hql.Ast.ANTLR.QuerySyntaxException`(Antlr.Runtime.NoViableAltException) 并且我唯一能想象我做错的事情是尝试`is null`在关联实体而不是属性上使用该子句。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:17:41.893

您的 HQL 中没有语法错误吗？

```
where statement.FinancialStatementId := statementId 
```

实际上应该是：

```
where statement.FinancialStatementId = :statementId 
```**

# iphone - 如何在 UIViewController 上添加弹出 UIView（自定义类）

> ID：11170536
> 
> 赞同：3
> 
> 时间：2012-06-23T15:04:10.460
> 
> 标签：iphone, uiview, uiviewcontroller

我是新手，我想得到一些建议，因为我不知道我做错了什么。我想在 xcode 中制作一个`UIView`带有一些项目的应用程序，当你做某事时，另一个`UIView`（小于第一个）会在第一个上方弹出`UIView`。弹出窗口`UIView`将是一个自定义类。

我已经从`UIViewController`模板和首字母开始`UIView`，我已经链接了 中的所有项目`.storyboard`，并且它可以工作。但是当我创建自己的`UIView`类时`(from objective-C class)`，将第二个`UIView`放在第一个上`storyboard`并将其链接到我的类时，出现了问题。

出现`UIView`了，但是当我尝试将其设置为隐藏时，它没有回答。就像它没有收到消息一样，所以我认为我没有以编程方式很好地链接它，只是因为`storyboard`.

我不知道我是否必须创建另一个 UIViewController 而不是 UIView，或者这是否是正确的路径。

谁能给我解释一下，或者只是写一个带有第二个视图实例化的小代码片段并添加它？

非常感谢！！

（我粘贴了一些代码，.h 中的声明和 .m 中的实例化）

```
 #import <UIKit/UIKit.h>
     #import "EditView.h"

    @interface ReleaseViewController : UIViewController <UIWebViewDelegate, UISearchBarDelegate> {

        IBOutlet UIWebView *web;
        IBOutlet UISearchBar *search;
        IBOutlet EditView *evHack;

    }

    @property (nonatomic, retain) IBOutlet UIWebView *web;
    @property (nonatomic, retain) IBOutlet UISearchBar *search;
    @property (nonatomic, retain) IBOutlet EditView *evHack;

    @end

- (void)viewDidLoad
{
    [super viewDidLoad];

    search.delegate = self;
    web.delegate = self;

    evHack = [evHack initWithFrame:CGRectMake(0, 44, 320, 377)]; 
    [evHack setHidden:YES]; 

} 
```

EditView 类（我还是什么都没有）：

```
#import <UIKit/UIKit.h>

@interface EditView : UIView

@end

#import "EditView.h"

@implementation EditView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        NSLog(@"View created");
    }
    return self;
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:51:35.940

initWithFrame 仅在您分配/初始化应用程序时有效。如果它已经初始化，在这种情况下由情节提要，只需设置它的框架：

`evHack.frame = CGRectMake(0,44, 320, 377);`

我不知道它在 IB 中是什么样子的，但是如果你也在 IB 中设置它，那么在代码中设置它的框架可能是多余的。要检查 evHack 是否正确连接，请在 viewDidLoad 中使用 NSLog evHack。如果你`nil`回来了，它就没有正确连接。

# ruby - 使用 sinatra 和 datamapper 和 Carrierwave 在 ruby 中上传图像？

> ID：11170538
> 
> 赞同：1
> 
> 时间：2012-06-23T15:04:23.293
> 
> 标签：ruby, sinatra, datamapper, carrierwave

我想用 Carrierwave 上传单个图像，问题是，它正在上传文件并将其保存到目录 uploads 中，在此文件夹中创建另一个名为 tmp 的文件夹，在 tmp 文件夹中创建另一个包含图像的文件夹. 问题是即使图像已完全上传到该文件夹​​并且我已经可以使用 feh（或任何其他图像查看器）打开此图像，它似乎也不会停止上传和上传和上传。

这就是我的控制器的样子。

```
get "/new" do
    protect!

    erb :new
end

post "/new" do
    protect!

    @user = User.get(session[:user_id])
    image = @user.image.new(
        :description => params[:description],
        :image => params[:image]
    )

    # image.save

    "NEVER REACHED!"

end 
```

（文本“从未到达！”根本不会显示，我不知道为什么......）

这是我的模型：

```
class ImageUploader < CarrierWave::Uploader::Base
    def extensions_white_list
        %w(jpg jpeg gif png)
    end

    storage :file
end

class Image
    include DataMapper::Resource

    property :id, Serial
    property :description, Text

    property :image, String, :auto_validation => false
    mount_uploader :image, ImageUploader
end

class User
    include DataMapper::Resource

    property :id, Serial

    has n, :post
end 
```

因此，正如已经提到的那样，永远不会达到“从未达到”的文本。任何想法为什么？

此外，我总是收到警告：

```
Defining property for an uploader is deprecated at /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require' 
```

同时我不知道为什么...

**更新：**只要我不在主控制器中取消注释 image.save ，它现在就可以工作，但我实际上需要取消注释，任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:25:11.333

`property :image`将图像模型中的行删除为：

```
class Image
    include DataMapper::Resource

    property :id, Serial
    property :description, Text

    mount_uploader :image, ImageUploader
end 
```

mount_uploader 本身将 :image 定义为 String 类型。

尝试在此之后运行您的应用程序，并让我知道条件是否保持不变。:)

# java - 为什么 JDK 的 JConsole 使用 jvmstat 和 attach api 来寻找虚拟机？

> ID：11170540
> 
> 赞同：3
> 
> 时间：2012-06-23T15:04:57.803
> 
> 标签：java, jvm, openjdk

我正在编写一些与 JVM 实例相关的应用程序并查看开源以了解它是如何解决一些问题的。来自[JDK7](http://jdk7.java.net/source.html)的 JConsole以两种方式收集正在运行的 VM（查看 GPL2 许可的源代码`jdk/src/share/classes/sun/tools/jconsole/LocalVirtualMachine.java`）。第一种是jvmstat方式，代码如下：

```
private static void getMonitoredVMs(Map<Integer, LocalVirtualMachine> map) {
    MonitoredHost host;
    Set vms;
    try {
        host = MonitoredHost.getMonitoredHost(new HostIdentifier((String)null));
        vms = host.activeVms();
    } catch (java.net.URISyntaxException sx) {
        throw new InternalError(sx.getMessage());
    } catch (MonitorException mx) {
        throw new InternalError(mx.getMessage());
    }
    for (Object vmid: vms) {
        if (vmid instanceof Integer) {
            int pid = ((Integer) vmid).intValue();
            String name = vmid.toString(); // default to pid if name not available
            boolean attachable = false;
            String address = null;
            try {
                 MonitoredVm mvm = host.getMonitoredVm(new VmIdentifier(name));
                 // use the command line as the display name
                 name =  MonitoredVmUtil.commandLine(mvm);
                 attachable = MonitoredVmUtil.isAttachable(mvm);
                 address = ConnectorAddressLink.importFrom(pid);
                 mvm.detach();
            } catch (Exception x) {
                 // ignore
            }
            map.put((Integer) vmid,
                    new LocalVirtualMachine(pid, name, attachable, address));
        }
    }
} 
```

其次是附加方式，如下所示：

```
private static void getAttachableVMs(Map<Integer, LocalVirtualMachine> map) {
    List<VirtualMachineDescriptor> vms = VirtualMachine.list();
    for (VirtualMachineDescriptor vmd : vms) {
        try {
            Integer vmid = Integer.valueOf(vmd.id());
            if (!map.containsKey(vmid)) {
                boolean attachable = false;
                String address = null;
                try {
                    VirtualMachine vm = VirtualMachine.attach(vmd);
                    attachable = true;
                    Properties agentProps = vm.getAgentProperties();
                    address = (String) agentProps.get(LOCAL_CONNECTOR_ADDRESS_PROP);
                    vm.detach();
                } catch (AttachNotSupportedException x) {
                    // not attachable
                } catch (IOException x) {
                    // ignore
                }
                map.put(vmid, new LocalVirtualMachine(vmid.intValue(),
                                                      vmd.displayName(),
                                                      attachable,
                                                      address));
            }
        } catch (NumberFormatException e) {
            // do not support vmid different than pid
        }
    }
} 
```

我的问题：为什么它使用两种不同的工具来检索虚拟机列表？我知道通过附加 api，您只能列出由同一 JRE 运行的虚拟机，但 jvmstat 可以为您提供使用任何 JRE 版本运行的所有虚拟机的列表。我只测试了 JRE/JDK 7 32 位和 64 位，因为它们和更新版本是我的目标，遗憾的是仅在 Windows 上。仅使用 jvmstat 还不够吗？是否有任何情况下附加 api 可以看到某些 VM，但 jvmstat 看不到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:22:48.883

通常，要查找所有 jvm 进程，attach api 等于 jvmstat。但在某些定制的情况下，情况就不同了。不同的是 com.sun.tools.attach.spi.AttachProvider。

例如，在Windows 平台中，jvmstat 通过列出%TEMP%/hsperfdata_caoxudong 目录中的所有文件来查找java 进程（在linux 中为/tmp/hsperfdata_caoxudong）。并且 attach api 通过 AttachProvider 实例查找 java 进程。jdk 提供了一个默认的 AttachProvider 实现，这取决于您的操作系统平台。在 Windows 平台中，实现是 sun.tools.attach.WindowsAttachProvider。在它的 listVirtualMachines 方法中，如果 isTempPathSecure 方法返回 false，它将遍历所有进程，并[找到所有加载库 "jvm.dll"](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/tools/attach/WindowsAttachProvider.java#WindowsAttachProvider.listJavaProcesses%28%29)的进程。您可以安装自己的 AttachProvider 实现以您自己的方式查找 java 进程，结果可能与 jvmstat 不同。AttachProvider 的安装在[这里](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/com/sun/tools/attach/spi/AttachProvider.java#AttachProvider.providers%28%29)。

# c# - C# 从字符串中解析 Vector2

> ID：11170541
> 
> 赞同：2
> 
> 时间：2012-06-23T15:05:17.840
> 
> 标签：c#, string, parsing

我试图通过从文本文件中将 Vector2 作为字符串读取然后解析它来将 Vector2 加载到我的游戏中。但是当我尝试加载这些信息时，我得到了这个异常：

格式异常未处理。输入字符串的格式不正确。

文本文件：

{X:512 Y:384}

代码：

```
System.IO.StreamReader objReader;
objReader = new System.IO.StreamReader(@fileName + ".txt");

string pos = objReader.ReadLine();

float aXPosition = float.Parse(pos.Substring(pos.IndexOf("X:"), pos.IndexOf(" Y")));
float aYPosition = float.Parse(pos.Substring(pos.IndexOf("Y:"), pos.IndexOf("}"))); 
```

所以我想做的是从文本文件中读取 X 和 Y 位置。我在这里找到了这种技术：http: [//social.msdn.microsoft.com/Forums/sk/xnagamestudioexpress/thread/fd94cfec-f1f4-4cab-aa1d-8c72b524875b](http://social.msdn.microsoft.com/Forums/sk/xnagamestudioexpress/thread/fd94cfec-f1f4-4cab-aa1d-8c72b524875b)

看起来很简单，但由于某种原因它不适合我。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:09:46.817

我认为你应该`XmlSerializer`改用它，它会少很多工作。

例如：

```
class MySaveGame
{
    public Vector2 Point1 { get; set; }
    public Vector2 Point2 { get; set; }
} 
```

保存：

```
XmlSerializer serializer = new XmlSerializer(typeof(MySaveGame));
using (var stream = File.Create(@"C:\yourpath.xml"))
{
    serializer.Serialize(stream, new MySaveGame { Point1 = new Vector2(3, 3) });
} 
```

读书：

```
using (var stream = File.OpenRead(@"C:\yourpath.xml"))
{
    var mySave = serializer.Deserialize(stream) as MySaveGame;
} 
```

那是我的头顶，请仔细检查我的代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T15:08:43.440

这可能是因为在X 中为您提供了***X***`IndexOf`的索引***：***您已在参数中指定。尝试这样的事情：

 **```
System.IO.StreamReader objReader;
objReader = new System.IO.StreamReader(@fileName + ".txt");

string pos = objReader.ReadLine();

int startInd = pos.IndexOf("X:") + 2;
float aXPosition = float.Parse(pos.Substring(startInd, pos.IndexOf(" Y") - startInd));
startInd = pos.IndexOf("Y:") + 2;
float aYPosition = float.Parse(pos.Substring(startInd, pos.IndexOf("}") - startInd)); 
```

**更新**

我已经测试了代码，并且方法的 count 参数也存在问题`Substring`。它应该指示子字符串的长度，而**不是**原始字符串中的结束索引。我更新了代码，所以它现在应该可以正常工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T15:16:36.480

> 格式异常未处理。输入字符串的格式不正确。

您收到此异常是因为您试图解析一个不是浮点数的字符串表示形式的字符串。

String.Substring MSND 文档说：

> 从此实例中检索子字符串。子字符串从指定的字符位置开始并具有指定的长度。

第二个参数是您要提取的字符串的长度，而不是停止提取的索引，它解释了您的问题。

实际上：

给定这个字符串`{X:512 Y:384}`, `pos.IndexOf("X:")`= 1, `pos.IndexOf(" Y")`= 6

=>`pos.Substring(pos.IndexOf("X:"), pos.IndexOf(" Y"))`

=>`pos.Substring(1 , 6)`

=>`X:512`这不是浮点数！

回到您的问题的**解决方案**：

1.  清除所有非数字字符中的字符串（中间留空格）
2.  结果字符串现在应该只包含您想要的值和中间的空格
3.  拆分你的字符串。您现在有一个包含 2 个字符串的数组，其中包含您想要的值，只需解析它们即可。

这是执行此操作的示例代码：

```
 //"{X:512 Y:384}"
String cleanString = pos.Replace("{X:", "");   //"512 Y:384}"
cleanString = cleanString .Replace("Y:", "");  //"512 384}"
cleanString = cleanString .Replace("}", "");   //"512 384"
String[] xyVals = cleanString.Split(' ');      //"512" and "384"
float aXPosition = float.Parse(xyVals[0]);
float aYPosition = float.Parse(xyVals[1]); 
```**

# jquery - 对话框打开后 Jquery 链接停止工作

> ID：11170542
> 
> 赞同：1
> 
> 时间：2012-06-23T15:05:19.340
> 
> 标签：jquery

我希望你们所有的jquery专家都可以帮助我解决这个问题。我在 html/jquery 中有一个聊天室。我有一个带有动态用户列表的 DIV，每次新用户进入聊天室时都会刷新。当您单击任何用户时，会出现一个用于私人聊天的 jquery 对话框。这一切都很好。问题是在打开第一个私人聊天（jquery 对话框）后，如果有新用户进入聊天室，则聊天室用户的链接不再起作用。（即使尝试刷新用户列表）。我检查了 mozilla 中的开发人员控制台，发现当打开对话框时，将 DIV 部分添加到 html 页面的末尾。那是所有其他 jquery 生成的链接停止工作的时候。

这是有问题的功能（适用于任意数量的用户，直到第一个私人聊天对话框打开，之后链接停止工作）：

```
<script type="text/javascript"> 

    function privateChatLoader() {

        $(document).ready(function() {

            $('#chatRoomUsers td a').each(function() {
                var chatRoomId = $.trim($('#chatRoomId').val());
                var fromUsername = $.trim($('#username').val());
                var privateMessageTop = '<tr><td align="left" valign="middle" class="popup-box-top"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td width="10">&nbsp;</td><td width="300" align="left" valign="middle"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td width="23" align="left" valign="middle"><img src="images/icon-popup.png" width="16" height="16" /></td><td align="left" valign="middle" class="popup-title-text ">_TO_USERNAME_</td></tr></table></td><td align="right" valign="middle"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td align="right" valign="middle">&nbsp;</td><td width="18" align="right" valign="middle"><a href="#" onClick="closePrivateMessage();" id="dialog2"><img src="images/button-close.png" width="15" height="14" border="0" /></a></td></tr></table></td><td width="10">&nbsp;</td></tr></table></td></tr>';
                var $dialog = $('<div></div>')
                var $link = $(this).on('click', function() {
                    var toUsername = $link.attr("id");
                    privateMessageTop = privateMessageTop.replace("_TO_USERNAME_", toUsername);
                    $dialog
                        .load('privatemessage.php?cid=' + chatRoomId + '&s=' + fromUsername + '&r=' + toUsername)
                        .dialog({
                            //autoOpen: false,
                            title: privateMessageTop,
                            close: toUsername,
                            width: 400,
                            height: 300
                        });

                    $link.click(function() {
                        $dialog.dialog('open');
                        return false;
                    });

                    return false;
                });
            });
    });
} 
```

****更新：* *** 没关系。我让它工作了。问题是在我在对话框中加载的页面中，我还再次加载了我的所有 javascript 和 jquery 文件（从主页复制和粘贴）。一旦我从该页面中删除了所有内容，一切都会按预期工作。多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:48:40.780

重要的是要了解，当您用相同的元素替换 html 时，您会丢失直接绑定到它们的事件。这同样适用于在应用原始事件处理程序时添加不在页面中的新元素。

如果不查看其他代码以及您的 UI 是如何工作的，就很难准确判断代码的哪一部分是问题所在。

但是可以看出，您正在 ajax 加载内容，因此您应该学习如何委托事件，以便将来的元素会自动附加这些事件。

如果您使用的是 jQuery 1.7，您将要使用`on()`，如果使用较小的版本，请使用`delegate()`

详细解释：[jQUery Docs FAQ - 为什么事件在 Ajax 请求后停止工作](http://docs.jquery.com/Frequently_Asked_Questions#Why_do_my_events_stop_working_after_an_AJAX_request.3F)

方法 API 链接：

[http://api.jquery.com/on/](http://api.jquery.com/on/)

[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:12:37.037

您对 .dialog 的使用对我来说看起来不太正确。

尝试这个：

```
function privateChatLoader() {

    $(document).ready(function() {

        $('#chatRoomUsers td a').each(function() {
            var chatRoomId = $.trim($('#chatRoomId').val());
            var fromUsername = $.trim($('#username').val());
            var privateMessageTop = '<tr><td align="left" valign="middle" class="popup-box-top"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td width="10">&nbsp;</td><td width="300" align="left" valign="middle"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td width="23" align="left" valign="middle"><img src="images/icon-popup.png" width="16" height="16" /></td><td align="left" valign="middle" class="popup-title-text ">_TO_USERNAME_</td></tr></table></td><td align="right" valign="middle"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td align="right" valign="middle">&nbsp;</td><td width="18" align="right" valign="middle"><a href="#" onClick="closePrivateMessage();" id="dialog2"><img src="images/button-close.png" width="15" height="14" border="0" /></a></td></tr></table></td><td width="10">&nbsp;</td></tr></table></td></tr>';
            var $dialog = $('<div></div>')
            var toUsername = $(this).attr("id");
            privateMessageTop = privateMessageTop.replace("_TO_USERNAME_", toUsername);

            $dialog.load('privatemessage.php?cid=' + chatRoomId + '&s=' + fromUsername + '&r=' + toUsername)
                   .dialog({
                        autoOpen: false,
                        title: privateMessageTop,
                        close: toUsername,
                        width: 400,
                        height: 300
                    });

            $(this).click(function() {
                 $dialog.dialog('open');
                 return false;
            });
        });
    });
} 
```

然后确保你正在使用

```
.dialog('close') 
```

关闭对话框。

有关更多详细信息，请参阅此博客：http: [//blog.nemikor.com/2009/04/08/basic-usage-of-the-jquery-ui-dialog/](http://blog.nemikor.com/2009/04/08/basic-usage-of-the-jquery-ui-dialog/)

# jquery - 动画函数 jQuery

> ID：11170543
> 
> 赞同：2
> 
> 时间：2012-06-23T15:05:46.773
> 
> 标签：jquery, jquery-animate

我是新来的，我对 jQuery 的功能有疑问 - “动画”

```
function myFunction(newpage) {
$('#loader').animate({opacity: 0.0}, 400, 'linear', function(){
    // callback of fadeOut()
    $(this).load(newpage + ".php #toload", function(){
        // callback of load()
        $('#loader').animate({opacity: 100.0}, 400, 'linear', function(){
            //callback of fadeIn()
            // (not relevant for my problem, I think)
            $.getScript("js/test.js");
        });
      });
   });
} 
```

我的问题是：第一个“动画”像魅力一样工作，但第二个“动画”正确加载新内容，没有动画（简单的“淡入”）。

任何人都可以帮助我吗？谢谢指教！

PS对不起我的英语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:09:19.453

动画正在工作，但它太快了，你看不到它，因为你已经指定`opacity:100;`了 400 毫秒

使用`{opacity: 1;}`，因为不透明度最大值是 1 和最小值。值为 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:12:28.900

你可能想检查这样的事情

```
$('#loader').hide().fadeIn(400, function () {
    ...
}); 
```

# asp.net - 如何使用jQuery调用soap服务

> ID：11170545
> 
> 赞同：1
> 
> 时间：2012-06-23T15:05:52.613
> 
> 标签：asp.net, jquery, soap

我从 php 页面调用肥皂服务时遇到问题。我实现了两页，第一页是在 php 中创建的，第二页是在 asp.net 中创建的。在 asp.net 应用程序中，我有 SOAP 服务，应该从 php 调用哪些方法。

我的 SOAP 服务上的方法，如下所示：

```
[WebMethod]

[ScriptMethod(ResponseFormat = ResponseFormat.Json)]

public bool UpdateVotes(string vote) {
           //Code 
 } 
```

在 PHP 应用程序上，我在下一个方法中调用 UpdateVotes 方法：

```
$.ajax({
                type: "POST",
                url: "http://localhost:5690/VoteServices.asmx/UpdateVotes",
                data: "{'vote': '" + vote + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {                   
                },
                error: function (xhr, status, error) {                  
                }
            }); 
```

首先，我使用 SOAP 服务运行 asp.net 应用程序，然后启动 php 应用程序。

当我单击在服务 i 浏览器控制台上调用 Web 方法的按钮时，出现此错误：

```
Failed to load resource: the server responded with a status of 500 (Internal Server Error) http://localhost:5690/VoteServices.asmx/UpdateVotes
XMLHttpRequest cannot load http://localhost:5690/VoteServices.asmx/UpdateVotes. Origin http://localhost:8080 is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:44:09.193

两件事情：

1.) 这不再是[SOAP](http://en.wikipedia.org/wiki/SOAP)服务，因为您来回传递[JSON 。](http://www.json.org/)

2.) 您遇到了一个称为[同源策略的安全限制](http://en.wikipedia.org/wiki/Same_origin_policy)

同源[策略](http://en.wikipedia.org/wiki/Same_origin_policy)旨在防止恶意脚本调用恶意 Web 服务并将您的所有数据从浏览器发送给它们。[基本上，您不能发出任何不使用 GET HTTP 动词](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)的跨域请求（即与脚本起源不同的域）。

# cordova - 如何加载包含 XML 内容的 PHP 文件并且我需要使用电话间隙解析内容？

> ID：11170546
> 
> 赞同：0
> 
> 时间：2012-06-23T15:05:59.427
> 
> 标签：cordova, phonegap-plugins

我有一个输出 XML 内容的 php 文件 例如：当我运行 mywebsite.com/generatexmlfile.php 时。它在 php 文件中生成 XML 内容。我运行时的 o/p 如下：

```
<form><table><CommentsUIDefinition><field><name>email</name><type>textfiled</type></field<field><name>comment</name><type>textarea</type></field><field><name>submit</name><type>button</type></field></CommentsUIDefinition></table>
</form> 
```

我确实需要使用查询或任何其他方法调用这个 php 文件，并且需要解析“generatexmlfile.php”中存在的这个 XML 内容。任何参考资料或小帮助都会有很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:07:12.210

试试这个小提琴，它有将原始 xml 解析为 json 的代码，可以很容易地使用。

[http://jsfiddle.net/dhavaln/ShWqt/](http://jsfiddle.net/dhavaln/ShWqt/)

有关更多详细信息，请查看这篇文章 -[在 AJAX 中解析 xml 响应的最佳方法是什么](https://stackoverflow.com/questions/3957932/whats-the-best-way-to-parse-xml-response-in-ajax)

# python - 使用 ufw (UncomplicatedFirewall) 作为 api

> ID：11170551
> 
> 赞同：3
> 
> 时间：2012-06-23T15:07:12.910
> 
> 标签：python, ubuntu

我知道ufw是用python写的。是否可以通过 python 将 ufw 用作 api？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T16:26:45.100

当然，`ufw`可执行文件只是对同名 python 包的一个薄包装。我不知道有任何文档，但您可以浏览源代码并查看一切是如何工作的。通过启动 python 解释器、导入模块并询问它的导入路径来查找`ufw`脚本位置和包位置：`which ufw``ufw`

```
simon@mymachine:~$ python
Python 2.6.5 (r265:79063, Apr 16 2010, 13:57:41) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import ufw
>>> ufw.__file__
'/usr/lib/python2.6/dist-packages/ufw/__init__.pyc'
>>> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-15T13:04:07.950

我创建了一个包装器 easyufw，以支持将 ufw 用作 api。

博客文章[在这里](http://dhj.io/posts/2016/09/14/easy-ufw-api/)。

存储库[在这里](https://gitlab.com/dhj/easyufw)。

## 设置

你可以像这样从 GitLab 中提取 easyufw：

```
git clone https://gitlab.com/dhj/easyufw.git 
```

您还需要 ufw 并且需要以 root 权限运行 easyufw，因为 ufw 需要它：

```
sudo pip install ufw
sudo python 
```

## 尝试一下

设置完成后，您可以在 python 终端中键入这些命令，以感受它是多么容易。

### 请注意，界面是实时的——没有空运行，所以它实际上会运行你给它的命令。当心。

```
import easyufw.easyufw as ufw

print ufw.status()
ufw.enable() # enable the firewall
ufw.deny('22/tcp') # disable ssh -- could disable active sessions!
ufw.allow('22/tcp') # enable ssh -- '22' alone or as int includes tcp and udp
ufw.delete(22) # delete all rules for port 22 -- int required
ufw.disable() # this will leave your firewall disabled! (default in ubuntu, but IMO, not smart) 
```

`ufw.run`您还可以使用like `ufw.run('allow from 207.46.232.182')`(after `import easyufw.easyufw as ufw`)运行任意命令

就是这样。希望它是有用的。

# wamp - 无法在 .htaccess 中获得简单的 RewriteRule 以在本地 WAMP 中工作

> ID：11170554
> 
> 赞同：0
> 
> 时间：2012-06-23T15:08:01.330
> 
> 标签：wamp, wampserver

我启用了 mod_rewrite，重新启动了所有服务，仍然没有生效。这是我在 .htaccess 中的内容：

重写引擎开启

RewriteRule .* localhost/phpinfo.php

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:18:01.033

首先，重写规则通常不会影响 URL 的主机部分（除非您指定预定义`REQUEST_URI`的名称等）只是路径部分（一篇[很好的文章](http://net.tutsplus.com/tutorials/other/a-deeper-look-at-mod_rewrite-for-apache/)解释了 URL 重写的位和字节。）也就是说您的规则应该在至少看起来像这样。

```
RewriteEngine On
RewriteRule (.+) /phpinfo.php [L] 
```

此外，您`AllowOverride`对特定虚拟主机（或文件夹）的指令是否配置为完全允许`.htaccess`文件？如果不是，`.htaccess`文件将被完全忽略。为了使 mod_rewrite 工作，它至少需要设置为`FileInfo Options`.

```
AllowOverride FileInfo Options 
```

# iphone - 在自定义UILabel中重新定义字符串的框架和位置需要实现什么方法？

> ID：11170556
> 
> 赞同：0
> 
> 时间：2012-06-23T15:08:09.867
> 
> 标签：iphone, ios, uilabel, subclass

我正在使用 UILabel 的子类的自定义类。除非我更改使标签的行数被更改的字符串，否则它工作正常。我查看了代码，当它第一次初始化时，它调用`-(void) layoutSubview`以确定字符串的来源及其框架。但是当我更改字符串的值时，不会调用此方法，因此由于帧的大小和从第一个字符串计算的字符串的位置，某些字符串不可行。需要具体实现什么方法来重绘它的框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:43:04.110

您可能正在寻找`sizeToFit`：

> [尺寸适合](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/uiview_class/uiview/uiview.html)：
> 
> 调整并移动接收者视图，使其仅包含其子视图。

# thread-safety - 在 Akka 中，ActorContext 线程安全吗？

> ID：11170557
> 
> 赞同：2
> 
> 时间：2012-06-23T15:08:17.053
> 
> 标签：thread-safety, akka

根据标题，可以从多个线程（即使是当前未执行该actor的线程）中安全地使用从actor中提取的ActorContext，以创建旨在成为原始actor的子级的actor？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:16:09.740

不，ActorContext[不是线程安全的](https://github.com/akka/akka/blob/master/akka-actor/src/main/scala/akka/actor/Actor.scala#L272)，不应逃逸到其他线程。

# ruby-on-rails - Rails 应用程序 Rake 任务不知道如何构建其他 Rake 任务

> ID：11170558
> 
> 赞同：2
> 
> 时间：2012-06-23T15:08:17.490
> 
> 标签：ruby-on-rails, ruby, rake, rake-task

我正在尝试创建一个调用其他两个 rake 任务的 Rake 任务。我在[这里](https://stackoverflow.com/questions/577944/how-to-run-rake-tasks-from-within-rake-tasks)和[这里](https://stackoverflow.com/questions/2632138/execute-a-rake-task-from-within-migration)找到了有相关问题的人，但它并不是很有用。这是我到目前为止拼凑起来的。知道我做错了什么吗？

```
task :cron => :environment do
  #if Time.now.hour % 2  == 0 
    Rake::Task["robots:update_robots"].reenable
    Rake::Task["robots:update_robots"].invoke
  #end
end 
```

如您所见，这是一项由 Heroku 执行的 cron 任务。但是我已经注释掉了我不需要的东西，所以我可以测试它是否有效。

我不断收到此错误：

> 不知道如何构建任务 'robots:update_robots'

但我不知道为什么。

更新：所以我发现我无法运行我的 cron rake 任务调用的原始任务。我让它运行了一段时间，沿着某处购买，我删除了“更新”中的“d”。所以这个命令 Rake::Task["robots:upate_robots"].execute 没有因为机器人 rake 任务是“upate”，而不是“update”。

Tl;博士：错别字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:03:20.327

一般来说，您的解决方案应该有效：

```
require 'rake'

task :environment do
  puts 'task environment'
end

namespace :robots do
  task :update_robots do
    puts "task robots:update_robots"
  end
end

task cron: :environment do
  puts 'task cron'
  Rake::Task['robots:update_robots'].reenable
  Rake::Task['robots:update_robots'].invoke
end

Rake::Task['robots:update_robots'].invoke
Rake::Task[:cron].invoke

# >> robots:update_robots was invoked
# >> task robots:update_robots
# >> task environment
# >> task cron
# >> task robots:update_robots 
```

我的第一个想法是你一定把 rake 任务弄错了（你*确定*它是 "robots:update_robots" 吗？）

你需要重新启用它对我来说很不寻常，这意味着你想要的不是 Rake，而只是普通的旧 Ruby。将 update_robots 任务的内容移出一个方法，然后您可以直接调用该方法，而不是尝试将任务视为方法（任务用于处理依赖关系，它们只故意调用一次，并且您需要弯曲它们意味着您重新使用了错误的工具来完成这项工作）。然后，您的代码和 robots:update_robots 都可以调用相同的方法：

```
require 'rake'

def update_robots
  puts "method update_robots"
end

task :environment do
  puts 'task environment'
end

namespace :robots do
  task :update_robots do
    update_robots
    puts "task robots:update_robots"
  end
end

task cron: :environment do
  puts 'task cron'
  update_robots
end

Rake::Task['robots:update_robots'].invoke
Rake::Task[:cron].invoke

# >> method update_robots
# >> task robots:update_robots
# >> task environment
# >> task cron
# >> method update_robots 
```

# django - 使用 django-backbone 应用程序进行服务器端验证的最佳实践是什么？

> ID：11170560
> 
> 赞同：2
> 
> 时间：2012-06-23T15:08:27.323
> 
> 标签：django, django-models, backbone.js, django-forms

尝试在服务器端使用骨干网和 django 制作单页应用程序。

使用 Django 的 ModelForm 进行验证看起来不太适合该目的，因为嵌套模型和在适当位置向用户显示错误消息的困难。

是否有任何好的做法可以在 Django 中验证模型的属性并将其显示在单页应用程序的页面上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:52:33.943

我们有一个使用修改过的backbone.js 和django-rest-framework 的单页应用程序。

[我们通过DRF](http://django-rest-framework.org/)资源使用 ModelForm 验证（如果您想为单页应用程序设置 API，请查看 DRF，它非常简单且可自定义）。当使用嵌套模型时，我们为每个视图绑定一个模型并分别处理保存，首先我们保存主模型，保存成功后，我们保存嵌套模型，每个模型都有单独的错误处理。

在主干端，我们有一个特殊的 FormView 来处理表单的呈现、错误处理等。它有一个“提交”方法，可以序列化表单并将数据保存到模型中，看起来有点像这样（我们我去掉了更多的完整性检查逻辑，这不是我们的确切代码，更像是类似 javascript 的伪代码，甚至可以运行:))

```
FormView = Backbone.View.extend({

// ... left out functionality for rendering, serializing, etc

submit: function(){
    var data = form.serialize();
    var self = this;

    self.clearErrors();
    self.model.save(data,{
        success: function(model, response){
            self.showSuccess(response) // displays a save-success message
        },
        error: function(model, response){
            self.showError($.parseJSON(response.responseText)) //displays errors
        }
    })
},

clearErrors: function(){
    var self = this;
    self.$("ul.non-field-errors").empty() // Clear the main form error list
    _.each(self.fields, function(field){
       self.$("ul.field-errors#field-" + field.name + "]").empty();
    });
},

showErrors: function(errors){
    /*
     Errors are given by DRF as a dict:
     {
         errors: [error1, error2, ...], // form level errors
         field-errors: {  // field level errors
             field_name1 : [error1, error2, ...],
             field_name2 : [error1, error2, ...],
         }
     }
    */
    var self = this;
    self.$("ul.form-errors").empty() // Clear the main form error list
    _.each(errors.non-field-errors, function(error){
        self.$("ul.errors").append("<li>"+error+"</li>");
    });
    _.each(errors.field-errors, function(error, field_name){
        _.each(error, function(err){
           self.$("ul.field-errors#field-" + field_name + "]").append("<li>"+error+"</li>");
        });
    });
}

}); 
```

在 django 方面，如果您使用 ModelResource 和 ModelForm 验证，DRF 可以为您很好地处理它。

# c++ - OpenCV中是否有用于Delaunay三角剖分的C++ API？

> ID：11170564
> 
> 赞同：11
> 
> 时间：2012-06-23T15:08:59.203
> 
> 标签：c++, opencv, triangulation, delaunay

我正在尝试实现一种主动外观模型（AMM），并且在我需要获得**面部三角网格**的步骤之一上，例如：

![在此处输入图像描述](../Images/0cc8efe05bc84311994bc9de6271054e.png)

**Delaunay 三角剖分**似乎非常适合这项任务（如果有更好的选择，请纠正我），并且 OpenCV 有[C API](http://books.google.by/books?id=seAgiOfu2EIC&pg=PA302&lpg=PA302&dq=opencv+delaunay+triangulation+example&source=bl&ots=hSH09ldJT9&sig=fwMYUitawVOExjK3qoSbv3DQO6c&hl=be&sa=X&ei=jtflT46xJ4_c4QTL6vijAQ&ved=0CGMQ6AEwAw#v=onepage&q&f=false)。但是有用于 Delaunay 三角测量的**C++ API吗？**当然，如果真的没有 C++ API，为 C 版本编写包装器并不是什么大不了的事，但这可能只是我对 API 的了解，而不是 API 本身。在这种情况下，我肯定会更喜欢原生 OpenCV 实现。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-23T15:58:59.833

OpenCV 有用于 delaunay 三角测量的 C++ API，但不幸的是它没有记录。

下面是实现 delaunay 算法和使用[示例的](https://github.com/Itseez/opencv/blob/master/samples/cpp/delaunay2.cpp)[Subdiv2D](https://github.com/Itseez/opencv/blob/master/modules/imgproc/src/subdivision2d.cpp)类。

# wordpress - Wordpress 元数据写在页面顶部而不是循环

> ID：11170571
> 
> 赞同：1
> 
> 时间：2012-06-23T15:10:17.753
> 
> 标签：wordpress, metadata, custom-fields

我正在构建一个基于 Skeleton Wordpress 主题的 wordpress 网页。

我在一个页面上显示了 2 个帖子，每个帖子都有自定义字段值（元数据）。我使用骨架主题中的简码从特定类别获取后提要，并在该循环中插入了显示自定义字段数据的此标签

```
<?php the_meta(); ?> 
```

我正在获取数据 - 但问题是，数据显示在页面顶部而不是帖子内部。

我可能做错了什么？还是我做错了骨架？

**网页**：http: [//visbyfangelse.se.preview.binero.se/rum-priser-preview/](http://visbyfangelse.se.preview.binero.se/rum-priser-preview/)

如您所见，显示了两个帖子 - 元数据显示在页面顶部。

**循环代码**：http : [//pastebin.com/mRQY5GNz](http://pastebin.com/mRQY5GNz) 如您所见，我希望元数据显示在我将此类分配给“my_room_meta”的 div 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:16:47.003

the_meta() 将结果回显到页面，您可以制作自己的替换函数：

```
function get_the_meta() {
        if ( $keys = get_post_custom_keys() ) {
                $output="<ul class='post-meta'>\n";
                foreach ( (array) $keys as $key ) {
                        $keyt = trim($key);
                        if ( is_protected_meta( $keyt, 'post' ) )
                                continue;
                        $values = array_map('trim', get_post_custom_values($key));
                        $value = implode($values,', ');
                        $output.= apply_filters('the_meta_key', "<li><span class='post-meta-key'>$key:</span> $value</li>\n", $key, $value);
                }
                return $output . "</ul>\n";
        }
}
} 
```

# api - 显示（层）价格与数量增量和税

> ID：11170574
> 
> 赞同：0
> 
> 时间：2012-06-23T15:10:47.863
> 
> 标签：api, magento, integration, catalog

我需要根据产品的数量增量显示（层）价格。例如，一个简单的产品，正常价格为 50 美分，无税且数量增量为 20 应显示在产品视图上，并显示“每 20 美元 10 美元”。

如果不使用税收，这应该很容易。但是似乎没有“默认”助手或模型可以在启用税收和不同的计算算法（例如`Mage_Tax_Model_Calculation::CALC_UNIT_BASE`）的情况下执行此操作；`Mage_Tax_Model_Sales_Total_Quote_Tax`期待在和中的引号`Mage_Tax_Model_Sales_Total_Quote_Subtotal`。

我在这里错过了什么，还是我必须编写业务逻辑来自己计算价格？我将如何最好地封装它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:12:37.410

我现在非常简单地解决了我的问题。为此，我使用自定义模块中的元素通过附加实例方法`<rewrite>`来扩展帮助程序：`Mage_Tax_Helper_Data`

```
class My_Module_Helper_Tax_Data extends Mage_Tax_Helper_Data {

    /**
     * Get product price based on stock quantity increments
     *
     * @param Mage_Catalog_Model_Product $product
     * @param float $price inputed product price
     * @param null|int $qtyIncrements inputed stock quantity increments
     * @param null|bool $includingTax return price include tax flag
     * @param null|Mage_Customer_Model_Address $shippingAddress
     * @param null|Mage_Customer_Model_Address $billingAddress
     * @param null|int $customerTaxClass customer tax class
     * @param mixed $store
     * @param bool $priceIncludesTax flag what price parameter contain tax
     * @return float
     */
    public function getQtyIncrementsPrice($product, $price, $qtyIncrements = 1,
        $includingTax = null, $shippingAddress = null, $billingAddress = null, 
        $customerTaxClass = null, $store = null, $priceIncludesTax = null) {

        $store = Mage::app()->getStore($store);
        $qtyIncrements *= 1;

        if ($this->_config->getAlgorithm($store) 
            == Mage_Tax_Model_Calculation::CALC_UNIT_BASE) {
            $price = $this->getPrice(
                $product, $price, $includingTax, $shippingAddress, 
                $billingAddress, $customerTaxClass, $store, $priceIncludesTax
            );
            $price *= $qtyIncrements;
            $price = $store->roundPrice($price);
        } else {
            $price *= $qtyIncrements;
            $price = $this->getPrice(
                $product, $price, $includingTax, $shippingAddress,
                $billingAddress, $customerTaxClass, $store, $priceIncludesTax
            );
        }

        return $price;
    }
} 
```

以后可以在自定义重写方法中使用它，例如`Mage_Catalog_Block_Product_Price::getTierPrices()`.

# android - Android动态改变键的背景

> ID：11170575
> 
> 赞同：0
> 
> 时间：2012-06-23T15:10:52.487
> 
> 标签：android, xml

我正在android中构建一个自定义键盘。

我的 input.xml：

```
<com.mykeyboard.MyKeyboardView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/keyboard"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" 
    android:keyBackground="@drawable/keybg"
    /> 
```

所有的键都具有相同的背景。现在我正在尝试动态更改一个键的背景。这可能吗？

我的自定义 MyKeyboardView 的代码可以在这里找到：http: [//pastebin.com/ZpLzZZUj](http://pastebin.com/ZpLzZZUj)

我的 MyKeyboardService 的代码可以在这里找到：http: [//pastebin.com/HYPGFTfg](http://pastebin.com/HYPGFTfg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:35:23.853

仅仅因为您已从 KeyboardView 扩展，并不意味着您可以轻松地选择一个 Key 并更改它的绘制方式。

[KeyboardView](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/inputmethodservice/KeyboardView.java)的源代码，尤其是从第[678](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/inputmethodservice/KeyboardView.java#L678)行开始的 for 循环，显示了键盘的绘制有多复杂。

你可以做什么：覆盖 onDraw() 方法，调用 super.onDraw() 然后得到你想要的键，然后只画这个键。您可能需要大量定制，并且可能需要大量复制和粘贴原始代码才能完成任务。

主要问题：这项工作真的有必要吗？我个人不希望某些应用程序改变我众所周知的键盘外观和感觉（只要它不是真正的自定义键盘应用程序：D）

# java - 如何在jsp和java中从其他网站获取内容？？？

> ID：11170586
> 
> 赞同：1
> 
> 时间：2012-06-23T15:12:53.340
> 
> 标签：java, jsp

我是java编程的初学者。我想在基于 Web 的应用程序中建立一个 java 程序员。现在开始我想开发cms，也想从其他网站获取数据，所以我正在寻找有效的代码。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:26:04.503

我猜你想要类似的东西[`java.net.URL`](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URL.html)。

例子：

```
import java.net.*;
import java.io.*;

public class Main {
    public void main(String[] args) {
        URL url = new URL("http://stackoverflow.com");
        URLConnection con = url.openConnection();
        BufferedReader br = new BufferedReader(new InputstreamReader(con.openStream()));
        String line;
        while((line = br.readLine()) != null)
            System.out.println(line);
} 
```

这应该打印出 Stackoverflow.com 的源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T05:42:24.427

使用 JSTL[`<c:import />`](http://www.ibm.com/developerworks/java/library/j-jstl0318/)导入内容。

# ruby-on-rails - 在 sqlite3 表中存储日期

> ID：11170589
> 
> 赞同：0
> 
> 时间：2012-06-23T15:13:44.657
> 
> 标签：ruby-on-rails, datetime, sqlite

我有一个带有日期时间字段的 sqlite3 数据库，我尝试存储的日期/时间的格式是 2012-01-01 07:15:00，尽管数据库将其返回为 2012-24-01T07:00:00+00 :00，解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:18:50.517

尝试将当前时间转换为时间戳：

```
Date.new(YYYY,MM,DD).to_time.to_i 
```

将此时间戳存储到数据库中。

检索时间戳并尝试转换：

```
Time.at(TIMESTAMP) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:58:06.793

最终`DateTime.parse(schedule.time)`用于存储日期并将其转换

# android - PhoneGap/Cordova 暂停/恢复时出现黑屏

> ID：11170592
> 
> 赞同：0
> 
> 时间：2012-06-23T15:14:45.317
> 
> 标签：android, cordova

我有一个简单的 html/javascript 应用程序，可以在 Android 设备上启动并正常运行。但是，当应用程序通过使用“主页按钮”置于后台，然后通过再次单击应用程序回到前台时 - 它以空白屏幕（android 上的白色空白屏幕）开始并保持这种状态直到“后退按钮'被按下。

按下“后退按钮”后，屏幕将刷新到应用程序显示的最后一页。

我是 PhoneGap 的新手，我确信我缺少一些简单/基本的东西 - 关于如何处理“恢复”事件等。我已按照 Phil Mitchell [http:/ /wiki.phonegap.com/w/page/35501397/Tutorials](http://wiki.phonegap.com/w/page/35501397/Tutorials)（顺便说一句，这是一个很好的资源……）

谢谢。

更新 ：

查看 DroidGap 代码后，我尝试添加以下行：-

```
 super.setBooleanProperty("keepRunning", false); 
```

但这似乎没有帮助。我很高兴应用程序在每次输入主页按钮时退出，然后在移动设备上单击应用程序时完全重启。

任何帮助深表感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-14T08:36:48.787

我遇到了同样的问题，我想分享一个对我有用的黑客。

我的应用程序基于 ionic/angular/cordova，而 android 版本在暂停/恢复时给了我大约 50% 的白屏。

当它发生时，点击屏幕上的任意位置或点击后退按钮将使屏幕再次渲染就好了。

我添加了一个与名为 的范围变量绑定的 div `random`，如下所示：

```
 <body ng-app="starter" id="body">
    <div>{{ random }}</div>
    <ion-nav-view>
    </ion-nav-view>
  </body> 
```

然后我在我的 app.js 中添加了一个监听器来捕获`resume event`由 cordova 触发的事件，然后更改随机变量并调用 $apply()，如下所示：

```
document.addEventListener("resume", function() {
  angular.element(document.querySelector('#body')).scope().random = Math.random();
  angular.element(document.querySelector('#body')).scope().$apply();
}) 
```

由于`ion-nav-view`接管了 div 从未出现过的整个屏幕，但 angular 不知道这一点并刷新页面，从而导致整个工作正常。

（我试图将变量绑定到一个不可见的元素，但 Angular 不会刷新页面）

我希望这可以帮助别人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:40:14.927

如果您仍然说“我很高兴应用程序在每次输入主页按钮时退出，然后在移动设备上单击应用程序时完全重启。” 然后去吧。

```
@Override
protected void onStop(){
super.onStop();
} 
```

从您创建活动的地方或从“扩展 DroidGap”的类中尝试此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T21:38:25.040

使用 JS SDK 通过 PhoneGap 渲染页面和通过客户端 FB 身份验证流程“对话”似乎存在问题。如果我禁用客户端身份验证，那么当应用程序从后台（暂停/恢复/等）进入前台时，页面的呈现和显示效果会非常好。

我假设该页面需要感知它正在显示在移动设备上并使用 IOS 或 Androi SDK 进行客户端身份验证..（如果/当我开始测试它时，我会更新答案 - 如果有有谁有更多的光芒，请随意修饰）。

# ios - YUV420p 上的很多绿色 --> iOS 上 OpenGL 2.0 着色器中的 RGB

> ID：11170594
> 
> 赞同：3
> 
> 时间：2012-06-23T15:15:13.303
> 
> 标签：ios, opengl-es, ffmpeg, yuv

我想使用 ffmpeg 和 OpenGL ES 2.0 为 iOS 制作一个电影播放器​​，但我有一些问题。输出 RGB 图像有很多绿色。这是代码和图像

*   480x320 宽度和高度：
*   512x512 纹理宽度和高度

我从 ffmpeg AVFrame 获得了 YUV420p 行数据。

```
 for (int i = 0, nDataLen = 0; i < 3; i++) {
        int nShift = (i == 0) ? 0 : 1;
        uint8_t *pYUVData = (uint8_t *)_frame->data[i];
        for (int j = 0; j < (mHeight >> nShift); j++) {
            memcpy(&pData->pOutBuffer[nDataLen], pYUVData, (mWidth >> nShift));
            pYUVData += _frame->linesize[i];
            nDataLen += (mWidth >> nShift);
        }
    } 
```

并为 Y、U 和 V 通道准备纹理。

```
//: U Texture
    if (sampler1Texture) glDeleteTextures(1, &sampler1Texture);

    glActiveTexture(GL_TEXTURE1);
    glGenTextures(1, &sampler1Texture);
    glBindTexture(GL_TEXTURE_2D, sampler1Texture);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    // This is necessary for non-power-of-two textures
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glEnable(GL_TEXTURE_2D);

    glTexImage2D(GL_TEXTURE_2D, 
                 0, 
                 GL_LUMINANCE, 
                 texW / 2, 
                 texH / 2, 
                 0, 
                 GL_LUMINANCE, 
                 GL_UNSIGNED_BYTE,
                 NULL);

    //: V Texture
    if (sampler2Texture) glDeleteTextures(1, &sampler2Texture);

    glActiveTexture(GL_TEXTURE2);
    glGenTextures(1, &sampler2Texture);
    glBindTexture(GL_TEXTURE_2D, sampler2Texture);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    // This is necessary for non-power-of-two textures
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glEnable(GL_TEXTURE_2D);

    glTexImage2D(GL_TEXTURE_2D, 
                 0, 
                 GL_LUMINANCE, 
                 texW / 2, 
                 texH / 2, 
                 0, 
                 GL_LUMINANCE,
                 GL_UNSIGNED_BYTE,
                 NULL);

    //: Y Texture
    if (sampler0Texture) glDeleteTextures(1, &sampler0Texture);

    glActiveTexture(GL_TEXTURE0);
    glGenTextures(1, &sampler0Texture);
    glBindTexture(GL_TEXTURE_2D, sampler0Texture);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    // This is necessary for non-power-of-two textures
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glEnable(GL_TEXTURE_2D);

    glTexImage2D(GL_TEXTURE_2D, 
                 0, 
                 GL_LUMINANCE, 
                 texW, 
                 texH, 
                 0, 
                 GL_LUMINANCE,
                 GL_UNSIGNED_BYTE, 
                 NULL); 
```

渲染部分如下。

```
int _idxU = mFrameW * mFrameH;
int _idxV = _idxU + (_idxU / 4);

// U data
glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, sampler1Texture);
glUniform1i(sampler1Uniform, 1);

glTexSubImage2D(
                GL_TEXTURE_2D, 
                0, 
                0, 
                0, 
                mFrameW / 2,            // source width
                mFrameH / 2,            // source height
                GL_LUMINANCE,
                GL_UNSIGNED_BYTE, 
                &_frameData[_idxU]);

// V data
glActiveTexture(GL_TEXTURE2);
glBindTexture(GL_TEXTURE_2D, sampler2Texture);
glUniform1i(sampler2Texture, 2);

glTexSubImage2D(
                GL_TEXTURE_2D, 
                0, 
                0, 
                0, 
                mFrameW / 2,            // source width
                mFrameH / 2,            // source height
                GL_LUMINANCE,
                GL_UNSIGNED_BYTE,
                &_frameData[_idxV]);

// Y data
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, sampler0Texture);
glUniform1i(sampler0Uniform, 0);

glTexSubImage2D(
                GL_TEXTURE_2D, 
                0, 
                0, 
                0, 
                mFrameW,            // source width
                mFrameH,            // source height
                GL_LUMINANCE,
                GL_UNSIGNED_BYTE,
                _frameData); 
```

顶点着色器和片段着色器如下。

```
attribute vec4 Position;
attribute vec2 TexCoordIn;

varying vec2 TexCoordOut;
varying vec2 TexCoordOut_UV;

uniform mat4 Projection;
uniform mat4 Modelview;

void main()
{
    gl_Position = Projection * Modelview * Position;
    TexCoordOut = TexCoordIn;
}

uniform sampler2D sampler0; // Y Texture Sampler
uniform sampler2D sampler1; // U Texture Sampler
uniform sampler2D sampler2; // V Texture Sampler

varying highp vec2 TexCoordOut;

void main()
{
    highp float y = texture2D(sampler0, TexCoordOut).r;
    highp float u = texture2D(sampler2, TexCoordOut).r - 0.5;
    highp float v = texture2D(sampler1, TexCoordOut).r - 0.5;

    //y = 0.0;
    //u = 0.0;
    //v = 0.0;

    highp float r = y + 1.13983 * v;
    highp float g = y - 0.39465 * u - 0.58060 * v;
    highp float b = y + 2.03211 * u;

    gl_FragColor = vec4(r, g, b, 1.0);
} 
```

Y 纹理（灰度）是正确的，但 U 和 V 有很多绿色。所以最终的 RGB 图像（Y+U+V）有很多绿色。有什么问题？

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T10:17:20.807

更换`u`和`v`制服（反之亦然），您将获得正确的结果。

所以像素着色器（保持不变）：

```
uniform sampler2D sampler0; // Y Texture Sampler
uniform sampler2D sampler1; // U Texture Sampler
uniform sampler2D sampler2; // V Texture Sampler

varying highp vec2 TexCoordOut;

void main()
{
    highp float y = texture2D(sampler0, TexCoordOut).r;
    highp float u = texture2D(sampler2, TexCoordOut).r - 0.5;
    highp float v = texture2D(sampler1, TexCoordOut).r - 0.5;

    highp float r = y + 1.13983 * v;
    highp float g = y - 0.39465 * u - 0.58060 * v;
    highp float b = y + 2.03211 * u;

    gl_FragColor = vec4(r, g, b, 1.0);
} 
```

和渲染代码：

```
// RENDERING

    int _idxU = mFrameW * mFrameH;
    int _idxV = _idxU + (_idxU / 4);

    // U data
    glActiveTexture(GL_TEXTURE1);
    glBindTexture(GL_TEXTURE_2D, sampler1Texture);

    GLint sampler1Uniform = glGetUniformLocation(programStandard, "sampler2");

    glUniform1i(sampler1Uniform, 1);

    glTexSubImage2D(
                    GL_TEXTURE_2D,
                    0,
                    0,
                    0,
                    mFrameW / 2,            // source width
                    mFrameH / 2,            // source height
                    GL_LUMINANCE,
                    GL_UNSIGNED_BYTE,
                    &_frameData[_idxU]);

    // V data
    glActiveTexture(GL_TEXTURE2);
    glBindTexture(GL_TEXTURE_2D, sampler2Texture);

    GLint sampler2Uniform = glGetUniformLocation(programStandard, "sampler1");
    glUniform1i(sampler2Uniform, 2);

    glTexSubImage2D(
                    GL_TEXTURE_2D,
                    0,
                    0,
                    0,
                    mFrameW / 2,            // source width
                    mFrameH / 2,            // source height
                    GL_LUMINANCE,
                    GL_UNSIGNED_BYTE,
                    &_frameData[_idxV]);

    // Y data
    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, sampler0Texture);

    GLint sampler0Uniform = glGetUniformLocation(programStandard, "sampler0");
    glUniform1i(sampler0Uniform, 0);

    glTexSubImage2D(
                    GL_TEXTURE_2D,
                    0,
                    0,
                    0,
                    mFrameW,            // source width
                    mFrameH,            // source height
                    GL_LUMINANCE,
                    GL_UNSIGNED_BYTE,
                    _frameData);

    //draw RECT
    glVertexAttribPointer(ATTRIB_VERTEX, 3, GL_FLOAT, 0, 0, squareVertices);
    glEnableVertexAttribArray(ATTRIB_VERTEX);

    //ATTRIB_TEXTUREPOSITON
    glVertexAttribPointer(ATTRIB_TEXTUREPOSITON, 2, GL_FLOAT, 0, 0, textureCoords);
    glEnableVertexAttribArray(ATTRIB_TEXTUREPOSITON);

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

    free(_frameData);

    [(EAGLView *)self.view presentFramebuffer]; 
```

结论：`u <-> v`制服。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:22:25.190

由于 iOS 支持 rgb_422 纹理，而不是使用三个亮度纹理，而是使用一个 rgb_422 纹理。[http://www.opengl.org/registry/specs/APPLE/rgb_422.txt](http://www.opengl.org/registry/specs/APPLE/rgb_422.txt)。

编辑：哎呀，YUV480p 与 YUV422 不同。在这种情况下，由于其奇怪的布局，您必须在将 YUV 数据作为纹理上传之前将其转换为 RGB 数据。

# delphi - TBitMap 到 PBitMap KOL

> ID：11170595
> 
> 赞同：1
> 
> 时间：2012-06-23T15:15:14.223
> 
> 标签：delphi, graphics, delphi-7, kol

我想在 KOL 中将 TBitMap 转换为 PBitMap。

我试过这个，但我得到一张黑色图片作为输出：

```
function TbitMapToPBitMap (bitmap : TBitMap) : PbitMap;
begin
 result := NIL;
 if Assigned(bitmap) then begin
  result := NewBitmap(bitmap.Width, bitmap.Height);
  result.Draw(bitmap.Canvas.Handle, bitmap.Width, bitmap.Height);
 end;
end; 
```

知道有什么问题吗？我正在使用Delphi7。

感谢您的帮助。

编辑：新代码：

```
function TbitMapToPBitMap (const src : TBitMap; var dest : PBitMap) : Bool; 
begin
 result := false;
 if (( Assigned(src) ) and ( Assigned (dest) )) then begin
 dest.Draw(src.Canvas.Handle, src.Width, src.Height);
 result := true;
 end;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
 TBitMapTest : TBitMap;
 PBitMapTest : PBitMap;
begin
 TBitMapTest := TBitMap.Create;
 TBitMapTest.LoadFromFile ('C:\test.bmp');
 PBitMapTest := NewBitMap (TBitMapTest.Width, TBitMapTest.Height);
 TbitMapToPBitMap (TBitMapTest, PBitMapTest);
 PBitMapTest.SaveToFile ('C:\test2.bmp');
 PBitMapTest.Free;
 TBitMapTest.Free;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:36:13.587

要回答您的问题，为什么您的目标图像是黑色的；这是因为您将这些目标图像绘制为源图像和黑色它们是因为将`NewBitmap`图像初始化为黑色。

想要一个`TBitmap`到KOL怎么复制或者转换`PBitmap`我只找到了一种方法（可能是我漏掉了KOL里面的这个功能，但是即使是这样，下面代码中使用的方法还是很有效的）。您可以使用 Windows GDI 功能进行位块传输，[`BitBlt`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183370%28v=vs.85%29.aspx)它只是将指定区域从一个画布复制到另一个画布。

下面的代码，当你点击按钮创建VCL和KOL位图实例，将图像加载到VCL位图，调用VCL到KOL位图复制函数，如果这个函数成功，将KOL位图绘制到表单画布并释放两个位图实例：

```
uses
  Graphics, KOL;

function CopyBitmapToKOL(Source: Graphics.TBitmap; Target: PBitmap): Boolean;
begin
  Result := False;
  if Assigned(Source) and Assigned(Target) then
  begin
    Result := BitBlt(Target.Canvas.Handle, 0, 0, Source.Width, Source.Height,
      Source.Canvas.Handle, 0, 0, SRCCOPY);
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  KOLBitmap: PBitmap;
  VCLBitmap: Graphics.TBitmap;
begin
  VCLBitmap := Graphics.TBitmap.Create;
  try
    VCLBitmap.LoadFromFile('d:\CGLIn.bmp');
    KOLBitmap := NewBitmap(VCLBitmap.Width, VCLBitmap.Height);
    try
      if CopyBitmapToKOL(VCLBitmap, KOLBitmap) then
        KOLBitmap.Draw(Canvas.Handle, 0, 0);
    finally
      KOLBitmap.Free;
    end;
  finally
    VCLBitmap.Free;
  end;
end; 
```

# beanstalkd - Stalker worker 中不包含自定义模型

> ID：11170596
> 
> 赞同：1
> 
> 时间：2012-06-23T15:15:21.567
> 
> 标签：beanstalkd

我试图让 Stalker 在我的 Ramaze 应用程序中与 Beanstalkd 一起工作。我可以将作业排入队列，但我的工作人员无法识别我的自定义模型。这是我的jobs.rb：

要求 'stalker' 包括 Stalker BEANSTALK_URL = '0.0.0.0:11300' job 'award_badges' do |args| Badge.award_badges(args[:user_id], args[:badge_category]) 结束

我用 stalker jobs.rb 运行 jobs.rb 并总是收到错误：异常 NameError -> 未初始化的常量徽章

在所有 stalker 示例中都没有包含任何库，Stalker 是如何知道这些类的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T07:49:20.660

这是因为你没有用你的工作加载你的环境，这是一个格式良好的**jobs.rb**：

```
require File.expand_path("../environment", __FILE__)

require 'stalker'
include Stalker

job "my_job" do |args|
# Do something here...
end 
```

正如你在前三行中看到的，我们首先需要我们的 rails 环境，然后是 stalker，所以它可以知道你的模型和东西。

干杯!

# php - 更新具有相同值的列

> ID：11170598
> 
> 赞同：0
> 
> 时间：2012-06-23T15:15:40.927
> 
> 标签：php, mysql

我有一个名为“产品”的表，其中包含大约 500 个产品，我需要在前 350 个产品中插入“示例描述”的描述和其他 150 个产品的“示例 2 描述”。

我怎么能这样做？

非常感谢！

代码：

```
UPDATE ps_product_lang SET description = CASE WHEN id_product <= 2124 THEN '<div style="line-height:24px;color:#000000;line-height:24px;">' ELSE '<div style="line-height:60px;color:#FFFFFF;line-height:28px;">' END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:18:41.910

假设前 350 个产品的 id 从 1 到 350，你可以试试这个：

```
UPDATE products
SET description = CASE
    WHEN id <= 350 THEN 'Sample description'
    ELSE 'sample description 2'
END 
```

# python - 找出 Python 对象的创建位置

> ID：11170599
> 
> 赞同：1
> 
> 时间：2012-06-23T15:15:44.863
> 
> 标签：python, memory-leaks

有没有办法找出第一次实例化 Python 对象的位置？像行号甚至是创建时的完整回溯？

对于内存分析，我想在运行后检查所有对象。（我知道内存分析工具，但它们很难安装或不执行此任务）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:20:40.457

在本机 Python 中不可能在创建对象后从对象中获取此信息，但您可以覆盖`__new__()`基类上的方法以将其记录在对象的某个位置（从`inspect`模块中获取）。

# javascript - 如何制作动态 getter/setter

> ID：11170602
> 
> 赞同：0
> 
> 时间：2012-06-23T15:16:05.797
> 
> 标签：javascript

我已经知道 getter/setter 是如何工作的。例如，使 inneHTML 在 NodeLists 上工作

```
Object.defineProperty(NodeList.prototype,'innerHTML',{set:function(a,b){for(b in this)if(this[b])this[b]['innerHTML']=a}}) 
```

我想制作一个基于正在访问的属性输出某些内容的对象。

前任：

```
dynamicGetter = function(property){return querySelectorAll(property)}
myObject["div>ul>li>a"][0].innerHTML = "foo"
myObject.div[0].style.background="red" 
```

我怎样才能做到这一点？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:55:12.707

操作方法如下：目前，这只适用于 Firefox :(

```
myObject = Proxy.create({
  get: function(x,property) {
    return document.querySelectorAll(property);
  }
});

myObject["div>ul>li>a"][0].innerHTML = "foo"
myObject.div[0].style.background="red" 
```

# html5-audio - HTML5 音频：使用 JavaScript 更改外观

> ID：11170603
> 
> 赞同：0
> 
> 时间：2012-06-23T15:16:19.870
> 
> 标签：html5-audio

在 HTML5 中，可以使用简单的标签来包含音频：

```
<audio src="anySong.m4a" controls></audio>​ 
```

现在我尝试使用 JavaScript 和 JQuery 更改外观，但它不起作用。任何人都可以修复我的示例或提出另一种非常简单的方法吗？

这里的例子：http: [//jsfiddle.net/T47XQ/5/](http://jsfiddle.net/T47XQ/5/)

HTML：

```
<audio id="audio" src="http://a3.mzstatic.com/us/r1000/075/Music/35/e5/c6/mzm.pffzpdco.aac.p.m4a">
</audio>

<div id="escolta">escolta</div>
<div id="pausa">pausa</div> 
```

JAVASCRIPT：

```
$(function(){

   $("#escolta").click(function() {
     $("#audio").play();
   });

   $("#pausa").click(function() {
     $("#audio").pause();
   });

}); 
```

CSS：

```
#escolta,#pausa { font-family: Tahoma;letter-spacing:1px;font-size:11px;color: #6666;width: 80px;text-align: center;height: 20px;line-height: 20px;background-color: #ccc;cursor: pointer;}
#escolta {position: absolute;top: 20px;left: 20px}
#pausa {position: absolute;top: 20px;left: 150px} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:08:37.980

用于`$('id')[0]`获取原始元素（[http://jsfiddle.net/T47XQ/6/](http://jsfiddle.net/T47XQ/6/)）

# c++ - Eclipse，CDT C++ java ctrl + alt + o 自动导入的模拟

> ID：11170605
> 
> 赞同：3
> 
> 时间：2012-06-23T15:16:36.223
> 
> 标签：c++, eclipse, eclipse-cdt

我打算在 Eclipse 中编写 C++，我发现没有像 ctrl + alt + o 这样的自动导入快捷方式对于 Java 来说是非常不寻常的。Eclipse中的C++有这样的东西吗？如果有，我该如何调整它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-05T19:49:12.673

我不确定 Eclipse 在第一次问这个问题时是否有这个选项。我现在经常使用 Eclipse，你这样做的方式是：**ctrl+ Shift + o**

# linux-kernel - 如何在这个联合中访问这个比特率值？

> ID：11170608
> 
> 赞同：1
> 
> 时间：2012-06-23T07:30:22.267
> 
> 标签：linux-kernel

我正在编写一个内核模块，该模块需要从此联合中读取比特率的值：

```
union   iwreq_data
{
    .......
    struct iw_param bitrate;    /* default bit rate */

     ....
} 
```

此代码取自 wireless.h 任何人都知道我如何获取它的值？我的意思是我应该使用什么结构 net_device？wireless_dev？我正在使用 linux 内核 2.6.35

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:27:08.977

如果有`union iwreq_data *data`，您可以简单地使用`data->bitrate.value`.

但是这个结构不是永久存在的，所以你不能为给定的设备获得指向它的指针。该结构在设置或获取设备参数时使用，并且仅在设置/获取操作期间存在。
设置比特率时，驱动以驱动依赖的方式保存新的值，并释放结构（通常分配在设置函数的堆栈上）。

你可以试着打电话`ieee80211softmac_wx_get_rate`来获取。给它一个指向未初始化的指针`union iwreq_data`，它将填充比特率。

# jpa-2.0 - 如何使用 JPA 和 CriteriaBuilder 按结果计算组？

> ID：11170609
> 
> 赞同：5
> 
> 时间：2012-06-23T15:17:24.520
> 
> 标签：jpa-2.0

我认为这几乎是不可能的或非常棘手的。我正在使用 CriteriaBuilder、JPA 2.0、Hibernate 和 MariaDB，并希望使用 CriteriaBuilder 构建以下查询：

```
SELECT COUNT(*) FROM
   (SELECT DISTINCT(SomeColumn) // I think this is not possible?
    FROM MyTable
    WHERE ... COMPLEX CLAUSE ...
    GROUP BY SomeColumn) MyTable 
```

我的问题：可能吗？如果，如何？

感谢您解决这个问题！

标记

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T07:00:54.617

此示例假定您正在使用元模型生成。

```
CriteriaQuery<Long> cq = cb.createQuery(Long.class);
Subquery<SomeColumnType> subcq = cq.subquery(SomeColumnType.class);
Root<MyTable> from = subcq.from(MyTable.class);
subcq.select(from.get(MyTable_.someColumn));
subcq.where(** complex where statements **);
subcq.groupBy(from.get(MyTable_.someColumn));
cq.select(cb.count(subcq)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-14T08:22:40.810

我有一个类似的问题，按元素计算不同的组，并偶然发现了这个线程，基于已经存在的答案我想出了以下

```
CriteriaBuilder builder = entityManager.getCriteriaBuilder();

CriteriaQuery<Long> countQuery = builder.createQuery(Long.class);
Root<Jpa1> countRoot = countQuery.from(Jpa1.class);

Subquery<Long> query = countQuery.subquery(Long.class);
Root<Jpa1> root = query.from(Jpa1.class);

applyFilter(query, root);
query.groupBy(root.get("groupBy_column1"), root.get("groupBy_column2"));
query.select(builder.min(root.get("id_column")));

countQuery.where(builder.in(countRoot.get("id_column")).value(query));
return countQuery.select(builder.count(countRoot.get("id_column"))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-11T14:47:01.727

如果您有 Spring Boot 并且想要做同样的事情，那么有一个更好的解决方法，它只能通过使用本机`SQL_CALC_FOUND_ROWS`和`FOUND_ROWS`（它不适用于 MySQL 8）适用于 MySql 5/Maria；

这种集成的主要思想是 Spring-Data 的灵活性和覆盖默认值的能力，`JpaRepositoryFactoryBean`如下所示

步骤 #1 - 创建自定义`CustomJpaRepositoryFactoryBean`：

```
/**
* 
* @author ehakawati
*
* @param <R>
* @param <T>
* @param <I>
*/
public class CustomJpaRepositoryFactoryBean<R extends JpaRepository<T, I>, T, I extends Serializable>
        extends JpaRepositoryFactoryBean<R, T, I> {

    public CustomJpaRepositoryFactoryBean(Class<? extends R> repositoryInterface) {
        super(repositoryInterface);
    }

    @Override
    protected RepositoryFactorySupport createRepositoryFactory(EntityManager entityManager) {
        RepositoryFactorySupport repositoryFactorySupport = super.createRepositoryFactory(entityManager);
        repositoryFactorySupport.setRepositoryBaseClass(CustomJpaRepository.class);
        return repositoryFactorySupport;
    }

} 
```

步骤 #2 - 创建自定义`CustomJpaRepository`

```
 /**
 * 
 * @author ehakawati
 *
 * @param <T>
 * @param <ID>
 */
public class CustomJpaRepository<T, ID extends Serializable> extends SimpleJpaRepository<T, ID>
        implements Repository<T, ID> {

    private final EntityManager em;

    /**
     * 
     * @param entityInformation
     * @param entityManager
     */
    public CustomJpaRepository(JpaEntityInformation<T, ?> entityInformation, EntityManager entityManager) {
        super(entityInformation, entityManager);
        this.em = entityManager;

    }

    /**
     * 
     * @param domainClass
     * @param entityManager
     */
    public CustomJpaRepository(Class<T> domainClass, EntityManager entityManager) {
        super(domainClass, entityManager);
        this.em = entityManager;
    }

    /**
     * Reads the given {@link TypedQuery} into a {@link Page} applying the given
     * {@link Pageable} and {@link Specification}.
     *
     * @param query       must not be {@literal null}.
     * @param domainClass must not be {@literal null}.
     * @param spec        can be {@literal null}.
     * @param pageable    can be {@literal null}.
     * @return
     */
    protected <S extends T> Page<S> readPage(TypedQuery<S> query, final Class<S> domainClass, Pageable pageable,
            @Nullable Specification<S> spec) {

        if (pageable.isUnpaged()) {
            return super.readPage(query, domainClass, pageable, spec);
        }

        query.setFirstResult((int) pageable.getOffset());
        query.setMaxResults(pageable.getPageSize());

        return PageableExecutionUtils.getPage(query.getResultList(), pageable, () -> getNativeCount());
    }

    /**
     * 
     */

    protected long getNativeCount() {

        final Query query = em.createNativeQuery("SELECT FOUND_ROWS() as `count`");

        return ((BigInteger) query.getSingleResult()).longValue();

    }

} 
```

步骤#3 - `PageableQueriesInterceptor`：

```
 /**
 * 
 * @author ehakawati
 *
 * @param <T>
 * @param <ID>
 */
public class PageableQueriesInterceptor extends EmptyInterceptor {

    private static final Pattern PATTERN = Pattern.compile(".*?limit \\?(, \\?)?$");
    private static final long serialVersionUID = 1L;

    @Override
    public String onPrepareStatement(String sql) {

        if (PATTERN.matcher(sql).find()) {
            sql = sql.replaceFirst("select", "select SQL_CALC_FOUND_ROWS ");
        }

        return sql;
    }
} 
```

步骤 #4 - 启用`PageableQueriesInterceptor`：

```
sprint.jpa.properties.hibernate.ejb.interceptor= com.****.****.******.betterpaging.PageableQueriesInterceptor 
```

享受

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-04T19:54:06.157

CriteriaBuilder.countDistinct() 方法可以很好地计算 groupBy 结果。

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<Long> cq = cb.createQuery(Long.class);

Root<MyEntity> root = cq.from(MyEntity);

cq.select(cb.countDistinct(root("entityField")));
cq.where(** your criteria **);

var result = em.createQuery(cq).getSingleResult();
var m = Math.toIntExact(result); 
```

这就像 SQL 查询

```
SELECT COUNT(DISTINCT myEntity.entityField) FROM myEntity WHERE **blah** ; 
```

当然，countDistinct（如 COUNT(DISTINCT ...)）可以根据需要列出多个列以用于分组目的。

# android - Listview 模糊了 Android 2.3 中的线性布局

> ID：11170610
> 
> 赞同：0
> 
> 时间：2012-06-23T15:17:26.177
> 
> 标签：android, layout

为 Android 2.3 开发，我有一个关于布局的问题。我使用垂直线性布局。在其中，有两个图像，一个列表视图和另一个线性布局，这次是水平的。不知何故，列表视图一直缩小到视图的底部，从而掩盖了第二个线性布局。删除列表视图会为第二个布局带来正确的结果。我已经为这两种布局使用了所有高度限定符，但这并没有改变任何东西。任何想法表示赞赏！

最好的问候，马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:40:52.360

添加`android:layout_weight="1"`列表视图和所有其他组件的 0 终于成功了！无论如何！

# logical-operators - erreur：建议在 '!' 的操作数周围加上括号 或将 '&' 更改为 '&&' 或 '!' 到'~'

> ID：11170612
> 
> 赞同：0
> 
> 时间：2012-06-23T15:17:48.447
> 
> 标签：logical-operators

我正在尝试从 sourceforge 编译 dapl-myrinet-12-0.12

我有

```
/root/dapl-myrinet-12-0.12/dapl/udapl/../common/dapl_ep_modify.c:584: erreur:
suggest parentheses around operand of ‘!’ or change ‘&amp;’ to ‘&amp;&’ or ‘!’ to ‘~’ 
```

这是“有问题的”行：

```
if (ep_param->recv_evd_handle != NULL &&
    (DAPL_BAD_HANDLE (ep_param->recv_evd_handle, DAPL_MAGIC_EVD) ||
    ! ((DAPL_EVD *)ep_param->recv_evd_handle)->evd_flags & DAT_EVD_DTO_FLAG)) 
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:22:48.150

就像错误提示的那样，代码在条件的最后部分遗漏了几个括号（*更正*的条件在此处展开​​以突出显示匹配的括号）：

```
if (
    ep_param->recv_evd_handle != NULL &&
    (
        DAPL_BAD_HANDLE (ep_param->recv_evd_handle, DAPL_MAGIC_EVD) ||
        !(
            ((DAPL_EVD *)ep_param->recv_evd_handle)->evd_flags & DAT_EVD_DTO_FLAG
         ) 
    )
) 
```

`-Wno-parentheses`您还可以使用开关从 GCC 禁用此检查（如果它是您使用的编译器） 。不管怎样，你应该把这个报告给程序的维护者，让他修复他的代码。

# objective-c - ViewController respondsToSelector：发送到已释放实例的消息（CRASH）

> ID：11170614
> 
> 赞同：95
> 
> 时间：2012-06-23T15:18:07.710
> 
> 标签：objective-c, ios, xcode, crash

好的，这是交易，我**讨厌**提出有关我的调试和崩溃的问题。因为我通常自己处理它们，但即使**已经查看了多个问题，我****也无法解决**这个问题。

 **好的，这就是问题所在，我发现我的应用程序随机打开和关闭，并与此堆栈跟踪一起崩溃：

```
*** -[ViewController respondsToSelector:]: message sent to deallocated instance 0x1e5d2ef0 
```

哪里`ViewController`可能会有所不同，有时是我的代码崩溃的地方，与那个特定的地方**无关**`ViewController`，也不拥有或调用它。

另外，为了获得控制台跟踪，我启用了 Zombies，否则我根本不会得到控制台打印，我只会得到: `objc_msgSend`，我知道这意味着我正在发送已发布的消息。但我找不到那在哪里......我真的被困住了！通常我**总是**调试我的崩溃，所以我真的坚持这一点。

同样，这在不同的时间和不同的地方崩溃，打开和关闭。**而且它崩溃的**地方几乎与`ViewController`. 我觉得这很令人困惑。

你需要我的任何代码吗？我有**很多**文件，由于它在不同的地方崩溃，分发我的代码将是一团糟！

我尝试添加符号断点但没有成功，并且 Zombies 在 iOS 的 Instruments 应用程序中不可用。我无法在模拟器上运行我的应用程序，因为它有不支持的架构框架。

谢谢大家...

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-06-23T16:12:51.520

使用*Instruments*来追踪解除分配的实例错误。分析您的应用程序（`Cmd ⌘</kbd>+`I`) and choose *Zombies* template. After your application is running, try to crash it. You should get something like that:`

![在此处输入图像描述](../Images/d2db363eb84e3788f65e51102da8bba5.png)

单击弹出窗口中地址旁边的箭头以显示在释放后调用的对象。

![在此处输入图像描述](../Images/fda4e0ecd23d1ee15783dffb874c0dbf.png)

您现在应该看到更改了此对象的保留计数的每个调用。这可能是因为直接发送保留/释放消息以及耗尽自动释放池或插入 NSArrays。

*RefCt*列显示调用操作后的 retainCount，而*责任调用者*显示执行该操作的类名和方法。当您双击任何保留/释放时，仪器将向您显示执行此操作的代码行（如果这不起作用，您可以通过选择它并在*扩展详细信息*窗格中选择它的对应项来检查调用）：

![在此处输入图像描述](../Images/fe3be04b0ee990c365e22bc718d5678a.png)

这将让您检查对象的所有*retainCount*生命周期，并且您可能会立即发现您的问题。您所要做的就是找到缺少的最新*版本的**保留*。

 ** * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-08-09T00:41:46.727

有类似的问题。在我的例子中，viewController 需要获取 navigationController 事件，所以它注册为导航控制器委托：

```
 self.navigationController.delegate = self; 
```

当该控制器被解除分配但仍然是视图控制器的委托时，就会发生崩溃。在 dealloc 中添加此代码无效：

```
-(void) dealloc
{
    if (self.navigationController.delegate == self)
    {
        self.navigationController.delegate = nil;
    } 
```

因为在调用 dealloc 时，视图控制器已经从视图层次结构中移除了，所以 self.navigationController 为 nil，所以比较肯定会失败！:-(

解决方案是添加此代码以检测 VC 在实际这样做之前离开视图层次结构。它使用 iOS 5 中引入的方法来确定视图何时被弹出而不被推送

```
-(void) viewWillDisappear:(BOOL) animated
{  
   [super viewWillDisappear:animated];
   if ([self isMovingFromParentViewController])
   {
      if (self.navigationController.delegate == self)
      {
           self.navigationController.delegate = nil;
      }
   }
} 
```

没有更多的崩溃！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-08T00:30:42.727

对于无法解决的任何人，这里有一些其他技术：

[https://stackoverflow.com/a/12264647/539149](https://stackoverflow.com/a/12264647/539149)

[https://stackoverflow.com/a/5698635/539149](https://stackoverflow.com/a/5698635/539149)

[https://stackoverflow.com/a/9359792/539149](https://stackoverflow.com/a/9359792/539149)

[https://stackoverflow.com/a/15270549/539149](https://stackoverflow.com/a/15270549/539149)

[https://stackoverflow.com/a/12098735/539149](https://stackoverflow.com/a/12098735/539149)

您可以在 Xcode 5 中运行 Instruments，方法是单击项目弹出窗口->Edit Scheme...Profile ->Instrument 并选择 Allocations 或 Leaks，然后分析您的应用程序，然后停止 Instruments，单击 Allocations 中的信息按钮和“启用 NSZombie 检测” .

**但是，对于直接来自 com.apple.main-thread 的消息，这可能不会显示任何内容。**

我在这个问题上敲了两个多小时，结果证明是过度发布，我通过暴力评论我的项目副本发现了这一点，直到我找到了罪魁祸首：

```
[viewController release];
viewController = NULL; 
```

**问题是 release 没有将变量设置为 NULL。**

这意味着将其设置为 NULL 会再次调用 release，递减 refcount 并立即释放内存，直到稍后引用 viewController 的变量完成。

因此，要么启用 ARC，要么确保您的项目始终使用 release 或 NULL，但不能同时使用两者。我的偏好是使用 NULL，因为这样就没有机会引用僵尸，但它使查找对象被释放的位置变得更加困难。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-25T03:50:55.467

我昨天在 iOS 中遇到了同样的问题。我在应用程序“关于”子视图中创建了 IAP，并在“关于”视图DidLoad 中添加了事务观察器。第一次购买没有问题，但是回到主窗口再次进入about subview进行购买后，出现“message sent to deallocated instance”的问题，App崩溃了。

```
- (void)viewDidLoad
{
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];                                           object:nil];
} 
```

在dealloc中删除Transaction Observer后，问题就解决了。

```
- (void)dealloc
{
    // Even though we are using ARC, we still need to manually stop observing any
    // NSNotificationCenter notifications.  Otherwise we could get "zombie" crashes when
    // NSNotificationCenter tries to notify us after our -dealloc finished.

    [[SKPaymentQueue defaultQueue] removeTransactionObserver:self];
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-01T05:42:20.747

我有一个非常相似的问题，我发现这是由于导航控制器代表设置。

下面解决了我的问题，

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    if (self.navigationController.delegate != self) {
        self.navigationController.delegate = self;
    }
}

-(void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];

    if (self.navigationController.delegate == self) {
        self.navigationController.delegate = nil;
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-09T15:05:23.833

在 OS X 中有同样的问题。

`- (void)dealloc`正如@SoftwareEvolved 已经说过的那样，解决这个方法还不够。但不幸`- (void)viewWillDisappear`的是，仅适用于 10.10 及更高版本。

我在我的 NSViewController 子类中引入了自定义方法，其中将所有僵尸危险引用设置为 nil。在我的情况下，这是`NSTableView`属性（`delegate`和`dataSource`）。

```
- (void)shutdown
{
  self.tableView.delegate = nil;
  self.tableView.dataSource = nil;
} 
```

就这样。每次我要从超级视图中删除视图时都需要调用这个方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-12T05:53:29.807

我有同样的问题。很难找到哪个委托导致问题，因为它没有指示任何行或代码语句所以我尝试了一些方法，也许它对你有帮助。

1.  打开 xib 文件并从文件的所有者处，选择“显示连接检查器”右侧菜单。代表被列出，将它们设置为 nil 是可疑的。
2.  （与我的情况相同）像 Textfield 这样的属性对象可能会产生问题，因此将其代表设置为零。

> ```
> -(void) viewWillDisappear:(BOOL) animated{
> 
> [super viewWillDisappear:animated];
> 
> if ([self isMovingFromParentViewController]){
> 
> self.countryTextField.delegate = nil;
> 
> self.stateTextField.delegate = nil;
> 
> }
> 
> } 
> ```***

# spss - SPSS中的多项逻辑回归步骤

> ID：11170620
> 
> 赞同：0
> 
> 时间：2012-06-22T18:17:27.820
> 
> 标签：spss

我有适合多项逻辑回归的数据，但我不知道如何制定模型来预测我的 Y。

*   如何使用 SPSS 执行多项 Logistic 回归？
*   逐步方法如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:29:00.460

有很多 SPSS 多项逻辑回归的注释输出示例：

*   [加州大学洛杉矶分校示例](http://www.ats.ucla.edu/stat/spss/output/mlogit.htm)
*   [我自己的链接和资源列表](http://jeromyanglim.blogspot.com.au/2009/12/multinomial-logistic-regression-spss.html)

逐步方法提供了一种数据驱动的方法来选择预测变量。一般来说，使用数据驱动或直接输入或分层方法的决定与您是否要测试理论（即直接输入或分层）或您是否想简单地优化预测（即逐步和相关方法）有关。

# android - Android 将链接之类的文本在按下时显示一个弹出窗口

> ID：11170621
> 
> 赞同：0
> 
> 时间：2012-06-23T15:19:01.083
> 
> 标签：android

我的 android 应用程序中有一些线性布局的文本视图。在它们旁边，我想在表单 [?] 中放一个小问号，当点击它时会显示一个包含一些信息的弹出窗口。我可以用一个按钮来做到这一点，但它会非常大。

有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:29:08.447

您可以将 a`TextView`与文本一起使用`?`。

*   将宽度设置为`wrap_content`
*   处理`onClick`事件以打开弹出窗口

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T15:30:31.200

您可以在新的 TextView 中设置问号，并通过`onClickListener(View.OnClickListener l)`. 从那里您可以使用该`getId()`方法来确定被调用的问号。然后，您可以使用 switch 语句来拆分您的程序流，并在 switch 语句中使用您想要的任何内容。

Android参考中的TextView：http: [//developer.android.com/reference/android/widget/TextView.html](http://developer.android.com/reference/android/widget/TextView.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T15:38:32.563

用来`TextView`显示 **？** 并使用[PopupWindow](http://developer.android.com/reference/android/widget/PopupWindow.html)在 textview click 上显示消息：

```
TextView t = (TextView)findViewById(R.id.TextView01);
    t.setOnClickListener(this);
}

public void onClick(View arg0) {
    // OPEN PopupWindow HERE
    } 
```

以及我们如何创建弹出窗口，您可以查看本教程以获取帮助：

[使用 PopupWindow 的示例](http://android-er.blogspot.in/2012/03/example-of-using-popupwindow.html)

# objective-c - 安装目标 c 编译器

> ID：11170622
> 
> 赞同：4
> 
> 时间：2012-06-23T15:19:01.507
> 
> 标签：objective-c, ubuntu, gnu

我想为ubuntu安装objective c编译器。
该站点用于在 ubuntu 上安装 GNUstep。 [http://www.techotopia.com/index.php/Installing_and_Using_GNUstep_and_Objective-C_on_Linux](http://www.techotopia.com/index.php/Installing_and_Using_GNUstep_and_Objective-C_on_Linux) 然后在终端中按以下顺序编写命令-

* * *

```
sudo apt-get install gnustep  
sudo apt-get install gnustep-devel 
```

然后，我编写了我的示例代码并将其保存为 hello.m

* * *

```
#import <Foundation/Foundation.h>
int main (int argc, const char * argv[])
{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

    NSLog (@"hello world");
    [pool drain];
    return 0;
} 
```

然后，我输入终端

* * *

```
. /usr/share/GNUstep/Makefiles/GNUstep. 
```

* * *

```
gcc `gnustep-config --objc-flags` -lgnustep-base hello.m -o hello 
```

然后，出现一条错误消息

* * *

```
gcc: gnustep-config --objc-flags: No such file or directory
hello.m:1:23: fatal error: Foundation.h: No such file or directory
compilation terminated. 
```

然后，我写了

* * *

```
sudo apt-get install gobjc 
```

然后，终端显示

* * *

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
gobjc is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 205 not upgraded. 
```

然后，我再次编译，但它再次显示相同的错误。

* * *

```
hp@ubuntu:~$ gcc 'gnustep-config --objc-flags' -lgnustep-base hello.m -o hello
gcc: gnustep-config --objc-flags: No such file or directory
hello.m:1:23: fatal error: Foundation.h: No such file or directory
compilation terminated. 
```

所以，需要一些帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:00:58.367

尝试运行：

```
gnustep-config --objc-flags 
```

自行检查它是否返回错误或适当的 gcc 标志等。

另外，尝试找到包含目录的位置并使用 -Idir 选项将其显式添加到 gcc

# git - 尝试在 Ubuntu Lucid 10.04 LTS 中安装 git

> ID：11170623
> 
> 赞同：11
> 
> 时间：2012-06-23T15:19:01.770
> 
> 标签：git, ubuntu-10.04

我已经使用安装了 Git

```
sudo apt-get install git-core 
```

之后，当我尝试跑步时，`git`我得到了

> -bash：git：找不到命令。

我正在使用 Ubuntu 10.04 LTS。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-09-10T22:55:38.057

刚刚在其他来源找到：

```
sudo apt-get install python-software-properties
sudo add-apt-repository ppa:git-core/ppa
sudo apt-get update
sudo apt-get install git 
```

这将安装最新的稳定 git 版本。Ubuntu 的存储库拥有最古老的存储库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T06:08:37.207

我收到了错误

```
sudo apt-get install git-core: command not found 
```

添加存储库后

```
sudo add-apt-repository ppa:pdoes/ppa 
```

然后运行这个命令，它仍然给我同样的结果。

`sudo apt-get install git-core`

但是这个命令为我做了所有的事情

```
sudo apt-get install git-all 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T19:10:59.663

我不会从 Ubuntu 本身安装软件包，git 版本将是 1.7.0.4

我建议使用我的 PPA，因为您将获得最新版本，因为我写这篇文章时它会是 1.7.11.1

将我的 Ubuntu git 存储库添加到您的系统

`sudo add-apt-repository ppa:pdoes/ppa`

然后你可以做`sudo apt-get install git-core`

有关更多信息，请参见我的网站：[Ubuntu 的 Git 包](http://blog.avirtualhome.com/git-packages-for-ubuntu/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-18T06:24:11.140

```
 sudo apt-get update
          sudo apt-get install git 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-19T18:15:19.823

参考上面的#3。命令不起作用。

![在此处输入图像描述](../Images/88794699d0d8bd34bade26e5a58e1018.png)

# windows - 使用 Git Bash 退出文件夹

> ID：11170633
> 
> 赞同：36
> 
> 时间：2012-06-23T15:20:16.010
> 
> 标签：windows, git, github, git-bash

我正在使用 Git Bash 并正在尝试一些事情，例如向 GitHub 进行“提交”和“推送”。我想退出当前目录`C:\user\myUsername\app`并进入`C:\user\myUsername`文件夹。

我在 Git Bash 中编写什么命令？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-23T18:21:38.003

要将 git-bash 中的目录更改为该特定路径，您可以使用以下命令：

```
cd /c/user/myUsername 
```

基本上你必须用标准斜杠替换反斜杠，或者如果你只是想去你可以使用的父目录：

```
cd .. 
```

正如您已经收到的关于您的问题的评论中所述...

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2015-02-11T09:03:36.903

只是想添加，确保在 cd 和 .. 之间插入空格

```
no: cd..
yes: cd .. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-18T06:23:31.067

如果您想上移一个目录，只需键入 command`cd ..`如果您正在学习任何教程，他们很可能会使用 macOS，这意味着他们将使用自己的 linux 命令，例如

> `cd/home/your username`.所以只需点击输入`cd ..`它会导致转到上一个目录。很可能人们会这样输入，`cd ..users/username`所以不要犯那个错误；只需键入`cd ..`.

其他错误：不要输入 :-`cd..` 做 :-`cd ..`

在 cd 和点之间留出空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-26T16:42:26.960

如果您想在 git bash 中快速向上移动一个目录，请键入命令 cd ../ 并确保 cd 和 .. 之间有一个空格。如果我键入 cd ..，我的 Gitbash 版本将不会执行任何操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-09T06:54:07.940

您也可以在 git-bash 中使用此命令返回上一个目录：

```
 cd - 
```

上述命令的作用与`cd ..`

# iphone - 连接多个按钮：一个动作的倒带和播放/暂停按钮

> ID：11170634
> 
> 赞同：0
> 
> 时间：2012-06-23T15:20:32.927
> 
> 标签：iphone

我的应用中有多个 UIButton。想要连接倒带和播放/暂停按钮以执行一项操作。根本不为应用程序使用界面构建器。

现在快退按钮按下时有这个方法

```
-(void)rewind:(id)sender{
[timer invalidate];    
audioPlayer.currentTime = 0;
MainViewController *viewController = [[MainViewController alloc] init];
viewController.view.frame = CGRectMake(0, 0, 320, 480);
[self.view addSubview:viewController.view]; 
[self.view addSubview:toolbar];
[viewController release];
[audioPlayer play];
 self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
 target:self
 selector:@selector(displayviewsAction:)
 userInfo:nil
 repeats:NO];
} 
```

并且播放/暂停按钮在按下时具有此方法

```
-(void)playpauseAction:(id)sender {
if([audioPlayer isPlaying])
{
    [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
    [audioPlayer pause];
    [self pauseTimer];
    [self pauseLayer:self.view.layer];
}else{
    [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
    [audioPlayer play];
    [self resumeTimer];
    [self resumeLayer:self.view.layer];
  if(isFirstTime == YES)
    {
        self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                                      target:self
                                                    selector:@selector(displayviewsAction:)
                                                    userInfo:nil
                                                     repeats:NO];
        isFirstTime  = NO;
    }
   } 
   } 
```

当按下快退按钮时，它应该执行播放/暂停操作方法，即当按下快退按钮时，播放/暂停按钮应该切换到暂停按钮，当暂停按钮恢复时，它应该切换到播放按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T18:15:58.467

如果我正确理解您的问题，您希望在单击“播放/暂停”或“倒带”按钮时调用相同的方法。

将此方法连接为两个按钮的目标后，只需将其添加到现有代码中即可。：

为您的播放和倒带按钮设置一个独特的标签

```
-(void)buttonAction:(id)sender {
    UIButton *clickedButton = (UIButton *)[sender];
    if (clickedButton.tag = playButtonTag){
        [self playPauseAction:sender];
    }
    else{
        [self rewindAction:sender];
    }
} 
```

为简单起见，我使用了 if else。如果这样，您可以使用 if/if 或 switch-case。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:38:18.030

可以使用以下代码将操作方法​​/选择器连接到 UIButton：

```
 [button1 addTarget:self action:@selector(method:) forControlEvents:UIControlEventTouchUpInside]; 
```

您可以使用上面的代码行向 UIButton 添加相同的操作。

# java - java手机上的域策略文件

> ID：11170640
> 
> 赞同：2
> 
> 时间：2012-06-23T15:21:21.447
> 
> 标签：java, java-me, cross-domain-policy

有人知道有任何工具可用于查看 Java 手机上的域策略文件吗？

帮助是非常可观的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:33:30.097

据我所知，您只能在 Symbian 手机上执行此操作，使用 C++ 开发的文件浏览器应用程序并具有足够高的功能（该应用程序可能必须得到手机制造商的信任）来查看固件文件（Z:驾驶）。

您可能想在[http://symbian-coderus.blogspot.co.uk/尝试 S^3 FileBrowser](http://symbian-coderus.blogspot.co.uk/)

三星 Bada 手机也可能允许这样做。

# yii - Yii CMenu 活动类没有显示 - 为什么？

> ID：11170641
> 
> 赞同：2
> 
> 时间：2012-06-23T15:21:23.283
> 
> 标签：yii, cmenu

我正在渲染这个 Cmenu，但是当我们在该菜单页面上处于活动状态时，活动类没有显示在 li 元素上。

```
$this->widget('zii.widgets.CMenu', 
     array('items'=>array(
         array(
           'label'=>'Foo',
           'url'=>array('event/index/21')
         ),
         array(
            'label'=>'Bar',
            'url'=>array('event/index/22')
         )
       )
      )
 ); 
```

**有谁知道为什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:29:29.407

```
'url'=>array('event/index', array( 'event' => '21' )) 
```

这行得通。

似乎是活动类需要匹配的路线才能启动。

*参考：* [http ://www.yiiframework.com/forum/index.php/topic/23317-cmenu-item-not-active-any-more-after-i-used-url-cheating/](http://www.yiiframework.com/forum/index.php/topic/23317-cmenu-item-not-active-any-more-after-i-used-url-cheating/)

# asp.net - Asp.net 会话偶尔会在请求之间更新

> ID：11170643
> 
> 赞同：0
> 
> 时间：2012-06-23T15:21:43.083
> 
> 标签：asp.net, iis-7

我正在用 asp.net 和 c# 3.5 建立一个网站。问题是用户会话在请求之间被清除。并非所有会话，只是在发生新请求或回发时突然更新该用户会话。我正在使用 IIS7 和 Win2008 R2。查了一下发现没有回收，WorkerProcess设置为1，网站没有重启。只是一个用户会话被更新并获得新的 sessionId。不是所有的会话，只是更新一个用户会话。

这是一个很奇怪的问题，我在网上搜索并找不到解决方案

如果你有任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:00:51.897

我想我发现了我的问题，问题名称是“规范域”。用户在其网址的开头没有 www 进入网站，但在请求之间（尤其是在 Respone.Redirect("~") 或当我将用户重定向到支付网关并返回时），网址变成带有 www 的网址。因此，cookie 会更新，并且此时该用户会话丢失。

规范域可以通过 IIS7 Url Rewrite 模块解决，在 SEO -> 规范域名中。

# c++ - 未定义的命名空间“提升”

> ID：11170644
> 
> 赞同：-1
> 
> 时间：2012-06-23T15:21:46.077
> 
> 标签：c++, multithreading

我正在尝试一个 C++ 小线程程序，但出现了我无法处理的错误。

编码

```
#include "Threads.h"
#include "Interthread.h"

void* task1(void *arg) {
// do stuff
}

void task2() {
// do stuff
}

int main (int argc, char ** argv) {
using namespace boost;
Thread thread_1;
thread_1.start (task1,NULL);
// Thread thread_2 = thread(task2);

// do other stuff
//thread_2.join();
thread_1.join ();
return 0; 
```

错误

Test.cpp:15:21：错误：'boost' 不是名称空间名称 Test.cpp:15:26：错误：预期名称空间名称在 ';' 之前 令牌

线程类的声明

```
 class Thread {

    private:

    pthread_t mThread;
    pthread_attr_t mAttrib;
    // FIXME -- Can this be reduced now?
    size_t mStackSize;

    public:

    /** Create a thread in a non-running state. */
    Thread(size_t wStackSize = (65536*4)):mThread((pthread_t)0) {mStackSize=wStackSize;}

    /**
            Destroy the Thread.
            It should be stopped and joined.
    */
    ~Thread() { int s = pthread_attr_destroy(&mAttrib); assert(s==0); }

    /** Start the thread on a task. */
    void start(void *(*task)(void*), void *arg);

    /** Join a thread that will stop on its own. */
    void join() { pthread_join(mThread,NULL); }

     }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:24:02.373

您应该删除该行`using namespace boost;`。您的程序中似乎不需要它。

# php - 将选择选项发布到 mysql

> ID：11170646
> 
> 赞同：0
> 
> 时间：2012-06-23T15:21:58.587
> 
> 标签：php, mysql, select, tags, option

这是我的代码：

```
mysql_query("INSERT INTO jokes (headline, text, type) VALUES ('{$_POST['headline']}','{$_POST['text']}', '{$_POST['type']}')") or die(mysql_error()); 
```

我想发布一个选择选项，如

```
<select name="type">  
<option value="regular">regular joke</option>  
<option value="other">other</option>
</select> 
```

这是我的理论，但它不起作用（它没有出现在数据库中，我有一个常规和其他的枚举字段）。有什么帮助吗？

编辑：没关系，我将枚举更改为 varchar，现在它可以工作了:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:45:52.873

像这样更改您的数据库，然后执行您的插入查询，我希望它对您有用

```
alter table `database_name`.`jokes` change `type` `type` enum('regular','other') NULL ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-16T15:51:12.870

此行肯定会引发错误，因为您有单引号（用于 POST 数组名称）嵌套在更多单引号中。要么逃避那些，要么像这样写：

```
mysql_query("INSERT INTO jokes (headline, text, type) VALUES ('" . $_POST['headline']. "','" . $_POST['text'] . "', '" . $_POST['type'] . "')") or die(mysql_error()); 
```

另外，为了避免很多麻烦和未知错误，您永远不应该使用保留字作为变量，例如：

```
text
type 
```

当我很久以前刚开始使用 PHP 时，我有几个小时甚至几天的头痛，因为我有一个名为：USER 的 mySql 字段（一个保留的 mySql 字，但这可以通过将它包含在 ` 后引号符号中来解决）

# c++ - 窗口显示时 Windows API 崩溃

> ID：11170649
> 
> 赞同：1
> 
> 时间：2012-06-23T15:22:31.987
> 
> 标签：c++, winapi

我创建了一个 Windows 应用程序。应该注意的是，此问题仅发生在某些计算机上（在我的计算机上运行良好）。我按如下方式创建窗口：

```
RECT wr = {0, 0, rOp->resX, rOp->resY};
AdjustWindowRect(&wr, WS_OVERLAPPEDWINDOW, FALSE);
WNDCLASS wc;
wc.style         = CS_HREDRAW | CS_VREDRAW;
wc.lpfnWndProc   = WndProc;
wc.cbClsExtra    = 0;
wc.cbWndExtra    = 0;
wc.hInstance     = hAppInst;
wc.hIcon         = NULL;
wc.hCursor       = LoadCursor(0, IDC_ARROW);
wc.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);
wc.lpszMenuName  = NULL;
wc.lpszClassName = L"App";
if (!RegisterClass(&wc))
{
    return false;
}
hAppWnd = CreateWindow( L"App", lpWindowName, WS_VISIBLE | WS_OVERLAPPED, 0, 0, wr.right - wr.left, wr.bottom - wr.top, NULL, NULL, hAppInst, NULL ); 
```

在我的两个朋友的 PC 上，显示窗口时会崩溃。如果我删除 WS_VISIBLE，应用程序将继续正常运行，直到调用 ShowWindow，然后它崩溃。我的朋友报告说在它崩溃之前看到一个白色窗口，所以窗口似乎正在显示。

有没有人对为什么会发生这种情况有任何理论？

编辑：WndProc 如下：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
    switch (Msg)
    {
    case WM_DESTROY:
        PostQuitMessage(0);
        return 0;
    case WM_PAINT:
        reng->draw();
        return 0;
    case WM_ERASEBKGND:
        return 1;
    default:
        return reng->DefProc(hWnd, Msg, wParam, lParam);
    }
} 
```

DefProc 是一个指向这个的函数指针：

```
LRESULT CALLBACK DefProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
    switch (Msg)
    {
    case GM_NEWGAME:
        newGame();
        return 0;
    default:
        return DefWindowProc(hWnd, Msg, wParam, lParam);
    }
} 
```

（GM_NEWGAME 是用户定义的消息）

DefProc 函数指针总是在创建窗口之前设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:44:12.613

必须在您的 wndproc 中。也许在对象创建和其中的使用之间存在同步问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T23:27:55.957

由于您在此处发布的代码没有任何内容可以显式导致崩溃，并且仅在实际显示窗口时才会发生，因此看起来该错误位于 draw() 方法中。

最好的解决方案是构建应用程序的调试版本，并要求您的朋友在崩溃时使用任务管理器创建转储文件。他们可以在 Visual Studio 中打开它并查看代码中导致崩溃的确切行。

# ruby-on-rails - 即使定义了 Backbone，为什么 Backbone.Controller 未定义？

> ID：11170650
> 
> 赞同：3
> 
> 时间：2012-06-23T15:22:37.883
> 
> 标签：ruby-on-rails, backbone.js

我正在尝试将控制器添加到我的待办事项列表应用程序中。这是代码。

```
$(function(){
alert(Backbone); // => [object]
alert(Backbone.Controller); // => undefined
TodoList.Controllers.Todos = Backbone.Controller.extend({
routes: {
    "documents/:id": "edit",
    "": "index",
    "new": "newDoc"
},

edit: function(id){
    var todo = new Todo({id:id});   
    todo.fetch({
        success:function(model,resp){
            new App.Views.Edit({model:todo});
        },
        error: function(){
            new Error({message: "Couldn't find the todo item."});
            window.location.hash = '#';
        }
    });
},

index: function(){
    window.App = new TodoList.Views.AppView
}

});
}); 
```

正如评论中提到的，当我警告（Backbone）时，返回 [object]，而 Backbone.Controller 返回 undefined，我不知道为什么。这正在停止整个应用程序的工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T15:34:37.477

它已被主干路由器取代：http: [//backbonetutorials.com/what-is-a-router/](http://backbonetutorials.com/what-is-a-router/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T15:33:55.387

你有哪个主干版本？
尝试`Backbone.Router`代替`Backbone.Controller`. [来自http://backbonejs.org](http://backbonejs.org)
的 引用：从 v5.0 开始

> 为了清楚起见，控制器被重命名为路由器

如果是这种情况，您可以制作参考副本，`Router`以免更改现有代码：

```
if(Backbone.Router)
    Backbone.controller = Backbone.Router; 
```

# python - 熊猫行特定适用

> ID：11170653
> 
> 赞同：9
> 
> 时间：2012-06-23T15:22:48.700
> 
> 标签：python, pandas

与[此 R question](https://stackoverflow.com/questions/2545879/row-column-counter-in-apply-functions)类似，我想使用 Pandas 将函数应用于 Series 中的每个项目（或 DataFrame 中的每一行），但希望将该行的索引或 id 用作该函数的参数。作为一个简单的例子，假设一个人想要创建一个 [(index_i, value_i), ..., (index_n, value_n)] 形式的元组列表。使用简单的 Python for 循环，我可以做到：

```
In [1] L = []
In [2] s = Series(['six', 'seven', 'six', 'seven', 'six'],
           index=['a', 'b', 'c', 'd', 'e'])
In [3] for i, item in enumerate(s):
           L.append((i,item))
In [4] L
Out[4] [(0, 'six'), (1, 'seven'), (2, 'six'), (3, 'seven'), (4, 'six')] 
```

但是必须有更有效的方法来做到这一点？也许像 Series.apply 这样更像熊猫的东西？实际上，我并不担心（在这种情况下）返回任何有意义的东西，但更多的是为了“应用”之类的效率。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T16:00:18.127

如果将 apply 方法与函数一起使用，则会发生系列中的每个项目都将映射到这样的函数。例如

```
>>> s.apply(enumerate)
a    <enumerate object at 0x13cf910>
b    <enumerate object at 0x13cf870>
c    <enumerate object at 0x13cf820>
d    <enumerate object at 0x13cf7d0>
e    <enumerate object at 0x13ecdc0> 
```

您要做的只是枚举系列本身。

```
>>> list(enumerate(s))
[(0, 'six'), (1, 'seven'), (2, 'six'), (3, 'seven'), (4, 'six')] 
```

例如，如果您想对所有实体的字符串求和怎么办？

```
>>> ",".join(s)
'six,seven,six,seven,six' 
```

apply 更复杂的用法是：

```
>>> from functools import partial
>>> s.apply(partial(map, lambda x: x*2 ))
a                ['ss', 'ii', 'xx']
b    ['ss', 'ee', 'vv', 'ee', 'nn']
c                ['ss', 'ii', 'xx']
d    ['ss', 'ee', 'vv', 'ee', 'nn']
e                ['ss', 'ii', 'xx'] 
```

**[编辑]**

按照OP的澄清问题：不要将系列（1D）与DataFrames（2D）混淆[http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe) - 因为我真的不明白如何你可以谈论行。但是，您可以通过创建新系列在函数中包含索引（应用不会为您提供有关当前索引的任何信息）：

```
>>> Series([s[x]+" my index is:  "+x for x in s.keys()], index=s.keys())
a      six index  a
b    seven index  b
c      six index  c
d    seven index  d
e      six index  e 
```

无论如何，我建议您切换到其他数据类型以避免巨大的内存泄漏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T20:47:51.080

这是一个简洁的方法，使用 itertools 的[`count`](http://docs.python.org/2/library/itertools.html#itertools.count)and [`zip`](http://docs.python.org/2/library/functions.html#zip)：

```
import pandas as pd
from itertools import count

s = pd.Series(['six', 'seven', 'six', 'seven', 'six'],
                  index=['a', 'b', 'c', 'd', 'e'])

In [4]: zip(count(), s)
Out[4]: [(0, 'six'), (1, 'seven'), (2, 'six'), (3, 'seven'), (4, 'six')] 
```

*不幸的是，只比`enumerate(list(s))`!*

# javascript - underscore.js 模板中的变量

> ID：11170655
> 
> 赞同：17
> 
> 时间：2012-06-23T15:23:20.753
> 
> 标签：javascript, underscore.js, template-engine

[`underscore.js`](http://underscorejs.org/)如何在模板中为使用构建的应用程序设置变量[`backbone.js`](http://backbonejs.org/)？我只想创建可重用的处理字符串。另外，可以使用`underscore.js`'s 的内置函数[`_.escape`](http://underscorejs.org/#escape)来处理这些变量吗？

```
<script type="text/html" id="templateresults">

<p><%= encodeURIComponent(title) %></p> // this works

// try 1:
var encodedTitle = encodeURIComponent(title); // shows up as regular text
<p>'+encodedTitle+'</p> // this doesn't work and shows up as regular text

// try 2:
<% var encodedTitle = encodeURIComponent(title); %> // nothing shows up
<p><% '+encodedTitle+' %></p> // nothing shows up

</script> 
```

`title`是一个 JSON 项（文本字符串）。

编码输出：`This%20is%20a%20Sample%20Title`
常规输出：`This is a Sample Title`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-23T16:51:42.287

您的尝试 2 几乎是正确的，但是您输出编码标题的标签在`=`开始时缺少 并且不需要`+`字符串中的。应该：

```
<p><%= encodedTitle %></p> 
```

或者你也可以这样做：

```
<p><% print(encodedTitle) %></p> 
```

在下划线模板中，您想要评估的任何 javascript 都必须包含在其中`<% %>`，因此您的第二次尝试只是将 javascript 输出为字符串。您在顶部的示例中正确使用了`=`，但在尝试 2 中省略了它。

告诉模板引擎将`=`包含的 javascript 的结果作为字符串输出。如果不使用`=`，则执行 javascript，但不输出任何内容。Underscore 的模板提供了该`print()`功能作为使用 的替代方法`=`，我不知道一种方法比另一种更好。

# r - R ggplot 条形图；基于两个单独的变量填充

> ID：11170656
> 
> 赞同：26
> 
> 时间：2012-06-23T15:23:25.273
> 
> 标签：r, ggplot2

一张图说一千多个字。如您所见， my`fill`是基于变量`variable`.

然而，在每个条中都有多个数据实体（黑色边框），因为离散变量`complexity`使它们独一无二。我想要找到的是使栏的每个部分都比当前外观更容易区分的东西。最好是像阴影这样的东西。

![http://s12.postimage.org/ltgs677ul/snapshot2.png](../Images/746f9ce9098d3164c65a473609cecd7a.png)

这是一个示例（不是相同的数据集，因为导入了原始数据集）：

```
dat <- read.table(text = "Complexity Method Sens Spec MMC
1 L Alpha 50 20 10
2 M Alpha 40 30 80
3 H Alpha 10 10 5
4 L Beta 70 50 60
5 M Beta 49 10 80
6 H Beta 90 17 48
7 L Gamma 19 5 93
8 M Gamma 18 39 4
9 H Gamma 10 84 74", sep = "", header=T)

library(ggplot2)
library(reshape)
short.m <- melt(dat)
ggplot(short.m, aes(x=Method, y= value/100 , fill=variable)) + 
    geom_bar(stat="identity",position="dodge", colour="black") + 
    coord_flip() 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-25T07:02:56.243

这远非完美，但希望朝着正确的方向迈出一步，因为它被 躲过了`variable`，但仍然设法以`Complexity`某种方式表示：

```
ggplot(short.m, aes(x=Method, y=value/100, group=variable, fill=variable, alpha=Complexity,)) + 
  geom_bar(stat="identity",position="dodge", colour="black") +
  scale_alpha_manual(values=c(0.1, 0.5, 1)) +
  coord_flip() 
```

![在此处输入图像描述](../Images/7037d79fb93e0fed614c4f7a436805a6.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T12:38:18.313

添加`alpha=complexity`可能有效：

```
ggplot(short.m, aes(x=Method, y= value/100 , fill=variable, alpha=complexity)) +
geom_bar(stat="identity",position="dodge", colour="black") + coord_flip() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T15:46:28.897

您可能需要将您的`Method`和`variable`因素分开。这里有两种方法可以做到这一点：

使用`facet_wrap()`：

```
 ggplot(short.m, aes(x=variable, y=value/100, fill=Complexity)) + 
    facet_wrap(~ Method) + geom_bar(position="stack", colour="black") +
    scale_alpha_manual(values=c(0.1, 0.5, 1)) + coord_flip() 
```

在 x 轴上同时使用：

```
 ggplot(short.m, aes(x=Method:variable, y=value/100, group=Method, fill=variable, alpha=Complexity,)) + 
    geom_bar(stat="identity", position="stack", colour="black") +
    scale_alpha_manual(values=c(0.1, 0.5, 1)) + coord_flip() 
```

# java - 如何制作所需大小的字体？

> ID：11170661
> 
> 赞同：0
> 
> 时间：2012-06-23T15:24:05.360
> 
> 标签：java, fonts, awt, font-size

在 Java 中字体大小以哪些单位测量？如果我想要给定尺寸的“A”字母怎么办，如何找到合适的字体大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:29:33.273

字体大小以磅为单位。[这是最高字符中的像素数](http://en.sfml-dev.org/forums/index.php?topic=5880.0)。在大多数字体中，这几乎是每个大写字母的高度。就尺寸而言，宽度会因您使用的字体而有很大差异。

# php - 在 PHP 变量中存储复杂的字符串

> ID：11170662
> 
> 赞同：0
> 
> 时间：2012-06-23T15:24:15.470
> 
> 标签：php, variables

是否可以将这样的东西存储在 php 字符串中：

```
$variable = "'orderby'=>'title','order'=>ASC'" 
```

我想在 wordpress 循环中使用它，但不确定是否可以将多个参数作为字符串存储在单个变量中。例如，我不希望变量存储多个参数，而是将整个引用文本存储为字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:26:06.767

您最好的选择是创建一个数组或对象并将其序列化......：

```
$variable = array('orderby'=>'title','order'=>'ASC');
$string=serialize($variable); 
```

回答你关于在循环中使用它的问题......

```
$args=array( 'post_type' => 'films', 'post_parent' => 0, 'posts_per_page' => -1);
$more=unserialize($variable);

$loop = new WP_Query( $args+$more ); 
```

正如其他人试图指出的那样，Json 是一种更快的转换格式，如果您只将它用于简单的数组，它可能是更好的解决方案。Serialize 为 Objects 提供了一些非常有趣的功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:27:10.407

使用 JSON：

```
// $json contains {'orderby':'title','order':'ASC'}
$json = json_encode(array('orderby' => 'title', 'order' => 'ASC')); 
```

# c++ - 访问堆栈中的数组会影响性能吗

> ID：11170666
> 
> 赞同：0
> 
> 时间：2012-06-23T15:24:43.707
> 
> 标签：c++, arrays, heap-memory, stack-memory

刚才我很困惑在访问在堆栈中初始化的数组而不是在堆中初始化的数组时是否会影响性能。

例子

```
void access(int *pointer){

}

int main(){

int array [] = {6,5,4};

access(array);

} 
```

VS

```
void access(int *pointer){

}

int main(){

int *array  =  new int[3];

access(array);

} 
```

我真正想知道的是是否可以直接访问堆栈中数组的起点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T15:28:28.900

这是微优化。整体性能通常会受到更大的影响，例如所需的数据是否在 CPU 缓存中。

我强烈推荐阅读[*每个程序员都应该知道的关于内存*](https://www.google.co.uk/search?q=%22What+Every+Programmer+Should+Know+About+Memory%22)的知识。它相当繁重（现在有点过时了），但它非常全面。

# iphone - 如何在基于页面的控制器中显示导航栏？

> ID：11170667
> 
> 赞同：0
> 
> 时间：2012-06-23T15:24:44.150
> 
> 标签：iphone, xcode, ipad

正如标题所说，如何在基于页面的 ios 5 控制器中显示导航栏？我是 iphone dev 的新手。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:59:33.850

[本站](https://developer.apple.com/library/ios/#samplecode/NavBar/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007418-Intro-DontLinkElementID_2)

会对你有所帮助。

# objective-c - 不使用 openURL:url 打开 Mobile Safari

> ID：11170668
> 
> 赞同：5
> 
> 时间：2012-06-23T15:25:06.763
> 
> 标签：objective-c, ios, xcode

我想打开 Mobile Safari 应用程序“不”更改其当前显示的页面。

我可以使用 .. 轻松切换到 Safari

```
NSString *ourPath = @"http://www.google.co.uk";
NSURL *ourURL = [NSURL URLWithString:ourPath];
if ([ourApplication canOpenURL:ourURL]) {
    [ourApplication openURL:ourURL];
} 
```

但我想做的只是切换到 safari，而不是离开它当前所在的页面。就像我使用任务切换器切换时一样，它只是弹出 Safari 并将其留在原来的页面上。

我试过给它发送一个@“http:”的url，但这不起作用，它将页面更改为“http:localhost/”

有没有办法直接打开它？

等离子体

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:27:50.747

我使用此页面上的答案解决了这个问题..

[iOS 如何使用私有 API 中的 UIApplication launchApplicationWithIdentifier？](https://stackoverflow.com/questions/11047176/ios-how-can-i-use-uiapplication-launchapplicationwithidentifier-which-is-in-priv)

虽然我不必将我的 .app 文件移动到 /Applications

添加权利就足够了，然后只需使用 ...

```
[[UIApplication sharedApplication] launchApplicationWithIdentifier:@"com.apple.mobilesafari" suspended:NO]; 
```

等离子体

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:59:59.083

你能打开一个在加载时执行 JavaScript history.back() 的页面吗？

# sql - DateKey YYYYMMDD 应该是 char(8) 吗？

> ID：11170677
> 
> 赞同：1
> 
> 时间：2012-06-23T15:25:57.093
> 
> 标签：sql, sql-server-2008-r2, data-warehouse

我们仓库中随处可见的两个最重要的字段是 UserAccountKey 和 DateKey。

*   DateKey 是（int，不为空）
*   UserAccountKey 是（int，不为空）

这些是正确的数据类型吗？

WH 是在 2006 年创建的，所以类型`Date`不是一个选项，尽管我们现在正在运行`2008-R2`，所以它现在是 WH 下一次迭代的一个选项。这是一个完善的 WH，由它构建了多个立方体和一个完整的报告系统。*上面的另一个*问题是，当 WH 创建时，架构师将 DateKey 作为类型`Char(8)`而不是`INT`?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T15:27:11.433

实际上有一种数据类型，尤其适用于日期。我会将`DateKey`类型从更改`int`为[`date`](http://msdn.microsoft.com/en-us/library/bb630352)。

# android - 为多种语言重建我的 Android

> ID：11170680
> 
> 赞同：0
> 
> 时间：2012-06-23T15:26:27.443
> 
> 标签：android

我想重建我的 Android 应用程序，使其支持多种语言。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:27:11.403

为此，您可以使用“值”文件夹。默认值称为“值”。对于其他每一种语言，您都可以创建类似“values-fr”“values-en”的语言。

每个文件夹都包含一个名为“strings.xml”的文件，您可以在其中以相应的语言声明您的字符串。Android 本身会负责从正确的文件夹中选择“strings.xml”文件。

# image-processing - 用于测量屏幕上对象大小的简单 OpenCV 示例

> ID：11170682
> 
> 赞同：4
> 
> 时间：2012-06-23T15:26:48.293
> 
> 标签：image-processing, opencv, pattern-recognition

跟进[我的另一个问题](https://stackoverflow.com/questions/4389767/measuring-distance-between-two-ios-devices/5961815#5961815)，你们知道 OpenCV 中有一个很好的例子吗，有一个简单的黑白校准图片和适当的检测算法？

我只想在屏幕上显示一些黑白图像，从远处拍摄该图像并计算显示图像的大小，以计算到所述屏幕的距离。

在我再次发明轮子之前，我认为这很容易，可以通过 OpenCV 中的许多不同方式实现，但我想我会问是否有首选的方式，可能有一些示例代码。

（我已经使用 haarcascade-xml 文件运行了一些面部检测代码）

PS：我已经覆盖了屏幕的分辨率/dpi 部分，所以我知道我的屏幕上的图片有多大（以厘米为单位）。

编辑：

我会让它变得非常简单，我需要：

1.  一种模式，在图像中很容易识别。现在我正在试验棋盘格。制作 ARDefender 的人使用了[这个](http://ihelpbr.com/idicas-games-ardefender/)。
2.  一种适当的算法，可以告诉我使用 OpenCV 的图片中图案 1) 的确切像素坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:41:08.703

嗯，很难说哪个图像最适合识别——在不同的照明下，任何颜色都可以被解释为另一种颜色。简单的例子：

![示例示例](../Images/a71c2c990a1e10cf34dff527d90564d4.png)

如您所见，两个交通标志都有红色边框，但即使在一张图像上，标志上的边框也显然不是红色的。

所以在我看来，你应该使用许多不同颜色的图像（比如彩虹）。你还说它应该在不同的角度很容易识别。这就是为什么圆形最适合它。

这就是为什么您的图像应如下所示：

![例子](../Images/b8f9875325e938d5ac2e6a2d11764234.png)

因此检测此类对象的想法如下：

1.  进行不同的颜色分割（蓝色、红色、绿色等）。为此，请使用 HSV 颜色空间。
2.  检测图像上特定颜色的圆圈。
3.  具有最大圈数的区域似乎是您的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:02:06.967

您只需从几个已知距离（1m、2m、3m...）拍摄您的黑白物体，然后为每个距离检查相应图像中物体的大小。从这些数据中，您将能够创建一个线性函数，为您提供与像素大小的距离（y = ax + b 应该这样做；）），将其转换为您的代码，您就完成了。干杯

# jquery - 文本区域格式不适用于 jquery.min.js

> ID：11170683
> 
> 赞同：-1
> 
> 时间：2012-06-23T15:26:49.043
> 
> 标签：jquery, ajax, textarea

我正在使用`textarea`HTML 格式。

我的 HTML 是：

```
<textarea type="text" name="description" id="description" value="description" rows="3"></textarea>
<div class="label-style">Description</div> 
```

我的`textarea`样子是这样的：

![在此处输入图像描述](../Images/a96be6273033f41bbcd67493c1e56ca8.png)

我已附加格式与`textarea` `id`.`id="description"`

我还需要在名为的 JavaScript 文件上使用`jquery.min.js`

这个 JavaScript 还说它使用：

*   包括 Sizzle.js
*   [http://sizzlejs.com/](http://sizzlejs.com/)

JavaScript 文件是：http: [//jsfiddle.net/cQbvN/](http://jsfiddle.net/cQbvN/)

但是当我使用这个类时，它会在我身上应用一些类`textarea`，它看起来像这样：

![在此处输入图像描述](../Images/676f9d5326bad1d17d7e9d2a8adcd11d.png)

我也尝试删除所有 CSS，但没有任何反应。

如何重新获得`textarea`格式化按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:48:24.773

我认为您对正在加载的内容感到有些困惑，我想您正在使用 jQuery 插件将 textarea 转换为 html [WYSIWYG](http://www.techtricky.com/jquery-wysiwyg-html-editors/)编辑器，请记住您必须在插件之前加载 jQuery

```
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="jquery-plugin.min.js"></script>
<script type="text/javascript">
$(document).ready( function() {
    $('#description').textarea()
} );
</script> 
```

# html - 为什么悬停时我的列表不显示

> ID：11170693
> 
> 赞同：0
> 
> 时间：2012-06-23T15:28:01.997
> 
> 标签：html, css, list, drop-down-menu

当我将鼠标悬停在列表上时，不会显示我的列表。对于顶部导航，当我将鼠标悬停在英语上时，它应该显示更多语言。[http://jsfiddle.net/gTdsX](http://jsfiddle.net/gTdsX)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:38:24.183

您可以添加 CSS 以使子菜单在菜单项`ul`上可见。`mouseover``li`

```
#main-nav ul li:hover ul {
   display:block;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T15:39:03.207

您的“主导航”没有**:hover**样式。只需添加以下内容：

```
#main-nav ul li:hover > ul {
    display:block;
} 
```

…它会工作（在你的链接中测试过）。

# php - 根据另一个数组中的值对数组数组进行排序

> ID：11170700
> 
> 赞同：0
> 
> 时间：2012-06-23T15:28:34.530
> 
> 标签：php, arrays, sorting

我有一个数组，我想根据另一个数组的值对其进行排序。第一个数组：

```
$array1 = ( [0]=> Int(2) 
    [1]=>Array(['id']=>String(5) , ['value']=>String(10))
    [2]=>Array(['id']=>String(5) , ['value']=>String(10))
    [3]=>Array(['id']=>String(5) , ['value']=>String(10))
) 
```

第二个：

```
 $array2 = (1,4,3) 
```

结果应该基于$array2：

```
 $array1 = ( [0]=> Int(2) 
    [1]=>Array(['id']=>String(5) , ['value']=>String(10))
    [3]=>Array(['id']=>String(5) , ['value']=>String(10))
    [2]=>Array(['id']=>String(5) , ['value']=>String(10))
) 
```

我尝试了冒泡排序但不起作用：

```
 for ($i = 1 ; $i <= $array1[0] ; $i++){
    for ($j = $i+1 ; $j <= $array1[0] ; $j++){
        if ($array2[$i] < $array2[$j]){
            $temp = $array1[$i];
            $array1[$i] = $array1[$j];
            $array1[$j] = $temp;  
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:42:32.993

你试过检查array_multisort吗？您可以将数组 2 注入数组 1，然后以这种方式排序吗？

# android - 正方形检测增强

> ID：11170703
> 
> 赞同：4
> 
> 时间：2012-06-23T15:29:30.097
> 
> 标签：android, opencv, computer-vision, edge-detection

我正在为盲人开发一种货币识别系统。我需要检查是否已捕获完整的纸币，因此我为此使用了方形检测。当背景为纯黑色或纯白色时，它当前工作，但当背景更高级时，它不工作。我可以使用什么技术来解决这个问题？

我使用 OpenCV 作为我的图像处理框架。我可以使用卷积吗？如何？

`need enhancement for square detection.`

我的代码的结果图像：

![在此处输入图像描述](../Images/06b37246d9a3e77fe9c144abce3a4c7e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:02:58.837

我不确定矩形检测是否是您想要做的最佳解决方案。

如果照片是直接从钱上拍下来的，它只会有效地工作，而且正如你所说，它不会对杂乱的背景很有效。

是否有不使用直接模式识别系统的确切原因？我会从我的货币图片开始，并尝试用它来执行对象识别。

您会在网上找到大量可以帮助您的教程，[例如瓶子](http://achuwilson.wordpress.com/2011/02/13/object-detection-using-opencv-using-haartraining/)或[碗](http://lab.cntl.kyutech.ac.jp/~kobalab/nishida/opencv/OpenCV_ObjectDetection_HowTo.pdf)。

由于货币的数量，您可能有很多可能性，但您知道它至少是一个有限的数字。

# junit - 在 Cucumber-JUnit 中，有没有办法控制报告功能的顺序？

> ID：11170705
> 
> 赞同：0
> 
> 时间：2012-06-23T15:29:40.977
> 
> 标签：junit, cucumber-jvm, cucumber-junit

我正在运行一个基本的 Cucumber-Jvm 测试，它具有两个称为“基本数学”和“高级数学”的功能（分别在文件中`basic_math.feature`和`advanced_math.feature`）。

但是，当生成 HTML 报告时，“高级数学”会显示在“基础数学”之前，而我希望“基础数学”出现*在*“高级数学”之前。这不是微不足道的，因为如果我可以更有逻辑地组织输出，那么我们的业务分析师和 QA 部门将更容易访问这些报告，并且我将能够获得更多的牵引力。

我知道我可以尝试使用 Maven 插件进行某种 XSLT 后处理，但我正在寻找某种方式来使用注释在代码中定义它。有没有这样的方法？`Cucumber.@Options.features`实际上定义了`.feature`文件位置，并且`Cucumber.@Options.name`用于确定运行哪些功能的 rexexp。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T18:05:55.540

Here's what I have observed. Cucumber picks up feature files for execution in sorted order. If you can name your feature files so that basic_math is picked up first, say, rename feature files as 01basic_math.feature and 02advanced_math.feature, then the report will show basic_math tests first.

# c#-4.0 - c#中的字节数组和性能问题

> ID：11170707
> 
> 赞同：2
> 
> 时间：2012-06-23T15:29:49.123
> 
> 标签：c#-4.0, memory-management, bytearray

我有一个 WCF 服务，它为用户提供了在执行一些其他任务后将文档上传到文档管理系统位置的方法。

这被广泛使用，每天使用上述服务上传至少 1000 个文档。

服务中的方法接受 byte[] 并且我们注意到，服务器上的物理内存有时会达到 90% 并且 CPU 使用率已达到最大值。

您认为这可能是由于该方法使用 byte[] 的原因吗？

如何强制垃圾收集或释放内存？

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:02:27.080

对于文件传输，尤其是大文件，我建议您使用[流传输](http://msdn.microsoft.com/en-us/library/ms789010.aspx)而不是使用巨大的字节数组。

它不会很好地扩展，因为它会强制您的应用程序一次分配所有字节。

# ios - 从服务器加载的无限图像墙，图像可以叠加

> ID：11170709
> 
> 赞同：1
> 
> 时间：2012-06-23T15:29:50.957
> 
> 标签：ios, graphics

我正在尝试建造一个公共浴室类型的墙，用户可以在上面画画。我正在考虑一个无限滚动空间，用户可以在其中写涂鸦、绘画等。我需要保存然后动态加载“绘图”以供其他人查看。我在定义这个组件的结构时遇到了麻烦。

1.  我怎样才能做到这一点而不是将整个视图加载到内存中（它会变得很重）？
2.  如果绘图/图像能够重叠，我如何计算内容大小（用户将能够在其他人的作品上绘图，有点像标记一个区域）？

我在看`CATiledLayer`；由于重叠，不确定这是否有帮助。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:05:19.653

这是我要做的：

1）当用户画东西时，找到它的边界框。只保存边界框中的像素。请务必使用透明背景保存它们。

2）当用户运行应用程序时，他们会有某种墙的默认视图。仅加载边界框与用户的墙壁视图重叠的那些图像。您可能希望以某种方式对图像进行排序，以便您可以快速搜索它们以查看哪些具有与当前视图重叠的边界框。

3）当用户在墙壁上平移时，加载任何具有与新视图区域相交的边界框的图像，并释放您之前显示的任何已滚动的图像。

# python - 在 Flask 中，从另一个请求打开上传的文件

> ID：11170711
> 
> 赞同：1
> 
> 时间：2012-06-23T15:30:09.427
> 
> 标签：python, multithreading, flask, wsgi

我正在开发一个网络服务，其中每一件事都是通过 http 请求联系的

它的一部分是在python中实现的

问题如下：

```
@app.route("/p")
def request_file():
    result = send_http_request()
    if result:
        load_file()            
    return render_template("upload_form.html")

@app.route("/p")
def accept_file():
    f = request.files['pic']
    save_file(f)
    return "ok" 
```

这是我正在做的伪代码，函数请求文件联系外部服务，它通过发出包含报告文件的表单发布请求来响应，这个发布请求由保存文件的 accept_file 处理（我确保调用 flush() 和os.fsync() 完全写入磁盘），然后它重新运行，这导致 request_file 中的 http 请求终止

然后 request_file 尝试加载由 accept_file 保存的文件，但失败了，它告诉我没有该名称的文件，请求完成后，该文件可用于后续请求

我很确定我在保存文件后尝试加载文件，并且我正在刷新到磁盘并调用 os.fsync() 以确保写入磁盘

什么是哈彭宁？怎么了？我没有任何线索

我必须以这种方式工作，因为我的应用程序依赖于外部服务，该服务仅通过使用文件发出多部分表单请求来响应

我怎样才能访问该文件？

真正的问题是什么？它与线程有关吗？烧瓶通过上下文暴露的全局变量？或者是什么？

谢谢

# .net - 应该如何在 xml 中对 & 符号进行编码以由 .net 正确解析？

> ID：11170714
> 
> 赞同：1
> 
> 时间：2012-06-23T15:31:00.847
> 
> 标签：.net, xml, encoding

以下最小测试用例在 powershell 中引发错误：

```
[reflection.assembly]::LoadWithPartialName('system.xml.linq')
[system.xml.linq.xdocument]::parse('<node>&</node>') 
```

坦率地说，在任何 .net 库中。这在存储 url 时是一个真正的问题 - 例如，如果 was 的`<node>`内容`http://test.com/?one=a&two=b`。

应该如何正确编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:33:11.847

XML 中的编码 & 符号是`&amp;`

使用编码的 & 符号运行它不会引发异常：

```
[reflection.assembly]::LoadWithPartialName('system.xml.linq')
[system.xml.linq.xdocument]::parse('<node>&amp;</node>') 
```

# html - localStorage 中是否存在不允许使用的字符？

> ID：11170716
> 
> 赞同：3
> 
> 时间：2012-06-23T15:31:23.867
> 
> 标签：html, local-storage, binary-data

我一直在使用 localStorage 以字符串格式存储一些二进制数据，尽管该值已明确设置（`alert`设置后立即设置，甚至设置后一段时间显示正确的值），但当页面下次加载时它会丢失。

起初我认为这可能是因为数据包含空字节，所以我重新设计了压缩器，使其永远不会输出它们。但是，这没有任何区别，因为价值仍然丢失。

我`localStorage.testing = 1`在设置二进制数据后立即添加。即使另一个值丢失，该值也会保留。

我绝对肯定没有代码`delete localStorage.myitem`。

什么可能导致此问题？

如果有帮助，这是我要存储的数据，以十六进制表示：

```
0x1103c0a0   0xd6cf0305   0xc0a0d6cf   0x0307c0a0   0xd6cf0309   0xc0a0d6cf
0x030bc0a0   0xd6cf030d   0xc0a0d6cf   0x0311c0a0   0xd6cf0313   0xc0a0d6cf   0x0301 
```

* * *

编辑：我刚刚测试`localStorage.testvalue = realvalue.replace(/[\x00-\x1f]/g,'');`并成功保存了它。所以，我想知道规范在哪里说不能在字符串中使用控制字符。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-23T23:00:41.913

我已经设置了一个[测试用例](http://jsfiddle.net/nbp6J/6/)，并在各种浏览器中运行了测试。结果如下（提到了字符代码的包含范围）。测试从支持`localStorage`.

*   铬 5 - 20：`0x0000`-`0xFFFF`
*   歌剧 10.50 - 12.00: `0x0000`-`0xFFFF`
*   Safari 4.0 - 5.1.7：`0x0000`-`0xFFFF`
*   Firefox 3.5 - 16 ^(alpha) : `0x0000`-`0xD7FF`和`0xE000`- `0xFFFE`(0xD800-0xDFFF 和 0xFFFF 在 LS 后变成两个字符)
*   IE8, IE9, IE10 ^(PP6) : `0x0009`, `0x000A`, `0x000D`, `0x0020`-`0xD7FF`和`0xE000`- `0xFFFD`。（其他范围要么被忽略，要么导致“无效参数”错误）。
    `0x0000`是一个 NULL 字节，它会截断 IE 中的所有后续字符。

**因此，字符范围`0x20`-`0xD7FF`和`0xE000`- `0xFFFD`plus `0x09`，`0x0A`并且`0x0D`是安全的。**

* * *

我创建了三个测试用例：

1.  最快的测试用例，它创建一个包含所有字符的字符串，并测试设置后的值`localStorage`
2.  一种使用空格字符 (0x20) 作为分隔符的方法，以正确处理创建长度为 2 的字符的浏览器。
3.  最糟糕的方法，因为 IE 对无效字符串抛出错误。每个字符都是单独测试的，这是相当昂贵的。

[JSFiddle](http://jsfiddle.net/nbp6J/6/)中提供了所有测试功能，第一个测试用例如下所示：

```
function run_test(lowerlimit, UPPERLIMIT) {
    try {
        if (!window.localStorage) {
            // I recall that in one of the older Chrome version (4),
            // localStorage === null
            return 'Localstorage is not supported';
        }
        if (isNaN(lowerlimit) || isNaN(UPPERLIMIT) || lowerlimit > UPPERLIMIT) {
            return 'One of the limits is not a valid number!';
        }
        var i = lowerlimit - 1;
        var character_range = [];
        while (++i < UPPERLIMIT) character_range.push(i);
        input = String.fromCharCode.apply(String, character_range);
        localStorage.setItem('chartest', input);
        output = localStorage.getItem('chartest');
        if (input === output) {
            return true;
        }
        // Uh oh, not equal!
        var result = [];
        for (i=0; i<UPPERLIMIT-lowerlimit; i++) {
            if (input[i] !== output[i]) {
                result.push(i + lowerlimit);
            }
        }
        return result;
    }catch(e){return 'Error:' + e;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:45:56.027

经过进一步测试，似乎当 localStorage 说它存储字符串时，它的真正含义是它存储匹配的字符串：

```
/^[\x00\x09\x0A\x0D\x20-\xff]*$/ 
```

因此，除了 HT、CR、LF 和 NUL 之外，在空格之前没有任何内容。

也就是说，仍然不知道为什么。

# parsing - 没有正则表达式的解析模板？

> ID：11170717
> 
> 赞同：2
> 
> 时间：2012-06-23T15:31:33.100
> 
> 标签：parsing, templates

好吧，这是我的问题：我有一个使用自定义 Javascript 实现的应用程序，但不支持正则表达式。

但是，我仍然希望能够解析模板；最好使用 C++。

模板可能如下所示（ASP 样式模板）：

```
<% var foo = someFunction("with a string");
   var bar =  anotherFunction(["with", "an", "array"]); %>

<b>This is html, and this is a variable: <%= bar %></b>

<% if(foo) { %>
    <b> foo is 'true'</b>
<% } else { %>
    <b> foo is 'false'. terrible. </b>
<% } %> 
```

所以一般结构非常简单（我假设，相对可解析）。

我的问题是，是否可以使用`while()`循环解析这样的模板，遍历每个字符，而不是使用正则表达式？

既然我这样做的尝试失败了，那怎么能做到呢？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T04:39:06.063

这样的模板很容易解析。

关键是要认识到此类模板基本上只包含两种字符串的*序列：样板 (HTML) 文本和脚本文本。*

样板文本基本上以“%>”开头，以“<%”结尾（特殊情况在 begin-template 和 end-template 处）。脚本文本就是其他一切。是的，你可以只用一个 while 循环来为每个监视“<%”、“%>”或“模板结束”的循环选择两者。该序列隐含在来回交替中。这使得解析器非常简单：

```
 while not eof
       boilerplate="";
       while next_characters~="<%" or eof
          boilerplate concat next_characters
       end
       scripttext="";
       while next_characters~="%>" or eof
          scripttext concat next_characters
       end
  end 
```

（我将单个字符管理的细节留给编码器）。

你没有说的是你想对解析结果*做什么。*如果目标是从解析结果中“生成输出”，则必须将其转换为程序。这实际上很容易。

基本上，您将结果写入文件并编译它。对于每条收集的样板文本，发出一个打印样板文本的打印语句；您可能必须转义字符以使它们在您选择的目标语言的字符串文字中合法，或者将样板文件分成多个块以打印它。对于每个脚本文本块，只需发出不变的内容。您可能必须发出一个 prolog 文本块来制作函数标题，并作为 postlog 文本块来制作函数结束。

而已。

[因为这样的“模板”和带有打印语句的简单程序之间的简单转换，我觉得这样的模板编程不是很诱人。它为我节省了一些打印关键字，仅此而已。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T18:41:11.773

您是否考虑过使用[有限状态机](http://en.wikipedia.org/wiki/Finite%20State%20Machine)？这里有一些链接供您查看。

*   [StackOverflow - 有限状态机解析器](https://stackoverflow.com/questions/3085070/finite-state-machine-parser)
*   [StackOverflow - FSM 设计和所有权](https://stackoverflow.com/questions/3176110/c-fsm-design-and-ownership)
*   [简单的 C++ FSM](http://www.bigfatalien.com/?p=125)

简而言之：FSM 由有限数量的状态和这些状态之间的转换组成。因此，您的解析过程可能表示如下（伪代码）：

```
myFSM = new FSM( /* states, transitions */ );
// now your FSM is at initial state.

while not end of file {       
  switch (myFSM->currentState) {   
    case 'IF':
      // Does current line contain closing if? or else? If so, do a transition
      // to state that grabs everything in if construct 
      ...
    case 'TEXT': 
      // Lines do not have any lexical constructs, and we are outside any blocks
      ...
    ...

  }
} 
```

当然，这大大简化了。真正的解析器看起来会有所不同。但我希望你有一个想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T17:04:11.740

这就是我在你的情况下会尝试的：

1.  编写一个标记器，它返回一组已知标记（附有它们所代表的确切字符串，例如`ID("someFunction")`：）

2.  使用上述描述可接受的模板格式的标记编写[正式语法](http://en.wikipedia.org/wiki/Formal_grammar)

3.  编写识别语法的解析器（例如[下推自动机](http://en.wikipedia.org/wiki/Pushdown_automaton)、[LR 解析器](http://en.wikipedia.org/wiki/LR_parser)或[LALR 解析器](http://en.wikipedia.org/wiki/LALR_parser)））

*注意*：确保语法符合您正在实现的解析器的限制；如果没有，请重新编写语法或更改解析器

*注意*：确保您彻底测试您的解析器，因为实现中的错误可能难以调试

*注意*：在解析步骤中，如果您想获取已解析模板的语义（含义），而不仅仅是它是否是有效模板，您还需要执行一些附加操作。这些额外的步骤包括存储变量/函数的 ID（还记得附加到标记的字符串吗？），在引用时查找它们，检查函数参数编号等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T09:35:43.057

可能已经有适合您的现有解决方案。

无逻辑模板库：

[https://github.com/leonidas/transparency/wiki/Frequently-Asked-Questions](https://github.com/leonidas/transparency/wiki/Frequently-Asked-Questions)

（见最后一个问题）。

# utf-8 - UTF-8 和 ISO-8859-1 有相同的“html-entities”吗？

> ID：11170718
> 
> 赞同：0
> 
> 时间：2012-06-23T15:31:34.937
> 
> 标签：utf-8, html-entities, iso

我在 UTF8 中转换了一些字符串，然后在浏览器上使用 UTF-8 或 ISO-8859-1 观看它。渲染是一样的。他们有一些平等的实体吗？

例如`&sup3;`（即`³`）在两个编码上显示相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:43:30.960

HTML 字符引用之类`&sup3;`的指令是浏览器显示某些字符的指令。浏览器使用当前使用的字符集显示它们。

如果您的 HTML 文档包含

```
2&sup3; = 8 
```

`³`浏览器按照字符引用的指示显示一个字符。`&sup3;`本身不是 UTF8 或 ISO-8859-1；`&`, `s`, `u`, `p`,`3`和`;`都是两种编码中都存在的普通字符。HTML 字符引用的全部意义在于您可以使用它们而无需关心文档的实际编码是什么。

如果您不使用字符引用而是使用实际字符：

```
2³ = 8 
```

现在字符集变得很重要：如果您将文件保存为 UTF-8 并且浏览器尝试使用 ISO-8859-1 呈现它，您将看到一个损坏的字符而不是`³`，反之亦然。

# c++ - 64 位 C++ 编译器

> ID：11170720
> 
> 赞同：-1
> 
> 时间：2012-06-23T15:31:42.677
> 
> 标签：c++, compiler-construction

所以.. 我正在寻找开始学习 C++。我之前接触过它，我之前也接触过Lua。我只是厌倦了 PHP/Javascript。

我可能对这个问题“不屑一顾”，但由于我的笔记本电脑是 64 位的，这是否意味着我必须安装 64 位编译器？如果是这样，你能给我指一个吗？

如果我不需要 64 位编译器，为什么我在阅读网站时经常抛出 32 位 / 64 位？

我很抱歉，因为我从来不知道为什么会发生事情，比如技术原因，我只知道我必须做什么才能让事情正常进行（关于 PHP/javascript）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:37:01.487

您可以在 64 位机器上运行 32 位编译器，~~但是您将无法使用它编译本机 64 位可执行文件或库~~. 这些术语被大量使用，因为 64 位比 32 位具有优势，只能通过 64 位编译器来利用，例如扩展地址空间。但是，除非您的应用程序使用大量内存，否则它可能并不重要。

由于您使用的是 Windows，因此最好的选择是[Visual C++ Express Edition](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express)。它是免费的，但默认情况下不包含 64 位编译器。如果您愿意，您仍然可以添加一个，但您需要安装 Windows SDK，[如此处所述](https://stackoverflow.com/a/8582538/31516)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T15:38:44.517

如果您使用的是 Linux，我强烈推荐您使用 gcc 和 clang。在 Windows 中，我认为最好的编译器是 Visual Studio。

**注意：** 32 位编译器可以在 32 位和 64 位 mashine 中编译，所以您不必担心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T15:54:18.200

您可能知道在 64 位版本的 Windows 上，您可以执行 64 位和 32 位应用程序。因此，您选择的编译器是 32 位还是 64 位应用程序并不重要。

更有趣的是您选择的编译器是否可以生成 32 位和 64 位可执行文件，或者只能生成其中一种。前者更通用，而后者可以充分利用 64 位架构。

在您的位置，我会下载 Microsoft 的[Visual C++ Express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-cpp-express)，这是一个免费的集成环境，其中包含您入门所需的一切。

请注意，此编译器仅允许您构建 32 位可执行文件，但对于像您这样的初学者来说，这并不重要。

# php - 使用 PHP 后需要销毁对象吗？

> ID：11170721
> 
> 赞同：7
> 
> 时间：2012-06-23T15:32:01.330
> 
> 标签：php, object

PHP 中的对象销毁有多重要？使用 PHP 后销毁对象重要吗？因为与 java 不同，PHP 没有垃圾收集器（我不知道）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-23T15:33:17.523

在一般情况下，您不需要销毁对象，而且 PHP 确实[有一个垃圾收集器](https://stackoverflow.com/questions/1735492/is-there-garbage-collection-in-php)。此外，大多数简单的脚本甚至都不需要，因为每个 HTTP 请求都会拆除和重建整个环境；垃圾收集器帮助那些在服务*单个*请求时内存不足的脚本。

### 一般情况的例外情况：

您可能希望“丢失”对消耗大量内存和/或包装非托管资源的对象的所有引用；这通常很简单

```
$largeObject = null; // reference to previous value lost 
```

如果那是对 的最后一次引用`$largeObject`，那么：

*   PHP 将立即调用析构函数（如果存在）；如果您的脚本是长期存在的，您可能希望对包装非托管资源（例如数据库连接、套接字等）的对象执行此操作。
*   对象占用的内存现在可以进行垃圾回收了。但是，收集不会在现场进行，而是在稍后需要更多内存的时候进行（尽管您可以随时调用[`gc_collect_cycles`](http://www.php.net/manual/en/function.gc-collect-cycles.php)强制垃圾收集）。

当然，在“服务请求然后退出”的典型情况下，所有这些都没有考虑在内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T15:36:40.973

通常这不是您必须考虑的问题。这是一篇关于遇到此问题的人的文章。

[http://paul-m-jones.com/archives/262](http://paul-m-jones.com/archives/262)

你可以使用这个函数来破坏你喜欢的类中的任何对象。

```
function __destruct()
{
    //do stuff
} 
```

只要脚本保持运行，对象就可以在请求期间或从命令行调用时保留在内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T15:35:27.297

PHP 5.3有一个内置的[垃圾收集](http://php.net/manual/en/features.gc.php)（也称为 GC）机制。

```
<?php
    gc_enable(); // Enable Garbage Collector
    var_dump(gc_enabled()); // true
    var_dump(gc_collect_cycles()); // # of elements cleaned up
    gc_disable(); // Disable Garbage Collector
?> 
```

希望能帮助到你！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T15:38:37.100

php 有一个垃圾收集器，但实际上有很多情况下 php 直到`unset`函数执行时才释放内存。这些案例是关于单例，xml，可能是结构。在我们公司，我们修补了 php 并记录了所有内存分配，并在代码中添加了 unset 函数。但在 Web 开发中，这并不是那么重要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T15:47:34.100

正如其他人所建议的那样，垃圾收集将在执行结束时完成这项工作，但是如果您有一个长时间运行的 cron，那么如果/当您处理大量数据或庞大的数组时，您可能会遇到问题。

此时的解决方案是使用 unset($object) 调用对象魔术 __destruct() 函数，如果您想对对象执行任何操作（例如将数据保存在数据库中），您可以使用该函数。

# android - Android API 手册

> ID：11170729
> 
> 赞同：1
> 
> 时间：2012-06-23T15:33:50.410
> 
> 标签：android, android-2.2-froyo

我想制作一本可以在其他应用程序中使用的 android API 手册。例如，日历和触点可用于其他应用。是否还有更多这样的 API，可以在这些独立应用程序本身完整的其他应用程序中使用？

请建议我可以在哪里阅读它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:47:34.297

[这](http://developer.android.com/reference/android/provider/package-summary.html)可能是您正在寻找的东西吗？

你有`AlarmClock`,`Contacts`等`Settings.System`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:49:53.793

我不知道我是否正确理解您，但也许您并没有真正寻找 API 参考，而是寻找可以从您的应用程序启动/调用的**Intents的参考？**如果是这样，请查看开发人员网站上的[Intent 文档。](http://developer.android.com/reference/android/content/Intent.html)您可以使用 an[`Intent`](http://developer.android.com/reference/android/content/Intent.html)从其他应用程序启动活动，有时可以使用检索结果[`startActivityForResult`](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)（例如启动联系人列表以选择联系人，其 ID 将返回到您的应用程序），或者能够查看或在各自的默认应用程序中编辑联系人或电话号码等内容。

例如，您可以创建一个 Intent，它使用[`"ACTION_DIAL"`](http://developer.android.com/reference/android/content/Intent.html#ACTION_DIAL)action 参数和 data 参数`"content://contacts/people/1"`来启动电话的拨号器，其中包含已填写的联系人号码。请查看[Intents 和 Intent Filters 指南](http://developer.android.com/guide/components/intents-filters.html)以获取更多信息。通用 API 参考。

并非所有内置应用程序都支持每个操作，也不是都支持 startActivityForResult（例如，如果我没记错的话，日历不允许您启动它以将其用作日期或事件选择器）。因此，在文档之外进行一些研究也是值得的。

# javascript - iPhone webapp GPS 精度

> ID：11170730
> 
> 赞同：0
> 
> 时间：2012-06-23T15:33:54.723
> 
> 标签：javascript, iphone, web-applications, gps

我创建了一个`navigator.geolocation.watchPosition`用于跟踪访问者位置的小型 javascript webapp。从我收到的数据中，我注意到我测量的最佳精度是 5m。我认为这足以计算最大和当前速度。

但似乎速度不是那么准确。与“真正的”gps 应用程序相比，我有时会得到 10 公里/小时的差异。

这是对 web 应用程序的限制，还是我在计算中犯的错误？为了计算速度，我将当前位置与最后一个位置进行比较并计算差值/时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:58:36.747

5m 是您可以获得的最佳精度，但大多数情况下它的精度低于此精度。我会说它大约是 30m，但根据我的经验，它发生了，设备位置距离我真正所在的真实位置大约 1 公里。这不是持久的，而只是我得到的一个值。如果您想进行良好的精度速度计算，您需要过滤gps坐标值。或者你可以使用内置的速度功能，这也很准确。

# java - 无法在 AVD 文件夹中创建 sdcard - Mac OSX

> ID：11170732
> 
> 赞同：3
> 
> 时间：2012-06-23T15:33:56.777
> 
> 标签：java, android, macos

当我尝试使用 AVD 管理器创建新的 android 模拟器时，我不断收到错误消息“无法在 AVD 文件夹中创建 sdcard”。无论我设置什么尺寸的 SD 卡！有谁知道为什么？我正在运行 Mac OSX 64 位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:00:33.313

在 Android SDK Manager 上，我删除了 Tools/Android SDK Tools，然后重新安装了它。

出于某种原因，现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T08:21:30.260

在创建 AVD 时选择适当的 CPU/ABI。选择您已在 Android SDK 中安装的模拟器加速器。我已经安装了 Intel x86 仿真器，但在 AVD 设置过程中一直选择 ARM(armeabi-v7a)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-03T12:28:31.387

有同样的问题。我刚刚为模拟器分配了更多内部存储空间并停用了 SD 卡的创建。

# java - Java 中的生产者消费者问题 - 缺少同步？

> ID：11170734
> 
> 赞同：0
> 
> 时间：2012-06-23T15:34:05.247
> 
> 标签：java, multithreading, producer-consumer

我想我没有正确使用同步。我得到以下输出。

我有意识地选择不使用 BlockingQueue 或 java 5 并发特性。我写这个是为了学习同步和一些基础知识。

> 生产者线程：PRODUCER-1 将项目 0-Name-0 添加到队列
> 消费者线程 CONSUMER-2 处理项目：0-Name-0
> 生产者线程：PRODUCER-2 将项目 1-Name-1 添加到队列

你能帮我理解我哪里出错了吗？

```
public class ProducerConsumerManager {

public static void main(String args[]){

    ItemQueue itemQueue = new ItemQueue();

    Producer producer1 = new Producer(itemQueue,15, 500);
    Producer producer2 = new Producer(itemQueue,15, 1000);
    Consumer consumer1 = new Consumer(itemQueue,500);
    Consumer consumer2 = new Consumer(itemQueue,1500);

    Thread producerThread1 = new Thread(producer1,"PRODUCER-1");
    Thread producerThread2 = new Thread(producer2,"PRODUCER-2");
    Thread consumerThread1 = new Thread(consumer1,"CONSUMER-1");
    Thread consumerThread2 = new Thread(consumer2,"CONSUMER-2");

    producerThread1.start();
    producerThread2.start();

    consumerThread1.start();
    consumerThread2.start();

    try {
        Thread.sleep(1000);
    } catch (InterruptedException e) {
        System.out.println("The MAIN THREAD has been INTERRUPTED");
    }

}
}

 public class Consumer implements Runnable{

private ItemQueue itemQueue;
private int waitTimeInMillis;
public Consumer(ItemQueue queue, int waitTimeInMillis){
    itemQueue = queue;
    this.waitTimeInMillis = waitTimeInMillis;
}

private boolean processItem(Item item){     
    if(item == null){
        System.out.println("Consumer Thread cannot process as Item is null");
        return false;
    }               
    return true;
}

public void run() {
    synchronized(itemQueue){
        try {
        if(itemQueue.hasMoreItems()){
            Item item = itemQueue.getNextItem();
            System.out.println("Consumer Thread "+ Thread.currentThread().getName() + " processing item: " +  item.getItemNo() + "-" + item.getItemName());

            processItem(item);              
                Thread.sleep(waitTimeInMillis);

        }else{

                itemQueue.wait();
            }} catch (InterruptedException e) {
                System.out.println("Consumer Thread INTERRUPTED");                  
            }

    }               
}

}

  public class Producer implements Runnable{

private ItemQueue itemQueue;
private int maxCount;
private int waitTimeInMillis;
public Producer(ItemQueue queue, int maxItems, int waitTimeInMillis){
    itemQueue = queue;  
    this.maxCount = maxItems;
    this.waitTimeInMillis = waitTimeInMillis;
}

public void run() { 
    synchronized(itemQueue){
        try {
        if(itemQueue.queueCount()>=maxCount){

                itemQueue.wait();               
        }
        else{
            produceNewItem();
            Thread.sleep(waitTimeInMillis);
        }
        } catch (InterruptedException e) {
            System.out.println("Producer Thread INTERRUPTED");
        }
    }       
}

private boolean produceNewItem(){
    Item  item = null;
    synchronized(ItemService.class){
        item = ItemService.getNextItem();       
    System.out.println("Producer Thread: " + Thread.currentThread().getName() + " adding item " + item.getItemNo() +"-"+item.getItemName()+"  to queue");
    itemQueue.addItem(item);
    return true;
}
}
}

  import java.util.LinkedList;

  public class ItemQueue {

private LinkedList<Item> itemList = new LinkedList<Item>();

public void addItem(Item item){
    itemList.add(item);
}

public Item getNextItem(){
    return itemList.poll();
}

public boolean hasMoreItems(){
    return  !itemList.isEmpty();
}

public int queueCount(){
    return itemList.size();
}
}

   public class Item {

private String itemName;
private int itemNo;
private String itemDescription;

public String getItemName() {
    return itemName;
}
public void setItemName(String itemName) {
    this.itemName = itemName;
}
public int getItemNo() {
    return itemNo;
}
public void setItemNo(int itemNo) {
    this.itemNo = itemNo;
}
public String getItemDescription() {
    return itemDescription;
}
public void setItemDescription(String itemDescription) {
    this.itemDescription = itemDescription;
}

public Item (int no, String name, String desc){
    itemName = name;
    itemNo = no;
    itemDescription = desc;
}
}

   import java.util.LinkedList;

  public class ItemService {

static LinkedList<Item> itemList = new LinkedList<Item>();
static int counter =0;

static{
    Item item = null;
    for(int i=0;i<10000;i++){
        item = new Item(i, "Name-"+i, "Description for item " + i);
        itemList.add(item);
    }

}

public static Item getNextItem(){
    if(counter < 9999){
        Item item= itemList.get(counter);
        counter++;
        return item;
    }
    else
    {
        System.out.println("Cannot PRODUCE any further items. all exhausted");
        return null;
    }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:15:17.893

你还没有说你有哪个问题，即你期望什么而不是你得到的输出，但是你的代码有两个重要的问题：

1.  两种线程都在 itemQueue 上等待（因为它已满，或者因为它是空的），但在代码中没有任何地方`notify()`，或者最好是`notifyAll()`，调用来唤醒等待的线程。这将不可避免地导致饥饿。当生产者将项目放入队列时，它应该调用`notifyAll()`以唤醒等待的消费者。当消费者从队列中删除一个项目时，它应该调用`notifyAll()`唤醒等待的生产者。
2.  必须始终在循环中创建一个 wait() 方法，以检查线程在唤醒时是否真的可以继续。阅读 javadoc 以获取`Object.wait()`.

另一个不太重要的问题是，与其强制每个线程实现同步和`wait()`/ `notifyAll()`，这一切都应该封装在队列中。该线程只会获取项目并将项目放入队列中，并被队列阻塞，直到可能为止。总之，你应该重新实现 BlockingQueue。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:50:51.590

您错误的一点（可能不是您的问题的原因）是在生产者/消费者模型中，您应该在生产者之前启动/运行您的消费者。

# javascript - jquery masonry 附加具有自定义尺寸的图像。

> ID：11170735
> 
> 赞同：1
> 
> 时间：2012-06-23T15:34:15.387
> 
> 标签：javascript, jquery, html, jquery-masonry

晚上！

我当前的相关代码：

```
var $test;
var $iterator = 0; 
$(document).ready(function() {
    $("#demo-input").tokenInput("php-example.php" ,{
        classes: {
            tokenList: "token-input-list-facebook",
            token: "token-input-token-facebook",
            tokenDelete: "token-input-delete-token-facebook",
            selectedToken: "token-input-selected-token-facebook",
            highlightedToken: "token-input-highlighted-token-facebook",
            dropdown: "token-input-dropdown-facebook",
            dropdownItem: "token-input-dropdown-item-facebook",
            dropdownItem2: "token-input-dropdown-item2-facebook",
            selectedDropdownItem: "token-input-selected-dropdown-item-facebook",
            inputToken: "token-input-input-token-facebook"
        },
        hintText: "Type in the names of your Tags",
        noResultsText: "No results",
        searchingText: "Searching..."
    });
});

var $container = $('#container');

$container.imagesLoaded( function(){
    $container.masonry({
        itemSelector: '.box',
        columnWidth: 280,
        isAnimated: !Modernizr.csstransitions
    });
});

$(document).ready(function() {
    $("input[type=button]").click(function () {
        $.ajax({ url: "generatehtml.php",
        data: {action: $(this).siblings("input[type=text]").val()},
        type: 'post',
        dataType: "json",
        success: 
            function(response){
                $test=response;
                $iterator =  $test.length;                  
                for (i=0; i<10; i++){
                    var $boxes = $(balls($iterator));
                    $container.append( $boxes ).masonry('appended', $boxes);                        
                }

                var $boxes = $( '<div class="box" STYLE="color: rgba(255, 255, 255, 1);">These results are ranked from<BR> most similar, to least similar.<BR>The percentage below each game <BR>indicates how similar to the <BR>original input that game is.<BR></div>' );
                $container.prepend( $boxes ).masonry('reload', $boxes); 
            }
        });
    });
});

window.onscroll = scroll;

function scroll(){  
    var $boxes = $(balls($iterator));
    $container.append( $boxes ).masonry('appended', $boxes);    
    }  
//+'<img src="timthumb.php?src='+$test[$iterator][2]+'&q=100&w=300"/>' Replace this with the one below when timthumb is whitelisted
function balls($i){
    $iterator -= 1;
    var $width = 7.5;
    return ('<div class="box">'
    +''+$test[$iterator][1][2]+''
    +'<img src="'+$test[$iterator][2]+'"  width="280" height="160"/>'
    +'<div id=boxBottom>'+Math.floor($test[$iterator][0]*100)+'%</div>'
    +'</div>');
} 
```

如您所见：

```
 $container.imagesLoaded( function(){
 $container.masonry({
    itemSelector: '.box',
    columnWidth: 280,
    isAnimated: !Modernizr.csstransitions
 });
 }); 
```

和

```
 +'img src="'+$test[$iterator][2]+'"  width="280" height="160"/>' 
```

图像大小被强制为 280x160，我希望这些图像更加动态，并且我还希望每个框之间的空间很小，我该怎么做？

参考网站：

[http://newgameplus.nikuai.net/TEST/](http://newgameplus.nikuai.net/TEST/)

（不要使用第一个搜索栏。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:32:56.687

```
$items.imagesLoaded(function(){
 $container
 .append( $items ).masonry( 'appended', $items, true );
}); 
```

这实际上是我一直需要做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:51:40.097

我不知道这是否是正确的做法（在 jQuery Masonry 世界中），因为我从未使用过 jQuery Masonry，但您可以尝试以下方法。

首先更新镜像创建代码：

```
function balls($i){
    $iterator -= 1;
    var $width = 7.5;
    return ('<div class="box">'
    +'<p>'+$test[$iterator][1][2]+'</p>'
    +'<img src="'+$test[$iterator][2]+'"/>'
    +'<div id=boxBottom>'+Math.floor($test[$iterator][0]*100)+'%</div>'
    +'</div>');
} 
```

替换以下 CSS：

```
.box img, #tumblelog img {
    display: block;
    width: 100%;
} 
```

和：

```
.box img, #tumblelog img {
    display: table-cell;
    max-width: 280px;
    max-height: 160px;
} 
```

并添加以下 CSS：

```
.box {
    width: 280px;
    display: table-row;
    text-align: center;
}

.box p {
    margin-bottom: 0;
    overflow: hidden;  // hide the overflow of text
} 
```

# php - 带有#U的php preg_replace似乎将带有特殊字符的字符串转换为空字符串

> ID：11170737
> 
> 赞同：0
> 
> 时间：2012-06-23T15:34:57.483
> 
> 标签：php

我已经研究这个问题几个小时了，并将其缩小到这几行代码。我知道代码并不完美，但这是我必须从开发人员那里得到的。该脚本应该过滤掉潜在的恶意代码。但问题是，每当有人使用特殊字符（例如 á、ñ、ö 等）时，字符串似乎就会变为空。

例如，如果有人写“viva españa”，则字符串为空。

如果有人写“viva espana”（没有 ñ），那很好。

其他特殊字符也是如此。这可能是什么原因造成的？我对正则表达式的了解几乎为零，所以它对我来说有点像垃圾，但我所知道的是，当我注释掉这些行时，脚本在字符串中带有和不带有特殊字符的情况下以及我取消注释的那一刻都有效它们，它只能在字符串中没有特殊字符的情况下工作。

有任何想法吗？

这些是代码行：

```
 $string = preg_replace('#(&\#*\w+)[\x00-\x20]+;#u', "$1;", $string);
  $string = preg_replace('#(&\#x*)([0-9A-F]+);*#iu', "$1$2;", $string);
  $string = preg_replace('#(<[^>]+[\x00-\x20\"\'\/])(on|xmlns)[^>]*>#iUu', "$1>", $string);

  $string = preg_replace('#([a-z]*)[\x00-\x20\/]*=[\x00-\x20\/]*([\`\'\"]*)[\x00-\x20\/]*j[\x00-\x20]*a[\x00-\x20]*v[\x00-\x20]*a[\x00-\x20]*s[\x00-\x20]*c[\x00-\x20]*r[\x00-\x20]*i[\x00-\x20]*p[\x00-\x20]*t[\x00-\x20]*:#iUu', '$1=$2nojavascript...', $string);
  $string = preg_replace('#([a-z]*)[\x00-\x20\/]*=[\x00-\x20\/]*([\`\'\"]*)[\x00-\x20\/]*v[\x00-\x20]*b[\x00-\x20]*s[\x00-\x20]*c[\x00-\x20]*r[\x00-\x20]*i[\x00-\x20]*p[\x00-\x20]*t[\x00-\x20]*:#iUu', '$1=$2novbscript...', $string);
  $string = preg_replace('#([a-z]*)[\x00-\x20\/]*=[\x00-\x20\/]*([\`\'\"]*)[\x00-\x20\/]*-moz-binding[\x00-\x20]*:#Uu', '$1=$2nomozbinding...', $string);
  $string = preg_replace('#([a-z]*)[\x00-\x20\/]*=[\x00-\x20\/]*([\`\'\"]*)[\x00-\x20\/]*data[\x00-\x20]*:#Uu', '$1=$2nodata...', $string);

  $string = preg_replace('#(<[^>]+[\x00-\x20\"\'\/])style[^>]*>#iUu', "$1>", $string); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:37:28.013

我建议不要使用`u`. 该标志指定字符串为 Unicode，但您只使用 ASCII 范围内的字符串。

# android - Progressbar WebView 类似 Chrome 浏览器

> ID：11170738
> 
> 赞同：8
> 
> 时间：2012-06-23T15:34:57.837
> 
> 标签：android, progress-bar

有没有人想在 Chrome 或 Reader 等 web 视图上使用进度条？就像在底部一样： ![在此处输入图像描述](../Images/3974e7e5d9fa4c611392744680a688d5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:54:19.120

这是我用来显示进度的代码：

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {
WebView mWvUrl;

@Override
protected void onCreate(Bundle savedInstanceState) {
    final Activity activity=this;
    super.onCreate(savedInstanceState);

    getWindow().requestFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
    setContentView(R.layout.activity_main);
    activity.setProgressBarIndeterminateVisibility(false);
     mWvUrl = (WebView) findViewById(R.id.wv_url);

     mWvUrl.getSettings().setJavaScriptEnabled(true);
     Button btnLoad = (Button) findViewById(R.id.btn_load);
     btnLoad.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
             EditText etUrl = (EditText) findViewById(R.id.et_url);
              mWvUrl.loadUrl(etUrl.getText().toString());
              activity.setProgressBarIndeterminateVisibility(true);
        }
    });

     mWvUrl.setWebViewClient(new WebViewClient(){
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {

                /** This prevents the loading of pages in system browser */
                return false;
            }

            /** Callback method, executed when the page is completely loaded */
            @Override
            public void onPageFinished(WebView view, String url) {
                 super.onPageFinished(view, url);

                 Toast.makeText(getBaseContext(),
                                "Page loaded Completely",
                                Toast.LENGTH_SHORT).show();

                /** Hiding Indeterminate Progress Bar in the title bar*/
                activity.setProgressBarIndeterminateVisibility(false);

            }

        });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

# c++ - 用另一个无符号字符的另一位无条件地设置一个无符号字符的位

> ID：11170740
> 
> 赞同：3
> 
> 时间：2012-06-23T15:35:29.663
> 
> 标签：c++, c, bit-manipulation

我以这种方式使用按位打开和关闭位：

```
unsigned char myChar = ...some value
myChar |= 0x01 << N // turn on the N-th bit

myChar &= ~(0x01 << N) //turn off the N-th bit 
```

现在，假设 N 的值是已知的，但是设置/取消设置操作取决于另一个无符号字符的位的值。从现在开始，我就是这样做的：

```
if ((otherChar & (0x01 << M)) != 0)
{
    //M-th bit of otherChar is 1
    myChar |= 0x01 << N; 
}else
{
    myChar &= ~(0x01 << N);
} 
```

这应该是一种从无符号字符到另一个字符的“移动位”操作。

我的问题：有什么方法可以在不使用条件的情况下做到这一点？（也没有 std::bitset ）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:40:09.760

简短的回答是“是”。

更长的答案是您直接从源代码中使用该位：

```
unsigned char bit = 1 << N;

myChar &= ~bit;             // Zero the bit without changing anything else
myChar |= otherChar & bit;  // copy the bit from the source to the destination. 
```

这假设您要将位 N 从源复制到目标的位 N。如果源位和目标位可能处于不同的偏移量，事情就会变得更加困难。您不仅从源中提取了正确的位，而且还必须将其移动到正确的位置，然后将其 OR 到目标。基本思路和上面差不多，但是移位的代码有点繁琐。问题是您想要执行以下操作：

```
unsigned char temp = source & 1 << M;
temp <<= N - M;
dest |= temp; 
```

如果 N > M，这将正常工作，但如果 M > N，你最终会得到类似`temp <<= -3;`. 您希望*将*-3 的左移最终作为 3 的右移 - 但这不是发生的情况，因此您需要一些条件代码来获取绝对值并确定是否进行右移移位或左移以将位从源移到目标中的正确位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T15:40:42.250

一种解决方案是首先始终取消设置该位，然后按位或在`otherChar`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T16:06:40.717

这会读取 c1 的*from*位并将其写入 c2 的*to*位。

```
#include <stdio.h>

typedef unsigned char uchar;

uchar move_bit(uchar c1, int from, uchar c2, int to)
{
    int bit;
    bit = (c1 >> from) & 1;            /* Get the source bit as 0/1 value */
    c2 &= ~(1 << to);                  /* clear destination bit */
    return (uchar)(c2 | (bit << to));  /* set destination bit */
}

int main()
{
    printf("%02X\n",move_bit(0x84,3,0x42,5));
    printf("%02X\n",move_bit(0x81,0,0x03,7));
    printf("%02X\n",move_bit(0xEF,4,0xFF,6));
    return 0;
} 
```

结果：

```
42
83
BF 
```

# neo4j - 在数据库上创建 Neo4j 索引

> ID：11170743
> 
> 赞同：2
> 
> 时间：2012-06-23T15:35:42.330
> 
> 标签：neo4j

我目前正在试用 Neo4j，看看它能做什么。我的数据库由大约 54000 个节点和 10M 关系（2 种关系类型）组成，这些关系是使用[https://github.com/jexp/batch-import](https://github.com/jexp/batch-import)从 TSV 文件导入的。我发现需要索引来在合理的时间内获取查询结果。

我想做的典型查询之一是列出与某种类型连接的节点，并且连接的节点具有某些值。就像是：

```
START 
    a=node(*) 
MATCH 
    (a)-[r]->(b) 
WHERE 
    id(a) <> 0 
    AND id(b) <> 0 
    AND type(r) = 'ASSOCIATION' 
    AND a.attr1 = 'value' 
    AND b.attr1 = 'value' 
RETURN 
    a, b LIMIT 200\. 
```

自然，这个查询永远不会完成。

1.  考虑到这一点，在现有数据库上为此类查询（批量创建？）关系索​​引的最简单方法是什么？以及具有某些属性值的节点的索引？

2.  这是可以从 Web 控制台完成的，还是之后可以完成的？通过阅读 neo4j 手册，我了解到您想要编写一个自定义 java 实现，该实现逐个节点加载数据并在创建数据库时构建索引。我个人喜欢使用 python，但结果证明 python 绑定太慢，甚至无法导入当前的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T04:12:50.567

你在寻找一个特定的开始吗？

如果没有，您可以尝试索引您的关系，然后在开始时将它们拉出来，然后从那里开始：

```
START 
    specificRelationship=relationship:RelIndex(key='value')
MATCH
    a-[specificRelationship]->b
WHERE
    AND a.attr1 = 'value' 
    AND b.attr1 = 'value' 
RETURN 
    a, b LIMIT 200 
```

要回答您的问题：

1.  您可以在关系或节点上创建任何类型的索引，您可以选择要查找的索引。我通常会首先看到人们对 Node 的特殊性，您可以在其中通过基于单独定义的属性的键/值对进行检索。

2.  我没有在 Python 中完成此操作，但您可以在 Java 中轻松加载，如果您想执行此查询，您可以通过 Neo4j 的 Web 控制台完成，如果您想使用信息。

# visual-studio-2012 - VS2012 SDK 是否包含 VSIX 项目模板？

> ID：11170744
> 
> 赞同：7
> 
> 时间：2012-06-23T15:35:48.317
> 
> 标签：visual-studio-2012, vsix, visual-studio-sdk

我安装了 VS2012 RC SDK，但在创建新项目时没有看到 VSIX 项目模板。我是否遗漏了某些东西，或者该模板是否在不同的 SDK 中？

这是一个屏幕截图：

[![](../Images/9718b9b63890fc59dcf7e7088ff30952.png "由 imgur.com 主办")](https://imgur.com/ggpp9)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T22:54:13.283

好的，这有点令人困惑，但是找到 VSIX 项目模板的**正确位置在这里：**

[![](../Images/a496e349abaa7d626b6d55f684a5d000.png "由 imgur.com 主办")](https://imgur.com/wpJKO)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T04:04:19.767

下载 Visual Studio 2012 SDK 为我修复了它，在 C# 下不再缺少 VSIX 模板

您可以在此处获取 SDK：

[http://www.microsoft.com/en-us/download/details.aspx?id=30668](http://www.microsoft.com/en-us/download/details.aspx?id=30668)

在查看 VSIX 模板的 C#/VB.NET > 可扩展性时，请确保从下拉菜单中选择“.NET Framework 4.5”，否则您将看不到它。我了解到，感谢这篇文章：

[VSIX 项目模板不存在](https://stackoverflow.com/questions/11356572/vsix-project-template-does-not-exist)

# ios - iPhone重启时执行程序

> ID：11170749
> 
> 赞同：-3
> 
> 时间：2012-06-23T15:36:20.493
> 
> 标签：ios

我正在寻找一个可以与 iPhone 的组件一起工作的程序，但是我遇到了当有人关闭他们的 iPhone 时程序不会重新启动的问题。您需要手动重新启动它。

我怎样才能让它在iPhone打开时自动执行这个程序？我可以在我的代码中包含什么以便发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:07:29.213

这不是在启动时自动启动应用程序的机制，除了 VoIP 应用程序。请参阅如果应用程序意外关闭（由@qegal 引用）[如何重新启动应用程序，以及那里的链接。](https://stackoverflow.com/questions/10395142/how-to-restart-app-if-it-unexpectedly-shutdown)

当用户的位置可用时，位置应用程序将自动重新启动。

当收到适当的推送通知时，将启动报亭应用程序。

其他后台模式通常不会自动（无需用户干预）启动应用程序。

有关详细信息，请参阅[应用程序状态和多任务处理](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)。

# c++ - C++ 矢量错误（Visual C++ 2008 速成版）

> ID：11170750
> 
> 赞同：0
> 
> 时间：2012-06-23T15:36:20.167
> 
> 标签：c++, vector, compiler-errors

我正在尝试在以下位置运行这个小程序`Visual C++ 2008 Express Edition`：

```
#include <vector>
int main(){
vector<bool> features(4,false);
for(vector<bool>::iterator i = features.begin(); i != features.end(); i++){
cout<<features[i];
}
} 
```

当我这样做时，我得到以下信息：

```
 1>------ Build started: Project: SFS, Configuration: Debug Win32 ------
1>Compiling...
1>SFS.cpp
1>.\SFS.cpp(1) : warning C4627: '#include <vector>': skipped when looking for precompiled header use
1>        Add directive to 'stdafx.h' or rebuild precompiled header
1>.\SFS.cpp(14) : fatal error C1010: unexpected end of file while looking for precompiled header. Did you forget to add '#include "stdafx.h"' to your source?
1>Build log was saved at "file://c:\Users\Ola\Documents\Visual Studio 2008\Projects\SFS\SFS\Debug\BuildLog.htm"
1>SFS - 1 error(s), 1 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我还收到以下错误消息：

![在此处输入图像描述](../Images/3b28e7617bed7802bba3115ab82850de.png)

**编辑(1)**

添加后`#include "stdafx.h"`，我得到以下信息：

```
1>------ Build started: Project: SFS, Configuration: Debug Win32 ------
1>Compiling...
1>SFS.cpp
1>.\SFS.cpp(5) : error C2065: 'vector' : undeclared identifier
1>.\SFS.cpp(5) : error C2062: type 'bool' unexpected
1>.\SFS.cpp(6) : error C2065: 'vector' : undeclared identifier
1>.\SFS.cpp(6) : error C2062: type 'bool' unexpected
1>.\SFS.cpp(6) : error C2039: 'iterator' : is not a member of '`global namespace''
1>.\SFS.cpp(6) : error C2065: 'i' : undeclared identifier
1>.\SFS.cpp(6) : error C2065: 'features' : undeclared identifier
1>.\SFS.cpp(6) : error C2228: left of '.end' must have class/struct/union
1>        type is ''unknown-type''
1>.\SFS.cpp(6) : error C2065: 'i' : undeclared identifier
1>.\SFS.cpp(6) : error C2143: syntax error : missing ';' before ')'
1>.\SFS.cpp(6) : error C2143: syntax error : missing ';' before ')'
1>.\SFS.cpp(6) : error C2143: syntax error : missing ';' before '{'
1>.\SFS.cpp(7) : error C2065: 'cout' : undeclared identifier
1>.\SFS.cpp(7) : error C2065: 'features' : undeclared identifier
1>.\SFS.cpp(7) : error C2065: 'i' : undeclared identifier
1>Build log was saved at "file://c:\Users\Ola\Documents\Visual Studio 2008\Projects\SFS\SFS\Debug\BuildLog.htm"
1>SFS - 15 error(s), 0 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

除了同样的错误信息框。

**编辑(2)**

添加`#include<iostream>`并使用后`std::cout`，我得到以下信息：

```
1>------ Build started: Project: SFS, Configuration: Debug Win32 ------
1>Compiling...
1>SFS.cpp
1>.\SFS.cpp(1) : warning C4627: '#include <iostream>': skipped when looking for precompiled header use
1>        Add directive to 'stdafx.h' or rebuild precompiled header
1>.\SFS.cpp(2) : warning C4627: '#include <vector>': skipped when looking for precompiled header use
1>        Add directive to 'stdafx.h' or rebuild precompiled header
1>.\SFS.cpp(16) : fatal error C1010: unexpected end of file while looking for precompiled header. Did you forget to add '#include "stdafx.h"' to your source?
1>Build log was saved at "file://c:\Users\Ola\Documents\Visual Studio 2008\Projects\SFS\SFS\Debug\BuildLog.htm"
1>SFS - 1 error(s), 2 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

除了同样的错误信息框。

这是为什么？我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:39:08.353

奇怪的 MSVS 东西。是您包含的第一个文件`"stdafx.h"`吗？它应该是。

另外，做一个干净的构建（重建或清理/构建）。

```
#include "stdafx.h"
#include <vector>
int main(){
vector<bool> features(4,false);
for(vector<bool>::iterator i = features.begin(); i != features.end(); i++){
cout<<features[i];
}
} 
```

或者您可以在项目属性中关闭使用预编译头文件构建的选项。

您还需要：

```
#include <vector> 
```

并替换`vector`为`std::vector`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T16:06:08.333

我可能不知道答案，但这对我有用。

```
#include <iostream>
#include <vector>

int main(){
    std::vector<bool> features(4,false);
    for(std::vector<bool>::iterator i = features.begin(); i != features.end(); i++){
        std::cout<< (*i);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T16:10:41.983

尝试这样的事情：

```
#include "stdafx.h"

#include <vector>
#include <iostream>

using namespace std;

int main()
{
    vector<bool> features(4,false);
    for(vector<bool>::iterator i = features.begin(); i != features.end(); i++)
    {
        cout << *i;
    }
} 
```

在 VS2010 下，您可以在项目属性 C/C++ 小节、预编译器小节下关闭预编译头文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-15T17:52:58.477

我遇到了同样的问题。我用了

```
#include <vector> 
```

也`std::vector`，而不是`vector`，但问题仍然存在。后来，我尝试添加以下行：

```
using namespace std; 
```

所有的错误都消失了！

我想知道为什么？最后，我发现当我定义一个二维向量时，我使用了： ，如果没有指定命名空间`std::vector<vector<double>> myVector;`，应该是： `std::vector<std::vector<double>> myvector;``std`

# windows - Windows 命令解释器：如何获取第一个管道命令的退出代码

> ID：11170753
> 
> 赞同：17
> 
> 时间：2012-06-23T15:36:29.737
> 
> 标签：windows, cmd, pipe, exit-code

在下面提供的示例中，我执行 nmake，然后将 STDOUT/STDERR 重定向到 tee，然后将其发送到屏幕以及日志文件。问题是我试图捕获 nmake 而不是 tee 的退出代码。我需要的是nmake的退出代码，而不是tee。

```
nmake | tee output.txt 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-24T13:52:15.593

您可能认为您可以执行以下操作，但它不会起作用。

```
(nmake & call set myError=%%errorlevel%%) | tee output.txt 
```

问题在于 Windows 管道的工作机制。管道的每一侧都在它自己的 CMD shell 中执行。因此，一旦命令完成，您在那里设置的任何环境变量都会消失。%errorlevel% 的延迟扩展也更复杂，因为额外的解析级别，并且因为 CMD shell 具有命令行上下文而不是批处理上下文。

你可以这样做：

```
(nmake & call echo %%^^errorlevel%% ^>myError.txt) | tee output.txt
for /f %%A in (myError.txt) do echo nmake returned %%A
del myError.txt 
```

或者您可以将错误级别嵌入到您的 output.txt 中：

```
(nmake & call echo nmakeReturnCode: %%^^errorlevel%%) | tee output.txt
for /f "tokens=2" %%A in ('findstr /b "nmakeReturnCode:" output.txt') do echo nmake returned %%A 
```

上述两种解决方案都假定您正在批处理脚本中运行命令。如果您改为从命令行执行命令，则上述两种解决方案都需要
`%^^errorlevel%`而不是`%%^^errorlevel%%`.

但是鉴于nmake不需要用户输入，而且它通常很快，所以实时监控可能不是问题，那么最简单的解决方案似乎是

```
nmake >output.txt
set myError=%errorlevel%
type output.txt
echo nmake returned %myError% 
```

*注意*- 使用 Windows 管道时有许多微妙的复杂性。一个很好的参考是[为什么在管道代码块中延迟扩展失败？](https://stackoverflow.com/q/8192318/1012053). 我建议阅读问题和所有答案。所选答案具有最佳信息，但其他答案有助于提供上下文。

***编辑 2015-06-02***

我最近发现您可以使用 DOSKEY 宏从管道的任一侧（或两侧）干净地存储和检索 ERRORLEVEL，而无需使用临时文件。[我在http://www.dostips.com/forum/viewtopic.php?p=41409#p41409](http://www.dostips.com/forum/viewtopic.php?p=41409#p41409)从 DosTips 用户 Ed Dyreen 那里得到了这个想法。DOSKEY 宏不能通过批处理执行，但定义在 ENDLOCAL 和 CMD /C 退出后仍然存在！

以下是在您的情况下如何使用它：

```
(nmake & call doskey /exename=err err=%%^^errorlevel%%) | tee output.txt
for /f "tokens=2 delims==" %%A in ('doskey /m:err') do echo nmake returned %%A 
```

如果需要，您可以在检索到值后在末尾再添加一个命令来清除错误“宏”的定义。

```
doskey /exename=err err= 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-14T10:35:30.987

有一个“tee”版本（称为 mtee => [https://ritchielawrence.github.io/mtee/](https://ritchielawrence.github.io/mtee/)）可以选择采用管道进程的退出代码。有了它，你可以写

```
nmake | mtee /E output.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-19T22:16:18.497

受@dbenham 回答的启发，我制作了以下版本：

```
(%cmd% & call echo EXIT /B %^^ERRORLEVEL% >%ret_file%)
      | tee %log_file% & %ret_file%>NUL 
```

它是单行的，可以在命令行上使用，也可以在批处理文件中使用。它的优点是该行最终会产生正确的 %ERRORLEVEL%，因此您可以以传统方式对其进行评估。

1.  命令 %cmd% 被执行，将 %ERRORLEVEL% 设置为我们需要检索的值。
2.  我们使用 CALL 机制来获得手动延迟扩展（因此我们得到了正确的 %ERRORLEVEL% 值）。该调用创建一个迷你命令作为批处理文件 %ret_file%)，该文件以与原始命令 %cmd% 相同的 %ERRORLEVEL% 退出。
3.  管道做它需要做的任何事情，然后执行迷你命令 %ret_file%，将 %ERRORLEVEL% 设置为适当的值。

缺点是单行文件会在您的目录中乱扔包含少量文件的文件

```
EXIT /B <some_error_value> 
```

您可以轻松调整单行，以便脚本 %ret_file% 在执行时自动擦除。

# azure - Azure：有没有办法为测试/生产部署不同的实例大小

> ID：11170755
> 
> 赞同：20
> 
> 时间：2012-06-23T15:36:42.063
> 
> 标签：azure, virtual-machine, cloud-hosting

我有一个部署到两个独立托管服务的 Windows Azure 站点。一种用于测试，一种用于生产。当我们准备好推送到生产环境时，我们在生产服务中启动一个暂存部署，推送到那里，然后进行 VIP 交换。都好。

问题是，现在我们想从 XS Web 实例升级，但是将额外的钱花在测试部署上并没有什么意义。有没有办法使用 XS 实例进行测试，然后说中型实例用于生产？我知道我可以更改每个服务配置的实例数量，但我只能更改所有配置的实例大小。

我正在考虑将其 XS 留在配置中，然后记住在部署到生产之前将其切换到 Medium。有什么理由我不应该这样做吗？有没有更好的办法？

干杯!

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-23T16:23:33.070

有几种方法可以做到这一点......更简单的方法是对 CCPROJ 文件进行一点“黑客攻击”：

1) 为每个与配置名称（Release/Debug/QA/UAT/etc）匹配的环境创建 CSDEF 文件的克隆：ServiceDefinition.Release.csdef、ServiceDefinition.Debug.csdef 等。

2) 使用记事本编辑器将这些文件手动添加到 CCPROJ 文件中

3) 定义一个 Pre-Build Event 命令，将 ServiceDefinition.$(ConfigurationName).csdef 复制到 ServiceDefintion.csdef

瞧，现在您的 ServiceDefintion 将适应您使用的任何配置。

如果您想更高级或查看更多详细信息，请查看此博客条目，它可以帮助您统一切换各种设置

[http://www.paraleap.com/blog/post/Managing-environments-in-a-distributed-Azure-or-other-cloud-based-NET-solution.aspx](http://www.paraleap.com/blog/post/Managing-environments-in-a-distributed-Azure-or-other-cloud-based-NET-solution.aspx)

编辑：这是一个有效的配置。请注意，其他文件被包含为类型“无”而不是 ServiceDefinition 以避免多重定义错误。

```
 <ItemGroup>
    <ServiceConfiguration Include="ServiceConfiguration.Local.cscfg" />
    <ServiceConfiguration Include="ServiceConfiguration.Development 1.cscfg" />
    <ServiceConfiguration Include="ServiceConfiguration.Development 2.cscfg" />
    <ServiceConfiguration Include="ServiceConfiguration.Local Dev 1.cscfg" />
    <ServiceConfiguration Include="ServiceConfiguration.Local Dev 2.cscfg" />
    <ServiceConfiguration Include="ServiceConfiguration.QA 1.cscfg" />
    <ServiceConfiguration Include="ServiceConfiguration.QA 2.cscfg" />
    <ServiceConfiguration Include="ServiceConfiguration.Pre-Production 1.cscfg" />
    <ServiceConfiguration Include="ServiceConfiguration.Production.cscfg" />
    <ServiceDefinition Include="ServiceDefinition.csdef" />
    <None Include="ServiceDefinition.Local.csdef" />
    <None Include="ServiceDefinition.Development 1.csdef" />
    <None Include="ServiceDefinition.Development 2.csdef" />
    <None Include="ServiceDefinition.Local Dev 1.csdef" />
    <None Include="ServiceDefinition.Local Dev 2.csdef" />
    <None Include="ServiceDefinition.QA 1.csdef" />
    <None Include="ServiceDefinition.QA 2.csdef" />
    <None Include="ServiceDefinition.Pre-Production 1.csdef" />
    <None Include="ServiceDefinition.Production.csdef" />
  </ItemGroup> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-04-03T16:56:07.490

您可以使用 Web Publishing `TransformXml`MSBuild 任务仅转换您想要的 ServiceDefinition 部分（就像您现在可以使用 Web.Config 一样）。

*   在 ServiceDefinition.csdef 文件旁边创建一个`ServiceDefinition.[BuildConfigName].csdef`文件（您可能需要在文件资源管理器中执行此操作）
*   像创建 Web.config 转换一样创建转换文件。我明确设置了根命名空间，以防万一，所以我的根元素是：

```
 <ServiceDefinition name="Cloud.JobsWorker" 
          xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" 
          xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform"
          schemaVersion="2013-10.2.2"> 
```

*   使用以下命令手动将其添加到您的 ccproj：

```
 <ServiceDefinition Include="ServiceDefinition.csdef" />
  <None Include="ServiceDefinition.Release.csdef" /> 
```

*   在项目的底部包括：

```
 <UsingTask TaskName="TransformXml" AssemblyFile="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\Web\Microsoft.Web.Publishing.Tasks.dll" />
  <PropertyGroup>
    <ServiceDefinitionTransform>ServiceDefinition.$(Configuration).csdef</ServiceDefinitionTransform>
  </PropertyGroup>
  <Target Name="TransformServiceDefinition" BeforeTargets="ResolveServiceDefinition" Condition="exists('$(ServiceDefinitionTransform)')">
    <!-- Generate transformed service config in the intermediate directory -->
    <TransformXml Source="@(ServiceDefinition)" Destination="$(IntermediateOutputPath)%(Filename)%(Extension)" Transform="$(ServiceDefinitionTransform)" />
    <!--Force build process to use the transformed configuration file from now on.-->
    <ItemGroup>
      <ServiceDefinition Remove="ServiceDefinition.csdef" />
      <ServiceDefinition Include="$(IntermediateOutputPath)ServiceDefinition.csdef" />
    </ItemGroup>
  </Target> 
```

当您打包或发布您的云应用程序时，您的 csdef 应根据您使用的构建配置进行转换。

这是从这里改编的：http: [//blogs.staykov.net/2011/06/windows-azure-configuration-settings.html](http://blogs.staykov.net/2011/06/windows-azure-configuration-settings.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-19T14:24:07.260

[正如David Faivre](https://stackoverflow.com/users/79113/david-faivre)所建议的那样使用转换更加简洁，并且在添加单个属性后无需更新所有文件的开销。

这是用于更改 vm 大小的转换 xml：

```
<?xml version="1.0"?>
<ServiceDefinition name="CloudServiceName" 
                   xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2015-04.2.6" 
                   xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <WorkerRole name="WorkerRoleName.Role" vmsize="Medium" xdt:Transform="SetAttributes" xdt:Locator="Match(name)" />
</ServiceDefinition> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T15:47:55.667

VM 大小在 ServiceDefinition.csdef 文件中处理，您无法在运行或部署时编辑该文件。您需要更改 .csdef 中的设置，重新打包您的解决方案，然后重新部署。

一种解决方案可能是设置多个 Windows Azure 部署项目。一个项目是您的“测试”项目，它的 .csdef 配置为使用 XS。另一个项目是使用更大实例的“生产”项目。这将允许您使用标准的 Windows Azure / Visual Studio 工具来管理项目 - 根据您的流程，这可能会很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-27T08:58:04.220

David Faivre 提出了一个[很好的解决方案](https://stackoverflow.com/a/22844179/1756017)。我的一些评论：

1.  如果您的 ServiceDefinition 文件包含指向某些目录（例如部分）的链接，则会由于转换后的文件位于中间目录中而导致错误。对于我的使用，我通过将转换后的文件与原始 ServiceDefinition.csdef 一起放置来解决了这个问题（不要忘记将 *.transformed 添加到 .gitignore 中）：

`<TransformXml Source="@(ServiceDefinition)" Destination="ServiceDefinition.csdef.transformed" Transform="$(ServiceDefinitionTransform)" />`

2.  `$(Configuration)`变量对应于构建配置（调试、发布等）。如果要进行配置文件特定的转换（对应于 ServiceConfiguration..cscfg），则需要使用`$(TargetProfile)`变量：

`<ServiceDefinitionTransform>ServiceDefinition.$(TargetProfile).csdef</ServiceDefinitionTransform>`

# file - 来自指定路径的 OpenFile Servlet

> ID：11170761
> 
> 赞同：0
> 
> 时间：2012-06-23T15:37:06.507
> 
> 标签：file, jsp, servlets, fileinputstream

我有一个jsp，它将一些从数据库检索到的表单数据发送到Servlet。

例子：

```
PaperId = 5  
PaperPath = 'D:\upload\111\aaa.pdf' 
```

如何实现使用此信息打开文件的 servlet？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:42:50.220

如果您有文件位置，那么您是否有 servlet 或常规 java 应用程序都没有关系。只是`FileInputStream`用来读取文件，或者更好——commons-io`FileUtils`

# objective-c - 带有核心数据对象的动态 UITableView 高度

> ID：11170762
> 
> 赞同：7
> 
> 时间：2012-06-23T15:37:07.307
> 
> 标签：objective-c, ios, uitableview, core-data, row-height

过去几天我一直在试图解开一个谜，为什么我的批量大小为 20 的 NSFetchedResultsController 在提取完成后总是会立即出现故障（即加载到内存中）我的所有对象，导致请求大约需要 20 秒。

事实证明，这是因为在我的 heightForRowAtIndexPath 中，高度是基于每个获取的对象的 NSString 属性的长度，因此在重新加载表格时，如果表格有 2000 行，则计算中每一行的高度一开始，由于我访问对象的文本属性，它会在一开始就出现 2000 个对象（以 20 个大小的批次），导致它永远存在。（我不知道一开始就计算了行高）。

所以问题是，如果我有一个批量大小为 20 的 fetch results 控制器，但我的行高是基于对象的文本属性，如果我尝试访问会导致对象不再是错误但是实际加载到内存中，计算高度的解决方法是什么？

我有哪些选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:47:51.660

有趣的问题。为了提高性能，我会在模型中创建一个属性来存储该字符串文本的长度。通过这种方式，您无需即时计算每一行的长度，但您有一个预先计算的高度。

Myabe 可能还有其他有价值的解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-23T15:44:17.947

在您的视图控制器类中创建一个负责计算所述高度的静态方法。你只需要提供这个函数就是一个 NSString，它应该返回一个容易计算的 CGFloat。使用此方法返回元素所需的高度而不实例化它们（这里只需要它们文本的元数据）。

# jquery - jquery选择和文本区域验证功能

> ID：11170764
> 
> 赞同：-1
> 
> 时间：2012-06-23T15:37:13.903
> 
> 标签：jquery, ajax

我正在尝试修改一个 js 文件验证规则，但无法这样做。

原始js代码是

```
var fields = $('#first_step input[type=text], #first_step input[type=password]');
        var error = 0;
        fields.each(function(){
            var value = $(this).val();
            if( value.length<4 || value==field_values[$(this).attr('id')] ) {
                $(this).addClass('error');
                $(this).effect("shake", { times:3 }, 50);

                error++;
            } else {
                $(this).addClass('valid');
            }
        }); 
```

实际上它检查输入文本和输入密码，但我希望它检查选择和文本区域。

我尝试修改密码以选择和 textarea 但没有用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:41:11.933

改变这个

```
var fields = $('#first_step input[type=text], #first_step input[type=password]'); 
```

至

```
var fields = $('#first_step input[type=text], 
                #first_step input[type=password],
                #first_step textarea,#first_step select '); 
```

如果您想添加对现有代码的`select`检查。`textarea`

如果你想检查`select`然后`textarea`才使用

```
var fields = $('#first_step textarea,#first_step select '); 
```

阅读更多关于[多重选择器](http://api.jquery.com/multiple-selector/)和所有[`jQuery selectors`](http://api.jquery.com/category/selectors/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T15:41:40.740

尝试定义`fields`为：

```
var fields = $('#first_step textarea, #first_step select'); 
```

如果这没有帮助，请在您的问题中提供一些示例 HTML。

# delphi - OSX 上的 Delphi XE2 和 Firebird Embedded 2.5

> ID：11170766
> 
> 赞同：1
> 
> 时间：2012-06-23T15:37:49.470
> 
> 标签：delphi, delphi-xe2, firebird, firebird2.5

我已经开始将我的 Firemonkey 应用程序移植到 OSX 中。我使用了 DBExpress 驱动程序 DevArt。我阅读[这篇文章](http://www.ibphoenix.com/resources/documents/how_to/doc_103)是为了将 Firebird 从服务器转换为嵌入式。

但是当我的应用程序启动时，它会引发一个异常：

> 无法附加到密码数据库

该数据库是从我的 Windows 安装中复制的，而不是在 OS X 上创建的。我认为这不是问题，但它在于从服务器到嵌入式的转换，因为文档是针对旧 Firebird 版本的。

你有什么想法可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:36:58.510

首先在win os上备份db并在osx上恢复。不同的物理存储格式。

此外，即使在嵌入式版本上，在 mac osx 上，如果您指定用户名/密码，Firebird 也会使用 security2.fdb（具有写入权限）。没有用户/通行证，它应该在没有 security2 数据库的情况下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:11:31.880

用这个

1.  **第 1 步**（制作 security.fdb 的副本）：

> /opt/firebird/bin/gbak -user SYSDBA -password masterkey /opt/firebird/security.fdb /opt/firebird/security.fbk

如果您收到以下错误，您必须将 security.fdb 更改为 firebird 用户！

> gbak：错误：文件“/opt/firebird/security.fdb”的 I/O 错误 gbak：错误：尝试打开文件 gbak 时出错：错误：权限被拒绝 gbak：由于错误而在完成之前退出

*   **第 2 步**（恢复数据库）：

> /opt/firebird/bin/gbak -rep -user SYSDBA -password masterkey /opt/firebird/security.fbk /opt/firebird/security.fdb

*   **STEP 3**（数据库转换）：

> /opt/firebird/bin/isql -user SYSDBA -password masterkey -i /opt/firebird/upgrade/security_database.sql /opt/firebird/security.fdb

*   **第 4**步（停止火鸟）：

> 服务火鸟停止：

*   **第 5**步（覆盖旧的安全 fdb）：

> cp security.fdb security2.fdb

[作者：Marcin Rybak](http://www.marcinrybak.com/2008/11/convert-securityfdb-to-security2fdb-in.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T23:27:04.657

`Cannot attach to password database`意味着firebird找不到用户数据库。在 Firebird 2.0 及更高版本上，它是一个名为`security.fdb`or的文件。`security2.fdb`此文件应位于`firebird`您链接的 IBPhoenix 文章中所述的文件夹中。

# javascript - GWT Layout-如何使用docklayout

> ID：11170769
> 
> 赞同：0
> 
> 时间：2012-06-23T15:37:51.050
> 
> 标签：javascript, html, google-app-engine, gwt, jsni

我正在使用 GWT 编写一个简单的应用程序。我已经使用 dockPanel 将视图分成不同的部分。我需要调用一个在dockPanel 的某个面板中调用facebook 功能的脚本。这是Java中的代码

```
public class XXXX implements EntryPoint 
{
private DockLayoutPanel dock = new DockLayoutPanel(Unit.PX); 
private HorizontalPanel navPanel = new HorizontalPanel();
private VerticalPanel fbPanel = new VerticalPanel();
private HorizontalPanel ratingsPanel = new HorizontalPanel();
private Marker m = null;
private InfoWindow iw = null;
MapWidget map= null;

public void onModuleLoad() 
{
    implementDockPanelLayout();
    implementMapView();

        // Add the facebook Javascript script to the fbPanel of the dock
    injectFBInitCode();
    RootLayoutPanel.get().add(dock);
}

private void implementDockLayoutSetup() 
{
        navPanel.add(new HTML("<h3>Navigation Panel</h3>"));
    fbPanel.add(new HTML("<div id = \"fb-root\"><h3>FB Comments should go here </h3></div>"));
    ratingsPanel.add(new HTML("<h3>Ratings Here</h3>"));
    dock.addNorth(navPanel, 50);
    dock.addEast(fbPanel, 300);
    dock.addSouth(ratingsPanel, 50);
}

private native void injectFBInitCode() /*-{
//??How to associate this script with the fbPanel which contains 
    the div with id= fb-root
function(d, s, id) 
{
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=XXXXXX";
    fjs.parentNode.insertBefore(js, fjs);
}
(document, 'script', 'facebook-jssdk');
}-*/;

private void implementMapView() 
     {
      ...} 
```

当我运行上述代码时，我的浏览器中出现异常：

```
 08:29:05.514 [ERROR] [SomeProj] Unable to load module entry point class  XXX.client.SomeProj (see associated exception for details)
 com.google.gwt.core.client.JavaScriptException: (null): null
 at   com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:248)
 at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
 at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
 at com.google.gwt.dev.shell.ModuleSpace.invokeNativeVoid(ModuleSpace.java:289)
 at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeVoid(JavaScriptHost.java:107)
 at cs310.client.someProj.injectFBInitCode(someProj.java)
 at cs310.client.someProj.onModuleLoad(someProj.java:53)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
 at java.lang.reflect.Method.invoke(Method.java:597)
 at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:396)
 at  com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
 at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:525)
 at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
 at java.lang.Thread.run(Thread.java:680) 
```

我不太熟悉如何从我的 GWT 代码中调用 Javascript 函数。我查看了教程和一些示例，并想出了这段代码。但我卡住了，

有人可以帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:33:06.030

在 JSNI 中你需要使用变量 '$wnd' 来访问实际的窗口.. 所以你应该调用 '$wnd.document'

# objective-c - UITableView 数据源和委托不会连接到自定义类

> ID：11170772
> 
> 赞同：6
> 
> 时间：2012-06-23T15:38:25.417
> 
> 标签：objective-c, ios, uitableview, uistoryboard

我无法将情节提要中表格视图的数据源和委托出口连接到我的自定义委托类。我想将这些表函数委托给另一个类。关于委托、出口和故事板中的连接，我从根本上误解了一些东西。

**背景**

我有一个`UIViewController`包含 a`UIPickerView`和其他内容的视图 a `UITableView`。
我已经到了 my 太大的地步，我`UIViewController`想将与表相关的函数移到另一个类中。

我创建了以下类来包含这些表方法，例如`numberOfSectionsInTableView:`.

```
@interface ExerciseTableDelegate : NSObject <UITableViewDelegate, UITableViewDataSource> 

@property (strong, nonatomic) ExerciseDataController *dataController;

@end 
```

我想在我的`UIViewController`

```
@interface ExerciseViewController : UIViewController <UIPickerViewDataSource, UIPickerViewDelegate>
{
    UIPickerView *exercisePicker;
}

@property (strong, nonatomic) IBOutlet ExerciseTableDelegate *tableDelegate;

@end 
```

我希望在情节提要中，当我将表视图的数据源或委托出口之一拖到它上面时，`UITableViewController`它将使我能够连接到我的委托类。它没有。

然后我尝试在情节提要中创建一个对象，并为其赋予 class `ExerciseTableDelegate`。然后我可以将表视图委托拖到对象上，但这与我在`AppDelegate`.

我的应用委托

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
    ExerciseViewController *rootViewController = (ExerciseViewController *)[[navigationController viewControllers] objectAtIndex:0];

    ExerciseTableDelegate *tableDelegate = [[ExerciseTableDelegate alloc]init];
    ExerciseDataController *dataController = [[ExerciseDataController alloc] init];

    tableDelegate.dataController = dataController;
    rootViewController.tableDelegate = tableDelegate;

    // Override point for customization after application launch.
    return YES;
} 
```

*   我是否需要使我的对象成为单例并仍然在委托中对其进行初始化？
*   我需要在代码中而不是在情节提要中进行此设置吗？
*   在情节提要中创建对象是错误的想法吗？

我觉得我很接近，但我觉得我做的太多了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:56:41.143

如果您想访问`ExerciseTableDelegate`您在应用程序委托中设置的实例，那么您必须在代码中将其连接到您的表格视图，因为它无法从情节提要中访问 - 正如您所发现的那样，添加一个故事板中的新对象会创建一个新实例。

幸运的是，这很容易实现。在`viewDidLoad`表视图控制器的方法中，添加以下内容：

```
self.tableView.delegate = self.tableDelegate;
self.tableView.datasource = self.tableDelegate; 
```

这将重新指向数据源并委托给您的单独对象。

# c# - ASP.Net 中的“记住我”

> ID：11170780
> 
> 赞同：0
> 
> 时间：2012-06-23T15:39:27.553
> 
> 标签：c#, asp.net

我是 C# 编程的新手。

我已将登录控件拖到我的网站中。但是如果我没有添加任何代码，“记住我”似乎不起作用。

任何人都可以教我如何在 C# 中实现“记住我”？

我希望它是当用户重新访问网站时，他/她在用户名文本框中键入，密码将从数据库中检索并显示在密码文本框中，同时将选中记住我的复选框。

我已经为代码研究了几天，但没有成果。

任何人都可以给我一个关于这个的教程吗？

非常想知道它是如何工作的。

希望尽快得到答复。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T15:55:34.197

> 任何人都可以教我如何在 C# 中实现“记住我”？

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms178340.aspx)：

1.  如果您希望控件显示“下次记住我”复选框，请将`DisplayRememberMe`属性设置为`true`. 如果用户在登录时选择了“下次记住我”复选框，则身份验证令牌将存储在浏览器的持久 cookie 中。

2.  如果您希望默认选中“下次记住我”复选框，请将`RememberMeSet`属性设置为`true`.

3.  如果您希望将身份验证令牌存储在持久性 cookie 中而不让用户选择清除“下次记住我”复选框，请将`RememberMeSet`属性设置为`true`并将`DisplayRememberMe`属性设置为`false`。对于可以从为多个用户提供服务的公共计算机访问的站点，不建议这样做，因为不需要的用户可能会使用用户的持久身份验证令牌。

> 我希望它是当用户重新访问网站时，他/她在用户名文本框中键入，密码将从数据库中检索并显示在密码文本框中，同时将选中记住我的复选框。

这不是“记住我”复选框的工作方式。复选框所做的只是将身份验证票证存储在浏览器的 cookie 中。当用户重新访问该站点时，由于身份验证票已存在，因此不会提示登录，因此用户会自动登录。

可以想象，您可以使用一些 JavaScript 修改登录 ASCX 以完全按照您的意愿行事，但凭着良心，我不建议您这样做，因为它会使您的网站非常不安全。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T15:46:12.573

您认为“记住我”复选框的工作方式不正确。当用户选择记住我时，如果他们成功登录，他们的用户名和密码将存储在会话 cookie 中，直到 cookie 过期。此时没有从数据库中检索到任何内容 - 这是非常不安全的！

****编辑****我可以建议在内置的 ASP.Net 登录服务器控件上观看[视频。](http://www.asp.net/web-forms/videos/building-35-applications/login-controls)我认为您应该在掌握 ASP.Net 和 C# 编程时使用这些。**

# php - zend db fetchRow 返回麻烦

> ID：11170782
> 
> 赞同：2
> 
> 时间：2012-06-23T15:39:39.507
> 
> 标签：php, zend-framework, zend-db

我正在编写一个页面以显示与某个项目相关的所有数据，当我尝试访问此查询返回的数据时，我正在提取空值。

```
DB::call()->setFetchMode(Zend_Db::FETCH_ASSOC);
$query = "SELECT name, release_date, points, availability, exclusivity, original_price,     sold_at, designer, model
    FROM items 
    WHERE item_id = '$id'";
$row = DB::call()->fetchRow($query);
$this->name = $row['name'];
//Same with other fields 
```

DB 只是`Zend_DB`以前程序员留下的一个包装类。我在 PHPmyAdmin 中运行了完全相同的查询，以确保它可以提取结果。我假设我的问题是我如何尝试访问返回数据，因为我对 Zend 框架不是很熟悉。我应该如何尝试访问数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:21:43.987

我的查询无效，因为传入的 id 为空。我只是错误地设置了我的路线。

# android - android联系人列表性能

> ID：11170783
> 
> 赞同：0
> 
> 时间：2012-06-23T15:39:45.137
> 
> 标签：android, performance, android-listview, cursor, android-contacts

尝试加载联系人列表时出现性能问题。这是代码：

```
public ContactList getContacts(String constraint)
{
    ContactList contactList = new ContactList();

    Uri uri = ContactsContract.Contacts.CONTENT_URI;

    if (constraint != null && constraint.equals("") == false)
    {
        uri = Uri.withAppendedPath(
                ContactsContract.Contacts.CONTENT_FILTER_URI, constraint);
    }

    ContentResolver cr = _context.getContentResolver();
    String sortOrder = DISPLAY_NAME + " COLLATE LOCALIZED ASC";
    // Cursor cur = cr.query(uri, null, null, null, sortOrder);
    String[] arrayOfString = new String[1];
    arrayOfString[0] = "1";
    Cursor cur = cr.query(uri, null, "has_phone_number=?", arrayOfString,
            sortOrder);

    if (cur.getCount() > 0)
    {

        setBaseContactList(contactList, cur);

    }
    cur.close();

    return contactList;
}

private void setBaseContactList(ContactList contactList, Cursor cur)
{
    String id;
    String name;
    String lookUpKey;
    String photoId;
    while (cur.moveToNext())
    {
        id = cur.getString(cur.getColumnIndex(DISPLAY_ID));
        name = cur.getString(cur.getColumnIndex(DISPLAY_NAME));

        photoId = cur.getString(cur.getColumnIndex(PHOTO_ID));
        lookUpKey = cur.getString(cur.getColumnIndex(LOOKUP_KEY));
        Contact c = new Contact(id, name, photoId, lookUpKey);
        contactList.addContact(c);
    }
} 
```

查看**traceview**我可以看到 cur.getString(cur.getColumnIndex("Some column name")); 是否会影响加载时间

**使用traceview**时我可以看到的另一件事是该方法有很多调用

```
String.equalsIgnoreCase() 
```

我的猜测是 cur.getString 正在调用它。

我正在考虑将所有在**onCreate()**中启动的值放在一个**HT(ContactID, Contact)**中，然后在每次从联系人数据库中选择之后使用提取的用户 ID 调用它们。我将减少使用量 3 次，这很好，但有更好的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:06:02.317

除了@wildhemp 的建议之外，我还将尝试查询特定列，而不是为所有列传递“null”。如果我从硬编码索引中获取值，我还将检查将节省多少周期（不是最佳实践，但可能会加快处理速度）。

**例如：**

```
Cursor cur = cr.query(uri, 
                      new String[] {DISPLAY_ID, DISPLAY_NAME, PHOTO_ID, LOOKUP_KEY},
                      "has_phone_number=?", arrayOfString, sortOrder);
while (cur.moveToNext())
{
    id = cur.getString(0);
    name = cur.getString(1);
    photoId = cur.getString(2);
    lookUpKey = cur.getString(3);

    Contact c = new Contact(id, name, photoId, lookUpKey);
    contactList.addContact(c);
} 
```

我要检查的另一件事是在没有任何排序的情况下进行查询，有趣的是看看它使用了多少额外的周期来进行排序，也许还有另一种更有效的方法来做到这一点。

虽然这很明显，但我仍然会问这个`Customer`类是否是轻量级的，以及它是否除了初始化其成员之外什么都不做。此外，that `ContactList`'s`addContact`方法只是将另一个项目添加到它的 Wrapped 或 Extended`List<Customer>`中。

一般注意，最好用 try/catch/finally 包围任何与光标相关的工作，以确保在完成后关闭光标。

无论如何，在处理诸如此类的问题时，要么是查询效率低下，要么是解析循环做错了什么

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:04:33.077

我想说equalsIgnoreCase 是从cur.getColumnIndex 调用的。如果不是在 while 循环中每次都调用它们，而是只调用它们一次并存储它们，那么你可以让它更快。

# asp.net-mvc-3 - bindmodel vs createmodel asp mvc 3

> ID：11170784
> 
> 赞同：4
> 
> 时间：2012-06-23T15:39:59.767
> 
> 标签：asp.net-mvc-3, controller, model-binding, defaultmodelbinder, modelbinder

我正在用 Asp 开发我的第一个应用程序。我正在使用环境 Asp.NET MVC 3。我有一个具有单个参数的控制器操作。该参数的类型是复杂对象。

```
public ActionResult MyAction(ComplexObj obj) {
    //TODO: using obj
} 
```

我正在使用 ModelBinder 类。但我不确定是否应该覆盖**BindModel**函数或**CreateModel**函数。

这两个功能之间有什么区别以及它们何时被rooter完全使用。

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T16:14:53.423

> 这两个功能之间有什么区别以及它们何时被rooter完全使用。

`BindModel`是在模型绑定过程中完成所有工作的主要方法，它调用该`CreateModel`方法以根据传递的类型提供模型的实例。该`CreateModel`方法检查模型类型是一个模型`dictionary`还是`list`一个简单模型，最后通过调用返回一个实例，

```
Activator.CreateInstance(typeToCreate); 
```

通常您必须重写该`BindModel`方法，除非您说出您的要求，否则很难说出要重写哪个方法。如果您只关心覆盖模型实例的创建方式，那么您必须选择`CreateModel`.

# android - 查看应用在多个 API 级别上的外观

> ID：11170789
> 
> 赞同：0
> 
> 时间：2012-06-23T15:40:51.100
> 
> 标签：android, android-layout, android-emulator, google-play, android-compatibility

我新的*痴迷*是查看特定应用程序如何在不同版本的 Android 上运行。作为一个初学者，我认为**了解不同的开发人员如何为旧的 API 级别发布他们的应用程序对**我来说很*重要*。

 **我将 Google I/O 2012 会议应用程序下载到了我的 Galaxy nexus 上，使用 holo 主题和所有内容看起来都不错。但是我将如何在我的 2.3 模拟器上查看该应用程序（我真的很感兴趣他们如何处理旧版本的全息主题）？我阅读了其他一些堆栈溢出帖子，可以将 .apk 安装到模拟器上，所以这不是问题。我只需`.apk`要从 Google Play 获取。有谁知道这是否可能？此外，由于我的总体目标是***看到上面的粗体文本，***我还有其他方法可以解决这个问题吗？

我能想到的唯一解决方案是找一个安卓版本低的朋友，告诉他们下载这个应用程序，这样我就可以比较了。真的没有更好的办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:30:54.657

> 但是我将如何在我的 2.3 模拟器上查看该应用程序（我真的很感兴趣他们如何处理旧版本的全息主题）？

等到它作为开源发布（据报道是在会议之后），然后构建它并将其安装在您的模拟器上。

> 我只需要从 Google Play 获取 .apk。有谁知道这是否可能？

只有侵犯版权。

> 此外，由于我的总体目标是看到上面的粗体文本，我还有其他方法可以解决这个问题吗？

您可以下载其他开源应用程序的源代码并构建它们，例如[2011 Google I|O 会议应用程序](http://code.google.com/p/iosched/)。**

# c - C链表删除函数

> ID：11170795
> 
> 赞同：0
> 
> 时间：2012-06-23T15:41:43.013
> 
> 标签：c, linked-list, free

这是我的链表的 remove() 函数。怎么可能更好，为什么？

```
void removeData(void *data, struct accList *theList)
{
  if(theList->head == NULL)                  //nothing can be deleted
    return;
  else if(theList->head == theList->tail)          //there is only one element in the    list
  {
    free(theList->head);
    theList->head = theList->tail = NULL;
  }
  else if(data == theList->head->data)           //the node to be deleted is the head
  {
    struct accListNode *temp = theList->head;
    free(theList->head);
    theList->head = temp;
    theList->head->next = temp->next;
  }
  else if(data == theList->tail->data)      //the node to be deleted is the tail
  {
    struct accListNode *cur;
    for(cur = theList->head; cur->next->next != NULL; cur = cur->next);
    theList->tail = cur;
    free(cur->next);
    cur->next = NULL;
  }
  else                                     //the node to be deleted is any other node
  {
    struct accListNode *cur;
    for(cur = theList->head; cur != NULL; cur = cur->next)
    {  
      if(cur->data == data)     //this is the node we must delete from theList
      {
        struct accListNode *temp = cur->next->next;
        free(cur->next);
        cur->next = temp;
        break;
      }
    }
  }
} 
```

另外，有人能给我详细解释一下 free() 函数吗？“释放 ptr 指向的内存”这句话没有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:55:47.680

您可以使用指向列表元素指针的指针，而不是测试所有不同的特殊情况，并且由于无论如何您都在遍历列表，因此请跟踪看到的最后一个元素：

```
void removeData ( void *data , struct accList *theList ) {
    struct acclist *last = NULL, **finger = &theList->head;
    while ( *finger != NULL ) {
        if ( (*finger)->data == data )
            *finger = (*finger)->next;
        else {
            last = *finger;
            finger = &( (*finger)->next );
            }
        }
    theList->last = last;
    } 
```

此代码与您的函数的不同之处在于它删除*了所有*匹配的元素`data`，但您可以轻松修改它以删除要匹配的*第一个*元素`data`。

# php - 如何提取有关单个视频的信息 - Youtube API

> ID：11170796
> 
> 赞同：-1
> 
> 时间：2012-06-23T15:41:51.653
> 
> 标签：php, xml, youtube, youtube-api

文档中有一个如何通过搜索词搜索视频的示例，但是当您拥有 videoID 时如何从单个视频中提取信息。

```
<?php

  // set feed URL
    $feedURL = 'http://gdata.youtube.com/feeds/api/videos/LjhCEhWiKXk?v=2';

    // read feed into SimpleXML object
    $sxml = simplexml_load_file($feedURL);

// this get the video title
$videoTitle = $sxml->title;

?> 
```

我只得到视频标题......也没有观看次数、描述和持续时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:56:21.867

这对我很有用：访问[将 YouTube API 与 PHP 一起使用](http://www.ibm.com/developerworks/xml/library/x-youtubeapi/#c9)

您必须完全解析视频条目 ($sxml) 才能获得更多信息：

Entry $sxml 的子节点：

```
// get nodes in media: namespace for media information
$media = $entry->children('http://search.yahoo.com/mrss/'); 
```

获取持续时间：($media->children ...)

** media:group 元素下的元素 yt:duration 存储视频的长度，以秒为单位**

```
// get <yt:duration> node for video length
$yt = $media->children('http://gdata.youtube.com/schemas/2007');
$attrs = $yt->duration->attributes();
$obj->length = $attrs['seconds']; 
```

# django - 我可以在外键位于另一个模型之上的模型上使用模型作为内联模型吗？

> ID：11170800
> 
> 赞同：0
> 
> 时间：2012-06-23T15:42:54.323
> 
> 标签：django, django-models, django-admin

这是我的模型：

```
class Image(models.Model):

class Size(models.Model):
    image = models.ForeignKey(Image)

class Physical(models.Model):
    size = models.ForeignKey(Size) 
```

我正在尝试将`Size`和`Physical`作为内联添加到`ImageAdmin`. 用户必须先创建一些尺寸，然后才能添加一些他必须选择图像的现有尺寸的物理。

这可能吗？

谢谢和问候， 西尔文

# java - 如何制作自定义文本组件？

> ID：11170802
> 
> 赞同：0
> 
> 时间：2012-06-23T15:43:20.560
> 
> 标签：java, text, awt, custom-component

如何在 Java 中制作自定义文本组件？我需要提供`getPreferredSize()`它，我应该在其中放置我的文本结构的测量。但是如果不先获得`Graphics`. `Graphics`但是如果没有先绘制组件我就无法获得。但是如果不先测量它，我就无法绘制组件。

如何打破这个恶性循环？

**示例代码**

```
public class Text_CustomTextual {

    public static class JHelloWorld extends JComponent {

        private final String content = "Hello world!";
        private final Font font = new Font(Font.SERIF, Font.PLAIN, 12);
        private Dimension dim = null;
        private FontMetrics fm;

        @Override
        public Dimension getPreferredSize() {

            // I can't measure control until I paint it once
            if( dim == null ) {
                return new Dimension(300,5); 
            }

            // I can measure it only after it was painter at least once
            else {
                return dim;
            }
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            g.setFont(font);

            // this is branch for first paint where I can measure control
            if( dim == null ) {

                // why should I have Graphics to measure font???
                fm = g.getFontMetrics(); 

                // why should I feed Graphics to getStringBound method???
                // did FontMetrics already forgot one I constructed it with???
                Rectangle2D rect = fm.getStringBounds(content, g);  
                dim = new Dimension((int)rect.getWidth(),(int)rect.getHeight());

                // how to cause control size to be reevaluated?
                // repaint() does not help, control remains 300x5
                repaint(); 
            }
            else {
                g.setColor(getForeground());
                g.drawString(content, 0, fm.getAscent());
            }
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {

                final JHelloWorld h = new JHelloWorld();

                final JFrame f = new JFrame();
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.add(h);
                f.pack();
                f.setTitle(String.format("%dx%d", h.getWidth(), h.getHeight()));

                h.addComponentListener(new ComponentListener() {

                    @Override
                    public void componentShown(ComponentEvent e) {

                    }

                    @Override
                    public void componentResized(ComponentEvent e) {
                        f.setTitle(String.format("%dx%d", h.getWidth(), h.getHeight()));
                    }

                    @Override
                    public void componentMoved(ComponentEvent e) {
                    }

                    @Override
                    public void componentHidden(ComponentEvent e) {
                    }
                });

                f.setVisible(true);

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:25:46.893

通常首选大小不是动态设置的。但是，作为提示使用什么首选尺寸：

```
 String text = "Hello world!";
    Font font = new Font(Font.SERIF, Font.PLAIN, 12);       
    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    BufferedImage bufferedImage = new BufferedImage(1,1,BufferedImage.TYPE_INT_RGB);
    Graphics2D g2d = ge.createGraphics(bufferedImage);
    FontRenderContext frc = g2d.getFontRenderContext();
    GlyphVector glyphVector = font.createGlyphVector(frc, text);
    Rectangle2D rectangle2D = glyphVector.getLogicalBounds();
    double w = rectangle2D.getWidth();
    double h = rectangle2D.getHeight();
    System.out.println("width = "+w+"\theight = "+h); 
```

# javascript - 如何使用 JavaScript 将文本框值从一个网页传送到另一个网页？

> ID：11170803
> 
> 赞同：1
> 
> 时间：2012-06-23T15:43:31.050
> 
> 标签：javascript

我对 JavaScript 很陌生，我正在尝试执行以下操作：

我有两个网页 Page1.html 和 Page2.html 在 Page1.html 我有一个文本框和一个按钮。用户在文本框中输入一些文本并单击按钮后，我希望打开 Page2.html 并且文本框的文本出现在新打开的 Page2.html 的正文中，如下所示：

“你写的”+“[Page1.html 上文本框中的文本]”

我已经尝试过 getElementById 的事情。但是由于我非常明显的绿色角，我在这里遗漏了一些非常基本的东西。有人可以详细说明我应该如何进行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:50:39.957

网络本质上是无状态的。因此，当您请求 Page1.html 时，它将被加载，就好像它以前从未加载过一样，一张白纸。

为了在两个页面之间传递信息，您必须在请求中包含该信息。通常这是通过将信息从一个请求嵌入到另一个请求的 Web 服务器来完成的。

由于您完全从 JavaScript 执行此操作，因此您可能必须通过查询字符串传递信息。

当您从 Page1.html 导航到 Page2.html 时，您需要执行以下操作：

```
windows.location = 'Page2.html?variableName=somevalue'; 
```

当 Page2.html 加载时，您需要检查这些值并提取您需要的信息。

这是一个这样做的例子：[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

希望这能让你朝着正确的方向开始，但我认为你已经准备好开始涉足一种好的服务器端技术，比如[ASP.Net](http://www.asp.net/)、[PHP](http://www.php.net/)、[Ruby on Rails](http://rubyonrails.org/)或[Node.js](http://nodejs.org/)

# arrays - 将数组传递给 Wordpress 循环

> ID：11170805
> 
> 赞同：0
> 
> 时间：2012-06-23T15:43:40.423
> 
> 标签：arrays, wordpress, variables, loops

我正在尝试根据以下许多条件将不同的值存储到数组中：

```
<?php $sort= $_GET['sort']; 

     if($sort == "title") { $args = array('orderby'=>'title','order'=>'ASC'); } 
     elseif($sort == "date") { $args = array('orderby'=>'date'); } 
     else{ $args = array('orderby'=>'date','order'=>'DESC'); } 
?> 
```

然后我尝试`$args`使用 WP_Query 将变量插入到 wordpress 循环中，如下所示：

```
<?php $loop = new WP_Query( array( $args, 'post_type' => 'films', 'post_parent' => 0, 'posts_per_page' => -1 ) ); ?>

    <?php while ( $loop->have_posts() ) : $loop->the_post(); ?>

    wordpress loop stuff, and the end while, end if 
```

这无法正常工作。我是否将数组错误地传递到 wordpress 循环中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:00:30.003

您将数组 $args 传递到另一个数组中。WP_Query 无法理解双嵌套数组。

为什么不根据条件的结果为要分配给 orderby 和 order 参数的值设置一个变量。

```
if ( $sort == 'title' ) {
   $orderby = 'title';
   $order = 'ASC';
} esleif ( // ....etc 
```

然后在您的查询数组中：

```
 'orderby' => $orderby, 'order' => $order, etc.. 
```

# css - 内容 div 向右推页脚

> ID：11170807
> 
> 赞同：0
> 
> 时间：2012-06-23T15:43:50.733
> 
> 标签：css, html, footer

我希望有人可以提供帮助。我已经搜索了该网站，虽然回答了类似的问题，但我仍然有点困惑。我的任务是建立新的工作网站，因为我过去有过 html 经验，我认为这将是掌握正确使用 css 构建网站的好方法，但我认为我自己有点混淆/混淆。我让它在主页上工作，但是这个页面有更多的内容 div 文本，它把我的页脚推开了。我已经阅读过诸如 position:absolute 和 clear: both; 之类的标签。一个也是，但我一生都无法弄清楚他们应该在哪里。

谢谢。

HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org       /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
<title>Max - The leading name in digitisation</title>

<style type="text/css">

    <!--
        a:link { color: #000000; text-decoration: none}
        a:visited { color: #000000; text-decoration: none}
        a:hover { color: #000000; text-decoration: underline}
        a:active { color: #000000; text-decoration: none}
            -->

</style>

<meta http-equiv="Content-Language" content="en-us" />

<meta http-equiv="imagetoolbar" content="no" />

<meta name="description" content="Description" />

<meta name="keywords" content="Keywords" />

<meta name="author" content="Max Communications" />

<style type="text/css" media="all">@import "css/about.css";</style>  <style    type="text/css" media="all">@import "css/about.css";</style>
</head>

<body>

<div id="page-container">

<div id="header">
    <a href="index.html"><img src="images/logotype-max.png"></a>
    <div id="subheader">
    <h2>The leading name in digitisation</h2>
</div>

</div>

    <div id="nav">
    <b><a href="about.html">About</a></b><br>
    <a href="services.html">Services</a><br>
    <a href="clients.html">Clients</a><br>
    <a href="cases.html">Case studies</a><br>
    <a href="contact.html">Contact</a><br><br>

    <a href="blog.html">David's blog</a><br><br>

    <a href="http://www.twitter.com" target=_blank>Twitter</a><br>
    <a href="http://www.facebook.com" target=_blank>Facebook</a><br>
    <a href="http://www.youtube.com" target=_blank>YouTube</a><br>

</div>

    <div id="content_l">

    <p>Max Communications is the company of choice for
    the digitisation of images, audio and video. We 
    have established ourselves as the leading provider
    of digital solutions to large institutions, blue-chip 
    companies, galleries, museums and media organisations. 
    Quality products and professional service have enabled 
    us to attract and maintain a formidable <a href="clients">client list</a>.</p>

    <p>Specialising in high quality, high volume digitisation 
    <a href="services">services</a>, we place an overriding emphasis on     developing 
    friendly and long-term relationships with all our clients.</p>

    <p>Our association over many years with both the heritage sector 
    and large media organisations has given us a sound understanding 
    of digital production workflow and quality management.</p>

    <p>This puts us in a unique position to provide advice to clients 
    on utilisation of best practices and adherence to the latest 
    archive and industry standards. As a result, our clients are 
    able to leverage the greatest possible return from their 
    digital assets, in commercial, preservation and accessibility 
    terms.</p>

    <p>We have a formidable array of high-end digitisation equipment.
    We back this up with strong quality control and, for larger 
    projects, adherence to strict project management procedures 
    to ensure that deadlines are met - within budget.</p>

    We are uniquely placed to assist with your digitisation requirements.
</  br></ br>

    We are based in south-east London, serving both UK and international    clients.</ br></ br>

</div>

    <div id="content_r">

    <img src="images/qb-max.jpg"

</div>

<br><br><br>

<hr style="color:#000000;background-color:#000000;height:1px;border:none;width:1400px;" /> </ br>

<div id="footer">

<div id="section1">

    <div id="column1">
        Max Communications</br>
        *********</br>
        **********</br>
        T ************</br>
        <a href="**************</a>
    </div>

    <div id="column2">
        <b><a href="about.html">About</b></a></br>
        <b><a href="index.html">Services</b></a></br>
        <a href="index.html">Photographic, Microfilm and Glass plate</a>    </br>
        <a href="index.html">Manuscript scanning/photography</a></br>
        <a href="index.html">Audio digitisation</a></br>
        <a href="index.html">Video & moving image</a></br>
        <a href="index.html">Digital printing and fulfilment</a></br>
        <a href="index.html">OCR and eBook creation</a></br>
        <a href="index.html">Print and picture framing</a></br>
        <a href="index.html">Photographic conservation</a></br>
    </div>

</div>

<div id="section2">

    <div id="column3">
        <b><a href="clients.html">Clients</b></a></br>
        <b><a href="index.html">Case studies</b></a></br>
        <a href="index.html">Bexley Heritage Trust</a></br>
        <a href="index.html">Henry Moore Foundation</a></br>
        <a href="index.html">Tate Gallery</a></br>
        <a href="index.html">Country Life Picture Gallery</a></br>
        <a href="index.html">Natural History Museum</a></br>
        <a href="index.html">News International</a></br>
        <a href="index.html">Victoria and Albert Museum</a></br>
        <b><a href="contact.html">Contact</b></a>
    </div>

    <div id="column4">
        <b><a href="index.html">David’s blog</b></a></br></br>

        <b>Follow us</b></br>
        <a href="http://www.twitter.com" target="_blank">Twitter</a></br>
        <a href="http://www.facebook.com" target="_blank">Facebook</a></br>
        <a href="http://www.vimeo.com" target="_blank">Vimeo</a></br></br>

        <b>Legal</b><br>
        <a href="index.html">Terms & Conditions</a><br>
        <a href="index.html">Privacy Policy</a><br>
    </div>

</div> 
```

CSS 代码：

```
html, body {
background: #ff5000;
margin: 0;
padding: 0;
font-family:georgia;

}
.hidden {
display: none;
}
#page-container {
width: 1000px;
margin: auto;
padding: 60px;
}

#main-nav {
height: 50px;
}

#header {
clear: both;
height: 100px;
font-family: Georgia;
font-size: 10px;
margin: auto;
color: #000000;
line-height: 12px;
}
#subheader {
width: 400px;
float: right;
text-align: right;
font-size: 12px;
padding: 25px 5px;
}
h1 {
margin: 0;
padding: 0;
}
h2 {
float: right;
margin: 0;
padding: 0;
font-weight: normal;
}

#nav {
float: left;
width: 200px;
height: 300px;
font-family: Georgia;
font-size: 15px;
line-height: 1.4em;
word-spacing: 0.2em;ß

}

#content_l {
float: left;
width: 400px;
height: 300p;
font-family: Georgia;
font-size: 15px;
line-height: 1.4em;
word-spacing: 0.2em;

}

#content_r {
float: left;
width: 400px;
height: 100%;
font-family: Georgia;
font-size: 10px;
line-height: 1.4em;
word-spacing: 0.2em;

}

#footer, #column1, #column2, #column3, #column4{

}

#section1 {
float: left; /* Sets this section to the left */
background: none;
width: 650px;
}

#column1 {
    float: left; /* Sets this column to the left inside its section */
    background: none;
    font-size: 14px;
    width: 350px;
}

#column2 {
    float: right; /* Sets this column to the right inside its section*/
    background: none;
    font-size: 14px;
    width: 300px;
}

#section2 {
float: right; /*Sets this sectionto the right */
background: none;
width: 350px;s
}

#column3 {
    float: left; /* Sets this column to the left inside its section */
    background: none;
    font-size: 14px;
    width: 250px;
}

#column4 {
    float: right; /* Sets this column to the right inside its section*/
    background: none;
    font-size: 14px;
    width: 100px;
}

} 
```

# python - 比较不同的 writeln“实现”

> ID：11170813
> 
> 赞同：0
> 
> 时间：2012-06-23T15:44:36.013
> 
> 标签：python, file

什么是“更 Pythonic”/更有效/更好：

```
fp.write(some_long_string)
fp.write('\n') 
```

或者

```
fp.write(some_long_string + '\n') 
```

或者

```
fp.writelines([some_long_string]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:47:17.493

如果您可以在没有函数调用的情况下逃脱：

```
print >>fp, some_long_string 
```

# php - 如何在php mysql中获取父名称和名称？

> ID：11170814
> 
> 赞同：0
> 
> 时间：2012-06-23T15:44:36.123
> 
> 标签：php, mysql

```
//Table model
    id  parent name
    1     0     Nokia
    2     0     Samsung
    3     1     N70
    4     1     N97
    5     2     Galaxy S3

//Table image
    id    name
    1    n70.png
    2    n97.png
    3    galaxys3_1.png
    4    galaxys3_2.png
    5    galaxys3_3.png

//Table image_to_model
   id    model_id   image_id
    1        3       1
    2        4       2
    3        2       3
    4        2       4
    5        2       5

SELECT mod.id, mod.name,GROUP_CONCAT(img.name) FROM `model` AS mod
LEFT JOIN `image_to_model` AS mod_img ON mod_img.image_id = mod.id
GROUP BY mod.id 
```

如何产生这种格式：

```
1 Nokia   | N70,N97  |  n70.png,n97.png
2 Samsung |Galaxy S3 | galaxys3_1.png,galaxys3_2.png,galaxys3_3.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:21:53.350

我强烈建议将品牌（诺基亚、三星等）拆分到他们自己的表格中。然后，您只需通过 brand_id 从模型表连接到品牌表。

# java - JavaEE：找到实体的好方法是什么？

> ID：11170816
> 
> 赞同：0
> 
> 时间：2012-06-23T15:44:48.003
> 
> 标签：java, database, jakarta-ee, jpa, entity

假设我有以下 2 个实体：

```
@Entity
public class Person implements Serializable {
    private Long id;
    @OneToMany(fetch=FetchType.LAZY)
    private List<House> houses;
}

@Entity
public class House implements Serializable {
    private Long id;
    private List<House> houses;
} 
```

假设我正在寻找的房子存在并且我同时拥有`personID`和`houseID`，那么以下哪一项应该更快或花费更少的资源，为什么？

```
House house = em.find(House.class, id); 
```

或者

```
Query q = em.createQuery("SELECT H FROM Person P JOIN P.houses H 
                          WHERE C.id = :personID AND H.id = :houseID"); 
```

第二个查询似乎缩小了搜索范围，但我不知道它是否更快。

如果您能给我一个建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:53:44.183

如果你想找房子，你不需要查询一个人。所以第一个选项。您的第二个选项有一个额外的要求 - 拥有那所房子的特定人。

一般而言 - 通过主键查找总是比通过查询更快（除非查询也只是通过主键）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T07:15:15.413

当你创建一个 SQLqurey 时，它总是会创建一个新的对象，连接打开数据库，但是在通过主键通过 JPA 搜索它时，**JPA 默认为主键创建 SQL 索引**，我们知道索引用于高效搜索，所以它总是比直接在数据库上触发查询更快、更有效。因此，为了获得更好的性能和速度，请始终使用 **_em.find(class,primary_key)** 而不是创建查询。

# jquery - NaN 而不是我的加载问题的数字

> ID：11170817
> 
> 赞同：0
> 
> 时间：2012-06-23T15:45:02.947
> 
> 标签：jquery

我尝试创建一个代码，每次加载组件时增加 2%，但我没有显示该数字增量，而是得到`NaN`. 这是为什么？

```
//Define variable
var PercentLoaded = 0;

//When a component loads
var PercentLoaded = PercentLoaded+2;
//Print value
$('#LoadProgressMessage').html('<h6>'+ PercentLoaded + '% Loaded</h6>'); 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T15:47:20.217

增加变量时尽量不要重新声明变量：

```
//Define variable
var PercentLoaded = 0;

//When a component loads
/*var*/ PercentLoaded = PercentLoaded + 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T15:52:38.240

该变量很可能不再在范围内。您提供的代码本身应该可以正常工作，但您在实际代码中可能有这样的内容：

```
$( function() {
    var PercentLoaded = 0;

    // PercentLoaded is in scope only up to here
});

function whatever() {
    var PercentLoaded = PercentLoaded + 2;  
   // The original PercentLoaded is no longer in scope
} 
```

# python - 使用其他表中的 id 通过 id 获取类别名称。姜戈

> ID：11170822
> 
> 赞同：0
> 
> 时间：2012-06-23T15:46:02.297
> 
> 标签：python, django

首先我想说我是非常初学者。我有两个 django 模型：文章和类别。在第 4 条字段中，在第 2 类字段中。每篇文章都必须分配到类别（如“科学”、“政治”）。文章只有类别 ID，我想从类别表中获取类别名称。示例模型：

楷模：

```
class Article(models.Model):
    article_id = models.IntegerField(primary_key=True)
    title = models.CharField(max_length=40)
    content = models.CharField(max_length=1000)
    category_id = models.SmallIntegerField()

class Category(models.Model):
    category_id = models.SmallIntegerField(primary_key=True)
    category_name = models.CharField(max_length=40) 
```

意见：

```
def index(request):
    articles = Article.objects.all()
    return render_to_response('main.html',{'articles':articles}, context_instance=RequestContext(request)) 
```

我可以在模板中获取 article_id、title、content 和 category_id，但我不知道如何使用 Article 中的 category_id 从 Category 模型中获取 category_name。可能方法必须写在 Article 类中，然后在模板中使用。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:49:39.020

你这样做是错的。您应该使用 ForeignKey。

```
class Article(models.Model):
    category = models.ForeignKey('Category')
    ... 
```

然后，当您拥有 Article 对象时，您可以通过以下方式访问 Category 的属性：

```
article.category.name 
```

# c# - GDI+ MeasureString() 错误地修剪文本

> ID：11170823
> 
> 赞同：3
> 
> 时间：2012-06-23T15:46:10.067
> 
> 标签：c#, gdi+, measurestring

我正在尝试完成一个可以在屏幕上布局文本的代码。以下 C# 代码放置在`Paint`原本为空的 Windows 窗体的事件处理程序中就是一个示例：

```
string[] s = new string[] { "Sample text ", "to test", " this layout ", "algorithm" };
PointF[] pts = new PointF[s.Length];
PointF start = new PointF(10, 10);
StringFormat f = new StringFormat(StringFormat.GenericTypographic);
float x = start.X;
float y = start.Y;
for (int i = 0; i < pts.Length; i++)
{
    pts[i] = new PointF(x, y);
    SizeF sz = e.Graphics.MeasureString(s[i], Font, pts[i], f);
    x += sz.Width;
    e.Graphics.DrawString(s[i], Font, Brushes.Black, pts[i]);
} 
```

`s`除了修剪数组中每段文本之前和之后的空白之外，它可以正常工作。它应该显示如下：

> 测试此布局算法的示例文本

但相反，它看起来像这样：

> 用于测试此布局算法的示例文本

我已确认该`f.Trimming`属性设置为`None`. 我猜想这会在字符串的度量中添加尾随和开头的空格，但它仍然会修剪它。关于如何制作该`MeasureString`方法的任何想法包括空格？否则，字距调整处理得很好。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-23T15:55:54.017

```
StringFormat f = new StringFormat(StringFormat.GenericTypographic)
                     { FormatFlags = StringFormatFlags.MeasureTrailingSpaces }; 
```

# javascript - 在 jquery 中，如何通过 index["key"] 或 value 删除数组元素

> ID：11170825
> 
> 赞同：21
> 
> 时间：2012-06-23T15:46:13.557
> 
> 标签：javascript, jquery

在**jQuery/JavaScript**中，如何删除数组元素？

就像是：

```
array.remove(array["key"]);

// or 

array.remove("value") 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-23T15:50:03.727

从你的代码来看，听起来你想删除一个对象的属性，你可以这样做[`delete`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/delete)：

```
var obj = { key: "value" };

delete obj["key"]; 
```

可以在[MDN](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects)上找到有关在 JavaScript 中使用对象的非常有用的指南。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-23T15:51:14.987

对于**数组**，使用[拼接](http://www.w3schools.com/jsref/jsref_splice.asp)方法：

```
var array = [1, 2, 3, 4, 5];
array.splice(2, 1);
console.log(array); // [1, 2, 4, 5] 
```

您可以创建自己的函数来删除（第一次出现）数组中的某个元素：

```
Array.prototype.remove = function(el) {
    return this.splice(this.indexOf(el), 1);
}
var arr = [1, 2, 3, 4, 5];
arr.remove(4);
console.log(arr); // [1, 2, 3, 5] 
```

如果要从**对象**中删除项目，请使用以下`delete`语法：

```
var a = {key1: 'val1', key2: 'val2'};
delete a.key1;
console.log(a); // {key2: 'val2'} 
```

再一次，您可以创建自己的函数来处理此问题：

```
Object.prototype.remove = function(el) {
    if (this.hasOwnProperty(el)) {
        delete this[el];
    }
    return this;
}
var a = {key1 : 'val1', key2: 'val2'};
a.remove('key1');
console.log(a); // {key2: 'val2'} 
```

**更新**：

1.  尽管这只是一个示例，正如@Eric 指出的那样，修改对象的原型并不是一个好主意。所以我重写了不改变对象状态的例子
2.  添加了检查元素是否存在于数组中。如果它不存在，则返回的索引将是`-1`并且 splice 方法将删除最后一个元素（数组末尾的第一个元素）。谢谢，@amnotiam！

```
function remove(collection, key) {
    // if the collections is an array
    if(collection instanceof Array) {
        if(collection.indexOf(key) != -1) {
            collection.splice(collection.indexOf(key), 1);
        }
    }
    // it's an object
    else if(collection.hasOwnProperty(key)) {
        delete collection[key];
    }
    return collection;
}; 
```

当然，由于问题已被标记`jquery`，我们可以将此函数添加为 jquery 插件：

```
(function($, global, undefined) {
    $.removeElementFromCollection = function(collection,key) {
        // if the collections is an array
        if(collection instanceof Array) {
            // use jquery's `inArray` method because ie8 
            // doesn't support the `indexOf` method
            if($.inArray(key, collection) != -1) {
                collection.splice($.inArray(key, collection), 1);
            }
        }
        // it's an object
        else if(collection.hasOwnProperty(key)) {
            delete collection[key];
        }

        return collection;
    };
})(jQuery, window); 
```

然后像这样使用它：

```
var array = [1, 2, 3, 4, 5];
$.removeElementFromCollection(array, 2); // [1, 3, 4, 5]

var object = {1: 2, 3: 4};
$.removeElementFromCollection(object, 1); // {3: 4} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-23T15:50:43.147

```
var fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.splice(2, 1); 
```

将从数组水果中删除 1 项，位置 2，即`Apple`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-23T15:50:11.183

`array["key"]`不是数组的键（javascript 中没有关联数组，如果您来自 PHP，它们可能看起来像它们，但它们是对象）而是对象的属性，我认为您可以使用 delete

```
delete array.key 
```

# python - 如何告诉 Python 脚本使用特定版本

> ID：11170827
> 
> 赞同：91
> 
> 时间：2012-06-23T15:46:23.330
> 
> 标签：python, version, virtualenv

我如何在 main.py 模块中（大概）告诉 Python 使用哪个解释器？我的意思是：如果我想让一个特定的脚本使用 Python 版本 3 来解释整个程序，我该怎么做？

奖励：这将如何影响 virtualenv？我是否认为如果我为我的程序创建一个 virtualenv 然后告诉它使用不同版本的 Python，那么我可能会遇到一些冲突？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-06-23T17:05:23.463

您可以在脚本顶部添加一个 shebang 行：

```
#!/usr/bin/env python2.7 
```

但这仅在执行 as 时才有效`./my_program.py`。

如果您执行 as `python my_program.py`，则将使用返回的任何 Python 版本`which python`。

在 re: to virtualenv use:`virtualenv -p /usr/bin/python3.2`或任何设置它以使用该 Python 可执行文件。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2017-01-27T19:49:25.587

也许不完全是您所要求的，但我发现这在我的程序开始时很有用：

```
import sys

if sys.version_info[0] < 3:
    raise Exception("Python 3 or a more recent version is required.") 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-06-23T16:15:44.577

我会在最后使用带有 Python 序列号的[shebang](https://en.wikipedia.org/wiki/Shebang_(Unix)) `#!/usr/bin/python`（第一行代码）；）

然后将 Python 文件作为脚本运行，例如，`./main.py`从命令行运行，而不是`python main.py`.

当您想从 Linux 命令行运行 Python 时也是如此。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-06-23T18:56:21.997

虽然 OP 可能在*nix 平台上工作，但这个答案可以帮助非*nix 平台。我没有在 Microsoft Windows 中体验过 shebang 方法的工作。

改写：shebang 行回答了您关于“**在我的脚本**中”的问题，但我相信仅适用于类 Unix 平台。即使是脚本之外的 Unix shell 实际解释了 shebang 行以确定调用哪个版本的 Python 解释器。我不确定，但我相信该解决方案并不能解决 Microsoft Windows 平台用户的问题。

在 Microsoft Windows 世界中，简化运行特定 Python 版本的方法，无需专门为每个特定版本的 Python 安装环境变量，只需在**python.exe**前面加上您要运行它的路径，例如**C:\Python25\python.exe mymodule.py**或**D:\Python27\python.exe mymodule.py**

但是，您需要考虑指向错误版本的 Python 库的 PYTHONPATH 和其他 PYTHON... 环境变量。

例如，您可能会运行：**C:\Python2.5.2\python.exe mymodule**

然而，环境变量可能指向错误的版本，例如：

**PYTHONPATH = D:\Python27**

**PYTHONLIB = D:\Python27\lib**

很多可怕的乐趣！

因此，在 Windows 中，一种非虚拟环境的方式是使用一个批处理文件来设置环境并通过在**python.exe**中加上它所在的路径作为前缀来调用特定的 Python 可执行文件。这种方式具有您将拥有的其他详细信息不过要管理；例如，如果您希望控制台在应用程序退出后继续存在，则使用“start”或“cmd.exe”命令的命令行参数来“保存并替换“console”环境”。

你的问题让我相信你有几个 Python 模块，每个模块都需要一个特定版本的 Python。这可以通过使用**子进程**模块的启动模块在脚本“内”解决。而不是调用**mymodule.py**你会调用一个调用你的模块的模块；也许**launch_mymodule.py**

### 启动_mymodule.py

```
import sys
import subprocess
if sys.argv[2] == '272':
  env272 = {
    'PYTHONPATH': 'blabla',
    'PYTHONLIB': 'blabla', }
  launch272 = subprocess.Popen('D:\\Python272\\python.exe mymodule.py', env=env272)

if sys.argv[1] == '252'
  env252 = {
    'PYTHONPATH': 'blabla',
    'PYTHONLIB': 'blabla', }
  launch252 = subprocess.Popen('C:\\Python252\\python.exe mymodule.py', env=env252) 
```

我没有测试过这个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T15:48:02.000

您不能在 Python 程序中执行此操作，因为如果您是 shebang 行，shell 会决定使用哪个版本。

如果您没有使用带有 shebang 行的 shell 并且只键入`python myprogram.py`它使用默认版本，除非您在键入`pythonXXX myprogram.py`要使用的版本时具体决定哪个 Python 版本。

一旦您的 Python 程序运行，您就已经决定使用哪个 Python 可执行文件来运行程序。

`virtualenv`用于隔离python版本和环境，它专门用于消除冲突。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-21T01:45:38.367

对于那些使用 pyenv 来控制他们的虚拟环境的人，我发现它可以在脚本中工作：

```
#!/home/<user>/.pyenv/versions/<virt_name>/bin/python

DO_STUFF 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-03-24T20:55:54.487

我遇到了这个问题，只是决定将其中一个程序从 python.exe 重命名为 python2.7.exe。现在，我可以在命令提示符下指定要轻松运行的程序，而无需引入任何脚本或更改环境路径。所以我有两个程序：python2.7 和 python（后者是 v.3.8 又名默认）。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2019-05-14T12:52:31.047

在 Windows 上使用不同版本的 Python 时，

我正在使用这种方法在版本之间切换。

我认为这比搞乱shebangs和virtualenvs要好

1）安装你想要的python版本

2）转到环境变量> PATH

（我假设 python 版本的路径已经添加到 Env.Vars.>PATH）

3）禁止你不想使用的所有python版本的路径

（不要删除路径，只需添加“_sup”之类的后缀）

4）从终端调用python

（所以windows会跳过你改错的路径，会在你没有压制的路径找到python.exe，开启后会使用这个版本）

5）通过玩后缀在版本之间切换

# java - Java中如何比较字符串和对象

> ID：11170833
> 
> 赞同：0
> 
> 时间：2012-06-23T15:47:22.890
> 
> 标签：java

我剪掉了这段代码，用于输入验证：

```
public void validaUserID(FacesContext context, UIComponent component, Object value) throws ValidatorException, SQLException {

        int findAccount = 0;

        if (ds == null) {
            throw new SQLException("Can't get data source");
        }
        // Initialize a connection to Oracle
        Connection conn = ds.getConnection();

        if (conn == null) {
            throw new SQLException("Can't get database connection");
        }

        // Convert Object into String
        int findValue = Integer.parseInt(value.toString()); 

        // With SQL statement get all settings and values
        PreparedStatement ps = conn.prepareStatement("SELECT * from USERS where USERID = ?");
        ps.setInt(1, findValue);
        try {
            //get data from database        
            ResultSet result = ps.executeQuery();
            while (result.next()) {
                // Put the the data from Oracle into Hash Map
                findAccount = result.getInt("USERID");
            }
        } finally {
            ps.close();
            conn.close();
        }

        // Compare the value from the user input and the Oracle data
        if (value.equals(findAccount)) {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                    value + " Session ID is already in use!", null));
        }
    } 
```

由于某种原因，输入数据未与 Oracle 中的值正确比较。比较两个值的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T15:50:10.340

看起来您正在比较盒装整数。我会解开它们（即以原始形式获取它们）并做`==`而不是`.equals`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:03:40.070

`Objects are compared using` **.equals()** ,`and String is an object too, so they also` `have to be compared using .equals().`

例如：

假设 s1 和 s2 为字符串。

s1.equals(s2);

`Primitive variables are compared using` **==**，**由于 Wrapper 是 Objects，你需要将它们与 .equals() 进行比较**`but if you want to compare them using ==`，然后**你必须先将它们转换为它的 Primitive 形式。**

例如：

整数 a = 5;

int i = 新整数（a）；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T16:32:10.630

出色地。答案在于您的代码本身。

```
 if (value.equals(findAccount)) 
```

你可以这样写

```
 if (findValue == findAccount)) 
```

因为您已经将 Object **Value**展开为原始**findValue**。

更清楚地说，equals() 被调用并仅传递给对象。您不能将对象与基元进行比较，反之亦然。

# php - php URL 段意外索引

> ID：11170840
> 
> 赞同：1
> 
> 时间：2012-06-23T15:48:10.377
> 
> 标签：php, codeigniter, url, slash

这很奇怪...我在 php (codeigniter) 中使用 MVC 模式来显示用户创建的类别。指向用户类别的 URL 是

`http://mysite.com/categories/user`

这适用于 Google Chrome 浏览器，但如果是 Firefox，它会将我带到索引。添加尾部斜杠...

`http://mysite.com/categories/user/`

...将我带到两个浏览器中的正确目的地。也`user`可以重命名控制器。

内部控制器

```
function user()
{
        $data['query'] = $this->Category_model->read_all_user_categories();
        $this->load->view('categories/read/user_categories', $data);    
} 
```

模型只返回一个查询。

通常是什么导致这种行为？我查看了所有文件，但找不到罪魁祸首。

**划掉可能的原因：**

*   我没有命名相同的函数`user`
*   没有控制器命名`user`
*   没有库，助手名为`user`

会是什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:51:50.440

我刚刚检查了 CI 的文档，并且：

> 如果 URI 的第二段为空，则默认情况下始终加载“索引”函数。

对不起，错误的信息。

*下面的句子仍然有效*（确认：[http](http://wordpress.org/support/topic/links-to-wordpress-post-tabs-pages-must-have-trailing-slash) ://wordpress.org/support/topic/links-to-wordpress-post-tabs-pages-must-have-trailing-slash ）

它适用于 Chrome 而不是 Firefox 的原因是由于 Chrome 在提交请求时删除了最后一个斜杠的行为。

# ruby-on-rails - ActiveRecord 不更新多态关联的 ID 由 :through 在保存对象后访问

> ID：11170843
> 
> 赞同：1
> 
> 时间：2012-06-23T15:48:15.287
> 
> 标签：ruby-on-rails, activerecord, has-many-through, polymorphic-associations, has-one

我正在尝试创建一组模型，其中用户的个人资料分配了一个地址，但用户在他的虚拟“通讯录”中可以有许多地址。用户应该能够从他的所有地址中选择默认地址并将其分配给配置文件作为 home_address。

地址可以有许多不同的类型。有家庭地址，但也有公司和银行地址有附加字段。这就是为什么我必须使用多态性。

我创建了模型：

```
class Addresser < ActiveRecord::Base

  belongs_to :addressable,  :polymorphic => true
  belongs_to :address,      :polymorphic => true

  attr_accessible :address_id, :address_type

end

class HomeAddress < ActiveRecord::Base

  has_one :addresser, :as => :address, :inverse_of => :address

  attr_accessible :name, :city, :zip, :street, :state, :country

end

class Profile < ActiveRecord::Base

  has_one     :home_address,  :through => :addresser,
                              :source => :address, :source_type => 'HomeAddress', 
                              :autosave => true

  has_one     :addresser,     :as => :addressable, :inverse_of => :addressable, 
                              :autosave => true

  attr_accessible :name, :gender

end 
```

一切正常，但 Rails 在保存模型后没有更新其中一个字段：

```
profile_data = {
    :name    => 'Some User',
    :gender => 'm'
}

address_data = {
   :street => 'Streeting 7',
   :country => 'PL',
   :city => 'New Rails',
 }

my_profile = Profile.new(profile_data)

=> #<Profile id: nil, name: "Some User", gender: "m", created_at: nil, updated_at: nil>

my_address = HomeAddress.new(address_data)

=> #<HomeAddress id: nil, street: "Streeting 7", city: "New Rails", country: "PL

my_profile.home_address = my_address

INSERT INTO `addressers` (`address_id`, `address_type`, `addressable_id`, `addressable_type`)
VALUES (NULL, 'HomeAddress', NULL, 'Profile')
COMMIT

=> #<HomeAddress id: nil, name: "Sir Adam Rails", street: "Streeting 7", city: "New Rails", country: "PL">

my_profile.save!

 INSERT INTO `profiles` (`created_at`, `name`, `gender`, `updated_at`)
 VALUES ('2012-06-23 10:07:51', 'Some User', 'm', '2012-06-23 10:07:51')

 INSERT INTO `home_addresses` (`city`, `country`,`street`)
 VALUES ('New Rails', 'PL', 'Streeting 7')

 UPDATE `addressers` SET `addressable_id` = 1 WHERE `addressers`.`id` = 1

 COMMIT
=> true 
```

在上面，addressable_id 已更新，但 address_id 未更新。这会导致约束在重新打开数据库会话后无效且不可用：

```
Addresser.first

SELECT `addressers`.* FROM `addressers` LIMIT 1
=> #<Addresser id: 1, address_id: nil, address_type: "HomeAddress", addressable_id: 1, addressable_type: "Profile"> 
```

由于 address_id 为 nil，因此无法找到 profile.home_address。

我可以在不手动更新可寻址的 address_id 的情况下解决此问题吗？

我的应用程序的架构要求我使用一些初始设置构建整个对象并进行原子保存，因此在创建用户（拥有配置文件）之前构建地址并保存它是一个弱选项。

# java - 使用 ActionBarSherlock 4.1.0 时资源文件中的错误

> ID：11170844
> 
> 赞同：5
> 
> 时间：2012-06-23T15:48:16.510
> 
> 标签：java, android, actionbarsherlock

我在 Eclipse 中成功编译了 ActionBarSherlock。

但是当我在一个新项目中使用它时出现 75 个错误：

```
abs4.1.0\library\res\values-v14\abs__styles.xml:4: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar'.
abs4.1.0\library\res\values-v14\abs__styles.xml:6: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar.Solid'.
abs4.1.0\library\res\values-v14\abs__styles.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar'.
abs4.1.0\library\res\values-v14\abs__styles.xml:10: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.Solid'.
abs4.1.0\library\res\values-v14\abs__styles.xml:12: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.Solid.Inverse'.
abs4.1.0\library\res\values-v14\abs__styles.xml:15: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar.TabView'.
abs4.1.0\library\res\values-v14\abs__styles.xml:17: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabView'.
abs4.1.0\library\res\values-v14\abs__styles.xml:19: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabView.Inverse'.
abs4.1.0\library\res\values\abs__styles.xml:89: error: Error: No resource found that matches the given name: attr 'android:dividerPadding'.
abs4.1.0\library\res\values\abs__styles.xml:88: error: Error: No resource found that matches the given name: attr 'android:showDividers'. 
```

*MainActivity.java*：

```
package com.stackoverflow.users.comfreek.testproject

import android.os.Bundle;
import com.actionbarsherlock.app.SherlockActivity;

public class MainActivity extends SherlockActivity {
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
  }
} 
```

我已经将活动主题设置为`@style/Theme.Sherlock`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T15:55:09.913

确保您已将 API 级别设置为 13。

请参阅此类似问题的答案[https://stackoverflow.com/a/8591853/808940](https://stackoverflow.com/a/8591853/808940)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:54:59.043

将项目的部署目标设置为：

`android >= honeycomb`

# python - NameError：名称“（随便）”未定义

> ID：11170849
> 
> 赞同：0
> 
> 时间：2012-06-23T15:48:49.660
> 
> 标签：python, google-app-engine

这个错误让我发疯。

我正在开发一个 App Engine Python 应用程序。这些是类：

```
from google.appengine.ext import db

class Usuario(db.Model):
  user = db.UserProperty()
  nombre = db.StringProperty(required = True)
  pasaporte = db.ReferenceProperty(Pasaporte)

class Pasaporte(db.Model):
  direccion = db.StringProperty()
  telefono = db.PhoneNumberProperty()

class Sindicato(db.Model):
  nombre = db.StringProperty(required = True)
  direccion = db.StringProperty()
  telefono = db.PhoneNumberProperty()

class Sede(db.Model):
  nombre = db.StringProperty()
  direccion = db.StringProperty()
  telefono = db.PhoneNumberProperty()
  descripcion = db.StringProperty()

class Servicio(db.Model):
  nombre = db.StringProperty()
  descripcion = db.StringProperty()
  prestador = db.StringProperty()
  condiciones = db.StringListProperty()

class UsuarioServicio(db.Model):
  usuario = db.ReferenceProperty(Usuario, collection_name='servicios_collection')
  servicio = db.ReferenceProperty(Servicio, collection_name='usuario_collection')
  fechaRegistro = db.DateTimeProperty(auto_now_add=True) 
```

我不知道为什么，但这是我尝试在 localhost 中测试我的应用程序时收到的错误消息：

```
NameError: name 'Pasaporte' is not defined 
```

在`UsuarioServicio`课堂上，我引用其他类而没有任何错误。

如果有帮助，我正在使用 Python2.7 解释器在 Eclipse-Pydev 上的 Kubuntu 10-10 中工作。无论如何，如果我尝试通过“dev_appserver.py”命令从终端启动应用程序，无论如何都会显示错误。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:51:22.173

`Pasaporte`直到在`Usario`. 切换这些类的顺序就可以了。

# database - 我无法将数据插入到 XCode 上的 sqlite3 文件中

> ID：11170851
> 
> 赞同：2
> 
> 时间：2012-06-23T15:49:44.693
> 
> 标签：database, ios5, sqlite, xcode4.2

我没有找到让我满意的答案，我可以将数据插入数据库，我也可以在模拟器上从中选择，但是当我关闭模拟器并再次打开它时，我看不到任何数据。我也在终端上打开它，我没有看到任何数据。我错过了任何一行还是有任何逻辑错误？

你尝试了什么？对我有什么建议吗？

我将数据插入到我的代码中是这样的：

```
databasePath = [[NSBundle mainBundle] pathForResource:@"persons" ofType:@"sqlite3"];
        const char *dbpath = [databasePath UTF8String];
        sqlite3_stmt    *statement;

        if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
        {
            NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO person (id, name, address, photograph, telephone, fax, district) VALUES (\"%i\",\"%@\", \"%@\", \"%@\",\"%@\",\"%@\",\"%@\")", i, Name,Addresses, Image, Telephone,Fax,District];

            const char *query_stmt = [insertSQL UTF8String];

            sqlite3_prepare_v2(contactDB, query_stmt, -1, &statement, NULL);

            if (sqlite3_step(statement) == SQLITE_DONE)
            {
                //  NSLog(@"OK");

            } else {
                //  NSLog(@"Problem!!!");

            }
            sqlite3_finalize(statement);
            sqlite3_close(contactDB); 
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:57:43.933

您不能对主包中的数据库进行更改，因为它是只读的。

您必须首先将其复制到可以写入的位置，例如用户文档或缓存目录。

[iOS 数据存储指南](https://developer.apple.com/icloud/documentation/data-storage/)根据数据类型指定应将其保存在何处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T06:26:49.550

我正在寻找相同的答案，因为我也被卡住了，我认为其他人的帖子[在这里](https://stackoverflow.com/questions/11218622/cant-figure-why-insert-sqlite-sql-statement-is-not-being-executed-xcode)给出了一个很好的例子。

以下是 Inafziger 提供的链接上的信息：

iOS 数据存储指南 iCloud 包括备份，它每天通过 Wi-Fi 自动备份用户的 iOS 设备。备份应用程序主目录中的所有内容，但应用程序包本身、缓存目录和临时目录除外。购买的音乐、应用程序、书籍、相机胶卷、设备设置、主屏幕和应用程序组织、消息和铃声也会得到备份。由于备份是通过无线方式完成并为每个用户存储在 iCloud 中，因此最好尽量减少为您的应用存储的数据量。大文件会延长执行备份所需的时间，并消耗更多用户可用的 iCloud 存储空间。

为确保备份尽可能高效，请务必按照以下准则存储应用程序的数据：

1.  只有用户生成的或应用程序无法重新创建的文档和其他数据，才应存储在 /Documents 目录中，并由 iCloud 自动备份。
2.  可以再次下载或重新生成的数据应存储在 /Library/Caches 目录中。您应该放在 Caches 目录中的文件示例包括数据库缓存文件和可下载内容，例如杂志、报纸和地图应用程序使用的内容。
3.  仅临时使用的数据应存储在 /tmp 目录中。虽然这些文件没有备份到 iCloud，但请记住在完成后删除这些文件，以免它们继续占用用户设备上的空间。
4.  使用“不备份”属性指定应保留在设备上的文件，即使在存储空间不足的情况下也是如此。将此属性用于可以重新创建但即使在存储空间不足的情况下也需要保留的数据，以便您的应用程序正常运行，或者因为客户希望它在离线使用期间可用。此属性适用于标记的文件，无论它们位于哪个目录，包括 Documents 目录。这些文件不会被清除，也不会包含在用户的 iCloud 或 iTunes 备份中。由于这些文件确实使用设备上的存储空间，因此您的应用程序负责定期监控和清除这些文件。

# jquery - 如何使用jQuery选择属性不透明度为1的元素

> ID：11170853
> 
> 赞同：3
> 
> 时间：2012-06-23T15:49:55.050
> 
> 标签：jquery, attributes, opacity

我有这些元素，我需要选择不透明度=1的ul里面的li。我怎样才能做到这一点？

```
<ul class="class" id="ul">
                <li style="width: 100%; list-style: none outside none; position: absolute; top: 0px; left: 0px; z-index: 98; opacity: 0;"><a title="title1" href=""><img alt="alt" class="class_name" src="/images/7dfc294d5c3bcebecb2ec0e44fd27d1c.jpg"></a></li>
                <li style="width: 100%; list-style: none outside none; position: absolute; top: 0px; left: 0px; z-index: 98; opacity: 0;"><a title="title2" href=""><img alt="alt" class="class_name " src="/images/a9c9eb42934df4576b352d88f607f292.jpg"></a></li>
                <li style="width: 100%; list-style: none outside none; position: absolute; top: 0px; left: 0px; z-index: 98; opacity: 0;"><a title="title3" href=""><img alt="alt" class="class_name " src="/images/b64264692c0d648068c9d1380e9099c1.jpg"></a></li>
                <li style="width: 100%; list-style: none outside none; position: absolute; top: 0px; left: 0px; z-index: 99; opacity: 1;"><a title="title4" href=""><img alt="alt" class="class_name " src="/images/43e3e5e2edc4234ecddbc89636e4e224.jpg"></a></li>
                <li style="width: 100%; list-style: none outside none; position: absolute; top: 0px; left: 0px; z-index: 98; opacity: 0;"><a title="title5" href=""><img alt="e-alt" class="class_name " src="/images/31a156ce7f7ab5485366d24f6cbfbede.jpg"></a></li>
            </ul> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-23T15:53:08.507

```
$('#ul li').filter(function() {
  return $(this).css('opacity') == '1';
}); 
```

**[演示](http://jsfiddle.net/QStkd/368/)**

你也可以试试`.each()`

```
var lis = [];
$('#ul li').each(function() {
    if ($(this).css('opacity') == '1') {
        lis.push(this);
    }
}); 
```

**[演示](http://jsfiddle.net/QStkd/369/)**

或使用`.map()`

```
var lis = $('#ul li').map(function() {
    if($(this).css('opacity') == '1')
        return this;
}).get(); 
```

**[演示](http://jsfiddle.net/QStkd/370/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T15:55:33.987

你可以试试

```
$('li[style*="opacity: 1"]') 
```

但我不确定它是否会在没有空间时返回元素，比如`opacity:1`

# mysql - 用字符'更新mysql

> ID：11170858
> 
> 赞同：0
> 
> 时间：2012-06-23T15:50:14.433
> 
> 标签：mysql

在我的值中，我有字符'并且我得到一个错误。

我该如何解决？

```
 UPDATE products
SET description = CASE
    WHEN id <= 350 THEN 'Sample description with ' character'
    ELSE 'sample description 2'
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:53:46.233

SQL中转义字符的常用方法是\所以

```
 UPDATE products
SET description = CASE
    WHEN id <= 350 THEN 'Sample description with \' character'
    ELSE 'sample description 2' 
```

如果你想知道如何在里面放一个\，你只需把它加倍，即`\\`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:56:10.080

**phpMyAdmin**将引号加倍。你可以这样做：

```
UPDATE `products`
SET `description` = CASE
    WHEN `id` <= 350 THEN 'Sample description with '' character'
    ELSE 'sample description 2'
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T15:51:47.927

双引号：

```
UPDATE products
SET description = CASE
WHEN id <= 350 THEN 'Sample description with '' character'
ELSE 'sample description 2'
END 
```

# sitemap - 多语言网站抓取问题（如 en/en/...等链接）

> ID：11170859
> 
> 赞同：0
> 
> 时间：2012-06-23T15:50:16.650
> 
> 标签：sitemap, multilingual, web-crawler

我创建了一个[多语言网站](http://www.agriandgolf.com)，并尝试使用通用[Sitemap Online Generator](http://www.xml-sitemaps.com/crawl.html)生成站点地图。

不幸的是，它抓取了诸如“en/en/...”或“it/de/en/...”之类的链接（这些链接不存在，当然也不正确）。恐怕谷歌也能做到这一点。

我阅读了所有关于标签的内容（也许问题就在那里）并且做了很多尝试，但结果总是一样的：很多冗余链接（en/apartments/en/apartments/torre）

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:19:02.633

**解决了！**

我将我的问题写给了站点地图生成器网站管理员。这是关于它的工具的错误（它不考虑 base-tag 属性周围的奇异顶点）。

我将站点地图发送给谷歌，一切正常。

# javascript - 与直接数组访问相比，使用检索配置信息的函数

> ID：11170860
> 
> 赞同：0
> 
> 时间：2012-06-23T15:50:29.547
> 
> 标签：javascript, arrays, performance

我使用配置对象来存储配置信息。所以像这个例子：

```
var value = myObject.Get('name'); 
```

实际配置存储在一个数组中 - 即`config['name'] = value`

有很多对 Get() 函数的调用——超过 25,000 次。如果直接访问该数组而不是通过他的 Get() 调用，差异会有多大？

另外 - 在一个每秒可以完成 60 次 25,000 次的动画中（！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:07:49.723

我建议不要过度优化，直到你有办法测试这对事物的实际影响。根据具体情况，整个调用可能最终都内联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T16:10:52.263

直接访问应该会更快，但是你应该做一些测试，因为代码性能经常受到js引擎的影响。

例如，通过点合成器`obj.key`（ 我建议您在结束项目之前不要进行微优化，只有在您进行了一些测试/研究之后。`obj["key"]`

# c++ - 'void' 之前的预期主表达式

> ID：11170862
> 
> 赞同：0
> 
> 时间：2012-06-23T15:50:42.767
> 
> 标签：c++, multithreading

> **可能重复：**
> [未定义的命名空间'boost'](https://stackoverflow.com/questions/11170644/undefined-namespace-boost)

谁能帮我处理这个错误。非常感谢

```
#include "Threads.h"
#include "Interthread.h"
#include <pthread.h>

void* task1(void *arg) {
// do stuff
}

void task2() {
// do stuff
}

int main () {
//using namespace boost; 
Thread thread_1;
thread_1.start (void *(*task1)(void *arg),NULL);
// Thread thread_2 = thread(task2);

// do other stuff
//thread_2.join();
//thread_1.join ();
return 0;
 } 
```

错误

> Test.cpp:18:21: 错误: 'void' 之前的预期主表达式</p>

# c++ - vtables 和 this 指针

> ID：11170868
> 
> 赞同：3
> 
> 时间：2012-06-23T15:51:19.847
> 
> 标签：c++, gcc, this, vtable, abi

我试图了解更多关于 vtables 和 vpointers 的内部工作原理，所以我决定尝试使用一些技巧直接访问 vtable。我创建了两个类，`Base`每个`Derv`都有两个`virtual`函数（`Derv`覆盖那些`Base`）。

```
class Base
{
    int x;
    int y;

    public:
        Base(int x_, int y_) : x(x_), y(y_) {}

        virtual void foo() { cout << "Base::foo(): x = " << x << '\n'; }    
        virtual void bar() { cout << "Base::bar(): y = " << y << '\n'; }
};

class Derv: public Base
{
    int x;
    int y;

    public:
        Derv(int x_, int y_) : Base(x_, y_), x(x_), y(y_) {}

        virtual void foo() { cout << "Derived::foo(): x = " << x << '\n'; }
        virtual void bar() { cout << "Derived::bar(): y = " << y << '\n'; }
}; 
```

现在，编译器为每个类添加一个 vtable 指针，占用内存中的前 4 个字节（32 位）。我通过将对象的地址转换为 a 来访问该指针`size_t*`，因为该指针指向另一个大小为 的指针`sizeof(size_t)`。现在可以通过索引 vpointer 并将结果转换为适当类型的函数指针来访问虚函数。我将这些步骤封装在一个函数中：

```
template <typename T>
void call(T *ptr, size_t num)
{
    typedef void (*FunPtr)();

    size_t *vptr = *reinterpret_cast<size_t**>(ptr);
    FunPtr fun = reinterpret_cast<FunPtr>(vptr[num]);

    //setThisPtr(ptr);      added later, see below!
    fun();
} 
```

当以这种方式调用其中一个成员函数时，例如`call(new Base(1, 2), 0)`调用 Base::foo()，很难预测会发生什么，因为它们是在没有`this`-pointer 的情况下调用的。我通过添加一个小模板化函数解决了这个问题，知道 g++ 将`this`-pointer 存储在`ecx`寄存器中（但这迫使我使用编译`-m32`器标志进行编译）：

```
template <typename T>
void setThisPtr(T *ptr)
{  
    asm ( mov %0, %%ecx;" :: "r" (ptr) );
} 
```

取消注释`setThisPtr(ptr)`上面代码段中的行现在使它成为一个工作程序：

```
int main()
{
    Base* base = new Base(1, 2);
    Base* derv =  new Derv(3, 4);

    call(base, 0); // "Base::foo(): x = 1" 
    call(base, 1); // "Base::bar(): y = 2"
    call(derv, 0); // "Derv::foo(): x = 3"
    call(derv, 1); // "Derv::bar(): y = 4"
} 
```

我决定分享这个，因为在编写这个小程序的过程中，我对 vtables 的工作原理有了更多的了解，它可能有助于其他人更好地理解这些材料。但是我还有一些问题：
1\. 编译 64 位二进制文​​件时使用哪个寄存器（gcc 4.x）来存储 this 指针？我尝试了这里记录的所有 64 位寄存器：http: [//developers.sun.com/solaris/articles/asmregs.html](http://developers.sun.com/solaris/articles/asmregs.html)
2\. this-pointer 何时/如何设置？我怀疑编译器会通过一个对象在每个函数调用上设置 this 指针，就像我刚刚做的那样。这是多态性实际工作的方式吗？（通过先设置 this 指针，然后从 vtable 调用虚函数？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T05:58:13.513

在 Linux x86_64 上，我相信其他类似 UNIX 的操作系统，函数调用遵循[System V ABI (AMD64)](http://www.x86-64.org/documentation/abi.pdf)，它本身遵循[IA-64 C++ ABI](http://www.codesourcery.com/cxx-abi/) for C++。根据方法的类型，`this`指针通过第一个参数或第二个参数隐式传递（当返回值具有非平凡的复制构造函数或析构函数时，它必须作为堆栈上的临时对象存在，并且第一个参数是隐式指针到那个空间）；否则，虚方法调用与 C 中的函数调用相同（整数/指针参数 in `%rdi`, `%rsi`, `%rdx`, `%rcx`, `%r8`,`%r9`溢出到堆栈；整数/指针返回 in `%rax`；浮点数`%xmm0`-`%xmm7`; ETC。）。虚拟方法调度的工作原理是在 vtable 中查找一个指针，然后像非虚拟方法一样调用它。

我对 Windows x64 约定不太熟悉，但我相信它是相似的，因为 C++ 方法调用遵循与 C 函数调用完全相同的结构（它使用与 Linux 不同的寄存器），只是`this`首先带有一个隐式参数。

# java - 奇怪的是，如果值看起来匹配，equals 也总是返回 false

> ID：11170870
> 
> 赞同：1
> 
> 时间：2012-06-23T15:51:27.063
> 
> 标签：java

我有这个方法

获取参数

```
public int getParam(String paramName){

    if(paramName.equals("Balls and net")){
        expressionParam=1;
    }
    else if(paramName.equals("Balls and bat")){
        expressionParam=2;
    }
    else if(paramName.equals("Without balls")){
        expressionParam=3;
    }
    else if(paramName.equals("Team Sport")){
        expressionParam=4;
    }
    else{
        expressionParam=-1;
    }

    return expressionParam;
} 
```

但由于某种奇怪的原因，if条件中的equals总是返回false，因此该方法总是返回-1

我在跟随按钮侦听器中调用此方法

```
JButton btnNewButton = new JButton("    OK   ");
        btnNewButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                try {
                    Object[][] matrix=(((MyTableModel) table.getModel()).getDatamatrix());
                     List<Expression> list=new LinkedList<Expression>(); 
                     for (int i = 0; i <elem; i++){
                         Expression e=new Expression(getSport((matrix[i][0]).toString()), getParam((matrix[i][1]).toString()), getSport((matrix[i][2]).toString()));
                         list.add(v); 

             }catch... 
```

并使用 println 验证传递给 getParams 的值是否匹配。

那么这个方法有什么问题呢？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:55:01.767

您很可能有尾随或前导空格。`trim()`第一的：

```
public int getParam(String rawParamName){
  final String paramName = rawParamName.trim();

  if(paramName.equalsIgnoreCase("Balls and net")){
  //... 
```

还要注意字符大小写。`Team sport`实际上会返回`-1`。考虑`equalsIgnoreCase()`改用。

最后，您可能有不同数量或类型的空格，例如字符之间的两个空格或制表符。这需要更多的工作。

最后，如果您想更加灵活，请考虑使用[levenshtein distance](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html#getLevenshteinDistance%28java.lang.String,%20java.lang.String%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T15:55:37.990

*   `.trim()`比较前
*   `.equalsIgnoreCase(..)`

=>

```
if (paramName().trim().equalsIgnoreCase("..")) { .. } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T16:04:47.473

如上所述，但使用更正的方法：

```
public int getParam(String paramName){
    String param = paramName.trim();
    if(param.equalsIgnoreCaseIgnoreCase("Balls and net")){
        return 1;
    }
    else if(param.equalsIgnoreCase("Balls and bat")){
        return 2;
    }
    else if(param.equalsIgnoreCase("Without balls")){
        return 3;
    }
    else if(param.equalsIgnoreCase("Team Sport")){
        return 4;
    }
    return -1;
} 
```

记住equals区分大小写总是有帮助的。equalsIgnoreCase 是这个的替代方案。这是我在 Java 初学者时犯的一个非常常见的错误。

您也可以使用 contains()，但请记住要小心将字符串与此方法进行比较。

# twitter - Twitter 搜索 API ID 的含义

> ID：11170871
> 
> 赞同：1
> 
> 时间：2012-06-23T15:51:28.217
> 
> 标签：twitter

我正在使用[Twitter 搜索 API](https://dev.twitter.com/docs/using-search)，但我无法理解`id`推文的字段。

例如这里是一个：`<id>tag:search.twitter.com,2005:1990561514</id>`。真实ID是最后的数字部分，对吧？为什么 Twitter 没有在单个元素中提供此功能？`2005`而且，为什么ID字段上有一年？那一年的 ID 和次年的推文是否将 ID 重新计算为零？ID 是否按年份编入索引？

我要问所有这些东西，因为我将使用选项`since_id`来检索新推文。如果 ID 不是真正唯一的并且取决于年份，则它不会按预期工作。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:53:35.297

标签是独一无二的——但其中的一部分是多余的。

```
tag:search.twitter.com,2005:1990561514 
```

显然，search.twitter.com 是您请求文档的 URL。

,2005 是不变的。据我所知，自服务推出以来，它从未改变过。虽然没有官方文档，但我猜它指的是 ATOM 规范命名空间 - [http://www.w3.org/2005/Atom](http://www.w3.org/2005/Atom) ”

最后，长数字是推文的状态 ID。它始终是唯一的，可用于 since_id。

您需要做的是拆分字符串，然后使用冒号后面的数字作为您的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T05:33:15.300

我相信你做错了什么。如果您查看来自 Twitter 搜索 API 的所有示例结果，则没有一个 id 字段的格式与您所显示的一样。

例如：

[http://search.twitter.com/search.json?q=%40twitterapi%20-via](http://search.twitter.com/search.json?q=@twitterapi%20-via)

此外，如果您查看[示例请求页面](https://dev.twitter.com/docs/api/1/get/search)，您将看到所有 id 字段都具有正常格式，即：

```
"id":122032448266698752 
```

更新：

现在我知道您正在使用 atom 提要，我可以看到看似奇怪的格式元素来自何处。请参阅[这篇](http://www.ibm.com/developerworks/xml/library/x-tipatom1/)关于避免在原子提要中重复的文章。[另一篇有用的文章](http://pic.dhe.ibm.com/infocenter/cicsts/v4r1/index.jsp?topic=/com.ibm.cics.ts.internet.doc/topics/dfhtl_atom_atomids.html)。

基本上，原子提要要求提要中的每个元素都有一个唯一的 id。一些提要使用“标签”方案来确保唯一性。这种格式实际上在原子提要中很常见，许多框架默认使用它。例如，RoR [AtomFeedHelper](http://api.rubyonrails.org/classes/ActionView/Helpers/AtomFeedHelper.html)（甚至可能是 Twitter 使用的）指定默认格式为：

```
"tag:#{request.host},#{options}:#{request.fullpath.split(".")}" 
```

# jquery - 如何通过 jQuery 为 tr 标签中的所有 td 标签赋予样式？

> ID：11170875
> 
> 赞同：0
> 
> 时间：2012-06-23T15:51:41.000
> 
> 标签：jquery

我正在尝试通过 jQuery 为特定表格行中的单元格赋予样式。

问题是我需要逐行检查一个属性，如果我发现了我期望的东西，那么当前行**之前**的行应该重新设置样式。

我正在使用以下代码，但不是仅为行的单元格绘制边框，而是为表中的每个单元格绘制边框：

```
$(".some_class_for_every_row_in_the_table").each(function() {
    var control_variable = ... //This is the attribute
    if (control_variable) {
        $(previous_row).find('td').each(function() {$(this).css('border-bottom', "1px solid #AAAAAA")});
    }
    previous_row = this; 
...
}) 
```

这是表格的 HTML：

```
<table>
    ...
    <tbody>
        <tr control_variable="...">
          <td>...</td>
        </tr>
        <tr control_variable="...">
          <td>...</td>
        </tr>
        ...
   </tbody>
</table> 
```

以正确的`control_variable`值获得，并且 previous_row 始终保持一致性。

如果我误导了问题的第一个版本，我很抱歉。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:55:34.177

您是否有理由不简单地使用：

```
$('.some_class_for_rows td').css('border-bottom','1px solid #aaa'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/3bZcS/)。

另一个猜测你正在尝试做什么，因为到目前为止你只发布了一些接近伪代码的东西，在下面的例子中，我们迭代*每个* `tr`元素，评估它的属性`data-controlVariable`，如果存在，添加类`rowBeforeControlVariable`到上一行：

```
$('tr').each(
    function(i){
        if ($(this).attr('data-controlVariable')){
            $('tr:eq(' + (i-1) + ')').addClass('rowBeforeControlVariable');
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/3bZcS/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:35:19.590

```
$("table tr[control_variable=VALUE]").prev("tr").find("td").css( ... set your attribute ...); 
```

见[http://jsfiddle.net/cranio/MvVgS/1/](http://jsfiddle.net/cranio/MvVgS/1/)

这适用于控制变量的固定值。如果它们有所不同，则应诉诸“ `.each()`”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T15:54:16.720

就像是

```
$(".some_class_for_rows").each(function() { 
    $('td', this).css('border-bottom', "1px solid #AAAAAA");
})​; 
```

应该管用

[http://jsfiddle.net/NwWkk/](http://jsfiddle.net/NwWkk/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T16:02:38.973

没有看到标记很难说，但我会说你可能在表的每一行上都有相同的类“some_class_for_rows”。

```
<table>
  <tr class="some_class_for_rows">
    <td>
    </td>
  </tr>
  <tr class="some_class_for_rows">
    <td>
    </td>
  </tr>
</table> 
```

对于单行，您需要一些独特的目标，例如：

```
<table>
  <tr class="some_class_for_rows selected">
    <td>
    </td>
  </tr>
  <tr class="some_class_for_rows">
    <td>
    </td>
  </tr>
</table> 
```

然后使用以下代码：

```
$('.some_class_for_rows.selected td').css('border-bottom','1px solid #aaa'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T18:37:45.000

我无法清楚地了解您的代码..但是试试这个代码......使用“每个”有时会让我们感到困惑......

如果您对所有“tr”都有相同的类名，这将有所帮助。

```
var len=$('.some_class_for_rows').length;
for(i=0;i<len;i++)
{
 var control_variable = ... //This is the attribute
 if (control_variable)
{
 $('.some_class_for_rows').eq(i).prev('tr').find('td').
 css('border-bottom', "1px solid #AAAAAA");
}
} 
```

# c# - 在保留原始 xml 的同时将 xml 序列化为对象？

> ID：11170879
> 
> 赞同：2
> 
> 时间：2012-06-23T15:51:58.637
> 
> 标签：c#, xml, xml-serialization, xmlreader

我正在使用外部 API 来接收 xml 并将其序列化为一个对象，但我想要一种能够保留用于序列化以进行调试和审计的原始 xml 的方法。

这是我如何序列化的示例：

```
XmlReader reader = this.Execute(url);
return Read<Property>(reader, "property"); 
```

Execute() 例程的摘录：

```
StringBuilder sb = new StringBuilder();
Stream s = response.GetResponseStream();
XmlReader reader = XmlReader.Create(s);
return reader; 
```

Read() 简单地封装了原生 xml 序列化：

```
private T Read<T>(XmlReader reader, string rootElement)
{
  XmlRootAttribute root = new XmlRootAttribute();
  root.ElementName = rootElement;
  root.IsNullable = true;
  XmlSerializer xmlSerializer = new XmlSerializer(typeof(T), root);
  object result = xmlSerializer.Deserialize(reader);
  return (T)result;
} 
```

一旦您使用了阅读器，我就环顾四周，您将无法再次使用它（仅转发阅读流？）。在不尝试进行太多更改的情况下，如何将阅读器的内容提取为 xml，同时仍然受益于阅读器的内置序列化？

最好使用 out 参数调整 Read：

```
private T Read<T>(XmlReader reader, string rootElement, out string sourceXml); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:02:06.977

您没有共享 this.Execute(url) 的代码，但大概是您从流中构建了一个阅读器。首先将该流写入字符串，然后在某处使用它。如果流不可搜索，则将其释放并从中创建一个新流。

另外，请注意 XmlSerializer 可以采用流而不是读取器，因此您永远不会打扰读取器，只需在方法之间传递流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:43:29.103

使用[提琴手](http://www.fiddler2.com/fiddler2/)。

Fiddler 是一个 Web 调试代理，它记录您的计算机和 Internet 之间的所有 HTTP(S) 流量。Fiddler 允许您检查流量、设置断点以及“摆弄”传入或传出数据。Fiddler 包括一个强大的基于事件的脚本子系统，并且可以使用任何 .NET 语言进行扩展。

# xcode - XCode 分析器不工作

> ID：11170880
> 
> 赞同：0
> 
> 时间：2012-06-23T15:52:06.720
> 
> 标签：xcode, code-analysis, analyzer

我目前正在通过 iTunesU 上 CS193P 课程，老师`Build and Analyze`多次提到该选项。他说这是一个很好的工具，玩起来很有趣。
所以我尝试了，发现它不起作用，或者我不明白它应该如何工作（我认为是最后一个选项）。
我有一些内存泄漏，它根本没有警告我！我在网上看到应该出现一个蓝色的东西，告诉我这是一个泄漏，但我没有看到任何东西，虽然我正在做`NSDictionary *dict = [[NSDictionary alloc] init];`。

它应该如何工作？从我在互联网上阅读的内容来看，我认为它应该预示着潜在的泄漏。我究竟做错了什么？

我正在使用 XCode 3.2.5。

谢谢。

**更新：**

我认为这是一种错误。
当我在接口中声明`NSDictionary *dict;`它并初始化它（但没有释放它）时，它什么也没说。

当我声明并初始化它 `- (void) init`并且不在那里释放它时：

```
- (void) init {
    if(self = [super init])
        NSDictionary *dict = [[NSDictionary alloc] init];
    return self;
} 
```

它确实表明泄漏。为什么？这是因为我的设置吗？这是一个错误吗？如果它是一个错误，我应该在哪里以及如何报告它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:56:59.783

它给你一个警告，因为你没有释放它。

```
-(void)dealloc{
   [super dealloc]; 
   [dict dealloc];
} 
```

它不会警告您，因为您应该能够在创建对象后立即释放它们，并且分析器的目标是提醒您代码中可能存在的泄漏。

您可以使用`autorelease`，也可以释放手动创建的对象。

PS，有点好奇：你为什么使用 Xcode 3.2.5？

不知道该版本是否可以，但是在最新版本的 Xcode 中，当您运行该工具时，您可以通过一些带有解释的箭头来查看正在释放的对象，例如

![](../Images/e7c03de100808e005f744f1c78246a45.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T05:39:30.143

我刚刚发现重新启动并重新启动 Xcode 会将其恢复。

# cakephp - CakePHP 2.1 - 如何在 find() 中正确使用 DISTINCT

> ID：11170885
> 
> 赞同：11
> 
> 时间：2012-06-23T15:52:48.560
> 
> 标签：cakephp, find, cakephp-2.0, distinct, extract

我有一个让我发疯的问题，我不得不承认我在 CakePHP 方面没有那么有经验。正如这个问题中提到的， [在 CakePHP 中使用 DISTINCT 查找函数](https://stackoverflow.com/questions/1718482/using-distinct-in-a-cakephp-find-function)，以这种方式使用 DISTINCT：

```
$this->Model->find('all', array('fields'=>'DISTINCT field_name')); 
```

不返回 DISTINCT 值，而是返回所有行。事实上，这里的 DISTINCT 完全没有意义，因为出于某种原因，CakePHP 添加了`TableName`. `id`在 SQL 查询中（为什么？？我可以删除 id 引用吗？？），有效地返回每个 DISTINCT 主键（=所有行=无帮助）。

所以，我仍然想返回特定 field_name 列的 DISTINCT 值。我不能只使用 find('all') 或 find('list') 函数吗？使用上面链接中描述的 Set::extract() 函数真的是正确的方法吗？这似乎是 CakePHP 的一个过于间接的解决方案，通常 Cake 让我的生活更轻松。:-) 一起使用 find 和 DISTINCT 的正确方法是什么？也许 DISTINCT 不适用于 find()？

看着 CookBook，他们说：“做 DISTINCT 查询的一个简单示例。您可以以类似的方式使用其他运算符，例如 MIN()、MAX() 等：”

```
<?php
    array(
        'fields' => array('DISTINCT (User.name) AS my_column_name'),
        'order' = >array('User.id DESC')
    )
?> 
```

来源：[http ://book.cakephp.org/2.0/en/models/retrieving-your-data.html](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)

这表明 DISTINCT 应​​该可以使用，但这里是什么？(User.name) 是否对应于我想要 DISTINCT 的 field_name 还是 my_column_name 我的 field_name？

最后，当从 CakePHP 1.x 迁移到 CakePHP 2.x 时，这是否发生了任何变化？即在 Stackoverflow 上看到的 CakePHP 1.x 的答案是否仍然相关？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T12:40:57.970

是的，第二个片段是`SELECT DISTINCT`在 CakePHP 2.x中执行 a 的正确方法。`User.name`对应于字段名称，在本例中对应`name`于`users`表中的字段。`my_column_name`是结果集中字段名称的（可选）别名，即，`name`将`my_column_name`在结果集中命名字段而不是字段。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-31T07:05:35.560

在 find with condition 中使用 distinct 的正确方法是：

```
$this->Model->find('all', array('fields' => array('DISTINCT Model.database_fieldname'),'conditions' => array('Model.database_fieldname' =>$val ))); 
```

其中 $val 包含您要在查询中传递的一些值。

祝你今天过得愉快

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-02T10:44:12.890

为了**`CakePHP 3.X`**

要选择不同的字段，您可以使用以下`distinct()`方法：

```
// Results in SELECT DISTINCT country FROM a table...
$query = $articles->find();
$query->select(['country'])
    ->distinct(['country']); 
```

[食谱文档](https://book.cakephp.org/3.0/en/orm/query-builder.html#selecting-data)

# java - 如何从远程无状态会话 bean 实现接口？

> ID：11170896
> 
> 赞同：0
> 
> 时间：2012-06-23T15:54:29.493
> 
> 标签：java, jakarta-ee, netbeans, glassfish-3

我正在编写一个项目，我正在尝试应用多层架构。现在我有 2 个 EJB、业务和持久性以及一个共享 jar。由于功能要求，持久性必须是可替换的。我制作了一个名为 IPersistence 的接口。然后我在持久性 EJB 中创建了一个名为“持久性”的远程会话 bean，并将远程接口放入共享库中。现在，我需要使用来自业务的注入来调用 IPersitence。我怎样才能做到这一点？也许整个想法是错误的。我需要一些建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:08:51.243

这是一个简单的示例，其中您有一个汽车存储库/DAO，它通过不公开它是否存储在数据库、文件、XML 等中来从业务逻辑中抽象出持久性。然后业务类注入一个实例以便能够 - in这种情况 - 保存到数据库。但是，您可以创建实现 CarRepository 的其他类，并提供其他方法来在应用程序中保存数据，而无需触及代码的其他部分。

**持久层**

***存储库/DAO 的接口***

```
@Local
public interface CarRepository {
    List<Car> findAllCars();

    // Many other methods
} 
```

***存储库（域驱动设计）***或数据访问对象

```
@Stateless
public class CarSqlRepository implements CarRepository {

    @PersistenceContext(unitName = "MyUnit")
    private EntityManager entityManager;

    public List<Car> findAllCars() {

    }

    // Many other methods
} 
```

* * *

***服务/业务层***

```
@Stateless
public class CarService {

    @Inject
    private CarRepository carRepository;

    public List<Car> findAllCars() {
        return carRepository.findAllCars();   
    }

    // Many other methods
} 
```

# gwt - 如何让 GWT RequiresResize.onResize 响应缩放？

> ID：11170905
> 
> 赞同：0
> 
> 时间：2012-06-23T15:55:19.290
> 
> 标签：gwt, resize

缩放后不调用 onResize。

当前的 GWT 实现：

```
public native void initWindowResizeHandler() /*-{
    var oldOnResize = $wnd.onresize;
    $wnd.onresize = $entry(function(evt) {
      try {
        @com.google.gwt.user.client.Window::onResize()();
      } finally {
        oldOnResize && oldOnResize(evt);
      }
    });
  }-*/; 
```

我发现用于[捕获调整大小事件](https://stackoverflow.com/questions/995914/catch-browsers-zoom-event-in-javascript)的唯一解决方案是使用轮询。

1.  投票是最好的（唯一的）方式吗？如果是这样，如何使用调度程序来获得最佳性能？

2.  捕获事件后，调用 com.google.gwt.user.client.Window::onResize() 似乎是个好主意吗？

谢谢

***当前***正在寻求改进的

```
@Override
  protected void onLoad() {

    Scheduler.get().scheduleFixedDelay(new RepeatingCommand() {

      @Override
      public boolean execute() {

        if (listOuter.getOffsetWidth() != knownWidth)
          onResize();

        return SomeListViewImpl.this.isAttached();
      }
    }, 200);

  } 
```

onResize 在 Window.onresize 和缩放上调用。

```
 @Override
  public void onResize() {

    knownWidth = listOuter.getOffsetWidth();
    GWT.log("resize: " + knownWidth);

    //some magic

  } 
```

# php - 使用 PHP 重命名 JavaScript 变量和函数

> ID：11170908
> 
> 赞同：1
> 
> 时间：2012-06-23T15:55:29.393
> 
> 标签：php, javascript, class, function, variables

我已经搜索并找到了另一个非常接近的问题，但结果是 YUI Compressor，我没有发现它有用。

我使用 php 来混淆我的 JavaScript 代码，但这还不够。我需要一个可以运行的 php 脚本，然后将所有函数和变量重命名为随机名称（只有字母），并且在我混淆之前。

我见过一些，但它们要么是像 Java 这样的独立程序，要么是你需要付费的东西，我不能使用它。

有谁知道可能能够做到这一点的类或代码片段？

如果 YUI Compressor 真的可以做到这一点，任何人都可以指出我如何将它实现到 php 中的一些帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:46:20.260

写完这篇冗长的回复后，我开始想知道为什么你首先需要混淆 javascript 代码？Javascript 代码本质上是公开的，任何查看您页面的人都可以看到结果。如果您需要做一些秘密/专有的事情，请查看 AJAX 之类的东西，或者以其他方式回调您的服务器以进行处理并让它为 javascript 吐出结果。任何人都可以看到您在 javascript 中进行的任何处理。混淆只会使调试变得更加困难，并且不能保证阻止某人破解代码。

通常使用 javascript 来控制演示，将服务器调用的结果解析到文档中，并验证用户输入。任何你想做的秘密，在服务器端做，他们看不到正在发生的确切代码。

如果你仍然想走重命名路线，我的回答是：

我还没有花时间谷歌什么是 YUI 压缩器，但是你所描述的听起来你需要解析任何 javascript，然后从那里开始重命名函数和变量。我看到几个问题

*   如果/当您的 javascript 使用内置变量名称，如`document`or`window`和类似的内置函数，如`.getElementById()`. 那些你不能触摸或脚本不能做它应该做的事情。
*   Javascript 在浏览器的上下文中执行，并且可能使用来自其他 javascript 文件的函数/变量，例如 HTML 等

    ```
    <script type="text/javascript" src="a.js"></script>
    <script type="text/javascript" src="b.js"></script>

    ```

    由于`b.js`包含在 之后`a.js`，`b.js`因此可以引用和使用其中的任何函数或变量，`a.js`因此如果您对名称进行打乱，则必须确保在其中所做的任何引用`b.js`都适当地更新为您的新名称。
*   根据您想要重命名的频率，您可以在更容易破解代码与完全破坏浏览器缓存之间进行权衡

    *   只修改**一次**名称并保留结果 - 然后浏览器将正确缓存响应并且您的站点应该运行良好，但是由于名称在调用之间是一致的，因此某人更容易破解重命名。尽管对于此解决方案，您不一定需要 PHP，只需要任何语言或脚本并运行一次
    *   修改**每个会话**的名称- 可能是最好的解决方案和中间道路，尽管它需要您保留与每个会话关联的额外内存以更改名称，因此来自同一会话的新 java 脚本文件的任何请求都会按应有的方式重命名（大多数现代浏览器和服务器设置将允许缓存相同命名的 javascript 文件，如第 2 点所述，如果`a.js`另一个 javascript 文件使用其中的任何函数/变量，则必须相应地更新它们
    *   修改**每个请求**的 javascript 文件- 这可能需要您禁用 javascript 文件的缓存，因为即使用户重新加载同一页面，对页面的每个请求都需要下载新的 javascript 文件。这将大大降低页面加载性能（您必须再次重命名所有函数并生成一个新的 javascript 文件，然后由浏览器下载并由它解析）并且还会增加带宽消耗，但是页面不会有两个脚本一样。

总的来说，这看起来不像是一个你想要承担的 1 人（甚至 2 或 3 人）项目（除非你手上有很多时间，但事情会发生变化），可能会有这样的事情已经在那里或附近的东西，你可以分叉并修改你的需要。从本质上讲，我认为您想要做的工作比它的价值还多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:03:31.057

我不确定您为什么要这样做，但是手动完成似乎很容易。

您只需要编写一个生成随机字符串的函数，然后在 PHP 中为您拥有的所有 JavaScript 函数定义变量，并为这些函数分配随机字符串。然后，当您打印出实际 JavaScript 方法的代码时，只需替换它们即可。唯一需要注意的是，您需要仔细检查您的随机字符串是否永远不会重复。如果您不能使用数字（根据您的问题），请使用字母并将它们增加附加到您的随机字符串的后面。所以在伪代码中......

```
 $var1 = generateRandomString(); //custom method to create random string and append unique letter at end to guarantee no duplicates. 
        $function1 = generateRandomString();

        and in javascript...

   //variable assignment
   <?php echo "$var1='foo'"; ?>;

    //function definition
        function <?php echo "$function1" ; ?>( myArg ){
           alert(myArg); //this will alert 'foo'
        }

    //calling the function
    <?php echo "$function1($var1)" ; ?> 
```

等等

# css - html div 高度 (%)

> ID：11170915
> 
> 赞同：0
> 
> 时间：2012-06-23T15:55:43.670
> 
> 标签：css, html, height

嗨，我对 html 高度有疑问。

我的高度现在设置为像素，一切正常。但是当我以百分比表示时，它没有显示：

我也需要像宽度一样调整高度以适应我的屏幕。

这是[代码](http://jsfiddle.net/Denonth/Qv5GU/)

我想要的是将div 的高度更改`left`为`right`适合屏幕的百分比。当我这样做时，我的 div 消失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:04:53.513

他们当然会消失。div 或任何`display: block`默认具有 100% 宽度和自动高度（由其内容定义）的元素，所以当你说你想要 50% 高度时，这并不意味着什么，因为 50% 的 auto 是 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:08:10.813

如果你想以百分比设置内部 div 的高度，那么你必须先设置它的父高度，然后你的内部 div 将占据其父容器高度的指定百分比。

```
#container {
    width:98%;
    height:570px;
    padding-left:1%;
    padding-right:1%;
} 
```

`#left{ height:100% }`将根据它的父 div 高度来测量它的`#container`高度。

[**演示。**](http://jsfiddle.net/heera/Qv5GU/31/) ​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T16:10:35.500

看看这个[小提琴](http://jsfiddle.net/Qv5GU/35/)。我以这种方式更改了 CSS：

```
html, body 
{ 
 height: 100%; 
 margin: 0; 
 padding: 0 ;
 border: 0 none;
}

#footer
{
clear:both;
text-align:center;
background-color:#4671D5;
 -moz-border-radius-bottomleft: 100px 50px;
  border-bottom-left-radius: 100px 50px;
  -moz-border-radius-bottomright: 100px 50px;
  border-bottom-right-radius: 100px 50px;
}
#left
{
background-color:red;
height:100%;
width:80%;
float:left;
}
#right
{
background-color:blue;
 float:left;
 width:20%;
 margin:0;
  height:100%;
}
#header
 {
 background-color:#4671D5;
 -moz-border-radius-topleft: 100px 50px;
  border-top-left-radius: 100px 50px;
  -moz-border-radius-topright: 100px 50px;
  border-top-right-radius: 100px 50px;
    height: 100%;
 }
 #container
 {
 width:98%;
 padding-left:1%;
 padding-right:1%;
    height: 100%;
 } 
```

有用。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T16:37:25.397

我有点晚了，但我会认为这就是你正在寻找的东西，因为它会随着窗口的大小而增长和缩小。这是它的[jsfiddle](http://jsfiddle.net/gusper/Qv5GU/41/)。

这是HTML：

```
<html>
    <body onload="initialize()">
        <div id="container">
            <div id="header">Header</div>
            <div id="left">Left</div>
            <div id="right">Right</div>
            <div id="footer"> Footer</div>
        </div>
    </body>
</html> 
```

​ 这是CSS：

```
html, body 
{ 
    height:100%;
}
#container
{
    height: 100%;
    width:98%;
    padding-left:1%;
    padding-right:1%;
}
#header
{
    height:10%;
    background-color:blue;
}
#footer
{
    height: 10%;
    clear:both;
    background-color:yellow;
}
#left
{
    background-color:red;
    height:80%;
    width:70%;
    float:left;
}
#right
{
    background-color:green;
    height:80%;
    width:30%;
    float:left;
} 
```

# java - 借助 ZXing 实现条码扫描器

> ID：11170924
> 
> 赞同：0
> 
> 时间：2012-06-23T15:56:14.690
> 
> 标签：java, android, zxing

我想在我的项目中实现 ZXing 开源条形码扫描仪，我正在按照[这里](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)的步骤操作，但我被困在第 4 步，我在库部分没有看到 ZXing。

我已正确完成上述所有步骤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:00:21.030

您需要安装条形码扫描仪应用程序.. [https://play.google.com/store/apps/details?id=com.google.zxing.client.android&hl=en](https://play.google.com/store/apps/details?id=com.google.zxing.client.android&hl=en)

Intent 会调用 App，扫描条码，然后 App 会将结果反馈到 Intent Activity 结果中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:34:19.380

> 我被困在第 4 步，我在库部分没有看到 ZXing。

引用博客条目：

> 右键单击 ZXing 项目 -> 属性 -> Android -> 向下滚动并选中/勾选“Is Library”复选框 -> 确定。

之后，步骤#4 应该可以正常工作。

# open-source - 开源下载统计

> ID：11170925
> 
> 赞同：0
> 
> 时间：2012-06-23T15:56:42.833
> 
> 标签：open-source, github, statistics, sourceforge

sourceforge 真的是唯一能让我看到下载代码的国家和他们使用的操作系统的主机吗？

有没有办法在 github 或其他开源主机上做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T20:39:09.007

[考虑到GitHub 提供的用于使用 Google BigQuery 分析](https://github.com/blog/1112-data-at-github)的数据类型（及其[GitHub Data Challenge](https://github.com/blog/1118-the-github-data-challenge)），我不这么认为

你可以在这里看到一个你可以从这些数据中产生的可视化示例（那里没有关于国家的数据）：
[GitHub 数据分析](http://www.r-bloggers.com/github-data-analysis/)

例如：

> 对创建新存储库的分析表明，多年来一直保持忙碌或平静的模式。

![创建新的存储库](../Images/07b224b8376b44fd57ca51df8693f498.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T07:23:23.610

对于所有正在寻找 Google Analytics for Github 统计数据的人来说，[GA-Beacon](https://github.com/igrigorik/ga-beacon)可能是一个解决方案。

# mysql - 是什么导致我的查询中出现 MySQL 语法错误 1064？

> ID：11170928
> 
> 赞同：-3
> 
> 时间：2012-06-23T15:56:52.847
> 
> 标签：mysql, sql

```
INSERT INTO table_a (col_tinyint, col_varchar)
SELECT 0, distinct(col_other_varchar) COLLATE utf8_bin FROM table_b 
```

我想从 table_b 中区分并区分大小写，但此查询会产生错误。我该如何解决这个问题？

我得到错误：

> **错误是 SQL 语法 #1064**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:58:46.587

`DISTINCT`关键字必须紧跟在之后`SELECT`。

您还应该知道，它适用于整行而不是单个列，无论您可能选择添加任何括号。

```
INSERT INTO table_a (col_tinyint, col_varchar)
SELECT DISTINCT 0, col_other_varchar COLLATE utf8_bin
FROM table_b 
```

# silverlight - 列表框项目周围的边框（银光）

> ID：11170931
> 
> 赞同：0
> 
> 时间：2012-06-23T15:57:21.920
> 
> 标签：silverlight

我在运行时将项目添加到列表框。

每个 ListBoxItem 都是一个子 View。每次我添加一个项目时，都会将一个新的 listboxitem 添加到父 paga 中。

我的子视图有一个边框。当我动态添加一个子视图时，我可以找出两个列表框项之间的间隙。

任何人都可以帮助我做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T01:26:15.427

ListBoxItem 上的 Padding 是间距的来源。这是将其设置为 0 的一种方法：

```
<ListBox>
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="Padding" Value="0" />
        </Style>
    </ListBox.ItemContainerStyle>
    ...
</ListBox> 
```

# sql-server - 如何将 varchar 转换为 ASCII7

> ID：11170933
> 
> 赞同：1
> 
> 时间：2012-06-23T15:57:59.067
> 
> 标签：sql-server, sql-server-2008

我想用它们的基本字母替换任何拉丁/重音字符，并去掉所有无法转换的内容

例子：

```
'ë' to be replaced with 'e'
'ß' to be replaced with 's' , 'ss' if possible, if neither then strip it 
```

我可以在 c# 代码中做到这一点，但我只是在 MSSQL 中没有很好的经验来解决这个问题而无需花费很多天

更新： varchar 列中的数据是从另一个应该有正常 UNICODE 文本的表上的触发器填充的。我想在函数中将文本转换为 ascii7 以用于进一步处理。

更新：我更喜欢只能在 SQL 中完成并避免自定义字符映射的解决方案。可以做到这一点，还是目前不可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:40:37.173

正如 Aaron 所说，我认为您不能完全在 SQL 中处理映射表，但是将字符映射到 ASCII-7 应该涉及一些相当简单的表，与 AI 排序规则一起使用。这里有两张表，一张用于映射列中的字符，一张用于字母表中的字母（如有必要，可以展开）。

通过使用 AI 排序规则，我得到了很多明确的映射定义。

```
-----------------------------------------------
-- One time mapping table setup
CREATE TABLE t4000(i INT PRIMARY KEY);
GO

INSERT INTO t4000 --Just a simple list of integers from 1 to 4000
SELECT ROW_NUMBER()OVER(ORDER BY a.x)
FROM (VALUES(1),(2),(3),(4),(5),(6),(7),(8),(9),(10)) a(x)
CROSS APPLY (VALUES(1),(2),(3),(4),(5),(6),(7),(8),(9),(10)) b(x)
CROSS APPLY (VALUES(1),(2),(3),(4),(5),(6),(7),(8),(9),(10)) c(x)
CROSS APPLY (VALUES(1),(2),(3),(4)) d(x)
GO

CREATE TABLE TargetChars(ch NVARCHAR(2) COLLATE Latin1_General_CS_AI PRIMARY KEY);
GO

INSERT TargetChars -- A-Z, a-z, ss
SELECT TOP(128) CHAR(i)
FROM t4000
WHERE i BETWEEN 65 AND 90
    OR i BETWEEN 97 AND 122
UNION ALL
SELECT 'ss'
-- plus any other special targets here
GO

-----------------------------------------------
-- function
CREATE FUNCTION dbo.TrToA7(@str NVARCHAR(4000))
RETURNS NVARCHAR(4000)
AS
BEGIN
    DECLARE @mapped NVARCHAR(4000) = '';
    SELECT TOP(LEN(@str))
    @mapped += ISNULL(tc.ch, SUBSTRING(@str, i, 1))
    FROM t4000
    LEFT JOIN TargetChars tc ON tc.ch = SUBSTRING(@str, i, 1)
    COLLATE Latin1_General_CS_AI;

    RETURN @mapped;
END
GO 
```

使用示例：

```
SELECT dbo.TrToA7('It was not á tötal löß.'); 
```

结果：

```
--------------------------
It was not a total loss. 
```

# android - 线性布局背景图像集 alpha

> ID：11170935
> 
> 赞同：2
> 
> 时间：2012-06-23T15:58:07.530
> 
> 标签：android

我在我的android程序中使用图像作为线性布局的背景。我需要为此设置不透明度。谁能告诉我我该怎么做？..半透明的图像不显示不透明度，不虽然知道原因。提前感谢您的宝贵意见

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T16:28:50.807

如果您以编程方式设置 LinearLayout 的背景，这应该没有任何问题。

您正在寻找的是`Drawable.setAlpha(int alpha)`方法。来自个人项目：

```
ImageView image = (ImageView) row.findViewById(R.id.list_icon);
image.setImageResource(R.id.something);
image.setAlpha(110); 
```

不完全一样，但也许你明白了。

您正在使用可绘制对象作为布局的背景。这里的挑战是获取代表您的可绘制对象的变量。这是在[这里](http://developer.android.com/guide/topics/graphics/2d-graphics.html)完成的：

在布局的活动中：

```
Resources res = getResources();
Drawable background = res.getDrawable(R.drawable.*the id*);
    // The layout which are to have the background:
LinearLayout layout = ((LinearLayout) findViewById(R.id.*you get it*));
    // Now that we have the layout and the background, we ajust the opacity 
    // of the background, and sets it as the background for the layout
background.setAlpha( *a number* );
layout.setBackgroundDrawable(background); 
```

它应该工作。至少它确实对我有用。

# javascript - 在 innerHTML 中设置一些初始文本

> ID：11170945
> 
> 赞同：-2
> 
> 时间：2012-06-23T15:58:56.123
> 
> 标签：javascript, innerhtml

我有以下代码

```
var dbvalue = "Ned";
var deleteLink = '<a href="#delete" onclick="deleteMe();">Delete</a>';
var editLink = '<a href="#save" onclick="saveMe();">Save</a>';
//newemployee.setAttribute("id", "Lorem_ipsum");
newEmployee.innerHTML="<input type = checkbox>" + "First name: <input>" + "Last name: <input>"  +deleteLink + "" +editLink +"<br/>"+"<br/>"; 
```

我想知道如何让我的变量 dbvalue 填写它在我的字段 First name 中保存的值。如何完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:01:42.463

你有没有尝试过：

```
newEmployee.innerHTML="<input type = checkbox>" + "First name: <input type='text' value='" + dbvalue + "'>" + "Last name: <input>"  +deleteLink + "" +editLink +"<br/>"+"<br/>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:01:48.750

你可以这样使用它：

```
var dbvalue = "Ned";
var deleteLink = '<a href="#delete" onclick="deleteMe();">Delete</a>';
var editLink = '<a href="#save" onclick="saveMe();">Save</a>';
//newemployee.setAttribute("id", "Lorem_ipsum");
newEmployee.innerHTML="<input type = checkbox>" + "First name: <input value=\"" + dbvalue + "\" type=\"text\">" + "Last name: <input>"  +deleteLink + "" +editLink +"<br/>"+"<br/>"; 
```

单独突出显示名字部分

```
"First name: <input value=\"" + dbvalue + "\" type=\"text\">" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T16:05:47.787

您确实应该使用`addElement`and`addTextNode`向 DOM 添加元素，但这取决于您。输入不使用`innerHTML`. 他们使用价值。因此，您的 dbvalue 的示例文本将是：

```
"First name: <input type=\"text\" value=\""+dbvalue+"\" />" //The slash there is for XHTML. You can leave it out if you want. 
```

# android - 在 ProgressDialog 期间禁用搜索按钮按下

> ID：11170948
> 
> 赞同：0
> 
> 时间：2012-06-23T15:59:03.113
> 
> 标签：android

我有一个简单的 ProgressDialog，但我意识到如果我按下搜索按钮，对话框将被关闭。在此过程中如何禁用搜索按钮按下？

```
dialog = new ProgressDialog(Main.this);
dialog.setTitle("Working in progress");
dialog.setMessage("Please wait...");
dialog.setCancelable(false);
dialog.show(); 
```

我放了这个，它没有用。

```
 dialog = new ProgressDialog(Main.this){
    @Override
    public boolean onSearchRequested() {
            return false;
    }
    }; 
```

这也行不通。

```
 dialog.setOnKeyListener(new DialogInterface.OnKeyListener() {
        public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {
            if (keyCode == KeyEvent.KEYCODE_SEARCH && event.getRepeatCount() == 0) {
                return true; // Pretend we processed it
            }
            return false; // Any other keys are still processed as normal
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:53:54.963

试着放

```
@Override
public boolean onSearchRequested() {
        return false;
} 
```

在活动中，而不是对话框中。

编辑：还尝试将关键侦听器代码添加到活动中：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // your code
} 
```

# python - 如何在运行时复制 python 模块？

> ID：11170949
> 
> 赞同：38
> 
> 时间：2012-06-23T15:59:06.920
> 
> 标签：python, python-c-extension

我需要制作一个套接字模块的副本才能使用它，并为另一个套接字模块进行猴子修补并以不同的方式使用它。

这可能吗？

我的意思是真正复制一个模块，即在**运行时**获得与复制相同的结果`socketmodule.c`，将`initsocket()`函数更改为`initmy_socket()`，并将其作为`my_socket`扩展安装。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-01T20:45:47.520

你总是可以做一些技巧，比如导入一个模块然后从 sys.modules 中删除它或尝试复制一个模块。然而，Python 已经在它的标准库中提供了你想要的东西。

```
import imp # Standard module to do such things you want to.

# We can import any module including standard ones:
os1=imp.load_module('os1', *imp.find_module('os'))

# Here is another one:
os2=imp.load_module('os2', *imp.find_module('os'))

# This returns True:
id(os1)!=id(os2) 
```

> ### Python3.3+
> 
> `imp.load_module`[在 python3.3+ 中已弃用](https://docs.python.org/3/library/imp.html#imp.load_module)，建议使用`importlib`
> 
> ```
> #!/usr/bin/env python3
> 
> import sys
> import importlib.util
> 
> SPEC_OS = importlib.util.find_spec('os')
> os1 = importlib.util.module_from_spec(SPEC_OS)
> SPEC_OS.loader.exec_module(os1)
> sys.modules['os1'] = os1
> 
> os2 = importlib.util.module_from_spec(SPEC_OS)
> SPEC_OS.loader.exec_module(os2)
> sys.modules['os2'] = os2
> del SPEC_OS
> 
> assert os1 is not os2, \
>     "Module `os` instancing failed" 
> ```

在这里，我们两次导入相同的模块，但作为完全不同的模块对象。如果您检查 sys.modules，您可以看到您输入的两个名称作为 load_module 调用的第一个参数。查看[文档](http://docs.python.org/library/imp.html)以了解详细信息。

**更新：**

为了使这种方法的主要区别显而易见，我想让这一点更清楚：当您以这种方式导入相同的模块时，您将在运行时导入的每个其他模块都可以全局访问这两个版本，这正是提问者所需要的我明白了。

下面是另一个例子来强调这一点。

这两个语句的作用完全相同：

```
import my_socket_module as socket_imported

socket_imported = imp.load_module('my_socket_module',
    *imp.find_module('my_socket_module')
) 
```

在第二行，我们重复 'my_socket_module' 字符串两次，这就是 import 语句的工作方式；但实际上，这两个字符串的使用有两个不同的原因。

当我们将它传递给 find_module 时，第二次出现用作将在系统上找到的文件名。当我们将字符串传递给 load_module 方法时，第一次出现的字符串用作*已加载模块的系统范围标识符*。

因此，我们可以为它们使用不同的名称，这意味着我们可以让它像我们复制模块的 python 源文件并加载它一样工作。

```
socket = imp.load_module('socket_original', *imp.find_module('my_socket_module'))
socket_monkey = imp.load_module('socket_patched',*imp.find_module('my_socket_module'))

def alternative_implementation(blah, blah):
    return 'Happiness'

socket_monkey.original_function = alternative_implementation

import my_sub_module 
```

然后在 my_sub_module 中，我可以导入系统上不存在的“socket_patched”！我们在 my_sub_module.py 中。

```
import socket_patched
socket_patched.original_function('foo', 'bar')
# This call brings us 'Happiness' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-26T02:19:23.877

这很恶心，但这可能就足够了：

```
import sys

# if socket was already imported, get rid of it and save a copy
save = sys.modules.pop('socket', None)

# import socket again (it's not in sys.modules, so it will be reimported)
import socket as mysock

if save is None:
    # if we didn't have a saved copy, remove my version of 'socket'
    del sys.modules['socket']
else:
    # if we did have a saved copy overwrite my socket with the original
    sys.modules['socket'] = save 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-23T21:18:28.100

下面是一些使用旧模块的函数和变量创建新模块的代码：

```
def copymodule(old):
    new = type(old)(old.__name__, old.__doc__)
    new.__dict__.update(old.__dict__)
    return new 
```

请注意，这对模块进行了相当浅的复制。字典是新创建的，所以基本的猴子补丁可以工作，但原始模块中的任何可变变量都将在两者之间共享。

编辑：根据评论，需要深拷贝。我尝试对模块进行猴子修补`copy`以支持模块的深层副本，但这没有用。接下来我尝试导入模块两次，但由于模块缓存在 中`sys.modules`，这给了我两次相同的模块。最后，我遇到的解决方案是`sys.modules`在第一次导入后删除模块，然后再次导入。

```
from imp import find_module, load_module
from sys import modules

def loadtwice(name, path=None):
    """Import two copies of a module.

    The name and path arguments are as for `find_module` in the `imp` module.
    Note that future imports of the module will return the same object as
    the second of the two returned by this function.
    """
    startingmods = modules.copy()
    foundmod = find_module(name, path)
    mod1 = load_module(name, *foundmod)
    newmods = set(modules) - set(startingmods)
    for m in newmods:
        del modules[m]
    mod2 = load_module(name, *foundmod)
    return mod1, mod2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T17:34:36.457

将套接字模块物理复制到 socket_monkey 并从那里开始？我觉得你不需要任何“聪明”的解决方法......但我可能会过度简化！

# binary - erlang 二进制变量

> ID：11170950
> 
> 赞同：1
> 
> 时间：2012-06-23T15:59:41.050
> 
> 标签：binary, erlang

我想在 <<>> 中为二进制使用变量，如下所示：

```
(emacs@yus-iMac.local)56> Message = "aaa".
"aaa"
(emacs@yus-iMac.local)57> C = <<Message>>.
** exception error: bad argument

(emacs@yus-iMac.local)58> C = <<"aaa">>.
<<"aaa">> 
```

第一个是错误，第二个是好的。为什么？也许愚蠢的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:19:15.930

您将不得不使用[list_to_binary/1](http://www.erlang.org/doc/man/erlang.html#list_to_binary-1)。喜欢：

```
1> Message = "aaa".
"aaa"
2> C = list_to_binary(Message).
<<"aaa">> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T21:14:38.327

`<<"aaa">>`是语法糖，`<<$a,$a,$a>>`因为不支持直接将列表转换为位语法中的二进制。

# webgl - ThreeJS正交相机：将场景的大小调整为窗口

> ID：11170952
> 
> 赞同：2
> 
> 时间：2012-06-23T15:59:55.943
> 
> 标签：webgl, three.js

在 ThreeJS 中，我使用的是 OrthographicCamera，因为我有几个对象应该从前面显示，没有任何透视失真。这适用于一个问题：我创建的一堆对象应该总是大致填满屏幕，但不能太小或太大。使用例如

```
var factor = 4.5;
this.camera = new THREE.OrthographicCamera(-window.innerWidth / factor, window.innerWidth / factor, window.innerHeight / factor, -window.innerHeight / factor, 1, 1000); 
```

...我可以让它在 1920x1080 像素分辨率下正常运行，但是当我将窗口大小调整为更小并重新加载页面时，对象将开始变得太大，因为它们的行为就像它们是固定的一样。（当使用带透视的 CombinedCamera 时，调整大小是动态的并且效果很好。）如何使用 OrthographicCamera 解决这个问题？或者有什么技巧可以让我在 CombinedCamera 中关闭透视？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T02:35:22.490

我不确定这是否有助于解决您的特定问题。我不确定这是否正确，或者是否有更好或更标准的方法来处理这个问题。但到目前为止，这是我在正交代码中使用的。它无论如何都不是完美的，但你可以尝试一下。回帖，让我知道你是否有更好的办法。

```
 $(window).on('resize', function () {
            // notify the renderer of the size change
            renderer.setSize(window.innerWidth, window.innerHeight);
            // update the camera
            camera.left = -window.innerWidth / camFactor;
            camera.right = window.innerWidth / camFactor;
            camera.top = window.innerHeight / camFactor;
            camera.bottom = -window.innerHeight / camFactor;
            camera.updateProjectionMatrix();
        }); 
```

# maven - Maven 缺少工件 com.sun.jndi.ldap。怎么了？

> ID：11170966
> 
> 赞同：3
> 
> 时间：2012-06-23T16:01:57.270
> 
> 标签：maven, artifact

如何使用 maven 修复缺少的工件错误`com.sun.jndi.ldap`？由于奇怪的二进制许可，我还尝试添加 java 存储库。这是我的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>ActiveDirectory</groupId>
  <artifactId>my.activedirectory</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>my.activedirectory</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <repositories>
    <repository>
      <id>java.net</id>
      <url>http://download.java.net/maven/2/</url>
      <releases>
        <enabled>true</enabled>
      </releases>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
    </repository>
  </repositories>

  <pluginRepositories>
    <pluginRepository>
      <id>java.net</id>
      <url>http://download.java.net/maven/2/</url>
      <releases>
        <enabled>true</enabled>
      </releases>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
    </pluginRepository>
  </pluginRepositories>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>net.java.dev.swing-layout</groupId>
      <artifactId>swing-layout</artifactId>
      <version>1.0.2</version>
    </dependency>
    <dependency>
      <groupId>com.sun.jndi</groupId>
      <artifactId>ldap</artifactId>
      <version>1.2.4</version>
    </dependency>
  </dependencies>
</project> 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-02T19:52:36.220

我在使用 Maven 查找 Jndi jar 时遇到了类似的情况。Maven Central repo 不再有这个 jar。

You can download these jars from Oracle Archive @[http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-plat-419418.html](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-plat-419418.html)

and then install it into your local repository. This will solve the problem.

```
mvn install:install-file -DgroupId=javax.naming -DartifactId=jndi -Dversion=1.2.1 -Dpackaging=jar -Dfile=jndi-1_2_1.jar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T17:51:20.017

如果在您指向的存储库中找不到您要查找的 jar，则会发生缺少工件异常。恐怕您所指的这个 jar 或其最新版本在[http://download.java.net/maven/2](http://download.java.net/maven/2)存储库中不可用。

尝试 jBoss 存储库或 mavens 中央存储库

```
<repository>
  <id>jboss-maven2</id>
  <name>JBoss Repository</name>
  <url>http://repository.jboss.com/maven2</url>
</repository> 
```

或者

```
<repository>
  <snapshots>
    <enabled>false</enabled>
  </snapshots>
  <id>central</id>
  <name>Maven Repository Switchboard</name>
  <url>http://repo1.maven.org/maven2</url>
</repository> 
```

# android - 在 Android 中静态创建 2X2 图像视图的网格视图

> ID：11170967
> 
> 赞同：2
> 
> 时间：2012-06-23T16:02:01.563
> 
> 标签：android, gridview, imageview

我正在尝试创建一个以 2x2 形式包含 4 个 imageView 的视图。这就是我的想法：

```
<?xml version="1.0" encoding="utf-8"?>
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:columnCount="2">

    <ImageView 
        android:id="@+id/pic1" 
        android:layout_row="0"
        android:layout_column="0"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:paddingRight="4dip" />
    <ImageView 
        android:id="@+id/pic2" 
        android:layout_row="1"
        android:layout_column="0"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
    <ImageView 
        android:id="@+id/pic3" 
        android:layout_row="0"
        android:layout_column="1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>
    <ImageView 
        android:id="@+id/pic4" 
        android:layout_row="1"
        android:layout_column="1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</GridLayout> 
```

这似乎不起作用，就像我跑步时一样

```
setContentView(R.layout.grid_view) 
```

我收到此错误：

```
Binary XML file line #2: Error inflating class GridLayout 
```

有谁知道为什么会这样？我尝试按照[http://android-developers.blogspot.co.il/2011/11/new-layout-widgets-space-and-gridlayout.html](http://android-developers.blogspot.co.il/2011/11/new-layout-widgets-space-and-gridlayout.html)上的说明进行操作，但这并没有太大帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:05:24.373

您的 XML 文件第 5 行有错误

```
android:layout_height="match_parent"" 
```

属性值以`""`代替结尾`"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T16:11:36.827

您应该使用网格视图，但您使用的是 GridLayout。试试这篇博文： [http ://www.java-samples.com/showtutorial.php?tutorialid=1518](http://www.java-samples.com/showtutorial.php?tutorialid=1518)

顺便问一下，你在哪里`R.id.grid_view`？我在您的 xml 中没有看到任何类似 grid_view 的名称。

# google-app-engine - App Engine 启动器和 Django

> ID：11170968
> 
> 赞同：0
> 
> 时间：2012-06-23T16:02:04.397
> 
> 标签：google-app-engine

我在 Google App Engine 上运行了一个用 Python 开发并使用 Django 模板数据显示的 APP。我使用 Launcher 进行测试和部署。我没有使用像 {% url etc etc %} 这样的 Django 动词。一切都很好。

我现在需要在基于 Django 并使用更多 Django 动词的 Google App Engine 上的现有 APP 上做一些工作。

它无法在 Launcher 上运行。

我读到你使用了类似 manage.py runserver 的东西，我认为 Launcher 无法支持我在这个上的开发测试。有没有办法让Launcher可以？

我不太确定我要使用什么环境进行测试？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:09:28.980

我找到了答案，您将 #coding: utf-8 行添加到所有 Python 程序，包括 helper.py。您必须为 Google Launcher 使用最新或更高版本的 1.6。

# windows - 使用相同的套接字从服务器获取响应？

> ID：11170973
> 
> 赞同：0
> 
> 时间：2012-06-23T16:02:35.603
> 
> 标签：windows, winapi, sockets

我正在编写一个带有客户端和服务器的小型应用程序 - 客户端发送一个问题，服务器回答。

我设法完成了第一部分 - 服务器从客户端获取问题，做一些工作并发回答案。我只是不知道如何告诉客户端等待服务器的响应。

这是我的客户代码：

```
char* ipAddress = (char*)malloc(15);
wcstombs(ipAddress, (TCHAR*)argv[1], 15);
DWORD port = wcstod(argv[2], _T('\0'));
DWORD numOfThreads = wcstod(argv[3], _T('\0;'));
DWORD method = wcstod(argv[4], _T('\0;'));

//initialize windows sockets service
WSADATA wsaData;
int iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
assert(iResult==NO_ERROR);

//prepare server address
sockaddr_in server_addr;
server_addr.sin_family = AF_INET;
server_addr.sin_addr.s_addr = inet_addr(ipAddress);
server_addr.sin_port = htons(port);

//create socket
SOCKET hClientSocket= socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
assert(hClientSocket!=INVALID_SOCKET);

//connect to server
int nRes=connect(hClientSocket, (SOCKADDR*)&server_addr, sizeof(server_addr));
assert(nRes!=SOCKET_ERROR);

char* buf = "GET /count.htm HTTP/1.1\r\nHost: 127.0.0.1:666\r\nAccept: text/html,application/xhtml+xml\r\nAccept-Language: en-us\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: Mozilla/5.0\r\n\r\n";

int nBytesToSend= strlen(buf);
int iPos=0;

while(nBytesToSend)
{
    int nSent=send(hClientSocket,buf,nBytesToSend,0);
    assert(nSent!=SOCKET_ERROR);

    nBytesToSend-=nSent;
    iPos+=nSent;
}

closesocket(hClientSocket);

int nLen = sizeof(server_addr);
SOCKET hRecvSocket=accept(hClientSocket,(SOCKADDR*)&server_addr, &nLen);
assert(hRecvSocket!=INVALID_SOCKET);

//prepare buffer for incoming data
char serverBuff[256];
int nLeft=sizeof(serverBuff);
iPos=0;

do //loop till there are no more data
{
    int nNumBytes=recv(hRecvSocket,serverBuff+iPos,nLeft,0);

    //check if cleint closed connection
    if(!nNumBytes)
        break;

    assert(nNumBytes!=SOCKET_ERROR);

    //update free space and pointer to next byte
    nLeft-=nNumBytes;
    iPos+=nNumBytes;

}while(1); 
```

行后的断言`SOCKET hRecvSocket=accept(hClientSocket,(SOCKADDR*)&server_addr, &nLen);`失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:57:27.370

“发送”循环之后的 closesocket 和接受调用 - 删除这些调用。accept 用于侦听传入连接的服务器，而不是用于已连接的客户端。

在你的 send() 循环完成后，直接进入你的 recv() 循环。那应该可以解决您的直接问题：

此外，您的发送循环忘记在缓冲区上引用 iPos，就像我认为您想要的那样。这就是你想要的：

```
int nSent=send(hClientSocket,buf+iPos,nBytesToSend,0); 
```

在网络编程中，套接字会因为你无法控制的网络状况而失败。因此，网络调用上的“断言”并不总是合适的。最好只是期待失败并准备好处理它。通常，关闭套接字和活动连接是处理大多数错误的方法。

# objective-c - 旋转时如何将 UIButton 动态重新定位为 UIImageView 的子视图

> ID：11170976
> 
> 赞同：5
> 
> 时间：2012-06-23T16:02:56.740
> 
> 标签：objective-c, xcode, ipad, ios5

我正在开发一款 iPad 应用程序，它可以让你在智能房屋的原型中控制不同的东西。例如，它可以让您打开和关闭灯。为此，我制作了一个`UIImageView`显示房子的平面图并添加`UIButtons`为每个可以切换的灯的子视图。

![在此处输入图像描述](../Images/32ccf5cb6b375d993bdef36830398d3b.png)

`setFrame`如您所见，使用each 的方法将按钮完美地放置在平面图上`UIButton`。但是，当我将 iPad 旋转到纵向时，会发生以下情况：

![在此处输入图像描述](../Images/1e992ca6df2daf0eaa8134a591c4a31a.png)

这些按钮显然仍然具有相同的来源，但它与图像的重新定位无关。

平面图图像具有以下支柱和弹簧设置：

![在此处输入图像描述](../Images/f932682e42aacd00653a46bfe07c6902.png)

并将其内容模式设置为`Aspect Fit`.

## 我的问题是

如何动态重新定位每个`UIButton`，使其具有相同的相对位置。我想我必须在`{did/should}AutorotateToInterfaceOrientation`委托方法中处理这个问题。

应该注意的`UIImageView`是，它是可缩放的，为了解决这个问题，我实现了`scrollViewDidZoom`委托方法，如下所示：

```
for (UIView *button in _floorPlanImage.subviews) {       
    CGRect oldFrame = button.frame;
    [button.layer setAnchorPoint:CGPointMake(0.5, 1)];
    button.frame = oldFrame;
    button.transform = CGAffineTransformMakeScale(1.0/scrollView.zoomScale, 1.0/scrollView.zoomScale);
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:55:42.390

我发现布局子视图的最佳方法是在`- (void) layoutSubviews`方法中。您必须继承您的 UIImageView 并覆盖该方法。

每当你的框架发生变化时，这个方法就会自动被调用，并且在你的视图第一次出现时也会被调用。

如果你把你所有的布局代码放在这个方法中，它可以防止布局碎片和重复，将你的视图代码保留在你的视图中，并且大多数事情都默认工作。

# android - 如何将网页中的文本导入文本视图？

> ID：11170977
> 
> 赞同：0
> 
> 时间：2012-06-23T16:02:57.807
> 
> 标签：android, android-layout

如何从基本 HTML 页面获取文本并将其显示在 TextView 中。

我想这样做，因为它看起来比让 webview 显示文本更好。

html页面上只有一行。如果需要，我可以将其更改为 txt 文件。

你也可以提供一个简单的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:14:54.243

您需要首先使用[`HttpClient`](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)从 Internet 检索数据之类的方法下载 HTML（假设您需要从 Internet 而不是本地文件获取它）。完成此操作后，您可以像您说的那样在 WebView 中显示 HTML，或者，如果 HTML 并不复杂并且只包含一些基本标签（`<a>`、`<img>`、`<strong>`、`<em>`、`<br>`、`<p>`等），您可以通过它直奔主题，`TextView`因为它支持一些基本的 HTML 显示。

为此，您只需调用[`Html.fromHtml`](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)，并将下载的 HTML 字符串传递给它。例如：

```
TextView tv = (TextView) findViewById(R.id.MyTextview);
tv.setText(Html.fromHtml(myHtmlString)); 
```

该`fromHtml`方法将解析 HTML 并应用一些基本格式，返回一个[`Spannable`](http://developer.android.com/reference/android/text/Spannable.html)对象，然后可以直接将其传递给`TextView`'s`setText`方法。它甚至支持链接和图像标签（不过，对于图像，您需要实现一个[`ImageGetter`](http://developer.android.com/reference/android/text/Html.ImageGetter.html)以实际提供相应的 Drawable）。但我不相信它支持 CSS 或内联样式。

## 如何下载 HTML：

上面代码片段中的 myHtmlString 需要包含实际的 HTML 标记，当然您必须从某个地方获得。您可以使用 HttpClient 执行此操作。

```
private String getHtml(String url)
{
    HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet(url);
    try
    {
        HttpResponse response = client.execute(request);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        String line;
        StringBuilder builder = new StringBuilder();
        while((line = reader.readLine()) != null) {
            builder.append(line + '\n');
        }
        return builder.toString();
    }
    catch(Exception e)
    {
        //Handle exception (no data connectivity, 404, etc)
        return "Error: " + e.toString();
    }
} 
```

然而，仅使用该代码是不够的，因为它实际上应该在单独的线程上完成（事实上，Android 可能完全拒绝在 UI 线程上建立网络连接。请查看 AsyncTasks 以获取更多信息. 你可以[在这里](http://developer.android.com/guide/components/processes-and-threads.html#WorkerThreads)找到一些文档（向下滚动到“使用 Asynctask”）。

# c++ - 重写 C++ 代码以使用包装类指针而不是原始指针

> ID：11170979
> 
> 赞同：0
> 
> 时间：2012-06-23T16:03:14.917
> 
> 标签：c++, pointers, rewrite, wrapper

在一个开始的项目中，我会开始使用我自己的包装类指针而不是原始指针。我的想法是重写将“Object *a”等声明转换为“MyPointerObject a”的现有代码，但这种重写似乎并不简单。

执行此操作的最简单方法是什么？

我看过 clang、elsa、gccxml 和 doxygen，但这些工具似乎都不够简单或功能强大，无法胜任我的任务。

# javascript - 如何创建 Facebook 时间线样式的日期滚动条？

> ID：11170985
> 
> 赞同：1
> 
> 时间：2012-06-23T16:03:32.920
> 
> 标签：javascript, jquery

我正在尝试复制 Facebook 时间线日期选择器/页面滚动器的功能。这可以在 Facebook 时间线页面的右上角看到。当您使用动画效果选择年份时，页面会向下滚动时间线到该特定年份。这是我一直试图为我工作的代码：

```
 <script type="text/javascript">

    $(document).ready(function(){

        $("ul a").click(function(event){
              if($(this).hasClass("fourthlink")){
                        // get the coordinates of the fourth div
            var offset = $("#sect4").offset();
                        // alert the y coordinate; I'm getting the right coordinate: 1062 
            alert(offset.top);
                        // Here's where I'm trying to move the page to the right spot
                window.moveTo(offset.left,offset.top);
                        // I've also tired window.scrollTo(offset.left,offset.top);
            }
        })

    });
</script> 
```

我要做的第一件事就是让寡妇滚动到正确的 div。然后，我想添加一个类似于 Facebook 的动画效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:06:17.890

请将您的代码更正为：

```
$(document).ready(function(){
    $("ul a").click(function(event){
          if($(this).hasClass("fourthlink")){
                    // get the coordinates of the fourth div
        var offset = $("#sect4").offset();
                    // alert the y coordinate; I'm getting the right coordinate: 1062 
        alert(offset.top);
                    // Here's where I'm trying to move the page to the right spot
            window.scrollTo(offset.left,offset.top);
                    // I've also tired window.scorllTo(offset.left,offset.top);
        }
    })
}); 
```

您必须替换：`window.moveTo()`到`window.scrollTo()`. 或者如果这不起作用，试试这个：

```
$("html, body").animate({
    top: offset.top,
    left: offset.left
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T23:38:43.083

在做了更多的研究并使用了一些不同的搜索词之后，我偶然发现了一个[简单的插件](http://djpate.com/2011/01/01/animated-scrollto-effect-jquery-plugin/)可以解决我的问题，所以我想我会分享它。

# c - 为 c 创建一个测试程序？

> ID：11170988
> 
> 赞同：0
> 
> 时间：2012-06-23T16:04:20.610
> 
> 标签：c, testing, executable

我必须为 C 项目 (codetester.c) 创建一个测试程序。用户通过执行以下命令调用程序：

代码测试器

或者

代码测试器文件名

如何设置我的项目以便可以执行这些命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:09:08.170

定义您的主要功能，例如

```
int main(int argc, char *argv[]); 
```

`argc`保存参数的数量，对于“codetester 文件名”，这将是 2。 `argv`保存一个字符序列数组；`argv[0]`将是“codetester”，`argv[1]`将是“文件名”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T16:09:13.293

命令行参数通过`argv`和传递`argc`。它们是主函数中的参数。所以一个例子是：

```
int main(int argc, char **argv) {
    if (argc > 1) { //The program name is argv[0]
        printf("We got a filename: %s\n", argv[1]);
    } else {
        printf("We did not get a filename\n");
    }
} 
```

# java - 带有编译的 ubuntu jar 的 Windows 7 中的“找不到或加载主类”错误

> ID：11170991
> 
> 赞同：0
> 
> 时间：2012-06-23T16:04:42.013
> 
> 标签：java, linux, netbeans

我在具有 java 版本的 ubuntu 机器上使用 netbeans 7.1.2 编译了一个简单的 Swing 应用程序：

> java version "1.6.0_22" OpenJDK Runtime Environment (IcedTea6 1.10.4) (6b22-1.10.4-0ubuntu1~11.04.1) OpenJDK Server VM (build 20.0-b11, mixed mode)

当我在 linux 中使用“java -jar filename.jar”的 shell 时，jar 效果很好，但在 java 版本 1.7.05 的 windows 7 中，我得到：“错误：找不到或加载主类”

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T16:20:24.793

当您没有`.`在类路径中包含当前目录 ( ) 时，通常会出现此错误。

如果您在启动程序时指定了任何外部库，那么您可能会执行类似`java -jar -classpath dir/library.jar program.jar`. 相反，添加`.`到类路径：`java -jar -classpath .;dir/library.jar program.jar`

其他可能性是：

*   你没有在 JAR 中包含 Manifest
*   在您确实包含的清单中，您没有指定哪个是主类，或者您做错了。

# multithreading - 如何在 openmp 的并行部分中调用的子例程中保持变量私有？

> ID：11170994
> 
> 赞同：4
> 
> 时间：2012-06-23T16:05:01.383
> 
> 标签：multithreading, fortran, openmp, private

我正在调用嵌套的 for 循环，如下所示：

```
do ir = 1,Nr
    do iom = iom1, iom2
       xyz(1) = xo(1) + xom(iom)*r
       xyz(2) = xo(2) + yom(iom)*r
       xyz(3) = xo(3) + zom(iom)*r
       call FUNSUB(xyz,Nprop,PropXYZ)
    enddo
enddo 
```

where`FUNSUB`以下列方式评估属性：

```
id = 1
do l=0,lmax
    do m=-l,l
        id = id + 1
        Prop(id) = RHO * Ylm(l,m,xl(1),xl(2),xl(3))
    enddo
enddo 
```

现在我正在尝试将其与某种形式并行化

```
!$OMP parallel do reduction(+:Prop) private(ir, l, m, j, iom, r, wrad, xyz, PropOm, PropOm1, PropXYZ) 
```

为简洁起见，我的示例代码中省略了此处看到的其他一些私有变量。我有意尝试将其设为`l`私有`m`，以便在`FUNSUB`循环内部独立评估属性。但是，我发现它们在线程之间共享。我已经放入了一些调试选项，发现它`id`不断超出.`Prop``l``lmax``m``(-l,l)`

我的问题是：我如何确保它保持私密而不`l`与`m`主程序共享？似乎问题在于，它是一个完全不同的子例程，它保存这些值，并且不知何故，这些变量的私有声明不会延续

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:30:36.490

我认为您的问题是在 Fortran 中，[局部子程序变量可以是静态](https://stackoverflow.com/questions/2582409/are-local-variables-in-fortran-77-static-or-stack-dynamic)的，`!$OMP`并且不会传播到被调用的函数。

如果您将代码复制粘贴`FUNSUB`到调用循环中，即如果您手动内联它，您的代码应该可以按预期工作。

**更新**

在阅读了一些关于编译器可能会或可能不会实现局部变量的疯狂之后，我想你最好的选择是声明`FUNSUB`为`RECURSIVE`. 这会将所有局部变量强制到堆栈上，这意味着调用的每个 OpenMP 线程都`FUNSUB`将拥有自己的一组私有的局部变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T19:21:27.003

必须调查 FUNSUB 的完整代码。在 OpenMP 区域中正确使用外部函数应该不是问题。应该没有理由，也不可能将外部函数范围内的变量声明为私有的。

如果您不告诉它这样做，现代 Fortran 编译器将不会创建函数静态的局部变量。这可以使用编译器开关（并行代码中的大 NO NO）或通过将变量声明为已保存的 SAVE 来完成。请注意，所有初始化的变量都是隐式保存的。这意味着：

```
 integer :: local = 0 
```

即使没有 SAVE 关键字也是 SAVE 并将在线程之间共享。

将所有并行调用的函数声明为`PURE`. 我什至至少有效地拥有所有非递归函数`PURE`。

# windows - 在 createwindow GetLastError 返回代码 126 之后，但 windows 是在 win7 vc express 中创建的

> ID：11170997
> 
> 赞同：0
> 
> 时间：2012-06-23T16:05:54.520
> 
> 标签：windows, winapi, getlasterror

我在win7 pc中使用VC 2010，在创建窗口的WNDCLASSEX结构上创建窗口设置lpszMenuName = 0时出现错误126，但得到GetLastError代码可能是我刚刚使用向导创建的项目和如果我将 lpszMenuName 设置为 0，它会生成相同的代码来创建带有菜单的简单窗口。

```
 #include "stdafx.h"
    #include "simple.h"
    #define MAX_LOADSTRING 100
    // Global Variables:
    HINSTANCE hInst;                    // current instance
    TCHAR szTitle[MAX_LOADSTRING];              // The title bar text
    TCHAR szWindowClass[MAX_LOADSTRING];            // the main window class name

    // Forward declarations of functions included in this code module:
    ATOM                MyRegisterClass(HINSTANCE hInstance);
    BOOL                InitInstance(HINSTANCE, int);
    LRESULT CALLBACK    WndProc(HWND, UINT, WPARAM, LPARAM);
    INT_PTR CALLBACK    About(HWND, UINT, WPARAM, LPARAM);

    int APIENTRY _tWinMain(HINSTANCE hInstance,
                         HINSTANCE hPrevInstance,
                         LPTSTR    lpCmdLine,
                         int       nCmdShow)
    {

        UNREFERENCED_PARAMETER(hPrevInstance);
        UNREFERENCED_PARAMETER(lpCmdLine);

        // TODO: Place code here.

            MSG msg;
            HACCEL hAccelTable;

            // Initialize global strings
            LoadString(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING);
            LoadString(hInstance, IDC_SIMPLE, szWindowClass, MAX_LOADSTRING);
            MyRegisterClass(hInstance);

            // Perform application initialization:
            if (!InitInstance (hInstance, nCmdShow))
            {
                return FALSE;
            }

            hAccelTable = LoadAccelerators(hInstance, MAKEINTRESOURCE(IDC_SIMPLE));

            // Main message loop:
            while (GetMessage(&msg, NULL, 0, 0))
            {
                if (!TranslateAccelerator(msg.hwnd, hAccelTable, &msg))
                {
                    TranslateMessage(&msg);
                    DispatchMessage(&msg);
                }
            }

            return (int) msg.wParam;

    } 
```

在这个函数中注册窗口时我设置了 wcex.lpszMenuName = 0

```
 ATOM MyRegisterClass(HINSTANCE hInstance)
    {
        WNDCLASSEX wcex;

        wcex.cbSize = sizeof(WNDCLASSEX);

        wcex.style          = CS_HREDRAW | CS_VREDRAW;
        wcex.lpfnWndProc    = WndProc;
        wcex.cbClsExtra     = 0;
        wcex.cbWndExtra     = 0;
        wcex.hInstance      = hInstance;
        wcex.hIcon          = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_SIMPLE));
        wcex.hCursor        = LoadCursor(NULL, IDC_ARROW);
        wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);
        wcex.lpszMenuName   = 0;
        wcex.lpszClassName  = szWindowClass;
        wcex.hIconSm        = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_SMALL));

        return RegisterClassEx(&wcex);
    } 
```

在这个函数中，我写了 GetLastError() 来测试错误

```
 BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)
    {
       HWND hWnd;

       hInst = hInstance; // Store instance handle in our global variable

       hWnd = CreateWindow(szWindowClass, szTitle, WS_OVERLAPPEDWINDOW,
          CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, NULL, NULL, hInstance, NULL);
       DWORD eNum = GetLastError( );
       if(eNum){
           ::MessageBox(hWnd, L"Error after creating windows", L"who cares",  MB_OK | MB_ICONINFORMATION);
       }
       if (!hWnd)
       {
          return FALSE;
       }

       ShowWindow(hWnd, nCmdShow);
       UpdateWindow(hWnd);

       return TRUE;
    } 
```

```
 LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
    {
        int wmId, wmEvent;
        PAINTSTRUCT ps;
        HDC hdc;

        switch (message)
        {
        case WM_COMMAND:
            wmId    = LOWORD(wParam);
            wmEvent = HIWORD(wParam);
            // Parse the menu selections:
            switch (wmId)
            {
            case IDM_ABOUT:
                DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);
                break;
            case IDM_EXIT:
                DestroyWindow(hWnd);
                break;
            default:
                return DefWindowProc(hWnd, message, wParam, lParam);
            }
            break;
        case WM_PAINT:
            hdc = BeginPaint(hWnd, &ps);
            // TODO: Add any drawing code here...
            EndPaint(hWnd, &ps);
            break;
        case WM_DESTROY:
            PostQuitMessage(0);
            break;
        default:
            return DefWindowProc(hWnd, message, wParam, lParam);
        }
        return 0;
    } 
```

```
 // Message handler for about box.
    INT_PTR CALLBACK About(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
    {
        UNREFERENCED_PARAMETER(lParam);
        switch (message)
        {
        case WM_INITDIALOG:
            return (INT_PTR)TRUE;

        case WM_COMMAND:
            if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDCANCEL)
            {
                EndDialog(hDlg, LOWORD(wParam));
                return (INT_PTR)TRUE;
            }
            break;
        }
        return (INT_PTR)FALSE;
    } 
```

如您所见，与向导生成的代码几乎相同，我只设置 wcex.lpszMenuName=0 并添加带有消息框的 GetLastError。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:28:36.857

我只是意识到，如果以管理员身份运行 vc 修复