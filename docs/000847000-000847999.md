# StackOverflow 问答 000847000-000847999

# .net - 调整形状对象的大小

> ID：847002
> 
> 赞同：2
> 
> 时间：2009-05-11T06:52:35.173
> 
> 标签：.net, wpf, xaml

在这个问题中，我谈论了一个星形：[Reuse path object in XAML](https://stackoverflow.com/questions/839843/reuse-path-object-in-xaml)）

```
<Path x:Name="NiceStar" StrokeThickness="10" Stroke="#ff000000" StrokeMiterLimit="1" Data="F1 M 126.578613,11.297852 L 162.373535,83.825684 L 242.412598,95.456055 L 184.495605,151.911133 L 198.167480,231.626953 L 126.578613,193.990234 L 54.988770,231.626953 L 68.661621,151.911133 L 10.744629,95.456055 L 90.783691,83.825684 L 126.578613,11.297852 Z">
    <Path.Fill>
        <RadialGradientBrush MappingMode="Absolute" GradientOrigin="390.395508,448.130371" Center="390.395508,448.130371" RadiusX="113.034821" RadiusY="113.034821">
            <RadialGradientBrush.Transform>
                <MatrixTransform Matrix="1,0,-0,-1,-263.816895,569.592773" />
            </RadialGradientBrush.Transform>
            <GradientStop Offset="0" Color="#ff00ff00"/>
            <GradientStop Offset="1" Color="#ff006736"/>
        </RadialGradientBrush>
    </Path.Fill>
</Path> 
```

现在我想将这颗星调整为非常小的尺寸并将其放置在网格中。当我为此使用 ScaleTransform 时，星形的大小与调整大小之前一样大。这样做的最佳方法是什么，因此调整大小并确保星星不会占用太多空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-11T12:34:50.733

而不是做

```
<Path.RenderTransform>
   <ScaleTransform ScaleX="0.1" ScaleY="0.1"></ScaleTransform>
</Path.RenderTransform> 
```

尝试

```
<Path.LayoutTransform>
   <ScaleTransform ScaleX="0.1" ScaleY="0.1"></ScaleTransform>
</Path.LayoutTransform> 
```

LayoutTransform 在布局传递之前应用变换。

高温高压

# php - 添加许多标记会杀死我的谷歌地图 - 我该怎么做？

> ID：847004
> 
> 赞同：3
> 
> 时间：2009-05-11T06:53:48.073
> 
> 标签：php, google-maps

我又被困在这里了。我有一个包含超过 120 000 个坐标的数据库，我需要将其显示在集成在我的应用程序中的谷歌地图上。事情是这样的，我发现简单地遍历所有坐标并为每个坐标创建一个单独的标记并使用 addOverlay 函数添加它会杀死浏览器。所以这肯定是错误的方法 - 我已经阅读了一些关于集群或缩放级别聚束的内容 - 我确实理解渲染所有标记没有意义，特别是如果它们中的大多数不会被看到地图的非渲染部分，除了我不知道如何让它工作。

我如何在这里解决这个问题。请各位我在这里需要一些帮助:(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-11T07:26:47.007

这里有各种技术的很好的比较[http://www.svennerberg.com/2009/01/handling-large-amounts-of-markers-in-google-maps/](http://www.svennerberg.com/2009/01/handling-large-amounts-of-markers-in-google-maps/)

但是，考虑到您的标记数量，您肯定需要一种仅呈现应在当前视图中看到的标记的技术（假设该数量适中 - 如果没有，链接中有用于做明智事情的技术）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-11T15:33:43.290

如果您确实拥有超过 120,000 个项目，那么任何客户端集群器或管理器都无法正常工作。您将需要在服务器端处理标记。[这里](http://groups.google.com/group/Google-Maps-API/browse_thread/thread/4edb7ccc87a00bb3/701a16af04ed7fb5)有一个很好的讨论，其中一些选项可能对您有所帮助。

**更新：**我之前在 SO 上发布过这个，但[本教程](http://www.appelsiini.net/2008/11/introduction-to-marker-clustering-with-google-maps)描述了 PHP 中的服务器端集群方法。它旨在与静态地图 API 一起使用，但我已经构建了它，以便在视图更改时它会返回聚集标记。它工作得很好，尽管每当视图更改时传输标记会有延迟。不幸的是，我没有尝试过超过 3,000 个标记 - 我不知道它处理 120,000 个标记的效果如何。祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-11T07:10:17.877

我没有专门使用谷歌地图做过任何工作，但很多个月前，我参与了一个为大型电信公司管理移动劳动力的项目。

他们有类似的功能，因为他们有地图，他们可以放大他们分配的工作（机器本地而不是通过网络），我们解决了一个类似的问题，听起来和你的很相似。地图上的兴趣点被称为地标，并由地图上称为地标指针的小标记指示，工作人员可以选择这些标记以获得文本描述。

在最小缩放时，会有过多的地标指针，使地图无用。我们做出了一个命令决定，将地标指针限制为一个较小的数字（400）。为了做到这一点，无论缩放级别如何，地图都被划分为一个 20x20 的矩阵，这给了我们 400 个矩阵元素。

然后，如果一个地标与另一个地标共享相同的矩阵元素，则应用程序将它们组合起来并生成一个带有描述性文本的地标指针，该描述性文本包含该矩阵元素中所有地标的文本。

这样一来，地标指针就不会超过 400 个。随着小兵的放大，地标指针被重新生成，并且地标可能最终出现在不同的矩阵元素中——在这种情况下，它们不再与其他地标结合。

同样，缩小有时会将两个或多个地标合并为一个地标指针。

这听起来像是您试图通过“聚类或缩放级别捆绑”实现的目标，尽管正如我所说，我对谷歌地图本身没有什么经验，所以我不确定这是可能的。但鉴于谷歌的声誉，我怀疑它是。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-11T07:22:10.850

我建议您将诸如此类的标记管理器类[与](http://code.google.com/apis/maps/documentation/reference.html#GMarkerManager)现有代码一起使用。标记管理器类允许您管理数千个标记并优化内存使用。标记管理器有很多种（不止一个），我建议你谷歌一下。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-12-08T19:00:47.833

如果您想快速显示数百甚至数千个标记，这是一个非集群解决方案。您可以结合使用 OverlayView 和 DocumentFragment。

[http://nickjohnson.com/b/google-maps-v3-how-to-quickly-add-many-markers](http://nickjohnson.com/b/google-maps-v3-how-to-quickly-add-many-markers)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-22T13:56:23.670

有一个相当简单的解决方案 - 使用 HTML5 画布，虽然听起来很奇怪，但它是加载多达 10,000 个标记和标签的最快方法，如果它是普通标记，肯定没有浏览器可以处理。不是传统的标记，而是轻型标记。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-08-25T07:17:29.490

试试这个：

[http://googlegeodevelopers.blogspot.com/2009/04/markerclusterer-solution-to-too-many.html](http://googlegeodevelopers.blogspot.com/2009/04/markerclusterer-solution-to-too-many.html)

这是一个老问题，已经得到了很多答案，但 Stackoverflow 更多的是作为参考，我希望这将有助于任何搜索相同问题的人。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-23T05:28:21.037

如果有比 JS 更强大的东西……

好吧，够讽刺了:)。

您是否使用过 Flash Maps API？Kevin Macdonald 成功地使用它来聚类不是 120K 标记，而是 1,000,000 个标记。查看*百万*标记地图： [http ://www.spatialdatabox.com/million-marker-map/million-marker-map.html](http://www.spatialdatabox.com/million-marker-map/million-marker-map.html)

在此解决方案中，地图响应几乎不受影响。如果您有兴趣可以在这里联系他：[http ://www.spatialdatabox.com/sdb-contact-sales.html](http://www.spatialdatabox.com/sdb-contact-sales.html)

# sharepoint - 使用 Exchange 2007 部署 Sharepoint

> ID：847006
> 
> 赞同：0
> 
> 时间：2009-05-11T06:54:36.700
> 
> 标签：sharepoint, sharepoint-2007, exchange-server, exchange-server-2007

我计划部署单服务器 Exchange 2007 配置，并且我还想开始使用 Sharepoint 进行协作 - 建议的部署方案是什么来完成此任务 [Sharepoint 也将在其自己的服务器上运行] 以允许使用 OWA + Sharepoint 站点既可以作为公共资源，也可以作为局域网内外的文档共享等公共空间？

我只是想形象化，但我想做的是：

1) 运行内部 Exchange 2007 服务器

2) 运行内部 Sharepoint 2007 服务器

3）有一个运行Exchange 2007 CAS角色的NAT到外部（用于OWA和Sharepoint访问）的服务器<-但我不太确定是否需要这样做，但是我基本上想公开我的OWA和Sharepoint使用单个 [外部] IP 的服务。

我希望我能说清楚 - 我只是想要一些关于我上面解释的推荐配置的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-13T03:30:43.290

我不清楚几件事。具体来说，当您说您希望允许将 SharePoint 网站用作公共资源以及文档共享的公共空间时，您的意思是什么。

我认为这意味着 2 个场景中的 1 个 (a) 您希望您的内部用户在成功登录到 OWA 后能够访问 SharePoint 文档库。或者

(b) 您希望在某种类型的外联网方案中向公众提供这些站点。

选项 B 提出了很多未解决的问题：身份验证和许可。希望这不是你想做的。

选项 A - 稍微简单一点 - 我只能笼统地说，因为我的经验只是 SP - 这确实（据我了解）更多的是 Exchange 配置问题。我相信您必须让 ISA 服务器参与 OWA 部署。与 SP 的连接非常简单，并且在 TechNet 中有详细记录。

你得到的是访问他们用户有权访问的 SP 站点上的文档库。它不是完整的 SP 站点。但在 90% 的情况下，这就足够了。

我的另一条信息是，为了做到这一点 - 您的最终用户必须通过 IE 访问 OWA。任何其他浏览器都会启动不支持从 OWA 到 SP 的连接的 OWA“精简版”。

如果我走远了，请发布更多详细信息，我们可以再试一次。

# asp.net - Asp.net：调用动态生成按钮的事件处理程序？

> ID：847009
> 
> 赞同：1
> 
> 时间：2009-05-11T06:55:53.140
> 
> 标签：asp.net, dynamic, button, call, event-handling

我已将链接按钮和标签的 enableviewstate 属性设置为 true。还在页面加载事件处理程序中的回发上重新生成相同的按钮。但我无法调用链接按钮的 onclick 事件处理程序。你能告诉我代码有什么问题吗？

公共部分类_默认：System.Web.UI.Page { protected void Page_Load(object sender, EventArgs e) {

```
 List<LinkButton> listOfLinkButton = Session["ListOfLinkButton"] as List<LinkButton>;
        List<Label> listOfLabel = Session["ListOfLabel"] as List<Label>;
        if(listOfLabel!=null && listOfLinkButton!=null)
        {
            for (int i = 0; i < listOfLinkButton.Count; i++)
            {
                PlaceHolder1.Controls.Add(listOfLinkButton[i]);
                PlaceHolder1.Controls.Add(new LiteralControl("<br />"));
                PlaceHolder1.Controls.Add(listOfLabel[i]);
                PlaceHolder1.Controls.Add(new LiteralControl("<br />"));
            }
        }

}

protected void LinkButton_Click(object sender, EventArgs e)
{
    LinkButton linkButton = sender as LinkButton;

    Response.Redirect(linkButton.Attributes["LinkUrl"]);        
}
protected void Button1_Click1(object sender, EventArgs e)
{

    List<LinkButton> listOfLinkButton = new List<LinkButton>();
    List<Label> listOfLabel = new List<Label>();
    Rss rssDocumentObj = RssFileReader.GetRssDocumentData(TextBox1.Text);
    for (int j = 0; j < rssDocumentObj.ListOfChannel.Count; j++)
    {
        LinkButton linkButton = new LinkButton();
        linkButton.ID = "LinkButtonForChannelDynamicInPlaceHolder1Id" + j;
        linkButton.EnableViewState = true;
        linkButton.ForeColor = Color.Blue;
        linkButton.Font.Bold = true;
        linkButton.Font.Size = 18;
        linkButton.Font.Underline = true;
        linkButton.Text = rssDocumentObj.ListOfChannel[j].ChannelTitle.InnerText;
        linkButton.Click += new EventHandler(LinkButton_Click);
        linkButton.Attributes.Add("LinkUrl", rssDocumentObj.ListOfChannel[j].ChannelLink.InnerText);
        linkButton.Attributes.Add("onmouseover", "this.style.color = '#006699'");
        linkButton.Attributes.Add("onmouseout", "this.style.color = '#0000ff'");
        PlaceHolder1.Controls.Add(linkButton);
        listOfLinkButton.Add(linkButton);
        PlaceHolder1.Controls.Add(new LiteralControl("<br />"));
        Label label = new Label();
        label.ID = "LabelForChannelDynamicInPlaceHolder1Id" + j;
        label.EnableViewState = true;
        label.ForeColor = Color.DarkSlateGray;
        label.Text = rssDocumentObj.ListOfChannel[j].ChannelDescription.InnerText;
        PlaceHolder1.Controls.Add(label);
        listOfLabel.Add(label);
        PlaceHolder1.Controls.Add(new LiteralControl("<br />"));

        for (int i = 0; i < rssDocumentObj.ListOfChannel[j].ListOfItem.Count; i++)
        {
            LinkButton linkButtonForItem = new LinkButton();
            linkButtonForItem.ID = "LinkButtonDynamicInPlaceHolder1Id" + j + " " + i;
            linkButtonForItem.EnableViewState = true;
            linkButtonForItem.ForeColor = Color.Blue;
            linkButtonForItem.Font.Bold = true;
            linkButtonForItem.Font.Size = 14;
            linkButtonForItem.Font.Underline = false;
            linkButtonForItem.Text = rssDocumentObj.ListOfChannel[j].ListOfItem[i].ItemTitle.InnerText;
            linkButtonForItem.Click += new EventHandler(LinkButton_Click);
            linkButtonForItem.Attributes.Add("LinkUrl", rssDocumentObj.ListOfChannel[j].ListOfItem[i].ItemLink.InnerText);
            linkButtonForItem.Attributes.Add("onmouseover", "this.style.color = '#006699'");
            linkButtonForItem.Attributes.Add("onmouseout", "this.style.color = '#0000ff'");
            PlaceHolder1.Controls.Add(linkButtonForItem);
            listOfLinkButton.Add(linkButtonForItem);
            PlaceHolder1.Controls.Add(new LiteralControl("<br />"));
            Label labelForItem = new Label();
            labelForItem.ID = "LabelDynamicInPlaceHolder1Id" + i;
            labelForItem.EnableViewState = true;
            labelForItem.ForeColor = Color.DarkGray;
            labelForItem.Text = rssDocumentObj.ListOfChannel[j].ListOfItem[i].ItemDescription.InnerText;
            PlaceHolder1.Controls.Add(labelForItem);
            listOfLabel.Add(labelForItem);
            PlaceHolder1.Controls.Add(new LiteralControl("<br />"));
            Session["ListOfLinkButton"] = listOfLinkButton;
            Session["ListOfLabel"] = listOfLabel;
        }
    }  
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T07:06:08.477

您正在假设该按钮的哪些方面保存在会话中。当您在页面加载期间从会话状态恢复时，请尝试再次将事件添加到按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T09:01:22.093

我通过在从会话中检索到按钮后再次将事件处理程序分配给按钮来获得我的解决方案，但是当它已经分配到存储的会话变量中时，我不明白为什么我需要再次分配它。

# sql - 如何使用任何 sql 表使左外连接成为 UD 函数？

> ID：847012
> 
> 赞同：9
> 
> 时间：2009-05-11T06:57:33.980
> 
> 标签：sql, sql-server, sql-server-2005

我有一张桌子。我有一个用户定义的函数（UDF）。我的 UDF 还给我一张桌子。我需要左外连接我的表和我的 UDF 表。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-11T07:09:02.323

使用 SQL Server 2005 的新 APPLY 子句。APPLY 子句让您将表连接到表值函数。那让你写一个这样的查询：

```
SELECT  C.CustomerID, 
    O.SalesOrderID,
    O.TotalDue
FROM 
    AdventureWorks.Sales.Customer AS C
CROSS APPLY
    AdventureWorks.dbo.fn_GetTopOrders(C.CustomerID, 3) AS O
ORDER BY 
    CustomerID ASC, TotalDue DESC 
```

APPLY 子句就像没有 ON 子句的 JOIN 有两种形式：CROSS 和 OUTER。OUTER APPLY 子句返回左侧的所有行（客户），无论它们是否返回表值函数中的任何行。如果没有返回行，则表值函数返回的列为空。如果表值函数返回行，则 CROSS APPLY 仅从左侧（客户）返回行。

资料来源：[在 SQL Server 2005 中使用 CROSS APPLY](http://www.sqlteam.com/article/using-cross-apply-in-sql-server-2005)

编辑：正如 Lieven 提到的，只有当您需要将值从表传递到 UDF 时，才需要 CROSS APPLY。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-11T07:00:00.467

**编辑**

如果您不需要将参数传递给您的 UDF，您可以简单地将表与您的 UDF 连接起来。如果您需要传递参数，请使用另一个答案中提到的 CROSS APPLY 。

```
SELECT *
FROM dbo.YourTable yt
     LEFT OUTER JOIN dbo.UDF_YourUDF() yd ON yd.YourTableID = yt.YourTableID 
```

# php - 流式传输视频文件？

> ID：847018
> 
> 赞同：2
> 
> 时间：2009-05-11T07:00:41.620
> 
> 标签：php, flash, video, streaming

我需要流式传输一个 flv 文件。流媒体应该看起来像实时流媒体，我应该有一种方法可以更改目标文件。
对不起我的英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-11T07:24:55.463

如果“流式传输”是指“显示 Flash 视频剪辑”，则 flv-streaming 并不是真正的流式传输，而是正常的文件传输，即使文件没有完全下载到客户端，flv 播放器也会开始播放. 时间搜索以标准 HTTP 方式实现，带有文件下载偏移量 - 如果您在时间轴上滚动视频一半但尚未下载，则当前下载（最常见）中止，并以文件大小的偏移量重新*启动/2*字节。

因此，您可以只使用普通的旧[`readfile()`](http://php.net/readfile)文件并使用[`header()`](http://php.net/header). 但是，由于您需要寻找，因此您需要解析 HTTP 请求，而不是`readfile()`使用[`fpassthru()`](http://php.net/fpassthru), 寻找正确的位置。

**tl;dr**：避免在 PHP 端处理这个问题，而是让 Apache（或您选择的 httpd）处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T07:33:50.270

我不太确定你在问什么，但如果你有一堆媒体文件并想在你的网站上使用 Youtube 式媒体播放器播放它们，我建议查看[Flowplayer](http://flowplayer.org/) - 它有一个很棒的 Javascript API这使您可以对播放器执行各种很酷的操作，包括处理播放列表等内容以及以编程方式更改当前视频。

我最近在一个项目中使用它，效果很好。

# .net - 在 GDI+ 转换矩阵中重置比例

> ID：847019
> 
> 赞同：3
> 
> 时间：2009-05-11T07:00:42.493
> 
> 标签：.net, winforms, gdi+, transform, scaling

我正在编写一个函数来在 Windows 窗体应用程序的客户区域中绘制 UI 句柄（旋转、调整大小等）。选择对象时调用该函数。

调用者向我发送一个正确旋转、缩放和平移的 Graphics 对象，以适应更大的事物方案（所选对象具有自己的旋转/平移/缩放，并且 UI 句柄具有相对于所选对象的相对平移和旋转）。现在，我希望我的 UI 句柄大小相同，而不管父级（选定对象）的比例如何。

如何消除/重置转换矩阵中的比例因子？如何在保留宝贵的平移和旋转值的同时重置为 1 的比例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T07:18:17.207

您必须意识到转换的顺序很重要。因此，仅删除比例可能会改变以下翻译的“含义”（例如偏移）。

也许只是记录到目前为止应用的规模（我们称之为这个）并为您的转换`currentscale`添加一个规模。`1/currentscale`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-04T23:56:33.143

[Anti-Grain Geometry](http://www.antigrain.com)使用一种基本方法来确定变换的缩放比例（在 agg_trans_affine.cpp 中找到了实现）。它通过以下方式做到这一点：

1.  计算变换的旋转
2.  复制变换并应用相反的旋转
3.  变换两个已知点并根据结果计算比例

翻译成 C#，这看起来像：

```
Matrix transform = (Matrix)graphics.Transform.Clone();

PointF[] rotationPoints = new PointF[] { new PointF(0, 0), new PointF(1, 0) };
transform.TransformPoints(rotationPoints);

double rotationRadians = Math.Atan2(rotationPoints[1].Y - rotationPoints[0].Y, rotationPoints[1].X - rotationPoints[0].X);
transform.Rotate((float)(-rotationRadians * (180.0 / Math.PI)));

PointF[] scalePoints = new PointF[] { new PointF(0, 0), new PointF(1, 1) };
transform.TransformPoints(scalePoints);

float xScale = scalePoints[1].X - scalePoints[0].X;
float yScale = scalePoints[1].Y - scalePoints[0].Y; 
```

AGG 代码还包含一条警告，指出在某些退化情况下这将无法正常工作，但它可能对您的情况有用。

# iphone - 降低 AudioToolbox 播放的音量

> ID：847027
> 
> 赞同：1
> 
> 时间：2009-05-11T07:06:07.930
> 
> 标签：iphone

如果我在 iPhone 上以最大铃声音量播放我的声音，它可以正常播放但是当我将它降低到一定程度时，ma AudioToolbox 声音正在以相同的音量播放但我的 AVAudioPlayer 声音播放正常。有什么办法可以降低 AudioToolbox 播放的音量...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-08T22:02:00.810

来自：[iPhone 应用程序编程指南](http://developer.apple.com/iphone/library/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AudioandVideoTechnologies/AudioandVideoTechnologies.html#//apple_ref/doc/uid/TP40007072-CH19-SW1 "iPhone 应用程序编程指南")

AudioServicesPlaySystemSound 函数让您可以非常简单地播放短声音文件。简单性带有一些限制。您的声音文件必须是：

*   持续时间少于 30 秒
*   采用线性 PCM 或 IMA4 (IMA/ADPCM)
    格式 打包在 .caf、.aif 或
    .wav 文件中

此外，当您使用 AudioServicesPlaySystemSound 函数时：

*   声音以当前系统音频电平播放，没有可用的电平控制
*   声音立即播放
*   循环和立体定位不可用

# python - Python 相当于 perl 的 dbi/DBD::Proxy 访问？（Perl DBI/DBD::Python 代理）

> ID：847032
> 
> 赞同：0
> 
> 时间：2009-05-11T07:08:27.253
> 
> 标签：python, perl, odbc, dbi

我有一个通过 DBI 模块与现有数据库（数据库类型未知）接口的 Perl 脚本，我想在 WinXP 上的 python 2.6 中访问它。

Perl 代码是：

```
use DBI;
my $DSN = "DBI:Proxy:hostname=some.dot.com;port=12345;dsn=DBI:XXXX:ZZZZZ";
my $dbh = DBI->connect($DSN); 
```

这可以翻译成python等价物吗？

按照（[是否有任何可用的 pywin32 odbc 连接器文档？](https://stackoverflow.com/questions/768250/is-there-any-pywin32-odbc-connector-documentation-available/768352#768352)）的示例，我汇总了以下内容：

```
import odbc
DSN = "DBI:Proxy:hostname=some.dot.com;port=12345;dsn=DBI:XXXX:ZZZZZ"
db = odbc.odbc(DSN) 
```

但我得到了错误：

```
dbi.operation-error: [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified in LOGIN 
```

**更新**

似乎另一个 Perl 模块 DBD::Proxy 正在为处理实际查询的 Perl DBI::ProxyServer（服务器端）实现提供实际接口。

python 可以用于与基于 Perl 的[DBI::ProxyServer](https://metacpan.org/pod/DBI::ProxyServer)接口吗？

[http://metacpan.org/pod/DBD::Proxy](http://metacpan.org/pod/DBD::Proxy)

[http://hell.org.ua/Docs/oreilly/weblinux/dbi/ch08_02.htm](http://hell.org.ua/Docs/oreilly/weblinux/dbi/ch08_02.htm)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-11T08:26:00.497

您的 python 脚本不必是 Perl 脚本的逐行翻译。

为什么不对您要访问的数据库使用 Python [DB-API兼容模块？](http://www.python.org/dev/peps/pep-0249/)对于 MySQL，请使用[MySQLdb](http://mysql-python.sourceforge.net/MySQLdb.html)。对于 PostgreSQL，请使用[PyGreSQL](http://www.pygresql.org/)。

或在 Google 上搜索“YourDatabaseName + python”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T13:13:43.013

[sqlalchemy](http://www.sqlalchemy.org/)很不错。

# gpu - 是否有等效的任务管理器显示 GPU 使用历史记录？

> ID：847035
> 
> 赞同：8
> 
> 时间：2009-05-11T07:11:34.910
> 
> 标签：gpu

是否有应用程序可以显示 GPU 使用历史记录，就像我可以打开任务管理器查看 CPU 使用情况一样？我希望能够看到我的 WPF 应用程序在 GPU 上施加了多少负载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-11T08:47:59.417

1) GPU-Z

2) 里瓦调谐器

3) AMD 催化剂，超速选项卡。

他们都使用 AMD 卡，不确定 NVidia。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-09-22T01:13:11.733

AMD 系统监视器很不错。它为您提供 CPU 和 GPU % 使用率。

# hibernate - 如何更改 Hibernate 日志记录级别？

> ID：847041
> 
> 赞同：16
> 
> 时间：2009-05-11T07:15:35.107
> 
> 标签：hibernate, logging

如何以编程方式更改 Hibernate 日志记录级别？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-11T07:43:17.417

Hibernate 使用[SLF4j](http://slf4j.org/)作为它的日志记录 API。查看此 API，我找不到任何以编程方式调整日志记录级别的方法。

所以在我看来，你必须直接使用底层的运行时日志系统。这取决于您的配置。使用 log4j 时，这将类似于

```
import org.apache.log4j.Logger;
import org.apache.log4j.Level;

...    

Logger log = Logger.getLogger("org.hibernate.SQL");
log.setLevel(Level.DEBUG); 
```

但请记住，以这种方式运行您的代码取决于底层的日志记录实现。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-11T07:47:00.810

您可以使用标准 log4j 功能：

```
Logger.getLogger("org.hibernate").setLevel(Level.<what level you require>); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-01T05:42:56.140

使用 Log4j 功能：

```
import org.apache.log4j.Logger;
import org.apache.log4j.Level;

Logger.getLogger("org.hibernate").setLevel(Level.<what you want>); 
```

# c# - 如何更改富文本框中新添加的文本的颜色

> ID：847047
> 
> 赞同：1
> 
> 时间：2009-05-11T07:16:49.940
> 
> 标签：c#, richtextbox

考虑我使用 C# VS 2005 构建的 Windows 应用程序在富文本框中显示某些内容。现在，当我添加一些新文本时，它应该以不同的颜色显示。即我需要区分以编程方式显示的文本和我在文本框中输入的文本。我怎样才能做到这一点。？

即新插入文本的字体颜色应该与已经显示的文本不同。

PS：以前我使用文本框并将其更改为富文本框，如下面的线程中所述。 [链接文本](https://stackoverflow.com/questions/846907/in-c-how-to-change-colour-of-newly-added-text-in-text-box)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T09:33:34.147

```
private void richTextBox1_KeyPress(object sender, KeyPressEventArgs e)
    {            
        this.richTextBox1.SelectionColor = Color.Red;
    } 
```

键盘插入的文本为红色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T07:38:30.870

IIRC，这有效：

1.  将选择开始索引设置为最后一个字符。
2.  更改选择颜色。
3.  添加新文本。
4.  重置选择颜色。

# visual-studio - 查找安装 Visual Studio 的路径

> ID：847048
> 
> 赞同：3
> 
> 时间：2009-05-11T07:17:28.393
> 
> 标签：visual-studio, vb6

我需要有关如何找到安装 Microsoft Visual Studio 的路径的帮助。我需要在我的程序中使用该路径。必须调用什么函数来获取 Microsoft Visual Studio 的安装路径？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-11T07:22:22.317

根据应用程序，最好询问用户，但这里有一些 C# 代码应该可以解决 VS2008 的问题。

```
RegistryKey regKey = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Microsoft\VisualStudio\9.0\Setup\VS");
string vsInstallationPath = regKey.GetValue("ProductDir").ToString();
regKey.Close(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-11T07:28:45.410

可能可以通过搜索注册表找到它，但由于我想要构建脚本的解决方案，我一直在使用环境变量来执行此操作。

注意要查询的环境变量的名称是特定于版本的。

对于 VS2005，您可以使用 VS80COMNTOOLS

对于 VS2008，您可以使用 VS90COMNTOOLS

如果您在命令提示符处键入 SET VS90COMNTOOLS，您应该会看到：VS90COMNTOOLS=C:\Program Files\Microsoft Visual Studio 9.0\Common7\Tools\

所以上两个文件夹以到达安装路径的根目录。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-05T21:19:11.627

这是了解安装 VS 的文件夹或任何其他程序的最快方法。

打开 VS 代码及其运行时间；打开**Windows 任务管理器**并导航到**详细信息选项卡**。

右键单击现在应该运行的 Code.exe 应用程序，然后选择**打开文件位置**选项：

**Windows 任务管理器**>**详细信息选项卡**> RIGHTCLICK **Code.exe** >**打开文件位置**

[![在此处输入图像描述](https://i.stack.imgur.com/JdNqw.gif)](https://i.stack.imgur.com/JdNqw.gif)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-11T07:23:48.743

从注册表中，HKLM\Software\Microsoft\VisualStudio\9.0\InstallDir for Visual Studio 2008

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-11T07:22:05.733

这是针对 Visual Studio 的某种加载项吗？

因为否则，您需要注意运行您的程序的人实际上可能没有*安装*Visual Studio。

如果*已*安装，您通常可以在注册表中的已知位置找到它，例如`HKCR/Applications/devenv.exe/shell/edit/command`VS2008。

# asp.net-mvc - 为什么 ASP.NET MVC MapRoute 会弹出 Windows 身份验证对话框？

> ID：847052
> 
> 赞同：3
> 
> 时间：2009-05-11T07:20:30.823
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, maproute

这让我很困惑，我认为这可能是微软 MVC 实现中的一个错误。我正在使用 VS2008 SP1 构建一个 MVC 网站。为了锁定我的网站，我将控制器编辑为如下所示：

```
1    public class IdeaController : Controller
2    {
3    [Authorize(Users = "whozmom")] 
4    public ActionResult Index(string zapp, int? page) 
```

我正在使用 ASP.NET 成员身份和表单身份验证。当我将代码发布到主机时，它会弹出一个 Windows 身份验证对话框。我一直在绞尽脑汁想弄清楚我可能做了什么编辑来导致这种情况。我几乎完全重写了我的应用程序，试图解决这个问题，并将其缩小到我的 Global.asax.cs 文件中的一个更改。首先让我向您展示（相关部分）错误版本：

```
1    routes.MapRoute(
2         "Ideas", 
3         "{zapp}/{page}/", 
4         new { controller = "Idea", action = "Index", zapp = "Office", page = "" }
5    );
6    
7    routes.MapRoute(
8         "Default",                                              // Route name
9         "{controller}/{action}/{id}",                           // URL with parameters
10        new { controller = "Idea", action = "Index", id = "" }  // Parameter defaults
11   ); 
```

当我在本地使用这条路线运行我的代码时，我的浏览器只是空白......登录页面永远不会显示。如果我在主机上运行我的应用程序，它会弹出一个 Windows 身份验证对话框。如果我将路由更改为：

```
1    routes.MapRoute(
2         "Ideas", 
3         "Ideas/{zapp}/{page}/", 
4         new { controller = "Idea", action = "Index", zapp = "Office", page = "" }
5    );
6    
7    routes.MapRoute(
8         "Default",                                              // Route name
9         "{controller}/{action}/{id}",                           // URL with parameters
10        new { controller = "Idea", action = "Index", id = "" }  // Parameter defaults
11   ); 
```

一切正常。注意第 3 行的编辑，在我的 URL 字符串前面添加“Ideas/”。谁可以给我解释一下这个？我也可以通过从控制器中删除 Authorize 行（上面的第 3 行）来解决这个问题，但是我当然会失去安全性。

更新：这是我的完整会员部分：

```
<membership>
    <providers>
            <clear />
            <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider,
System.Web, 
Version=2.0.0.0, 
Culture=neutral, 
PublicKeyToken=b03f5f7f11d50a3a" 
connectionStringName="ApplicationServices" 
enablePasswordRetrieval="false" 
enablePasswordReset="true" 
requiresQuestionAndAnswer="false" 
requiresUniqueEmail="false" 
passwordFormat="Hashed" 
maxInvalidPasswordAttempts="5" 
minRequiredPasswordLength="6" 
minRequiredNonalphanumericCharacters="0" 
passwordAttemptWindow="10" 
passwordStrengthRegularExpression="" 
applicationName="/" />
          </providers>
        </membership> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:44:49.907

我似乎很清楚这是由错误配置的路由引起的。您是否正确配置了登录页面的路由？也许试试 Phil Haack 的 RouteDebugger： [RouteDebugger 2.0](http://haacked.com/archive/2011/04/12/routedebugger-2.aspx)

# arrays - 根据数组的维度轻松访问数组

> ID：847060
> 
> 赞同：0
> 
> 时间：2009-05-11T07:22:35.203
> 
> 标签：arrays, actionscript, syntax, multidimensional-array, eval

假设我有一个具有*n*维的数组。现在为了访问您通常使用的插槽：

```
 array [1][0] 
```

如果在编译时不知道维数怎么办，是否有一种简单的访问方式，例如：

```
 slot = "1,0"
 array [slot]   // accessing 1,0 
```

这意味着我也可以轻松地来回导航

```
 slot += ",2"
 array [slot]   // accessing 1,0,2 
```

在 ActionScript 中，有什么方法可以在一行代码中访问 multidim 数组中的任何插槽？我不是在寻找间接执行的替代代码（递归函数或循环）。

在 JavaScript 中，您可以：

```
 slot = "1,0"
 eval("array[" + slot + "]")    // accessing 1,0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T07:30:23.990

AS3 中没有这样的设施。两者都没有`eval`（主要是出于安全原因，IIRC）。后者也是 AS3 与 ECMAScript 规范不同的少数几个领域之一。

# asp.net - SQL Server 错误：“不能使用空对象或列名”

> ID：847063
> 
> 赞同：1
> 
> 时间：2009-05-11T07:23:48.900
> 
> 标签：asp.net, sql-server, subsonic

我收到以下错误：

```
Cannot use empty object or column names. Use a single space if necessary.
Msg 1038, Level 15, State 3, Line 1 
```

查询命令如下所示：

```
SELECT TOP 100 PERCENT
  [].[cms_page].[pa_id], [].[cms_page].[pa_key], 
  [].[cms_page].[pa_title], [].[cms_page].[pa_keywords], 
  [].[cms_page].[pa_description], [].[cms_page].[pa_header], 
  [].[cms_page].[pa_created], [].[cms_page].[pa_modified], 
  [].[cms_page].[pa_language] FROM [cms_page] 
WHERE 
  [cms_page].[pa_key] = @pa_key0 
ORDER BY 
  [pa_id] ASC; 
```

确实很奇怪。为什么会这样？我正在使用 SubSonic 2.1。

连接字符串：

```
<add name="OCDB" connectionString="Network Library=DBMSSOCN;Data Source=127.0.0.1,1433;Initial Catalog=test_db;User ID=test;Password=testpwd"/> 
```

编辑：嗯，解决方案只是简单地生成和重建数据访问层，我很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T08:37:42.413

您似乎使用了一个由 3 部分组成的名称，其中一部分为空，即“[]”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T22:20:22.043

我认为您需要设置 Subsonic 使用的架构。这个线程似乎有一些信息：

[Subsonic - 如何使用 SQL 模式/所有者名称作为命名空间的一部分？](https://stackoverflow.com/questions/755073/subsonic-how-to-use-sql-schema-owner-name-as-part-of-the-namespace)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-11T08:40:36.153

看起来好像查询文本是使用空表架构构建的。

那些空的 [] 方括号应该包含类似“dbo”的内容，以使查询在语法上有效。不过，我对 SubSonic 的了解还不够，无法为您提供代码示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T21:42:03.837

我不熟悉 SubSonic，但您是否尝试过更简单的查询来测试您的语法是否正确？此查询甚至可以在 SQL Server（Management Studio / Query Analyzer）中使用吗？

仅从 SQL Server 的角度来看，您使用的括号太多了。如果我在 SQL Server 中编写该查询，它看起来更像我在下面写的。我不确定变量@pa_key0，这个查询是存储过程的一部分还是运行查询时SunSonic 会替换这个变量？

```
SELECT
  pa_id, 
  pa_key, 
  pa_title, 
  pa_keywords, 
  pa_description,
  pa_header, 
  pa_created,
  pa_modified, 
  pa_language 

FROM 
  cms_page

WHERE 
  pa_key = @pa_key0 

ORDER BY 
  pa_id ASC; 
```

# c# - 按多列分组

> ID：847066
> 
> 赞同：1104
> 
> 时间：2009-05-11T07:24:39.507
> 
> 标签：c#, .net, linq, group-by, aggregate

如何在 LINQ 中对多列进行 GroupBy

SQL中类似的东西：

```
SELECT * FROM <TableName> GROUP BY <Column1>,<Column2> 
```

如何将其转换为 LINQ：

```
QuantityBreakdown
(
    MaterialID int,
    ProductID int,
    Quantity float
)

INSERT INTO @QuantityBreakdown (MaterialID, ProductID, Quantity)
SELECT MaterialID, ProductID, SUM(Quantity)
FROM @Transactions
GROUP BY MaterialID, ProductID 
```

* * *

## 回答 #1

> 赞同：1326
> 
> 时间：2009-05-11T07:37:04.133

使用匿名类型。

例如

```
group x by new { x.Column1, x.Column2 } 
```

* * *

## 回答 #2

> 赞同：861
> 
> 时间：2012-02-07T13:55:24.857

程序样本：

```
.GroupBy(x => new { x.Column1, x.Column2 }) 
```

* * *

## 回答 #3

> 赞同：513
> 
> 时间：2009-05-11T09:50:30.377

好的，这是：

```
var query = (from t in Transactions
             group t by new {t.MaterialID, t.ProductID}
             into grp
                    select new
                    {
                        grp.Key.MaterialID,
                        grp.Key.ProductID,
                        Quantity = grp.Sum(t => t.Quantity)
                    }).ToList(); 
```

* * *

## 回答 #4

> 赞同：177
> 
> 时间：2015-12-30T08:06:46.337

对于按多列分组，请改用此方法...

```
GroupBy(x=> new { x.Column1, x.Column2 }, (key, group) => new 
{ 
  Key1 = key.Column1,
  Key2 = key.Column2,
  Result = group.ToList() 
}); 
```

同样的方式你可以添加 Column3、Column4 等。

* * *

## 回答 #5

> 赞同：47
> 
> 时间：2017-03-14T14:59:39.757

从 C# 7 开始，您还可以使用值元组：

```
group x by (x.Column1, x.Column2) 
```

或者

```
.GroupBy(x => (x.Column1, x.Column2)) 
```

* * *

## 回答 #6

> 赞同：39
> 
> 时间：2019-02-09T10:00:06.737

**使用`Tuples`and**的 C# 7.1 或更高**`Inferred tuple element names`版本（目前它仅适用于`linq to objects`并且在需要表达式树时不受支持，例如`someIQueryable.GroupBy(...)`。Github[问题](https://github.com/dotnet/roslyn/issues/12897)）：**

 **```
// declarative query syntax
var result = 
    from x in inMemoryTable
    group x by (x.Column1, x.Column2) into g
    select (g.Key.Column1, g.Key.Column2, QuantitySum: g.Sum(x => x.Quantity));

// or method syntax
var result2 = inMemoryTable.GroupBy(x => (x.Column1, x.Column2))
    .Select(g => (g.Key.Column1, g.Key.Column2, QuantitySum: g.Sum(x => x.Quantity))); 
```

**C# 3 或更高版本**使用`anonymous types`：

```
// declarative query syntax
var result3 = 
    from x in table
    group x by new { x.Column1, x.Column2 } into g
    select new { g.Key.Column1, g.Key.Column2, QuantitySum = g.Sum(x => x.Quantity) };

// or method syntax
var result4 = table.GroupBy(x => new { x.Column1, x.Column2 })
    .Select(g => 
      new { g.Key.Column1, g.Key.Column2 , QuantitySum= g.Sum(x => x.Quantity) }); 
```

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2015-12-29T20:14:34.003

您还可以使用 Tuple<> 进行强类型分组。

```
from grouping in list.GroupBy(x => new Tuple<string,string,string>(x.Person.LastName,x.Person.FirstName,x.Person.MiddleName))
select new SummaryItem
{
    LastName = grouping.Key.Item1,
    FirstName = grouping.Key.Item2,
    MiddleName = grouping.Key.Item3,
    DayCount = grouping.Count(), 
    AmountBilled = grouping.Sum(x => x.Rate),
} 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2013-11-12T18:26:02.547

虽然这个问题询问的是按类属性分组，但如果您想针对 ADO 对象（如 DataTable）按多列分组，则必须将“新”项分配给变量：

```
EnumerableRowCollection<DataRow> ClientProfiles = CurrentProfiles.AsEnumerable()
                        .Where(x => CheckProfileTypes.Contains(x.Field<object>(ProfileTypeField).ToString()));
// do other stuff, then check for dups...
                    var Dups = ClientProfiles.AsParallel()
                        .GroupBy(x => new { InterfaceID = x.Field<object>(InterfaceField).ToString(), ProfileType = x.Field<object>(ProfileTypeField).ToString() })
                        .Where(z => z.Count() > 1)
                        .Select(z => z); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-05-16T11:26:36.800

```
var Results= query.GroupBy(f => new { /* add members here */  }); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-04-26T20:53:09.390

需要注意的是，您需要为 Lambda 表达式发送对象，并且不能将实例用于类。

例子：

```
public class Key
{
    public string Prop1 { get; set; }

    public string Prop2 { get; set; }
} 
```

这将编译，但**每个周期会生成一个密钥**。

```
var groupedCycles = cycles.GroupBy(x => new Key
{ 
  Prop1 = x.Column1, 
  Prop2 = x.Column2 
}) 
```

如果您不想命名关键属性然后检索它们，您可以这样做。这将`GroupBy`正确地为您提供关键属性。

```
var groupedCycles = cycles.GroupBy(x => new 
{ 
  Prop1 = x.Column1, 
  Prop2= x.Column2 
})

foreach (var groupedCycle in groupedCycles)
{
    var key = new Key();
    key.Prop1 = groupedCycle.Key.Prop1;
    key.Prop2 = groupedCycle.Key.Prop2;
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-05-19T06:41:11.610

```
.GroupBy(x => x.Column1 + " " + x.Column2) 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-10-23T15:14:22.767

将 x 按新 { x.Col, x.Col} 分组

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-12-27T11:36:38.880

`.GroupBy(x => (x.MaterialID, x.ProductID))`

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-05-06T12:05:09.600

对于**VB**和**匿名/lambda**：

```
query.GroupBy(Function(x) New With {Key x.Field1, Key x.Field2, Key x.FieldN }) 
```

# wpf - Silverlight 列表框不会使用新的 itemsource 更新

> ID：847068
> 
> 赞同：0
> 
> 时间：2009-05-11T07:25:24.950
> 
> 标签：wpf, silverlight

我有一个绑定到通用列表的列表框，每当我从通用列表中删除一个项目并将其重新绑定到列表框时，它仍会显示已删除的项目。这是代码：

```
 InventoryList.Remove(currInv);         
            lstSubMenu.ItemsSource = InventoryList;
            lstSubMenu.DisplayMemberPath = "InventoryItemName"; 
```

我检查了通用列表，该项目正在被删除，并且输出窗口中似乎没有任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-11T11:25:25.867

在设置为`ItemsSource = null`之前设置`InventoryList`。

但是，通常更好的做法是设置`ItemsSource`属性一次且不再设置。您可以使用`ObservableCollection`. 完成此操作后，您可以添加/删除您心中的内容，而不必担心绑定目标不会更新。

# javascript - 在可拖动的 div 中闪烁

> ID：847073
> 
> 赞同：1
> 
> 时间：2009-05-11T07:28:16.893
> 
> 标签：javascript, flash, html

我有一个放在 div 容器内的 Flash 视频播放器。这是使用 javascript 可拖动的。当鼠标在 Flash 部分时，我不希望它对拖动敏感。只有当鼠标在剩余的 div 容器上时，它才应该是可拖动的。预期的行为发生在 Linux 中。但是，在 Windows 中，鼠标上的光标也使其可拖动。我怎样才能避免这种情况。提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-11T07:34:23.467

我不确定您是否甚至可以控制这种行为。如果没有直接的解决方案，另一种方法是为 div 容器创建一个拖动句柄。因此，您可以通过拖动手柄来移动整个 div，并且只有手柄对拖动动作敏感（就像大多数 Windows 窗体一样，您可以通过拖动其标题栏来移动整个窗口）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-24T15:45:19.253

一旦你的鼠标进入flash矩形，它就只能控制flash内容，你就失去了对html、javascript的所有控制权。

我想这就像带轮子的戏水池一样工作。尝试通过移动水来推动戏水池，而你最终得到的只是湿手。

可以在 Flash 内容的外部添加一个“手柄”，然后在拖动时移动 Flash 内容。

[替代文字 http://cnb-host3.clickandbuild.com/cnb/shop/powerranger?imageID=1218&op=imgLib-viewImage](http://cnb-host3.clickandbuild.com/cnb/shop/powerranger?imageID=1218&op=imgLib-viewImage)

# sql - SQL 脚本使 Microsoft Sql 数据库联机或脱机？

> ID：847076
> 
> 赞同：7
> 
> 时间：2009-05-11T07:29:22.353
> 
> 标签：sql, sql-server-2008, offline

如果我希望离线或在线使用 MS Sql 2008，我需要使用 GUI -> DB-Tasks-Take Online 或 Take Offline。

这可以用一些sql脚本来完成吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-11T07:32:32.207

```
ALTER DATABASE database-name SET OFFLINE 
```

如果您在连接用户或进程时运行[ALTER DATABASE](http://msdn.microsoft.com/en-us/library/aa275464(SQL.80).aspx)命令，但您不希望该命令被阻止，则可以使用 NO_WAIT 选项执行该语句。这会导致命令失败并出现错误。

```
ALTER DATABASE database-name SET OFFLINE WITH NO_WAIT 
```

网上对应：

```
ALTER DATABASE database-name SET ONLINE 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T07:14:57.870

我知道这是一篇旧文章，但是以防万一有人遇到此解决方案并且更喜欢不执行但返回脚本的非游标方法。我刚刚采用了以前的解决方案并将其转换为基于结果构建的选择。

```
DECLARE @SQL VARCHAR(8000)

SELECT @SQL=COALESCE(@SQL,'')+'ALTER DATABASE  '+name+ N' SET OFFLINE WITH NO_WAIT;
    '
FROM sys.databases
WHERE owner_sid<>0x01
PRINT @SQL 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-01-13T20:46:38.313

```
-- Take all user databases offline
CREATE PROCEDURE SP_TakeOfflineAllDatabase AS
BEGIN
    DECLARE @db sysname, @q varchar(max);
    DECLARE cur_db CURSOR FOR
        SELECT name FROM sys.databases WHERE owner_sid<>0x01;
    OPEN cur_db;
    WHILE 1=1
    BEGIN
        FETCH NEXT FROM cur_db INTO @db;
        IF @@FETCH_STATUS <> 0
            BREAK;
        SET @q = N'ALTER DATABASE [' + @db + N'] SET OFFLINE WITH NO_WAIT';
        EXEC(@q);
    END;
    CLOSE cur_db;
    DEALLOCATE cur_db;
END; 
```

在运行该过程之前重新启动服务器。它将关闭与数据库的现有连接。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-11T07:54:36.710

这是一个可能对您非常有用的注释：几乎总是可以看到 GUI 在幕后 TSQLwise 正在做什么。

c : [http://www.mssqltips.com/tip.asp?tip=1505](http://www.mssqltips.com/tip.asp?tip=1505)

# asp.net - ASP.Net 错误“无法启动程序 http://localhost:123/myapp/”

> ID：847077
> 
> 赞同：0
> 
> 时间：2009-05-11T07:30:19.107
> 
> 标签：asp.net, internet-explorer

好吧，因为我安装了 IE 8，所以我收到了这个错误，所以我无法调试我的 asp.net 页面:(

“无法启动程序[http://localhost:123/myapp/](http://localhost:123/myapp/) ” 找不到元素（或类似从 swe 翻译的东西）

我必须怎么做才能摆脱这个错误？并且 IE 在此之后或多或少挂起，窗口确实响应但它只加载了它的一半组件......

编辑：在我安装 IE8 之前，有什么方法可以设置调试时使用的浏览器，我通常使用 Opera，它的工作方式就像我想要的那样......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T08:07:59.730

我认为您未正确安装 IE 8 尝试将其他浏览器设置为默认浏览器。如果您没有收到此错误，则意味着您必须重新安装 ie 8

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-04-28T11:11:02.927

嗨，所有这些类型的用户我已经解决了这个错误，所以你也必须按照以下步骤尝试：

这是调试时出现的各种错误之一，可能会困扰您，直到您执行以下修复：-

1.  在 Internet Explorer 的“工具”菜单中，选择“Internet 选项”。

2.  切换到“安全”选项卡。

3.  单击“Internet”（地球图标。它实际上是默认选择的）。

4.  单击底部的“自定义级别”。

5.  向下滚动以找到“用户身份验证”部分。

6.  选择“使用当前用户名和密码自动登录”。或匿名登录。

7.  单击“确定”两次退出。

重启IE。（您无需重新安装浏览器。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-11T10:12:28.217

也许您正面临[这个已知问题](http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=387883)？此[博客文章](http://blogs.iis.net/brian-murphy-booth/archive/2008/06/03/visual-studio-2008-unable-to-debug-asp-net-app-on-iis-7-0.aspx)还描述了一种解决方法。

# c# - .net 中的数据访问层

> ID：847078
> 
> 赞同：2
> 
> 时间：2009-05-11T07:30:19.107
> 
> 标签：c#, .net, orm

我正在设计一个应用程序，我想减轻开发人员未来开发的负担。在这个我有类的列表，例如“用户、帐户、权限等”，现在这些类与数据库中的表相关联，类的名称与数据表相同。我希望我的业务层是健壮的，以便将来每当我向数据表中添加更多列时，我不必重写插入更新和删除命令，只需向类添加属性就可以完成这项工作。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-11T07:34:42.673

您正在寻找的可能是一个 ORM（对象关系映射）框架。.NET 最流行的包括 Linq-to-SQL（或实体框架）、NHibernate 和 ActiveRecord。使用 ORM 被认为是实现可维护且健壮的数据访问层的最佳实践。

在此处查看[框架列表](http://geekswithblogs.net/iupdateable/articles/object-relational-mappers-orm-for-microsoft-.net.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-11T07:36:30.063

您可能正在寻找的是实现[对象关系映射](http://en.wikipedia.org/wiki/Object-relational_mapping)(ORM) 解决方案。许多 ORM 解决方案可帮助您维护表和实体定义，并为您创建适当的查询。

.Net 框架的流行 ORM 包括 NHibernate、ADO 实体框架和 LINQ to SQL。否则，您可以考虑使用模板（例如使用 Codesmith 或 Net Tiers 模板）映射您的数据模型。

您可以查看此问题的答案以获得有关[选择 ORM 解决方案](https://stackoverflow.com/questions/132676/which-orm-for-net-would-you-recommend)的更多建议，或者您可以仅浏览[此处标记的一些 ORM 相关问题](https://stackoverflow.com/questions/tagged/orm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-11T09:43:33.507

关于这个主题的相当有趣的阅读是[Persitence Patterns 文章](http://msdn.microsoft.com/en-us/magazine/dd569757.aspx)。它解释了用于数据访问的最常见和基本的设计模式。它还讨论了具体的 DP 何时可能比另一个更合适。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-11T07:38:15.553

我认为您正在寻找的是[Data Transfer Object](http://en.wikipedia.org/wiki/Data_Transfer_Object)。[这是一篇文章](http://msdn.microsoft.com/en-us/library/ms978717.aspx)，它解释了有关 DTO 模式的更多信息。

此外，[这里有一篇文章](http://msdn.microsoft.com/en-us/library/ms998529.aspx)解释了如何使用数据集实现 DTO。在您的情况下，数据集将替换为您自己的数据层。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-11T08:07:00.513

选择 ORM 解决方案是一种方法，另外我还要提到即将到来的[Oslo](http://www.microsoft.com/soa/products/oslo.aspx)。

对于更“传统”的方法，我会看一下[Data Abstract](http://www.remobjects.com/da.aspx)。

# mobile - 如何为最新的索尼爱立信手机编写应用程序？

> ID：847080
> 
> 赞同：0
> 
> 时间：2009-05-11T07:30:47.437
> 
> 标签：mobile, devtools

对我来说，尤其是关于索尼爱立信 W715。我可以使用什么语言，需要什么环境？

教程推荐也很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-11T07:50:02.350

他们有一个开发者页面.. [http://developer.sonyericsson.com](http://developer.sonyericsson.com)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-11T08:18:31.633

您唯一的选择是 J2ME。我建议使用带有 Mobility Pack 的[Netbeans来完成这项任务。](http://www.netbeans.org/downloads/index.html)下载包含 Java ME 的 Java 版本。

这是网络上的[教程](http://www.thainetbeans.com/sample/mobile.htm)。我相信你可以找到更多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-12T10:03:56.660

好吧，如果没有更多关于你的应用程序应该做什么的信息，我也会推荐 J2ME，特别是考虑到索尼爱立信有其他有用的专有 API 可供其合作伙伴使用。

您还可以通过让服务器发送动态 HTML 和 JavaScript 代码来定位手机上的 Web 浏览器。

Flash Lite 也是一种选择。

最近的索尼爱立信手机包含 capuchin 技术：在 Flash 中编写 GUI，在 J2ME 中编写应用程序引擎。这可能值得一看，具体取决于处理您的应用程序的人员的技能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-11T07:45:59.610

您应该使用 J2ME（Java 微型版）。

# c++ - Visual C++ 中的部分生成与完整生成

> ID：847092
> 
> 赞同：4
> 
> 时间：2009-05-11T07:35:21.593
> 
> 标签：c++, incremental-linking, release-builds

对于我使用 Visual C++ 进行的大部分开发工作，我使用的是部分构建，例如按 F7 并仅重新构建更改的 C++ 文件和它们的依赖关系，然后是增量链接。在将版本传递给测试之前，我会采取预防措施进行完全重建，这在我当前的项目中大约需要 45 分钟。我看到很多帖子和文章都在提倡这一行动，但想知道这是否必要，如果有，为什么？它是否会影响交付的 EXE 或相关的 PDB（我们也在测试中使用）？从测试的角度来看，该软件的功能会有所不同吗？

对于发布版本，我使用的是 VS2005、增量编译和链接、预编译头文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-11T07:44:21.173

部分构建系统通过根据构建结果检查源文件的文件日期来工作。因此，如果您从源代码管理中恢复较早的文件，它可能会中断。较早的文件将具有早于构建产品的修改日期，因此不会重新构建产品。为了防止这些错误，如果它是最终构建，您应该进行完整构建。但是，在您进行开发时，增量构建当然要高效得多。

编辑：当然，进行完全重建也可以保护您免受增量构建系统中可能存在的错误的影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-11T07:43:46.247

基本问题是编译依赖于环境（命令行标志、可用库，可能还有一些黑魔法），因此只有在相同条件下执行两次编译才会产生相同的结果。对于测试和部署，您希望确保环境尽可能受控，并且不会因为奇怪的代码而出现古怪的行为。一个很好的例子是如果你更新一个系统库，然后重新编译一半的文件——一半仍在尝试使用旧代码，一半没有。在一个完美的世界中，这要么会立即出错，要么不会导致任何问题，但遗憾的是，有时这些都不会发生。因此，进行完整的重新编译避免了许多与交错构建过程相关的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-11T07:42:44.437

是不是每个人都遇到过这种使用模式？我得到了奇怪的构建错误，甚至在调查之前我进行了完全重建，问题就消失了。

在我看来，这本身就足以成为在发布之前进行全面重建的充分理由。

我认为，您是否愿意将完成时没有问题的增量构建转用于测试，这是一个品味问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-11T08:14:36.303

我肯定会推荐它。我曾多次在大型 Visual C++ 解决方案中看到依赖检查器无法检测到对更改代码的某些依赖。当此更改针对影响对象大小的头文件时，可能会开始发生非常奇怪的事情。我确信依赖检查器在 VS 2008 中变得更好，但我仍然不相信它会用于发布版本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-03-08T19:25:04.547

不发布增量链接二进制文件的最大原因是某些优化被禁用。链接器将在函数之间留下填充（以便在下一个增量链接上更容易替换它们）。这给二进制文件增加了一些膨胀。也可能有额外的跳转，这会改变内存访问模式并可能导致额外的分页和/或缓存未命中。旧版本的函数可能会继续驻留在可执行文件中，即使它们从未被调用过。这也会导致二进制膨胀和性能下降。而且您当然不能将链接时代码生成与增量链接一起使用，因此您会错过更多优化。

如果您要为测试人员提供调试版本，那么这可能没什么大不了的。但是您的候选版本应该在发布模式下从头开始构建，最好是在具有受控环境的专用构建机器上。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-11T12:44:00.897

Visual Studio 在部分（增量）构建方面存在一些问题，（我大多遇到链接错误）有时，完全重建非常有用。

在编译时间长的情况下，有两种解决方案：

1.  使用并行编译工具并利用您的（假定的）多核硬件。
2.  使用构建机器。我最常使用的是一个单独的构建机器，它设置了 CruiseControl，它不时执行完全重建。我提供给测试团队以及最终提供给客户的“官方”版本始终来自构建机器，而不是来自开发人员的环境。

# sql-server - 通过复制在 SQL Express 中实现类似镜像的功能？

> ID：847094
> 
> 赞同：1
> 
> 时间：2009-05-11T07:36:22.467
> 
> 标签：sql-server, replication, sql-server-express, mirroring

我们有 2 个 SQL Express (2005) 服务器。您可能知道，Express 版本中未启用数据库镜像，但复制已启用。是否可以在两个服务器之间启用复制以具有某种类似镜像的功能？！如果可能的话，可能的缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-11T07:54:24.840

仅使用 SQL Server 的 express 版本将无法产生您希望实现的目标

我可以确认 SQL Server Express 只能作为订阅者而不是发布者。

请参阅以下 MSDN 参考，特别是子标题“Publisher”下的评论

[http://msdn.microsoft.com/en-us/library/ms165654(SQL.90).aspx](http://msdn.microsoft.com/en-us/library/ms165654(SQL.90).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T07:40:18.873

我不认为 SQL Express 可以是复制提供者，只能是订阅者。

# wcf - 空值与未设置值

> ID：847096
> 
> 赞同：5
> 
> 时间：2009-05-11T07:37:02.030
> 
> 标签：wcf, design-patterns, datacontract

我们编写了一个 Web 服务，它使用一个简单的实体转换器将 DTO 的值映射回“真实的”服务器端业务对象。作为本次练习的一部分。我们遇到了显式设置**空值和****未设置**值的客户端之间的“有趣”区别。

问题本质上是，*如果客户端没有显式设置值*，我们想在实际业务对象上设置默认值，但是使用标准的可空类型无法判断客户端是否明确表示“*将其设置为 null* ” 。或者只是不设置它。

这里的解决方案显然是某种“标志”。

在业务对象中，我们可以使用在属性设置器中设置的私有“IsDirty”标志在内部跟踪字段的状态，但是 DTO 只真正指定了一个接口，因此这意味着将这些数据公开给公众。这留下了许多实现选项。语言是 C#（所以是静态类型的）所以...

1.  我们可以在每个属性上公开一个“IsSet”标志吗？
2.  我们可以将每个属性公开为具有 .Value 和 .IsSet 属性的类吗？等等等等

*您*将如何选择在数据合约上公开这些“标志”？您在这里认为最佳实践是什么？

对此的任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-11T07:53:33.030

为每个属性值使用一个类将比必须为每个属性声明一个布尔值更具可扩展性。它还使您能够选择哪些属性可以留空和/或设置为空。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-11T07:56:46.443

您可以编写一个用数据包装标志的类：

```
public class DtoData<T> 
{
  T data;
  bool IsSet { get; private set; }
  T Data 
  { 
    get { return data; }
    set { data = value; IsSet = true; } 
  }
}

public class XyzDto 
{
  // only private setters, initialize in constructor
  DtoData<int?> SomeInt { get; private set; }
  DtoData<string> SomeString { get; private set; }
} 
```

这有一些缺点。例如，您的所有数据都包装在引用类型中，因此对 DtoData 的引用仍可能为空，您需要在构造函数中创建它们。并且很难使值只能在内部或受保护的情况下访问。

* * *

就个人而言，我会尽量避免这个问题。为什么“未定义”实际上应该存在？您是在发送差异、不完整的 Dto，还是来自哪里？过滤器可能会出现此问题，如果您将字段过滤为 null 或根本不过滤，则需要有所不同。但是对于这种情况，无论如何你都需要一个特殊的“字段过滤器”类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-11T21:50:25.373

一般来说，您在这里谈论的是一个默认值，它不同于用户可以设置的任何值。因此，只需指定即可；将默认值设置为不在用户可以设置的允许值范围内的值。这样，如果该值是默认值，则您知道它尚未设置；如果值不是那个值，你就知道用户已经修改了它。仅仅因为用户可设置的值之一是 null 似乎会让你失望；只需将其视为一组用户可设置值之一；使变量的整个范围成为一个稍大的集合，并具有一个额外的默认值。那应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-11T08:08:01.853

我以前遇到过这个确切的问题。您可以通过在 DTO 的构造中引入一些默认值来解决此问题，但这并不理想。我在[这里](http://www.codepoets.co.nz/2009/03/03/handling-null-strings-using-xmlserializerdeserialize/)写了更详细的博客，它可能会帮助人们进一步理解这个问题。

# java - 带有数据库的Java桌面应用程序

> ID：847098
> 
> 赞同：2
> 
> 时间：2009-05-11T07:37:18.580
> 
> 标签：java, database

我正在尝试为销售 T 恤和帽子的朋友实现一个应用程序，因此我们正在处理互连的表格。我想知道实现这个目标的完美库是什么。我应该使用什么样的数据库来使其可移植且易于部署。我真的很想坚持数据库的东西，我应该用什么？

非常感谢（我使用 Netbeans）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-11T08:26:32.743

看来它需要投入生产。最好选择[H2](http://www.h2database.com/html/main.html)，它是一个更好、更快的 HSQLDB。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-11T07:43:23.140

看看[Hypersonic](http://hsqldb.org/)和[Derby](http://db.apache.org/derby/)。它们是嵌入式数据库，将数据存储在一个简单的文件中，因此您不必担心安装和管理复杂的系统，如 mysql、postgres 或 sql server。他们使用常规的 jdbc 前端。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-11T17:33:25.497

[这](http://www.ch-werner.de/javasqlite/)是 SQLite 的 Java 绑定。SQLite 非常轻量级，应该非常适合您的需求。

一个不错的数据库编辑器也是天赐之物。在使用 SQLite 时，我推荐[SQLite Manager](https://addons.mozilla.org/en-US/firefox/addon/5817)，一个 Firefox 插件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-11T08:16:49.467

对于引擎，请查看 sqllite、derby 和 hsqldb 等嵌入式数据库

对于集成，您可以保持简单并使用普通的旧 JDBC，这将在一定程度上使事情变得更容易，或者采用 Hibernate 或 JPA 方式

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-11T08:33:42.000

我们最初将 HSQLDB 用于类似的应用程序。但是在使用它进行生产之后，一些用户遇到了随机数据损坏（看看他们的论坛，这似乎是一个常见问题），所以我们切换到 Derby，它被证明是稳定的。所以我的投票是德比。

此外，由于启动时间很长（它必须预先准备元数据），我会远离桌面应用程序的休眠，除非你只有很少的表/模型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-11T07:45:45.260

我会使用 Hibernate（或 JPA）来创建关系数据库和面向对象的 java 设计之间的标准映射。

就数据库而言，我经常使用 MySql 或 Oracle XE，它们免费且足够强大，可以满足您的目的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-11T07:46:14.727

你也可以使用[SQLite](http://www.sqlite.org/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-11T17:29:38.267

您可以将[Firebird](http://www.firebirdnews.org/docs/fb2min.html)与[JayBird一起使用](http://www.firebirdsql.org/index.php?op=files&id=jaybird)

Firebird 是免费的，非常易于安装和设置，并具有良好的备份

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-28T04:01:24.177

另一个选择是 Perst，一个开源的、面向对象的数据库，它是 100% Java。

有关 Perst 的信息，请参阅 www.mcobject.com/perst。

您可以在 www.mcobject.com/perst_eval 下载 Perst 及其源代码。

# debian - Debian 中的 XForm

> ID：847099
> 
> 赞同：0
> 
> 时间：2009-05-11T07:37:59.907
> 
> 标签：debian, xmpp, xforms

我有一个带 openfire 的 debian 服务器。

我想主要将 xform 用于机器人开发。我已经执行了以下命令。

apt-get install apt-file apt-file update apt-file search xforms

当我执行“apt-file search xforms”时，我得到了几个结果。

我搜索了该示例并找到了以下代码。

```
<message from="sender@wonderland.lit/foo" to="receiver@wonderland.lit/bar">
<x xmlns="jabber:x:data" type="form">
<title>My Special Form</title>   
<field label="Text Input" type="text-single" var="field-1"/>
</x>
</message> 
```

但它没有显示任何内容，也没有错误。

请指导我。

问候， 潘卡伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-30T17:16:16.347

如果您仍然坚持这一点，那么现在至少有两个基于客户端的 XForm 实现：

[https://community.emc.com/docs/DOC-4345](https://community.emc.com/docs/DOC-4345)

作为一个新用户，我只得到一个超链接。所以，搜索“agence.xml”或“Alain Couthurse”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T13:56:46.893

您必须将您的网络服务器与 xslt 处理器连接起来。
如果您不使用 apache-cocoon，您可能可以使用 apache+php（带有 php-xsl 模块）。
请遵循 php 站点上的 XForms 文档。

# .net - 将 python 模块导入.net - “没有名为信号的模块”

> ID：847109
> 
> 赞同：3
> 
> 时间：2009-05-11T07:43:22.703
> 
> 标签：.net, python, ironpython

我正在尝试在 C# 代码中导入 Python 模块，如下所示：

```
 var setup = Python.CreateRuntimeSetup(null);
        var runtime = new ScriptRuntime(setup);
        var engine = Python.GetEngine(runtime);
        var module = engine.ImportModule("mymodule"); 
```

但我收到一条错误消息，说“没有名为信号的模块”，这是否意味着 IronPython 无法加载信号模块，是操作系统特定的吗？

谁能想到解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-11T08:44:30.467

“信号”模块用于处理所有与...有关的事情……你猜对了：信号。操作系统会向进程发送一些特殊的“消息”来告诉它一些事情：例如。Break、Kill、Terminate 等...确切的消息集通常是特定于操作系统的，但作为[信号](http://docs.python.org/library/signal.html)python 手册页状态，python 模拟 BSD 样式接口，SIGCHLD 除外。

现在，在 CPython 中，据我所知，“信号”模块是内置的，可能是 IronPython 没有实现它，事实上，快速谷歌并查看 IronPython 的网站会导致：[IronPython 和CPython 的差异](http://ironpython.codeplex.com/Wiki/View.aspx?title=IPy1.0.xCPyDifferences)（阅读它，特别是扩展模块部分！）

可能的解决方法：编辑您的模块以在 IronPython 中不使用信号

# ios - 最佳实践？iphone：同步数据

> ID：847123
> 
> 赞同：8
> 
> 时间：2009-05-11T07:48:44.863
> 
> 标签：ios, iphone, cocoa-touch, synchronization

我正在做一个有数据可视化的项目。

我的最终目标是在下载 iphone 应用程序时附带一组数据。但我希望它连接到后端，如果 iphone 与互联网连接。它可以从后端同步更改。

同步没有问题或后端和iphone之间的连接。

但是我应该在我的 iphone 上使用什么作为数据存储？什么是最好的方法？我的数据是纯文本，不一定是安全的。

但它的主要功能应该是更新数据的某些部分（添加和删除不是那么重要）。

那么什么是最简单的（阅读：最耗时的开发）或最好的方法？

*   sqlite？
*   列表？
*   ..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-11T08:31:34.093

使用 SQLite 可能会获得最佳结果。您可以将初始数据库存储在应用程序本身中并复制到 Documents 文件夹。在启动时从服务器请求增量以保持数据库同步。对于单向同步，存储一个版本字段，然后请求服务器为该版本执行 SQL 语句就足够了；对于双向同步，可能需要更复杂的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T07:58:56.877

对于少量数据（也就是你会觉得将它们全部加载到内存中），我会使用 NSUserDefaults 持久性机制来存储数据，它可以在应用程序启动和关闭时轻松处理标准数据结构的序列化和存储。它非常简单/快速使用。

对于不应一次加载到内存中的较大数据集，sqlite 似乎是合理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-28T20:24:25.973

另一种方法是使用 NSDictionary 方法 writeToFile; 这将编写一个 NSDictionary （听起来它可以解决您的存储需求）。然后要在启动时重新膨胀数据，您将获得 plist 文件的路径（由 writeToFile 写入），然后是 NSMutableDictionary initWIthContentsOfFile: 路径。

查看 Jonathan Zdziarski 撰写的“iPhone SDK 应用程序开发”第 11 章：应用程序设置。或者查看 Apple 的 iPhone 应用程序编程指南中更详细的文件和数据管理章节。

我和你在同一条船上，认为我需要 SQLLite 来存储从 Web 服务下载的数据。我用一个更简单的过程替换了 Web 服务，该过程处理 JSON 请求并以 NSDictionary 格式返回我的数据。然后我使用适用于 iPhone 的 JSON SDK 2.2 获取传入的 JSON 数据并将其存储在 NSDictionary 中。然后当我可以轻松地将数据存储在上面提到的 plist 中时。

这对我有用，但是根据您对数据的处理方式，您可能需要一些不同的东西。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-05-19T07:58:22.897

plist 的使用方式非常简单。参考[http://github.com/samsoffes/iphone-plist](http://github.com/samsoffes/iphone-plist)

这是一个将 GAE 与 plist 一起使用的示例项目。[http://www.ibm.com/developerworks/web/library/wa-aj-iphone/](http://www.ibm.com/developerworks/web/library/wa-aj-iphone/)

# php - 排序PHP数组？

> ID：847127
> 
> 赞同：0
> 
> 时间：2009-05-11T07:51:48.773
> 
> 标签：php, arrays

我有以下？

```
$array1 = array();

$array2 = array($Id, $Name, $Count);

array_push($array1, $array2); 
```

我想在 $count 上对 array1 进行排序？

`sort()`并且`ksort()`不做我要求的？

有任何想法吗？

谢谢

编辑：

我正在输入一个 ID 号、名称文本和名称出现的次数，所以我希望在数组顶部有最高计数的名称！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-11T07:54:29.333

使用[uasort()](http://nl2.php.net/manual/en/function.uasort.php)通过回调函数进行排序。例子：

```
function sort_callback($a, $b) {
    if ($a[2] == $b[2]) {
        return 0;
    }

    return ($a[2] < $b[2]) ? -1 : 1;
}

uasort($array1, 'sort_callback'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-11T08:25:40.170

我对您提出问题的方式感到有些困惑，但是您是否正在尝试做这样的事情？

```
function order_by($data, $field_name) {

    $code = "return strnatcmp(\$a['$field_name'], \$b['$field_name']);";
    usort($data, create_function('$a,$b', $code));
    return $data;

} 
```

因此，例如：

```
$array1 = array();
$array1[] = array('Id' => 1, 'Name' => 'YT', 'Count' => 30);
$array1[] = array('Id' => 2, 'Name' => 'Da5id', 'Count' => 56);
$array1[] = array('Id' => 3, 'Name' => 'Fido', 'Count' => 12);
$array1[] = array('Id' => 4, 'Name' => 'Hiro', 'Count' => 45);

echo "<pre>";
print_r($array1);
echo "</pre>";

$array2 = order_by($array1, 'Count');

echo "<pre>";
print_r($array2);
echo "</pre>"; 
```

# sql-server - 是否可以创建具有只读访问权限的死锁？

> ID：847139
> 
> 赞同：10
> 
> 时间：2009-05-11T07:59:15.940
> 
> 标签：sql-server, ado, rdbms, deadlock

我有一个 VB6 应用程序通过 ADO 访问 MSSQL2000 服务器上的单个表。我正在使用只读访问（adOpenStatic、adLockReadOnly） 网络中还有其他应用程序会对表进行更改。

出于某种原因，我收到关于我的应用程序被选为死锁受害者的错误。

我真的很困惑：当我只是从一个表中**读取时，为什么会出现死锁？**我希望超时，因为其他应用程序的编写，但不是死锁......

有人可以对此有所了解吗？

**更新：2009-06-15**我仍然对这个问题的解决方案感兴趣。所以我提供了更多信息：

*   如果我选择 adOpenForwardOnly 或 adOpenStatic 没有区别
*   如果光标位置是客户端或服务器，则没有区别。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-27T12:57:20.593

由于存在非聚集索引，单个 SELECT 语句可能会因单个 UPDATE 或 DELETE 语句而死锁，请考虑以下情况：

阅读器（您的应用程序）首先在非聚集索引上获取共享锁以执行查找，然后尝试在包含数据的页面上获取共享锁以返回数据本身。

writer（其他应用程序）首先在包含数据的数据库页面上获得排他锁，然后尝试在索引上获得排他锁以更新索引。

[您可以在 Microsoft 知识库文章 Q169960 ( http://support.microsoft.com/kb/q169960/](http://support.microsoft.com/kb/q169960/) )中找到有关此（和其他）类型死锁的更多信息

此外，您可能想在 Google 上查看如何获取死锁跟踪信息（跟踪标志 1222） - 这将准确报告发生死锁时哪些 SQL 语句与哪些对象发生冲突。这是一篇相当不错的文章 - [http://blogs.msdn.com/bartd/archive/2006/09/09/747119.aspx](http://blogs.msdn.com/bartd/archive/2006/09/09/747119.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T11:18:23.160

我认为这里已经提供的答案有很多可能性。由于您只使用共享锁，因此死锁不可能是由于锁升级，而必须只是获取与在另一个进程中获取的锁不兼容的锁，并以不同的顺序获取这些锁......

您的共享锁与另一个使用独占锁的进程不兼容。场景可能会像这样运行......

1.  您对资源 A 进行共享锁定
2.  其他进程对资源 B 进行排他锁
3.  其他进程试图获取资源 A 的独占锁，并阻塞等待您释放 A 上的共享锁。
4.  您尝试在资源 B 上获取共享锁，并且会阻塞等待其他进程释放其在 B 上的独占锁，除非您现在处于死锁情况，这由服务器识别并选择要杀死的进程.

NB 死锁可以有更多的玩家，而不仅仅是 2 个。有时会有一整条相互交织的活动链导致死锁，但原理是一样的。

通常，如果多个应用程序访问同一个数据库，则有一个 DBA 通过存储过程管理所有访问，因此他可以确保资源始终以相同的顺序锁定。如果您不处于这种情况，并且其他应用程序使用临时 SQL 语句，则您必须检查它们的代码，以确定它们是否可能与您的应用程序发生冲突，就像我描述的那样。这听起来不好玩。

一个实用的解决方案可能是在您的事务作为死锁受害者被杀死时捕获错误，然后简单地重试事务几次。根据其他应用程序生成的活动量，您可能会通过这种方式获得可接受的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-15T15:17:24.193

这里描述的几个案例：

[http://sqlblog.com/blogs/alexander_kuznetsov/archive/2009/01/01/reproduce-deadlocks-involving-only-one-table.aspx](http://sqlblog.com/blogs/alexander_kuznetsov/archive/2009/01/01/reproducing-deadlocks-involving-only-one-table.aspx)

[http://sqlblog.com/blogs/alexander_kuznetsov/archive/2008/05/03/when-index-covering-prevents-deadlocks.aspx](http://sqlblog.com/blogs/alexander_kuznetsov/archive/2008/05/03/when-index-covering-prevents-deadlocks.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-11T08:08:57.233

读取仍然会导致锁定，以便数据库确保在非自动读取过程中不会完成写入。换句话说，读锁确保您获得所选择的任何数据的准确一致的快照。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-11T08:11:32.173

你有同样的行为`adOpenForwardOnly`吗？

您可能想要检查您的 SQL Server 统计信息是否是最新的。或者您可以让您的 DBA 重建所有索引。许多锁定问题是由于过时的统计信息/索引造成的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-11T08:07:08.047

这取决于两个应用程序的行为。您的应用程序肯定可以等待对方释放资源。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-11T08:09:49.680

死锁是指两个或多个进程相互等待释放资源，或两个以上进程在循环链中等待资源的情况。当然，您可以创建具有只读访问权限的死锁，因为读取不会等待。

[关于维基百科](http://en.wikipedia.org/wiki/Deadlock#Necessary_conditions)的死锁条件有一个很好的解释

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-05-11T08:03:36.040

不会是这样吗？

**其他应用**：写入表（获取表上的写锁）

**您的应用程序**：从表中读取（获取表上的读锁，由于写锁而不能）。

# iphone - 如何使用 WPF 创建类似于 iPhone 中的轮播菜单界面？

> ID：847141
> 
> 赞同：0
> 
> 时间：2009-05-11T08:00:20.413
> 
> 标签：iphone, wpf, menu

我看过几个教程，但没有动态动画。谁能教我至少一个粗略的教程？

我是一名 C# 开发人员，但一直在做 Flash 动画。

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-02-04T13:56:22.983

到目前为止，最简单的方法是从 Infragistics 这样的供应商那里购买第三方组件。

在原始 WPF 中进行操作是可能且有趣的，但它不会是一个快速上市的时间。

# windows - 如何在另一个安装程序中创建安装程序？

> ID：847150
> 
> 赞同：9
> 
> 时间：2009-05-11T08:07:11.200
> 
> 标签：windows, installation

我想创建一个 Windows 安装程序，第一步我希望它调用另一个安装程序（将安装我的应用程序的依赖组件），第二步我想安装我自己的应用程序。我想在一个安装过程中完成所有任务，并且我手头有依赖组件安装包（一个exe文件）。

有什么好的工具或示例可以参考吗？我更喜欢使用 VSTS 或 Microsoft 或开源易于使用的工具。:-)

提前谢谢，乔治

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T00:00:57.160

您可能想看看[Microsoft Bootstrapper](http://msdn.microsoft.com/en-us/magazine/cc163899.aspx)，假设依赖组件是 .NET 或类似的库，那么它相当简单。

如果要创建[Windows Installer](http://en.wikipedia.org/wiki/Windows_Installer) (MSI) 包，请查看[Windows Installer XML](http://wix.sf.net) (WiX)。但是您需要先[了解 MSI 的工作原理](https://rads.stackoverflow.com/amzn/click/com/1590592972)。一旦您了解了 Windows Installer，WiX 就真的很简单，但是尝试同时学习两者可能会相当混乱。

对于基本的，复制一些文件，提取/运行一些东西，输入安装程序然后[NSIS](http://nsis.sf.net)是相当简单的脚本，你可以在一天左右的时间里拿起它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-10-05T19:49:23.477

Nsis 用[这个修改](http://nsis.sourceforge.net/Embedding_other_installers)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-11T08:17:03.507

更新：似乎嵌套 MSI 安装是有可能的。但是，它需要使用 Windows Installer SDK 中的工具进行一些调整，并且有许多缺点。

以下文章有详细信息：

> [如何创建嵌套的 .msi 包](http://support.microsoft.com/kb/306439)

Microsoft 建议不要使用此功能（请参阅此[相关答案和此](https://stackoverflow.com/questions/88078/can-a-msi-file-install-itself-presumably-via-a-custom-action/90094#90094)[列表中](http://blogs.msdn.com/windows_installer_team/archive/2006/05/12/595950.aspx)的第 20 点）。

但是，您可能还想查看不同的安装系统，例如 NSIS，或者创建一个引导程序，在安装之前安装依赖项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-11T10:08:30.597

是的，如果你使用 Inno Setup 来做这件事会很容易，但略有不同..

您必须先执行步骤 2，然后执行步骤 1。

尝试使用 AutoHotkey(scripting) 检查后台是否存在任何验证特定软件安装的进程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-11T08:20:09.773

你可以看看[Inno Setup](http://www.innosetup.com/)。它创建 exe 安装程序，而不是 MSI。它具有基于 Pascal 的脚本语言，因此非常灵活。

它是免费的，而且很容易使用。

如果您现有的安装程序不使用 MSI 技术，您可以使用[WiX](http://wix.sourceforge.net/)创建 MSI 并通过自定义操作启动现有安装程序。我过去做过这件事。

WiX 是开源的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-12T06:38:33.937

在 Windows 系统上查看 iexpress。只需几分钟，您就可以创建一个安装程序，该安装程序可以调用任意数量的安装程序。

# python - erlang是否有ipython等价物？

> ID：847151
> 
> 赞同：6
> 
> 时间：2009-05-11T08:07:52.557
> 
> 标签：python, emacs, erlang, ipython

来自 Python，我正在寻找一些“易于试用”的 shell，如 Python 所具有的`ipython`（最好是支持 Emacs）。在 Erlang shell 中，您总是必须先编译 ( `c(...)`)，这会大大减慢实验阶段的速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-11T10:43:10.320

是的，它是:) [http://erlang.org/doc/man/escript.html](http://erlang.org/doc/man/escript.html)

```
$ cat /tmp/test
#!/usr/bin/env escript
main(_) ->
io:format("Hello World!\n").
$ chmod +x /tmp/test
$ /tmp/test
Hello World! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T22:49:06.620

构建一个模块来启动将代码更改自动加载到 shell 中的过程应该相当容易。Erlang 实际上已经内置了对这种东西的支持。因此，只要您重新编译了代码，它就会自动加载到您的 shell 中，从而无需键入 c('module.erl')。你自己。您甚至可以让它监视文件更改并自动为您编译。看：

[http://github.com/toddlipcon/mochiweb/blob/29d6ffd58aa2cd175f84cadfc1ce1697f366ef62/src/reloader.erl](http://github.com/toddlipcon/mochiweb/blob/29d6ffd58aa2cd175f84cadfc1ce1697f366ef62/src/reloader.erl)

举个例子。

目前该模块只查找重新编译的模块，但让它查找更改的源文件并为您重新编译它们应该是微不足道的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-21T12:27:21.553

Ierlang 是一个用于 IPython 的 Erlang 语言内核。它允许用户使用 IPython 的 Notebook 前端，除了 IPython 执行 python 代码的地方，IErlang 可以执行 erlang 代码并编译和执行 erlang 模块。

[https://github.com/robbielynch/ierlang](https://github.com/robbielynch/ierlang)

Elixir 还有一个 IPython 内核：

[https://github.com/pminten/ielixir](https://github.com/pminten/ielixir)

# sql - MySQL MyISAM 表性能问题重温

> ID：847154
> 
> 赞同：0
> 
> 时间：2009-05-11T08:08:49.073
> 
> 标签：sql, mysql, performance, query-optimization, myisam

这个问题与[这个](https://stackoverflow.com/questions/842849/mysql-myisam-table-performance-painfully-painfully-slow)有关。

我有一个具有以下结构的**页表：**

```
CREATE TABLE  mydatabase.page (
  pageid int(10) unsigned NOT NULL auto_increment,
  sourceid int(10) unsigned default NULL,
  number int(10) unsigned default NULL,
  data mediumtext,
  processed int(10) unsigned default NULL,
  PRIMARY KEY  (pageid),
  KEY sourceid (sourceid)
) ENGINE=MyISAM AUTO_INCREMENT=9768 DEFAULT CHARSET=latin1; 
```

**数据**列包含每条记录大小约为 80KB - 200KB 的文本。**数据**列中存储的数据总大小约为 1.5GB。

执行此查询需要*0.08*秒：

```
select pageid from page 
```

但执行此查询大约需要*130.0*秒：

```
select sourceid from page 
```

如您所见，我在 page.pageid 上有一个主索引，在 page.sourceid 上有一个索引。那么第二个查询应该花那么*长时间*吗？

## 编辑#1

**解释**返回

```
id select_type table type  possible_keys key      key_len ref rows Extra
1  SIMPLE      page  index               sourceid 5           9767 Using index 
```

很抱歉，分析不起作用... MySQL（其 4.1.22）无法识别 SHOW PROFILE 查询。

**显示索引**返回

```
Table Non_unique Key_name  Seq_in_index Column_name Collation Cardinality Sub_part Packed Null Index_type Comment
page  0          PRIMARY   1            pageid      A         9767                             BTREE 
page  1          sourceid  1            sourceid    A         3255                        YES  BTREE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T09:28:59.053

您是否尝试强制使用索引？像：

```
SELECT sourceid FROM page USE INDEX (sourceid_index) 
```

像 sgehrig 注释一样，使用 EXPLAIN 检查是否使用了索引？并分享结果？

```
EXPLAIN select sourceid from page 
```

它还可以帮助共享索引的定义：

```
SHOW INDEX FROM page 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T08:18:39.417

您的 sourceid 字段有何不同？如果与行数相比，您只有几个不同的 sourceid 值，那么您可以尝试增加索引的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-11T12:12:18.417

由于 MySQL 4.1.22 相当旧（2006 年 11 月 2 日），我怀疑它不支持*覆盖*辅助键索引的概念。`EXPLAIN`表明查询实际上使用了索引，所以我假设需要额外的时间来读取所有结果行（而不是在使用*覆盖索引*时只返回索引内容）来提取`sourceid`列。

您是否有可能在更新的 MySQL 服务器版本上检查查询？

# c++ - Qt：在 QWebView::linkClicked(QUrl) 上响应时出现问题 - 插槽信号问题

> ID：847157
> 
> 赞同：1
> 
> 时间：2009-05-11T08:09:54.753
> 
> 标签：c++, qt, signals

我对 Qt 很陌生。

我想回复`linkClicked`in `QWebView`。

我试过这样连接：

```
QObject::connect(ui->webView, SIGNAL(linkClicked(QUrl)),
                 MainWindow,SLOT(linkClicked(QUrl))); 
```

但我收到错误：`C:/Documents and Settings/irfan/My Documents/browser1/mainwindow.cpp:9: error: expected primary-expression before ',' token`

当我使用 UI 编辑信号槽执行此操作时：

我在插槽的头文件声明中：

```
void linkClicked(QUrl &url); 
```

在源 cpp 文件中：

```
void MainWindow::linkClicked(QUrl &url)
{
   QMessageBox b;
   b.setText(url->toString());
   b.exec();
} 
```

当我运行它时，它会编译并运行，但会收到警告：

```
Object::connect: No such slot MainWindow::linkClicked(QUrl) 
  in ui_mainwindow.h:100 
```

进行此事件处理的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-11T09:18:58.103

您声明它现在可以工作，因为您更改`QObject::connect`为`connect`. 现在我不是 100% 对此，但我相信这样做的原因是通过调用`connect`，您正在调用与作为应用程序一部分的对象关联的方法。即这就像在做`this->connect(...)`。这样，它与现有对象相关联 - 而不是调用`QObject::connect`对您的应用程序一无所知的静态方法。

抱歉，如果不清楚，希望我能明白这一点！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-11T10:43:39.913

在这种情况下使用 QObject::connect() 和 connect() 是相同的。我相信

```
QObject::connect(ui->webView,SIGNAL(linkClicked(QUrl)),
                 MainWindow,SLOT(linkClicked(QUrl))); 
```

是从 MainWindow 类中的函数调用的。这就是为什么当你尝试

```
connect(ui->webView,SIGNAL(linkClicked(const QUrl)),
        this,SLOT(linkClicked(const QUrl)),Qt::DirectConnection); 
```

有用。注意使它起作用的区别-第三个参数。您在第二个片段中使用了它，就像您在第一个片段中使用*MainWindow*一样*。*

阅读[本文](http://doc.trolltech.com/4.4/signalsandslots.html)以了解信号和插槽机制的工作原理以及如何正确实现它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-11T08:22:24.077

我改为`QObject::connect`仅`connect`，它有效。

所以这段代码有效：

`connect(ui->webView,SIGNAL(linkClicked(const QUrl)),this,SLOT(linkClicked(const QUrl)),Qt::DirectConnection);`

但我不知道为什么？

# nsis - NSIS 许可证页面

> ID：847167
> 
> 赞同：2
> 
> 时间：2009-05-11T08:14:05.540
> 
> 标签：nsis, nsis-mui

无论如何，您可以在 NSIS 安装程序的许可证页面中调整富文本框的大小吗？

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-11T20:48:12.823

*   有几种选择会稍微影响大小，复选框与按钮等

*   如果您还没有使用它，请切换到现代 UI

*   使用资源黑客复制并调整 \Contrib\UIs 中的对话框之一，并在脚本中使用 ChangeUI

*   在页面的显示回调函数中使用系统插件在运行时调用 GetWindowRect/ScreenToClient/SetWindowPos

# netbeans6.5 - netbeans中Jtable的各个列宽

> ID：847168
> 
> 赞同：0
> 
> 时间：2009-05-11T08:14:09.190
> 
> 标签：netbeans6.5

我是使用 JAVA 的新手。如何在 netbeans 中设置 JTable 的各个列宽？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-02-01T18:59:22.290

这是关于在 NetBeans 中使用 Swing GUI 构建器（以前称为 Project Matisse），还是在使用 NetBeans IDE 时手动创建表？

JTable 的 TableColumnModel 的 TableColumn 列宽通常通过[设置它的首选宽度](http://download.oracle.com/javase/6/docs/api/javax/swing/table/TableColumn.html#setPreferredWidth%28int%29)来控制。根据布局，您可能需要修改 TableColumn 的 minWidth 和 maxWidth 字段。

如果您使用的是 Swing GUI 构建器，您可以在包含面板的构造函数中的 initComponents() 之后调用它，或者如果您在设计模式下使用静态数据，您可以右键单击表格，选择表格内容，然后设置宽度当您使用定制器对话框添加列时。在设计模式下还可以选择“自定义代码”来修改 IDE 管理的 initComponents 方法。

在 initComponents() 之后手动设置宽度最初可能是最简单且最不神奇的。

```
public MyPanel() {
initComponents();
TableColumn col = table.getColumnModel().getColumn(0);
col.setPreferredWidth(100);
} 
```

*注意：我在回答这个问题时引用的是 NetBeans IDE 6.8，菜单项和对话框可能会有所不同。*

# linux - 单个主机上的多个 glibc 库

> ID：847179
> 
> 赞同：206
> 
> 时间：2009-05-11T08:20:37.167
> 
> 标签：linux, gcc, glibc

我的 linux (SLES-8) 服务器目前有 glibc-2.2.5-235，但我有一个程序不能在这个版本上运行，需要 glibc-2.3.3。

是否可以在同一主机上安装多个 glibcs​​？

这是我在旧 glibc 上运行程序时遇到的错误：

```
./myapp: /lib/i686/libc.so.6: version `GLIBC_2.3' not found (required by ./myapp)
./myapp: /lib/i686/libpthread.so.0: version `GLIBC_2.3.2' not found (required by ./myapp)
./myapp: /lib/i686/libc.so.6: version `GLIBC_2.3' not found (required by ./libxerces-c.so.27)
./myapp: /lib/ld-linux.so.2: version `GLIBC_2.3' not found (required by ./libstdc++.so.6)
./myapp: /lib/i686/libc.so.6: version `GLIBC_2.3' not found (required by ./libstdc++.so.6) 
```

所以我创建了一个名为 newglibc 的新目录并将以下文件复制到：

```
libpthread.so.0
libm.so.6
libc.so.6
ld-2.3.3.so
ld-linux.so.2 -> ld-2.3.3.so 
```

和

```
export LD_LIBRARY_PATH=newglibc:$LD_LIBRARY_PATH 
```

但我收到一个错误：

```
./myapp: /lib/ld-linux.so.2: version `GLIBC_PRIVATE' not found (required by ./newglibc/libpthread.so.0)
./myapp: /lib/ld-linux.so.2: version `GLIBC_2.3' not found (required by libstdc++.so.6)
./myapp: /lib/ld-linux.so.2: version `GLIBC_PRIVATE' not found (required by ./newglibc/libm.so.6)
./myapp: /lib/ld-linux.so.2: version `GLIBC_2.3' not found (required by ./newglibc/libc.so.6)
./myapp: /lib/ld-linux.so.2: version `GLIBC_PRIVATE' not found (required by ./newglibc/libc.so.6) 
```

因此，它们似乎仍在链接到我放置它们的位置，`/lib`而不是从我放置它们的位置获取。

* * *

## 回答 #1

> 赞同：276
> 
> 时间：2009-05-12T05:10:45.170

在同一个系统上很可能有多个版本的 glibc（我们每天都这样做）。

但是，您需要知道 glibc 由许多必须匹配的部分（200 多个共享库）组成。其中之一是 ld-linux.so.2，它*必须*与 libc.so.6 匹配，否则您将看到您所看到的错误。

ld-linux.so.2 的绝对路径在链接时被硬编码到可执行文件中，并且在链接完成后无法轻易更改（更新：可以使用 [patchelf](http://nixos.org/patchelf.html)完成；请参阅下面的[答案](https://stackoverflow.com/a/44710599/50617)）。

要构建可与新 glibc 一起使用的可执行文件，请执行以下操作：

```
g++ main.o -o myapp ... \
   -Wl,--rpath=/path/to/newglibc \
   -Wl,--dynamic-linker=/path/to/newglibc/ld-linux.so.2 
```

`-rpath`链接器选项将使运行时加载程序在其中搜索库（`/path/to/newglibc`因此您不必`LD_LIBRARY_PATH`在运行它之前进行设置），并且该`-dynamic-linker`选项将“烘焙”路径以更正`ld-linux.so.2`到应用程序中。

如果您无法重新链接`myapp`应用程序（例如，因为它是第三方二进制文件），并非所有内容都会丢失，但它会变得更加棘手。一种解决方案是为其设置适当的`chroot`环境。另一种可能性是使用[rtldi](http://bitwagon.com/rtldi/rtldi.html)和[二进制编辑器](http://en.wikipedia.org/wiki/Binary_editor)。更新：或者你可以使用[patchelf](http://nixos.org/patchelf.html)。

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2017-06-22T23:01:36.267

这个问题很旧，其他答案很旧。“Employed Russian”的答案非常好且内容丰富，但只有在您拥有源代码时才有效。如果您不这样做，那么当时的替代方案非常棘手。幸运的是，现在我们有一个简单的解决方案来解决这个问题（正如他的一个回复中所评论的那样），使用[patchelf](http://nixos.org/patchelf.html)。你所要做的就是：

```
$ ./patchelf --set-interpreter /path/to/newglibc/ld-linux.so.2 --set-rpath /path/to/newglibc/ myapp 
```

之后，您可以执行您的文件：

```
$ ./myapp 
```

谢天谢地，无需`chroot`或手动编辑二进制文件。但是请记住在修补之前备份您的二进制文件，如果您不确定自己在做什么，因为它会修改您的二进制文件。修补后，您无法恢复解释器/rpath 的旧路径。如果它不起作用，您将不得不继续修补它，直到找到真正起作用的路径......好吧，它不一定是一个反复试验的过程。例如，在 OP 的示例中，他需要`GLIBC_2.3`，因此您可以使用以下命令轻松找到哪个 lib 提供该版本`strings`：

```
$ strings /lib/i686/libc.so.6 | grep GLIBC_2.3
$ strings /path/to/newglib/libc.so.6 | grep GLIBC_2.3 
```

理论上，第一个 grep 会为空，因为系统 libc 没有他想要的版本，第二个应该输出 GLIBC_2.3 因为它有`myapp`正在使用的版本，所以我们知道我们可以`patchelf`使用该路径的二进制文件。如果您遇到分段错误，请阅读最后的注释。

当您尝试在 linux 中运行二进制文件时，二进制文件会尝试加载链接器，然后是库，它们都应该在路径和/或正确的位置。如果您的问题与链接器有关，并且您想找出二进制文件正在寻找的路径，您可以使用以下命令进行查找：

```
$ readelf -l myapp | grep interpreter
  [Requesting program interpreter: /lib/ld-linux.so.2] 
```

如果您的问题与库有关，将为您提供正在使用的库的命令是：

```
$ readelf -d myapp | grep Shared
$ ldd myapp 
```

这将列出您的二进制文件需要的库，但您可能已经知道有问题的库，因为它们已经像 OP 一样产生错误。

“patchelf”适用于您在尝试运行程序时可能遇到的许多不同问题，这些问题与这两个问题有关。例如，如果你得到：`ELF file OS ABI invalid`，它可以通过设置一个新的加载器（`--set-interpreter`命令的一部分）来修复，正如我[在这里](https://stackoverflow.com/a/48654678/2193235)解释的那样。另一个示例是`No such file or directory`当您运行一个存在且可执行的文件时遇到的问题，如此处[所示](https://superuser.com/questions/248512/why-do-i-get-command-not-found-when-the-binary-file-exists)。在那种特殊情况下，OP 缺少指向加载程序的链接，但在您的情况下，您可能没有 root 访问权限并且无法创建链接。设置一个新的解释器可以解决你的问题。

感谢受雇的俄罗斯人和迈克尔潘科夫的洞察力和解决方案！

* * *

*分段错误的注意事项*：您可能会`myapp`使用多个库，其中大多数都可以，但有些则不行；然后你`patchelf`到一个新的目录，你得到分段错误。当你`patchelf`你的二进制文件时，你改变了几个库的路径，即使一些库最初位于不同的路径中。看看我下面的例子：

```
$ ldd myapp
./myapp: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required by ./myapp)
./myapp: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by ./myapp)
        linux-vdso.so.1 =>  (0x00007fffb167c000)
        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f9a9aad2000)
        libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f9a9a8ce000)
        libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f9a9a6af000)
        libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f9a9a3ab000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f9a99fe6000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f9a9adeb000)
        libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f9a99dcf000) 
```

请注意，大多数库都在`/lib/x86_64-linux-gnu/`但有问题的库 ( `libstdc++.so.6`) 位于`/usr/lib/x86_64-linux-gnu`。在我patchelf'ed`myapp`指向之后`/path/to/mylibs`，我得到了分段错误。出于某种原因，这些库与二进制文件并不完全兼容。由于`myapp`没有抱怨原始库，我将它们从复制`/lib/x86_64-linux-gnu/`到`/path/to/mylibs2`，并且我也`libstdc++.so.6`从`/path/to/mylibs`那里复制。然后我将它修补到`/path/to/mylibs2`，`myapp`现在可以工作了。如果您的二进制文件使用不同的库，并且您有不同的版本，则可能无法解决您的问题。:( 但如果可能的话，混合库可能是一种方式。这并不理想，但*也许*会奏效。祝你好运！

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-05-11T22:36:00.120

使用 LD_PRELOAD：将您的库放在 man lib 目录之外的某个位置并运行：

```
LD_PRELOAD='mylibc.so anotherlib.so' program 
```

参见：[维基百科文章](http://en.wikipedia.org/wiki/Dynamic_linker)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-11-04T21:01:45.650

首先，每个动态链接的程序最重要的依赖就是链接器。所有这些库都必须与链接器的版本相匹配。

让我们举个简单的例子：我有 newset ubuntu 系统，我在其中运行一些程序（在我的例子中是 D 编译器 - ldc2）。我想在旧的 CentOS 上运行它，但由于旧的 glibc 库，这是不可能的。我有

```
ldc2-1.5.0-linux-x86_64/bin/ldc2: /lib64/libc.so.6: version `GLIBC_2.15' not found (required by ldc2-1.5.0-linux-x86_64/bin/ldc2)
ldc2-1.5.0-linux-x86_64/bin/ldc2: /lib64/libc.so.6: version `GLIBC_2.14' not found (required by ldc2-1.5.0-linux-x86_64/bin/ldc2) 
```

我必须将所有依赖项从 ubuntu 复制到 centos。正确的方法如下：

首先，让我们检查所有依赖项：

```
ldd ldc2-1.5.0-linux-x86_64/bin/ldc2 
    linux-vdso.so.1 =>  (0x00007ffebad3f000)
    librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f965f597000)
    libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f965f378000)
    libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f965f15b000)
    libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f965ef57000)
    libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f965ec01000)
    libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f965e9ea000)
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f965e60a000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f965f79f000) 
```

linux-vdso.so.1 不是一个真正的库，我们不必关心它。

/lib64/ld-linux-x86-64.so.2 是链接器，Linux 使用它来链接可执行文件与所有动态库。

其余文件是真正的库，所有这些文件连同链接器都必须复制到 centos 中的某个位置。

假设所有库和链接器都在“/mylibs”目录中。

ld-linux-x86-64.so.2 - 正如我已经说过的 - 是链接器。它不是动态库，而是静态可执行文件。您可以运行它并看到它甚至有一些参数，例如 --library-path（我会回到它）。

在 linux 上，动态链接的程序可能只用它的名字就可以了，例如

```
/bin/ldc2 
```

Linux 将此类程序加载到 RAM 中，并检查为其设置了哪个链接器。通常，在 64 位系统上，它是 /lib64/ld-linux-x86-64.so.2 （在您的文件系统中，它是指向真正可执行文件的符号链接）。然后 linux 运行链接器并加载动态库。

你也可以稍微改变一下，做这样的把戏：

```
/mylibs/ld-linux-x86-64.so.2 /bin/ldc2 
```

这是强制linux使用特定链接器的方法。

现在我们可以回到前面提到的参数--library-path

```
/mylibs/ld-linux-x86-64.so.2 --library-path /mylibs /bin/ldc2 
```

它将运行 ldc2 并从 /mylibs 加载动态库。

这是使用选择的（不是系统默认的）库调用可执行文件的方法。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2018-09-22T07:45:25.210

## 设置 1：在没有专用 GCC 的情况下编译您自己的 glibc 并使用它

此设置可能会起作用并且速度很快，因为它不会重新编译整个 GCC 工具链，只需重新编译 glibc。

但它不可靠，因为它使用主机 C 运行时对象，例如glibc 提供的`crt1.o`、`crti.o`和。`crtn.o`在以下位置提到了这一点：[https](https://sourceware.org/glibc/wiki/Testing/Builds?action=recall&rev=21#Compile_against_glibc_in_an_installed_location) ://sourceware.org/glibc/wiki/Testing/Builds?action=recall&rev= 21#Compile_against_glibc_in_an_installed_location 这些对象执行 glibc 所依赖的早期设置，所以如果事情以美妙的方式崩溃，我不会感到惊讶和非常微妙的方式。

有关更可靠的设置，请参阅下面的设置 2。

构建 glibc 并在本地安装：

```
export glibc_install="$(pwd)/glibc/build/install"

git clone git://sourceware.org/git/glibc.git
cd glibc
git checkout glibc-2.28
mkdir build
cd build
../configure --prefix "$glibc_install"
make -j `nproc`
make install -j `nproc` 
```

### 设置 1：验证构建

test_glibc.c

```
#define _GNU_SOURCE
#include <assert.h>
#include <gnu/libc-version.h>
#include <stdatomic.h>
#include <stdio.h>
#include <threads.h>

atomic_int acnt;
int cnt;

int f(void* thr_data) {
    for(int n = 0; n < 1000; ++n) {
        ++cnt;
        ++acnt;
    }
    return 0;
}

int main(int argc, char **argv) {
    /* Basic library version check. */
    printf("gnu_get_libc_version() = %s\n", gnu_get_libc_version());

    /* Exercise thrd_create from -pthread,
     * which is not present in glibc 2.27 in Ubuntu 18.04.
     * https://stackoverflow.com/questions/56810/how-do-i-start-threads-in-plain-c/52453291#52453291 */
    thrd_t thr[10];
    for(int n = 0; n < 10; ++n)
        thrd_create(&thr[n], f, NULL);
    for(int n = 0; n < 10; ++n)
        thrd_join(thr[n], NULL);
    printf("The atomic counter is %u\n", acnt);
    printf("The non-atomic counter is %u\n", cnt);
} 
```

编译并运行`test_glibc.sh`：

```
#!/usr/bin/env bash
set -eux
gcc \
  -L "${glibc_install}/lib" \
  -I "${glibc_install}/include" \
  -Wl,--rpath="${glibc_install}/lib" \
  -Wl,--dynamic-linker="${glibc_install}/lib/ld-linux-x86-64.so.2" \
  -std=c11 \
  -o test_glibc.out \
  -v \
  test_glibc.c \
  -pthread \
;
ldd ./test_glibc.out
./test_glibc.out 
```

该程序输出预期的：

```
gnu_get_libc_version() = 2.28
The atomic counter is 10000
The non-atomic counter is 8674 
```

命令改编自[https://sourceware.org/glibc/wiki/Testing/Builds?action=recall&rev=21#Compile_against_glibc_in_an_installed_location](https://sourceware.org/glibc/wiki/Testing/Builds?action=recall&rev=21#Compile_against_glibc_in_an_installed_location)但`--sysroot`使其失败：

```
cannot find /home/ciro/glibc/build/install/lib/libc.so.6 inside /home/ciro/glibc/build/install 
```

所以我删除了它。

`ldd`输出确认`ldd`我们刚刚构建的 和 库实际上正在按预期使用：

```
+ ldd test_glibc.out
        linux-vdso.so.1 (0x00007ffe4bfd3000)
        libpthread.so.0 => /home/ciro/glibc/build/install/lib/libpthread.so.0 (0x00007fc12ed92000)
        libc.so.6 => /home/ciro/glibc/build/install/lib/libc.so.6 (0x00007fc12e9dc000)
        /home/ciro/glibc/build/install/lib/ld-linux-x86-64.so.2 => /lib64/ld-linux-x86-64.so.2 (0x00007fc12f1b3000) 
```

编译调试输出显示使用`gcc`了我的主机运行时对象，如前所述，这很糟糕，但我不知道如何解决它，例如它包含：

```
COLLECT_GCC_OPTIONS=/usr/lib/gcc/x86_64-linux-gnu/7/../../../x86_64-linux-gnu/crt1.o 
```

### 设置1：修改glibc

现在让我们修改 glibc：

```
diff --git a/nptl/thrd_create.c b/nptl/thrd_create.c
index 113ba0d93e..b00f088abb 100644
--- a/nptl/thrd_create.c
+++ b/nptl/thrd_create.c
@@ -16,11 +16,14 @@
    License along with the GNU C Library; if not, see
    <http://www.gnu.org/licenses/>.  */

+#include <stdio.h>
+
 #include "thrd_priv.h"

 int
 thrd_create (thrd_t *thr, thrd_start_t func, void *arg)
 {
+  puts("hacked");
   _Static_assert (sizeof (thr) == sizeof (pthread_t),
                   "sizeof (thr) != sizeof (pthread_t)"); 
```

然后重新编译重新安装glibc，重新编译重新运行我们的程序：

```
cd glibc/build
make -j `nproc`
make -j `nproc` install
./test_glibc.sh 
```

我们看到`hacked`按预期打印了几次。

这进一步证实了我们实际上使用的是我们编译的 glibc 而不是主机。

在 Ubuntu 18.04 上测试。

## 设置 2：crosstool-NG 原始设置

这是设置 1 的替代方案，它是我迄今为止实现的最正确的设置：据我观察，一切都是正确的，包括 C 运行时对象，例如`crt1.o`、`crti.o`和`crtn.o`.

在此设置中，我们将编译一个完整的专用 GCC 工具链，该工具链使用我们想要的 glibc。

这种方法唯一的缺点是构建需要更长的时间。但我不会冒险用更少的东西来进行生产设置。

[crosstool-NG](https://github.com/crosstool-ng/crosstool-ng)是一组脚本，可以为我们从源代码下载和编译所有内容，包括 GCC、glibc 和 binutils。

是的，GCC 构建系统非常糟糕，以至于我们需要一个单独的项目。

这种设置并不完美，因为[crosstool-NG 不支持构建没有额外`-Wl`标志](https://github.com/crosstool-ng/crosstool-ng/issues/1030)的可执行文件，这感觉很奇怪，因为我们自己构建了 GCC。但似乎一切正常，所以这只是一个不便。

获取 crosstool-NG，配置并构建它：

```
git clone https://github.com/crosstool-ng/crosstool-ng
cd crosstool-ng
git checkout a6580b8e8b55345a5a342b5bd96e42c83e640ac5
export CT_PREFIX="$(pwd)/.build/install"
export PATH="/usr/lib/ccache:${PATH}"
./bootstrap
./configure --enable-local
make -j `nproc`
./ct-ng x86_64-unknown-linux-gnu
./ct-ng menuconfig
env -u LD_LIBRARY_PATH time ./ct-ng build CT_JOBS=`nproc` 
```

构建大约需要三十分钟到两个小时。

我能看到的唯一强制性配置选项是使其与您的主机内核版本匹配以使用正确的内核头文件。使用以下命令查找您的主机内核版本：

```
uname -a 
```

这向我展示了：

```
4.15.0-34-generic 
```

所以在`menuconfig`我做：

*   `Operating System`
    *   `Version of linux`

所以我选择：

```
4.14.71 
```

这是第一个相同或更旧的版本。它必须更旧，因为内核向后兼容。

### 设置 2：可选配置

`.config`我们生成的有`./ct-ng x86_64-unknown-linux-gnu`：

```
CT_GLIBC_V_2_27=y 
```

要改变这一点，`menuconfig`请执行以下操作：

*   `C-library`
*   `Version of glibc`

保存`.config`，然后继续构建。

或者，如果您想使用自己的 glibc 源，例如从最新的 git 使用 glibc，请按[以下方式](https://github.com/crosstool-ng/crosstool-ng/issues/1024)进行：

*   `Paths and misc options`
    *   `Try features marked as EXPERIMENTAL`：设置为真
*   `C-library`
    *   `Source of glibc`
        *   `Custom location`: 说是
        *   `Custom location`
            *   `Custom source location`: 指向包含 glibc 源的目录

其中 glibc 被克隆为：

```
git clone git://sourceware.org/git/glibc.git
cd glibc
git checkout glibc-2.28 
```

### 设置2：测试一下

一旦您构建了您想要的工具链，请使用以下命令对其进行测试：

```
#!/usr/bin/env bash
set -eux
install_dir="${CT_PREFIX}/x86_64-unknown-linux-gnu"
PATH="${PATH}:${install_dir}/bin" \
  x86_64-unknown-linux-gnu-gcc \
  -Wl,--dynamic-linker="${install_dir}/x86_64-unknown-linux-gnu/sysroot/lib/ld-linux-x86-64.so.2" \
  -Wl,--rpath="${install_dir}/x86_64-unknown-linux-gnu/sysroot/lib" \
  -v \
  -o test_glibc.out \
  test_glibc.c \
  -pthread \
;
ldd test_glibc.out
./test_glibc.out 
```

除了现在使用了正确的运行时对象之外，一切似乎都像设置 1 一样工作：

```
COLLECT_GCC_OPTIONS=/home/ciro/crosstool-ng/.build/install/x86_64-unknown-linux-gnu/bin/../x86_64-unknown-linux-gnu/sysroot/usr/lib/../lib64/crt1.o 
```

### 设置 2：失败的有效 glibc 重新编译尝试

如下所述，使用 crosstool-NG 似乎是不可能的。

如果您只是重新构建；

```
env -u LD_LIBRARY_PATH time ./ct-ng build CT_JOBS=`nproc` 
```

然后您对自定义 glibc 源位置的更改会被考虑在内，但它会从头开始构建所有内容，使其无法用于迭代开发。

如果我们这样做：

```
./ct-ng list-steps 
```

它很好地概述了构建步骤：

```
Available build steps, in order:
  - companion_tools_for_build
  - companion_libs_for_build
  - binutils_for_build
  - companion_tools_for_host
  - companion_libs_for_host
  - binutils_for_host
  - cc_core_pass_1
  - kernel_headers
  - libc_start_files
  - cc_core_pass_2
  - libc
  - cc_for_build
  - cc_for_host
  - libc_post_cc
  - companion_libs_for_target
  - binutils_for_target
  - debug
  - test_suite
  - finish
Use "<step>" as action to execute only that step.
Use "+<step>" as action to execute up to that step.
Use "<step>+" as action to execute from that step onward. 
```

因此，我们看到 glibc 步骤与几个 GCC 步骤交织在一起，最明显`libc_start_files`的是 before `cc_core_pass_2`，这可能是最昂贵的步骤`cc_core_pass_1`。

为了只构建一个步骤，您必须首先`.config`在初始构建选项中设置“保存中间步骤”：

*   `Paths and misc options`
    *   `Debug crosstool-NG`
        *   `Save intermediate steps`

然后你可以尝试：

```
env -u LD_LIBRARY_PATH time ./ct-ng libc+ -j`nproc` 
```

但不幸的是，`+`所需的内容如下：[https ://github.com/crosstool-ng/crosstool-ng/issues/1033#issuecomment-424877536](https://github.com/crosstool-ng/crosstool-ng/issues/1033#issuecomment-424877536)

> 但是请注意，在中间步骤重新启动会将安装目录重置为该步骤期间的状态。即，您将拥有一个重建的 libc - 但没有使用此 libc 构建的最终编译器（因此，也没有像 libstdc++ 这样的编译器库）。

并且基本上仍然使重建速度太慢而无法进行开发，而且我不知道如何在不修补 crosstool-NG 的情况下克服这个问题。

此外，从`libc`step 开始似乎没有从 再次复制源`Custom source location`，进一步使该方法无法使用。

## 奖励：stdlibc++

如果您也对 C++ 标准库感兴趣，这是一个奖励：[如何编辑和重新构建 GCC libstdc++ C++ 标准库源？](https://stackoverflow.com/questions/21872229/how-to-edit-and-re-build-the-gcc-libstdc-c-standard-library-source/51946224#51946224)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-04-13T07:14:53.130

@msb 提供了一个安全的解决方案。

当我`import tensorflow as tf`在`CentOS 6.5`只有`glibc-2.12`.

```
ImportError: /lib64/libc.so.6: version `GLIBC_2.16' not found (required by /home/ 
```

我想提供一些细节：

首先安装`glibc`到你的主目录：

```
mkdir ~/glibc-install; cd ~/glibc-install
wget http://ftp.gnu.org/gnu/glibc/glibc-2.17.tar.gz
tar -zxvf glibc-2.17.tar.gz
cd glibc-2.17
mkdir build
cd build
../configure --prefix=/home/myself/opt/glibc-2.17  # <-- where you install new glibc
make -j<number of CPU Cores>  # You can find your <number of CPU Cores> by using **nproc** command
make install 
```

其次，按照同样的方式安装[patchelf](https://nixos.org/patchelf.html)；

第三，修补你的 Python：

```
[myself@nfkd ~]$ patchelf --set-interpreter /home/myself/opt/glibc-2.17/lib/ld-linux-x86-64.so.2 --set-rpath /home/myself/opt/glibc-2.17/lib/ /home/myself/miniconda3/envs/tensorflow/bin/python 
```

正如@msb 提到的

现在我可以`tensorflow-2.0 alpha`在`CentOS 6.5`.

参考：[https ://serverkurma.com/linux/how-to-update-glibc-newer-version-on-centos-6-x/](https://serverkurma.com/linux/how-to-update-glibc-newer-version-on-centos-6-x/)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-08-31T11:10:46.817

你可以考虑使用 Nix [http://nixos.org/nix/](http://nixos.org/nix/)吗？

> Nix 支持多用户包管理：多个用户可以安全地共享一个通用的 Nix 存储，安装软件不需要 root 权限，并且可以安装和使用不同版本的包。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-07-19T18:44:10.217

我不确定这个问题是否仍然相关，但还有另一种解决问题的方法：Docker。可以安装一个几乎空的 Source Distribution 容器（用于开发的 Distribution）并将文件复制到 Container 中。这样您就不需要创建 chroot 所需的文件系统。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-11T11:46:06.577

如果您仔细查看第二个输出，您会发现使用了库的新位置。也许仍然缺少作为 glibc 一部分的库。

我还认为您的程序使用的所有库都应该针对该版本的 glibc 进行编译。如果您可以访问该程序的源代码，那么重新编译似乎是最好的解决方案。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-07-08T16:32:31.427

“Employed Russian”是最好的答案之一，我认为所有其他建议的答案可能都行不通。原因很简单，因为当第一次创建应用程序时，它需要的所有 API 都在编译时解析。使用“ldd”你可以看到所有静态链接的依赖：

```
ldd /usr/lib/firefox/firefox
    linux-vdso.so.1 =>  (0x00007ffd5c5f0000)
    libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f727e708000)
    libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f727e500000)
    libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f727e1f8000)
    libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f727def0000)
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f727db28000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f727eb78000)
    libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f727d910000) 
```

但在运行时，firefox 也会加载许多其他动态库，例如（对于 firefox）加载了许多带有“glib”标签的库（即使静态链接也没有）：

```
 /usr/lib/x86_64-linux-gnu/libdbus-glib-1.so.2.2.2
 /lib/x86_64-linux-gnu/libglib-2.0.so.0.4002.0
 /usr/lib/x86_64-linux-gnu/libavahi-glib.so.1.0.2 
```

很多时候，您可以看到一个版本的名称被软链接到另一个版本。例如：

```
lrwxrwxrwx 1 root root     23 Dec 21  2014 libdbus-glib-1.so.2 -> libdbus-glib-1.so.2.2.2
-rw-r--r-- 1 root root 160832 Mar  1  2013 libdbus-glib-1.so.2.2.2 
```

因此，这意味着一个系统中存在不同版本的“库”——这不是问题，因为它是同一个文件，并且当应用程序具有多个版本依赖关系时，它将提供兼容性。

因此，在系统层面，所有的库几乎是相互依赖的，仅仅通过操作 LD_PRELOAD 或 LD_LIBRARY_PATH 来改变库的加载优先级并没有帮助——即使它可以加载，运行时它仍然可能崩溃。

[http://lightofdawn.org/wiki/wiki.cgi/-wiki/NewAppsOnOldGlibc](http://lightofdawn.org/wiki/wiki.cgi/-wiki/NewAppsOnOldGlibc)

最好的替代方法是 chroot（ER 简要提到）：但为此，您需要重新创建原始二进制执行的整个环境 - 通常从 /lib、/usr/lib/、/usr/lib/x86 等开始。您可以使用“Buildroot”或 YoctoProject，或者只使用现有 Distro 环境中的 tar。（如 Fedora/Suse 等）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-29T23:08:39.007

当我想在 Ubuntu 精确（glibc-2.15）上运行 chromium 浏览器时，我收到（典型）消息“...libc.so.6: version `GLIBC_2.19' not found...”。我考虑了这样一个事实，即永久不需要文件，而只是为了开始。所以我收集了浏览器和 sudo 所需的文件并创建了一个 mini-glibc-2.19- 环境，启动浏览器，然后再次将原始文件复制回来。所需的文件在 RAM 中，原始 glibc 是相同的。

```
as root
the files (*-2.15.so) already exist 
```

mkdir -p /glibc-2.19/i386-linux-gnu

```
/glibc-2.19/ld-linux.so.2 -> /glibc-2.19/i386-linux-gnu/ld-2.19.so
/glibc-2.19/i386-linux-gnu/libc.so.6 -> libc-2.19.so
/glibc-2.19/i386-linux-gnu/libdl.so.2 -> libdl-2.19.so
/glibc-2.19/i386-linux-gnu/libpthread.so.0 -> libpthread-2.19.so 
```

mkdir -p /glibc-2.15/i386-linux-gnu

```
/glibc-2.15/ld-linux.so.2 -> (/glibc-2.15/i386-linux-gnu/ld-2.15.so)
/glibc-2.15/i386-linux-gnu/libc.so.6 -> (libc-2.15.so)
/glibc-2.15/i386-linux-gnu/libdl.so.2 -> (libdl-2.15.so)
/glibc-2.15/i386-linux-gnu/libpthread.so.0 -> (libpthread-2.15.so) 
```

运行浏览器的脚本：

```
#!/bin/sh
sudo cp -r /glibc-2.19/* /lib
/path/to/the/browser &
sleep 1
sudo cp -r /glibc-2.15/* /lib
sudo rm -r /lib/i386-linux-gnu/*-2.19.so 
```

# javascript - 有人知道这种橡胶效果的算法吗？

> ID：847181
> 
> 赞同：0
> 
> 时间：2009-05-11T08:21:23.907
> 
> 标签：javascript, jquery, linux, animation, ubuntu

我正在做一些动画，我想在网络上实现这样[的](http://www.youtube.com/watch?v=hgQP-aFragQ)东西。我在想 HTML 画布可以做这种工作。因为我可以缩放图像的一部分。我只需要算法来使其真正起作用。

效果是弹性的，如果窗口小，恢复时窗口的弹性越大。我在想我可以在网络图像中进行这项工作。如果用户单击图像，它将以这种效果进行缩放，而不是无聊的缩放方式。

这是ubuntu，我知道我们可以看看源代码，看看它实际上是如何实现动画的。但我不知道在哪里可以找到它。或者我什至不了解用 linux 编写的代码，因为我只了解 php、javascript。基本上我不是软件开发人员，我的核心专长是网络开发。

[http://www.youtube.com/watch?v=hgQP-aFragQ](http://www.youtube.com/watch?v=hgQP-aFragQ)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-11T08:31:13.000

我相信你最好的选择是看看 John Resig 的[Processing.js](http://processingjs.org/exhibition)。

Processing是Java的动画语言；John 已使用画布将其移植到浏览器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-11T08:23:58.317

您不会找到可以为您执行此操作的基于 Web 的解决方案。如果您需要完成类似的操作，则必须在 Flash 或其他一些应用程序（Lenni 提到的 Java）中运行，这些应用程序在嵌入网页的单独媒体框中运行。

人们不想要大而华丽的动画，如果它变得更有用，看到一些“无聊”的东西会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T11:21:24.473

首先 - 我不知道他们在这里使用的实际算法。

但是，我会通过创建一个点网格（比如 10x10）来解决这个问题，每个点都通过阻尼弹簧连接到它的邻居。也可能值得用弹簧将边缘/角点锚定到屏幕上。

通过变形网格（拉伸和压缩弹簧）然后对弹簧响应进行建模，您会得到一些如图所示的有趣效果。如果您的动画是可预测的，那么您可能能够记录模式，以便点可以遵循预先计算的路径以获得更快的动画。

然后你需要弄清楚如何分割图像并将其映射到网格上。在服务器上进行一次拆分*可能*会更好，但是如果您使用画布，客户端可以这样做。

svg & vml 是一种可能性——它们可以在没有插件的情况下工作，并且与代码足够相似，但我认为你不会得到足够正确的图像变形。但是，您可以不受惩罚地缩放和旋转（并且快速），因此如果您只是将 2 个单元图像点锚定到网格而不是全部 4 个，您将获得一个有趣的动画 - 不太像视频，但非常好。

至于如何模拟阻尼弹簧，您需要跟踪每个点的质量（它的重量）、弹簧对每个点施加的力（压缩/拉伸程度的标量和矢量) 和点上的阻尼力（点速度平方的阻力）。

可以肯定的是，这是物理建模，但很有可能。

响应可能很慢。尤其是在 IE 上。Canvas 在 IE 上需要一个插件，所以如果你使用 canvas，IE 人不会看到它。SVG 几乎适用于除 IE 之外的所有东西，但它确实具有类似的 VML。[http://raphaeljs.com/](http://raphaeljs.com/)是一个使用任何可用资源的库。这将是一个调整的挑战:)

不管你怎么做，它总是在 chrome 中看起来最好，V8 javascript 引擎在这种工作上胜过其他一切。IE 拥有最慢的 javascript 引擎。

# javascript - 在 JavaScript 中将 Unix 时间戳转换为时间

> ID：847185
> 
> 赞同：1454
> 
> 时间：2009-05-11T08:23:28.053
> 
> 标签：javascript, date, time, time-format

我将时间作为 Unix 时间戳存储在 MySQL 数据库中，并将其发送到一些 JavaScript 代码。我怎样才能摆脱它？

例如，`HH/MM/SS`格式。

* * *

## 回答 #1

> 赞同：2094
> 
> 时间：2009-05-11T08:28:50.977

```
let unix_timestamp = 1549312452
// Create a new JavaScript Date object based on the timestamp
// multiplied by 1000 so that the argument is in milliseconds, not seconds.
var date = new Date(unix_timestamp * 1000);
// Hours part from the timestamp
var hours = date.getHours();
// Minutes part from the timestamp
var minutes = "0" + date.getMinutes();
// Seconds part from the timestamp
var seconds = "0" + date.getSeconds();

// Will display time in 10:30:23 format
var formattedTime = hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);

console.log(formattedTime);
```

有关 Date 对象的更多信息，请参阅[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)或[ECMAScript 5 规范](http://ecma-international.org/ecma-262/5.1/#sec-15.9)。

* * *

## 回答 #2

> 赞同：345
> 
> 时间：2011-05-21T00:44:36.023

```
function timeConverter(UNIX_timestamp){
  var a = new Date(UNIX_timestamp * 1000);
  var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  var year = a.getFullYear();
  var month = months[a.getMonth()];
  var date = a.getDate();
  var hour = a.getHours();
  var min = a.getMinutes();
  var sec = a.getSeconds();
  var time = date + ' ' + month + ' ' + year + ' ' + hour + ':' + min + ':' + sec ;
  return time;
}
console.log(timeConverter(0));
```

* * *

## 回答 #3

> 赞同：246
> 
> 时间：2009-05-11T08:31:47.977

JavaScript 以毫秒为单位工作，因此您首先必须将 UNIX 时间戳从秒转换为毫秒。

```
var date = new Date(UNIX_Timestamp * 1000);
// Manipulate JavaScript Date object here... 
```

* * *

## 回答 #4

> 赞同：158
> 
> 时间：2018-05-09T14:04:45.553

采用：

```
var s = new Date(1504095567183).toLocaleDateString("en-US")
console.log(s)
// expected output "8/30/2017" 
```

和时间：

```
var s = new Date(1504095567183).toLocaleTimeString("en-US")
console.log(s)
// expected output "3:19:27 PM" 
```

请参阅[Date.prototype.toLocaleDateString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString)

* * *

## 回答 #5

> 赞同：111
> 
> 时间：2016-03-09T11:37:06.480

## 现代解决方案（2020 年）

在新的世界里，我们应该转向标准的[`Intl`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl)JavaScript 对象，它有一个方便的[`DateTimeFormat`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat)构造函数和[`.format()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/format)方法：

```
function format_time(s) {
  const dtFormat = new Intl.DateTimeFormat('en-GB', {
    timeStyle: 'medium',
    timeZone: 'UTC'
  });

  return dtFormat.format(new Date(s * 1e3));
}

console.log( format_time(12345) );  // "03:25:45"
```

* * *

## 永恒的解决方案

但是为了 100% 兼容所有遗留的 JavaScript 引擎，这里是将秒格式化为的最短的单行解决方案`hh:mm:ss`：

```
function format_time(s) {
  return new Date(s * 1e3).toISOString().slice(-13, -5);
}

console.log( format_time(12345) );  // "03:25:45"
```

> 方法[`Date.prototype.toISOString()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString)以简化的扩展[**ISO 8601**](http://en.wikipedia.org/wiki/ISO_8601)格式返回时间，该格式**始终**为24 或 27 个字符长（即`YYYY-MM-DDTHH:mm:ss.sssZ`或 `±YYYYYY-MM-DDTHH:mm:ss.sssZ`分别）。时区始终为零 UTC 偏移量。

*此解决方案不需要任何第三方库，并且在所有浏览器和 JavaScript 引擎中都受支持。*

* * *

## 回答 #6

> 赞同：88
> 
> 时间：2012-10-11T21:02:04.497

我偏爱 Jacob Wright 的库，它以 PHP函数[`Date.format()`](https://github.com/jacwright/date.format)的风格实现 JavaScript 日期格式。[`date()`](http://www.php.net/manual/en/function.date.php)

```
new Date(unix_timestamp * 1000).format('h:i:s') 
```

* * *

## 回答 #7

> 赞同：34
> 
> 时间：2013-11-11T10:30:14.167

我会考虑使用像[momentjs.com](http://momentjs.com)这样的库，这使得这非常简单：

基于 Unix 时间戳：

```
var timestamp = moment.unix(1293683278);
console.log( timestamp.format("HH/mm/ss") ); 
```

基于 MySQL 日期字符串：

```
var now = moment("2010-10-10 12:03:15");
console.log( now.format("HH/mm/ss") ); 
```

* * *

## 回答 #8

> 赞同：32
> 
> 时间：2019-02-04T20:44:02.580

将秒格式化为 hh:mm:ss: 变体的最短单行解决方案：

```
console.log(new Date(1549312452 * 1000).toISOString().slice(0, 19).replace('T', ' '));
// "2019-02-04 20:34:12"
```

* * *

## 回答 #9

> 赞同：29
> 
> 时间：2016-06-24T09:26:30.607

此刻，您必须使用 unix 时间戳：

```
const dateTimeString = moment.unix(1466760005).format("DD-MM-YYYY HH:mm:ss"); 
```

* * *

## 回答 #10

> 赞同：24
> 
> 时间：2009-05-11T08:38:46.937

UNIX 时间戳是自 1970 年 1 月 1 日 00:00:00 UTC 以来的秒数（根据**Wikipedia** [）](http://en.wikipedia.org/wiki/Unix_time)。

Javascript 中 Date 对象的参数是自 1970 年 1 月 1 日 00:00:00 UTC 以来的**毫秒数（根据**[W3Schools Javascript 文档](http://www.w3schools.com/jsref/jsref_setTime.asp)）。

例如，请参见下面的代码：

```
 function tm(unix_tm) {
        var dt = new Date(unix_tm*1000);
        document.writeln(dt.getHours() + '/' + dt.getMinutes() + '/' + dt.getSeconds() + ' -- ' + dt + '<br>');

    }

tm(60);
tm(86400); 
```

给出：

```
1/1/0 -- Thu Jan 01 1970 01:01:00 GMT+0100 (Central European Standard Time)
1/0/0 -- Fri Jan 02 1970 01:00:00 GMT+0100 (Central European Standard Time) 
```

* * *

## 回答 #11

> 赞同：24
> 
> 时间：2018-11-05T13:25:26.030

这适用于 PHP 时间戳

```
var d = 1541415288860;
//var d =val.timestamp;

//NB: use + before variable name
var date = new Date(+d);

console.log(d);
console.log(date.toDateString());
console.log(date.getFullYear());
console.log(date.getMinutes());
console.log(date.getSeconds());
console.log(date.getHours());
console.log(date.toLocaleTimeString());
```

```
var d =val.timestamp;
var date=new Date(+d); //NB: use + before variable name

console.log(d);
console.log(date.toDateString());
console.log(date.getFullYear());
console.log(date.getMinutes());
console.log(date.getSeconds());
console.log(date.getHours());
console.log(date.toLocaleTimeString()); 
```

上述方法将生成此结果

```
1541415288860
Mon Nov 05 2018 
2018 
54 
48 
13
1:54:48 PM 
```

有很多方法可以完美地处理时间戳。不能一一列举

* * *

## 回答 #12

> 赞同：19
> 
> 时间：2015-08-10T11:48:09.277

使用[Moment.js](http://momentjs.com/)，您可以像这样获取时间和日期：

```
var dateTimeString = moment(1439198499).format("DD-MM-YYYY HH:mm:ss"); 
```

你只能得到时间使用这个：

```
var timeString = moment(1439198499).format("HH:mm:ss"); 
```

* * *

## 回答 #13

> 赞同：16
> 
> 时间：2011-11-01T19:11:18.483

上述解决方案的问题在于，如果小时、分钟或秒只有一位数字（即 0-9），则时间会出错，例如可能是 2:3:9，但应该是 02： 03:09。

根据[这个页面](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString)，使用 Date 的“toLocaleTimeString”方法似乎是一个更好的解决方案。

* * *

## 回答 #14

> 赞同：15
> 
> 时间：2012-05-10T14:24:29.613

另一种方式 - 从[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)日期开始。

```
var timestamp = 1293683278;
var date = new Date(timestamp * 1000);
var iso = date.toISOString().match(/(\d{2}:\d{2}:\d{2})/)
alert(iso[1]);
```

* * *

## 回答 #15

> 赞同：13
> 
> 时间：2016-01-14T00:43:34.847

```
function getTIMESTAMP() {
  var date = new Date();
  var year = date.getFullYear();
  var month = ("0" + (date.getMonth() + 1)).substr(-2);
  var day = ("0" + date.getDate()).substr(-2);
  var hour = ("0" + date.getHours()).substr(-2);
  var minutes = ("0" + date.getMinutes()).substr(-2);
  var seconds = ("0" + date.getSeconds()).substr(-2);

  return year + "-" + month + "-" + day + " " + hour + ":" + minutes + ":" + seconds;
}

//2016-01-14 02:40:01 
```

* * *

## 回答 #16

> 赞同：12
> 
> 时间：2016-11-06T11:51:22.590

根据@shomrat 的回答，这里有一个片段可以像这样自动写入日期时间（有点类似于 StackOverflow 的回答日期：）`answered Nov 6 '16 at 11:51`：

```
today, 11:23 
```

或者

```
yersterday, 11:23 
```

或（如果与今天不同但同一年）

```
6 Nov, 11:23 
```

或（如果比今天再过一年）

```
6 Nov 2016, 11:23 
```

* * *

```
function timeConverter(t) {     
    var a = new Date(t * 1000);
    var today = new Date();
    var yesterday = new Date(Date.now() - 86400000);
    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
    var year = a.getFullYear();
    var month = months[a.getMonth()];
    var date = a.getDate();
    var hour = a.getHours();
    var min = a.getMinutes();
    if (a.setHours(0,0,0,0) == today.setHours(0,0,0,0))
        return 'today, ' + hour + ':' + min;
    else if (a.setHours(0,0,0,0) == yesterday.setHours(0,0,0,0))
        return 'yesterday, ' + hour + ':' + min;
    else if (year == today.getFullYear())
        return date + ' ' + month + ', ' + hour + ':' + min;
    else
        return date + ' ' + month + ' ' + year + ', ' + hour + ':' + min;
} 
```

* * *

## 回答 #17

> 赞同：10
> 
> 时间：2014-10-08T04:41:20.590

不需要 40 KB 库的现代解决方案：

[Intl.DateTimeFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat)是格式化日期/时间的非文化帝国主义方式。

```
// Setup once
var options = {
    //weekday: 'long',
    //month: 'short',
    //year: 'numeric',
    //day: 'numeric',
    hour: 'numeric',
    minute: 'numeric',
    second: 'numeric'
},
intlDate = new Intl.DateTimeFormat( undefined, options );

// Reusable formatter
var timeStamp = 1412743273;
console.log( intlDate.format( new Date( 1000 * timeStamp ) ) ); 
```

* * *

## 回答 #18

> 赞同：8
> 
> 时间：2015-08-11T22:09:32.037

注意一些答案的零问题。例如，时间戳`1439329773`会被错误地转换为`12/08/2015 0:49`.

我建议使用以下方法来克服这个问题：

```
var timestamp = 1439329773; // replace your timestamp
var date = new Date(timestamp * 1000);
var formattedDate = ('0' + date.getDate()).slice(-2) + '/' + ('0' + (date.getMonth() + 1)).slice(-2) + '/' + date.getFullYear() + ' ' + ('0' + date.getHours()).slice(-2) + ':' + ('0' + date.getMinutes()).slice(-2);
console.log(formattedDate); 
```

现在结果：

```
12/08/2015 00:49 
```

* * *

## 回答 #19

> 赞同：6
> 
> 时间：2012-10-04T15:34:32.127

```
// Format value as two digits 0 => 00, 1 => 01
function twoDigits(value) {
   if(value < 10) {
    return '0' + value;
   }
   return value;
}

var date = new Date(unix_timestamp*1000);
// display in format HH:MM:SS
var formattedTime = twoDigits(date.getHours()) 
      + ':' + twoDigits(date.getMinutes()) 
      + ':' + twoDigits(date.getSeconds()); 
```

* * *

## 回答 #20

> 赞同：6
> 
> 时间：2017-02-24T12:33:36.447

您可以使用以下函数将时间戳转换为`HH:MM:SS`格式：

```
var convertTime = function(timestamp, separator) {
    var pad = function(input) {return input < 10 ? "0" + input : input;};
    var date = timestamp ? new Date(timestamp * 1000) : new Date();
    return [
        pad(date.getHours()),
        pad(date.getMinutes()),
        pad(date.getSeconds())
    ].join(typeof separator !== 'undefined' ?  separator : ':' );
} 
```

在不传递分隔符的情况下，它`:`用作（默认）分隔符：

```
time = convertTime(1061351153); // --> OUTPUT = 05:45:53 
```

如果要`/`用作分隔符，只需将其作为第二个参数传递：

```
time = convertTime(920535115, '/'); // --> OUTPUT = 09/11/55 
```

* * *

### 演示

```
var convertTime = function(timestamp, separator) {
    var pad = function(input) {return input < 10 ? "0" + input : input;};
    var date = timestamp ? new Date(timestamp * 1000) : new Date();
    return [
        pad(date.getHours()),
        pad(date.getMinutes()),
        pad(date.getSeconds())
    ].join(typeof separator !== 'undefined' ?  separator : ':' );
}

document.body.innerHTML = '<pre>' + JSON.stringify({
    920535115 : convertTime(920535115, '/'),
    1061351153 : convertTime(1061351153, ':'),
    1435651350 : convertTime(1435651350, '-'),
    1487938926 : convertTime(1487938926),
    1555135551 : convertTime(1555135551, '.')
}, null, '\t') +  '</pre>';
```

另请参阅[**此 Fiddle**](https://jsfiddle.net/1xf26snv/14/)。

* * *

## 回答 #21

> 赞同：6
> 
> 时间：2017-07-04T06:59:09.990

```
function getDateTimeFromTimestamp(unixTimeStamp) {
    let date = new Date(unixTimeStamp);
    return ('0' + date.getDate()).slice(-2) + '/' + ('0' + (date.getMonth() + 1)).slice(-2) + '/' + date.getFullYear() + ' ' + ('0' + date.getHours()).slice(-2) + ':' + ('0' + date.getMinutes()).slice(-2);
}

const myTime = getDateTimeFromTimestamp(1435986900000);
console.log(myTime); // output 01/05/2000 11:00
```

* * *

## 回答 #22

> 赞同：5
> 
> 时间：2011-05-21T00:54:49.763

```
function timeConverter(UNIX_timestamp){
 var a = new Date(UNIX_timestamp*1000);
     var hour = a.getUTCHours();
     var min = a.getUTCMinutes();
     var sec = a.getUTCSeconds();
     var time = hour+':'+min+':'+sec ;
     return time;
 } 
```

* * *

## 回答 #23

> 赞同：5
> 
> 时间：2012-02-16T14:45:57.363

请参阅*[日期/纪元转换器](http://www.esqsoft.com/javascript_examples/date-to-epoch.htm)*。

你需要`ParseInt`，否则它不会工作：

* * *

```
if (!window.a)
    window.a = new Date();

var mEpoch = parseInt(UNIX_timestamp);

if (mEpoch < 10000000000)
    mEpoch *= 1000;

------
a.setTime(mEpoch);
var year = a.getFullYear();
...
return time; 
```

* * *

## 回答 #24

> 赞同：5
> 
> 时间：2020-06-17T20:28:28.557

# 最短的

```
(new Date(ts*1000)+'').slice(16,24) 
```

```
let ts = 1549312452;
let time = (new Date(ts*1000)+'').slice(16,24);

console.log(time);
```

* * *

## 回答 #25

> 赞同：4
> 
> 时间：2015-06-30T14:10:03.327

```
function getDateTime(unixTimeStamp) {

    var d = new Date(unixTimeStamp);
    var h = (d.getHours().toString().length == 1) ? ('0' + d.getHours()) : d.getHours();
    var m = (d.getMinutes().toString().length == 1) ? ('0' + d.getMinutes()) : d.getMinutes();
    var s = (d.getSeconds().toString().length == 1) ? ('0' + d.getSeconds()) : d.getSeconds();

    var time = h + '/' + m + '/' + s;

    return time;
}

var myTime = getDateTime(1435986900000);
console.log(myTime); // output 01/15/00 
```

* * *

## 回答 #26

> 赞同：4
> 
> 时间：2020-01-10T04:00:24.900

# 时刻.js

> 在js中将时间戳转换为日期字符串

[https://momentjs.com/](https://momentjs.com/)

```
moment().format('YYYY-MM-DD hh:mm:ss');
// "2020-01-10 11:55:43"

moment(1578478211000).format('YYYY-MM-DD hh:mm:ss');
// "2020-01-08 06:10:11" 
```

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2014-03-14T15:23:54.407

如果要将 Unix 持续时间转换为实际的小时、分钟和秒，可以使用以下代码：

```
var hours = Math.floor(timestamp / 60 / 60);
var minutes = Math.floor((timestamp - hours * 60 * 60) / 60);
var seconds = Math.floor(timestamp - hours * 60 * 60 - minutes * 60 );
var duration = hours + ':' + minutes + ':' + seconds; 
```

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2019-01-29T15:11:49.340

下面的代码还提供 3 位毫秒，非常适合控制台日志前缀：

```
const timeStrGet = date => {
    const milliSecsStr = date.getMilliseconds().toString().padStart(3, '0') ;
    return `${date.toLocaleTimeString('it-US')}.${milliSecsStr}`;
};

setInterval(() => console.log(timeStrGet(new Date())), 299);
```

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2020-02-03T04:46:45.213

@Aron 给出的答案有效，但它对我不起作用，因为我试图从 1980 年开始转换时间戳。所以我做了一些更改，如下所示

```
function ConvertUnixTimeToDateForLeap(UNIX_Timestamp) {
    var dateObj = new Date(1980, 0, 1, 0, 0, 0, 0);
    dateObj.setSeconds(dateObj.getSeconds() + UNIX_Timestamp);
    return dateObj;  
}

document.body.innerHTML = 'TimeStamp : ' + ConvertUnixTimeToDateForLeap(1269700200);
```

因此，如果您有一个从另一个十年左右开始的时间戳，请使用它。它为我节省了很多头痛。

* * *

## 回答 #30

> 赞同：2
> 
> 时间：2021-03-21T06:29:48.960

如果 Timestamp 是数字整数字符串，则必须先将其转换为整数：

```
<!DOCTYPE html>

<input type="text" id="Date_Timestamp" size="50" oninput='
document.getElementById("Date_Timestamp_Conversion").innerText = 
new Date(this.value) + " _ (Converted to Local Time) \n" +
new Date(this.value).toString() + " _ (Converted to Local Time) \n" +
new Date(this.value).toUTCString() + " _ (Converted to Universal Time, UTC, GMT, GMT+0, GMT-0) \n" +
Date.parse(this.value) + " _ (Timestamp _ The Date is first converted to Universal Time, then converted to Timestamp)\n" +
( isNaN(this.value) ? "Not a Number _ (Timestamp to Local Time)" : new Date(parseInt(this.value)) + " _ (Converted to Local Time)" ) + "\n" +
( isNaN(this.value) ? "Not a Number _ (Timestamp to Universal Time)" : new Date(parseInt(this.value)).toUTCString() + " _ (Converted to Universal Time)" ) + "\n" +
"";'>
<br>
<span id="Date_Timestamp_Conversion">(Type\Paste a "Date" or "Timestamp" in the input box above!)<br></span>
<br>
2021/03/19 = March 19 2021 _ ("Year/Month/Day" _ Supported)<br>
03/19/2021 = March 19 2021 _ ("Month/Day/Year" _ Supported)<br>
19/03/2021 = Invalid Date _ ("Day/Month/Year" _ Not Supported)<br>
<br>

<script>

d = new Date();
document.getElementById("Date_Timestamp").value =
d.getFullYear() + "/" + (d.getMonth() + 1) + "/" + d.getDate() + ", " + d.toLocaleTimeString([], {hour12:false, timeZoneName:"short"});

</script>
```

* * *

## 回答 #31

> 赞同：2
> 
> 时间：2021-12-03T13:36:51.163

试试这个 ：

```
 new Date(1638525320* 1e3).toISOString()  //2021-12-03T09:55:20.000Z 
```

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2022-02-05T09:37:06.953

有多种方法可以将 unix 时间戳转换为时间 (HH/MM/SS)

1.  使用`new Date()`- 这是内置的 javascript
2.  moment 包 - 这是一个著名的节点模块，但它将被弃用。
3.  dayjs 包 - 这是最新和快速增长的节点模块之一

## 使用新的日期（）

```
const dateTimeStr = new Date(1504052527183).toLocaleString()
const result = (dateTimeStr.split(", ")[1]).split(":").join("/")
console.log(result) 
```

## 使用时刻

```
const moment = require('moment')
const timestampObj = moment.unix(1504052527183);
const result = timestampObj.format("HH/mm/ss")
console.log(result); 
```

## 使用 day.js

```
const dayjs = require('dayjs')
const result = dayjs(1504052527183).format("HH/mm/ss")
console.log(result); 
```

您可以使用在线时间转换[工具检查时间戳到时间的转换](https://www.unixtimer.com)

# security - 在 NT 服务器中使用 UI 调用另一个 AP

> ID：847188
> 
> 赞同：0
> 
> 时间：2009-05-11T08:25:15.350
> 
> 标签：security, winapi, windows-services, windows-vista

我有一个 NT 服务器应用程序在 Windows Vista 的后台运行，我希望服务器在服务器收到特定命令时启动 Notepad.exe，但它不起作用，我尝试使用 shellexec、winexec 和 createprocess 函数，都是失败的。记事本总是在服务器桌面上运行，Vista 会显示一条消息让我切换它。有没有办法正确启动它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-11T08:43:05.743

您是否尝试过在结构成员中使用`CreateProcess`要在其中打开它的桌面的名称进行调用？见[她](http://msdn.microsoft.com/en-us/library/ms686331(VS.85).aspx)。[_](http://msdn.microsoft.com/en-us/library/ms682425.aspx) [_](http://msdn.microsoft.com/en-us/library/ms686329(VS.85).aspx) [_](http://msdn.microsoft.com/en-us/library/ms686744(VS.85).aspx)`lpDesktop``STARTUPINFO`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T12:02:28.147

这是因为[Vista Session 0 隔离](http://www.microsoft.com/whdc/system/vista/services.mspx)。您的服务在终端服务会话 0 中运行，您的用户登录到会话 1 或更高版本，两者之间的交互受到严格限制。

官方支持的方式是在用户桌面上运行一个帮助应用程序，通过某种 IPC（例如管道、套接字）与您的服务通信。然后，当您的服务想要与用户桌面交互时，它会要求帮助应用程序为您执行此操作。

# mysql - 关于 MySQL 的大小写忽略

> ID：847192
> 
> 赞同：0
> 
> 时间：2009-05-11T08:27:12.493
> 
> 标签：mysql

列名是 MySQL 5.0 的 Case Ignore，但是，至于表名，Case Exact 是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-17T09:35:28.150

这归结为您的文件系统是否区分大小写，以及`lower_case_table_names`变量设置为什么。

有关完整详细信息，请参阅[标识符大小写敏感性](http://dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitivity.html)。

# python - Django中用户定义的派生数据

> ID：847201
> 
> 赞同：2
> 
> 时间：2009-05-11T08:32:27.633
> 
> 标签：python, django, user-defined-functions

如何让我的用户将自己的自定义公式应用于数据表以派生新字段？

我正在开发一个[Django](http://www.djangoproject.com)应用程序，它将为开放网络上的订阅用户存储和处理大量数据。在一页请求中考虑 100-10,000 个传感器读数。我将使用这些数据绘制图表并显示包含它的表格。我希望我的用户定义传感器组，他们将在我的网站上注册自己（即它们对应于 django 模型）。

我想让用户能够创建从他们的传感器数据派生的字段（作为设置过程的一部分）。例如，用户可能知道他们的平均房屋温度为 (温度传感器 1 + 温度传感器 2) / 2，并希望将其显示在图表上。他们可能还想要一些更有趣的东西，比如太阳能热水加热是（温度输出 - 温度输入）* 流量 * 转换常数。然后，我将为他们以及查看此传感器数据页面的其他所有人保存这些定义的公式。

主要问题是如何定义系统中心的公式。我是否只有一个用户定义的字符串来定义公式（比如 100 个字符长）并自己解析它 - 用输入样本替换用户定义并将其命名为 toast？

**更新**

最后，我得到了我想要的答案：一种评估服务器上存储的用户功能的安全方法。在定义函数时也在客户端上评估相同的函数将是使 UI 直观的好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-11T09:44:18.933

我会计算出您想要支持哪些操作 [+,-,*,/,(,),etc] 并开发客户端 (javascript) 来编辑这些值并将其应用于数据的新字段。我认为不需要在服务器端做任何事情，因此您最终将获得响应更快、更愉快的用户体验。

如果您允许用户保存他们的公式并在他们重新访问该站点时重新加载它们，您可以让他们的浏览器进行所有计算。只需提供一些通用方法来添加通过将其论坛之一应用于您的数据而生成的数据列。

我想下一步是允许他们将这些操作应用于新生成的列。

您是否考虑过将他们的数据发布到谷歌电子表格中？这将节省大量开发工作，因为它们已经允许您定义公式等并将其应用于数据。我不太确定数据限制（您可以发布和操作多少数据）请注意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-11T10:41:43.723

取决于你的客户是谁。

如果这是在 WWW 上“对公众开放”，您必须自己解析表达式。您可以使用 Python 编译器来编译 Python 语法。您还可以为 Python 语法的子集发明自己的编译器。有很多例子；从[ply](http://www.dabeaz.com/ply/)项目开始。

如果这是内部的（“在防火墙后面”），请发布一段 Python 代码并执行该代码。

为他们提供可用的环境`from math import *`功能。

围绕他们提供的代码行折叠以下内容：

```
def userFunc( col1, col2, col3, ... ):
   result1= {{ their code goes here }}
   return result1 
```

然后您可以执行函数定义并使用定义的函数而不会发生坏事。

虽然有些人喜欢吹嘘这`exec`是“安全问题”，但这并不比用户共享密码更安全问题，而且管理员会故意做一些愚蠢的事情，比如在你的程序运行时删除重要文件或随机关闭电源。

`exec`如果您允许任何人访问它，这只是一个安全问题。对于内部应用程序，您了解用户。训练他们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-11T08:41:14.077

另一位用户在 C 语言中提出了[类似的问题](https://stackoverflow.com/questions/28124/calculating-user-defined-formulas-with-c)。在那篇文章中，Warren 建议可以从

```
(a + c) / b 
```

进入[逆波兰符号](http://en.wikipedia.org/wiki/Reverse_Polish_notation)

```
a c + b / 
```

哪个更容易处理。

在这种情况下，您可以截取公式模型的保存并从用户定义的公式生成后缀符号。一旦你有了后缀符号，编写一个从左到右计算公式的循环就相当简单了。

至于在 Django 中的实现，剩下的核心问题是如何将不同的输入字段映射到公式中。简单的解决方案是表示派生字段的模型使用与每个输入定义的符号名称（“a”、“b”或“c”）的多对多关系。

如果性能真的很关键，您可能会在将后缀公式应用于数据之前以某种方式进一步预处理它。

# crystal-reports - 向 Crystal Reports 添加具有透明度的图像

> ID：847204
> 
> 赞同：14
> 
> 时间：2009-05-11T08:33:07.100
> 
> 标签：crystal-reports, transparency

Crystal Reports 是否真的不支持具有透明度的图像？

我们在工作中使用它，水晶报表的人告诉我它不支持透明度。我简直不敢相信，所以我花了最后 20 分钟在谷歌上搜索，认为他可能是对的。在这个时代，这似乎绝对令人难以置信。

任何人都可以确认 CR 是否支持透明度，如果支持，您是如何做到的（我们不受要插入的图像类型的限制 - png、gif 等）。

作为记录，我们使用的是 VS 2008（版本 10.5）附带的 CR 版本。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2010-12-29T16:28:26.220

CR 不支持透明度，但您可以使用 wmf 图像来解决您的问题。我正在使用 CR 12 (2008)，我需要将图像作为签名（作为水印）放在另一个图像上。

例子：

Background_image.jpg 签名_image.jpg

使用“Inkscape”（免费软件）将 Signature_image.jpg 转换为 wmf 文件。

在报告中，我们有“Background_image.jpg”和“Signature_image.wmf”图像，效果很好！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-11-12T14:34:34.323

在寻找同样的问题时刚刚到达这里。不幸的是，直到今天这都是真的:(

为可能再次访问这里的用户回答这个问题。

[添加到 Crystal Reports 时不保留图像的透明背景](https://www.sdn.sap.com/irj/servlet/prt/portal/prtroot/com.sap.km.cm.docs/oss_notes_boj/sdn_oss_boj_erq/sap(bD1lbiZjPTAwMQ==)/bc/bsp/spn/scn_bosap/notes%7B6163636573733d36393736354636443646363436353344333933393338323636393736354637333631373036453646373436353733354636453735364436323635373233443330333033303331333133393339333333393333%7D.do)

我按照以下方式实现了解决方案。

在我的情况下，使用打印页面颜色（即白色）绘制透明区域。

我想将图像放在页眉中，并在其上放置一些文字。

在 CR 设计模式下。

1.  右键单击页眉部分 -> 选择部分专家
2.  选择页眉 -> 点击插入
3.  在页眉中选中“Underlay following section”-> 单击“确定”。
4.  回到设计中，在“页眉 a”部分包含图像。
5.  在“页眉 b”部分中包含我想在图像上显示的文本（即我希望是透明的）。

希望这对未来的访客有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T10:23:13.043

我尝试了另一项工作并且成功了。如果您希望图像作为报告中的水印，请将您的报告用作主报告的详细信息部分中的子报告，并将图像保留在主报告页面标题中，并使用“部分专家”中的“覆盖以下部分”选项. 所有线条和文本都将正确显示在图像顶部。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-01-19T14:50:03.307

正如 AR_Italy 所说，确认 wmf 文件是要走的路，即使 SAP 网站说不支持透明图像，所以感谢 AR_Italy。我唯一要补充的是，这些也可以从 Adob​​e Illustrator 中导出（确保您的图像首先具有透明背景）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-14T09:51:14.927

如果您的图像具有白色背景并且您的懒惰只需检查一下：右键单击您的报告，选择报告和报告选项并选中“保留原始图像颜色深度”

# asp.net - asp.net 中的 UI 映射

> ID：847206
> 
> 赞同：0
> 
> 时间：2009-05-11T08:33:51.187
> 
> 标签：asp.net

我只是想知道在 asp.net 中是否有更简单的方法可以从对象为 html 控件分配值，反之亦然。手动操作很痛苦

```
//assign value
txtFirstName.Text = person.FirstName;

//retrieve value
var p = new Person();
p.FirstName = txtFirstName.Text; 
```

然而，“务实”地做这件事也有点痛苦，因为你可以在[这段代码](http://code.google.com/p/dam-simple-architecture/source/browse/trunk/src/DSA/DSA.Helpers/UIMapper.cs)中看到很多案例，这是基于[这篇文章](http://www.emxsoftware.com/Domain+Driven+Design/Hooking+your+Domain+Model+and+UI+Layer)的想法。

```
if ((ctrl as TextBox) != null)
{
    var txt = ctrl as TextBox;
    if (p.PropertyType == typeof (string))
        txt.Text = p.GetValue(data, null).ToString();
    else if (p.PropertyType == typeof (decimal))
        txt.Text = p.GetValue(data, null).ToString();
}
else if ((ctrl as DropDownList) != null)
{
    var dropdown = ctrl as DropDownList;
    dropdown.SelectedValue = p.GetValue(data, null).ToString();
} 
```

我找不到任何其他聪明的方法来自动化这个。有人能给我指出一个聪明的方法吗，因为我正在做的表单实际上有 100 多个字段，我只是不想手动编码。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T09:59:15.337

听起来不错的老式 DataBinding 可能会有所帮助？

[绑定到业务对象](http://msdn.microsoft.com/en-us/library/ms178368.aspx)

[对象数据源示例](http://msdn.microsoft.com/en-us/library/ms178538.aspx)

[绑定到数据库](http://msdn.microsoft.com/en-us/library/ms178361.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T08:46:19.013

我们使用[mygenerationsoftware](http://www.mygenerationsoftware.com/)生成基本的 UI - DB 映射以避免手动执行此操作，然后在需要进行一些自定义的地方，我们手动更改代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-11T09:18:43.283

要在回发时检索数据，您可以返回 Request 对象并执行

字符串[] _ArrayOfFields = 新字符串[]{"FirstName"};

字符串 _FirstNameValue = Request.Form[_ArrayOfFields[0]];

ETC

然后，您可以在为控件设置值时执行类似的操作

((TextBox)Page.Controls[Page.FindControl(ArrayOfFields[0])]).Text = "新值";

# blackberry - 黑莓 - 应用程序签名

> ID：847208
> 
> 赞同：4
> 
> 时间：2009-05-11T08:34:33.573
> 
> 标签：blackberry, code-signing

从互联网上用于签署 BB 应用程序的信息来看，我可以猜测我们只需要 .cod 文件来签署应用程序，而不需要源代码。

有人可以确认一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-11T08:46:49.420

编译代码时会自动生成 .cod 文件。如果您使用任何受控 API：Runtime API、Blackberry Apps API 和 Crypto API，您只需要对其进行签名。

然后，您在 Blackberry 上注册（这是免费的，但需要信用卡），他们会向您发放一个签名密钥，然后您可以使用它来签署所有未来的 cod 文件。

我使用带有 Blackberry JDE 插件的 Eclipse，通过导航到 Blackberry -> Request Signatures.. 对话框，您将看到是否有任何 .cod 文件需要签名。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-22T18:26:45.947

我在 2009 年 2 月写了一篇关于这个的文章，它似乎帮助了很多人：
[BlackBerry Code Signing Help, Part II](http://zechariahs.org/blog/2009/02/28/blackberry-code-signing-help-p2/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-11T12:53:20.657

对@Fermin 进行轻微修正。如果您没有源代码，则需要 .cod 文件和 .csl 文件（以及可选的 .cso 文件）——所有这些都由 RAPC 生成（通常通过 JDE 或 Eclipse 插件调用） ）。

.cod 是要加载到设备上的文件，.csl 和 .cso 是 BlackBerry 签名工具的文件，告诉它需要哪些签名（分别列出您的应用程序所需的必需和可选密钥）。如果您没有这 2 个文件，签名工具会认为不需要签名并且不会对 .cod 进行签名，这将无法在您的设备上运行。

如果没有生成 .csl 文件，则表示您的 .cod 不需要签名，无需签名即可在设备上运行。

编辑：代码签名密钥也只有 20 美元，这是一个快速的过程。

# c# - 在 C# 中，当您在空对象上调用扩展方法时会发生什么？

> ID：847209
> 
> 赞同：377
> 
> 时间：2009-05-11T08:35:27.660
> 
> 标签：c#, parameters, null, extension-methods

该方法是使用空值调用还是给出空引用异常？

```
MyObject myObject = null;
myObject.MyExtensionMethod(); // <-- is this a null reference exception? 
```

如果是这种情况，我将永远不需要检查我的“this”参数是否为空？

* * *

## 回答 #1

> 赞同：435
> 
> 时间：2009-05-11T08:37:31.663

这将正常工作（没有例外）。扩展方法不使用虚拟调用（即它使用“call” il 指令，而不是“callvirt”），因此没有空检查，除非您自己在扩展方法中编写它。这在某些情况下实际上很有用：

```
public static bool IsNullOrEmpty(this string value)
{
    return string.IsNullOrEmpty(value);
}
public static void ThrowIfNull<T>(this T obj, string parameterName)
        where T : class
{
    if(obj == null) throw new ArgumentNullException(parameterName);
} 
```

ETC

从根本上说，对静态调用的调用是非常直接的——即

```
string s = ...
if(s.IsNullOrEmpty()) {...} 
```

变成：

```
string s = ...
if(YourExtensionClass.IsNullOrEmpty(s)) {...} 
```

显然没有空检查。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2009-05-11T08:52:54.183

**除了 Marc Gravell 的正确答案。**

如果很明显 this 参数为空，您可能会从编译器收到警告：

```
default(string).MyExtension(); 
```

在运行时运行良好，但会产生警告`"Expression will always cause a System.NullReferenceException, because the default value of string is null"`。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2010-04-27T20:29:10.433

正如您已经发现的那样，由于扩展方法只是被美化的静态方法，它们将`null`通过传入的引用被调用，而不会`NullReferenceException`被抛出。但是，由于它们看起来像调用者的实例方法，它们的*行为*也应该如此。然后，大多数情况下，您应该检查`this`参数，如果是`null`. 如果方法明确地处理`null`值并且它的名称适当地表明它，那么不这样做是可以的，如下例所示：

```
public static class StringNullExtensions { 
  public static bool IsNullOrEmpty(this string s) { 
    return string.IsNullOrEmpty(s); 
  } 
  public static bool IsNullOrBlank(this string s) { 
    return s == null || s.Trim().Length == 0; 
  } 
} 
```

前段时间我也写[了一篇关于这个的博客文章。](http://codecrafter.blogspot.com/2008/07/c-extension-methods-and-null-references.html)

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2009-05-11T08:40:04.797

一个 null 将被传递给扩展方法。

如果该方法尝试访问对象而不检查它是否为空，那么是的，它将抛出异常。

这里的一个人写了“IsNull”和“IsNotNull”扩展方法来检查引用是否传递为null。就我个人而言，我认为这是一种反常现象，不应该被曝光，但它是完全有效的 c#。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-08-20T12:01:22.200

正如其他人指出的那样，在空引用上调用扩展方法会导致 this 参数为空，并且不会发生任何其他特殊情况。这引发了使用扩展方法编写保护子句的想法。

您可以阅读这篇文章作为示例：[如何降低圈复杂度：保护子句](http://www.codinghelmet.com/?path=howto/reduce-cyclomatic-complexity-guard-clause)短版是这样的：

```
public static class StringExtensions
{
    public static void AssertNonEmpty(this string value, string paramName)
    {
        if (string.IsNullOrEmpty(value))
            throw new ArgumentException("Value must be a non-empty string.", paramName);
    }
} 
```

这是可以在空引用上调用的字符串类扩展方法：

```
((string)null).AssertNonEmpty("null"); 
```

调用工作正常只是因为运行时将成功调用空引用上的扩展方法。然后你可以使用这个扩展方法来实现没有杂乱语法的保护子句：

```
 public IRegisteredUser RegisterUser(string userName, string referrerName)
    {

        userName.AssertNonEmpty("userName");
        referrerName.AssertNonEmpty("referrerName");

        ...

    } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-11T08:38:33.333

扩展方法是静态的，所以如果你对这个 MyObject 不做任何事情，它不应该是一个问题，一个快速测试应该验证它:)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-05-05T16:50:50.013

`myObject.MyExtensionMethod();`当为 null 时永远不会抛出 Null 引用异常`myObject`......但如果**没有正确处理 null** **，它将抛出异常`MyExtensionMethod()`**。

[https://dotnetfiddle.net/KqwLya](https://dotnetfiddle.net/KqwLya)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-11T09:07:41.990

当你希望你的文件具有可读性和垂直性时，几乎没有什么黄金法则。

*   埃菲尔值得一说的是，封装到方法中的特定代码应该针对某些输入起作用，如果满足某些先决条件并确保预期输出，该代码是可行的

在您的情况下- DesignByContract 已损坏...您将在空实例上执行一些逻辑。

# c# - 在 TreeView 中禁用键输入

> ID：847210
> 
> 赞同：1
> 
> 时间：2009-05-11T08:37:07.670
> 
> 标签：c#, winforms, treeview

我的表单中有一个 TreeView，我不想为其启用键输入。这意味着如果我有这个树结构：

```
Root
|
-- Abba
|
-- Basic
|
-- Center 
```

...并按`b`键。我不想选择“基本”。我只希望用户能够使用鼠标输入来选择节点。

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-11T08:47:28.310

在树视图的按键事件中

```
 if(Char.IsDigit(e.KeyChar) || Char.IsLetter(e.KeyChar))
  {
       e.Handled = true;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T08:42:14.480

第一个想法：您可以重载 OnKey* 事件以不执行任何操作。

# java - MyEclipse：还值得用吗？

> ID：847219
> 
> 赞同：5
> 
> 时间：2009-05-11T08:40:30.863
> 
> 标签：java, eclipse, myeclipse

自 2005 年以来，我们使用 MyEclipse 作为我们的标准开发工具。我们主要将它用于 Java 应用程序，但有时我们也将它用于 Groovy 并且可能是其他东西，例如 DB navigator 等。

我们的许可证应该在几个月后更新，我正在重新考虑使用它的决定。MyEclipse 的一个不错的特性是调试器，它允许我们调试客户端/服务器应用程序。热部署也是一个不错的功能。所有这些东西都可以在没有 MyEclipse 的情况下完成，并且比较 MyEclipse 7.1 的内存占用量，而 Eclipse Ganymede 最后一个胜出。许可证价格无关紧要。

那么问题是我不再使用 MyEclipse 做了什么？

欢迎提出意见。

路易斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-11T09:40:52.683

我们曾经使用 MyEclipse，但随着时间的推移我们停止了使用，并没有真正错过它。我们现在在 Ganymede EE 上，发现它拥有我们需要的一切，现在已经实现了一些与 MyEclipse 捆绑在一起的东西。跨各种来源（如 .css、.js 和 .sql）的语法突出显示非常适合开箱即用。而且我们一直使用内置的远程调试器——它在 imo 中非常简洁，但我没有意识到 MyEclipse 在这方面有什么特别之处。当然，您可以在尝试时同时安装 Eclipse 和 MyEclipse。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-07-08T04:52:16.470

我在 2002 年到 2005 年之间使用 MyEclipse 大约 3 年。目前，Ganymede 附带的功能恕我直言，没有它就可以生活

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-11T09:36:01.133

一个很好的 JavaScript/HTML/CSS 编辑支持，如果你担心的话。这是我在长期使用 IntelliJ 之后转向 Netbeans 而不是 Eclipse 的主要原因之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-01-10T13:11:01.853

MyEclipse 8 允许您配置许多选项中的一些以提高启动速度。

v7 存在许多问题，尤其是与代理 Internet 连接有关的问题，但现在这些问题似乎已得到修复。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T15:36:07.237

我使用 BEA 的 Workshop Studio 有一段时间了，我真正使用的主要功能是控制单击 JSF/JSP 以跳转到源代码。同样，我希望能够找到给定方法的所有引用，并让结果集包含 JSF/JSP 引用。我永远无法让后者工作……可能是配置错误。JSF WYSIWYG 有时也很有用。我让我的执照失效了，不想再支付他们要的钱（100 美元 - 800 美元）。所以我相信 MyEclipse 也应该以更少的成本提供这些功能，但是 JSF/JSP 链接和搜索在我的初始安装中不起作用。所以我又回到了 Eclipse EE，我不相信它提供了任何这些特性（谁能证实这一点？）。假设它没有并且我可以让它在 MyEclipse 中工作，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-15T20:15:30.653

多年来，我也是一个忠实的粉丝，但我意识到当 Eclipse 有错误时，MyEclipse 也会有同样的错误，他们会等到 Eclipse 修复它。

那么.. 我为什么要为 MyEclipse 付费？IntelliJ 在第三年变得更加稳定和便宜。

我现在在 Fedora 下尝试了 MyEclipse，但效果并不好 - GUI 错误，所以我无法使用。比在 Ubuntu 下差很多:(

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2009-05-11T10:36:12.937

用于 PHP 的 Netbeans 是最好的。它还支持数据库，即您可以在 netbeans 中测试您的 sql 查询并查看结果。我已经使用它很长一段时间了，没有发现任何问题...当您正在寻找更改时，请尝试一下。

# http - RESTful HTTP 响应代码

> ID：847224
> 
> 赞同：7
> 
> 时间：2009-05-11T08:41:20.847
> 
> 标签：http, rest, response

我正在开发一个简单的 RESTful API，并且完全爱上了它的简约。但我不确定各种情况下正确的 HTTP 响应代码：

1.  格式不正确的查询

2.  格式正确的查询是指不存在的资源

3.  资源已成功删除

4.  资源编辑成功

我目前认为 1 会是`403 Forbidden`；2 将是`410 Gone`；3 和 4 将是`202 Accepted`. 他们听起来对吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-11T08:54:12.340

对于#1，403 表明您的应用程序理解了请求，但不会满足它（即当前用户由于某种原因无权执行此操作）。我认为 400 bad request 在这种情况下可能更有意义。

对于＃2 - 我认为 404 会更有意义，即找不到资源，除非资源确实存在于某个时候，然后被删除，在这种情况下 410 将是公平的 - 但没有多少客户知道如何处理410。

对于 #3 和 #4 - 如果您成功处理了删除，则为 200，如果删除已排队等待，则为 202，并将在以后“带外”处理。

[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)以相当容易理解的术语很好地解释了每个响应代码的含义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-11T08:45:40.123

1.  400
2.  404
3.  200
4.  200
5.  201 - 资源创建成功

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-11T08:53:13.603

1）。400 - 标准错误请求，403 表示请求格式正确但您无权访问它

2）。404 - 410 表示资源确实存在但已被故意移动

3）。和 4)。如果在您发送响应时操作已成功发生，则为 200，如果操作未决，则为 202。在实践中，202 可能用于删除操作（它们可能会受到审查），但您可能希望也可能不希望立即返回 200，因此它看起来实际上已被用户删除。这是一个设计问题恕我直言。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-11T09:11:09.457

[获取 Richardson 和 Ruby 的书](https://rads.stackoverflow.com/amzn/click/com/0596529260)- 它有一个有用的附录，关于您的问题，无论哪种方式都需要阅读

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-11T08:50:15.777

为什么不使用标准的[http 响应代码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。您将免费获得 http 的所有优化（例如 303、304）/基础设施。

# instant-messaging - 带有推送通知的实时聊天

> ID：847227
> 
> 赞同：6
> 
> 时间：2009-05-11T08:43:01.517
> 
> 标签：instant-messaging

我正在为我的网站开发私人消息功能，有没有办法从服务器获取推送通知，用户收到了新消息？

我知道的唯一技术是通过 ajax 不断轮询服务器以查看是否有新消息，并在需要时重新加载信使窗口。

感谢您的任何反馈！

UPD：到目前为止，已经确定了以下方向：

1) [Comet](http://ajaxian.com/archives/comet-a-new-approach-to-ajax-applications)
2) [BOSH](http://en.wikipedia.org/wiki/BOSH) - 同步 HTTP 上的双向流
3) [XMPP](http://en.wikipedia.org/wiki/XMPP) - 这是 google talk 的基础

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-11T09:40:16.553

您可能想研究 XMPP 和 BOSH。非常像彗星，ejabberd 结合 nginx 可以在一个非常小的盒子上维持 1000 个连接。

看看我的一个项目[www.vooices.us](http://www.vooices.us)看看我们用 XMPP 和 BOSH 做了什么。

[http://www.ejabberd.im/](http://www.ejabberd.im/)

[http://github.com/ssoper/jquery-bosh/tree/master](http://github.com/ssoper/jquery-bosh/tree/master) JQueryBosh - 通过 HTTP 快速轻松地访问 XMPP

设置和安装相对容易。

保罗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T08:47:37.920

服务器无法将信息推送到客户端，但您始终可以使用[Comet](http://ajaxian.com/archives/comet-a-new-approach-to-ajax-applications)。是的，您会轮询服务器，但不会经常轮询。您将保持每个连接打开大约 30 秒（这是我经常看到使用的时间间隔），然后在需要时打开一个新连接。

**编辑：** Adobe Flash 允许持久连接到服务器，所以你可以使用它。有关详细信息，请参阅[本文](http://railspikes.com/2007/6/27/juggernaut/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-11T09:28:26.557

听起来彗星可能链接到一些有用的东西（看看谷歌的 GTalk）：

[http://alex.dojotoolkit.org/2006/02/what-else-is-burried-down-in-the-depths-of-googles-amazing-javascript/](http://alex.dojotoolkit.org/2006/02/what-else-is-burried-down-in-the-depths-of-googles-amazing-javascript/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-06-04T11:36:22.857

有很多很好的库可以帮助你做到这一点

XMPP - BOSH 是我在我的网站上使用的一个很好的组合

XMPP 服务器

Ejabberd，Openfire 我使用 ejabberd

您可以使用 Strophe 和 Ejabberd 在 javascript 中捕获通知。如果您想从代码发送通知

有像 JAXL 和 XMPPHP 这样的库可以让你这样做，但这是在 PHP 中的。

# asp.net-mvc - 如何在 asp.net MVC 中使用 Server.Transfer 方法？

> ID：847232
> 
> 赞同：6
> 
> 时间：2009-05-11T08:45:39.890
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我正在尝试将其用于登录页面。

```
if (Session["UserID"] == null)
     Server.Transfer("/Account/Login", true); 
```

但是我得到了异常->执行子请求/帐户/登录时出错。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-11-11T01:42:11.783

[你来做这件事！](https://stackoverflow.com/questions/799511/how-to-simulate-server-transfer-in-asp-net-mvc/1242525#1242525)

```
 return new MVCTransferResult(...); 
```

请查看我的答案（链接）以及接受的答案。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-11T08:49:56.433

要使用服务器传输方法，您可以从 Simon Weaver 那里查看，[但](https://stackoverflow.com/questions/799511/how-to-simulate-server-transfer-in-asp-net-mvc/1242525#1242525)在您的问题的上下文中，我会使用重定向操作。

```
RedirectToAction(new {
   controller="Account", 
   action="Login"
}); 
```

让它告诉登录控制器回到哪里尝试

```
RedirectToAction( new {
   controller="Account",
   action="Login",
   new RouteValueDictionary { 
      {"actionToGoBackTo", "theActionName"},
      {"controllerToGoBackTo", "theControllerName"}
   }); 
```

请注意，登录操作需要使用两个字符串参数，actionToGoBackTo 和 controllerToGoBackTo。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-10T21:40:16.450

您应该在 Server.Transfer 中获得与您想要的完全相同的结果。

```
public ActionResult Index() {
    ......
      var url = "/MyContoller?param=xxx";
      Server.TransferRequest(url, true);
      return new EmptyResult();
} 
```

# iphone - 如何从 iPhone 程序中的证书中获取公钥？

> ID：847240
> 
> 赞同：3
> 
> 时间：2009-05-11T08:48:21.773
> 
> 标签：iphone, encryption, rsa

现在我有一个包含公钥的证书，我想在 iPhone SDK 编程中从中获取公钥，并使用公钥通过 RSA 加密字符串。我应该怎么办？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2010-04-12T08:39:26.387

```
SecKeyRef publicKeyReference = NULL;
NSMutableDictionary* queryPublicKey;

SecItemCopyMatching((CFDictionaryRef)queryPublicKey, (CFTypeRef *)&publicKeyReference); 
```

publicKeyReference - 是您的公钥表示；queryPublicKey - 是您的证书表示；SecItemCopyMatching - 允许您从证书中检索公钥的功能！

# javascript - 通过Firefox扩展从网页中删除元素

> ID：847243
> 
> 赞同：0
> 
> 时间：2009-05-11T08:49:07.247
> 
> 标签：javascript, html, firefox, xpi

I'm going to develop a firefox extension which adds a button beside the file input fields (the `<input type="file">`tag) when a file is selected.

包含扩展逻辑的文件 overlay.js 通过以下方法管理“文件选择”事件：

```
var xpitest = {
    ...
    onFileChosen: function(e) {
        var fileInput = e.explicitOriginalTarget;
        if(fileInput.type=="file"){
            var parentDiv = fileInput.parentNode;
            var newButton = top.window.content.document.createElement("input");
            newButton.setAttribute("type", "button");
            newButton.setAttribute("id", "Firefox.Now_button_id");
            newButton.setAttribute("value", "my button");
            newButton.setAttribute("name", "Firefox.Now_button_name");
            parentDiv.insertBefore(newButton, fileInput);
        }
    }
    ...
}

window.addEventListener("change", function(e) {xpitest.onFileChosen(e)},false); 
```

我的问题是，每次我选择一个文件时，都会添加一个新按钮，请看这张图：

[http://img11.imageshack.us/img11/5844/sshotn.png](http://img11.imageshack.us/img11/5844/sshotn.png)

如果我多次选择**同一个文件，则不会出现新按钮（这是正确的）。**

正如我们所见，在第一个文件输入时，只选择了一个文件。

在第二个中，我选择了两个不同的文件，实际上已经创建了两个按钮......

第三，我选择了三个不同的文件。

正确的行为应该是这样的：

*   选择文件后，在输入字段旁边创建 my_button
*   如果 my_button 存在，删除它并创建另一个（我**需要**这个，因为我应该将它连接到一个自定义事件，该事件将对文件名执行某些操作）

我的问题是：如何正确删除按钮？请注意，my_button html 代码不会出现在页面源代码中！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-11T08:54:18.453

如果我想得太简单了，请原谅我，但你不能这样做吗？

```
var button = document.getElementById('Firefox.Now_button_id')
button.parentNode.removeChild(button) 
```

这是你要找的吗？如果我误解了你，请随时纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T10:25:25.903

解决了。我使用以下方法为每个设置了一个 ID：

```
onPageLoad: function(e){
    var inputNodes = top.window.content.document.getElementsByTagName("input");       
    for(var i=0; i<inputNodes.length; i++){
    if(inputNodes[i].type=="file")
         inputNodes[i].setAttribute("id",i.toString());
    } 
} 
```

我只在页面加载时调用此方法：

```
var appcontent = document.getElementById("appcontent");   // browser
if(appcontent)
    appcontent.addEventListener("DOMContentLoaded", xpitest.onPageLoad, true); 
```

然后我以这种方式修改了 onFileChosen 方法：

```
onFileChosen: function(e) {
    var fileInput = e.explicitOriginalTarget;
    if(fileInput.type=="file"){
        var parentDiv = fileInput.parentNode;         
        var buttonId = fileInput.id + "Firefox.Now_button_id";
        var oldButton = top.window.content.document.getElementById(buttonId);
        if(oldButton!=null){
            parentDiv.removeChild(oldButton);
            this.count--;
        }
        var newButton = top.window.content.document.createElement("input");
        newButton.setAttribute("type", "button");      
        newButton.setAttribute("id", buttonId);
        newButton.setAttribute("value", "my button");
        newButton.setAttribute("name", "Firefox.Now_button_name");
        parentDiv.insertBefore(newButton, fileInput);
        this.count++;
    }
} 
```

# java - 通过 JDBC 'ping' 数据库的最佳方法是什么？

> ID：847246
> 
> 赞同：15
> 
> 时间：2009-05-11T08:50:01.487
> 
> 标签：java, jdbc

我正在尝试确定通过 JDBC ping 数据库的最佳方式。“最佳”是指快速和低开销。例如，我考虑过执行这个：

```
"SELECT 1 FROM DUAL" 
```

但我相信 DUAL 表是特定于 Oracle 的，我需要更通用的东西。

请注意，它`Connection`有一个`isClosed()`方法，但 javadoc 指出这不能用于测试连接的有效性。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T02:26:06.693

使用 JDBC 4，您可以从连接接口使用`isValid(int)`( [JavaDoc )。](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#isValid%28int%29)这基本上为你做了试用声明。

一些驱动程序通过向数据库发送正确的虚拟 SQL 来实现这一点，而一些驱动程序直接使用低级操作来减少解析开销。

但是请注意超时，一些驱动程序（DB/400 和 Oracle Thin）确实会为每次调用生成一个新的时间线程，这对于大多数池验证场景来说是不可接受的）。而且 Oracle 似乎也没有使用准备好的语句，所以它有点依赖隐式缓存。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-11T08:58:16.810

是的，那将是仅 Oracle 的，但在 JDBC 中没有通用的方法来执行此操作。

大多数连接池实现都有一个配置参数，您可以在其中指定将用于 ping 的 SQL，从而将责任推到用户身上。

这似乎是最好的方法，除非有人为此想出了一个小帮助工具（当然，它排除了使用可能更快的非基于 SQL 的方法，如[Oracle 的内部 ping 函数](http://www.orindasoft.com/public/Oracle_JDBC_JavaDoc/javadoc1110/oracle/jdbc/OracleConnection.html#pingDatabase())）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-11T09:09:06.217

我也不知道通用解决方案。对于 iSeries 上的 IBM UDB（可能还有其他 DB2 系统），它将是

```
select 1 from SYSIBM.SYSDUMMY1; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-02T18:37:41.583

MySQL 有一个很好的机制，记录在这个[SO answer](https://stackoverflow.com/a/5446031/152061)中。从答案：

> ```
> "/* ping */ SELECT 1" 
> ```
> 
> 这实际上会导致驱动程序向服务器发送 ping 并返回一个虚假的、轻量级的结果集。

话虽如此，[@eckes 的答案](https://stackoverflow.com/a/12208137/152061)是最好的（使用 JDBC 4's `Connection.isValid(int)`）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-09-07T15:46:46.390

您可以尝试从连接元数据中获取数据库名称并执行匹配的 sql 语句。例如

```
Connection con = null;
Statement st = null;
ResultSet rs = null;
try {
  con = dataSource.getConnection();
  String dbProductName = con.getMetaData().getDatabaseProductName();
  Statement st = con.createStatement();
  if ( "PostgreSQL".equalsIgnoreCase(dbProductName) ) {
    rs = st.executeQuery("select version();");
  } else if ( "Oracle".equalsIgnoreCase(dbProductName) ) {
    rs = st.executeQuery("select 1 from dual");
  } else {
   ...
  }
} catch ( Exception ex ) {
  System.out.prinln("DB not reachable");
} finally {
   // close statement, connection etc.
   ...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-11T09:07:04.377

我可能会为此吃午饭，但是您能否简单地执行一些无意义的查询，例如：

```
SELECT * FROM donkey_giraffe_87 
```

我不太了解 JDBC 的错误处理，但也许您可以检查一下数据库是否至少告诉您该表不存在。如果 JDBC 的错误代码是特定于供应商的，那么 Spring Framework 有一些实用程序可以将这些代码映射到更有意义的异常。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2009-05-11T09:10:06.823

只需发出以下查询就足够了

```
SELECT 1 
```

# entity-framework - 从存储库而不是 EF 实体返回 POCO 对象的优点/缺点是什么？

> ID：847254
> 
> 赞同：8
> 
> 时间：2009-05-11T08:52:58.037
> 
> 标签：entity-framework, orm, repository-pattern

按照 Rob 的做法，我拥有由 Linq to SQL 向导生成的类，然后是那些作为 POCO 的类的副本。在我的存储库中，我返回这些 POCO 而不是 Linq to SQL 模型：

```
从 DataContext.Customer 中的 c 返回
       其中 c.ID == id
       选择新的 MyPocoModels.Customer { ID = c.ID, Name = c.Name }

```

我知道这样做的好处是 POCO 模型可以更容易地实例化，因此这将使我的代码更具可测试性。

我现在正在从 Linq 迁移到 SQL 再到 Entity Framework，并且我已经完成了一本 EF 书籍的一半。通过从我的存储库而不是 EF 实体返回 POCO，我似乎会失去很多好处。

我还没有真正接受单元测试，所以我觉得我在浪费大量时间创建这些额外的 POCO 并编写代码来填充它们，而我似乎获得的只是可测试的代码，但我也在由于无法跟踪我的对象，将会失去 EF 的许多好处。

有没有人对所有这些 ORM/Repository 东西的相对新手有任何建议？

安东尼

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-13T19:44:37.980

人们不喜欢自动生成的对象（例如在 LINQ to SQL 中）的另一个原因是它们内置的“魔法”。

通常魔法是不可见的，你永远不会注意到它，但是当你尝试序列化其中一个对象然后反序列化它（例如使用 Web 服务时）时，它与数据源的内部连接被破坏，需要特殊的黑客攻击被用来“把魔法放回去”。

使用 POCO，您不必担心这些事情，并且可以更好地分离数据和服务层。缺点当然是你必须写很多无聊的 POCO -> 魔术对象和魔术对象 -> POCO 转换代码。但最后我认为这通常是值得的，尤其是对于大型或复杂的项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-13T18:50:02.017

主要原因是很多人喜欢以特定的思维方式开发他们的模型：例如 DDD。他们可能希望对状态（而不是枚举）等事物使用特定模式（如 Spec 或 State） - 或者您可能希望使用 Factory 进行实例化。

当事情变得更复杂时，当您尝试将表用作对象时，OO 会中断。简单的网站可以正常工作 - 但是当您处理大事时，它会变得丑陋。

所以——和往常一样——这取决于你认为你的项目会变成什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-13T19:35:17.123

我的经验是，当您开始编写一些复杂的查询时，.Include 方法毫无价值，您会发现自己：

a) 编写大量查询来获取您想要的数据或 b) 滥用匿名类型在单个查询中加载数据，然后编写大量代码只是为了将该数据传递给您的实体。

POCO 是要走的路，恕我直言。

# c# - 使用命名互斥体

> ID：847255
> 
> 赞同：3
> 
> 时间：2009-05-11T08:53:01.327
> 
> 标签：c#, mutex

我有两个运行相同 Windows 服务的实例。他们检查彼此的健康状况并报告是否发现任何问题。我有一项需要执行的关键工作，所以我使用故障转移方法运行它，它在主服务器中运行，如果主服务器没有响应，它在从服务器中运行。这项工作需要通过特定的串行端口进行通信，我正在尝试使用 Mutex 来检查竞争条件。我无法访问生产，所以在部署之前我想确保我的方法是好的。所以请建议我使用 Mutex 是否适合给定的情况。

```
if (iAmRunningInSlave)
{
   HealthClient hc = new HealthClient();
   if (!hc.CheckHealthOfMaster())
      return this.runJobWrapper(withMutex, iAmRunningInSlave);
   else
      return true; //master is ok, we dont need to run the job in slave
}
return this.runJobWrapper(withMutex, iAmRunningInSlave); 
```

然后在 runJobWrapper

```
bool runJobWrapper(bool withMutex, bool iAmRunningInSlave)
{
   if (!withMutex)
      return this.runJob(iAmRunningInSlave); //the job might be interested to know 
   Mutex mutex = null;
   string mutexName = this.jobCategory + "-" + this.jobTitle; //this will be unique for given job
   try
   {
      mutex = Mutex.OpenExisting(mutexName);
      return false; //mutex is with peer, return false which will re-trigger slave
   }
   catch
   {
      try
      { //mean time mutex might have created, so wrapping in try/catch
         mutex = new Mutex(true /*initiallyOwned*/, mutexName);
         return this.runJob(iAmRunningInSlave); //the job might be interested to know where I am running
      }
      finally
      {
         if (null!=mutex) mutex.ReleaseMutex();
      }
      return false;
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-11T08:57:17.747

我最近有一个类似的问题。

该类的设计与`Mutex`.NET 中的普通类有点奇怪/不同。

使用`OpenMutex`来检查现有`Mutex`的并不是很好，因为您必须捕获异常。

更好的方法是使用

```
Mutex(bool initiallyOwned, string name, out bool createdNew) 
```

构造函数，并检查`createdNew`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T09:00:47.913

您不希望从`runJobWrapper`任何地方检查返回值 - 这是故意的吗？无论如何，返回值的实际含义并不明显。此外，您真的不应该捕获每一个`OpenExisiting`可能抛出的异常 - 内存不足？堆栈溢出？等等等等。只要抓住你想要正确处理的那个。

此外，您的代码看起来有些脆弱 - 如果您有竞争条件，我不会感到惊讶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T11:22:29.893

我注意到 mutex.ReleaseMutex() 没有立即释放互斥锁..我不得不调用 GC.Collect()

# ruby-on-rails - 急切加载在 Rails 2.2.2 中不起作用

> ID：847263
> 
> 赞同：0
> 
> 时间：2009-05-11T08:55:08.063
> 
> 标签：ruby-on-rails, activerecord, include, associations, eager-loading

我正在使用类似于以下的模型：

```
class Owner < ActiveRecord::Base
  has_many :owned
end

class Owned < ActiveRecord::Base
  belongs_to :owner
end 
```

您可以假定 own_id 和 owner_id 位于正确的位置。问题在于，在应用程序中不同 mvc 链的控制器中，

```
@owner = Owned.find_by_id(owned_id, :include => :owner) 
```

不起作用。我自然地得到了owner_id，列，但不能这样做

```
@owned.owner # is just nil 
```

是什么赋予了？我的意思是，我可以在将结果传递给视图之前直接进行分配：

```
@owned.owner = Owner.find_by_id(@owned.owner_id) 
```

但这似乎很愚蠢。来吧，让我难堪。我错过了什么明显的事情？这适用于我的应用程序的其他地方，但我无法发现差异。有一些常见的陷阱吗？任何事情都有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T09:16:43.067

我只是继续赢。相应的“所有者”对象已从所有者表中删除。

有趣的是，在我创建帐户之前，我的基于 cookie 的身份有很多业力。然后我的 cookie 损坏了，我只能问愚蠢的问题，我的业力是 1。哦，好吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-11T10:08:04.763

StackOverflow 上的声誉不是基于 cookie。您可能需要重新登录或其他方式。

您的问题似乎暗示您在 owner 表中有一个owned_id 字段。你不需要它，应该删除它。

您只需要拥有表中的 owner_id 整数字段。

您可以通过多种方式访问​​您的记录和关系。首先让我们首先访问所有者记录。

```
owner = Owner.find(owner_id)
owned = owner.owned # this is an array since you a 'has_many' relationship 
```

通常，您希望通过以下方式访问拥有的记录：

```
for owned in owner.owned
 puts owned.name # or access any other attributes
end 
```

如果您想首先访问拥有的记录，您可以执行以下操作：

```
@owned = Owned.find(:all, :conditions => [ "owner_id = ?", owner_id ])
# @owned is an array so you need to iterate through it
for owned in @owned
  puts owned.owner.name # or access any other attribute from the owner
end 
```

一旦你让这些查询正常工作，你可以通过在你的 find 语句中添加 :include 来担心急切加载。请注意，这可能对优化感兴趣，但从一开始就没有必要。

我希望这有帮助。

# .net - SqlCommand.CommandTimeout 和 SqlConnection.ConnectionTimeout 有什么区别？

> ID：847264
> 
> 赞同：93
> 
> 时间：2009-05-11T08:55:44.943
> 
> 标签：.net, sqlconnection, sqlcommand

`SqlCommand.CommandTimeout`.NET和`SqlConnection.ConnectionTimeout`.NET之间有什么区别吗？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2009-05-11T08:58:24.487

是的。[`CommandTimeout`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)是完成单个命令需要多长时间。[`ConnectionTimeout`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectiontimeout.aspx)是开始与服务器建立连接需要多长时间。

例如，您可能正在执行运行时间相对较长的查询——它们需要 10 分钟才能完成是完全可以的，但如果开始连接需要 10 分钟，您就会知道出现了严重错误。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-05-11T09:02:11.360

**`SqlCommand.CommandTimeout`**= SQL 查询的超时限制。`SELECT`意味着，（例如： ， ）查询可以花费多少时间`UPDATE`来执行。如果超过`SqlCommand.CommandTimeout`，则停止执行。将发生命令超时错误。

**`SqlConnection.ConnectionTimeout`**= 连接的超时限制。意味着，您的连接对象可以尝试连接多长时间。如果超过指定时间，则停止连接。将发生连接超时错误。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-05-11T09:03:42.060

`ConnectionTimeout`指定尝试**打开**`SqlConnection`. 它与`Connection.Open()`命令有关。

尽管

`SqlCommand.CommandTimeout`指定 SqlCommand 在超时之前等待的持续时间。这发生在打开连接并且`ExecuteXXX`在 Command 对象上调用其中一个方法之后。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-07-15T04:07:07.233

附加信息

默认值为`CommandTimeout`30 秒。零 (0) 表示没有限制。您只能`CommandTimeout`在编码中设置值。

默认值为`ConnectiontTimeout`15 秒。零（0）也表示没有限制。小于零值（负值）将得到`ArgumentException`. 您可以`ConnectionTimeout`在编码和配置文件中设置值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-01-06T07:11:55.640

```
select @@LOCK_TIMEOUT //get the TIMEOUT,default is -1
set LOCK_TIMEOUT = 600//set TIMEOUT with ms 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-17T22:01:56.837

关于 CommandTimeout 的快速说明，因为它是 Connection 和 Command 对象的属性...

Connection 对象上的 CommandTimeout 设置对同一 Connection 上的 Command 对象上的 CommandTimeout 设置没有影响；也就是说，Command 对象的 CommandTimeout 属性不继承 Connection 对象的 CommandTimeout 值。

因此 Connection 对象上的 CommandTimeout 设置仅影响在 Connection 对象下执行的命令（不使用 Command 对象）。

例如，当您连接到存储过程并向命令对象添加参数并使用连接对象的连接执行命令对象时，您需要在命令对象上设置 CommandTimeout 并在 Connection 对象上设置 ConnectionTimeout 以覆盖两者默认值。在连接对象上设置 CommandTimeout 不会覆盖命令对象命令的默认超时。

[https://docs.microsoft.com/en-us/sql/ado/reference/ado-api/commandtimeout-property-ado?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/ado/reference/ado-api/commandtimeout-property-ado?view=sql-server-ver15) [https://docs.microsoft.com/en-us /sql/ado/reference/ado-api/connectiontimeout-property-ado?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/ado/reference/ado-api/connectiontimeout-property-ado?view=sql-server-ver15)

# web-applications - 最好的基于网络的视频播放器 HD - h264？

> ID：847265
> 
> 赞同：2
> 
> 时间：2009-05-11T08:56:34.690
> 
> 标签：web-applications, video-streaming, h.264, flash

我正在寻找具有以下功能的网络播放器： - 以高清播放 h264 - Feeware - 良好的缓冲控制

实际上，我正在使用 JwPlayer 但它不支持缓冲！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-11T09:11:49.067

我个人喜欢[“Flowplayer”](http://www.flowplayer.org/)，因为它提供了插件扩展点。它还支持流式传输（[RTMP](http://www.flowplayer.org/plugins/streaming/rtmp.html)和[伪](http://www.flowplayer.org/plugins/streaming/pseudostreaming.html)流式传输）以及用于负载平衡场景的[集群流式传输。](http://www.flowplayer.org/plugins/streaming/cluster.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-11T09:17:51.520

我更喜欢[iMect Player](http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&extid=1697043)（由匈牙利人编写）来播放视频，它有很多很棒的功能（包括伪流）：

*   弹性：实时完全调整自身大小以适应任何环境。纵横比、分辨率等：无所谓。
*   高度可定制：您可以在没有任何 ActionScript 知识的情况下设计自己的皮肤文件，此外，您还可以为现有皮肤重新着色。
*   播放任何 Flash 视频，包括具有正常、FMS 或伪流的 H264。
*   播放直播视频，内置 Ustream.tv API（可以播放 Ustream.tv 频道）。
*   JSON 输入，JavaScript API。
*   带有漂亮的滑动条的多个视频支持。
*   详细的统计支持，以及内置的 Google Analytics。
*   具有共同特征：邮件表单、嵌入表单、信息窗格、全屏等。
*   前贴片和后贴片广告以及重叠式广告。
*   根据知识共享许可免费用于非商业用途。对于商业项目来说非常便宜。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-11T08:57:36.093

我认为 Flash 已经支持 H264。

如果您真的想要一个好的基于 Web 的解决方案，Flash 仍然是最好的。另一种选择可能是 SilverLight3。

哦，如果你对 JwPlayer 没问题，你可以考虑试试[Dash Media Player](http://www.tmtdigital.com/project/dash_player) + Drupal。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-11T09:11:57.100

使用 Flex 制作基于 Flash 的视频播放器并不难。但重要的是要注意，除非您有流媒体服务器，否则所有视频都将下载到您的客户端并存储在他们的缓存中。这取决于正在观看的视频，可能会违反其使用/版权条款。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-10-31T22:33:03.323

我正在使用这个名为[darkOnyx](http://darkonyx.web-anatomy.com/en)的 HTML5/Flash 混合播放器，因此我的访问者也可以在移动设备上观看我的网站。播放器会自动检测何时有人获得了 flash 或 html5 兼容浏览器（您可以选择哪个作为您的主要浏览器）。多频道播放列表也是一个巨大的优势。

# php - 使用 Marker Clusterer 的谷歌地图 - 地图挂起！为什么！

> ID：847278
> 
> 赞同：1
> 
> 时间：2009-05-11T09:00:18.570
> 
> 标签：php, javascript, google-maps

这很奇怪。我正在使用标记聚类器来聚集我的所有标记，但是当地图第一次渲染时以及当我尝试拖动它或平移它时 - 它挂起并且 Firefox 告诉我脚本正在减慢它，所以我必须停止脚本. 但是，如果我将其缩小 - 它会正常缩放并从那时起平移它不会导致任何问题 - 我不知道这里出了什么问题。这是我的代码我在这里遗漏了什么 - 我的初始化一定有问题：

```
var map = null;

function initializeGMaps() { 

  if (GBrowserIsCompatible())
  {
    map = new GMap2(document.getElementById("map_canvas"));

    {
      var side_bar_html = "";
      var gmarkers = [];
      var htmls = [];
      var i = 0;
        iconBlue = new GIcon();
      // A function to create the marker and set up the event window
      function createMarker(point,name,html) {

        iconBlue.image = 'http://labs.google.com/ridefinder/images/mm_20_yellow.png';
        iconBlue.shadow = 'http://labs.google.com/ridefinder/images/mm_20_shadow.png';
        iconBlue.iconSize = new GSize(12, 20);
        iconBlue.shadowSize = new GSize(22, 20);
        iconBlue.iconAnchor = new GPoint(6, 20);
        iconBlue.infoWindowAnchor = new GPoint(5, 1);

        var marker = new GMarker(point,{ icon:iconBlue, });
        GEvent.addListener(marker, "click", function() {
          marker.openInfoWindowHtml(html);
        });
        gmarkers[i] = marker;
        htmls[i] = html;
        side_bar_html += '<a href="javascript:myclick(' + i + ')">' + name + '<\/a><br>';
        i++;
        return marker;
      }

      // This function picks up the click and opens the corresponding info window
      function myclick(i) {
        gmarkers[i].openInfoWindowHtml(htmls[i]);
      }

      // create the map
      map = new GMap2(document.getElementById("map_canvas"));
      map.setCenter(new GLatLng( 43.907787, -50.359741), 5);

        var customUI = map.getDefaultUI();
        customUI.controls.maptypecontrol = false;
        customUI.controls.menumaptypecontrol = true;    
        map.setUI(customUI);

      // A function to read the data
      function readMap() {
        var url='get-map-markers.php';
        var request = GXmlHttp.create();
        request.open("GET", url, true);
        request.onreadystatechange = function() {
          if (request.readyState == 4) {
            var xmlDoc = request.responseXML;
            // obtain the array of markers and loop through it
            var markers = xmlDoc.documentElement.getElementsByTagName("marker");

            // hide the info window, otherwise it still stays open where the removed marker used to be
            map.getInfoWindow().hide();

            map.clearOverlays();

            // empty the array
            allmarkers = [];
            //var clusterer = new Clusterer( map );

            for (var i = 0; i < markers.length; i++) {
              // obtain the attribues of each marker
              var lat = parseFloat(markers[i].getAttribute("lat"));
              var lng = parseFloat(markers[i].getAttribute("lng"));
              var point = new GLatLng(lat,lng);
              var html = markers[i].getAttribute("html");
              var label = markers[i].getAttribute("label");
              // create the marker

              var marker = createMarker(point,label,html);
              //map.addOverlay(marker);
              allmarkers.push(marker);
              //clusterer.AddMarker( marker, html );
            }
            var markerCluster = new MarkerClusterer(map, allmarkers);
            // put the assembled side_bar_html contents into the side_bar div

          }
        }
        request.send(null);
      }

      readMap();

    }

  }
}

$(document).ready(function() { initializeGMaps(); } );
$('body').unload( function () { GUnload(); } ); 
```

* * *

**更新：**我刚刚注意到 google.com 上的脚本导致页面变慢:(我该如何解决这个问题？我在代码中做了什么来带来这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-11T12:18:30.990

Markerclusterer很烂。使用这个：

[http://googlemapsapi.martinpearman.co.uk/clustermarker](http://googlemapsapi.martinpearman.co.uk/clustermarker)

我的演示： http: [//www.stopdetelefoongids.nl/stats/](http://www.stopdetelefoongids.nl/stats/)（来源在 /includes/maps.js ）

# c++ - 异常处理中的代码重用

> ID：847279
> 
> 赞同：17
> 
> 时间：2009-05-11T09:00:41.160
> 
> 标签：c++, c, exception-handling

我正在为一些用 C++ 编写的功能开发一个 C api，我想确保没有异常从任何导出的 C 函数中传播出来。

简单的方法是确保每个导出的函数都包含在：

```
try {
   // Do the actual code
} catch (...) {
   return ERROR_UNHANDLED_EXCEPTION;
} 
```

假设我知道 C++ 代码中经常遗漏的一个异常是 std::bad_alloc ，我想特别对待它，我会写这样的东西：

```
try {
   // Run the actual code
} catch (std::bad_alloc& e) {
   return ERROR_BAD_ALLOC;
} catch (...) {
   return ERROR_UNHANDLED_EXCEPTION;
} 
```

是否有可能以某种巧妙的方式分解它，以便我可以在不为每个导出函数周围的异常处理程序添加新的 catch 语句的情况下全局不同地处理一些错误？

我知道这可以使用预处理器解决，但在走这条路之前，我会确保没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-11T09:12:57.660

对于所有可能的异常，您只能使用一个处理函数，并从每个或您的 API 实现函数调用它，如下所示：

```
int HandleException()
{
    try 
    {
        throw;
    }

    // TODO: add more types of exceptions

    catch( std::bad_alloc & ) 
    {
       return ERROR_BAD_ALLOC;
    }
    catch( ... )
    {
        return ERROR_UNHANDLED_EXCEPTION;
    }
} 
```

在每个导出的函数中：

```
try
{
    ...
}
catch( ... )
{
    return HandleException();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-11T10:41:17.283

已经有了很好的答案。但仅供参考，它被称为“异常调度程序”习语，请参阅[C++ FAQ](https://isocpp.org/wiki/faq/exceptions#throw-without-an-object)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-11T09:05:15.207

关于什么：

```
try{
    //Your code here
} catch(std::exception e)
{
   return translateExceptionToErrorCode(e);
} catch(...)
{
   return UNKNOWN_EXCEPTION_THROWN;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-11T09:37:47.043

[Jem](https://stackoverflow.com/users/93447/jem)的答案比这个解决方案简单一点。但是可以使用模板来代替预处理器宏的使用。像这样的东西（你可以做更多的改进）：

```
template <class T, void (T::*FUNC)()>
class CatchWrapper
{
public:

    static void WrapCall(T* instance)
    {
        try
        {
            (instance->*FUNC)();
        }
        catch (std::bad_alloc&)
        {
            // Do Something 1
        }
        catch (std::exception& e)
        {
            // Do Something 2
        }
        catch (...)
        {
            // Do Something 3
        }
    }
};

class Foo
{
public:
    void SomeCall()
    {
        std::cout << "Do Something" << std::endl;
    }
};

int main(int argc, char* argv[])
{
    Foo i;
    CatchWrapper<Foo, &Foo::SomeCall>::WrapCall(&i);
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-11T09:04:35.380

永远不要使用`catch(...)`，除非您计划或多或少地立即重新投掷。您肯定会丢失任何可能必须帮助您找出错误原因的错误信息。

我更喜欢您的第二个方案-捕获一组已知的异常，理想情况下，因为它们是您的代码将抛出的唯一异常，并让其余的通过-允许应用程序崩溃可能是您调用后最好的做法未知行为最好“负责任地崩溃”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-11T09:13:35.117

在语言边界松散错误信息将是一种耻辱。您确实应该尝试将所有异常转换为可从 C 中使用的错误代码。

你如何做到这一点实际上取决于你的异常类是什么样的。如果您控制异常类层次结构，则可以确保每个类都使用虚拟方法提供翻译。如果没有，您可能仍然会发现使用翻译函数并测试它接收到的“std::exception”派生异常的类型以将其转换为错误代码是很实用的，就像 Jem 建议的那样（记住：抛出的异常会伤害无论如何性能，所以不要担心翻译速度很慢）。

# jquery-ui - 更改 JQuery DatePicker 中的 minDate 选项不起作用

> ID：847287
> 
> 赞同：32
> 
> 时间：2009-05-11T09:04:26.533
> 
> 标签：jquery-ui, datepicker

我已经声明了一个日期选择器实例，如下所示：

```
 $("#datePickerId").datepicker(
    { dateFormat: 'DD, d MM yy',
      minDate: 0,
      showOn: 'button',
      buttonImage: '../../images/calendar.gif',
      buttonImageOnly: true,
      hideIfNoPrevNext: true
    }
   ); 
```

我现在想更改为 minDate 选项，所以我这样做：

```
$('#datePickerId').datepicker('option', 'minDate', 3); 
```

但什么也没有发生。我应该做其他事情吗？还有哪些其他可能的原因？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-21T07:46:57.987

## 如何动态更改 minDate（初始化后）

上面的答案解决了如何在初始化时设置默认的minDate，但问题实际上是如何动态地改变minDate，下面我还澄清了如何设置默认的minDate。

原始问题的所有错误在于设置的 minDate 值应该是一个字符串（不要忘记引号）：

```
$('#datePickerId').datepicker('option', 'minDate', '3'); 
```

minDate 也接受一个日期对象，一个常见的用途是有一个你试图计算的结束日期，所以这样的东西可能很有用：

```
$('#datePickerId').datepicker(
    'option', 'minDate', new Date($(".datePop.start").val())
); 
```

## 如何设置默认的 minDate（在初始化时）

只是回答这个以获得最佳实践；minDate 选项需要以下之一：

1.  当前 dateFormat 中的字符串或
2.  从今天开始的天数（例如 +7）或
3.  值和句点字符串（'y' 表示年，'m' 表示月，'w' 表示周，'d' 表示天，例如 '-1y -1m'）

@bogart 将字符串设置为“0”是一种解决方案，因为它满足上面的选项 2

```
$('#datePickerId').datepicker('minDate': '3'); 
```

[minDate 的 jQuery UI 文档](http://docs.jquery.com/UI/Datepicker#option-minDate)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-06-20T22:38:52.200

德拉科，

你可以这样做：

```
$("#datePickerId").datepicker(
    { dateFormat: 'DD, d MM yy',
      minDate: new Date(2009, 10 - 1, 25), // it will set minDate from 25 October 2009
      showOn: 'button',
      buttonImage: '../../images/calendar.gif',
      buttonImageOnly: true,
      hideIfNoPrevNext: true
    }
   ); 
```

记得在一个月后写-1（例如六月是-> 6 -1）

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-06-26T07:15:18.163

使用 minDate 作为字符串：

```
$('#datePickerId').datepicker({minDate: '0'}); 
```

这会将今天设置为最小可选日期。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-23T11:34:08.793

动态更改 minDate

```
.datepicker("destroy") 
```

**例如**

```
<script>
    $(function() {
      $( "#datepicker" ).datepicker("destroy");
      $( "#datepicker" ).datepicker();
    });
</script>

<p>Date: <input type="text" id="datepicker" /></p> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-29T12:10:58.167

假设我们有两个日期选择字段 field1 和 field2。field2 日期取决于 field1

```
$('#field2').datepicker();
$('#field1').datepicker({
  onSelect: function(dateText, inst) {
    $('#field2').val("");
    $('#field2').datepicker("option", "minDate", new Date(dateText));
  }
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-23T12:19:12.077

无需销毁当前实例，只需刷新即可。

```
$('#datepicker')
    .datepicker('option', 'minDate', new Date)
    .datepicker('refresh'); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-09-20T08:46:49.197

月份从 0 开始。0 = 一月，1 = 二月，2 = 三月，...，11 = 十二月。

# solr - 过滤 solr facet 计数

> ID：847288
> 
> 赞同：3
> 
> 时间：2009-05-11T09:04:27.020
> 
> 标签：solr, faceted-search

鉴于以下情况：

```
<field name="product_id" type="text" indexed="true" stored="true" multivalued="true"/>
<field name="product_type" type="text" indexed="true" stored="true" multivalued="true"/> 
```

我想在给定结果集的情况下获取按特定产品类型过滤的构面字段 product_id 的构面计数（为此，我使用过滤器查询等...）

请注意，我想要的是过滤构面计数：

*   方面查询没有帮助，因为它引入了一个包含特定方面查询结果的列表。（过滤查询也不行）

    2921

*   Facet.prefix 做了我想要的那种过滤器，但我不知道如何在这种情况下使用它。

备注我想过滤与特定类别匹配的产品ID

```
<lst name="facet_fields">
    <lst name="productID">
        <int name="xHidyhuVZIUVVMfUJM8zd6">209</int>
        <int name="34YFQf0F9kqP29SQgrmqI1">206</int>
        <int name="m3wp9GS9Iweai0ftKLSlG">195</int>
        <int name="aAwN5QFjQLxcrDWFiirjY2">169</int>
        <int name="k405yG1RwRndI5T19dMO8">169</int>
    </lst>
</lst> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T00:42:32.863

据我所知，您无法使用其他字段过滤构面计数。**facet.prefix**仅在您正在分面的同一字段上运行。

我会发出另一个过滤产品类型的查询，只是为了获得您想要的方面计数，例如：`select?q=product_type:somecategory&rows=0&facet=true&facet.field=product_id`

# database - 黑莓的 SQLite

> ID：847292
> 
> 赞同：3
> 
> 时间：2009-05-11T09:04:52.447
> 
> 标签：database, sqlite, blackberry, java-me

SQLite 可用于黑莓吗？

除了 SQLite 之外，还有其他可用的数据库选项吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-12-09T18:39:16.227

SQLite 已在 Blackberry 5.0 中发布；这是链接：[http ://docs.blackberry.com/en/developers/deliverables/8682/SQLite_overview_701956_11.jsp](http://docs.blackberry.com/en/developers/deliverables/8682/SQLite_overview_701956_11.jsp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-11T09:58:41.143

SQLite 计划在下一个版本的黑莓设备软件中发布，不知道什么时候发布。认为他们计划在最近的 WES 活动中宣布。

您可以尝试使用[Sybase SQL Anwhere](http://www.sybase.com/products/databasemanagement/sqlanywhere/blackberry)，因为它可用于 Blackberry。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-12-16T21:25:15.370

SQLite 从 BlackBerry OS 5.0 版开始可用。以下是更多信息的链接：

[http://docs.blackberry.com/en/developers/deliverables/8682/SQLite_overview_701956_11.jsp](http://docs.blackberry.com/en/developers/deliverables/8682/SQLite_overview_701956_11.jsp)

请注意，在 BlackBerry 开发中使用 SQLite 时需要注意一些事项。一个是在将 SQLite 写入某些设备（即 Bold 9700 系列）的内部存储器时存在一个已知问题。

就黑莓上数据库的其他选项而言，没有。至少我不知道。你必须使用 SQLite。这不一定是个问题，因为 SQLite 高效且内存占用小。

至于其他存储方式，可以使用 Persistent Store。这可能有点棘手，但您可以使用 Vector 对象来组织您存储数据的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-09-01T17:43:39.147

如前所述：“SQLite 已在 Blackberry 5.0 中发布；这是链接：[http](http://docs.blackberry.com/en/developers/deliverables/8682/SQLite_overview_701956_11.jsp) ://docs.blackberry.com/en/developers/deliverables/8682/SQLite_overview_701956_11.jsp ”

但 SQLite 也可用于 WebWorks SDK。请参阅： http: [//www.blackberry.com/developers/docs/webworks/api/Database.html](http://www.blackberry.com/developers/docs/webworks/api/Database.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-03-06T11:08:39.127

是的，您可以使用 Persistent Store 在黑莓应用程序中存储数据

看到这个[持久数据存储](http://docs.blackberry.com/en/developers/deliverables/11938/Persistent_data_storage_509562_11.jsp)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T11:02:45.113

我只是使用 txt 文件，它要复杂得多，但问题是有些手机需要存储卡，有些则不需要，以便使用 SQLite DB，开发人员无法控制订阅者是否有存储卡。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2009-05-11T09:11:01.127

UltraliteJ 是 SQLite 的付费版本。

# visual-studio - 如何将 Windows Mobile 6.1 映像添加到 VS 2008 Device Emulator Manager？

> ID：847300
> 
> 赞同：1
> 
> 时间：2009-05-11T09:08:49.553
> 
> 标签：visual-studio, windows-mobile

我的电脑上有 VS 2008 SP1，还安装了 Virtual PC 和 ActiveSync 4.5 我只需从微软下载并安装“Windows Mobile 6.1 Emulator Images”msi

但安装后，移动图像不会添加到设备模拟器管理器（在 DataStore 下）

有什么问题以及如何解决？

谢谢哈米德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-11T19:17:04.267

如果您仔细阅读[下载](http://www.microsoft.com/downloads/details.aspx?FamilyId=3D6F581E-C093-4B15-AB0C-A2CE5BFFDB47&displaylang=en)页面，则需要先安装 [Windows Mobile 6 SDK 。](http://www.microsoft.com/downloads/details.aspx?familyid=06111a3a-a651-4745-88ef-3d48091a390b&displaylang=en)

它们为我工作，我安装了 WM6 SDK。WM6.1 仿真器映像与 WM6 映像一起列出。

# arrays - 如何从 VBA 函数填充 Excel 工作表中的单元格？

> ID：847301
> 
> 赞同：3
> 
> 时间：2009-05-11T09:08:54.233
> 
> 标签：arrays, excel, vba, function, formula

我只是想通过 VBA 函数填充电子表格中的单元格。例如，我想在一个单元格中键入 =FillHere()，结果我将有几个单元格填充了一些数据。

我试过这样的功能：

```
Function FillHere()
  Dim rngCaller As Range
  Set rngCaller = Application.Caller
  rngCaller.Cells(1, 1) = "HELLO"
  rngCaller.Cells(1, 2) = "WORLD"
End Function 
```

一旦我尝试修改范围，它就会中断。然后我尝试了这个（即使这不是我正在寻找的行为）：

```
Function FillHere()
    Dim rngCaller As Range
    Cells(1, 1) = "HELLO"
    Cells(1, 2) = "WORLD"
End Function 
```

这也不起作用。**但是，如果我使用 F5 从 VBA 启动此功能，它会起作用！**似乎在调用函数时无法修改电子表格上的任何内容......但有些库会这样做......

我还尝试（实际上这是我的第一个想法）从函数返回一个数组。问题是我只得到数组中的第一个元素（有一个技巧意味着用左上角的公式选择整个区域+ F2 + CTRL-SHIFT-ENTER，但这意味着用户需要知道通过提前数组的大小）。

我真的被这个问题困住了。我不是最终的最终用户，所以我需要一些非常容易使用的东西，最好完全没有争论。

PS：很抱歉我已经问过这个问题了，但是我当时没有注册，看来我不能再参与其他线程了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T09:06:09.383

您需要分两步执行此操作：

将您的模块更改为：

```
Dim lastCall As Variant
Dim lastOutput() As Variant

Function FillHere()
    Dim outputArray() As Variant
    ReDim outputArray(1 To 1, 1 To 2)
    outputArray(1, 1) = "HELLO"
    outputArray(1, 2) = "WORLD"

    lastOutput = outputArray
    Set lastCall = Application.Caller

    FillHere = outputArray(1, 1)
End Function

Public Sub WriteBack()
    If IsEmpty(lastCall) Then Exit Sub
    If lastCall Is Nothing Then Exit Sub

    For i = 1 To UBound(lastOutput, 1)
        For j = 1 To UBound(lastOutput, 2)
            If (i <> 1 Or j <> 1) Then
                lastCall.Cells(i, j).Value = lastOutput(i, j)
            End If
        Next
    Next

    Set lastCall = Nothing
End Sub 
```

然后为了调用 Sub 进入 VBA 中的 ThisWorkbook 区域并添加如下内容：

```
Private Sub Workbook_SheetCalculate(ByVal Sh As Object)
    Call WriteBack
End Sub 
```

这样做是返回左上角单元格的值，然后在计算完成后填充其余部分。我写这个的方式假设一次只调用一个 FillHere 函数。如果您想同时重新计算多个变量，那么您将需要一组更复杂的全局变量。

一个警告是，当它填充其他单元格时，它不会关心它覆盖的内容。

编辑：如果您想在 XLA 中的应用程序范围内执行此操作。ThisWorkbook 区域的代码应类似于：

```
Private WithEvents App As Application

Private Sub App_SheetCalculate(ByVal Sh As Object)
    Call WriteBack
End Sub

Private Sub Workbook_Open()
    Set App = Application
End Sub 
```

这将连接应用程序级别的计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-11T11:16:12.653

您尝试执行的操作在 Excel 中不起作用 - 这是设计使然。

不过，您*可以*这样做：

```
Function FillHere()
    Redim outputArray(1 To 1, 1 To 2)
    outputArray(1, 1) = "HELLO"
    outputArray(1, 2) = "WORLD"
    FillHere = outputArray
End Function 
```

如果您随后在工作表中选择两个相邻的单元格，输入`=FillHere()`并按 Control+Shift+Enter（应用为数组公式），那么您应该会看到所需的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-11T22:30:57.383

从根本上说，函数只能影响调用它的单元格。听起来您可能需要查看使用[`Worksheet_Change`or`Worksheet_SelectionChange`事件](http://www.mvps.org/dmcritchie/excel/event.htm#change)来触发对预期范围内的单元格的修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T10:22:56.870

您可以使用 2 阶段过程间接执行此操作：编写您的 UDF，以便它以足够持久的方式存储数据（例如全局数组）。然后有一个插件，其中包含在每个计算事件后触发的应用程序事件，查看 UDF 存储的任何数据，然后重写必要的单元格（如果适当，带有关于覆盖的警告消息）并重置存储的数据。

这样，用户不需要在他们的工作簿中有任何代码。

我认为（但不确定）这是彭博等使用的技术。

# directory - 为什么找不到bin文件夹下的文件？

> ID：847303
> 
> 赞同：0
> 
> 时间：2009-05-11T09:09:27.230
> 
> 标签：directory, bin

我在我的 httpdocs(www) 中，创建了一个名为“bin”的文件夹，我放了一个“test.html”只是为了显示“Hello Stackoverflow”，但是当我访问该页面时，即[http://domain.com/ bin/test.html](http://domain.com/bin/test.html)，它说找不到页面。但是当我将文件移动到测试文件夹时，它会显示它应该是什么。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T09:15:59.263

一般来说，默认配置，作为一般良好安全实践的一部分，不会被配置为做任何不正常的事情（比如做除了在 bin 目录中执行的事情之外的事情，或者通常不会在基本目录中发生的事情）。一般来说，我会说你应该努力适应这一点，而不是违背常规。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T10:24:25.220

除了明显的“检查权限”答案和假设您使用的是 Apache 服务器之外，您可能需要在每个文件夹中添加一个具有正确权限的 .htaccess 文件。

在其他文件夹中查找 .httaccess 并记住使用 ls -a （以点开头的文件默认隐藏 -a = All ）

顺便说一句，将 html 文件放在二进制文件夹中可能是一种不好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-11T09:13:43.727

可能是权限。

```
chmod 755 /Path/To/Bin/
chmod 644 /Path/To/Bin/test.html 
```

# asp.net - 集成 Windows 身份验证是否适用于 Firefox？

> ID：847304
> 
> 赞同：2
> 
> 时间：2009-05-11T09:09:32.407
> 
> 标签：asp.net, firefox, windows-authentication, adfs

如果我的 ASP.NET 应用程序是使用 Windows 集成身份验证为 ADFS 设置的，我知道这将在 IE 中工作，但在 Firefox 中是否可以工作？

我在网上看到一些东西表明存在问题，您需要在每个客户端浏览器中放置一个解决方法 - [http://codebetter.com/blogs/eric.wise/archive/2006/11/16/ Note-to-self_3A00_-Firefox-Windows-Authentication.aspx](http://codebetter.com/blogs/eric.wise/archive/2006/11/16/Note-to-self_3A00_-Firefox-Windows-Authentication.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-11T09:47:29.710

这不是一种解决方法。默认情况下，Firefox 不会将您的 Windows 集成凭据发送到网站。您必须告诉它“信任”该网站。

您可以在将未经身份验证的用户引导至的页面上显示这些说明。

# php - 确保用户定义的路径在 PHP 中是安全的

> ID：847306
> 
> 赞同：7
> 
> 时间：2009-05-11T09:09:45.060
> 
> 标签：php, security, user-input, directory-traversal

我正在用 PHP 实现一个简单的目录列表脚本。

我想确保在打开目录句柄并`echo`随意获取结果之前传递的路径是安全的。

```
$f = $_GET["f"];
if(! $f) {
    $f = "/";
}
// make sure $f is safe
$farr = explode("/",$f);
$unsafe = false;
foreach($farr as $farre) {
    // protect against directory traversal
    if(strpos($farre,"..") != false) {
        $unsafe = true;
        break;
    }
    if(end($farr) != $farre) {
        // make sure no dots are present (except after the last slash in the file path)
        if(strpos($farre,".") != false) {
            $unsafe = true;
            break;
        }
    }
} 
```

这足以确保用户发送的路径是安全的，还是我应该做其他事情来防止攻击？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-11T09:21:36.773

这可能[`realpath()`](http://www.php.net/function.realpath)对您有帮助。

> `realpath()`展开所有符号链接并解析对 的引用和输入路径中的额外字符`'/./'`， 并返回规范化的绝对​​路径名。`'/../'``'/'`

但是，此函数假定所讨论的路径确实存在。它不会对不存在的路径执行规范化。在这种情况下，返回 FALSE。

# c++ - 如何从内存中读取 3rd 方应用程序的变量？

> ID：847313
> 
> 赞同：1
> 
> 时间：2009-05-11T09:11:45.057
> 
> 标签：c++, memory, pointers

我正在尝试从内存中读取变量。变量，不属于我自己的程序。例如，假设我在浏览器中运行了这个 Adob​​e Shockwave (.dcr) 应用程序，我想从中读取不同的变量。它是如何进行的？我需要挂钩这个过程吗？但它是在虚拟机下运行的，所以我不知道该怎么做。

这项任务在普通的 w32 应用程序中非常简单（因为它主要只是 CBT 挂钩/子类化），但正如我之前提到的，我不知道它是如何使用 flash/shockwave 完成的。

如果您想知道，我使用 C++ (VS9) 作为我的开发环境。

任何提示将不胜感激，因此在此先感谢您。

最好的问候， nhaa123

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T10:00:15.757

如果您尝试手动进行一两次实验，这很容易。尝试像[Cheat 引擎](http://www.raymond.cc/blog/archives/2007/02/27/how-to-cheat-and-hack-flash-based-games/)这样的工具，它就像一个免费、快速和简单的过程窥视器。基本上，它会扫描进程的内存空间以获取给定的键值。然后，您也可以稍后过滤这些初始搜索命中。您还可以**更改**您确实找到的那些价值观，生活。上面的链接显示了一个使用它来查找游戏中的分数或金钱价值的快速示例，并在游戏运行时对其进行实时编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T09:50:02.450

如果没有调试应用程序的二进制文件/DLL，您唯一的机会就是询问一些黑客。

通常，您可以使用调试器连接到进程，但如果没有二进制文件的调试符号，您将看不到任何变量名称 - 只是内存地址。

此外，Flash/Shockwave 代码在浏览器内的沙箱内运行，以防止被操纵的 Flash 代码造成安全漏洞。因此，您没有真正的机会访问正在运行的 Flash 代码/执行 Flash 代码的插件 - 除非您拥有此类插件的操纵版本。

因此，如果不使用较少的合法方法，您的任务将很难解决。下一个难题是虚拟机——这可以通过将您的应用程序实现为客户端/服务器解决方案来解决，其中“检查器”/看门狗作为虚拟机内的服务器运行，客户端请求在您的服务器上运行的变量状态/内容正常主机。通信可以通过简单的套接字连接来完成。

如果您有机会编写自己的 Flash/Shockwave 插件，您也许可以看到变量的内容。

对不起，我不能再帮你了。

ciao, 3DH

# iphone - 为什么我的加速度计响应如此缓慢？

> ID：847321
> 
> 赞同：1
> 
> 时间：2009-05-11T09:14:39.420
> 
> 标签：iphone, cocoa-touch, uikit, accelerometer

我以每秒 50Hz / 50 次的频率向他们询问数据。当我突然将设备在 x 轴上翻转 90 度，而设备平放在桌子上，显示器朝上时，这些值非常缓慢地移动到该位置的“目标”值。

现在奇怪的是：如果我增加测量速率，在突然将设备翻转 90 度时，值会更快地移动到新值。但是，如果我每秒只询问一次新值，则该值达到目标需要很长时间。这可能是什么原因？

我不做任何类型的数据聚合，也不积累任何东西。我只是做了一些简单的过滤来消除噪音。我的方法如下所示：

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
    // Use a basic low-pass filter to only keep the gravity in the accelerometer values for the X and Y axes
    // accelerationX is an instance variable
    accelerationX = acceleration.x * 0.05 + accelerationX * (1.0 - 0.05);

    // round
    int i = accelerationX * 100;
    float clippedAccelerationValue = i;
    clippedAccelerationValue /= 100;

    [self moveViews:clippedAccelerationValue];
} 
```

稍后，在我的 -moveViews: 方法中，我这样做：

```
-(IBAction)moveSceneForPseudo3D:(float)accelerationValue {
    if(fabs(lastAccelerationValue - accelerationValue) > 0.02) { // some little treshold to prevent flickering when it lays on a table
        float viewAccelerationOffset = accelerationValue * 19 * -1;

        newXPos = initialViewOrigin + viewAccelerationOffset;
        myView.frame = CGRectMake(newXPos, myView.frame.origin.y, myView.frame.size.width, myView.frame.size.height);

        lastAccelerationValue = accelerationValue;
    }
} 
```

结果，当设备在 x-achsis 上旋转 90 度或 180 度时，视图只是非常缓慢地移动到它的目标位置。我不知道这是因为加速度计的物理特性，还是我的过滤代码中的错误。我只知道有些快节奏的游戏会使用加速度计进行转向，所以我几乎无法想象这是硬件问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-11T19:03:19.313

这一行：

```
accelerationX = acceleration.x * 0.05 + accelerationX * (1.0 - 0.05); 
```

是一个低通滤波器，它通过计算 x 加速度的移动平均值来工作。换句话说，每次调用回调时，您只会将`accelerationX`5% 的值移向新的加速度计值。这就是为什么它需要多次迭代才能`accelerationX`反映新的方向。

你应该做的是增加`0.05`价值，也就是说`0.2`。我会制作一个全局`#define`变量，并使用不同的值以及不同的刷新率。

# c# - c#/winforms：应用程序范围的键盘快捷键，可编辑控件上有例外

> ID：847324
> 
> 赞同：1
> 
> 时间：2009-05-11T09:16:23.630
> 
> 标签：c#, winforms

在我的 c#/winforms 应用程序中，我想做一些类似应用程序范围的键盘快捷键，它应该在任何地方触发，除非焦点位于用户可以编辑文本的控件中，比如文本框。

目前我正在覆盖这个函数来做到这一点。

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData); 
```

我如何为此添加一个异常，当用户处于可编辑控件中时它不会被触发？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T13:35:52.613

我在这里看到 2 个解决方案。

1) 在每个可编辑控件中，处理所有键盘事件，并在 eventArgs 对象中，将 Handled 属性设置为 true；

e.Handled = true;

2）在执行宽键盘快捷键之前，寻找有焦点的控件，如果是TextBox，忽略它。每个 Form 中可能都有一个方法来告诉 Control 具有焦点。

第二种选择更清洁。我不提供代码，因为我现在没有打开 Visual Studio，但是如果您需要更具体的代码，您可以询问。

PS：在这里，我为你做了一些谷歌搜索：[如何获得焦点控制？](http://www.csharpdeveloping.net/CodeSnippets.mvc/Detail/how_to_get_focused_control)

# c# - StringTemplate - 如何遍历业务对象列表并输出简单的 html？

> ID：847328
> 
> 赞同：12
> 
> 时间：2009-05-11T09:17:14.377
> 
> 标签：c#, stringtemplate

我刚刚开始在我的 C# 项目中使用[StringTemplate 。](http://www.antlr.org/wiki/display/ST/StringTemplate+Documentation)我浏览了文档，但似乎找不到实现这个简单场景的方法：

我有一个简单的业务对象列表（比如说订单），我希望它们显示在我的 html 模板内的 UL 标记中。

所以，我的 .st 模板看起来像这样（伪代码）：

`<html> some text <ul>[Order template]<li>[Order name here]</li>[/Order template]</ul></html>`

我希望我的输出是：

`<html> some text <ul><li>Order 1</li><li>Order 2</li>...</ul></html>`

我不知道如何使用 StringTemplate 来完成这项工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-05-11T09:52:31.107

您应该使用以下语法：

```
<ul>
    $orders: {order|
        <li>Order $order.OrderId$</li>
    }$
</ul> 
```

关于这个特性的文档真的很难找到，我在[这里](http://www.cs.usfca.edu/~parrt/course/601/lectures/stringtemplate.html)找到了一些信息（搜索管道符号 |）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-03-23T17:17:08.617

这也适用于我。如果您从 Antlr 调用 StringTemplate 作为 StringTemplateGroup，则语法略有不同。将 $ 替换为 <>。

```
group DTO;

assign1(m, attributes) ::= <<
package demo;
import java.io.Serializable;

public class <m> implements Serializable {
    public <m>() {
        super();
    }

<attributes : {attribute |
protected <attribute.type> <attribute.name>;

public <attribute.type> get<attribute.name>() {
    return <attribute.name>;
}

public void set<attribute.name>(<attribute.type> <attribute.name>) {
    this.<attribute.name> = <attribute.name>;
}
}>
}

>> 
```

# variables - 如何为 Tcl 变量设置默认值？

> ID：847329
> 
> 赞同：0
> 
> 时间：2009-05-11T09:17:14.720
> 
> 标签：variables, tcl

我有一些通过在命令行调用中定义变量来执行的 Tcl 脚本：

```
$ tclsh84 -cmd <script>.tcl -DEF<var1>=<value1> -DEF<var2>=<value2> 
```

有没有办法检查 var1 和 var2 是否未在命令行中定义，然后为它们分配一组默认值？

我尝试了关键字 global、variable 和 set，但是当我说`"if {$<var1>==""}"`：`"can't read <var1>: no such variable"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-11T09:47:32.563

我不熟悉 tclsh 上的 -def 选项。

但是，要检查是否设置了变量，而不是使用 'catch'，您还可以使用 'info exists'：

```
if { ![info exists blah] } {
  set blah default_value
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-11T15:14:14.303

或者，您可以使用 tcllib 中的 cmdline 包之类的东西。这允许您为二进制标志和名称/值参数设置默认值，并为它们提供描述，以便可以显示格式化的帮助消息。例如，如果您有一个程序需要输入文件名，以及可选的输出文件名和二进制选项来压缩输出，您可能会使用以下内容：

```
package require cmdline
set sUsage "Here you put a description of what your program does"
set sOptions {
    {inputfile.arg ""  "Input file name - this is required"}
    {outputfile.arg "out.txt"     "Output file name, if not given, out.txt will be used"}
    {compressoutput       "0"      "Binary flag to indicate whether the output file will be compressed"}
}

array set options [::cmdline::getoptions argv $sOptions $sUsage]
if {$options(inputfile) == ""} {puts "[::cmdline::usage $sOptions $sUsage]";exit} 
```

.arg 后缀表示这是一个名称/值对参数，如果未列出，它将假定它是一个二进制标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-11T09:31:23.557

您可以[`catch`](http://www.tcl.tk/man/tcl8.5/TclCmd/catch.htm)使用命令来防止错误中止脚本。

```
if { [ catch { set foo $<var1> } ] } {
    set <var1> defaultValue
} 
```

（警告：我没有用 TCL 解释器检查确切的语法，上面的脚本只是为了给出想法）。

# iphone - 为什么我的图标没有分发到设备上？

> ID：847330
> 
> 赞同：0
> 
> 时间：2009-05-11T09:17:31.817
> 
> 标签：iphone

在我的 iPhone 应用程序上工作期间，图标不时更改。同事或管理层提出了新奇的想法和 .pngS，而我所做的只是更改文件系统中的 Icon.png。大多数情况下，新图标会在下一次构建时分发到模拟器或设备，有时我不得不在 Xcode（图像）中删除并添加 th icon.png，但它确实有效。然后，前几天我将 UIPrerenderedIcon 元素添加到 info.plist 以消除图标的光泽（它有效），因为我这样做了，我在将新图标引入设备时遇到了问题：

*   模拟器在调试模式下显示新图标
*   模拟器在发布模式下不显示新图标（仅在之前使用调试时）
*   任何 iPhone 或 iPod 上都不会出现新图标
*   每当图标分发失败时，都会显示一个白色方块或（对我来说甚至更陌生）一个旧图标（相应的 .png 已从文件系统中完全消除）

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T06:39:43.823

尝试清理所有目标，这很可能是旧图标出现的情况。

此外，这发生在我身上几次（在应用程序图像中）......

模拟器对文件名不区分大小写，但设备区分大小写。

所以，如果在 info.plist 你说你的图标文件是：ICON.png

但实际文件名为：icon.png

然后，模拟器会显示图标，但设备不会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-04-27T07:24:30.200

当您更改图标图像时尝试从模拟器/iPhone 中删除旧应用程序，然后重新安装它。有时我也会出现这样的问题.. 以及 iTunes 上的图标 将图标图像设为 512 x 512 JPEG 或 PNG 文件命名为 iTunesArtwork。然后去获取信息并删除扩展。请注意，该文件不能有扩展名。

生成应用程序图标的文件后，按照以下步骤将其添加到您的应用程序中：

1.  在 Xcode 中打开您的项目。
2.  在组和文件列表中，选择资源组。
3.  选择“项目”>“添加到项目”，导航到您的 iTunesArtwork 文件，然后单击“添加”。
4.  在出现的对话框中，选择“复制项目”选项并单击添加。

请注意，PNG 或 JPEG 文件只是“iTunesArtwork”，没有后缀。

如果您在构建文件后尝试将文件复制到应用程序包中，则会破坏应用程序签名，并且在尝试将其同步到设备时会出现验证错误。确保艺术品文件包含在“复制捆绑资源”文件夹中，在 XCode 中的项目目标中（上面的第 4 步）。

然后将您的应用程序文件拖放到 iTunes 以进行交叉检查，无论您是否已正确完成所有操作。

希望这可以帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-03-09T20:01:56.213

在 xcode 中启动应用程序 1 将 icon.png 的名称更改为 icon1.png 2 从模拟器或设备中删除应用程序 3 清除所有目标 4 将 icon1.png 更改回 icon.png 5 再次运行应用程序

# java - 如何关闭休眠工具数据库连接

> ID：847343
> 
> 赞同：1
> 
> 时间：2009-05-11T09:21:13.933
> 
> 标签：java, hibernate, postgresql, hibernate-tools

在开发新项目时，我经常想重新创建架构以应用创建的任何新实体或关系。我喜欢在 Eclipse 中使用休眠工具，但是想要删除并重新创建架构时会很痛苦 - 因为它似乎保持与数据库的开放连接（在这种情况下为 postgres）。

有谁知道是否有一种简单的方法可以让 eclipse hibernate 工具插件关闭所有连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-21T13:41:44.043

告诉你，我也在使用 Hibernate Tools 来创建模式可能会有所帮助。我从来没有遇到过你描述的问题。现在我使用[liquibase](http://liquibase.org)进行模式迁移。这是一种不同的方法，但我喜欢它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-02-01T13:42:53.737

我以前从未遇到过这个问题，但我们使用 Maven 从命令行运行来创建/更新架构，还使用 ​​DBUnit 来上传数据。然后回到elcipse...

# apache - Apache - 授权多个组中的用户

> ID：847351
> 
> 赞同：2
> 
> 时间：2009-05-11T09:25:23.740
> 
> 标签：apache

我正在尝试研究如何检查用户是否是具有 Apache 基本授权的 A 组和 B 组的成员。目前我有：

```
AuthType Basic
AuthName "Log Authors"
AuthUserFile /iweb/s3078033/apache2-secure/auth/user.file
AuthGroupFile /iweb/s3078033/apache2-secure/auth/group.file
Require group admin logger 
```

它只检查用户是否是管理员或记录器的成员。我已经尝试过查看所有 Apache 文档，但运气不佳。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-23T16:01:22.890

这应该工作[<RequireAll>](http://httpd.apache.org/docs/trunk/mod/mod_authz_core.html#requireall)

兼容性：在 Apache 2.3 及更高版本中可用
需要 mod_authz_core

PS：我没有尝试，因为我只有 Apache 2.2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T10:21:25.457

您可能已经尝试过，但是将 Require 指令放在两行会有帮助吗？

```
AuthType Basic
AuthName "Log Authors"
AuthUserFile /iweb/s3078033/apache2-secure/auth/user.file
AuthGroupFile /iweb/s3078033/apache2-secure/auth/group.file
Require group admin
Require group logger 
```

# c# - 将 wav 文件编码为 pcm

> ID：847355
> 
> 赞同：2
> 
> 时间：2009-05-11T09:27:42.003
> 
> 标签：c#, file, encoding, wav

我需要将 wav 文件编码为另一种文件格式（pcm）。此格式具有以下属性：8kHz，16 位。

有人知道如何在 c# 或 vb 中执行此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-11T09:33:58.297

# [阿尔瓦斯音频库。](http://www.alvas.net/alvas.audio.aspx)

以下是主要功能。

*   录音机允许：
    *   录制未压缩的音频数据 (PCM)
    *   录制压缩音频数据：IMA ADPCM、Microsoft ADPCM、CCITT A-Law、CCITT u-Law、GSM 6.10、MPEG Layer-3 (mp3) 等；
    *   将数据记录到流中（文件流、内存流）；
    *   暂停和恢复录音；
    *   获取当前声音位置；
    *   将数据记录到系统中安装的任何记录器（多个声卡）。

*   播放器允许：
    *   播放未压缩的音频数据 (PCM)；
    *   播放压缩音频数据：IMA ADPCM、Microsoft ADPCM、CCITT A-Law、CCITT u-Law、GSM 6.10、MPEG Layer-3 (mp3) 等；
    *   播放流中的数据（文件流、内存流）；
    *   播放混合音频数据；
    *   暂停和继续播放；
    *   获取当前声音位置；
    *   播放系统中安装的任何播放器的数据（多个声卡）。

*   设置混音器控件：
    *   选择要录制的源行；
    *   更改源线音量以进行录制；
    *   额外的控制调整。例如，“麦克风增强”；
    *   更改播放的主音量；
    *   播放静音。

*   编辑
    *   改变音频数据的速度；
    *   改变音频数据的音量；
    *   将多段音频合并为一个；
    *   剪切一段音频流；
    *   在音频流中插入一段；
    *   删除一段音频流；
    *   从字节数组创建音频格式；
    *   将音频数据多次插入并混合到具有指定偏移量的主音频数据中；
    *   反向音频波流；
    *   将立体声音频流拆分为两个单声道流；
    *   将两个单声道音频流合并为一个立体声。
    *   几个音频文件串联。

*   转换
    *   将音频数据从一种音频格式转换为另一种。
    *   将音频波流转换为 mp3 流。
    *   将 Dialogic .vox (adpcm) 流转换为 Mp3 流。
    *   将 Wave 流更改为 MP3 流。如果 Wave 流包含 MPEG 第 3 层数据。
    *   播放、录制和转换 RAW 无标题格式（SLINEAR 等）（用于 Asterisk PBX）。
    *   从 Avi 流中播放和提取音频数据。
    *   编码和解码 Dialogic .vox (adpcm) 格式数据（用于 Asterisk PBX）。
    *   将音频波流转换为 mp3 流
    *   将 Dialogic .vox (adpcm) 流转换为 Mp3 流

*   杂项
    *   查看输入声音信号的电平。
    *   使用强名称签名库。音频库可以添加到 GAC

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-11T10:07:36.807

未压缩的 Wave 文件包含纯 PCM 数据和一些元数据 - 您可以在 Wotsit.org 上找到[描述](http://www.wotsit.org/)。

如果采样率、分辨率和通道数匹配，您可以去掉元数据。

如果它们不匹配，您将不得不重新采样 Wave 文件，但这不是一项简单的任务，如果您希望它正确完成（下采样需要对数据进行低通滤波以避免由于[Nyquist-Shannon 采样而产生的混叠定理](http://en.wikipedia.org/wiki/Nyquist%E2%80%93Shannon_sampling_theorem)和两者 - 上采样和下采样 - 需要良好的插值 - 理想情况下是[sinc 插值](http://en.wikipedia.org/wiki/Whittaker%E2%80%93Shannon_interpolation_formula)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-11T09:45:04.237

我不确定你到底想做什么。WAV 文件（通常）只是未压缩 pcm 数据的包装器。

但是，无论您是想访问数据，还是写出 RAW 无头 PCM 文件，都可以使用[libsndfile](http://www.mega-nerd.com/libsndfile/)。我在 ArsTechnica 论坛上找到了一些 c#[示例代码。](http://episteme.arstechnica.com/eve/forums/a/tpc/f/6330927813/m/585004045831/inc/1)

RE: Daniel Brückner 的回答
libsndfile 的作者还写了[libsamplerate](http://www.mega-nerd.com/SRC/)，它可以简化重采样。

# c# - C# + PostScript

> ID：847363
> 
> 赞同：0
> 
> 时间：2009-05-11T09:30:40.860
> 
> 标签：c#

有没有办法在 C# 中为文本文件实现类似页面显示的 PostScript？

即网页中一堆文本的打印预览。要求是像在 Google Docs 中一样为标签内显示的文本显示打印预览。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-01T11:16:41.643

PostScript 是一种编程语言，具有一组生成输出的运算符/函数。

很像 C# + System.Drawing。

所以答案是肯定的。

我建议先看看如何将您的输入转换为 HTML。但需要输入格式的细节更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-18T10:50:17.033

答案是肯定的。

使用您的输入值，您可以创建 Postscript 语法来绘制形状/显示文本。

# c# - C# ftp 客户端程序创建文件夹问题

> ID：847365
> 
> 赞同：0
> 
> 时间：2009-05-11T09:31:03.247
> 
> 标签：c#, ftp, client, directory

我正在使用 C# 编写一个简单的 FTP 客户端。我没有找到任何可以在 FTP 服务器上创建文件夹的示例，请检查 FTP 服务器上是否已存在文件夹。

任何参考的简单样本？

提前谢谢，乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-11T09:38:55.713

你试过用谷歌搜索吗

[这是一个](http://www.codeproject.com/KB/IP/SimpleFTPDemo.aspx)

# svn - 使用提升的凭据安装 Tortoise SVN

> ID：847367
> 
> 赞同：2
> 
> 时间：2009-05-11T09:31:41.047
> 
> 标签：svn, tortoisesvn, elevated-privileges

我正在尝试在用户不是管理员的 Windows PC 上安装 TortoiseSVN（版本：1.6.1.16129）。

安装程序是一个 msi 文件，默认情况下没有“运行方式”选项。

我都试过了：

```
msiexec /a "{PATH}\TortoiseSVN-1.6.1.16129-win32-svn-1.6.1.msi" 
```

和

```
runas /user:username "msiexec /a {PATH}\TortoiseSVN-1.6.1.16129-win32-svn-1.6.1.msi" 
```

运行上述任一结果都会导致安装程序启动，然后第一个对话框会显示神秘消息：“请为 Tortoise SVN 1.6 的服务器映像指定网络位置......”

当管理员用户运行相同的 msi 文件时，安装程​​序将按预期进行。

有没有其他人有这个问题？你找到解决办法了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-29T16:26:57.170

打开任务管理器并终止 TSVNCache.exe 进程。然后尝试再次安装。

来源： [http ://dandar3.blogspot.fr/2012/04/tortoisesvn-installation-insufficient.html](http://dandar3.blogspot.fr/2012/04/tortoisesvn-installation-insufficient.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-11T09:37:54.810

浏览到 windows\system32 目录 - 右键单击​​ cmd.exe 并选择“以管理员身份运行”。你会得到一个提升的命令外壳。现在从命令外壳运行您的 msi。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-11T16:57:09.910

[这](http://support.microsoft.com/kb/259459)可能会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-03-24T05:55:24.617

很抱歉添加到旧帖子。但是，我今天遇到了这个问题并找到了解决方案。我在 CMD.exe 上使用 Runas 来获取提升的命令提示符。然后我跑了：

```
msiexec /i "{PATH}\TortoiseSVN-1.6.1.16129-win32-svn-1.6.1.msi" 
```

注意：我将 OP 帖子中的“/a”替换为“/i”。一旦我改变了它，安装过程中就不再询问网络提示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T16:44:35.403

我今天在更新 Tortois 时遇到了这个问题，根本原因是 C:\Program Files\TortoiseSVN 目录在清空之前版本的文件后不知何故被标记为只读。这可能与第一次更新尝试告诉我 windows explore、tortoise svn shell 和 google chrome 在继续之前需要关闭有关，我选择了稍后重新启动而不是关闭的选项。在声称它没有对该目录的权限之前，它再次提示了同样的事情。

所以先检查简单的东西。即使以管理员身份运行也无法克服只读目录标志。

如果您查看 msiexec 的帮助（使用 /h），它会显示 /a 以管理员网络安装身份运行。所以它只是假设你的意思是一个网络/远程位置。我只需将其指向本地 c: 驱动器进行安装并正常进行就没有问题。

# wpf - WPF Wrap 面板以何种方式比我们需要虚拟 wrap 面板更慢

> ID：847370
> 
> 赞同：4
> 
> 时间：2009-05-11T09:32:52.587
> 
> 标签：wpf, wrappanel

我听到很多关于包装面板加载速度较慢的消息，因此我们需要一个虚拟化面板。

有人可以给我一个小的包装面板示例，可以证明它加载速度较慢等它需要一个虚拟化面板。

我将一个换行面板设置为列表框的面板控件，并在其中添加了 10000 个字符串对象，这不是问题。我确信我的示例很傻，也许我必须编写一个业务对象并创建一个更大的数据模板才能看到这个问题的实际效果。

请给我看一个示例，证明没有虚拟化的包装面板速度较慢。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T08:58:28.060

我认为性能问题主要取决于树中视觉对象的数量。

默认的 ListBoxItem 模板包含少量元素（我认为是边框和文本块）。如果你有一个模板可以创建一个复杂的可视化，比如说每个项目有 100 个视觉元素，你会根据你的项目数量获得相当多的视觉效果。

这就是普通面板在加载时速度较慢的原因，因为它必须在启动时创建所有对象，而虚拟化版本只为可见项目创建视觉效果，并处理不再显示的视觉效果。

此外，这也会影响内存使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-04-16T02:11:40.550

我最近在制作插入符号表单时需要此功能。使用带有普通换行面板的列表框作为项目面板 - 加载时间最多需要 5 秒。

# spring - 如何将 MessageSource 注入到扩展 AbstractView 的视图中

> ID：847372
> 
> 赞同：4
> 
> 时间：2009-05-11T09:33:32.447
> 
> 标签：spring, dependency-injection

我有一个扩展 AbstractExcelView 的视图类

```
public class ExportExcelParticipantsView extends AbstractExcelView  {
...
} 
```

我想向这个 bean 注入一个 MessageSource。这可能吗？

我使用 ResourceBundleViewResolver 来解析视图（在这种情况下）

```
<bean id="resourceBundleViewResolver"
    class="org.springframework.web.servlet.view.ResourceBundleViewResolver">
    <!-- Classpath needs to have views.properties -->
    <property name="basename" value="views" />
    <!-- This view resolver is the first one used -->
    <property name="order" value="0"/>  
    <property name="defaultParentView" value="parent-view"/>
</bean> 
```

是不是每次请求视图时都会实例化这个视图类，因此向这个类注入消息源比平常更难？甚至可能吗？

目前，我将 MessageSource 作为模型属性从控制器传递到视图。有可能避免这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T10:44:55.340

我建议创建一个简单的 ResourceBundleViewResolver 子类。该子类将覆盖 loadView() 方法并将 MessageSource 注入 View 对象：

```
public class MyViewResolver extends ResourceBundleViewResolver {

    @Override
    protected View loadView(String viewName, Locale locale) throws Exception {
        View view = super.loadView(viewName, locale);
        if (view instanceof MessageSourceAware) {   
            ((MessageSourceAware)view).setMessageSource(getApplicationContext());
        }
        return view;
    }
} 
```

此处注入的 MessageSource 是 appcontext 自己的消息源，但您可以在此处注入任何您需要的消息源。此外，您的 View 类需要实现 MessageSourceAware。

# c# - 如何保护 ASP.NET 中的 AJAX 请求？

> ID：847377
> 
> 赞同：3
> 
> 时间：2009-05-11T09:35:44.253
> 
> 标签：c#, asp.net, jquery, ajax, security

我正在开发一个在网格中显示产品的应用程序。在网格中有一个具有禁用/启用图标的列，单击该图标时，我通过 AJAX 向我的页面发出请求，`manageProduct.aspx`以启用/禁用该特定产品。

在我的 ajax 请求中，我将 productID 作为参数传递，因此最终的 ajax 查询为

```
http://example.com/manageProduct.aspx?id=234 
```

现在，如果某人（专业黑客或网络开发人员）可以获取此 URL（很容易从我的 javascript 文件中获取），那么他可以编写一个脚本，该脚本将作为循环运行并禁用我的所有产品。

所以，我想知道是否有任何机制、技术或方法使用，如果有人试图直接执行该页面，它会返回一个错误（一个正确的消息“你没有被授权或其他东西”），否则如果页面从所需的页面执行，例如我显示产品列表的位置，然后它将正确执行。

基本上我想保护我的 AJAX 请求，所以没有人可以直接执行它们。

**在 PHP 中：**

在 php 中，我的同事通过检查页面的引用来保护这个 PHP 页面。如下：

```
$back_link = $_SERVER['HTTP_REFERER'];

if ($back_link =='')
{
   echo 'You are not authorized to execute this page';
}
else
{
  //coding
} 
```

请告诉我如何在 ASP.NET (C#) 中使用相同或任何其他不同但安全的技术，我在我的应用程序中使用 jQUERY 来发出 ajax 请求。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-11T09:40:34.057

无论您做什么，都不要依赖诸如“HTTP_REFERER”之类的 http 标头，因为它们很容易被欺骗。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-11T09:41:57.333

忘记使用推荐人 - 伪造是微不足道的。没有办法可靠地判断一个请求是直接发出的还是作为对其他东西的响应。

如果您想通过请求 URL 来阻止未经授权的人对系统产生影响，那么您需要更智能的东西来确定他们的授权级别（可能是使用 HTTP Basic Auth 或 Cookie 实现的密码系统）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T15:56:13.417

您需要在您的服务中检查您的用户是否已登录。编写一个好的安全登录系统也并不容易，但这是您需要做的，或者使用内置的“表单身份验证”。

此外，不要使用顺序产品 ID，使用唯一标识符，您仍然可以使用整数产品 ID 进行显示，但对于您描述的所有其他用途，您将需要使用产品唯一标识符/guid。

# git - 如何在 Git 中执行类似于 svn 标记的操作？

> ID：847381
> 
> 赞同：-2
> 
> 时间：2009-05-11T09:37:27.933
> 
> 标签：git, version-control, dvcs

我的应用程序需要符合新规范。

所以我想标记我的应用程序的一个版本。我希望将来能够查看此版本。

我提交了所有最新的更改。

我这样做：

```
git tag -a stable-pre-new-spec 
```

当我执行时：

```
git show stable-pre-new-spec 
```

它显示了我上次提交的差异？！我不完全明白发生了什么。

我应该创建一个分支吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-04-29T17:38:16.173

有两件事正在发生。首先，git 修订是*整个文件树的修订。* 相反，我相信 cvs 和 svn 为各个文件提供单独的修订号。因此，在 cvs 或 svn 中，“tag”操作结束并附加，例如，“stable-pre-new-spec”到 file1 版本 1.0.3、文件 2 版本 1.0.2、file3 版本 2.0、文件 4 版本 1.3。 7 等等。然后，当您想使用该标签获取时，系​​统会查找所有带有该标签的片段。在 git 中，一个版本已经是关于整个集合的，标记只是给它另一个名称。

其次——这适用于包括 cvs 和 svn 在内的许多 cm 系统——git 给一个*state*赋予相同的名称和*不同*之处。Git 将这个组合的东西称为提交。因此，您询问版本，它会向您显示该版本与前一个状态之间的差异。在 git 中，commit id 实际上是整个保存的树内容的校验和；[向您展示金穗](http://en.wikipedia.org/wiki/Golden_spike)只是惯例。

在 git 中，您可以在创建提交后随时标记提交或从中创建分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T10:07:50.113

我会在你的情况下使用一个分支：

```
git checkout -b app_in_current_state 
```

然后，您将能够继续在 master 上开发，同时在分支中修复您当前的状态。

# java - 当我们在消费者和生产者缓冲区中使用信号量时

> ID：847384
> 
> 赞同：0
> 
> 时间：2009-05-11T09:37:55.263
> 
> 标签：java, multithreading, concurrency, semaphore

我正在处理消费者和生产者中的 BoundedBuffer 类，我们想在该类中使用 Semaphore，但每次使用**acquire()**时都会出错，错误 是：

**未报告的异常 java.lang.InterruptedException; 必须被抓住或宣布被扔掉**

这是代码：

```
import java.util.concurrent.Semaphore;

public class BoundedBuffer implements Buffer { 
    private static final int   BUFFER_SIZE = 4;

    /**
     * volatile does not appear in the printed text. A discussion of
     * volatile is in chapter 7.
     */
    private volatile int count;
    private Object[] buffer;
    private int in;   // points to the next free position in the buffer
    private int out;  // points to the next full position in the buffer

    private Semaphore  mutex;
    private Semaphore  empty;
    private Semaphore full;

    public BoundedBuffer() { //constractur
        // buffer is initially empty
        //count = 0;
        in = 0;
        out = 0;

        buffer = new Object[BUFFER_SIZE];

        mutex = new Semaphore(1);
        empty = new Semaphore(BUFFER_SIZE);
        full = new Semaphore(0);
    }

    // producer calls this method
    public void insert(Object item) {
        //while (count == BUFFER_SIZE) 
        // ; // do nothing the brach full

        // add an item to the buffer
        // ++count;

        empty.acquire();
        mutex.acquire();
        buffer[in] = item;
        in = (in + 1) % BUFFER_SIZE;//that to do cyrcle or to go to the begining againe
/*
        if (count == BUFFER_SIZE)
            System.out.println("Baker put " + item + " Shelf FULL");
        else
            System.out.println("Baker put " + item + " Shelf Size = " +  count);
*/

        mutex.release();
        full.release();

    }

    // consumer calls this method
    public Object remove() {
        //Object item;
        full.acquire();
        mutex.acquire();

        //while (count == 0) 
            ; // do nothing the buffer is empty

        // remove an item from the buffer
        //--count;

        Object item = buffer[out];
        out = (out + 1) % BUFFER_SIZE;
        mutex.release();
        empty.release();
        return item;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-11T09:53:10.620

也许我不完全了解您的应用程序，但您不能只使用 java.util.concurrent 包（[ArrayBlockingQueue](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ArrayBlockingQueue.html)）中已经提供的有界缓冲区类吗？

> 这是一个经典的“有界缓冲区”，其中一个固定大小的数组保存由生产者插入并由消费者提取的元素。一旦创建，容量就无法增加。尝试将元素放入完整队列将导致放置操作阻塞；尝试从空队列中检索元素同样会阻塞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-11T09:56:47.400

错误告诉你所有你需要知道的；InterruptedException 可能会被 acquire 抛出 - 因此您需要 a) 捕获并处理它或 b) 允许它传播到调用函数之外 - 需要将其添加到函数中会引发 sepcification。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-11T10:11:34.273

您需要处理[acquire](http://java.sun.com/javase/6/docs/api/java/util/concurrent/Semaphore.html#acquire())方法抛出的异常。

*   [Java 教程：异常](http://java.sun.com/docs/books/tutorial/essential/exceptions/)
*   Brian Goetz：[Java 理论与实践：处理 InterruptedException](http://www.ibm.com/developerworks/java/library/j-jtp05236.html)

# configuration-files - 使用 FreePascal 查找 $HOME 或 Windows 等效项

> ID：847386
> 
> 赞同：0
> 
> 时间：2009-05-11T09:38:44.780
> 
> 标签：configuration-files, directory, detect, freepascal

我的目的是将用户配置文件部署在：

*   $HOME/.appname 用于 Unix/Linux。
*   \Documents and Settings\(user)\Application Data\AppName for Windows。

我可以使用哪些 API 或一组函数，以及适当的 {$IFDEF}，以便我可以在适当的位置部署我的配置文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T09:55:12.223

您可能最终会使用该[`GetEnvironmentVariable`功能](http://www.freepascal.org/docs-html/rtl/sysutils/getenvironmentvariable.html)。在类 Unix 操作系统下，您将使用`HOME`环境变量。在 Windows 下，您将使用`APPDATA`环境变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-11T15:24:27.737

更好地使用正确的功能：

[http://www.freepascal.org/docs-html/rtl/sysutils/getappconfigdir.html](http://www.freepascal.org/docs-html/rtl/sysutils/getappconfigdir.html)

结果：=getappconfigdir（假）

# css - ASP.Net MVC 页面样式

> ID：847395
> 
> 赞同：1
> 
> 时间：2009-05-11T09:41:04.463
> 
> 标签：css, asp.net-mvc

我有一个 css 文件，我想用它来设置我的 ASP.Net MVC Web 应用程序的样式。

我已将它包含在解决方案中，但它似乎没有任何效果。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-11T09:46:00.133

您是否在 html 或 aspx 页面中添加了对它的引用。

必须在`<head>`文档的元素中添加参考：

```
<link rel="stylesheet" type="text/css" media="all" href="../../Content/niceforms-default.css" /> 
```

这是你要问的，还是我把你的问题太直白了？

# c++ - 用 C/C++ 编译一个 DLL，然后从另一个程序调用它

> ID：847396
> 
> 赞同：65
> 
> 时间：2009-05-11T09:41:10.657
> 
> 标签：c++, c, dll, gcc, vb6

我想制作一个简单、简单的 DLL，它导出一个或两个函数，然后尝试从另一个程序中调用它......到目前为止，我所看到的所有地方都是针对复杂问题、将事物链接在一起的不同方式、奇怪的问题我什至还没有*开始*意识到存在......我只是想开始，通过这样做：

制作一个导出一些函数的 DLL，例如，

```
int add2(int num){
   return num + 2;
}

int mult(int num1, int num2){
   int product;
   product = num1 * num2;
   return product;
} 
```

我正在使用 MinGW 进行编译，我想在 C 中执行此操作，但如果在 C++ 中执行此操作有任何真正的差异，我也想知道这些。我想知道如何将该 DLL 加载到另一个 C（和 C++）程序中，然后从中调用这些函数。我在这里的目标是，在玩了一会儿 DLL 之后，通过将 DLL 加载到 Visual Basic（我有 Visual Studio 6，我只想制作一些表单和调用 DLL 的窗体上的对象的事件）。

我需要知道如何调用 gcc (/g++) 以使其创建 DLL，还需要知道如何编写 (/generate) 导出文件......以及我可以/不能在 DLL 中做什么（比如，我可以采取来自VB前端的指针/引用的参数？DLL可以在前端调用一个理论函数吗？或者让一个函数从VB获取一个“函数指针”（我什至不知道这是否可能）并调用是吗？）我很确定我不能将变体传递给 DLL……但这就是我所知道的全部。

## 再次更新

好的，我想出了如何用 gcc 编译它，以制作我运行的 dll

```
gcc -c -DBUILD_DLL dll.c
gcc -shared -o mydll.dll dll.o -Wl,--out-implib,libmessage.a 
```

然后我让另一个程序加载它并测试功能，效果很好，非常感谢您的建议，但我尝试用 VB6 加载它，就像这样

```
Public Declare Function add2 Lib "C:\c\dll\mydll.dll" (num As Integer) As Integer 
```

然后我只是从表单中调用了 add2(text1.text) ，但它给了我一个运行时错误：

“在 C:\c\dll\mydll.dll 中找不到 DLL 入口点 add2”

这是我为 DLL 编译的代码：

```
#ifdef BUILD_DLL
#define EXPORT __declspec(dllexport)
#else
#define EXPORT __declspec(dllimport)
#endif

EXPORT int __stdcall add2(int num){
  return num + 2;
}

EXPORT int __stdcall mul(int num1, int num2){
  return num1 * num2;
} 
```

但是，像这样从 C 程序调用它是可行的：

```
#include<stdio.h>
#include<windows.h>

int main(){

  HANDLE ldll;
  int (*add2)(int);
  int (*mul)(int,int);

  ldll = LoadLibrary("mydll.dll");
  if(ldll>(void*)HINSTANCE_ERROR){
    add2 = GetProcAddress(ldll, "add2");
    mul = GetProcAddress(ldll, "mul");
    printf("add2(3): %d\nmul(4,5): %d", add2(3), mul(4,5));
  } else {
    printf("ERROR.");
  }

} 
```

有任何想法吗？

## 解决了

为了解决前面的问题，我只需要像这样编译它：

```
gcc -c -DBUILD_DLL dll.c
gcc -shared -o mydll.dll dll.o -Wl,--add-stdcall-alias 
```

并在 VB6 中使用此 API 调用

```
Public Declare Function add2 Lib "C:\c\dll\mydll" _
    (ByVal num As Integer) As Integer 
```

我学会了不要忘记明确指定 ByVal 或 ByRef ——我只是在取回我传递的参数的地址，它看起来像 -3048。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-11T10:28:05.133

关于使用 MinGW 构建 DLL，这里有一些非常简短的说明。

首先，您需要将函数标记为导出，以便 DLL 的调用者可以使用它们。为此，请修改它们，使它们看起来像（例如）

```
__declspec( dllexport ) int add2(int num){
   return num + 2;
} 
```

然后，假设您的函数位于名为 funcs.c 的文件中，您可以编译它们：

```
gcc -shared -o mylib.dll funcs.c 
```

-shared 标志告诉 gcc 创建一个 DLL。

要检查 DLL 是否确实导出了函数，请获取免费的[Dependency Walker](http://www.dependencywalker.com/)工具并使用它来检查 DLL。

对于可以自动执行构建 DLL 所需的所有标志等的免费 IDE，请查看优秀的[Code::Blocks](http://www.codeblocks.org/)，它与 MinGW 配合得非常好。

**编辑：**有关此主题的更多详细信息，请参阅MinGW Wiki 上的文章[Creating a MinGW DLL for Use with Visual Basic 。](http://www.mingw.org/wiki/Visual_Basic_DLL)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-11T10:30:46.690

这是您的操作方法：

在.h

```
#ifdef BUILD_DLL
#define EXPORT __declspec(dllexport)
#else
#define EXPORT __declspec(dllimport)
#endif

extern "C" // Only if you are using C++ rather than C
{    
  EXPORT int __stdcall add2(int num);
  EXPORT int __stdcall mult(int num1, int num2);
} 
```

在.cpp

```
extern "C" // Only if you are using C++ rather than C
{    
EXPORT int __stdcall add2(int num)
{
  return num + 2;
}

EXPORT int __stdcall mult(int num1, int num2)
{
  int product;
  product = num1 * num2;
  return product;
}
} 
```

宏告诉您的模块（即您的 .cpp 文件）它们正在向外界提供 dll 内容。包含您的 .h 文件的人想要导入相同的功能，因此他们出售 EXPORT 以告诉链接器导入。您需要将 BUILD_DLL 添加到项目编译选项中，并且您可能希望将其重命名为明显特定于您的项目的名称（以防 dll 使用您的 dll）。

您可能还需要创建一个[.def 文件来重命名函数](http://msdn.microsoft.com/en-us/library/d91k01sh(VS.71).aspx)并对名称进行去混淆处理（C/C++ 会破坏这些名称）。[这个博客条目](http://blogs.msdn.com/oldnewthing/archive/2004/01/12/57833.aspx)可能是一个有趣的起点。

加载您自己的自定义 dll 就像加载系统 dll。只需确保 DLL 在您的系统路径上。C:\windows\ 或应用程序的工作目录是放置 dll 的简单位置。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-11T09:51:07.130

只有一个区别。你必须小心或命名 mangling win C++。但在 Windows 上，您必须注意 1) 声明要从 DLL 导出的函数 2) 编写一个所谓的 .def 文件，其中列出了所有导出的符号。

在 Windows 中编译 DLL 时必须使用

__declspec(dllexport)

但是在使用它时，您必须编写 __declspec(dllimport)

所以通常的做法是这样的

```
#ifdef BUILD_DLL
#define EXPORT __declspec(dllexport)
#else
#define EXPORT __declspec(dllimport)
#endif 
```

命名有点令人困惑，因为它通常被命名为 EXPORT.. 但这就是您在大多数标题中都会找到的内容。所以在你的情况下你会写（上面的#define）

int DLL_EXPORT add.... int DLL_EXPORT 多...

请记住，您必须在构建共享库期间添加预处理器指令 BUILD_DLL。

问候弗里德里希

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-11T09:48:49.083

编写 C++ dll 时要注意的是名称修饰。如果您想要 C 和 C++ 之间的互操作性，最好从 dll 中导出未损坏的 C 样式函数。

您有两种选择来使用 dll

*   要么使用 lib 文件来链接符号——编译时动态链接
*   使用`LoadLibrary()`或一些合适的函数来加载库，检索函数指针（`GetProcAddress`）并调用它——运行时动态链接

但是，如果您遵循第二种方法，则导出类将不起作用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-11T10:01:11.870

对于 VB6：

您需要将 C 函数声明为 __stdcall，否则会出现“无效调用约定”类型错误。关于您的其他问题：

> 我可以从 VB 前端通过指针/引用获取参数吗？

是的，使用 ByRef/ByVal 修饰符。

> DLL可以在前端调用一个理论函数吗？

是的，使用 AddressOf 语句。您需要先将函数指针传递给 dll。

> 或者让一个函数从VB中获取一个“函数指针”（我什至不知道这是否可能）并调用它？）

是的，使用 AddressOf 语句。

**更新（出现更多问题:)）：**

> 要将其加载到 VB 中，我只是执行通常的方法（加载 winsock.ocx 或其他运行时，但要找到我的 DLL）还是将 API 调用放入模块中？

您需要在 VB6 代码中对 API 函数进行 decaler，如下所示：

```
Private Declare Function SHGetSpecialFolderLocation Lib "shell32" _
   (ByVal hwndOwner As Long, _
    ByVal nFolder As Long, _
    ByRef pidl As Long) As Long 
```

# blogs - 有哪些好的小部件可以添加到与编程相关的博客（在 blogger.com 上）？

> ID：847401
> 
> 赞同：2
> 
> 时间：2009-05-11T09:42:59.483
> 
> 标签：blogs, widget

我决定最近开始我的博客。无论如何，我把它放在 blogger.com 上，并正在查看您可以添加的小部件。其中有大约 100k+。

顺便说一句，我尝试添加 StackOverflow 搜索小部件，但它抱怨它坏了。

无论如何，我正在寻求一些关于值得添加的良好编程相关小部件的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-08T16:50:36.667

[Syntax Highlighter](http://alexgorbatchev.com/) -- 支持几乎所有您可能希望发布片段的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-04T00:51:54.637

一个允许访问无数 API 文档的小部件。

[http://www.gotapi.com/widgets/index.html](http://www.gotapi.com/widgets/index.html)

# spring.net - 使用 SPRING.Net 创建新对象

> ID：847402
> 
> 赞同：1
> 
> 时间：2009-05-11T09:43:06.113
> 
> 标签：spring.net

我是 spring.net 的新手，我正在尝试创建一个 List<> 对象。该列表由一个循环初始化，该循环调用：

*   IObj obj= (IObj)ContextRegistry.GetContext().GetObject("obj")

*   更改对象属性....

*   将其添加到列表中...

问题是：我在循环的每一步都得到相同的对象，所以我得到了相同对象的列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T20:55:06.577

如果您的对象定义不是单例，那么您每次都会得到一个新对象。请注意，默认情况下，单例设置为 true，因此您必须明确将其设置为 false。

例如，如果您使用 xml 文件来配置对象，请将单例属性设置为 false：

```
<object name="name" type="..." singleton="false"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-19T18:35:21.233

目前尚不清楚您通过循环“GetObject("obj")" 方法来实现什么。也许你可以发布循环代码？

"GetObject("obj")" 的作用是向容器询问名称为 "obj" 的对象。您声明要更改对象的属性并将其添加到列表中。这是容器可以为您做的事情： 设置对象的属性 ： [http](http://www.springframework.net/doc-latest/reference/html/objects.html#objects-simple-values) ://www.springframework.net/doc-latest/reference/html/objects.html#objects-simple-values 创建列表： [http： //www.springframework.net/doc-latest/reference/html/objects.html#objects-collections-values](http://www.springframework.net/doc-latest/reference/html/objects.html#objects-simple-values)

该列表可以注入到您选择的对象中。

如果您只想要 IObj 的非单例对象，naders 的答案是正确的。Spring 将这些非单例对象称为“原型”。可以在此处找到可用范围的概述：[http ://www.springframework.net/doc-latest/reference/html/objects.html#objects-factory-scopes](http://www.springframework.net/doc-latest/reference/html/objects.html#objects-factory-scopes)

# java - Java 与设备直接通信的本机方式是什么？

> ID：847403
> 
> 赞同：1
> 
> 时间：2009-05-11T09:43:18.203
> 
> 标签：java, device-driver, ports, device

Java 与 LPT1、COM1、USB 等设备或端口直接通信的本机方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-11T09:54:41.930

native 意味着不可移植，因此当且仅当以下库不适合您时，您必须使用 JNI 或[JNA ：](http://jna.dev.java.net/)

*   [javacomm](http://java.sun.com/products/javacomm/)用于串口
*   [jUSB](http://jusb.sourceforge.net/)用于 USB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T10:16:19.913

[RXTX](http://users.frii.com/jarvi/rxtx/intro.html)适用于 COM 和 LPT 端口。USB极其困难；可能最简单的方法是为设备的本机驱动程序编写自己的 C+JNI 包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-12-16T17:35:05.673

不幸的是，在 Javax.comm 中的 sun 版本 2.0 和最新的 RXTX 版本——LPT 并行端口在 Win32 下没有正确实现。输出似乎工作正常，但如果您尝试从端口读取，这是不可能的。

# asp.net - asp.net 设置是否影响经典 asp（IIS 6 设置）

> ID：847406
> 
> 赞同：3
> 
> 时间：2009-05-11T09:44:03.257
> 
> 标签：asp.net, asp-classic, iis-6, settings

我的公司有一些经典的 asp 站点并在 asp.net 中开发新站点，每次我们在 IIS 6 中创建一个新站点时，所有站点都会关闭几秒钟。所以我正在考虑将 ASP.NET 版本的默认值更改为 2.x，因为这是我们正在开发的，我想知道这些设置是否会以某种方式影响在同一 IIS 上运行的经典 asp 站点。

它们现在都是 asp.net 1.1 版本，但是每次我们向 IIS 添加新站点时，我们都必须解决这个所有站点问题。

有什么警告吗？有什么我需要知道的吗？

谢谢一堆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T09:53:29.683

当您更改站点的版本时，所有站点都会重置。因此，最好将默认值更改为您添加最多的那个。

默认设置不会影响任何现有站点、.net、经典站点或其他站点。

您可能遇到的唯一问题是您无法在 2.0 站点中运行 1.1 虚拟应用程序。

此外，您不能在同一个应用程序池中运行不同的版本。因此，您应该在更改默认版本的同时更改默认应用程序池。

顺便说一句，我已经阅读了一些命令行选项和其他设置，这意味着您可以更改站点的版本而不会导致所有 iis 重置。但是，我个人并没有设法做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T14:08:55.487

在同一个应用程序池中沿站点运行经典站点 .Net 站点应该没问题，当您将新版本上传到服务器时，您不应该在 IIS 中看到任何停机时间。

如果您更改任何应用程序池的配置或更改站点中运行的 .Net 版本，您会发现服务器暂停几秒钟，当应用程序池重置时，该应用程序池中运行的所有站点都将被重置.

我的建议是为您的新 .Net 2.0 站点创建 2 个应用程序池，一个为旧的经典站点创建一个，如果您正在进行开发，这也将有所帮助，因为虽然不太可能编写代码来完成应用程序池崩溃.

唯一要记住的是，每个应用程序池作为大约 3-5MB 的小内存开销，因此如果您为每个站点创建一个应用程序池并托管大量站点，您可能很快就会耗尽 RAM。

# sharepoint - SharePoint、WCF 和匿名访问

> ID：847414
> 
> 赞同：1
> 
> 时间：2009-05-11T09:45:48.963
> 
> 标签：sharepoint, wcf, wcf-binding

SharePoint 上的 WCF 服务是否需要启用匿名访问？

我们有一个使用 Ajax.Net 调用服务的应用程序页面，如果 Anon Access 关闭，那么我们会提示输入用户名和密码，如果它打开，那么一切都很好。

我们没有使用 WCF 客户端，它纯粹是由脚本管理器调用的

```
<configuration>
  <system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding
          name="webHttpBinding_DataSources"
          maxBufferSize="5242880"
          maxReceivedMessageSize="5242880" />
      </webHttpBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior
          name="ServiceAspNetAjaxBehavior">
          <enableWebScript />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior
          name="ServiceBehavior">
          <serviceMetadata
            httpGetEnabled="true"
            httpGetUrl="" />
          <serviceDebug
            includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment
      aspNetCompatibilityEnabled="true"/>
    <services>
      <service
          name="XXXXXXXX.DataSources.Services.DataSourceHelper"
          behaviorConfiguration="ServiceBehavior">
        <endpoint
          address=""
          behaviorConfiguration="ServiceAspNetAjaxBehavior"
          binding="webHttpBinding"
          bindingConfiguration="webHttpBinding_DataSources"
          contract="XXXXXXXX.DataSources.Services.IDataSourceHelper" />
      </service>
    </services>
  </system.serviceModel>
</configuration> 
```

谢谢，菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-11T13:40:30.093

我设法让它与以下工作

```
<configuration>
  <system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding
          name="webHttpBinding_DataSources"
          maxBufferSize="5242880"
              maxReceivedMessageSize="5242880" >
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Ntlm" />
          </security>
        </binding>
      </webHttpBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior
          name="ServiceAspNetAjaxBehavior">
          <enableWebScript />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior
          name="ServiceBehavior">
          <serviceMetadata
            httpGetEnabled="true"
            httpGetUrl="" />
          <serviceDebug
            includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment
      aspNetCompatibilityEnabled="true"/>
    <services>
      <service
          name="XXXXXXXXXX.DataSources.Services.DataSourceHelper"
          behaviorConfiguration="ServiceBehavior">
        <endpoint
          address=""
          behaviorConfiguration="ServiceAspNetAjaxBehavior"
          binding="webHttpBinding"
          bindingConfiguration="webHttpBinding_DataSources"
          contract="XXXXXXXXXX.DataSources.Services.IDataSourceHelper" />
      </service>
    </services>
  </system.serviceModel>
</configuration> 
```

我做了一个 IISReset 并且不得不关闭并重新打开我的浏览器才能让它工作

最好的祝福，

菲尔

# java - Java EE 和应用程序服务器 - 我能做什么？

> ID：847417
> 
> 赞同：4
> 
> 时间：2009-05-11T09:47:15.013
> 
> 标签：java, jakarta-ee, jms, jndi

我决定是时候深入研究 Java EE 的全部内容了。我在 Java SE 中使用 EE 一些技术，例如 JPA 或 JMS，但我仍然在使用 Java SE，我相信 Java EE 和应用程序服务器会解决我遇到的一些问题。

但是：在阅读了网络上的一些文章后，我仍然有一些问题。

第一：我是否仅限于请求响应应用程序？我有一个通过 HTTP 提供 XML 文档的应用程序。所有交付的对象都被添加到一个队列中，该队列将在不同的线程中分派。对此对象进行了一些验证，包括打开远程机器的套接字（我听说不允许 EJ-Beans 这样做，这是真的吗？）。那么，是否可以在应用程序服务器中执行此操作？

第二：我知道有消息驱动的 bean，是否可以从应用程序服务器外部将 JMS 消息发送到 MDB？我有一个发送 JMS 消息的服务，但作为遗留系统运行，而不是在同一个应用程序服务器内。

第三：系统管理员或用户如何配置我的应用程序？我知道在应用程序服务器中配置了一些诸如数据库连接之类的东西，我的应用程序可以通过 JNDI 查找它们或通过 DI 获取它们。但是应用程序特定的配置呢？

是的，这些都是非常愚蠢的问题，但也许有人有时间向我解释所有这些东西是如何工作的。:)

问候， Posix

PS：

4th：似乎EJB不允许对文件做任何事情，所以Java EE对于接收文件的服务似乎没有选择，将它们推送到不同的系统并希望它们写入套接字（见问题1）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T11:50:56.410

我可以说在您的情况下可以毫无疑问地使用 Java EE。让我更深入地研究您的具体问题：

1.  您可以从 EJB 打开套接字连接。没有什么可以阻止你这样做。但是，不建议对 Java EE 应用程序进行这种操作。在我看来，更好的选择是实现 Java EE 连接器 (JCA)，它可以管理与您的专有系统的套接字连接池。这是按照规范实现这种集成的模型方式。

2.  是的！完全可以接收从外部应用程序/系统（AS 外部）发送的消息。这是使用消息传递集成的主要思想:) 在许多情况下，作为 Java EE 应用程序的应用程序通过 MDB 从 JMS 通道接收消息，但 JMS 只是一个 API，可以由任何消息传递系统（例如 IBM MQ）实现。在此架构中，外部系统将 MQ 消息放入队列中，而您的 Java EE 应用程序正在监听队列，通过 JMS API 接收消息！

3.  一般来说，Application Server 为管理员提供了很好的工具来管理 Java EE 资源，即数据源、JMS 连接工厂、JMS 目标、JTA 事务管理器等。如果您需要能够更改特定 Java EE 应用程序的能力，那么最好的选择似乎是 JMX . 只需实现一些 MBean，将它们导出到嵌入在 Application Server 中的 JMX 服务器，就完成了。这项任务在 JBoss 中确实是微不足道的，但如今大多数现代应用程序服务器都提供了广泛的 JMX 功能。

4.  乍一看，EJB 似乎不是处理文件的最佳选择。但是请记住，您的 EJB 的实现仍然是用纯 Java 编写的，因此没有什么能阻止您读取/流式传输文件等。我有大型 Java EE 应用程序的经验，这些应用程序将大文件作为输入文件处理，并且可以向您保证 Java EE 是一个不错的技术选择 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T11:26:52.063

4.  对文件做任何事情都违反了 EE 规范（以确保 EE 应用程序是可移植和可分发的）。然而，由于这只是简单的 Java 代码，yopu 可以选择做任何你想做的事情。只要您知道目标环境的外观（例如系统供内部使用），我会毫不犹豫地修改文件，因为规范是这样说的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-11T09:56:13.830

[以下](http://java.sun.com/blueprints/qanda/ejb_tier/restrictions.html)是 EJB 1.1 规范的限制。

以下是我对您的问题的看法：

1.  我相信 EJB 可以在远程机器上打开套接字，但我会说打开套接字的操作级别太低。我会考虑将套接字为您所做的任何事情公开为另一个 EJB。
2.  MDB 只是向特定主题或队列注册的侦听器。它没有说任何关于发送的内容。如果您的客户知道如何将消息发送到队列，这是可能的。他们只需要知道队列 URL 并能够创建连接。
3.  管理员设置连接池、JNDI 名称等 - 一切。他们使用应用服务器的管理控制台来执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T11:56:11.003

1.  在像 Tomcat 这样的应用程序服务器中（可能还有其他应用程序服务器，但我从未使用过它们），您不仅可以在收到请求时执行操作，还可以在服务器启动时执行操作（包括启动长时间运行的线程）。基本上你可以用“普通”Java 做任何你能做的事情。事实上，如果你只包含一段在服务器启动时调用适当的 main() 的代码，你就可以将一个普通的 Java 应用程序放在应用程序服务器中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-11T20:56:27.210

我建议将每种技术应用于您当前感到疼痛的适当点。关于你的具体观点，

1.  在 EE 上下文中，您可以将消息添加到 JMS 队列中，该队列具有可以执行实际处理的 MDB。关于 HTTP 请求/响应生命周期的管理，您可以像现在一样管理它，或者使用现有的库来为您做。通过迁移到 EE 应用服务器，您将允许应用服务器管理线程、事务等，而不必手动管理。

2.  正如 duffymo 所说，MDB 负责接收消息，它们不关心消息的来源。

3.  系统管理员可以按照 duffymo 的说明配置应用服务器。此外，您可以将 JMX bean 公开给其他系统或最终用户，以允许他们根据需要配置服务。

# c# - 如何以编程方式限制我的 c# 应用程序的带宽使用？

> ID：847422
> 
> 赞同：17
> 
> 时间：2009-05-11T09:49:33.153
> 
> 标签：c#, limit, bandwidth, throttling

我这里有一个备份应用程序，它连接到各种 web 服务并从 ftp 或 http 服务器下载/上传文件。限制我的应用程序带宽使用的最简单方法是什么？

我需要这样做，因为一旦安装并运行该应用程序将减慢所有办公室人员的互联网访问速度，这最终会让我陷入地狱。因此，我想实施一个限速，该限速在工作时间处于活动状态，并在晚上被禁用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-11T10:09:32.403

您正在寻找的是所谓的**带宽限制**这是一个**[很好的例子](http://www.codeproject.com/KB/IP/Bandwidth_throttling.aspx)**，这是如何完成的，还可以查看评论以了解它是如何从客户端完成的。

你可能也想看看[**这个例子**](http://www.codeproject.com/KB/IP/MyDownloader.aspx)，把东西放在一个真实的应用程序中

# c# - C# 线程和使用 AutoResetEvent

> ID：847423
> 
> 赞同：2
> 
> 时间：2009-05-11T09:49:45.523
> 
> 标签：c#, multithreading

我在类库中有以下代码。我等待回电到我的主应用程序。我正在进行 DownloadStringAsync 调用，因此在完成后我必须等待几秒钟才能获得回调。我有 3 个这样的调用要等待，所以在我的主应用程序中，我使用 AutoResetEvent 来等待它们全部完成。所以我会一直阻塞，直到它们在回调函数中被设置。

但是，在测试回调后不会被调用。我在想，当代码被 AutoResetEvent 阻止时，它会阻止 DownloadStringAsync。当我注释掉这段代码时，一切正常。

所以我想只要我打电话： objNoGateway.NoGatewayStatus(sipUsername, statusDisplay1.PhoneNumber); 当代码到达这里时：handle.WaitOne(); 它将阻塞类库中的代码。

非常感谢您的任何建议。

在我的类库代码示例中。

```
 // Event handler that makes a call back in my main application
     // Event handler and method that handles the event
    public EventHandler<NoGatewayEventArgs> NoGatewayCompletedEvent;
    // The method that raises the event.
    private void OnNoGatewayCompleted(object sender, NoGatewayEventArgs e)
    {
        if (NoGatewayCompletedEvent != null)
        {
            NoGatewayCompletedEvent(this, e);
        }
    }

    // Start the Async call to find if NoGateway is true or false
    public void NoGatewayStatus(string sipUsername, string phoneNumber)
    {     
        string strURL = string.Format("http://xxxxxxxxxxxxxxx={0}&CalledNumber={1}", sipUsername, phoneNumber);

        if (!wc.IsBusy)
        {
            try
            {
                string errorMsg = string.Empty;
                wc.DownloadStringAsync(new Uri(strURL));
            }
            catch (WebException ex)
            {
                Console.WriteLine("IsNoGateway: " + ex.Message);
            }
            catch (Exception ex)
            {
                Console.WriteLine("IsNoGateway: " + ex.Message);
            }
        }
        else
        {
            Console.WriteLine("WebClient: IsNoGateWay(): Busy please try again");
        }

    }

    void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            if (e.Result == "No gateway")
            {
                OnNoGatewayCompleted(this, new NoGatewayEventArgs(validateResponse_e.VALIDATION_FAILED));
                Console.WriteLine("NoGatway() DownloadedCompleted: " + e.Result);
            }
            else
            {
                OnNoGatewayCompleted(this, new NoGatewayEventArgs(validateResponse_e.OK));
                Console.WriteLine("NoGateway() DownloadCompleted: " + e.Result);
            }
        }
        else
        {
            this.OnNoGatewayCompleted(this, new NoGatewayEventArgs(validateResponse_e.SERVER_FAILED));
            Console.WriteLine("No Gateway: DownloadCompleted() Error: " + e.Error.Message);
        }
    } 
```

在我的主应用程序中，我注册了这个回调。并等待结果。然后设置 AutoResetEvent。

```
 ManualResetEvent[] waitValidateCallResponse = new ManualResetEvent[] 
          { new ManualResetEvent(false), new ManualResetEvent(false), new ManualResetEvent(false) };
    // Event handler for NoGateway event
    private void OnNoGatewayCompleted(object sender, NoGatewayEventArgs e)
    {
        Console.WriteLine("OnNoGatewayComleted: " + e.noGateway);
        waitValidateCallResponse[0].Set();
    } 
```

我打电话和阻止的部分。

```
NoGateway objNoGateway = new NoGateway()           
objNoGateway.NoGatewayCompletedEvent += new EventHandler<NoGatewayEventArgs>(this.OnNoGatewayCompleted);
objNoGateway.NoGatewayStatus(sipUsername, statusDisplay1.PhoneNumber);

// Block here - Wait for all reponses to finish before moving on
waitEvent.WaitOne(5000, true);                      
Console.WriteLine("All thread finished"); 
```

======================== 编辑并添加其他 2 个回调，以免混淆我只有一个的问题 ======= ================

```
 private void OnCalledNumberBlockedCompleted(object sender, CalledNumberBlockedEventArgs e)
    {
        Console.WriteLine("OnCalledNumberBlockedCompleted: " + e.CalledNumberBlocked);
        waitValidateCallResponse[1].Set();
    }

    private void OnValidTelephoneNumberCompleted(object sender, ValidTelephoneNumberEventArgs e)
    {
        Console.WriteLine("OnValidTelephoneNumberCompleted: " + e.validTelephoneNumber);
        waitValidateCallResponse[2].Set();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T10:00:02.857

是不是很简单：你总是在索引 0 上调用 Set？

```
private void OnNoGatewayCompleted(object sender, NoGatewayEventArgs e)
{
    Console.WriteLine("OnNoGatewayComleted: " + e.noGateway);
    waitValidateCallResponse[0].Set();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-11T14:37:37.823

尝试以下方式：

```
public void NoGatewayStatus (string sipUsername, string phoneNumber) {
    string strURL = string.Format( "http://xxxxxxxxxxxxxxx={0}&CalledNumber={1}", sipUsername, phoneNumber );

    ManualResetEvent wait1 = new ManualResetEvent( false );
    WebClient wc = new WebClient();
    Thread thr = new Thread( DownloadSomeStuff );
    thr.Start( new DlArguments( strURL, wait1 ) );

    // do the other three

    if ( !wait1.WaitOne( 10000 ) ) {
        Console.WriteLine( "DownloadSomeStuff timed out" );
        return;
    }
    if ( !wait2.WaitOne( 10000 ) ) {
        Console.WriteLine( "DownloadOtherStuff timed out" );
        return;
    }
    if ( !wait3.WaitOne( 10000 ) ) {
        Console.WriteLine( "DownloadMoreStuff timed out" );
        return;
    }
}

public void DownloadSomeStuff (object p_args) {
    DlArguments args = (DlArguments) p_args;
    try {
        WebClient wc = new WebClient();
        wc.DownloadString( args.Url );
        args.WaitHandle.Set();
    } catch ( Exception ) {
        // boring stuff
    }
}

private class DlArguments
{
    public DlArguments (string url, ManualResetEvent wait_handle) {
        this.Url = url;
        this.WaitHandle = wait_handle;
    }

    public string Url { get; set; }
    public ManualResetEvent WaitHandle { get; set; }
} 
```

这行吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-11T10:04:02.490

经过大量编辑，我想我可能会理解这个问题。Windows 窗体应用程序有一个主线程；该线程用于处理消息。因此，当您的主线程阻塞时，您的应用程序无法接收事件。你使用 WaitOne 来保持主线程被阻塞。

我会将 WaitOne() 检查移至单独的计时器线程。

或者您可以等待一段有限的时间，并指示应用程序在这两者之间处理消息：

```
foreach (WaitHandle handle in waitValidateCallResponse)
{
    while (!handle.WaitOne(300))
        Application.ProcessMessages();
    Console.WriteLine("events.WaitOne(): " + handle.ToString());
} 
```

不过，后一种方法不是您应该在图书馆中做的事情。我认为这是一种反模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-11T10:51:23.460

片段代码很奇特

```
// Event handler that makes a call back in my main application
     // Event handler and method that handles the event
    public EventHandler<NoGatewayEventArgs> NoGatewayCompletedEvent;
    // The method that raises the event.
    public void OnNoGatewayCompleted(object sender, NoGatewayEventArgs e)
    {
        if (NoGatewayCompletedEvent != null)
        {
            NoGatewayCompletedEvent(this, e);
        }
    } 
```

但是，在最后一个片段中，您为该事件附加了一个事件处理程序，如下所示。再次事件。除非您有 2 个名为 OnNoGatewayCompleted 的方法（我希望没有）

```
objNoGateway.NoGatewayCompletedEvent 
  += new EventHandler<NoGatewayEventArgs>(this.OnNoGatewayCompleted); 
```

如果您正在寻找要在事件处理程序中发出信号的 waitHandles，则不应将方法 OnCalledNumberBlockedCompleted 连接到事件。

PS：正如 Marc 指出的那样.. 使用[WaitHandle.WaitAll](http://msdn.microsoft.com/en-us/library/z6w25xa6.aspx)（for 循环要求异步操作按顺序完成，但情况可能并非如此）

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-05-11T11:01:57.390

使用 WaitHandle.WaitAny(handleArray); 等待句柄数组中的所有句柄而不是 handle.WaitOne(); 在一个循环中

# java - 用非函数式语言编写函数式程序

> ID：847430
> 
> 赞同：5
> 
> 时间：2009-05-11T09:53:12.010
> 
> 标签：java, functional-programming, multicore, imperative-languages

假设我使用 Java 中的不可变数据结构编写了一个程序。即使它不是函数式语言，它也应该能够并行执行。如何确保我的程序正在使用我的处理器的所有内核执行？计算机如何决定哪些代码可以并行运行？

PS我问这个问题的目的不是找出如何并行化Java程序。但要知道 - 计算机如何并行化代码。它可以在用非功能语言编写的功能程序中完成吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-11T09:58:19.987

Java 程序通过线程并行化。计算机无法神奇地弄清楚如何以 Java 等命令式语言将应用程序的各个部分分布到所有内核中。只有像 Erlang 或 Haskell 这样的函数式语言才能做到这一点。阅读 Java 线程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-11T11:47:36.273

我不知道[自动并行化](http://en.wikipedia.org/wiki/Automatic_parallelization)JVM。它们确实存在于其他语言，例如 FORTRAN。

您可能会发现为 JDK7 安排的 JSR166y [fork-join 框架](http://gee.cs.oswego.edu/dl/jsr166/dist/jsr166ydocs/)很有趣。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-11T12:25:41.957

我不认为你可以“强制”JVM并行化你的程序，但是有一个单独的线程执行每个“任务”，如果你可以这样分解你的程序，在大多数情况下可能会成功吗？但是，仍然不能保证并行性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T06:19:10.370

您可以编写具有自动并行化任务的函数，在特定情况下这很容易做到，但是我不知道有任何内置的 Java API 可以做到这一点。（可能除了 Executor/ExecutorService）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T06:26:23.340

我在学校使用的东西为你做了很多工作。

[http://www.cs.rit.edu/~ark/pj.shtml](http://www.cs.rit.edu/~ark/pj.shtml)

它具有执行 SMP 或基于消息的并行性的能力。

它是否对您有用是一个不同的问题:-)

# language-agnostic - 从关系数据库中“区分”对象

> ID：847434
> 
> 赞同：9
> 
> 时间：2009-05-11T09:54:19.947
> 
> 标签：language-agnostic, oop, diff

我们的 win32 应用程序从 MySQL 关系数据库中的多个表中的数据组装对象。对于这样的对象，多个修订版存储在数据库中。

当存储某个东西的多个修订版时，迟早你会问自己这个问题，你是否可以可视化两个修订版之间的差异:) 所以我的问题是：**什么是“区分”两个这样的数据库对象的好方法？**

*   您会在数据库级别进行比较吗？（听起来不是一个好主意：太低级，对模式太敏感）。
*   你会比较对象吗？
    *   您会编写一个“手动”比较两个对象的属性和字段的函数吗？
    *   你将如何存储差异？在一个单独的通用“TDiff”对象中？
    *   关于如何在用户界面中可视化这些东西的任何一般性建议？

非常欢迎您提供建议或有关您自己的经历的故事；非常感谢！

### 有关用例的额外信息 (20090515)

回复 Antony 的评论：此特定应用程序用于安排由教师团队运行的培训课程。老师的日程表存储在数据库的各个表中，其中包含诸如“她哪一天要去哪里”、“她的团队中谁是她的同事”等信息。这些信息分布在多个表。

有时，我们会“发布”时间表，以便教师可以在网页上查看。每个“出版物”都是一个修订版，我们希望能够向用户（以及后来的教师）展示两个出版物之间的变化——如果有的话。

希望这使场景更加具体:)

### 最后的一些评论

嗯，赏金已经结束，所以我接受了一个答案。如果有可能以某种方式从我的代表中减去几个额外的 100 分并将其提供给其他一些答案，我会毫不犹豫地这样做。你们所有的帮助都很棒，我非常感谢！~ 小野 20090519

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-13T11:02:59.987

只是一个想法，但值得您将两个对象版本转换为某种文本格式，然后使用现有的差异程序比较这些文本对象 -`diff`例如？有很多不错的差异程序可以提供很好的视觉表示等。

所以例如

对象 1 的文本版本：

```
first_name: Harry
last_name: Lime
address: Wien
version: 0.1 
```

对象 2 的文本版本：

```
first_name: Harry
last_name: Lime
address: Vienna
version: 0.2 
```

差异将类似于：

```
3,4c3,4
< address: Wien
< version: 0.1
---
> address: Vienna
> version: 0.2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-16T06:53:49.217

假设一个类有 5 个已知属性——日期、时间、主题、大纲、位置。当我查看我的日程安排时，我最感兴趣的是这些属性的最新（即当前/准确）版本。知道发生了什么变化（如果有的话）对我也很有用。（附带说明，如果日期、时间或地点发生变化，我还希望收到一封电子邮件/短信通知我，以防我不检查更新的时间表:-)）

我建议在修改时间表时执行“差异”。因此，当创建类的第 2 版时，记录哪些值已更改，并将其存储在第 2 版对象的两个“更改日志”字段中（必须已经有一个父表位于所有表的顶部 - 使用那个！ ）。一个变更日志字段是“人类可读文本”，例如“日期从 5 月 1 日星期一更改为 5 月 2 日星期二，时间从上午 10:00 更改为上午 10:30”。第二个变更日志字段是已更改字段的定界列表，例如“日期，时间”为此，在保存之前，您将遍历用户提交的值，与当前数据库值进行比较，并连接 2 个字符串，一个是人类可读的，一个是字段名称列表。然后，更新数据并将连接的字符串设置为“更改日志”值。

显示计划时，默认加载当前版本。循环遍历更改日志字段列表中的字段，并注释显示以显示值已更改（* 或突出显示等）。然后，在一个单独的面板中显示人类可读的更改日志。

如果计划被多次修改，您可能希望合并版本 1 和 2 以及 2 和 3 之间的变更日志。假设在版本 3 中只有课程大纲发生了变化 - 如果这是您在显示时间表时唯一的变更日志，不会显示对日期和时间的更改。

请注意，这种非规范化方法对分析不是很好——例如，找出哪个特定位置总是有类更改出来——但您可以使用 EAV 模型对其进行扩展以存储更改日志。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-17T01:37:49.670

如果您关心的是对数据库的更改，那么在数据库级别进行比较会很好。如果您尝试在数据库本身之上设计一层通用功能，那将是最有意义的。

如果您关心数据的更改，则在对象级别进行比较会很好。例如，如果数据是程序的输入，并且您有兴趣查看输入中的更改以验证对输出的更改是否正确。

您的用例似乎不是其中任何一个。您似乎关心输出并希望从那个角度有所不同。如果是这种情况，我会在输出报告（或其纯文本版本）而不是基础数据上做差异。您可以使用任何现成的差异工具来做到这一点。为了让您的最终用户更轻松，您可以解析差异结果并将它们呈现为 HTML。这里有很多选项：并排使用颜色编码来指示更改，一个带有更改标记的文档（例如，删除的红色删除线和添加的绿色），也许只是突出显示已更改的区域并使用气球来显示以前/当前值按需。

我曾考虑过进行数据库比较，但从未尝试过实现它。正如您所指出的，任何此类尝试都与模式密切相关。

我已经完成了对象级别的比较。一般算法是这样的：

1.  对对象 ID 列表进行集合比较。这将创建三个结果分组：添加的对象、删除的对象和同时存在于这两个集合中的对象。
2.  报告删除。
3.  报告添加内容。
4.  对于两组中的事物，进行逐个属性的比较。
5.  如果发现任何差异，请报告对象 ID、不同的属性以及相应的值。如果合适，突出显示已更改的属性值部分。

在我的例子中，比较算法是手写的以匹配对象属性。这让我可以控制比较哪些属性以及如何比较。在某些情况下，通用比较器可能是可能的，但取决于具体情况，至少部分取决于实现语言。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T11:00:44.047

我已经研究过 MySQL Diffing 很多次了。不幸的是，没有任何真正好的解决方案可用。

我尝试过的一种工具是 mysqldiff (www.mysqldiff.org)。mysqldiff 是一个用 PHP 编写的工具，能够区分 mysql 模式。不幸的是，它在很多时候都做得不好。

MySQL Workbench，MySQL 自己的 SQL IDE 提供了生成更改脚本的选项，我想它是通过在内部执行某种 diff 操作来实现的。

Aqua Data Studio 是另一个能够比较模式并输出两者差异的工具。虽然 ADS diff 非常好，但它没有提供创建更改脚本的工具。

如果我自己编写，我想我会编写能够比较两个表结构的代码。这样的代码可以调整为高度敏感（如果列顺序从版本到下一个版本不同，这是一个差异）或更中等敏感（例如列顺序不是主要问题，数据类型和长度很重要，索引和约束）。

存储，我不确定。我将研究诸如 Mercurial 之类的版本控制系统如何存储其差异信息以进行修订，并使用它来制定适合数据库的方法。

最后，对于视觉输出，我建议您查看 Aqua Data Stduio 比较功能（您可以使用试用版来测试...）。它的差异输出非常好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-13T11:08:59.383

我的应用程序 dbscript 比较存储过程中的分层数据（数据库模式），这当然必须将每个对象的每个字段/属性与其对应对象进行比较。我猜你不会绕过这一步（除非你有一个通用的对象描述模型）

至于您问题的 UI 部分，请查看屏幕截图以[查看](http://www.devio.at/index.php/gallery?func=detail&id=51)和[选择](http://www.devio.at/index.php/gallery?func=detail&id=57)差异。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-13T11:15:30.590

我会考虑对象的某种常见文本表示形式，并让文本与现有的差异工具（如 WinMerge）进行比较。

我认为没有必要自己发明差异，因为已经有很多不错的工具可以使用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-14T08:10:27.397

在您在 PostgreSQL 中的情况下，我使用了带有架构的差异表：

```
history_columns (
    column_id smallint primary key,
    column_name text not null,
    table_name text not null,
    unique (table_name, column_name)
);
create temporary sequence column_id_seq;
insert into history_columns
select nextval('column_id_seq'), column_name, table_name
    from information_schema.columns
    where
        table_name in ('table1','table2','table3')
        and table_schema=current_schema() and table_catalog=current_database();

create table history (
    column_id smallint not null references history_columns,
    id int not null,
    change_time timestamp with time zone not null
        constraint change_time_full_second -- only one change allowed per second
            check (date_trunc('second',change_time)=change_time),
    primary key (column_id,id,change_time),
    value text
); 
```

在桌子上我使用了这样的触发器：

```
create or replace function save_history() returns trigger as
$$
    if (tg_op = 'DELETE') then
        insert into historia values (
            find_column_id('id',tg_relname), OLD.id,
            date_trunc('second',current_timestamp),
            OLD.id );
        [for each column_name] {
            if (char_length(OLD.column_name)>0) then
                insert into history values (
                    find_column_id(column_name,tg_relname), OLD.id,
                    OLD.change_time, OLD.column_name
                )
        }
    elsif (tg_op = 'UPDATE') then
        [for each column_name] {
            if (OLD.column_name is distinct from NEW.column_name) then
                insert into history values (
                    find_column_id(column_name,tg_relname), OLD.id,
                    OLD.change_time, OLD.column_name
                );
            end if;
        }
    end if;
$$ language plpgsql volatile;

create trigger save_history_table1
    before update or delete on table1
    for each row execute procedure save_history(); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-19T00:40:50.427

这并不是对您提出的问题的真正答案，而是试图重新想象问题。你会考虑改变你的数据库和对象模型来存储聚合根和一系列增量吗？即建模和存储作为修订集合的修订集；修订是与值配对的实体属性。从某种意义上说，这是将修订结构内化到您的架构中，其他发帖人建议您通过“日志”来巩固已有的内容。

显示来自 deltas 的聚合是微不足道的，甚至更容易将 deltas 显示为更改历史记录。您正在使用具有状态和本地内存的富客户端这一事实使这一点更加引人注目。您可以非常轻松地显示“自 xxxx 日期以来的所有更改”，而无需重新访问数据库。

基本思想的功劳归功于 Greg Young 和他在财务数据流方面的工作，但它立即适用于您的问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-19T10:30:27.917

我正在重复 Harry Lime 的建议：将您的属性输出为文本格式，然后对结果进行哈希处理。这样，您可以比较哈希值并轻松标记已更改的数据。通过这种方式，您可以两全其美，因为您可以直观地看到差异，但可以通过编程方式识别差异。如果您想存储和检索增量，使用 has，您将有一个很好的索引来源。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-19T10:56:46.927

鉴于您想为此创建一个 UI 并需要指出差异所在，在我看来，您可以自定义或创建一个通用对象比较器 - 后者取决于您使用的语言。

对于自定义方法，您需要创建一个类，该类接受要比较的类的两个实例。然后它返回差异；

```
 public class Person
 {
     public string name;
 }

 public class PersonComparer
 {
     public PersonComparer(Person old, Person new)
     {
        ....         
     }

     public bool NameIsDifferent() { return old.Name != new.Name; }
     public string NameDifferentText() { return NameIsDifferent() ? "Name changed from " + old.Name + " to " + new.Name : ""; }
 } 
```

这样您就可以使用 NameComparer 对象来创建您的 GUI。

gereric 方法大致相同，只是您概括调用，并使用对象检查（下面的 getObjectProperty 调用）来查找差异；

```
 public class ObjectComparer()
 {
    public ObjectComparer(object old, object new)
    {
        ...
    }

    public bool PropertyIsDifferent(string propertyName) { return getObjectProperty(old, propertyName) != getObjectProperty(new, propertyName) };

     public string PropertyDifferentText(string propertyName) { return PropertyIsDifferent(propertyName) ? propertyName + " " + changed from " + getObjectProperty(old, propertyName) + " to " + getObjectProperty(new, propertyName): ""; }
 }
} 
```

我会选择第二个，因为它使根据需要更改 GUI 变得非常容易。GUI 我会尝试将差异“变黄”以使它们易于查看 - 但这取决于您希望如何显示差异。

让对象进行比较将使用初始修订版和最新修订版加载您的对象。

我的 2 美分...不像数据库比较这里的东西那样技术。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-11-14T23:51:04.387

你看过开源 DiffKit 吗？

www.diffkit.org

我认为它可以满足您的需求。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-14T08:16:37.770

以 Oracle 为例。

*   使用 dbms_metadata 将有序对象导出为文本
*   将有序表数据导出为 CSV 或查询格式
*   制作大文本文件
*   差异

# parsing - 为什么递归下降解析器不能处理左递归

> ID：847439
> 
> 赞同：25
> 
> 时间：2009-05-11T09:56:45.530
> 
> 标签：parsing, theory

有人可以向我解释为什么递归下降解析器不能使用包含左递归的语法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-11T10:01:46.987

考虑：

```
A ::= A B 
```

等效代码是

```
boolean A() {
    if (A()) {
        return B();
    }
    return false;
} 
```

看到无限递归了吗？

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-05-11T19:32:15.740

对于任何有兴趣的人

```
 A ::= A B | A C | D | E 
```

可以改写为：

```
 A ::= (D | E) (B | C)* 
```

转换的一般形式是：任何一个非左递归析取后跟任意数量的没有第一个元素的左递归析取。

改革动作代码有点棘手，但我也可以即插即用。

# javascript - jQuery 过滤器区分大小写 - 我如何禁用它？

> ID：847441
> 
> 赞同：-1
> 
> 时间：2009-05-11T09:57:00.630
> 
> 标签：javascript, jquery

我正在使用`jQuery.extend`过滤器来过滤项目。当我`*`用于过滤时，这是一个问题，因为过滤器区分大小写。

`*People`并且`*people`是两个不同的字符串。

`People`并`people`过滤相同的项目，但仅在从该字符串开始时。

如何禁用以开头的字符串区分大小写`*`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-16T23:17:14.703

您应该标准化应用程序中的大小写；我更喜欢使用 camelCase。IE 将“人”和“人”视为相同。因此，如果您将它们用作`id`s，那么您甚至可能无法获得您想要的元素。此外，当这些字符串用于类名时，第二个将覆盖 IE 中的第一个。其他浏览器遵循标准，大小写很重要。出于这个原因，它在 jQuery 中也应该很重要。

这个答案对你的问题做了很多假设。如果你编辑它，那么我可以更好地帮助你。

# c - 对 mprotect 的调用过多

> ID：847444
> 
> 赞同：3
> 
> 时间：2009-05-11T09:58:19.207
> 
> 标签：c, multithreading, parallel-processing, system-calls

我正在开发一个并行应用程序（C，pthread）。我跟踪了系统调用，因为在某些时候我的并行性能很差。我的跟踪显示我的程序调用`mprotect()`了很多次......足以显着减慢我的程序。

我确实分配了很多内存（使用`malloc()`），但只有合理数量的调用`brk()`来增加堆大小。那么为什么会有这么多电话`mprotect()`呢？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T02:39:14.530

您是否正在创建和销毁大量线程？

大多数 pthread 实现在分配线程堆栈时会添加一个“保护页面”。这是一个访问受保护的内存页面，用于检测堆栈溢出。我希望每次创建或终止线程以（取消）保护保护页面时至少调用一次 mprotect 。如果是这种情况，有几个明显的策略：

1.  `pthread_attr_setguardsize()`在创建线程之前使用将保护页面大小设置为零。
2.  使用线程池（与处理器说的一样多的线程）。线程完成任务后，将其返回到池中以获取新任务，而不是终止并创建新线程。

另一种解释可能是，如果检测到溢出，您所在的平台将增加线程堆栈。我不认为这是在 Linux 上使用 GCC/Glibc 实现的，但最近有一些类似的提议。如果您在处理时使用大量堆栈空间，则可以使用`pthread_attr_setstacksize`.

或者它可能完全是别的东西！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-11T11:35:31.360

如果可以，请在调试 libc 下运行程序并在 mprotect() 上中断。查看调用堆栈，查看导致 mprotect() 调用的代码在做什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-10-10T19:27:22.200

将 ptmalloc2 用于 malloc 的 glibc 库在内部使用 mprotect() 对主线程以外的线程的堆进行微管理（对于主线程，使用 sbrk() 代替。） malloc() 首先使用 mmap() 分配大块内存如果堆区域似乎有争用，则线程，然后它更改不必要部分的保护位以使其可以使用 mprotect() 访问。稍后，当它需要增加堆时，它会再次使用 mprotect() 将保护更改为读/写。这些 mprotect() 调用用于多线程应用程序中的堆增长和收缩。

[http://www.blackhat.com/presentations/bh-usa-07/Ferguson/Whitepaper/bh-usa-07-ferguson-WP.pdf](http://www.blackhat.com/presentations/bh-usa-07/Ferguson/Whitepaper/bh-usa-07-ferguson-WP.pdf) 以更详细的方式解释了这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-08-14T17:50:18.077

“valgrind”套件有一个名为“callgrind”的工具，它会告诉你什么叫什么。如果您在“callgrind”下运行应用程序，则可以使用“kcachegrind”查看生成的配置文件数据（它可以分析由“cachegrind”或“callgrind”制作的配置文件）。然后只需双击左窗格中的“mprotect”，它就会显示调用它的代码和次数。

# database - 选择Mysql每一行的交换和

> ID：847448
> 
> 赞同：8
> 
> 时间：2009-05-11T09:58:57.070
> 
> 标签：database, mysql

我想通过mysql查询来实现

```
+------+---------+
| frq  | -any-   |
+------+---------+
|   10 |      10 |
|   15 |10+15=25 |
|   15 |25+15=40 |
+------+---------+ 
```

请帮助提供代码参考，谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-11T10:11:43.867

恕我直言，这应该由程序逻辑而不是 SQL 处理。如果你还想...：

```
 SELECT a.frq, sum(b.frq)
     FROM table a
     JOIN table b ON a.id >= b.id
 GROUP BY a.frq 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-12T05:12:20.193

MySQL论坛帮助了我！！！

```
mysql> set @my_var=0;
mysql> select frq, @my_var:=@my_var+frq as commutative_sum from `mytable` 
```

这适用于我的 mysql 例程。

# c++ - 校验和计算

> ID：847450
> 
> 赞同：1
> 
> 时间：2009-05-11T09:59:47.490
> 
> 标签：c++, reverse-engineering, checksum, crc

为了计算 CRC，我找到了一段代码，但我不理解这个概念。这是代码：

```
count =128 and ptr=some value; 
```

```

`calcrc(unsigned char *ptr, int count)
{
    unsigned short  crc;
    unsigned char i;

    crc = 0;

    while (--count >= 0)
    {
        crc = crc ^ (unsigned short)*ptr++ << 8;
        i = 8;
        do
        {
            if (crc & 0x8000)
                crc = crc << 1 ^ 0x1021;
            else
                crc = crc << 1;
        } while(--i);
    }
    return (crc);
}` 

请任何机构解释并告诉我逻辑。

            回答 #1

赞同：4

时间：2009-05-11T11:09:36.753

这看起来像[CRC](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)（具体来说，它看起来像 CRC-16-CCITT，被 802.15.4、X.25、V.41、CDMA、蓝牙、XMODEM、HDLC、PPP 和 IrDA 等使用）。您可能想阅读链接到 Wikipedia 页面上的 CRC 理论，以获得更多见解。或者您可以将其视为一个“黑匣子”，它只是解决了计算校验和的问题。

            回答 #2

赞同：3

时间：2009-05-11T11:38:58.373

您可能需要知道，在 C 中，^ 运算符是按位异或[运算符](http://www.cppreference.com/wiki/operator_precedence)，<< 运算符是左移运算符（相当于乘以 2 到运算符右侧数字的幂）。crc & 0x8000 表达式也在测试变量 crc 的最高有效位集。这将帮助您对运行时发生的情况进行低级解释，对于 CRC 是什么以及您可能需要它的原因的高级解释，请阅读[Wikipedia 页面](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)或[How Stuff Works](http://computer.howstuffworks.com/encryption7.htm)。

            回答 #3

赞同：3

时间：2009-05-11T11:53:24.540

一篇关于 CRC 的著名著作是Ross Williams 的[“A Painless Guide to CRC Error Detection Algorithms”](http://www.ross.net/crc/crcpaper.html)。它需要一些时间来吸收，但它非常彻底。

            回答 #4

赞同：1

时间：2009-11-12T13:47:09.360

看看我对我 
[如何猜测校验和算法的回答？](https://stackoverflow.com/questions/149617/how-could-i-guess-a-checksum-algorithm/158693#158693) 

        algorithm - 从 n 堆栈中“随机”查找 k 个元素的所有组合的算法

ID：847456

赞同：1

时间：2009-05-11T10:03:10.650

标签：algorithm, combinations

我有一个类似于这里描述的问题：

[从 n 返回 k 个元素的所有组合的算法](https://stackoverflow.com/questions/127704/algorithm-to-return-all-combinations-of-k-elements-from-n)

我正在寻找类似的东西，涵盖 n 中 k 的所有可能组合。但是，我需要一个子集来与之前绘制的有很大不同。例如，如果我要从一组 8 个元素中绘制 3 个元素的子集，则以下算法对我没有用处，因为每个子集都与之前绘制的子集非常相似：

11100000, 11010000, 10110000, 01110000, ...

我正在寻找一种以更“随机”的方式选择子集的算法，即。其中一个子集中的大多数元素不会在下一个子集中重用：

11100000, 00010011, 00101100, ...

有人知道这样的算法吗？

我希望我的问题有意义并且有人可以帮助我=）

亲切的问候，

基督教

            回答 #1

赞同：1

时间：2009-05-11T12:01:40.117

这不是真正随机的，但根据您的需要，它可能适合您。

1.  计算可能的组合数。让我们将它们命名为 N。
2.  计算一个与 N 互质的大数。我们将其命名为 P。
3.  对组合排序并给它们从 1 到 N 的数字。让我们将它们命名为 C [1]到 C [N]
4.  迭代输出组合。第一个是 V [P mod N]，第二个是 C [2*P mod N]，第三个是 C [3*P mod N]等等。本质上，Output [i] = C [i*P mod N.] Mod 的意思作为模运算符。

如果仔细挑选 P，你会得到看似随机的组合。接近 1 或 N 的值将产生差异很小的值。更好地选择接近 N/4 或 N/5 的值。您还可以为您需要的每次迭代随机生成 P。

            回答 #2

赞同：1

时间：2009-05-12T02:36:43.643

[作为我对这个答案](https://stackoverflow.com/questions/847456/algorithm-for-finding-all-combinations-of-k-elements-from-stack-of-n-randomly/847788#847788)的评论的后续，这里有一些代码，允许人们按照 colex 顺序从其“索引”确定子集的组成。无耻地从我自己的任务中偷走。

```
//////////////////////////////////////
// NChooseK
//
// computes    n!
//          --------
//          k!(n-k)!
//
// using Pascal's identity
// i.e. (n,k) = (n-1,k-1) + (n-1,k)
//
// easily optimizable by memoization
long long NChooseK(int n, int k)
{
    if(k >= 0 && k <= n && n >= 1)
    {
        if( k > n / 2)
            k = n - k;
        if(k == 0 || n == 0)
            return 1;
        else
            return NChooseK(n-1, k-1) + NChooseK(n-1, k);
    } 
    else
        return 0;
}

///////////////////////////////////////////////////////////////////////
// SubsetColexUnrank
//  The unranking works by finding each element
//  in turn, beginning with the biggest, leftmost one.
//  We just have to find, for each element, how many subsets there are
//  before the one beginning with the elements we have already found.
//
// It stores its results (indices of the elements present in the subset) into T, in ascending order.
void SubsetColexUnrank(long long r, int * T, int subsetSize)
{
    assert( subsetSize >= 1 );

    // For each element in the k-subset to be found
    for(int i = subsetSize; i >= 1; i--)
    {
        // T[i] cannot be less than i
        int x = i;

        // Find the smallest element such that, of all the k-subsets that contain it,
        // none has a rank that exceeds r.            
        while( NChooseK(x, i) <= r )
            x++;

        // update T with the newly found element
        T[i] = x;

        // if the subset we have to find is not the first one containing this element
        if(r > 0)
        {
            // finding the next element of our k-subset
            // is like finding the first one of the same subset
            // divided by {T[i]}
            r -= NChooseK(x - 1, i);
        }
    }
} 
```

随机输入，随机输出。

colex order 是这样的，它的 unranking 函数不需要从中选择要工作的元素的集合的大小；元素的数量假定为 NchooseK（集合的大小，子集的大小）。

            回答 #3

赞同：1

时间：2009-05-11T10:16:12.173

首先从 n 生成 k 的所有可能组合，然后在随机函数的帮助下重新排列它们怎么样？

如果您在向量中有结果，请循环遍历向量：对于每个元素，让它随元素在随机位置改变位置。

对于较大的 k 和 n，这当然会变得很慢。

            回答 #4

赞同：0

时间：2009-05-11T10:13:35.050

如何随机选择 k 个元素。即选择p在1和n之间随机的第p个，然后重新排序剩下的并选择q在1和n-1之间的第q个等等？

或者我误解了。你还想要所有的可能性吗？在这种情况下，您始终可以先生成它们，然后从列表中选择随机条目

            回答 #5

赞同：0

时间：2009-05-12T14:08:35.860

根据你想要做的事情，你可以做一些像打牌这样的事情。保留两个列表：`Source`是您的源（未使用）列表；第二个`Used`是“已选中”列表。当您从 中随机选择`k`项目时`Source`，您将它们移动到您的`Used`列表中。  

如果当您需要再次挑选时还有`k`剩余的物品，则将它们全部挑选并交换列表。`Source`如果少于`k`项目，则从中选择`j`项目`Used`并将它们添加到中`Source`以制作`k`项目`Source`，然后将它们全部选择并交换列表。

这有点像`k`从一副牌中挑选牌。你把它们扔到用过的堆里。一旦你到达终点或需要更多牌，你就将旧的牌重新洗牌。

这只是为了确保每个集合都与之前的子集绝对不同。此外，这并不能真正保证在旧子集开始重复之前选择所有可能的子集。  

好处是您无需担心预先计算所有子集，并且您的内存需求与您的数据成线性关系（2 个`n`大小的列表）。

            回答 #6

赞同：0

时间：2009-05-11T11:39:34.643

通过“随机查找”，我认为您的意思是字典上的距离。这是否适用于组合`i`vs.`i-1`或`i`vs. 所有以前的组合？

如果是这样，这里有一些建议：

*   由于大多数组合器产生有序输出，因此有两种选择：

    1.  设计或找到以某种方式产生无序输出的生成器

    2.  枚举并存储足够的/所有组合在一个 tie'd 数组文件/db

*   如果您决定选择 2 号门，那么您可以通过 1 和组合数之间的随机整数访问随机排序的组合

*   作为最后的检查，使用组合之间差异/距离的度量来比较当前和以前的组合，例如对于`Bit::Vector`Perl 中的无符号：

    $vec1->Lexicompare($vec2) >= $MIN_LEX_DIST

*   您可能会再看看 #1 门后面，因为即使是中等的值，`n`您`k`也可以获得一个大数组：

![C(n,k) = n!/(k!(nk)!)](https://upload.wikimedia.org/math/8/c/1/8c1e1ee9f73e84339513977f6492992e.png)

编辑：

刚刚看到您对 AnnK 的评论......也许 lexicompare 可能仍然可以帮助您跳过类似的组合？

        algorithm - 除了显而易见的之外，Perlin Noise 还有其他用途吗？

ID：847460

赞同：9

时间：2009-05-11T10:04:33.847

标签：algorithm, language-agnostic, noise

我最近一直在研究不同的算法，并且读过很多关于柏林噪声的文章。似乎人们使用它的唯一目的是生成纹理（云/木纹）或分布树木。

Perlin Noise 还能用来做什么？

            回答 #1

赞同：10

时间：2009-05-11T10:24:23.673

我知道关于 Perlin 噪声和你可以用它做的最好的论文是在Ebert 的[纹理和建模](https://rads.stackoverflow.com/amzn/click/com/0122287606)中，但是 Hugo Elias 不久前收集了相当好的[关于噪声和其他相关主题的页面，](https://web.archive.org/web/20160521081256/http://freespace.virgin.net/hugo.elias/)值得一看。

早在 2000 年代末 90 年代初，当我使用各种形式的 Perlin 噪声过程来处理地形生成时，我编写了一系列景观可视化程序时，我将它广泛用于创建逼真的景观。许多其他程序也做类似的事情——例如美妙的[Terragen](http://www.planetside.co.uk/)。

我还使用它在其他纹理之上应用逼真的噪点，例如为 Photoshop的[Photorealistic Textile 插件添加“粗糙度”。](http://www.geomantics.com/fabric.htm)

基本上，Perlin 噪声的魅力在于它不是随机的而是湍流的，所以在任何情况下，如果你有一个不确定的现象，它可以用来给出更“自然”的结果。毫无疑问，任何程序员都应该熟悉的一组或例程，因为它的使用适用于人们倾向于使用随机数生成器的许多情况。例如，使用 Perlin 函数来导出游戏中某些建模移动实体的速度变化（比如由于风等）比应用随机变化效果要好得多。

            回答 #2

赞同：6

时间：2009-06-03T05:45:20.193

不要忘记[沃利噪音](http://portal.acm.org/citation.cfm?id=237267)。它是对 Perlin 的有用补充。论文[本身](http://www.rhythmiccanvas.com/research/papers/worley.pdf)就在这里。

[http://www.cse.ohio-state.edu/~nouanese/782/lab4/](http://www.cse.ohio-state.edu/~nouanese/782/lab4/) 
[http://www.flickr.com/photos/12739382@N04/2652571038/](http://www.flickr.com/photos/12739382@N04/2652571038/)

            回答 #3

赞同：2

时间：2010-12-13T02:24:59.200

我已经看到它让虚拟角色动作看起来更逼真。

            回答 #4

赞同：1

时间：2009-05-11T10:20:22.153

它可以用于 4 个维度（即 x、y、z、时间）来创建出现和消失的体积云。添加一个随时间变化的基本运动矢量，你也有风。

            回答 #5

赞同：0

时间：2009-05-11T10:07:54.293

一种相关用途是分形生成的地形。

        asp.net-mvc - ASP.NET MVC 部署的项目不起作用：继承 System.web.mvc.viewpage 失败？

ID：847461

赞同：0

时间：2009-05-11T10:06:05.950

标签：asp.net-mvc, inheritance, viewpage

我有一个完全在本地运行的 MVC 项目。当我部署到生产服务器时，我收到一个编译错误：

```
BC30456：“标题”不是“ASP.views_home_index_aspx”的成员。

```

这让我觉得 System.Web.ViewPage(of T) 的继承以某种方式失败了......该项目部署在`http://server/ProjectName`. 该网站在`http://server/`部署时工作正常......

有人可以帮忙吗？谢谢

**更新**

大家是否注意到：“不是' **ASP** .views_home_index_aspx'的成员。？

这不应该是“不是' **ProjectName** .views_home_index_aspx'的成员。?

            回答 #1

赞同：1

时间：2009-05-11T10:42:21.117

您的项目 BIN 文件夹中是否有 MVC DLL。

它安装在您的计算机上的 C:\Program Files\Microsoft ASP.NET\ASP.NET MVC 1.0\Assemblies

编辑： ASP.views_home_index_aspx 类是否继承自 System.Web.Mvc.ViewPage ？

编辑 2：.net Web 应用程序和/或 MVC 站点中的每个页面都被编译成一个类。类名是从文件的位置生成的。所以 views_home_index_aspx 是编译后的类，代表您在 views/home/index.aspx 的 aspx 文件。它已经转换了“/”和“.”。强调。

所以你的错误是说，你的页面生成的编译类不包含你试图访问的 Title 成员。

这是您的页面通过堆栈跟踪引发的大错误吗？还是您在视觉工作室中遇到错误。你能发布一些代码吗？

            回答 #2

赞同：0

时间：2009-05-11T11:57:05.153

最好通过[这些](http://msmvps.com/blogs/omar/archive/2008/06/30/deploy-asp-net-mvc-on-iis-6-solve-404-compression-and-performance-problems.aspx) [帖子](http://www.asp.net/learn/mvc/tutorial-08-cs.aspx)，以防万一你错过了它。

        c - 在 tcp 套接字请求中的线程进程一段时间后连接被拒绝（c/linux）

ID：847462

赞同：0

时间：2009-05-11T10:06:43.733

标签：c, tcp, connection, send

我正在尝试创建每秒处理请求数的过程，在每个请求上创建新线程。然后每个线程打开套接字连接到地址（http 端口）发送 HEAD 请求，获得响应并关闭套接字。

当我每秒发出超过 3 个请求时，我遇到了问题，一段时间后，我在函数的 send() 部分出现错误，我不断收到连接被拒绝。如果我每秒输入更多请求，我会更早地收到错误。如果我每秒只发出 2 个请求，我根本不会收到错误消息。我怀疑我的一些资源用完了，但我找不到哪个。

这是代码的基本结构

```
//declarations

socketfd = socket(servinfo->ai_family,servinfo->ai_socktype,servinfo->ai_protocol);

arg = fcntl(socketfd, F_GETFL, NULL)) < 0);
arg |= O_NONBLOCK;
fcntl(socketfd, F_SETFL, arg)

if((conn = connect(socketfd, servinfo->ai_addr, servinfo->ai_addrlen)) < 0)
{
    if(errno == EINPROGRESS)
    {
        do
        {
            tv.tv_sec = CONNECT_TIMEOUT;
            tv.tv_usec = 0;
            FD_ZERO(&myset);
            FD_SET(socketfd, &myset);
            if((res = select(socketfd+1, NULL, &myset, NULL, &tv) > 0)) 
            {
                if( (arg = fcntl(socketfd, F_GETFL, NULL)) < 0) { 
                    perror("fcntl get 2");
                } 
                arg &= (~O_NONBLOCK); 
                if( fcntl(socketfd, F_SETFL, arg) < 0) {
                    perror("fcntl set 2");
                }
                char szBuf[4096];

                std::string htmlreq = "HEAD / HTTP/1.1\r\nHost:";
                htmlreq += info->hostName;
                htmlreq += "\r\n\r\n";

                if((conn = send(socketfd,htmlreq.c_str(),htmlreq.size(),0)) == -1 && errno != EINTR)
                {
                    perror("send");
                    close(socketfd);
                    return;
                }

                if((conn = recv(socketfd,szBuf,sizeof(szBuf)+1,0)) < 0 && errno != EINTR)
                {
                    perror("recv");
                    close(socketfd);
                    return ;
                }

                close(socketfd);

                // do stuff with data
                break;
            }
            else
            {
                //timeout
                break;
            }
        }while(1);
    }
    else
    {
        perror("connect");
        close(socketfd);
        return; 
    }
} 
```

我从一开始就删除了一些错误检查，一段时间后我得到的输出是“发送：连接被拒绝”。我很感激一些关于可能导致问题的部分的指针，平台是 ubuntu linux。如果需要，我也很乐意发布代码的其他部分。提前Tnx。

            回答 #1

赞同：1

时间：2009-05-11T10:37:20.550

您可能用完的资源在您要连接的服务器上。您要连接的计算机拒绝连接，因为它是：

1.  配置以限制每秒的连接数（基于某些标准）
2.  或者您要连接的服务器由于某种原因负载过大，无法再进行连接。

由于您总是在第三个连接上遇到错误，因此您连接的服务器可能会限制每个 IP 的连接数。

**编辑1**

您正在尝试进行非阻塞连接？现在我仔细看了一下，听起来您的问题出在 select 上，因为在 select 中返回的是套接字在实际连接之前是可读的，然后您正在调用 send。在非阻塞连接上要注意的一件事是套接字在出错时变得可读和可写。这意味着您需要在 select 返回后检查两者，否则您可能会错过实际错误，而是看到发送错误。

这是来自史蒂文斯 UNP：

```
FD_ZERO(&rset);
FD_SET(sockfd, &rset);
wset = rset;
tval.tv_sec = nsec;
tval.tv_usec = 0;

if ( (n = Select(sockfd+1, &rset, &wset, NULL,
                 nsec ? &tval : NULL)) == 0) {
    close(sockfd);      /* timeout */
    errno = ETIMEDOUT;
    return(-1);
}

if (FD_ISSET(sockfd, &rset) || FD_ISSET(sockfd, &wset)) {
    len = sizeof(error);
    if (getsockopt(sockfd, SOL_SOCKET, SO_ERROR, &error, &len) < 0)
        return(-1);         /* Solaris pending error */
} else
    err_quit("select error: sockfd not set");

done:
Fcntl(sockfd, F_SETFL, flags);  /* restore file status flags */

if (error) {
    close(sockfd);      /* just in case */
    errno = error;
    return(-1);
}
return(0); 
```

            回答 #2

赞同：0

时间：2009-05-11T14:57:18.110

您的代码中有很多问题。

首先，您将套接字设置为非阻塞。我不明白你为什么这样做。connect 函数有一个内部超时，因此不会阻塞。

您的代码的另一个问题是，如果连接立即成功，第一个 if 语句将跳过指令块！这可能会发生。

您显然想先发送 HEAD 消息。除非您期望远程服务器或网络非常慢并且想要超时，否则没有真正需要使这个成为非阻塞的。在这种情况下，带有非阻塞套接字的选择会很有意义。

发送 HEAD 消息后，您期望使用 recv 函数收集一些数据作为响应。请注意，此函数调用可能会在接收到发送的全部数据之前返回。您需要一种独立的方式来确定是否已收到所有发送的数据。服务器会关闭连接吗？这将由返回 0 的 recv 函数检测到。

因此，recv 应该被包装到一个循环中，您可以将接收到的数据附加到某个缓冲区或文件中，并在 recv 返回 0 时退出。如果您想在此可能确实阻塞的 recv 操作上添加超时，请使用非阻塞套接字。

但首先尝试不超时，以确保它可以全速运行而不会像您当前的版本那样阻塞。

我怀疑由于名称和 IP 地址解析，初始连接速度很慢，并且由于缓存了数据，因此在后续调用中变得更快。

        algorithm - 图表：在小于 O(|V|) 的时间内找到一个接收器 - 或显示它无法完成

ID：847465

赞同：10

时间：2009-05-11T10:07:04.497

标签：algorithm, graph, computer-science, graph-theory, sink-vertex

我有一个带有`n`节点的图作为*邻接矩阵*。

是否有可能在更短的`O(n)`时间内检测到水槽？

如果是，如何？如果不是，我们如何证明？

**Sink 顶点**是具有来自其他节点的入边且没有出边的顶点。

            回答 #1

赞同：10

时间：2012-04-16T07:40:23.427

Reading the link provided by SPWorley I was reminded of tournament tree algo for finding the minimum element in an array of numbers. The node at the top of the tree is a minimum element. Since the algorithm in the link also speaks about competition between two nodes (v,w) which is succeeded by w if v->w otherwise by v. We can use an algorithm similar to finding minimum element to find out a sink. However, a node is returned irrespective of the existence of a sink. Though, if a sink exists it is always returned. Hence, we finally have to check that the returned node is a sink.

```
//pseudo code
//M -> adjacency matrix
int a=0
for(int i=1;i<vertices;++i)
{
  if(M[a,i]) a=i;
}

//check that a is sink by reading out 2V entries from the matrix
return a; //if a is a sink, otherwise -1 
```

            回答 #2

赞同：7

时间：2009-05-11T11:24:16.337

[此页面](http://c2.com/cgi/wiki?GraphSinkDetection)回答您的确切问题。线性时间算法是

```
 def find-possible-sink(vertices):
     if there's only one vertex, return it
     good-vertices := empty-set
     pair vertices into at most n/2 pairs
     add any left-over vertex to good-vertices
     for each pair (v,w):
       if v -> w:
         add w to good-vertices
       else:
         add v to good-vertices
     return find-possible-sink(good-vertices)

   def find-sink(vertices):
     v := find-possible-sink(vertices)
     if v is actually a sink, return it
     return "there is no spoon^H^H^H^Hink" 
```

            回答 #3

赞同：3

时间：2009-05-15T23:48:46.617

Suppose to the contrary that there exists an algorithm that queries fewer than (n-2)/2 edges, and let the adversary answer these queries arbitrarily. By the Pigeonhole Principle, there exist (at least) two nodes v, w that are not an endpoint of any edge queried. If the algorithm outputs v, then the adversary makes it wrong by putting in every edge with sink w, and similarly if the algorithm outputs w.

            回答 #4

赞同：1

时间：2009-05-11T11:19:10.060

在一般有向图的情况下，不，我认为它不需要正式的证明。充其量，检测接收器需要您识别节点并检查它是否没有传出边缘，或者检查每个其他节点并查看它们都没有来自它的连接。在实践中，您将两者结合在一个消除算法中，但没有捷径可走。

顺便说一句，对于 sink 的定义存在分歧。通常不要求所有其他节点连接到接收器，因为您可以有多个接收器。例如，[该图](http://upload.wikimedia.org/wikipedia/commons/0/08/Directed_acyclic_graph.png)中的底行都是汇，顶行都是源。但是，它允许您将复杂度降低到 O(n)。请参阅[此处](http://c2.com/cgi/wiki?GraphSinkDetection)进行一些稍微乱码的讨论。

            回答 #5

赞同：1

时间：2011-01-21T01:26:57.040

I've been working on this problem and I believe this does it:

```
int graph::containsUniversalSink() {
/****************************************************************
 Returns: Universal Sink, or -1 if it doesn't exist
 Paramters: Expects an adjacency-matrix to exist called matrix
****************************************************************/

//a universal sink is a Vertex with in-degree |V|-1 and out-degree 0
//a vertex in a graph represented as an adjacency-matrix is a universal sink
//if and only if its row is all 0s and its column is all 1s except the [i,i] entry - path to itself (hence out-degree |V|-1)
//for i=0..|V|-1, j=0..|V|-1
//if m[i][j]==0 then j is not universal sink (unless i==j) - column is not all 1s
//if m[i][j]==1 then i is not universal sink - row is not all 0s
int i=0,j=1;
while (i<numVertices && j<numVertices) {
    if (j>i && matrix[i][j]==true) {
        //we found a 1, disqualifying vertex i, and we're not in the last row (j>i) so we move to that row to see if it's all 0s
        i=j;
        if (j<numVertices-1) {
            //if the row we're moving to is not the last row
            //we want to start checking from one element after the identity element
            //to avoid the possibility of an infinite loop
            j++;
        }
        continue;
    }
    if (j==numVertices-1 && matrix[i][j]==false) {
        //the last element in a row is a 0
        //thus this is the only possible universal sink
        //we have checked the row for 0s from i+1 (or i if we're in the last row) to numVertices-1 (inclusive)
        //we need to check from 0 to i (inclusive)
        for (j=0; j<i+1; j++) {
            if (matrix[i][j]==true || (matrix[j][i]==false && i!=j)) {
                //this row is not all 0s, or this column is not all 1s so return -1 (false)
                return -1;
            }
        }

        //row is all 0s, but we don't know that column is all 1s
        //because we have only checked the column from 0 to i (inclusive), so if i<numVertices-1
        //there could be a 0 in the column
        //so we need to check from i+1 to numVertices-1 (inclusive)
        for (j=i+1; j<numVertices; j++) {
            if (matrix[j][i]==false) {
                return -1;
            }
        }
        //if we get here we have a universal sink, return it
        return i;
    }
    j++;
}

//if we exit the loop there is no universal sink
return -1;

/********************
 Runtime Analysis
 The while loop will execute at most |V| times: j is incremented by 1 on every iteration
 If we reach the end of a row - this can only happen once - then the first for loop will
 execute i times and the second will execute numVertices-i times, for a combined numVertices iterations
 So we have 2|V| loop executions for a run-time bound of O(|V|)
********************/ 
```

}

            回答 #6

赞同：1

时间：2016-05-10T13:13:46.887

I have figured out a solution to this.

I'm assuming arrays are initialized with all 0's (otherwise N needs to be filled with 0) and that M is a adjacency matrix for the graph. I let n be the number of nodes (n = |V|).

```
j,i = 1;
N = new int[n]
while (j <= n && i <= n) {
  if (N[i] == 1) {
    i++
  } else if (N[j] == 1) {
    j++;
  } else if (M[i,j] == 1) {
    N[i] = 1
    i++
  } else if (i == j) {
    j++
  } else {
    N[j] = 1
    j++
  }
}
for (z = 1 to n) {
  if (N[z] == 0) {
    return z
  }
}
return NULL 
```

**Why this works (not formal proof):**
Any node with any edges going from it is not a universal sink. Thus, if M[i,j] is 1 for any j, i can not be a sink.

If M[i,j] is 0 for any i, then i does not have an edge to j, and j can not be a universal sink.

A 1 at N[i] designates that I know it isn't a sink, and any node that I know isn't a sink can be skipped on both i and j. I stop when either exeeds n.

This way I keep checking any nodes, that I still don't know isn't a sink, until 1 or 0 possible sinks remain.

Thus any node that is still 0 at the end of the loop must be the sink, and there will only be either 1 or 0 of those.

**Why it is O(n):**
This always increments either i or j. It stops when either exeeds n. Thus the worst case for the loop is 2n. The work in the loop is constant. The last loop is worst case n. Hence the algorithm is O(3n) = O(n).

This solution is based on the idea of the celebrity problem, which is a way of considering the same problem.

            回答 #7

赞同：1

时间：2017-10-25T07:04:19.547

There are so many algorithms that shows how to find the universal sink in O(n) but they are so complex and couldn't be understood easily. I have found it on internet in paper that shows how to find a universal sink in O(n) very smoothly.

```
1) first create a "SINK" set consisting of all vertices of the graph also 
   create an adjacency list of the graph.
2) now choose first 2 elements of the set.
3) if(A(x,y)==1){
       remove x;             // remove x from "SINK" set.
     }else{
       remove y; }           //remove y from "SINK" set.B 
```

By this algo you will end up with the sink node in your SINK set in "n-1" time. that is O(n) time. 

        apache-flex - flex air datagrid itemRenderer

ID：847466

赞同：0

时间：2009-05-11T10:07:28.537

标签：apache-flex, actionscript-3, air

我有一个带有自定义 itemRenderer 的数据网格。当我单击一个单元格时，我会得到它的引用。现在我想获得 sae 行中另一列的引用。例如，在我点击了第三行的第四列的数据网格中，我得到了它的引用，这没有问题。现在我想获得同一行的第一列的参考，即第三列。

有办法吗？

谢谢。

            回答 #1

赞同：0

时间：2009-05-12T20:30:22.517

您的自定义项目渲染器应该是数据驱动的。换句话说，你关心的一切都应该在渲染器的“数据”属性上。如果您需要操作另一个单元格，则应操作该行的数据，并且该单元格应自行更新。

这就是您遇到困难的原因 - 没有一个好的方法来获取对另一个单元格的引用。有不好的方法，但它们很糟糕:)

            回答 #2

赞同：0

时间：2009-05-13T09:56:37.927

不知道我是否理解完全正确，但这里......

在你的数据网格上放一个点击事件

```
<mx:DataGrid id="myDatagrid" click="getValues()" dataProvider="{someArrayColl}"/> 
```

假设第一列的名称为：脚本行之间的“id_column”：

```
private function getValues():void{
var first_column_value:String = myDatagrid.selectedItem.id_column;

//if you want the entire row in 1 Array
var the_selected_row:Array = myDatagrid.selectedItem as Array;
} 
```

尚未测试数组语句，但它应该可以工作。myDatagrid.selectedItem 默认是数组集合的对象。

//你应该在getValues函数中放置一个try and catch语句来捕获用户点击headeritem或datagrid-scrollbar时的异常

        backup - 从损坏的文件中恢复的策略？

ID：847469

赞同：0

时间：2009-05-11T10:07:51.063

标签：backup, backup-strategies

我和我的同事正在尝试实施一种机制来从嵌入式设备上的损坏文件中恢复。

这可能发生在某些情况下，例如用户在文件写入期间取下电池。

Orz，但现在我们只有一个想法：

*   创建重复的备份文件，如果危险文件 i/o 未正确完成，则将它们复制回来。

这有点愚蠢，好像备份文件也坏了，我们死定了。

您对此有什么建议或好文章吗？

提前致谢。

            回答 #1

赞同：1

时间：2009-05-11T10:20:11.717

阅读数据库日志和数据库日志文件。

数据库（如 Oracle）具有非常、非常强大的文件写入功能。不要实际使用 Oracle。使用他们的设计模式。设计模式是这样的。您可以在不实际使用实际产品的情况下借用这些想法。

1.  您的交易（即插入）将获取要更新的块。通常这是在内存缓存中，如果没有，则从磁盘读取到内存缓存。

2.  “前映像”（或回滚段）副本由您将要写入的块组成。

3.  您更改缓存副本、写入日志条目并排队进行数据库写入。

4.  您提交更改，这会使缓存更改对其他事务可见。

5.  在某个时候，数据库编写器将完成数据库文件更改。

日志是一个简单的循环队列文件——记录只是变化的历史，几乎没有结构。它可以在多个设备上复制。

DB 文件是更复杂的结构。他们有一个“交易编号”——对整体交易的简单顺序计数。这在块中编码（两种不同的方式）以及写入控制文件。  

一个好的 DBA 可以确保控制文件可以跨设备复制。

当 Oracle 启动时，它会检查控制文件以找出哪个可能是正确的。其他可能已损坏。Oracle 检查数据库文件以查看哪些与控制文件匹配。它检查日志以查看是否需要应用事务以使文件达到正确的事务编号。

当然，如果它在写入所有日志副本时崩溃，该事务将会丢失——对此无能为力。但是，如果它在写入日志条目后崩溃，它可能会完全恢复而没有问题。

如果您丢失了媒体并恢复了备份，则日志文件有可能应用于恢复的备份文件并使其保持最新状态。否则，必须重播旧的日志文件以使其保持最新状态。

            回答 #2

赞同：0

时间：2009-05-11T10:23:38.903

取决于哪个操作系统等，但在大多数情况下，您可以做的是复制到一个临时文件名，并作为最后一步将文件重命名为正确的名称。

这意味着潜在 S****p 的 (WOOPS) 机会窗口仅限于重命名发生的时间间隔。

如果操作系统支持良好的目录结构并且您可以智能地布置文件，您可以通过将新文件复制到临时目录并重命名目录来进一步细化这一点，因此 WOOPS 成为“重命名目标以保存”和“重命名临时”之间的间隔达到目标”。

如果操作系统支持软链接目录，这会变得更好，然后您可以“ln -s target temp”。在大多数操作系统上，替换软链接将是一个“原子”操作，它可以在没有任何混乱的中途状态的情况下工作或不工作。

所有这些选项都取决于是否有足够的存储空间来在文件系统上保留完整的新旧副本。

        c# - 值类型和字典检索

ID：847484

赞同：3

时间：2009-05-11T10:12:04.240

标签：c#, c#-3.0

下面的类为每个注册的新“dataKey”引发一个事件，并在取消注册“dataKey”并且该“dataKey”的计数为零时引发一个事件。

这个类的目标是线程安全的，我试图让它尽可能地高性能。

我的问题是；在 Deregister 方法中，当我更新值（_data[dataKey] = currentCountValue;）时，我可以以某种方式删除第二次查找吗？

我不能简单地更新 currentCountValue 变量，因为该值仅在本地堆栈上更新，而不是在字典中。

或者您能提出任何性能改进的建议吗？我不认为我可以删除锁并使用 CAS 操作（互锁方法）来更新计数，因为字典在这样使用时对于更新不是线程安全的……对吗？

/我正在使用 c# 3.0。

谢谢你的时间。

```
public sealed class DataCounter
{
    public event EventHandler NewKeyEvent;
    public event EventHandler ZeroCountEvent;
    private readonly Dictionary<string, int> _data = new Dictionary<string, int>();

    public void Register(string dataKey)
    {
        lock (_data)
        {
            if (_data.ContainsKey(dataKey))
            {
                _data[dataKey]++;
            }
            else
            {
                _data.Add(dataKey, 1);
                if (NewKeyEvent != null) NewKeyEvent(this, null);
            }
        }
    }

    public void Deregister(string dataKey)
    {
        lock (_data)
        {
            int currentCountValue;
            if (_data.TryGetValue(dataKey, out currentCountValue))
            {
                if (currentCountValue > 0)
                {
                    currentCountValue--;
                    _data[dataKey] = currentCountValue;
                }

                if (currentCountValue == 0)
                {
                    if (ZeroCountEvent != null) ZeroCountEvent(this, null);
                }
            }
        }
    }
} 
```

            回答 #1

赞同：2

时间：2009-05-11T10:17:45.340

作为一个想法 - 如果您不想通过索引器进行“设置”，您可以将计数器移到一个类上？

```
class CounterBox {
    public int Count {get;set;}
} 
```

然后有一个`Dictionary<string,CounterBox>`. 您现在可以`Count`在字典之外进行更新，并且仅`Remove(dataKey)`在`.Count`为零时调用。这将有一个额外的取消引用，但您不必通过索引器进行分配。

至于哪个更快：您需要配置文件。

就像是：

```
public sealed class DataCounter
{
    private class CounterBox
    {
        public int Count { get; set; }
    }
    public event EventHandler NewKeyEvent;
    public event EventHandler ZeroCountEvent;
    private readonly Dictionary<string, CounterBox> _data
        = new Dictionary<string, CounterBox>();

    public void Register(string dataKey)
    {
        lock (_data)
        {
            CounterBox box;
            if (_data.TryGetValue(dataKey, out box))
            {
                box.Count++;
            }
            else
            {
                _data.Add(dataKey, new CounterBox { Count = 1 });
                EventHandler handler = NewKeyEvent;
                if (handler != null) handler(this, EventArgs.Empty);
            }
        }
    }

    public void Deregister(string dataKey)
    {
        lock (_data)
        {
            CounterBox box;
            if (_data.TryGetValue(dataKey, out box))
            {
                if (box.Count > 0)
                {
                    box.Count--;
                }

                if (box.Count == 0)
                {
                    EventHandler handler = ZeroCountEvent;
                    if (handler != null) handler(this, EventArgs.Empty);
                    _data.Remove(dataKey);
                }
            }
        }
    }
} 
```

            回答 #2

赞同：0

时间：2009-05-11T10:26:57.587

您的事件处理不是线程安全的。

```
// Execute this ...
if (NewKeyEvent != null)

// ... other threads remove all event handlers here ...

// ... NullReferenceException here.
    NewKeyEvent(this, null); 
```

所以最好按如下方式进行。

```
EventHandler newKeyEvent = this.newKeyEvent;

 if (newKeyEvent != null)
 {
     newKeyEvent(this, null);
 } 
```

            回答 #3

赞同：0

时间：2009-05-11T10:56:48.893

你应该小心你引发事件的方式（有人已经提到你的注册不是线程安全的）。

您正在调用锁内的事件处理程序。这本身并不是线程不安全的，但您可能会完全停止数据结构。由于您显然无法控制正在调用的事件处理程序中发生的事情，因此如果事件处理程序本身长时间阻塞或冻结，您的字典将被锁定，直到处理程序返回。

在锁中，您永远不应该调用您无法控制的方法，并且永远不要调用任何执行时间不确定的方法（任何不以某种方式访问​​内存的方法）。如果你这样做了，即使你的代码是线程安全的，你也很容易让你的锁无限期地阻塞。

因此，在引用和取消引用中，您应该拥有调用列表的副本并将其称为 OUTSIDE 的锁，或者在外部调用委托本身（使用 Daniel 提到的模式）。

        sql-server - 在 SQL 2005 数据库之间传输对象和数据

ID：847489

赞同：0

时间：2009-05-11T10:13:38.590

标签：sql-server, data-migration

我想在两台服务器（Dev box 和 Live box）之间传输对象（表、存储过程、数据等），并且想知道这样做的最佳方法是什么？

在 SQL Server 2000 中，您可以在数据库之间传输所有对象和数据。现在只有“复制数据”和“编写查询”。第二个选项去哪儿了？

两个数据库都是 SQL 2005（带有 Service Pack 2）。传输时，主键和关系以及与 ASP.NET 身份验证有关的所有视图和其他相关数据应保持不变。集成服务未在实时服务器上设置，因此这不是一个选项。

我能想到的唯一方法是生成脚本，然后在另一台服务器上运行它们，但这比旧方法更耗时（我现在就是这样做的）。

            回答 #1

赞同：2

时间：2009-05-11T10:24:38.620

如果你愿意付费，我推荐[Red Gate](http://www.red-gate.com/)的 Sql Compare 和 Sql Data Compare 。

非常有用的产品。

            回答 #2

赞同：0

时间：2009-05-11T10:15:43.547

数据库发布向导

[http://sqlhost.codeplex.com/](http://sqlhost.codeplex.com/)

            回答 #3

赞同：0

时间：2009-05-11T10:22:17.767

很遗憾您没有安装集成服务，因为您可以使用“复制数据库向导”。我相信这会创建一个在目标服务器上运行的 SSIS 包。

如果您有 Visual Studio 2008，您可以尝试数据比较和架构比较工具。

            回答 #4

赞同：0

时间：2009-05-11T10:24:16.857

您最好的选择可能是模式和数据比较工具；[http://www.mssqltips.com/tip.asp?tip=1069](http://www.mssqltips.com/tip.asp?tip=1069)列出了各种工具

            回答 #5

赞同：0

时间：2009-05-11T13:34:25.300

您没有提及您的应用程序的范围或开发人员的数量等，因此很难提出任何建议。但是，如果您的开发由多个并发项目和多个开发人员组成，并且您正在从开发复制到生产，我会推荐如下内容：

*   实施 3 个“领域”：开发、质量保证、生产。
*   在 dev 中开发所有更改，在脚本中创建所有更改，使用 cvs 或 sourcesafe 之类的东西来跟踪所有对象的更改
*   当更改准备就绪并经过测试时，在 qa 中运行您的脚本，这将验证您的脚本并安装程序
*   准备好运行您的脚本并在生产环境中安装程序

注意： qa 几乎与生产相同，除了应用更改等待其最终生产安装。dev 包含任何正在进行的更改、额外的调试垃圾等。您可以定期将生产备份恢复到 qa 和 dev 以重新同步它们（只要确保所有开发人员都知道这一点并相应地计划），因为（取决于数量开发人员）他们（生产与质量保证与开发）将随着时间的推移开始产生更多差异。

        ruby-on-rails - Ruby on rails 路径助手

ID：847491

赞同：9

时间：2009-05-11T10:14:50.787

标签：ruby-on-rails, ruby

我知道这是一个小问题，但是为什么，如果你在 RoR 中使用脚手架，你可以在链接标签中使用像“new_ *model name here* _path”这样的行，但是不使用脚手架，我会得到一个 NameError？例如，我有一个使用基本 CRUD 操作的简单地址簿应用程序。我是一名 RoR 初学者，但想在没有脚手架的情况下构建应用程序，而这些事情似乎不起作用。我将我的 config/routes.rb 和 app/helpers/* 与脚手架应用程序中的进行了比较，它们没有什么不同。我错过了什么？

            回答 #1

赞同：16

时间：2009-05-11T14:07:58.977

检查路线和路径的一种方法是运行：

```
rake routes 
```

它输出你所有的路线和路径。

            回答 #2

赞同：9

时间：2009-05-11T10:30:08.767

脚手架在 routes.rb 文件中设置资源路由。资源路由是为您提供路径和 url 助手的东西。当您不使用脚手架时，不会添加路线，您必须手动完成。  

可以像这样添加资源路由：

```
map.resources :models 
```

其中 :models 是您的模型之一的复数名称。  

        java - Java - 存储 GMT 时间

ID：847496

赞同：0

时间：2009-05-11T10:17:47.163

标签：java, timezone, gmt

1.  我的服务器有 GMT+7，所以如果我移动到另一个有另一个 GMT 时区的服务器，那么存储在 db 中的所有日期都会不正确？
2.  是的 Q1 是正确的，我将在 GMT+0 时区存储日期并在每个成员选择的自定义 GMT 时区显示它怎么样
3.  我如何在 java 中使用 GMT+0 获取日期

            回答 #1

赞同：11

时间：2009-05-11T10:31:06.517

1）引用javadocs，Java毫秒时间戳是

当前时间与 UTC 1970 年 1 月 1 日午夜之间的差异，以毫秒为单位。

因此，由于时间戳为 UTC/GMT，如果将其存储在数据库中，则无论服务器的时区如何，该日期都是正确的。

2）根据时区格式化时间戳以进行显示将是正确的方法。

3) 创建一个新的 java.util.Date 实例并调用 getTime() 将为您获取 Java 中 GMT+0 的时间戳。

            回答 #2

赞同：2

时间：2009-09-29T14:04:46.957

补充一点，一旦有了 java.util.Date，就可以将其“转换”为任何时区（由用户选择）。这是 Groovy 中的代码示例（将在 Java 中使用轻微的 mods）：

```
// This is a test to prove that in Java, you can create ONE java.util.Date
// and easily re-display it in different TimeZones
fmtStr = "MM/dd/yyyy hh:mm aa zzz"
myDate = new java.util.Date()
sdf = new java.text.SimpleDateFormat(fmtStr)

// Default TimeZone
println "Date formatted with default TimeZone: " + sdf.format(myDate)

// GMT
sdf.setTimeZone(TimeZone.getTimeZone("GMT"))
println "Date formatted with GMT TimeZone: " + sdf.format(myDate)

// America/New_York
sdf.setTimeZone(TimeZone.getTimeZone("America/New_York"))
println "Date formatted with America/New_York TimeZone: " + sdf.format(myDate)

// PST
sdf.setTimeZone(TimeZone.getTimeZone("PST"))
println "Date formatted with PST TimeZone: " + sdf.format(myDate) 
```

            回答 #3

赞同：1

时间：2009-05-11T10:31:00.467

默认情况下，当您在 java 中获取当前时区的日期时，您可以使用[TimeZone](http://java.sun.com/j2se/1.5.0/docs/api/java/util/TimeZone.html "时区")类来获取系统时间运行所在的时区。大多数数据库支持可以将日期与时区一起存储，这可能是正确的方法要做到这一点，但确切的格式可能取决于您使用的数据库。

            回答 #4

赞同：0

时间：2010-07-28T17:52:06.030

我建议您仅将 Date 用作“持有者”，并建议您改用 Calendar 实例。要获取 GMT 时区的日历，只需使用以下命令：

```
Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("GMT+00")) 
```

当您使用时间和日期时，日历将提供很多好处。例如，为此添加一个小时很简单：

```
cal.add(Calendar.HOUR, 1); 
```

最后，当你需要一个日期时，你只需使用这个：

```
Date date = cal.getTime(); 
```

            回答 #5

赞同：0

时间：2016-09-07T08:59:23.257

对于 Q3，考虑使用 ZonedDateTime 类。

        c# - Asp.Net 网站与 Workflow Foundation 的集成

ID：847498

赞同：1

时间：2009-05-11T10:18:47.333

标签：c#, .net, asp.net, workflow-foundation, integration

我正在构建一个 Web 应用程序，其中涉及一些用户请求的处理。***用户提交对某事的请求***，在被批准或拒绝之前，它在组织中经过**几个步骤和渠道，并通过一些预定义的状态更改其状态。**在处理过程中，球可能会回滚到用户的球场以进行一些更改或更新一些信息。

客户希望用户工作流来控制处理。请帮助我决定如何将它与应用程序集成。每当有新请求到来时，我是否应该启动新的工作流实例，返回处理人员可以采取的下一个状态和可能的操作并关闭工作流？

或者其他一些方法会更好？

            回答 #1

赞同：2

时间：2009-07-06T02:29:02.650

您肯定希望为每个用户请求启动一个新的工作流实例。正是这个工作流程控制了用户请求的生命周期。

查看 K. Scott Allen在[Ode To Code上的](http://www.odetocode.com/default.aspx)[Orders Workflow](http://www.odetocode.com/articles/465.aspx) ，了解通过状态机工作流处理“订单”的网站的完整工作示例。工作流代码很好地与 Web 层分离。

            回答 #2

赞同：0

时间：2009-05-11T11:30:07.687

您也许可以看一下[Web Workflow](http://www.microsoft.com/downloads/details.aspx?FamilyId=A438A9B9-9F15-42EC-866F-2EA58E10DB36&displaylang=en)示例？

        c# - 从数据库重构域对象：身份问题

ID：847501

赞同：1

时间：2009-05-11T10:20:19.423

标签：c#, orm, domain-driven-design

我们正在使用 Linq to SQL 来读取我们的域对象并将其写入 SQL Server 数据库。

我们公开了一些服务（通过 WCF）来执行各种操作。从概念上讲，这些操作的实现包括三个步骤： 从数据库中重构必要的领域对象；对域对象执行操作；将（现在更改的）域对象持久化回数据库。

问题是有时，有两个或多个相同实体对象的实例，这可能导致将对象保存回数据库时不一致。一个虚构的例子：

```
public void Move(string sourceLocationid, destinationLocationId, itemId); 
```

这应该将具有给定 id 的项目从源位置移动到目标位置（实际服务更复杂，通常涉及许多位置、项目等）。现在，源位置 ID 和目标位置 ID 可能相同 - 一个简单的实现只会重新构建实体对象的两个实例，这会导致问题。

这个问题现在通过手动检查“解决”了，即我们重新构建第一个位置，检查第二个位置的 id 是否与它不同，如果是，则重新构建第二个，依此类推。这显然是困难且容易出错的。

无论如何，我实际上很惊讶在域驱动设计中似乎没有一个“标准”解决方案。特别是，存储库或工厂似乎没有解决这个问题（除非他们维护自己的缓存，然后需要更新等）。

我的想法是为每个操作创建一个 DomainContext 对象，该对象跟踪和缓存该特定方法中使用的域对象。不是重构和保存单个域对象，而是将这样的对象作为一个整体重构和保存（可能使用存储库），并且它可以充当该特定操作中使用的域对象的缓存。

反正这似乎是一个普遍的问题，那么这通常是如何处理的呢？你觉得上面的想法怎么样？

            回答 #1

赞同：1

时间：2009-07-25T18:16:02.653

许多 ORM 使用两个概念，如果我理解你，它们可以解决你的问题。第一个也是最相关的是上下文，它负责确保只有一个对象代表一个实体（在简单的情况下是数据库表行），无论它从数据库请求多少次或以何种方式请求。第二个是工作单元；这确保了对一组实体的数据库更新要么全部成功，要么全部失败。

这两个都是由我最熟悉的 ORM（LLBLGen Pro）实现的，但是我相信 NHibernate 和其他人也实现了这些概念。

            回答 #2

赞同：1

时间：2009-07-27T01:32:55.780

Linq-To-Sql 中的 DataContext 支持开箱即用的[Identity Map概念，并且应该缓存您检索的对象。](http://martinfowler.com/eaaCatalog/identityMap.html)*仅当您没有*为每个 GetById() 操作使用相同的 DataContext 时，对象才会有所不同。

Linq to Sql 对象在 DataContext 的生命周期之外并不是真正有效的。您可能会发现 Rick Strahl 的[Linq to SQL DataContext Lifetime Management](http://www.west-wind.com/weblog/posts/246222.aspx)是一本很好的背景读物。

此外，ORM 不负责域中的逻辑。它不会禁止您的示例`Move`操作。这由域来决定这意味着什么。它会忽略它吗？还是错误？这是您的领域逻辑，需要在您正在创建的服务边界上实现。

但是，Linq-To-Sql 确实知道对象何时更改，并且从我所看到的情况来看，如果您重新分配相同的值，它不会记录更改。`SubmitChanges()`例如，如果 Item.LocationID = 12，再次将 locationID 设置为 12 将不会在调用时触发更新。

根据给出的示例，如果源和目标相同，我很想提前返回而不加载对象。

```
public void Move(string sourceLocationId, destinationLocationId, itemId)
{
    if( sourceLocationId == destinationLocationId )
        return;

    using( DataContext ctx = new DataContext() )
    {
       Item item = ctx.Items.First( o => o.ItemID == itemId );
       Location destination = 
          ctx.Locations.First( o => o.LocationID == destinationLocationID );
       item.Location = destination;

       ctx.SubmitChanges();
    }
} 
```

另一个可能适用也可能不适用的小点是你应该让你的界面尽可能地粗壮。例如，如果您通常要一次执行 10 个移动操作，最好调用 1 个服务方法来一次执行所有 10 个操作，而不是一次执行 1 个操作。参考：[矮胖与健谈](http://www.neovolve.com/page/WCF-service-contract-design.aspx)

        java - 检查并插入缺少它的图像的 alt 属性

ID：847505

赞同：0

时间：2009-05-11T10:21:46.503

标签：java, html

我想编写一个 Java 工具来评估现有网站的 HTML 页面，如果任何图像没有 alt 属性，该工具将插入 alt="" 到该图像。一种方法是使用 HTML 解析器（如 HtmlCleaner）生成 DOM，然后在写回 HTML 之前将 alt 属性添加到 DOM 中的图像。  

但是，这种方法不会保持原始 HTML 完整，并且可能会导致一些不可预知的副作用，尤其是。当现有的 HTML 页面数量巨大且无法保证它们的格式正确时。  

有没有更安全的方法来实现这一点（即应该保持原始 HTML 完整并且只添加 alt 属性）？

            回答 #1

赞同：2

时间：2009-05-11T12:18:35.233

除了编写一些可怕的正则表达式或其他字符串操作代码之外，我不相信还有另一种方法可以做到这一点。

我确实质疑你*为什么*要这样做？我能想象的唯一原因是通过某种自动验证，但需要 alt 标签的原因是可用性问题。添加空的 alt 标签并没有任何帮助。你只是在隐藏问题。

相反，我建议编写一些 Javascript，在任何缺少 alt 标签的图像周围抛出一个红色边框，并让前端设计师为每个标记的图像添加*有意义的alt 标签。*

            回答 #2

赞同：2

时间：2009-05-11T13:32:06.803

在布局中添加空的 alt 标签是没有意义的。我对 Kris 表示赞同，因为它首先违背了使用 alt 标签的目的，我同意 David Dorward 的评论。

但是，如果这里有一些不可告人的动机，您可以事后在浏览器中使用 javascript（或者，最好是 jQuery）来执行此操作。客户端的浏览器当然无法更改原始 HTML，并且即使它的格式不完全正确，也足够聪明地解析它。

使用 jQuery，将此脚本放在页面的 head 部分：

```
<script language="javscript">
$(function() {
    $('img:not([alt])').attr('alt','');
});
</script> 
```

并确保包含[jQuery](http://jquery.com)库。

            回答 #3

赞同：0

时间：2009-05-11T13:54:17.317

我过去曾成功使用[Jericho HTML Parser 库](http://jerichohtml.sourceforge.net/docs/index.html)来解析 HTML。它应该适用于格式不佳的 HTML。不过，这会改变原始 HTML。

        java - 在java中将WSDL文件转换为XSD文件

ID：847514

赞同：-1

时间：2009-05-11T10:24:55.640

标签：java, web-services

您好我想以编程方式将给定的 WSDL 文件转换为 XML 模式。我需要用于验证我的 SOAP 响应的架构。任何人都可以帮助我吗？提前致谢。

            回答 #1

赞同：0

时间：2009-05-11T14:28:56.220

这只有在您详细说明您想对模式做什么时才有意义。

        php - PHP开发入门——编程栈推荐及网站资源

ID：847515

赞同：3

时间：2009-05-11T10:24:56.140

标签：php

我正在开始 PHP 开发，我正在寻找头脑中的想法和最佳实践，以及网站资源，例如 www.w3schools.com

是的，它必须是 PHP，因为这是正在使用的现有网站技术。

我正在使用 Windows，尽管我将在虚拟机上进行开发，可能是运行 Windows 2000 或 XP 或 Vista 的 Virtual PC 或 Virtual Box。

我是一位经验丰富的 VB6 和 SQL Server 开发人员，因此我可以使用 SQL Server 作为在我的主机笔记本电脑上运行的后端，或者我也可以使用 mySQL。我正在考虑使用 SQL Server 一开始会消除一层复杂性，并让我专注于网络服务器（Apache，也许？）和 PHP，而不必太担心数据库，因为所有这些都将完全对我来说很自然。

框架建议以及您使用它们的一两个示例将不胜感激。

源代码和版本控制框架、工具、实用程序和插件也将受到赞赏。

我将考虑自己在开始时用我的经验写一个这个问题的答案，几乎就像一个“操作方法”的分步指南，这样将来任何想做同样事情的人都可以得到走得更快。

在此先感谢各位大师。

            回答 #1

赞同：4

时间：2009-05-11T10:43:48.683

一开始就忽略框架。一旦你了解了 php 是什么/可以做什么，你就可以选择一个框架。但不要把它作为第一件事。

至于设置，我强烈建议您使用标准堆栈。这意味着 Apache 和 MySql。您可以在 Windows 上以开发模式运行它。对于大多数 PHP 应用程序来说，Windows 和 *nix 之间的差异很小。

对于版本控制，您可能应该使用 SVN，因为它是目前事实上的标准，并且相当容易使用。如果你不喜欢使用命令行，你可以下载[TortoiseSVN for Windows。](http://tortoisesvn.tigris.org/)

使用[PDO](http://www.php.net/pdo)进行数据库连接，而不是旧`mysql_*`功能。这是php5中的新标准。确保禁用[魔术引号](http://www.php.net/magic_quotes)，并使用准备好的语句/绑定参数将数据绑定到查询。

            回答 #2

赞同：3

时间：2009-05-11T10:29:31.827

我建议您做的第一件事是阅读[PHP 如何以正确的方式完成？](https://stackoverflow.com/questions/694246/how-is-php-done-the-right-way/694309#694309)

对于源代码控制，Subversion 是一个不错的起点。

您将需要 Firefox 和 Firebug。另请查看[您的 Web 开发人员工具箱中有什么？](https://stackoverflow.com/questions/188938/whats-in-your-web-developer-toolbox)和[免费工具，以加快 Web 开发](https://stackoverflow.com/questions/495339/free-tools-to-speed-up-web-development)。

关于框架，从[选择正确的 PHP 框架](https://stackoverflow.com/questions/838028/choosing-the-right-php-framework)开始。

您可能也应该考虑 Javascript 框架，在这种情况下，从[JavaScript 框架和 CSS 框架开始：JQuery、YUI，两者都不是，还是其他？](https://stackoverflow.com/questions/846538/javascript-frameworks-and-css-frameworks-jquery-yui-neither-or-something-else)以及[哪个 Javascript 框架（jQuery vs Dojo vs ...）？](https://stackoverflow.com/questions/394601/which-javascript-framework-jquery-vs-dojo-vs)

            回答 #3

赞同：0

时间：2009-05-11T10:44:26.357

我在 WISP（Windows、IIS、SQLServer、PHP）堆栈上广泛使用了 PHP。这有点不寻常，因为绝大多数 PHP 使用都在 LAMP 上，但我个人发现它坚如磐石。    

如果 MVC 框架对您来说不是绝对必要的，我强烈推荐[Tiny But Strong](http://www.tinybutstrong.com)模板系统。我使用过 Smarty 和其他各种 PHP 模板系统，但 TBS 对我来说很容易，因为它非常紧凑、干净，而且最重要的是可以与 Dreamweaver 等所见即所得页面设计程序一起使用。  

            回答 #4

赞同：0

时间：2009-05-11T11:02:11.507

一个巨大的优点是 PHP 本身有很好的文档记录。一旦你开始使用其他人的代码，事情就会开始变得棘手。

        php - 如何从维基百科获取信息到我的应用程序中

ID：847516

赞同：2

时间：2009-05-11T10:24:58.883

标签：php, zend-framework, wikipedia

大家好，我希望从维基百科获取我在我的数据库中的条目的信息，例如一些体育场馆和国家信息。我正在使用 Zend 框架，以及如何处理返回多个不明确条目等的查询。我希望在这里能得到所有帮助...

            回答 #1

赞同：11

时间：2009-05-11T10:37:59.830

Wikipedia 基于 MediaWiki，提供应用程序可编程接口 (API)。

您可以在 Wikipedia 上查看 MediaWiki API - [http://en.wikipedia.org/w/api.php](http://en.wikipedia.org/w/api.php)

MediaWiki API 文档 - [http://www.mediawiki.org/wiki/API](http://www.mediawiki.org/wiki/API)

            回答 #2

赞同：2

时间：2009-05-11T10:33:22.880

对您要导入的文章执行一个简单的[HTTP 请求。](http://en.wikipedia.org/wiki/Wikipedia_database)[这是一个很好的库](http://www.onderstekop.nl/articles/114/)，它可能有助于解析 HTML，尽管也有许多解决方案，[包括使用 php 提供的标准 DOM 模型](http://us2.php.net/dom)。

```
<?php
require_once "HTTP/Request.php";

$req =& new HTTP_Request("http://www.yahoo.com/");
if (!PEAR::isError($req->sendRequest())) {
    echo $req->getResponseBody();
}
?> 
```

请注意，如果您的流量水平被认为太高，您将被锁定在该网站之外。（如果您想要大量文章，[请下载数据库](http://en.wikipedia.org/wiki/Wikipedia_database)）

            回答 #3

赞同：2

时间：2013-12-17T14:37:48.007

[这个](http://codeinclude.blogspot.com/2010/12/php-bot-to-get-wikipedia-definitions.html)博客有一个非常好的代码，可以从 wiki 获取定义

```
<?php
//FUNCTION THAT :PARAMETER - KEYWORD , AND RETURNS WIKI DEFINITION (IN ARRAY FORMAT)
function wikidefinition($s) {
//ENGLISH WIKI
    $url = "http://en.wikipedia.org/w/api.php?action=opensearch&search=".urlencode($s)."&format=xml&limit=1";
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_HTTPGET, TRUE);
    curl_setopt($ch, CURLOPT_POST, FALSE);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_NOBODY, FALSE);
    curl_setopt($ch, CURLOPT_VERBOSE, FALSE);
    curl_setopt($ch, CURLOPT_REFERER, "");
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
    curl_setopt($ch, CURLOPT_MAXREDIRS, 4);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 6.1; he; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8");

    $page = curl_exec($ch);
    $xml = simplexml_load_string($page);
    if((string)$xml->Section->Item->Description) {
        return array((string)$xml->Section->Item->Text, 
                     (string)$xml->Section->Item->Description, 
                     (string)$xml->Section->Item->Url);
    } else {
        return "";
    }
}
//END OF FUNCTION WIKIDEFINITIONS

//USE OF FUNCTION
$data = wikidefinition('Bangladesh') ;
//var_dump( wikidefinition('bangladesh') ) ; //displays the array content
echo "Word:"       . $data[0] . "<br/>";
echo "Definition:" . $data[1]  . "<br/>";
echo "Link:"       . $data[2] . "<br/>";

?> 
```

        master-pages - 动态控制值

ID：847519

赞同：0

时间：2009-05-11T10:26:21.800

标签：master-pages

如何获取添加到动态表中的动态文本框的文本，该动态表添加到表单上的面板中，该表单具有母版页？

            回答 #1

赞同：0

时间：2009-05-11T10:33:56.060

大概你在谈论 ASP.NET？您是否尝试使用 Javascript 获取代码背后或客户端的值？

如果它的服务器端，并且你`<asp:Panel>`在页面上声明，你可以做......

```
foreach(Control c in myPanel.Controls)
{
    if(c.GetType() == typeof(TextBox))
    {
        TextBox tb = c as TextBox;
        if(tb.ID == "The ID Your Looking For")
        {
           //Do stuff with tb.Text;
        }
    }
} 
```

        java - Java 日期迭代器工厂，带有指定如何计算间隔的规则

ID：847520

赞同：6

时间：2009-05-11T10:26:47.803

标签：java, date, iterator, rules

我正在寻找一个 Java 类，我可以在其中指定一组日期规则，例如“每个第三个星期日”和“每个第二个月第一次出现星期一”。我希望能够从中获得类似无限迭代器的东西（.next() 将返回与规则集匹配的下一个日期）。

我想我可以自己构建它——但是日历很麻烦，而且感觉应该已经存在类似的东西了。我讨厌成为一个重新发明一个更糟糕的轮子的人。

有人知道这样的事情吗？我一直在看 JODA，它似乎为它奠定了基础，但似乎没有提供我想要的全部功能。

            回答 #1

赞同：7

时间：2009-05-11T10:49:52.230

我认为没有任何现成的用于 joda-time 或 Java 日历 API 的迭代器，但是使用 joda 非常容易，你应该使用它。例如，在暂停几个月后重新熟悉了 joda 之后，我在大约 10 分钟内完成了这个：

```
public class InstantIterator implements Iterator<Instant>,
                                        Iterable<Instant> {

    private Instant current;
    private final Instant original;
    private Duration skip;
    private List<Instant> skipThese;

    public InstantIterator(Instant startFrom, Duration skip) {
        this.current = original = startFrom;
        this.skip = skip;
        skipThese = new Vector<Instant>();
    }

    public boolean hasNext() {
        return true;
    }

    public Instant next() {
        Instant currentNext = current.toInstant();
        current = current.plus(skip);
        while (skipThese.contains(currentNext)) {
            currentNext = current.toInstant();
            current = current.plus(skip);
        }
        return currentNext;
    }

    public void remove() {
        skipThese.add(current.toInstant());
    }

    public Iterator<Instant> iterator() {
        return this;
    }

    public void rewind() {
        current = original.toInstant();
    }

    public void resetRemoved() {
        skipThese.clear();
    }

    public void resetIterator() {
        rewind();
        resetRemoved();
    }
} 
```

乔达时间很棒:-)

            回答 #2

赞同：0

时间：2009-05-11T19:27:00.150

我的公司有[一些非常像你想要](http://precisionsoftware.blogspot.com/2009/03/natural-language-net-date-parser.html)的东西，但它是针对 .NET 的，所以它可能对你没有任何好处。

            回答 #3

赞同：0

时间：2009-05-11T20:10:15.710

你可以看看专为作业调度而设计的[Quartz 。](http://www.quartz-scheduler.org/)

            回答 #4

赞同：0

时间：2018-01-26T06:03:16.647

        javascript - 如何动态调整 DIV 元素的宽度以适应其文本内容？

ID：847527

赞同：9

时间：2009-05-11T10:28:31.437

标签：javascript, html, css

假设我有这个 HTML 代码片段：

```
<div id="container">
<div id="textContent">Text Content Te</div>
<div id="anotherText">Another Text Content</div>
</div> 
```

[原始 HTML 输出 http://img26.imageshack.us/img26/1571/beforeeffect.gif](http://img26.imageshack.us/img26/1571/beforeeffect.gif)

我想知道如何动态调整`div`'s 的`textContent`宽度，使其很好地适合其文本内容（文本既不会*换行*，也不会*滚动*或*截断*）。

[所需的 HTML 输出 http://img26.imageshack.us/img26/5851/desiredeffect.gif](http://img26.imageshack.us/img26/5851/desiredeffect.gif)

我对使用 CSS 和/或 JavaScript 的任何解决方案持开放态度。

            回答 #1

赞同：10

时间：2009-05-11T10:51:56.797

我想知道如何动态调整 div 的宽度以适应文本内容（不换行）？

假设内容适合而不会溢出，您可以使用没有设置宽度的浮点数（CSS 2.1 或更高版本中不需要宽度）。如果没有更多细节，我无法建议将其放置在何处或设置哪些其他属性以获得所需的效果（例如，浮动围绕以下内容浮动，因此将其放在段落的开头）。

如果您不关心在 Internet Explorer 等旧浏览器上看起来完美的效果，您可以使用`display: table`or `display: table-cell`，但需要注意的是表格不会溢出：它们会拉伸。如果您想避免 div 溢出，但允许它超出视口 - 例如，水平滚动的胶片条，则可能需要这种拉伸。在这种情况下，altCognito 的建议`white-space: nowrap`将非常有用。

            回答 #2

赞同：6

时间：2009-05-11T10:42:55.877

```
<style>
div {
  white-space: nowrap;
}
</style> 
```

这可以解决问题（尽管您可能应该更具体地了解要更改的 div。这意味着您使用它的 div 不会有任何换行符，除非您自己指定它们。但我猜您将其用于标签，因此您应该准备就绪。

[看一个例子。](http://jsbin.com/axeku)

        c++ - 使用“分支”开发模型避免不必要的重新编译

ID：847535

赞同：4

时间：2009-05-11T10:32:12.930

标签：c++, mercurial

我正在使用 Mercurial 开发一个相当大的 C++ 项目，从头开始构建大约需要 30 分钟（而增量构建非常快）。

我通常尝试在新分支中实现每个新功能（使用“hg clone”），我可能在白天开发了几个新功能，等待新功能分支构建很快就会变得非常无聊。

是否有任何方法可以以某种方式重用来自其他已构建分支的目标文件？

PS 在 git 中有在同一个存储库中命名的分支，这使得构建系统可以重用现有的目标文件，但是我更喜欢更简单的 Mercurial 独立分支模型......

            回答 #1

赞同：4

时间：2009-05-11T15:52:20.217

我建议使用[ccache](http://ccache.samba.org/ "缓存")来加速（大部分）相同代码树的编译。它的工作方式如下：

*   您可以使用`CCACHE_DIR`环境变量定义一个用作缓存的位置（以及最大缓存大小）
*   您的编译器应设置为`ccache ${CC}`或`ccache ${CXX}`

ccache 获取`${CC} -E`和编译标志的输出，并将其用作其哈希的基础。只要编译器标志、源文件和头文件都不变，目标文件将从缓存中取出，节省宝贵的编译时间。

请注意，此方法加速了最终生成相同哈希的任何源文件的编译。如果您跨项目共享源文件，ccache 也会处理它们。

如果您已经使用`distcc`并希望将其与 ccache 一起使用，请将`CCACHE_PREFIX`环境变量设置为`distcc`.

使用 ccache 将我们的源代码树编译速度提高了十倍左右。

            回答 #2

赞同：3

时间：2009-05-11T10:41:46.843

加快构建速度的一种简单方法是使用磁盘上的本地“构建目录”。这样你就可以签出到这个目录并开始构建。第一次将花费全部时间，但之后它将（希望）仅重建源代码更改的文件。

            回答 #3

赞同：2

时间：2009-05-21T19:06:47.860

糟糕，我错过了你的 PS，你不喜欢在同一个 repo 中有多个命名的分支，并且你更喜欢单独的克隆......对此感到抱歉。

 ~~我也有一些大型的 C++ 项目，并且按功能克隆的工作流程对我来说不是很好。首先，我必须关闭我的 Vim 会话，然后在创建克隆后重新打开（许多相同的）文件。其次，就像你说的，很多代码必须不必要地重新编译。第三，我必须跟踪我推到哪里和从哪里拉出来——当你开始一个新功能然后又被转移到一个新功能上时，我会感到困惑。在不知不觉中，您有许多克隆并且不确定哪些需要被推回您的主库。~~您绝对不想使用命名分支（我相信您知道）来处理这个问题，因为它们是永久性的。

您需要的是书签：[https ://www.mercurial-scm.org/wiki/BookmarksExtension](https://www.mercurial-scm.org/wiki/BookmarksExtension)

书签允许您通过促进 repo 中的 head 命名来为每个功能创建轻量级（以及其他匿名）分支。这些头通常是未命名的，您必须查看“hg log”的输出或使用一些图形工具来查找功能分支尖端的修订号。使用书签，您可以将它们命名为描述性名称，例如“my-cool-feature”或“bugfix-392”。

~~如果您喜欢书签的想法，我还推荐我自己的名为“tasks”的扩展：http: [//bitbucket.org/alu/hgtasks](http://bitbucket.org/alu/hgtasks)。这个扩展像书签一样工作，但增加了一些功能。它允许您创建功能分支（现在称为任务）并禁止推送未完成的任务。当您同时拥有几个功能分支时，这很方便。您可能还没有准备好推送您的“my-cool-feature”任务，但“bugfix-392”已经准备就绪。因为任务跟踪一组变更集（而不仅仅是一个“提示”变更集），所以您可以对任务执行一些您无法使用书签执行的操作。在此处查看示例工作流程：http: [//x.zpuppet.org/2009/03/09/mercurial-tasks-extension/](http://x.zpuppet.org/2009/03/09/mercurial-tasks-extension/)。~~ 

            回答 #4

赞同：2

时间：2009-07-17T06:57:45.860

我的[Localbranch 扩展](https://www.mercurial-scm.org/wiki/LocalbranchExtension)部分是围绕这个用例设计的。它使用单个工作目录，但我认为它比 git 更简单。它本质上是一种在一个工作目录下维护多个存储库克隆的机制，在给定时间只有一个处于活动状态。

            回答 #5

赞同：1

时间：2009-05-11T11:28:20.170

Mercurial 也有本地命名的分支，参见 hg branch 命令。

如果您坚持使用 hg clone 进行分支开发，我想您可以尝试在您的 repo 中创建一个文件夹链接（windows 下的快捷方式）到一个共享的 obj 文件夹。这将适用于 hg clone，但我不确定您的构建工具会选择它。

否则，您可能会将所有存储库保存在一个文件夹中 - 只需将您的 obj 文件夹放在那里（它不应该在源代码控制之下，imo）。使用相对路径来引用它。

            回答 #6

赞同：0

时间：2009-05-11T14:01:47.287

一个警告：许多 .o 符号表（或等效的）包含源文件的完整路径名。如果该其他文件发生更改（或者如果路径在新目录中不可见），您可能会在调试时遇到奇怪的情况。

        c# - 任何序列计算所需的最小序列“原语”集是多少？

ID：847536

赞同：2

时间：2009-05-11T10:32:49.963

标签：c#, functional-programming, scheme

我正在用解释器编写类似方案。似乎很自然，类 Scheme 解释器应该与任何实现 IEnumerable 的对象一起工作。

解释器不允许突变 - 没有暴露有副作用的函数。

因为 IEnumerable 不可克隆，（请参见[此处](https://stackoverflow.com/questions/807991/why-cant-ienumerators-be-cloned)），我无法使用 car 和 cdr 有效地实现对列表的迭代。

为了让任何“高阶”的东西变得高效，我不得不实现一些原语作为解释器的 C# 内置函数。

到目前为止，我已经将以下“原语”实现为 C# 内置函数：

1.  筛选
2.  地图（完整地图，不仅仅是地图车）
3.  文件夹

但我怀疑，例如，我可能会使用 map 和 foldr 的组合来实现“过滤器”。

我需要作为“内置”公开的最小原语集是什么，这样我就可以在 IEnumerable 实例上实现任何其他功能而无需额外的运行时间或空间成本，并且不必引入突变？

            回答 #1

赞同：2

时间：2009-05-11T10:37:15.727

System.Linq 命名空间中的所有函数都已为您准备好了。

1.  过滤器=在哪里
2.  地图=选择
3.  fold/reduce = 聚合（foldr = 反向然后聚合）

你会发现更多。例如

SelectMany = map + map + flatten GroupBy = partition

remq 和朋友在过滤器方面可以做到。

**更新**

与普通的 Scheme 定义不同，这些显然只需要 1 个列表参数。

            回答 #2

赞同：2

时间：2009-05-11T10:56:50.407

您不必严格`map`地成为原始人，因为您可以根据`foldr`.

示例（在 Haskell 中）：

```
map f = foldr (\a b->f a:b) [] 
```

这确实`mapcar`不是`map`，但是`map`由于不可用，因此很难在 Haskell 中表达full `apply`。

更完整的例子（在方案中）：

```
(define (mapcar f l)
  (foldr (lambda (x t) (cons (f x) t)) ‛() l))

(define (heads ls) (mapcar car ls))

(define (tails ls) (mapcar cdr ls))

(define (any-null? ls) (foldr or? ﹟f (mapcar null? ls)))

(define (map f . ls)
  (if (any-null? ls)
      ‛()
      (cons (apply f (heads ls)) (apply map f (tails ls))))) 
```

如果您没有`car`并且`cdr`还有其他方法可以定义它们，例如，如果您的语言中有闭包和变量：

```
(define (car a) (foldr (lambda (x y) x) ﹟f a))

(define (cdr a)
  (let ((prev ‛())
        (tmp #f))
    (foldr (lambda (h t) (set! tmp (cons h t)) (set! prev t) tmp)
           ‛()
           a)
    prev)) 
```

            回答 #3

赞同：0

时间：2009-05-13T07:26:27.283

我不太确定您的序列计算的目标是什么功能，但是 concat 操作（即展平嵌套序列）也可能非常有用。看看 Haskell 的列表推导是如何脱糖的，看看为什么。

        c# - 嵌套通用集合：如何实现从项目到容器的引用？

ID：847538

赞同：3

时间：2009-05-11T10:33:52.613

标签：c#, generics, collections, nested

在使用嵌套泛型集合实现设计时，我偶然发现了显然是由 C# 的不变泛型引起的那些限制：

```
无法从 'Collection<subtype of T> 转换为 'Collection<T>'
```

这意味着，显然由于泛型的不变性，以下内容将不起作用：

```
class Outer<TInner, TInnerItem> where TInner : Inner<TInnerItem>
{
    public void Add(TInner item)
    {
        item.Outer = this; // ERROR:
            // Cannot implicitly convert from Outer<TInner, TInnerItem> 
            // to Outer<Inner<TInnerItem>, TInnerItem>
    }
}

class Inner<TInnerItem> : ICollection<TInnerItem>
{
    Outer<Inner<TInnerItem>, TInnerItem> _outer;

    public Outer<Inner<TInnerItem>, TInnerItem> Outer
    {
        set { _outer = value; }
    }
} 
```

（在实际代码中，两者都`Inner<>`实现`Outer<>`。`ICollection<>`）

我需要`Inner<>`对象引用其容器集合才能访问其某些数据。

您将如何实现这些嵌套集合，最好使用上述通用方法？您将如何设置对`Inner<>`类中容器集合的引用？

干杯!

            回答 #1

赞同：2

时间：2009-05-11T13:51:05.250

引入一个不依赖于 TInner 的（可能是抽象的）基类可能会对您有所帮助：

```
abstract class OuterBase<TInnerItem>
{
}

class Outer<TInner, TInnerItem> : OuterBase<TInnerItem> where TInner : Inner<TInnerItem>
{
    public void Add(TInner item)
    {
        item.Outer = this; // Compiles
    }
}

class Inner<TInnerItem> : ICollection<TInnerItem>
{
    OuterBase<TInnerItem> _outer;

    public OuterBase<TInnerItem> Outer
    {
        set { _outer = value; }
    }
} 
```

或者等待 C# 4.0，它引入了 co/contra-variant 泛型接口。

            回答 #2

赞同：0

时间：2009-05-11T15:22:18.440

该语言不能让您从 Collection<subtype of T> 转换为 Collection<T>

让我解释一下为什么。

假设您有一个 Collection<subT> 并将其转换为 Collection<T>。没关系，因为 subT 继承自 T。

当您从 中检索对象时`collection_of_T`，您可以确信它没问题。

稍后，将`T`对象添加到`collection_of_T`. 现在你有`collection_of_subT`一个不是`subT`. 哎呀。

为了达到你想要的，你必须一起创建一个新的集合。

```
Collection<T> collection_of_T = new Collection<T>(collection_of_subT); 
```

这可能对你不利。你真的需要类`TInner`中的通用参数`Outer`吗？是否可以`Inner<TInnerItem>`在其余代码中替换为？

        javascript - DOM元素创建上的JQuery fadeIn()？

ID：847541

赞同：23

时间：2009-05-11T10:34:26.623

标签：javascript, jquery, dom, element

如何在 JQuery 中创建一个 DOM 元素并将其淡入显示，而不是立即显示？

我试试这个：

```
var myDiv = "<div>Hello!</div>"
$("somePlace").after(myDiv).fadeIn('fast'); 
```

但这不起作用，因为 .after(myDiv) 使它立即弹出。有什么解决办法吗？谢谢！

            回答 #1

赞同：36

时间：2009-05-11T10:39:02.667

```
$("<div>Hello</div>").hide().appendTo("somePlace").fadeIn("fast"); 
```

            回答 #2

赞同：1

时间：2009-05-11T10:37:41.080

添加一个在开始时隐藏的类。

```
<style>
  .hidden {
    display: none;
  }
</style>

<div class="hidden">
  Won't be seen.
</div> 
```

        ruby-on-rails - Rails 嵌套资源

ID：847542

赞同：1

时间：2009-05-11T10:34:29.710

标签：ruby-on-rails, nested, associations, activeresource

我正在尝试使用 ActiveResource 了解 Rails 中的嵌套关​​联。我的例子如下：我有一个有很多跑道的机场。

我在机场控制器中的表演动作包含：@airport = Airport.find(params[:id])

当我调用[http://localhost/airports/2.xml](http://localhost/airports/2.xml)时，我得到了那段 XML：

```
<airport>
  <code>DUS</code>
  <created-at type="datetime">2009-02-12T09:39:22Z</created-at>
  <id type="integer">2</id>
  <name>Duesseldorf</name>
  <updated-at type="datetime">2009-02-12T09:39:22Z</updated-at>
</airport> 
```

现在，我将操作更改为

```
@airport = Airport.find(params[:id], :include => :runways) 
```

我怎样才能实现上面加载上面的 URL 给了我类似的东西：

```
<airport>
  <code>FRA</code>
  <created-at type="datetime">2009-02-12T09:39:22Z</created-at>
  <id type="integer">2</id>
  <name>Frankfurt</name>
  <updated-at type="datetime">2009-02-12T09:39:22Z</updated-at>

  <runways>
    <runway>
      <id>1</id>
      <name>bumpy runway</name>
    </runway>
  </runways>

</airport> 
```

最重要的是：如果我有一个客户

```
class Airport < ActiveResource::Base
  ..
end 
```

和

```
class Runway < ActiveResource::Base
  ..
end 
```

如何让它自动加载关联，例如：

```
a = Airport.find(1)
puts a.runways.length
=> 1 
```

并且（最后但并非最不重要）：有没有一种方法可以存储来自客户端的数据，例如：

```
a = Airport.find(1)
a.runways << Runway.find(1)
a.save 
```

也许我真的太盲目了，但我被困住了......任何想法都受到热烈欢迎。

谢谢

马特

            回答 #1

赞同：2

时间：2009-05-11T11:50:38.153

最后自己解决了。不知道将包含放入渲染状态：

```
def show
  @airport = Airport.find(params[:id], :include => :runways)
  respond_to do |format|
    format.html # show.html.erb
    format.xml  { render :xml => @airport.to_xml(:include => :runways) }
  end
end 
```

            回答 #2

赞同：1

时间：2009-05-12T15:24:28.790

finder的`:include`选项指定它应该急切地从数据库中获取相关项目。的`:include`选项`to_xml`指定它应该包含在 XML 呈现中。

如果规范的 XML 表示包含相关对象，您可以重写该`to_xml`方法以使您的生活更简单：

```
class Airport
  def to_xml(options={})
    super(options.merge(:include => :runways))
  end
end 
```

然后因为如果你不`render`打电话，你的控制器代码可以简单地是`to_xml`

```
format.xml { render :xml => @airport } 
```

        asp.net-ajax - asp.net 不呈现 Sys.WebForms.PageRequestManager._initialize 代码

ID：847543

赞同：6

时间：2009-05-11T10:34:42.457

标签：asp.net-ajax

我在网站上使用 ASP.NET 2.0 Ajax Extensions。与往常一样，本地一切都很好，但远程网站不使用 ajax 调用。我的本地服务器安装了 ASP.NET Ajax 扩展，但远程服务器没有。我知道我应该能够在不安装 Ajax 扩展的情况下使用它们。所以反过来，我在网站的引用中添加了扩展的 .dll，但仍然没有运气。

经过进一步调查，我发现本地和远程页面呈现完全相同的 HTML 代码，除了本地（工作）页面有这些行

`//<![CDATA[
Sys.WebForms.PageRequestManager._initialize('ctl00$ContentPlaceHolder1$ScriptManager1', document.getElementById('aspnetForm'));
Sys.WebForms.PageRequestManager.getInstance()._updateControls(['tctl00$ContentPlaceHolder1$updReportArgs','tctl00$ContentPlaceHolder1$updReport'], ['ctl00$ContentPlaceHolder1$chkTumu','ctl00$ContentPlaceHolder1$btnGetir'], [], 90);
//]]>` 

显然，这些是使回调成为可能的代码行。问题是为什么 asp.net 不呈现这些行？可能缺少什么？

顺便说一句，ScriptResource.axd 和 WebResource.axd 没有给出 404 或任何内容，我可以通过 Firebug 看到他们的 js 代码。

还有一件事：我不确定它是否相关，但页面上有客户端 asp.net 验证器，其 js 代码也未呈现。同样，这些在本地工作正常。

如需进一步调查，您可以在此处查看远程站点：[http://www.ajitatif.com/subdomains/nazer/Raporlar/danismanbasarim.aspx](http://www.ajitatif.com/subdomains/nazer/Raporlar/danismanbasarim.aspx)

            回答 #1

赞同：1

时间：2010-02-09T18:25:36.390

远程网站的 web.config 是否设置了**<xhtmlConformance mode="Legacy"/>**？

此设置可防止部分页面更新工作。将模式更改为 Transitional 或 Strict，或删除 xhtmlConformance 设置。

[http://weblogs.asp.net/scottgu/archive/2006/12/10/gotcha-don-t-use-xhtmlconformance-mode-legacy-with-asp-net-ajax.aspx](http://weblogs.asp.net/scottgu/archive/2006/12/10/gotcha-don-t-use-xhtmlconformance-mode-legacy-with-asp-net-ajax.aspx)

            回答 #2

赞同：0

时间：2009-06-13T21:02:15.200

我遇到了同样的问题，但我将 ScriptManager 控件作为子控件添加到自定义用户控件。我忘了调用 RenderControl 方法。一旦我添加了那个调用，它就添加了前面提到的 javascript 行。所以我不确定你是否使用用户控件，但我很确定渲染例程不会以某种方式为你的 ScriptManager 调用。

        javascript - 禁用文本框

ID：847548

赞同：1

时间：2009-05-11T10:37:11.627

标签：javascript, html

我是 html 的初学者。我有两个文本框说 t1 和 t2 如果 t1 填充了一些数据，那么其他文本框 t2 应该被禁用。请让我知道热做它。提前致谢

            回答 #1

赞同：2

时间：2009-05-11T11:58:38.190

根据您的简单场景描述，这是一个跨浏览器且无需任何第三方 javascript 库的实现：

```
<html>
<head>
<script type="text/javascript">
window.onload = function(){
  var t1 = document.getElementById("t1");
  var t2 = document.getElementById("t2");
  t1.onchange = function(){
     t2.disabled = t1.value.length > 0;
  }
}
</script>
</head>
<body>
<form>
t1:<input type="text" id="t1" name="t1" /><br/>
t2:<input type="text" id="t2" name="t2" />
</form>
</body>
</html> 
```

            回答 #2

赞同：0

时间：2009-05-11T12:16:46.750

```
<head>
<script type="text/javascript">
  function verify(){
    var t1 = document.getElementById ('first');
    var t2 = document.getElementById ('second');
    if (t1.value != '') {
       t2.setAttribute('disabled','disabled');
       return true; 
    } 
    if (t2.value != '') {
       t1.setAttribute('disabled','disabled');
       return true;
    }
  }
</script>
</head>
<body>
...
<input type="text" id="first" onblur="verify()">
<input type="text" id="second" onblur="verify()">
...
</body> 
```

            回答 #3

赞同：-5

时间：2009-05-11T10:46:20.957

您无法使用纯 HTML 来实现这一点。

遵循[渐进增强](http://icant.co.uk/articles/pragmatic-progressive-enhancement/)指南，您应该首先在用于处理提交数据的任何表单处理程序中实现服务器端检查。

然后您可以考虑添加 JavaScript 进行客户端检查。类似于以下内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title>Disabling form controls</title>
    </head>
    <body>
        <form id="myForm" action="http://example.com/">
          <div>
            <input name="t1">
            <input name="t2">
          </div>
        </form>
        <script type="text/javascript">
        (function () {
          var t1 = document.forms.myForm.elements.t1;
          var t2 = document.forms.myForm.elements.t2;
          var handler = function handler() {
            t2.disabled = (t1.value !== "");
          };
          t1.onchange = handler;
        }());
        </script>
    </body>
</html> 
```

（尽管我会使用诸如[YUI](http://developer.yahoo.com/yui/)或[jQuery](http://jquery.com/)之类的库来添加事件处理程序，这种方式可以更好地防止以跨浏览器兼容的方式被覆盖）。

[您可能需要一些关于JavaScript](http://yuiblog.com/blog/2007/01/24/video-crockford-tjpl/)和[DOM 的](http://yuiblog.com/blog/2006/10/20/video-crockford-domtheory/)教程，这样才有意义。

        c# - c# 在哪里可以查找 Microsoft 命名空间名称？

ID：847550

赞同：1

时间：2009-05-11T10:37:19.893

标签：c#, namespaces

我正在使用 MS 命名空间，但 Visual Studio 告诉我我没有对它的引用。有没有可以去查找命名空间的地方？

谢谢

            回答 #1

赞同：4

时间：2009-05-11T10:40:21.637

如果您的意思是“查找我需要的 dll（每种类型）”：[MSDN](http://msdn.microsoft.com/en-us/library/ms229335.aspx)？

例如，[`CLSID`](http://msdn.microsoft.com/en-us/library/microsoft.aspnet.snapin.clsid.aspx)

**命名空间：**   Microsoft.Aspnet.Snapin

**程序集：**   AspNetMMCExt（在 AspNetMMCExt.dll 中）

            回答 #2

赞同：1

时间：2009-05-11T10:42:55.330

[您通常可以通过访问http://msdn.microsoft.com/](http://msdn.microsoft.com/) *namespace*找到有关特定命名空间的 MSDN 页面。因此，例如，要了解 System.Web，您可以访问...

[http://msdn.microsoft.com/system.web](http://msdn.microsoft.com/system.web)

这本身对你没有帮助。您需要从那里单击到您正在使用的特定类型，它会告诉您（靠近顶部）实现该类型的 DLL 的名称。

请记住，命名空间可以包含在多个 DLL 中定义的类型。

            回答 #3

赞同：0

时间：2009-05-11T10:40:27.173

有关如何添加参考，请参阅[http://msdn.microsoft.com/en-us/library/wkze6zky(VS.80).aspx](http://msdn.microsoft.com/en-us/library/wkze6zky(VS.80).aspx)

            回答 #4

赞同：0

时间：2009-05-11T10:41:20.870

您还需要组装。

对于 Microsoft 和 System 命名空间，最简单的方法是[http://msdn.microsoft.com/library](http://msdn.microsoft.com/library)，或者，如果 MSDN 安装在本地，它的索引。

            回答 #5

赞同：0

时间：2009-05-11T10:41:45.753

如果您想知道某个类位于哪个程序集中，您可以简单地查看文档（在类的类概述页面上注明）。请注意，一个命名空间很可能分布在多个程序集中。

            回答 #6

赞同：0

时间：2009-05-11T10:41:56.017

您需要先添加对 DLL 的引用，然后才能在代码中使用“using”关键字。

右键单击项目 > 添加引用 > 在 .Net 选项卡中选择组件并单击确定。然后构建你的代码。

            回答 #7

赞同：0

时间：2009-05-11T11:02:40.913

您无法在所有情况下都找到指定命名空间的 DLL，因为属于同一程序集的多个类型可能驻留在不同的程序集中。

到达那里的最快方法是谷歌到您正在使用的特定类型（类）的 MSDN 页面。比方说XDocument ..我把`msdn xdocument class'放到谷歌中。第一个结果是我需要的页面。点击！在类名下，您会看到这样的部分

```
Namespace:  System.Xml.Linq
Assembly:  System.Xml.Linq (in System.Xml.Linq.dll) 
```

这向您显示了该类型所属的命名空间（您可能需要在代码中为其添加 using）

以及您需要“添加引用”的 DLL。

        asp.net - ASP.NET 验证

ID：847561

赞同：1

时间：2009-05-11T10:39:50.920

标签：asp.net

我对一种形式的验证有一点问题，该形式由两个 taq 组成。每次点击都有一个“保存”按钮（两者的控件相同）并保存表单信息。在一个选项卡中有验证控件，但在第二个选项卡中没有。当我们尝试保存第二个选项卡中的信息，并且信息尚未填充到第一个选项卡中时，验证器会触发，并且没有任何反应，但是由于此验证器显示在另一个选项卡中，最终用户可能会认为操作已经完成，相反，我想显示一个 msgBox，告诉用户另一个选项卡中的错误。我如何知道另一个选项卡中的验证器已被触发，并在单击按钮时显示错误消息？

            回答 #1

赞同：1

时间：2009-05-11T10:46:02.453

您应该使用验证器控件的 ValidationGroup 和相应的提交按钮。您还可以使用显示验证消息摘要的 ValidationSummary 控件 - 如果需要，可以通过设置属性 ShowMessageBox=true 来设置显示消息框。

            回答 #2

赞同：0

时间：2009-05-11T11:02:51.613

***任务 - 点击***

亲爱的，你为什么这么困惑？

所有验证器都作为 JavaScript 函数发布到页面。您可以在按钮单击时调用验证功能并采取适当的措施。

您可以在按钮上使用

```
onClientClick="Page_ClientValidate();" 
```

        winforms - 如何在 Dundas / Microsoft Chart Controls for Windows Forms 中获取动态间隔？

ID：847581

赞同：1

时间：2009-05-11T10:43:57.153

标签：winforms, charts, dundas, microsoft-chart-controls

我正在使用 Microsoft Chart Controls for .NET 3.5，并且正在努力让图表控件支持窗口和控件调整大小。

我有 X 值为日期的图表，并希望图表在调整窗口大小时在图表轴上显示可用的最大间隔/标签。

我最接近的是从 PrePaint 事件中调用它：

```
double interval = chart.Series[0].Points.Count / ((double)chart.Width / 90);
foreach (var area in chart.ChartAreas.Where(ca => ca.Visible))
{
    area.AxisX.Interval = interval;
} 
```

这使得间隔和标签完全符合 X 轴，但日期显示不正确。第一个标签似乎是正确的（2008 年的某个日期），但沿轴的其余标签显示为 1900 年的某个日期。

这样做的首选方法是什么？

            回答 #1

赞同：1

时间：2010-08-30T06:36:15.737

对于 Microsoft 图表控件中的日期，您必须明确指定开始的最短日期。否则以 1899 年 12 月 29 日为原点。您可以在图表上设置最小和最大日期，例如

```
chart.ChartAreas[0].AxisY.Minimum = (new DateTime(2010, 5, 1)).ToOADate();
chart.ChartAreas[0].AxisY.Maximum = (new DateTime(2011, 4, 1)).ToOADate(); 
```

使用*[MS 图表控件创建甘特图一文包含](http://www.aarongoldenthal.com/post/2010/05/15/Creating-a-Gantt-Chart-with-the-Microsoft-Chart-Controls.aspx)*有关 Microsoft 图表控件的一些有价值的信息。

        visual-studio - Visual Studio 2003 预构建脚本找不到“svn”命令

ID：847583

赞同：3

时间：2009-05-11T10:45:09.117

标签：visual-studio, svn, visual-studio-2003, revision

[我正在使用脚本从从http://blog.guymaheu.com/2008/06/09/getting-the-svn-head-revision-number](http://blog.guymahieu.com/2008/06/09/getting-the-svn-head-revision-number-from-a-windows-batch-file/)中找到的脚本派生的 subversion 存储库中获取 subversion 头修订号[-来自-a-windows-batch-file/](http://blog.guymahieu.com/2008/06/09/getting-the-svn-head-revision-number-from-a-windows-batch-file/)。从普通命令行调用该脚本时，该脚本工作正常，但是当使用路径 $(ProjectDir)/../getSVNRev.bat 调用与预构建事件相同的批处理文件时，命令 svn 是未知的。

svn.exe 的路径在标准系统 %Path% 中，但似乎 VS 使用了另一个路径。我在批处理文件中回显了 %Path% 变量，并且 %Path% 似乎设置为 VC++ 二进制路径。我将 svn.exe 的路径添加到 VC++ 二进制路径中，得到了回应，但仍然找不到 svn.exe。

我什至将 svn.exe 和所有 dll 复制到 system32 中，但 VS 命令行仍然不知道命令 svn。

是否有任何其他位置我应该添加路径，以便 VS.NET 2003 上的预构建事件识别 svn.exe？

谢谢，诺伯特

            回答 #1

赞同：1

时间：2009-07-27T15:15:01.157

我想你想去工具->选项->项目和解决方案->VC++目录，然后确保“显示目录”设置为“可执行文件”并且你的平台设置为Win32，然后添加目录可执行文件到列表中，或者只是将 $(Path) 添加到列表中，以便您的系统路径最终出现在列表中。

        ruby-on-rails - 如何从夹具中填充导轨中的表格？

ID：847586

赞同：1

时间：2009-05-11T10:46:14.293

标签：ruby-on-rails, migration, yaml, production-environment, fixture

**快速总结：**
我有一个 Rails 应用程序，它是个人清单/待办事项列表。基本上，您可以登录并管理您的待办事项列表。

**我的问题：**
当用户创建新帐户时，我想用 20-30 个默认待办事项填充他们的清单。我知道我可以说：

```
wash_the_car = ChecklistItem.new
wash_the_car.name = 'Wash and wax the Ford F650.'
wash_the_car.user = @new_user
wash_the_car.save!

...repeat 20 times... 
```

但是，我有 20 个 ChecklistItem 行要填充，所以这将是 60 行非常潮湿（也不是 DRY）的代码。一定有更好的办法。

因此，我想在创建帐户时使用 YAML 文件中的 ChecklistItems 表作为种子。YAML 文件可以填充我的所有 ChecklistItem 对象。创建新用户时——bam！-- 预设的待办事项在他们的列表中。

我该怎么做呢？

谢谢！

（PS：对于那些想知道我为什么这样做的人：我正在为我的网页设计公司进行客户登录。我有一组 20 个步骤（第一次会议、设计、验证、测试等），我要经历每个 Web 客户端。这 20 个步骤是我要为每个新客户端填充的 20 个清单项。但是，虽然每个人都从相同的 20 个项目开始，但我通常会根据项目自定义我将采取的步骤（因此我的香草待办事项列表实现和希望以编程方式填充行）。如果您有问题，我可以进一步解释。

            回答 #1

赞同：3

时间：2009-05-11T11:12:26.887

只写一个函数：

```
def add_data(data, user)
wash_the_car = ChecklistItem.new
wash_the_car.name = data
wash_the_car.user = user
wash_the_car.save!
end

add_data('Wash and wax the Ford F650.', @user) 
```

            回答 #2

赞同：1

时间：2009-05-11T11:09:15.037

Rails Fixture 用于填充单元测试的测试数据；不要认为它是用来在你提到的场景中使用的。

我会说只是提取一个新方法`add_checklist_item`并完成它。

```
def on_user_create
  add_checklist_item 'Wash and wax the Ford F650.', @user
  # 19 more invocations to go
end 
```

如果你想要更多的灵活性

```
def on_user_create( new_user_template_filename )
  #read each line from file and call add_checklist_item
end 
```

该文件可以是一个简单的文本文件，其中每一行对应一个任务描述，例如“为福特 F650 清洗和打蜡”。应该很容易用 Ruby 编写，

            回答 #3

赞同：1

时间：2009-05-12T15:08:52.823

我同意其他回答者建议你只用代码来做。但它不必像建议的那样冗长。如果您想要它已经是一个班轮：

```
@new_user.checklist_items.create! :name => 'Wash and wax the Ford F650.' 
```

将其放入您从文件中读取的项目循环中，或存储在您的班级中，或任何地方：

```
class ChecklistItem < AR::Base
  DEFAULTS = ['do one thing', 'do another']
  ...
end

class User < AR::Base
  after_create :create_default_checklist_items

  protected
  def create_default_checklist_items
    ChecklistItem::DEFAULTS.each do |x|
      @new_user.checklist_items.create! :name => x
    end
  end
end 
```

或者，如果您的项目复杂性增加，请将字符串数组替换为哈希数组...

```
# ChecklistItem...
DEFAULTS = [
  { :name => 'do one thing', :other_thing => 'asdf' },
  { :name => 'do another', :other_thing => 'jkl' },
]

# User.rb in after_create hook:    
ChecklistItem::DEFAULTS.each do |x|
  @new_user.checklist_items.create! x
end 
```

但我并不是真的建议您将所有默认值放在一个常量 inside 中`ChecklistItem`。我只是这样描述它，以便您可以看到 Ruby 对象的结构。相反，将它们放入您读取一次并缓存的 YAML 文件中：

```
class ChecklistItem < AR::Base
  def self.defaults
    @@defaults ||= YAML.read ...
  end
end 
```

或者，如果您希望管理员能够即时管理默认选项，请将它们放入数据库中：

```
class ChecklistItem < AR::Base
  named_scope :defaults, :conditions => { :is_default => true }
end

# User.rb in after_create hook:    
ChecklistItem.defaults.each do |x|
  @new_user.checklist_items.create! :name => x.name
end 
```

很多选择。

        c# - 我们可以在 C# 中使用来自另一个 winform 的某个 winform 的面板吗？

ID：847587

赞同：6

时间：2009-05-11T10:46:20.673

标签：c#, winforms, panel

我想在 C# 中使用 win-form 并在另一个表单中使用的面板中显示其内容或整个表单。

假设我有一个带有面板 Panel_of_A 的表单 A 和一个带有面板 Panel_of_B 的表单 B

我想将 Panel_of_A 的内容显示到 Panel_of_B 中，或者您可能会说我想以另一种形式使用 Panel_of_A。

或者，您可以提供帮助以将表单 A 显示到表单 B 的面板中。

希望我让你明白我的想法...

            回答 #1

赞同：11

时间：2009-05-11T10:49:01.013

我认为这样做的更好方法是创建一个包含该面板的用户控件并（重新）在两个表单上使用它。

这是一个[如何在 MSDN 上创建用户控件的教程](http://msdn.microsoft.com/en-us/library/aa302342.aspx)。

            回答 #2

赞同：4

时间：2009-05-11T10:49:36.097

创建一个包含要复制的逻辑的用户控件，然后在两个位置都包含新的用户控件。

            回答 #3

赞同：2

时间：2009-05-11T10:52:06.983

这如何在 FormB 的面板内显示 FormA 的实例？UserControl 可能是更好的方法，但您要求的是可能的。

```
fa = new FormA();
fa.TopLevel = false;
fa.FormBorderStyle = FormBorderStyle.None;
fa.Dock = DockStyle.Fill; 

fb = new FormB();
fb.panel1.Controls.Add(fa); // if panel1 was public

fa.Show();
fb.Show(); 
```

            回答 #4

赞同：1

时间：2009-05-11T10:49:15.380

我建议将要重用的面板定义为单独的类，并将其放在两个表单上。如果您还需要显示的数据相同，请绑定到可以在表单之间传递的业务对象。

            回答 #5

赞同：0

时间：2009-05-11T12:19:09.973

根据应用程序的大小和规模，您可能需要考虑（免费）[复合 UI 应用程序块](http://msdn.microsoft.com/en-us/library/aa480450.aspx)

从简介：

它提供了经过验证的实践来构建基于众所周知的设计模式（例如复合模式）的复杂智能客户端用户界面，其中可以组合简单的用户界面部分以创建复杂的解决方案，但同时允许这些部分独立开发，测试和部署。

        c# - 我想当我填充我的数据库时，如果一个值是重复的，那么就会出现错误

ID：847602

赞同：0

时间：2009-05-11T10:52:24.720

标签：c#, database

我使用此代码，直到在我的数据库中看到数据并在其中编辑、删除和插入数据。但我希望当我将数据插入数据库时​​，这不是重复的，如果是重复的，请向我显示一个关于它的消息框。

代码 ：

```
private void btnok_Click(object sender, EventArgs e)
    {
        string id = idTextBox.Text.ToString();
        string name = nameTextBox.Text.ToString();
        string family = familyTextBox.Text.ToString();
        table1BindingSource.EndEdit();
        table1TableAdapter.Update(database1DataSet.Table1);

    }

    private void butins_Click(object sender, EventArgs e)
    {
        table1BindingSource.AddNew();
    }

    private void butdelete_Click(object sender, EventArgs e)
    {
        table1BindingSource.RemoveCurrent();
        table1TableAdapter.Update(database1DataSet.Table1);
    }

    private void butedit_Click(object sender, EventArgs e)
    {
        table1BindingSource.EndEdit();
        table1TableAdapter.Update(database1DataSet.Table1);
    } 
```

我写了这个查询，但我不知道，我该如何使用它？我把它写在 "Database1DataSet.xsd" 中，并在 Tableadapter 中出现了 fillby() 和 gatedataby()。

询问 ：

```
SELECT     id, name, family
FROM         Table1
WHERE     (id = @id) AND (name = @name) AND (family = @family) 
```

            回答 #1

赞同：1

时间：2009-05-11T11:08:05.380

好吧，您可以在数据库中放置一个跨越有趣列（大概 和 ）的 UNIQUE 约束`[id]`......`[name]`这`[family]`将很好地防止重复（通过引发您可以适当地捕获和消息框的异常）。

另一种方法是首先检查现有值 - 但除非您使用可序列化隔离级别之类的东西，否则您仍然会遇到竞争条件。

            回答 #2

赞同：0

时间：2009-05-11T11:52:13.780

我建议您遵循 Marc 的回答。

您将捕获的异常是错误号为 2601 的 SqlException，它可能是这样的：

```
catch(System.Data.SqlClient.SqlException lExSql)
{
    if(lExSql.Number == 2601)
        return Result.Duplicate;
    else
        return Result.Failure;
}
catch
{
    return Result.Failure;
} 
```

另附注：无需调用 TextBox.Text.ToString()，因为 Text 属性本身就是一个字符串。

        git - 在远程存储库中创建一个 git 符号引用

ID：847609

赞同：14

时间：2009-05-11T10:54:33.780

标签：git, github, master, head, git-branch

在我的远程裸存储库中，HEAD 指向“refs/heads/master”，我希望它指向“refs/heads/other”。

我无法转到远程存储库目录并运行`git symbolic-ref`. 是否有任何 git 命令来实现它？还是有什么其他方式？

如果没有办法，Github 是否允许更改 HEAD？

提前致谢。

            回答 #1

赞同：6

时间：2009-05-11T11:09:46.860

要在 github 中更改它，请转到管理部分。

您可以从那里的下拉列表中选择默认分支。

            回答 #2

赞同：4

时间：2010-06-03T01:14:21.540

（已经发布了另一个基本相同的问题：[How do I change a Git remote HEAD to point to something except "master"</a>，那里有更多](https://stackoverflow.com/questions/1485578/how-do-i-change-a-git-remote-head-to-point-to-something-besides-master/2962737)[的讨论，参考了 Github 组](http://groups.google.com/group/github/browse_thread/thread/eb3046a7b4c8bec7/b64ee724a0db5471)。所以我'也想向任何人指出该讨论。）

众所周知，没有普遍的答案。

但是对于各种 git "farms" 有一个特定的答案（多个用户可以通过受限界面管理 git repos：通过 http 和 ssh）：[http://Github.com](http://Github.com)、[http://Gitorious.org](http://Gitorious.org)、[http:// /repo.or.cz，Girar](http://repo.or.cz) ( [http://git.altlinux.org](http://git.altlinux.org) ) 。[_](http://en.altlinux.org/Git.alt)

这些特定的答案可能对阅读此页面并考虑这些特定服务的人有用。

*   现在他们有一个下拉菜单，用于在**[http://repo.or.cz](http://repo.or.cz)**选择 HEAD 分支（例如：[http ://repo.or.cz/editproj.cgi?name=for-me-and-for- all_imz.git](http://repo.or.cz/editproj.cgi?name=for-me-and-for-all_imz.git) );
*   以及**[http://gitorious.org](http://gitorious.org)**（查看设置中的某处）；
*   并在**[http://GitHub.com](http://GitHub.com)**： admin > Default Branch >（选择一些东西）（感谢@srcspider 的回答）；
*   在**[Girar](http://en.altlinux.org/Git.alt)**（在[http://git.altlinux.org](http://git.altlinux.org)上运行以构建 ALT 发行版的软件包）中，可以使用 ssh 接口：

```
$ ssh git.alt 帮助 | fgrep 分支
默认分支 []
$

```

例如`ssh git.alt default-branch packages/autosshd.git sisyphus`将远程仓库中的 HEAD 更改`autosshd.git`为指向`sisyphus`分支。

        php - 如何检索我上传的文件的路径？

ID：847615

赞同：0

时间：2009-05-11T10:57:12.107

标签：php, mysql

我正在开发一个 cms。

表客户端包含许多字段，其中之一是图像标题。

当用户上传文件（图像）时，该文件存储在公共文件夹中。

图像标题字段检索文件的最终名称并将其存储在表中。

问题是用户何时想要更新信息。如果用户不想更改图像，当他点击“更新”时，图像标题字段为空，因此图像的路径变为空，现在他只是显示（无图像）。

这是我一直在尝试做的事情：

HTML 表单：

```
 <p>
        <label for="image_caption">Image Caption:</label>
    <input name="image_caption" id="image_caption" type="text" class="formbox" size="60"  disabled="disabled" value="<?php echo htmlentities($row['image_caption']); ?>" /> 
    </p>                                                                                     
    <p>
        <label for="image">Insert image:</label>
        <input type="hidden" name="MAX_FILE_SIZE" value="<?php echo MAX_FILE_SIZE; ?>" />
        <input type="file" name="image" id="foto" value="<?php echo htmlentities($row['image_caption']); ?>"/> 
    </p>
    <p>
        <?php 
        if($row['image_caption']!= ""){
        ?>
            <img src="../images/clientes/<?php echo $row['image_caption'];?>" width="194" height="145" title="Imagem cliente" class="floatright"/>
      <?php
        }else{
        ?>
            <img src="../images/sem_imagem.gif" width="194" height="145" title="Imagem não disponível" class="floatright"/><br />                                               
        <?php
        }
        ?>
  </p>        
    <p>
        <input type="submit" name="update" value="Update" />
        <input name="cliente_id" type="hidden" value="<?php echo $row['codigo']; ?>" />
    </p> 
```

现在上传 PHP 代码（我刚刚插入了我想向你展示的代码）：

```
 // This checks if the file input is empty, and if it is, insert the value from the table that was previously inserted

    if(empty($_FILES['image']['name'])){
$image_caption = $row['image_caption'];

}else{

$image = str_replace(' ', '_', $_FILES['image']['name']);   
// move the file to the upload folder and rename it
move_uploaded_file($_FILES['image']['tmp_name'],UPLOAD_DIR.$foto);  
$image_caption = $image;
} 
```

            回答 #1

赞同：1

时间：2009-05-11T11:22:01.317

我仍然不确定我是否理解，但是您不能将原始文件的名称作为隐藏字段传递吗？然后，如果没有上传任何内容，请使用它。

编辑：刚刚看到您的评论，您已经有了原始文件的名称，因此将您的 PHP 更改为：

```
if(empty($_FILES['image']['name'])){
    $image_caption = $_POST['image_caption'];
}else{
    ....(etc) 
```

应该工作，不是吗？

而且，当然，如果你要做类似的事情，那么你应该对发布的变量进行某种清理，以确保没有肮脏......

            回答 #2

赞同：0

时间：2009-05-11T11:05:19.007

提交表单后是否从数据库中获取信息？我的意思是，$row['nome_foto'] 实际上是否包含先前的路径？

编辑：无论哪种方式，如果没有提供新路径，最好不要更新数据库中的路径字段。

此外，您需要在上传时添加某种形式的检查以确保它是图像 - 现在我可以将 php 脚本或病毒上传到服务器，如果我愿意的话。

            回答 #3

赞同：0

时间：2009-05-12T08:18:07.317

我不确定我是否理解正确，但我会试一试，如果您使用数据库中的数据填充更新表单 - 那么即使该人仅更改了他的名字并留下了所有内容，图像标题字段也不会为空。  

        unix - 检查脚本是否每 5 分钟运行一次

ID：847618

赞同：1

时间：2009-05-11T11:00:34.397

标签：unix

我们已经安排了一个脚本每 5 分钟运行一次。

我们如何检查脚本是否在 linux 中每 5 分钟运行一次？

有知道的请回复..

提前致谢。

我们已经创建了脚本。但我们不运行该脚本。我们的支持团队将每分钟运行一次。如果他们发现任何错误，他们会更新给我们。我们如何确认他们是否正确运行此脚本？

            回答 #1

赞同：5

时间：2009-05-11T11:13:28.617

如果您不想修改脚本并且已将其安排在 cron 中，则可以将 cron 行更改为：

```
*/5 * * * * /home/me/myscript.sh; date >> /tmp/mylog 
```

并检查 /tmp/mylog - 每次运行的日期和时间都应添加一个新行。

            回答 #2

赞同：2

时间：2009-05-11T11:04:06.527

也许通过将脚本记录在带有时间戳的日志文件中，这样您就可以验证时间戳是否正常，例如：

```
date >>/tmp/myprocess.log 
```

在脚本的顶部（或者在循环中，如果这就是你“运行”它的方式），那么你可以检查日志文件来检查。

            回答 #3

赞同：0

时间：2009-05-11T11:07:34.790

也许您可以在脚本中添加一个带有时间戳的日志？然后您可以查看脚本是否每 5 分钟有效运行一次。

            回答 #4

赞同：0

时间：2009-05-11T19:45:37.683

不改剧本？

`atop`是一个进程监视器包，可以记录正在运行的程序的历史记录，并且作为 root 也将捕获终止。见[http://www.atcomputing.nl/Tools/atop/whyatop.html](http://www.atcomputing.nl/Tools/atop/whyatop.html)

还可以考虑流程会计工具[http://www.faqs.org/docs/Linux-mini/Process-Accounting.html](http://www.faqs.org/docs/Linux-mini/Process-Accounting.html)

        reference - 在哪里可以找到 LoadRunner 的在线函数参考？

ID：847620

赞同：3

时间：2009-05-11T11:01:09.340

标签：reference, loadrunner

是否有我可以查询的在线参考手册，其中包含 LoadRunner 功能的详细信息，例如：

```
lr_start_transaction
web_url
web_submit_data
web_custom_request
lr_end_transaction 
```

ETC。？

本质上，我希望能够在没有许可/安装 LoadRunner 环境的情况下了解这些功能。

            回答 #1

赞同：2

时间：2009-05-11T13:17:05.577

似乎没有基于 Web 的函数参考，但可以[从此处下载](http://support.openview.hp.com/selfsolve/document/KM548035/binary/LR-version9.10-funcref.html?searchIdentifier=-294d700c%3a1212170de9d%3a14d2&resultType=document)Windows HTMLHelp (.CFM) 文件（LoadRunner 9.10 VuGen API 参考）的 ZIP 文件：

我通过搜索[HP 软件产品手册](http://support.openview.hp.com/selfsolve/manuals)找到了这一点，其中包含以下详细信息（需要免费注册）：

```
Product: LoadRunner
Product version: 9.10 
Operating system: Windows 
```

我也尝试了 9.50 版，但它没有提供链接...

一个问题：一旦我的机器上有 .CFM，我必须通过“属性”对话框“取消阻止”它们，否则我会在 HTMLHelp 中收到“此程序无法显示网页”消息。

            回答 #2

赞同：1

时间：2011-03-15T12:16:23.827

LoadRunner 的每个副本都附带一份手册的软副本。

            回答 #3

赞同：1

时间：2014-12-09T03:02:02.960

官方参考将在 HP Loadrunner中的**Help** >> **Fuction Reference中：**

![在此处输入图像描述](https://i.stack.imgur.com/vouYP.png)

您可以通过单击索引进行“快速搜索”：

![在此处输入图像描述](https://i.stack.imgur.com/vrrdo.png)

该参考实际上由 html 文件（位于`HP\Loadrunner\help\function_reference\FuncRef.htm`）组成，因此可以在任何浏览器中直接查看它们。

（顺便说一句，文件夹中也有许多有用的宝石`Loadrunner\help`，尤其是 PDF 教程。）

            回答 #4

赞同：0

时间：2009-05-11T11:25:25.230

尝试搜索@http: [//loadrunnertnt.com](http://loadrunnertnt.com)或询问@

[LoadRunner 组](https://www.google.com/accounts/ServiceLogin?passive=true&service=groups2&continue=http%3A%2F%2Fgroups.google.com%2Fgroup%2FLR-LoadRunner%2Fsubscribe&cd=US&hl=en)

        sql-server-2005 - xp_sendmail：过程需要参数@user

ID：847623

赞同：0

时间：2009-05-11T11:02:13.800

标签：sql-server-2005

我收到xp_sendmail：运行 xp_sendmail 时，**过程需要参数 @user 。**

如何将给定的 SQLService 登录配置文件 (SQLMail_Whatever) 与 Outlook 关联？

            回答 #1

赞同：0

时间：2009-05-11T16:09:50.360

这是我如何使用 SQLServer2005（需要使用 sqlmail 以实现向后兼容性）：

1.  使用您打算用于邮件的登录配置文件登录到运行 sql server 的机器
2.  为该特定帐户配置 Outlook 帐户
3.  设置 SQLServer 和 SQLServer 代理服务以使用同一帐户启动
4.  从 SqlSever Management-->Legacy-->SQLMail setup and test outlook as profile name
5.  从 SQL Server Agent-->Properties-->Alert System 检查启用邮件配置文件并在下拉列表中选择 SQLMailand Outlook。

服务重新启动后 xp_sendmail 将起作用。

        wpf - WPF 中数据网格中的列标题样式问题

ID：847635

赞同：1

时间：2009-05-11T11:05:53.560

标签：wpf, silverlight-2.0, wpftoolkit

我已经格式化了 Wcf Toolkit Datagrid，下面是它的 ColumnHeader 样式但是，Column Header 中仍然有一些区域，它们的样式没有如图所示

[http://www.freeimagehosting.net/uploads/9aba4fbd93.jpg](http://www.freeimagehosting.net/uploads/9aba4fbd93.jpg) 

```
<Style x:Key="ColumnHeaderStyle" TargetType="{x:Type dg:DataGridColumnHeader}">
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Background" Value="Orange" />
        <Setter Property="Foreground" Value="White" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="dg:DataGridColumnHeader">   
                    <dg:DataGridHeaderBorder
                    x:Name="headerBorder"                      
                    Background="Orange">
                    <Border BorderThickness="2" 
                            CornerRadius="5" 
                            Background="Orange"
                            BorderBrush="DarkOrange">                            
                        <Grid>
                            <TextBlock Text="{TemplateBinding  Content}" 
                                       VerticalAlignment="Center" 
                                       HorizontalAlignment="Center" 
                                       TextWrapping="Wrap"/>                                
                            </Grid>                                
                    </Border>
                    </dg:DataGridHeaderBorder>

                </ControlTemplate>
            </Setter.Value>
        </Setter>                 
    </Style>

 <dg:DataGrid Grid.Row="1" Grid.RowSpan="1" 
                 Name="dgQuestion"                      
                 HorizontalAlignment="Left"
                 AutoGenerateColumns="True"
                 Width="740"
                 MinWidth="200"
                 MaxWidth="740"                         
                 Background="Wheat"
                 ColumnHeaderHeight="30"                       
                 ColumnHeaderStyle="{DynamicResource ColumnHeaderStyle}"
                 RowStyle="{StaticResource RowStyle}"
                 CanUserAddRows="False"
                 CanUserDeleteRows="False"
                 AlternationCount="2"/> 
```

            回答 #1

赞同：1

时间：2010-01-28T12:24:46.750

嗨，我刚刚发现这篇文章有同样的问题，并且能够通过将宽度设置为标题的确切宽度（样式停止的位置）来为我修复它。

在您的情况下，它可能不适合您。还要注意这是几个月大的:-)

            回答 #2

赞同：0

时间：2010-05-21T15:28:36.523

我以前遇到过同样的问题，更新到最新版本的网格（WPFToolkit.dll）似乎已经为我解决了这个问题

        sql - 如何以更好的方式解决排序规则冲突？

ID：847636

赞同：4

时间：2009-05-11T11:06:41.797

标签：sql, sql-server, tsql, collation

我的数据库有整理问题，我已经开发了自己的解决方案。

解决方案：

```
DECLARE @new_collation varchar(128),
  @conflict_collation varchar(128),
  @cmd_holder varchar(2000),
  @cmd_complete varchar(2000),
  @schema varchar(128),
  @table_name varchar(128),
  @constraints_name varchar(128),
  @column_name varchar(128),
  @definition varchar(256),
  @data_type varchar(128),
  @type varchar(5),
  @length varchar(4),
  @nullability varchar(8),
  @db_name varchar(10)

SET @new_collation = 'SQL_Latin1_General_CP1_CI_AS'
SET @conflict_collation = 'French_CI_AS'

CREATE TABLE #LIST_CONSTRAINT(
  constraints_name VARCHAR(128),
  table_name VARCHAR(128),
  definition VARCHAR(256),
  type VARCHAR(10))

INSERT INTO #LIST_CONSTRAINT 
SELECT c.name AS constraints_name, o.name AS table_name, definition, 'CH' AS type
FROM sys.check_constraints c
INNER JOIN sysobjects o ON id = parent_object_id

INSERT INTO #LIST_CONSTRAINT 
SELECT i.name AS index_name, o.name AS table_name, c.name AS field_name, 'UQ' AS type
FROM sys.indexes i 
INNER JOIN sys.index_columns ic 
  ON i.object_id = ic.object_id and i.index_id = ic.index_id
INNER JOIN sys.columns c 
  ON ic.object_id = c.object_id and ic.column_id = c.column_id
INNER JOIN sys.objects o 
  ON i.object_id = o.object_id
WHERE is_unique_constraint = 1

SET @cmd_holder = 'ALTER TABLE $table_name DROP CONSTRAINT $constraints_name'

DECLARE column_cursor 
CURSOR FOR SELECT constraints_name, table_name FROM  #LIST_CONSTRAINT GROUP BY constraints_name, table_name
OPEN column_cursor
FETCH NEXT FROM column_cursor INTO @constraints_name, @table_name

WHILE @@Fetch_Status = 0
  BEGIN
    SELECT  @cmd_complete = @cmd_holder,
            @cmd_complete = Replace(@cmd_complete, '$table_name', '[' + @table_name +']'),
            @cmd_complete = Replace(@cmd_complete, '$constraints_name', @constraints_name)

    --PRINT @cmd_complete
    EXEC(@cmd_complete)
    FETCH NEXT FROM column_cursor INTO @constraints_name, @table_name
  END
CLOSE column_cursor
DEALLOCATE column_cursor

SELECT @db_name = DB_NAME()
EXEC('ALTER DATABASE ' + @db_name + ' COLLATE ' + @new_collation)  

SET @cmd_holder = 'ALTER TABLE $schema.$table_name ALTER COLUMN $column_name $data_type($length) COLLATE $new_collation $nullability'

DECLARE column_cursor CURSOR
  FOR SELECT  table_schema,
              table_name,
              column_name,
              data_type,
              CASE WHEN character_maximum_length = -1 THEN 'max'
                   ELSE Convert(varchar(4), character_maximum_length)
              END As length,
              CASE WHEN is_nullable = 'YES' THEN 'NULL'
                   ELSE 'NOT NULL'
              END As nullability
      FROM    information_schema.columns
      INNER JOIN sysobjects ON name = table_name
      WHERE  collation_name = @conflict_collation AND xtype = 'U'
       AND table_name NOT IN ('dtproperties', 'Exotics', 'ContractAccountsBalance', 'TechnicalParameters', 'SavingProducts', 'GeneralParameters')
OPEN column_cursor

FETCH NEXT FROM column_cursor INTO @schema, @table_name, @column_name, @data_type, @length, @nullability

WHILE @@Fetch_Status = 0
  BEGIN
    SELECT  @cmd_complete = @cmd_holder,
            @cmd_complete = Replace(@cmd_complete, '$schema', @schema),
            @cmd_complete = Replace(@cmd_complete, '$table_name', '[' + @table_name +']'),
            @cmd_complete = Replace(@cmd_complete, '$column_name', '[' + @column_name +']'),
            @cmd_complete = Replace(@cmd_complete, '$data_type', @data_type),
            @cmd_complete = Replace(@cmd_complete, '$length', @length),
            @cmd_complete = Replace(@cmd_complete, '$new_collation', @new_collation),
            @cmd_complete = Replace(@cmd_complete, '$nullability', @nullability),
            @cmd_complete = Replace(@cmd_complete, 'text(*)', 'text')

    --PRINT @cmd_complete
    EXEC(@cmd_complete)

    FETCH NEXT FROM column_cursor INTO @schema, @table_name, @column_name, @data_type, @length, @nullability
  END
CLOSE column_cursor
DEALLOCATE column_cursor

DECLARE @name_constraints VARCHAR(128)

DECLARE column_cursor 
CURSOR FOR SELECT constraints_name, table_name, definition, [type] FROM  #LIST_CONSTRAINT
OPEN column_cursor
FETCH NEXT FROM column_cursor INTO @constraints_name, @table_name, @definition, @type

WHILE @@Fetch_Status = 0
  BEGIN
    IF @type = 'CH'
    SET @cmd_holder = 'ALTER TABLE $table_name WITH NOCHECK ADD CONSTRAINT $constraints_name CHECK NOT FOR REPLICATION $definition ALTER TABLE $table_name CHECK CONSTRAINT $constraints_name'

    IF @type = 'UQ'
    BEGIN
      SET @cmd_holder = 'ALTER TABLE $table_name ADD CONSTRAINT $constraints_name UNIQUE NONCLUSTERED ($definition) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)'

      SET @definition = '';

      SELECT @definition = @definition + definition + ', '
      FROM #LIST_CONSTRAINT
      WHERE constraints_name = @constraints_name

      SELECT @definition = SUBSTRING(@definition, 1, LEN(@definition) - 1)         
    END

    SELECT  @cmd_complete = @cmd_holder,
            @cmd_complete = Replace(@cmd_complete, '$table_name', '[' + @table_name +']'),
            @cmd_complete = Replace(@cmd_complete, '$constraints_name', @constraints_name),
            @cmd_complete = Replace(@cmd_complete, '$definition', @definition)

    --PRINT @cmd_complete
    IF (@name_constraints <> @constraints_name)
      EXEC(@cmd_complete)

    SET @name_constraints = @constraints_name

    FETCH NEXT FROM column_cursor INTO @constraints_name, @table_name, @definition, @type
  END
CLOSE column_cursor
DEALLOCATE column_cursor

DROP TABLE #LIST_CONSTRAINT 
```

有人有其他解决方案吗？

有人可以提供一些建议来优化我的代码吗？

            回答 #1

赞同：11

时间：2009-05-11T11:19:35.940

我已经看到 tempdb 的默认排序规则与您的数据库不同，我需要在比较中添加“COLLATE DATABASE_DEFAULT”，例如

```
Create table #tmp
(
      mailbox varchar(50) not null
)
 . . .
Select t.mailbox, count(*)
from #tmp t inner join processed_email e
on t.mailbox = e.mailbox 
```

变成

```
Select t.mailbox, count(*)
from #tmp t inner join processed_email e
on t.mailbox COLLATE DATABASE_DEFAULT = e.mailbox COLLATE DATABASE_DEFAULT 
```

            回答 #2

赞同：0

时间：2009-05-11T14:37:43.080

Binary Warrier 的解决方案对于运行具有不同排序规则的代码很有用。例如，临时表和临时变量使用 tempdb 排序规则。

为了更改排序规则，MS 整理了一个知识库文章“[如何在 SQL Server 中将数据库从一个排序规则传输到另一个排序规则](http://support.microsoft.com/kb/325335/en-us)”。它仍然提到使用 DTS，这可能是不可能的。我找不到更新的知识库文章。

        jquery - 在 js/jq 中打开文件对话框

ID：847641

赞同：2

时间：2009-05-11T11:08:35.380

标签：jquery

我希望以下内容可以打开文件对话框，但事实并非如此。为什么？

```
$('<input type="file"/>').click(); 
```

            回答 #1

赞同：6

时间：2009-05-11T11:19:48.733

不能（不应该）以编程方式打开文件对话框。[标准是这样说的](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-2651361)。

我说不应该，因为 IE6 允许这样做，AFAIK。

            回答 #2

赞同：2

时间：2009-05-11T11:14:03.907

如果我的浏览器未经请求弹出系统对话框，我会认为这是危险的。只是一个想法，它可能是一个安全限制。*在这种情况下，我当然可能是错的。*

        java - 类文件中的错误版本

ID：847652

赞同：4

时间：2009-05-11T11:13:03.813

标签：java

当我在 TeamWorks eclipse 中为 lombardi 编写的一个连接器项目中使用某些 jar 时，我得到了一个错误的类版本异常......

任何想法如何解决这个问题..

问候， 阿迪尔

            回答 #1

赞同：13

时间：2009-05-11T11:16:37.957

如果您使用（比如说）Java 1.5 并且您使用的是用 Java 1.6 编译的 JAR，您将收到此错误。

最简单的解决方法是将您的 Java 版本升级到 JAR 使用的版本。

            回答 #2

赞同：2

时间：2009-05-11T11:21:48.433

尝试使用相同的编译器编译/重新编译所有东西。通常，当您使用更高版本编译某些内容并尝试使用旧版本运行它时，就会发生这种情况。

            回答 #3

赞同：1

时间：2011-03-18T17:27:59.963

此问题也可能是由 Eclipse 引用的过期（365 天）Android 证书引起的。

有关详细信息，请参阅[Eclipse Android 插件](https://stackoverflow.com/questions/2194808/debug-certificate-expired-error-in-eclipse-Android-plugins)中的“调试证书已过期”错误。

            回答 #4

赞同：0

时间：2009-05-11T14:47:49.567

这是运行使用编译器版本编译的代码的结果，该编译器版本高于您用于运行它的 java 版本。使用 1.6 编译的 IE 代码，您正在使用 1.5 运行它。请参阅这篇文章以确定它是用什么版本编译的。

[如何-我-找到-目标-java-version-for-a-compiled-class](https://stackoverflow.com/questions/698129/how-can-i-find-the-target-java-version-for-a-compiled-class)

最简单的解决方法是使用最新的 JVM 运行它。  

            回答 #5

赞同：0

时间：2013-02-22T05:53:59.243

此错误的根本原因是：您的项目中包含的 jars 是从其他版本的 java 编译的，而您正在从其他版本的 java 编译您的项目，只需升级 java 版本即可解决此问题。

我也面临同样的问题。

        c# - 在 Powerpoint 中操作文本选择

ID：847658

赞同：3

时间：2009-05-11T11:15:23.403

标签：c#, hyperlink, powerpoint

我只是想在 PowerPoint 中突出显示部分文本进行一些编码，以便我可以插入一个超链接。我可以在 Powerpoint 2003 中毫无困难地实现它，令我惊讶的是，它在 PowerPoint 2007 中不起作用......我使用的代码如下：

```
((PowerPoint.Application)applicationObject).ActiveWindow.Selection.TextRange.Text = "PPT";
((PowerPoint.Application)applicationObject).ActiveWindow.Selection.TextRange.Select();
((PowerPoint.Application)applicationObject).ActiveWindow.Selection.TextRange.ActionSettings[Microsoft.Office.Interop.PowerPoint.PpMouseActivation.ppMouseClick].Hyperlink.Address = "http://www.google.com";
((PowerPoint.Application)applicationObject).ActiveWindow.Selection.Unselect(); 
```

谁能告诉我上面的代码出了什么问题？

            回答 #1

赞同：1

时间：2011-07-07T13:37:59.893

您还需要将 ActionSetting 实例的 Action 设置为 HyperLink，例如在您的示例中：

 `((PowerPoint.Application)applicationObject).ActiveWindow.Selection.TextRange.ActionSettings[Microsoft.Office.Interop.PowerPoint.PpMouseActivation.ppMouseClick].Action = PpActionType.ppActionHyperlink;` 

            回答 #2

赞同：0

时间：2009-05-11T11:24:03.250

您应该像使用宏的应用程序一样保存您的 ppt 应用程序，如果它以“x”结尾（如 pptx），您将无法运行宏。

所以用 ppsm、pptm 等宏支持

另存为（使用另存为）

请参阅：http: [//msdn.microsoft.com/en-us/library/aa433259.aspx](http://msdn.microsoft.com/en-us/library/aa433259.aspx)

        apache - 重写规则——如果传入请求不包含某些字符，则重写到其他 URL

ID：847659

赞同：0

时间：2009-05-11T11:16:03.340

标签：apache, mod-rewrite

如何构造一个规则来检查传入的请求是否具有某些术语，如果不是，则重新路由到其他 URL？

例如，我有一个网站`my.example.com`。如果传入的 URL 是，`my.example.com/login`那么它应该执行该请求。如果是其他东西（不是`login`），那么请求必须重新路由到`your.example.com`. 例如，

*   `my.example.com/login2`必须重新路由到`your.example.com/login2`
*   `my.example.com/nologin`必须重新路由到`your.example.com/nologin`
*   `my.example.com/getname`必须重新路由到`your.example.com/getname`

当然，如果是

*   `my.example.com/login`必须重新路由到`my.example.com/login`

如何使用[RewriteRule](http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html#RewriteRule)和[mod_rewrite](http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html)来实现这一点？

            回答 #1

赞同：4

时间：2009-05-11T11:35:46.320

试试这个规则：

```
RewriteCond %{HTTP_HOST} ^my\.example\.com$
RewriteRule !^login$ http://your.example.com%{REQUEST_URI} [L,R=301] 
```

            回答 #2

赞同：0

时间：2009-05-11T11:26:57.783

```
RewriteCond %{HTTP_HOST}   !^www\.myexample\.com [NC]
RewriteCond %{HTTP_HOST}   !^$
RewriteRule ^/(.*)         http://www.myexample.com/$1 [L,R] 
```

            回答 #3

赞同：0

时间：2009-05-11T11:35:14.963

我知道这并不完全符合您的要求，但可以通过使用 .htaccess 将所有请求（有效或无效）定向到一个文件然后使用服务器端脚本（例如我的情况下的 PHP）来完成切换有效选项，捕捉任何其他默认重定向到另一个 URL 的内容。

例如这个：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php 
```

将不是对实际文件或目录的请求的任何内容发送到 index.php

        asp.net-mvc - ASP.NET MVC - 甚至可以在同一台服务器上拥有多个 MVC 项目吗？

ID：847663

赞同：5

时间：2009-05-11T11:17:43.040

标签：asp.net-mvc, project

我在同一台服务器上启动并运行超过 1 个 MVC 项目时遇到了很多问题……我使用的是运行默认 IIS 的 Windows XP 系统（我相信是 5.1）。

目前，我什至正在为我创建的每个项目构建 WebSetup 项目，以确保一切顺利，而使用 XCopy 可以很容易地部署这些项目。

最重要的是，我可以在以下位置运行 MVC 项目（例如 ContactManager 示例）：[http://servername](http://servername)或[http://servername/ContactManager](http://servername/ContactManager)。但是一旦我在这两个地方都有一个项目，恐怖就开始了

```
“标题不是 ViewPage 的成员”-> 是的，对...
部分或组名称“system.web.extensions”已定义。-> 确定
让我 <clear /> 或 <remove /> 那个，哦，那是无效的...

```

**甚至可以在同一台 Windows XP 机器上运行超过 1 个 ASP.NET MVC 项目（应用程序）吗？**

```
http://server/ 根项目 (MVC)
http://server/app1 应用程序 1 (MVC)
http://server/app2 应用程序 2 (MVC)
http://server/appX 应用程序 X (MVC)

```

有人能说出一些注意点吗？

            回答 #1

赞同：4

时间：2009-05-11T12:25:10.023

**是否有可能在同一台 Windows XP 机器上运行超过 1 个 ASP.NET MVC 项目（应用程序）？**

是的，在同一台 Windows XP 机器上绝对有可能拥有超过 1 个 ASP.NET MVC 应用程序。我刚刚在运行全新 Windows XP SP3 的测试机器上创建了两个新的 ASP.NET MVC 应用程序，它们运行顺畅。

**更新：**

我刚刚创建了 3d 应用程序：

*   IIS 根路径更改为该应用程序
*   添加映射**.***到**C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll**。
*   检查匿名访问

仍然所有 3 个应用程序都运行良好

**更新：**

**将.***映射到服务器根目录的**C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll**存在一个问题：所有非 MVC 纯 ASP.NET 应用程序都将停止工作。

回家这有帮助

            回答 #2

赞同：3

时间：2009-05-11T12:21:05.023

是的，这是可能的。我有 3 个 MVC 应用程序在 1 个主 MVC 应用程序下运行。

```
- 主站点
           - 行政
           - 子应用程序 2
           - ...

```

但是，您需要检查以下详细信息。

1.  检查主应用程序和子应用程序都设置为使用带有 aspnet_isapi.dll 的 MVC 的通配符映射。

2.  由于 web.configs 的继承，您需要在根 MVC 应用程序中设置一个属性...将其包裹在您的 <system.web> 周围

```
<位置路径=“。” inheritInChildApplications="false">
   <system.web>...
</位置>

```

            回答 #3

赞同：1

时间：2009-05-11T11:19:39.823

XP自带的IIS5.1只支持**一个**网站（但支持多个虚拟目录）。我相信这将是您的限制因素。

尝试在同一服务器上获取多个 MVC 应用程序时，首选 IIS6.x 及更高版本，其中您有许多网站（和许多应用程序池）。

**编辑**您始终可以使用免费版本的[VMware Server](http://www.vmware.com/products/server/)，只需使用 XP 创建大量 VM 以进行测试/开发。

            回答 #4

赞同：0

时间：2009-05-11T11:19:57.873

IIS 中是否定义了 2 个单独的应用程序？

            回答 #5

赞同：0

时间：2009-05-11T11:37:02.620

在 XP 上，一个解决方案是使用带有 Mono 2.4 的 Apache 服务器。它适用于 ASP.NET MVC，甚至适用于 SQL Server (<= 2005)。希望有一天，我们会看到它与 Xamp 或 EasyPHP 的未来版本打包在一起 :) 这将使每个好奇的人都可以尝试一下。

            回答 #6

赞同：0

时间：2009-05-11T12:06:58.243

确保在 IIS 管理器中将每个应用程序的根文件夹设置为不同的 Web 应用程序。

            回答 #7

赞同：0

时间：2009-05-15T03:58:52.827

我遇到了这篇文章，它应该为您提供一种简单而干净的方法（使用子域）：http:
 [//blogs.securancy.com/post/ASPNET-MVC-Subdomain-Routing.aspx](http://blogs.securancy.com/post/ASPNET-MVC-Subdomain-Routing.aspx)

        java - Android上的图片保存在哪里？

ID：847664

赞同：33

时间：2009-05-11T11:18:17.220

标签：java, android, media, image

我的应用程序使用了相当多的图片，这些图片是从互联网上下载并缓存在 Android 手机本地的。我想知道，保存这些图片的正确方法是什么。我看到了几种方式，并不完全令人满意。

将它们保存在公共文件夹中的 SD 卡上

*   使用卸载时不会释放的空间
*   用户可以在图库中查看图片
*   需要 sdcard 根目录上的文件夹（您实际上可以在浏览手机时看到它）

将它们保存在 SD 卡上的非公共文件夹中

*   使用卸载时不会释放的空间
*   偷偷使用 SD 卡上的空间

将它们保存在应用程序中

*   过度扩大应用程序大小

在本地保存我的应用程序图像的正确方法是什么，不会分散用户的注意力，也不会在任何地方留下垃圾？

            回答 #1

赞同：31

时间：2011-05-09T12:47:53.850

您最好的解决方案是使用：

```
context.getCacheDir() 
```

该目录是应用程序私有的，将在卸载时删除，此外，如果设备空间不足，系统可以从该目录中删除。

请注意，文档说：

您不应依赖系统为您删除这些文件；对于缓存文件消耗的空间量，您应该始终有一个合理的最大值，例如 1 MB，并在超过该空间时修剪这些文件

如果您需要大量空间并且宁愿使用 SD 卡，您可以致电

```
getExternalCacheDir() 
```

反而。这些文件也会在卸载时被删除，但系统不会监控外部存储中的可用空间，因此如果空间不足，不会自动删除这些文件。如果使用此选项，您还应该检查外部存储是否可用

```
Environment.getExternalStorageState() 
```

在尝试写入之前。

            回答 #2

赞同：11

时间：2010-02-25T12:49:15.557

如果将 MediaScanner 中的图像[放在隐藏目录中](http://groups.google.com/group/android-discuss/browse_thread/thread/cc0e81735392df8f/5a60a54ae9749d72)（即，以点为前缀），例如`/sdcard/.donotscan/`.

更新：正如[romainguy 在 twitter 上提到的，](http://twitter.com/#!/romainguy/status/63828545704701952)如果您将一个名为的文件`.nomedia`放入目录中，这也可以工作。

            回答 #3

赞同：6

时间：2009-05-12T08:30:06.797

我认为最好的方法是使用数据库。

1.  它不会炸毁应用程序和内存。
2.  卸载应用程序后，相关数据库将被删除。
3.  除了您的应用程序之外，没有人可以访问此文件。

更新：但是；如果你只想缓存数据，webkit 中定义了一个缓存管理器。[缓存管理器](http://developer.android.com/reference/android/webkit/CacheManager.html)

我以前没有使用过这个包，但这些方法似乎很容易使用：

```
static boolean   cacheDisabled()
static boolean   endCacheTransaction()
static CacheManager.CacheResult  getCacheFile(String url, Map<String, String> headers)
static File  getCacheFileBaseDir()
static void  saveCacheFile(String url, CacheManager.CacheResult cacheRet)
static boolean   startCacheTransaction() 
```

[您可以在Google Gears 代码](http://tinyurl.com/pxuzym)中找到用法

我希望这有帮助。

            回答 #4

赞同：0

时间：2009-05-17T02:17:45.703

如果您不想使用 CacheManager，请使用数据库或本地（非 SD）文件（本地文件在完全卸载时被删除）并注册以接收“ACTION_DEVICE_STORAGE_LOW”和“ACTION_DEVICE_STORAGE_OK”广播操作。然后你会知道你的应用程序何时根据设备占用过多空间以及何时需要开始删除图片。您的应用程序大小仍会增长，但您将能够管理增长和收缩。

            回答 #5

赞同：-1

时间：2009-05-17T02:28:11.060

只是一个提示 - 如果您将它们保存在 SD 卡上，它们将被 MediaScanner 扫描并出现在您可能不想要的用户的图库（照片）中。因此，您可能希望将它们存储在手机上，或者以某种方式告诉 MediaScanner 不要扫描它们（在快速的 Google 搜索之后显然不可能。）

可能最好将选择的几个存储在应用程序的私有目录中，当您的应用程序被删除时，这些目录将被删除已卸载。

        c# - Winforms 中的可视化树形图

ID：847666

赞同：9

时间：2009-05-11T11:18:33.680

标签：c#, winforms, data-visualization, treemap

有没有在 C# 2.0 WinForms 中构建方形树形图的框架？

与此类似的东西：

![](https://www.codeproject.com/KB/recipes/treemaps/smartmoney2.gif)

（来自[http://www.codeproject.com/KB/recipes/treemaps.aspx](http://www.codeproject.com/KB/recipes/treemaps.aspx)）

            回答 #1

赞同：3

时间：2009-05-11T12:42:53.973

微软研究院将其中之一放在一起。

不知道使用起来有多方便。

[http://research.microsoft.com/en-us/downloads/dda33e92-f0e8-4961-baaa-98160a006c27/default.aspx](http://research.microsoft.com/en-us/downloads/dda33e92-f0e8-4961-baaa-98160a006c27/default.aspx)

            回答 #2

赞同：3

时间：2009-08-06T07:30:40.330

我知道您询问过 WinForms，但我确信在搜索 WPF 树形图时有人会点击此页面。这似乎是目前最好的 WPF 免费赠品，虽然我发现了一些小问题，但它仍然相当不错：

[http://treemaps.codeplex.com/](http://treemaps.codeplex.com/)

            回答 #3

赞同：0

时间：2009-05-11T11:29:47.950

检查[Janus Grid Ex](http://www.janusys.com/controls/)应该有一个树视图...

更新：[http ://www.avizsoft.com/treemap.htm](http://www.avizsoft.com/treemap.htm)

WinChart™ - 添加树形图图表类型
[http://www.infragistics.com/dotnet/netadvantage/winforms/whatsnew20082.aspx](http://www.infragistics.com/dotnet/netadvantage/winforms/whatsnew20082.aspx)

        .net - 延迟加载 Infragistics Ultragrid

ID：847670

赞同：1

时间：2009-05-11T11:19:40.510

标签：.net, winforms, lazy-loading, infragistics, ultrawingrid

有谁知道 Infragistics UltraGrid for Windows Forms 是否支持延迟加载？如果是这样，该怎么做？

            回答 #1

赞同：1

时间：2009-05-25T09:37:10.383

是的，它可以通过 Infragistics WinForm 完成。

            回答 #2

赞同：1

时间：2015-08-12T14:08:55.560

这就是我用来延迟加载网格中数据的方法。

1.  创建一个`UltraGrid`.
2.  将其绑定到`UltraDataSource`控件。
3.  处理. [`CellDataRequested`](http://help.infragistics.com/Help/Doc/WinForms/2012.2/CLR4.0/HTML/Infragistics4.Win.UltraWinDataSource.v12.2~Infragistics.Win.UltraWinDataSource.UltraDataSource~CellDataRequested_EV.html)_ [`UltraDataSource`](http://help.infragistics.com/Help/Doc/WinForms/2012.2/CLR4.0/HTML/Infragistics4.Win.UltraWinDataSource.v12.2~Infragistics.Win.UltraWinDataSource.UltraDataSource.html)在这里，您可以输入自己的代码，以延迟加载来自外部数据源、Web 服务、数据库等的数据。

        google-maps - 谷歌地图中的邮政编码和区域

ID：847676

赞同：1

时间：2009-05-11T11:22:09.010

标签：google-maps, zipcode

提供邮政编码时，是否可以在谷歌地图中创建区域？如果可能的话，我真的很想要一些关于它的信息的链接:)

            回答 #1

赞同：3

时间：2009-05-11T19:39:23.747

在 Google 地图中实现这一点并非易事。您必须创建自己的 GPolygons 或自定义切片图层。您在评论中提到的网站有很好的例子，说明了几种不同的方法来实现这一点。

[您可以在此处](http://www.census.gov/geo/www/cob/zt_metadata.html)获取邮政编码边界数据。

        php - 在 PHP 中存储设置，以便稍后编辑

ID：847678

赞同：2

时间：2009-05-11T11:22:52.270

标签：php, xml, settings, ini

我正在编写一个能够通过 Web 界面编辑设置的 PHP 应用程序。我的意思不是让用户（实际上，它只是**管理员**）能够在文本编辑器中加载文件，而是他们使用表单进行更改，这将更改设置文件（并*做其他事情*）。

在开发的这个阶段，设置存储在一个 PHP 文件中，例如：

```
定义（'UPLOAD_DIR'，'上传/'）；
定义（'DISPLAY_NUM'，真）；
$names = array('a' => 'b','c'=>'d','e'=>'f');
```

然而，解析数组（并且它们比上面的更复杂（即多级嵌套）），似乎并不那么有趣。而且由于可以添加和删除特定设置，读取整个文件，然后再次写出所有设置，看起来也不好玩。

使用以下格式有哪些优点和缺点？（以及我错过的任何其他人）：

*   自定义 XML
*   INI（能够使用 parse_ini_file）

（由于项目的要求，*不*适合使用数据库。我知道在很多情况下，数据库会更受欢迎，只是在这种情况下不是。）

如果您无法使用数据库，并且必须存储可以使用 Web 界面进行编辑的设置，您会怎么做？

（注意：这是一个与[此](https://stackoverflow.com/questions/798654/how-to-store-configurations-for-php-app-xml-or-ini-or-db)问题不同的问题，其中设置无法更改，它一直是 PHP 文件。是的，安装程序当前确实写出了一个具有正确设置的 PHP 文件。）

            回答 #1

赞同：2

时间：2009-05-11T11:44:10.373

如果您不致力于使用 XML，您可能会考虑使用[YAML](http://yaml.org/xml.html)。我只将它与 Ruby 一起使用，但快速的[Google](http://www.google.co.uk/search?q=php+yaml&sourceid=navclient-ff&ie=UTF-8&rlz=1B3GGGL_enGB223GB223)建议有一些 PHP 支持选项。TBF，那里的链接包括一些[反对](http://www.techyouruniverse.com/software/dont-use-yaml-for-php-use-parse_ini_file)将 YAML 与 PHP 结合使用的论点，但 YMMV。

            回答 #2

赞同：1

时间：2009-05-19T12:31:31.633

好的，我没有得到任何我想要的答案。这是我所期待的。

**INI**

*   将设置存储在 INI 文件中可能适用于您希望用户手动编辑的简单设置。
*   然而，创建复杂的数组并不容易，并且需要一些心理杂技来理解哪个标题在数组的哪个级别。
*   保留字，不能在文件的任何地方使用，包括：yes、no、true 和 false，这可能有问题。
*   可以在文件中使用常量。
*   没有内置的写出 INI 文件的方法。

**XML**

*   可以使用 SimpleXML Extension，它“提供了一个非常简单且易于使用的工具集”将 XML 转换为可以使用常规方法处理的对象。
*   允许使用非常复杂的数组。
*   如果需要，可以手动编辑。
*   可以使用外部工具来验证文件的有效性。
*   许多可用于 PHP 的 XML 处理器。

**YAML**

*   [http://yaml.org/](http://yaml.org/)
*   [http://www.techyouruniverse.com/software/dont-use-yaml-for-php-use-parse%5Fini%5Ffile](http://www.techyouruniverse.com/software/dont-use-yaml-for-php-use-parse%5Fini%5Ffile)

记住：没有数据库。需要能够使用复杂的数组。

            回答 #3

赞同：0

时间：2009-05-11T11:32:21.020

我不喜欢有人可以直接访问设置的想法，因此提供一个接口来充当缓冲区、防止蓄意攻击并确保输出干净是很重要的。

考虑到这一点，服务器端格式的选择根本不重要，只要您可以正确地与它交互，所有其他问题都可以解决。

            回答 #4

赞同：0

时间：2009-05-11T11:37:20.153

我推荐一个自定义 XML 文件，这样您的配置就可以很好地扩展，并且您可以使用 PHP XML 库来访问它。

一个简单的例子：

```
<myconfig>
  <define>
    <name>UPLOAD_DIR</name>
    <value>uploads/</value>
  </define>
  <define>
    <name>DISPLAY_NUM</name>
    <value>true</value>
  </define>
  <array id="names">
    <value index="a">b</value>
    <value index="c">d</value>
    <value index="e">f</value>
  </array>
</myconfig> 
```

            回答 #5

赞同：0

时间：2009-05-11T13:46:56.710

PHP 内置了用于编辑和解析 INI 文件的函数，这些文件使用纯文本格式来存储程序设置。

*   [http://us.php.net/manual/en/function.parse-ini-file.php](http://us.php.net/manual/en/function.parse-ini-file.php)
*   [http://us.php.net/manual/en/function.parse-ini-string.php](http://us.php.net/manual/en/function.parse-ini-string.php)

            回答 #6

赞同：0

时间：2009-05-11T23:36:10.647

我使用了两步法。变量及其名称存储在数据库中，并带有一个界面，使用户能够更改它们。当他们更改它们时，文件会保存到服务器上，然后在整个应用程序中引用（这些更改也会保存回数据库）。使更新变得容易，使备份变得简单——无需备份文件，只需备份数据库。生成的文件只是格式为 $variableName = 'variablevalue'; 的 .inc 文件。

            回答 #7

赞同：0

时间：2010-04-01T05:41:45.340

为什么不是普通的php？

配置-form.php

形式`method=POST action='configure.php'`，

输入字段例如。`name='upload' value='<?php echo UPLOAD; ?>'`

一个 configure.php 文件：

```
$myfile = 'sets.php';
$fh = fopen( $myfile, 'w' );
$upload = '"/upload/"';
$txt = "define( UPLOAD, '" . $_POST['upload'] . "' );";
fwrite( $fh, $txt );
fclose( $fh ); 
```

你有它。为您创建配置文件的简单 php。

        c# - 多个更新面板

ID：847686

赞同：0

时间：2009-05-11T11:26:47.240

标签：c#, asp.net, ajax

我正在使用 1 `main update panel`，其中包含`Search criteria`和`Search button`.

在我正在使用的这个主更新面板中`4 update panels`。

这四个更新面板从不同的`4 SQL quires`. 目前我这样做了。

但我的问题是，当前页面将在获取所有 4 个更新面板后显示。

但我需要，如果一个面板获得完整记录，那么一个面板将会显示。然后下一个归档面板.... 像这样。

请帮我。

            回答 #1

赞同：0

时间：2009-05-11T12:04:02.403

这个问题不清楚，但是你可以在你使用的每个DataSourceControls的Selected事件中检查四个查询的结果（我想你是这样做的），如果你在上一个集合中显示的集合中找到一条记录，那么应用您的自定义调整。

一个附带问题：为什么使用 4 个更新面板，而整个 5 个面板由同一源（搜索按钮）触发？

            回答 #2

赞同：0

时间：2009-05-11T11:44:29.950

如果我理解正确，您希望内部`UpdatePanels`在外部更新时连续`UpdatePanel`更新？如果这是正确的，那么默认情况下，所有嵌套`UpdatePanels`将在更新父 UpdatePanel 时更新。

听起来最好不要使用外部`UpdatePanel`，在（内部）上`UpdatePanel 1`设置触发器以在单击搜索时进行更新，在`UpdatePanel 2`更新时设置触发器以进行更新`UpdatePanel 1`，等等。

或者，您可以实现对页面方法或 Web 服务的 AJAX 调用以填充 的内容`UpdatePanels`并取消`UpdatePanels`。

            回答 #3

赞同：0

时间：2009-05-11T11:45:19.340

Jason 我认为您的问题可能源于您将“SQL”更新面板嵌套在“搜索”更新面板中。您可能希望将它们分开并查看 AsyncPostBack 触发器，以便在您输入搜索条件后触发所有四个触发器。

        wpf - 调整标签大小

ID：847689

赞同：0

时间：2009-05-11T11:27:32.167

标签：wpf, label, resize

我在 WPF 中有一个带有很多标签的图表。这些标签上的文本是动态加载的，可能会发生变化。如果我将宽度设置为自动，那么这些标签可能会重叠，这会使文本不可读。

该图表支持多种尺寸，因此如果它变大，则条形图会重新调整大小并且有更多的文本空间。现在我想将文本调整为可用的空间。如果它变得太小，我不想再显示标签（工具提示可用，因此用户仍然可以获得所需的信息）。考虑字符串“Case 1, blah blah”，可能没有足够的空间来显示整个字符串，而只能显示第一个单词。在这种情况下，我希望字符串为“Case 1..”，其中 .. 表示工具提示中有更多信息。

我可以确定字符串可用的长度。但是我如何确定单个字母所占用的空间？当然，我也可以只调整标签的大小，但它会在任何地方切断字符串，这可能对用户没有帮助（而且看起来很丑）。

有任何想法吗？

            回答 #1

赞同：1

时间：2009-05-11T11:53:36.147

如果您可以使用 TextBlocks 而不是标签，那么它们有一个[TextTrimming](http://msdn.microsoft.com/en-us/library/system.windows.texttrimming.aspx)属性，它将为您执行此操作到最近的字符或最近的单词。

虽然您似乎对 TextTrimming 属性感到满意，但我将对其进行编辑以添加 TextBox 控件具有[GetRectFromCharacterIndex](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.getrectfromcharacterindex.aspx)方法，只要字体设置与您的标签匹配，您就可以在屏幕上找出一个或多个字符的大小。如果您想在标签中的特定位置而不是最近的字符/单词进行修剪，这可能很有用。

            回答 #2

赞同：0

时间：2009-05-11T11:41:09.557

不是 WPF 专家，但我认为您需要在代码而不是 XAML 中执行此操作。

首先获取文本可用空间的实际像素宽度。然后查看 XAML 前端使用的字符集、点间距等，并从那里计算每个字符所需的像素宽度。

您还可以查看更改字符大小以及减少标签长度。

        asp.net - 使用 VS2008 + ASP.NET，有没有办法巧妙地“发布”？

ID：847691

赞同：0

时间：2009-05-11T11:29:12.600

标签：asp.net, asp.net-mvc, visual-studio-2008, deployment, publish

聪明的意思是不要再次上传已经上传的文件（具有相同的日期、大小或校验和......）。这会很棒，因为 Publish 方法需要很多时间！

            回答 #1

赞同：1

时间：2009-05-11T11:33:01.300

如果您使用“用本地副本替换匹配的文件”选项，那么 VS 中的 FTP 发布功能应该只上传与服务器副本不同的文件。

换句话说，VS08 应该已经“聪明”地发布了您的站点。

        eclipse - OTA 中间件问题

ID：847696

赞同：0

时间：2009-05-11T11:33:01.207

标签：eclipse, java-me, mobile

通过无线方式将我的 midlet 安装到手机后，我从浏览器中获得了一个需要手动关闭的空白页面。

1.  知道如何预防吗？

2.  我读到不再需要 JAD 文件，因为所有信息都位于 JAR 中。我尝试使用 JAR 文件而不是 JAD 文件，但是浏览器首先下载它们，然后才提供安装中间件。使用 JAD，它提供先安装，恕我直言，它对用户更友好。这是预期的行为，还是可以改进并消除 JAD 的需求？

我正在使用 Eclipse MJT（以前称为 EclipseME）。

            回答 #1

赞同：1

时间：2009-05-12T09:31:23.500

JAD 文件使签名和部署应用程序变得更加容易。

我绝对不会指望所有手机都能单独从 JAR 安装应用程序。

如果没有更多信息，我可以看到安装 jad 后屏幕上会出现空白 Web 浏览器页面的 2 个原因：

*   手机固件中的错误。手机不仅不能在不启动完整的网络浏览器的情况下下载 jar，而且还会忘记关闭浏览器窗口。它发生了。

*   您的应用程序要求手机在安装后通知远程计算机。MIDP 规范中有一个标准的应用程序属性。它可能在 jad 或清单中。

        asp.net - 如何让 ASP.Net Ajax Toolkit 中的 Accordion 调整大小？

ID：847698

赞同：0

时间：2009-05-11T11:33:12.237

标签：asp.net, ajax, html, accordion, toolkit

有谁知道如何让 ASP.Net Ajax 控件工具包中的 Accordion 控件自动调整大小，以便填充它所包含的 DIV 元素，并对调整大小的元素做出反应？

谢谢！

马丁

            回答 #1

赞同：0

时间：2009-05-11T12:25:36.417

我刚刚尝试使用没有任何 CSS 的 Accordion 设置示例应用程序，并且默认情况下它实际上随着内容的增长而增长。我的猜测是您使用的 CSS 以某种方式限制了增长。例如，尝试使用 min-height 而不是 height ，看看是否可以解决它。如果这样的东西不起作用，我建议你发布你使用的 CSS。

            回答 #2

赞同：0

时间：2009-07-16T07:18:16.550

我认为您可以将其放在高度为 100% 的 div 中，并且手风琴 AutoSize="Fill" 有一个属性。希望它有效。

        php - 返回 PHP 数组名

ID：847701

赞同：7

时间：2009-05-11T11:34:54.260

标签：php, arrays

```
Array ( [kanye] => Array ( [0] => Kanya [1] => Janaye [2] => Kayne [3] => Kane [4] => Kaye ) [wst] => Array ( [0] => ST [1] => St [2] => st [3] => EST [4] => West ) )

Array
(
    [0] => Kanya
    [1] => Janaye
    [2] => Kayne
    [3] => Kane
    [4] => Kaye
)
Array
(
    [0] => ST
    [1] => St
    [2] => st
    [3] => EST
    [4] => West
) 
```

我将这两个数组放在一个数组中。顶部的数组同时保存它们，然后下面是每个单独的数组。当我显示单个数组时，如何回显它们的名称？

所以首先是kanye，然后列出内容等。

希望这是有道理的。我知道这将是一段简单的代码，但它难倒我。

            回答 #1

赞同：25

时间：2009-05-11T11:39:10.730

您可以使用[foreach](http://www.php.net/foreach)语句来获取数组的键值对：

```
$outer_arr = array('kanye' => array('Kanya', 'Janaye', 'Kayne', 'Kane'));
foreach($outer_arr as $key => $val) {
    print($key); // "kanye"
    print_r($val); // Array ( [0] => Kanya [1] => Janaye [2] => Kayne [3] => Kane )
} 
```

            回答 #2

赞同：4

时间：2009-05-11T11:53:34.900

如果您只需要获取密钥，则可以使用`array_keys`

```
$myArray = array(
    "Kanye" => array("Kane", ...)
    "West" => array("Wst", ...)
);

print_r(array_keys($myArray));
/*
array (
    0 => Kanye
    1 => West
)
*/ 
```

            回答 #3

赞同：0

时间：2009-07-24T16:25:13.677

仅在外部数组上使用 print_r 怎么样？

        java - 一个类如何访问它自己的类名？

ID：847708

赞同：2

时间：2009-05-11T11:35:49.220

标签：java

我使用一个动态生成类的java应用程序。通过 ant 脚本，将为给定的类名和类模板生成源代码。

在类的模板中，我甚至需要知道这个类的名称，才能调用该类的静态方法。

例子。该类将被命名为“VersionInfo”。然后在它的静态 main() 中，我想调用静态方法：VersionInfo.getId()。但我不知道类名。

对于静态上下文或某些实用程序类，是否有等效于“this”的对象？

            回答 #1

赞同：7

时间：2009-05-11T11:45:11.697

如果您通过 Ant 创建类，那么为什么不生成一个返回类名的静态方法 getClassName 呢？

            回答 #2

赞同：3

时间：2009-05-11T11:49:55.037

如果您的 main 方法位于同一个类中，您只需调用`getId()`main 方法即可。

            回答 #3

赞同：2

时间：2009-05-11T13:22:30.353

所以你是说它应该产生这个？

```
public class VersionInfo{ // VersionInfo class name changes, per problem description
    public static void main(){
        System.out.println(getId()); 
// but in the main within the class,we don't need the classname to call a static method
    }
    public static string getId(){
       return "what's the problem?";
    }
} 
```

描述中是否缺少某些内容，您正在通过未知的模板名称调用其他类的静态方法？

            回答 #4

赞同：1

时间：2009-05-11T11:47:42.000

有一个讨厌的解决方法：

```
public static final Class THIS_CLASS = new Object() {
  public Class getParentClass() {
    return getClass().getEnclosingClass();
  }
}.getParentClass(); 
```

            回答 #5

赞同：1

时间：2009-05-11T11:48:57.957

我不确定我是否理解。如果自己生成类`VersionInfo`，为什么不能从生成类的代码中获取类名呢？

            回答 #6

赞同：1

时间：2009-05-11T13:30:06.747

试试这个：

```
package uk.co.farwell.stack_overflow;

public class Test_847708 {
    private final static String getId() {
        return "string";
    }

    public static void main(String args[]) {
        System.out.println("getId=" + getId());
    }

} 
```

            回答 #7

赞同：0

时间：2009-05-11T11:39:19.510

您不能在静态上下文中使用键“this”。

相反，如果要动态调用静态函数，可以使用[java 反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/index.html)。

我无法进一步帮助您进行 java 反射，因为我从不使用它，但我已经在 .Net 中使用它，它是一个强大的工具。

            回答 #8

赞同：0

时间：2009-05-11T13:16:09.573

该问题的最简洁答案可能是使用由引用动态类名称的 ANT 脚本生成的静态已知名称创建第三个类，然后让您的主方法引用该已知类。

如果由于某种原因还不够，那么结合 Joachim Sauer 和 Melursus 的答案，获取类名，然后通过反射获取方法：

```
Method m = THIS_CLASS.getDeclaredMethod("getId", null);
Object result = m.invoke(null, null); 
```

        line - 如何在 jfreechart 中画一条直线？

ID：847713

赞同：0

时间：2009-05-11T11:38:40.293

标签：line, jfreechart

`y=m*x+n`我怎么能在 jfreechart 图表中用方程画一条直线？

            回答 #1

赞同：0

时间：2009-05-11T11:45:02.693

听起来很简单......我从来没有使用过它，但是有一个[XYPlot](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/XYPlot.html)类听起来像是一个不错的起点。您可以使用[ChartFactory](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartFactory.html#createScatterPlot%28java.lang.String,%20java.lang.String,%20java.lang.String,%20org.jfree.data.xy.XYDataset,%20org.jfree.chart.plot.PlotOrientation,%20boolean,%20boolean,%20boolean%29)创建一个，以使其更容易一些。您将需要实现一个实现[XYDataSet](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/xy/XYDataset.html)接口的类，以返回实际点（即评估您的方程式）。

        objective-c - 设计模式帮助：唯一对象池

ID：847714

赞同：1

时间：2009-05-11T11:38:41.917

标签：objective-c, design-patterns

我正在寻找一种设计模式来管理对象池。一个线程可以请求一个对象，在我的例子中是一个代表远程主机的对象。

如果主机对象不存在，则创建它，将其添加到池中并返回一个引用。

如果另一个线程或对象请求相同的（远程主机）对象，它也会被给予引用。如果请求不同的远程主机，它会被创建并添加到对象的“池”中。

一旦任何线程或对象不再需要主机对象，它就会从池中删除。

1.  有没有这种模式，它的名字是什么？
2.  我将在 Objective-C 中实现这一点，任何具体的帮助都会很有用。

            回答 #1

赞同：5

时间：2009-05-11T16:34:18.183

使用 NSMapTable 的替代方法（例如，在 iPhone 上不可用）是使用 CoreFoundation 等价物。那些可以包含常规的非保留指针。但是，您仍然需要从该列表中删除内容，但这可以在对象的 -dealloc 方法中轻松完成。

一种可能性是使用 CFSet。这将要求您的对象都响应`-isEqual:`并`-hash`正确响应，以便集合可以确定对象是否已经准确存在。

例如（请注意，我没有编译这个，但它应该至少 90% 正确）：

```
static id __uniqueObjects = nil;    // GC uses NSHashTable, non-GC uses NSSet (inited using CFSet APIs)

@interface MyHost : NSObject
{
    NSURL * _hostURL;
}

@property (nonatomic, readonly) NSURL * hostURL;

+ (MyHost *) uniqueHost: (MyHost *) aHost;
+ (void) removeUniqueHost: (MyHost *) aHost;     // only used in non-GC environment

- (id) initWithURL: (NSURL *) hostURL;

@end

@implementation MyHost

- (id) initWithURL: (NSURL *) hostURL
{
    self = [super init];
    if ( self == nil )
        return ( nil );

    // use copy, because NSURL implements NSCopying protocol
    _hostURL = [hostURL copy];

    // if there's a version around already, release this instance
    MyHost * result = [[self class] uniqueHost: self];
    if ( result != self )
    {
        // set _hostURL to nil so we don't inadvertently remove anything from uniqueing table in -dealloc
        [_hostURL release];
        _hostURL = nil;
        [self release];
    }

    // return either self or a pre-existing unique instance
    return ( result );
}

- (void) dealloc
{
    // non-GC objects need to explicitly remove themselves from the uniqueing table
    [[self class] removeUniqueHost: self];
    [_hostURL release];
    [super dealloc];
}

// no need for -finalize -- under GC we use NSHashTable with weak references

- (NSUInteger) hash
{
    return ( [_hostURL hash] );
}

- (BOOL) isEqual: (MyHost *) other
{
    if ( other == self )
        return ( YES );

    return ( [_hostURL isEqual: other->_hostURL] );
}

+ (MyHost *) uniqueHost: (MyHost *) aHost
{
    if ( __uniqueObjects == nil )
    {
        // use low-level routine to check, because iPhone has no NSGarbageCollector class
        // we use NSHashTable or NSMutableSet, because they both respond to the same messages (NSHashTable is modeled on NSMutableSet)
        if ( objc_collectingEnabled() )
        {
            // hash table has zeroing weak memory, object equality (uses -isEqual:), and does NOT copy objects, just retains them
            __uniqueObjects = [[NSHashTable hashTableWithWeakObjects] retain];
        }
        else
        {
            CFSetCallBacks cb = {
                0,                  // version
                NULL,               // retain (non-retaining references)
                NULL,               // release (non-retaining references)
                CFCopyDescription,  // CF (plain C function) equivalent for -description
                CFEqual,            // CF (plain C function) equivalent for -isEqual:
                CFHash              // CF (plain C function) equivalent for -hash
            }
            __uniqueObjects = (NSMutableSet *) CFSetCreateMutable( kCFAllocatorDefault, 0, &cb );
        }
    }

    MyHost * result = nil;
    @synchronized(__uniqueObjects)
    {
        // treat both like an NSMutableSet & we're golden
        // we use the -member: function to get an existing matching object from the collection
        result = [[__uniqueObjects member: aHost] retain];
        if ( result == nil )
        {
            // store & return the passed-in host object
            [__uniqueObjects addObject: aHost];
            result = aHost;
        }
    }

    return ( result );
}

+ (void) removeUniqueHost: (MyHost *) aHost
{
    if ( __uniqueObjects == nil )
        return;     // shouldn't ever happen, but it's a good idea to check at least

    @synchronized(__uniqueObjects)
    {
        [__uniqueObjects removeObject: aHost];
    }
}

@end 
```

希望我已经在这里提供了足够的内容来回答您可能对这种设计模式有任何疑问/想法。

            回答 #2

赞同：1

时间：2009-05-11T11:56:00.663

我认为，这里最好的解决方案是 Multiton（它类似于具有 1 对 1 映射的 Map，[http](http://en.wikipedia.org/wiki/Multiton_pattern) ://en.wikipedia.org/wiki/Multiton_pattern ）。

它将有 2 种方法 - getHost (String hostIdentifier) 和 returnHost (String hostIdentifier)。

对于每个主机，它都应该有一个计数器。如果 counter == 0 并且调用 getHost 方法，那么您应该创建所需主机的新实例并增加计数器。

如果 counter == 1 并且调用了 returnHost，那么您应该删除主机实例并减少计数器。

您还应该考虑线程安全。

            回答 #3

赞同：1

时间：2009-05-11T12:36:28.310

我通常会用 + (id)hostWithIdentifier:(id)someIdentifier; 之类的东西来实现这种模式。方法（在已知的情况下替换更好的类型），它使用 NSMapTable 来跟踪具有弱引用的项目。如果没有找到给定标识符的实例，它将分配它并将其放入表中。

请注意，如果您不使用 GC，则需要在主机对象的 -dealloc 方法中清除 NSMapTable 中的条目。

另请注意，正如其他人所说，如果这是多线程代码，您需要小心。使用某种锁定机制。

            回答 #4

赞同：0

时间：2009-05-11T11:45:26.843

1.简单[的“对象池”](http://en.wikipedia.org/wiki/Object_pool)怎么样？

2.[看看](http://www.mulle-kybernetik.com/artikel/Optimization/opti-5.html)我不是objective-c devlopper，虽然

            回答 #5

赞同：0

时间：2009-05-11T13:05:48.367

听起来每个单独的主机对象都是单例模式。你能保留一个单独的单身人士的集合吗？

        c++ - 如何识别库是 DEBUG 还是 RELEASE 构建？

ID：847721

赞同：7

时间：2009-05-11T11:41:13.033

标签：c++

我们的项目使用许多静态库来构建应用程序。我们如何确保我们在应用程序的发布版本中使用发布版本的库？

我们通过在发布应用程序构建中使用调试库来犯错误。

我正在寻找一种优雅的方式来编写模块，以便我们可以检查特定库是发布还是调试，如果不匹配则报告它。我们的应用程序是用 C/C++ 编写的。（平台 MSVC 和 GCC）

            回答 #1

赞同：4

时间：2009-05-11T13:02:20.153

是的。您可以检查文件结构的`Characteristics`字段。`IMAGE_FILE_HEADER`如果库是发布版本，则将`DEBUG_STRIPPED`设置位 0x0200 ( )；在调试版本中，它会很清楚。

您可以在网络上的各个地方（例如[此处](http://www.csn.ul.ie/~caolan/publink/winresdump/winresdump/doc/pefile.html)）找到有关 Windows EXE 和 DLL 使用的 PE 格式的技术信息，以了解如何检索该结构。

            回答 #2

赞同：2

时间：2009-05-11T11:46:44.327

您不能使用命名约定（即`foo_rel.a`和`foo_dbg.a`）解决这个问题吗？

            回答 #3

赞同：2

时间：2009-05-11T14:10:43.087

有一个返回库版本的简单函数怎么样？根据您正在调试或发布的构建返回不同的内容。在您的应用程序开始时调用该函数并报告错误。

            回答 #4

赞同：1

时间：2009-05-11T11:52:41.437

通常的方法是给库赋予不同的名称或将它们存储在不同的目录中，例如 Debug 和 Release。如果你的构建是正确自动化的，我看不出你怎么会犯错误。

            回答 #5

赞同：1

时间：2009-05-11T12:22:13.523

抛开命名约定不谈，如果您使用的是类 unix 系统，您可能可以解析以下输出：

```
objdump -g mylib.a 
```

如果您只得到空行或以目标文件名开头的行，那么您在库中没有调试信息。

请注意，这通常并不意味着该库是“发布”或“调试”，但在您的情况下*可能*意味着它。

            回答 #6

赞同：0

时间：2009-05-11T11:50:47.777

通常人们会使用稍微不同的名称来区分版本。例如，在调试版本下，所有库在其扩展名之前都以字符“d”为后缀。前任。`commonUtilsd.lib`在发布模式下也是如此`commonUtils.lib`。恕我直言，这种方法更简单，更清洁。在 MSVC 中使用可以在下指定输出文件名

```
Librarian-->General-->Output File 
```

另一个建议是将这些输出文件放在配置目录中。即在Debug 文件夹中有debug-version，在Release 文件夹下有release-versions。同样在 MSVC 下，这通常可以使用 $(ConfigurationName) IDE 宏来完成。并在构建期间在查找目录中附加正确的路径。

            回答 #7

赞同：0

时间：2017-03-17T14:09:12.287

我使用并成功测试了这段代码：

```
using System.Diagnostics;

FileVersionInfo fvi = FileVersionInfo.GetVersionInfo(fileName);
return fvi.IsDebug; 
```

        bash - 脚本文件与命令行：rsync 和 --exclude

ID：847724

赞同：8

时间：2009-05-11T11:43:20.000

标签：bash, rsync

我有一个简单的测试 bash 脚本，如下所示：

```
#!/bin/bash

cmd="rsync -rv --exclude '*~' ./dir ./new"
$cmd # execute command 
```

当我运行脚本时，它也会复制以 a 结尾的文件，`~`即使我打算排除它们。当我直接从命令行运行相同的 rsync 命令时，它可以工作！有人知道为什么以及如何使 bash 脚本工作吗？

顺便说一句，我知道我也可以使用，`--exclude-from`但我想知道它是如何工作的。

            回答 #1

赞同：6

时间：2009-05-11T13:21:48.000

尝试**评估**：

```
#!/bin/bash

cmd="rsync -rv --exclude '*~' ./dir ./new"
eval $cmd # execute command 
```

            回答 #2

赞同：5

时间：2009-05-11T21:03:34.187

问题不在于您在脚本中运行它，而在于您将命令放入变量中，然后运行扩展变量。而且由于在引号删除完成后会发生变量扩展，因此您的排除模式周围的单引号永远不会被删除......因此 rsync 最终会排除名称以'开头并以〜'结尾的文件。要解决此问题，只需删除模式周围的引号（整个内容已经在双引号中，因此不需要它们）：

```
#!/bin/bash

cmd="rsync -rv --exclude *~ ./dir ./new"
$cmd # execute command 
```

...说到这，为什么在运行命令之前将命令放入变量中？一般来说，这是一种让代码比它需要的更混乱的好方法，并触发解析异常（有些甚至比这更奇怪）。那么怎么样：

```
#!/bin/bash

rsync -rv --exclude '*~' ./dir ./new 
```

            回答 #3

赞同：0

时间：2009-05-11T11:56:56.417

您可以使用简单`--eclude '~'`的 as（根据手册页）：

*   如果模式以 / 开头，则它被锚定到文件层次结构中的特定位置，否则它与路径名的末尾匹配。这类似于正则表达式中的前导 ^。因此，“/foo”将在“传输根”（对于全局规则）或合并文件的目录（对于每个目录规则）中匹配名称“foo”。不合格的“foo”将匹配树中任何位置的“foo”名称，因为该算法是自上而下递归应用的；它的行为就像每个路径组件在文件名的末尾都有一个转折。即使是未锚定的“sub/foo”也会匹配层次结构中在名为“sub”的目录中找到“foo”的任何点。

*   如果模式以 / 结尾，那么它将只匹配目录，而不是常规文件、符号链接或设备。

*   rsync 通过检查模式是否包含以下三个通配符之一来选择进行简单的字符串匹配和通配符匹配：'*'、'?' 和 '['。

*   '*' 匹配任何路径组件，但它在斜杠处停止。

*   使用 '**' 匹配任何内容，包括斜线。

        javascript - Greasemonkey 脚本在非活动标签上暂停视频播放

ID：847727

赞同：1

时间：2009-05-11T11:44:13.260

标签：javascript, firefox, greasemonkey

通常在 Firefox 中浏览时，我会右键单击一个链接，然后在单独的选项卡中打开它以便稍后查看，然后继续阅读当前页面。但是，当链接是 Youtube 脚本时，即使选项卡未处于活动状态，也会立即开始播放。在您激活该选项卡之前，其他视频播放器（如 fora.tv 和 TED.com）不会开始播放。

是否有一个[greasemonkey](https://addons.mozilla.org/en-US/firefox/addon/748)脚本可以用来确保视频（尤其是Youtube视频）被暂停，除非他们的标签处于活动状态？

            回答 #1

赞同：2

时间：2009-05-13T14:13:52.093

我找到了两个选择：

“Youtube 备用视频播放器”（greasemonkey 脚本）
 [http://userscripts.org/scripts/show/13955](http://userscripts.org/scripts/show/13955)

脚本摘要：将 youtube flash 视频播放器替换为 FlowPlayer flash 视频播放器。

*   取代 youtube 播放器
*   没有高清
*   没有 16:9

Firefox 附加组件“TubeStop”
 [http://www.chrisfinke.com/addons/tubestop/](http://www.chrisfinke.com/addons/tubestop/)

*   禁用 YouTube 视频的自动播放
*   每次都这样做（即使选项卡处于活动状态）

我将暂时保留 TubeStop 插件。

            回答 #2

赞同：0

时间：2016-11-14T00:48:45.620

我认为 Youtube 现在默认执行此操作（仅在激活视频所在的选项卡时播放视频）

        graphics - 如何绘制在 wxPython 中旋转的位图？

ID：847728

赞同：2

时间：2009-05-11T11:44:17.283

标签：graphics, wxpython

如何将位图绘制到 DC，同时将其旋转指定角度？

            回答 #1

赞同：2

时间：2009-05-11T12:24:46.623

[我不确定这是不是最好的方法，但一种选择是使用ConvertToImage](http://www.wxpython.org/docs/api/wx.Bitmap-class.html#ConvertToImage)将其转换为 wx.Image （[wxWidgets 帮助](http://docs.wxwidgets.org/stable/wx_wxbitmap.html#wxbitmapconverttoimage)），然后使用[旋转](http://www.wxpython.org/docs/api/wx.Image-class.html#Rotate)功能（[wxWidgets 帮助](http://docs.wxwidgets.org/stable/wx_wximage.html#wximagerotate)）。然后，您可以（如有必要）使用[ConvertToBitmap](http://www.wxpython.org/docs/api/wx.Image-class.html#ConvertToBitmap)（[wxWidgets 帮助](http://docs.wxwidgets.org/stable/wx_wximage.html#wximageconverttobitmap)）将其转换回来。

我看不到可用于将[坐标变换](http://en.wikipedia.org/wiki/Rotation_matrix)应用于绘图上下文 (DC) 的明显函数，但在某处可能有一个函数......

希望有帮助。

            回答 #2

赞同：2

时间：2009-05-11T12:52:23.077

我同意 Al - 他应该得到答案，但是这个（诚然未经测试的）代码片段应该满足您的要求：

```
def write_bmp_to_dc_rotated( dc, bitmap, angle ):
    '''
    Rotate a bitmap and write it to the supplied device context.
    '''
    img = bitmap.ConvertToImage()
    img_centre = wx.Point( img.GetWidth()/2, img.GetHeight()/2 )
    img = img.Rotate( angle, img_centre )
    dc.WriteBitmap( img.ConvertToBitmap(), 0, 0 ) 
```

[文档](http://docs.wxwidgets.org/2.6/wx_wxbitmapoverview.html#wxbitmapoverview)中需要注意的一件事：

...使用 wxImage 是在 wxWidgets 中加载图像的首选方式，资源除外...

将其加载为位图而不是 wx.Image 是否有特殊原因？

            回答 #3

赞同：2

时间：2009-05-17T04:41:08.077

如果您想要通用旋转，例如旋转位图或文本或任何其他绘图路径，更好的方法是使用图形上下文

```
gc = wx.GCDC(dc)
gc.Rotate(angle)
gc.DrawText("anurag", 100, 100) 
```

        flash - ActionScript 2.0 中的动态对齐

ID：847737

赞同：0

时间：2009-05-11T11:45:27.403

标签：flash, actionscript, actionscript-2

我希望能够按一个按钮并获得一组连续排列的电影剪辑，我该怎么做？

            回答 #1

赞同：0

时间：2009-05-11T12:49:25.473

嗯，这确实是一个普遍的问题。我想您将 AS 代码放在框架内。如果是这种情况，您应该拥有所有可用的 MovieClips 名称。因此，如果我们假设您已经有一组您想要对齐的剪辑：

```
var desiredRowYposition = 100;
buttonMc.onClick = function() {
   for (var mc in mcCollection) {
       mcCollection[mc]._y = desiredRowYposition;
   }
} 
```

        c# - 为每个用户自定义 DataGridView

ID：847749

赞同：0

时间：2009-05-11T11:48:22.950

标签：c#, winforms, .net-2.0

我在 2.0 中有一个使用 DataGridView 的 Windows 窗体应用程序。我们有一个新的要求来自定义每个用户的 DataGridView，即需要显示哪些列，列的顺序和列大小将由用户存储在模板中。该模板将针对用户存储在数据库中。当用户启动表单时，他应该根据他定义的模板看到数据网格视图。

因此，用户 A 将按名称年龄职业顺序看到数据网格列，而用户 B 将看到职业工资名称列

我想知道实现这一目标的最佳方法是什么？

            回答 #1

赞同：0

时间：2009-05-11T13:11:47.900

如果您知道有多少列：

1.  创建以用户 ID 为键的表。

    一个。表一 - 每列的布尔值（应该显示）。

    湾。表二 - 具有相对排序的每一列的 int。

    C。表三 - 每个列宽的 int

2.  检索用户偏好并相应地设置列可见、排序和宽度。

3.  保存对退出事件首选项的更改。

        sql - 如何使这个语句更快：“paramDate between startDate and NULL”？

ID：847750

赞同：2

时间：2009-05-11T11:48:48.503

标签：sql, sql-server, tsql, between

当 endDate 为空时，此查询需要很长时间（我认为它是关于 case 语句，在 case 语句之前它很快）

```
SELECT * 
FROM HastaKurumlari
WHERE CONVERT(SMALLDATETIME,'21-05-2009',103) 
BETWEEN startDate 
    AND (CASE WHEN endDate IS NULL THEN GETDATE() ELSE endDate END) 
```

当 endDate 为 null 以使其更快时，我应该使用什么？

            回答 #1

赞同：1

时间：2009-05-11T11:50:46.513

您可以尝试[合并](http://doc.ddart.net/mssql/sql70/ca-co_8.htm)功能：

```
select * 
from HastaKurumlari
where convert(smalldatetime, '21-05-2009', 103) 
    between startDate and coalesce(endDate, getdate()); 
```

唯一可以确定的方法是尝试任何替代方案并查看为每个查询生成的执行计划。

            回答 #2

赞同：1

时间：2009-05-11T11:51:30.710

如果它对性能至关重要，那么也许只是不要`null`用于开放结束日期 - 使用最大支持的日期时间（可能很多 9s）。

我也会单独进行转换：

```
DECLARE @when datetime
SET @when = CONVERT(SMALLDATETIME,'21-05-2009',103) 

SELECT * 
  FROM HastaKurumlari
WHERE @when
BETWEEN startDate AND endDate 
```

上面的内容和您的原始内容仍有一些不同；如果您能解释检查的*意图*，`GETDATE()`我可能会稍微整理（阅读：修复）它。

            回答 #3

赞同：1

时间：2009-05-11T12:06:37.997

这是没有 CONVERT 或 CASE 的查询：

```
SELECT * 
FROM HastaKurumlari
WHERE '21-05-2009' between startDate and IsNull(endDate,getdate()) 
```

为了确保 Sql Server 不会为每一行评估 getdate()，您可以缓存它，尽管我很确定 Sql Server 默认情况下足够智能：

```
declare @now datetime
set @now = getdate()

SELECT * 
FROM HastaKurumlari
WHERE '21-05-2009' between startDate and IsNull(endDate,@now) 
```

发布查询计划可以帮助解释查询缓慢的原因：

```
SET SHOWPLAN_TEXT ON
go
SELECT * 
FROM HastaKurumlari
WHERE CONVERT(SMALLDATETIME,'21-05-2009',103) 
BETWEEN startDate 
    AND (CASE WHEN endDate IS NULL THEN GETDATE() ELSE endDate END) 
```

            回答 #4

赞同：1

时间：2009-05-11T12:14:46.960

作为起点，将 GETDATE() 分解为只调用一次，您应该会看到速度有所提高。

您编写它的方式是在每次 enddate 为空时要求对 GETDATE() 进行评估。

由于 GETDATE() 是一个[非确定性](http://msdn.microsoft.com/en-us/library/aa214775(SQL.80).aspx)函数，因此无法优化查询，并且往往会表现不佳。

        c# - .NET WPF 记住会话之间的窗口大小

ID：847752

赞同：100

时间：2009-05-11T11:49:37.687

标签：c#, .net, wpf, windows

基本上，当用户调整我的应用程序窗口的大小时，我希望应用程序在再次重新打开时应用程序的大小相同。

起初我虽然处理 SizeChanged 事件并保存高度和宽度，但我认为必须有更简单的解决方案。

很简单的问题，但我找不到简单的解决方案。

            回答 #1

赞同：126

时间：2009-05-11T11:51:22.550

将值保存在 user.config 文件中。

您需要在设置文件中创建值 - 它应该在属性文件夹中。创造五个价值：

*   `Top`类型`double`
*   `Left`类型`double`
*   `Height`类型`double`
*   `Width`类型`double`
*   `Maximized`类型`bool`- 保存窗口是否最大化。如果您想存储更多信息，则需要不同的类型或结构。

将前两个初始化为 0，将后两个初始化为应用程序的默认大小，最后一个初始化为 false。

创建一个 Window_OnSourceInitialized 事件处理程序并添加以下内容：

```
this.Top = Properties.Settings.Default.Top;
this.Left = Properties.Settings.Default.Left;
this.Height = Properties.Settings.Default.Height;
this.Width = Properties.Settings.Default.Width;
// Very quick and dirty - but it does the job
if (Properties.Settings.Default.Maximized)
{
    WindowState = WindowState.Maximized;
} 
```

**注意：**设置的窗口放置需要进入窗口的源初始化事件而不是构造函数，否则如果您在第二个监视器上最大化窗口，它将始终在主监视器上重新启动最大化并且您将无法访问它。

创建一个 Window_Closing 事件处理程序并添加以下内容：

```
if (WindowState == WindowState.Maximized)
{
    // Use the RestoreBounds as the current values will be 0, 0 and the size of the screen
    Properties.Settings.Default.Top = RestoreBounds.Top;
    Properties.Settings.Default.Left = RestoreBounds.Left;
    Properties.Settings.Default.Height = RestoreBounds.Height;
    Properties.Settings.Default.Width = RestoreBounds.Width;
    Properties.Settings.Default.Maximized = true;
}
else
{
    Properties.Settings.Default.Top = this.Top;
    Properties.Settings.Default.Left = this.Left;
    Properties.Settings.Default.Height = this.Height;
    Properties.Settings.Default.Width = this.Width;
    Properties.Settings.Default.Maximized = false;
}

Properties.Settings.Default.Save(); 
```

如果用户在应用程序关闭时缩小显示区域（通过断开屏幕或更改屏幕分辨率），这将失败，因此您应该在应用值之前添加检查所需位置和大小是否仍然有效。

            回答 #2

赞同：79

时间：2009-05-11T12:15:49.373

实际上，您不需要使用代码隐藏来执行此操作（保存设置除外）。您可以使用自定义标记扩展将窗口大小和位置绑定到如下设置：

```
<Window x:Class="WpfApplication1.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:my="clr-namespace:WpfApplication1"
        Title="Window1"
        Height="{my:SettingBinding Height}"
        Width="{my:SettingBinding Width}"
        Left="{my:SettingBinding Left}"
        Top="{my:SettingBinding Top}"> 
```

您可以在此处找到此标记扩展的代码：
 [http ://www.thomaslevesque.com/2008/11/18/wpf-binding-to-application-settings-using-a-markup-extension/](http://www.thomaslevesque.com/2008/11/18/wpf-binding-to-application-settings-using-a-markup-extension/)

            回答 #3

赞同：36

时间：2009-05-11T13:31:07.383

虽然您可以“自己动手”并在某处手动保存设置，并且通常它会起作用，但很容易无法正确处理所有情况。通过在退出时调用[GetWindowPlacement()](http://msdn.microsoft.com/en-us/library/ms633518(VS.85).aspx)并在启动时调用[SetWindowPlacement()](http://msdn.microsoft.com/en-us/library/ms633544(VS.85).aspx)让操作系统为您完成工作要好得多。它处理所有可能发生的疯狂边缘情况（多个监视器，如果窗口在最大化时关闭，则保存窗口的正常大小等），因此您不必这样做。

[此 MSDN 示例](http://msdn.microsoft.com/en-us/library/aa972163.aspx)展示了如何将这些与 WPF 应用程序一起使用。该示例并不完美（第一次运行时窗口会从左上角开始尽可能小，设置设计器保存 type 值时会出现一些奇怪的行为`WINDOWPLACEMENT`），但它至少应该让您入门。

            回答 #4

赞同：30

时间：2011-05-05T02:27:35.587

Thomas 在上面发布的“长格式”绑定几乎不需要编码，只需确保您具有命名空间绑定：

```
<Window x:Class="WpfApplication1.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:p="clr-namespace:WpfApplication1.Properties"
        Title="Window1"
        Height="{Binding Source={x:Static p:Settings.Default}, Path=Height, Mode=TwoWay}"
        Width="{Binding Source={x:Static p:Settings.Default}, Path=Width, Mode=TwoWay}"
        Left="{Binding Source={x:Static p:Settings.Default}, Path=Left, Mode=TwoWay}"
        Top="{Binding Source={x:Static p:Settings.Default}, Path=Top, Mode=TwoWay}"> 
```

然后保存代码隐藏：

```
private void frmMain_Closed(object sender, EventArgs e)
{
    Properties.Settings.Default.Save();
} 
```

            回答 #5

赞同：5

时间：2012-04-22T20:38:37.723

或者，您可能也喜欢以下方法（[请参阅源代码](http://bloggingabout.net/blogs/erwyn/archive/2007/02/01/remembering-window-positions-in-wpf.aspx)）。将 WindowSettings 类添加到您的项目并插入`WindowSettings.Save="True"`主窗口的标题中：

```
<Window x:Class="YOURPROJECT.Views.ShellView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Services="clr-namespace:YOURNAMESPACE.Services" 
    Services:WindowSettings.Save="True"> 
```

其中 WindowSettings 定义如下：

```
using System;
using System.ComponentModel;
using System.Configuration;
using System.Windows;

namespace YOURNAMESPACE.Services
{
/// <summary>
///   Persists a Window's Size, Location and WindowState to UserScopeSettings
/// </summary>
public class WindowSettings
{
    #region Fields

    /// <summary>
    ///   Register the "Save" attached property and the "OnSaveInvalidated" callback
    /// </summary>
    public static readonly DependencyProperty SaveProperty = DependencyProperty.RegisterAttached("Save", typeof (bool), typeof (WindowSettings), new FrameworkPropertyMetadata(OnSaveInvalidated));

    private readonly Window mWindow;

    private WindowApplicationSettings mWindowApplicationSettings;

    #endregion Fields

    #region Constructors

    public WindowSettings(Window pWindow) { mWindow = pWindow; }

    #endregion Constructors

    #region Properties

    [Browsable(false)] public WindowApplicationSettings Settings {
        get {
            if (mWindowApplicationSettings == null) mWindowApplicationSettings = CreateWindowApplicationSettingsInstance();
            return mWindowApplicationSettings;
        }
    }

    #endregion Properties

    #region Methods

    public static void SetSave(DependencyObject pDependencyObject, bool pEnabled) { pDependencyObject.SetValue(SaveProperty, pEnabled); }

    protected virtual WindowApplicationSettings CreateWindowApplicationSettingsInstance() { return new WindowApplicationSettings(this); }

    /// <summary>
    ///   Load the Window Size Location and State from the settings object
    /// </summary>
    protected virtual void LoadWindowState() {
        Settings.Reload();
        if (Settings.Location != Rect.Empty) {
            mWindow.Left = Settings.Location.Left;
            mWindow.Top = Settings.Location.Top;
            mWindow.Width = Settings.Location.Width;
            mWindow.Height = Settings.Location.Height;
        }
        if (Settings.WindowState != WindowState.Maximized) mWindow.WindowState = Settings.WindowState;
    }

    /// <summary>
    ///   Save the Window Size, Location and State to the settings object
    /// </summary>
    protected virtual void SaveWindowState() {
        Settings.WindowState = mWindow.WindowState;
        Settings.Location = mWindow.RestoreBounds;
        Settings.Save();
    }

    /// <summary>
    ///   Called when Save is changed on an object.
    /// </summary>
    private static void OnSaveInvalidated(DependencyObject pDependencyObject, DependencyPropertyChangedEventArgs pDependencyPropertyChangedEventArgs) {
        var window = pDependencyObject as Window;
        if (window != null)
            if ((bool) pDependencyPropertyChangedEventArgs.NewValue) {
                var settings = new WindowSettings(window);
                settings.Attach();
            }
    }

    private void Attach() {
        if (mWindow != null) {
            mWindow.Closing += WindowClosing;
            mWindow.Initialized += WindowInitialized;
            mWindow.Loaded += WindowLoaded;
        }
    }

    private void WindowClosing(object pSender, CancelEventArgs pCancelEventArgs) { SaveWindowState(); }

    private void WindowInitialized(object pSender, EventArgs pEventArgs) { LoadWindowState(); }

    private void WindowLoaded(object pSender, RoutedEventArgs pRoutedEventArgs) { if (Settings.WindowState == WindowState.Maximized) mWindow.WindowState = Settings.WindowState; }

    #endregion Methods

    #region Nested Types

    public class WindowApplicationSettings : ApplicationSettingsBase
    {
        #region Constructors

        public WindowApplicationSettings(WindowSettings pWindowSettings) { }

        #endregion Constructors

        #region Properties

        [UserScopedSetting] public Rect Location {
            get {
                if (this["Location"] != null) return ((Rect) this["Location"]);
                return Rect.Empty;
            }
            set { this["Location"] = value; }
        }

        [UserScopedSetting] public WindowState WindowState {
            get {
                if (this["WindowState"] != null) return (WindowState) this["WindowState"];
                return WindowState.Normal;
            }
            set { this["WindowState"] = value; }
        }

        #endregion Properties
    }

    #endregion Nested Types
}
} 
```

            回答 #6

赞同：3

时间：2017-10-21T09:25:03.670

 在[github](https://github.com/Boredbone/RestoreWindowPlace)上有一个[NuGet Project RestoreWindowPlace](https://www.nuget.org/packages/RestoreWindowPlace)可以为您完成所有这些工作，并将信息保存在 XML 文件中。

要让它在窗口上工作，它就像调用一样简单：

`((App)Application.Current).WindowPlace.Register(this);`

在 App 中，您创建管理窗口的类。有关更多信息，请参阅上面的 github 链接。

            回答 #7

赞同：2

时间：2016-06-09T15:05:29.947

解决它的默认方法是使用设置文件。设置文件的问题是您必须自己定义所有设置并编写来回复制数据的代码。如果您有很多属性要跟踪，那就太乏味了。

我为此制作了一个非常灵活且非常易于使用的库，您只需告诉它要跟踪哪个对象的哪些属性，剩下的就交给它了。如果你愿意，你也可以配置它的废话。

该库称为**[Jot (github)](https://github.com/anakic/Jot)** ，这是我写的一篇关于它的旧[CodeProject 文章。](http://www.codeproject.com/Articles/475498/Easier-NET-settings)

以下是您如何使用它来跟踪窗口的大小和位置：

```
public MainWindow()
{
    InitializeComponent();

    _stateTracker.Configure(this)
        .IdentifyAs("MyMainWindow")
        .AddProperties(nameof(Height), nameof(Width), nameof(Left), nameof(Top), nameof(WindowState))
        .RegisterPersistTrigger(nameof(Closed))
        .Apply();
} 
```

**Jot vs. 设置文件：**使用 Jot 的代码要少得多，而且更不容易出错，因为您只需要提及每个属性**一次**。对于设置文件，您需要提及每个属性**5 次**：一次是在显式创建属性时，另外四次是在代码中来回复制值。

存储、序列化等是完全可配置的。此外，在使用 IOC 时，您甚至可以将其连接起来，以便它自动将跟踪应用于它解析的所有对象，这样您需要做的就是使属性持久化，只需在其上添加一个 [Trackable] 属性即可。

我写这一切是因为我认为图书馆是一流的，我想把它说出来。

            回答 #8

赞同：2

时间：2018-12-17T15:05:21.970

我根据 RandomEngys 出色的答案制作了一个更通用的解决方案。它将位置保存到运行文件夹中的文件中，您无需为创建的每个新窗口创建新属性。这个解决方案对我来说非常有用，代码中的代码最少。

```
using System;
using System.IO;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Text;
using System.Windows;
using System.Windows.Interop;
using System.Xml;
using System.Xml.Serialization;

namespace WindowPlacementNameSpace
{

    // RECT structure required by WINDOWPLACEMENT structure
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public struct RECT
    {
        public int Left;
        public int Top;
        public int Right;
        public int Bottom;

        public RECT(int left, int top, int right, int bottom)
        {
            this.Left = left;
            this.Top = top;
            this.Right = right;
            this.Bottom = bottom;
        }
    }

    // POINT structure required by WINDOWPLACEMENT structure
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public struct POINT
    {
        public int X;
        public int Y;

        public POINT(int x, int y)
        {
            this.X = x;
            this.Y = y;
        }
    }

    // WINDOWPLACEMENT stores the position, size, and state of a window
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public struct WINDOWPLACEMENT
    {
        public int length;
        public int flags;
        public int showCmd;
        public POINT minPosition;
        public POINT maxPosition;
        public RECT normalPosition;
    }

    public static class WindowPlacement
    {
        private static readonly Encoding Encoding = new UTF8Encoding();
        private static readonly XmlSerializer Serializer = new XmlSerializer(typeof(WINDOWPLACEMENT));

        [DllImport("user32.dll")]
        private static extern bool SetWindowPlacement(IntPtr hWnd, [In] ref WINDOWPLACEMENT lpwndpl);

        [DllImport("user32.dll")]
        private static extern bool GetWindowPlacement(IntPtr hWnd, out WINDOWPLACEMENT lpwndpl);

        private const int SW_SHOWNORMAL = 1;
        private const int SW_SHOWMINIMIZED = 2;

        private static void SetPlacement(IntPtr windowHandle, string placementXml)
        {
            if (string.IsNullOrEmpty(placementXml))
            {
                return;
            }

            byte[] xmlBytes = Encoding.GetBytes(placementXml);

            try
            {
                WINDOWPLACEMENT placement;
                using (MemoryStream memoryStream = new MemoryStream(xmlBytes))
                {
                    placement = (WINDOWPLACEMENT)Serializer.Deserialize(memoryStream);
                }

                placement.length = Marshal.SizeOf(typeof(WINDOWPLACEMENT));
                placement.flags = 0;
                placement.showCmd = (placement.showCmd == SW_SHOWMINIMIZED ? SW_SHOWNORMAL : placement.showCmd);
                SetWindowPlacement(windowHandle, ref placement);
            }
            catch (InvalidOperationException)
            {
                // Parsing placement XML failed. Fail silently.
            }
        }

        private static string GetPlacement(IntPtr windowHandle)
        {
            WINDOWPLACEMENT placement;
            GetWindowPlacement(windowHandle, out placement);

            using (MemoryStream memoryStream = new MemoryStream())
            {
                using (XmlTextWriter xmlTextWriter = new XmlTextWriter(memoryStream, Encoding.UTF8))
                {
                    Serializer.Serialize(xmlTextWriter, placement);
                    byte[] xmlBytes = memoryStream.ToArray();
                    return Encoding.GetString(xmlBytes);
                }
            }
        }
        public static void ApplyPlacement(this Window window)
        {
            var className = window.GetType().Name;
            try
            {
                var pos = File.ReadAllText(Directory + "\\" + className + ".pos");
                SetPlacement(new WindowInteropHelper(window).Handle, pos);
            }
            catch (Exception exception)
            {
                Log.Error("Couldn't read position for " + className, exception);
            }

        }

        public static void SavePlacement(this Window window)
        {
            var className = window.GetType().Name;
            var pos =  GetPlacement(new WindowInteropHelper(window).Handle);
            try
            {
                File.WriteAllText(Directory + "\\" + className + ".pos", pos);
            }
            catch (Exception exception)
            {
                Log.Error("Couldn't write position for " + className, exception);
            }
        }
        private static string Directory => Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);

    }
} 
```

在你后面的代码中添加这两个方法

```
///This method is save the actual position of the window to file "WindowName.pos"
private void ClosingTrigger(object sender, EventArgs e)
{
    this.SavePlacement();
}
///This method is load the actual position of the window from the file
protected override void OnSourceInitialized(EventArgs e)
{
    base.OnSourceInitialized(e);
    this.ApplyPlacement();
} 
```

在 xaml 窗口中添加这个

```
Closing="ClosingTrigger" 
```

            回答 #9

赞同：1

时间：2013-02-16T22:46:33.343

我写了一个快速课程来做到这一点。这是它的名称：

```
 public MainWindow()
    {
        FormSizeSaver.RegisterForm(this, () => Settings.Default.MainWindowSettings,
                                   s =>
                                   {
                                       Settings.Default.MainWindowSettings = s;
                                       Settings.Default.Save();
                                   });
        InitializeComponent();
        ... 
```

这是代码：

```
public class FormSizeSaver
{
    private readonly Window window;
    private readonly Func<FormSizeSaverSettings> getSetting;
    private readonly Action<FormSizeSaverSettings> saveSetting;
    private FormSizeSaver(Window window, Func<string> getSetting, Action<string> saveSetting)
    {
        this.window = window;
        this.getSetting = () => FormSizeSaverSettings.FromString(getSetting());
        this.saveSetting = s => saveSetting(s.ToString());

        window.Initialized += InitializedHandler;
        window.StateChanged += StateChangedHandler;
        window.SizeChanged += SizeChangedHandler;
        window.LocationChanged += LocationChangedHandler;
    }

    public static FormSizeSaver RegisterForm(Window window, Func<string> getSetting, Action<string> saveSetting)
    {
        return new FormSizeSaver(window, getSetting, saveSetting);
    }

    private void SizeChangedHandler(object sender, SizeChangedEventArgs e)
    {
        var s = getSetting();
        s.Height = e.NewSize.Height;
        s.Width = e.NewSize.Width;
        saveSetting(s);
    }

    private void StateChangedHandler(object sender, EventArgs e)
    {
        var s = getSetting();
        if (window.WindowState == WindowState.Maximized)
        {
            if (!s.Maximized)
            {
                s.Maximized = true;
                saveSetting(s);
            }
        }
        else if (window.WindowState == WindowState.Normal)
        {
            if (s.Maximized)
            {
                s.Maximized = false;
                saveSetting(s);
            }
        }
    }

    private void InitializedHandler(object sender, EventArgs e)
    {
        var s = getSetting();
        window.WindowState = s.Maximized ? WindowState.Maximized : WindowState.Normal;

        if (s.Height != 0 && s.Width != 0)
        {
            window.Height = s.Height;
            window.Width = s.Width;
            window.WindowStartupLocation = WindowStartupLocation.Manual;
            window.Left = s.XLoc;
            window.Top = s.YLoc;
        }
    }

    private void LocationChangedHandler(object sender, EventArgs e)
    {
        var s = getSetting();
        s.XLoc = window.Left;
        s.YLoc = window.Top;
        saveSetting(s);
    }
}

[Serializable]
internal class FormSizeSaverSettings
{
    public double Height, Width, YLoc, XLoc;
    public bool Maximized;

    public override string ToString()
    {
        using (var ms = new MemoryStream())
        {
            var bf = new BinaryFormatter();
            bf.Serialize(ms, this);
            ms.Position = 0;
            byte[] buffer = new byte[(int)ms.Length];
            ms.Read(buffer, 0, buffer.Length);
            return Convert.ToBase64String(buffer);
        }
    }

    internal static FormSizeSaverSettings FromString(string value)
    {
        try
        {
            using (var ms = new MemoryStream(Convert.FromBase64String(value)))
            {
                var bf = new BinaryFormatter();
                return (FormSizeSaverSettings) bf.Deserialize(ms);
            }
        }
        catch (Exception)
        {
            return new FormSizeSaverSettings();
        }
    }
} 
```

            回答 #10

赞同：0

时间：2012-02-16T14:44:09.470

你可能会喜欢这样：

```
public class WindowStateHelper
{
    public static string ToXml(System.Windows.Window win)
    {
        XElement bounds = new XElement("Bounds");
        if (win.WindowState == System.Windows.WindowState.Maximized)
        {
            bounds.Add(new XElement("Top", win.RestoreBounds.Top));
            bounds.Add(new XElement("Left", win.RestoreBounds.Left));
            bounds.Add(new XElement("Height", win.RestoreBounds.Height));
            bounds.Add(new XElement("Width", win.RestoreBounds.Width));
        }
        else
        {
            bounds.Add(new XElement("Top", win.Top));
            bounds.Add(new XElement("Left", win.Left));
            bounds.Add(new XElement("Height", win.Height));
            bounds.Add(new XElement("Width", win.Width));
        }
        XElement root = new XElement("WindowState",
            new XElement("State", win.WindowState.ToString()),
            new XElement("Visibility", win.Visibility.ToString()),
            bounds);

        return root.ToString();
    }

    public static void FromXml(string xml, System.Windows.Window win)
    {
        try
        {
            XElement root = XElement.Parse(xml);
            string state = root.Descendants("State").FirstOrDefault().Value;
            win.WindowState = (System.Windows.WindowState)Enum.Parse(typeof(System.Windows.WindowState), state);

            state = root.Descendants("Visibility").FirstOrDefault().Value;
            win.Visibility = (System.Windows.Visibility)Enum.Parse(typeof(System.Windows.Visibility), state);

            XElement bounds = root.Descendants("Bounds").FirstOrDefault();
            win.Top = Convert.ToDouble(bounds.Element("Top").Value);
            win.Left = Convert.ToDouble(bounds.Element("Left").Value);
            win.Height = Convert.ToDouble(bounds.Element("Height").Value);
            win.Width = Convert.ToDouble(bounds.Element("Width").Value);
        }
        catch (Exception x)
        {
            System.Console.WriteLine(x.ToString());
        }
    }
} 
```

当应用程序关闭时：

```
 Properties.Settings.Default.Win1Placement = WindowStateHelper.ToXml(win1);
        Properties.Settings.Default.Win2Placement = WindowStateHelper.ToXml(win2);
        ... 
```

当应用程序启动时：

```
 WindowStateHelper.FromXml(Properties.Settings.Default.Win1Placement, win1);
        WindowStateHelper.FromXml(Properties.Settings.Default.Win2Placement, win2);
        ... 
```

            回答 #11

赞同：0

时间：2017-08-04T10:52:25.223

在默认设置中创建一个名为 WindowXml 的字符串。

在您的 Window Loaded 和 Closing 事件上使用此扩展方法来恢复和保存 Window 大小和位置。

```
using YourProject.Properties;
using System;
using System.Linq;
using System.Windows;
using System.Xml.Linq;

namespace YourProject.Extensions
{
    public static class WindowExtensions
    {
        public static void SaveSizeAndLocation(this Window w)
        {
            try
            {
                var s = "<W>";
                s += GetNode("Top", w.WindowState == WindowState.Maximized ? w.RestoreBounds.Top : w.Top);
                s += GetNode("Left", w.WindowState == WindowState.Maximized ? w.RestoreBounds.Left : w.Left);
                s += GetNode("Height", w.WindowState == WindowState.Maximized ? w.RestoreBounds.Height : w.Height);
                s += GetNode("Width", w.WindowState == WindowState.Maximized ? w.RestoreBounds.Width : w.Width);
                s += GetNode("WindowState", w.WindowState);
                s += "</W>";

                Settings.Default.WindowXml = s;
                Settings.Default.Save();
            }
            catch (Exception)
            {
            }
        }

        public static void RestoreSizeAndLocation(this Window w)
        {
            try
            {
                var xd = XDocument.Parse(Settings.Default.WindowXml);
                w.WindowState = (WindowState)Enum.Parse(typeof(WindowState), xd.Descendants("WindowState").FirstOrDefault().Value);
                w.Top = Convert.ToDouble(xd.Descendants("Top").FirstOrDefault().Value);
                w.Left = Convert.ToDouble(xd.Descendants("Left").FirstOrDefault().Value);
                w.Height = Convert.ToDouble(xd.Descendants("Height").FirstOrDefault().Value);
                w.Width = Convert.ToDouble(xd.Descendants("Width").FirstOrDefault().Value);
            }
            catch (Exception)
            {
            }
        }

        private static string GetNode(string name, object value)
        {
            return string.Format("<{0}>{1}</{0}>", name, value);
        }
    }
} 
```

            回答 #12

赞同：0

时间：2018-02-19T10:58:26.407

我正在使用 Lance Cleveland 的答案并绑定设置。但是我正在使用更多代码来避免我的窗口不在屏幕上。

```
private void SetWindowSettingsIntoScreenArea()
{
    // first detect Screen, where we will display the Window
    // second correct bottom and right position
    // then the top and left position.
    // If Size is bigger than current Screen, it's still possible to move and size the Window

    // get the screen to display the window
    var screen = System.Windows.Forms.Screen.FromPoint(new System.Drawing.Point((int)Default.Left, (int)Default.Top));

    // is bottom position out of screen for more than 1/3 Height of Window?
    if (Default.Top + (Default.Height / 3) > screen.WorkingArea.Height)
        Default.Top = screen.WorkingArea.Height - Default.Height;

    // is right position out of screen for more than 1/2 Width of Window?
    if (Default.Left + (Default.Width / 2) > screen.WorkingArea.Width)
        Default.Left = screen.WorkingArea.Width - Default.Width;

    // is top position out of screen?
    if (Default.Top < screen.WorkingArea.Top)
        Default.Top = screen.WorkingArea.Top;

    // is left position out of screen?
    if (Default.Left < screen.WorkingArea.Left)
        Default.Left = screen.WorkingArea.Left;
} 
```

        ruby-on-rails - 如何将 form_remote_tag 与验证一起使用？

ID：847753

赞同：0

时间：2009-05-11T11:49:44.973

标签：ruby-on-rails, ajax, validation

我想在 Rails 中使用 Ajax 表单，所以我使用 form_remote_tag。我要提交的字段是电子邮件地址 - 我如何将 Rails 验证与 form_remote_tag 一起使用？

            回答 #1

赞同：3

时间：2009-05-11T18:26:47.017

我们将 form_remote_tag 与 :update 选项一起使用，并将整个表单粘贴到部分表单中。提交表单并且验证失败后，将再次呈现部分，并且将显示所有错误消息。

这是工作流程：

1.  调用“编辑”操作
2.  从部分显示表单，使用带有 :update 选项的 form_remote_tag
3.  提交表单以“更新”操作
4.  验证数据
5.  验证失败？再次显示部分错误消息
6.  验证通过？显示带有一些成功消息的表单

            回答 #2

赞同：1

时间：2009-05-11T12:55:53.367

在您的表单处理控制器动作中决定是否

1.  您加载带有验证错误的 flash[:notice] 并引导用户返回表单视图

    或  
2.  让她继续处理有效数据，（导致下一步）

您可以（应该）根据验证做出此决定

```
def create
  m = Model.new(params)
  if m.valid?
    m.save
    #load flash with succes message
  else
    #load flash with error messages from m.errors
    #render the form again
  end
end 
```

        c - 结构和函数调用的动态数组 f(const struct_type *const data[])

ID：847772

赞同：1

时间：2009-05-11T11:54:48.857

标签：c

以下代码警告不兼容的类型。解决此代码的正确方法是什么？

谢谢

```
typedef struct a_struct struct_type;

void f(const struct_type *const data[], unsigned n);

void test(unsigned n)
{
   struct_type **v;

   assert(n);
   v = malloc(n * sizeof(struct_type *));
   /* fill v with new struct_type (with a malloc per entry) */
   f(v, n); <- WARN on v
} 
```

            回答 #1

赞同：4

时间：2009-05-11T12:46:20.330

编译器抱怨的原因是's 声明`const`中的第一个。`f`

尝试使用

```
void f(struct_type *const data[], unsigned n);
/*...*/
f( v, n ); 
```

你不会得到同样的警告。`v`或者，您可以在调用时施放`f`

```
void f(const struct_type *const data[], unsigned n);
/*...*/
f( (const struct_type * const *) v, n ); 
```

这有点违反直觉，但在 C 中，您不能将 a 传递`pointer-to-pointer-to-nonconst`给 a `pointer-to-pointer-to-const`。他们做了一个特殊的例外，允许你通过 a`pointer-to-nonconst`为 a `pointer-to-const`。

这是一个常见问题解答问题[“为什么我不能将 a 传递给`char **`需要 a 的函数`const char **`？”](http://c-faq.com/ansi/constmismatch.html) ：

您可以在需要 a 的地方使用 a `pointer-to-T`（对于任何类型`T`）`pointer-to-const-T`。但是，允许限定指针类型存在轻微不匹配的规则（显式例外）不会递归应用，而仅在顶层应用。(`const char **`是`pointer-to-pointer-to-const-char`，因此例外情况不适用。)

不能`char **`为`const char **`指针赋值的原因有些晦涩。鉴于`const`限定符完全存在，编译器希望帮助您遵守不修改`const`值的承诺。这就是为什么您可以将 a 分配`char *`给 a ，但不能反过来：*将*`const char *`-ness 添加到一个简单的指针显然是安全的，但将其删除会很危险。但是，假设您执行了以下更复杂的一系列作业： *`const`*

 *```
const char c = 'x';     /* 1 */
char *p1;           /* 2 */
const char **p2 = &p1;      /* 3 */
*p2 = &c;           /* 4 */
*p1 = 'X';          /* 5 */ 
```

在第 3 行，我们将 a 分配`char **`给 a `const char **`。（编译器应该抱怨。）在第 4 行，我们将 a 分配`const char *`给 a `const char *`; 这显然是合法的。在第 5 行，我们修改了 a`char *`指向的内容——这应该是合法的。但是，p1 最终指向 c，即`const`. 这出现在第 4 行，因为 *p2 实际上是 p1。这是在第 3 行中设置的，这是一个不允许的形式的分配，这正是不允许第 3 行的原因。

将 a 分配`char **`给 a `const char **`（如第 3 行和原始问题中的）并不是立即危险的。但是它设置了一种情况，在这种情况下 p2 的承诺——最终指向的值不会被修改——不能被遵守。

（C++ 有更复杂的规则来分配`const`-qualified 指针，这让您可以进行更多类型的分配而不会产生警告，但仍然可以防止无意中尝试修改`const`值。C++ 仍然不允许将 a 分配`char **`给 a `const char **`，但它会让您逃脱将 a 分配`char **`给`const char * const`*.)

在 C 中，如果您必须分配或传递在非第一级间接具有限定符不匹配的指针，则必须使用显式强制转换（例如`const char **`，在这种情况下为 ()），尽管与往常一样，需要这种强制转换可能表明演员并没有真正解决的更深层次的问题。

参考文献：ISO Sec。6.1.2.6，秒。6.3.16.1，秒。6.5.3 H&S 部分 7.9.1 第 221-2 页*  ** * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:12:07.513

根据 Rampion 的回答进行编辑。问题在于 f() 声明中的双重 const。

带有警告的代码：

```
struct_type ** v;
v = (struct_type **)malloc(10 * sizeof(struct_type *));      
f(v); 
```

这编译没有警告：

```
const struct_type *const* v;
v = (const struct_type **)malloc(10 * sizeof(struct_type *));
f(v); 
```

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:51:30.880

看看这是否适合你：

```
f(struct_type *data);

void test(unsigned n)
{
    struct_type *v = malloc(n * sizeof(struct_type *));
    f(v);
} 
```

请让我知道你是怎么过的。

* * *

## 回答 #4

> 赞同：-1
> 
>             
> 
> 时间：2009-05-11T12:31:17.357

f 期望得到一个指针数组（const struct_type* []）作为输入。您将指针传递给 struct (const struct_type**) 的指针。

IMO，最好的办法是将 f 的签名更改为：

```
void f(const struct_type *const* data); 
```

为什么需要将数组作为参数传递给函数？

# .net - 在 .NET 中查找页面地址

> ID：847777
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-11T11:57:30.550
> 
>         
> 
> 标签：.net, url

有谁知道我如何以编程方式发现当前页面的完整地址。我们在子域中的多个客户端共享我们的代码库，我试图发现哪个客户端正在查看页面以加载适当的 CSS，例如。red.website.com；blue.website.com；（我希望在我的代码中抓住红色或蓝色）。

非常感谢。为糟糕的措辞道歉。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:00:01.713

完整路径应该是：?[`Request`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.aspx)`.`[`Url`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.url.aspx)`.`[`AbsoluteUri`](http://msdn.microsoft.com/en-us/library/system.uri.absoluteuri.aspx)

一旦你有一个`Uri`（简单的`Resuest.Url`），就像：

```
string color = uri.Host.Split('.')[0]; 
```

# java - 使用 ajax 加载弹出窗口

> ID：847780
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-11T11:57:57.380
> 
>         
> 
> 标签：java, jquery, spring, xt

我有一个jsp 页面，它应该使用ajax 加载一个弹出窗口。页面内容由用户填写的表格决定。

像这样的东西：

javascript:

```
ajax('getPage.action', 'content_id', 'form_id'); 
```

foo.jsp：

```
<div id="content_id"></div>

<form id="form_id">
 ...
</form> 
```

爪哇/弹簧：

```
@RequestMapping("getPage.action")
MyController extends AbstractCommandController {
  RealDto dto = (RealDto)command;
  ...
  return new ModelAndView("foo", data);
} 
```

对我来说最困难的部分是如何以 ajax 调用的形式轻松发送表单数据。我可以在这里使用 jQuery 吗？表单是动态变化的，所以列出表单的所有字段会很麻烦。

使用 Springs XT（我从来没有）会有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-11T12:30:58.993

[jQuery 表单插件](http://malsup.com/jquery/form)可以帮助您轻松地将常规表单转换为 Ajax 表单。您只需要一行代码：

```
$("#myform").ajaxForm(
   {beforeSubmit: validate, success: showPopup} ); 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-11T12:39:17.477

是的，您可以使用[序列化](http://docs.jquery.com/Ajax/serialize)来简单地转换表单以发送数据。

```
$("#form1").submit(function() {
    $.get("/desiredURL", $("#form1").serialize(), function(response) {
        // send response data to a popup
    }
} 
```

您可以使用[get](http://docs.jquery.com/Ajax/jQuery.get#urldatacallbacktype)或[post](http://docs.jquery.com/Ajax/jQuery.post#urldatacallbacktype)发送数据。

对于弹出窗口，我喜欢[facebox](https://github.com/defunkt/facebox)，但有很多选择。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:13:34.483

我不了解 jQuery，但对于原型，这很容易：

```
new Ajax.Request('getPage.action', {
    parameters: $('form_id').serialize(true),
    onSuccess: someMethod
); 
```

查看[原型 API 文档](http://www.prototypejs.org/api/)。

此页面具有与 jQuery 相同的信息：http: [//docs.jquery.com/Ajax](http://docs.jquery.com/Ajax)

# cron - 开源作业调度程序有哪些替代方案？

> ID：847783
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-11T11:59:31.073
> 
>         
> 
> 标签：cron, scheduled-tasks

[开源作业调度程序](http://jobscheduler.sourceforge.net/osource_scheduler_introduction_en.htm)有什么替代品吗？我正在寻找一种方法来获得比普通 cron 提供的更多控制计划的工作任务，但除了 Quartz 之外没有找到其他任何东西，它不是语言中立的。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-09-03T18:51:38.120

有果酱。[http://www.mvpsi.com/JobScheduling.aspx](http://www.mvpsi.com/JobScheduling.aspx)

如果您使用的是 OpenVMS，则特别棒

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2011-05-03T16:36:23.783

我们也使用 JAMS，但它并不便宜。当我听到“开源”时，我认为“免费”而 JAMS 远非免费。我的老板通过谈判达成了协议，所以我不知道所有血淋淋的细节，但我知道我们为 JAMS 花费了超过 35,000 美元

顺便说一句，我应该提到它是一个很棒的工具，他们的支持很棒

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-09-03T18:43:20.810

我不确定您的问题，但我认为 SuperScheduler 可以满足您的要求： 
 [http ://www.acelet.com/super/SuperScheduler/index.html](http://www.acelet.com/super/SuperScheduler/index.html)

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:35:41.900

我无法想象你对它有什么期望，如果你想要“任务调度程序”而不是你可能想要指定间隔和任务本身。这正是 cron 的用途。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2011-04-21T14:07:45.643

有人在 OpenVMS 上提到了 JAMS。我们在带有 UNIX 和 Linux 代理的 Windows 上使用 JAMS。他们也有一个不完美的 Cron 转换器，但它完成了将 Cron 作业转移到 JAMS 的大约 90% 的工作。网站是 jamsscheduler.com 和 jamssupport.com

# css - 导航栏的 CSS 背景图像不出现

> ID：847785
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-11T12:00:35.673
> 
>         
> 
> 标签：css

基本上，我想制作一个导航栏，其中导航栏的当前或活动选项卡将具有圆形选项卡的背景图像。但是，那个图像似乎没有出现。我将图像放在下面 CSS 代码的“#navbar .active a”部分：

```
<html>
<head>

<style type="text/css">
#menubar {
    width: 800px;
    height: 40px;
    background:url(../Images/menubar%20copy.jpg);
}
#navbarwrap {
    width: 580px;
    height: 40px;
    margin-left: 16px;
}
#navbar {
    width: 580px;
    height: 40px;
    margin-left: 16px;
}
ul  {
    float:left;
    width:100%;
    padding:0;
    margin:0;   
    list-style-type:none;
    white-space: nowrap;
}
li  {
    float:left;
    width: 94px;
    height: 40px;
    text-decoration:none;
    color:white;
    text-align: center;
    display:inline;
}
a   {
    color: #FFFFFF;
    text-decoration: none;
}
#navbar .active a{
    color: #000000;
    background: url(../Images/tab%20copy.gif) no-repeat;
}
</style>

</head>

    <body>
    <div id="menubar">
        <div id="navbarwrap">
        <div id="navbar">
            <ul>
            <li class="active"><a href="...">Link one</a></li>
            <li><a href="...">Link two</a></li>
            <li><a href="...">Link three</a></li>
            <li><a href="...">Link four</a></li>
            </ul>
        </div>
            </div>
    </div>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:08:57.367

没有图像，您的代码就可以工作。所以它可能只是一个图像路径问题。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:12:41.257

你检查过文件路径吗？

我读那个的方式，你的文件在一个与“图像”同级的子目录中

IE

`http://host/subdir/menu.html`将寻找图像`http://host/Images/tab%20copy.gif`

此外，您应该验证案例。大多数网络服务器确实区分`Images`和`images`

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2013-02-18T12:10:33.433

您必须首先检查您的图像文件夹，否则

这也可能有效

```
#navbar.active a{
   color: #000000;
   background: url(../Images/tab%20copy.gif) no-repeat;
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T20:41:53.007

图像在`#menubar`工作吗？如果没有，这可能只是一个路径错误。

您确定您的“图像”文件夹位于您正在处理的页面上方的一个文件夹中吗？看到除了图像之外的其余代码都可以正常工作，我只能想象这是由不正确的路径引起的错误。

# css - 是否可以在 CSS 中使用字符串宏？

> ID：847789
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-11T12:01:53.097
> 
>         
> 
> 标签：css, macros

在我的网站的一部分中，我使用一个国家的国旗作为列表元素的图标。

例如，我有：

```
<ul>
  <li id="at">Austria</li>
  <li id="de">Germany</li>
</ul> 
```

随附的 CSS 如下所示：

```
#at {
  list-style-image: url('at.png');
}
#de {
  list-style-image: url('de.png');
} 
```

是否可以用宏替换它，这样我就不需要为每个国家重新定义 CSS？像 C 风格的宏这样的东西会很棒，但我不确定 CSS 是否支持这种东西。

IE

```
#_country {
  list-style_image: url('_country.png');
} 
```

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-05-11T12:03:03.140

CSS 本身不这样做，但您始终可以从 PHP 脚本或类似脚本中提供 CSS，在服务器端进行宏处理以从国家列表中生成单独的规则。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:23:58.857

由于 CSS 本身没有宏系统，因此您总是必须明确地编写所有规则。因此，您可以选择[服务器端解决方案](https://stackoverflow.com/questions/847789/is-it-possible-to-use-string-macros-in-css/847791#847791)（这会增加额外的加载开销），或者使用文本编辑器的宏或片段工具，您可以轻松地自己生成规则。

有趣的是，如果 CSS 支持字符串连接和在属性`attr()`之外使用的函数`content`，那么有人可以这样写：

```
.languages {
    background-image: attr(id) ".jpg";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T13:19:10.253

简短的回答：没有。

更长的答案：你不应该依赖 JavaScript 来实现这样的功能，因为不是每个人都启用了 JavaScript，这就像打破了车轮上的苍蝇......

除了通过 PHP、Perl、Python 生成它（在服务器端运行，或者只在您的 PC 上一次并将文件保存为 *.css）或其他东西，您无法做任何事情来省去复制/粘贴的麻烦3 行并为每个国家/地区更改它们。

所以，就用烦人的方式来做吧；）如果只有那三行，我想你会很快把你的清单放在一起。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:34:37.770

可能的解决方案之一：

```
<!-- our lovely list-style-image function -->
<script>
  function set_list_country(list, country) {
    list.style.list-style-image = 'url("'+country+'.png")';
  }
</script>

<!-- country list -->
<ul>
  <li id="at">Austria</li>
  <li id="de">Germany</li>
</ul>

<!-- country list styling -->
<!-- note: this goes below your list, or else create onload function -->
<script>
  set_list_country(document.getElementById('at'), 'at');
  set_list_country(document.getElementById('de'), 'de');
</script> 
```

问候。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:48:34.430

不，你不能在纯 CSS 中做到这一点，因为 CSS 语言没有控制结构或任何类似的东西，它可以让你动态地生成 CSS 代码。

相反，您可以使用 Andrejs 指出的 javascript 解决方案或基于PHP 编码的[CSS 变量的解决方案。](http://www.google.com/search?source=ig&hl=en&rlz=&=&q=css+variables+php&btnG=Google+Search&aq=0&oq=css+variables)

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T13:31:04.250

虽然在脚本中生成 CSS 服务器端是一个选项。我更喜欢这里的简单 javascript。

一些评论者指出，如果 JS 不可用，那么用户将看不到标志....但是如果 js 被禁用，还有什么其他方法不起作用 - 几乎每个 '2.0' 网站！

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Untitled Page</title>
  <script type="text/javascript">

     function initFlags() {

      var flagListItems = document.getElementsByTagName("li");

      for (var i = 0; i < flagListItems.length;  i++ )
      {
         var li = flagListItems[i];

        // use any prop you want to build the url - i used an expando one
        // just because i thought it made the code more readable.

        var f = li.getAttribute("flag");

        if (f == "" || f == null)  continue;

        li.style.listStyleImage = 'url(' + f + '.png)';

       }

    </script>
    </head>
    <body onload="initFlags()">
      <ul>
        <li id="at" flag="au">Austria</li>
        <li id="de" flag="de">Germany</li>
      </ul>
    </body>
</html> 
```

# sql - Mysql 从另一个存储过程调用存储过程

> ID：847795
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-11T12:04:38.720
> 
>         
> 
> 标签：sql, mysql, stored-procedures

对于不完整的信息，我深表歉意。这是我的两个 sp：SP1 -

> 分隔符 $$
> 
>   
>   
> 
> DROP PROCEDURE IF EXISTS `SP1`$$ CREATE PROCEDURE
>    `SP1`(InputCustomerID int, InputOrderID int) BEGIN  
> 
>   
>   
> 
> // 一些sql语句，最后放到数据库中的实际表tb1中
> 
>   
>   
> 
> 结束 $$
> 
>   
>   
> 
> 分隔符；

SP2 - 在 SP2 中，我正在分配 SP1 参数的输入值。

> 分隔符 $$
> 
>   
>   
> 
> DROP PROCEDURE IF EXISTS `SP2`$$ CREATE PROCEDURE `SP2`() BEGIN
> 
>   
>   
> 
> 声明 InputCustomerID int; 声明 InputOrderID int; 声明 OrderStateDate 日期时间；
> 
>   
>   
> 
> 将 CustomerID 选择到 InputCustomerID From Cusoms Where CustomerID NOT IN（从 CustomerOrders 中选择 FK_CustomerID）并且 IsApproved = True 和 CustomerID IN（从 CustomerProductOrders 中选择 FK_CustomerID Where Date (OrderStartDate) = Date(Now())）；  
> 
>   
>   
> 
> 从 CustomerOrders 中选择 OrderID 到 InputOrderID 中，其中 FK_CustomerID 不在（从 CustomerProdcutOrders 中选择 FK_CustomerID）并且 IsApproved = True 和 Date(OrderStartDate) = Date(Now())；  
> 
>   
>   
> 
> 调用 SP1(InputCustomerID, InputOrderID);
> 
>   
>   
> 
> 结束 $$
> 
>   
>   
> 
> 分隔符；

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-05-11T16:40:01.670

你的问题措辞很糟糕，很难给出一个好的答案。

例如，我猜你一定是在调用 sp2，而它又调用了 sp1。其他任何事情都会导致无法为 sp1 提供参数。

你接着说 sp2 没有任何输入或输出参数。没有输出参数，我无法理解您期望如何看到 sp2 的输出。

我敢肯定，“你没有得到输出，因为你没有设置任何输出”不是你想要的答案。您应该编辑您的问题，也许使用一些示例代码。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-06-09T05:07:56.947

对不起，这段代码运行良好，但存在其他一些语法错误。

感谢你的帮助。

# winforms - 大型数据集和winforms

> ID：847802
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-11T12:06:59.430
> 
>         
> 
> 标签：winforms, dataset

我有一个大约 300 万条记录的数据集，我想将它们加载到应用程序 (WinForm) 中的数据网格中。

显示数据的最佳方法/方法是什么。

我需要能够对数据运行过滤器以减少数据集，欢迎提出想法

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:11:42.757

一个好主意是过滤数据库中的数据并仅检索（预）过滤的结果集。如果这个集合仍然很大，请使用[虚拟模式](http://msdn.microsoft.com/en-us/library/15a31akc.aspx)，但也要重新考虑您的设计 - 如果您想显示如此多的数据，而您遇到了性能问题，那么您也可能会为用户显示大量数据。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:13:11.427

除了过滤之外，您还应该考虑在后端进行分页（您的 SP 应该处理分页）

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:22:06.457

您可以使用 DataSource 属性和 BindingSource 组件将网格绑定到 DataSet。表单设计器可以为您创建 BindingSource。BindingSource 有一个 Filter 属性，允许您过滤 DataSet 的内容

编辑：顺便说一下，在数据绑定模式下，DataGridView 隐式使用虚拟模式，因此您不必担心网格中有太多行

# asp.net - ASP.NET 版本控制

> ID：847804
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-11T12:08:03.360
> 
>         
> 
> 标签：asp.net, version-control

如何在 asp.net 项目上设置版本？因为属性不包含任何东西......

网页所在的文件夹中没有项目文件。

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-05-11T12:14:34.917

假设您使用的是 Web 应用程序（而不是网站项目），那么您应该会发现您的“properties”文件夹中有一个 AssemblyInfo.cs 文件。

这将包含以下属性：

```
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

如果您有一个网站项目，那么您可以手动添加一个新的 .cs 文件并将这些属性放入其中。

您可以在此处（在 SO 上）找到有关这些属性的更多信息：

[AssemblyVersion、AssemblyFileVersion 和 AssemblyInformationalVersion 之间有什么区别？](https://stackoverflow.com/questions/64602/what-are-differences-between-assemblyversion-assemblyfileversion-and-assemblyinf)

**更新**

刚刚阅读了上面的帖子，如果您只是想保存仅向用户显示的信息，则 AssemblyInformationalVersion 可能是更合适的属性。

**更新二**

这是一些“快速而肮脏”的代码，它将从属性中获取 InformationalVersion：

```
string version = Assembly
                .GetExecutingAssembly()
                .GetCustomAttributes(
                   typeof(AssemblyInformationalVersionAttribute), true)
                .Where(x => x.GetType() == 
                   typeof(AssemblyInformationalVersionAttribute))
                .Cast<AssemblyInformationalVersionAttribute>()
                .First()
                .InformationalVersion; 
```

如果我是你，我会编写一个包含属性值的类，以及访问它的上面的代码，这样你就可以使用这个属性或你喜欢的任何东西来实现你的版本号，然后随着时间的推移改变你实现它的方式。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:35:43.960

ASP.Net 网站*不是*一个项目。如果您有一个需要项目文件的源代码管理插件，那么您需要将您的站点设为一个 Web 应用程序项目。

Web 应用程序项目是 Visual Studio 2003 和 2001 中 ASP.Net 的唯一选择，但在 2005 年被删除以支持网站模型，然后为 VS 2005 重新提供了该功能，但您需要安装插件，您可以在这里阅读：http: [//msdn.microsoft.com/en-us/asp.net/aa336618.aspx](http://msdn.microsoft.com/en-us/asp.net/aa336618.aspx)
在 VS 2008 中，Web 应用程序项目是在 ide 中构建的。

# c# - ASP.NET 中继器交替行高亮显示，没有完全爆发

> ID：847806
> 
>         
> 
> 赞同：56
> 
>         
> 
> 时间：2009-05-11T12:08:38.350
> 
>         
> 
> 标签：c#, asp.net, data-binding, extension-methods, repeater

我试图在我的备用行上简单地添加一个 css 类到一个 div 中，`<itemtemplate/>`而不需要包含一个完整的开销，`<alternatingitemtemplate/>`这将迫使我在未来保持很多标记同步。

我已经看到了一个解决方案，例如我的[http://blog.net-tutorials.com/2009/04/02/how-to-alternate-row-color-with-the-aspnet-repeater-control/](http://blog.net-tutorials.com/2009/04/02/how-to-alternate-row-color-with-the-aspnet-repeater-control/)很想使用，但这对我来说仍然没有“气味”。

还有其他人有更易于维护和直接的解决方案吗？理想情况下，我希望能够执行以下操作：

```
<asp:repeater id="repeaterOptions" runat="server">
        <headertemplate>
            <div class="divtable">
                <h2>Other Options</h2>
        </headertemplate>
        <itemtemplate>
                <div class="item <%# IsAlternatingRow ? "dark" : "light" %>"> 
```

但我无法弄清楚如何实现`IsAlternatingRow`- 即使使用扩展方法。

* * *

## 回答 #1

> 赞同：130
> 
>             
> 
> 时间：2009-05-11T12:19:49.223

无需管理您自己的变量（递增计数器或布尔值）；您可以查看内置[`ItemIndex`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeateritem.itemindex.aspx)属性是否可被 2 整除，并使用它来设置 css 类：

```
class="<%# Container.ItemIndex % 2 == 0 ? "" : "alternate" %>" 
```

这样做的好处是完全基于您的 UI 代码（ascx 或 aspx 文件），并且不依赖于 JavaScript。

* * *

## 回答 #2

> 赞同：17
> 
>             
> 
> 时间：2009-08-13T16:33:29.113

C＃

```
class="<%# Container.ItemIndex % 2 == 0 ? "" : "alternate" %>" 
```

VB

```
class="<%# iif(Container.ItemIndex Mod 2 = 0,"","alternate") %>" 
```

* * *

## 回答 #3

> 赞同：6
> 
>             
> 
> 时间：2014-01-21T09:28:47.460

这对我有帮助

```
class='<%# Container.ItemIndex % 2 == 0 ? "" : "alternate" %>' 
```

以前的答案导致“服务器标签格式不正确”错误。

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2009-05-11T12:22:48.937

使用 JQuery 应用类。

```
$('.divtable > div:odd').addClass('dark');
$('.divtable > div:even').addClass('light'); 
```

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-05-11T12:25:16.433

您可以改用 jQuery。这个对上一个问题的回答可能会有所帮助：[jQuery Zebra 选择器](https://stackoverflow.com/questions/287489/jquery-zebra-selector)

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2009-08-25T16:44:53.880

小调整：空类可以通过以下方式删除：

```
 <%# Container.ItemIndex % 2 == 0 ?  "<tr>" : "<tr class='odd'>"  %> 
```

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2015-03-24T13:57:36.103

无需代码。这是一个纯 CSS 解决方案：

```
.item:nth-child(odd){background-color: #ccc}
.item:nth-child(){background-color: #ddd} 
```

[https://developer.mozilla.org/en-US/docs/Web/CSS/:nth-child](https://developer.mozilla.org/en-US/docs/Web/CSS/:nth-child)

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:20:10.177

IsAlternatingRow 可以是受保护的属性，并将在 ItemDataBound 或 ItemCreated 事件中设置。

```
protected void rpt_ItemDataBound(object sender, EventArgs e)
{
    IsAlternatingRow = !IsAlternatingRow;
} 
```

# c# - 如何在 C# 中编写实现给定接口的通用容器类？

> ID：847809
> 
>         
> 
> 赞同：26
> 
>         
> 
> 时间：2009-05-11T12:09:39.703
> 
>         
> 
> 标签：c#, generics, reflection, interface, containers

背景：.NET 3.5，VS2008。我不确定这个问题的标题，所以也可以对标题发表评论:-)

这是场景：我有几个类，比如 Foo 和 Bar，它们都实现了以下接口：  

```
public interface IStartable
{
    void Start();
    void Stop();
} 
```

现在我想要一个容器类，它在其构造函数中获取一个 IEnumerable<IStartable> 作为参数。反过来，这个类也应该实现 IStartable 接口：

```
public class StartableGroup : IStartable // this is the container class
{
    private readonly IEnumerable<IStartable> startables;

    public StartableGroup(IEnumerable<IStartable> startables)
    {
        this.startables = startables;
    }

    public void Start()
    {
        foreach (var startable in startables)
        {
            startable.Start();
        }
    }

    public void Stop()
    {
        foreach (var startable in startables)
        {
            startable.Stop();
        }
    }
} 
```

所以我的问题是：如何在不手动编写代码且不生成代码的情况下做到这一点？换句话说，我想要类似下面的东西。

```
var arr = new IStartable[] { new Foo(), new Bar("wow") };
var mygroup = GroupGenerator<IStartable>.Create(arr);
mygroup.Start(); // --> calls Foo's Start and Bar's Start 
```

约束：  

*   没有代码生成（即在编译时没有真正的文本代码）   

*   接口只有 void 方法，**带或不带参数**

动机：  

*   我有一个相当大的应用程序，有很多各种接口的插件。为每个接口手动编写“组容器”类会“重载”项目的类  

*   手动写代码容易出错  

*   对 IStartable 接口的任何添加或签名更新都将导致“组容器”类中的（手动）更改

*   学习   

我知道我必须在这里使用反射，但我宁愿使用强大的框架（如 Castle 的[DynamicProxy](http://www.castleproject.org/dynamicproxy/index.html)或[RunSharp](http://www.codeproject.com/KB/dotnet/runsharp.aspx)）为我做接线。

有什么想法吗？

* * *

## 回答 #1

> 赞同：28
> 
>             
> 
> 时间：2009-05-11T12:54:47.223

这不漂亮，但它似乎工作：

```
public static class GroupGenerator
{
    public static T Create<T>(IEnumerable<T> items) where T : class
    {
        return (T)Activator.CreateInstance(Cache<T>.Type, items);
    }
    private static class Cache<T> where T : class
    {
        internal static readonly Type Type;
        static Cache()
        {
            if (!typeof(T).IsInterface)
            {
                throw new InvalidOperationException(typeof(T).Name
                    + " is not an interface");
            }
            AssemblyName an = new AssemblyName("tmp_" + typeof(T).Name);
            var asm = AppDomain.CurrentDomain.DefineDynamicAssembly(
                an, AssemblyBuilderAccess.RunAndSave);
            string moduleName = Path.ChangeExtension(an.Name,"dll");
            var module = asm.DefineDynamicModule(moduleName, false);
            string ns = typeof(T).Namespace;
            if (!string.IsNullOrEmpty(ns)) ns += ".";
            var type = module.DefineType(ns + "grp_" + typeof(T).Name,
                TypeAttributes.Class | TypeAttributes.AnsiClass |
                TypeAttributes.Sealed | TypeAttributes.NotPublic);
            type.AddInterfaceImplementation(typeof(T));

            var fld = type.DefineField("items", typeof(IEnumerable<T>),
                FieldAttributes.Private);
            var ctor = type.DefineConstructor(MethodAttributes.Public,
                CallingConventions.HasThis, new Type[] { fld.FieldType });
            var il = ctor.GetILGenerator();
            // store the items
            il.Emit(OpCodes.Ldarg_0);
            il.Emit(OpCodes.Ldarg_1);
            il.Emit(OpCodes.Stfld, fld);
            il.Emit(OpCodes.Ret);

            foreach (var method in typeof(T).GetMethods())
            {
                var args = method.GetParameters();
                var methodImpl = type.DefineMethod(method.Name,
                    MethodAttributes.Private | MethodAttributes.Virtual,
                    method.ReturnType,
                    Array.ConvertAll(args, arg => arg.ParameterType));
                type.DefineMethodOverride(methodImpl, method);
                il = methodImpl.GetILGenerator();
                if (method.ReturnType != typeof(void))
                {
                    il.Emit(OpCodes.Ldstr,
                        "Methods with return values are not supported");
                    il.Emit(OpCodes.Newobj, typeof(NotSupportedException)
                        .GetConstructor(new Type[] {typeof(string)}));
                    il.Emit(OpCodes.Throw);
                    continue;
                }

                // get the iterator
                var iter = il.DeclareLocal(typeof(IEnumerator<T>));
                il.Emit(OpCodes.Ldarg_0);
                il.Emit(OpCodes.Ldfld, fld);
                il.EmitCall(OpCodes.Callvirt, typeof(IEnumerable<T>)
                    .GetMethod("GetEnumerator"), null);
                il.Emit(OpCodes.Stloc, iter);
                Label tryFinally = il.BeginExceptionBlock();

                // jump to "progress the iterator"
                Label loop = il.DefineLabel();
                il.Emit(OpCodes.Br_S, loop);

                // process each item (invoke the paired method)
                Label doItem = il.DefineLabel();
                il.MarkLabel(doItem);
                il.Emit(OpCodes.Ldloc, iter);
                il.EmitCall(OpCodes.Callvirt, typeof(IEnumerator<T>)
                    .GetProperty("Current").GetGetMethod(), null);
                for (int i = 0; i < args.Length; i++)
                { // load the arguments
                    switch (i)
                    {
                        case 0: il.Emit(OpCodes.Ldarg_1); break;
                        case 1: il.Emit(OpCodes.Ldarg_2); break;
                        case 2: il.Emit(OpCodes.Ldarg_3); break;
                        default:
                            il.Emit(i < 255 ? OpCodes.Ldarg_S
                                : OpCodes.Ldarg, i + 1);
                            break;
                    }
                }
                il.EmitCall(OpCodes.Callvirt, method, null);

                // progress the iterator
                il.MarkLabel(loop);
                il.Emit(OpCodes.Ldloc, iter);
                il.EmitCall(OpCodes.Callvirt, typeof(IEnumerator)
                    .GetMethod("MoveNext"), null);
                il.Emit(OpCodes.Brtrue_S, doItem);
                il.Emit(OpCodes.Leave_S, tryFinally);

                // dispose iterator
                il.BeginFinallyBlock();
                Label endFinally = il.DefineLabel();
                il.Emit(OpCodes.Ldloc, iter);
                il.Emit(OpCodes.Brfalse_S, endFinally);
                il.Emit(OpCodes.Ldloc, iter);
                il.EmitCall(OpCodes.Callvirt, typeof(IDisposable)
                    .GetMethod("Dispose"), null);
                il.MarkLabel(endFinally);
                il.EndExceptionBlock();
                il.Emit(OpCodes.Ret);
            }
            Cache<T>.Type = type.CreateType();
#if DEBUG       // for inspection purposes...
            asm.Save(moduleName);
#endif
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-05-11T16:19:20.890

它不像基于反射的解决方案那样干净的界面，但一个非常简单和灵活的解决方案是创建一个 ForAll 方法，如下所示：

```
static void ForAll<T>(this IEnumerable<T> items, Action<T> action)
{
    foreach (T item in items)
    {
        action(item);
    }
} 
```

并且可以这样调用：

```
arr.ForAll(x => x.Start()); 
```

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-05-11T12:14:58.083

您可以子类`List<T>`化或其他一些集合类，并使用`where`泛型类型约束将类型限制为`T`仅`IStartable`类。

```
class StartableList<T> : List<T>, IStartable where T : IStartable
{
    public StartableList(IEnumerable<T> arr)
        : base(arr)
    {
    }

    public void Start()
    {
        foreach (IStartable s in this)
        {
            s.Start();
        }
    }

    public void Stop()
    {
        foreach (IStartable s in this)
        {
            s.Stop();
        }
    }
} 
```

如果您不希望它是需要类型参数的泛型类，您也可以像这样声明该类。

```
public class StartableList : List<IStartable>, IStartable
{ ... } 
```

您的示例使用代码将如下所示：

```
var arr = new IStartable[] { new Foo(), new Bar("wow") };
var mygroup = new StartableList<IStartable>(arr);
mygroup.Start(); // --> calls Foo's Start and Bar's Start 
```

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-11-19T16:52:19.107

[`Automapper`](http://automapper.codeplex.com/)是一个很好的解决方案。它依赖于[`LinFu`](http://www.codeproject.com/KB/cs/LinFuPart1.aspx)底层来创建一个实现接口的实例，但它负责一些水化，并在一个有点流利的 api 下混合。作者`LinFu`声称它实际上比`Castle`'s更轻量级和更快`Proxy`。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:19:41.580

您可以等待 C# 4.0 并使用动态绑定。

这是一个好主意——我不得不多次为 IDisposable 实现它；当我想要处理很多东西时。不过要记住的一件事是如何处理错误。它是否应该记录并继续启动其他人等等......你需要一些选项来上课。

我不熟悉 DynamicProxy 以及如何在这里使用它。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:44:21.147

您可以使用“List”类及其方法“ForEach”。

```
var startables = new List<IStartable>( array_of_startables );
startables.ForEach( t => t.Start(); } 
```

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:52:07.213

如果我理解正确，您要求实现“GroupGenerator”。

如果没有使用 CastleProxy 的任何实际经验，我的建议是使用 GetMethods() 来获取接口中列出的初始方法，然后使用 Reflection.Emit 动态创建一个新类型，并使用枚举对象并调用每个对应的新方法方法。性能应该不会太差。

# regex - Format all IP-Addresses to 3 digits

> ID：847812
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-11T12:10:44.070
> 
>         
> 
> 标签：regex, ip-address

I'd like to use the search & replace dialogue in UltraEdit (Perl Compatible Regular Expressions) to format a list of IPs into a standard Format.

The list contains:

```
192.168.1.1  
123.231.123.2  
23.44.193.21 
```

It should be formatted like this:

```
192.168.001.001  
123.231.123.002  
023.044.193.021 
```

The RegEx from [http://www.regextester.com/regular+expression+examples.html](http://www.regextester.com/regular+expression+examples.html) for IPv4 in the PCRE-Format is not working properly:  

```
^(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]){3}$ 
```

I'm stucked. Does anybody have a proper solution which works in UltraEdit?

Thanks in advance!

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-11T14:45:31.613

Set the regular expression engine to Perl (on the advanced section) and replace this:

```
(?<!\d)(\d\d?)(?!\d) 
```

with this:

```
0$1 
```

**twice**. That should do it.

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:40:08.020

If your input is a single IP address (per line) and nothing else (no other text), this approach will work:

I used "Replace All" with Perl style regular expressions:

```
Replace (?<!\d)(?=\d\d?(?=[.\s]|$))
with    0 
```

Just replace as often as it matches. If there is other text, things will get more complicated. Maybe the "Search in Column" option is helpful here, in case you are dealing with CSV.

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:53:49.143

If this is just a one-off data cleaning job, I often just use Excel or OpenOffice Calc for this type of thing:

1.  Open your textfile and make sure only one IP address per line.

2.  Open Excel or whatever and goto "Data|Import External Data" and import your textfile using "." as the separator.

3.  You should now have 4 columns in excel:

    192 | 168 | 1 | 1

4.  Right click and format each column as a number with 3 digits and leading zeroes.

5.  In column 5 just do a string concatenation of the previous columns with a "." in between each column:
    A1 & "." & B1 & "."  & C1 & "."  & D1

This obviously is a cheap and dirty fix and is not a programmatic way of dealing with this, but I find this sort of technique useful for cleaning up data every now and then.

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:30:52.083

I'm not sure how you can use Regular Expression in Replace With box in UltraEdit.

You can use this regular expression to find your string:

```
^(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])$ 
```

# unix - 批量重命名以仅更改单个字符

> ID：847821
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-11T12:13:39.553
> 
>         
> 
> 标签：unix, file, file-rename

如何使用命令 mv 将一个目录中的所有文件重命名为新名称。目录有 1000 多个文件，要求是将每个文件名的最后一个字符更改为某个特定的字符。示例：文件是

```
abc.txt
asdf.txt
zxc.txt
...
ab_.txt
asd.txt 
```

它应该更改为

```
ab_.txt
asd_.txt
zx_.txt
...
ab_.txt
as_.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-11T13:32:29.033

如果所有文件都以“.txt”结尾，您可以使用`mmv`(Multiple Move)：

```
mmv "*[a-z].txt" "#1_.txt" 
```

另外：会在重命名*任何*文件*之前*`mmv`告诉您何时会产生冲突（在您的示例中：abc.txt 变为已经存在的 ab_.txt） 。

 **请注意，您必须引用文件名，否则 shell 会在`mmv`看到它之前扩展列表（但`mmv`通常也会捕获这个错误）。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-11T12:23:27.140

您必须注意名称冲突，但这应该可以正常工作：

```
for i in *.txt ; do
    j=$(echo "$i" | sed 's/..txt$/_.txt/')
    echo mv \"$i\" \"$j\"
    #mv "$i" "$j"
done 
```

在您取消注释之后`mv`（我留下了评论，以便您可以安全地看到它的作用）。引号用于处理带有空格的文件（在我看来是邪恶的、卑鄙的事情:-)。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:20:52.497

如果您的文件都有 .txt 后缀，我建议使用以下脚本：

```
for i in *.txt
do
    r=`basename $i .txt | sed 's/.$//'`
    mv $i ${r}_.txt
done 
```

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:25:39.850

Find 应该比 更有效`for file in *.txt`，后者将所有 1000 个文件扩展为一长串命令行参数。示例（更新为使用 bash 替换方法）：

```
find . \( -type d ! -name . -prune \) -o \( -name "*.txt" \) | while read file
do 
    mv $file ${file%%?.txt}_.txt
done 
```

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T13:07:57.050

使用该`mv`命令是否有明确要求？

perl`rename`实用程序是为这类事情编写的。它是基于 debian 的 linux 发行版的标准，但根据[这个页面](http://tips.webdesign10.com/how-to-bulk-rename-files-in-linux-in-the-terminal)，它可以很容易地添加到任何其他发行版中。

如果它已经存在（或者如果您安装它），您可以执行以下操作：

```
rename -v 's/.\.txt$/_\.txt/' *.txt 
```

上面包含的页面有一些关于正则表达式的基本信息，如果需要的话。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:20:51.280

我不确定这是否适用于数千个文件，但在 bash 中：

```
for i in *.txt; do
   j=`echo $i |sed 's/.\.txt/_.txt/'`
   mv $i $j
done 
```

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:24:09.900

您可以这样使用 bash 的`${parameter%%word}`运算符：

```
for FILE in *.txt; do
   mv $FILE ${FILE%%?.txt}_.txt
done 
```

# groovy - Groovy 会话。如何找到用户名

> ID：847825
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-11T12:14:48.690
> 
>         
> 
> 标签：groovy, session-management

我正在使用 scafoldig 在 Groovy 下开发一个应用程序。我们使用 Acegi 插件来保证安全。我们有一个名为 ChangeManagement 的类，定义如下（简化版）

```
class ChangeManagement {
static constraints = {
    company(nullable:false)             
    lastModifiedByUser(nullable:false)      
}

Company company    
static belongsToCompany = [company:Company]

User lastModifiedByUser 
static belongsToUser = [lastModifiedByUser:User]
} 
```

当我处理创建方法时，我将获得一个带有“上次修改者”标签的下拉菜单，其中包含来自表用户的所有用户，这是标准行为。

而不是这个，我想直接拥有已经登录的用户并且没有下拉菜单。我已经生成了创建模板，我可以修改它。我假设我必须从会话中获取用户名。如果我的假设是正确的，如何获得这个用户名？如果我错了，那么从哪里可以获得当前用户的用户名？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-12T00:39:33.587

有关如何获取当前用户名的详细信息，请参阅[此问题。](https://stackoverflow.com/questions/775053/grails-and-spring-security-how-do-i-get-the-authenticated-user-from-within-a-con/775901#775901)

我还建议研究[Grails 过滤器](http://www.grails.org/Filters)，寻找一种在所有控制器调用后轻松将用户填充到模型中并使其在视图中可用的方法。我在我的应用程序上使用它来将登录用户的名称放在屏幕的右上角。

# design-patterns - 命令按钮位置 - UI 设计

> ID：847829
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-11T12:15:52.603
> 
>         
> 
> 标签：design-patterns, user-interface

您使用哪种设计？按钮的大小是多少？按什么顺序？

你比较喜欢哪个

*   A=OK

*   B=取消

或者

*   A=取消

*   B=OK

您使用“Windows”按钮大小：80x24 像素还是您自己的？

[设计 1 http://www.quercus-lab.com/images/so/ui_1.png](http://www.quercus-lab.com/images/so/ui_1.png) [设计 2 http://www.quercus-lab.com/images/so/ui_2.png](http://www.quercus-lab.com/images/so/ui_2.png) [设计 3 http://www. quercus-lab.com/images/so/ui_3.png](http://www.quercus-lab.com/images/so/ui_3.png) [设计 4 http://www.quercus-lab.com/images/so/ui_4.png](http://www.quercus-lab.com/images/so/ui_4.png) 

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-11T12:19:38.647

坚持windows标准。

好的 | 取消 | 申请

尽可能使用相同大小的按钮。

将它们右对齐，在窗口内容下方。

以 Windows 控制面板（显示设置/日期和时间/键盘）中的 UI 为例。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-11T12:20:04.717

选项#2 相当标准化。始终在取消之前放置确定。

[Microsoft](http://msdn.microsoft.com/en-us/library/aa511453.aspx)建议两个按钮使用 75pix x 23pix。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2011-10-19T01:36:10.087

第一个选项。

查看 Microsoft Windows 用户体验交互指南：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa511268.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511268.aspx)

# php - 两列布局，左列高度约束右列高度，不知道为什么...？

> ID：847830
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-11T12:16:40.433
> 
>         
> 
> 标签：php, html, css, iframe

我有点卡住了，这是由于我对 html/css 和 iframe 缺乏经验。

基本上，我有一个 LH 列，这是我的菜单。还有一个 RH 专栏，里面是我的内容。RH 列是 iframe。

问题是我无法让 iframe 的高度等于 100%，它受到 LH 列高度的限制。

见下文;
[http://www.therussianfrostfarmers.com/](http://www.therussianfrostfarmers.com/)

它让我发疯，它似乎很容易修复。

这是相关html的一部分；

```
<div id='wrapper'>
          <div id='header'>
                 <img src="images/titleBart.gif" alt="rff"/>
          </div>

          <div id='menu'>
                 <div class='container'>
                          <%obj_itop%>
                          <plug:front_index />
                          <%obj_ibot%>
                 </div> 
          </div>    

          <div id='content'>
                          <!-- text and image -->
                          <plug:front_exhibit />
                          <!-- end text and image -->
          </div>

          <div class='clear-both'>
                 <!-- -->
          </div>
</div> 
```

以及相应的 CSS；

```
#wrapper { 
    margin: 0 auto;
    width:950px; 
    text-align: left; 
    background: #fff; 
    height:100% !important;
} 

.clear-both { clear: both; }

#content {
    width: 760px;
    margin: 20px 0 0 190px;
    padding:0;
    height: 100% !important;
    overflow: auto;
}

#menu {
    width: 170px;
    position:absolute; 
    margin:0;
    padding:0;
    overflow: auto;
}

.container {  
    margin:0;
    padding:0;
} 
```

任何帮助将非常感激，

谢谢凸轮

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:25:03.470

我对此不是 100% 确定的，但我相当确定如果不使用 JavaScript 来动态调整 iFrame 的大小，就无法做到这一点。如果有，那可能并不容易。

*发生这种情况是因为 CSS 术语中的“100%”只占用页面上已有内容的*尽可能多的空间。由于您已经有一个左侧列，因此 100% 只会转到该列的大小。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:34:19.173

iFrame 将需要使用 javascript 调整大小 - 您可以使用类似下面的内容相当轻松地做到这一点：

```
<body onload="resizeFrame(document.getElementById('myframe'))">

  <iframe id="myframe" src="http://www.example.com/foo.html" />

  <script type=”text/javascript”&gt;
    function resizeFrame(f) 
    {
      // Get height of iframe once it has loaded content and then
      // use this for the iframe height in parent doc
      f.style.height = f.contentWindow.document.body.scrollHeight + “px”;
    }
  </script> 
```

以上将评估 iframe 中渲染内容的高度，取该高度，然后将其用作 iframe 容器的高度。

请注意，如果您的 iframed 内容与包含页面位于同一域中，则上述方法将起作用。如果不是，由于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您将遇到安全限制，这[有点棘手](https://stackoverflow.com/questions/153152/resizing-an-iframe-based-on-content/362564#362564)！

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:59:21.080

好的，我相信 iframe 已经应用了这种 JS 函数；

```
<script type='text/javascript'>
function iframer() 
{ 
// get width of #content 
frame_x = $('#content').width(); 
// get height of #menu 
frame_y = $('#menu').height(); 

// apply height and width 
$('#iframed').css('width', frame_x); 
$('#iframed').css('height', frame_y); 
} 

$(document).ready( function() { iframer(); } );
$(window).resize( function() { iframer(); } );
</script>

<iframe src='$url' frameborder='0' id='iframed'></iframe>
EOH;

    return $iframe; 
```

如果我将#menu 高度更改为 50% 并将 BG 变灰，则更容易看到 #menu div 如何影响 #content div 的高度。

[http://www.therussianfrostfarmers.com/](http://www.therussianfrostfarmers.com/)

# java - 从 Java 启动文件

> ID：847838
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2009-05-11T12:19:30.787
> 
>         
> 
> 标签：java, io, launch

我想从 Java 程序启动文件（文档）并逐步满足以下要求：

*   方法必须适用于 Mac、Win 和 Linux 系统

*   我不允许使用 "Runtime.getRuntime().exec("cmd.exe /C +"filename");

*   我要启动的文件必须是 .doc / .docx / .rtf 之一

该文件是在运行时创建的，是创建报告的结果。有什么好的做法吗？

* * *

## 回答 #1

> 赞同：22
> 
>             
> 
> 时间：2009-05-11T12:25:13.563

使用[Java 桌面 API](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/javase6/desktop_api/)。

```
Desktop.getDesktop().open(new File(yourfilename)); 
```

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-05-11T12:29:33.600

如果您运行的是 1.6，请按照 mad-j 的建议使用桌面 API。如果您使用的是较旧的 VM（1.5 或更早版本），则需要编写自己的特定于平台的代码来执行此操作。

在 Mac 上，

```
Runtime.getRuntime().exec(new String[] {"open", pathToFile}); 
```

在窗户上，

```
Runtime.getRuntime().exec(new String[] {"cmd.exe", "/C", pathToFile}); 
```

您可能需要转义 Windows 上的路径。

# python - 在 Python 中获取临时目录的跨平台方法

> ID：847850
> 
>         
> 
> 赞同：320
> 
>         
> 
> 时间：2009-05-11T12:21:46.023
> 
>         
> 
> 标签：python, cross-platform, temporary-directory

*`temp`*在 Python 2.6 中  是否有跨平台获取目录路径的方法？

例如，在 Linux 下将是`/tmp`，而在 XP 下`C:\Documents and settings\[user]\Application settings\Temp`。

* * *

## 回答 #1

> 赞同：462
> 
>             
> 
> 时间：2009-05-11T12:25:18.337

那将是[tempfile](http://docs.python.org/library/tempfile.html)模块。

它具有获取临时目录的功能，并且还具有一些快捷方式来在其中创建临时文件和目录，无论是命名的还是未命名的。

例子：

```
import tempfile

print tempfile.gettempdir() # prints the current temporary directory

f = tempfile.TemporaryFile()
f.write('something on temporaryfile')
f.seek(0) # return to beginning of file
print f.read() # reads data back from the file
f.close() # temporary file is automatically deleted here 
```

为了完整起见，根据文档，这是它搜索临时目录的方式：

1.  `TMPDIR`由环境变量命名的目录。

2.  `TEMP`由环境变量命名的目录。

3.  `TMP`由环境变量命名的目录。

4.  特定于平台的位置：

    *   在*RiscOS 上*`Wimp$ScrapDir`，由环境变量命名的目录。

    *   在*Windows*上，目录`C:\TEMP`、`C:\TMP`、`\TEMP`和`\TMP`, 按此顺序排列。

    *   在所有其他平台上，目录`/tmp`、`/var/tmp`和`/usr/tmp`, 按此顺序排列。

5.  作为最后的手段，当前工作目录。

* * *

## 回答 #2

> 赞同：72
> 
>             
> 
> 时间：2009-05-11T12:27:30.877

这应该做你想要的：

```
print tempfile.gettempdir() 
```

对我来说，在我的 Windows 机器上，我得到：

```
c:\temp 
```

在我的 Linux 机器上，我得到：

```
/tmp 
```

* * *

## 回答 #3

> 赞同：24
> 
>             
> 
> 时间：2017-04-14T19:51:37.737

我用：

```
from pathlib import Path
import platform
import tempfile

tempdir = Path("/tmp" if platform.system() == "Darwin" else tempfile.gettempdir()) 
```

这是因为在 MacOS 上，即 Darwin，`tempfile.gettempdir()`并`os.getenv('TMPDIR')`返回一个值，例如`'/var/folders/nj/269977hs0_96bttwj2gs_jhhp48z54/T'`; 这是我并不总是想要的。

* * *

## 回答 #4

> 赞同：17
> 
>             
> 
> 时间：2016-05-10T20:04:20.727

最简单的方法，基于@nosklo 的评论和[回答](https://stackoverflow.com/a/847866/623735)：

```
import tempfile
tmp = tempfile.mkdtemp() 
```

但是如果你想手动控制目录的创建：

```
import os
from tempfile import gettempdir
tmp = os.path.join(gettempdir(), '.{}'.format(hash(os.times())))
os.makedirs(tmp) 
```

这样，您可以在完成后轻松清理（为了隐私、资源、安全等）：

```
from shutil import rmtree
rmtree(tmp, ignore_errors=True) 
```

这类似于 Google Chrome 和 Linux 等应用程序`systemd`所做的事情。他们只是使用较短的十六进制哈希和特定于应用程序的前缀来“宣传”他们的存在。

* * *

## 回答 #5

> 赞同：-6
> 
>             
> 
> 时间：2021-03-08T10:20:18.287

为什么会有这么多复杂的答案？

我只是用这个

```
 (os.getenv("TEMP") if os.name=="nt" else "/tmp") + os.path.sep + "tempfilename.tmp" 
```

# php - PHP Jabber：如果我登录并检查消息并断开连接，在其他用户端我将显示为断开连接

> ID：847854
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-11T12:22:18.703
> 
>         
> 
> 标签：php, chat, xmpp

我不确定我所做的是否绝对正确。但这里有：

1.  用户通过基于 Web 的界面登录聊天

2.  通过 Comet 通知用户更新

3.  用户输入转到 PHP 文件的详细信息，该文件进一步连接到 Jabber 服务器

现在的问题是，当用户想要发送消息时，很简单，运行 php，我在其中连接到 jabber 服务器并发送消息。当我在等待消息时，问题就出现了。因为如果我登录并检查消息并断开连接，在其他用户端我将显示为断开连接。

我是否以错误的方式处理这个问题？我应该直接连接到 Jabber 服务器（通过 javascript）而不是中间的 PHP 层吗？如何通过 PHP 接收消息？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:41:01.437

我还没有尝试过，但你可能想看看[xmpphp](http://code.google.com/p/xmpphp/)。其次，您可能需要考虑让用户登录到 XMPP 服务器（也称为 Jabber 服务器），只要他们登录到您的网站。您可能希望有某种超时，以防他们离开您的网站并且不再回来。

至于你是否应该通过 JavaScript 连接，我不明白你为什么不能。我建议你选择对你来说最简单的东西。对于这种情况，您可能想查看[Strophe](http://code.stanziq.com/strophe/)，我听到了一些关于它的好消息。

我广泛使用的唯一 XMPP 库是[headstock](http://trac.defuze.org/wiki/headstock)，但这需要使用[python](http://www.python.org)和[Kamaelia](http://www.kamaelia.org/Home)。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:45:37.837

这是 http 的一个固有问题（或功能） - 没有持久的连接（不是真的）。你需要一个解决方法，没有真正的解决方案。

你可以用 java 或 flash 来做，但这不是很好（javascript 4tw！）。

另一种可能性是创建一个中间客户端，它将浏览器和 web 服务器之间的连接转换为 web 服务器和 jabber 服务器之间的连接。*混乱，但可能。*

或者也许有一个 API 可以帮助解决这个问题。

**通过javascript直接连接到jabber服务器**

我可能睡过最新的ajax发明，但是afaik你只能与source-html文件来自的主机通信（忽略greasmonkey和插件）。*没有不同的域，没有不同的端口，时期。*除非您要教您的 jabber 服务器如何将您的 chatpage-html 提供给浏览器，否则这将产生问题。此外，保持联系甚至不起作用，因为这需要多部分响应。这些仅由 Mozilla 支持，*这就是为什么丑小鸭 COMET 甚至首先存在的原因。*comet 本身是一种解决方法，可以避免在传输数据时无法保持连接。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-07-15T10:30:04.947

因此，据我所知，问题在于，当另一端的 Jabber 用户响应时。那里的问题，至少部分是，用户正在响应 Jabber 服务器上的另一个用户，但是您希望 php 脚本知道该响应已经发生而没有保持连接打开（这是有道理的，因为脚本可能不再运行）。

一种选择，虽然是一个非常愚蠢的选择，是：

*   有一个 php 脚本可以代理到 Jabber 服务器的连接，以便为您页面上的用户发送和接收，

*   使用 AJAX 为用户发送消息（AJAX 将指向上述脚本，脚本将发送消息。）

*   有一个 Javascript 无限循环，每 10 秒左右 ping 一次相同的脚本，检查是否有消息。如果有，它们将被传递回客户端并输出给用户。

以上只有两个问题：

1）如果消息传输时用户未连接，php脚本是否仍会看到/获取消息？

2) 每 3 秒发出一次 ajax 请求的客户端循环可能是一个巨大的消耗。

解决方案2：

[OpenFire](http://www.igniterealtime.org/projects/openfire/) Jabber 服务器。它带有一个内置的网络聊天客户端，它有一个名为 Fastpath 的插件，用于在客户端处理基于 HTML 的聊天（就像“现在与代理聊天！”在太多支持页面上的功能。）

我们在工作中使用它，它是非常可定制的，可以与其他脚本集成（例如，如果你想要一个脚本来从他们的登录中填充用户详细信息，或者添加一些自定义头像，或者其他什么），它（OpenFire ) 有大量其他扩展和插件，如果这不是你想要的，它们可能有你正在寻找的东西。

# c# - 如何编写 vb.net 代码来编译 C/C++ 程序？

> ID：847860
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-11T12:24:35.110
> 
>         
> 
> 标签：c#, c++, python, c, vb.net

我正在尝试制作一个 vb.net 应用程序，它有 2 个文本框、7 个单选按钮和 2 个按钮（一个名为 compile，另一个名为“run”）。如何将 C/C++（或任何编程语言）文件的内容加载到第一个文本框中，然后单击编译按钮，我应该能够在第二个文本框中显示错误或 C/C++ 程序。单击运行时，我应该能够在第二个文本框中显示输出。简而言之，我想将第二个文本框用作终端/控制台。单选按钮是 4 选择语言 C 或 C++ 或 python 或 C# 或 java 或 perl 或 vb。.net 中是否存在所有这些语言的编译器？如果是这样，我该如何打电话给他们？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-11T12:29:40.730

查看`System.IO`名称空间以获取有关如何将文件内容加载到文本框中的线索。特别是`File`班级。

[System.IO.File 类](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)

查看`System.Diagnostics`命名空间以获取有关如何启动进程和捕获输出的线索。特别是`Process`班级。

[System.Diagnostics.Process 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)

这个SO页面...

[在 .NET (C#) 中捕获控制台输出](https://stackoverflow.com/questions/186822/capturing-the-console-output-in-net-c)

...将为您提供有关捕获控制台输出的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:31:04.330

编译可以通过调用Visual Studio自带的cl.exe来完成。当然你也可以用 GCC 代替。

# iphone - ABPersonViewController+删除

> ID：847870
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-11T12:25:51.487
> 
>         
> 
> 标签：iphone, abpersonviewcontroller

谁能帮我启用删除按钮`ABPersonViewController`？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2012-01-10T02:44:18.543

看看不使用任何私有方法的 ABPersonViewController+Delete 类别：

[https://github.com/shrtlist/ABDelete](https://github.com/shrtlist/ABDelete)

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-06-20T04:55:35.987

对我来说，这段代码有效：

```
ABPersonViewController *pvc = [[ABPersonViewController alloc] init];
[pvc setPersonViewDelegate:self];
[pvc setAllowsEditing:YES];
[pvc setAllowsDeletion:YES];
[pvc setAllowsActions:YES]; 
```

# asp.net - 使用 javascript 应用样式并不总是有效

> ID：847873
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-11T12:26:52.327
> 
>         
> 
> 标签：asp.net, javascript

我正在使用 JavaScript 将样式应用于 div，它第一次看起来很好，但是当我单击图像打开虚拟窗口时，应用的 CSS 消失了。

如何使用永久保留的脚本应用样式。

**我无法在设计时应用任何样式，因为我使用的是现成的用户控件，并且我仅在运行时获取 DIV 的 ID。

任何的想法？？

这是我正在使用的脚本...

```
window.onload = changeDivOverflow;
function  changeDivOverflow()
{
   var treeDiv = document.getElementById('T_ctl00contentMainctl04tvw');
   treeDiv.style.overflow = "auto";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:40:35.710

由于您使用的是 ASP.NET，但我看不到您的所有完整代码，我只能假设您的 DIV 有一个`runat="server"`标签，这就是您无法在客户端获取 ID 的原因。

如果是这种情况，您可以考虑进行以下更改以获取 treeDiv：

```
var treeDiv = document.getElementById("<%= tvw.ClientID %>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:40:39.643

您使用 javascript 和 DOM 调用应用的所有样式，仅适用于您正在应用它的元素。在您的示例中，它只是 ID = 'T_ctl00contentMainctl04tvw' 的元素

如果您想为多个元素重用该样式，您应该创建一个 CSS 类并将该样式存储在那里。然后将该类应用于您想要的每个元素。如果你想用脚本来做，那么你应该：

```
var treeDiv = document.getElementById('T_ctl00contentMainctl04tvw');
treeDiv.className = "your-class"; 
```

# iphone - 如何在 iPhone 上从“Base64String”格式的原始图像数据中获取 UIImage？

> ID：847875
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-11T12:27:32.840
> 
>         
> 
> 标签：iphone, uiimage, base64, image-conversion

在我的应用程序中，我以 XML 文件的形式从服务器接收图像数据。此数据是图像（.jpeg 或 .png 或 .tiff 等），服务器将其转换为“Base64String”格式字节以通过 XML 文件发送到我的应用程序。在我的应用程序端，应用程序将这些字节以“NSData”的形式存储到数据库中。现在，我的应用程序必须在后面部分检索并显示图像。但我一直无法弄清楚如何从这个“Base64String”格式的原始图像数据中获取 UIImage？请在这方面指导我，因为我是 iPhone 应用程序开发领域的“刚加入”开发人员。

感谢您通读，感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-11T12:42:07.813

[CocoaDev wiki 上的这个页面](http://www.cocoadev.com/index.pl?BaseSixtyFour)包含从字符串进行 base64 解码的几个实现。页面底部的 NSData 类别可能是最容易集成到您的应用程序中的类别。

从那里，您可以提取 base64 编码字符串的 NSData 表示。NSData 可用于使用 UIImage imageWithData: 或 initWithData: 构造函数初始化 UIImage 实例。

# c++ - for() 和 while() 之间有什么性能差异吗？

> ID：847876
> 
>         
> 
> 赞同：20
> 
>         
> 
> 时间：2009-05-11T12:29:01.263
> 
>         
> 
> 标签：c++, c, performance, for-loop, while-loop

还是全部与语义有关？

* * *

## 回答 #1

> 赞同：64
> 
>             
> 
> 时间：2009-05-11T12:38:39.053

简短的回答：不，它们完全相同。

猜猜它在理论上可能取决于编译器；一个真正破碎的人可能会做一些稍微不同的事情，但我会感到惊讶。

只是为了好玩，这里有两个变体，它们使用 Ubuntu 附带的 x86 gcc 版本 4.3.3 编译成完全相同的汇编代码。您可以在 linux 上使用[objdump](http://linux.die.net/man/1/objdump)检查最终二进制文件中生成的程序集。

```
主函数（）
{
#如果 1
    诠释 i = 10;
    做 { printf("%d\n", i); } 当我）;
＃别的
    诠释 i = 10;
    for (; i; --i) printf("%d\n", i);
＃万一
}

```

**编辑：**这是一个“带橙子的橙子”while 循环示例，它也可以编译为相同的内容：

```
    while(i) { printf("%d\n", i);  - 一世; }

```

* * *

## 回答 #2

> 赞同：14
> 
>             
> 
> 时间：2009-05-11T12:31:34.843

如果你的 for 和 while 循环做同样的事情，编译器生成的机器代码应该（几乎）相同。

例如在我几年前做的一些测试中，

```
for (int i = 0; i < 10; i++)
{
...
} 
```

和

```
int i = 0;
do
{
  ...
  i++;
}
while (i < 10); 
```

将生成完全相同的代码，或者（并且 Neil 在评论中指出）带有一个额外的 jmp，这不会对性能产生足够大的影响而无需担心。

* * *

## 回答 #3

> 赞同：8
> 
>             
> 
> 时间：2009-05-11T13:49:30.777

没有语义差异，也不需要任何编译差异。但这取决于编译器。所以我尝试使用 g++ 4.3.2、CC 5.5 和 xlc6。

**g++，CC 是相同的，xlc 不是**

xlc 的不同之处在于初始循环条目。

```
extern int doit( int );
void loop1( ) {
  for ( int ii = 0; ii < 10; ii++ ) {
    doit( ii );
  }
}

void loop2() {
  int ii = 0; 
  while ( ii < 10 ) {
    doit( ii );
    ii++;
  }
} 
```

**XLC 输出**

```
.loop2:                                 # 0x00000000 (H.10.NO_SYMBOL)
    mfspr   r0,LR
    stu     SP,-80(SP)
    st      r0,88(SP)
    cal     r3,0(r0)
    st      r3,64(SP)
    l       r3,64(SP)  ### DIFFERENCE ###
    cmpi    0,r3,10
    bc      BO_IF_NOT,CR0_LT,__L40
...
enter code here
.loop1:                                 # 0x0000006c (H.10.NO_SYMBOL+0x6c)
    mfspr   r0,LR
    stu     SP,-80(SP)
    st      r0,88(SP)
    cal     r3,0(r0)
    cmpi    0,r3,10    ### DIFFERENCE ###
    st      r3,64(SP)
    bc      BO_IF_NOT,CR0_LT,__La8
... 
```

* * *

## 回答 #4

> 赞同：7
> 
>             
> 
> 时间：2009-05-11T13:11:07.730

循环测试中变量的`while`范围比循环头中声明的变量范围要宽`for`。

因此，如果将变量保持更长时间作为副作用存在性能影响，那么在 while 和 for 循环之间进行选择（而不是将 while 包装在 {} 中以减小其范围）将会产生性能影响变量）。

一个例子可能是一个并发集合，它计算引用它的迭代器的数量，如果存在多个迭代器，它会应用锁定来防止并发修改，但是如果只有一个迭代器引用它，作为优化会忽略锁定。如果您`for`在同一个容器上使用不同命名的迭代器的函数中有两个循环，则将采用快速路径，但如果有两个`while`循环，则将采用慢速路径。同样，如果对象很大（更多缓存流量）或使用系统资源，则可能会影响性能。但我想不出一个真实的例子，我见过它会在哪里产生影响。

* * *

## 回答 #5

> 赞同：6
> 
>             
> 
> 时间：2009-05-11T13:42:54.580

使用循环展开进行优化的编译器可能只会在 for 循环的情况下这样做。

* * *

## 回答 #6

> 赞同：5
> 
>             
> 
> 时间：2009-05-11T12:32:26.573

两者是等价的。这是语义问题。

唯一的区别可能在于 do...while 构造，您将条件的评估推迟到主体*之后*，因此可以节省 1 次评估。

```
i = 1; do { ... i--; } while( i > 0 ); 
```

与

```
for(  i = 1; i > 0; --i )
{ ....
} 
```

* * *

## 回答 #7

> 赞同：4
> 
>             
> 
> 时间：2009-05-13T03:37:07.460

我写编译器。`if`我们将所有“结构化”控制流（ , `while`, `for`, `switch`, `do`... ）编译`while`成条件分支和无条件分支。然后我们分析控制流图。由于 C 编译器无论如何都必须处理一般`goto`情况，因此最容易将*所有内容*简化为分支和条件分支指令，然后一定要处理好这种情况。（AC 编译器不仅要处理手写代码，还要处理自动生成的代码，这些代码可能有很多很多`goto`语句。）

* * *

## 回答 #8

> 赞同：3
> 
>             
> 
> 时间：2009-05-11T12:32:16.637

不。如果他们在做相同的事情，他们会编译成相同的代码——正如你所说，这是关于语义的。选择最能代表您想要表达的内容。

* * *

## 回答 #9

> 赞同：3
> 
>             
> 
> 时间：2009-05-11T13:02:49.137

理想情况下它应该是相同的，但最终取决于您的编译器/解释器。可以肯定的是，您必须测量或检查生成的汇编代码。

证明可能存在差异：这些行使用 cc65 生成不同的汇编代码。

```
for (; i < 1000; ++i);   
while (i < 1000) ++i; 
```

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T13:48:07.847

在 Atmel ATMega 上，while() 比 for() 快。为什么在 AVR035: Efficient C Coding for AVR 中解释了这一点。

PS 原始平台没有被提及。

* * *

## 回答 #11

> 赞同：1
> 
>             
> 
> 时间：2009-05-12T16:49:03.067

补充另一个答案：根据我的经验，优化软件就像从男人身上剃掉浓密的大胡子。

*   首先，你用剪刀将它切成大块（从呼叫树上剪掉整个四肢）。

*   然后你用电动剪短（调整算法）做短。

*   最后你用剃须刀刮掉最后一点点（低级优化）。

`for()`最后一点是两者之间的差异`while()`可能（但可能不会）产生差异。

PS 我认识的程序员（他们都非常好，我怀疑是一个有代表性的样本）基本上是从另一个方向开始的。

* * *

## 回答 #12

> 赞同：1
> 
>             
> 
> 时间：2009-05-12T13:33:19.427

**continue在****for**和**while**中表现不同：在**for 中**，它会改变计数器，在**while**中，它通常不会

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2009-05-12T18:08:29.410

在某些情况下存在差异。

如果您正处于这种差异很重要的地步，您要么需要选择更好的算法，要么开始使用汇编语言进行编码。相信我，汇编代码比修复编译器版本更可取。

* * *

## 回答 #14

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:46:02.220

就性能而言，它们是相同的。我倾向于`while`在等待状态更改（例如等待缓冲区被填充）和`for`处理多个离散对象（例如遍历集合中的每个项目）时使用。

* * *

## 回答 #15

> 赞同：0
> 
>             
> 
> 时间：2009-05-13T18:44:13.617

比 快/`while()`慢？`for()`让我们回顾一下关于优化的一些事情：

*   编译器编写者非常努力地通过减少对跳转、比较、递增和它们生成的其他类型指令的调用来减少周期。

*   另一方面，调用指令消耗的周期要多得多，但编译器几乎无能为力来删除它们。

*   作为程序员，我们编写了很多函数调用，有些是因为我们的本意，有些是因为我们很懒，还有一些是因为编译器在不明显的情况下将它们插入。

*   大多数时候，这并不重要，因为硬件如此之快，而我们的工作如此之少，以至于计算机就像一只狼吞虎咽地乞求更多的小猎犬。

*   然而，有时工作量很大，以至于性能是一个问题。

*   那我们怎么办？更大的回报在哪里？

    *   让编译器减少循环等几个周期？

    *   *寻找*不需要做那么多的函数调用？

*   编译器不能做后者。只有我们程序员可以。

*   我们需要学习或被教导如何做到这一点。它不是自然而然的。我们天生倾向于做出错误的猜测，然后押注它们。获得更好的算法是一个开始，但只是一个开始。我们的老师需要教这个，如果*他们*确实知道怎么做的话。

*   探查器是一个开始。[我这样做。](https://stackoverflow.com/questions/375913/what-can-i-use-to-profile-c-code-in-linux/378024#378024)

当被问及**为什么抢劫银行时，威利萨顿的杜撰引述** :

**因为那是钱的所在。**

如果你想保存周期，找出它们在哪里。

* * *

## 回答 #16

> 赞同：-4
> 
>             
> 
> 时间：2009-05-11T12:32:37.273

可能只有编码风格。

*   因为如果你知道迭代次数。

*   而如果您不知道迭代次数。

# sql-server - “找不到存储过程”

> ID：847879
> 
>         
> 
> 赞同：21
> 
>         
> 
> 时间：2009-05-11T12:30:15.643
> 
>         
> 
> 标签：sql-server, stored-procedures

我正在维护一个具有 SQL Server 2005 后端的经典 ASP 网站。对于一小部分新功能，我编写了一个存储过程来进行插入。这是数据库中唯一的用户存储过程。

当我尝试从代码调用存储过程时，出现以下错误：

```
用于 SQL Server 错误“80040e14”的 Microsoft OLE DB 提供程序
找不到存储过程“InsertGroup”。
/newGroup.asp，第 84 行

```

数据库使用 SQL Server 身份验证。当我使用与连接字符串中相同的用户/密码连接到 Visual Studio 中的数据库服务器时，存储过程不可见，但所有表都可见。

用户具有数据读取者和数据写入者角色以及对存储过程的显式执行权限。

我错过了什么？

更新：抱歉，服务器管理员错误地告知我它是 2000 服务器，而实际上它是 2005 服务器（在 Windows Server 2003 x64 上运行）。

* * *

## 回答 #1

> 赞同：70
> 
>             
> 
> 时间：2009-05-11T15:21:46.837

步行耻辱：

连接字符串指向实时数据库。错误消息完全准确 - 存储过程仅存在于开发数据库中。感谢所有提供出色答案的人，并为浪费您的时间而道歉。

* * *

## 回答 #2

> 赞同：11
> 
>             
> 
> 时间：2009-05-11T12:32:40.783

您可能需要检查存储过程的实际所有者是谁。如果它是特定的不同用户，那么这可能就是您无法访问它的原因。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2013-04-18T01:05:28.953

有时，当您使用参数调用存储过程时，也会发生这种情况。例如，如果您键入以下内容：

```
set @runProc = 'dbo.StoredProcedure'
 exec @runProc 
```

这将起作用，但是：

```
set @runProc = 'dbo.StoredProcedure ''foods'''
exec @runProc 
```

这将抛出错误“找不到存储过程 dbo.StoredProcedure 'foods'”，但是可以通过如下**括号**轻松克服：

```
set @runProc = 'exec dbo.StoredProcedure ''foods'''
exec (@runProc) 
```

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-05-11T13:28:39.700

确保您的架构名称在连接字符串中？

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2011-09-29T20:10:35.610

有2个原因：

**1- 存储过程名称**
当您在代码中声明存储过程时，请确保您不执行或执行关键字，例如：

C＃

```
string sqlstr="sp_getAllcustomers";// right way to declare it.

string sqlstr="execute sp_getAllCustomers";//wrong way and you will get that error message. 
```

从这段代码：

`MSDBHelp.ExecuteNonQuery(sqlconexec, CommandType.StoredProcedure, sqlexec);` 

`CommandType.StoreProcedure`  将仅查找存储过程名称并`ExecuteNonQuery`在后台执行存储过程。

**2-连接字符串：**

另一个原因是错误的连接字符串。查看连接字符串内部并确保您有连接，尤其是数据库名称等。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2018-06-04T13:14:08.630

我有：

使用 [**错误地点**]

去

前

宣布..

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2017-03-16T10:36:01.033

找不到存储过程？----意味着当你得到这个..我们的代码是这样的

```
String sp="{call GetUnitReferenceMap}";

stmt=conn.prepareCall(sp);

ResultSet rs = stmt.executeQuery();

while (rs.next()) {

currencyMap.put(rs.getString(1).trim(), rs.getString(2).trim()); 
```

我有 4 个数据库（样本 1、样本 2、样本 3）但是`stmt`搜索位置是`master`默认数据库，那么我们会得到异常。

我们应该提供数据库名称然后问题解决::

```
String sp="{call sample1..GetUnitReferenceMap}"; 
```

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2017-06-14T15:38:14.097

另一种检查的可能性。在这里列出，因为它只是发生在我身上并且没有被提及；-)

我不小心在名称末尾添加了一个空格字符。在我终于注意到它之前，我尝试了很多小时。弄清楚之后总是很简单的事情。

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2019-05-13T08:41:38.383

我有同样的问题。最终我找到了原因。我使用来自网络的代码来测试我的程序的输出。最后它有一个电话，`Drop(procedure)`所以我自己删除了它。

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2020-12-01T08:56:18.317

如果错误信息只出现在本地，请尝试打开sql文件并按下播放按钮。

# c# - 使用 NHibernate 加密和解密数据

> ID：847884
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2009-05-11T12:31:08.603
> 
>         
> 
> 标签：c#, mysql, nhibernate

我正在编写一个可公开访问的 Web 应用程序，其中将包含个人用户数据，例如姓名和出生日期，并且我需要以一种可能访问原始数据的人难以解密的形式加密这些数据. 我正在使用[Fluent NHibernate](http://fluentnhibernate.org/)、mySQL 和 C# 3.5。

1.  用户信息的行业标准加密和解密应该使用什么方法？加密方法不应依赖于数据库。

2.  如何告诉 nHibernate 对具有简单属性的某些映射类进行透明加密/解密，例如`StorageType = StorageType.Encrypted`. 我不介意生成的数据库表是否只有一列或两列，或者每个加密字段都有一列。根据我的发现，我应该从`IUserDataType`构造函数中创建自己的数据类型并加密数据。这个对吗？

* * *

## 回答 #1

> 赞同：12
> 
>             
> 
> 时间：2009-05-11T12:37:42.193

在真正的 Blue Peter 时尚中，这是我之前创建的一个。它依赖于提供者模式来获取加密算法，但你可以用你想要的任何东西替换它。

这会在您的域对象中公开一个字符串属性，但将其保存为表示加密形式的二进制（字节数组）。在我的提供者模式代码中，Encrypt 接受一个字符串并返回一个字节数组，而 Decrypt 则相反。

```
[Serializable]
public class EncryptedStringType : PrimitiveType
{
    public EncryptedStringType() : this(new BinarySqlType()) {}

    public EncryptedStringType(SqlType sqlType) : base(sqlType) {}

    public override string Name
    {
        get { return "String"; }
    }

    public override Type ReturnedClass
    {
        get { return typeof (string); }
    }

    public override Type PrimitiveClass
    {
        get { return typeof (string); }
    }

    public override object DefaultValue
    {
        get { return null; }
    }

    public override void Set(IDbCommand cmd, object value, int index)
    {
        if (cmd == null) throw new ArgumentNullException("cmd");
        if (value == null)
        {
            ((IDataParameter)cmd.Parameters[index]).Value = null;
        }
        else
        {
            ((IDataParameter)cmd.Parameters[index]).Value = EncryptionManager.Provider.Encrypt((string)value);
        }
    }

    public override object Get(IDataReader rs, int index)
    {
        if (rs == null) throw new ArgumentNullException("rs");
        var encrypted = rs[index] as byte[];
        if (encrypted == null) return null;
        return EncryptionManager.Provider.Decrypt(encrypted);
    }

    public override object Get(IDataReader rs, string name)
    {
        return Get(rs, rs.GetOrdinal(name));
    }

    public override object FromStringValue(string xml)
    {
        if (xml == null)
        {
            return null;
        }

        if (xml.Length % 2 != 0)
        {
            throw new ArgumentException(
                "The string is not a valid xml representation of a binary content.",
                "xml");
        }

        var bytes = new byte[xml.Length / 2];
        for (int i = 0; i < bytes.Length; i++)
        {
            string hexStr = xml.Substring(i * 2, (i + 1) * 2);
            bytes[i] = (byte)(byte.MinValue
                              + byte.Parse(hexStr, NumberStyles.HexNumber, CultureInfo.InvariantCulture));
        }

        return EncryptionManager.Provider.Decrypt(bytes);
    }

    public override string ObjectToSQLString(object value, Dialect dialect)
    {
        var bytes = value as byte[];
        if (bytes == null)
        {
            return "NULL";
        }
        var builder = new StringBuilder();
        for (int i = 0; i < bytes.Length; i++)
        {
            string hexStr = (bytes[i] - byte.MinValue).ToString("x", CultureInfo.InvariantCulture);
            if (hexStr.Length == 1)
            {
                builder.Append('0');
            }
            builder.Append(hexStr);
        }
        return builder.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-08-22T19:47:37.537

我会创建一个 EncryptionService 使用您想要的任何密钥加密字符串。然后我会在您的实体中创建 2 个属性。NHibernate 与之交互的一个（加密值）和您（或其他开发人员）与之交互的另一个将自动加密这些值。

请参阅：http: [//kockerbeck.blogspot.com/2009/08/fluent-nhibernate-encrypting-values.html](http://kockerbeck.blogspot.com/2009/08/fluent-nhibernate-encrypting-values.html)

下面是一个示例 EncryptionService、用户实体和 UserMap。

```
public class User
{
   private readonly EncryptionService _encryptionService =
                   new EncryptionService();
   public virtual int Id { get; set; }
   public virtual DateTime? DateOfBirth
   {
     get
     {
       return _encryptionService.DecryptObject<DateTime?>(DateOfBirthEncrypted);
     }
     set
     {
       DateOfBirthEncrypted= _encryptionService.EncryptString(value.Value
                                   .ToString("yyyy-MM-dd HH:mm:ss"));
     }
   }
   [Obsolete("Use the 'DateOfBirth' property -- this property is only to be used by NHibernate")]
   public virtual string DateOfBirthEncrypted { get; set; }
}

public sealed class UserMap : ClassMap<User>
{
  public UserMap()
  {
    WithTable("dbo.[User]");
    Id(x => x.Id, "[ID]");
    Map(x => x.DateOfBirthEncrypted, "DOB");
  }
} 
```

和加密服务：

```
using System;
using System.IO;
using System.Security.Cryptography;
using System.Text;

namespace Services
{
    public class EncryptionService : IEncryptionService 
    {
        /// <summary>
        /// Decrypts a string 
        /// </summary>
        /// <param name="encryptedString"></param>
        /// <returns></returns>
        public String DecryptString(string encryptedString)
        {
            if (String.IsNullOrEmpty(encryptedString)) return String.Empty;

            try
            {
                using (TripleDESCryptoServiceProvider cypher = new TripleDESCryptoServiceProvider())
                {
                    PasswordDeriveBytes pdb = new PasswordDeriveBytes("ENTERAKEYHERE", new byte[0]);
                    cypher.Key = pdb.GetBytes(16);
                    cypher.IV = pdb.GetBytes(8);

                    using (MemoryStream ms = new MemoryStream())
                    {
                        using (CryptoStream cs = new CryptoStream(ms, cypher.CreateDecryptor(), CryptoStreamMode.Write))
                        {
                            byte[] data = Convert.FromBase64String(encryptedString);
                            cs.Write(data, 0, data.Length);
                            cs.Close();

                            return Encoding.Unicode.GetString(ms.ToArray());
                        }
                    }
                }
            }
            catch
            {
                return String.Empty;
            }
        }

        /// <summary>
        /// Encrypts a string
        /// </summary>
        /// <param name="decryptedString"
        /// <returns></returns>
        public String EncryptString(string decryptedString)
        {
            if (String.IsNullOrEmpty(decryptedString)) return String.Empty;

            using (TripleDESCryptoServiceProvider cypher = new TripleDESCryptoServiceProvider())
            {
                PasswordDeriveBytes pdb = new PasswordDeriveBytes("ENTERAKEYHERE", new byte[0]);

                cypher.Key = pdb.GetBytes(16);
                cypher.IV = pdb.GetBytes(8);

                using (MemoryStream ms = new MemoryStream())
                {
                    using (CryptoStream cs = new CryptoStream(ms, cypher.CreateEncryptor(), CryptoStreamMode.Write))
                    {
                        byte[] data = Encoding.Unicode.GetBytes(decryptedString);

                        cs.Write(data, 0, data.Length);
                        cs.Close();

                        return Convert.ToBase64String(ms.ToArray());
                    }
                }
            }
        }

        /// <summary>
        /// Decrypts a given value as type of T, if unsuccessful the defaultValue is used
        /// </summary>
        /// <typeparam name="T"></typeparam>
        /// <param name="value"></param>
        /// <param name="defaultValue"></param>
        /// <returns></returns>
        public T DecryptObject<T>(object value, T defaultValue)
        {
            if (value == null) return defaultValue;

            try
            {
            Type conversionType = typeof(T);

            // Some trickery for Nullable Types
            if (conversionType.IsGenericType && conversionType.GetGenericTypeDefinition().Equals(typeof(Nullable<>)))
            {
                conversionType = new NullableConverter(conversionType).UnderlyingType;
            }

            return (T)Convert.ChangeType(DecryptString(Convert.ToString(value)), conversionType);
            }
            catch 
            {
                // Do nothing
            }

            return defaultValue;
        }
    }
} 
```

# java - 在 Java 中重命名 Zip 文件中的文件/文件夹？

> ID：847892
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-11T12:32:44.420
> 
>         
> 
> 标签：java, zip, rename

我有一个包含文件夹结构的 zip 文件，例如

*   主文件夹/

    *   子文件夹1/

    *   子文件夹2/

    *   子文件夹3/

        *   文件3.1

        *   文件3.2

我想重命名文件夹`main-folder`，让我们说`versionXY`在那个使用 Java 的 zip 文件中。

有没有比提取整个 zip 文件并使用新文件夹名称重新创建一个更简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-05-11T13:15:45.160

Zip 是一种存档格式，因此变异通常涉及重写文件。

zip 的一些特殊功能也妨碍了（zip 充满了“功能”）。除了存档末尾的中央目录外，每个组件文件前面都有其文件名。Zip 没有目录的概念——文件名只是恰好包含`"/"`字符的字符串（以及诸如`"../"`.

因此，您确实需要使用`ZipInputStream`and复制文件，并随时`ZipOutputStream`重命名。如果你真的想要，你可以重写文件，做你自己的缓冲。该过程确实会导致内容被重新压缩，因为标准 API 无法获取压缩形式的数据。

**编辑：** @Doval 指出@megasega 的[答案](https://stackoverflow.com/a/39038523/4725)在 NIO 中使用[Zip 文件系统提供程序](https://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html)，在 Java SE 7 中是新的（相对于这个答案）。它的性能可能不会很好，就像 RISC OS 的 GUI 中的存档文件系统一样三十年前。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-05-11T12:37:37.200

我认为您将能够使用[Commons Compress](http://commons.apache.org/compress/)找到此任务的帮助，尤其是[ZipArchiveEntry](http://commons.apache.org/compress/apidocs/org/apache/commons/compress/archivers/zip/ZipArchiveEntry.html)

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-05-11T14:56:23.713

我知道你问过 Java，但只是出于存档目的，我想我会写一篇关于 .NET 的说明。  

[DotNetZip](http://dotnetzip.codeplex.com)是一个用于 zip 文件的 .NET 库，允许重命名条目。正如 Tom Hawtin 的回复所述，目录不是 zip 文件元数据中的一流实体，因此，我所知道的任何 zip 库都没有公开“重命名目录”动词。但是有些库允许您重命名所有具有指示特定目录的名称的条目，从而为您提供所需的结果。

在 DotNetZip 中，它看起来像这样：

```
 var regex = new Regex("/OldDirName/.*$");
 int renameCount= 0;
 using (ZipFile zip = ZipFile.Read(ExistingZipFile))
 {
    foreach (ZipEntry e in zip)
    {
        if (regex.IsMatch(e.FileName))
        {
            // rename here
            e.FileName = e.FileName.Replace("/OldDirName/", "/NewDirName/");
            renameCount++;
        }
    }
    if (renameCount > 0)
    {
        zip.Comment = String.Format("This archive has been modified. {0} entries have been renamed.", renameCount);
        // any changes to the entries are made permanent by Save()
        zip.Save();  // could also save to a new zip file here
    }
 } 
```

您还可以在 using 子句中添加或删除条目。

如果您保存到同一个文件，则 DotNetZip 仅重写更改的元数据 - 条目标题和重命名条目的中央目录记录，这可以节省大型存档的时间。如果您保存到新文件或流中，则会写入所有 zip 数据。  

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2016-08-19T11:56:41.143

这是在耍花招。速度极快，因为它仅适用于中央目录而不适用于文件。

```
//  rezip( zipfile, "/main-folder", "/versionXY" );

import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.nio.file.FileSystem;
import java.nio.file.FileSystems;
import java.nio.file.FileVisitResult;
import java.nio.file.Files;
import java.nio.file.LinkOption;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.nio.file.SimpleFileVisitor;
import java.nio.file.attribute.BasicFileAttributes;

protected void rezip( String zipfile, String olddir, String newdir ) {

    Path zipFilePath = Paths.get( zipfile );
    try (FileSystem fs = FileSystems.newFileSystem( zipFilePath, null )) {
        Path oldpathInsideZipPath = fs.getPath( olddir );
        if( ! Files.exists( Paths.get( newdir ) ) )
            Files.createDirectory( Paths.get( newdir ) );

        if ( Files.exists( oldpathInsideZipPath, LinkOption.NOFOLLOW_LINKS ) ) {
            Files.walkFileTree(oldpathInsideZipPath, new SimpleFileVisitor<Path>() {
                 @Override
                 public FileVisitResult visitFile(Path file, BasicFileAttributes attrs)
                     throws IOException
                 {
                     if( file.toString().indexOf( olddir ) > -1 ){
                         String a = file.toString().replaceAll( olddir, newdir );
                         Path b = fs.getPath( a );
                         if( ! Files.exists( b.getParent() ) ){
                             Files.createDirectories( b.getParent() );
                         }
                         Files.move( file, b, LinkOption.NOFOLLOW_LINKS );
                     }
                     return FileVisitResult.CONTINUE;
                 }
                 @Override
                 public FileVisitResult postVisitDirectory(Path dir, IOException e)
                     throws IOException
                 {
                     if (e == null) {
                         Files.delete(dir);
                         return FileVisitResult.CONTINUE;
                     } else {
                         // directory iteration failed
                         throw e;
                     }
                 }
             });
        }
        fs.close();
    } catch ( Exception e ) {
        e.printStackTrace();
    }
} 
```

# .net - Visual Studio 安装和部署构建失败且没有错误

> ID：847893
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-05-11T12:33:03.327
> 
>         
> 
> 标签：.net, build-process, setup-deployment

我有一个设置和部署项目，在我们的构建服务器上，它在摘要中报告以下内容：

> ==========全部重建：25成功，2失败，0跳过==========

我不知道这两个失败的原因是什么，但我相信其中之一是 vdproj 项目，因为如果我在没有安装程序的情况下运行构建，则根本不会报告任何错误。“打包文件”消息与我的 PC 上的输出匹配，构建成功完成。

我确信这是一个环境问题，只是没有任何日志可以说明问题所在 - 只有摘要中的数字。

更奇怪的是，`setup.exe`and`myapp.msi`文件似乎生成得很好。我无法弄清楚失败的项目是什么，因为没有提到失败的项目。我所知道的是，如果我构建不包括安装项目的解决方案，摘要会显示没有错误。

谁能想到要检查的东西？

* * *

## 回答 #1

> 赞同：11
> 
>             
> 
> 时间：2009-05-15T12:30:54.640

最后的答案是它是一个已知的错误：[https ://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=317870](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=317870)

答案是修改包含 LINQ to SQL dbml 文件的项目文件 (*.csproj) 以删除一些东西，如下所示：

> 1.  关闭 VS 2008。
> 
> 2.  在记事本中打开包含 LINQ To SQL 项的项目文件。
> 
> 3.  删除以下行：
>     
>       [ItemGroup] 
>     
>        [Service Include="{3259AA49-8AA1-44D3-9025-A0B520596A8C}"/] 
>     
>       [/ItemGroup]
> 
>   
>   
> 
> 安装项目现在将成功构建。但是，如果您双击 DBML 文件以在 VS 2008 中打开设计器，则安装项目将再次停止构建。上述行*不会*重新添加到项目文件中，但安装项目无论如何都会停止构建。只需重新启动 VS 2008，它就会再次工作——直到您再次打开 DBML 设计器。一旦安装项目由于这个问题而失败，它永远不会成功构建，直到你重新启动 VS 2008。

[我最终从MS Connect 论坛主题](http://social.msdn.microsoft.com/forums/en-US/vstsstart/thread/d2c52a56-74fa-47b2-85d1-f5df685494ad/)中找到了答案（或至少是答案的链接）。这是[记录在案的解决方法](https://connect.microsoft.com/VisualStudio/feedback/Workaround.aspx?FeedbackID=317870)。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-15T05:09:10.443

（你没有说你有什么样的构建服务器。因为你标记了“.net”，我假设你正在使用 TFS 和 Team Build。）

Team Build 使用 MSBuild（实际上是 MSBuild）。MSBuild 无法构建 vdproj 文件。只有 Visual Studio 可以做到这一点。

因此，如果您包含包含 vdproj 文件的解决方案，那么它们将失败。（检查 vdproj 项目周围的构建日志，看看它们是否失败。）

阻止这些失败注册的一种方法是创建一个您为 Team Build 编译的配置，该配置不包括您的 vdproj 文件（如果失败的项目确实困扰着您）。

获取 msi 和 exe 文件的最佳方法是在 vdproj 项目上运行 Visual Studio。在构建完成后添加自定义目标并在您的项目上手动调用 Visual Studio。（除非您这样做，否则我不知道为什么会生成您的 msi 和 exe 文件。）

作为替代方案，请考虑 Windows Installer XML (WIX)。第 3 版（非常接近完整版本并且有一个稳定的测试版）使用 MSBuild。这意味着您的解决方案可以通过 Team Build 编译，无需任何特殊操作。唯一的缺点是 WIX 不能以“任何 CPU”为目标，但只要它针对特定平台，它就可以成为“任何 CPU”的解决方案级别目标的一部分。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-15T05:17:45.930

是的，我以前有过这个。

不确定您的设置，但试试这个是合适的：

首先，右键单击您的解决方案文件 > 属性 > 配置

在那里，使用构建复选框来试验哪些项目可以一起构建，哪些不可以。

此外，在您的文件系统中，删除所有项目的调试/发布文件夹。

最后，根据我的经验，此错误通常是由损坏/丢失的 web.config 引起的。

让我知道你怎样去

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2018-08-27T21:13:58.323

在我的情况下，由于版本格式不正确（“版本”项目属性），项目无法构建。接受的格式是 XXX，如 1.0.0 当我将其更改为 1.0.0.0 时，项目将无法构建。

# .net - GDI+ 中的一揽子 Alpha 组件

> ID：847899
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-11T12:35:24.163
> 
>         
> 
> 标签：.net, winforms, graphics, gdi+, alphablending

有没有办法可以设置影响所有后续 GDI/GDI+ 调用的 Alpha 值？换句话说，我希望为`Graphics`对象上的所有调用设置透明度。

（我正在寻找类似于`*Transform`函数如何影响`Graphics`它们被调用的对象的东西）

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:52:35.823

除非有什么我不知道的，否则 GDI 中没有实现此功能的工具。您是否正在寻找某种方法来更改在 GDI 上下文中绘制时使用的所有颜色的相对 alpha 值？我不认为这样的事情存在。

一个更好的主意可能是将您的颜色缓存在您自己的自定义存储库中，然后当您想要设置全局（或范围范围）的 alpha 值时，您可以使用它来操作这些颜色。显然，如果我有更多信息，我可能会想出一个更适合您的环境的解决方案，但这就是我可以根据问题中提供的内容提供的全部内容。

**编辑**

阅读您的评论后，我的建议是将您的绘画代码转换为一个函数，该函数接受一个`Graphics`对象、一个位置/大小（以及其他任何合适的，如果还不是这样的话）和一个透明度浮点数（范围从 0 - 1.0）。然后，您可以根据提供的透明度值在函数中创建颜色。

# python - 如何将腌制数据上传到 django FileField？

> ID：847904
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-05-11T12:36:38.887
> 
>         
> 
> 标签：python, django, file, upload, pickle

我想将在 Python 中生成的大型数据集存储在 Django 模型中。我的想法是将数据腌制为字符串并将其上传到我模型的 FileField。我的 Django 模型是：

```
#models.py
from django.db import models

class Data(models.Model):
    label = models.CharField(max_length=30)
    file = models.FileField(upload_to="data") 
```

在我的 Python 程序中，我想做以下事情：

```
import random, pickle

data_entry = Data(label="somedata")
somedata = [random.random() for i in range(10000)]
# Next line does NOT work 
#data_entry.file.save(filename, pickle.dumps(somedata)) 
```

我应该如何修改最后一行以`somedata`保存`file`用参数定义的路径`upload_to`？

* * *

## 回答 #1

> 赞同：10
> 
>             
> 
> 时间：2009-05-11T15:48:04.390

根据对问题的回答，我提出了以下解决方案：

```
from django.core.files.base import ContentFile
import pickle

content = pickle.dumps(somedata)
fid = ContentFile(content)
data_entry.file.save(filename, fid)
fid.close() 
```

所有这些都是在服务器端完成的，并且不允许用户上传泡菜。我对其进行了测试，一切正常，但我愿意接受任何建议。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T13:46:38.690

在您的数据库中，*文件*属性只是文件的路径。因此，由于您没有进行实际上传，因此您需要将文件存储在磁盘上，然后将路径保存在数据库中。

```
f = open(filename, 'w')
pickle.dump(somedata, f)
f.close()
data_entry.file=filename
data_entry.save() 
```

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:40:01.627

将数据存储在文本字段中会不会更好？毕竟，这不是文件上传。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T15:21:23.233

我从来没有这样做过，但是基于阅读一些相关代码，我首先研究创建 django.core.files.base.ContentFile 的实例并将其分配为字段的值。

* * *

## 回答 #5

> 赞同：-3
> 
>             
> 
> 时间：2009-07-08T10:21:40.973

**注意：*请参阅下面的其他答案和评论***- 旧信息和损坏的链接已删除（无法删除曾经接受的答案）。

Marty Alchin 在 Pro Django 的第 3 章中对此有一个部分，请在[此处查看](http://ericholscher.com/blog/2009/jan/21/review-pro-django-marty-alchin/)。

# c# - c#中类的getter和setter

> ID：847905
> 
>         
> 
> 赞同：17
> 
>         
> 
> 时间：2009-05-11T12:37:32.893
> 
>         
> 
> 标签：c#, class, member, setter, getter

假设我们有一个带有属性和 getter/setter 的类 InnerClass。我们还有一个包含 InnerClass 的类 OuterClass。

例如

```
class InnerClass
{
    private int m_a;
    private int m_b;

    public int M_A
    {
        get
        {
             return m_a;
        }
        set
        {
             m_a = value;
        }
     }
}

class OuterClass
{
    private InnerClass innerClass
} 
```

我将如何为 OuterClass 的 innerClass 成员实现正确的 getter 和 setter？

提前致谢！

* * *

## 回答 #1

> 赞同：27
> 
>             
> 
> 时间：2009-05-11T12:40:09.253

语法不会有任何不同。只是...

```
public InnerClass InnerClass
{
    get { return innerClass; }
    set { innerClass = value; }
} 
```

顺便说一句，如果您在 .NET 3.5 中使用 C#，那么您可以使用自动属性生成功能，前提是您所拥有的只是一个简单的属性，它只是读取和写入后备存储（就像上面那样）。语法类似于抽象属性的语法：

```
public InnerClass InnerClass { get; set; } 
```

这会自动生成一个私有成员用于存储，然后在 中读取它`get`并在`set`.

* * *

## 回答 #2

> 赞同：22
> 
>             
> 
> 时间：2009-05-11T12:57:13.753

最优雅的方法是使用隐式 getter 和 setter：

```
class InnerClass
{
  public int a{ get; set; }
  public int b{ get; set; }
}

class OuterClass
{
  public InnerClass innerClass{ get; set; }
} 
```

这与以下内容隐含相同：

```
class InnerClass
{
    private int _a;
    public int a
    {
        get
        {
            return _a;
        }
        set
        {
            _a = value;
        }
    }

    private int _b;
    public int b
    {
        get
        {
            return _b;
        }
        set
        {
            _b = value;
        }
    }
}

class OuterClass
{
    private InnerClass _innerClass;
    public InnerClass innerClass
    {
        get
        {
            return _innerClass;
        }
        set
        {
            _innerClass = value;
        }
    }
} 
```

这两个定义隐含地相同 - 减去相当多的击键。在第一个示例中，编译器将在幕后实现必要的私有字段，因此您不必这样做。但是，第二个可以让您更好地控制正在发生的事情。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-05-11T12:40:47.193

```
public InnerClass InnerClass
    {
        get
        {
             return innerClass;
        }
        set
        {
             innerClass = value;
        }
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:45:32.593

这取决于内部类应该如何工作。外部类可能需要“拥有”内部类，在这种情况下：

```
public InnerClass InnerClass{
  get{ return innerClass; }
  set{ innerClass.CopyFrom(value); /* Pseudo method call */ }
} 
```

通过这样做，您可以防止外部代码操作实例，除非通过 OuterClass..

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:46:10.893

如果您的意思是访问内部类成员而不暴露内部类本身，则可以使用以下代码。如果您只想公开`this.innerClass`，则公开字段的方式没有区别`InnerClass`。

```
class OuterClass
{
    private InnerClass innerClass

    public int M_A
    {
        get
        {
            if (this.innerClass != null)
            {
                 return this.innerClass.M_A;
            }
            else
            {
                throw new InvalidOperationException();
            }
        }
        set
        {
            if (this.innerClass != null)
            {
                 this.innerClass.M_A = value;
            }
            else
            {
                throw new InvalidOperationException();
            }
        }
    }
} 
```

# asp.net - 在中等信任下通过 GMail SMTP 发送电子邮件

> ID：847912
> 
>         
> 
> 赞同：10
> 
>         
> 
> 时间：2009-05-11T12:39:32.860
> 
>         
> 
> 标签：asp.net, smtp, medium-trust

我需要从我的应用程序发送一封电子邮件，该应用程序将在中等信任下运行。我当前在完全信任下工作正常的电子邮件发送代码在中等信任下抛出 SecurityException

```
[SecurityException: Request for the permission of type 'System.Net.Mail.SmtpPermission, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed.] 
```

检查我的 machine.config 和相关文件显示我的 SMTP 访问权限仅限于 Connect。

```
<SecurityClass Name="SmtpPermission" Description="System.Net.Mail.SmtpPermission, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/> 
```

和

```
<IPermission class="SmtpPermission" version="1" Access="Connect"/> 
```

根据 MSDN，Connect 仅允许端口 25 上的请求。但是 Gmail 服务器在端口 587 上工作。有什么解决方法吗？建议？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-07-15T10:12:47.663

Gmail 也接受端口 25 ；你只需给端口 25；它为我工作。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2012-05-13T19:51:54.700

在`medium trust`，是的，您“卡”在端口 25 上。如果您可以/有权访问（我指的是您的网络主机）来创建自定义配置文件：

```
<IPermission class="SmtpPermission" version="1" Unrestricted="true" /> 
```

参考：

*   MSDN (Alvar Garcia) - [ASP.NET 未以完全信任方式运行时的 SMTP 问题](http://blogs.msdn.com/b/alvar/archive/2010/02/08/smtp-problems-when-asp-net-is-not-running-in-full-trust.aspx)

*   Rick Strahl -[中等信任的 SmtpClient](http://www.west-wind.com/weblog/posts/2008/Jan/18/SmtpClient-in-Medium-Trust)

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2012-05-07T19:37:56.783

你试过465端口吗？

[http://support.google.com/mail/bin/answer.py?hl=en&answer=13287](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)

您还可以创建 Web 服务，并将电子邮件从您的应用程序发送到 Web 服务。然后以完全信任的方式运行 Web 服务。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2012-05-14T17:48:41.683

通常，网络主机希望您使用他们自己的 SMTP 服务器来处理您的出站电子邮件。我不知道这是否会给您的特定场景带来问题，但如果不是，您可能应该联系主机并询问他们的 SMTP 服务器是什么，而不是尝试使用外部服务器。

# c# - 如何实现诸如会话超时之类的winform会话，尤其是

> ID：847920
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-11T12:40:57.490
> 
>         
> 
> 标签：c#, winforms, session

嗨，我计划在窗口应用程序中实现像会话这样的功能，但最初不是为了保存使用信息。主要目的是在会话到期后注销或至少提示输入登录名/密码。我找不到有关在线超时功能的信息。如果有人可以向我指出一些资源或与我们分享他的经验，我将非常感激。感谢阅读此 PS：我正在使用 C#.NET 2.0 和 Visual Studio 2005 merci。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-18T18:16:21.173

我已经提出了一些关于该会话的实现，我想特别分享给那些有同样问题的人。它并不完美，我希望像你这样的聪明人给我一些指导，让它足够被接受。首先我创建了一个类用户会话

```
using System.Timers;
public class usersession
{
    private static bool sessionalive;
    private static Timer usertimer;

    public static bool SessionAlive
    {
        get { return sessionalive; }
        set { sessionalive = value; }
    }

    public static void  BeginTimer()
    {
        try
        {
           SessionAlive = true;
            //usertimer.Start();
           usertimer = new Timer(int.Parse(ConfigurationManager.AppSettings["sessiontime"].ToString()));
            usertimer.Enabled = true;
           usertimer.AutoReset = false;  
           usertimer.Elapsed += new ElapsedEventHandler(DisposeSession);

        }
        catch (Exception ex)
        {

            return;
        }

    }

    private static void  DisposeSession(object source, ElapsedEventArgs e)
    {
        try
        {
            SessionAlive = false;
        }
        catch (System.Exception ex)
        {
            return;
        }

    }

    public static void ResetTimer()
    {
        try
        {
            SessionAlive = true;
            usertimer.Stop();
            usertimer.Start();
        }
        catch (Exception ex)
        {

            return;
        }

    }

} 
```

这是一个 mdi 应用程序，所以在主窗体中我有函数 startsession

```
public frMain()
    {
        InitializeComponent();
        StartSession();
        //SessionChecker();
    }
    public void StartSession()
   {
       try
       {
          usersession.BeginTimer();
       }
       catch (System.Exception ex)
       {
           MessageBox.Show(ex.ToString());
       }

   } 
```

所以任何时候用户点击某个东西，我们都会检查 usersession.SessioAlive 属性，就像在这个 switch case 片段中一样

```
case "transfer":
                if (!usersession.SessionAlive)
                {
                    new LoginForm().ShowDialog();
                }
                MessageBox.Show("cash back transfert page");
                break; 
```

并且在 loginForm 里面是 login 是正确的，我们称之为 usersession.ResetTimer()

```
this.DialogResult = DialogResult.OK;
        usersession.ResetTimer();
        this.Close(); 
```

现在我真的希望在后台运行检查，这就是我需要你的建议。在这里我使用 forms.timer 来创建一个小工作，但由于 forms.timer 没有自动重置它做一个无限循环。这就是它。主窗体内

```
 private void SessionChecker()
        {
            try
            {
                check = new Timer();
                check.Enabled = true;
                check.Interval = 1000;
                check.Tick += new EventHandler(check_Tick);
            }
            catch (Exception)
            {

                throw;
            }

        }

    void check_Tick(object sender, EventArgs e)
    {
        try
        {
            if (!usersession.SessionAlive)
            {
                new LoginForm().ShowDialog();
                check.Stop();

            }

        }
        catch (System.Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }

    } 
```

所以你认为我应该做什么，以便在会话到期时提示输入凭据之前不需要用户执行操作。感谢您阅读这么长的内容。:)

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-05-11T12:45:19.820

您最简单的解决方案是使用 a`Timer`并将`Duration`属性设置为您希望超时的毫秒数。每当您遇到活动时，您可以通过调用`Stop`然后立即调用来重置计时器`Start`。`Timer`在'事件中放置您想要的任何代码`Tick`（假设这是 a `System.Windows.Forms.Timer`），您就可以准备就绪了。

# sifr - sIFR + （使用图像的其他方法也不起作用）

> ID：847922
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-11T12:41:25.583
> 
>         
> 
> 标签：sifr

我尝试了很多次并搜索了这个板，但我不能做这样一个简单的事情：

[http://xs.to/xs.php?h=xs139&d=09201&f=menu676.gif](http://xs.to/xs.php?h=xs139&d=09201&f=menu676.gif)

我想呈现这样的菜单：

项目 1 | 项目 2 | 项目 3 | .... ETC...

“项目 1”和管道字符“|” = sIFR 呈现的文本

* * *

HTML：

```
<div id="menu"> item 1 <span class="pipe"> | </span> item 2 <span class="pipe"> | </span> </div> 
```

* * *

这部分在我最底部的 HTML 中：

```
<script type="text/javascript">

var metaroman2 = 

{ src: 'shared/sifr/metaroman2.swf' , ratios:[....7, 1.32....] }; 
sIFR.activate(metaroman2);

sIFR.replace(metaroman2, {

selector: '#menu', css: ['.sIFR-root { background-color: #F9F9F9; color: #1F2956; font-weight:bold;}'], wmode: "transparent" }); 
sIFR.replace(metaroman2, {

selector: '.pipe', css: ['.sIFR-root { background-color: #F9F9F9; color: #1F2956;}'], wmode: "transparent" }); 
</script> 
```

* * *

CSS：

```
.sIFR-active .pipe {

visibility : hidden; line-height : 1em; margin-left : 5px; margin-right : 5 px;
} 
.sIFR-active #menu {

visibility : hidden; line-height : 1em;
} 
```

* * *

问题是，“|” 字符被放在单词的末尾，（5px）之间没有空格。

我想要它：项目 1 [5px 空间] | [5px 空间] 项目 2

我得到了什么：项目 1|项目 2

**其他方法：**

如果我用图像尝试它，图像根本不会显示。（“sIFR.fitExactly = true”已在 sifr-config 中设置）

我对“图像”的意思是：代替管道符号，代表管道符号的图像。

* * *

html:

```
<div id="menu"> item 1 <img src=...> item 2 <img src=...> </div> 
```

* * *

CSS：

```
.sIFR-active #menu {

visibility : hidden; line-height : 1em;
} 
```

* * *

脚本：这部分在我最底部的 HTML 中：

```
<script type="text/javascript">

var metaroman2 = 

{ src: 'shared/sifr/metaroman2.swf' , ratios:[....7, 1.32....] }; 
sIFR.activate(metaroman2);

sIFR.replace(metaroman2, {

selector: '#menu', css: ['.sIFR-root { background-color: #F9F9F9; color: #1F2956; font-weight:bold;}'], wmode: "transparent" }); 

</script> 
```

对于混乱的代码，我很抱歉，但我希望你能理解它。

（编辑：已经使用 sIFR 几天了，简单的标题完美地替换了 ratio 的工作，但上面的内容让我很生气）

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T13:23:38.493

将每个菜单项包装成单独的元素，并将其替换为 sIFR 选择器，不要替换管道。仅使用 CSS 将它们包装到 span 和 style 中。

那些被替换的项目和跨度应该都是浮动块元素。

html:

```
<div id="menu"><a href="#">Item 1</a><span>|<span><a href="#">Item2</a>... 
```

CSS：

```
#menu a , #menu span {
    display: block;
    float: left;
} 
```

# qt - 如何确定 PyQt 应用程序何时空闲？

> ID：847924
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-11T12:41:39.953
> 
>         
> 
> 标签：qt, events, concurrency, pyqt

我想知道我的应用程序何时空闲，以便我可以预加载一些内容。PyQt 中是否有事件或类似的实现？

（我也可以用线程来做，但这感觉太复杂了。）

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-11T17:17:50.373

您至少有两种不同的选择，可以使用线程或使用计时器。Qt 的 QThread 类提供了一个优先级属性，您可以设置该属性以使其仅在没有其他线程运行时进行处理，其中包括 GUI 线程。另一种选择是单发计时器。超时为 0 毫秒的 QTimer 将事件放在事件队列的后面，以便首先处理所有已激活或已调度的事件和同步函数。

在代码中，这两个选项如下所示：

```
// (1) use idle thread processing
MyQThreadSubclass idleThread;
idleThread.run(QThread::IdlePriority);

// (2) use QTimer::singleShot
QTimer::singleShot(0, receiver, SLOT(doIdleProcessingChunk)); 
```

如果您使用单发 QTimer，请注意您进行了多少处理，因为您仍然可以阻止 Gui。您可能希望将其分成块，以便 GUI 不会开始滞后：

```
// slot
void doIdleProcessingChunk() {
    /* ... main processing here ... */
    if (chunksRemain())
        QTimer::singleShot(0, receiver, SLOT(doIdleProcessingChunk));
} 
```

显然，上面是 C++ 语法，但要回答 PyQt，请使用单次计时器。在 Python 中，如果被调用的实现是在 Python 中执行的，那么[全局解释器锁](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)基本上会使您的大部分并发变得毫无意义。

然后，您还可以选择使用 Python 线程或 Qt 线程，两者都有不同的原因。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T13:19:46.040

看看[QAbstractEventDispatcher](http://doc.trolltech.com/4.5/qabstracteventdispatcher.html)。**但是**......我仍然建议使用线程。原因：

1.  它将是便携式的

2.  如果您在代码中出错，事件循环将被破坏 -> 您的应用程序可能会挂起、突然退出等。

3.  在预加载发生时，您的应用程序会挂起。除非您可以一次预加载一个内容，否则不会处理任何事件，它们都非常小，加载只需几毫秒等。

使用线程并在内容准备好时向主线程发送信号。这要简单得多。

# iphone - 在现有的 iPhone 内置应用程序中添加新字段

> ID：847928
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-11T12:42:27.097
> 
>         
> 
> 标签：iphone

希望你们都很好，心情最好。

我在此有一个疑问请教您，请通过给出解决方案来帮助我。

我需要在现有的 iPhone 内置联系人应用程序中添加一个自定义字段。

我的意思是我需要允许用户为不同的联系人设置不同的图标或徽标。所以我需要在现有应用程序中添加一个字段，即图标或徽标。

但是我不知道该怎么做，天气是否可能，或者是否有任何替代解决方案？

请张贴您的答案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T19:14:43.787

您不能将字段添加到内置通讯簿数据存储中。您也许可以通过以下两种解决方案之一来实现您的目标：

*   制作数据的副本并将您的数据添加到其中。你会遇到同步问题

*   使用 AB 信息的某些属性（可能是 ABPropertyID）来键入引用图标的本地数据库。

我假设您真正想要做的是向通讯簿应用程序添加一个图标 - 当然没有办法做到这一点。

# c# - 如何同时使用 jquery 和服务器端验证客户端？

> ID：847930
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-11T12:43:40.977
> 
>         
> 
> 标签：c#, asp.net, jquery

我真的很喜欢 jquery 验证插件，看起来简洁时尚且易于访问，但正如您所知，JavaScript 可以关闭并繁荣您的用户可以输入他想要的任何内容，因此您也应该在服务器上进行验证，那么这里最好的方法是什么？

使用 jquery 和服务器端进行双重验证，还是有更好的可靠安全方式？

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-05-11T12:46:57.677

唯一的方法是使用 jQuery 进行验证，然后在服务器端再次进行相同的验证。

客户端验证只是为了让您的应用程序更加用户友好。因此，验证可以节省用户往返服务器的一些字段，这将有助于更好的用户体验。

始终在服务器端进行验证。这可以保护您免受对您的应用程序的攻击。它还有助于向您的代码提供错误输入。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-11T12:47:03.293

双重验证可能是唯一的方法 - 如果用户禁用 javascript，则客户端不会执行任何验证，因此您必须进行服务器端验证。另一方面 - 为了大多数用户的方便 - 应该有一个客户端验证机制，以便最大限度地减少到服务器的往返。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:53:06.320

这就是为什么我仍然使用 Asp.Net 验证。因为，只需最少的努力，您的数据就会在客户端和服务器上得到验证。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:55:52.320

您应该始终验证您的数据服务器端，无论是否使用 jQuery，永远不要信任传入的数据。

# python - 如何找到 Python 函数的参数数量？

> ID：847936
> 
>         
> 
> 赞同：211
> 
>         
> 
> 时间：2009-05-11T12:45:16.090
> 
>         
> 
> 标签：python, function

如何找到 Python 函数的参数数量？我需要知道它有多少普通参数以及有多少命名参数。

例子：

```
def someMethod(self, arg1, kwarg1=None):
    pass 
```

此方法有 2 个参数和 1 个命名参数。

* * *

## 回答 #1

> 赞同：188
> 
>             
> 
> 时间：2016-12-16T16:15:31.770

从 开始，以前接受的答案已被[*弃用*](https://docs.python.org/3/library/inspect.html#inspect.getargspec)。你现在应该选择取代它的类，`Python 3.0`而不是使用它。`inspect.getargspec``Signature`

[`signature`通过函数](https://docs.python.org/3/library/inspect.html#inspect.signature)为函数创建签名很容易：

```
from inspect import signature

def someMethod(self, arg1, kwarg1=None):
    pass

sig = signature(someMethod) 
```

现在，您可以通过`str`ing 快速查看其参数：

```
str(sig)  # returns: '(self, arg1, kwarg1=None)' 
```

或者您也可以通过`sig.parameters`.

```
params = sig.parameters 
print(params['kwarg1']) # prints: kwarg1=20 
```

此外，您还可以调用`len`以`sig.parameters`查看此函数所需的参数数量：

```
print(len(params))  # 3 
```

映射中的每个条目`params`实际上是一个[`Parameter`对象](https://docs.python.org/3/library/inspect.html#inspect.Parameter)，它具有使您的生活更轻松的更多属性。例如，现在可以通过以下方式轻松获取参数并查看其默认值：

```
kwarg1 = params['kwarg1']
kwarg1.default # returns: None 
```

对于 中包含的其余对象也是如此`parameters`。

* * *

至于 Python`2.x`用户，虽然`inspect.getargspec` *没有*被弃用，但该语言很快就会:-)。该`Signature`课程在该`2.x`系列中不可用，也不会。所以你仍然需要使用[`inspect.getargspec`](https://docs.python.org/3/library/inspect.html#inspect.getargspec).

至于在 Python 2 和 3 之间转换，如果您的代码依赖`getargspec`于 Python 2 的接口并且切换到`signature`in`3`太困难，*那么您确实可以选择*使用[`inspect.getfullargspec`](https://docs.python.org/3/library/inspect.html#inspect.getfullargspec). 它提供了一个与（单个可调用参数）类似的接口`getargspec`，以便获取函数的参数，同时处理一些其他情况`getargspec`：

```
from inspect import getfullargspec

def someMethod(self, arg1, kwarg1=None):
    pass

args = getfullargspec(someMethod) 
```

与 一样`getargspec`，`getfullargspec`返回`NamedTuple`包含参数的 a。

```
print(args)
FullArgSpec(args=['self', 'arg1', 'kwarg1'], varargs=None, varkw=None, defaults=(None,), kwonlyargs=[], kwonlydefaults=None, annotations={}) 
```

* * *

## 回答 #2

> 赞同：119
> 
>             
> 
> 时间：2009-05-11T12:49:16.737

```
import inspect
inspect.getargspec(someMethod) 
```

查看[检查模块](http://docs.python.org/library/inspect.html#classes-and-functions)

* * *

## 回答 #3

> 赞同：33
> 
>             
> 
> 时间：2013-08-23T02:58:21.300

```
someMethod.func_code.co_argcount 
```

或者，如果当前函数名称未确定：

```
import sys

sys._getframe().func_code.co_argcount 
```

* * *

## 回答 #4

> 赞同：22
> 
>             
> 
> 时间：2020-05-21T18:19:15.777

`func.__code__.co_argcount`给你**之前的*****任何****参数**的数量* ****`*args`**** 

 ****`func.__kwdefaults__`给你一个*关键字参数的字典* **AFTER** `*args`

`func.__code__.co_kwonlyargcount`等于`len(func.__kwdefaults__)`

`func.__defaults__`为您提供**之前**出现的*可选参数的值* **`*args`** 

 **这是一个简单的例子：

[![插图](https://i.stack.imgur.com/ODvKR.png)](https://i.stack.imgur.com/ODvKR.png)

```
>>> def a(b, c, d, e, f=1, g=3, h=None, *i, j=2, k=3, **L):
    pass

>>> a.__code__.co_argcount
7
>>> a.__defaults__
(1, 3, None)
>>> len(a.__defaults__)
3
>>> 
>>> 
>>> a.__kwdefaults__
{'j': 2, 'k': 3}
>>> len(a.__kwdefaults__)
2
>>> a.__code__.co_kwonlyargcount
2 
```

* * *

## 回答 #5

> 赞同：16
> 
>             
> 
> 时间：2009-05-11T12:51:47.433

[检查.getargspec()](http://docs.python.org/library/inspect.html#inspect.getargspec)

> 获取函数参数的名称和默认值。返回一个包含四件事的元组：（args、varargs、varkw、defaults）。args 是参数名称的列表（它可能包含嵌套列表）。varargs 和 varkw 是 * 和 ** 参数的名称或无。defaults 是默认参数值的元组，如果没有默认参数，则为 None；如果这个元组有 n 个元素，它们对应于 args 中列出的最后 n 个元素。
> 
> 在 2.6 版更改: 返回一个命名元组 ArgSpec(args, varargs, keywords, defaults)。

请参阅[can-you-list-the-keyword-arguments-a-python-function-receives](https://stackoverflow.com/questions/196960/can-you-list-the-keyword-arguments-a-python-function-receives)。

* * *

## 回答 #6

> 赞同：7
> 
>             
> 
> 时间：2013-10-31T12:29:32.763

Adding to the above, I've also seen that the most of the times help() function really helps

For eg, it gives all the details about the arguments it takes. 

```
help(<method>) 
```

gives the below

```
method(self, **kwargs) method of apiclient.discovery.Resource instance
Retrieves a report which is a collection of properties / statistics for a specific customer.

Args:
  date: string, Represents the date in yyyy-mm-dd format for which the data is to be fetched. (required)
  pageToken: string, Token to specify next page.
  parameters: string, Represents the application name, parameter name pairs to fetch in csv as app_name1:param_name1, app_name2:param_name2.

Returns:
  An object of the form:

    { # JSON template for a collection of usage reports.
    "nextPageToken": "A String", # Token for retrieving the next page
    "kind": "admin#reports#usageReports", # Th 
```

* * *

## 回答 #7

> 赞同：5
> 
>             
> 
> 时间：2019-02-13T02:38:02.973

对于想要在 Python 2 和 Python 3.6+ 之间以可移植方式执行此操作的人来说是个好消息：使用`inspect.getfullargspec()`方法。它适用于 Python 2.x 和 3.6+    

正如 Jim Fasarakis Hilliard 和其他人所指出的那样，它曾经是这样的：

1\. 在 Python 2.x 中：使用`inspect.getargspec()`

2\. 在 Python 3.x 中：使用签名，因为`getargspec()`和`getfullargspec()`已被弃用。  

然而，从 Python 3.6 开始（根据大众的需求？），事情变得更好了：   

从 Python 3[文档页面](https://docs.python.org/3/library/inspect.html#inspect.getfullargspec)：

> **检查.getfullargspec（函数）**
> 
>   
>   
> 
> *在 3.6 版中更改*：此方法以前`signature()`在 Python 3.5 中被记录为已弃用，但该决定已被撤销，以便为从遗留`getargspec()`API 迁移的单源 Python 2/3 代码恢复明确支持的标准接口。

* * *

## 回答 #8

> 赞同：3
> 
>             
> 
> 时间：2018-09-30T07:55:22.117

inspect.getargspec() 以满足您的需求

```
from inspect import getargspec

def func(a, b):
    pass
print len(getargspec(func).args) 
```

* * *

## 回答 #9

> 赞同：3
> 
>             
> 
> 时间：2017-05-08T10:47:48.873

正如其他答案所暗示的那样，`getargspec`只要被查询的东西实际上是一个函数，它就可以很好地工作。它不适用于,等*内置*函数，在这种情况下会抛出异常：`open``len`

```
TypeError: <built-in function open> is not a Python function 
```

以下函数（受此[答案](https://stackoverflow.com/a/3276823/712506)启发）演示了一种解决方法。它返回预期的 args 数量`f`：

```
from inspect import isfunction, getargspec
def num_args(f):
  if isfunction(f):
    return len(getargspec(f).args)
  else:
    spec = f.__doc__.split('\n')[0]
    args = spec[spec.find('(')+1:spec.find(')')]
    return args.count(',')+1 if args else 0 
```

`__doc__`这个想法是从字符串中解析出函数规范。显然，这依赖于所述字符串的格式，因此几乎不可靠！

* * *

## 回答 #10

> 赞同：2
> 
>             
> 
> 时间：2021-10-23T14:25:32.313

你得到参数的数量（用你的函数名替换“函数”）：

```
function.__code__.co_argcount ## 2 
```

以及参数的名称：

```
function.__code__.co_varnames ## ('a', 'b') 
```

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2020-02-19T10:35:46.180

#### 在：

```
import inspect 

class X:
    def xyz(self, a, b, c): 
        return 

print(len(inspect.getfullargspec(X.xyz).args)) 
```

#### 出去：

> 4

* * *

注意：如果 xyz 不在 X 类中并且没有“self”而只有“a,b,c”，那么它会打印 3。

对于低于 3.5 的 python，您可能希望在上面的代码中替换`inspect.getfullargspec`为`inspect.getargspec`。

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2021-06-24T21:02:24.310

假设您可能正在处理基于类的`method`s 或简单`function`的 s，您可以执行以下操作。

如果输入是类方法（因此包括`self`），这将自动减去一个输入。

```
import types
def get_arg_count(fn):
    extra_method_input_count=1 if isinstance(fn, types.MethodType) else 0
    return fn.__code__.co_argcount-extra_method_input_count 
```

然后你可以根据需要申请函数或方法：

```
def fn1(a, b, c):
    return None

class cl1:
    def fn2(self, a, b, c):
        return None

print(get_arg_count(fn1)) #=> 3
print(get_arg_count(cl1().fn2)) #=> 3 
```

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2021-05-02T14:21:47.537

Dimitris Fasarakis Hilliard 接受的答案建议以字符串格式获取参数，但我认为在解析此字符串时可能会出错，因此我直接使用检查模块创建了一个参数列表

```
import inspect
def my_function(a,b,c):
    #some code
    pass

result=list(inspect.signature(my_function).parameters.keys())
print(result)
['a','b','c'] 
```

# database - 了解数据库插入

> ID：847940
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-11T12:45:44.327
> 
>         
> 
> 标签：database

大多数数据库都支持某种形式的“insert into select...”语句。

```
insert into a
select value from b; 
```

这是如何实现的？

我的理解：在语句开始执行的那个时间点存在的行有资格被拾取，并将它们插入到表 a 中。同时，新值可以插入到表 b 中，因为查询已经开始执行，所以它们不会被“考虑”。

我的理解接近准确吗？非常感谢任何关于此的参考文档。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-15T22:11:44.820

大多数现代数据库的答案是[多版本并发控制](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)。

基本上每一行都有一个时间戳，从它可见的那一刻开始。然后，select 会考虑隔离级别，以查看由在当前语句之前提交的事务添加的行（对于已提交的读隔离）或在当前事务之前（对于可序列化的隔离）是否应该对 select 可见。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:55:26.113

由于您不是特别在谈论任何引擎，因此可能会发生这种情况。也可能有一个点，数据库当时只选择一行。这完全取决于引擎，以及应用于数据库的锁。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T13:18:46.463

SQL Server 选择性（利用您也想查看的索引） - [http://blog.namwarrizvi.com/?p=157](http://blog.namwarrizvi.com/?p=157) 
- [http://www.sqlsolutions.com/articles/articles/How_Values_with_Irregular_Selectivity_Impact_SQL_Server_Database_Performance .htm](http://www.sqlsolutions.com/articles/articles/How_Values_with_Irregular_Selectivity_Impact_SQL_Server_Database_Performance.htm) 
- [http://sqlserverpedia.com/blog/sql-server-bloggers/index-columns-selectivity-and-inequality-predicates/](http://sqlserverpedia.com/blog/sql-server-bloggers/index-columns-selectivity-and-inequality-predicates/)

Oracle 选择性（这些文章再次提到索引选择性） - [http://www.akadia.com/services/ora_index_selectivity.html](http://www.akadia.com/services/ora_index_selectivity.html) 
- [http://courses.csusm.edu/cs643yo/slides/optimization.htm](http://courses.csusm.edu/cs643yo/slides/optimization.htm)（谈论架构，在这里可能对你更有用）

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:54:13.557

“可以插入新值”，具体取决于您的隔离级别；例如，如果它是可序列化的，那将不会发生。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:57:47.980

我想存在特定于数据库的差异，但我可以为其中的大多数提供一般性答案。当执行“insert as select”时，RDBMS 会去执行 SELECT 语句。与任何其他 SELECT 语句一样，结果将存储在内存中的“虚拟表”中​​（每个数据库及其自己的缓存和 RAM 管理）。然后，INSERT 语句变为普通的多行 INSERT 语句，因为内存中的结果与通过命令行提供的数据完全一样。在这个阶段，如果任何新行将被插入到“选定”表中，它不会影响 INSERT 语句。最后，如果 SELECT 结果产生太多行，或者引用锁定的表，事情可能会发生变化，因为 RDBMS 会以不同的方式选择值。

# javascript - 正则表达式剥离 BBCode

> ID：847947
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-11T12:48:00.530
> 
>         
> 
> 标签：javascript, regex, bbcode

我需要一个正则表达式来去除字符串中的任何 BBCode。我有以下（和一个带有标签的数组）：

```
new RegExp('\\[' + tags[index] + '](.*?)\\[/' + tags[index] + ']'); 
```

它可以很好地获取 [tag]this[/tag] ，但是在使用 [url= [http://google.com]this[/url]](http://google.com]this[/url])时失败。

我需要改变什么？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-09-27T14:47:12.147

我遇到了这个线程，发现它有助于让我走上正确的轨道，但这是我花了两个小时为 JavaScript 构建的终极线程（这是我的第一个 RegEx！），并且经过测试可以很好地处理疯狂的嵌套甚至错误嵌套的字符串，它只是工作！：

```
string = string.replace(/\[\/?(?:b|i|u|url|quote|code|img|color|size)*?.*?\]/img, ''); 
```

如果 string = "[b][color=blue][url=www.google.com]Google[/url][/color][/b]" 那么新字符串将是“Google”。惊人。

希望有人觉得这很有用，这是 Google 中“JavaScript RegEx strip BBCode”的最佳匹配；）

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T13:44:34.187

您可以使用反向引用检查平衡标签：

```
 new RegExp('\\[(' + tags.Join('|') + ')[^]]*](.*?)\\[/\\1]'); 
```

真正的问题是你不能匹配正则表达式中的任意嵌套标签（这是正则语言的限制）。有些语言确实允许递归正则表达式，但这些是扩展（从技术上讲，它们是非正则的，但不会改变大多数人用于对象的名称）。

如果你不关心平衡标签，你可以去掉你找到的任何标签：

```
 new RegExp('\\[/?(?:' + tags.Join('|') + ')[^]]*]'); 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2012-07-25T15:26:47.740

我有一个类似的问题——在 PHP 而不是 Javascript 中——我不得不去掉 BBCode [quote] 标签以及标签中的引号。添加的问题是 [quote] 标记内通常有任意附加内容，例如`[quote:7e3af94210="username"]`

这对我有用：

```
$post = preg_replace('/[\r\n]+/', "\n", $post);
$post = preg_replace('/\[\s*quote.*\][^[]*\[\s*\/quote.*\]/im', '', $post);
$post = trim($post); 
```

第 1 行和第 3 行只是为了整理任何额外的换行符，以及由于正则表达式而留下的任何换行符。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T12:59:28.583

您必须允许在标记后使用除 ']' 以外的任何字符，直到找到 ']'。

```
new RegExp('\\[' + tags[index] + '[^]]*](.*?)\\[/' + tags[index] + ']'); 
```

您可以将其简化为以下表达式。

```
\[[^]]*]([^[]*)\[\\[^]]*] 
```

问题是，它也会匹配`[WrongTag]stuff[\WrongTag]`。匹配嵌套标签需要多次使用表达式。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T13:01:07.190

要删除*任何*BBCode，请使用以下内容：

```
string alltags = tags.Join("|");
RegExp stripbb = new RegExp('\\[/?(' + alltags + ')[^]]*\\]'); 
```

用空字符串全局替换。不需要额外的循环。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2013-03-04T13:41:50.063

这对我有用，适用于每个标签名称。它还支持像 '[url="blablabla"][/url]' 这样的字符串

```
str = str.replace(/\[([a-z]+)(\=[\w\d\.\,\\\/\"\'\#\,\-]*)*( *[a-z0-9]+\=.+)*\](.*?)\[\/\1\]/gi, "$4") 
```

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:59:38.410

我认为

```
new RegExp('\\[' + tags[index] + '(=[^\\]]+)?](.*?)\\[/' + tags[index] + ']'); 
```

应该这样做。然后，您必须选择第 2 组，而不是第 1 组。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-09-27T14:51:45.677

请记住，默认情况下，许多（大多数？）正则表达式风格不会让 DOT 元字符匹配行终止符。导致像这样的标签

```
"[foo]dsdfs
fdsfsd[/foo]" 
```

失败。通过在正则表达式中添加 "(?s)" 来启用 D​​OTALL，或者将正则表达式中的 DOT 元字符替换为字符类**[\S\s]**。

# asp.net - 在 Javascript 中替换 window.sessionStorage？

> ID：847948
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-11T12:48:30.980
> 
>         
> 
> 标签：asp.net, javascript, cross-browser

我有一个带有启动页面的应用程序，该页面需要确定已打开的内容，因此它不会重新打开已在另一个新选项卡中打开的内容。在 Firefox 中，我能够通过使用 window.sessionStorage 来存储打开的页面的标题，然后使用带有以下代码的 window.opener 从列表中删除标题来完成这项工作。

[Gecko 会话存储信息页面](https://developer.mozilla.org/en/DOM/Storage#sessionStorage) 

```
if (window.sessionStorage) {
    if (window.sessionStorage.getItem(code)) {
        return; // page already open
    }
    else {
       window.sessionStorage.setItem(code, code);
       window.open("Sheet.aspx", "_blank");
    }
} 
```

在打开的页面上：

```
function signalPageExit() {
    if (window.opener.sessionStorage) {

    window.opener.sessionStorage.removeItem(
     document.getElementById("runcode").childNodes[0].textContent); 
} 
```

这在 IE 中不起作用，所以我决定使用 cookie 策略，但是 cookie 从未从动态启动页面上的代码中成功删除，因此页面一旦启动就无法从启动页面重新打开，直到cookie 过期。

我的第二次尝试是在它不存在时定义我自己的 sessionStorage。看起来像这样：

```
 function setStoreItem(name, val) {
        this.storage[name] = val;
    }

    function getStoreItem(name) {
        return(this.storage[name]);
    }

    function removeStoreItem(name) {
        this.storage[name] = null;
    }

    function sesStorage() {
        this.storage = new storageData();
        this.setItem = setStoreItem;
        this.getItem = getStoreItem;
        this.removeItem = removeStoreItem;
    }

    // storage object type declaration
    function storageData() {

    }

    // IE 7 and others
    else {
        window.sessionStorage = new sesStorage();

        window.sessionStorage.setItem(code, code);
        window.open("Sheet.aspx", "_blank");
    } 
```

但似乎真正的会话存储是特殊的，这个普通的窗口对象在回发后并没有保持活动状态，因此当我的启动页面回发时，创建的页面标题列表被删除了。

所以现在我正在寻找一种方法来完成这项工作。我有一个名为 scoresheets.aspx 的启动页面，它根据用户请求创建动态页面。这些页面共享大量的 javascript 代码，可以对其进行修改以使其正常工作。

当用户尝试重新打开它们时，我不想刷新已启动的页面，但是如果有某种方法可以检测打开页面的标题或使用其他方法来使用 window.opener 与 sessionStorage 具有相同的持久性进行通信，我很乐意使用它。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-11T12:58:43.610

Eric Garside 的[jStore 插件](http://eric.garside.name/docs.html?p=jstore)为多个客户端存储引擎提供了一个基于 jquery 的 API。

* * *

## 回答 #2

> 赞同：-1
> 
>             
> 
> 时间：2009-05-11T12:56:05.190

您应该使用该 cookie 策略并将这些 cookie 设置为在窗口（选项卡）关闭时过期。这应该可以跨浏览器工作。

# git - 使用 Git 只合并修改过的文件

> ID：847950
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-11T12:48:50.013
> 
>         
> 
> 标签：git

我有一个包含内容和源文件的存储库。开发人员应该只处理源文件。为了节省空间，开发人员不应将内容文件（以 GB 为单位）克隆到其本地存储库。源文件不作为子模块存在于项目中，而是位于内容所在的同一位置。

我的方法是这样的 - 我从**Master创建了一个分支****Source**，然后从该分支中​​删除了内容文件。我发布了相同的分支以克隆给开发人员。

 **当我将**Source**分支中的更改合并回**Master时，内容文件在****Master**中被删除。如何限制它？如果不可能，那么有没有办法实现我的要求，即拥有一个单独的分支/克隆，只有过滤的文件，即其中的源文件？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-11T13:02:48.497

显而易见的答案是您应该有**单独的源和内容存储库**。或者只是保留内容。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-11T12:59:31.813

您根本不应该从`Source`分支中删除文件。如果`Source`并且`Master`只是同一存储库中的分支，您的开发人员无论如何都会拥有内容；把它放在身边并没有什么坏处。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T13:25:54.730

用于[`git-merge`](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)合并两个分支，然后[`git-revert`](http://www.kernel.org/pub/software/scm/git/docs/v1.6.2.3/git-revert.html)删除删除内容文件的提交。

```
% git checkout Master
% git merge Source
% git revert <content-removal-commit-id> 
```

或者你可以反过来做，并在合并到 Master 之前删除内容删除提交。它有点复杂，但它可能会让你的 Master 历史更清晰一些。

```
% git checkout Source
% git branch SourceMerge
% git checkout SourceMerge
% git revert <content-removal-commit-id>
% git checkout Master
% git merge SourceMerge 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T13:18:11.580

您确定要将这些媒体/文档文件包含在您的存储库中吗？您想跟踪 200GB 媒体库的变化吗？

如果您在源分支上时将它们的所有者目录引用放在 .gitignore 文件中，git 将忽略这些文件，因此不会触摸/删除它们。

[http://git-scm.com/docs/gitignore](http://git-scm.com/docs/gitignore)

# c# - .NET：导入具有不同元素名称的 XmlElement

> ID：847951
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-11T12:49:10.183
> 
>         
> 
> 标签：c#, xml

基本上我需要的是能够重命名 XmlElement（这在 .NET afaik 中是不可能的）。

有没有办法 ImportNode 一个 XmlElement 并重命名那个新的 XmlElement？

XmlElement oldElm; XmlDocument 文档；XmlElement newElm = (XmlElement) doc.ImportNode(oldElm, true); newElm.Rename("newElmName", "urn:newElmNameSpace");

或类似的东西...

我要避免的是编写一个循环，将子节点导入到新创建的元素中......

这可能（在.NET中）吗？  

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T13:13:52.900

我认为目前在.NET 中使用 XmlDocument 是不可能的。据我所知并且已经能够研究，实现元素重命名的唯一方法是创建一个新元素并将原始元素子元素移动到该元素下。

下面是一个[示例](http://www.xmlplease.com/rename-xml-w3cdom)，向您展示如何使用 W3C DOM (XmlDocument) 模型通过移动子元素来重命名元素。

# session - Emacs 可以使用哪些备用会话管理器？

> ID：847962
> 
>         
> 
> 赞同：16
> 
>         
> 
> 时间：2009-05-11T12:52:29.163
> 
>         
> 
> 标签：session, emacs

我已阅读[Emacs wiki 中的页面，](http://www.emacswiki.org/emacs/SessionManagement)其中包含会话管理器插件列表。但是在尝试了所有这些之后，我仍然对其中任何一个都不满意。

相比之下，[VIM 会话管理器](http://www.vim.org/scripts/script.php?script_id=2010)按名称保存和加载会话，这对我来说是最重要的功能之一。

特别是，我想要一个 Emacs 会话管理器：

*   按名称管理会话

*   保存选项卡、屏幕、框架等。

我正在尝试使用 Emacs，因为它具有非常好的功能，但是一个好的会话管理器对我的工作流程很重要。

* * *

有关的：

*   [Emacs：在启动时重新打开上次会话的缓冲区？](https://stackoverflow.com/questions/803812/emacs-reopen-buffers-from-last-session-on-startup)

*   [在 Emacs 中保存窗口配置](https://stackoverflow.com/questions/392314/saving-window-configurations-in-emacs)

* * *

## 回答 #1

> 赞同：34
> 
>             
> 
> 时间：2009-05-11T17:40:20.383

由于您不喜欢 desktop.el 的基本功能，因此请在其周围添加一些省略号：

```
(defvar my-desktop-session-dir
  (concat (getenv "HOME") "/.emacs.d/desktop-sessions/")
  "*Directory to save desktop sessions in")

(defvar my-desktop-session-name-hist nil
  "Desktop session name history")

(defun my-desktop-save (&optional name)
  "Save desktop with a name."
  (interactive)
  (unless name
    (setq name (my-desktop-get-session-name "Save session as: ")))
  (make-directory (concat my-desktop-session-dir name) t)
  (desktop-save (concat my-desktop-session-dir name) t))

(defun my-desktop-read (&optional name)
  "Read desktop with a name."
  (interactive)
  (unless name
    (setq name (my-desktop-get-session-name "Load session: ")))
  (desktop-read (concat my-desktop-session-dir name)))

(defun my-desktop-get-session-name (prompt)
  (completing-read prompt (and (file-exists-p my-desktop-session-dir)
                               (directory-files my-desktop-session-dir))
                   nil nil nil my-desktop-session-name-hist)) 
```

**编辑**：

获得一些选票，因此添加诸如完成阅读和历史记录之类的细节

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-05-11T12:57:42.380

已经回答：

*   [Emacs：在启动时重新打开上次会话的缓冲区？](https://stackoverflow.com/questions/803812/emacs-reopen-buffers-from-last-session-on-startup)

*   [在 Emacs 中保存窗口配置](https://stackoverflow.com/questions/392314/saving-window-configurations-in-emacs)

详细解释您的要求使我们能够为您提供更具体的解决方案。

**编辑**

桌面模式允许您拥有多个会话——保存的桌面不是*名称*而是基于目录的。

从[保存 Emacs 会话](http://www.gnu.org/software/emacs/manual/html_node/emacs/Saving-Emacs-Sessions.html)一章：

> 您可以通过键入保存当前桌面并重新加载保存在另一个目录中的桌面`M-x desktop-change-dir.`

此外，`desktop-path`变量允许您定义目录列表以搜索已保存的桌面。

**编辑 2**

scottfrazer 发送的[Elisp 代码片段](https://stackoverflow.com/questions/847962/what-alternate-session-managesr-are-available-for-emacs/849180#849180)允许您命名会话，因为它在后台将名称转换为桌面模式的正确目录名称。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2011-11-02T17:09:27.030

***通过为它们添加书签***来使用不同的桌面。简单、快速使用 - 敲击一个键，即刻，不同的桌面。如果你愿意，你甚至可以在它们之间循环。  

*   使用`C-x p K`（默认）设置[桌面书签](http://www.emacswiki.org/emacs/BookmarkPlus#DesktopBookmarks)。系统会提示您输入桌面文件位置和要使用的书签名称。

*   使用`C-x j K`（默认）跳转到书签桌面。系统会提示您输入书签名称（完成）。

您需要[***书签+***](http://www.emacswiki.org/emacs/BookmarkPlus)来执行此操作。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2012-12-04T20:23:20.620

**对于缓冲区/选项卡存储/恢复问题的部分：**我使用 elscreen 以及我管理存储/恢复桌面会话的方式和 elscreen 选项卡配置是我的 .emacs 文件中的以下代码（使用的名称是不言自明的，并且如果每次 emacs 启动时不应该执行存储/恢复功能，只需注释掉带有“（push #'elscreen-store kill-emacs-hook）”和“（elscreen-restore）”的行）：

```
(defvar emacs-configuration-directory
    "~/.emacs.d/"
    "The directory where the emacs configuration files are stored.")

(defvar elscreen-tab-configuration-store-filename
    (concat emacs-configuration-directory ".elscreen")
    "The file where the elscreen tab configuration is stored.")

(defun elscreen-store ()
    "Store the elscreen tab configuration."
    (interactive)
    (if (desktop-save emacs-configuration-directory)
        (with-temp-file elscreen-tab-configuration-store-filename
            (insert (prin1-to-string (elscreen-get-screen-to-name-alist))))))
(push #'elscreen-store kill-emacs-hook)
(defun elscreen-restore ()
    "Restore the elscreen tab configuration."
    (interactive)
    (if (eq (type-of (desktop-read)) 'symbol)
        (let ((screens (reverse
                        (read
                         (with-temp-buffer
                          (insert-file-contents elscreen-tab-configuration-store-filename)
                          (buffer-string))))))
            (while screens
                (setq screen (car (car screens)))
                (setq buffers (split-string (cdr (car screens)) ":"))
                (if (eq screen 0)
                    (switch-to-buffer (car buffers))
                    (elscreen-find-and-goto-by-buffer (car buffers) t t))
                (while (cdr buffers)
                    (switch-to-buffer-other-window (car (cdr buffers)))
                    (setq buffers (cdr buffers)))
                (setq screens (cdr screens))))))
(elscreen-restore) 
```

**编辑**：

我将 elscreen-restore 中的“if (desktop-read)”更改为“if (eq (type-of (desktop-read)) 'symbol)”，因为如果 emacs 被杀死而不是以通常的方式关闭, .emacs.desktop.lock 文件不会被删除。因此，如果由于任何原因无法恢复桌面会话，“(desktop-read)”的返回值是一个“字符串”，解释了错误，而不是“nil”，所以“if”不会失败，因为它应该。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T12:54:13.540

试试 Emacs 桌面。
[到这里](http://www.gnu.org/software/emacs/manual/html_node/emacs/Saving-Emacs-Sessions.html)

# c++ - 如何确定 STL 容器中的最后一个有效元素

> ID：847967
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-11T12:53:24.323
> 
>         
> 
> 标签：c++, stl

如果我遍历 STL 容器，有时我需要知道当前项是否是序列中的最后一项。有没有更好的方法，然后做这样的事情？我可以以某种方式转换 rbegin() 吗？

```
std::vector<int> myList;

// ....
std::vector<int>::iterator lastit = myList.end();  
lastit--;

for(std::vector<int>::iterator it = myList.begin(); it != myList.end(); it++)  {
     if(it == lastit)
     {
        // Do something with last element
     }
     else
     {
       //  Do something with all other elements
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-11T13:00:50.500

尝试以下

```
std::vector<int>::iterator it2 = (++it);
if ( it2 == myList.end() ) {
  ...
} 
```

以下也应该有效

```
if ( it+1 == myList.end() ) {
  // it is last
  ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-11T13:00:23.387

也许您可以向后迭代（使用`rbegin`/ `rend`）并将您的特殊任务放在循环之前，或者将结束检查替换为`it != lastit`并将特殊处理放在循环之后

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T13:05:17.697

如果某些元素需要区别对待，我会对我的设计有些怀疑，但这个建议对我来说更简洁（不要忘记测试空容器）

```
std::vector<int>::iterator lastit = myList.end();
if (lastit != myList.begin())
{
  lastit--;
  for(std::vector<int>::iterator it = myList.begin(); it != lastit; ++it)
  {
     // Do
  }
  // Do with last
} 
```

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-11T13:22:07.373

使用**反向迭代**，这样你将只有一个类似*end()-1*的计算（注意 rbegin()+1）并且**没有比较**：

```
for(vector<int>::iterator it = myValues.rbegin()+1; it != myValues.rend(); it++) {
    cout << *it << endl;
}
cout << "Process last one: " << *myValues.rbegin() << endl; 
```

此外，对于 vector<>，计算 end()-1 可能很快，所以你也可以这样做：

```
for(vector<int>::iterator it = myValues.begin(); it != myValues.end()-1; it++) {
    cout << *it << endl;
}
cout << "Process last one: " << *myValues.rbegin() << endl; 
```

如果您不想在循环后处理元素，您可以：

```
for(vector<int>::iterator it = myValues.rbegin(); it != myValues.rend(); it++) {
    if(it == myValues.rbegin())
        cout << "Process last one: " << *it << endl;
    else
        cout << *it << endl;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T13:06:12.157

对于像矢量这样的随机访问迭代器，您不需要临时的。你可以说：

```
if ( it + 1 == v.end() ) {
   // at one before end
} 
```

**编辑：**甚至对于非随机访问类型，也可以使用 std:;distance：

```
if ( distance( it, v.end() ) == 1 ) {
   // at one before end
} 
```

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-05-11T14:03:32.650

一个重要的问题是：如果你为 1 个元素做一些特殊的事情，为什么要创建一个循环。为什么不对第三个元素做一些特别的事情呢？每 4 次？...

只需迭代要相同处理的元素，编写单独的代码来处理其他元素。

也看看[这个问题](https://stackoverflow.com/questions/156650/does-the-last-element-in-a-loop-deserve-a-separate-treatment)的答案。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2016-11-10T19:31:12.513

为什么不：

```
if(!myList.empty())
    last_it = myList.begin() + myList.size()-1;
else
    last_it = myList.end();

//or
    last_it = myList.empty() ? myList.end() : myList.begin() + myList.size() - 1; 
```

* * *

## 回答 #8

> 赞同：-1
> 
>             
> 
> 时间：2009-05-11T13:04:00.973

如果您使用的是向量，则使用整数索引进行迭代实际上要简单得多：

```
std::vector<int> myList;
for (unsigned int i = 0; i < myList.size(); i++)
{
  if (i == (myList.size() - 1))
  {
    processDifferently (myList[i])
  }
  else
  {
    process (myList[i])
  }
} 
```

尽量减少对 myList.size() 的调用次数留给 OP 练习 :)

# c++ - 统一构建的好处/坏处？

> ID：847974
> 
>         
> 
> 赞同：32
> 
>         
> 
> 时间：2009-05-11T12:54:33.430
> 
>         
> 
> 标签：c++, build-process, compilation

自从在一家新公司开始工作以来，我注意到他们在我们的大部分解决方案中使用统一 cpp 文件，我想知道是否有人能够给我一个明确的理由来说明为什么以及如何加速构建过程？我原以为在统一文件中编辑一个 cpp 文件会强制重新编译所有文件。

* * *

## 回答 #1

> 赞同：32
> 
>             
> 
> 时间：2009-05-11T13:00:31.327

非常相似的问题和很好的答案：[#include all .cpp files into a single compiler unit?](https://stackoverflow.com/questions/543697/include-all-cpp-files-into-a-single-compilation-unit)

总结似乎是更少的 I/O 开销是主要的好处。

另请参阅上述问题中链接[的 Unity 构建的魔力。](http://buffered.io/posts/the-magic-of-unity-builds/)

* * *

## 回答 #2

> 赞同：13
> 
>             
> 
> 时间：2011-09-23T12:12:52.687

Lee Winder 发布了他使用 Unity Builds 的经验 - [The Evils of Unity Builds](http://web.archive.org/web/20161021225056/https://engineering-game-dev.com/2009/12/15/the-evils-of-unity-builds/)

他的结论是：

> 统一构建。我不喜欢他们。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2012-02-06T00:57:55.063

这是因为它节省了多余的工作。依赖项的冗余解析和编译。链接也更加复杂——您要么将导出全部放在一个（或几个）对象中，要么在大多数目标对象文件中单独冗余导出。更少的对象会导致更少的 I/O 和更少的链接时间。根据您的设置，包含可能是一个问题——在我使用的“统一构建”系统上，构建最终受 CPU 和/或内存限制。

# c# - C#如何从xml文件中获取所有元素名称

> ID：847978
> 
>         
> 
> 赞同：23
> 
>         
> 
> 时间：2009-05-11T12:55:23.663
> 
>         
> 
> 标签：c#, xml

我想从 xml 文件中获取所有元素名称，例如 xml 文件是，

```
<BookStore>
  <BookStoreInfo>
    <Address />
    <Tel />
    <Fax />
  <BookStoreInfo>
  <Book>
    <BookName />
    <ISBN />
    <PublishDate />
  </Book>
  <Book>
   ....
  </Book>
</BookStore> 
```

我想获取元素的名称“BookName”。"ISBN" 和 "PublishDate" 仅包含这些名称，不包括 "BookStoreInfo" 及其子节点的名称

我尝试了几种方法，但都不起作用，我该怎么办？

* * *

## 回答 #1

> 赞同：35
> 
>             
> 
> 时间：2009-05-11T13:01:36.003

好吧，使用`XDocument`LINQ-to-XML：

```
foreach(var name in doc.Root.DescendantNodes().OfType<XElement>()
        .Select(x => x.Name).Distinct())
{
    Console.WriteLine(name);
} 
```

不过，类似的路线还有很多。

* * *

## 回答 #2

> 赞同：8
> 
>             
> 
> 时间：2009-05-11T13:01:13.307

使用 XPath

```
XmlDocument xdoc = new XmlDocument(); 
xdoc.Load(something);
XmlNodeList list = xdoc.SelectNodes("//BookStore"); 
```

为您提供一个列表，其中包含名为 BookStore 的文档中的所有节点

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2010-02-28T01:35:25.097

I agree with Adam, the ideal condition is to have a schema that defines the content of xml document.  However, sometimes this is not possible.  Here is a simple method for iterating all of the nodes of an xml document and using a dictionary to store the unique local names.  I like to keep track of the depth of each local name, so I use a list of int to store the depth.  Note that the XmlReader is "easy on the memory" since it does not load the entire document as the XmlDocument does.  In some instances it makes little difference because the size of the xml data is small.  In the following example, an 18.5MB file is read with an XmlReader.  Using an XmlDocument to load this data would have been less effecient than using an XmlReader to read and sample its contents.

```
string documentPath = @"C:\Docs\cim_schema_2.18.1-Final-XMLAll\all_classes.xml";

Dictionary<string, List<int>> nodeTable = new Dictionary<string, List<int>>();
using (XmlReader reader = XmlReader.Create(documentPath))
{
    while (!reader.EOF)
    {
        if (reader.NodeType == XmlNodeType.Element)
        {
            if (!nodeTable.ContainsKey(reader.LocalName))
            {
                nodeTable.Add(reader.LocalName, new List<int>(new int[] { reader.Depth }));
            }
            else if (!nodeTable[reader.LocalName].Contains(reader.Depth))
            {
                nodeTable[reader.LocalName].Add(reader.Depth);
            }
        }
        reader.Read();
    }
}
Console.WriteLine("The node table has {0} items.",nodeTable.Count);
foreach (KeyValuePair<string, List<int>> kv in nodeTable)
{
    Console.WriteLine("{0} [{1}]",kv.Key, kv.Value.Count);
    for (int i = 0; i < kv.Value.Count; i++)
    {
        if (i < kv.Value.Count-1)
        {
            Console.Write("{0}, ", kv.Value[i]);
        }
        else
        {
            Console.WriteLine(kv.Value[i]);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2009-05-11T13:03:06.187

The purists way of doing this (and, to be fair, the right way) would be to have a schema contract definition and read it in that way. That being said, you could do something like this...

```
List<string> nodeNames = new List<string>();

foreach(System.Xml.XmlNode node in doc.SelectNodes("BookStore/Book"))
{
    foreach(System.Xml.XmlNode child in node.Children) 
    {
        if(!nodeNames.Contains(child.Name)) nodeNames.Add(child.Name);
    }
} 
```

This is, admittedly, a rudimentary method for obtaining the list of distinct node names for the `Book` node's children, but you didn't specify much else in the way of your environment (if you have 3.5, you could use LINQ to XML to make this a little prettier, for example), but this should get the job done regardless of your environment.

* * *

## 回答 #5

> 赞同：3
> 
>             
> 
> 时间：2009-05-11T13:02:19.950

如果您使用的是 C# 3.0，则可以执行以下操作：

```
var data = XElement.Load("c:/test.xml"); // change this to reflect location of your xml file

var allElementNames = 
    (from e in in data.Descendants()
    select e.Name).Distinct(); 
```

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2009-05-11T13:02:15.567

您可以尝试使用[XPATH](http://www.w3schools.com/XPath/default.asp)进行操作。

```
XmlDocument doc = new XmlDocument();
doc.LoadXml("xml string");

XmlNodeList list = doc.SelectNodes("//BookStore/Book"); 
```

* * *

## 回答 #7

> 赞同：2
> 
>             
> 
> 时间：2016-03-11T13:19:28.623

If **BookStore** is ur root element then u can try following code 

```
XmlDocument doc = new XmlDocument();
        doc.Load(configPath);
        XmlNodeList list = doc.DocumentElement.GetElementsByTagName("Book");
        if (list.Count != 0)
        {
            for (int i = 0; i < list[0].ChildNodes.Count; i++)
            {
                XmlNode child = list[0].ChildNodes[i];

            }
        } 
```

* * *

## 回答 #8

> 赞同：-1
> 
>             
> 
> 时间：2016-01-26T08:23:23.870

An online tool I find here can extract those elements 's names beautifully - just uploading the XML file and they print the names as a result webpage.

[http://taporware.ualberta.ca/~taporware/xmlTools/listxml.shtml](http://taporware.ualberta.ca/~taporware/xmlTools/listxml.shtml)

[![enter image description here](https://i.stack.imgur.com/NKbFn.png)](https://i.stack.imgur.com/NKbFn.png)

# nhibernate - 将 Spring .Net Advice 应用于 HibernateTemplate 对象

> ID：847980
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-11T12:55:33.070
> 
>         
> 
> 标签：nhibernate, spring, spring.net

我有一堂审计课：

```
public class AuditAfterAdvise : IAfterReturningAdvice 
```

这适用于我的 Spring.Net 配置中的 Dao 类，使用的是 RegularExpressionMethodPointcutAdvisor。

Dao 类实现调用 HibernateTemplate.SaveOrUpdate(object entity) 来提交更改。

我希望能够将 AuditAfterAdvise 类应用于我的 Dao 中使用的 HibernateTemplate SaveOrUpdate() 方法，而不是 Dao 本身的方法。

NHibenate/Spring 设置是为 Dao 使用 LocalSessionFactoryObject。这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-06-22T04:47:31.133

这当然*应该*是可能的。  

无需配置 Dao，而是将建议添加到 LocalSessionFactoryObject 的对象定义中。RegularExpressionPointCutAdvisor 应该继续工作——只是应用于不同的对象。

我假设 HibernateTemplate 是从 Spring.NET 对象工厂中检索到的...*********** 
```**