# StackOverflow 问答 11463000-11463999

# google-maps - Google Maps v3 中不滚动的最大信息窗口宽度大小

> ID：11463000
> 
> 赞同：4
> 
> 时间：2012-07-13T01:35:19.533
> 
> 标签：google-maps, google-maps-api-3

我的标记有图像内容，但在宽度 >600 像素后，谷歌地图会自动在信息窗口中添加水平滚动。谷歌地图 V3 中信息窗口的最大尺寸是多少？如果可能的话如何扩展最大尺寸？

我不需要超过 650/700 像素。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T00:23:14.293

没有看到你的代码很难判断，但听起来你可能已经将你的图像放置在一个宽度小于图像的 DOM 元素中？如果您将用于定义信息窗口、信息窗口选项和内容的代码添加到问题中，其他人将更容易为您提供更具体的建议。

默认情况下，`InfoWindow`[^(开发指南)](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)的大小取决于其内容，可能是：文本、HTML 或 DOM 元素。`width`控制an的最佳方法`InfoWindow`是将内容放在 a 中`div`并定义一个 CSS 样式规则，该规则`width`为`div`. 当使用基于内容大小的默认大小时，an 的最大宽度`InfoWindow`仅受 Map 宽度的限制。

您的另一个选项是[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#InfoWindowOptions)`maxWidth`对象的属性（以像素为单位），它可以通过将选项对象传递给 info-window 的构造函数或通过在 info-window 之后调用函数与[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)相关联创建的。仅在调用该函数之前与Info-Window关联时，才会使用该属性。如果您的用例要求您更改更改信息窗口内容时的值，则必须：`InfoWindowOptions`[](https://developers.google.com/maps/documentation/javascript/reference#InfoWindowOptions)`InfoWindow`[](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)`InfoWindow.setOptions``InfoWindowOptions.maxWidth``InfoWindow.open``maxWidth`

1.  称呼`InfoWindow.close`
2.  调用`InfoWindow.setOptions`（传入`InfoWindowOptions`具有新`maxWidth`值的对象）
3.  称呼`InfoWindow.setContent`
4.  调用`InfoWindow.open`以在地图上显示信息窗口

Google Maps Developer's Guide 包括：[将 info-window maxWidth 值设置为 200 像素的示例地图](https://google-developers.appspot.com/maps/documentation/javascript/examples/infowindow-simple-max)。如果您有兴趣使用该`maxWidth`选项并想探索使用该选项的工作地图，您可能需要检查一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:07:02.237

感谢您的回答肖恩米奇。

就像你说的谷歌地图根据地图的大小自动设置maxWidth InfoWindow，在我的情况下太小了，经过大量的挖掘，我确实找到了两种绕过这个的方法，使用海关信息窗口：

*   信息框。 [http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html) 实现起来有点复杂，但它可以工作。
*   信息泡泡。 [http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html/](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html/) 实现起来非常简单。

我正在使用 infoBubble，非常适合我的需求。

谢谢。

# java - 无法实例化类型 SocketChannel

> ID：11463005
> 
> 赞同：0
> 
> 时间：2012-07-13T01:35:56.353
> 
> 标签：java, nio

根据文档，我可以这样做：

```
SocketChannel mySocketChannel = new SocketChannel(SelectorProvider.provider()); 
```

根据JDK我不能。

简单的问题：为什么我在标题中收到错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T01:42:13.373

构造函数是`protected`，这意味着只有继承的类才能访问它以继承其基本功能（注意`SocketChannel`继承自`AbstractSelectableChannel`）。

要打开`SocketChannel`，请使用静态`open`方法：

```
SocketChannel socketChannel = SocketChannel.open(); 
```

请参阅[SocketChannel 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/channels/SocketChannel.html)和[示例](http://tutorials.jenkov.com/java-nio/socket-channel.html)。

# javascript - 当我调用它的任何成员时，console.log 说对象未定义

> ID：11463006
> 
> 赞同：0
> 
> 时间：2012-07-13T01:36:15.003
> 
> 标签：javascript, jquery

**环境**

Mozilla Firefox 11 在本地主机上运行 MAMP 和测试

**错误**

dirObject[data] 未定义
[http://localhost:8888/framework/](http://localhost:8888/framework/)
第 34 行

**症状**

控制台.log（**对象**[*成员*]）；产生预期的结果（返回**object**），但 console.log( **object** [ *member* ][ *member* ]); 返回该**对象**未定义。

**目录对象**

```
var dirObject ={
    'directoryName' : {
            directory : 'path/to/the/directory',
            txt       : 'textFileInDirectory.js',
            css       : 'styleSheetFileInDirectory.css',
            js        : 'javaScriptFileInDirectory.js'
    }... // There are currently 27 of these structures in my object.
} 
```

**我的代码**

```
for(var count = 0; count <= size; count++){
    var data = keys[count];
    console.log(dirObject[data]['directory']);
} 
```

-- 返回 'dirObject is undefined' 并引用 console.logs 行号。

```
for(var count = 0; count <= size; count++){
    var data = keys[count];
    console.log(dirObject[data]);
} 
```

-- 返回多维对象（包含我的插件目录中列出的项目的根链接路径和文件名。对象存在）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T01:49:52.130

改进一个 foreach 来测试你的代码

```
for (var i in dirObject){ console.log(i); console.log(dirObject[i]); } 
```

# javascript - 手风琴中的重置项目高度未正确重置

> ID：11463007
> 
> 赞同：0
> 
> 时间：2012-07-13T01:36:14.967
> 
> 标签：javascript, jquery, accordion, jquery-ui-accordion

**编辑：** 这已经解决了。原来它与`css`not the中的 line-height 有关`js`。

小提琴：http: [//jsfiddle.net/ruwjn/7/](http://jsfiddle.net/ruwjn/7/)

现场直播：http: [//imip.rvadv.com/index3.html](http://imip.rvadv.com/index3.html)

它似乎并没有在小提琴中执行此操作，但它正在实时站点上执行此操作。当我单击手风琴菜单项时，它会正确打开。当我再次单击同一个项目时，它应该关闭并返回到以前的样子。然而，事情并非完全如此。当我第二次单击它时，它会关闭，但它会在手风琴菜单链接之间留下额外的空间。

我不太了解`js`，但我认为这可能与这一点有关：

```
$(window).bind('smartresize.accordion', function( event ) {

            // reset orinal item values
            instance._saveDimValues();

            // reset the content's height of any item that is currently opened
            instance.$el.find('li.st-open').each( function() {

                var $this   = $(this);
                $this.css( 'height', $this.data( 'originalHeight' ) + $this.find('div.st-content').outerHeight( true ) );

            });

            // scroll to current
            if( instance._isOpened() )
            instance._scroll();

        }); 
```

如果您必须解释有关 的任何内容`js`，请用尽可能简单的术语说明。我对此知之甚少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:12:28.427

这肯定是一个很奇怪的问题。发生的事情是第二个列表项上的**h2***刚好*足够长以导致换行，由于某种原因，只有在手风琴关闭后才计算/显示。您可以通过将里面的文本缩短为几个字母来亲眼看到这一点。**它下面的li**也发生了这种情况，但是您无法分辨，因为它是最后一项。

要解决此问题，只需将其添加到样式表中的**h2{} ：**

```
white-space:nowrap; 
```

那应该这样做。

# javascript - 与变量匹配的 Javascript 模式

> ID：11463015
> 
> 赞同：0
> 
> 时间：2012-07-13T01:39:51.917
> 
> 标签：javascript, design-patterns, matching

我正在努力寻找一种方法来获得变量的模式匹配。我曾尝试拆分事物并执行 indexOf、使用 match 和 switch (true) 语句，但都收效甚微。任何帮助，将不胜感激！

```
currentExports = 'sec=sys,rw=badhost1.foo.com:badhost2.foo.com,root=badhost1.foo.com:badhost2.foo.com';
badExportHosts = params.badExportHosts.split(':');
for (badHost = 0; badHost < badExportHosts.length; badHost++) {
    if (!currentExports.match(/badExportHosts[badHost]/g)) {
        printf('Entry ' + badExportHosts[badHost] + ' was not found in ' + currentExports + '\n');
    } else {
        printf('Entry ' + badExportHosts[badHost] + ' was found in ' + currentExports + '\n');
    } 
```

如果我输入我的表格：

```
badhost1.foo.com:badhost2.foo.com 
```

我不幸得到了这个结果：

```
Entry badhost1.foo.com was not found in sec=sys,rw=badhost1.foo.com:badhost2.foo.com,root=badhost1.foo.com:badhost2.foo.com
Entry badhost2.foo.com was not found in sec=sys,rw=badhost1.foo.com:badhost2.foo.com,root=badhost1.foo.com:badhost2.foo.com 
```

我怎样才能让这个匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:07:54.253

我认为您在这里的意图似乎不够清楚，但是，如果我理解正确，并且您只想检查您的“badHost”字符串是否包含在 currentExports 的任何位置，您可以尝试替换它：

```
if (!currentExports.match(/badExportHosts[badHost]/g)) { 
```

为了这：

```
if (currentExports.indexOf(badExportHosts[badHost]) < 0) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:20:54.730

你在正确的轨道上。尝试使用这样的`RegExp`对象：

```
var pattern;
currentExports = //your same code goes here
//...
for(badHost = 0; badHost < badExportHosts.length; badHost++){
    pattern = new RegExp(badExportHosts[badHost], 'g');
    if (!currentExports.match(pattern)) {
        //your print statments go here
    }
} 
```

问题是您的调用`match()`实际上是在循环的每次迭代中尝试匹配字符串 "badExportHosts[badHosts]" `for`，这是不好的，因为您需要匹配`badExportHosts`数组中的值，而不是变量名本身。你需要一个像对象给你`/badhost1.foo.com/g`的正则表达式。`RegExp`

# python - 有没有办法在 QTableWidgetItem 中对齐或操作 QIcon 的位置？

> ID：11463016
> 
> 赞同：0
> 
> 时间：2012-07-13T01:40:07.740
> 
> 标签：python, qt, pyside

简介：我正在使用 PySide 和 Qt 框架来构建一个 GUI 应用程序

我在 QTableWidgetItem 中动态添加`edit`和`delete`图标，并试图将它们对齐在单元格的中心。我已经在 QTableWidget 的各个部分尝试了 setTextAlign 和 setStyleSheet。

如果有人知道一种解决方法，那就太棒了。

我还希望这些是可点击的，这样如果用户点击它们，`edit`他们将能够编辑该行适用的相应对象。如果有人也可以帮助我解决这个问题，那就更棒了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T02:40:54.510

我可能最终会使用[QTableWidget::setCellWidget()](http://qt-project.org/doc/qt-4.8/qtablewidget.html#setCellWidget)

您可以创建自己的自定义小部件，在这种情况下，您可以尝试在设计器中创建`QToolButton`居中的内部，`QFrame`然后将其设置为表格中您希望它出现的单元格的小部件。

# properties - 使用匿名函数作为属性 getter/setter

> ID：11463018
> 
> 赞同：2
> 
> 时间：2012-07-13T01:40:12.267
> 
> 标签：properties, anonymous-function, haxe

以下代码给出了编译错误：

```
public var x(function(){return 2}, never) : Int; 
```

有没有办法在haxe中制作这样的结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T08:33:37.817

几天前在haxe google group上讨论了同样的话题。

[https://groups.google.com/d/msg/haxelang/jmpjNGdGFYI/byvc84WpDgoJ](https://groups.google.com/d/msg/haxelang/jmpjNGdGFYI/byvc84WpDgoJ)

# c++ - 使用 typedef、多维数组和指针时出现编译器错误

> ID：11463023
> 
> 赞同：1
> 
> 时间：2012-07-13T01:41:10.623
> 
> 标签：c++, pointers, multidimensional-array, typedef

我在编译以下代码时遇到了麻烦。编译器声明：

```
Assigning to 'RawChunk::Ptr' (aka 'unsigned char (*)[128][16]') from incompatible type 'RawChunk::Chunk *' (aka 'unsigned char (*)[16][128][16]'); 
```

有谁知道我做错了什么？这似乎是一个简单的错误，但我不确定我应该改变什么。

```
template <int dim>
class RawChunkWindow {
public:
    typedef unsigned char (*Ptr)[ChunkDimensions::MAX_Y][ChunkDimensions::MAX_Z];
    typedef unsigned char Chunk[ChunkDimensions::MAX_X][ChunkDimensions::MAX_Y][ChunkDimensions::MAX_Z];
    RawChunkWindow() {
        for (int i = 0; i < dim; ++i) {
            for (int j = 0; j < dim; ++j) {
                window[i][j] = &payload[i][j]; //compiler complains here
            }
        }
    }
private:
    Ptr window[dim][dim];
    Chunk payload[dim][dim];
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T02:28:16.387

如果没有进一步解释您打算做什么，我无法确定，但似乎您可能对成员变量使用了不正确的类型。具体来说，成员变量 window 的类型为：

窗口：数组大小`dim`的数组`dim`，指向无符号字符数组的指针`MAX_Y`大小的数组`MAX_Z`，即指向二维数组的指针的二维数组。

payload：大小`dim`数组大小`dim`数组大小数组大小`MAX_X`数组大小`MAX_Y`数组`MAX_Z`，即5维数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T01:51:38.183

从您在构造函数中截取的代码`RawChunkWindow`看来，您的`Ptr`类型应该是指向`Chunk`类型的指针，但您的`typedef`声明并未反映这一点。而是`Ptr`指向二维数组`char`类型的指针，而不是指向三维数组的指针。

所以改变这个：

```
typedef unsigned char (*Ptr)[ChunkDimensions::MAX_Y][ChunkDimensions::MAX_Z]; 
```

对此：

```
typedef unsigned char (*Ptr)[ChunkDimensions::MAX_X][ChunkDimensions::MAX_Y][ChunkDimensions::MAX_Z]; 
```

这也是您的错误代码报告的内容。A`unsigned char (*)[128][16]`是指向 128x16 二维数组的指针，编译器抱怨您试图将 3 维 16x128x16 数组指针右值（即`unsigned char (*)[16][128][16]`右值）分配给错误的指针类型。

作为一个侧节点，如果您打算在堆栈上使用它们，请注意如何声明此对象。`Chunk`如果维度为 16x128x16，则单个类型实例将占用 32Kb，如果您将太大的值作为`dim`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T14:20:24.943

要以您当前的方式消除错误，您需要更改该行：

窗口[i][j] = &payload[i][j];

至

窗口[i][j] = &payload[i][j][x];

对于一些小于“ChunkDimensions::MAX_X”的“x”。但是，我不清楚您要做什么，并且几乎可以肯定上述修复不是（可能）。简单来说，您可能正在尝试将 3D 数组的集合存储在一个集合（有效负载）中，并且由于 3D 数组实际上只是 2D 数组的数组，因此您尝试存储指向每个数组的指针这些二维数组在另一个集合（窗口）中。我什至不会在这里使用“dim”，因为这种情况已经足以让人头晕目眩。在任何情况下，使用“std::vector”而不是原始 c 样式数组会容易得多。为了更好地理解使用 c 样式数组的问题（如果由于某种原因您不能使用“std::vector”），[C++ 中的二维数组指针操作](https://stackoverflow.com/questions/9583086/2dimensional-array-pointer-manipulation-in-c/9608139#9608139)和[使用 C++ 中的函数操作多维数组](https://stackoverflow.com/questions/9672731/manipulating-multidimensional-arrays-with-functions-in-c/9677552#9677552)。您可以将我提出的概念扩展到 3D 数组。

# objective-c - 从 URL 不断获取新数据的最佳方法？

> ID：11463025
> 
> 赞同：0
> 
> 时间：2012-07-13T01:41:16.840
> 
> 标签：objective-c, ios, xcode

我正在编写一个 iPad 应用程序，它从 Web 服务器上的 XML 文件中提取各种坐标，解析信息，并将它们呈现在屏幕上。

我想知道你们是否有关于如何让它连续刷新数据的提示/建议，比如说，每秒（因为计算机程序每隔几秒更新一次服务器上的 XML 文件）。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T02:01:27.530

您肯定需要为此实现多线程后台操作，否则您的应用程序将完全无响应。在我继续之前，我必须声明，不断地向服务器查询应用程序的整个执行过程是一个坏主意，它不仅会咀嚼数据，而且必须保持 Wi-Fi/3G/4G 天线始终处于活动状态会耗尽用户的电池快得多。

我会考虑放宽要求，例如每 10 秒左右（因为服务器每隔几秒才更新一次数据，您必须考虑下载和渲染当前抓取的坐标的时间），甚至等待供用户按下刷新按钮等。

要回答目前的问题，有几种方法可以做到这一点，其中最简单的可能是使用像[ASHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)这样的框架（尽管它不再维护，对于现代项目，有像[AFNetworking](http://www.afnetworking.org/)这样的库）。它们处理从服务器异步下载数据以及许多其他有用的网络功能。

满足您要求的理想流程如下所示：

1.  创建 NSOperationQueue（或添加的网络库中的队列）
2.  使用 NSTimer 继续创建子类 NSOperation 以从服务器下载（或再次，网络库中的等效函数）。每隔*x*秒，它就会将此请求发送到队列。
3.  完成下载后，使用新数据更新 UI（请注意，更改 UI 的任何功能都必须从主线程完成，因此如果您在 NSOperation/etc 中处理此问题，则必须使用 a`performSelectorOnMainThread`或等效的！ )

希望有帮助！如果您不想包含外部库，我确实有一个小示例项目，它创建子类 NSOperation 的实例，该实例执行 NSURLConnection，将它们发送到 NSOperationQueue 并同时执行它们。您可以轻松地将其修改为一次只执行一项操作，更改 NSURLConnection 以下载和解析服务器数据，然后更新主线程。如果你有兴趣[，它就在这里。](https://github.com/DiamondTechIT/iOS-Simultaneous-Async-NSURLConnections)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T02:01:32.557

看看`NSTimer`及其`scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:`方法

一个可行的解决方案可能是

```
[NSTimer scheduledTimerWithTimeInterval:2 target:self selector:refreshData userInfo: nil repeats:YES ] 
```

和调用对象的方法

```
-(void) refreshData {
    //Do your call here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T04:31:32.257

考虑在服务器上准备好新数据时向设备发出推送通知。

这将节省设备电量，节省大量服务器负载，并且推送通常只需一秒钟左右即可到达，因此对于您的使用而言，延迟还不错。

唯一需要注意的是，您还必须实施某种轮询，以防用户拒绝允许推送通知。但是对他们来说，你可以有很长的轮询周期，并告诉他们如果他们启用推送支持，刷新会更快......

# javascript - JS/AJAX：提交带有计时器的表单，而不是按钮单击或刷新页面

> ID：11463028
> 
> 赞同：3
> 
> 时间：2012-07-13T01:41:47.417
> 
> 标签：javascript, jquery, ajax

我正在尝试提交没有页面刷新或提交按钮的表单。但是我只实现了让JS函数提交输入框值。是否可以在不单击按钮和刷新页面的情况下提交整个表单？

[JSFIDDLE](http://jsfiddle.net/MswhY/8/)

**JS**

```
 <script type="text/javascript">
                $(document).ready(function() {
                    var timer;
                        $('#yurl).on('keyup', function() {
                            var value = this.value;

                            clearTimeout(timer);

                            timer = setTimeout(function() {

                                //do your submit here

                                alert('submitted:' + value);
                            }, 2000);
                        });
                });
            </script> 
```

**html**

```
 <form method="post" id="ytVideo" action="">
                <input id="yurl" type="text" value="<?php $url ?>" name="yurl">     
                </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:49:33.840

如果我很好地理解了您的要求，那么它说`//do your submit here`您应该放在哪里：

```
 $("#ytVideo").submit() 
```

`ytVideo`您尝试提交的表单的 ID 在哪里

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T01:51:10.780

我认为[jQuery.serialize()](http://api.jquery.com/serialize/)可以很好地解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T02:12:39.920

你的小提琴似乎在工作，但问题是你并没有真正在任何地方提交它。

```
<script type="text/javascript">
 $(document).ready(function() {
                        var timer;
                            $('#yurl).on('keyup', function() {
                                var value = this.value;

                                clearTimeout(timer);

                                timer = setTimeout(function() {

                                    //do your submit here
                                    $("#ytVideo").submit()
                                    alert('submitted:' + value);
                                }, 2000);
                            });

     //then include your submit definition. What you want to do once submit is executed
      $('#ytVideo').submit(function(e){
           e.preventDefault(); //prevent page refresh
           var form = $('#ytVideo').serialize();
           //submit.php is the page where you submit your form
           $.post('submit.php', form, function(data){ 
              //do something with the data

           });
      });

});
</script> 
```

# ruby - :thingo v 'thingo' 具有红宝石哈希值

> ID：11463029
> 
> 赞同：0
> 
> 时间：2012-07-13T01:41:50.840
> 
> 标签：ruby, hash, key

我有一个来自数据库查询的哈希值：

```
a1 = {:a => 1, :b => 2 } 
```

第三方库的另一个哈希值：

```
b1 = {'a' => 1, 'b' => 2 } 
```

我想看看是否`a1`有`'a'`我想考虑的等价于`:a`. 这是怎么做的？`b1`所以我可以检查in中是否缺少任何键`a1`。

我想要的是把 key 和 key`'a'`一样对待`:a`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T02:28:30.053

给定 Hash 有几个选项`h`：

*   您可以将所有键转换为字符串：

    ```
    Hash[h.map { |k, v| [k.to_s, v] }] 
    ```

*   您可以将所有键转换为符号：

    ```
    Hash[h.map { |k, v| [k.to_sym, v] }] 
    ```

*   您可以使用来自[ActiveSupport](http://api.rubyonrails.org/classes/ActiveSupport/HashWithIndifferentAccess.html)（Rails 免费提供）的[HashWithIndifferentAccess ：](https://rubygems.org/gems/activesupport)

    ```
    HashWithIndifferentAccess.new(h) 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T01:54:50.653

您可以使用`to_sym`

```
a.has_key?('a'.to_sym) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T02:11:56.187

这将为您提供一个（字符串）键数组，`b1`其中不存在（作为符号键）`a1`：

```
b1.keys - a1.keys.map { |key| key.to_s } 
```

然后你可以这样做：

```
missing = b1.keys - a1.keys.map { |key| key.to_s }
missing.each do |key|
    a1[key.to_sym] = b1[key]
end 
```

这是假设`b1`始终只有字符串键，您只担心`a1`缺少键/值对 from `b1`，并且您的目标是将缺失的对插入`a1`（使用符号键），从您的问题来看，所有这些听起来都是正确的。如果这些假设中的任何一个是错误的，这至少应该让你开始。

# coordinate-systems - GeoServer 可以使用平面坐标系吗

> ID：11463038
> 
> 赞同：1
> 
> 时间：2012-07-13T01:42:35.397
> 
> 标签：coordinate-systems, geoserver, srs, wkt, epsg

我有一个在自定义地图上显示不同项目的应用程序。地图有一个坐标系，基本上是 (X,Y) 坐标，以厘米为单位，左上角的坐标为 (0,0)。所有项目都相对于该坐标系显示。

我想更改应用程序以使用 GeoServer 来提供地图。GeoServer 使用 EPSG 作为 SRS（目前对我来说不是很清楚）。我并不真正关心我的地图与世界坐标的关系。在定义了一些 EPSG 的 GeoServer 服务的地图上显示我的项目的更好方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T07:38:32.187

见这里： http: [//geo-solutions.blogspot.it/2011/05/developers-corner-turning-geoserver.html](http://geo-solutions.blogspot.it/2011/05/developers-corner-turning-geoserver.html)

您需要最新版本的 GeoServer，EPSG:404000 也可用于矢量数据。

# java - 未选中可调整大小时，Netbeans null 布局导致背景边框

> ID：11463040
> 
> 赞同：1
> 
> 时间：2012-07-13T01:43:12.960
> 
> 标签：java, swing, layout, netbeans

我正在使用netbeans中的GUI编辑器制作一个简单的JFrame，其背景图像设置为netbeans站点建议的标签中的图标，标签和按钮居中。如果不使用空布局并将像素设置为居中，我很难将它们居中。我有一个 800X600 的图像作为背景，我不希望窗口可以调整大小。所以我在属性中取消选中可调整大小，在代码选项卡上，我将设计器大小设置为 800、600，选中生成大小，并且表单大小自动设置为 816、638。然后我在右侧和底部周围有一个边框几个像素的边。如果我将表单大小更改为 800、600，则背景图像会被几个像素截断。我设置的另一件事可能会影响属性 => 边界设置为 800、600、800、600。

任何关于如何在不让窗口可调整大小的情况下摆脱边框的建议以及关于不同布局是否有助于居中的任何建议都将不胜感激。我确实找到了一些网格袋布局会有所帮助的信息，但我并不能让它正常工作。我想写出代码而不是使用 GUI 编辑器也可能是一个更好的选择，但我很新，所以任何关于这方面的建议也会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:52:33.510

如果您使用正确的布局或布局组合，可以很容易地居中组件，请不要使用空布局。例如，如果您想在 JButton 旁边放置一个 JLabel 并将它们放在 JPanel 中，请先将 JLabel 和 JButton 放入它们自己的 JPanel 中（确保将此 JPanel 的 opaque 属性设置为 false），然后让包含 JPanel 的 JPanel 使用 GridBagLayout . 如果您添加一个没有 GridBagConstraints 的组件（内部 JPanel），即使调整了包含 JPanel 的大小，该组件也会自动居中。它几乎是防白痴的，而空布局是难以维护代码的秘诀。

# clojure - Clojure：需要架构建议

> ID：11463044
> 
> 赞同：2
> 
> 时间：2012-07-13T01:43:51.953
> 
> 标签：clojure, publish-subscribe

我正在写一个小 clojure pub/sub 接口。它非常简单，只有两种方法会实际使用：do-pub 和 sub-listen。sub-listen 接受一个字符串（一个子名称），do-pub 接受两个字符串（一个子名称和一个值）。

我对 clojure 还是很陌生，并且在想出一种可行的方法来做到这一点时遇到了一些麻烦。我的第一个想法（实际上也是我的第一个实现）使用了一个包含哈希的单个代理：

```
{ subname (promise1 promise2 etc) } 
```

当一个线程想要将它 conj 的一个承诺对象添加到与它想要的子关联的列表中时，然后立即尝试取消引用该承诺（因此阻塞）。

当 pub 发生时，它会遍历列表中的每个项目，并将值传递给该项目（承诺）。然后它从映射中解散该子名称并将其返回给代理。

通过这种方式，我得到了一个简单的 pub sub 实现工作。但是，当有人订阅后，问题就出现了，在一定时间内没有收到 pub，然后由于超时而被杀死。在这种情况下，代理中将有一个不需要的毫无价值的承诺，此外，如果该子永远不会被发布，这将是内存泄漏的根源。

有人对如何解决这个问题有任何想法吗？或者，如果有更好的方法来做我想要做的事情（我试图避免使用任何外部预煮的 pubsub 库，这是一个宠物项目而不是一个工作项目）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T04:04:38.540

你可以这样做：

*   创建一个`atom`
*   `publish`函数将通过传入的值更新原子值给函数
*   订阅者可以使用`add-watch`原子来通知原子值何时更改，即由于调用`publish`函数
*   用于`remove-watch`删除订阅。

这样，您将拥有一个非常基本的发布-订阅系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T18:53:24.783

我已将 Ankur 的答案标记为解决方案，但我想对其进行一些扩展。我最终做的是拥有一个所有客户端线程都执行的中心原子`add-watch`。当 pub 完成时，原子的值将更改为包含子名称和要发布的值的向量。

客户端传递给`add-watch`的函数是一个部分函数，​​看起来像

```
(partial (fn [prom sub key ref _old new] ...) sub prom) 
```

其中 prom 是先前生成的承诺。然后客户端在等待该承诺时阻塞。部分函数检查 sub in`new`是否与 相同`sub`，如果是，则删除手表并使用 from 的值交付承诺`new`。

# android - 是否可以在前台运行 Android 测试活动？

> ID：11463051
> 
> 赞同：0
> 
> 时间：2012-07-13T01:45:45.237
> 
> 标签：android, testing

我正在尝试测试一个通过网络与另一个程序交互的 Android 应用程序。我想以脚本格式执行此操作，在其中执行命令，在其他程序上验证结果，然后按一个按钮继续执行下一个命令。所以，我写了一个简单的 Activity 来处理这个问题。问题是所有测试似乎都在隐藏状态下运行。我在屏幕上看不到我的活动，甚至看不到我的测试正在设备上的应用切换器下运行。是否可以在前台运行经过测试的活动，我可以与之交互，或者不能这样做？我可以把它放到我的主应用程序中，但是我必须对用户隐藏它，并找出一种模糊的方式来调用它。有任何想法吗？谢谢！

# windows-phone-7 - 在 windows phone 7 中添加资源

> ID：11463052
> 
> 赞同：-1
> 
> 时间：2012-07-13T01:45:46.393
> 
> 标签：windows-phone-7

我想在 windows phone 7 应用程序中使用一些图片作为我的资源。我以前直接将它们作为资源添加到 Visual Studio 中，但更新起来并不容易。我想要的是我可以将它们放在应用程序文件夹中的一个文件夹中，然后应用程序可以使用它们。

我可以这样做吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T05:31:24.263

是的，您可以在应用程序的文件夹中添加项目并将其构建操作设置为内容

# java - 在Java中的双精度列表中对齐小数

> ID：11463056
> 
> 赞同：2
> 
> 时间：2012-07-13T01:46:55.423
> 
> 标签：java, alignment, double, decimal

这是代码部分：

```
 System.out.println("The values of pi from term " + (userNum - 9) + " to term " + userNum + " are:");        
        for (int x = 1; x < userNum; x++) 
            {
                if (x % 2 == 1)
                    sum = sum + (4.0/(2 * x - 1));
                else
                    sum = sum - (4.0/(2 * x - 1));
            System.out.println("Term " + (x) + ": " + sum);
            } 
```

这是输出：

```
The values of pi from term 2 to term 11 are:
Term 1: 4.0
Term 2: 2.666666666666667
Term 3: 3.466666666666667
Term 4: 2.8952380952380956
Term 5: 3.3396825396825403
Term 6: 2.9760461760461765
Term 7: 3.2837384837384844
Term 8: 3.017071817071818
Term 9: 3.2523659347188767
Term 10: 3.0418396189294032 
```

第 10 学期的小数点需要与其他小数点对齐。在 Java 中如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T02:09:32.730

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T02:08:08.967

如果您使用[Apache commons lang](http://commons.apache.org/lang)，您可以使用`StringUtils`该类来完成您所需要的：

```
System.out.println("Term " + 
    StringUtils.leftPad("" + x, (userNum.length() - x.length()), ' ')
      + ": " + sum); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T02:12:46.433

`Term`根据 的位数，您似乎想添加空格`x`：

```
 int j = String.valueOf(x).length();
    String sp = "";
    while( j++ < String.valueOf(userNum).length() )
        sp += " ";
    System.out.printf("Term %s %d : %.15f\n", sp, x, sum); 
```

# html - 固定标题显示在内容上，但顶部有一个间隙，

> ID：11463059
> 
> 赞同：0
> 
> 时间：2012-07-13T01:47:34.057
> 
> 标签：html, header, z-index, css-position

所以我已经固定并居中了标题，并且 z-index 实现了它位于滚动内容的顶部，但是顶部有一个小间隙。

我尝试使用溢出：自动但它没有像我希望的那样工作。

```
<body>
<div class="wrapper">
<header class="site-header delay fadeInDown animated">
    <a class="header-link fadeInDown animated" href="/">
    <h1>BryanBell</h1>
    </a>
</header> 
```

CSS

```
h1 {
font-family:"CubanoRegular";
font-size:72px;
letter-spacing:12pt;
line-height:120%;
text-align:center;
background: -webkit-gradient(linear, left top, left bottom, from(#fff), to(#ccc));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
margin:50px;
padding:25px;

}

header {
position:fixed;
text-align:center;
margin:0;
padding:0;
width:100%; 
height:150px;
z-index:999;
background-image: url('http://subtlepatterns.com/patterns/cartographer.png') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:38:04.060

将此添加到您的 CSS 中：

```
html{
    margin-top:0;
    padding-top:0;
}
body{
    margin-top:0;
    padding-top:0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T03:09:09.393

默认情况下，页面有少量`margin`.

因此，对于这样的事情，我们需要将`margin`and重置`padding`为`0`。

我通常也将`width`and`height`设置`100%`为，如下所示：

```
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%
} 
```

[jsFiddle](http://jsfiddle.net)显示它的原因是它已经重置了`margin`and `padding`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-20T19:43:32.637

在标题内添加：

```
<header style="top: 0px"> 
```

# ruby - 如何重新加载 ruby 类

> ID：11463060
> 
> 赞同：8
> 
> 时间：2012-07-13T01:47:36.567
> 
> 标签：ruby, rspec

在我们的许多类中，我们缓存昂贵的操作以提高性能。例如

```
def self.foo
    @foo ||= get_foo
end 
```

这在应用程序中效果很好，但是测试（RSpec）由于这些记忆变量而失败。当我们期望新值时，将在后续测试中返回第一个测试的值。

所以问题是：我如何重新加载课程？或者删除所有记忆变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T02:10:41.317

将`after`(or `before`) 块添加到示例组以删除实例变量（假设有问题的对象是主题）：

```
after do
  subject.instance_variable_set(:@foo, nil)
end 
```

或者*解决问题*。拥有一个记忆化的类实例变量有点味道，因为它永远不会改变。普通实例变量不会有这个问题，因为您会为每个测试创建一个新对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T02:13:02.220

以缓存数据保持正确或在无效时被删除的方式构建您的类和测试。`before`考虑添加一个方法来清除缓存并在 rspec块中调用它。

# php - 有没有办法在 CodeIgniter 中自动返回所有数据库列？

> ID：11463062
> 
> 赞同：0
> 
> 时间：2012-07-13T01:47:50.633
> 
> 标签：php, mysql, codeigniter, activerecord

这就是我目前在 CodeIgniter 中进行查询并返回数据集的方式：

```
$sql = "SELECT `user_id`, `username`
    FROM `users`
    LIMIT 10";

$query = $this->db->query($sql);

$users = array();
foreach($query->result() => $row) {

    $users[] = array(
        'user_id'   => $row->user_id,
        'username'  => $row->username
    );
}
return $users; 
```

如您所见，我明确写了要返回的字段：

```
 $users[] = array(
        'user_id'   => $row->user_id,
        'username'  => $row->username
    ); 
```

有没有办法让它自动完成。那么在 sql 查询中选择的所有字段都会被列为要返回的数组的键和值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:57:50.647

就在这里。使用`result_array()`.

```
foreach ($query->result_array() as $row)
... 
```

[您可以在此处](http://codeigniter.com/user_guide/database/results.html)了解更多信息。

# scala - 在 Scala 中从“Data types ala Carte”编写 foldTerm

> ID：11463064
> 
> 赞同：5
> 
> 时间：2012-07-13T01:48:14.807
> 
> 标签：scala, scalaz

我正在尝试从Scala 中的[Data Types ala Carte](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFMQFjAA&url=http://www.cs.ru.nl/~W.Swierstra/Publications/DataTypesALaCarte.pdf&ei=M33_T7iBNeOy2wXT8dyuBA&usg=AFQjCNHTd-wFnUQ0MfIxo8dMSVny-cyuww)`foldTerm`编写函数。这是我到目前为止所得到的

```
def foldTerm[F[+_], A, B](e: Free[F, A], pure: A ⇒ B, imp: F[B] ⇒ B)(implicit F: Functor[F]): B =
  e.resume match { 
    case Right(a) ⇒ pure(a)
    case Left(x)  ⇒ imp(F.map(x)(foldTerm(_, pure, imp)))
} 
```

这可行，但由于 Scala 无法正确优化尾递归，它会导致 SOE。我试图修复它，`Trampoline`但到目前为止还没有任何运气。我觉得我应该能够使用现有的方法来做到这一点，`Free`但我所有的尝试都以失败告终。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:18:21.380

事实证明这毕竟不是我的问题。我`ListT.fromList`在一个大列表上使用 a ，这就是破坏堆栈的原因。切换到使用`StreamT`解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T08:06:53.370

Scala 可以正确地消除尾递归调用。但是你的方法不是尾递归的。您可以使用`@annotaion.tailrec`注释检查它。

```
@annotation.tailrec
def foldTerm[F[+_], A, B](e: Free[F, A], pure: A ⇒ B, imp: F[B] ⇒ B)(implicit F: Functor[F]): B =
  e.resume match { 
    case Right(a) ⇒ pure(a)
    case Left(x)  ⇒ imp(F.map(x)(foldTerm(_, pure, imp)))
}

<console>:19: error: could not optimize @tailrec annotated method foldTerm: it contains a recursive call not in tail position
           case Left(x)  ⇒ imp(F.map(x)(foldTerm(_, pure, imp))) 
```

您在这里的最后一个电话是`imp`而不是`foldTerm`。

# django - self.delete() 给出错误：“实例需要有一个主键值才能使用多对多关系”

> ID：11463066
> 
> 赞同：0
> 
> 时间：2012-07-13T01:48:22.037
> 
> 标签：django, django-models

我有三个模型。我们将它们称为 Mod1、Mod1Request 和 UserProfile。

Mod1Request 看起来像：

```
class Mod1Request(models.Model):
date_requested = models.DateField(auto_now_add=True)
mod1s = models.ManyToManyField('Mod1')
user = models.ForeignKey(User)
approved = models.BooleanField()
def save(self, *args, **kwargs):
    if self.approved:
        for c in list(self.mod1s.all()):
            mod = mod1.objects.get(id=c.id)
            self.user.get_profile().mod1s.add(mod)
        self.delete()
    else:
        super(Mod1Request, self).save(*args, **kwargs) 
```

然后 UserProfile 有一个“mod1s”属性，它是 Mod1 的 ManyToManyField。我想要完成的是：保存 Mod1Request 时，如果设置了 Approved，则将 Mod1Request 中列出的 Mod1 添加到 UserProfile，然后删除 Mod1Request 本身。

此功能一直有效，直到它自行删除。如果我删除 self.delete() 行，那么 Mod1Request 中的 Mod1 实例会正确添加到 UserProfile.mod1s。但是，如果我把它留在里面，我会收到以下错误：

```
'Mod1Request' instance needs to have a primary key value before a many-to-many relationship can be used. 
```

任何帮助将不胜感激。

**编辑：**我应该澄清 Mod1Request 是由一个用户在表单中输入的，然后由另一个（管理员）用户批准。因此管理员用户检查批准并“保存”Mod1Request。然后 Mod1Request 应将 Mod1 添加到 UserProfile 并自行删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:21:42.087

只需删除`self.delete()`- 你不需要它。因为您没有`save`为已批准的对象调用超类方法，所以它们实际上从未保存到数据库中。

# objective-c - 从另一个类访问类变量

> ID：11463069
> 
> 赞同：0
> 
> 时间：2012-07-13T01:48:51.620
> 
> 标签：objective-c, ios, xcode4, uiviewcontroller

我有一个管理两个 ViewController 的 UITabBarController。第一个是允许用户更改游戏设置的 UIViewController。第二个是运行游戏模拟的 GLKViewController。

我正在尝试启用 Game ViewController 以从 Settings ViewController 获取设置。我在设置视图上有一个滑块，代表“速度”。

我有对另一个控制器的引用，但我无法正确公开支持我的 Slider 的变量。

SecondViewController.h

```
@interface SecondViewController : UIViewController{
    IBOutlet UISlider    * mySlider;
}
property (nonatomic,retain) IBOutlet UISlider    * mySlider;
@end 
```

第二视图控制器.m

```
- (IBAction) mySliderWasMoved:(id)sender;
@implementation SecondViewController
@synthesize mySlider;
- (IBAction) mySliderWasMoved:(id)sender{    
}; 
```

第三视图控制器.m

```
NSArray *tmpVCs = self.parentViewController.tabBarController.viewControllers;
UIViewController *tmpVC = [tmpVCs objectAtIndex:1]; //obtain handle to SecondViewController
//NSNumber *mySpeed = tmpVC.mySlider;  //doesn't see mySlider
NSNumber *mySpeed = [tmpVC mySlider];  //doesn't see mySlider 
```

我是新手，我的项目有很多方面需要学习——所以我现在不想学习如何管理数据。我只需要知道如何访问实例变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:43:46.133

正如评论中提到的，

1.  使用 NSDefault 保存滑块更改的值。在第一次加载应用程序时，您需要设置一个默认值。

2.  使用单例对象来存储值。

我们理解，引用您的话“此时不想学习数据持久性。我也不需要架构指导。”但这里的经验法则是，您可能能够以某种方式访问​​实例变量或其他，但我认为拥有最好的方法将使您受益匪浅。

只是我的2美分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:01:11.307

为了他人的利益：我抓住了另一个类的句柄，但我没有将返回类型声明为正确的类类型。

代替：

```
UIViewController *tmpVC = [tmpVCs objectAtIndex:1]; 
```

和：

```
SecondViewController *tmpVC = [tmpVCs objectAtIndex:1]; 
```

现在我可以访问特定于 SecondViewController 的属性。

# linux - 在 Linux 中使用 --image-base 确保程序加载低于 4 GB

> ID：11463070
> 
> 赞同：1
> 
> 时间：2012-07-13T01:49:06.280
> 
> 标签：linux, linker

我试图确保在 4 GB 的物理内存中加载特定的二进制文件。在 LD 选项中，我看到了 --image-base。文档说：[此选项特定于链接器的 i386 PE 目标端口]

在 Linux 上，如果我使用此选项，它会显示无法识别的选项“--image-base”。

有什么方法可以确保特定二进制文件在 Linux 上加载到 4 GB 以下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T05:50:29.800

> 我试图确保在 4 GB 的物理内存中加载特定的二进制文件。

假设您谈论的是用户级（应用程序）代码，而不是 Linux 内核，则您无法确保与*物理*内存*无关。*您只能确保有关*虚拟*内存的某些信息。

 **如果您使用的是 32 位系统，您的问题也毫无意义，因为此类系统上的*所有*内存都低于 4GB。

因此，您的问题似乎是：“如何链接 64 位 Linux 系统上的可执行文件，以便它在下面加载`0x100000000`？”

假设您使用`x86_64`的答案是：默认链接选项*已经*对主要可执行文件执行此操作（尽管不适用于共享库），因此您不需要做任何特别的事情。如果您希望在 4GB 边界下加载*所有*`-static`代码，请将您的应用程序与标志链接（但请注意：这样做可能由于各种原因而无法正常工作，并且还会对您的二进制文件施加许可证限制）。**

# excel - 如何提取跨越 1000 多个“表格”的 Microsoft Excel 文档的特定单元格（行、列）的内容？

> ID：11463071
> 
> 赞同：0
> 
> 时间：2012-07-13T01:49:13.900
> 
> 标签：excel

我有一个 Excel 文档，其中包含 1000 多张“表格”的人员联系信息（每张表格一个人）。

第 8 行和 C 列在 1000 多张纸上的每一张上都包含一个人的家庭住址。

如何在不从每张纸上手动复制/粘贴它们的情况下为每 1000 多张纸提取（第 8 行，C 列）？

最后，我希望将所有家庭地址粘贴到 MS Word 文档中，该文档可以打印在特殊的可打印地址标签纸上。

是否有脚本可以做到这一点？写一个简单吗？将不胜感激所有/任何建议。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T02:09:03.303

这应该让你开始。如果您遇到困难，请发布您的代码并解释什么不起作用。**首先在您的工作簿副本中进行测试，**以防止意外覆盖您无意覆盖的内容。

```
Sub HarvestAddresses()
    Dim ws As Worksheet
    Dim target As Worksheet
    Dim rng As Range
    Dim i As Integer

    ' We will harvest all addresses onto the target sheet
    Set target = Sheets("Sheet1")

    ' First address will be copied to the target.Range, and subsequent addresses
    ' get copied to the cells below
    Set rng = target.Range("A1")
    i = 0

    ' We copy the value from "C8" in every worksheet in our workbook
    ' to the target
    For Each ws In Worksheets
        rng.Offset(i) = ws.Range("C8")
        i = i + 1
    Next
End Sub 
```

# android - Android 中如何使用 EasyEditSpan 来允许部分文本编辑？

> ID：11463073
> 
> 赞同：7
> 
> 时间：2012-07-13T01:49:16.420
> 
> 标签：android, textview

我想允许用户在我的 Android 应用程序中只编辑一行文本的一部分。我看到一个名为 EasyEditSpan 的类，但是当我将它粘贴到 TextView 中时，什么也没有发生。我尝试使 TextView 可编辑，但它仍然没有任何效果。如果切换到 EditText，那么整行文本都是可编辑的，这也是不正确的。这是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    TextView testView = (TextView)findViewById(R.id.text_view);
    testView.setText(buildMiddleEditSpannable("Please enter your ", "Name", " here."));
}

public static Spannable buildMiddleEditSpannable(CharSequence beginning, CharSequence middle, CharSequence end) {
    int spanMidStart = beginning.length();
    int spanMidEnd = spanMidStart + middle.length();

    SpannableString span = new SpannableString(new StringBuilder(middle).insert(0, beginning).append(end));
    span.setSpan(new EasyEditSpan(), spanMidStart, spanMidEnd, 0);
    return span;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T04:46:33.343

在查看引用`EasyEditSpan`（[EasyEditSpan](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/text/style/EasyEditSpan.java)、[TextView](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/TextView.java)和[TextUtils](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/text/TextUtils.java)）的框架代码后，很明显，即使它在描述中说：

> 提供一种编辑部分文本的简单方法。

当前可用的功能仅限于描述的第二部分，如下所示：

> TextView 使用这个跨度允许用户一键删除一段文本。文本。一旦文本被编辑或光标移动，TextView 就会删除这个跨度。

这是一些演示其用法的快速示例代码：

```
public class EasyEditSpanActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        final EditText editText = new EditText(this);
        setContentView(editText);

        showToast("Longclick to set EasyEditSpan for the line on cursor");

        editText.setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS);
        editText.setSingleLine(false);
        editText.setText("####\n#######\n###\n######\n####".replace("#", "text "));
        editText.setOnLongClickListener(new OnLongClickListener() {
            @Override
            public boolean onLongClick(View v) {
                final Layout layout = editText.getLayout();
                final int line = layout.getLineForOffset(editText.getSelectionStart());
                final int start = layout.getLineStart(line);
                final int end = layout.getLineEnd(line);
                editText.getEditableText().setSpan(new EasyEditSpan(), start, end,
                        Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                showToast("Edit line to show EasyEdit window");
                return true;
            }
        });
    }

    private void showToast(String message) {
        Toast.makeText(this, message, Toast.LENGTH_SHORT).show();
    }

} 
```

所以不幸的是，如果您需要一种方法来允许用户在您的应用程序中只编辑一行文本的一部分，`EasyEditSpan`似乎并没有多大帮助。您可能需要使用`ClickableSpan`自定义对话框来实现一些代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T06:10:10.720

您最好使用 ClickableSpan 并弹出一个对话框来编辑内容。但是，我尝试实现部分可编辑的文本视图。这并不完整，可能有一些粗糙的边缘。它使用三个跨度并覆盖 onSelectionChanged(int selStart, int selEnd) 和 onKeyDown(int keyCode, KeyEvent event) 方法以在目标为 part1 或 part3 时禁用编辑。希望能帮助到你。

//activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.sensei.partialedit.EditTextSelectable
        android:id="@+id/text_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="@dimen/padding_medium"
        android:text="@string/hello_world"
        android:background="#00000000"
        tools:context=".MainActivity" />
</RelativeLayout> 
```

//MainActivity.java

```
package com.sensei.partialedit;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        EditTextSelectable testView = (EditTextSelectable) findViewById(R.id.text_view);
        testView.setText("Please enter your ", " Name ", " here.");
    }
} 
```

//EditTextSelectable.java

```
package com.sensei.partialedit;

import android.content.Context;
import android.graphics.Color;
import android.text.Spannable;
import android.text.SpannableStringBuilder;
import android.text.method.KeyListener;
import android.text.style.CharacterStyle;
import android.text.style.ForegroundColorSpan;
import android.text.style.UnderlineSpan;
import android.util.AttributeSet;
import android.util.Log;
import android.view.KeyEvent;
import android.widget.EditText;

public class EditTextSelectable extends EditText {

    private String part1;
    private String part2;
    private String part3;
    private ForegroundColorSpan span1;
    private CharacterStyle span2;
    private ForegroundColorSpan span3;

    public EditTextSelectable(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        setTag(getKeyListener());
    }

    public EditTextSelectable(Context context, AttributeSet attrs) {
        super(context, attrs);
        setTag(getKeyListener());
    }

    public EditTextSelectable(Context context) {
        super(context);
        setTag(getKeyListener());
    }

    public void setText(String part1, String part2, String part3) {
        setText(buildMiddleEditSpannable(part1, part2, part3));
        setSelection(part1.length() + part2.length() - 1);
    }

    private Spannable buildMiddleEditSpannable(String part1, String part2,
            String part3) {
        this.part1 = part1;
        this.part2 = part2;
        this.part3 = part3;
        SpannableStringBuilder spannable = new SpannableStringBuilder(part1
                + part2 + part3);
        span1 = new ForegroundColorSpan(Color.GRAY);
        spannable.setSpan(span1, 0, part1.length() - 1,
                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        span2 = new UnderlineSpan();
        spannable.setSpan(span2, part1.length(),
                part1.length() + part2.length(),
                Spannable.SPAN_INCLUSIVE_INCLUSIVE);
        span3 = new ForegroundColorSpan(Color.GRAY);
        spannable.setSpan(span3, (part1 + part2).length(),
                (part1 + part2 + part3).length(),
                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        return spannable;
    }

    @Override
    protected void onSelectionChanged(int selStart, int selEnd) {
        if (part1 == null)
            return;
        if (selStart >= getText().getSpanStart(span2)
                && selEnd <= getText().getSpanEnd(span2)) {
            setKeyListener((KeyListener) getTag());
            setCursorVisible(true);
        } else {
            setKeyListener(null);
            setCursorVisible(false);
        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode==KeyEvent.KEYCODE_ENTER) {
            // Just ignore the [Enter] key
            return true;
        }
        int selectionStart = getSelectionStart();
        int selectionEnd = getSelectionEnd();
        Log.d("partialedit", "OnKeyDown:" + selectionStart + ":" + selectionEnd + ":" + getText().getSpanStart(span2) + ":" + getText().getSpanEnd(span2));
        if (selectionStart < part1.length() + 1
            || selectionStart >= getText().length() - part3.length()) {
            return true;
        }

        // Handle all other keys in the default way
        return super.onKeyDown(keyCode, event);
    }
} 
```

# javascript - Titanium v s Sencha - 学习曲线？

> ID：11463079
> 
> 赞同：4
> 
> 时间：2012-07-13T01:50:06.940
> 
> 标签：javascript, sencha-touch, titanium, extjs, titanium-mobile

Sencha 有一个陡峭的学习曲线，但这与钛相比如何？钛更容易学习吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-13T14:40:18.723

我已经使用过 Sencha Touch 1（一些 ST2），现在在 Titanium 中重新开发了我的应用程序。

*   Sencha Touch 通过开发跨设备看起来一致的跨平台界面更轻松。Titanium 建议您使用 IOS 和 Android 平台之间普遍理解的界面差异来定位平台。

*   ST 拥有成熟的 MVC 结构来帮助您开发应用程序。如果您喜欢 MVC，Titanium 并没有真正达到 ST 的水平，或者根本没有。他们正在努力。另一方面，在了解了更多关于 Ti 的结构之后，我仍然喜欢它。

*   据我了解，Titanium 将您的界面元素映射到目标平台上的本机界面元素。使用 ST，我在某些 Android 平台上的界面存在性能问题。具体来说，我记得 Android 3.0 平台存在问题。这是我切换到不同平台的主要原因。

*   根据我的需要，两个平台都有存储数据的方法。ST 可以帮助您更多地帮助您，如果您设置正确，您可以自动加载数据，这非常好。在 Titanium 中，加载数据更多地由您管理。Sencha 使用了一个“商店”系统，可以很好地执行。使用它需要一些时间来了解您是否来自数据库世界。Titanium 允许您访问 SQLite，因此，如果您来自数据库世界，您通常可以很快地使用它。

*   Titanium 为您提供了一种为每个目标平台创建本机模块的方法。我不相信 Sencha Touch 有这个方法。因此，如果有一些 Titanium 没有实现的东西，你可以自己编写它以获得某种原生平台功能。我不认为你对 Sencha 有这个选择。

我觉得 Titanium 的外观和感觉比 Sencha Touch 更自然。要做到这一点，你肯定需要做更多的工作来实现它，所以需要权衡取舍。我确实怀念 Sencha 的 MVC 结构，因为它对我来说很有意义。在 Titanium 中有一些使用 MVC 的方法，但在尝试了解几个社区创建的尝试后，我放弃了。一旦你放弃尝试像我最初尝试的那样尝试将它融入 Sencha 的 MVC 结构，Titanium 结构就会变得有意义。Sencha Touch 的奇怪操作系统特定问题导致我最终放弃使用它。即使在示例应用程序中，带有几个字段的页面也会出现抖动。我知道这是 Google 对 Android 的“平台性能问题”，但它最终把我转向了 Titanium。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T01:53:42.647

在这两种情况下，您都在使用 Javascript 编写视图而不是 HTML。因此，两者都需要一些时间来熟悉特定的 API 和工作流程。

也就是说，我发现 Titanium 架构更适合快速开发。Sencha Touch 在创建基本应用程序时似乎有更多的开销。总的来说，我认为钛更容易学习。

这是一个相当主观的问题，也许不是最适合 StackOverflow，但你去吧。

# python - 如何将文件添加或上传到 nltk 语料库？

> ID：11463081
> 
> 赞同：0
> 
> 时间：2012-07-13T01:50:25.733
> 
> 标签：python, nltk

我是 NLTK 和 Python 的新手。如何将我们自己的文件添加或上传到 nltk 语料库？例如，我如何将自己的 .TXT 文件上传到 ieer 语料库？可能吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:05:41.613

您可能正在尝试使用 nltk 软件读取您自己的文件。如果您有一个`/home/me/corpusdir`包含 ieer 格式文件的目录，您应该可以使用以下命令打开它们

myreader = nltk.corpus.reader.ieer.IEERCorpusReader(r'/home/me/corpusdir', '*.txt')

然后，您可以调用与真实 ieer 语料库相同的方法。查看`CorpusReader`该`ieer`模块（我从未使用过）的文档以了解详细信息。

如果您真的想将文件**添加**到现有语料库中，您应该将它们放入目录中，`nltk_data`或者（更复杂但从长远来看更好）将您的语料库目录中的符号链接放到 nltk ieer 目录中，以便您的读者将将原始 ieer 文件视为语料库的子目录。

# php - Joomla 2.5 不通过文章加载 JS 脚本？

> ID：11463083
> 
> 赞同：0
> 
> 时间：2012-07-13T01:51:05.147
> 
> 标签：php, jquery, scripting, joomla, article

在 Joomla 2.5 中，我安装了 DirectPHP，我在 Joomla 1.6 中广泛使用它来将 PHP 嵌入到 Joomla 文章中。它工作得很好。我通常只在文章中包含一个，如下所示：

```
<?php
    include "my_cool_script.php";
?> 
```

然后我在`my_cool_script.php`. 我经常做的一件事是在页面中包含更多的 JS 或 CSS 脚本，直通文章，但将以下几行放入`my_cool_script.php`：

```
<link rel="stylesheet" type="text/css" media="screen" href="/scripts/css/dark-hive/jquery-ui-1.8.21.custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/scripts/css/ui.jqgrid.css" />
<script src="/scripts/js/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="/scripts/js/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
<script src="/scripts/js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="/scripts/js/jquery.jqGrid.src.js" type="text/javascript"></script> 
```

这在过去一直有效，Joomla 1.6。现在在 Joomla 2.5 安装中。其余的 PHP 和 HTML 正在文章中加载，就加载脚本而言，页面上没有任何错误。我查看了 HTML 代码，我可以看到上面写到页面的行，但是我无法访问任何 jQuery 函数，就像没有加载脚本一样。当我尝试使用任何 jQuery 语法时出现错误。我知道这个脚本是有效的，因为我刚刚将它从另一个站点移动，运行 joomla 1.5 到新的 2.5。

有谁知道为什么脚本没有加载？

**编辑**

好吧，我猜脚本正在加载，但它不喜欢使用该`$`符号。我将它们全部更改为`jQuery`并且它有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:32:12.453

我不确定为什么，但也许在我的安装中存在一些冲突，并且该`$`符号像往常一样被识别，表示我们是 dong jQuery。所以我在我的 PHP 脚本中更改了所有的`$`to `jQuery`，所有的 jQuery 似乎现在都可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:46:13.200

Mootools（Joomla 2.5 版之前的 javascript 默认框架）也使用“$”，因此如果您不知道自己正在运行依赖于两个框架的脚本，很容易遇到一些复杂情况。

`jQuery.noConflict();`话虽如此，您可以使用“jQuery”而不是“$”并使用该命令为其他所有人释放“$” 。

干杯。

# python - 为什么 len() 不支持迭代器？

> ID：11463086
> 
> 赞同：6
> 
> 时间：2012-07-13T01:51:39.937
> 
> 标签：python, iterable

许多 Python 的内置函数（`any()`,`all()`等`sum()`）都采用可迭代对象，但为什么不`len()`呢？

人们总是可以将`sum(1 for i in iterable)`其用作等价物，但为什么它首先`len()`不采用可迭代对象？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-13T01:53:04.987

许多迭代是由没有明确定义的 len 的生成器表达式定义的。采取以下永远迭代的方法：

```
def sequence(i=0):
    while True:
        i+=1
        yield i 
```

基本上，要获得明确定义的长度，您需要预先了解整个对象。将其与`sum`. 您不需要一次知道整个对象来对其求和——只需一次取一个元素并将其添加到您已经求和的内容中。

小心像这样的习语`sum(1 for i in iterable)`，通常它只会耗尽可迭代的，所以你不能再使用它了。或者，如果涉及大量计算，获取第 i 个元素可能会很慢。可能值得问问自己为什么需要先验知道长度。这可能会让您深入了解要使用哪种类型的数据结构（经常`list`并且`tuple`工作得很好）——或者您可以执行您的操作而无需调用`len`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T01:52:48.993

这是一个可迭代的：

```
def forever():
    while True:
        yield 1 
```

然而，它没有长度。如果你想找到一个有限迭代的长度，唯一的方法是定义一个迭代是什么（你可以重复调用以获得下一个元素直到你到达末尾）是完全扩展迭代，例如：

```
len(list(the_iterable)) 
```

* * *

正如 mgilson 指出的那样，您可能想问自己 - 为什么您想知道特定迭代的长度？随意评论，我会添加一个具体的例子。

如果您想跟踪已处理的元素数量，而不是执行以下操作：

```
num_elements = len(the_iterable)
for element in the_iterable:
    ... 
```

做：

```
num_elements = 0
for element in the_iterable:
    num_elements += 1
    ... 
```

* * *

如果您想要一种高效的方式来查看最终有多少元素被理解，例如：

```
num_relevant = len(x for x in xrange(100000) if x%14==0) 
```

这样做效率不高（您不需要整个列表）：

```
num_relevant = len([x for x in xrange(100000) if x%14==0]) 
```

`sum`可能是最方便的方法，但它看起来很奇怪，而且还不清楚你在做什么：

```
num_relevant = sum(1 for _ in (x for x in xrange(100000) if x%14==0)) 
```

因此，您可能应该编写自己的函数：

```
def exhaustive_len(iterable):
    length = 0
    for _ in iterable: length += 1
    return length

exhaustive_len(x for x in xrange(100000) if x%14==0) 
```

长名称是为了提醒您它确实消耗了可迭代对象，例如，这不会像您想象的那样工作：

```
def yield_numbers():
    yield 1; yield 2; yield 3; yield 5; yield 7

the_nums = yield_numbers()
total_nums = exhaustive_len(the_nums)
for num in the_nums:
    print num 
```

因为`exhaustive_len`已经消耗了所有元素。

* * *

编辑：啊，在那种情况下你会使用`exhaustive_len(open("file.txt"))`，因为你必须一个接一个地处理文件中的所有行以查看有多少行，并且通过调用`list`.

# php - 如何将 ck-editor 与 jquery validate 集成？

> ID：11463087
> 
> 赞同：0
> 
> 时间：2012-07-13T01:51:45.710
> 
> 标签：php, editor, ckeditor

我想将 CK-editor 与 jquery validate 集成，但它不起作用。

```
$("#commentForm").validate({
        rules: {
            txtckeditor: "required",
        },
        messages: {
            txtckeditor: "This field is required.",
          onkeyup: false,
        onblur: true
}); 
```

如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T04:04:59.253

在调用 validate 之前，请尝试以下操作：

```
CKEDITOR.instances.txtckeditor.updateElement(); // then your validate call
$("#commentForm").validate({
        rules: {
                 .... 
```

# wpf - 哪个控件在 WPF 中显示只读彩色文本？

> ID：11463088
> 
> 赞同：1
> 
> 时间：2012-07-13T01:51:49.120
> 
> 标签：wpf, wpf-controls

我想要一个元素或控件显示现成的、彩色的、可选择的、可滚动的文本，这是我的应用程序中的一种日志。不知道是[固定文件还是流文件](http://msdn.microsoft.com/en-us/library/ms748388.aspx)。

[RichText](http://msdn.microsoft.com/en-us/library/aa970779.aspx)可能是表面上的选择，但它最初支持编辑。我相信即使我设置了 readonly=true，内置的编辑支持也需要一些资源。我想找一个更轻的。

也许是 FlowDocumentScrollViewer？它是只读的，默认情况下不显示工具栏。即使我打开 IsToolBarVisible，工具栏也只是一个小控件。

块出现在我的脑海中。虽然它可能是最轻的控件，但我无法不费力气地选择其中的文本。

也许存在其他选择？你有什么意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:20:22.127

我做了一个实验来帮助我在 FlowDocumentScrollViewer、RichTextBox 和 TextBlock 中选择我更喜欢的控件。我发现 FlowDocumentScrollViewer 是最好的。

在每个窗口中，我有两个相同类型的控件：FlowDocumentScrollViewer、RichTextBox 或 TextBlock。我做了三个这样的窗口，因为 MainWindow 有三个按钮。 ![在此处输入图像描述](../Images/1da657bb00bd9e348259c7c182337ba9.png)

```
private void prepareButton_Click(object sender, RoutedEventArgs e)
{

    document1 = HelperClass.GetDocument();

    document2 = HelperClass.GetDocument();
}

private void loadButton_Click_1(object sender, RoutedEventArgs e)
{
    Stopwatch watch = new Stopwatch();
    watch.Start();

    viewer1.Document = document1;
    viewer2.Document = document2;

    this.Dispatcher.BeginInvoke(DispatcherPriority.Loaded,
                  new Action(() =>
                  {
                      watch.Stop();
                      MessageBox.Show("Took " + watch.ElapsedMilliseconds + " ms",Title);
                  }));
} 
```

其中 viewer1 和 viewer2 可以是 FlowDocumentScrollViewer 或 RichTextBox。对于 TextBlock，我使用

```
private void prepareButton_Click(object sender, RoutedEventArgs e)
{

    inlines1 = HelperClass.GetInlines();

    inlines2 = HelperClass.GetInlines();
}

private void loadButton_Click_1(object sender, RoutedEventArgs e)
{
    Stopwatch watch = new Stopwatch();
    watch.Start();

    viewer1.Inlines.AddRange(inlines1);
    viewer2.Inlines.AddRange(inlines2);

    this.Dispatcher.BeginInvoke(DispatcherPriority.Loaded,
                  new Action(() =>
                  {
                      watch.Stop();
                      MessageBox.Show("Took " + watch.ElapsedMilliseconds + " ms");
                  }));
} 
```

测试表明 FlowDocumentScrollViewer 在三者中性能最好：

```
 FlowDocumentScrollViewer   RichTextBox    TextBlock
Working set      65400                    67252          82124
Loading Time      1045                    1414           45119 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:10:01.340

我不确定您认为“编辑”功能占用了哪些类型的资源。选择文本的能力与编辑文本的能力齐头并进。

如果你想要一个，你就必须忍受另一个。幸运的是，将 IsReadOnly 设置为“True”将满足您的功能要求。

如果您的应用程序机器能够运行带有 WPF 的 .NET Framework，我不会担心编辑简单文本的能力可能（或可能不会）消耗的少量资源。

# mysql - 具有逗号分隔值的单个 MySQL 字段

> ID：11463090
> 
> 赞同：7
> 
> 时间：2012-07-13T01:52:22.933
> 
> 标签：mysql, sql

> **可能重复：**
> [mysql 是多列中的数组](https://stackoverflow.com/questions/3971622/mysql-is-array-in-multiple-columns)

我有两张桌子：

帖子表

```
PostID | Gallery
  1    | 4,7,8,12,13
  2    | 1,2,3,4
  3    | 5,8,9
  4    | 3,6,11,14 
```

Gallery 中的值是 Images 表中的主键：

图像表

```
ImageID | FileName
   1    | something.jpg
   2    | lorem.jpg
   3    | ipsum.jpg
   4    | what.jpg
   5    | why.jpg 
```

我这样做而不是仅仅将 PostID 键添加到 Images 表的原因是因为这些图像可以与许多不同的帖子相关联。我想我可以为关系添加另一个表，但就我用来添加它的 jQuery 脚本而言，逗号分隔的值更容易使用。

如果我在需要与 PostID 3 关联的图像的页面上，我可以运行什么样的查询来输出它的所有文件名？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-13T01:57:14.027

您可以使用此解决方案：

```
SELECT b.filename
FROM posts a
INNER JOIN images b ON FIND_IN_SET(b.imageid, a.gallery) > 0
WHERE a.postid = 3 
```

[SQLFiddle](http://sqlfiddle.com/#!2/1a5a4/5/0)

但是，您应该真正规范您的设计并在帖子和图像之间使用交叉引用表。这将是表示 N:M（多对多）关系的最佳和最有效的方式。它不仅检索效率更高，而且大大简化了图像关联的*更新*和*删除。*

* * *

> > ...但是就我用来添加它的 jQuery 脚本而言，逗号分隔的值更容易使用。

即使您使用交叉引用表正确表示了 N:M 关系，您仍然可以获得`imageid`CSV 格式的 's：

假设您有一个`posts_has_images`包含主键字段 ( `postid`, `imageid`) 的表：

您可以使用`GROUP_CONCAT()`来获取每个 的`imageid`CSV `postid`：

```
SELECT postid, GROUP_CONCAT(imageid) AS gallery
FROM posts_has_images
GROUP BY postid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T02:03:27.220

就正确的 SQL 而言，您绝对应该有另一个表来关联两者，而不是分隔列。

也就是说，您可以这样做：

```
SELECT * FROM Images i WHERE EXISTS (SELECT 1 FROM Posts p WHERE p.PostID = 3 AND i.ImageID IN (p.Gallery)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T02:04:08.357

这是你的问题。这是一个糟糕的设计，因为您需要搜索`Gallery`字段的特定值。您可以使用[`FIND_IN_SET`](https://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)，但您的查询会很慢。转到 Gallery 的原子值 - 对其进行规范化。

# c# - 为什么命名空间类型不应该依赖于嵌套的命名空间类型？

> ID：11463092
> 
> 赞同：8
> 
> 时间：2012-07-13T01:52:27.670
> 
> 标签：c#, namespaces

在 .Net 命名指南（[http://msdn.microsoft.com/en-us/library/893ke618(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/893ke618%28v=vs.71%29.aspx)）中有这样的声明：

“嵌套命名空间应该依赖于包含命名空间中的类型。例如，System.Web.UI.Design 中的类依赖于 System.Web.UI 中的类。但是，System.Web.UI 中的类不依赖于 System.Web.UI.Design 中的类。”

我想知道为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T01:53:37.643

因为当你想到它时它是有道理的。

让我用一个小例子来解释：

> **例如，刀片**需要一个手柄**才能**成为“刀”。
> 
> 但是手柄**不需要**刀刃作为手柄，对吗？

```
using KitchenSet;
using KitchenSet.Knives; // This is where your knives (what uses Blades) would live.
using KitchenSet.Knives.Blades; // The actual blades. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:06:07.420

这是一个明智的规则，因为 System.Web.UI 命名空间中定义的类对 System.Web.UI.Design 中定义的类可见，但 System.Web.UI.Design 命名空间中定义的类对类不可见在 System.Web.UI 命名空间中定义。在后一种情况下，需要添加 using 语句（VB.NET 中的 Imports）。

# windows-phone-7 - wp7滚动查看器列表框不起作用

> ID：11463098
> 
> 赞同：2
> 
> 时间：2012-07-13T01:53:27.327
> 
> 标签：windows-phone-7, listbox, scrollview

```
 <controls:PanoramaItem Header="Aylık" Foreground="White">
        <Grid x:Name="monthlyPanaromaGrid" >
            <Grid.Resources>
                <Style TargetType="ListBoxItem" x:Key="ListItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                </Style>
            </Grid.Resources>
            <ScrollViewer HorizontalAlignment="Stretch" Height="Auto" VerticalAlignment="Stretch">
                <ListBox x:Name="monthlyItemListBox"  ScrollViewer.VerticalScrollBarVisibility="Auto" >
                    <ListBox.ItemTemplate >
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
                                <TextBlock Text="{Binding Id}"  FontSize="24" />
                                <TextBlock Text="    " FontSize="24" />
                                <TextBlock Text="{Binding Name}" FontSize="24" />
                                <TextBlock Text="    " FontSize="24" />
                                <TextBlock Text="{Binding Surname}" FontSize="24" />
                                <TextBlock Text="    " FontSize="24" />
                                <TextBlock Text="{Binding Age}" FontSize="24" />
                                <TextBlock Text="    " FontSize="24" />
                                <TextBlock Text="{Binding Status}" FontSize="24" />
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </ScrollViewer>
        </Grid>
    </controls:PanoramaItem> 
```

我尝试了包含 50 个成员的列表，但我无法查看滚动查看器，这可能会导致问题吗？谢谢我在这里看到了一些答案，我试过但没有工作（改变高度......等）谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T03:26:14.970

`ListBox`已经有一个`ScrollViewer`，这两个控件将争夺您的操作。

删除外部`ScrollViewer`，或设置`ScrollViewer.VerticalScrollBarVisibility="Disabled"`您的`ListBox`以禁用滚动。

并且不确定你是否使用那些`TextBlocks`for `Margin`，但你应该`Margin`直接设置，或者使用`ColumnDefinitions`和 a `Grid`。

```
<controls:PanoramaItem Header="Aylık" Foreground="White">
        <Grid x:Name="monthlyPanaromaGrid" >
            <Grid.Resources>
                <Style TargetType="ListBoxItem" x:Key="ListItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                </Style>
            </Grid.Resources>
                <ListBox x:Name="monthlyItemListBox" HorizontalAlignment="Stretch" ScrollViewer.VerticalScrollBarVisibility="Auto" >
                    <ListBox.ItemTemplate >
                        <DataTemplate>
                            <Grid HorizontalAlignment="Stretch">
                              <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                              <ColumnDefinition Width="*" />
                              <ColumnDefinition Width="*" />
                              <ColumnDefinition Width="*" />
                              <ColumnDefinition Width="*" />
                              </Grid.ColumnDefinitions>

                                <TextBlock Text="{Binding Id}" Grid.Column="0" FontSize="24" />
                                <TextBlock Text="{Binding Name}" Grid.Column="1" FontSize="24" />
                                <TextBlock Text="{Binding Surname}" Grid.Column="2" FontSize="24" />
                                <TextBlock Text="{Binding Age}" Grid.Column="3" FontSize="24" />
                                <TextBlock Text="{Binding Status}" Grid.Column="4" FontSize="24" />
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
        </Grid>
    </controls:PanoramaItem> 
```

或者

```
<controls:PanoramaItem Header="Aylık" Foreground="White">
        <Grid x:Name="monthlyPanaromaGrid" >
            <Grid.Resources>
                <Style TargetType="ListBoxItem" x:Key="ListItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                </Style>
            </Grid.Resources>
                <ListBox x:Name="monthlyItemListBox" HorizontalAlignment="Stretch"  ScrollViewer.VerticalScrollBarVisibility="Auto" >
                    <ListBox.ItemTemplate >
                        <DataTemplate>
                            <Grid HorizontalAlignment="Stretch">
                              <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                              <ColumnDefinition Width="Auto" />
                              <ColumnDefinition Width="Auto" />
                              <ColumnDefinition Width="Auto" />
                              <ColumnDefinition Width="Auto" />
                              </Grid.ColumnDefinitions>

                                <TextBlock Text="{Binding Id}" Grid.Column="0" FontSize="24" />
                                <TextBlock Text="{Binding Name}" Margin="48,0,0,0" Grid.Column="1" FontSize="24" />
                                <TextBlock Text="{Binding Surname}" Margin="48,0,0,0" Grid.Column="2" FontSize="24" />
                                <TextBlock Text="{Binding Age}" Margin="48,0,0,0" Grid.Column="3" FontSize="24" />
                                <TextBlock Text="{Binding Status}" Margin="48,0,0,0" Grid.Column="4" FontSize="24" />
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
        </Grid>
    </controls:PanoramaItem> 
```

# javascript - javascript vs jQuery：突出显示某些文本，同时改变其他文本的可见性

> ID：11463102
> 
> 赞同：0
> 
> 时间：2012-07-13T01:54:00.077
> 
> 标签：javascript, jquery

这个来自 RoToRa 的 javascript 代码可以满足我的需求：http://jsbin.com/ayoqem/7/edit#javascript,html,live [什么](http://jsbin.com/ayoqem/7/edit#javascript,html,live) jQuery 代码可以完成同样的任务？哪个更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:34:29.267

当然，如果您不需要使用 jQuery，那么您已经拥有的 javascript 就可以了。但是，如果您使用 jQuery，那么您只需 3 行代码即可完成相同的任务。

[http://jsfiddle.net/RWzQT/1/](http://jsfiddle.net/RWzQT/1/)

```
$(document).ready(function() {
    $(".qa input[type=checkbox]").click(function() {
        $(this).parent().parent('div').toggleClass('show_answer');
    });
});​ 
```

请注意，我还`onclick="hlt_showhide(this)"`从 HTML 中删除了您的内联 javascript ( )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T01:59:56.113

如果您不需要 jQuery，请不要使用它。jQuery 是建立在 JavaScript 之上的。所以如果你已经在纯 JS 中编写了代码，为什么还要在 jQuery 中使用它？

jQuery 等价物在逐行流程方面非常相似，只是它将使用 jQuery`.parent()`来选择父元素并使用`.addClass()`&`.removeClass()`来执行这些操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T02:11:29.327

```
function hlt_showhide(checkbox) {
   $checkbox = $(checked); // just to cache it really!      
   var qaDiv = $checkbox.parent().parent();  
   if ($checkbox.attr('checked'))  {
       qaDiv.addClass("show_answer");
   } else {
      qaDiv.removeClass("show_answer");
   }
} 
```

但坦率地说，我没有看到在这里使用 jQuery 的意义！JS 做到了。

# javascript - javascript - 如何替换全部？

> ID：11463106
> 
> 赞同：1
> 
> 时间：2012-07-13T01:54:56.650
> 
> 标签：javascript, regex, replaceall

你好我这里有问题。我正在尝试`+`使用 javascript 替换字符串中的所有字符实例。发生的情况是只有第一个实例被更改。

这是我的代码：

```
var keyword = "Hello+Word%+";
keyword = keyword.replace("+", encodeURIComponent("+"));
alert(keyword); 
```

输出`Hello%2BWord%+`应该是什么时候，`Hello%2BWord%%2B`因为有 2 个实例`+`。

你可以检查这个：http: [//jsfiddle.net/Wy48Z/](http://jsfiddle.net/Wy48Z/)

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T01:57:54.397

你需要全局标志。

[在http://jsfiddle.net/rtoal/Wy48Z/1/](http://jsfiddle.net/rtoal/Wy48Z/1/)为您修复

```
var keyword = "Hello+Word%+";
keyword = keyword.replace(/\+/g, encodeURIComponent("+"));
alert(keyword);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T01:58:01.277

javascript 正则表达式，这是通过将表达式放在两个正斜杠之间完成的，例如：`/<expression/`

如果要全部替换，只需`g`在最后一个之后附加一个，例如：

`/<expression/g`

在你的情况下，这将是`/\+/g`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T01:58:10.977

跨浏览器的方法是使用带有（全局）标志的正则[表达式](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/)`g`，这意味着“处理模式的所有匹配，而不仅仅是第一个”：

```
keyword = keyword.replace(/\+/g, encodeURIComponent("+")); 
```

请注意，我在加号前加上反斜杠，因为否则它将具有“匹配前面的一个或多个事物”的特殊含义。

# visual-studio - Visual Studio 宏在粘贴时插入文本

> ID：11463107
> 
> 赞同：1
> 
> 时间：2012-07-13T01:55:01.193
> 
> 标签：visual-studio, vba, visual-studio-macros

如果我有：

```
/// <summary>
/// My summary
/// </summary>
/// <param name='args'></param> 
```

在剪贴板上将其粘贴到方法的顶部`static void Main(string[] args)`，它看起来像：

```
class Program
{
    /// <summary>
    /// This is my summary
    /// </summary>
    /// <param name='args'></param>
    static void Main(string[] args)
    { 
    }
} 
```

**注意：我在剪贴板上的文本没有缩进（左侧 4 个空格）。**当我粘贴它时，Visual Studio 能够确定它需要缩进。

**我想用宏做同样的事情。**我不想使用剪贴板，因为我有想要在变量 ( `myText`) 中插入的文本。我有类似的东西：

```
Sub TemporaryMacro()

    Dim myText As String = "/// <summary>" _
    & vbCrLf & "/// My summary" _
    & vbCrLf & "/// </summary>" _
    & vbCrLf & "/// <param name='args'></param>"

    DTE.ActiveDocument.Selection.Text = myText

End Sub 
```

当我运行该宏时，我最终得到：

```
class Program
{

    /// <summary>
    ///  <summary>
    ///  /// My summary
    ///  /// </summary>
    ///  /// <paramref name=" name='args'></param>"/></summary>
    /// </summary>
    /// <param name="args"></param>
    static void Main(string[] args)
    {

    }
} 
```

注意：我确实得到了不同的结果。

* * *

我也试过：

```
Public Module RecordingModule
    Sub TemporaryMacro()

        Dim myText As String = "/// <summary>" _
        & vbCrLf & "/// My summary" _
        & vbCrLf & "/// </summary>" _
        & vbCrLf & "/// <param name='args'></param>"

        DTE.ActiveDocument.Selection.Insert(myText)

    End Sub
End Module 
```

这导致：

```
class Program
{

    /// <summary>
/// My summary
/// </summary>
/// <param name='args'></param>
    static void Main(string[] args)
    {

    }
} 
```

* * *

我知道我可以放在`myText`剪贴板上然后粘贴。但这没有意义。如何实现与粘贴时相同的行为，`myText`而无需将其放置在剪贴板上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:28:07.027

您是否尝试过（只需将制表符/缩进添加到您已经尝试过的代码中）？

```
Public Module RecordingModule
    Sub TemporaryMacro()

        Dim myText As String = "/// <summary>" _
        & vbCrLf & vbTab &  "/// My summary" _
        & vbCrLf & vbTab &  "/// </summary>" _
        & vbCrLf & vbTab &  "/// <param name='args'></param>"

        DTE.ActiveDocument.Selection.Insert(myText)

    End Sub
End Module 
```

`& vbTab &`但是，除非您添加更多s ，否则此缩进不会按原样进行更深的嵌套。

* * *

此外，您是否尝试过将文本相对于特定文本行放置在正文中（`static void Main(string[] args)`在这种情况下），而不是使用当前选择（这意味着您必须在文档中放置一个光标）？

您在自己的回答中指出，并不总是需要这个特定的字符串，而是使用光标的位置。我只是想指出这是一种选择。如果您更改`searchText`下面的代码，您可以将插入的文本放在您想要的任何位置。这也可以更改为在光标处查找文本。

类似于此（未经测试）代码的内容：

```
Dim objTextDoc As TextDocument
Dim objEditPt As EditPoint
Dim objMovePt As EditPoint
Dim docText As String
Dim docNewText As String

Dim myText As String = "/// <summary>" _
    & vbCrLf & vbTab &  "/// My summary" _
    & vbCrLf & vbTab &  "/// </summary>" _
    & vbCrLf & vbTab &  "/// <param name='args'></param>"

Dim searchText As String = "static void Main(string[] args)"

objTextDoc = DTE.ActiveDocument.Object("TextDocument")
objEditPt = objTextDoc.StartPoint.CreateEditPoint
objMovePt = objTextDoc.StartPoint.CreateEditPoint

' Get all text of active document
docText = objEditPt.GetText(objTextDoc.EndPoint)

objEditPt.StartOfDocument()
objMovePt.EndOfDocument()

' Set string as the new intended body of the text, inserting myText just above the Main line
docNewText = docText.Substring(0, InStr(docText, searchText) - 1) & myText & docText.Substring(docText.Length() - InStr(docText, searchText) + searchText.Length())

objEditPt.ReplaceText(objMovePt, docNewText, vsEPReplaceTextOptions.vsEPReplaceTextAutoformat) 
```

我相信`vsEPReplaceTextOptions.vsEPReplaceTextAutoformat`（未确认）也会为您自动缩进您的代码。

（[有关更多信息/想法，请参见此处](https://stackoverflow.com/a/3110451/698590)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:16:29.177

终于找到了解决办法：

```
Dim myText As String = "/// <summary>" _
     & vbCrLf & "/// My summary" _
     & vbCrLf & "/// </summary>" _
     & vbCrLf & "/// <param name='args'></param>"

DTE.ActiveDocument.Selection.Insert(myText)

' how many characters where inserted?
' Trying myText.Length gives incorrect results because visual studio counts \r\n as one character so we 
' use the regex \r\n|. to try to find first \r\n as one match and any other character as another match
Dim insertLength As Integer = System.Text.RegularExpressions.Regex.Matches(myText, "(?>\r\n|.)").Count

' select the text that was just inserted
DTE.ActiveDocument.Selection.CharLeft(True, insertLength)

' here comes the magic!
DTE.ActiveDocument.Selection.SmartFormat() 
```

## 编辑

我正在进行此编辑以询问为什么此答案保留了反对票。如果您参考它询问的问题标题：`Visual studio macro to insert text like when pasting`当您粘贴文本时，它与光标所在的位置有关！我不必搜索`static void Main(string[] args)`我也投票赞成其他答案，因为我感谢您的帮助。如果我早点知道答案，我会把这个问题变成赏金。

最后，其他解决方案无法正常工作...当我在页面顶部有评论并且它不起作用时运行该宏。这很有帮助，这就是我投票的原因！

# php - 附加按钮 onclick 不会触发 Jquery

> ID：11463109
> 
> 赞同：1
> 
> 时间：2012-07-13T01:55:10.663
> 
> 标签：php, javascript, jquery, append, appendto

我有一个在表 td 中附加 2 个文本字段和一个按钮的按钮，但是问题是附加按钮的 onclick 功能不会触发。有人看到问题了吗？代码：

```
<script>
    $(document).ready(function(){
        $("#add").click(function() {
            $(".no_border").append("<br /><label>Co-author email:</label><input type='text' name='author_email'/><label>Co-author Level:</label><input type='text' name='author_level'/><input id='save' type='button'name='save' value='Add'/>");
    });
});
</script>
<?php
    while($row = mysql_fetch_assoc($co_authors)) {
        echo "<tr>
            <td>{$row['author_email']}</td>
            <td>{$row['coauthor_level']}</td>";
            ?><td><button class='remove' id='remove' name='remove' email="<?php echo $row['author_email'] ?>"
            paper="<?php echo $row['paper_id'] ?>">Remove</button></td>
            </tr><?
            ?><td colspan="3" class="no_border"><button class="add" name="add"></button>
            <label id="add" class="cursor_pointer"> Add more co-authors</label></td><?
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T02:03:00.713

您将需要使用 jQuery`.on()`功能来访问在 DOM 加载后创建的元素。

可以在此处的 jQuery 手册中找到更具体的信息：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

```
$( document ).on( "click", "#add", function() {
    alert("aaaaaaaaaaa");
} ); 
```

在 jQuery < 1.7 中，以前是这样使用的：

```
$( "#add" ).live( "click", function( e ) {} ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T01:58:48.793

将代码包装在 jQuery 文档`ready`函数中：

```
$(function() {
   $("#add").click(function() {
      $(".no_border").append("<br /><label>Co-author email:</label><input type='text' name='author_email'/><label>Co-author Level:</label><input type='text' name='author_level'/><input id='save' type='button'name='save' value='Add'/>");
   });
}); 
```

有关更多详细信息，请参阅：[http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

或者，您可以使用[.on](http://api.jquery.com/on/)或[.live](http://api.jquery.com/live/)（`.on`从 1.7 开始是首选方法）。

```
 $(document).on('click', '#add', function() {
      $(".no_border").append("<br /><label>Co-author email:</label><input type='text' name='author_email'/><label>Co-author Level:</label><input type='text' name='author_level'/><input id='save' type='button'name='save' value='Add'/>");
   });

   $("#add").live('click', function() {
      $(".no_border").append("<br /><label>Co-author email:</label><input type='text' name='author_email'/><label>Co-author Level:</label><input type='text' name='author_level'/><input id='save' type='button'name='save' value='Add'/>");
   }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T02:00:44.690

可能您必须使用[.on](http://api.jquery.com/on/)或[.live()](http://api.jquery.com/live/)，它们使脚本识别`$(document).ready()`被调用后创建的元素。

例如：

**在 jQuery 1.7 之前**

```
$("#add").live("click", function() {
    ... 
```

**jQuery 1.7 及更高版本**

```
$("#add").on("click", function() {
    ... 
```

# tomcat - 如何使用 Maven（m2e 插件）自动将 lib 部署到 Tomcat？

> ID：11463117
> 
> 赞同：1
> 
> 时间：2012-07-13T01:56:21.733
> 
> 标签：tomcat, maven, m2e

我正在尝试使用*m2e*从 Eclipse 部署到 Tomcat 。事情是我正在使用连接池，我需要将 MySql 驱动程序部署到 /apache/bin 目录，并将 context.xml 部署到 /apache/conf 目录。

有谁知道如何在 Maven 部署中实现自动化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:15:17.093

在eclipse中，进入**ProjectProperties->DeploymentAssembly** ，这里可以定义文件需要进入war包目录的位置。当你通过 eclipse 部署时，会考虑这个 DeploymentAssembly。因此，通过在这里映射我想你可以实现它..

# javascript - 为什么我的 javascript onclick 没有触发？

> ID：11463119
> 
> 赞同：0
> 
> 时间：2012-07-13T01:56:43.517
> 
> 标签：javascript, onclick

我正在使用一些 Javascript 来创建一个 Safari 扩展。我在调试它时遇到了一些问题，所以我去掉了扩展特定的组件来测试一些东西。简短版本：单击此 javascript ( `moveButton`) 生成的按钮不会执行任何操作。我在 Safari 的控制台中没有收到任何错误，而且我能做的最好的谷歌搜索也没有发现任何有用的东西。

我正在用 Javascript 生成所有按钮代码，因为一旦我将其调整回我的扩展程序，我需要传递一个数组。

有什么想法或建议吗？我完全出去吃午饭了吗？

```
function popoverEvent(event) {
    var tabs = new Array("test1","test2","test3");
    var tabsElement = document.getElementById("tab-list");

    tabsElement.innerHTML = ""; // clear previous contents

    var formElement = document.createElement('form');
    formElement.setAttribute('name', 'tabs-form');

    for (var i = 0; i < tabs.length; i++ ) {
        var labelElement = document.createElement('label');
        labelElement.setAttribute('for', 'tab' + i);

        var divElement = document.createElement('div');

        var inputElement = document.createElement('input');
        inputElement.setAttribute('id', 'tab' + i);
        inputElement.setAttribute('name', 'tabcheckboxes');
        inputElement.setAttribute('value', i);
        inputElement.setAttribute('type', 'checkbox');

        var titleElement = document.createTextNode('testTitle' + i);

        var urlElement = document.createElement('div');
        urlElement.setAttribute('class', 'url');
        urlElement.innerHTML = "testURL" + i;

        divElement.appendChild(inputElement);
        divElement.appendChild(titleElement);
        divElement.appendChild(urlElement);
        labelElement.appendChild(divElement);
        formElement.appendChild(labelElement);
    }

    // Create button
    var moveButton = document.createElement('button');
    moveButton.setAttribute('type', 'button');
    moveButton.onClick=function() {alert('Here is a pop up message');};
    moveButton.innerHTML = "Move to New Window";

    formElement.appendChild(moveButton);

    tabsElement.appendChild(formElement);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T02:02:17.330

`onclick`你不应该使用`onClick`：

改变：

```
moveButton.onClick=function() {alert('Here is a pop up message');}; 
```

到：

```
moveButton.onclick=function() {alert('Here is a pop up message');}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:00:52.953

```
 var moveButton = document.createElement('input');
    moveButton.type = "submit";  //don't need that
    moveButton.setAttribute('type', 'button');
    moveButton.onClick=function() {alert('Here is a pop up message');};
     moveButton.innerHTML = "Move to New Window"; 
```

不是要设置两次类型，而是创建元素“输入”而不是“按钮”

# multithreading - gdb 的详细信息是什么，它有一个线程吗？

> ID：11463123
> 
> 赞同：0
> 
> 时间：2012-07-13T01:57:16.847
> 
> 标签：multithreading, debugging, gdb, pthreads, pthread-join

gdb的细节是什么，它在调试代码时是否拥有一个线程？

我在主线程中设置了一个退出标志，并且在打印标志之前我已经加入了其他线程。当我在使用参数“-g”编译后使用 gdb 运行调试版本时，它看起来：

```
[Thread debugging using libthread_db enabled]
Input number of threads:5

Main thread id: 0xb7fda6c0, 
[New Thread 0xb7fd9b70 (LWP 9276)]
[New Thread 0xb75d8b70 (LWP 9277)]
[New Thread 0xb6bd7b70 (LWP 9278)]
[New Thread 0xb61d6b70 (LWP 9279)]
[New Thread 0xb57d5b70 (LWP 9280)]
I am thread 0xb6bd7b70, myorder 2, thread_exit.
I am thread 0xb61d6b70, myorder 3, thread_exit.
I am thread 0xb7fd9b70, myorder 0, thread_exit.
I am thread 0xb57d5b70, myorder 4, thread_exit.
I am thread 0xb75d8b70, myorder 1, thread_exit.
[Thread 0xb61d6b70 (LWP 9279) exited]
[Thread 0xb6bd7b70 (LWP 9278) exited]
[Thread 0xb75d8b70 (LWP 9277) exited]
[Thread 0xb7fd9b70 (LWP 9276) exited]
Main: completed join with thread 0xb7fd9b70 having a status of 0
Main: completed join with thread 0xb75d8b70 having a status of 1
Main: completed join with thread 0xb6bd7b70 having a status of 2
Main: completed join with thread 0xb61d6b70 having a status of 3
Main: completed join with thread 0xb57d5b70 having a status of 4
Main: lock will be destroy
Main: 9273, tlist will be free 
Main exit.
[Thread 0xb57d5b70 (LWP 9280) exited]

Program exited normally.
Missing separate debuginfos, use: debuginfo-install glibc-2.12-1.7.el6.i686 libgcc-4.4.4-13.el6.i686 
```

GDB 提供有关线程“创建”和“退出”的信息。`pthread_join()`但是在主线程中调用并打印“Main exit”后总是有一个线程退出。为什么？是 gdb 使用的线程吗？

运行发布版，没什么特别的：

```
Input number of threads:5

Main thread id: 0xb77176c0, 
I am thread 0xb5913b70, myorder 3, thread_exit.
I am thread 0xb4f12b70, myorder 4, thread_exit.
I am thread 0xb6314b70, myorder 2, thread_exit.
I am thread 0xb6d15b70, myorder 1, thread_exit.
I am thread 0xb7716b70, myorder 0, thread_exit.
Main: completed join with thread 0xb7716b70 having a status of 0
Main: completed join with thread 0xb6d15b70 having a status of 1
Main: completed join with thread 0xb6314b70 having a status of 2
Main: completed join with thread 0xb5913b70 having a status of 3
Main: completed join with thread 0xb4f12b70 having a status of 4
Main: lock will be destroy
Main: tdata list will be free 
Main exit. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:45:13.337

> gdb，调试代码时它是否拥有一个线程？

不。

> 在调用 pthread_join() 并在主线程中打印“主退出”后，总是有一个线程退出。为什么？

glibc 发送到 GDB 以告知它线程已退出的通知作为（几乎）线程执行的最后一件事发送。特别是，在退出线程通知主线程它已经退出之后（即在退出线程唤醒主线程*之后）发送该通知。*`Main exit`因此，在 GDB 注意到退出线程实际上已经退出之前，主线程被唤醒并打印也就不足为奇了。

> 我已经运行了很多次，每次“主退出”之后只有一个线程。

那证明*不了*。如果您运行程序 1,000,000 次，*可能*至少有一次运行 GDB 会注意到`Main exit`打印之前退出的线程。排序可能取决于您的系统有多少处理器，以及它们有多忙。这里真的没有什么（有趣的）可看的。

# html - 来自xslt的html css表

> ID：11463124
> 
> 赞同：0
> 
> 时间：2012-07-13T01:57:35.493
> 
> 标签：html, css

我使用 xslt-for-each 循环从 xslt 转换生成表

它创建的表有 2 列，我需要前 2 列为 100% 宽度。execption 是针对某些行，我需要创建一个 colspan=2 的行，这些行必须能够增长超过 100%

这可行，但滚动条不显示，或显示溢出：滚动但随后被禁用：

```
<table style="width:100%;table-layout:fixed;border-collapse:collapse;">
    <tr>
        <td style="width:50%;border:1px solid black;">Text</td>
        <td style="width:50%;border:1px solid black;">More text</td>
    </tr>
    <tr>
        <td colspan="2"><div style="overflow:visible;float:left">eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeereeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeEndofText.</div></td>
    </tr>
</table> 
```

或者是否有可能在 xsl for-each 中执行 Start table element xsl-if test="something" write end table element 然后创建 colspan="2" 行作为它自己的表，然后将 begin table 元素写入继续正常行 xsl 对不匹配的元素抛出错误。

# excel - 可变长度 VBA 的平均行数

> ID：11463127
> 
> 赞同：1
> 
> 时间：2012-07-13T01:58:07.593
> 
> 标签：excel, sum, row, average, vba

我正在尝试获取一个简单的 VBA 代码作为宏的一部分，该宏将在 B 列中放入每行值的平均值。我有生成时间序列并在每次模拟中填充一列的代码，这样每一列都是从 C 列开始的时间序列。模拟的数量各不相同，所以我只需要平均每个时间点的值（即每个所有模拟的行），同时调整运行的模拟数量（填充的列）。然后，我希望它生成所有时间序列的单个图表，突出显示计算的平均值。非常感谢您能提供帮助！

例如，这里的代码从 sheet1 获取时间步长的值并将其放置在 columnA sheet2 中。我希望宏现在将平均值放在 B 列下方的适当行中： ![当前输出截图](../Images/7e00a37a49f443d884655e2aa56b2fcf.png)

```
Sheets("Sheet1").Select
Range("E5").Select
Range(Selection, Selection.End(xlDown)).Select
Selection.Copy
Sheets("Sheet2").Select
Cells(1, 1).Select
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:30:12.407

试试这个，尽管这段代码会有很多不同的变体：

```
Sub AddAvgFormula()

With Sheets("Sheet2")
        .Range("B2").FormulaR1C1 = "=AVERAGE(RC[1]:RC[3])"
        .Range("B2").Copy
        .Range("B2:B" & .Cells(Excel.Rows.Count, 1).End(Excel.xlUp).Row).PasteSpecial Excel.xlPasteFormulas
End With

End Sub 
```

在当前代码的末尾`End Sub`添加以下内容：

```
Call AddAvgFormula 
```

这是原始代码的变体：

```
Sub AddAvgFormula()

With Sheets("Sheet2")
        .Range("B2") = "=AVERAGE(C2:E2)"
        .Range("B2").Copy
        .Range("B2:B" & .Cells(Excel.Rows.Count, 1).End(Excel.xlUp).Row).PasteSpecial Excel.xlPasteFormulas
End With

End Sub 
```

另一个更短但可能不那么直观的变体：

```
Sub AddAvgFormula()

With Sheets("Sheet2")
        .Range("B2:B" & .Cells(Excel.Rows.Count, 1).End(Excel.xlUp).Row) = "=AVERAGE(C2:E2)"
End With

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:39:07.897

尝试这个

```
Sub Sample()
    Dim ws As Worksheet
    Dim lRow As Long

    Set ws = Sheets("Sheet1")

    With ws
        lRow = .Range("A" & .Rows.Count).End(xlUp).Row

        .Range("B2:B" & lRow).Formula = _
        "=IF(ISERROR(AVERAGE(C2:E2)),"""",AVERAGE(C2:E2))"
    End With
End Sub 
```

**跟进**

尝试这个

```
Sub Sample()
    Dim ws As Worksheet
    Dim lRow As Long, lCol As Long
    Dim ColNm As String

    Set ws = Sheets("Sheet1")

    With ws
        lRow = .Range("A" & .Rows.Count).End(xlUp).Row
        lCol = .Cells(2, .Columns.Count).End(xlToLeft).Column
        ColNm = Split(.Cells(, lCol).Address, "$")(1)

        .Range("B2:B" & lRow).Formula = "=IF(ISERROR(AVERAGE(C2:" _
                                        & ColNm & _
                                        "2)),"""",AVERAGE(C2:" & _
                                        ColNm & "2))"
    End With
End Sub 
```

# android - VuDroid pdf 查看器找不到要渲染的位图或它不渲染

> ID：11463130
> 
> 赞同：1
> 
> 时间：2012-07-13T01:58:27.687
> 
> 标签：android, bitmap, bytearray, pdf-viewer, vudroid

我正在尝试使用[VuDroid](http://code.google.com/p/vudroid/source/browse/#svn/trunk) PDF 查看器，我需要获取渲染的位图并将其存储为字节 []。然后我需要将它转换回位图，可以使用“canvas.drawBitmap(bitmap, 0, 0, paint);”之类的东西在视图上显示。

我花了很多时间试图访问位图，我可能已经完成了，但即使我让 byte[] 返回一些东西，它仍然不会在画布上呈现为位图。

有人可以在这里帮助我吗，我一定错过了一些东西。太感谢了。

我相信它应该通过...访问

PDFPage.java .... public Bitmap renderBitmap(int width, int height, RectF pageSliceBounds)

-或者-

通过 Page.java - 或 - DocumentView.java - 或 - DecodeService.java

就像我说的那样，我已经尝试了所有这些并得到了结果，我只是看不到哪里出错了，因为我无法渲染它以查看是否正确调用了位图。

再次感谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:50:36.673

文档说该方法返回“如果图像无法解码，则返回 null”。你可以试试：

```
byte[] image = services.getImageBuffer(1024, 600);
InputStream is = new ByteArrayInputStream(image);
Bitmap bmp = BitmapFactory.decodeStream(is); 
```

我认为这会帮助你： -

[在 Android 中将 byte[] 渲染为位图](https://stackoverflow.com/questions/4683694/render-a-byte-as-bitmap-in-android)

[Bitmap.Save(Stream, ImageFormat) 如何格式化数据？](https://stackoverflow.com/questions/2591705/how-does-bitmap-savestream-imageformat-format-the-data)

[将带有 alpha 通道的图像复制到带有自定义背景颜色的剪贴板？](https://stackoverflow.com/questions/10785909/copy-image-with-alpha-channel-to-clipboard-with-custom-background-color)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-16T21:45:09.803

如果你想将每个 pdf 页面作为独立的位图，你应该考虑 **VuDroid**渲染页面， **PDFView**只显示它们。您应该使用 VuDroid 功能。

现在您可以使用此示例并创建自己的代码

**示例代码：用于从特定 PDF 页面制作位图**

```
 view = (ImageView)findViewById(R.id.imageView1);
    pdf_conext = new PdfContext();
    PdfDocument d = pdf_conext.openDocument(Environment.getExternalStorageDirectory()  + "your PDF path");

    PdfPage vuPage = d.getPage(1); // choose your page number
    RectF rf = new RectF();
    rf.bottom = rf.right = (float)1.0;
    Bitmap bitmap = vuPage.renderBitmap(60, 60, rf); //define width and height of bitmap

    view.setImageBitmap(bitmap); 
```

**用于在 SDCARD 上写入此位图**：

```
try {   
    File mediaImage = new File(Environment.getExternalStorageDirectory().toString() + "your path for save thumbnail images ");
    FileOutputStream out = new FileOutputStream(mediaImage);
    bitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);
    out.flush();
    out.close();
} catch (Exception e) {
    e.printStackTrace();
} 
```

**检索保存的图像**：

```
 File file = new File(Environment.getExternalStorageDirectory().toString()+ "your path for save thumbnail images ");

        String path = file.getAbsolutePath(); 
        if (path != null){
            view = Bitmap.createScaledBitmap(BitmapFactory.decodeFile(path), YOUR_X, YOUR_Y, false);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T07:19:52.990

```
Try this code to check whether bitmap is properly generating or not

PdfContext pdf_conext = new PdfContext();
PdfDocument d = (PdfDocument) pdf_conext.openDocument(pdfPath);  

PdfPage vuPage = (PdfPage) d.getPage(0);  
RectF rf = new RectF();  

Bitmap bitmap = vuPage.renderBitmap(1000,600, rf);  

File dir1 = new File (root.getAbsolutePath() + "/IMAGES");
dir1.mkdirs();
String fname = "Image-"+ 2 +".jpg";
File file = new File (dir1, fname);
if (file.exists ()) 
file.delete (); 
try {
     FileOutputStream out = new FileOutputStream(file);
     bitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);
     out.flush();
     out.close();

   } catch (Exception e) {

 e.printStackTrace();

} 
```

# javascript - javascript中文件上传取消的事件

> ID：11463133
> 
> 赞同：8
> 
> 时间：2012-07-13T01:58:58.717
> 
> 标签：javascript, file-upload

如果我们要使用 javascript 为文件读取设置事件回调，我们可以使用`file.onchange`，但是当用户取消上传（关闭浏览面板）时如何设置事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:13:36.427

文件输入模式没有 API。此外，如果用户关闭浏览器，您的代码将不再运行，对吗？

当然有[window.onunload](https://developer.mozilla.org/en/DOM/window.onunload)方法可以让你检测你给出的例子。

根据评论，我能想到的最好的帮助是，如果没有选择任何内容，`file.value.length`将是`0`.

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-12-22T20:48:27.833

使用 jQuery 非常简单：

```
$("#fileInputId").change(function () {
    //implement your code here
}); 
```

# mysql - 一列中的最大值和另一列中的最小值

> ID：11463134
> 
> 赞同：0
> 
> 时间：2012-07-13T01:59:03.070
> 
> 标签：mysql, sql, aggregate-functions

例如，如果 A 列和 B 列具有值：

```
+---+---+
| A | B |
+---+---+
| 2 | 1 |
| 5 | 1 | 
| 6 | 1 |
| 1 | 2 |
| 5 | 2 |
| 0 | 2 |
| 2 | 3 |
| 7 | 3 |
| 4 | 3 |
| 5 | 4 |
+---+---+ 
```

从每组 B 中，我想从 A 中获得最大的数字。但是，我不想包含 B 中的数字较高但 A 值小于前一个值的结果。我知道这在语言上没有意义，但这就是我希望最终结果的样子：

```
+---+---+
| A | B |
+---+---+
| 6 | 1 |
| 7 | 3 |
+---+---+ 
```

到目前为止，我有类似“select max(a), b from table1 group by b”之类的东西，但这并没有忽略 B 较高但最大 A 较小的那些。我知道我可以在 PHP 中仔细阅读该查询的结果并删除 A 值小于前一个 A 值的结果，但如果可能的话，我想将其全部放入 mysql 查询中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T02:32:31.143

这种技术将表与自身的聚合版本连接起来，但连接**偏移了 1**，因此每一行都连接到前一个 B 的 MAX(A) 值的知识。然后它匹配当前 A 大于其中任何一个的行，如果找不到，则不包括该行。然后，我们汇总最终选择以获得您想要的结果。

```
SELECT 
       MAX(source_row.A) as A, 
       source_row.B
  FROM ab as source_row
  LEFT JOIN (SELECT MAX(A) as A, B FROM ab GROUP BY B) AS one_back 
    ON one_back.B = source_row.B-1 
 WHERE (one_back.A IS NULL) 
    OR one_back.A < source_row.A
 GROUP BY B 
```

我已经对此进行了测试:-)

# 编辑：额外的见解

我想分享一些关于我是如何提出这些解决方案的见解；因为我认为人们开始“在集合中思考”很重要……这是我读过的关于 JOINS 的最佳建议，您需要设想查询正在使用的中间“集合”。为了说明这一点，这里是中间“集合”的表示，它是这个查询的关键部分；它是表，因为它存在“连接”到自身的聚合版本。

```
+------+------+------------+------------+
| A    | B    | one_back.B | one_back.A |
+------+------+------------+------------+
|    2 |    1 |       NULL |       NULL |
|    5 |    1 |       NULL |       NULL |
|    6 |    1 |       NULL |       NULL |
|    1 |    2 |          1 |          6 |
|    5 |    2 |          1 |          6 |
|    0 |    2 |          1 |          6 |
|    2 |    3 |          2 |          5 |
|    7 |    3 |          2 |          5 |
|    4 |    3 |          2 |          5 |
|    5 |    4 |          3 |          7 |
+------+------+------------+------------+ 
```

然后*实际上*是在内存中创建的集合（完全连接的版本永远不会完全在内存中，因为 MySQL 可以在知道它们不会“切入”时立即消除行：

```
+------+------+------------+------------+
| A    | B    | one_back.B | one_back.A |
+------+------+------------+------------+
|    2 |    1 |       NULL |       NULL |
|    5 |    1 |       NULL |       NULL |
|    6 |    1 |       NULL |       NULL |
|    7 |    3 |          2 |          5 |
+------+------+------------+------------+ 
```

然后，当然，它将结果从那里聚合到最终形式中，只从原始行中选择 A 和 B。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T02:48:40.550

一个更简单的解决方案是使用一个变量来存储`a`前一行的值，并在每次迭代时进行比较。这也说明了列中可能存在空白的情况`b`，其中数字不完全按照完美的顺序排列：

```
SELECT @val:=a.a AS a, a.b
FROM
(
  SELECT MAX(a) AS a, b
  FROM tbl
  GROUP BY b
) a
WHERE a.a > IFNULL(@val,-1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T02:33:40.150

```
Select Z.a, Z.b from
(select a, b, rank() over (order by b) as ranker from (select max(a) a, b  from table1 group by b) Y) Z left join
(select a, b, rank() over (order by b) as ranker from (select max(a) a, b  from table1 group by b) Y1) Z1
on Z.ranker = Z1.ranker + 1
where Z.a > isnull(Z1.a, -100000) 
```

# asp.net - 使用带有 C# 的 DirectoryEntry 启动/停止 IIS 应用程序池需要哪些访问权限？

> ID：11463135
> 
> 赞同：3
> 
> 时间：2012-07-13T01:59:21.550
> 
> 标签：asp.net, c#-4.0, iis-7, application-pool

鉴于以下方法，我正在尝试启动/停止 IIS 7 应用程序池。我可以在本地系统上成功完成此操作，但是当我将其放在我们的 Windows 2008 服务器上时，仅在尝试停止服务时才会出现错误 - 启动工作正常：

```
[NoCache]
public ActionResult EnableAppPool(Models.ActionRequest actionRequest)
{
    try
    {
        if (ModelState.IsValid && actionRequest.ActionRequestPassword == ConfigurationManager.AppSettings["NewsfeedAdminPassword"])
        {
            bool enableNewsfeed = false;
            enableNewsfeed = Convert.ToBoolean(actionRequest.EnableNewsfeedAppPool);

            string sPath = "IIS://" + ConfigurationManager.AppSettings["MachineName"] + "/W3SVC/AppPools/" + ConfigurationManager.AppSettings["AppPoolName"];
            Console.WriteLine(sPath);
            DirectoryEntry w3svc = new DirectoryEntry(sPath);
            if (enableNewsfeed)
            {
                w3svc.Invoke("Start");
            }
            else
            {
                w3svc.Invoke("Stop");
            }
        }
    }
    catch (Exception ex)
    {
        throw ex;
    }

    return null;
} 
```

错误如下：

> 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)） 说明：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.UnauthorizedAccessException：访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）
> 
> ASP.NET 无权访问请求的资源。考虑向 ASP.NET 请求标识授予对资源的访问权限。ASP.NET 有一个基本进程标识（通常是 IIS 5 上的 {MACHINE}\ASPNET 或 IIS 6 和 IIS 7 上的网络服务，以及 IIS 7.5 上配置的应用程序池标识），如果应用程序不是模拟的，则使用该标识。如果应用程序通过 模拟，则身份将是匿名用户（通常是 IUSR_MACHINENAME）或经过身份验证的请求用户。

我意识到这是一个权限问题，但我不确定我必须授予访问权限以及授予什么用户权限。

仅供参考：我已经启用了 IIS 6 元数据库和 WMI 兼容性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:08:40.363

您运行代码的身份无权启动和停止应用程序池。这是一篇文章的引述

*“为了与 Active Directory 通信，必须考虑网络安全、业务规则和技术限制。如果您使用 ASP.NET 页面中的 Active Directory 代码，则必须确保代码具有适当级别的权限以访问目录并与之交互。出于开发目的或概念验证，您可以在 ASP.NET 级别（在 web.config 中）和 IIS 级别启用模拟，如果 IIS 服务器和目录域控制器位于同一台机器上，则此但是，如果这些实体不在同一台服务器上（因为它们从未在生产中），您可以将代码包装在模拟类周围（例如 Zeta Impersonator，它将在令牌下执行目录调用冒充用户。”*

[http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C#3](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C#3)

这篇文章清楚地解释了如何在差异（可能是更高级别的访问用户）上下文下在您的应用程序中运行一些代码。

[http://support.microsoft.com/kb/306158](http://support.microsoft.com/kb/306158)

# javascript - Javascript中类的所有实例的通用回调

> ID：11463136
> 
> 赞同：1
> 
> 时间：2012-07-13T01:59:23.600
> 
> 标签：javascript, jquery

我有一个生成 JQuery mousedown 回调的自定义 Javascript 类。mousedown 回调在 $(document) 上，实际上应该只为第一个新实例设置，而不是为任何后续实例设置。我有以下内容：

```
function myclass(arg){
   this.arg = arg;
   $(document).mousedown(function(down_event){
       // start action
   }).mouseup(function(){
      // stop action
      })
} 
```

我希望这些回调仅在创建多个`myclass`实例的情况下注册一次，如果没有创建则根本不注册。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T02:14:59.580

您应该使用一个变量来标记事件是否已经注册，并且仅在它们尚未注册时才注册它们。

一个例子：

```
var registered = false; // the 'flag' variable, default to false (i.e. not yet registered)

function myclass(arg){
   this.arg = arg;

   if (!registered) { // check the 'flag' variable if events have been registered yet
      registered = true; // set the 'flag' variable as events will be registered this time

      $(document).mousedown(function(down_event){
         // start action
      }).mouseup(function(){
         // stop action
      })
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T02:22:21.110

这里有几个可能的选择。

选项 1：全局变量

```
function myclass(arg){
   this.arg = arg;

   if (!window._myClassCreatedAlready) {
      $(document).mousedown(function(down_event){
          // start action
      }).mouseup(function(){
         // stop action
      })
   }
   window._myClassCreatedAlready = true;
} 
```

选项 2：jQuery 数据

```
function myclass(arg){
   this.arg = arg;

   if (!$.data(document, "mousedownset")) {
      $(document).mousedown(function(down_event){
          // start action
      }).mouseup(function(){
         // stop action
      })
   }
   $.data(document, "mousedownset", true);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T02:34:46.637

有一个 jQuery 函数。用于[`.one()`](http://api.jquery.com/one/)将处理程序绑定到元素上引发的事件的第一个实例（在本例中`document`）。

```
function myclass(arg){
    this.arg = arg;
    $(document)
        .one('mousedown.yourEvent', downHandler)
        .one('mouseup.yourEvent', upHandler);
}

function downHandler(e) {
    // start action
}

function upHandler(e) {
    // stop action

    //ensure event dead forever
    $(document).on('.yourEvent', function() { return false; });
} 
```

更新。更改（使用命名处理程序而不是匿名函数，将事件放在特定的命名空间中）是为了确保 myclass 的新实例在第一个完成解除绑定之后创建它们时不会重新绑定到事件。

# css - CSS 适用于 Firefox 但不适用于 IE9

> ID：11463141
> 
> 赞同：0
> 
> 时间：2012-07-13T02:00:20.997
> 
> 标签：css, internet-explorer, firefox

我遇到了一个带有 href 的浮动 div 的问题。该链接在 FF 中有效，但在 IE9 中无效。我希望这很简单，但我只能摸不着头脑。为某人轻松加分！

无论如何，这是页面： http: [//www.insurancedepotdentalonline.com/](http://www.insurancedepotdentalonline.com/)

您会在页面底部看到“适用于健康保险、人寿保险或医疗保险”，然后是一个带有 Click 的大红色圆圈。我有一个 div 位于那个红色圆圈上，并且在 div 周围有一个链接。它适用于 Firefox 和 Chrome，但不适用于 IE。不知道为什么不。

对于它的价值，当我向 div 添加背景以查看它有多大时，该链接在 IE 中工作正常。但是当我删除它时，链接消失了。好像宽度有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:55:42.620

不确定这是否是问题..但是将块元素（div）放在内联元素（a）中是无效的 html 并且可能会在 IE 中窒息？

有关更多详细信息，请参见[此处](https://stackoverflow.com/questions/1827965/is-putting-a-div-inside-an-anchor-ever-correct)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:19:12.517

有趣...通过 IE 的开发人员工具检查结构（只需按 F12），链接内的 div 似乎在正确的位置，但链接只有在您单击其右侧时才有效...

- 编辑 -

您的“For-health-click-here” div 正在叠加链接。您可以将其声明移动到链接之前的位置（您也必须重新调整链接位置）或弄乱它的 z-index。

# javascript - 获取 div 的 firstChild

> ID：11463142
> 
> 赞同：0
> 
> 时间：2012-07-13T02:00:30.450
> 
> 标签：javascript

我正在尝试获取 span 元素的文本。我尝试了两种方法`querySelectorAll`，`getElementByClassName`但都给了我错误“未捕获的类型错误：对象＃没有方法'getElementsByTagName'”我该如何获取跨度元素的文本？

**javascript**

```
var interstitial; 

// 1st attempt
interstitial = document.querySelectorAll('div.top_bg').getElementsByTagName("span");
// 2nd attempt
interstitial = document.getElementByClassName('top_bg')[0].getElementsByTagName("span");

if (interstitial) {
  console.log(interstitial[0].firstChild.innerHTML);
} 
```

**html**

```
<div class="top_bg">
  <span style="font-size:14px;line-height:30px">The text I am trying to get.</span>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T02:04:25.237

在查询中包含跨度

```
interstitial = document.querySelectorAll('div.top_bg span'); 
```

`document.querySelectorAll('div.top_bg')`返回一个集合，因此您必须选择一个节点然后应用`getElementsByTagName`

它也`getElementsByClassName`没有`getElementByClassName`注意到`Elements`

[http://jsfiddle.net/dRvDt/1/](http://jsfiddle.net/dRvDt/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:26:42.820

您收到错误是因为返回的对象[`querySelectorAll`](http://www.w3.org/TR/selectors-api/#queryselectorall)是[NodeList](http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#ID-536297177)，并且 NodeLists 没有`getElementsByTagName`方法。您应该执行以下操作：

```
 var node, nodeList, spans

  if (document.querySelectorAll) {
    nodeList = document.querySelectorAll('div.top_bg');
    node = nodeList[0];

    if (node) {
      spans = node.getElementsByTagName('span');
    }
  } 
```

`spans`现在是第一个 NodeList 的第一个元素中包含的 span 的 NodeList，如果有的话。第一个将在`spans[0]`，依此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T02:45:49.420

如果您可以使用 jquery，您可以轻松查找 span html： $("div.top_bg>span").firstChild().html();

# iphone - 如何在ios4中获取警报视图wieh textinput

> ID：11463148
> 
> 赞同：0
> 
> 时间：2012-07-13T02:01:25.650
> 
> 标签：iphone, ios, ipad

我发现在 ios 4 中，我不能使用：

```
alert.alertViewStyle = UIAlertViewStylePlainTextInput; 
```

那么，如何在ios4中实现和上面代码一样的效果呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:30:40.133

```
UITextField * textField = [[UITextField alloc] init];
textField.frame = CGRectMake(0, 0, 0, 0); //Your properties here

[alert addSubview:textField]; 
```

我建议全局定义文本字段，以便您可以从整个类中访问它，并且可以检索文本输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:16:12.370

您必须将一个对象设置为警报视图的委托并覆盖其在[willPresentAlertView 中的外观：](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html#//apple_ref/occ/intfm/UIAlertViewDelegate/willPresentAlertView%3a)就像您执行任何其他 UIView（添加子视图）的方式一样。

# ios - iOS 上视图的宏伟背景

> ID：11463150
> 
> 赞同：0
> 
> 时间：2012-07-13T02:01:31.913
> 
> 标签：ios, quartz-graphics

我对iOS开发很陌生，我正在尝试将我的视图背景设置为渐变。我创建了一个 CAGradientLayer 并尝试设置它。它通过构建，但我的应用程序一打开就崩溃，抛出“EXC_BAD_ACCESS”。这是我的代码：

```
- (void)viewWillAppear:(BOOL)animated
 {

 [super viewWillAppear:animated];

CAGradientLayer     *bgLayer = [CAGradientLayer layer];
UIColor             *grey = [UIColor colorWithRed:(255/255.0) green:(255/255.0) blue:(255/255.0) alpha:1.0];
UIColor             *black = [UIColor colorWithRed:(180/255.0) green:(180/255.0) blue:(180/255.0) alpha:1.0];
NSNumber            *top = [NSNumber numberWithFloat:0.0];
NSNumber            *bot = [NSNumber numberWithFloat:1.0];

bgLayer.colors = [NSArray arrayWithObjects:grey, black, nil];
bgLayer.locations = [NSArray arrayWithObjects:top, bot, nil];
bgLayer.frame = self.view.bounds;
[self.view.layer addSublayer:bgLayer];
} 
```

我想我明白它来自糟糕的内存管理，但不要我做错了什么。提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:07:35.583

请注意文档对颜色的评价：

> 定义每个渐变色标的颜色的**CGColorRef**对象数组。

# iphone - 推送通知是否需要服务器？

> ID：11463155
> 
> 赞同：0
> 
> 时间：2012-07-13T02:02:44.287
> 
> 标签：iphone, ios, xcode

刚开始，我想说我已经阅读了本教程：[http ://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

阅读后，有几个关于推送通知的问题......我的主要问题是，是否需要服务器。

我已经为我的业务制作了一个包含信息内容的应用程序......但是每周/每月或每当我选择时，我希望能够向所有下载了我的应用程序的用户推送消息（每台设备都会收到相同的信息）。

最好，我想要创建和发送通知的方式......是通过一个单独的应用程序，我，开发人员只有。

现在回到我的问题，我需要一台服务器来执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:24:10.083

有很多免费的推送通知服务器 - 例如[QuickBlox](http://quickblox.com) 您不需要任何服务器代码，QuickBlox 已经为您编写了所有内容。

只需查看[Push Notifications iOS 示例](http://quickblox.com/developers/SimpleSample-messages_users-ios)- 此示例使您能够随时通过 API 或易于使用的管理面板向用户发送通知和警报。只需下载它，将其中的一些代码移至您的应用程序 - 并享受它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:16:46.130

不，您不需要服务器，您可以简单地创建连接到苹果推送通知服务器的自己的应用程序，但您必须确保使用 ssl 连接所需的开发/发布证书，您可以在阅读的教程中看到“制作 PEM 文件”部分。他直接从他的mac连接到服务器，没有证书就失败了，但没有证书。

看这里：

> 正如我之前多次提到的，您需要设置一个将推送通知发送到您的应用程序的服务器。对于第一个测试，我们暂时不准备设置服务器。相反，我将为您提供一个非常简单的 PHP 脚本，该脚本设置与 APNS 的连接并向您指定的设备令牌发送推送通知。你可以直接从你的 Mac 上运行它。

你可以让你的程序建立这样的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T03:34:21.077

我们使用一个名为 Parse 的框架，让我们向所有用户发送广播推送。您不需要维护服务器（他们为您完成）。每月有 500 万次查询是免费的。

# c++ - 如何使用 xlslib 在 excel 中设置 col 宽度

> ID：11463157
> 
> 赞同：0
> 
> 时间：2012-07-13T02:02:52.220
> 
> 标签：c++, excel, mfc

我有一个 MFC C++（非托管）程序，我需要生成一个 xls。

我正在使用 xlslib(http://xlslib.sourceforge.net/) 2.3.4 版来生成 xls，但我无法调整 excel 列的大小。

“工作表”类具有方法“colwidth”：

```
void colwidth(unsigned32_t col, unsigned16_t width, xf_t* pxformat = NULL);         // sets column widths to 1/256 x width of "0" 
```

我调用了这个方法传递参数（0, 5），（0,20），（0,1000）和（1,5），没有人工作：/。

我只需要该列适合显示所有文本所需的大小。

任何帮助都会非常有用，我迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T02:51:50.463

试试下面的代码：

```
workbook WorkBook;
worksheet* WorkSheet = WorkBook.sheet(_T("Sheet1"));

WorkSheet->defaultColwidth(8);
WorkSheet->colwidth(0, 256*10);;
WorkSheet->colwidth(1, 256*16);

WorkSheet->rowheight(0, 256*1.0586);
WorkSheet->rowheight(1, 256*2); 
```

我也遇到过这个问题，试了很多次，发现调用colwidth之前必须先调用defaultColwidth，方法defaultColwidth的参数必须是8。代码在我的电脑上已经可以正常运行了。我是中国人，英语不是母语，希望你能看懂。

# python - Python从各种函数返回变量

> ID：11463171
> 
> 赞同：2
> 
> 时间：2012-07-13T02:04:57.203
> 
> 标签：python, function, variables, return

```
from __future__ import division
import math

def main():
    the_discriminant = discrim(1,0,-4)
    print the_discriminant
    the_rest(discrim,b,a)

def discrim(a,b,c):
    discriminant = math.sqrt(math.pow(b,2)-4*a*c)
    return discriminant, b,a

def the_rest(discrim,b,a):
    x = ((-b + discriminant) / 2*a)
    y = ((-b - discriminant) / 2*a)
    print x,y

if __name__ == '__main__':
    main() 
```

我对 Python 相当陌生，我正在编写函数和返回变量，我对如何更正代码有点困惑。我正在编写一个二次求解器程序，但我需要在“其余”函数中使用判别式和 a、b、c 值。（它完成了方程式的其余部分。）我对如何返回值并在另一个函数中使用它们感到有点困惑。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T02:07:07.450

```
the_rest(*the_discriminant) 
```

或（我更喜欢这种方法）：

```
d, b, a = discrim(1, 0, -4)
the_rest(d, b, a) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T02:18:34.650

我相信这就是你想要做的。您的`discrim`函数返回一个元组（类似于数组）。然后当你调用时`the_rest`使用 a`*`表示你想发送元组的元素，而不是元组本身作为一个参数

```
from __future__ import division
import math

def main():
    the_discriminant = discrim(1,0,-4)
    print the_discriminant
    the_rest(*the_discriminant)

def discrim(a,b,c):
    discriminant = math.sqrt(math.pow(b,2)-4*a*c)
    return discriminant, b,a

def the_rest(discrim,b,a):
    x = (-b + discrim) / (2*a)
    y = (-b - discrim) / (2*a)
    return x, y

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T02:20:51.953

虽然 jamylak 的答案是正确的，但返回一个简单的类也更易于维护。然后，如果您更改了函数/返回值/表示，则调用代码：

*   是基于名称/标识符的；变化非常灵活；它不依赖于顺序，也不依赖于元组长度。它还可以节省您在整个代码中键入隐含规则的时间和不必要的重复。
*   如果有重大更改，解释器将在模块加载而不是运行时出错，因此您不会错过错误。这是因为您正在尝试访问命名成员，并且不依赖于某些“隐藏”或“隐含”规则，例如在代码中任何地方都没有形式化的元组排序。

对于一个更大的项目，这绝对是要走的路。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T02:18:15.090

像您的`discrim`. 但是这样的代码并没有多大意义（IMO）。

像这样尝试：

```
#!/usr/bin/env python

from __future__ import division
import math

def main():
    a = 1
    b = 0
    c = -4
    the_discriminant = discrim(a, b, c)
    print the_discriminant
    x, y = the_rest(the_discriminant,b,a)
    print x, y

def discrim(a,b,c):
    discriminant = math.sqrt(math.pow(b,2)-4*a*c)
    return discriminant

def the_rest(d, b,a):
    x = ((-b + d) / 2*a)
    y = ((-b - d) / 2*a)
    return x,y

if __name__ == '__main__':
    main() 
```

# c++ - 使用 WINAPI 的 C++ 输入

> ID：11463175
> 
> 赞同：0
> 
> 时间：2012-07-13T02:05:33.383
> 
> 标签：c++, winapi

好的，我正在directx9中制作一个简单的相机移动程序。我从消息中获取输入，如下所示：

```
 LRESULT CALLBACK WindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
    {
        switch (uMsg)
        {
        case WM_KEYDOWN:
            switch (wParam & 0x7F)
            {
                case 'W':
                    WDown = true;
                case 'A':
                    ADown = true;
                case 'S':
                    SDown = true;
                case 'D':
                    DDown = true;
            }
        case WM_KEYUP:
            switch (wParam & 0x7F)
            {

                    case 'W':
                        WDown = false;
                    case 'A':
                        ADown = false;
                    case 'S':
                        SDown = false;
                    case 'D':
                        DDown = false;
               }
           }
    }

    // Render Frame code:

    void Renderer::RenderOneFrame(bool w, bool a, bool s, bool d)
    {
    // Check Input
        if(w)
            m_camera.MoveForward(1);
        else if(a)
            m_camera.Strafe(-1);
        else if(s)
            m_camera.MoveForward(-1);
        else if(d)
            m_camera.Strafe(1);
    } 
```

超级简单对吧？虽然我遗漏了很多其他代码，但它根本不会与这些布尔值混淆，因此不需要它们。好吧，现在问题来了。如果我使用此代码，它会完美运行。前是前，右是右，左是左，后是后。

问题是，我希望能够对角移动。所以，显而易见的答案是摆脱 else 对吗？嗯，我愿意。

但是，程序变得混乱！前进不前进！它没有做任何事情！左后退，后退到右！唯一正确的就是正确的！巧合的是，这是检查的最后一个输入！但是我一次按1个键，但它们仍然坏了！发生了什么？我破坏了视觉工作室吗？这个程序是否泄漏到另一个维度？到底是怎么回事？！？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T02:16:22.627

您是否忘记了开关盒上的“中断”？

例子：

```
LRESULT CALLBACK WindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    switch (uMsg)
    {
    case WM_KEYDOWN:
        switch (wParam & 0x7F)
        {
            case 'W':
                WDown = true;
                break;
            case 'A':
                ADown = true;
                break;
            case 'S':
                SDown = true;
                break;
            case 'D':
                DDown = true;
                break;
        }
        break;
    case WM_KEYUP:
        switch (wParam & 0x7F)
        {

                case 'W':
                    WDown = false;
                    break;
                case 'A':
                    ADown = false;
                    break;
                case 'S':
                    SDown = false;
                    break;
                case 'D':
                    DDown = false;
                    break;
           }
       }
       break;
}

// Render Frame code:

void Renderer::RenderOneFrame(bool w, bool a, bool s, bool d)
{
// Check Input
    if(w)
        m_camera.MoveForward(1);
    if(a)
        m_camera.Strafe(-1);
    if(s)
        m_camera.MoveForward(-1);
    if(d)
        m_camera.Strafe(1);
} 
```

# ruby-on-rails - Rails 3.2 和资产管道：开发模式下的 JavaScript 压缩

> ID：11463176
> 
> 赞同：2
> 
> 时间：2012-07-13T02:06:07.300
> 
> 标签：ruby-on-rails, compression, asset-pipeline

是否可以在 Rails 3.2 的开发模式下提供压缩的 js？Gemfile 包含

```
 gem "closure-compiler" 
```

和 development.rb 包含

```
 config.serve_static_assets = true
  config.assets.compile = false
  config.assets.debug = false
  config.assets.js_compressor = :closure
  config.assets.compress = true 
```

跑过

```
RAILS_ENV=development bundle exec rake assets:precompile 
```

而且，即使已编译的 application.js 存在于：

```
./public/assets/application/application.js
./public/assets/application/application.js.gz
./public/assets/jasmine_rails/application.js
./public/assets/jasmine_rails/application.js.gz 
```

...它永远不会得到服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T23:55:59.837

此配置使其工作：

```
 config.cache_classes = true
  config.whiny_nils = true
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true
  config.serve_static_assets = true
  config.assets.compress = true
  config.assets.js_compressor = :closure
  config.assets.debug = false
  config.assets.compile = false
  config.assets.digest = true 
```

# mysql - 自动化需要使用数千个不同参数运行的命令

> ID：11463178
> 
> 赞同：0
> 
> 时间：2012-07-13T02:06:42.450
> 
> 标签：mysql, ruby-on-rails, shell, automation, large-files

在我的项目中，我需要将一个大文件（~250GB）上传到远程服务器，然后运行脚本将文件加载到 mysql 中。问题是，如果我加载单个文件，它将花费太长时间。所以我必须将文件拆分成小树干，并在多个终端中同时运行 10-20 个进程。如果我拆分每个文件~2MB，我需要 100,000 次操作。然后我必须像

```
ruby importer.rb data_part01_aa.csv
ruby importer.rb data_part01_ab.csv
ruby importer.rb data_part01_ac.csv
.
.
. 
```

在每个终端中，等待它们结束，然后运行下一个。

有什么方法可以自动化这个过程吗？任何 shell 脚本可以在前一个脚本完成后继续完成这项工作？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:01:13.523

在外壳中，您可以尝试：

```
for i in *.csv
do
    ruby importer.rb $i.csv
done 
```

前一个可以写成一行如下：

```
for i in *.csv; do ruby importer.rb data_part01_aa.csv; done 
```

最终，如果参数太多，可能需要一些时间才能开始运行。在这种情况下，您可以尝试`find`：

```
find . -name '*.csv' -exec ruby importer.rb {} \; 
```

但是，前面的命令将在每个子目录中递归搜索。要使其仅针对当前目录运行，您必须运行：

```
find . -maxdepth 1 -name '*.csv' -exec ruby importer.rb {} \; 
```

在给出的每个示例中，命令将按顺序运行。`*.csv`您可以使用不同的模式（即`a*.csv`, `b*.csv`,`[ab]*.*csv`等）来代替，或者您可以尝试另一个循环：

```
for j in $(echo {a..q})
do
    find . -name "data_part01_$j?.csv" -exec ruby importer.rb {} \; &
done 
```

Where`echo {a..q}`生成从*a*到*q*的字母序列，这似乎跟在您的文件名之后。最后一个示例中的关键是*&*，它将进程留在后台，在最后一个示例中，将有 17 个进程同时运行。如果您不想同时使用它们，那么您只需要删除 & 符号*即可*。

# java - 随机洗牌列表Java

> ID：11463179
> 
> 赞同：0
> 
> 时间：2012-07-13T02:07:05.500
> 
> 标签：java, random, linked-list, shuffle

我正在尝试随机洗牌。每次我尝试测试代码时，它基本上什么都不做，也没有结束。我想知道我到底错过了什么或做错了什么。

```
public static ListElement shuffle(ListElement head){
    int n= ListUtils.getLength(head);
    ListElement head2= null;
    while( head != null) {  
        int random = (int) Math.random() *  n;
        for(int i=0;i<random;i++){
            ListElement list= new ListElement(); 
            list=getItem(head2,n);
            list.getNext();
            head2=list;

        }
    }
    return head2;       
} 
```

获取项目

```
public static ListElement getItem(ListElement head, int n){
    if(n == 0){                 
        return head;            
    }else if(head == null){     
        return null;
    }else{                      
        return getItem(head.getNext(),n-1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:10:39.217

错字！您永远不会更新`head`您在循环条件中使用的 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T02:29:58.810

不确定 getItem 方法在 for 循环中的作用。

如果要使用 Math.random() 的另一种解决方案是遍历整个列表，并为列表中将与之交换的每个元素生成一个随机索引。

```
public void randomize(List<String> myList){
  int n= myList.size();
  for(int i; i < n; i++){
    int randIdx = (int) Math.random() *  n;
    swap(myList, i, randIdx);
  }
}

private void swap(List<String> list, int idx1, int idx2){
  if(idx1 != idx2){ //don't do swap if the indexes to swap between are the same - skip it.
    String tmp = list.get(idx1);
    list.set(idx1, list.get(idx2));
    list.set(idx2, tmp);
  }
} 
```

# c# - 如何在 MVC 的 web.config 中实现会话计时器？

> ID：11463181
> 
> 赞同：0
> 
> 时间：2012-07-13T02:07:12.553
> 
> 标签：c#, asp.net-mvc, web-config

本文展示了如何在 web.config 文件中实现[sesstionState 。](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28vs.80%29.aspx)但我想做的是在用户空闲 15 分钟或更长时间时清除会话。并重置用户在时间范围内活跃的时间。这可能吗？如果不是，我怎么能在不使用任何 javascript 代码/jQuery 的情况下做到这一点？

顺便说一句，我有我的 BaseController，所有控制器都继承了它。希望有人能给我更好的主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T02:12:02.113

使用`<sessionState>`配置部分中的 timeout 属性。

```
<sessionState
    ...

    timeout="number of minutes"

    ...
</sessionState> 
```

文档：http: [//msdn.microsoft.com/en-us/library/h6bb9cz9%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28v=vs.100%29.aspx)

# linux - 仅当它们存在于 insmoded Linux 内核模块中时，如何选择性地使用导出的符号？

> ID：11463184
> 
> 赞同：6
> 
> 时间：2012-07-13T02:07:39.010
> 
> 标签：linux, linux-kernel, kernel-module

我正在修改 Linux 内核以向 Linux 虚拟服务器 (LVS) 添加一些功能。

我开发了一个模块（我称之为`net/netfilter/ipvs/ip_vs_utils.c`），其中包含一些在负载平衡时使用的功能。这里的所有函数都是使用导出的`EXPORT_SYMBOL()`。

这个模块，逻辑上不是一直加载的。我的目的是让用户决定是否要使用此附加功能（加载或卸载模块）。

我的问题是如何从现有的（当然还有修改的）模块（）中可选地调用这些函数（取决于模块是否正在运行`net/netfilter/ipvs/ip_vs_core.c`）。像这样的东西：

```
if(ip_vs_utils_IsLoaded)
{
  function1(arg1, arg2, arg3); // being function1 defined on ip_vs_utils.c
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T05:55:13.623

我认为您需要**始终**（或几乎始终）将蹦床加载到内核中。

在蹦床代码中，你需要这样的变量。

```
struct module *ip_vs_utils_mod;
EXPORT_SYMBOL(ip_vs_utils_mod);

/* function pointers */
ret_type (*ip_vs_utils_afunc_ptr)(func_arg_list); /* Add static if you put it in a header file! */
EXPORT_SYMBOL(ip_vs_utils_afunc_ptr); /*  ******EXPORTED***** */ 
```

当ip_vs_utils被加载后，需要初始化所有变量，ip_vs_utils.c中的初始化代码：

```
ip_vs_utils_mod = THIS_MODULE;

/* init function pointers */

/* ip_vs_utils_afunc_impl is the real implementation
 * of the function, it is *****NOT***** needed to export it
 */
ip_vs_utils_afunc_ptr = ip_vs_utils_afunc_impl; 
```

并在蹦床代码中添加蹦床功能：

```
ret_type ip_vs_utils_afunc(func_arg_list)
{
   ret_type ret = DEFAULT_RET;

   if (try_module_get(ip_vs_utils_mod)) {
       ret = (*ip_vs_utils_afunc_ptr)(func_arg_list);
       module_put(ip_vs_utils_mod);
   }
   return ret;
} 
```

需要 try_module_get() 来保护模块在调用 ip_vs_utils_afunc_ptr() 时不被突然卸载。你也可以使用 RCU 来减少 try_module_get()/module_put() 的开销。（但很难）

或者您可以在用户空间中使用一些类似蹦床的动态链接（您可能需要在 linux 内核中进行很多更改）

# hibernate - JPA Hibernate createNativeQuery 抛出 setParameter

> ID：11463186
> 
> 赞同：0
> 
> 时间：2012-07-13T02:07:54.960
> 
> 标签：hibernate, jpa

这是查询（我已经对其进行了格式化，以便人类更容易阅读：）

```
Query q = em.createNativeQuery("select group_name 
                                from groups g 
                                join credentials_groups_lu cgl on 
                                g.group_id = cgl.group_id 
                                and g.parent_id = cgl.parent_id 
                                where cgl.credential_id  = :credentialId");
q.setParameter("credentialID", credentialId); 
```

当它到达设置的参数行时，它会呕吐。我在某个地方读到了 hibernate 不喜欢 nameNativeQueries。这是同一个问题的一部分吗？如果是这样，如何绕过它。

提前感谢那些有答案的人。:) 我不想听起来脾气暴躁，但我不想学习如何使用“纯”ORM 来做到这一点。我可以做到这一点。我需要弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:35:57.527

我认为这可能是由您的SQL中的参数名称和setParameter中使用的键引起的，一个是credentialId，另一个是credentialID（***Id*** vs ***ID***）

# c# - sharepoint 中的未发布页面提示用户身份验证

> ID：11463195
> 
> 赞同：0
> 
> 时间：2012-07-13T02:09:22.190
> 
> 标签：c#, asp.net, vb.net, sharepoint, sharepoint-2007

我在 sharepoint 2007 中创建了一个页面。此页面还没有发布版本。所以可以预料，当我使用匿名访问访问此页面时，它会重定向到 404 页面，但不幸的是 sharepoint 有不同的行为，而是要求用户身份验证。

为什么 sharepoint 会提示进行用户身份验证？这是共享点的预期行为吗？如果是这样，我可以将其重定向到 404 页面并且从不要求用户身份验证吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:22:51.100

如果您创建了一个页面，它确实存在，但在您发布之前处于“草稿”模式。这意味着如果您尝试访问它，它会提示您提供一个有权在草稿模式下查看它的帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:18:58.107

首先，我创建了一个 httpmodule 来拦截任何 aspx 请求。在这个 httpmodule 中，我检索请求页面的文件版本并检查当前版本是否等于 0（因为该页面没有当前发布的版本）。如果当前版本为零，则将其重定向到 404page.aspx。

其次，在注册httpmodule时，确保它是web.config文件中httpmodule下的第一个元素。这是为了确保我们的模块首先被调用。这对于确保不会执行身份验证很重要。

# git - 如何从新分叉中删除密钥/密码？

> ID：11463202
> 
> 赞同：1
> 
> 时间：2012-07-13T02:10:20.897
> 
> 标签：git

我在 GitHub 上有一个想要开源的存储库。在此之前，我想分叉私有项目，从应用程序中删除我的秘密 API 密钥，然后将分叉作为开源发布。

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:12:52.150

[使用`git filter-branch`命令重写历史](https://help.github.com/articles/remove-sensitive-data)。

```
$ git filter-branch --index-filter 'git rm --cached --ignore-unmatch Rakefile' --prune-empty --tag-name-filter cat -- --all 
```

# iphone - 如果键存在则显示标签，如果不存在则留空

> ID：11463203
> 
> 赞同：0
> 
> 时间：2012-07-13T02:10:27.027
> 
> 标签：iphone, xcode, label, plist, customization

我使用以下代码显示带有字典数组的 plist 中的标签值：

```
seventyfiveclLabel.text = [NSString stringWithFormat:@"Kr. %@",[selectedObject valueForKey:@"75 cl price"]]; 
```

如果 key 存在于 reprecented 字典中，我可以显示标签，如果 key 不存在（或者如果 i 确实存在但值为 0？）将其留空？或者如果我存在，则将其留空，但存在但具有特定值（0）？我问是因为我在 plist 中有 100 种葡萄酒（字典），其中一些是 75 cl，有些没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:01:47.003

我通常做这样的事情的方式是做如下的事情：

```
NSString *myString = @"";
if ([myDict valueForKey:@"someKey"] != nil) {
    myString = [NSString stringWithFormat:@"Kr. %@", [myDict valueForKey:@"someKey"]];
}
myLabel.text = myString; 
```

这样，如果键不存在，则默认为空字符串。如果键确实有一个值，它会插入那个值。我希望这有帮助

# iphone - UITableView中的静态图片

> ID：11463208
> 
> 赞同：0
> 
> 时间：2012-07-13T02:11:18.040
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

我想在我的 2 张图片中`UITabeViewController`，一张在顶部（在导航栏下方），一张在底部（在 tabBar 上方）。我想要做的是，当您滚动时`tableView`，这些图像将保持静止并且不会移动。

怎么可能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T02:17:24.727

让表格视图变小并把 UIImageViews 放在上面和下面怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T06:30:12.343

你有点不对劲。你只需要一个 UIViewController，它有一个 tableview 和两个 imageView。UITableView 必须滚动它的所有内容视图。UITableView 有两部分：一个大的内容视图，一个小的剪辑视图。当你滚动表格视图时，它改变了内容视图的可见范围。</p>

# c# - 使用 MySQLi 在 PHP 中管理 MySQL 查询

> ID：11463210
> 
> 赞同：2
> 
> 时间：2012-07-13T02:11:32.803
> 
> 标签：c#, php, mysqli

我需要使用 PHP 从 C# 项目访问我主机上的 MySQL 数据库。我正在学习 PHP 和 mysqli 以便能够做到这一点。我不知道在哪里对信息进行实际排序。查询通过 $_POST 变量来自我的 C# 应用程序并获取请求的数据。但是，我似乎受限于如何将其恢复到我的应用程序中。我可以将它作为一个长字符串发送并在 C# 中重新组织它。或者创建复杂的 for 循环，仍然需要在 C# 端进行大量排序。我确定我只是不熟悉 PHP 和 mysqli。谁能推荐一个工作流程？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:22:34.917

您可以通过多种方式将其传递回您的 C# 应用程序。JSON 和 XML 非常流行。对于这个答案，我将讨论使用 JSON。

在 PHP 方面，您需要获取数据并使用[json_encode](http://us.php.net/json_encode)将其转换为 JSON 格式。在 C# 方面，您会将其从 JSON 转换为 C# 对象。[虽然有一些方法可以在 C#（ DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)和[JavaScriptSerializer](http://www.asp.net/AJAX/Documentation/Live/mref/T_System_Web_Script_Serialization_JavaScriptSerializer.aspx) ）中内置，但由于实现和性能，.NET 中的最佳选择是[Newtonsoft 的 Json.NET](http://james.newtonking.com/projects/json-net.aspx)。

更新...添加一个粗略的例子。

**PHP**

```
if ($result = $mysqli->query("SELECT One, Two FROM MyTable")) {
    $jsonResult = json_encode($result);     

    /* free result set */
    $result->close();
}

// Now send back $jsonResult 
```

**C#（使用 JSON.net/JObject...你也可以创建一个实际的对象来反序列化）**

```
string phpResponse = /* Add wherever you got your data from */;
JObject myResult = JObject.Parse(phpResponse); 
```

# javascript - 钛：Windows 和 Views 的区别？

> ID：11463211
> 
> 赞同：3
> 
> 时间：2012-07-13T02:11:46.940
> 
> 标签：javascript, titanium

1）窗口和视图有什么区别？

2）窗口是新屏幕还是视图是新屏幕？或两者？

3) 如果你有一个带有 3 个屏幕的简单表单怎么办？

```
"Form Detail ---> Form Review ---> Form Confirm/Submit" 
```

我会创建 3 个窗口还是 3 个视图？1 个窗口和 3 个视图呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:28:56.977

从[文档](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.UI.Window)

> Window 是一个空的绘图表面或容器。
> 
> 窗口是可以包含其他视图的顶级容器。窗户可以打开和关闭。打开一个窗口会导致该窗口及其子视图被添加到应用程序的渲染堆栈中，位于任何先前打开的窗口之上。关闭窗口会从渲染堆栈中移除窗口及其子项。
> 
> 窗口包含其他视图，但通常它们不包含在其他视图中。

因此，窗口就像是您要绘制的视图的容器（是的，就像屏幕一样）。你想怎么做（3 个窗口对 3 个屏幕）取决于你。但是，这些视图非常相似，因此将它们保留在同一个窗口中并更改视图对我来说更有意义。

# audio - 如何从原始 16 位、44100hz、立体声 LPCM 中获得正确的声音（立体声）

> ID：11463218
> 
> 赞同：0
> 
> 时间：2012-07-13T02:12:49.037
> 
> 标签：audio, spotify, naudio

我正在使用 libspotify 检索音乐以使用某些音频库播放。Spotify 音乐应为原始 16 位、44100hz、立体声 LPCM。我一直在尝试用 NAudio 播放音乐，但不幸的是它不是立体声的。

来自 spotify 文档：样本以整数形式提供，请参阅 sp_audioformat。一帧由与通道数相同的样本数组成。即交错是在样本级别。

以下代码从文件中播放单声道歌曲。该文件是 Spotify 音乐数据的副本。

有人可以指导我寻求立体声解决方案。它可以是 .NET 中的任何音频库。

```
using (var waveOutDevice = new WaveOut())
{

    using (var pcmStream = new FileStream(PcmFile, FileMode.Open))
    {
        WaveStream waveStream = null;
        try
        {
            const int sampleRate = 44100;
            const int channels = 2;
            var waveFormat = WaveFormat.CreateCustomFormat(WaveFormatEncoding.Pcm, sampleRate * channels, 1, sampleRate*2*channels, channels, 16);
            waveStream = new RawSourceWaveStream(pcmStream, waveFormat);

            waveOutDevice.Init(waveStream);
            waveOutDevice.Play();

            Thread.Sleep(5000); //Listen to 5 secs of music

        }
        finally
        {
            waveOutDevice.Stop();
            if (waveStream != null) waveStream.Close();
        }
    }
} 
```

CreateCustomFormat 的签名是公共静态 NAudio.Wave.WaveFormat CreateCustomFormat(NAudio.Wave.WaveFormatEncoding tag, int sampleRate, int channels, int averageBytesPerSecond, int blockAlign, int bitsPerSample)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:01:45.073

这是立体声：

```
const int bitsPerSample = 16;
int blockAlign = (channels * (bitsPerSample / 8));
int averageBytesPerSecond = sampleRate * blockAlign;
var waveFormat = WaveFormat.CreateCustomFormat(WaveFormatEncoding.Pcm, sampleRate, channels, averageBytesPerSecond, blockAlign, bitsPerSample); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:42:07.300

也许您将错误的值传递给**CreateCustomFormat**。尝试以下操作：

```
WaveFormat.CreateCustomFormat(WaveFormatEncoding.Pcm, sampleRate, channels, sampleRate*channels, 1, 8); 
```

# php - Magento，所有页面上的布局看起来都不一样

> ID：11463225
> 
> 赞同：-1
> 
> 时间：2012-07-13T02:14:17.677
> 
> 标签：php, templates, magento, layout

*我为尝试修复它所做的一些事情*：

- 我尝试从 3columns.phtml 更改为我工作的那个 - 2columns-left.phtml，在许多不同的地方，但它已经说 2columns~。

- 多次尝试清除缓存。

- 在 cms 和 category 中也更改为此模板，但仍然无法正常工作。

**我的第一页正在做我想做的事。但是，当我单击产品或任何 cms 页面时，徽标和标题看起来完全古怪，甚至缺少我在 header.phtml 中使用 div 添加的背景元素**

有谁知道为什么会发生这种情况？:( 我应该在哪里改变一些东西？

*从 2columns-left.phtml*：

```
<?php
/**
 * Template for Mage_Page_Block_Html
 */
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php echo $this->getLang() ?>" lang="<?php echo $this->getLang() ?>">
<head>
<?php echo $this->getChildHtml('head') ?>
</head>
<body<?php echo $this->getBodyClass()?' class="'.$this->getBodyClass().'"':'' ?>>
<?php echo $this->getChildHtml('after_body_start') ?>
<div class="wrapper">
    <?php echo $this->getChildHtml('global_notices') ?>
    <div class="page">
        <?php echo $this->getChildHtml('header') ?>
        <div class="main-container col2-left-layout">
            <div class="main">
                <?php echo $this->getChildHtml('breadcrumbs') ?>
                <div class="col-main">
                    <?php echo $this->getChildHtml('global_messages') ?>
                    <?php echo $this->getChildHtml('content') ?>
                </div>
                <div class="col-left sidebar"><?php echo $this->getChildHtml('left') ?></div>
            </div>
        </div>
        <?php echo $this->getChildHtml('footer') ?>
        <?php echo $this->getChildHtml('before_body_end') ?>
    </div>
</div>
<?php echo $this->getAbsoluteFooter() ?>
</body>
</html> 
```

*从 header.phtml*：

```
<?php
/**

/**
 * @var Mage_Page_Block_Html_Header $this
 */
?>
<div class="header-container">
    <div class="header">
        <?php if ($this->getIsHomePage()):?>
                <div class="header-menu">
        <p></p>
        <?php echo $this->getChildHtml('topMenu') ?>
        </div>
        <div class="header-bg">
        <h1 class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a></h1>
        <?php else:?>
        <a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a>
        <?php endif?>
        </div>

    </div>
    <div class="quick-access">
        <?php echo $this->getChildHtml('store_language') ?>
        <p class="welcome-msg"><?php echo $this->getWelcome()?></p>
        <?php echo $this->getChildHtml('topLinks') ?>
    </div>
    <?php echo $this->getChildHtml('topBar') ?>
    <?php echo $this->getChildHtml('topContainer'); ?>
</div> 
```

*这适用于第一页（索引/主页），但是当我点击周围的所有其他页面时 - 标题似乎不包含此代码（至少这是我的想法，因为它看起来不像它确实)* :

```
 <div class="header-menu">
    <p></p>
    <?php echo $this->getChildHtml('topMenu') ?>
    </div>
    <div class="header-bg">
    <h1 class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a></h1>
    <?php else:?>
    <a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a>
    <?php endif?>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T07:30:48.080

`<?php if ($this->getIsHomePage()):?>`检查主页是否处于活动状态的测试放错了位置，因此包装了太多代码：当当前页面不是主页时，一些标签没有关闭，菜单或标题背景不显示。

通常，这看起来像这样：

```
<?php if ($this->getIsHomePage()):?>
<h1 class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a></h1>
<?php else:?>
<a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a>
<?php endif?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:58:40.010

将您的代码移出 getIsHomePage()):?> 检查

```
<?php
/**

/**
 * @var Mage_Page_Block_Html_Header $this
 */
?>
<div class="header-container">
    <div class="header">
        <?php if ($this->getIsHomePage()):?>
                <div class="header-menu">
        <p></p>
        <?php echo $this->getChildHtml('topMenu') ?>
        </div>
        <div class="header-bg">
        <h1 class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a></h1>
        <?php else:?>
        <a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a>
        <?php endif?>
        </div>

    </div>
    <div class="quick-access">
        <?php echo $this->getChildHtml('store_language') ?>
        <p class="welcome-msg"><?php echo $this->getWelcome()?></p>
        <?php echo $this->getChildHtml('topLinks') ?>
    </div>
    <?php echo $this->getChildHtml('topBar') ?>
    <?php echo $this->getChildHtml('topContainer'); ?>
</div> 
```

应该变成这样：

```
<?php
/**

/**
 * @var Mage_Page_Block_Html_Header $this
 */
?>
<div class="header-container">
    <div class="header">

        <div class="header-menu">
        <p></p>
        <?php echo $this->getChildHtml('topMenu') ?>
        </div>
        <div class="header-bg">
         <?php if ($this->getIsHomePage()):?>
        <h1 class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a></h1>
        <?php else:?>
        <a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a>
        <?php endif?>
        </div>

    </div>
    <div class="quick-access">
        <?php echo $this->getChildHtml('store_language') ?>
        <p class="welcome-msg"><?php echo $this->getWelcome()?></p>
        <?php echo $this->getChildHtml('topLinks') ?>
    </div>
    <?php echo $this->getChildHtml('topBar') ?>
    <?php echo $this->getChildHtml('topContainer'); ?>
</div> 
```

# python - 在 Python 中加密 Windows exe 文件

> ID：11463226
> 
> 赞同：1
> 
> 时间：2012-07-13T02:14:40.890
> 
> 标签：python, executable, exe

我是 Python 加密的新手，我想知道如何加密 Windows 可执行文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:24:19.737

您不能有效地加密`exe`文件，也不能加密 python 程序。在某些时候，您必须向计算机透露秘密，当您这样做时，它的用户就会在场。

但是，您可以尝试一些非常无效的方法，以稍微难以理解正在执行的算法。这些方法包括：

*   [http://www.py2exe.org/](http://www.py2exe.org/)
*   [http://cx-freeze.sourceforge.net/cx_Freeze.html](http://cx-freeze.sourceforge.net/cx_Freeze.html)
*   [http://www.bitboost.com/#Python_obfuscator](http://www.bitboost.com/#Python_obfuscator)

# java - 集合框架中的Java集合与地图

> ID：11463230
> 
> 赞同：8
> 
> 时间：2012-07-13T02:15:09.363
> 
> 标签：java, collections

根据[http://docs.oracle.com/javase/tutorial/collections/interfaces/index.html](http://docs.oracle.com/javase/tutorial/collections/interfaces/index.html)有两个顶级接口，称为集合和映射。

将这两者分开的确切原因是什么？

是不是所有键值数据结构都实现了 map 接口，而所有其他数据结构都实现了 collections 接口？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-13T02:20:02.210

对，那是正确的！检查所有`List`类，然后检查所有`Map`相关类。

并且有这个很棒的讨论，ob this question

[Java中的列表与地图](https://stackoverflow.com/questions/3770613/list-vs-map-in-java)

**视觉上**

这是一个**集合**，通过这个你知道书在那里，它的顺序就像 0,1,2,3...

![在此处输入图像描述](../Images/cdea4f3d42991f1891cc33763acc21c3.png)

但是在**Map**中，书籍在内存中是无序的，但是为了计算机的方便，它有一个查找书籍的键，就像在图书馆中一样。

![在此处输入图像描述](../Images/a80115e673917928c264050325b6af2b.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T02:19:32.167

A`Map`是具有映射到值的唯一键的结构。A`Collection`只是一组没有特定键的多个值。

`List`您可以在 a和 a之间进行相同的比较`Map`以查看差异。[这个 SO question](https://stackoverflow.com/questions/3770613/list-vs-map-in-java)处理这些差异。

# java - 如何从 XSD 生成 JAXB 类？

> ID：11463231
> 
> 赞同：126
> 
> 时间：2012-07-13T02:15:11.137
> 
> 标签：java, jakarta-ee, jaxb

我是 XML 的新手。我正在做一个 Java EE 项目 REST 实现，我们返回了很多 XML。有了这个，我们决定使用 JAXB。到目前为止，我们为 XML 手动编码了模型。

但是已经有这些复杂的结构我们不知道如何编码。我们已经阅读了有关从 XSD 生成类的内容。我们确实有 XSD。

我的问题：

1.) 我已经阅读了关于 XJC 的信息，我在哪里可以找到它？

2.) 我们必须安装整个 JAXB 吗？（所以到目前为止我们使用的是什么？这不是 JAXB 吗？）

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-07-13T02:25:08.137

XJC 包含在从 Java SE 6 开始的 JDK 的 bin 目录中。有关示例，请参见：

*   [http://blog.bdoughan.com/2010/09/processing-atom-feeds-with-jaxb.html](http://blog.bdoughan.com/2010/09/processing-atom-feeds-with-jaxb.html)

博客内容如下：

**使用 JAXB 处理 Atom 提要** Atom 是一种用于表示 Web 提要的 XML 格式。标准格式允许阅读器应用程序显示来自不同来源的提要。在此示例中，我们将处理此博客的 Atom 提要。

**演示**

在此示例中，我们将使用 JAXB 将与此博客对应的 Atom XML 提要转换为对象，然后再转换回 XML。

```
import java.io.InputStream;
import java.net.URL;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import org.w3._2005.atom.FeedType;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance("org.w3._2005.atom");

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        URL url = new URL("http://bdoughan.blogspot.com/atom.xml");
        InputStream xml = url.openStream();
        JAXBElement<feedtype> feed = unmarshaller.unmarshal(new StreamSource(xml), FeedType.class);
        xml.close();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(feed, System.out);
    }

} 
```

**JAXB 模型**

以下模型由模式生成到 Java 编译器 (XJC)。我省略了 get/set 方法和注释以节省空间。

```
xjc -d generated http://www.kbcafe.com/rss/atom.xsd.xml 
```

包信息

```
@XmlSchema(
        namespace = "http://www.w3.org/2005/Atom",
        elementFormDefault = XmlNsForm.QUALIFIED)
@XmlAccessorType(XmlAccessType.FIELD)
package org.w3._2005.atom;

import javax.xml.bind.annotation.*; 
```

类别类型

```
package org.w3._2005.atom;

import java.util.*;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.*;
import javax.xml.namespace.QName;

@XmlType(name = "categoryType")
public class CategoryType {
    @XmlAttribute(required = true)
    protected String term;

    @XmlAttribute
    @XmlSchemaType(name = "anyURI")
    protected String scheme;

    @XmlAttribute
    protected String label;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlSchemaType(name = "anyURI")
    protected String base;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "language")
    protected String lang;

    @XmlAnyAttribute
    private Map<QName, String> otherAttributes = new HashMap<QName, String>();
} 
```

内容类型

```
package org.w3._2005.atom;

import java.util.*;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.*;
import javax.xml.namespace.QName;

@XmlType(name = "contentType", propOrder = {"content"})
public class ContentType {
    @XmlMixed
    @XmlAnyElement(lax = true)
    protected List<Object> content;

    @XmlAttribute
    protected String type;

    @XmlAttribute
    @XmlSchemaType(name = "anyURI")
    protected String src;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlSchemaType(name = "anyURI")
    protected String base;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "language")
    protected String lang;

    @XmlAnyAttribute
    private Map<QName, String> otherAttributes = new HashMap<QName, String>();
} 
```

日期时间类型

```
package org.w3._2005.atom;

import java.util.*;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.*;
import javax.xml.datatype.XMLGregorianCalendar;
import javax.xml.namespace.QName;

@XmlType(name = "dateTimeType", propOrder = {"value"})
public class DateTimeType {
    @XmlValue
    @XmlSchemaType(name = "dateTime")
    protected XMLGregorianCalendar value;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlSchemaType(name = "anyURI")
    protected String base;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "language")
    protected String lang;

    @XmlAnyAttribute
    private Map<QName, String> otherAttributes = new HashMap<QName, String>();
} 
```

入口类型

```
package org.w3._2005.atom;

import java.util.*;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.*;
import javax.xml.namespace.QName;

@XmlType(name = "entryType", propOrder = {"authorOrCategoryOrContent"})
public class EntryType {
    @XmlElementRefs({
        @XmlElementRef(name = "id", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "rights", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "summary", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "title", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "author", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "source", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "updated", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "category", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "content", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "published", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "contributor", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "link", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class)
    })
    @XmlAnyElement(lax = true)
    protected List<Object> authorOrCategoryOrContent;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlSchemaType(name = "anyURI")
    protected String base;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "language")
    protected String lang;

    @XmlAnyAttribute
    private Map<QName, String> otherAttributes = new HashMap<QName, String>();
} 
```

饲料类型

```
package org.w3._2005.atom;

import java.util.*;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.*;
import javax.xml.namespace.QName;

@XmlType(name = "feedType", propOrder = {"authorOrCategoryOrContributor"})
public class FeedType {
    @XmlElementRefs({
        @XmlElementRef(name = "link", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "updated", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "category", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "rights", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "contributor", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "title", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "id", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "generator", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "icon", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "subtitle", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "author", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "entry", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "logo", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class)
    })
    @XmlAnyElement(lax = true)
    protected List<Object> authorOrCategoryOrContributor;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlSchemaType(name = "anyURI")
    protected String base;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "language")
    protected String lang;

    @XmlAnyAttribute
    private Map<QName, String> otherAttributes = new HashMap<QName, String>();
} 
```

发电机类型

```
package org.w3._2005.atom;

import java.util.*;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.*;
import javax.xml.namespace.QName;

@XmlType(name = "generatorType", propOrder = {"value"})
public class GeneratorType {
    @XmlValue
    protected String value;

    @XmlAttribute
    @XmlSchemaType(name = "anyURI")
    protected String uri;

    @XmlAttribute
    protected String version;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlSchemaType(name = "anyURI")
    protected String base;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "language")
    protected String lang;

    @XmlAnyAttribute
    private Map<QName, String> otherAttributes = new HashMap<QName, String>();
} 
```

图标类型

```
package org.w3._2005.atom;

import java.util.*;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.*;
import javax.xml.namespace.QName;

@XmlType(name = "iconType", propOrder = {"value"})
public class IconType {
    @XmlValue
    @XmlSchemaType(name = "anyURI")
    protected String value;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlSchemaType(name = "anyURI")
    protected String base;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "language")
    protected String lang;

    @XmlAnyAttribute
    private Map<QName, String> otherAttributes = new HashMap<QName, String>();
} 
```

身份类型

```
package org.w3._2005.atom;

import java.util.*;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.*;
import javax.xml.namespace.QName;

@XmlType(name = "idType", propOrder = {"value"})
public class IdType {
    @XmlValue
    @XmlSchemaType(name = "anyURI")
    protected String value;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlSchemaType(name = "anyURI")
    protected String base;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "language")
    protected String lang;

    @XmlAnyAttribute
    private Map<QName, String> otherAttributes = new HashMap<QName, String>();
} 
```

链接类型

```
package org.w3._2005.atom;

import java.math.BigInteger;
import java.util.*;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.*;
import javax.xml.namespace.QName;

@XmlType(name = "linkType", propOrder = {"content"})
public class LinkType {
    @XmlValue
    protected String content;

    @XmlAttribute(required = true)
    @XmlSchemaType(name = "anyURI")
    protected String href;

    @XmlAttribute
    protected String rel;

    @XmlAttribute
    protected String type;

    @XmlAttribute
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "NMTOKEN")
    protected String hreflang;

    @XmlAttribute
    protected String title;

    @XmlAttribute
    @XmlSchemaType(name = "positiveInteger")
    protected BigInteger length;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlSchemaType(name = "anyURI")
    protected String base;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "language")
    protected String lang;

    @XmlAnyAttribute
    private Map<QName, String> otherAttributes = new HashMap<QName, String>();
} 
```

标志类型

```
package org.w3._2005.atom;

import java.util.*;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.*;
import javax.xml.namespace.QName;

@XmlType(name = "logoType", propOrder = {"value"})
public class LogoType {
    @XmlValue
    @XmlSchemaType(name = "anyURI")
    protected String value;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlSchemaType(name = "anyURI")
    protected String base;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "language")
    protected String lang;

    @XmlAnyAttribute
    private Map<QName, String> otherAttributes = new HashMap<QName, String>();
} 
```

人员类型

```
package org.w3._2005.atom;

import java.util.*;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.*;
import javax.xml.namespace.QName;

@XmlType(name = "personType", propOrder = {"nameOrUriOrEmail"})
public class PersonType {
    @XmlElementRefs({
        @XmlElementRef(name = "email", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "name", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "uri", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class)
    })
    @XmlAnyElement(lax = true)
    protected List<Object> nameOrUriOrEmail;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlSchemaType(name = "anyURI")
    protected String base;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "language")
    protected String lang;

    @XmlAnyAttribute
    private Map<QName, String> otherAttributes = new HashMap<QName, String>();
} 
```

源类型

```
package org.w3._2005.atom;

import java.util.*;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.*;
import javax.xml.namespace.QName;

@XmlType(name = "sourceType", propOrder = {"authorOrCategoryOrContributor"})
public class SourceType {
    @XmlElementRefs({
        @XmlElementRef(name = "updated", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "category", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "subtitle", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "logo", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "generator", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "icon", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "title", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "id", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "author", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "contributor", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "link", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class),
        @XmlElementRef(name = "rights", namespace = "http://www.w3.org/2005/Atom", type = JAXBElement.class)
    })
    @XmlAnyElement(lax = true)
    protected List<Object> authorOrCategoryOrContributor;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlSchemaType(name = "anyURI")
    protected String base;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "language")
    protected String lang;

    @XmlAnyAttribute
    private Map<QName, String> otherAttributes = new HashMap<QName, String>();
} 
```

文本类型

```
package org.w3._2005.atom;

import java.util.*;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.*;
import javax.xml.namespace.QName;

@XmlType(name = "textType", propOrder = {"content"})
public class TextType {
    @XmlMixed
    @XmlAnyElement(lax = true)
    protected List<Object> content;

    @XmlAttribute
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    protected String type;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlSchemaType(name = "anyURI")
    protected String base;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "language")
    protected String lang;

    @XmlAnyAttribute
    private Map<QName, String> otherAttributes = new HashMap<QName, String>();
} 
```

UriType

```
package org.w3._2005.atom;

import java.util.*;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.*;
import javax.xml.namespace.QName;

@XmlType(name = "uriType", propOrder = {"value"})
public class UriType {
    @XmlValue
    @XmlSchemaType(name = "anyURI")
    protected String value;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlSchemaType(name = "anyURI")
    protected String base;

    @XmlAttribute(namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "language")
    protected String lang;

    @XmlAnyAttribute
    private Map<QName, String> otherAttributes = new HashMap<QName, String>();
} 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2014-05-28T16:26:39.210

对于*Eclipse STS（至少 3.5）*，您不需要安装任何东西。**右键单击 schema.xsd -> 生成 -> JAXB 类。**您必须在下一步中指定包和位置，仅此而已，应该生成您的类。我想所有上述解决方案都有效，但这似乎是迄今为止最简单的（对于 STS 用户）。

[更新] Eclipse STS 3.6 版（基于 Kepler）具有相同的功能。

![废话](../Images/b06c83641feac9528bdc824ff444cd35.png)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-07-14T08:46:48.880

1) 您可以使用标准的 java 实用程序**xjc** - ([your java home dir]\bin\xjc.exe)。但是您需要创建 .bat（或 .sh）脚本才能使用它。

例如生成.bat：

```
[your java home dir]\bin\xjc.exe %1 %2 %3 
```

例如 test-scheme.xsd：

```
<?xml version="1.0"?>
<xs:schema version="1.0"
           xmlns:xs="http://www.w3.org/2001/XMLSchema"
           elementFormDefault="qualified" 
           targetNamespace="http://myprojects.net/xsd/TestScheme"
           xmlns="http://myprojects.net/xsd/TestScheme">
    <xs:element name="employee" type="PersonInfoType"/>

    <xs:complexType name="PersonInfoType">
        <xs:sequence>
            <xs:element name="firstname" type="xs:string"/>
            <xs:element name="lastname" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

运行带有参数的 .bat 文件： generate.bat test-scheme.xsd -d [your src dir]

有关更多信息，请使用此文档 - [http://docs.oracle.com/javaee/5/tutorial/doc/bnazg.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnazg.html)

这 - [http://docs.oracle.com/javase/6/docs/technotes/tools/share/xjc.html](http://docs.oracle.com/javase/6/docs/technotes/tools/share/xjc.html)

2) JAXB（xjc 实用程序）默认与JDK6 一起安装。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-13T02:24:28.957

*   如果您使用的是 Eclipse，您还可以尝试[JAXB Eclipse Plug-In](http://sourceforge.net/projects/jaxb-builder/)

*   您可以在此处找到有关 jdk 安装附带的 XJC 绑定编译器的更多信息：xjc: [Java™ Architecture for XML Binding -Binding Compiler](http://docs.oracle.com/javase/6/docs/technotes/tools/share/xjc.html)

我希望这有帮助！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-12-09T15:31:38.357

cxf 非常支持这种东西，例如

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-xjc-plugin</artifactId>
    <version>2.3.0</version>
    <configuration>
      <extensions>
        <extension>org.apache.cxf.xjcplugins:cxf-xjc-dv:2.3.0</extension>
      </extensions>
    </configuration>
    <executions>
      <execution>
        <id>generate-sources-trans</id>
        <phase>generate-sources</phase>
        <goals>
          <goal>xsdtojava</goal>
        </goals>
        <configuration>
          <sourceRoot>${basedir}/src/main/java</sourceRoot>
          <xsdOptions>
            <xsdOption>
              <xsd>src/main/resources/xxx.xsd</xsd>
            </xsdOption>
          </xsdOptions>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-10-15T10:13:25.257

在 intellij 单击 .xsd 文件 -> WebServices -> 从 Xml Schema JAXB 生成 Java 代码，然后给出包路径和包名 -> ok

请注意，所需的插件是：Java EE：Web Services (JAX-WS)（捆绑）

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-02-15T09:36:14.317

1.  下载 [http://java.net/downloads/jaxb-workshop/IDE%20plugins/org.jvnet.jaxbw.zip](http://java.net/downloads/jaxb-workshop/IDE%20plugins/org.jvnet.jaxbw.zip)
2.  解压缩 zip 文件。
3.  将 org.jvnet.jaxbw.eclipse_1.0.0 文件夹放入 .eclipse\plugins 文件夹
4.  重启日食。
5.  右键单击 XSD 文件，您可以找到相关菜单。JAXB 2.0 -> 运行 XJC 。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-02-19T13:09:38.870

您还可以使用**jaxb2-maven-plugin**插件从模式生成源代码：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jaxb2-maven-plugin</artifactId>
            <version>2.2</version>
            <executions>
                <execution>
                    <goals>
                        <goal>xjc</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <sources>
                    <source>src/main/resources/your_schema.xsd</source>
                </sources>
                <xjbSources>
                    <xjbSource>src/main/resources/bindings.xjb</xjbSource>
                </xjbSources>
                <packageName>some_package</packageName>
                <outputDirectory>src/main/java</outputDirectory>
                <clearOutputDir>false</clearOutputDir>
                <generateEpisode>false</generateEpisode>
                <noGeneratedHeaderComments>true</noGeneratedHeaderComments>
            </configuration>
        </plugin> 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-10-22T07:07:27.223

在`Eclipse`中，右键单击`xsd`要获取的文件 --> Generate --> Java... --> Generator:"Schema to JAXB Java Classes"。

我刚刚遇到了同样的问题，我有一堆`xsd`文件，其中只有一个是`XML Root Element`，它运行良好，正如我在 Eclipse 中解释的那样

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-07-13T02:24:02.683

您可以从[http://jaxb.java.net/2.2.5/](http://jaxb.java.net/2.2.5/)下载 JAXB jar 文件 您不需要安装任何东西，只需调用 xjc 命令并使用指向下载的 JAXB jar 文件的类路径参数。

# variables - 'let' 或 'letrec' 和 'define' 用于创建本地绑定有什么区别？

> ID：11463232
> 
> 赞同：5
> 
> 时间：2012-07-13T02:15:17.117
> 
> 标签：variables, scope, scheme, letrec

我不明白两者之间的区别是什么（对于人为的例子感到抱歉）：

```
(define average
  (lambda (elems)

   (define length
     (lambda (xs)
      (if (null? xs)
          0
          (+ 1 (length (cdr xs))))))

   (define sum
     (lambda (xs)
      (if (null? xs)
          0
          (+ (car xs) (sum (cdr xs))))))

   (define total (sum elems))

   (define count (length elems))

   (/ total count))) 
```

和

```
(define average
  (lambda (elems)
   (letrec ((length
              (lambda (xs)
               (if (null? xs)
                   0
                   (+ 1 (length (cdr xs))))))

            (sum
              (lambda (xs)
               (if (null? xs)
                   0
                   (+ (car xs) (sum (cdr xs))))))

            (total (sum elems))

            (count (length elems)))

     (/ total count)))) 
```

据我所知，它们都创建了一个新的作用域，并在该作用域中创建了 4 个局部变量，它们相互引用并引用自身，并评估并返回一个主体。

我在这里遗漏了什么，还是与 scoped s`letrec`同义？`define`

*我知道这可能取决于实现；我试图了解 Lisps 的基础知识。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T02:51:36.783

您是正确的，您的代码的版本`define`和版本之间存在相似之处。`letrec`然而，魔鬼在细节中。在 R5RS 中，[内部`define`有`letrec`语义](http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-8.html#%_sec_5.2.2)。在 R6RS 中，[内部`define`有`letrec*`语义](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-14.html#node_sec_11.3)。

有什么不同？您的代码实际上只是突出了这种差异。正如哲豪的回答所提到的，您对`total`and`count`内部的定义`letrec`与`length`and`sum`是不正确的：`length`并且`sum`不能保证在您评估`(length elems)`and的值时受到约束`(sum elems)`，因为不能保证这些变量的绑定是左-向右。

`letrec*`类似于`letrec`，但具有从左到右的保证。因此，如果您将其更改`letrec`为`letrec*`，就可以了。

现在，回到我最初的评论：因为 R5RS 的内部`define`使用`letrec`语义，即使您`define`的代码版本在 R5RS 实现下也是不正确的，但在具有`letrec*`语义的 R6RS 实现下会没问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T02:31:21.643

let/letrec 和 define 都将创建本地范围的定义。但是，当您不在内部时，let/letrec 会更方便，并且隐式 begin 语句。例如，以下代码使用 let 宏。

```
(define (test) (let ((x 1)) x)) 
```

使用本地范围定义的相同代码将是

```
(define test (lambda () (define x 1) x)) 
```

这是一个人为的例子，但通常使用 let 宏进行本地绑定被认为更实用。

此外，您的示例代码没有正确使用 letrec。您不需要 letrec 声明中的定义（实际上它们确实不应该存在）。

# android - 为 FrameLayout 内的空 ListView 显示 TextView

> ID：11463234
> 
> 赞同：0
> 
> 时间：2012-07-13T02:16:11.637
> 
> 标签：android, android-listview

我有一个选项卡式布局和一个使用选项卡作为视图的活动。它具有三个选项卡作为`ListViews`. 如果其中一个列表为空，我想显示一个简单的`TextView`。我浏览过很多帖子，但所有帖子都在谈论`ListView`一个`LinearLayout`. 我不确定它是否因为多个`ListViews`or而不工作`FrameLayout`。我们不能在 a中设置**visibility = GONE**`FrameLayout`吗？因为即使那样`TextView`总是与 一起显示`ListView`。谁能建议在这种情况下可以做什么？

我还尝试包含`TextView`在另一个 xml 文件中。但我不确定如何将其添加`TextView`到我的`FrameLayout`.

这就是我为三个人所做的`ListViews`

```
TextView empty = (TextView) findViewById(R.id.blank);
FrameLayout frameLayout = (FrameLayout) findViewById(android.R.id.tabcontent);

mListView_top10 = (ListView)findViewById(R.id.Top_10);
if(TopWR.size()!=0) {
      mListView_top10.setAdapter(new ArrayAdapter<String>(this, R.layout.listview_row,TopWR));
} else {
  frameLayout.addView(empty);
} 
```

框架布局

```
<FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"        
        android:background="@drawable/innerdashboard_bg"
        android:layout_weight="1">

            <ListView 
            android:id="@+id/Top_10"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:paddingRight="5dp" 
            android:text="this is a tab" />

        <ListView 
            android:id="@+id/Billable"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            android:paddingRight="5dp" 
            android:text="this is another tab" />

        <ListView
            android:id="@+id/Product"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            android:paddingRight="5dp"
            android:textSize="14sp"
            android:text="this is a third tab" />

 </FrameLayout> 
```

文本视图

```
<TextView  xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/blank"
            android:gravity="center"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="No records Avaible"
            android:textColor="#ffffff" /> 
```

**编辑**

我也试过使用`setEmptyView`, 对于所有三个`ListViews`使用单独的空视图，不起作用！

```
TextView empty1 = (TextView) findViewById(R.id.blank1);
mListView_top10 = (ListView)findViewById(R.id.Top_10);
mListView_top10.setEmptyView(empty1);
mListView_top10.setAdapter(new ArrayAdapter<String>(this, R.layout.listview_row,TopWR)); 
```

xml:

```
<FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/innerdashboard_bg"
        android:layout_weight="1">

        <LinearLayout 
            android:id="@+id/Top_10"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">

            <ListView 
            android:id="@+id/Top_10"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:paddingRight="5dp" 
            android:text="this is a tab" />

            <TextView  
            android:id="@+id/blank1"
            android:gravity="center"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="No records Avaible"
            android:textColor="#ffffff" />

        </LinearLayout>

        <LinearLayout 
            android:id="@+id/Billable"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">

        <ListView 
            android:id="@+id/Billable"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            android:paddingRight="5dp" 
            android:text="this is another tab" />

        <TextView  
            android:id="@+id/blank2"
            android:gravity="center"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="No records Avaible"
            android:textColor="#ffffff" />

        </LinearLayout>

        <LinearLayout 
            android:id="@+id/Product"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">

        <ListView
            android:id="@+id/Product"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            android:paddingRight="5dp"
            android:textSize="14sp"
            android:text="this is a third tab" />

        <TextView  
            android:id="@+id/blank3"
            android:gravity="center"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="No records Avaible"
            android:textColor="#ffffff" />

        </LinearLayout>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T02:51:22.540

只需调用[`setEmptyView(...)`](http://developer.android.com/reference/android/widget/AdapterView.html#setEmptyView%28android.view.View%29)您的`ListView`，传入`TextView`as 参数即可。

```
TextView empty = (TextView) findViewById(R.id.blank);
mListView_top10.setEmptyView(empty); 
```

`ListView`应该自动处理切换“空”视图的可见性。

提示：由于参数是通用的`View`，您可以传入 的任何子类`View`，或更复杂的视图层次结构。

附带说明：您可能必须将每个`ListView`实例`TextView`作为空视图提供给每个实例，以避免发生冲突的场景；例如，当一个列表确实有内容，而另一个没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T04:25:04.260

我会坚持你在`ViewStub`这里使用`ListView`FrameLayout。当您的 ListView 有您可以使用的数据时`VIEW.GONE`，`ViewStub`如果您的 ListView 没有数据，则`VIEW.VISIBLE`用于 ViewStub。您可以从中下载示例[`github`](https://github.com/lalit3686/ListViewEmpty)并使其正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T01:00:50.797

您可以通过在列表为空时添加一个空项目来解决此问题。以下示例基于您的预编辑代码：

```
FrameLayout frameLayout = (FrameLayout) findViewById(android.R.id.tabcontent);

mListView_top10 = (ListView)findViewById(R.id.Top_10);
if (TopWR.size() == 0) {
  // add a single item to the array, in order to indicate the list is empty
  TopWR.add("The List Is Empty");
}
mListView_top10.setAdapter(new ArrayAdapter<String>(this, R.layout.listview_row,TopWR)); 
```

如果您想更了解空列表的显示方式，可以将 ArrayAdapter 替换为自定义适配器。当列表为空时，您还可以使用不同的适配器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T02:55:54.227

您是否尝试过在您的 java 代码中为每个 ListView 设置 Visibility？

```
TextView empty = (TextView) findViewById(R.id.blank);
FrameLayout frameLayout = (FrameLayout) findViewById(android.R.id.tabcontent);

mListView_top10 = (ListView)findViewById(R.id.Top_10);
      if(TopWR.size()!=0) {
          mListView_top10.setVisibility(View.VISIBLE);
          mListView_top10.setAdapter(new ArrayAdapter<String>(this,
                    R.layout.listview_row,TopWR));

      }
      else {
          mListView_top10.setVisibility(View.GONE);
          empty.setVisibility(View.VISIBLE);
          frameLayout.addView(empty);

      } 
```

文本视图

```
<TextView  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/blank"
        android:visibility="gone"
        android:gravity="center"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="No records Avaible"
        android:textColor="#ffffff" /> 
```

# python - Python遍历字符

> ID：11463237
> 
> 赞同：5
> 
> 时间：2012-07-13T02:16:33.703
> 
> 标签：python, string, list, character, loops

我一直在尝试使用中值字符串搜索 ACGT 基因组中的序列。我遇到的问题是要说 AAAAAAAA 到 AAAAAAAC 等等，直到我尝试了所有可能的组合。

通过创建两个列表，一个包含 A、C、G、T 和另一个包含 8 个字符序列，并且在每次搜索之后迭代和交换字符，我基本上一直在使用蛮力。问题是我没有测试所有组合，因为当两个同时迭代时它会跳过一个字母。

有什么办法可以轻松完成 AAAAAAAA - AAAAAAAC - AAAAAAAG - AAAAAAAT - AAAAAACA 等等？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T02:19:31.657

使用[`itertools`](http://docs.python.org/library/itertools.html)

```
itertools.product("ACGT", repeat=8) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T02:24:53.193

如上建议使用 itertools，

```
itertools.product("ACGT", repeat=8) # will work in your case. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T05:13:13.893

使用pyparsing wiki 示例页面中的[正则表达式逆变器](http://pyparsing.wikispaces.com/file/view/invRegex.py)`[ACGT]{8}`，反转此正则表达式： . 您也可以[在 UtilityMill 尝试在线逆变器](http://utilitymill.com/utility/Regex_inverter)，但是此服务器在生成 8 个字符的字符串时会超时，但我在允许的时间内成功获取了最多 6 个字符。

# java - 在 Eclipse 视图插件中构建搜索栏

> ID：11463238
> 
> 赞同：1
> 
> 时间：2012-07-13T02:16:36.267
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我正在寻找一些关于如何在现有视图 Eclipse 插件之上构建搜索栏的想法/资源。我想要类似于 eclipse 中的任务列表视图的东西：

[http://help.targetprocess.com/images/integration_api/eclipse3.png?1337868355](http://help.targetprocess.com/images/integration_api/eclipse3.png?1337868355)

我想要构建的视图只是一个简单的对象列表，基本上与 eclipse PDE 提供的简单视图教程完全一样。没什么复杂的。

我四处搜索，似乎没有太多关于这方面的信息。如果有人能给我一些关于如何开始的指导，那就太好了。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T05:11:14.287

您想创建一个具有[SEARCH](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/SWT.html#SEARCH)样式的[SWT Text 组件](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Text.html)。有一个[SWT 片段](http://dev.eclipse.org/viewcvs/viewvc.cgi/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet309.java?view=co)显示了适用的样式组合。这为您提供了带有图标和一些消息的输入字段，但您仍然必须自己在列表上实现必要的过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T03:12:45.150

我认为你不会找到任何关于这样做的文章，因为它的级别很低。我要做的只是查看具有您想要的东西的源代码。您可以随意窃取它（前提是您遵守 EPL 规则）。

# excel - 通过 VBA 检索邮件的现有详细信息

> ID：11463240
> 
> 赞同：0
> 
> 时间：2012-07-13T02:16:47.193
> 
> 标签：excel, vba, outlook

我一直在 VBA 中使用以下代码来获取邮件内容，但我无法获取所有详细信息。

您能帮我获取所有字段（邮件内容等）吗？

```
With OutlookMAPIFolder.Items(i)
  Range("A" & Trim(Str(RowValue))).Select
  ActiveCell.FormulaR1C1 = RowValue - 1
  Range("B" & Trim(Str(RowValue))).Select
  ActiveCell.FormulaR1C1 = Format(.ReceivedTime, "DD/MM/YYYY HH:MM:SS")
  Range("C" & Trim(Str(RowValue))).Select
  ActiveCell.FormulaR1C1 = .Subject
  Range("D" & Trim(Str(RowValue))).Select
  ActiveCell.FormulaR1C1 = .Sender
End With 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:56:25.413

这是基于您提出的问题类型的通用提示：

初始化 OUTlookMAPIFolder 后，在代码中的任意位置添加断点。在 VBA IDE 中，查看并显示 Locals 窗口。当代码到达断点时，导航到本地窗口中的对象。您可以使用 + 号展开并查看其所有属性及其值。从那里，您应该能够确定如何从项目中引用您想要的信息。

# c# - 具有不同 TargetElapsedTime 的 XNA 高 CPU 使用率

> ID：11463242
> 
> 赞同：1
> 
> 时间：2012-07-13T02:16:58.913
> 
> 标签：c#, windows, xna, cpu, frame-rate

使用相同的代码，我有：

5-10% 的 CPU 使用率`IsFixedTimeStep = true`和`TargetElapsedTime = TimeSpan.FromSeconds(1 / 60f)`

50-60% CPU 使用率`IsFixedTimeStep = true`和`TargetElapsedTime = TimeSpan.FromSeconds(1 / 30f)`

通过降低帧速率，人们应该会期望更少的 CPU 使用率。我尝试过不同的代码，结果相似。有人知道原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:32:14.417

如果我不得不猜测（我必须猜测，因为您提供的信息很少），我会说这是 GPU 和 CPU 之间的交互。

看看[这篇博文](http://blogs.msdn.com/b/shawnhar/archive/2008/03/31/an-elf-in-a-box.aspx)。

基本上，在 60 FPS 时，您可能受到 GPU 限制。CPU 处于空闲状态，等待 GPU 在开始绘制另一帧之前绘制一帧。您可能正在丢帧。

在 30 FPS 时，GPU 能够跟上，因此 CPU 必须更频繁地发送帧。

但是，这只是一个猜测。您必须检测您的代码以正确检查这些内容。

# outlook - Outlook 的脚本规则

> ID：11463249
> 
> 赞同：2
> 
> 时间：2012-07-13T02:18:03.200
> 
> 标签：outlook

我有一系列的前景规则，我需要每周为一群人自动更新。我知道我可以导出和导入它们，但我正在寻找某个地方来定义它们并将它们部署在某种代码脚本中。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:25:15.850

您有 (3) 个选项来管理**邮箱规则**：

1.  [**Outlook 插件**](http://msdn.microsoft.com/en-us/library/ff860622)支持最常见的规则。（*客户端或服务器规则*）
2.  [**Exchange 命令行管理程序**](http://www.msexchange.org/articles_tutorials/exchange-server-2010/management-administration/managing-inbox-rules-exchange-server-2010.html)（*仅限服务器端规则*）
3.  [**EWS 托管 API**](http://msdn.microsoft.com/en-us/library/ff597937%28v=exchg.80%29)（*仅限服务器端规则*）

# php - 如何将此组件的布局获取到joomla中的其他组件

> ID：11463257
> 
> 赞同：2
> 
> 时间：2012-07-13T02:19:03.980
> 
> 标签：php, joomla, joomla2.5

我有一个示例文件：

```
/components/com_test/views/test/tmpl/abc.php 
```

和

```
/components/com_content/views/article/tmpl/default.php 
```

在`default.php of com_content`我使用 com_test 的代码调用布局

```
...
<?php 
require('index.php?option=com_test&view=test&tmpl=component&layout=abc'); 
?> 
... 
```

但结果在 com_content 中没有显示布局 abc，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T02:31:47.480

在 v2.5 中没有直接处理，但下面的代码在 Joomla 早期的 MVC 中有效：

**`view.html.php`**

```
class myComponentViewmyModel extends JView
{
    function display($tpl = null)
    {
    global $mainframe;
    if($this->getLayout() == 'abc') {
        $this->_displayAbc($tpl);
        return;
    }
.
.
.

function _displayAbc($tpl)
{
   global $mainframe;
   .
   .
   .
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T02:42:21.833

我有一个想法是你可以使用 iframe：

```
JHTML::_('behavior.modal', 'a.modal');
<a class="modal" rel="{handler: 'iframe', size: {x: 500, y: 400}}" href="index.php?option=com_test&view=test&tmpl=component&layout=abc">Test</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:17:26.497

您正在传递一个 URL 作为 require 的参数。该函数需要一个路径，而不是 URL。

相反，您应该这样做：

```
<?php 
  require(JPATH_SITE.DS.'components'.DS.'com_test'.DS.
          'views'.DS.'test'.DS.'tmpl'.DS.'abc.php'); 
?> 
```

# solr - Solr排序、precisionStep和内存使用

> ID：11463264
> 
> 赞同：3
> 
> 时间：2012-07-13T02:19:43.700
> 
> 标签：solr, lucene

我们目前有一个 Solr 实例，其中包含大约 5000 万个文档。有一个`long`字段是我们经常排序的，使用标准`long`字段类型，a`precisionStep`为零：

```
<fieldType name="long" class="solr.TrieLongField" precisionStep="0" omitNorms="true" positionIncrementGap="0"/>
<field name="row" type="long" indexed="true" stored="true" /> 
```

在进行排序时，需要将索引加载到内存中。在我们的例子中，值范围很大`row`，我们需要 500m 到 1g 的堆来进行排序。

我想知道是否可以以某种方式减少这种内存使用要求。

增加字段`precisionStep`的`row`值会减小索引大小，从而减少排序所需的内存量吗？这样做对分拣速度有权衡吗？并且使用更高精度的步长排序是否仍然完全正确（行值必须严格按顺序排列）？

1GB 的堆现在是可以接受的，但我有点担心如果我们添加更多具有更多`row`值的文档，那么内存要求会变得太高。

* * *

（在 jpountz 的回答之后添加）

虽然目前这适合内存，但它不会随着我们预计在未来几个月内添加的文档数量而扩展。我们可能会从 Solr 获得未排序的结果，并使用基于磁盘的[java-merge-sort](https://github.com/cowtowncoder/java-merge-sort)在客户端对它们进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:15:37.563

该`precisionStep`参数仅与范围查询相关。要执行排序，Lucene 需要在`field cache`. 长为 8 个字节，您的字段的字段缓存应该需要大约 8B * 50M ~ 400 MB。如果你真的需要一个 long 这个字段，没有办法减少内存使用（另一方面，使用 int 只需要 ~200MB）。

# wcf - Microsoft 是否在其产品中使用 WCF 或 EF？

> ID：11463267
> 
> 赞同：3
> 
> 时间：2012-07-13T02:20:00.607
> 
> 标签：wcf, entity-framework

我没有在我的产品中使用 WCF，因为它不够实时，我们必须结合 WCF + WCF 数据服务，这有点令人费解。我想知道 MS 是否真的将他们的技术用于他们的产品。谁能指出至少一个使用 WCF 或 EF 相关的微软产品。我很清楚，如果他们不使用这项技术，这项技术很快就会消失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T08:42:08.163

WCF 是许多 MS 产品的核心功能，包括：

*   Microsoft Dynamics 产品套件（CRM、NAV）
*   Microsoft SharePoint Server 和 Project Server
*   Microsoft BizTalk 和主机集成服务器 - WCF 用于公开功能，并且有多个企业适配器用于非 MS 产品，如 IBM WebSphere MQ、Tibco EMS、Tibco Randezvous 或基于 WCF 的 Oracle 数据库
*   WCF 也可用于与 Microsoft Exchange 通信，但我不确定 Exchange 是否直接公开 WCF 服务而不是旧的 ASMX。
*   您还可以使用 WCF 与 SQL Server Broker 进行通信（但您需要一个通道）。

实体框架是另一回事——我认为它没有用于任何 Microsoft Server 产品。实体框架应该用于必须快速交付的网站和业务级应用程序。EF 现在属于直接针对自定义开发的 ASP.NET MVC / Azure 产品系列。Azure 也用于 MS 服务器产品的 SAAS 部署，但这是一个单独的区域。

提到的 MS 产品通过额外的 API 来实现性能、可扩展性和可扩展性 - 因为它们通常构建适合其需求的抽象或直接使用数据库（包括直接在数据库中实现的大量逻辑）。

# java - Java函数注解帮助，使用@Deprecated？

> ID：11463271
> 
> 赞同：29
> 
> 时间：2012-07-13T02:20:46.430
> 
> 标签：java, annotations

**场景：**
Java 1.6

```
class Animal { 
    private String name; 
    ...  
    public String getName() { return name; }  
    ...
}

class CatDog extends Animal {
    private String dogName;
    private String catName;
    ...
    public String getDogName() { return dogName; }
    public String getCatName() { return catName; }
    public String[] getNames() { return new String[]{ catName, dogName }; }
    ...
    public String getName() { return "ERROR! DO NOT USE ME"; }
} 
```

**问题：**
getName 没有意义，不应在本例中使用。我正在阅读 @Deprecated 注释。有没有更合适的注解方式？

**问题：**
A) 使用此函数时（运行时之前）是否可以强制出错？
B）有没有办法为我将使用的注释方法显示自定义的警告/错误消息？理想情况下，当用户将鼠标悬停在已弃用/错误功能上时。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-07-13T02:37:16.130

通常，您将 @Deprecated 用于已被较新版本的软件过时的方法，但您保留这些方法是为了与依赖于旧版本的代码的 API 兼容性。我不确定它是否正是在这种情况下使用的最佳标记，因为 getName 的其他子类仍在积极使用`Animal`它，但它肯定会提醒`CatDog`该类的用户他们不应该调用该方法。

如果您想在使用该函数时在编译时导致错误，您可以更改编译器选项以将 @Deprecated 方法的使用视为错误而不是警告。当然，您不能保证使用您的库的每个人都会设置此选项，而且我不知道仅根据语言规范强制编译错误。从中删除该方法`CatDog`仍将允许客户端调用它，因为客户端只会从超类调用默认实现`Animal`（可能您仍希望包含该方法）。

但是，当用户将鼠标悬停在已弃用的方法上时，当然可以显示自定义消息。Javadoc @deprecated 标记允许您指定一个方法为什么被弃用的解释，当用户将鼠标悬停在像 Eclipse 这样的 IDE 中的方法上时，它将弹出而不是通常的方法描述。它看起来像这样：

```
/**
 * 
 * @deprecated Do not use this method!
 */
 @Deprecated
 public String getName() {
     throw new UnsupportedOperationException();
 } 
```

（请注意，您可以使方法的实现抛出异常，以保证如果用户在编译时没有注意到 @Deprecated 标记，他们肯定会在运行时注意到它）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-13T02:25:47.507

弃用意味着不应再使用该方法，并且可能会在将来的版本中将其删除。基本上正是你想要的。

是的，当有人尝试使用该方法时，有一种非常简单的方法可以得到编译错误：删除该方法 - 这将导致任何尝试使用它的代码在链接时出错，通常不推荐出于明显的原因，但如果有一个很好的理由来打破向后兼容性，这是实现它的最简单方法。您也可以使方法签名不兼容（总是可能的），但实际上最简单的解决方案通常是最好的。

如果您在有人将鼠标悬停在该方法上时想要自定义消息，请使用 javadoc，这正是它的用途：

```
/**
     * @deprecated
     * explanation of why function was deprecated, if possible include what 
     * should be used.
     */ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-09T09:52:43.057

重构我们的 User 类后，我们无法删除`userGuid`属性，因为它已被移动应用程序使用。因此，我将其标记为已弃用。好消息是 IntellijIdea 等开发工具可以识别并显示消息。

```
public User {
    ...

    /**
     * @Deprecated userGuid equals to guid but SLB mobile app is using user_guid.
     * This is going to be removed in the future.
     */
    @Deprecated
    public String getUserGuid() {
        return guid;
    }
} 
```

[![在此处输入图像描述](../Images/fa91545854359749ce146c30964fdf01.png)](https://i.stack.imgur.com/squO0.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-13T03:13:18.880

弃用是要走的路...您还可以将编译器配置为将某些事情标记为错误而不是警告，但正如爱德华指出的那样，您通常不推荐使用方法，这样您就不必完全清理此时所有对它的引用。

在 Eclipse 中，要配置错误和警告，请转到 Window -> Preferences。在 Java -> Compiler -> Errors/Warnings 下，您将看到 Deprecated APIs 部分。您可以选择指示编译器在不推荐使用方法时忽略、警告或出错。当然，如果您与其他开发人员一起工作，他们将不得不以相同的方式配置他们的编译器。

# css - SVG 作为数据 URI 不呈现

> ID：11463276
> 
> 赞同：2
> 
> 时间：2012-07-13T02:21:05.937
> 
> 标签：css, svg, data-uri

这可能只是一个语法错误，但我找不到关于这种用法的任何详尽参考。Chrome 过度使用了我的背景属性，所以我显然得罪了一些东西。

[http://jsfiddle.net/YbA39/2/](http://jsfiddle.net/YbA39/2/)

我希望红色框中的内容（一个 svg css 背景）像 html 中的内联 svg 一样呈现。很简单，对吧？

别说做不到！我的灵感是这样的：http: [//jsfiddle.net/estelle/SJjJb/](http://jsfiddle.net/estelle/SJjJb/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T09:05:00.987

您没有在 url() 语法中转义 '#' 字符。它是“viewbox”而不是“viewbox”。

这是有效的方法：http: [//jsfiddle.net/YbA39/3/](http://jsfiddle.net/YbA39/3/)（只是一个快速转义字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:57:47.537

声明中的换行符打破了它。删除所有换行符可以修复除 IE 之外的所有问题，IE 需要 base64 或 URI 编码：

[http://jsfiddle.net/YbA39/4/](http://jsfiddle.net/YbA39/4/)

# ruby - 如何在 Ruby 中分析垃圾收集

> ID：11463277
> 
> 赞同：5
> 
> 时间：2012-07-13T02:21:23.340
> 
> 标签：ruby, garbage-collection, profiling, yarv

我正在尝试在非 Rails 应用程序中分析 GC，最好使用 YARV Ruby。

perftools.rb 告诉我，我的大部分 CPU 时间都花在了garbage_collector (6061 (61.4%)) 上。

我还可以使用 perftools.rb 获取哪些方法创建了多少对象。有些方法比其他方法创建更多的对象，但它并没有极度倾斜。

我从这里去哪里？是否有可能获得有关为什么要花这么多时间进行 GC 的更详细信息？是否可以查看是否花费了时间来摆脱对象，或者是否花费了检查对象是否应该被垃圾收集？

我可以访问 OS X Lion、Windows 7 和 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:41:55.690

在 osx 上你有 dtrace。YARV ruby​​ 中有 dtrace 提供程序。

您可以使用几个与 GC 相关的探针：

gc-begin gc-end gc-mark-begin gc-mark-end gc-sweep-begin gc-sweep-end

我认为他们可以帮助您找到程序中的 GC 正在做什么。查看此文件以了解如何使用它们：[https](https://github.com/tenderlove/ruby/blob/probes/test/dtrace/test_gc.rb) ://github.com/tenderlove/ruby/blob/probes/test/dtrace/test_gc.rb 。

而这篇文章的更多解释：[http ://tenderlovemaking.com/2011/06/29/i-want-dtrace-probes-in-ruby.html](http://tenderlovemaking.com/2011/06/29/i-want-dtrace-probes-in-ruby.html)

在 ruby[​​ http://bugs.ruby-lang.org/issues/2565](http://bugs.ruby-lang.org/issues/2565)中打开了一个错误，您可以在其中找到适用于 ruby​​ 的补丁以进行这些探测，或者您可以使用[https://github.com/tenderlove/ruby /tree/probes](https://github.com/tenderlove/ruby/tree/probes)已应用补丁的位置。

希望这可以帮助

# linux - 管道 tar 提取到 tar 创建

> ID：11463279
> 
> 赞同：5
> 
> 时间：2012-07-13T02:21:47.950
> 
> 标签：linux, gzip, pipe, command-line-arguments, tar

我现在有一个 tar.gz，我只想从中提取一两个文件，然后将它们打包/添加到一个新的 tar.gz 中，一次完成。当然，我可以只保存到一个临时文件并使用它，但绝对要求是在没有任何中间文件输出（即管道）的情况下完成这一切。换句话说，我想要的是类似下面的伪代码（显然语法不正确）

```
tar -xvf first.tar.gz subdir1/file1 subdir2/file2 | tar cf - | gzip > second.tar.gz 
```

有谁知道这个的正确语法？我尝试了许多变体，但无济于事。

我也对使用 cpio 的想法持开放态度，但我再次对如何正确降低语法感到困惑，据我所知，cpio 只接收档案或文件名，而不是文件。

任何帮助将不胜感激。

编辑： tarball 中没有特定的文件名模式可供提取。鉴于 BSD 和 GNU tar 一次只能搜索一种模式，我不确定是否可以分别使用包含/排除标志。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T02:50:27.730

我假设您正在使用或者您可以获得[GNU tar](http://www.gnu.org/software/tar/)。

您可以使用该`--delete`选项将一个 tar 文件处理为另一个。例如：

```
% tar cf x.tar a b c d
% tar tf x.tar
a
b
c
d
% cat x.tar | tar f - --delete b c > y.tar
% tar tf y.tar
a
d
% 
```

请注意，您可以指定多个要删除的名称。然后，您只需要弄清楚如何在命令行上指定要删除的所有文件，而不是要保留的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T03:18:37.537

如果您知道要提取的文件名模式，请尝试以下操作：

```
tar zcf second.tar.gz --include='filepattern' @first.tar.gz 
```

这是一个显示包含多个文件的示例：

```
% tar cf x.tar a b c d
% tar tf x.tar
a
b
c
d
% cat x.tar | tar cf - --include='a' --include='d' @- > y.tar
% tar tf y.tar
a
d
% 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-16T22:58:08.283

上述解决方案都不适合我，tar 抱怨创建一个空存档

相反，我只是使用 &&：

```
tar -xf first.tar.gz subdir1/file1 subdir2/file2 && tar -cvf second.tar --remove-files subdir1/file1 subdir2/file2 
```

其中 --remove-files 是添加到存档后删除文件的选项。

我发现的另一种方法是：

```
tar -cf second.tar `tar -tf first.tar.gz /desired/directory` 
```

请注意，保留整个目录上下文，因此 /desired/directory 仍在新的 tar 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T02:44:10.697

解压时，tar 通常将解压后的文件写入磁盘，而不是输出流。您可以使用 -O 或 --to-stdout 将文件写入标准输出，但文件之间不会有中断，也不会以任何方式知道一个结束和另一个开始的时间。

另外，tar 的 create 选项只能从磁盘读取文件，不能从标准输入读取文件。这是有道理的，因为前面提到的知道一个文件何时结束而另一个文件何时开始的问题。

这意味着无法以您想要的方式从命令行执行此操作。

但是，我敢打赌，您可以使用可以在内存中严格操作的库来编写 perl 或 python 脚本。

# java - 在 Java 中处理字符串的最佳方法

> ID：11463280
> 
> 赞同：1
> 
> 时间：2012-07-13T02:21:56.273
> 
> 标签：java, string, parsing

我想使用文本文件制作一个生命游戏克隆来指定我的起始板，然后将完成的板以类似格式写入一个新的文本文件。例如加载这个：

登机：

```
bbbbw
bbbb
万维网
wbwbw
bwbwb

```

从文件中，然后输出如下内容：

登机：

```
bbbbw
bbbb
万维网
万维网
bwbwb

```

为此，我创建了一个字符的二维数组 ( `char[][] board`)，将文件逐行读取为字符串，然后使用`String.charAt()`来访问每个字符并将其存储在数组中。

之后，我使用 将 board 的每个元素（即 、`board[0]`等`board[1]`）转换回字符串`String.valueOf()`，并将其写入第二个文件中的新行。

请告诉我，我这样做是个白痴，并且有更好的方法来遍历文件-> 字符串-> 数组-> 字符串-> 文件进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:27:17.297

```
// Remember to handle whitespace chars in array
char[] row = "wbbbw bbbbb wwwww wbwbw bwbwb".toCharArray() 
```

其他一切似乎都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:30:08.107

为什么不使用现有的文本格式（例如 JSON）而不是自己发明呢？

有大量的 JSON 解析器可以读取和写入二维数组。

您可以获得直接从文件中轻松读取的好处（与您的原始方法一样）以及不必解析烦人的字符串格式的好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T02:40:03.740

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;

public class GameOfLife
{
    private String mFilename;
    private ArrayList<String> mLines;

    public GameOfLife(String filename)
    {
        mFilename = filename;
        read();
    }

    public char get(int x, int y)
    {
        String line = mLines.get(y);
        return line.charAt(x);
    }

    public void set(char c, int x, int y)
    {
        String line = mLines.get(y);
        String replacement = line.substring(0, x) + c + line.substring(x + 1, line.length());
        mLines.set(y, replacement);
    }

    private void read()
    {
        mLines = new ArrayList<String>();

        try
        {
            BufferedReader in = new BufferedReader(new FileReader(mFilename));
            String line = in.readLine();

            while (line != null)
            {
                mLines.add(line);
                line = in.readLine();
            }
        }
        catch (FileNotFoundException e)
        {
            e.printStackTrace();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }

    private void write()
    {
        try
        {
            BufferedWriter out = new BufferedWriter(new FileWriter(mFilename));

            for (String line : mLines)
            {
                out.write(line + "\n");
            }
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T02:51:27.997

您可以`String.toCharArray()`在读取文件时使用每一行。

```
char[][] board = new char[5][];
int i = 0;
while((line = buffRdr.readLine()) != null) {
    board[i++] = line.toCharArray();
} 
```

在写`String.valueOf()`或时`java.util.Arrays.toString()`。

```
for(int i=0; i<board.length; i++) {
    //write Arrays.toString(board[i]);
} 
```

# windows - 两个页条目引用同一个物理页

> ID：11463282
> 
> 赞同：2
> 
> 时间：2012-07-13T02:21:56.720
> 
> 标签：windows, linux, mmap

对于linux和windows，在同一个进程中，如何让两个页条目引用同一个物理页？

对于windows，通过阅读MSDN，看起来我可以`CreateFileMapping`通过传递`INVALID_HANDLE_VALUE`来创建文件映射而无需文件支持。然后我可以`MapViewOfFileEx`用 different 调用两次`lpBaseAddress`，这实际上使两个不同的地址引用同一个物理地址。

我的问题是，如何在linux下做到这一点？我阅读了手册`mmap`，但没有找到方法，除非该区域由文件（带有标志`MAP_SHARED`）支持，但对该区域的修改将写入文件，这不是我想要的。有谁知道以某种方式做到这一点？我不反对文件支持，只要对该区域的写入实际上并未写入磁盘。使用`tmpfs`不是一个选项，因为我不能保证用户已`tmpfs`安装。

顺便说一句，代码应该是用户模式代码，而不是内核模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:01:08.787

用于`shm_open()`为`mmap()`.

“我想写一些模拟器”和我使用这个技巧时的目的相同。我确实使用了 ipc/shm，但我忘记了细节。非常非常非常可能：`shmget()+shmat()`

# .htaccess - htaccess 使用 /~ 阻止访问用户帐户

> ID：11463292
> 
> 赞同：0
> 
> 时间：2012-07-13T02:23:18.097
> 
> 标签：.htaccess, mod-rewrite

我收到了来自 Google 的电子邮件，说我的网站包含网络钓鱼内容。当我检查他们发送的 URL 时，它只是一个通过我的域访问另一个主机帐户的 URL。

```
Ex: domain.com/~username 
```

有没有办法防止这种情况使用 .htaccess 文件或任何其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:25:34.983

要禁用您所描述的功能（更好地称为），您可以在您的或您的*虚拟主机配置*`UserDir`中指定以下内容。`httpd.conf`

 *无法从内部更改此设置`.htaccess`。

```
UserDir disabled 
```

* * *

### 通过以下链接了解更多信息：

*   **[httpd.apache.org - 每个用户的 Web 目录 - 启用/禁用](http://httpd.apache.org/docs/2.0/howto/public_html.html#enable)**
*   **[httpd.apache.org - Apache 模块 mod_userdir](http://httpd.apache.org/docs/2.0/mod/mod_userdir.html#userdir)***

# drupal - 从 FTP Drupal 7 浏览并获取远程文件

> ID：11463294
> 
> 赞同：0
> 
> 时间：2012-07-13T02:23:41.180
> 
> 标签：drupal, ftp

我需要浏览并从远程服务器获取一些文件并下载到 Drupal 7 中的本地服务器。有人知道该怎么做吗？有什么模块可以使用吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T02:12:34.150

根据您的文件类型，您可以尝试[FileField Sources](http://drupal.org/project/filefield_sources/)模块。如果您想知道为什么我说“取决于字段类型”，那是因为 FileFields 仅适用于实体。对于站点徽标和其他自定义文件字段，您必须手动集成。

**但目前它无法通过 FTP 浏览远程服务器。您可以通过 cURL 浏览自己的服务器或远程服务器。**

# asp-classic - 经典 ASP 博客 - 如果找不到博客文章，如何进行 404 重定向

> ID：11463295
> 
> 赞同：3
> 
> 时间：2012-07-13T02:23:47.460
> 
> 标签：asp-classic, http-status-code-404

我的服务器配置为将所有 404 错误发送到自定义 404 错误页面 - 这对于拼错我的 URL 的人来说很好。如果他们没有拼错 URL，而是在 DB (rs.EOF) 中找不到该文章，因为它之前可能已被删除 - 处理它的最佳方法是什么？

目前，如果找不到记录/文章，它只会显示一条“找不到文章”的小消息，它不会重定向到任何地方。我现在很好奇这是否会导致 SEO 出现任何问题。我在想也许我的应用程序需要告诉 Google 该 URL 不再有效，对吗？

如果数据库中没有匹配的博客文章，我应该将用户重定向到我的 404 页面吗？如果是这样，我怎样才能做到这一点？是否带有自定义标题状态代码？还是我继续展示我的小信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T03:06:15.953

我相信 410 Gone 是一个不再存在的页面的正确重定向。我会重定向到一个友好的页面，向任何真实用户解释该信息不再可用。

当您看到文章已从数据库中删除时，使用一些代码重定向到该页面。

```
<%@ Language=VBScript %> 
<% 
Response.Status="410 Gone" 
Response.AddHeader "Location","http://www.url.com/article_is_gone.html" 
%> 
```

# android - 使用 LoaderManager 的多个加载器，没有得到正确的加载器

> ID：11463299
> 
> 赞同：5
> 
> 时间：2012-07-13T02:24:05.510
> 
> 标签：android, android-loadermanager, android-loader

我有两个加载器，一个用于填充绑定返回的数据到 2 `TextViews`，另一个用于填充`ListView`. 如何确保为每种情况加载正确的装载机？我在`WR_VIEW`似乎没有创建或加载第一个加载程序（案例）的位置出现错误，因此`onLoadFinished()`它返回“未找到此类列错误”，因为它正在访问不调用该列的第二个加载程序。

在我的`onCreate`方法中，我为列表视图设置了适配器：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.workouts_options);

    String[] uiBindFrom = { ExerciseTable.COLUMN_NAME };
    int[] uiBindTo = { R.id.text1 };

    SimpleCursorAdapter adapter = new SimpleCursorAdapter(
        getApplicationContext(), 
        R.layout.exercises_row, 
        null, 
        uiBindFrom, 
        uiBindTo,
        CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);    

    final ListView lv = (ListView) findViewById(android.R.id.list);

    lv.setAdapter(adapter);
    lv.setEmptyView(findViewById(android.R.id.empty));
    lv.setClickable(true);
    lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int position, long id) {
        }
    });

    getSupportLoaderManager().initLoader(WR_VIEW, null, this);
    getSupportLoaderManager().initLoader(EXERCISE_VIEW, null, this);
} 
```

创建我的 2 个不同`CursorLoader`的 s：

```
 public Loader<Cursor> onCreateLoader(int id, Bundle args) {         
        switch(id) {
            case WR_VIEW:
                String[] projection = { WorkoutRoutineTable.COLUMN_ID, WorkoutRoutineTable.COLUMN_NAME, WorkoutRoutineTable.COLUMN_DESCRIPTION };    
                return new CursorLoader(this, Workouts.buildWorkoutIdUri(""+mRowId), projection, null, null, null);
            default:
                String[] columns = {ExercisesColumns.NAME, WRExercisesColumns.COLUMN_ID };          
                return new CursorLoader(this, Workouts.buildWorkoutIdExerciseUri(""+mRowId), columns, null, null, null);
        }
    } 
```

将数据绑定到我的`TextViews`此处和：`swapCursor``ListView`

```
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
    int id = loader.getId();
    switch(id) {
        case WR_VIEW: 
            if (cursor != null && cursor.moveToFirst()) {
                mNameText.setText(cursor.getString(cursor.getColumnIndexOrThrow(WorkoutRoutineTable.COLUMN_NAME)));
                mDescriptionText.setText(cursor.getString(cursor.getColumnIndexOrThrow(WorkoutRoutineTable.COLUMN_DESCRIPTION)));

                getSupportActionBar().setTitle(mNameText.getText());
                if (!TextUtils.isEmpty(mDescriptionText.getText())) {
                    getSupportActionBar().setSubtitle(mDescriptionText.getText());
                }
                cursor.close(); 
            }
        default:
            adapter.swapCursor(cursor);
        }
    } 
```

重置加载器：

```
public void onLoaderReset(Loader<Cursor> loader) {
    int id = loader.getId();
    switch(id) {
        case WR_VIEW: 
            break;
        default:
            adapter.swapCursor(null);
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T02:35:51.860

在您`onLoadFinished()`的情况下，您没有`break`after WR_VIEW 情况，因此默认子句也正在运行，将错误的光标传递给您的适配器。（onCreateLoader 似乎也有类似的问题）

# facebook - 调用 Facebook php SDK 的 setAccessToken 后跟 getUser 失败

> ID：11463304
> 
> 赞同：1
> 
> 时间：2012-07-13T02:24:40.157
> 
> 标签：facebook, facebook-graph-api, ios5, ios4

我使用 facebook 的 IOS SDK 来获取用户访问令牌，然后将其发送到我的 Web 服务，然后在服务器端使用该令牌。

它将令牌传递给 Facebook PHP SDK 并调用 setAccessToken()。

之后，它尝试调用 getUser()，但 getUser 失败，就好像用户没有实际登录一样。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T09:52:39.653

如果您已经拥有不需要的访问令牌，`getUser()`并且您可以立即使用该`api()`方法.. 在您设置`setAccessToken()`课程之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:49:06.423

我有同样的问题，但使用 facebook php api。在 Apple 设备中，您不能设置第三方 cookie。您将不得不让用户与第三方进行交互。

看一下这个：

[Safari 3rd 方 cookie iframe 技巧不再有效？](https://stackoverflow.com/questions/9930671/safari-3rd-party-cookie-iframe-trick-no-longer-working)

希望这可以帮助。

# jquery - Jquery Mobile：如何在当前窗口上通过 ajax 在 div 中显示页面内容

> ID：11463305
> 
> 赞同：0
> 
> 时间：2012-07-13T02:24:41.327
> 
> 标签：jquery

我在我的页面上创建了一个 div，我想在这个 div 中加载一个新的“jquery 移动页面”内容，我绑定了 pagebeforechange 和 pagechange 事件但它不起作用。我该怎么办？无法显示两个“ jqm页面”同时在一个页面上？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:25:09.287

也许你可以用`$("#idOfDiv").load("pageUrl")`.

# c# - EF 5 - 传递的主键值的数量必须与实体上定义的主键值的数量相匹配

> ID：11463309
> 
> 赞同：5
> 
> 时间：2012-07-13T02:24:59.457
> 
> 标签：c#, entity-framework, entity-framework-4

我在使用 EF5 时遇到了此错误消息。想知道是否有人对此有答案。

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations.Schema;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Budget.Data
{

    [Table("BudgetItems")]
   public class BudgetItemRepository
    {
         [Column("MdaCode")]
        public int MDACode { get; set; }
        [Column("PersonalCost")]
        public double PersonnelCost { get; set; }
        [Column("OverheadCost")]
        public double OverheadCost { get; set; }
        [Column("RecurrentCost")]
        public int RecurrentCost { get; set; }
        [Column("CapitalCost")]
        public double Capital { get; set; }

        public double Allocation { get; set; }
        [Column("BudgetYear")]
        public String BudgetYear { get; set; }
         [Column("RecordCreatedDate")]
        public DateTime DateCreated { get; set; }
        [Column("RecordLastModifiedDate")]
        public DateTime LastModifiedDate { get; set; }

        public virtual IList<BudgetItemRepository> budgetitems { get; set; }

        public virtual IList<BudgetLineItemRepository> budgetlineitems { get; set; }
         [Column("BudgetItemID")]
        public int Id { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T03:15:24.163

您没有为实体声明主键。为此，您可以使用 [Key} 属性标记主键列。假设这是 Id 属性，代码如下所示：

```
[Column("BudgetItemID")]
[Key]
public int Id { get; set; } 
```

# ruby - 思考狮身人面像：“在测试环境中未找到排序属性`published_at`

> ID：11463310
> 
> 赞同：2
> 
> 时间：2012-07-13T02:25:03.307
> 
> 标签：ruby, ruby-on-rails-3, sphinx, thinking-sphinx

我收到错误`sort-by attribute 'published_at' not found`，但仅在测试环境中，即使在重建之后也是如此。

在模型中：

```
belongs_to :content, polymorphic: true
belongs_to :user

define_index do
  indexes user.name, as: :name
  has role
  has user_id
  has content_id
  has content.published_at, as: :published_at, type: :datetime
  has content.status, as: :status, type: :integer
end 
```

`rake ts:rebuild`在**开发**中运行正确构建索引：

```
# development.sphinx.conf
{
  [...]
  sql_attr_uint = sphinx_internal_id
  sql_attr_uint = sphinx_deleted
  sql_attr_uint = class_crc
  sql_attr_uint = role
  sql_attr_uint = user_id
  sql_attr_uint = content_id
  sql_attr_uint = status
  sql_attr_timestamp = published_at
  sql_attr_string = sphinx_internal_class
  [...]
} 
```

但是，运行`RAILS_ENV=test rake ts:config`或`ts:rebuild`测试环境会生成以下内容**：**

```
# test.sphinx.conf
{
  [...]
  sql_attr_uint = sphinx_internal_id
  sql_attr_uint = sphinx_deleted
  sql_attr_uint = class_crc
  sql_attr_uint = role
  sql_attr_uint = user_id
  sql_attr_uint = content_id
  sql_attr_string = sphinx_internal_class
  [...]
} 
```

这当然会导致**测试**环境出错：

```
ThinkingSphinx::SphinxError:
  index content_byline_core: sort-by attribute 'published_at' not found 
```

注意缺失`status`和`published_at`属性。这在过去的几个月里一直有效，但我不知道是什么导致它崩溃。

*   狮身人面像 2.0.2-beta
*   思考狮身人面像 2.0.12
*   导轨 3.2.6
*   红宝石 1.9.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T09:43:57.760

我在使用 Zeus 时遇到了类似的问题。rake 规范有效，但是当我使用 zeus 时，我收到了类似的消息，你知道吗？对我来说，删除 zeus 有帮助，但这只是部分解决方案......

# python - Python函数变量：本地和全局

> ID：11463311
> 
> 赞同：1
> 
> 时间：2012-07-13T02:25:03.423
> 
> 标签：python, function, global-variables, python-2.7, local-variables

我正在与局部和全局变量作斗争。

我正在这样做：

```
def SomeFunc(Input):
    if Input == 1:
        Input = "True"
    elif Input == 0:
        Input = "False"

RawInput=int(raw_input("Input 1 or 0: "))
SomeFunc(RawInput)
print str(RawInput) 
```

它表明了这一点：

```
>>> def SomeFunc(Input):
    if Input ==1:
        Input = "True"
    elif Input ==0:
        Input = "False"

>>> RawInput = int(raw_input("Input 1 or 0: "))
Input 1 or 0: 1
>>> SomeFunc(RawInput)
>>> print str(RawInput)
1 
```

我应该怎么做才能将输入转换为函数中的 str ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T02:29:17.280

输入是`int`一个不可变对象。换句话说，你不能在任何地方改变它。但是，您可以将其分配给其他东西。关于 python 的一个棘手的事情是知道*一切*都只是一个参考。当您分配给某物时，您只需更改参考。将您的变量视为进入框中的字符串。当您分配给一个变量时，您将该字符串放在一个特定的框中。当您将该变量分配给其他东西时，您会更改字符串所在的框。当然，当您实际进行添加时，您添加的是框的内容，而不是字符串（这有点令人困惑）。如果您习惯于使用 C 编程，那么这有点像一切都是自动取消引用的指针（除非您进行赋值）。

那么该怎么办？最简单的事情是`return`从你的函数中获得价值。

```
def some_func(inpt):
    if inpt == 1:
        return "True"
    elif inpt == 0:
        return "False"
    else:
        raise ValueError("WHAT IS THIS GARBAGE? I SAID 0 OR 1!!!!") # ;^) 
```

现在您可以将您的函数称为：

```
processed_input = some_func(rw_inpt) 
```

作为旁注，您的功能可以浓缩为：

```
def some_func(inpt):
    return str(bool(inpt)) 
```

或者

```
def some_func(inpt):
    return "True" if inpt else "False" 
```

这两个都通过（`"True"`如果用户输入任何非 0 的整数，则返回）。如果你真的想强迫用户不要输入像“2”这样的东西，你可以这样做：

```
def some_func(inpt):
    return {1:"True",0:"False"}[inpt] 
```

但是我不推荐那个...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T02:33:02.273

注意：您可以这样做：`print bool(int(raw_input("Input 1 or 0: ")))`

更pythonic的方式如下：

```
def some_func(x):
    if x == 1:
        return "True"
    elif x == 0:
        return "False"

x = int(raw_input("Input 1 or 0: "))
x = some_func(x)
print x 
```

但是，如果您确实想使用`global`s ，则可以这样做，但这确实很hacky，并且不是python提倡的良好编码实践之一。

```
def some_func():
    global x
    if x == 1:
        x = "True"
    elif x == 0:
        x = "False"

x = int(raw_input("Input 1 or 0: "))
some_func()
print x 
```

其他一些注意事项：尽量不要使用像 bultins 这样的名称，例如。`Input`而且`RawInput`因为它使事情变得不清楚并将一切都混淆了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T02:30:14.507

基本上，您希望参数是按引用传递的，但这不是 Python 对基本数据类型的工作方式。这样做的pythonic方式如下：

```
def some_func(input):
    if input == 1:
        return "True"
    elif input == 0:
        return "False" 
```

接着

```
raw_input = some_func(raw_input) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T02:29:30.593

> 我应该怎么做才能将输入转换为函数中的 str ？

```
def SomeFunc(Input):
    as_string = str(Input)
    if Input == '1':
        Input = "True"
    elif Input == '0':
        Input = "False" 
```

请注意，python 具有本机布尔类型，包括值`True`和`False`已经。您可以单独使用整数值`Input`作为条件。

# css - 如何通过 css 为我的文本设置不同的字体大小？

> ID：11463318
> 
> 赞同：2
> 
> 时间：2012-07-13T02:26:04.723
> 
> 标签：css, text, fonts

我的CSS代码是

```
#footer .right {
    font-weight: bold;
    color: #ffffff;
    margin: 0px auto;
    padding: 10px 0px 0px;
    float: right;
} 
```

文字是

```
<p class="right">Copyright &copy; 2012 SiteName. All Rights Reserved.<br />
         Powered By ScriptName</p> 
```

我需要设置：

“Copyright © 2012 SiteName。保留所有权利”的文本字体大小（12 像素）。

和“Powered By ScriptName”的文本字体大小（11px）

它应该看起来像那样

![在此处输入图像描述](../Images/2e5ea4a8089d9678baeca39039fe1568.png)

请问我该怎么做？

**更新**

感谢大家的有用帮助:)

致以我的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T02:29:38.773

使用跨度将是最简单的。像这样...

```
<p class="right">Copyright &copy; 2012 SiteName. All Rights Reserved.<br />
     <span class="small">Powered By ScriptName</span></p> 
```

和CSS

```
#footer .right {
font-size: 12px;
}

.small {
font-size: 11px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T02:31:49.507

每行使用两个不同的段落。给每个人自己的课。通过定位这些类来应用它们的特定样式。

将它们包装在一个 div 中并对其应用常用样式：

HTML

```
<div class="footerTxt">
    <p class="copyright">Copyright &copy; 2012 SiteName. All Rights Reserved.</p>
    <p class="poweredBy">Powered By ScriptName</p>
</div> 
```

CSS

```
.footerTxt {
    font-weight: bold;
    color: #ffffff;
    margin: 0px auto;
    padding: 10px 0px 0px;
    float: right;
}

.copyright {
    font-size: 12px;
}

.poweredBy {
    font-size: 11px
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T02:28:18.367

HTML：

```
<p class="right">Copyright &copy; 2012 SiteName. All Rights Reserved.<br />
<span>Powered By ScriptName</span></p> 
```

CSS：

```
#footer .right {
    ...
    font-size: 12px;
}

#footer .right span {
    font-size: 11px;
} 
```

示例：http: [//jsfiddle.net/4CpRk/](http://jsfiddle.net/4CpRk/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T02:38:13.997

为了让您的页脚看起来与您提供的图像相同，除了字体大小之外，还需要一些额外的样式，但是还需要包装第二行以便能够在 css 中引用它。这样做之后`<br />`就不再需要了。

这是示例

*   [http://jsfiddle.net/UmFkv/2/](http://jsfiddle.net/UmFkv/2/)

html:

```
<div id="footer">
    <p class="right">Copyright &copy; 2012 SiteName. All Rights Reserved.
         <span id="secondline">Powered By ScriptName<span>
   </p>
</div>​ 
```

CSS：

```
#footer {
background:#25B5EA;
    width: 421px;
    height: 46px;
    font-family:Verdana, Geneva, sans-serif; 
}
#footer .right {
    color: #ffffff;
    margin: 0px auto;
    padding: 7px 0px 0px;
    width: 330px;
    font-size: 12px;
    float: right;
    line-height: 16px;
}
#footer #secondline {
 font-size: 11px;   
} 
```

​</p>

# xcode4.2 - XCode Instruments 警告 - “task_for_pid 权限不足（LeakAgent）”

> ID：11463326
> 
> 赞同：4
> 
> 时间：2012-07-13T02:27:52.573
> 
> 标签：xcode4.2, ios-simulator, xcode-instruments, memory-leak-detector

在运行仪器时，我收到警告“任务_for_pid 权限不足（泄漏代理）”，之后仪器不显示泄漏的时间表

谁能指出我解决这个问题的正确方向？

我正在 iOS 模拟器 5.0 上为 iOS 3.0 构建，在 Xcode 4.2 上使用 Base SDK 5.1，没有任何代码签名

我的应用程序没有尝试访问功能 AFAIK 的任何授权服务，只是从应用程序包中读取一些信息并使用库 Cocos2d-X 将其解析为图形元素

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T02:54:10.470

我认为这`LeakAgent`是 Instruments 用于定期检查泄漏的过程。

当我第一次启动 Instruments 时，它要求我输入管理员密码。它问你了吗？

如果没有，您可以尝试重新启动计算机，或删除 Instruments 首选项 plist？`~Library/Preferences/com.apple.Instruments3.plist`（只是猜测它可能会重新提示管理员权限？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T13:10:51.137

@DouglasHeriot 的回答对我没有帮助。所以我刚刚`sudo`从 Terminal:启动了 Instrumets `sudo /Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/MacOS/Instruments`。
愿这对某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T09:51:57.200

我也遇到了同样的问题，我花了将近 2 天的时间解决了这个问题。终于得到了解决方案。确保您的配置文件方案处于 DEBUG 模式而不是 RELEASE。这将解决问题。

# java - 这是内存泄漏还是误报？

> ID：11463327
> 
> 赞同：45
> 
> 时间：2012-07-13T02:27:54.200
> 
> 标签：java, eclipse, memory-leaks, warnings

这是我的代码：

```
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.Scanner;

public class temp {
    public static void main(String[] args) throws FileNotFoundException {
        BufferedReader a = new BufferedReader(new FileReader("a"));
        Scanner scanner = new Scanner(a).useDelimiter(",");
        scanner.close();
    }
} 
```

我收到一条警告`new Scanner(a)`（我正在使用 jdk1.7.0_05 进行编译。）：

```
Resource leak: '<unassigned Closeable value>' is never closed. 
```

我做错了什么，或者这只是一个错误的警告？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-07-13T02:30:01.333

如果像这样拆分代码，警告会消失吗？

```
 Scanner scanner = new Scanner(a);
  scanner.useDelimiter(",");
  scanner.close(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-13T05:32:29.837

是的，您的代码有潜在的（但不是真实的）内存泄漏。您将 的返回值分配给`useDelimiter(a)`局部变量`scanner`，但构造函数结果被丢弃。这就是您收到警告的原因。

实际上， 的返回值`useDelimiter(a)`与构造函数调用返回的对象完全相同，因此您的代码可以很好地关闭资源。但这是编译器/代码分析工具*无法*检测到的，因为它必须知道 useDelimiters 实现。

一个非常好的代码分析工具应该会向您显示一个*额外*的警告，因为您正在关闭一个尚未在此方法中打开的资源（useDelimiter 的返回值）。如果您将这两条消息放在一起，则症状对您来说可能更清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T07:07:24.787

你有没有尝试：

```
Scanner scanner = new Scanner(new BufferedReader(new FileReader("a"))).useDelimiter(","); 
```

如果它不起作用，您必须添加`a.close();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T02:33:44.793

是什么给了你这个警告？大概它会发出警告，因为分配/关闭不是在 try/finally 块中完成的，这通常是一个坏主意（在这种特定情况下不是问题，因为唯一可以引发错误的是新的 FileReader 并且如果它抛出实际上没有分配任何资源 - 但这可以通过单个方法调用来改变..）

关闭扫描仪会关闭底层流（确切地说是任何实现自身的东西`Closeable`（是`BufferedReader`的），因此除此之外代码很好。

# php - 在javascript中使用按键事件

> ID：11463328
> 
> 赞同：1
> 
> 时间：2012-07-13T02:28:13.273
> 
> 标签：php, javascript, keypress

我想使用按键删除 php 会话变量。所以我使用了这些代码，

```
 <script type="text/javascript">
function textsizer(e){
var evtobj=window.event? event : e 
var unicode=evtobj.charCode? evtobj.charCode : evtobj.keyCode
var actualkey=String.fromCharCode(unicode)
if(actualkey=="x"){
    location.href="biling.php?cmd="+actualkey;}
}
document.onkeypress=textsizer
</script>
<?php if(isset($_GET['cmd'])){
unset($_SESSION["bill_array"]);
header('location:biling.php');
}
?> } 
```

但问题是，当我在文本框中输入“x”时，这段代码也会清除会话。所以我只想停止它并仅在我在文本框外按“x”时清除会话

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:02:40.793

我认为您可以像这样编辑现有功能：

```
function textsizer(e) {
    var evtobj=window.event? event : e;
    var element = evtobj.target ? evtobj.target : evtobj.srcElement;
    if (element.tagName.toLowerCase() == "body") {
        var unicode=evtobj.charCode? evtobj.charCode : evtobj.keyCode;
        var actualkey=String.fromCharCode(unicode)
        if(actualkey=="x"){
            location.href="biling.php?cmd="+actualkey;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T02:35:33.000

您可以检查该`e.target`属性以确定触发`keypress`事件的元素。

```
//Does not work on IE
window.addEventListener('keypress', function(e){ console.log(e.target) }, false) 
```

什么时候采取行动`e.target.tagName == 'BODY'`是一个不错的选择。

* * *

## 更新

有关 的更多信息`Event`，请查看：

*   Firefox 和 Webkit，[https://developer.mozilla.org/en/DOM/event](https://developer.mozilla.org/en/DOM/event)
*   即， http: [//msdn.microsoft.com/en-us/library/ie/ms535863 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms535863(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-13T02:39:12.013

$("input[type='text']").keypress(function(){

});

# c# - 无法在 Visual Studio 中打开项目

> ID：11463334
> 
> 赞同：0
> 
> 时间：2012-07-13T02:28:39.277
> 
> 标签：c#, visual-studio-2010

我正在观看此链接 [http://channel9.msdn.com/Series/Mango-Jump-Start](http://channel9.msdn.com/Series/Mango-Jump-Start)上提供的一些芒果 Jumpstart 视频。当我观看视频 3 时，我下载了一个名为“示例代码”的选项，但是当我尝试打开适用于 windowsphone 项目的 Visual Studio 2010 Express Edition 时，它会给出一条错误消息：

```
Unable to read the project file 'Wazup.csproj'.

Could not find a part of the path 'C:\Users\anantha\AppData\Local\Temp\Temp1_03 
Advanced Silverlight (1).zip\03 Advanced Silverlight\Demo 1 
ApplicationBar-Navigation-Pivot\PivotDemo-End\Wazup\Wazup\Wazup.csproj'. 
```

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T02:32:29.133

确保在打开项目文件之前先解压缩/解压缩文件。

# iphone - 如何在 iOS 中为图像添加框架并保存到库

> ID：11463335
> 
> 赞同：0
> 
> 时间：2012-07-13T02:28:54.233
> 
> 标签：iphone, image-processing, frame

我想构建一个应用程序，用户可以将框架（透明的 png 文件）添加到另一个图像（可能来自库）以制作新图像并将其保存到库或上传到 Facebook。所以，我的问题是如何使图像及其框架成为独特的图像。感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:59:34.720

可能对你有帮助。我认为您也想要合并图像和裁剪可能对您有帮助。这对我来说很好

```
CGSize newSize = CGSizeMake(190, 190);

UIGraphicsBeginImageContext( newSize );

[imageView.image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];

[imageViewTatoo.image drawInRect:CGRectMake(x1,y1,x2,y2) blendMode:kCGBlendModeDarken alpha:0.4];

UIImage *fullScreenshot = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

imageView.contentMode =UIViewContentModeScaleAspectFit;

UIImageWriteToSavedPhotosAlbum(fullScreenshot, nil, nil, nil);

imageView.image= fullScreenshot; 
```

# mysql - MySQL 相关子查询

> ID：11463336
> 
> 赞同：0
> 
> 时间：2012-07-13T02:28:54.683
> 
> 标签：mysql

我发现以下 SQL 是不可能的，因为 MySQL 中的相关子查询无法访问外部查询，当我运行以下查询时，我收到“未找到 player.playerid”的错误

```
SELECT player.position, player.playerid, adp.average_draft_position FROM player, (
    SELECT ((ad_p.mult + ad_p.pick_sum) / ad_p.total_mocks) AS average_draft_position FROM (
        SELECT draft_c.total_mocks as total_mocks, 
               ((draft_c.total_mocks - player_c.total_picks) * 252) AS mult, 
               SUM(overall_pick) AS pick_sum FROM draft_history JOIN drafts ON drafts.id = draft_history.draftid, 
            (
                SELECT COUNT(drafts.id) AS total_mocks FROM drafts WHERE type = 3
            ) AS draft_c, (
                SELECT COUNT(draft_history.playerid) AS total_picks FROM draft_history WHERE draft_history.playerid = player.playerid
            ) AS player_c WHERE draft_history.playerid = player.playerid
    ) AS ad_p
) AS adp WHERE player.sportid = 1 AND player.position IN ('x', 'y', 'z') ORDER BY adp.average_draft_position ASC 
```

我试图在上面使用以下作为子查询，

```
SELECT ((adp.mult + adp.pick_sum) / adp.total_mocks) AS average_draft_position FROM (
            SELECT draft_c.total_mocks as total_mocks, ((draft_c.total_mocks - player_c.total_picks) * 252) AS mult, SUM(overall_pick) AS pick_sum FROM draft_history JOIN drafts ON drafts.id = draft_history.draftid, 
            (
                SELECT COUNT(id) AS total_mocks FROM drafts WHERE type = :type
            ) AS draft_c, (
                SELECT COUNT(playerid) AS total_picks FROM draft_history WHERE playerid = :playerid
            ) AS player_c WHERE playerid = :playerid
        ) as adp 
```

这将确定用户在整个历史中被选中的平均位置，包括未通过对总和应用权重来选择用户的情况，这是有效的。

上面的第一个查询尝试获取并选择当前存在于给定位置的所有用户，获取平均位置并按其排序。

我不太擅长 SQL，所以我可能会做得更好，如果我能更好地解释这一点，请告诉我。

用给定的查询解决了问题，

```
SELECT position, 
       playerid,
       ((((adp.total_mocks - adp.participated_mocks) * 252) + adp.pick_sum) / adp.total_mocks) AS average_draft_position
FROM 
(      
    SELECT player.position, 
           player.playerid,
           (SELECT COUNT(drafts.id) FROM drafts WHERE type = 3) as total_mocks,
           COUNT(draft_history.playerid) as participated_mocks,
           SUM(overall_pick) AS pick_sum 
    FROM draft_history 
    INNER JOIN drafts 
      ON drafts.id = draft_history.draftid
    INNER JOIN player
      ON player.sportid = 1
     AND player.position IN ('QB') 
     AND draft_history.playerid = player.playerid
    GROUP BY player.position, player.playerid
) adp ORDER BY average_draft_position ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:45:08.047

我想我可以理解这一点。尝试这个：

```
select position, 
       playerid,
       ((adp.mult + adp.pick_sum) / adp.total_mocks) AS average_draft_position
from 
(      
    SELECT player.position, 
           player.playerid,
           (SELECT COUNT(drafts.id) FROM drafts WHERE type = 3) as total_mocks
           (
                (SELECT COUNT(drafts.id) FROM drafts WHERE type = 3) 
              - COUNT(draft_history.playerid)
           )*252 as mult,
           SUM(overall_pick) AS pick_sum 
    FROM draft_history 
    INNER JOIN drafts 
      ON drafts.id = draft_history.draftid
    INNER JOIN player
      ON player.sportid = 1
     AND player.position IN ('x', 'y', 'z') 
     AND draft_history.playerid = player.playerid
    group by player.position, player.playerid
) adp
order by 3 asc 
```

如果 "(SELECT COUNT(drafts.id) FROM drafts WHERE type = 3)" 是一个常数，你可以：

SELECT COUNT(drafts.id) 从草稿 WHERE 类型 = 3 到 @total_mocks;

然后使用@total_mocks 替换表达式“(SELECT COUNT(drafts.id) FROM drafts WHERE type = 3)”

去尝试一下

# javascript - HTML5 画布距离和移动对象

> ID：11463340
> 
> 赞同：1
> 
> 时间：2012-07-13T02:29:11.103
> 
> 标签：javascript, html, canvas

我有返回的距离函数：`distance`类似于：15、10 等。这里的函数：

```
var Distance = function( other ) {
var xd = other.x - this.x;
var yd = other.y - this.y;
return Math.sqrt( xd * xd + yd * yd );
}; 
```

并具有子弹功能`this.x = 10; this.y = 10;`

但是如何移动我的子弹与距离？当塔向敌人射击时，就像在塔防游戏中一样？

感谢并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:35:33.333

您的子弹可能会随着`dt`速度的变化而移动。到潜在目标的距离是碰撞检测的一个特征，应该独立评估。

# c# - 如何捕获表单中的所有事件

> ID：11463341
> 
> 赞同：1
> 
> 时间：2012-07-13T02:29:13.773
> 
> 标签：c#

对于每个事件，我必须编写一个事件处理程序：

```
this.MouseMove += new MouseEventHandler(Home_MouseMove);
this.KeyPress += new KeyPressEventHandler(Home_KeyPress); 
```

如果我要捕获每个按钮处理程序，那么我将不得不为每个按钮编写一个事件处理程序。

有什么好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:30:02.463

`Button`您可以为事件上的每个类型的控件附加一个`Form_Load`事件。更好的是，在构造函数本身调用`InitializeComponent`.

为什么是“之后”？因为如果您以前这样做，将无法控制要附加到的表单。

```
foreach(Control c in this.Controls)
{
   if(c is Button)
   {
        // Just an example, mold it to fit your app.
        ((Button) c).Click += new MouseClickHandler();
   }
} 
```

请注意，如果您有一个`Panel`带有按钮的控件，则不会将事件附加到它，因为该按钮不是 Form ("this") 集合的一部分`.Controls`；而是`this.Panel1.Controls`。看？

如果您是这种情况，您可以使用递归来遍历每个集合。

# ruby - Ruby 有 mkdir -p 吗？

> ID：11463343
> 
> 赞同：88
> 
> 时间：2012-07-13T02:29:22.127
> 
> 标签：ruby, file, path, directory, mkdir

> **可能重复：**
> [如何在 ruby​​ 中递归地创建目录？](https://stackoverflow.com/questions/3686032/how-to-create-directories-recursively-in-ruby)

在 Ruby 中，我该怎么做：

```
mkdir -p cool/beans 
```

1.  这是我想出的：

    ```
    Dir.mkdir('cool') unless File.directory?('cool')
    cool_beans_path = File.join('cool', 'beans')
    Dir.mkdir(cool_beans_path) unless File.directory?(cool_beans_path) 
    ```

    但是，没有更好的方法吗？

2.  我知道我可以这样做：

    ```
    system('mkdir', '-p', File.join('cool', 'beans')) 
    ```

    但是，这不是独立于平台的，不是吗？就像，它可以在 Mac 上运行，但不能在 Windows 上运行，对吧？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-07-13T04:28:07.027

```
require 'fileutils'
FileUtils.mkdir_p 'cool/beans' 
```

# google-app-engine - 在使用 google appengine request_logs 时，它在哪里存储临时文件？

> ID：11463350
> 
> 赞同：0
> 
> 时间：2012-07-13T02:30:04.020
> 
> 标签：google-app-engine, tmp

使用 appcfg.py request_logs 时，它显示“将下载日志复制到 [输出文件路径]”。用于存储临时文件的位置谷歌应用程序引擎在哪里？

# 编辑1

在使用 appcfg.py request_logs 时，我注意到第一个程序会首先将日志下载到临时位置，然后将这些文件复制到用户指定的输出文件。我正在寻找将数据复制到目标日志文件之前存储的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:09:00.447

我不确定我是否理解了您的问题，但是如果您从应用引擎项目目录（`app.yaml`文件所在的位置）运行这样的命令：

```
appcfg.py request_logs . logs.out 
```

然后输出将最终出现在`logs.out`同一目录（您的项目目录）中的文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:55:04.987

我首先发现GAE首先使用标准临时文件来存储日志。然后将它们复制到所需的输出文件位置。

```
def DownloadLogs(self):
    """Download the requested logs.

    This will write the logs to the file designated by
    self.output_file, or to stdout if the filename is '-'.
    Multiple roundtrips to the server may be made.
    """
    StatusUpdate('Downloading request logs for %s %s.' %
                 (self.config.application, self.version_id))

    tf = tempfile.TemporaryFile()
    last_offset = None
    try:
      while True:
        try:
          new_offset = self.RequestLogLines(tf, last_offset)
          if not new_offset or new_offset == last_offset:
            break
          last_offset = new_offset
        except KeyboardInterrupt:
          StatusUpdate('Keyboard interrupt; saving data downloaded so far.')
          break
      StatusUpdate('Copying request logs to %r.' % self.output_file)
      if self.output_file == '-':
        of = sys.stdout
      else:
        try:
          of = open(self.output_file, self.write_mode)
        except IOError, err:
          StatusUpdate('Can\'t write %r: %s.' % (self.output_file, err))
          sys.exit(1)
      try:
        line_count = CopyReversedLines(tf, of)
      finally:
        of.flush()
        if of is not sys.stdout:
          of.close()
    finally:
      tf.close()
    StatusUpdate('Copied %d records.' % line_count) 
```

# c# - 通过网络获取文件权限

> ID：11463353
> 
> 赞同：1
> 
> 时间：2012-07-13T02:30:19.850
> 
> 标签：c#, network-programming, file-access

我有一种情况，我需要确认我能够获得对网络上特定文件夹的写访问权。因此，首先我检查用户或它所属的组之一（域组）访问规则中的身份之一。如果不是这种情况，那么我需要检查远程计算机上的所有本地组，以查看我的用户或用户组之一是否是计算机上本地组的成员。例如，在这台特定的机器上，我是 BUILTIN\Administrators 的成员，这意味着我确实拥有给定文件夹的写入权限。但是，我不清楚如何从远程计算机获取该本地组以检查我是否具有写访问权限。

在下面的代码中，当我尝试使用 GroupPrincipal.FindByIdentity 时，它给出了一个异常“绑定句柄无效”。我不清楚什么是无效的。如果我只是尝试使用 ctx.ValidateCredentials(UserName, Password) 验证我的用户名和密码（域用户名），它会给出完全相同的错误。

如果我将机器名称命名为“pvr-pc”，它表示它无法在网络上找到该名称，但“\\pvr-pc”确实可以解决这个问题。

相同的代码正确地发现我所属的组之一是我本地计算机上 BUILTIN\Administrators 中的一个组，因此问题在于网络访问。

有谁知道我做错了什么？

代码如下所示：

```
using (WindowsIdentity identity = GetUserIdentity())
{
    if (identity != null)
    {
        try
        {

            FileInfo fi = new FileInfo(@"\\pvr-pc\c\installers\");
            AuthorizationRuleCollection acl = fi.GetAccessControl().GetAccessRules
                (true, true, typeof (SecurityIdentifier));

            var rules = acl.Cast<FileSystemAccessRule>();

            List<string> sids = new List<string>();

            sids.Add(identity.User.Value);

            sids.AddRange(identity.Groups.Select(identityReference => identityReference.Value));

            // check for a direct user match
            var matches = from r in rules where sids.Contains(r.IdentityReference.Value) select r;
            foreach (FileSystemAccessRule accessRule in matches)
            {
                // apply rules
            }

            foreach (FileSystemAccessRule rule in rules)
            {

                // if it is built in, try and get the group
                var groupDetail = rule.IdentityReference.Translate(typeof (NTAccount));
                if (!groupDetail.Value.StartsWith("BUILTIN\\")) continue;
                PrincipalContext ctx = new PrincipalContext(ContextType.Machine, @"\\pvr-pc", null,
                                                            ContextOptions.Negotiate, UserName, Password);

                GroupPrincipal grp = GroupPrincipal.FindByIdentity(ctx, IdentityType.Sid,
                                                                    rule.IdentityReference.Value);
                if (grp != null)
                {
                    //// find out if we are a member of the group
                    var isInGroup = (from g in grp.GetMembers(true)
                                        where sids.Contains(g.Sid.ToString())
                                        select g).Any();
                    if (isInGroup)
                    {
                        // apply rules
                    }
                }
            }
        }
        catch (Exception ex)
        {

        } 
```

谢谢，斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:36:01.533

简单地读取或写入文件夹然后捕获异常不是更容易吗？然后通知用户他/她无权访问。

# java - 如何在 Eclipse 的类路径中放置一个 jar？

> ID：11463354
> 
> 赞同：46
> 
> 时间：2012-07-13T02:30:24.607
> 
> 标签：java, android, eclipse, ant

嗨，我是类路径和 Ant 中的 n00b。在阅读 GCM for Android 的教程时，我遇到了一条线

**第 1 步：将 gcm.jar 文件复制到您的应用程序类路径中**

> 要编写您的 Android 应用程序，首先将 gcm.jar 文件从 SDK 的 gcm-client/dist 目录复制到您的应用程序类路径。

我从文件夹中得到了 gcm.jar `dist`。现在如何使用 Eclipse 将它放入我的类路径中（我认为这会更容易）？如果我没有 Eclipse，我会在哪里进行更改？

纳克斯

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-13T03:08:22.913

从 Android Developer Tools 的第 17 版开始，在使用工具和 Eclipse 时添加库 jar 的正确方法是创建一个与您的目录`libs`同级的目录，然后将 jar 放在那里。不需要其他任何东西，这些工具会自动为您处理所有其余的事情。`src``assets`

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-07-13T03:05:20.963

**右键单击**要放置 jar 文件的项目。一个窗口会像这样打开

![在此处输入图像描述](../Images/71aa8d4d10f320fa63b421c31c88bc8d.png)

单击**AddExternal Jars**那里您可以提供该 jar 文件的路径

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-07T06:21:55.233

首先复制您的 jar 文件并粘贴到您的 Android 项目的 libs 文件夹中。

现在右键单击新添加的（粘贴的）jar 文件并选择选项

> 构建路径 -> 添加到构建路径

现在您添加的 jar 文件将显示在**Referenced Libraries**下。再次右键单击它并选择选项

> 构建路径 -> 配置构建路径

将出现一个新窗口。从左侧菜单面板中选择**Java Build Path**，然后选择**Order and export** Enable check on added jar file。

现在运行你的项目。

更多细节@ [Add-JARs-to-Project-Build-Paths-in-Eclipse-(Java)](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-13T02:32:29.833

在eclipse中右键单击您的项目，构建路径->添加外部jar。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T06:35:54.243

在您的 Android Developer Tools 中，从 SDK Manager 安装 Extras > Google Cloud Messaging for Android Library 。安装完成后重新启动您的 SDK。然后导航到 sdk\extras\google\gcm\gcm-client\dist 。会有你的 gcm.jar 文件。

# eclipse - Eclipse 的 Hadoop 文档

> ID：11463360
> 
> 赞同：10
> 
> 时间：2012-07-13T02:31:09.137
> 
> 标签：eclipse, hadoop, javadoc

我最近安装了 Hadoop 并且能够运行简单的程序。

但是，我想在 Eclipse 的 Javadoc 浏览器中查看 Hadoop 类的文档。

请让我知道如何启用它（我是 Eclipse IDE 的一个小新手）。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-13T10:42:15.600

几个建议：

*   如果您使用 maven 进行依赖管理，您应该能够在 Eclipse 项目中展开 Maven 依赖项列表，右键单击 hadoop-core-xxxjar 并选择 Maven -> *Download Javadocs*

*   否则，您需要从 $HADOOP_HOME/docs/api 文件夹中获取 Javadocs，并与 Eclipse 中的 hadoop-core-xxxjar 相关联。在 Eclipse 中，右键单击您的 Java 项目并选择*Build Path -> Configure Build Path*。现在单击*库*选项卡并找到 hadoop-core-xxxjar 的条目。展开条目以显示 Source、Javadoc 等位置的选项，然后单击 Javadoc 位置条目。现在单击右侧的编辑按钮并在 Javadoc URL 文本框中输入位置作为路径 $HADOOP_HOME/docs/api（我的是`file:/opt/hadoop/hadoop-1.0.2/docs/api/`）

无论哪种方式，现在您应该能够将鼠标悬停在 Eclipse 中的 Hadoop 类上，Javadoc 将弹出。您还可以显示将为您当前正在查看的类填充的 Javadoc 窗口，或者只是打开一个内部浏览器窗口并将其指向 $HADOOP_HOME/docs/api/index.html 文件

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-18T10:23:16.747

对于那些想要保持更新的人来说，另一个简单的解决方案是像 Chris 所说的那样编辑 Javadocs 路径：

> “在 Eclipse 中，右键单击您的 Java 项目并选择 Build Path -> Configure Build Path。现在单击 Libraries 选项卡并找到 hadoop-core-xxxjar 的条目。展开条目以显示 Source、Javadoc 等位置的选项，然后单击Javadoc 位置条目。现在单击右侧的编辑按钮并输入位置作为路径“

但不要将其直接链接到您存储在硬盘上的 api，而是将其链接到`http://hadoop.apache.org/docs/stable/api/`

# javascript - 如何在按钮单击时克隆 div 换行？

> ID：11463363
> 
> 赞同：1
> 
> 时间：2012-07-13T02:31:40.107
> 
> 标签：javascript, jquery, html, insert

[http://jsfiddle.net/TDmRv/1/](http://jsfiddle.net/TDmRv/1/)

**我想要做什么：**我希望将 id 为“theDiv”的 div 包裹在输入到页面上的文本周围。我想要这个，所以文本将出现在创建的多个 div 中。

**解释更多：** 好的，所以我要做的是输入一些输入并将其显示在一个 div 中，这很好，但我希望 div 在我单击输入时环绕它。因此，每次我单击“添加”时，文本都会被包装到一个 div 中并显示出来。但我也试图让它出现多次，所以每次我添加输入时，div 都会包裹在文本周围。最后，我试图将这两个按钮放在那里，我假设当使用 jQuery 单击“添加”时必须插入这些按钮。我只需要一些指导，因为我很难理解这将如何工作。

```
<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $("#edit").click(function(){
    $("#theDiv").css("background-color","red");
  });
});
$(document).ready(function(){
  $("#delete").click(function(){
    $("#theDiv").remove();
  });
});
$(document).ready(function(){
  $("#add").click(function(){
    $('#edit').wrap('<div class="theDiv" />');
  });
});
</script>
<style>
#theDiv {   
    border: 1px solid rgb(204, 204, 204); 
    margin: 5px 0pt; 
    padding: 5px;
    background-color: blue;
    height:50px;
    }
button {
    float:right;
}
</style>
</head>
<body>
<div id="hold">
<button id="edit">Edit</button><button id="delete">Delete</button>
</div>
<form>
    <div><textarea class="textI" id="textI2" style="width: 400px; height: 50px;"></textarea></div>
    <div><input type="button" id="add"value="add" onclick="theDiv_append()" /></div>
</form>
<script language="javascript">
$('.textI').each(function() {
    var default_value = this.value;
    $(this).focus(function() {
        if(this.value == default_value) {
            this.value = '';
        }
    });
});
function theDiv_append() {
    $('#theDiv').append($('#textI2').val());
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T02:42:33.370

试试这个，把#add click改成这个，它在jsfiddle中工作，只需添加文本，我没有这样做，但你会看到如何添加新的蓝色div

```
 $("#add").click(function(){
             var newRow = $('#theDiv').clone();
             $('#hold').append(newRow);
             $('#edit').wrap('<div class="theDiv" />');
               });
           }); 
```

# java - 在我的 Map-Reduce 作业中包含第三方库（使用分布式缓存）

> ID：11463366
> 
> 赞同：1
> 
> 时间：2012-07-13T02:31:53.220
> 
> 标签：java, hadoop, mapreduce, hdfs

在我的映射器代码中，我使用的是 JTS.jar 的第 3 方库。我需要把它放在hadoop的分布式缓存中，以便所有节点都可以访问它。我在[此](http://www.cloudera.com/blog/2011/01/how-to-include-third-party-libraries-in-your-map-reduce-job/)链接中发现 -libjars 可用于执行此操作。

我现在使用执行我的代码

`hadoop jar -libjars JTS.jar my_jar.jar classname inputFiles outputFiles`.

但这不起作用。关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:04:05.090

尝试使用正确的命令行参数顺序。我认为错误信息很有启发性。

```
hadoop jar my_jar.jar classname -libjars JTS.jar inputFiles outputFiles 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T03:31:41.973

在另一项努力中，我尝试关注[此](http://hadoop.apache.org/common/docs/r0.20.2/api/org/apache/hadoop/filecache/DistributedCache.html)链接。

1）我使用以下方法将 Jar 库复制到 hadoop：

```
hadoop fs -copyFromLocal JTS.jar /someHadoopFolder/JTS.jar 
```

2）然后我修改了我的配置如下：

```
 Configuration conf = new Configuration();

    Job job = new Job(conf);
    job.setJobName("TEST JOB");

    List<String> other_args = parseArguments(args, job);

    DistributedCache.addFileToClassPath(new Path("/someHadoopFolder/JTS.jar"), conf);

    job.setMapOutputKeyClass(LongWritable.class);
    job.setMapOutputValueClass(Text.class);

    job.setOutputKeyClass(LongWritable.class);
    job.setOutputValueClass(Text.class);

    job.setMapperClass(myMapper.class);
    //job.setCombinerClass(myReducer.class);
    //job.setReducerClass(myReducer.class);

    job.setInputFormatClass(TextInputFormat.class);   
    job.setOutputFormatClass(TextOutputFormat.class);

    String inPath = other_args.get(0);
    String outPath = other_args.get(1);     
    TextInputFormat.setInputPaths(job, inPath);
    TextOutputFormat.setOutputPath(job, new Path(outPath));

    TextInputFormat.setMinInputSplitSize(job, 32 * MEGABYTES);
    TextInputFormat.setMaxInputSplitSize(job, 32 * MEGABYTES);

    job.setJarByClass(myFile.class);

    job.waitForCompletion(true); 
```

3）教程然后说“使用映射器中的缓存文件”所以我的映射器看起来像这样：

```
 public static class myMapper extends Mapper<LongWritable, Text, LongWritable, Text>{
       private Path[] localArchives;
       private Path[] localFiles;

       public void configure(Configuration conf) throws IOException {
         localArchives = DistributedCache.getLocalCacheArchives(conf);
         localFiles = DistributedCache.getLocalCacheFiles(conf);
       }

    public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException{
            //ENVELOPE IS FROM THE JTS.JAR library
        Envelope e1 = new Envelope(-180, 85, 180, -85);
            context.write(key, value);

    }

} 
```

尽管做了所有这些，代码仍然通过抛出“Class bout found”而失败。有什么帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T19:06:25.117

我想我有点晚了，这样做的一种方法是将jar文件复制到hadoop的安装文件夹下。因为，我在 /usr/local/hadoop/share/hadoop/common 中完成了 XXX.jars（第三方 jars），然后将此文件添加为外部 jar 文件。

这解决了我的问题，如果您不想这样做，另一种方法是将外部 jar 文件的目录/文件路径包含在 export HADOOP_CLASSPATH=/XXX/example.jar:...

# java - 如何将 WAR 结构嵌入到桌面应用程序中？

> ID：11463367
> 
> 赞同：0
> 
> 时间：2012-07-13T02:31:59.417
> 
> 标签：java, user-interface, war, vaadin

我们有一个用 Java 编写的应用程序，其中 UI 将是一个相对较小的部分。我们想要创建一个现代的、面向消费者的 UI，并得出结论，Swing 无法提供我们所追求的东西。经过深思熟虑，我们决定尝试使用 Vaadin 构建 UI，因为虽然我们的应用程序无法在 Web 上运行（它是 p2p），但 Vaadin 提供了开箱即用的流畅和美观的体验。因此，我们的应用程序没有 Vaadin 所需的 WAR 结构。

我们的想法是，我们将创建一个小型嵌入式 Web 服务器，它将为用户的本地 Web 浏览器（我们将使用 java.awt.Desktop.browse() 启动）提供 Vaadin UI。我们仍然存在如何将 WAR 结构嵌入到现有项目中的问题。我们的构建工具是 Maven，您可以查看项目源代码：[https ://github.com/sanity/tahrir](https://github.com/sanity/tahrir)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:58:23.717

您可以嵌入 Jetty：这[是](http://docs.codehaus.org/display/JETTY/Embedding+Jetty).

例子：

```
Server server = new Server(8080);
Context root = new Context(server,"/",Context.SESSIONS);
root.addServlet(new ServletHolder(new HelloServlet("Ciao")), "/*");
server.start(); 
```

如果你想运行**WAR**，[这里](http://bachman.pl/devel/running-your-webapp-inside-embedded-jetty/)有一个关于如何做到这一点的例子

以下是相关代码：

```
server = new Server();
Connector connector = new SelectChannelConnector();
connector.setPort(PORT);
connector.setHost("127.0.0.1");
server.addConnector(connector);

WebAppContext wac = new WebAppContext();
wac.setContextPath("/");
wac.setWar("./web");    // this is path to the .WAR 
server.setHandler(wac);
server.setStopAtShutdown(true);
server.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:24:16.480

Vaadin*是*一个 Web 应用程序框架 - Web 应用程序将具有 WAR 结构。

现在，如果您想避免将所有类都放在 WEB-INF/lib 或 WEB-INF/classes 中，那很好。通过嵌入 Jetty，您可以使用类路径上的所有类，而无需将它们粘贴在某个位置。

但是，您必须在 Jetty 中构建和配置 Web 应用程序做一些工作。我想最简单的方法是在类路径上的 JAR 中创建一个 WAR 结构（或创建一个兄弟 WAR）以及所有其他 web 资源，例如 WEB-INF/web.xml、VAADIN/themes 等 - 但没有WEB-INF/lib 和 WEB-INF/classes - 这是我*认为*你试图避免的。

请注意，我自己并没有这样做，但我相信这既是可能的，也是阻力最小的路径。

# cocoa - 从 NSNotificationCenter 调用时，NSArray 返回为 null

> ID：11463369
> 
> 赞同：0
> 
> 时间：2012-07-13T02:32:27.960
> 
> 标签：cocoa, nsmutablearray, nstableview, nsnotificationcenter

我有一个使用 NSUserDefaults 保存的 NSMutableArray，当调用 appLaunched 时，该数组返回 null，但是当被任何其他函数调用时，它返回数组中的内容。有人知道发生了什么吗？

```
- (id)init
 {
[super init];
theArray = [[NSMutableArray alloc] init];
theArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"TheArray"];
if(!theArray) {
    theArray = [[NSMutableArray alloc] init];
} else {
    theArray = [[NSMutableArray alloc] initWithArray:theArray];
};

// NSLog(@"%@", theArray);
[[NSUserDefaults standardUserDefaults] setObject:theArray forKey:@"TheArray"];
// NSLog(@"Is saving");

return self;
}

 -(IBAction)addNewProcess:(id)sender
 {
     NSString *newProcess = [theField stringValue];
     [theArray addObject:newProcess];
     [theField setStringValue:@""];
     NSLog(@"%@", theArray);
     [theTable reloadData];

 }

 -(IBAction)removeProcess:(id)sender
 {
     int listRow = [theTable selectedRow];
     NSLog(@"%d", listRow);
     if (listRow < 0) return;
     [theArray removeObjectAtIndex:listRow];
     [theTable reloadData];
 }

 -(IBAction)save:(id)sender
 {
     NSLog(@"%@", theArray);
     int count = [theArray count];
     NSLog(@"%i", count);
     [[NSUserDefaults standardUserDefaults] setObject:theArray forKey:@"TheArray"];
     NSLog(@"Is saving");
  }

 - (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView
 {
     return [theArray count];
 }

 - (id)tableView:(NSTableView *)tableView 
 objectValueForTableColumn:(NSTableColumn *)tableColumn 
             row:(NSInteger)row
 {
     return [theArray objectAtIndex:row];
 }

 - (void)tableView:(NSTableView *)tableView 
    setObjectValue:(id)object 
    forTableColumn:(NSTableColumn *)tableColumn 
               row:(NSInteger)row
 {
     [theArray replaceObjectAtIndex:row
                               withObject:object];
 }

 -(void)appLaunched:(NSNotification *)note
 {
     NSLog(@"%@", theArray);

 }

 @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T19:14:03.200

你没有同步你的 NSUserDefaults。每次使用`[[NSUserDefaults standardUserDefaults] setObject:someObject forKey:@"someKey"];`时都必须使用`[[NSUserDefaults standardUserDefaults] synchronize];`后记。

# c# - 从 Silverlight (c#) 将图形图层导出为形状或 CAD 文件

> ID：11463378
> 
> 赞同：1
> 
> 时间：2012-07-13T02:33:14.457
> 
> 标签：c#, silverlight, arcgis, esri

使用 ArcGIS API for Silverlight 2.4。我有一个图形层，想将其导出为上述格式（shp 或 dwg）。有人对我如何做到这一点有任何想法吗？我正在使用 Silverlight 5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:45:02.880

遗憾的是，不支持导出图形图层。我编写了自己的类，该类通过图形层并将每个图形的符号和几何图形序列化为 XML。我现在不在工作电脑旁，所以无法与您分享。

# android - Android Listview：getView 在不可观察的视图上被多次调用

> ID：11463387
> 
> 赞同：1
> 
> 时间：2012-07-13T02:34:51.243
> 
> 标签：android, android-listview

（我已经看到[了这个类似的问题](https://stackoverflow.com/questions/2618272/custom-listview-adapter-getview-method-being-called-multiple-times-and-in-no-co)）我有一个`ListView`我已经为它编写了一个自定义适配器和一个`onitemclicklistener`. I'm having an issue where, when any element of the list is selected, `getView`is called (twice) for each of the top 4 elements of the `ListView`, even if those elements are not visible. 即使我不调用`notifyDataSetChanged`适配器也会发生这种情况——前 4 个视图无论如何都会被获取两次。这是正常行为吗？我的问题不在于为它们调用了两次，而是在不需要更新它们时根本调用了它。

顺便说一句，我没有使用 wrap_content 作为列表视图的高度或宽度——高度是 match_parent，宽度是固定数量的 dp。

OnItemClickListener的`onItemClick()`方法在这里：

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

      mPicture = pictures[position];
      mPicturesAdapter.setCurrentPicture(mPicture);
      mPicturesAdapter.notifyDataSetChanged();
} 
```

`getView()`来自我的自定义适配器（扩展 BaseAdapter）在这里：

```
public View getView(int position, View convertView, ViewGroup parent) {

    Log.v("tag", "Getting view for position "+position);

    LayoutInflater inflater = LayoutInflater.from(mContext);
    LinearLayout layout = (LinearLayout)
            inflater.inflate(R.layout.picture_thumbnail, parent, false);

// set up the linearlayout here ...

    return layout;
} 
```

在任何项目单击时，无论单击哪个项目，都会为位置 0 - 3 调用 getView() 两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:21:38.960

只需通过修改适配器

```
mPicturesAdapter.setCurrentPicture(mPicture); 
```

ListView 已经尝试自我更新。我猜 onClick 方法仍然可以在没有您调用的情况下完成它的工作`notifyDataSetChanged`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T05:12:29.167

实际上，无论您使用什么列表/组来填充 ListView，您都需要先将其清空，然后再调用它。例如，如果您使用 ListA 填充 ListView，则在第二次或任何连续更新中，您需要先清空 ListA，然后添加项目，然后使用它进行填充。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-13T03:01:36.567

```
if (convertView != null){

           Then populate list

   } 
```

# python - 使用 WordNet 确定两个文本之间的语义相似度？

> ID：11463396
> 
> 赞同：5
> 
> 时间：2012-07-13T02:35:52.873
> 
> 标签：python, nlp, nltk, wordnet, semantic-analysis

如何使用 WordNet 确定 python 中两个文本之间的语义相似性？

明显的预处理将是删除停用词和词干，但是然后呢？

我能想到的唯一方法是计算两个文本中每个单词之间的 WordNet 路径距离。这是 unigram 的标准。但这些是大型（400 字）文本，它们是自然语言文档，其中的单词没有任何特定的顺序或结构（除了英语语法规定的那些）。那么，您会比较文本之间的哪些词？你会如何在 python 中做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T03:26:25.610

您可以做的一件事是：

1.  杀死停用词
2.  找到尽可能多的单词，这些单词与同一个文档中的其他单词的同义词和反义词有最大的交集。让我们称这些为“重要的话”
3.  检查每个文档的重要词集是否相同。它们越靠近，您的文档在语义上就越相似。

还有另一种方法。从每个文档中的句子中计算句子树。然后比较两个森林。我很久以前为一门课程做过一些类似的工作。[这是代码](https://github.com/inspectorG4dget/Semantic-Document-Comparison)（请记住，这是很久以前的事了，而且是上课用的。所以至少可以说，代码非常hacky）。

希望这可以帮助

# linux - How to have multiple websites access a common directory

> ID：11463397
> 
> 赞同：0
> 
> 时间：2012-07-13T02:35:53.610
> 
> 标签：linux, apache

I have multiple websites on a dedicated server running under Linux/Apache. The sites need to access common data from a directory named 'DATA' under the doc root. I cannot replicate this directory for every site. I would like to put this under a common directory (say /DATA) and provide a symbolic link to this directory from the doc root for each of the sites.

www/DATA -> /DATA

1.  Is there a better way of doing this?

2.  If I put this common directory (/DATA) directly under Linux root directory, can there be problems from Linux standpoint as the directory size can be several gigabytes and the sub directories under /DATA will need have write permissions.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:48:11.080

Use [Alias](http://httpd.apache.org/docs/2.4/mod/mod_alias.html#alias) along with the [Directory](http://httpd.apache.org/docs/2.4/mod/core.html#directory) directive. This will allow the site to access the directory via a url path.

I'm not sure what exactly it means that you'll have scripts accessing the directory to provide data. Executing shell scripts to read an produce data is a different story entirely, but you probably want to avoid this if this is what you're doing. Application pages could be included in the data directory and use a relative path to get to the data. Then all sites get the same scripts and data.

I don't know what your data is, but I'd probably opt to put it in a database. Think about how you have to update multiple machines if you have to scale your app. Maybe the data you have is simple and a DB is overkill.

# visual-studio-2010 - Visual Studio 2010 调试器 - 结构调试信息仍保留旧成员名称和类型，不更新

> ID：11463403
> 
> 赞同：4
> 
> 时间：2012-07-13T02:36:18.667
> 
> 标签：visual-studio-2010, debugging

在visual studio 2010中，调试器仍然显示旧结构的结构信息，即使有新的类型和名称，或者如果所有成员都被替换了，结构的名称也改变了，等等......我试过删除项目pdb，但是它在重建后会重新生成，并且旧的结构信息在运行时仍然存在。这使得调试链表树变得不可能。

有什么方法可以完全重置内部调试器信息并强制它识别新的结构布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:25:13.190

转到调试-> Windows-> 模块

发现你的模块并检查它被挑选的位置

检查该模块的 pdb 是从哪里加载的

删除这些 pdb 和 dll

从 Debug->Options->Debugging->Symbols 清除符号缓存

现在重新编译并重试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:23:56.733

刚刚找到解决方案：删除项目和所有子项目的 .pdb 为我解决了问题

# crystal-reports - Crystal Reports 2011 sql视图查询

> ID：11463405
> 
> 赞同：0
> 
> 时间：2012-07-13T02:36:31.683
> 
> 标签：crystal-reports

我正在编写 Crystal Reports 2011 中的健康福利扣除报告，从 SQL 视图中获取字段。我坚持的视图称为 emp_groups.group_code。这是视图中字段的屏幕截图：

![截屏。](../Images/9f72bc2bf118a61c8ede9d5221c43208.png)

我想要做的是创建一个公式，从这个视图中获取员工所在的所有组（他们可以注册 1 到所有组。然后把它放在我的报告中。我是水晶语法新手并认为 select 语句会起作用，但它只获取某人注册的第一组。（即：一个人可能注册了 LUNLRN、PHYEX 和 WGHTLOSS 但在此选择语句之后只有 LUNLRN 显示给我）

```
select {emp_groups.group_code} 
   Case "COACHEDU": 
      "Coach" 
   Case "HRA": 
      "HRA2012" 
   Case "LUNLRN": 
      "Lunch&Learn" 
   Case "PHYSICAL": 
      "Phyiscal" 
   Case "PHYEX": 
      "Exercise" 
   Case "WGHTLOSS": 
      "WeightLoss" 
   Default : 
      ""; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:53:18.747

我将加入您的员工属于员工表的组，然后按员工 ID 在水晶报告中分组，并在组页脚中显示员工详细信息以及他所属的组

当您按员工 ID 分组时，然后在**详细信息部分**中输入如下公式：

```
WhilePrintingRecords;
StringVar employeeGroups;

   employeeGroups:= employeeGroups & Trim({table.group_name}) & ',' 
```

**在组页脚中：**

```
WhilePrintingRecords;
StringVar employeeGroups;

employeeGroups 
```

**在组头中**

```
WhilePrintingRecords;

StringVar employeeGroups:= "" 
```

# mysql - 同步地理位置不同的 mysql 服务器的最佳方法是什么？

> ID：11463409
> 
> 赞同：0
> 
> 时间：2012-07-13T02:37:25.703
> 
> 标签：mysql, mongodb, redis, database

想象我有许多服务器都运行 mysql 或 mongodb 或 redis 数据库，这些服务器位于不同的地方。我想保持服务器的数据不变。

例如：

```
server A,B,C,D,E 
1> insert items to A, auto update B,C,D,E
2> insert items to B, auto update A,C,D,E
3> delete ... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T04:40:30.280

您的问题相当笼统，但在所有情况下，答案都是将相同数据同步到多个服务器的类似起点：

*   MySQL -[使用复制](http://dev.mysql.com/doc/refman/5.5/en/replication.html)
*   MongoDB -[使用复制](http://www.mongodb.org/display/DOCS/Replication)
*   redis -[使用复制](http://redis.io/topics/replication)

根据数据库的不同，您可能会受到限制，例如复制是否是单主服务器（以上所有内容通常都是开箱即用的）或者您是否真的需要多主服务器更新（例如[MySQL Cluster](http://www.mysql.com/products/cluster/)、[CouchDB](http://couchdb.apache.org)或其他具有[MVCC](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)）。

不同方法各有利弊，这实际上取决于您的用例以及服务器彼此相关的位置（相同的数据中心、地理位置不同等）。通常，您希望扩展到适当的场景，而不是尝试从设置和支持过于复杂的东西开始。

# php - 如何将PHP调用的文本转换为链接？

> ID：11463410
> 
> 赞同：0
> 
> 时间：2012-07-13T02:37:26.447
> 
> 标签：php, html, wordpress, hyperlink

我目前正在使用 Wordpress，并且我的网站列表以链接名称作为标题（例如 www.test.com、www.test2.com）

使用此 php 代码，它会调用网站链接的名称：

```
<h3 class="list"><a class="h1" href="<?php the_permalink(); ?>"><?php the_title(); ?></h3> 
```

现在该网站有一个“阅读更多”按钮和一个“访问网站”按钮。我想将“访问网站”按钮变成使用 PHP 的外部链接。

例如，网站列表称为“www.test.com”。我想把“访问网站按钮”变成一个外部链接，让它转到“www.test.com”。

这是我的“访问网站按钮”的 html 代码：

```
<div id="visit">
    <a href="#" id="visit-link">Visit website</a>
    </div> 
```

我希望有人能帮帮忙。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T01:58:25.993

我想你可以做这样的事情

`<h3 class="list"><a class="h1" href="http://<?php the_title(); ?>">Visit Website</h3>`

如果 the_title 是一个以 www（不是 http://）开头的有效 URL，那么它将起作用。如果他们的标题中已经包含 http://，请删除该部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:46:55.593

每当您单击链接时，您都在访问 href 属性中指定的 url。

例如创建一个链接，去 google.com 我会这样做

```
<a href="http://www.google.com">Go to Google</a> 
```

因此，在您的情况下，您将 # 替换为您的链接

```
<div id="visit">
    <a href="#" id="visit-link">Visit website</a>
    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:15:21.333

**用 php 编写代码**：我能想到的就是这段代码：

```
<?php echo "<a href='http://www.test.com'>visit site</a>" ?> 
```

我猜你很困惑

```
<?php the_permalink(); ?> 
```

the_permalink(); 调用 get_permalink(); 它最终提供了链接。您可以在 wp-includes/link-template.php 中查看其源代码。

# entity-framework - 如何使用 EF CodeFirst 进行搜索

> ID：11463416
> 
> 赞同：0
> 
> 时间：2012-07-13T02:37:53.083
> 
> 标签：entity-framework, code-first

目前，要使用 EF CodeFirst 和存储库模式进行搜索，基于用户对 mvc 搜索视图/页面上多个文本框的输入，我执行以下操作：

```
 public PagedList<Entity1> PlayerUserSearch(Entity1SearchParameters searchParameters, int? pageSize, int? startEntity, Func<Entity1, object> sortOrder, bool sortDesc)
    {
        IQueryable<Entity1> query = from entities in this.DataContext.Entity1s.Include("Entity2List")
                                    where entities.Entity2List.Any()
                                    select entities;

        if (searchParameters.Entity2PrimaryKeyId.HasValue)
            query = query.Where(e => e.Id == searchParameters.Entity2PrimaryKeyId.Value);

        if (searchParameters.HasStats.HasValue)
        {
            if (searchParameters.HasStats.Value)
                query = query.Where(u => u.Entity2List.Any(e => e.Stat != null));
            else
                query = query.Where(u => u.Entity2List.Any(e => e.Stat == null));
        }

        if (searchParameters.Entity2OtherField.HasValue)
            query = query.Where(u => u.Entity2List.Any(e => e.Event.Entity2OtherField == searchParameters.Entity2OtherField));

        if (searchParameters.Entity2OtherField2.HasValue)
            query = query.Where(u => u.Entity2List.Any(e => e.Event.Entity2OtherField2 == searchParameters.Entity2OtherField2));

        if (searchParameters.Active.HasValue)
            query = query.Where(e => e.Active == searchParameters.Active.Value);

        return this.GetPageByStartEntity(pageSize.Value, startEntity.Value, query, sortOrder, sortDesc);
    } 
```

这样做的问题是，每次我添加另一个检查 Entity1 (Entity2) 的子项的某个字段时，它都会在生成的 sql 语句中使用一个新的“AND EXISTS”子句，因此它正在执行存在并再次检查表 Entity2 以检查每个不同的字段，而不是在查询中对 Entity 执行单个 EXISTS，并检查我添加到查询中的所有字段（即 EntityOtherField1 和 EntityOtherField2）。我找不到更好的方法来根据用户输入进行搜索，而不是不断检查输入是否存在（添加到搜索参数））然后在当前查询中添加新的位置。谁能告诉我是否有更好的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:04:25.367

我认为您正在寻找的是使用规范模式。

```
var spec = new specification<Entity2>(s => true);
if (searchParameters.HasStats.Value)
{
    spec = spec.And(e => e.Stat != null);
}

if (searchParameters.Entity2OtherField2.HasValue)
{
        spec = spec.And(e => e.Event.Entity2OtherField2 == searchParameters.Entity2OtherField2);
}

query = query.Where(u => u.Entity2List.Any(spec)); 
```

`spec.IsStatisfiedBy`或者我相信您可以通过分离过滤器逻辑和使用方法来使其更加标准。可以在[此处](http://huyrua.wordpress.com/2010/07/13/entity-framework-4-poco-repository-and-specification-pattern/)找到在实体框架上实现存储库/规范的良好框架。

# php - foreach PHP 删除 mysql 数据库

> ID：11463417
> 
> 赞同：0
> 
> 时间：2012-07-13T02:38:00.663
> 
> 标签：php, mysql, checkbox, foreach, sql-delete

到目前为止，我所拥有的是（我认为是）一个工作循环，迭代并获得正确的 id（由 var_dump 确认），但我的 sql 查询没有将 id 作为 DELETE 键。本质上，SQL 查询是删除 id = 数组迭代的当前 id 值的地方。使用多个复选框。var dump 正在确认 id 与上传 id 匹配，但是我无法进行任何删除。这是代码：

```
 function submit_delete() {
      if(!is_null($_POST['delete']) && !is_null($_POST['checkbox'])) { //Check to see if a     delete command has been submitted.
    //This will dump your checkbox array to your screen if the submit works.
    //You can manually check to see if you're getting the correct array with values
   // var_dump($_POST['checkbox']);//Comment this out once it's working.
    $id_array = $_POST['checkbox'];
    //var_dump($id_array);
    deleteUploads($id_array);

  }
  else {
    echo "Error: submit_delete called without valid checkbox delete.";//var_dump($_POST['checkbox']);
  }
}

function deleteUploads ($id_array) {
  if (count($id_array) <= 0) {   echo "Error: No deletes in id_array!"; echo 'wtf'; }
  //return; }//bail if its empty
  require_once ('../mysqli_connect.php'); //Connect to the db

  $delete_success = false; var_dump($delete_success);
  foreach ($id_array as $id) { var_dump($id);
    $remove = "DELETE FROM upload WHERE upload_id= $id";//AND `owner_id`=".$_SESSION['user_id'];
    $result = mysqli_query ($dbc, $remove); // Run the query
    //
    ////$mysqli->query($sql) or die(mysqli_error($mysqli));
    if ($result) { $delete_success = true; var_dump($delete_success);}
    mysqli_close($dbc);
  }

  if($delete_success == true) { echo 'done';
    header('Location: newwriter_profile.php');
  } else {
    echo "Error: ".mysqli_error();
  }
}

//Test deleteUploads (remove once you know the function is working)
//$test_ids = array();
//$test_ids[] = 5;//make sure this id is in the db
//$test_ids[] = 7;//this one too
submit_delete();
//deleteUploads($id_array);//should remove ids 10 and 9//

mysqli_close($dbc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:15:39.143

您需要从函数中删除该`mysqli_close($dbc);`语句。`deleteUploads()`我也同意你应该努力接受人们的回答。您已经提出了 9 个问题，但您没有接受 13 个答案之一。这真的不公平。

**编辑** 我已经快速浏览了您的脚本并将其移动了一下。这是否提供任何有用的信息？

```
<?
$msgs[] = 'Log: Started';
require_once('../mysqli_connect.php');

function submit_delete()
{
    global $msgs;
    if(!is_null($_POST['delete']) && !is_null($_POST['checkbox']))
    {
        $msgs[] = "Log: submit_delete called with valid checkbox delete.";
        $id_array = $_POST['checkbox'];
        deleteUploads($id_array);
    }else{
        $msgs[] = "Error: submit_delete called without valid checkbox delete.";
    }
}

function deleteUploads ($id_array)
{
    global $msgs;
    if (count($id_array) <= 0)
    {
        $msgs[] = "Error: No deletes in id_array!";
    }else{
        $msgs[] = "Log: Deletes in id_array!";
    }

    $delete_success = false;
    foreach ($id_array as $id)
    {
        $msgs[] = "Log: Processing id: ".$id;
        $remove = "DELETE FROM upload WHERE upload_id = $id";
        $result = mysqli_query ($dbc, $remove);
        if ($result)
        {
            $msgs[] = 'Log: delete success = true';
            header('Location: newwriter_profile.php');
        }else{
            $msgs[] = 'Error: '.mysqli_error();
        }
    }
}

submit_delete();

if(!@mysqli_close($dbc))
{
    $msgs[] = 'Error: mysqli_close failed';
}
echo implode('<br>',$msgs);
?> 
```

# security - 安全加密 64 位，不带每个元素开销？

> ID：11463421
> 
> 赞同：1
> 
> 时间：2012-07-13T02:38:39.987
> 
> 标签：security, encryption

我的数据库中有很长的内容。我喜欢加密它。我可以使用 xor 但这不是很安全，因为可以看到模式并且可能会显示 xor 值。IIRC AES 有一个密钥和一个初始化向量 (IV)，可以将其视为种子（在谈论随机数时）。我相信IV应该是随机制作的。当使用密钥加密相同的数据时，会出现不同的模式。

我如何安全地加密 64 位？我怀疑它可能不是真正安全的 w/oa 随机 IV/种子。但我不想存储它。目前我能想到的另一个选项是拥有一个加密 RNG 并运行它说 10000 次，如果该值是第 10000 个索引，那么 xor 值。但在性能方面，这并不能扩展。

我如何正确安全地加密 64 位而不为每个 64 位存储额外的位？我在想也许用 (seed xor index) 喂一个加密 RNG 运行它 X 次，然后用它的值 xor。但我感觉有人有更好的主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:31:56.167

[AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard)的[块大小](https://en.wikipedia.org/wiki/Block_cipher)为 128 位，因此如果您使用它，您最终将加密与有意义的数据一样多的填充。

您可以使用[DES](https://en.wikipedia.org/wiki/Data_Encryption_Standard)（或者最好是[3DES](https://en.wikipedia.org/wiki/Triple_DES)），因为它的块大小是 64 位。

[初始化向量](https://en.wikipedia.org/wiki/Initialization_vector)对攻击者来说应该是难以预测的，但它实际上并不像密钥那样是秘密的，因此可以通过算法来选择它；例如，参见[ESSIV](https://en.wikipedia.org/wiki/Disk_encryption_theory#Encrypted_salt-sector_initialization_vector_.28ESSIV.29)算法，该算法用于为磁盘加密生成每个扇区的 IV。您可以使用相同的方案——只需将“扇区号”替换为类似于记录的唯一 ID 号之类的东西——因此您实际上不必存储 IV，只需在解密时使用算法重新生成它。（但如果您修改了记录的唯一 ID，请确保使用新的 IV 进行解密和重新加密！）

如果您使用[ECB 模式](https://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29)进行加密，则可以完全避免使用 IV ，但这并不是一个好主意。对于给定的密钥，在 ECB 模式下，相同的明文始终加密为相同的密文，因此攻击者即使无法确定实际值，也可以在两条记录中看到您的密码相同。假设您没有为每条记录使用不同的*键*，您希望为每条记录使用不同的 IV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T01:03:25.873

如果你有某种索引，你可以使用 CTR 模式加密，索引作为 NONCE。在这种情况下，您可以安全地使用 AES。请注意，有一个重要的警告：如果您第二次使用相同的 NONCE，那么您会泄漏纯文本（因为您可以检索密钥流）。如果攻击者可以及时查看您的系统，这也可能适用于将新值加密到数据库中。

# java - 在 Android 应用程序和 Jersey 服务器应用程序之间共享类

> ID：11463422
> 
> 赞同：2
> 
> 时间：2012-07-13T02:38:44.103
> 
> 标签：java, android, mongodb, jersey, morphia

我正在构建一个 Android 应用程序，它将与使用 Java 和 Jersey 构建的 Web 服务进行通信。

我目前组织了三个项目：

*   core (common) 是我的领域模型的一组简单 POJO
*   客户端 (android) 是 Android 应用程序
*   server (jersey) 是一个 Jersey 应用程序，将数据存储在 MongoDB 中，并依赖于 Morphia 库进行持久化。

核心库是其他两个项目的依赖项。

问题是我在“核心”中创建了一组实体类，但这些类是使用注释为 Morphia 配置的。这意味着 Morphia 反过来成为我的 Android 应用程序的依赖项，我并不特别喜欢它。

理想情况下，Morphia 将允许通过平面文件进行配置，但它仅支持通过注释配置实体类。

我应该吸收依赖于 Morphia 的“核心”的丑陋依赖，还是有更好的方法来组织我没有想到的课程？

*注意：*我已经尝试从核心类中删除 Morphia 注释，并在“服务器”项目中创建了继承“核心”类并添加 Morphia 注释的新类。但是，如果我的 Jersey 应用程序从服务器项目返回类，则 Android 客户端无法将这些类与 Jersey 客户端一起使用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T23:03:16.753

我确实最终切换到了不同的 POJO 映射器。我决定和昆德拉一起去。这实际上只在我的核心项目中创建了一个依赖`javax-persistence`项（用于 JPA 注释）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T21:51:00.727

您可以从 Morphia 切换到另一个使用 Jackson 注释的 MongoDB pojo 映射器，例如[mongo-jackson-mapper](http://vznet.github.com/mongo-jackson-mapper/)或[bson4jackson](https://github.com/michel-kraemer/bson4jackson)。这样，您的 Android 项目将依赖于 Jackson 而不是 Morphia。

# width - CSS background-size-x 属性？

> ID：11463427
> 
> 赞同：3
> 
> 时间：2012-07-13T02:39:22.280
> 
> 标签：width, css

我正在尝试设置背景图像的宽度——而不修改所述图像的高度。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-02-14T19:17:17.640

我认为选择的答案是错误的。您**可以**仅使用纯 CSS 3 来实现，使用`background-size: 100% auto`自动推断的高度或`background-size: auto 100%`自动推断的宽度。该比率将保持不变。仅当您使用`background-size: 100% 100%`（缩写为`background-size: 100%`）时，比率才会发生变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T02:47:06.083

### 在 CSS3 之前

要完全控制背景图像，您可以创建一个非常低的 div`z-index`并使`position:absolute; top:0; bottom: 0;`所有内容都漂浮在其上方。

如果您不想对图像的高度进行硬编码，则需要使用 javascript 进行拉伸，否则它将仅根据*width*和*height*之间的比率进行缩放。

* * *

### CSS3

在[css3](/questions/tagged/css3 "显示标记为“css3”的问题")中，您可以使用属性`background-size`，但这里是一样的。如果您不希望图像根据*width*和*height*之间的比率进行缩放，则需要使用 javascript 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T04:19:20.210

您可以使用 timthumb 库来做到这一点 - 它可以裁剪可以实现您需要的图像。您需要安装 tim thumb（例如 timthumb.php），然后将您的图像更改为指向您的 timthumb 页面并通过图像的 html 编码 url。它对其进行处理，使其成为您需要的宽度，而无需修改图像的高度。

# javascript - 滚动到底部后，如何将内部 div 更改为固定？

> ID：11463429
> 
> 赞同：0
> 
> 时间：2012-07-13T02:39:56.303
> 
> 标签：javascript, jquery, css, html

我在一个 div 中有一个 div，我想让内部 div 成为绝对的，但是在滚动到底部时它会变成一个固定的 div。它现在是一个侧边栏，我希望它与中间滚动，直到它位于 div 的底部，然后将其固定。

任何想法？

我试着弄乱这段代码，但我似乎无法弄清楚：

```
 <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js?ver=1.3.2'></script>
    <script type="text/javascript">
        $(function() {
            var offset = $("#right_side_bar").offset();
            var topPadding = 15;
            $(window).scroll(function() {
                if ($(window).scrollTop() > offset.top) {
                document.getElementById("#right_side_bar").style.position = 'fixed';

                } else {

                };
            });
        });
    </script> 
```

图片：http: [//i.stack.imgur.com/S2Nbi.png](http://i.stack.imgur.com/S2Nbi.png)

所以上面的代码不起作用，但这里是对该问题的进一步解释。我有一个名为容器的巨大 div。然后是一个名为“right_side_bar”的右侧边栏。right_side_bar 的内容比显示的要多，所以我希望它与容​​器一起滚动，但只要所有内容都显示在 right_side_bar 中（意味着用户已经滚动到底部）然后我希望它停止与页面一起滚动并变得固定。如果滚动回到顶部，那么它应该再次变为绝对。让我知道这是否有意义！

[http://i.stack.imgur.com/S2Nbi.png](http://i.stack.imgur.com/S2Nbi.png)

```
 #right_side_bar{
position:absolute;
margin-top:38px;
    width:272px;
    margin-left:722px;
    background-color:#FFF; /* D6E6F7 */
    height:100%;
    overflow:scroll;
    z-index: 0;
}

#container{

    width: 994px;
    /*height: 885px;*/

    background-color: #D6E6F7;
    font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    /*padding-bottom: 30px;*/
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:09:03.717

根据您的要求，我创建了一个外部 div ( `#outer`) 和一个内部 div ( `#inner`)，据我了解，您希望内部 div 在滚动到底部后变得固定。

以最原始的形式，我认为我已经完成了您的要求（尽管我不是 100% 确定问题是什么）

示例： -http: [//jsfiddle.net/eQtrG/12/](http://jsfiddle.net/eQtrG/12/)

html:

```
<div id="container">
 <!-- LOTS OF CONTENT -->
    <div id="right_side_bar">
      <!-- LOTS OF CONTENT -->
    </div>
 <!-- LOTS OF CONTENT -->
</div> 
```

CSS：

```
#container { position: absolute; width: 100%; background: #CCC; }
#right_side_bar {position: absolute;width:100%; height: 100px; background: #FF0000; overflow-x: hidden; overflow-y scroll; margin:0px;z-index: 9999; top: 250px; } 
```

​ jQuery：

```
$("#container").scroll(function(){
  $("#right_side_bar").scrollTop($("#container").scrollTop());
});

$('#right_side_bar').bind('scroll', function() {
 if($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {
     $(this).css({position:'fixed', top: '60px'})
 }
         else
         {
         $(this).css({position:'absolute', top: '250px'})
         }
});
​ 
```

​​​​</p>

​</p>

# python - 在 Python 中具有内联响应的 GNOME Shell 通知

> ID：11463432
> 
> 赞同：4
> 
> 时间：2012-07-13T02:40:15.223
> 
> 标签：python, notifications, gnome-shell

我发现 GNOME Shell 中最有用的功能之一是能够直接从通知中响应 IM。但是，我找不到任何关于如何创建这样的通知的文档。可以用 Python 完成吗？

![这就是我所指的](../Images/7fcfe262ea94a1f222aedfe17a6470e0.png)

# c# - 动态加载第 3 方程序集

> ID：11463433
> 
> 赞同：0
> 
> 时间：2012-07-13T02:40:23.940
> 
> 标签：c#, .net, assemblies, mef

我们有一个场景，我们构建了一个 API，我们将提供给第三方来开发他们自己的包以与我们自己的包一起运行。第 3 方将是我们的兄弟/姐妹公司，因此就他们构建的内容而言，他们可以被认为是“受信任的”（我们当然会在将其代码放入我们的实际环境之前对其进行审查，但至少不用担心恶意内容）。

我们内部开发的包是通过 MEF 进行自省和调用的，所以我们希望对第 3 方做同样的事情。我想我的问题是什么是实现这一目标的最佳方法？我最初的想法是创建一个 ExternalDLLs 文件夹，当我们想要添加第 3 方包时，我们将在其中发布。然后我们的系统将需要自省启动时可用的内容......看看是否有任何新内容要添加（我们会将所有这些记录在数据库中）并在需要时添加。这行得通吗？有没有更好的办法？还有其他需要注意的问题吗？

如果我不清楚，请告诉我，我会澄清，非常感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:02:57.720

好吧，如果您已经在使用 MEF，那么您只需`DirectoryCatalog`为您的 ExternalURLs 文件夹添加一个，然后[您就完成了](http://mef.codeplex.com/wikipage?title=Using%20Catalogs).

# java - Project Euler #22 in Java(off by 7 364 934)

> ID：11463435
> 
> 赞同：1
> 
> 时间：2012-07-13T02:40:31.447
> 
> 标签：java, regex, string

Using names.txt (right click and 'Save Link/Target As...'), a 46K text file containing over five-thousand first names, begin by sorting it into alphabetical order. Then working out the alphabetical value for each name, multiply this value by its alphabetical position in the list to obtain a name score.

For example, when the list is sorted into alphabetical order, COLIN, which is worth 3 + 15 + 12 + 9 + 14 = 53, is the 938th name in the list. So, COLIN would obtain a score of 938 53 = 49714.

What is the total of all the name scores in the file?

I am getting 863833348 but the correct answer is 871198282\. I am not sure what is wrong, I have tried all things but could not figure out the problem.

Code:

```
public static void main(String args[]) throws IOException {

    String alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    Pattern testRegEx=Pattern.compile("[^\\\"]\\w+[^\\\",]");

    String line;
    String filePath="//Users//painkillerfff//Documents//names.txt";
    BufferedReader readTextFile=new BufferedReader(new FileReader(filePath));

    List<String> nameList=new ArrayList<String>();
    while((line=readTextFile.readLine())!=null){
        //System.out.println(line);
        Matcher matcher=testRegEx.matcher(line);
        while(matcher.find()){
            nameList.add(matcher.group());
            //System.out.println(matcher.group());
        }
    }
    Collections.sort(nameList);

    long sumOfWords=0;
    long namePoint=0;
    long nameRank=1;
    for(String name: nameList){
        namePoint=0;
        for(int i=0;i<name.length();i++){
            namePoint+=alphabet.indexOf(name.charAt(i))+1;
        }
        namePoint=namePoint*nameRank;
        sumOfWords+=namePoint;
        nameRank++;
    }
    System.out.println("The Total Points is: "+sumOfWords);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T03:40:24.130

Your regexp is flawed somehow. A count of commas shows there are 5163 names, yet you post there are 5130.

Help me understand the regexp and we'll probably figure it out.

This is my version - no regexp needed.

```
 while ((line = readTextFile.readLine()) != null) {
        sb.append(line);
    }
    line = sb.toString();
    line = line.replace("\"", "");
    String[] a = line.split(",");
    System.out.println(a.length); 
```

Of course you should use real variable names, not `a` ;-)

EDIT - I changed your regexp to

```
 Pattern testRegEx = Pattern.compile("\\w+"); 
```

and it returned 5163 names.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T22:50:09.810

Here is another implementation:

```
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.Arrays;

public class P22 {
    public static void main(String args[]) {
        String content = null;
        try {
            content = new String(Files.readAllBytes(Paths.get("p022_names.txt")));
        } catch (IOException ioe) {
            ioe.getStackTrace();
        }
        String words[] = content.split("\",\"");
        int total = words.length;
        words[0] = words[0].substring(1);
        words[total-1] = words[total-1].substring(0,words[total-1].length()-1);
        Arrays.sort(words);
        int sumOfProducts = 0;
        int base = 'A'-1;
        for ( int i = 0 ; i < total ; i++ ) {
            int sum = 0;
            int len = words[i].length();
            for ( int j = 0 ; j < len ; j++ ) {
                sum+=words[i].charAt(j)-base;
            }
            sumOfProducts+=sum*(i+1);
        }
        System.out.println(sumOfProducts);
    }
} 
```

**Total time: 56 ms**

**Explanation:**

*   The file is read and it is stored into a string
*   The string is splitted by `","`. The result is an array of words that has to be adjusted for the first and the last words because there is an extra `"` at the beginning / end.
*   The array is sorted using `Arrays.sort`
*   For every word, the position is `i+1` (because `i` starts from `0`) and the sum is calculated using the fact that a `char` is actually an integer.

# php - 缩短全名，所以姓氏只是第一个字母

> ID：11463436
> 
> 赞同：4
> 
> 时间：2012-07-13T02:40:50.767
> 
> 标签：php, string, trim

在阅读了一些已经提出的问题并检查了其他一些网站之后，我仍然没有进一步找到一种简单的方法来取一个全名，比如说“Jake Whiteman”并将其修剪下来，以便在网络上显示页面为“Jake W”。显然它周围没有语音标记，所以那里没有任何混乱。

有人知道怎么做吗？我敢肯定这可能只是找到空白然后修剪姓氏的问题，我似乎无法找到一种方法。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T02:54:59.493

```
$names = explode( " ", $name );
echo $names[0]." ".$names[1][0]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T03:03:17.550

您可以使用此代码。这将适用于 3 个单词的名称，其中假设第二个单词是中间名，只有姓氏会被截断。

```
<?php

$name = "Jake Awesome Whiteman";
$separate = explode(" ", $name);
$last = array_pop($separate);

echo implode(' ', $separate)." ".$last[0].".";

?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T02:56:36.003

假设它们始终采用“[Other Names] LastName”格式，这样最后一个单词始终是姓氏，您可以通过 php 函数explode() (http:/ /php.net/manual/en/function.explode.php)

```
// Given
$name = "Jake Whiteman";

// Process
// Tokenize, getting separate names
$names = explode(' ', $name);
// Pop last name into variable $last_name, keep remaining names in $names
$last_name = array_pop($names);
// Get last initial
$last_initial = $last_name[0];

// Put first names back together
$beginning = implode(' ', $names);
$full_name = $beginning.' '.$last_initial.'.'; 
```

您可以将所有这些放在一个函数中：

```
function nameWithLastInitial($name) {
    $names = explode(' ', $name);
    $last_name = array_pop($names);
    $last_initial = $last_name[0];
    return implode(' ', $names).' '.$last_initial.'.';
}
$name = "Jake Whiteman";
echo nameWithLastInitial($name); // Should print 'Jake W.' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T02:56:08.543

```
$name = "Jake Whiteman";
$names = explode(' ', $name); //$names[0] = "Jake", $names[1] = "Whiteman"
echo $names[0]." ".substr($names[1], 0,1)."."; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-06T13:24:22.403

当只有名字和用户输入多个名称时，这将很有帮助

```
<!DOCTYPE html>
<html>
<head>
<title></title>
</head>
<body>
<?php

$userName = "Jakeds hfg gsd";
if(preg_match('/\s/',$userName)) {
$separate = explode(" ", $userName);
$last = array_pop($separate);
$first = mb_strimwidth($separate[0], 0 , 15);
echo $first." ".$last[0].".";
} else {
$first = mb_strimwidth($userName, 0 , 15);
echo $first;
}

//echo $first." ".$last[0].".";

?>
</body>
</html> 
```

# core-animation - 带有 CALayer 路径的 CABasicAnimation 不设置动画

> ID：11463438
> 
> 赞同：20
> 
> 时间：2012-07-13T02:40:54.707
> 
> 标签：core-animation, calayer, uibezierpath, cgpath, cabasicanimation

我正在尝试动画化 CALayer 从正常角到圆角的过渡。我只想圆顶角，所以我使用的是 UIBezierPath。这是代码：

```
UIRectCorner corners = UIRectCornerTopLeft | UIRectCornerTopRight;

UIBezierPath* newPath = [UIBezierPath bezierPathWithRoundedRect:self.bounds byRoundingCorners:corners cornerRadii:CGSizeMake(8.0f, 8.0f)];
UIBezierPath* oldPath = [UIBezierPath bezierPathWithRoundedRect:self.bounds byRoundingCorners:corners cornerRadii:CGSizeMake(0.0f, 0.0f)];

CAShapeLayer* layer = [CAShapeLayer layer];
layer.frame = self.bounds;
layer.path = oldPath.CGPath;

self.layer.mask = layer;

CABasicAnimation* a = [CABasicAnimation animationWithKeyPath:@"path"];
[a setDuration:0.4f];
[a setFromValue:(id)layer.path];
[a setToValue:(id)newPath.CGPath];

layer.path = newPath.CGPath;
[layer addAnimation:a forKey:@"path"]; 
```

但是当我运行它时，角落是圆的，但没有动画——它会立即发生。我在这里看到了一些类似的问题，但它们并没有解决我的问题。

[iPhone CALayer 动画](https://stackoverflow.com/questions/5065073/iphone-calayer-animation)

[动画 CALayer 的 shadowPath 属性](https://stackoverflow.com/questions/5924734/animating-calayers-shadowpath-property)

我确定我只是做错了一件小事，这导致了问题，但对于我的生活，我无法弄清楚。

**解决方案：**

```
- (void)roundCornersAnimated:(BOOL)animated {
    UIRectCorner corners = UIRectCornerTopLeft | UIRectCornerTopRight;

    UIBezierPath* newPath = [UIBezierPath bezierPathWithRoundedRect:self.bounds byRoundingCorners:corners cornerRadii:CGSizeMake(8.0f, 8.0f)];
    UIBezierPath* oldPath = [UIBezierPath bezierPathWithRoundedRect:self.bounds byRoundingCorners:corners cornerRadii:CGSizeMake(0.0001f, 0.0001f)];

    CAShapeLayer* layer = [CAShapeLayer layer];
    layer.frame = self.bounds;

    self.layer.mask = layer;

    if(animated) {
        CABasicAnimation* a = [CABasicAnimation animationWithKeyPath:@"path"];
        [a setDuration:0.4f];
        [a setFromValue:(id)oldPath.CGPath];
        [a setToValue:(id)newPath.CGPath];

        layer.path = newPath.CGPath;
        [layer addAnimation:a forKey:@"path"];
    } else {
        layer.path = newPath.CGPath;
    }
} 
```

实际上，我需要做的就是为动画设置一个适当的“来自”值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T13:16:30.637

在我看来，您正在创建一个没有路径的形状图层，然后尝试为它添加路径的动画。形状图层是特殊情况，不能那样工作。

您必须在动画之前和之后的形状层中有一条路径，并且路径需要在之前和之后具有相同数量的点。

您需要创建一个圆角半径为 0 的圆角矩形路径（手动，使用一系列边和角弧），然后为要圆角的角构建一个半径非零的新路径并将该路径安装为你的动画。

但是，即使这样也可能行不通，因为路径中需要具有完全相同数量的点，并且我怀疑当半径为零时弧会简化为点。

我刚刚发现了一个 UIBezierPath 调用，它将创建一个矩形，您可以在其中选择要圆角的角。调用是 bezierPathWithRoundedRect:byRoundingCorners:cornerRadii:

这将创建一个具有任意数量圆角的矩形。但是，我不确定它是否适用于路径动画。您可能需要请求将所有角都倒圆，并将 2 个非圆角设置为零半径。这样，您可能会获得与圆角矩形路径具有相同点数的路径，因此路径动画可以正常工作。你必须尝试一下。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-10T09:29:59.940

试着把：

```
layer.path = newPath.CGPath; 
```

后：

```
[layer addAnimation:a forKey:@"path"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-13T07:47:37.617

[在这里](https://drewag.me/posts/2013/06/03/implicit-animation-for-cashapelayers-path)找到了 Andrew Wagner 的一个非常优雅的解决方案。

基本上系统将处理所有路径更改动画，您只需要：

1.  实现一个 CAShapeLayer 子类
2.  覆盖和实施`actionForKey`
3.  照常更新路径，您将获得动画！

# ruby-on-rails - 使用 UIImagePickerController 将图像上传到 rails 上的蜻蜓

> ID：11463440
> 
> 赞同：0
> 
> 时间：2012-07-13T02:41:21.900
> 
> 标签：ruby-on-rails, ios, ruby, uiimagepickercontroller, dragonfly-gem

我有一个适用于 iOS 的应用程序，我让用户使用 UIImagePickerController 选择图像。如何使用蜻蜓将该图像上传到我的 Rails 应用程序。我想我会使用 multipart-image-data 但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:51:09.260

最简单的方法是将“比特包”（图像数据）交给[AFNetworking](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ)以将其上传到您的 Rails 应用程序。

*编辑*要回答有关如何处理上传的问题，您可以这样做。记得设置AFNetworking中使用的名字和params key一样

```
def uploadFile
    post = DataFile.save(params[:upload])
    render :text => "File has been uploaded successfully"
end 
```

# java - HashMap，get时可能是原子的，保证key已经完全放好

> ID：11463443
> 
> 赞同：0
> 
> 时间：2012-07-13T02:42:02.427
> 
> 标签：java, multithreading

我的代码：

```
class Pair {
    public String key;
    public String value;
}
Iterator<Pair> pairs;
HashMap<String, String> map = new HashMap<String, String>();
while (pairs.hasNext()) {
    Pair p = pairs.next();
    map.put(p.ket, p.value)
    // then put p.key to another thread for RPC
    // after returned, lookup the hashmap, join the result and p.value, and output 
} 
```

每次 RPC 完成后，线程池都会查找 hashmap，将 RPC 结果和键值连接起来。这是原子的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T02:46:33.337

不，`HashMap`该类不是线程安全的。您将需要添加额外的同步。

# django - Django 模型选择推荐（具体设置）

> ID：11463444
> 
> 赞同：1
> 
> 时间：2012-07-13T02:42:09.353
> 
> 标签：django, model, choicefield

我正在寻求有关在某些模型之间设置选择的建议。一个模型中可能的选择取决于先前选择的另一个模型的选择。

我有一个产品，我想迎合两个不同的受众，特别是本科生和同等研究生。我正在跟踪学校、他们的年级和这些学校的课程。在此设置中，如果学生是本科生，则必须是大一、大二、大三、大四或其他，如果他们是研究生，则必须是大一、二年级、大三、四年级或其他。我的问题是如何最好地设置外键选择，以便当他们的学校具体属于“本科”或“研究生”类型时，这会反映在他们的年份选择中，这样他们就会被限制为之前指定的特定于他们学校类型的选择. 一些示例模型：

```
class StudentType(models.Model):
    STUDENT_TYPE_CHOICES = (
        ('graduate', 'Graduate'),
        ('undergrad', 'Undergraduate'),
    )
    name = models.CharField(max_length=100, choices=STUDENT_TYPE_CHOICES)

class School(models.Model):
    name = models.CharField(max_length=100, unique=True)
    student_type = models.ForeignKey(StudentType)

class Year(models.Model):
    name = models.CharField(max_length=100, choices=????)
    school = models.ForeignKey(School, related_name="years") 
```

我将不胜感激填写`choices`年份模型的名称列的参数。如前所述，此参数取决于模型的学校。这是一种可能吗？我应该简单地将所有选择（即本科和研究生院的选择）结合在一起吗？

# node.js - 插入（使用安全：真）没有在nodeJS中向MongoDB插入任何东西，尽管说它确实如此

> ID：11463447
> 
> 赞同：0
> 
> 时间：2012-07-13T02:42:58.263
> 
> 标签：node.js, mongodb

我有一个相对广泛的 web 应用程序，它全部使用 mongodb-node-driver 在 NodeJS 和 MongoDB 中构建。现在我遇到了最奇怪的问题。

我有这个功能：

```
function newLoc(req, res){
    var newloc = req.body;
    console.log(JSON.stringify(newloc));
    locs.insert(newloc,{safe:true},function(err,doc){
        if(err) returnError(res,'aww shit locinsertion error!\n\n'+err.message);
        else{
            console.log(doc[0]);
            returnSuccess(res,"The ID of the location you just added is: "+doc[0]['_id']);
        }
    });
} 
```

一切都已正确设置（就连接打开而言）并且 returnSuccess 工作正常。`req.body`包含来自通过 POST 发送的表单的数据。两个 console.log 都打印相同的内容，除了第二个添加了“_id”并且所有键都没有引号。

但是，没有任何东西进入数据库。没有错误，文档就像插入一样返回，但没有添加任何内容。这尤其奇怪，因为这在我的代码中的任何其他地方都不是问题（而且我做了很多插入）。

更令人困惑的是，如果我`newloc`将插入更改为`{foo:bar}`，它确实会插入。有人对可能发生的事情有任何想法吗？

**响应 christkv 的请求进行**编辑，这里是打印的对象：****

 **```
{"music":"art","array":[],"name":"sdf","info":"","date":"asdf","_id":"fSURBOvCU"}

{ muic: 'art',
  array: [],
  name: 'sdf',
  info: '',
  date: 'asdf',
  _id: 'fSURBOvCU' } 
```

并且在“mongod”进程输出中没有打印任何内容，我认为这也是记录任何错误的地方。

此外，当`console.log(JSON.stringify(newloc))`JSON.stringify 被移除时，输出是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:26:52.763

好的，我想我已经想通了。我的集合创建代码最初如下所示：

```
 db.createCollection('place', function(err, pplace){
  if(err){
    console.log('db.createCollection error!');
    console.log(err);
    return;
  }
        db.createCollection('tips', function(err, tipps){
            if(err){
                console.log('tips didnt get made: \n'+err);
            }
            else{
                                    place = pplace;
                tips = tipps;
                console.log(' place tips created');
            }
        }); 
 }); 
```

我不会在其他任何地方创建位置或提示，因为如果您不给它一个“var”，javascript 会自动使某些东西成为全局。

现在，我在创建后将 place = pplace 移动到 if 语句的正下方，并且我还在`var place, tips;`上面添加了一个 up 。这似乎已经解决了这个问题，现在我扔给我的代码的所有东西似乎都正确地插入了我的集合中。

不过，我仍然对这将如何改变任何事情感到完全困惑，看看我如何获得成功插入的通常响应，而不是失败的插入......有什么想法吗？**

# android - bogoMIPS 值正在改变

> ID：11463448
> 
> 赞同：3
> 
> 时间：2012-07-13T02:43:09.657
> 
> 标签：android, performance, linux-kernel, arm, cpu-speed

我一直在阅读三星 Galaxy (sgh-i897) 上的 cpuinfo 文件以检索 bogoMIPS 值。而现在正在学习如何解释这些信息。

最初，我在加载线程的主要活动下执行此操作，并且始终得到 997.59 的值。然后我将文件读取方法移动到服务中，因为直到很久以后我才需要它在 UI 中。一旦我这样做了，我读取的值就变得非常不同，并且似乎随着每个应用程序的启动而变化，总是慢得多，比如在 300 到 500 的范围内。

我的问题是：

1.  Android OS / Linux 是否会导致测量 bogoMIPS 值并定期修改 cpuinfo 文件？

2.  如果是这样，是否有一种程序化的方式来强制它？

3.  为什么它会根据我是否从服务读取文件而不是主活动线程而有所不同？

4.  最终，如果想要最正确的数字，最好简单地编写我们自己的时序循环，以便在我们需要的时候自己得到它？（假设它一直在变化，由于cpu负载，无论如何？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T03:18:16.320

简短的回答：如果您没有破解内核，请不要打扰 BogoMIPS。

# 这是什么 BogoMIPS 的东西？

操作系统内核执行的大多数任务都涉及等待硬件，或者最近，等待在其他处理器内核上运行的进程。内核有多种方法可以在不同的时间尺度上等待。在最短的时间内，它通常会简单地“绕圈跑”，在技术上更称为“忙等待循环”。

BogoMIPS 基准测试只是一个繁忙的等待循环。内核运行这样一个循环，使用一个非常可靠的挂钟对其计时，并确定它需要多长时间运行一个繁忙的等待循环来等待特定的时间。

# 为什么 BogoMIPS 值会发生变化？

当计算机（在这种情况下为智能手机）没有执行大量工作时，它很少需要非常快的处理器。当操作系统注意到它可以使用低于最大频率时，它可能会将处理器降低到较低的频率。这是操作系统可以减少能源使用（与电池供电的计算机相关）和热量产生（与几乎所有事物相关）的方法之一。

当然，当最大频率降低时，BogoMIPS 基准测试的结果不再相关，因为繁忙等待循环中的每次迭代都会花费更长的时间。内核将重新运行基准测试并更新 BogoMIPS 值，因此忙碌等待仍然是短时间等待的可靠方式。

当处理需求增加并且处理器需要再次加速时，类似的情况也成立。

# 我应该如何使用这个 BogoMIPS 值？

除非您正在破解内核中处理时序的某些部分，否则您不应该被 BogoMIPS 值所困扰。事实上，您应该使用BogoMIPS 值以外的任何值**。**可能有一些方法可以使用 Android SDK 或使用`/sys`文件系统提供的信息来确定当前的 CPU 频率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T03:12:59.330

您不能强制更改 bogoMIP，因为在 Android 下，这在各种因素下是相当喜怒无常的，最初是在开始时（与任何其他 Linux 内核相同），`jiffies`在初始启动时（`arch/arm/boot/smp.c`以及`arch/arm/boot/vmlinux.lds.S`在内核源代码中）使用的是决定bogoMIPS（不要认为这是理所当然的，这就是其“***虚假***”本身的部分原因）。

影响 bogoMIPS 偏斜的因素归结为

*   有多少服务/小部件/应用程序正在运行？
*   CPU 是否欠频/超频？什么频率？
*   什么样的调度程序到位（其中有几个，截止日期/按需/交互式等等）
*   内核是如何构建的？优化了吗？用于构建它的配置是什么？

用于“存储”cpu 信息值的数据存储在`/proc`文件系统内启动时创建的虚拟目录中，它在那里，可见，并且大多数（如果不是全部）文件都是零字节，但可以从中读取. 它是在引导时动态创建的。

# php - php 在我的数组中获取数据

> ID：11463449
> 
> 赞同：0
> 
> 时间：2012-07-13T02:43:18.510
> 
> 标签：php, arrays, string

我有一个以下变量变量

```
$test="<title>This is 1 test | "best"</title>, <title>This is 2 test | "best"</title>,     <title>This is 3 test | "best"</title>, <title>This is 4 test | "best"</title>, <title>This is 5 test | "best"</title>"; 
```

我希望数据按以下顺序排列，通过使用数组并从头开始 获取**“标题”和最后的****“最佳”/标题**。

```
This is 1 test
This is 2 test 
This is 3 test 
This is 4 test 
This is 5 test 
```

谢谢和亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:48:19.820

```
$test='<title>This is 1 test | "best"</title>, <title>This is 2 test | "best"</title>,     <title>This is 3 test | "best"</title>, <title>This is 4 test | "best"</title>, <title>This is 5 test | "best"</title>';    
$array = explode(' , ', trim(str_replace(array('"best"', '|'), '', strip_tags($test))));
print_r($array); 
```

[键盘](http://codepad.viper-7.com/3IVA0W)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:50:52.553

首先，变量`$test`无效，您需要将其中的双引号转义或使用单引号作为值。

```
<?php
$test = '<title>This is 1 test | "best"</title>, <title>This is 2 test | "best"</title>,     <title>This is 3 test | "best"</title>, <title>This is 4 test | "best"</title>, <title>This is 5 test | "best"</title>';

$test = str_replace(array('<title>', '| "best"</title>'), array('',''), $test);

$array = explode(", ", $test);

print_r($array); 
```

# php - 在while循环PHP中实现不同的变量

> ID：11463451
> 
> 赞同：0
> 
> 时间：2012-07-13T02:43:51.620
> 
> 标签：php, variables, while-loop

例如，我有一个表单，我通过数组将值发布到下一页。我想创建一个while循环来单独打印出变量。这是我的问题。我真的有一个 XML 文档。这个 XML 文档我希望它改变变量。所以我假设实现我通过表单中的数组传递的值需要某种循环的帮助，所以我猜测 while 循环会有所帮助，因为我需要停止循环。

所以我有一个酒店表格。如果有两个房间，我想让 while 循环停在两个并插入数组表单中的值。我知道如何设置一个 while 循环，只需要一些指导来将不同的值插入到 xml 文档中。

下面是示例： * 有两个房间我希望标签 0 和标签 1 进入子属性标签，子 2 和子 3 进入子属性标签内的第二个循环。

```
$label[0];
$label[1];
$label[2];
$label[3];
$NumberOfRooms = $_POST['NumbersOfRooms']; 
$count = '0';

while ($count > $NumberOfRooms){ //Assuming that there is two rooms 
$xml = '<checkIn>2012-10-15 </checkIn>
<checkOut>2012-10-18</checkOut>
<numberOfAdults>1</NumberOfAdults>
<numberOfChilderen>2</NumberOfChilderen>
  <ChildAges>
  <childAge age ='."3".' /> $label[0]; 
  <childAge age ='."3".' /> $label[1]
  </ChildAges>';
$count++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:36:31.347

我认为这段代码应该为您解决问题。

```
<?php
    $label[0];
    $label[1];
    $label[2];
    $label[3];
    $NumberOfRooms = $_POST['NumbersOfRooms']; 
    $xml="";

    for($count=0; $count<$NumberOfRooms; $count++)
    {
    $xml .= '<checkIn>2012-10-15 </checkIn>
    <checkOut>2012-10-18</checkOut>
    <numberOfAdults>1</NumberOfAdults>
    <numberOfChilderen>2</NumberOfChilderen>
      <ChildAges>
      <childAge age ='.$label[floor($count*2))].' />  
      <childAge age ='.$label[floor($count*2)+1].' />
      </ChildAges>';
    }
?> 
```

我在您的代码中看到的错误如下：

*   你`$count`被定义为一个字符串。您正在将其与数字进行比较。
*   其次，假设`$count`从零开始，它怎么会大于房间数量？我想你搞砸了`<`。`>`
*   `$xml`每次循环遍历 while 语句时，您都在覆盖变量。
*   Lastly, it is just my opinion, but if you know you only want to loop through a certain number of times, use a `for` loop over a `while` - there is less chance of muddling up the logic/drop out conditions.

# mysql - 默认情况下，OSX 上的 MySQL 在哪里写入输出文件？

> ID：11463452
> 
> 赞同：5
> 
> 时间：2012-07-13T02:44:00.803
> 
> 标签：mysql, macos, into-outfile

我正在尝试将 MySQL select 语句中的一些数据写入运行 Snow Leopard 的 Mac 上的文件中。

```
select date_base, fractile_v2, gics, count(gvkey_iid)
from master
where fractile_v2 <= 15 and
      fractile_v2  != 0
group by date_base, gics, fractile_v2
order by date_base, fractile_v2
limit 100000
INTO OUTFILE '/User/my-name/Desktop/gics_v2.csv'
FIELDS TERMINATED BY ','; 
```

不幸的是，这会产生以下错误：

> 错误代码：1\. 无法创建/写入文件“/Users/andrew/Desktop/gics_v2.csv”（错误代码：13）

我假设这是一个权限问题。

`'/User/my-name/Desktop/gics_v2.csv'`当我用简单的语句替换完整的文件路径时，`gics_v2.csv`这些语句似乎运行了。但是我不知道文件保存在哪里，我找不到它。

有人知道吗？任何人都可以建议我如何解决初始写入错误吗？我以 root 用户身份运行 MySQL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T03:11:46.790

这是一个权限问题，因为您正试图让 mysql 用户写入您的私人主目录。尝试写入您在 /usr/local/ 中创建的文件夹，为了安全起见，您可以设置全局读/写权限，因为它是您的 Mac。

在 Mac 上打开终端：

> cd /usr/本地
> 
> mkdir 数据库输出
> 
> sudo chmod -R 777 DbOutput

然后返回您的代码，但更改路径：

> 选择 date_base, fractile_v2, gics, count(gvkey_iid)
> 
> 来自大师
> 
> 其中 fractile_v2 <= 15 和
> 
> fractile_v2 != 0
> 
> 按 date_base、gics、fractile_v2 分组
> 
> 按 date_base、fractile_v2 排序
> 
> 限制 100000
> 
> INTO OUTFILE '/usr/local/DbOutput/gics_v2.csv'
> 
> 以“，”结尾的字段；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T06:11:15.727

默认情况下 SELECT ... INTO OUTFILE 将文件放在数据文件所在的目录中。所以像`/path/to/datadir/databasename/gics_v2.csv`

它将文件作为服务器而不是客户端写入。所以它不是使用您用户的权限，而是使用正在运行 mysqld 进程的用户（通常是 _mysql 在osx上。）

您只需为其提供一个允许该用户写入的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-12T06:24:20.857

我知道这个问题已经过时了，但仅供参考，在我的 Mac OS X 10.10 上，`OUTPUT`目录是这样的：`/usr/local/mysql-5.7.10-osx10.9-x86_64/data/databasename/***.csv`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:14:00.870

我正在运行 Mac OS X Server 10.7.4，对我来说，OUTFILE 目录是`/var/mysql/*databasename*/`

# wpf - 为什么要在 viewmodel 上实现接口并在 mvvm 中查看

> ID：11463453
> 
> 赞同：11
> 
> 时间：2012-07-13T02:44:02.143
> 
> 标签：wpf, silverlight, mvvm, prism

我对 MVVM 模式很陌生，所以请多多包涵。我在 wpf +mvvm + prism 中看到了实现，其中所有视图都倾向于将 IView 作为最顶层的界面。然后各个模块中的视图有一个视图特定的接口，如 IViewA、IViewB 等，它们实现了 IView 接口。甚至 viewmodel 也有 IViewModel 最顶层的接口，并且后续模块有 IViewAViewModel ， IViewBViewModel 等继承自 IViewmodel。IViewmodel 具有对 Iview 的引用，而 Iview 具有对 IViewModel 的引用。

```
namespace xxx.xxx.infrastructure
{
public interface IView
{
  IViewModel ViewModel {get;set;}
}

public interface IViewModel 
{
  IView View {get;set;}
}

public abstract class ViewModelBase : IViewModel, INotifyPropertyChanged
{

   public IView View {get;set;}

   public ViewModelBase(IView view)
   {
     View = view;
     View.ViewModel = this;
   }
   //INotifyPropertyChanged left out
 }
}

namespace xxx.xxx.Modules.Customer
{
   public interface ICustomerDetailsView : IView
   {

   }

   public partial Class CustomerDetailsView : UserControl, ICustomerDetailsView 
   {
       public CustomerDetailsView ()
       {
         InitializeComponent();
       }

       //Is this implementation acceptable?The view is supposed to have zero code in       the code behind.....
        public IViewModel ViewModel
        {
          get
          {
            return (ICustomerDetailsViewViewModel)DataContext; 
          }
          set
          {
             DataContext = value;
          }
        }

    }  

    public interface ICustomerDetailsViewViewModel : IViewModel
    {
       string Message {get;set;}
    }

     public class CustomerDetailsViewViewModel : ViewModelBase,       ICustomerDetailsViewViewModel 
    {
      //Will be injected by unity as i have set up mappings in module initilize.
      public CustomerDetailsViewViewModel(ICustomerDetailsView view)
          :base(view)
      {
      }

       public string Message
       {
          //INotifyPropertyChanged left out for brevity
          get;set;
       }
   } 
```

我有几个问题。

1.）这是否违反了 MVVM，因为文件后面的代码应该是零代码？

2.）在 MVVM 视图模型中不应该担心视图或其合同？上面的实现不会破坏它吗？

3.)我不明白这个实现有什么用。事实上，这与 MVP 接壤，需要大量代码。

4.)如果这是一种可接受的实现方式，我是否需要为所有模块中的所有视图和视图模型提供接口。？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-13T05:29:45.953

首先是 Rachel 关于 viewmodel 的非常好的评论：

> 请记住，使用 MVVM，您的 ViewModel 就是您的应用程序。View 只是一个漂亮的界面，它允许用户与您的 ViewModel 进行交互。

1) IView 对我来说违反了 MVVM，但对于 ui 的东西当然允许使用代码隐藏。viewmodel 应该没有对视图的引用。见 Hasith 的第一条评论

2）看我的块引用

3）我和你在一起——我从不在我的项目中使用类似的东西

4) 请用简单的方法做 MVVM - 没有耦合，使用 di、ioc、命令、行为，对我来说最重要的是：首先是 viewmodel :)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-13T06:09:48.900

基本上，我们只需要用于注入的接口。有2种方式：

*   将 ViewModel 注入到视图中

这将意味着 ViewModel 不再有任何对 View 的反向引用。这意味着在对 ViewModel 进行单元测试时，您不需要模拟视图。此外，它使代码更清晰，因为在 View 的构造函数中，它只是将 DataContext 设置为注入的 ViewModel。

*   将视图注入 ViewModel。

它避免将工作流逻辑保留在表示层中。这意味着应用程序层继续负责应用程序工作流程。这样，工作流逻辑与视图高度耦合，因此很难为此编写单元测试。

# c - C编程动态初始化二维数组

> ID：11463455
> 
> 赞同：2
> 
> 时间：2012-07-13T02:44:13.227
> 
> 标签：c, arrays, memory, pointers

我在这里做一些愚蠢的事情，我无法确切说明是什么：

```
 void init_data(double **data, int dim_x, int dim_y) {

    int i,j,k;

    data = (double **) malloc(sizeof(double) * dim_x);
    for (k = 0; k < dim_y; k++) {
        data[k] = (double *) malloc(sizeof(double) * dim_y);
    }

    for (i = 0; i < dim_x; i++) {
        for (j = 0; j < dim_y; j++) {
            data[i][j] = ((double)rand()/(double)RAND_MAX);
        }
    }
} 
```

在 main() 中，我执行以下操作：

```
double **dataA;
int dim = 10; 
init_data(&dataA, dim, dim); 
```

但是在那之后，当我尝试打印数据时，程序崩溃了：

```
int i,j;
    for(i=0;i<dim;i++)
        for(j=0;j<dim;j++)
            printf("%d\n", dataA[i][j]); 
```

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T02:56:07.690

你在你的指针中犯了一些错误。您正在传递`&dataA`to `init_data`，因此参数类型应该是`***double`，而不是`**double`。你的第一个`malloc`也是初始化一个指针数组，而不是一个双精度数组，所以它应该是`sizeof(double *) * dim_x`. 下面的代码应该可以工作。

```
void init_data(double ***data_ptr, int dim_x, int dim_y) {
  int i,j,k;
  double **data;
  data = (double **) malloc(sizeof(double *) * dim_x);
  for (k = 0; k < dim_x; k++) {
      data[k] = (double *) malloc(sizeof(double) * dim_y);
  }

  for (i = 0; i < dim_x; i++) {
      for (j = 0; j < dim_y; j++) {
          data[i][j] = ((double)rand()/(double)RAND_MAX);
      }
  }
  *data_ptr = data;
}

void main() {
  double **dataA;
  int dim = 10;
  init_data(&dataA, dim, dim);
  int i,j;
      for(i=0;i<dim;i++)
          for(j=0;j<dim;j++)
              printf("%f\n", dataA[i][j]);
} 
```

您的第一个循环也应该有条件`k < dim_x`而不是`k < dim_y`. 在当前情况下这无关紧要，因为两个维度是相同的，但如果不是，则会导致问题。最后，您应该使用`%f`而不是`%d`在您的 中`printf`，因为双精度数的存储格式与整数不同，您可能会得到乱码而不是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T02:50:47.747

`dataA`from`main`永远不会被初始化。`data`您传递给的指针`init_data`会立即被 . 返回的指针覆盖`malloc`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T02:52:43.880

如果我想分配内存并初始化一个板，我会：

```
int
main(int argc, char *argv[])
{
  int xSize, ySize;
  int **board;

  xSize = ySize = 5;

  printf("X: %u; Y: %u\n", xSize, ySize);

  board = calloc(xSize, sizeof(int *));
  printf("%p\n", board);
  int **temp = board;

  for (i = 0; i < xSize; i++)
    {
      board[i] = calloc(ySize, sizeof(int));
      printf("%d %p\n", i, board[i]);
    }
  initializeBoard (board, xSize, ySize);
  temp = board;
  for (i = 0; i < xSize; i++)
    {
      free(*temp);
      (temp)++;
    }

  free(board);

  return 0;
} 
```

因此，初始化您的电路板，只需执行以下操作：

```
void
initializeBoard (int **board, int xSize, int ySize)
{
  int x, y;

printf("----\n");
  for (x = 0; x < xSize; x++)
    {
      for (y = 0; y < ySize; y++)
    {
printf("%3d", board[x][y]);
      board[x][y] = 0;
    }
printf("\n");
    }
} 
```

在您的情况下，请使用`double`而不是`int`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T02:55:13.193

您没有在 main() 中设置 dataA 的值。

我会更改 init_data 的定义以返回指向新数据的指针。像这样的东西：

```
double ** init_data(int dim_x, int dim_y) {
{
int i,j,k;

double **data = (double **) malloc(sizeof(double) * dim_x);
for (k = 0; k < dim_y; k++) {
    data[k] = (double *) malloc(sizeof(double) * dim_y);
}

for (i = 0; i < dim_x; i++) {
    for (j = 0; j < dim_y; j++) {
        data[i][j] = ((double)rand()/(double)RAND_MAX);
    }
}

return data;
} 
```

然后在 main()

```
double **dataA = init_data(10, 10);

int i,j;
for(i=0;i<dim;i++)
    for(j=0;j<dim;j++)
        printf("%d\n", dataA[i][j]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T03:13:59.117

您的代码有几个问题，其中大部分可以通过打开编译器警告轻松识别。

第一个问题是它`init_data`需要 a`double**`作为它的第一个参数，但是您传递的是 a `double***` *(check your compiler warnings)*。由于`init_data`正在初始化它自己分配的内存，而不是初始化您在其他地方分配的内存块，您可以删除第一个参数并返回 a `double**`。

您还为`data`. 你想要的是足够的内存`dim_x`，`double*`而*不是* `double`. 您也可以使用`sizeof(*data)`(type of `*data`is `double*`) 而不是`sizeof(double*)`.

```
data = malloc(sizeof(*data) * dim_x); 
```

由于这些s 中的每一个指向的内存块中都有`dim_x` `double*`s 和s ，因此您的第一个循环应该迭代到，而第二个循环应该迭代到.`dim_y` `double``double*``dim_x``dim_y`

此外，在 C 中`malloc`转换 (casting a `void*`) 的结果是不必要的。这个网站上有一些答案会告诉你为什么不喜欢它。

另一个问题与`printf`格式说明符有关。`%d`是 for `int`，`%f`用于`double`（`%lf`使用时`scanf`）。

现在，如果您将代码添加到`free`分配的内存中并通过类似*valgrind*的方式运行程序，您会发现您不再在内存中做任何顽皮的事情。

工作代码如下所示：

```
#include <stdio.h>
#include <stdlib.h>

double** init_data(int dim_x, int dim_y) {
   int i,j,k;
   double **data = malloc(sizeof(*data) * dim_x); /* hoping not NULL */

   for (k = 0; k < dim_x; k++) {
      data[k] = malloc(sizeof(**data) * dim_y);   /* hoping not NULL */
   }

   for (i = 0; i < dim_y; i++) {
      for (j = 0; j < dim_y; j++) {
         data[i][j] = ((double)rand()/(double)RAND_MAX);
      }
   }
   return data;
}

int main(void)
{
   double **dataA;
   int i, j, dim = 10; 
   dataA = init_data(dim, dim);

   for(i=0; i < dim; i++)
      for(j=0; j < dim; j++)
         printf("%f\n", dataA[i][j]);

   for (i = 0; i < dim; i++)
      free(dataA[i]);
   free(dataA);

   return 0;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-13T10:22:18.547

第一个错误是您传递`&dataA`给该函数`init_data`，但在该函数中您收到的值是`double **`应有的值`double ***`。因为您正在传递类型变量的指针`double **`。所以`init_data`函数原型应该如下

```
void init_data(double ***data, int dim_x, int dim_y); 
```

第二个错误在下面的语句中

```
data = (double **) malloc(sizeof(double) * dim_x); 
```

该语句应如下所示

```
*data = (double **) malloc(sizeof(double *) * dim_x); 
```

因为我们必须更新指针变量`dataA`。这样我们就可以`main`在控件退出功能后将其显示在功能中`init_data`。我们还将存储指向双精度数的指针。所以应该是`sizeof(double *)`

如下更新您的`init_data`功能

```
void init_data(double ***data, int dim_x, int dim_y) 

{      
    int i,j,k;
    *data = (double **) malloc(sizeof(double *) * dim_x);
    for (k = 0; k < dim_y; k++) 
    {         
        ((*data) + k) = (double *) malloc(sizeof(double) * dim_y);     
    }      

    for (i = 0; i < dim_x; i++) 
    {         
        for (j = 0; j < dim_y; j++) 
        {             
            (((*data) +i) +j) = ((double)rand()/(double)RAND_MAX);         
        }     
    } 
} 
```

# java - 无需等待即可调用函数

> ID：11463456
> 
> 赞同：14
> 
> 时间：2012-07-13T02:44:39.883
> 
> 标签：java, python, function, methods

嗨，我想知道是否有一种方法可以调用函数/方法（最好在 Python 或 Java 中）并继续执行而不等待它。

例子：

```
def a():
    b()  #call a function, b()
    return "something"

def b():
    #something that takes a really long time 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-13T02:46:22.897

在新线程中运行它。在此处了解 java 中的多线程和在[此处](http://www.tutorialspoint.com/python/python_multithreading.htm)[了解](http://www.tutorialspoint.com/java/java_multithreading.htm)python 多线程

Java 示例：

## 错误的方式...通过子类化 Thread

```
new Thread() {
    public void run() {
        YourFunction();//Call your function
    }
}.start(); 
```

## 正确的方式...通过提供 Runnable 实例

```
Runnable myrunnable = new Runnable() {
    public void run() {
        YourFunction();//Call your function
    }
}

new Thread(myrunnable).start();//Call it when you need to run the function 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T03:26:07.447

正如在其他答案中所指出的，从 Python 中，您可以将函数放在一个新线程中（不是那么好，因为 CPython 中的线程不会给您带来太多好处），或者在另一个使用 Multiprocessing 的进程中 -

```
from multiprocessing import Process

def b():
    # long process

def a():
    p = Process(target=b) 
    p.start()
    ...
a() 
```

（正如蒙库特的回答所说）。

但是 Python 的装饰器允许将样板隐藏在地毯下，在调用时，您“看到”只是一个普通的函数调用。在下面的示例中，我创建了“并行”装饰器 - 只需将它放在任何函数之前，它就会在调用时自动在单独的进程中运行：

```
from multiprocessing import Process
from functools import partial

from time import sleep

def parallel(func):
    def parallel_func(*args, **kw):
        p = Process(target=func, args=args, kwargs=kw)
        p.start()
    return parallel_func

@parallel
def timed_print(x=0):
    for y in range(x, x + 10):
        print y
        sleep(0.2)

def example():
    timed_print(100)
    sleep(0.1)
    timed_print(200)
    for z in range(10):
        print z
        sleep(0.2)

if __name__ == "__main__":
    example() 
```

运行此代码段时，可以获得：

```
[gwidion@caylus Documents]$ python parallel.py 
100
0
200
101
1
201
102
2
202
103
3
203
104
4
204
105
5
205
106
6
206
107
7
207
108
8
208
109
9
209
[gwidion@caylus Documents]$ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T02:55:19.043

在 python 中使用[多处理：](http://docs.python.org/library/multiprocessing.html)

```
from multiprocessing import Process

def b():
    # long process

p = Process(target=b) 
p.start() 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-13T02:47:16.890

在 Java 中，有一个标准的习惯用法：创建一个线程并运行它：

```
new Thread() {
    @Override
    public void run() {
        callMyFunction();
    }
}.start(); 
```

或者您可以创建一个 Runnable 并将其传递给线程：

```
Runnable caller = new Runnable() {
    @Override
    public void run() {
        callMyFunction();
    }
}

new Thread(caller).start(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T07:31:38.643

您最好从[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)开始，而不是直接使用原始线程。它提供池化、完成检测，并且有一些子类也有一些调度。例如：

```
...
// Create a simple instance with a single thread in the pool
ExecutorService executor = Executors.newFixedThreadPool(1); 
...
Future<Integer> future = executor.submit(new Callable<Integer>() {
    @Override
    public Integer call() {
        return YourFunction();
    }
});
...

// To wait for YourFunction() to finish, and get the result:
Integer result = future.get(); 
```

您可以向 ExecutorService 提交任意数量的异步任务；它们将并行或顺序执行，具体取决于您选择的实现、支持线程池中的线程数等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-22T17:38:36.523

由于 jsbueno 的答案不适用于所有 Windows 系统，因为 os.fork 由于操作系统的限制而无法在那里有效地工作，因此您必须在那里使用多线程来达到相同的效果。

请从 jsbueno 的答案中找到相同的代码，使用多线程而不是多处理（Python 3 版本）

```
from threading import Thread

from time import sleep

def thread_parallel(func):
    def parallel_func(*args, **kw):
        p = Thread(target=func, args=args, kwargs=kw)
        p.daemon = True
        p.start()
    return parallel_func

@thread_parallel
def timed_print(x=0):
    for y in range(x, x + 10):
        print(y)
        sleep(0.2)

def example():
    timed_print(100)
    sleep(0.1)
    timed_print(200)
    for z in range(10):
        print(z)
        sleep(0.2)

if __name__ == "__main__":
    example() 
```

# hadoop - Hbase mapreduce 错误

> ID：11463458
> 
> 赞同：12
> 
> 时间：2012-07-13T02:45:36.347
> 
> 标签：hadoop, hbase

我写作业mapreduce。输入是hbase中的一个表。

作业运行时，出现错误：

> org.apache.hadoop.hbase.client.ScannerTimeoutException：自上次调用以来已过去 88557 毫秒，超时当前在 org.apache.hadoop.hbase.client.HTable$ClientScanner.next(HTable.java:1196) 在 org 设置为 60000 .apache.hadoop.hbase.mapreduce.TableRecordReaderImpl.nextKeyValue(TableRecordReaderImpl.java:133) 在 org.apache.hadoop.hbase.mapreduce.TableRecordReader.nextKeyValue(TableRecordReader.java:142) 在 org.apache.hadoop.mapred.MapTask $NewTrackingRecordReader.nextKeyValue(MapTask.java:532) at org.apache.hadoop.mapreduce.MapContext.nextKeyValue(MapContext.java:67) at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:143) at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764) 在 org.apache.hadoop.mapred.MapTask.run(MapTask.java:370) 在 org.apache.hadoop.mapred.Child$4.run (Child.java:255) 在 java.security.AccessController。doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:396) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1083) at org.apache.hadoop.mapred。 Child.main(Child.java:249) 引起：org.apache.hadoop.hbase.UnknownScannerException：org.apache.hadoop.hbase.UnknownScannerException：名称：1502530095384129314 at org.apache.hadoop.hbase.regionserver.HRegionServer.next (HRegionServer.java:1837) 在 sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597 ) 在 org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:570) 在 org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1039) 在 sun。反射.NativeConstructorAccessorImpl。newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) at java.lang.reflect.Constructor.newInstance(Constructor.java: 513) 在 org.apache.hadoop.hbase.client.ScannerCallable.call(ScannerCallable.java:83) 在 org.apache.hadoop.hbase 的 org.apache.hadoop.hbase.RemoteExceptionHandler.decodeRemoteException(RemoteExceptionHandler.java:96) .client.ScannerCallable.call(ScannerCallable.java:38) 在 org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getRegionServerWithRetries(HConnectionManager.java:1226) 在 org.apache.hadoop.hbase.client.HTable$ClientScanner .next(HTable.java:1187) ... 12 更多newInstance(NativeConstructorAccessorImpl.java:39) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) at java.lang.reflect.Constructor.newInstance(Constructor.java:513) at org.apache.hadoop.hbase.RemoteExceptionHandler .decodeRemoteException(RemoteExceptionHandler.java:96) 在 org.apache.hadoop.hbase.client.ScannerCallable.call(ScannerCallable.java:83) 在 org.apache.hadoop.hbase.client.ScannerCallable.call(ScannerCallable.java:38) ) 在 org.apache.hadoop.hbase.client.HTable$ClientScanner.next(HTable.java:1187) 的 org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getRegionServerWithRetries(HConnectionManager.java:1226) ...还有 12 个newInstance(NativeConstructorAccessorImpl.java:39) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) at java.lang.reflect.Constructor.newInstance(Constructor.java:513) at org.apache.hadoop.hbase.RemoteExceptionHandler .decodeRemoteException(RemoteExceptionHandler.java:96) 在 org.apache.hadoop.hbase.client.ScannerCallable.call(ScannerCallable.java:83) 在 org.apache.hadoop.hbase.client.ScannerCallable.call(ScannerCallable.java:38) ) 在 org.apache.hadoop.hbase.client.HTable$ClientScanner.next(HTable.java:1187) 的 org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getRegionServerWithRetries(HConnectionManager.java:1226) ...还有 12 个org.apache.hadoop.hbase.RemoteExceptionHandler.decodeRemoteException(RemoteExceptionHandler.java:96) org.apache.hadoop.hbase.client.ScannerCallable.call(ScannerCallable. java:83) 在 org.apache.hadoop.hbase.client.ScannerCallable.call(ScannerCallable.java:38) 在 org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getRegionServerWithRetries(HConnectionManager.java:1226) 在 org .apache.hadoop.hbase.client.HTable$ClientScanner.next(HTable.java:1187) ... 12 更多org.apache.hadoop.hbase.RemoteExceptionHandler.decodeRemoteException(RemoteExceptionHandler.java:96) org.apache.hadoop.hbase.client.ScannerCallable.call(ScannerCallable. java:83) 在 org.apache.hadoop.hbase.client.ScannerCallable.call(ScannerCallable.java:38) 在 org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getRegionServerWithRetries(HConnectionManager.java:1226) 在 org .apache.hadoop.hbase.client.HTable$ClientScanner.next(HTable.java:1187) ... 12 更多java:38) 在 org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getRegionServerWithRetries(HConnectionManager.java:1226) 在 org.apache.hadoop.hbase.client.HTable$ClientScanner.next(HTable.java:1187) ... 12 更多java:38) 在 org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getRegionServerWithRetries(HConnectionManager.java:1226) 在 org.apache.hadoop.hbase.client.HTable$ClientScanner.next(HTable.java:1187) ... 12 更多

你能帮我修一下吗。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T12:07:18.480

发生扫描仪超时异常。避免超时异常通过在 hbase-site.xml 中设置属性来增加超时，该属性将在 hbase-> conf 中可用

```
 <property>
    <name>hbase.client.scanner.timeout.period</name>
    <value>900000</value> <!-- 900 000, 15 minutes -->
  </property>
  <property>
    <name>hbase.rpc.timeout</name>
    <value>900000</value> <!-- 15 minutes -->
  </property> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-19T13:39:53.953

正如 HBase 官方书籍所述：

*您可能需要在少量 RPC 和客户端和服务器上使用的内存之间找到一个最佳点。在大多数情况下，将扫描仪缓存设置得更高会提高扫描性能，但将其设置得太高也会产生不利影响：每次调用 next() 将花费更长的时间，因为要获取更多数据并需要将其传输到客户端，并且一旦超过了客户端进程可用的最大堆，它可能会以 OutOfMemoryException 终止。当将行传输到客户端或处理客户端上的数据所花费的时间超过配置的扫描仪租约阈值时，您最终将收到一个租约过期错误，其形式为抛出 ScannerTimeoutException。*

所以最好不要通过上述配置避免异常，而是将 Map 端的缓存设置得较低，使您的映射器能够在预先指定的时间间隔内处理所需的负载。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-29T14:42:04.750

您可以使用`setCaching(int noOfRows)`Scan 对象的方法来减少扫描仪一次获取的行数。

```
Scan scan=new Scan();
scan.setCaching(400);//here 400 is just an example value 
```

较大的缓存值可能会导致`ScannerTimeoutException`您的程序在消耗/处理获取的行时可能比超时值花费更多的时间。

但它也会减慢您的任务，因为扫描仪正在向服务器发出更多获取请求，因此您应该根据您的程序需要微调您的`caching`和值。`timeout`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-26T06:03:09.927

在 hbase-site.xml 中设置以下属性对我有用

```
 <property>
       <name>hbase.client.scanner.timeout.period</name>
       <value>900000</value>
  </property> 
```

如果从客户端到 RegionServer 的 RPC 调用之间的时间超过扫描超时，则会抛出此错误。例如

```
if ( RPC_call_time > Scanner_timeout ){

throw ScannerTimeoutException

} 
```

访问[我的 blogspot 了解详情](http://connect2sujit.blogspot.com/2016/09/hbase-scanner-timeout-exception-with-mr.html)

# javascript - 在 Javascript 中创建秒表

> ID：11463467
> 
> 赞同：1
> 
> 时间：2012-07-13T02:46:55.470
> 
> 标签：javascript, timer, stopwatch

我想在 javascript 中为以下用例创建一个计时器/秒表：

单击“播放”按钮时，我启动秒表并单击“暂停”时停止。然后差异给了我经过的时间。由此，我应该显示歌曲进度时间并更新它。如果歌曲播放完毕，则计时器应该从头开始（即0级），否则，它应该从它停止的状态开始。
请指导我如何在javascript中做到这一点。如何获取当前时间？（获取时间？？）

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:51:02.483

如果您使用它来显示正在播放的音频文件的当前位置，只需使用音频元素的`currentTime`属性，该属性会随着指针的位置不断更新。

或者，最基本的秒表只是`new Date().getTime()`在开始时记录，在结束时再次记录并返回差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:51:25.580

尝试这样的事情：

```
document.getElementById('play').onclick = function() { window.played = +new Date(); }
document.getElementById('pause').onclick = function() {
    var difference = (+new Date() / 1000) - window.played / 1000 < songLengthInSeconds;

    if (difference > songLenthInSeconds)
        // code for start from the beginning
    else

        // code if not fully played yet
} 
```

# c++ - 如何“清除” WinAPI 透明窗口

> ID：11463472
> 
> 赞同：8
> 
> 时间：2012-07-13T02:47:26.657
> 
> 标签：c++, winapi, gdi

我在 Win32 C++ 中创建了一个透明复选框。我做到了，因为据我所知，您不能在本机 win32 中使用透明复选框，我需要在 NSIS 安装程序中使用此复选框。

**我的问题：**重绘时，我不知道如何擦除透明背景，以便在“透明画布”上绘图。当用户更改复选框内的文本并且我需要重新绘制它时，这一点很重要。我想我遇到了每个人都必须使用透明窗口的问题。

**我可以清除透明窗口的方式是什么**，注意我熟悉 WinAPI，您无法真正清除窗口 AFAIK，因为您只是在窗口上重新绘制。所以我正在寻找关于我可以使用哪些技术来重绘窗口的建议，例如：

*   向父窗口发送重绘消息，希望重绘父窗口（位于复选框下方）而不向其子窗口（即复选框）发送消息。我试过这个，它使复选框有很多闪烁。
*   也许有一个我不知道的透明画笔/绘画功能可以用来在整个复选框窗口上绘画，这基本上会清除窗口？我试过这个它使复选框窗口由于某种原因变黑？

我的代码：

```
case WM_SET_TEXT:
{
        // set checkbox text
        // Technique 1: update parent window to clear this window
        RECT thisRect = {thisX, thisY, thisW, thisH};
        InvalidateRect(parentHwnd, &thisRect, TRUE);
}
break;
case WM_PAINT:
{
     PAINTSTRUCT ps;
     HDC hdc = BeginPaint(hwnd, &ps);
     // Technique 2:
     SetBkMode(hdc, TRANSPARENT);
     Rectangle(hdc, thisX, thisY, thisW, thisH); // doesn't work just makes the window a big black rectangle?
     EndPaint(hwnd, &ps);
}
break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:30:32.410

您需要处理`WM_ERASEBBKGND`消息。像下面这样的东西应该可以工作！

```
case WM_ERASEBKGND:
{
    RECT rcWin;
    RECT rcWnd;
    HWND parWnd = GetParent( hwnd ); // Get the parent window.
    HDC parDc = GetDC( parWnd ); // Get its DC.

    GetWindowRect( hwnd, &rcWnd );
    ScreenToClient( parWnd, &rcWnd ); // Convert to the parent's co-ordinates

    GetClipBox(hdc, &rcWin );
    // Copy from parent DC.
    BitBlt( hdc, rcWin.left, rcWin.top, rcWin.right - rcWin.left,
        rcWin.bottom - rcWin.top, parDC, rcWnd.left, rcWnd.top, SRC_COPY );

    ReleaseDC( parWnd, parDC );
}
break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T03:46:21.750

尝试删除窗口样式 WS_CLIPCHILDREN

# gwt - 一个滚动面板可以有两个滚动处理程序吗？

> ID：11463477
> 
> 赞同：0
> 
> 时间：2012-07-13T02:48:22.330
> 
> 标签：gwt, event-handling, scroll, panel

我有一个带有滚动面板的主面板。

嵌入其中的是另外两个面板，一次只显示一个。我想在每个面板中捕获主面板的滚动事件。我在两个子面板中都有一个滚动事件，但只想触发一个。我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:24:35.947

您可以向 ScrollPanel 添加任意数量的处理程序。

因此，在您要收听滚动事件的两个面板中：

```
HandlerRegistration handler = scrollPanel.addScrollHandler( new ScrollHandler() {
    @Override 
    public void onScroll( ScrollEvent event ) {
       // ... your code
    }
); 
```

# ruby-on-rails - Rails 3.2 build_association 在表单加载时使我的外键无效

> ID：11463481
> 
> 赞同：0
> 
> 时间：2012-07-13T02:48:56.603
> 
> 标签：ruby-on-rails, activerecord

我想我需要一点帮助来理解一个简单的 Rails 3.2 与嵌套表单的一对一关联是如何工作的。我有一个积分表格，当我第一次访问它时，它会加载所有内容都是空的。当我保存一切看起来不错时，它甚至有正确的外键。现在，当我尝试通过加载表单再次编辑此记录时，外键（results.pickem_id）被清空并且表单中没有任何内容。它在第二个`@pickem.build_result`被调用时被清空。我需要做什么才能允许编辑此表单？我觉得我在这里走在正确的轨道上，所以希望我错过了一些简单的东西。我只包含了相关的代码片段，但如果需要可以提供更多。

皮克姆.rb

```
 attr_accessible :result_attributes 
  has_one :result
  accepts_nested_attributes_for :result 
```

结果.rb

`belongs_to :pickem`

pickems_controller.rb

```
 def update
    @pickem = Pickem.find params[:id]

    if @pickem.update_attributes params[:pickem]
      redirect_to pickem_path(@pickem), :notice => 'The pickem has been successfully updated.'
    else
      render "edit"
    end
  end

  def results #This is the results form
    @pickem = Pickem.find params[:id]
    @pickem.build_result #:pickem_id => params[:id]
  end 
```

结果.html.erb

```
<%= simple_form_for @pickem, :html => {:class => "form-horizontal"} do |f| %>
  <%= f.simple_fields_for :result do |r| %>
    <%= r.input :pickem_id, :input_html => { :value => params[:id] }, :as => 'hidden' %>
    <%= r.input :first_name, :label => 'First Name:' %>
  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:16:24.870

试试这个。我觉得这有点乱，但也许它会起作用。

```
@pickem.result = @pickem.build_result if @pickem.result.blank? 
```

# android - Android 登录：从 MBO(SUP) 检索数据的动态查询

> ID：11463484
> 
> 赞同：0
> 
> 时间：2012-07-13T02:49:18.007
> 
> 标签：android, login, sup

我四处搜寻，但似乎找不到可以解决我的问题的答案。我试图检查用户是否登录，如果用户名和密码在数据库中匹配，它应该检查数据库并导航到下一页。我不知道我哪里出错了，因为使用下面的代码，即使用户名和密码不匹配（用户名错误而密码正确）我也能够登录，但如果密码错误（用户名正确或错误无关紧要），我设置的错误信息出现了。是因为密码是唯一被读取的并且用户名已经被覆盖了吗？我是android和java的新手，所以请帮忙。非常感谢！

```
$   public void run()
                {
                    button.setOnClickListener(new OnClickListener() {
                        public void onClick(View v) {       

                            Query query = new Query();
                            query.select("x.username, x.password");
                            query.from("AccountLogin", "x");
                            AttributeTest ts = new AttributeTest();
                            ts.setOperator(AttributeTest.EQUAL);
                            ts.setAttribute("username");
                            ts.setValue(un.getText());
                            ts.setAttribute("password");
                            ts.setValue(pw.getText());
                            query.setTestCriteria(ts);

                            QueryResultSet qs = FinalDB.executeQuery(query);
                            if (!qs.isEmpty()) {

                                Intent goToNextActivity = new Intent(FinalActivity.this,    HomePage.class);
                                startActivity(goToNextActivity);
                            } else {
                                error.setText("Login failed. Username and/or password doesn't match.");
                            }
                        }
                    });
                }
            });

        }

    }).start();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:22:28.790

Try this. check where condition or where query like this.

This code is only check password.

```
 Query query = new Query();
            query.select("x.username, x.password");
                                query.from("AccountLogin", "x");
            AttributeTest ts2 = new AttributeTest();
            ts2.setAttribute("x.password");

            ObjectList v = new ObjectList();
            v.add("password"); // use orignal password

            ts2.setValue(v);
            ts2.setOperator(AttributeTest.IN);
            query.where(ts2);

            query.setTake(take);
            query.setSkip(skip);

            lowIndex = skip;
            highIndex = lowIndex;

            if (!qs.isEmpty()) {

           Intent goToNextActivity = new Intent(FinalActivity.this,    HomePage.class);
           startActivity(goToNextActivity);
           } else {
           error.setText("Login failed. Username and/or password doesn't match.");
            } 
```

# terminal - 使用自动安装程序安装后在 Windows 上使用 Haxe

> ID：11463486
> 
> 赞同：0
> 
> 时间：2012-07-13T02:49:34.643
> 
> 标签：terminal, haxe

我最近使用默认安装程序在 Windows 7（64 位）上安装了 Haxe。安装后，我尝试在名为 Haxe 示例的文件夹中创建这些文件：

`compile.hxml`：

```
-js test.js
-main Test 
```

`Test.hx`：

```
class Test {
    static function main() {
        trace("Hello World !");
    }
} 
```

当我通过双击`compile.hxml`文件运行 compile.hxml 时，我在终端中收到以下消息：

> 错误：类 Test{ 的类名无效

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:12:48.840

我才意识到我不小心把源代码放在了`compile.hxml`，`Test.hx`反之亦然。我换了名字，编译器现在可以工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:35:15.467

它在我的机器上工作。

您可以打开命令提示符或终端，然后`haxe compile.hxml`在该目录中运行吗？

双击 HXML 文件的文件关联可能有些奇怪。

# ssrs-2008 - 获取 SSRS 2008 中打印问题的记录数

> ID：11463489
> 
> 赞同：0
> 
> 时间：2012-07-13T02:49:50.473
> 
> 标签：ssrs-2008

我有 2 个组的 SSRS 报告

GroupParent (State) with totals = CountDistinct(Fields!fieldFromDataset.Value) 这工作正常

相同字段 Fields!fieldFromDataset.Value 的 GroupChild（技术名称）

我需要添加一个最终总计，其中包含每个 groupchild 中打印的所有行数的总和

```
State   techname
================ 
NSW     techname1
        techname2
total NSW 2 techs

QLD     techname1
        techname3
        techname4 
total QLD 3 techs 
```

Final Total 5 techs ----> 我不能使用相同的表达式，因为在不同的州有一些技术名称相同的记录

我创建了另一列来显示`CountDistinct(Fields!fieldFromDataset.Value)`每个组 Parent 的表达式结果，即显示正确的值。但我不能使用这个reportItems！SUM() 中的变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:13:46.410

报告中每个 GroupChild 行是否有 1 行？如果是这样，您可以使用表达式 CountRows("GroupChild") 假设 GroupChild 是该行组的名称。

# scala - 下划线导致困难

> ID：11463492
> 
> 赞同：0
> 
> 时间：2012-07-13T02:50:12.257
> 
> 标签：scala, lambda, functional-programming, set, scala-placeholder-syntax

我有以下代码，它**应该**搜索一个数组并查看是否有任何内容与第二个参数匹配。

```
def any(check: Set[Any], expr: Boolean): Boolean = {
  var checked = check.filter(_ => expr)
  if (checked == Set())
    return false
  else
    return true
} 
```

它应该是这样调用的： `any(Set(3, 4, 5, 6), _ > 5)`

但是当我调用它时：

```
error: missing parameter type for expanded function ((x$1) => x$1.$greater(5)) 
```

我对函数式语言和 Scala 的经验很少，所以，请给我一个关于正在发生的事情以及如何解决它的彻底解释！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T03:22:15.870

问题是您评估表达式的时间之一。在您的通话中

```
check.filter(_ => expr) 
```

您正在按传入的表达式`check`的*值*进行过滤。但是在您的调用中，您传递的是一个函数，而不是一个布尔值。

我认为你的意思是传递函数，然后在你的`check`调用中评估它。例如：

```
def any[T](check: Set[T], test: T => Boolean): Boolean = {
  var checked = check.filter(test)
  if (checked == Set())
    return false
  else
    return true
} 
```

现在您可以按如下方式调用它：

```
any(Set(3, 4, 5, 6), (_:Int) > 5) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T03:07:22.873

```
Set(3, 4, 5, 6).exists(_ > 5) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T16:08:22.480

这段代码对 Scala 有一些误解。第一个需要解决的是：

```
def any(check: Set[Any], expr: Boolean): Boolean = {
  var checked = check.filter(_ => expr)
  if (checked == Set())
    return false
  else
    return true
}

any(Set(3, 4, 5, 6), _ > 5) 
```

首先，`expr`是一个`Boolean`。A`Boolean`要么是要么`true`-`false`它不能是其他任何东西。另一方面，`expr`来自“表达式”，我认为这是必须评估的一些公式。因此，`expr`并且`Boolean`不太可能匹配，一些概念问题正在发生的第一个线索。

`_ > 5`现在，您作为`expr`参数传递，但`_ > 5`既不是`true`也不是`false`。`10 > 5`会是真的，`3 > 5`会是假的，但是`_ > 5`是一个函数，而一个函数不是一个 `Boolean`.

让我们考虑下划线...的`_ > 5`意思`(x) => x > 5`。`_ > _`的意思`(x, y) => x > y`，以此类推。如果你不太理解下划线，请不要使用它。请改用完整的语法。稍后您将获得理解，无需减慢您的学习速度。

现在，我提出这个是因为另一个概念问题，那就是：

```
_ => expr 
```

这或多或少等价于`z => expr`，即完全忽略它收到的参数的函数。请注意，这里下划线的含义与上面不同。事实上，在[这个答案中，我曾经计算](https://stackoverflow.com/questions/7888944/scala-punctuation-aka-symbols-operators/7890032#7890032)**过下划线的 11 种不同含义**。在理解它们之前避免使用下划线的另一个原因。

因此，您的代码的问题在于：

1.  您正在收到一个`Boolean`您想要的`Function1[Any, Boolean]`.
2.  在计算是否应该过滤它时，您忽略了被过滤的元素（我假设因为这是唯一编译的语法，因为 1）。
3.  您正在传递一个预期为`Boolean`.

现在，即使您修复了 1 和 2 ，代码也不会工作，因为`_ > 6`它不是有效的`Function1[Any, Boolean]`，因为`Any`没有实现`>`.

我怀疑您来自动态语言背景，并`Any`用作快速“后备”，不必告诉您正在处理的事物的类型。不要这样做——使用`Any`不会让事情变得更容易，只会让事情变得更难。

还有其他两个答案显示了如何正确编写该方法，我将把细节交给他们。我只是想解决一般问题，看看我是否不能指导您将来避免此类问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-13T07:58:48.323

除了@RayToals 回答：

如果您创建多个参数列表，则可以使用 Scalas 类型推断：

```
def any[T](check: Set[T])(test: T => Boolean): Boolean = {
  val checked = check.filter(test)
  checked.nonEmpty
}

scala> any(Set(3,4,5,6))(_>5)
res6: Boolean = true

scala> any(Set(3,4,5,6))(_>6)
res7: Boolean = false 
```

注意：不要使用 return 语句（特别是不要明确地返回 true 和 false）——大多数时候它们是不需要的。此外，`var`当您不确定是否需要它时，不要使用它。最后，可以将整个方法写在一个表达式中：

```
def any[T](check: Set[T])(test: T => Boolean): Boolean =
  check.filter(test).nonEmpty 
```

# ruby-on-rails - Rails 2.3 + Ruby 1.8.7 不兼容的字符编码：UTF-8 和 ASCII-8BIT

> ID：11463506
> 
> 赞同：0
> 
> 时间：2012-07-13T02:51:57.227
> 
> 标签：ruby-on-rails, utf-8, ascii, ruby-on-rails-2, ruby-1.8.7

我在我们的应用程序的 index.rhtml 中遇到了这个问题。基本上，我在页面中有一个动态 div，w/c 显示当前登录用户项目的所有信息。

这是发生错误的片段：

```
<% projects.each do |p| %>
  <tr>
    <td><div><%=h p.location %></div></td> <- ERROR
  ... 
```

请注意，`p.location`它只返回一个字符串。

奇怪的是，这个错误不会出现在我的应用程序的本地副本中，而只会出现在生产服务器中。我的本地副本使用与生产服务器相同的环境（gems、Ruby 版本、Rails 版本）。

这是我的宝石清单

```
*** LOCAL GEMS ***
actionmailer (2.3.5)
actionpack (2.3.5)
activerecord (2.3.5)
activeresource (2.3.5)
activesupport (2.3.5)
bcrypt-ruby (2.1.2)
bson (0.20.1)
bundler (1.0.22)
composite_primary_keys (2.3.5.1)
factory_girl (2.5.1)
fastthread (1.0.7)
ferret (0.11.6)
jnunemaker-validatable (1.8.3)
mocha (0.9.8)
mongo (0.19.3)
mongo_mapper (0.7.3)
mysql (2.8.1)
rack (1.0.1)
rails (2.3.5)
rake (0.9.2.2)
redgreen (1.2.2)
rubygems-bundler (0.2.8)
rvm (1.9.2)
thoughtbot-shoulda (2.11.1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:38:55.570

找到了一种使用 iconv 修复它的 hacky 方法。基本上我强迫它使用 utf-8 编码。

在模型中：

```
class Project < ActiveRecord::Base  
...

  def location
    ::Iconv.conv('UTF-8//IGNORE', 'UTF-8', self[:location] + ' ')[0..-2]
  end

...
end 
```

但这仍然没有回答我的问题，为什么我不能在本地复制错误，它只发生在生产服务器中。

# smtp - “无法连接到主机”和请求超时问题

> ID：11463507
> 
> 赞同：0
> 
> 时间：2012-07-13T02:52:00.027
> 
> 标签：smtp, centos, connect, wget, vps

我有一个 VPS 服务器，突然之间我遇到了几个问题。首先，来自世界各地的人无法访问该站点，即使有其他人可以毫无问题地访问它，但那些无法访问它的人在尝试访问时会收到请求超时错误ping 我的服务器。

我遇到的另一个问题是，当我对某些 URL 使用 curl 时，它会引发“无法连接到主机”错误，这不是该站点的问题，因为您可以从浏览器访问它。当我尝试使用 wget 访问同一个网站时，我也遇到了类似的问题。

最后但并非最不重要的一点是，当有人试图从某些无法访问服务器的国家/地区向我的任何服务器电子邮件地址发送电子邮件时，他们会收到此错误：[SMTP：从服务器收到无效的响应代码（代码：451，响应：临时本地问题 - 请稍后再试）]

我的 VPS 在 CentOS 上，我花了几天时间试图找到一个解决方案，但没有任何运气。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:59:14.230

这听起来像是防火墙问题。CentOS 已安装 iptables，但不确定您是否添加了额外的强化。

在您最喜欢的 shell 中通过命令行尝试：

> iptables -F

然后请人尝试一下，看看是否有帮助。如果是这样，他们可能正在使用来自 ISP 的共享 IP，并且您的服务器收到错误请求并触发防火墙规则。如果您信任该方，您可以为其 IP 的防火墙规则添加例外。

我建议将您的防火墙升级到 APF（高级策略防火墙），这将为您强化 iptables，然后您可以轻松配置 APF。如果有您想要允许的 IP，您只需键入：

> apf -a IPADDRESS（或主机名）

# haskell - 如何检查 Haskell 中的数据类型？

> ID：11463512
> 
> 赞同：2
> 
> 时间：2012-07-13T02:52:56.203
> 
> 标签：haskell, types, interpreter

我正在尝试在 Haskell 中编写一个笨拙的解释器作为一个练习/有趣的项目，但我遇到了一个小问题。

Brainfuck 的“while 循环”结构只是一系列卡在括号内的命令。我正在尝试以一种将运算符存储在`[`数据构造函数内部的循环中的方式来构建语法树。

这是命令和语法“树”的数据声明目前的样子：

```
data Operator = Plus
                | Minus
                | RShift 
                | LShift
                | Dot
                | Comma
                | SBracket [Operator]
                | EBracket
                deriving (Show, Eq)

type STree = [Operator] 
```

我正在尝试做的是采用类似`String`的命令`"+><[.>]"`并将其解析为`STree`如下所示：

```
[Plus, RShift, LShift, SBracket [Dot, RShift], EBracket] 
```

到目前为止，我只能从 中得到一个一维列表`String`，因为我不确定如何检查列表的头部是否是 a`SBracket`以便将新运算符放入它的运算符列表而不是 at主列表的负责人。

这是我用来进行解析的函数：

```
matchChar :: Char -> Maybe Operator
matchChar c = case c of 
                '+' -> Just Plus
                '-' -> Just Minus
                '>' -> Just RShift  
                '<' -> Just LShift
                '.' -> Just Dot
                ',' -> Just Comma
                '[' -> Just (SBracket [])
                ']' -> Just EBracket
                _   -> Nothing

getChars :: [Char] -> STree
getChars str = foldr toOp [] str
    where 
            toOp x acc = case matchChar x of
                            Just a -> a:acc
                            Nothing -> acc 
```

我想要做的是检查是否`head acc`是一个`SBracket`实例，如果是这样，而不是将新的添加到`Operator`列表中，而是将其添加到列表中。`SBracket``Operator`

我已经尝试过模式匹配（`toOp x ((SBracket list):xs) = ...`）以及尝试*显式*检查列表的头部（`if head acc == SBracket ...`），但是这些都不能正常工作。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T03:04:45.497

首先，我将重新定义`SBracket [Operator]`为 just`Bracket STree`并摆脱`EBracket`. 然后我会更改您的解析器以跟踪“当前 STree”以及父母列表。每次遇到括号时，都会将当前树推送到父列表并创建新树。当你遇到一个结束括号时，你取出你当前的树，用`Bracket`构造函数包装它，弹出你的第一个父级，将括号添加到它的末尾并使其成为你当前的树。

* * *

这是一个完全未经测试的（在这个 comp 上没有 ghc）版本，它可能有效也可能无效：

```
data Operator = Plus
                | Minus
                | RShift
                | LShift
                | Dot
                | Comma
                | Bracket [Operator]
                deriving (Show, Eq)

parse :: [Char] -> Either String [Operator]
parse str = parse' str [] []
  where parse' :: [Char] -> [Operator] -> [[Operator]] -> Either String [Operator]
        parse' [] context [] = Right (reverse context)
        parse' [] context _ = Left "unclosed []"
        parse' (']':cs) _ [] = Left "unexpected ]"
        parse' (c:cs) ctx stack
            | c == '+' = parse' cs (Plus:ctx) stack
            | c == '-' = parse' cs (Minus:ctx) stack
            | c == '>' = parse' cs (RShift:ctx) stack
            | c == '<' = parse' cs (LShift:ctx) stack
            | c == '.' = parse' cs (Dot:ctx) stack
            | c == ',' = parse' cs (Comma:ctx) stack
            | c == '[' = parse' cs [] (ctx:stack)
            | c == ']' = parse' cs (Bracket (reverse ctx):s) tack
            | otherwise = parse' cs ctx stack
          where (s:tack) = stack 
```

# c - 使用循环遍历链表

> ID：11463514
> 
> 赞同：16
> 
> 时间：2012-07-13T02:53:38.133
> 
> 标签：c

我正在阅读有关链表的一些基本操作，我看到主要使用两种类型的循环

* * *

```
struct node {
   int data;
   struct node *next;
}*start=NULL,*tmp; 
```

第一个循环的形式是

```
for(tmp=start;tmp->next!=NULL;tmp=tmp->next); 
```

使用上面的循环，现在`tmp`指针指向列表中的最后一个节点

第二个循环的形式是

```
tmp=start;
while(tmp!=NULL)
{
     // do something
} 
```

我认为他们两个都做同样的工作，但我不确定。有什么区别吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-13T03:09:05.013

我想你的while循环是这样的。

```
temp=start;
while(temp!=NULL)
{
     // do something
     temp= temp->next;
} 
```

在您的**for 循环**代码中，当您退出**for 循环**时， temp 不指向 NULL。**temp 指向链表的末尾**。但是在**while 循环**的情况下，您的**temp 在退出 while 循环后指向 NULL**并且您没有 tail（除非您将 temp 分配给任何其他临时变量以更改程序的逻辑）如果您想使用它在进一步的步骤中。这是唯一的区别。除了没有太大区别。

您可以通过编写一个小程序并打印结果来检查它。我建议你这样做。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T03:18:35.123

循环不相同。事实上，你的`for`循环有问题。`start==NULL`考虑在进入`for`循环之前会发生什么。

```
for(tmp=start;tmp->next!=NULL;tmp=tmp->next); 
```

您分配`start`给`tmp`然后取消引用一个*NULL 指针*`tmp`。我认为您想要以下内容。

 *```
for(tmp=start;tmp!=NULL;tmp=tmp->next); 
```

这种变化使`for`and`while`循环相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T02:56:22.827

问：实际上，“不”。没有任何实质性区别；他们都做同样的工作。

您*始终*可以使用等效的“while()”编写“for()”循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-01T08:49:08.057

当我需要更改链表时，我使用 while 循环。例如

```
while (root->next)
{
    if(0 == strcmp(root->data,root->next->data))
    {
        temp = root;
        root = root->next;
        free(temp)
    }
    else
    {
        root = root->next;
    }
} 
```

当我需要对链表进行只读访问时，我使用 for 循环。*

# symfony - 使用与多个实体管理器的关系

> ID：11463517
> 
> 赞同：27
> 
> 时间：2012-07-13T02:54:18.700
> 
> 标签：symfony, doctrine-orm

我想知道是否可以在位于不同数据库中的两个实体之间创建关系。

例如，如果我们采用此处找到的解决方案[http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html](http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html)并在客户数据库中与默认数据库中的帖子创建一对多关系。

这是 Symfony2 和 Doctrine 支持的东西吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-15T18:35:05.473

使用不同的对象管理器（实体管理器）不允许对象图相交。这种情况太复杂了，不是由 Doctrine ORM 管理的。

如果您需要这种情况，请通过保存相关对象的标识符（旧样式）而不是对它们的引用来保持对象图的断开连接，然后通过服务手动获取对象。[您可以在 Doctrine2 ORM 和 Doctrine2 MongoDB ODM 之间的连接](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/cookbook/mapping-classes-to-orm-and-odm.html)示例中找到一个很好的示例来说明这将如何工作。或者，您也可以使用`@PostLoad`事件侦听器，通过在示例中链接的存储库创建链接来填充实体中的数据。相同`@PostPersist`（应该提取相关对象的标识符），但要注意这种技术可能会变得非常混乱。

此外，如果您的 RDBMS 支持单个主机上的跨数据库操作，您可以只使用单个 EntityManager 并使用`@ORM\Table(name="schemaname.tablename")`.

# objective-c - 如何在 ObjC 方法中传递多个变量 Args？

> ID：11463520
> 
> 赞同：0
> 
> 时间：2012-07-13T02:54:50.113
> 
> 标签：objective-c, cocoa-touch, xcode4.2, variadic-functions

我需要在我的方法中接收多个变量 Args。但我不知道该怎么做。

例如：

```
(void)insertInTableOnAttributes:(id)fieldsNames, ... Values:(id)fieldsValues, ...; 
```

`(...)`可悲的是，在第一句话之后出现了编译器错误：

```
Expected ':' after method Prototype". 
```

在实施中说：

```
Expected Method Body" in the same position (just after the first ...) 
```

PD：我使用的是 Xcode 4.2.1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T02:59:17.750

你不能那样做。生成的代码如何可能知道一个参数列表在哪里结束，下一个从哪里开始？试着想想 C 的等价物

```
void insertInTableOnAtributes(id fieldNames, ..., id fieldValues, ...); 
```

出于同样的原因，编译器会拒绝它。

你有两个合理的选择。第一个是提供一个以`NSArray`s 代替的方法。

```
- (void)insertInTableOnAttributes:(NSArray *)fieldNames values:(NSArray *)fieldValues; 
```

第二种是使用一个带有名称-值对的可变参数，类似于`+[NSDictionary dictionaryWithObjectsAndKeys:]`

```
- (void)insertInTableOnAttributes:(id)fieldName, ...; 
```

这个会像

```
[obj insertInTableOnAttributes:@"firstName", @"firstValue", @"secondName", @"secondValue", nil]; 
```

* * *

C 的类比实际上是相当准确的。Obj-C 方法基本上是 C 方法之上的语法糖，所以

```
- (void)foo:(int)x bar:(NSString *)y; 
```

由看起来像的 C 方法支持

```
void foobar(id self, SEL _cmd, int x, NSString *y); 
```

除了它实际上没有真名。这个 C 函数称为`IMP`方法的，您可以使用 obj-c 运行时方法检索它。

如果您在 varargs 之后有参数，您的

```
- (void)someMethodWithArgs:(id)anArg, ... andMore:(id)somethingElse; 
```

会得到一个`IMP`看起来像的支持

```
void someMethodWithArgsAndMore(id anArg, ..., id somethingElse); 
```

并且由于在可变参数之后不能有任何参数，所以这根本行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:59:08.703

```
- (void)insertInTableOnAttributes:(NSArray *)fieldsNames values:(NSArray *)fieldsValues; 
```

// 采用

```
[self insertInTableOnAttributes:[NSArray arrayWithObject:@"name", nil] values:[NSArray arrayWithObject:@"value", nil]]; 
```

# java - Java - 强制编译 .java 文件

> ID：11463526
> 
> 赞同：0
> 
> 时间：2012-07-13T02:55:24.423
> 
> 标签：java

好吧，我对 Java 不是很了解，我什至不知道这是否可能，但无论如何我都去了。我从 JAR 中获取了一个 .class 文件并对其进行了反编译。我已经将它编辑成我想要的，但现在我想重新编译它。是否可以重新编译那个 .java 文件，然后我可以将它放回 jar 文件中？当我尝试通过设置源路径来重新编译它时，它说我的文件引用的一个 .java 文件中存在错误（这是它的词吗？）即使没有。

编辑：反编译成功。重新编译时的错误：

> C:\Users\Sam\Desktop\DECOMP~1\src\org\bukkit\craftbukkit\CraftServer.java:619: error: not a statement ex; ^ C:\Users\Sam\Desktop\DECOMP~1\src\org\bukkit\craftbukkit\CraftServer.java:629: 错误：不是语句 ex；^ C:\Users\Sam\Desktop\DECOMP~1\src\org\bukkit\craftbukkit\CraftServer.java:637: error: not a statement ex; ^ C:\Users\Sam\Desktop\DECOMP~1\src\org\bukkit\craftbukkit\CraftServer.java:646：错误：不是语句异常；^ C:\Users\Sam\Desktop\DECOMP~1\src\org\bukkit\craftbukkit\event\CraftEventFactory.java:194: 错误：表达式静态类 _cls1 的非法开始 ^ C:\Users\Sam\Desktop\DECOMP ~1\src\org\bukkit\craftbukkit\event\CraftEventFactory.java:215：错误：格式错误的浮点文字开关（org.bukkit.craftbukkit.event._cls1..SwitchMap.org.bukkit.event.block.Action[ action.ordinal()]) ^ C:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:04:03.993

进行此练习时，您需要确保两件事：

1.  新源码反编译修改后是否有效？
2.  源是否依赖于任何其他类？如果是这样，它们必须在类路径中`javac`

除了一些罕见的例外（取决于您要破解的内容），这应该足够了。

编辑

看来来源无效。以您的第一条错误消息为例：

```
C:\Users\Sam\Desktop\DECOMP~1\src\org\bukkit\craftbukkit\CraftServer.java:619: error: not a statement ex; ^ 
```

`CraftServer.java`第 619 行中有些东西不是声明。

PS，看了一下bukkit.org，好像这个软件是开源的。你真的需要反编译吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:23:08.737

首先，您已删除所有语法错误，然后尝试设置该 jar 文件的类路径，然后编译您的文件，因为它可能使用该类文件中存在的类引用。

# python - 在 Python 字典中查找成员资格

> ID：11463527
> 
> 赞同：1
> 
> 时间：2012-07-13T02:55:35.187
> 
> 标签：python, dictionary

我有一个 Python 字典，如下所示：

```
d={ 'cs101': {'name': 'Building a Search Engine', 'teacher': 'Dave',
    'assistant': 'Peter C.'},
    'cs373': {'name': 'Programming a Robotic Car', 'teacher': 'Sebastian',
    'assistant': 'Andy'}
} 
```

我需要找出“彼得”这个名字是否是这些元素的老师或助手。请注意，“彼得”和“彼得 C.” 是两个不同的人。假设`coursename`是一个要循环的变量`'cs101'`和`'cs373'`。如果我使用 'in' 关键字来检查成员资格：

```
'Peter' in d[coursename]['assistant'] 
```

它将返回 True。

同样，`'' in d[coursename]['assistant']`也会返回 True。

所以，看来我不能使用`in`关键字..

谁能告诉我如何查看会员资格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T02:58:42.037

## 彼得，你在哪里？

`'Peter' in 'Peter Pan'`将检查字符串*'Peter'*是否可以在*'Peter Pan' 的*某个地方找到，这显然是正确的。

如果您想要完全匹配，您应该使用`==`，如下例所示：

```
'Peter' == d[coursename]['assistant'] 
```

^(以上将进行*区分大小写的*匹配，如果您想*不区分大小写*，您可以编写：`'Peter'.lower() == d[coursename]['assistant'].lower()`.)

* * *

### `in`和之间的差异的一些例子`==`

```
Python 2.7.3（默认，2012 年 4 月 13 日，00:05:08）
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] 在 darwin
输入“帮助”、“版权”、“信用”或“许可”以获取更多信息。

>>> “彼得潘”中的“彼得”
真的

>>> 《潘王子》中的“彼得”
错误的

>>> '彼得' == '彼得'
真的

>>> '彼得' == '王子'
错误的

>>> '' in '香蕉'
真的

>>> '' == '香蕉'
错误的

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T03:00:09.497

具体检查字符串是否相等而不是使用`in`

```
'Peter' == d[coursename]['assistant'] 
```

仅当字符串完全是 'Peter' 时才为真

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T03:00:47.347

这样的事情取决于你到底想做什么，因为它有点不清楚：

```
'Peter' in (d[coursename]['teacher'], d[coursename]['assistant']) 
```

这将检查是否`'Peter'`等于元组中的值之一，这与您检查是否`'Peter'`在字符串中的测试不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-06T08:52:45.970

为此，如果您有多个键（Python 3.9），则必须使用循环。除非您使用另一个允许这样做的模块，否则使用单线是不可能的。

```
for k in d.keys():
    if 'Peter' in d[k]['assistant']:
        print(True) 
```

# javascript - 通过 ajax 调用使用 javascript 和 css 的 HTML 文件。

> ID：11463535
> 
> 赞同：-1
> 
> 时间：2012-07-13T02:56:41.867
> 
> 标签：javascript, css, ajax

我正在使用 AJAX 调用一个 html 文件，该文件使用我之前在页面中调用过的 jquery 和 javascript。但是 javascript（和 CSS）没有被执行。我们怎样才能让我的 javascript 工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:00:40.203

由于您提供的信息有限，我能想到的唯一解决方案是[在此处](http://api.jquery.com/jQuery.get/)`$.get()`使用 jQuery 的更多信息

`$.get("yourjsfile.js");`//它将请求您的文件并执行它 `$.get("yourcssfile.css");`//类似地为您的 CSS 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T03:01:48.980

将它们写在`<body/>`而不是`<head/>`。之后的代码`<body/>`将被丢弃`jQuery("someSelector").load()`

并且 jQuery(document).ready()**不会**被执行。

# python - 如何使用 HtmlXPathSelector (Scrapy) 以 HTML 形式返回结果

> ID：11463538
> 
> 赞同：4
> 
> 时间：2012-07-13T02:57:13.497
> 
> 标签：python, xpath, scrapy

如何检索标签中包含的所有 HTML？

```
hxs = HtmlXPathSelector(response)
element = hxs.select('//span[@class="title"]/') 
```

也许是这样的：

```
hxs.select('//span[@class="title"]/html()') 
```

**编辑：** 如果我查看[文档](http://doc.scrapy.org/en/0.14/topics/selectors.html#xpathselectorlist-objects)，我只会看到返回 new 的方法`XPathSelectorList`，或者只是标签内的原始文本。我想检索的不是新列表或文本，而是标签内的*源代码 HTML*。例如：

```
<html>
    <head>
        <title></title>
    </head>
    <body>
        <div id="leexample">
            justtext
            <p class="ihatelookingforfeatures">
                sometext
            </p>
            <p class="yahc">
                sometext
            </p>
        </div>
        <div id="lenot">
            blabla
        </div>
    an awfuly long example for this.
    </body>
</html> 
```

我想做一个这样的方法，`hxs.select('//div[@id="leexample"]/html()')`它将返回其中的 HTML，如下所示：

```
justtext
<p class="ihatelookingforfeatures">
    sometext
</p>
<p class="yahc">
    sometext
</p> 
```

我希望我清除了围绕我的问题的模棱两可。

如何从`HtmlXPathSelector`Scrapy 中获取 HTML？（也许是scrapy范围之外的解决方案？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T04:07:59.257

致电`.extract()`您的`XpathSelectorList`. 它应该返回一个包含你想要的 HTML 内容的 unicode 字符串列表。

```
hxs.select('//div[@id="leexample"]/*').extract() 
```

## 更新

```
# This is wrong
hxs.select('//div[@id="leexample"]/html()').extract() 
```

`/html()`不是一个有效的scrapy选择器。要提取所有子项，请使用`'//div[@id="leexample"]/*'`or `'//div[@id="leexample"]/node()'`。请注意，`node()`将返回`textNode`结果类似于：

```
[u'\n',
 u'<a href="image1.html">名称：我的图片 1 
'
]

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T03:46:17.537

**使用**：

```
//span[@class="title"]/node() 
```

`span`这将选择所有节点（元素、文本节点、处理指令和注释），它们是XML 文档中其`class`属性值为的任何元素的子节点`"title"`。

**如果您只想获取`span`文档中第一个此类的子节点，请使用**：

```
(//span[@class="title"])[1]/node() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T22:56:21.120

虽然迟到了，但我把这个留作记录。

我要做的是：

```
html = ''.join(hxs.select('//span[@class="title"]/node()').extract()) 
```

或者如果我们想匹配各种节点：

```
elements = hxs.select('//span[@class="title"]')
html = [''.join(e) for e in elements.select('./node()')] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T09:08:53.140

它实际上并不像看起来那么难。只需删除 XPath 查询的最后 / ，并使用 extract() 方法。我在 中运行了一个示例`scrapy shell`，这是一个缩短的版本：

```
sjaak:~ sjaakt$ scrapy shell
2012-07-19 11:06:21+0200 [scrapy] INFO: Scrapy 0.14.4 started (bot: scrapybot)
>>> fetch('http://www.nu.nl')
2012-07-19 11:06:34+0200 [default] INFO: Spider opened
2012-07-19 11:06:34+0200 [default] DEBUG: Crawled (200) <GET http://www.nu.nl> (referer: None)
>>> hxs.select("//h1").extract()
[u'<h1>    <script type="text/javascript">document.write(NU.today())</script>.\n    Het laatste nieuws het eerst op NU.nl    </h1>\n    ']
>>> 
```

要仅获取标记的内部内容，请在 XPath 查询中使用 add /*。例子：

```
>>> hxs.select("//h1/*").extract()
[u'<script type="text/javascript">document.write(NU.today())</script>.\n    Het laatste nieuws het eerst op NU.nl    '] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T04:30:37.320

类似于@xiaowl 指出的， using`hxs.select('//div[@id="leexample"]').extract()`将检索从 xPath 查询中检索到的标记的所有 HTML 内容：`//div[@id="leexample"]`。

所以为了记录，我最终得到了；

```
post = postItem() #body = Field #/in item.py
post['body'] = hxs.select('//span[@id="edit' + self.postid+ '"]').extract()
open('logs/test.log', 'wb').write(str(post['body']))
#logs.test.log contains all the HTML inside the tag selected by the query. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-06T17:32:42.887

一点黑客行为（进入, 在 1.0.5`_root`中`Selector`工作的私有财产）：

```
from lxml import html
def extract_inner_html(sel):
    return (sel._root.text or '') + ''.join([html.tostring(child) for child in sel._root.iterdescendants()])

def extract_inner_text(sel):
    return (''.join(sel.css('::text').extract())).strip() 
```

像这样使用它：

```
reason = extract_inner_html(statement.css(".politic-rating .rate-reason")[0])
text = extract_inner_text(statement.css('.politic-statement')[0])
all_text = extract_inner_text(statement.css('.politic-statement')) 
```

我[在这个问题中](https://stackoverflow.com/questions/6123351/equivalent-to-innerhtml-when-using-lxml-html-to-parse-html)找到了 lxml 代码部分。

# windows - 如何抑制windows命令输出？

> ID：11463544
> 
> 赞同：4
> 
> 时间：2012-07-13T02:58:17.500
> 
> 标签：windows, console, command, suppress

我正在通过命令行移动数千个文件，并将所有文件名打印到控制台。有没有办法忽略输出，让它更快？类似于 Linux 中的 /dev/null 管道。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T03:01:34.733

```
bla-bla-bla-bla-bla-bla-bla-bla 2> nul 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T03:02:14.803

看起来这样可以解决问题：

```
MOVE oldfile.wp newfile.doc >nul 
```

来源：[http ://ss64.com/nt/move.html](http://ss64.com/nt/move.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-21T21:05:21.810

我有同样的问题，我是这样解决的：

```
move aaa bbb >nul 2>nul 
```

# compiler-construction - gfortran编译器错误？

> ID：11463546
> 
> 赞同：2
> 
> 时间：2012-07-13T02:58:21.187
> 
> 标签：compiler-construction, fortran, gfortran

我在一个为我们的 fortran 代码提供自定义预处理器的环境中工作。我使用预处理器将逻辑参数切换为一种穷人的函数指针。我今天意识到我遇到了类似这样的情况：

```
 program main
  logical,parameter :: untrue=.false.
  if(untrue)then
    call func1()
  else
    call func2()
  endif
  end

  subroutine func2()
  print*,"Hello, World!"
  end 
```

换句话说，`func1`没有在任何地方定义，但是，它使用 gfortran（版本 4.4 和 4.6）编译，因为大概编译器优化了该调用。我目前没有其他编译器可以检查，这段代码是否在其他地方编译？可以/应该将其视为编译器错误吗？

我切换逻辑开关（而不是包括/不包括代码）的部分原因是编译器仍然可以检查该代码块内的接口/语法（如果有能力）（并对不简单的事情发出适当的警告函数调用）。这是否意味着没有执行这些测试，或者只是链接器不需要该功能，所以一切正常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T03:35:54.443

这不是编译器错误。没有引用的外部子程序不是标准需要 Fortran 处理器来诊断的。其他处理器可能会或可能不会抱怨。优化设置之类的事情可能会影响结果 - 英特尔 Fortran 12.1.5 抱怨优化关闭，而不抱怨优化打开。

对于您的示例代码，其中 func2 是一个外部子程序，Fortran 的程序单元单独编译模型意味着不需要过程接口检查。对于许多处理器，这不太可能发生（实际上 func2 可能在一个单独的文件中，该文件在主程序之后很长时间编译，可能在另一台机器上，可能在主程序的源代码不再可用的情况下） . 如果要保证过程接口检查，则需要确保过程具有显式接口，例如将它们放入模块中。Fortran 2003 标准中引入并至少受 gfortran 4.6 支持的过程指针语言功能也可能有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T09:19:36.600

它似乎是 GNU Fortran 特定的行为，即使在优化级别也会删除无法访问的代码部分`O0`。这与 ISO/IEC 1539:1991 一致：§8.1.2 规定只有一个`IF`构造块必须执行，§8.1.1.2 明确禁止将控制从块外部转移到块内部。这允许编译器删除肯定不会执行的代码部分，这是有道理的，因为您无法`IF`在不重新编译程序源的情况下更改示例中构造的行为，并且编译器只是精通符号。

但我仍然觉得奇怪的是，`gfortran`即使使用`-Wall -Wunreachable-code`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T04:27:37.227

您在这里看到的只是编译器允许自己忽略任何永远不会被调用的引用。该行：

```
logical,parameter :: untrue=.false. 
```

保证你的`if`块的第一部分不会被执行。正如 IanH 指出的 (+1)，这不是编译器错误，而是优化过程的一部分。此代码还将使用`pgf90 10.6-0`和使用默认优化进行编译`ifort 12.0.2.137`。但是，如果指示在未启用优化的情况下进行编译，它们将失败。

但是，如果您的线路说：

```
logical :: untrue=.false. 
```

编译器更有可能抱怨，因为`untrue`允许变量更改其值。例如，`pgf90`除非需要更高的优化级别，否则将失败，而“ifort”仍将在默认优化级别上编译。

在任何情况下，依赖编译器行为都不是最佳实践，而且正如 IanH 所指出的，最好通过使用模块来指定外部函数和子例程接口。

# php - 我应该选择哪个版本的 Apache？

> ID：11463554
> 
> 赞同：0
> 
> 时间：2012-07-13T03:00:16.910
> 
> 标签：php, windows, apache

我现在有 6 种选择来运行 PHP5.3(VC9) 或 PHP5.2(VC6)

```
PHP5.3(VC9)
 Apache2.2+Windows2008 32Bit
 Apache2.2+Windows2008 64Bit

 Apache2.4+Windows2008 32Bit
 Apache2.4 +Windows2008 64Bit

PHP5.2(VC6)
 Apache2.2+Windows2003
 Apache2.4+Windows2003 
```

哪种组合是最佳选择，为什么，还是另一种选择？有没有什么好的选择，比如稳定性、兼容性和生命周期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:01:45.240

你应该使用 Windows2008 64Bit 和 Apache2.4 运行 PHP5.3(VC9)

它将为您提供最佳性能，并使用具有最大内存升级能力的最新更新。

# javascript - 使用 raphael 生成的巨大文本

> ID：11463555
> 
> 赞同：0
> 
> 时间：2012-07-13T03:00:21.583
> 
> 标签：javascript, svg, raphael

我想在多边形的**中心**绘制文本并**进入**由路径值形成的多边形。我尝试使用[这个](http://jsfiddle.net/kitex/Djy4s/1/)小提琴，但文字是在纸上而不是多边形上绘制的。

```
 //for writing text
        var bbox = obj.getBBox();
        var x = Math.floor(bbox.x + bbox.width/2.0); 
        var y = Math.floor(bbox.y + bbox.height/2.0);
        alert(x + " and " + y);
        r.text(x, y, "t"); 
```

实际上我想在**中心**写文本并像标签一样**写成多边形！**就像多边形中心的国家名称一样！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:17:07.430

我猜你的问题真的是“为什么文字这么大？”，也许是“为什么放错地方了？”。可能是这样的：

[http://jsfiddle.net/nhYSr/](http://jsfiddle.net/nhYSr/)

我建议避免使用这么小的 viewBox，因为浏览器往往会遇到非常小的（小于 1 像素）字体大小的问题。

# c# - 无法在 WCF REST 中解析 JSON 数组

> ID：11463556
> 
> 赞同：0
> 
> 时间：2012-07-13T03:00:27.983
> 
> 标签：c#, json

这是我的 JSON 文件，其中包含多个“应用程序”对象：

```
{"Application":[{"appid":"0","appname":"application0"},
                {"appid":"1","appname":"application1"},
                ....
               ]} 
```

我将它从 Android 代码接收到我的 WCF REST 服务方法中：

```
[WebInvoke(Method = "POST", UriTemplate = "/AcceptApp", RequestFormat = WebMessageFormat.Json,  
    ResponseFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
[OperationContract]
string AcceptApplication(Stream jsonstring); 
```

这是方法定义：

```
public string AcceptApplication(Stream inputStream)
{
    StreamReader r = new StreamReader(inputStream);
    string jsonstring = r.ReadToEnd();
    try
    {
       List<ApplicationEntity> list = JsonConvert.DeserializeObject<List<ApplicationEntity>>(jsonstring);
       for (int i = 0; i < list.Count; i++)
       {
         // using data
       }
    }
    catch (Exception E)
    {
        Logger.Error(E.Message);
    } 
```

我的应用实体：

```
public class ApplicationEntity
{
    public string appid { get; set; }
    public string appname { get; set; }
} 
```

我得到了 jsonstring ，但是我得到了错误：

```
Newtonsoft.Json.JsonSerializationException: Cannot deserialize the current JSON object (e.g.    
{"name":"value"}) into type  
'System.Collections.Generic.List`1[ApplicationEntity]' because the  
type requires a JSON array (e.g. [1,2,3]) to deserialize correctly.
To fix this error either change the JSON to a JSON array (e.g. [1,2,3]) or change the deserialized type so
that it is a normal .NET type (e.g. not a primitive type like integer, not a collection type like an array 
or List<T>) that can be deserialized from a JSON object. JsonObjectAttribute can also be added to the type 
to force it to deserialize from a JSON object. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:10:29.263

您尝试解析的 JSON 字符串不是列表或数组。它是一个具有称为`"Application"`数组的属性的对象。试试这个：

```
public class ApplicationObject
{
    public List<ApplicationEntity> Application { get; set; }
}
...
var apps = JsonConvert.DeserializeObject<ApplicationObject>(jsonstring); 
```

现在您可以访问 上的列表`apps.Application`。

# ruby - 导致困难的简单检测解决方案

> ID：11463557
> 
> 赞同：0
> 
> 时间：2012-07-13T03:00:37.650
> 
> 标签：ruby, arrays

我有以下代码，它应该提供一个简单的`true-false`包装器`Array#detect`，即`nil-element`.

```
class Array
  def any &expr
    if (self.detect expr)
      return true
    else
      return false
    end
  end
end 
```

出于某种奇怪的原因，无论传递给什么`&expr`，它总是返回 true！为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T03:07:04.587

Enumerable#detect 的文档说它可以选择采用一个参数。如果它没有找到与你的块匹配的元素，它会返回这个参数。在您的情况下，您将 Proc 对象传递给`expr`to `detect`，而不是传递块。这会导致`detect`返回一个枚举器，它不会被解释为“虚假”值。

我认为你想`self.detect &expr`传递一个实际的块而不是 Proc。

# windows - 我应该如何选择 Windows Server AMI 映像以与 AWS 免费套餐一起用作 WAMP 堆栈？

> ID：11463569
> 
> 赞同：2
> 
> 时间：2012-07-13T03:02:11.583
> 
> 标签：windows, amazon-ec2, windows-server-2008, wamp, amazon-ami

我最近意识到亚马逊的 AWS 免费套餐允许您免费使用一年的微型 Linux*和微型 Windows 服务器。*到目前为止，我只运行过 Linux 实例，但我很想尝试一下 Windows 服务器，因为它是免费的。

Ubuntu 有一个[甜蜜的云门户](https://ubuntu.com/blog)，它向您展示了它们可用于 EC2 的哪些 AMI 映像，但我还没有为 Windows 找到类似的东西。

我意识到启动实例向导为您提供了几个选项：

[![图片.png](../Images/f7380d39920f82e436c5a395256ca8a8.png)](https://i.stack.imgur.com/Ke7bg.png)

但我没有看到任何预先构建的 WAMP 堆栈。此外，[bitnami 有一个 WAMP 堆栈](https://bitnami.com/stack/wamp)，但我似乎找不到它的 AMI 图像。

是否启动类似于 Linux 的 Windows 实例？我假设我可以在某处找到信誉良好的 WAMP AMI，将 AMI 编号放入启动控制台，然后将 RDP 放入盒子中。那么，如果是这种情况，我如何才能找到信誉良好的 WAMP 堆栈 AMI 来使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:02:43.050

首先，是的。启动 Windows AMI 与启动 Linux AMI 完全相同。除了您使用 RDP 而不是通过 SSH 连接到实例之外，您必须等待几分钟才能连接到您的实例，以便生成管理员密码。

对于您的第二个问题，我建议您从[Bitnami 网站](http://bitnami.org/stack/lampstack)开始，但我看到他们今天只提供 LAMP 实例。我不知道您对信誉的概念是什么，但我发现了两个可能对您有所帮助的公共 AMI（也来自 Bitnami，但似乎有点老）。只需启动（在您的 EC2 管理控制台上）`Classic Wizard`、`Community AMIs`和搜索`WAMP`，您就会找到它们。

希望能帮助到你。

# php - AppMobi / Phonegap 替代 PHP

> ID：11463572
> 
> 赞同：0
> 
> 时间：2012-07-13T03:02:42.650
> 
> 标签：php, apache, mobile, cordova, appmobi

并不是一个真正的编码问题，也不确定要在哪个堆栈站点上抛出这个问题，所以就这样吧。

我想知道是否有任何类似于 appmobi/phonegap 的框架，因为一切都被沙盒化并编译成适用于 iphone 和 droids 的应用程序格式。在沙盒服务器具有在其上运行 PHP 的能力的地方，我整天都在尝试搜索，但除了关于 appmobi/phonegap 的大量文章之外，我什么也没找到。这可以是免费或付费的框架（最好是免费/开源）。

如果没有这样的框架，那么是否有一种方法可以采用像 apache 本身这样的东西，它像一个网络服务器一样运行和运行，我可以将 php 加载到其中，并在我的项目结束时将它编译成一个最终包以在移动设备中使用市场？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:12:45.727

不会。尝试在移动应用程序中包含 Web 服务器和 PHP 运行时会产生严重的性能影响。

PhoneGap 工作的原因是因为 Javascript 可以通过使用内置 Web 浏览器的渲染引擎在移动应用程序中本地执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T03:26:56.070

问题是iOS一般使用Objective-C，Android使用Java，但两者都可以使用javascript，这就是phonegap工作的原因。

因此，除非您可以编写两个网络服务器，一个用于 iOS，一个用于 Android，并移植 PHP 以在您的网络服务器下运行，或者更有可能编写一个解释器，将 PHP 转换为在您的网络服务器上运行，那么它会工作。

但是，如果您编写一个移动 Web 应用程序并使用 PHP 作为服务器上的代码，那么您可以发送 javascript 并让它在两个设备上的浏览器中运行。

最好的选择是将大部分业务逻辑放在用 PHP 编写的 REST 服务中。您可以按照以下博客在 PhoneGap 中执行此操作：

[http://share.ez.no/blogs/thiago-campos-viana/rest-api-basic-http-auth-and-phonegap-using-jquery](http://share.ez.no/blogs/thiago-campos-viana/rest-api-basic-http-auth-and-phonegap-using-jquery)

这是本文的主要部分，因此您可以看到它是多么容易。

```
 //10.0.2.2:80 is the localhost in android emulator, app needs internet access
    $.get("http://10.0.2.2:80/ez_site/api/ezp/content/node/2",
               function(data) {
                 //code goes here

   }); 
```

通过这样做，您可以在 PHP 中拥有大部分业务逻辑，并且只有 UI 是 javascript，能够利用手机上的硬件。

# guava - Google Guava 缓存的默认最大大小是多少？

> ID：11463580
> 
> 赞同：12
> 
> 时间：2012-07-13T03:03:48.687
> 
> 标签：guava

给定使用以下代码创建的 Guava 缓存，如果未设置，是否有最大缓存大小？

```
LoadingCache<String, String> loadingCache = CacheBuilder.newBuilder().build(new CacheLoader<String, String>() {
    @Override
    public String load(String key) throws Exception
    {
        return key.toUpperCase();
    }
}); 
```

就我而言，我真的想要一个没有大小上限的缓存。我正在使用缓存来存储登录用户的权限，并将在用户注销或会话到期时从缓存中逐出项目。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-13T08:16:40.353

默认缓存是无限的：正如[CacheBuilder 的 javadoc](https://google.github.io/guava/releases/24.0-jre/api/docs/com/google/common/cache/CacheBuilder.html)解释的那样

> 这些功能都是可选的

和

> 默认情况下，由 CacheBuilder 创建的缓存实例不会执行任何类型的驱逐。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T08:42:31.283

简单的答案是没有限制，如果你的意思是“默认”`CacheBuilder.maximumSize()`永远不会被调用。

而且我认为您的应用程序不需要基于大小的驱逐策略。当用户会话过期时，只需将其从缓存 ( `Cache.invalidate(key)`) 中删除。

而String大写不需要缓存，直接调用大写比缓存更简单有效。

# php - 如何使用 Unlink() 函数

> ID：11463581
> 
> 赞同：13
> 
> 时间：2012-07-13T03:03:56.067
> 
> 标签：php, file, unlink

我正在尝试使用`PHP unlink()`函数删除文件夹中的特定文档。该特定文件夹已分配给 IIS 用户的完全权限。

**代码：**

```
$Path = './doc/stuffs/sample.docx';
if (unlink($Path)) {    
    echo "success";
} else {
    echo "fail";    
} 
```

它保持返回失败。sample.docx 确实驻留在该特定路径上。好心提醒。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-13T03:21:24.247

我[在函数 unlink() 的注释中找到了这些信息](http://br.php.net/manual/pt_BR/function.unlink.php)

> 在 Windows 系统和 Apache 下，拒绝访问文件是取消链接文件的常见错误。要删除文件，您必须更改文件的所有者。一个例子：

```
chown($tempDirectory . '/' . $fileName, 666); //Insert an Invalid UserId to set to Nobody Owern; 666 is my standard for "Nobody" 
unlink($tempDirectory . '/' . $fileName); 
```

所以尝试这样的事情：

```
$path = './doc/stuffs/sample.docx';

chown($path, 666);

if (unlink($path)) {
    echo 'success';
} else {
    echo 'fail';
} 
```

**编辑 1**

尝试在路径中使用它：

```
$path = '.'
         . DIRECTORY_SEPARATOR . 'doc'
         . DIRECTORY_SEPARATOR . 'stuffs'
         . DIRECTORY_SEPARATOR . 'sample.docx'; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-13T03:07:37.337

试试这个：

```
$Path = './doc/stuffs/sample.docx';
if (file_exists($Path)){
    if (unlink($Path)) {   
        echo "success";
    } else {
        echo "fail";    
    }   
} else {
    echo "file does not exist";
} 
```

如果你得到文件不存在，你有错误的路径。如果不是，则可能是权限问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T04:19:50.363

完成权限问题后，这应该可以工作。也试试

```
ini_set('display_errors', 'On'); 
```

这会告诉你什么是错的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-30T11:47:28.917

```
define("BASE_URL", DIRECTORY_SEPARATOR . "book" . DIRECTORY_SEPARATOR);
define("ROOT_PATH", $_SERVER['DOCUMENT_ROOT'] . BASE_URL);

$path = "doc/stuffs/sample.docx";

if (unlink(ROOT_PATH . $Path)) {   
  echo "success";
} else {
  echo "fail";    
}

// http://localhost/book/doc/stuffs/sample.docx
// C:/xampp/htdocs\book\doc/stuffs/sample.docx 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T03:08:41.017

您需要感兴趣文件的完整文件路径。例如：C:\doc\stuff\sample.docx。尝试使用`__DIR__`或`__FILE__`获取您的相对文件位置，以便您可以导航到感兴趣的文件。

# java - Hibernate 强制使用索引

> ID：11463584
> 
> 赞同：0
> 
> 时间：2012-07-13T03:04:24.530
> 
> 标签：java, hibernate, hibernate-annotations

我有一个具有明确索引的表，我从中了解

```
org.hiber....table(appliesTo="tableName", indexes={@Index(name=" ",columnNames=" "})}) 
```

是它创建了一个索引，现在将这样做并提及实际 oracle DB 索引中使用的列名给我最佳结果还是从未使用过索引？如何在 HQL 中明确使用索引？另外我如何确定正在使用的索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:24:09.397

这取决于您使用的 DBMS。例如，在 Oracle 中，如果您使用基于成本的优化器，则无法通过 SQL 控制使用哪个索引。因此，您更不可能通过 HQL 做任何与此相关的事情。

为了确保是否使用索引，它还取决于 DBMS。通常我会通过 Hibernate 或其他 JDBC 日志记录工具（例如 JdbcDsLog）将其转储到日志中，并查看 SQL 的执行计划，从而获得发出给 DBMS 的实际 SQL

# c - 如何在不同的进程中更改 EIP？

> ID：11463586
> 
> 赞同：1
> 
> 时间：2012-07-13T03:04:26.277
> 
> 标签：c, memory

我试图通过更改它的 EIP 来破解另一个程序。有两个程序正在运行，一个是目标程序，它告诉作为“核心函数”的函数（例如，接收密码字符串作为参数并返回真或假的函数）在内存中的位置。然后现在我知道核心功能在哪里，我想用另一个程序修改 EIP，以便目标程序可以调用我的函数并简单地从中获取一个真实的内容并打印出一个漂亮的“访问权限”。

我的代码现在是这样的：

目标程序：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int checkPwd(char *pwd)
{
    printf("\nstill in the function\n");
    if(strcmp(pwd, "patrick") == 0) return true;
    else return false;
}

int main()
{
    char pwd[16];

    printf("%d", checkPwd);
    scanf("%s", &pwd);
    system("pause");
    if(checkPwd(pwd)) printf("Granted!\n");
    else printf("Not granted\n");
    system("pause");
} 
```

攻击者程序：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <memory.h>

int returnTrue()
{
    return true;
}
int main()
{
    int hex;
    scanf("%d", &hex);
    memcpy((void*)hex, (void*)returnTrue, sizeof(char)*8);
    system("pause");
} 
```

我想补充一点，我试图将十六进制代码（没有 scanf 部分）直接放入攻击者程序中并且没有工作，它崩溃了。

所以我想我在这里遗漏了一些理论。我很高兴知道它是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T03:07:21.553

这是行不通的——进程占用不同的内存空间！

现代操作系统旨在保护用户程序免受此类攻击。一个进程无法访问另一个进程的内存——事实上，数据地址仅在该进程内部有效。

当程序运行时，它有自己的内存视图，只能“看到”内核已指示[内存管理单元（MMU）](http://en.wikipedia.org/wiki/Memory_management_unit)为其映射的内存。

一些参考资料：

*   [虚拟地址到物理地址的映射](https://stackoverflow.com/questions/9006634/mapping-of-virtual-address-to-physical-address)
*   [在 ac 程序中打印相同的物理地址](https://stackoverflow.com/questions/5291104/printing-same-physical-address-in-a-c-program)
*   [为什么这两个地址不一样？](https://stackoverflow.com/a/5223358/499609)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T03:24:12.913

可以将一个函数注入另一个进程，但它比你想象的要复杂一些。第一件事是你需要适当的函数长度，你可以通过创建两个函数来做到这一点。

```
static int realFunction() { ... }
static void realFunctionEnd() {} 
```

现在，当您复制函数时，您会执行以下操作：

```
realFunctionEnd - realFunction 
```

这会给你尺寸。现在您不能只调用其他函数，因为如前所述，它们不能保证在其他进程中位于同一地址，但您可以假设，我将假设 windows，kernal32.dll 位于同一地址，因此您实际上可以创建远程线程时将其传递给 realFunction 。

现在，至于你的真正问题。您需要做的是注入一个 dll 或将一个函数复制到另一个进程中，然后挂钩您需要更改的函数。您可以通过复制另一个函数并使该代码可执行，然后通过跳转到注入的代码覆盖目标函数的前五个字节来做到这一点，或者您可以执行适当的 detour 类型挂钩。无论哪种情况，它都应该起作用。或者，您可以找到函数的偏移量并通过编写适当的操作码代替真实代码自行修补它，例如返回 true。

完成此操作需要某种注入或修补程序，您有基本的想法，但目前的想法比您想象的要多。我有 Windows 的工作代码，可以将一个函数复制到另一个进程中，但我相信这是一次很好的学习体验。

# c# - 静态构造函数中的代码运行速度较慢

> ID：11463591
> 
> 赞同：7
> 
> 时间：2012-07-13T03:06:01.423
> 
> 标签：c#, .net, performance

我注意到启动时间会有所不同，这取决于我在这里放置了一段初始化代码。我觉得这真的很奇怪，所以我写了一个小基准，证实了我的怀疑。似乎在调用 main 方法之前执行的代码比平常慢。

为什么`Benchmark();`根据是否在常规代码路径之前和之后调用而以不同的速度运行？

这是基准代码：

```
class Program {
    static Stopwatch stopwatch = new Stopwatch();
    static Program program = new Program();

    static void Main() {
        Console.WriteLine("main method:");
        Benchmark();
        Console.WriteLine();

        new Program();
    }

    static Program() {
        Console.WriteLine("static constructor:");
        Benchmark();
        Console.WriteLine();
    }

    public Program() {
        Console.WriteLine("public constructor:");
        Benchmark();
        Console.WriteLine();
    }

    static void Benchmark() {
        for (int t = 0; t < 5; t++) {
            stopwatch.Reset();
            stopwatch.Start();
            for (int i = 0; i < 1000000; i++)
                IsPrime(2 * i + 1);
            stopwatch.Stop();
            Console.WriteLine(stopwatch.ElapsedMilliseconds + " ms");
        }
    }

    static Boolean IsPrime(int x) {
        if ((x & 1) == 0)
            return x == 2;
        if (x < 2)
            return false;
        for (int i = 3, s = (int)Math.Sqrt(x); i <= s; i += 2)
            if (x % i == 0)
                return false;
        return true;
    }
} 
```

结果表明，`Benchmark()`静态构造函数和`static Program program`属性构造函数的运行速度几乎慢了两倍：

```
// static Program program = new Program()
public constructor:
894 ms
895 ms
887 ms
884 ms
883 ms

static constructor:
880 ms
872 ms
876 ms
876 ms
872 ms

main method:
426 ms
428 ms
426 ms
426 ms
426 ms

// new Program() in Main()
public constructor:
426 ms
427 ms
426 ms
426 ms
426 ms 
```

将基准循环中的迭代次数加倍会导致所有时间加倍，这表明产生的性能损失不是恒定的，而是一个因素。

```
// static Program program = new Program()
public constructor:
2039 ms
2024 ms
2020 ms
2019 ms
2013 ms

static constructor:
2019 ms
2028 ms
2019 ms
2021 ms
2020 ms

main method:
1120 ms
1120 ms
1119 ms
1120 ms
1120 ms

// new Program() in Main()
public constructor:
1120 ms
1128 ms
1124 ms
1120 ms
1122 ms 
```

**为什么会这样？**如果初始化在它所属的地方完成，那么它是否会一样快，这将是有意义的。测试是在 .NET 4 中完成的，发布模式，优化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T04:08:29.657

这是一个有据可查的事实。

静态构造函数很慢。.net 运行时不够聪明，无法优化它们。

参考：[静态构造函数的性能损失](http://blogs.msdn.com/b/brada/archive/2004/04/17/115300.aspx)

> 显式静态构造函数代价高昂，因为它们要求运行时确保在访问类的任何成员之前准确设置值。确切的成本取决于场景，但在某些情况下可能非常明显。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T01:11:22.443

这是一个非常有趣的问题。我花了一些时间试验你的程序的变体。以下是一些观察：

1.  如果将 Benchmark() 静态方法移到不同的类中，静态构造函数的性能损失就会消失。

2.  如果将 Benchmark() 方法变成实例方法，性能损失就会消失。

3.  当我分析您的快速案例 (1, 2) 和您的慢速案例 (3, 4) 时，慢速案例在 CLR 帮助器方法中花费了额外的时间，特别是 JIT_GetSharedNonGCStaticBase_Helper。

根据这些信息，我可以推测发生了什么。CLR 需要确保每个静态构造函数最多执行一次。一个复杂的问题是静态构造函数可能形成一个循环（例如，如果类 A 包含类型 B 的静态字段并且类 B 包含类型 A 的静态字段）。

在静态构造函数中执行时，JIT 编译器插入检查一些静态方法调用，以防止由于循环类依赖关系而导致的潜在无限循环。从静态构造函数外部调用静态方法后，CLR 将重新编译该方法以删除检查。

这应该非常接近正在发生的事情。

# haskell - 无法在我的 Haskell 程序中找到错误（来自 Project Euler 的谜题 #2）

> ID：11463595
> 
> 赞同：3
> 
> 时间：2012-07-13T03:06:50.170
> 
> 标签：haskell, recursion

**SPOILER ALERT：如果你试图自己解决 Project Euler 的问题 #2 而不看答案，请不要看这个。**

我已经完成[了 Project Euler 的第 2 题（计算小于或等于 400 万的所有偶数 Fibonacci(n) 数的总和）](http://projecteuler.net/problem=2) ——我正在使用这些问题来练习我的 C/Ada 技能，重新审视我的 Common Lisp 和学习 Haskell。

当我试图在 Haskell 中重新实现我的解决方案时，我遇到了问题。以经典方式，它正在计算错误的答案。但是，我认为我的 Haskell 实现类似于我的 Common Lisp 实现（它确实产生了正确的结果。）

该算法仅计算 n where 的斐波那契数`n % 3 == 0`。这是因为

1.  我们只需要对偶数斐波那契数 F(n) <= 4M 求和，并且
2.  (n % 3 == 0) <--> (F(n) % 2 == 0)

这是 Haskell 的实现：

```
uber_bound      = 40000000  -- Upper bound (exclusive) for fibonacci values
expected        = 4613732   -- the correct answer

-- The implementation amenable for tail-recursion optimization
fibonacci :: Int -> Int
fibonacci n = __fibs (abs n) 0 1
  where
    -- The auxiliary, tail-recursive fibs function
    __fibs    :: Int -> Int -> Int -> Int
    __fibs 0 f1 f2 = f1 -- the stopping case
    __fibs n f1 f2 = __fibs (n - 1) f2 (f1 + f2)

-- NOT working. It computes 19544084 when it should compute 4613732
find_solution :: Int
find_solution = sum_fibs 0
  where
    sum_fibs :: Int -> Int
    sum_fibs n = 
      if fibs > uber_bound
        then
          0 -- stopping condition
        else
          -- remember, (n % 3 == 0) <--> (fib(n) % 2 == 0)
          -- so, seek the next even fibs by looking at the
          -- the next n = n@pre + 3
          fibs + sum_fibs (n + 3)
      where
        fibs = fibonacci n

actual = find_solution

problem_2 = (expected == actual) 
```

`19544084`当正确答案是 时，事情正在打印`4613732`。我的 Common Lisp 解决方案（***确实有效***）如下。

我认为我的 Haskell 实现会类似于它，但我遗漏了一些东西。

```
(set `expected 4613732)  ;; the correct answer

;; tail-recursive fibonacci
(defun fibonacci (n)
  (labels 
    ( ;; define an auxiliary fibs for tail recursion optimization
      (__fibs (n f1 f2)
        (if (<= n 0)
          f1 ;; the stopping condition
          (__fibs 
            (- n 1) ;; decrement to ensure a stopping condition 
            f2 
            (+ f1 f2))))
    ) ;; end tail_rec_fibs auxiliary
   (__fibs n 0 1)
  );; end labels
) ;; end fibonacci

(defun sum_fibs(seed)
  (let*
    ((f (fibonacci seed)))
    (if (> f 4000000)
      0
    ;; else
      (+ f (sum_fibs (+ 3 seed)))
    );; end if
  );; end of let
);; end of sum-fibs

(defun solution () (sum_fibs 0))

(defun problem_2 ()
  (let
    (
     (actual (solution))
    )
    (format t "expected:~d actual:~d" expected actual)
    (= expected actual)
  )
) ;; end of problem_2 defun 
```

***我到底做错了什么？***当然，我正在使用尼安德特人的方法来学习 Haskell（我目前只是在 Haskell 上重新实现我的 Lisp，而不是学习惯用的 Haskell，这是一种与语言一起使用的编码/问题解决方法。）

我不是在找人来给我解决方案（这不是*我可以破坏 codez 吗？*）。我正在寻找*更多*，但*更多*是为了解释我在 Haskell 程序中缺少的内容。错误在哪里，或者我错过了一个非常具体的 Haskell 特质评估/模式匹配的东西？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T03:21:18.000

你有一个错字

```
uber_bound = 40000000 
```

什么时候应该

```
uber_bound = 4000000 
```

* * *

仅供参考，更惯用的解决方案是生成所有斐波那契数列的列表（惰性求值对此非常有用），然后使用`takeWhile`,`filter`和`sum`.

这也将更有效率，因为尾递归在 Haskell 中很少有帮助（延迟评估会妨碍），并且由于列表的元素是共享的（如果列表定义得当）每个斐波那契数只计算一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:11:46.590

已删，不宜剧透。dbaupp 的建议很好。使用 zipWith 有一个众所周知的表达式，但我认为它太聪明了——还有更直接的方法。

# facebook - 如何使用 FB API 找到我的应用程序的 Facebook 用户列表？

> ID：11463600
> 
> 赞同：3
> 
> 时间：2012-07-13T03:07:46.390
> 
> 标签：facebook, facebook-graph-api

我想获得两个列表： 1\. 使用我的应用程序的用户列表 2\. 登录的用户列表。我想将其存储在我的应用程序的数据库中。我需要做什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T18:29:09.483

应用程序用户列表：FQL: SELECT uid FROM user WHERE is_app_user = '1''

# php - 在后台访问 PHP 或 javascript 中的 URL

> ID：11463601
> 
> 赞同：0
> 
> 时间：2012-07-13T03:07:49.043
> 
> 标签：php, url

我用 PHP 编写脚本，里面有 HTML 和 javascript。我想要的是当我单击一个按钮（在 HTML 中）时，它会调用一个 javascript 函数，该函数应该访问一个像“http://localhost/1/2”这样的 url，并且页面保持不变。可行吗？

我只想让它工作，无论是在 js 还是 php 中。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:22:45.223

由于页面在同一个域中，您可以使用 Ajax 请求：

```
var request = new XMLHttpRequest();
request.open("GET", url, true);
request.send(null); 
```

但是请注意，这不会进行任何错误检查。如果您需要，可以通过搜索轻松找到大量可用的教程。

* * *

而且由于您要求，对于不在同一域中的页面，`<iframe>`有时可以使用 an ：

```
var frame = document.createElement("iframe");
frame.src = url;
frame.style.position = "relative";
frame.style.left = "-9999px";
document.body.appendChild(frame); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T03:20:00.773

这通常称为 AJAX（能够在不离开页面的情况下向服务器发送请求并接收响应）。

所有现代浏览器都支持 AJAX，但有时会出现不一致，因此最好使用 javascript 框架，例如[JQuery](http://jquery.com/)、[YUI](http://yuilibrary.com)或其他框架。

我倾向于使用 YUI，所以这里有一个关于如何使用 YUI 发送 AJAX 请求的快速示例。这使用[IO 实用程序](http://yuilibrary.com/yui/docs/io/)：

```
// Create a YUI instance using io module.
YUI().use("io", function(Y) {
    var uri = "http://localhost/1/2";

    // Define a function to handle the response data.
    function complete() {
        Y.log('success!');
    };

    // Subscribe to event "io:complete"
    Y.on('io:complete', complete);

    // Make an HTTP request to 'get.php'.
    // NOTE: This transaction does not use a configuration object.
    var request = Y.io(uri);
}); 
```

# ios - UITableView 变大时滚动滞后和滚动条跳跃

> ID：11463611
> 
> 赞同：0
> 
> 时间：2012-07-13T03:09:34.073
> 
> 标签：ios, uitableview, uiscrollview

正如标题所说，我正在使用一个连接到由 ViewController 调解的 FetchedResultsController 的 UITableView。

当用户滚动到接近网格底部并且我们获取更多数据以显示给用户时，就会发生延迟。当接收到数据时，tableview 的内容变大了，滚动暂停片刻，然后出现一些口吃，然后滚动条跳得更高，最后一切都恢复平滑。这发生在：

```
-(void)controllerDidChangeContent:(FetchedResultsController *)controller {
    [tableView reloadData];
} 
```

我已经完成了在 Apple 的底座和 SO 中找到的所有优化。

1.  我应该重用视图。这对性能帮助最大。用于细胞的初始化几乎不会被击中。

2.  在使用 imageview 之前在后台线程中解码图像（在上下文中绘制）。（请注意，在我们获得图像以替换单元格的“加载”用户界面之前，口吃就发生了）。

3.  极短且快速的委托方法。

4.  不透明的手绘视图。

有没有人有任何关于处理向 UITableView 添加行的建议，它不会阻塞 UI 线程并防止滚动条跳跃？我试过使用 [tableView insertRows...] 但同样的卡顿和滚动条跳跃发生了，我认为这很奇怪。

干杯，Zed

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:13:17.477

对于 UITableView 来说，这实际上是很自然的。不幸的是，它并不优雅。如果您的应用程序不断地检索数据并重新加载，那么这也会影响您的性能。我什至测试了您的理论并使用 NSMutableArray 手动填充了 UITableView。我给了数组几个值，这甚至足以让它滞后。（请记住，没有涉及额外的方法，甚至没有涉及 reloadData。只是基本的委托方法）。

# c++ - 创建一个小列表 cv::Mat 并对其进行迭代的正确方法是什么？

> ID：11463613
> 
> 赞同：3
> 
> 时间：2012-07-13T03:10:13.277
> 
> 标签：c++, opencv, stl

我是 C++ 新手，我正在尝试创建一个 cv::Mat 列表。

这可以分配相当多的内存，但我只有大约十个小垫子可以加载到列表中。

我制作了这段代码，但不确定为什么它不起作用。

```
void Utils::getFramesFromVideo(std::string file,std::list<cv::Mat>& listMatOutput) {

    cv::VideoCapture* videoCapture = new cv::VideoCapture(file);

    bool hasImage = false;

    cvNamedWindow("WhileReading", 1);

    do {
        cv::Mat frame;
        hasImage = videoCapture->read(frame);
        if (hasImage) {
            listMatOutput.push_back(frame);
            imshow("WhileReading", frame);
            waitKey(0);//give some time to see the frame (debug)
        }
    } while (hasImage);

    cvNamedWindow("AfterReading", 2);

    for (std::list<Mat>::const_iterator iterator = listMatOutput.begin();
            iterator != listMatOutput.end(); iterator++) {
        imshow("AfterReading", *iterator);
        waitKey(0);//give some time to see the frame (debug)
    }
    videoCapture->release();
} 
```

第一次加载正确显示帧，但在第二个窗口（AfterReading）中，图像是黑色的，带有红色条纹。有人可以给一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:55:46.973

列表格式是一个 STL 容器，这意味着您需要记住一些事项才能使用它。`push_back()`是向容器添加实例的首选方法，就像使用迭代器是访问列表元素的首选方法一样。如果您尝试将列表的一个元素直接设置为`cv::Mat()`您正在处理的 a)，那么 a) 您需要确切知道列表对每个实例执行的包装类型，以便您可以自己正确地执行此操作，并且 b)您首先违背了使用 STL 容器的目的，即抽象出列表的详细信息。

您不一定需要`frame.clone()`在代码中使用该调用，因为这会创建图像的深层副本并占用宝贵的资源。我知道我过去使用`std::vector<cv::Mat>`过，而不必为向量中的每个元素制作深拷贝，所以我假设你应该能够将 Mat 本身传递给一个列表。请[参阅有关 STL 列表的 C++ 文档](http://www.cplusplus.com/reference/stl/list/)。

您可能会考虑的另一件事是，如果内存使用率低和通过列表访问速度是一个问题，并且您的图像数量很少，那么是图像指针列表。将您的图像存储为单独的`cv::Mat`实例，并制作您的 type 列表`std::list<cv::Mat*>`，将图像的句柄传递给`push_back()`调用。当然，使用这种方法，您的图像将不是“线程安全的”，因为它们将存储在一个地方，而是从另一个地方调用和处理。我希望这对您的询问有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:55:52.483

我尝试了各种方法，比如更改为指针或向量以及检查 GCC 上的代码优化。然后在尝试克隆 cv::Mat 之后它起作用了：

```
listMatOutput.push_back(frame.clone()); 
```

如果有人能告诉我原因并提出更好的做法，我会很高兴，这样我就可以选择比我自己更好的答案。

# mysql - SQL 对列中的每个不同值进行计数，并从 ID 匹配的另一个表中添加名称

> ID：11463619
> 
> 赞同：0
> 
> 时间：2012-07-13T03:11:20.600
> 
> 标签：mysql, sql, join, count, group-by

我的 SQL 技能几乎没有。在环顾过去 2 小时试图弄清楚这一点后，我需要一些帮助。

我有 2 个表如下

```
Table1                    Table2 

ID  | Name                Status_id
-----------               ----------
1   |   Open                  1
2   |   Closed                2
3   |   On-Hold               1 
```

我想做的是计算表2中的status_id并按status_id分组。然后在第一列中添加 ID 匹配的名称。

我现在拥有的是

```
SELECT status_id, COUNT(*) AS 'num' FROM table2 GROUP BY status_id 
```

到目前为止，这很棒并且返回

```
1   |   2
2   |   1 
```

我需要返回的是

```
Open   |   2
Closed |   1 
```

我希望这很清楚。任何人都可以帮忙吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:17:10.267

```
SELECT a.name, COUNT(*) AS num FROM table2 b 
INNER JOIN table1 a 
ON b.status_id=a.id 
GROUP BY status_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T04:05:57.787

如果您还想为 On-Hold 设置零，则需要进行 LEFT 联接并计算 table2 中的 a 列而不是`*`

```
SELECT t1.name,
       Count(t2.Status_id) AS num 
FROM   table1 t1 
       LEFT JOIN table2 t2 
               ON t1.id = t2.Status_id
GROUP  BY t1.name; 
```

[演示](http://sqlfiddle.com/#!2/61f51/6)

# php - php如何从变量中获取特定数据

> ID：11463620
> 
> 赞同：-3
> 
> 时间：2012-07-13T03:11:43.673
> 
> 标签：php, arrays

我有一个包含以下数据的变量。

```
$cheers="<p>content:op=This is an apple</p> <p>content:op=This is a school bus</p> <p>content:op=This is PHP code</p> " ; 
```

我如何获得如下显示的输出：

```
This is apple
This is school bus
This is php code 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:04:45.257

如果您正在查看解析字符串，这应该对您有用，

```
<?php
   $cheers="<p>content:op=This is an apple</p> <p>content:op=This is a school bus</p> <p>content:op=This is PHP code</p>";
   $cheers = strip_tags($cheers);
   $arrtext = explode("content:op=", $cheers);

   foreach ($arrtext as $element){
      if ($element!=""){
            echo $element."\n\r";
       }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T04:53:04.710

`preg_match_all`这 => `/<[^<]+?>(.)+<[^<]+?>/`。 [http://us2.php.net/manual/en/function.preg-match-all.php](http://us2.php.net/manual/en/function.preg-match-all.php) 将抓取标签之间的所有内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T03:18:37.550

假设您在网页上显示它并且它已由浏览器准备好，您只需回显变量的值。不确定您是否需要似乎没有必要的常量：操作部分。它可以像下面这样重写。

```
 <?php
    // define variable
    $cheers="<p>content:op=This is an apple</p> <p>content:op=This is a school bus</p> <p>content:op=This is PHP code</p> " ;

    // remove extra text
    $new_cheers = str_replace("content:op=","",$cheers); 

    // split paragraphs (if needed, otherwise just echo $new_cheers)
    $paragraphs = explode(" ", $new_cheers); 
    echo $paragraphs[0]; 
    echo $paragraphs[1]; 
    echo $paragraphs[2];
    ?> 
```

可选的（跳过上面的 $paragraphs 部分，只在下面输出新的欢呼声）：

```
<html>
<head><title>Test</title></head>
<body>
<h1>Your output</h1>
<?php echo $new_cheers; ?>
</body>
</html> 
```

由于您已经拥有 HTML 标签，因此浏览器将读取格式并正确呈现。

# c++ - 当要求使用随机数生成器时，C++ 程序在 while 循环中崩溃

> ID：11463628
> 
> 赞同：0
> 
> 时间：2012-07-13T03:13:03.407
> 
> 标签：c++, do-while

所以我正在尝试制作一个程序，它将生成随机的基本数学问题，如加法、减法等。

当我试图生成除法问题时，我做了一个 do-while 循环，该循环一直运行到满足除法问题的先决条件为止。

但是由于某种原因，当我要求它生成 20 个除法问题而没有余数时，它总是崩溃。

请帮忙

这是代码

```
#include <iostream>
#include <cstdlib>
#include <ctime>

using namespace std;

int correct,total,MAXVAL;
const char oper[4]={'/','/','/','/'};

typedef struct data{
    int first,second;
    char operation;
}data;

data datagenerator(){
    data newData;
    newData.first= (rand()%MAXVAL);
    newData.operation=oper[rand()%4];
    newData.second=(rand()%MAXVAL);
    return newData;
}

bool corrector(data newData){
    bool isture=false;
    switch(newData.operation){
        case '/':
            if((newData.first%newData.second)==0){
                isture=true;
            }
            break;
        case '*':
            isture=true;
            break;
        case '+':
            isture=true;
            break;
        case '-':
            isture=true;
            break;
    }
    return isture;
}

void quizer(){

    system("CLS");
    for(int counter=1;counter<=total;counter++){
        cout<<"Q"<<counter<<": ";
         data newData;
        do{
            newData=datagenerator();
        }while(!corrector(newData));
        cout<<newData.first<<newData.operation<<newData.second<<"\n";
    }
    cout<<"\nYou got "<<correct<<"/"<<total<<"correct\n";
}

int main(){
    //srand((unsigned)time(0));
    char x;
    cout<<"How many questions do you want?"<<endl;
    cin>>total;
    cout<<"Enter the maximum value\n";
    cin>>MAXVAL;
    cout<<"Are you ready?\n";
    cin>>x;
    quizer();

    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T03:24:08.590

您需要检查除以 0。

```
bool corrector(data newData){
bool isture=false;
switch(newData.operation){
    case '/':
        if(newData.second == 0) {
            break;
        }
        if((newData.first%newData.second)==0){
            isture=true;
        }
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T03:22:34.340

您生成 0 作为第二个数字，然后尝试使用它除以一个数字。

你可以这样检查

```
if(newData.second == 0) {
            return false;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T03:26:05.167

您的问题就在第 17 行和第 19 行。假设您在询问您时将 MAXVAL 上的值设置为 0，您正在除以 0。使用模除法，您需要小心。

# image - 未能分配计时器 0：没有剩余插槽，无法设置动态行高

> ID：11463636
> 
> 赞同：0
> 
> 时间：2012-07-13T03:15:35.147
> 
> 标签：image, memory-management, blackberry, loader, listfield

我有一个屏幕调用`listfield`.

```
public class Main_AllLatestNews extends MainScreen {
private Database_Webservice webservice;
private String[] title, category, date, imagepath = {"no picture", "no picture", "no picture", "no picture","no picture","no picture","no picture","no picture","no picture", "no picture"};
private int[] newsid;
private List_News newslist;

public Main_AllLatestNews(final boolean needdownload) {
    super(USE_ALL_WIDTH);
    webservice = new Database_Webservice();
    add(new Custom_TopField(this, 0, -1, "", 1, 1));
    add(new Custom_BottomField(this, 0));
    add(new Custom_HeaderField(Config_GlobalFunction.latest));
    if (needdownload){
        Main.getUiApplication().pushScreen(
                new Custom_LoadingScreen(30));
        webservice.UpdateAllCatNews();          
    }else {
        webservice.LoadtodayNews(); 
        newsid = new int[webservice.news.size()];
        title = new String[webservice.news.size()];
        category = new String[webservice.news.size()];
        date = new String[webservice.news.size()];
        //imagepath = new String[webservice.news.size()];

        for (int i = 0; i < webservice.news.size(); i++) {
            newslist = (List_News) webservice.news.elementAt(i);
            newsid[i] = newslist.getID();
            title[i] = newslist.getNtitle();
            category[i] = newslist.getNewCatName();
            date[i] = newslist.getNArticalD();
            //imagepath[i] = newslist.getImagePath();
        }
        add(new Custom_ListField(newsid, title, date, category, imagepath, true));
    }
}
} 
```

当我添加时`custom_listfield`，我得到：

> 分配定时器 0 失败：没有剩余时隙

这是我的`listfield`

```
public Custom_ListField(int newsid[], String title[], String date[],
        String category[], String imagepath[], boolean islatest) {
    super(0, ListField.MULTI_SELECT);
    this.newsid = newsid;
    setCallback(this);
    setBackground(Config_GlobalFunction.loadbackground("background.png"));
    this.islatest = islatest;
    rows = new Vector();

    for (int x = 0; x < title.length; x++) {
        TableRowManager row = new TableRowManager();

        titlelabel = new Custom_LabelField(title[x],
                LabelField.USE_ALL_WIDTH | DrawStyle.LEFT);
        titlelabel.setFont(Font.getDefault().derive(Font.BOLD, 23));
        row.add(titlelabel);

        datelabel = new Custom_LabelField(date[x], DrawStyle.ELLIPSIS
                | LabelField.USE_ALL_WIDTH | DrawStyle.LEFT);
        datelabel.setFont(Font.getDefault().derive(Font.BOLD, 18));
        datelabel.setFontColor(Color.GRAY);
        row.add(datelabel);

        categorylabel = new Custom_LabelField(category[x],
                DrawStyle.ELLIPSIS | LabelField.USE_ALL_WIDTH
                        | DrawStyle.LEFT);
        categorylabel.setFont(Font.getDefault().derive(Font.BOLD, 18));
        categorylabel.setFontColor(Color.RED);
        row.add(categorylabel);

        /*Bitmap imagebitmap = null;
        if (!imagepath[x].toString().equals("no picture")) {
            imagebitmap = Util_ImageLoader.loadImage(imagepath[x]);
        } else {
            imagepath[x] = "image_base.png";
            imagebitmap = Bitmap.getBitmapResource(imagepath[x]);
        }
        image = new BitmapField(imagebitmap, Field.FIELD_HCENTER
                | Field.FIELD_VCENTER);
        row.add(image);*/

        //setRowHeight(image.getBitmapHeight() + 10);
        setRowHeight(70);
        rows.addElement(row);
    }
    setSize(rows.size());
} 
```

在此列表中，它将调用 10 个或更多图像。首先，我将检查发送给它的链接，否则加载本地图像。所以行高必须不相同，但是，它不会为每一行自动设置行高，而是为所有行设置相同的高度。我认为内存不足是因为我调用了太多图像？但我打电话给android也没问题。

这是我的`imageloader`。

```
public class Util_ImageLoader {

public static Bitmap loadImage(String url) {
    HttpConnection connection = null;
    InputStream inputStream = null;
    EncodedImage bitmap;
    byte[] dataArray = null;

    try {
        // can use this for BlackBerry 5.0+ :
        // connection = (HttpConnection) (new
        // ConnectionFactory()).getConnection(url).getConnection();
        connection = (HttpConnection) Connector
                .open(url + Util_GetInternet.getConnParam(),
                        Connector.READ, true);
        int responseCode = connection.getResponseCode();
        if (responseCode == HttpConnection.HTTP_OK) {
            inputStream = connection.openDataInputStream();
            dataArray = IOUtilities.streamToBytes(inputStream);
        }
    } catch (Exception ex) {
    } finally {
        try {
            inputStream.close();
            connection.close();
        } catch (Exception e) {
        }
    }

    if (dataArray != null) {
        bitmap = EncodedImage.createEncodedImage(dataArray, 0,
                dataArray.length);
        return bitmap.getBitmap();
    } else {
        return null;
    }
}
} 
```

1）我可以做些什么来减少内存的使用？

2）如何设置不同的行高？我已设置`bitmap.getbitmapheight()`，但不同的位图会有不同的高度。

//更新//

我在模拟器 9930 OS 7.0 和 8520 OS 5.0 上运行。两者的结果也是一样的。Real Device 无法运行，因为在签署密钥后还会提示警告信息`try to Secure APi`。我完全评论了所有的图像也一样。我既没有打电话也没有打电话给本地图片。我觉得是数据问题？

@AlanLai，你能告诉我们这是在哪个设备上运行，哪个操作系统？它是一个模拟器，还是真正的硬件？您为什么不尝试完全注释掉图像。不显示任何图像（网络图像或本地图像）。看看你是否仍然遇到问题。让我们尝试缩小导致问题的代码的确切位置。注意：请在问题中发布有关您在上面测试的设备的信息，而不是在此处作为评论回复。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:45:29.107

如果只有一个`TableRowManager`设置`drawRow`值和特定值的布局，怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:28:25.527

您可以做很多事情来减少内存使用量。一方面，尽量避免将对象在内存中保存的时间超过你真正需要的时间。发生这种情况的一种方法是，如果您在类中保留*成员变量*，那实际上可能是方法中的**局部**变量。保留成员变量可能会导致对象的寿命比它们需要的更长，从而阻止释放它们占用的内存。

## Util_ImageLoader

例如，在 中`Util_ImageLoader`，您几乎完成了构造函数中的所有工作。但是，您将结果保存在 (the `Bitmap`) 附近的静态成员变量 ( `_bmap`) 中，该变量将其保存在内存中。我知道你这样做是为了打电话`getBitmap()`。但是，您可以将类更改为：

```
public class Util_ImageLoader { 

   public static Bitmap loadImage(String url) {       
      HttpConnection connection = null; 
      InputStream inputStream = null; 
      EncodedImage bitmap; 
      byte[] dataArray = null; 

      try { 
         // can use this for BlackBerry 5.0+ :
         // connection = (HttpConnection) (new ConnectionFactory()).getConnection(url).getConnection();
         connection = (HttpConnection) Connector.open(url + Util_GetInternet.getConnParam(),  Connector.READ, 
               true); 
         int responseCode = connection.getResponseCode(); 
         if (responseCode == HttpConnection.HTTP_OK) { 
            inputStream = connection.openDataInputStream();
            dataArray = IOUtilities.streamToBytes(inputStream);            
         } 
      } catch (Exception ex) { 
      } 
      finally { 
         try { 
            inputStream.close(); 
            connection.close(); 
         } catch (Exception e) { 
         } 
      } 

      if (dataArray != null) {
         bitmap = EncodedImage.createEncodedImage(dataArray, 0, dataArray.length);        
         return bitmap.getBitmap(); 
      } else {
         return null;
      }
   } 
} 
```

因为您的`Util_ImageLoader`类实际上并没有与之关联的任何状态，所以您可以只使用一种`static`方法将其变成一个类。静态方法不需要您创建实例`Util_ImageLoader`来使用它。只需这样做：

```
Bitmap img = Util_ImageLoader.loadImage("http://domain.com/path/image.png"); 
```

这允许加载的图像在 UI 完成后立即释放。现有代码在程序的生命周期内将该图像保存在内存中。

另外，我用有用的方法替换了您使用`byte[]`缓冲区的自定义代码。`IOUtilities.streamtoBytes()`让内置库为您完成优化工作。 *大多数时候*，他们会做得很好。

`Util_ImageLoader`您的班级中还有一些没有做任何事情的定点缩放代码。它正在创建与原始大小相同的缩放图像。所以，我刚刚删除了该代码。那只能帮助您使用内存。图像处理可能很昂贵。

最后，在创建此方法所需的任何大对象**之前**，我检查了 Web 服务器返回代码 ( `HTTP_OK`) 。如果网络请求失败，你当然不想无缘无故浪费内存。

 **## Custom_ListField

同样，您保留了一些对象，*可能*比需要的时间长。让我们来看看你的成员变量：

```
private Bitmap bg = Bitmap.getBitmapResource("background.png"),          
    imagebitmap; 
```

我不知道`Custom_ListField`你的应用程序中有多少个实例，但是如果你要分配`bg`给一个常量应用程序资源图像，你至少应该让它成为一个`static`成员变量，这样如果有 10 个实例`Custom_ListField`，你只会`bg`在内存中保留一个变量：

```
private static Bitmap bg = Bitmap.getBitmapResource("background.png"),          
    imagebitmap; 
```

但是，就您而言，我认为您根本不需要保留该成员变量。您可以简单地在使用它的地方替换它，如下所示：

```
Background background = BackgroundFactory.createBitmapBackground(Bitmap.getBitmapResource("background.png")); 
```

然后，该`imagebitmap`成员也可以替换为局部变量：

```
 Bitmap imageBitmap = null;
 if (!imagepath[x].toString().equals("no picture")) {            
        imageBitmap = Util_ImageLoader.loadImage(imagepath[x]);            
        imageBitmap = loader.getbitmap();            
 } else {            
        imagepath[x] = "image_base.png";            
        imageBitmap = Bitmap.getBitmapResource(imagepath[x]);            
 }            
 image = new BitmapField(imageBitmap, Field.FIELD_HCENTER | Field.FIELD_VCENTER); 
```

`imageBitmap`只需要是局部变量，而不是成员变量。

调试内存使用通常需要拥有整个程序、运行和分析它。仅使用您的一些代码，我看不到使用它的所有其他代码。 每个类创建多少很重要 **？****哪些**图像是大的，哪些是小的？这些都是您需要问自己以降低内存使用量的所有问题。

但是，希望我在上面的示例中展示的一般技术可以帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:53:19.930

问题是`Custom_ListField`. 这应该`extends listfield` 而不是自定义`extends manager`

```
public class Custom_ListField extends ListField {
private String[] title, category, date, imagepath;
private int[] newsid, catsid;
private List_News newslist;
private Bitmap imagebitmap[], localimage = Bitmap
        .getBitmapResource("image_base.png");
private BrowserField webpage;
private Custom_BrowserFieldListener listener;
private boolean islatest;

private Vector content = null;
private ListCallback callback = null;

private int currentPosition = 0;

public Custom_ListField(Vector content, boolean islatest) {
    this.content = content;
    this.islatest = islatest;
    newsid = new int[content.size()];
    title = new String[content.size()];
    category = new String[content.size()];
    date = new String[content.size()];
    imagepath = new String[content.size()];
    catsid = new int[content.size()];
    imagebitmap = new Bitmap[content.size()];

    for (int i = 0; i < content.size(); i++) {
        newslist = (List_News) content.elementAt(i);
        newsid[i] = newslist.getID();
        title[i] = newslist.getNtitle();
        category[i] = newslist.getNewCatName();
        date[i] = newslist.getNArticalD();
        imagepath[i] = newslist.getImagePath();

        if (!imagepath[i].toString().equals("no picture")) {
            imagebitmap[i] = Util_ImageLoader.loadImage(imagepath[i]);
        } else {
            imagebitmap[i] = localimage;
        }
        catsid[i] = newslist.getCatID();
    }

    initCallbackListening();
    this.setRowHeight(localimage.getHeight() + 10);
}

private void initCallbackListening() {
    callback = new ListCallback();
    this.setCallback(callback);
}

private class ListCallback implements ListFieldCallback {

    public ListCallback() {
        setBackground(Config_GlobalFunction
                .loadbackground("background.png"));
    }

    public void drawListRow(ListField listField, Graphics graphics,
            int index, int y, int width) {
        currentPosition = index;
        graphics.drawBitmap(
                Display.getWidth() - imagebitmap[index].getWidth() - 5,
                y + 3, imagebitmap[index].getWidth(),
                imagebitmap[index].getHeight(), imagebitmap[index], 0, 0);
        graphics.setColor(Color.WHITE);
        graphics.drawRect(0, y, width, imagebitmap[index].getHeight() + 10);

        graphics.setColor(Color.BLACK);
        graphics.setFont(Font.getDefault().derive(Font.BOLD, 20));
        graphics.drawText(title[index], 5, y + 3, 0, Display.getWidth()
                - imagebitmap[index].getWidth() - 10);

        System.out.println(Display.getWidth()
                - imagebitmap[index].getWidth() - 10);

        graphics.setColor(Color.GRAY);
        graphics.setFont(Font.getDefault().derive(Font.BOLD, 15));
        graphics.drawText(date[index], 5, y + 6
                + Font.getDefault().getHeight() + 3);

        if (islatest) {
            graphics.setColor(Color.RED);
            graphics.setFont(Font.getDefault().derive(Font.BOLD, 15));
            graphics.drawText(category[index], Font.getDefault()
                    .getAdvance(date[index]) + 3, y + 6
                    + Font.getDefault().getHeight() + 3);
        }
    }

    public Object get(ListField listField, int index) {
        return content.elementAt(index);
    }

    public int getPreferredWidth(ListField listField) {
        return Display.getWidth();
    }

    public int indexOfList(ListField listField, String prefix, int start) {
        return content.indexOf(prefix, start);
    }
}

public int getCurrentPosition() {
    return currentPosition;
}

protected boolean navigationClick(int status, int time) {
    int index = getCurrentPosition();
    if (catsid[index] == 9) {
        if (Config_GlobalFunction.isConnected()) {
            webpage = new BrowserField();
            listener = new Custom_BrowserFieldListener();
            webpage.addListener(listener);

            MainScreen aboutus = new Menu_Aboutus();
            aboutus.add(webpage);
            Main.getUiApplication().pushScreen(aboutus);

            webpage.requestContent("http://www.orientaldaily.com.my/index.php?option=com_k2&view=item&id="
                    + newsid[index] + ":&Itemid=223");
        } else
            Config_GlobalFunction.Message(Config_GlobalFunction.nowifi, 1);
    } else
        Main.getUiApplication().pushScreen(
                new Main_NewsDetail(newsid[index]));
    return true;
}
} 
```**

# javascript - 防止浏览器缓存 AJAX 请求

> ID：11463637
> 
> 赞同：30
> 
> 时间：2012-07-13T03:15:36.647
> 
> 标签：javascript, ajax, google-chrome

我已经设置了一个应用程序，它在 Opera 和 Firefox 上运行良好，但在 Google Chrome 上它会缓存 AJAX 请求并提供过时的数据！

[http://gapps.qk.com.au](http://gapps.qk.com.au/)是应用程序。在 Chrome 中运行时，它甚至不发送 AJAX 请求，但在另一个浏览器中尝试时，它总是执行 AJAX 请求并返回数据。

**是否有任何方法（Apache/PHP/HTML/JS）阻止 Chrome 执行此行为？**

AJAX 调用：

```
function sendAjax(action,domain,idelement) {

                    //Create the variables
                var xmlhttp,
                    tmp,
                    params = "action=" + action
                             + "&domain=" + encodeURIComponent(domain)

                    xmlhttp = new XMLHttpRequest(); 
                //Check to see if AJAX request has been sent
                xmlhttp.onreadystatechange = function () {
                    if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
                        $('#'+idelement).html(xmlhttp.responseText);
                    }
                };
                xmlhttp.open("GET", "ajax.php?"+params, true);
                xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                //console.log(params);
                xmlhttp.send(params);

            }
sendAjax('gapps','example.com','gapps'); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-13T04:02:13.713

浏览器缓存在不同的设置下表现不同。您不应依赖用户设置或用户的浏览器。也可以使浏览器忽略标题。

有两种方法可以防止缓存。

--> 将 AJAX 请求更改为 POST。浏览器不缓存 POST 请求。

--> Better Way & good way：使用当前时间戳或任何其他唯一编号向您的请求添加一个附加参数。

```
params = "action=" + action 
         + "&domain=" + encodeURIComponent(domain) 
         + "&preventCache="+new Date(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-15T22:16:50.273

Javascript 解决方案的另一种替代方法是使用自定义标头：在 PHP 中，它看起来像这样：

```
<?php
   header("Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0");//Dont cache
   header("Pragma: no-cache");//Dont cache
   header("Expires: Thu, 19 Nov 1981 08:52:00 GMT");//Make sure it expired in the past (this can be overkill)
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-25T06:15:31.470

当我遇到这个问题时，我正在使用 jQuery ajax 请求。

根据[jQuery API](http://api.jquery.com/jquery.ajax/)添加“缓存：假”添加时间戳，如在接受的答案中解释：

这仅适用于 GET 和 HEAD 请求，但如果您使用 POST，浏览器无论如何都不会缓存您的 ajax 请求。但是对于 IE8，如果需要，请在链接中查看。

```
$.ajax({ 
type: "GET",
cache: false, 
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-15T12:03:54.430

下面的代码行对我有用。

```
$.ajaxSetup({ cache: false }); 
```

# java - 我正在尝试向使用我的应用程序的特定用户广播消息？

> ID：11463638
> 
> 赞同：-1
> 
> 时间：2012-07-13T03:15:42.827
> 
> 标签：java, android, networking, broadcastreceiver, broadcast

我需要只向特定用户广播消息。

我的想法可能是使用 wifi 的 IP 地址或 MAC 转发，但看起来 IP 是在网络中注册的。

我需要将消息与来自接收者的任何 http 请求一起传递给接收者。

就像在（viber-android 应用程序）中一样，如果有人拨打电话或发送任何消息，则消息会立即传递。

我正在寻找他们使用的技术。如果您对此有任何想法，请回复。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:26:27.070

很难准确理解您的要求，但我*认为*您想要推送消息，在这种情况下，[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html)是一个不错的选择。

# c - 不同头文件中的两个结构，都使用另一个

> ID：11463639
> 
> 赞同：9
> 
> 时间：2012-07-13T03:15:44.453
> 
> 标签：c, struct, header-files

我已经浏览了很多关于hear 的主题以及我在 Google 上找到的其他一些主题。我似乎仍然无法做到这一点。

```
//Room.h
#ifndef ROOM_H
#define ROOM_H

#include "Door.h"

typedef struct {
   Door* doors[3];

} Room;

#endif

//Door.h
#ifndef DOOR_H
#define DOOR_H

#include "Room.h"

typedef struct {
   Room* room1;
   Room* room2;
} Door;

//main.c
#include <stdio.h>
#include "Room.h"
int main() { ... } 
```

我已经尝试将其添加到 Door.h 的顶部

```
typedef struct Room room1;
//typedef struct Room* room1;
//typedef stuct Room;
//typedef struct Room*; 
```

所有人都给了我这个错误：

“未知类型名称‘房间’”

我想将这些结构分开的头文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T03:18:45.253

试试这样：

```
typedef struct Room Room;
typedef struct Door Door;

struct Room{
   Door* doors[3];
};

struct Door{
   Room* room1;
   Room* room2;
}; 
```

* * *

前两行是允许它们相互引用的类型声明。

只要前两行在前，如何在头文件中分隔它们并不重要。

* * *

在您的情况下，它们可以按如下方式拆分：

**房间.h**

```
typedef struct Door Door;

struct Room{
   Door* doors[3];
}; 
```

**门.h**

```
typedef struct Room Room;

struct Door{
   Room* room1;
   Room* room2;
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T04:26:10.543

结构引用的 C 方式：

房间.h

```
typedef struct Room_s {
  struct Door_s * doors[3];
} Room_t; 
```

门.h

```
typedef struct Door_s {
  struct Room_s *room1;
  struct Room_s *room2;
} Door_t; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T03:26:01.720

与其创建匿名结构并对其进行类型定义，不如为结构指定特定名称，如下所示：

### 常见的.h

```
typedef struct Door_ Door;
typedef struct Room_ Room; 
```

### 房间.h

```
#include "common.h"

struct Room_ {
  Door* doors[3];
}; 
```

### 门.h

```
#include "common.h"

struct Door_ {
  Room *room1;
  Room *room2;
}; 
```

虽然，如果您打算拥有`room.h`并`door.h`始终一起使用，我只会制作一个文件来放入所有定义。

# jquery - jQuery post 方法在 iOS 中使用 Phonegap 1.7 失败

> ID：11463641
> 
> 赞同：1
> 
> 时间：2012-07-13T03:15:59.517
> 
> 标签：jquery, post, jquery-mobile, cordova

我使用 Phonegap 和 jQuery Mobile 编写了一个应用程序。它在 Android 上运行良好，但我现在正尝试在 iOS 上实现它。将 XCode 4.3.3 与 iOS 5.1、Phonegap 1.7、jQuery 1.7.1、jqQuery Mobile 1.1 一起使用。应用程序的第一部分是登录。我的 javascript 等待`deviceready`事件，然后发布到 PHP 页面以检查登录凭据。

我已经放置了一堆警报，并且 js 触发良好，直到 post 方法，此时它死了。第一次遇到白名单异常错误，所以我在 Cordova.plist 中的 ExternHosts 中添加了一个条目。现在，当它发布时，我没有收到任何错误或任何东西。这是我的html页面：

```
<!DOCTYPE HTML>
<html>
<head>
<title>Login</title>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<link rel="stylesheet" href="jquery/jquery.mobile.css" type="text/css" charset="utf-8" />
<script type="text/javascript" charset="utf-8" src="js/login1.js"></script>
</head>
<body onload="init()">
<div id="loginPage" data-role="page">
<div data-role="header" data-position="fixed" data-theme="b">
  <h1>Sign In</h1>
</div>
<div data-role="content">
  <form id="loginForm">
    <div data-role="fieldcontain" class="ui-hide-label">
      <label for="username">Username:</label>
      <input type="text" name="username" id="username" value="" placeholder="Username" />
    </div>
    <div data-role="fieldcontain" class="ui-hide-label">
      <label for="password">Password:</label>
      <input type="password" name="password" id="password" value="" placeholder="Password" />
    </div>
    <input type="submit" value="Login" id="submitButton">
  </form>
</div>
<div data-role="footer" data-id="foo1" data-position="fixed" data-theme="b">
  <h4>Stone Creek Portal</h4>
</div><!-- /footer -->
</div>

<script type="text/javascript" src="jquery/jquery-1.7.1.min.js"></script>
<script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
<script type="text/javascript" src="cordova-WebInspector.js"></script>
<script src="jquery/jquery.mobile-1.1.0.js"></script>
</html> 
```

这是我的 Javascript：

```
function init() {
  document.addEventListener("deviceready", deviceReady, false);
  delete init;
}
function deviceReady() {
  $("#loginForm").on("submit",function(e) {
    $('#loginForm').attr('autocomplete', 'off');
    $("#submitButton",this).attr("disabled","disabled");
    var u = $("#username", this).val();
    var p = $("#password", this).val();
    if(u != '' && p!= '') {
      navigator.notification.alert("before the post");
      $.post("http://someurl.php", {username:u,password:p}, function(res) {
        if(res.result != 'false'){
          var userID = res.result;
          localStorage.setItem('userID',userID);
          $.mobile.changePage("projectList.html");
        } else {
          navigator.notification.alert("Your login failed", function() {});
        }
        $("#submitButton").removeAttr("disabled");
      },"json");
    }
    return false;
  });
} 
```

我真的不确定是什么阻止了我。任何建议将不胜感激。谢谢！

# facebook - Facebook API 在另一台机器上进行身份验证

> ID：11463647
> 
> 赞同：1
> 
> 时间：2012-07-13T03:16:32.983
> 
> 标签：facebook, api, authentication, mobile

假设可以将 Facebook API 访问令牌从某个 Web 应用程序传输到我的移动应用程序（通过物理存储或网络），我的移动应用程序是否能够将该令牌用作定期获取的令牌（就像移动应用程序本身请求来自 Facebook 的令牌）？

Facebook API 的服务条款是否允许此程序？

移动应用程序是否能够缓存传输的令牌并将其用作自己的令牌？

基本上，我想要的是用户在一台机器上进行 Facebook 登录和身份验证，并在另一台机器上使用获取的令牌（例如移动应用程序）。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:38:21.913

您可以将您的移动应用程序设置为通过 facebook 的 oauth 步骤加载，如果用户已经验证了应用程序，他将立即登录，因为此时您将获得访问令牌，将其保存在移动设备中应用程序。

现在在 stackoverflow 和 quora 上都使用自动登录触发器。（如果您通过 facebook 在此处注册，当您访问该网站时，您将再次登录 - 与 quora 相同）。

此外，访问令牌授予对特定“facebook 应用程序”的访问权限。如果您的移动应用程序使用相同的应用程序 ID，那么您当然可以在移动设备上重复使用相同的访问令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T08:01:36.597

是的，我们可以重复使用它。我从移动应用程序获得了一个访问令牌，然后它适用于网络浏览器。

# c# - 使用 linq 将数据保存到数据库

> ID：11463648
> 
> 赞同：0
> 
> 时间：2012-07-13T03:16:57.900
> 
> 标签：c#, linq, combobox, textbox

我的代码在将数据保存到数据库时遇到问题。我有一个文本框和一个组合框，但是当我在文本框中键入数据并在组合框中选择数据并单击保存时，没有任何反应，并且在编译过程中没有发现错误。我可以知道实际出了什么问题并给我一些解决方案吗？

```
enter code here  private void btnCreate_Click(object sender, EventArgs e)
    {
        using (testEntities Setupctx = new testEntities())
        {
            string selectST = cbSeats.SelectedItem.ToString();
            string inputST = txtStation.Text;

            var createStation = (from createST in Setupctx.stations
                                  where createST.Seats == selectST
                                  where createST.Station1 == inputST
                                  select createST).SingleOrDefault();
            if (createStation != null)
            {
                Setupctx.stations.AddObject(createStation);
                Setupctx.SaveChanges();
                txtStation.Text = "";

                MessageBox.Show("New Station Has Been Created.");
            }
        }
    } 
```

对你的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:39:32.063

我同意@JamesD 确保调用事件处理程序。

此外，当您从 linq 查询中获取对象并对其进行更改时，您需要通过调用 DataContext 上的 SubmitChanges() 来保存这些更改。（我假设 Setupctx 是一个 DataContext 对象）。

阅读此处了解有关[SubmitChanges()的信息](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.submitchanges.aspx "提交更改")

另外，我不知道您是否使用SQL。如果是这样，这里有一个很棒的教程：[Linq to SQL Tutorial](http://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T03:44:49.267

您需要像这样创建一个新的站对象：

```
 if (createStation != null)
  {
    var obj = new Staion();
    obj.Seats=selectST;
    obj.Staion1=inputST;

    Setupctx.Staions.Add(obj);
    Setupctx.SubmitChanges();

    txtStation.Text = "";

     MessageBox.Show("New Station Has Been Created.");
} 
```

更多关于[LINQ To SQL 的信息在这里](http://www.hookedonlinq.com/LinqToSQL5MinuteOVerview.ashx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T01:44:55.593

这是正确的做法。

```
private void btnCreate_Click(object sender, EventArgs e)
    {
        using (testEntities Setupctx = new testEntities())
        {
            string[] stations = StationNameList();
            station creStation = new station();
            creStation.Station1 = txtStation.Text;
            creStation.Seats = cbSeats.SelectedItem.ToString();
            if (stations.Contains(txtStation.Text))
            {
                MessageBox.Show("This Station is already been created. Please enter a new Station.");
            }
            else
            {
                Setupctx.stations.AddObject(creStation);
                Setupctx.SaveChanges();
                txtStation.Text = "";
                cbSeats.SelectedIndex = -1;
                MessageBox.Show("New Station Has Been Created.");
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T03:20:43.663

只需检查列表：

*   您是否确定按钮事件处理程序已连接？

当你说

> 没发生什么事

你的意思是事件处理程序没有被调用？您实际上也没有对从数据库中检索到的电台做任何事情。您正在将其重新添加到您从中提取的电台列表中。

# c# - 如何先用 EF 代码通过 where 子句查询

> ID：11463651
> 
> 赞同：3
> 
> 时间：2012-07-13T03:17:19.370
> 
> 标签：c#, asp.net-mvc-3, linq, entity-framework, ef-code-first

```
class User {
    public int Id {set;get;}
    public int ExternalId {set;get;}
} 
```

我已经定义了这个类。我使用代码优先EF。

```
public class FooContext : DbContext {
    public DbSet<User> Users { set; get; }
} 
```

因此，当我执行以下操作时：

```
db.Users.ToList().where(x=>x.ExternalId == externalId); 
```

我很好奇这是否会执行以下操作：

```
select whatever from Users where ExternalId = 'id I passed in'; 
```

还是将所有用户加载到内存中并在内存中执行 Linq？

使用条件（where 子句）查询表的最佳做法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T03:26:11.783

ToList() 调用将导致 EF 从数据库中提取所有用户记录。您对 Where 扩展方法的调用将针对内存中的集合运行。如果您更改调用顺序，它只会从数据库中选择所需的记录，如下所示：

```
db.Users.Where(x=>x.ExternalId == externalId).ToList(); 
```

这是因为实体框架使用延迟执行。在调用代码中枚举实际记录之前，不会调用数据库。在您使用结果之前，查询只是等待执行的表达式树。如果您查看 Where() 方法，它的返回类型是 IQueryable。当您调用 ToList() 时，您实际上是从表达式树 (IQueryable) 转换为通用用户列表。这需要 EF 运行 db 查询以返回结果。

# javascript - Javascript - 将值与关联数组索引进行比较

> ID：11463654
> 
> 赞同：0
> 
> 时间：2012-07-13T03:18:01.580
> 
> 标签：javascript

我有以下代码：

```
var license_price = 0;
    var num_licenses = jQuery('#num_licenses').val();
    var lp = {};

                lp[1]=12.50;
                lp[10]=15.50;
                lp[50]=50.00;

    for(var index in lp) {alert(index);
        if (num_licenses >= index){
            license_price = parseFloat(lp[index]);
        }
    }
    //alert(license_price);
    jQuery('#total_price').val((num_licenses * license_price)); 
```

此代码确定在 num_licenses 框中输入的值，然后遍历数组 lp 并根据每个键的值分配价格。因此，如果 num_licenses = 8，则价格应为每个 12.50，如果 num_licess = 60，则价格应为 60 美元。

它适用于除 2 - 9 之外的所有值。如果我输入 2-9，则使用 fp[10] 中的价格。但是，如果它是 1，那么我得到 12.50。

保重，李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:25:14.187

当您遍历对象的索引时，它们被键入为字符串。您的 > 比较实际上是按字母而不是数字对它们进行排序。解析其数值以使其正常工作。（按字母顺序，“2”出现在所有以“1”开头的值之后，包括“10”，因此“2”>“10”等）

```
for(var index in lp) {
    alert(index);
    if(lp.hasOwnProperty(index)) { // prevent comparison when property inherited
        if (num_licenses >= parseInt(index,10) ){
            license_price = parseFloat(lp[index]);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T03:48:36.557

问题是您正在将字符串与整数进行比较。该`val()`函数的结果是一个字符串。因此，如果您的输入是 '2' ，则 '2' <= 10 的结果为假。您应该首先使用该`parseInt()`函数将其转换为整数。

它应该是这样的：

```
var license_price = 0;
var num_licenses = parseInt(jQuery('#num_licenses').val(),10);
var lp = {};

            lp[1]=12.50;
            lp[10]=15.50;
            lp[50]=50.00;

for(var index in lp) {alert(index);
    if (num_licenses >= index){
        alert("Greater than " + index);//added this for debugging
        license_price = parseFloat(lp[index]);
    }
}
//alert(license_price);
jQuery('#total_price').val((num_licenses * license_price)); 
```

请注意，我向该值添加了 parseInt() 调用。我还添加了一些警报呼叫，以便您了解正在发生的事情。

这是 jsFiddle 片段的链接，以便您可以对其进行测试：http: [//jsfiddle.net/CmbvW/8/](http://jsfiddle.net/CmbvW/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T03:36:13.490

在您的代码中 lp 是一个对象而不是一个数组，因此 index 是一个字符串类型的属性名称。

尝试将您的代码更改为

`var lp = [];`

那么索引将是一个数字。

# android - 在 64 位 linux 上使用 android 开发时出错

> ID：11463658
> 
> 赞同：2
> 
> 时间：2012-07-13T03:18:24.180
> 
> 标签：android

每次我尝试使用我的 64 位 Ubuntu 12.04 进行开发时，我都会不断收到此错误。我安装了 Java 7 Update 5，下载并设置了 Android 开发工具包，下载并解压了 Eclipse，安装了 Eclipse 的 Android 开发工具，将 Eclipse 指向 Android SDK 目录，最后尝试运行我的一个项目，我得到一个像这样的错误：

/home/user/Downloads/android-sdk-linux/platform-tools/aapt：加载共享库时出错：libstdc++.so.6：无法打开共享对象文件：没有这样的文件或目录

我需要安装什么来修复此错误？

谢谢，

杰里米

# javascript - 比较javascript中的函数指针

> ID：11463662
> 
> 赞同：1
> 
> 时间：2012-07-13T03:18:40.287
> 
> 标签：javascript, pointers

有什么方法可以比较javascript中的函数指针吗？基本上，我想看看我是否多次将相同的函数添加到数组中，然后只添加一次。是的，我可以围绕它进行编程，但这样做会容易得多。

下面的代码不使用数组，但说明了我试图提出的观点。我希望仅在 myPointer 是不同的函数时才设置 oldPointer 。

这是一些示例代码：

```
function test()
{
}

test.prototype.Loaded = function()
{
   this.loaded = true;
}

test.prototype.Add = function(myPointer)
{
    if (this.oldPointer != myPointer)  //never the same
    {
      this.oldPointer = myPointer;
    }
}

test.prototype.run = function()
{
   this.Add(this.Loaded.bind(this));

   this.Add(this.Loaded.bind(this));  //this.oldPointer shouldn't be reassigned, but it is
}

var mytest = new test();
test.run(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:32:15.727

如果您的问题是“我如何有效地避免将相同的函数添加到给定数组两次？” 围绕它进行编程的最简单方法显然是：

```
// Add f to a if and only if it is not already in a
if (a.indexOf(f) < 0) {
    a.push(f);
} 
```

如果 的线性复杂性`indexOf`困扰您，并且您只关心单个数组，您可以非常花哨并将函数加载到函数本身的事实存储：

```
// Add f to a if and only if it is not already in a
if (! f.alreadyAddedToA) {
    a.push(f);
    f.alreadyAddedToA = true;
} 
```

为 hack 属性选择任何名称。

如果您担心有多个数组，您可以在函数内部存储一种哈希图（JS 中的黑客对象，具有合适的键）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T03:42:03.017

假设 bind 是一个函数，它使用 Function.apply() 创建一个函数闭包绑定`this`到上下文，`this.Loaded.bind(this)`每次调用它都会产生一个新函数。这就是您的代码不起作用的原因。不幸的是，无法`this.Loaded`从 bind() 生成的函数对象中引用，因此无法进行比较。

相反，如果您执行以下类似操作，则您的检查将起作用，尽管我不确定它对您有多大用处。

```
test.prototype.run = function()
{
   var loadedFn = this.Loaded.bind(this);
   this.Add(loadedFn);

   this.Add(loadedFn);
} 
```

如果您想要更好的答案，请准确说明您要做什么。

# django - 限制基于其他领域的外国领域的选择

> ID：11463668
> 
> 赞同：4
> 
> 时间：2012-07-13T03:19:24.423
> 
> 标签：django, django-admin

是否可以在 AdminModel 中做真正的动态表单？我有以下型号：

```
class MyModel(models.Model):
    firstfield=models.ForeignKey(First)
    secondField= models.ForeignKey(Second, blank=True,null=True)
    #some other fields

class Second(models.Model):
    firstfield=models.ForeignKey(First)
    #other fields 
```

如您所见，第二个是可选的。但我希望它根据 First 中的当前选择进行限制？它需要一些页面刷新或一些 ajax 工作，但我根本不知道如何传递 First 值。也许我应该将它添加到请求中，然后使用类似于： [https](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey) ://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey 的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T06:03:58.857

您可以通过`ajax`请求来完成。如果您不知道它是如何工作的，请查看以下链接。

1.  [如何使用 Django 和 jQuery 实现两个相互依赖的下拉菜单](http://blog.devinterface.com/2011/02/how-to-implement-two-dropdowns-dependent-on-each-other-using-django-and-jquery/)
2.  [使用 JQuery 和 django 动态选择字段](http://formerlyconversal.wordpress.com/2009/11/01/dynamic-select-fields-with-jquery-and-django/)

# django - Django models.ForeignKey 外键约束

> ID：11463671
> 
> 赞同：2
> 
> 时间：2012-07-13T03:20:06.643
> 
> 标签：django, django-models

我的 Django 项目中有以下 2 个应用程序。一个应用程序（玩家）有一个引用另一个应用程序（团队）的 ForeignKey。

应用程序 1 - player/models.py

```
class Player(models.Model):
    name = models.CharField(max_length=100)
    team = models.ForeignKey(Team) 
```

应用 2 - 团队/models.py

```
class Team(models.Model):
    name = models.CharField(max_length=100) 
```

**问题 #1** - 一切似乎都正常，但是当我尝试运行时，`manage.py reset teams`出现以下错误：

```
Error: Error: users couldn't be reset. Possible reasons:
* The database isn't running or isn't configured correctly.
* At least one of the database tables doesn't exist.
* The SQL was invalid.
Hint: Look at the output of 'django-admin.py sqlreset users'. That's the SQL this command wasn't able to run.
The full error: (1217, 'Cannot delete or update a parent row: a foreign key constraint fails') 
```

我确保我所有的表都是 InnoDB。我见过人们建议将`SET FOREIGN_KEY_CHECKS=0`其用作修复程序，但我不确定如何最好地使用它`manage.py rest`

**问题 #2** - 当我执行 mysqldump 时，我无法在不遇到错误的情况下恢复我的 MySQL 数据库。我的基本程序如下：

1.  转储我的数据库。

    > mysqldump --user=root --password=pass --result-file=MYBACKUP.SQL --compact MYDB

2.  删除数据库，并创建一个具有相同名称的新数据库。

3.  恢复我的数据库。

    > mysql -u root -p MYDB < MYBACKUP.SQL

就是这样。当我第一次尝试恢复时，它在第 12 行给了我这个错误 ERROR 1005 (HY000): Can't create table 'MYDB.auth_group_permissions' (errno: 150)

当我尝试第二次（及后续）恢复时，它使它更远了一行，但它给了我这个错误：第 3 行的 ERROR 1050 (42S01): Table 'auth_group' already exists

我认为这些错误与外键约束有关，但我不确定如何修复它。

我知道这很拗口，但任何建议将不胜感激。如果有的话，我明天会在这里发布我的发现。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:25:08.987

**问题 2 的解决方案**- 所以我转储然后恢复我的数据库的问题与我如何使用 mysql 转储有关 -`--compact`标志导致了问题。

这条线...

> mysqldump --user=root --password=pass --result-file=MYBACKUP.SQL **--compact** MYDB

... 应该 ...

> mysqldump --user=root --password=pass --result-file=MYBACKUP.SQL MYDB

# asp.net - 在下拉列表中选择后显示文本框

> ID：11463673
> 
> 赞同：-7
> 
> 时间：2012-07-13T03:20:47.633
> 
> 标签：asp.net, drop-down-menu, textbox

只是想在这里问你们，我有一个存储元素的下拉列表框；A 和 B。当用户选择 A 时，将在同一页面显示 5 个文本框。它只会在用户选择 A 和 B 时显示。如果您知道如何操作，请点击答案或评论按钮。谢谢，祝你有美好的一天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:33:28.100

你可以通过两种方式做到这一点。

通过使用 javascript：

您的文本框包含在标记中，`dispaly:none;`并且在下拉选择时显示属性设置为阻止。

```
DropDownList.Attributes.Add("onChange", "return OnSelectedIndexChange();") 
function OnSelectedIndexChange()

{
document.getElementById("TextBox1").style.display="block";
document.getElementById("TextBox2").style.display="block";
document.getElementById("TextBox3").style.display="block";
document.getElementById("TextBox4").style.display="block";
document.getElementById("TextBox5").style.display="block";
} 
```

通过使用 AJAX：

您的文本框`visible="false"`最初和 dropdownselect 更改其属性`visible="true"`。

```
protected void DropDownList_SelectedIndexChanged(object sender, EventArgs e)
{
    if (DropDownList.SelectedItem.Text == "A")
    {
        TextBox1.Visible = true;
        TextBox2.Visible = true;
        TextBox3.Visible = true;
        TextBox4.Visible = true;
        TextBox5.Visible = true;
    }
    else
    { 
        // do something
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T06:51:14.523

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{

string txt = this.DropDownList1.SelectedValue;

 switch (txt)
            {
                case "A":
                  TextBox1.Visible = true;
                  TextBox2.Visible = true;
                  TextBox3.Visible = true;
                  TextBox4.Visible = true;
                  TextBox5.Visible = true;
                    break;
                case "do something":
                   do something
                    break;

            }
} 
```

在使用 switch case 的帮助下，您可以添加任意数量的条件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-13T03:33:44.340

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (DropDownList1.SelectedItem.Text == "A")
    {
        TextBox1.Visible = true;
        TextBox2.Visible = true;
        TextBox3.Visible = true;
        TextBox4.Visible = true;
        TextBox5.Visible = true;
    }
    else
    { 
        // do something
    }

} 
```

默认情况下，确保将控件的`Visible`属性设置为. 启用控件的。`Textbox``False``AutoPostBack``DropDownList``True`

# c++ - 尝试使用非常量字符串创建带有 freopen 的输出文件

> ID：11463674
> 
> 赞同：0
> 
> 时间：2012-07-13T03:20:57.350
> 
> 标签：c++, string, freopen

我正在尝试创建一个文件，其名称是一个字符串常量，但一个字符串由一个常量字符串“List”一个整数 + + 一个扩展名组成。这是我的代码：

```
#include <iostream>
#include <vector>
#include <iostream>
#include <fstream>
#include <iomanip>
#include <string>
using namespace std;

int main (){
            int cont=0;

            std::string result;
            std::string name = "Lista";
            std::string ext = ".txt";

            char numstr[21]; // enough to hold all numbers up to 64-bits
            sprintf(numstr, "%d", cont);
            result = name + numstr+ext;

            freopen (result, "w", stdout);
            cout<<result<<endl;
return 0;
} 
```

当我尝试构建时告诉我以下错误：

> 错误：无法转换`std::string' to`参数`1' to`FILE* 的 const char*' freopen(const char*, const char*, FILE*)'|

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T03:28:30.040

由于编译器错误状态，没有从 `std::string`to的隐式转换`char const*`（即此上下文中的*c 样式字符串*）。

虽然`std::string`有一个名为的*成员函数*[`c_str`](http://en.cppreference.com/w/cpp/string/basic_string/c_str)，它将生成一个以*null 结尾的*字符串并返回一个指向它的指针，这在处理遗留 C 函数时非常有用。

* * *

### 示例和注释

```
freopen (result.c_str (), "w", stdout); 
```

```
char const * p = result.c_str (); 
```

^(请注意，如果您对托管对象（在这种情况下）进行任何修改，指向的*c-style-string*`std::string::c_str`将失效`result`，因此将返回的值存储在非临时变量中通常是不明智的。)

* * *

**如果您点击以下链接，您可以阅读有关该功能的更多信息**：

*   **[cppreference.com - std::basic_string::c_str](http://en.cppreference.com/w/cpp/string/basic_string/c_str)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T03:29:50.157

我有一个[小应用程序](http://github.com/iKlsR/pclc)可以做到这一点。有几种方法可以做到这一点..其中最简单的是

```
const char * newvar = stringname.c_str(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T03:55:13.187

如果您要使用`sprintf`，可能最容易跳过 using `std::string`：

```
char name[32];

sprintf(name, "lista%d.txt", cont);
freopen(name, "w", stdout); 
```

如果您要使用`std::string`（对于大多数 C++ 来说可能更可取），您可能想要使用`std::stringstream`来创建名称：

```
std::ostringstream name;

name << "lista" << cont << ".txt";

freopen(name.str().c_str(), "w", stdout); 
```

但是，我一般倾向于避免`freopen`，*并*避免在 C++ 中使用 C 风格的流（例如 stout）。通常最好写到一个`ostream`. 如果您确实需要，对上一个问题的[回答](https://stackoverflow.com/q/11445182/179910)显示了如何连接`cout`到不同的输出文件。

# java - 如何使用 Google Guava 自动刷新缓存？

> ID：11463675
> 
> 赞同：41
> 
> 时间：2012-07-13T03:21:08.790
> 
> 标签：java, caching, guava

我正在使用 Google Guava 库进行缓存。对于自动缓存刷新，我们可以执行以下操作：

```
cache = CacheBuilder.newBuilder()               
                    .refreshAfterWrite(15, TimeUnit.MINUTES)
                    .maximumSize(100)
                    .build(....); 
```

但是，**当第一次出现对条目的陈旧请求时，会执行自动刷新**。

**即使没有请求缓存数据，有没有办法自动刷新它？**就像每 15 分钟应该从 Db 中提取缓存数据并加载它，无论是否有人调用缓存数据。

此外，Guava 的缓存到期时间是针对整个缓存的。**是否可以根据键使缓存值过期？**就像键为“NOT_SO_FREQ_CHANGE_DATA”的缓存数据每 1 小时过期一次，而键为“FREQ_CHANGING_DATA”的数据应该每 15 分钟过期一次？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-13T08:30:16.540

Guava 没有提供批量刷新缓存的方法，但您可以自己安排定期刷新：

```
LoadingCache<K, V> cache = CacheBuilder.newBuilder()
        .refreshAfterWrite(15, TimeUnit.MINUTES)
        .maximumSize(100)
        .build(new MyCacheLoader());

for (K key : cache.asMap().keySet()) {
    cache.refresh(key);
} 
```

但在这种情况下，您可能希望覆盖其中的`CacheLoader.reload(K, V)`方法，`MyCacheLoader`以便它异步执行。

至于第二个问题，不，你不能在 Guava 中设置 per-entry 到期。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-03-24T09:18:56.700

JAVA 8 version with parallel stream:

```
Executors
        .newSingleThreadScheduledExecutor()
        .scheduleWithFixedDelay(() -> configurationCache
                .asMap()
                .keySet()
                .parallelStream()
                .forEach((key) -> configurationCache.refresh(key)),
            0,
            1, TimeUnit.SECONDS); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-10-16T17:41:37.357

第一个问题。使用计划的执行程序启动定期刷新。

第二个问题。如果您可以从缓存键或先前缓存的值中推断出您的过期策略，则可以以不同的时间间隔刷新您的数据。

based on this: [https://code.google.com/p/guava-libraries/wiki/CachesExplained#Refresh](https://code.google.com/p/guava-libraries/wiki/CachesExplained#Refresh)

```
LoadingCache<Key, Graph> graphs = CacheBuilder.newBuilder()
   .refreshAfterWrite(1, TimeUnit.MINUTES)
   .build(
       new CacheLoader<Key, Graph>() {
         public Graph load(Key key) { // no checked exception
           return getGraphFromDatabase(key);
         }

         public ListenableFuture<Graph> reload(final Key key, Graph prevGraph) {
           if (!needsRefresh(key,prevGraph)) {
             return Futures.immediateFuture(prevGraph);
           } else {
             // asynchronous!
             ListenableFutureTask<Graph> task = ListenableFutureTask.create(new Callable<Graph>() {
               public Graph call() {
                 return getGraphFromDatabase(key);
               }
             });
             executor.execute(task);
             return task;
           }
         }
       });

ScheduledExecutorService ses = Executors.newSingleThreadScheduledExecutor();
ses.scheduleWithFixedDelay(
    new Runnable() {
        public void run() {
            for (Key key : graphs.asMap().keySet()) {
                graphs.refresh(key);
            }
        }
    }, 0, UPDATE_INTERVAL, TimeUnit.MINUTES); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-03-31T04:23:33.510

Can you reload the cache value automatically using the below code snippet, without calling the refresh method ??

```
cacher =
        CacheBuilder.newBuilder()
            .refreshAfterWrite(10, TimeUnit.SECONDS)
          .build(CacheLoader.asyncReloading(new CacheLoader<String, String>() {

              @Override
              public String load(String key) throws Exception {
                return method-call();
              }
            }, Executors.newSingleThreadExecutor())); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-11-18T17:44:32.537

Here is some sample code to refresh a cache. Guava cache is easy to implement and also it is fast.

```
import java.util.concurrent.ExecutionException
import java.util.concurrent.TimeUnit;

import com.google.common.cache.CacheBuilder;
import com.google.common.cache.CacheLoader;
import com.google.common.cache.LoadingCache;

public class GuavaTest {
    private static GuavaTest INSTANCE = new GuavaTest();

    public static GuavaTest getInstance(){
        return INSTANCE;
    }   

    private LoadingCache<String,String> cache;

    private GuavaTest() {
        cache = CacheBuilder.newBuilder()
                .refreshAfterWrite(2,TimeUnit.SECONDS)
                .build(new CacheLoader<String, String>() {
                        @Override
                        public String load(String arg0) throws Exception {
                            return addCache(arg0);
                        }
                });
    }

    private String addCache(String arg0) {
        System.out.println("Adding Cache");
        return arg0.toUpperCase();
    }

    public String getEntry(String args) throws ExecutionException{
        System.out.println(cache.size());
        return cache.get(args);
    }

    public static void main(String[] args) {
        GuavaTest gt = GuavaTest.getInstance();
        try {
            System.out.println(gt.getEntry("java"));
            System.out.println(gt.getEntry("java"));
            Thread.sleep(2100);
            System.out.println(gt.getEntry("java"));
            System.out.println(gt.getEntry("java"));
        } catch (ExecutionException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

I referred this article [guava cache example](http://www.javavogue.com/2015/05/guava-cache-memory-example.html)

# firefox - 我可以手动检查浏览器的 readyState 的值吗？

> ID：11463676
> 
> 赞同：1
> 
> 时间：2012-07-13T03:21:16.090
> 
> 标签：firefox, google-chrome, google-chrome-extension, firefox-addon, readystate

我有一个页面，其中 RFT（Rational Functional Tester）告诉我 readyState 对于 IE 是 3。从视觉上看，这个页面的加载似乎已经完成。

我可以以某种方式手动检查 Firefox 或 chrome 中页面的 readyState 值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T08:57:47.400

是的，您可以使用该[`document.readyState`属性](https://developer.mozilla.org/en/DOM/document.readyState)。`"complete"`如果页面完成加载，它将具有该值。其他可能的状态是`"loading"`（相当于`readyState`XMLHttpRequest 的 3）和`"interactive"`.

如果您需要手动检查该值，您可以使用 Firefox ( `Ctrl``Shift``K`) 中的 Web 控制台和 Chrome ( `Ctrl``Shift``J`) 中的 JavaScript 控制台，只需`document.readyState`在 JavaScript 命令行中键入并按`Enter`。

# c++ - 从根目录中找出子目录

> ID：11463681
> 
> 赞同：0
> 
> 时间：2012-07-13T03:21:35.077
> 
> 标签：c++, winapi, boost

我有一个根目录。我想找出根目录下没有子目录且不包含任何 .xml 类型文件的所有目录。我可以从“FindFirstFile”获取根目录下所有目录的列表，然后对于列表中的每个项目，查看该项目是否有子目录，如果没有，那么它是否有任何类型为“.xml”的文件。有没有更快更优雅的方法呢？我在 Windows、VS 2010 上工作，并且愿意使用诸如 boost 之类的库。

谢谢，

# c# - 如何在 C# 代码中运行另一个已安装的程序

> ID：11463684
> 
> 赞同：0
> 
> 时间：2012-07-13T03:21:39.973
> 
> 标签：c#, .net

> **可能重复：**
> [如何从 C# (WinForms) 启动进程](https://stackoverflow.com/questions/181719/how-to-start-a-process-from-c-sharp-winforms)

我开发了一个语音识别应用程序。现在，我想做的就是

```
if(voiceRecognize == browser)
   //Open a browser 
```

我想你明白我的意思。我知道这是可能的，但我该如何执行此任务？

任何示例代码或教程链接将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:23:46.387

看看[Process.Start()](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start%28v=vs.90%29.aspx)。您也许可以像这样启动一个实际的网页：

```
Process.Start("\"%ProgramFiles(x86)%\Internet Explorer\iexplore.exe\" /\"http://www.google.com\""); 
```

# javascript - 使用 jQuery 和 Tornado 进行跨域资源共享 (CORS)

> ID：11463688
> 
> 赞同：19
> 
> 时间：2012-07-13T03:21:54.140
> 
> 标签：javascript, jquery, cross-domain, tornado, cors

假设我有一个 Tornado Web 服务器 (localhost) 和一个网页 (othermachine.com)，后者包含需要对 Tornado 服务器进行跨域 ajax 调用的 javascript。

所以我这样设置我的龙卷风：

```
class BaseHandler(tornado.web.RequestHandler):
    def set_default_headers(self):
        self.set_header("Access-Control-Allow-Origin", "http://www.othermachine.com")
        self.set_header("Access-Control-Allow-Credentials", "true")
        self.set_header("Access-Control-Allow-Methods", "GET,PUT,POST,DELETE,OPTIONS")
        self.set_header("Access-Control-Allow-Headers",
            "Content-Type, Depth, User-Agent, X-File-Size, X-Requested-With, X-Requested-By, If-Modified-Since, X-File-Name, Cache-Control") 
```

我的 javascript 进行了 jQuery 调用：

```
$.ajax({
    type: 'GET',
    url: "http://localhost:8899/load/space",
    data: { src: "dH8b" },
    success: function(resp){
        console.log("ajax response: "+resp);
    },
    dataType: 'json',
    beforeSend: function ( xhr ) {
        xhr.setRequestHeader('Content-Type', 'text/plain');
        xhr.setRequestHeader('Access-Control-Request-Method', 'GET');
        xhr.setRequestHeader('Access-Control-Request-Headers', 'X-Requested-With');
        xhr.withCredentials = true;
    }
}); 
```

但我得到了可爱的`XMLHttpRequest cannot load http://localhost:8899/load/space?src=dH8b. Origin http://www.othermachine.com is not allowed by Access-Control-Allow-Origin`错误。我无法判断 jQuery / Tornado 的哪一侧（或两者？）我没有正确设置。

根据开发工具，这些是 jQuery 请求发送的标头：

**请求标头**

```
Accept:*/*
Origin:http://www.othermachine.com
Referer:http://www.othermachine.com/athletes.html?src=BCYQ&msgid=6xjb
User-Agent:Mozilla/5.0 ... 
```

如果我只是从浏览器的 url 字段中发出请求，我会得到“200 OK”：

**响应标头**

```
Access-Control-Allow-Credentials:true
Access-Control-Allow-Headers:Content-Type, User-Agent, X-Requested-With, X-Requested-By, Cache-Control
Access-Control-Allow-Methods:GET,POST
Access-Control-Allow-Origin:http://www.othermachine.com
Content-Length:0
Content-Type:text/html; charset=UTF-8
Server:TornadoServer/2.2.1 
```

这是否意味着 Tornado 正在做它的工作？我试图遵循所有 stackoverflow CORS+jQuery 帖子（例如[this](https://stackoverflow.com/questions/5584923/a-cors-post-request-works-from-plain-javascript-but-why-not-with-jquery)）的建议，但无济于事。概念上的 CORS 似乎很简单，但也许我从根本上误解了 CORS 交易中应该发生的事情......请帮忙！提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-13T13:16:52.053

没关系，编码太晚和太长会导致一个*错别字*大小的东西绊倒。作为记录，这就是 jQuery 所需要的全部内容：

```
var data = { msgid: "dH8b" },
    url = "http://localhost:8899/load" + '?' + $.param(data);
$.getJSON( url, function(resp){
    console.log("ajax response: "+resp+" json="+JSON.stringify(resp));
}); 
```

这就是 Tornado 所需要的一切：

```
class BaseHandler(tornado.web.RequestHandler):
    def set_default_headers(self):
        self.set_header("Access-Control-Allow-Origin", "http://www.othermachine.com") 
```

使用 jQuery 1.7.2、龙卷风 2.2.1。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-13T05:17:10.863

尝试将原点设置为：`othermachine.com`。它应该是一个域名，而不是一个网站地址

# java - Java：如何启用 JIT？

> ID：11463694
> 
> 赞同：1
> 
> 时间：2012-07-13T03:22:24.957
> 
> 标签：java, windows, eclipse, jit

我在通过 Eclipse 运行 Java 应用程序时遇到问题。单击运行后，提示显示：

“断言失败！程序：../truetype.c 行：2133

表达式：字形！= NULL

（请重试调试应用程序 - 必须启用 JIT）"

![在此处输入图像描述](../Images/9f17aa607dc45182215334830fbe7b51.png) * 单击重试后，提示显示“javaw.exe 已停止工作”。

![在此处输入图像描述](../Images/af66341cd17d9eaaaec9c7d39a898dfb.png)

我试图重新启动我的笔记本电脑，但问题仍然存在。任何人都知道如何解决它？提前致谢。

**编辑 1：** 下面是我尝试运行的代码。

```
public static void main(String[] args) {
    initView();
}

private static void initView() {
    final JFrame frame = new JFrame();
    frame.setTitle("Testing 101");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    final JTextField nameTextField = new JTextField();
    frame.getContentPane().add(nameTextField);

    JButton saveButton = new JButton();
    saveButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            JOptionPane.showMessageDialog(frame, "Hello "+nameTextField.getText());
        }
    });
    frame.getContentPane().add(saveButton);

    // Display.
    frame.pack();
    frame.setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:40:29.973

我认为您的问题与“启用 JIT”无关，可能与您的 java 安装有关

即时调试 - 首先看看 JIT 是什么

*   [http://msdn.microsoft.com/en-us/library/5hs4b7a6(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/5hs4b7a6(v=vs.80).aspx)

如何：启用/禁用即时调试

*   [http://msdn.microsoft.com/en-us/library/k8kf6y2a(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/k8kf6y2a(v=vs.80).aspx)

故障排除

*   检查你的java instation
    *   尝试从“命令行”运行你的java程序：java NAME_OF_CLASS_WITH_MAIN
*   检查是eclipse安装
    *   尝试从“eclipse”运行其他java程序

# android - getExternalStorageDirectory 不可用时的后备解决方案？

> ID：11463695
> 
> 赞同：4
> 
> 时间：2012-07-13T03:22:30.753
> 
> 标签：android

我目前`Environment.getExternalStorageDirectory()`用来获取一个可以临时存储一些数据的位置，然后在使用后被删除。此数据范围为 1-100MB。

这工作正常，但在某些情况下，外部存储的状态被删除或卸载等......我无法访问存储我的数据......

我的问题是，当此存储不可用时，什么可能是一个好的后备解决方案？

我的目标`Android 1.6`更大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T04:51:15.133

请注意，您[不应使用](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)直接返回的路径`Environment.getExternalStorageDirectory()`：

> 应用程序不应该直接使用这个顶级目录，以免污染用户的根命名空间。任何对应用程序私有的文件都应放置在由 . 返回的目录中 `Context.getExternalFilesDir`，如果卸载应用程序，系统将负责删除该目录。其他共享文件应放在 `getExternalStoragePublicDirectory(String)`.

使用返回的路径[`getFilesDir()`](http://developer.android.com/reference/android/content/ContextWrapper.html#getFilesDir%28%29)将您的应用程序私有的文件存储在**内部存储**上，或[`getExternalFilesDir()`](http://developer.android.com/reference/android/content/ContextWrapper.html#getExternalFilesDir%28java.lang.String%29)存储在**外部存储**上。

如果您临时存储数据，请考虑使用缓存目录。

> 当设备存储空间不足时，这些文件将首先被删除。

使用方法：[`getCacheDir()`](http://developer.android.com/reference/android/content/ContextWrapper.html#getCacheDir%28%29)或[`getExternalCacheDir()`](http://developer.android.com/reference/android/content/ContextWrapper.html#getExternalCacheDir%28%29)在外部文件系统上。阅读文档以了解它们之间的重要区别。

如果要存储的数据量不大，最好使用内部存储。否则，您将不得不管理检测外部存储是否可用的复杂性，如果没有，则退回到内部存储。

# database - Codeigniter 加入不起作用

> ID：11463697
> 
> 赞同：0
> 
> 时间：2012-07-13T03:22:40.130
> 
> 标签：database, codeigniter, join

我有一个从数据库中获取单个用户的功能，以便我可以显示它，用于用户配置文件和其他内容。

好吧，我希望能够为团体提供一个单独的表格，所以如果我愿意，我可以添加更多，而且很简单。所以我在 users 表中有一个 group_id 字段，所以我可以这样做，它会将 groups 表与 groups id 列连接起来。

好吧，我能够为我的另一个项目成功地做到这一点，但是当我将功能移到这个当前项目时（我使用相同的 EXACT 方法在两个项目上显示配置文件）它不再工作......继续什么都没有返回...

```
public function getUser($username) {
    if (empty($username)) {
        return false;
    }
    $this->ci->db->from('users');
    $this->ci->db->join('groups','users.group_id = groups.id');
    $query = $this->ci->db->where('username',$username)->get();

    $user = $query->row();

    return $user;
} 
```

这就是功能，有人可以帮我解释为什么它不起作用吗？我已经在控制器、模型和库中尝试过，但都没有工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T04:10:49.503

我觉得很愚蠢，但无论如何我发现了问题。

我忘了在 group_id 的特定用户的列中实际添加一个值

所以列中的 group_id 为 0，当它需要至少为 1 或更高时，在更改它之后，它工作得很好......

谢谢你们的所有帮助，你们俩。

# android - 如何在android中执行自定义可执行文件

> ID：11463699
> 
> 赞同：1
> 
> 时间：2012-07-13T03:22:45.380
> 
> 标签：android

我们有一个自定义可执行文件（通过在 Ubuntu 上编译源代码创建自定义可执行文件），我们正在复制到`/data/data/app-package/bin`它，然后我们尝试使用 processbuidler 执行它，但它什么也没做。我们正在传递类似`/system/bin/sh path-to-executable option`或尝试过的命令，`path-to-executable options`但没有运气。

经过一番谷歌搜索后，我们发现数据文件夹可能无权执行任何操作，那么如何在 android 中执行自定义可执行文件。

# python - Django 模板语言中的控制流

> ID：11463700
> 
> 赞同：0
> 
> 时间：2012-07-13T03:22:52.210
> 
> 标签：python, django, django-templates

我有以下代码，写在 Django 模板中。

```
{% if user.is_authenticated %}
    <div style="float: right;">
    {% for rel in RELATIONS %}
        {% if rel.group_id == g.id %}
            <a href="/group/{{ g.id }}/unsubscribe/" class="form-button">Unsubscribe</a>
        {% endif %}
    {% else %}
        <a href="/group/{{ g.id }}/subscribe/" class="form-button">Enrol</a>
    {% endfor %}
    </div>
{% endif %} 
```

该代码的目的是检查是否有匹配项，然后打印出取消订阅标签。如果不匹配打印出订阅标签。

我这样做有困难的原因是因为你在 Django 模板中，我读到你不能有变量（即 True 或 False）。

更新：（问题）

我只想打印一次取消订阅/订阅按钮。仅当 for 循环内有匹配项时才打印出取消订阅按钮。否则，如果不匹配则打印出订阅按钮（即 rel.group_id == g.id 根本不匹配）

更新 2：

在之前进行一些研究时，我发现了这一点：[https](https://code.djangoproject.com/ticket/3481) ://code.djangoproject.com/ticket/3481 这可能会为我的问题添加一些上下文。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:26:49.927

似乎您的 if/else/endif 混淆了。尝试

```
{% if user.is_authenticated %}
    <div style="float: right;">
    {% for rel in RELATIONS %}
        {% if rel.group_id == g.id %}
            <a href="/group/{{ g.id }}/unsubscribe/" class="form-button">Unsubscribe</a>
        {% else %}
            <a href="/group/{{ g.id }}/subscribe/" class="form-button">Enrol</a>
        {% endif %}
    {% endfor %}
    </div>
{% endif %} 
```

* * *

**更新**

您想检查是否`g`参与`relations`并据此做出决定。
我通常解决这个问题的方法是在我的视图中创建一个函数来执行此检查并将其传递给视图。看看[这里](https://stackoverflow.com/questions/1106849/is-if-element-in-alist-possible-with-django-templates)。

# database - 如何设计一个与自身具有多对多关系的表？

> ID：11463702
> 
> 赞同：2
> 
> 时间：2012-07-13T03:23:41.207
> 
> 标签：database, hibernate, jpa, orm

例如，一个Users实体有一个friends属性，我该如何设计这个friends属性，在我看来有2种方式：

1.  Friends 属性是一个字符串，所有用户名都用“，”分隔，这样很难阅读和修改。
2.  Friends 属性是一个 Set like `Set<Users>`，但是这样我不知道如何在实体中写？

有谁知道最好的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:26:26.930

Hay 涵盖了企业模型模式。

一方代表一个人（或一个组织）：

```
Party
id
name 
```

一方可以在一段时间内与另一方建立关系：

```
PartyRelationship
fromPartyId
toPartyId
fromDate
toDate nullable 
```

一张基本图：

```
Party -< PartyRelationship >- Party 
```

示例 SQL：

```
insert into party values (1, 'Jerry');
insert into party values (2, 'Neil');

insert into partyRelationship values (1, 2, getDate(), null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T14:22:58.720

如果一个`User`可以有多个朋友，您可以`User`像这样注释您的实体：

```
@Entity
public class User
{
    @Id
    private Long id;
    private String name;
    @ManyToMany
    @JoinTable(
            name = "user_friends",
            joinColumns =
            { @JoinColumn(
                    name = "user_id") },
            inverseJoinColumns =
            { @JoinColumn(
                    name = "friend_id") })
    private Set<User> friends;
} 
```

这样，将为s 之间的`User`关系创建一个表和一个连接表`User`。该`User`表将有 2 列，“id”和“name”。该`user_friend`表将有 2 列，“user_id”和“friend_id”。中的列`user_friend`都是`User`表的外键。

# php - CakePHP 中的可变前缀路由

> ID：11463716
> 
> 赞同：2
> 
> 时间：2012-07-13T03:25:37.087
> 
> 标签：php, cakephp, routing

我在 CakePHP 中创建了一个应用程序，它要求我在一个 CakePHP 安装中运行“多个”应用程序。像我有*n 个*控制器，它们对所有应用程序的行为都相同，但它们仅在我调用数据库时有所不同 - 无论如何，我需要创建一个行为如下的路由：

```
/app1/控制器/动作/a/b/c
```

```
/app2/控制器/动作/a/b/c
```

（其中`app1`和`app2`是可以更改为任何内容的字母数字字符串）

这将被路由到类似的东西：

```
/控制器/动作/app1/a/b/c
```

（或 app2 相同，依此类推）

路由路由也可以`/controller/action/a/b/c`，但我需要有一种方法来访问控制器内 URL 的`app1`/`app2`部分（以便在控制器内进一步处理）。有没有办法在 CakePHP 中做到这一点？谢谢。

**稍微相关的问题：**完成上述操作后，有没有办法设置“默认”应用程序名称（比如当我尝试访问`/controller/action/a/b/c`它时，它会自动路由到相当于打字的地方`/global/controller/action/a/b/c`？）

谢谢！

**有效地：**我想要的只是使用路由（或任何其他可以做到这一点的 CakePHP '方法'）来处理诸如`/foobar/controller/action/the/rest`to之类的 URL `/controller/action/the/rest`，并将“foobar”传递给控制器​​，*不知何故*。“Foobar”是任何字母数字字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T05:00:46.503

补充`app/Config/routes.php`：

```
Router::connect( 
    '/:app/:controller/:action/*', 
    array(), 
    array( 'pass' => array( 'app' ))
); 
```

这会将 的值`app`作为第一个参数传递给控制器​​中的操作。因此，在您的控制器中，您将执行以下操作：

```
class FoosController Extends AppController {
    public function view_something($app, $a, $b, $c) { 
        // ...
    }
} 
```

当您请求will be的`/myApp1/foos/view_something/1/2/3`值时， will be的值等等。`$app``'myApp1'``$a``1`

要连接其他路由，**在**上述之前，您可以添加如下内容：

```
Router::connect(
    '/pages/:action/*',
    array( 'app' => 'global', 'controller' => 'pages' ),
    array( 'pass' => array( 'app' )) // to make app 1st arg in controller
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T04:22:58.050

您应该使用[模型属性 -> dbconfig](http://book.cakephp.org/2.0/en/models/model-attributes.html#usedbconfig)来动态更改数据库，而不是路由。此外，您还应该向方法发送一些参数，通过这些参数您可以确定哪个数据库需要与您的应用程序连接。

# c - 像 Tornado 或 Twisted 这样的基于“C”的 Web 应用程序框架？

> ID：11463725
> 
> 赞同：10
> 
> 时间：2012-07-13T03:26:17.837
> 
> 标签：c, web-applications, webserver

也许我正在寻找所有错误的地方。或者我可能只是愚蠢。但我只是好奇。是否有任何仅适用于普通旧`'C'`语言的 Web 应用程序框架。喜欢`Tornado`和`Twisted`蟒蛇？再说一次，我只是好奇。

UPDATE： 保留一个标签多年后，我终于找到了一个：[kore.io](https://kore.io/) GitHub：[https ://github.com/jorisvink/kore](https://github.com/jorisvink/kore)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-18T07:30:51.240

3年前我问过这个问题。而且我一直在基于 C 的框架上保留标签。现在我发现了一个非常值得一提的。[kore.io](https://kore.io/) GitHub：[https ://github.com/jorisvink/kore](https://github.com/jorisvink/kore)

以前，我接受了[Aidenn 的回答](https://stackoverflow.com/a/11769232/1235072)，但我选择我自己的作为接受，因为这是现代且积极维护的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-01T23:57:28.210

数量不多，因为大多数 Web 应用程序不受 CPU 限制，并且涉及到可变大小字符串的突变，因此不能发挥 Cs 的优势，同时在 C 的最弱点之一中发挥作用。

话虽如此：

*   [https://github.com/DanielWaterworth/Raphters](https://github.com/DanielWaterworth/Raphters)
*   [https://github.com/derdewey/mongrel2_c_handler/](https://github.com/derdewey/mongrel2_c_handler/)
*   [http://gwan.ch/](http://gwan.ch/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-18T19:09:31.367

抱歉，艾登错了。每种脚本语言都是用 C 编写的。它只需要更多的工作。C 是一种非常强大的编程语言，可以为您编程的内容提供无限的可能性。
[https://github.com/search?l=C&q=c%2B%2B+web+framework&ref=searchresults&type=C](https://github.com/search?l=C&q=c%2B%2B+web+framework&ref=searchresults&type=Repositories) 框架的存储库列表。

# objective-c - 使用 Interface Builder 添加的 NSImageView 为 null

> ID：11463729
> 
> 赞同：1
> 
> 时间：2012-07-13T03:26:29.667
> 
> 标签：objective-c, xcode, cocoa, interface-builder, nsimageview

我有以下问题：

我在我的 NSWindow 中添加了一个 NSImageView。我将 Window 的控制器设置为文件的所有者。我可以打开我的窗口，点击按钮。它工作得很好。但是当我尝试为 ImageView 设置一个图标时，没有任何反应，因为它是空的。

它为空的原因可能是什么？我检查了一下，它已连接到 IBOutlet。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:33:15.030

请记住，仅连接到`IBOutlet`不会为给定变量分配内存。由于您尚未分配内存，因此它显示为空。

所以，先做这个。

```
@property (nonatomic) IBOutlet NSImageView *imageView; 
```

进而

```
@synthesize imageView = _imageView; 
```

然后在你设置你需要的图像之前`alloc`和.`init``_imageView`

像，

```
_imageView = [NSImageView alloc] init]; 
```

# asp.net-mvc-3 - 为什么我的图像没有缓存？

> ID：11463733
> 
> 赞同：3
> 
> 时间：2012-07-13T03:27:08.567
> 
> 标签：asp.net-mvc-3, http-caching

我有一个 ASP.NET MVC3 应用程序设置。有一个返回图像的控制器，我添加了以下内容：

```
[OutputCache(Duration = 3600, VaryByParam = "id;width", Order = 1000, Location = OutputCacheLocation.Client)]
public ActionResult Get(string id, int width)
{ ... } 
```

但是当我查看这些图像上的 HTTP 响应时，它们都有标头“缓存控制：无缓存”和“过期：-1”，这意味着浏览器永远不会缓存它们。

我环顾四周，找不到任何关于为什么响应告诉浏览器不要缓存它们的信息。我什至尝试建立自己的属性：

```
public class ContentExpiresHeader : ActionFilterAttribute
{
    public override void OnResultExecuted(ResultExecutedContext filterContext)
    {
        var cache = filterContext.HttpContext.Response.Cache;
        cache.SetExpires(DateTime.Now.AddYears(1));
        cache.SetCacheability(HttpCacheability.Private);
        cache.SetLastModifiedFromFileDependencies();
        base.OnResultExecuted(filterContext);
    }
} 
```

但这也没有让我到任何地方。

任何帮助表示赞赏。

更新：我开始认为这必须是某个 IIS 设置，它正在添加无缓存和覆盖。不过，我似乎找不到任何东西。唯一奇怪的是，如果我在调用 .Set...() 方法后查看*缓存*变量的状态，内部变量尚未更新。我本来预计会有所改变，但他们仍然显示“无缓存”。

更新2：我应该补充一点，这个方法的返回是：

```
return File(...); 
```

更新3：我也发现了这个（http://dotnetslackers.com/articles/aspnet/ASP-NET-MVC-3-Controller-for-Serving-Images.aspx）并尝试实现它没有任何运气。仍然在图像的响应标头上获得无缓存选项。

更新4：只需检查服务器设置......如果我绕过我的控制器并直接进入服务器上的图像文件，那么它会缓存并在响应标头中具有正确的缓存设置。

更新 5（是的，快疯了）：创建了一个全新的 MVC3 项目，只制作了一个控制器，它缓存得很好。所以我在直接代码之外有一些东西正在添加这个 pragma:no-cache 东西，而对于我的生活，我无法弄清楚它会是什么。=-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T05:10:59.163

尝试将可缓存性从 更改`HttpCachability.Private`为`HttpCachability.ServerAndPrivate`。它应该将缓存控制保持为私有，而不是抑制电子标签/上次修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:03:55.263

发现问题了！这是我一段时间以来见过的最奇怪的事情。

我正在使用 SocialAuth-net，在设置过程中的某个地方，我为其添加了 system.webServer 模块并设置 runAllManagedModulesForAllRequests=true。我想，“嗯，想知道这是否会导致它”，因为我无法在这个特定的应用程序之外重现这个问题。低头看，注释掉配置的那部分，我的图像开始缓存！万岁！

但是，它变得更奇怪了。我撤消了我的配置更改，刷新了，现在我仍在缓存。我无法告诉您我在没有任何更改的情况下完成了多少次系统重置，但以某种方式暂时从管道中删除这些模块似乎已经解决了这个问题。

**我可以将其追踪到 SocialAuthHttpModule，如果我将其删除，SocialAuth-net 似乎仍然有效，但缓存已可靠恢复。很奇怪。**

# c# - 将列表拆分为 N 大小的较小列表

> ID：11463734
> 
> 赞同：293
> 
> 时间：2012-07-13T03:27:09.100
> 
> 标签：c#, list, split

我正在尝试将列表拆分为一系列较小的列表。

**我的问题：**我的拆分列表的功能没有将它们拆分为正确大小的列表。它应该将它们拆分为大小为 30 的列表，而是将它们拆分为大小为 114 的列表？

如何使我的函数将列表拆分为 X 个大小为**30 或更少**的列表？

```
public static List<List<float[]>> splitList(List <float[]> locations, int nSize=30) 
{       
    List<List<float[]>> list = new List<List<float[]>>();

    for (int i=(int)(Math.Ceiling((decimal)(locations.Count/nSize))); i>=0; i--) {
        List <float[]> subLocat = new List <float[]>(locations); 

        if (subLocat.Count >= ((i*nSize)+nSize))
            subLocat.RemoveRange(i*nSize, nSize);
        else subLocat.RemoveRange(i*nSize, subLocat.Count-(i*nSize));

        Debug.Log ("Index: "+i.ToString()+", Size: "+subLocat.Count.ToString());
        list.Add (subLocat);
    }

    return list;
} 
```

如果我在大小为 144 的列表上使用该函数，则输出为：

> 索引：4，大小：120
> 索引：3，大小：114
> 索引：2，大小：114
> 索引：1，大小：114
> 索引：0，大小：114

* * *

## 回答 #1

> 赞同：482
> 
> 时间：2014-06-06T17:02:53.180

我建议使用此扩展方法将源列表按指定的块大小分块到子列表：

```
/// <summary>
/// Helper methods for the lists.
/// </summary>
public static class ListExtensions
{
    public static List<List<T>> ChunkBy<T>(this List<T> source, int chunkSize) 
    {
        return source
            .Select((x, i) => new { Index = i, Value = x })
            .GroupBy(x => x.Index / chunkSize)
            .Select(x => x.Select(v => v.Value).ToList())
            .ToList();
    }
} 
```

例如，如果您将 18 个项目的列表按每个块 5 个项目分块，它会为您提供 4 个子列表的列表，其中包含以下项目：5-5-5-3。

> 注意：在[即将到来的分块改进中`LINQ`，`.NET 6`](https://raygun.com/blog/linq-net-6-improvements/)将像这样开箱即用：

```
const int PAGE_SIZE = 5;

IEnumerable<Movie[]> chunks = movies.Chunk(PAGE_SIZE); 
```

* * *

## 回答 #2

> 赞同：369
> 
> 时间：2012-07-13T03:37:40.567

```
public static List<List<float[]>> SplitList(List<float[]> locations, int nSize=30)  
{        
    var list = new List<List<float[]>>(); 

    for (int i = 0; i < locations.Count; i += nSize) 
    { 
        list.Add(locations.GetRange(i, Math.Min(nSize, locations.Count - i))); 
    } 

    return list; 
} 
```

通用版本：

```
public static IEnumerable<List<T>> SplitList<T>(List<T> locations, int nSize=30)  
{        
    for (int i = 0; i < locations.Count; i += nSize) 
    { 
        yield return locations.GetRange(i, Math.Min(nSize, locations.Count - i)); 
    }  
} 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2012-07-13T03:38:53.663

怎么样：

```
while(locations.Any())
{    
    list.Add(locations.Take(nSize).ToList());
    locations= locations.Skip(nSize).ToList();
} 
```

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2017-09-25T13:04:26.603

库[MoreLinq](https://github.com/morelinq/MoreLINQ)有方法调用`Batch`

```
List<int> ids = new List<int>() { 1, 2, 3, 4, 5, 6, 7, 8, 9, 0 }; // 10 elements
int counter = 1;
foreach(var batch in ids.Batch(2))
{
    foreach(var eachId in batch)
    {
        Console.WriteLine("Batch: {0}, Id: {1}", counter, eachId);
    }
    counter++;
} 
```

结果是

```
Batch: 1, Id: 1
Batch: 1, Id: 2
Batch: 2, Id: 3
Batch: 2, Id: 4
Batch: 3, Id: 5
Batch: 3, Id: 6
Batch: 4, Id: 7
Batch: 4, Id: 8
Batch: 5, Id: 9
Batch: 5, Id: 0 
```

`ids`被分成 5 个带有 2 个元素的块。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2014-10-01T12:39:36.603

Serj-Tm 解决方案很好，这也是作为列表扩展方法的通用版本（将其放入静态类）：

```
public static List<List<T>> Split<T>(this List<T> items, int sliceSize = 30)
{
    List<List<T>> list = new List<List<T>>();
    for (int i = 0; i < items.Count; i += sliceSize)
        list.Add(items.GetRange(i, Math.Min(sliceSize, items.Count - i)));
    return list;
} 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2018-03-21T15:17:09.130

## .NET 6 更新

```
var originalList = new List<int>{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11}

// split into arrays of no more than three
IEnumerable<int[]> chunks = originalList.originalList.Chunk(3); 
```

**在 .NET 6 之前**

```
public static IEnumerable<IEnumerable<T>> SplitIntoSets<T>
    (this IEnumerable<T> source, int itemsPerSet) 
{
    var sourceList = source as List<T> ?? source.ToList();
    for (var index = 0; index < sourceList.Count; index += itemsPerSet)
    {
        yield return sourceList.Skip(index).Take(itemsPerSet);
    }
} 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2016-05-08T10:23:33.097

我发现公认的答案（Serj-Tm）最强大，但我想建议一个通用版本。

```
public static List<List<T>> splitList<T>(List<T> locations, int nSize = 30)
{
    var list = new List<List<T>>();

    for (int i = 0; i < locations.Count; i += nSize)
    {
        list.Add(locations.GetRange(i, Math.Min(nSize, locations.Count - i)));
    }

    return list;
} 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2018-03-20T22:09:40.397

尽管上面的许多答案都可以完成工作，但它们都在永无止境的序列（或非常长的序列）上失败了。以下是一个完全在线的实现，它保证了可能的最佳时间和内存复杂性。我们只迭代源可枚举一次并使用 yield return 进行惰性评估。消费者可以在每次迭代时丢弃列表，使内存占用等于列表`batchSize`的元素数量。

```
public static IEnumerable<List<T>> BatchBy<T>(this IEnumerable<T> enumerable, int batchSize)
{
    using (var enumerator = enumerable.GetEnumerator())
    {
        List<T> list = null;
        while (enumerator.MoveNext())
        {
            if (list == null)
            {
                list = new List<T> {enumerator.Current};
            }
            else if (list.Count < batchSize)
            {
                list.Add(enumerator.Current);
            }
            else
            {
                yield return list;
                list = new List<T> {enumerator.Current};
            }
        }

        if (list?.Count > 0)
        {
            yield return list;
        }
    }
} 
```

编辑：刚刚意识到 OP 要求将 a`List<T>`分解为 small `List<T>`，因此我关于无限可枚举的评论不适用于 OP，但可能会帮助到这里的其他人。这些评论是对其他已发布解决方案的回应，这些解决方案确实`IEnumerable<T>`用作其功能的输入，但多次枚举源可枚举。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2018-02-01T16:21:47.017

**最后加上非常有用的mhand评论**

## 原始答案

尽管大多数解决方案可能有效，但我认为它们的效率不是很高。假设您只想要前几个块的前几个项目。那么你就不想遍历序列中的所有（无数）项目。

以下将最多列举两次：一次用于 Take，一次用于 Skip。它不会枚举比您将使用的元素更多的元素：

```
public static IEnumerable<IEnumerable<TSource>> ChunkBy<TSource>
    (this IEnumerable<TSource> source, int chunkSize)
{
    while (source.Any())                     // while there are elements left
    {   // still something to chunk:
        yield return source.Take(chunkSize); // return a chunk of chunkSize
        source = source.Skip(chunkSize);     // skip the returned chunk
    }
} 
```

## 这将枚举序列多少次？

假设您将源分成`chunkSize`. 您仅枚举前 N 个块。从每个枚举块中，您只会枚举前 M 个元素。

```
While(source.Any())
{
     ...
} 
```

Any 将获取 Enumerator，执行 1 MoveNext() 并在 Disposing Enumerator 后返回返回值。这将完成 N 次

```
yield return source.Take(chunkSize); 
```

根据[参考资料](https://github.com/Microsoft/referencesource/blob/master/System.Core/System/Linq/Enumerable.cs)，这将执行以下操作：

```
public static IEnumerable<TSource> Take<TSource>(this IEnumerable<TSource> source, int count)
{
    return TakeIterator<TSource>(source, count);
}

static IEnumerable<TSource> TakeIterator<TSource>(IEnumerable<TSource> source, int count)
{
    foreach (TSource element in source)
    {
        yield return element;
        if (--count == 0) break;
    }
} 
```

在您开始枚举获取的块之前，这并没有多大作用。如果您获取多个块，但决定不枚举第一个块，则不会执行 foreach，因为您的调试器会向您显示。

如果你决定取第一个块的前 M 个元素，那么 yield return 将被执行 M 次。这表示：

*   获取枚举器
*   调用 MoveNext() 和 Current M 次。
*   释放枚举器

在第一个块被 yield 返回后，我们跳过这个第一个块：

```
source = source.Skip(chunkSize); 
```

再一次：我们将查看[参考源](https://github.com/Microsoft/referencesource/blob/master/System.Core/System/Linq/Enumerable.cs)以找到`skipiterator`

```
static IEnumerable<TSource> SkipIterator<TSource>(IEnumerable<TSource> source, int count)
{
    using (IEnumerator<TSource> e = source.GetEnumerator()) 
    {
        while (count > 0 && e.MoveNext()) count--;
        if (count <= 0) 
        {
            while (e.MoveNext()) yield return e.Current;
        }
    }
} 
```

如您所见，对 Chunk 中的每个元素`SkipIterator`调用`MoveNext()`一次。**它不叫`Current`。**

因此，对于每个 Chunk，我们看到已完成以下操作：

*   任何（）：GetEnumerator；1 移动下一个（）；处置枚举器；
*   拿（）：

    *   如果没有枚举块的内容，则什么都没有。
    *   如果枚举内容：GetEnumerator()，每个枚举项一个 MoveNext 和一个 Current，Dispose 枚举器；

    *   Skip()：对于每个被枚举的块（不是块的内容）：GetEnumerator()，MoveNext() chunkSize 次，没有 Current！处置枚举器

如果您查看枚举器发生的情况，您会发现有很多对 MoveNext() 的调用，并且只对`Current`您实际决定访问的 TSource 项进行调用。

如果你取 N 个大小为 chunkSize 的块，则调用 MoveNext()

*   Any() N 次
*   还没有任何时间 Take，只要你不枚举块
*   Skip() 的 N 倍 chunkSize

如果您决定仅枚举每个获取的块的前 M 个元素，那么您需要对每个枚举的块调用 MoveNext M 次。

总数

```
MoveNext calls: N + N*M + N*chunkSize
Current calls: N*M; (only the items you really access) 
```

因此，如果您决定枚举所有块的所有元素：

```
MoveNext: numberOfChunks + all elements + all elements = about twice the sequence
Current: every item is accessed exactly once 
```

MoveNext 是否需要大量工作，取决于源序列的类型。对于列表和数组，它是一个简单的索引增量，可能还有一个超出范围的检查。

但是如果你的 IEnumerable 是数据库查询的结果，请确保数据确实在你的计算机上物化，否则数据将被多次获取。DbContext 和 Dapper 会在数据被访问之前正确地将数据传输到本地进程。如果您多次枚举相同的序列，则不会多次获取它。Dapper 返回一个 List 对象，DbContext 记得数据已经被获取。

在开始划分块中的项目之前调用 AsEnumerable() 或 ToLists() 是否明智取决于您的存储库

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2012-07-13T03:39:48.843

我有一个通用方法，可以采用任何类型，包括浮点数，并且已经过单元测试，希望对您有所帮助：

```
 /// <summary>
    /// Breaks the list into groups with each group containing no more than the specified group size
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="values">The values.</param>
    /// <param name="groupSize">Size of the group.</param>
    /// <returns></returns>
    public static List<List<T>> SplitList<T>(IEnumerable<T> values, int groupSize, int? maxCount = null)
    {
        List<List<T>> result = new List<List<T>>();
        // Quick and special scenario
        if (values.Count() <= groupSize)
        {
            result.Add(values.ToList());
        }
        else
        {
            List<T> valueList = values.ToList();
            int startIndex = 0;
            int count = valueList.Count;
            int elementCount = 0;

            while (startIndex < count && (!maxCount.HasValue || (maxCount.HasValue && startIndex < maxCount)))
            {
                elementCount = (startIndex + groupSize > count) ? count - startIndex : groupSize;
                result.Add(valueList.GetRange(startIndex, elementCount));
                startIndex += elementCount;
            }
        }

        return result;
    } 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-09-17T20:22:54.880

```
public static IEnumerable<IEnumerable<T>> Batch<T>(this IEnumerable<T> items, int maxItems)
{
    return items.Select((item, index) => new { item, index })
                .GroupBy(x => x.index / maxItems)
                .Select(g => g.Select(x => x.item));
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2021-08-05T06:15:16.033

从 .NET 6.0 开始，您可以使用 LINQ 扩展`Chunk<T>()`将枚举拆分为块。[文档](https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.chunk?view=net-6.0)

```
var chars = new List<char>() { 'h', 'e', 'l', 'l', 'o', 'w','o','r' ,'l','d' };
foreach (var batch in chars.Chunk(2))
{
    foreach (var ch in batch)
    {
        // iterates 2 letters at a time
    }
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-06-05T16:00:46.987

这个怎么样？这个想法是只使用一个循环。而且，谁知道呢，也许您在代码中只使用 IList 实现，并且您不想强制转换为 List。

```
private IEnumerable<IList<T>> SplitList<T>(IList<T> list, int totalChunks)
{
    IList<T> auxList = new List<T>();
    int totalItems = list.Count();

    if (totalChunks <= 0)
    {
        yield return auxList;
    }
    else 
    {
        for (int i = 0; i < totalItems; i++)
        {               
            auxList.Add(list[i]);           

            if ((i + 1) % totalChunks == 0)
            {
                yield return auxList;
                auxList = new List<T>();                
            }

            else if (i == totalItems - 1)
            {
                yield return auxList;
            }
        }
    }   
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-07-25T14:58:50.850

多一个

```
public static IList<IList<T>> SplitList<T>(this IList<T> list, int chunkSize)
{
    var chunks = new List<IList<T>>();
    List<T> chunk = null;
    for (var i = 0; i < list.Count; i++)
    {
        if (i % chunkSize == 0)
        {
            chunk = new List<T>(chunkSize);
            chunks.Add(chunk);
        }
        chunk.Add(list[i]);
    }
    return chunks;
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-04-22T10:53:34.953

在 .NET 6 中，您可以使用`source.Chunk(chunkSize)`

基于 Serj-Tm 接受的答案的更通用的版本。

```
 public static IEnumerable<IEnumerable<T>> Split<T>(IEnumerable<T> source, int size = 30)
    {
        var count = source.Count();
        for (int i = 0; i < count; i += size)
        {
            yield return source
                .Skip(Math.Min(size, count - i))
                .Take(size);
        }
    } 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-08-16T13:34:52.667

```
public static List<List<T>> ChunkBy<T>(this List<T> source, int chunkSize)
    {           
        var result = new List<List<T>>();
        for (int i = 0; i < source.Count; i += chunkSize)
        {
            var rows = new List<T>();
            for (int j = i; j < i + chunkSize; j++)
            {
                if (j >= source.Count) break;
                rows.Add(source[j]);
            }
            result.Add(rows);
        }
        return result;
    } 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-08-14T04:31:29.977

您可以仅使用 LINQ 简单地尝试以下代码：

```
public static IList<IList<T>> Split<T>(IList<T> source)
{
    return  source
        .Select((x, i) => new { Index = i, Value = x })
        .GroupBy(x => x.Index / 3)
        .Select(x => x.Select(v => v.Value).ToList())
        .ToList();
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-06-05T07:22:06.750

基于[Dimitry Pavlov answere](https://stackoverflow.com/a/24087164/730674)我将删除`.ToList()`. 并且还要避免匿名类。相反，我喜欢使用不需要堆内存分配的结构。（A`ValueTuple`也可以工作。）

```
public static IEnumerable<IEnumerable<TSource>> ChunkBy<TSource>(this IEnumerable<TSource> source, int chunkSize)
{
    if (source is null)
    {
        throw new ArgumentNullException(nameof(source));
    }
    if (chunkSize <= 0)
    {
        throw new ArgumentOutOfRangeException(nameof(chunkSize), chunkSize, "The argument must be greater than zero.");
    }

    return source
        .Select((x, i) => new ChunkedValue<TSource>(x, i / chunkSize))
        .GroupBy(cv => cv.ChunkIndex)
        .Select(g => g.Select(cv => cv.Value));
} 

[StructLayout(LayoutKind.Auto)]
[DebuggerDisplay("{" + nameof(ChunkedValue<T>.ChunkIndex) + "}: {" + nameof(ChunkedValue<T>.Value) + "}")]
private struct ChunkedValue<T>
{
    public ChunkedValue(T value, int chunkIndex)
    {
        this.ChunkIndex = chunkIndex;
        this.Value = value;
    }

    public int ChunkIndex { get; }

    public T Value { get; }
} 
```

这可以像下面这样使用，它只迭代一次集合，也不分配任何重要的内存。

```
int chunkSize = 30;
foreach (var chunk in collection.ChunkBy(chunkSize))
{
    foreach (var item in chunk)
    {
        // your code for item here.
    }
} 
```

如果实际上需要一个具体的列表，那么我会这样做：

```
int chunkSize = 30;
var chunkList = new List<List<T>>();
foreach (var chunk in collection.ChunkBy(chunkSize))
{
    // create a list with the correct capacity to be able to contain one chunk
    // to avoid the resizing (additional memory allocation and memory copy) within the List<T>.
    var list = new List<T>(chunkSize);
    list.AddRange(chunk);
    chunkList.Add(list);
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-04-02T12:58:10.500

我遇到了同样的需求，我结合使用了 Linq 的**Skip()**和**Take()**方法。我将我取的数字乘以到目前为止的迭代次数，这给了我要跳过的项目数，然后我选择下一组。

```
 var categories = Properties.Settings.Default.MovementStatsCategories;
        var items = summariesWithinYear
            .Select(s =>  s.sku).Distinct().ToList();

        //need to run by chunks of 10,000
        var count = items.Count;
        var counter = 0;
        var numToTake = 10000;

        while (count > 0)
        {
            var itemsChunk = items.Skip(numToTake * counter).Take(numToTake).ToList();
            counter += 1;

            MovementHistoryUtilities.RecordMovementHistoryStatsBulk(itemsChunk, categories, nLogger);

            count -= numToTake;
        } 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-01-28T09:08:54.227

```
List<int> orginalList =new List<int>(){1,2,3,4,5,6,7,8,9,10,12};
Dictionary<int,List<int>> dic = new Dictionary <int,List<int>> ();
int batchcount = orginalList.Count/2; //To List into two 2 parts if you 
 want three give three
List<int> lst = new List<int>();
for (int i=0;i<orginalList.Count; i++)
{
lst.Add(orginalList[i]);
if (i % batchCount == 0 && i!=0)
{
Dic.Add(threadId, lst);
lst = new List<int>();**strong text**
threadId++;
}
}
if(lst.Count>0)
Dic.Add(threadId, lst); //in case if any dayleft 
foreach(int BatchId in Dic.Keys)
{
  Console.Writeline("BatchId:"+BatchId);
  Console.Writeline('Batch Count:"+Dic[BatchId].Count);
} 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2021-06-07T12:38:03.690

如果你想用条件而不是固定数字分割它：

```
///<summary>
/// splits a list based on a condition (similar to the split function for strings)
///</summary>
public static IEnumerable<List<T>> Split<T>(this IEnumerable<T> src, Func<T, bool> pred)
{
    var list = new List<T>();
    foreach(T item in src)
    {   
        if(pred(item))
        {
            if(list != null && list.Count > 0)
                yield return list;

            list = new List<T>();
        }
        else
        {
            list.Add(item);
        }
    }
} 
```

# javascript - JS API - 任何方式来判断用户是否以自己的身份发布，而不是作为他管理的页面发布？

> ID：11463735
> 
> 赞同：1
> 
> 时间：2012-07-13T03:27:09.447
> 
> 标签：javascript, api, facebook-graph-api

我有一个基本的 JS API 应用程序，可以将游戏的分数更新发布到用户的墙和页面。在测试中，发帖的人是以主页而不是她自己的身份发帖的，因此 Facebook 主页上的帖子显示为由她管理的主页发布，而不是她自己的个人资料。所以我想知道是否有任何方法可以通过 API 切换用户正在使用的“语音”。我在一次搜索中看到了一些关于配置文件选择器属性的信息，但无法显示选择器，所以要么我做错了，要么它已被弃用？任何帮助表示赞赏！

# nosql - Cassandra 1.1.2 创建二级索引失败

> ID：11463737
> 
> 赞同：0
> 
> 时间：2012-07-13T03:27:46.560
> 
> 标签：nosql, cassandra

我正在使用最新的 Cassandra 1.1.2，但无法创建或重新创建二级索引。它超时或只是不创建，发出未知的错误消息。

顺便说一句，我尝试过使用 Cassandra Cluster Admin 和 cassandra CLI。Cassandra CLI 返回“无法访问的节点”，而 Cassandra Cluster Admin 显示空白错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T05:12:44.010

在使用了一些网站、Cassandra 常见问题解答和论坛后，我发现架构不匹配，我按照说明尝试纠正架构。

它是成功的，但我不知道模式是如何完全不匹配的。

如果有人遇到同样的问题，这里是链接：[http ://wiki.apache.org/cassandra/FAQ#schema_disagreement](http://wiki.apache.org/cassandra/FAQ#schema_disagreement)

# java - 未找到 AWTU 实用程序

> ID：11463738
> 
> 赞同：1
> 
> 时间：2012-07-13T03:27:49.867
> 
> 标签：java, java-6, translucency, awtutilities

我正在开发一个小型 Java 应用程序，我想使用透明窗口。但是，当我使用时，`AWTUtilities.<any method>`我得到了这个：

> 'AWTUtilities 无法解决'

我一直在寻找解决方案，但我无法理解它们。你能用更简单的方式向我解释一下我该如何处理这个问题吗？我使用的是 Java 版本 6u23

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:30:16.887

看看[这篇论文](http://java.sun.com/developer/technicalArticles/GUI/translucent_shaped_windows/)，它提到你应该使用反射来使用这个类，因为它不是官方 Java API 的一部分。看纸的中间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:33:09.277

AWTUtilities 是在 6.12 版左右放入 java 的“未记录”API，因此建议您使用反射的原因，这允许您的应用程序在尚不支持它的 JVM 上运行

# android - 在 ICS 上使用 HTML 解析失败

> ID：11463746
> 
> 赞同：0
> 
> 时间：2012-07-13T03:30:01.423
> 
> 标签：android, html-parsing, jsoup, android-4.0-ice-cream-sandwich

我想解析一个网站以获取新闻信息。它适用于以前版本的 Android，但不适用于 ICS。这是之前工作的一段代码：

```
public NewsParsing(){

    try {
        url = new URL("http://www.curtin.edu.my/campusnews/index.htm");
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        doc = Jsoup.parse(url, 3000);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    if (doc != null)
    {
        newsArray = new ArrayList<NewsStructure>();
        Element latestNews = doc.select("div[id=post-]").first();

        Iterator<Element> newsTable = latestNews.select("div[id=post-6400]").iterator();

        while (newsTable.hasNext())
        {
            newsContent         = new NewsStructure();
            Element currIte     = newsTable.next();
            Element hElement    = currIte.getElementsByTag("h2").first();
            String newsTitle    = hElement.select("a").first().text().toString();
            String newsLink     = hElement.select("a").first().attr("href").toString();
            Element sElement    = currIte.getElementsByTag("div").first();
            String newsSnippet  = sElement.select("p").first().text().toString();
            Element dElement    = currIte.getElementsByTag("p").last();
            String newsDate     = dElement.text().toString();
            newsContent.setTitle(newsTitle);
            newsContent.setLink(newsLink);
            newsContent.setSnippet(newsSnippet);
            newsContent.setDate(newsDate);
            newsArray.add(newsContent);
        }

    }
} 
```

日志猫：

```
07-13 03:18:07.830: W/dalvikvm(1595): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
07-13 03:18:07.920: E/AndroidRuntime(1595): FATAL EXCEPTION: main
07-13 03:18:07.920: E/AndroidRuntime(1595): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.csmict.csm/my.csmict.csm.CurtinNewsMain}: android.os.NetworkOnMainThreadException
07-13 03:18:07.920: E/AndroidRuntime(1595):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at android.os.Looper.loop(Looper.java:137)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at android.app.ActivityThread.main(ActivityThread.java:4424)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at java.lang.reflect.Method.invokeNative(Native Method)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at java.lang.reflect.Method.invoke(Method.java:511)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at dalvik.system.NativeStart.main(Native Method)
07-13 03:18:07.920: E/AndroidRuntime(1595): Caused by: android.os.NetworkOnMainThreadException
07-13 03:18:07.920: E/AndroidRuntime(1595):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:404)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:391)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:157)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at org.jsoup.helper.HttpConnection.get(HttpConnection.java:146)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at my.csmict.csm.NewsParsing.<init>(NewsParsing.java:22)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at my.csmict.csm.CurtinNewsMain.onCreate(CurtinNewsMain.java:33)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at android.app.Activity.performCreate(Activity.java:4465)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-13 03:18:07.920: E/AndroidRuntime(1595):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

请指教。我正在使用 Jsoup 1.6.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:55:02.713

您需要在单独的线程上执行网络连接，否则`NetworkOnMainThreadException`会抛出 a。您可以使用`AsyncTask`. 在此处阅读我关于该主题的博客文章：

## [为什么冰淇淋三明治会使您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

# perl - Perl IO::Socket::SSL: 连接：网络不可达

> ID：11463748
> 
> 赞同：4
> 
> 时间：2012-07-13T03:30:22.313
> 
> 标签：perl, ssl

任何使用 Mail::IMAPClient 的代码都会出现此错误。为了验证我使用了以下主题中的示例：[如何使用 Perl 验证到 Gmail？](https://stackoverflow.com/questions/2364099/how-do-i-authenticate-into-gmail-using-perl)

```
#!/usr/bin/env perl -w
use strict; use warnings;
use Mail::IMAPClient;

# Connect to IMAP server
my $client = Mail::IMAPClient->new(
  Server   => 'imap.gmail.com',
  User     => $user,
  Password => $pass,
  Port     => 993,
  Ssl      =>  1,
  )
  or die "Cannot connect through IMAPClient: $@";

# List folders on remote server (see if all is ok)
if ( $client->IsAuthenticated() ) {
  print "Folders:\n";
  print "- ", $_, "\n" for @{ $client->folders() };  
};

# Say so long
$client->logout(); 
```

现在，我遇到了类似的问题，但从未见过像“网络无法访问”这样的奇怪错误。没有实际的网络问题，ping 工作正常。我安装了 IO::Socket::SSL, Net::SSLeay。

$回声-n | openssl s_client -connect imap.gmail.com:993

```
CONNECTED(00000003)
depth=2 C = US, O = Equifax, OU = Equifax Secure Certificate Authority
verify return:1
depth=1 C = US, O = Google Inc, CN = Google Internet Authority
verify return:1
depth=0 C = US, ST = California, L = Mountain View, O = Google Inc, CN = imap.gmail.com
verify return:1
---
Certificate chain
 0 s:/C=US/ST=California/L=Mountain View/O=Google Inc/CN=imap.gmail.com
   i:/C=US/O=Google Inc/CN=Google Internet Authority
 1 s:/C=US/O=Google Inc/CN=Google Internet Authority
   i:/C=US/O=Equifax/OU=Equifax Secure Certificate Authority
---
Server certificate
-----BEGIN CERTIFICATE-----
MIIDWzCCAsSgAwIBAgIKFefcnAADAAA7OzANBgkqhkiG9w0BAQUFADBGMQswCQYD
VQQGEwJVUzETMBEGA1UEChMKR29vZ2xlIEluYzEiMCAGA1UEAxMZR29vZ2xlIElu
dGVybmV0IEF1dGhvcml0eTAeFw0xMTExMTgwMjAxMjRaFw0xMjExMTgwMjExMjRa
MGgxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1N
b3VudGFpbiBWaWV3MRMwEQYDVQQKEwpHb29nbGUgSW5jMRcwFQYDVQQDEw5pbWFw
LmdtYWlsLmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAmv2pvvhXOyOA
Uq053VLGMAErgk2NcDzxWNB5PWwXHzkcFuZOa0q1YUlff6LaJurq5UctkOO+3mt1
L+/wcZiEzxTdfOclyJcY/qBsjz8qgG+4Kx3/dVlTYz2geUyxvGNibNQfuXpoI1M5
iUQ/FSaFIazXZ01tpb+mgCOtwzENMk8CAwEAAaOCASwwggEoMB0GA1UdDgQWBBRd
l+HsAH5IwfNuc25lLuryGEaXwzAfBgNVHSMEGDAWgBS/wDDr9UMRPme6npH7/Gra
42sSJDBbBgNVHR8EVDBSMFCgTqBMhkpodHRwOi8vd3d3LmdzdGF0aWMuY29tL0dv
b2dsZUludGVybmV0QXV0aG9yaXR5L0dvb2dsZUludGVybmV0QXV0aG9yaXR5LmNy
bDBmBggrBgEFBQcBAQRaMFgwVgYIKwYBBQUHMAKGSmh0dHA6Ly93d3cuZ3N0YXRp
Yy5jb20vR29vZ2xlSW50ZXJuZXRBdXRob3JpdHkvR29vZ2xlSW50ZXJuZXRBdXRo
b3JpdHkuY3J0MCEGCSsGAQQBgjcUAgQUHhIAVwBlAGIAUwBlAHIAdgBlAHIwDQYJ
KoZIhvcNAQEFBQADgYEAa6JYZBInXMfojI4bXLusfDlzZ6gnGtHxOO8hUZbDAwcL
t2/4uDDj8sroVrTWXMqURzk1lCsXlGPFhaKdnsMrmcgC01THAKPFrrQnQc/BM5H/
kr5ZAyJKHyu4dNnL3NNjig+22fp8slaLo25C95YQT5LiBL2qnAzLs4nWBzqih74=
-----END CERTIFICATE-----
subject=/C=US/ST=California/L=Mountain View/O=Google Inc/CN=imap.gmail.com
issuer=/C=US/O=Google Inc/CN=Google Internet Authority
---
No client certificate CA names sent
---
SSL handshake has read 1850 bytes and written 299 bytes
---
New, TLSv1/SSLv3, Cipher is RC4-SHA
Server public key is 1024 bit
Secure Renegotiation IS supported
Compression: NONE
Expansion: NONE
SSL-Session:
    Protocol  : TLSv1
    Cipher    : RC4-SHA
    Session-ID: D98F3659858A0F39D32F1B5D96F756DE6E093E849A6AE0066C391BE2881B9A69
    Session-ID-ctx: 
    Master-Key: 8D4BE4DFEB7F3218A501FE9240E0B51CC987B99EE0DDBA5EC13E9A10137B63508692DA684DA25E8B2839906F0F7ADDD5
    Key-Arg   : None
    Krb5 Principal: None
    PSK identity: None
    PSK identity hint: None
    TLS session ticket lifetime hint: 100800 (seconds)
    TLS session ticket:
    0000 - 6e 26 64 bb c3 97 30 9c-32 6f c5 38 d6 db 23 54   n&d...0.2o.8..#T
    0010 - 65 43 b8 01 4e 46 5b b3-81 7e 26 6b 3a 36 2b 62   eC..NF[..~&k:6+b
    0020 - 03 96 44 de 3d b0 81 be-18 b0 14 a1 09 99 28 73   ..D.=.........(s
    0030 - 2d 5a 87 6c b9 26 64 94-af f2 5e f1 f4 10 ba ff   -Z.l.&d...^.....
    0040 - 68 a0 6a 31 d6 10 f8 88-61 63 5a 58 0b 1d d0 98   h.j1....acZX....
    0050 - 81 ed f7 45 11 1d 4a 22-23 2f 44 0c 62 b4 18 e9   ...E..J"#/D.b...
    0060 - e7 4a 57 10 f1 3c a0 d6-ee 46 98 5d df e9 a5 52   .JW..<...F.]...R
    0070 - a6 75 da a6 25 89 87 f0-b0 ec 60 0d c0 19 0e 6f   .u..%.....`....o
    0080 - 23 53 a2 f2 18 e8 8d 51-28 e7 f2 d3 52 8a 02 f4   #S.....Q(...R...
    0090 - 32 aa 82 db                                       2...

    Start Time: 1342180574
    Timeout   : 300 (sec)
    Verify return code: 0 (ok)
---
DONE 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T15:22:42.750

这可能是 IPv6 错误。Gmail 最近启用了 ipv6 访问。你能试着把它放在'use Mail::IMAPClient;'之前吗？线：

```
use IO::Socket::SSL 'inet4'; 
```

# html - 这个 HTML5 截屏动画是如何创建的？

> ID：11463749
> 
> 赞同：25
> 
> 时间：2012-07-13T03:30:22.333
> 
> 标签：html, animation, canvas, png

我今天访问了[http://www.sublimetext.com](http://www.sublimetext.com)，并被该网站在其打开页面上的截屏动画所吸引。它看起来像视频和幻灯片之间的混搭。我也在其他现代网站上看到过它们，但我认为这是一些 HTML5 视频标签的诡计。但是当我查看 sublimetext 网页的来源时，我感到很困惑。

此页面上的动画是在 HTML5 2D 画布上使用纯 javascript 使用基本 PNG 图像创建的。每张幻灯片都是从 PNG 文件加载的。动画是通过仅修改图像中的少数像素来实现的。动画 javascript 定期对原始 PNG 应用这些更改。您会发现这些增量存储在脚本的 *_timeline 变量中。

我的问题是什么工具可以生成这样的增量？如何记录自己的桌面屏幕并创建这样的基本 PNG + 动画增量？

我喜欢这种方法，因为它似乎是最有效的截屏格式，其中连续帧的变化很小。

**更新 1**我知道有一些技术可以使用 GIF 来实现这一点（检查[https://askubuntu.com/q/107726](https://askubuntu.com/q/107726)），但是有什么很酷的工具可以生成这个可以将 PNG delta 转换为动画的 javascript 代码。谷歌搜索并没有帮助我找到它。

**更新 2**截屏视频（和 sublimetext）的作者在 sublimetext 论坛上回答了我的问题。他使用自定义 python 脚本完成了它，并计划在某个时候写一篇关于它的博客文章[http://www.sublimetext.com/forum/viewtopic.php?p=34252#p34252](http://www.sublimetext.com/forum/viewtopic.php?p=34252#p34252)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T16:18:48.647

[Sublime Text 的创建者 Jon Skinner在他的网站上](http://www.sublimetext.com/~jps/animated_gifs_the_hard_way.html)写下了这个过程

[他还在GitHub 上](https://github.com/sublimehq/anim_encoder)发布了他写的编码器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:20:46.483

看看他们的一张图片，你就会明白它是如何工作的：

[http://www.sublimetext.com/anim/command_palette_packed.png](http://www.sublimetext.com/anim/command_palette_packed.png)

他们只是将图像的适当部分剪切并插入到画布元素的适当位置，但如果您的问题是如何制作这样的图像，我不知道。我想用一些软件，不是手动的，但我不知道这么软......

# android - 可绘制文件夹有什么用？

> ID：11463750
> 
> 赞同：0
> 
> 时间：2012-07-13T03:30:30.033
> 
> 标签：android

> **可能重复：**
> [drawable 和 drawable-mdpi 之间的区别](https://stackoverflow.com/questions/8751313/difference-between-drawable-and-drawable-mdpi)

我可以理解drawable-ldpi、drawable-mdpi和drawable-hdpi的作用以及它们需要的比例大小。但是这个文件夹“drawable”怎么样，这个文件夹是干什么用的？我应该在这里放什么分辨率的图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T03:32:19.057

这是放置基于 xml 的可绘制对象（级别列表、状态列表等）的好地方（通常也是唯一明智的地方）。有关所有可能性，请参阅[可绘制资源的文档。](http://developer.android.com/guide/topics/resources/drawable-resource.html)这些drawables指的是其他drawables，通常在密度特定的文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T04:28:49.717

基本上这是“[默认](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)”文件夹，当 Android 无法找到[最匹配的](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)文件夹时使用。所以举个例子，如果你只有“drawable”和“drawable-ldpi”文件夹，但设备实际上是mdpi，那么“drawable”文件夹中的资源就会被选中。

# android - 通过 Android 上的服务从数据库中检索 JSON

> ID：11463755
> 
> 赞同：0
> 
> 时间：2012-07-13T03:31:09.173
> 
> 标签：android, json, ormlite, intentservice

我正在创建一个应用程序，每次服务器数据库发生更改时都需要更新本地数据库。我想运行每 2 分钟运行一次的服务，并使用 ORMLite 更新本地数据库。

将`IntentService`是做到这一点的最佳途径吗？此外，关于所有服务是否都是异步的，或者我是否必须`asynctask`在服务中调用一个而不是`IntentService`.

任何关于我应该走的方向的建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:53:48.060

我认为你需要的是一个[绑定服务](http://developer.android.com/guide/components/bound-services.html) ，它可以帮助你处理客户端-服务器模型，你的主应用程序可以利用后台服务。该服务将在后台为您完成这项工作。使用 IntentService，这个概念变得有点不同，当你有一个特定的工作需要在短时间内完成（而不是像你的那样周期性地）时，你应该处理这个问题。

而且由于频繁更新，我认为您应该保持与服务器的套接字连接以接收来自它的推送更新（我认为某些邮件客户端会这样做）。

希望这可以帮助。

# hibernate - 从下拉选择中选择值时出错

> ID：11463763
> 
> 赞同：0
> 
> 时间：2012-07-13T03:31:59.537
> 
> 标签：hibernate, jsp, struts2, hql

我想从 jsp 页面中的“表单”下拉“选择”列表中获取选定值到表单的操作类中定义的变量中，其中“选择”下拉列表本身是从列中动态获取的数据库表 'Category' 的名称'和列表 'categoryList' 是在另一个动作类中定义的。

获取所选值（即类别名称）后，我想获取表“类别”的主键“cid”。Category 的列是：id，name

在检索到类别的“cid”后，我想在另一个表“问题”的“cid”列中填写这个 cid。

我正在使用struts2和hibernate。

我的列是“名称”，表是“类别”我已经进行了映射配置和 bean 类。

我生成列表的动作类代码：

```
public class FindCategory extends ActionSupport {

    private List<Category> categoryList = new ArrayList<Category>();

    @Override
    public String execute() throws Exception {
        Session session = null;
        try {
            session = HibernateUtil.getSessionFactory().getCurrentSession();
            session.beginTransaction();
            this.categoryList = (List<Category>) session.createQuery("from Category").list();
            if (this.categoryList.isEmpty()) {
                this.addActionError("Sorry.. No category Available. Try again Later.!");
                return ERROR;
            }
            session.getTransaction().commit();
        } catch (Exception e) {
            this.addActionError("Oops. An Error Encountered...!");
            return ERROR;
        }
        return SUCCESS;
    }

    public List<Category> getCategoryList() {
        return categoryList;
    }

    public void setCategoryList(List<Category> categoryList) {
        this.categoryList = categoryList;
    }
} 
```

jsp页面的“形式”中的代码：

```
<s:form action="okadddqs" method="post" cssClass="text">
                                <input type="hidden" name="email" value="goods.ramesh@gmail.com"/>
                                <s:select label="Select Category :" name="name" list="categoryList" listkey="name" listValue="name"/> //Here the list is generated
                                <s:textarea label="Your Question " cols="40" rows="5" name="body"/>
                                <s:textfield name="op1" label="Option 1 :"/>
                                <s:textfield name="op2" label="Option 2 :"/>
                                <s:textfield name="op3" label="Option 3 :"/>
                                <s:textfield name="op4" label="Option 4 :"/>
                                <s:textfield name="op5" label="Option 5 :"/>
                                <s:select label="Correct Option :" 
                                         name="opc"       
                                         list="#@java.util.LinkedHashMap@{'1':'One',
                                         '2':'Two','3':'Three','4':'Four','5':'Five'}"/>
                                <s:submit value="Update Daily Question"/>
                            </s:form> 
```

我提交新问题类的操作：

```
package com.rambo.action;

import beans.Category;
import beans.Question;
import beans.Users;
import com.opensymphony.xwork2.ActionSupport;
import java.util.ArrayList;
import java.util.List;
import java.util.StringTokenizer;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import org.hibernate.Session;

/**
 *
 * @author ROMO
 */
@ManagedBean
@SessionScoped
public class NewQuestion extends ActionSupport {

    private String cname;

    private List<Category> cl = new ArrayList<Category>();

    public List<Category> getCl() {
        return cl;
    }

    public void setCl(List<Category> cl) {
        this.cl = cl;
    }

    @Override
    public String execute() throws Exception {

        Session session = null;
        int c;
        //c store the cid of the selected Category name from drop down list.
        try {
            session = HibernateUtil.getSessionFactory().getCurrentSession();
            session.beginTransaction();
            cl = (List<Category>) session.createQuery("from Category c where c.name = '" + getName() + "'");
            if (!cl.isEmpty()) {
                c = cl.get(0).getCid();
            } else {
                this.addActionError("Oops. Sorry No Category Available.");
                session.close();
                return ERROR;
            }

            u = new Question();
            u.setCid(c);
            u.setCname(getName());
            session.save(u);
            session.getTransaction().commit();
        } catch (Exception e) {
            this.addActionError("Oops. An Error Encountered...! Email address already registered. Try with your new email address.");
            session.close();
            return ERROR;
        }
        return SUCCESS;
    }

    @Override
    public void validate() {
        if ("".equals(getEmail()) || getEmail() == null ) {
            this.addActionError("All Fields are Compulsory to input..!");
        } else if (getEmail().indexOf("@") < 0 || getEmail().indexOf(",") > 0 || getEmail().indexOf(".") < 0) {
            this.addActionError("Please Input a valid email address.");
        }
    }
} 
```

Category.hbm.xml 中的映射：

```
<property name="name" type="string">
            <column name="NAME" length="20" not-null="true" />
        </property> 
```

bean "Category.java" 的 getter 和 setter：

```
public String getName() {
    return this.name;
}

public void setName(String name) {
    this.name = name;
} 
```

我的 glassfish 服务器显示错误为：

```
org.apache.jasper.JasperException: tag 'select', field 'list', name 'cname': The requested list key 'categoryList' could not be resolved as a collection/array/map/enumeration/iterator type. Example: people or people.{name} - [unknown location]

root cause tag 'select', field 'list', name 'cname': The requested list key 'categoryList' could not be resolved as a collection/array/map/enumeration/iterator type. Example: people or people.{name} - [unknown location] 
```

有人可以指出可能是什么错误..？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:11:58.733

正如我们在评论中讨论的那样，`categoryList`应该是`Category`带有 getter/setter的类型

```
List<Category> categoryList 
```

然后在你的jsp中

```
<s:select label="Select Category :"
       name="cid"
       id="cid"
       list="categoryList"
       listKey="id"
       listValue="name"
/> 
```

现在在您的表单中声明一个隐藏字段以提交`cname`，使用`cid`

```
<s:hidden name="cname" id="cname"/> 
```

**要设置的jQuery 代码**（根据您的要求）`cname`

```
$("#cid").change(function(){
  $("#cname").val($(this).find("option:selected").text());
}); 
```

您需要在您的操作中声明`cid`&`cname`变量（使用 getter/setter）`NewQuestion`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T06:22:07.600

正如异常所说，您的异常的根本原因来自“categoryList”代码。

请参阅[在 Struts2 下拉列表程序中查找错误？](https://stackoverflow.com/questions/9148980/find-the-error-in-struts2-dropdown-list-program)更多细节 。我很确定您遇到了同样的问题。

如果不是，请发布更多代码，最好是怀疑有问题的代码（categoryList 变量及其 getter 和 setter）

# javascript - Javascript - ECMAScript 5 之前的 bind() / 如何使用 apply() 或 call() 进行模拟？

> ID：11463767
> 
> 赞同：2
> 
> 时间：2012-07-13T03:32:16.433
> 
> 标签：javascript, binding, this, ecmascript-5

刚刚在我的 Javascript 世界的边缘遇到了一个绑定问题，所以我将按照 Regis 的建议进行讨论，然后提出我的问题：

```
function foo() {
    document.body.addEventListener("click", this.bar);
}

foo.prototype.bar = function(evt) {
    alert(this);
}

test = new foo(); 
```

这会向`document.body`元素发出警报，因为`this`由于函数引用而丢失了。因此，引用必须用于`bind()`持久化引用：

```
function foo() {
    document.body.addEventListener("click", this.bar.bind(this));
} 
```

这会警告类型为预期的对象`foo`。

* * *

但是，根据[这张表](http://kangax.github.com/es5-compat-table/)，如果我使用`bind()`. 我一直在阅读`apply()`，`call()`但它们似乎适用于有争议的情况。`bind()`在这种情况下，如何使用 pre-ECMAScript5 方法实现我需要的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:37:20.857

John Resig 没有给出我自己的答案，而是[告诉你如何在这里](http://ejohn.org/apps/learn/)。（点击**1）我们的目标**，然后点击**下一步**）。

Resig 的解决方案来自prototype.js。您还可以[在此处](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)查看 MDN 的描述以及实现代码，近似于实际的 ES5 实现。不过，对于大多数用途来说，它应该已经足够好了。

# asp.net - Linq，EF4，Linq查询后过滤数据

> ID：11463769
> 
> 赞同：0
> 
> 时间：2012-07-13T03:32:25.073
> 
> 标签：asp.net, asp.net-mvc-3, linq, entity-framework

我想过滤 Linq 查询后的结果。

并使其成为 List() 或 Array()。

这是我的代码，

```
//for test, filter is always true
bool filter = true;

OrdersRepository ordersRepository = new OrdersRepository();

var productInQuery = ordersRepository.ProductIn;
var productOutQuery = ordersRepository.ProductOut;
var productQuery = ordersRepository.Product;
var orderInfoQuery = ordersRepository.OrderInfo;

var result = (from p in productInQuery
      join o in orderInfoQuery on p.refNo equals o.refNo
      join x in productQuery on p.productNo equals x.no
      join t in productOutQuery on p.no equals t.productInNo into productIn
      from t in productIn.DefaultIfEmpty()
      orderby o.processDate descending
      select new reportModel
      {
          yourRef = o.yourRefNo,
          modelNo = x.modelNo,
          mfgNo = p.mfgNo,
          serialNo = p.serialNo,
          poNo = p.poNo,
          lbs =  p.lbs,
          width = p.width,
          height = p.height,
          depth = p.depth,
          qty = p.qty,
          dateIn = o.processDate,
          dateOut = (from m in orderInfoQuery where m.refNo == t.refNo select m.processDate).FirstOrDefault(),
          etaDate = (from w in orderInfoQuery where w.refNo == t.refNo select w.eta).FirstOrDefault()
      });

// Filter one more time
if (filter)
{
    List<reportModel> a = (from q in result
         where q.etaDate >= new DateTime(2012, 5, 20)
         select q).ToList();

    //var a = result.Where(q => q.etaDate >= new DateTime(2012, 5, 20)).ToList(); //I tried this too, but it does not work either.
}
else
{
    var a = result.ToList();
} 
```

**运行上述代码时，会出现错误消息。**

```
Specified method is not supported.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NotSupportedException: Specified method is not supported.

Source Error: 

Line 64:                  */
Line 65: 
Line 66:                 var a = result.Where(q => q.etaDate >= new DateTime(2012, 5, 20)).ToList();
Line 67:             }
Line 68:             else

Source File: WebUI\Controllers\TestController.cs    Line: 66 

Stack Trace: 

[NotSupportedException: Specified method is not supported.]
   MySql.Data.Entity.SqlGenerator.Visit(DbApplyExpression expression) +28
   System.Data.Common.CommandTrees.DbApplyExpression.Accept(DbExpressionVisitor`1 visitor) +23
   MySql.Data.Entity.SqlGenerator.VisitInputExpression(DbExpression e, String name, TypeUsage type) +35
   MySql.Data.Entity.SelectGenerator.VisitInputExpressionEnsureSelect(DbExpression e, String name, TypeUsage type) +21
   MySql.Data.Entity.SelectGenerator.Visit(DbProjectExpression expression) +38
   System.Data.Common.CommandTrees.DbProjectExpression.Accept(DbExpressionVisitor`1 visitor) +23
   MySql.Data.Entity.SqlGenerator.VisitInputExpression(DbExpression e, String name, TypeUsage type) +35
   MySql.Data.Entity.SelectGenerator.VisitInputExpressionEnsureSelect(DbExpression e, String name, TypeUsage type) +21
   MySql.Data.Entity.SelectGenerator.Visit(DbFilterExpression expression) +37
   System.Data.Common.CommandTrees.DbFilterExpression.Accept(DbExpressionVisitor`1 visitor) +23
   MySql.Data.Entity.SqlGenerator.VisitInputExpression(DbExpression e, String name, TypeUsage type) +35
   MySql.Data.Entity.SelectGenerator.VisitInputExpressionEnsureSelect(DbExpression e, String name, TypeUsage type) +21
   MySql.Data.Entity.SelectGenerator.Visit(DbProjectExpression expression) +38
   System.Data.Common.CommandTrees.DbProjectExpression.Accept(DbExpressionVisitor`1 visitor) +23
   MySql.Data.Entity.SqlGenerator.VisitInputExpression(DbExpression e, String name, TypeUsage type) +35
   MySql.Data.Entity.SelectGenerator.VisitInputExpressionEnsureSelect(DbExpression e, String name, TypeUsage type) +21
   MySql.Data.Entity.SelectGenerator.Visit(DbProjectExpression expression) +38
   System.Data.Common.CommandTrees.DbProjectExpression.Accept(DbExpressionVisitor`1 visitor) +23
   MySql.Data.Entity.SqlGenerator.VisitInputExpression(DbExpression e, String name, TypeUsage type) +35
   MySql.Data.Entity.SelectGenerator.VisitInputExpressionEnsureSelect(DbExpression e, String name, TypeUsage type) +21
   MySql.Data.Entity.SelectGenerator.Visit(DbSortExpression expression) +63
   System.Data.Common.CommandTrees.DbSortExpression.Accept(DbExpressionVisitor`1 visitor) +23
   MySql.Data.Entity.SqlGenerator.VisitInputExpression(DbExpression e, String name, TypeUsage type) +35
   MySql.Data.Entity.SelectGenerator.VisitInputExpressionEnsureSelect(DbExpression e, String name, TypeUsage type) +21
   MySql.Data.Entity.SelectGenerator.Visit(DbProjectExpression expression) +38
   System.Data.Common.CommandTrees.DbProjectExpression.Accept(DbExpressionVisitor`1 visitor) +23
   MySql.Data.Entity.SelectGenerator.GenerateSQL(DbCommandTree tree) +60
   MySql.Data.MySqlClient.MySqlProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree) +334
   System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree) +147
   System.Data.EntityClient.EntityCommandDefinition..ctor(DbProviderFactory storeProviderFactory, DbCommandTree commandTree) +526

[EntityCommandCompilationException: An error occurred while preparing the command definition. See the inner exception for details.]
   System.Data.EntityClient.EntityCommandDefinition..ctor(DbProviderFactory storeProviderFactory, DbCommandTree commandTree) +1329
   System.Data.EntityClient.EntityProviderServices.CreateCommandDefinition(DbProviderFactory storeProviderFactory, DbCommandTree commandTree) +97
   System.Data.EntityClient.EntityProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree) +198
   System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree) +147
   System.Data.Objects.Internal.ObjectQueryExecutionPlan.Prepare(ObjectContext context, DbQueryCommandTree tree, Type elementType, MergeOption mergeOption, Span span, ReadOnlyCollection`1 compiledQueryParameters) +397
   System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption) +696
   System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption) +149
   System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator() +44
   System.Data.Entity.Internal.Linq.InternalQuery`1.GetEnumerator() +40
   System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator() +40
   System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) +315
   System.Linq.Enumerable.ToList(IEnumerable`1 source) +58
   BseWms.WebUI.Controllers.TestController.dateTest() in C:\Users\mark\Documents\Visual Studio 2010\Projects\BseWms\BseWms.WebUI\Controllers\TestController.cs:66
   lambda_method(Closure , ControllerBase , Object[] ) +62
   System.Web.Mvc.<>c__DisplayClass1.<WrapVoidAction>b__0(ControllerBase controller, Object[] parameters) +17
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970349
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

和 reportModel 类。

```
public class reportModel
{
    public string yourRef {get; set;}
    public string modelNo {get; set;}
    public string mfgNo {get; set;}
    public string serialNo {get; set;}
    public string poNo {get; set;}
    public Nullable<float> lbs { get; set; }
    public Nullable<float> width { get; set; }
    public Nullable<float> height { get; set; }
    public Nullable<float> depth { get; set; }
    public int qty {get; set;}
    public Nullable<DateTime> dateIn { get; set; }
    public Nullable<DateTime> dateOut { get; set; }
    public Nullable<DateTime> etaDate { get; set; }
} 
```

这段代码有什么问题？@.@;

有人知道，请给我建议。

谢谢

[编辑]

@Tyrsius

我按照您的建议尝试过，但出现同样的错误。

```
var thedate = new DateTime(2012, 5, 20);
List<reportModel> a = (from q in result
                       where q.etaDate >= thedate
                       select q).ToList(); 
```

![在此处输入图像描述](../Images/7ee77287617967930773b55849fa189c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:35:58.407

这一点在这里

```
List<reportModel> a = (from q in result 
    where q.etaDate >= new DateTime(2012, 5, 20) select q).ToList(); 
```

是非法的，因为 EF 需要将其转换为 SQL，并且您不能像`new Datetime()`. 解决方案很简单：在尝试在查询中使用对象之前构造对象

```
var date = new DateTime(2012, 5, 20);
List<reportModel> a = (from q in result 
    where q.etaDate >= date select q).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T00:28:09.107

假设结果执行良好，您可以像这样过滤查询：

```
if(filter)
{
    var dateFilter = new DateTime(2012, 5, 20);
    result = result.Where(x => x.etaDate >= dateFilter);
}

return result.ToList(); //or .ToArray() 
```

我建议您在结果执行后放置一个断点，看看您是否有正确的reportModel。结果已被转换为 IQueryable，是否有特殊原因要将其转换为列表？

希望这可以帮助。

# java - 切换视图android时出现意外错误

> ID：11463770
> 
> 赞同：0
> 
> 时间：2012-07-13T03:32:34.133
> 
> 标签：java, android, eclipse, sdk

我面临着奇怪的问题，不知道是什么原因造成的。我有 3 个视图

```
ConsumerRegistration.java->registration.xml
Login.java->main2.xml
Toc.java->terms.xml 
```

每当我独立运行 3 个视图时都没有问题，当我从 Login 调用 Toc 或从 Toc Login 时也没有问题，但是当我从 Toc 或 Login 调用 ConsumerRegistration 时，它会引发意外错误，导致应用程序关闭。java和布局文件的代码如下

```
Login.java

    package com.multiview.org;
    import android.app.Activity;  
    import android.content.Intent;  
    import android.os.Bundle;  
    import android.view.View;  
    import android.widget.Button;  
     public class Login extends Activity {  
        /** Called when the activity is first created. */  
        @Override  
        public void onCreate(Bundle savedInstanceState) {  
          super.onCreate(savedInstanceState);  
          setContentView(R.layout.main2);  
          Button next = (Button) findViewById(R.id.button2);  
                next.setOnClickListener(new View.OnClickListener() {  
                 public void onClick(View view) {  

                  Intent myIntent = new Intent(view.getContext(), ConsumerRegistration.class);  
                   startActivityForResult(myIntent, 0);  
                 }  
               });  
        }  
      }  

main2.xml

    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <Button android:text="View 1"  
              android:id="@+id/button2"  
             android:layout_width="fill_parent"  
              android:layout_height="wrap_content">  
          </Button>  

    </LinearLayout>

ConsumerRegistration.java

    package com.multiview.org;

    import java.io.BufferedReader;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.InputStreamReader;
    import org.apache.http.HttpEntity;
    import org.apache.http.HttpResponse;
    import org.apache.http.client.ClientProtocolException;
    import org.apache.http.client.HttpClient;
    import org.apache.http.client.methods.HttpPost;
    import org.apache.http.entity.StringEntity;
    import org.apache.http.impl.client.DefaultHttpClient;
    import org.apache.http.message.BasicHeader;
    import org.apache.http.protocol.HTTP;
    import org.json.JSONArray;
    import org.json.JSONException;
    import org.json.JSONObject;
    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.RadioButton;
    import android.widget.Toast;

    public class ConsumerRegistration extends Activity {
        /** Called when the activity is first created. */
        EditText un,pw,pc,by,zc;
        RadioButton m,f;
        JSONObject j;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.registration);

             un = (EditText)findViewById(R.id.et_un);
             pw = (EditText)findViewById(R.id.et_pw);
             pc = (EditText)findViewById(R.id.et_pc);
             by = (EditText)findViewById(R.id.et_by);
             zc = (EditText)findViewById(R.id.et_zc);
             m=(RadioButton)findViewById(R.id.rb_m);
             f=(RadioButton)findViewById(R.id.rb_f);

            Button ok = (Button)findViewById(R.id.btn_login);
            ok.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    j = new JSONObject();
                    try {
                    j.put("username", un.getText().toString());
                    j.put("password", pw.getText().toString());
                    j.put("email", un.getText().toString());
                    j.put("is_active", "1");
                    j.put("is_staff", "0");
                    j.put("is_superuser","0");
                    j.put("promo_code", pc.getText().toString());
                    j.put("gender", "m");
                    j.put("zip", zc.getText().toString());
                    j.put("birth_year", by.getText().toString());
                    j.put("first_name", "john");
                    j.put("last_name", "doe");
                    j.put("current_state", "1");

                    } catch (JSONException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                    HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost("http://10.0.2.2:8000/api/ecp/user/?format=json");
                    try {
                        HttpEntity entity;
                        StringEntity s = new StringEntity(j.toString());
                        s.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
                        entity = s;
                        httppost.setEntity(entity);
                        HttpResponse response;
                        response = httpclient.execute(httppost);
                        entity = response.getEntity();
                        InputStream is = entity.getContent();
                        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
                        StringBuilder sb = new StringBuilder();

                        String line = null;
                        try {
                            while ((line = reader.readLine()) != null) {
                                sb.append((line + "\n"));
                            }
                        } catch (IOException e) {
                            e.printStackTrace();
                        } finally {
                            try {
                                is.close();
                            } catch (IOException e) {
                                e.printStackTrace();
                            }
                        }
                        try {
                            Toast.makeText(ConsumerRegistration.this, "created", Toast.LENGTH_SHORT).show();
                            JSONObject jsonObject = new JSONObject(sb.toString());
                            JSONObject meta = jsonObject.getJSONObject("meta");  
                            String limit = meta.getString("limit");  
                            Toast.makeText(ConsumerRegistration.this, limit, Toast.LENGTH_SHORT).show();
                            JSONArray array = jsonObject.getJSONArray("objects");

                            String key = array.getJSONObject(0).getString("api_key");
                            String uname = array.getJSONObject(0).getString("username");
                            Toast.makeText(ConsumerRegistration.this, j.toString(),
                                    Toast.LENGTH_SHORT).show();

                        } catch (JSONException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }   
                        //Toast.makeText(HelloWorldActivity.this, sb.toString(), Toast.LENGTH_SHORT).show();
                    } catch (ClientProtocolException e) {
                        Toast.makeText(ConsumerRegistration.this, e.toString(), Toast.LENGTH_SHORT).show();

                        // TODO Auto-generated catch block
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        Toast.makeText(ConsumerRegistration.this, e.toString(), Toast.LENGTH_SHORT).show();

                    }

                }
            });

            Button next = (Button) findViewById(R.id.btnLogin);  
            next.setOnClickListener(new View.OnClickListener() {  
             public void onClick(View view) {  
               Intent myIntent = new Intent(view.getContext(), Login.class);  
               startActivityForResult(myIntent, 0);  
             }  
           });
        }

    }

Registration.xml

    <TableLayout 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        xmlns:android="http://schemas.android.com/apk/res/android">
        <TableRow>
            <Button 
                android:id="@+id/btnLogin"
                android:text="Login"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </TableRow>
        <TableRow>
            <TextView
            android:id="@+id/tv_un"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:text="Login Email:"
            android:textColor="#444444"
            android:textSize="10pt" />

            <EditText
                android:id="@+id/et_un"
                android:layout_width="150dip"
                android:layout_height="wrap_content"
                android:layout_alignTop="@id/tv_un"
                android:layout_toRightOf="@id/tv_un"
                android:background="@android:drawable/editbox_background" />
        </TableRow>
        <TableRow>
            <TextView
                android:id="@+id/tv_pw"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignRight="@+id/textView2"
                android:layout_below="@+id/et_un"
                android:text="Password:"
                android:textColor="#444444"
                android:textSize="10pt" />
        <EditText
            android:id="@+id/et_pw"
            android:layout_width="150dip"
            android:layout_height="wrap_content"
            android:background="@android:drawable/editbox_background"
            android:ems="10"
            android:password="true" />  
         </TableRow>
         <TableRow>
             <TextView
                android:id="@+id/tv_pc"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/et_pc"
                android:layout_alignBottom="@+id/et_pc"
                android:layout_alignParentLeft="true"
                android:text="Promo Code"
                android:textColor="#444444"
                android:textSize="10pt" />
            <EditText
                android:id="@+id/et_pc"
                android:layout_width="150dip"
                android:layout_height="wrap_content"
                android:layout_alignTop="@id/tv_un"
                android:layout_toRightOf="@id/tv_un"
                android:background="@android:drawable/editbox_background" />

         </TableRow>
         <TableRow>
             <TextView
                android:id="@+id/tv_g"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:text="Gender"
                android:textColor="#444444"
                android:textSize="10pt" />
                 <RadioGroup
                    android:id="@+id/radioSex"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <RadioButton
                        android:id="@+id/rb_m"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:checked="true"
                        android:text="Male" />

                    <RadioButton
                        android:id="@+id/rb_f"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Female" />

                  </RadioGroup>

         </TableRow>
         <TableRow>

             <TextView
                 android:id="@+id/textView2"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:text="Birth Year"
                 android:textColor="#444444"
                 android:textSize="10pt" />

          <EditText
            android:id="@+id/et_by"
            android:layout_width="150dip"
            android:layout_height="wrap_content"
            android:layout_alignTop="@id/tv_un"
            android:layout_toRightOf="@id/tv_un"
            android:background="@android:drawable/editbox_background" />

         </TableRow>
         <TableRow>
             <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/et_zc"
                android:layout_alignBottom="@+id/et_zc"
                android:layout_alignLeft="@+id/textView2"
                android:text="Zip Code"
                android:textColor="#444444"
                android:textSize="10pt" />

             <EditText
                android:id="@+id/et_zc"
                android:layout_width="150dip"
                android:layout_height="wrap_content"
                android:layout_alignTop="@id/tv_un"
                android:layout_toRightOf="@id/tv_un"
                android:background="@android:drawable/editbox_background" />

         </TableRow>
         <TableRow>
                 <Button
                    android:id="@+id/btn_back"
                    android:layout_width="100dip"
                    android:layout_height="wrap_content"
                    android:layout_alignParentBottom="true"
                    android:layout_centerHorizontal="true"
                    android:text="Back" />

                 <Button
                    android:id="@+id/btn_login"
                    android:layout_width="100dip"
                    android:layout_height="wrap_content"
                    android:layout_alignParentBottom="true"
                    android:layout_centerHorizontal="true"
                    android:text="Next" />

         </TableRow>
    </TableLayout>

Toc.java

    package com.multiview.org;
    import android.app.Activity;  
    import android.content.Intent;  
    import android.os.Bundle;  
    import android.view.View;  
    import android.widget.Button;  
     public class Toc extends Activity {  
        /** Called when the activity is first created. */  
        @Override  
        public void onCreate(Bundle savedInstanceState) {  
          super.onCreate(savedInstanceState);  
          setContentView(R.layout.terms);  
          Button next = (Button) findViewById(R.id.btnAccept);  
                next.setOnClickListener(new View.OnClickListener() {  
                 public void onClick(View view) {  
                   Intent myIntent = new Intent(view.getContext(), Login.class);  
                   startActivityForResult(myIntent, 0);  
                 }  
               });  
        }  
      }  

terms.xml

    <?xml version="1.0" encoding="utf-8"?>
    <TableLayout 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        xmlns:android="http://schemas.android.com/apk/res/android">
        <TableRow>

            <EditText
                android:id="@+id/EditText02"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:ems="10"
                android:gravity="top|left"
                android:inputType="textMultiLine"
                android:lines="5"
                android:scrollHorizontally="false" 
                android:value="this is test"/>
        </TableRow>
        <TableRow>

            <Button
                android:id="@+id/button2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Back" />

            <Button
                android:id="@+id/btnAccept"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Accept" />
        </TableRow>
    </TableLayout>

Manifest file

    <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.multiview.org"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk android:minSdkVersion="10" />
        <uses-permission android:name="android.permission.INTERNET" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name" >
            <activity
                android:name=".Toc"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <activity android:name=".Login"></activity>
        </application>

    </manifest> 
```

请让我如何找到意外错误的确切位置...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:47:07.030

您尚未在清单中声明 ConsumerRegistration Activity。声明并重试。

# javascript - jQuery inview 仅将类添加到视图中的第一项

> ID：11463771
> 
> 赞同：0
> 
> 时间：2012-07-13T03:32:54.663
> 
> 标签：javascript, jquery

我正在开发一个博客主题，该主题使用 inview 插件来使用 J & K 滚动，并将一个类应用于正在查看的文章。唯一的问题是，由于我有一台分辨率很大的mac，一次查看的文章不止1篇，所以下面的脚本将“inview”类添加到（通常对我来说是3篇文章）几篇文章中时间。有没有办法修改它，所以它只将“inview”类添加到用户屏幕上的第一篇文章中？从技术上讲，这可能不是页面上的第一篇文章，只是少数几个视图中的第一篇。任何帮助表示赞赏。

```
$('article').each(function(){
        $(this).bind('inview', function (event, visible) {
            if (visible == true) {
                $(this).addClass("inview");
            }

            else {
                $(this).removeClass("inview");
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T05:22:05.970

您可以随时转到 jquery.inview.js 第 97 行，上面写着

```
$element.data('inview', visiblePartsMerged).trigger('inview', [true, visiblePartX, visiblePartY]); 
```

在此之前，添加

```
if ($element.prev(".inview").length < 1) 
```

因此，它会检查在要触发事件“inview”的元素之前是否存在具有类“inview”的元素，其中可见 = true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:21:12.300

如果我正确理解了您的问题，我认为您可以在 .each 函数中添加一个 index 参数。像这样：

```
$('article').each(function(index){
        if( index == 0 )
        {
            $(this).bind('inview', function (event, visible) {
                if (visible == true) {
                    $(this).addClass("inview");
                }

                else {
                    $(this).removeClass("inview");
                }
            });
        }
    }); 
```

这会将类“inview”添加到第一篇文章中。

# java - 使用 JDBC 从 postgresql 获取消息响应

> ID：11463777
> 
> 赞同：3
> 
> 时间：2012-07-13T03:33:45.537
> 
> 标签：java, postgresql, jdbc

我想问一下当我们执行查询时如何从 PostgreSQL 获得消息响应。

我的意思是来自 PostgreSQL 的消息响应是这样的，例如：

*   查询成功返回：1 行受影响，11 毫秒执行时间。
*   错误：重复键值违反唯一约束“pk_grouptab”
*   等等

我正在使用 JDBC。

我试图`executeUpdate()`从 Statement 类中获取它。但它只返回 int 表示查询是否成功执行。

有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T04:11:23.903

我不确定你是否得到类似的陈述

> 查询成功返回：1 行受影响，11 毫秒执行时间。

但是您可以选择使用 like[`statement.executeUpdate()`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)来返回受 DML 语句执行影响的行数。

来到另一个声明

> 错误：重复键值违反唯一约束“pk_grouptab”

每当数据库发生错误，`SQLException`抛出a时，需要显式捕获异常并进行处理。[SQLException Api](http://docs.oracle.com/javase/6/docs/api/java/sql/SQLException.html#getErrorCode%28%29)此外，请查看此[链接](http://www.tutorialspoint.com/jdbc/jdbc-exceptions.htm)，其中简要描述了 JDBC 中的异常处理。

如果您想在执行查询后检查是否有任何警告，您可以使用[`getWarnings`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#getWarnings%28%29)和使用诸如`getMessage()`获取警告消息之类的方法。

下面是骨架

```
 try {
     // execute sql statements here
     log.info(statement.getWarnings().getMessage());
 }
 catch(SQLException ex) {
     // an exception has occurred get all info related to the exception
     log.info(ex.getErrorCode());
     log.info(ex.getMessage());
     ex.printStackTrace();
 }
 finally {
     // close all open connections
 } 
```

希望这对您有所帮助。

# jquery - jQuery UI 对话框冲突

> ID：11463778
> 
> 赞同：2
> 
> 时间：2012-07-13T03:34:09.080
> 
> 标签：jquery, jquery-ui, tabs, modal-dialog

当让 jQuery UI 对话框弹出一个选项卡视图时，我遇到了一个问题，该选项卡视图又包含三个浮动面板（div）。代码是这样的

```
<body>
<div id='dialog'>My Dialog</div>
<div id='mytabs'>
<ul><li><a href='#tabA'>Tab A</a></li><li><a href='#tabB'>Tab B</a></li></ul>
<div id='tabA'>
<div id='toolpanel' style='float:left;width:40px'>Content</div>
<div id='proppanel' style='float:left;width:200px'>Content</div>
<div id='datapanel' style='float:left;clear:right;width:100px'>Content</div>
</div>
<div id='tabB'>...</div>
</div>
</body> 
```

最初，我正在扩展第三个面板以填充整个可用客户区。类似的东西

```
var wh = $('#tabA').width() - $('#toolpanel').outerWidth() - $('#proppanel').outerWidth();
$('#datapanel').css('width',wh + 'px');
$('#dialog').dialog({modal:true}); 
```

但是，通过这种设置，我发现第三个面板 datapanel 在我打开对话框后立即漂浮在其兄弟姐妹的下方。我暂时采取了一些措施来防止这种情况发生

```
$('#datapanel').css('width',wh - 28 + 'px'); 
```

本质上，防止数据面板占用放置其兄弟姐妹后剩余的全部空间。

我不明白。我认为 jQuery UI 对话框确实进入了一个默认 zIndex 为 1000 的绝对定位层。如果是这种情况，为什么要尝试显示它会导致我的数据面板向下浮动？为什么那一点算术，wh - 28，阻止这种情况发生？

我非常感谢您对此提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T05:04:47.363

发生这种情况是因为您调整了大小，而不是因为 jQuery UI，我将尽力解释为什么我能做到最好。

您必须记住`tabA`，作为没有规定宽度的元素，默认情况下，它将占据其容器的 100%（而不是其子元素的宽度总和，这似乎是您所假设的），并且因此，您在尝试调整大小时的算术`datapanel`不起作用。实际上，如果您注释掉对话框调用行，您会看到`tabB`由于调整大小而中断并落入折叠之下。

您可以通过为 tabA 的宽度定义样式或使用这段代码来解决此问题

```
var whA = $('#toolpanel').outerWidth(true) + $('#proppanel').outerWidth(true) + $('#datapanel').outerWidth(true);

$('#tabA').css('width',whA + 'px'); 
```

您似乎也忽略了所有元素都是由边距+边框+填充+内容组成的事实。

所以，当你说

```
var wh = $('#tabA').width() - $('#toolpanel').outerWidth() - $('#proppanel').outerWidth(); 
```

首先，通过仅使用 outerWidth() 而不是 outerWidth(true) 您忽略了两个内部 div 的边距。

然后在：

```
 $('#datapanel').css('width',wh + 'px'); 
```

您正在将 datapanel 的宽度 [仅与内容相关] 设置为`wh`，但根据您在 wh 中计算的内容，您应该设置的是 div 的整个宽度 [包括边距、边框和填充]。

所以，通过减去

```
$('#datapanel').outerWidth(true)-$('#datapanel').width()  //margins+border+padding of datapanel 
```

在`wh`你得到所需的宽度。

总之，这是一个适合您的代码片段：

```
var whA = $('#toolpanel').outerWidth(true) + $('#proppanel').outerWidth(true) + $('#datapanel').outerWidth(true);

$('#tabA').css('width',whA + 'px');

var wh = $('#tabA').width() - $('#toolpanel').outerWidth(true) - $('#proppanel').outerWidth(true)-$('#datapanel').outerWidth(true)+$('#datapanel').width();

$('#datapanel').css('width',wh + 'px');
$('#dialog').dialog({modal:true}); 
```

# symfony - 在 symfony2 控制器中取消设置表单字段值

> ID：11463779
> 
> 赞同：0
> 
> 时间：2012-07-13T03:34:19.877
> 
> 标签：symfony, symfony-forms

在典型的 Symfony2 表单中，当一个字段无效时，该表单会再次呈现给用户，所有字段都会重新填充，并且特定字段会出现问题。

在我的表单中，我想强制用户重新输入一个字段的值（出于安全原因），但保留其余字段。有没有办法从 SF2 的控制器中取消设置/清除字段值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T07:26:01.510

只需`null`在模型对象本身上将其设置为（或任何空值）即可。

```
if ($form->isValid()) {
    // ...
} else {
    $object->setSomeField(null);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T15:14:20.957

如下面的答案所示更改对象上的值后，您需要再次创建表单并将对象传递给表单...

```
$form = $this->createForm(new YourFormType(), $object);

return $this->render('YourBundle:YourEntityName:yourTemplate.html.twig, (array(
    'entity'=>$entity,
    'form'=>$form->createView()
)); 
```

# css - 使用 box-sizing:border-box 在布局中仍然缺少 2px

> ID：11463781
> 
> 赞同：0
> 
> 时间：2012-07-13T03:34:25.380
> 
> 标签：css, border-box

**概要**

我有一个包装器，宽度为 980 像素，填充为 10 倍。里面的内容是 960px (border-box)。我有一个元素，inline-block，宽度 760px，margin-right 20px，另一个 inline-block 为 180px。这些应该完美匹配。但仅从其中一个元素中减去两个 px 将使它们适合父元素。

我知道内联块的空白问题，并且总是使用该修复程序。即便如此，我仍然用浮动测试了两个块，仍然是同样的问题。

**CSS**

```
* { padding: 0; margin: 0; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; -o-box-sizing: border-box; box-sizing: border-box; }
.wrapper { width: 980px; margin: 0 auto 20px; padding: 10px; border: 1px solid #fff; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
.featured_blog { width: 760px; height: 240px; padding: 10px; margin: 0 20px 20px 0; border: 1px solid #000; /*display: inline-block; *display: inline; zoom: 1;*/ display: block; float: left; vertical-align: top; overflow: hidden; text-overflow: ellipsis; }
.featured_author { width: 180px; height: 240px; border: 1px solid #000; /*display: inline-block; *display: inline; zoom: 1;*/ display: block; float: left; vertical-align: top; } 
```

**HTML**

```
<section class="wrapper">
    <div class="featured_blog">
        <h2><span>Some Kind of Blog Title</span></h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut justo orci, dictum id venenatis at, mattis nec enim. Maecenas vel molestie dolor. Maecenas mauris massa, congue at rhoncus et, dapibus sit amet eros. Nunc ipsum felis, eleifend in laoreet sit amet, tincidunt feugiat velit. Cras eu felis tortor, sed accumsan nisl. Ut volutpat viverra justo, quis consectetur felis tempor a. Etiam magna eros, euismod vel viverra in, facilisis sed libero. Vivamus in neque quis turpis adipiscing scelerisque dapibus at diam. Sed magna magna, ultrices quis posuere vel, pulvinar sodales dolor. Proin sapien sapien, adipiscing quis ultrices eget, cursus vitae enim. Maecenas ornare, erat non porta porta, sem felis condimentum erat, a lacinia nunc nisl a est.</p>
    </div><div class="featured_author"></div>
</section> 
```

这两个px是哪里来的？？？！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:38:26.737

`2px`来自`border: 1px solid #000;`. _ 两侧的边框会导致此问题。`2px`从宽度减小。

**没有边界，它工作正常** [http://jsfiddle.net/RRvMU/](http://jsfiddle.net/RRvMU/)

**带边框和一些宽度调整** [http://jsfiddle.net/RRvMU/1/](http://jsfiddle.net/RRvMU/1/)

# objective-c - Objective-C 上的复制编程

> ID：11463785
> 
> 赞同：-4
> 
> 时间：2012-07-13T03:35:25.170
> 
> 标签：objective-c, xcode4

```
2012-07-13 11:26:14.563 -CarParts-Copy[569:403] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** +[Slant6<0x10d5adab8> init]: cannot init a class object.' 
```

我不知道如何解决它。这是 Mark Dalrymple 和 Scott Knaster 编写的“在 Mac 上学习 Objective-C”一书中的编程。编程 13.01-CarParts-Copy。

我已经暗示成功，但我无法得到正确的答案。

正确答案是

```
2012-07-13 11:30:19.743 -CarParts-Copy[574:403] AllWeatherRadial: 34.0 / 20.0 / 0.0 / 0.0 
2012-07-13 11:30:19.744 -CarParts-Copy[574:403] AllWeatherRadial: 34.0 / 20.0 / 0.0 / 0.0 
2012-07-13 11:30:19.746 -CarParts-Copy[574:403] AllWeatherRadial: 34.0 / 20.0 / 0.0 / 0.0 
2012-07-13 11:30:19.747 -CarParts-Copy[574:403] AllWeatherRadial: 34.0 / 20.0 / 0.0 / 0.0 
2012-07-13 11:30:19.747 -CarParts-Copy[574:403] I am a slant-6.VROOOM!
2012-07-13 11:30:19.743 -CarParts-Copy[574:403] AllWeatherRadial: 34.0 / 20.0 / 0.0 / 0.0 
2012-07-13 11:30:19.744 -CarParts-Copy[574:403] AllWeatherRadial: 34.0 / 20.0 / 0.0 / 0.0 
2012-07-13 11:30:19.746 -CarParts-Copy[574:403] AllWeatherRadial: 34.0 / 20.0 / 0.0 / 0.0 
2012-07-13 11:30:19.747 -CarParts-Copy[574:403] AllWeatherRadial: 34.0 / 20.0 / 0.0 / 0.0 
2012-07-13 11:30:19.747 -CarParts-Copy[574:403] I am a slant-6.VROOOM! 
```

这就是关于复制的编程。我花了这么长时间。感谢回答这个问题的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T03:37:52.940

没有您的代码，我真的无法分辨，但是您似乎在调用`init`一个类名，例如

```
[SomeObject init]; 
```

这是试图`init`上课，给你错误。要解决此问题，请尝试

```
[[SomeObject alloc] init]; 
```

这将分配一个类的实例，`init`而不是。

# javascript - 使用 POS 打印机的 Javascript 收据打印

> ID：11463787
> 
> 赞同：38
> 
> 时间：2012-07-13T03:35:54.370
> 
> 标签：javascript, jquery, printing

在 Web 应用程序中，我想使用 POS（销售点）打印机打印收据。我想用 Javascript 做到这一点。谁能给我一个例子吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-13T04:23:16.847

由于您的问题不是很详细，因此我将在这里冒险，a）您的收据打印机是需要原始数据的热敏打印机，b）您正在谈论从 Web 浏览器打印的“来自 javascript”和c) 您无权从浏览器发送原始数据

这是一个为您解决所有这些问题的 Java Applet，如果我对这些假设是正确的，那么您需要 Java、Flash 或 Silverlight [http://code.google.com/p/jzebra/](http://code.google.com/p/jzebra/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-06-20T18:13:27.667

我最近实现了收据打印，只需按下网页上的按钮，无需输入打印机选项。我已经使用**EPSON javascript SDK for ePOS**完成了它。我已经在**EPSON TM-m30**收据打印机上进行了测试。

这是示例代码。

```
var printer = null;
var ePosDev = null;

function InitMyPrinter() {
    console.log("Init Printer");

    var printerPort = 8008;
    var printerAddress = "192.168.198.168";
    if (isSSL) {
        printerPort = 8043;
    }
    ePosDev = new epson.ePOSDevice();
    ePosDev.connect(printerAddress, printerPort, cbConnect);
}

//Printing
function cbConnect(data) {
    if (data == 'OK' || data == 'SSL_CONNECT_OK') {
        ePosDev.createDevice('local_printer', ePosDev.DEVICE_TYPE_PRINTER,
            {'crypto': false, 'buffer': false}, cbCreateDevice_printer);
    } else {
        console.log(data);
    }
}

function cbCreateDevice_printer(devobj, retcode) {
    if (retcode == 'OK') {
        printer = devobj;
        printer.timeout = 60000;
        printer.onreceive = function (res) { //alert(res.success);
            console.log("Printer Object Created");

        };
        printer.oncoveropen = function () { //alert('coveropen');
            console.log("Printer Cover Open");

        };
    } else {
        console.log(retcode);
        isRegPrintConnected = false;
    }
}

function print(salePrintObj) {
    debugger;
    if (isRegPrintConnected == false
        || printer == null) {
        return;
    }
    console.log("Printing Started");

    printer.addLayout(printer.LAYOUT_RECEIPT, 800, 0, 0, 0, 35, 0);
    printer.addTextAlign(printer.ALIGN_CENTER);
    printer.addTextSmooth(true);
    printer.addText('\n');
    printer.addText('\n');

    printer.addTextDouble(true, true);
    printer.addText(CompanyName + '\n');

    printer.addTextDouble(false, false);
    printer.addText(CompanyHeader + '\n');
    printer.addText('\n');

    printer.addTextAlign(printer.ALIGN_LEFT);
    printer.addText('DATE: ' + currentDate + '\t\t');

    printer.addTextAlign(printer.ALIGN_RIGHT);
    printer.addText('TIME: ' + currentTime + '\n');

    printer.addTextAlign(printer.ALIGN_LEFT);

    printer.addTextAlign(printer.ALIGN_RIGHT);
    printer.addText('REGISTER: ' + RegisterName + '\n');
    printer.addTextAlign(printer.ALIGN_LEFT);
    printer.addText('SALE # ' + SaleNumber + '\n');

    printer.addTextAlign(printer.ALIGN_CENTER);
    printer.addTextStyle(false, false, true, printer.COLOR_1);
    printer.addTextStyle(false, false, false, printer.COLOR_1);
    printer.addTextDouble(false, true);
    printer.addText('* SALE RECEIPT *\n');
    printer.addTextDouble(false, false);
....
....
....

} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-13T04:31:31.693

如果您谈论的是基于浏览器的 POS 应用程序，那么它基本上不能开箱即用。有多种选择。

1.  使用像 Scott Selby 说的小程序
2.  从服务器打印。如果这是一个云服务器，即无法连接到收据打印机，那么您可以做的是
    *   从服务器将其生成为 pdf，可以在浏览器中弹出打印对话框
    *   使用谷歌云打印之类的东西，它允许将打印机连接到云服务

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-12-31T23:06:35.510

**编辑：2017 年 11 月 27 日——断开的链接**

[下面关于大卫·凯利 ( David Kelley](https://medium.com/@davidkelley87/) )所写帖子的链接**已损坏**。

有存储库的缓存版本，只需`cache:`在 Chrome 浏览器中的 URL 之前添加并按 Enter。

*   第一篇文章：[缓存](http://webcache.googleusercontent.com/search?q=cache%3Ahttps%3A%2F%2Fgithub.com%2Fdavidkelley%2Fdavidkelley.github.io%2Fblob%2Fmaster%2F_posts%2F2014-02-14-connecting-to-usb-device-using-javascript.markdown&oq=cache%3Ahttps%3A%2F%2Fgithub.com%2Fdavidkelley%2Fdavidkelley.github.io%2Fblob%2Fmaster%2F_posts%2F2014-02-14-connecting-to-usb-device-using-javascript.markdown&aqs=chrome..69i57j69i58j69i60.2103j0j9&sourceid=chrome&ie=UTF-8)| [中等帖子](https://medium.com/@davidkelley87/javascript-interface-for-esc-pos-18123ead9219)
*   第二个帖子：[缓存](http://webcache.googleusercontent.com/search?q=cache:Lbs1HD8yj8wJ:https://github.com/davidkelley/davidkelley.github.io/blob/master/_posts/2014-02-14-connecting-to-usb-device-using-javascript.markdown&num=1&hl=en&gl=pe&strip=0&vwsrc=0)

* * *

> 此解决方案仅适用于[**Google Chrome**](https://developer.chrome.com/apps/usb)和[**基于 Chromium 的**](http://www.chromium.org/developers/design-documents/extensions/proposed-changes/apis-under-development/usb-api)浏览器。

**编辑：**

**(*) 链接已损坏。幸运的是，我在以下 markdown 文件中找到了包含帖子来源的[存储库](https://github.com/davidkelley/davidkelley.github.io)[：](https://github.com/davidkelley/davidkelley.github.io/blob/master/_posts/2014-02-14-connecting-to-usb-device-using-javascript.markdown)[乙](https://github.com/davidkelley/davidkelley.github.io/blob/master/_posts/2013-09-15-javascript-interface-for-esc-pos.markdown)**

~~[这个链接](http://davidkelley.me/development/work/javascript/web/2013/08/31/javascript-interface-for-esc-pos.html)~~* 说明如何使用 Chrome/Chromium **USB API** [(1)](https://developer.chrome.com/apps/app_usb) [(2)](https://developer.chrome.com/apps/usb)为 ESC/POS 打印机制作 Javascript 接口。 ~~[这个链接](http://davidkelley.me/development/work/javascript/web/chrome/2014/02/14/connecting-to-usb-device-using-javascript.html)~~* 说明如何使用`chrome.usb.*`API 连接到 USB 设备。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-02-27T15:24:34.703

我将 javascript 格式打印到 Star Micronics Webprnt TSP 654ii 热敏打印机。此打印机是有线网络打印机，您可以将内容绘制到 HTML 画布并发出 HTTP 请求进行打印。唯一需要注意的是，此打印机尚不支持 HTTPS 协议，因此您将在生产中收到混合内容警告。联系了 Star micronics 支持，他们说，他们正在研究 HTTPS 支持，很快就会提供固件升级。此外，看起来带有 TM-I 的 Epson Omnilink TM-88V 打印机将支持 javascript 打印。

这是一个示例代码：[https ://github.com/w3cloud/starwebprint](https://github.com/w3cloud/starwebprint)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-05-25T21:13:11.037

如果您的打印机是爱普生，也许您可​​以看看这个。有一个javascript驱动程序

[http://spsrprofessionals.com/ClientSite/readers/ePOS-Print_SDK_141020E/JavaScript/ePOS-Print_SDK_JS_en_revB.pdf](http://spsrprofessionals.com/ClientSite/readers/ePOS-Print_SDK_141020E/JavaScript/ePOS-Print_SDK_JS_en_revB.pdf)

编辑：

上一个链接好像坏了

有关如何使用 epson 的 epos 的所有详细信息都在 epson 网站上：

[https://reference.epson-biz.com/modules/ref_epos_device_js_en/index.php?content_id=139](https://reference.epson-biz.com/modules/ref_epos_device_js_en/index.php?content_id=139)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-16T19:04:02.960

尝试使用 Escpos 进行 PHP POS 打印，使用 [https://github.com/mike42/escpos-php](https://github.com/mike42/escpos-php)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-29T14:18:49.750

您可以尝试使用[https://www.printnode.com](https://www.printnode.com)，它本质上正是您正在寻找的服务。您下载桌面客户端并将其安装到用户计算机上 - [https://www.printnode.com/download](https://www.printnode.com/download)。[然后，您可以使用他们的 JSON API https://www.printnode.com/docs/api/curl/](https://www.printnode.com/docs/api/curl/)发现并打印到该用户计算机上的任何打印机。他们在这里有很多库：[https ://github.com/PrintNode/](https://github.com/PrintNode/)

# jquery - less.js 在 Firefox 中导致“无响应脚本”错误

> ID：11463792
> 
> 赞同：1
> 
> 时间：2012-07-13T03:36:16.743
> 
> 标签：jquery, symfony, less, assets

自从我开始在 Symfony2 项目中使用 twitter bootstrap 和 less.js 脚本以来，我的页面上出现了“无响应脚本”错误。Firebug 告诉我导致错误的文件是 less-1.3.0.min.js。我正在使用资产来处理我的资产：

```
 {% block javascripts %}
        {% javascripts filter='?yui_js' output='js/all.js'
            '@YOPYourOwnPoetBundle/Resources/public/js/jquery-1.7.2.min.js'
            '@YOPYourOwnPoetBundle/Resources/public/js/bootstrap.min.js'
            '@YOPYourOwnPoetBundle/Resources/public/js/jquery.cluetip.min.js'
            '@YOPYourOwnPoetBundle/Resources/public/js/jquery.imagesloaded.min.js'
            '@YOPYourOwnPoetBundle/Resources/public/js/less-1.3.0.min.js'
        %}
            <script type="text/javascript" src="{{ asset_url }}"></script>
        {% endjavascripts %} 
```

我检查了解决此类问题的解决方案，但我读到的只是我必须使用 Firebug 调试我的脚本。就我而言，它是导致此问题的广泛使用的脚本，因此我无法真正调试它。

知道为什么会发生这种情况，以及如何解决这个问题吗？

编辑：

这是为我的页面生成的 html：

```
<body>
    <div class="container-fluid">
    <script src="/yourownpoet/web/app_dev.php/js/all_jquery-1.7.2.min_1.js" type="text/javascript">
    <script src="/yourownpoet/web/app_dev.php/js/all_bootstrap.min_2.js" type="text/javascript">
    <script src="/yourownpoet/web/app_dev.php/js/all_jquery.cluetip.min_3.js" type="text/javascript">
    <script src="/yourownpoet/web/app_dev.php/js/all_jquery.imagesloaded.min_4.js" type="text/javascript">
    <script src="/yourownpoet/web/app_dev.php/js/all_less-1.3.0.min_5.js" type="text/javascript">
    <script type="text/javascript">
    <script type="text/javascript" src="http://www.yourownpoet.com/piwik/piwik.js">
    <script type="text/javascript">
    <noscript>&lt;p&gt;&lt;img src="http://www.yourownpoet.com/piwik/piwik.php?idsite=1" style="border:0" alt="" /&gt;&lt;/p&gt;</noscript>
    <script>
</body> 
```

你可以在地址看到页面的源代码：[http](http://www.yourownpoet.com) ://www.yourownpoet.com javascript文件的路径是：[http ://www.yourownpoet.com/js/all.js](http://www.yourownpoet.com/js/all.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T07:15:19.423

在 node、lessc 中使用 less.js 或者如果它的 asp 或 PHP 站点考虑使用端口 - 分别为 dotless 或 phpless，请提前编译您的 CSS。它会加速你的网站，你永远不会遇到这些问题。

# twitter-bootstrap - 在非活动选项卡上用 Bootstrap 装饰的 DataTable 具有窄标题

> ID：11463793
> 
> 赞同：5
> 
> 时间：2012-07-13T03:36:22.643
> 
> 标签：twitter-bootstrap, datatables

我正在将 DataTables 与 Bootstrap 一起使用，并且一切正常。然后我需要一个标签中的表格，当我这样做时，表格标题开始变窄，正好适合标题文本的宽度。如果显示页面时选项卡处于活动状态，则表格看起来很棒。你可以看到我的意思的一个[例子。](http://www.greggbolinger.com/DT/index.html)Tab 1 看起来不错。选项卡 2 具有窄标题。

如果我启用排序并单击选项卡 2 上的列，则标题会扩展到适当的宽度，但总是开始变窄。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:20:23.223

我发现恰好起作用的是以下内容：

```
$('a[data-toggle="tab"]').on('shown', function (e) {
e.target // activated tab 
e.relatedTarget // previous tab 
var table = $.fn.dataTable.fnTables(true);
 if ( table.length > 0 ) {
 $(table).dataTable().fnAdjustColumnSizing();
 }
}); 
```

我真的在这个问题上绞尽脑汁，但是因为它只检查一次表是否在单击引导选项卡后初始化，所以你不应该被 DataTable 重新初始化警报所困扰。

*我不确定这是否适用于 BootStrap 1，但是，我知道它适用于 BootStrap 2。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T14:14:04.610

看起来您的标题列已使用`width: 0px`. 我假设是因为它们没有被渲染（Tab 2 有`display: none`）。

如果您包含 bootstrap.js 库，您可以尝试在选项卡切换时初始化 DataTable：

```
$('a[data-toggle="tab"]').on('shown', function (e) {
   e.target // activated tab
   e.relatedTarget // previous tab
   $('#table-b').dataTable({ ... });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-03T11:46:04.593

在 bootstrap 3.x 中，您可以使用以下代码：

```
$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
    e.target // activated tab 
    e.relatedTarget // previous tab 
    var table = $.fn.dataTable.fnTables(true);
    if (table.length > 0) {
        $(table).dataTable().fnAdjustColumnSizing();
    }
}); 
```

更多信息请访问： http: [//getbootstrap.com/javascript/#tabs](http://getbootstrap.com/javascript/#tabs)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T01:30:34.477

注意：我使用的是 Bootstrap 1，而不是 2：但它可能对你有用。

经过多次试验和错误，这是我添加的功能，用于在单击正确的选项卡时重绘 dataTable（也没有抱怨重绘）：

```
$(function() {   
    $('a[href="#tab2"]').live('click', function () {
     var oTable = $('#dataTables4').dataTable();
      oTable.fnDraw();
    }); 
}); 
```

这是我的数据表代码。请注意确保表格在显示之前完全绘制的回调：

```
 $('#loadingT').show();
    $('#dataTables4').dataTable({

   "fnDrawCallback":function(){
                $('#loadingT').hide();
                 $(".dataListT").fadeIn(2000);

                        },   

            "bPaginate": false,
             "bScrollCollapse": true,
                "sScrollY": "305px",

            "aaSorting": [[ 2, "desc" ],[3, "desc"]],
            "sDom": "<'row'<'span16'f>>t<'row'i<'span8'><'span8'>>",

         "aoColumns": [
                        { "bSortable": false },
                        null,
                        null,
                        null,
                        null,
                        { "iDataSort": 6 },
                        {"bVisible": false},
                        {"bVisible": false},
                        null
                    ],
        "fnFooterCallback": function ( nRow, aaData, iStart, iEnd, aiDisplay ) {

                           /* Calculate the total transactions on this page */
                          var total = 0;
                         for ( var i=iStart ; i<iEnd ; i++ )
                         {
                              total += aaData[ aiDisplay[i] ][7]* 1;
                          }

                               var nCells = nRow.getElementsByTagName('th');
                                nCells[1].innerHTML = total;
                                $(nCells[1]).formatCurrency({negativeFormat:'%s-%n'});

                                            }

        }).rowGrouping({
                        iGroupingColumnIndex: 1,
                       sGroupingColumnSortDirection: "desc",
                       iGroupingOrderByColumnIndex: 2

                    }); 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T12:32:55.093

我遇到了同样的问题，我只是将所有选项卡设置为活动，并在准备好文档时，删除了除第一个选项卡之外的所有选项卡的活动类。非常丑陋的黑客，但我无法找到更好的方法

# coffeescript - 使用 docco/markdown 命名部分？

> ID：11463797
> 
> 赞同：4
> 
> 时间：2012-07-13T03:37:16.083
> 
> 标签：coffeescript, markdown, docco

使用 CoffeeScript 和 Docco，在生成的 HTML 中创建部分，然后可以将其用作链接，例如。

```
geometry.html#section-82 
```

有谁知道是否有办法命名这些部分，所以它可能是（例如）：

```
geometry.html#vector 
```

编辑：这似乎可以通过手动添加 HTML 来实现：

```
**MARKDOWN**
# ## <section id='vector'>Vector:</section> 
```

但有没有其他的，也许更优雅的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T03:37:06.840

目前，我能找到的最佳方法如下：

```
# ## <section id='vector'>Vector:</section> 
```

它似乎工作得很好，但希望我可以将它添加到 Markdown 中。

# arrays - 什么是最好的 VBA 数据类型`key`=>`value` 来保存与 PHP 数组相同的数据

> ID：11463799
> 
> 赞同：14
> 
> 时间：2012-07-13T03:37:26.077
> 
> 标签：arrays, list, vba, key-value

我正在使用 VBA，需要将数据保存在 type `key`=>`value`中以获得最快的速度；这种数据类型帮助我缓存来自 http 请求的响应文本，提高查询速度。但我不知道最好的方法是什么？我需要一个与 php 数组相同的数据类型`key=>value`！感谢您的帮助！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-13T03:40:34.397

你看过字典对象吗？

它作为 Microsoft Scripting Runtime 的一部分提供。[这个 SO answer](https://stackoverflow.com/a/3236348/2071807)给出了一个如何添加它的清晰示例。

```
Sub DictExample1()

Dim dict As Dictionary
Dim v As Variant

    'Create the dictionary          
    Set dict = New Dictionary

   'Add some (key, value) pairs
    dict.Add "John", 34
    dict.Add "Jane", 42
    dict.Add "Ted", 402

    'How many items do we have?
    Debug.Print "Number of items stored: " & dict.Count

    'We can retrieve an item based on the key
    Debug.Print "Ted is " & dict.Item("Ted") & " years old"

   'We can test whether an item exists
    Debug.Print "We have Jane's age: " & dict.Exists("Jane")
    Debug.Print "We have Zak's age " & dict.Exists("Zak")

    'We can update a value by replacing it
   dict.Item("Ted") = dict.Item("Ted") / 10

    Debug.Print "Ted's real age is: " & dict.Item("Ted")

   'We can add more items
    dict.Add "Carla", 23

   'And we can iterate through the complete dictionary
    For Each v In dict.Keys
        Debug.Print "Name: " & v & "Age: "; dict.Item(v)
    Next

End Sub 
```

（来源：[http](http://www.techbookreport.com/tutorials/vba_dictionary.html) ://www.techbookreport.com/tutorials/vba_dictionary.html ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-10T20:05:57.037

由于语法错误，上述答案将不起作用，您需要在启用 Microsoft Sripting Run Time 之前添加 Scripting Keword 我尝试了使用和不使用 Sripting。在 MS word(2016) 中的字典之前，即使您启用了 Microsoft 脚本运行时，也无法正常工作

```
 Dim dict As Scripting.Dictionary
 Set dict = New Scripting.Dictionary
 dict.Add "John", 34
 dict.Add "Jane", 42
 dict.Add "Ted", 402

 Debug.Print "Number of items stored: " & dict.Count
 Debug.Print "Ted is " & dict.Item("Ted") & " years old" 
```

# sql - 使用oracle获取范围内的数据

> ID：11463807
> 
> 赞同：0
> 
> 时间：2012-07-13T03:39:10.397
> 
> 标签：sql, oracle

请帮我解决这个问题。

我有一个表，其中包含用户每天签入（checktype = I）和签出（checktype = 0）的时间，我想获得每个用户在特定时间 > 08:00 AM 的签入时间总量日期范围。

我正在使用下面的查询，但每个查询只处理一天，不在一个范围内，所以我必须使用 javascript 循环获取每个用户的延迟量（> 08:00 AM），例如从 2012 年 1 月 6 日到2012 年 6 月 6 日

请帮助我在单个查询中从 ex:01/06/2012 到 06/06/2012 获取每位用户的签入时间 > 08:00 AM（例如：userid 708）。

```
with tt as 
     ( 
     select TO_DATE('01/06/2012 08:00:00','dd/mm/yyyy hh24:mi:ss') date1 , 
            checktime date2 
     from 
            checkinout 
     where 
            userid = '708' and 
            to_char(checktime,'dd/mm/yyyy') = '01/06/2012' and 
            checktype='I'  -- checktype I is check in
     ) , t2 as 
            ( 
               select numtodsinterval(date2 - date1,'day') dsinterval from tt 
            ) 
            select extract(hour from dsinterval) || ' hours ' || 
                   extract(minute from dsinterval) || ' minutes ' || 
                   round(extract(second from dsinterval)) || ' seconds' late from t2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T05:56:30.150

我假设您想知道签到已经完成了多少小时（即 08:00 之后）：

```
with t2 as (
select userid
      ,numtodsinterval(sum(checktime - (trunc(checktime)+8/24)),'day') dsinterval
      ,count(1) cnt
   from checkinout
  where userid='708'
    and checktime > trunc(checktime)+8/24
    and trunc(checktime) between to_date('01/06/2012','DD/MM/YYYY') and to_date('06/06/2012','DD/MM/YYYY')
    and checktype = 'I'
  group by  userid 
)
select extract(hour from dsinterval) || ' hours ' || 
       extract(minute from dsinterval) || ' minutes ' || 
       round(extract(second from dsinterval)) || ' seconds' late 
      ,cnt
   from t2; 
```

有关我的测试用例，请参见[http://sqlfiddle.com/#!4/c4670/11 。](http://sqlfiddle.com/#!4/c4670/11)

编辑：添加列“cnt”以显示多少次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T05:40:45.960

在此基础上考虑以下示例，您可以编写自己的逻辑

```
WITH tbl AS
     (SELECT SYSDATE dt
        FROM DUAL
      UNION
      SELECT SYSDATE + (1 + (10 / 1440))
        FROM DUAL
      UNION
      SELECT SYSDATE + (2 + (12 / 1440))
        FROM DUAL
      UNION
      SELECT SYSDATE + (3 + (13 / 1440))
        FROM DUAL
      UNION
      SELECT SYSDATE + (6 + (15 / 1440))
        FROM DUAL
      UNION
      SELECT SYSDATE + (8 + (18 / 1440))
        FROM DUAL)
SELECT    EXTRACT (HOUR FROM dsinterval)
       || ' hours '
       || EXTRACT (MINUTE FROM dsinterval)
       || ' minutes '
       || ROUND (EXTRACT (SECOND FROM dsinterval))
       || ' seconds' late
  FROM (SELECT NUMTODSINTERVAL (dt1 - dt2, 'day') dsinterval
          FROM (SELECT TO_DATE (TO_CHAR (dt, 'DD/MM/YYYY') || ' 08:00:00',
                                'DD/MM/YYYY HH24:MI:SS'
                               ) dt1,
                       TO_DATE (TO_CHAR (dt, 'DD/MM/YYYY HH24:MI:SS'),
                                'DD/MM/YYYY HH24:MI:SS'
                               ) dt2
                  FROM tbl
                 WHERE dt BETWEEN SYSDATE + 2 AND SYSDATE + 5)) 
```

根据代码，您可以编写如下

```
SELECT    EXTRACT (HOUR FROM dsinterval)
       || ' hours '
       || EXTRACT (MINUTE FROM dsinterval)
       || ' minutes '
       || ROUND (EXTRACT (SECOND FROM dsinterval))
       || ' seconds' late
  FROM (SELECT NUMTODSINTERVAL (dt1 - dt2, 'day') dsinterval
          FROM (SELECT TO_DATE (TO_CHAR (checktime , 'DD/MM/YYYY') || ' 08:00:00',
                                'DD/MM/YYYY HH24:MI:SS'
                               ) dt1,
                       TO_DATE (checktime, 'DD/MM/YYYY HH24:MI:SS') dt2
                  FROM checkinout
                 WHERE checktime BETWEEN start_date AND end_date 
                   AND checktype='I')) 
```

# windows - 尝试在 Windows 7 上的 Strawberry Perl 上安装 HTTP::Server::Brick

> ID：11463813
> 
> 赞同：2
> 
> 时间：2012-07-13T03:40:05.703
> 
> 标签：windows, perl, http, webserver, cpan

这是我在运行 cpan 安装它时看到的。

```
cpan shell -- CPAN exploration and modules installation (v1.9800)
Enter 'h' for help.

cpan> install HTTP::Server::Brick
Database was generated on Fri, 13 Jul 2012 03:26:42 GMT
Running install for module 'HTTP::Server::Brick'
Running make for A/AU/AUFFLICK/HTTP-Server-Brick-0.1.4.tar.gz
Checksum for C:\strawberry\cpan\sources\authors\id\A\AU\AUFFLICK\HTTP-Server-Bri
ck-0.1.4.tar.gz ok
Scanning cache C:\strawberry\cpan\build for sizes
............................................................................DONE

  CPAN.pm: Building A/AU/AUFFLICK/HTTP-Server-Brick-0.1.4.tar.gz

Created MYMETA.yml and MYMETA.json
Creating new 'Build' script for 'HTTP-Server-Brick' version '0.1.4'
Building HTTP-Server-Brick
  AUFFLICK/HTTP-Server-Brick-0.1.4.tar.gz
  C:\strawberry\perl\bin\perl.exe ./Build -- OK
Running Build test
t\00.load.t ....... 1/1 # Testing HTTP::Server::Brick v0.1.4
t\00.load.t ....... ok
t\pod-coverage.t .. skipped: Test::Pod::Coverage 1.04 required for testing POD c
overage
t\pod.t ........... skipped: Test::Pod 1.14 required for testing POD
t\serving.t ....... 1/281 #
#
# Using port: 85432 and host: 127.0.0.1 for test server.
# If these are not suitable settings on your machine, set the environment
# variables HSB_TEST_PORT and HSB_TEST_HOST to something suitable.
#
# Configuring server
# Starting server
t\serving.t ....... 4/281 
```

真的很简单……为什么是85432端口？它超出了 16 位无符号整数范围！我什至无法输入`localhost:85432`任何 URL 栏，Chrome 只是将我直接发送到 Google 搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:17:05.753

这很奇怪。我查看了相关测试的[来源](http://cpansearch.perl.org/src/AUFFLICK/HTTP-Server-Brick-0.1.4/t/serving.t)，它有：

```
my $port = $ENV{HSB_TEST_PORT} || 85432; 
```

不知道作者为什么选择它作为默认端口号，因为您知道它是无效的。不过，我想端口被使用的可能性为零！

我的建议是将环境变量设置`HSB_TEST_PORT`为更合理的值并尝试再次安装，同时提交错误报告。

# if-statement - 尝试编写 if、else 语句并检测按键

> ID：11463817
> 
> 赞同：0
> 
> 时间：2012-07-13T03:40:47.953
> 
> 标签：if-statement, batch-file, lua, keypress

嗨，我正在尝试编写一个批处理文件，当它到达代码的那个区域时等待 10 秒，然后如果按下某个键退出，否则它会转到代码的另一个区域。这是我到目前为止得到的

```
SLEEP 10
IF
exit
else if
goto start 
```

对不起，我不知道这是否正确。我只是在学习 Lua，虽然与 DOS 相似，但它们并不完全相同。如果有人可以填补空白并纠正错误，我将不胜感激。我要按下的键是任何或特定的键 ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:40:26.823

您可以使用此批量执行此操作

```
@echo off
choice /c abcd /n /t 5 /d d
if %errorlevel%==1 echo You chose a
if %errorlevel%==2 goto :CONTINUE
if %errorlevel%==3 echo You chose c
if %errorlevel%==4 exit >nul

:CONTINUE
REM Continue code
pause >nul 
```

用法：

在此脚本中，您的选项是`a`、`b`、`c`和`d`。

使用带有递增数字的 %errorlevel% 来选择选项。

开关是以秒为单位的`/t`超时，在此为 5 秒。

该`/d`开关是默认选项，如果命令超时，请使用此选项自动做出选择。在这种情况下`d`将是超时选项，它将退出脚本。

只需调整以满足您的需求。

# php - PHP Dropdown mySQL 两张表

> ID：11463819
> 
> 赞同：2
> 
> 时间：2012-07-13T03:41:00.293
> 
> 标签：php, mysql

带有工作代码的编辑版本：

表架构：

类别（catid、catname）

产品（productid、catid、产品名称）

```
if(isset($_POST['submit'])); {

if(isset($_GET['id']) && is_numeric($_GET['id']) && $_GET['id'] > 0) {
//get the id
$productid = (int) $_GET['id'];
} else {
    echo 'error'; }

$sql = $link->prepare("SELECT p.productid, p.catid pid, p.productname, c.catid cid, c.catname FROM product p
JOIN category c
WHERE p.productid = $productid");
$sql-> execute();
$result = $sql-> fetchall(PDO::FETCH_ASSOC);
    $option = '';
foreach ($result as $row) {
    $pid = $row['pid'];
    $productname = $row['productname'];
    $catid = $row['cid'];
    $catname = $row['catname'];
    $option .= '<option name="'.$catname.'" value="'.$catid.'" '.($pid==$catid ? 'selected="selected"' : '').'>'.$catname.'</option>'."\r\n";
} 
```

然后在页面中：

```
<select name="xxx">
<? echo $option ?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:16:55.840

在您的 foreach 循环中，您只执行一个查询，而不是迭代结果集数据。如果不是，请解释您的 query() 方法。

# android - 我的 NFC 写入应用程序无法写入标签

> ID：11463825
> 
> 赞同：0
> 
> 时间：2012-07-13T03:42:12.083
> 
> 标签：android, android-intent, nfc

抱歉再次问，我正在创建一个android应用程序来将数据写入标签，它可以感知标签并使用AAR自动打开，但是，在我填写完EdiText列后，它无法将数据写入文件和单击按钮，我尝试了不同的方法，包括在 layout.xml 文件中声明 onclick 操作，或使用 onclicklistener，但都不起作用，所以谁能帮我看看问题出在哪里？

```
public class Writer extends Activity{

NfcAdapter mAdapter;
PendingIntent mPendingIntent;
IntentFilter mWriteTagFilters[];
boolean mWriteMode;
Tag detectedTag;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_writer);
    Button btn = (Button) findViewById(R.id.button);
    btn.setOnClickListener(new View.OnClickListener()
        {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                SetTag();
            }
        });
    mAdapter = NfcAdapter.getDefaultAdapter(this);
    mPendingIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
    IntentFilter tagDetected = new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED);
    mWriteTagFilters = new IntentFilter[] { tagDetected };
    //Intent intent = getIntent();

}

private void enableTagWriteMode(){
    mWriteMode = true;
    mAdapter.enableForegroundDispatch(this, mPendingIntent, mWriteTagFilters, null);
}

private void disableTagWriteMode(){
    mWriteMode = false;
    mAdapter.disableForegroundDispatch(this);
}

public void SetTag(){
    EditText editText1 = (EditText) findViewById(R.id.edit_message1);
    EditText editText2 = (EditText) findViewById(R.id.edit_message2);
    String message1 = editText1.getText().toString();
    String message2 = editText2.getText().toString();
    byte[] textBytes1 = message1.getBytes();
    byte[] textBytes2 = message2.getBytes();
    NdefRecord textRecord1 = new NdefRecord(NdefRecord.TNF_WELL_KNOWN, 
            NdefRecord.RTD_TEXT, new byte[]{}, textBytes1);
    NdefRecord textRecord2 = new NdefRecord(NdefRecord.TNF_WELL_KNOWN, 
            NdefRecord.RTD_TEXT, new byte[]{}, textBytes2);
    NdefMessage mNdefMessage = new NdefMessage(
        new NdefRecord[]{
                textRecord1,
                textRecord2,
                NdefRecord.createApplicationRecord("android.reader")
        }
    );
    writeTag(mNdefMessage, detectedTag);    
}

public static void writeTag(NdefMessage message, Tag tag){
    int size = message.toByteArray().length;
    try {
        Ndef ndef = Ndef.get(tag);
        if (ndef != null){
            ndef.connect();
            if (ndef.isWritable() && ndef.getMaxSize() > size)
                ndef.writeNdefMessage(message);
            ndef.close();
        }else{
            NdefFormatable format = NdefFormatable.get(tag);
            if (format != null) {
                try {
                    format.connect();
                    format.format(message);
                }catch(IOException e){

                }
            }
        }
    }catch(Exception e){

    }
}

@Override
protected void onNewIntent(Intent intent){
    if(NfcAdapter.ACTION_TAG_DISCOVERED.equals(intent.getAction()))
        detectedTag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);        
}

@Override
public void onPause(){
    super.onPause();
    disableTagWriteMode();
}

@Override
public void onResume(){
    super.onResume();
    enableTagWriteMode();
}

/*@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    EditText editText1 = (EditText) findViewById(R.id.edit_message1);
    EditText editText2 = (EditText) findViewById(R.id.edit_message2);
    String message1 = editText1.getText().toString();
    String message2 = editText2.getText().toString();
    byte[] textBytes1 = message1.getBytes();
    byte[] textBytes2 = message2.getBytes();
    NdefRecord textRecord1 = new NdefRecord(NdefRecord.TNF_WELL_KNOWN, 
            message1.getBytes(), new byte[]{}, textBytes1);
    NdefRecord textRecord2 = new NdefRecord(NdefRecord.TNF_WELL_KNOWN, 
            message2.getBytes(), new byte[]{}, textBytes2);
    NdefMessage mNdefMessage = new NdefMessage(
        new NdefRecord[]{
                textRecord1,
                textRecord2,
                NdefRecord.createApplicationRecord("android.reader")
        }
    );
    writeTag(mNdefMessage, detectedTag);
}*/

} 
```

以下是layot文件：

```
<EditText android:id="@+id/edit_message1"
    android:layout_weight="2"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message1" />

<EditText android:id="@+id/edit_message2"
    android:layout_weight="2"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message2" />

<Button android:id="@+id/button"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:text="@string/button_send" />

</LinearLayout> 
```

最近我的代码只能启动，但它无法将数据写入标签，因此当设备再次感应到标签时，它将再次打开这个应用程序，而不是我编写的另一个阅读标签应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T05:55:16.680

您的 IntentFilter 显然不匹配，使 ForegroundDispatch 不起作用。在您的`onCreate()`中，尝试添加`tagDetected.addCategory(Intent.CATEGORY_DEFAULT);`. 我认为这会奏效。

# objective-c - 以编程方式删除 ios 中的电子邮件签名

> ID：11463826
> 
> 赞同：0
> 
> 时间：2012-07-13T03:42:14.130
> 
> 标签：objective-c, ios, ipad

我可以删除从我的应用程序发送的邮件的签名“从我的 iPad 发送”吗？我已经搜索[了开发人员参考](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)，但找不到任何特定的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:46:07.920

无法从您的 iOS 应用程序中更改另一个应用程序的设置。但是，如果您正在构建电子邮件客户端，则可以对其进行正则表达式并将其删除。

# objective-c - 如何创建 NSOutputStream 的子类

> ID：11463828
> 
> 赞同：1
> 
> 时间：2012-07-13T03:42:49.613
> 
> 标签：objective-c, subclassing, nsoutputstream

我正在尝试编写 NSOutputStream 的子类来执行一个非常简单的功能 - 跟踪发送到流的字节总数。但是，我在初始化函数实例时遇到了意外问题。这是代码：

```
#import <Foundation/Foundation.h>

@interface TrackingOutputStream : NSOutputStream {
  unsigned long long bytesWritten;
}

@property (readonly) unsigned long long bytesWritten;

@end

---------------------------

#import "TrackingOutputStream.h"

@implementation TrackingOutputStream
@synthesize bytesWritten;

- (NSInteger)write:(const uint8_t *)buffer maxLength:(NSUInteger)length {
  NSInteger written = [super write:buffer maxLength:length];
  bytesWritten += written;
  return written;
}

@end 
```

但是，当我尝试初始化此类时：

```
TrackingOutputStream *os = [[[TrackingOutputStream alloc] initToFileAtPath:@"/tmp/test" append:NO] autorelease]; 
```

我收到以下错误：

```
-[TrackingOutputStream initToFileAtPath:append:]: unrecognized selector sent to instance 0x101a187e0 
```

我尝试向调用 super 的类添加一个显式构造函数，但它没有任何区别（因为它不应该）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-03T20:57:50.897

如果您正在使用一个需要 NSOutputStream 实例的 API，那么实现 NSOutputStream 的所有方法以便将它们转发到包装（委托）实例可能会很麻烦。您可以使用方法转发方法，该方法允许您在不编写所有包装方法的情况下添加行为。这涉及编写一个简单的实现`forwardingTargetForSelector:`和`respondsToSelector:`

```
 - (id)forwardingTargetForSelector:(SEL)aSelector {
    if (class_respondsToSelector([self class], aSelector)) { return self; }
    if ([self.delegate respondsToSelector:aSelector]) { return self.delegate; }
    return [super forwardingTargetForSelector:aSelector];
}

- (BOOL)respondsToSelector:(SEL)aSelector {
    if (class_respondsToSelector([self class], aSelector)) { return YES; }
    if ([self.delegate respondsToSelector:aSelector]) { return YES; }
    return [super respondsToSelector:aSelector];
} 
```

有关更长、更详细的描述，请参阅有关使用[Objective-C 鸭子类型更轻松地继承 NSOutputStream](http://engineering.zillow.com/specializing-cocoas-nsoutputstream-or-how-objc-duck-typing-saved-me-from-writing-redundant-code/)的博客文章。或查看[https://github.com/jwb/ObjC-DuckType上的示例](https://github.com/jwb/ObjC-DuckType)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T04:08:21.127

`NSOutputStream`具有非常具体的子类化要求，记录在[类的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSOutputStream_Class/Reference/Reference.html)中。

请注意，文档明确指出您必须完全实现适当的初始化程序。即你不能子类来改变你描述的行为。至少，不容易。

相反，创建一个类，其实例包装一个实例`NSOutputStream`并添加您想要的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T17:26:59.560

作为附加说明，应该可以使用`- propertyForKey:`of检索有关书面数据的信息`NSStream`。查看 `NSStreamDataWrittenToMemoryStreamKey`属性键。

# javascript - 如何在javascript中更简洁地填写时间序列数据中的缺失值？

> ID：11463830
> 
> 赞同：-1
> 
> 时间：2012-07-13T03:43:21.790
> 
> 标签：javascript, time-series

我在这里发布了代码： [https ://gist.github.com/3102527](https://gist.github.com/3102527)

此代码采用一个排序对象数组，其中日期键是“00”-“23”格式的“sent_hour”。缺少一些 sent_hours。我的代码将它们填充。

这是很多行。如何通过几行简单的代码在 javascript 中完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:06:01.780

尝试这个

```
function fillBlanks(ourHours, rawData) {
    ourHours = []; //init array
    for (var i=0; i<=23; i++) //fill array
        ourHours.push({"sent_hour": makeHourRange(i), "total": 0});

    for (h in rawData) //add data to array
        ourHours[rawData[h].sent_hour*1].total += rawData[h].total;

    return ourHours;
}

function makeHourRange(num) {
    return num < 10 ? "0" + num.toString() : num.toString();
} 
```

# zend-framework - 如何，隐藏字段值未根据要求在 zend 框架中显示？

> ID：11463831
> 
> 赞同：0
> 
> 时间：2012-07-13T03:43:29.397
> 
> 标签：zend-framework, post, request, zend-form, zend-form-element

我有一个简单的表单，它有一个 textarea 和一个隐藏字段

```
 $textarea = new Zend_Form_Element_Textarea('post');
    $textarea->setRequired(true);
    $textarea->setLabel('');

    $hidden = new Zend_Form_Element_Hidden('post_id');
    $hidden->setLabel('');
    $hidden->setValue('1');      

    $submit = new Zend_Form_Element_Submit('submit');
    $submit->setLabel('test');

    $this->addElement($textarea);
    $this->addElement($hidden);
    $this->addElement($submit);

    $this->setDecorators(array(
        'FormElements',
         array('HtmlTag', array('tag' => 'div', 'class' => 'form_class')),
        'Form'
    )); 
```

在我看来，我愿意

```
<?php echo $this->form->getElement('post')->render(); ?>
<?php echo $this->form->getElement('submit')->render(); ?> 
```

然后在我的控制器中

```
 $request = $this->getRequest();
    if( $request->isPost() && $form->isValid($request->getParams()))
    {
        Zend_Debug::dump($request->getParams());
    } 
```

发生的事情是我得到

```
array(8) {
  ["module"] => string(6) "testr"
  ["controller"] => string(8) "posts"
  ["action"] => string(9) "post"
  ["post"] => string(10) "testgfdgfg"
  ["submit"] => string(26) "submit"
} 
```

但不是`post_id`

这有点连线，我无法弄清楚。我已经寻找任何可能搞砸的代码，但没有。我也尝试在视图中回显隐藏字段，但我仍然没有收到任何请求

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T04:05:07.100

在你看来做

```
<?php echo $this->form->getElement('post'); ?>
<?php echo $this->form->getElement('post_id'); ?>
<?php echo $this->form->getElement('submit');?> 
```

您根本没有像 post 和 submit 那样回显 post_id 元素。你也不需要调用 render() 因为所有 Zend_Form_Element_XXX 中的 php 魔术函数 __toString() 代理 render() 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T06:19:53.393

在 View 部分你只设置了两个元素

```
<?php echo $this->form->getElement('post')->render(); ?>
<?php echo $this->form->getElement('submit')->render(); ?> 
```

WHERE form->getElement('post_id')->render(); ?>

```
 <?php echo $this->form->getElement('post')->render(); ?>
 <?php echo $this->form->getElement('submit')->render(); ?>
 <?php echo $this->form->getElement('post_id')->render(); ?> 
```

尝试一次。

我认为它会起作用。

# javascript - javascript函数完成后显示html

> ID：11463832
> 
> 赞同：0
> 
> 时间：2012-07-13T03:43:50.343
> 
> 标签：javascript, html

我正在尝试通过 javascript 创建一个通用的二十一点游戏。点击开始按钮后游戏开始：

```
<button type="button" onClick="deal()">Start Game</button> 
```

依次运行方法 deal：

```
function deal() {  
    card1 = Math.floor(Math.random() * 52);  
    card2 = Math.floor(Math.random() * 52);  
    card1 = changeCard(card1);  
    card2 = changeCard(card2);  
    score = card1 + card2;  
    for (var i = 0; i < aceAmount || score > 21;aceAmount--) {  
        score -= 10;  
    }  
    document.write("You were dealt a " + card1 + " and a " + card2 + " for a total of " + score + ".\nDo you wish to hit or pass?");  
    aceAmount = 0;  
}; 
```

我的问题是一旦 deal 方法运行，我怎样才能让两个 html 按钮显示在屏幕上，例如：

```
<button type="button" onClick="hit()">Hit</button>  
<button type="button" onClick="pass()">Pass</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:47:59.523

该怎么办？使用 CSS[`display`属性](https://developer.mozilla.org/en/CSS%3adisplay)隐藏您的按钮，然后使用[getElementById](https://developer.mozilla.org/en/DOM/document.getElementById)方法“选择”这些按钮以对它们执行一些“Javascripty”操作。

你的 HTML

```
<button id="hit_btn" style="display:none;" type="button" onClick="hit()">Hit</button>  
<button id="pass_btn" style="display:none;" type="button" onClick="pass()">Pass</button> 
```

并将其添加到您的 Javascript 函数中：

```
document.getElementById('hit_btn').style.display = '';
document.getElementById('pass_btn').style.display = ''; 
```

当你想再次隐藏它们时

```
document.getElementById('hit_btn').style.display = 'none';
document.getElementById('pass_btn').style.display = 'none'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T03:49:55.807

您可以在按钮上设置 id 或类，并使用 display:none 设置 css 规则。在 deal 函数的最后，设置一行将显示更改为块或内联。在 jQuery 中，它会是

```
$('button.hit').css({visibility: "visible"}) 
```

# iphone - UIScrollView 更新/加载错误

> ID：11463837
> 
> 赞同：3
> 
> 时间：2012-07-13T03:45:02.193
> 
> 标签：iphone, ios, xcode

我在我的预览中`ViewController`所有我挑选的图像`imagePicker`都将在我的滚动视图中，是的，我能够在其中进行预览`thumbnail`，但是当我在调试器中记录它时，似乎每次我的`viewDidAppear`，它还会**重新**添加，`scrollView`因此图像数量会再次添加，由于图像重叠，因此更难在视图中删除。我需要的是`scrollview`在视图出现时和添加新图像时刷新。

这是我长期以来遇到问题的那些代码的预览：

```
- (id) initWithCoder:(NSCoder *)aDecoder {
    if ((self = [super initWithCoder:aDecoder])) {
        _images =  [[NSMutableArray alloc] init];
        _thumbs =  [[NSMutableArray alloc] init];
    }
    return self;
}
- (void)addImage:(UIImage *)image {
    [_images addObject:image];
    [_thumbs addObject:[image imageByScalingAndCroppingForSize:CGSizeMake(60, 60)]];
    [self createScrollView];
}        
- (void) createScrollView {

    [scrollView setNeedsDisplay];
    int row = 0;
    int column = 0;
    for(int i = 0; i < _thumbs.count; ++i) {

        UIImage *thumb = [_thumbs objectAtIndex:i];
        UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
        button.frame = CGRectMake(column*60+10, row*60+10, 60, 75);
        [button setImage:thumb forState:UIControlStateNormal];
        [button addTarget:self 
                   action:@selector(buttonClicked:) 
         forControlEvents:UIControlEventTouchUpInside];
        button.tag = i; 

        [scrollView addSubview:button];

        if (column == 4) {
            column = 0;
            row++;
        } else {
            column++;
        }

    }
    [scrollView setContentSize:CGSizeMake(300, (row+1) * 60 + 10)];
}

- (void)viewDidLoad
{        
    self.slotBg = [[UIView alloc] initWithFrame:CGRectMake(43, 370, 310, 143)];
    CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.frame = self.slotBg.bounds;
    gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor grayColor] CGColor], (id)[[UIColor whiteColor] CGColor], nil];
    [self.slotBg.layer insertSublayer:gradient atIndex:0];
    [self.view addSubview:self.slotBg];
    self.scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f,0.0f,300.0f,130.0f)];
    [slotBg addSubview:self.scrollView];
}

- (void)viewDidAppear:(BOOL)animated
{    
    [_thumbs removeAllObjects];
    for(int i = 0; i <= 100; i++) 
    { 
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDir = [paths objectAtIndex:0];

        NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"Images%d.png", i]]; 
        if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
            [self addImage:[UIImage imageWithContentsOfFile:savedImagePath]]; 
        } 
    }
} 
```

帮助将不胜感激。

并且使用它会很有帮助，删除然后添加。或者这是一种完全删除/删除所有这些子视图的方法，然后**REadd**？感谢那些愿意提供帮助的人。

这会有所帮助吗？谢谢

```
for(UIView *subview in [scrollView subviews]) {
    if([subview isKindOfClass:[UIView class]]) {
        [subview removeFromSuperview];
    } else {

    }
} 
```

删除：

```
- (void)deleteItem:(id)sender {
        _clickedButton = (UIButton *)sender;
        UIAlertView *saveMessage = [[UIAlertView alloc] initWithTitle:@""
                                                              message:@"DELETE？"
                                                             delegate:self
                                                    cancelButtonTitle:@"NO"
                                                    otherButtonTitles:@"YES", nil];
}
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
if([title isEqualToString:@"YES"]) {
        NSLog(@"YES was selected.");
            UIButton *button = _clickedButton;
            [button removeFromSuperview];
            [_images objectAtIndex:button.tag];
            [_images removeObjectAtIndex:button.tag];
            [_images removeObject:button];

            NSFileManager *fileManager = [NSFileManager defaultManager];
            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString *documentsDirectory = [paths objectAtIndex:0];
            NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"Images%lu.png", button.tag]];
            [fileManager removeItemAtPath: fullPath error:NULL];
            NSLog(@"image removed");
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T15:53:08.323

这是一个工作示例：[谷歌代码](http://code.google.com/p/uiscrollview-grid-alignment/)

我写了代码，我有这个。它将视图对齐为 5 宽，无论它必须有多高，并且滚动视图将改变高度。

您将需要创建一个包含按钮列表的新`NSMutableArray`名称。`_buttons`

```
- (void)addImage:(UIImage *)imageToAdd {
    [_images addObject:imageToAdd];
    [_thumbs addObject:[imageToAdd imageByScalingAndCroppingForSize:CGSizeMake(60, 60)]];

    int row = floor(([views count] - 1) / 5);
    int column = (([views count] - 1) - (row * 5));

    UIImage *thumb = [_thumbs objectAtIndex:[_thumbs count]-1];
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectMake(column*60+10, row*60+10, 60, 60);
    [button setImage:thumb forState:UIControlStateNormal];
    [button addTarget:self action:@selector(deleteItem:) forControlEvents:UIControlEventTouchUpInside];
    button.tag = [views count] - 1;
    // This is the title of where they were created, so we can see them move.s
    [button setTitle:[NSString stringWithFormat:@"%d, %d", row, column] forState:UIControlStateNormal];

    [_buttons addObject:button];
    [scrollView addSubview:button];
        // This will add 10px padding on the bottom as well as the top and left.
    [scrollView setContentSize:CGSizeMake(300, row*60+20+60)];
}

- (void)deleteItem:(id)sender {
    UIButton *button = (UIButton *)sender;
    [button removeFromSuperview];
    [views removeObjectAtIndex:button.tag];
    [_buttons removeObjectAtIndex:button.tag];

    [self rearrangeButtons:button.tag];
}

- (void)rearrangeButtons:(int)fromTag {
    for (UIButton *button in _buttons) {
        // Shift the tags down one
        if (button.tag > fromTag) {
            button.tag -= 1;
        }
        // Recalculate Position
        int row = floor(button.tag / 5);
        int column = (button.tag - (row * 5));
        // Move
        button.frame = CGRectMake(column*60+10, row*60+10, 60, 60);
        if (button.tag == [_buttons count] - 1) {
            [scrollView setContentSize:CGSizeMake(300, row*60+20+60)];
        }
    }
} 
```

注意：在该`rearrangeButtons`方法中，可以对更改进行动画处理。

这是重新排列文件的代码：

```
- (void)rearrangeButtons:(int)fromTag {
    for (UIButton *button in _buttons) {
        // Shift the tags down one
        if (button.tag > fromTag) {
            // Create name string
            NSString *imageName = [NSString stringWithFormat:@"images%i.png", button.tag];
            // Load image
            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString *documentFile = [paths objectAtIndex:0];
            NSSting *oldFilePath = [documentFile stringByAppendingPathComponent:imageName];
            NSData *data = [[NSData alloc] initWithContentsOfFile:oldFilePath];
            button.tag -= 1;
            // Save the image with the new tag/name
            NSString *newImageName = [NSString stringWithFormat:@"images%i.png", button.tag];
            NSString *newFilePath = [documentFile stringByAppendingPathComponent:newImageName];
            [data writeToFile:newFilePath atomically:YES];
            // Delete the old one
            NSFileManager *fileManager = [NSFileManager defaultManager];
            NSError *err = nil;
            if (![fileManager removeItemAtPath:file error:&err]) {
                // Error deleting file
            }
        }
        // Recalculate Position
        int row = floor(button.tag / 5);
        int column = (button.tag - (row * 5));
        // Move
        button.frame = CGRectMake(column*60+10, row*60+10, 60, 60);
        if (button.tag == [_buttons count] - 1) {
            [scrollView setContentSize:CGSizeMake(300, row*60+20+60)];
        }
    }
} 
```

# ios - 修改 NSHTTPURLResponse 中的标头

> ID：11463840
> 
> 赞同：3
> 
> 时间：2012-07-13T03:45:35.323
> 
> 标签：ios, nsurlconnection, nsurlrequest, nsurlprotocol, nshttpurlresponse

是否可以在不使用该方法的情况下修改 NSHTTPURLResponse 上的标头

```
initWithURL:statusCode:HTTPVersion:headerFields: 
```

创建一个新的自定义 NSHTTPURLResponse

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T04:39:06.097

响应对象返回一个名为 的 NSDictionary `allHeaderFields`。如果您可以直接修改该字典，那将是理想的，但它不是 NSMutableDictionary。这意味着您只能做以下两件事之一：

*   创建当前`allHeaderFields`字典的可变副本，并在新的 NSHTTPURLResponse 中使用它（我知道你说过你不想创建新的 NSHTTPURLResponse，但这是最简单的解决方案，你从原始响应中获取其他值，制作一个NSMutableDictionary 用 original 的值初始化`allHeaderFields`，编辑你需要的字段，不管你在欺骗什么，然后把它插入到新的响应中。）

*   否则，您可以实现 NSHTTPURLResponse 的自定义子类，该子类可以修改 allHeaderFields 对象。很好的答案，详细说明了如何在[此处](https://stackoverflow.com/a/2194751/465893)执行此操作的基础知识，但似乎更加迂回。仅当您需要覆盖大量 HTTP 标头字段时才使用它。

# java - 休眠条件@Valid

> ID：11463850
> 
> 赞同：0
> 
> 时间：2012-07-13T03:47:11.507
> 
> 标签：java, hibernate

嘿伙计们，我有一个带有 Person 对象（多对一）的 Event 类，我正在使用`@valid`它`private Person;`来验证 person 对象，问题是我只希望它在另一个属性设置为 1 时验证它。IE

```
@Column
@Valid(if(hasAttachedPerson=1))
private Person; 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:04:10.007

我还没有使用它，但您可以使用`@ValidationConditionOnUEL`它定义基于[统一表达式语言](http://en.wikipedia.org/wiki/Unified_Expression_Language)(UEL) 表达式的验证条件。这对于检查位于 bean 中任何位置的属性、多个属性甚至子属性非常有用。

```
@Valid
//defines a validation condition true if hasAttachedPerson==1
@ValidationConditionOnUEL(name = "someName", uel = "hasAttachedPerson==1")
private Person; 
```

“表达式的验证条件”部分提供了[更多详细信息。](http://www.lunatech-research.com/archives/2008/05/09/bean-validation-java-ee)

# javascript - 如何在 javascript 中捕获“未定义”？

> ID：11463851
> 
> 赞同：2
> 
> 时间：2012-07-13T03:47:16.060
> 
> 标签：javascript, jquery

我正在努力以一种形式遍历所有值，但我一直没有定义，然后我的值就出现了。我正在动态创建表单，所以我认为未定义的可能来自空白字段。

这是我用来获取所有元素的代码：

```
//try to get all elements
var output;
$(this).parents('form') // For each element, pick the ancestor that's a form tag.
.find(':input') // Find all the input elements under those.
.each(function(i) {
    //alert(this.value+ " = " + i);
    if (typeof this.value === "undefined") {
        output = "nothing here";
    } else {
        output += this.value;
    }
});
$("div#total").append("value = " + output + "<br>"); 
```

如果我输入 1,2,3,4,5,6 那么我的输出是：

```
hello value = undefined
value = undefined1
value = undefined1
value = undefined12
value = undefined12
value = undefined123
value = undefined123
value = undefined1234
value = undefined1234
value = undefined12345
value = undefined12345
value = undefined123456 
```

结果是我想要的，除了未定义的部分。我看到了这个答案：[JavaScript: undefined !== undefined?](https://stackoverflow.com/questions/776950/javascript-undefined-undefined) 并尝试了他们的建议，但如果值不是未定义的，我似乎无法让我的程序保存该值。

如果它有帮助，这里是完整的代码：http: [//jsfiddle.net/lostsoul/rKLrZ/](http://jsfiddle.net/lostsoul/rKLrZ/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T03:48:33.033

初始化`output`为空字符串。

```
var output = ""; 
```

如果 an`input`没有值，它会给你一个空字符串而不是`undefined`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:00:22.613

未初始化的 var`output`实际上有一个值`undefined`。

```
变量输出；// 输出值未定义
输出+=“2”；// 未定义 + "2" -> "未定义2"

```

# android - onDoupleTap 不触发

> ID：11463854
> 
> 赞同：4
> 
> 时间：2012-07-13T03:48:04.213
> 
> 标签：android, android-mapview, gesture, double-click

我想制作一个响应双击的地图视图并获取单击位置的地理点并将其返回给调用者活动。我在 Eclipse 模拟器中测试我的应用程序，但是当我双击地图时没有任何反应，我的 onDoubleTap() 方法从不进入

这是我的代码

```
public class MYMapActivity extends MapActivity implements GestureDetector.OnGestureListener, GestureDetector.OnDoubleTapListener{

GestureDetector gestureDetector;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mymapview);
        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

        gestureDetector = new GestureDetector(getApplicationContext(), this);
        gestureDetector.setOnDoubleTapListener(this);
    }
@Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    @Override
    public boolean onDoubleTap(MotionEvent mev) {
        MapView mapView = (MapView) findViewById(R.id.mapview);
        Projection p = mapView.getProjection();
        GeoPoint geoPoint = p.fromPixels((int) mev.getX(), (int) mev.getY());
        int latitude = geoPoint.getLatitudeE6();
        int longitude = geoPoint.getLongitudeE6();
        Intent resultIntent = new Intent();
        resultIntent.putExtra("latitude", latitude);
        resultIntent.putExtra("longitude", longitude);
        setResult(Activity.RESULT_OK, resultIntent);
        finish();
        return true;
    }

    @Override
    public boolean onDoubleTapEvent(MotionEvent e) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onSingleTapConfirmed(MotionEvent e) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onDown(MotionEvent e) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onLongPress(MotionEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
            float distanceY) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onShowPress(MotionEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onSingleTapUp(MotionEvent e) {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

有什么问题或错过了什么让我的双击永远不会触发？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T00:54:33.310

我找出了我的代码中缺少的东西，我在这里为任何可以遇到相同问题的人写了它

第一的：

我必须在初始化 gestureDetector 对象后添加这一行

```
 gestureDetector = new GestureDetector(this, this);
        gestureDetector.setOnDoubleTapListener(this);
        mapView.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                return gestureDetector.onTouchEvent(event);
            }
        }); 
```

第二：我必须在 onDown 方法中返回 true，因为每次点击都会调用它，双击取决于它

```
@Override
public boolean onDown(MotionEvent e) {
    return true;
} 
```

这就是在活动中实现 doubleTap 侦听器所需的全部内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:34:53.643

让你的活动只`OnGestureListener`在里面实现`onCreate()`，做

```
 gd.setOnDoubleTapListener(new OnDoubleTapListener()  
            {  //all the override functions of the listener go here // 
}); 
```

之后`onCreate()`是你想要覆盖的所有那些函数`onGesturelistener`，包括你忘记的这个：

```
@Override  
    public boolean onTouchEvent(MotionEvent event)  
    {  
        return gd.onTouchEvent(event);//return the double tap events  
    } 
```

# php - 第一次设置 cron 作业

> ID：11463855
> 
> 赞同：-1
> 
> 时间：2012-07-13T03:48:09.750
> 
> 标签：php, cron

我对 cron 工作完全陌生。

1.  如何设置每天午夜运行一次 PHP 函数的 cron 作业？
2.  cron 作业文件需要什么文件类型？

我只有 FTP 访问我的网站，所以我不是服务器上的管理员。我在 Stack Overflow 上搜索并阅读了相关问题，但没有任何结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:58:53.703

`crontab`如果您没有 shell 访问权限，则Cron 选项卡（通常使用实用程序创建的文件，列出您的 cron 作业）保存在您无法访问的系统文件夹中。它们没有文件类型或扩展名。它们以 Unix/Linux 用户名命名。在 Darwin/Mac OS X 上，它们位于`/usr/lib/cron/tabs/`. 如果没有 shell 访问权限或 cPanel 扩展（通常在高级部分中），那么您就不走运了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:04:12.933

您需要访问 cpanel 或终端 (SSH) 才能设置 cron 作业。

如果您使用的是 cpanel，您只需阅读这些说明即可添加作业

[http://www.siteground.com/tutorials/cpanel/cron_jobs.htm](http://www.siteground.com/tutorials/cpanel/cron_jobs.htm)

其中，命令是正在执行的实际 linux 命令。

如果您对服务器（不是 FTP）有 shell 访问权限，则可以通过运行此命令来设置作业

```
crontab cron.txt 
```

其中的内容`cron.txt`是这样的

```
* * * * * /usr/bin/php /home/mydir/project/file.php 
```

开始的地方意味着作业运行的时间（在这种情况下是每分钟）

您可以搜索在线 crontab 制造商，这将帮助您找到执行命令所需的语法，但仅通过 FTP 和 PHPMyAdmin 访问无法做到这一点。

# php - 从变量 php 中获取特定数据

> ID：11463861
> 
> 赞同：-1
> 
> 时间：2012-07-13T03:49:05.120
> 
> 标签：php

```
$vari="Love is an emotion of a strong <"/affection and personal/"> attachment. Love is also a virtue representing <"/all of human kindness/">, compassion, and affection"; 
```

寻找从 <"/ 开始并以 /"> 结束的输出。

输出：

```
affection and personal
all of human kindness 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:52:41.733

```
$vari='Love is an emotion of a strong <"/affection and personal/"> attachment. '
   . 'Love is also a virtue representing <"/all of human kindness/">, '
   . ' compassion, and affection';
preg_match_all('@<"/(.*?)/">@', $vari, $matches);
var_dump($matches[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T03:56:03.603

假设整个内容是一个正确转义的字符串，您可以使用此函数获取所有部分的数组

```
<?php

function cutMultiple($start, $end, $from)
{
    $results = array(); // init the output
    $step1 = explode($start, $from);    // get the results

    for( $i = 1; $i<count($step1); $i++)
    {
        $outputs = explode($end, $step1[$i]);   // get final cut
        $results[] = $outputs[0];   // append the cut
    }

    return $results;
}

$text = 'Love is an emotion of a strong <"/affection and personal/"> attachment. Love is also a virtue representing <"/all of human kindness/">, compassion, and affection';

echo cutMultiple('<"/', '/">', $text);

?> 
```

或者使用正则表达式方法。

我必须说这不是问题的最佳解决方案，但绝对是一个快速的解决方案

# .net - 如何在 64 位 .NET 应用程序中显示 SVG 文件？

> ID：11463862
> 
> 赞同：9
> 
> 时间：2012-07-13T03:49:10.020
> 
> 标签：.net, winforms, svg, 64-bit

我有一个 SVG 文件，需要在 .NET Windows Forms 应用程序中显示。这是一个[常见的问题](https://stackoverflow.com/questions/397189/how-to-display-vector-graphics-svg-in-a-winforms-application)。但是，WebBrowser 控件不起作用，因为 IE 的引擎无法正确呈现我的 SVG（特别是它忽略了保留空白指令）。我查看了[Chrome](http://sourceforge.net/projects/webkitdotnet/)和[Firefox](http://code.google.com/p/geckofx/)控件，它们工作得很好，但它们只是 32 位的，其他参考要求项目以 64 位模式编译。当然必须有一些选项可以在 64 位模式下显示正确渲染的 SVG？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-25T10:38:02.663

我已经使用 WinForms 尝试[了 SVG.NET](https://github.com/vvvv/SVG)，它运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T03:59:21.940

试试[SVG 渲染引擎](http://svg.codeplex.com/)。它应该在 64 位模式下工作，因为它是完全托管的代码。

另一种选择是[SharpVectors](http://sharpvectors.codeplex.com/)。

# ruby-on-rails - 覆盖确认控制器时设计范围视图

> ID：11463865
> 
> 赞同：2
> 
> 时间：2012-07-13T03:49:28.653
> 
> 标签：ruby-on-rails, devise

我在 OSX 上使用 Devise 2.0.0 和 Rails 3.2.3。

是否可以同时覆盖设计控制器和设计视图？

我成功地用我自己的范围视图覆盖了确认/新视图，位于`views/users/confirmations/new.html.erb`. 范围视图工作正常。

然后我发现有必要`Devise::ConfirmationsController`用我自己的控制器覆盖`AppConfirmationsController`，以便自定义 after_confirmation_path_for 方法以返回我自己的自定义路径。

```
class AppConfirmationsController < Devise::ConfirmationsController
  protected
    def after_confirmation_path_for(resource_name, resource)
      confirmed_app_custom_path
    end
end 
```

我更改了路线，以便使用我的自定义控制器

```
devise_for :users, :controllers => {:confirmations => 'app_confirmations'} 
```

新控制器工作正常，但我的范围视图不再被识别。不是渲染我的范围视图，而是渲染设计默认视图。如果我停止使用我的自定义控制器，我的作用域视图会再次开始工作。

使用客户控制器时，我是否遗漏了一些影响范围视图的配置设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T04:02:51.537

由于我没有使用范围视图，因此不确定这是否可行，但是在覆盖默认的设计注册视图和控制器时遇到了类似的问题。

对我来说，我必须确保我的视图的父目录与新的设计控制器具有相同的名称，并且一切正常。

即`devise_for :users, :controllers => { :registrations => "app_registrations" }` 然后我的自定义控制器在`views/app_registrations/new.html.erb`

移动你的观点有`views/users/app_confirmations/new.html.erb`帮助吗？

# ios - 将ios应用提交发布日期修改为“Hold for Developer Release”

> ID：11463866
> 
> 赞同：3
> 
> 时间：2012-07-13T03:49:35.707
> 
> 标签：ios

我已将 ios 应用程序提交到 App Store，并附上发布日期。目前，App处于“等待审核”中。后来我决定修改为“等待开发人员发布”。

如何将发布日期更改为“为开发者发布而保留”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-05T09:56:37.120

*需要注意的另一件事是，在向您的应用提交更新*时，您只能“等待开发者发布” ，这不是首次上传新应用的选项。

> 编辑 - 我相信 iTunes 连接现在支持这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T00:12:55.410

您可以在 iTunes Connect 的定价部分更改上市日期。

据我所知，查看 iTunes Connect 文档这是正确的，但我不能 100% 确定。

我已经就这个问题向 Apple 发送了电子邮件......我现在在同一条船上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T18:27:24.853

您可以在 iTunesConnect 网站的“管理您的应用程序”部分的“**权利和定价”中更改您的应用程序的可用日期**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T10:58:58.547

只需将发布日期设置为某个遥远的未来日期。我使用了我计划的发布日期，但提前了一年（即 2014 年用于计划的 2013 年发布，这只是在批准后更容易更改为实际日期）

# java - 单个面板的 Java Swing GlassPane 功能？

> ID：11463870
> 
> 赞同：0
> 
> 时间：2012-07-13T03:50:16.503
> 
> 标签：java, swing, jframe, jlayeredpane, glasspane

我已经构建了一个简单的界面来填充我的整个 JFrame。我正在使用在互联网上发现的 FinalGlassPane 类的一个[版本](http://www.java.net/download/javadesktop/blogs/alexfromsun/2006.09.20/FinalGlassPane.java.html)。

此玻璃窗格没有常规事件侦听器，但它监视其底层组件的 AWTEvent。这样就有了界面的全部功能，我可以使用单个 AWTEvent 处理程序响应全局鼠标移动坐标，并相应地在所有内容上进行绘制。一切都很好，但现在我需要这个功能的副本，每个都有自己的坐标空间和事件处理程序，在主 JFrame 内。我刚刚了解了 JLayeredPane，但想确保使用它可以实现此功能。IE 在顶部添加了一个完全透明但可绘制的 JPanel 层，用它处理 AWTEvents，并且仍然可以正常触发底层事件。

编辑：我正在阅读有关在 JDesktopPane 内使用多个 JInternalFrame（和相关的玻璃窗格）的信息。我不认为 JDesktopPane 与布局管理器一起使用，所以我必须在需要时绝对定位/调整 2 帧的大小，但这可能是最好的选择。结束编辑

我要做的最后一件事是为每个界面组件添加鼠标移动侦听器，并且必须转换为父面板坐标才能运行相同的方法。

如果必须，我可以继续监视整个玻璃窗格鼠标坐标，并找出如何从那里分支逻辑。不过，自给自足和个性化会更好。

最后一个警告，我想最终把它带到 Android 上，但对 Android 图形一无所知。如果没有分层面板功能，我几乎宁愿先用更难、更便携的方式实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T04:16:28.073

如果您使用的是 Java 7 ，这可以通过使用[JXLayer](http://weblogs.java.net/blog/alexfromsun/archive/2008/06/the_new_jxlayer.html)或[JLayer来完成。总的来说，JXLayer/JLayer 的功能优于 GlassPane。](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)

任何基于 Swing/AWT 的解决方案都不能在 Android 上运行 - 您必须在那里使用 Android 特定组件。

# ruby-on-rails - RSpec `undefined method` .. `for proc` 在一个非常简单的规范中

> ID：11463871
> 
> 赞同：1
> 
> 时间：2012-07-13T03:50:58.360
> 
> 标签：ruby-on-rails, rspec

有人可以帮我弄清楚为什么标记的行`#works`有效，但标记的行`#causes error`会导致错误吗？（这是带有 rspec-rails 2.11.0 的 Rails 3.2.6）

错误：`undefined method 'more_things=' for #<Proc:0x007fbd23d0b960> (NoMethodError)`

规格：

```
describe User do

  subject { User.new }

  it "has no something" do
    User.new.more_things = "#works"        #works
    subject.something.should be_empty      #works
  end

  describe "#more_things" do
    User.new.more_things = "#works"        #works
    subject.more_things = "#causes error"  #causes error
  end

end 
```

模型：

```
class User

  def something
    []
  end

  def more_things=(value)

  end

end 
```

我试着把另一个`subject { User.new }`放在里面`describe "#more_things" do`，认为它可能是某种范围问题，但这没有帮助（这不是范围问题，因为`subject` *确实*返回了一些东西 - a `Proc`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:00:49.660

多哈。慢我。它在一个`it`块（或`before`/`after`块）中时起作用：

```
describe "#more_things" do
  User.new.more_things = "#works"        #works
  subject.more_things = "#causes error"  #causes error
  it "should work now" do
    subject.more_things = "#works now"   #works
  end
end 
```

我想我应该永远记住*这是主题*:)

# c# - GridView 分页问题

> ID：11463872
> 
> 赞同：0
> 
> 时间：2012-07-13T03:50:59.103
> 
> 标签：c#, asp.net

我有一个与对象数据源绑定的 GridView。我在我的 gridview 上进行了自定义分页和排序，这是我使用 LINQ2SQL 完成的。我现在面临的问题是，如果用户搜索某些内容并单击搜索，gridview 将与 8 页绑定。现在，如果用户更改页面上的搜索过滤器（假设此搜索将只有 2 个页面）而不是单击 search ，他会将当前绑定的 gridview 记录的页码更改为 7。此用户操作将绑定网格视图，但这次在我的 LINQ2SQL 中，我将根据所选页面索引获取起始行索引，我希望它为 0 ，因为搜索过滤器已更改。

所以我想知道您将如何满足它，如果用户更改搜索过滤器值，您是否会隐藏 gridview 分页，或者您将设置一些检查过滤器旧值和新值？

谢谢

编辑：当我尝试在谷歌搜索上执行上述操作时，在页面索引上更改谷歌不会考虑当前搜索字段值，它仍然会在最后绑定的搜索结果上进行分页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T03:28:04.517

我已经解决了这个问题，通过在页面上设置属性，我在 viewState 中保存了搜索过滤器值，并使用相同的属性在 Page_PreRender 上呈现我的表单。

# ruby - Ruby：覆盖 puts 方法

> ID：11463873
> 
> 赞同：6
> 
> 时间：2012-07-13T03:51:08.377
> 
> 标签：ruby, irb

我有一个打算在 IRB 中运行的小程序。它最终会输出一些看起来像数组的东西，尽管从技术上讲不是数组。（该类继承自数组。）问题是，当我做这个类的一个实例时，例如 example = Awesome.new(1,2,3)，我写“puts example”，IRB 的默认行为是把每个示例元素到它自己的行上。

所以而不是

```
[1,2,3] 
```

（这就是我想要的），IRB 会弹出这个。

```
1
2
3 
```

有没有一种聪明的方法来覆盖这个特殊类的 puts 方法？我试过这个，但它没有用。

```
def puts
  self.to_a
end 
```

知道我做错了什么吗？

更新：所以我尝试了这个，但没有成功。

```
def to_s
  return self
end 
```

所以当我在 IRB 中并且我只是输入“示例”时，我得到了我正在寻找的行为（即 [1, 2, 3]。所以我想我可以只返回自我，但我仍然在搞砸显然，我有什么不明白的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T03:54:28.327

您应该覆盖`to_s`它，它将被自动处理，只需记住返回一个字符串`to_s`，它将作为一个魅力。

* * *

### 示例片段..

```
class Obj 
  def initialize(a,b)
    @val1 = a 
    @val2 = b 
  end 

  def to_s
    "val1: #@val1\n" +
    "val2: #@val2\n" 
  end 
end

puts Obj.new(123,321); 
```

```
val1: 123
val2: 321 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T05:43:33.353

```
def puts(o)
  if o.is_a? Array
    super(o.to_s)
  else
    super(o) 
  end  
end

puts [1,2,3] # => [1, 2, 3] 
```

或者只是使用`p`：

```
p [1, 2, 3] # => [1, 2, 3] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-01T01:21:23.170

你可能会更好地`to_ary`为你的类数组类实现方法。将调用此方法`puts`以获取所有元素。我在下面发布了我的一个项目的片段

```
require 'forwardable'

class Path 
  extend Forwardable
  def_delegators :@list, :<<, :count, :include?, :last, :each_with_index, :map

  def initialize(list = [])
    @list = list
  end

  def to_ary
    self.map.each_with_index{ |e, i| "#{e}, step: #{i}" }
  end
end 
```

# json - 对 symfony2 中的所有 json 响应使用 1 个模板

> ID：11463875
> 
> 赞同：0
> 
> 时间：2012-07-13T03:51:26.420
> 
> 标签：json, templates, symfony

据我所知，每个控制器都必须有自己的 json 响应模板，如何强制所有 json 响应使用相同的模板？

简单来说，我的控制器/路由器看起来像这样：

```
_myname:
    pattern: /xxx/yyy.{_format}
    defaults: { _controller: bundle:class:myname, _format:html }
    requirements:{ _format: html|json }

/**
* @Template()
*/
public function mynameAction(){
    return array("data"=>array("error"=>1, "msg"=>"msg"))
} 
```

好的，现在效果很好，当用户请求/xxx/yyy.html时，控制器将呈现视图“myname.html.twig”，当用户请求/xxx/yyy.json时，视图“myname.json.twig”将显示，但是，实际上每个 json tempalte 都是一样的，我怎么能让 symfony2 知道：

当用户请求 /xxx/yyy.html 时，正常渲染“myname.html.twig”
当用户请求 /xxx/yyy.json 时，**渲染其他模板如“default.json.twig”而不是“myname.json.twig” “**？？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T05:04:33.817

如你所知，我们有 Twig。使用 twig 我们可以扩展一些模板。您可以像这样创建一个基本的 json 文件：

```
/Symfony/app/Resources/views/base.json
{
    "success": {% block success %}true{% endblock %},
    "user": {% block user %}guest{% endblock %},
    "items": {% block items %}[]{% endblock %}
} 
```

在你所有的包中，你可以将任何模板定义为 base.json 的扩展

```
{% extends '::base.json' %}

{% block success %}{{ success }}{% endblock %}
{% block user %}app.user{% endblock %}
{% block items %}['one','two','three']{% endblock %} 
```

您还可以创建一种工厂类。此类始终可以返回特定 json 结构的 json 文件。而且您不能使用模板，而只能在您的操作中返回“new Response(json_encode(...))”。

# java - 提取字符串，包括字符串中的空格（java）

> ID：11463878
> 
> 赞同：2
> 
> 时间：2012-07-13T03:52:17.003
> 
> 标签：java, string, whitespace, substring, extract

我有一个字符串，其中包含 2 个由空格分隔的整数，后跟包含空格的任何字符串。

**例子：**

```
23 14 this is a random string 
```

如何提取`this is a random string`？

整数不能保证是两位数，因此我不知道如何使用 indexOf 和 substring 来提取这些数据。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T03:59:19.347

使用[`split(String regex, int limit)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)：

```
String s = "23 14 this is a random string";
String[] arr = s.split(" ", 3);
System.out.println(arr[2]); 
```

**输出：**

> 这是一个随机字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T04:00:21.800

```
String str = "23 14 this is a random string";
str = str.replaceAll("[0-9]", "");
str = str.trim(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T04:50:13.300

我会使用上述答案的组合，`regex`+ `replaceFirst`。

```
String s = "23 14 this is a random string";
String formattedS = s.replaceFirst("\\d+ \\d+ ", ""); 
```

无论数字有多大，这都会删除由空格分隔的前两个数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T04:01:50.087

您可以使用 StringTokenizer，如果您知道您将有 2 个数字，只需忽略数组中的前两个元素。

```
StringBuffer sb = new StringBuffer();
StringTokenizer st = new StringTokenizer("23 14 this is a random string");

int i = 1; // counter: we will ignore 1 and 2 and only append

while (st.hasMoreTokens()) {
   // ignore first two tokens
   if (i > 2) {
             sb.append(st.nextToken()); // adds remaining strings to Buffer
   }

   i++;  // increment counter
} // end while

// output content
sb.toString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T04:11:48.543

只需使用

```
StringTokenizer st=new StringTokenizer(youString, " "); //whitespaces as delimeter

int firstInteger=Integer.parseInt(st.nextToken());
int secondInteger=Integer.parseInt(st.nextToken()); 
```

其余的令牌类似..

你可以做一个明确的数组..

并将其余标记存储在这样的字符串数组中..

```
while(st.hasMoreTokens())
{
 ar[i]=st.nextToken();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T04:12:30.487

老实说...如果您`String`遵循一种模式并且需要从中提取一些东西，请尝试使用`Regex`. 它是为此而生的。

```
Pattern regex = Pattern.compile("^\\d+ \\d+ (.*)$");
Matcher matcher = regex.matcher("23 14 this is a random string");

if (matcher.find())
    System.out.println(matcher.group(1)); 
```

输出：

```
this is a random string 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-13T04:48:26.657

哇。我不敢相信有些人写了多少代码来做最简单的事情......

这是一个优雅的单行解决方案：

```
String remains = input.replaceAll("^(\\d+\\s*){2}",""); 
```

这是一个测试：

```
public static void main( String[] args ) {
    // rest of String contains more numbers as an edge case
    String input = "23 14 this is a random 45 67 string";
    String remains = input.replaceAll("^(\\d+\\s*){2}","");
    System.out.println( remains );
} 
```

输出：

```
this is a random 45 67 string 
```

# spring - Bean 名称的 BindingResult 和普通目标对象都不是

> ID：11463883
> 
> 赞同：0
> 
> 时间：2012-07-13T03:52:43.543
> 
> 标签：spring, spring-mvc, binding, annotations

我是 Spring 框架的新手。我正在做一个关于 Spring 3 MVC 的教程，运行 web 时出现异常。

例外 ：

```
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'contact1' available as request attribute
org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141)
org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:174)
org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:194)
org.springframework.web.servlet.tags.form.LabelTag.autogenerateFor(LabelTag.java:129)
org.springframework.web.servlet.tags.form.LabelTag.resolveFor(LabelTag.java:119)
org.springframework.web.servlet.tags.form.LabelTag.writeTagContent(LabelTag.java:89)
org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
org.apache.jsp.contact_jsp._jspx_meth_form_005flabel_005f0(contact_jsp.java:222)
org.apache.jsp.contact_jsp._jspx_meth_form_005fform_005f0(contact_jsp.java:144)
org.apache.jsp.contact_jsp._jspService(contact_jsp.java:93)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

联系人控制器.java

```
@Controller
@RequestMapping("/contact.jsp")
public class ContactController {

@Autowired
private ContactService contactService;

@RequestMapping(method=RequestMethod.GET)
public String showForm(ModelMap model) {
    model.addAttribute("contact1", new Contact());
    //map.put("contactList", contactService.listContact());

    //return new ModelAndView("/contact","contact", new Contact());
    return "contact";

}

@RequestMapping(value = "/add", method = RequestMethod.POST)
public String addContact(@ModelAttribute("contact")
Contact contact, BindingResult result) {

    contactService.addContact(contact);

    return "redirect:/contact";
}

@RequestMapping("/delete/{contactId}")
public String deleteContact(@PathVariable("contactId")
Integer contactId) {

    contactService.removeContact(contactId);

    return "redirect:/index";
}
} 
```

索引.jsp

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
    <jsp:forward page="contact.jsp" ></jsp:forward>
</body> 
```

联系人.jsp

```
<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%>
    <%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
    <%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
    <html>
    <head>
    <title>Spring 3 MVC Series - Contact Manager | viralpatel.net</title>
    </head>
    <body>

<h2>Contact Manager</h2>

<form:form action="/contact.jsp" method="POST" modelAttribute="contact1">

    <table>
        <tr>
            <td><form:label path="firstname">
                    <spring:message code="label.firstname" />
                </form:label></td>
            <td><form:input path="firstname" /></td>
        </tr>
        <tr>
            <td><form:label path="lastname">
                    <spring:message code="label.lastname" />
                </form:label></td>
            <td><form:input path="lastname" /></td>
        </tr>
        <tr>
            <td><form:label path="email">
                    <spring:message code="label.email" />
                </form:label></td>
            <td><form:input path="email" /></td>
        </tr>
        <tr>
            <td><form:label path="telephone">
                    <spring:message code="label.telephone" />
                </form:label></td>
            <td><form:input path="telephone" /></td>
        </tr>
        <tr>
            <td colspan="2"><input type="submit"
                value="<spring:message code="label.addcontact"/>" /></td>
        </tr>
    </table>
</form:form>

<h3>Contacts</h3>
<c:if test="${!empty contactList}">
    <table class="data">
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Telephone</th>
            <th>&nbsp;</th>
        </tr>
        <c:forEach items="${contactList}" var="contact">
            <tr>
                <td>${contact.lastname}, ${contact.firstname}</td>
                <td>${contact.email}</td>
                <td>${contact.telephone}</td>
                <td><a href="delete/${contact.id}">delete</a></td>
            </tr>
        </c:forEach>
    </table>
</c:if> 
```

springapp-servlet.xml

```
<?xml  version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jee="http://www.springframework.org/schema/jee" xmlns:lang="http://www.springframework.org/schema/lang"
xmlns:p="http://www.springframework.org/schema/p" xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
    http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

<context:annotation-config />

<!-- Scan all java class -->
<context:component-scan base-package="*" />

<bean id="jspViewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/" />
    <property name="suffix" value=".jsp" />
</bean>

<bean id="simpleUrlMapping"
    class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <props>
            <prop key="/contact.jsp">contact</prop>
        </props>
    </property>
</bean>

<bean id="contact" name="contact" class="controller.ContactController" />

<!--    Declare DAO and Service refer to DAOImpl and ServiceImpl -->
<bean name="contactService" class="service.ContactServiceImpl"
    autowire="constructor" />
<bean name="contactDAO" class="dao.ContactDAOImpl" autowire="constructor" />

<bean id="messageSource"
    class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:messages" />
    <property name="defaultEncoding" value="UTF-8" />
</bean>
<bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
    p:location="/WEB-INF/jdbc.properties" />

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close" p:driverClassName="${jdbc.driverClassName}"
    p:url="${jdbc.databaseurl}" p:username="${jdbc.username}" p:password="${jdbc.password}" />

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation">
        <value>classpath:hibernate.cfg.xml</value>
    </property>
    <property name="configurationClass">
        <value>org.hibernate.cfg.AnnotationConfiguration</value>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${jdbc.dialect}</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean>

<tx:annotation-driven />
<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<servlet>
    <servlet-name>springapp</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>springapp</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/springapp-servlet.xml</param-value>
</context-param>

<listener>
    <listener-class>
           org.springframework.web.context.ContextLoaderListener
     </listener-class>
</listener> 
```

请帮我解决这个问题。我知道问题发生是因为 jsp 页面找不到 modelAttribue 但我不知道如何解决它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:58:04.337

请提供您的 web.xml 条目，它实际上映射了 Dispacher-servlet。我知道您的问题是什么，但根据该映射，我可以建议您进行确切的更改。我复制了您的代码并进行了一些更改，现在模型已绑定。你能看看这个吗？

你的jsp

```
<form:form action="/web/contact.jsp/add" method="POST" commandName="contact1"> 
```

web.xml 映射是

```
<servlet>
    <servlet-name>springapp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>springapp</servlet-name>
    <url-pattern>/web/*</url-pattern>
</servlet-mapping> 
```

我正在调用这个 url 来访问表单 /web/contact.jsp。这将调用 GET 方法并提供空白表单，绑定命令类名称="contact1"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T06:42:56.600

这意味着从控制器传递的模型不包含名为的属性`contact1`。添加

```
model.addAttribute("contact1", new Contact()); 
```

到返回此视图的控制器。
Dispatcher servlet 获取每个模型属性并将它们作为请求属性传递给视图。由于您`contact1`在模型中缺少，因此它给出的错误为

```
 Neither BindingResult nor plain target object for bean name 'contact1' available as request attribute 
```

并检查您的控制器映射。调试您的应用程序并检查控制器是否被调用并`contact1`成功添加到模型中。

* * *

**编辑：**

您同时使用两者`commandName`，`modelAttribute`最终达到相同的目的。删除`commandName`并仅使用`moedlAttribute`，因为`ModelAttribute`取代`CommandAttribute.`
检查链接以获取更多详细信息[http://chompingatbits.com/2009/08/25/spring-formtag-commandname-vs-modelattribute/](http://chompingatbits.com/2009/08/25/spring-formtag-commandname-vs-modelattribute/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T07:17:16.063

在调试模式下运行您的应用程序。检查您的控制器是否调用方法

```
public String showForm(ModelMap model) {}. 
```

当您的 jsp 文件未获取`modelAttribute="contact1"`.

# node.js - 如何最好地组织 Underscore.js 模板以与 Backbone.js 一起使用？

> ID：11463886
> 
> 赞同：2
> 
> 时间：2012-07-13T03:52:48.220
> 
> 标签：node.js, backbone.js, express, underscore.js, pug

目前我有我的 main.jade 文件，它在 Node.js 上使用 Express.js 提供。在玉文件的头部，我有我所有的模板。正如您可能理解的那样，这很快变得不守规矩。我使用以下方法从 Backbone.js 加载模板：

```
template:_.template($("#phone-tmplt-taskRow").html()) 
```

我的应用程序将有三个版本：移动版、平板电脑和桌面版。我想知道组织模板的最佳方式应该是什么。我不想在我的 html 文件的头部列出大约 30 个模板。我应该如何组织我的模板？我希望以某种方式拥有 3 个文件，每个版本一个。我不想根据版本提供与 node.js/express.js 不同的 URL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T15:05:48.777

您可以将文件（例如 phone-tpl.html）中的模板分开，并将它们全部放在 /templates 目录中。然后你可以通过 AJAX 加载它们中的每一个，在这种情况下，我建议你有一个缓存（在内存或 localStorage 中）以最小化请求数。

另一种选择是使用 RequireJS。Addy Osmani 建议使用文本！加载模板的插件。Alex Sexton 提出了一个更复杂的选项，您不将模板加载为文本，而是预编译为 Javascript 函数（并且当使用 r.js 优化时，所有模板都被捆绑在一起，因此在生产中所有模板都是函数，您不需要向服务器请求它们）。

链接：

*   [http://alexsexton.com/talks/backboneconf2012/](http://alexsexton.com/talks/backboneconf2012/)
*   [http://addyosmani.github.com/backbone-fundamentals/](http://addyosmani.github.com/backbone-fundamentals/)
*   RequireJS 模板插件：[https ://github.com/jrburke/requirejs/wiki/Plugins#wiki-templating](https://github.com/jrburke/requirejs/wiki/Plugins#wiki-templating)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:20:18.407

我最终将 Jade 模板用于一切——服务器端和客户端。没有下划线模板。我使用了[http://projects.jga.me/clientjade/](http://projects.jga.me/clientjade/)，它采用玉模板并将它们预编译成一个 js 文件。好处：

1.  您的 html 文件中没有模板。更小、更合理的标记
2.  预编译的玉模板速度极快
3.  Jade 文件仍然可以用来渲染 html
4.  单一模板系统

clientjade 不监视文件更改。所以我做了一个蛋糕任务来处理这个问题。如果你走那条路，请查看我的蛋糕任务 - [https://gist.github.com/4041281](https://gist.github.com/4041281)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:27:47.370

您可以将它们放入 js 文件并使用 requirejs 加载它们。这会产生非常可读的代码并减少 dom 依赖。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-13T22:59:12.100

实际上，我最终使用了[jam.js 的“包含”功能](https://github.com/visionmedia/jade/#a13)来做我需要的事情。我的应用程序的每个版本都有三个 .jade 文件，我将所有这些文件都包含在我的 main.jade 中。我假设将来我最终会在我的项目中使用 require.js，所以谢谢你的提示，eabait。

# delphi - 在 Delphi XE2 中使用泛型和前向声明时的编译器错误

> ID：11463888
> 
> 赞同：45
> 
> 时间：2012-07-13T03:53:07.510
> 
> 标签：delphi, delphi-xe2

我在 Delphi 2010 上开始项目，然后迁移到 XE，现在我尝试迁移到 XE2。在 XE2（更新 4 修补程序 1）中编译后，单元测试开始以 AV 失败。经过一些调试，很明显以下代码没有正确编译：

```
program ForwardDeclaration;

{$APPTYPE CONSOLE}

uses
    System.SysUtils;

type
    TEntityBase = class(TObject)
    protected
        FModel: Integer;
    public
        constructor Create(const AModel: Integer);
    end;

    TEntity<TKey> = class(TEntityBase)
    end;

    TMyEntity2 = class;

    TMyEntity1 = class(TEntity<Integer>)
        FData: Integer;
    end;

    TMyEntity2 = class(TMyEntity1)
    end;

constructor TEntityBase.Create(const AModel: Integer);
begin
    inherited Create;
    FModel := AModel;
end;

var
    MyEntity: TMyEntity1;
begin
    try
        Writeln(TEntityBase.ClassName, ': ', TEntityBase.InstanceSize, ' bytes');
        Writeln(TMyEntity1.ClassName, ': ', TMyEntity1.InstanceSize, ' bytes');
        MyEntity := TMyEntity1.Create(100);
        Assert(MyEntity.FData = 0);
    except
        on E: Exception do Writeln(E.ClassName, ': ', E.Message);
    end;
end. 
```

程序输出：

```
TEntityBase: 12 bytes
TMyEntity1: 12 bytes <-- Must be 16 bytes!
EAssertionFailed: Assertion failure (ForwardDeclaration.dpr, line 41) 
```

是否可以通过调整编译器选项来解决问题？

这个问题是否在其他人身上重复？

PS [QC107110](http://qc.embarcadero.com/wc/qcmain.aspx?d=107110)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-11T17:09:43.380

> *是否可以通过调整编译器选项来解决问题？*

**不**，您无法通过调整来修复错误，这是编译器中的一个（非常具体的）错误。

> *[谁能告诉我] 这个问题是否在其他人身上重复出现？*

我可以重现代码，但仅限于 XE2 更新 4。

我无法在 XE3 中检查它（没有那个版本）。它在 XE4 中是固定的（根据评论）。

因此，让代码工作的唯一方法是：

一种。删除不需要的前向声明。
湾。使用不同版本的 Delphi。

# clojure - 在 Clojure 中重新定义记录的字段

> ID：11463889
> 
> 赞同：5
> 
> 时间：2012-07-13T03:53:13.963
> 
> 标签：clojure

在 Clojure 的喜悦中，它指出：

> 如果需要不同的字段，您甚至可以重新定义记录，从而动态地为您提供 Java 的编译性能

有人可以告诉我这是如何完成的吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T01:45:20.913

在第 9 章中，我们将介绍协议的定义以及对记录和类型`FIXO`的扩展。我们表明，可以动态地构建实现。事实上，我们从一条记录开始，扩展协议，然后定义一个类型并扩展到它。虽然我们不更改字段的数量，但我们确实更改了类型本身，并且一旦扩展，通过协议的所有调用都会解析为新类型（我们还必须将扩展重新定义为返回旧的基于记录的.`TreeNode``TreeNode``FIXO``TreeNode``FIXO``TreeNode``FIXO``FIXO``FIXO``nil``NodeType`

您可能不会在要部署的代码中执行此操作，但在试验时这是一种有用的技术。尝试浏览 FIXO 部分并随时检查类型。

# silverlight - 是否在 UI 线程上调用了 Silverlight 应用程序类构造函数？

> ID：11463893
> 
> 赞同：1
> 
> 时间：2012-07-13T03:53:32.970
> 
> 标签：silverlight, constructor, windows-phone-7.1, ui-thread

在 Silverlight for WP7 中，所有 UI 元素都在 UI 线程上构建，我注意到 Application 类构造函数也运行在同一个线程上。并且要构造的第一个 UI 元素（PhoneApplicationFrame）是在同一个线程上构造的。

所以我的问题是：确定该线程后，是否在 UI 线程上构造了 Application 类？还是第一个 UI 元素 PhoneApplicationFrame 的构造确定当前线程将是 UI 线程？

哪个是鸡，哪个是鸡蛋，如果你愿意的话。

还是完全是别的东西？

# iphone - 应用程序在前几秒运行缓慢？

> ID：11463898
> 
> 赞同：0
> 
> 时间：2012-07-13T03:54:32.647
> 
> 标签：iphone, ios, loading, frame-rate

我为 iphone 制作了一个游戏，我不确定如何“加载”游戏的各个组件。我创建了一个加载屏幕，它只是让游戏在后台运行几秒钟。通常，一旦程序运行了 10 秒左右，它就会变得更加流畅，并且帧速率会大大加快。但是，我不知道它为什么运行缓慢，我想知道是否有人可以就为什么会这样，以及如何在显示加载屏幕时以编程方式加载这些东西给我建议。提前致谢！

编辑：具体来说，我正在尝试加载一些`UIImageViews`and `UIVIews`，包括一个大背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T05:08:02.800

该应用程序需要足够的时间来加载 UI 组件，例如 imageview。这可能是您的问题背后的原因。还有一点需要注意的是，如果你在你的函数中做太多的事情`didFinishLaunchingWithOptions`，应用程序将被苹果拒绝。该应用程序应在 24 秒内启动。因此，最好显示加载屏幕并在后台进行活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:54:12.283

答：我发现问题只是我创建了太多某种类型的对象，这大大降低了帧速率。感谢大家的帮助！

# sitecore - Sitecore '无法从查询字符串中找到项目。'

> ID：11463899
> 
> 赞同：1
> 
> 时间：2012-07-13T03:54:46.360
> 
> 标签：sitecore, sitecore6, sitecore-dms, sitecore-ecm

我遇到了 Sitecore CMS 6.5 和 ECM 1.3.1 rev 111202 的间歇性问题。当用户打开来自 ecm 的电子邮件时 - 它没有反映在参与计划中，并且它发生在通过 ECM 发送的电子邮件中，在日志中错误消息'无法从查询字符串中找到项目。[ID 为“{840DACC9-60C1-4705-BCAC-D188BD7D2AD8}”显示。该项目存在于后端（可以通过上面的 GUID 找到）以及 Sitecore 主数据库中。通过 fiddler 检查对服务器的请求表明该 url 的结构正确：

myurl/sitecore/RegisterEmailOpened.aspx?sc_itemid=%7b840DACC9-60C1-4705-BCAC-D188BD7D2AD8%7d&sc_camp=FBCF7F99F5C74F67BD8D976A7C16B7A1&ec_as=FA987FCE345347D4BA1C5584455A3AB5

我检查并重新检查了数据库连接字符串，但一切似乎都是正确的。这让我卡了一段时间，所以任何帮助表示赞赏。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T06:02:04.987

显示错误消息是因为该项目未发布到 Web 数据库。您可以将其视为 ECM 错误。但它似乎并不影响在参与计划中移动接收者的过程。尝试发布某条消息并再次检查。

# xml - 如何修复此 xml 节点合并以使用 xslt 保留所有唯一属性？

> ID：11463900
> 
> 赞同：0
> 
> 时间：2012-07-13T03:55:00.333
> 
> 标签：xml, xslt

我有这个输入文件：

```
<root> 
    <library id="L1">
        <shelf1 id="1">
            <book id="1" action="borrow">
                <attributes>
                    <user>John</user>                    
                </attributes>
                <other1>y</other1>
            </book>  
            <book id="1" action="extend">
                <attributes>
                    <user>Woo</user>           
                    <length>3</length>
                </attributes>
                <other2>y</other2>
            </book>  
            <book id="1" action="extend">
                <attributes>
                    <length>2</length>
                    <condition>ok</condition>
                </attributes>
                <other3>y</other3>
            </book>
            <book id="2" action="borrow">...</book>
        </shelf1>
        <shelf2>...</shelf2>
    </library>
</root> 
```

预期输出：

```
<root> 
    <library id="L1">
        <shelf1 id="1">
            <book id="1" action="borrow">
                <attributes>
                    <user>Woo</user>           
                    <length>2</length>
                    <condition>ok</condition>
                </attributes>
                <other1>y</other1>
                <other2>y</other2>
                <other3>y</other3>
            </book>
            <book id="2" action="borrow">...</book>
        </shelf1>
        <shelf2>...</shelf2>
    </library>
</root> 
```

我的 XSL：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="library/*/*[1]">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <attributes>
                <xsl:for-each-group select="attributes/*" group-by="name()">
                    <xsl:sort select="current-grouping-key()"/>
                    <xsl:apply-templates select="."/>
                </xsl:for-each-group>
            </attributes>
            <xsl:apply-templates select="*[not(self::attributes)]"/>
        </xsl:copy>            
    </xsl:template>

    <xsl:template match=
      "library/*/*
        [@action='extend' and following-sibling::*[1][@action='extend']
       or preceding-sibling::*[@action='borrow']]"/>
</xsl:stylesheet> 
```

对于每个节点`action=borrow`后跟一个或多个节点`action=extend`

*   将其合并到带有 的节点`action=borrow`。
*   将孩子合并`attributes`在一起，使其具有兄弟姐妹的所有独特属性和最新值。
*   保持其他孩子不变

请让我知道如何使用 XSLT 2.0 修复此转换？

非常感谢。

亲切的问候，约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:11:21.450

You've asked a number of similar questions. Maybe it's time to buy a book and spend a couple of days reading? This is probably the last time I am going to answer a similar question from you. You should be able to learn from answers so that you never have to ask similar questions. If you are not learning, you have to ask yourself: "What is holding you back?"

Any way, lets have a look at this style-sheet. In the explanation, I will refer to points as numbers within xml or xpath comments. For example point 1 is demarcated *<!-- 1 -->* or if inside an xpath expression, then *(: 1 :)* . Obviously, remove the comments for production.

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:fn="http://www.w3.org/2005/xpath-functions"
  xmlns:John="http://stackoverflow.com/questions/11463900"
  exclude-result-prefixes="xsl xs fn John">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:strip-space elements="*" />

 <xsl:template match="@*|node()">
  <xsl:copy> 
   <xsl:apply-templates select="@*|node()" />
  </xsl:copy> 
 </xsl:template>

 <xsl:template match="*[starts-with(local-name(),'shelf')]   (: 1 :)">
  <xsl:copy>
   <xsl:apply-templates select="@*" />

    <!-- 2 -->
   <xsl:apply-templates select="
     book[@action='extend']                                  (: 3 :)
         [not( preceding-sibling::book[@action='borrow'])]   (: 4 :)" />

    <!-- 5 -->
   <xsl:for-each-group
    select="book[@action='borrow']     (: 6 :)
             |                         (: 7 :)
            book[@action='extend']
                [preceding-sibling::book[@action='borrow']]   (: 8 :)"
    group-starting-with="book[@action='borrow']">
     <xsl:for-each select="current-group()[1]">
      <xsl:copy>                                            <!-- 9 -->
       <xsl:apply-templates select="@*" />
        <xsl:call-template name="merge-books-deeply">       <!-- 10 -->
         <xsl:with-param name="books" select="current-group()" />
         <xsl:with-param name="name-path" select="()" />
        </xsl:call-template>
      </xsl:copy>
     </xsl:for-each>     
   </xsl:for-each-group>

   <xsl:apply-templates select="                              (: 11 :)
     node()[ not( self::book[@action=('borrow','extend')])]" />

  </xsl:copy>
 </xsl:template>

<xsl:function name="John:children-on-path" as="element()*">
 <xsl:param name="base" as="element()*" />     <!-- 12 -->
 <xsl:param name="path" as="xs:string*" />     <!-- 13 -->
 <xsl:choose>
  <xsl:when test="fn:empty($base)">
   <xsl:sequence select="()" />
  </xsl:when>
  <xsl:when test="fn:empty($path)">
   <xsl:copy-of select="$base/*" />           <!-- 14 -->
  </xsl:when>
  <xsl:otherwise>
   <xsl:sequence select="John:children-on-path(
     $base/*[name()=$path[1]],                      (: 15 :)
     $path[position() ne 1])" /> 
  </xsl:otherwise>  
 </xsl:choose>
</xsl:function>

<xsl:template name="merge-books-deeply">
 <xsl:param name="books" as="element()*" />
 <xsl:param name="name-path" as="xs:string*" />
  <xsl:for-each-group
      select="John:children-on-path($books,$name-path)"
      group-by="name()">                                <!-- 16 -->                 
   <xsl:for-each select="current-group()[last()]" >     <!-- 17 -->
    <xsl:copy>
     <xsl:apply-templates select="@*" />
        <xsl:call-template name="merge-books-deeply">   <!-- 18 -->
         <xsl:with-param name="books" select="$books" />
         <xsl:with-param name="name-path" select="$name-path,name()" />
        </xsl:call-template>
     <xsl:apply-templates select="text()" />        
    </xsl:copy>
   </xsl:for-each>
  </xsl:for-each-group>
</xsl:template>

</xsl:stylesheet> 
```

## Explanation

1.  We start with the template for shelf nodes. It's unfortunate that you didn't just make the shelf node name constant. It would have made the match expression much simpler then. We copy the shelf node and any attributes.
2.  Now books are going to be merged according to some rules. So the books that get merged together are a group. By your stated merge rules, a group of books are all the books that start with a borrowed book and include following extended books. The natural candidate to achieve this will be the xsl:for-each-group instruction on borrowed and extended books, with @group-starting-with set to the head borrowed book (points 5 through to 8). There is a slight problem with **xsl:for-each-group** in that if you have any orphaned books, that is to say extended books not preceded by a borrowed book, then these will be the first group. We don't want this because it doesn't fit the merging rules. So first we just exclude them from grouping (see point 8) and process as normal any orphaned books at point 2.
3.  The predicate here selects the extended books.
4.  ... and this one selects the orphaned books
5.  Now we group the books of the shelf into mergeable groups
6.  Definitely if a book is borrowed it is in a group (In fact it will be the head of the group)
7.  and also we need to include the extended books that follow
8.  but exlcude the orphans
9.  current-group() at this point selects a group of mergeable books. The head of this sequence, current-group()[1] is the borrowed book that starts the group. We select it and copy it and its attributes.
10.  Now for the merging fun! It appears from your sample data that your are merging at two levels, to wit, nodes named like 'other1' and children of the node named 'attributes'. While your intentions are not clear as to how far this goes, I have taken the most liberal interpretation, which is to say that you want all child-of-book elements merged recursively to infinite depth. To do this we are going to need and call recursively a named template. The job of merge-books-deeply is to merge a set of books ($books) along some element path ($name-path). $name-path will start out as empty. It will then have values like ('attributes'),('attributes','user') and ('other1').
11.  At this point, we are still in the shelf, but we have completed our book merging. There may be non-book children or other strange things that didn't take part in the merging. Since they might have value, we copy them here.
12.  Now we need a support function to find all the merge-able nodes of our merge group at a given relative path from the shelf. This is John:children-on-path(). It takes two parameters. The $base is the nodes to be merged and
13.  $path is the path to navigate down from them. The function returns the sequence of nodes which are the children of $base descended by $path. For example if $base was /root and $path was ('library'), then John:children-on-path() should return shelf1 and shelf2\. The function is defined recursively. First we take care of the trivial cases, then if not trivial we navigate one step down in the path, and eliminate the step that we have just taken from the next path and call continue until we have traversed the entire path.
14.  Once we find the merge-able nodes in the group, we do a new grouping. We group them by name. For example, all the user nodes is one group and then all the length nodes is another.
15.  Once we have got a group, say all users, there we cant copy them all - that the whole point of merging. So we pick one to prevail as the value for the whole group. In the sample data, the OP has chosen the last value. So that's what we do. We select that element, copy it and its attributes.
16.  And now we may have to merge again at another level. So we recurse back into the same template but with out path extended to include the new step that we have just taken.

## Research for John

1.  Google for xsl:for-each-group and do some reaing. Here is a couple of good ones.
    *   [http://www.xml.com/lpt/a/1314](http://www.xml.com/lpt/a/1314)
    *   [http://www.xmlplease.com/xmltraining/xslt-by-example/examples/for-each-group_1.html](http://www.xmlplease.com/xmltraining/xslt-by-example/examples/for-each-group_1.html)
    *   [http://www.w3.org/TR/xslt20/#xsl-for-each-group](http://www.w3.org/TR/xslt20/#xsl-for-each-group)
2.  Buy an XSLT book and read it. There are plenty to choose from.

# matlab - 转换数字格式

> ID：11463907
> 
> 赞同：0
> 
> 时间：2012-07-13T03:56:46.013
> 
> 标签：matlab, formatting

我无法理解 Matlab 生成的数字。e 是什么意思？以及如何将这些数字转换为 int？这是矩阵 x=[x1, x2,x3,x4,x5,x6,x7,x8] 的答案

```
ans =

  1.0e+004 *

   -0.0000
   -0.6340
   -0.3660
   -0.8966
    0.6340
    1.0000
   -0.7321
    0.6340 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T04:05:14.703

`1.0e+004`手段`1.0*10^4`。_

使用 int32(x) 进行投射，根据您的目标精度，您还可以使用 int16(x) 或 int64(x)。查看文档[http://www.mathworks.de/help/techdoc/ref/int32.html](http://www.mathworks.de/help/techdoc/ref/int32.html)

也进行了四舍五入。

# asp.net-mvc - ProfileBase.Save() 在哪里存储我的数据？

> ID：11463908
> 
> 赞同：1
> 
> 时间：2012-07-13T03:56:52.787
> 
> 标签：asp.net-mvc

ProfileBase.Save() 在哪里存储我的数据？

我创建了一个自定义配置文件，它看起来像这样

```
public class UserProfile : ProfileBase
{
        public static UserProfile GetUserProfile(string username)
        {
            return Create(username) as UserProfile;
        }

        public static UserProfile GetUserProfile()
        {
            return Create(Membership.GetUser().UserName) as UserProfile;
        }

        [SettingsAllowAnonymous(false)]
        public string Description
        {
            get { return base["Description"] as string; }
            set { base["Description"] = value; }
        }

        [SettingsAllowAnonymous(false)]
        public string Location
        {
            get { return base["Location"] as string; }
            set { base["Location"] = value; }
        }
    } 
```

我的 web.config 看起来像这样

```
<profile inherits="TaskBoardAuth.Models.UserProfile">
  <providers>
    <add name="DefaultProfileProvider" 
         type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" 
         connectionStringName="DefaultConnection" 
         applicationName="/" />
  </providers>
</profile>

<add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-TaskBoardAuth-20120711211831;Integrated Security=SSPI" /> 
```

我可以看到它重新创建了数据库“aspnet-TaskBoardAuth-20120711211831”（如果我删除它），我写了一个方法来为我的用户保存一些测试数据到描述中，果然它保存了，但我不能一辈子我弄清楚在哪里？我认为它会在配置文件表中，但事实并非如此。我知道它没有把它放在饼干里，因为我把它们擦掉了。我难住了。许多谷歌搜索未能给我答案。

如果有人可以请让我知道这将规则！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:35:02.693

嗯，这确实将数据存储在我预期的 Profiles 表中 - 不知道前几天晚上发生了什么。撒旦独角兽在哪里试图摧毁我的生活？这也许是可能的。

# c++ - 图像处理 - 2 个图像之间的差异

> ID：11463909
> 
> 赞同：2
> 
> 时间：2012-07-13T03:57:15.473
> 
> 标签：c++, opencv, computer-vision, image-manipulation

我正在尝试使用 Opencv 找出 2 个图像之间的区别。代码如下：

```
#include "cv.h"
#include "highgui.h"
#include <stdio.h>
#include<iostream>

int main()
{
char a,b;
cv::Mat frame;
cv::Mat frame2;
VideoCapture cap(0);
if(!cap.isOpened())
{
    cout<<"Camera is not connected"<<endl;
    getchar();
    exit(0);

}
Mat edges;
namedWindow("Camera Feed",1);
cout<<"Ready for background?(y/Y)"<<endl;
cin>>a;
if(a=='y'||a=='Y')
{
cap>>frame;
cv::cvtColor(frame,frame,CV_RGB2GRAY);
cv::GaussianBlur(frame,frame,cv::Size(3,3),2.00,0,BORDER_DEFAULT);
}

cout<<"Ready for foreground?(y/Y)"<<endl;
cin>>b;
if(b=='y'||b=='Y')
{
cap>>frame2;
cv::cvtColor(frame2,frame2,CV_RGB2GRAY);
cv::GaussianBlur(frame2,frame2,cv::Size(3,3),2.00,0,BORDER_DEFAULT);
}

cv::absdiff(frame,frame2,frame);

imwrite("img_bw.jpg",frame);

return 0;
} 
```

代码运行良好，但输出不像我想要的那样完全黑白。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:25:27.613

您给出的代码将输出与两个图像之间单个像素的差异相对应的灰色阴影。即使在没有改变的元素之间也总会有一些小的差异，只是因为相机传感器的噪声或可变性。如果您需要纯黑白，则需要选择差异显着的阈值，并将低于该阈值的每个像素转换为 0，并将高于阈值的所有像素转换为 255。

# android - Android：StaleDataException - 在冰淇淋三明治操作系统上崩溃

> ID：11463911
> 
> 赞同：0
> 
> 时间：2012-07-13T03:57:29.997
> 
> 标签：android, cursor, staledataexception

我对冰淇淋三明治操作系统有疑问。当暂停和恢复应用程序时，我们的应用程序在以前的操作系统上运行良好。当我在冰淇淋三明治上使用时，当我试图从后台恢复活动时它崩溃了。

它给了我一个错误，说关于尝试访问已关闭的光标的 StaleDataException。当我在模拟器上尝试时，它没有在以前的操作系统上发生。当我在模拟器上使用新操作系统时，会发生此错误。

这非常令人沮丧，因为我不知道它是从哪里引起的。我正在使用 managedQuery 来查询图库中的缩略图。我听说它已被弃用并改用 CursorLoader。我不确定这是不是这个原因，但我认为新操作系统也应该与旧操作系统兼容，所以使用 managedQuery 应该没问题。正如它提到使用 CursorLoader 一样，旧操作系统是否无法正常运行。

有没有人遇到过这个问题并得到了解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:39:00.783

也许不是你的情况，但我在使用 managedQuery 时遇到了这样的问题，因为我手动关闭了游标。

正如[developer.android.com 上的 ManageQuery 定义中](http://developer.android.com/reference/android/app/Activity.html#managedQuery(android.net.Uri,%20java.lang.String%5b%5d,%20java.lang.String,%20java.lang.String%5b%5d,%20java.lang.String))所述，活动管理由 managedQuery 返回的游标的生命周期，您不应手动关闭游标。

希望能帮助到你

# java - 手动点击一个按钮，浏览器转到一个新的 url；但是当我使用 webdriver 运行它时，它会打开一个新的浏览器

> ID：11463913
> 
> 赞同：2
> 
> 时间：2012-07-13T03:57:37.447
> 
> 标签：java, browser, internet-explorer-8, webdriver, selenium-webdriver

当我手动单击一个按钮时，浏览器（IE 8）会转到一个新的 url；但是当我使用 webdriver 运行它时，它会打开一个新的浏览器（IE 8）。如何在不打开新浏览器的情况下使其转到新网址？

```
driver.get(url);
driver.findElement(By.linkText(linkText)).click();
switchToFrame(frameName);
WebElement parent_element = driver.findElement(By.xpath(parent_xpath));
WebElement child_element = driver.findElement(By.xpath(child_xpath));
Actions action = new Actions(driver);
action.moveToElement(parent_element).build().perform();
child_element.click(); //it opens a new browser if i run webdriver 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:54:56.120

答案有点老套，我会说，您可以尝试 String hrefMe=driver.getAttribute("href") 为您的链接。然后 driver.get(hrefMe); 它不是点击，而是完全按照您想要的方式进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:19:57.263

我使用此机制通过获取与 xpath 关联的 href 来停止 selenium/webdriver 打开新窗口。然后您可以使用 selenium.open 或 driver.get 在同一窗口中打开 url，然后您就不必处理多个窗口。这是示例代码：

字符串 Xpath = "/html/body/div/div[2]/a";
字符串 href = selenium.getAttribute("xpath=" + Xpath+ "@href");

selenium.open(href); // 将打开 baseURL/href

希望能帮助到你。

# cryengine - “第三人称”目标（cryengine）上武器系统的武器术语助手

> ID：11463916
> 
> 赞同：0
> 
> 时间：2012-07-13T03:59:06.807
> 
> 标签：cryengine

我刚刚浏览了“SCAR.xml”武器项目示例，它非常容易用作制作新武器的参考。有一个问题让我对阻塞感到困惑。

```
 <accessories>
       <accessory name="Silencer">
          ...
          <muzzleflash>
             <firstperson effect="weapon_fx.scar.muzzle_flash.muzzle_flash_silenced_fp" helper="muzzle_flash_effect" time="0.1" />
             <thirdperson effect="weapon_fx.scar.muzzle_flash.muzzle_flash_silenced_tp" helper="weapon_term" time="0.1" />
          </muzzleflash>
          ...
       </accessory>
    </accessories> 
```

对于“ **muzzle_flash_effect** ”助手，“第一人称”目标的附件已在块中定义是有道理的。我令人困惑的问题是从未定义过链接到块的第二个元素的“**武器术语**”助手，并且第三人称目标（静态网格）也不包含名为“武器术语”的骨骼，它没有意义如何效果是否与“不存在”的助手相关联？

感谢帮助！

/埃德加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:44:31.407

解决方案：创建虚拟对象（在 3ds Max 中，Maya 的定位器）作为 Sandbox 中武器附件的替身。

以下是《孤岛危机》游戏中的助手列表：

```
 Attachment_top (for attachments at the top of the weapon)
    Attachment_bottom (for attachments at the bottom of the weapon)
    Attachment_side (for attachments at the side of the weapon)
    Magazine (for magazine only)
    Shells (for shells ejecting)
    Silencer_attach (for a silencer at the front of the weapon)
    Weapon_term (for muzzelflashes only)
    grenade_term (for muzzelflashes for grenade launchers) 
```

[第三人称武器](https://docs.cryengine.com/display/SDKDOC2/Third-Person+Weapons)。

/埃德加

# c# - 解压/压缩错误

> ID：11463920
> 
> 赞同：2
> 
> 时间：2012-07-13T03:59:35.213
> 
> 标签：c#, .net, gzipstream, compression

解压时出现错误

“输入不是有效的 Base-64 字符串，因为它包含非 base 64 字符、两个以上的填充字符或填充字符中的非空白字符。”

它压缩得很好，但不解压缩。我查看了许多其他具有相同问题的示例，我觉得我正在遵循所说的内容，但在解压缩时仍然一无所获。以下是压缩和解压方法：

```
 public static string CompressData(string data)
    {
       byte[] bffr = Encoding.UTF8.GetBytes(data);
        var mStream = new MemoryStream();
        using (var gZipStream = new GZipStream(mStream, CompressionMode.Compress, true))
        {
            gZipStream.Write(bffr, 0, bffr.Length);
        }

        mStream.Position = 0;

        var compressedData = new byte[mStream.Length];
        mStream.Read(compressedData, 0, compressedData.Length);

        var gZipBuffer = new byte[compressedData.Length + 4];
        Buffer.BlockCopy(compressedData, 0, gZipBuffer, 4, compressedData.Length);
        Buffer.BlockCopy(BitConverter.GetBytes(bffer.Length), 0, gZipBuffer, 0, 4);
        return Convert.ToBase64String(gZipBuffer);
    }

    public static string DecompressData(string compressedData)
    {
        byte[] gZipBffr = Convert.FromBase64String(compressedData);
        using (var mStream = new MemoryStream())
        {
            int dataLength = BitConverter.ToInt32(gZipBffr , 0);
            mStream.Write(gZipBffr , 4, gZipBffr .Length - 4);

            var buffer = new byte[dataLength];

            mStream.Position = 0;
            using (var gZipStream = new GZipStream(mStream, CompressionMode.Decompress))
            {
                gZipStream.Read(buffer, 0, buffer.Length);
            }

            return Encoding.UTF8.GetString(buffer);
        }
    }

 string s = CompressData(s2.Tostring()); 
```

其中 s2 是类型 XElement 字符串 pH = DecompressData(stream2)); 其中stream2是字符串类型..在数据库中它存储在nvarchar类型列中，同时压缩删除根标签。

第一次 xml 就像 peet 3/24/2012 Percent 33.3 10 下一次将另一个学生数据添加到现有 xml 中，这里每次压缩时我们都必须删除父标签。

```
 <student>
        <data>
       <name>peet</name> 
       <date>3/24/2012</date> 
       <field>Percent</field>
       <new>33.3</new> 
       <old>10</old> 
        </data>
    <data>
       <name>raaz</name> 
       <date>3/24/2011</date> 
       <field></field>
       <new>33.3</new> 
       <old>10</old> 
    </data>
        <data>
       <name>arya</name> 
       <date>3/24/2010</date> 
       <field></field>
       <new>33.3</new> 
       <old>10</old> 
    </data>
        </student> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:05:10.880

我认为您的 DecompressData 方法不太正确 - 它适用于小尺寸，但是当数据包含多个学生数据时，我认为它会失败，因为您的缓冲区中没有分配足够的空间。

一种可行的方法是这样（可能有比复制数组更好的方法，您确实应该使缓冲区大于 100，但我将其缩小以确保它循环几次以确保其正常工作）：

```
public static string DecompressData(string compressedData) 
{
    byte[] gZipBffr = Convert.FromBase64String(compressedData); 
    using (var mStream = new MemoryStream()) 
    { 
        mStream.Write(gZipBffr, 4, gZipBffr.Length - 4);      
        mStream.Position = 0;

        var bytes = new byte[0]; 
        using (var gZipStream = new GZipStream(mStream, 
                                               CompressionMode.Decompress)) 
        { 
            byte[] buffer = new byte[100];
            int read;
            while((read = gZipStream.Read(buffer, 0, buffer.Length)) > 0)
            {
                var newBytes = new byte[bytes.Length + read];
                Array.Copy(bytes, newBytes, bytes.Length);
                Array.Copy(buffer, 0, newBytes, bytes.Length, read);
                bytes = newBytes;
            }
        }
        return Encoding.UTF8.GetString(bytes); 
   }          
} 
```

如果我对您的理解正确，您正在将 base 64 编码的压缩 XML 存储在数据库（nvarchar 列）中，并且您想要将其取出、解压缩、添加节点、压缩并放回原处。

为了帮助你一点（也许），这里有一些我敲掉的代码来完成这个过程（除了数据库调用——你可以看到你可以把它们放在哪里）：

```
private static void UpdateStudent(XElement data, int studentId)
{
    XDocument student = ReadStudent(studentId);
    student.Root.Add(data);
    SaveStudent(studentId, student);
}

private static void SaveStudent(int studentId, XDocument data)
{
    string compressed = CompressData(data.ToString());
    SaveStudentData(studentId, compressed);
}

private static XDocument ReadStudent(int studentId)
{
    string data = GetStudentFromDatabase(studentId);
    XDocument ret;
    if (string.IsNullOrEmpty(data))
    {
        ret = XDocument.Parse("<student></student>");
    }
    else
    {
        string decompressed = DecompressData(data).TrimEnd('\0');
        ret = XDocument.Parse(decompressed);
    }
    return ret;
}

// These two methods would query the database but for demo, just store
// in a static member
private static string GetStudentFromDatabase(int studentId)
{ 
    return _data;
}

private static void SaveStudentData(int studentId, string data)
{
    _data = data;
}

private static string _data; 
```

然后打电话给我：

```
UpdateStudent(XElement.Parse("<data><name>peet</name><date>3/24/2012</date><field>Percent</field><new>33.3</new><old>10</old></data>"), 1);
UpdateStudent(XElement.Parse("<data><name>raaz</name><date>3/24/2011</date><field></field><new>33.3</new><old>10</old></data>"),1);
UpdateStudent(XElement.Parse("<data><name>arya</name><date>3/24/2010</date><field></field><new>33.3</new><old>10</old></data> "), 1); 
```

# php - 如何在显示时重新调整图像大小？

> ID：11463921
> 
> 赞同：0
> 
> 时间：2012-07-13T03:59:52.203
> 
> 标签：php, image, codeigniter, image-resizing

在网站上显示图像时是否可以调整图像大小？/图像上传后如何调整图像大小？

添加时，我将原始图像上传到原始文件夹并创建 1 个缩略图上传到拇指文件夹。但是在网站上，我需要在很多不同维度的地方显示图像。所以我需要重新调整图像的大小以显示所需的大小以避免图像缩小。

或者我是否需要在上传时为我需要的所有尺寸创建图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:49:45.203

如果您获得高度和宽度比并且以相同的比例动态地在新的高度和宽度中，则可以在不缩小图像的情况下重新调整图像大小。但是当您需要小图像时，如果您加载大图像并使用高度和宽度以小尺寸显示。这对用户来说是不必要的加载时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T05:00:55.757

当然，这是可能的。此外，这可能是最好的方法：根据请求创建必要的缩略图。如果您的网站处于开发阶段，您将永远猜不到明天将创建设计师的维度。您将一次又一次地返回上传功能以适应新设计。消除设计和逻辑之间的硬依赖是值得的。

我不确定codeignitor。无论如何，在你的模板中使用这样的东西：

```
class Image {

    public $filename;
    public $caption;

    /**
     * Return full path to image.
     * @return string path to file to make thumb
     */
    public function fullPath() {
        return "data/files/{$this->filename}";
    }

    /**
     * Renders HTML IMG for thumb of given size.
     * 
     * @param int $width max width, set to -1, if not important
     * @param type $height max height, set to -1, if not important
     * @return string html tag for image with correct width and height attributes
     */
    public function htmlTag($width, $height) {
        $t = $this->getThumb($width, $height);
        return "<img src=\"{$t}\" alt=\"{$this->caption}\" width=\"{$width}\" height=\"{$height}\" />";
    }

    /**
     * Get/create thumb image
     * @param int $width width of the image
     * @param int $height height of the image
     * @return string path to the image
     */
    public function getThumb(&$width, &$height) {
        $currentImage = $this->fullPath();

        $thumbFilename = md5($this->path . $width . $height) . '.png';

        $thumbDir = 'data/thumbs/';
        $thumbFilename = "{$thumbDir}/{$thumbFilename}";

        // thumb already done?
        if (is_file($thumbFilename)) {
            // get real size to create correct html img tag
            if ($width<0 || $height<0) {
                $size = getimagesize($thumbFilename);
                $width = $size[0];
                $height = $size[1];
            }
            return $thumbFilename;
        }

        $ext = strtolower(pathinfo($currentImage, PATHINFO_EXTENSION));
        if ($ext == 'jpeg' || $ext == 'jpg') {
            $source = imagecreatefromjpeg($currentImage);
        } else if ($ext == 'gif') {
            $source = imagecreatefromgif($currentImage);
        } else if ($ext == 'png') {
            $source = imagecreatefrompng($currentImage);
        }

        $currentWidth = imagesx($source);
        $currentHeight = imagesy($source);

        // the sizes which we really will apply (default setup)
        $realWidth = $width;
        $realHeight = $height;
        $realX = 0;
        $realY = 0;

        // decide regarding cutting
        // if all params > 0, cuttin will be done
        $cut = FALSE;
        if ($width > 0 && $height > 0) {
            $cut = TRUE;
        } else if ($width < 0) { // width is not important, set proportion to that
            $width = $realWidth = round($currentWidth * $height / $currentHeight);
        } else if ($height < 0) { // height is not imporant
            $height = $realHeight = round($currentHeight * $width / $currentWidth);
        }

        if ($cut) {
            $kw = $currentWidth / $width;
            $kh = $currentHeight / $height;

            $k = $kw < $kh ? $kw : $kh;

            $realWidth = round($currentWidth / $k);
            $realHeight = round($currentHeight / $k);

            if ($kh < $kw) {
                $realX = round(($realWidth - $width) / 2) * $k;
            } else {
                $realY = round(($realHeight - $height) / 2) * $k;
            }
        }

        $virtual = imagecreatetruecolor($width, $height);
        imagealphablending($virtual, false);
        $col = imagecolorallocatealpha($virtual, 0, 0, 0, 127);
        imagefill($virtual, 0, 0, $col);
        imagesavealpha($virtual, true);

        imagecopyresampled($virtual, $source, 0, 0, $realX, $realY, $realWidth, $realHeight, $currentWidth, $currentHeight);

        // create file
        imagepng($virtual, $thumbFilename);

        return $thumbFilename;
    }
} 
```

用法：

```
$image = new Image();
$image->filename = "image.jpeg"; // really stored in 'data/files/image.jpg', let's say 300x400px
$image->caption = "My Image";

// get thumb 50x50: left and right parts of image will be cut off
echo $image->htmlTag(50, 50);

// get thumb of width 100 (height does not matter, keep proportions)
echo $image->htmlTag(100, -1);

// get thumb of height 100 (width does not matter, keep proportions)
echo $image->htmlTag(-1, 100); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T05:01:16.233

Arun Jain 的答案以一种方便的方式解决了您问题的技术/实践方面。

更一般地说，当您处理此类计算机密集型任务时，大多数时候以懒惰的方式来做是个好主意。至少从CPU的角度来看。

原因是在实际请求给定图像*之前*，您永远不知道是否会以给定分辨率加载给定图像。一旦被请求，大多数时候在每个请求上重新计算它比存储它以供假设的以后使用更昂贵。然后，一种常见的设计是在请求时计算/调整图像大小（如果缓存中尚不可用），然后存储以供以后使用。

timthumb 库似乎可以很好地处理所有这些问题，因为我自己没有使用过它。

我在库中做了一些非常基本的检查，它似乎考虑到了安全性，但我想强调它被宣传为测试版软件。

# python - Numpy nd.array，ctypes，多处理

> ID：11463923
> 
> 赞同：1
> 
> 时间：2012-07-13T04:00:09.427
> 
> 标签：python, numpy, multiprocessing, python-2.6, gdal

多处理新手希望使用 numpy。

我有一个脚本，它分割图像并将图像的可变大小块创建为 numpy 数组。

```
np_array = gdal.ReadAsArray() 
```

过去我已经串行处理了这个数组，没有问题。从这里的许多帖子看来，我最好的选择是将数组转换为 ctypes，对其进行切片，然后将切片发送到多个 multiprocessing.Pool。我有一个要分割的多波段图像，所以下面的代码在 main()

```
 Open the dataset...
        Get the first band...
        Grab a small segment of that band (these are huge images) and open to nparray

        #Convert to ctypes to allow multiprocessing
        c_pointer = ctypes.POINTER(ctypes.c_byte) #Here I need a dict of gdal to ctypes conversions.
        shared_array = np_array.ctypes.data_as(c_pointer)
        shared_array.reshape(intervalx, intervaly) 

        def my_func(i, def_param=shared_array):
            #perform my stretch here
            pass

        pool = multiprocessing.Pool()
        pool.map(my_func, range(10))

        print shared_array 
```

从[SO - 链接](https://stackoverflow.com/questions/5549190/is-shared-readonly-data-copied-to-different-processes-for-python-multiprocessing)

我理解需要有 def 语句中间代码，因为我将 shared_array 作为参数传递。有没有更好的办法？

在这一点上，我的代码正在崩溃......很难。我错过了什么？这不是使用 numpy 数组处理并行处理类型的方法吗？

最后，这些是图像，我需要能够保持数组的顺序。这可能吗，还是我需要使用锁？如果是这样，来自 numpy 或多处理。

任何指向信息的链接都表示赞赏，试图学习如何在共享内存空间中处理多处理 numpy 数组。

PS 如果可能，我宁愿避免使用 numpy_sharedmem 模块，因为我想限制潜在用户的额外下载次数。

# android - 在 ICS 上使用充气城堡运行应用程序

> ID：11463924
> 
> 赞同：0
> 
> 时间：2012-07-13T04:00:12.187
> 
> 标签：android, security, android-4.0-ice-cream-sandwich, bouncycastle

我开发了一个使用充气城堡提供程序来生成密钥库的应用程序。在 Gingerbread（2.3.3）上一切正常，直到我用 ICS 更新了我的测试设备。现在，它无法找到充气城堡提供者。我得到了这个例外：

07-11 12:40:51.317 E/AndroidRuntime（8049）：引起：java.lang.NoClassDefFoundError：org.bouncycastle.jce.provider.BouncyCastleProvider

我对此进行了搜索，并发现在 ICS 中引入了信任库，我想知道充气城堡是否仍然可以在 ICS 中使用。我已经看到一些与充气城堡提供者相关的线程，但无法获得解决方案。请帮忙。

谢谢，迪帕克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:50:37.713

您必须在自己的 APK 中包含 BouncyCastle。您不能依赖该平台的 BouncyCastle 版本，因为它可能会在不同版本之间发生变化。

为了让自己更轻松，只需使用专为 Android 应用程序制作的[SpongyCastle包。](http://rtyley.github.com/spongycastle/)[另请参阅有关 SpongyCastle](https://stackoverflow.com/questions/6898801/how-to-include-the-spongy-castle-jar-in-android/7112272)的这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:03:14.213

尝试清理所有项目。

它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T04:31:36.163

您不仅需要担心存储类型是 BKS 而不是 JKS，还需要担心 BKS 格式的不同版本。我不是专家，所以不要把以下作为硬道理，但基于一些实验和[一些阅读](https://stackoverflow.com/questions/6933103/wrong-version-keystore-when-doing-https-call#7002670)，Android，至少在 ICS (api 15) 中使用了 Bouncy Castle 提供程序的 1.46 版本。同时 BounceCastle 的最新版本是 1.47，[不向后兼容](http://www.bouncycastle.org/wiki/display/JA1/Porting+from+earlier+BC+releases+to+1.47+and+later)

使用正确的格式 (BKS) 但错误的版本可能会给您错误：

```
Keystore format problem: Wrong version of key store. 
```

来自 Android 框架，或来自 keytool 程序：

```
java.io.IOException: Wrong version of key store. 
```

# c# - 将模型添加到实体应该是什么类型？

> ID：11463927
> 
> 赞同：1
> 
> 时间：2012-07-13T04:00:29.647
> 
> 标签：c#, entity-framework

我是 Entity Framework 的新手，对 C# 或 MVC3 不是很精通，但我正在努力。

我能够按照[本教程](http://mikesdotnetting.com/Article/105/ASP.NET-MVC-Partial-Views-and-Strongly-Typed-Custom-ViewModels)进行修改以满足我的特定需求，这对于列出项目非常有效。

现在我正在尝试使用相同的原理向我的实体添加一个新行。但是，我不太确定该怎么做。真的，我不明白的唯一部分是类应该是什么类型。

```
public ???? CreateNewCollection(long id, Collection collection) {
        var newCollection = new UserCollection {
            uid = id,
            CollectionName = collection.Name,
            Type = db.CollectionTypes.Where(t => t.CollectionTypeName == collection.Type).First().ctypeid,
            CreateDate = DateTime.Now
        };

        db.UserCollections.AddObject(newCollection);
        db.SaveChanges();

        return ???;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T06:03:10.457

这是一种方法，由于您正在执行一个操作并且您看起来不希望返回任何内容，您可以标记 ???? as `void` 并删除 return 语句。

这当然需要在一个类中，并且为了允许您在不实例化类的情况下调用该方法，您可以将该方法标记为静态。

所以 ：

```
 public static class MyCollectionRepo
    {
    public static void CreateNewCollection(long id, Collection collection) {
            var newCollection = new UserCollection {
                uid = id,
                CollectionName = collection.Name,
                Type = db.CollectionTypes.Where(t => t.CollectionTypeName == collection.Type).First().ctypeid,
                CreateDate = DateTime.Now
            };

            db.UserCollections.AddObject(newCollection);
            db.SaveChanges();
    }

  } 
```

# wpf - 我如何也可以使用 Mvvm Light Toolkit 将参数传递给新打开的窗口

> ID：11463928
> 
> 赞同：1
> 
> 时间：2012-07-13T04:00:47.503
> 
> 标签：wpf, mvvm

从这个线程[线程](https://stackoverflow.com/questions/3386349/how-to-open-a-new-window-using-mvvm-light-toolkit)

[我可以通过使用此评论](https://stackoverflow.com/a/3388241/987024)的消息打开新窗口，但我也想将参数传递给新打开的窗口。有什么想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:40:52.473

使用`NotificationMessage<T>`，无需继承自`NotificationMessage`.

例如（我在我的项目中使用 Telerik Docking 表单容器，所以你可以忽略 RadPane 的东西 - 希望你明白）

```
using GalaSoft.MvvmLight.Messaging;

public MainWindow()
{

    InitializeComponent();
    Messenger.Default.Register<NotificationMessage<MyEntities.Company>>(this, (c) => NotificationMessageReceived(c.Notification, c.Content));
}

private void NotificationMessageReceived (string msg, MyEntities.Company c)
{
   if (msg == "ShowCompany") 
   {
      var CompanyPane = new RadDocumentPane();

      CompanyPane.Header = c.Name; // I use the  Name property of my company entity here

      CompanyPane.Content = new Views.CompanySummaryView(); 
      this.radPaneGroup.AddItem(CompanyPane, DockPosition.Center);
   }
} 
```

在我想打开新窗口的视图模型中，我有这个方法，我从命令中调用它。这只是发送嵌入了公司实体的消息。

```
public void EditCompany()
{
    Messenger.Default.Send<NotificationMessage<MyEntities.Company>>(new NotificationMessage<MyEntities.Company>(Companies.FirstOrDefault(), "ShowCompany"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:10:17.520

创建一个继承 NotificationMessage 的自定义类并在其中设置您想要的内容并传递它，然后在视图侧将其转换回您的自定义类。我希望这将有所帮助。

# weather-api - 有没有天气api提供紫外线指数？

> ID：11463930
> 
> 赞同：5
> 
> 时间：2012-07-13T04:00:52.710
> 
> 标签：weather-api

我找不到任何提供紫外线指数的天气 api。

它存在吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-30T23:16:31.260

ePA有一个很好的。您可以按位置访问许多有趣的数据，包括紫外线指数。

[http://www.epa.gov/enviro/facts/ef_restful.html](http://www.epa.gov/enviro/facts/ef_restful.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:02:18.620

我们（weathertrends360.com）目前有一个具有紫外线指数的私人测试版 API。向 support@ 发送电子邮件，我们可以为您进行设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-13T07:44:20.687

检查[OpenUV - 全球紫外线指数预测 API](https://www.openuv.io)。

# linq - 通用 LINQ Select 实现

> ID：11463931
> 
> 赞同：0
> 
> 时间：2012-07-13T04:01:01.043
> 
> 标签：linq, entity-framework, entity-framework-4, repository

我正在尝试实现一个通用选择，我在我的存储库实现中使用了以下结构

```
 public IEnumerable<TEntity> Populate(Expression<Func<TEntity,bool>> predicate)
    {
        return (IEnumerable<TEntity>) _objectSet.Select(predicate).AsEnumerable();
    } 
```

这是我从我的业务逻辑中调用的

```
public IEnumerable<DTO.Category> Populatelist()
    {

        return _repository.Populate(predicate: category => new { category.CategoryID, category.CategoryName }).ToList();

    } 
```

但是应该作为 BTO.Category 对象的类别的行为与**CategoryID**和**CategoryName**不同，它的显示**无法解析符号**。

那么我是在做正确的事情还是错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:32:55.303

很好地找到了解决方案...签名应该是

```
List<TResult> Populate<TResult>(Expression<Func<TEntity, TResult>> predicate); 
```

Repository 类中的实现

```
public List<TResult> Populate<TResult>(Expression<Func<TEntity, TResult>> source)
{
        return _objectSet.Select(source).ToList();
} 
```

现在从业务逻辑中使用它，例如-

```
public IDictionary<int,string> Populatelist( )
{

    var expectedResult =_repository.Populate(category => new {category.CategoryID, category.CategoryName}).ToList();

    return expectedResult.ToDictionary(c => c.CategoryID, c => c.CategoryName);

} 
```

问题是因为返回类型是匿名的，所以在传递值时会产生问题，现在返回类型是列表类型的结果，所以没有转换错误..

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-13T04:09:43.730

您需要定义要在泛型方法中使用的泛型参数：

```
public IEnumerable<TEntity> Populate<TEntity>(Expression<Func<TEntity, bool>> predicate) 
```

然后，按如下方式使用它：

```
return _repository.Populate<DTO.Catrgory>(predicate: category => new { category.CategoryID, category.CategoryName }).ToList(); 
```

# google-maps-api-3 - 我可以从谷歌地图API获取城市的人口和区号吗

> ID：11463933
> 
> 赞同：1
> 
> 时间：2012-07-13T04:01:20.580
> 
> 标签：google-maps-api-3

我有这个代码

```
address = "11533"
geocoder.geocode({"address" : address}, function(results, status)
            {
                if(status == google.maps.GeocoderStatus.OK)
                {
                    map.setCenter(results[0].geometry.location);
                    var marker = new google.maps.Marker({
                        map: map,
                        position: results[0].geometry.location
                    });

                    var str = results[0].formatted_address + "";
                    var info = new google.maps.InfoWindow({
                        content : str
                    });
                    google.maps.event.addListener(marker, "click", function()
                    {
                        info.open(map, marker);
                    });
                }
                else
                    alert("Error in address"); 
```

我想添加有关城市人口及其区号的信息。有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T05:48:43.473

该信息（人口和区号）不作为 Google Maps API v3 的一部分提供。您将需要为此找到一个数据源（它可能在 FusionTables 中公开可用）。在美国，人口可从人口普查中公开获得。不知道从哪里得到区号。

# iphone - iOS 中的 CIColorPosterize

> ID：11463934
> 
> 赞同：1
> 
> 时间：2012-07-13T04:01:30.400
> 
> 标签：iphone, ios, cocoa-touch, uiimageview, core-image

CIColorPosterize 在 iOS 中可用吗？我将以下代码用于核心图像过滤器，但过滤器值始终为 0。棕褐色过滤器工作正常。我只是想知道 CIColorPosterize 在 iOS 中是否可用，如果是，我的代码中的问题是什么。感谢您的帮助。

-(void)imageDraw{

```
UIImage *image = [UIImage imageNamed:@"cat2.jpg"];

CIImage *beginImage = [CIImage imageWithCGImage:[image CGImage]];
CIContext *context = [CIContext contextWithOptions:nil];
 CIFilter* posterize = [CIFilter filterWithName:@"CIColorPosterize"];
[posterize setDefaults];
[posterize setValue:[NSNumber numberWithDouble:8.0] forKey:@"inputLevels"];
[posterize setValue:beginImage forKey:@"inputImage"];

CIImage *outputImage = [posterize outputImage];

CGImageRef cgimg = [context createCGImage:outputImage fromRect:[outputImage extent]];
UIImage *newImg = [UIImage imageWithCGImage:cgimg];

imgVIew.image = newImg;
 ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];  

[library writeImageToSavedPhotosAlbum:[newImg CGImage] orientation:(ALAssetOrientation)           [newImg imageOrientation] completionBlock:^(NSURL *assetURL, NSError *error){  
    if (error) {  
        NSLog(@"error");  
    } else {  
        NSLog(@"url %@", assetURL);  
    }  
}];  

CGImageRelease(cgimg);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:32:34.517

在[这个页面上](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/uid/TP40004346)，他们列出了所有的`CIFilters`，他们列出了每个版本的 MacOS 和 iOS 可用，并且`CIColorPosterize`没有列出在 iOS 上可用。您也可以尝试`[+CIFilter filterNamesInCategory:]`使用该类别进行呼叫，`CICategoryColorEffect`看看您是否回到`CIColorPosterize`列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:34:17.723

***更新***

[CIColorPosterize 现在可用于 iOS 6](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIColorPosterize)

```
-(void)logAllFilters {
    NSArray *properties = [CIFilter filterNamesInCategory:
      kCICategoryBuiltIn];
    NSLog(@"%@", properties);
    for (NSString *filterName in properties) {
        CIFilter *fltr = [CIFilter filterWithName:filterName];
        NSLog(@"%@", [fltr attributes]);
    }
} 
```

# html - 文本字段css问题

> ID：11463936
> 
> 赞同：0
> 
> 时间：2012-07-13T04:01:46.897
> 
> 标签：html, css

我正在使用 html 5。我的表单中有一个输入字段，以下是代码

```
<input name="address" id="address" type="text" onFocus="if(this.value =='Address' ) this.value=''" onBlur="if(this.value=='') this.value='Address'" value="Address"> 
```

输入字段的css是

```
input#address{ width:411px; border:0px; height:50px; line-height:50px; padding-left:15px;} 
```

问题是宽度。文本字段宽度与 Firefox 和 ie 7 不同。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:14:37.593

浏览器有自己的默认样式，如果您希望您的页面在浏览器中看起来相同，请使用[css 重置](https://stackoverflow.com/questions/116754/best-css-reset)，然后手动设置元素的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:07:22.010

嗨，现在曾经像这样显示属性

```
input#address{
display:block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T04:11:46.847

尝试重置输入元素的填充和边距

```
input {
    margin:0;
    padding:0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T04:12:42.297

我不建议删除填充或边框，因为这会改变要求。

原因是不同的浏览器有不同的box modal

有时向页面添加 doctype 可以解决问题，但情况并非总是如此。

您可以使用以下代码确保您的框在所有主要浏览器中显示相同。

```
input#address{
  width:411px;
  border:0px;
  height:50px;
  line-height:50px;
  padding-left:15px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  -ms-box-sizing: border-box;
  -o-box-sizing: border-box;
  box-sizing: border-box;
} 
```

# ruby-on-rails - Rails、地理编码器和附近

> ID：11463940
> 
> 赞同：7
> 
> 时间：2012-07-13T04:02:16.747
> 
> 标签：ruby-on-rails, ruby

我在尝试根据与用户的接近程度显示某些位置时遇到了一个小问题。在我的控制器中，我有这个：

```
 if User.find(current_user)
    @user = User.find(current_user)
    @locations = Location.near(params[:latitude => @user.latitude, :longitude => @user.longitude], 50, :order => :distance)
  end 
```

用户存储了经纬度。我想我在 Location.near 行中没有正确的参数，但我不知道它们应该是什么。

任何帮助，将不胜感激。

干杯!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T05:09:21.100

让我们试着重写一下，current_user 应该已经设置好了，不需要调用 User.find。然后看起来你可以通过 lat,long 作为一个数组

```
 @locations = Location.near([current_user.latitude, current_user.longitude], 50, :order => :distance) 
```

[http://railscasts.com/episodes/273-geocoder](http://railscasts.com/episodes/273-geocoder)

[http://www.rubygeocoder.com/](http://www.rubygeocoder.com/)

[https://github.com/alexreisner/geocoder](https://github.com/alexreisner/geocoder)（查看自述文件）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-17T19:31:06.057

你可以定义你想要搜索的距离，记住传递单位：

```
@locations = Location.near([current_user.latitude, current_user.longitude], 50, units: :km) 
```

# python - OpenGL：相机 theta 和缩放

> ID：11463945
> 
> 赞同：1
> 
> 时间：2012-07-13T04:03:03.700
> 
> 标签：python, math, opengl, pygame

研究了另一个 3D GL 游戏的代码，我决定尝试创建一个非常简单的、四处走动的东西。

一切似乎都可以正常工作，但仅在一个轴上。当一个方向前进和后退时，一切都很好。但是，如果您转身 90 度并开始向前/向后走，向后将起到向前和向后一样的作用。

这是地面绘图代码：

```
def drawground(self):
        glPushMatrix()

        glTranslate(-1, -1, -3)
        glRotate(90, True, False, False)

        glBegin(GL_QUADS)
        glColor(0.6, 0.6, 0.6)
        glVertex(0, 0)
        glVertex(0, self.winmain.world.xlen)
        glVertex(self.winmain.world.ylen, self.winmain.world.xlen)
        glVertex(self.winmain.world.ylen, 0)
        glEnd()

        glPopMatrix() 
```

搬家代码：

```
if pygame.key.get_pressed()[K_w]:
                self.campos[0] -= 0.005*math.sin(self.camtheta * 3.14159 / 180)
                self.campos[1] -= 0.005*math.cos(self.camtheta * 3.14159 / 180)

if pygame.key.get_pressed()[K_s]:
                self.campos[0] += 0.005*math.sin(self.camtheta * 3.14159 / 180)
                self.campos[1] += 0.005*math.cos(self.camtheta * 3.14159 / 180) 
```

并且，相机 theta 旋转：

```
if event.type == MOUSEMOTION:
                    self.camtheta -= 2 * event.rel[0] #Subtracting 2 * the relative moved pixels from the last position. 
```

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:21:03.620

您没有提供太多细节，但无论如何，我建议您研究一个令人惊叹的 glu API，称为`gluLookAt(..)`. 它需要9个参数，3个位置，3个方向，3个方向。

导入 GLU：

```
from OpenGL.GLU import * 
```

并说：

```
gluLookAt(eyeX, eyeY, eyeZ, centerX, centerY, centerZ, upX, upY, upZ) 
```

对于一种绕行的东西，upX,upY, upZ 将是 0,1,0。

此处的文档：http:
[//pyopengl.sourceforge.net/documentation/manual-3.0/gluLookAt.html](http://pyopengl.sourceforge.net/documentation/manual-3.0/gluLookAt.html)

# c# - Linq 失败 - System.Data.Linq.dll 中出现“System.Data.SqlClient.SqlException”类型的第一次机会异常

> ID：11463951
> 
> 赞同：2
> 
> 时间：2012-07-13T04:04:03.603
> 
> 标签：c#, .net, linq

我不明白为什么我会收到这个错误。我也习惯于 .NET 抛出一个我可以调试的实际错误。相反，我在输出控制台中得到以下内容：

```
A first chance exception of type 'System.Data.SqlClient.SqlException' occurred in System.Data.Linq.dll 
```

我已经多次重新创建应用程序和数据库。奇怪的是，它第一次工作（它是一个不同的应用程序和不同的数据库，但过程是相同的）。

1.  创建 4.0 窗体应用程序
2.  通过 vs 创建一个 .mdf 数据库
3.  在数据库上创建表
4.  创建 linq to sql 文件并将表拖到上面。
5.  输入linq代码并运行代码。我得到了已经提到的错误。

实际代码是：

```
// i changed the variable names before posting so if I spelled cats wrong thats not the problem
static public void Insert(Cat[] cats)
    {
        using (Cats.lsMapDataContext db = new lsMapDataContext(Global.db_path))
        {
            foreach (Cat cat in cats)
            {
                history history = new history();
                history.name = cats.name;
                history.breed = cats.breed;
                db.histories.InsertOnSubmit(history);
                db.SubmitChanges(); // i silently fail here because silent fails are cool and helpful
            }

        }
    } 
```

为什么它可能会这样做有一些常见的原因吗？该数据库是在 Documents 中为我所在的用户创建的（此计算机/管理员只有一个）。据我所知，没有特殊的访问权限。

有没有办法挂钩该 dll，以便在它崩溃时对其进行调试？一个pdb什么的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T05:22:53.917

通过检查`.InnerException`（或等） `.InnerException`，`.InnerException`您应该能够看到实际错误。

你可以这样做：

*   直接在 Visual Studio 中调试代码并检查 .InnerException；或者
*   添加`catch`语句并将错误写入控制台；

    ```
    static public void Insert(Cat[] cats)
    {
     try {
        //Your code here
     } catch (Exception ex ) {
        Exception ex2 = ex;
        while( ex2.InnerException != null ) {
             ex2 = ex2.InnerException;
        }
        Console.WriteLine( ex.InnerException );
        throw;
     }
    } 
    ```

# jquery - 如何在不使用 addClass 的情况下将 jQuery CSS 更改应用于尚未创建的元素？

> ID：11463952
> 
> 赞同：3
> 
> 时间：2012-07-13T04:04:06.473
> 
> 标签：jquery, css, resize, append, phpfox

我想知道是否有一种优雅的方式来实现这一点。

我的问题：我需要更改一些已经创建的 div 元素的一些 CSS 属性，并将这些更改也应用于同一类的新创建的元素。

例如：

CSS：

```
.myDiv{left:100px} 
```

HTML：

```
<div id="decode_me">
    <div id="div1" class="myDiv">Drink</div>
    <div id="div2" class="myDiv">More</div>
</div> 
```

JS：

```
$('.myDiv').css('left','50px');
$('#decode_me').append('<div id="div3" class="myDiv">Ovaltine</div>'); 
```

前两个 div 将设置为 50，而第三个将回退到 css 特定的 100px。我正在根据一些窗口调整大小事件设置左和宽度，因此似乎创建另一个将左设置为 50 的类不起作用，因为数字会改变。

我查看了 .live 和 .on ，我相信它们需要某种事件来触发它们。每次添加新元素时都没有调用函数来调整所有内容的大小，有没有一种巧妙的方法来做到这一点？我的工作似乎有点大锤。

实际使用：使用 jQuery 1.7.1 在类似 CMS 的框架 (phpFox) 中工作，我创建了一个基本上是表格的东西。这是一堆随着新行的添加而滚动的行。在每一行中，我有 7 个“列”，其中两个总是 50px 宽。其余部分需要调整大小，因为“表格”可以在不加载页面的情况下设置为全屏。

如果有其他解决方案，我很乐意试一试。我从创建一个表格开始，但是除了随着新行的添加而向上滚动之外，样式的数量使它变得非常痛苦。我尝试过使用相对定位的 div，但遇到了文本溢出的问题。我现在已经设置了“行”相对值，所有“列”div 都设置为绝对值，但正如你所看到的，这也带来了很多问题。

我想出的每个解决方案都有些混乱，我认为必须有一种简单的方法来完成我只是想念的这个问题。PHP 的交易员。谢谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T04:08:27.353

我想你可能想使用 liveQuery：[https ://github.com/brandonaaron/livequery](https://github.com/brandonaaron/livequery)

```
$('div').livequery(function() { 
    $(this).css({left: 100px})
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:24:24.597

我要做的是定义一个添加 CSS 的函数，立即调用该函数，然后在追加结束时触发该函数。尽管我在这里提到，在这里添加一个新类比动态更改 CSS 对性能更友好。

```
var myfunction = function() {
    $('.myDiv').css('left','50px');
};

myfunction();

$('#decode_me')
  .append('<div id="div3" class="myDiv">Ovaltine</div>')
  .trigger(myfunction()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:29:58.683

如上所述，livequery 将是一个选项，或者只是将其添加到加载元素的块中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T04:13:18.877

您不需要每次都调整*所有内容的大小 - 您可以将 jQuery 选择器传递给调整大小函数。*你仍然需要自己调用 resize() ，但这不会太糟糕：

```
function resize($obj) {
    $obj.css('left','50px');
}

// What you had originally
resize($('.myDiv'));

// Create the new element, resize it individually
var $newElem = $('<div id="div3" class="myDiv">Ovaltine</div>');
$('#decode_me').append($newElem);
resize($newElem); 
```

# wpf - 在wpf中最大化窗口时如何使网格或画布居中？

> ID：11463957
> 
> 赞同：0
> 
> 时间：2012-07-13T04:04:32.060
> 
> 标签：wpf, xaml

我在 wpf 中创建一个网格。当最大化窗口时网格大小增加。所以我想在最大化窗口时使网格居中增加网格大小。这里是我写的代码。

```
<Grid x:Name="LayoutRoot">
    <Grid Margin="188,69,179,172" Background="#FF1B9B7B"/>
    <Rectangle Fill="#FF971A92" Height="70" Margin="233,139,315,0" Stroke="Black" VerticalAlignment="Top"/>
    <Rectangle Fill="#FF97311A" Height="70" Margin="0,139,214,0" Stroke="Black" VerticalAlignment="Top" HorizontalAlignment="Right" Width="84"/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T04:17:54.363

```
<Grid x:Name="LayoutRoot">
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Grid Margin="188,69,179,172" Background="#FF1B9B7B" Grid.Row="1" Grid.Column="1" Width="100" Height="100"/>
    <Rectangle Fill="#FF971A92" Height="70" Margin="233,139,315,0" Stroke="Black" VerticalAlignment="Top"/>
    <Rectangle Fill="#FF97311A" Height="70" Margin="0,139,214,0" Stroke="Black" VerticalAlignment="Top" HorizontalAlignment="Right" Width="84"/>
</Grid> 
```

不要忘记为内部网格指定高度和宽度。我希望这会有所帮助。

# c# - 2 个项目 1 个解决方案分享课？

> ID：11463967
> 
> 赞同：2
> 
> 时间：2012-07-13T04:05:45.570
> 
> 标签：c#, visual-studio

我是 Windows 移动开发和 Visual Studio 的新手。

我正在开发一个网络服务以及一个移动应用程序。我有 1 个解决方案，但有 2 个不同的项目。

我在 Web 服务中创建了一个类（比如项目 1），但希望能够在移动应用程序中使用这个类（比如项目 2）。

我是否必须基本上创建它的副本并在其他项目中引用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T04:11:41.827

有两种可能的解决方案：

1.  创建第三个项目以包含共享类并将其作为引用添加到其他两个中。
2.  将类保存在单个文件中，但将其作为链接添加到每个项目中，如此[处](http://support.microsoft.com/kb/306234)所述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T04:09:32.697

不，您不需要创建副本。相反，`project1`在`project2`.

右键单击[References->Add Reference...] in `project2`，选择“Projects”选项卡，选择`project1`，然后单击[OK]。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T04:15:23.830

将你的通用类作为类库，并以 .dll 的形式保存

每当您需要该类时，只需将其引用添加到您的项目并使用它:)

这被称为重用 OOPS 的最佳特性之一

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-06T06:25:46.637

它违背了 SOA 的目的……它变成了紧密耦合的项目。一个不应该添加..两个不同的层..“添加为参考”。

# javascript - 在 knockoutJS 中从 observableArray 中删除 Self

> ID：11463970
> 
> 赞同：5
> 
> 时间：2012-07-13T04:05:58.457
> 
> 标签：javascript, arrays, knockout.js, ko.observablearray

我正在使用 knockoutjs 创建部门的树视图。每个节点旁边将有三个按钮：1）新建子节点（应用于它旁边的节点 2）删除（这会删除它旁边的节点，以及 3）复制，它复制节点及其所有子节点并创建一个新的父节点下的节点。

我已经按下新建按钮，现在我正在处理删除按钮。我似乎无法让它工作，而不是做任何有用的事情，它只是刷新了整个页面。这是代码：

看法：

```
<h2>Skill & Weight Divisions</h2>
        <span data-bind="text: tournamentname"></span><button data-bind="click: addDivision"><img src="new.png"/></button>
        <ul data-bind="template: { name: 'divisionTemplate', foreach: divisions }"></ul> 
```

模板：

```
<script id="divisionTemplate" type="text/html">
   <li data-bind="style: {'background-color':color}">
       <input data-bind="value: name"/><button data-bind="click: addDivision"><img src="new.png"/></button><button data-bind="click: $parent.removeDivision"><img src="remove.png"/></button><button data-bind="click: $parent.copyDivision"><img src="copy.png"/></button>
       <ul data-bind="template: { 'if': children, name: 'divisionTemplate', foreach: children }"></ul>
    </li>       
</script> 
```

查看模型和适当的辅助函数：

```
function division(id, name, filter, children) {
        this.id = ko.observable(id);
        this.name = ko.observable(name);
        this.filter = ko.observable(filter)
        if(children){
            this.children = ko.observableArray(children);   
        }else{
            this.children = ko.observableArray();   
        }
        this.addDivision = function(){
            this.children.push(new division("", "", ""));   
        }
        this.removeDivision = function(division){
            this.children.remove(division);
        }
        this.copyDivision = function(division){
            this.children.push(division);   
        }
        this.color = randColor();
    };
    function tournamentViewModel(){
        var self= this;
        self.tournamentname = ko.observable('NO NAME YET');
        self.districts = ko.observableArray([new district('Provo',1),new district('Salt Lake City',2),new district('St. George',3)]);
        self.district = ko.observable(self.districts()[0]);
        self.regions = ko.observableArray([new region('Utah',1),new region('Idaho',2)]);
        self.region = ko.observable(self.regions()[0]);
        self.location = ko.observable('WHEREVER YOU WANT');
        self.eventdate = ko.observable('');
        self.startTime = ko.observable('');
        self.image = ko.observable();
        self.flyer = ko.computed(function(){
            var flyerHTML = '<span style="text-align:center;padding:10px;"><h1>'+self.tournamentname()+'</h1><img src="'+self.image()+'"/><br/>';
            flyerHTML += 'District: ' + self.district().districtName + ' Region: ' + self.region().regionName+'<br><br>';
            flyerHTML += '<h2>WHEN: '+self.eventdate()+' '+self.startTime()+'</h2>';
            flyerHTML += '<h2>WHERE: '+self.location()+'</h2>';
            flyerHTML += '<img src="http://maps.googleapis.com/maps/api/staticmap?center='+encodeURI(self.location())+'&zoom=12&size=200x200&markers=color:blue%7Clabel:S%7C'+encodeURI(self.location())+'&maptype=roadmap&sensor=false"/>';
            return flyerHTML;
        }, self);
        self.clearImage = function(){
            self.image(''); 
        }
        self.tournamentID = ko.computed(function(){return 't_'+self.district()+'_'+self.region()+'_'+self.eventdate()}, self);
        self.pricingStructures = ko.observableArray([new pricingStructure(3,2.99), new pricingStructure(1,1.99)]);
        self.removePricingStructure = function(pricingStructure){
            self.pricingStructures.remove(pricingStructure); 
        }
        self.addPricingStructure = function(){
            self.pricingStructures.push(new pricingStructure("", ""));  
        }
        self.promoCodes = ko.observableArray();
        self.promoTypes = ['%','$'];
        self.removePromoCode = function(promoCode){
            self.promoCodes.remove(promoCode); 
        }
        self.addPromoCode = function(){
            self.promoCodes.push(new promoCode("", ""));    
        }
        self.divisions = ko.observableArray([new division(1, "Men","",[new division(2,"Gi"), new division(3,"No-Gi")])]);
        self.addDivision = function(){
            self.divisions.push(new division("", "", ""));  
        }

    }
    ko.applyBindings(new tournamentViewModel()); 
```

在这一切中我的主要问题是：有没有办法访问对象的父数组以便从数组中删除该对象？在此先感谢您的帮助！

编辑：这是一个 jsFiddle：http: [//jsfiddle.net/eqY7Z/](http://jsfiddle.net/eqY7Z/)但是它似乎根本不起作用。如果你们不能让它继续下去，我会附上我的网站的链接，这样你们就可以好好看看它了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:20:30.393

我接受了你的想法并做了一个[工作小提琴](http://jsfiddle.net/aCQNA/)，它的行为与你描述的完全一样。我不想尝试解决你的问题，抱歉。它有很多与您的问题没有直接关系的东西，而且这个解决方案足够通用，其他人应该能够使用它。如果您需要帮助调整它，请告诉我。

需要注意的一件事是克隆功能。您的复制功能不深，并且会导致多个节点指向同一个对象。如果您要更新节点值，它将传播到其克隆。Knockout 提供了一个方便的深拷贝 + 使用`ko.toJS`. 超级好用。

JS：

```
var Node = function(name, children) {
    var self = this;
    self.name = ko.observable(name || 'NewNode');
    self.children = ko.observableArray(
    ko.utils.arrayMap(children || [], function(i) {
        return new Node(i.name, i.children);
    }));
    self.newChild = function() {
        self.children.push(new Node());
    };
    self.removeNode = function(node) {
        self.children.remove(node);
    };
    self.copyNode = function(node) {
        var cloneNode = ko.toJS(node);
        self.children.push(new Node(cloneNode.name, cloneNode.children));
    };
};

//Example data removed for brevity, see fiddle
ko.applyBindings(new Node(data.name, data.children));​ 
```

HTML：

```
<button data-bind="click: newChild">NewNode</button>
<ul data-bind="template: { name: 'treeTemplate', foreach: children}">
</ul>

<script id="treeTemplate" type="text/html">
    <li>
        <input data-bind="value: name" />
        <button data-bind="click: newChild">New Child</button>
        <button data-bind="click: $parent.removeNode">Remove Node</button>
        <button data-bind="click: $parent.copyNode">Copy Node</button>
        <ul data-bind="template: { name: 'treeTemplate', foreach: children}"></ul>
    </li>
</script>
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:52:23.623

我能够在以下 jsFiddle 中创建代码的工作版本：http: [//jsfiddle.net/3eQNf/](http://jsfiddle.net/3eQNf/)。这似乎归结为两个主要问题：

1.  您在分区类中使用“this”关键字时遇到了上下文问题。添加 self 变量解决了这个问题。

2.  您需要添加一个根级分区并绑定到它的子级。这使得所有递归都按预期工作。这样做也消除了对您的锦标赛视图模型的 addDivision 方法的需求

另外，仅供参考，我需要为您的区域、区域和定价结构类添加存根，因为这些未包含在上面的示例代码中。希望这可以帮助。

# bash - 通过 VLC 部分保存视频流中的文件

> ID：11463972
> 
> 赞同：2
> 
> 时间：2012-07-13T04:06:24.343
> 
> 标签：bash, video-streaming, vlc

我使用 VLC 将视频流从相机保存到文件，如下所示：

```
cvlc -vvv rtsp://xxx.xxx.xxx.xxx/xxx --sout '#transcode{vcodec="h263"}:standart{mux="ts",access="file",dst="cam_XXX_hour_$(date +%H).ts"}' 
```

所以在一天广播结束时，我希望看到一些文件，比如：

```
cam_XXX_hour_05.ts
cam_XXX_hour_06.ts
....
cam_XXX_hour_23.ts
cam_XXX_hour_24.ts 
```

但事实并非如此。在 VLC 启动时，我有一个以第一个小时命名的大文件。我怎样才能得到想要的结果？任何 BASH 或 VLC/VLM 设置？（我打算将此脚本移植到 VLM 时间表）

即使不是按时间，也按最大文件大小..

谢谢。

PS 请不要在一天结束时拆分大文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:42:28.397

我没有找到这个问题的自动解决方案，但有一个关键的想法：

1.  使用启动文件创建 VLM 配置：

    启用了新的凸轮广播

    设置凸轮输入 rtsp://xxx:xxx@xxx.xxx.xxx.xxx:xxx/xxx

    设置凸轮输出#transcode{vcodec="h264"}:std{mux=ts,dst=/xxx/FIRST_FILE}

    控制凸轮播放

2.  通过 telnet 界面更改文件（通过 cron 或某些脚本）

    设置凸轮输出#transcode{vcodec="h264"}:std{mux=ts,dst=/xxx/SECOND_FILE}

    控制凸轮停止

    控制凸轮播放

更新 VLM 配置所需的两个控制命令。

# json - Struts Jquery 插件 - 显示 json 数据的网格，网格显示在模态对话框中

> ID：11463973
> 
> 赞同：0
> 
> 时间：2012-07-13T04:06:49.100
> 
> 标签：json, jquery-plugins, jqgrid, struts2, modal-dialog

我有一个 jsp 页面（page1.jsp）。此页面有一个网格，使用说动作类 A 加载网格，在其中一个网格列上我有一个 onclick 打开一个对话框。打开的对话框调用不同的struts 动作类，比如B。这个动作类有一个结果页面page2.jsp。这个页面也有一个网格。我遇到的问题是数据以 JSON 格式而不是在网格上显示。

我不确定 struts.xml 是否有问题或问题出在哪里。我检查了 firebug 中的 JSON 数据，一切看起来都正确，gridModel 具有预期的数据，但数据未显示在网格上，它在模式对话框中显示为 JSON 数据。

使用：Struts 2.2.3，Struts-jquery-plugin 版本 3.3.1

相关代码：page1.jsp

```
 <SCRIPT type="text/javascript">
                                function formatLink(cellvalue, options, rowObject) {
                                        return "<a href='#' onClick='javascript:openDialog("+cellvalue+")'>" + cellvalue + "</a>";
                                    }
                                function openDialog(fsNumber) {
                                        $("#sqv").load("<s:property value="testurl"/>?number="+number);
                                        $("#sqv").dialog('open');
                                    }
                                </SCRIPT>
                                <sjg:grid
                                    id="dataGrid"
                                    caption="States"
                                    hidegrid="false"
                                    dataType="json"
                                    href="%{remoteurl}"
                                    pager="false"
                                    altRows="true"
                                    gridModel="gridModel"
                                    rowNum="100000"
                                    rowTotal="100000"
                                    loadonce="true"
                                    width="940"
                                    tabindex="false"
                                    onSelectRowTopics="rowselect">
                                    <sjg:gridColumn name="st.fsNumber" index="st.fsNumber" title="FNS Number" formatter="formatfsNumberStars252Link" sortable="true" sorttype="integer" width="80"/>
                                    <sjg:gridColumn name="st.stName" index="st.stName" title="Store Name" sortable="true" width="210"/>
                                    <sjg:gridColumn name="st.stType.stTypeCode" index="st.stType.stTypeCode" title="Store Type" sortable="true" width="40"/>
                                    <sjg:gridColumn 
                                            name="st.fsNumber" 
                                            index="st.fsNumber" 
                                            title="Action" 
                                            formatter="formatLink" 
                                            sortable="false" 
                                            width="80"
                                    />
                                </sjg:grid>
                            </div> 
```

Page2.jsp

```
 <div id="idTwo">
                                    <s:url id="remoteurl" action="jsonSQV"/>
                                    <sjg:grid
                                        id="dataGrid"
                                        caption="Activity"
                                        hidegrid="false"
                                        dataType="json"
                                        href="%{remoteurl}"
                                        pager="false"
                                        altRows="true"
                                        gridModel="gridModel"
                                        loadonce="true"
                                        rowNum="100000"
                                        rowTotal="100000"
                                        tabindex="true"
                                        width="940">
                                        <sjg:gridColumn name="reportTime" index="reportTime" title="Reporting Period" formatter="date" formatoptions="{srcformat: 'm/Y', newformat:'m/Y'}" sortable="true" sorttype="date" width="80"/>
                                        <sjg:gridColumn name="volume" index="volume" title="Dollar Volume" formatter="currency" formatoptions="{prefix: '$', thousandsSeparator:','}" sortable="true" sorttype="currency" width="140"/>
                                        <sjg:gridColumn name="summary" index="summary" title="ALERT Rank" formatter="number" sortable="true" sorttype="number" width="60"/>
                                    </sjg:grid>
                                </div>
                               <script type="text/javascript">$(function() {$('#dataGrid').attr('tabindex','800');});</script> 
```

对应的Struts.xml

```
 <package name="blah" namespace="/" extends="struts-default,json-default">

    <action name="*ClassA" class="com.ads.snf.trelang.action.ClassA" method="{1}">
        <result name="input">/blah/page1.jsp</result>
        <result name="success">/blah/page1.jsp</result>
        <result name="json" type="json"><param name="target">gridModel</param></result>
    </action>

    <action name="*SQV" class="com.ads.snf.trelang.action.ClassB" method="{1}">
        <result name="input" type="redirectAction">
            <param name="actionName">executeStoreQuickView</param>
        </result>
        <result name="success"  type="redirectAction">
            <param name="actionName">jsonStoreQuickView</param>
        </result>
        <result name="json" type="json"><param name="target">gridModel</param></result>
    </action>

</package> 
```

B类动作类：

```
public class ClassB extends BaseAction {

@Autowired
MRservice service;
private SQVResponse response;
private Integer number;
private Integer fromYear;
private Integer toYear;
private Integer toMonth;
private Integer fromMonth;
@HoldDataInSession
private String dateRangeFrom;
@HoldDataInSession
private String dateRangeTo;

//STRUTS2 JQUERY GRID STUFF
//get how many rows we want to have into the grid - rowNum attribute in the grid
private Integer rows = 0;
//Get the requested page. By default grid sets this to 1.
private Integer page = 0;
// sorting order - asc or desc
private String sord;
// get index row - i.e. user click to sort.
private String sidx;
// Search Field
private String searchField;
// The Search String
private String searchString;
// he Search Operation ['eq','ne','lt','le','gt','ge','bw','bn','in','ni','ew','en','cn','nc']
private String searchOper;
// Your Total Pages
private Integer total = 0;
// All Record
private Integer records = 0;

@Override
public String input() {
    LoggingUtility.info("inside input method.", this.getClass().getName());
    String result = super.input();        
    getReport();
    return result;
}

public String execute() {
    //super.input();
     LoggingUtility.info("inside execute  method.", this.getClass().getName());
    return getReport();
}

public String json() {
    LoggingUtility.info("Entered json().", this.getClass().getName());
    String result = ERROR;
    //get response from session 
    if (this.getUserSessionDetails().getReportResponse() != null) {
        this.response = (SQVResponse) this.getUserSessionDetails().getReportResponse();
    }
    result = JSON;
    LoggingUtility.info("Exiting json().", this.getClass().getName());
    return result;

}

private String getReport() {

      HashMap<String, Object> map;
    LoggingUtility.info("Entering getReport", this.getClass().getName());
    String result = ERROR;
    try {

        if (response == null){
            response = new SQVResponse();
        }
        //response has data, and hence the response.getResultList..this has been verified in debug mode
        setGridModel(response.getResultList());
        if (LoggingUtility.getLogger().isInfoEnabled() && response.getResultList() != null) {
            int cnt = response.getResultList().size();
            LoggingUtility.info("MRservice.getReport returned the following number of results: " + cnt, this.getClass().getName());
        }
        if (this.response.getResultList().size() == 0) {
            addActionMessage(getText(UserInterfaceConstants.GENERAL_SEARCH_RESULT_MESSAGE_100));
        }
        this.getUserSessionDetails().setReportResponse(response);
        result = SUCCESS;
        //result = JSON;
    } catch (BaseSystemException e) {
        List<String> argList = new ArrayList<String>();
        argList.add(e.getExceptionId());
        addActionError(getText(e.getExceptionMessageCode(), argList));
        LoggingUtility.error("Error .", e, this.getClass().getName());
    }

    catch (Exception e) {
        List<String> argList = new ArrayList<String>();
        UUID expId = UUID.randomUUID();
        argList.add(expId.toString());
        addActionError(getText(Constants.SYSTEM_EXCEPTION_200, argList));
        LoggingUtility.error("Exception ID: " + expId.toString() + "Error in getting Report Data.", e, this.getClass().getName());
    }

    return result;
}

public Integer getnumber() {
    return number;
}

public void setnumber(Integer number) {
    this.number = number;
}

public Integer getFromYear() {
    return fromYear;
}

public void setFromYear(Integer fromYear) {
    this.fromYear = fromYear;
}

public Integer getToYear() {
    return toYear;
}

public void setToYear(Integer toYear) {
    this.toYear = toYear;
}

public Integer getToMonth() {
    return toMonth;
}

public void setToMonth(Integer toMonth) {
    this.toMonth = toMonth;
}

public Integer getFromMonth() {
    return fromMonth;
}

public void setFromMonth(Integer fromMonth) {
    this.fromMonth = fromMonth;
}

public String getDateRangeFrom() {
    return dateRangeFrom;
}

public void setDateValueFrom(String dateValue) {
    this.dateRangeFrom = dateValue;
    if (!dateValue.isEmpty()) {
        String[] dateFrom = dateValue.split("/");
        this.fromMonth = Integer.parseInt(dateFrom[0]);
        this.fromYear = Integer.parseInt(dateFrom[1]);
    }
}

public void setDateValueTo(String dateValue) {
    this.dateRangeTo = dateValue;
    if (!dateValue.isEmpty()) {
        String[] dateTo = dateValue.split("/");
        toMonth = Integer.parseInt(dateTo[0]);
        toYear = Integer.parseInt(dateTo[1]);
    }

}

public void setDateRangeFrom(String dateRangeFrom) {
    this.dateRangeFrom = dateRangeFrom;
}

public String getDateRangeTo() {
    return dateRangeTo;
}

public void setDateRangeTo(String dateRangeTo) {
    this.dateRangeTo = dateRangeTo;
}

public Integer getRows() {
    return rows;
}

public void setRows(Integer rows) {
    this.rows = rows;
}

public Integer getPage() {
    return page;
}

public void setPage(Integer page) {
    this.page = page;
}

public String getSord() {
    return sord;
}

public void setSord(String sord) {
    this.sord = sord;
}

public String getSidx() {
    return sidx;
}

public void setSidx(String sidx) {
    this.sidx = sidx;
}

public String getSearchField() {
    return searchField;
}

public void setSearchField(String searchField) {
    this.searchField = searchField;
}

public String getSearchString() {
    return searchString;
}

public void setSearchString(String searchString) {
    this.searchString = searchString;
}

public String getSearchOper() {
    return searchOper;
}

public void setSearchOper(String searchOper) {
    this.searchOper = searchOper;
}

public Integer getTotal() {
    return total;
}

public void setTotal(Integer total) {
    this.total = total;
}

public Integer getRecords() {
    return records;
}

public void setRecords(Integer records) {
    this.records = records;
}

public MRservice getService() {
    return service;
}

public void setService(MRservice service) {
    this.service = service;
}

public List<SQVBean> getGridModel() {
    return response.getResultList();
}

public void setGridModel(List<SQVBean> gridModel) {
    this.response.setResultList(gridModel);
}

public Integer getMenuIndex() {
    return menuIndex;
}

public String getPageType() {
    return getScreenId().substring(getScreenId().lastIndexOf("_") + 1);
}

public SQVResponse getResponse() {
    return response;
}

public void setResponse(SQVResponse response) {
    this.response = response;
} 
```

}

此外，上面的大部分代码都与手头的问题相关。

请帮忙。希望我至少描述了这个问题。

谢谢你，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:21:17.093

您需要执行 2 个操作：

```
<action name="DisplayAction" class="com.ads.snf.trelang.action.ClassA" method="{1}">
    <result name="input">/blah/page1.jsp</result>
    <result name="success">/blah/page1.jsp</result></action>

<action name="JsonAction" class="com.ads.snf.trelang.action.ClassA" method="{1}">
    <result type="json"></result></action> 
```

当你传递像gridModel这样的结果参数时，最好的方法是使用root。

网格模型

但是如果你设置 gridModel="gridModel" 不需要指定参数，struts 会读取你的 json 并找到 gridModel 列表没有问题。

如果您需要有关 Struts2-jquery 的更多信息，我邀请您在以下位置发帖：[https ://groups.google.com/forum/?hl=fr&fromgroups#!forum/struts2-jquery](https://groups.google.com/forum/?hl=fr&fromgroups#!forum/struts2-jquery)

Johannes 将回答您和其他 struts2-jquery 用户的任何问题。我希望这会起作用，因为我没有查看所有代码，但似乎很好。

# mysql - 在 ALTER ing 表 ADD() 工作，而修改不在 mysql

> ID：11463979
> 
> 赞同：-1
> 
> 时间：2012-07-13T04:07:49.827
> 
> 标签：mysql, sql, phpmyadmin, add

```
table - tbl_customer 
tool- phpmyadmin 
```

查询 ---

```
ALTER TABLE tbl_customer    <-- All Good
ADD( price int(10) NOT NULL); 
```

尽管 - -

```
ALTER TABLE tbl_customer   <-- Not Working
MoDIFY( price float(12,2) NOT NULL); 
```

但是，这在没有大括号的情况下可以正常工作 -

```
ALTER TABLE tbl_customer   <-- All Good
MoDIFY price float(12,2) NOT NULL; 
```

在 dev.mysql.com/doc 和其他各种站点进行少量研发后，我发现没有一个在 mysql 查询中使用大括号`()`，`add/modify`但是我的添加查询使用大括号运行良好。`concept`我只是对那些牙套和我失踪的东西感到好奇。mysql不太好;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:16:43.047

不同之处在于您可以使用 add 添加多于 1 列，因此有/无大括号的权限在 add 中有效，但您可以只修改一个，因此不提供大括号的权限

# mysql - cron作业在cpanel中不起作用

> ID：11463989
> 
> 赞同：0
> 
> 时间：2012-07-13T04:08:45.870
> 
> 标签：mysql, cron, yii

我在 yii 控制台模式下设置了一个 cron 作业。我从 localhost 尝试了以下成功工作的**地方。Gocommand.php**的代码在哪里

```
class GoCommand extends CConsoleCommand
{
    public function run($args)
    {
        //echo "hello";
        $counter = Cron::model()->findByPk(1);
        $counter->val = $counter->val + 1;
        $counter->save(false);     }
} 
```

在给出命令后增加值`path/to/project/protected yiic Go`。更新数据库。但是我通过给出以下命令在 cpanel 中尝试了相同的操作 `/usr/sbin/php /home/funwork/public_html/crontab/protected/yiic Go`。休息是一样的。为什么它不起作用。任何人都可以有一些解决方案。提前致谢..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-13T06:43:35.530

您应该`console.php`在 index.php 文件旁边有一个文件。

你需要使用它，而不是 yiic，因为它是受保护的，你可能无法访问它。

我有一个这样的 cron 设置：

```
10 2 * * 7 cd /var/www/web13/web; /bin/nice -n 19 /usr/bin/php console.php forceinstance ro DocumentationHealthMonitor DetectMaxStorageSpaceReached --alert_size_gb=400 2>&1 
```

# webfonts - Google Webfont Loader：如果字体服务器（例如 Typekit）关闭，则不会超时

> ID：11463991
> 
> 赞同：0
> 
> 时间：2012-07-13T04:09:29.600
> 
> 标签：webfonts, google-webfonts, typekit

目前，Typekit 服务器在澳大利亚遭遇中断。它暴露了我的一个网站的问题，该网站使用 Google 的 Webfont Loader 加载 Typekit 字体。

我的印象是，`wf-inactive`如果 Webfont Loader 无法加载字体但它似乎无限期地挂在`wf-loading`.

为了防止 FOUT，我`visibility: hidden;`为所有元素设置了使用这些网络字体。所以问题是所有文本都无限期地隐藏起来。

将不胜感激任何想法如何解决它？我在 Google 的 Webfont Loader 文档中看不到任何关于超时的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:08:34.453

如果您使用高级设置，您可以通过 typekit 的非活动功能将具有可见性的部分：隐藏 css 设置为可见：

```
 Typekit.load({
      loading: function() {
         //Javascript to execute when fonts start loading

      },
     active: function() {

    },
    inactive: function() {
      // Javascript to execute when fonts become inactive
      $("#page).css("visibility", "visible") // check the correct script for that 
    }
  }) 
```

# php - PHP - 变量未正确加入

> ID：11463995
> 
> 赞同：1
> 
> 时间：2012-07-13T04:10:03.063
> 
> 标签：php, variables

我正在尝试加入几个变量来创建文件路径。文件路径每天都在变化，并进行了相应的设置。问题是，在我将它们连接在一起后，它们会自行删除它们并只留下日期。这是代码

```
$filepath2 = "/data/";
$date = date(Ymd);
$unit = $_GET;
$part1 = strval($unit);
$part2 = strval($date);
$part3 = ".txt";
$filepath = $filepath2 + $part1 + $part2 + $part3;
echo $filepath; 
```

回声刚刚返回 20120713（日期）。我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T04:11:25.683

要在 PHP 中连接字符串，您不应该使用`+`连接运算符，而是使用连接运算符；点。

更正代码段中的相关行：

```
$filepath = $filepath2 . $part1 . $part2 . $part3; 
```

* * *

**您可以通过以下链接阅读有关字符串运算符的更多信息：**

*   **[php.net PHP：字符串运算符 - 手册](http://php.net/manual/en/language.operators.string.php)**

# iphone - 通过 app id 生成 iTunes App 图标 URL

> ID：11463998
> 
> 赞同：6
> 
> 时间：2012-07-13T04:10:27.537
> 
> 标签：iphone, api, app-store, itunes

[我知道我可以使用http://itunes.apple.com/lookup?id=509943167](http://itunes.apple.com/lookup?id=509943167)搜索 iTunes App Store 信息。

但是，**是否可以**仅使用应用程序 ID 生成指向 iTunes 应用程序图标的链接？

例如：就像 facebook graph api 为 fanpage 头像做的那样：[https ://graph.facebook.com/eminem/picture?type=normal](https://graph.facebook.com/eminem/picture?type=normal)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T04:13:56.413

如果您查看您提供的 URL，它会返回一个 JSON blob，其中一个属性是`artworkUrl512`. 在这种情况下，对应的值为

[http://a1.mzstatic.com/us/r1000/063/Purple/v4/1a/99/31/1a9931f2-0070-68c8-a870-80c04a62b7bd/MaDEtHfroqMKzpU0q0VUCg-temp-upload.vikzbwtt.png](http://a1.mzstatic.com/us/r1000/063/Purple/v4/1a/99/31/1a9931f2-0070-68c8-a870-80c04a62b7bd/MaDEtHfroqMKzpU0q0VUCg-temp-upload.vikzbwtt.png)

![在此处输入图像描述](../Images/d8faa68f0b559707cf7347a6b601172b.png)