# StackOverflow 问答 12498000-12498999

# c++ - 将多个相同类型的 boost::error_infos 添加到 boost::exception

> ID：12498001
> 
> 赞同：5
> 
> 时间：2012-09-19T15:33:36.300
> 
> 标签：c++, exception, boost

```
#include <boost/exception/all.hpp>
#include <iostream>

struct myexception : virtual boost::exception, virtual std::exception {};
typedef boost::error_info<struct tag_info, std::string> info;

void main()
{
    try
    {
        BOOST_THROW_EXCEPTION(myexception()
            << info("1")
            << info("2") );
    }
    catch(const myexception& e)
    {
        std::cout << boost::diagnostic_information(e) << std::endl;
    }
} 
```

这将输出

> [结构标签信息 *] = 2

我理解为什么会这样，但宁愿让它输出

> [结构标签信息 *] = 1
> [结构标签信息 *] = 2

当然，我可以 typedef `info`as`boost::error_info<struct tag_info, std::vector<std::string> >`然后`std::vector`在将其转换为异常之前将所有信息累积在 a 中，但这有两个缺点：
a）它涉及复制 std::vector
b）我需要在抛出之前建立向量，即我不能简单地使用移位运算符来添加更多信息。

因此，我现在正在寻找更好的解决方案来将多个相同`error_info`类型的信息添加到异常中。

**编辑：**
我尝试按照 Josh Kelley 在下面的评论中建议的那样做，并且超载`operator <<`：

```
#include <boost/exception/all.hpp>
#include <iostream>
#include <vector>

typedef boost::error_info<struct tag_info, std::string> info;
typedef boost::error_info<struct tag_multiple_infos, std::vector<std::string> > multiple_infos;

struct myexception : virtual boost::exception, virtual std::exception
{
    myexception& operator<< (const info& rhs)
    {
        std::vector<std::string>* pinfos = boost::get_error_info<multiple_infos, myexception>(*this);
        if (pinfos != NULL)
        {
            pinfos->push_back(rhs.value());
        }
        else
        {
            std::vector<std::string> infos;
            infos.push_back(rhs.value());
            *this << multiple_infos(infos);
        }
        return *this;
    }
};

std::string to_string(const multiple_infos& info)
{
    std::ostringstream oss;
    std::for_each(info.value().begin(), info.value().end(),
        [&oss](const std::string& str) { oss << str << ' '; });
    return oss.str();
}

void main()
{
    try
    {
        BOOST_THROW_EXCEPTION(myexception()
            << info("1")
            << info("2") );
    }
    catch(const myexception& e)
    {
        std::cout << boost::diagnostic_information(e) << std::endl;
    }
} 
```

那将输出

> [结构 tag_multiple_infos *] = 1 2

这很好，但我更喜欢 Pyotrs 的回答，因为它对我来说看起来更自然并且需要更少的代码。但是，如果我想`info`跨多个捕获站点¹添加 s ，那么这个解决方案会更合适，因为我不需要知道我已经添加了多少信息。

¹ = 即将信息转移到异常中，抛出它，在其他地方捕获它，将更多信息转移到其中，然后重新抛出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:59:59.840

只需使用两个标签：

```
struct tag_info1;
struct tag_info2;
typedef boost::error_info<tag_info1, std::string> info1;
typedef boost::error_info<tag_info2, std::string> info2; 
```

像这样使用：

```
 BOOST_THROW_EXCEPTION(myexception()
        << info1("1")
        << info2("2") ); 
```

如果您想了解更多信息，请使用模板：

```
template <unsigned N>
struct tag_info {};

template <unsigned N>
struct Nth {
  typedef boost::error_info<tag_info<N>, std::string> info;
};

    BOOST_THROW_EXCEPTION(myexception()
        << Nth<1>::info("1")
        << Nth<2>::info("2") ); 
```

# android - 西班牙语编辑文本

> ID：12498005
> 
> 赞同：0
> 
> 时间：2012-09-19T15:33:57.710
> 
> 标签：android, localization, translation

我有以下编辑文本：

```
EditText et1 = (EditText) findViewById(R.id.txtSp); 
```

当用户在此 EditText 中键入时，它应该以西班牙语而不是英语显示文本。我怎样才能做到这一点？

**注意：**我的应用程序的语言是英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:38:00.897

您可以使用该代码在运行时更改语言环境：

```
 Resources res = getApplicationContext().getResources();

 Locale locale = new Locale("en"); //<--- use your locale code here
 Locale.setDefault(locale);

 Configuration config = new Configuration();
 config.locale = locale;

 res.updateConfiguration(config, res.getDisplayMetrics()); 
```

我假设您之后也需要重置布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:45:52.913

根据这篇文章，无法更改当前正在运行的应用程序的语言环境。

[谷歌群组 -> Android 开发者](https://groups.google.com/d/msg/android-developers/VEAWMCdyIWg/W71DOADxsqAJ)

Richard 在这篇文章中提到的“DH”是一名 Android 框架工程师。查看 Richard 以前的帖子以获取指向她的评论的链接。

# jquery - jQuery - 多个相同 IF 条件的简写并同时匹配多个元素？

> ID：12498007
> 
> 赞同：2
> 
> 时间：2012-09-19T15:33:57.690
> 
> 标签：jquery, jquery-selectors

有没有更短的方法来为 jQuery 编写这个？以某种方式捆绑它？看起来效率非常低。

```
if (
   ($('#fname-field').val() == '')  || 
   ($('#lname-field').val() == '')  || 
   ($('#cell-field').val() == '')   || 
   ($('#email-field').val() == '')  || 
   ($('#street-field').val() == '') || 
   ($('#pcode-field').val() == '')  || 
   ($('#city-field').val() == '')   || 
) { // Do something } 
```

我已经四处寻找，但还没有找到答案。我不认为以下是等效的：

```
if ($('#fname-field, #lname-field, #cell-field etc...' == '')) { // Do something } 
```

它不等效，因为它不作为一个组运行条件，而是单独运行？对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:35:23.430

您可以提供要验证类的所有元素，然后使用 jQuery 的 each 函数

```
$('.validate').each(function(index) {
  if ($(this).val() == '')
     alert("empty");
}); 
```

[http://api.jquery.com/each/](http://api.jquery.com/each/)

或者，如果您只想要一次警报，请执行以下操作：

```
$('.validate').each(function(index) {
  if ($(this).val() == ''){
     alert("empty");
     return false;
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:36:47.033

你可以这样做..

```
if ($('#fname-field, #lname-field, #cell-field/*, ..*/')
    .filter(function () { 
         return $(this).val(); 
     }).length) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:38:52.217

```
var i  = 0; 
$('input').each(function() { 
if($(this).val().length == '0') { 
i++;; 
}  
});
alert("Found " + i + " empty fields"); 
```

[http://jsfiddle.net/QrkWz/2/](http://jsfiddle.net/QrkWz/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:39:32.227

你可以试试这个方法

```
var isCheck = false;
 var elems = $('#fname-field ,#lname-field , #cell-field , #email-field ,#street-field ,#pcode-field , #city-field' );
        $.each(elems , function() {
            if($this).val() == ''){
               isCheck = true;
               return false
            }
        });

        if(isCheck){
           // Your code here
        }
        else{
          //  Do something else
        } 
```

# objective-c - 找出通过 SMJobSubmit 运行的特权帮助的返回码

> ID：12498009
> 
> 赞同：0
> 
> 时间：2012-09-19T15:34:06.553
> 
> 标签：objective-c, macos, launchd

有没有办法知道当特权帮助工具安装为启动守护程序并通过`SMJobSubmit()`.

我有一个以特权方式执行某些任务的应用程序，它使用[此处](http://www.stairways.com/blog/2012-08-06-smjobsubmit)提到的 SMJobSubmit API 。

现在为了知道任务是否成功，我必须执行以下操作之一。

1.  最好的选择是获取运行的可执行文件的返回码。
2.  另一种选择是如果我可以在我的应用程序和launchd之间创建一个管道。
3.  如果以上两个都不可能，我将不得不求助于一些技巧，比如在 /tmp 位置写入文件并从我的应用程序中读取它。

我猜 SMJobSubmit 在内部将带有 launchdaemon 字典的可执行文件提交给 launchd，然后由它负责执行。那么有没有一种方法可以查询launchd以找出带有标签“mylabel”的可执行文件运行的返回码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:59:34.557

没有办法直接做到这一点。

`SMJobSubmit`是一个复杂任务的简单包装器。尽管异步启动任务，它也会同步返回。因此，虽然它可能会在未能提交作业时给您一个错误，但如果它成功提交了无法运行的作业，则无法找到它。

因此，您将必须明确编写一些代码来从您的助手与您的应用程序进行通信，以报告它已启动并正在运行。

如果您已经构建了一些通信机制（信号、文件、Unix 或 TCP 套接字、基于 HTTP 的 JSON-RPC 等等），那么就使用它。

如果您从头开始设计某些东西，XPC 可能是最好的答案。你不能使用 XPC 来启动你的助手（因为它是特权的），但是你可以通过注册一个 Mach 服务并调用 xpc_connection_create_mach_service 来手动创建一个连接。

# sql-server-2008 - 从插入语句中的子查询（多于 1 条记录）中获取最新日期

> ID：12498010
> 
> 赞同：4
> 
> 时间：2012-09-19T15:34:13.573
> 
> 标签：sql-server-2008, tsql

我有一个表，我需要将我的数据从 (Log) 复制到另一个表 (BigTable) 中。Log 表得到以下数据：

```
 LogID   LogTime             JobNumber    LogType   Description
   =====   =======             =========    =======   ===========
   1       2012-09-01 00:00:01   1          100       Accepted by D#12
   2       2012-09-01 00:05:33   1          100       Accepted by D#14
   3       2012-09-01 01:00:14   2          107       Message sent
   4       2012-09-01 05:00:53   2          100       Accepted by D#78
   5       2012-09-01 05:01:55   1          110       POB at Stop 1
   6       2012-09-01 05:02:22   3          100       Accepted by D#98
   7       2012-09-01 05:03:00   1          110       POB at Stop 2
   8       2012-09-01 05:04:00   2          110       POB at Stop 1
   9       2012-09-01 05:05:25   3          110       POB at Stop 1
  10       2012-09-01 05:15:36   1          200       Completed
  11       2012-09-01 05:20:45   2          200       Completed 
```

以下数据已经在 BigTable 中

```
 JobNumber     Accepted_At     POB_At       Completed
   =========     ===========     ======       =========
    1            NULL            NULL         NULL
    2            NULL            NULL         NULL
    3            NULL            NULL         NULL 
```

我正在尝试使用 Log 中的值更新 BigTable。请注意，如果出现像 LogID 1 和 2（上图）这样的重复条目，我只会选择最新的日期（2012-09-01 00:05:33）。POB 也是如此，因为我们只对“第 1 站的 POB”感兴趣。

Log 中有数百万行用于许多作业编号，但是，我只需要为那些仅在 BigTable 中的作业留出时间。理想表（在所有更新之后）将如下所示：

```
 JobNumber   Accepted_At            POB_At                  Completed
   =========   ===========            ======                  =========
    1          2012-09-01 00:05:33    2012-09-01 05:01:55     2012-09-01 05:15:36
    2          2012-09-01 05:00:53    2012-09-01 05:04:00     2012-09-01 05:20:45
    3          2012-09-01 05:02:22    2012-09-01 05:05:25     NULL 
```

请注意我是这个领域的新手。任何帮助表示赞赏。提前致谢。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:19:06.923

您可以在 CTE 中聚合 MAX 日期，然后将其加入 BigTable 以进行更新：

```
; WITH CTE AS (
    SELECT
    g.JobNumber
    , Accepted_At = MAX(CASE WHEN LogType = 100 THEN LogTime END)
    , POB_At = MAX(CASE WHEN LogType = 110 AND [Description] LIKE '%Stop%1' THEN LogTime END)
    , Completed = MAX(CASE WHEN LogType = 200 THEN LogTime END)
    FROM [Log] g
    GROUP BY g.JobNumber, g.LogType
)
UPDATE b
SET Accepted_At = CTE.Accepted_At
, POB_At = CTE.POB_At
, Completed = CTE.Completed
FROM CTE
JOIN BigTable b ON b.JobNumber = CTE.JobNumber 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:40:30.343

这将有效，因为您使用的是 mssql server 2008

```
merge bigtable t1
using 
(select jobnumber, 
min(case when description like 'Accepted by%' then logtime end) 
Accepted_At, min(case when description like 'POB at%' then logtime end) POB_At, 
min(case when description like 'Completed' then logtime end) Completed 
from <table> group by jobnumber) t2
on t1.jobunmber = t2.jobnumber
-- the 2 next lines are optional, but they could help in 
-- situations where jobnumber is not already in the bigtable
when not matched then INSERT t1(JobNumber, Accepted_At, POB_At, Completed )   
values (t2.JobNumber, t2.Accepted_At, t2.POB_At, t2.Completed)
when matched then 
update
set t1.Accepted_At = t2.Accepted_At,
t1.POB_At = t2.POB_At
t1.Completed = t2.Completed; 
```

# python-2.7 - 为什么不会 pip 安装任何东西？

> ID：12498011
> 
> 赞同：2
> 
> 时间：2012-09-19T15:34:25.227
> 
> 标签：python-2.7, virtualenv, pip, ubuntu-12.04

每当我尝试`pip install`在我的 virtualenvs 中进行任何操作时，我都会被告知正在下载/解包。然后我的终端无限期地停留在那条线上。我离开这个运行的最长时间是 2 小时（尝试安装 iPython）但没有成功。

最近，我尝试使用 pip 在一个 virtualenv 中安装 django。一旦它说正在下载/解包，我在另一个终端窗口中创建了另一个 virtualenv 并使用 easy-install 来安装 django 和 mezzanine。在使用 pip 在终端上进行任何移动之前，两者都安装了它们的依赖项。在放弃之前，我让 pip 窗口运行了一个小时。我已经尝试过`pip install`，`pip install -v --use-mirrors`它们的 sudo 等效项在结果中没有太大变化（-v --use-mirrors 在下载/解包停止之前会喷出一个 url 列表）。

我在 Ubuntu 12.04.1 64 位上使用 Python 2.7。我使用 Virtuanlenvwrapper 来创建和管理我的 virtualenvs，如果有帮助的话。

我找不到任何其他人遇到此问题的参考资料，所以我认为这是我的错误。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:06:54.683

按照@HugoTavares 的建议，我发现我需要安装 python-dev。我不知道为什么这会有所帮助，但它似乎解决了这个特殊问题。我现在把这个答案放在上面，但是雨果，如果你读到这个，请发布一个相同的答案，我会删除对此的接受并接受你的，因为你应该得到荣誉。

# php - Jquery Tag-it b.curCSS is not a valid function 错误

> ID：12498012
> 
> 赞同：18
> 
> 时间：2012-09-19T15:34:27.790
> 
> 标签：php, jquery, jquery-ui, tag-it

[http://marianoagency.com/intranet/trial.html](http://marianoagency.com/intranet/trial.html)

一切正常，直到我开始输入任何示例标签（如“php”）。

只要我点击“p”，就会弹出 b.curCSS 脚本错误。弹出窗口仍然适用于标签，但它位于错误的位置（左上角 0,0）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-27T18:16:06.513

我通过在 jQuery 库中包含以下行来修复此错误

```
jQuery.curCSS = jQuery.css; 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-09-19T15:43:28.420

curCSS 已从 jQuery 1.8 及更高版本中删除，因此您需要升级 jquery.ui。查看[http://bugs.jqueryui.com/ticket/8501](http://bugs.jqueryui.com/ticket/8501)你会看到这个问题。

看一眼：

[https://github.com/jquery/jquery-ui/commit/98772fd0a1094f7fb2fbe1d8a95557bf2b545f6e](https://github.com/jquery/jquery-ui/commit/98772fd0a1094f7fb2fbe1d8a95557bf2b545f6e)

如果您无法升级 jQuery UI 库，只需在 jQuery 文件之后、jQuery UI 文件之前添加此 javascript。

```
(function($) {
    if (!$.curCSS) {
       $.curCSS = $.css;
    }
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-16T14:32:31.063

外行术语只需编辑您的 jquery-ui-(version).js 文件。在 jquery 函数调用之后将以下内容添加到顶部：

```
(function($) {
     if (!$.curCSS) $.curCSS = $.css; 
```

这将纠正错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-24T09:51:54.020

只需将 jquery.ui.min.js 更新为适当的版本。我遇到了 1.8.11 版本的问题，当我更新到 1.8.22 时，它工作正常。这就是我宁愿去的方式，而不是编辑内置的 jquery 文件，即使它是错误的..

# xslt - 如何使用xslt删除xml文件中节点的一部分属性

> ID：12498013
> 
> 赞同：0
> 
> 时间：2012-09-19T15:34:28.707
> 
> 标签：xslt, xslt-1.0

我有以下 xml 代码：

```
<OML>    
  <bg-def xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="EX1"/>
</OML> 
```

我想使用 XSLT 删除属性**xmlns:xsi**及其值，因此结果将如下所示：

```
<OML>    
  <bg-def name="EX1"/>
</OML> 
```

我尝试使用以下 XSLT 代码执行此操作：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
 <xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" 
xmlns:ex="http://exslt.org/dates-and-times" extension-element-prefixes="ex">
 <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="no"  xml:space="preserve"/>

<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>
<xsl:template match="bg-def|@ xmlns:xsi"/>
</xsl:transform> 
```

在我写完代码之前，我的编辑器警告我：“ **W Namespace prefix xmlns has not been declared** ”。当我删除表达式**:xsi**并只写**xmlns**时，没有更多警告。但是当我编译并执行我的程序时，什么也没有发生，我也没有得到预期的输出。我还尝试使用以下内容更改我的 xslt 文件的最后一行：

```
<xsl:template match="bg-def|@ name"/> 
```

那么结果是这样的：

```
<OML>    
  <bg-def xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
</OML> 
```

这意味着，属性**名称**已被很好地删除。但我想用属性**xmlns:xsi**做到这一点。有人可以帮我这样做吗？谢谢你的帮助。弗兰奇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:09:06.467

**对bd-def**节点使用以下模板：

```
<xsl:template match="bg-def">
    <xsl:element name="{local-name()}">
        <xsl:apply-templates select="node()|@*"/>
    </xsl:element>
</xsl:template> 
```

代替

```
<xsl:template match="bg-def|@ name"/> 
```

此模板将创建节点 bg-def 并复制所有它的上下文节点和属性，但不复制命名空间

检查类似的问题： [删除特定元素的命名空间](https://stackoverflow.com/questions/4387571/remove-namespace-for-a-perticular-element)

**更新：**

源文件：

```
<OML>    
     <bg-def xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="EX1"/>
</OML> 
```

样式表：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" 
    xmlns:ex="http://exslt.org/dates-and-times" extension-element-prefixes="ex">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="no" xml:space="preserve"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="bg-def">
        <xsl:element name="{local-name()}">
            <xsl:apply-templates select="node()|@*"/>
        </xsl:element>
    </xsl:template>

</xsl:transform> 
```

转换结果（Saxon 6.5.5 - Xslt 1.0）：

```
<?xml version="1.0" encoding="UTF-8"?><OML>    
     <bg-def name="EX1"/>
</OML> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:46:48.497

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml"/>

<xsl:template match="*">
    <xsl:element name="{local-name()}">
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates/>
    </xsl:element>
</xsl:template>
<xsl:template match="@*">
    <xsl:attribute name="{local-name()}">
      <xsl:value-of select="."/>
    </xsl:attribute>
</xsl:template>

</xsl:stylesheet> 
```

# ios - 使用 ARC 从 NSURL 和 AVAudioPlayer 泄漏

> ID：12498015
> 
> 赞同：20
> 
> 时间：2012-09-19T15:34:37.130
> 
> 标签：ios, memory-leaks, instruments, nsurl

我在 iPhone 4S 上运行 Instruments。我在这个方法中使用 AVAudioPlayer：

```
-(void)playSound{
    NSURL *url = [self.word soundURL];
    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    if (!error) {
        [audioPlayer prepareToPlay];
        [audioPlayer play];
    }else{
       NSLog(@"Problem With audioPlayer on general card. error : %@ | url %@",[error description],[url absoluteString]);
} 
```

播放声音文件时出现泄漏：

泄漏对象：

1.

**对象**：NSURL

**责任图书馆**：基金会

**责任框架**：基础 -[NSURL(NSURL) allocWithZone:]

2.

**对象**：_NSCFString

**责任图书馆**：基金会

**责任框架**：基础 -[NSURL(NSURL) initFileURLWithPath:]

Instruments 没有直接指向我的代码，所以我很难找到泄漏的原因。

**我的问题**

什么可能导致泄漏？ **或者**当我不对代码负责时，如何定位泄漏？

**编辑** 这是仪器周期视图的模式： ![在此处输入图像描述](../Images/8f61166755b4d341df359577e541b25a.png) 谢谢 Shani

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-30T07:58:39.360

看起来是 Apple 代码中的泄漏......我尝试使用两者

*   `-[AVAudioPlayer initWithData:error:]`和
*   `-[AVAudioPlayer initWithContentsOfURL:error:]`

在第一种情况下，分配的`AVAudioPlayer`实例保留传入的`NSData`. 在第二种情况下，传入的`NSURL`内容被保留：

我附上了仪器窗口的一些屏幕截图，显示了传入`NSData`对象的保留/释放历史记录。

![在此处输入图像描述](../Images/d077de7c952b4156d68a88d79e4c20e5.png)

您可以看到该`AVAudioPlayer`对象随后创建了一个 C++ 对象`AVAudioPlayerCpp`，该对象再次保留了 NSData：

![在此处输入图像描述](../Images/853f39fb2bbbc31c380e0dc6efdf0d7f.png)

后来，当`AVAudioPlayer`对象被释放时，它`NSData`被释放，但从来没有来自关联的释放调用`AVAudioPlayerCpp`......（你可以从附图中看出）

如果您想避免泄漏 NSData/NSURL 的内容，似乎您必须使用不同的解决方案来播放媒体。

这是我的测试代码：

```
-(void)timerFired:(NSTimer*)timer
{
    NSString * path = [[ NSBundle mainBundle ] pathForResource:@"song" ofType:@"mp3" ] ;

    NSError * error = nil ;
    NSData * data = [ NSData dataWithContentsOfFile:path options:NSDataReadingMapped error:&error ] ;
    if ( !data )
    {
        if ( error ) { @throw error ; }
    }

    AVAudioPlayer * audioPlayer = data ? [[AVAudioPlayer alloc] initWithData:data error:&error ] : nil ;
    if ( !audioPlayer )
    {
        if ( error ) { @throw error ; }
    }

    if ( audioPlayer )
    {
        [audioPlayer play];
        [ NSThread sleepForTimeInterval:0.75 ] ;
        [ audioPlayer stop ] ;
    }
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // ...
    [ NSTimer scheduledTimerWithTimeInterval:3.0 target:self selector:@selector( timerFired: ) userInfo:nil repeats:YES ] ;
    // ...
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:01:14.013

根据之前的答案，我自己的所有研究和苹果开发者论坛中的讨论都指出了苹果自己的 iOS 版本 6.0、6.0.1 以及据我所知 6.0.2 库中存在的问题。

iOS 6.1 已经修复了这个问题，我再也看不到泄漏了。

可悲的是，这意味着如果您认为您的应用程序将在仍然运行 iOS 6.0、6.0.1 或 6.0.2 版本的手机上运行，​​您将不得不采取变通方法来弥补这些情况下的漏洞。

值得一提的是，如果其他所有内容都已按预期清除，则用于初始化 AVAudioPlayer 的任何内容的 retainCount 似乎为 1。

我自己的解决方法是将播放的音频封装在它自己的类中，为此我`-fno-objc-arc`在编译时使用预处理器标志进行手动内存处理。

当涉及到发布所有内容时，我确保在实际开始发布之前获取用于初始化的 NSURL 的保留计数（如果使用 NSData 初始化，则工作方式相同）。

如果其他一切处理正确，现在应该是 1 或 2，所以只需释放它适当的次数。

此外，请确保在开始发布之前获取保留计数，否则您将尝试在已修复错误的 iOS 版本上访问已释放的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:20:39.453

据我了解，在 ARC 项目中工作时，您作为开发人员不再负责保留/发布，因此问题出在 Apple 的库而不是您的代码上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T18:11:55.850

这是 Apple 库本身的问题。许多帖子（也在stackoverflow上）报告了类似的问题。你在这里无能为力。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T23:59:56.447

如果这确实是 Apple 库中的一个错误，那么这里是一个不那么有趣的解决方法。

对于有问题的类，使其不启用弧。

这可以通过转到目标的构建阶段来完成。
转到编译源下拉菜单并找到您的类的 .m 文件。进入`-fno-objc-arc`编译器标志列

不幸的是，您将需要调整类并手动管理内存。

关于将类配置为不启用弧的更详细描述是关于 SO 上另一个问题[的](https://stackoverflow.com/a/6658549/1015071)答案

编辑

我想您可以将 AVAudioPlayer 行为封装到另一个类中，并将该类用于所有播放。在这种情况下，您可以设置`-fno-objc-arc`一个文件，而不必处理整个应用程序的内存管理

# caching - 带有 .htaccess 的 HTTP 缓存标头

> ID：12498017
> 
> 赞同：17
> 
> 时间：2012-09-19T15:34:39.840
> 
> 标签：caching, http-headers, browser-cache

我正在尝试配置我的 .htaccess 文件来设置缓存时间。尝试了所有可能的配置，但没有任何效果！

这是我的 HTML 中写的：

```
 <meta http-equiv="Cache-Control" content="max-age=2592000, public" />
 <!--        
 <meta http-equiv="expires" content="mon, 24 sep 2012 14:30:00 GMT">
  --> 
```

这就是写在我的 .htaccess 文件中的内容：

```
ExpiresActive On
ExpiresDefault A3600 
```

但是，当我在 firefox 中刷新包含缓存清除 (ctrl+F5) 时，我的 firebug NET 面板说缓存在我访问文件的同一秒过期（而不是将来，因为我希望它是）。

我究竟做错了什么？？

谢谢

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-19T15:40:22.540

我建议你使用 headers mod。您可以使用以下命令激活它（如果禁用）：

> a2enmod 标头

这是一个有效的简单代码示例：

```
<IfModule mod_headers.c>
    # WEEK
    <FilesMatch "\.(jpg|jpeg|png|gif|swf)$">
        Header set Cache-Control "max-age=604800, public"
    </FilesMatch>

    # WEEK
    <FilesMatch "\.(js|css|swf)$">
        Header set Cache-Control "max-age=604800"
    </FilesMatch>
</IfModule> 
```

max-age 是以秒为单位的缓存时间。

# mongodb - Mongoose 文档架构和验证

> ID：12498018
> 
> 赞同：7
> 
> 时间：2012-09-19T15:34:42.280
> 
> 标签：mongodb, mongoose

我有这样的架构：

```
class Schemas

  constructor: ->
    @mongoose = require 'mongoose'
    @schema = @mongoose.Schema

    @EmployeeSchema = new @schema
      'firstname': { type: String, required: true }, 
      'lastname': { type: String, required: true }, 
      'email': { type: String, required: true, index: { unique: true }, validate: /\b[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}\b/ },
      'departmentId': { type: @schema.ObjectId, required: true }
      'enddate': String,
      'active': { type: Boolean, default: true } 

    @EmployeeSchemaModel = @mongoose.model 'employees', @EmployeeSchema

    @DepartmentSchema = new @schema
      'name': { type: String, required: true, index: { unique: true } }
      'employees' : [ @EmployeeSchema ]

    @DepartmentSchemaModel = @mongoose.model 'departments', @DepartmentSchema 
```

这样我就`employees`活在一个文件数组`employee`里面了`department`

我有几个`department`文档，其中有许多`employee`文档存储在`employees`数组中。

然后我添加了一个新的`department`，但它不包含`employees`. 如果我然后尝试添加另一个`department`没有`employees`，Mongoose 会`Duplicate key error`为该`employee.email`字段生成一个必填字段。该`employee.email`字段是必需的且唯一的，并且必须如此。

反正有这个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T12:47:23.340

如果您使用等效的咖啡脚本启用 Mongoose 调试日志记录，`mongoose.set('debug', true);`您可以看到发生了什么：

```
DEBUG: Mongoose: employees.ensureIndex({ email: 1 }) { safe: true, background: true, unique: true }      
DEBUG: Mongoose: departments.ensureIndex({ name: 1 }) { safe: true, background: true, unique: true }      
DEBUG: Mongoose: departments.ensureIndex({ 'employees.email': 1 }) { safe: true, background: true, unique: true } 
```

`EmployeeSchema`通过将完整的`employees`数组嵌入`DepartmentSchema`（而不仅仅是`ObjectId`对它的引用），您最终会在`employees.email`和上创建唯一索引`department.employees.email`。

`department`因此，当您在没有任何员工的情况下创建新邮件时，您将“用尽”`department.employees.email`索引中未定义的电子邮件案例作为唯一性。因此，当您第二次尝试执行此操作时，该唯一值已被获取，您将获得`Duplicate key error`.

最好的解决方法可能是更改`DepartmentSchema.employees`为对员工的引用数组`ObjectId`而不是完整对象。然后索引保留在`employees`它所属的集合中，您不会复制数据并为不一致创造机会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:18:48.920

查看这些参考资料：

[http://docs.mongodb.org/manual/core/indexes/#sparse-indexes](http://docs.mongodb.org/manual/core/indexes/#sparse-indexes)

[mongoDB/mongoose：如果不为空，则为唯一](https://stackoverflow.com/questions/7955040/mongodb-mongoose-unique-if-not-null)（特别是 JohnnyHK 的回答）

简而言之，从 Mongo 1.8 开始，您可以定义所谓的`sparse`索引，它仅在值不为空时才进行唯一检查。

在你的情况下，你会想要：

```
@EmployeeSchema = new @schema
  'firstname': { type: String, required: true }, 
  'lastname': { type: String, required: true }, 
  'email': { type: String, required: true, index: { unique: true, sparse: true }, validate: /\b[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}\b/ },
  'departmentId': { type: @schema.ObjectId, required: true }
  'enddate': String,
  'active': { type: Boolean, default: true } 
```

注意`sparse: true`EmployeeSchema 的 email 属性添加到您的索引中。

[https://gist.github.com/juanpaco/5124144](https://gist.github.com/juanpaco/5124144)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:46:33.497

您似乎无法在子文档的单个字段上创建**唯一索引。**尽管`db.collection.ensureIndex`Mongo shell 中的函数似乎允许您这样做，但它会测试整个子文档**的**唯一性，而不是单个字段。

您可以在子文档的单个字段上创建索引，但不能使其**唯一**。

# c# - 如何在 Windows 7 的登录屏幕上显示 UI

> ID：12498019
> 
> 赞同：7
> 
> 时间：2012-09-19T15:34:48.380
> 
> 标签：c#, windows-7, winlogon

我想在登录前屏幕（用户通常输入其用户名/密码的屏幕）上显示一个与用户交互的 UI
我读到 Winlogon 包的体系结构已经改变，在 Windows 7 中对我没有帮助。我被推荐使用 WTS 功能，但是我仍然不清楚如何使用它们或使用哪些功能。

我已经创建了一个服务，它会显示一个 notepad.exe（现在），但是当用户处于登录前屏幕时我需要触发这个服务。我不确定什么或如何实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:08:08.817

您要做的是使用**Windows 交互式登录体系结构**

[此处的](https://www.microsoft.com/en-us/download/details.aspx?id=4057) Windows Vista 示例*（凭据提供程序）*

Windows 7[技术网](http://technet.microsoft.com/en-us/library/ff404303%28v=ws.10%29.aspx)文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:57:11.133

在没有任何人登录的情况下显示 UI 的一种方法是使用登录屏幕保护程序。您的代码（可能是 .NET）将在超时后运行，直到您退出或有人按下 Ctrl-Alt-Del。

作为登录屏幕保护程序，您可以执行的操作是有限的，但它可能对您有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:52:16.320

根据我对您的要求的了解，您希望在凭据提供程序级别显示自定义用户界面。您可以通过以下方法之一实现此目的：

(1) 在凭证的 SetSelected 方法中编写一个自定义 CP，其中包含您的 UI 作为模态对话框：这种方法将允许您自定义任何 UI。一旦模式窗口被关闭，实际的密码 CP 就建立起来了（假设你包装了默认密码 CP）。

(2) 从 Windows 服务启动应用程序：这种方法不会阻止提供程序初始化。基本上，Windows 服务用于启动 Winsta0\Winlogon 桌面中的进程。您可以访问使用 Alt+TAB 启动的进程。以下是您需要使用的基本步骤：

1.  WTSGetActiveConsoleSessionId 获取活动会话 ID
2.  WTSQueryUserToken() 获取 winlogon pid
3.  DuplicateTokenEx 复制令牌
4.  通过调用 AdjustTokenPrivileges 调整令牌权限
5.  CreateProcessAsUser 与 lpDesktop 作为 Winsta0\Winlogon

我已经使用了这两种方法。第一个用于引入更安全的登录。第二个用于启动远程访问工具、cmd 提示符等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T16:54:16.720

做这种事情很难是有原因的。程序是用户的奴才。登录前，（通常）没有用户可以成为奴才。它是一个安全的东西。

只需在用户登录时关闭您的服务。

# solr - Solr fq 通配符

> ID：12498020
> 
> 赞同：0
> 
> 时间：2012-09-19T15:34:54.260
> 
> 标签：solr

```
$search = $solr->search($_GET['search'], 0, 100, array('fq' => 'sm_keywords:topnews', 'sort' => 'created desc')); 
```

我正在使用 Solr 的 php 库，并且有一个字段 sm_keywords ，其中包含逗号分隔的关键字。

例子：

头条新闻，高尔夫，网球

沙滩、运动、排球

我想做一个查询，我可以在字符串中的任何位置匹配关键字，例如“运动”。目前它只会在开始时匹配。我尝试做*关键字*，但出现 400 错误。如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:37:21.767

我建议您将每个关键字索引为一个单独的术语，甚至可能作为同一多值字段的不同值。这样你的过滤器就可以在不需要任何通配符的情况下工作。

# php - 在 PHP 5.2 中自动调用静态方法

> ID：12498026
> 
> 赞同：0
> 
> 时间：2012-09-19T15:35:13.963
> 
> 标签：php, static, php-5.2, magic-methods

我重写了 Jamie Matthews 的 Idiorm ORM 以完全符合 PSR 编码标准；但是，我想保持与原始代码的向后兼容性。最初使用带下划线的方法名称，但 PSR 标准是驼峰式。我编写了一个 __call 方法来在创建对象时处理它，但它不适用于静态方法。[此提交](https://github.com/kevinsperrine/idiorm/commit/ea382fe4b854b1c9d450d94d1c0af7ef21bcf6a0)显示了兼容性代码。

有没有办法让这项工作调用静态方法并仍然保持 php 5.2 兼容性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:39:12.220

你需要`__callStatic()`，这是刚刚[在 PHP 5.3 中引入的](http://www.php.net/manual/en/language.oop5.overloading.php#object.callstatic)；没有它，我认为您将无法实现这一点。

# asp.net - 如何在 ASP.NET 应用程序中包含第三方许可证

> ID：12498029
> 
> 赞同：0
> 
> 时间：2012-09-19T15:35:17.380
> 
> 标签：asp.net, .net

我有一个 ASP.NET 应用程序，它使用了一堆第三方库，如 YUI、NLog 等。

我想在我的应用程序中包含所有这些第三方库的 license(readme) txt 文件。

我想知道是否有执行此操作的标准方法，或者其他人（您）如何在他们的项目中执行此操作。

任何帮助和建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:36:26.477

我将许可证文件与它们附带的`.dlls`文件和其他文件一起保存。

由于我不喜欢提交该`/bin`文件夹（这是第三方`.dlls`通常结束的位置），我将它们保存在一个文件夹中，该文件夹在构建过程`dependencies`中被复制到。`/bin`

# jquery - UI 选项卡 302 重定向

> ID：12498030
> 
> 赞同：2
> 
> 时间：2012-09-19T15:35:22.373
> 
> 标签：jquery, http, jquery-ui-tabs, url-redirection

我使用带有以下 ajaxOptions 的 UI 选项卡：

```
 **$("#ss-tabs-1, #ss-tabs-4, #ss-tabs-5").tabs({
        cache: false,
        ajaxOptions: {
            cache: false,
            error: function (xhr, status, index, anchor) {
                    // how do I test to handle the HTTP code 302 ? (xhr.status contains 0 here and xhr.responseText is empty!)
                if ((xhr.status == 301) || (xhr.status == 302) || (xhr.status == 303) || (xhr.status == 304) || (xhr.status == 305) || (xhr.status == 306) || (xhr.status == 307) || (xhr.status == 308)) {
                    // how do I redirect to the redirection url
                }
                else {
                    $(anchor.hash).html("Error ...<br><br>URL : " + ??? + "<br><br>Error Code : " + xhr.status + "<br>" + xhr.responseText);
                }
            }
        }
    });** 
```

我的目标是处理指示重定向的 HTTP 代码 302。此 HTTP 代码由 UI 选项卡作为错误处理，但它实际上是一个重定向。当我使用 firebug 进行调试时，我在 HTTP 响应标头中看到了重定向 url。如何重定向到该 url 而不是显示错误？

非常感谢

麦克风

# coffeescript - 这 ？。除了 CoffeeScript 之外的其他语言中的运算符

> ID：12498032
> 
> 赞同：1
> 
> 时间：2012-09-19T15:35:23.993
> 
> 标签：coffeescript, operators

我在 CoffeeScript的[一篇文章](https://tech.dropbox.com/?p=361)`?.`中看到了operator的使用：

```
e.dataTransfer?.types?.contains 'Files' 
```

相当于 JavaScript 的

```
e.dataTransfer && e.dataTransfer.types && e.dataTransfer.types.contains('Files') 
```

这种运算符有名称吗？它是否存在于其他语言中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:41:36.517

有时它被称为**“安全导航”**运算符，它在 Groovy 中呈现：http: [//groovy.codehaus.org/Operators#Operators-SafeNavigationOperator](http://groovy.codehaus.org/Operators#Operators-SafeNavigationOperator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T16:58:13.510

它被称为安全导航运算符。Ruby 自 2.3.0 起就有这个：http: [//mitrev.net/ruby/2015/11/13/the-operator-in-ruby/](http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/)

正如那篇文章中提到的，C# 和 Groovy 也有这种类型的运算符。

# django - django 管理站点编辑

> ID：12498034
> 
> 赞同：-1
> 
> 时间：2012-09-19T15:35:34.433
> 
> 标签：django, django-forms, django-admin

出于某种原因，我需要在管理员中编辑模块时访问当前对象。我怎么能这样做。

让我们看一个例子：

```
class Book(models.Model):
    title = models.CharField(max_length=250)
    ISBN = models.CharField(max_length=20)
    author = models.ManyToManyField(Author)
    publisher = models.ManyToManyField(Publisher) 
```

在管理表单中，我有作者和出版商的自动完成字段。为此，我构建了自定义小部件。我的管理表单如下所示：

```
class BookForm(forms.ModelForm):
    author = forms.CharField(required=False, widget=AutoCompleteWidget('author'), help_text="Please type author name")
    publisher = forms.CharField(required=False, widget=AutoCompleteWidget('publisher'), help_text="Please type publisher name")

    def __init__(self, *args, **kwargs):
        kwargs['initial'] = {'publihser': {author_list}, 'author' : {publisher_list}}

    class Meta:
        model = Book 
```

如您所见，表单完全不同，因此默认行为将被更改。从管理员编辑书籍时，我想为 author_list 和 publisher_list 获取所有相关的出版商和作者。我可以在管理员表单中设置初始值。但我需要知道当前的书和获取相关出版商和作者的 ID。如何获取当前图书对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:59:27.983

问题在于您如何设置模型。如果`Package`s 有一个`author`and`publisher`并且一本书有`Package`s，那么你应该简单地在`Book`like 上有一个字段：

```
packages = models.ManyToManyField(Package) 
```

*不是*两个`ManyToManyField`s 都指向`Package`named`author`和`publisher`。一方面，我什至不确定你是如何让这段代码首先运行的，因为 Django 会尝试为关系创建两个同名的连接表（Book->Package，实际的属性名称在这个上下文）。

# c# - 需要帮助为 C# 风格的双斜杠注释改进我的 RegEx

> ID：12498035
> 
> 赞同：1
> 
> 时间：2012-09-19T15:35:52.700
> 
> 标签：c#, regex

我正在尝试创建 RegEx 以匹配 C# 注释（双斜杠类型）。我创建的 RegEx 几乎可以完美运行，除非有一行只有两个反斜杠且没有实际注释，它会开始匹配下一行，这是不应该的。这是我的正则表达式：

```
(?![\n\r])\s?//[\w\W].+ 
```

这是我的测试数据：

```
using System;

// This is a comment

public class test
{
    // this is also a comment
    // Hello!
    //
} 
```

我的 RegEx 按预期匹配所有内容，除了只有`//`. 我拥有的正则表达式与`//`最后一个大括号匹配，这是不对的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:37:23.087

这个

```
(?![\n\r])\s?//.*?$ 
```

将匹配到行尾，不再匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:00:10.657

```
(?![\n\r])\s?//\w? 
```

应该只捕获样本中的评论。

# iphone - iOS中类方法中的内存管理

> ID：12498039
> 
> 赞同：0
> 
> 时间：2012-09-19T15:36:01.237
> 
> 标签：iphone, ios, ipad, memory-management, class-method

我的课堂方法中有记忆问题。

我创建了一个类方法，它将从核心数据中获取记录并返回一个 NSArray。

这些是我面临的问题：

1.  有时数据会正确返回，它工作正常。

2.  有时它会返回一个 CFArray

    a.如何处理数组类型？？

    b.这种类型的数组是什么意思？？

3.  有时，当返回到调用该方法的类时，数组会变成无效对象

但无论如何，方法内部的 NSArray 都有数据。为什么它每次都以不同的方式做出反应？有什么办法可以解决这个问题吗？

使用的代码片段：

```
+(NSArray *)retrieveEvents

{

    NSArray *arrData;

    NSError *error;
    NSFetchRequest *fetch = [APPDEL.managedObjectModel fetchRequestTemplateForName:@"fetchEvents"];
    arrData = [NSArray arrayWithArray:[APPDEL.managedObjectContext executeFetchRequest:fetch error:&error]];

    return arrData;
} 
```

# javascript - jQuery: :first 比 .className:first 快吗？

> ID：12498040
> 
> 赞同：1
> 
> 时间：2012-09-19T15:36:03.700
> 
> 标签：javascript, jquery, performance, debugging, frontend

Reguarding jQuery，我在某处读到按类选择可能比按 ID 选择慢得多。

使用 :first 选择器时，jQuery 是否找到所有实例并且只返回第一个元素？或者一旦找到第一个元素，解析器就会停止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:43:11.453

我知道这不是您问题的直接答案，但是：

使用`.first()`比使用快大约十倍`:first`。使用火狐测试

> 100,000 次迭代：
> 
> 55,870ms 使用 :first
> 
> 5,858ms 使用 .first()

```
$(document).ready (function() {
    var i, time = +new Date;
    for ( i = 0; i < 100000; ++i ) {
        $ ( 'div:first' );
    }
    console.log ( (+new Date) - time );

    time = +new Date;
    for ( i = 0; i < 100000; ++i ) {
        $ ( 'div' ).first ( );
    }
    console.log ( (+new Date) - time );
}); 
```

正如评论所建议的，尝试使用[JsPerf](http://jsperf.com/)

# mysql - SQL - 从字段唯一的表中获取最新记录

> ID：12498046
> 
> 赞同：0
> 
> 时间：2012-09-19T15:36:15.210
> 
> 标签：mysql, sql, database

我有一个数据表如下

```
id    status    conversation_id    message_id    date_created
1     1         1                  72            2012-01-01 00:00:00
2     2         1                  87            2012-03-03 00:00:00
3     2         2                  95            2012-05-05 00:00:00 
```

我想以`date_created`DESC 顺序从表中获取所有行，但每个`conversation_id`. 所以在上面的示例数据的情况下，我想获得`id`2 和 3 的行。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:39:53.557

```
SELECT t.id, t.status, t.conversation_id, t.message_id, t.date_created
    FROM YourTable t
        INNER JOIN (SELECT conversation_id, MAX(date_created) AS MaxDate
                        FROM YourTable
                        GROUP BY conversation_id) q
            ON t.conversation_id = q.conversation_id
                AND t.date_created = q.MaxDate
    ORDER BY t.date_created DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:53:34.107

请参阅[SQL 小提琴](http://sqlfiddle.com/#!2/945ef/2)

```
SELECT T.*
FROM T
WHERE NOT EXISTS (
  SELECT * 
  FROM T AS _T
  WHERE _T.conversation_id = T.conversation_id
  AND (
    _T.date_created > T.date_created
    OR
    _T.date_created = T.date_created AND _T.id > T.id) 
)
ORDER BY T.date_created DESC 
```

得到

```
ID      STATUS  CONVERSATION_ID   MESSAGE_ID    DATE_CREATED
3         2         2                95         May, 05 2012 
2         2         1                87         March, 03 2012 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:30:47.477

从@Incidently 借来的创建和插入：

```
CREATE TABLE T
(id int, status int, conversation_id int, message_id int, date_created datetime);

insert into T (id, status, conversation_id, message_id, date_created)
values(1,     1,         1,                  72,            '2012-01-01 00:00:00');
insert into T (id, status, conversation_id, message_id, date_created)
values(2,     2,         1,                  87,            '2012-03-03 00:00:00');
insert into T (id, status, conversation_id, message_id, date_created)
values(3,     2 ,        2 ,                 95 ,           '2012-05-05 00:00:00'); 
```

假设 id 是主键，那么这就解决了@Joe 的回答中@Incidentally 指出的问题：

```
select T.*
from 
    T
    inner join (
        select conversation_id, max(id) as id
        from T
        group by conversation_id
    ) s on s.id = T.id
order by T.date_created desc, T.conversation_id
;
+------+--------+-----------------+------------+---------------------+
| id   | status | conversation_id | message_id | date_created        |
+------+--------+-----------------+------------+---------------------+
|    3 |      2 |               2 |         95 | 2012-05-05 00:00:00 |
|    2 |      2 |               1 |         87 | 2012-03-03 00:00:00 |
+------+--------+-----------------+------------+---------------------+ 
```

# razor - MVC 4 Razor 我无法在 foreach 中显示列表项

> ID：12498055
> 
> 赞同：0
> 
> 时间：2012-09-19T15:36:54.857
> 
> 标签：razor, asp.net-mvc-4

我想显示一个列表的内容，它是我的模型的一个属性，但呈现的 HTML 代码是空的，这里是我的代码：

看法

```
@foreach (Namespace.Models.Criteria crit in Model.CriteriaListToSearch)
{
    <div class="selectedItem">@crit.CriteriaType : @crit.TextToSearch</div>
} 
```

查看模型

```
public class Search
{
    public IEnumerable<EquipmentModel> Equipments;
    public IEnumerable<SparePartsModel> SpareParts;
    public List<Criteria> CriteriaListToSearch;

    public Search()
    {
        CriteriaListToSearch = new List<Criteria>();
    }

    #region Criteria

    private List<SelectListItem> _CriteriaList;                
    public List<SelectListItem> CriteriaList
    {
        get
        {
            if (_CriteriaList == null)
            {
                _CriteriaList = new List<SelectListItem>(4) 
                { 
                    new SelectListItem { Value = "", Text = "Select an option"},
                    new SelectListItem { Value = "1", Text = "Name/Number"},
                    new SelectListItem { Value = "2", Text = "Type"},
                    new SelectListItem { Value = "3", Text = "Description"}
                };
            }

            return _CriteriaList;
        }
    }

    [Display(Name = "Options")]
    [Required(ErrorMessage = "Please select an option.")]
    public string CriteriaSelected { get; set; }

    [Required(AllowEmptyStrings = false, ErrorMessage = "The search field is required.")]
    [Display(Name = "Search")]
    [StringLength(100)]
    public string TextToSearch { get; set; }

    #endregion
}

public class Criteria
{
    public string CriteriaType;
    public string TextToSearch;
} 
```

Model.CriteriaListToSearch 是我的列表，有一项，我用断点检查。我尝试通过添加标签来显示它，失败了。

```
[HttpPost]
public ActionResult AddCriteria(Search model)
{ 
   if (model == null) model = new Search();
   Criteria crit = new Criteria();
   crit.CriteriaType = model.CriteriaSelected;
   crit.TextToSearch = model.TextToSearch;
   model.CriteriaListToSearch.Add(crit);
   return View("Index", model);
} 
```

调试：

[![一只忙碌的猫](../Images/097a19ce5d9685b31a7253d833978f6c.png)](https://i.stack.imgur.com/51o5Z.jpg)

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:59:21.287

What does your model look like? Razor may be calling ToString() in order to display your data.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:39:59.023

如果列表中有项目并且`CriteriaType`and`TextToSearch`属性不为空或为空，那么这应该有效。还要确保没有隐藏 div 的某些 CSS 规则。您可以使用 FireBug 或 Chrome 开发人员工具栏检查您的 DOM，并分析应用于生成的 div 的所有 CSS 规则。

# java - Android：在按钮调用上抛出 NullPointerException？

> ID：12498057
> 
> 赞同：0
> 
> 时间：2012-09-19T15:37:00.330
> 
> 标签：java, android, xml

我不知道为什么，但我一直`E/AndroidRuntime(709): java.lang.NullPointerException`在尝试调用标题为“是”和“否”的按钮。这些按钮是在 xml 布局中创建并使用该`findViewById`方法调用的，这是我在同一程序中的几个正常工作的按钮中使用的类似技术。这些按钮与其他按钮的唯一区别是它们的 xml 代码保存在一个单独的布局文件中，该文件不是 main.xml。

如果我只想显示按钮而不在 java 代码中调用它们，它们将按应有的方式显示。当我尝试在 java 代码中对它们应用任何东西时会发生错误，例如`setClickable()`and `setOnClickListener()`。

下面的代码概述了 xml 中按钮和布局的创建，java 代码显示了一个在调用时创建弹出窗口的方法。

Java 代码：

```
 private void getLogoutOption() {
        LayoutInflater layoutInflater  = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);  
        View popupView = layoutInflater.inflate(R.layout.logoutoption, null);  
        final PopupWindow logoutoption = new PopupWindow(popupView, LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        Button yes = (Button) findViewById (R.id.yes);
        yes.setClickable(true);
        yes.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                logoutoption.dismiss();
                switchActivity(8);
            }
        });

        Button no = (Button) findViewById (R.id.no);
        no.setClickable(true);
        no.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                logoutoption.dismiss();
            }
        });

    logoutoption.showAsDropDown(search, 50, -30);
} 
```

XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/transparent" >"

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/menu_default" >

        <TextView
            android:id="@+id/logoutmessage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:text="Are you sure you would like to logout?"
            android:textColor="@color/gold" />

        <Button
            android:id="@+id/yes"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/logoutmessage"
            android:layout_centerInParent="true"
            android:text="YES"
            android:textColor="@color/green" />

        <Button
            android:id="@+id/no"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/logoutmessage"
            android:layout_toRightOf="@id/yes"
            android:text="NO"
            android:textColor="@color/red" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:40:21.560

```
Button yes = (Button) findViewById (R.id.yes); 
```

应该

```
Button yes = (Button) popupView.findViewById (R.id.yes); 
```

默认情况下`findViewById()`，将在您的内容视图中搜索具有指定 ID 的视图（例如，如果您使用`setContentView(R.layout.main)`，它将在 main.xml 结构中搜索这些视图）。如果您正在搜索膨胀的布局，则必须调用`findViewById()`该特定的膨胀布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:41:00.690

改变：

```
Button yes = (Button) findViewById (R.id.yes);
Button no = (Button) findViewById (R.id.no); 
```

到：

```
Button yes = (Button) popupView.findViewById (R.id.yes);
Button no = (Button) popupView.findViewById (R.id.no); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:42:39.820

嗨问题是您在 Activity 中获取 id。在 setContentView(R.layout.main) 创建的 Activity 视图中。在您的代码中，您正在膨胀新视图，因此您应该使用

按钮是 = (Button)popupView.findViewById (R.id.yes);

# sql - SQL Server：WHERE NOT EXISTS 不起作用

> ID：12498058
> 
> 赞同：1
> 
> 时间：2012-09-19T15:37:01.170
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我有一张`Main1`有 21 条记录的表，而临时表 `@recordsToDel`有 20 条记录。两个表中的 20 行相同，但以下选择查询没有返回丢失的记录，并且删除也没有删除它。两个表都有相似的列。

请问有什么建议吗？

```
SELECT * FROM dbo.Main1
WHERE NOT EXISTS
(
    SELECT * FROM @recordsToDel
);

DELETE FROM dbo.Main1
WHERE NOT EXISTS
(
    SELECT * FROM @recordsToDel
); 
```

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T15:39:04.233

尝试这个

```
 SELECT * FROM dbo.Main1
 EXCEPT
 SELECT * FROM @recordsToDel 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T08:51:54.510

LEFT JOIN 在结果中包括 dbo.Main1 表中的所有行，无论 @recordsToDel 表中的 r.Id 列是否匹配。

```
SELECT *
FROM dbo.Main1 m LEFT JOIN @recordsToDel r ON m.Id = r.Id
WHERE r.Id IS NULL

DELETE m
FROM dbo.Main1 m LEFT JOIN @recordsToDel r ON m.Id = r.Id
WHERE r.Id IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:39:00.683

您需要在子查询中使用 where 语句。`SELECT * FROM @recordsToDel`总是返回行，所以它们每次都存在。

```
SELECT * 
FROM dbo.Main1 as m
WHERE NOT EXISTS
(
    SELECT * 
    FROM @recordsToDel as r
    where r.m_id = m.id
); 
```

我在另一条评论中看到您想在不同的列上进行比较，如果您想从 Main1 中选择所有在您的子表中不存在的具有相同名字和姓氏的记录，您可以在子表中创建 where 语句查询是`where r.firstname = m.firstname and r.lastname = m.lastname`。但是您可以使用任何您想要获得结果的列。

# css - ExtJs - 如何设置 textarea 文本的样式？

> ID：12498060
> 
> 赞同：1
> 
> 时间：2012-09-19T15:37:12.343
> 
> 标签：css, extjs, styles, extjs4.1

我在 ExtJs 4.1 中获得了一个 textarea 并想修改字体系列和大小。

```
 style    : 'font-family: courier new, font-size: 8px'
   style    : {
     'fontFamily'   : 'courier new',
     'fontSize'     : '8px'
   } 
```

我也试过这样：

```
oTextarea.el.applyStyles({
            'font-family'  : 'verdana',
            'font-size'    : '8px'
         }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T20:46:26.540

您应该为 TextArea 字段组件使用配置的 fieldStyle：

```
fieldStyle: {
     'fontFamily'   : 'courier new',
     'fontSize'     : '8px'
   } 
```

或者如果字段已经存在，使用`setFieldStyle`字段组件的功能。

# networking - snmp 网络模拟器，如 ciscos 数据包跟踪器？

> ID：12498067
> 
> 赞同：0
> 
> 时间：2012-09-19T15:37:39.150
> 
> 标签：networking

我正在寻找一个类似于 ciscos 数据包跟踪器的网络模拟器，但它可以提供更多类型的设备，然后只是 ciscos。有人知道这样的程序吗？我不想通过我的网络实际发送虚假流量，而是在一台计算机内模拟虚假网络。如果可以的话，我会给你两点列出开源链接的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:47:33.540

找到 GNS3，它运行良好，甚至可以在虚拟化网络或仅限于软件中的 gui 的虚假网络上发送假数据包。

找到了 GNS3，但我不知道如何添加 pc 进行配置。

有人知道该怎么做吗？他们列出了一个教程，但没有列出一个带有虚拟电脑或虚拟盒子的教程。

编辑：继承 GNS3 网站下载他们的程序： [http ://www.GNS3.net](http://www.GNS3.net)

# maven - 意外的 Maven 目录

> ID：12498070
> 
> 赞同：1
> 
> 时间：2012-09-19T15:37:41.303
> 
> 标签：maven, path, java-home, system-variable

我刚刚下载了 Maven 3.0.4。

我的变量是：

`M2_HOME C:\Program Files (x86)\apache-maven-3.0.4`
`JAVA_HOME C:\Program Files\Java\jdk1.6.0_35`

和我的路径

`C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\Common Files\Roxio Shared\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\OEM\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\OEM\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\OEM\12.0\DLLShared\;C:\Program Files (x86)\Roxio\OEM\AudioCore\;%FRASCATI_HOME%/bin;%JAVA_HOME%\bin;%M2_HOME%\bin`

不在 Maven 目录中时出现此错误：

```
C:\Users\rmescalera>mvn -version
"mvn" no se reconoce como un comando interno o externo,
programa o archivo por lotes ejecutable. 
```

另一个来自 Maven 目录：

`ERROR: M2_HOME is set to an invalid directory. M2_HOME = "C:\Program Files (x86)\apache-maven-3.0.4\bin" Please set the M2_HOME variable in your environment to match the location of the Maven installation`

关键是在 Maven[网页](http://maven.apache.org/download.html#Installation)中，它说要在 PATH 中设置 %MAVEN_HOME%\bin 但是当我下载并解压缩 zip 时，这是我得到的结构：

![Maven 目录](../Images/eb56477e400a345bbb40566acfb79639.png)

所以，显然 apache-maven-3.0.4 中没有 bin 目录！

我试过只复制里面的东西
`C:\Program Files (x86)\apache-maven-3.0.4\apache-maven\src` 到一个新的`C:/maven directory and setting the right variables`

怎么了？我得到的这个目录结构是怎么回事？我的变量应该指向哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T15:44:03.707

似乎您已经下载了 Maven 源代码。从[这里](http://maven.apache.org/download.html)下载。确保您正在下载[（二进制 zip）](http://www.apache.org/dyn/closer.cgi/maven/maven-3/3.0.4/binaries/apache-maven-3.0.4-bin.zip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:43:13.840

您已经下载了 maven 的源代码 tar/zip，如果您想使用该版本，您必须先编译它。而是下载[二进制发行版。](http://www.apache.org/dyn/closer.cgi/maven/maven-3/3.0.4/binaries/apache-maven-3.0.4-bin.tar.gz)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T18:37:48.833

我在安装 maven 3.1.1 时遇到了同样的问题。原因是我的 %M2_HOME%\bin 之前的路径变量中还有一个旧版本的 maven 2.0.4

我从 PATH 中删除了旧的，它可以工作。

# c++ - 将成员枚举变量传递给类构造函数时出现无效的重新定义错误

> ID：12498072
> 
> 赞同：3
> 
> 时间：2012-09-19T15:37:45.567
> 
> 标签：c++, eclipse, constructor, enums, arguments

首先，我应该说代码在 Eclipse 之外编译得很好，没有错误。将项目移动到 eclipse Juno、CDT 8.1、gcc 版本 4.6.3 时遇到了这个问题

```
//This example code works:

 1\. class TestThis {
 2\.  public:
 3\.     enum NUMBER { one, two };
 4\.     TestThis();
 5\.     int populate(enum NUMBER n);
 6\. }; 
```

```
//This generates an error "invalid redefinition of 'NUMBER'" at line 3 before compile:

 1\. class TestThis {
 2\. public:
 3\.     enum NUMBER { one, two };
 4\.     TestThis(enum NUMBER n);
 5\.     int populate();
 6\. }; 
```

问题：有没有办法“修复”CDT 以允许将枚举传递给构造函数？或者如果没有，这个问题还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:40:05.873

就这么说吧：

```
class TestThis
{
    enum NUMBER { one, two };
    TestThis(NUMBER n);
}; 
```

您的代码确实在重新声明*另一个* `enum NUMBER`. `void (struct Foo x);`这与，说，实际上是一个*声明*`struct Foo`没有什么不同。

**更新：**多个声明实际上很好。说`enum`或`struct`再说一遍是可能的，虽然可能不是很漂亮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T03:31:18.603

我在 eclipse CDT bugzilla 上报告了这个 bug，发现 Dominik Eichelberg 已经在 7 月份报告了这个 bug（参见 Bug 385144）。阅读它给了我足够的信息来解决问题。如果枚举变量不是构造函数的第一个参数，则不会出现此问题。谢谢大家。

# mysql - MYSQL 问题 - 加入不够

> ID：12498077
> 
> 赞同：0
> 
> 时间：2012-09-19T15:37:53.290
> 
> 标签：mysql, join

我有 3 张桌子`products`：`buyers`和`ratings`。

买家可以对 i 产品进行评分，这将在评分中保存为一行（使用`buyer_id`和`product_id`），并且买家可以将一个产品（每个买家最多一个最喜欢的产品）标记为最喜欢的（在 中的二进制标志`ratings`）。

我有一份所有买家的报告，并想在报告的每一行中添加买家最喜欢的产品的名称（如果他有的话），我试过这个：

```
SELECT b.*, p.name 
FROM buyers b, products p 
LEFT JOIN ratings r 
    ON r.buyer_id = b.id 
    and r.product_id = p.id 
    and r.isFav=1 
```

不幸的是，这会引发错误（“on 子句”中的未知列“b.id”）。所以我觉得我走错了路。有什么可以帮助我完成我需要的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:40:19.840

在没有看到任何数据的情况下，最大的问题之一是您正在混合`JOIN`语法，我可能会这样重写它：

```
SELECT b.*, p.name 
FROM buyers b
LEFT JOIN ratings r 
    ON b.id = r.buyer_id
LEFT JOIN  products p 
    ON r.product_id = p.id 
WHERE r.isFav=1 
```

# java - Vaadin：集中自定义异常处理

> ID：12498080
> 
> 赞同：2
> 
> 时间：2012-09-19T15:38:01.153
> 
> 标签：java, vaadin

我使用 Vaadin 框架来创建我的 Web 应用程序 GUI。

我有一个 Vaadin 按钮，它的单击侦听器代码可能会引发应用程序自定义异常。在应用程序代码的其他点中，此异常一直被抛出到我的自定义窗口类，在那里它被集中处理。我想在这里做类似的事情：在 clickListener 代码中抛出这个异常，这样我就可以在窗口类的自定义终端错误处理程序中捕获它。由于单击侦听器类不会引发任何异常，因此我无法在那里引发异常，我认为我将不得不在本地处理异常。由于我不想在按钮单击侦听器级别处理异常，我想我会将它转发到我的自定义窗口类。像这样的东西：

```
Button btnNew = new Button("New", new Button.ClickListener() {
  public void buttonClick(ClickEvent event) {
    try {
        doThingThatThrowsException();
    } catch (Exception exc) {
        window.handleCustomException()
    }
  }
}); 
```

这是使用 Vaadin 集中处理自定义异常的常用方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:57:00.737

我无法回答这是否是处理异常的*常用方法，但我们做的事情非常相似。*

根据监听器的数量或您必须执行此操作的频率，您还可以创建抽象监听器来为您执行该委托。

例如

```
abstract class BasicListener {
  protected void handleThrowable(Component.Event event, Throwable throwable) {
    Window window = event.getComponent().getWindow();
    if (window instanceof ExceptionHandlingWindow) {
      ((ExceptionHandlingWindow) window).handleException(throwable);
    } else {
      // Log it ? DO something, anyway.
    }
  }
}

abstract class ExceptionHandlingButtonClickHandler extends BasicListener implements Button.ClickListener {
  @Override
  public void buttonClick(Button.ClickEvent event) {
    try {
      handleClick(event);
    } catch (Throwable e) {
      handleThrowable(event, e);
    }
  }

  protected abstract void handleClick(Button.ClickEvent event);
}

Button btnNew = new Button("New", new ExceptionHandlingButtonClickHandler() {
  @Override
  protected void handleClick(Button.ClickEvent event) {
    doThingThatThrowsException();
  }
}); 
```

# webcam - 使用网络摄像头进行 Emgu 圆圈检测

> ID：12498089
> 
> 赞同：1
> 
> 时间：2012-09-19T15:38:38.233
> 
> 标签：webcam, detection, geometry, emgucv

我正在尝试编写一个程序，当您将它放在网络摄像头前时检测一个圆圈。我知道圆形检测如何用于图像，但我不知道如何使用以下代码使其与网络摄像头流一起使用：

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        ImageViewer viewer = new ImageViewer(); //create an image viewer
        Capture capture = new Capture(); //create a camera capture
        Application.Idle += new EventHandler(delegate(object sender, EventArgs e)
        {  //run this until application closed (close button click on image viewer)
            Image<Bgr, Byte> image = capture.QueryFrame();
            //MemStorage storage = new MemStorage();
            //Contour<Point> contours = image.FindContours();
           //Contour<Point> currentContour = contours.ApproxPoly(contours.Perimeter * 0.05, storage);
            viewer.Image = image; //draw the image obtained from camera
        });
        viewer.ShowDialog(); //show the image viewer
} 
```

正如你所看到的，我尝试在最里面的循环中使用 FindContours，但是当我尝试运行它时程序只是冻结了，所以我注释掉了那个特定的部分。谁能告诉我如何使用网络摄像头实现圆圈检测？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:38:43.330

您可以使用`HoughCircle`Method 进行圆形检测

```
 Image gray = img.Convert().PyrDown().PyrUp();

Gray cannyThreshold = new Gray(180);
Gray cannyThresholdLinking = new Gray(120);
Gray circleAccumulatorThreshold = new Gray(120);

CircleF[] circles = gray.HoughCircles(
    cannyThreshold,
    circleAccumulatorThreshold,
    5.0, //Resolution of the accumulator used to detect centers of the circles
    10.0, //min distance 
    5, //min radius
    0 //max radius
    )[0]; //Get the circles from the first channel 
```

见方法[`HoughCircle`](http://www.emgu.com/wiki/files/1.5.0.0/Help/html/6f78c3d8-fb1a-5983-2862-549c49019d49.htm)

# asp.net-mvc - 在 View 上发送电子邮件

> ID：12498090
> 
> 赞同：0
> 
> 时间：2012-09-19T15:38:39.813
> 
> 标签：asp.net-mvc, asp.net-mvc-3, email

我的电脑被偷了。我的项目还没有完成，也没有备份我的项目文件。是的，情况非常糟糕。每个人都应该使用云或 vs2012 来进行安全项目。

我只有 mvc 3.0 发布文件。我有联系表格。是否可以通过 View 发送电子邮件？我的控制器和模型变成了 .dll 文件，所以我只能访问视图文件（发布文件）。

我必须找到一种发送电子邮件的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:42:18.750

您可以在视图文件中嵌入一些代码。但**你不应该那样做**。将 UI 和代码混合在一起是一种不好的做法。

使用 DLL 反编译工具查看 DLL 文件中的代码并重新编写代码。你可以考虑[JustDecompile](http://www.telerik.com/products/decompiler.aspx)或 Reflector

确保这次您依赖 Sourcecontrol /更好的备份策略。

# raphael - 有没有办法将网格线添加到 gRaphael 折线图？

> ID：12498092
> 
> 赞同：4
> 
> 时间：2012-09-19T15:38:45.707
> 
> 标签：raphael, graphael

我有一个用 gRaphael 创建的折线图。它有轴和刻度线，但我想要网格线。是否有内置的方法来实现这一点或可以帮助我的附加库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T01:58:00.207

gRaphael 没有内置的添加网格线的方法，但是通过编辑源代码或在创建图形对象后操作图形对象来绘制它们非常容易。

我找到了一个名为[RaphAlytics](https://github.com/tataencu/raphalytics)的扩展，并在我需要一个带网格的边界框的情况下使用它的`drawGrid()`功能。

您可以根据需要将此函数用于任何 gRaphael 图形以绘制网格线。在折线图上，我需要绘制与折线图左轴标记对齐的水平网格线，因此我使用该函数作为示例，如下所示：

```
// Draw horizontal gridlines
for (var i = 0; i < g.axis[1].text.items.length; i++) {
    r.path(['M', x, g.axis[1].text.items[i].attrs.y, 'H', w + x]).attr({
        stroke : '#EEE'
    }).toBack();
} 
```

这是一个工作小提琴来说明这个例子：http: [//jsfiddle.net/KM3BB/1/](http://jsfiddle.net/KM3BB/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T00:16:41.957

我昨天试过这样做。简短回答：gRaphaël 无法使用任何折线图选项或轴选项为您执行此操作，您必须自己使用 Raphaël。
就像是：

```
var r = Raphael("holder"), txtattr = { font: "12px sans-serif" };
r.path('M 15 200.5 L 310 200.5 M 15 180.5 L 310 200.5');
r.linechart(10, 10, 300, 220, x, [y, y2, y3]); 
```

这意味着在我的折线图下绘制一条从 15,200.5 开始并画一条直线到 310,200.5 移动到 15,180.5 并画一条线到 310,180.5 的路径。不要问我为什么，但是 0.5 对于让笔画实际上是 1px 宽和纯黑色很重要。否则，它似乎在 50% 的不透明度下别名为 2px 宽。您必须自己计算关于折线图的确切位置。

您还可以通过更改为来使用[Playground中的](http://raphaeljs.com/playground.html)[路径](http://raphaeljs.com/reference.html#Paper.path)功能。`r``paper`

如果您正在寻找诸如定义轴的确切范围（而不仅仅是输入的最小值和最大值）之类的东西，您也可以考虑查看[Google Chart Tools 。](https://developers.google.com/chart/interactive/docs/gallery)

# sql-server-2008 - 无法在 SQL Server Express 上还原备份

> ID：12498098
> 
> 赞同：0
> 
> 时间：2012-09-19T15:38:58.273
> 
> 标签：sql-server-2008

我有一个 SQL 数据库的备份，它是 409 MB。

当我尝试恢复时，它说：

> 服务器“SPLYF-R3K8G8JL2\SQLEXPRESS”的恢复失败。(Microsoft.SqlServer.Express.Smo)
> 
> 如需帮助，请点击：http: [//go.microsoft.com/fwlink ?ProdName=Microsoft+SQL+Server&ProdVer=9.00.2047.00&EvtSrc=Microsoft.SqlServer.Management.Smo.ExceptionTemplates.FailedOperationExceptionText&EvtID =Restore+Server&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&ProdVer=9.00.2047.00&EvtSrc=Microsoft.SqlServer.Management.Smo.ExceptionTemplates.FailedOperationExceptionText&EvtID=Restore+Server&LinkId=20476)
> 
> CREATE DATABASE 或 ALTER DATABASE 失败，因为生成的累积数据库大小将超过每个数据库 4096 MB 的许可限制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:41:19.767

(1) 似乎您正试图在 SQL Server 2005 实例上恢复 SQL Server 2008 R2 数据库。您不能那样倒退。

(2) SQL Server 2005 Express 的每个数据库有 4GB 的限制。对于 2008 R2，限制为 10GB。

（请注意，备份文件的大小不一定是数据库的大小。备份文件不包括空白空间，因此如果您的 MDF 大于 4GB（并且大部分为空），仍然会执行限制，因为限制是 on数据文件大小，而不是备份大小或实际数据。）

因此，解决方案是：安装 SQL Server 2008 R2 Express Edition，您应该能够在那里恢复您的数据库（假设它小于 10GB）。

如果您的数据文件当前 > 10GB 但其中有 < 10GB 的数据，您可以：

*   在源实例中（或在没有此限制的情况下附加到不同版本之后），因为看起来数据远少于 10GB，所以使用 DBCC SHRINKFILE 将数据文件大小减小到小于 10GB。
*   进行另一个备份
*   继续附加到 Express

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:43:27.247

您确定您正在运行 SQL Server 2008 R2 Express 吗？

数据库备份经常被压缩：这个备份会创建一个大于 4 GB 的数据库，这是 SQL Server 2008 Express 和 SQL Server 2005 Express 的限制，这并不奇怪。

尝试升级到 SQL Server 2008 R2 Express。

# java - s3 putObject 访问被拒绝

> ID：12498108
> 
> 赞同：2
> 
> 时间：2012-09-19T15:39:29.337
> 
> 标签：java, amazon-s3, amazon-web-services, amazon

我对我的 s3 用户登录拥有完全权限：

```
{
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "s3:*",
      "Resource": "*"
    }
  ]
} 
```

没有附加到该用户的组策略。但是当我从我的 java 程序发出 putObject() 命令时，我收到拒绝访问消息。可能是什么问题。正如我告诉我的用户登录具有管理员访问权限以及 AmazonS3FullAccess。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T16:41:01.507

我解决了这个问题。正如我所想，这与防火墙或权限设置无关。我试图在我应该在执行此操作之前创建的存储桶上执行 putObject。尽管说没有找到存储桶，但 AWS 给出了一条消息访问被拒绝，这很奇怪。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:43:07.810

您应该确定您的 IP 地址是否被允许。对于亚马逊服务，您也可以使用 IP 地址限制访问。我遇到过同样的问题。

# winforms - 自定义任务窗格并将树视图从窗格拖放到文档（不是相反）

> ID：12498110
> 
> 赞同：2
> 
> 时间：2012-09-19T15:39:30.187
> 
> 标签：winforms, treeview, vsto

我在这里使用了演示。一切正常。

[http://code.msdn.microsoft.com/Word-2010-Using-the-Drag-81bb5bff](http://code.msdn.microsoft.com/Word-2010-Using-the-Drag-81bb5bff)

但是，当我尝试将列表框换成树视图时，它只是不想播放。

5 分钟让演示工作，现在尝试使用树视图超过 2 小时。它肯定不应该那么难吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:16:31.527

具体与上面提到的演示和我从列表框到树视图的修改有关：

有一个关于“e.Data.GetDataPresent”的测试，它确定光标/指针在 GUI 上移动时的“效果” - 从任务窗格中的树视图到文档上方（效果设置在此实例中的 ItemDrag 事件）。

当光标移动到文档（以及覆盖在文档上的表单）上时，会引发“DragEnter”事件，如果未找到数据，则效果设置为“DragDropEffects.None”。这意味着当将项目放在文档上时（通过不可见的覆盖表单），不会引发“DragDrop”事件，因为“DropEffects.None”会阻止它。

问题在于我对 DragEventArgs.Data 属性中存在的数据 bing 的测试。不过，有趣的是“DragDropEffects”的影响及其对其他事件的副作用。

# c# - 命令行参数、C# 和标准输出

> ID：12498120
> 
> 赞同：0
> 
> 时间：2012-09-19T15:40:03.710
> 
> 标签：c#, console, stdout

我应该用 C# 编写一个命令行工具。问题是，我对它完全陌生，必须阅读很多东西。该工具必须接受几个参数，其语法我不知道它的作用。它是这样的：

```
tool.exe \path\data.log /lastrun:file1.txt >file2.txt 
```

1.  那是 /lastrun:... 有效的标记吗？
2.  我知道 >file2.txt 与输出和标准输出有关，但我几乎找不到任何假人信息。它写一个文本文件吗？

该工具应该在标准输出上输出数据，这意味着可以再次读取并可能使用进一步的控制台命令进行处理。如何参考输出？

我几乎没有使用命令行工具的经验。如果有人能给我一些我可以查找的聪明词、链接或简单地解释我这里发生了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:42:36.203

你是决定命令行参数格式的人（你称之为“标记”）。

它是否有效*完全取决于您。*

您需要解析传入的参数 -有关详细信息，请参阅 MSDN 上的[Main() 和命令行参数（C# 编程指南）](http://msdn.microsoft.com/en-us/library/acy3edy3.aspx)。许多人使用命令行解析库（有很多 - 搜索并找到您喜欢的一个，也许是具有最佳文档的那个）。

至于`>`-我建议您阅读有关[命令重定向](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx?mfr=true)的内容（有关 XP 的文章，但仍然有效）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:45:14.570

在标准输出上输出数据很容易。只写给`Console`班级。如果您想读入，您也可以使用控制台类上的静态读取方法，但根据您发送的数据类型，您可能需要查看管道。这是 .NET 中的另一篇[标准输入和输出](https://stackoverflow.com/questions/4055883/standard-input-output-in-net)帖子，提出了同样的问题。

至于控制台输入格式，就像提到的那样，这取决于你！

# f# - 如何在不带来太多开销的情况下使这个循环更实用

> ID：12498121
> 
> 赞同：2
> 
> 时间：2012-09-19T15:40:03.057
> 
> 标签：f#

```
 for i in a..b do
     res <- res * myarray.[i]
 res 
```

我必须像这样使用吗

```
 Array.fold (*) 1 (Array.sub myarray a (b - a + 1)) 
```

，我认为这相当慢而且不是那么简洁？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:59:30.387

不知道你是否会发现它更好，但你可以这样做：

```
Seq.fold (fun r i -> r * myarray.[i]) 1 {a .. b} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T16:47:33.873

Daniel 的解决方案非常简洁，我认为它应该几乎与`for`循环一样有效，因为它不需要克隆数组。

如果您想要一个更简洁的解决方案，那么您可以使用 indexer 而不是`Array.sub`，它确实需要克隆数组的某些部分，但它看起来很整洁：

```
myarray.[a .. b] |> Seq.fold (*) 1 
```

这会克隆数组的一部分，因为切片操作会返回一个数组。您可以定义自己的切片操作，将元素返回为`seq<'T>`（因此不会克隆整个数组）：

```
module Array =
  let slice a b (arr:'T[]) = 
    seq { for i in a .. b -> arr.[i] } 
```

使用此函数，您可以编写：

```
myarray |> Array.slice a b |> Seq.fold (*) 1 
```

我相信这更直接地表达了您尝试实现的功能。与性能一样 - 您应该测量性能以查看是否需要进行此类优化，或者第一个版本是否足够快以满足您的目的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T17:36:38.663

如果您关心速度，那么我会回避使用 seq ，除非您正在制作原型。要么坚持使用 for 循环，要么重写为递归函数。您给出的示例很简单，有时更复杂的问题可以更好地表示为递归。

```
let rec rangeProduct a b total (array : _[]) =
    if a <= b then
        rangeProduct (a + 1) b (total * array.[a]) array
    else
        total

let res = myArray |> rangeProduct a b res 
```

这里没有开销，它尽可能快，没有突变，它是功能性的。

# android - 如何在用两根手指拖动时调整 ImageView 的大小？

> ID：12498127
> 
> 赞同：3
> 
> 时间：2012-09-19T15:40:19.293
> 
> 标签：android, android-layout, android-widget

我是安卓新手。我有矩形和圆形 ImageViews。我需要用两根手指调整这些 ImageView 的大小（例如，用两根手指拖动时，ImageView 应该可以调整大小）。

# git - 在 Sublime Text 2 中，是否有一个工具可以在 COMMIT_EDITMSG 文件中“着色” git add/deletes？

> ID：12498130
> 
> 赞同：3
> 
> 时间：2012-09-19T15:40:22.663
> 
> 标签：git, sublimetext2, colorize

当我 git commit 时，我会`$ gcv`在我的 .bash_profile 中为 .bash_profile 做一个别名`git commit -v`。该文件中的信息很棒。我喜欢回顾我所做的，以便我可以做出简明扼要的信息。

最近，我想出了如何在 iTerm2 中“着色”我的 git 输出，它很漂亮。我的大脑已经习惯了快速识别红色和绿色，所以我可以很容易地看到添加和删除。

问题是：我可以`COMMIT_EDITMSG`在 Sublime 中看到我的文件，但我可以用我在 iTerm2 中看到的相同彩色线条打开它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T14:38:28.737

有一种方法！我终于想通了！

首先确保你有终端的 subl 命令，并将 subl 设置为你的 git 编辑器（使用 -w 选项）： 编辑你的 .bash_profile 看起来像这样：

```
export EDITOR="/usr/bin/subl -w" 
```

然后做一个`git commit -v`让消息打开。在 sublimeText2 窗口内，单击右下角显示的位置并将`Plain Text`选项更改为：

> 使用当前扩展名打开全部 > Diff

并且每次获得 COMMIT_EDITMSG 时都应该获得颜色。

# c# - C# 中的 Netsuite Web 服务

> ID：12498131
> 
> 赞同：3
> 
> 时间：2012-09-19T15:40:30.460
> 
> 标签：c#, netsuite

我正在开发 C# 程序以将图像文件上传到 netsuite。任何人都可以帮助我如何在 C# 中调用 netsuite 脚本（用 java 脚本编写），因为我只能在 netsuite 脚本中找到上传 api。netsuite 中是否有任何网络服务或功能可以在 netsuite 中上传图像文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T16:02:19.987

您可以使用 SuiteTalk 直接上传文件。下面的示例是用 C# 编写的。

像这样调用以下方法：

```
uploadFile(@"SERIAL_NUMBERS.csv", "csv", "123456"); 
```

方法：

```
public static void UploadFile(string filename, string filetype, string folderId)
    {

        var sFileName = filename;

        var sNsFileName = filename;

        var sFileType = filetype;

        var sFolderId = folderId;

        var uploadFile = new com.netsuite.webservices.File { attachFromSpecified = true, attachFrom = FileAttachFrom._computer };

        if (sFolderId != null)
        {
            var folderRef = new RecordRef { internalId = sFolderId };
            uploadFile.folder = folderRef;
        }

        // Specify the NetSuite filename
        if (sNsFileName != null)
            uploadFile.name = sNsFileName;

        uploadFile.fileTypeSpecified = true;
        if (sFileType != null)
        {
            if (sFileType.Trim().ToLower().Equals("plaintext"))
                uploadFile.fileType = MediaType._PLAINTEXT;
            else if (sFileType.Trim().ToLower().Equals("image"))
                uploadFile.fileType = MediaType._IMAGE;
            else if (sFileType.Trim().ToLower().Equals("csv"))
                uploadFile.fileType = MediaType._CSV;
            else
                uploadFile.fileType = MediaType._PLAINTEXT;
        }
        else
            uploadFile.fileType = MediaType._PLAINTEXT;

        uploadFile.content = LoadFile(sFileName);

        // Invoke add() operation to upload the file to NetSuite
        var response = Service.add(uploadFile);

        // Process the response
        if (response.status.isSuccess)
        {
            Console.WriteLine(
                "\nThe file was uploaded successfully:" +
                "\nFile Record key=" + ((RecordRef)response.baseRef).internalId +
                "\nRenaming file");
        }
        else
        {
            Console.WriteLine("The file was not uploaded. Please notify the NetSuite team of the following error:");
            DisplayError(response.status.statusDetail);

        }
    }

    private static byte[] LoadFile(String sFileName)
    {
        byte[] data;

        try
        {
            FileStream inFile;
            using (inFile = new FileStream(sFileName, FileMode.Open, FileAccess.Read))
            {
                data = new Byte[inFile.Length];
                inFile.Read(data, 0, (int)inFile.Length);
            }
        }
        catch (Exception ex)
        {
            // Error creating stream or reading from it.
            Console.WriteLine(ex.Message);
             return null;
        }

        return data;
    } 
```

# python - python中字典列表的两级排序

> ID：12498134
> 
> 赞同：2
> 
> 时间：2012-09-19T15:40:49.237
> 
> 标签：python, sorting

我有一个字典列表如下：

```
 {"id": 1, "score": some_score.. othe values}
 {"id": 1, "score": some_differetscore.. othe values}  
 {"id": 22, "score": some_score.. othe values}
 {"id": 3, "score": some_score.. othe values} 
```

我希望得到的是遍历这个列表，使其排序如下。

该列表按“id”排序，然后按“score”反向排序

所以所有带有“id”1的条目都被合并在一起，然后得分最高的条目在顶部？我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T15:42:24.190

试试这个：

```
sorted(mylist, key=lambda d: (d["id"], -d["score"])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:47:15.240

实际上相同，但更清晰且可单元测试：

```
def weight(data):
    """We sort the data first by its ID, then by descending score."""
    return data["id"], -data["score"]

sorted(mylist, key=weight) 
```

# jquery-plugins - 使用 jquery 获取 Linkedin 更新后的提要

> ID：12498138
> 
> 赞同：0
> 
> 时间：2012-09-19T15:41:03.413
> 
> 标签：jquery-plugins, linkedin

我想通过 ajax 获取linkedin 组或公司的帖子更新以显示在网页上。具体来说，我正在寻找类似这个[名为 jtwitter](http://jquery-howto.blogspot.it/2009/11/jquery-twitter-plugin-update-jtwitter.html)的插件，它可以获取 twitter 帖子。现在我只想要一个简单的更新提要，所以我想知道是否有任何 jquery 插件允许这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T10:55:45.323

我正在寻找类似的解决方案。

这是一个 jQuery Socialist 插件，它可以从流行的社交网络中获取最新的帖子和更新： [https ://github.com/iatek/jquery-socialist](https://github.com/iatek/jquery-socialist)

我还没有尝试过，但它似乎符合您的需求。希望这可以帮助 ：）

# c# - 为什么当我引用抽象类时，Visual Studio 的 Web 服务序列化引擎会发生变化？

> ID：12498144
> 
> 赞同：4
> 
> 时间：2012-09-19T15:41:23.647
> 
> 标签：c#, visual-studio-2010, web-services, compiler-construction

经过一番调查，我昨天注意到了这一点，但对仅仅知道这一点并不满意。有人可以向我解释一下吗？

这是我正在经历的：

*   我看到了两种不同的序列化可能性：
    *   `[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]`
    *   `[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]`
*   涉及 Runtime.Serialization 的序列化会导致实体`ArrayOf<T>`被引入，如果任何集合预期作为 Web 方法的参数。
    *   public void Foo(int[] ids) ==> public void Foo(int[] ids) **System.ServiceModel**
    *   public void Foo(int[] ids) ==> public void Foo(ArrayOfInt ids) **System.Runtime.Serialization**
*   选择的序列化引擎取决于派生自（或作为）抽象类类型的参数。
    *   使用public void Bar(int[] ids) ==> **System.Runtime.Serialization**。
    *   public void Bar(DerivedFromAbstractClass baz, int[] ids) ==> **System.ServiceModel**被使用。

作为一个可运行的例子：

```
public abstract class Foo { }

/// <summary>
/// Summary description for WebService1
/// </summary>
[System.Web.Services.WebService(Namespace = "http://tempuri.org/")]
[System.Web.Services.WebServiceBinding(ConformsTo = System.Web.Services.WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
// [System.Web.Script.Services.ScriptService]
public class WebService1 : System.Web.Services.WebService
{
    [System.Web.Services.WebMethod]
    public void HelloWorld(Foo foo, int[] ids)
    {
    }
} 
```

这是我的 .asmx 文件的样子。注意 hello world 期望的参数类型。现在，我生成一个服务引用：

```
namespace CableSolve.Web.Api.Tests.ServiceReference1 {
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
    [System.ServiceModel.ServiceContractAttribute(ConfigurationName="ServiceReference1.WebService1Soap")]
    public interface WebService1Soap {

        [System.ServiceModel.OperationContractAttribute(Action="http://tempuri.org/HelloWorld", ReplyAction="*")]
        [System.ServiceModel.XmlSerializerFormatAttribute(SupportFaults=true)]
        void HelloWorld(CableSolve.Web.Api.Tests.ServiceReference1.Foo foo, int[] ids);
    }

    /// <remarks/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.233")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(Namespace="http://tempuri.org/")]
    public abstract partial class Foo : object, System.ComponentModel.INotifyPropertyChanged {

        public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

        protected void RaisePropertyChanged(string propertyName) {
            System.ComponentModel.PropertyChangedEventHandler propertyChanged = this.PropertyChanged;
            if ((propertyChanged != null)) {
                propertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
            }
        }
    }

    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
    public interface WebService1SoapChannel : CableSolve.Web.Api.Tests.ServiceReference1.WebService1Soap, System.ServiceModel.IClientChannel {
    }

    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
    public partial class WebService1SoapClient : System.ServiceModel.ClientBase<CableSolve.Web.Api.Tests.ServiceReference1.WebService1Soap>, CableSolve.Web.Api.Tests.ServiceReference1.WebService1Soap {

        public WebService1SoapClient() {
        }

        public WebService1SoapClient(string endpointConfigurationName) : 
                base(endpointConfigurationName) {
        }

        public WebService1SoapClient(string endpointConfigurationName, string remoteAddress) : 
                base(endpointConfigurationName, remoteAddress) {
        }

        public WebService1SoapClient(string endpointConfigurationName, System.ServiceModel.EndpointAddress remoteAddress) : 
                base(endpointConfigurationName, remoteAddress) {
        }

        public WebService1SoapClient(System.ServiceModel.Channels.Binding binding, System.ServiceModel.EndpointAddress remoteAddress) : 
                base(binding, remoteAddress) {
        }

        public void HelloWorld(CableSolve.Web.Api.Tests.ServiceReference1.Foo foo, int[] ids) {
            base.Channel.HelloWorld(foo, ids);
        }
    }
} 
```

请注意没有 ArrayOfInt。现在，我从 WebService1 中删除 Foo 参数并生成第二个服务引用。观察：

```
namespace CableSolve.Web.Api.Tests.ServiceReference2 {
    using System.Runtime.Serialization;
    using System;

    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
    [System.Runtime.Serialization.CollectionDataContractAttribute(Name="ArrayOfInt", Namespace="http://tempuri.org/", ItemName="int")]
    [System.SerializableAttribute()]
    public class ArrayOfInt : System.Collections.Generic.List<int> {
    }

    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
    [System.ServiceModel.ServiceContractAttribute(ConfigurationName="ServiceReference2.WebService1Soap")]
    public interface WebService1Soap {

        // CODEGEN: Generating message contract since element name ids from namespace http://tempuri.org/ is not marked nillable
        [System.ServiceModel.OperationContractAttribute(Action="http://tempuri.org/HelloWorld", ReplyAction="*")]
        CableSolve.Web.Api.Tests.ServiceReference2.HelloWorldResponse HelloWorld(CableSolve.Web.Api.Tests.ServiceReference2.HelloWorldRequest request);
    }

    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
    [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced)]
    [System.ServiceModel.MessageContractAttribute(IsWrapped=false)]
    public partial class HelloWorldRequest {

        [System.ServiceModel.MessageBodyMemberAttribute(Name="HelloWorld", Namespace="http://tempuri.org/", Order=0)]
        public CableSolve.Web.Api.Tests.ServiceReference2.HelloWorldRequestBody Body;

        public HelloWorldRequest() {
        }

        public HelloWorldRequest(CableSolve.Web.Api.Tests.ServiceReference2.HelloWorldRequestBody Body) {
            this.Body = Body;
        }
    }

    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
    [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced)]
    [System.Runtime.Serialization.DataContractAttribute(Namespace="http://tempuri.org/")]
    public partial class HelloWorldRequestBody {

        [System.Runtime.Serialization.DataMemberAttribute(EmitDefaultValue=false, Order=0)]
        public CableSolve.Web.Api.Tests.ServiceReference2.ArrayOfInt ids;

        public HelloWorldRequestBody() {
        }

        public HelloWorldRequestBody(CableSolve.Web.Api.Tests.ServiceReference2.ArrayOfInt ids) {
            this.ids = ids;
        }
    }

    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
    [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced)]
    [System.ServiceModel.MessageContractAttribute(IsWrapped=false)]
    public partial class HelloWorldResponse {

        [System.ServiceModel.MessageBodyMemberAttribute(Name="HelloWorldResponse", Namespace="http://tempuri.org/", Order=0)]
        public CableSolve.Web.Api.Tests.ServiceReference2.HelloWorldResponseBody Body;

        public HelloWorldResponse() {
        }

        public HelloWorldResponse(CableSolve.Web.Api.Tests.ServiceReference2.HelloWorldResponseBody Body) {
            this.Body = Body;
        }
    }

    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
    [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced)]
    [System.Runtime.Serialization.DataContractAttribute()]
    public partial class HelloWorldResponseBody {

        public HelloWorldResponseBody() {
        }
    }

    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
    public interface WebService1SoapChannel : CableSolve.Web.Api.Tests.ServiceReference2.WebService1Soap, System.ServiceModel.IClientChannel {
    }

    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
    public partial class WebService1SoapClient : System.ServiceModel.ClientBase<CableSolve.Web.Api.Tests.ServiceReference2.WebService1Soap>, CableSolve.Web.Api.Tests.ServiceReference2.WebService1Soap {

        public WebService1SoapClient() {
        }

        public WebService1SoapClient(string endpointConfigurationName) : 
                base(endpointConfigurationName) {
        }

        public WebService1SoapClient(string endpointConfigurationName, string remoteAddress) : 
                base(endpointConfigurationName, remoteAddress) {
        }

        public WebService1SoapClient(string endpointConfigurationName, System.ServiceModel.EndpointAddress remoteAddress) : 
                base(endpointConfigurationName, remoteAddress) {
        }

        public WebService1SoapClient(System.ServiceModel.Channels.Binding binding, System.ServiceModel.EndpointAddress remoteAddress) : 
                base(binding, remoteAddress) {
        }

        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced)]
        CableSolve.Web.Api.Tests.ServiceReference2.HelloWorldResponse CableSolve.Web.Api.Tests.ServiceReference2.WebService1Soap.HelloWorld(CableSolve.Web.Api.Tests.ServiceReference2.HelloWorldRequest request) {
            return base.Channel.HelloWorld(request);
        }

        public void HelloWorld(CableSolve.Web.Api.Tests.ServiceReference2.ArrayOfInt ids) {
            CableSolve.Web.Api.Tests.ServiceReference2.HelloWorldRequest inValue = new CableSolve.Web.Api.Tests.ServiceReference2.HelloWorldRequest();
            inValue.Body = new CableSolve.Web.Api.Tests.ServiceReference2.HelloWorldRequestBody();
            inValue.Body.ids = ids;
            CableSolve.Web.Api.Tests.ServiceReference2.HelloWorldResponse retVal = ((CableSolve.Web.Api.Tests.ServiceReference2.WebService1Soap)(this)).HelloWorld(inValue);
        }
    }
} 
```

有没有搞错？**为什么 HelloWorld 的第二个参数的类型期望取决于另一个派生自抽象类或作为抽象类的参数的存在？是否可以让 HelloWorld 只期望没有 Foo 参数的 int[] id，而不期望 ArrayOfInt？**

# android - 另一个列表视图

> ID：12498145
> 
> 赞同：-1
> 
> 时间：2012-09-19T15:41:33.603
> 
> 标签：android, listview

我无法从 2 天开始显示 listview，阅读 android.develop、here 和 google 中的所有线程，但我无法弄清楚我的应用程序崩溃的原因。如果我从 ListShow() 中删除最后一行，则应用程序不会崩溃，但如果我 list.setAdapter(push); 该应用程序根本不启动。

MainActivity.java

```
public class MainActivity extends Activity {

//Main function
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Call all function to create
    TextCount();
    ListShow();
}

//Menu function
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

//Text counter function
public void TextCount() {
    int c=0;
    TextView t = new TextView(this); 
    t=(TextView)findViewById(R.id.file_counter); 
    t.setText((c)+" files loaded");
}

//List Function
public void ListShow() {
    String[] items= new String[] {"item 1", "item 2", "item 3", "item 4", "item 5",     "item 5"};

    ArrayAdapter<String> push = new ArrayAdapter<String>(this, R.layout.item, items);
    ListView list = (ListView) findViewById(R.id.list_view);
    list.setAdapter(push);
}
} 
```

main_activity.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<include layout="@layout/header" />

<View android:id="@+id/separator_up"
android:layout_width="fill_parent"
android:layout_height="1dp"
android:background="@color/blue_light"/>

<TextView
    android:id="@+id/file_counter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:text="@string/file_counter" />

<ListView
    android:id="@+id/list_view"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1" >
</ListView>

<View android:id="@+id/separator_down"
android:layout_width="fill_parent"
android:layout_height="1dp"
android:background="@color/blue_light"/>

<include layout="@layout/footer" />

</LinearLayout> 
```

项目.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/simple"
android:text="" >
</TextView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:47:42.177

我认为你的`ListView`行布局应该是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/simple"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

如果没有布局属性，它将无法工作。

此外，您应该始终发布带有 logcat 异常的堆栈跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:47:42.830

你设置

> setContentView(R.layout.activity_main);

但您的 xml 文件名是“main_activity.xml”。

你必须设置

> setContentView(R.layout.main_activity);

# java - 如何在 RestEasy 中从单个单例中公开多个接口

> ID：12498148
> 
> 赞同：0
> 
> 时间：2012-09-19T15:41:43.053
> 
> 标签：java, jax-rs, resteasy

假设我们有以下服务接口：

```
@Path("servicea")
public interface ServiceA {
    @GET void aMethod();
}

@Path("serviceb")
public interface ServiceB {
    @GET void anotherMethod();
} 
```

现在，使用 RestEasy，这些可以使用任何支持的配置轻松公开为 Rest 服务。在这种情况下，我们有一个实现 for`ServiceA`和一个 for `ServiceB`，我们通过 导出`org.jboss.resteasy.spi.Registry`，如下所示：

```
Registry registry = (Registry) servletContext.getAttribute("org.jboss.resteasy.spi.Registry");
registry.addSingletonResource(serviceAimpl);
registry.addSingletonResource(serviceBimpl); 
```

这工作正常。但是现在，假设将两个实现组合在一起，在一个类下是有意义的：

```
public class ServiceImpl implements ServiceA, ServiceB {
    ...
}

Registry registry = (Registry) servletContext.getAttribute("org.jboss.resteasy.spi.Registry");
registry.addSingletonResource(serviceImpl); 
```

我希望当我将此类的对象注册到 RestEasy 以公开两条路径时，但似乎它只公开了两条路径中的一条。有没有办法做到这一点？或者这是 RestEasy 中的一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:55:31.300

从逻辑上讲，Impl 类在类级别不能有两个`@Path`注释，并且在一个类中只能有一个`GET`方法没有`@Path`. 所以这是不可能的。你可以注释你的界面`methods`，`@Path`这将是荣幸的。

# android - Android Tabhost 在方向更改上更改选项卡

> ID：12498150
> 
> 赞同：1
> 
> 时间：2012-09-19T15:41:46.303
> 
> 标签：android, android-tabhost

我在我的主布局中使用 TabHost，它现在只有 2 个选项卡。如果我在第二个选项卡上并更改方向，应用程序会将我返回到第一个选项卡。有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:57:24.880

将以下代码添加到定义 tabHost 活动的清单文件中。Android 会自动保持选定选项卡的状态。

```
android:configChanges="orientation|keyboardHidden" 
```

它对我有用.. 并且还阅读了 dis Android 文档，它定义了其他技术来保持活动状态。[关联](http://developer.android.com/guide/topics/resources/runtime-changes.html)

# php - 读取远程服务器文件，列出目录

> ID：12498154
> 
> 赞同：0
> 
> 时间：2012-09-19T15:41:56.210
> 
> 标签：php, function, remote-server

我们正在最艰难地重写这个照片库功能。它在与图像相同的服务器上完美运行。现在，由于成本高昂，我们不得不将所有图像移动到另一台服务器。

图库功能在同一台服务器上运行良好。当我们尝试使用远程服务器路径时，例如： [http](http://www.myotherserver.com) ://www.myotherserver.com - 那就是它返回 NO 图像的地方？

我们找到了读取/列出没有图像文件的图像的“功能”，但我们无法对其进行解码以在远程服务器上使用它？

任何帮助或想法？谢谢。

这是功能：

注意：：我们不会使用带有图像顺序的 .txt 文件——我们只希望脚本读取目录并列出要使用的图像。

```
/**
 * Check for image order file. In case it does not
 * exists, read the image directory.
 */
  if (is_file($order_file_path . '/' . $order_file_name)) {

  $fp  = fopen($order_file_path . '/' . $order_file_name, "r");
    $row = '';
    $use_order_file = 'true';

    while ($data = fgetcsv ($fp, 1000, ';')) {
        $image_data[] = trim($data[0]);
        $image_file_names[trim($data[0])] = trim($data[0]);
        $num = count($data);
        $row++;

        for ($j = 0; $j < $num; $j++) {
            $content_data_temp['field_' . $j] = $data[$j];
        } 

        $content_data[] = $content_data_temp;
        $content_data_temp = '';
    } 
    fclose ($fp);
} else if (is_dir($image_path)) {
    $content_data = '';
    $handle = opendir($image_path);

    while ($file = readdir($handle)) {
        if (preg_match("/^\.{1,2}$/i", $file)) {
            continue;
        } 
        if (preg_match("/\.[a-z]{3}$/i", $file)) {
            $image_data[] = $file;
            $image_file_names[$file] = $file;
        } 
    } 
    closedir($handle);
} else {
    echo 'Image Path not working';
    exit;
} 

$image_number = count ($image_data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:17:37.237

您可以研究的一种选择是将远程图片目录挂载为 NFS 共享。这样，您的脚本就可以正常工作，因为 NFS 共享就像本地目录一样。

除此之外，您必须记住，您无法从一台服务器访问另一台服务器文件系统，因此该脚本将不起作用。我能想到的一个“脏”选项是在图片机器中设置一个带有索引的网络服务器，导航到“文件夹”并解析生成的 HTML。

# jquery - 在 jquery 中创建和删除 div

> ID：12498155
> 
> 赞同：0
> 
> 时间：2012-09-19T15:42:02.063
> 
> 标签：jquery

我在 div 中显示图像。如果图像不在 div 中，我目前正在隐藏 div。但是，根据页面中 div 的位置，如果 div 为空，我会在页面上看到木板点。如果 div 为空，我想折叠它。我目前正在这样做：

html代码：

```
 <div id="main" class="main1">
        <div id="div1" class="center"></div>
        <div id="div2" class="center"></div>
        <div id="div3" class="center"></div>

    </div>
    <div id="right" class="right1">
        <div id="div4" class="center"></div>
        <div id="div5" class="center"></div>
        <div id="div6" class="center"></div>
    </div>
</div> 
```

jQuery代码：

```
$(function () {
                $('#div3').html("").css({ "border": "", "margin": "0" });
                var myImage13 = new Image();
                $(myImage13).load(function () {
        $('#div3').show();
                $("#div3").html(myImage13).css({ "border": "2px solid #E0E0E0" });
                $('#div3').css({ "width": "500px", "height": "500px" });
                $('#div3 img').css({ "width": "500px", "height": "500px" });

                }).attr('src', img_src).error(function () {
                    $('#div3').html("").css({ "border": "", "margin": "0" });
            $('#div3').hide();
                })

            }); 
```

我尝试了 $('#div3').remove()，但这完全删除了 div。如果 div 在 jquery 中为空，有什么想法可以折叠它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:47:09.140

引用[.error](http://api.jquery.com/error/) jQuery 文档：

> 必须在浏览器触发错误事件之前附加事件处理程序，这就是示例**在附加处理程序后设置 src 属性的原因。**此外，当页面在本地提供时，错误事件可能不会正确触发；error 依赖于 HTTP 状态码，如果 URL 使用 file: 协议，一般不会触发。

换句话说，在您的代码中放置`.error`after ：`.attr`

```
...
.error(function() {
  $('#div3').html("")
            .css({ border: '', margin: 0 })
            .hide();
}).attr('src', img_src)
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:47:21.083

这是你要找的吗？

```
$(document).ready(function() { 
       $('div:empty').hide(); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:00:17.403

假设您的 div 除了图像之外没有其他元素，如果有的话，您可以试试这个

```
var elems = $('#div1, #div2, #div3 , #div4, #div5', #div6);
$.each(elems , function(){
     if( $(this).children.length() < 1)){
       $(this).hide()
     }
}); 
```

# mongodb - 按排序规则排序

> ID：12498156
> 
> 赞同：8
> 
> 时间：2012-09-19T15:42:03.493
> 
> 标签：mongodb, sorting, collation

有一个集合：

```
{"name": "a"},
{"name": "B"},    
{"name": "b"},    
{"name": "c"},    
{"name": "á"},    
{"name": "A"} 
```

前任。如何在不区分大小写的西班牙文中对其进行排序？

我试过这个：

```
var abc = [{"name": "a"}, {"name": "B"}, {"name": "b"}, {"name": "c"}, {"name": "á"}, {"name": "A"}];
for (i in abc) db.abc.save(abc[i]);

db.abc.find({},{"_id":0}).sort({"name":1}); 
```

输出是：

```
[
    { "name" : "A" },
    { "name" : "B" },
    { "name" : "a" },
    { "name" : "b" },
    { "name" : "c" },
    { "name" : "á" },
] 
```

期望的结果：

```
[
    { "name" : "a" },
    { "name" : "á" },
    { "name" : "A" },
    { "name" : "b" },
    { "name" : "B" },
    { "name" : "c" }
] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-11-03T16:15:12.967

尽管此处的其他答案对于 MongoDB 3.2.x 及更早版本是正确的，但从 3.4.0 开始，您可以“为集合或视图、索引或支持排序规则的特定操作指定排序规则”。

[该功能的完整文档在这里](https://docs.mongodb.com/master/reference/collation/)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-04T05:55:45.850

我知道这是一个旧线程，但我认为无论如何回答都会很有用。

您绝对不想在您的应用程序中进行排序，因为这意味着您必须将集合中的所有文档放入内存中才能对它们进行排序并返回您想要的窗口。如果您的收藏量很大，那么这是非常低效的。数据库应该进行排序并将窗口返回给您。

但是，您说，MongoDB 不支持对区域设置敏感的排序。你如何解决问题？神奇的是“排序键”的概念。

基本上，假设您有从“a”到“z”的常规英语/拉丁字母。您要做的是创建一个从“a”到“01”以及从“b”到“02”等到“z”到“26”的排序键映射。也就是说，将每个字母按该语言的排序顺序映射到一个数字，然后将该数字编码为字符串。然后，将要排序的字符串映射到这种类型的排序键。例如，“abc”将变为“010203”。然后使用属性的排序键将属性添加到文档中，并将属性名称附加到区域设置的名称中：

```
{
    name: "abc",
    name_en: "010203"
} 
```

现在，您可以通过对属性“name_en”进行索引来以语言“en”进行排序，并对选择器和范围使用简单的、基于英语的 MongoDB 排序而不是“name”属性。

现在，假设您有另一种疯狂的语言“xx”，其中字母的顺序是“acb”而不是“abc”。（是的，有些语言会以这种方式混淆拉丁字母的顺序！）排序键是这样的：

```
{
    name: "abc",
    name_en: "010203",
    name_xx: "010302"
} 
```

现在，您所要做的就是在 name_en 和 name_xx 上创建索引并使用常规 MongoDB 排序以便在这些语言环境上正确排序。基本上，额外的属性是在不同语言环境中排序的代理。

那么你从哪里得到这些映射，你问？毕竟，你不是全球化专家，对吧？

好吧，如果您使用的是 Java、C 或 C++，那么有现成的类可以为您执行此映射。在 Java 中，使用标准的 Collat​​or 类，或者使用 icu4j Collat​​or 类。如果您使用 C/C++，请使用 ICU Collat​​or 函数/类的 C/C++ 版本。对于其他语言，除非你能找到一个已经这样做的库，否则你有点不走运。

这里有一些链接可以帮助您找到它们：

标准 Java 库 Collat​​or：[http://docs.oracle.com/javase/7/docs/api/java/text/Collat​​or.html#getCollat​​ionKey(java.lang.String)](http://docs.oracle.com/javase/7/docs/api/java/text/Collator.html#getCollationKey(java.lang.String))

C++ 整理器类：[http ://icu-project.org/apiref/icu4c/classicu_1_1Collat​​or.html#ae0bc68d37c4a88d1cb731adaa5a85e95](http://icu-project.org/apiref/icu4c/classicu_1_1Collator.html#ae0bc68d37c4a88d1cb731adaa5a85e95)

您还可以创建不同的排序键，允许您对每个区域设置不区分大小写（是的，大小写映射是区域设置敏感的！）和不区分重音，不区分 Unicode 变体，或以上任意组合。唯一的问题是，现在您有许多与每个可排序属性平行的属性，当您更新基本“名称”属性时，您必须使它们保持同步。这对于你知道什么是一种痛苦，但它仍然比在你的应用程序或业务逻辑层中进行排序要好。

还要小心带有范围的游标。例如，在英语中，我们只是忽略了字符上的重音。因此，“Ö”的排序方式与“O”相同，它将出现在“M”到“Z”的范围内。但是，在瑞典语中，重音字符排在“Z”之后。因此，如果您使用“M”-“Z”范围，您将包含一堆以“Ö”开头的记录，这些记录应该在英语中出现，而不是在瑞典语中。

如果您在文档的文本属性上进行拆分，这也会对分片产生影响。请注意哪些范围进入哪个分片。最好对不区分区域设置的事物（例如哈希）进行分片。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T15:52:49.267

目前，MongoDB 没有实现排序规则。

实施[Unicode 排序标准](http://unicode.org/reports/tr10/)是解决这个问题的最佳方法。

但这会使排序变慢，索引变大。所以现在，最好在你的应用程序中进行排序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-01T20:12:40.493

一个简单的解决方法是创建一个将文本转换为纯 ascii 字符的新字段。

```
{ "name": "Ánfora", "name_sort": "anfora" }
{ "name": "Óscar", "name_sort": "oscar" }
{ "name": "Barça", "name_sort": "barc~a" }
{ "name": "Niño", "name_sort": "nin~o" }
{ "name": "¡Hola!", "name_sort": "hola!" }
{ "name": "¿qué?", "name_sort": "que?" } 
```

然后只需按“name_sort”排序

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T15:47:47.327

不幸的是，您还不能进行不区分大小写的排序，现在按“索引”顺序排序返回。有一张开票：

[https://jira.mongodb.org/browse/SERVER-90](https://jira.mongodb.org/browse/SERVER-90)

您可能会考虑跳过 mongo 中的排序，并在您的应用程序中执行此操作。

# f# - F# 中的 Haskell 样式中缀运算符

> ID：12498159
> 
> 赞同：5
> 
> 时间：2012-09-19T15:42:12.900
> 
> 标签：f#

有一个常见问题是 F#[本身不支持中](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2313479-provide-the-option-of-having-infix-notation-on-fun)缀样式使用 Haskell 中可用的函数：

```
isInfixOf :: Eq a => [a] -> [a] -> Bool
isInfixOf "bar" "foobarbaz"
"bar" `isInfixOf` "foobarbaz" 
```

可以在[这里](https://stackoverflow.com/a/3765532/974789)找到最知名的 F# 解决方案：

```
let isInfixOf (what:string) (where:string) =
    where.IndexOf(what, StringComparison.OrdinalIgnoreCase) >= 0
let found = "bar" |>isInfixOf<| "foobarbaz" 
```

此外，使用本地运算符优先级很容易对其进行一些改进：

```
let ($) = (|>)
let (&) = (<|)
let found = "bar" $isInfixOf& "foobarbaz" 
```

还有 XML-ish `</style/>`，[在此处](http://cs.hubfs.net/topic/None/58599)进行了描述。

**我想找到一个更好的解决方案，具有以下标准：**

*   不破坏常用运算符的单字符运算符（或一对）；
*   它应该是相同的字符，同样重音（反引号）字符在 Haskell 中服务；
*   它不应该破坏关联性（支持链接）：

    ```
    let found = "barZZZ" |>truncateAt<| 3 |>isInfixOf<| "foobarbaz" 
    ```

*   可选地，它应该支持采用元组的函数：

    ```
    let isInfixOf (what:string, where:string) = ...
    // it will not work with |> and <| 
    ```

*   或者，它应该优雅地处理函数/3：

    ```
    val f: 'a -> 'b -> 'c -> 'd = ...
    let curried = a |>f<| b c
    // this wouldn't compile as the compiler would attempt to apply b(c) first 
    ```

PS 也欢迎各种编码技巧，因为我相信好的技巧（当 F# 开发团队检查时）可以成为未来语言的一部分。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-19T16:37:21.183

我同意在某些情况下，在 Haskell 中将函数转换为中缀运算符的能力很巧妙。但是，我不确定此功能是否适合通常的 F# 编程风格，因为可以使用成员来实现相同的功能。

例如，让我们使用您的代码片段`truncateAt`and `isInfixOf`：

```
let found = "barZZZ" |>truncateAt<| 3 |>isInfixOf<| "foobarbaz" 
```

如果我们将`TruncateAt`and定义`IsInfixOf`为 的扩展方法`string`，那么您可以编写：

```
let found = "barrZZZ".TruncateAt(3).IsInfixOf("foobarbaz") 
```

这个版本更短，我个人认为它也更具可读性（尤其是对于具有 .NET 编程背景而不是 Haskell 背景的人）。您还可以在点击 时获得 IntelliSense `.`，这是一个不错的奖励。当然，您必须将这些操作定义为扩展方法，因此您需要更仔细地考虑库的设计。

为了完整起见，扩展方法定义如下：

```
type System.String with
  member what.IsInfixOf(where:string) = 
    where.IndexOf(what, StringComparison.OrdinalIgnoreCase) >= 0 
  member x.TruncateAt(n) = 
    x.Substring(0, n) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T16:23:12.917

```
let (|<) f x = f x
let f = sprintf "%s%s"
let x = "A" |> f |< "B" |> f |< "C" //"ABC" 
```

# php - MySQL中的内联IF语句

> ID：12498162
> 
> 赞同：1
> 
> 时间：2012-09-19T15:42:23.397
> 
> 标签：php, mysql, if-statement, case

几天来我一直在头疼，找不到实现我想要做的事情的方法（我已经在网上搜索过！）。我尝试过使用 WHERE 子句、嵌套的 IF 和 CASE 函数都无济于事。

我有一张关于模型信息的表格。该信息包括一个名为“国家”的字段，这是他们实际居住的地方。还有一个名为“hideme”的字段，如果他们不想出现在来自该国家/地区的人的搜索结果中，则可以为 1，否则为 0。我正在使用 MaxMind 的 GeoIP DB 获取访问者所在的国家/地区。

所以这就是我想要的，更清楚地说：如果访问者来自美国，并且模型来自美国并且“hideme”字段为1，那么她不应该出现在结果中。我对 PHP 或获取国家代码没有问题，只是正确的 SELECT 语句。

到目前为止，这是我的代码：

```
$select = "SELECT user
       IF (country != '$country_id', country,
           IF (hideme = 1, 1, 0))
       FROM models";

$result = mysql_query($select);

while ($row = mysql_fetch_array($result))
{
echo $row[user];
} 
```

提前谢谢各位！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:44:35.850

我想你想要一个 WHERE 子句

```
SELECT user
FROM   models
WHERE NOT (country = '$country_id' AND hideme) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:45:27.420

也许我没有正确理解您的问题，但不仅仅是：

```
SELECT user FROM models WHERE country = '$country_id' AND hideme = 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:46:18.680

```
SELECT 
  user
FROM
  models
WHERE
  country != '$country_id' /* Those from another country */
  OR hideme = 0 /* .. or allowed to view, regardless of country */ 
```

这将返回来自另一个国家或将 hideme 设置为 0 的模型。这隐含地与返回模型相同，除了来自同一国家且 hideme 设置为 1 的模型，因此您也可以更改 where到：

```
SELECT 
  user
FROM
  models
WHERE
  NOT ( /* Except ... */
    country = '$country_id' /* .. those that are from the same country */
    AND hideme = 1 /* .. and having hideme set to 1\. */
  ) 
```

后者有点难以阅读，但与文字描述更接近。结果是相同的，假设您没有任何国家或 hideme 的值为 NULL 的记录。

# c# - 获取异常行号

> ID：12498167
> 
> 赞同：1
> 
> 时间：2012-09-19T15:42:40.480
> 
> 标签：c#, .net, vb.net, winforms, exception

> **可能重复：**
> [C# 异常没有给出行号](https://stackoverflow.com/questions/2191957/c-sharp-exceptions-not-giving-line-numbers)

在 C# winform 中，我有一个 catch 块

`Exception.ToString()`-> 获取异常信息和抛出异常的代码行号。

在开发中。环境中，我得到了行号，而当在生产中部署相同的 EXE 时，我没有得到行号，有什么想法吗？

如何在生产环境中获取 line #s？即使我尝试过 StackTrace

class 的`GetFileLineNumber()`，但它并没有在生产环境中给我带来 # 行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T15:45:09.730

仅当为引发异常的代码加载调试符号时，文件名和行号才可用。这些符号位于 .pdb 文件中，这些文件通常不与生产环境中的程序集一起部署。如果您部署这些文件，您应该在堆栈跟踪中获得行号信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:45:11.667

您需要将 PDB 文件与应用程序放在同一目录中才能获取此类信息。但是，发布版本通常不用于调试，所以我不知道为什么您需要来自发布版本的这些信息。

# windows - Windows 8 BottomAppBar 在代码中更改图标

> ID：12498169
> 
> 赞同：1
> 
> 时间：2012-09-19T15:42:42.507
> 
> 标签：windows, windows-runtime, windows-store-apps, winrt-xaml, appbar

我正在为 Windows 8 开发 Metro 应用程序，我很难在代码中更改 BottomAppBar 中的图标。我想有一个图标，表示声音已启用，当你点击它时，我希望它变为另一个图标，表示声音已被禁用

```
<Button x:Name="SoundsAppBarIcon" 
Style="{StaticResource SoundsEnabledAppBarButtonStyle}"
Tag="Sounds"
Click="SoundsAppBarIcon_Click"/> 
```

在那种风格中`<Setter Property="Content" Value="&#xE189;"/>`，我不知道这是什么`&#xE189`意思。

无论如何，我试图做这样的事情，但它也没有奏效

```
<Button x:Name="SoundsAppBarIcon" 
        Tag="Sounds"
        Click="SoundsAppBarIcon_Click">
    <Button.Content>
        <Image Source="Assets/Images/SoundsDisabled.png"/>
    </Button.Content>
</Button> 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:22:20.093

& #xE189; 是字符代码。

您可以通过打开 Character Map，为字体选择“Segoe UI Symbol”，然后向下滚动找到您喜欢的一个来获得更多图标。Microsoft 建议使用这些图标，而不是图像文件，以确保应用程序之间的一致性。

从字符映射中找到您喜欢的图标后，只需将其复制并粘贴到 XAML 中的内容设置器中。不要担心它在代码中显示为一个带有问号的框，它会在应用程序中正确显示。

# spring - 在 Spring MVC 应用程序启动时呈现请求

> ID：12498171
> 
> 赞同：1
> 
> 时间：2012-09-19T15:42:45.110
> 
> 标签：spring, spring-mvc

我正在开发一个 Spring/Spring MVC 应用程序，其中一切正常，但我对应用程序启动有一些疑问。

现在，当 Tomcat 启动并且应用程序启动时，即使我没有访问该站点，我也会在“主”控制器上收到渲染请求。好像是自动完成的。这个对吗？这可以被禁用吗？有什么理由默认这样做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:40:12.250

我发现当定义的 DispatcherServlet 像这样映射到 * 时：

```
<servlet-mapping>
    <servlet-name>WebDispatcher</servlet-name>
    <url-pattern>*</url-pattern>
</servlet-mapping> 
```

您总是会收到对映射到 / 的“家庭”控制器的请求

# ruby-on-rails - 在 Backbone.js 中过滤模型

> ID：12498172
> 
> 赞同：0
> 
> 时间：2012-09-19T15:42:52.237
> 
> 标签：ruby-on-rails, backbone.js, coffeescript

我有一个名称：字符串和状态：整数的项目模型。有5种状态。例如，我想将所有状态为 3 的项目放入#prospects div。我怎样才能使这项工作？

```
appendProject: (project) =>
  # this renders all projects
  view = new Trackproject.Views.Project(model: project)
  @$('#projects').append(view.render().el)
  # this is how i want it to work
  @$('#prospects').append(state3.render().el)
  @$('#upcoming').append(state4.render().el) 
```

我认为您可以在集合文件中对其进行过滤，但我不知道如何将其加载到视图中。

我使用 Rails、Backbone 和 Coffeescript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:41:18.663

```
_.each(projectCollection.where({state: 3}), function(project) {
    $('#prospects').append($('<span>' + project.get('name') + '</span>'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:04:29.063

正确答案是

```
 appendProject: (project) =>
    view = new Trackproject.Views.Project(
      model: project
    )
    state = project.get("state")
    if state is 1
      @$("#projects").append view.render().el
    else if state is 2
      @$("#prospects").append view.render().el
    else if state is 3
      @$("#upcoming").append view.render().el
    else if state is 4
      @$("#current").append view.render().el
    else if state is 5
      @$("#completed").append view.render().el
    else
      @$("#projects").append view.render().el 
```

# javascript - 在 For 循环中将 onClick 应用于元素数组

> ID：12498187
> 
> 赞同：5
> 
> 时间：2012-09-19T15:43:32.707
> 
> 标签：javascript, loops, onclick

我正在尝试将 onClick 事件应用于文档中的元素数组，如下所示：

```
for (var i = 0; i < myElems.length; i++)
     myElems[i].onClick = "someFunction(this)"; 
```

代码放置在 body 标记的 onLoad 事件的 init() 函数内。我注意到当文档加载时，这些功能将不起作用。

我注意到，如果我添加一个 alert() 来告诉我该函数是否是问题所在：

```
for (var i = 0; i < myElems.length; i++)
     myElems[i].onClick = "alert('It worked!')"; 
```

该文档将为所有元素加载并执行警报，而不考虑我是否实际单击了该元素。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:46:59.500

您需要将“onclick”处理程序分配给一个函数：

```
for (var i = 0; i < myElems.length; i++)
     myElems[i].onclick = function() { someFunction(this);}; 
```

直接分配您的“警报”呼叫将触发它（如您所见）。您要做的是将您的处理程序分配给将在事件触发时调用的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T15:52:01.443

属性名称是[`onclick`](https://developer.mozilla.org/en-US/docs/DOM/element.onclick)。

`onClick`即使是有效的 HTML，在 JS 中也不存在，因为它区分大小写。

此外，您还必须按照 David 的回答 (+1) 为其分配函数引用或表达式。

[**小提琴**](http://jsfiddle.net/ult_combo/62kQh/1/)

# android - 我可以为有和没有谷歌地图功能的手机构建一个应用程序吗（允许用户使用地图和其他人排除此功能）

> ID：12498192
> 
> 赞同：1
> 
> 时间：2012-09-19T15:44:01.637
> 
> 标签：android, google-maps, gps, android-manifest, android-internet

我正在构建一个具有多种有用功能的应用程序。一项活动使用谷歌地图。我是否可以让用户根据需要使用此功能，但将其从无法使用的旧手机中排除（类似于在线或离线玩视频游戏的方式）？我感到困惑的真正原因是因为我必须在整个应用程序的清单中声明这一点（如果用户没有地图功能，我有没有办法排除某个活动？）。我也将需要 gps 进行地图活动，但我不想将此应用程序限制为仅具有这些高级功能的手机，因为其他活动要简单得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:49:41.650

> 我感到困惑的真正原因是因为我必须在整个应用程序的清单中声明这一点（如果用户没有地图功能，我有没有办法排除某个活动？）

你可以把`android:required="false"`你的`<uses-library>`元素。然后，在运行时，检查是否`MapActivity`存在。如果是这样，您就有了 Google Maps SDK 插件，并且您可以启动您的`MapActivity`子类。如果`MapActivity`不存在，请执行其他操作。

这是一个示例项目，演示了这一点：[https ://github.com/commonsguy/cw-omnibus/tree/master/Maps/NooYawkMapless](https://github.com/commonsguy/cw-omnibus/tree/master/Maps/NooYawkMapless)

清单有：

```
<uses-library android:name="com.google.android.maps" android:required="false" /> 
```

启动器活动是：

```
package com.commonsware.android.maps;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Toast;

public class MapDetector extends Activity {
  @Override
  public void onCreate(Bundle instanceState) {
    super.onCreate(instanceState);

    try {
      Class.forName("com.google.android.maps.MapActivity");
      startActivity(new Intent(this, NooYawk.class));
    }
    catch (Exception e) {
      Toast
            .makeText(this,
                       "Google Maps are not available -- sorry!",
                       Toast.LENGTH_LONG)
            .show();
    }

    finish();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:09:40.033

是的，简短的回答。您可以检查处理程序是否可用于特定意图（例如谷歌地图），如果没有，则禁用将打开该屏幕的按钮。

我会尝试找到我以前用于此的代码...

编辑：

```
private boolean isCallable(Intent intent) {  
    List<ResolveInfo> list = getPackageManager().queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);  
    return list.size() > 0;  
} 
```

# java - Hypertable 的 Mutator 与共享的 Mutator (Java)

> ID：12498195
> 
> 赞同：0
> 
> 时间：2012-09-19T15:44:08.877
> 
> 标签：java, nosql, hypertable

Mutator 和 Shared Mutator 有什么区别？

在 Mutator 的规范中，有一个“flush_interval”（以毫秒为单位的自动刷新间隔；0 禁用它。）参数。

在 Shared Mutator 的规范中，它指出：

```
WARNING: Shared mutators sacrifice write durability guarantee because they buffer and flush mutations on a periodic time interval and the set_ methods return without knowing if the mutations succeeded or failed. 
```

[参考](http://hypertable.com/documentation/reference_manual/thrift_api/#sharedmutatorrefresh)

那么，如果两者都有刷新间隔有什么区别呢？

此外，两者都是线程安全的（在 Java 中）？

另外，在性能方面哪个更有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:26:28.477

在我看来，因为 Shared Mutators 不检查返回 atatement，它们会运行得更快并且可能允许多个并行操作。这是一个权衡，前提是它不能保证成功。

mutator 似乎更可靠，但需要更多时间（文件较小，差异可以忽略不计）。

当我有更多时间时，我会扩展它

# objective-c - NSZombies：识别代码中的确切对象？

> ID：12498200
> 
> 赞同：1
> 
> 时间：2012-09-19T15:44:25.647
> 
> 标签：objective-c, ios, xcode, nszombie

简而言之，我是一个 NSZombies 菜鸟。我刚刚开始尝试使用它们进行调试，因为直到现在，我已经能够在没有它们的情况下解决我的所有内存问题。

现在，我越来越...

```
[UIImage isKindOfClass:]: message sent to deallocated instance 0x8095f10 
```

有没有办法在我的代码中指出这一点？我的意思是，与仅仅出现崩溃/错误访问错误相比，这是一个很大的改进，但这仍然只是将其缩小到某种 UIImage 内存问题。理想情况下，我想说“您在 y 类的 x 行创建的 UIImage 在被释放后发送了 isKindOfClass 消息。”

另外，我很确定我的代码中没有任何地方首先使用将 isKindOfClass 发送到 UIImage 。UIImage 是否在其代码中的某处使用该方法？

编辑：更新标签。不小心有一个旧问题的标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:13:53.337

使用 Instruments 在 iOS 模拟器中运行您的应用程序并选择 Zombie 选项。

重新创建导致问题的条件，然后您应该能够查看隐藏系统符号的反向堆栈跟踪，它将带您直接到代码中引用僵尸的位置。它可能不会告诉您它在哪里被释放，但它肯定会帮助您缩小错误的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:50:36.050

作为我自己的菜鸟，我只想说，当我在离开视图控制器之前未能取消我的代表时，我已经看到了这个错误，僵尸打开了。例如，如果我有 someObject.delegate = self，我可以通过在 viewWillDisappear 中设置 someObject.delegate = nil 来避免此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T09:22:12.953

在 Xcode 中的异常断点上拍打它会捕获僵尸（以及更多其他异常，C++ 和 Objective-C），因为它会在引发异常时保留任何状态，而不会超出 Objective-C 范围和`longjmp()`'d 超出所有范围进入`main()`.

这适用于模拟器和设备。从我在任何项目中放置第一行代码开始，我就几乎有了这个断点。

# mysql - 可以或不可以限制SQL？

> ID：12498204
> 
> 赞同：0
> 
> 时间：2012-09-19T15:44:32.883
> 
> 标签：mysql, sql, performance

我有很多查询，我知道应该返回 1 或 2 个结果。我应该明确限制它们还是让数据库完成他的工作？我的意思是我在 WHERE 使用唯一的键组合，或者当我可能多次获得相同的结果时，只需执行 LIMIT 1 而不是使用 DISTINCT ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:46:54.177

如果您*知道*它们应该返回 1 或 2 行，那么添加`LIMIT`意味着如果它们返回超过 1 或 2 行，您就隐藏了一个问题。这相当于通过像这样包装代码来吞下异常：

```
try{
    //some code
} 
catch{
    //do nothing
} 
```

所以，我不会`LIMIT`在这种情况下使用。相反，当这种情况发生时，我会在应用程序层中抛出一个错误（或记录它等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:47:32.847

如果查询返回的结果数量超过该数量是错误的，并且知道这对应用程序很重要，那么如果结果多于预期，则需要引发异常。

与此相关的是，无限查询可能会损害应用程序和 SQL 数据库的性能——如果预期只有 1 或 2 个值的结果集最终有数千个值，那么您可能会遇到麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:49:10.367

我使用`LIMIT`有两个原因：

1.  从更大的集合中返回已知数量的行（前 5 个用户，来自 X 个用户）
2.  为了不让我`DELETE`记录比我预期的更多的记录 :) 而且，在这种情况下，我将 LIMIT 设置为比我预期的大一，因此它不会掩盖@RedFilter 描述的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:57:51.590

一般来说，您希望限制访问的行数，因为较小的结果集运行得更快。

摘自 SQL Server 的* 查询性能调优：

> 查询应该请求相对较少的行数。例如，Web 上的搜索引擎一次只返回有限数量的文章，即使搜索条件返回了数千篇匹配的文章。如果查询请求大量行，则查找的开销增加会使索引不太合适。

或者，您可以创建一个高度选择性的标准：

> 具有高选择性的过滤条件将表中的行数限制为较小的结果集，并帮助优化器保持较低的查询成本。

**我知道问题被标记为 MySQL*

# ios5 - Xcode 4.4.1 编译链接错误：找不到文件，但文件存在？

> ID：12498208
> 
> 赞同：1
> 
> 时间：2012-09-19T15:44:41.700
> 
> 标签：ios5, xcode4, compiler-errors, file-not-found

这就是我所做的；

*   添加了一个新实体做 db-model 并让 modelbuilder 创建新的子类文件。
*   它要求替换>确定>文件出现在文件导航器中确定。
*   然后将它们 (6) 拖到模型组文件夹中 > 可见 + 已检查文件竞赛 ok。

然后，当尝试再次将项目构建到模拟器时，我得到了“重复文件......”。我再次从模型构建器中删除了所有子类文件+空垃圾>重建文件。

现在缺少一个子类文件 xm ？！错误无法编译...

> clang：错误：没有这样的文件或目录：'/Users/X/Documents/_iPhoneDev local/_CUSTOMER Projects/X/Version 0.2.5/X/Player.m' clang：错误：没有输入文件命令/Applications/Xcode 4.4 .1.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败，退出代码为 1

试过这个；

*   在管理器 > 项目 > 删除的派生数据中。
*   在 Product > Clean （和 alt+Project > Clean Build Folder）
*   从 iPhone 模拟器中删除的应用程序。
*   多次重建项目并再次完成上述操作。
*   甚至重新启动了我的 Mac！
*   试图恢复到今天早上的旧屏幕截图，但 Xcode 崩溃了（！）
*   搜索了类似的问题和提示。

**关于必须保存今天的工作的任何想法？还是我必须通过 TimeMachine 返回？**

（仅供参考：Xcode 4.4.1 / Target iOS 5.1 / Nextlatest MBP 完全打包......）

# php - 重定向 10 秒倒计时

> ID：12498209
> 
> 赞同：15
> 
> 时间：2012-09-19T15:44:46.367
> 
> 标签：php, html, redirect

我有一个页面在 10 秒后使用以下代码重定向用户。

```
<META HTTP-EQUIV="refresh" CONTENT="10;URL=login.php"> 
```

然后我有这个在 PHP 中回显的代码，并希望**“10”（秒）动态倒计时为 10、9、8、7 ......所以用户可以看到页面重定向之前剩下的秒数。**

```
echo "We cant find you on the system. <br/> Please return to the <b><a href='login.php'>Login</a></b> page and ensure that <br/>you have entered your details correctly. 
<br>
<br>
<b>Warning</b>: You willl be redirected  back to the Login Page <br> in <b>10 Seconds</b>"; 
```

我想知道是否有一种方法可以在 PHP 中完成，如果没有，实现相同目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-19T15:46:45.280

以下将立即将用户重定向到`login.php`

```
<?php
header('Location: login.php'); // redirects the user instantaneously.
exit;
?> 
```

您可以使用以下命令将重定向延迟 X 秒，但没有图形倒计时（感谢[user1111929](https://stackoverflow.com/users/1111929/user1111929)）：

```
<?php
header('refresh: 10; url=login.php'); // redirect the user after 10 seconds
#exit; // note that exit is not required, HTML can be displayed.
?> 
```

如果你想要一个图形倒计时，这里有一个 JavaScript 示例代码：

```
<p>You will be redirected in <span id="counter">10</span> second(s).</p>
<script type="text/javascript">
function countdown() {
    var i = document.getElementById('counter');
    if (parseInt(i.innerHTML)<=0) {
        location.href = 'login.php';
    }
if (parseInt(i.innerHTML)!=0) {
    i.innerHTML = parseInt(i.innerHTML)-1;
}
}
setInterval(function(){ countdown(); },1000);
</script> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-19T15:46:36.190

我会为此使用javascript

```
var counter = 10;
setInterval(function() {
    counter--;
    if(counter < 0) {
        window.location = 'login.php';
    } else {
        document.getElementById("count").innerHTML = counter;
         }
}, 1000);​ 
```

更新：http: [//jsfiddle.net/6wxu3/1/](http://jsfiddle.net/6wxu3/1/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-19T15:51:59.697

你不能用纯 PHP 做到这一点 - 但 javascript 是你的朋友。

更改您的 HTML 以将秒数放入`span`：

```
<b><span id="count">10</span> Seconds</b> 
```

然后删除您的`meta`标签并使用此 javascript：

```
var count = 10;
function decrement() {
    count--;
    if(count == 0) {
        window.location = 'login.php';
    }
    else {
        document.findElementById("count").innerHTML = "" + count;
        setTimeout("decrement", 1000);
    }
}
setTimeout("decrement", 1000); 
```

这将每秒递减页面上的计数，然后`login.php`在计数器达到 0 时重定向到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T15:47:45.800

`header("Refresh: 2; url=$your_url");`

切记不要在标题前放置任何 html 内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-18T10:17:26.317

这对于 3 秒重定向页面重定向到索引页面非常有效，但不会在屏幕上显示倒数计时器。

```
<?php
    echo "New record has been added successfully ! This page will redirect in 3 seconds";
    header('refresh: 3; url=index.php');
?> 
```

# jsf - 如何在 h:selectOneMenu 中将字符串转换为整数

> ID：12498210
> 
> 赞同：7
> 
> 时间：2012-09-19T15:44:45.547
> 
> 标签：jsf, jsf-2

我想在 JSF hLselectOneMenu 中将字符串转换为整数。

```
<h:selectOneMenu id="rowsPerPage" value="#{AccountsController.rowsPerPage}" converter="javax.faces.Integer" maxlength="3">                                    
    <f:selectItem itemValue="10" itemLabel="10" />
    <f:selectItem itemValue="50" itemLabel="50" />
    <f:selectItem itemValue="100" itemLabel="100" />
    <f:selectItem itemValue="500" itemLabel="500" />                                    
    <f:selectItem itemValue="094332" itemLabel="Custom" />
    <f:ajax render="customrowperpage" />
</h:selectOneMenu>&nbsp;
    <h:inputText id="customrowperpage" value="#{AccountsController.rowsPerPage}" rendered="#{AccountsController.rowsPerPage == '094332'}" required="true" /> 
```

我如何在 JSF 页面中做到这一点？

PS 我更新了代码，但 AJAX 代码不起作用。当我选择“自定义”时，不会呈现输入字段。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T16:54:55.127

通过转换器属性添加整数转换器。

```
<h:selectOneMenu converter="javax.faces.Integer"/> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T16:38:25.377

这里有几个问题。

*   `size`组件没有命名属性`h:selectOneMenu`。删除这个。

*   选择项`custom`无法解析为整数，因此只要该选择项存在就会出错。

*   您需要在`h:selectOneMenu`组件中添加一个数字转换器。 `<f:convertNumber integerOnly="true" />`

一旦解决了这些问题，将组件的值绑定到 Integer 类型的托管属性就没有问题了。

# oracle - 用于插入数据的 Oracle 批量收集脚本

> ID：12498211
> 
> 赞同：0
> 
> 时间：2012-09-19T15:45:04.383
> 
> 标签：oracle, bulk, oracle-cursor, bulk-collect

我有以下脚本

```
DECLARE

CURSOR cursor1 IS
    SELECT *
    FROM table1;

TYPE cursor_aat IS TABLE OF cursor1%ROWTYPE;        

l_cursor cursor_aat;

BEGIN        
    OPEN cursor1;

    LOOP

        FETCH cursor1
        BULK COLLECT INTO l_cursor LIMIT 200;

        FOR INDX IN 1 .. l_cursor.COUNT LOOP            
            INSERT INTO new_table
            (col1, col2)
            values
            (l_cursor(INDX).col1, l_cursor(INDX).col2);

        END LOOP;

        EXIT WHEN l_cursor.COUNT < 200;
    END LOOP;

END; 
```

但它抱怨它不承认`l_cursor(INDX).col1`。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:13:25.503

你为什么首先使用那个循环？它会减慢速度并在服务器上造成不必要的资源消耗。

整个 PL/SQL 脚本可以用一条语句替换：

```
INSERT INTO new_table
(col1, col2)
SELECT col1, col2
FROM table1; 
```

要从 table1 中仅复制 200 行，请使用以下命令：

```
INSERT INTO new_table
(col1, col2)
SELECT col1, col2
FROM table1
WHERE rownum < 200; 
```

请注意，这不能保证复制哪些行，因为 SELECT 语句可以按任何顺序返回行。如果您想要 200 个特定行，则需要应用 order by。

# sql-server - 什么被认为是 SQL Server 中的“大”表？

> ID：12498217
> 
> 赞同：25
> 
> 时间：2012-09-19T15:45:14.587
> 
> 标签：sql-server

我有一张表，里面有 1000 万条记录。这算不算很多记录？我应该担心搜索时间吗？如果不是，它会一直增长，那么什么*才算*大表呢？表大小对搜索时间的影响有多大，我能做些什么来改善这些问题，最好是在它们成为问题之前？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-19T15:48:07.643

“大”就像“聪明”——它是相对的。1000 万行是一个不错的大小，但表是否很大取决于许多因素：

*   有多少*列*，它们的数据类型是什么？
*   有多少索引？
*   表格的实际大小是多少（例如页数 * 8kb，您可以从中获得`sys.dm_db_partition_stats`）？
*   针对它运行什么类型的查询？
*   单个索引是否保存在内存中，或者大多数查询是否受益于聚集索引扫描（本质上，整个表需要在内存中）？
*   机器上有多少内存？
*   *你*认为什么大？

搜索时间不一定取决于大小本身，而是索引策略的有效性和您为搜索运行的查询类型。如果您有以下情况：

```
WHERE description LIKE '%foo%' 
```

那么一个正常的指数对你没有任何帮助，你应该开始担心了。对于这种情况，您可以考虑全文搜索。

具有单个 INT 列的表（例如 Numbers 表）中的 1000 万行不算什么。1000 万行带有长描述、XML、地理数据、图像等的产品是另一回事。

SQL Server 的最大容量规范没有记录表中行数的上限是有原因的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-19T15:51:28.043

*large*在数据库设计中不是一个有用的概念。

性能由很多因素决定，但标签`large`不是其中之一。相反，请关注：

*   硬件
*   操作系统和数据库配置
*   架构设计
*   索引
*   查询优化
*   最重要的是，在具有同等数据量和并发使用的同等硬件上进行测试

只有这样，您才会得到与您相关的答案。除此之外，应用程序设计也是一个重要因素。N+1 查询和缓存会对感知（和实际）性能产生巨大影响。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-19T16:16:34.537

正如亚伦所说，这是相对的。但也许我可以详细说明一些。

首先，一个主要因素是列有多大。如果你有一个只有 1000 万个整数的表（并且有一些原因你可能想要这样的东西，看看[Tally Tables](http://www.sqlservercentral.com/articles/T-SQL/62867/)。）那么它根本就不大。另一方面，如果每行包含一个 id 字段，其中一个整数作为主键，然后是一个带有 html 的 varchar(max)然后是一系列 varbinary(max) 列，其中包含该 html 使用的 jpgs。

因此，要掌握表格的大小，您需要同时查看行数和每行的大小。一个可能更有用的尺寸指标是查看它占用的空间。（假设这晚于 SQL Server 2000，您可以在 SSMS 中右键单击表，转到属性，然后到存储页面。）

当然，仍然很难说什么时候会开始影响性能。一旦表变得太大而无法容纳在 RAM 中，您肯定会注意到性能的变化，但是对于大小合适的数据集，这种情况经常发生，特别是如果您选择部分非规范化并且不需要担心。拥有太大而无法放入 RAM 的索引可能会导致更大的性能问题，并且可能需要进行评估。但这不一定是问题，特别是如果它是某些查询的覆盖索引并且您正在使用 RAM 受限的环境（RAM 受限的含义也是相对的，但是对于粗略的经验法则，我会尝试即使是要使用 SQL Server 进行认真工作的桌面，也至少要放置 8 GB）。

现在，表大小当然可以成为搜索速度的一个因素，并且有一些方法可以处理它。但在我谈论这些之前，让我指出，这通常是我在性能方面会考虑的较小因素之一。[我最近在这里](http://www.sqlservercentral.com/articles/Performance/71001/)写了一篇关于这个的文章。在考虑表大小之前，我会确保查询已经过优化，并且索引是有意义的。在担心表大小之前，我什至会考虑增加 RAM 并获得更快的硬盘驱动器（如果您能负担得起足够大的硬盘驱动器， [SSD](http://timothyawiseman.wordpress.com/2012/07/29/the-effects-of-an-ssd-on-sql-server-performance/)会有所作为）。

但是，如果你想减小表大小：

*   标准化。这实际上可能对性能有一些很大的缺点，但它可能具有一些性能优势，并且具有大数据一致性优势以及存储优势。
*   考虑您的数据类型。如果需要 NVarchar，则需要 NVarchar。但是如果 varchar 可以工作，那么它将占用更少的空间。与 int 与 bigint 相同。
*   分割。同样，做错了会降低性能而不是提高性能，但做对了可以帮助提高性能。谨慎行事可能有点棘手。
*   将旧的、不必要的数据移到档案仓库并移出主系统。当然，这取决于正确定义不必要的数据。

**概括：**

这比我预期的要长，所以总结一下：

1.  大是相对的，但您必须考虑列大小以及行数。
2.  表大小肯定会影响性能，但还有很多其他因素会影响它，所以我不会先看，甚至不会看第二。
3.  如果一定要减小表大小，基本上把不需要的数据去掉，把其他数据重新分配到其他地方。但是你必须聪明地知道如何或你可以做的弊大于利。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T15:52:59.927

一切都是相对的...

我曾经是一家设计、构建和托管营销数据库的公司的 DBA，拥有数十亿行的数据库并不少见。因此，其他具有数百万行的数据库被认为是“小”的。

此外，在任何模式中往往会有一些表具有大量数据（例如事务），而其他可能是较小的查找表。

我要说的是，桌子不会变“大”。

如果您有一张大桌子，那么这肯定是一个可能的优化候选者。我说“可能”是因为表变得非常大但很少用于查询（例如某种历史表）是完全合理的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T16:46:30.343

与其他海报一样，关于“大”的程度取决于您的数据是什么，您想要执行什么样的查询，您的硬件是什么，以及您对原因搜索时间的定义是什么。

但这里有一种定义“大”的方法：“大”表是指超出主机可以分配给 SQL Server 的实际内存量的表。SQL Server 完全能够处理大小大大超过物理内存的表，但是任何时候查询需要对这样的表进行表扫描（即读取每条记录），您都会遇到麻烦。理想情况下，您希望将整个表保存在内存中；如果这不可能，您至少希望将必要的索引保留在内存中。如果您有一个支持您的查询的索引，并且您可以将该索引保存在 RAM 中，那么性能仍然可以很好地扩展。

如果你作为设计者不清楚你的聚集索引（数据的物理排列）和非聚集索引（指向聚集索引的指针，本质上）应该是什么，SQL Server 带有非常好的分析工具，可以帮助你定义以适合您的工作负载的方式建立索引。

最后，考虑在问题上投入硬件。SQL Server 的性能几乎总是受内存限制而不是 CPU 限制，因此不要购买快速的 8 核机器并用 4 GB 物理内存削弱它。如果您需要 100 GB 数据库的可靠低延迟，请考虑将其托管在具有 64 GB 甚至 128 GB 内存的机器上。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-20T19:31:14.063

如果您在任何表中都有 1000 万条记录，那么现在是查看相同记录的时候了。如果它与任何类型的审核日志相关，则可以，但否则您必须注意性能。

# ruby-on-rails - 如何在 rspec 中测试应用程序控制器（获取请求）？

> ID：12498225
> 
> 赞同：2
> 
> 时间：2012-09-19T15:45:41.307
> 
> 标签：ruby-on-rails, rspec

我想在我的应用程序控制器中测试一个获取请求，我的规范如下所示：

```
describe "GET some_get_method" do 
     it "should work" do
       get :some_get_method
    end
  end 
```

但是当我这样做时，我收到以下错误：

```
Failure/Error: get :some_get_method
     AbstractController::ActionNotFound:
       The action 'some_get_method' could not be found for ApplicationController 
```

我的应用程序控制器看起来像：

```
def some_get_method
    vari = params[:vari]

    if !vari
      render_something
      return false
    end
    true
  end 
```

在我的路线中，我有：

```
namespace :application do
    get 'some_get_method/', :action => :some_get_method
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:53:02.053

直接为功能测试指定规范可能不合适`ApplicationController`，因为您真正感兴趣的是从它派生的控制器的行为。

但是，为了对 中的方法进行单元测试`ApplicationController`，您可以在规范文件中创建一个存根控制器（或者，更恰当地说，是一个测试助手），它除了公开您想要测试的方法之外什么都不做`ApplicationController`：

```
class StubController < ApplicationController
end 
```

您现在可以直接测试`Stub`的方法（真正`Application`的方法），而无需尝试实例化抽象类。

**设置路由**

如果您需要测试渲染，一种方法可能是添加 RSpec 的请求处理程序可访问的仅测试路由：

```
# in config/routes.rb
unless Rails.env.production?
  namespace :stub do
    get 'some_get_method', :action => :some_get_method
  end
end

# in spec
describe "GET some_get_method" do 
  it "should work" do
     get :some_get_method
     # test
  end
end 
```

# android - 从 Service Android 调用 toast 时出错

> ID：12498226
> 
> 赞同：8
> 
> 时间：2012-09-19T15:45:46.347
> 
> 标签：android, multithreading, android-service, toast

> **可能重复：**
> [从服务启动的 Android Toast 仅显示一次](https://stackoverflow.com/questions/4025082/android-toast-started-from-service-only-displays-once)

我正在使用 android.app.Service 中定义的 Service Android。

我从一个活动中调用这个服务（myService）。

我的服务是：

```
public class myService extends Service{

 public IBinder onBind(Intent intent){
    return null;
}

public void onCreate(){
    super.onCreate();
    TimerTask task = new TimerTask(){
        public void run(){
            Log.i("test","service running");
            checkDate();            
        }           
    };
    timer = new Timer();
    timer.schedule(task, 0, 20000);
}

 public void checkDate(){
    Toast toast = Toast.makeText(this, "SIMPLE MESSAGE!", Toast.LENGTH_LONG);
    toast.show();
}

} 
```

方法 checkDate() 位于 myService 类中。

产生的错误是：

```
 09-19 15:41:35.267: E/AndroidRuntime(2026): FATAL EXCEPTION: Timer-0
 09-19 15:41:35.267: E/AndroidRuntime(2026): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
 09-19 15:41:35.267: E/AndroidRuntime(2026):    at android.os.Handler.<init>(Handler.java:121)
 09-19 15:41:35.267: E/AndroidRuntime(2026):    at android.widget.Toast$TN.<init>(Toast.java:310)
 09-19 15:41:35.267: E/AndroidRuntime(2026):    at android.widget.Toast.<init>(Toast.java:84)
 09-19 15:41:35.267: E/AndroidRuntime(2026):    at android.widget.Toast.makeText(Toast.java:226) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-19T15:58:16.923

`TimerTask`在单独的线程中运行。`Toast.makeText()`必须从已建立`Handler/Looper`. 基本上，这意味着您需要在其中运行标准 Android 消息/事件调度程序的线程上进行祝酒。

~~最简单的方法是使用您的`checkDate()`方法：~~

 ~~```
runOnUiThread(new Runnable() {
    public void run() {
        Toast toast = Toast.makeText(this, "SIMPLE MESSAGE!", Toast.LENGTH_LONG);
        toast.show();
    }
 }); 
```~~  ~~**编辑：我是个白痴，这是不对的。您不能从服务上下文调用 runOnUiThread()**

您需要为此使用处理程序。在您的服务中：

```
private Handler handler; 
```

在`onCreate()`您的服务中：

```
handler = new Handler(); 
```

在`checkDate()`方法中：

```
handler.post(new Runnable() {
    public void run() {
        Toast toast = Toast.makeText(myService.this, "SIMPLE MESSAGE!", Toast.LENGTH_LONG);
        toast.show();
    }
 }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T15:54:17.877

您从工作线程中调用它。您需要从主线程中调用 Toast.makeText() （以及处理 UI 的大多数其他函数）。例如，您可以使用处理程序。

您需要从 UI 线程调用 Toast.makeText(...) ：

```
activity.runOnUiThread(new Runnable() {
  public void run() {
    Toast.makeText(activity, "Hello", Toast.LENGTH_SHORT).show();
  }
}); 
```~~

# visual-studio-2010 - 如何在不完全禁用的情况下隐藏 ReSharper 代码分析菜单

> ID：12498228
> 
> 赞同：4
> 
> 时间：2012-09-19T15:45:49.400
> 
> 标签：visual-studio-2010, resharper

我正在评估 ReSharper，到目前为止它还不错。但是我无法忍受光标旁边出现的小动作列表弹出窗口：![在此处输入图像描述](../Images/03b892fa3c2570077f1d741a2cbde854.png)

也就是说，我发现一些选项很有用。理想情况下，我只会在单击`Alt`+时看到菜单`Enter`。

我知道我可以通过取消选中“启用代码分析”来完全禁用此功能，但正如我所说，我更愿意保留该功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-30T09:47:13.060

在带有 R# 9.1 的 VS2013 中，弹出窗口位于排水沟中，不会遮挡您的代码：

![在此处输入图像描述](../Images/84ea2d801bda2f0c7d882d46d1ab6275.png)

# jquery - 单击其他元素时激活按钮

> ID：12498234
> 
> 赞同：1
> 
> 时间：2012-09-19T15:46:02.323
> 
> 标签：jquery, html, button

我希望这很简单，但我希望在单击页面上的某个元素后激活一个特定按钮。

到目前为止，我已经查看了按钮的类并添加了一个 .click 函数，但不幸的是，这不起作用。

任何建议都将受到欢迎。

注意* 此按钮没有包含在链接中的 url，但会激活一个滑块。

修改后的代码

```
$r(document).ready(function() {

      function clickme(){
        $r('.coda-nav ul li a.current').click();  
      };

      $r('#open').click(function () {
        $r('#expandable-2').show('slow');
        clickme();
      });
       $r('#close').click(function () {
        $r('#expandable-2').hide('1000');
        clickme();
      });
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:51:36.283

您的问题有点不清楚-您是否要单击 Div 元素（例如），并且该单击的行为就像您单击了按钮（或类似按钮）一样？如果是这样，请尝试

编辑：刚刚看到您对另一个答案的评论。认为这应该这样做：

```
$("#button1").click(function() {
  $("#button2").click();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:52:41.093

首先禁用加载按钮，然后在单击链接时启用它

```
$(document).ready(function(){

    $('#buttonID').attr("disabled","disabled");

    $('.certainElement').click(function(e){

          $('#buttonID').removeAttr("disabled");

    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:48:43.163

看到[这个](http://jsfiddle.net/7nx8M/)小提琴：

```
// html
<button id="first">Test</button>
<br />
<button id="second" disabled>Test 2</button>​

// js
$("#first").click(function(){

   $("#second").attr("disabled", false); 

});​ 
```

编辑：[在这里更新](http://jsfiddle.net/7nx8M/1/)

```
// html
<button id="first">First</button>
<br />
<button id="second">Second</button>​

// js
$("button").click(function(){

    alert($(this).attr("id"));
});

$("#first").click(function(){

   $("#second").click();

});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:50:30.430

我不知道您所说的“激活”是什么意思，所以我只是让一个按钮可见，假设它以前是隐藏的。[将show](http://api.jquery.com/show/)函数替换为您喜欢的任何内容。

```
$("#idOfOtherElement").click(function(){
    $("#idOfButton").show();
}); 
```

# c# - 无法运行 NUnit 测试

> ID：12498239
> 
> 赞同：4
> 
> 时间：2012-09-19T15:46:17.830
> 
> 标签：c#, .net, nunit

我安装了 NUnit 2.6.1 并尝试在 Windows 7 x64 上运行一个简单的测试。它会导致异常

> 试图加载格式不正确的程序。您可能正在尝试加载使用比 NUnit 当前运行的版本 (2.0.50727) 更高版本的 CLR 构建的程序集，或者尝试将 64 位程序集加载到 32 位进程中。

这很奇怪，因为`nunit.exe.config`看起来像下面

```
 <?xml version="1.0" encoding="utf-8" ?> 
- <configuration>
- <!-- 
   The GUI only runs under .NET 2.0 or higher. The
   useLegacyV2RuntimeActivationPolicy setting only
   applies under .NET 4.0 and permits use of mixed 
   mode assemblies, which would otherwise not load 
   correctly.

  --> 
- <startup useLegacyV2RuntimeActivationPolicy="true">
- <!--  Comment out the next line to force use of .NET 4.0 
  --> 
- <!--  <supportedRuntime version="v2.0.50727" /> 
  --> 
  <supportedRuntime version="v4.0.30319" /> 
  </startup>
- <runtime>
- <!--  Ensure that test exceptions don't crash NUnit 
  --> 
  <legacyUnhandledExceptionPolicy enabled="1" /> 
- <!--  Run partial trust V2 assemblies in full trust under .NET 4.0 
  --> 
  <loadFromRemoteSources enabled="true" /> 
- <!--  Look for addins in the addins directory for now 
  --> 
- <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <probing privatePath="lib;addins" /> 
  </assemblyBinding>
  </runtime>
  </configuration> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T15:50:00.417

这听起来不像 NUnit 的问题。这听起来像您的单元测试程序集不是为 32 位进程构建的。您确定您的单元测试程序集是为 32 位构建的吗？如果 NUnit 运行 32 位并且你的程序集是在 64 位上构建的（或者不是作为任何 CPU 构建的）你会遇到这个问题。调用应用程序确定程序集所需的位深度。您不能将 64 位 dll 与 32 位进程一起使用，反之亦然。

我提到这一点的唯一原因是因为您的问题说您正在尝试运行测试。如果 NUnit 配置不正确，它甚至不会启动。

# ruby-on-rails - 尝试使用电子表格 gem 修改现有文件，Excel 抱怨“缺少数据”

> ID：12498241
> 
> 赞同：3
> 
> 时间：2012-09-19T15:46:18.947
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, spreadsheet

我正在尝试编写一个 Rails 应用程序来自动化企业的几个手动流程。他们有大量不同的 Excel 电子表格，他们可以手动输入数据并在它们之间复制数据。我已经成功地使用“电子表格”gem 从他们的一些现有报告中读取数据（以便他们可以填充应用程序），并从应用程序中包含的数据生成 Excel 报告（因此他们有一种他们喜欢的格式） .

不过，这份报告引起了很多麻烦。它有 2 张工作表 - 第一张是交互式数据透视表，第二张是提供报告的原始数据。

我不知道如何使用电子表格 gem 从头开始​​构建它（它取决于嵌入在电子表格中的 VB 模块和数据透视表报告），所以我想我会使用现有报告作为模板并将新数据写入第二张。

我遇到的第一个障碍是文件在其中，`UTF-16LE`但电子表格一直试图将其写为`UTF-8`. 我终于把它弄明白了，现在文件已经生成了，但是当我在 Excel 中打开它时，我收到了大量的错误消息：

```
Excel found unreadable content in 'output.xls'. 
Do you want to recover the contents of this workbook? Yes No
File error: data may have been lost. 
```

然后Excel尝试`Open and Repair`文件......然后我得到：

```
Microsoft Visual Basic: File Not Found 
File error: data may have been lost. 
```

...再次。然后报告出现 - 第二页包含所有写入数据，但第一页不起作用 -`Repairs`文件状态：

```
Lost Visual Basic project. 
PivotTable report 'PivotTable1' on [...]PivotSheet was discarded due to integrity problems. 
```

知道为什么它会破坏/删除模板电子表格中的 VB 模块吗？

# c - 在 ubuntu 中将编号文字从 64 位编译器转换为 32 位编译器

> ID：12498250
> 
> 赞同：-1
> 
> 时间：2012-09-19T15:47:00.007
> 
> 标签：c, compiler-construction, bit-manipulation, bits, bit-shift

据我所知，在 64 位编译器中，（取决于编译器） unsigned long long 的最大大小可能类似于**18446744073709551615ull** ，所以当我想要我的 .c 程序时，我尝试搜索并将文字替换为**-1ul**由 32 位编译器编译，它确实有效，因为它等于 2^64 并且所有 64 位都是 1，所以 32 位的表示是 -1ul（我认为基于二进制补码）

但我想知道编号 **9223372036854775808ull**因为它是 2^(64-1) ，那么 32 位文字是什么？-2ul 还是 1ul????

谁能向我解释这个转换过程？不知怎的搞糊涂了……

阿米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:39:27.867

`9223372036854775808ull`是十六进制的，当你把它放入变量类型时`0x8000000000000000`变成（最后八个十六进制数字）。`0x00000000``int32`

看来您需要学习有关以二进制格式存储数据的基础知识。只需阅读相关的[wiki 页面](https://en.wikipedia.org/wiki/Two%27s_complement)和一些[文章](http://www.cs.cornell.edu/~tomf/notes/cps104/twoscomp.html)，并练习手动（在纸上）在不同表示之间转换数字。

# php - Apache 以无人身份运行，但 whoami 显示“root”或我的用户名

> ID：12498252
> 
> 赞同：1
> 
> 时间：2012-09-19T15:47:03.733
> 
> 标签：php, apache, ownership

问题是我`used ps aux | grep apache`说apache没有人运行。但后来我使用`exec("whoami")`了，它给出了不同的结果：root 或 gt。这取决于脚本的所有者。如果脚本由 拥有`root`，whoami 是`root`; 如果由 拥有`gt`，那么 whoami 是`gt`。我还检查了httpd.conf，apache用户是nobody，组是nobody。

那么有人能解释一下这件事吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:50:36.883

您正在使用 cgi 或 fast-cgi ，

要成为“nobody”，您需要使用 mod_php（php 作为 apache 模块）

[http://php.net/manual/en/security.apache.php](http://php.net/manual/en/security.apache.php)

> 当 PHP 用作 Apache 模块时，它会继承 Apache 的用户权限（通常是“nobody”用户的权限）。

[http://www.php.net/manual/en/security.cgi-bin.attacks.php](http://www.php.net/manual/en/security.cgi-bin.attacks.php)

> 对于出于某种原因不希望将 PHP 作为模块集成到服务器软件（如 Apache）或将使用 PHP 与不同类型的 CGI 包装器来创建安全的 chroot 和 setuid 环境的设置，使用 PHP 作为 CGI 二进制文件是一个选项脚本。

还有 SuPHP [https://serverfault.com/questions/7589/how-do-you-run-a-php-script-as-the-owner](https://serverfault.com/questions/7589/how-do-you-run-a-php-script-as-the-owner)

# c - 如何将命令行中的参数读入双精度值？

> ID：12498253
> 
> 赞同：5
> 
> 时间：2012-09-19T15:47:04.797
> 
> 标签：c

该程序首先被分叉，然后由 execlp 运行，它调用程序传入两个数字，一个幂和一个基数。

```
int main(int argc, char *argv[])
{
    int pid = getpid();
    printf("Calculator Process[%d]: started\n",pid);
    double base, power;
    sscanf(argv[1],"%d",&base);
    sscanf(argv[2],"%d",&power);
    double number = pow(base,power);
    printf("Calculator Process[%d]: %d ^^ %d == %d\n",pid,base,power,number);
    printf("Calculator Process[%d]: exiting\n",pid);
    return 1;
} 
```

假设我传入它的基数 3，幂 5。这就是我得到的：

```
base = 4263 - 这也恰好是 PID。
功率 = -1
提升权力：714477568

```

来电线路：

```
execlp("./calculator","./calculator",argv[1],argv[2],(char*)0); 
```

当我打印 argvs 时，我得到了它们的值（作为 char*，但转换失败）。

任何想法为什么我无法正确读取值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T15:51:05.873

要么读双：

```
double base, power;
sscanf(argv[1],"%lf",&base);
sscanf(argv[2],"%lf",&power); 
```

或扫描成整数：

```
int base, power;
sscanf(argv[1],"%d",&base);
sscanf(argv[2],"%d",&power); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:16:51.150

快速调整您的代码应该可以做到：

```
int main(int argc, char *argv[]) 
{
    int pid = getpid();
    printf("Calculator Process[%d]: started\n",pid);
    double base, power;
    base = atof(argv[1]);
    power = atof(argv[2]);
    double number = pow(base,power);
    printf("Calculator Process[%d]: %f ^^ %f == %f\n",pid,base,power,number);
    printf("Calculator Process[%d]: exiting\n",pid);
    return 1; 
```

}

1.  要将 char 数组转换为数字，您可以使用`atof()`
2.  不要忘记将 printf 更新为双精度，`%f`否则它们将不会显示在您的输出中！

# java - 为什么 NPE 使用 DatatypeConverter 的静态方法？

> ID：12498256
> 
> 赞同：10
> 
> 时间：2012-09-19T15:47:08.963
> 
> 标签：java, string, nullpointerexception, base64, type-conversion

我已经盯着这个短代码太久了，我一生都看不到它如何`NullPointerException`在第 6 行抛出一个。为什么是 NPE？

```
class ConvertTest {

    public static void main(String[] args) throws Exception {
        byte[] b = "Ha".getBytes("UTF-8");
        System.out.println("bytes: " + b.length);
        javax.xml.bind.DatatypeConverter.printBase64Binary(b);  // NPE!
    }
} 
```

### 输出

```
bytes: 2
Exception in thread "main" java.lang.NullPointerException
        at javax.xml.bind.DatatypeConverter.printBase64Binary(DatatypeConverter.java:547)
        at ConvertTest.main(ConvertTest.java:6)
Press any key to continue . . . 
```

### 更新

虽然许多错误报告都指向 1.7 变体，但我很惊讶地看到 Eclipse 被配置为使用`1.6.0_32`并且 TextPad 找到了一个版本`1.6.0-b105`（甚至没有意识到已安装！）。

两个 JRE 都因该 NPE 而失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:54:33.463

现在似乎 JDK7 中的 JAXB 中存在错误，正如 Camel 上的这个问题所证明的那样：

[https://issues.apache.org/jira/browse/CAMEL-4893](https://issues.apache.org/jira/browse/CAMEL-4893)

最终链接到 java.net 上的 JAXB 项目中的这个问题[https://github.com/javaee/jaxb-v2/issues/860](https://github.com/javaee/jaxb-v2/issues/860)。

我不完全确定您是否遇到了同样的事情，但也许尝试在那里使用带有最新 JAXB 版本的 JDK6，看看是否发生了相同的 NPE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T18:26:57.407

如果没有环境的细节，我无法确定是这种情况，但是如果您使用的是 JAXB RI，那么您可能会遇到此 JAXB 错误所描述的问题：http: [//java.net/jira/browse/JAXB -761](http://java.net/jira/browse/JAXB-761)。

虽然该错误并未专门解决您遇到的问题（它与`parseDate`方法有关），但根本原因可能是相同的。它在 JAXB 的 2.2.1 版本中被检测到，但在 2.1.x 版本中可能已经存在，并且 JAXB 2.1.1 似乎是集成到 1.6 中的最新版本（集成在 1.6u14 中）。

该问题表明它已通过 JAXB 2.2.4 解决，该 JAXB 已集成到 1.7 中。

*附加说明*-在尝试与 1.6u31 一起使用时记录了一个相关问题，`parseBoolean`这可能会引起人们的兴趣（尽管帮助不大，但描述非常简短）：http: [//java.net/jira/browse/JAXB- 902](http://java.net/jira/browse/JAXB-902) . 这表明这可能仍然是一个持续存在的问题，具体取决于您使用的是 RI 还是其他 JAXB 实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:54:26.743

```
public static String printBase64Binary( byte[] val ) {
    return theConverter.printBase64Binary( val );
} 
```

> JAXB 提供者需要在第一次编组或解组操作之前的某个时间点调用 setDatatypeConverter api（可能在调用 JAXBContext.newInstance 期间）。此步骤对于配置应用于执行打印和解析功能的转换器是必要的

先尝试设置转换器

```
/**
     * This method is for JAXB provider use only.
     * <p>
     * JAXB Providers are required to call this method at some point before
     * allowing any of the JAXB client marshal or unmarshal operations to
     * occur.  This is necessary to configure the datatype converter that 
     * should be used to perform the print and parse conversions.
     * 
     * <p>
     * Calling this api repeatedly will have no effect - the 
     * DatatypeConverterInterface instance passed into the first invocation is 
     * the one that will be used from then on.
     * 
     * @param converter an instance of a class that implements the 
     * DatatypeConverterInterface class - this parameter must not be null.
     * @throws IllegalArgumentException if the parameter is null
     */
    public static void setDatatypeConverter( DatatypeConverterInterface converter ) {
        if( converter == null ) {
            throw new IllegalArgumentException( 
                Messages.format( Messages.CONVERTER_MUST_NOT_BE_NULL ) );
        } else if( theConverter == null ) {
            theConverter = converter;
        }
    } 
```

# python - 在 python 脚本中更改环境

> ID：12498257
> 
> 赞同：3
> 
> 时间：2012-09-19T15:47:09.793
> 
> 标签：python, environment-variables

我有一个关于 python 和 linux 中的环境变量的问题。我在这里阅读了很多问题/答案，但没有一个完全符合我的情况。它是这样的：

我在 python 中有一个脚本，可以自动安装 virtualenvwrapper 和其他一些东西。它在使用模块 sysem 的 HPC 集群上运行。安装的步骤之一是修改一些配置文件（~/.bashrc 和 ~/.virtualenvs/postactivate），以便新的环境变量和命令可用。

具体来说，我修改了 .bashrc，在 ~/opt/mypython/bin/virtualenvwrapper.sh 中添加了一个源，它定义了很多有用的命令来管理 virtualenv。在同一个脚本中，我想创建一个虚拟环境，所以，直到现在，我正在做：

```
install_and_create_virtualenv ='''
    easy_install --prefix=~/opt/mypython pip &&
    pip install virtualenvwrapper --install-option="--prefix=~/opt/mypython" &&
    . ~/.bashrc &&
    module unload python &&
    mkvirtualenv --python=/sw/comp/python/2.7_kalkyl/bin/python master
    '''

check_call(install_and_create_virtualenv, shell=True, env=env) 
```

如您所见，我做了一个 . ~/.bashrc 在 check_call 中。这来源于 .bashrc（因此也是 virtualenvwrapper.sh），然后我可以调用 mkvirtualenv。否则 mkvirtualenv 将不可用，因为我刚刚安装了它。

如果我只做一次，这将不是问题。但事实是我做了几次 check_call 并且在每一个中我都必须获取 .bashrc 因为否则我会在“干净”的环境中执行 check_call 并且我无法继续。

所以我的问题是：有什么方法可以像我离开脚本、获取 .bashrc 并再次输入脚本一样更新一般环境？

非常感谢！

注意：传递给 check_call 的 env 参数只有几个通用变量，我不能将 virtualenvwrapper 定义的每个命令都添加到这个 env 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:57:19.437

正如您所指出的，这些命令通常只是操纵环境。我将`env`在此设置过程中作为最终命令运行，并将其参数解析为 dict。这个 dict 可以添加到`env`你已经拥有的变量中，或者如果你想让它成为永久的和全局的，你可以`os.environ.update(virtualenv_env)`.

# delphi - 如何在 Delphi TDBGrid 中修改单元格值

> ID：12498258
> 
> 赞同：8
> 
> 时间：2012-09-19T15:47:11.300
> 
> 标签：delphi, delphi-xe2, tdbgrid

我必须在 VCL TDBGrid（Delphi XE2）中显示一些修改后的“屏蔽”值，即：将“密码”更改为“xxxxxxxx”或将大写“通过”更改为“通过”或其他。由于我的字段是动态创建的（但名称是编码的，所以我知道如何以及何时屏蔽它们，即：xxxx_PASSW 用于密码字段）我不能使用（我认为）OnGetText 事件。

那么最有效的方法是什么（因为我还使用 OnDrawColumnCell 进行一些我希望使用它的演示修改）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T04:32:47.650

至少有 3 种方法可以做到这一点，我将通过从数据库中屏蔽密码字段来进行说明。我将 sql server 用于 sql 方言。

**1.在sql字符串上定义一个计算字段。**

```
select field1, field2, '********' as maskedPwd from table1; 
```

然后，右键单击 dbgrid，选择列编辑器。在 dbgrid 的列编辑器中，只需选择 maskedPwd 列而不是真正的密码列。现在 dbgrid 将显示掩码值而不是密码。

**或者**

**2\. 在 dbgrid 使用的数据集上定义一个计算字段。**

只需右键单击数据集，然后使用字段编辑器创建一个新的计算字段（例如 maskedPwd2）。然后是数据集的onCalcField事件，编写代码设置maskedPwd2的值，即

```
procedure TForm1.ADOQuery1CalcFields(DataSet: TDataSet);
begin
  DataSet.FieldByName('maskedPwd2').AsString := '********';
end; 
```

确保在 dbgrid 的列编辑器中包含 maskedPwd2。

**或者**

**3\. 在 dbgrid 的 onDrawColumnCell 事件上编写自定义文本。**

```
procedure TForm1.DBGrid1DrawColumnCell(Sender: TObject; const Rect: TRect;
  DataCol: Integer; Column: TColumn; State: TGridDrawState);
var
  grid : TDBGrid;
  maskValue : String;
  aRect : TRect;
begin
  maskValue := '********';
  aRect := Rect;
  grid := sender as TDBGrid;

  if column.FieldName = 'password' then
  begin
    grid.Canvas.FillRect(Rect);
    DrawText(grid.Canvas.Handle, PChar(maskValue), Length(maskValue), aRect,
      DT_SINGLELINE or DT_LEFT or DT_VCENTER);
  end;
end; 
```

请注意，上面的代码仅显示掩码值，但如果网格是可编辑的，则当单元格被聚焦/编辑时，真正的密码值将可见。

为了解决这个问题，在表单上放置一个 TEdit，清除 text 属性，将 PpasswordChar 属性设置为 '*'，并将 visible 设置为 false。现在它已准备好用作单元格的内置编辑器的替代品。现在，我们需要一些粘合逻辑，即

```
procedure TForm1.DBGrid1DrawColumnCell(Sender: TObject; const Rect: TRect;
  DataCol: Integer; Column: TColumn; State: TGridDrawState);
var
  grid : TDBGrid;
  maskValue : String;
  aRect : TRect;
begin
  maskValue := '********';
  aRect := Rect;
  grid := sender as TDBGrid;

  if column.FieldName = 'password' then
    if gdfocused in State then
      begin
        Edit1.Left := Rect.Left + grid.Left + 1;
        Edit1.Top  := rect.Top + grid.Top + 1;
        Edit1.Width := Rect.Right - Rect.Left + 2;
        Edit1.Height := Rect.Bottom - Rect.Top + 2;
        Edit1.Clear;
        Edit1.Visible := True;
      end
    else
      begin
        grid.Canvas.FillRect(Rect);
        DrawText(grid.Canvas.Handle, PChar(maskValue), Length(maskValue), aRect,
          DT_SINGLELINE or DT_LEFT or DT_VCENTER);
      end
  else
    grid.DefaultDrawColumnCell(Rect, DataCol, Column, state);
end;

procedure TForm1.DBGrid1ColExit(Sender: TObject);
begin
  Edit1.Visible := False;
end;

procedure TForm1.DBGrid1KeyPress(Sender: TObject; var Key: Char);
begin
  if Key = Chr(9) then Exit;

  if (Sender as TDBGrid).SelectedField.FieldName = 'password' then
  begin
    Edit1.SetFocus;
    SendMessage(Edit1.Handle, WM_CHAR, word(Key), 0);
  end;
end;

procedure TForm1.Edit1Change(Sender: TObject);
begin
  if DBGrid1.DataSource.State in [dsEdit, dsInsert] then
    DBGrid1.DataSource.DataSet.FieldByName('password').AsString := Edit1.Text;
end;

procedure TForm1.Edit1Enter(Sender: TObject);
begin
  DBGrid1.DataSource.Edit;
end; 
```

请注意，上面的代码还不是完美的，但精髓就在那里。我把它留给你锻炼。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T15:56:23.300

我会`OnGetText`在我的数据集中为密码字段编写一个，因为该字段的值根本不应该显示在任何控件中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T06:39:15.743

您是否必须屏蔽整列中的所有值？在这种情况下，如果您知道要为哪个 TField（或字段名）执行此操作：尝试使用修改后的值动态创建计算字段并将其显示在列中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-18T14:25:59.867

我修改了上面的代码来显示和隐藏密码。如果用户单击“密码”单元格，它将显示它，当他们单击该单元格时，它将再次隐藏它。

```
// Add a cell click event from the TDBGrid
procedure TForm1.DBGrid1CellClick(Column: TColumn);
begin
if DBGrid1.SelectedField.FieldName = 'password' then
Edit1.Text := Your_Table_Name.FieldByName('password').AsString;
Edit1.PasswordChar:=#0;
end;

// Change the edit1change event to this
procedure TForm1.Edit1Change(Sender: TObject);
begin
if DBGrid1.DataSource.State in [dsEdit, dsInsert] then
Your_Table_Name.FieldByName('password').AsString := Edit1.Text;
Edit1.PasswordChar:=#0;
end;

// You should change colexit event to read like this
procedure TForm1.DBGrid1ColExit(Sender: TObject);
begin
if DBGrid1.SelectedField.FieldName = 'password' then
Edit1.Visible := False;
end; 
```

无需花费太多精力就可以将其变成一个很酷的密码字段。

忘记了 DBGrid Draw Column Cell 事件的一件事，你应该改变 Edit1.Clear; 到 Edit1.Text := Your_Table_Name.FieldByName('Password').AsString;

# .htaccess - php如何允许文件夹中的某些内容而不允许该文件夹中的其他内容

> ID：12498261
> 
> 赞同：0
> 
> 时间：2012-09-19T15:47:17.767
> 
> 标签：.htaccess, directory

*   我在 hostmonster.com 上托管我的网站。
*   我正在使用 php/mysql。
*   我有一个包含 pdf 文件的文件夹：*pfdfolder/*。
*   我想授予某些用户对该文件夹的访问权限，并拒绝其他用户对该文件夹的访问权限。我该怎么做？

我不知道它是否有帮助，但如果我可以使用它，我有一个带有用户名和密码的 mysql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:52:31.190

如果您没有基于会话的登录系统，则可以使用 .htaccess

[http://www.javascriptkit.com/howto/htaccess3.shtml](http://www.javascriptkit.com/howto/htaccess3.shtml)

# javascript - 无法将变量导入 Jquery 函数

> ID：12498273
> 
> 赞同：2
> 
> 时间：2012-09-19T15:47:49.217
> 
> 标签：javascript, jquery, html, jquery-ui

变量得到“`percent`警告”就好了。但是，当我把它放在`progressbar`函数中时，默认为零。如果我对值 ie 进行硬编码，它将起作用`value: 60`。我怎样才能使它与我的`percent`变量一起工作？谢谢。

```
 function updateProgress(percent)
    {
        alert(percent);
        $("#progressbar").progressbar({
            value: percent
        });
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:50:14.547

问题是变量 percent 在这里是一个字符串，因此将其转换为整数或更好的浮点数：

```
value: parseFloat(percent) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T15:51:13.893

```
function updateProgress (percent) {
  alert(percent);

  $("#progressbar").progressbar({
    value: parseFloat(percent)
  });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:52:26.813

您的代码看起来正确。试试这个：

```
function updateProgress(percent)
{
    var progress = {
        value: percent
    };
    alert(progress.value);
    $("#progressbar").progressbar(progress);
} 
```

# vim - vimscript 中的替换失败

> ID：12498278
> 
> 赞同：2
> 
> 时间：2012-09-19T15:48:29.650
> 
> 标签：vim

我在这方面遗漏了一些微妙而愚蠢的东西。我有一个简短的 vim 脚本。在其中，我正在尝试做：

```
s/.*_____.*/\=repeat('=', 78)/ 
```

（这是确切的代码。）

当我`/\v.*____.*`在正常模式下进行时，我可以成功找到模式（不止一次）。当我在正常模式下进行替换时，它成功了。

我敢肯定，就在某处逃脱角色而言，我错过了一些东西。请赐教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:37:30.233

一条`s/`命令只覆盖当前行；这不是您通常想要的。

最简单的方法是使用`%s/...`处理整个缓冲区。但是，您的映射/命令可能希望支持任意范围。为此，`:call`通常会为每一行调用一次您的用户定义函数，除非您定义它处理范围本身的函数。详情请参阅`:help function-range-example`。

# javascript - 指向按钮放置添加类

> ID：12498280
> 
> 赞同：0
> 
> 时间：2012-09-19T15:48:38.603
> 
> 标签：javascript, jquery, html, css, google-chrome

在站点的底部，有显示项目的单选按钮，每次我使用以下代码添加项目时都会创建这些单选按钮：

```
<div id="menu">
     <a class="active" href="javascript:menuAction(0)"></a>
     <? $index = 0; foreach ($projects as $value) { $index++; echo '<a href="javascript:menuAction('.$index.')"></a>'; } ?>
</div> 
```

问题是我想在它的单选按钮下放置一些特定的项目这个“新对话框”图标：

![在此处输入图像描述](../Images/d5cbeba1a54b4be6e59bba017c380848.png)

如何指向项目单选按钮，创建一个类并在其单选按钮下显示图标？这将是一个 dialog.png 图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:56:45.327

在添加单选按钮的代码中，您需要确定每个按钮是否是“新的”。对于新的，添加一个“newProject”类。

然后，您可以使用 CSS 将“新”png 图形设置为背景图像（或使用 :after 选择器插入新元素来保存图形）

# javascript - 如何使用未知编码jquery编码为utf文本文件

> ID：12498283
> 
> 赞同：1
> 
> 时间：2012-09-19T15:48:47.653
> 
> 标签：javascript, file, jquery-mobile, encoding

我已经用 HTML5 和 JS (phonegap) 开发了一个应用程序，现在我必须从一个用 delphi 编写的旧桌面应用程序中读取一个文本文件作为导出。此文件是具有固定大小字符串的 MS SQL 导出文件，我必须将其导入我的应用程序的 SQlite。

该文本包含希腊字符并且未以 UTF 编码，因此我阅读了带有问号的菱形。

在我阅读内容之前，有没有办法以编程方式将此文本编码为 UTF？

禁止更改任何 delphi 代码。

这就是我阅读文本文件的方式

```
var billjson = '{"posts" : [', 
i, 
line = 0,
Amountint,
Amountdec;

jQuery.get('Bill.txt',function(data){
alert(data.length);
line=0;

    for (i = 1; i <= ((data.length)/156); i += 1) {
        billjson += '{"Id" :' + '"' + data.substr((line+0), 10).trim() + '"'  + ',';
        billjson += '"Code" :' + '"' + data.substr((line+10), 5).trim() + '"'  +  ',';
        billjson += '"Address" :' + '"' + data.substr((line+14), 40).trim() + '"'  +  ',';
        billjson += '"Name" : ' + '"'  + data.substr((line+54), 50).trim() + '"'  +  ',';
        billjson += '"Description" : ' + '"'  + data.substr((line+104), 8).trim() + '"'  +  ',';
        billjson += '"EntrySeason" : ' + '"'  + data.substr((line+112), 23).trim() + '"'  +  ',';
        billjson += '"Period" : ' + '"'  + data.substr((line+135), 11).trim() + '"'  +  ',';
        Amountint = data.substr((line+146), 7).trim();
        Amountdec = data.substr((line+153), 2).trim();
        billjson += '"Revenue" : ' + '"'  + Amountint + '.' + Amountdec + '"'  +  '}';
        line = i * 156;
        if (line == data.length)
        {
            billjson += ']';
        }
        else 
        {
            billjson += ',';
        }
    }

    if (line == 0)
    {
        billjson += ']';
    }

    billjson += "}";

var mybilljson = jQuery.parseJSON( billjson );
}); 
```

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:03:09.733

您必须让 jquery 知道它正在加载的文件中使用了什么编码。

```
jQuery.ajaxSetup({
        'beforeSend' : function(xhr) {
             xhr.overrideMimeType('text/plain; charset=iso-8859-7');
        },
}); 
```

# php - 如何在 PHP 中注释掉正则表达式的 */ 部分

> ID：12498284
> 
> 赞同：5
> 
> 时间：2012-09-19T15:48:47.653
> 
> 标签：php, regex, comments

我有 preg_replace 函数，我正在调用该函数并将其放在多行以提高可读性，但`*/`正则表达式中的字符会混淆注释。如何在不将它们全部移到一行的情况下注释掉所有这些行？

```
return preg_replace('/.*/',
    'Lorem Ipsum' .
    'More Lorem Ipsum'
    ,
    $foo); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T15:49:49.973

您可以使用不同的正则表达式模式分隔符：

```
return preg_replace('#.*#',
    'Lorem Ipsum' .
    'More Lorem Ipsum'
    ,
    $foo); 
```

**编辑：** 分隔符是 PCRE（Perl 兼容正则表达式）的一个特性。无需 PHP 配置即可使用不同的分隔符。

[正则表达式类引用运算符](http://perldoc.perl.org/5.8.8/perlop.html#Regexp-Quote-Like-Operators)

> ...您可以使用任何一对非字母数字、非空白字符作为分隔符。这对于匹配包含“/”的路径名特别有用，以避免 LTS（倾斜牙签综合症）。

[引用和类似引用的运算符](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators)

> 非括号定界符前后使用相同的字符，但四种 ASCII 括号（圆、角、方、花）全部嵌套

这些都是有效的：

```
'/.*/'
'#.*#'
'{.*}' /* Note that '{.*{' would be incorrect. */ 
```

查看[PHP 的 PCRE 模式文档](http://php.net/manual/en/regexp.reference.delimiters.php)，了解一个非常好的概述。

# c# - 用户账号和角色，不同角色的账号如何实现不同的属性？

> ID：12498288
> 
> 赞同：0
> 
> 时间：2012-09-19T15:49:00.053
> 
> 标签：c#, oop

我有一个这样的帐户类

```
public class Account
{
    public Guid AccountId { get; set; }
    public string Username { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
    public virtual List<Role> Roles{ get; set; }

} 
```

我有一个像这样的角色类

```
public class Role
{
    public Guid RoleId{ get; set; }
    public string RoleName{ get; set; }
    public virtual List<Account> Accounts { get; set; }
} 
```

更新 2

我有两个不同的角色，分别是学生和教师。帐户在学生角色时应具有诸如标记之类的属性，而在教师角色时应具有不同的属性。如何实现这种场景。

更新

我正在考虑继承 Account 类并创建具有相关属性的学生和教师，但我已经有了名为学生和教师的角色。所以就像学生对象将扮演学生角色一样，我认为这将是多余的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:04:08.243

研究使用可以在角色中定义用户的成员资格类，然后根据当前登录，您可以检查用户是否处于特定角色中，这是在数据库中定义的

# c++ - 函数指针数组的类型是什么？

> ID：12498292
> 
> 赞同：1
> 
> 时间：2012-09-19T15:49:22.823
> 
> 标签：c++, types

我有以下课程：

```
class DXStartupEncoder {
public:
   void EncodeA(unsigned char*& message) const;
   void EncodeB(unsigned char*& message) const;
   void EncodeC(unsigned char*& message) const;
   void EncodeD(unsigned char*& message) const;
};

<type> dn_sequence[] = {&DXStartupEncoder::EncodeA, &DXStartupEncoder::EncodeB, &DXStartupEncoder::EncodeC, &DXStartupEncoder::EncodeD }; 
```

但是这个函数指针数组的类型是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T15:51:39.493

`typedef`如果您不确定，请使用 a 。

```
typedef void (DXStartupEncoder::*Encoder)(unsigned char*&) const;
Encoder dn_sequence[] = { .... }; 
```

在 C++11 中，您可以使用`decltype`从值推断类型，因此您甚至不需要知道如何编写成员函数指针的类型（`auto`不能工作，因为右侧是一个 initializer_list）：

```
decltype(&DXStartupEncoder::EncodeA) dn_sequence[] = { ... }; 
```

顺便说一句，如果您需要避免使用`typedef`，您可以将其写为：

```
void (DXStartupEncoder::*dn_sequence[])(unsigned char*&) const = { ... }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:52:54.813

1.  你没有函数指针。您有**指向成员函数的指针**。

2.  您不是在询问数组的类型；相反，您要求的是数组的*基础类型*。

3.  底层类型是：

    ```
    void (DXStartupEncoder::*)(unsigned char * &) 
    ```

4.  因此，（不完整的）数组类型是：

    ```
    void (DXStartupEncoder::*[])(unsigned char * &) 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:53:14.967

该类型称为[Pointer-to-member](http://www.parashift.com/c++-faq/pointers-to-members.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T16:04:34.180

您可以将数组声明为：

```
void (DXStartupEncoder::*dn_sequence[])(unsigned char *&) const = {...}; 
```

这从声明-反映-使用中很明显；给定一个 index `i`、一个`const DXStartupEncoder &`reference`enc`和一个`unsigned char *&`reference `c`，你会写：

```
(enc.*dn_sequence[i])(c) 
```

产生一个类型的值`void`：

```
 (enc             .* dn_sequence[i])(c               )
void (DXStartupEncoder::*dn_sequence[] )(unsigned char *&) const 
```

# ios - AVFoundation - iOS 听不到声音

> ID：12498293
> 
> 赞同：0
> 
> 时间：2012-09-19T15:49:24.517
> 
> 标签：ios, xcode, audio, avfoundation

我正在尝试使用 AVFoundation 框架播放 mp3 文件。它无法检测到文件并出现以下错误：

```
 Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSURL initFileURLWithPath:]: nil string parameter' 
```

实现的代码：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"sound" ofType:@"mp3"];
NSLog(@"directory %@",path);
AVAudioPlayer* theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
theAudio.delegate = self;
[theAudio play]; 
```

当我将 pathForResource:@"sound" 更改为 pathForResource:@"sound" （空格）时，它可以检测到文件但听不到声音。我也在 .h 文件中声明了 AVdelegate。有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:05:49.847

你需要先准备好准备播放音频才能播放..检查这个代码片段..它对我有用。

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

```
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *filePath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.mp3", fileName]];

NSError        *err;

if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) 
{    
    AVAudioPlayer  *player = [[AVAudioPlayer alloc] initWithContentsOfURL:
              [NSURL fileURLWithPath:filePath] error:&err];

    player.delegate = self;

    [player prepareToPlay];
    [player setNumberOfLoops:0];
    [player setVolume:0.5];
    [player play]; 
```

}

# mysql - php-fpm 无法连接到 mysql

> ID：12498299
> 
> 赞同：3
> 
> 时间：2012-09-19T15:49:42.640
> 
> 标签：mysql, apache, fatal-error, php

我正在尝试从 Apache mod_php 迁移到 PHP-FPM。

我正在尝试连接到 mySQL DB，但似乎缺少一些功能：

```
Line 43 -  mysql_connect(hostname, username, pwd); 
```

我收到了经典的致命错误：

```
 Fatal error: Call to undefined function mysql_connect() in 
/var/www/vhosts/dev.test.local/htdocs/index.php on line 43 
```

现在，在我`phpinfo`的没有经典的 mysql 框。

我在 Centos 5.6 和 PHP 5.3 上运行 Apache2（但我认为 PHP 版本无关紧要）。

如何为 PHP-FPM 安装必要的库？

我需要重新编译 PHP 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:38:58.603

您只需要在 php-fpm 配置中启用 mysql。您已为 apache 启用它。查看 /etc/php5/fpm 目录

更新，我不熟悉 CentOS 文件布局，但如果它有点标准，可能还有一个 conf.d 目录，然后你需要设置一些软链接，关键是你可以使用 PHP（cgi，cli， apache（mod_php）或 php-fpm）有一个单独的 ini 文件（和/或 .conf，取决于 linux 风格），我确信 mysql 库在那里，因为你在 apache 中使用它们。所以只能是你没有在 php.ini 中启用 mysql 扩展。

之后不要忘记重新启动 php-fpm。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:55:12.847

看看这个，如果你还没有：

[http://www.howtoforge.com/installing-nginx-with-php5-and-php-fpm-and-mysql-support-on-centos-6.0-p2](http://www.howtoforge.com/installing-nginx-with-php5-and-php-fpm-and-mysql-support-on-centos-6.0-p2)

您是否安装了适当的 MySQL 模块？

> yum install **php-fpm php-cli php-mysql** php-gd php-imap php-ldap php-odbc php-pear php-xml php-xmlrpc php-eaccelerator php-magickwand php-magpierss php-mbstring php-mcrypt php-mssql php-shout php-snmp php-soap php-tidy

# bash - Using Bash to display a progress indicator

> ID：12498304
> 
> 赞同：71
> 
> 时间：2012-09-19T15:50:18.277
> 
> 标签：bash, shell, unix, progress

Using a bash only script, how can you provide a bash progress indicator?

For example, when I run a command from bash - while that command is executing - let the user know that something is still happening.

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-09-19T15:50:18.277

In this example using SCP, I'm demonstrating how to grab the process id (pid) and then do something while that process is running.

This displays a simple spinnng icon.

```
/usr/bin/scp me@website.com:file somewhere 2>/dev/null &
pid=$! # Process Id of the previous running command

spin[0]="-"
spin[1]="\\"
spin[2]="|"
spin[3]="/"

echo -n "[copying] ${spin[0]}"
while [ kill -0 $pid ]
do
  for i in "${spin[@]}"
  do
        echo -ne "\b$i"
        sleep 0.1
  done
done 
```

* * *

William Pursell's solution

```
/usr/bin/scp me@website.com:file somewhere 2>/dev/null &
pid=$! # Process Id of the previous running command

spin='-\|/'

i=0
while kill -0 $pid 2>/dev/null
do
  i=$(( (i+1) %4 ))
  printf "\r${spin:$i:1}"
  sleep .1
done 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-19T18:42:53.723

If you have a way to estimate percentage done, such as the current number of files processed and total number, you can make a simple linear progress meter with a little math and assumptions about screen width.

```
count=0
total=34
pstr="[=======================================================================]"

while [ $count -lt $total ]; do
  sleep 0.5 # this is work
  count=$(( $count + 1 ))
  pd=$(( $count * 73 / $total ))
  printf "\r%3d.%1d%% %.${pd}s" $(( $count * 100 / $total )) $(( ($count * 1000 / $total) % 10 )) $pstr
done 
```

Or instead of a linear meter you could estimate time remaining. It's about as accurate as other similar things.

```
count=0
total=34
start=`date +%s`

while [ $count -lt $total ]; do
  sleep 0.5 # this is work
  cur=`date +%s`
  count=$(( $count + 1 ))
  pd=$(( $count * 73 / $total ))
  runtime=$(( $cur-$start ))
  estremain=$(( ($runtime * $total / $count)-$runtime ))
  printf "\r%d.%d%% complete ($count of $total) - est %d:%0.2d remaining\e[K" $(( $count*100/$total )) $(( ($count*1000/$total)%10)) $(( $estremain/60 )) $(( $estremain%60 ))
done
printf "\ndone\n" 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-12-04T07:32:32.827

Referred from [here](http://fitnr.com/showing-a-bash-spinner.html) is a nice spinner function (with slight modification), will help your cursor to stay in original position also.

```
spinner()
{
    local pid=$!
    local delay=0.75
    local spinstr='|/-\'
    while [ "$(ps a | awk '{print $1}' | grep $pid)" ]; do
        local temp=${spinstr#?}
        printf " [%c]  " "$spinstr"
        local spinstr=$temp${spinstr%"$temp"}
        sleep $delay
        printf "\b\b\b\b\b\b"
    done
    printf "    \b\b\b\b"
} 
```

with usage:

```
(a_long_running_task) &
spinner 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-04-11T00:59:42.477

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-12-21T09:23:24.017

Here a simple one-liner, that I use:

```
while true; do for X in '-' '/' '|' '\'; do echo -en "\b$X"; sleep 0.1; done; done 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-07-19T08:17:00.490

Aside from the classical spinner, you can use [this progress bar](https://ownyourbits.com/2017/07/16/a-progress-bar-for-the-shell/)

It achieves subcharacter precision by using [half block characters](https://en.wikipedia.org/wiki/Block_Elements#Character_table)

[![enter image description here](../Images/5d6a48e5f2c3d9f6afdb477df879282d.png)](https://i.stack.imgur.com/VpJi9.gif)

Code included on the link.

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-01-22T16:10:29.690

Here's my attempt. I'm new to bash scripts so some of this code may be terrible :)

Example Output:

[![In Progress](../Images/aa6d92e9ddf9dbd4cca786f1c72cc71f.png)](https://i.stack.imgur.com/479Lw.png) [![Done](../Images/6111accb4ef11ab0e7341b2ed44d9c6a.png)](https://i.stack.imgur.com/PSaui.png)

The Code:

```
progressBarWidth=20

# Function to draw progress bar
progressBar () {

  # Calculate number of fill/empty slots in the bar
  progress=$(echo "$progressBarWidth/$taskCount*$tasksDone" | bc -l)  
  fill=$(printf "%.0f\n" $progress)
  if [ $fill -gt $progressBarWidth ]; then
    fill=$progressBarWidth
  fi
  empty=$(($fill-$progressBarWidth))

  # Percentage Calculation
  percent=$(echo "100/$taskCount*$tasksDone" | bc -l)
  percent=$(printf "%0.2f\n" $percent)
  if [ $(echo "$percent>100" | bc) -gt 0 ]; then
    percent="100.00"
  fi

  # Output to screen
  printf "\r["
  printf "%${fill}s" '' | tr ' ' ▉
  printf "%${empty}s" '' | tr ' ' ░
  printf "] $percent%% - $text "
}

## Collect task count
taskCount=33
tasksDone=0

while [ $tasksDone -le $taskCount ]; do

  # Do your task
  (( tasksDone += 1 ))

  # Add some friendly output
  text=$(echo "somefile-$tasksDone.dat")

  # Draw the progress bar
  progressBar $taskCount $taskDone $text

  sleep 0.01
done

echo 
```

You can see the source here: [https://gist.github.com/F1LT3R/fa7f102b08a514f2c535](https://gist.github.com/F1LT3R/fa7f102b08a514f2c535)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-02-18T18:22:20.333

Here is an example of an 'activity indicator,' for an internet connection speed test via the linux 'speedtest-cli' command:

```
printf '\n\tInternet speed test:  '

# http://stackoverflow.com/questions/12498304/using-bash-to-display-a-progress-working-indicator

spin[0]="-"
spin[1]="\\"
spin[2]="|"
spin[3]="/"

# http://stackoverflow.com/questions/20165057/executing-bash-loop-while-command-is-running

speedtest > .st.txt &           ## & : continue running script
pid=$!                          ## PID of last command

# If this script is killed, kill 'speedtest':
trap "kill $pid 2> /dev/null" EXIT

# While 'speedtest' is running:
while kill -0 $pid 2> /dev/null; do
for i in "${spin[@]}"
do
    echo -ne "\b$i"
    sleep 0.1
done
done

# Disable the trap on a normal exit:
trap - EXIT

printf "\n\t           "
grep Download: .st.txt
printf "\t             "
grep Upload: .st.txt
echo ''
rm -f st.txt 
```

**Update - example:**

[![animated GIF](../Images/8f2dbc1e8318399b9e5535f9d76e2df4.png)](https://i.stack.imgur.com/n9J64.gif)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-11-01T02:06:00.187

[https://github.com/extensionsapp/progre.sh](https://github.com/extensionsapp/progre.sh)

Create 82 percent progress: `progreSh 82`

[![enter image description here](../Images/34c3315bcd8b8abfd3b3b8a5fc87c359.png)](https://i.stack.imgur.com/dRKaU.gif)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-06-05T12:08:19.000

I extended the answer of [checksum](https://stackoverflow.com/users/407685/checksum) in [his answer](https://stackoverflow.com/a/20369590/1184842) by displaying a variable info message after the spinner:

```
#!/usr/bin/env bash 
function spinner() {
    local info="$1"
    local pid=$!
    local delay=0.75
    local spinstr='|/-\'
    while kill -0 $pid 2> /dev/null; do
        local temp=${spinstr#?}
        printf " [%c]  $info" "$spinstr"
        local spinstr=$temp${spinstr%"$temp"}
        sleep $delay
        local reset="\b\b\b\b\b\b"
        for ((i=1; i<=$(echo $info | wc -c); i++)); do
            reset+="\b"
        done
        printf $reset
    done
    printf "    \b\b\b\b"
}

# usage:
(a_long_running_task) &
spinner "performing long running task..." 
```

I don't like that if the stdout output with a spinner is redirected to a file, `less` shows `^H` for each backspace instead of avoiding them in a file output at all. Is that possible with an easy spinner like this one?

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-03-24T23:33:25.767

@DavidD's comments on Pez Cuckows answer, this is an example of how you can capture the output of the progress bar in a script and still see the spinner on the screen:

```
#!/usr/bin/env bash 

#############################################################################
###########################################################################
###
### Modified/Rewritten by A.M.Danischewski (c) 2015 v1.1
### Issues: If you find any issues emai1 me at my <first name> dot 
###         <my last name> at gmail dot com.  
###
### Based on scripts posted by Pez Cuckow, William Pursell at:  
### http://stackoverflow.com/questions/12498304/using-bash-to-display-\
###      a-progress-working-indicator
###
### This program runs a program passed in and outputs a timing of the 
### command and it exec's a new fd for stdout so you can assign a 
### variable the output of what was being run. 
### 
### This is a very new rough draft but could be expanded. 
### 
### This program is free software: you can redistribute it and/or modify
### it under the terms of the GNU General Public License as published by
### the Free Software Foundation, either version 3 of the License, or
### (at your option) any later version.
###
### This program is distributed in the hope that it will be useful,
### but WITHOUT ANY WARRANTY; without even the implied warranty of
### MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
### GNU General Public License for more details.
###
### You should have received a copy of the GNU General Public License
### along with this program.  If not, see <http://www.gnu.org/licenses/>.
###########################################################################
#############################################################################

declare    CMD="${1}"
shift      ## Clip the first value of the $@, the rest are the options. 
declare    CMD_OPTIONS="$@"
declare    CMD_OUTPUT=""
declare    TMP_OUTPUT="/tmp/_${0##*/}_$$_$(date +%Y%m%d%H%M%S%N)" 
declare -r SPIN_DELAY="0.1"
declare -i PID=

function usage() {
cat <<EOF

Description: ${0##*/}

This program runs a program passed in and outputs a timing of the 
command and it exec's a new fd for stdout so you can assign a variable 
the output of what was being run. 

Usage: ${0##*/} <command> [command options]

 E.g.  
    >$ ${0##*/} sleep 5 \&\& echo "hello" \| figlet
     Running: sleep 5 && echo hello | figlet, PID 2587:/

     real   0m5.003s
     user   0m0.000s
     sys    0m0.002s
      _          _ _       
     | |__   ___| | | ___  
     | '_ \ / _ \ | |/ _ \ 
     | | | |  __/ | | (_) |
     |_| |_|\___|_|_|\___/ 

     Done..
    >$ var=\$(${0##*/} sleep 5 \&\& echo hi)
     Running: sleep 5 && echo hi, PID 32229:-
     real   0m5.003s
     user   0m0.000s
     sys    0m0.001s
     Done..
     >$ echo \$var
     hi

EOF
} 

function spin_wait() { 
 local -a spin 
 spin[0]="-"
 spin[1]="\\"
 spin[2]="|"
 spin[3]="/"
 echo -en "Running: ${CMD} ${CMD_OPTIONS}, PID ${PID}: " >&3
 while kill -0 ${PID} 2>/dev/random; do
   for i in "${spin[@]}"; do
     echo -ne "\b$i" >&3
     sleep ${SPIN_DELAY}
   done
 done
} 

function run_cmd() { 
 exec 3>$(tty)
 eval "time ${CMD} ${CMD_OPTIONS}" 2>>"${TMP_OUTPUT}" | tee "${TMP_OUTPUT}" & 
 PID=$! # Set global PID to process id of the command we just ran. 
 spin_wait
 echo -en "\n$(< "${TMP_OUTPUT}")\n" >&3 
 echo -en "Done..\n" >&3
 rm "${TMP_OUTPUT}"
 exec 3>&-
} 

if [[ -z "${CMD}" || "${CMD}" =~ ^-. ]]; then 
 usage | more && exit 0 
else 
 run_cmd  
fi 

exit 0 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-05-19T21:18:27.160

Psychedelic progress bar for bash scripting. Call by command line as './progressbar x y' where 'x' is a time in seconds and 'y' is a message to display. The inner function progressbar() works standalone as well and takes 'x' as a percentage and 'y' as a message.

```
#!/bin/bash

if [ "$#" -eq 0 ]; then echo "x is \"time in seconds\" and z is \"message\""; echo "Usage: progressbar x z"; exit; fi
progressbar() {
        local loca=$1; local loca2=$2;
        declare -a bgcolors; declare -a fgcolors;
        for i in {40..46} {100..106}; do
                bgcolors+=("$i")
        done
        for i in {30..36} {90..96}; do
                fgcolors+=("$i")
        done
        local u=$(( 50 - loca ));
        local y; local t;
        local z; z=$(printf '%*s' "$u");
        local w=$(( loca * 2 ));
        local bouncer=".oO°Oo.";
        for ((i=0;i<loca;i++)); do
                t="${bouncer:((i%${#bouncer})):1}"
                bgcolor="\\E[${bgcolors[RANDOM % 14]}m \\033[m"
                y+="$bgcolor";
        done
        fgcolor="\\E[${fgcolors[RANDOM % 14]}m"
        echo -ne " $fgcolor$t$y$z$fgcolor$t \\E[96m(\\E[36m$w%\\E[96m)\\E[92m $fgcolor$loca2\\033[m\r"
};
timeprogress() {
        local loca="$1"; local loca2="$2";
        loca=$(bc -l <<< scale=2\;"$loca/50")
        for i in {1..50}; do
                progressbar "$i" "$loca2";
                sleep "$loca";
        done
        echo -e "\n"
};
timeprogress "$1" "$2" 
```

# c# - 便利初始化

> ID：12498312
> 
> 赞同：2
> 
> 时间：2012-09-19T15:50:31.083
> 
> 标签：c#, constructor, initialization

是否有一个方便的过程可以将下面构造函数中的属性“调用者”的值分配给一行？

```
public partial class SecurityPrompt : Form {

    Form1 Caller { get; set; }

    public SecurityPrompt(Form1 _caller)  {
        Caller = _caller;
        InitializeComponent();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:53:27.497

有[对象初始化语法](http://msdn.microsoft.com/en-us/library/bb397680.aspx)，但它创建构造函数，然后分配公共属性。如果你想使用它，你必须在这里重构你的构造函数。

使用对象初始化器：

> 编译器通过首先访问默认实例构造函数，然后处理成员初始化来处理对象初始化器。

如果您确实使用它，则在创建构造函数之前不会设置您的属性。因此，如果您在构造函数中调用期望您的属性存在的函数，则不会。记住这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:52:51.837

> 是否有一个方便的过程可以将下面构造函数中的属性“调用者”的值分配给一行？

不，您当前的语法是在构造函数中分配属性的“标准”方式。没有捷径（如[C++ 的初始化列表](http://www.learncpp.com/cpp-tutorial/101-constructor-initialization-lists/)或类似的）。在 C# 中，它总是在构造函数体中内联完成。

# http - 有什么方法可以在 Markdown 中“换行”长 URL 以显示 URL 参数？

> ID：12498316
> 
> 赞同：3
> 
> 时间：2012-09-19T15:50:40.990
> 
> 标签：http, url, markdown

试图向客户端显示 HTTP 流量的要点。当我使用 markdown 时，我似乎无法找到优雅地包装 URL 的方法。例如：

[https://gist.github.com/06560154a0f00d274131](https://gist.github.com/06560154a0f00d274131)

您必须单独滚动每个 URL 才能看到最后的 GET 参数。如果它们包裹起来，您将能够很快注意到存在哪些参数。

以前我一直在通过电子邮件将 HTTP 流量发送给客户端，但我希望将它放在 Git 上，在那里我可以编辑错误、版本等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T03:05:36.053

您可以使用`<code>`标签，例如

`<code>http://thisisalongurl.com?urlparam=asdfurl&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&finalparam=asdf</code>`

结果

`[http://thisisalongurl.com?urlparam=asdfurl&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&finalparam=asdf](http://thisisalongurl.com?urlparam=asdfurl&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&urlparam=asdf&finalparam=asdf)`

# python - 在 Windows 7 上的 virtualenv 中安装 MySQL-python

> ID：12498317
> 
> 赞同：7
> 
> 时间：2012-09-19T15:50:46.557
> 
> 标签：python, python-2.7, virtualenv, pip, mysql-python

我正在尝试在我的 virtualenv（Windows 7 32b + Python 2.7.3）中安装 MySQL-python，但不幸的是在命令之后：

```
pip install MySQL-python 
```

我收到错误消息：

```
Install packages failed: Error occurred when installing package MySQL-python. 

The following command was executed:

packaging_tool.py install --build-dir C:\Users\Grzegorz\AppData\Local\Temp\pycharm-packaging3577041299153334552.tmp MySQL-python

The error output of the command:

Downloading/unpacking MySQL-python
  Running setup.py egg_info for package MySQL-python
Traceback (most recent call last):
  File "<string>", line 16, in <module>
  File "C:\Users\Grzegorz\AppData\Local\Temp\pycharm-packaging3577041299153334552.tmp\MySQL-python\setup.py", line 15, in <module>
    metadata, options = get_config()
  File "setup_windows.py", line 7, in get_config
    serverKey = _winreg.OpenKey(_winreg.HKEY_LOCAL_MACHINE, options['registry_key'])
WindowsError: [Error 2] Nie można odnaleźć określonego pliku
Complete output from command python setup.py egg_info:
Traceback (most recent call last):

File "<string>", line 16, in <module>

File "C:\Users\Grzegorz\AppData\Local\Temp\pycharm-packaging3577041299153334552.tmp\MySQL-python\setup.py", line 15, in <module>

metadata, options = get_config()

File "setup_windows.py", line 7, in get_config

serverKey = _winreg.OpenKey(_winreg.HKEY_LOCAL_MACHINE, options['registry_key'])

WindowsError: [Error 2] Nie można odnaleźć określonego pliku

----------------------------------------
Command python setup.py egg_info failed with error code 1 in C:\Users\Grzegorz\AppData\Local\Temp\pycharm-packaging3577041299153334552.tmp\MySQL-python
Storing complete log in C:\Users\Grzegorz\pip\pip.log 
```

如果我尝试从二进制 MySQL-python-1.2.3.win32-py2.7.exe 安装这个包，那么一切都会正确安装，但这对我来说不是解决方案。您对如何在 Windows 7 上正确安装此软件包有任何建议（我可以毫无问题地安装所有其他软件包）？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-04T19:17:40.933

您是否尝试过使用：

```
 easy_install MySQL-python 
```

它适用于我在 Windows 7 中使用 Virtualenv 很长的时间。我对 pip 有同样的问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-20T09:54:50.240

[如果您可以从http://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python](http://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python)全局安装 mysql-python（在 C:/python27 中）

然后您可以将以下文件从“C:/python/lib/site-packages”复制粘贴到您的虚拟环境“/lib/site-packages”

1.  MySQL_python-1.2.4-py2.7.egg-info(文件夹)
2.  MySQLdb（文件夹）
3.  _mysql_exceptions.py/.pyc/.pyo
4.  _mysql.pyd

**不需要从 "C:\Python27\Lib\site-packages\django\db\backends" 或 "C:\Python27\Lib\site-packages\django\contrib\gis\db\ 复制 mysql 文件后端”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T20:30:20.587

SourceForge 现在有一个[Windows MSI 安装程序。](http://sourceforge.net/projects/mysql-python/files/mysql-python/1.2.3/MySQL-python-1.2.3.win32-py2.7.msi/download)试试看，但如果你现在更愿意自己构建（直到 1.2.4 发布），你应该可以这样做：

```
pip install http://svn.code.sf.net/p/mysql-python/svn/branches/MySQLdb-1.2/MySQLdb 
```

以上假设您已安装 Subversion。

# ios - Xcode 4.4.1、iOS 5.1.1：Xcode 无法使用所选设备运行

> ID：12498320
> 
> 赞同：1
> 
> 时间：2012-09-19T15:50:54.160
> 
> 标签：ios, xcode

需要在 iphone 4 IOS 5.1.1 上测试我的应用程序。配置文件没问题。我明白了

“无法使用所选设备运行。没有可用的兼容 iOS 版本的预置 iOS 设备。连接具有足够新版本的 iOS 设备或...”

当然，我尝试设置较低的部署目标，但仍然收到错误消息。有任何想法吗？

# sql-server - 对列的所有值的总和的 SQL 查询

> ID：12498321
> 
> 赞同：0
> 
> 时间：2012-09-19T15:50:55.847
> 
> 标签：sql-server

我想要一个 sql 查询结果如下：

LineNumber 单价 数量

* * *

```
 1                14               12      
  2                09               10      
  3                34                5       
  4                18                9      
  5                42               40       
  6                07               10      
  7                45               15    
                                   -----   
                                   101 
```

请帮助我....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:52:26.257

要获得总数，您将使用聚合：

```
select sum(quantity) Total
from yourtable 
```

要从表中返回数据：

```
select LineNumber, UnitPrice, Quantity
from yourTable 
```

要将它们一起返回，您可以使用`UNION ALL`：

```
select LineNumber, UnitPrice, Quantity
from yourTable
UNION ALL
select 0, 0, sum(quantity) Total
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/bf938/3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T16:04:00.033

另一种方式

```
WITH YourTable(LineNumber, UnitPrice, Quantity)
     AS (SELECT 1, 14,12
         UNION ALL
         SELECT 2, 09, 10
         UNION ALL
         SELECT 3, 34, 5
         UNION ALL
         SELECT 4, 18, 9
         UNION ALL
         SELECT 5, 42, 40
         UNION ALL
         SELECT 6, 07, 10
         UNION ALL
         SELECT 7, 45, 15)
SELECT LineNumber,
       UnitPrice,
       SUM(Quantity) AS Quantity
FROM   YourTable
GROUP  BY GROUPING SETS ( ( LineNumber, UnitPrice, Quantity ), ( ) ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:53:16.573

```
-- For all the data from the table
SELECT [LineNumber], [UnitPrice], [Quantity] FROM [SomeTable]

-- For the sum of the quantity field.
SELECT SUM([Quantity]) AS [Sum] FROM [SomeTable] 
```

# flash - 在双屏设置中运行两个 Flash 应用程序

> ID：12498324
> 
> 赞同：1
> 
> 时间：2012-09-19T15:51:03.353
> 
> 标签：flash

我有一个 Adob​​e Flash 应用程序，它在信息亭模式下全屏运行（作为投影仪 exe），并通过简单的基于操作系统的屏幕克隆（Windows 7）镜像到第二个屏幕上。

现在有一个要求，不是简单地克隆第一个屏幕，应用程序应该在第二个屏幕上显示其他附加信息。

我天真的方法是创建两个独立的 Flash 应用程序，并让它们通过 http 代理进行通信。但是，我在 Adob​​e Flash 文档中的 API 中没有找到任何允许我将辅助应用程序**全屏**发送到**第二台**显示器的内容。

有人有想法吗？或者拥有一个应用程序（而不是两个）但宽度增加一倍是否更容易/可能？这会延伸到两个屏幕吗？

更新：下面 Ryan 提到的 LocalConnection 比 http 代理更简单，所以我走那条路。对于双屏问题，我使用了下面提到的 Flash Builder 工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:55:55.103

找到了解决方案。这里的这个小工具将 swfs 转换为无头可执行文件，并具有一些简洁的功能来访问文件系统并与 flash 文件交互。

[http://thesz.diecru.eu/content/flash.php](http://thesz.diecru.eu/content/flash.php)

```
fscommand("exec","app.exe"); - executes a file which is located in the fscommand subdirectory
fscommand("real_exec","app.exe"); - executes a file which is in the same directory as the executable
fscommand("set_title","Window Title"); - sets the window title
fscommand("quit",""); - exit the flash
fscommand("command","move"); on MouseEvent.MOUSE_DOWN / fscommand("command","mouse_up"); on MouseEvent.MOUSE_UP - drag the window
fscommand("command","resize"); on MouseEvent.MOUSE_DOWN / fscommand("command","mouse_up"); on MouseEvent.MOUSE_UP - resize the window
fscommand("position","save"); / fscommand("position","restore"); / fscommand("position","clear"); - save, restore and clear window position 
```

开发人员非常友好地扩展了命令集

```
fscommand("position","100x200 300x400"); // position, then size (optional) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:22:58.760

我相信你需要的是LocalConnection。这使两个闪存文件（我知道它适用于 swf，从未尝试过投影仪 exe 文件）进行通信、传递变量并一起工作。如果我正确理解了您的问题，那么这对您来说是理想的选择。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/LocalConnection.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/LocalConnection.html)

[http://circlecube.com/2008/03/local-connection-actionscript-communicate-between-seperate-flash-files-tutorial/](http://circlecube.com/2008/03/local-connection-actionscript-communicate-between-seperate-flash-files-tutorial/)

这两个文件需要在同一台服务器上或本地同一文件夹中。从 Flash 中进行测试也不起作用，因为这两个文件随后变得相互依赖，这使得测试有点困难。就个人而言，我无法提供太多帮助，因为我只将 LC 用于非常基本的事情，例如传递变量和启动补间。希望有帮助！

# php - 在 MySQL 中使用 JOIN 时避免不明确的列错误

> ID：12498325
> 
> 赞同：0
> 
> 时间：2012-09-19T15:51:04.207
> 
> 标签：php, mysql, join, mysqli

我的查询如下所示：

```
$sql = "
SELECT u.*, s.*
FROM bands u
inner join statuses s on u.status_id = s.id
WHERE u.status_id = 1
ORDER BY u.band_name"; 
```

我想像这样从`bands`表中输出 ID：

```
<?php while($row = $result->fetch_assoc()){ ?>
            <tr>
              <?php
                    echo '<td id="' . $row['id'] . '">This is the band</td>';
              ?>
            </tr>
<?php } 
```

但`$row['id']`没有输出任何东西，我猜是由于某种模棱两可的列问题，但我不确定如何正确查询它。我也尝试过`$row['u.id']`，但我认为这不是正确的别名使用，因为它也没有输出任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:55:20.977

您需要为 id 列创建不冲突的别名；

```
SELECT u.*, s.*, u.id AS uid, s.id AS sid
FROM bands u
inner join statuses s on u.status_id = s.id
WHERE u.status_id = 1
ORDER BY u.band_name 
```

然后，您可以选择它们，`$row['uid']`并且`$row['sid']`仍然照常访问您的其他列。冲突的`id`列也仍然存在，只是避免使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:53:40.027

在相同的列名上添加别名。前任，

```
SELECT u.id UID,.... 
```

那么您现在可以使用其别名（*例如 UID*）进行检索

# iphone - 如何使表格视图单元格作为按钮工作？

> ID：12498334
> 
> 赞同：1
> 
> 时间：2012-09-19T15:51:16.357
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试制作一个用户将按下单元格并且单元格将用作按钮的应用程序，现在如何使单元格用作按钮并执行操作或我如何知道正在按下哪个单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:55:06.353

请阅读文档，但基本上当您设置 tableviewcontroller 的委托时，它会在单击时调用此方法：

`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`

indexpath 保存部分和行。如果您只使用一个部分，`indexPath.row`则将返回被单击的单元格的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:55:17.367

您实现该[`UITableViewDelegate`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)方法[`tableView:didSelectRowAtIndexPath:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3adidSelectRowAtIndexPath%3a)。

每当用户点击任何单元格时，都会调用该方法。如果传递`indexPath`的是您的纽扣电池的索引路径，那么您会做任何应该发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:54:55.943

阅读 Apple 关于[UITableViewDelegate](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)
的文档 你会发现`tableView:didDeselectRowAtIndexPath:`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:58:46.063

如果我正确理解了您的问题，您只想在用户触摸单元格时运行一些代码。

UITableViewDelegate 有一个名为`tableView:didSelectRowAtIndexPath:`( [`UITableViewDelegate tableView:didSelectRowAtIndexPath:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDelegate))的方法

只要实现它，你就可以在那里做你想做的事。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T15:55:54.933

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

当用户点击单元格时调用此方法。`indexPath.section`并且`indexPath.row`是您的单元格部分和行索引。 [http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)

# mysql - 如果给定条件不评估为真，则在 Where 子句中查询回退

> ID：12498336
> 
> 赞同：0
> 
> 时间：2012-09-19T15:51:24.637
> 
> 标签：mysql, select, duplicates

想象一下以下场景：我有一个存储在一个表中的标签列表和一个存储在另一个表中的语言列表。我有用户当前的语言（例如阿拉伯语），我想从他们的表中查询所有标签，条件如下：如果它们以阿拉伯语存在，则获取阿拉伯语版本。如果标签在阿拉伯语中不存在，则回退到英语并获取英语版本。

问题是它可能同时存在于阿拉伯语和英语中，我不想同时选择两行（所以简单地使用是`WHERE label_language='arabic' OR label_language='english'`行不通的），如果可能的话，我想在单个查询中执行此操作。

标签表：

```
id (non unique)|label_name|label_language
1|Something|arabic
1|Something Else|english
3|Blabla|english
4|Some text|english
4|Some other text|arabic 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:54:48.777

```
SELECT l1.id, COALESCE(l2.label_name, l1.label_name) AS label_name
    FROM Labels l1
        LEFT JOIN Labels l2
            ON l1.id = l2.id
                AND l2.label_language = 'arabic'
                AND l2.label_name <> ''
    WHERE l1.label_language = 'english' 
```

# php - PHP preg_replace 替换换行符

> ID：12498337
> 
> 赞同：18
> 
> 时间：2012-09-19T15:51:24.663
> 
> 标签：php, regex

使用重新编号数组时

```
$arr=array_values($arr); // Renumber array 
```

我意识到在其中一个数组字符串中引入了换行符，这是我不想要的。

我的字符串来自：

财产类型

到财产

类型

无论如何，我正在使用：

```
$newelement = preg_replace("/[^A-Za-z0-9\s\s+]/", " ", $element); 
```

已经在插入数据库之前删除了不需要的字符，所以我尝试将其更改为：

```
 $newelement = preg_replace("/[^A-Za-z0-9\s\s+'<br>''<br>''/n''/cr']/", " ", $element); 
```

但是没有变化，换行/换行/回车仍然存在。

我是否正确地进行了 preg_replace 调用？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-19T15:59:17.900

那个preg看起来有点复杂。然后你在开始时有 ^*不是*AZ... 或换行符。所以你不想替换换行符？

怎么样

```
$newelement = preg_replace("/[\n\r]/", "", $element); 
```

或者

```
$newelement = preg_replace("/[^A-Za-z ]/", "", $element); 
```

\s 也匹配换行符 (\n)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T16:09:07.803

这也应该有效：

```
// char(32) is whitespace
// For CR
$element = strtr($element, chr(13), chr(32));

// For LF
$element = strtr($element, chr(10), chr(32)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-26T08:47:41.510

这件事对我有用。

```
preg_replace("/\r\n\r\n|\r\r|\n\n/", "<br />", $element); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-09T16:39:14.027

这是一个黑客，但你可以做这样的事情：

```
 $email_body_string  = preg_replace("/\=\r\n$/", "", $email_body_string); 
```

替换说找到一个以等号结尾的行，然后有标准的回车和换行字符。将这些字符替换为空（“”），等号将消失。它下面的线将被拉起以加入第一条线。

现在，这意味着您永远不会有一条以等号结尾的线，这是一种风险。如果您想做得更好，请检查出现换行（带有等号）的行长。通常从行首开始大约有 73 个字符。然后你可以说：

```
 if (strlen(equals sign) == 73)
       $email_body_string  = preg_replace("/\=\r\n$/", "", $email_body_string); 
```

# php - 带有负前瞻的正则表达式忽略“类”这个词

> ID：12498339
> 
> 赞同：1
> 
> 时间：2012-09-19T15:51:27.137
> 
> 标签：php, regex, preg-replace, negative-lookahead

我对此感到疯狂，它是如此简单，但我无法找出正确的正则表达式。我需要一个匹配列入黑名单的单词的正则表达式，即“ass”。

例如，在这个字符串中：

```
<span class="bob">Blacklisted word was here</span>bass 
```

我试过那个正则表达式：

```
((?!class)ass) 
```

这与单词“bass”bot NOT“class”中的“ass”匹配。这个正则表达式在这两种情况下都标记了“ass”。我在谷歌上检查了多个负面的前瞻，但没有一个有效。

注意：这是针对 CMS，版主可以轻松找到潜在的坏词，我知道您不能依靠计算机进行过滤。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:26:12.330

如果您有可用的lookbehind ~~（IIRC，JavaScript 没有，这似乎很可能是您使用它的目的）~~（只是注意到PHP 标记；您可能有lookbehind 可用），这是非常微不足道的：

```
(?<!cl)(ass) 
```

如果不向后看，您可能需要执行以下操作：

```
(?:(?!cl)..|^.?)(ass) 
```

也就是说`ass`，之前的任意两个字符都不是`cl`，或者`ass`是行首之后的零个或一个字符。

请注意，这可能不是实施黑名单的最佳方式。你可能想要这个：

```
\bass\b 
```

哪个将匹配该单词`ass`，但不匹配其中包含`ass`的任何单词（例如`association`或其他任何单词`bass`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T16:35:15.490

It seems to me that you're actually trying to use two lists here: one for words that should be excluded (even if one is a part of some other word), and another for words that should not be changed at all - even though they have the words from the first list as substrings.

The trick here is to know where to use the lookbehind:

```
/ass(?<!class)/ 
```

In other words, the good word negative lookbehind should *follow* the bad word pattern, not precede it. Then it would work correctly.

You can even get some of them in a row:

```
/ass(?<!class)(?<!pass)(?<!bass)/ 
```

This, though, will match both `passhole` and `pass`. ) To make it even more bullet-proof, we can add checking the word boundaries:

```
/ass(?<!\bclass\b)(?<!\bpass\b)(?<!\bbass\b)/ 
```

UPDATE: of course, it's more efficient to check for parts of the string, with `(?<!cl)(?<!b)` etc. But my point was that you can still use the whole words from whitelist in the regex.

Then again, perhaps it'd be wise to prepare the whitelists accordingly (so shorter patterns will have to be checked).

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T16:05:26.990

这是你想要的吗？`(?<!class)(\w+ass)`

# jquery - MVC 将通用列表从 JS 文件传递 给控制器 操作

> ID：12498345
> 
> 赞同：1
> 
> 时间：2012-09-19T15:51:39.390
> 
> 标签：jquery, model-view-controller

我有一个文本文件，当用户上传文件时，控制器操作方法使用状态机解析该文件并使用通用列表来存储一些值。我以隐藏字段的形式将其传递回页面。然后，用户可以单击调用 JS 模式对话框的链接，他们可以查看列表并为列表中的每个项目添加评论。当他们单击链接时，我试图发布到一个操作方法，该方法将采用该隐藏字段并对其进行处理并呈现部分视图。问题是当我发布到这个操作方法时，这个字段被作为空值传递。

这是我的代码

```
@Html.HiddenFor(model => model.ExceptionString)

if (Model.ExceptionString != null)
           {
               if (Model.ExceptionString.Count > 0)
               {
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Test Exceptions")
            </span><span class="rightContent"><span id="TestExceptionChildDialogLink" class="treeViewLink">Click
                here to View Test Exceptions</span>
                <br />
                <span id="TestExceptionDisplay"></span>
                @Html.HiddenFor(model => model.ExceptionString)
                <input id="ExceptionString" type="hidden" value="@Model.ExceptionString" />
            </span>
        </div>
               }
           }

<div id="testExceptiontreeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
    overflow: scroll; width: 800px; height: 450px;">
    <div id="testExceptions">

    </div>
    <div id="inputTestExceptions" style="display: none;">
    </div>
</div>

  var runlogTestExceptionUrl = '@Url.Action("ListTestExceptions", "RunLogEntry")';

JS FILE

 $("#inputTestExceptions").load(runlogTestExceptionUrl, { ExceptionStrings: $("#ExceptionString").val() }); 
```

控制器动作

```
[HttpPost]
        public ViewResult ListTestExceptions(List<string> ExceptionStrings)
        { 
```

关于为什么异常字符串列表在由 JS 传递给 abive 操作方法时为空的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:13:09.687

`$("#ExceptionString").val()`将返回一个字符串。这意味着您的调用`.load`只是将单个名称/值对发布到您的 MVC 应用程序。

您需要它来发布名称/值对的集合。名称将相同：带有索引器的集合的名称。该值将是异常字符串。这将需要一些重大的重构。

这是可以工作的基本方式：

查看代码：

```
<form action="@Url.Action("ListTestExceptions", "RunLogEntry")" TYPE="POST">
@{ int counter = 0;}
@foreach(var exception in Model.ExceptionString)
{

  <input id='@("ExceptionString["+counter+"]")' type="hidden" value='@exception' />
  @{ counter =counter + 1; }
}
</form> 
```

JS代码：

```
$.ajax({
        url: runlogTestExceptionUrl,
        data: $(this).serialize(),
        success: function(data) {
             $('#inputTestExceptions').html(data);
        }
}); 
```

控制器动作不变：

```
[HttpPost]
    public ViewResult ListTestExceptions(List<string> ExceptionStrings)
    { 
```

显然这不会立即与您的代码集成。但这是将数据从表单发布到 MVC 中的单个集合变量的方式。

**注意**：我对 razor 语法有点生疏，所以可能存在一些小的语法问题。我会在找到它们时修复它们。

# r - 为什么 R 中的 ls() 不显示全局变量？

> ID：12498347
> 
> 赞同：6
> 
> 时间：2012-09-19T15:51:42.560
> 
> 标签：r, namespaces, scope, global-variables, libraries

在下面的代码中，字母和字母是全局的，或者在全局搜索路径中并且可以通过另一个包访问（同样的事情！）

```
> 信件
 [1] “A” “B” “C” “D” “E” “F” “G” “H” “I” “J” “K” “L” “M” “N” “O” “P " "Q" "R" "S"
[20] “T” “U” “V” “W” “X” “Y” “Z”
> 字母
 [1] “a” “b” “c” “d” “e” “f” “g” “h” “i” “j” “k” “l” “m” “n” “o” “p " "q" "r" "s"
[20] “t” “u” “v” “w” “x” “y” “z”
> ls()
字符(0)
>一个<-“1 2 3”
> ls()
[1] “一”
> rm(a)
> ls()
字符(0)
>

```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T15:55:23.477

出于同样的原因，它没有列出所有附加包中的所有导出函数（来自`?ls`）：

> 默认情况下，使用调用“ls”或“objects”的环境。

指定包含并将打印其名称的`LETTERS`环境`ls`。

```
# LETTERS is in there somewhere...
sapply(search(),ls) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-19T15:59:12.370

如果您阅读`?LETTERS`，您会注意到这些是常量而不是数据对象。该页面还表明这些常量位于`base`命名空间中。要列出它们，我们必须告诉`ls()`在该命名空间中查找：

```
> ls(name = "package:base", pattern = "LETTERS")
[1] "LETTERS"
> ls(name = "package:base", pattern = "letters")
[1] "letters" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-19T15:55:37.870

```
apropos("letters",where=TRUE)
        9         9 
"letters" "LETTERS" 
```

表示它们在搜索列表中的第 9 位，即，

```
search()
[1] ".GlobalEnv"        "package:stats"     "package:graphics" 
[4] "package:grDevices" "package:utils"     "package:datasets" 
[7] "package:methods"   "Autoloads"         "package:base" 
```

`base`包裹。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-19T16:07:06.910

如果您想查看特定模式的对象并记住正则表达式搜索模式，您可以使用`apropos`. 我有点担心我会找到多少，所以我首先检查了这项工作的长度，它只有 30 个。这是目前在我的工作区中找到的所有字符向量。请注意，“字母”和“字母”都出现了。

```
apropos(what="^", mode="character")
 [1] ".Depends"             ".Depends"             ".Depends"             ".Depends"            
 [5] ".Depends"             ".Depends"             ".Depends"             ".Depends"            
 [9] ".Depends"             ".Depends"             ".Depends"             ".Depends"            
[13] ".Device"              ".Firstlib_as_onLoad"  ".knownS3Generics"     ".Library"            
[17] ".Library.site"        ".S3PrimitiveGenerics" "blues9"               "letters"             
[21] "LETTERS"              "month.abb"            "month.name"           "p.adjust.methods"    
[25] "R.version.string"     "sas.get.macro"        "state.abb"            "state.name"          
[29] "tm" 
```

如果您在新会话中执行此操作，您将不会获得那么多“.Depends”。许多其他内置插件确实出现在这里，但缺少“pi”，因为它不是字符模式。如果你在我的机器中寻找“pi”，它的位置是 25，这在你使用 search() 之前并不是很有意义：

```
> search()[as.numeric(names(apropos(what="^pi", mode="numeric",where=1)))]
[1] "package:base"
# Removing the numeric restriction
> search()[as.numeric(names(apropos(what="^pi",where=1)))]
 [1] "package:base"      "package:utils"     "package:lubridate" "package:grDevices" "package:graphics" 
 [6] "package:graphics"  "package:MASS"      "package:MASS"      "package:MASS"      "package:base" 
```

所以所有这些包都有一些以“pi”开头的对象（主要是函数）。数字位置会随着加载的包的数量而变化，因为最近加载的具有较低数字的包会将“base”的搜索位置推高。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-19T15:53:31.297

因为它们是内置的数据对象。对普通变量进行普通赋值，你会看到它：

```
R> myLETTERS <- LETTERS
R> ls()
[1] "myLETTERS"
R> 
```

跑步

```
R> data() 
```

显示所有可用的数据集。查看`help(data)`更多信息，例如如何在特定环境而不是全局环境中查找数据。

# cordova - 何时使用 Phonegaps media.release()

> ID：12498356
> 
> 赞同：2
> 
> 时间：2012-09-19T15:52:11.577
> 
> 标签：cordova, media, android-mediaplayer

我正在尝试了解 media.release 并有一个特定的场景，我不确定是否需要它......

我正在使用 phonegap android 录制音频。当按下记录按钮并创建新的 Media() 对象时，我是否应该首先检查 Media 对象是否存在，如果存在则 release() 它？

就像是：

```
var mediaRec = null;

function startRecording() {

    //release media if present
    if(!mediaRec === null){
      mediaRec.release();
    }

    // Create your Media object
    mediaRec = new Media(src,...);

    // Record audio
    mediaRec.startRecord();
} 
```

...用户可以选择重新录制和回放录音，我想知道这是否会使用相同的实例或创建多个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T01:51:27.330

Generally you need to use release when you need to play a bunch of different sounds. There is a finite amount of open core instance on Android. I think 7 on my phone so if I try to create the 8th Media object it fails so I need to release one first. You are probably best to release the Media object if you won't need it anymore in your app.

# css - 选择 Safari Windows 上缺少箭头

> ID：12498358
> 
> 赞同：5
> 
> 时间：2012-09-19T15:52:21.320
> 
> 标签：css, windows, safari, html-select

我使用以下类为选择添加了一些样式：

```
.form-fields select {
height: 24px;   
background: url(/Images/ui/input-bg.jpg) #FFF repeat-x;  
border: 1px solid #AAA;
} 
```

这适用于所有浏览器，但它会导致 Windows 上的 Safari 忽略下拉箭头。如果我注释掉背景和边框属性（并且只注释掉两者），箭头会恢复，但高度在所有其他浏览器中都会被忽略。

我想保留这种样式，因为 Windows Safari 是少数，但我很想知道是否有适合所有人的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-13T08:14:50.027

把它放在你的CSS中

```
*{
 -webkit-appearance: menulist;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T17:04:45.347

我在 iPhone iOS 上遇到了同样的错误。我删除了一个`background-color:transparent;`样式，它修复了丢失的选择箭头浏览器 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-10T06:51:34.040

我已经尝试过上面的代码，但它不适用于使用 jquery.min.css 创建的 UI。我在css下面尝试过，它解决了我的问题。我的目标是**ui-icon-carat-d**，它显示了下拉箭头

```
.ui-icon-carat-d:after{
                background: url("https://cdn1.iconfinder.com/data/icons/pixel-perfect-at-16px-volume-2/16/5001-128.png") 95% 32% !important;
                background-repeat: no-repeat !important;
                background-color: #fff !important;
        } 
```

# php - 新发布的照片 /相册不公开

> ID：12498361
> 
> 赞同：1
> 
> 时间：2012-09-19T15:52:29.330
> 
> 标签：php, facebook-graph-api

当创建相册并为我作为管理员的页面填充照片时，相册和图像不公开可见。范围设置为 manage_pages 和 publish_stream。

有什么办法可以让相册和所有照片公开浏览/可见吗？

```
// create album
$albumArgs = array(
   'message' => 'A new album',
   'name' => $albumName,
   'privacy' =>  '{"value" :"EVERYONE"}',
   'access_token' => $accessToken
);          
$album = $facebook->api('/'.$user_profile['id'].'/albums', 'post', $albumArgs);

// add photo
$photoArgs = array(
   'message' => 'New photo',
   'image' => '@'.realpath($entry->picture),
   'privacy' =>  '{"value" :"EVERYONE"}',
   'access_token' => $accessToken
);
$result = $facebook->api('/'.$album['id'].'/photos', 'post', $photoArgs); 
```

# java - 将 Java BigInteger 用于巨大位掩码的性能影响

> ID：12498363
> 
> 赞同：3
> 
> 时间：2012-09-19T15:52:34.763
> 
> 标签：java, biginteger, bitmask

我们有一个有趣的挑战。我们必须控制对驻留在“bins”中的数据的访问。可能会有数十万个“垃圾箱”。对每个垃圾箱的访问都是单独控制的，但这些限制可以而且可能会重叠。我们正在考虑在位掩码（1、2、3、4 等）中为每个 bin 分配一个位置。

然后，当用户登录系统时，我们会查看他的安全属性并确定允许他查看哪些 bin。使用该信息，我们为该用户构建了一个位掩码，其中“设置”位对应于他允许查看的 bin 的标识符。因此，如果他可以看到 bin 1、3 和 4，他的位掩码将是 1101。

因此，当用户搜索数据时，我们可以查看返回行的 bin 索引，看看该位是否设置在他的位掩码上。如果他的位掩码设置了该位，我们让他看到该行。我们计划将位掩码存储为`BigInteger`Java 中的 a。

我的问题是：假设索引号没有变得比 Integer.MAX_INT 大，那么`BigInteger`位掩码是否会扩展到数十万位位置？`BigInteger.isBitSet(n)`在 n 可能很大的地方（例如 874,837）需要永远运行吗？创造这样的作品需要永远`BigInteger`吗？

其次：如果您有其他方法，我很想听听。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:57:20.443

如果您不经常更改 BigInteger 应该很快。

更明显的选择是专为此类事情设计的[BitSet 。](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html)对于查找位，我怀疑性能是相似的。对于创建/修改，使用 BitSet 会更有效。

注意：PaulG 评论说差异是“令人印象深刻的”并且 BitSet 更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T15:58:02.850

Java 有一个更方便的类，称为[`BitSet`](http://docs.oracle.com/javase/6/docs/api/java/util/BitSet.html).

您不需要检查该位是否在循环中设置：您可以制作一个掩码，使用按位`and`，并查看结果是否为非空来决定是授予还是拒绝访问：

```
BitSet resourceAccessMask = ...
BitSet userAllowedAccessMask = ...
BitSet test = (BitSet)resourceAccessMask.clone();
test.and(userAllowedAccessMask);
if (!test.isEmpty()) {
    System.out.println("access granted");
} else {
    System.out.println("access denied");
} 
```

我们在我以前的公司的类似情况下使用过这个类，并且性能对于我们的目的来说是可以接受的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T16:14:40.187

您可以为此定义自己的 Java 接口，最初使用 Java`BitSet`来实现该接口。

如果您遇到性能问题，或者您需要在很久以后使用，您可以始终提供不同的实现（例如，使用缓存或类似改进的实现）而不更改其余代码。仔细考虑您需要的接口，并选择一个`long`索引以确保您可以随时检查它是否在稍后的实现中超出范围（或最初简单地返回“无访问权”）任何东西`index > Integer.MAX_VALUE`。

使用`BigInteger`不是一个好主意，因为该类不是为特定目的而编写的，更改它的唯一方法是创建一个全新的副本。它在内存使用方面很有效；它在内部使用一个由 64 位长组成的数组（目前，这当然可以改变）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T22:26:23.153

值得考虑的一件事（除了使用 BitSet）是使用不同的粒度。因此，您使用较短的位集，其中每个位“保护”多个实际位。这样，您就不需要在 ram 中为每个用户提供数百万位。

实现此目的的一种简单方法是设置较小的位，例如 n/32 并执行以下操作：

```
boolean isSet(int n) {
    return guardingBits.isSet(n / 32) && realBits.isSet(n);
} 
```

如果这些位大多为零，这为您提供了避免加载实际位的好机会。您可以修改此方法以匹配预期的位集。如果您希望几乎所有位都已设置，则可以使用此保护位来存储一个，如果它保护的所有位都已设置。因此，您只需要检查可能为零的位。

这甚至可能是一个开始。根据使用情况和要求，您可能希望使用 B-tree 或分页版本，其中您只在内存中保存一小部分大位字段。

# .net - 如何在 Mono.Cecil 中发出对 String.op_Equality 的调用

> ID：12498364
> 
> 赞同：0
> 
> 时间：2012-09-19T15:52:35.407
> 
> 标签：.net, reflection, il, mono.cecil

我正在尝试使用 Mono.Cecil 将代码注入程序集。到目前为止一切都很好，但现在我正在尝试实现这一点 IL：

```
call bool [mscorlib]System.String::op_Equality(string, string) 
```

我如何在 Cecil 中做到这一点？我知道这有点像

```
var il=mymethod.Body.GetIlProcessor();
...
il.Emit(Opcodes.Call, ????); 
```

我不知道要发送什么样的参数或如何获取对该静态函数的引用。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:58:34.107

像这样的东西：

```
MethodReference ope = myMainModule.Import(typeof(string).GetMethod("op_Equality"));
il.Emit(Opcodes.Call, ope); 
```

# jquery - 根据用户代理删除 jQuery 脚本

> ID：12498380
> 
> 赞同：0
> 
> 时间：2012-09-19T15:53:22.127
> 
> 标签：jquery, html, css, ipad, jquery-mobile

我正在使用 Stellar.js 脚本创建视差站点，但是我想在平板电脑或手机上查看时禁用此脚本。有没有办法告诉某些设备调用脚本而其他设备不调用？我可以根据浏览设备调用不同的 css 文件，但是这个方法不会调用然后运行 ​​jQuery 脚本？！

```
{document.write("<link type=\"text\/css\" rel=\"stylesheet\" href=\"css\/style.css\" \/>");
document.write("<script type=\"text\/javascript\" src=\"js\/jquery.stellar.min.js\" ><\/script>"
);} 
```

完整的 html 可以在这里找到 [http://bettondesignwork.co.uk/tim/Boutinot/index.txt](http://bettondesignwork.co.uk/tim/Boutinot/index.txt)。

这是我尝试制作跨平台的第一个网站，所以如果这些看起来像是基本问题，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:00:40.603

您可以根据屏幕分辨率在脚本插件周围包裹一个 if 语句吗？[或者你可以使用像这个例子这样的](http://www.quirksmode.org/blog/archives/2010/08/combining_media.html)媒体查询

# ruby-on-rails - 让这个 ActiveRecord 查询更高效？

> ID：12498382
> 
> 赞同：1
> 
> 时间：2012-09-19T15:53:26.757
> 
> 标签：ruby-on-rails, ruby

我有`User`和`Gift`模型。用户可以向其他用户发送礼物。我有一个关系表，告诉我哪些用户收到了礼物。另一方面，用户属于 a `School`，它可以是免费的或付费的。

我想要上周收到特定类型学校（免费或付费）礼物的用户计数。

我可以：

```
Gift.joins(:schools).where("created_at >= ? AND schools.free_school = ?", Time.now.beggining_of_week, true).collect(&:gift_recipients).flatten.uniq.count. 
```

或者，我想知道上周有多少用户发送了礼物。这有效：

```
Gift.joins(:schools).where("created_at >= ? AND schools.free_school = ?", Time.now.beggining_of_week, true).collect(&:user_id).uniq.count. 
```

如果我想知道上周有多少用户发送或收到了礼物，我可以这样做：

```
(Gift.joins(:schools).where("created_at >= ? AND schools.free_school = ?", Time.now.beggining_of_week, true).collect(&:gift_recipients).flatten + Gift.joins(:schools).where("created_at >= ? AND schools.free_school = ?", Time.now.beggining_of_week, true).collect(&:user_id)).uniq.count 
```

所有这一切都很好，但如果数据库足够大，这真的很慢。您有什么建议可以提高效率，也许在需要的地方使用原始 SQL？

```
"gifts" 
  user_id (integer) 
  school_id (integer) 
  created_at (datetime) 
  updated_at (datetime) 
"gift_recipients" is a table like 
  gift_id | recipient_id, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:00:37.693

您不想使用 collect() 来执行此操作，它会将所有结果加载到内存中并在 ActiveRecords 数组中过滤它们。这是缓慢且危险的，因为它可能会泄漏/使用所有可用内存，具体取决于数据的大小与您的服务器。

一旦你发布了你的模式，我可以帮助你在 SQL 中查询/聚合它，这是正确的方法。

例如，而不是：

```
Gift.joins(:schools).where("created_at >= ? AND schools.free_school = ?", Time.now.beggining_of_week, true).collect(&:user_id).uniq.count 
```

你应该使用：

```
Gift.joins(:schools).where("created_at >= ? AND schools.free_school = ?", Time.now.beggining_of_week, true).count('distinct user_id') 
```

...这将计算 SQL 中不同的 user_ids 并返回结果，而不是返回所有对象并在内存中计算它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T00:48:59.653

我看到了这篇旧帖子，我想发表一些评论：正如温菲尔德所说

```
Gift.joins(:school).where("created_at >= ? AND schools.free_school = ?", Time.now.beggining_of_week, true).count('distinct user_id') 
```

是这样做的好方法。我会做

```
Gift.joins(:school).count('distinct user_id', :conditions => ["gifts.created_at >= ? AND free_school = ?", Time.now.beginning_of_week, true]) 
```

但仅仅因为这对我来说更好看，个人的事情，你可以检查两者是否产生完全相同的 SQL 查询。注意有必要写

```
gifts.created_at 
```

为了避免歧义，因为两个表都有一个具有此名称的列，在列名的情况下

```
free_school 
```

没有歧义，因为这不是礼物表中的列名。对于我正在做的第一个查询

```
Gift.joins(:school).where("created_at >= ? AND schools.free_school = ?", Time.now.beginning_of_week, true).collect(&:user_id).uniq.count 
```

这很尴尬。这效果更好

```
Gift.joins(:school).count("distinct user_id", :conditions => ["gifts.created_at >= ? AND free_school = ?", Time.now.beginning_of_week, true]) 
```

这避免了将礼物带入记忆并用红宝石过滤它们的问题。

到目前为止，没有什么新鲜的。这里的关键点是我的问题是计算上周发送或接收礼物的用户数量。为此，我想出了以下内容

```
 senders_ids = Gift.joins(:school).find(:all, :select => 'distinct user_id', :conditions => ['gifts.created_at >= ? AND free_school = ?', Time.now.beginning_of_week, type]).map {|g| g.user_id}
  receivers_ids = Gift.joins(:school).find(:all, :select => 'distinct rec.recipient_id', :conditions => ['gifts.created_at >= ? AND free_school = ?', Time.now.beginning_of_week, type], :joins => "INNER JOIN gifts_recipients as rec on rec.gift_id = gifts.id").map {|g| g.recipient_id}
  (senders_ids + receivers_ids).uniq.count 
```

我很确定存在一种更好的方法来做到这一点，我的意思是，在单个 SQL 查询中准确返回这个数字，但至少结果是只包含 id 的对象数组（recipient_id 对于接收者的情况），而不是带来将所有对象放入内存。好吧，这只是希望对像我这样通过 Rails 进行 sql 查询的新手有用:)。

# ios - 在注释标注顶部添加子视图

> ID：12498391
> 
> 赞同：0
> 
> 时间：2012-09-19T15:53:54.650
> 
> 标签：ios, mkmapview, mkannotation

在作为地址占位符的showcallout部分，注释中的标题副标题，有没有办法添加子视图？我想要的是在这个盒子的顶部放一个小矩形（标注）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:02:37.477

检查这个应用程序 - [https://github.com/akshay1188/CustomAnnotation](https://github.com/akshay1188/CustomAnnotation)

# sql-server - 将比较对象结果添加到差异数据集

> ID：12498393
> 
> 赞同：2
> 
> 时间：2012-09-19T15:54:01.247
> 
> 标签：sql-server, powershell, diff

我有两个 System.Data.DataSet 对象，我希望使用 Compare-Object Cmdlet 进行比较。我希望输出一个数据集，其中包含原始数据集的列，但只有差异和一个附加列，其中包含在 Compare-Object cmdlet 中计算的 SideIndicator 值。

假设我有这两个 CSV：

```
#C:\test.csv
"firstName","lastName"
"Bruce","Wayne"
"Clark","Kent"

#C:\test2.csv
"firstName","lastName"
"Peter","Parker"
"Clark","Kent"
"Jean","Grey" 
```

我想使用以下结果：

```
compare-object (Get-Content C:\test.csv) (Get-Content C:\test2.csv) 
```

填充格式如下的数据集：

```
#desiredResult
"firstName","lastName","SideIndicator"
"Peter","Parker","=>"
"Jean","Grey","=>"
"Bruce","Wayne","<=" 
```

谢谢，扎克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:19:24.427

这应该给出`$output`您正在寻找的价值。

```
$output = Compare-Object $(Import-Csv c:\test.csv) $(Import-Csv c:\test2.csv) -Property FirstName, Lastname 
```

当您使用`Get-Content`文件时，它将每一行作为数组的一个对象。这将`firstname`and`lastname`视为单行，它存在于两个数组中。因此，它不会与 the 返回，`compare-object`因为它在两者中。

当您使用`Import-Csv`它时，它将第一行作为标题，并将它们作为数组的属性。之后的每一行都根据它在`.csv`. 这意味着`compare-object`可以将它们与不同的数组进行比较，并将属性保持到输出。

# jquery - 将所选插件与 Rails Select 一起使用

> ID：12498399
> 
> 赞同：3
> 
> 时间：2012-09-19T15:54:17.320
> 
> 标签：jquery, ruby-on-rails-3, jquery-chosen

我正在尝试使用为 rails[选择的 gem实现自动完成。](https://github.com/tsechingho/chosen-rails)哪个是一个 javascript 插件[？](http://harvesthq.github.com/chosen/)

我正在使用 rails 3.2.8 和 Simple Form 2.0.2 我正在尝试以使用 simpleform gem 的形式实现它。在简单的形式中，我使用关联方法来选择用户可以/可能属于的所有机构（数据库中的另一个表）。

我一直在尝试将 2 个 railscasts 集[#102](http://railscasts.com/episodes/102-auto-complete-association-revised)和[#258组合在一起](http://railscasts.com/episodes/258-token-fields-revised)

我已经在我的 gem 文件中安装了 gem

```
gem 'chosen-rails' 
```

我已经把需要的项目放在 application.js

```
//= require chosen-jquery 
```

& 应用程序.css

```
 *= require chosen 
```

我已将电话放在 users.js.coffee 文件中

```
jQuery ->
  $('#user_bankinst_name').chosen(); 
```

这是我尝试在其上使用插件的表单。这是“f.association”行。

```
 <%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
              <%= f.error_notification %>
                <%= f.input :email, :required => true, :autofocus => true, :label => 'Username ( Your Email )', :placeholder => 'Email Address' %>
                <%= f.input :password, :required => true, :autofocus => true, :label => 'Password', :placeholder => 'Password' %>
                <%= f.input :password_confirmation, :required => true, :autofocus => true, :label => 'Confirm Password', :placeholder => 'Password Confirmation' %>
                <%= f.association :bankinst, :collection => Bankinst.order(:FinancialInstitutionName), :required => true, :autofocus => true, :label => 'Pick an Institution', :label_method=>:FinancialInstitutionName, :id => 'user_bankinst_name'  %>
                <%= f.button :submit, "Sign Up  >>", class: 'btn btn-inverse' %>
            <% end %> 
```

我究竟做错了什么？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T17:12:46.207

我想到了。

我的班级缺少“：input_html”。

我将咖啡文件更改为：

```
jQuery ->
  $('.chzn-select').chosen() 
```

我将课程更改为 chzn-select

```
<%= f.association :bankinst, :collection => Bankinst.order(:FinancialInstitutionName), :required => true, :autofocus => true, :label => 'Pick an Institution', :label_method=>:FinancialInstitutionName, :input_html => {:class => "chzn-select" }  %> 
```

# javascript - 在多个 Div Id 上使用 javascript

> ID：12498405
> 
> 赞同：2
> 
> 时间：2012-09-19T15:54:33.290
> 
> 标签：javascript, jquery, css

我创建了一个扩展 div，它在加载时隐藏并在使用 javascript 和 jQuery 单击时扩展。我的问题是我需要在每个页面上多次使用此功能（10-30x）。有没有办法使用数组或类似性质的东西调用函数来处理多个 div id（我是新手，我很抱歉），例如，我的一些 div id 将是 eb1、eb2、eb3、eb4。这是我目前在一个 id 上工作的脚本：

```
 <script type="text/javascript">
        jQuery(document).ready(function() {

        jQuery('#eb1').hide();
        //hides box at the begining
        jQuery("#hide").click(function() {
            jQuery('#eb1').fadeOut(300);
            //jQuery('#the_box').hide();
        });
        jQuery("#show").click(function() {
            jQuery('#eb1').fadeIn(300);
            //jQuery('#the_box').show();
        });

    });
</script> 
```

任何帮助将不胜感激，甚至是解释的链接。谢谢，特拉维斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:56:45.670

除了[约翰康德的回答](https://stackoverflow.com/a/12498438/82548)，这也可以使用属性开始：

```
jQuery('div[id^="eb"]').hide(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/GJpJ7/2/)。

当然，只使用特定的类名更容易，然后选择器变为：

```
jQuery('.className').hide(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/GJpJ7/3/)。

参考：

*   [属性以 ( `[attribute^="value"]`) 开头的选择器](http://api.jquery.com/attribute-starts-with-selector/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:55:57.970

您应该能够通过用逗号分隔 id 来做到这一点：

```
jQuery('#eb1','#eb2','#eb3').hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:03:05.387

也许将一个css类添加到所有`div`（或您使用的任何标签）应该表现得像这样的元素，然后在选择器中使用该类？

```
 jQuery('div.hidable').hide();
        //hides all 'hidable' boxes
        jQuery("#hide").click(function() {
            jQuery('div.hidable').fadeOut(300);
        });
etc... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T16:03:14.150

你可以创建一个函数来做到这一点。

让我解释

> 功能 ToogleDiv（容器）{
> 
> ```
> // simple toogle
> $(container).toggle();
> 
> // a toogle with some effect
> $(container).toggle('slow', function() {
>  // add some action    }); } 
> ```

这是一个 Jquery 示例[Toogle Jquery 示例](http://api.jquery.com/toggle/)

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T15:58:57.733

只需在谷歌中输入“jquery multiple div show hide”：

第一个链接给出了这个： [Show/Hide Multiple Divs with Jquery](https://stackoverflow.com/questions/6967081/show-hide-multiple-divs-with-jquery)

:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T16:04:23.827

您可以使用[Attribute Starts With Selector [name^="value"]](http://api.jquery.com/attribute-starts-with-selector/)

```
var divs = $('div[id^="eb"]');
$(divs).hide();

$('#show').click(function(){
    $(divs).show();
});

$('#hide').click(function(){
    $(divs).hide();
}); 
```

[JSFiddle](http://jsfiddle.net/vJBUM/)上的实时示例

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-19T16:04:42.103

```
function show(var id){
     jQuery(id).fadeIn(300);
}

function hide(var id){
     jQuery(id).fadeOut(300);
} 
```

然后，在您的 div 中：

```
<a id="hide" onClick="hide('eb1')">hide</a>
<a id="show" onClick="show('eb1')">show</a>
<div id="eb1"></div> 
```

# maven - java.lang.NullPointerException 使用 maven 执行加速

> ID：12498409
> 
> 赞同：1
> 
> 时间：2012-09-19T15:54:53.480
> 
> 标签：maven, acceleo

我正在尝试使用 maven 执行 acceleo 项目。这是 pom 配置：

## pom.xml

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <version>1.2.1</version>
    <configuration>
        <mainClass>src.AcceleoProject.files.Generate</mainClass>
        <arguments>
            <argument>/${project.basedir}/src/main/java/src/AcceleoProject/files/model.uml</argument>
            <argument>/${project.basedir}/src/main/java/src/AcceleoProject/files/out</argument>
        </arguments>

    </configuration>
</plugin> 
```

## 错误

当我执行 pom 时，出现以下错误：

```
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:297)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NullPointerException
    at org.eclipse.core.internal.runtime.InternalPlatform.getBundle(InternalPlatform.java:861)
    at org.eclipse.core.runtime.Platform.getBundle(Platform.java:1185)
    at org.eclipse.acceleo.common.internal.utils.workspace.BundleURLConverter.resolveBundle(BundleURLConverter.java:186)
    at org.eclipse.acceleo.common.internal.utils.workspace.BundleURLConverter.resolveAsPlatformPlugin(BundleURLConverter.java:137)
    at org.eclipse.acceleo.engine.internal.environment.AcceleoEvaluationEnvironment.loadDynamicModules(AcceleoEvaluationEnvironment.java:763)
    at org.eclipse.acceleo.engine.internal.environment.AcceleoEvaluationEnvironment.mapDynamicOverrides(AcceleoEvaluationEnvironment.java:899)
    at org.eclipse.acceleo.engine.internal.environment.AcceleoEvaluationEnvironment.<init>(AcceleoEvaluationEnvironment.java:139)
    at org.eclipse.acceleo.engine.internal.environment.AcceleoEnvironmentFactory.createEvaluationEnvironment(AcceleoEnvironmentFactory.java:124)
    at org.eclipse.ocl.internal.evaluation.QueryImpl.getEvaluationEnvironment(QueryImpl.java:286)
    at org.eclipse.ocl.ecore.QueryImpl.getEvaluationEnvironment(QueryImpl.java:74)
    at org.eclipse.acceleo.engine.generation.AcceleoEngine.doEvaluate(AcceleoEngine.java:268)
    at org.eclipse.acceleo.engine.generation.AcceleoEngine.evaluate(AcceleoEngine.java:145)
    at org.eclipse.acceleo.engine.service.AcceleoService.doGenerateTemplate(AcceleoService.java:869)
    at org.eclipse.acceleo.engine.service.AcceleoService.doGenerate(AcceleoService.java:575)
    at org.eclipse.acceleo.engine.service.AbstractAcceleoGenerator.generate(AbstractAcceleoGenerator.java:188)
    at org.eclipse.acceleo.engine.service.AbstractAcceleoGenerator.doGenerate(AbstractAcceleoGenerator.java:158)
    at src.AcceleoProject.files.Generate.doGenerate(Generate.java:197)
    at src.AcceleoProject.files.Generate.main(Generate.java:159)
    ... 6 more 
```

我认为它与我要生成文件的输出文件有关。有人对此有任何想法吗？先感谢您。

# javascript - 在 indexedDB 中启动事务时出现“TypeError: db is null”

> ID：12498412
> 
> 赞同：2
> 
> 时间：2012-09-19T15:55:01.460
> 
> 标签：javascript, indexeddb

我正在打开一个数据库，然后在其中进行交易。这是代码

```
var OLC = {}
// Initialising the window.IndexedDB Object
window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;
window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange;
window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction;
var db = null;

OLC.indexedDB = {};
OLC.indexedDB.db = null;
OLC.indexedDB.version = null;

OLC.indexedDB.open = function(type) {
    // opening OLCMail DB
    try {
        var dbOpenRequest = window.indexedDB.open("OLCMail");
        dbOpenRequest.onsuccess = function(event){
            OLC.indexedDB.db = dbOpenRequest.result;
            db = dbOpenRequest.result; 
            OLC.indexedDB.version = db.version;
            var thisDB = db; // Need to create this variable since the variable db is assigned to other things later
            db.onversionchange = function(e){
              console.log("Version change triggered, so closing database connection", e.oldVersion, e.newVersion, thisDB);
              thisDB.close();
            };
        console.log("Database Opened", db, event);
        };

        // Creating objectstore "MailHeaders"
        dbOpenRequest.onupgradeneeded = function(e){
            console.log("Database upgrade needed");
            db = dbOpenRequest.result;
            var transaction = dbOpenRequest.transaction; 
```

....等等

然后我有一个方法 loadOfflineMails 其目的是创建一个事务并从数据库中获取一个值

```
OLC.indexedDB.loadOfflineMails = function () {
    console.log("Opening a new transaction.");
    try {
        var db = OLC.indexedDB.db;
        console.log(OLC.indexedDB.db);
        var objectStore = db.transaction(["MailHeaders"]).objectStore("MailHeaders");
        console.log("Object Store opened", objectStore);

        var cursor = null; 
```

....很快

我正在运行它

```
function _init() {
    OLC.indexedDB.open();
    OLC.indexedDB.loadOfflineMails();
}

window.addEventListener("DOMContentLoaded", _init, false); 
```

我遇到的问题是当 OLC.indexedDB.loadOfflineMails(); 被调用时，OLC.indexedDB 的 db 属性显示为空，因此事务未完成。

但是，当我在 loadOfflineMails() 中的事务语句之前提醒任何值时，代码可以正常工作。前任。

```
OLC.indexedDB.loadOfflineMails = function () {
        console.log("Opening a new transaction.");
        try {
                    alert("ANY THING");
            var db = OLC.indexedDB.db;
            console.log(OLC.indexedDB.db);
            var objectStore = db.transaction(["MailHeaders"]).objectStore("MailHeaders");
            console.log("Object Store opened", objectStore);

            var cursor = null; 
```

我仍然无法弄清楚警报语句如何导致空 db 属性转换为 IDBDatabase 对象。我试过console.log，延迟代替警报，但没有任何效果，它就像alert（）一样会导致奇迹。

仅供参考：我在alert（）之前和之后都做了console.log（OLC.indexedDB.db）在alert（）之前它是空的，在alert（）之后它是一个IDBDatabase对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:00:34.683

OLC.indexedDB.db 属性为空，因为调用第二个函数时尚未创建数据库。数据库打开使用回调函数执行，而其余代码按顺序执行。您需要修改代码，以便在 dbOpenRequest.onsuccess 函数的末尾执行 loadOfflineMails 函数。

更改此代码：

```
function _init() {
    OLC.indexedDB.open();
    OLC.indexedDB.loadOfflineMails();
} 
```

进入这个：

```
function _init() {
    OLC.indexedDB.open(null,OLC.indexedDB.loadOfflineMails);
} 
```

将第二个函数作为参数传递给打开数据库函数，这样它将在数据库初始化时执行。

并且您需要像这样修改 Open Db 包装器：

```
OLC.indexedDB.open = function(type, callback) {
    // opening OLCMail DB
    try {
        var dbOpenRequest = window.indexedDB.open("OLCMail");
        dbOpenRequest.onsuccess = function(event){
            /*your code*/
            callback();//execute the callback function after db init is complete
        }
     }
} 
```

# jsf - 将选定的行从一个 DataTable 移动到其他 inPrimeFaces 3.2

> ID：12498414
> 
> 赞同：1
> 
> 时间：2012-09-19T15:55:06.193
> 
> 标签：jsf, primefaces

我是 PrimeFaces 的新手。在我的项目中，我需要显示 2 个表，用户可以在其中选择行并移动到其他数据表。为了实现这一点，我可以使用 PickList 组件吗？如果是这样，它是否允许我显示具有多列的数据。任何参考示例都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:09:12.373

我认为您不需要使用选择列表。您可以使用 primefaces 拖放来实现这一点。 [在这里检查](http://www.primefaces.org/showcase/ui/dndTable.jsf)

拖放组件与数据组件有特殊的集成。您可以将拖放组件与数据表集成。让我知道这是否有帮助... :)

# asp.net - 如何在不同页面defualt2.aspx中找到defualt.aspx中存在的控件的ID

> ID：12498423
> 
> 赞同：2
> 
> 时间：2012-09-19T15:55:22.853
> 
> 标签：asp.net, ajax

我有一个 Web 表单，它从数据库中加载 100 000 个数据。我有 50 个下拉列表，它根据下拉列表的 selectedindex 更改填充。所以绑定下拉列表我正在使用 ajax 代码。
我在一个单独的 js 文件中编写了近 200 行 ajax 代码。我使用的是 3 层 artitecture。我没有从 bal 类返回数据集，而是返回泛型类来绑定 gridview。我还创建了一个类来绑定gridview.Also 我没有使用任何更新面板。

```
Is this approach will improve my performance.?? 
```

但是对我来说有一个问题，我必须在 js 文件中编写代码才能像这样绑定下拉列表。

```
function GetAppStoreLnk(id) {               
           var txtnameid = document.getElementById(id);

           CreateXmlHttp();

           var requestUrl = "Default2.aspx?id="+txtnameid+"";

           if (XmlHttp) {
               XmlHttp.onreadystatechange = function() { getschemename(txtnameid) };
               XmlHttp.open("GET", requestUrl, true);
               XmlHttp.send(null);
           }
       }

       function getschemename(id)
       { 
           // To make sure receiving response data from server is completed
           if(XmlHttp.readyState == 4) {    
            // To make sure valid response is received from the server, 200 means response received is OK
            if(XmlHttp.status == 200) {         
                var strData = XmlHttp.responseText;
            if(strData != "") {            
                 var arrscheme = strData.split("|");
                     id.length = 0;     

                 for(i=0; i<arrscheme.length-1; i++) {
                    var strscheme = arrscheme[i];
                var arrschnm = strscheme.split("~");

                    id.options[i] = new Option();
                id.options[i].value = arrschnm[0];
                    id.options[i].text = arrschnm[1]; 
                 }      
            } else {
                    id.length = 0;
                id.options[0] = new Option(); 
                id.options[0].value = "";
                    id.options[0].text = "Scheme Name is not available";        
                }

                    document.body.style.cursor = "auto";    
            }
            else {
            id.length = 0;
            id.options[0] = new Option(); 
                    id.options[0].value = "";
            id.options[0].text = "server is not ready";
                document.body.style.cursor = "auto";        
            }
           } 
    } 
```

但是如果我创建类来绑定下拉列表，这将减少我的 js 文件代码行。我将如何在不同的页面中找到下拉列表的 ID，即 Default2.aspx。请帮我 。我将如何在不同的页面中找到下拉列表的 ID，即 Default2.aspx .?？我也不想使用用户控件或母版页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:39:55.820

我不明白你的问题。您正在尝试访问页面 Default2.aspx 中页面 Default.aspx 中的 Asp.net 下拉菜单，对吗？

你能澄清一下你的要求吗？

# ios - 我应该在我的 iOS 应用程序中加密 Amazon S3 密钥吗？

> ID：12498424
> 
> 赞同：3
> 
> 时间：2012-09-19T15:55:23.730
> 
> 标签：ios, amazon-s3, aes

在我的二进制文件中加密 S3 密钥是个好主意吗？如何？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:24:13.497

我建议您**不要将**它们包含在您的应用程序中。将它们放在具有基于 REST 接口的服务器上，并限制服务器端单个用户的可能性。

当用户获得您的 S3 凭据时，他们将能够滥用它们！当您将它们包含在您的应用程序中时，他们将始终能够获取它们。

# git - 如何将远程 Git 存储库添加到本地存储库并保持更新？

> ID：12498426
> 
> 赞同：0
> 
> 时间：2012-09-19T15:55:26.433
> 
> 标签：git, git-remote

我有远程仓库的授权`public_key`，我可以从`http://someurl/first.git`本地机器上获取所有内容，但我必须将此更改填充到其他环境。为了使它成为可能，我必须将我的`private_key`, clone repo 放在那里并切换到指定的标签。但出于安全原因，我不想这样做。

我正在考虑创建我的本地仓库`http://someurl/second.git`，提交所有更改并部署。但我现在知道如何将远程仓库添加到我的本地？是否可以？以及如何从远程提交到我的本地仓库并切换到所需的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:50:03.233

[Noufal Ibrahim](https://stackoverflow.com/users/229602/noufal-ibrahim)应该发表他的评论作为答案：

用于[`git remote add`](https://www.kernel.org/pub/software/scm/git/docs/git-remote.html)注册新的远程存储库，例如：

```
git remote add site2 http://someurl/second.git 
```

之后，您可以从本地机器推送到另一个存储库：

```
git push site2 myBranch 
```

# agda - 在 agda 中包含 with/rewrite 子句的类型，或者，如何使用 rewrite 而不是 subst？

> ID：12498428
> 
> 赞同：14
> 
> 时间：2012-09-19T15:55:31.023
> 
> 标签：agda

首先是一些无聊的导入：

```
import Relation.Binary.PropositionalEquality as PE
import Relation.Binary.HeterogeneousEquality as HE
import Algebra
import Data.Nat
import Data.Nat.Properties
open PE
open HE using (_≅_)
open CommutativeSemiring commutativeSemiring using (+-commutativeMonoid)
open CommutativeMonoid +-commutativeMonoid using () renaming (comm to +-comm) 
```

现在假设我有一个类型，例如由 naturals 索引。

```
postulate Foo : ℕ -> Set 
```

我想证明在这种类型上运行的函数的一些等式`Foo`。因为 agda 不是很聪明，所以这些将是异构的平等。一个简单的例子是

```
foo : (m n : ℕ) -> Foo (m + n) -> Foo (n + m)
foo m n x rewrite +-comm n m = x

bar : (m n : ℕ) (x : Foo (m + n)) -> foo m n x ≅ x
bar m n x = {! ?0 !} 
```

酒吧的目标是

```
Goal: (foo m n x | n + m | .Data.Nat.Properties.+-comm n m) ≅ x
————————————————————————————————————————————————————————————
x : Foo (m + n)
n : ℕ
m : ℕ 
```

这些`|`目标在做什么？我什至如何开始构建这种类型的术语？

在这种情况下，我可以通过手动进行替换来解决这个问题`subst`，但是对于较大的类型和方程式来说，这变得非常丑陋和乏味。

```
foo' : (m n : ℕ) -> Foo (m + n) -> Foo (n + m)
foo' m n x = PE.subst Foo (+-comm m n) x

bar' : (m n : ℕ) (x : Foo (m + n)) -> foo' m n x ≅ x
bar' m n x = HE.≡-subst-removable Foo (+-comm m n) x 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T18:46:23.057

这些管道表示归约在等待相关表达式的结果之前被暂停，通常归结为您有一个`with`块，您需要知道其结果才能继续。这是因为该`rewrite`构造只是扩展为`with`所讨论的表达式的 a 以及使其工作可能需要的任何辅助值，然后是匹配 on `refl`。

在这种情况下，它只意味着您需要`+-comm n m`在`with`块中引入 并在模式匹配上引入`refl`（并且您可能也需要将其`n + m`引入范围，正如它所暗示的那样，因此可以讨论相等性）。Agda 评估模型相当简单，如果您对某事物进行模式匹配（记录上的虚假模式匹配除外），除非您对同一事物进行模式匹配，否则它不会减少。你甚至可以在你的证明中用相同的表达式重写，因为它只是做了我为你概述的事情。

更准确地说，如果您定义：

```
f : ...
f with a | b | c
...  | someDataConstructor | boundButNonConstructorVariable | someRecordConstructor = ... 
```

然后您将其`f`称为表达式，您将获得`a`仅针对表达式观察到的管道，因为它匹配 on `someDataConstructor`，因此至少要`f`减少您需要引入`a`然后`someDataConstructor`从中匹配 on 。另一方面，`b`and `c`，虽然它们是在 with 块中引入的，但不要停止评估，因为`b`不匹配模式，并且`c`'s`someRecordConstructor`被静态地知道是唯一可能的构造函数，因为它是带有 eta 的记录类型。

# javascript - 多个 Websocket

> ID：12498429
> 
> 赞同：20
> 
> 时间：2012-09-19T15:55:32.930
> 
> 标签：javascript, websocket

我正在尝试在一页上使用两个 websocket。这是我的代码：

```
var pageViewWs = new WebSocket("ws://localhost:9002/pageView");
var sessionWs = new WebSocket("ws://localhost:9002/session");

pageViewWs.onmessage = function (event) {
  alert("PageView");
};

sessionWs.onmessage = function (event) {
  alert("Session"); 
}; 
```

仅显示 PageView 警报。在服务器端，不向 /session 发出请求，只向 /pageView 发出请求。

现在，如果我切换 var pageViewWs 和 var sessionWs ，则会显示 Session 警报而不是 PageView。这不是因为它们是警报，我尝试附加到正文和 div，并且我已经逐步使用 Firebug。似乎一次只能创建一个 WebSocket，尽管在 Firebug 中 pageViewWs 和 sessionWs 的属性除了它们的 url 之外看起来是相同的。

我只在 Firefox 15.0.1 中测试过这个。是否存在某种 Websocket 限制，您一次只能运行一个？还是我的代码有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:06:04.713

我相信您只能创建一个从客户端到主机上特定端口的 WebSocket 连接。您是否尝试过在不同的端口或不同的服务器上运行这两个服务？这将允许您确定限制...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-30T12:31:40.170

通过同一个端口运行多个服务时，我遇到了同样的问题。因此，我创建了一个**PHP 库**来执行此操作。

## 为什么 ？

托管服务提供商的一些免费计划不允许您绑定到端口或允许您绑定到一个端口。在**OpenShift Cloud Server**的情况下，您只能绑定到端口 8080。因此，无法运行多个 WebSocket 服务。在这种情况下，**Francium DiffSocket**很有用。

您可以使用名为**[Francium DiffSocket](https://github.com/subins2000/Francium-DiffSocket)****的PHP 库**在同一端口上运行不同的服务。

设置 Francium DiffSocket 后，您可以这样做以使用不同的服务：

```
var chatWS = new WebSocket("ws://ws.example.com:8000/?service=chat");
var gameWS = new WebSocket("ws://ws.example.com:8000/?service=game"); 
```

一个示例是通过单个端口运行的这些服务：

*   [寻找 Pi 的价值](http://demos.subinsb.com/pi/)
*   [使用 PHP、jQuery 和 WebSocket 的高级实时群聊](http://demos.subinsb.com/php/advanced-chat-websocket/)
*   [使用 PHP、jQuery 和 WebSocket 进行实时群聊](http://demos.subinsb.com/php/websocketChat)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-31T08:04:55.937

除了 HTTP 请求头之外，两个请求都是相同的。他们在同一个端口上访问同一个应用程序服务器。由服务器端应用程序根据发起连接的 HTTP 请求对每个连接进行不同的处理。

我已经在节点中完成了这个。你可以手动完成，但是像这样的包

*   [espress-ws](https://www.npmjs.com/package/express-ws)
*   或[express-ws-routes](https://www.npmjs.com/package/express-ws-routes)

简化了过程。

# javascript - 如何组织每个视图的 javascript 代码？

> ID：12498430
> 
> 赞同：1
> 
> 时间：2012-09-19T15:55:33.040
> 
> 标签：javascript, asp.net-web-api

我正在开发一个使用 mvc 4 api 结合 vanilla mvc 4 进行路由和视图的项目。因为我们使用的是 web api\json，所以所有的数据调用都是客户端驱动的，所以我们创建了很多 javascript 代码。

为了解决这个问题，我们决定创建一个全局原型 javascript 对象来处理共享的内容，并为每个视图包含一个 javascript 文件来处理该特定视图的所有客户端代码。（我知道这不是最佳的）

我的问题是每个视图的 javascript 文件。我们应该为每个视图创建一个原型对象，还是使用闭包？

如果没有每个视图的对象，我们会看到一个趋势，我们通常会得到一个 $(document).ready、像 $(document).on('click', ...、视图模型和一堆旧的事件连接学校功能。似乎应该有一种方法可以将这些区域组织成更好的东西。我已经看到了一些关于如何这样做的建议，但它们没有显示如何合并 jQuery 加载、事件连接**和**查看模型。有没有人有任何建议，或者可能是一个简单的例子？

以下是我们通常会遇到的区域

```
$(document).ready(function () {....

$(document).on('click', '.button', function(e) {.....

function FooBar(){..... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T02:13:52.820

我认为如何最好地做到这一点没有任何硬性规定 - 有很多方法可以给这只猫剥皮。

但这是我所做的：我倾向于为页面创建一个（或多个，如果需要）闭包对象。它将有一个包含 $().ready() 处理程序的初始化方法，该处理程序然后执行所有事件处理程序连接，以及需要发生的任何其他页面全局初始化。

像这样的东西：

```
(function() {
    function Page() {
        var me = this;            

        // plain properties
        this.prop = "value";

        // compiled templates
        this.template = HandleBars.compile($("#template1").html());

        this.intialize =  function () {
            $().ready(function () {                    
                $("#button1").click( me.button1Click );
                $("#field1").change( me.field1Change );
            });
        };
        this.button1Click = function () {
            alert("click");
            me.doSomething();
        };
        this.field1Change = function () {
            alert("change");
        },
        this.doSomething = function (parm) {
            alert("doSomething");
        }
    }        
    var page = new Page();
    page.intialize();
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T03:54:36.753

您应该为每个视图使用一个视图模型，并使用[KnockoutJs](http://knockoutjs.com)或任何其他类似的 javascript 库将其绑定到您的视图（html），它提供了类似的内容（取自第一个示例）：

视图（html）：

```
​&lt;html>
    <body>
        <p>First name: <input data-bind="value: firstName" /></p>
        <p>Last name: <input data-bind="value: lastName" /></p>
        <h2>Hello, <span data-bind="text: fullName"> </span>!</h2>       
    </body>
</html>​​​​​​​​​​​​​​ 
```

视图模型（javascript）：

```
var ViewModel = function(first, last) {
    this.firstName = ko.observable(first);
    this.lastName = ko.observable(last);

    this.fullName = ko.computed(function() {
        return this.firstName() + " " + this.lastName();
    }, this);
}; 
```

从服务器获取数据，并填充视图模型（和视图，因此）

```
$.get('/info/path/', function(data) {
    ko.applyBindings(new ViewModel(data.Planet, data.Earth));    
}); 
```

当然，如果你的最后一部分不在页面的末尾，你可以把它放在一个 document.ready 中，或者任何类似的方法。

# r - 如何转置矩阵

> ID：12498432
> 
> 赞同：-2
> 
> 时间：2012-09-19T15:55:38.420
> 
> 标签：r

我有一个格式如下的矩阵：

```
row.names GSM362168       GSM362170         GSM362171   GSM362175     GSM362177
133        5.053517        5.391068         5.363335    5.349085       5.682385 
135        6.575044        6.571494         6.282546    6.514062       9.751356 
141        5.874980        5.586731         5.558642    5.718945       5.522853 
```

我希望它采用以下格式：

```
row.names    133       135         141
GSM362168 5.053517  6.575044    5.874980
GSM362170 5.391068  6.571494    5.586371
GSM362171 5.363335  6.282546    5.558642
GSM362175 5.349085  6.514062    5.718945
GSM362177 5.682385  9.751436    5.522853 
```

我尝试使用以下命令但没有用

```
do.call(rbind, unstack(covcontrol)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:57:46.977

你只需要转置你的矩阵：

```
R> matrix(1:9, 3)
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
R> (d = t(matrix(1:9, 3)))
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    4    5    6
[3,]    7    8    9 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T15:58:13.967

只是转置怎么样？

```
t(convcontrol) 
```

# java - Swing 和 unicode 字符

> ID：12498433
> 
> 赞同：0
> 
> 时间：2012-09-19T15:55:39.243
> 
> 标签：java, swing

我在将字符声门停止输入 JTable 时遇到问题，只有 0241 和 0242（十六进制：拉丁大写字母声门停止，拉丁小写字母声门停止）是在 unicode 版本 5.0 中添加的。使用 Windows XP，我可以在 Firefox 中键入这些字符，但不能在 JTable 或记事本中（我尝试使用与 firefox 应该使用的字体相同的字体）。

它虽然在linux中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:15:45.660

Windows XP 似乎不支持[Unicode 5.0](http://blogs.msdn.com/b/drintl/archive/2005/06/01/unicodequestion.aspx)。此外，这取决于安装，尝试安装对亚洲语言的支持，这会添加字体和其他东西。

# mysql - 你能用一个查询制作多级数组吗？

> ID：12498435
> 
> 赞同：1
> 
> 时间：2012-09-19T15:55:47.977
> 
> 标签：mysql, performance, multi-level

是否可以使用 mysql 查询创建多级数组？例如，如果我想为每个产品获取 4 张图片？

```
[1] => Array( 'name' => 'Product 1', 'picture' => array('picture1','picture2','picture3','picture4') )
[2] => Array( 'name' => 'Product 2', 'picture' => array('picture5','picture6','picture7','picture8') ) 
```

还是我需要做一个 foreach 来遍历产品，然后在 foreach 中做一个 mysql 查询来获取每个产品的图片？

编辑：

我的结构是：

```
P_Attributes
--------
id, int(15)
name, varchar(256)

P_AttributeValues
--------
id, int(15)
value, varchar(256)
attribute_id, int(15) [NOTE: This is connected to P_Attributes.id] 
```

然后我想将所有 P_AttributeValues 获取到 P_Attribute 行 - 并在一个查询中获取它。那可能吗？

编辑2：

通过接受的答案作者提出的查询，我使它与这个 PHP 代码一起工作：

```
$attributevalues = $auctionClass->get_rows($id);

$attr_val = array();
foreach($attributevalues as $k => $v){
    $attr_val[$v->AID]['attr_name'] = $v->AName;
    $attr_val[$v->AID]['parameters'][] = array('attr_value_name' => $v->name, 'id' => $v->id);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:03:33.513

这是一篇关于执行此类查询的好文章：

[http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)

您也许可以调整他们的示例以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:58:48.903

根据您的表结构，您可以提取包含您要查找的所有内容的行，然后对从该行创建数组进行编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:27:09.260

如果您只是使用普通的 JOIN 查询并对其进行排序，则可以从记录中获取行，这些行可以形成必要的层次结构。

```
SELECT pa.id AS product_id, pa.name , pav.id AS product_attr_id, pav.value
FROM P_Attributes pa JOIN P_AttributeValues pav ON pav.attribute_id = pa.id
ORDER BY pa.id ASC, pav.id ASC 
```

这将生成如下行：

```
product_id, name, product_attr_id, value
1, "Product 1", 1, "picture1"
1, "Product 1", 2, "picture2"
1, "Product 1", 3, "picture3"
1, "Product 1", 4, "picture4"
2, "Product 2", 5, "picture5"
2, "Product 2", 6, "picture6"
2, "Product 2", 7, "picture7"
2, "Product 2", 8, "picture8" 
```

不知道你使用的是什么 MySQL 扩展，大概是我提到的 PHP，你没有纠正我。如果您获取返回的每条记录的关联数组，每条记录将采用以下形式：

```
array('product_id' => 1, 'name' => "Product 1",
      'product_attr_id' => 1, 'value' => "picture1"); 
```

如果您有一个名为 的主数据数组`$products`，则只需将此代码放入循环中即可生成它，假设记录`$productRec`在此之前被调用并填充到循环中。

```
if (!array_key_exists($productRec['product_id'], $products)) {
    $products[$productRec['product_id']] = array('name' => $productRec['name'],
                                                 'picture' => array());
}

$products[$productRec['product_id']]['picture'][$productRec['product_attr_id']] =
    $productRec['value']; 
```

使用键的 ID 应该没问题，假设它们是没有重复的主键。将有助于以这种方式查找，而不是丢失该数据。

# jquery - 使用 jquery 隐藏 iframe .hide

> ID：12498437
> 
> 赞同：3
> 
> 时间：2012-09-19T15:55:55.513
> 
> 标签：jquery, css

我正在从书签创建 iframe。iframe 有`id='contentIframe'`

我希望能够从内部隐藏 iframe，所以我使用以下 html 和 jquery 代码：

```
<button id="hide">hide</button>

<script type="text/javascript">
$(document).ready(function() {
    $("#hide").click(function() {
        $("#contentIframe").hide();
    });
});
</script> 
```

但是当我单击按钮时，它什么也不做。

此外，当 iframe 加载时，它会从 css 文件加载，因此内部 html 的环绕是一个名为 modal 的类......如果我在 Chrome 中检查这个类并手动设置`display:none;`它会隐藏 iframe，这实际上是一个更好的解决方案几个共振，所以我尝试：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#hide").click(function() {
        $(".modal").hide();
    });
});
</script> 
```

单击按钮时这也没有效果......有什么想法吗？

注意：我只能控制 iframe，而不是外部页面，因为 iframe 用于从用户正在查看的页面中收集数据

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:08:19.333

在你的点击事件中试试这个：

```
$('#contentIframe', window.parent.document).hide(); 
```

像这样：

父网页html：

```
<html>
    <body>
        <iframe id="contentIframe" src="frame.htm"></iframe>
    </body>
</html> 
```

框架.htm:

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery.min.js"></script>
    </head>
    <body style="background-color:red;">
        <button id="hide">hide</button>
        <script type="text/javascript">
            $(document).ready(function() {
                $("#hide").click(function() {
                    $('#contentIframe', window.parent.document).hide();
                });
            });
        </script>
    </body>
</html> 
```

这假设父网页和框架网页都来自同一个域...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:00:58.243

您列出的代码在 iFrame 内运行（我认为）。因此，它无法看到外部页面的 DOM，因此无法看到 contentIFrame 或 .modal

我相信外部页面中的脚本可以引用 iFrame 内的元素，因此您可以尝试将代码移动到外部页面...

# video - C# PowerPoint 使用嵌入式媒体转换文件

> ID：12498439
> 
> 赞同：1
> 
> 时间：2012-09-19T15:55:57.977
> 
> 标签：video, ms-office, powerpoint, office-pia

我需要在我的案例 pptx 2010 中将 powerpoint 文件转换为最新的 powerpoint 版本。所以 ppt 文件 97-2000 或 pptx 2007 应该转换为 pptx 2010。2010 的特殊能力是所有媒体对象（声音/视频）可以包含在内部 zip 文件中，并且不必再位于同一文件夹中。

无论我采用什么 powerpoint 文件，Convert2 方法总是会引发错误。EnsureAllMediaUpgraded 也不起作用。SaveAs 转换文件格式但不嵌入媒体对象。

我知道的唯一方法是删除视频形状并使用添加视频方法，但在这种情况下，所有效果和动画都会丢失......所以这是一种不令人满意的方式。

必须有一种方法可以以编程方式完成我可以在 powerpoint 2010 的 gui 中执行的操作。Backstore > Upgrade

有没有人有解决方案或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T11:18:16.780

尝试使用[http://www.aspose.com/](http://www.aspose.com/) 我认为它可以帮助你。

# ruby - Ruby Net-SFTP 捕获和记录异常

> ID：12498441
> 
> 赞同：1
> 
> 时间：2012-09-19T15:56:01.927
> 
> 标签：ruby, rufus-scheduler, net-sftp

我有一个简单的 SFTP 脚本，我正在测试它以连接到服务器并下载一个或多个文件，文件名中有一个特定的日期。

我每 X 分钟使用 rufus/scheduler 启动脚本的 SFTP 部分，以查看服务器上是否有新文件。

这一切似乎都有效，直到我故意强制出错，例如提供不正确的登录凭据。然后我希望能够捕获确切的错误或异常并使用记录器记录它。我没有收到错误详细信息，或者我没有正确使用救援：

```
scheduler = Rufus::Scheduler::PlainScheduler.start_new(:frequency => 3.0)
log = Logger.new('sftp.log')
log.level = Logger::INFO

begin
log.info 'starting sftp'
  Net::SFTP.start(HOST, ID, :password => PW ) do |sftp|
   sftp.dir.glob("./", "20120820*") do |entry|
     puts entry.name
     file = entry.name
     success = sftp.download!(file, file)
   end
  end   
rescue Exception => e
  puts e.message          # Human readable error
  log.error ("SFTP exception occured: " + e.message)
end
scheduler.join 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T07:09:09.300

Does adding `:verbose => Logger::DEBUG` work ?

```
Net::SFTP.start(HOST, ID, :password => PW, :verbose => Logger::DEBUG ) do |sftp| 
```

# eclipse - 如何在 Eclipse 中获取文件名

> ID：12498442
> 
> 赞同：0
> 
> 时间：2012-09-19T15:56:03.410
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, eclipselink

我正在尝试在 Eclipse 中构建一个弹出菜单。实际上，该插件有一个弹出操作，当您在文件中单击鼠标右键时会显示一个新选项。我需要知道我右键单击的文件名和项目名称。有谁知道该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:01:34.240

```
IStructuredSelection currentSelection = (IStructuredSelection)getContext().getSelection();

if(!currentSelection.isEmpty() && ResourceSelectionUtil.allResourcesAreOfType(currentSelection, IResource.PROJECT | IResource.FOLDER | IResource.FILE)){
    IResource resource = (IResource)currentSelection.getFirstElement();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:23:51.690

首先，让我们为 PackageExplorer View 创建一个弹出菜单。

```
 <plugin>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="TestPopupMenu.commands.category"
            id="TestPopupMenu.commands.sampleCommand"
            name="Sample Command">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="testpopupmenu.handlers.SampleHandler"
            commandId="TestPopupMenu.commands.sampleCommand">
      </handler>
   </extension>

   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="popup:org.eclipse.jdt.ui.PackageExplorer">
            <command
                  commandId="TestPopupMenu.commands.sampleCommand"
                  id="TestPopupMenu.menus.sampleCommand"
                  mnemonic="S">

                    <visibleWhen>
                           <with variable="activeMenuSelection">
                            <iterate
                                 ifEmpty="false">
                             <adapt type="org.eclipse.core.resources.IResource">
                               <test property="org.eclipse.core.resources.name" value="*.*" />
                             </adapt>
                            </iterate>
                           </with>
                    </visibleWhen>
            </command>
      </menuContribution>
   </extension>
</plugin> 
```

然后，将以下代码添加到`execute()`处理程序的方法中，它将在控制台中打印出绝对路径：

```
IWorkbenchWindow window = HandlerUtil.getActiveWorkbenchWindowChecked(event);
//get selection service 
ISelectionService service = window.getSelectionService();
//get selection
IStructuredSelection structured = (IStructuredSelection) service
        .getSelection();
//get selected file
IFile file = (IFile) structured.getFirstElement();
//get the path
IPath path = file.getLocation();

System.out.println(path.toPortableString());
return null; 
```

参考：[在包资源管理器视图中创建弹出菜单](http://www.programcreek.com/2013/02/eclipse-rcp-tutorial-add-a-menu-item-to-the-popup-menu-when-right-click-a-file/ "为 Package Explorer View 创建一个弹出菜单")

# java - 如何从 XML 获取值到 int

> ID：12498443
> 
> 赞同：-1
> 
> 时间：2012-09-19T15:56:13.243
> 
> 标签：java, xml

我是 Java 新手，我有一个问题：

是否有可能在 XML 中存储/设置整数值？我想设置

*   X0 = 123
*   Y0 = 123
*   X1 = 123
*   Y1 = 130

来自下面的 xml 文件

```
<line>
    <point> 
        <X>123</X>
        <Y>123</Y> 
    </point> 
    <point> 
        <X>123</X> 
        <Y>130</Y>
    </point> 
</line> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:58:50.443

我建议为 X/Y创建一个`Point`具有属性和 getter/setter 的类。`X/Y`

使用[SAX 解析器](http://docs.oracle.com/javase/tutorial/jaxp/sax/parsing.html)解析 XML（还有其他技术，如 DOM/Pull 解析器等）并填充 Point 对象并将其添加到 List。

有关更多信息，请参阅此[示例](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:01:19.613

编写一个简单的 SAX 解析器。检查本[教程](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:59:16.190

我建议[解析 XML 代码](http://www.java-samples.com/showtutorial.php?tutorialid=152)。然后使用`Integer.parseInt`将值（如果它以字符串形式出现）强制转换为整数。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T16:00:05.720

如果您有（或编写）您的 XML 的 XSD，您可以只生成 Java 代码来将此 XML 读入对象。

这通常使用 JAXB 完成。如果你用谷歌搜索，你会找到教程。

# php - 我在哪里保存我在 php 中使用的数据？

> ID：12498445
> 
> 赞同：0
> 
> 时间：2012-09-19T15:56:16.067
> 
> 标签：php, save, client

假设用户点击了一个按钮。客户端收到一些我使用的数据。如果用户收到数字 2，下次再次点击时我需要知道是 2。用户看不到这个数字。

我使用隐藏输入以供以后使用
或
cookie/会话
或
其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:58:36.767

会话将起作用：

```
session_start();
$_SESSION['number'] = 2; 
```

*   Cookie 值可供用户使用，因为它们存储在客户端的计算机上。
*   隐藏字段可以通过源查看。
*   会话值存储在服务器上（或数据库中）。客户端应该唯一可用的是会话 ID，它通常存储在 cookie 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:46:09.540

尝试将针对特定用户的数据存储到数据库中，试试 MySQL，它非常容易和快速访问数据库。

# mysql - 使用大量 IN 条目优化查询

> ID：12498447
> 
> 赞同：1
> 
> 时间：2012-09-19T15:56:24.573
> 
> 标签：mysql, mysqli

我有一个非常庞大的查询要优化，它由 1 个表请求和 5 个表左连接组成。此查询需要 0.3428 秒才能完成（结果：总共 4,340，查询需要 0.3428 秒）我正在处理大约 10000 个肯定会增长的条目。

现在它自己的查询不是问题，最大的问题是 IN 语句。

1.  我有 2 个 IN 语句
2.  两者都在 WHERE 语句中
3.  对于这个特定的页面加载，两者都有大量的 ID，3344 个 id 条目示例：(99, 1, 5, 8458, ...)
4.  两个 IN 语句将具有相同的一组 3344 ID 示例： ((cf.catid IN ( 99, 1, 5, 8458, ... ) AND cf.cid=c.id) OR p.category IN ( 99, 1 , 5, 8458, ...))

查询如下所示：

```
SELECT 
    p.id, c.id AS pCid, c.name AS cName, p.name, p.seo, 
    p.description AS pDescription, cd.description,
    p.category, p.archive, cf.catid, cf.pid, p.order_nr, 
    c.order_nr AS cOrder, c.seo AS cSeo, cat.name AS catName, 
    cat.order_id, pr.price, pr.sale_price, pr.sale_expiry,
    IF( pr.sale_price > 0, pr.sale_price, pr.price ) AS `oPrices`,
    pr.member_price, p.`set`, p.get_the_look,
    c.from_text_price, c.thumb, c.code AS colour_code, 
    p.code AS product_code, p.supplier_part_number, 
    p.oem_part_number, p.make, p.model, p.year, p.sub_model
FROM 
    products p
    LEFT JOIN category_featured cf ON p.id=cf.pid
    LEFT JOIN colours c ON c.pid=p.id
    LEFT JOIN colour_descriptions cd ON c.id=cd.colour_id
    LEFT JOIN category cat ON cat.id=p.category
    LEFT JOIN pricing pr ON pr.cid=c.id
WHERE 
    (
        (cf.catid IN ( .. 3344 ID entries .. ) AND cf.cid=c.id) OR p.category IN ( .. 3344 ID entries .. )
    )
    AND p.archive='0'

    AND p.status='1' AND c.status='1' 
    AND c.archive='0'
    AND cat.status IN (1,2)

GROUP BY `c`.`id`
ORDER BY `oPrices` DESC 
```

有没有更好的方法来使用 IN 语句检查表中的特定 ID，或者一起使用不同的检查？

速度是这里的主要问题，我想达到最好的性能。

到目前为止，我做了什么以及如何设置一些设置：

*   我为这些表创建了索引（只有在此查询中使用的 INT（整数）列才有索引）
*   有些表是 MyISAM，有些是 InnoDB（查询中未使用的其他表与查询中的一些表有关系，因此它们必须是 InnoDB）
*   查询中的表之间不存在任何关系
*   运行查询我使用 PHP 和 MySQLI

谢谢

更新！！！！

我注意到为什么查询如此缓慢我创建的新列，使用 IF 语句`oPrices`然后使用“ORDER BY `oPrices`DESC”使查询变慢，一旦我删除它，查询只需要 0.00009 秒，这太棒了！ ！但是现在我不会得到正确排序的数据，即使我用 PHP 进行排序，我也必须创建一个不理想的新分页函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:58:54.613

`IN`可能会使查询非常难以优化，因为**可能**不使用索引（您可以使用 来验证这一点`EXPLAIN`）。另一种方法是将这些 ID 加载到临时表中，然后执行`JOIN`.

从这个链接：

[http://explainextended.com/2009/08/18/passing-parameters-in-mysql-in-list-vs-temporary-table/](http://explainextended.com/2009/08/18/passing-parameters-in-mysql-in-list-vs-temporary-table/)

> 我们看到，对于大型参数列表，将它们传递到临时表中比作为常量列表要快得多，而对于小型列表，性能几乎相同。
> 
> 使用临时表是在 MySQL 中传递大型参数数组的最佳方式。

# spring - 是否可以使用spring重定向url

> ID：12498450
> 
> 赞同：8
> 
> 时间：2012-09-19T15:56:26.457
> 
> 标签：spring, spring-mvc, url-rewriting

我正在使用 spring、MVC 和实现 webapp-runner 进行项目。该项目曾经有一个像 /test/home/index.jsp 这样的层次结构，但使用 webapp-runner 它更改为 /home/index.jsp。所以，我需要的是支持和重定向带有“/test/home/index.jsp”的旧网址到“/home/index.jsp”，这样页面就不会在使用旧网址的情况下停止。如果有人能帮帮我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:07:25.043

```
 return "redirect:/home/index.jsp"; 
```

在返回视图名称的控制器中，或创建具有所需映射的第二个控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:06:17.690

我将通过在 Web 应用服务器中使用 Apache2 将旧流量重定向到新的 URL 结构来解决这个问题。

在服务器中安装它就像运行一样简单

```
apt-get install apache2 
```

我是使用重写还是重定向取决于您是否要维护旧的 URL。
有关更多信息，请参见此处：[http ://httpd.apache.org/docs/2.4/rewrite/remapping.html](http://httpd.apache.org/docs/2.4/rewrite/remapping.html)

# php - Zend 2.0 - 导航渲染子菜单 + 部分

> ID：12498453
> 
> 赞同：1
> 
> 时间：2012-09-19T15:56:43.030
> 
> 标签：php, navigation, zend-framework2, partial, submenu

如何使用 setPartial “->renderSubMenu()”？

```
<?php $this->navigation('Navigation')->menu()->setPartial(array('menu.phtml', 'default')); ?> 
```

当我使用

```
<?php echo $this->navigation('Navigation')->menu(); ?> 
```

在输出中我有所有菜单，但我想获得与'->renderSubMenu()'中相同的菜单输出。

我希望每个人都能理解我的需求。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:48:02.957

```
<?php
     echo $this->navigation('Navigation')
      ->menu()
      ->setPartial(array('menu.phtml', 'default'))
      ->renderSubMenu()
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-12T07:56:39.137

```
<?php
    echo $this->navigation($this->navigation('Navigation')->getChildren())
        ->menu()
        ->setPartial(array('menu.phtml', 'default'));
?> 
```

# android - 有没有办法将项目从使用 API 12 更改为 API 8

> ID：12498458
> 
> 赞同：0
> 
> 时间：2012-09-19T15:56:51.807
> 
> 标签：android

我将我的项目设置为使用 Android 3.2（API 级别 12），但似乎很多手机仍在使用 Android 2.2（API 级别 8）。

有没有办法将我的项目从仅支持 Android 3.2+ 更改为支持回 Android 2.2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:59:19.607

是的...只需更改清单中的 minsdk 编号。您必须确保您不使用任何不受支持的功能...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T16:06:01.097

在你`AndroidManifest.xml`添加这一行：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16" /> 
```

`android:minSdkVersion`告诉商店您的目标最低版本是什么。在这种情况下 2.2。低于 2.2 的设备将无法下载您的应用。

`android:targetSdkVersion`告诉商店您正在开发的最佳版本是什么。在这种情况下 4.1。4.1 以上的设备仍然可以下载您的应用，但某些功能可能会在兼容模式下运行。

注意：当您将项目设置为使用 3.2 时，您所做的只是选择您希望 IDE 在检查和编译代码时使用的 Android SDK。如果清单中没有该`uses-sdk`行，您将没有任何目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:32:40.253

1.  右键单击项目 -> 属性 -> Android -> 选择 SDK 版本
2.  更新清单，最小/目标 api。（正如其他人所描述的那样）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:59:46.887

转到您的 Manifest.xml 文件并将 minSdkVersion 编辑为 4。这会将其设置回 1.5 或类似的东西:)。如果你想适应更高的 API，你可以让这个数字更高，但我喜欢兼容性。

# reporting-services - SSRS 的图表问题

> ID：12498459
> 
> 赞同：2
> 
> 时间：2012-09-19T15:57:02.027
> 
> 标签：reporting-services, charts, reporting, percentage, stacked-area-chart

我在获取堆叠面积图以在 SSRS 2005 中显示正确数据时遇到问题。

在我的 Y 轴上，我想要一个从 50% 到 100% 的比例。在我的 X 轴上，我有一组日期，格式为报告所必需的样式（因此为 varchar）。我的数据由 3 个数据字段组成，它们是十进制数字，包含在 0 和 1 之间，每个字段都有一个特定的日期。

我的问题是 Y 轴的比例。我将最大值设置为 100，最小值设置为 50，间隔设置为 5，百分比格式设置为“p”。

在布局选项卡的预览中，这一切看起来都很好（Y 轴从 50% 到 100%）。但是，每当我生成实际报告时，由于某种原因，它会从 5000% 变为 10000%。我不知道这是怎么发生的，它完全破坏了报告。

我已经尝试在属性上修修补补几个小时，但无济于事。

如果这发生在任何人身上并且他们已经找到了解决方案，或者如果有人有任何建议，我将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:03:27.100

当您使用百分比时，所有因素都会乘以 100。

如果要格式化并将值显示为 50% ，则需要 0.5 未格式化。因此，百分比是介于 0 和 1 之间的值。Excel 和几乎所有其他工具都以这种方式工作。

如果您的值已经全部存储为百分比，那么您可能只想在值的末尾附加 % 符号。或者更好的是，将所有内容除以 100。50% 意味着无论如何；这意味着百分之五十（分意味着 100）所以 50/100 是另一种写 50% 的方式。

# php - 仅使用 PHP 完成与 AJAX 相同的操作

> ID：12498461
> 
> 赞同：0
> 
> 时间：2012-09-19T15:57:06.090
> 
> 标签：php, ajax, http-post

我希望能够在 PHP 中使用 AJAX 完成与我在 JS 中所做的相同的事情。这可能吗？

例如，考虑以下代码：

```
$.ajax({
        async: false,
        url: "/path/to/script/script.php",
        type: "post",
        data: {
            'arg1':'arg_val',
            'oper':'get_data',
            'arg2':'arg_val_2',
            'id_number':'223'
        },
        dataType: 'json',
        success: function(data){
            est_data = data[0];
        },
        error: function(jqXHR, textStatus, errorThrown){
            return jqXHR['responseText'];
        }
    }); 
```

在 PHP 中我想做同样的事情：将一些 post 变量传递给`script.php`并让它返回字符串响应，这是我在`success`上面代码中的函数中得到的。

我做了一些研究，我认为我应该能够使用[http_post_fields](http://php.net/manual/en/function.http-post-fields.php)来做到这一点，但我得到了这个回应：

> HTTP/1.1 200 OK 日期：2012 年 9 月 19 日星期三 15:42:01 GMT 服务器：Apache/2.2.20 (Ubuntu) X- Powered-By：PHP/5.3.6-13ubuntu3.9 设置 Cookie：53f143479d91e79747661fcf2777a0fa=5kidtm7rcdn24o33amljgg9 ; 路径=/ 变化：接受编码内容长度：15 内容类型：文本/html 未授权。

有人知道怎么做吗？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:58:48.840

我认为 curl 在这种情况下将是你最好的朋友。您可以使用它进行 POST 请求并发送数据，模拟正在提交的表单。

看看[这篇文章](http://davidwalsh.name/curl-post)。

```
$url = 'http://example.com/request.php';
$fields = array(
            'username' => urlencode($last_name),
            'password' => urlencode($first_name),
        );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:02:00.600

是的，您需要在[stream_context_create()](http://php.net/stream_context_create)的帮助下使用[file_get_contents(](http://php.net/file_get_contents) ) 。您也可以使用[curl](http://php.net/curl)。

以下是使用 file_get_contents 的示例：

```
$options = array(
  'http'=>array(
    'method'=>"POST",
    'header'=>
      "Accept-language: en\r\n".
      "Content-type: application/x-www-form-urlencoded\r\n",
    'content'=>http_build_query(
        array(
            'arg1'=>'arg_val',
            'oper'=>'get_data',
            'arg2'=>'arg_val_2',
            'id_number'=>'223'
        ),'','&'
    )
));
$context = stream_context_create($options);
$refno = file_get_contents('/path/to/script/script.php',false,$context);
$refno = json_decode($refno, true);
var_dump($refno); // juse use $refno as an array. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:58:54.707

你当然可以这样做。您需要做的就是使用 PHP 库（例如 curl）向脚本发送 POST。AJAX 在这方面没有什么特别之处，它只是用 Javascript 编写的。归根结底，它只是一个 HTTP 响应/请求。

# c# - 使用反射创建 Windows 窗体控件

> ID：12498467
> 
> 赞同：1
> 
> 时间：2012-09-19T15:57:25.737
> 
> 标签：c#, .net, winforms, reflection

我有一个 Windows 窗体应用程序，它基于字符串创建控件。

```
Type t = Type.GetType("System.Windows.Forms.TextBox, System.Windows.Forms"); 
```

但我得到 t 为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:59:18.553

您可以使用此代码 - 基于`Activator.CreateInstance`方法

```
var textBoxType = typeof(Control).Assembly.GetType("System.Windows.Forms.TextBox", true);
var textBox = Activator.CreateInstance(textBoxType); 
```

链接： http: [//msdn.microsoft.com/fr-fr/library/system.activator.createinstance (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.activator.createinstance(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:04:43.823

您可以指定程序集的全名（因为这个在[GAC](http://en.wikipedia.org/wiki/Global_Assembly_Cache)中），如下所示（即使在框架 4 中它也会取回好的程序集）：

```
Type.GetType("System.Windows.Forms.TextBox, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"); 
```

# jquery - Twitter Bootstrap Collapse 插件方向——水平而不是垂直

> ID：12498476
> 
> 赞同：38
> 
> 时间：2012-09-19T15:58:04.040
> 
> 标签：jquery, twitter-bootstrap, jquery-plugins, bootstrap-4

有没有办法从水平而不是垂直折叠 Bootstrap Collapse 插件？查看代码似乎没有内置这种能力，但我希望我只是错过了一些东西......

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-25T23:14:52.463

我想出了如何在不修改或添加任何 javascript 的情况下非常轻松地做到这一点。

首先，在所有 Twitter Bootstrap CSS 之后定义以下 CSS：

```
.collapse {
  height: auto;
  width: auto;
}

.collapse.height {
  position: relative;
  height: 0;
  overflow: hidden;
  -webkit-transition: height 0.35s ease;
  -moz-transition: height 0.35s ease;
  -o-transition: height 0.35s ease;
  transition: height 0.35s ease;
}

.collapse.width {
  position: relative;
  width: 0;
  overflow: hidden;
  -webkit-transition: width 0.35s ease;
  -moz-transition: width 0.35s ease;
  -o-transition: width 0.35s ease;
  transition: width 0.35s ease;
}

.collapse.in.width {
  width: auto;
}

.collapse.in.height {
  height: auto;
} 
```

接下来，在目标元素（您定义`.collapse`类的位置）上，您需要添加类`.width`或`.height`取决于您想要动画的属性。

最后，您**必须**包装目标元素的内容，并在为宽度设置动画时显式定义其宽度。如果为高度设置动画，则不需要这样做。

您可以在这里找到一个工作示例 -> [http://jsfiddle.net/ud3323/ZBAHS/](http://jsfiddle.net/ud3323/ZBAHS/)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-09-03T22:52:47.727

使用 bootstrap 3.0.0，您只需将宽度类添加到目标元素，然后添加以下 css（如果您希望它具有动画效果）。

```
.collapse.width {
    height: auto;
    -webkit-transition: width 0.35s ease;
    -moz-transition: width 0.35s ease;
    -o-transition: width 0.35s ease;
    transition: width 0.35s ease;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-05-19T12:26:17.260

***2019 年更新***

**引导程序 4.x**

Bootstrap 4 的水平折叠过渡基本相同，预计可见类现在`.show`是`.in`. 指定 display:block 也可能会有所帮助，因为现在许多元素都是 display: flex。

```
.collapse.show {
  visibility: visible;
} 
```

[4.x 水平折叠演示](http://codeply.com/go/UiteY92ke8/bootstrap-4-horizontal-collapse)
[4.x 侧边栏演示](https://www.codeply.com/go/8ESO56VMns)

另请参阅：
[Bootstrap 水平菜单折叠到侧边菜单](https://stackoverflow.com/questions/49527465/bootstrap-horizontal-menu-collapse-to-sidemenu/49535297#49535297)
[如何从左侧滑动导航栏而不是从顶部滑动？](https://stackoverflow.com/questions/31641352/bootstrap-how-to-slide-nav-bar-from-left-instead-from-top/55260765#55260765)

* * *

**Bootstrap 3.3.7**（原始答案）

现有的答案都不适合我。要在最新版本中使折叠动画水平，您需要将过渡设置为宽度，并使用**可见性**。

```
.collapse {
  visibility: hidden;
}
.collapse.in {
  visibility: visible;
}
.collapsing {
  position: relative;
  height: 0;
  overflow: hidden;
  -webkit-transition-property: height, visibility;
  transition-property: height, visibility;
  -webkit-transition-duration: 0.35s;
  transition-duration: 0.35s;
  -webkit-transition-timing-function: ease;
  transition-timing-function: ease;
}
.collapsing.width {
  -webkit-transition-property: width, visibility;
  transition-property: width, visibility;
  width: 0;
  height: auto;
} 
```

[3.x 演示](http://codeply.com/go/8I0FglhMdP/bootstrap-horizontal-collapse)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-03-18T05:11:51.170

在我的 bootstrap 3 版本（使用 LESS）中，我只需将其包含在我的全局 less 文件中：

```
.collapsing.width  { 
    width: 0;
    height: auto;
    .transition(width 0.35s ease);
} 
```

额外的类*必须*是`width`因为 collapse.js 会寻找这个类来进行转换。我尝试了其他人的建议，但它们对我不起作用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-19T16:39:30.110

它似乎不是该特定插件的选项。看起来您可能需要修改它或以某种方式挂钩它以使其以这种方式工作......

看了一会儿 JS 文件后，我注意到了几件事。首先是它看起来可能正在使用**bootstrap-transition.js**，它似乎正在使用 CSS3 过渡。所以有可能写一个新的过渡。我不是 100% 确定它是否是这样工作的。

**选项一**

我的建议是在 bootstrap-collapse.js 插件文件中浏览一段时间，看看你是否能弄清楚它是如何工作的。

特别是我会看看这部分...... **bootstrap-carousel.js**

```
this.$element[dimension](0)
this.transition('addClass', $.Event('show'), 'shown')
$.support.transition && this.$element[dimension](this.$element[0][scroll]) 
```

看起来像是`.transition`来自**bootstrap-transition.js的回调**

**选项二**

我的第二个建议是写一些你自己的东西。

**我的答案**

最后我的回答是，从查看引导文档来看，它似乎不是一个选项。

**一些附加信息：**

这个网站似乎在用 CSS3 过渡做类似的事情。 [http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-16T12:19:26.013

我认为 translateX(-100%) 和 translateX(0) 可能是要走的路，而不是动画宽度，因为在支持时正确使用硬件加速

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-23T16:42:12.733

这里的答案很好，但我必须进行一些修改以获得更清晰的双向转换：

```
.collapse.width, .collapsing {
    height: 25px; /* depending on your element height */
    overflow: hidden;
    -webkit-transition: width 0.25s ease;
    -moz-transition: width 0.25s ease;
    -o-transition: width 0.25s ease;
    transition: width 0.25s ease;
} 
```

设置固定高度也有助于防止页面在元素折叠和展开时“跳转”。

# solr - 拼写检查 w SolrNet 400 使用冒号的错误请求：在拼写检查查询中

> ID：12498480
> 
> 赞同：0
> 
> 时间：2012-09-19T15:58:17.237
> 
> 标签：solr, solrnet

我正在使用 SolrNet，当我传递一个包含冒号的查询时，我收到此错误：

```
Apache Tomcat/6.0.32 - Error report
The request sent by the client was syntactically incorrect (null). 
```

代码示例如下所示：

```
var results = SolrOps.Query(request.Query, new QueryOptions
            {
                SpellCheck = new SolrNet.Commands.Parameters.SpellCheckingParameters
                {
                    Collate = true,
                    Build = true,
                    Query = "test:"

                }

            }); 
```

我是否需要手动剥离冒号，或者是否可以设置一些选项（在 SOLR 或 SOLRNet 中）来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:25:38.773

我认为拼写检查不支持特殊字符，您需要在通过 SolrNet 向 Solr 提交请求之前从查询词中过滤/去除这些字符。

# c# - 休眠的保存难度

> ID：12498482
> 
> 赞同：0
> 
> 时间：2012-09-19T15:58:19.880
> 
> 标签：c#, asp.net, .net, nhibernate, razor

我有这个代码，我有这个问题

*   我正在尝试将新用户保存到我的网站：查询成功但没有插入
*   即“User”表和“UserAcl”表仍然没有任何修改，并且很明显查询已执行 File User.cs：

文件 Compte.cs

```
public bool SaveUser(string identification, string acc, string mot, string notify, string nom, string phone, string mail) {
               try
               {
                   if (identification == null || acc == null || nom == null || mail == null  || mot == null) return false;
                   ITransaction transaction = User.OpenSession().BeginTransaction();
                   User u = new User() { Account = acc, Identification = identification, ContactEmail = mail, ContactName = nom, ContactPhone = phone, NotifyEmail = notify, Password = mot };
                   User.OpenSession().SaveOrUpdate(u);
                   transaction.Commit();
                  ITransaction transaction2 = User.OpenSession().BeginTransaction();
                   Useracl ua = new Useracl { Account = acc, UserID = identification, AccessLevel = 1, AclID = (Useracl.GetUseracl().Count + 1).ToString() };
                   Useracl.OpenSession().SaveOrUpdate(ua);
                   transaction2.Commit();
                   return true;
               }
               catch { return false; }

           } 
```

文件管理.cs

```
 public ActionResult Index()
       {

           ViewBag.Title = c.GetUserID().Count.ToString();
            return View();
        }
        public ActionResult BeforeRegister()
        {

            return View();
        }
        public ActionResult AfterRegister(string Pseudo, string Phone, string Email, string Password, string Notify)
        {

            bool a = c.SaveUser((c.GetPassword().Count + 1).ToString(), (c.GetPassword().Count + 1).ToString(), Password, Notify, Pseudo, Phone, Email);
            if (a)
            {
                return RedirectToAction("Index", "Administration");
            }
            else

                return RedirectToAction("BeforeRegister", "Administration");

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:17:31.073

首先，您可以使用`if (!String.IsNullOrEmpty(myString))`而不是`if (myString==null)`. 此外，您可能希望在一个`using`块内使用您的会话。

```
bool ret= new bool();
if ((!String.IsNullOrEmpty(foo1)) && (!String.IsNullOrEmpty(foo2)))
{
//ConnectionDB is a public class, with a static method ISessionFactory SessionFactory(), and the method OpenSession() returns an ISession 
 using (NHibernate.ISession nhSession = ConnectionDB.SessionFactory.OpenSession())
 {
 try
 {
  User u = new User();
  //set your User
  nhSession.Transaction.Begin();
  nhSession.Save(u);
  nhSession.Transaction.Commit();
  nhSession.Close();

  ret = true;
 }
 catch (Exception ex)
 {
 ret = false;
 }
}
return ret; 
```

现在，关于未插入的查询，它可能是一个映射问题，或者您可能正在其他地方抑制异常（例如您的静态方法`User.OpenSession().SaveOrUpdate(u)`）

# c++ - 在这种无竞争的情况下，为什么原子比锁慢得多？

> ID：12498483
> 
> 赞同：2
> 
> 时间：2012-09-19T15:58:19.953
> 
> 标签：c++, performance, concurrency, locking, atomic

我使用原子而不是锁编写了一些东西，并且在我的情况下它的速度如此之慢而感到困惑，我编写了以下迷你测试：

```
#include <pthread.h>
#include <vector>

struct test
{
    test(size_t size) : index_(0), size_(size), vec2_(size)
        {
            vec_.reserve(size_);
            pthread_mutexattr_init(&attrs_);
            pthread_mutexattr_setpshared(&attrs_, PTHREAD_PROCESS_PRIVATE);
            pthread_mutexattr_settype(&attrs_, PTHREAD_MUTEX_ADAPTIVE_NP);

            pthread_mutex_init(&lock_, &attrs_);
        }

    void lockedPush(int i);
    void atomicPush(int* i);

    size_t              index_;
    size_t              size_;
    std::vector<int>    vec_;
    std::vector<int>    vec2_;
    pthread_mutexattr_t attrs_;
    pthread_mutex_t     lock_;
};

void test::lockedPush(int i)
{
    pthread_mutex_lock(&lock_);
    vec_.push_back(i);
    pthread_mutex_unlock(&lock_);
}

void test::atomicPush(int* i)
{
    int ii       = (int) (i - &vec2_.front());
    size_t index = __sync_fetch_and_add(&index_, 1);
    vec2_[index & (size_ - 1)] = ii;
}

int main(int argc, char** argv)
{
    const size_t N = 1048576;
    test t(N);

//     for (int i = 0; i < N; ++i)
//         t.lockedPush(i);

    for (int i = 0; i < N; ++i)
        t.atomicPush(&i);
} 
```

如果我取消注释 atomicPush 操作并运行测试，`time(1)`我会得到如下输出：

```
real    0m0.027s
user    0m0.022s
sys     0m0.005s 
```

如果我运行循环调用原子的东西（看似不必要的操作在那里，因为我希望我的函数看起来尽可能像我更大的代码一样）我得到这样的输出：

```
real    0m0.046s
user    0m0.043s
sys     0m0.003s 
```

我不确定为什么会发生这种情况，因为在这种情况下我预计原子会比锁更快......

当我使用 -O3 编译时，我看到锁和原子更新如下：

```
lock:
    real    0m0.024s
    user    0m0.022s
    sys     0m0.001s

atomic:    
    real    0m0.013s
    user    0m0.011s
    sys     0m0.002s 
```

在我较大的应用程序中，尽管锁的性能（单线程测试）仍然做得更好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T16:03:52.057

非竞争互斥锁的锁定和解锁速度非常快。使用原子变量，您*总是*要付出一定的内存同步代价（特别是因为您甚至没有使用宽松的排序）。

您的测试用例太天真而无用。您必须测试一个竞争激烈的数据访问场景。

一般来说，原子操作*很*慢（它们妨碍了巧妙的内部重新排序、流水线和缓存），但它们允许无锁代码，确保整个程序可以取得*一些*进展。相比之下，如果你在持有锁时被换出，*每个人*都必须等待。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:08:57.663

只是添加到第一个答案中，当您执行 a 时，`__sync_fetch_and_add`您实际上会强制执行特定的代码排序。从[文档](http://pic.dhe.ibm.com/infocenter/comphelp/v121v141/index.jsp?topic=/com.ibm.xlc121.aix.doc/compiler_ref/bif_gcc_atomic_fetch_add.html)

> 调用此函数时会创建完整的内存屏障

[记忆障碍](http://en.wikipedia.org/wiki/Memory_barrier)是什么时候

> 中央处理单元 (CPU) 或编译器，用于对屏障指令之前和之后发出的内存操作强制执行排序约束

即使您的工作是原子的，您也有可能通过强制指令排序而失去编译器优化。

# java - 同步可能是一个注释吗？

> ID：12498487
> 
> 赞同：4
> 
> 时间：2012-09-19T15:58:28.677
> 
> 标签：java

如果我们有注释而不是`synchronized`关键字，那会很糟糕吗？`@Synchronized`在这种情况下，注释会更自然吗（因为您可以`synchronized`使用非同步方法覆盖方法 - 因此`synchronized`对方法本身只字未提，而是在方法之外指定了一些东西（该方法以某种方式受到保护） ，所以它不是真正的关键字？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:00:57.243

同步用于代码块，您不能向代码块添加注释。

您可以拥有`@synchronized`方法甚至类，但在首次引入 Java 时，Java 不支持注解。

我认为它足够重要，值得拥有自己的关键字。;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T16:02:46.210

这会很酷，但注解不能完全替代`synchronized`关键字：有些同步块不能用注解标记。

此外，同步块接受用于同步的监视器。它可以动态提供，这给了我们一定的灵活性。注释不允许这样做，因为必须在编译时提供所有参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T16:11:54.007

同步转换实际上直接在字节码级别上直接转换为 monitorenter/monitorexit。并且您指定要同步的内容，您不能使用注释来做到这一点：

```
synchronized (myLock) {
} 
```

因此，它是一个关键字对我来说是完全合理的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T16:01:52.397

可能作为同步的方法版本，是的。但是同步的其他用途允许您指定您正在同步的监视器。

```
public void someMethod()
{
  synchronized(this)
  {
    //sync code
  }
  //unsynced code.
} 
```

# android - 使用修改后的 Galaxy Tab 内核时出现 Wifi 错误

> ID：12498495
> 
> 赞同：0
> 
> 时间：2012-09-19T15:58:46.397
> 
> 标签：android, linux-kernel, galaxy-tab, rooted-device

我知道 xda-developers 论坛可能是提出此类问题的理想场所，但我没有机会在那里或通过广泛的网络搜索找到答案。

**预备知识：**我正在研究Android内核。所以我在 Galaxy Tab 10 wifi 上安装了一个 rooted rom，并使用修改后的三星内核源代码来实现我对内核的修改。我成功安装并测试了内核，但是...

**问题**：标签可以正常工作。唯一的问题是“wifi 错误”；它无法与无线网卡通信。肯定是驱动问题。我没有触及内核中有关无线通信的任何部分。

**我的想法**：我想我只需要安装 wifi 设备驱动程序。我的问题是找不到驱动程序。我应该在哪里寻找它？它会成为构建内核的一部分吗？

非常感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:18:27.377

您为已安装的内核使用了错误的 WiFi 内核模块。

如果您从源代码构建内核，那么您也应该能够构建内核模块并将它们安装到 ROM 中。

这些模块必须由相同的系统和来自相同的源代码树构建，否则内核将不会加载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:23:48.610

好的。经过大量搜索，我找到了它！我希望这些事情可以更好地记录下来。我必须在我的 update.zip 文件中包含内置的 Wi-Fi 驱动程序模块并应用更新并最终重新启动。驱动程序建立在

```
drivers/net/wireless/bcm4330/dhd.ko 
```

现在它工作正常。

# mysql - 如何从 2 个相同的表中识别不具有相同值的列

> ID：12498501
> 
> 赞同：0
> 
> 时间：2012-09-19T15:58:51.007
> 
> 标签：mysql, sql, database

我有一个审核申请人的系统，所以首先管理员需要验证所有申请人信息，然后才能将他们列为已接受的申请人，但问题是每次用户修改他/她的任何信息时，用户都必须重新申请他的/她的申请，所以管理员需要重新验证申请人信息，但我想突出显示那些修改过的字段，这样管理员就不需要查看所有信息。在谷歌上花了一些时间后，我想到了这个想法，我创建了一个触发器，将修改前表 1 中的记录插入到表 2 中。所以现在我只想选择已由用户，但我不知道，我找不到可以执行上述功能的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:02:47.610

希望你有一个主键。在此示例中，我使用了“电子邮件”并且仅检查两列中的更改：

```
SELECT *
from table1 t1
JOIN table2 t2 on t1.email = t2.email
WHERE (t1.fname != t2.fname)
OR (t1.lname != t2.lname) 
```

# c++ - 有没有办法使用 WINAPI 或 Embarcadero C++ Builder XE 创建共享目录/文件夹？

> ID：12498507
> 
> 赞同：1
> 
> 时间：2012-09-19T15:59:03.117
> 
> 标签：c++, winapi, c++builder-xe

> **可能重复：**
> [Windows 文件夹共享 API](https://stackoverflow.com/questions/1011520/windows-folder-share-api)

我需要我的 C++ 应用程序偶尔创建共享目录。我正在使用 Embarcadero C++ Builder XE，它只有`CreateDir()`无法指定共享访问的功能。Embarcadero C++ Builder 环境中是否有任何东西可以让我简单地做到这一点，或者如果失败了，有没有一种简单的方法可以直接使用 Windows API 做到这一点？我已经查看了 msdn 页面，寻找可以让我执行此操作的内容，但我还没有找到任何以清晰方式记录的内容。

**编辑**特别是该文件夹及其内容需要网络上的所有其他机器都可以访问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T17:15:47.710

要通过网络共享目录，您需要首先创建目录，然后告诉您的计算机通过网络共享它。创建目录本身与创建任何其他目录相同（即 CreateDir 应该可以正常工作）。

从那里，您需要共享目录。你用[`NetShareAdd`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb525384.aspx). 这是一段（非常简单但经过测试的）示例代码：

```
#include <windows.h>
#include <lm.h>

int main() { 

    SHARE_INFO_2 info = {0};

    info.shi2_netname = L"test_share";
    info.shi2_type = STYPE_DISKTREE;
    info.shi2_permissions = ACCESS_ALL;
    info.shi2_max_uses = -1;
    info.shi2_path = L"C:\\local\\path";

    NetShareAdd(NULL, 2, (BYTE *)&info, NULL);

    return 0;
} 
```

# android - 是否可以用我自己的 ContentProvider Android 的默认值替换？

> ID：12498508
> 
> 赞同：0
> 
> 时间：2012-09-19T15:59:05.183
> 
> 标签：android, sms, android-contentprovider, android-contentresolver

我正在考虑`ContentProvider`用我自己的短信替换 Android 的默认短信的可能性。

我说的是那些被调用的：

```
context.getContentResolver().query(Uri.parse("content://sms/"),....); 
```

我敢问：这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:01:40.497

不，这是 SMS 消息应用程序**和**Android 的电话层在内部使用的。

替换任何内置的内容提供程序保证会破坏 Android - 这是给定的！

**但是**您可以做的是创建您自己的内容提供程序并制作您的应用程序以使用您自己的。

如果您正在谈论监视短信内容提供者，您可以做的是使用 ContentObserver 来监视短信内容提供者并将对短信内容提供者所做的更改转发给您自己。

这是这种情况的一个示例，每次进行更改时，`onChange`都会触发它，它就在其中，中继到您自己的自定义内容提供商就足够了。

```
private class MySMSContentObserver extends ContentObserver{
    public MySMSContentObserver() {
        super();
    }

    @Override
    public boolean deliverSelfNotifications() { 
        return true; 
    }

    @Override
    public void onChange(boolean selfChange) {
        super.onChange(selfChange);
        // This is where the change notifications gets received!
    }
}

// For example
MySMSContentObserver contentSMSObserver = new MySMSContentObserver();
//
context.getContentResolver().registerContentObserver (
        "content://sms", 
        true, 
        contentSMSObserver); 
```

另外，不要忘记在应用程序完成时取消注册内容观察者，即：

```
context.getContentResolver().unregisterContentObserver(contentSMSObserver); 
```

# android - 自定义 Android AutoCompleteTextView 验证器

> ID：12498512
> 
> 赞同：1
> 
> 时间：2012-09-19T15:59:16.300
> 
> 标签：android, autocompletetextview

我正在努力在我的 Android 应用程序中实现自定义验证器。我想在列表视图中显示一些从服务器检索到的建议（这些建议可以正常工作），即使这些建议不是以我的 AutoCompleteTextView 中文本的相同字母开头。

所以，即如果我写“n”，我想得到服务器响应，即“r”。因此，我尝试实现一个验证器来设置`isValid`控制服务器响应是否为空的示例。

我在这里展示我的代码：

```
autoCompleteTextView.setAdapter(adapter);
autoCompleteTextView.setValidator(new Validator());
autoCompleteTextView.performValidation(); 
```

这里是验证器类：

类验证器实现 AutoCompleteTextView.Validator {

```
public boolean isValid(CharSequence text) {
    Log.v("Test", "Checking if valid: ");
    int i = 0;

    if (!MainActivity.interventos.isEmpty()) {
                return true;

    }

    return false;
}

public CharSequence fixText(CharSequence arg0) {
    // TODO Auto-generated method stub
    return null;
} 
```

isValid() 总是返回 False，但它应该返回 True，因为 MainActivity.interventos 不为空。

Ps：如果服务器以与 AutocompleteTextView 中相同的字母开头的单词响应，则整个方法效果很好。

建议？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:35:58.603

我有一个类似的问题，我使用带有 ViewHolder 的 CustomArrayAdapter 解决了一个过滤器以从服务器获取数据。因此，您可以在自动完成列表中显示您需要的数据。所以验证器没有用，你也不需要它。享受并让我跟上！

# jquery - 跨浏览器 HTML5 存储库

> ID：12498523
> 
> 赞同：6
> 
> 时间：2012-09-19T15:59:42.040
> 
> 标签：jquery, html, local-storage, web-sql, indexeddb

当互联网不可用时，我有一个要求应该在本地存储。它应该以跨浏览器兼容的方式处理它。现在，据我所知，有多种选项可以在本地存储数据（indexedDB、WebSQL、localStorage）。我真正想要的只是一个统一的 API。我不想为多个存储引擎检测和编写代码。

我真正关心的是提供一个密钥，并提供数据，它应该在浏览器会话/崩溃中保持不变。

经过大量谷歌搜索后，我真正遇到的唯一库是 persisJS：

[http://pablotron.org/?cid=1557](http://pablotron.org/?cid=1557)

但它大约有 4 1/2 岁。还有什么比这更好或更可靠和更新的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:01:39.813

# 如果您希望始终能够存储

请参阅[http://www.jstorage.info/](http://www.jstorage.info/)，特别是浏览器支持部分

# 如果浏览器不支持就允许不缓存

见locache：[https ://github.com/d0ugal/locache](https://github.com/d0ugal/locache)

对你来说重要的一点是优雅地降级并使用其他方法来存储信息。它也非常易于使用且相当轻巧！

> JavaScript 框架，用于在浏览器中使用具有过期值的 DOM 存储进行客户端缓存。受 memcache 启发的 API 使用非常简单。Locache 没有依赖项，而且非常小。
> 
> 当浏览器不支持 localStorage 时，locache 会优雅地降级。通常这将是 IE6 或 IE7，您不会收到任何错误，但缓存尝试将被静默丢弃，并且查找将始终显示为缓存未命中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:35:54.467

你应该试试[草坪椅](http://brian.io/lawnchair/)。

另外，请注意，并非所有存储引擎都是一样的。如果您想存储大量数据并异步访问（不阻塞 UI），那么您将受限于 IndexedDB 和 WebSQL，并非所有浏览器都支持它们。[这为您提供了对 IndexedDB 的更多跨浏览器支持](https://hacks.mozilla.org/2012/07/using-indexeddb-api-today-the-indexeddb-polyfills/)，但 IE 仍将被排除在外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T05:59:45.247

你有没有查看我自己的图书馆[YDN-DB](https://github.com/yathit/ydn-db)

它在性能和鲁棒性方面为 IndexedDB API 精心设计，但很好地回退到 WebSQL 和 localStorage。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T16:34:24.900

试用[SequelSphere](http://www.sequelsphere.com/)

它是一个 100% 的 HTML5/JavaScript 关系数据库，可以跨浏览器工作，并使用本地存储来保存数据。您也可以使用 SQL 来查询它。它是自己的数据库引擎，不依赖于内置的关系数据库。因此，它将适用于所有浏览器。

# iphone - 以编程方式编辑 iOS 联系人

> ID：12498526
> 
> 赞同：2
> 
> 时间：2012-09-19T15:59:54.177
> 
> 标签：iphone, objective-c, ios, cordova, contacts

我想编辑联系人中的所有电话号码，但我想以编程方式进行。我正在阅读有关[phonegap](http://phonegap.com/)和 Objective-C 的信息，但我没有找到明确的方法来做到这一点。请有人告诉我我该怎么做，或者有人给我看一个教程。

PD：我还需要知道实现这一目标的最佳方法是什么。Phonegap 还是 Objective-C？还是有替代方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:45:51.120

您可以使用 ABAddresBook 框架通过代码进行编辑， [http://developer.apple.com/library/ios/#DOCUMENTATION/AddressBookUI/Reference/AddressBookUI_Framework/_index.html#//apple_ref/doc/uid/TP40007082](http://developer.apple.com/library/ios/#DOCUMENTATION/AddressBookUI/Reference/AddressBookUI_Framework/_index.html#//apple_ref/doc/uid/TP40007082)

和示例代码：http: [//developer.apple.com/library/ios/#samplecode/QuickContacts/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/QuickContacts/Introduction/Intro.html)

# html - 使用带有数据表服务器端的 IE9 缺少结果

> ID：12498530
> 
> 赞同：1
> 
> 时间：2012-09-19T16:00:03.807
> 
> 标签：html, internet-explorer-9, datatables

好的，这很奇怪，我不知道如何解决它。我是 LogZilla（一个系统日志管理/报告工具）的创建者。我的一位用户指出了一个只存在于 IE9 中的错误。IE 8 及以下版本从未正常工作，所以我可以忍受。但是IE9应该可以工作。FWIW，我正在运行 IE10，它可以工作。但如果我把它放在 IE9 模式下，它不会。

如果您访问我的[演示服务器](http://demo.logzilla.net)并进行搜索（登录后只需单击页面底部的搜索按钮），您可以看到使用 Chrome 和 FF 和 IE10 正确呈现数据，但如果您使用 IE9 则显示没有要显示的数据。

我还注意到，如果您使用 GET 而不是 POST 它可以正常工作。搜索后的结果页面右上角有一个小磁盘图标 - 如果单击该图标，您可以获得完整的 URL 以粘贴为 GET。

我想知道问题是否是导致我[这样](http://www.datatables.net/forums/discussion/700/server-side-processing-hangs-at-loading-data-from-server/p1)[做](https://stackoverflow.com/questions/7146268/json-stringify-and-json-parse-not-working-in-ie9)的问题，但是我尝试在标题中加载 json2.js 并且它没有解决任何问题（也许我做错了？）

编辑：我也虽然 Modernizr 可能会有所帮助，但我不知道如何实现它，而且[下载页面](http://modernizr.com/download/)非常混乱 - 我需要哪些选项？

编辑：根据@thatidiotguy 的评论，我检查了我的来源，它实际上使用的是 GET，而不是 POST。所以现在我更加困惑为什么在点击主页上的按钮时粘贴网址不起作用？

# ruby - 如何使用 Ruby 提示输入 sudo 密码？

> ID：12498536
> 
> 赞同：8
> 
> 时间：2012-09-19T16:00:22.310
> 
> 标签：ruby, linux, command-line

我经常发现自己需要编写脚本，这些脚本必须以普通用户的身份执行某些部分，而以超级用户的身份执行其他部分。我知道关于 SO 的一个类似问题，答案是两次运行相同的脚本并将其作为 sudo 执行，但这对我来说还不够。有时我需要在 sudo 操作后恢复为普通用户。

我在 Ruby 中编写了以下内容来执行此操作

```
#!/usr/bin/ruby
require 'rubygems'
require 'highline/import'
require 'pty'
require 'expect'

def sudorun(command, password)
  `sudo -k`
  PTY.spawn("sleep 1; sudo -u root #{command} 2>&1") { | stdin, stdout, pid |
  begin
    stdin.expect(/password/) {
    stdout.write("#{password}\n")
    puts stdin.read.lstrip
                              }
  rescue Errno::EIO
  end
 }
end 
```

不幸的是，如果用户输入错误的密码，使用该代码脚本会崩溃。理想情况下，它应该让用户 3 次尝试正确获取 sudo 密码。我该如何解决？

我在 Linux Ubuntu BTW 上运行它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T18:04:16.523

在我看来，运行一个在内部使用 sudo 执行操作的脚本是错误的。更好的方法是让用户使用 sudo 运行整个脚本，并让脚本派生出特权较低的孩子来做一些事情：

```
# Drops privileges to that of the specified user
def drop_priv user
  Process.initgroups(user.username, user.gid)
  Process::Sys.setegid(user.gid)
  Process::Sys.setgid(user.gid)
  Process::Sys.setuid(user.uid)
end

# Execute the provided block in a child process as the specified user
# The parent blocks until the child finishes.
def do_as_user user
  unless pid = fork
    drop_priv(user)
    yield if block_given?
    exit! 0 # prevent remainder of script from running in the child process
  end
  puts "Child running as PID #{pid} with reduced privs"
  Process.wait(pid)
end

at_exit { puts 'Script finished.' }

User = Struct.new(:username, :uid, :gid)
user = User.new('nobody', 65534, 65534)

do_as_user(user) do
  sleep 1 # do something more useful here
  exit! 2 # optionally provide an exit code
end

puts "Child exited with status #{$?.exitstatus}"
puts 'Running stuff as root'
sleep 1

do_as_user(user) do
  puts 'Doing stuff as a user'
  sleep 1
end 
```

此示例脚本有两个辅助方法。#drop_priv 接受一个定义了用户名、uid 和 gid 的对象，并*适当地*减少执行进程的权限。#do_as_user 方法在屈服于提供的块之前在子进程中调用 #drop_priv。注意#exit 的使用！防止孩子在块之外运行脚本的任何部分，同时避免 at_exit 钩子。

经常被忽视的安全问题需要考虑：

*   打开文件描述符的继承
*   环境变量过滤
*   在 chroot 中运行孩子？

根据脚本正在执行的操作，可能需要解决其中的任何问题。#drop_priv 是处理所有这些问题的理想场所。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T08:15:39.003

如果可能的话，您可以将要以 root 身份执行的内容移动到单独的文件中，并使用该[`system()`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)函数将其作为 sudo 运行，包括 sudo 提示符等：

```
system("sudo ruby stufftorunasroot.rb") 
```

该`system()`功能是阻塞的，因此您的程序流程不需要更改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-30T07:36:42.383

我不知道这是否是您想要或需要的，但您是否尝试过`sudo -A`（搜索`SUDO_ASKPASS`可能具有*/usr/lib/openssh/gnome-ssh-askpass*或类似值的 Web 或手册页）？当我需要在 GUI 环境中向用户呈现图形密码对话框时，我会使用它。

抱歉，如果这是错误的答案，也许您真的想留在控制台上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T13:43:41.690

```
#!/usr/bin/ruby
# ... blabla, other code
# part which requires sudo:
system "sudo -p 'sudo password: ' #{command}"
# other stuff
# sudo again
system "sudo -p 'sudo password: ' #{command}"
# usually sudo 'remembers' that you just authenticated yourself successfuly and doesn't ask for the PW again...
# some more code... 
```

# eclipse - eclipse中的评论生成？

> ID：12498548
> 
> 赞同：0
> 
> 时间：2012-09-19T16:01:03.340
> 
> 标签：eclipse

有没有一种不用输入 /** 就可以为整个班级生成评论模板的方法？我在类中有 50 个方法，为每个方法键入 /** 并指定参数变得乏味。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:06:24.320

JAutodoc 可以这样做：http: [//jautodoc.sourceforge.net/](http://jautodoc.sourceforge.net/)

# c# - 在 eventArgs 中发送两个字符串的语法

> ID：12498551
> 
> 赞同：5
> 
> 时间：2012-09-19T16:01:16.347
> 
> 标签：c#, event-handling

在下面的代码中，我需要知道在引发事件时传递两个字符串的语法。

```
 [PublishEvent("Click")]
 public event EventHandler<EventArgs<string>> MyEvent; 
```

谢谢，撒克逊人。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-19T16:03:40.033

最干净的方法是创建自己的类，该类派生自`EventArgs`：

```
 public class MyEventArgs : EventArgs
    {
        private readonly string _myFirstString;
        private readonly string _mySecondString;

        public MyEventArgs(string myFirstString, string mySecondString)
        {
            _myFirstString = myFirstString;
            _mySecondString = mySecondString;
        }

        public string MyFirstString
        {
            get { return _myFirstString; }
        }

        public string MySecondString
        {
            get { return _mySecondString; }
        }
    } 
```

并像这样使用它：

```
public event EventHandler<MyEventArgs> MyEvent; 
```

要引发事件，您可以执行以下操作：

```
 protected virtual void OnMyEvent(string myFirstString, string mySecondString)
    {
        EventHandler<MyEventArgs> handler = MyEvent;
        if (handler != null)
            handler(this, new MyEventArgs(myFirstString, mySecondString));
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T16:04:29.943

为 EventArgs 创建你的类并扩展，并通过它

```
public class YourCustomeEvent : EventArgs
{
   public string yourVariable {get; }
} 
```

现在你必须像这样提供你的自定义类

```
 public event EventHandler<YourCustomeEvent> MyEvent; 
```

# java - 是否有适用于 Android 的可靠 Art-Net 库（DMX over IP）？

> ID：12498552
> 
> 赞同：2
> 
> 时间：2012-09-19T16:01:16.793
> 
> 标签：java, android, dmx512

我试图找出最好的，如果有任何可用于控制使用 ArtNet 协议的 Android 启用 ArtNet 的舞台照明设备。

我遇到了[artnet4j](http://code.google.com/p/artnet4j/)，但我不确定以前是否有人将它用于相同的目的。请让我知道是否有任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T06:23:04.753

我必须使用 Android 的库是[artnet4j](http://code.google.com/p/artnet4j/)。它是一个基于 java 的库，可以完成它应该做的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-28T08:55:36.733

对于 2018 年及以后的人：

[artnet4j](http://code.google.com/p/artnet4j/)的初始版本有很多错误和未实现的方法，不会修复，因为该项目不再处于开发状态。我正在开发一个解决所有这些问题的项目（基于原始的 artnet4j 代码）。目前支持的是：

*   将服务器绑定到自定义网络接口
*   重用套接字地址
*   增加了接收 OpDmx 包的能力
*   通过 UDP 广播发送和接收。
*   支持 Art-Ext 包。

[https://github.com/cansik/artnet4j](https://github.com/cansik/artnet4j)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-05-07T12:37:19.380

我建议您使用出色的程序照明控制台精简版或专业版 [https://play.google.com/store/apps/details?id=lightingconsolepro.lightingsoftware&feature=search_result#?t=W251bGwsMSwyLDEsImxpZ2h0aW5nY29uc29sZXByby5saWdodGluZ3NvZnR3YXJlIl0](https://play.google.com/store/apps/details?id=lightingconsolepro.lightingsoftware&feature=search_result#?t=W251bGwsMSwyLDEsImxpZ2h0aW5nY29uc29sZXByby5saWdodGluZ3NvZnR3YXJlIl0)。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-05-29T17:26:35.083

试试[Lighting Console Lite](https://play.google.com/store/apps/details?id=artnetconsole.artnet&hl=en)或 Pro。

根据文档，它允许您通过 ARTNET 发送 DMX

# c++ - CreateFileMapping 和 OpenFileMapping 在不同的进程中不合作

> ID：12498553
> 
> 赞同：2
> 
> 时间：2012-09-19T16:01:18.130
> 
> 标签：c++, winapi, shared-memory

我正在尝试使用 CreateFileMapping 和 OpenFileMapping 在进程之间共享内存。这不像我想要的那样工作 - OpenFileMapping 返回 null 并且 GetLastError 是 5 - 访问被拒绝。任何想法我做错了什么？名称类似于 MemoryTest。

编辑：

两次使用 CreateFileMapping 我都可以读取在另一个进程中写入的数据。这是一个问题的原因是我收到错误 183 - 内存区域已经存在。但是，它仍会返回现有内存的句柄。

```
var map_handle = CreateFileMapping(INVALID_HANDLE_VALUE, NULL, PAGE_READWRITE, 0, sizeof(int), name.c_str());

....

var handle = MapViewOfFile(map_handle, FILE_MAP_ALL_ACCESS , 0, 0, 0)

*handle = 10;

UnMapViewOfFile(map_handle);

getchar(); 
```

其他流程：

```
var map_handle = OpenFileMapping(PAGE_READWRITE, false, name.c_str())

....

var handle = MapViewOfFile(map_handle, FILE_MAP_ALL_ACCESS , 0, 0, 0) //returns null

var out = *handle;

getchar(); 
```

这适用于第二个过程：

```
var map_handle = CreateFileMapping(INVALID_HANDLE_VALUE, NULL, PAGE_READWRITE, 0, sizeof(int), name.c_str());

....

var handle = MapViewOfFile(map_handle, FILE_MAP_ALL_ACCESS , 0, 0, 0) //returns null

var out = *handle;

getchar(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T16:36:58.783

从一开始就需要注意的简单事项：

*   错误代码 5：`ERROR_ACCESS_DENIED`“访问被拒绝。”
*   错误代码 183：`ERROR_ALREADY_EXISTS`“当该文件已存在时无法创建该文件。”

`ERROR_ALREADY_EXISTS`是[记录在案的行为](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366537%28v=vs.85%29.aspx)，表明您确实收到了句柄，但它是已经存在的对象的句柄，而不是创建的。

不工作的问题`OpenFileMapping`在于它的第一个参数：API 函数需要来自另一个枚举的值/标志，它需要`FILE_MAP_*`值而不是`PAGE_*`. 不正确的参数会导致无法打开您想要的映射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-03T09:44:46.540

如果其他人需要，在我的情况下，错误与对文件的访问无关，它与提供给 CreateFileMapping 的大小有关，在花费数小时出现类似错误之后，我将使用发布在其他地方的工作示例和逐行比较有什么不同。

如果在执行 CreateFileMapping 时不知道文件的大小需要使用 0，这将告诉 API 使用映射文件的文件大小。SO中的大多数答案都是错误的，人们并没有费心测试问题是什么，我浪费了数小时阅读其他类似建议的帖子。

为了解决这个问题，代码应该是这样的：

```
var map_handle = CreateFileMapping(INVALID_HANDLE_VALUE, NULL, PAGE_READWRITE, 0, 0, name.c_str()); 
```

希望这可以为其他开发人员节省时间。

# php - php file_exists 不适用于数组

> ID：12498555
> 
> 赞同：0
> 
> 时间：2012-09-19T16:01:19.093
> 
> 标签：php

我早些时候发布了这个问题，但我现在使用了反馈并简化了 php 程序以显示它仍然失败的原因。使用带有数组的 file_exists 总是失败：这是我写的一个简单的程序，它显示了失败：

```
[root@dsmpp1 steve]# ls -l data
 total 4 -rw-r--r-- 1 root root 0 Sep 19 11:41 test_file 
[root@dsmpp1 steve]# cat test_file.php
`#!/usr/bin/php -q 
    <?php 
    $i=1; 
    $testarray=array(); 
    $testarray[$i]="test_file"; 
    echo "testarray $testarray[$i]\n";
     **if(file_exists("/home/steve/data/testarray[$i]")) {**
    echo "file exists\n"; } 
    else { echo "file does not exist\n"; } `    
[root@dsmpp1 steve]# php -q test_file.php 
testarray test_file 
file does not exist 
[root@dsmpp1 steve]# 
```

如前所述，我在目录和文件名周围使用了双引号，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:02:38.597

不应该是：

```
$testarray[$i]="test_file.php"; 
```

代替：

```
$testarray[$i]="test_file"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:03:29.973

尝试

```
if(file_exists("/home/steve/data/{$testarray[$i]}")) {** 
```

您在 testarray 之前缺少 $

您可能还需要将其括在括号中，因为您使用的是两个变量。所以使用 {$testarray[$i]}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:03:40.797

您`$`在 if 子句中缺少一个 before 测试数组。尝试这个：

```
if(file_exists("/home/steve/data/".$testarray[$i])) { 
```

# magento - Magento 1.7 按多个类别过滤产品

> ID：12498556
> 
> 赞同：1
> 
> 时间：2012-09-19T16:01:31.870
> 
> 标签：magento, magento-1.7

我正在寻找一种方法来过滤当前类别和可选子类别在类别页面上返回的产品。到目前为止，我看到的每个解决方案都是“展示属于 a 类或 b 类的产品”。

我需要编辑哪个文件以通过作为查询参数（例如`?catfilter=32`）传递的附加可选类别 ID 过滤产品集合？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T21:07:41.810

看这里：http: [//vibrantdrive.com/how-to-filter-magento-products-using-2-or-more-category-filters/](http://vibrantdrive.com/how-to-filter-magento-products-using-2-or-more-category-filters/)

获得第 4 类和第 5 类的产品

```
$_productCollection = Mage::getModel('catalog/product')
 ->getCollection()
 ->joinField('category_id', 'catalog/category_product', 'category_id', 'product_id = entity_id', null, 'left')
 ->addAttributeToSelect('*')
 ->addAttributeToFilter('category_id', array(
     array('finset' => '4'),
     array('finset' => '5'))
 )
 ->addAttributeToSort('created_at', 'desc'); 
```

获得第 4 类或第 5 类的产品

```
$_productCollection = Mage::getModel('catalog/product')
 ->getCollection()
 ->joinField('category_id', 'catalog/category_product', 'category_id', 'product_id = entity_id', null, 'left')
 ->addAttributeToSelect('*')
 ->addAttributeToFilter('category_id', array(
     array('finset' => array('4', '5')),
 )
 ->addAttributeToSort('created_at', 'desc'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T02:54:21.903

关于/magento/lib/Varien/Data/Collection.php:373中已存在具有相同ID“30674”的错误项目（Mage_Catalog_Model_Product），我找到了解决方案：

```
$conditions = array();
foreach ($categoryIds as $categoryId) {
    if (is_numeric($categoryId)) {
        $conditions[] = "{{table}}.category_id = $categoryId";
    }
}
$collection->distinct(true)
    ->joinField('category_id', 'catalog/category_product', /* 'category_id' */null, 
         'product_id = entity_id', implode(" OR ", $conditions), 'inner'); 
```

1.  设置不同
2.  不要在 select 子句中包含 category_id 字段

# c++ - 绘制垂直于给定线的线

> ID：12498558
> 
> 赞同：2
> 
> 时间：2012-09-19T16:01:39.280
> 
> 标签：c++, visual-c++, mfc

我有一条线的起点和终点坐标。我想在这结束时画另一条线，这样它们就会相互垂直。

我正在尝试使用普通几何来做到这一点。MFC 中是否有相同的高级 API。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T16:06:42.183

如果 (dx,dy) 是给定直线的 x 和 y 坐标的差异，则可以通过将其坐标差异设为 (-dy, dx) 来使另一条直线垂直。您可以按任何因子（-c*dy、c*dx）对其进行缩放以更改其长度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T20:11:07.950

您有一条现有的线 (x1, y1) 到 (x2, y2)。垂直线是 (a1, b1) 到 (a2, b2)，并以 (x2, y2) 为中心。

```
xdif = x2 - x1
ydif = y2 - y1
a1 = x2 - ydif / 2
b1 = y2 + xdif / 2
a2 = x2 + ydif / 2
b2 = y2 - xdif / 2 
```

我认为这行得通……我测试了几行。

因此，如果您有一条从 (1,1) 到 (5,3) 的线，则垂直线将是 (5 - 2/2, 3+4/2) 到 (5 + 2/2, 3 - 4/ 2) 或 (4,5) 至 (6, 1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:08:49.047

您可以使用Win32 GDI API 中的[SetWorldTransform](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145104%28v=vs.85%29.aspx)函数。

示例代码在[这里](http://www.codeproject.com/Articles/1889/Using-SetWorldTransform-to-rotate-basic-shapes-by)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-06T09:53:19.560

让我添加一些基于 kbelder 答案的 c++ 代码。它通过原点 (x1,y1) 和另一个顶点 (x2,y2) 创建一个顶点

[![在此处输入图像描述](../Images/5a2f68e131d8336f6f139e0e26318fc0.png)](https://i.stack.imgur.com/N4v9q.png)

```
float GetDistance(float x1, float y1, float x2, float y2)
{
 float cx = x2 - x1;
 float cy = y2 - y1;
 float flen = sqrtf((float)(cx*cx + cy*cy));
 return flen;
}

void GetAxePoint(double x1, double y1, double x2, double y2, double& x3, double& y3, double vec_len, bool second_is_y)
{
 double xdif = x2 - x1;
 double ydif = y2 - y1;

 if(second_is_y)
 {
  x3 = x1 - ydif;
  y3 = y1 + xdif;
 }
 else
 {
  x3 = x1 + ydif;
  y3 = y1 - xdif;
 }

 double vec3_len = GetDistance(x3, y3, x1, y1);

 x3 = (x3-x1)/vec3_len;
 y3 = (y3-y1)/vec3_len;

 x3 = x1 + x3*vec_len;
 y3 = y1 + y3*vec_len;
} 
```

# .net - 使用新的 async/await 异步使用 Linq to Sql

> ID：12498564
> 
> 赞同：8
> 
> 时间：2012-09-19T16:02:15.740
> 
> 标签：.net, linq-to-sql, .net-4.5, async-await

[与此](https://stackoverflow.com/questions/252355/how-to-write-asynchronous-linq-query)方法相比，将 L2S 与新的 C# 5`async/await`关键字一起使用的最佳实践是什么？在网上找不到任何东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T17:48:48.590

EF 5 没有 async/await 支持，但开源版本正在积极探索这里的可能性。编辑：EF 中的异步支持记录在[http://msdn.microsoft.com/en-us/data/jj819165.aspx](http://msdn.microsoft.com/en-us/data/jj819165.aspx)。它不会将结果流式传输，因为它们是水合的（正如您在 RX 中会发现的那样），但它确实使数据库调用异步。

至于 LINQ to SQL，除了将您的请求包装在 Task.Factory.Start 操作中之外，我不会屏住呼吸，希望 Microsoft 为 Linq to SQL 实现基于任务的异步（异步/等待所需）。

如果绝对必要，您可以使用[IQToolkit并扩展它，添加您自己的异步支持。](http://iqtoolkit.codeplex.com/)此外，Mono 已经实现了 LINQ to SQL，您可以使用异步支持对其进行扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-14T05:07:21.637

Scott Hanselman 有一篇[有趣的文章](http://www.hanselman.com/blog/TheWeeklySourceCode51AsynchronousDatabaseAccessAndLINQToSQLFun.aspx)，他在其中演示了如何在现有的 Linq to SQL 查询之上生成异步 API。我没有时间玩这个想法，但我猜测可以创建一个更通用的扩展方法，它允许将相同的技术扩展到任何 IQueryable 或 IEnumerable 类型的对象。

这是直接来自他的帖子的代码，可用作参考。

```
SqlCommand _beginFindCmd = null;

public IAsyncResult BeginFind(int id, AsyncCallback callback, Object asyncState)
{
    var query = from w in _db.Widgets
                where w.Id == id
                select w;
    _beginFindCmd = _db.GetCommand(query) as SqlCommand;
    _db.Connection.Open();
    return _beginFindCmd.BeginExecuteReader(callback, asyncState, System.Data.CommandBehavior.CloseConnection);
}

public Widget EndFind(IAsyncResult result)
{
    var rdr = _beginFindCmd.EndExecuteReader(result);
    var widget = (from w in _db.Translate<Widget>(rdr)
                  select w).SingleOrDefault();
    rdr.Close();
    return widget;
} 
```

只需做一些工作，就可以使这个 TPL 变得更简洁，并且作为一个单一的异步方法。如果我有机会这样做，我会发布我的想法。

# c# - C# Winforms Designer 调用基本属性而不是“新”属性？

> ID：12498565
> 
> 赞同：2
> 
> 时间：2012-09-19T16:02:16.763
> 
> 标签：c#, winforms, overriding, windows-forms-designer

我有一个类继承自另一个类，该类具有非虚拟属性（“控件”）。

由于我无法覆盖此属性，因此我使用与我的属性关联的“新”关键字。

在运行时，在正确的上下文中按我的意愿调用此属性。

当我从设计器打开我的表单时，设计器调用 base.Controls 而不是我的“新”控件。

我是否遗漏了什么，或者这只是 winforms 设计器中的不正确行为？

编辑，添加有问题的代码以获得更多解释。我有以下课程：

```
public partial class BauerGroupBox : ComponentFactory.Krypton.Toolkit.KryptonGroupBox
   {
      public BauerGroupBox()
         : base()
      {
      }
      public new Control.ControlCollection Controls
      {
         get
         {
            MessageBox.Show("GOT THERE");
            return this.Panel.Controls;
         }
      }
   } 
```

当我在我的 intializecomponent 中获得以下代码时：

```
BauerGroupBox thisBox = new BauerGroupBox()
thisBox.Controls.Add(something) 
```

当我在我的代码中添加一个新的“BauerGroupBox”时，它工作正常。但是，当我在设计器中打开我的代码时（即使在使用调试 devenv 时），消息框也不会显示，并且断点也不会命中。

当我运行我的应用程序时，断点被击中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:07:05.177

你错过了一些东西 - 你所描述的是正确的行为。

解决方法是`Controls`在调用`InitializeComponent()`. 像这样：

```
public MyForm()  {
    InitializeComponent();
    this.Controls.AddRange( base.Controls );
} 
```

但是，您为什么要尝试“覆盖”该`Controls`属性？你追求什么新的、非标准的行为？我相信有更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:34:50.473

我想我理解你的情况，所以让我解释一下设计师在做什么：

首先，在运行时，您实际上是在运行`BauerGroupBox`控件的一个实例。（也就是说，您也很可能`Controls`通过此派生类型的引用访问该属性，即`BauerGroupBox`，并且正如@Mystere Man 正确论证的那样，该成员`BauerGroupBox.Controls`隐藏了继承的成员（无论它最后定义的位置） - 它没有覆盖它。

有问题的问题是，在设计时，**在控件的设计**器中`BauerGroupBox`，您不是**“运行”**的实例`BauerGroupBox`，而是`designing`基于原型`ComponentFactory.Krypton.Toolkit.KryptonGroupBox`，这实际上是您正在“运行”的控件的类型.

我再说一遍， 的设计者`BauerGroupBox`没有`BauerGroupBox`运行的实例，而是`ComponentFactory.Krypton.Toolkit.KryptonGroupBox`. 设计师中不`BauerGroupBox`存在，因为，嗯..你正在设计它！

现在，为了增加一点混乱（真的没有，如果你想一想，这一切都很简单，）你会看到，如果你去任何其他控件的任何其他设计者，说一个表单，然后你拖放一个你的实例`BauerGroupBox`，然后添加一些控件，你就会得到你的消息框，是的，在这种情况下，就像在“运行时”的情况下一样，这意味着你正在有效地托管一个`BauerGroupBox`......但是在这种情况下，你不是在设计`BauerGroupBox`。

正如其他@Dai 提到的那样，如果您要阻止人们向其添加控件，那么您应该遵循其他设计计划：例如，覆盖

```
protected virtual Control.ControlCollection CreateControlsInstance(); 
```

方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T16:17:30.840

您误解了新关键字的工作原理。New 不会覆盖该属性，它会隐藏它。如果您引用该对象作为它的基本元素，它仍将调用基本属性，而不是您的新属性。使用新的唯一方法是将其引用为新的。IE。

```
public class A {
    public A1 {get;set;}
}

public class B : A {
    public new A1 {get;set;}
}

B b = new B();
A a = b;

a.A1; // references A.A1
b.A1; // references B.A1 
```

# database - Django 在模板中读取模型数据

> ID：12498567
> 
> 赞同：2
> 
> 时间：2012-09-19T16:02:30.133
> 
> 标签：database, django, templates

我是 django 新手，无法从模板中的模型读取数据。

这是模型。

```
class Team(models.Model):
team_name = models.CharField(max_length=30, default="Team")
created = models.DateTimeField(auto_now_add=True)

def __unicode__(self):
    return self.team_name 
```

风景。

```
def create_team(request):
team = Team.objects.all()
return render_to_response("ideas/profile.html", {'team':team}) 
```

和模板。

```
<h2>Available groups: {{team.team_name}} </h2> 
```

可能性这是一个明显的修复：99%。无论如何，谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:17:47.170

`team`不是一个对象，它是一个查询集——简单地说，一个对象*列表*。即使表中只有一个对象，它也只是一个列表。因此，您不能只引用它上的模型属性，就好像它是模型的实例一样——您必须先将实例拉出：

```
{% for t in team %}
    {{ t.team_name }}
{% endfor %} 
```

一些笔记。正如循环所示，命名它`team`没有意义。这意味着一件事，现在我们要遍历一个实体？这里的最佳实践是将单个项目命名为单数，将查询集、列表等命名为复数。然后我们会这样做*更有*`for team in teams`意义。

 *其次，不要在属性名称中使用模型名称。`team.team_name`是多余的，什么时候`team.name`也可以。如果还有*另一个*“名称”属性，则为其添加前缀，但模型本身应优先于顶级属性名称。*

# ms-access - 交叉表查询：使用固定值创建附加列

> ID：12498570
> 
> 赞同：1
> 
> 时间：2012-09-19T16:02:41.017
> 
> 标签：ms-access, ms-access-2010

有没有人阅读过关于使用 TRANSFORM 语句创建交叉表查询的 MSDN 页面？

[http://msdn.microsoft.com/en-us/library/office/bb208956(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb208956(v=office.12).aspx)

它包括以下断言，代码示例不支持：

> 您还可以包含不存在数据的固定值以创建其他列。

是的，我想从预先存在的列表中创建一个带有一组固定有序列标题的数据**透视表。**这是一个简化的 SQL 查询：

```
    将 SUM(tblData.Losses) 转换为 TotalLosses
    选择 tblData.LossType
    来自 tblData
    按 tblData.Region 分组
    PIVOT tblData. 年；
```

我想添加不在表中的区域名称，并且我希望这些区域以特定顺序出现。是的，我可以创建一个区域列表表并将其左连接：但这也不会强加任意顺序 - 交叉表查询始终按字母顺序从左到右对列进行排序。

而且我可能只想添加不存在数据的任意固定值。

这是 MSDN 的信息：

> 句法
> 
> TRANSFORM *aggfunction*     *selectstatement*     PIVOT *pivotfield* [IN ( *value1* [, *value2* [, ...]])]
> 
> TRANSFORM 语句包含以下部分：
> 
> *   *aggfunction*：对选定数据进行操作的 SQL 聚合函数。
> *   *selectstatement*：一个 SELECT 语句。
> *   *pivotfield*：要用于在查询结果集中创建列标题的字段或表达式。
> *   *value1* , *value2*：用于创建列标题的固定值。

...剩下的只是从教科书数据创建一个普通的数据透视表。

所以，我的问题是：

## 有没有人真正使用过固定值来创建列标题？

您的 SQL 示例会很有用。

* * *

这是关于 Microsoft Access SQL 的已发布语法的问题。

感谢您没有问我为什么要这样做，而是给出了回答问题的冗长 SQL 示例“*是否有 ANSI SQL 可以通过硬编码所有内容来完成 TRANSFORM 语句的功能*？” 或指出这在大型机上的 Postgres 中会更容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-05T18:23:21.187

是的，我能够在 Access 中使用一组固定的四个值来执行此操作。

```
TRANSFORM Sum([Shape_Length]/5280) AS MILES
SELECT "ONSHORE" AS Type, Sum(qry_CurYrTrans.Miles) AS [Total Of Miles]
FROM qry_CurYrTrans
GROUP BY "ONSHORE"
PIVOT qry_CurYrTrans.QComb IN ('1_HCA_PT','2_HCA_PT','3_HCA_PT','4_HCA_PT'); 
```

我的结果是：

```
| Type     | Total Of Miles  | 1_HCA_PT  | 2_HCA_PT  | 3_HCA_PT  | 4_HCA_PT |
| ONSHORE  | 31.38           |           | 0.30      | 7.80      |          | 
```

从这个结果，我可以确定一些事情：

*   我的来源的 QComb 列中确实存在值“2_HCA_PT”和“3_HCA_PT”。
*   我的来源的 QComb 列中*不*存在值“1_HCA_PT”和“4_HCA_PT” 。
*   来自我的来源的 QComb 列中有其他值未在 PIVOT 列标题中表示。我可以说是因为 31.38 > (0.30 + 7.80)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T17:38:45.293

尝试这个：

```
TRANSFORM Sum(tblData.Losses) AS TotalLosses
SELECT tblData.Region, tblData.LossType
FROM tblData
GROUP BY tblData.Region, tblData.LossType
PIVOT tblData.Year In ('2001','2000'); 
```

关键是 PIVOT 语句中的年份列表。对于日期时间数据类型，您可能必须将 ' 替换为 #。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-22T21:52:18.510

基本上，如果您能够让它返回结果，则“IN (value1, value2)”位只是您指定希望在结果集中返回哪些透视列。

例如，如果没有“IN (value1, value2)”，您的表格如下所示：

| ID | 1 | 2 | 3 | 4 |
| --- | --- | --- | --- | --- |
| 1 | 一个 | b | C | d |

添加 "IN ('2', '4')" 将返回：

| ID | 2 | 4 |
| --- | --- | --- |
| 1 | b | d |

# java - 在网格中显示产品

> ID：12498575
> 
> 赞同：0
> 
> 时间：2012-09-19T16:02:48.227
> 
> 标签：java, jsp

我有一个 JSP 页面，其中显示了属于特定类别的所有产品。问题是，根据我是循环“td”还是“tr”，它们最终要么垂直显示，要么水平显示。我想在网格中显示它们，其中 3 个产品在第 1 行，另外 3 个在第 2 行，依此类推。关于如何实现这一点的任何想法？

**产品控制器.java**

```
List<Product> productsLst = MasterDao.getAllProductsByCategory(new Integer(categoryId)); 
```

**产品.jsp**

```
<table>
    <tr>
    <%
        for (Product p : productsLst) {
    %>
    <td align="center">
        <a href="product.jsp?productId=<%= p.getProductId() %>"><img src="../images/<%= p.getImage()%>" class="product-grid-img"/></a>
        <br/><div id="product-name"><%= p.getName()%></div>
        <br/><div id="money">$&nbsp;<%= p.getListPrice()%></div>
    </td>
    <%
        }
    %>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:06:40.457

只需使用计数器，如果您有 3 个产品，请关闭 tr 并打开一个新 tr

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:12:52.587

使用 Guava 的[Lists.partition()](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Lists.html#partition%28java.util.List,%20int%29)方法：

```
List<List<Product>> rows = Lists.partition(productList);
page.setAttribute("rows", rows);
...
<c:forEach var="row" items="rows">
    <tr>
        <c:forEach var="product" items="row">
            <td> ... details of the product ... </td>
        </c:forEach>
    </tr>
</c:forEach> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:14:13.383

[已经在这个帖子](https://stackoverflow.com/questions/12387285/how-arrange-data-from-an-arraylist-in-two-divs-using-struts2/12387534#12387534)里回答了

```
<table>
<s:iterator value="productList" status="status">
        <s:if test="#status.index %4 == 0">
            <tr>
        </s:if>

                <td>
                    <img src="../product/image?imageID=<s:property value="productID"/>&type=thumbnail" />
                </td>
         <s:if test="#status.index %4 == 0">
            </tr>
         </s:if>
</s:iterator>
<table> 
```

# javascript - 英国日期格式的jquery日期比较

> ID：12498576
> 
> 赞同：0
> 
> 时间：2012-09-19T16:02:50.990
> 
> 标签：javascript, jquery, date

有没有一种相对简单的方法可以在**英国**格式的日期上使用`jquery`, 进行日期比较？我正在尝试检查通过日期输入字段选择的天数是否大于或等于设定的数字。不幸的是，我无法更改日期格式，需要使用.**`dd/mm/yy`**

 ****更新**：我正在使用的日期已经是**英国**格式`dd/mm/yy`- 我正在尝试将其转换为可以与当前日期进行比较的格式，以查找经过的天数。

工作解决方案：

```
function checkDaysElapsed (input) {

                var datePart = input.split("/");
                year = datePart[2]; // get only two digits
                month = datePart[1]; 
                day = datePart[0];

                var date1 = new Date(year,month-1,day); 

                var currentTime = new Date();
                var month2 = currentTime.getMonth();
                var day2 = currentTime.getDate();
                var year2 = currentTime.getFullYear();
                var date2 = new Date(year2,month2,day2);
                console.log(year + '/' + month + '/' + day);
                console.log(year2 + '/' + month2 + '/' + day2);

                delta = date2 - date1; 
                // delta is the difference in milliseconds 
                delta_in_days = Math.round(delta / 1000 / 60 / 60/ 24); 

                return delta_in_days;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:17:30.120

获得正确格式的日期后，您还需要将其与其他日期进行比较。为此，您可能希望将日期字符串强制转换为`Date()`对象。

另请注意，一旦您创建了一个`Date`对象，实际格式就不再相关。

首先，您需要使用 string.split('/') 将日期拆分为其组件

```
var date1 = new Date(year,month-1,day),
var date2 = new Date(year2,month2-1,day2);
delta = date2 - date1;
// delta is the difference in milliseconds
delta_in_days = Math.round(delta / 1000 / 60 / 60/ 24); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:08:28.350

使用此插件格式化日期以通过 ajax 传递给服务器以进行准确的日期比较[formatDate](http://searchco.de/codesearch/view/17475214)

像这样打电话

```
var start = $.format.date($('#startDate').val(), "dd/MM/yyyy");
var finish= $.format.date($('#finish').val(), "dd/MM/yyyy");

$.ajax({
        cache: true,
        type: 'post',
        async: false,
        data: { start: start, finish: finish },
        url: '/controller/CheckDates',
        success: function (msg) {

            //msg will be the days

        }
    }); 
```

由于经验不准确，我已经这样做了，可能有更有效的方法

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T16:05:19.570

这是您将日期格式设置为 dd/mm/yy 的方式：

```
$(function () {
    $(".datepicker").datepicker({ dateFormat: 'dd/mm/yy' });
}); 
```**

# visual-studio-2010 - 尝试打开 CSS 文件时出现 Microsoft Visual Web Developer 2010 Express“类未注册”错误

> ID：12498579
> 
> 赞同：0
> 
> 时间：2012-09-19T16:03:08.817
> 
> 标签：visual-studio-2010, visual-studio, windows-vista, visual-web-developer, visual-web-developer-2010

`CSS`打开文件时，Visual Studio 给我以下错误消息：

```
---------------------------
Microsoft Visual Web Developer 2010 Express
---------------------------
Class not registered.
Looking for object with CLSID: {D9B3211D-E57F-4426-AAEF-30A806ADD397}.
---------------------------
OK   
--------------------------- 
```

打开和编辑`HTML`和`JS`文件工作正常。我通过谷歌找到了一些建议，说重新安装修复了它。我花了几个小时卸载 VWD 及其先决条件并重新安装它只是得到同样的错误。有没有人有任何见解？

**更新：**尝试在解决方案中打开 CSS 文件会给我一个不同的错误消息：

```
---------------------------
Microsoft Visual Web Developer 2010 Express
---------------------------
The operation could not be completed. Unspecified error 
---------------------------
OK   
--------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:15:23.820

新的错误消息让我想到了这个问题： [CSS 文件未在 Visual Studio 2010 SP1 中打开？](https://stackoverflow.com/questions/6731470/css-file-not-opening-in-visual-studio-2010-sp1)

这些消息的特定修复（至少对我而言）是[手动下载并重新安装 Web Standards Update for Microsoft Visual Studio 2010 SP1](http://visualstudiogallery.msdn.microsoft.com/a15c3ce9-f58f-42b7-8668-53f6cdc2cd83)。

# php - mysql_fetch_assoc 从主键返回数组

> ID：12498583
> 
> 赞同：0
> 
> 时间：2012-09-19T16:03:15.353
> 
> 标签：php, mysql, arrays

我正在尝试使用表单帖子向 mySQL 表添加行。每行都有一个我称为quoteID 的主。提交新表单时，它应该将自身添加为表中的一行，并且 quoteID 比之前的 quoteID 大一。它目前看起来像这样：

```
<?
session_start();
if(!session_is_registered(myusername)){
header("location:login.php");
}
include 'verify.php';
$con = mysql_connect("localhost","user","$password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("internal", $con);

$previousOrderID = mysql_query("SELECT * FROM sourcingQuote ORDER BY quoteID DESC LIMIT 1"); 
$previousOrderID = mysql_fetch_assoc($previousOrderID);
$newOrderID = $previousOrderID['ID'] + 1;

mysql_close($con);
?> 
```

目前该表中有 4 行，quoteID 为 1、2、3 和 4。奇怪的是，如果我尝试：

```
<? echo $previousOrderID; ?><br>
<? echo $newOrderID; ?><br> 
```

输出结果为：

```
Array

1 
```

为什么 $newOrderID 不显示 5？和价值 $previousOrderID 4？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:06:49.490

您的唯一标识称为quoteID；您正在寻找身份证件：

```
$newOrderID = $previousOrderID['ID'] + 1; 
```

尝试这个：

```
$newOrderID = $previousOrderID['quoteID'] + 1; 
```

您当前得到 1，因为当它没有找到值时，它返回 null，当您将 1 添加到它时，它的计算结果为 0。

您还可以通过将 quoteID 字段设置为 auto_increment 来解决此问题。

# mysql - MySQL - 在一对多关系中选择具有特定匹配的记录

> ID：12498584
> 
> 赞同：2
> 
> 时间：2012-09-19T16:03:16.700
> 
> 标签：mysql, sql

我在获取一对多关系中的记录时遇到问题。以下是场景，

```
table products
---------------------
id | name
---------------------
1 | product1
2 | product2
3 | product3
4 | product4

Categories
-------------
id | name
-------------
1 | A
2 | B
3 | C

product_categories
-------------------
pid | cid
-------------------
1 | 1
1 | 2
1 | 3
2 | 2
2 | 3
3 | 2
3 | 3
4 | 3 
```

我想根据类别名称选择产品。

如果我的条件是 B 类和 C 类，那么预期的输出将是，

预期结果：

```
----------------------------
Product_name |  category_name
----------------------------
Product2 | B
Product2 | c
Product3 | B
Product3 | c 
```

如果我的类别是 C，那么应该只显示 product4。

请帮助我。我尝试了很多方法和技术，如 IN、NOT IN、存在和不存在以及可能的连接操作，但没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:06:19.530

`IN`您需要计算与您在子句中提供的参数数量相等的记录实例数。

```
SELECT  a.Name
FROM    products a
        INNER JOIN product_categories b
            on a.id = b.pid
        INNER JOIN Categories c
            on b.cid = c.id
WHERE   c.name IN ('B','C')
GROUP BY a.NAME
HAVING COUNT(*) = 2 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T16:20:47.683

```
SELECT * FROM products p
INNER JOIN product_categories pc ON p.id = pc.pid
INNER JOIN Categories c ON pc.cid = c.id
WHERE c.name IN('B', 'C'); 
```

# knockout.js - 淘汰赛 JS + 更新帮助文本

> ID：12498586
> 
> 赞同：0
> 
> 时间：2012-09-19T16:03:28.940
> 
> 标签：knockout.js

我对 Knockout JS 相当陌生。我正在尝试做一个简单的任务，如果下拉菜单更改根据下拉列表中选择的值显示帮助文本。

我的示例位于 jsFiddle：http: [//jsfiddle.net/dnfCb/10/](http://jsfiddle.net/dnfCb/10/)

注意：我不确定是否允许链接到 jsFiddle，如果不允许，我将在此处粘贴代码。似乎 ko.computed 事件仅在加载时触发。当标准发生变化时，它似乎无法启动。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:09:30.203

您需要将您的`<select>`值绑定到实际的可观察属性以查看更改。

```
<-- ------------------------ here....................... -->
<select name="search_option" data-bind="value: criteria">
    <option value="O">Order Search</option>
    <option value="P">PO Number Search</option>
</select> 
```

和

```
var orderSearchViewModel = {
   criteria: ko.observable("O")   // give a default value
};

orderSearchViewModel.helperText = ko.computed(function() {
    if (this.criteria() == "P") {
        return "Searching by PO Number";
    }else {
        return "Searching by Order Number";
    }
}, orderSearchViewModel);

ko.applyBindings(orderSearchViewModel);​ 
```

请注意，这`criteria`是一个需要执行才能获得基础值的函数，所以

```
if (this.criteria == "P") 
```

行不通。

[http://jsfiddle.net/dnfCb/11/](http://jsfiddle.net/dnfCb/11/)

* * *

顺便说一句，我认为独立的视图模型设置更好一些：

```
function OrderSearchViewModel() {
  var self = this;

  this.criteria = ko.observable("O");
  this.helperText = ko.computed(function() {
    if ( self.criteria() == "P" ) {
      return "Searching by PO Number";
    } else {
      return "Searching by Order Number";
    }
  });
}

ko.applyBindings( new OrderSearchViewModel() );​ 
```

# java - 使用java将压缩文件夹提取到外部文件夹

> ID：12498591
> 
> 赞同：0
> 
> 时间：2012-09-19T16:03:44.307
> 
> 标签：java, jar, zip, zipfile, filewriter

我一直无法在 SO 或谷歌上以全面的格式找到它。我正在尝试将压缩文件夹（.zip，将被打包到 .jar 中，直到我可以进行此设置）解压缩到一个目录中（在 %appdata% 下找到）。

我需要哪些类和方法来做到这一点？我正在查看 zipFile 和 FileWriter 来执行此操作，但我不完全了解如何一起使用这两个类。

有没有办法做到这一点？如果是这样，有没有比使用 zipFile 和 fileWriter 更好（更简单/更快）的方法来做到这一点？我试图在不牺牲效率的情况下尽可能减小文件大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:09:26.143

如果您正在使用`JDK 7`try [`FileSystems`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystems.html)。解压缩非常简单，例如

```
try (FileSystem fs = FileSystems.newFileSystem(Paths.get(FILE_NAME), null)) {
      Files.copy.....
} 
```

# class - 类中的经典 ASP arraylist 属性？

> ID：12498593
> 
> 赞同：1
> 
> 时间：2012-09-19T16:03:50.673
> 
> 标签：class, asp-classic, arraylist

如何`arraylist`使用经典 ASP 将属性添加到类中？

我的例子（不工作）：

```
Class AA
    Public AA_id
    Dim data: set data = CreateObject("System.Collections.ArrayList")
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:56:25.517

您需要在方法内初始化类成员 - 函数，类构造函数的子例程。当然，其中最好的在构造函数内部。

演示如何将 .NET ArrayList 用作自定义 VBScript 类的一部分的完整工作代码：

```
<%
Class MyCustomClass
    Private internalArrayList

    Private Sub Class_Initialize()  
        Set internalArrayList = Server.CreateObject("System.Collections.ArrayList")
    End Sub  

    Private Sub Class_Terminate()  
        Set internalArrayList = Nothing
    End Sub  

    Public Sub AddItem(oItem)
        internalArrayList.Add(oItem)
    End Sub

    Public Function ToString()
        Dim data, x
        data = "List contains " & internalArrayList.Count & " item"
        If internalArrayList.Count<>1 Then data = data & "s"
        For x=0 To internalArrayList.Count-1
            data = data & "<br />"
            If IsObject(internalArrayList(x)) Then
                data = data & "complex object of type " & TypeName(internalArrayList(x))
            ElseIf IsArray(internalArrayList(x)) Then
                data = data & "array with " & (UBound(internalArrayList(x)) + 1) & " items"
            Else  
                data = data & internalArrayList(x)
            End If
        Next
        ToString = data
    End Function
End Class
%> 
```

使用示例，包括添加复杂对象：

```
Class Foo
    Public Dummy
End Class

Dim myInstance, myFoo
Set myInstance = New MyCustomClass
myInstance.AddItem("hello")
myInstance.AddItem("world")
myInstance.AddItem(Array(1, 2, 3))

Set myFoo = New Foo
myFoo.Dummy = "just checking"
myInstance.AddItem(myFoo)

Response.Write(myInstance.ToString()) 
```

# ant - 如何在 ANT 目标中指定的 FTP 密码中转义实体

> ID：12498598
> 
> 赞同：1
> 
> 时间：2012-09-19T16:03:58.517
> 
> 标签：ant, ftp

我正在尝试通过 ANT 将文件 FTP 到密码包含与号 (&) 的服务器以下 ANT 目标：

```
<target name="upload_zip">
    <ftp server="myhost.net"
         userid="myusername"
         password="topsecret&amp;"
         port="21"
         remotedir="/public_html"
         passive="yes"
         binary="yes">
        <fileset dir=".">
            <include name="${updatefile}"   />
        </fileset>
    </ftp>
</target> 
```

失败并显示此消息：

```
error during FTP transfer:  java.net.SocketException: Permission denied: recv failed  
   at java.net.SocketInputStream.socketRead0(Native Method) 
   at java.net.SocketInputStream.read(SocketInputStream.java:150)  
   at ... // really long stack trace 
```

好像认证不成功。如果我不逃避 & 符号，那么我的构建文件格式不正确。我是正确地转义了＆符号还是做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:25:40.483

我认为您使用的方法没有明显的问题 - 实体应该被正确翻译。

要诊断自动 ftp，最好先手动尝试类似（或相同！）传输。通常这将揭示目标文件系统中的连接凭据或权限的任何外部问题。

如果手动传输有效，那么下一步将是“发现手动传输和 Ant 驱动传输之间的差异”。

ftp 问题的堆栈跟踪可能表明存在连接前问题 - 一旦建立连接，您将看到 FTP 错误消息，例如：

*   *无法登录 FTP 服务器*

这可能表明登录密码组合存在问题。

如果服务器关闭，您将获得类似以下内容的跟踪：

*   *java.net.ConnectException：连接被拒绝*

尽管在您的情况下，这似乎是中间代理的问题。对于未来的读者，[此资源](http://www.ncftp.com/ncftpd/doc/misc/ftp_and_firewalls.html)可能有助于通过防火墙问题诊断被动 ftp。

Failing all that, running Ant in verbose (`-v`) or diagnostic (`-diagnostics`) modes to see the innards of what Ant is doing may also give a clue.

# vb.net - SqlCommand（使用语句/处置问题）

> ID：12498599
> 
> 赞同：9
> 
> 时间：2012-09-19T16:04:04.837
> 
> 标签：vb.net, dispose, sqlcommand, using-statement

举个例子……

```
 Using cn As New SqlConnection(ConnectionString)
            Try
                Dim cmd As SqlCommand = New SqlCommand
                With cmd
                    .Connection = cn
                    .Connection.Open()
                    .CommandText = "dbo.GetCustomerByID"
                    .CommandType = CommandType.StoredProcedure
                    .Parameters.Add("@CustomerID", SqlDbType.Int, 4)
                    .Parameters("@CustomerID").Value = CustomerID
                End With

                da = New SqlDataAdapter(cmd)
                da.Fill(ds, "Customer")
            Catch ex As Exception

            End Try
        End Using 
```

从我今天的研究来看，这听起来好像基本上没问题，但 SqlCommand 并没有被处理掉。

问题 -> 以下哪个示例是处理此问题的最佳方法？

示例 2 - 手动处置

```
 Using cn As New SqlConnection(ConnectionString)
            Try
                Dim cmd As SqlCommand = New SqlCommand
                With cmd
                    .Connection = cn
                    .Connection.Open()
                    .CommandText = "dbo.GetCustomerByID"
                    .CommandType = CommandType.StoredProcedure
                    .Parameters.Add("@CustomerID", SqlDbType.Int, 4)
                    .Parameters("@CustomerID").Value = CustomerID
                End With

                da = New SqlDataAdapter(cmd)
                cmd.Dispose()
                da.Fill(ds, "Customer")
            Catch ex As Exception

            End Try
        End Using 
```

示例 3 - 使用 Using 语句自动处理

```
 Using cn As New SqlConnection(ConnectionString)
            Try
                Using cmd As New SqlCommand
                    With cmd
                        .Connection = cn
                        .Connection.Open()
                        .CommandText = "dbo.GetCustomerByID"
                        .CommandType = CommandType.StoredProcedure
                        .Parameters.Add("@CustomerID", SqlDbType.Int, 4)
                        .Parameters("@CustomerID").Value = CustomerID
                    End With

                    da = New SqlDataAdapter(cmd)
                    da.Fill(ds, "Customer")
                End Using
            Catch ex As Exception

            End Try
        End Using 
```

示例 4 - 与示例 3 相同，但 Try/Catch 在 Using 中 - 这有什么不同吗？

```
 Using cn As New SqlConnection(ConnectionString)
            Using cmd As New SqlCommand
                Try
                    With cmd
                        .Connection = cn
                        .Connection.Open()
                        .CommandText = "dbo.GetCustomerByID"
                        .CommandType = CommandType.StoredProcedure
                        .Parameters.Add("@CustomerID", SqlDbType.Int, 4)
                        .Parameters("@CustomerID").Value = CustomerID
                    End With

                    da = New SqlDataAdapter(cmd)
                    da.Fill(ds, "Customer")
                Catch ex As Exception

                End Try
            End Using
        End Using 
```

示例 5 - 与示例 4 相同，但在 Using 语句中指定了 CommandText 和 cn - 这有什么优势？

```
 Using cn As New SqlConnection(ConnectionString)
            Using cmd As New SqlCommand("GetCustomerByID", cn)
                Try
                    With cmd
                        .Connection.Open()
                        .CommandType = CommandType.StoredProcedure
                        .Parameters.Add("@CustomerID", SqlDbType.Int, 4)
                        .Parameters("@CustomerID").Value = CustomerID
                    End With

                    da = New SqlDataAdapter(cmd)
                    da.Fill(ds, "Customer")
                Catch ex As Exception

                End Try
            End Using
        End Using 
```

示例 6 - 与示例 5 相同，但连接是在 cn 而不是 cmd 上打开的。如果只执行一个存储过程，在cmd上打开连接会更好吗？

```
 Using cn As New SqlConnection(ConnectionString)
            cn.Open()

            Using cmd As New SqlCommand("GetCustomerByID", cn)
                Try
                    With cmd
                        .Connection = cn
                        .CommandType = CommandType.StoredProcedure
                        .Parameters.Add("@CustomerID", SqlDbType.Int, 4)
                        .Parameters("@CustomerID").Value = CustomerID
                    End With

                    da = New SqlDataAdapter(cmd)
                    da.Fill(ds, "Customer")
                Catch ex As Exception

                End Try
            End Using
        End Using 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T18:18:24.577

DataAdapter.Fill 命令将打开和关闭连接本身，因此您不需要`cmd.Connection.Open()`. [（参考：http: //msdn.microsoft.com/en-us/library/377a8x4t.aspx](http://msdn.microsoft.com/en-us/library/377a8x4t.aspx)中的备注部分。）

使用`Using`SqlConnection 具有为您调用`.Close`它的效果。

`cmd`一旦超出范围（或更早，如果 .NET 确定它不会再次使用），该变量就有资格进行垃圾收集。

在您的示例 2 中，我不确定在 DataAdapter 使用它之前处理 cmd 是否是个好主意。

* * *

[[我应该在 SQLCommand 对象上调用 Dispose 吗？](https://social.msdn.microsoft.com/Forums/en-US/916a1734-3e19-43a1-95c7-e3a2cd18369d/should-i-call-dispose-on-a-sqlcommand-object?forum=adodotnetdataproviders)来自用户“JefBar Software Services”的信息？] 在撰写本文时，由于[其构造函数中的代码](https://github.com/Microsoft/referencesource/blob/master/System.Data/System/Data/SqlClient/SqlCommand.cs)`.Dispose`，调用an`SqlCommand`无效：

```
public SqlCommand() : base() {
    GC.SuppressFinalize(this);
} 
```

# ruby-on-rails - 如何从 ActiveAdmin 中的日期过滤器更改 end_date？

> ID：12498602
> 
> 赞同：0
> 
> 时间：2012-09-19T16:04:13.560
> 
> 标签：ruby-on-rails, activeadmin

我希望 start_date 早于 end_date 或验证 end_date 为 <= Date.today。

谢谢！

# javascript - 创建搜索框以在页面上查找文本

> ID：12498604
> 
> 赞同：0
> 
> 时间：2012-09-19T16:04:23.237
> 
> 标签：javascript, search

我正在尝试仅使用 html、css 和 javascript 创建一个搜索框，它将在我的页面中搜索文本，如果找到匹配的文本，该函数应该突出显示范围内的文本。

我在网上搜索（和stackoverflow），但找不到与我的需求相关的答案）

我知道该怎么做，但我被困在某个点上。这是我的代码到目前为止的样子。

```
<script type="text/javascript">

function init(){
    //creates a variable equal to the value entered in the text box
    var lookfor = document.getElementById("q").value
    //splits the whole page into an array or words
    var words = document.body.innerHTML.split(" ");
    ///loops through the array to get each word
    for( var i=0; i<words.length; i++){

    }   
    //This is where I get lost, i dont know how to make it so that what you enter
    //in the textbox(lookfor) matches somthing on the page. it will get highlighted. i
    //was thinking about using the find object, but im new to javascript and dont know 
    //how to properly use find yet.
    if(lookfor == words[i]) //Find()------
    { 
        '<span class="highlight">' + words + '</span>'
    }
    else{
        alert("Sorry, your search returned no results! Please Try again.")
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:13:40.687

好吧，您的部分问题是您过早地终止了 for 循环。应该看起来更像

```
<script type="text/javascript">

function init()
{
    //creates a variable equal to the value entered in the text box
    var lookfor = document.getElementById("q").value
    //splits the whole page into an array or words
    var words = document.body.innerHTML.split(" ");
    ///loops through the array to get each word
    for( var i=0; i<words.length; i++)
    {      
        //This is where I get lost, i dont know how to make it so that what you enter
        //in the textbox(lookfor) matches somthing on the page. it will get highlighted. i
        //was thinking about using the find object, but im new to javascript and dont know 
        //how to properly use find yet.
        if(lookfor == words[i]) //Find()------
        { 
            '<span class="highlight">' + words + '</span>'
        }        
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-15T18:44:40.863

所以这是一种使用 W3.JS JavaScript 库的方法（我提供了它在 w3schools 浏览器上存储位置的链接）。要搜索的文本应该在文档标签内。与

*   每个项目的对象。

    ```
    <!DOCTYPE html>
    <html>
    <meta charset="utf-8">
    <script src="https://www.w3schools.com/lib/w3.js"></script>

    <body>

    <h2>Filter List</h2>

    <p>Search for a name in the input field:</p>

    <input oninput="w3.filterHTML('#id01', 'li', this.value)" placeholder="Search for names..">

    <ul id="id01">
       <li>Some text to search</li>
       <li>Some other text to search</li>
    </ul>

    </body>
    </html>
    ```

    祝你有美好的一天。

# php - php yii CGridView 添加来自不同模型的列

> ID：12498607
> 
> 赞同：1
> 
> 时间：2012-09-19T16:04:34.903
> 
> 标签：php, model, yii

以下我在我的 admin.php 视图文件中，模型是`Components`

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'components-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    /*'attributes'=>array(
        array(
         'label'=>'Asset Number',
                'value'=>"help",
        ),
    ),*/
    'columns'=>array(
        'component_id',

        'description',
        'version',
        'serial_no',
        'purchase_date',
        /*'disposal_date',

        'model',
        'nol',
        'manufacturer',
        'medium',
        */
        array(
            'class'=>'CButtonColumn',
        ),
    ),
)); ?> 
```

我想添加一个名为资产编号的额外列，它是另一个模型中的一个字段`FixedAsset`。这两个表在模型中通过它们的 PK 链接在一起`ComAsset`。我最理想的尝试是检查每条记录`Components`，看看它是否通过`component_id`if so 链接，然后`original_asset_number`从`FixedAsset`使用`fixed_asset_id`from`ComAsset`

关系

组件 - comasset = 1:1

固定资产 - comasset = 1:M

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T12:09:08.953

假设在各个模型中正确设置了关系，您应该能够通过`$data->relationshipName`. `CGridView`如果我从您的描述中得到了正确的关系，那么`value`本专栏的部分应该如下所示`$data->comAsset->fixedAsset->name`：

# r - 自定义 R 中 logi.hist.plot 的最小值和最大值

> ID：12498612
> 
> 赞同：0
> 
> 时间：2012-09-19T16:05:07.227
> 
> 标签：r

`logi.hist.plot`有人知道在 R 中的 popbio 包中运行时如何设置 x 轴的最小值和最大值吗？

目前，最小值被定义为我的最小数据值。我希望它为 0。

```
library(popbio)
logi.hist.plot(data$Heat, data$Death, logi.mod = 1,
               boxp = FALSE,type="hist", col="gray",
               ylabel = "Probability of death", 
               ylabel2 = "Death Frequency",
               xlabel = "Heat", 
               mainlabel = "Logistic probability plot of Heat vs Death") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:38:37.420

您尚未提供用于测试此请求的可能解决方案的数据集，但我提供了一个想法：

首先制作一个图，该图基本上根据需要使用 xlim 和 ylim 设置所需的限制，以及空白的 x 和 y 标签和 axt="n"，

...然后发出`par(new=TRUE)`，

...然后运行您的绘图功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:13:27.563

快速查看源代码 - 只需键入`logi.hist.plot`- 无法更改轴限制。

源代码相当长，但并不复杂。本质上，该`boxp=FALSE`选项调用这部分代码：

```
logi.scater <- function(independ, depend, scater = "n", x.lab = xlabel, 
        las = las.h) {
      plot(independ, depend, cex = 1, type = scater, ylab = ylabel, 
           xlab = x.lab, main = mainlabel, cex.lab = 1.2, las = las)
} 
```

您可以看到该`plot`函数不允许通过限制。

您的选择是：

1.  拆开源代码并构建自己的情节。
2.  决定你对轴心满意。

# javascript - MQTT Javascript

> ID：12498613
> 
> 赞同：4
> 
> 时间：2012-09-19T16:05:09.860
> 
> 标签：javascript, mqtt

我已经搜索了很长时间，但我还没有找到任何有用的东西。
我正在尝试实现一个 MQTT-Javascript-Client。随着 Mosquitto V1.0 的发布，在[http://mosquitto.org/js/mosquitto-1.0.js](http://mosquitto.org/js/mosquitto-1.0.js)上发布了一个 javascript/websocket-client。
但我不知道如何以正确的方式实现这一点。
例如：我使用[http://broker.mqttdashboard.com](http://broker.mqttdashboard.com)上的示例服务器作为代理。当我在我的 xampp-Server 上运行以下 html 时，没有任何反应，并且在代理端没有连接客户端。我认为我实现它的方式有一些不正确的地方。如果有人可以帮助我，那就太好了。

```
<html><head>
<script type="text/JavaScript" src="mosquitto-1.0.js"></script> 

<script type="text/JavaScript">
    var t = new Mosquitto();
    t.connect('ws://broker.mqttdashboard.com:1883/',10);
    t.subscribe("mqttdashboard/testtopic", 0);
</script> 
</head>
<body></body></html> 
```

我也知道 node.js-thing，但我更喜欢使用 websocket-way。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T16:29:02.510

您要连接的服务器需要支持 websocket。您连接到端口 1883 的事实向我表明它没有！这里的正常情况是连接到端口 80（web），然后升级到 websockets 连接，该连接恰好与 mqtt 通信。这通常需要 Web 服务器与 mqtt 代理对话并配置为这样做，这不是自动发生的事情。

尝试使用 ws://test.mosquitto.org/ws 作为你的 url，它是我目前知道的唯一启用 websocket 的 mqtt 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T21:08:52.320

[MQTT 仪表板](http://mqttdashboard.com)现在支持端口 8000 上的 websocket。它使用[HiveMQ MQTT 代理](http://www.hivemq.com)，该代理从 1.4 版开始支持本机 websocket。

Mosquitto.js 现在似乎已被弃用，所以我强烈建议使用[Eclipse Paho.js](http://www.eclipse.org/paho/)作为 Javascript MQTT 客户端。

你的 mosquitto.js 代码现在可以像这样修改它：

```
<html><head>
<script type="text/JavaScript" src="mosquitto-1.0.js"></script> 

<script type="text/JavaScript">
    var t = new Mosquitto();
    t.connect('ws://broker.mqttdashboard.com:8000/',10);
    t.subscribe("mqttdashboard/testtopic", 0);
</script> 
</head>
<body></body></html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-26T13:03:33.510

试试 broker.hivemq.com:8000 的 websockets，它支持 ws。它应该工作

我试过这个，它到目前为止工作

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript">
</script>
<script type="text/javascript">

client = new Paho.MQTT.Client("broker.hivemq.com", 8000, "clientId-" + parseInt(Math.random() * 100, 10));
// set callback handlers
 client.onConnectionLost = onConnectionLost;
  client.onMessageArrived = onMessageArrived;
  var options = {
    onSuccess:onConnect,
    onFailure:doFail
  }
  // connect the client
  client.connect(options);
  // called when the client connects
  function onConnect() {
    // Once a connection has been made, make a subscription and send a message.
    console.log("onConnect");
    client.subscribe("my/topic1");

  }
  function doFail(e){
    console.log(e);
  }
  // called when the client loses its connection
  function onConnectionLost(responseObject) {
    if (responseObject.errorCode !== 0) {
      console.log("onConnectionLost:"+responseObject.errorMessage);
    }
  }

  // called when a message arrives
  function onMessageArrived(message) {
    console.log("onMessageArrived:"+message.payloadString);
    document.write(message.payloadString);
    alert("messgaearrived!")
  }

</script> 
```

并在 cloudmqtt.com 上试一试

# wpf - WPF 覆盖控件

> ID：12498614
> 
> 赞同：3
> 
> 时间：2012-09-19T16:05:12.073
> 
> 标签：wpf, windows, user-controls

感谢您对过去问题的所有帮助。我又来召唤你了。

因此，假设我有相同大小的用户控件 A，B，z-index 分别为 0,1。

是否有可能让 B 无法捕捉到任何针对 A 的触摸？

基本上我希望有一个用户控件出现在另一个上但不阻止触摸。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:08:18.787

如果将[UIElement.IsHitTestVisible](http://msdn.microsoft.com/en-us/library/system.windows.uielement.ishittestvisible.aspx)属性设置为`false`，则您的控件不应“捕获任何触摸”。有关详细信息，请参阅[命中测试支持](http://msdn.microsoft.com/en-us/library/ms752097.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:11:54.490

您可以使用命中测试来通知您某个位置的所有视觉效果，而不仅仅是使用`HitTestResultCallback`. 这是你如何使用它：[http ://hintdesk.com/c-wpf-hit-testing-example/](http://hintdesk.com/c-wpf-hit-testing-example/)

# qt - 如何在 QGraphicsPolygonItem 中添加 QInputDialog.getText 文本？

> ID：12498616
> 
> 赞同：3
> 
> 时间：2012-09-19T16:05:18.507
> 
> 标签：qt, pyqt4

我正在 PyQt4 中构建，但不知道如何将文本添加到 QGraphicsPolygonItem。这个想法是在用户双击后将文本设置在矩形框的中间（并通过 QInputDialog.getText 获取对话框）。

课程是：

```
class DiagramItem(QtGui.QGraphicsPolygonItem):
    def __init__(self, diagramType, contextMenu, parent=None, scene=None):
      super(DiagramItem, self).__init__(parent, scene)
      path = QtGui.QPainterPath()
      rect = self.outlineRect()
      path.addRoundRect(rect, self.roundness(rect.width()), self.roundness(rect.height()))
      self.myPolygon = path.toFillPolygon() 
```

我的双击鼠标事件看起来像这样，但没有更新！

```
def mouseDoubleClickEvent(self, event):
    text, ok = QtGui.QInputDialog.getText(QtGui.QInputDialog(),'Create Region Title','Enter Region Name: ', \
QtGui.QLineEdit.Normal, 'region name')
    if ok:
        self.myText = str(text)
        pic = QtGui.QPicture()
        qp = QtGui.QPainter(pic)
        qp.setFont(QtGui.QFont('Arial', 40))
        qp.drawText(10,10,200,200, QtCore.Qt.AlignCenter, self.myText)
        qp.end() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T04:17:07.903

好吧，你没有正确地做到这一点。你正在画一个`QPicture`( `pic`) 并把它扔掉。

我假设你想*在*. 方法（及其派生词）负责绘制项目。如果您想用该项目绘制额外的东西，您应该覆盖该方法并在那里进行绘制：`QGraphicsPolygonItem`[`paint`](http://doc.qt.digia.com/4.7-snapshot/qgraphicsitem.html#paint)`QGraphicsItem`

```
class DiagramItem(QtGui.QGraphicsPolygonItem):
    def __init__(self, diagramType, contextMenu, parent=None, scene=None):
          super(DiagramItem, self).__init__(parent, scene)
          # your `init` stuff
          # ...

          # just initialize an empty string for self.myText
          self.myText = ''

    def mouseDoubleClickEvent(self, event):
        text, ok = QtGui.QInputDialog.getText(QtGui.QInputDialog(),
                                                  'Create Region Title',
                                                  'Enter Region Name: ',
                                                  QtGui.QLineEdit.Normal, 
                                                  'region name')
        if ok:
            # you can leave it as QString
            # besides in Python 2, you'll have problems with unicode text if you use str()
            self.myText = text
            # force an update
            self.update()

    def paint(self, painter, option, widget):
        # paint the PolygonItem's own stuff
        super(DiagramItem, self).paint(painter, option, widget)

        # now paint your text
        painter.setFont(QtGui.QFont('Arial', 40))
        painter.drawText(10,10,200,200, QtCore.Qt.AlignCenter, self.myText) 
```

# c# - 如何在 ASP-NET c# 中从特定路径打开文件？

> ID：12498618
> 
> 赞同：2
> 
> 时间：2012-09-19T16:05:18.003
> 
> 标签：c#, asp.net, file, pdf

我需要一个允许我通过 ASP.NET C# 打开任何给定文件的按钮。

这是我已经拥有的。

```
string strArchivo = "FileNameHere";
string strExtension = Path.GetExtension(strArchivo).ToLower();

if (strExtension == ".pdf")
{
    //I open a file which is located in a folder called Archivos
    Response.Write("<script>window.open('/Archivos/" + strArchivo + "');</script>");
} 
```

问题来了，我知道这个方法是用来打开pdf文件的，因为它们是在浏览器上打开的，然后你可以下载它们或者从那里打印出来。

我的老板问我至少我还可以打开 WORD、EXCEL 和 POWERPOINT 文件，因为这些是最常见的。

有没有办法可以打开或下载这些文件（或任何文件，如果可能的话）？

哦，还有一件事，关于我给你看的代码，我注意到每次使用这种方法打开文件时，我的网站都会突然切换字体（一些字母变大，另一些只是切换为灰色） , 是因为我在该代码中遗漏了一些东西还是我该如何解决它？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:14:29.437

尝试测试其他文件类型扩展名：

```
string strArchivo = "FileNameHere"; 
string strExtension = Path.GetExtension(strArchivo).ToLower(); 

if (strExtension == ".pdf" || strExtension == ".docx" || strExtension == ".doc"... etc) 
{ 
    //I open a file which is located in a folder called Archivos 
    Response.Write("<script>window.open('/Archivos/" + strArchivo + "');</script>"); 
} 
```

# javascript - 将 ISO 8601 时间日期转换为简单的英文

> ID：12498619
> 
> 赞同：9
> 
> 时间：2012-09-19T16:05:21.730
> 
> 标签：javascript, date, time

如何使用 JavaScript 以以下格式（我相信它是 ISO 8601 格式）操作日期时间？

2010-01-13T18:31:16Z

我想输出为 dd/mm/yyyy hh:mm:ss。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T18:03:05.307

如果您真的想要简单的英语，为什么不将字符串转换为日期并调用 date.toLocaleString()，如果您想要 GMT，则调用 toUTCString()。

**var time=new Date('2010-01-13T18:31:16Z').toLocaleString();**

如果您想支持 IE8 和旧版浏览器，您需要翻译字符串：

```
(function(){
    var D= new Date('2011-06-02T09:34:29+02:00');
    if(!D || +D!==1307000069000){
        Date.fromISO= function(s){
            var day, tz,
            rx=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,
            p= rx.exec(s) || [];
            if(p[1]){
                day= p[1].split(/\D/);
                for(var i=0,L=day.length;i<L;i++){
                day[i]=parseInt(day[i], 10) || 0;
                };
                day[1]-= 1;
                day= new Date(Date.UTC.apply(Date, day));
                if(!day.getDate()) return NaN;
                if(p[5]){
                    tz= (parseInt(p[5], 10)*60);
                    if(p[6]) tz+= parseInt(p[6], 10);
                    if(p[4]== '+') tz*= -1;
                    if(tz) day.setUTCMinutes(day.getUTCMinutes()+ tz);
                }
                return day;
            }
            return NaN;
        }
        // shim implemented;
    }
    else{
        Date.fromISO= function(s){
            return new Date(s);
        }
        //native ISO Date implemented;
    }
})() 
```

**var time= Date.fromISO('2010-01-13T18:31:16Z').toLocaleString();**

**返回值：（字符串）2010 年 1 月 13 日星期三 1:31:16 PM**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-19T16:09:51.640

看看 JavaScript 中的 Date 对象 API：http: [//www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)。这应该让你开始：

```
var timeStr = "2010-01-13T18:31:16Z";
var date = new Date(timeStr);
var day = date.getDate();
var year = date.getFullYear();
var month = date.getMonth()+1;
var dateStr = month+"/"+day+"/"+year; 
```

有一些方法可以获取时间，您也可以将其附加到 dateStr。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T16:12:03.227

您可以使用正则表达式轻松更改格式，例如

```
return datestring.replace(/(\d+)-(\d+)-(\d+)T(\d+):(\d+):(\d+)Z/, "$3/$2/$1 $4:$5:$6"); 
```

或者，您将字符串解析为[`Date`object](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)，并提取单个值（或更多，如工作日等）：

```
var date = new Date(datestring); // parses ISO 8601
return date.getDate()+"/"+(date.getMonth()+1)+"/"+date.getFullYear()+" "+… 
```

# java - JSF 2：如何处理控制器中的异常？

> ID：12498625
> 
> 赞同：1
> 
> 时间：2012-09-19T16:05:59.750
> 
> 标签：java, exception, jsf, jsf-2

我想做一个可以正常工作的注册表单：

```
<h:form id="register_form">
            <h:panelGrid columns="3">
                <h:outputLabel for="email" value="E-mail:" />
                <h:inputText id="email" value="#{userc.userb.user.email}">
                    <f:ajax event="blur" render="m_email" />
                </h:inputText>
                <h:message id="m_email" for="email" ajaxRendered="false" />

                <h:outputLabel for="password" value="Passoword" />
                <h:inputSecret id="password" value="#{userc.userb.user.password}">
                    <f:validator validatorId="confirmPasswordValidator" />
                    <f:attribute name="confirm" value="#{confirmPassword.submittedValue}" />
                </h:inputSecret>
                <h:message id="m_password" for="password" />

                <h:commandButton value="Registerr" action="#{userc.register}">
                    <f:ajax execute="@form" render="@form" />
                </h:commandButton>

                <h:messages globalOnly="true" layout="table" />

            </h:panelGrid>
        </h:form> 
```

这是我的控制器：

```
public void register(){
    FacesMessage message;
    try {
        userb.encryptPassword();
        userEAO.create(userb.getUser());

        message = new FacesMessage("Register successfully!");
        FacesContext.getCurrentInstance().addMessage(null, message);
    } catch (Exception e) {
        // 1062 : duplicate entry
        if (e.getMessage().contains("Duplicate")){
            message = new FacesMessage("User already registered, please try another email");
            FacesContext.getCurrentInstance().addMessage(null, message);
        }else{
            message = new FacesMessage("An error occured, try again please");
            FacesContext.getCurrentInstance().addMessage(null, message);
        }
    }

} 
```

因此，例如，如果某个用户尝试注册自己两次，我会返回此消息，说这是重复的，但我想知道这是否是最好的方法。

如何处理这些异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:04:12.433

这些验证应该由您的业务逻辑层对象处理，在这种情况下，它看起来就像是`userEAO`对象。您可以决定是否应该以异常的形式处理此错误消息（恕我直言，不会使用）。

就我而言，我更喜欢使用一个`Message`基本上包含整数代码和保存操作结果的消息的类。对于我的情况，我通常返回 0 或更多表示操作成功，并使用负代码来声明错误。这是一个非常基本的例子：

```
public class Message {
    private int code;
    private String message;
    //constructor...
    //getters and setters...
}

public class UserBL {

    public Message create(User user) {
        //do some fancy validations
        if (!verifyDuplicatedUser(user)) {
            return new Message(-1000, "Duplicated user");
        }
        //and the operations...
        saveUser(user);
        return new Message(0, "Register successfully!");
    }

} 
```

现在您的控制器将转发它必须真正做的事情（这意味着，没有繁重的业务逻辑验证）：

```
public void register() {
    FacesMessage fmessage;
    userb.encryptPassword();
    Message message = userEAO.create(userb.getUser());
    fmessage = new FacesMessage(message.getMessage());
    FacesContext.getCurrentInstance().addMessage(null, fmessage);
} 
```

当您应该验证一组数据时，这种方法甚至可以帮助您，例如验证 Excel 工作表的结果并且您必须显示错误列表（因为多次显示单个错误非常烦人！）。

您可以改进创建消息的方式，例如从包含系统消息的表中检索它们，或者使用属性文件来处理国际化（当然，这取决于您的功能要求）。

# algorithm - 通过归纳证明多项式 Big-Theta？

> ID：12498648
> 
> 赞同：1
> 
> 时间：2012-09-19T16:07:08.787
> 
> 标签：algorithm, big-o, big-theta, induction

我了解大θ、大哦和大欧米茄的概念。我只是很难证明这一点。自从我做归纳以来已经很长时间了，所以我很确定我只是生疏了，缺少一些简单的东西。

例如..我需要帮助的问题是证明`5n² - 6n = Θ(n²)`..

我已经得到了问题的 Big-Oh 部分（我做 big-Oh 和 Ω 分别正确吗？）到：

```
6k² >= 5n² - 6n 
```

和大欧米茄部分：

```
5n² - 6n >= n² 
```

....但是我从这里去哪里？！我从归纳中回忆起......我认为这些都是真的，现在插入`(n+1)`每个`n`并且......做......什么？在这一点上，我迷失了自己。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:43:40.723

为了证明 5n^2-6n 是 O(n^2)，你必须证明 5n^2-6n <= cn^2 对于所有数 n >= n0，对于某个数 n0 和常数 c。

归纳证明包括证明基本案例的主张和证明归纳步骤。在我们的示例中，我们可以看到基本情况，当 n = 1 时，对于某个常数 c 显然成立。

对于归纳步​​骤，我们假设某个数字 k 的断言是正确的，并用它来证明 k+1 的断言是正确的。所以我们假设 5k^2-6k <= ck^2 并显示：

```
5(k+1)^2 - 6(k+1)  = 5k^2 +10k + 5 -6k - 6
                   = 5k^2-6k + 10k -1        
                  <= ck^2 + 10k - 1
                  <= ck^2 + c*2k + c       (for any constant c  >= 5)
                   = c(k+1)^2 
```

这证明了 k+1 的主张并完成了证明。

你可以用类似的方式证明欧米茄的大主张。

# javascript - jQuery Mobile 不会在主页中触发事件

> ID：12498654
> 
> 赞同：1
> 
> 时间：2012-09-19T16:07:50.157
> 
> 标签：javascript, jquery, events, jquery-mobile

我有一个使用多页模板的 PhoneGap 和 jQueryMobile 项目。在主页上`pageshow`， , `pageinit`, `pagecreate`,`pagebeforeshow`事件不会触发。我尝试了几种可能的解决方案。

解决方案1：

```
$('#home').on("pageshow", function(e) { ... } 
```

使用此解决方案，当我切换到第二页并返回主页时，会触发事件，但不是第一次加载应用程序。

解决方案2：

```
var selector = ':jqmData(role=page)';
$('body').on("pageshow", selector,function(e) { ... } 
```

我从[这里](https://stackoverflow.com/questions/11240408/jquery-mobile-pageshow-event-is-not-firing-on-first-page)得到了解决方案 2 ，但它对我不起作用。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:07:01.280

最后我找到了解决方案，首先创建另一个页面，然后使用 $.mobile.changePage('#home',{transition:'none'}) 重定向到主页，该页面执行所有初始化功能。

有了这个主页会触发所有事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:31:55.370

`pagebeforeshow`, `pageshow`, 和其他集合在应用程序启动期间转换第一页时为空。

> 请注意，在应用程序启动期间转换第一页时，此集合为空。

阅读文档：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

# java - 任何时区的当前日期和时间（“Wall”日期和时间）

> ID：12498656
> 
> 赞同：0
> 
> 时间：2012-09-19T16:08:02.260
> 
> 标签：java, datetime, timezone, jodatime

好吧，我知道这个问题已经在很多地方被问过很多次了，但我还不能让它工作。我尝试`java.util.Date`过以及`JodaTime`API。

我的问题是如何在考虑我的应用程序运行的时区的情况下返回当前日期和时间。这是我编写的用于返回当前日期时间的方法。问题是，它总是向我返回 UTC 时间。

```
private String getCurrentDate()
{
    DateTime currentDate = new DateTime(DateTimeZone.getDefault());
    SimpleDateFormat formatter = new SimpleDateFormat("dd-MMM hh:mm");
    String dateNow = formatter.format(currentDate);
    return dateNow;
} 
```

谢谢你的协助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:18:47.710

```
private String getCurrentDate()
{
      final DateFormat format = DateFormat.getDateTimeInstance();
      format.setTimeZone(Calendar.getInstance().getTimeZone());
      return format.format(new Date());
} 
```

这应该可以完成这项工作。获取真正的本地时区的棘手部分。但是`Calendar`Java 类很好地做到了这一点。

如果您愿意`DateFormat`，也可以使用您的`SimpleDateFormat`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:12:44.647

`DateFormat`(and `SimpleDateFormat`) 默认为 JVM 的时区，它应该是您计算机的时区。

```
DateFormat format = new SimpleDateFormat("dd-MMM hh:mm");
System.out.println(format.format(new Date())); 
```

在当地时区打印。您始终可以 `DateFormat`通过调用显式设置时区`setTimeZone`。

```
format.setTimeZone(TimeZone.getTimeZone("PDT")); 
```

# ssis - SSIS 条件拆分 NULL

> ID：12498657
> 
> 赞同：4
> 
> 时间：2012-09-19T16:08:10.263
> 
> 标签：ssis, null, split, conditional

我需要检测两个值中的任何一个是否为空，如果不是，它们是否不同。

我分裂的条件是

```
(ISNULL(ModuleLevelId) && !ISNULL(LEV_CODE)) || 
(!ISNULL(ModuleLevelId) && ISNULL(LEV_CODE)) || (ISNULL(LEV_CODE) ? 0 - ModuleLevelId : (DT_I4)LEV_CODE) != ModuleLevelId 
```

但有人告诉我，我的表达式导致 null，即非布尔条件。

谁能帮我写下可行的条件吗？

非常感谢

帕特里克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:52:37.550

```
(ISNULL(ModuleLevelId) && !ISNULL(LEV_CODE)) || 
(!ISNULL(ModuleLevelId) && ISNULL(LEV_CODE)) ||
((ISNULL(LEV_CODE) ? 0 - ModuleLevelId :(DT_I4)LEV_CODE) != ModuleLevelId) 
```

我认为你需要围绕你的第三个任期：

```
 (ISNULL(LEV_CODE) ? 0 - ModuleLevelId :(DT_I4)LEV_CODE) != ModuleLevelId 
```

和 （）。我认为表达式引擎将其错误地解析为

```
((ISNULL(ModuleLevelId) && !ISNULL(LEV_CODE)) || 
(!ISNULL(ModuleLevelId) && ISNULL(LEV_CODE)) ||
(ISNULL(LEV_CODE) ? 0 - ModuleLevelId :(DT_I4)LEV_CODE)) != ModuleLevelId 
```

或 (布尔 || 布尔 || INT) != INT

当你想要的是 (Boolean || Boolean || Boolean)

试试这个答案中最上面的代码。

# datetime - 使用 matplotlib 绘制格式为 DD HH:MM:SS 的时间增量轴

> ID：12498673
> 
> 赞同：3
> 
> 时间：2012-09-19T16:09:33.413
> 
> 标签：datetime, matplotlib, timedelta, axis-labels

我正在使用 Matplotlib 绘制来自赛车事件的速度/距离数据，例如距离与时间，时间是水平轴，距离是垂直轴。

我的输入是两个向量，一个包含“距离事件开始的秒数”的时间值，另一个包含“到目前为止的距离”。同一个情节可以有很多运动员，所以我可以比较一下。

问题是，如果我绘制纯时间，我会以秒数获得 X 轴，这不自然地阅读：

![在此处输入图像描述](../Images/baeb24394c73026eb2f64e7719bc85f6.png)

我可以根据一天中的实际日期和时间绘制数据，并且我得到可读的结果，但这是绝对时间，而不是自事件开始以来经过的时间（这个开始于上午 6:00 左右）：

![在此处输入图像描述](../Images/0d2218ff221bfcc4ca23f57e8e7894e6.png)

我想要的是一种以 HMS 格式获取经过时间的方法（与第二个图形相同，但时间与事件开始相关），并且可能具有缩放级别的“意识”（切换到小时：分钟，然后到天：缩放级别更改的小时数，以免标签与与比例无关的数据过于靠近）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:10:45.523

我怀疑最简单的方法是编写自己的`Formatter`（[doc](http://matplotlib.org/api/ticker_api.html#tick-formatting)）来转换为 HMS。

```
import matplotlib

class myFormatter(matplotlib.ticker.Formatter):
    def __call__(self,in_value_in_seconds,pos=None):
        hours = int(in_value_in_seconds//(3600))
        in_value_in_seconds -= hours * 3600
        mins = int(in_value_in_seconds//(60))
        in_value_in_seconds -= mins * 60
        secs = int(in_value_in_seconds)

        return str(hours) + ":" + str(mins) + ":" + str(secs) 
```

这是（我认为）最简单的情况，不支持任何缩放。将其中一些逻辑推入一个`datetime.deltatime`对象（或将它们作为参数）可能会更好。

结合`MultipleLocator`（[doc](http://matplotlib.org/api/ticker_api.html#matplotlib.ticker.MultipleLocator)），您可以很好地控制刻度线的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:22:50.577

我想出了以下内容，这就是我正在使用的。仍然不完美（不使用 60 的倍数作为主要刻度），但格式本身就是我想要的：

```
def HMS(seconds, pos):
    seconds = int(seconds)
    hours = seconds / 3600
    seconds -= 3600 * hours
    minutes = seconds / 60
    seconds -= 60 * minutes
    if hours == 0:
        if minutes == 0:
            return "%ds" % (seconds)
        return "%dm%02ds" % (minutes, seconds)
    return "%dh%02dm" % (hours, minutes)

ax = plt.gca()
ax.xaxis.set_major_formatter(plt.FuncFormatter(HMS)) 
```

# c++ - 皮下注射 - OnActivating

> ID：12498674
> 
> 赞同：9
> 
> 时间：2012-09-19T16:09:36.867
> 
> 标签：c++, dependency-injection, hypodermic

我最近一直在尝试使用[https://github.com/ybainier/Hypodermic](https://github.com/ybainier/Hypodermic)对 C++ 进行依赖注入。但是，我无法找到它是否支持 AutoFac 的 OnActivating 事件：

```
builder.RegisterInstance(instance).OnActivating(MyLambdaHere) 
```

皮下有什么方法可以模仿这个功能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T13:09:40.733

此功能随*新版本*(0.1.2) 一起提供。你可以像这样使用它：

```
builder.registerInstance(instance)->onActivating(
    [](IActivatingData< MyStaticInstanceType >& data) -> void
    {
        // Your "Activating" code here
    }
); 
```

此外，`IRegistrationBuilder`暴露`onPreparing()`和`onActivated()`以及。我希望这会有所帮助。

# google-analytics - _trackEvent 和 _trackPageview 的顺序在 Google Analytics _gaq 中是否重要？（包括自定义变量）

> ID：12498675
> 
> 赞同：0
> 
> 时间：2012-09-19T16:09:36.957
> 
> 标签：google-analytics

根据 _trackPageview 与 _trackEvent（非交互）顺序，我在 Google Analytics 中查看数据的方式是否存在任何功能差异？

**浏览量第一个示例：**

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXX-X']);
_gaq.push(['_setCustomVar', 1, 'Foo', "Bar", 1]);
_gaq.push(['_setCustomVar', 2, 'Biz', "Baz", 2]);
_gaq.push(['_setCustomVar', 3, 'Ugg', "Boot", 3]);
_gaq.push(['_trackPageview']);
_gaq.push(["_trackEvent", "cat", "action", "lbl", 0, true]); 
```

**事件第一个示例：**

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXX-X']);
_gaq.push(['_setCustomVar', 1, 'Foo', "Bar", 1]);
_gaq.push(['_setCustomVar', 2, 'Biz', "Baz", 2]);
_gaq.push(['_setCustomVar', 3, 'Ugg', "Boot", 3]);
_gaq.push(["_trackEvent", "cat", "action", "lbl", 0, true]);
_gaq.push(['_trackPageview']); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:24:46.423

在大多数情况下，两者都应该工作相同。

可能有非常罕见的极端情况会显示出差异。

例如：

事件与页面相关联。如果您没有发送任何事件，它们总是与您发送的最后一次综合浏览量或当前页面相关联。所以在你的例子中它是一样的。但是，如果 _trackPageview 使用的是虚拟页面名称，那么与事件关联的页面将会不同。很少有绑定页面很重要，只有在您使用虚拟浏览量时才会有所不同。

如果您查看两者的“访问”指标，它们可能会有所不同。这是一个非常罕见的极端情况，因为在查看事件和网页浏览时，您应该始终查看网页浏览/唯一网页浏览或事件/唯一事件指标。在查看命中级别时，“访问次数”指标没有多大意义，因为每次访问仅增加一次，并且仅在该访问的第一次命中时增加。浏览量或事件。因此，在上面的示例中，如果访问在网站上登陆，那么如果首先触发该事件，则网页浏览的访问次数可能会更低。

# c# - 如何估计打印机中图像的大小

> ID：12498680
> 
> 赞同：0
> 
> 时间：2012-09-19T16:09:51.670
> 
> 标签：c#, image, printing, screen, image-size

我正在努力解决这个问题。我有一个 802 x 76 像素大小的图像，从代码中发现打印机使用 600 的水平分辨率和 600 的垂直分辨率。

我想估计在该打印机中打印图像时的大小。我正在使用 winforms，可以看到 e.graphics.Dipx 和 e.graphics.DipY 字段给出 96 ，这是屏幕分辨率。

我可以看到，由于屏幕和打印机的 DPI 不同，因此必须进行某种放大，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:52:35.473

802/600 = 1.33667 英寸 = 3.39 厘米。

您应该在绘制图像时控制图像的宽度/高度。我认为 GDI+ 还会查看图像的 DPI。

# firefox - Firefox 中嵌套 ul 中的额外空间，但 Chrome 中没有

> ID：12498681
> 
> 赞同：0
> 
> 时间：2012-09-19T16:09:59.890
> 
> 标签：firefox, google-chrome, nested, html-lists, spacing

我正在尝试为网站制作垂直侧边栏。中有几个主要项目`ul`，如果这些项目有子类别，那么一个新项目`ul`将嵌套在`ul`其父项下方的主要项目中`li`（这在下面的代码中更明显）。在最新版本的 Chrome 中，它应该显示，但在最新的 Firefox`li`中，在嵌套的`ul`. 对原因有什么想法吗？

这是基本的html：

```
<!DOCTYPE html>
    <html lang="en">
        <head>
        <meta charset="utf-8" />
        <title></title>
        <script>
        </script>
        <style>
        </style>
        <link rel="stylesheet" href="style.css" type="text/css">
        </head>
<body>
 <ul class="navigation">
   <li>ITEM1</li>
   <li>ITEM2</li>
     <ul class="navigation subitem">
       <li>subitem1</li>
       <li>subitem2</li>
       <li>subitem3</li>
     </ul>
   <li>ITEM3</li>
  </ul>
</body>
</html> 
```

这是相应的CSS：

```
.navigation {
    display: inline;
    width: 150px;
    margin-top: 5px;
    padding-left: 15px;
    text-align: right;
    vertical-align: middle;
}

.subitem {
    margin: 0px;
    vertical-align: top;
    top: 0px;

}

.navigation li {
    display: block;
    font-family: 'Oxygen';
    text-transform: uppercase;
    font-size: 1.5rem;
    margin-top: 15px;
}

.subitem li {
    font-size: 0.6em;
    margin-top: 3px;
    color: rgba(0, 0, 0, 0.9);

} 
```

如果您在 Chrome 和 Firefox 中加载这些内容，您应该能够看到差异。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T16:36:54.173

由于“display：inline;”，空间正在发生 在 .navigation 类上。您可以尝试将其正确浮动。

# network-programming - 有没有人使用 UDP jumbograms 实现了解决方案？

> ID：12498682
> 
> 赞同：4
> 
> 时间：2012-09-19T16:10:07.003
> 
> 标签：network-programming, udp

我最近了解了 jumbograms（UDP 数据包 > 65k - 仅限 IPv6）。虽然我没有使用它们的要求，但我想我会四处挖掘，看看人们是如何做任何聪明的事情的。

我惊讶地发现除了技术文档协议之外几乎没有什么。

那么有没有人使用过它们，如果有的话怎么用？

它们是否比 UDP 更不可靠，因为它们更大？

哪种语言/软件/硬件支持它们？

你的经历是什么？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:16:39.067

Linux 包括支持，因为它记录了一个漏洞：

> **受影响的系统**
> 
> Linux Linux 内核：2.6.21，Linux Linux 内核：2.6.20，Linux Linux 内核：2.6.2，Linux 内核：2.6.2 rc3，Linux 内核：2.6.2 rc2，Linux 内核：2.6.2 rc1，Linux Linux内核：2.6.20.1，Linux Linux 内核：2.6.20.10，Linux Linux 内核：2.6.20.11，Linux Linux 内核：2.6.20.12，Linux Linux 内核：2.6.20.13，Linux Linux 内核：2.6.20.14，Linux Linux 内核： 2.6.20.2、Linux Linux 内核：2.6.20.3、Linux Linux 内核：2.6.20.4、Linux Linux 内核：2.6.20.5、Linux Linux 内核：2.6.20.8、Linux Linux 内核：2.6.20.9、Linux Linux 内核：2.6。 21.1、Linux内核：2.6.20 rc2、Linux Linux内核：2.6.20.15、Linux Linux内核：2.6.20.6、Linux Linux内核：2.6.20.7、Linux内核：2.6.21 git1、Linux内核：2.6.21 git2、 Linux内核：2.6.21 git3，Linux内核：2.6.21 git4，Linux内核：2.6.21 git5，Linux内核：2.6.21 git6，Linux内核：2.6.21 git7

[http://www.iss.net/security_center/reference/vuln/IPv6_Linux_Jumbogram_DoS.htm](http://www.iss.net/security_center/reference/vuln/IPv6_Linux_Jumbogram_DoS.htm)

分段数据包本质上是不可靠的并且容易受到 DoS 攻击，因为必须保留资源，直到完整序列可用于呈现给消费应用程序。

请注意，在 IPv4 中，您可以从线路中读取单个片段，IPv6 强制 IP 堆栈仅显示完全重构的有效负载。

# javascript - 检测哪个 CSS 动画刚刚以 JavaScript 结束？

> ID：12498686
> 
> 赞同：5
> 
> 时间：2012-09-19T16:10:28.063
> 
> 标签：javascript, jquery, animation, css, mobile-safari

你如何检测在 JavaScript 中刚刚完成的 CSS 动画？

最终需要是重新触发一个 CSS 动画。由于我们的 HTML 层次结构，我们不喜欢检查元素的类，而是只在特定动画结束时才采取行动。如果您有一种方法可以在不删除/添加类的情况下重新触发动画，请告诉我们。

否则......我们的代码：

```
 page.find( '.button.letter' ).on( 'webkitAnimationEnd', function() {
        $( this ).removeClass( 'tap_animation' );

        console.log( 'Hi: ' + this.style.webkitAnimationName );

        if ( !write_mode() ) {
            do_write( this );
        }
    }); 
```

**this.style.webkitAnimationName**总是返回空字符串。

我们做错了什么吗？

我们需要 WebKit 浏览器的代码，特别是 Mobile Safari。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T16:26:02.537

从 jQuery 中，您可以访问该`originalEvent`对象，并从那里访问该`animationName`属性：

```
$('body').on('webkitAnimationEnd', function(e){
    var animName = e.originalEvent.animationName;
    console.log(animName);
});​ 
```

[（仅限 Webkit）JS Fiddle 演示](http://jsfiddle.net/davidThomas/3xXaE/)。

从那里，只需使用 an`if`来检查动画名称是什么（我想是过去时，因为它已经结束了）。

以上内容已更新，以提供更好的说明：

```
$('div').on('webkitAnimationEnd', function(e){
    var animName = e.originalEvent.animationName;
    if (animName == 'bgAnim') {
        alert('the ' + animName + ' animation has finished');
    }
});​ 
```

[（仅限 Webkit）JS Fiddle 演示](http://jsfiddle.net/davidThomas/3xXaE/1/)。

此演示使用以下 HTML：

```
<div><span>text</span></div>​ 
```

和 CSS：

```
@-webkit-keyframes bgAnim {
    0%, 100% {
        color: #000;
        background-color: #f00;
    }
    50% {
        color: #fff;
        background-color: #0f0;
    }
}

@-webkit-keyframes fontSize {
    0%, 100% {
        font-size: 100%;
    }
    50% {
        font-size: 300%;
    }
}

div {
    font-weight: bold;
    -webkit-animation: bgAnim;
    -webkit-animation-duration: 2s;
    -webkit-animation-iteration-count: 2;
}

span {
    font-size: 100%;
    font-weight: bold;
    -webkit-animation: fontSize;
    -webkit-animation-duration: 4s;
    -webkit-animation-iteration-count: 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:16:03.117

An event listener for webkitAnimationEnd should work. Something along the lines of:

```
 $object.addEventListener('webkitAnimationEnd', function(){
        console.log( 'End Detected' );
    }, false); 
```

# android - glDrawTexiOES 绘图在显示旋转时被截断

> ID：12498687
> 
> 赞同：1
> 
> 时间：2012-09-19T16:10:34.667
> 
> 标签：android, opengl-es, opengl-es-1.1

我正在开发一个使用本机代码绘制单个 OpenGL 2D 纹理的 2D 游戏。然后将纹理原封不动地绘制在屏幕上。除非旋转显示器，否则代码工作正常。游戏继续正常运行，但纹理被截断并偏离屏幕中心。如果以任何方向开始游戏都可以正常运行，但如果方向改变，则会出现绘制问题。我正在正确处理方向更改，以便不会破坏 GL 上下文，并且可以正确计算每个方向的绘图参数。我唯一能想到的是，我在处理 onSurfaceChanged() 事件时可能遗漏了一些步骤。这是 onSurfaceChanged() 调用的本机代码：

```
if (pTexture)
       free(pTexture);
pTexture = malloc(iTexturePitch * iTextureHeight);

rect[0] = 0;
rect[1] =  iHeight; // w,h fit within the texture size
rect[2] =  iWidth;
rect[3] = -iHeight;

glDeleteTextures(1, &s_texture);
while (*start)
   glDisable(*start++); // disable unused options
glEnable(GL_TEXTURE_2D);
glGenTextures(1, &s_texture);
glBindTexture(GL_TEXTURE_2D, s_texture);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glShadeModel(GL_FLAT);
glColor4x(0x10000, 0x10000, 0x10000, 0x10000);
glTexParameteriv(GL_TEXTURE_2D, GL_TEXTURE_CROP_RECT_OES, rect); 
```

显示纹理的代码：

```
 glClear(GL_COLOR_BUFFER_BIT);
    glTexImage2D(GL_TEXTURE_2D,     /* target */
        0,          /* level */
        GL_RGB,         /* internal format */
        iTextureWidth,      /* width */
        iTextureHeight,     /* height */
        0,          /* border */
        GL_RGB,         /* format */
        GL_UNSIGNED_SHORT_5_6_5,/* type */
        pTexture);      /* pixels */
    // border x/y for centering; stretched x/y is the destination size on the display
    glDrawTexiOES(iBorderX, iBorderY, 0, iStretchedWidth, iStretchedHeight); 
```

# wordpress - WordPress 永久链接仅适用于帖子

> ID：12498688
> 
> 赞同：1
> 
> 时间：2012-09-19T16:10:39.157
> 
> 标签：wordpress, url-rewriting, friendly-url, permalinks

我想使用 wordpress 永久链接，但**仅限**于帖子。有没有办法做到这一点？

我不关心 seo，我的网站是关于小众主题的，所以它已经在谷歌排名第一。启用永久链接也会与我安装的插件产生一些冲突。

如果没有永久链接，我会完全没问题，但我不喜欢帖子链接的外观 - ?p=some_numbers - 而不是我想要更漂亮的东西，比如帖子名称和日期。

在不启用永久链接的情况下如何实现这一目标？也许以某种方式在 .htacces 文件中？但是，我如何获得帖子名称？

或者也许我应该使用永久链接但编辑重写规则（老实说我不知道​​该怎么做）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:13:41.857

您是否查看过[Advanced Permalinks 插件](http://wordpress.org/extend/plugins/advanced-permalinks/)？

# c - 使用 C 和 stdlib 预取文件

> ID：12498690
> 
> 赞同：0
> 
> 时间：2012-09-19T16:10:57.313
> 
> 标签：c, multithreading, file, mpi

对于在 CI 中实现的数值例程，需要从文件 (ascii) 中读取数据。数据需要作为数值计算的输入，并且通常太大而无法将其放入内存中。因此，我需要将它动态地预取到某个数组以将其馈送到例程中（否则读取文件将成为计算中的瓶颈）。有没有一种既定/简单的方法可以使用stdlib，也许是posix线程或MPI？我正在使用 Linux 下的英特尔 MPI 库。

`func`以下伪代码中的例程代表数值核心例程。它被非常频繁地调用，例如由常微分方程的求解器调用。每次使用已知值为 的`i`随机浮点值调用它。因此，有一些早期信息可以让我大致了解下一步需要文件中的哪些数据值。`x[i-1]<x[i]<x[i-1]+D``D``x`

```
read_file(x,data)
{
   /* code to search x-dependent data in file */
   data[i]=...;
}

func(x)
{

   read_file(x,&data);

   /* several data- and x-dependent operations */
   result= ...;

  return result;

} 
```

在执行块`/* several data- and x-dependent operations */`（和一些外部代码）时，原则上我可以将下一次调用所需的数据`func`从文件中预取到并行的缓冲区数组中。在下一次调用中，我可以搜索数组中的信息而不是文件。我要求提供并行预取数据所需的代码并替换 read_file（与文件阅读器通信的部分，下一步将需要哪些数据）。理想情况下，如果`/* several data- and x-dependent operations */`块需要与稍后搜索文件一样多的时间，则不会花费任何额外时间。如果代码停留在那里，则执行时间将大约是原来的两倍（忽略外部操作所需的时间）。请注意，如果块花费的时间比读取时间长，我可以轻松地并行化它。我不能对现在的读者做些什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:12:49.673

我建议您做的第一件事是将 ASCII 文件转换为二进制文件（例如，将本机双精度存储为 8 个字节，而不是 ASCII 字符串等）。在运行高分辨率 FEM 模型时，我一直在为类似的事情而苦苦挣扎。我正在使用[triangle](http://www.cs.cmu.edu/~quake/triangle.html)准备网格。不幸的是，它只有 ascii 输入/输出，对于大型网格读取数据需要很长时间！真的。我修补了三角形以添加对二进制 io 的支持，所有问题都消失了。您可以使用标准 fread 将文件中的数据获取到分配的内存中，瞧！当然，您必须以合理的方式将它们存储在文件中，以便您可以访问/读取连续的块。

您应该尝试这样做，因为 ASCII 数据的解析，尤其是浮点数的解析非常昂贵。如果您仍然有问题，您可能希望启动一个后台线程/工作者，该线程/worker 将读取数据，而其他线程同时进行计算。我会在共享内存计算机上简单地使用 pthreads，让 MPI 来处理代码的集群版本。取决于你需要什么。

如果你想去多线程 IO，你正在寻找的是一个经典的生产者-消费者解决方案。有大量的例子，任何语言的简单实现，并使用你喜欢的任何线程库。查看[此页面，讨论使用 pthread 进行并发计算的一些经典示例](http://www.cs.nmsu.edu/~jcook/Tools/pthreads/examples.html)。

# wxpython - 如何将面板放置在另一个面板中？

> ID：12498691
> 
> 赞同：0
> 
> 时间：2012-09-19T16:11:07.517
> 
> 标签：wxpython

如何将 wx.Panel 放在另一个 wx.Panel 中？只是一个不起作用的小测试程序：

```
import wx

class TstApp(wx.App):
    def OnInit(self):
        self.frame = wx.Frame(None, -1, "TstApp", wx.DefaultPosition,
        wx.DefaultSize)

        self.pn = wx.Panel(self.frame, -1)
        self.pn2 = wx.Panel(self.pn, -1)
        self.btn = wx.Button(self.pn2, -1, "A Button")

        self.frame.Show()
        self.SetTopWindow(self.frame)

        return True

app = TstApp(0)
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:52:37.563

您完全错过了“布局管理”主题。我建议阅读 zetcode 教程的[布局部分](http://zetcode.com/wxpython/layout/)。我已经介绍了`wx.BoxSizer`s 来修复您的示例代码：

```
import wx

class TstApp(wx.App):
    def OnInit(self):
        self.frame = wx.Frame(None, -1, "TstApp", wx.DefaultPosition,
        wx.DefaultSize)

        self.pn = wx.Panel(self.frame, -1)
        sizer1 = wx.BoxSizer(wx.VERTICAL)
        self.pn.SetSizer(sizer1)

        self.pn2 = wx.Panel(self.pn, -1)
        sizer2 = wx.BoxSizer(wx.VERTICAL)
        self.pn2.SetSizer(sizer2)
        sizer1.Add(self.pn2)

        self.btn = wx.Button(self.pn2, -1, "A Button")
        sizer2.Add(self.btn)

        self.frame.Show()
        self.SetTopWindow(self.frame)

        return True

app = TstApp(0)
app.MainLoop() 
```

顺便说一句，最好必须在派生的类中创建小部件等`wx.Frame`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:35:45.500

正如 phineas 已经说过的，您应该只使用 sizer 来排列您的小部件。但是，如果您真的想将多个面板彼此相邻放置，那么您也可以使用 sizer。

```
import random
import wx

########################################################################
class RandomPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)
        color = random.choice(["green", "blue", "yellow", "red"])
        self.SetBackgroundColour(color)

########################################################################
class MainPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)

        firstSubPanel = RandomPanel(self)
        secondSubPanel = RandomPanel(self)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(firstSubPanel, 1, wx.EXPAND|wx.ALL, 5)
        sizer.Add(secondSubPanel, 1, wx.EXPAND|wx.ALL, 5)
        self.SetSizer(sizer)

########################################################################
class MainFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="Panels")

        panel = MainPanel(self)

if __name__ == "__main__":
    app = wx.App(False)
    frame = MainFrame()
    frame.Show()
    app.MainLoop() 
```

# .net - 使用参数构建sql语句IN？

> ID：12498693
> 
> 赞同：0
> 
> 时间：2012-09-19T16:11:08.283
> 
> 标签：.net, mysql, parameters

我正在尝试找到一种正确的方法来执行此操作，而不是简单的字符串连接。

我有一个（简化的）SQL 语句，如下所示：

```
SELECT * FROM Zones WHERE id in (@zoneIDs); 
```

我打算插入`@zoneIDs`这样的值：`100000,100001,100002`

我在这个特定的实例中使用 VB，但它应该适用于使用 MySQL 连接器的任何 .Net 语言。我正在尝试的是：

```
Private GetZones As String = "SELECT * FROM Zones WHERE id in (@zoneIDs)"
Dim Param As MySqlParameter = New MySqlParameter("@zoneIDs", MySqlDbType.String)
Param.Value = "100000,100001,100002"
Dim adapter As MySqlDataAdapter = New MySqlDataAdapter(GetZones)
Dim dt as DataTable = New DataTable()
adapter.Fill(dt) 
```

但是要填写的`dt`只是 ID 100000 的行，就好像查询中没有其他人一样。我的猜测是它正在运行这样的命令：

```
SELECT * FROM Zones WHERE id in ("100000,100001,100002"); 
```

代替

```
SELECT * FROM Zones WHERE id in (100000,100001,100002); 
```

我个人更喜欢使用存储过程而不是像这样的字符串，但我相信我会在那里碰壁。使用这样的参数填充 IN 子句的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:19:55.787

为了进一步解释我的评论，您可以使用类似于您已有的 SQL 查询的函数：

```
Private Function GetZones(ByVal zoneID As String) As DataRow
    Dim connStr As String = "blah" 'Try getting this from app.config'
    Dim conn As New MySqlConnection(connStr)
    Dim cmd As New MySqlCommand()
    Dim dt As DataTable = Nothing
    Dim sSQL As String = "SELECT * FROM Zones WHERE id in (@zoneID)"
    Dim da As New MySqlDataAdapter(sSQL, conn)

    With cmd
        .CommandType = CommandType.Text
        .CommandText = sSQL
        .Connection = conn
        .Parameters.AddWithValue("@zoneID", zoneID)
    End With
    Try
        conn.Open()
        da.Fill(dt)
    Catch ex As Exception
      'Blah'
    Finally
       conn.Close()
    End Try
    Return dt.Rows(0)
End Function 
```

然后，在您的代码中，您可以执行以下操作：

```
Public Function GetZonesTable(ByVal zoneIDs() As String) As DataTable
    Dim zonesDT As DataTable = Nothing

    For Each zoneID As String In zoneIDs
        zonesDT.Rows.Add(GetZones(zoneID))
    Next

    Return zonesDT
End Function 
```

您正在做的是构建您的 zoneID 数组并将该数组传递给 GetZonesTable 函数，然后该函数在内存中创建一个 DataTable，调用 GetZones() 函数并将数组中的每个 zoneID 传递给它。对于 zoneIDs 数组中的每个 zoneID，它会将返回的行添加到 zoneDT 并且 GetZonesTable 返回您的最终表格。虽然这对服务器来说并不太苛刻，但它可能会变得相当密集，具体取决于查询本身和存储在数组中的 zoneID 数量。

根据您的 SQL 版本，有一些 SQL 技巧可能不太密集，但它们比我上面的解释要深入得多。如果需要，请告诉我您使用的是什么版本的 SQL。

# php - Javascript-Python：向客户端浏览器提供动态生成的图像？

> ID：12498694
> 
> 赞同：0
> 
> 时间：2012-09-19T16:11:08.860
> 
> 标签：php, javascript, python

场景：用户加载页面，正在生成图像，显示加载栏，向浏览器发送通知事件。

我正在使用 python 代码生成图像。拥有一个启动脚本或将网络服务器代码嵌入到 python 脚本中的网络服务器是否理想？图像完成渲染后，客户端应该会收到一条消息，说明渲染成功并显示图像。

如何构建它以支持并发用户？只需为导航到网页的每个新用户启动 python 脚本就足够了吗？

在这种情况下使用实时 Web 应用程序会不会过大？尝试决定简单的 jQuery AJAX 是否足够，或者应该使用 Socket.io 在服务器和客户端之间建立持久连接。

有没有适合我需要的图书馆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:18:45.770

我个人很喜欢 Socket.IO，我愿意用它。因为这将是一种更简单的方法。但这可能只是为此而设置的工作量太大。特别是因为从我听到的与节点相比，它在 Python 中并不是那么简单，它实际上是大约 10 行服务器端。

如果没有 Socket.IO，则可以进行长时间轮询以获取图像处理的状态，并在最后获取 base64 中图像的 url，如果这是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:28:16.883

我建议不要为每个请求生成一个新的孩子，而是使用一些任务队列管理工具，例如我可以推荐[celery](http://celeryproject.org/)。

例如，您可以运行一个线程化的 python 网络服务器，它会为每个请求生成一个任务。然后每个客户端可以定期询问（javascript/jquery）任务是否完成，如果完成，服务器将返回正确的图像地址。此外，celery 具有可以在这种情况下使用的[网络回调。](http://docs.celeryproject.org/en/latest/userguide/remote-tasks.html)（我想，我自己没有使用过这个功能）。

我不会浪费时间编写一些临时解决方案，因为它简单、易于部署、有据可查且可扩展性很好。

# ios - iOS - 慢速/有损连接上的 UIWebView 刷新问题

> ID：12498695
> 
> 赞同：1
> 
> 时间：2012-09-19T16:11:12.233
> 
> 标签：ios, xcode, uiwebview

嘿伙计们，我是 iOS 世界的新手，所以请多多包涵。

我创建了一个 webview 来制作 iOS 原生的 web 应用程序，并且该应用程序目前在商店中。但是，一些用户在连接丢失/慢速时遇到了重新加载视图（在警报消息中）的问题。我使用“网络链接调节器”工具对其进行了测试，在连接速度较慢的情况下，即使您尝试刷新页面，警报也会不断弹出。下面是我的代码，希望你能帮我解决这个问题。

```
//Overide the default error message by adding error handling mecanism
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                message:@"You must be connected to the internet to use HIPPOmsg. Try again or click the home button to quit"
                                               delegate:self
                                      cancelButtonTitle:@"Try again"
                                      otherButtonTitles:nil];
[alert show];
[alert release];
}

//Implement the 'Try again' button action
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
if (buttonIndex == 0) {
    NSURL *url = [NSURL URLWithString:@"https://app.hippomsg.com/home.php"];
    NSURLRequest *req = [NSURLRequest requestWithURL:url];
    [[NSURLCache sharedURLCache] removeAllCachedResponses];
    [webView loadRequest:req];
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:59:01.347

You alert has only 1 button, and u have a method definition set to that button. So obviously every time u click the alert button, UIAlerview delegate will be called and it will keep trying again and again (until ur internet actually works).

So provide 2 buttons as per u alert message, "Try Again" and "Home". So "Try Again" will perform ur method wat u have given, "Home" wills top searching and quit the process.

# eclipse - Eclipse RCP - 在控制台上看不到来自 3rd 方库的标准

> ID：12498698
> 
> 赞同：0
> 
> 时间：2012-09-19T16:11:26.457
> 
> 标签：eclipse, eclipse-rcp

我目前正在使用 Eclipse 3.5.2。

我有一个正在开发的 Eclipse RCP 应用程序，我从 Eclipse IDE 启动它。

我正在编写一些代码，它使用我作为单独的 Eclipse 插件包含的第 3 方库。当我运行我的 Eclipse RCP 应用程序时，我在 Eclipse IDE 的控制台选项卡上看不到来自 3rd 方库的典型输出。

这是预期的吗？如果是这样，有没有办法可以启用它？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:22:45.107

我认为控制台不会自动选择标准输出。

但是，您可以将 stdout 重定向到控制台的输出流。

有关如何重定向 stdout 的一个很好的示例，请参阅[Redirect stdout to a string in Java](https://stackoverflow.com/questions/4183408/redirect-stdout-to-a-string-in-java)以及[如何从插件写入控制台](http://wiki.eclipse.org/FAQ_How_do_I_write_to_the_console_from_a_plug-in%3F)以获取有关如何为控制台获取流输出的信息。

# excel - 使用 ADO 读取合并的单元格

> ID：12498700
> 
> 赞同：1
> 
> 时间：2012-09-19T16:11:30.080
> 
> 标签：excel, vba

我有一个像这样的电子表格：

```
1 CONTRACT   AMOUNT   AGENT   COMMISSION
2 ========================================
3                      AG1       15.00
4 20-123      300      AG2       15.00
5                      AG3       15.00
..........................................
6                      AG4       25.00
7 20-234      500      AG2       25.00
8                      AG5       21.00 
```

前两列合并为共同合同，即在两个合同中，相同的合同和总金额适用于所有三个代理

我正在尝试使用 ADO 读取数据：

```
Select * from [Sheet1$A1:D8] WHERE ISNUMERIC(LEFT([CONTRACT],2)) ORDER BY [Agent] 
```

不幸的是，上面的例子只返回了两条记录——第 3 行和第 6 行的记录。似乎就 ADO 而言，只有合并范围中的第一个单元格包含数据。

如果我取消合并前两列，并在每个代理旁边列出重复的合同和金额信息，那么我的金额总和将在 2400.00 而不是 800.00 不正确，并且在视觉上不会那么吸引人（它被用作报告）

ADO 有没有办法将合并单元格的内容应用于每一行？

# caching - 缓存的非 CORS 响应与新的 CORS 请求冲突

> ID：12498704
> 
> 赞同：34
> 
> 时间：2012-09-19T16:11:43.323
> 
> 标签：caching, amazon-s3, xmlhttprequest, cors

**要旨：**

我有一个页面使用标签加载来自 s3（HTML`img`标签）的图像，我有一个使用`xmlhttprequest`. 标签加载在没有 CORS 标头的情况下被缓存，因此`xmlhttprequest`看到缓存的版本，检查它的标头并因跨源错误而失败。

**细节：**

*编辑*：在 safari 5.1.6 和 chrome 21.0.1180.89 中都失败。在 Firefox 14 中运行良好。

使用 S3 的新 CORS，我`CORSRule`这样设置：

```
<CORSRule>
  <AllowedOrigin>*</AllowedOrigin>
  <AllowedMethod>GET</AllowedMethod>
  <AllowedMethod>HEAD</AllowedMethod>
  <MaxAgeSeconds>0</MaxAgeSeconds>
  <AllowedHeader>*</AllowedHeader>
</CORSRule> 
```

如果我从 S3 请求图像而没有在请求标头中设置来源，我会在响应中返回没有任何 CORS 标头的图像。

由于浏览器使用缓存中的非 CORS 版本，此获取的缓存和后续 CORS 请求（确实在请求标头中设置来源的请求）被拒绝。

解决这个问题的最佳方法是什么？我可以设置一些东西，使非 CORS 版本永远不会被缓存吗？`?some_flag`我应该通过将 a 附加到请求的 url 来区分 CORS 请求吗？

理想情况下，即使请求不包含“来源”，我也会让 S3 始终发回所需的 CORS 标头。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-21T00:48:51.547

我遇到了同样的问题。正如@monsur 所说，问题在于 S3 没有设置“Vary: Origin”标题，即使它应该设置。不幸的是，据我所知，没有办法让 S3 发送该标头。但是，您可以通过在请求中添加查询字符串参数来解决此问题，例如`?origin=example.com`当您需要 CORS 时。查询字符串强制浏览器不使用缓存的资源。

理想情况下，cloudfront 和 S3 会在启用 CORS 时发送 Vary:Origin 标头和/或 Webkit 会隐式地改变 Origin 标头，我假设 Firefox 会这样做，因为它没有这个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-01T11:17:33.993

这绝对不是最好的方法，但您可以通过向请求添加一些 url 参数来禁用图像请求的缓存。通常，这是通过 javascript 完成的，例如：

```
var img = document.createElement('img');
img.setAttribute('src', yourRequestUrl + '?d=' + Date.now());
tagToAppendImg.appendChild(img); 
```

这将始终强制执行未缓存的响应，因为以毫秒为单位的日期总是会产生浏览器尚不知道的不同 URL，但我不确定这是否能解决您的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-14T10:08:26.503

一种解决方案是`crossorigin='use-credentials'`在 -tag 上设置属性`img`以强制浏览器始终执行 CORS 请求，请参见此处：[https ://stackoverflow.com/a/34496683/725542](https://stackoverflow.com/a/34496683/725542)

另一种解决方案是将您的 CloudFront 分配配置为自动将非 CORS 请求转换为 CORS 请求。这可以通过使用最近添加的 CloudFront 功能“控制边缘到源请求标头”向 CloudFront 发送到 S3 的每个请求添加 CORS 标头来实现。

在此处查看功能公告：[https ://aws.amazon.com/blogs/aws/cloudfront-update-https-tls-v1-1v1-2-to-the-origin-addmodify-headers/](https://aws.amazon.com/blogs/aws/cloudfront-update-https-tls-v1-1v1-2-to-the-origin-addmodify-headers/)

以及此处的文档：http: [//docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/forward-custom-headers.html](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/forward-custom-headers.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-22T17:47:40.103

我也遇到了这个问题。我最终在我的 S3 存储桶前设置了一个云端分发，并在云端部分中设置`Origin Custom Headers`选项`Origin Settings`以发送`Origin: https://example.com`到我的 S3 源。这会导致 S3 始终为 CORS 标头提供服务，因为它始终会看到`Origin`请求标头。为此，您必须确保`Origin`您的任何云端行为都没有将标头列入白名单。

tl;dr：我告诉 cloudfront 将`Origin: https://example.com`每个请求发送到我的 S3 源，并通过 cloudfront 提供我的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-28T20:26:35.510

在发出 CORS 请求后，您可以使用 Javascript 附加 img 标签。

# mysql - 外键级联更新传播所有可能的列？

> ID：12498707
> 
> 赞同：0
> 
> 时间：2012-09-19T16:11:58.690
> 
> 标签：mysql, sql, database, foreign-keys, foreign-key-relationship

我找不到任何合适的解释，所以这里是：

我有`tableA`和`tableB`。 `tableA`有田野`column1, column2, column3`。 `tableB`有田野`columnA, column1, columnC, columnD, columnE`。

`column1`in`tableA`是一个**主键**。`column1`in`tableB`是引用in的**外键**。in有一个**约束**。`column1``tableA``column1``tableB``ON UPDATE CASCADE`

 **那么我的问题是..如果我更改每个字段的值`tableA`，是否`tableB`也会在其字段中获得相同的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:25:46.447

没办法，它只会更新 TableB 中的外键。MySQL 中的约束只更新相关列。**

# c++ - size_type 可以大于 std::size_t 吗？

> ID：12498709
> 
> 赞同：37
> 
> 时间：2012-09-19T16:11:59.563
> 
> 标签：c++, stl, allocator, size-t

带有 的标准容器`std::allocator`定义[`size_type`为`std::size_t`](https://stackoverflow.com/q/918567/166749). 但是，是否可以有一个分配器来分配大小不能用 a 表示的对象`size_t`？换句话说，a`size_type`可以大于`size_t`吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-19T16:54:06.703

是的，这在某些情况下可能很有用。

假设您有一个程序希望访问比虚拟内存容量更大的存储空间。通过创建一个引用内存映射存储的分配器并在间接`pointer`对象时根据需要对其进行映射，您可以访问任意大量的内存。

这仍然符合 18.2:6，因为`size_t`它被定义为足够大以包含任何对象的大小，但 17.6.3.5:2 表 28 定义`size_type`为包含*分配模型中最大对象*的大小，它不必是实际对象在 C++ 内存模型中。

请注意，17.6.3.5:2 表 28 中的要求并不构成分配多个对象应导致数组的要求；因为`allocate(n)`要求是：

> `n`为类型的对象分配内存`T`

对于`deallocate`断言是：

> `n` `T`指向的区域中的所有对象`p`都应在此调用之前销毁。

注意*区域*，而不是*数组*。还有一点是17.6.3.5:4：

> 、`X::pointer`、`X::const_pointer`和类型应满足 NullablePointer (17.6.3.3) 的要求`X::void_pointer`。`X::const_void_pointer`对这些类型的构造函数、比较运算符、复制操作、移动操作或交换操作均不得通过异常退出。`X::pointer`并且`X::const_pointer`还应满足随机访问迭代器（24.2）的要求。

这里没有要求`(&*p) + n`与`p + n`.

一个可在另一个模型中表示的模型包含在外部模型中不可表示的对象是完全合法的；例如，数理逻辑中的非标准模型。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-19T16:41:51.927

`size_t`是您通过应用获得的无符号整数的类型`sizeof`。

`sizeof`应该返回作为他的参数的类型（或表达式的类型）的大小。如果是数组，它应该返回整个数组的大小。

这意味着：

*   不能有任何结构或联合大于`size_t`可以表示的内容。

*   不能有任何数组大于`size_t`可以表示的数组。

换句话说，如果某些东西适合您可以访问的最大连续内存块，那么它的大小必须适合 size_t（在不可移植但易于直观理解的术语中，这意味着在大多数系统`size_t`上`void*`， “测量”整个虚拟地址空间）。

编辑：下一句可能是错误的。见下文

因此，答案*是否有可能有一个分配器来分配大小不能用 a 表示的对象`size_t`？*没有。

编辑（附录）：

我一直在考虑它，上面我实际上是错误的。我检查了标准，似乎可以设计一个具有完全自定义指针类型的完全自定义分配器，包括对指针、const 指针、void 指针和 const void 指针使用不同的类型。因此，分配器实际上可以具有大于 size_t 的 size_type。

但要做到这一点，您实际上需要定义完全自定义的指针类型以及相应的分配器和分配器特征实例。

我说**可能**的原因是我仍然有点不清楚是否`size_type`需要跨越分配器模型中单个对象的大小或多个对象（即数组）的大小。我需要调查这个细节（但不是现在，这里是晚餐时间:)）

Edit2（新附录）：

@larsmans 我想你可能想决定无论如何要接受什么。这个问题似乎比人们直观地意识到的要复杂一些。我正在再次编辑答案，因为我的想法绝对不仅仅是评论（内容和大小）。

重新编辑（正如评论中指出的，接下来的两段不正确）：

首先`size_type`只是一个名字。您当然可以定义一个容器并添加一个`size_type`您希望的任何含义的容器。你`size_type`可以是一个浮点数，一个字符串。

在标准库容器中所说的`size_type`只是在容器中定义，以便于访问。实际上，它应该与`size_type`该容器的分配器相同（并且`size_type`分配器的 应该是该分配器`size_type`的 allotator_traits ）。

因此，我们将假设`size_type`容器的 ，即使是您定义的容器，也遵循“按惯例”相同的逻辑。@BenVoight 以“正如@AnalogFile 解释的那样，分配的内存不能大于 size_t。因此，从分配器继承其 size_type 的容器的 size_type 不能大于 size_t。”开始他的回答。事实上，我们现在规定，如果一个容器有一个`size_type`then 来自分配器（他说继承，但这当然不是类继承的常识）。

然而，他可能 100% 正确，也可能不会 100% 正确，即 a `size_type`（即使它来自分配器）必然被限制为`size_t`。真正的问题是：分配器（和相应的特征）可以定义`size_type`大于的 a`size_t`吗？

@BenVoight 和 @ecatmur 都建议使用后备存储是文件的用例。但是，如果后备存储是仅用于内容的文件，并且您在内存中有一些引用该内容的内容（我们称其为“句柄”），那么您实际上是在做一个包含句柄的容器。句柄将是某个类的实例，它将实际数据存储在文件中，并且仅将检索该数据所需的任何内容保存在内存中，但这与容器无关：容器将存储句柄，而这些句柄在内存中我们仍然在“正常”地址空间中，所以我的初始响应仍然有效。

然而，还有另一种情况。您没有分配句柄，您实际上是在文件（或数据库）中存储内容，并且您的分配器（和相关特征）定义直接管理该后备存储的指针、常量指针、无效指针、常量无效指针等类型。在这种情况下，当然，他们还需要定义`size_type`(replacing `size_t`) 和`difference_type`(replacing ptrdiff_t) 来匹配。

`size_type`将(and `difference_type`) 定义为大于`size_t`when的直接困难`size_t`已经与提供的原始整数类型的最大实现一样大（如果不是，则没有困难）与它们需要是 的事实有关`integer types`。

取决于您如何解释标准，这可能是不可能的（因为根据标准`integer types`是标准中定义的类型加上实现`extended integer types`提供的类型）或可能的（如果您解释它以便您`extended integer type`自己提供），只要您可以编写一个行为与原始类型**完全一样的类。**这在过去是不可能的（重载规则确实使原始类型始终与用户定义的类型区分开来），但我不是 100% 与 C++11 保持同步，这可能（或可能不会改变）。

但是也有间接的困难。您不仅需要为`size_type`. 您还需要提供分配器接口的其余部分。

我一直在考虑它，我看到的一个问题是`*p`根据 17.6.3.5 实施。在该`*p`语法`p`中是 a`pointer`由分配器特征键入。当然我们可以写一个类并定义一个`operator*`（空方法版本，做指针解引用）。并且有人可能认为这可以通过“分页”文件的相关部分来轻松完成（正如@ecatmur 所建议的那样）。但是有一个问题：`*p`必须是`T&`该对象的 a 。因此，对象本身必须适合内存，更重要的是，因为您可能会这样做`T &ref = *p`并无限期地保留该引用，一旦您对数据进行了分页，您将不再被允许将其分页。这意味着除非整个后备存储也可以加载到内存中，否则可能无法有效地正确实现这样的分配器。

这些是我早期的观察，似乎实际上证实了我的第一印象，即**真正的**答案是否定的：没有实际的方法可以做到这一点。

然而，正如你所看到的，事情比直觉所暗示的要复杂得多。找到一个明确的答案可能需要相当长的时间（我可能会也可能不会继续研究这个话题）。

目前我只想说：**这似乎是不可能的**。相反的陈述只有在不完全基于直觉的情况下才可以接受：发布代码并让人们辩论您的代码是否完全符合 17.6.3.5 以及您的`size_type`(which shall be greater than `size_t`even if `size_t`is as large as the maximum primitive整数类型）可以被认为是整数类型。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-19T16:48:03.667

是和不是。

正如@AnalogFile 解释的那样，分配的内存不能大于`size_t`. 因此，`size_type`从分配器继承的容器不能`size_type`大于`size_t`.

但是，您可以设计一个容器类型来表示不完全存储在可寻址内存中的集合。例如，成员可能在磁盘上或数据库中。它们甚至可以动态计算，例如斐波那契数列，并且根本不会存储在任何地方。在这种情况下，`size_type`很容易大于`size_t`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-19T16:39:26.007

我确信它被埋在某个地方的标准中，但我看到的关于[size_type](http://www.sgi.com/tech/stl/Container.html)的最佳描述来自 SGI-STL 文档。正如我所说，我确信它在标准中，如果有人能指出它，一定要这样做。

根据 SGI，容器的 size_type 是：

> 可以表示容器距离类型的任何非负值的无符号整数类型

它没有声称必须是除此之外的任何东西。理论上，您可以定义一个使用 uint64_t、unsigned char 以及介于两者之间的任何内容的容器。它引用容器的 distance_type 是我觉得有趣的部分，因为......

> distance_type：一个有符号整数类型，用于表示容器的两个迭代器之间的距离。此类型必须与迭代器的距离类型相同。

不过，这并不能真正回答问题，但有趣的是看看 size_type 和 size_t 如何不同（或可以）。关于您的问题，请参阅（并投票）@AnalogFile 的答案，因为我认为它是正确的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-19T16:48:07.533

从§18.2/6

> 该类型`size_t`是实现定义的无符号整数类型，其大小足以包含任何对象的字节大小。

因此，如果您可以分配一个大小不能由 a 表示的对象，那么`size_t`它会使实现不符合标准。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-19T16:50:37.920

要添加到“标准”答案，还请注意[stxxl](http://stxxl.sourceforge.net/)项目，该项目应该能够使用磁盘存储（可能通过扩展，网络存储）处理 TB 的数据。例如，参见[vector 的标题，](http://algo2.iti.kit.edu/stxxl/tags/1.3.1/vector_8h_source.html)`size_type`将（[第 731](http://algo2.iti.kit.edu/stxxl/tags/1.3.1/vector_8h_source.html#l00731)行和[第 742 行](http://algo2.iti.kit.edu/stxxl/trunk/vector_8h_source.html#l00742)）定义为 uint64。

这是使用比内存容量更大的容器的具体示例，或者甚至系统的整数都可以处理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-20T07:34:13.070

不必要。

我假设 size_type 是指大多数 STL 容器中的 typedef？

如果是这样，那么仅仅因为 size_type 被添加到所有容器而不是仅仅使用 size_t 意味着 STL 保留将 size_type 设置为他们喜欢的任何类型的权利。（默认情况下，在所有实现中，我都知道 size_type 是 size_t 的 typedef）。

# java - Java的反射库：查找包中的所有类

> ID：12498714
> 
> 赞同：5
> 
> 时间：2012-09-19T16:12:06.470
> 
> 标签：java, reflection

除了此处发布的问题：[您可以使用反射找到包中的所有类吗？](https://stackoverflow.com/questions/520328/can-you-find-all-classes-in-a-package-using-reflection)我开始使用 Reflections 库来查找所有子类给定类型的类。源代码如下所示，来自链接的 SO 问题的答案：

```
Reflections ref = new Reflections(new ConfigurationBuilder()
    .setScanners(new SubTypesScanner(false /* don't exclude Object.class */), new ResourcesScanner())
    .setUrls(ClasspathHelper.forPackage("org.somepackage"))
    .filterInputsBy(new FilterBuilder().include(FilterBuilder.prefix("org.somepackage"))));

ref.getSubtypesOf(Object.class); 
```

然而，在不知不觉中使用了这段代码一段时间后，我刚刚发现它只会在这个包中找到子类化另一种类型的类。它不会找到继承外部定义类的类，比如来自另一个用户定义的包。

我不确定如何使用 Reflections 库来解决这个问题。我希望所有将其包声明为“org.somepackage”的类，无论它们的超类型是什么。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T16:44:13.960

我编写了一个名为[Rebound](https://bitbucket.org/gigadot/rebound/wiki/Home)（与 Reflections 相对）的库，它搜索给定类型和包前缀的子类。如果将前缀设置为空，它将搜索类路径下的每个类，例如

```
import gigadot.exp.reflects.core.Processor;

Rebound r = new Rebound("");
Set<Class<? extends Processor>> classes = r.getSubClassesOf(Processor.class); 
```

但是您应该小心，因为在类路径中搜索所有内容是一个缓慢的过程。

该库比 Reflections 简单得多，并且可能无法执行您想要的操作。由于我在提交错误报告时感到沮丧，但没有人试图解决这个问题，我写了这篇文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-04T15:51:41.143

这样做的原因是，

```
ref.getSubtypesOf(Object.class); 
```

只返回 Object 的直接子类。如果要从扫描的包中获取所有类，则应执行以下操作：

```
Reflections ref = new Reflections(new ConfigurationBuilder().setScanners(new SubTypesScanner(false), new ResourcesScanner(), new TypeElementsScanner())
...
Set<String> typeSet = reflections.getStore().getStoreMap().get("TypeElementsScanner").keySet();
HashSet<Class<? extends Object>> classes = Sets.newHashSet(ReflectionUtils.forNames(typeSet, reflections
            .getConfiguration().getClassLoaders())); 
```

This may look a little hackish but it's the only way I found so far. Here's a little explanation of what this does: When Reflections is done with the scanning, it puts all the elements in a multi-value map. In the code example that I pasted, the results are put inside a map with the following keys:

```
SubTypesScanner, ResourcesScanner, TypeElementsScanner 
```

The ResourceScanner excludes all files ending with .class. The TypeElementsScanner is a map with a key holding the name of a class, and a value of the fields etc. So if you want to get only the class names, you basically get the key set and later on, convert it to a set if classes. The SubTypesScanner is also a map, with a key of all the super classes (including Object and interfaces) and values - the classes implementing/extending those interfaces/classes.

如果您愿意，您也可以使用 SubTypesScanner，通过迭代键集并获取所有值，但是如果某个类实现了一个接口，您将不得不处理重复的实体（因为每个类都扩展 Object）。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:21:00.633

就我而言，这段代码可以很好地加载外部 API 的类，但不确定为什么它不适用于像“java.util”这样的内置包。

```
Reflections reflections = new Reflections(new ConfigurationBuilder()
                .setScanners(new SubTypesScanner(false /* don't exclude Object.class */), new ResourcesScanner())
                .setUrls(ClasspathHelper.forClassLoader(classLoadersList.toArray(new ClassLoader[2])))
                .filterInputsBy(new FilterBuilder().include(FilterBuilder.prefix("org.reflections")))); 
```

# java - 在哪里配置 m2e 生命周期映射源目录和输出目录？

> ID：12498716
> 
> 赞同：3
> 
> 时间：2012-09-19T16:12:19.920
> 
> 标签：java, maven, plugins, m2eclipse, lifecycle

m2e 不喜欢我的 pom 部分：生命周期配置未涵盖插件执行。

## 原始 POM

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jasperreports-maven-plugin</artifactId>
            <version>1.0-beta-2</version>
            <configuration>
                <sourceFileExt>.xml</sourceFileExt>
                <sourceDirectory>${basedir}/src/main/resources/jasper</sourceDirectory>
                <outputDirectory>${basedir}/src/main/resources/jasper</outputDirectory>
            </configuration>
            <executions>
                <execution>
                    <phase>compile</phase>
                    <goals>
                        <goal>compile-reports</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

## 修改后的 POM

在这个论坛研究后，我将其更改为：

```
 <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.codehaus.mojo</groupId>
                                    <artifactId>jasperreports-maven-plugin</artifactId>
                                    <versionRange>[1.0,)</versionRange>                                     
                                    <goals>
                                        <goal>compile-reports</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <execute />
                                </action>
                            </pluginExecution>

                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement> 
```

但是，在哪里指定源目录和目标目录呢？每次我编译时，它都没有为我的 jasper-report 插件做任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:17:45.943

您遇到的错误是由于 m2e 不知道 jasper 插件，这很常见，因为 m2e v1.00 是相当新的，因此大多数插件没有连接器。我一直在做的是按照 eclipse 在 quickfix 中的建议来忽略错误。如果你这样做，你会在新代码中看到一条注释说这个变化不会影响 maven，它只会影响 m2e

除此之外，保持您的插件配置不变（您在第一个代码部分中拥有的），我假设您尝试过并且工作过
。换句话说，m2e 错误的修复不应该干扰您为插件设置的实际配置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:58:39.557

您在 M2E 配置中的版本范围对于该插件是错误的，它应该是：

```
<versionRange>[1.0-beta-2,)</versionRange> 
```

这是适用于我的插件配置（我的 .jrxml 文件位于 src/main/jasperreports 中）：

```
<properties>
    <jasperreports.version>5.0.0</jasperreports.version>
</properties>

<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>jasperreports-maven-plugin</artifactId>
    <configuration>
        <outputDirectory>${project.build.directory}/jasper</outputDirectory>
    </configuration>
    <executions>
        <execution>
            <goals>
                <goal>compile-reports</goal>
            </goals>
        </execution>
    </executions>
    <dependencies>
        <dependency>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jasperreports-maven-plugin</artifactId>
            <version>1.0-beta-2</version>
            <exclusions>
                <exclusion>
                    <groupId>net.sf.jasperreports</groupId>
                    <artifactId>jasperreports</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>net.sf.jasperreports</groupId>
            <artifactId>jasperreports</artifactId>
            <version>${jasperreports.version}</version>
        </dependency>
        <dependency>
            <groupId>com.lowagie</groupId>
            <artifactId>itext</artifactId>
            <version>4.2.0</version>
        </dependency>
    </dependencies>
</plugin> 
```

# actionscript-3 - 将子级添加到 HierarchicalCollectionView

> ID：12498719
> 
> 赞同：1
> 
> 时间：2012-09-19T16:12:23.587
> 
> 标签：actionscript-3, apache-flex, hierarchical-data

我正在尝试在 ADG 上实现延迟加载。我陷入了需要将返回的子节点添加到扩展节点的地步。

目前我正在做：

```
private function childrenloaded(data:*,item:*):void
{
    var len:int = data.length;
    for(var i=0;i<len;i++)
        (internalMainGrid.dataProvider as HierarchicalCollectionView).addChild(item, data[i]);
} 
```

这工作正常，但速度很慢。（总共 21,990 毫秒：919 条记录）有什么方法可以加快速度吗？- 喜欢直接设置孩子 例如：

```
var d:LazyHierarchicalData = (internalMainGrid.dataProvider as HierarchicalCollectionView).source as LazyHierarchicalData;
var ind:int = (d.source as RemoteCursorArray).getItemIndex(item);
(d.source as RemoteCursorArray)[ind].children = data;
(d.source as RemoteCursorArray).dispatchEvent(new CollectionEvent(CollectionEvent.COLLECTION_CHANGE)); 
```

但这并不能令人耳目一新。

欢迎任何帮助或寻求更好解决方案的方向。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:49:34.607

我也做过同样的事情。根据我的发现 - 使用 GroupingCollection(2) 和/或 SummaryRow 确实会减慢速度。更不用说在特定节点获取新数据时会重置整个树的开闭。

从烟雾测试性能来看，拉动/绘制约 2000 行大约需要 5 秒。现在每个节点的 100-200 行大约需要 1/2 秒或更短时间（不计算第一次调用 ADG 到屏幕时的初始绘制延迟）。

对我来说，我做了以下事情：

1.  扩展`HierarchicalData`以根据我每次从数据库中获取的摘要数据自定义子节点何时存在，并指定哪个属性包含要显示的子节点（如果与 children 属性不同） - 我这样做是因为我使用的模型RobotLegs MVC 平台。
2.  扩展`AdvancedDataGridGroupItemRenderer`以直观地更改披露图标（三角形图形）的颜色 - 让用户知道需要获取哪些元素与已经有数据的节点。将此分配给 groupItemRenderer 属性。
3.  使用`AdvancedDataGridEvent.ITEM_OPEN`侦听器调度包含 event.item 属性的事件，以便命令 > 服务 > 响应者在 UI 请求的确切节点处更新模型（添加到 children 属性）。
4.  将适当的添加`CollectionChangeEvent`到顶级集合（它的孩子是 ArrayCollections - 嵌套集合不绑定）
5.  在响应者声明完成后调用 dataprovider 刷新方法。

下面的伪示例：

```
//Listener on Grid:
protected function onLedgerOpenSummaryNode(event:AdvancedDataGridEvent):void 
{
    trace('LedgerMediator.onLedgerOpenSummaryNode', event.item);

    if (event.item is SummaryTransaction)
    {
        refreshed = false;
        sumTrans = event.item as SummaryTransaction;
        //note - in my service responder I add the resulting db rows to the event.item
        dispatch(new AccountEvent(AccountEvent.SUMMARY_DETAIL, null, account, event.item as SummaryTransaction));
    }
}

//Dataprovider assignment to grid
private function get dataProvider():HierarchicalCollectionView
{
    if (!groupCollection)
    {
        groupCollection = new HierarchicalCollectionView();
        groupCollection.source = new OnDemandCollection();
    }

    return groupCollection;
}

//assigns the initial source to the demand collection
private function loadTransactions():void
{
    var odc:OnDemandCollection = OnDemandCollection(dataProvider.source);
        odc.source = account.summaryTransactions.children;

    transactionChangeDetection(true);
    view.callLater(deferrDataProviderUpdate);
}

//called when the service.responder dispatches it's 'complete event'.
private function deferrDataProviderUpdate():void 
{
    if (refreshed) return;
    dataProvider.refresh(); 
}

//add change event listener to the top-level collection
private function transactionChangeDetection(add:Boolean):void
{
    var collection:ArrayCollection;
    //nested collections are not binding up the object chain, so change listeners must be added/removed to/from each collection.
    for each ( var summary:SummaryTransaction in account.summaryTransactions.collection)
    {
        collection = summary.transactions.collection;
        add ? collection.addEventListener(CollectionEvent.COLLECTION_CHANGE, onTransactionUpdate)
            : collection.removeEventListener(CollectionEvent.COLLECTION_CHANGE, onTransactionUpdate);
    }
}

//block the refresh method - only interested in add,delete,update
protected function onTransactionUpdate(event:CollectionEvent):void 
{
    if (event.kind == CollectionEventKind.REFRESH) return;
    view.callLater(deferrDataProviderUpdate);
}

public class ExtAdvancedDataGridGroupItemRenderer extends AdvancedDataGridGroupItemRenderer 
{
    private var defaultColor:ColorTransform;

    public function ExtAdvancedDataGridGroupItemRenderer() 
    {
        super();
    }

    override protected function commitProperties():void 
    {
        super.commitProperties();
        if (disclosureIcon) defaultColor = disclosureIcon.transform.colorTransform;
    }

    override protected function updateDisplayList(w:Number, h:Number):void 
    {
        super.updateDisplayList(w, h);

        if (!listData || !data) return;

        var adgld:AdvancedDataGridListData = AdvancedDataGridListData(listData);
        var adg:AdvancedDataGrid = adgld.owner as AdvancedDataGrid;
        var hcv:HierarchicalCollectionView = adg.dataProvider as HierarchicalCollectionView;
        var source:IHierarchicalData = hcv.source;

        var useDefaultColor:Boolean;
        var visible:Boolean;
        if (!data) visible = false;
        else if (!source.canHaveChildren(data)) visible = false;
        else if (source.hasChildren(data)) 
        {
            useDefaultColor = true;
            visible = true;
        }
        else
        {
            visible = true;

            var ct:ColorTransform = new ColorTransform();
                ct.color = 0xBCB383;
            disclosureIcon.transform.colorTransform = ct;
        }

        if (useDefaultColor) disclosureIcon.transform.colorTransform = defaultColor;
        disclosureIcon.visible = visible;
    }
}

public class OnDemandCollection extends HierarchicalData
{

    public function OnDemandCollection() 
    {
        super();
    }

    override public function getChildren(node:Object):Object 
    {
        if (node is SummaryGrouping) return SummaryGrouping(node).children;
        else if (node is SummaryTransaction) return SummaryTransaction(node).children;
        else if (node is Transaction) return Transaction(node).children;

        return {};
    }

    override public function canHaveChildren(node:Object):Boolean 
    {
        if (node is SummaryGrouping)
        {
            return true;
        }
        else if (node is SummaryTransaction)
        {
            var sumTran:SummaryTransaction = SummaryTransaction(node);
            return sumTran.numTransactions > 0;
        }
        else if (node is Transaction)
        {
            var tran:Transaction = Transaction(node);
            return tran.isSplit;
        }
        else if (node is Split) return false;
        else if (node.hasOwnProperty('children'))
        {
            var list:IList = node['children'] as IList;
            return list.length > 0;
        }
        else return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:17:39.543

You should dispatch a `collection_change` event from `internalMainGrid.dataProvider` to fire a change in the view or invoke a `refresh()` method (it belongs to `ICollectionView` which is implemented by `HierarchicalCollectionView` as an implementor of `IHierarchicalCollectionView`) on the same dataProvider.

# gtk - 修改 GTKAda 中按钮标签的字体大小和颜色

> ID：12498725
> 
> 赞同：1
> 
> 时间：2012-09-19T16:12:51.527
> 
> 标签：gtk, ada, gnat

任何人都知道如何在 GTKAda 中修改按钮标签的特性。

我已经尝试过使用 Pango 的包和 Style 的包和 Widget 的包，它们不会更改属性。

代码是这样的：

```
Gtk_New (Button_Select, "Select");
Modify_Font (Button_Select, From_String("Helvetica 16"));
Pack_Start (Control_Box, Button_Select, False, False, 1); 
```

但标签“选择”的特征不会改变。

任何想法或提示？

感谢您阅读并回答我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:19:56.560

我从 PHP 中的代码中找到了解决方案，我只是将命令转移到 ada，但我认为留下问题并回答它很有用。

创建按钮时，也会创建一个标签对象并将其添加到按钮中。可以得到标签对象--Get_Child--函数，然后将该标签对象作为普通标签使用。

命令如下：

```
Set_Markup(GTk_Label(Get_Child (Button_S)), "<span weight=""bold"" color=""blue"" size=""xx-large"">It Works!!</span>"); 
```

完整代码如下：

```
 with GLib;          use GLib;
    with Gtk.Window;    use Gtk.Window;
    with Gtk.Frame;     use Gtk.Frame;
    with Gtk.Button;    use Gtk.Button;
    with Gtk.Widget;    use Gtk.Widget;
    with Gtk.Label;     use Gtk.Label;
    with Pango.Font;    use Pango.Font;
    with Gtk.Handlers;
    with Gtk.Main;

    procedure button_label_test is
       Window          : Gtk_Window;
       Frame           : Gtk_Frame;
       Button_S        : Gtk_Button;

       package Handlers is new Gtk.Handlers.Callback (Gtk_Widget_Record);
       package Return_Handlers is
          new Gtk.Handlers.Return_Callback (Gtk_Widget_Record, Boolean);

       function Delete_Event (Widget : access Gtk_Widget_Record'Class)
          return Boolean is
       begin
          return False;
       end Delete_Event;

       procedure Destroy (Widget : access Gtk_Widget_Record'Class) is
       begin
          Gtk.Main.Main_Quit;
       end Destroy;

       -- This is the function to modify the characteristics of the label of the button
       procedure Clicked (Widget : access Gtk_Widget_Record'Class) is
       begin
          Set_Markup(GTk_Label(Get_Child (Button_S)), "<span weight=""bold"" color=""blue"" size=""xx-large"">It Works!!</span>");
       end Clicked;

    begin
       Gtk.Main.Init;
       Gtk.Window.Gtk_New (Window);
       Set_Default_Size (Window, 200, 200);
       Gtk.Window.Set_Title (Window, "Button Label test");
       Gtk_New (Frame);
       Gtk_New (Button_S, "Try");
       Add (Frame, Button_S);
       Add (Window, Frame);

       Return_Handlers.Connect
       (  Window,
          "delete_event",
          Return_Handlers.To_Marshaller (Delete_Event'Access)
       );
       Handlers.Connect
       (  Window,
          "destroy",
          Handlers.To_Marshaller (Destroy'Access)
       );
       Handlers.Connect
       (  Button_S,
          "clicked",
          Handlers.To_Marshaller (Clicked'Access)
       );

       Show_All (Window);
       Show (Window);

       Gtk.Main.Main;

    end button_label_test; 
```

我认为这对某人有用。

# java - 任何提高读取文件性能的方法，都比缓冲读取器好

> ID：12498731
> 
> 赞同：1
> 
> 时间：2012-09-19T16:13:06.630
> 
> 标签：java, io

我正在通过缓冲读取器机制读取日志文件，该机制占用的总执行时间以毫秒为单位：12944，请告知我如何提高性能并降低这个时间，请告知 nio 比缓冲读取器性能更好..！ ！文件大小为 10MB，因为它是一个日志文件..!! 还请告知如何用 nio 实现同样的事情..!!

```
public class BufferedRedeem
{

    public static void main(String[] args)
    {

        BufferedReader br = null;
        long startTime = System.currentTimeMillis();

        try
        {
            String sCurrentLine;
            br = new BufferedReader(new FileReader("C://abc.log"));

            while ((sCurrentLine = br.readLine()) != null)
            {

            }
            long elapsedTime = System.currentTimeMillis() - startTime;

            System.out.println("Total execution time taken in millis: " + elapsedTime);
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
        finally
        {
            try
            {
                if (br != null)
                    br.close();
            }
            catch (IOException ex)
            {
                ex.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:58:16.937

由于 OP 很想看看如何使用 NIO 来完成。

由于文件很小，很难看出差异，但可以测量。

```
public static void main(String... args) throws IOException {
    PrintWriter pw = new PrintWriter("abc.log");
    for (int i = 0; i < 100 * 1000; i++) {
        pw.println("0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789");
    }
    pw.close();

    long start2 = System.nanoTime();
    int count2 = 0;
    BufferedReader br = new BufferedReader(new FileReader("abc.log"));
    while (br.readLine() != null) count2++;
    br.close();
    long time2 = System.nanoTime() - start2;
    System.out.printf("IO: Took %,d ms to read %,d lines%n", time2 / 1000 / 1000, count2);

    long start = System.nanoTime();
    FileChannel fc = new FileInputStream("abc.log").getChannel();
    ByteBuffer bb = ByteBuffer.allocateDirect((int) fc.size());
    fc.read(bb);
    fc.close();
    bb.flip();

    CharBuffer cb = ByteBuffer.allocateDirect(bb.remaining() * 2).order(ByteOrder.nativeOrder()).asCharBuffer();
    CharsetDecoder cd = Charset.forName("UTF-8").newDecoder();
    cd.decode(bb, cb, true);
    cb.flip();
    StringBuilder sb = new StringBuilder();
    int count = 0;
    while (cb.remaining() > 0) {
        char ch = cb.get();
        if (isEndOfLine(cb, ch)) {
            // process sb
            count++;
            sb.setLength(0);
        } else {
            sb.append(ch);
        }
    }
    long time = System.nanoTime() - start;
    System.out.printf("NIO as UTF-8: Took %,d ms to read %,d lines%n", time / 1000 / 1000, count);

    long start3 = System.nanoTime();
    FileChannel fc2 = new FileInputStream("abc.log").getChannel();
    MappedByteBuffer bb2 = fc2.map(FileChannel.MapMode.READ_ONLY, 0, fc2.size());
    bb.flip();
    StringBuilder sb3 = new StringBuilder();
    int count3 = 0;
    while (bb2.remaining() > 0) {
        char ch = (char) bb2.get();
        if (isEndOfLine(bb2, ch)) {
            // process sb
            count3++;
            sb3.setLength(0);
        } else {
            sb3.append(ch);
        }
    }
    fc2.close();
    long time3 = System.nanoTime() - start3;
    System.out.printf("NIO as ISO-8859-1: Took %,d ms to read %,d lines%n", time3 / 1000 / 1000, count3);

}

private static boolean isEndOfLine(CharBuffer cb, char ch) {
    if (ch == '\r') {
        if (cb.remaining() >= 1 && cb.get() == '\n') {
            return true;
        }
        cb.position(cb.position() - 1);
        return true;
    } else if (ch == '\n') {
        return true;
    }
    return false;
}

private static boolean isEndOfLine(ByteBuffer bb, char ch) {
    if (ch == '\r') {
        if (bb.remaining() >= 1 && bb.get() == '\n') {
            return true;
        }
        bb.position(bb.position() - 1);
        return true;
    } else if (ch == '\n') {
        return true;
    }
    return false;
} 
```

打印每行 102 字节长，因此文件约为 10 MB。

```
IO: Took 112 ms to read 100,000 lines
NIO as UTF-8: Took 207 ms to read 100,000 lines
NIO as ISO-8859-1: Took 87 ms to read 100,000 lines 
```

正如我之前提到的，使用 NIO 节省 35 毫秒的额外复杂性不太值得。

顺便说一句：如果您有 HDD 并且文件不在内存中，那么只有驱动器的速度很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:19:19.030

你有一个`System.out.println(sCurrentLine);`循环内部，这通常是**非常低效的，因为它基本上涉及在***每次*调用中刷新输出。

您可以尝试将行放在 ArrayList 中而不是输出然后测量时间吗？它会以这种方式花费类似的时间吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:19:13.253

您的执行时间主要是由于`System.out.println(sCurrentLine);`. 而不仅仅是 sysout，我假设您想要进行一些处理或过滤。

如果要检查 BufferedReader 的速度，请使用计数器来计算读取的行数并打印计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T16:21:58.397

> 文件大小为 10MB，因为它是一个日志文件

然后，如果您有一台不错的计算机，一次读取整个文件应该不是问题（需要 Java 7）：

```
public static void main(String[] args) {
    try {
        long start = System.nanoTime();
        List<String> lines = Files.readAllLines(Paths.get("C:/temp/test.log"), Charset.
                forName("UTF-8"));
        System.out.println("Lines read: " + lines.size());
        System.out.println("Total execution time taken in millis: "
                + ((System.nanoTime() - start) / 1000000));
    } catch (IOException ex) {
        ex.printStackTrace();
    }
} 
```

注意：使用该方法在我的计算机上读取 6MB 文件需要 75 毫秒。

# javascript - 根据屏幕大小调整图像大小

> ID：12498737
> 
> 赞同：1
> 
> 时间：2012-09-19T16:13:10.950
> 
> 标签：javascript, css, image, jquery-mobile

我正在使用以下代码：

```
<div data-role="homepage">
    <div data-role="content">   
        <div id="selectCircle">
        <img src="res/images/zive.png" alt="Zive.sk" id="ziveCircle"><br>
        <img src="res/images/auto.png" alt="AutoMoto.sk" id="autoCircle">
        <img src="res/images/mobil.png" alt="MobilMania.sk" id="mobilCircle">
        </div>
        <!-- <a href = "feeds.html" rel="external" data-role="button">index</a> -->
    </div>
</div> 
```

和以下CSS：

```
#selectCircle{
    position:fixed;
    top: 10%;
    width: 100%;
    text-align: center;
}
#mobilCircle{
    position:absolute;
    right: 50%;
}
#autoCircle{
    position:absolute;
    left: 50%;
} 
```

当图像可以具有完整尺寸时，一切看起来都很棒。但我希望他们随着屏幕大小的变化而调整大小。因此，当我缩小浏览器窗口或在移动设备上加载代码（这不会让图像以全尺寸显示）时，图像将调整大小以适应 div 并保持它们在 div 内的位置。

**PS：**我试图显示 div 边框，它看起来像第一个图像的高度，但我希望它也包括底部的两个图像。

**编辑：**这里是图像的链接：[image1](http://imageshack.us/photo/my-images/255/zivew.png/)，[image2](http://imageshack.us/photo/my-images/341/mobil.png/)，[image3](http://imageshack.us/photo/my-images/338/autoq.png/)，这是我希望它看起来像[image](http://imageshack.us/photo/my-images/708/vandrackebuttony.png/)的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:19:50.027

使用`position: fixed`并且`position: absolute`会使响应式开发变得很痛苦。您应该尝试适应`relative`定位和`float`ing 元素。

[这是一个](http://jsfiddle.net/crowjonah/rQgEN/)我认为可以完成您所追求的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:11:21.977

尝试使用 window.innerWidth 和 window.innerHeight。结合onresize。下面的链接显示了如何实现这一目标的示例。当您知道窗口的大小后，您可以适当地更改图片的大小

链接： [http ://www.w3schools.com/jsref/prop_win_innerheight.asp](http://www.w3schools.com/jsref/prop_win_innerheight.asp)

[http://www.w3schools.com/jsref/event_onresize.asp](http://www.w3schools.com/jsref/event_onresize.asp)

# maven - Maven 内存不足构建失败

> ID：12498738
> 
> 赞同：94
> 
> 时间：2012-09-19T16:13:18.440
> 
> 标签：maven, out-of-memory, maven-3, pom.xml, maven-compiler-plugin

截至今天，我的 Maven 编译失败。

```
[INFO] [ERROR] Unexpected
[INFO] java.lang.OutOfMemoryError: Java heap space
[INFO]  at java.util.Arrays.copyOfRange(Arrays.java:2694)
[INFO]  at java.lang.String.<init>(String.java:203)
[INFO]  at java.lang.String.substring(String.java:1877) 
```

> [错误] 内存不足；要增加内存量，请在启动时使用 -Xmx 标志（java -Xmx128M ...）

截至昨天，我已经成功运行了一个 Maven 编译。

截至今天，我刚刚将堆增加到**3 GB**。另外，我只更改了 2-3 行小代码，所以我不理解这个“内存不足”错误。

```
vagrant@dev:/vagrant/workspace$ echo $MAVEN_OPTS
-Xms1024m -Xmx3000m -Dmaven.surefire.debug=-Xmx3000m 
```

编辑：我通过更改失败模块的 pom.xml 来尝试发布者的评论。但我得到了同样的 Maven 构建错误。

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
            <source>1.5</source>
            <target>1.5</target>
            <fork>true</fork>
            <meminitial>1024m</meminitial>
            <maxmem>2024m</maxmem>
       </configuration>
    </plugin> 
```

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-09-22T12:56:51.780

你在说什么样的“网络”模块？是单纯的战争，有包装式的战争吗？

如果您没有使用 Google 的网络工具包 (GWT)，则无需提供任何`gwt.extraJvmArgs`

分叉编译过程可能不是最好的主意，因为它会启动一个`MAVEN_OPTS`完全忽略的第二个过程，从而使分析更加困难。

所以我会尝试通过设置 MAVEN_OPTS 来增加 Xmx

```
export MAVEN_OPTS="-Xmx3000m" 
```

并且不要将编译器分叉到不同的进程

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
        <source>1.5</source>
        <target>1.5</target>
   </configuration>
</plugin> 
```

`-XX:MaxPermSize=512m`不应该需要增加，因为如果烫发大小是问题的原因，那么我会预料到错误`java.lang.OutOfMemoryError: PermGen space`

如果这不能解决您的问题，那么您可以通过添加来创建堆转储以进行进一步分析`-XX:+HeapDumpOnOutOfMemoryError`。此外，您可以在编译运行时使用 java bin 目录中的 jconsole.exe 连接到 jvm，并查看 jvm 堆内发生的情况。

我想到的另一个想法（可能是一个愚蠢的想法），你的机器里有足够的内存吗？定义内存大小很好，但如果您的主机只有 4GB，那么您可能会遇到 Java 无法使用定义的内存的问题，因为它已经被操作系统、Java、MS-Office...

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2016-03-14T21:50:25.640

回答晚了要提到另一个选项而不是通用[`MAVEN_OPTS`](https://maven.apache.org/configure.html)环境变量来传递给 Maven 构建所需的 JVM 选项。

从 Maven [**3.3.1**](https://issues.apache.org/jira/browse/MNG-5767)开始，您可以将`.mvn`文件夹作为相关项目的一部分，并将`jvm.config`文件作为此类选项的理想位置。

> 两个新的可选配置文件`.mvn/jvm.config`和`.mvn/maven.config`，位于项目源代码树的基目录中。如果存在，这些文件将提供默认的 jvm 和 maven 选项。因为这些文件是项目源代码树的一部分，所以它们将出现在所有项目签出中，并且每次构建项目时都会自动使用。

作为官方[发行说明的一部分](https://maven.apache.org/docs/3.3.1/release-notes.html)

> 在 Maven 中，在每个项目基础上定义 JVM 配置并不简单。基于环境变量`MAVEN_OPTS`和使用的现有机制`${user.home}/.mavenrc`是另一种选择，其缺点是不属于项目的一部分。
> 
> 从这个版本开始，您可以通过`${maven.projectBasedir}/.mvn/jvm.config`文件定义 JVM 配置，这意味着您可以在每个项目基础上定义构建选项。该文件将成为您项目的一部分，并将与您的项目一起签入。所以不再需要`MAVEN_OPTS`,`.mavenrc`文件。例如，如果您将以下 JVM 选项放入`${maven.projectBasedir}/.mvn/jvm.config`文件中：
> 
> ```
> -Xmx2048m -Xms1024m -XX:MaxPermSize=512m -Djava.awt.headless=true 
> ```

这种方法的主要优点是配置与相关项目隔离并应用于整个构建，并且比`MAVEN_OPTS`其他开发同一项目的开发人员更脆弱（忘记设置它）。
此外，如果是多模块项目，这些选项将应用于所有模块。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-01-19T06:06:22.800

我在尝试使用 Lowend 512Mb ram VPS 和良好的 CPU 编译“全新安装”时遇到了同样的问题。重复运行 OutOfMemory 并杀死脚本。

我使用`export MAVEN_OPTS="-Xmx512m -XX:MaxPermSize=350m"`并工作过。

仍然遇到其他一些编译失败，因为这是我第一次需要 Maven，但 OutOfMemory 问题已经消失。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-09-19T16:50:13.587

添加选项

```
-XX:MaxPermSize=512m 
```

到 MAVEN_OPTS

`maven-compiler-plugin`选项

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.5.1</version>
    <configuration>
      <fork>true</fork>
      <meminitial>1024m</meminitial>
      <maxmem>2024m</maxmem>
    </configuration>
  </plugin> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-11-17T13:53:27.287

```
_JAVA_OPTIONS="-Xmx3G" mvn clean install 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-03-02T12:32:03.983

我在编译 Druid.io 时遇到了同样的问题，增加 MaxDirectMemorySize 终于奏效了。

```
export MAVEN_OPTS="-Xms8g -Xmx8g -XX:MaxDirectMemorySize=4096m" 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-02-11T20:40:18.887

以下配置适用于我的情况

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>${maven-surefire-plugin.version}</version>
    <configuration>
        <verbose>true</verbose>
        <fork>true</fork>
        <argLine>-XX:MaxPermSize=500M</argLine>
    </configuration>
</plugin> 
```

尝试使用 -XX:MaxPermSize 而不是 -XX:MaxPermGen

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-09-28T14:46:15.537

你在什么类型的操作系统上运行？

为了分配超过 2GB 的内存，它需要至少是 64 位操作系统。

然后还有另一个问题。即使您的操作系统有无限的 RAM，但它是碎片化的，没有一个 2GB 的空闲块可用，您也会出现内存不足的异常。请记住，普通堆内存只是 VM 进程正在使用的内存的一部分。因此，在 32 位机器上，您可能永远无法将 Xmx 设置为 2048MB。

我还建议将 min 和 max memory 设置为相同的值，因为在这种情况下，一旦 VM 内存不足，就会从一开始就分配 1GB 的第一个时间，然后 VM 会分配一个新块（假设它随着500MB 块）在分配 1,5GB 之后，它会将所有内容从块 1 复制到新的块，然后释放内存。如果它再次用完内存，则分配 2GB，然后复制 1.5GB，临时分配 3.5GB 内存。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-07-19T06:18:09.110

在 Unix/Linux 平台上构建项目时，设置 Maven 选项语法如下。请注意，单引号，而不是双引号。

```
export MAVEN_OPTS='-Xmx512m -XX:MaxPermSize=128m' 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-23T18:39:20.473

使用 .mvn/jvm.config 对我有用，另外还有与项目链接的额外好处。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-07T20:48:06.013

当使用 cygwin 或其他 linux 模拟器（git bash）时，这发生在 Windows 上的大型项目中。巧合的是，两者都不适用于我的项目，这是一个大型开源项目。在 sh 脚本中，调用了几个 mvn 命令。内存大小增长到比 Xmx 中指定的更大的堆大小，并且大多数时间是在第二个 Windows 进程启动的情况下。这使得内存消耗更高。

这种情况下的解决方案是使用批处理文件并减小 Xmx 大小，然后 maven 操作成功。如果有兴趣我可以透露更多细节。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-08-22T09:22:28.510

有人已经提到了 32 位操作系统的问题。就我而言，问题是我正在使用 32 位 JDK 进行编译。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-07-30T07:18:57.100

增加环境变量“MAVEN_OPTS”中的内存大小将有助于解决此问题。对我来说，从 -Xmx756M 增加到 -Xmx1024M 有效。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-02-22T10:15:53.843

还需要安装 jar 文件，以便构建可以节省获取本地 jar 的内存。

在尝试了所有那些“MAVEN_OPTS”环境变量之后，下面的命令对我有用。

从项目的根文件夹在终端上运行“mvn clean install -U”。

# c# - 尝试加载页面时出错

> ID：12498739
> 
> 赞同：0
> 
> 时间：2012-09-19T16:13:22.163
> 
> 标签：c#, .net, localization

我在 .NET/C# 中有这个页面，它抛出以下错误 -

无法解析语言“en-BM”。请注意，自定义语言名称必须采用以下形式：isoLanguageCode-isoRegionCode-customName。语言代码是两个字母的 ISO 639-1，地区代码是两个字母的 ISO 3166。此外，customName 的长度不得超过 8 个字符。有效示例：en-US-East。有关要求的完整列表，请参阅：http: [//msdn2.microsoft.com/en-US/library/system.globalization.cultureandregioninfobuilder.cultureandregioninfobuilder.aspx](http://msdn2.microsoft.com/en-US/library/system.globalization.cultureandregioninfobuilder.cultureandregioninfobuilder.aspx)

我不知道这个错误是什么。它抛出代码行的错误。我能做些什么来解决这个问题或绕过它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:19:20.183

由于您机器的当前文化，您可能有一些方法失败。尝试更改适合您的当前线程文化。

```
Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("en-US"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:22:25.910

CurrentCulture 可能已设置为非标准值（即未安装在运行应用程序的机器上的文化） - 我会在您的解决方案中搜索“en-BM”并找出如果它被设置在任何地方。也许在 web.config “全球化”部分，或者在针对 Thread.CurrentThread.CurrentCulture 或 Thread.CurrentThread.CurrentUICulture 的代码中

# php - BitAuth Live 服务器错误

> ID：12498749
> 
> 赞同：2
> 
> 时间：2012-09-19T16:14:01.680
> 
> 标签：php, codeigniter, authentication

我有一个本地服务器，它连接到我的在线数据库。我一直在使用 bitAuth 作为我的身份验证方法，它工作得很好，直到我将所有文件都移到了我的服务器上。

BitAuth 带有一个默认的管理员帐户，admin(pw admin)。我尝试使用它登录，但它返回“无效的用户名/密码”。

[我看到其他人在这里](http://codeigniter.com/forums/viewthread/210884/)提到了类似的问题，但没有任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:56:52.473

自己解决了：

我首先跟踪了 BitAuth 使用的密码验证过程。

这将带您进入这段代码：

```
function CheckPassword($password, $stored_hash)
{
    $hash = $this->crypt_private($password, $stored_hash);
    if ($hash[0] == '*')
        $hash = crypt($password, $stored_hash);

    return $hash == $stored_hash;
} 
```

如果您要打印 $hash 和 $stored_hash，您会意识到这 2 个哈希是不同的。（正如预期的那样，如果它相同，那么登录就会通过）

此时，唯一可能的原因是 crypt_private() 函数产生的哈希值与存储的哈希值不同。然后我查看了 crypt_private() 函数：

```
function crypt_private($password, $setting)
{
    $output = '*0';
    if (substr($setting, 0, 2) == $output)
        $output = '*1';

    $id = substr($setting, 0, 3);
    # We use "$P$", phpBB3 uses "$H$" for the same thing
    if ($id != '$P$' && $id != '$H$')
        return $output;

    $count_log2 = strpos($this->itoa64, $setting[3]);
    if ($count_log2 < 7 || $count_log2 > 30)
        return $output;

    $count = 1 << $count_log2;

    $salt = substr($setting, 4, 8);
    if (strlen($salt) != 8)
        return $output;

    # We're kind of forced to use MD5 here since it's the only
    # cryptographic primitive available in all versions of PHP
    # currently in use.  To implement our own low-level crypto
    # in PHP would result in much worse performance and
    # consequently in lower iteration counts and hashes that are
    # quicker to crack (by non-PHP code).
    if (PHP_VERSION >= '5') {
        $hash = md5($salt . $password, TRUE);
        do {
            $hash = md5($hash . $password, TRUE);
        } while (--$count);
    } else {
        $hash = pack('H*', md5($salt . $password));
        do {
            $hash = pack('H*', md5($hash . $password));
        } while (--$count);
    }

    $output = substr($setting, 0, 12);
    $output .= $this->encode64($hash, 16);

    return $output;
} 
```

似乎没有什么不合适的。然后我想到 PHP 可以在不同版本中产生不同的哈希值。然后我联系了我的服务器支持，发现服务器使用的是 PHP5.2，而我的服务器使用的是 PHP5.4。

[解决方案](http://kb.site5.com/php/how-to-enable-php-5-3-on-your-site5-account/)很简单，我在 CodeIgniter 的 .htaccess 文件中添加了以下行，

> AddHandler 应用程序/x-httpd-php53 .php

在我的服务器中，它将启用 PHP5.3 而不是 PHP5.2。这使得 crypt_private() 函数从提供的密码字符串与存储的散列产生相同的散列。

这个问题的另一个解决方案是，基本上可以创建一个新帐户，进入您的数据库并“激活”该帐户。由于这个新的哈希是由你的服务器使用的任何版本的 PHP 生成的，它解决了这个问题。

我希望我提供的 2 个解决方案能帮助其他面临同样问题的 BitAuth 用户。

BitAuth 是一个很棒的身份验证库，只要他们将其放入文档中以使用户意识到此潜在错误即可。

再会。

# scala - 在 Scala REPL 中查找使用的隐式

> ID：12498750
> 
> 赞同：4
> 
> 时间：2012-09-19T16:14:11.323
> 
> 标签：scala, scalaz

我经常通过使用 Scalaz pimps 找到一个巧妙的解决方案。通常解决方案的工作原理是

```
import scalaz._
import Scalaz._
foobar frobnicate quux
// magic 
```

现在，我希望能够看到我实际用于添加到我`Foobar`的 frobnicate 方法中的隐式。通过这种方式，我可以进行更精细的导入并了解有关我隐式使用的工具的新知识。

> 有没有办法找出编译器实际用于编译某些表达式的隐式转换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T07:24:12.340

您还可以使用`-Xprint:typer`scalac 选项查看代码的完全扩展版本。在 sbt 项目中，可以添加一行

```
scalacOptions += "-Xprint:typer" 
```

使用命令`build.sbt`查看结果`compile`。

（取自由retronym链接的答案）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T16:15:49.063

eclipse 的 scala 插件显示了使用的隐式。一个小图标出现在使用它的行的左侧。我认为 Intellij 具有类似的功能。

# google-cloud-storage - gsutil 和大量上传

> ID：12498751
> 
> 赞同：0
> 
> 时间：2012-09-19T16:14:12.040
> 
> 标签：google-cloud-storage

我正在尝试上传一个包含数千个“小”文件（gsutil -m cp -R -q /dir/* gs://bucket_name）的大目录（1TB）。但几个小时后，我可以看到 CPU 使用率飙升至 100%，网络流量永久降至 0。似乎在 md5sum 应该不到一秒的随机文件上陷入“赶上 md5 以恢复上传”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:43:15.030

我们现在在 gsutil 版本 3.18 中修复了这个问题。你可以通过运行得到它：

gsutil 更新

如果您在应用此更新后仍有问题，请告诉我们。

# java - 将 MS SQL 2005 DB 与 Tomcat 6 一起使用时出现 Java 内存不足错误

> ID：12498752
> 
> 赞同：1
> 
> 时间：2012-09-19T16:14:11.370
> 
> 标签：java, sql-server-2005, tomcat6, out-of-memory, 32-bit

我正在开发一个使用 Tomcat 6 作为 Web 服务器的基于 Java 的 Web 应用程序。通常，我们有一个 MySQL 后端，但在少数情况下，我们需要使用 MS SQL 来为我们的客户提供服务。在执行我们对这些 MS SQL 实例之一的最新升级时，我在访问 Web 应用程序的某些页面时开始出现 java 内存不足错误。通常在返回较大的结果集时发生，但并非总是如此。

在与我的 PC 上的本地实例相同的 Web 应用程序设置中，我没有收到此错误，这让我相信这是一个环境问题。我在 Tomcat 6 配置中尝试了许多不同的 Java 设置，但没有解决问题。

环境是具有 4GB RAM 的 32 位机器。我已经为 Tomcat 6 配置了以下内容： -XX:MaxPermSize=512m -Xnoclassgc 初始内存池：1024 最大内存池：1024

我也尝试增加 MaxPermSize，但这会导致 Tomcat 无法启动。

同样，我尝试将 -Xms -Xmx 设置为每个 256m、每个 512m 等。

我的本地计算机是 64 位的，具有 4GB RAM。我已经为 Tomcat 6 配置了以下内容： -XX:MaxPermSize=512m -Xnoclassgc 初始内存池：1024 最大内存池：1024

这可能是新升级中的 SQL 语句的问题吗？我不相信这种情况，因为错误不会发生在我的本地实例上。我相信它与环境有关，但无法弄清楚问题所在。

有人有建议吗？

这是记录的错误：

```
2012-09-19 11:44:54,745 [ http-80-7] ERROR org.apache.jsp.siteManager.util.error_jsp: javax.servlet.ServletException: java.lang.OutOfMemoryError: unable to create new native thread
at org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:862)
at org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:791)
at org.apache.jsp.doc.doc.index_jsp._jspService(index_jsp.java:1106)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
at com.djinnsoft.jade.sitetree.Sitetree.forward(Sitetree.java:405)
at com.djinnsoft.jade.sitetree.Sitetree.forward(Sitetree.java:344)
at com.djinnsoft.jade.sitetree.RootServlet.service(RootServlet.java:124)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.springboard.ram.report.ReportSecurityFilter.doFilter(ReportSecurityFilter.java:70)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:555)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:861)
at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1584)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.OutOfMemoryError: unable to create new native thread
at java.lang.Thread.start0(Native Method)
at java.lang.Thread.start(Unknown Source)
at com.microsoft.sqlserver.jdbc.TimeoutTimer.start(Unknown Source)
at com.microsoft.sqlserver.jdbc.TDSCommand.startResponse(Unknown Source)
at com.microsoft.sqlserver.jdbc.SQLServerStatement.doExecuteStatement(Unknown Source)
at com.microsoft.sqlserver.jdbc.SQLServerStatement$StmtExecCmd.doExecute(Unknown Source)
at com.microsoft.sqlserver.jdbc.TDSCommand.execute(Unknown Source)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(Unknown Source)
at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(Unknown Source)
at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(Unknown Source)
at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeQuery(Unknown Source)
at org.apache.tomcat.dbcp.dbcp.DelegatingStatement.executeQuery(DelegatingStatement.java:208)
at org.apache.tomcat.dbcp.dbcp.DelegatingStatement.executeQuery(DelegatingStatement.java:208)
at com.djinnsoft.jade.data.record.SQLUtil.ExecuteQuery(SQLUtil.java:236)
at com.djinnsoft.jade.data.record.SQLUtil.ExecuteQuery(SQLUtil.java:207)
at com.djinnsoft.jade.data.record.RecordSource.find(RecordSource.java:184)
at com.djinnsoft.jade.data.record.RecordSource.find(RecordSource.java:148)
at com.djinnsoft.jade.content.data.DatabaseContentSource.createVersions(DatabaseContentSource.java:804)
at com.djinnsoft.jade.content.data.DatabaseContentSource.access$2900(DatabaseContentSource.java:42)
at com.djinnsoft.jade.content.data.DatabaseContentSource$8.process(DatabaseContentSource.java:747)
at com.djinnsoft.jade.data.record.SQLEnvironment.execute(SQLEnvironment.java:70)
at com.djinnsoft.jade.content.data.DatabaseContentSource.findImpl(DatabaseContentSource.java:672)
at com.djinnsoft.jade.content.GenericContentSource.findImpl(GenericContentSource.java:1077)
at com.djinnsoft.jade.content.GenericContentSource.find(GenericContentSource.java:1186)
at com.djinnsoft.jade.content.GenericContentSource.find(GenericContentSource.java:1200)
at com.djinnsoft.jade.content.GenericContentSource.find(GenericContentSource.java:1025)
at com.djinnsoft.jade.content.taglib.ContentBaseTag.findItem(ContentBaseTag.java:166)
at com.djinnsoft.jade.content.taglib.ContentTag.doStartTag(ContentTag.java:500)
at org.apache.jsp.doc.doc.index_jsp._jspx_meth_content_005faction_005f12(index_jsp.java:7637)
at org.apache.jsp.doc.doc.index_jsp._jspx_meth_c_005fforEach_005f6(index_jsp.java:6299)
at org.apache.jsp.doc.doc.index_jsp._jspx_meth_c_005fotherwise_005f3(index_jsp.java:4816)
at org.apache.jsp.doc.doc.index_jsp._jspx_meth_c_005fchoose_005f3(index_jsp.java:4395)
at org.apache.jsp.doc.doc.index_jsp._jspx_meth_c_005fotherwise_005f2(index_jsp.java:4363)
at org.apache.jsp.doc.doc.index_jsp._jspx_meth_c_005fchoose_005f2(index_jsp.java:4278)
at org.apache.jsp.doc.doc.index_jsp._jspx_meth_forms_005fpopulateResult_005f0(index_jsp.java:4244)
at org.apache.jsp.doc.doc.index_jsp._jspService(index_jsp.java:961)
... 32 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:26:05.600

> 2012-09-19 11:44:54,745 [http-80-7] 错误 org.apache.jsp.siteManager.util.error_jsp: javax.servlet.ServletException: java.lang.OutOfMemoryError: 无法创建新的本地线程

这通常表明您在本机内存中而不是 Java 堆中获得了 OOM。这意味着操作系统无法分配线程。
这可能意味着：

*   您运行的线程过多并且超出了某些操作系统限制（您使用的是 64 位机器，其线程限制与 32 位机器不同）或

*   您的一个线程在初始化时使用了太多内存并崩溃（我无法更准确地描述这一点）。

您说您无法重现此内容，但这可能是因为您没有 Web 服务器的负载才能在本地重现此内容吗？我的意思是也许在部署的服务器实例中负载太重，并发请求太多（*应用程序*线程太多？），这导致了崩溃？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:12:08.693

OK, so, I found the solution to the problem. In our new version of the web app, there is a context parameter that limits the display size of the results sets and paginates them at that limit. As I said earlier, this issue only seemed to be happening on larger result sets. The default setting for MySQL backends is 500, but apparently the MS SQL backend needs this to be set much lower. Setting it to 20 eliminated the out of memory errors. Thanks to all who offered advice. It was greatly appreciated.

# html - 字体大小是否有不可见的填充/边距？

> ID：12498757
> 
> 赞同：7
> 
> 时间：2012-09-19T16:14:36.193
> 
> 标签：html, css, font-size

我很难理解 font-size 在以下 html 片段中是如何工作的：

```
.container {
    padding: 20px;
}

ul {
    margin: 0;
    padding: 0;
    list-style-type: none;
}

ul li {
    margin: 0;
    padding: 0;
    background: blue;
    height: 50px;
    line-height: 50px;
    color: white;
}

ul li span {
    border: 1px solid red;
    margin: 0;
    padding: 0;
}

#test1 li {
    font-size: 48px;
}

#test2 li {
    font-size: 42px;
}​

<div class="container">
    <ul id="test1">
        <li><span>Test</span></li>        
    </ul>
</div>

<div class="container">
    <ul id="test2">
        <li><span>Test</span></li>
    </ul>
</div>​ 
```

我希望我的`li`元素正好是 50 像素高，并且我希望文本/跨度在其中垂直居中。一切都是垂直的，但是当我将 font-size 设置为 48px 并带有 2px 红色边框时，边框被推到了 li 元素之外。似乎应用了不可见的填充/边距。

这是一个展示“问题”的jsfiddle：http: [//jsfiddle.net/qtVK3/](http://jsfiddle.net/qtVK3/)

当我`span`在 Chrome 中检查元素时，它显示 span 元素的实际高度为 57px。额外的 7px 是从哪里来的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:30:39.957

```
display: inline-block 
```

在 span 中是必需的，因为它是一个内联元素。默认情况下，您不能只在左侧和右侧向内联元素添加顶部或底部填充。因此，即使您将填充设置为 0，跨度也会被填充。

您还需要将行高更改为 48px。

> 行高：48px；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:18:17.503

你错过了 line-height （分隔多行文本的空间） - 这被添加到字体的高度。

您应该将包含元素的高度设置为所需的大小，而不是以像素为单位显式设置字体大小（不利于可访问性）

编辑：我很厚。边距/边框被添加到内容框之外。您已将 line-height 设置为 50px，因此边框将在 50px 之外，因此出现在元素之外。

我关于以像素设置字体的评论仍然存在。

# python - 在 AppEngine (BlobInfo) 上发送带附件的电子邮件

> ID：12498759
> 
> 赞同：2
> 
> 时间：2012-09-19T16:14:40.483
> 
> 标签：python, google-app-engine, blobstore

我刚刚在 AppEngine 上上传了这个 - 尝试发送带有附件 (blobinfo) 的电子邮件。这将返回一个空白页 - 没有错误消息。当我遗漏附件时，电子邮件被发送，当我包含它时，电子邮件永远不会到达，但再次：没有错误消息。

我什至可以将 BlobInfo 作为附件 (=Bytestring) 发送吗？如果没有，我该如何翻译？

提前致谢 ：）

```
 dataset = ""
for i in range(len(newer_table)):
  for j in range(len(newer_table[i])):
    dataset = dataset + str(newer_table[i][j]) + ','
  dataset += '\n'

file_name = files.blobstore.create(mime_type='text/comma-separated-values', _blobinfo_uploaded_filename='test')
with files.open(file_name, 'a') as f:
  f.write(dataset)
files.finalize(file_name)
blob_key = files.blobstore.get_blob_key(file_name)
blob_info = blobstore.BlobInfo.get(blob_key)
blob_reader = blobstore.BlobReader(blob_key)

#self.response.out.write(blob_reader.read())

user_address = "test@googlemail.com"
sender_address = "Test <test@googlemail.com>"
subject = "Test"
body = "Test"
mail.send_mail(sender_address, user_address, subject, body, attachments=[blob_info.filename, blob_reader.read()]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:42:13.977

您必须阅读附件才能将其作为附件发送：

```
blob_reader = blobstore.BlobReader(blob_key)
...
mail.send_mail(sender_address, user_address, subject, body, attachments=[blob_info.filename,blob_reader.read()]) 
```

顺便一提。我更喜欢使用 Amazon SES 从 GAE 发送邮件，因为 GAE 邮件 API 不提供有关邮件传递的任何信息。

这是我用来发送邮件的代码：

```
 message = mail.EmailMessage(sender = 'noreply@....', subject = 'CSV')
    message.to = 'john@example.com'
    message.body = 'Download attached CSV'
    message.attachments = [blob_info.filename,blob_reader.read()]
    message.send() 
```

# javascript - 将主干视图绑定到 html 已经渲染器

> ID：12498761
> 
> 赞同：5
> 
> 时间：2012-09-19T16:14:50.047
> 
> 标签：javascript, backbone.js

有没有一种奇特的方式将视图绑定到页面中已经呈现器的 html？

例如，您的服务器加载所有页面 html，然后在第一次加载页面时不使用 render 方法在该 html 之上加载视图。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T18:40:28.947

我做了一些类似于我认为你正在尝试做的事情。就我而言，我在现有表单之上添加了 Backbone 功能。这是一个精简的示例：

现有的 HTML：

```
<div id="my-app">
  <form name="input" action="html_form_action.asp" method="get">
    Username: <input type="text" name="user" id="username" />
    <input type="submit" value="Submit" />
  </form> 
</div> 
```

骨干：

```
var MyFormView = Backbone.View.extend({
  events: {
    "submit form": "formHandler"
  },
  formHandler: function(evt) {
    evt.preventDefault();
    var nameVal = $('#username').val();
    this.$el.append('<p>hello: ' + nameVal + '</p>');
  }
});

$().ready(function(){
  var myForm = new MyFormView({el: "#my-app"});
}); 
```

关键是在创建视图时将现有的 html 作为“el”属性传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:06:25.123

我不确定您所说的*花哨*方法是什么意思，但是您的视图不需要自己`html`渲染`el`。您只需将视图分配给它的[el](http://documentcloud.github.com/backbone/#View-el)即可轻松地将视图附加到页面上的现有元素。如果您想稍后分配您的视图的 el （假设您想“*切换*” its `el`），那么您可以使用[setElement](http://documentcloud.github.com/backbone/#View-setElement)方法来执行此操作。使用`setElement`还将创建缓存`$el`并移动任何绑定事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:01:31.367

我不确定您目前正在做什么，但我制作了一个仅使用主干视图的 JSFiddle - 无需担心模型、集合或路由器。

您可以尝试一下，看看主页面视图是如何加载到其容器中的。

这是小提琴：http: [//jsfiddle.net/phillipkregg/tVmTM/71/](http://jsfiddle.net/phillipkregg/tVmTM/71/)

# math - 收敛到 2 个不同的值

> ID：12498762
> 
> 赞同：1
> 
> 时间：2012-09-19T16:14:55.303
> 
> 标签：math, coffeescript, numerical-methods, numerical-analysis

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T05:26:25.960

如果以下 2 个表达式不相同，
则 acos ((x2 - l2 * Math.cos theta2) / l1) 看起来是正确的，而不是 acos (x2 - l2 * Math.cos theta2) / l1 。

也适用于其他 3 个表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:51:44.557

您可以将您的方法分析为一种定点方法。定点方法是这样一种方法

```
v_{n+1} = f(v_{n}) 
```

在你的情况下

```
v = (θ₁,θ₂) 
```

你重新排列了你的方程，这样

```
f(v) = (acos(x₂ - l₂*cos(θ₂))/l₁, acos(y₂ - l₁*cos(θ₁))/l₂) 
```

...或多或少。当您在第二次计算中使用已更新的变量时，就像您从另一个开始一样`v0`，其中第二个计算变量“领先一步”另一个。在第一种情况下，您的起始位置是`(0,acos(y₂ - l₁)/l₂)`，而在第二种情况下，您的起始位置是`(acos(x₂ - l₂)/l₁, 0)`。尽管您在 post-post-scriptum 中说了些什么，但这是一个收敛到具有不同初始值的不同根的情况。

很难说明为什么会发生这种情况。根的吸引力盆地可能有一个奇怪的边界，如Wikipedia中的[Newton-Raphson页面所示。](http://en.wikipedia.org/wiki/Newton-Raphson#Basins_of_attraction)您可以尝试绘制盆地，在 (θ₁,θ₂) 域中选择许多初始起点，并根据它们会聚的位置绘制不同颜色的像素。

# hibernate - how to configure ApacheSolr with spring mvc?

> ID：12498763
> 
> 赞同：3
> 
> 时间：2012-09-19T16:14:57.733
> 
> 标签：hibernate, spring-mvc, solr

I am using Spring MVC for my project and would like to use Apache Solr to perform the database search. Could anybody guide me how to configure Apche Solr with Spring or can i use hibernate search? or any better approach.

Thanks & Regards Vijay

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T23:38:49.293

我没有使用过 Hibernate 搜索，所以无法发表评论，但我已经编写了许多使用 SOLR 的 Spring MVC webapps。

有很多方法可以集成 SOLR...

*   您可以运行一个独立的 SOLR 实例，然后使用[AJAX 方法](https://github.com/evolvingweb/ajax-solr)来构建您的搜索页面。
*   您可以编写一个简单的 Java `Service`，通过其 REST Web 服务接口调用 SOLR（例如，使用 Spring 的[`RestTemplate`](http://blog.springsource.org/2009/03/27/rest-in-spring-3-resttemplate/)- JSON 输出更容易编组）。
*   或者您可以使用更原生的方法并使用[SolrJ](http://wiki.apache.org/solr/Solrj)实现服务/DAO 。

我使用了最后提到的两种方法……Webservices 更容易启动和运行，但 SolrJ 更强大。我还使用了带有 SolrJ 的嵌入式 SOLR，它简化了部署，因为只有一个 war 文件需要部署和管理。

# php - Delete XML Node if empty?

> ID：12498765
> 
> 赞同：0
> 
> 时间：2012-09-19T16:15:07.297
> 
> 标签：php, xml

I'm trying to figure out how to delete a bunch of nodes if they are empty. I have tried this but with no luck:

```
 $xml = new DOMDocument();
    $xml->preserveWhiteSpace = false;
    $xml->formatOutput = true;
    $xml->loadXML('<library>
      <invites>
        <invite>
          <username>0</username>
          <userid>0</userid>
        </invite>
      </invites>
      <invites/>
      <invites/>
      <invites/>
      <invites/>
      <invites/>
      <invites/>
    </library>');

    echo "<xmp>OLD \n". $xml->saveXML() ."</xmp>";

    $opNodes = $xml->getElementsByTagName('invites');
    foreach($opNodes as $node) {
        $innerHtml = trim($node->nodeValue);
        if(empty($innerHtml)){
            $node->parentNode->removeChild($node);
        }
    }

    echo "<xmp>NEW \n". $xml->saveXML() ."</xmp>"; 
```

This only removes some of the , Why?... Please help and thanks in advance :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:03:55.577

看起来修改 DOM 会影响 DOMNodeList ( `$opNodes`) 的内容并在迭代时导致一些问题。要解决此问题，请将要删除的节点保存在单独的列表中，然后一次将它们全部删除：

```
$opNodes = $xml->getElementsByTagName('invites');
$remove = array();

foreach ($opNodes as $node) {
    if (!$node->hasChildNodes()) {
        $remove[] = $node;
    }
}

foreach ($remove as $node) {
    $node->parentNode->removeChild($node);
} 
```

# servlets - Can I use ESAPI framework with Servlet 3.0?

> ID：12498767
> 
> 赞同：2
> 
> 时间：2012-09-19T16:15:20.453
> 
> 标签：servlets, esapi

I wanted to upgrade from Servlet 2.4 to Servlet 3.0\. Currently we are using ESAPI in our application and would like to upgrade. Latest ESAPI release depends on servlet-api-2.4.jar. Does ESAPI support Servlet 3.0?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:36:20.790

我升级了我的应用程序以支持 Servlet 3.0 并且 ESAPI 似乎可以工作。所以它是向后兼容的。

# ascii - event.which value 'incorrect'

> ID：12498769
> 
> 赞同：0
> 
> 时间：2012-09-19T16:15:35.193
> 
> 标签：ascii, jquery, keypress, keycode

I get the "incorrect" value for event.which in chrome. for example:

```
$(document).keypress(function (e) {
    alert(String.fromCharCode(e.which));
    alert(e.which);
}); 
```

this code produces two alerts when I press the numpad '+' key, first says k, second says 107. I want the first one to say + and the second, well the second doesn't matter too much, all I care about is getting the + symbol when typing the + key. Same for all mathematical operators, I am writing a calculator and need those symbols correct for the input elements. How do I do it?

---- WORKING ---- I must have done something wrong before, now it works great...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:50:23.570

尝试改用 .keydown ，我之前在 chrome 中的按键行为方面遇到了一些问题，当我使用 keydown 时得到了解决

# python - 在 Google App Engine 中使用嵌套 AND/OR 进行祖先查询

> ID：12498770
> 
> 赞同：1
> 
> 时间：2012-09-19T16:15:38.687
> 
> 标签：python, google-app-engine, google-cloud-datastore, app-engine-ndb

我正在使用 Google App Engine NDB，并尝试执行以下查询：

```
query = Club.query(ndb.OR(
ndb.AND(Club.memberIds == userId, Club.modifiedDate > date), 
ndb.AND(Club.activityDate > date, ancestor = userKey)
)) 
```

但是，我得到一个运行时错误：

```
TypeError: __new__() got an unexpected keyword argument 'ancestor' 
```

这与祖先的地位有关。[该答案](https://stackoverflow.com/a/12267140/458960)能够在一种情况下指出解决方案，但该解决方案不适用于此处，因为祖先位于实际的 AND 子句中。

1.  如何重新格式化此查询以使其正常工作？
2.  这个查询是个坏主意吗？是不是太复杂了？由于它的复杂性，它会花费我比平时更多的阅读费用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:36:43.557

是否可以重写查询以使用 GQL？

**编辑**

否决我自己的建议。无法重写查询以使用 GQL。GQL 不支持`OR`.

请参阅：[https ://developers.google.com/appengine/docs/python/datastore/gqlreference](https://developers.google.com/appengine/docs/python/datastore/gqlreference)

**建议** 如果您还将祖先对象修改为模型属性，则可以执行您想要的查询。例如

```
class Club(ndb.Model):
    parent = ndb.KeyProperty() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:09:09.027

您不能将祖先用作过滤器的一部分；它必须是直接在 query() 调用上的关键字参数。目前，OR 查询无论如何都会变成多个查询，因此 OR() 方法给您的唯一好处是更容易组合结果。但是为了让它工作，无论如何你都必须按键排序，编写一个小的合并函数来合并两组按键排序的查询结果是微不足道的。（也可以通过调用 ndb.query._MultiQuery() 来完成此操作，但后者不是记录在案的 API，而且很难正确处理，因此最好自己执行此操作。）

# jquery - 使用 1.7.1 添加新数据后 jquery 无法正常工作？

> ID：12498775
> 
> 赞同：-1
> 
> 时间：2012-09-19T16:15:57.563
> 
> 标签：jquery

我目前正在将我的现场活动转换为在 jquery 1.7+ 上使用。

我只是像这样将**live**更改为**on**：

前：

```
$('.commentopen').live('click', function() {

    var ID = $(this).attr("id");

    $("#commentbox"+ID).slideToggle('fast');
    return false;
}); 
```

后：

```
$('.commentopen').on('click', function() {

    var ID = $(this).attr("id");

    $("#commentbox"+ID).slideToggle('fast');
    return false;
}); 
```

**on**在页面加载后有效，但在我动态添加新数据后无法触发。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:17:02.620

您仍然需要使用委托

```
$(document).on('click', '.commentopen', function() { 
```

# php - 变量中的 PHP 命名空间类

> ID：12498780
> 
> 赞同：0
> 
> 时间：2012-09-19T16:16:16.817
> 
> 标签：php, namespaces

谁能解释为什么下面的代码会导致“找不到类”错误？使用完全限定名称实例化类是可行的，但会消除“use”语句的优势。

```
<?php

namespace
{
    use Foo\Bar;

    new Bar;    // Works

    $class = 'Foo\Bar'; 

    new $class; // Works

    $class = 'Bar';

    new $class; // "Cannot find class" error
}

namespace Foo
{
    class Bar {}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:23:03.883

好吧，我想这实际上是一个[功能](http://php.net/manual/en/language.namespaces.importing.php)。出于同样的原因，别名在这里也无济于事：

> 导入是在编译时执行的，因此不会影响动态类、函数或常量名称。[...]

```
<?php 
use My\Full\Classname as Another, My\Full\NSname;

$obj = new Another; // instantiates object of class My\Full\Classname
$a = 'Another'; 
$obj = new $a;      // instantiates object of class Another 
?> 
```

是的，它有点违背了`use`动态类的目的。

# objective-c - 子视图（MPMoviePlayerController）不使用容器视图进行动画处理

> ID：12498785
> 
> 赞同：0
> 
> 时间：2012-09-19T16:16:38.577
> 
> 标签：objective-c, ios, uiview, mpmovieplayercontroller

我正在向`MPMoviePlayerController`容器视图中添加一个，如下所示：

```
self.moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:self.videoURL];
. . .
self.moviePlayer.view.frame = self.frame;
[self addSubview:self.moviePlayer.view]; 
```

这`self`是容器视图。此容器视图在由视图控制器创建时在屏幕外实例化。所以容器视图驻留在视图中，而`MPMoviePlayerController`容器视图驻留在容器视图中。

当我在屏幕上为容器视图设置动画时，它可以工作。其他视图滑出，此视图滑入。但是，`MPMoviePlayerController`其框架保持在屏幕外。因此`MPMoviePlayerController`的容器视图在屏幕上移动，但它不会随其容器视图一起移动。这是不允许的，还是我错过了什么？动画容器视图的代码如下：

```
[UIView animateWithDuration:ANIMATION_LENGTH animations:^() {
    for(int i = beginTag; i < beginTag + [self subviews].count; i++) {
        UIView *viewPointer = [self viewWithTag:i];
        CGRect viewFrame = viewPointer.frame;
        viewFrame.origin.x -= SCREEN_WIDTH_VC;
        viewPointer.frame = viewFrame;
    }
} completion:^(BOOL finished) {
    [self.vidLoad playVideo];
}]; 
```

这会处理屏幕上的动画元素，然后将屏幕外的元素带到屏幕上。我很高兴听到所有的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:59:06.120

解决了 - 这是我自己愚蠢的结果。视图层次结构确实有效，但是当我分配`self.frame`给时`moviePlayer.view.frame`，它采用了容器视图的绝对坐标，而不是相对坐标。

一个愚蠢的错误。基本上，我只需要写

```
self.moviePlayer.view.frame = CGRectMake(0, 0, SCREEN_WIDTH_VC, SCREEN_HEIGHT_VC); 
```

这会将其放置在容器视图的顶部，因为这些坐标是相对于该容器视图而不是屏幕（我只是自己弄糊涂了）。

# javascript - 淘汰赛：2 个嵌套的 foreach 在带有 $data 的 IE 中无法正常工作

> ID：12498786
> 
> 赞同：0
> 
> 时间：2012-09-19T16:16:39.953
> 
> 标签：javascript, knockout.js

我正在使用 Knockout.js 2.1.0 和 jQuery 1.8。
我有 2 个嵌套的 foreach，这在 Chrome 和 Firefox 中运行良好，但在 IE 中却不行（在 8 和 9 中测试）。
在 IE 中，第二个嵌套 foreach 中的 $data 仍然对应于父 foreach。

这是我的看法：

```
<!-- ko foreach: dropdowns -->
    <select>
        <option data-bind="text: title, value: title"></option>
        <!-- ko foreach: values -->
            <option data-bind="text: $data, value: $data"></option>
        <!-- /ko -->
    </select>
<!-- /ko --> 
```

还有 JavaScript：​</p>

```
var viewModel = {
    dropdowns: [
        {
            title: "Dropdown 1",
            values: ["value 1.1", "value 1.2", "value 1.3"]
        },
            {
            title: "Dropdown 2",
            values: ["value 2.1", "value 2.2", "value 2.3"]
        },
        {
            title: "Dropdown 3",
            values: ["value 3.1", "value 3.2", "value 3.3"]
        }
    ]
}

ko.applyBindings(viewModel); 
```

我做了一个 jsfiddle 来测试这个问题：http: [//jsfiddle.net/2ebDt/](http://jsfiddle.net/2ebDt/)

这是一个错误还是我做错了什么？
谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:52:24.940

IE 去除选择标签内的注释。对于您的方案，您可能需要考虑使用`optionsCaption`with`options`绑定。它看起来像：http: [//jsfiddle.net/rniemeyer/2ebDt/1/](http://jsfiddle.net/rniemeyer/2ebDt/1/)

```
<!-- ko foreach: dropdowns -->
    <select data-bind="options: values, optionsCaption: title">
    </select>
<!-- /ko -->​ 
```

唯一的区别是标题没有`value`设置为`title`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:50:10.000

这就是我的[`repeat`](https://github.com/mbest/knockout-repeat)绑定有用的地方。这是您使用的示例：http `repeat`: [//jsfiddle.net/mbest/2ebDt/2/](http://jsfiddle.net/mbest/2ebDt/2/)

# html - 自定义 HTML 标签

> ID：12498788
> 
> 赞同：-3
> 
> 时间：2012-09-19T16:16:48.323
> 
> 标签：html, css, tags

当我想在一个 div 中显示许多不同外观的文本时，我尝试创建一个自定义标签。这是为了避免必须为每个文本样式创建一个新的 id。这是你经常做的事情吗？我还注意到它在 Chrome 和 FX 中都能正常工作，但在 IE 中这种风格消失了。有没有办法在 IE 中使用自定义标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:02:28.197

```
<script>
document.write ("custom tag1");
document.write ("custom tag2");
....
document.write ("custom tagn");
</script> 
```

# restler - 无论有没有 Index.php，总是找不到 Restler 返回

> ID：12498792
> 
> 赞同：0
> 
> 时间：2012-09-19T16:16:59.090
> 
> 标签：restler

我目前正在编写一个 iOS 应用程序，它使用 RestKit 与我在 restler 中编写的 Api 对话，该 API 位于 Api.guessthedistance.com。

目前，Restler 中的所有示例都没有与我的 API 一起工作，它们都只返回 404 错误。我试过重写 .htaccess 文件和 apache conf 文件，但没有运气。

我将如何解决这个问题？

Apache 配置文件

```
### Section 2: 'Main' server configuration
#
# The directives in this section set up the values used by the 'main'
# server, which responds to any requests that aren't handled by a
# <VirtualHost> definition.  These values also provide defaults for
# any <VirtualHost> containers you may define later in the file.
#
# All of these directives may appear inside <VirtualHost> containers,
# in which case these default settings will be overridden for the
# virtual host being defined.
#

#
# ServerAdmin: Your address, where problems with the server should be
# e-mailed.  This address appears on some server-generated pages, such
# as error documents.  e.g. admin@your-domain.com
#
ServerAdmin james@nyxdigital.com

#
# ServerName gives the name and port that the server uses to identify itself.
# This can often be determined automatically, but we recommend you specify
# it explicitly to prevent problems during startup.
#
# If this is not set to valid DNS name for your host, server-generated
# redirections will not work.  See also the UseCanonicalName directive.
#
# If your host doesn't have a registered DNS name, enter its IP address here.
# You will have to access it by its address anyway, and this will make 
# redirections work in a sensible way.
#
ServerName 5.79.26.206:80

#
# UseCanonicalName: Determines how Apache constructs self-referencing 
# URLs and the SERVER_NAME and SERVER_PORT variables.
# When set "Off", Apache will use the Hostname and Port supplied
# by the client.  When set "On", Apache will use the value of the
# ServerName directive.
#
UseCanonicalName Off

#
# DocumentRoot: The directory out of which you will serve your
# documents. By default, all requests are taken from this directory, but
# symbolic links and aliases may be used to point to other locations.
#
DocumentRoot "/var/www/html"

#
# Each directory to which Apache has access can be configured with respect
# to which services and features are allowed and/or disabled in that
# directory (and its subdirectories). 
#
# First, we configure the "default" to be a very restrictive set of 
# features.  
#
<Directory />
AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css application/x-javascript
Options FollowSymLinks SymLinksIfOwnerMatch
AllowOverride None
</Directory>

#
# Note that from this point forward you must specifically allow
# particular features to be enabled - so if something's not working as
# you might expect, make sure that you have specifically enabled it
# below.
#

#
# This should be changed to whatever you set DocumentRoot to.
#
<Directory "/var/www/sites">

#
# Possible values for the Options directive are "None", "All",
# or any combination of:
#   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
#
# Note that "MultiViews" must be named *explicitly* --- "Options All"
# doesn't give it to you.
#
# The Options directive is both complicated and important.  Please see
# http://httpd.apache.org/docs/2.2/mod/core.html#options
# for more information.
#
    Options Indexes FollowSymLinks ExecCGI

#
# AllowOverride controls what directives may be placed in .htaccess files.
# It can be "All", "None", or any combination of the keywords:
#   Options FileInfo AuthConfig Limit
#
    AllowOverride All

#
# Controls who can get stuff from this server.
#
    Order allow,deny
    Allow from all

</Directory>

#
# UserDir: The name of the directory that is appended onto a user's home
# directory if a ~user request is received.
#
# The path to the end user account 'public_html' directory must be
# accessible to the webserver userid.  This usually means that ~userid
# must have permissions of 711, ~userid/public_html must have permissions
# of 755, and documents contained therein must be world-readable.
# Otherwise, the client will only receive a "403 Forbidden" message.
#
# See also: http://httpd.apache.org/docs/misc/FAQ.html#forbidden
#
<IfModule mod_userdir.c>
    #
    # UserDir is disabled by default since it can confirm the presence
    # of a username on the system (depending on home directory
    # permissions).
    #
    UserDir disable

    #
    # To enable requests to /~user/ to serve the user's public_html
    # directory, remove the "UserDir disable" line above, and uncomment
    # the following line instead:
    # 
    #UserDir public_html

</IfModule>

#
# Control access to UserDir directories.  The following is an example
# for a site where these directories are restricted to read-only.
#
#<Directory /home/*/public_html>
#    AllowOverride FileInfo AuthConfig Limit
#    Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec
#    <Limit GET POST OPTIONS>
#        Order allow,deny
#        Allow from all
#    </Limit>
#    <LimitExcept GET POST OPTIONS>
#        Order deny,allow
#        Deny from all
#    </LimitExcept>
#</Directory>

#
# DirectoryIndex: sets the file that Apache will serve if a directory
# is requested.
#
# The index.html.var file (a type-map) is used to deliver content-
# negotiated documents.  The MultiViews Option can be used for the 
# same purpose, but it is much slower.
#
DirectoryIndex index.php index.html index.htm index.shtml index.php4 index.php3 index.phtml index.cgi

#
# AccessFileName: The name of the file to look for in each directory
# for additional configuration directives.  See also the AllowOverride
# directive.
#
AccessFileName .htaccess

#
# The following lines prevent .htaccess and .htpasswd files from being 
# viewed by Web clients. 
#
<Files ~ "^\.ht">
    Order allow,deny
    Deny from all
</Files>

#
# TypesConfig describes where the mime.types file (or equivalent) is
# to be found.
#
TypesConfig /etc/mime.types

#
# DefaultType is the default MIME type the server will use for a document
# if it cannot otherwise determine one, such as from filename extensions.
# If your server contains mostly text or HTML documents, "text/plain" is
# a good value.  If most of your content is binary, such as applications
# or images, you may want to use "application/octet-stream" instead to
# keep browsers from trying to display binary files as though they are
# text.
#
DefaultType text/plain

#
# The mod_mime_magic module allows the server to use various hints from the
# contents of the file itself to determine its type.  The MIMEMagicFile
# directive tells the module where the hint definitions are located.
#
<IfModule mod_mime_magic.c>
#   MIMEMagicFile /usr/share/magic.mime
    MIMEMagicFile conf/magic
</IfModule>

#
# HostnameLookups: Log the names of clients or just their IP addresses
# e.g., www.apache.org (on) or 204.62.129.132 (off).
# The default is off because it'd be overall better for the net if people
# had to knowingly turn this feature on, since enabling it means that
# each client request will result in AT LEAST one lookup request to the
# nameserver.
#
HostnameLookups Off

#
# EnableMMAP: Control whether memory-mapping is used to deliver
# files (assuming that the underlying OS supports it).
# The default is on; turn this off if you serve from NFS-mounted 
# filesystems.  On some systems, turning it off (regardless of
# filesystem) can improve performance; for details, please see
# http://httpd.apache.org/docs/2.2/mod/core.html#enablemmap
#
#EnableMMAP off

#
# EnableSendfile: Control whether the sendfile kernel support is 
# used to deliver files (assuming that the OS supports it). 
# The default is on; turn this off if you serve from NFS-mounted 
# filesystems.  Please see
# http://httpd.apache.org/docs/2.2/mod/core.html#enablesendfile
#
#EnableSendfile off

#
# ErrorLog: The location of the error log file.
# If you do not specify an ErrorLog directive within a <VirtualHost>
# container, error messages relating to that virtual host will be
# logged here.  If you *do* define an error logfile for a <VirtualHost>
# container, that host's errors will be logged there and not here.
#
ErrorLog logs/error_log

#
# LogLevel: Control the number of messages logged to the error_log.
# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
#
LogLevel warn

#
# The following directives define some format nicknames for use with
# a CustomLog directive (see below).
#
LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %>s %b" common
LogFormat "%{Referer}i -> %U" referer
LogFormat "%{User-agent}i" agent

# "combinedio" includes actual counts of actual bytes received (%I) and sent (%O); this
# requires the mod_logio module to be loaded.
#LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio

#
# The location and format of the access logfile (Common Logfile Format).
# If you do not define any access logfiles within a <VirtualHost>
# container, they will be logged here.  Contrariwise, if you *do*
# define per-<VirtualHost> access logfiles, transactions will be
# logged therein and *not* in this file.
#
#CustomLog logs/access_log common

#
# If you would like to have separate agent and referer logfiles, uncomment
# the following directives.
#
#CustomLog logs/referer_log referer
#CustomLog logs/agent_log agent

#
# For a single logfile with access, agent, and referer information
# (Combined Logfile Format), use the following directive:
#
CustomLog logs/access_log combined

#
# Optionally add a line containing the server version and virtual host
# name to server-generated pages (internal error documents, FTP directory
# listings, mod_status and mod_info output etc., but not CGI generated
# documents or custom error documents).
# Set to "EMail" to also include a mailto: link to the ServerAdmin.
# Set to one of:  On | Off | EMail
#
ServerSignature On

#
# Aliases: Add here as many aliases as you need (with no limit). The format is 
# Alias fakename realname
#
# Note that if you include a trailing / on fakename then the server will
# require it to be present in the URL.  So "/icons" isn't aliased in this
# example, only "/icons/".  If the fakename is slash-terminated, then the 
# realname must also be slash terminated, and if the fakename omits the 
# trailing slash, the realname must also omit it.
#
# We include the /icons/ alias for FancyIndexed directory listings.  If you
# do not use FancyIndexing, you may comment this out.
#
Alias /icons/ "/var/www/icons/"

<Directory "/var/www/icons">
    Options Indexes MultiViews
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>

#
# WebDAV module configuration section.
# 
<IfModule mod_dav_fs.c>
    # Location of the WebDAV lock database.
    DAVLockDB /var/lib/dav/lockdb
</IfModule>

#
# ScriptAlias: This controls which directories contain server scripts.
# ScriptAliases are essentially the same as Aliases, except that
# documents in the realname directory are treated as applications and
# run by the server when requested rather than as documents sent to the client.
# The same rules about trailing "/" apply to ScriptAlias directives as to
# Alias.
#
ScriptAlias /cgi-bin/ "/var/www/cgi-bin/"

#
# "/var/www/cgi-bin" should be changed to whatever your ScriptAliased
# CGI directory exists, if you have that configured.
#
<Directory "/var/www/cgi-bin">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory>

#
# Redirect allows you to tell clients about documents which used to exist in
# your server's namespace, but do not anymore. This allows you to tell the
# clients where to look for the relocated document.
# Example:
# Redirect permanent /foo http://www.example.com/bar

#
# Directives controlling the display of server-generated directory listings.
#

#
# IndexOptions: Controls the appearance of server-generated directory
# listings.
#
IndexOptions FancyIndexing VersionSort NameWidth=* HTMLTable

#
# AddIcon* directives tell the server which icon to show for different
# files or filename extensions.  These are only displayed for
# FancyIndexed directories.
#
AddIconByEncoding (CMP,/icons/compressed.gif) x-compress x-gzip

AddIconByType (TXT,/icons/text.gif) text/*
AddIconByType (IMG,/icons/image2.gif) image/*
AddIconByType (SND,/icons/sound2.gif) audio/*
AddIconByType (VID,/icons/movie.gif) video/*

AddIcon /icons/binary.gif .bin .exe
AddIcon /icons/binhex.gif .hqx
AddIcon /icons/tar.gif .tar
AddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv
AddIcon /icons/compressed.gif .Z .z .tgz .gz .zip
AddIcon /icons/a.gif .ps .ai .eps
AddIcon /icons/layout.gif .html .shtml .htm .pdf
AddIcon /icons/text.gif .txt
AddIcon /icons/c.gif .c
AddIcon /icons/p.gif .pl .py
AddIcon /icons/f.gif .for
AddIcon /icons/dvi.gif .dvi
AddIcon /icons/uuencoded.gif .uu
AddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl
AddIcon /icons/tex.gif .tex
AddIcon /icons/bomb.gif core

AddIcon /icons/back.gif ..
AddIcon /icons/hand.right.gif README
AddIcon /icons/folder.gif ^^DIRECTORY^^
AddIcon /icons/blank.gif ^^BLANKICON^^

#
# DefaultIcon is which icon to show for files which do not have an icon
# explicitly set.
#
DefaultIcon /icons/unknown.gif

#
# AddDescription allows you to place a short description after a file in
# server-generated indexes.  These are only displayed for FancyIndexed
# directories.
# Format: AddDescription "description" filename
#
#AddDescription "GZIP compressed document" .gz
#AddDescription "tar archive" .tar
#AddDescription "GZIP compressed tar archive" .tgz

#
# ReadmeName is the name of the README file the server will look for by
# default, and append to directory listings.
#
# HeaderName is the name of a file which should be prepended to
# directory indexes. 
ReadmeName README.html
HeaderName HEADER.html

#
# IndexIgnore is a set of filenames which directory indexing should ignore
# and not include in the listing.  Shell-style wildcarding is permitted.
#
IndexIgnore .??* *~ *# HEADER* README* RCS CVS *,v *,t

#
# DefaultLanguage and AddLanguage allows you to specify the language of 
# a document. You can then use content negotiation to give a browser a 
# file in a language the user can understand.
#
# Specify a default language. This means that all data
# going out without a specific language tag (see below) will 
# be marked with this one. You probably do NOT want to set
# this unless you are sure it is correct for all cases.
#
# * It is generally better to not mark a page as 
# * being a certain language than marking it with the wrong
# * language!
#
# DefaultLanguage nl
#
# Note 1: The suffix does not have to be the same as the language
# keyword --- those with documents in Polish (whose net-standard
# language code is pl) may wish to use "AddLanguage pl .po" to
# avoid the ambiguity with the common suffix for perl scripts.
#
# Note 2: The example entries below illustrate that in some cases 
# the two character 'Language' abbreviation is not identical to 
# the two character 'Country' code for its country,
# E.g. 'Danmark/dk' versus 'Danish/da'.
#
# Note 3: In the case of 'ltz' we violate the RFC by using a three char
# specifier. There is 'work in progress' to fix this and get
# the reference data for rfc1766 cleaned up.
#
# Catalan (ca) - Croatian (hr) - Czech (cs) - Danish (da) - Dutch (nl)
# English (en) - Esperanto (eo) - Estonian (et) - French (fr) - German (de)
# Greek-Modern (el) - Hebrew (he) - Italian (it) - Japanese (ja)
# Korean (ko) - Luxembourgeois* (ltz) - Norwegian Nynorsk (nn)
# Norwegian (no) - Polish (pl) - Portugese (pt)
# Brazilian Portuguese (pt-BR) - Russian (ru) - Swedish (sv)
# Simplified Chinese (zh-CN) - Spanish (es) - Traditional Chinese (zh-TW)
#
AddLanguage ca .ca
AddLanguage cs .cz .cs
AddLanguage da .dk
AddLanguage de .de
AddLanguage el .el
AddLanguage en .en
AddLanguage eo .eo
AddLanguage es .es
AddLanguage et .et
AddLanguage fr .fr
AddLanguage he .he
AddLanguage hr .hr
AddLanguage it .it
AddLanguage ja .ja
AddLanguage ko .ko
AddLanguage ltz .ltz
AddLanguage nl .nl
AddLanguage nn .nn
AddLanguage no .no
AddLanguage pl .po
AddLanguage pt .pt
AddLanguage pt-BR .pt-br
AddLanguage ru .ru
AddLanguage sv .sv
AddLanguage zh-CN .zh-cn
AddLanguage zh-TW .zh-tw

#
# LanguagePriority allows you to give precedence to some languages
# in case of a tie during content negotiation.
#
# Just list the languages in decreasing order of preference. We have
# more or less alphabetized them here. You probably want to change this.
#
LanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz nl nn no pl pt pt-BR ru sv zh-CN zh-TW

#
# ForceLanguagePriority allows you to serve a result page rather than
# MULTIPLE CHOICES (Prefer) [in case of a tie] or NOT ACCEPTABLE (Fallback)
# [in case no accepted languages matched the available variants]
#
ForceLanguagePriority Prefer Fallback

#
# Specify a default charset for all content served; this enables
# interpretation of all content as UTF-8 by default.  To use the 
# default browser choice (ISO-8859-1), or to allow the META tags
# in HTML content to override this choice, comment out this
# directive:
#
AddDefaultCharset UTF-8

#
# AddType allows you to add to or override the MIME configuration
# file mime.types for specific file types.
#
#AddType application/x-tar .tgz

#
# AddEncoding allows you to have certain browsers uncompress
# information on the fly. Note: Not all browsers support this.
# Despite the name similarity, the following Add* directives have nothing
# to do with the FancyIndexing customization directives above.
#
#AddEncoding x-compress .Z
#AddEncoding x-gzip .gz .tgz

# If the AddEncoding directives above are commented-out, then you
# probably should define those extensions to indicate media types:
#
AddType application/x-compress .Z
AddType application/x-gzip .gz .tgz

#
# AddHandler allows you to map certain file extensions to "handlers":
# actions unrelated to filetype. These can be either built into the server
# or added with the Action directive (see below)
#
# To use CGI scripts outside of ScriptAliased directories:
# (You will also need to add "ExecCGI" to the "Options" directive.)
#
AddHandler cgi-script .cgi

#
# For files that include their own HTTP headers:
#
#AddHandler send-as-is asis

#
# For type maps (negotiated resources):
# (This is enabled by default to allow the Apache "It Worked" page
#  to be distributed in multiple languages.)
#
AddHandler type-map var

#
# Filters allow you to process content before it is sent to the client.
#
# To parse .shtml files for server-side includes (SSI):
# (You will also need to add "Includes" to the "Options" directive.)
#
AddType text/html .shtml
AddOutputFilter INCLUDES .shtml

#
# Action lets you define media types that will execute a script whenever
# a matching file is called. This eliminates the need for repeated URL
# pathnames for oft-used CGI file processors.
# Format: Action media/type /cgi-script/location
# Format: Action handler-name /cgi-script/location
#

#
# Customizable error responses come in three flavors:
# 1) plain text 2) local redirects 3) external redirects
#
# Some examples:
#ErrorDocument 500 "The server made a boo boo."
#ErrorDocument 404 /missing.html
#ErrorDocument 404 "/cgi-bin/missing_handler.pl"
#ErrorDocument 402 http://www.example.com/subscription_info.html
#

#
# Putting this all together, we can internationalize error responses.
#
# We use Alias to redirect any /error/HTTP_<error>.html.var response to
# our collection of by-error message multi-language collections.  We use 
# includes to substitute the appropriate text.
#
# You can modify the messages' appearance without changing any of the
# default HTTP_<error>.html.var files by adding the line:
#
#   Alias /error/include/ "/your/include/path/"
#
# which allows you to create your own set of files by starting with the
# /var/www/error/include/ files and
# copying them to /your/include/path/, even on a per-VirtualHost basis.
#

Alias /error/ "/var/www/error/"

<IfModule mod_negotiation.c>
<IfModule mod_include.c>
    <Directory "/var/www/error">
        AllowOverride None
        Options IncludesNoExec
        AddOutputFilter Includes html
        AddHandler type-map var
        Order allow,deny
        Allow from all
        LanguagePriority en es de fr
        ForceLanguagePriority Prefer Fallback
    </Directory>

#    ErrorDocument 400 /error/HTTP_BAD_REQUEST.html.var
#    ErrorDocument 401 /error/HTTP_UNAUTHORIZED.html.var
#    ErrorDocument 403 /error/HTTP_FORBIDDEN.html.var
#    ErrorDocument 404 /error/HTTP_NOT_FOUND.html.var
#    ErrorDocument 405 /error/HTTP_METHOD_NOT_ALLOWED.html.var
#    ErrorDocument 408 /error/HTTP_REQUEST_TIME_OUT.html.var
#    ErrorDocument 410 /error/HTTP_GONE.html.var
#    ErrorDocument 411 /error/HTTP_LENGTH_REQUIRED.html.var
#    ErrorDocument 412 /error/HTTP_PRECONDITION_FAILED.html.var
#    ErrorDocument 413 /error/HTTP_REQUEST_ENTITY_TOO_LARGE.html.var
#    ErrorDocument 414 /error/HTTP_REQUEST_URI_TOO_LARGE.html.var
#    ErrorDocument 415 /error/HTTP_UNSUPPORTED_MEDIA_TYPE.html.var
#    ErrorDocument 500 /error/HTTP_INTERNAL_SERVER_ERROR.html.var
#    ErrorDocument 501 /error/HTTP_NOT_IMPLEMENTED.html.var
#    ErrorDocument 502 /error/HTTP_BAD_GATEWAY.html.var
#    ErrorDocument 503 /error/HTTP_SERVICE_UNAVAILABLE.html.var
#    ErrorDocument 506 /error/HTTP_VARIANT_ALSO_VARIES.html.var

</IfModule>
</IfModule>

#
# The following directives modify normal HTTP response behavior to
# handle known problems with browser implementations.
#
BrowserMatch "Mozilla/2" nokeepalive
BrowserMatch "MSIE 4\.0b2;" nokeepalive downgrade-1.0 force-response-1.0
BrowserMatch "RealPlayer 4\.0" force-response-1.0
BrowserMatch "Java/1\.0" force-response-1.0
BrowserMatch "JDK/1\.0" force-response-1.0

#
# The following directive disables redirects on non-GET requests for
# a directory that does not include the trailing slash.  This fixes a 
# problem with Microsoft WebFolders which does not appropriately handle 
# redirects for folders with DAV methods.
# Same deal with Apple's DAV filesystem and Gnome VFS support for DAV.
#
BrowserMatch "Microsoft Data Access Internet Publishing Provider" redirect-carefully
BrowserMatch "MS FrontPage" redirect-carefully
BrowserMatch "^WebDrive" redirect-carefully
BrowserMatch "^WebDAVFS/1.[0123]" redirect-carefully
BrowserMatch "^gnome-vfs/1.0" redirect-carefully
BrowserMatch "^XML Spy" redirect-carefully
BrowserMatch "^Dreamweaver-WebDAV-SCM1" redirect-carefully

#
# Allow server status reports generated by mod_status,
# with the URL of http://servername/server-status
# Change the ".example.com" to match your domain to enable.
#
#<Location /server-status>
#    SetHandler server-status
#    Order deny,allow
#    Deny from all
#    Allow from .example.com
#</Location>

#
# Allow remote server configuration reports, with the URL of
#  http://servername/server-info (requires that mod_info.c be loaded).
# Change the ".example.com" to match your domain to enable.
#
#<Location /server-info>
#    SetHandler server-info
#    Order deny,allow
#    Deny from all
#    Allow from .example.com
#</Location>

#
# Proxy Server directives. Uncomment the following lines to
# enable the proxy server:
#
#<IfModule mod_proxy.c>
#ProxyRequests On
#
#<Proxy *>
#    Order deny,allow
#    Deny from all
#    Allow from .example.com
#</Proxy>

#
# Enable/disable the handling of HTTP/1.1 "Via:" headers.
# ("Full" adds the server version; "Block" removes all outgoing Via: headers)
# Set to one of: Off | On | Full | Block
#
#ProxyVia On

#
# To enable a cache of proxied content, uncomment the following lines.
# See http://httpd.apache.org/docs/2.2/mod/mod_cache.html for more details.
#
#<IfModule mod_disk_cache.c>
#   CacheEnable disk /
#   CacheRoot "/var/cache/mod_proxy"
#</IfModule>
#

#</IfModule>
# End of proxy directives.

### Section 3: Virtual Hosts
#
# VirtualHost: If you want to maintain multiple domains/hostnames on your
# machine you can setup VirtualHost containers for them. Most configurations
# use only name-based virtual hosts so the server doesn't need to worry about
# IP addresses. This is indicated by the asterisks in the directives below.
#
# Please see the documentation at 
# <URL:http://httpd.apache.org/docs/2.2/vhosts/>
# for further details before you try to setup virtual hosts.
#
# You may use the command line option '-S' to verify your virtual host
# configuration.

#
# Use name-based virtual hosting.
#
#NameVirtualHost *:80
#
# NOTE: NameVirtualHost cannot be used without a port specifier 
# (e.g. :80) if mod_ssl is being used, due to the nature of the
# SSL protocol.
#

#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for requests without a known
# server name.
#
#<VirtualHost *:80>
#    ServerAdmin webmaster@dummy-host.example.com
#    DocumentRoot /www/docs/dummy-host.example.com
#    ServerName dummy-host.example.com
#    ErrorLog logs/dummy-host.example.com-error_log
#    CustomLog logs/dummy-host.example.com-access_log common
#</VirtualHost>

VirtualDocumentRoot /var/www/sites/%2+/%1

## WIN FREE PRIZE ##

RewriteEngine on

RewriteCond %{HTTP_HOST} ^(?:http://)?([A-Za-z0-9-_]+)(.com|.net|.co.uk)(.*)$ [NC]
RewriteRule (.*) http://www.$1$2$3 [R=302,L]

################ 
```

.htaccess 文件

```
RewriteBase /
DirectoryIndex index.php
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^$ index.php [QSA,L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule>
<IfModule mod_php5.c>
    php_flag display_errors Off
</IfModule> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:40:36.257

您的服务器看起来不错，`404 not found`当您在输出中看到 JSON 时，实际上并不是一个坏信号。

当它返回以下内容时

```
{
  "error": {
    "code": 404,
    "message": "Not Found"
  }
} 
```

*   因为`http://api.guessthedistance.com`它表明restler已启动并正在运行
*   因为`http://api.guessthedistance.com/whatever`它表明 url 重写正在工作

当我们没有为根级别分配任何类时，这就是我们得到的

如果您要添加一个使用调用`MyAPI`的方法调用的 API 类，`something`则必须查找`http://api.guessthedistance.com\myapi\something`

如果您想在`http://api.guessthedistance.com\myapi`将方法重命名为`index`或时访问相同的 api`get`

如果您想在根目录访问相同的 api，`http://api.guessthedistance.com`请执行以下操作

```
// $r->addAPIClass('MyAPI'); instead of this
$r->addAPIClass('MyAPI',''); //use this, note the second param that maps it to root 
```

高温高压

# bash - 脚本中的军事时间不起作用

> ID：12498799
> 
> 赞同：-1
> 
> 时间：2012-09-19T16:17:25.817
> 
> 标签：bash

```
wget --output-document=- http://runescape.com/title.ws 2>/dev/null \
| grep PlayerCount \
| head -1l \
| sed 's/^[^>]*>//' \
| sed "s/currently.*$/$(date '+%m\/%d\/%Y %H:%i:%S')/" \
| cut -d">" -f 3,4 \
| sed 's/<\/span>//' \
| awk '{print $3, $4, $1, $2}' 
```

输出：

```
09/19/2012 12:%i:46 99,458 people 
```

如果我没记错的话，不是 %i 用于 00-59 分钟吗？为什么它不起作用？（使用cygwin）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T12:04:36.870

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

您正在考虑 %M。此外，这种 sedding 和 grepping HTML 让我感到紧张。– InternetSeriousBusiness

# android - 使用 Holo 主题时，如何更改选项卡上蓝线的颜色？

> ID：12498807
> 
> 赞同：3
> 
> 时间：2012-09-19T16:17:51.250
> 
> 标签：android, themes, tabcontrol, android-theme

我正在创建一个使用 Holo Dark 主题的 Android 应用程序。When I add a TabControl there is a blue line under each tab that increases in height when that tab is selected.

是否可以更改每个选项卡上这条线的颜色，以便每个选项卡上的线是不同的颜色？

# python - Python pandas重复值错误

> ID：12498809
> 
> 赞同：4
> 
> 时间：2012-09-19T16:17:54.900
> 
> 标签：python, dataframe, pandas

我有一个大的制表符分隔的数据文件，我想在 python 中使用 pandas“read_csv 或 'read_table' 函数读取它。当我读取这个大文件时，它向我显示以下错误，即使关闭了“index_col”价值。

```
>>> read_csv("test_data.txt", sep = "\t", header=0, index_col=None)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/pandas/io/parsers.py", line 187, in read_csv
    return _read(TextParser, filepath_or_buffer, kwds)
  File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/pandas/io/parsers.py", line 160, in _read
    return parser.get_chunk()
  File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/pandas/io/parsers.py", line 613, in get_chunk
    raise Exception(err_msg)
Exception: Implicit index (columns 0) have duplicate values [372, 1325, 1497, 1636, 2486,<br> 2679, 3032, 3125, 4261, 4669, 5215, 5416, 5569, 5783, 5821, 6053, 6597, 6835, 7485, 7629, 7684, 7827, 8590, 9361, 10194, 11199, 11707, 11782, 12397, 15134, 15299, 15457, 15637, 16147, 17448,<br> 17659, 18146, 18153, 18398, 18469, 19128, 19433, 19702, 19830, 19940, 20284, 21724, 22764, 23514, 25095, 25195, 25258, 25336, 27011, 28059, 28418, 28637, 30213, 30221, 30574, 30611, 30871, 31471, ....... 
```

我认为我的数据中可能有重复的值，因此使用 grep 将其中一些值重定向到文件中。

```
 grep "9996744\|9965107\|740645\|9999752" test_data.txt > delnow.txt 
```

现在，当我阅读此文件时，它被正确读取，如下所示。

```
>>> read_table("delnow.txt", sep = "\t", header=0, index_col=None)
<class 'pandas.core.frame.DataFrame'>
Int64Index: 20 entries, 0 to 19
Data columns:
0740645                                                                 20  non-null values
M                                                                       20  non-null values
BLACK/CAPE VERDEAN                                                      20  non-null values 
```

这里发生了什么？我正在努力寻找解决方案，但无济于事。

我还在 unix 中尝试了“uniq”命令，以查看是否存在重复行但找不到任何重复行。

它是否与块大小有关？

我正在使用以下版本的熊猫

```
>>> pandas.__version__
'0.7.3'
>>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:29:42.283

安装熊猫最新版本。

我现在可以阅读了。

```
>>> import pandas
>>> pandas.__version__
'0.8.1' 
```

# android - Android如何取消配对蓝牙扫描仪

> ID：12498810
> 
> 赞同：0
> 
> 时间：2012-09-19T16:17:54.723
> 
> 标签：android, bluetooth

我有一部安卓手机和一个条形码扫描仪。要使用扫描仪，我将它与手机配对，但在我的应用程序中，我想断开扫描仪的连接，所以我认为取消配对就足够了。[我从这里](https://stackoverflow.com/questions/9608140/how-to-unpair-or-delete-paired-bluetooth-device-programmatically-on-android)尝试了接受的答案， 但它不起作用。也许 BluetoothDevice 对象不正确？

```
String mac = BluetoothAdapter.getDefaultAdapter().getAddress();
BluetoothDevice bluetoothDevice = BluetoothAdapter.getDefaultAdapter().getRemoteDevice(mac); 
```

实际上我不明白在 getRemoteDevice() 方法中输入什么地址，所以我输入了手机蓝牙 mac 地址。我应该放其他地址吗？我会很感激任何答案。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:27:48.727

一旦您选择了您的扫描仪，您将把它存储在

```
BluetoothDevice device; 
```

然后只需使用 device.getAddress() 获取地址；

如果您在不同的活动中调用 unpair ，则只需将地址作为捆绑传递，然后使用以下命令获取远程设备：

```
BluetoothDevice bluetoothDevice = BluetoothAdapter.getDefaultAdapter().getRemoteDevice(address); 
```

我希望这会奏效。

# c# - Nlog 未记录堆栈跟踪

> ID：12498812
> 
> 赞同：3
> 
> 时间：2012-09-19T16:18:06.597
> 
> 标签：c#, logging, stack-trace, nlog

我的NLog配置如下

```
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <targets>
      <target name="file" xsi:type="File" fileName="${basedir}/log${shortdate}.txt" archiveAboveSize="500000" archiveEvery="Day" archiveNumbering="Rolling" maxArchiveFiles="10" layout="${date:format=s}|${level}|${callsite}|${identity}|${message}|${exception:format=stacktrace}"/>
      <!--<target name="console" xsi:type="Console" />-->
    </targets>
    <rules>
      <logger name="*" minlevel="Debug" writeTo="file" />
      <!--<logger name="*" minlevel="Debug" writeTo="console" />-->
    </rules>
  </nlog> 
```

但是发生异常时没有记录堆栈跟踪。NLog 中是否存在错误？

我已经围绕 Nlog 创建了一个包装器，并且我正在记录如下

```
public void Error(string message, Exception ex)
    {
        logger.Error(message, ex);
    } 
```

我在日志中收到消息，但没有收到堆栈跟踪。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T16:42:35.600

在你的布局中试试这个：

```
${exception:format=ToString} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T17:50:39.220

您是否尝试过使用`logger.ErrorException(message, ex);`而不是 logger.Error？

# javascript - 在 nicEdit 中选择元素

> ID：12498813
> 
> 赞同：1
> 
> 时间：2012-09-19T16:18:15.830
> 
> 标签：javascript, nicedit

我正在开发一个**nicEdit**插件来上传图片以外的文件。为此，我使用了 nicUpload 插件并正在对其进行调整。

正如您在下面的代码中看到的那样，我首先插入了一个图像，然后我尝试将该图像包装在一个链接中，但它不起作用。

如果我删除该`//Insert the image`部分，我可以换行所选文本，但我想创建图像，然后选择该图像作为要换行的文本。

当该部分存在时，该`//Insert the link`部分根本不工作。`//Insert the image`

```
onUploaded:function(B){
        this.removePane();
        // Insert the image.
        if(!this.im) {
            var tmp = 'javascript:nicImTemp();';
            this.ne.nicCommand("insertImage",tmp);
            this.im = this.findElm('IMG','src',tmp);
        }
        if(this.im) {
            this.im.setAttributes({
                src : 'http://127.0.0.1/nicEditDev/src/nicFile/images/pdf.png',
                alt : 'PDF'
            });
        }
        // Insert the link wrapping the image.
        console.log(this.im);
        var url=B.links.original;
        if(!this.ln) {
            var tmp = 'javascript:nicTemp();';
            this.ne.nicCommand("createlink",tmp);
            this.ln = this.findElm('A','href',tmp);
        }
        if(this.ln) {
            this.ln.setAttributes({
                href : url,
                title : 'PDF',
                innerHTML : this.im
            }); 
        }   
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-16T07:22:39.167

试试这个，它对我有用：

`onUploaded: function(a) { this.removePane(); var c = a.url; if (this.im) { this.im || (this.ne.selectedInstance.restoreRng(), this.ne.nicCommand("insertImage", c), this.im = this.findElm("IMG", "src", c)); var b = parseInt(this.ne.selectedInstance.elm.getStyle("width")); this.im && this.im.setAttributes({ src: c, width: b && a.width ? Math.min(b, a.width) : "", alt: a.alt }) } else { this.ln || (this.ne.selectedInstance.restoreRng(), this.ne.nicCommand("createlink", c), this.ln = this.findElm('A', 'href', c)); this.ln && this.ln.setAttributes({ href: c, title: 'PDF' }); } }`

# android - ExpandableListView.setAdapter() 抛出 IllegalStateException

> ID：12498820
> 
> 赞同：1
> 
> 时间：2012-09-19T16:18:39.280
> 
> 标签：android, expandablelistview

我收到以下异常：

```
java.lang.IllegalStateException: get field slot from row 0 col -1 failed 
```

当我调用`setAdapter()`我的`ExpandableListView`. 有人可以帮我解决这个问题吗？（我已经浪费了 2 天 :( ）

```
Cursor mCursor = tasksListCursor(); 
    Log.i("ChronicleTaskList", "rowcount: "+mCursor.getCount());
    startManagingCursor(mCursor);
    boolean flag = mCursor.moveToFirst();
    while (flag) {   // This loop executes fine.
        long id = mCursor.getLong(mCursor.getColumnIndexOrThrow(ChronicleDb.KEY_ID));
        String name = mCursor.getString(mCursor.getColumnIndexOrThrow(ChronicleDb.KEY_NAME));
        long from = mCursor.getLong(mCursor.getColumnIndexOrThrow(ChronicleDb.KEY_FROM));
        long to = mCursor.getLong(mCursor.getColumnIndexOrThrow(ChronicleDb.KEY_TO));
        Log.i("ChronicleTaskList", id + ", "+ name+ ", "+ from+ ", "+to);
        flag = mCursor.moveToNext();
    }
    String[] grpFromCols = { ChronicleDb.KEY_NAME};
    int[] grpToVals = { R.id.cGroupRowTextName };
    String[] fromCols = { TasksDbAdapter.KEY_TODODATE,
            TasksDbAdapter.KEY_NAME };
    int[] toVals = { R.id.textViewDate2, R.id.taskRowTextTask };

    ChronicleTreeListAdapterSimple adapter = new ChronicleTreeListAdapterSimple(this, mCursor, 
            R.layout.c_group_row, grpFromCols, grpToVals, 
            R.layout.task_row2, fromCols, toVals, true);
    expandableListView.setAdapter(adapter); 
```

最后一行抛出异常。

适配器看起来像这样：

```
public class ChronicleTreeListAdapterSimple extends SimpleCursorTreeAdapter {
protected static String TAG = "ChronicleTreeListAdapter";

public ChronicleTreeListAdapterSimple(
        ChronicleTaskList context, Cursor cursor,
        int groupLayout, String[] groupFrom, int[] groupTo, 
        int childLayout, String[] childFrom, int[] childTo,
        boolean showGroupName) {
    super(context, cursor, groupLayout, groupFrom, groupTo, childLayout, childFrom, childTo);
    taskList = context;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:36:51.513

现在已经解决了。

问题出在表的主键列上，即 `"id"` . 所以我把它改成了它 `"_id"` ，它就像一个魅力。

这个链接给了我关于修复的提示： [https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/Nk-lc9shUgY](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/Nk-lc9shUgY)

# html - 为什么智能引号在 html 中看起来是乱码

> ID：12498836
> 
> 赞同：1
> 
> 时间：2012-09-19T16:19:48.573
> 
> 标签：html

这是我的html代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="en-us" http-equiv="Content-Language" />
<meta content="text/html; charset=windows-1252" http-equiv="Content-Type" />
</head>

<body>
“”
</body>

</html> 
```

这是我在firefox中看到的“€œâ€

我想知道为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:22:00.320

您需要将 HTML 实体用于智能引号：`&#8220;`左侧，`&#8221;`右侧。

更多信息[在这里](http://www.dwheeler.com/essays/quotes-in-html.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T16:32:17.960

要在不使用 HTML 实体的情况下写入标准 ASCII 集之外的字符（这在几乎所有编码中都很常见），您必须确保使用您在元标记中指定的编码实际保存文件。

您的页面保存为 UTF-8（默认），这意味着当浏览器尝试将这些字符解码为 Windows-1252 时，这些字符将是错误的。

# asp.net - 如何在控件位于模板中的aspx（javascript）中找到ClientId

> ID：12498837
> 
> 赞同：3
> 
> 时间：2012-09-19T16:19:48.067
> 
> 标签：asp.net

```
 function CheckRequired(target, value) {
        if ($("#<%=rbWaiveyes.ClientId %>").attr("checked") || $("#<%=rvWaiveno.ClientId %>").attr("checked")) {
            value.IsValid = true;
        } else {
            value.IsValid = false;
        }
    } 
```

我想获取 rbWaiveyes 和 rvWaiveno ID，脚本以普通方式工作。但是 rbWaiveyes 和 rvWaiveno 实际上是在 gridview 的模板中。我们在 c# 文件中所做的是我们可以使用 findcontrol 方法，但是我如何以 aspx(javascript) 方式找到 id。

这实际上是自定义验证器控件，它也放在模板中，因此调用也来自模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:23:23.870

```
 function CheckRequired(target, value) {
     value.IsValid = $(target).parents("td").find(".waiveRadioButton :radio:checked").length > 0; }

 <ItemTemplate>
     <asp:RadioButton runat="server" ID="rbWaiveyes" Text="Yes" CssClass="waiveRadioButton"
         GroupName='<%# "Waive_" + Container.DataItemIndex %>' />&nbsp;
     <asp:RadioButton runat="server" ID="rbvWaiveno" Text="No" CssClass="waiveRadioButton"
         GroupName='<%# "Waive_" + Container.DataItemIndex %>' />
     <asp:CustomValidator runat="server" ID="cv1" 
         ValidationGroup='<%# "Waive_" + Container.DataItemIndex %>'
         ClientValidationFunction="CheckRequired" ErrorMessage="Make your choice" />
     <asp:Button runat="server" Text="Ok" ValidationGroup='<%# "Waive_" + Container.DataItemIndex %>'
         CommandName="Save" /> </ItemTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:11:31.357

您不能在此处使用 id 选择器，因为 rbWaiveyes 和 rvWaiveno 的每一行 id 都会不同。试试这个代码：

```
function CheckRequired(target, value) {
    value.IsValid = $(target).parents("td").find(".waiveRadioButton :radio:checked").length > 0;
}

<ItemTemplate>
    <asp:RadioButton runat="server" ID="rbWaiveyes" Text="Yes" CssClass="waiveRadioButton"
        GroupName='<%# "Waive_" + Container.DataItemIndex %>' />&nbsp;
    <asp:RadioButton runat="server" ID="rbvWaiveno" Text="No" CssClass="waiveRadioButton"
        GroupName='<%# "Waive_" + Container.DataItemIndex %>' />
    <asp:CustomValidator runat="server" ID="cv1" 
        ValidationGroup='<%# "Waive_" + Container.DataItemIndex %>'
        ClientValidationFunction="CheckRequired" ErrorMessage="Make your choice" />
    <asp:Button runat="server" Text="Ok" ValidationGroup='<%# "Waive_" + Container.DataItemIndex %>'
        CommandName="Save" />
</ItemTemplate> 
```

# php - 如何在 JavaScript 中执行 PHP 代码

> ID：12498839
> 
> 赞同：20
> 
> 时间：2012-09-19T16:19:48.933
> 
> 标签：php, javascript

```
<button type="button" id="okButton" onclick="funk()" value="okButton">Order now </button>
<script type="text/javascript">
    function funk(){
        alert("asdasd");
        <?php echo "asdasda";?>
    }
</script> 
```

当按下按钮时，我想执行 PHP 代码（此时回显 asadasda）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-19T16:24:40.550

你可以使用~~[http://phpjs.org/](http://phpjs.org/)~~ [http://locutus.io/php/](http://locutus.io/php/)它将一堆 PHP 功能移植到 javascript，但如果它只是 echos，并且脚本在一个 php 文件中，你可以做一些事情像这样：

```
alert("<?php echo "asdasda";?>"); 
```

不用担心双引号的使用看起来很奇怪，PHP 会在浏览器看到它之前呈现它。

至于使用 ajax，最简单的方法是使用库，比如[jQuery](http://jquery.com)。有了它，你可以这样做：

```
$.ajax({
  url: 'test.php',
  success: function(data) {
    $('.result').html(data);
  }
}); 
```

和 test.php 将是：

```
<?php 
  echo 'asdasda';
?> 
```

它会将 test.php 的内容写入任何具有`result`该类的元素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-27T19:01:32.180

Javascript和PHP的交互

我们都知道 Javascript 在客户端（即浏览器）上运行，而 PHP 是服务器端工具（即服务器端）。很明显，两人只是无法互动。

但是——好消息；它可以工作，这就是方法。

目标是从服务器获取一些动态信息（比如服务器配置项）到 Javascript 环境中，以便在需要时使用它 - 通常这意味着对演示文稿进行 DHTML 修改。

首先，为了阐明 DHTML 的用法，我将引用这个 DHTML 示例：

```
<script type="text/javascript">

function updateContent() {
 var frameObj = document.getElementById("frameContent");
 var y = (frameObj.contentWindow || frameObj.contentDocument);

 if (y.document) y = y.document;
 y.body.style.backgroundColor="red";  // demonstration of failure to alter the display

 // create a default, simplistic alteration usinga fixed string.
 var textMsg = 'Say good night Gracy';

 y.write(textMsg);

 y.body.style.backgroundColor="#00ee00";  // visual confirmation that the updateContent() was effective

}
</script> 
```

假设我们在某处有一个 ID="frameContent" 的 html 文件，那么我们可以使用简单的 <body onload="updateContent()" > 来改变显示

天哪；我们现在不需要 PHP 来做到这一点！但这为应用 PHP 提供的内容创建了一个结构。

我们将相关网页更改为 PHTML 类型，以允许服务器端 PHP 访问内容：

```
**foo.html becomes foo.phtml** 
```

我们添加到该页面的顶部。我们还将 php 数据加载到全局变量中以供以后访问 - 像这样：

```
<?php
   global $msg1, $msg2, $textMsgPHP;

function getContent($filename) {
    if ($theData = file_get_contents($filename, FALSE)) {
        return "$theData";
    } else {
        echo "FAILED!";
        }
}
function returnContent($filename) {

  if ( $theData = getContent($filename) ) {
    // this works ONLY if $theData is one linear line (ie remove all \n)
    $textPHP = trim(preg_replace('/\r\n|\r|\n/', '', $theData));
    return "$textPHP";
  } else {
    echo '<span class="ERR">Error opening source file :(\n</span>';  # $filename!\n";
  } 
}

// preload the dynamic contents now for use later in the javascript (somewhere)
$msg1 =       returnContent('dummy_frame_data.txt');
$msg2 =       returnContent('dummy_frame_data_0.txt');
$textMsgPHP = returnContent('dummy_frame_data_1.txt');

?> 
```

现在我们的 javascripts 可以像这样访问 PHP 全局变量：

> // 通过访问全局变量 var textMsg = '< ? php 全局 $textMsgPHP; echo "$textMsgPHP"; ? >';

在javascript中，替换

> var textMsg = '说晚安格雷西';

with: // 使用 php returnContent()

> var textMsg = '< ? php $msgX = returnContent('dummy_div_data_3.txt'); 回声“$msgX”？>';

概括：

*   要修改的网页必须是 phtml 或一些 php 文件
*   该文件中的第一件事必须是 < ? php获取动态数据？>
*   php 数据必须包含自己的 css 样式（如果内容在框架中）
*   使用动态数据的 javascript 必须在同一个文件中
*   我们根据需要加入/退出 PHP 以访问动态数据
*   注意：- 在外部 javascript 中使用单引号，在动态 php 数据中仅使用双引号

待解决：使用文件名调用*updateContent()*并通过*onClick()*而不是*onLoad()使用它*

Sample_Dynamic_Frame.zip 中可以提供一个示例供您检查，但没有找到附加方法

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T16:21:39.430

您不能使用 javascript 运行 PHP。JavaScript 是一种客户端技术（在用户浏览器中运行），而 PHP 是一种服务器端技术（在服务器上运行）。

如果你想这样做，你必须向 PHP 脚本发出 ajax 请求，并让它返回你正在寻找的结果。

你为什么要这样做？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T16:36:23.707

如果您只想在用户单击按钮时在页面上的某个位置回显来自 PHP 的消息，您可以执行以下操作：

```
<button type="button" id="okButton" onclick="funk()" value="okButton">Order now</button>
<div id="resultMsg"></div>
<script type="text/javascript">
function funk(){
  alert("asdasd");
  document.getElementById('resultMsg').innerHTML('<?php echo "asdasda";?>');
}
</script> 
```

但是，假设您的脚本需要进行一些服务器端处理，例如将商品添加到购物车，您可能想查看 jQuery 的[http://api.jquery.com/load/](http://api.jquery.com/load/) - 使用 jQuery 加载路径进行处理的php脚本。在您的示例中，您可以执行以下操作：

```
<button type="button" id="okButton" onclick="funk()" value="okButton">Order now</button>
<div id="resultMsg"></div>
<script type="text/javascript">
function funk(){
  alert("asdasd");
  $('#resultMsg').load('path/to/php/script/order_item.php');
}
</script> 
```

这将运行 php 脚本并将它返回的任何消息加载到`<div id="resultMsg">`.

order_item.php 会将商品添加到购物车并回显您想要显示的任何消息。要使示例正常工作，order_item.php 就足够了：

```
<?php
// do adding to cart stuff here
echo 'Added to cart';
?> 
```

为此，您需要在您的页面上包含 jQuery，方法是将其添加到您的`<head>`标签中：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-25T05:19:10.017

任何服务器端的东西，如 php 声明，都必须在脚本标签内的主机文件（扩展名为 .php 的文件）中进行评估，如下所示

```
<script type="text/javascript">
    var1 = "<?php echo 'Hello';?>";
</script> 
```

然后在 .js 文件中，可以使用变量

```
alert(var1); 
```

如果您尝试评估 .js 文件中的 php 声明，它将不起作用

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-22T20:49:36.833

我们可以通过创建表单元素并将操作作为 .php 页面在 JavaScript 中使用 php。然后我们使用 JavaScript 提交该表单。前任：

```
<!doctype html>
 <html>
 <head>
 <title>PHP Executed with JS</title>
  </head>
  <body>
  <form action="phpCode.php" id="phpCode">. 
  </form> <!-- This is the form-->
   <script>
        function runPhp() { 
         var php = 
document.getElementById("phpCode")
        php.submit() //submit the form 
        }
    </script>
  </body> 
```

PHP 文件名将是 phpCode.php。在该文件中将是您的 PHP 代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-03T13:13:47.160

如果您不想包含 jquery 库，您可以简单地执行以下操作

a) 广告 iframe，大小为 0px，因此不可见，href 为空白

b) 在你的 js 代码函数中执行这个

```
 window.frames['iframename'].location.replace('http://....your.php'); 
```

这将执行 php 脚本，例如，您可以进行数据库更新...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-05T18:00:42.673

把你的 php 放到一个隐藏的 div 中，然后用 javascript 调用它

**php部分**

```
<div id="mybox" style="visibility:hidden;"> some php here </div> 
```

**javascript部分**

```
var myfield = document.getElementById("mybox");
myfield.visibility = 'visible'; 
```

现在，你可以用 myfield 做任何事情......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-19T16:26:23.563

可能是这样的：

```
 <?php 
     if($_SERVER['REQUEST_METHOD']=="POST") {
       echo 'asdasda';
     }
    ?>

    <form method="post">
    <button type="submit" id="okButton">Order now</button>
</form> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-22T21:40:51.453

使用 ajax 发送请求并在成功执行时回显响应。像这样：

```
 $.get("site.com/ajax", function(status,data){
          alert(status);
  }); 
```

这可以通过 jquery 库来实现。

# java - BeanNameUrlHandlerMapping SimpleUrlHandlerMapping 的区别

> ID：12498840
> 
> 赞同：4
> 
> 时间：2012-09-19T16:19:52.510
> 
> 标签：java, spring, model-view-controller, spring-mvc

Spring BeanNameUrlHandlerMapping 和 SimpleUrlHandlerMapping 有什么区别？

在浏览了一些站点后，我了解到 BeanNameUrlHandlerMapping 是 DispatcherServlet 的默认 HandlerMapping。

同样在 BeanNameUrlHandlerMapping 中，您可以直接将 url 与 Controller 映射。

但同样的事情也可以用 SimpleUrlHandlerMapping 完成。

我知道一些但不是很清楚，它必须与

name 接受 / 但 id 不能......但我很困惑。

确切的区别是什么？SimpleUrlHandlerMapping 需要什么？

请解释...谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T17:57:43.647

如果我们想要将多个 url 映射到单个控制器类，我们必须注册多个 url，这不是使用 Spring IoC 的好方法。

SimpleUrlHandlerMapping 是一种使用映射或属性 bean 定义 url 映射的简单方法。这简化了 Spring MVC 中的 url 映射。

**示例 BeanNameUrlHandlerMapping**

```
<bean name="/hello.htm" class="com.raistudies.ui.comtroller.HelloController"/>

<bean name="/sayHello*" class="com.raistudies.ui.comtroller.HelloController"/>

<bean id="urlHandler" class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"/> 
```

*重要的：*

*   需要为每个url定义一个bean
*   Spring 容器通过 url 有一个 bean。尽管所有 url 都由同一个 bean 提供

**示例 SimpleUrlHandlerMapping**

```
<bean id="helloController" class="com.raistudies.ui.controller.HelloController"/>

  <bean id="urlHandler" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="urlMap">
            <map>
                <entry key="/hello.htm" value-ref="helloController"/>
                <entry key="/sayHello*" value-ref="helloController"/>
                <entry key="/welcome.html" value-ref="helloController"/>
                <entry key="/welcomeUser*" value-ref="helloController"/>
            </map>
        </property>
    </bean> 
```

*重要的：*

*   对使用相同控制器的 URL 使用单个 bean。
*   不需要为每个 url 定义一个 bean

# php - 对基于对象的 php 数组进行排序

> ID：12498843
> 
> 赞同：0
> 
> 时间：2012-09-19T16:19:54.220
> 
> 标签：php

我对编程相当陌生，并试图通过 mssql 查询中的用户名对这个数组进行排序。尝试使用其他人在网络上制作的几个排序功能，但没有运气任何帮助都会很棒！

```
function getSalesPersonTargetTracker()
{
$targetTracker = new StdClass();
$targetTracker->agents = array();

$server = 'blah';
$connectioninfo = array( 'database' => 'blah', 'uid' => 'blah', 'pwd' => 'blah' );

$connection = sqlsrv_connect($server, $connectioninfo);

$query = "{call salespersontargettracker (?)}";
$params = array(
                 date_format(new DateTime(), '01/M/Y')
            );

//Run the Query             
$statement = sqlsrv_query($connection, $query, $params);

if (sqlsrv_fetch($statement) === false)
     print_r( sqlsrv_errors(), true);

//Read in the overall numbers
$targetTracker->target = (float)sqlsrv_get_field($statement, 0);
$targetTracker->workingDays = (int)sqlsrv_get_field($statement, 1);
$targetTracker->currentDay = (int)sqlsrv_get_field($statement, 2);
$targetTracker->dailyTarget = (float)sqlsrv_get_field($statement, 3);
$targetTracker->pointsShouldBeOn = (float)sqlsrv_get_field($statement, 4);
$targetTracker->pointsOn = (float)sqlsrv_get_field($statement, 5);
$targetTracker->pointsDifference = (float)sqlsrv_get_field($statement, 6);
$targetTracker->moneyShouldBeOn = (float)sqlsrv_get_field($statement, 7);
$targetTracker->moneyOn = (float)sqlsrv_get_field($statement, 8);
$targetTracker->moneyDifference = (float)sqlsrv_get_field($statement, 9);

//Move to the next result
sqlsrv_next_result($statement);

//Run through all of the agents and show their details
while (sqlsrv_fetch($statement))
{
    $salesPerson = new StdClass();
    $salesPerson->team = sqlsrv_get_field($statement, 0);
    $salesPerson->username = sqlsrv_get_field($statement, 1);
    $salesPerson->target = (float)sqlsrv_get_field($statement, 2);
    $salesPerson->workingDays = (int)sqlsrv_get_field($statement, 3);
    $salesPerson->currentDay = (int)sqlsrv_get_field($statement, 4);
    $salesPerson->dailyTarget = (float)sqlsrv_get_field($statement, 5);
    $salesPerson->pointsShouldBeOn = (float)sqlsrv_get_field($statement, 6);
    $salesPerson->pointsOn = (float)sqlsrv_get_field($statement, 7);
    $salesPerson->pointsDifference = (float)sqlsrv_get_field($statement, 8);
    $salesPerson->moneyShouldBeOn = (float)sqlsrv_get_field($statement, 9);
    $salesPerson->moneyOn = (float)sqlsrv_get_field($statement, 10);
    $salesPerson->moneyDifference = (float)sqlsrv_get_field($statement, 11);

    //Add this person to the people list
    $targetTracker->agents[] = $salesPerson;
}

return $targetTracker;
}
$targetTrackerall = getSalesPersonTargetTracker();

?>
    <table width="100%">
        <thead>
            <tr>
                <th><center>Username</center></th>
                <th><center>Day</center></th>   
                <th><center>%</center></th>     
                <th><center>% +/-</center></th>                 
                <th><center>Actual Total</center></th>
                <th><center>+/- Total</center></th>
            </tr>
        </thead>

    <?php 
    //This loops through every single agent in our array
    foreach ($targetTrackerall->agents as $agent) {
        //If their points difference is a negative, then name & shame them
        if ($agent->pointsDifference < 0)
        {
            ?>
            <tr>
                <td><b><?php echo $agent->username ?></b></td>
                <td style="text-align: center;"><?php echo $agent->currentDay  ?> / <b><?php echo $agent->workingDays?></b></td>
                <td style="text-align: center;"><?php echo $agent->pointsOn ?>%</td>
                <td style="text-align: center;"><?php echo round($agent->pointsDifference) ?>%</td>
                <td style="text-align: center;">£<?php echo number_format($agent->moneyOn) ?></td>
                <td style="color: red; text-align: center;">-£<?php echo number_format(($agent->moneyDifference)*-1) ?></td>

    <?php

        }
    }
    ?>
    </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:25:42.670

您应该使用[usort](http://php.net/manual/en/function.usort.php)并编写一个回调函数，例如

```
 }
    function cmp($a, $b)
    {
        return strcmp($a->username, $b->username);
    }
    usort($targetTracker, 'cmp');

    return $targetTracker;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T20:28:56.960

If the username field is unique then you can use it as the key for the agents array and use ksort on the array.

```
<?php
...

while (sqlsrv_fetch($statement))
{
  ...

  //Add this person to the people list
  $targetTracker->agents[$salesPerson->username] = $salesPerson;
  ksort($targetTracker->agents);
}
...

?> 
```

# javascript - 嵌入技术

> ID：12498845
> 
> 赞同：1
> 
> 时间：2012-09-19T16:20:27.657
> 
> 标签：javascript, styles, embed

我正在为网站管理员寻找一种从我的网站嵌入内容的好方法，为他们提供一个简单的 javascript 片段。

两件事情：

*   如果我附加了一个样式表，它不会破坏他们的吗？
*   内联或附加的 CSS，他们的风格仍然有可能破坏我的风格吗？

FB 或 Youtube 在不使用 iframe 的情况下允许嵌入内容的技术是什么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:28:30.490

FB 使用 iframe。

您可以制作一个您或其他页面可以通过 ajax 加载的 content.html 文件。其中 content.html 不包含整个页面，而只是内容部分。喜欢：

```
<h1>This is important</h1>
<p>here is some text.</p> 
```

例如，使用 jQuery，您可以将 html 文件放置在 div 中，如下所示：`$('#result').load('content.html');`

但我认为这取决于你想分享什么以及分享给谁。在您的情况下，也许 REST API 会更好地工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T22:10:03.310

这只是一种印象，但实际上 Facebook 和其他社交网络确实使用 Iframe。但是它们是由您还必须嵌入的 JS 创建的，这使得他们的技术选择更加强大。稍后他们可能会更新 JS，然后摆脱 iframe 以支持其他内容。

但是，目前，您嵌入了一个带有给定 CSS 类的 div 和 a`data-href`以及 JS。该脚本将找到这些 div`.fb-post`并用包含数据属性指示的帖子的 iframe 填充它。

如果你想让事情变得更简单，你不妨给你的用户一个 iframe，里面有一个响应页面。

# cassandra - Cassanda：创建一个内部包含标准列的超级列

> ID：12498846
> 
> 赞同：0
> 
> 时间：2012-09-19T16:20:31.037
> 
> 标签：cassandra

我试图创建一个内部有 2 个列族的超列族。

我知道如何创建列族，但我如何将它们关联到超列？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:49:25.723

SuperColumns 包含列，而不是 ColumnFamilies。但无论哪种方式，SuperColumns 都不是您想要使用的。请参阅[http://www.datastax.com/dev/blog/schema-in-cassandra-1-1](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)以及可能的[http://www.datastax.com/dev/blog/cql3_collections](http://www.datastax.com/dev/blog/cql3_collections)。

# jquery - jQuery 动画内容

> ID：12498853
> 
> 赞同：0
> 
> 时间：2012-09-19T16:21:04.677
> 
> 标签：jquery, html, css

我曾经访问过一个使用漂亮 jQuery 动画的个人网站。使用滚动条，插件显示不同的信息，几乎像一个字母，但没有遵循线性顺序。像这样的东西：![例子](../Images/8ac39b8e68c25ff45e8044d9868c78dd.png)

当然，当时屏幕上只有一个正方形（div）。

你知道那个插件是做什么的吗？我需要做一些类似的事情，ando 会很有帮助。我尝试搜索了大约一个小时，但我想我不知道这种动画是如何调用的，所以我没有找到任何有用的东西，只是像“转到顶部”这样的滚动效果或动画“转到锚点”的插件功能。

你们中有人见过我说的插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:31:47.790

试试[jQuery 滚动路径](https://github.com/JoelBesada/scrollpath)。演示在[这里](http://joelb.me/scrollpath/)。

# javascript - 从 javascript 函数中更改输入属性

> ID：12498855
> 
> 赞同：1
> 
> 时间：2012-09-19T16:21:26.287
> 
> 标签：javascript, html, ajax, getelementbyid

在我的网页上，我有以下内容：

```
<input type="submit" id="RB$unprocessed[ID]" 
style="background-color:lightsalmon" value="Reject $unprocessed[ID]" /> 
```

在 Ajax 调用期间，我使用以下命令更改颜色：

```
re = document.getElementById("RB" + number);
re.style.background = 'black'; 
```

这工作得很好。我有另一组像这样的输入

```
<input type="submit" id="btn$itemID" style="font-size:15px; background-color:#FFE6E6; height: 50px; width: 500px" value="$tableCount -  $item (Current $oldCost)" /> 
```

我尝试以与第一个相同的方式操纵颜色，

```
getPriceButton = document.getElementById("btn" + itemID);
getPriceButton.style.background = 'blue'; 
```

但是按钮不会改变颜色。这是否与`style=`包含更多背景颜色有关？如果我想操作它们，是否必须单独设置每个属性元素？

感谢您的任何帮助，您可以提供 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:49:08.063

错误在其他地方，上面的代码有效。

# c++ - 联赛夹具算法解释

> ID：12498857
> 
> 赞同：0
> 
> 时间：2012-09-19T16:21:35.193
> 
> 标签：c++, algorithm

这对我有用，但我根本不明白它是如何工作的。谁能解释一下？

```
for(int round = 0; round < rounds_count; round++)
{
    for(int match = 0; match < matches_per_round; match++)
    {
        int home = (round + match) % (teams_count - 1);
        int away = (teams_count - 1 - match + round) % (teams_count - 1);

        if(match == 0)
            away = teams_count - 1;

        matches.push_back(Match(&teams[home], &teams[away], round));
    }
} 
```

模数的诀窍是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:29:18.987

我不确定为什么要使用`teams_count-1`而不是`teams_count`，但总的来说，模数使其“环绕”，因此如果`round+match`大于最后一个团队编号，它将返回到第一个团队中的一个而不是越过最后一支球队。

处理的方式`away`，有点特别。当您有负数时， % 运算符不会以您想要的方式环绕。例如`-1 % 5`给你`-1`而不是`4`. 解决此问题的一个技巧是添加除数。 `(-1+5)%5`给你4。

让我们稍微修改一下代码以使其更清晰。首先，我将使用另一个变量`n`来表示团队的数量（同样我不确定为什么在您的代码中使用 teams_count-1）：

```
int n = teams_count-1;
int home = (round + match) % n;
int away = (n - match + round) % n; 
```

然后我将重新组织`away`计算：

```
int n = teams_count-1;
int home = (round + match) % n;
int away = (round - match + n) % n; 
```

现在应该更清楚的是，主队从本轮开始，然后添加比赛，而客队从本轮开始，然后减去比赛。`% n`使其环绕，而for`+ n`使其`away`以负数正确环绕

# c# - 比较列表框之间的字符串

> ID：12498858
> 
> 赞同：0
> 
> 时间：2012-09-19T16:21:36.320
> 
> 标签：c#, listbox, compare

我有两个包含多个数据的列表框，ListBox1 具有以下格式：

```
C:\Users\Charlie\Desktop\Trials\Trial0004COP.txt 
```

在我的 ListBox2 中：

```
Trial0004COP 
```

如何检查我的 listbox1 中是否存在 Trial0004COP？我使用了 Contain() 但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:36:14.953

我会推荐类似的东西：

```
var searchString = "Trial0004COP";
var isFound = false;
foreach(var name in listbox1.items)
{
    if (Path.GetFileNameWithoutExtension(name).ToLower() == searchString.ToLower())
    {
        _IsFound = true;
        break;
    }
} 
```

请注意，在 Windows 中，文件名保留大小写但不区分大小写，因此您需要检查文件名而忽略其大小写。

*如果这是你的事，你可以在Linq*的一行中完成。

```
var searchString = "Trial0004COP";
var isFound = listBox1.Items.Cast<string>()
                            .Any(x => Path.GetFileNameWithoutExtension(x).ToLower() == searchString.ToLower()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:25:22.017

关于什么：

```
bool found = listBox1.Items.Cast<string>()
                           .Where(x => x.Contains("Trial0004COP"))
                           .Any(); 
```

或者让它更准确的使用方法，但如果你想让它工作，[`String.EndsWith()`](http://msdn.microsoft.com/en-us/library/2333wewz%28v=vs.100%29.aspx)你还必须添加：`".txt"`

```
bool found = listBox1.Items.Cast<string>()
                           .Where(x => x.EndsWith("Trial0004COP.txt"))
                           .Any(); 
```

**编辑 ：**

> 嗨 Fuex，我正在使用 OpenFileDialog 选择一个文件，然后将该文件与所有目录名称一起添加到我的 listbox1 中。在我的 listbox2 中，我读取了另一个包含多个 Trials000""" 的文件并将它们添加到其中，我想知道我从打开对话框中选择的文件是否存在于我的 listboz2

是的可以这样做：

```
bool found = false;
if(openFileDialog.ShowDialog() == DialogResult.OK){
   found = listBox.Items.Cast<string>()
                        .Where(x => x.EndsWith(openFileDialog.FileName))
                        .Any();

   if(!found)
      MessageBox.Show(openFileDialog.FileName + " doesn't exist in listBox1"); //show a message
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:09:45.947

使用*LINQ*，您可以：

```
listBox1.Items.Select(e => Path.GetFileNameWithoutExtension(e as string)).Contains("Trial0004COP"); 
```

# zend-framework - Zend 路由：匹配

> ID：12498861
> 
> 赞同：0
> 
> 时间：2012-09-19T16:21:52.957
> 
> 标签：zend-framework, zend-route

我有这些我需要工作的路线：

```
/user
/user/1
/user/1.json 
```

目前我有

```
 'user'              => array('key' => 'user', 'controller' => 'user'),
        'user/:id'          => array('key' => 'user-id', 'controller' => 'user', 'id' => "\d+"),
        'user/:id.json'     => array('key' => 'user-id-json', 'controller' => 'user', 'id' => "\d+"), 
```

它匹配所有三个 url 的第一条路由。

我试过这样做：

```
 'user'              => array('key' => 'user', 'controller' => 'user'),
        'user/"\d+"'            => array('key' => 'user-id', 'controller' => 'user', 'id' => 1),
        'user/"\d+".json'   => array('key' => 'user-id-json', 'controller' => 'user', 'id' => 1), 
```

但只有第一条路线仍然匹配

Zend Route url 规则中是否有办法“封装” :id 以便将其挑选出来并允许我在它之后放置 / 以外的内容？

* * *

## 更新

我的引导程序使用：

```
public function _initRoutes() {
    $this->addRoutes(array(
        'client'            => array('key' => 'client', 'controller' => 'client'),
        'client/:id'        => array('key' => 'client-id', 'controller' => 'client', 'id' => "\d+"),
        'user'          => array('key' => 'user', 'controller' => 'user'),
        'user/:id'      => array('key' => 'user-id', 'controller' => 'user', 'id' => "\d+")
    ));
} 
```

我的扩展扩展器使用

```
public function addRoutes($routes) {
    $router = Zend_Controller_Front::getInstance()->getRouter();
    foreach ($routes as $pattern => $data) {
        $router->addRoute(
            $data['key'],
            new Zend_Controller_Router_Route(
                $pattern,
                array('controller' => $data['controller'])
            )
        );
    }
} 
```

我试着做 addRoutes 这个：

```
public function addRoutes($routes) {
    $router = Zend_Controller_Front::getInstance()->getRouter();
    foreach ($routes as $pattern => $data) {
        $router->addRoute(
            $data['key'],
            new Zend_Controller_Router_Route(
                $pattern,
                array('controller' => $data['controller'])
            )
        );
        $router->addRoute(
                $data['key'].'-json',
                new Zend_Controller_Router_Route(
                        $pattern.'.json',
                        array('controller' => $data['controller'])
                )
        );

    }
} 
```

但后者例如取消 /user/50

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:16:43.963

首先，不要试图在一条路线上做到这一切；您可以有多个命名路线将您指向同一个地方。如果您尝试为一条路线定义它，则从块中不清楚。如果你是，那么将你的规则分成三个，并给它们相同的变量。

如果您的路线是在 ini 文件中定义的（按照惯例，routes.ini），那么我发现使用 /user/:id/:format 之类的东西更容易。然后，您可以在控制器中使用 Zend contextSwitcher 帮助程序，也可以简单地使用 :format 作为应用程序的提示。在你的路由的 reqs 部分下，你应该有 (\d+) 因为 Zend_Route 寻找子字符串。

如果做不到这一点，您可能能够摆脱 :id:file 并将 .json 定义为该特定路线的要求。如果您必须具有文件扩展名，这可能会起作用。但是，由于您通过将 PHP 脚本提供为 json 来欺骗用户，因此在 Web 服务器级别可能会更好地处理。如果一切都失败了，并且您的正则表达式 foo 由它决定，请创建 Regex 路由器的实例。虽然这是未经测试的，但可能会这样做：

```
/user/(\d+)\.json$ 
```

# facebook - 对齐按钮注释对话框

> ID：12498865
> 
> 赞同：7
> 
> 时间：2012-09-19T16:21:59.670
> 
> 标签：facebook, facebook-like

无论如何，是否可以将单击“喜欢”按钮后出现的评论对话框对齐到左侧而不是右侧。

我想这样做是为了解决我在砌体布局中的页面内容中使用多个“喜欢”按钮时遇到的问题。对话框按钮隐藏在其右侧的元素后面。

[你可以在这里](http://goo.gl/0Rty5)看到一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-03T09:31:17.840

尝试这个

```
<center>
<div id="fb-root"></div><script src="http://connect.facebook.net/en_US/all.js#xfbml=1">
</script><iframe src="//www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2FID_HERE&amp;layout=standard&amp;show_faces=false&amp;colorscheme=light&amp;width=50&amp;height=80" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:50px; height:30px;" allowtransparency="false"></iframe>
```

# python - 导入后如何从 __future__ 中删除/取消导入符号？

> ID：12498866
> 
> 赞同：7
> 
> 时间：2012-09-19T15:20:53.187
> 
> 标签：python

在 python 2.x 中，将两个整数相除会返回一个整数。但是，如果您使用

```
from ___future___ import division 
```

你可以得到一个浮点值：

```
>>> 3/2
1
>>> from __future__ import division
>>> 3/2
1.5
>>> 
>>> 
>>> 3//2
1
>>> 4/3
1.3333333333333333
>>> 
```

之后`import`，您必须使用`//`而不是`/`进行整数除法。如何恢复`import`整数`/`除法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T16:34:48.477

`__future__`导入是特殊的，无法撤消。[你可以在这里](http://docs.python.org/reference/simple_stmts.html#future-statements)阅读他们的行为。

以下是一些相关部分：

> 未来语句在编译时被识别和特殊处理：对核心构造语义的更改通常通过生成不同的代码来实现。甚至可能是新特性引入了新的不兼容语法（例如新的保留字），在这种情况下，编译器可能需要以不同的方式解析模块。这样的决定不能推迟到运行时。
> ...
> 在交互式解释器提示下键入的未来语句将在解释器会话的其余部分生效。

由于`__future__`语句是在编译时而不是运行时处理的，因此没有运行时方法可以恢复更改的行为。

使用普通模块，您可以删除或取消导入模块，方法是删除从命名空间导入的任何内容，并删除该导入的条目[`sys.modules`](http://docs.python.org/library/sys.html#sys.modules)（根据用例，第二部分可能不是必需的，它所做的只是强制重新加载如果再次导入模块）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T16:29:43.617

`import`语句对于您导入的文件是本地的，例如，如果您将此文件设置为`example.py`：

```
from __future__ import division
print(1/2) 
```

然后将其加载到另一个文件中：

```
import example # prints 0.5 because `division` is imported in example.py
print(1/2) # prints 0 because `division` is not imported in this file 
```

因此，如果您想要仅在某些代码中使用的导入，请将该代码放在单独的文件中。

在您提供的情况下，我不确定它是否有帮助。为什么不只`//`在需要整数除法时使用？

# iphone - XCode 4.5 给我“SenTestingKit/SenTestKit.h”文件未找到，但适用于 4.4.1

> ID：12498868
> 
> 赞同：9
> 
> 时间：2012-09-19T16:22:28.560
> 
> 标签：iphone, ios, ios6, xcode4.5

我刚刚安装了 XCode 4.5，它在我现有的一个项目中给了我一个“SenTestingKit/SenTestingKit.h”文件未找到错误。这个错误只发生在 XCode 4.5 中，但它在 4.4.1 上编译得很好。我已经检查过了SenTesting 框架已添加到测试目标中，并且我验证了在其他几台机器上也出现了相同的错误。还有其他人遇到过这个吗？

提前感谢您的智慧！

*更新* 我能够通过在构建设置中的一些框架搜索路径周围放置引号来解决这个问题......

“$(SDKROOT)/开发者/库/框架”

“$(DEVELOPER_LIBRARY_DIR)/框架”

由于我在 4.4.1 旁边安装了 XCode 4.5 GM，我猜 4.5 版本的名称中有一个空格。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T16:26:53.360

也许它只是缺少框架并且在它只是引用它并且没有复制到您的项目文件夹之前。

这可能会有所帮助：您可以单击您的应用程序名称，然后单击屏幕中心附近的“构建阶段”选项卡。然后转到“Link Binary with Libraries”并单击“+”符号并键入“SenTest”，框架应该会出现。双击它，它会将其添加到您的项目中。在您的项目资源管理器中，您可能希望将其“拖动”到“框架”文件夹中，以进行组织。

我没有相同的错误，并且有两个版本的 XCode，所以我只是猜测它可能是什么。我希望这是有帮助的。

* * *

这也是预发布软件，因此可能无法公开讨论。有关先前升级期间的类似问题，请参阅此 SO 文章。

参见： [Xcode - 未找到 SenTestingKit](https://stackoverflow.com/questions/3354891/xcode-sentestingkit-not-found)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T16:33:28.220

我在 XCode 4.5 中遇到了与 libxml 类似的问题，我设法通过在目标的 Build Settings 中更改对框架的引用来解决它。奇怪的是，我将 ($SDKROOT) 更改为“($SDK_DIR)”（注意“”）并且它起作用了。不知道为什么，但它修复了它。
也许这会有所帮助

顺便说一句，如果有人知道为什么“”修复它，我会很高兴知道！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T12:03:44.647

`SenTestingKit/SenTestingKit.h`在我现有的一个项目中找不到文件错误。您可以点击您的 App Name，然后点击**Build Phases**。

# java - 如何测试我的 Web 应用程序是否可以处理“100 个用户”？

> ID：12498873
> 
> 赞同：3
> 
> 时间：2012-09-19T16:22:45.583
> 
> 标签：java, jakarta-ee, testing, web

我有一个使用 Java EE 5 (WebSphere 7) 构建的 Web 应用程序。基本架构是这样的：

```
*.jsp -> ControllerServlet + *Command(s).java -> *Service.java -> *DAO.java -> Oracle DB 
```

它运行良好，我相信一切都很酷，但我的要求之一是证明该应用程序可以支持多达 100 个同时用户。

我的自动化 JUnit 测试优于 *Service.java 类的方法，但我没有针对 *.jsp 层的自动化测试。

我的问题是，测试/证明应用程序可以处理 100 个同时用户的活动的好/合理的方法是什么？

非常感谢任何帮助，谢谢。

抢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:24:27.953

您正在寻找[JMeter](http://jmeter.apache.org/)或[Apache Benchmark 。](http://httpd.apache.org/docs/2.2/programs/ab.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T16:24:32.617

使用负载测试框架，例如[The Grinder](http://grinder.sourceforge.net/)

# sdl - 在播放过程中获取数据。开放式

> ID：12498874
> 
> 赞同：2
> 
> 时间：2012-09-19T16:22:46.753
> 
> 标签：sdl, openal, graphic

在 OpenAl 中播放时是否可以获取声音数据？例如：我产生白噪声，我想以图表的幅度和频率的形式呈现它。因此，我想获取实际播放的声音部分，并将其与 SDL 一起使用。

# mysql - MySQL - 删除 dublet 并保留第一个实例

> ID：12498876
> 
> 赞同：0
> 
> 时间：2012-09-19T16:22:53.943
> 
> 标签：mysql, tsql

我创建了一个非常凌乱的表，我需要清理它。这不是一件容易的事。

情况：

*   凌乱的表被称为 tbl_users。
*   它包含有关用户的信息。它有一个唯一的 ID。
*   最独特的列是phone_number，它标识了一个用户。

出于各种原因，我在此表中不止一次有同一个用户使用同一个电话号码。

您可以在名为 created_date 的列中查看它的创建时间。

我需要的：

*   我需要找到每个用户的第一个创建的实例，然后我需要找到
*   用户的第二个甚至第三个实例的所有 ID（如果存在）。

我需要 ID，因为有来自其他表的数据，我需要将 user_id 更改为第一个实例。

我该如何继续这个挑战？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:27:18.433

```
select t.*, (t.created_date = tf.minDate) as IsFirst
from tbl_users t
inner join (
    select phone_number, min(created_date) as minDate
    from tbl_users
    group by phone_number
) tf on t.phone_number = tf.phone_number 
```

# windows - 当路径包含空格时，如何使用通配符从 MS DOS 批处理文件中删除多个文件？

> ID：12498877
> 
> 赞同：2
> 
> 时间：2012-09-19T16:22:57.527
> 
> 标签：windows, batch-file, filepath

假设我有一个目录，其中包含以下文件：

Test.bat Test_a.txt Test_b.txt Test_v1.zip Test_v2.zip Test_v3.zip

我想`Test_v*.zip`悄悄地删除所有内容（没有错误消息记录到屏幕上）。我可以使用以下脚本来实现这一点：

```
@ECHO OFF
SET OLD_ZIPS=^
C:\Tmp\Test_v*.txt;^
C:\Tmp\Test_a.txt

ECHO Deleting the following files: %OLD_ZIPS%

FOR %%Y IN (%OLD_ZIPS%) DO (
IF EXIST %%Y (
ECHO  Deleting %%Y
DEL /Q %%Y)
)

PAUSE 
```

这工作正常：

```
Deleting the following files: C:\Tmp\Test_v*.txt;C:\Tmp\Test_a.txt
Deleting "C:\Tmp\Test_v1.txt"
Deleting "C:\Tmp\Test_v2.txt"
Deleting "C:\Tmp\Test_a.txt"
Press any key to continue . . . 
```

*当然，除非*文件路径包含空格。所以在上面的例子中，如果我`C:\Tmp\Test_v*.txt`改为`C:\Tmp with spaces\Test_v*.txt`我得到：

```
Deleting the following files: C:\Tmp test\Test_v*.txt;C:\Tmp test\Test_a.txt
Press any key to continue . . . 
```

我怎样才能阻止它在空间上犹豫不决？

**编辑**- 我已经按照 Alex K 的回答尝试了空格（加上更多的调试），看起来 for 循环可能没有像我预期的那样把事情分开：

```
@ECHO OFF
SET OLD_ZIPS=^
C:\Tmp test\Test_v*.txt;^
C:\Tmp test\Test_a.txt

ECHO Deleting the following files: %OLD_ZIPS%

FOR %%Y IN (%OLD_ZIPS%) DO (
ECHO  Checking existance of "%%Y"
IF EXIST "%%Y" (
ECHO  Deleting "%%Y"
DEL /Q "%%Y")
)

PAUSE 
```

..给我：

```
Deleting the following files: C:\Tmp test\Test_v*.txt;C:\Tmp test\Test_a.txt
 Checking existance of "C:\Tmp"
 Checking existance of "C:\Tmp"
 Checking existance of "test\Test_a.txt" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:28:11.917

似乎您正试图使事情变得过于复杂。

```
for %a in ("C:\Tmp with spaces\Test_v*.txt" "C:\Tmp\Test_a.txt") do del /q "%a" 
```

做你想做的事，并且可以从命令行输入。如果要在批处理文件中执行，请将 %a 更改为 %%a

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:14:13.853

该函数需要单独遍历每一行，因此您需要在 FOR 循环中引用变量，在分号上对其进行标记，冲洗并重复。

```
@ECHO OFF
SET OLD_ZIPS=^
C:\tmp with spaces\Test_v*.txt;^
C:\tmp\Test_a.txt

ECHO Deleting the following files: %OLD_ZIPS%

:deleteFiles
for /f "tokens=1* delims=;" %%A in ("%OLD_ZIPS%") do (
    ECHO  Checking existance of "%%A"
    IF EXIST "%%A" (
        ECHO  Deleting "%%A"
        DEL /Q "%%A"
    )
    set OLD_ZIPS=%%B
)
if not "%OLD_ZIPS%" == "" goto :deleteFiles

PAUSE 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T16:54:54.437

奇怪的是，这似乎有效。我已将我的版本编辑为看起来像您的版本，因此请尝试修改任何语法错误；-)

```
@ECHO OFF
SET OLD_ZIPS="C:\Tmp with spaces\Test_v*.txt";^
"C:\Tmp with spaces\Test_a.txt";

ECHO Deleting the following files: %OLD_ZIPS%

FOR %%Y IN (%OLD_ZIPS%) DO (
IF EXIST %%Y (
ECHO  Deleting %%Y
DEL /Q %%Y)
)

PAUSE 
```

# javascript - jsp页面上的动态document.ready id

> ID：12498881
> 
> 赞同：0
> 
> 时间：2012-09-19T16:23:04.570
> 
> 标签：javascript, html, jsp

我有一个动态生成的 jsp 网页。我想在一些图像上有工具提示，而我正在使用的工具提示脚本要求每个图像都有一个唯一的 id 并`$(document).ready(function(){});`引用该图像 id。这可能吗？我可以轻松地为 html img 标签生成一个唯一的 id，但是当我尝试对脚本执行相同操作时，它会出错。我已经包含了我的代码。

```
<logic:iterate id="results" name="appStatus" scope="session">
    <logic:equal name="results" property="name" value='<%= name%>'> 
        <td>
            <logic:equal value="up" name="results" property="status">
                <img src="img/status_up.png">
            </logic:equal>
            <logic:equal value="down" name="results" property="status">
                <img id="alert" src="img/status_alert.png">
                <div class="tooltip">
                    <bean:write name="results" property="description"/>
                </div>
                <script>
                    $(document).ready(function() {
                        $("#alert").tooltip({ position: 'right top', effect: 'slide'});
                    });
                </script>
            </logic:equal>
            <logic:equal value="other" name="results" property="status">
                <img id="other" src="img/status_info.png">
                <div class="tooltip">
                    <bean:write name="results" property="description"/>
                </div>
                <script>
                    $(document).ready(function() {
                        $("#other").tooltip({ position: 'right top', effect: 'slide'});
                    });
                </script>
            </logic:equal>
        </td>
    </logic:equal>
</logic:iterate> 
```

所以对于这段代码，每个 ID 为“alert”的 img 都需要有自己的唯一 ID，并且文档准备脚本需要引用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:48:02.353

给`<img>`一个唯一的 id：

```
<img id="alert<c:out value='${indexNum}' />" src="img/status_alert.png"> 
```

同样在脚本中：

```
$(document).ready(function() {
                        $("#alert<c:out value='${indexNum}' />").tooltip({ position: 'right top', effect: 'slide'});
                    }) 
```

所以 id 将是 alert0、alert1 等。 indexNum 是我给迭代次数变量指定的名称，为它指定名称，如下所示：

```
<logic:iterate id="results" name="appStatus" scope="session" indexId="indexNum"> 
```

# jquery - 如何仅使用按钮和 jQuery-Freemarker 制作重定向页面？

> ID：12498882
> 
> 赞同：0
> 
> 时间：2012-09-19T16:23:09.507
> 
> 标签：jquery, freemarker

我有一个按钮有问题，我希望它重定向到另一个页面，我使用了但 它`location.href`也不起作用*createDiscoveryProject*方法是这样的： `$(location).attr('href','url')``<input type="button" value="New Project" onclick="createDiscoveryProject()"/>`*`function createDiscoveryProject(){$(location).attr('href',[@spring.url '/myPage'])}`*

 *现在，当我单击按钮时，即使我在*createDiscoveryProject*中添加了警报方法，也不会弹出任何警报，最后我想添加 JavaScript 方法在模板 ftl 文件中，而按钮在另一个 ftl 文件中。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:26:34.170

既然您已经在使用 jQuery，为什么不将准备好的文档上的函数绑定到按钮。不要误会我的意思，你正在做的方式应该完全有效，但由于你说即使警报不起作用，你的代码中可能还有另一个 js 错误，所以也许这样你就可以解决它。

所以：

```
$(document).ready(function(){
   $("button").click(function(){
      window.location.href = "http://domain.tld";
   });
}); 
```*

# facebook - 显示域的 Facebook 应用 URL

> ID：12498884
> 
> 赞同：0
> 
> 时间：2012-09-19T16:23:13.397
> 
> 标签：facebook, asp.net-mvc-3

如何让我为 Facebook 编写的（ASP.NET MVC3）应用程序使用（显示）[此](http://apps.facebook.com/sweepstakeshq/)应用程序中的 URL？

请注意，如果您将鼠标悬停在该 facebook 应用程序上的链接上，则 URL 将更改为[http://apps.facebook.com/namespace-of-that-application](http://apps.facebook.com/namespace-of-that-application)。

在我的应用程序中，我得到了 [http://MY-DOMAIN.COM/SOME-LINK](http://MY-DOMAIN.COM/SOME-LINK)。显然我做错了什么！什么？

# html - 在 IE7 上使用 inline-block 不同的行高

> ID：12498885
> 
> 赞同：0
> 
> 时间：2012-09-19T16:23:23.717
> 
> 标签：html, internet-explorer-7, inline, css

我正在创建一个在 IE7 中工作的网页。我想在气泡中垂直居中一个跨度（可能有几行长）。`line-height`通过将跨度父级的属性设置为跨度父级本身的高度，我在现代浏览器中实现了这一点。然后为 span 赋予`display`属性`inline-block`，将其`line-height`属性设置为与其字体大小相对应的内容，并将其`vertical-align`属性设置为`middle`. 但是，当我尝试在 IE7 中查看它时，跨度文本的行高似乎不是跨度的行高，而是跨度父级的行高。就好像跨度没有 inline-block 显示属性，因为如果它是内联的，这就是您所期望的。由于 span 元素默认是内联的，因此您可能希望 inline-block 属性在 IE7 中有效，但事实并非如此。我尝试过应用诸如css-tricks建议`zoom: 1;`的[“跨浏览器内联块”之](http://css-tricks.com/snippets/css/cross-browser-inline-block/)类的东西，但这些都不起作用。我正在认真考虑使用桌子，但这真的不是我想诉诸的东西。

您可以在[http://jsfiddle.net/sAuhsoj/bWdwE/](http://jsfiddle.net/sAuhsoj/bWdwE/)查看问题（您可能希望使用[browserlab.adobe查看全屏版本](http://browserlab.adobe.com)[http://jsfiddle.net/sAuhsoj/bWdwE/embedded/result/](http://jsfiddle.net/sAuhsoj/bWdwE/embedded/result/) [.com](http://browserlab.adobe.com)看看它在 IE7 中的样子）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:46:08.363

要使用 CSS hack 定位 IE7，您可以添加以下显示规则：

```
*display : block; 
```

如此编写的 **属性*仅由 IE7 和更低版本处理。

* * *

我可以建议您对[标签使用](http://kaioa.com/node/107)[条件注释`<html>`](http://kaioa.com/node/107)吗？就个人而言，我使用：

```
<!--[if lt IE 8]>  <html class="ie ielt8 ielt9"> <![endif]-->
<!--[if IE 8]>  <html class="ie ie8 ielt9"> <![endif]-->
<!--[if IE 9]>  <html class="ie ie9"> <![endif]-->
<!--[if gt IE 9]> <html class="ie10"> <![endif]-->
<!--[if !IE]>--> <html> <![endif]--> 
```

然后我可以这样定位任何 IE 浏览器：

```
.ielt8 .anyClass {
    /* any rule here will effect ie7-6 only */
}
.ie8 .anyClass {
    /* any rule here will effect ie8 only */
}
.ielt9 .anyClass {
    /* any rule here will effect ie6-7-8 only */
}
.ie9 .anyClass {
    /* any rule here will effect ie9 only */
}
.ie10 .anyClass {
    /* ie10, for future reference */
}
.ie .anyClass {
    /* any ie but 10 */
} 
```

这真的很容易，你不必使用黑客，这更适合验证，并且会排除任何未来可能的干扰。

在您的情况下，您可以为 IE7 设置全新的样式，例如

```
.userQuote .quoteText {
    display: block;
    line-height: a pixel value;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T20:36:56.647

在这种特殊情况下，问题是`rem`在 line-height 属性上使用单位。

通过简单地更改`rem`为`em`，它解决了 IE 中的问题。

[http://jsfiddle.net/bWdwE/2/](http://jsfiddle.net/bWdwE/2/)

# android - 在 Android 应用之间共享 Facebook 应用 ID

> ID：12498888
> 
> 赞同：21
> 
> 时间：2012-09-19T16:23:42.957
> 
> 标签：android, facebook

[Facebook iOS SDK 的此页面](http://developers.facebook.com/docs/howtos/share-appid-across-multiple-apps-ios-sdk/)说明了如何在多个 iOS 应用程序之间共享一个 Facebook 应用程序 ID。但是，我无法在 Facebook 开发者网站的 Android 区域找到相同的文档。有没有其他人有这样做的经验，或者它在 Android 中根本不可用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-04-27T09:49:32.767

比 iOS 更简单，您可以在多个 Android 应用程序中使用一个 Facebook 应用程序 ID。

在此处查看[此链接](https://developers.facebook.com/docs/android/troubleshooting#faq_105681056526435)

我引用：

> 跨应用共享应用 ID
> 
> 您可以在多个 Android 应用程序中使用一个 Facebook 应用程序 ID。只需在另一个应用程序中使用相同的应用程序 ID 进行登录、共享等。
> 
> 对于通过通知和其他方式深度链接和打开您的应用程序，我们仅支持单个包名/类名组合。
> 
> 如果您想要深度链接的多应用支持，请参阅应用链接。

# java - 为什么我的 JSON-Simple JSONArray 会给我一个空指针异常？

> ID：12498889
> 
> 赞同：0
> 
> 时间：2012-09-19T16:23:52.843
> 
> 标签：java, json, nullpointerexception, arrays, json-simple

我在[这里](http://www.mkyong.com/java/json-simple-example-read-and-write-json/)关注这个教程，我的 JSON 对象几乎相同，除了我有这种格式：

```
{"user":{
    "SomeKeys":"SomeValues",
    "SomeList":["val1","val2"]
    }
} 
```

这是我的相关代码：

```
Object obj = parser.parse(new FileReader("exampleJson.json"));

JSONObject jsonObject = (JSONObject) obj;
JSONObject user = (JSONObject) jsonObject.get("user");
JSONArray list = (JSONArray) user.get("SomeList"); 
```

然后我的程序关闭并从键等中获取值。或者它会但我`NullPointerException`从 eclipse 中得到一个。*为什么是这样？*

它应该将我的`.json`文件`jsonObject`解包为 ，将“user”键解包为 JSONObject `user`，然后将“SomeList”键解包为名为`list`. 除非它这样做，否则它必须尝试将其中一个`val1`或`val2`放入 JSONArray 的一部分中，该部分不存在，只是指向`null`. *我做~~了什么让这个~~错？*

**如何修复我的程序？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:50:05.450

您的代码对我来说效果很好

```
public class App {

    public static void main(final String[] args) throws FileNotFoundException, IOException, ParseException {
        final Object obj = new JSONParser().parse(new FileReader("D:/a.json"));
        final JSONObject jsonObject = (JSONObject) obj;
        final JSONObject user = (JSONObject) jsonObject.get("user");
        final JSONArray list = (JSONArray) user.get("SomeList");
        System.out.println(list);
    }
} 
```

文件`D:/exampleJson.json`

```
{"user":{
    "SomeKeys":"SomeValues",
    "SomeList":["val1","val2"]
    }
} 
```

输出是

```
["val1","val2"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:56:35.850

使用完全相同的 json 文件：

```
{"user":{
    "SomeKeys":"SomeValues",
    "SomeList":["val1","val2"]
    }
} 
```

这是我使用的代码（通过导入来确保我们拥有相同的代码）：

```
import java.io.FileReader;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;

public class Test {

    public static void main(String[] args) throws Exception {
        Object obj = new JSONParser().parse(new FileReader("t.json"));

        JSONObject jsonObject = (JSONObject) obj;
        JSONObject user = (JSONObject) jsonObject.get("user");
        JSONArray list = (JSONArray) user.get("SomeList");
        System.out.println(list);
    }
} 
```

这是输出：

```
["val1","val2"] 
```

我使用 maven 和 m2e 来导入库。用于此测试的版本是`json-simple-1.1.jar`.

# android - 更改语言环境后更改资源的错误

> ID：12498890
> 
> 赞同：1
> 
> 时间：2012-09-19T16:23:53.693
> 
> 标签：android, locale

我写了一个小应用程序，它有一些语言环境和语言选项。当用户更改区域设置时，OptionsActivity 将重新启动并更新配置。MainActivity 也在 onRestart() 方法中更新配置。一切都很好，但是如果用户点击选项硬件按钮，选项菜单会使用首先加载的本地化资源创建。我用代码创建选项菜单：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    Log.d(Const.LOG_TAG, "onCreateOptionsMenu");
    final MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.activity_main, menu);
    return true;
} 
```

/菜单/activity_main.xml：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/menu_settings"
        android:icon="@drawable/setting_icon"
        android:title="@string/menu_settings"/>
</menu> 
```

menu_setting 是本地化字符串。怎么了？为什么有些资源在更新，而有些资源没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:53:56.500

我懂了。

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    Log.d(Const.LOG_TAG, "Menu prepared");
    MenuItem item = menu.findItem(R.id.menu_settings);
    item.setTitle(R.string.menu_settings);
    return true;
} 
```

# c - rand() 和 sleep() 是如何在内核模块中创建的？

> ID：12498891
> 
> 赞同：1
> 
> 时间：2012-09-19T16:23:54.187
> 
> 标签：c, linux-kernel

如标题所示：如何调用 sleep()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:32:48.287

您可以使用 get_random_bytes()，对 sleep() 的类似调用也存在，例如 msleep()、usleep() 等，具体取决于您想要做什么。注意 *sleep() 不能在原子上下文中使用，您需要使用 *delay()。通常，在内核中使用 sleep()/delay() 调用之前，您需要三思而后行。

如果您正在编写设备驱动程序并且您希望确保设备已完成任何操作（假设您不能为此使用中断并且您需要轮询一些寄存器左右），那么请考虑使用 msleep(10) 而不是使用 msleep(2) 或类似方法进行 5 次循环，轮询寄存器并尽早中断。您等待的时间至少是您请求的时间，并且取决于系统负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:54:29.423

dmp 是对的。牢记以上所有要点，您还可以尝试使用这个简单的宏来模拟 sleep(3) 内核调用：

```
#ifdef __KERNEL__
/*------------ DELAY_SEC -------------------------*
 * Delays execution for n seconds.
 * MUST be called from process context.
 *------------------------------------------------*/
#define DELAY_SEC(val) \
{ \
    if (!in_interrupt()) {  \
        set_current_state (TASK_INTERRUPTIBLE); \
        schedule_timeout (val * HZ); \
    }   \
}
#endif 
```

# nhibernate - 不同的分页列表 sorted on joined table Been trying to get the following working using nhibernate HQL or QueryOver. I am trying to get a sorted DISTINCT list of the entity organisation while sorting on joined tables and using paging. Enti 问问题 问问题 2012-09-19T16:24:01.023 222 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Been trying to get the following working using nhibernate HQL or QueryOver. I am trying to get a sorted DISTINCT list of the entity organisation while sorting on joined tables and using paging. Entities are (shortened version): Organisation OrganisationId Name StatusId SubstatusId Address AddressId OrganisationId City CountryId ListItem ListItemId Name StatusId, SubstatusId and CountryId are foreign keys to ListItemId ListItemId is a list of user entered options. There can be more than one address for each organisation To sort on Organisation.Address[x].Country.Name I need to include this in the select, but obviously then I dont get distinct organisations rather distinct organisations for a particular address. I cant then get this into the nHibernate entity as it has the additional Country.Name field. Also I cant run another distinct over the initial results as im using .SetFirstResult and .SetMaxResults to do SQL Paging. If I only want 10 rows, then I initially get 10 rows of distinct (organisation + country name). When i run another distinct over this will get reduced if an organisation has more than address. Any ideas how to get a distinct paged list of organisations while sorting on Address.Name, Status.Name, SubStatus.Name You could do it with 2 selects and a bit of linq: Do your projection selecting Organisation.Id, Address.Name, Status.Name, SubStatus.Name, ordering them appropriately and paging the results (well you just need to select Organisation.Id) Do another query to load the organisations by the Id's in the previous projection Combine the queries to order the list of organisations by their order in the first select nhibernatesortingjoin 4 1 回答 1 This answer is useful 0 您可以使用 2 个选择和一些 linq 来完成： 选择 Organisation.Id、Address.Name、Status.Name、SubStatus.Name 进行投影，对它们进行适当排序并分页结果（你只需要选择 Organisation.Id） 执行另一个查询以按上一个投影中的 Id 加载组织 结合查询以在第一个选择中按组织列表排序 于 2012-09-20T08:39:16.527 回答 Related 1 controller - 控制器内部的钩子 4 javascript - 输出变量onclick 1 android-ndk - 使用 OpenSL ES 的 Android NDK 测试应用 4 python - python中的类型错误 1 php - ZF Doctrine 模型类 ext Base Class 1 jquery - 使用 jQuery-UI 使包含 SWF 对象的 DIV 在 IE9 中可拖动 2 java - 如何使用 JFileChooser 在 Ubuntu 中浏览映射驱动器中的文件 1 ruby - 等待 webdriver 对象类型检测 1 c# - 如何使用来自 WinDbg 的调试信息 1 reportlab - 有没有办法在 SimpleDocTemplate 的 onFirstPage 中使用表 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12498892
> 
> 赞同：1
> 
> 时间：
> 
> 标签：nhibernate, sorting, join

Been trying to get the following working using nhibernate HQL or QueryOver. I am trying to get a sorted DISTINCT list of the entity organisation while sorting on joined tables and using paging. Entities are (shortened version):

Organisation

```
 OrganisationId
 Name
 StatusId
 SubstatusId 
```

Address

```
 AddressId
 OrganisationId
 City
 CountryId 
```

ListItem

```
 ListItemId
 Name 
```

StatusId, SubstatusId and CountryId are foreign keys to ListItemId ListItemId is a list of user entered options. There can be more than one address for each organisation

To sort on Organisation.Address[x].Country.Name I need to include this in the select, but obviously then I dont get distinct organisations rather distinct organisations for a particular address.

I cant then get this into the nHibernate entity as it has the additional Country.Name field.

Also I cant run another distinct over the initial results as im using .SetFirstResult and .SetMaxResults to do SQL Paging. If I only want 10 rows, then I initially get 10 rows of distinct (organisation + country name). When i run another distinct over this will get reduced if an organisation has more than address.

Any ideas how to get a distinct paged list of organisations while sorting on Address.Name, Status.Name, SubStatus.Name

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:39:16.527

您可以使用 2 个选择和一些 linq 来完成：

1.  选择 Organisation.Id、Address.Name、Status.Name、SubStatus.Name 进行投影，对它们进行适当排序并分页结果（你只需要选择 Organisation.Id）

2.  执行另一个查询以按上一个投影中的 Id 加载组织

3.  结合查询以在第一个选择中按组织列表排序

# ios - 尝试在 iOS 上组装

> ID：12498894
> 
> 赞同：0
> 
> 时间：2012-09-19T16:24:03.430
> 
> 标签：ios, assembly, arm

请注意：我只是想学习。请不要因为我玩弄组装而对我大喊大叫。

我有以下方法：

```
uint32 test(int16 a, int16 b)
{
  return ( a + b ) & 0xffff;
} 
```

我根据在[这里](http://www.shervinemami.info/armAssembly.html)找到的详细信息创建了一个 .s 文件。

我的 .s 文件包含以下内容：

```
.macro BEGIN_FUNCTION
.align 2        // Align the function code to a 4-byte (2^n) word boundary.
.arm            // Use ARM instructions instead of Thumb.
.globl _$0      // Make the function globally accessible.
.no_dead_strip _$0  // Stop the optimizer from ignoring this function!
.private_extern _$0
_$0:                // Declare the function.
.endmacro

.macro END_FUNCTION
bx  lr      // Jump back to the caller.
.endmacro

BEGIN_FUNCTION addFunction
  add       r0, r0, r1      // Return the sum of the first 2 function parameters
END_FUNCTION

BEGIN_FUNCTION addAndFunction
  add       r0, r0, r1      // Return the sum of the first 2 function parameters
  ands      r0, r0, r2      // Ands the result of r0 and the third parameter passed
END_FUNCTION 
```

因此，如果我调用以下命令：

```
addFunction(10,20) 
```

我得到了我所期望的。但是如果我尝试

```
int addOne = addFunction(0xffff,0xffff); // Result = -2
int addTwo = 0xffff + 0xffff;            // Result = 131070 
```

![两个值的截图](../Images/2c3b1e293199ecbd8fd3b26dbd3bcbe4.png)

我的 addOne 最终与我的 add 2 的值不同。关于我在这里做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:51:11.467

当您将`int16_t`参数传递`0xffff`给`addFunction`编译器时，将其符号扩展以适合 32 位寄存器（因为它是有符号整数），使其成为`0xffffffff.`您将其中两个加在一起以获取`0xfffffffe`并返回它。当您这样做时，`0xffff + 0xffff`这两个常量已经是 32 位，因此无需对扩展进行签名，结果为`0x0001fffe`.

您需要了解的是，当您使用有符号整数并传递 16 位值`0xffff`时，您实际上是在`-1`传递`-1 + -1 = -2`. 这也不足为奇`0xffff + 0xffff = 0xfffffffe`。

如果您更改（未显示）C 声明`addFunction`以采用两个*无符号*整数，那么您将获得您想要的结果（编译器不会进行符号扩展）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:52:17.013

您的汇编代码假定第三个传递参数（在 R2 中），但是当您调用该函数时，您只传递了 2 个参数。我认为 R2 的内容可以是您 addFunction 中的任何内容。

# php - 警告：文件大小功能无法运行

> ID：12498895
> 
> 赞同：3
> 
> 时间：2012-09-19T16:24:09.413
> 
> 标签：php, warnings, filesize, if-statement

以下代码：

```
<?php
$filevar = "/images/staunton/{$options_item['base_var']}.gif";

if(filesize($filevar) > 1616){
    $setstatus = "enabled";
}
else{
    $setstatus = "disabled";
}       
?> 
```

结果是：

```
Warning: filesize() [function.filesize]: stat failed for /images/staunton/3-25.gif in [Originating PHPFILE(Edited)] on line 24 
```

路径是正确的文件....我的托管服务器正在运行 php 5.2 - 这是一个语法错误吗？我一直在查看类似的代码，它看起来似乎是正确的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T16:38:31.453

而不是这个：

```
$filevar = "/images/staunton/{$options_item['base_var']}.gif"; 
```

你可能想要：

```
$filevar = $_SERVER["DOCUMENT_ROOT"] . "/images/staunton/{$options_item['base_var']}.gif"; 
```

因为您可能混淆了页面**文档根目录中图像的相对路径与文件系统中图像的****绝对路径**。

试试看，然后评论。

# cakephp - 路由和 CakePHP 2.2.2 的问题

> ID：12498896
> 
> 赞同：0
> 
> 时间：2012-09-19T16:24:10.777
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.2

我已经在 II7 上的 Windows 上安装了 CakePHP，但我遇到了路由问题。我为**用户**创建了一个模型、一个控制器和一个视图。

当我尝试访问索引视图时，我这样做没有任何问题：

```
http://myhost/cakephp/users/ 
```

但是，当我尝试添加新用户时，视图无法正确加载：

```
http://myhost/cakephp/users/add/ 
```

它显示了这个错误：

```
Error: AddController could not be found.
Error: Create the class AddController below in file: app\Controller\AddController.php 
```

为了使其工作，我必须在*app/Config/routes.php*中执行此操作：

```
Router::connect('/users/add', array('controller' => 'users', 'action' => 'add')); 
```

但如果它运作良好，那就没有必要了。*删除*或*查看*视图都不会加载。

这是怎么回事？我怎样才能发现问题？谢谢。

# 编辑

routes.php 的内容：

```
Router::connect('/', array(
    'controller' => 'pages', 'action' => 'display', 'home'
));
Router::connect('/pages/*', array(
    'controller' => 'pages', 'action' => 'display'
));
CakePlugin::routes();
require CAKE . 'Config' . DS . 'routes.php'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:24:33.447

好的，看来我已经解决了。这完全是因为使用 cake bake 控制台添加了路由前缀......我不得不在**core.php评论这一行**

```
 Configure::write('Routing.prefixes', array('users')); 
```

# applescript - AppleScript - AppleEvent 处理程序失败

> ID：12498897
> 
> 赞同：1
> 
> 时间：2012-09-19T16:24:11.590
> 
> 标签：applescript, quicktime

我有一个脚本，而不是登录，询问用户是否想看电影。在大多数情况下，它工作得很好。但是，有时出于我未知的原因，我会收到 AppleEvent 处理程序失败错误。我已经阅读了有关此错误的其他帖子，但它们似乎都是独一无二的。所以，如果可能的话，有人可以看看我的脚本，告诉我为什么偶尔会出现这种情况，如果我能做些什么来阻止它？

可能有助于了解的一件事是，当发生此错误时，脚本中失败的一件事是电影无法播放。它会在 quicktime 中打开，但不会启动。

在此先感谢，这是脚本。

```
tell application "Welcome" to activate
set question to display dialog "Would you like a welcome video?" buttons {"No, I've seen it", "Yes, please"} default button 2
set answer to button returned of question
if answer is equal to "Yes, please" then tell application "QuickTime Player"
    set theMovie to "Macintosh HD:Library:Desktop Pictures:Mac ML Opening Chalkbaord Video.mov"
    set openMovie to open theMovie
    present openMovie
    play openMovie
    delay 30
    quit
end tell
if answer is equal to "No, I've seen it" then tell application "Welcome"
    quit
    tell application "System Events"
        delete login item "Welcome"
    end tell
end tell 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:25:52.540

我的猜测是，您可能需要在打开和播放电影之间进行延迟。有时代码运行的速度比计算机的反应速度还要快。如果是这种情况，那么当代码告诉电影播放时，电影可能仍在尝试打开......因此出现错误。因此，我添加了 2 个重复循环来检查事物以确保它们在继续代码中的下一步之前可用。您还需要在代码中“打开文件”，而不仅仅是“打开”。

您在 if 语句中告诉应用程序做某事的方法是不寻常的。我不会那样做的。我还将您的 if 语句合并为一个 if/else if 语句。无论如何，这就是我编写代码的方式（我假设应用程序“欢迎”是代码本身）。我希望这有帮助！

```
set theMovie to "Macintosh HD:Library:Desktop Pictures:Mac ML Opening Chalkbaord Video.mov"

tell me to activate
set question to display dialog "Would you like a welcome video?" buttons {"No, I've seen it", "Yes, please"} default button 2
set answer to button returned of question

if answer is equal to "Yes, please" then
    tell application "QuickTime Player"
        activate
        set openMovie to open file theMovie

        -- delay until the movie opens
        set startTime to current date
        repeat until exists document 1
            delay 0.2
            if (current date) - startTime is greater than 10 then return -- a precaution so you don't get stuck in the repeat loop forever
        end repeat

        present openMovie
        play openMovie

        -- delay until the movie stops playing
        repeat until document 1 is not playing
            delay 1
        end repeat

        quit
    end tell
else if answer is equal to "No, I've seen it" then
    tell application "System Events" to delete login item "Welcome"
end if 
```

# javascript - 在javascript中存储for循环的索引

> ID：12498900
> 
> 赞同：0
> 
> 时间：2012-09-19T16:24:16.720
> 
> 标签：javascript, android, for-loop, indexing

我正在开发一个带有phonegap的android应用程序。我正在制作一个 HTML 表格，其中包含一些`for`来自 localStorage 的循环。对于每一行，我需要存储索引 i`for`以使用它从 localStorage 中检索名称与索引类似的项目。我有一些代码，但我为该效果定义的变量被循环覆盖（当然）。这是代码：

```
<script language="javascript">
if(len != 0) {
var table = document.getElementById('hor-minimalist-b'); // get the table element
var tableBody = table.childNodes[1]; // get the table body
var tableHead = table.childNodes[0]; // get the table head
var thead = document.createElement('th');
var row2 = document.createElement('tr'); // create a new row
var headText = document.createTextNode('Dados');
  thead.scope = "col";
    thead.appendChild(headText);
    row2.appendChild(thead);
    tableHead.appendChild(row2);

for (var i=0; i<len; i++) {

    var row = document.createElement('tr'); // create a new row

    var cell = document.createElement('td'); // create a new cell
    var a = document.createElement('a');
    var cellText = document.createTextNode(localStorage.getItem('key' + i));
    var xyz = "key" + i;    
    a.href = "alterar.html";
    a.onclick = function() { doLocalStorage(xyz) };
    a.appendChild(cellText);
    cell.appendChild(a); // append input to the new cell
    row.appendChild(cell); // append the new cell to the new row
    tableBody.appendChild(row); // append the row to table body
   }}
</script>
</table> 
```

也许我没有很好地解释自己。如果您需要更多信息，请询问。提前致谢。伊娃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:44:59.813

尝试将键名放入闭包中：

```
`function wrapper(i) {
    return function() {
        doLocalStorage("key" + i)
}}
a.onclick = wrapper(i);` 
```

* * *

 `## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:48:10.150

不确定我的问题是否正确，但是如果您想在执行 for 循环时异步绑定变量的使用，那么您应该将其包装在一个闭包中：

```
 for(i = 1, c = arr.length; i < c; i++){
      (function(i){
        // i wont change inside this closure so bound events will retain i
        $('#id'+i).click(function(){
          alert(i); // Will alert the corresponding i
        })
      })(i);
    } 
````

# git - 使用 !source 的 gitconfig 别名不起作用（zsh）

> ID：12498901
> 
> 赞同：5
> 
> 时间：2012-09-19T16:24:25.483
> 
> 标签：git, alias, git-config

我有一个这样的 gitconfig：

```
[alias]
l = "!source ~/.githelpers && pretty_git_log" 
```

当我运行它时，我得到了这个：

```
[desktop] git l
source ~/.githelpers && pretty_git_log: 1: source: not found
error: cannot run source ~/.githelpers && pretty_git_log: No such file or directory
fatal: While expanding alias 'l': 'source ~/.githelpers && pretty_git_log': No such file or directory 
```

当我添加任何其他 shell 内置函数进行测试时，它们运行良好：

```
[alias]
l = "!echo running from the builtin"

[desktop] git l
running from the builtin 
```

知道为什么无法从 git 中找到源命令吗？我正在运行 zsh，但更改为 bash 似乎没有什么不同：

```
[desktop] bash
[desktop] git l
source ~/.githelpers && pretty_git_log: 1: source: not found
error: cannot run source ~/.githelpers && pretty_git_log: No such file or directory
fatal: While expanding alias 'l': 'source ~/.githelpers && pretty_git_log': No such file or directory 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T16:47:52.463

失败来自于`!<command>`构造试图以该名称查找要运行的程序这一事实。有一个`/bin/echo`程序（它与你的 shell 内置`echo`的不同，但那是另一回事），但没有一个`/bin/source`（`/usr/bin`或任何其他地方）。从本质`source`上讲，它不能是一个单独的程序。

试试这个：

```
[alias]
l = "!sh -c 'source ~/.githelpers && pretty_git_log'" 
```

根据需要更改`sh`为`bash`（或其他）。

# android - 查询数据库最大数失败

> ID：12498906
> 
> 赞同：0
> 
> 时间：2012-09-19T16:24:45.833
> 
> 标签：android, database, cursor, max

我试图在我的数据库中的一个表的列中找到最大数量。

我以为我已经对这个进行了排序（我之前发布了类似的问题），但是经过一些测试后，我意识到我的代码没有像我想象的那样工作。

该数据库由一个包含以下列的表组成：

_id、inspection_link、area_number、area_reference

我在我的数据库助手类中创建了以下代码：

```
public static final String AREAS_TABLE = "areas";
public static final String AREA_ID = "_id";
public static final String AREA_NUMBER = "area_number";
public static final String AREA_REF = "area_reference";
public static final String AREA_LINK = "area_link";
public static final String INSPECTION_LINK = "inspection_link";

public Cursor selectMaxAreaNumber (long inspectionId) {
    String inspectionIdString = String.valueOf(inspectionId);
    String[] tableColumns = new String[] { 
            AREA_NUMBER, 
            "(SELECT max(" + AREA_NUMBER + ") FROM " + AREAS_TABLE + ") AS max" 
        }; 
    String whereClause = INSPECTION_LINK + " = ?";
    String[] whereArgs = new String[] {
            inspectionIdString          
        };
    Cursor c = rmDb.query(AREAS_TABLE, tableColumns, whereClause, whereArgs, 
            null, null, null);

    if (c != null) {
        c.moveToFirst();
    }
    c.close();
    return c;
} 
```

然后在我要查询数据库的活动中，我编写了以下内容：

```
public class AreaEdit extends Activity {

private EditText AreaNumber;
private EditText AreaReference;
private Button saveButton;
private Button cancelButton;
protected boolean changesMade;
private AlertDialog unsavedChangesDialog;

private RMDbAdapter rmDbHelper;
private long inspectionId;
private long areaId;
private int nextAreaNumber = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    rmDbHelper = new RMDbAdapter(this);
    rmDbHelper.open();
    Intent i = getIntent();
    inspectionId = i.getLongExtra("Intent_InspectionID", -1);
    areaId = i.getLongExtra("Intent_AreaID", -1);
    if (areaId == -1) {
        Cursor c = rmDbHelper.selectMaxAreaNumber(inspectionId);
        startManagingCursor(c);
        c.moveToFirst();
        nextAreaNumber = c.getInt(c.getColumnIndex("max")) + 1; 
    }
    setContentView(R.layout.edit_area);
    setUpViews();
    populateFields();
    setTextChangedListeners();
}

private void setUpViews() {
    AreaNumber =(EditText)findViewById(R.id.area_number);
    AreaReference =(EditText)findViewById(R.id.area_reference);
    saveButton = (Button)findViewById(R.id.area_save_button);
    cancelButton = (Button)findViewById(R.id.area_cancel_button);

}

  private void populateFields() {
        if (areaId > 0) {
            Cursor c = rmDbHelper.fetchArea(areaId);
            startManagingCursor(c);
            c.moveToFirst();
            AreaNumber.setText(c.getString(
                    c.getColumnIndexOrThrow(RMDbAdapter.AREA_NUMBER)));
            AreaReference.setText(c.getString(
                    c.getColumnIndexOrThrow(RMDbAdapter.AREA_REF)));
            c.close();
        }
        else {
            AreaNumber.setText(String.valueOf(nextAreaNumber));
        }
    } 
```

但是，当它返回错误的数字时 - 它似乎从整个表中获取最大数字，其中包括来自其他检查的数据。

我想这可能是由于字符串和 Longs 等之间的转换，但我有一个砖墙？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:46:57.600

您可以简单地尝试以下方法：

```
String sql = "SELECT MAX(ColumnNameHere) AS MaxValue FROM myTable WHERE AnotherColumn = 'SomValue'";
Cursor c = db.rawQuery(sql, null); 
c.moveToFirst();
c.getInt(c.getColumnIndex("MaxValue")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:07:42.910

此处找到此问题的详细解决方案：

以下帖子中详细介绍了此问题的解决方案：[SELECT statement not return MAX number](https://stackoverflow.com/questions/12501484/select-statement-not-returning-max-number)

基本上，这是一个关于查询的问题以及我如何使用游标。

# javascript - 如何在不使用框架的情况下拥有静态侧边栏？

> ID：12498908
> 
> 赞同：-3
> 
> 时间：2012-09-19T16:24:56.527
> 
> 标签：javascript, html

我的 php 函数需要对数据库做一些工作来生成侧边栏内容，所以我只想加载一次。另外，我读过应该避免使用框架。所以我该怎么做？使用 ajax / 同步 jax？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:37:34.933

我想说最简单和最简单的方法是使用框架。这几乎就是框架的用途。唯一真正关心的是搜索引擎优化，所以如果这不是问题（例如，您正在制作管理面板），那么请使用框架。如果您将其用于公共网站，那么您可能应该寻找另一种方法。

您也可以只在服务器上缓存侧边栏，这样加载多少次都没关系。那会避免整个问题，你不觉得吗？

# sql - SQL查询性能说明

> ID：12498918
> 
> 赞同：1
> 
> 时间：2012-09-19T16:25:57.243
> 
> 标签：sql, sql-server, sql-optimization, database-optimization

我有这个查询（当然还有跨表的几个连接和一些视图，为了简单起见，我将它们称为 x）。

1.  案例 1：`select * from x` -> 在 10 秒内返回，仍然可以接受，连接和大量数据相当繁重
2.  案例2：`select * from x where userid = 1`->在0-1秒内返回，足够好
3.  案例 3：使用 SP：`if @userid = -1 select * from x else select from x where userid = @userid` -> 现在使用参数用户 ID 1 调用 sp 应该在 0-1 秒内返回，因为它应该与案例 2 相当，但实际上它在 10 秒内返回。

    现在，参数屏蔽 OR WITH RECOMPILE on sp OR OPTION (recompile) on query with where 子句没有帮助，使 SP 运行得更快的`userid = something`原因是将 OPTION(recompile) 放在 SP 的第一部分，即在没有 where 的查询上条款。：

4.  案例 4：使用 SP：`if @userid = -1 select * from x option (recompile) else select * from x where userid = @userid`

有什么解释吗？

我可以猜到它使用基于查询的优化而没有 where 子句，即使是带有 where 子句的查询，但这是为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:18:46.520

存储过程缓存执行计划，因此它们没有每次调用 SP 时重新编译查询的开销。这在将存储过程用于事务时尤其重要。当查询运行几秒钟时，它就不那么重要了。

当查询采用参数时，存储过程必须决定要优化哪些值。我猜您的 SQL Server 将这两个查询识别为相同的，并为它们使用相同的缓存计划。它正在基于第一个查询优化计划。这是猜测，但它可以解释你所看到的。

您可以使用以下版本的查询轻松解决此问题：

```
select *
from x
where @userid = -1 or userid = @userid
option (recompile) 
```

# android - 使用bindService启动IntentService时是否应该调用onHandleIntent？

> ID：12498919
> 
> 赞同：4
> 
> 时间：2012-09-19T16:26:00.930
> 
> 标签：android, intentservice

我的服务扩展`IntentService`，当它开始时`startService`，`onHandleIntent`被调用。但是，当服务启动时`bindService`（我确实需要绑定），`onHandleIntent`不会被调用。

应该在`onHandleIntent`什么时候调用？是唯一的方法应该开始吗？`IntentService``bindService``startService``IntentService`

的文档`IntentService`说明如下：

***客户端通过 startService(Intent) 调用发送请求；**该服务根据需要启动，使用工作线程依次处理每个 Intent，并在工作结束时自行停止。*

目前我通过立即调用来解决我的问题，`startService`但`bindService`我觉得它很难看。我想知道有没有办法让它只用一个电话就可以工作。

代码片段如下，可能是我遗漏了一些明显的东西。

**ExampleService.java**

```
public class ExampleService extends IntentService {

private class IncomingHandler extends Handler {

    @Override
    public void handleMessage(Message message) {

        if (message.replyTo != null) {
            outMessenger = message.replyTo;
        }
    }
}

private Messenger messenger = new Messenger(new IncomingHandler()); 
private Messenger outMessenger = null;

public ExampleService() {
    super("ExampleService");
}

@Override
public IBinder onBind(Intent intent) {
    return messenger.getBinder();
}

@Override
protected void onHandleIntent(Intent arg0) {

    System.out.println("Service started");

    for (int i = 0; i < 5; i++) {

        SystemClock.sleep(5000);

        if (outMessenger != null) {
            try {
                outMessenger.send(Message.obtain());
            } catch (RemoteException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
}
} 
```

**服务清单.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.service"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="3"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <service android:name=".ExampleService">
        <intent-filter>
            <action android:name="com.example.service.ExampleService" />
        </intent-filter>
    </service>
</application>
</manifest> 
```

**MainActivity.java**（调用者）

```
public class MainActivity extends Activity implements ServiceConnection {

private class IncomingHandler extends Handler {

    @Override
    public void handleMessage(Message msg) {

        Toast.makeText(getApplicationContext(), "Message received", Toast.LENGTH_SHORT).show();
        System.out.println("Message received!");
        super.handleMessage(msg);
    }
}

private Messenger messenger = new Messenger(new IncomingHandler());

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            Intent intent = new Intent("com.example.service.ExampleService");
            bindService(intent, MainActivity.this, Context.BIND_AUTO_CREATE);
            //startService(intent);
        }
    });

}

@Override
public void onServiceConnected(ComponentName name, IBinder binder) {

    Message message = Message.obtain();
    message.replyTo = messenger;

    try {
        new Messenger(binder).send(message);
    } catch (RemoteException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public void onServiceDisconnected(ComponentName name) {
    // TODO Auto-generated method stub
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T16:30:32.597

> 使用bindService启动IntentService时是否应该调用onHandleIntent？

不。

> startService 是应该启动 IntentService 的唯一方法吗？

恕我直言，是的。恕我直言，`IntentService`不是为绑定模式设计的。

在您的情况下，您可以：

*   在由 发送的命令中的额外内容中传递`Messenger`活动中的a ，或`Intent``startService()`
*   使用`LocalBroadcastManager`, 或
*   使用[奥托](http://square.github.com/otto/)，或
*   使用有序广播，如果`IntentService`可能会持续到活动的生命周期之后，并且您想`Notification`在这种情况下在工作完成时显示 a，
*   等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T09:55:54.487

您必须同时调用 startService 和 bindService。这对我有用。

# c++ - 如何使用 Gnu make 编写库？

> ID：12498922
> 
> 赞同：2
> 
> 时间：2012-09-19T16:26:05.970
> 
> 标签：c++, compilation, makefile, static-libraries

我正在尝试创建一个名为 Aa 的库，它提供一个类 A，它依赖于类 B 和 C，所有这些都在它们各自的文件（`.cpp`和`.hpp`）中。我通常手动编译所有代码，但随着文件数量的增加，我想使用 makefile。基本上，我会做的是：

```
g++ -c A.cpp
g++ -c B.cpp
g++ -c C.cpp
ar rvs A.a *.o 
```

我怎样才能构建一个这样做的makefile？makefiles 甚至可以调用`ar`吗？

这是我尝试过的：

```
CC=g++
CFLAGS=-c -Wall
objects=C.o B.o

all : A.o $(objects) #Creates the library called A.a.
:ar rvs A.a A.o $(objects)

A.o : $(objects) A.hpp A.cpp
:$(CC) $(CFLAGS) A.cpp

B.o : B.hpp B.cpp
:$(CC) $(CFLAGS) B.cpp

C.o : C.hpp C.cpp
:$(CC) $(CFLAGS) C.cpp 
```

但似乎我的`ar rvs A.a A.o $(objects)`指令甚至没有执行。此 makefile 生成所有正确的`.o`文件，但不归档它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:33:16.403

您可以使用规则和模式使其更通用：

```
SRC_DIR = .
CPPFLAGS += -g
INCLUDES = -I.

# variant 1
SRCS ?= $(shell find $(SRC_DIR) -name '*.cpp' | sed "s/[^\/]*\/[^\/]*\///")
# variant 2
SRCS = A.cpp B.cpp

%.o : $(SRC_DIR)/%.cpp
    $(CXX) -o $@ $(INCLUDES) $(CPPFLAGS) -c $^

all : A.a

A.a : $(SRCS:.cpp=.o) 
    $(AR) rsv $@ $^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T21:44:06.787

好的，所以我的语法毕竟是正确的，或者至少大部分是正确的。我提出了一个错误的前提，即`:`'s 可以替换选项卡，这显然是不正确的。

所以，这是我想要的代码：

```
CC=g++
CFLAGS=-c -Wall
objects=B.o C.o

all : A.a

A.o : $(objects) A.hpp A.cpp
    $(CC) $(CFLAGS) A.cpp

B.o : B.hpp B.cpp
    $(CC) $(CFLAGS) B.cpp

C.o : C.hpp C.cpp
    $(CC) $(CFLAGS) C.cpp

A.a : A.o $(objects)
    ar rvs A.a A.o $(objects) 
```

# sql - SSRS 视图布局不同于打印布局

> ID：12498929
> 
> 赞同：3
> 
> 时间：2012-09-19T16:26:32.813
> 
> 标签：sql, reporting-services

在普通视图布局中，我的表单报告格式完美。当我更改为打印布局时，最右边的一两英寸被剪掉并放在第二页上。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:09:11.457

我的猜测是您的页面大小为 8.5 英寸，边距为 1 英寸。您需要解决这个问题，因此包括边距在内的总页面大小为 8.5"。我通常使用 0.5" 边距制作 7.5" 页面。（要查看这些设置，请单击背景，然后查看“属性”窗口）。

# c# - 从 CodeBehind Asp.net 调用 WCF

> ID：12498931
> 
> 赞同：0
> 
> 时间：2012-09-19T16:26:33.577
> 
> 标签：c#, asp.net

我正在通过此 javascript 代码进行 wcf 调用并在我的应用程序中取回数据..

```
function setCurrentResponseValue(response) {

    var applicationData = null;

    $.ajax({
        type: "POST",
        url: "ClientService.svc/REST/SetCurrentResponseValue",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify({ response: response }),
        dataType: "json",
        async: false,
        success: function (msg) {

            applicationData = msg;

        },
        error: 'An Error'
    });

    return applicationData;

} 
```

我需要从后面的 C# 代码设置我的 svc 文件使用的会话变量。如何从后面的代码而不是上面的 ajax 调用调用我的 svc 文件中的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:34:45.857

SO上已经有很多非常相似的问题。这也许是最好的答案：[如何在 .NET 中使用 Restful 服务？](https://stackoverflow.com/questions/8883656/how-to-consume-a-restful-service-in-net)

@Darrel Miller 的回答可能是最有用的，他的博客文章链接显示了如何使用 HttpClient 来使用 REST 数据： http: [//www.bizcoder.com/index.php/2012/01/09/httpclient-它活着，它是光荣的/](http://www.bizcoder.com/index.php/2012/01/09/httpclient-it-lives-and-it-is-glorious/)

（如果您对 REST 使用松散耦合，那么服务是 WCF 的事实在很大程度上与客户端无关）。

# batch-file - 重命名文件并向上移动一个级别

> ID：12498934
> 
> 赞同：0
> 
> 时间：2012-09-19T16:26:37.717
> 
> 标签：batch-file, batch-processing, batch-rename

我正在尝试编写一个脚本，该脚本将通过如下导演结构：

```
school/admission/english->index.html 
```

它应该将 index.html 重命名为english.html 这是它的父文件夹并将其向上移动一个级别，这样结果就会像

```
school/admission/english.html 
```

`index.html`对于该文件夹结构中名称的所有文件，应该重复相同的过程。任何有关如何解决此问题的帮助将不胜感激。

要查找我拥有的所有 index.html 文件：

```
 @echo off
for /r %%i in (index.html) do echo %%~ti %%~zi %%i 
```

要将 .html 文件向上移动一级：

```
for /r %x in (*.html) do move "%x" "%x"/../.. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T04:20:00.363

这是一个相当简单的本机解决方案，可以从命令行运行

```
for /r %F in (index.html) do @for /f "eol=: delims=" %A in ("%F\..") do @if exist "%F" move "%F" "%F\..\..\%~nA%~xF" 
```

**编辑以回应评论中的其他问题**

如果您只想处理文件夹层次结构的叶节点，我认为最好使用批处理脚本：

```
@echo off
for /r %%F in (index.html) do (
  if exist "%%F" (
    set "subFolder="
    for /d %%A in ("%%~dpF\*") do set subFolder=1
    if not defined subFolder for /f "eol=: delims=" %%A in ("%%F\..") do move "%%F" "%%F\..\..\%%~nA%%~xF"
  )
) 
```

# coldfusion - 跟踪用户的设备类型 - ColdFusion

> ID：12498936
> 
> 赞同：0
> 
> 时间：2012-09-19T16:26:58.133
> 
> 标签：coldfusion, web, coldfusion-9

我正在发送一封每日调查电子邮件，我想跟踪我的用户访问它的设备类型（手机、平板电脑、PC 等）。我需要保存这些信息，以便稍后进行某种分析（例如，有多少人通过手机访问了调查但没有完成（我已经在跟踪谁开始调查以及何时开始））。这种信息水平可能会帮助我开发一个更好的移动友好型应用程序。

是否可以收集这些类型的数据，然后将其存储在数据库表中？

我正在使用 ColdFusion 9 和 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:42:50.860

是的，你可以这样做。您希望在加载图像或页面时查看浏览器或邮件客户端向您发出的请求中的用户代理字符串。传统上，您会在邮件中嵌入 1x1 像素的跟踪图像，其中图像 url 是 tracker.cfm?user=#your user ID here#

在请求中，您在 URL 中获得用户 ID，在 CGI.HTTP_USER_AGENT 中获得用户代理，您可以在以后存储和处理它们。

几乎练习中最难的部分是理解你得到的数据。用户代理字符串不是很好解析，在某些情况下可能会被保留。您是否考虑过将 Google Analytics 用于跟踪的网络端？那（或类似的东西）将很好地理解数据并且很容易实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:42:33.603

您可以使用 CGI.HTTP_USER_AGENT 然后尝试解析出实际设备。我们有类似的需求，并发现谷歌分析符合我们的需求，因为它可以告诉您您正在寻找的所有信息，而无需您做太多工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:18:06.723

我还发现此站点对完成此类任务非常有帮助。它也适用于大多数语言，[移动浏览器检测](http://detectmobilebrowsers.com/)

# javascript - 在 Internet Explorer 8 中动态启用/禁用样式表

> ID：12498938
> 
> 赞同：0
> 
> 时间：2012-09-19T16:27:09.680
> 
> 标签：javascript, internet-explorer-8, internet-explorer-9, responsive-design

我正在尝试在我的网站上实现响应式布局。响应性的主要驱动因素是一些在窗口调整大小事件时触发的 javascript。当窗口宽度超过某些阈值时，我启用我想要激活的样式表，并禁用其他的。这就是我启用/禁用样式表的方式

```
var styles = document.styleSheets;

for var(x in styles) {
  if (isThisTheRightSheet(x)) {
    styles[x].disabled = false;    
  } else {
    styles[x].disabled = true;
  }
} 
```

这适用于除 Internet Explorer 8（尚未测试 9）之外的任何地方。在 8 中，属性得到更新，但显示没有。因此，我将调整触发该功能的窗口大小。显示保持不变，但是当我在控制台中检查 disabled 属性时，它已正确更新。我还尝试在“链接”节点上使用 jquery 的 prop 函数，这会导致相同的行为。

我怎样才能在 ie8 中实现这种行为？如果 ie9 不同，请提供相关信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:09:46.927

document.styleSheets[0].disabled=true;

这**确实**禁用了 IE7 和 8 中的第一个样式表（不记得大约 6）。

您的**isThisTheRightSheet(x)**方法可能禁用了错误的工作表 - IE 可能以不同的方式对它们进行排序，或者您可能使用 document.styleSheets.sheet 或 cssRule 而不是 IE(#9 之前) styleSheet 和规则。

并且 for(x in stylesSheets) 可能会遍历工作表以外的其他属性 - 您可能想要使用 styleSheets 长度属性并且：

```
 for(var i=0,L=styles.length;i<L;i++){} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:31:00.417

使用 html 条件..

```
<!--[if IE 8]>
   <link rel="stylesheet" type="text/css" href="css/style_ie8.css" />
<![endif]-->
<!--[if IE 9]>
   <link rel="stylesheet" type="text/css" href="css/style_ie9.css" />
<![endif]--> 
```

# ruby - 如何编写以任意顺序匹配两个模式的正则表达式？

> ID：12498941
> 
> 赞同：0
> 
> 时间：2012-09-19T16:27:20.630
> 
> 标签：ruby, regex

我需要在 Ruby 中验证密码，要求密码必须至少包含一个字母 ( `/[a-z]{1,}/`) 和一个数字 ( `/\d{1,}/`)。但是这些可以在字符串中以任何顺序出现。我可以在一个正则表达式中做到这一点吗？

```
'aa' => should not match
'99' => should not match
'a9' => should match
'9a' => should match 
```

这些*不起作用*：

```
'9a' =~ /[a-b]{1,}\d{1,}/  <= no match
'a' =~ /[a-b]{1,}|\d{1,}/  <= match 
```

不幸的是，我找不到与（OR）运算`&`符对应的（AND）运算符之类的东西`|`有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:32:01.693

你可以这样做：

```
/(?=.*[a-z])(?=.*\d)/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:30:19.927

你可以写：

```
'9a' =~ /[a-z].*\d|\d.*[a-z]/ 
```

但我可能只是硬着头皮把它写成两个正则表达式：

```
'9a' =~ /[a-z]/ && '9a' =~ /\d/ 
```

**编辑添加：**或者，从我对奥马尔杰克曼的回答的评论中，您可以写：

```
'9a' =~ /^(?=.*?[a-z]).*?\d/ 
```

使用零宽度*正向超前断言* `(?=...)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:31:26.630

这适用于您的所有情况：

`([a-zA-Z]+\d+|\d+[a-zA-Z]+)`

我还添加了大写字母，因为您没有仅指定小写字母。

# c# - 如何按升序对列表框中的项目进行排序

> ID：12498943
> 
> 赞同：0
> 
> 时间：2012-09-19T16:27:22.923
> 
> 标签：c#, sorting, listbox

我有一个填充了下面代码的列表框，但我希望对其中的项目进行排序。如何对列表框中的项目进行排序

```
public void refreshInterface()
{
    foreach (DataSet1.xspGetAnalysisUsageTypesRow homeForms in myDataSet.xspGetAnalysisUsageTypes)
    {
        var forms = new FormItems(homeForms);
        listBox1.Items.Add(forms);
    }
} 
```

表单项类：

```
public class FormItems
{
    public DataSet1.xspGetAnalysisUsageTypesRow types { get; set; }

    public FormItems(DataSet1.xspGetAnalysisUsageTypesRow usageTypes)
    {
        types = usageTypes;
    }

    public override string ToString()
    {
        return this.types.xlib_Desc;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:40:59.977

您可以使用 LINQ 直接更新源项目或列表框上的项目：

```
list.OrderBy(x => x.Property) 
```

您可以在其中将 x.Property 设置为要排序的属性。这种排序将默认为您想要的升序。否则只需使用`OrderByDescending()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-26T02:06:04.620

这是我对 LisBox 项目 A->Z 或 Z->A 进行排序的解决方案：

```
public void Sorting(ListBox lst, String order) {
                 if (order.Equals("A-Z"))
                {
                    if (lst.Items.Count > 1)
                    {
                        bool swapped;
                        do
                        {
                            int counter = lst.Items.Count - 1;
                            swapped = false;

                            while (counter > 0)
                            {
                                // Compare the items 
                                if (lst.Items[counter].ToString().CompareTo(lst.Items[counter -
    1].ToString()) < 0)
                                {
                                    // Swap the items.
                                    object temp = lst.Items[counter];
                                    lst.Items[counter] = lst.Items[counter - 1];
                                    lst.Items[counter - 1] = temp;
                                    swapped = true;
                                }
                                // Decrement the counter.
                                counter -= 1;
                            }
                        }
                        while ((swapped == true));
                    }
                }
                if (order.Equals("Z-A")) {
                    if (lst.Items.Count > 1)
                    {
                        bool swapped;
                        do
                        {
                            int counter = lst.Items.Count - 1;
                            swapped = false;

                            while (counter > 0)
                            {
                                // Compare the items 
                                if (lst.Items[counter].ToString().CompareTo(lst.Items[counter -
    1].ToString()) > 0)
                                {
                                    // Swap the items.
                                    object temp = lst.Items[counter];
                                    lst.Items[counter] = lst.Items[counter - 1];
                                    lst.Items[counter - 1] = temp;
                                    swapped = true;
                                }
                                // Decrement the counter.
                                counter -= 1;
                            }
                        }
                        while ((swapped == true));
                    }
                }

            } 
```

# doxygen - 文档中的 Weblink 并维护一个“back”（“myLib/index.html”）链接头

> ID：12498944
> 
> 赞同：2
> 
> 时间：2012-09-19T16:27:26.000
> 
> 标签：doxygen

我有一个使用 Doxygen 记录的库（我们称之为“ *myLib* ”），它执行一些（外部）引用/链接；为此，我正在使用`<a href="../path/to/other/documentation/page/index.html">OtherDoc</a>`语法。完全没问题；好好工作。副作用是，当我单击链接（并转到*OtherDoc*页面）时，如果不使用浏览器的“返回”按钮，我将无法返回*myLib 。*

我想解决这个问题是在用户转到“OtherDoc”链接页面时维护一个“myLib”标题（或作为“脚注”）。我的问题是：我如何在 Doxygen 中做到这一点？另外，有没有更好的方法来解决这个“反向链接”问题？

Obs：“OtherDoc”html 页面也是我拥有的另一个库的 doxygen 生成文档，但它（OtherDoc）不知道“myLib”；所以，我不想在其文档中添加指向“myLib”的链接。

提前致谢。[]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T14:22:02.437

我建议你在 Doxygen 中查找 TAG 文件的使用。这些将允许您以正常的“Doxygen”方式从“myLib”引用“OtherDoc”类（等）。

这本身不允许来自“OtherDoc”的“反向链接” - 无需修改那里的 HTML。

另一种方法是让 Doxygen 生成“wiki”格式。这将允许动态生成“轨迹”和反向链接。但是，目前我不知道有人在做这种事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:35:21.770

如果您不想在`OtherDoc`文档中添加反向链接，`myLib`那么为什么不简单地`OtherDoc`在新选项卡或窗口中打开链接呢？这样，`myLib`文档保持打开状态，用户可以简单地切换回该选项卡。从[如何使 HTML 在另一个窗口或选项卡中打开超链接？](https://stackoverflow.com/a/2343939/623518)你可以使用

```
<a href="../path/to/other/documentation/page/index.html" target="_blank">OtherDoc</a> 
```

为您的链接。注意添加`target="_blank"`。

# asp.net - ASP.NET 中的代码隐藏/样式表桥？在 ASP.NET 的代码隐藏中向 CSS 选择器添加样式？

> ID：12498945
> 
> 赞同：0
> 
> 时间：2012-09-19T16:27:40.987
> 
> 标签：asp.net, stylesheet, bridge

我需要知道 ASP.NET 服务器端代码是否可以引用在给定页面上有效的样式表。是否可以*在 ASP.NET 代码隐藏*中获取对样式表中现有 CSS 选择器的引用？在服务器端代码隐藏中是否可能出现以下伪代码？

```
 MyPage.Stylesheets(0)("DIV#foo").Attributes("display").Value = "none"

    NOTE:  Assume that <div id = 'foo'>lorem ipse...</div> has been injected
    into the DOM by javascript. There is no server side counterpart to the DIV.
    It was **not** part of the ASP.NET markup:  <div id="foo" runat="server".... 
```

同样，服务器端，而不是 jQuery/javascript 客户端。

我试图根据某些服务器端条件使特定的 DOM 元素不可见，但该元素是在客户端实例化的。我无法从服务器端代码中获得对它的引用，但也许我可以引用样式表中的选择器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:56:37.560

实际上，我找到了一种方法来实现这一点，尽管没有使用我期望的方法。Visual Studio 不喜欢以下内容，但它可以工作：

```
 <style type="text/css" media="all">DIV#foo{<%= FooCSS %>}</style> 
```

在代码隐藏中：

```
 Public Readonly Property FooCSS as String
           Get
             Return "display:none"
           End Get
         End Property 
```

# sql - JPQL 多个左连接与一个类

> ID：12498949
> 
> 赞同：1
> 
> 时间：2012-09-19T16:27:57.353
> 
> 标签：sql, spring, jpql

我对 JPQL 有以下问题：一个类有三个字段：

```
public class Message{
  Integer ownerId;
  Integer fromUserId;
  Integer toUserId;
  //rest of implementation
} 
```

然后我想通过用户名在数据库中搜索，但是我们有 3 个用户附加到此消息：所有者、收件人和发件人，所以我在 SQL 中所做的是：

```
SELECT * FROM message m 
LEFT JOIN user o ON m.owner_id=o.id 
LEFT JOIN user fu ON m.from_user_id = fu.id
LEFT JOIN user tu ON m.to_user_id = tu.id
WHERE o.name like '%foo%' OR fu.name like '%foo%' OR tu.name like '%foo%'; 
```

这可能不是最快的查询，但工作正常。然后我想把它翻译成JPQL，但这并不容易。我在“on”令牌上遇到异常，我知道如果该类定义了与另一个类的关系，则可以加入，但这里的关系有点复杂，因为我们有 3 个用户与一个消息相关。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T21:03:33.047

我认为这应该可以解决问题：

```
FROM message m                -- SELECT * is optional in JPQL
LEFT JOIN m.owner o           -- In JPQL, you put the path to the related object
LEFT JOIN m.from_user_id fu   -- and JPA does the rest using the mappings
LEFT JOIN m.to_user_id tu
WHERE o.name like '%foo%' OR fu.name like '%foo%' OR tu.name like '%foo%'; 
```

要记住的是，在 JPQL 中，JOIN 条件是在映射中定义的，因此您无需在查询中指定它们：只需将路径放入您要引用的对象，JPA 将从映射中推断出其余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-23T20:04:37.413

我正在使用 Spring Data JPA 版本 2.1.5（2019 年 2 月），并且我有多个左连接在工作，如下例所示：

```
@Query("select parentMenu from ObMenu parentMenu "
            + "left join ObTreeNode parentTreeNode on parentMenu.id=parentTreeNode.nodeId "
            + "left join ObTreeNode childTreeNode on parentTreeNode.nodeId=childTreeNode.parentId "
            + "where  childTreeNode.nodeId=:childMenuId")
    ObMenu findParentMenu(@Param("childMenuId") String childMenuId); 
```

# linux - 编译器如何分配使用哪个版本？

> ID：12498951
> 
> 赞同：0
> 
> 时间：2012-09-19T16:28:00.333
> 
> 标签：linux, symlink, dynamic-linking

我正在尝试在 linux 中运行一个 exe 文件，出现以下错误消息：

“加载共享库时出错：libquickfix.so.14：无法打开共享对象文件：没有这样的文件或目录”

我有这个文件的 .so 版本。

我的问题是它从哪里得到14？在我的 g++ 命令中，我有 -lquickfix

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:33:53.830

这与您的编译器无关。如果可执行文件存在，则编译器完成。问题在于`ldd`运行时链接器的配置。可能，最简单的解决方案是确保包含 libquickfix.so.14 的目录列在环境变量`LD_LIBRARY_PATH`中。

```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH${LD_LIBRARY_PATH:+:}/path/to/lib 
```

# ios - UIModalPresentationFormSheet 和 tableView contentInset

> ID：12498952
> 
> 赞同：1
> 
> 时间：2012-09-19T16:28:03.003
> 
> 标签：ios, ipad, uitableview

我在 viewController 中有一个 tableView。

此 viewController`presentationStyle`设置为`UIModalPresentationFormSheet`。

当键盘出现在屏幕上时，我不明白如何为 tableview 设置正确的插图以避免单元格被键盘覆盖。

使用全屏视图控制器，我使用键盘通知来获取键盘的框架并进行数学运算。

如何计算覆盖面积？

# json - 尝试在 Monotouch 上使用 ServiceStack 序列化自定义对象时出现 AOT 编译错误

> ID：12498954
> 
> 赞同：3
> 
> 时间：2012-09-19T16:28:14.857
> 
> 标签：json, rest, xamarin.ios, servicestack

我正在尝试在 monotouch 中使用 servicestack 序列化一个对象，但我一生都无法弄清楚在为设备进行 AOT 构建时如何使这些类可用。该构建适用于模拟器。我有最新版本的 Monotouch 和最新版本的 Monotouch ServiceStack 库，这是我今天早上自己提取和构建的。

我想要做的是调用通用 ToJson() 来序列化我的模型对象（下面称为注释）。我的所有 Web 服务模型/服务调用/序列化/反序列化都发生在我的 iphone 和 android 应用程序外部的类库中，我试图在其中调用 JsConfig.RegisterForAot() 和 JsConfig.RegisterTypeForAot()，这似乎没有帮助。我也在我的 iphone 应用程序中调用这些方法，因为我不确定这两个位置是否都是必要的。

错误/堆栈跟踪：

```
Attempting to JIT compile method 'ServiceStack.Text.Common.WriteListsOfElements`2<int, ServiceStack.Text.Json.JsonTypeSerializer>:WriteListValueType (System.IO.TextWriter,object)' while running with --aot-only. See http://docs.xamarin.com/ios/about/limitations for more information.

  at ServiceStack.Text.Common.WriteType`2[MyClassLibrary.Note,ServiceStack.Text.Json.JsonTypeSerializer].WriteProperties (System.IO.TextWriter writer, System.Object value) [0x00000] in <filename unknown>:0 
  at ServiceStack.Text.JsonSerializer.SerializeToString (System.Object value, System.Type type) [0x00000] in <filename unknown>:0 
  at ServiceStack.Text.JsonSerializer.SerializeToString[Object] (System.Object value) [0x00000] in <filename unknown>:0 
  at ServiceStack.Text.StringExtensions.ToJson[Object] (System.Object obj) [0x00000] in <filename unknown>:0 
  at MyClassLibrary.Utils.ObjectToJson (System.Object obj) [0x00000] in <filename unknown>:0 
  at MyClassLibrary.Utils.AddObjectToData (System.Net.WebRequest request, System.Object obj) [0x00000] in <filename unknown>:0 
  at MyClassLibrary.Utils.SendJsonRequest[Note] (System.String url, System.String httpVerb, MyClassLibrary.Note obj) [0x00000] in <filename unknown>:0 
  at MyClassLibrary.Note.JSONSave () [0x00000] in <filename unknown>:0 
  at iphoneapp.myViewController.SaveNote () [0x000a5] in /Users/myUser/Projects/iphoneapp/iphoneapp/ViewControllers/myViewController.cs:83 

Exact target/types:
ServiceStack.Text.Common.WriteType`2[[MyClassLibrary.Note, MyClassLibraryName, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ServiceStack.Text.Json.JsonTypeSerializer, ServiceStack.Text.MonoTouch, Version=3.8.5.0, Culture=neutral, PublicKeyToken=null]] 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T07:01:46.273

我遇到了其中一些问题，问题通常归结为在我的一些 DTO 属性中使用枚举。

您需要做的是为 AOT 编译器显式地强制初始化每个枚举的通用序列化程序。我这样做的方法是在我的 AppDelegate.FinishedLaunching 代码中创建一堆虚拟序列化程序（我不对它们做任何事情）：

```
// AOT register enums that are involved in service DTOs
var dummy1 = new JsonSerializer<MyEnum>();
var dummy2 = new JsonSerializer<MyOtherEnum>(); 
```

如果您只使用 JSON 端，那么您应该使用上述方法取得一些成功。

在某些情况下，我将列表序列化为单个字符串属性，因此我还以与上述相同的方式初始化 JsvSerialiser。

关键是在代码中为您的枚举显式创建序列化程序，以便 AOT 编译器可以提前查找和编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:01:58.017

也许`WriteListsOfElements2<int, ServiceStack.Text.Json.JsonTypeSerializer>`是一个线索。也许您需要按照 Paul DB 的建议为整数列表创建一个虚拟对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T11:41:05.503

```
public override bool FinishedLaunching(UIApplication application, NSDictionary launchOptions)
    {
        // this is required for MT AOT compiler
        JsConfig.RegisterTypeForAot<YourEnumHere>(); 
```

...

使用最新版本的 Xamarin.iOS，我发现这不再是必需的。

# c# - C# - 如何扫描超过 10 位的 Interleaved 2 of 5？运行 Windows Mobile 6.1 的 MC55 上的摩托罗拉 EMDK 2.6 .NET

> ID：12498959
> 
> 赞同：0
> 
> 时间：2012-09-19T16:28:23.947
> 
> 标签：c#, windows, mobile, barcode, motorola

我目前正在努力让摩托罗拉 MC55 读取 10 位以上的 5 个条码中的 2 个交错。

我浏览了 Motorola EMDK .NET 2.6 的帮助文件，但我不知道如何增加最大条形码长度。

以下是 C# 中的一些示例代码：

```
// Create reader
this.MyReader = new Symbol.Barcode.Reader();

// Create reader data
this.MyReaderData = new Symbol.Barcode.ReaderData(
    Symbol.Barcode.ReaderDataTypes.Text,
    Symbol.Barcode.ReaderDataLengths.MaximumLabel);

// I can read the maximum length of I2of5 but I don't know how to set
// Output is 10
MessageBox.Show(this.MyReader.Decoders.I2OF5.MaximumLength.ToString()); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T01:52:28.080

尝试如下设置

```
SymbolReader.Decoders.I2OF5.Enabled = true;
SymbolReader.Decoders.I2OF5.MinimumLength = 0;
SymbolReader.Decoders.I2OF5.MaximumLength = 0; 
```

我认为'0'应该将它设置为MAX。如果没有，请尝试一些大的价值。

我没有要测试的PDA。

参考：

*   所以[需要帮助 = 使用带有条码扫描的类](https://stackoverflow.com/questions/5611816/need-help-using-class-with-barcode-scanning)
*   MSDN 论坛[http://social.msdn.microsoft.com/Forums/en/netfxcompact/thread/681ea982-f1a7-4cc2-9c5d-75c77c9f6ea9](http://social.msdn.microsoft.com/Forums/en/netfxcompact/thread/681ea982-f1a7-4cc2-9c5d-75c77c9f6ea9)

# c# - 如何同时在 C# 应用程序之间同步数据刷新

> ID：12498962
> 
> 赞同：1
> 
> 时间：2012-09-19T16:28:36.853
> 
> 标签：c#, sql, visual-studio-2010, sync

我有一个调用 SQL 数据库的 C# 程序。我想复制这个程序 10 次，让所有程序同时调用 SQL 数据库。这将如何完成？

我在定时器/循环上提取数据。例如，如果程序 A 在程序 B 之前执行，则刷新时间将不同。有没有办法同步这个刷新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:38:02.443

你需要有一个人在中间。我的意思是，您需要在桌面客户端和数据库之间提供服务。该服务将包含更新计时器。

现在，您每隔 X 秒 ping 该服务以查找更新时间是否已更改。每次客户端调用数据时，您都会更新服务上的计时器。所以假设有 3 分钟的更新时间，每个客户端都知道，但是你的程序 A 做了一些改变那个计时器的事情，那么，当其他人 ping 服务时会注意到这一点并改变它的内部更新计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:48:07.987

我认为也许最简单的解决方案是每整分钟调用一次数据库。所有客户端都有相同的时间服务器，所以时钟应该是同步的？

或者你可以有一个服务器应用程序，所有客户端都通过套接字连接到，或者通过一个简单的 HTTP 请求拉数据。当他们得到“更新命令”时，他们只需查询数据库。

或者您创建一个查询数据库并缓存数据的服务器应用程序。客户端只查询缓存。使用 WCF 实现简单

# php - 从图像中解析简单的数字

> ID：12498963
> 
> 赞同：1
> 
> 时间：2012-09-19T16:28:39.957
> 
> 标签：php

所以，我有这样的图像：http: [//imgur.com/qBGvP](http://imgur.com/qBGvP)

它总是看起来像这样，尽管数字可能不同。这是一个gif，背景是透明的，数字是白色的。

我需要某种方法将其解析为要在脚本中使用的数字。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T16:32:04.967

如果字体是等宽字体并且图像中数字的位置是恒定的，那么将图像分解为单个数字应该是微不足道的。然后，将每个图像输出为某种格式（PNG 可能是最好的）并比较文件。

如果您有相同的脚本保存已知数字，然后将它们与实际案例数据进行比较，则此方法效果最佳。如果这是不可能的，您将不得不进行逐像素比较，这对于如此小的图像来说并不是什么大问题。

本质上，你通过一个程序来制作一个非常原始的 OCR，该程序类似于“这就是数字的样子，所以这是什么数字？”

# apache - 阿帕奇科尔多瓦安卓指南

> ID：12498965
> 
> 赞同：0
> 
> 时间：2012-09-19T16:28:46.607
> 
> 标签：apache, cordova

有没有人成功地遵循了 Apache Cordova 指南？

尽我所能遵循指南后，我最终遇到了错误：

在模拟器上它的屏幕上显示：“出现网络错误。（文件///android_asset/www/index.html）”

在 Eclipse 的控制台中：

1.  打开跟踪文件时出错：没有这样的文件或目录 (2)
2.  错误：pugin.xml 丢失。将 res/xml/plugins.xml 添加到您的项目中
3.  [https://git-wip-us.apache.org/repos/asf?p=incubator-cordova-android.git;a=blob;f=framework/res/xml/pluggins.xml](https://git-wip-us.apache.org/repos/asf?p=incubator-cordova-android.git;a=blob;f=framework/res/xml/pluggins.xml)

有没有其他人遇到过类似的问题？我希望我犯了一些非常明显的错误，但对这个完全陌生，我的初学者的眼睛看不到它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T01:48:14.473

许多人已按照说明运行该应用程序。听起来您确实缺少 res/xml/plugins.xml。您是否将 xml 目录从 PhoneGap 分发版复制到 Eclipse 中的 res 目录？

# iphone - 用于测试的设备和 iOS 版本的最佳实践。需要在同一设备上安装多个 iOS 版本？

> ID：12498967
> 
> 赞同：0
> 
> 时间：2012-09-19T16:28:51.077
> 
> 标签：iphone, ios, ios5, ios6

我正在尝试评估我的一系列设备和版本，以便在 iPhone 5 面世时进行测试。我们有：

*   iPhone 5 与 iOS 6
*   装有 iOS 5 的 iPhone 4S
*   iPhone 4 与 iOS 5
*   iPhone 4 与 iOS 4
*   装有 iOS 5 的 iPad 1

我肯定想在 iOS 4 上保留一些东西（尽管很快可能就没有必要了），但我打算出售带有 iOS 5 的 iPhone 4。拥有 iOS 6 的 iPhone 4 或 4S 重要还是将拥有 iPhone 5 和 iOS 6 足以测试那个 iOS 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:11:28.017

我会说您还需要一台装有 iOS 6 的 iPad。使用和不使用视网膜显示器的测试对于某些应用程序可能至关重要。iOS 4 支持将迅速减弱，可能只有拥有 iPhone 3GS 之前的设备的人才会关心。如果他们懒得下载 iOS 版本，他们为什么要下载你的应用程序？

# kvm - 在 KVM 来宾中上传文件

> ID：12498968
> 
> 赞同：1
> 
> 时间：2012-09-19T16:28:55.137
> 
> 标签：kvm, libvirt

哪个库最适合在 KVM（基于内核的虚拟机）来宾中上传文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:46:32.043

可能是[libguestfs](http://libguestfs.org "libguestfs")是您正在寻找的，特别是[virt-copy-in](http://libguestfs.org/virt-copy-in.1.html "虚拟拷贝")和[virt-copy-out](http://libguestfs.org/virt-copy-out.1.html "virt-copy-out")工具？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T09:51:11.090

如果是 linux 来宾，你可以试试 9p-virtio。它可以在来宾和主机之间共享目录。 [http://www.linux-kvm.org/page/9p_virtio](http://www.linux-kvm.org/page/9p_virtio)

# ios - Facebook 错误 (7) iOS 6

> ID：12498972
> 
> 赞同：15
> 
> 时间：2012-09-19T16:29:22.720
> 
> 标签：ios, facebook, ios6

我收到此错误：

> 错误 Domain=com.apple.accounts Code=7 “Facebook 服务器无法完成此访问请求：代理的应用程序尚未安装。” UserInfo=0x114a7440 {NSLocalizedDescription=Facebook 服务器无法完成此访问请求：代理的应用程序尚未安装。}

我正在使用此代码获取访问权限：

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

[accountStore requestAccessToAccountsWithType:accountType options:[[NSDictionary alloc] initWithObjectsAndKeys:
                                                                       @"MY APP ID", ACFacebookAppIdKey,
                                                                       nil, ACFacebookPermissionsKey,
                                                                       nil] completion:^(BOOL granted, NSError *error) {

    if (granted == YES) {

        //My code

    } else {
        NSLog(@"No Facebook access: %@", error.debugDescription);
    }
}]; 
```

我该如何解决？

# c# - 使用 LINQ 获取子类别中的所有项目

> ID：12498976
> 
> 赞同：2
> 
> 时间：2012-09-19T16:29:43.053
> 
> 标签：c#, linq

我想获取当前类别中的所有项目以及链接到当前类别的所有子类别。目前我使用递归函数这样做，但我怀疑它可以通过修改查询来完成。主要原因是我想使用`.Skip()`，`.Take()`但如果我仍然必须首先使用递归来获取所有类别，这不会有任何区别。

## 数据库

![在此处输入图像描述](../Images/de3bfcbbe35c07e9b288178c9c725462.png)

## 我想要做的我的递归函数

```
public static IQueryable<Models.Item> Items(int id, List<Models.Item> items)
{
    if (items == null)
    {
        items = new List<Item>();
    }

    ModelDataContext _db = new ModelDataContext();

    var currentCategory = _db.Categories.Where(x => x.ID == id).Single();

    items.AddRange(currentCategory.Items);

    foreach (var c in currentCategory.Categories)
    {
        Items(c.ID, items);
    }

    return items.AsQueryable();
} 
```

tl;博士;
具有递归函数，可获取类别和子类别中的所有项目。想知道仅通过 LINQ 本身是否有可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:35:03.953

EF 或 LINQ to SQL 都不支持预先加载自引用对象。如果他们支持新的 HeirarchyID 是可能的，但可惜的是，目前这两个平台都没有真正的支持。

# python - 姜戈。如何在模板中显示图像

> ID：12498977
> 
> 赞同：1
> 
> 时间：2012-09-19T16:29:44.623
> 
> 标签：python, django

如何在模板中显示图像？

我尝试这样的事情（但不起作用）：

这是我的模型：

```
from django.db import models

class Photo(models.Model):
    title = models.CharField(max_length=255)
    img = models.ImageField(upload_to="media/galery")

    class Meta:
        verbose_name = "Galery"
        verbose_name_plural = "Galery"

    def __unicode__(self):
        return self.title 
```

视图.py

```
from django.shortcuts import render_to_response
from django.template import RequestContext

from kolejny.galery.models import Photo

def photo(request):
    photos = Photo.objects.all()
    return render_to_response('photo.html', {'photos' : photos}, context_instance=RequestContext(request)) 
```

照片.html

```
{% for p in photos  %}
<img src="{{ p.img.url }}"/>
{% endfor %} 
```

网址.py

```
urlpatterns = patterns('',
    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
    url(r'^photo/$', 'galery.views.photo'),
    url(r'^site_media/(.*)$', 'django.views.static.serve', {'document_root' : os.path.join(os.path.dirname(__file__), 'site_media')}),
) 
```

设置.py：

```
MEDIA_ROOT = ''
MEDIA_URL = ''
STATIC_ROOT = ''
STATIC_URL = '/static/' 
```

如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:39:07.250

将 MEDIA_ROOT 变量设置为指向实际图像所在的文件夹，例如：

```
MEDIA_ROOT = os.path.join(os.path.dirname(__file__), 'site_media') 
```

和 urls.py 中的行指向同一个文件夹：

```
url(r'^site_media/(.*)$', 'django.views.static.serve', {'document_root' : settings.MEDIA_ROOT}), 
```

和 MEDIA_URL：

```
MEDIA_URL = '/site_media/' 
```

# jquery-plugins - 在 jqGrid 中使用 jQuery UI Multiselect

> ID：12498979
> 
> 赞同：0
> 
> 时间：2012-09-19T16:29:56.307
> 
> 标签：jquery-plugins, jqgrid

我正在尝试使用 jQuery 插件 UI [Multiselect](http://quasipartikel.at/2009/05/10/jqueryui-multiselect/)。UI Multiselect 的调用经过`$(".multiselect").multiselect();` 问题是这个调用应该放在jqgrid配置的什么地方？这应该在 OnSelectRow 内完成吗？目前我在 OnSelectRow 中有以下调用/定义：

```
 function (rowid) {
       grid.setColProp('available_film_id',{
       editoptions:{
       dataInit:function (el){$(el).addClass('multiselect')},
       size:5,
       multiple:true,
       dataUrl:'/ajax/selectlist/?q=getSelected&value='+rowid}});
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:39:51.820

你可以调用`mutliselect`你的`dataInit`函数：

```
dataInit: function (el) { setTimeout(function () { $(el).multiselect(); }, 50); } 
```

创建元素时将调用该函数。

**更新**

当前版本的多*选*插件似乎需要元素在 DOM 中的位置。此事件在将元素插入 DOM 之前引发，因此需要使用 setTimeout 函数来完成所需的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:20:11.440

我不确定，但我认为你会通过参考[Byron 的答案](https://stackoverflow.com/questions/4186533/jqgrid-multiselect)得到答案。

如果你需要更多的演示，你可以看[这里](http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/)

# wcf - wcf 服务 maxUrlLength maxQueryStringLength maxRequestLength

> ID：12498980
> 
> 赞同：0
> 
> 时间：2012-09-19T16:30:05.073
> 
> 标签：wcf, iis, service

您好，我有 WCF 服务 如果我使用超过 260 个字符变量的路径调用，则 url 不起作用 有人有什么建议吗？

```
<system.web>
<compilation debug="true" targetFramework="4.0" />
<httpRuntime maxUrlLength="32766" maxQueryStringLength="2097151" maxRequestLength="2097151" requestValidationMode="2.0" relaxedUrlToFileSystemMapping="true" />
<customErrors mode="Off"/>
 </system.web>
 <system.serviceModel>
<bindings>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<services>
    <service name="DToolsSynchronizationService.SyncService">
    <endpoint kind="webHttpEndpoint"
    contract="DToolsSynchronizationService.ISyncService" />
  </service>
</services>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>
<system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

我有 IIS 7，它在 64 位 Windows Server 2008 中运行

我正在打开 [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\HTTP\Parameters]

我右键单击参数选择新的 dword 32 位值我将其命名为

MaxFieldLength（我选择十六进制）输入 fffe 即 0x0000fffe (65534)

MaxRequestBytes（我选择十六进制）输入 1000000 即 0x0000fffe (16777216)

UrlSegmentMaxLength（我选择十六进制）输入 fffe 即 0x001fffff (2097151)

就像在图片中一样[https://dl.dropbox.com/u/541519/fb/reg.png](https://dl.dropbox.com/u/541519/fb/reg.png)

我重新启动服务器，但仍然只能看到 260 个字符。我究竟做错了什么

我还打开了 iis 以将请求过滤设置为正确的值（查询字符串->启用设置 2097151 以获取最大 url 长度，最大查询字符串）

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-19T16:35:50.380

您可能可以使用自定义 webHttpBinding 解决此问题。

```
<bindings>
    <webHttpBinding>
        <binding name="longbinding" maxUrlLength="32766 />
    </webHttpBinding>
</bindings> 
```

然后将其用于您的端点

```
<endpoint kind="webHttpEndpoint"
    contract="DToolsSynchronizationService.ISyncService" 
    bindingConfiguration="longbinding"/> 
```

您可能需要进一步配置绑定，但这应该是一个开始。

# c# - 如果跨程序集，IDataObject.GetData(string, true) 将失败

> ID：12498982
> 
> 赞同：1
> 
> 时间：2012-09-19T16:30:19.087
> 
> 标签：c#, types

我正在调用 IDataObject.GetData() 并且它不适用于派生类。我在一个程序集（DLL）中进行调用，两个类都在第二个程序集（DLL）中。如果这是跨程序集，是否还有其他必须做的事情？

不工作是指它返回null。对于 GetDataPresent，它返回 false。

```
bool returnsFalse = dea.Data.GetDataPresent(typeof (ODataBaseNode));
bool returnsTrue = dea.Data.GetDataPresent(typeof (ODataEntitySetNode));
returnsFalse = dea.Data.GetDataPresent(typeof (ODataBaseNode).FullName, true);
returnsTrue = dea.Data.GetDataPresent(typeof (ODataEntitySetNode).FullName, true);

// code in other DLL
public class ODataEntitySetNode : ODataBaseNode
{ 
```

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:00:39.633

您可以通过检查以下值来检查类型名称的确切含义：

```
dea.Data.GetFormats()[0] 
```

这应该包含您需要传递以检索数据的字符串。我的猜测是跨程序集需要做一些“特别的事情”。

关于派生类型和`GetDataPresent`，检查[这个答案](https://stackoverflow.com/a/7371437/520044)，它提出了一个不同的解决方案。

# excel - excel表格中的自动递增行号

> ID：12498987
> 
> 赞同：3
> 
> 时间：2012-09-19T16:30:34.197
> 
> 标签：excel, ms-office, excel-formula, vba

我在单元格 B5 中写了以下公式

```
=SUMPRODUCT(--(COLORINDEXOFRANGE(Data!D10:HO10,FALSE,1)=COLORINDEXOFONECELL(Data!$F$3,FALSE,1))) 
```

当我从 B5 向下拖动到下一行时，公式中的单元格变为`COLORINDEXOFRANGE(Data!D11:HO11,FALSE,1)`

但我希望列号保持不变，只希望行号更改为，例如`COLORINDEXOFRANGE(Data!E10:HO10,FALSE,1)`单元格 C5 和`COLORINDEXOFRANGE(Data!F10:HO10,FALSE,1)`单元格 D5 等等。

COLORINDEXOFRANGE 是我在互联网上找到的内置功能。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:25:51.270

如果范围的结尾保持不变，那么您可以使用`INDEX`仅更改范围的开头，即替换`Data!D10:HO10`为

`=INDEX(Data!D$10:HO$10,ROWS(B$5:B5)):Data!HO$10`

这种类型的 INDEX 公式只是半易失性的（它们在打开工作表时重新计算），这可能比完全易失性`OFFSET`和`INDIRECT`函数更可取。函数也`ROWS`比它更好，`ROW`因为它可以处理在公式上方插入（或删除）的行而不改变结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:44:24.737

有几种方法可以解决将公式拖放到固定参考单元格的问题：

1.  要从字面上回答您的问题，您可以使用 引用他们当前的行号`ROW()`，因此`ROW() - 1`给出前一个行号。
2.  但这不适用于您的情况，因为您正在引用一个范围。另一个功能是`INDIRECT()`，看看文档，但这可以这样使用 INDIRECT("R5C" & COLUMN(), FALSE)
3.  因为选项 #2 往往会使公式变得很长并且（几乎）不可读，有时您可以摆脱[命名范围](https://www.google.com/search?q=excel%20named%20range)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T17:49:07.273

为了从水平参考更改为垂直参考，我使用`OFFSET`了 ，在其中我引用另一张表中的值，`=OFFSET('Forecast'!$I$17,COLUMN()-3,0)`以便参考的 column() 成为行参考

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-07T09:19:14.647

我有一个类似的问题：向下拖动一个值，没有按预期增加。问题是我对数据应用了过滤器。删除过滤器恢复了功能。

# sql - Activerecord - 计数更好还是限制更好？

> ID：12498988
> 
> 赞同：1
> 
> 时间：2012-09-19T16:30:34.103
> 
> 标签：sql, ruby-on-rails, ruby, activerecord

比如说，我想知道一个用户是否有至少 3 个订单

考虑到订单表相当大，哪个更好？

一种。将结果集的大小限制为 3 并查看大小是否匹配

```
NO_OF_MATCHES = 3
orders =  Order.where('user_id = ?', 1).limit(NO_OF_MATCHES )
return true if orders.size == NO_OF_MATCHES 
```

湾。只需数数并与之进行比较

```
NO_OF_MATCHES = 3
count = Order.count(:conditions => ['user_id = ?',1])
return true if count >= NO_OF_MATCHES 
```

任何我没有想到的全新方法也将受到欢迎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:40:38.807

“请注意，我只获取 3 个结果，而不是全部……只是想知道获取 3 个结果是否更快或计算一百万条记录更快……因此我提出了这个问题。”

我会加一〜eveevans回答，但这是长答案......

通常，数据库会记录记录的数量并优化查询结果以仅使用该数量。有时他们会保留不同值的数量、具有唯一索引的值的记录数量，或者取决于数据库供应商的实现的任意数量的案例。您的查询可能恰好碰到了他们正在跟踪且优化器可以使用的数字。所以 count(*) 查询通常比选择更快。

接下来，使用“SELECT count(*)”，一行中有一个整数列，这比使用“SELECT *”的结果集*要少得多。*数据库必须获取记录中所有字段的值。（执行“SELECT id FROM orders LIMIT 3”甚至会有所帮助。）它必须对每个记录的每个字段值进行字节编码。然后客户端适配器必须将字节解码为 ruby​​ 值。然后 ActiveRecord 遍历列的描述并构建属性数组。仅计数就少了很多工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T16:40:13.783

如果您只想要一个数字（计数），请使用选项 B，第一种情况返回所有符合条件的订单，第二种情况只返回符合条件的订单数量。

# facebook - Facebook Share 忽略空的打开图表描述

> ID：12498989
> 
> 赞同：0
> 
> 时间：2012-09-19T16:30:34.890
> 
> 标签：facebook, web, facebook-opengraph

对于我们的网站，我们包括以下开放图元标记，以提供 Facebook 共享的描述。

```
<meta property="og:description" content="User provides optional content here..." /> 
```

对于描述，我们包括一些用户提供的数据。但是，此数据字段是可选的。我们发现，如果我们将内容属性保留为空字符串，Facebook 似乎完全忽略了元标记并使用文档中的第一个段落标记。我不希望 Facebook 这样做。

在这些情况下，我们宁愿不提供默认描述。是否有解决方法或者我们做错了什么？还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:27:38.293

我设法在防火墙之外设置了一个开发环境，因此我可以测试一些解决方法。看起来我所要做的就是在没有描述的情况下输出一个空格。