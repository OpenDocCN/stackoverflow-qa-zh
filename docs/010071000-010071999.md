# StackOverflow 问答 10071000-10071999

# ios - Facebook。如何获取我的应用程序的所有用户的列表？

> ID：10071000
> 
> 赞同：1
> 
> 时间：2012-04-09T08:57:56.200
> 
> 标签：ios, facebook

在问之前我一直在谷歌搜索，但不幸的是一切都是徒劳的。让我的应用程序的所有 Facebook 用户唯一的可能性是维护我自己的数据库，或者任何 Facebook API 都提供了一种更简单的方法？谁能帮我吗？我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:51:26.537

Facebook 不提供检索安装了您的应用程序的用户的方法。而且您应该将该信息存储在您的终端上以便能够跟踪它。

您只能从 Application Insights 检索使用您的应用程序的用户数（请参阅类似问题的答案：[如何获取所有已授权我的 Facebook 应用程序的用户？](http://facebook.stackoverflow.com/questions/4579717/how-do-i-get-all-the-users-that-have-authorized-my-facebook-app)）

# django - 没有名为 filterspecs 的模块

> ID：10071001
> 
> 赞同：6
> 
> 时间：2012-04-09T08:58:00.903
> 
> 标签：django, eclipse

在 Eclipse 中，当我创建新项目时，出现类似错误，

```
 Error creating Django project     
    settings.py file not created     
    Stdout:
    Stderr: 
```

如果我同步当前项目和运行服务器，我得到错误：没有名为 filterspecs 的模块。但我没有在我的项目中使用 filterspecs。已经在 usr/local/lib/python2.7/dist-packages/django/contrib/admin 中安装了 filterspecs.py。

请建议纠正错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T21:58:27.037

您可能正在使用`django.contrib.admin.filterspecs`为您的管理页面创建自定义过滤器，如下所述： [Django 1.3 或更低版本的 Django Admin 中的自定义过滤器](https://stackoverflow.com/questions/991926/custom-filter-in-django-admin)

不幸的是，您将不得不使用新的`list_filter`模块功能重写这些。

请参阅此处的手册：

[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T22:36:05.420

这也发生在我身上，即使我的代码没有直接使用任何过滤器规范。

运行`python manage.py runserver --traceback`以查看错误的确切来源。

这个模块在 Django 1.4 中被删除了，但是你在 settings.py 中列出的其他外部模块可能仍在使用它，所以请确保升级 INSTALLED_APPS 列表中的所有内容。就我而言，我使用的是过时版本的 FeinCMS，但升级后，错误消失了。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-04-09T09:01:54.890

显然，您的系统缺少`filterspecs`项目所需的模块。通过在控制台中输入来安装它`sudo pip install filterspecs`（如果你在 linux 上）

# c# - 动态延迟 IObservable 值的延迟函数

> ID：10071004
> 
> 赞同：3
> 
> 时间：2012-04-09T08:58:15.157
> 
> 标签：c#, .net, datetime, delegates, system.reactive

[*这个问题是关于[IObservable / Rx](http://blogs.microsoft.co.il/blogs/bnaya/archive/2010/02/19/rx-reactive-extension-for-beginner-part-1.aspx)* ]

### 工作固定延迟

```
var frequency = TimeSpan.FromMinutes(5);
Result.Delay(frequency).Subscribe(i => Debug.WriteLine("After Fixed Delay")); 
```

### 可变延迟的伪代码

```
Result.Delay(GetAsymptotingTime()).Subscribe(i => Debug.WriteLine("After Changing Delay")); 
```

虽然变量延迟的代码编译它只被调用一次，只提供第一个值（本质上是一个固定值）。

*   你怎么能订阅响应式扩展的动态延迟？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-05T10:52:01.907

看起来有一个新的 .Delay 重载允许在 RX 本身内实现此功能：

来自[http://blogs.msdn.com/b/rxteam/archive/2012/03/12/reactive-extensions-v2-0-beta-available-now.aspx](http://blogs.msdn.com/b/rxteam/archive/2012/03/12/reactive-extensions-v2-0-beta-available-now.aspx)：

```
var res = input.Delay(x => Observable.Timer(TimeSpan.FromSeconds(x.Length))); 
```

给定用户输入，它的延迟时间等于输入长度（以秒为单位）。换句话说，每个元素的延迟现在可以取决于数据本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:58:07.537

我认为这有效：

```
source
  .SelectMany(i => Observable.Timer(GetAsymptotingTime()).Select(_=>i)) 
```

如果您的延迟正在减少，则生成的流可能与原始流的顺序不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-13T21:52:30.210

可能是我没有得到正确的问题，但是当我正在寻找一种在项目之间放置相同固定延迟的方法时，我已经介入了它，这太快了。以前的解决方案对我不起作用，（RX 4.0）实际上根本没有延迟。

我的解决方案很简单：

```
myObservable.Zip(Observable.Interval(TimeSpan.FromSeconds(1)), (a, _) => a) 
```

我在测试动态序列时使用过它

```
 using var d2 = new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17 }
        .ToObservable()
        .Zip(Observable.Interval(TimeSpan.FromSeconds(1)), (a, _) => a)
        .Do(a => Log.Logger.Debug("b {a}", a))
        .Subscribe(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T16:03:38.147

如果你想延迟一次，那么你可以使用 Observable.Delay。我不知道 Result 的类型是什么，所以我假设它已经是一个 IObservable ，所以，你可以这样做：

```
 var Result = Observable.Range(0, 10);
var frequency = TimeSpan.FromMilliseconds(1500);
var delay = Result.Delay(frequency);
delay.Subscribe(x => Debug.WriteLine(x)); 
```

# python - “NoneType”对象在 suds 中没有属性“str”

> ID：10071005
> 
> 赞同：2
> 
> 时间：2012-04-09T08:58:16.910
> 
> 标签：python, django, suds

我有这个代码：

yestest.py

```
#!/usr/bin/env python
import os
from suds.client import Client as abo

WSDL = 'DirectConnect.production.wsdl'

def test_api():
    url = 'file://' + os.path.join(os.path.abspath(os.path.dirname(__file__)), WSDL)
    print url
    client = abo('file:///home/agileone/workspace/surebooked/surebooked/DirectConnect.production.wsdl')

    data = {
        'MerchantCode': 'HELLOWORLD',
        'MerchantReference':  '3252',
        'TransactionType': 20,
        'Amount': 10,
        'CurrencyCode': 'USD',
        'CardHolderName': 'RAUL O REVECHE',
        'CardNumber': 4005550000000001,
        'ExpiryMonth': 5,
        'ExpiryYear': 2013,
        'CardID': 0,
        'CardSecurityCode': 400,
        'CustomerAccountNumber': '',
        'BillNumber': 0,
        'CardHolderEmail': 'development@yespayments.com.ph',
        'ClientIPAddress': 'http://127.0.0.1/',
        'Notes': 'This is test',
    }

    print data
    result = client.service.OnlineTransaction(**data)
    print result.ResponseDescription

if __name__ == '__main__':
    test_api() 
```

当我使用它运行它时它运行正常，`python payment.py` 但是如果我在我的 django 中使用它运行它`python manage.py shell`

我有一个错误。

```
Python 2.7.1+ (r271:86832, Apr 11 2011, 18:05:24) 
[GCC 4.5.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from surebooked.yestest import *
>>> test_api()
file:///home/agileone/workspace/surebooked/surebooked/DirectConnect.production.wsdl
{'ExpiryYear': 2013, 'CardNumber': 4005550000000001L, 'BillNumber': 0, 'CardHolderEmail': 'development@yespayments.com.ph', 'MerchantReference': '3252', 'CurrencyCode': 'USD', 'CardHolderName': 'RAUL O REVECHE', 'ExpiryMonth': 5, 'CustomerAccountNumber': '', 'Amount': 10, 'MerchantCode': 'SUREBOOKED', 'ClientIPAddress': 'http://127.0.0.1/', 'CardID': 0, 'Notes': 'This is test', 'CardSecurityCode': 400, 'TransactionType': 20}
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/home/agileone/workspace/surebooked/surebooked/../surebooked/yestest.py", line 32, in test_api
    result = client.service.OnlineTransaction(**data)
  File "/usr/local/lib/python2.7/dist-packages/suds/client.py", line 542, in __call__
    return client.invoke(args, kwargs)
  File "/usr/local/lib/python2.7/dist-packages/suds/client.py", line 595, in invoke
    soapenv = binding.get_message(self.method, args, kwargs)
  File "/usr/local/lib/python2.7/dist-packages/suds/bindings/binding.py", line 120, in get_message
    content = self.bodycontent(method, args, kwargs)
  File "/usr/local/lib/python2.7/dist-packages/suds/bindings/document.py", line 63, in bodycontent
    p = self.mkparam(method, pd, value)
  File "/usr/local/lib/python2.7/dist-packages/suds/bindings/document.py", line 105, in mkparam
    return Binding.mkparam(self, method, pdef, object)
  File "/usr/local/lib/python2.7/dist-packages/suds/bindings/binding.py", line 287, in mkparam
    return marshaller.process(content)
  File "/usr/local/lib/python2.7/dist-packages/suds/mx/core.py", line 62, in process
    self.append(document, content)
  File "/usr/local/lib/python2.7/dist-packages/suds/mx/core.py", line 73, in append
    log.debug('appending parent:\n%s\ncontent:\n%s', parent, content)
  File "/usr/lib/python2.7/logging/__init__.py", line 1120, in debug
    self._log(DEBUG, msg, args, **kwargs)
  File "/usr/lib/python2.7/logging/__init__.py", line 1250, in _log
    self.handle(record)
  File "/usr/lib/python2.7/logging/__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.7/logging/__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.7/logging/__init__.py", line 744, in handle
    self.emit(record)
  File "/home/agileone/workspace/surebooked/surebooked/.ve/src/django-debug-toolbar/debug_toolbar/panels/logger.py", line 51, in emit
    'message': record.getMessage(),
  File "/usr/lib/python2.7/logging/__init__.py", line 328, in getMessage
    msg = msg % self.args
  File "/usr/local/lib/python2.7/dist-packages/suds/sax/document.py", line 58, in __str__
    return unicode(self).encode('utf-8')
  File "/usr/local/lib/python2.7/dist-packages/suds/sax/document.py", line 61, in __unicode__
    return self.str()
  File "/usr/local/lib/python2.7/dist-packages/suds/sax/document.py", line 48, in str
    s.append(self.root().str())
AttributeError: 'NoneType' object has no attribute 'str' 
```

我认为问题出在泡沫中，但我不知道如何解决这个问题。

任何人都可以帮助我处理我的情况吗？

我尝试在网上搜索但我找不到任何答案..

提前致谢...

这就是我所做的？这是对的吗？

```
>>> import pdb; pdb.pm()
> /usr/local/lib/python2.7/dist-packages/suds/sax/document.py(48)str()
-> s.append(self.root().str())
(Pdb) api_test()
*** NameError: name 'api_test' is not defined
(Pdb) from surebooked.yestest import *
(Pdb) api_test()
*** NameError: name 'api_test' is not defined
(Pdb) from surebooked.yestest import *
(Pdb) test_api()
file:///home/agileone/workspace/surebooked/surebooked/DirectConnect.production.wsdl
{'ExpiryYear': 2013, 'CardNumber': 4005550000000001L, 'BillNumber': 0, 'CardHolderEmail': 'development@yespayments.com.ph', 'MerchantReference': '3252', 'last_traceback': '', 'CurrencyCode': 'USD', 'CardHolderName': 'RAUL O REVECHE', 'ExpiryMonth': 5, 'CustomerAccountNumber': '', 'Amount': 10, 'MerchantCode': 'SUREBOOKED', 'ClientIPAddress': 'http://127.0.0.1/', 'CardID': 0, 'Notes': 'This is test', 'CardSecurityCode': 400, 'TransactionType': 20}
*** AttributeError: 'NoneType' object has no attribute 'str'
(Pdb) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T08:46:08.960

您好，您同时使用 DJDt 吗？这是 suds 中的一个错误，当您将其与 Django 调试工具栏一起使用时会引发该错误。检查这个补丁：[https](https://github.com/bradleyayers/suds-htj) ://github.com/bradleyayers/suds-htj 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T09:13:22.223

该错误意味着它所说的： NoneType 没有 str 方法，您也不希望它有。

查看堆栈跟踪中的最后一行：`s.append(self.root().str())`. 它在`str`召唤`self.root()`；随之而来的`self.root()`是回归`None`。

您应该做的是从控制台触发测试（或等效代码），并在发生异常时执行`import pdb; pdb.pm()`. 这将在异常发生（或被处理）时带您进入调试器。从那里，您可以找到`None`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T09:15:50.423

使函数`test_api`返回`result.ResponseDescription`而不是仅仅打印它

# java - 如何使用 JSON 数据（java）发送 POST 方法？

> ID：10071009
> 
> 赞同：1
> 
> 时间：2012-04-09T08:58:52.723
> 
> 标签：java, google-app-engine, java-ee-6

我需要发送带有 JSON 数据的 POST 方法，确保我需要发送序列化为字符串的 JSON 对象。不是 JSON 字符串本身。所以我如何使用 JAVA 实现它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T14:14:18.807

```
 public static String sendPostRequest(String postURL) throws Exception{
    String responseStr=null;
    //make POST request
    String jsonContent = "{'name': 'newIndia','columns': [{'name': 'Species','type': 'STRING'}],'description': 'Insect Tracking Information.','isExportable': true}";
    //String data = "{\"document\" : {\"_id\": \"" + id+ "\", \"context\":" + context +"}}";
    URL url = new URL(postURL);
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();

    connection.setDoOutput(true);
    connection.setDoInput(true);
    connection.setInstanceFollowRedirects(false);
    connection.setRequestMethod("POST");
    connection.setRequestProperty("Content-Type", "application/json");
    connection.setRequestProperty("charset", "utf-8");
    connection.setRequestProperty("Content-Length", "" + Integer.toString(jsonContent.getBytes().length));
    connection.setUseCaches(false);

    OutputStreamWriter  writer = new OutputStreamWriter(connection.getOutputStream(), "UTF-8");
    writer.write(jsonContent);       
    writer.close();
    responseStr="Response code: "+connection.getResponseCode()+" and mesg:"+connection.getResponseMessage();

    System.out.println(connection.getResponseMessage());

    InputStream response;                  

    // Check for error , if none store response
    if(connection.getResponseCode() == 200){
        response = connection.getInputStream();
    }else{
        response = connection.getErrorStream();
    }
    InputStreamReader isr = new InputStreamReader(response);
    StringBuilder sb = new StringBuilder();
    BufferedReader br = new BufferedReader(isr);
    String read = br.readLine();
    while(read != null){
        sb.append(read);
        read = br.readLine();
    }  
    // Print the String    
    System.out.println(sb.toString());

    connection.disconnect();
    return responseStr;
} 
```

有关更多信息，您可以查看此[示例](http://knowledge-serve.blogspot.in/2013/12/send-post-request-with-json-data-on.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:28:44.520

我建议使用与 GAE 配合得很好的[Jersey](http://jersey.java.net/) REST 框架。[这](http://blog.iparissa.com/googles-app-engine-java/google-app-engine-jax-rs-jersey/)是一个演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-15T08:19:50.143

使用[gson](https://code.google.com/p/google-gson/)，您可以非常轻松地将 JSON 数据发布到 Web 服务。

例如：

```
public class MyData {                //var myJsonData = {
    private boolean fans = true;     //          fans:true,  
    private boolean funds = true;    //          funds:true
    //private String chart = "day";  //         }
} 
```

现在将 POJO 发送到*真正的*Web 服务：

```
public class Main {

    public static void main(String... args) throws Exception {

        URL theUrl = new URL("https://robertsspaceindustries.com/api/stats/getCrowdfundStats");
        Gson gson = new Gson();
        JsonParser jp = new JsonParser();
        MyData thedata = new MyData();

        HttpsURLConnection urlConnection = (HttpsURLConnection) theUrl.openConnection();
        urlConnection.setRequestMethod("POST");
        urlConnection.setDoOutput(true); //allow parameters to be sent/appended 

        DataOutputStream wr = new DataOutputStream(urlConnection.getOutputStream());
        wr.writeBytes(gson.toJson(thedata)); //convert the POJO to JSON, then to binary.
        wr.flush();
        wr.close();

        urlConnection.connect(); //start request transmission

        JsonElement retJson = jp.parse(new InputStreamReader((InputStream) urlConnection.getContent())); //convert the input stream to a json element
        System.out.println(retJson.getAsJsonObject());

        urlConnection.disconnect(); //end request transmission
    }
} 
```

回复：

```
{"success":1,"{"fans":910125,"funds":8410319141},"code":"OK","msg":"OK"} 
```

* * *

（注意，在撰写本文时等效的 cURL 命令是）->

```
curl 'https://robertsspaceindustries.com/api/stats/getCrowdfundStats' --data-binary '{"fans":true,"funds":true}' 
```

# oracle - 使用jsp执行oracle语句

> ID：10071022
> 
> 赞同：0
> 
> 时间：2012-04-09T08:59:50.073
> 
> 标签：oracle, jsp, jdbc

如何使用 jsp 执行“conn / as sysdba”。使用

```
PreparedStatement stmt = conn.prepareStatement(sql); 
```

显示 java.sql.SQLException: SQL string is not Query？

我怎么能用jsp做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:20:40.113

是的，*sql*是查询，但是你需要`resultQuery = stmt.executeQuery()`保存结果。

另外，查看驱动程序连接、数据库所在机器的名称以及用户名和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:05:55.710

`conn`是 SQL*Plus 命令，而不是 SQL 语句。所以它只能在 SQL*Plus（或另一个恰好支持 SQL*Plus 命令的客户端工具）中使用。您不能通过 JDBC 使用它。

`conn / as sysdba`告诉 SQL*Plus 使用操作系统身份验证以启用角色的用户身份连接到`SYS`数据库`SYSDBA`。在这种情况下，操作系统身份验证需要在安装数据库的服务器上调用 SQL*Plus，并且用户以操作系统用户“oracle”的身份登录。JSP 页面似乎不太可能适合和/或可能使用这样的操作系统身份验证——这至少要求运行 JSP 代码的应用程序服务器安装在同一台服务器上安装了 Oracle 并且它以与 Oracle 数据库相同的操作系统用户身份运行。这些都不太可能。与数据库`SYS`连接`SYSDBA`对于 JSP 页面，启用角色也很奇怪——您希望 JSP 代码以这些特权运行是非常罕见的。通常，Oracle 数据库不允许`SYS`来自运行 Oracle 的机器以外的任何设备的连接，因为一般情况下，只有 DBA 会使用该帐户登录，然后只执行一小部分实际需要该帐户的任务某种提升的访问权限。

应该可以将 Oracle 配置为接受`SYS`具有该`SYSDBA`角色的用户的远程连接。并且应该可以在您的 JSP 代码中配置连接字符串以使用该帐户的适当密码。但是想要两者都做是非常罕见的，并且会打开如此大的安全漏洞，以至于我会严重质疑这是否真的是你想要做的。你能解释一下你试图解决的问题吗？

# android - android 如何限制ListView中的列表项显示和一个按钮显示更多

> ID：10071024
> 
> 赞同：2
> 
> 时间：2012-04-09T09:00:00.570
> 
> 标签：android, listview

我正在从数据库中获取数据并在 ListView 中使用自定义列表适配器进行显示。

我只需要在 ListView 中显示 10 个项目。在第 10 项之后，一个按钮显示文本“显示更多”，当单击此按钮时，在列表视图中显示来自数据库的更多 10 项。

我怎么能这样做？

请通过代码示例告诉我

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-09T09:20:36.900

在 Base Adapter 中，最初取 i=10；然后在 BaseAdapter 的 getCount() 方法中使用这个“i”。

```
public int getCount() {
// TODO Auto-generated method stub
return i;
} 
```

并在您的“显示更多”按钮中单击递增 i，然后调用适配器。

前任：

```
i=i+10;
adapter.notifyDataSetChanged(); 
```

# c++ - google codejam：如何提交答案

> ID：10071025
> 
> 赞同：0
> 
> 时间：2012-04-09T09:00:06.017
> 
> 标签：c++, c

我正在参加 google codejam 2012。我有他们的[快速入门指南](http://code.google.com/codejam/quickstart.html)。但我仍然无法理解如何提交答案。我有以下问题：

1> 据说，我们必须下载测试用例（.in 文件）并使用它运行我们的程序。我只是想知道我是否必须制定一种方法来从 .in 文件中提取输入或手动输入以验证工作？

2> 提交我们的答案时，我们必须提交.txt 文件还是.exe 文件（我使用c 语言）？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:07:16.707

1.将.in文件放入你的程序文件夹中。测试时，你不必手动输入（当然要这样做）。我记得在 C 中有一种方法 fscanf 可以从文件中读取，这可能会对您有所帮助。但是你提交的时候，还是应该假设你是从屏幕读取的（手动输入的），也就是改回scanf。
2.您应该提交您的.c 文件。

# sql-server-2008 - 获取有关 sql server 中特定表中列的详细信息

> ID：10071026
> 
> 赞同：0
> 
> 时间：2012-04-09T09:00:09.087
> 
> 标签：sql-server-2008, foreign-keys

我需要查找有关特定表的列详细信息。这包括有关该表当前使用的外键的详细信息，例如引用的表名和引用的列名。目前我使用这样的查询，因为它返回表是否包含外键，但不显示任何有关引用表名等的信息。我尝试了很多方法，但没有得到准确的数据。这里查询我尝试参考：我试过使用**sys.foreign_key_columns**和**sys.foreign_keys**但我得到了错误。可能是我没有正确放置它。

```
SELECT  sys.columns.column_id AS ColumnId,sys.columns.name AS ColumnName,
sys.types.name AS Datatype,(SELECT COUNT(column_name) FROM INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE
 WHERE TABLE_NAME = sys.tables.name AND CONSTRAINT_NAME =(   SELECT  constraint_name FROM 
 INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE TABLE_NAME = sys.tables.name AND constraint_type = 
 'PRIMARY KEY' AND COLUMN_NAME = sys.columns.name ) ) AS IsPrimaryKey, ( SELECT COUNT(column_name)
   FROM INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE  WHERE TABLE_NAME = sys.tables.name AND CONSTRAINT_NAME 
  = ( SELECT  constraint_name  FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS  WHERE  TABLE_NAME = sys.tables.name 
  AND constraint_type = 'Foreign key' AND COLUMN_NAME = sys.columns.name  )  )   AS IsForeignkey,
    sys.columns.max_length  AS Lenght /*BUG*/
     FROM  sys.columns, sys.types, sys.tables WHERE  
    sys.tables.object_id = sys.columns.object_id AND sys.types.system_type_id = sys.columns.system_type_id 
    AND sys.types.user_type_id = sys.columns.user_type_id AND sys.tables.name ='tablename' ORDER BY columnid 
```

我尝试使用**sys.foreign_key_columns**和**sys.foreign_keys**但我得到了错误。可能是我没有正确放置它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:35:39.823

我想[这](http://blog.sqlauthority.com/2006/11/01/sql-server-query-to-display-foreign-key-relationships-and-name-of-the-constraint-for-each-table-in-database/)就是你要找的。

# java - 如何编辑文件中的特定属性？

> ID：10071027
> 
> 赞同：0
> 
> 时间：2012-04-09T09:00:18.200
> 
> 标签：java, file, overwrite

因此，假设您有一个用 XML 或其他此类编码语言编写的文件。是否可以只重写一行而不是将整个文件变成一个字符串，然后更改该行，然后必须将整个字符串重写回文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:03:24.600

一般来说，没有。文件系统通常不支持在文件中间插入或修改数据的想法。

如果您的数据文件是固定大小的记录格式，那么您可以*编辑*记录而不覆盖文件的其余部分。对于像 XML 这样的东西，*理论上*您可以通过插入与语义无关的空格来用较短的值覆盖一个值，但您将无法写入*更大的*值。

在大多数情况下，只重写整个文件会更简单——如果可以的话，可以通过以流方式读取和写入（如果文件太大而无法一次性读入内存），或者只是将整个文件加载到某个文件中-内存数据结构（例如`XDocument`），进行更改，然后再次保存文件。（您可能需要考虑保存到不同的文件，然后移动文件以避免在保存操作由于某种原因失败时丢失数据。）

如果所有这些最终都过于昂贵，您应该考虑使用多个文件（因此每个文件都更小）或一个数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:10:28.363

如果您要替换的行大于您要替换的新行，那么只要可以接受某种填充（例如空白字符“ ”），就可以影响您的申请。

另一方面，如果新内容大于要替换的内容，则需要将所有数据向下移动，因此您需要重写文件，或者至少从被替换的行开始。

既然您提到了 XML，那么您可能以错误的方式处理您的问题。难道您需要的是替换特定的 XML 节点？在这种情况下，您可以考虑使用 DOM 将 XML 读入节点层次结构，并在其中添加/更新/删除，然后再将 XML 树写回文件。

# iphone - 在 iPhone 应用程序中合并两个视频文件

> ID：10071029
> 
> 赞同：3
> 
> 时间：2012-04-09T09:00:26.050
> 
> 标签：iphone, objective-c, ios, xcode

在我的一个应用程序中，我需要在视频中添加一些图像。所以我将中断视频分成两部分，并从该图像制作一个视频。现在我想合并这三个视频文件并制作一个视频文件。但我不知道将这三个视频结合起来。我在这里看到了一些代码。但这对我没有帮助。对于中断视频和从图像制作视频，我现在使用下面的代码，我希望代码合并所有视频。

将当前视图屏幕放在视频文件之间的任何其他想法。

**用于中断视频文件**

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"Affagogato" ofType:@"mp4"]];
 AVURLAsset *anAsset = [[AVURLAsset alloc] initWithURL:url options:nil];

for(int i = 0; i < 2; i++) {
    AVAssetExportSession *exportSession = [[AVAssetExportSession alloc]
                                           initWithAsset:anAsset presetName:AVAssetExportPresetLowQuality];
    NSString *filePath = nil;
    NSUInteger count = 0;
    do {
        filePath = NSTemporaryDirectory();

        NSString *numberString = count > 0 ? [NSString stringWithFormat:@"-%i", count] : @"";
        filePath = [filePath stringByAppendingPathComponent:[NSString stringWithFormat:@"Output-%@.mov", numberString]];
        count++;
    } while([[NSFileManager defaultManager] fileExistsAtPath:filePath]);      

    exportSession.outputURL = [NSURL fileURLWithPath:filePath];
    exportSession.outputFileType = AVFileTypeQuickTimeMovie;
    CMTimeRange range;
    if(i == 0){
        CMTime start = CMTimeMakeWithSeconds(0.0, 600);
        CMTime duration = CMTimeMakeWithSeconds(10.0, 600);
        range = CMTimeRangeMake(start, duration);
    }else{
        CMTime start = CMTimeMakeWithSeconds(10.0, 600);
        range = CMTimeRangeMake(start, anAsset.duration);
    }
    exportSession.timeRange = range;   

    [exportSession exportAsynchronouslyWithCompletionHandler:^
     {
         dispatch_async(dispatch_get_main_queue(), ^{
             [self exportDidFinish:exportSession Tag:i];
         });
     }]; 
} 
```

**从图像中获取视频**

```
CGRect rect=CGRectMake(0, 0, 320, 480);
view = [[UIView alloc]initWithFrame:rect];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
NSString *path = [documentsDirectory stringByAppendingPathComponent:[@"video2"  stringByAppendingString:@".mov"]];

CGSize size = self.view.frame.size;

NSMutableDictionary *attributes = [[NSMutableDictionary alloc]init];
[attributes setObject:[NSNumber numberWithUnsignedInt:kCVPixelFormatType_32ARGB] forKey:(NSString*)kCVPixelBufferPixelFormatTypeKey];
[attributes setObject:[NSNumber numberWithUnsignedInt:320] forKey:(NSString*)kCVPixelBufferWidthKey];
[attributes setObject:[NSNumber numberWithUnsignedInt:480] forKey:(NSString*)kCVPixelBufferHeightKey];

NSError *error = nil;
AVAssetWriter *videoWriter = [[AVAssetWriter alloc] initWithURL:
                              [NSURL fileURLWithPath:path] fileType:AVFileTypeQuickTimeMovie
                                                          error:&error];

NSParameterAssert(videoWriter);
NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                               AVVideoCodecH264, AVVideoCodecKey,
                               [NSNumber numberWithInt:size.width], AVVideoWidthKey,
                               [NSNumber numberWithInt:size.height], AVVideoHeightKey,
                               nil];

AVAssetWriterInput* writerInput = [[AVAssetWriterInput
                                    assetWriterInputWithMediaType:AVMediaTypeVideo
                                    outputSettings:videoSettings] retain];

AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor
                                                 assetWriterInputPixelBufferAdaptorWithAssetWriterInput:writerInput
                                                 sourcePixelBufferAttributes:nil];

NSParameterAssert(writerInput);
NSParameterAssert([videoWriter canAddInput:writerInput]);
[videoWriter addInput:writerInput];

//Start a session:
[videoWriter startWriting];
[videoWriter startSessionAtSourceTime:kCMTimeZero];

CVPixelBufferRef buffer = NULL;

//convert uiimage to CGImage.

xPixel=0;
yPixel=250;

buffer = [self pixelBufferFromCGImage:[[UIImage imageNamed:@"1.jpeg"] CGImage]];

CVPixelBufferPoolCreatePixelBuffer (NULL, adaptor.pixelBufferPool, &buffer);
[adaptor appendPixelBuffer:buffer withPresentationTime:kCMTimeZero];

for (int i = 0;i<2; i++)
{
    if([writerInput isReadyForMoreMediaData])
    {
        //NSLog(@"inside for loop %d",i);

        for(int pframetime=1;pframetime<=2;pframetime++)
        {  

            CMTime frameTime = CMTimeMake(pframetime,25);
            CMTime lastTime=CMTimeMake(i,1); //i is from 0 to 19 of the loop above
            CMTime presentTime=CMTimeAdd(lastTime, frameTime);

            if(i==0)
                buffer = [self pixelBufferFromCGImage:[[UIImage imageNamed:@"1.jpeg"] CGImage]];
            else
                buffer = [self pixelBufferFromCGImage:[[UIImage imageNamed:@"2.jpeg"] CGImage]];
            while ( ![writerInput isReadyForMoreMediaData] )
            {
                [NSThread sleepForTimeInterval:0.05];
            }

            [adaptor appendPixelBuffer:buffer withPresentationTime:presentTime];
            i++;
        }
        if(buffer)
            CVBufferRelease(buffer);
        //[NSThread sleepForTimeInterval:0.1];
    }
}
[writerInput markAsFinished];
[videoWriter finishWriting];
[videoPathArray addObject:path];

//Finish the session:

[videoWriter release];
[writerInput release];
CVPixelBufferPoolRelease(adaptor.pixelBufferPool); 
```

**对于合并视频文件，我尝试使用此代码，但这里没有用，视频之间有一些空白屏幕**

```
 AVMutableComposition* mixComposition = [AVMutableComposition composition];

    NSString *documentsDirectoryPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];  

    NSString* video_inputFilePath1 = [videoPathArray objectAtIndex:1];
    NSURL*    video_inputFileUrl1 = [NSURL fileURLWithPath:video_inputFilePath1];

    NSString* video_inputFilePath2 = [videoPathArray objectAtIndex:0];
    NSURL*    video_inputFileUrl2 = [NSURL fileURLWithPath:video_inputFilePath2];

    NSString* video_inputFilePath3 = [videoPathArray objectAtIndex:2];
    NSURL*    video_inputFileUrl3 = [NSURL fileURLWithPath:video_inputFilePath3];

    NSString* outputFileName = @"outputFile.mov";
    NSString* outputFilePath = [NSString stringWithFormat:@"%@/%@",documentsDirectoryPath,outputFileName];

    NSURL*    outputFileUrl = [NSURL fileURLWithPath:outputFilePath];

    if ([[NSFileManager defaultManager] fileExistsAtPath:outputFilePath]) 
        [[NSFileManager defaultManager] removeItemAtPath:outputFilePath error:nil];

    CMTime nextClipStartTime = kCMTimeZero;

    AVURLAsset* videoAsset1 = [[AVURLAsset alloc]initWithURL:video_inputFileUrl1 options:nil];
    AVURLAsset* videoAsset2 = [[AVURLAsset alloc]initWithURL:video_inputFileUrl2 options:nil];
    AVURLAsset* videoAsset3 = [[AVURLAsset alloc]initWithURL:video_inputFileUrl3 options:nil];

    CMTimeRange video_timeRange1 = CMTimeRangeMake(kCMTimeZero,videoAsset1.duration);
    AVMutableCompositionTrack *a_compositionVideoTrack1 = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    [a_compositionVideoTrack1 insertTimeRange:video_timeRange1 ofTrack:[[videoAsset1 tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:nextClipStartTime error:nil];

    CMTimeRange video_timeRange3 = CMTimeRangeMake(nextClipStartTime,videoAsset3.duration);

    [a_compositionVideoTrack1 insertTimeRange:video_timeRange3 ofTrack:[[videoAsset3 tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:videoAsset1.duration error:nil];

    CMTimeRange video_timeRange2 = CMTimeRangeMake(nextClipStartTime,videoAsset1.duration);
    [a_compositionVideoTrack1 insertTimeRange:video_timeRange2 ofTrack:[[videoAsset2 tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:videoAsset1.duration error:nil];

    AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetLowQuality];   
    _assetExport.shouldOptimizeForNetworkUse = YES;
    _assetExport.outputFileType = @"com.apple.quicktime-movie";
    _assetExport.outputURL = outputFileUrl; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:07:56.617

Try watching the video called "Working with Media in AV Foundation" in the apple developers portal. It tells you how to do what you are describing.

[https://developer.apple.com/videos/wwdc/2011/](https://developer.apple.com/videos/wwdc/2011/)

# linux - 通过电子邮件发送 CPU 利用率的 Shell 脚本

> ID：10071031
> 
> 赞同：0
> 
> 时间：2012-04-09T09:00:36.640
> 
> 标签：linux, shell, sh

我是 shell 脚本的初学者，我正在寻找一个脚本来添加为 cron 作业，该作业可以发送电子邮件或使用 top 命令的 CPU 百分比警告电子邮件 ID。

这个脚本基本上是为了让用户注意服务器的峰值 CPU 使用率。如果有任何脚本可以执行此操作或更好地监控 CPU 使用率/内存使用情况，请指出我。

谢谢，阿比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:09:16.537

Depending on where your `mail` is in your linux flavor, you can try

```
*/10 * * * * /bin/ps -eo pcpu,pid,user,args | /bin/sort -k 1 -r | /bin/mail youremail@where.com 
```

This will send you, every 10 minutes, the cpu usage sorted from the highest to the lowest.

# c# - Enumerable.Repeat 有一些内存问题？

> ID：10071032
> 
> 赞同：1
> 
> 时间：2012-04-09T09:00:40.747
> 
> 标签：c#, linq, ienumerable

我将一个数组初始化为

```
Double[][] myarr = Enumerable.Repeat(new double[12], 13).ToArray(); 
```

然后在一个循环中，我正在递增值，例如

```
myarr[0][0]++; 
```

这会导致 myarr[1][0]、myarr[2][0]、myarr[3][0] ..... myarr[12][0] 等所有值加一。

使用 for 循环（0-12）时不会发生此问题，我正在初始化

```
myarr[i] = new double[12]; 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T09:08:54.323

Other answers have explained the problem. The solution is to create a new array on each iteration, e.g.

```
double[][] myarr = Enumerable.Range(0, 13)
                             .Select(ignored => new double[12])
                             .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:05:21.740

随着`new double[12]`您创建对双精度数组的引用，然后您重复**引用**12 次，因此 myarr[0..n] 将引用一个内存区域。

您可以使用以下方法解决问题

```
static T[][] CreateArray<T>(int rows, int cols)
{
    T[][] array = new T[rows][];
    for (int i = 0; i < array.GetLength(0); i++)
        array[i] = new T[cols];

    return array;
} 
```

或者使用每一步调用动作的自定义重复方法：

```
public static IEnumerable<TResult> RepeatAction<TResult>(Action<TResult> elementAction, int count)
{
    for (int i = 0; i < count; i++)
    {
        yield return elementAction();
    }
    yield break;
}
usage
RepeatAction(()=>new double[12], 12); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T09:06:03.593

这是因为`new double[12]`在内存中创建了一个数组对象 - Enumerable.Repeat 只是为您提供对该数组的多个引用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T09:07:04.650

这是预期的行为 - 数组是一种参考类型。您正在创建一个锯齿状数组，即数组数组。外部数组的所有元素都引用同一个内部数组，即`Repeat`调用的第一个参数，因此内部数组的变化将反映在索引上（因为所有索引都引用同一个数组）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-09T09:05:13.650

数组是引用。在`Repeat`调用中，您创建一个数组并为其分配 12 次引用。但是，在您的循环中，您创建了 12 个不同的数组。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-09T09:06:51.903

`Repeat()`基本上只是多次捕获并产生相同的元素，因此您在内存中获得了对同一对象实例的多个引用。

这是如何`Repeat()`实现的：

```
private static IEnumerable<TResult> RepeatIterator<TResult>(TResult element, int count)
{
    for (int i = 0; i < count; i++)
    {
        yield return element;
    }
    yield break;
} 
```

# php - VIM php omnicomplete - 多级对象层次结构

> ID：10071034
> 
> 赞同：2
> 
> 时间：2012-04-09T09:01:09.077
> 
> 标签：php, vim, omnicomplete

我正在处理具有复杂对象层次结构的现有 php 项目。Netbeans 在这里提供了很大的帮助，因为它具有自动完成功能（它并不完美，但在许多情况下已经足够准确了）。几乎不可能记住所有这些属性、关系等。

但是，netbeans是用java写的，速度慢，臃肿等等。最近一直在玩vim，想着抛弃netbeans。我目前正在使用这个脚本：[http ://www.vim.org/scripts/script.php?script_id=3171](http://www.vim.org/scripts/script.php?script_id=3171)

我缺少的一件事是多级对象的自动完成，例如：

一个.php

```
<?php
class A {

  /**
  * @var B
  **/
  public $b;

} 
```

b.php

```
<?php
class B {

  /**
  * @var C
  **/
  public $c;

} 
```

c.php

```
<?php
class C {

  /**
  * @var D
  **/
  public $d;

} 
```

测试.php

```
$a = new A();
$a-> //omni complete here works fine, it lists "b"
$a->b-> //displays 'b' again, instead of 'c' 
```

所以，它只适用于第一级.. 是否有可能以某种方式在 vim 中获得此功能？

如果没有，你如何在这些项目中找到自己的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:51:43.480

您的公共属性不过是空变量：

```
public $b; 
```

因为你没有给它任何属性/方法或让它成为 的实例`B()`，所以你不应该期望 Vim 为`$b->`.

和：

**一个.php，**

```
<?php
class A {
  public $b = new B();   
} 
```

**b.php,**

```
<?php
class B {
  public $c = new C();
} 
```

**c.php**

```
<?php
class C {
  public $c;
} 
```

和**test.php**

```
<?php
  $a = new A();
  $a-> // proposes b
  $a->b-> //proposes b

  $b = $a-> // proposes b
  $b = $a->b;
  $c = $b-> // proposes c
  $c = $b->c;
  $d = $c-> // proposes d 
```

所以……PHP 补全插件可能有点受限（毫不奇怪，Vim 是一个文本编辑器，而不是 IDE），但如果你坚持更传统（和可读）的编码风格，它似乎可以工作。

同样，Vim*只是*一个文本编辑器。一个非常强大的，但它仍然*只是*一个文本编辑器。在某些情况下，臃肿的 IDE**是完成这项工作的正确工具**，不管它有多慢，但你喜欢 Vim。

# android - 如何使 JSONArray 为空或删除它

> ID：10071040
> 
> 赞同：0
> 
> 时间：2012-04-09T09:02:01.210
> 
> 标签：android, json

完成一个活动的执行后，我想让 jSONArray 为空或删除它。因为当我重复调用活动时，新数据会附加到 JSONArray 中存在的旧数据。我的 jsonArray 如下图所示..

```
[{"record":[
            {......},
            {.......}
           ]
 },
 {"record":[
            {..........},
            {.........}
           ]
 }
] 

First time:
[{"record":[{"intensity":"Low","Body_SubParts":"Scalp","symptom":"Bleeding"}]}]

Second time:
[{"record":[{"intensity":"Low","Body_SubParts":"Scalp","symptom":"Bleeding"},
{"intensity":"Low","Body_SubParts":"Eyes","symptom":"Bleeding"}]}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:05:03.987

[在这里](https://stackoverflow.com/a/8740464/799188)回答

```
// Assuming you have constructed the replacement as
JSONObject jsonArray11_obj2 = new JSONObject();
jsonArray11_obj2.put("intensity", "high");
jsonArray11_obj2.put("Body_SubParts", "Scalp");
// ...

// Then the code doing the replacement would look similar to
int index = 0;
((JSONObject)jsonArray.get(index)).getJSONArray("record").put(0, jsonArray11_obj2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:15:27.053

构建`JSON`数组后，使对象无效`JSONArray`..下次再次构建`JSON`数组

# php - 如何过滤字符串

> ID：10071042
> 
> 赞同：-1
> 
> 时间：2012-04-09T09:02:18.493
> 
> 标签：php, string

我有这个字符串：

```
"small:
http://img.exent.com/free/frg/products/666550/player_boxshot.jpg
boxshot:
http://img.exent.com/free/frg/products/666550/boxshot.jpg" 
```

我只想获得第一个图像链接（在“小”这个词之后）并忽略所有其余的（“boxshot”这个词和它之后的链接）。

我怎样才能做到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:11:35.557

使用它并喜欢我的答案。`string`是你上面的整个字符串

```
substr(string,0,stripos(string,"boxshot")-1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:16:03.607

```
$string = "small:
http://img.exent.com/free/frg/products/666550/player_boxshot.jpg
boxshot:
http://img.exent.com/free/frg/products/666550/boxshot.jpg";

preg_match_all('~http(.*?)jpg~i',trim($string),$matches);
var_dump($matches[0][0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T09:16:01.287

简单的方法：

```
<?php
    $str='small: http://img.exent.com/free/frg/products/666550/player_boxshot.jpg boxshot: http://img.exent.com/free/frg/products/666550/boxshot.jpg';
    $parts=explode('boxshot:',$str);
    $small=$parts[0];
    echo($small);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T09:31:39.307

试试这个：

```
$string = "small:
http://img.exent.com/free/frg/products/666550/player_boxshot.jpg
boxshot:
http://img.exent.com/free/frg/products/666550/boxshot.jpg";

// replace all 2 or more consecutive spaces with 1 space
$string = preg_replace( '/\s\s+/i', ' ', $string);
$array = explode( ' ', $string);
echo $array[1]; 
```

希望这可以帮助。

# vbscript - Internet Explorer 自动化忙 v/s readystate 属性

> ID：10071048
> 
> 赞同：3
> 
> 时间：2012-04-09T09:02:26.207
> 
> 标签：vbscript, browser-automation

我是 vbscript 的新手，在阅读时我发现了一些代码

```
Do While ie.busy
stateString = stateString & " " & cstr(ie.readystate)
loop
do while ie.readystate <> 4
stateString = stateString & " " & ie.readystate
loop 
```

所以任何人都可以让我知道忙碌`property`和`readystate`财产之间的区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T09:16:39.767

从[这里](http://www.tech-archive.net/Archive/Scripting/microsoft.public.scripting.vbscript/2006-01/msg00863.html)：

迈克尔哈里斯（MVP）写道：

```
 [...]
        do until ie.readyState = 4 : wscript.sleep 10 : loop
        [...]

    Is there a reason to use
      do until ie.readyState = 4 : wscript.sleep 10 : loop
    instead of
      While ie.Busy : WScript.Sleep 10: Wend
    [...] 
```

仅根据过去在许多不同 IE 自动化场景中的经验，我观察到 IE.Busy 在确定文档的完全加载状态时并非 100% 可靠。在 .ReadyState 最终到达 4（完成）之前，在某些情况下，似乎 .Busy 会振荡 true/false/true/...。

这种振荡行为*可能*是当前版本中修复的错误，但在我看来，忙碌的描述比以前更好（至少我记得很多年前读过它）。它简单地说明 IE 正忙于导航或下载，并且没有明确说明与文档本身在构建 DOM 和页面实际呈现在浏览器 UI 中时所经历的各种状态的任何联系。

使用 .ReadyState 而不是 .Busy 避免的问题是在尝试访问/操作不完整 DOM 的脚本中引发的错误。

# jsf-2 - JSF 2\. 如何在继续导航之前强制关闭弹出窗口？

> ID：10071053
> 
> 赞同：0
> 
> 时间：2012-04-09T09:02:58.377
> 
> 标签：jsf-2, popup

我有这段代码用于渲染弹出窗口，使用 f:ajax：

```
 <h:commandButton id ="botonAcceso"
                                    value="#{msg['login.enter']}"
                                    styleClass="botonPeque"
                                    action="#{usuarioAuditoriaLogBean.entraAplicacion}">

                        <f:ajax disabled="true"
                                render=":login:errorAcceso"/>
                    </h:commandButton>

                    <h:panelGroup rendered="#{usuarioAuditoriaLogBean.popup}" id="errorAcceso">
                        <ui:fragment>
                            <script>window.open('#{usuarioAuditoriaLogBean.url}');</script>
                        </ui:fragment>
                    </h:panelGroup> 
```

如果记录过程失败，我希望尝试登录的人必须首先关闭弹出窗口，然后再尝试登录。我怎样才能做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:24:18.367

INMO 你不应该在这种情况下使用 widnow.open ......因为在它被打开后你无法控制它，而是

1）您可以使用第三方 JSF 组件库，例如 Primefaces，他们有[Modal Dialog](http://www.primefaces.org/showcase/ui/dialog.jsf)

2）你可以使用 jQuery Modal Dialog ，[这里是一个例子](https://stackoverflow.com/a/9439565/617373)

# iphone - 根据 UITextView 的内容，tableview 单元格的高度

> ID：10071054
> 
> 赞同：1
> 
> 时间：2012-04-09T09:03:05.200
> 
> 标签：iphone, ios5, xcode4.2

我想根据单元格中文本视图的内容动态增加表格视图单元格的高度。在这里，我创建了 textview 并将该 textview 添加到单元格中作为子视图。所以根据 textview 的内容，tableview 单元格的高度是固定的。任何人都知道如何做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T09:14:55.270

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        int rowHeight =0.0f;

         NSString *temp = @"bqDHJIGQ BQWFVHWEF Q dsbkn  w jwh ndbvdhqd bdhjqdv dqvhdqvb dbqvwvhdqwwd bqwdhjvqwdhjvqwd bqdwjhqwdvbqwd q dbdqwqbvqwdvdw qwdhqwdvbqw dbqvwdjqwd dwbvvqjwd nqdjqvdjqw dwnqwdjvqhdq nwwdjqwvdhjqwd  qwdhjvhvbjd n qhjdvqdw dbqw wbdww.";

        CGSize size = [temp   sizeWithFont:[UIFont systemFontOfSize:13.0f] constrainedToSize:CGSizeMake(300, 5000) lineBreakMode:UILineBreakModeWordWrap];// calculate the height 

                 rowHeight = size.height+10; // i use 10.0f pixel extra because depend on font

       return rowHeight;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:55:45.863

```
-(CGFloat) tableView: (UITableView *) tableView heightForRowAtIndexPath: (NSIndexPath *) indexPath{

    CGSize labelSize = CGSizeMake(200.0, 20.0);
    NSString *strTemp = @"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.";
    if ([strTemp length] > 0)
        labelSize = [strTemp sizeWithFont: [UIFont boldSystemFontOfSize: 14.0] constrainedToSize: CGSizeMake(labelSize.width, 1000) lineBreakMode: UILineBreakModeWordWrap];
    return (labelSize.height + 10);

} 
```

# java - Tomcat 启动时间过长

> ID：10071056
> 
> 赞同：8
> 
> 时间：2012-04-09T09:03:22.773
> 
> 标签：java, tomcat, webserver

我目前使用 tomcat 6 作为我的 Web 服务器。
我有一个非常小的应用程序，在服务器上部署应该不需要很长时间，但是我的 tomcat 启动时间太长。

它花费了大部分时间在后续步骤中。

信息：启动 Servlet 引擎：Apache Tomcat/6.0.16

我不知道为什么要花很多时间。停止服务器也是如此。我几乎尝试了我所知道的一切。我还尝试从工作区中删除服务器并从头开始。我不知道是什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T09:14:43.367

您可以找出哪个库消耗了时间。当服务器以调试模式启动时，暂停其线程数次并检查堆栈跟踪。可能有一些库填充它的 Spring 应用程序上下文，编织建议的对象，初始化文件存储，等等。如果是这样，您将从堆栈跟踪中看到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:25:45.113

您是否删除了所有随 tomcat 安装的默认 Web 应用程序？即使您的 webapp 很小，也可能有其他应用程序需要一些时间来安装。您可以从名为 catalina___.log 文件的服务器日志文件中检查这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-17T14:09:35.557

我知道这篇文章很旧，即使我想分享几个检查点，因为这些与tomcat版本无关......

我遇到了同样的问题，我按照以下步骤操作，现在我的服务器在 130 毫秒内启动。

1.  如果您使用的是任何 IDE，请首先验证控制台，您可以在那里找到每个应用程序的时间（以毫秒为单位）。所以你会知道哪个需要很长时间。
2.  为确保您的发现是正确的，只需从“webapps”文件夹中删除该应用程序并再次启动 tomcat。
3.  删除您不需要的默认应用程序。通常我们只使用 tomcat 管理器，所以只保留管理器应用程序并从“webapps”文件夹中删除其他应用程序
4.  确保“临时”文件夹为空
5.  清理旧的日志文件。并且不要将您的应用程序日志文件写入服务器文件夹。
6.  先启动服务器，然后再部署文件。这样您就不会面临超时错误。

这就是我尝试过的任何成功。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-15T02:49:36.260

这可能是由于缺乏 Tomcat 所需的随机熵。

[由于 SecureRandom，](https://stackoverflow.com/questions/28201794/slow-startup-on-tomcat-7-0-57-because-of-securerandom)请参阅[https://cwiki.apache.org/confluence/display/TOMCAT/HowTo+FasterStartUp#HowToFasterStartUp-EntropySource](https://cwiki.apache.org/confluence/display/TOMCAT/HowTo+FasterStartUp#HowToFasterStartUp-EntropySource) 和 Tomcat 7.0.57 上的缓慢启动

（编辑：第一个链接更新）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-28T13:36:48.873

我猜您已将所有库 (JAR) 放在 WEB-INF/lib 文件夹中。而是将它们移动到单独的目录并使用 catalina.properties 中的 shared.loader 引用目录或 JAR

# java - 将 JNI 库添加到本地 Maven 存储库

> ID：10071058
> 
> 赞同：20
> 
> 时间：2012-04-09T09:03:46.130
> 
> 标签：java, maven, java-native-interface, maven-nar-plugin

我希望使用 Maven 将 JNI 库，包括其共享对象 (.so) 文件添加到我的项目中。不幸的是，它还没有在公共存储库上，所以我想我必须自己在本地存储库上安装它才能让它工作。

我如何着手将 Maven 中的本机部分包含在我的项目中（并最终使用 copy-dependencies 插件导出）。这是一个标准的 J2SE 应用程序（不是一个 Web 应用程序），带有包装 .jar？

我要添加的库是[junixsocket](http://code.google.com/p/junixsocket/)，以防万一它有助于了解。它有一个 .so（本机库）组件和 Java .jar 组件。

我遇到了[maven-nar-plugin](http://duns.github.com/maven-nar-plugin/index.html)，它似乎针对原生构建，但似乎更倾向于从代码构建 JNI 项目，而不是捆绑第 3 方 JNI 库，我无法将拼图拼凑在一起.

我该怎么做：

1.  将这些安装在我的本地存储库中，具有 .jar 取决于 .so 库。
2.  在 POM 文件中包含依赖项（在 .jar 和 .so 上）。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T21:10:52.690

我的做法：

使用特定于平台的分类器将`.so`文件放入存储库，如下所示：`sqlite3-3.7.9-linux-x86_64.so`. 为所有必需的平台添加`.so`依赖项：

```
<dependency>
    <groupId>de.ch-werner</groupId>
    <artifactId>sqlite-jdbc</artifactId>
    <version>3.7.9</version>
    <type>so</type>
    <classifier>linux-x86_64</classifier>
</dependency> 
```

使用此 maven 程序集插件配置将所有本机库放入`lib/native`您的 dist 目录：

```
<dependencySet>
    <outputDirectory>lib/native</outputDirectory>
    <outputFileNameMapping>${artifact.artifactId}${dashClassifier?}.${artifact.extension}</outputFileNameMapping>
    <unpack>false</unpack>
    <useProjectArtifact>false</useProjectArtifact>
    <useStrictFiltering>false</useStrictFiltering>
    <includes>
        <include>*:*:dll:*</include>
        <include>*:*:so:*</include>
        <include>*:*:jnilib:*</include>
    </includes>
</dependencySet> 
```

使用[此类](https://github.com/alx3apps/ctz-utils/blob/master/src/main/java/ru/concerteza/util/jni/CtzJniUtils.java)在应用程序启动时加载库（计划将分类器命名更改为[GNU 三元组](http://wiki.debian.org/Multiarch/Tuples)）：

```
CtzJniUtils.loadJniLibsFromStandardPath(Launcher.class, "sqlite3") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T09:46:22.937

我在 jar 中包含 .so 并在加载它之前额外添加特定于平台的共享库。这样它就像任何其他 jar 一样被部署。

完成此操作的项目示例，不同平台的多个 .so 是 [https://github.com/peter-lawrey/Java-Thread-Affinity](https://github.com/peter-lawrey/Java-Thread-Affinity)

要查看的主要类是[https://github.com/peter-lawrey/Java-Thread-Affinity/blob/master/src/main/java/com/higherfrequencytrading/affinity/impl/NativeAffinity.java](https://github.com/peter-lawrey/Java-Thread-Affinity/blob/master/src/main/java/com/higherfrequencytrading/affinity/impl/NativeAffinity.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T10:55:42.840

作为在运行时解包库的替代方法，您可以将它们作为 jar 存储在 Maven 中，但在构建时解包它们：[http](http://www.buildanddeploy.com/node/17) ://www.buildanddeploy.com/node/17 。

只要您遵循它们的命名约定，maven-nativedependencies-plugin 插件就会自动为您执行此操作[。](http://code.google.com/p/mavennatives/)

# python - Python，简单的错误处理模式

> ID：10071059
> 
> 赞同：2
> 
> 时间：2012-04-09T09:03:46.700
> 
> 标签：python, exception

我对 Python 很陌生。我想知道如何在不使用异常的情况下实现简单的错误处理，有时（我认为）是矫枉过正的。我想出了一个模式，但我不确定它是否是 pythonic 方式：

```
def someFunct(someArgs):
    # do stuff...
    if error:
        return False, 'error message'
    return True,None 
```

来电者会做这样的事情

```
success,errMsg = someFunct(myAwesomeArgs)
if success:
    # yey!
else:
    # handle error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T09:07:44.863

Just use exceptions - it's the standard python way: [http://docs.python.org/tutorial/errors.html](http://docs.python.org/tutorial/errors.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T09:11:15.523

在 python 中使用异常并不是一种过度杀伤力。python 中的异常在多个地方用于控制应用程序的流程，例如，让您使用您的模式使用以下方法进行成像：

```
def some_function(*args):
    """Do stuff using a loop."""

    for i in [1, 2, 3, 4]:
        print i

    return True, None 
```

在那里，已经有一个异常，即[StopIteration 异常](http://docs.python.org/tutorial/classes.html#iterators)，也就是说，即使您试图避免使用异常，它也是在内部使用的。所以我的回答是，使用异常，这不是 Java、C# 等。与其他代码相比，异常非常昂贵，而且你只是让你的代码不符合 Python 标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T09:09:32.093

You would do just like you did. :) But yeah, handing errors via exception is not exceptional, it is quite common in python, so idiomatically you would want to use exception. But here is your code (bit changed)

```
def somefunc(*args):

    # do stuff, return -1 on eror
    error_value = do_suff()
    if error_value == -1:
          return True, "error message"
    else:
          return False, None

success, err = somefunc(1,2)

if success:
   # yay!
else:
   # handle error 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T09:14:12.390

```
def someFunct(someArgs):
    try:
    # do stuff...
    return True,None
    except:
        return False, 'error message' 
```

如果您知道可能会引发什么错误，您可以使用：

```
 except errorType1:
        return False, 'very bad'
    except errorType2:
        return False, 'very very bad'
    except errorType3:
        return False, 'the computer is dead. get a new one' 
```

等等。

# java - 使用 KSOAP2 API 获取 XmlPullParserException 以使用 SOAP 服务

> ID：10071060
> 
> 赞同：1
> 
> 时间：2012-04-09T09:03:50.893
> 
> 标签：java, android, ksoap2

我正在尝试使用下面的 java 代码访问 SOAP 服务，我想在我的 Android 应用程序中使用该代码，但得到`XmlPullParserException`.

```
org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <{http://www.w3.org/2003/05/soap-envelope}SOAP-ENV:Envelope>@1:114 in java.io.InputStreamReader@4a65e0) 
```

我检查了所有与 XmlPullParserException 相关的标签，没有运气。请帮我纠正我的代码。

```
 import java.io.IOException;

        import org.ksoap2.SoapEnvelope;
        import org.ksoap2.SoapFault;
        import org.ksoap2.serialization.SoapObject;
        import org.ksoap2.serialization.SoapPrimitive;
        import org.ksoap2.serialization.SoapSerializationEnvelope;
        import org.ksoap2.transport.HttpTransportSE;
        import org.xmlpull.v1.XmlPullParserException;

            public class SoapClientClass {

                private static String SOAP_ACTION = "/Process Definition";       
                private static String METHOD_NAME = "EmployeeDetailsOperation";       
                private static String NAMESPACE = "http://InputMessageNamespace";       
                private static String URL ="http://10.213.45.05:5026/EmployeeService";    

                public static void main(String[] args)
                {
                    webserviceCall();    
                }

                private static void webserviceCall() {
                    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
                    // Pass parameters as Key value pair to URL 
                    request.addProperty("EmployeeId", "121"); 

                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                    envelope.setOutputSoapObject(request);
                    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                    try {
                        androidHttpTransport.call(SOAP_ACTION, envelope);
                    } catch (IOException e) {
                        System.out.println("IOException");          
                        e.printStackTrace();
                    } catch (XmlPullParserException e) {
                        System.out.println("XmlPullParserException");
                        e.printStackTrace();
                    }
                    SoapPrimitive result = null;
                    try {
                        result = (SoapPrimitive)envelope.getResponse();
                    } catch (SoapFault e) {
                        System.out.println("SoapFault");
                        e.printStackTrace();
                    }

                    //to get the data         
                    String resultData = result.toString();
                    System.out.println("Result as String: \n"+resultData);

                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T13:16:19.863

我遇到了同样的问题，它与 SoapEnvelope 版本有关。

在这行代码中，当我将其更改为 VER11（您已经在使用）时，我使用的是 VER12，它起作用了

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 
```

也许您可以测试其他版本，从 VER10 到 VER12 共有三个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:11:25.557

根据以下代码行编辑您的代码...

```
private static String SOAP_ACTION = "http://InputMessageNamespace/Process Definition";       
                private static String METHOD_NAME = "EmployeeDetailsOperation";       
                private static String NAMESPACE = "http://InputMessageNamespace"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T21:51:26.793

尝试在 URL 字符串的末尾添加“/”：

```
private static String URL ="http://10.213.45.05:5026/EmployeeService/"; 
```

而不是 SOAP_ACTION 使用 NAMESPACE + METHOD_NAME

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-11T05:10:24.220

我遇到了类似的问题，我想这个问题是因为我们用来连接网站的 URL。[所以我通过像这样http://www.example.com/index.php/api/v2_soap/?wsdl/](http://www.example.com/index.php/api/v2_soap/?wsdl/)更改我的网站 URL 解决了这个问题 。

例子：

HttpTransportSE androidHttpTransport = new HttpTransportSE( [http://www.example.com.com/index.php/api/v2_soap/?wsdl/](http://www.example.com.com/index.php/api/v2_soap/?wsdl/) , 900000000); androidHttpTransport.call(" ", env);

# linux - 使用 shell 脚本检查文件中的给定字符串

> ID：10071062
> 
> 赞同：-1
> 
> 时间：2012-04-09T09:03:58.767
> 
> 标签：linux, bash, shell

无论大小写如何，我都想检查文件中的字符串。

斯汀是：

```
env=electron 
```

如果文件 shell.txt 包含任何形式的给定字符串，无论大小写如何，这都必须显示匹配

示例 **shell.txt**

```
Electron 
electron
ELECTRON
ElEcTRon   /* upper lower combination in any order have to chow matching */ 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T09:06:25.307

```
grep -i "electron" shell.txt 
```

-i 用于忽略大小写..

# c# - LINQ to Entities 无法识别“System.String ToString()”方法，并且该方法无法转换为存储表达式

> ID：10071064
> 
> 赞同：1
> 
> 时间：2012-04-09T09:04:02.227
> 
> 标签：c#, asp.net, linq

当我尝试运行以下代码时。

```
var result = from c in db.brand
             where c.title.contains("test")
             select c.title + "-" +c.brand;

List<string> lst = r.ToList(); 
```

它给出了以下错误。

> LINQ to Entities 无法识别方法“System.String ToString()”方法，并且该方法无法转换为存储表达式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T09:07:23.713

我建议以匿名类型获取标题和品牌，然后在进程中执行字符串连接：

```
var list = db.Brand.Where(c => c.Title.Contains("test"))
                   .Select(c => new { c.Title, c.Brand })
                   .AsEnumerable() // Rest of the query in-process
                   .Select(x => x.Title + " " + x.Brand)
                   .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:07:55.243

try this:

```
var result = from c in db.brand where c.title.contains("test") select c;
var finalResult = result.ToList().Select(ss=> ss.title + "-" + ss.brand); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-09T09:08:55.557

try:

```
var result = from c in db.brand where c.title.contains("test") select new { c.title + "-" +c.brand } 
```

# java - 获取类的所有实例

> ID：10071065
> 
> 赞同：25
> 
> 时间：2012-04-09T09:04:04.000
> 
> 标签：java, class, instance

> **可能重复：**
> [是否有一种简单的方法可以在 Java 中获取特定类的所有对象实例](https://stackoverflow.com/questions/1947122/is-there-a-simple-way-of-obtaining-all-object-instances-of-a-specific-class-in-j)

在java中，有没有可能获取某个类的所有实例的方法？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-09T09:06:35.310

您可以在实例化类（[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)）时使用工厂静态初始化程序，然后将工厂构造函数中生成的每个实例添加到 List ...

像这样的东西：

```
 class MyObject {
    private static List instances = new ArrayList();

    public static MyObject createMyObject() {
    MyObject o = new MyObject();
    instances.add(new java.lang.ref.WeakReference(o));
    return o;
    }

    public static List getInstances() {
    return instances;
    }

    private MyObject() {
    // Not allowed 
    }
  } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-09T09:06:01.887

一般不会。如果您使用的是调试器 API，它可能是可能的（我没有检查过），但除了调试之外，*您不应该使用它。*

如果您的设计需要这样做，则可能值得重新考虑该设计。

# objective-c - 多任务手势不适用于警报

> ID：10071068
> 
> 赞同：0
> 
> 时间：2012-04-09T09:04:36.807
> 
> 标签：objective-c, ios, uialertview

UIViewAlert 变得可见后，不能使用多任务手势。我该如何解决？这是正常行为吗？

编辑：

看起来创建自定义视图是个好主意。我只是想知道，如果它可以做得很好，很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:19:59.553

当 UIAlertView 出现时，它会冻结整个屏幕。您无法触摸屏幕，这就是您的手势不起作用的原因。首先关闭警报视图，然后您的手势将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:07:49.287

This is normal behaviour, UIAlerts are designed to occupy the whole focus of the device. If you want to allow gestures, try creating your own UIView that overlays on top of your running application.

# java - 聊天 Android 应用程序中的气球

> ID：10071070
> 
> 赞同：5
> 
> 时间：2012-04-09T09:05:03.540
> 
> 标签：java, android, xml, chat, balloon

我必须开发一个允许用户聊天的 android 应用程序我想制作 textView 来处理他们在 Balloon 中的对话，如下图所示，

谁能告诉我我该怎么做？？？？

提前致谢

![在此处输入图像描述](../Images/e43047a670e89d6b02a54cd4e7cc44db.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T09:09:39.533

创建两个气球图像（用于发送和接收的消息），将它们制作为 9 个补丁并将它们设置为包含对话的布局的背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:09:56.377

为此，您将使用 9 个补丁图像。

为了显示它们，您将使用`ListView`每个行项目将包含文本和 9 个补丁聊天气泡背景。

有很多讨论可用：

*   我写了一篇关于[android chat bubbles](http://adilsoomro.blogspot.com/2012/12/android-listview-with-speech-bubble.html)的博文，你也可以在那里找到开源代码。
*   例如这个*stackoverflow* [帖子](https://stackoverflow.com/q/9399612/593709)。
*   [包含查看](http://www.actionshrimp.com/2011/05/speech-bubble-popups-containing-a-view-for-android-mapview/)帖子的语音气泡弹出窗口也将为您提供帮助。

# android - 在 SQLite 数据库上执行查询时出现 android NullPointerException

> ID：10071074
> 
> 赞同：4
> 
> 时间：2012-04-09T09:05:19.600
> 
> 标签：android, sqlite, nullpointerexception

我正在尝试从我创建的数据库中读取数据，但在尝试获取所有记录时总是会收到 NullPointerException。

我实际上从另一个我运行完美的应用程序中复制粘贴了代码，但不知何故我在这里做错了。

NullPointerException 位于

```
return mDb.query(DATABASE_TABLE_LOCALLOGIN, new String[] {LOCALLOGIN_ID, LOCALLOGIN_LOGIN, LOCALLOGIN_PASSWORD}, null, null, null, null, null); 
```

这是相关代码（不要介意字符串数组，它用于稍后添加表：GoingOutDbAdapter.java

```
public class GoingOutDbAdapter {
private static final String DATABASE_NAME = "GoingOutData";
private static final String DATABASE_TABLE_LOCALLOGIN = "LocalLogin";

public static final String LOCALLOGIN_ID = "LocalLogin_id";
public static final String LOCALLOGIN_LOGIN = "Login";
public static final String LOCALLOGIN_PASSWORD = "Password";

private static final String TAG = "Debugstring";

private DatabaseHelper mDbHelper;
private SQLiteDatabase mDb;

private static final String[] DATABASE_CREATE = {
    "CREATE Table " + DATABASE_TABLE_LOCALLOGIN + " ( "
    + LOCALLOGIN_ID + " integer PRIMARY KEY Autoincrement, "
    + LOCALLOGIN_LOGIN + " text NOT NULL, "
    + LOCALLOGIN_PASSWORD + " text NOT NULL );"};

private final Context mCtx;

private static class DatabaseHelper extends SQLiteOpenHelper {
    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
        for(int i = 0; i < DATABASE_CREATE.length; i++){
            Log.d(TAG,DATABASE_CREATE[i]);
            db.execSQL(DATABASE_CREATE[i]);
        }   
    }
}

public GoingOutDbAdapter(Context ctx) {
    this.mCtx = ctx;
}

public GoingOutDbAdapter open() throws SQLException {
    mDbHelper = new DatabaseHelper(mCtx);
    mDb = mDbHelper.getWritableDatabase();
    return this;
}

public void close() {
    mDbHelper.close();
}

public Cursor fetchAllLocalLogins() {
    return mDb.query(DATABASE_TABLE_LOCALLOGIN, new String[] {LOCALLOGIN_ID, LOCALLOGIN_LOGIN, LOCALLOGIN_PASSWORD}, null, null, null, null, null);
}

} 
```

MyActivity.java，我在这里调用 fetchAllLocalLogins

```
public class MyActivity extends Activity {
/** Called when the activity is first created. */   

private GoingOutDbAdapter mDbHelper;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    mDbHelper = new GoingOutDbAdapter(this);

    setContentView(R.layout.main);

Cursor localLogin = mDbHelper.fetchAllLocalLogins();

}
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T09:10:05.447

`open()`在进行查询之前，您可能需要调用该方法：

```
//...
mDbHelper.open(); //whitout this call mdb will be NULL
Cursor localLogin = mDbHelper.fetchAllLocalLogins(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:40:25.190

您应该在执行数据库操作之前打开数据库。mDbHelper.open();

# asp.net - 获得一个电话的部分响应

> ID：10071076
> 
> 赞同：1
> 
> 时间：2012-04-09T09:05:25.383
> 
> 标签：asp.net, ajax, asynchronous

我正在使用 dotnet 3.5 和 AJAX，我想获得对服务器的一次调用的部分响应。

就像我想在一次调用中检索多个配置文件并且不能让系统等待所有配置文件被加载。

同时，所有配置文件都以条带的形式加载到屏幕上，用户应该能够开始使用已经加载的配置文件。

例如
，如果我调用服务器并在结果中返回 10 个配置文件，那么在显示一个屏幕时，我不希望用户等待所有 10 个配置文件加载，他应该能够在第一个配置文件加载后立即开始工作同时在屏幕上加载 0 个配置文件。

是否可以使用Javascript，AJAX。如果是，那怎么办？请帮忙。

提前谢谢^_^

开发者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:18:57.283

这当然可以使用 AJAX。

页面加载方式如下：

*   页面立即加载，配置文件显示区域
*   Ajax 调用请求配置文件
*   服务器使用多个[HttpResonse.Write()](http://msdn.microsoft.com/en-us/library/1463ysyw.aspx)来返回在浏览器上呈现的配置文件（因为它们被浏览器接收）

渲染元素可以通过更新面板甚至一些 jQuery 来实现，以获得更精细的控制。

# iphone - 将按钮图像从按下的第一个按钮移动到按下的第二个按钮

> ID：10071077
> 
> 赞同：0
> 
> 时间：2012-04-09T09:05:30.567
> 
> 标签：iphone, cocoa-touch, ios4, logic

我有 5X5 网格的按钮。如果我按下位置​​ 1 的按钮，然后按下位置 2 的按钮，我希望位置 1 的按钮图像移动到位置 2 的按钮。如下例所示，先按下 A1 按钮，然后按下 B2 按钮。
例子：

![按下 A1 按钮](../Images/78518a737340f4c7cfaa493d61b54fd0.png)

**图：按下 A1 按钮**

![按下 B2 按钮](../Images/69ab99bb50a448ad0baf952f953fa57c.png)

**图：按下 B2 按钮**

所以，整个过程有两个步骤：

```
1\. Prepare to move image when first button pressed
2\. Move the image from first button to second button when the second button is pressed 
```

我为 5X5 网格中显示的 25 个按钮设置了按钮标签。现在我很难找出执行所需操作的逻辑。

这些方法的逻辑是什么：

```
-(void)a1ButtonPressed:(id)sender
{

}

-(void)b2ButtonPressed:(id)sender
{

} 
```

虽然按钮有这些标签：

```
A1.tag = 1;
B2.tag = 7; 
```

任何人都可以帮忙吗？提前致谢.... ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:37:47.127

只需对所有按钮使用一种方法，简单的逻辑就是这样

```
-(void)buttonPressed:(UIButton *)btn {
     if (buttonPressed) {//second press
         [initialBtn setImage:blankImage forControlState:UIControlStateNormal];
         [btn setImage:buttonImage forControlState:UIControlStateNormal];
         buttonPressed=NO;
     } else {//first press
         buttonImage=[btn imageForState:UIControlStateNormal];
         buttonPressed=YES;
         initialBtn=btn;
     } 
```

在您的标题中，您将拥有

```
 BOOL buttonPressed;
 UIImage *buttonImage;
 UIButton *initialBtn; 
```

如果用户按下相同的按钮两次，取消他们的选择，这也将起作用。

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:52:23.823

有很多方法可以实现你的目标...

您可以使用此方法更改按钮图像：

```
[aButton setImage:[UIImage imageNamed:@"anImage"] forState:UIControlStateNormal]; 
```

您可以使用变量管理按钮图像。

然后：

```
-(void)a1ButtonPressed:(id)sender
{
    if (firstButton) {
        // Get image to move from A1
        imageToMove = [A1 imageForState:UIControlStateNormal];
        // Remove image from A1
        [A1 setImage:nil forState:UIControlStateNormal];
        firstButton = NO;
    } else {
        // Put new image to A1
        [A1 setImage:imageToMove forState:UIControlStateNormal];
        firstButton = YES;
    }

}

-(void)b2ButtonPressed:(id)sender
{
    if (firstButton) {
        // Get image to move from B2
        imageToMove = [A1 imageForState:UIControlStateNormal];
        // Remove image from B2
        [B2 setImage:nil forState:UIControlStateNormal];
        firstButton = NO;
    } else {
        // Put new image to B2
        [B2 setImage:imageToMove forState:UIControlStateNormal];
        firstButton = YES;
    }
} 
```

等等...

`fistButton`是一个 BOOL，它控制按下的按钮是第一个还是第二个。 `imageToMove`是在其他地方声明的 UIImage，用于管理要移动的图像。

无论如何，您可以对所有 25 个按钮只使用一种方法：

```
-(void)buttonPressed:(UIButton *)button
{
    if (firstButton) {
        // Get image to move from button
        imageToMove = [button imageForState:UIControlStateNormal];
        // Remove image from button
        [button setImage:nil forState:UIControlStateNormal];
        firstButton = NO;
    } else {
        // Put new image to button
        [button setImage:imageToMove forState:UIControlStateNormal];
        firstButton = YES;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T10:00:39.097

如果要给动画需要做 UIView 动画，也就是核心动画

```
[UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.2];
        //set animation value means the next postion where u want to move object 
        [UIView commitAnimations]; 
```

请喜欢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T10:29:05.037

完成此操作的另一种方法是，在创建按钮时将所有按钮添加到数组中，并为每个按钮设置一个标签。然后存储两个按下按钮的标签。使用上一个按下的标签来读取按钮，使用 [buttonarray objectAtIndex:previous.tag ] 并设置为 nil 并设置为上一个按钮的当前标记集背景图像。

# c - 找到数组中可能的最大和的最佳答案是什么

> ID：10071079
> 
> 赞同：5
> 
> 时间：2012-04-09T09:05:45.850
> 
> 标签：c, arrays, algorithm

问题是 ：

通过以没有两个元素彼此相邻的方式选择元素，找到正整数数组中可能的最大和。

有一个这样的答案：但是这个问题的最佳答案是什么

> 让我们用“t”表示数组并从 0 开始对其进行索引。设 f 是一个函数，使得 f(k)=[0..k] 子数组中具有问题条件的最大和。现在使用动态规划：

```
f(0) = t[0]
f(1) = max{ t[0], t[1] }
f(k) = max{ f(k-2) + t[k], f(k-1) } if k >= 2

If the array has n elements we need f(n-1). 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:10:42.100

好吧，我认为这已经是最好的答案了。
因为您需要 O(n) 才能读取数据。
O(n) 算法在大 O 表示法中是最快的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T18:47:21.933

您提出的解决方案[很好](http://www.glassdoor.com/Interview/Find-the-maximum-sum-possible-in-an-array-of-positive-integers-by-selecting-the-elements-in-such-a-way-that-no-two-elements-QTN_250824.htm)。

类似的方法（[此处](http://comscigate.com/Books/contests/icpc.pdf)为第 7 页）：

设`m[i]`为以元素 结尾的任何子数组的最大和`a[i]`。 那么`m[i]`就是`max(a[i], m[i-1]+a[i])`。

这是`O(n).`

并且您无法在下面得到任何东西，`O(n)`因为您必须至少访问一次数组的每个项目来计算结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T22:37:40.270

```
public static int maxSum(int[] A){
    return maxSum(A,0,1);
}
private static int maxSum(int[] A, int x, int y){
    int c =0, d=0;
    if(x<A.length){
        c = A[x]+maxSum(A,x+2,x+3);
    }
    if(y<A.length){
        d = A[y]+maxSum(A,y+2,y+3);
    }
    return c>d?c:d;
} 
```

# java - java.io.IOException：使用 Tomcat 服务器的密钥库格式无效

> ID：10071081
> 
> 赞同：0
> 
> 时间：2012-04-09T09:05:50.670
> 
> 标签：java, tomcat, ssl, keytool

在 Tomcat 7 中启用 ssl 模式时，我的 tomcat 日志中出现以下错误

我已经使用 openssl 生成了 .key 文件，如下所示

```
openssl genrsa -des3 -out localhost 2048 
```

我在 tomcat server.xml 中给出了我的密钥文件的路径

> 严重：无法初始化与 ProtocolHandler [“http-bio-8443”] java.io.IOException 关联的端点：无效的密钥库格式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:19:37.377

`openssl genrsa -des3 -out localhost 2048`生成一个私钥。使用 HTTPS 运行 Web 服务器所需的是私钥和证书。您需要一个步骤来生成证书。

您可以使用 2 种几乎完全不同的方法在 Tomcat 中配置 HTTPS，具体取决于您是否使用 APR 连接器。

如果您使用的是[APR 连接器](http://tomcat.apache.org/tomcat-7.0-doc/apr.html#HTTP/HTTPS)，那么使用 OpenSSL 生成密钥/证书是有意义的，因为它是它所期望的格式。（如果自签名证书足以满足您的环境，则有许多教程可以使用 OpenSSL 生成自签名证书。）

[如果您不使用 APR](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)，则必须将使用 OpenSSL 生成的密钥/证书转换为 JRE 支持的密钥库格式。来自 OpenSSL，将您的私钥 + 证书转换为 PKCS#12 存储 ( `.p12`) 通常是最简单的：这通过 Oracle/OpenJDK 直接支持`PKCS12`密钥库类型。（您可以将 PKCS#12 文件转换为 JKS 存储，但这不是必需的。）

但是，如果您还没有任何密钥/证书，那么为 Tomcat 生成自签名证书的最简单方法是`keytool`直接使用。这将生成一个`JKS`密钥库，这是默认类型。[`keytool -genkey`](https://community.jboss.org/wiki/GeneratingSelfSignedCertificateWithKeytool)不仅生成一个密钥/对并且足以生成一个 CSR，而且它关联一个自签名证书（至少暂时，直到您导入来自 CA 的证书，如果需要）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-09T09:37:39.983

基于 Java 的系统，包括 tomcat，需要以 PKCS 格式存储。因此，首先您需要正确构建您的商店，然后按照 tomcat 指南配置 tomcat 以使用它们。您的商店格式和配置似乎不正确。

# r - R：在多个变量上调用 table()

> ID：10071083
> 
> 赞同：1
> 
> 时间：2012-04-09T09:06:03.143
> 
> 标签：r

我必须`table()`在 R 中调用 10 个变量的函数。有什么方法可以一次性完成，而不像`table(v1)`, `table(v2)`...那样单独调用它们`table(v10)`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T09:13:09.490

如果您的变量在 data.frame 中排列为列，您可以使用`lapply`：

```
df <- data.frame(aa = rpois(10, 4), bb = rpois(10, 3), c = rpois(10, 7))

tabList <- lapply(df, table) 
```

然后你会得到一个包含各种表格的列表：

```
> tabList
$aa

1 3 4 5 6 7 
2 3 2 1 1 1 

$bb

1 2 3 4 5 
1 2 4 1 2 

$c

 3  4  5  6  7  9 11 12 
 1  1  1  3  1  1  1  1 
```

**编辑：**

对于跨多个 data.frames 的变量，您可以尝试将它们放入列表中，然后`lapply`再次使用：

```
df2 <- df[sample(rownames(df), 15, replace = TRUE), ]

df3 <- df[sample(rownames(df), 20, replace = TRUE), ]

dfList <- list(df = df, df2 = df2, df3 = df3)

lapply(dfList, function(x) lapply(x, FUN = table)) 
```

# android - 为什么需要 NotificationCompat？

> ID：10071086
> 
> 赞同：8
> 
> 时间：2012-04-09T09:06:20.273
> 
> 标签：android, notifications, compatibility

具体来说，我认为使用 NotificationCompat 完成的任何事情都可以使用默认 API（级别 8）来完成。我在这里想念什么？NotificationCompat 引入了哪些使用 2.2 API 无法完成的功能？

来源：http: [//developer.android.com/sdk/compatibility-library.html#Notes](http://developer.android.com/sdk/compatibility-library.html#Notes)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-22T21:07:29.200

您可以使用 NotificationCompat.Builder#setLargeIcon(Bitmap) 之类的东西，让您充分利用 Android 3.0+ 的大图标等功能，同时保持与不支持此类功能的 3.0 之前的 Android 版本的兼容性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-25T10:41:22.693

尽管它是老问题，但现在 NotificationCompat 也可用于创建可穿戴设备的特定通知。有关此 google 开发人员指南的更多信息。

[http://developer.android.com/training/wearables/notifications/creating.html](http://developer.android.com/training/wearables/notifications/creating.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:12:23.027

它允许您使用 NotificationCompat.Builder 类，这是 API 11+ 中 Notification.Builder 的兼容版本。顾名思义，它是构建器模式的实现，这似乎是它相对于 Android 3.0 之前的通知的主要优势。

# dataset - 二进制 SVM 分类器失败，有两个类：一个是大的，另一个是小的

> ID：10071098
> 
> 赞同：0
> 
> 时间：2012-04-09T09:07:03.293
> 
> 标签：dataset, pixel, classification, svm

我正在尝试使用二进制支持向量机对一些像素进行分类。我的训练数据库由 28 个数据文件组成，有两个类，class1 的像素数为 16571，class2 的像素数为 313。

测试数据（每个文件）大约有 600 个像素，其中只有 6-10 个像素属于 2 类，其余像素属于 1 类。

我的问题是，在训练之后，当我尝试对数据进行分类时，SVM 会对 class1 中的所有像素进行分类。

我认为这可能是因为它从 class2 中看到的样本很少。但可用数据文件的数量有限（大约 35 个数据文件）。

如何训练 svm 并获得合理的结果？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:09:38.597

SVM 可能确实对训练集大小的巨大差异很敏感。我建议尝试以下两种方法：

1.  通过抽样限制第 1 类的训练集，使其大小与第 2 类的大小差不多，并检查是否有任何改进（可能适合第 2 类大小的 1X 到 10X 之间的大小）。

2.  使用SVM 的'cost' 参数（例如，在[SVMLight](http://svmlight.joachims.org/)中使用'J' 参数），它可以帮助平衡类。

您当然可以同时使用这两种方法，即在一定程度上限制类 1 的训练数据的大小，然后使用成本参数进一步平衡类。

# c# - Web服务中的文本字段

> ID：10071102
> 
> 赞同：-1
> 
> 时间：2012-04-09T09:07:18.273
> 
> 标签：c#, asp.net, web-services, textbox

我已经用 c# 在 asp.net 中创建了 Web 服务。现在我想传递一些查询，我想通过用户提供一些输入。我创建了带有选择和插入查询的方法。但是我可以通过一些文本框输入吗？

“ 我想为某个日期选择员工姓名，日期将是文本框的值。提前致谢

当我运行此网络服务时，它向我显示了此方法。但是当我尝试调用此方法时，显示错误“网站无法显示该页面”我已使用此代码：

```
 [WebMethod]
    public string GetEmps()
    {
        string s1 = txtMonth.Text;
        string getdays = "Select Emp from WorkingDaysinfo Where date = 's1'";
        con = new MySqlConnection(conString);
        con.Open();
        MySqlCommand cmd = new MySqlCommand(getdays, con);
        MySqlDataAdapter da = new MySqlDataAdapter(cmd);
        DataTable dt = new DataTable();
        da.Fill(dt);
        con.Close();

        string jsonString = JsonConvert.SerializeObject(dt);
        String finalString = "{\"EMP count\":";
        finalString += jsonString;
        finalString += "}";
        return finalString;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:26:20.583

很可能，您的 Web 服务代码正在引发异常，因此浏览器会显示一般错误消息。您可以通过在 Web 服务代码中放置断点或放置 try-catch 块来记录异常来查找异常详细信息。

根据您的代码和要求，最可能的问题似乎是您可能正在将文本字符串传递给日期列。Web 服务方法可以使用方法参数接受一些输入（您不能将表单中的控件用于 Web 服务），并且可以使用参数将其传递给数据库。例如，

```
[WebMethod]
public string GetEmps(DateTime inputDate)
{
    // create a parameterized query
    string getdays = "Select Emp from WorkingDaysinfo Where date = @inputDate";

    con = new MySqlConnection(conString);
    con.Open();
    MySqlCommand cmd = new MySqlCommand(getdays, con);
    // pass the parameter value 
    cmd.Parameters.Add(new SqlParameter("inputDate", inputDate);

    // rest of the code follows
    .. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:39:23.707

请在网站应用程序中添加 Web 服务引用，并尝试从它们本身传递参数。

# java - WebDriver 从元素块中获取元素

> ID：10071104
> 
> 赞同：1
> 
> 时间：2012-04-09T09:07:21.240
> 
> 标签：java, webdriver, selenium-webdriver

> 我试图从元素列表中获取子元素，而不是为列表中的每个项目返回子元素值 - >它只返回第一项。

```
List<WebElement> allAccoElements = driver.findElements(By.xpath("//ul[@id='ListerContainer']//li[@class='lister-item']//div[@class='lister-item-content']")); 
// Found 10 items

for (WebElement element: allAccoElements){
System.out.println(element.findElement(By.xpath("//img[@class='image-base']")).getAttribute("id")); 
//For loop will print "id" of first element 10 times, why I can't to get access to other Elements in list?
}

Print always return id of first element in list, can anyone suggest me, how I can find child element of each element in list? 
```

> 相反，如果我使用以下代码（如解决方法），一切正常。

```
List<WebElement> allAccoElements = driver.findElements(By.xpath("//ul[@id='ListerContainer']//li[@class='lister-item']//div[@class='lister-item-content']//img[@class='image-base']")); 
// Found 10 items:

for (WebElement element: allAccoElements){
System.out.println(element.getAttribute("id")); 
//Print 10 times with different id
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:20:26.700

感谢 p0deje，我们找到了答案：

要在 other 中找到相应的项目，我们必须解决它（通过在 xpath 中的“//”之前添加点“.”）。

# java - 将端口重新绑定到不同 IP 上的数据报套接字

> ID：10071107
> 
> 赞同：6
> 
> 时间：2012-04-09T09:07:27.740
> 
> 标签：java, network-programming

在我的应用程序中，我创建了一个 datagarm 套接字并将端口 9999 绑定到 ip 192.168.173.1 现在我想将端口绑定到一个新的 ip 说 192.168.173.2 但我无法做到我遵循的步骤

```
1 DatagramSocket s= new DatagramSocket(port,ip1);
2 s.disconnect();

s.close();

s= new DatagramSocket(port,ip2); 
```

但这给出了一个

```
java,net,BindException :Address already in use : Cannot bind 
```

任何见解都会非常有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T09:55:48.347

为避免在尝试解除绑定和重新绑定时出现异常，您可以将每个创建的套接字设置为可重用。为此，您必须创建一个**未绑定**的套接字：

```
DatagramSocket s = new DatagramSocket(null);
s.setReuseAddress(true);
s.bind(someSocketAddress); 
```

更多信息： [http](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setReuseAddress(boolean) ://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setReuseAddress(boolean )

PS 在使用 TCP 的这种情况下，作为 BindException 主要原因的超时时间可能不适用于 UDP 套接字，但 SO_REUSE 应该允许您立即重新绑定。 [http://docs.oracle.com/javase/7/docs/api/java/net/DatagramSocket.html#setReuseAddress(boolean](http://docs.oracle.com/javase/7/docs/api/java/net/DatagramSocket.html#setReuseAddress(boolean) )

这里有一些例子：

```
final int port = 55880; 
```

A) 不重用，不关闭 = 地址已在使用中

```
DatagramSocket s = new DatagramSocket(null);
s.bind(new InetSocketAddress("127.0.0.1", port));

s = new DatagramSocket(null);
s.setReuseAddress(true);
s.bind(new InetSocketAddress("localhost", port)); 
```

B) 重用，不关闭 = 无投诉

```
DatagramSocket s = new DatagramSocket(null);
s.setReuseAddress(true);
s.bind(new InetSocketAddress("127.0.0.1", port));

s = new DatagramSocket(null);
s.setReuseAddress(true);
s.bind(new InetSocketAddress("localhost", port)); 
```

C) 不重用，关闭 = 无投诉（仅适用于数据报套接字）

```
DatagramSocket s = new DatagramSocket(null);
s.bind(new InetSocketAddress("127.0.0.1", port));
s.close();

s = new DatagramSocket(null);
s.bind(new InetSocketAddress("localhost", port));
s.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-08T14:43:27.740

非常重要 - 也许有些用户错过了：

```
DatagramSocket s = new DatagramSocket(); 
```

**不工作**

上面示例中的正确行可以正常工作：

```
DatagramSocket s = new DatagramSocket(null); 
```

# session - WebBrowser 控制会话共享？

> ID：10071108
> 
> 赞同：4
> 
> 时间：2012-04-09T09:07:28.120
> 
> 标签：session, cookies, webbrowser-control

我在桌面 Windows 应用程序中托管 IE 的 WebBrowser 控件 (CLSID_WebBrowser)。此 WB 似乎独立于机器的 Internet Explorer（IE9、Win7）存储其会话 cookie。

我想依靠这种行为，但找不到任何证据。有人看过有关会话共享的任何文档吗？以前的IE版本是这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T07:42:30.487

好吧，看来我们不能做出这样的假设，也不能在生产代码中依赖它。

我尝试了不同的设置，结果如下：

1.  WinXP, IE6: 会话是共享的
2.  WinXP, IE7: 会话是共享的
3.  WinXP、IE8：会话是共享的（启用和禁用 LCIE）
4.  Win7、IE9、LCIE 禁用：会话已共享
5.  Win7、IE9、LCIE 启用：会话不共享。

我能找到的最接近的信息是在对[这个问题](https://stackoverflow.com/a/2403342/419450)的回复中，但这似乎是不正确的。

# linux - net_device get_stats 函数，怎么用？

> ID：10071109
> 
> 赞同：1
> 
> 时间：2012-04-09T09:07:36.217
> 
> 标签：linux, linux-kernel, linux-device-driver, kernel-module

这是函数的样子：

```
 struct net_device_stats* (*get_stats)(struct net_device *dev); 
```

我只需要在我的代码中调用这个函数并在`net_device_stats`我之前声明的结构中获取它的结果。任何人都可以为此提供一个简单的实现代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T09:10:31.883

这**不是**一个函数。**它是一个函数指针** 的声明，`get_stats`它指向一个函数，该函数接收一个指向结构`net_device`的指针并返回一个指向类型结构的指针`net_device_stats`

这是一个用例

```
struct net_device *dev;
struct net_device_stats *device;

device = get_stats(dev); 
```

**编辑**从您的评论中，我看到您使用的是旧版本的内核。在[后来的 kernels](http://lxr.free-electrons.com/source/include/linux/netdevice.h?v=2.6.35)中，结构`net_device`仍然存在，`linux/netdevice.h`但没有`get_stats`函数指针。它变成了`ndo_get_stats`，现在处于另一个结构下`net_device_ops`

所以开始使用这些新的函数指针。

# android - Random set of columns from a database

> ID：10071119
> 
> 赞同：0
> 
> 时间：2012-04-09T09:08:34.880
> 
> 标签：android, database

So far i have managed to display the contents of a row(4 columns) in specific textviews. But i want to display them in random. I use this

```
String answer1 = cur.getString(cur.getColumnIndex("ANSWER1")); 
```

and on click the content change but always the data on column ANSWER1 shows in the first textview. What can i do to random display the 4 columns to the 4 textviews? E.g column 1 to textview 3, column 2 to textview 1 etc.I want everytime different data on textview 1.
----Edit----
Lets say i have one more column that idicates the number of the column the correct answer is.E.g if the correct answer is in the column "Answer3" the data in the column "CorrAnswer" is 3\. I change the textviews above to buttons. Each button sends an integer. How can i check the correct answer when the texts on the buttons are shuffled?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:47:02.810

我会将您的所有答案添加到 ArrayList，然后使用 Random 删除随机答案。以下 Java（控制台）代码显示了您可以如何执行此操作：

```
 ArrayList<String> lstAnswers = new ArrayList<String>();
    lstAnswers.add("Answer 1");
    lstAnswers.add("Answer 2");
    lstAnswers.add("Answer 3");
    lstAnswers.add("Answer 4");

    Random random = new Random();

    while (lstAnswers.size() > 0) {
        int index = random.nextInt(lstAnswers.size());
        String randomAnswer = lstAnswers.remove(index);
        System.out.println(randomAnswer);
    } 
```

根据您的编辑要求，以下内容会将文本分配给文本视图：

```
 ArrayList<String> lstAnswers = new ArrayList<String>();
    lstAnswers.add("Answer 1");
    lstAnswers.add("Answer 2");
    lstAnswers.add("Answer 3");
    lstAnswers.add("Answer 4");

    Random random = new Random();

    int[] textViews = new int[] { R.id.txt1, R.id.txt2, R.id.txt3, R.id.txt4 };
    int textViewIndex = 0;

    while (lstAnswers.size() > 0) {
        int index = random.nextInt(lstAnswers.size());
        String randomAnswer = lstAnswers.remove(index);

        ((TextView)findViewByid(textViews[textViewIndex])).setText(randomAnswer);

        ++textViewIndex;
    } 
```

# java - Would java.io.ByteArrayOutputStream.toByteArray() return null?

> ID：10071120
> 
> 赞同：0
> 
> 时间：2012-04-09T09:08:41.500
> 
> 标签：java, null, bytearrayoutputstream

Just like the title shows, I couldn't find any clue about it in Javadoc.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T09:11:30.297

不，它永远不会。返回 null永远不会*有意义*，如果您查看实现，它肯定不会。（我意识到依靠文档化的保证通常比实现更好，但我认为没有理由假设它会在这里返回 null。）

特别是，[文档](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html)指出：

> 创建一个新分配的字节数组。

和

> 返回： 此输出流的当前内容，作为字节数组。

如果它返回null，那将是不正确的，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:20:55.133

它会`null`以一种方式返回；）

```
ByteArrayOutputStream baos = new ByteArrayOutputStream()
{
    public byte[] toByteArray()
    {
        return null;
    }
};
System.out.println(baos.toByteArray()); 
```

**输出：**

```
null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:08:13.990

不，它不会。曾经。查看代码 ByteArrayOutputStream.toByteArray：

```
public synchronized byte toByteArray()[] {
    return Arrays.copyOf(buf, count);
} 
```

Arrays.copyOf:

```
public static byte[] copyOf(byte[] original, int newLength) {
    byte[] copy = new byte[newLength];
    System.arraycopy(original, 0, copy, 0,
                     Math.min(original.length, newLength));
    return copy;
} 
```

# extjs4 - ExtJS extending the height of a row in a certain view

> ID：10071123
> 
> 赞同：1
> 
> 时间：2012-04-09T09:08:55.667
> 
> 标签：extjs4

I have a certain view where I want to post text so I need the height of the row cells to be bigger than the default. I look up the documentation of ExtJS 4.0 and come up with this:

```
Ext.define('APP.view.CalendarEventsGrid', {
    //extend: 'Ext.grid.Panel',//this is the default which is working
    Ext.create('Ext.grid.Panel',{ 
        viewConfig: {
            height: 50
        }
    }),

    id: 'CalendarEvent',

    requires: [
        'Ext.data.*',
        'Ext.grid.plugin.CellEditing',
        'Ext.form.field.Text',
        'Ext.toolbar.TextItem',
    ],

    initComponent: function(){... 
```

But this don't do the trick. So could anyone help me with a way to change the height of the row in this exact view?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:56:53.563

我不确定您的确切问题是什么，但我假设您想传入`height: 50`config`viewConfig`选项`Ext.grid.Panel`

父类的每个配置都可以通过子类传递，因此您无需实例化父类来指定配置选项（实际上您在问题中尝试的内容根本不可能:)）

```
Ext.define('SYMADM.view.CalendarEventsGrid', {
    extend: 'Ext.grid.Panel',
    viewConfig: {
        height: 50
    }, 
```

# node.js - Node.js and npm pg for postgres error

> ID：10071124
> 
> 赞同：0
> 
> 时间：2012-04-09T09:08:58.613
> 
> 标签：node.js, npm

I am attempting to get the Postgesql client for node working with NPM. Using node v0.6.14 and receiving the following error:

> pg@0.5.4 install /Users/matt/Sites/node_test/node_modules/pg
> 
> node-waf configure build || true

Checking for program g++ or c++ : /usr/bin/g++

...

'configure' finished successfully (0.082s)

Waf: Entering directory '/Users/matt/Sites/node_test/node_modules/pg/build'

[1/2] cxx: src/binding.cc -> build/Release/src/binding_1.o

../src/binding.cc:3:25: error: node_events.h: No such file or directory

...

Build failed: -> task failed (err #1): {task: cxx binding.cc -> binding_1.o} pg@0.5.4 ./node_modules/pg └── generic-pool@1.0.6`

I have set the $NODE_PATH, and feel a bit stuck at this point, not quite knowing what is wrong. Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:37:24.360

我正在关注 Heroku 的“Node.js 入门”文章，该文章建议使用 pg 包的 v0.5.4。

但是，我使用的是 Node 的 0.6.x 版本，所以我遇到了同样的错误。

我通过更改我的 package.json 文件以指定 pg 的 v 0.6.15 来修复它。

`"dependencies": { "pg": "0.6.15" }`

# hibernate - Unable to connect to HSQLDB after running a couple of tests (which worked before)

> ID：10071127
> 
> 赞同：1
> 
> 时间：2012-04-09T09:09:24.687
> 
> 标签：hibernate, spring-mvc, hsqldb

Hi I am working with Spring, Hibernate 3 and JPA and I have configured my JUnit Tests to connect to a HSQLDB (In Memory) instead of the MySQL database that I use for my application. This worked fine for some time until recently, just out of the blue I couldn't connect to the HSQLDB Heres the stack trace and my .xml and .properties configuration files

```
11:06:41,979         INFO Dialect:206 - Using dialect: org.hibernate.dialect.HSQLDialect
11:06:41,986         INFO JdbcSupportLoader:70 - Disabling contextual LOB creation as connection was null
11:06:41,987         INFO TransactionFactoryFactory:62 - Transaction strategy: org.springframework.orm.hibernate3.SpringTransactionFactory
11:06:41,988         INFO TransactionManagerLookupFactory:80 - No TransactionManagerLookup configured (in JTA environment, use of read-write or transactional second-level cache is not recommended)
11:06:41,988         INFO SettingsFactory:169 - Automatic flush during beforeCompletion(): disabled
11:06:41,988         INFO SettingsFactory:173 - Automatic session close at end of transaction: disabled
11:06:41,989         INFO SettingsFactory:188 - Scrollable result sets: disabled
11:06:41,990         INFO SettingsFactory:196 - JDBC3 getGeneratedKeys(): disabled
11:06:41,990         INFO SettingsFactory:204 - Connection release mode: auto
11:06:41,991         INFO SettingsFactory:231 - Default batch fetch size: 1
11:06:41,991         INFO SettingsFactory:235 - Generate SQL with comments: disabled
11:06:41,991         INFO SettingsFactory:239 - Order SQL updates by primary key: disabled
11:06:41,991         INFO SettingsFactory:243 - Order SQL inserts for batching: disabled
11:06:41,992         INFO SettingsFactory:410 - Query translator: org.hibernate.hql.ast.ASTQueryTranslatorFactory
11:06:41,994         INFO ASTQueryTranslatorFactory:47 - Using ASTQueryTranslatorFactory
11:06:41,994         INFO SettingsFactory:251 - Query language substitutions: {}
11:06:41,994         INFO SettingsFactory:256 - JPA-QL strict compliance: disabled
11:06:41,994         INFO SettingsFactory:261 - Second-level cache: enabled
11:06:41,994         INFO SettingsFactory:265 - Query cache: disabled
11:06:41,995         INFO SettingsFactory:395 - Cache region factory : org.hibernate.cache.impl.NoCachingRegionFactory
11:06:41,995         INFO SettingsFactory:275 - Optimize cache for minimal puts: disabled
11:06:41,995         INFO SettingsFactory:284 - Structured second-level cache entries: disabled
11:06:42,000         INFO SettingsFactory:304 - Echoing all SQL to stdout
11:06:42,001         INFO SettingsFactory:313 - Statistics: disabled
11:06:42,001         INFO SettingsFactory:317 - Deleted entity synthetic identifier rollback: disabled
11:06:42,001         INFO SettingsFactory:332 - Default entity-mode: pojo
11:06:42,002         INFO SettingsFactory:336 - Named query checking : enabled
11:06:42,002         INFO SettingsFactory:340 - Check Nullability in Core (should be disabled when Bean Validation is on): enabled
11:06:42,063         INFO SessionFactoryImpl:199 - building session factory
11:06:42,315         INFO SessionFactoryObjectFactory:105 - Not binding factory to JNDI, no JNDI name configured
11:06:42,323         INFO SchemaExport:226 - Running hbm2ddl schema export
11:06:42,325         INFO SchemaExport:251 - exporting generated schema to database
11:07:11,327         WARN BasicResourcePool:1224 - com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@1d4eeb5 -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30).
11:07:11,327         WARN JDBCExceptionReporter:100 - SQL Error: 0, SQLState: null
11:07:11,328        ERROR JDBCExceptionReporter:101 - Connections could not be acquired from the underlying database!
11:07:11,329        ERROR SchemaExport:274 - schema export unsuccessful
java.sql.SQLException: Connections could not be acquired from the underlying database!
    at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:104)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:264)
    at com.mchange.v2.c3p0.PoolBackedDataSource.getConnection(PoolBackedDataSource.java:94)
    at com.mchange.v2.c3p0.ComboPooledDataSource.getConnection(ComboPooledDataSource.java:521)
    at org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:81)
    at org.hibernate.tool.hbm2ddl.SuppliedConnectionProviderConnectionHelper.prepare(SuppliedConnectionProviderConnectionHelper.java:51)
    at org.hibernate.tool.hbm2ddl.SchemaExport.execute(SchemaExport.java:252)
    at org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:211)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:383)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1385)
    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:954)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:860)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:779)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:551)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: com.mchange.v2.resourcepool.CannotAcquireResourceException: A ResourcePool could not acquire a resource from its primary factory or source.
    at com.mchange.v2.resourcepool.BasicResourcePool.awaitAcquire(BasicResourcePool.java:972)
    at com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:208)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:260) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-09T14:12:55.817

在内存数据库中使用 HSQLDB 时，我遇到了同样的问题。特别是我`com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool`也用。原来 JAR`hsqldb.jar`不在类路径上。添加后一切正常。

# orbeon - 不断增长的 eXist 数据库

> ID：10071135
> 
> 赞同：0
> 
> 时间：2012-04-09T09:10:11.217
> 
> 标签：orbeon, xforms, exist-db

我正在使用 Orbeon Forms 和 eXist 将填写的表格存储在那里。我还有下一个问题，eXist 每天增长超过 500 MB。如果我要制作整个数据库的保留副本，然后将删除所有数据库文件，并恢复保留副本，那么数据库只有 1 GB 大，但几天后它变成了 4 GB，并且不断增长、增长和增长......

首先我使用的是embeded eXist 1.2.6，我认为它是不稳定的版本，所以我将所有数据移到了external eXist 1.4.1，但它仍然在新版本中继续增长。

这是存在/WEB-INF 中的 conf.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<exist xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="schema/conf.xsd">
    <cluster dbaPassword="" dbaUser="admin" exclude="/db/system,/db/system/config" 
    journalDir="data/journal" 
    protocol="UDP(mcast_addr=228.1.2.3;mcast_port=45566;ip_ttl=8;ip_mcast=true;mcast_send_buf_size=800000;mcast_recv_buf_size=150000;ucast_send_buf_size=800000;ucast_recv_buf_size=150000;loopback=true):PING(timeout=2000;num_initial_members=3;up_thread=true;down_thread=true):MERGE2(min_interval=10000;max_interval=20000):FD(shun=true;up_thread=true;down_thread=true;timeout=2500;max_tries=5):VERIFY_SUSPECT(timeout=3000;num_msgs=3;up_thread=true;down_thread=true):pbcast.NAKACK(gc_lag=50;retransmit_timeout=300,600,1200,2400,4800;max_xmit_size=8192;up_thread=true;down_thread=true):UNICAST(timeout=300,600,1200,2400,4800;window_size=100;min_threshold=10;down_thread=true):pbcast.STABLE(desired_avg_gossip=20000;up_thread=true;down_thread=true):FRAG(frag_size=8192;down_thread=true;up_thread=true):pbcast.GMS(join_timeout=5000;join_retry_timeout=2000;shun=true;print_local_addr=true)"/>

    <db-connection cacheSize="200M" collectionCache="200M" database="native" files="/opt/alfresco-3.4.c/tomcat/work/exist/data/" pageSize="4096">

        <recovery enabled="yes" group-commit="no" journal-dir="/opt/alfresco-3.4.c/tomcat/work/exist/recovery-data/" size="100M" sync-on-commit="yes" force-restart="yes" consistency-check="yes"/>

        <watchdog output-size-limit="10000" query-timeout="180000"/>

    </db-connection>

    <indexer caseSensitive="yes" index-depth="5" preserve-whitespace-mixed-content="yes" stemming="no" suppress-whitespace="none" tokenizer="org.exist.storage.analysis.SimpleTokenizer" track-term-freq="yes">

            <modules>
            <module id="ngram-index" file="ngram.dbx" n="3" class="org.exist.indexing.ngram.NGramIndex"/>

            <module id="lucene-index" buffer="32" class="org.exist.indexing.lucene.LuceneIndex"/>
        </modules>

        <stopwords file="stopword"/>

        <index>
            <fulltext attributes="false" default="none">
                <exclude path="/auth"/>
            </fulltext>
        </index>
    </indexer>

    <scheduler>

    </scheduler>
    <serializer add-exist-id="none" compress-output="no" enable-xinclude="yes" enable-xsl="no" indent="yes" match-tagging-attributes="no" match-tagging-elements="no">
    </serializer>

    <transformer class="org.apache.xalan.processor.TransformerFactoryImpl" caching="yes"/>

    <validation mode="no">
        <entity-resolver>
            <catalog uri="${WEBAPP_HOME}/WEB-INF/catalog.xml"/>
        </entity-resolver>
    </validation>

    <xquery enable-java-binding="no" disable-deprecated-functions="no" enable-query-rewriting="yes" backwardCompatible="no" raise-error-on-failed-retrieval="no">
        <builtin-modules>
            <module uri="http://exist-db.org/xquery/lucene" class="org.exist.xquery.modules.lucene.LuceneModule"/>          
            <module uri="http://exist-db.org/xquery/ngram" class="org.exist.xquery.modules.ngram.NGramModule"/>

            <module uri="http://exist-db.org/xquery/examples" class="org.exist.xquery.modules.example.ExampleModule"/>           
            <module uri="http://exist-db.org/xquery/request" class="org.exist.xquery.functions.request.RequestModule"/>            
            <module uri="http://exist-db.org/xquery/response" class="org.exist.xquery.functions.response.ResponseModule"/>            
            <module uri="http://exist-db.org/xquery/session" class="org.exist.xquery.functions.session.SessionModule"/>            
            <module uri="http://exist-db.org/xquery/system" class="org.exist.xquery.functions.system.SystemModule"/>
            <module uri="http://exist-db.org/xquery/text" class="org.exist.xquery.functions.text.TextModule"/>           
            <module uri="http://exist-db.org/xquery/transform" class="org.exist.xquery.functions.transform.TransformModule"/>            
            <module uri="http://exist-db.org/xquery/util" class="org.exist.xquery.functions.util.UtilModule"/>            
            <module uri="http://exist-db.org/xquery/validation" class="org.exist.xquery.functions.validation.ValidationModule"/>           
            <module uri="http://exist-db.org/xquery/xmldb" class="org.exist.xquery.functions.xmldb.XMLDBModule"/>            

            <module uri="http://expath.org/ns/http-client" class="org.expath.exist.HttpClientModule"/>        
            <module uri="http://www.expath.org/mod/http-client" src="resource:org/expath/www/mod/http-client/http-client.xqm"/>      

            <module uri="http://exist-db.org/xquery/httpclient" class="org.exist.xquery.modules.httpclient.HTTPClientModule"/>

            <module uri="http://exist-db.org/xquery/kwic" src="resource:org/exist/xquery/lib/kwic.xql"/>

            <module uri="http://www.json.org" src="resource:org/exist/xquery/lib/json.xq"/>

            <module uri="http://exist-db.org/xquery/sequences" src="resource:org/exist/xquery/lib/sequences.xq"/>

            <module uri="http://exist-db.org/versioning" src="resource:org/exist/versioning/xquery/versioning.xqm"/>

            <module uri="http://exist-db.org/xquery/testing" src="resource:org/exist/xquery/lib/test.xq"/>   

            <module uri="http://xproc.net/xproc" src="resource:net/xproc/xprocxq/src/xquery/xproc.xqm"/>         
            <module uri="http://xproc.net/xproc/const" src="resource:net/xproc/xprocxq/src/xquery/const.xqm"/>          
            <module uri="http://xproc.net/xproc/ext" src="resource:net/xproc/xprocxq/src/xquery/ext.xqm"/>    
            <module uri="http://xproc.net/xproc/functions" src="resource:net/xproc/xprocxq/src/xquery/functions.xqm"/>        
            <module uri="http://xproc.net/xproc/naming" src="resource:net/xproc/xprocxq/src/xquery/naming.xqm"/>
            <module uri="http://xproc.net/xproc/opt" src="resource:net/xproc/xprocxq/src/xquery/opt.xqm"/> 
            <module uri="http://xproc.net/xproc/std" src="resource:net/xproc/xprocxq/src/xquery/std.xqm"/>     
            <module uri="http://xproc.net/xproc/util" src="resource:net/xproc/xprocxq/src/xquery/util.xqm"/>       

            <module uri="http://exist-db.org/xquery/file" class="org.exist.xquery.modules.file.FileModule"/>

            <module uri="http://exist-db.org/xquery/xqdoc" class="org.exist.xqdoc.xquery.XQDocModule"/>

        </builtin-modules>
    </xquery>
    <xupdate allowed-fragmentation="5" enable-consistency-checks="no"/>

</exist> 
```

这是一个普遍的问题吗？还是我配置的 eXist 错误？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T21:33:24.463

我建议在大多数 eXist 开发人员和用户所在的exist-open 上提出您的问题。[在https://lists.sourceforge.net/lists/listinfo/exist-open](https://lists.sourceforge.net/lists/listinfo/exist-open)订阅——你不会后悔的。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:08:09.747

感谢@joewiz 和@avernet

现在我可以回答我自己的问题了。主要问题是我使用的是 orbeon 3.8，它使用 eXist DB 在那里存储缓存。更新到 3.9 版本会有所帮助，因为 3.9 使用的是 Ehcahe。

作为临时解决方法，我将 orbeon 3.8 配置为在我添加的**properties-local.xml 中将**数据存储到外部 eXist

```
<property as="xs:anyURI"  name="oxf.fr.persistence.service.exist.uri" value="http://127.0.0.1:8080/exist/rest/db"/> 
```

[此处](http://wiki.orbeon.com/forms/doc/developer-guide/exist-configuration#TOC-Configuring-Form-Runner)所述的属性，并嵌入 eXist 以存储缓存，以便设置下一个属性

```
<property as="xs:anyURI"  name="oxf.xforms.store.application.uri"                   value="xmldb:exist:///"/>                      
<property as="xs:string"  name="oxf.xforms.store.application.collection"            value="/db/orbeon/xforms/cache/"/> 
```

因此，当 servlet 容器停止时，我可以安全地删除嵌入的 eXist 数据文件。

# c++ - 在 C++ 中的文件（日志文件）中添加新行

> ID：10071137
> 
> 赞同：28
> 
> 时间：2012-04-09T09:10:21.327
> 
> 标签：c++, file, append, initwithcontentsoffile

我有一个日志记录功能，在这个我有日志文件。现在，每次我运行程序时，我都希望以前编写的文件不应该被删除，并且应该附加当前数据（日志文件中有什么）

只是为了说清楚，例如：我有一个日志文件 logging_20120409.log，它每天都保存时间戳。假设我运行我的项目，它将当前时间戳写入它。现在，如果我重新运行它，以前的时间戳将被它替换。我不想要这个功能。我想要上一个时间戳以及当前时间戳。

请帮忙

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-09T09:17:22.983

您想以“追加”模式打开文件，因此它不会删除文件的先前内容。您可以通过指定`ios_base::app`打开文件的时间来做到这一点：

```
std::ofstream log("logfile.txt", std::ios_base::app | std::ios_base::out); 
```

例如，每次运行时，它都会在文件中多添加一行：

```
#include <ios>
#include <fstream>

int main(){
    std::ofstream log("logfile.txt", std::ios_base::app | std::ios_base::out);

    log << "line\n";
    return 0;
} 
```

所以，第一次运行它，你会得到

```
line 
```

第二次：

```
line
line 
```

等等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T09:13:31.733

使用类似的东西：

```
#include <fstream>
#include <iostream>
using namespace std;
int main() {
  ofstream out("try.txt", ios::app);
  out << "Hello, world!\n";
  return 0;
} 
```

ios:app 选项使输出附加到文件的末尾，而不是删除其内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T09:11:36.527

也许您需要使用附加选项打开文件。像这样：

```
FILE * pFile;
pFile = fopen ("myfile.txt","a"); 
```

或这个 ：

```
fstream filestr;
filestr.open ("test.txt", fstream::app) 
```

# iphone - 3D 动画 - CABasicAnimation 和 CATransform3D 提供视图之间的差距

> ID：10071139
> 
> 赞同：5
> 
> 时间：2012-04-09T09:10:22.123
> 
> 标签：iphone, ios, ios5, caanimation, catransform3d

所以，我正在尝试 在第一个视图中实现这个应用程序[http://itunes.apple.com/us/app/spg-mobile-app/id312306003?mt=8中的动画](http://itunes.apple.com/us/app/spg-mobile-app/id312306003?mt=8)

我已经实现了翻转视图的动画，并且我成功地为一侧设置动画，当我给出反向翻转的反向逻辑时，它在视图之间产生了一些差距

这是我的代码

```
- (UIImage *)screenShot: (UIView *) aView
{
    // Arbitrarily masks to 40%. Use whatever level you like
    UIGraphicsBeginImageContext(hostView.frame.size);
    [aView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    CGContextSetRGBFillColor (UIGraphicsGetCurrentContext(), 0, 0, 0, 0.4f);
    CGContextFillRect (UIGraphicsGetCurrentContext(), hostView.frame);
    UIGraphicsEndImageContext();
    return image;
}

- (CALayer *) createLayerFromView: (UIView *) aView transform: (CATransform3D) transform
{

    CALayer *imageLayer = [CALayer layer];
    imageLayer.anchorPoint = CGPointMake(1.0f, 1.0f);
    imageLayer.frame = (CGRect){.size = hostView.frame.size};
    imageLayer.transform = transform;
    UIImage *shot = [self screenShot:aView];
    imageLayer.contents = (__bridge id) shot.CGImage;

    return imageLayer;
}

- (void)animationDidStart:(CAAnimation *)animation
{

    UIView *source = (UIView *) _source;
    [source removeFromSuperview];
}

- (void)animationDidStop:(CAAnimation *)animation finished:(BOOL)finished
{

    UITableView *dest = (UITableView *) destination;
    dest.frame = CGRectMake(160, 0, 160, 460);
    [hostView addSubview:dest];
    [transformationLayer removeFromSuperlayer];

    //if (delegate)
    //SAFE_PERFORM_WITH_ARG(delegate, @selector(segueDidComplete), nil);
}

-(void)animateWithDuration: (CGFloat) aDuration
{
    goesForward=FALSE ;

    CAAnimationGroup *group = [CAAnimationGroup animation];
    group.delegate = self;
    group.duration = aDuration;

    CGFloat halfWidth = hostView.frame.size.width; // 2.0f;
    float multiplier = goesForward ? -1.0f : 1.0f;

    CABasicAnimation *translationX = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.translation.x"];
    translationX.toValue = [NSNumber numberWithFloat:multiplier * halfWidth];

    CABasicAnimation *translationZ = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.translation.z"];
    translationZ.toValue = [NSNumber numberWithFloat:-200.0]; //halfWidth];

    CABasicAnimation *rotationY = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.rotation.y"];
    rotationY.toValue = [NSNumber numberWithFloat: multiplier * M_PI_2];

    group.animations = [NSArray arrayWithObjects: rotationY, translationX, translationZ, nil];
    group.fillMode = kCAFillModeForwards;
    group.removedOnCompletion = NO;

    [CATransaction flush];
    [transformationLayer addAnimation:group forKey:kAnimationKey];
}

- (void) constructRotationLayer
{

    UIView *source = (UIView *) _source;
    UIView *dest = (UIView *) destination;
    hostView = [source superview];

    //    if ([hostView isKindOfClass:[UIWindow class]]) {
    //        NSLog(@"I am window class");
    //    }

    transformationLayer = [CALayer layer];
    transformationLayer.frame = hostView.bounds;  //CGRectMake(40, 0, 280, 460);    
    transformationLayer.anchorPoint = CGPointMake(0.5f, 0.5f);
    CATransform3D sublayerTransform = CATransform3DIdentity;
    sublayerTransform.m34 = 1.0 / -1000;
    [transformationLayer setSublayerTransform:sublayerTransform];
    [hostView.layer addSublayer:transformationLayer];

    CATransform3D transform = CATransform3DMakeTranslation(0, 0, 0);
    [transformationLayer addSublayer:[self createLayerFromView:source transform:CATransform3DRotate(transform, M_PI_2, 0, 0, 0)]];

    transform = CATransform3DRotate(transform, M_PI_2, 0, 1, 0);
    transform = CATransform3DTranslate(transform, hostView.frame.size.width, 0, 0);

    if (!goesForward)
    {
        transform = CATransform3DRotate(transform, M_PI_2, 0, 1, 0);
        transform = CATransform3DTranslate(transform, hostView.frame.size.width, 0, 0);
        transform = CATransform3DRotate(transform, M_PI_2, 0, 1, 0);
        transform = CATransform3DTranslate(transform, hostView.frame.size.width, 0, 0);
    }

    [transformationLayer addSublayer:[self createLayerFromView:dest transform:transform]];
}

- (void)perform
{
    [self constructRotationLayer];
    [self animateWithDuration:0.4f];
} 
```

所以，在这里我首先调用执行方法，在这里我上传了我的总代码[在这里](http://dl.dropbox.com/u/75855691/FlipMe.zip)

* * *

这段代码对我有用，但仍然有一些差距，问题是当前视图的框架和即将到来的视图应该相同

```
- (UIImage *)screenShot: (UIView *) aView
{
    // Arbitrarily masks to 40%. Use whatever level you like
    UIGraphicsBeginImageContext(hostView.frame.size);
    [aView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    CGContextSetRGBFillColor (UIGraphicsGetCurrentContext(), 0, 0, 0, 0.4f);
    CGContextFillRect (UIGraphicsGetCurrentContext(), hostView.frame);
    UIGraphicsEndImageContext();
    return image;
}

- (CALayer *) createLayerFromView: (UIView *) aView transform: (CATransform3D) transform
{
    CALayer *imageLayer = [CALayer layer];
    imageLayer.anchorPoint = CGPointMake(1.0f, 1.0f);
    imageLayer.frame = (CGRect){.size = hostView.frame.size};
    imageLayer.transform = transform;  
    UIImage *shot = [self screenShot:aView];
    imageLayer.contents = (__bridge id) shot.CGImage;
    return imageLayer;
}

- (void)animationDidStart:(CAAnimation *)animation 
{
//    UIView *source = (UIView *) super.sourceViewController;
    [source removeFromSuperview];
}

- (void)animationDidStop:(CAAnimation *)animation finished:(BOOL)finished 
{
//    UIView *dest = (UIView *) super.destinationViewController;
    if (hostView !=nil) {
        NSLog(@"hostView %@",hostView);
        if (dest) {
    [hostView addSubview:dest];              
        }
    }

    [transformationLayer removeFromSuperlayer];
    if (delegate)
        SAFE_PERFORM_WITH_ARG(delegate, @selector(segueDidComplete), nil);

}

-(void)animateWithDuration: (CGFloat) aDuration
{
    CAAnimationGroup *group = [CAAnimationGroup animation]; 
    group.delegate = self; 
    group.duration = aDuration; 

    CGFloat halfWidth = hostView.frame.size.width / 2.0f;
    float multiplier = goesForward ? -1.0f : 1.0f;

    CABasicAnimation *translationX = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.translation.x"];
    translationX.toValue = [NSNumber numberWithFloat:multiplier * halfWidth];

    CABasicAnimation *translationZ = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.translation.z"];
    translationZ.toValue = [NSNumber numberWithFloat:-halfWidth];

    CABasicAnimation *rotationY = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.rotation.y"]; 
    rotationY.toValue = [NSNumber numberWithFloat: multiplier * M_PI_2];

    group.animations = [NSArray arrayWithObjects: rotationY, translationX, translationZ, nil];
    group.fillMode = kCAFillModeForwards; 
    group.removedOnCompletion = NO;

    [CATransaction flush];
    [transformationLayer addAnimation:group forKey:kAnimationKey];

}

- (void) constructRotationLayer
{
//    UIView *source = (UIView *) super.sourceViewController;
//    UIView *dest = (UIView *) super.destinationViewController;
    hostView = source.superview;

    transformationLayer = [CALayer layer];
    transformationLayer.frame = hostView.bounds;
    transformationLayer.anchorPoint = CGPointMake(0.5f, 0.5f);
    CATransform3D sublayerTransform = CATransform3DIdentity; 
    sublayerTransform.m34 = 1.0 / -1000;
    [transformationLayer setSublayerTransform:sublayerTransform];   
    [hostView.layer addSublayer:transformationLayer];

    CATransform3D transform = CATransform3DMakeTranslation(0, 0, 0);
    [transformationLayer addSublayer:[self createLayerFromView:source transform:transform]];

    transform = CATransform3DRotate(transform, M_PI_2, 0, 1, 0);
    transform = CATransform3DTranslate(transform, hostView.frame.size.width, 0, 0);
    if (!goesForward) 
    {
        transform = CATransform3DRotate(transform, M_PI_2, 0, 1, 0);
        transform = CATransform3DTranslate(transform, hostView.frame.size.width, 0, 0);
        transform = CATransform3DRotate(transform, M_PI_2, 0, 1, 0);
        transform = CATransform3DTranslate(transform, hostView.frame.size.width, 0, 0);
    }

    [transformationLayer addSublayer:[self createLayerFromView:dest transform:transform]];
}

- (void)perform
{
    [self constructRotationLayer];
    [self animateWithDuration:0.4f];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T17:03:38.600

终于解决了我的问题，搞砸了锚点

```
- (UIImage *)screenShot: (UIView *) aView
{
    // Arbitrarily masks to 40%. Use whatever level you like
    UIGraphicsBeginImageContext(hostView.frame.size);
    [aView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    CGContextSetRGBFillColor (UIGraphicsGetCurrentContext(), 0, 0, 0, 0.4f);
    CGContextFillRect (UIGraphicsGetCurrentContext(), hostView.frame);
    UIGraphicsEndImageContext();
    return image;
}

- (CALayer *) createLayerFromView: (UIView *) aView transform: (CATransform3D) transform
{
    CALayer *imageLayer = [CALayer layer];
    imageLayer.anchorPoint = CGPointMake(1.0f, 1.0f);
    imageLayer.frame = (CGRect){.size = hostView.frame.size};
    imageLayer.transform = transform;  
    UIImage *shot = [self screenShot:aView];
    imageLayer.contents = (__bridge id) shot.CGImage;
    return imageLayer;
}

- (void)animationDidStart:(CAAnimation *)animation 
{
//    UIView *source = (UIView *) super.sourceViewController;
    [source removeFromSuperview];
}

- (void)animationDidStop:(CAAnimation *)animation finished:(BOOL)finished 
{
//    UIView *dest = (UIView *) super.destinationViewController;
    if (hostView !=nil) {
        NSLog(@"hostView %@",hostView);
        if (dest) {
    [hostView addSubview:dest];              
        }
    }

    [transformationLayer removeFromSuperlayer];
    if (delegate)
        SAFE_PERFORM_WITH_ARG(delegate, @selector(segueDidComplete), nil);

}

-(void)animateWithDuration: (CGFloat) aDuration
{
    CAAnimationGroup *group = [CAAnimationGroup animation]; 
    group.delegate = self; 
    group.duration = aDuration; 

    CGFloat halfWidth = hostView.frame.size.width / 2.0f;
    float multiplier = goesForward ? -1.0f : 1.0f;

    CABasicAnimation *translationX = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.translation.x"];
    translationX.toValue = [NSNumber numberWithFloat:multiplier * halfWidth];

    CABasicAnimation *translationZ = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.translation.z"];
    translationZ.toValue = [NSNumber numberWithFloat:-halfWidth];

    CABasicAnimation *rotationY = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.rotation.y"]; 
    rotationY.toValue = [NSNumber numberWithFloat: multiplier * M_PI_2];

    group.animations = [NSArray arrayWithObjects: rotationY, translationX, translationZ, nil];
    group.fillMode = kCAFillModeForwards; 
    group.removedOnCompletion = NO;

    [CATransaction flush];
    [transformationLayer addAnimation:group forKey:kAnimationKey];

}

- (void) constructRotationLayer
{
//    UIView *source = (UIView *) super.sourceViewController;
//    UIView *dest = (UIView *) super.destinationViewController;
    hostView = source.superview;

    transformationLayer = [CALayer layer];
    transformationLayer.frame = hostView.bounds;
    transformationLayer.anchorPoint = CGPointMake(0.5f, 0.5f);
    CATransform3D sublayerTransform = CATransform3DIdentity; 
    sublayerTransform.m34 = 1.0 / -1000;
    [transformationLayer setSublayerTransform:sublayerTransform];   
    [hostView.layer addSublayer:transformationLayer];

    CATransform3D transform = CATransform3DMakeTranslation(0, 0, 0);
    [transformationLayer addSublayer:[self createLayerFromView:source transform:transform]];

    transform = CATransform3DRotate(transform, M_PI_2, 0, 1, 0);
    transform = CATransform3DTranslate(transform, hostView.frame.size.width, 0, 0);
    if (!goesForward) 
    {
        transform = CATransform3DRotate(transform, M_PI_2, 0, 1, 0);
        transform = CATransform3DTranslate(transform, hostView.frame.size.width, 0, 0);
        transform = CATransform3DRotate(transform, M_PI_2, 0, 1, 0);
        transform = CATransform3DTranslate(transform, hostView.frame.size.width, 0, 0);
    }

    [transformationLayer addSublayer:[self createLayerFromView:dest transform:transform]];
}

- (void)perform
{
    [self constructRotationLayer];
    [self animateWithDuration:0.4f];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T12:58:33.963

我也这样做了。我的工作代码如下。请喜欢它。

```
- (UIImage *)screenShot: (UIView*)  aView
    {
        // Arbitrarily masks to 40%. Use whatever level you like
        UIGraphicsBeginImageContext(hostView.frame.size);
        [aView.layer renderInContext:UIGraphicsGetCurrentContext()];
        UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
        CGContextSetRGBFillColor (UIGraphicsGetCurrentContext(), 0, 0, 0, 0.4f);
        CGContextFillRect (UIGraphicsGetCurrentContext(), hostView.frame);
        UIGraphicsEndImageContext();
        return image;
    }

    - (CALayer*)  createLayerFromView: (UIView *) aView transform: (CATransform3D) transform
    {
        CALayer *imageLayer    = [CALayer layer];
        imageLayer.anchorPoint = CGPointMake(1.0f, 1.0f);
        imageLayer.frame       = (CGRect){.size = hostView.frame.size};
        imageLayer.transform   = transform;  
        UIImage *shot          = [self screenShot:aView];
        imageLayer.contents    = (id) shot.CGImage;

        return imageLayer;
    }

    - (void)animationDidStart:(CAAnimation *)animation 
    {
        UIViewController *source;
        if (islogin) {
            source = (UIViewController *)self.navigationController;
        }
        else
            source = (UIViewController *)self.joinTABBARController;
        [source.view removeFromSuperview];
    }

    - (void)animationDidStop:(CAAnimation *)animation finished:(BOOL)finished 
    {
        UIViewController *dest;
        if (islogin) {
           dest = (UIViewController *) self.joinTABBARController; 
        }
        else
            dest = (UIViewController  *)self.navigationController;
        [hostView addSubview:dest.view];
        [transformationLayer removeFromSuperlayer];
    //    if (delegate)
    //        SAFE_PERFORM_WITH_ARG(delegate, @selector(segueDidComplete), nil);
    }

    //-(void)animateWithDuration: (CGFloat) aDuration
    //{
    //    CAAnimationGroup *group = [CAAnimationGroup animation]; 
    //    group.delegate = self; 
    //    group.duration = aDuration; 
    //    
    //    CGFloat halfWidth = hostView.frame.size.width / 2.0f;
    //    float multiplier = goesForward ? -1.0f : 1.0f;
    //    
    //    CABasicAnimation *translationX = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.translation.x"];
    //    translationX.toValue = [NSNumber numberWithFloat:multiplier * halfWidth];
    //    
    //    CABasicAnimation *translationZ = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.translation.z"];
    //    translationZ.toValue = [NSNumber numberWithFloat:-halfWidth];
    //    
    //    CABasicAnimation *rotationY = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.rotation.y"]; 
    //    rotationY.toValue = [NSNumber numberWithFloat: multiplier * M_PI_2];
    //    
    //    group.animations = [NSArray arrayWithObjects: rotationY, translationX, translationZ, nil];
    //    group.fillMode = kCAFillModeForwards; 
    //    group.removedOnCompletion = NO;
    //    
    //    [CATransaction flush];
    //    [transformationLayer addAnimation:group forKey:kAnimationKey];
    //}

    - (void) constructRotationLayer:(TranDirection)aDirection
    {
        UIViewController *source;
        UIViewController *dest;
        if (islogin) {
            source = (UIViewController *) self.navigationController;
            dest   = (UIViewController*)  self.joinTABBARController;
        }
        else
        {
            source = (UIViewController *) self.joinTABBARController;
            dest   = (UIViewController *) self.navigationController;
        }
        hostView = source.view.superview;

        transformationLayer             = [CALayer layer];
        transformationLayer.frame       = hostView.bounds;
        transformationLayer.anchorPoint = CGPointMake(0.5f, 0.5f);
        CATransform3D sublayerTransform = CATransform3DIdentity; 
        sublayerTransform.m34           = 1.0 / -1000;
        [transformationLayer setSublayerTransform:sublayerTransform];   
        [hostView.layer addSublayer:transformationLayer];

        CATransform3D transform = CATransform3DMakeTranslation(0, 0, 0);
        [transformationLayer addSublayer:[self createLayerFromView:source.view transform:transform]];

        //    transform = CATransform3DRotate(transform, M_PI_2, 0, 1, 0);
        //    transform = CATransform3DTranslate(transform, hostView.frame.size.width, 0, 0);
        //    if (!goesForward) 
        //    {
        //        transform = CATransform3DRotate(transform, M_PI_2, 0, 1, 0);
        //        transform = CATransform3DTranslate(transform, hostView.frame.size.width, 0, 0);
        //        transform = CATransform3DRotate(transform, M_PI_2, 0, 1, 0);
        //        transform = CATransform3DTranslate(transform, hostView.frame.size.width, 0, 0);
        //    }
        //    
        //    [transformationLayer addSublayer:[self createLayerFromView:dest.view transform:transform]];

        if (aDirection == RTOL)
        {
            transform = CATransform3DRotate(transform, radians(90), 0, 1, 0);
            transform = CATransform3DTranslate(transform, CUBESIZE, 0, 0);
            [transformationLayer addSublayer:[self createLayerFromView:dest.view transform:transform]];
        } else {
            transform = CATransform3DRotate(transform, radians(90), 0, 1, 0);
            transform = CATransform3DTranslate(transform, CUBESIZE, 0, 0);
            transform = CATransform3DRotate(transform, radians(90), 0, 1, 0);
            transform = CATransform3DTranslate(transform, CUBESIZE, 0, 0);
            transform = CATransform3DRotate(transform, radians(90), 0, 1, 0);
            transform = CATransform3DTranslate(transform, CUBESIZE, 0, 0);
            [transformationLayer addSublayer:[self createLayerFromView:dest.view transform:transform]];

        }

    }

    -(void)moveFrom:(TranDirection)aDirection duration:(float)aDuration
    {
        [CATransaction flush];
        CABasicAnimation *rotation;
        CABasicAnimation *translationX;
        CABasicAnimation *translationZ;
        CAAnimationGroup *group = [CAAnimationGroup animation]; 
        group.delegate = self; 
        group.duration = aDuration; 

        if (aDirection == RTOL)
        {
            translationX         = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.translation.x"];
            translationX.toValue = [NSNumber numberWithFloat:-(CUBE_VERTICAL_WIDTH / 2)];
            rotation             = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.rotation.y"]; 
            rotation.toValue     = [NSNumber numberWithFloat:radians(-90)];
        } else {
            translationX         = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.translation.x"];
            translationX.toValue = [NSNumber numberWithFloat:(CUBE_VERTICAL_WIDTH / 2)];
            rotation             = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.rotation.y"]; 
            rotation.toValue     = [NSNumber numberWithFloat:radians(90)] ;
        }

        translationZ              = [CABasicAnimation animationWithKeyPath:@"sublayerTransform.translation.z"];
        translationZ.toValue      = [NSNumber numberWithFloat:-(CUBE_VERTICAL_WIDTH / 2)];
        group.animations          = [NSArray arrayWithObjects: rotation, translationX, translationZ, nil];
        group.fillMode            = kCAFillModeForwards; 
        group.removedOnCompletion = NO;
        [transformationLayer addAnimation:group forKey:kAnimationKey];
    }

    - (void)perform:(TranDirection)tdir
    {
        [self constructRotationLayer:tdir];
        // [self animateWithDuration:2.0f];
        [self moveFrom:tdir duration:.4];
    } 
```

# android - java.lang.VerifyError: MappingJacksonHttpMessageConverter，我需要什么杰克逊版本？

> ID：10071151
> 
> 赞同：1
> 
> 时间：2012-04-09T09:11:10.220
> 
> 标签：android, json, spring, rest, jackson

我正在使用 Android Spring Framework 和 Jackson 解析器开发一个 Android 3.1 应用程序。我没有使用 Maven，因为我不知道如何使用它。

我已按以下顺序将以下 jar 添加到我的项目的类路径中：

*   番石榴-11.0.2.jar
*   杰克逊注释-2.0.0.jar
*   杰克逊核心2.0.0.jar
*   jackson-databind-2.0.0.jar
*   spring-android-core-1.0.0.RC1.jar
*   spring-android-rest-template-1.0.0.RC1.jar

发出 REST 请求并进行 JSON 解析的类：

```
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpMethod;
import org.springframework.http.MediaType;
import org.springframework.http.ResponseEntity;
import org.springframework.http.converter.HttpMessageConverter;
import org.springframework.http.converter.json.MappingJacksonHttpMessageConverter;
import org.springframework.web.client.RestTemplate;

import com.google.common.collect.Lists;

import es.viacognita.models.Form;

public class FormSpringController
{
    public static List<Form> LoadAll()
    {
        HttpHeaders requestHeaders = new HttpHeaders();
        requestHeaders.setAccept(Collections.singletonList(new MediaType("application","json")));
        HttpEntity<?> requestEntity = new HttpEntity<Object>(requestHeaders);

        String url = "http://192.168.1.128/RestServiceImpl.svc/forms/";

        MappingJacksonHttpMessageConverter messageConverter = new MappingJacksonHttpMessageConverter();
        List<HttpMessageConverter<?>> messageConverters = Lists.newArrayList();
        messageConverters.add(messageConverter);

        RestTemplate restTemplate = new RestTemplate();
        restTemplate.setMessageConverters(messageConverters);

        ResponseEntity<Form[]> responseEntity = restTemplate.exchange(url, HttpMethod.GET, requestEntity, Form[].class);
        Form[] result= responseEntity.getBody();

        return Arrays.asList(result);
    }
} 
```

这里：

```
MappingJacksonHttpMessageConverter messageConverter = new MappingJacksonHttpMessageConverter(); 
```

我收到此错误：

```
java.lang.VerifyError: org.springframework.http.converter.json.MappingJacksonHttpMessageConverter 
```

为什么我会收到此错误？
我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T21:19:36.780

问题是 Spring 不适用于 Jackson 2.0。这已通过以下方式解决：

```
<bean id="jacksonMessageConverter"
          class="own.implementation.of.MappingJacksonHttpMessageConverter"/>

<bean class="org.springframework.web.servlet.mvc
             .annotation.AnnotationMethodHandlerAdapter">
        <property name="messageConverters">
            <list>
                <ref bean="jacksonMessageConverter"/>
            </list>
        </property>
        <property name="requireSession" value="false"/>
    </bean> 
```

并且`own.implementation.of.MappingJacksonHttpMessageConverter`基于此：

[http://www.jarvana.com/jarvana/view/org/springframework/spring-web/3.0.0.RELEASE/spring-web-3.0.0.RELEASE-sources.jar!/org/springframework/http/converter /json/MappingJacksonHttpMessageConverter.java?format=ok](http://www.jarvana.com/jarvana/view/org/springframework/spring-web/3.0.0.RELEASE/spring-web-3.0.0.RELEASE-sources.jar!/org/springframework/http/converter/json/MappingJacksonHttpMessageConverter.java?format=ok)

但是使用来自 Jackson 2.0 的 ObjectMapper 和其他 Jackson 类而不是 Jackson 1.*

# python - python：关于url编码和解码

> ID：10071152
> 
> 赞同：1
> 
> 时间：2012-04-09T09:11:12.980
> 
> 标签：python, urlencode, urldecode

我有个问题。我正在尝试在 python 中使用 urllib 库。但是，我不明白。

```
a = 'http%3A%2F%2Ffile%2Efir%2Enet%2F40d55cecf9a3a47851b1d0ebda3e423993c837d3ca%2F20110909%5F52%5Fblogfile%2Folsscj25%5F1315512137967%5F5tAuGI%5Fzip%2F%255B%25C0%25A9%25B5%25B5%25BF%25ECxp%255D%2B%25C0%25A9%25B5%25B5%25BF%25ECxp%2B%25BD%25C3%25B8%25AE%25BE%25F3%25B3%25D1%25B9%25F6%5F%2Ezip'

aa = unquote(unquote(a))
'http://file.fir.net/40d55cecf9a3a47851b1d0ebda3e423993c837d3ca/20110909_52_blogfile/olsscj25_1315512137967_5tAuGI_zip/[\xc0\xa9\xb5\xb5\xbf\xecxp]+\xc0\xa9\xb5\xb5\xbf\xecxp+\xbd\xc3\xb8\xae\xbe\xf3\xb3\xd1\xb9\xf6_.zip'

a1 = quote(quote(aa))
'http%253A//file.fir.net/40d55cecf9a3a47851b1d0ebda3e423993c837d3ca/20110909_52_blogfile/olsscj25_1315512137967_5tAuGI_zip/%255B%25C0%25A9%25B5%25B5%25BF%25ECxp%255D%252B%25C0%25A9%25B5%25B5%25BF%25ECxp%252B%25BD%25C3%25B8%25AE%25BE%25F3%25B3%25D1%25B9%25F6_.zip' 
```

为什么不等于两个值（a 和 a1）。请告诉我

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:40:29.853

我认为您正在将多个问题复杂化为 1。

首先，您问这个问题的唯一原因是因为您想取消引用文件名的尾部部分，这似乎被引用了两次。

其次，文件名，即使是双引号，也会产生非 utf-8 编码的数据，并且不可打印。

第三，您似乎不了解 URL 格式。

最后，你不明白 quote 和 unquote 实际上在做什么。

urllib.quote() 和 urllib.unquote() 仅用于 URL 的 path_info 部分，即[http://file.fir.net/](http://file.fir.net/)之后的所有内容。

urllib.quote() 用百分比编码替换字符串参数中“在 URL 中不安全”的所有内容。这意味着将导致问题的每个字符（例如：~[SPACE] 等）使用 %BYTES_IN_HEX 格式。

由于 [:] 在 URL 的路径部分中是不安全的，因此 quote() 将使用它的百分比编码对其进行编码。

所有这些意味着您不应该将整个 URL 直接传递到 quote() 中，除非您碰巧想要将 URL 实际编码到 URL 的 path_info 部分。

解决您的问题的步骤是这样的：

1.  修复文件名编码以使用可打印的内容来帮助您调试。
2.  urllib.unquote() 一次以获取正常的 URL。
3.  当您获得未引用的 URL 时，首先将其传递给 urlparse.urlparse() 以将组件分解为相应的部分。
4.  urllib.unquote() 文件名部分。
5.  现在您可以检索原始文件名，您可以继续做任何您需要做的事情。

参考：

[http://docs.python.org/library/urlparse.html](http://docs.python.org/library/urlparse.html)

[http://docs.python.org/library/urllib.html](http://docs.python.org/library/urllib.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:23:06.870

答案在[有关引用方法的文档中](http://docs.python.org/library/urllib.html#urllib.quote)：

> ... 从不引用字母、数字和字符“_.-”。...

`a`并且`a1`有所不同，因为`a`可能没有使用引用`quote()`，因此引用的字符比需要的要多。仍然是有效的`a1`带引号的字符串，但有些字符没有被引用，因为它们不必这样做。

# php - 使用 file_get_contents() / PHP 在 Geolocation 中进行字符编码

> ID：10071155
> 
> 赞同：1
> 
> 时间：2012-04-09T09:11:29.713
> 
> 标签：php, mysql, character-encoding, geolocation, file-get-contents

我这样称呼谷歌地理定位服务：

```
 $querystring = "http://maps.googleapis.com/maps/api/geocode/json?sensor=false&latlng=".$row['lat'].",".$row['lng'];

        $context = stream_context_create(array(
            'http' => array(
                'timeout' => 10
            )
        ));

        $f = file_get_contents($querystring, 0, $context);
        $f = json_decode($f);

        if(!isset($f->status) || $f->status != 'OK') continue;

        $f = $f->results[0];
        $location = $f->formatted_address; 
```

然后我将位置插入数据库：

```
 //add the location to the database
        $sql = "INSERT INTO `wp_postmeta`
            (`meta_id`, `post_id`, `meta_key`, `meta_value`)
            VALUES
            (
                NULL,
                '".intval($row['ID'])."',
                'location',
                '".mysql_real_escape_string($location)."'
            )";
        if($location)   $insert = mysql_query($sql); 
```

问题：当我编辑 wordpress 帖子时，有些字符显示不好。例如“R. Hilário Riberio, 41-243 - PraÃ§a da Bandeira, Rio de Janeiro, 20270-180, Brazil”应该是“R. Hilário Riberio, 41-243 - Praça da Bandeira, Rio de Janeiro , 20270-180, 巴西"

我在网站上使用 UTF-8 作为字符编码。但这无关紧要，因为 phpMyAdmin 显示数据也以损坏的字符输入到数据库中。

如何设置正确的字符编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:17:00.830

用于[`mysql_set_charset`](http://php.net/mysql_set_charset)将**数据库连接编码**设置为`'utf8'`，否则 MySQL 不知道您正在插入 UTF-8 编码的数据。有关更多信息，请参阅[在 Web 应用程序中处理 Unicode](http://kunststube.net/frontback)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:33:51.207

试试这个：

*   首先，让我们检查一下您的 PHP+浏览器是否与 UTF-8 一起正常工作，以便调试真正的问题。将其放在您的 PHP 文件中并在您的浏览器中进行测试：

    ```
    echo 'Filosofía: φιλοσοφία'; 
    ```

    您应该能够像这里显示的那样阅读它（西班牙语和希腊语）

*   确定 UTF-8 正常工作后，输出`$f`数组的内容：

    ```
    echo "<pre>\n" . print_r($f, true) . "\n</pre>"; 
    ```

    检查内容是否看起来乱码。

*   确保你告诉 MySQL 你想使用 UTF-8：

    ```
    mysql_set_charset('utf8'); 
    ```

    将其放在函数*之后*`mysql_connect()`。

# php - 使用 preg_replace 匹配所有 URL 变体

> ID：10071163
> 
> 赞同：0
> 
> 时间：2012-04-09T09:12:12.933
> 
> 标签：php, regex, preg-replace

我看到这个正则表达式来匹配和替换 url。

```
$string2= preg_replace("#\b(([\w-]+://?|www[.])[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#", "", $string2); 
```

它适用于大多数 url 格式，除了：example.com（即没有 http 和 www 的 url）。

已尝试对其进行调整以使其匹配所有 example.com 格式，但没有成功。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:22:16.987

您是否尝试过：

```
$string2= preg_replace("#\b(([\w-]+://)?(www[.])?[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#", "", $string2); 
```

我已经搞砸了你的分组，所以你可能需要再次修复它..

# sql-server-2008 - SQL Server T-SQL - 在选择期间将 INT 例如 201211 值转换为 2012 年 11 月

> ID：10071166
> 
> 赞同：0
> 
> 时间：2012-04-09T09:12:34.313
> 
> 标签：sql-server-2008, datetime, date-formatting

只是想知道是否有人可以帮助我将格式为 YYYYMM 的年/月 INT 列格式化为一个用户友好的日期，例如一月、二月而不是数字。

几个例子：

201101 至 2011 年 1 月
201312 至 2013 年 12 月

我可以不用担心子串出组件，我只是不知道如何将 01 转为 Jan。

编辑：

根据@Karl 的回答，这就是我想出的 - 它非常难看，但它有效：

```
DECLARE @Test INT
SET @Test = 201206

SELECT SUBSTRING(DATENAME(month, DATEADD(month, CAST(SUBSTRING(CAST(@TEST AS VARCHAR), 5, 2) AS INT) - 1 , CAST('2008-01-01' AS datetime))),1,3) + ' ' + SUBSTRING(CAST(@Test AS VARCHAR),1,4) as Test 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:06:13.180

只是另一种方法（转换后删除一天部分）：

```
declare @test int;

set @test=201212

select substring(CONVERT(varchar(11),CONVERT(date, cast (@test * 100 + 1 as varchar(8)), 112),106),4,8) 
```

# asp.net - Silverlight：在将文件上传到 URL 期间，如何绕过浏览器内受信任的应用程序限制？

> ID：10071170
> 
> 赞同：0
> 
> 时间：2012-04-09T09:12:57.847
> 
> 标签：asp.net, silverlight, silverlight-5.0, trusted

我已经构建了一个**Silverlight 5**应用程序，它允许用户将项目拖放到选定区域并将它们上传到特定 URL。**它是一个 HTML 页面，通过object**标记在 div 内引用**xap**文件（包含 Silverlight 代码）。目的是当用户将一个元素拖到那个 div 中时，该元素应该被上传到指定的服务器。

 **问题是要上传拖动的项目，我需要调用**FileInfo**的**getFullName()**方法，并且它需要用户被**信任**。由于 Silverlight 应用程序将在 HTML 页面的 div 内运行，我假设它是**浏览器内**访问的情况，根据[本文](http://msdn.microsoft.com/en-us/library/gg192793%28v=vs.95%29.aspx)，它*需要更改最终用户的 IE 设置*。要求用户更改他的注册表项以上传文件显然不是一种选择。

有没有办法摆脱这种情况（也就是说，如果我正确理解了这种情况）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:38:41.850

您无需调用`FileInfo.getFullName()`即可将文件上传到服务器。相反，您调用该`FileInfo.OpenRead()`方法，该方法返回一个读取文件数据的流。

[可以在此处](http://www.wintellect.com/CS/blogs/jprosise/archive/2009/11/26/silverlight-4-s-new-drag-and-drop-support.aspx)找到对用户提供的文件使用拖放操作的示例。**

# c# - DevExpress 无日日期选择器

> ID：10071174
> 
> 赞同：2
> 
> 时间：2012-04-09T09:13:12.280
> 
> 标签：c#, .net, winforms, devexpress

当拾取日期时，我想赶上活动，当时选择
当天选择控制应该关闭
（我只想选择年份和月份**，而不是当天**）

并仅在文本上显示月份和年份（显示值）

如果这是可能的，请
提前感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:21:47.540

有很多关于这个和各种 DevExpress 控件的问题/帖子。我不确定您是否正在查看 winforms、asp 等……但据我所知，这仍然是 devexpress 控件中未内置的功能。

这是[其中一篇文章](http://devexpress.com/Support/Center/p/CQ60183.aspx)，其中包括一个 popupcontainer 控件的示例解决方案，用于在 winforms 中完成该任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T04:38:24.990

在 DevExpress 12.2 上，这个任务可以通过 set `DateEdit`=> `Properties`=> `VistaCalendarViewStyle`to 来完成`YearView, YearsGroupView, CenturyView`。

我不知道它是否适用于低版本。

# c# - 使用 jquery 调用 FormsAuthentication.SignOut() 方法

> ID：10071179
> 
> 赞同：2
> 
> 时间：2012-04-09T09:13:37.147
> 
> 标签：c#, asp.net

我`Asp.Net/C#`在我的项目中使用。我正在使用`Forms Authentication`。目前我`FormsAuthentication.SignOut()`点击 Asp.Net 按钮调用。效果很好，但我的要求是我需要从水平菜单选项中注销用户

> 登出

`FormsAuthentication.SignOut()`那将是 Html menu ，所以当用户从菜单栏中单击 Logout 时如何调用方法。是否有任何可能的解决方案或任何其他技术。欢迎任何建议。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T09:35:48.497

`FormsAuthentication.SignOut()`是服务器端代码，您不能直接从客户端（即浏览器）调用它 - 相反，您需要创建一个 URI 来为您做同样的事情。

例如，您可以拥有将调用上述代码的 AJAX 服务，或者简单地说，您可以拥有将调用`FormsAuthentication.SignOut()`的logout.aspx 页面`page_load`。可以从 jquery 调用这样的 URI 来得到你想要的。

在您的情况下，您应该在注销菜单中有一个指向注销 aspx 页面的链接（或在菜单单击中，写`document.location = "/logout.aspx"`这基本上意味着导航到注销页面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:18:29.880

干得好：

```
 $('#logout').click(function () {
    $.ajax({
        url: '/logout',
        success: function () {
            document.location = '/logged_out';
        }, error: function () { 
            alert('Logout failed');
        }
    });
    return false;
  }); 
```

# delphi - FastMM4，如何读取日志文件？

> ID：10071185
> 
> 赞同：4
> 
> 时间：2012-04-09T09:14:14.617
> 
> 标签：delphi, memory-leaks, logging, delphi-2006, fastmm

我正在开发一个软件，所以我刚刚开始在我的项目中使用 FastMM4（真正的）。

我在网上找到了有关如何获取`line number`FastMM4 的信息，我得到了行号，但我可以弄清楚日志中的其他信息是什么意思？

我在日志文件中有这个

```
This block was allocated by thread 0x15F8, and the stack trace (return addresses) at     the time was:
402E86 [system.pas][System][System.@GetMem][2648]
403A3B [system.pas][System][System.TObject.NewInstance][8824]
403DAA [system.pas][System][System.@ClassCreate][9489]
403A70 [system.pas][System][System.TObject.Create][8839]
46A257 [u_home.pas][u_home][u_home.TForm1.SpeedButton1Click][80] {<-memory leak is here, but what are the Other detections?}
443AAC [Controls.pas][Controls][Controls.TControl.Click][5226]
46958B [Buttons.pas][Buttons][Buttons.TSpeedButton.Click][1211]
46956B [Buttons.pas][Buttons][Buttons.TSpeedButton.MouseUp][1204]
443FB2 [Controls.pas][Controls][Controls.TControl.DoMouseUp][5352]
441BA0 [Controls.pas][Controls][Controls.TControl.SetMouseCapture][4379]
444042 [Controls.pas][Controls][Controls.TControl.WMLButtonUp][5364]

The block is currently used for an object of class: TStringList

The allocation number is: 440 
```

在这`leak`就是

```
 46A257 [u_home.pas][u_home][u_home.TForm1.SpeedButton1Click][80] {<-memory leak is here, but what are the Other detections?} 
```

**我的代码**

```
 procedure TForm1.SpeedButton1Click(Sender: TObject);
  var
  str : TStringList;
  begin
  str := TStringList.Create;  {<--im not freeing the, so leak}

  end; 
```

![在此处输入图像描述](../Images/121f9182f283841c79c432e7af4b84d5.png)

这是`call stack` ![在此处输入图像描述](../Images/4064ac41d7523af85f7783428c867756.png)

我在网上搜索，但我不知道其他检测是什么......

```
402E86 [system.pas][System][System.@GetMem][2648]
403A3B [system.pas][System][System.TObject.NewInstance][8824]
403DAA [system.pas][System][System.@ClassCreate][9489]
403A70 [system.pas][System][System.TObject.Create][8839]

{Other then this}
46A257 [u_home.pas][u_home][u_home.TForm1.SpeedButton1Click][80] {<-memory leak is here, but what are the Other detections?}
{Other then this}

443AAC [Controls.pas][Controls][Controls.TControl.Click][5226]
46958B [Buttons.pas][Buttons][Buttons.TSpeedButton.Click][1211]
46956B [Buttons.pas][Buttons][Buttons.TSpeedButton.MouseUp][1204]
443FB2 [Controls.pas][Controls][Controls.TControl.DoMouseUp][5352]
441BA0 [Controls.pas][Controls][Controls.TControl.SetMouseCapture][4379]
444042 [Controls.pas][Controls][Controls.TControl.WMLButtonUp][5364] 
```

我正在使用`delphi 2006`

我也打开并尝试`delphi 6, delph 7`过

**检查** 我发现这与 fastMM$ 检测和一些已经在 delphi 中的泄漏的注册有关。 [如何使用 fastMM 追踪棘手的内存泄漏？](https://stackoverflow.com/questions/271850/how-to-track-down-tricky-memory-leak-with-fastmm) 这用于注册泄漏，但它们是错误吗？ [使用 FastMM4，如何注册泄露的字符串？](https://stackoverflow.com/questions/5963001/using-fastmm4-how-to-register-leaked-string)

还有[FastMM4、Delphi6、TApplication 的泄漏？](https://stackoverflow.com/questions/4967432/fastmm4-delphi6-leak-of-tapplication)

或者`are they just the steps leading to the memory leak?`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T10:38:28.807

您在日志中拥有的是导致内存分配泄漏的调用堆栈。

您可以在问题的调用堆栈中看到它有多么有用。想象一下，您只有顶行，即导致泄漏的调用

```
402E86 [system.pas][System][System.@GetMem][2648] 
```

这些信息本身几乎没有用，因为所有堆分配都经过`GetMem`。正是调用堆栈将您指向导致调用`GetMem`. 这就是查明导致泄漏的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T17:53:57.253

FastMM 无法猜测代码背后的意图，也无法确定导致内存分配的指令应该有相应的指令来释放它。

请记住，FastMM 仅记录在执行代码期间完成的所有内存分配。
它不知道泄漏发生的原因、方式或位置，只是在您的应用程序关闭时您还没有释放这个特定的分配并且一切都应该是干净的。

因此，当报告泄漏时，它实际上是显示的分配。
FastMM 不了解您的应用程序，并且只能显示整个调用链，该调用链导致您在代码中分配内存的特定点（通常是大量 GetMem 调用之一）。
可以通过爬上梯子找到有意义的信息，直到找到需要一些内存的更高级别的指令，例如 a`TButton.Create`并查看该特定 Button 是否被释放（泄漏其所有内容），或者像 a`TMyBadButton.Create`创建一些 AltBitmap 但永远不会释放它。
在一种情况下，泄漏是在应用程序代码中创建一个按钮而不释放它，在另一种情况下，它是在`TMyBadButton`组件代码中。

**更新**：您可能会发现这个旧的 CodeRage 会话[Memory Leaks for Dummies很有用](http://video.codegear.com/CodeRageIIArchives/Day4/FrancoisGaillard_MemoryLeaks_English.zip)

# c - C中参数数量未知的函数

> ID：10071186
> 
> 赞同：17
> 
> 时间：2012-04-09T09:14:14.833
> 
> 标签：c, function, variadic-functions

我如何编写（如果可能的话......）一个在 C99 中采用未知数量参数的函数（返回类型是常量）？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-09T09:19:28.943

是的，您可以在 C 中使用所谓的可变参数函数来实现。例如，标准[`printf()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/printf.html)和[`scanf()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/scanf.html)函数就是这样做的。

将省略号（三个点）作为最后一个参数，您希望参数数量可变。

要访问参数，请包括`<stdarg.h>`标题：

```
#include <stdarg.h> 
```

然后你有一个特殊的类型`va_list`，它给你传递的参数列表，你可以使用`va_start`,`va_arg`和`va_end`宏来遍历参数列表。

例如：

```
#include <stdarg.h>

int myfunc(int count, ...)
{
   va_list list;
   int j = 0;

   va_start(list, count); 
   for(j=0; j<count; j++)
   {
     printf("%d", va_arg(list, int));
   }

   va_end(list);

   return count;
} 
```

示例调用：

```
myfunc(4, -9, 12, 43, 217); 
```

一个完整的例子可以在[Wikipedia](http://en.wikipedia.org/wiki/Variadic_function#Variadic_functions_in_C.2C_Objective-C.2C_C.2B.2B.2C_and_D)上找到。

示例中的`count`参数告诉被调用函数传递了多少参数。并通过格式字符串找到它，但一个简单的`printf()`参数也可以做到这一点。有时，代码使用标记值，例如负整数或空指针（参见 示例）。`scanf()``count`[`execl()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/execl.html)

# c# - 在 Rx 中选择多个

> ID：10071187
> 
> 赞同：9
> 
> 时间：2012-04-09T09:14:22.327
> 
> 标签：c#, .net, system.reactive

请任何人告诉我`SelectMany`Rx 中的操作员是如何工作的。我也不知道更多关于 Linq 中的这个运算符。

请借助一个简单的示例来解释这一点，以及在什么情况下我们将在 Rx 中使用此运算符。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-11T01:18:15.177

SelectMany 只是：

```
source.Select(selector).Merge(); 
```

换句话说，它将源输入选择为 Observable 流，然后将每个 Observable 展平为结果流。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-09T12:22:57.157

`SelectMany`将投影和展平结合到一个步骤中。假设您有许多列表`{ {1, 2}, {3, 4, 5}, { 6, 7 } }`，可以用来`SelectMany`将其展平为单个列表，例如：`{ 1, 2, 3, 4, 5, 6, 7}`

`SelectMany`在 Rx 中可以将多个序列展平为一个 observable（实际上有几个重载）。

举个实际的例子，假设你有一个函数`DownloadFile(filename)`给你一个 Observable，当文件完成下载时它会产生一个值。你现在可以写：

```
string[] files = { "http://.../1", "http://.../2", "http://.../3" };

files.ToObservable()
                 .SelectMany(file => DownloadFile(file))
                 .Take(3)
                 .Subscribe(c => Console.WriteLine("Got " + c) , ()=>  Console.WriteLine("Completed!")); 
```

的所有 3 个 observable`DownloadFile`都被扁平化为一个，因此您可以等待 3 个值到达以查看所有下载已完成。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-11T22:22:35.773

我发现这个简短的视频有助于理解 SelectMany for Rx（以及作为大理石图的更高级使用）：[http ://channel9.msdn.com/Blogs/J.Van.Gogh/Reactive-Extensions-API-in-depth -SelectMany](http://channel9.msdn.com/Blogs/J.Van.Gogh/Reactive-Extensions-API-in-depth-SelectMany)

# c# - 使用 C# 检查自定义类中的数据是否已更改

> ID：10071188
> 
> 赞同：1
> 
> 时间：2012-04-09T09:14:43.030
> 
> 标签：c#, arrays, bytearray

我很好奇查看客户 C# 类中的数据是否发生变化的最佳方法是什么（从 CPU 的角度来看，最好是更快的方法）？

该类由各种基本类型组成：`int`、`long`、`string`等以及`List< string >`和`List < uint >`类型。

我的想法是将此类数据转换为 byte[] 数组并对结果执行 SHA1，但是将每个成员转换为 byte 数组似乎是一项相当长的工作，所以我想知道是否有更快的方法。我也想过序列化它，但对于我的目的来说这不是一个矫枉过正的事情。（在我的空类上生成的序列化字节数组大约是 6000+ 字节！）

不管怎样，你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T09:18:28.600

您可以`INotifyPropertyChanged`在您的类中实现接口。

这样，如果发生变化，所有注册的方法都会被触发。

看看[如何实现它](http://msdn.microsoft.com/en-us/library/ms743695.aspx)

# kundera - 无法运行昆德拉示例应用程序

> ID：10071193
> 
> 赞同：0
> 
> 时间：2012-04-09T09:15:06.073
> 
> 标签：kundera

我无法使用 Kundera Sample 运行示例应用程序。

例外：

```
Exception in thread "main" javax.persistence.PersistenceException: invalid persistence.xml
    at com.impetus.kundera.loader.PersistenceXMLLoader.getDocument(PersistenceXMLLoader.java:107)
    at com.impetus.kundera.loader.PersistenceXMLLoader.findPersistenceUnits(PersistenceXMLLoader.java:142)
    at com.impetus.kundera.loader.PersistenceUnitLoader.findPersistenceMetadatas(PersistenceUnitLoader.java:130)
    at com.impetus.kundera.loader.PersistenceUnitLoader.getPersistenceMetadata(PersistenceUnitLoader.java:78)
    at com.impetus.kundera.loader.PersistenceUnitLoader.load(PersistenceUnitLoader.java:63)
    at com.impetus.kundera.loader.ApplicationLoader.load(ApplicationLoader.java:43)
    at com.impetus.kundera.KunderaPersistence.initializeKundera(KunderaPersistence.java:95)
    at com.impetus.kundera.KunderaPersistence.createEntityManagerFactory(KunderaPersistence.java:72)
    at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source)
    at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source)
    at com.tcs.main.KunderaExample.main(KunderaExample.java:19)
Caused by: org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'persistence'.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1887)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:685)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:400)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:626)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3095)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:921)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:510)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:807)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:107)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:225)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:283)
    at com.impetus.kundera.loader.PersistenceXMLLoader.getDocument(PersistenceXMLLoader.java:103)
    ... 10 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:16:36.973

This is related to loading remotel persistence.xsd from sun java site. Change this in your persistence.xml

> https://raw.github.com/impetus-opensource/Kundera/Kundera-2.0.4/kundera-core/src/test/resources/META-INF/persistence_2_0.xsd" version="2.0">

2.0.6 release will also load it locally.

-Vivek

# objective-c - CATextLayer + NSAttributtedString + CTParagraphStyleRef

> ID：10071198
> 
> 赞同：5
> 
> 时间：2012-04-09T09:15:30.160
> 
> 标签：objective-c, ios, core-animation, core-text, catextlayer

我想要一些带有自定义行距的文本，所以我写了一个属性字符串`CTParagraphStyleAttributte`并将其传递给我的`CATextLayer`：

```
UIFont *font = [UIFont systemFontOfSize:20];
CTFontRef ctFont = CTFontCreateWithName((CFStringRef)font.fontName,
                                        font.pointSize, NULL);
CGColorRef cgColor = [UIColor whiteColor].CGColor;
CGFloat leading = 25.0;
CTTextAlignment alignment = kCTRightTextAlignment; // just for test purposes
const CTParagraphStyleSetting styleSettings[] = {
    {kCTParagraphStyleSpecifierLineSpacingAdjustment, sizeof(CGFloat), &leading},
    {kCTParagraphStyleSpecifierAlignment, sizeof(CTTextAlignment), &alignment}
};
CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(styleSettings, 2));
NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:
                            (id)ctFont, (id)kCTFontAttributeName,
                            (id)cgColor, (id)kCTForegroundColorAttributeName,
                            (id)paragraphStyle, (id)kCTParagraphStyleAttributeName,
                            nil];
CFRelease(ctFont);
CFRelease(paragraphStyle);

NSMutableAttributedString *attrStr = [[NSMutableAttributedString alloc] 
                                                 initWithString:string
                                                     attributes:attributes];
_textLayer.string = attrStr;
[attrStr release]; 
```

但是行高没有改变。我想我在这里遗漏了一些东西，但我不知道是什么。

我已经尝试过`kCTParagraphStyleSpecifierLineSpacingAdjustment`，`kCTParagraphStyleSpecifierLineSpacing`但它们中的任何一个似乎都不起作用（？）。我还尝试使用`kCTParagraphStyleSpecifierAlignment`（我知道`CATextLayer`有一个属性）来设置对齐方式，只是为了测试`kCTParagraphStyleAttributeName`确实有效，但它没有。

我注意到即使我传递了一些疯狂的值（例如：）`CTParagraphStyleCreate(styleSettings, -555);`，这也会让我问自己：是否`CATextLayer`支持段落属性？如果是这样，我在这里错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:55:00.817

我试过你的代码，将 NSAttributedString 放在 CATextLayer 中，它忽略了格式，如你所说。

然后我尝试使用 UIView 方法将完全相同的属性字符串绘制到 UIView`drawRect`方法中`CTFrameDraw`，它遵循了您的所有格式。我只能假设 CATextLayer 忽略了它的大部分格式。CATextLayer[类参考](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CATextLayer_class/Introduction/Introduction.html)有许多关于它为了提高效率所做的事情的警告。

如果您真的需要绘制到 a `CALayer`，而不是 a `UIView`，您可以创建自己的 CALayer 子类或委托并在那里进行绘图。

```
- (void)drawRect:(CGRect)rect
{
    //
    // Build attrStr as before.
    //

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGRect bounds = [self bounds];

    // Text ends up drawn inverted, so we have to reverse it.
    CGContextSetTextMatrix(ctx, CGAffineTransformIdentity);
    CGContextTranslateCTM( ctx, bounds.origin.x, bounds.origin.y+bounds.size.height );
    CGContextScaleCTM( ctx, 1, -1 );

    // Build a rectangle for drawing in.
    CGMutablePathRef path = CGPathCreateMutable();
    CGPathAddRect(path, NULL, bounds);

    // Create the frame and draw it into the graphics context
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef) attrStr);
    CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), path, NULL);
    CFRelease(framesetter);
    CFRelease(path);

    // Finally do the drawing.
    CTFrameDraw(frame, ctx);
    CFRelease(frame);          
} 
```

# php - 比较两个数组并在PHP中合并

> ID：10071202
> 
> 赞同：1
> 
> 时间：2012-04-09T09:15:38.647
> 
> 标签：php, arrays

我有两个数组：

```
$array1 = array(1=>1,10=>1,12=>0,13=>13);
$array2 = array(1=>"Hello",10=>"Test",12=>"check",13=>"error"); 
```

这里 $array1 有键和值。现在我想从 $array1(as 1) 中获取第一个值，我想检查这是否在这个 array 中重复。

这里 1 重复了两次，所以我想取两个键 1,10 并从 $array2 中显示这些键的相应值。如果 $array1 中的值不重复，那么我只想显示 $array2 中此键的值。

我想得到如下输出：

```
Hello Test
check
error 
```

这意味着在 $array1 中，1,10 个键具有相同的值，因此值 1 和来自 $array2 的值​​ 10 被合并然后显示。

就像 12 有 0 一样，这不会重复，所以只需从 $array2 中获取 12 的值。

比如13。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T10:11:06.353

```
<?php

$array1 = array(1=>1,10=>1,12=>0,13=>13);
$array2 = array(1=>"Hello",10=>"Test",12=>"check",13=>"error");
$groupedKeys = array();
foreach($array1 as $key=>$arr){
   $groupedKeys[$arr][] = $key;
}
foreach($groupedKeys as $key => $groupedKeyArr){
    foreach($groupedKeyArr as $groupedKey){
        echo $array2[$groupedKey];
    }
    echo "<br /> ";
}

?> 
```

[http://codepad.org/9R9s5lTM](http://codepad.org/9R9s5lTM)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:43:39.027

有一个内置函数返回一个数组，其中包含重复值的次数[http://php.net/manual/en/function.array-count-values.php](http://php.net/manual/en/function.array-count-values.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T09:21:26.823

这真的很粗糙，但一个简单的方法可能是：

```
<?

$array1 = array(1=>1,10=>1,12=>0,13=>13);
$array2 = array(1=>"Hello",10=>"Test",12=>"check",13=>"error");

$prev = $array1[1];

foreach($array1 as $key => $val)
{
    if($val != $prev && $key != 1)
    {
        echo '<br />';
    }

    echo $array2[$key].' ';

    $prev = $val;
}

?> 
```

示例：[http ://codepad.org/OpLdtStp](http://codepad.org/OpLdtStp)

这假设你是第一个关键总是`1`顺便说一句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T09:37:37.823

我为您提供了一个函数返回一个数组，其中一个值在数组中重复的次数（作为值）和值作为键。进一步的任务并不困难。

```
function check_number_of_times_elements_occur_in_array($a)//returns values of array as keys, associating values being their total occurences in the array
{
$r=array();
foreach($a as $v)
    ++$r[$v];
return $r;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T09:55:50.827

我想这对你有用..

```
function test($array1,$array2) {
$repeated_values = array_count_values($array1);
foreach($repeated_values as $key => $value){
    if($value > 1) {
        foreach($array1 as $key1 => $value1){
            if($key == $value1){
                $repeated_values_keys[] = $key1;
            }
        }
    }
}
$str_top = "";
foreach($repeated_values_keys as $k){
    $str_top .= $array2[$k]." ";
}
echo $str_top.'<br/>';
foreach($array2 as $key2 => $value){
    if(!in_array($key2,$repeated_values_keys)){
        echo $value.'<br/>';
    }
} 
```

}

# android - Android-Ndk 与交叉编译？两者都有效，那么Android NDK需要什么？

> ID：10071204
> 
> 赞同：3
> 
> 时间：2012-04-09T09:16:01.400
> 
> 标签：android, linux, android-ndk, cross-compiling

我可以交叉编译任何 C/C++ 应用程序，静态链接它 Linux 库并在 android 上运行它。那么 Android-ndk 需要什么？Android-ndk 将我们限制为具有 gnu libc.Isn 的小子集的仿生直接交叉编译应用程序并通过 Android shell 运行它们不是更好的主意吗？交叉编译有什么我看不到的限制吗？这个网址：[Linux 应用程序可以在 Android 中运行吗？](https://stackoverflow.com/questions/1636901/can-linux-apps-be-run-in-android)在某种程度上回答了我的问题，但最终让我感到困惑和不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:36:17.107

[我认为这对Android-NDK](http://developer.android.com/sdk/ndk/index.html)来说已经足够了

Android NDK 是 Android SDK 的配套工具，可让您在本机代码中构建应用程序的性能关键部分。**它提供了头文件和库，允许您在使用 C 或 C++ 编程时构建活动、处理用户输入、使用硬件传感器、访问应用程序资源等。**如果您编写本机代码，您的应用程序仍会打包到 .apk 文件中，并且它们仍会在设备上的虚拟机内运行。基本的 Android 应用程序模型不会改变。

**NDK 提供：**

*   一组用于从 C 和 C++ 源代码生成本机代码库的工具和构建文件

*   一种将相应的原生库嵌入到可部署在 Android 设备上的应用程序包文件 (.apk) 中的方法

*   从 Android 1.5 开始，Android 平台的所有未来版本都将支持一组原生系统头文件和库。使用本机活动的应用程序必须在 Android 2.3 或更高版本上运行。

这个东西你在使用 arm 工具链的其他交叉编译中找不到..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:31:04.940

如链接[http://developer.android.com/sdk/ndk/index.html](http://developer.android.com/sdk/ndk/index.html)中所述， NDK 是应用程序开发人员创建性能敏感的本机代码的伴侣。NDK 暴露了一些在一般 Linux 环境中找不到的 Android 原生实现。其中一些包括 Android/Bitmap、Android/nativeWindow 等。使用这些 Android 原生应用程序可以加快 CPU 密集型进程，例如图像的一些压缩或解压缩。

即使外部交叉编译的可执行文件可以在 Android 中运行，也不能保证标准库实现的版本是相同的。NDK 提供了一个更简单且与 Android 兼容的工具链和其他资源，对于应用程序开发人员来说，使用它们比为他们的用例寻找兼容的交叉编译器要容易得多。

# ruby-on-rails - “使用 Rails 进行敏捷 Web 开发”一书：未应用 CSS

> ID：10071207
> 
> 赞同：2
> 
> 时间：2012-04-09T09:16:13.607
> 
> 标签：ruby-on-rails, css, ruby

我刚刚通过阅读著名的实用书架书籍“Agile web development with rails”开始潜入Rails的世界。

到目前为止，我确实遵循了所有示例，但现在我被困在第 85 页（pdf 版本）上，应该将自定义 CSS 添加到项目中。

我将 css 文件（可以在[此处](http://media.pragprog.com/titles/rails4/code/rails30/depot_b/public/stylesheets/depot.css)获得）放在“/public/stylesheets/”文件夹中。

但是当我在浏览器中访问 /products 页面时，CSS**并未**应用于产品列表页面。页面的所有内容都显示出来了，只是缺少 CSS 格式。该页面[由此](http://media.pragprog.com/titles/rails4/code/rails30/depot_b/app/views/products/index.html.erb).erb 文件生成。

你们中的任何人在按照书中的示例进行操作时是否遇到过同样的问题？有人知道出了什么问题吗？

非常感谢您的帮助并享受这一天！

托比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:26:45.910

本书的最新版本适用于 Rails 3.2（带有 Asset Pipeline）。你应该把你的样式表放在`/app/assets/stylesheets`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-28T18:22:58.993

我正在使用 Rails 的敏捷 Web 开发 - 第 4 版。我能够通过 `<%= stylesheet_link_tag "application", :media => "all"%>`在内部包含文件`/app/view/layouts/application.html.erb`并将`depot.css.scss`文件放入`app/assets/stylesheets/depot.css.scss`. 这对我来说非常有效。

# batch-processing - 一些批处理文件的东西有问题，没有做它应该做的事情，无法发现语法错误

> ID：10071221
> 
> 赞同：0
> 
> 时间：2012-04-09T09:17:56.693
> 
> 标签：batch-processing, batch-file

所以，我正在批量编写一个计算机加速器，我对这个问题感到困惑：

```
@echo off
cls
color 02
:licence
title Computer Speeder 2012 (Free licence)
cls
echo This is the free version of Computer Speeder 2012.
echo.
echo Do you wish to license this copy? [Y]es or [N]o.
choice /c NY /n
if ERRORLEVEL 2 goto license
if ERRORLEVEL 1 goto startup1
:license
dir | find "validatecode.txt" > if exist "validatecode.txt"
goto bam
) else (
goto else
:bam
cls
echo Type in your lisencing code to validate this
echo copy to upgrade to the full version:
echo.
set /p vd=""
:else
cls 
echo You do not have a validation file on your computer,
echo if you purchased the full version you probably
echo deleted the file. Check the recycle bin, check you
echo put it in the correct path or re-purchase the
echo software because it has an individual code.
pause
goto startup1 
```

出于某种奇怪的原因，它按时间顺序执行所有这些代码：首先它询问您是否要许可该软件的副本。如果您按 Y，则需要您获得许可。然后它执行行 dir | 找到“validatecode.txt”>如果存在“validatecode.txt”等等。然而，它去 bam 然后去 else。代码中没有其他缺陷，我找不到任何语法错误，你们能解释一下我做错了什么吗？我是个菜鸟：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T21:05:25.803

尝试替换这个：

```
:lisence
dir | find "validatecode.txt" > if exist "validatecode.txt"
goto bam
) else (
goto else 
```

有了这个：

```
:lisence
if exist "validatecode.txt" goto bam
goto else 
```

说明：您需要测试 Find 进程的错误级别以使您的代码可能工作，并且重定向器 '>' 只创建一个名为 'if' 的文件，其中包含单词*exists*和*vaildatecode.txt*。

 *您的 DIR 命令只会查看执行目录，但您的“bam”子程序暗示您打算搜索硬盘驱动器？真的？如果是这样，我的“如果存在”命令应更改为：

> dir /s/b validatecode.txt && goto bam

您似乎没有使用文件中的信息，因此如果您需要搜索整个硬盘驱动器，此命令将执行它，并在逻辑上转到正确的子程序。

该片段提供了对本地目录中名为 validatecode.txt 的文件的测试，如果找到，则执行 goto 到标签 bam。如果该文件不存在，焦点将移至下一行，该行将转到标签 :else。

您还需要以不同的方式完成您的脚本。就目前而言，如果找到 validatecode.txt，您将同时执行 'bam' 和 'else'。你应该放置一个像 :exit 这样的最终标签（:eof 是保留的），并将 goto :exit 命令作为每个子例程的最后一行。

最后，您对子例程 Startup1 的调用将始终失败，因为您没有名为 Startup1 的标签。

从流程的角度来看，如果用户不想许可他们正在使用的副本，您似乎无法退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:38:43.240

如果你想让程序在执行后停止`:bam`，你应该放一个

`goto:EOF`之后`set /p vd="`。

```
:bam
cls
echo Type in your lisencing code to validate this
...
set /p vd=""
goto:EOF

:else
cls
... 
```*

# php - PHP裁剪图像的形状不是方形，如椭圆形或圆形

> ID：10071222
> 
> 赞同：4
> 
> 时间：2012-04-09T09:17:59.527
> 
> 标签：php, image, image-processing, gd, crop

我想用 PHP 裁剪图像。长方形的裁剪很常见，也很容易做到。您能指导我如何将图像裁剪为方形以外的形状，例如椭圆形或圆形。 ![裁剪](../Images/22e4c34eaeedbc693acb85e64393ff58.png)

![原始图像](../Images/d4d67b62aeb22556990470158f31ddab.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T09:39:36.137

您实际上可以这样做`ImageMagick`...参见[将图像裁剪或蒙版](https://stackoverflow.com/questions/999251/crop-or-mask-an-image-into-a-circle)成圆形和[将图像裁剪成圆形并添加边框](https://stackoverflow.com/questions/2223437/crop-image-into-circle-and-add-border)以获得很好的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:42:33.067

除了前面的答案，你甚至可以用 Image Magick 的晕影效果来模糊边框，找 VignetteImage 方法。

# c# - WPF中的backgroundworker类

> ID：10071223
> 
> 赞同：0
> 
> 时间：2012-04-09T09:18:01.250
> 
> 标签：c#, wpf, backgroundworker

我正在 WPF 中学习 backgroundworker 类。下面的代码在文件 MainWindow.xaml.cs 中

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

using System.ComponentModel;

namespace FrontEnd
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        private BackgroundWorker backGroundWorker;

        public MainWindow()
        {
            InitializeComponent();
            backGroundWorker = ((BackgroundWorker)this.FindResource("backgroundWorker"));
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {

            button1.IsEnabled = false;
            Flow pro = new Flow(20,10);
            backGroundWorker.RunWorkerAsync(pro);
        }

        private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
        {
            Flow pro = (Flow)e.Argument;
           e.Result = pro.NaturalNumbers();
        }

        private void backgroundWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            progressBar1.Value= e.ProgressPercentage;
        }

        private void backgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            if ((int)e.Result == 1) MessageBox.Show("DONE");
            progressBar1.Value = 0;
        }
    }
} 
```

下面的代码在文件 Flow.cs 中

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;

namespace FrontEnd
{
    class Flow
    {
        long i;
        //private int x,y;
        public int X
        {
            get; set;
        }
        public int Y
        {
            get; set;
        }

        public Flow(int x, int y)
        {
            X = x;
            Y = y;
        }
        public int NaturalNumbers()
        {
            for (i = 0; i < 9999; i++)
            {
                Console.WriteLine(i);
                long iteration = i * 100 / 9999;
                if ((i % iteration == 0) &&
                (backgroundWorker != null) && backgroundWorker.WorkerReportsProgress)
                {
                    backgroundWorker.ReportProgress(iteration);
                }
            }
            return 1;
        }
    }
} 
```

> 错误：当前上下文中不存在名称“backgroundWorker”

如何使进度条正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:39:01.477

这是一个有效的简单示例：

```
public partial class BackgroundWorkerPage : Page
{
    private readonly BackgroundWorker _worker = new BackgroundWorker();

    public BackgroundWorkerPage()
    {
        InitializeComponent();

        _worker.DoWork += WorkerOnDoWork;
        _worker.WorkerReportsProgress = true;
        _worker.ProgressChanged += WorkerOnProgressChanged;
    }

    private void WorkerOnProgressChanged(object sender, ProgressChangedEventArgs progressChangedEventArgs)
    {
        progressBar.Value = progressChangedEventArgs.ProgressPercentage;
    }

    private void WorkerOnDoWork(object sender, DoWorkEventArgs doWorkEventArgs)
    {
        for (int i = 0; i <= 100; i++)
        {
            Thread.Sleep(50);
            _worker.ReportProgress(i);
        }
    }

    private void Button_Click_1(object sender, System.Windows.RoutedEventArgs e)
    {
        _worker.RunWorkerAsync();
    }
}

<Grid>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <ProgressBar x:Name="progressBar" Height="23" Minimum="0" Maximum="100"/>
    <Button Grid.Row="1" Height="23" Content="Start" Click="Button_Click_1"/>
</Grid> 
```

你需要稍微改变你的代码

```
private void WorkerOnDoWork(object sender, DoWorkEventArgs doWorkEventArgs)
{
    var flow = new Flow(_worker);
    flow.NaturalNumbers();
}

internal class Flow
{
    private readonly BackgroundWorker _worker;

    public Flow(int x, int y)
    {
        X = x;
        Y = y;
    }

    public Flow(BackgroundWorker worker)
    {
        _worker = worker;
    }

    public int X { get; set; }
    public int Y { get; set; }

    public int NaturalNumbers()
    {
        for (int i = 0; i <= 9999; i++)
        {
            int iteration = i*100/9999;

            // your if(...) fails with divide by zero exception

            _worker.ReportProgress(iteration);
        }

        return 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T09:29:46.313

**介绍**

每当我们尝试在 UI 上执行一些长时间运行的操作而不冻结它时，我们需要在单独的线程中运行它。在本文中，我们将研究 BackgroundWorker 类，作为这个问题的各种解决方案之一，并通过一个简单的示例. BackgroundWorker 在单独的线程上执行操作，并在必要时向 UI 线程提供通知。直接实验

让我们创建一个 UI，如下所示

![在此处输入图像描述](../Images/7960a691fd942691b6854292dcfbf541.png)

目标是，当我们点击“Populate”按钮时，我们应该能够在“Textbox”中写一些东西。

现在让我们看看没有 BackgroundWorker 的代码

```
public partial class WithOutBackgroundThread : Form
{  
    List<Employee> lstEmp;

    public WithOutBackgroundThread()
    {
        InitializeComponent();
        lstEmp = new List<Employee>();
    }

    private void btnPopulate_Click(object sender, EventArgs e)
    {  
        GetEmployeeRecords();
        dataGridView1.DataSource = lstEmp;
        lblStatus.Text = "Work Completed";
    }

    //Prepare the data
    private void GetEmployeeRecords()
    {
        for (int i = 1; i <= 10; i++)
        {
            // Simulate a pause
            Thread.Sleep(1000);
            lstEmp.Add(new Employee { EmpId = i, EmpName = "Name" + i });
        }
    }
} 
```

代码非常简单。在“GetEmployeeRecords()”方法中，我们正在准备数据。我们引入了“Thread.Sleep(1000)”来进行延迟。在“填充”按钮单击事件中，我们正在填充网格。

但是，如果我们执行此代码，UI 将变得无响应，因此我们无法在“文本框”上执行任何任务，这是我们的目标。

从今以后，让我们将代码更改为以下

```
public partial class WithBackgroundThread : Form
{
    BackgroundWorker workerThread;
    List<Employee> lstEmp;

    public WithBackgroundThread()
    {
        InitializeComponent();

        lstEmp = new List<Employee>();
        workerThread = new BackgroundWorker();
        workerThread.DoWork += new DoWorkEventHandler(workerThread_DoWork);
        workerThread.RunWorkerCompleted += new RunWorkerCompletedEventHandler(workerThread_RunWorkerCompleted);

    }

    private void btnPopulate_Click(object sender, EventArgs e)
    {
        workerThread.RunWorkerAsync(); 
    }

    private void workerThread_DoWork(object sender, DoWorkEventArgs e)
    {
        GetEmployeeRecords();
    }

    private void workerThread_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        lblStatus.Text = "Work Completed";
        dataGridView1.DataSource = lstEmp;
    }

    //Prepare the data
    private void GetEmployeeRecords()
    {
        for (int i = 1; i <= 10; i++)
        {
            // Simulate a pause
            Thread.Sleep(1000);
            lstEmp.Add(new Employee { EmpId = i, EmpName = "Name" + i });
        }
    }
} 
```

很多新的东西。我们将一一探索。

首先，我们需要声明 BackgroundWorker 线程

```
BackgroundWorker workerThread = new BackgroundWorker(); 
```

接下来，我们需要订阅事件

```
workerThread.DoWork += new DoWorkEventHandler(workerThread_DoWork);
workerThread.RunWorkerCompleted += new RunWorkerCompletedEventHandler(workerThread_RunWorkerCompleted); 
```

第三步，我们需要实现这两个方法

```
private void workerThread_DoWork(object sender, DoWorkEventArgs e)
{
   // run all background tasks here
   GetEmployeeRecords();
}

private void workerThread_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
  //update ui once worker complete its work
  lblStatus.Text = "Work Completed";
  dataGridView1.DataSource = lstEmp;
} 
```

当我们调用“RunWorkerAsync”方法时会引发“DoWork”事件。这是我们开始执行潜在耗时工作的操作的地方。当后台操作完成、取消或引发异常时会触发“RunWorkerCompleted”事件

最后一步，从“填充”按钮单击事件中调用“RunWorkerAsync”。

```
private void btnPopulate_Click(object sender, EventArgs e)
{
    workerThread.RunWorkerAsync(); 
} 
```

“RunWorkerAsync”开始执行后台操作。

现在，如果我们运行我们的应用程序，我们将能够填充网格以及在“文本框”上写一些东西。

![在此处输入图像描述](../Images/b84afc98c6a6452a1792284122e1d7d1.png)

谢谢

# jquery - 设置 JQuery Dialog 的默认行为

> ID：10071232
> 
> 赞同：0
> 
> 时间：2012-04-09T09:18:37.990
> 
> 标签：jquery, jquery-ui

我正在使用jquery 的**对话框**api。像这样：

```
<tr>
    <td>&nbsp;</td>
    <td colspan="3">
            <a href='#' id='btnAddNewSkill'> add new</a>
    </td>
    <td>
        <div id="addNewSkillDialog" style='visibility: hidden;'>

        <form>
            <table width='100%' border='0'>
                <tr>
                    <td>
                        <label for="name">Name of New Skill</label> 
                        <input type="text" name="name" id="name" class=" ui-corner-all" />
                    </td>
                </tr>
            </table>
        </form>
        </div>
    </td></tr> 
```

但是这里的问题是默认情况下表单是可见的，在第一次单击按钮后，它会显示在对话框中，之后它可以正常工作（即对话框部分）......所以为了克服这个问题，我保持了**可见性**（的 Main ***div***）**隐藏**在 start 中并动态更改为：

```
$('#btnAddNewSkill').click(function() {
        $("#addNewSkillDialog").css('visibility', 'visible').dialog({
            show : "fold",
            hide : "explode",
            resizable : false,
            modal : true,
            closeOnEscape : true,
            height : 120,
            title : 'Add New Skill',
            buttons : {
                "Add Skill" : function() {
                    alert('Add skill Clicked');
                },
                Cancel : function() {
                    $(this).dialog("close");
                }
            },
            close : function() {
                $(this).dialog("dispose");
            }
        });
    }); 
```

这不是执行此操作的正确程序.....我应该如何从一**开始就将**表单**作为对话框**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T23:04:22.023

仅供参考，这不是一个确切的例子，因为我时间紧迫（是时候离开了），但我今天早些时候回答了一个关于 ui-dialogs 的问题。

在这里查看我的[工作小提琴](http://jsfiddle.net/SpYk3/4Qt2b/)*已修复

如果我以后有机会，（如果没有其他人得到它）我会让你摆弄你的确切例子。但是如果你查看提供的链接，你会看到如何建立一个对话框，你会看到它的 html 实际上是写在 HTML 区域（也就是你在正文中的视图上）；

尽管 jquery 默认是`autoOpen: false`. 这是因为，有时，如果您不使用 CSS 将其隐藏之前，对话框会轻微闪烁`display: none`

## ***更新***

下面我将发布带有注释的代码，这些注释是您的代码的更正版本

```
<!-- CSS
onload (in other words, place in header or in header link -->
#addNewSkillDialog {
    display: none;
} 
```

不要忘记在页面上放置对话框 html。然后添加以下JS

```
// you dont set the dialog in the click,
// set it seperately, use the click to open it
$("#addNewSkillDialog").dialog({
    //  HERE IS WHAT YOU'RE MISSING !!!
    autoOpen: false,
    //  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    show: "fold",   //  the animation on show
    hide: "explode",    // the animation on close
    resizable: false,   // prevents user from resizing
    modal: true,    //  puts a screen behind modal that prevents clicking on page
    closeOnEscape: true,    //  esc key will close dlg
    height: 120,    //  INNER height of dialog
    title: 'Add New Skill', // dlg title in ttl bar
    buttons: {  //  your own button set
        "Add Skill": function(e) {
            alert('Add skill Clicked');
        },
        Cancel: function(e) {
            $(this).dialog("close");
        }
    },
    close: function(e) {
        //$(this).dialog("dispose");    //  unnecessary
    }
});

//  then establish your click to open it
$('#btnAddNewSkill').click(function(e) {
    $("#addNewSkillDialog").dialog("open");
}); 
```**

# android - 如何将图片从 android 设备传输到 Matlab，反之亦然

> ID：10071233
> 
> 赞同：1
> 
> 时间：2012-04-09T09:19:10.977
> 
> 标签：android, file, matlab, file-transfer

我有麻烦了，需要你的帮助。我目前正在做一个项目，该项目需要我首先使用 android 设备捕捉自然场景（图片），提取文本然后识别文本。

我已经通过matlab实现了提取和识别的过程。现在我的问题是，如何将从我的 android 手机捕获的图片传输到 MATLAB？图像处理后如何将结果发送回手机？

请帮忙。代码将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:05:35.157

您也许可以使用客户端/服务器套接字。我还没有在 Android 上尝试过这个，但我认为只要你有互联网接入它就可以工作。 [Matlab 客户端-服务器](http://blogs.mathworks.com/loren/2011/05/27/transferring-data-between-two-computers-using-matlab/)和[Java 客户端-服务器](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)应该兼容，因为您应该能够在 Matlab 中运行服务器并从 Android 上的 Java 客户端连接到它。Matlab 服务器可能如下所示：

```
tcpipServer = tcpip('0.0.0.0',port,'NetworkRole','Server');
fopen(tcpipServer);
imageSize = fread(tcpipServer, 2, 'int32');
image = zeros(imageSize(1), imageSize(2), 3);
for x=1:imageSize(1)
  for y=1:imageSize(2)
    image(x, y, :) = fread(tcpipServer, 3, 'double');
  end
end
%Process image
fwrite(tcpipServer, results, 'double'); %or 'char' 
```

Java 客户端可能类似于：

```
Socket s = new Socket(<Server IP>, port);
out = new PrintWriter(s.getOutputStream(), true);
in = new BufferedReader(new InputStreamReader(s.getInputStream()));

out.println(image.getWidth());
out.println(image.getHeight());
for (int x = 1; x < image.getWidth(); x++) {
  for (int y = 1; y < image.getHeight(); y++) {
    //Write the RGB values. I can't remember how to pull these out of the image.
  }
}

String results = in.readLine(); 
```

我不确定数据类型将如何工作。也许 PrintWriter 以外的东西会更好，或者您可能必须将所有内容作为 char[] 发送，然后在另一端解析它。

# ios - 核心剧情：内存问题核心动画未能分配这么多字节

> ID：10071235
> 
> 赞同：1
> 
> 时间：2012-04-09T09:19:18.990
> 
> 标签：ios, core-plot

我正在使用核心图使用 webservices 生成各种类型的图形。但是在生成大约 60 个图形后，图形屏幕似乎是空白的，在设备日志中给出一条消息“核心动画未能分配 9997432 字节”我们只面临这个问题在应用程序在模拟器上运行良好的设备上。

以下是代码片段，我们将数据从另一个类传递给下面的类。.h 文件

```
//
//  LineGraph.h
//  Graphs
//
//  Created by Pawan on 12/12/11.
//  Copyright 2011 __MyCompanyName__. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "CorePlot-CocoaTouch.h"

@interface LineGraph1 : UIViewController<CPTPlotDataSource,UIPopoverControllerDelegate,CPTScatterPlotDelegate,CPTPlotSpaceDelegate> {

    NSMutableArray *xAxisValuesArray;
    NSMutableArray *yAxisValuesArray;
    NSMutableArray *identifierArray;
    NSMutableArray *xAxisScaleArray;
    NSMutableArray *formattedDataLabelArray;

    NSString  *graphTitleLabel;
    NSString *lineType;
    NSString *xAxisTitleLabel;
    NSString *yAxisMin;
    NSString *yAxisMax;
    NSString *yAxisIntervalLength;
    NSString *yAxisTitle;
    NSString *yAxisTitleLocation;
    UILabel *valueLabel2;

    float xAxiscount;
    float intervalLength;

    @private

    CPTXYGraph *lineGraph;
    CPTMutableTextStyle *titleTextStyle;
    CPTLayerAnnotation   *symbolTextAnnotation;

    NSMutableArray *plotSymbolColoursArray;
    NSMutableArray *plotLineColoursArray;

    IBOutlet CPTGraphHostingView *lineGraphtView;
    IBOutlet UILabel *lineGraphLabel;
    IBOutlet UISlider *lineGraphValueSlider;
    IBOutlet UIButton *drillUpButton;
    IBOutlet UIButton *drillDownButton;
    IBOutlet UIButton *helpButton;
}
@property(nonatomic,retain) IBOutlet CPTGraphHostingView *lineGraphtView;
@property(nonatomic,retain) CPTXYGraph *lineGraph;
@property(nonatomic,retain) NSMutableArray *xAxisValuesArray;
@property(nonatomic,retain) NSMutableArray *yAxisValuesArray;
@property(nonatomic,retain) IBOutlet UILabel *lineGraphLabel;
@property(nonatomic,retain) NSString *graphTitleLabel;
@property(nonatomic,retain) NSString *lineType;
@property(nonatomic,retain) NSString *xAxisTitleLabel;
@property(nonatomic,retain) NSString *yAxisTitleLocation;
@property(nonatomic,retain) NSString *yAxisMin;
@property(nonatomic,retain) NSString *yAxisMax;
@property(nonatomic,retain) NSString *yAxisIntervalLength;
@property(nonatomic,retain) NSString *yAxisTitle;
@property(nonatomic,retain) NSMutableArray *identifierArray;
@property(nonatomic,retain) NSMutableArray *plotSymbolColoursArray;
@property(nonatomic,retain) NSMutableArray *plotLineColoursArray;
@property(nonatomic,retain) NSMutableArray *xAxisScaleArray;
@property(nonatomic,retain) NSMutableArray *formattedDataLabelArray;
@property(nonatomic,retain) CPTMutableTextStyle *titleTextStyle;

- (void)constructLineGraphForSingleLineGraph:(NSString *)type;
-(IBAction)helpButtonPressed:(id)sender;
-(void)plotDataActionSlider:(id)sender;
-(void)setplotDataActionSlider;

@end

.m file

// LineGraph.m
//  Graphs
//
//  Created by Pawan on 12/12/11.
//  Copyright 2011 __MyCompanyName__. All rights reserved.
//

#import "LineGraph1.h"
#import "CommonMethodForGraphs.h"
#import "GraphDescription.h"

@implementation LineGraph1

@synthesize lineGraph;
@synthesize xAxisValuesArray;
@synthesize yAxisValuesArray;
@synthesize graphTitleLabel;
@synthesize lineGraphLabel;
@synthesize lineType;
@synthesize xAxisTitleLabel;
@synthesize yAxisMin;
@synthesize yAxisMax;
@synthesize yAxisIntervalLength;
@synthesize yAxisTitle;
@synthesize yAxisTitleLocation;
@synthesize identifierArray;
@synthesize plotLineColoursArray;
@synthesize plotSymbolColoursArray;
@synthesize xAxisScaleArray;
@synthesize formattedDataLabelArray;
@synthesize titleTextStyle;
@synthesize lineGraphtView;
//Implement viewDidLoad to do additional setup after loading the view, typically from a nib.

- (void)viewDidLoad {
    [super viewDidLoad];
    [self setplotDataActionSlider]; 
    self.lineGraphLabel.text=self.graphTitleLabel;
    NSMutableArray *identifierLocalArray=[[NSMutableArray alloc]init];

    [identifierLocalArray insertObject:@"Port In" atIndex:0];
    self.identifierArray=identifierLocalArray;
    [identifierLocalArray release];

    NSMutableArray *plotSymbolColoursLocalArray =[NSMutableArray arrayWithObjects:[CPTColor redColor],[CPTColor greenColor],nil];
    NSMutableArray *plotLineColoursLocalArray =[NSMutableArray arrayWithObjects:[CPTColor greenColor],[CPTColor redColor],nil];
    self.plotSymbolColoursArray=plotSymbolColoursLocalArray;    
    self.plotLineColoursArray=plotLineColoursLocalArray;

    if ([self.xAxisValuesArray count]<=10) 
    {
        xAxiscount = 10.0f;
    }
    else    
    {
        xAxiscount = 31.0f;
    }

    [self constructLineGraphForSingleLineGraph:self.lineType];

}
#pragma mark -
#pragma mark constructLineGraphForSingleLineGraph

- (void)constructLineGraphForSingleLineGraph:(NSString *)type
{

    // Create lineGraph from theme

    CPTXYGraph *lineGraphLocalObject = [[CPTXYGraph alloc] initWithFrame:CGRectZero];
    self.lineGraph = lineGraphLocalObject;
    [lineGraphLocalObject release];
    CPTTheme *theme = [CPTTheme themeNamed:kCPTPlainWhiteTheme];
    self.lineGraph = (CPTXYGraph *)[theme newGraph];

/*  
    UIImage *image = [UIImage imageNamed:@"BackgroundforGraph.png"];
    CGImageRef mycgimage = [image CGImage];
    CPTImage *image1 = [CPTImage imageWithCGImage:mycgimage];
    self.lineGraph.fill=[CPTFill fillWithImage:image1];
    self.lineGraph.borderLineStyle = nil;
    image = [UIImage imageNamed:@"PlotAreaImageNew.png"];
    mycgimage = [image CGImage];
    image1 = [CPTImage imageWithCGImage:mycgimage];

    self.lineGraph.plotAreaFrame.fill = [CPTFill fillWithImage:image1];
 */
    lineGraphtView.hostedGraph = self.lineGraph;
    lineGraphtView.allowPinchScaling = NO;
    self.lineGraph.plotAreaFrame.masksToBorder = NO;
    //padding for plot area
    self.lineGraph.paddingLeft = 110.0;
    self.lineGraph.paddingTop = 20.0;
    self.lineGraph.paddingRight = 10.0;
    self.lineGraph.paddingBottom = 100.0;

    // Add plot space for line graph
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)self.lineGraph.defaultPlotSpace;
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromString(self.yAxisMin) length:CPTDecimalFromString(self.yAxisMax)];
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0f) length:CPTDecimalFromFloat(xAxiscount)];

    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)self.lineGraph.axisSet;

    CPTXYAxis *x = axisSet.xAxis;
    x.majorIntervalLength = CPTDecimalFromString(@"1");
    x.orthogonalCoordinateDecimal = CPTDecimalFromString(self.yAxisMin);
    x.title =self.xAxisTitleLabel;
    x.titleLocation = CPTDecimalFromFloat(5.0f);
    x.titleOffset = 65.0f;
    x.labelOffset=0.0f;

    //text style initialized for both x and y axis....
    CPTMutableTextStyle *titleTextStyleLocalObject = [[CPTMutableTextStyle alloc] init];
    self.titleTextStyle = titleTextStyleLocalObject;
    [titleTextStyleLocalObject release];
    self.titleTextStyle.fontSize = 15;
    x.titleTextStyle =  self.titleTextStyle;
    self.titleTextStyle.fontSize = 12;
    x.labelTextStyle = self.titleTextStyle;

    // Define some custom labels for the data elements
    x.labelRotation = M_PI/4;
    x.labelingPolicy = CPTAxisLabelingPolicyNone;
    int labelLocation = 0;
    NSMutableArray *customLabelsForXaxis = [NSMutableArray arrayWithCapacity:[self.xAxisScaleArray count]];

    for (NSNumber *tickLocation in self.xAxisScaleArray) 
    {
        CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText: [self.xAxisScaleArray objectAtIndex:labelLocation++] textStyle:x.labelTextStyle];
        newLabel.tickLocation = [[NSNumber numberWithInt:labelLocation] decimalValue] ;//[tickLocation decimalValue];
        newLabel.offset =0.0;
        newLabel.rotation = M_PI/4;

        [customLabelsForXaxis addObject:newLabel];
        [newLabel release];
    }

    x.axisLabels =  [NSSet setWithArray:customLabelsForXaxis];  

    NSNumberFormatter *yAxisFormat = [[NSNumberFormatter alloc] init];
    [yAxisFormat setNumberStyle:NSNumberFormatterNoStyle];
    CPTXYAxis *y = axisSet.yAxis;
    y.axisLineStyle = nil;
    y.majorIntervalLength = CPTDecimalFromString(self.yAxisIntervalLength);
    y.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0"); 
    y.titleOffset = 50.0f;
    y.titleLocation = CPTDecimalFromString(self.yAxisTitleLocation);
    y.labelOffset = 0.0f;
    y.labelFormatter=yAxisFormat;
    [yAxisFormat release];
    y.title = self.yAxisTitle;
    y.labelTextStyle =  self.titleTextStyle;

    CPTScatterPlot *dataSourceLinePlot = [[[CPTScatterPlot alloc] init] autorelease];
    dataSourceLinePlot.identifier = [self.identifierArray objectAtIndex:0];

    CPTMutableLineStyle *lineStyle = [[dataSourceLinePlot.dataLineStyle mutableCopy] autorelease];
    lineStyle.lineWidth = 2.0f;
    lineStyle.lineColor = [ self.plotLineColoursArray objectAtIndex:0];//[CPTColor clearColor];for scatterplot
    dataSourceLinePlot.dataLineStyle = lineStyle;
    dataSourceLinePlot.labelOffset=8.0f;
    dataSourceLinePlot.dataSource = self;
    dataSourceLinePlot.delegate = self;

        // Add plot symbols

    CPTPlotSymbol *plotSymbol = [CPTPlotSymbol ellipsePlotSymbol];
    plotSymbol.fill = [CPTFill fillWithColor:[  self.plotSymbolColoursArray objectAtIndex:0]];
    plotSymbol.size = CGSizeMake(10.0, 10.0);
    dataSourceLinePlot.plotSymbol = plotSymbol;

    // Put an area gradient under the plot above
    CPTColor *areaColor = [CPTColor colorWithComponentRed:0.3 green:0.8 blue:0.3 alpha:0.6];
    CPTGradient *areaGradient = [CPTGradient gradientWithBeginningColor:areaColor endingColor:[CPTColor clearColor]];
    areaGradient.angle = -90.0;
    CPTFill* areaGradientFill = [CPTFill fillWithGradient:areaGradient];
    dataSourceLinePlot.areaFill = areaGradientFill;
    dataSourceLinePlot.areaBaseValue = CPTDecimalFromString(@"0.0");

    [self.lineGraph addPlot:dataSourceLinePlot];
    y.labelingPolicy = CPTAxisLabelingPolicyNone;
    intervalLength = [CommonMethodForGraphs formattedIntervalLengthForgraph:self.yAxisIntervalLength];

    double j=[self.yAxisMin intValue];
    NSMutableArray *customTickLocationsForYaxis = [[NSMutableArray alloc]init];
    NSMutableArray *yAxisLabels =[[NSMutableArray alloc]init];

    for (int h=0; h<=10; h++) 
    {
        [customTickLocationsForYaxis insertObject:[NSDecimalNumber numberWithLongLong:j] atIndex:h];
        [yAxisLabels insertObject:[[NSNumber numberWithLongLong:j/intervalLength]stringValue] atIndex:h];
        j=j+[self.yAxisIntervalLength longLongValue];
    }
    labelLocation = 0;
    NSMutableArray *customLabelsForYaxis = [[NSMutableArray alloc] initWithCapacity:[yAxisLabels count]];

    for (NSNumber *tickLocationForYaxis in customTickLocationsForYaxis)
    {
        CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText: [yAxisLabels objectAtIndex:labelLocation++] textStyle:x.labelTextStyle];
        newLabel.tickLocation = [tickLocationForYaxis decimalValue];
        newLabel.offset = y.labelOffset + y.majorTickLength;
        [customLabelsForYaxis addObject:newLabel];
        [newLabel release];
    }

    y.axisLabels =  [NSSet setWithArray:customLabelsForYaxis];

    [customLabelsForYaxis release];
    [customTickLocationsForYaxis release];
    [yAxisLabels release];

}

#pragma mark -
#pragma mark delegates for Line graph 

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot 
{
    int recordCount = 0;

    for (int i=0; i<[self.identifierArray count]; i++) 
    {
        if ( [plot.identifier isEqual:[self.identifierArray objectAtIndex:i] ]) 
        {
            recordCount= [self.yAxisValuesArray count];
        }

    }
    return recordCount; 
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index 
{
    NSNumber *num = nil;

    if( [plot.identifier isEqual:[self.identifierArray objectAtIndex:0] ]) 
    {
        switch (fieldEnum) 
        {
            case CPTScatterPlotFieldX:
                num = [self.xAxisValuesArray objectAtIndex:index];
                break;

            case CPTScatterPlotFieldY:
                num = [self.yAxisValuesArray objectAtIndex:index];
                break;
        }

    }

    return num;
}

-(CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index
{

    static CPTMutableTextStyle *whiteText = nil;

    if ( !whiteText) 
    {
        whiteText = [[CPTMutableTextStyle alloc] init];
        whiteText.color = [CPTColor blackColor];
        whiteText.fontSize=12.0f;
    }

    CPTTextLayer *newLayer = nil;
    if (index%2==0) 
    {
        plot.labelOffset=-0.5;

    }
    else 
    {
        plot.labelOffset=0.5;
    }

    if ( [plot.identifier isEqual:[self.identifierArray objectAtIndex:0]])
    {
        newLayer = [[[CPTTextLayer alloc] initWithText:[NSString stringWithFormat:@"%.1f%",[[self.formattedDataLabelArray objectAtIndex:index]floatValue]] style:whiteText] autorelease];
        [whiteText release];
    }

    return newLayer;

}

-(void)scatterPlot:(CPTScatterPlot *)plot plotSymbolWasSelectedAtRecordIndex:(NSUInteger)index
{

    if ( symbolTextAnnotation ) {
        [self.lineGraph.plotAreaFrame.plotArea removeAnnotation:symbolTextAnnotation];
        symbolTextAnnotation = nil;
    }

    // Setup a style for the annotation
    CPTMutableTextStyle *hitAnnotationTextStyle = [CPTMutableTextStyle textStyle];
    hitAnnotationTextStyle.color = [CPTColor redColor];
    hitAnnotationTextStyle.fontSize = 16.0f;
    hitAnnotationTextStyle.fontName = @"Helvetica-Bold";

    // Determine point of symbol in plot coordinates
    NSNumber *x = [self.xAxisValuesArray objectAtIndex:index];

    NSString *y = [self.yAxisValuesArray objectAtIndex:index];

    NSArray *anchorPoint = [NSArray arrayWithObjects:x, y, nil];

    // Now add the annotation to the plot area
    CPTTextLayer *textLayer = [[[CPTTextLayer alloc] initWithText:y style:hitAnnotationTextStyle] autorelease];

    symbolTextAnnotation = [[CPTPlotSpaceAnnotation alloc] initWithPlotSpace:self.lineGraph.defaultPlotSpace anchorPlotPoint:anchorPoint];

    symbolTextAnnotation.contentLayer = textLayer;
    symbolTextAnnotation.displacement = CGPointMake(0.0f, 20.0f);
    [self.lineGraph.plotAreaFrame.plotArea addAnnotation:symbolTextAnnotation]; 
    [textLayer release];
    [symbolTextAnnotation release];
}

#pragma mark -
#pragma mark method for slider action

-(void)plotDataActionSlider:(id)sender
{

    if (lineGraphValueSlider.value<=[self.yAxisValuesArray count]+1) 
    {
            //code to remove added imageView
            [[self.view viewWithTag:50] removeFromSuperview];
            //code to remove added label
            [[self.view viewWithTag:100] removeFromSuperview];
        for (int d=0; d<[self.yAxisValuesArray count]; d++) 
        {
            if ((int)lineGraphValueSlider.value==[[self.xAxisValuesArray objectAtIndex:d]intValue]) 
            {

                int x=300;
                valueLabel2=[[UILabel alloc]init];
                valueLabel2.frame=CGRectMake(x, 620, 300, 40);
                valueLabel2.tag=100;
                NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init]; 
                [formatter setNumberStyle:NSNumberFormatterDecimalStyle];
                NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
                [formatter setLocale:locale];
                valueLabel2.text= [[[self.xAxisScaleArray objectAtIndex:d] stringByAppendingString:@" : "] stringByAppendingString:[formatter stringFromNumber:[NSNumber numberWithLongLong:[[self.yAxisValuesArray objectAtIndex:d]longLongValue]]]];
                [self.view addSubview:valueLabel2];
                [valueLabel2 release];
                [formatter release];

            }
        }
    }
    else 
    {
        [[self.view viewWithTag:50] removeFromSuperview];
        [[self.view viewWithTag:100] removeFromSuperview];

    }

}

-(void)setplotDataActionSlider
{
    UIImage *minImage = [UIImage imageNamed:@"SliderRoll.png"];
    UIImage *tumbImage= [UIImage imageNamed:@"SliderArrow.png"];   
    minImage=[minImage stretchableImageWithLeftCapWidth:0 topCapHeight:0];
        // Setup the  slider
    [lineGraphValueSlider setMinimumTrackImage:minImage forState:UIControlStateNormal];
    [lineGraphValueSlider setThumbImage:tumbImage forState:UIControlStateNormal];
    lineGraphValueSlider.minimumValue = 0.0;

    if ([self.xAxisValuesArray count]<=10)
    {
        lineGraphValueSlider.maximumValue = 10.0;
    }
    else 
    {
        lineGraphValueSlider.maximumValue = 31.0;
    }

    lineGraphValueSlider.continuous = YES;
    [lineGraphValueSlider addTarget:self action:@selector(plotDataActionSlider :) forControlEvents:UIControlEventValueChanged];

    minImage = nil;
    tumbImage = nil;

}   

#pragma mark -
#pragma mark method for help drill up and drill down

-(IBAction)helpButtonPressed:(id)sender{
    [CommonMethodForGraphs helpButtonActionForAllGraphs:self.view];

}
#pragma mark -

//Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations.
    return ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) ||(interfaceOrientation == UIInterfaceOrientationLandscapeRight));
}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc. that aren't in use.
}

- (void)viewDidUnload {
    [super viewDidUnload];

    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    self.lineGraphLabel = nil;
    self.lineGraphtView = nil;
}

- (void)dealloc {

    [lineGraph release];
    [xAxisValuesArray release];
    [yAxisValuesArray release];
    [xAxisTitleLabel release];  
    [graphTitleLabel release];
    [lineGraphLabel release];
    [lineType release];
    [yAxisMin release];
    [yAxisMax release];
    [yAxisIntervalLength release];
    [yAxisTitle release];
    [yAxisTitleLocation release];
    [identifierArray release];
    [plotLineColoursArray release];
    [plotSymbolColoursArray release];
    [xAxisScaleArray release];
    [formattedDataLabelArray release];
    [lineGraphtView release];
    [super dealloc];

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:15:47.230

不确定这是否会有很大的不同，但这两种方法似乎使用不同的逻辑

```
-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot 
{
int recordCount = 0;

for (int i=0; i<[self.identifierArray count]; i++) 
{
    if ( [plot.identifier isEqual:[self.identifierArray objectAtIndex:i] ]) 
    {
        recordCount= [self.yAxisValuesArray count];
    }
}
return recordCount; 
```

}

```
-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index 
{
NSNumber *num = nil;

if( [plot.identifier isEqual:[self.identifierArray objectAtIndex:0] ]) 
{
    switch (fieldEnum) 
    {
        case CPTScatterPlotFieldX:
            num = [self.xAxisValuesArray objectAtIndex:index];
            break;
        case CPTScatterPlotFieldY:
            num = [self.yAxisValuesArray objectAtIndex:index];
            break;
    }
}

return num;
} 
```

我建议使用与

```
-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index 
```

在另一种方法

```
-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index 
```

如果你的图表，你能确认只有一个情节吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T00:48:06.947

所有 60 个图形是否同时在内存中？如果是这样，您可能会用完 Core Animation 的内存或其他 GPU 资源。请务必发布您不再使用的图表和/或绘图以释放资源。

# asp.net-mvc - 用于类似向导的应用程序的 MVC

> ID：10071237
> 
> 赞同：1
> 
> 时间：2012-04-09T09:19:25.957
> 
> 标签：asp.net-mvc

我有一个包含大约 150 种向导逻辑的 WebForms 应用程序，每个向导可以有 3 到 7 个步骤。在我的 webforms 应用程序中，每个向导都有一个 aspx，并且逻辑是使用多视图完成的。我想将这个想法移植到 MVC 应用程序中，但我只知道两种方法：

1.  对每个步骤使用单一视图并使用`RedirectToAction`方法论；
2.  使用带有隐藏 div 和大量 javascript 逻辑的单个视图；

第一个选项将很难维护。如果我有 3 个步骤的 150 个向导，我将有至少 450 个视图。第二个选项将依赖于带有 ajax 逻辑的 javascript；

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:38:06.950

每个巫师的目标是否相似？我的想法是以通用方式在代码中定义向导的*目标，并以另一种形式（XML？）定义每个向导。*然后将配置传递给每个向导到单个操作/视图。

无论如何它都不会是一个简单的实现，但会更容易支持前进。

至于 javascript 方面，请查看 javascript 框架（如建议的 ExtJS 或 JQuery UI）。

如果有帮助，我做了一个小模型，说明如何使用 jQuery 实现向导作为 Fluqi 的一部分 - 请参阅[http://fluqi.apphb.com/Demo/Wizard](http://fluqi.apphb.com/Demo/Wizard)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:22:55.950

您可以使用 sencha 的 ExtJS 框架来实现像向导一样的丰富 UI，而无需回传。维护也很容易

# android - 按 Enter 表示它无法在 android 的自定义列表视图中查找最后一个编辑文本

> ID：10071240
> 
> 赞同：1
> 
> 时间：2012-04-09T09:19:32.127
> 
> 标签：android, android-listview

您好先生，我正在从服务器数据库中获取所有菜单名称并附加到编辑文本。如果我按 Enter 意味着它会关注下一个编辑文本。但是如果我在edittext之前按最后一个输入，它就不能专注于最后一个edittext ..

```
 this is mycode

         public View getView(int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;

    if (convertView == null) {
        holder = new ViewHolder();
        convertView = inflater.inflate(R.layout.editmainmenulist, null);
        holder.caption = (EditText) convertView
                .findViewById(R.id.editmaimenu);
        holder.caption1=(ImageView) convertView.findViewById(R.id.menuimage);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    //Fill EditText with the value you have in data source
    holder.caption.setText(itemnames[position]);//i append database name to the editext
    holder.caption.setId(position);
    holder.caption1.setImageBitmap(bmps[position]);

    //we need to update adapter once we finish with editing
    holder.caption.setOnFocusChangeListener(new OnFocusChangeListener() {
        public void onFocusChange(View v, boolean hasFocus) {
            if (!hasFocus){
                final int position = v.getId();
                final EditText Caption = (EditText) v;
                itemnames[position] = Caption.getText().toString();

                arr.add(Caption.getText().toString());

            }
        }    
    });  

    return convertView;
}
 }

class ViewHolder {
EditText caption;
ImageView caption1;
 }

 class ListItem {
String caption;
    } 
```

这是我的 xml 代码

```
 <?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<ImageView
    android:id="@+id/menuimage"
    android:layout_width="75dip"
    android:layout_height="79dip"
    android:scaleType="centerCrop"
    android:src="@drawable/stub" />

<EditText
    android:id="@+id/editmaimenu"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="80dp"
    android:layout_marginTop="25dp"
    android:singleLine="true" >
</EditText>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:25:56.697

可能是因为edittext`singline=true`在其xml中没有..添加它会使其正常工作..

# svn - 使用 mercurial 和 hgsubversion 时是否可以支持非英语评论？

> ID：10071243
> 
> 赞同：5
> 
> 时间：2012-04-09T09:19:44.983
> 
> 标签：svn, mercurial

我现在正在使用 hgsubversion 扩展测试 mercurial。一切正常，除了颠覆评论：非拉丁字符显示为“？” 在 HGWorkbench 中，它在使用注释中包含非拉丁字符的变更集时因 python 编码错误而崩溃。是否有可能以某种方式修复这种行为或 mercurial-subversion 桥不打算用于非英语语言？

**2012 年 4 月 12 日更新**

我已经检查过操作系统版本 - 该错误仅在 Windows 上显示。在 Ubuntu 上一切正常，非拉丁注释也能正确显示。此外，这似乎是 HGWorkbench 应用程序问题：我将在 Ubuntu 中正确显示的已在 Ubuntu 中签出的存储库复制到 Windows 计算机中，我看到“？” 而不是这里的非拉丁字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:45:47.837

好吧，看来 TortoiseHG 毕竟不打算在 Windows 上使用。编码问题的解决方法是使用“UTF-8”值设置名为“HGENCODING”的环境变量。

# javascript - 如何使用键盘箭头键移动 html5 范围滑块句柄

> ID：10071244
> 
> 赞同：3
> 
> 时间：2012-04-09T09:19:55.277
> 
> 标签：javascript, jquery, html

当我遇到最大值较大的 html5 范围滑块时，滑块会跳到更高的值，并且在用鼠标移动时无法取中间值。所以我试图在javascript或其他的帮助下使用键盘控制滑块。我是这个的新手。任何人都可以帮助我。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T12:02:35.713

您不需要使用 Javascript 来控制滑块，但您确实需要 Javacript 的一些帮助来聚焦滑块元素。如果用户选择元素，它根本不需要任何 Javascript 就可以工作。

例如

```
<html><head><title>bla</title></head>
  <body>
    <input type="range" id="slider" min="0" max="100" value="50" />

    <script type="text/javascript">
      document.getElementById('slider').addEventListener('click', function() {
        this.focus(); 
      });
    </script>
  </body>
</html> 
```

对于多个滑块，您可以在`<script>`标签内执行此操作。您不需要单个滑块上的任何代码：

```
<script>
  var inputs = document.getElementsByTagName('input');

  for(var i = 0; i < inputs.length; i++) {
    if(inputs[i].type == 'range') {
      inputs[i].addEventListener('click', function() {
        this.focus(); 
      });
    }
  }
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T11:42:05.980

也许您需要这样的东西： [jsfiddle 中的示例](http://jsfiddle.net/ZwEa6/)。滑块可以用鼠标正常移动，但是如果单击按钮，则可以使用箭头进行精确移动，如果再次单击，则侦听器将被删除，并且箭头什么也不做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-20T11:25:26.060

我发现，鉴于已经存在用于管理滑块的脚本，您只需向滑块添加属性“step”即可设置按键引起的更改量。

# reflection - 符号计算的反射语言

> ID：10071247
> 
> 赞同：0
> 
> 时间：2012-04-09T09:20:27.367
> 
> 标签：reflection, programming-languages, symbolic-math, computer-algebra-systems

我正在寻找一种在程序上运行的语言，用这种语言编写。那是一种语言，其程序是该语言的主要（可能是唯一的）对象。

类似于自编程转换语言之类的东西，完全是基于这种观点而制作的。

动机如下：

有一个程序 P1 旨在计算 Real -> Real 我想要一个程序 P2 将 P1 转换为 P1 的符号导数（或反导数）。显然 P2 可能无法对大多数输入进行适当的处​​理。

有人可能会将其视为针对 lambda 的模式匹配。但是非常方便的模式匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T09:23:50.237

口齿不清/计划/球拍。还是您在寻找其他东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:29:06.230

我认为[C# 表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)（或[F# 引号](http://msdn.microsoft.com/en-us/library/dd233212.aspx)）可以用于此。到目前为止，它们不是这些语言的主要（或唯一）对象，但我应该让你很好地做到这一点。

# xcode - 从命令行工具到可可应用

> ID：10071260
> 
> 赞同：1
> 
> 时间：2012-04-09T09:22:11.033
> 
> 标签：xcode, datepicker, nsdate, nsdateformatter

我开始探索 Objective-c 中的编程，并为命令行工具编写了几行代码。它有效，但现在我试图在 Cocoa 应用程序中重写它，但我遇到了一些问题。这是单行工具的工作代码：

```
 //Formattazione delle date preimpostate
    NSDateFormatter *formatoData = [[NSDateFormatter alloc] init];
    [formatoData setDateFormat:@"dd/MM/yyyy"];

    //Definizione della data di inizio e della data di fine
    NSDate * dataInizio = [formatoData dateFromString:datePicker];

    //Risultato
    NSString *risultato=[dataInizio descriptionWithCalendarFormat:@"%w" timeZone:nil locale:nil];

    //Output
    NSLog(@"Il giorno impostato è %@", risultato); 
```

为了创建 Cocoa 应用程序，我创建了一个名为 VisualizzaClasse 的 Objective-C 类。VisualizzaClasse.h：

```
#import <Foundation/Foundation.h>

@interface VisualizzaClasse : NSObject
{
    IBOutlet NSDatePicker *datePicker;
    IBOutlet NSTextView *textView;}
- (IBAction)mostraRisultato:(id)sender;

@end 
```

VisualizzaClasse.m：

```
#import "VisualizzaClasse.h"

@implementation VisualizzaClasse

- (IBAction)mostraRisultato:(id)sender;
{
     //Formattazione delle date preimpostate

        NSDateFormatter *formatoData = [[NSDateFormatter alloc] init];
        [formatoData setDateFormat:@"dd/MM/yyyy"];
        //Definizione della data di inizio e della data di fine
   NSDate * dataInizio = [formatoData dateFromString:datePicker];

        //Risultato
        NSString *risultato=[dataInizio descriptionWithCalendarFormat:@"%w" timeZone:nil locale:nil];

    [textView insertText:[NSString stringWithFormat:@"%@ \n", risultato]];
}

@end 
```

该界面由一个DatePicker，TextView和一个按钮组成。我无法让DatePicker替换dateFromString。错误是：不兼容的指针类型将'NSDatePicker _strong *'发送到'NSString *'类型的参数，在该行：

```
NSDate * dataInizio = [formatoData dateFromString:datePicker]; 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:40:48.710

dateFromString 方法需要 NSString，你的参数类型是 NSDatePicker

使用 NSDate *dateVariable = datePicker.date; 如果您需要将其转换为 NSDate，则改为 dateFromString

拥有 NSDate 后，您可以使用[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html中提到的格式化程序](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:56:45.243

我假设您在 InterfaceBuilder 中正确连接了 NSDatePicker，因此它已连接到 DatePicker。

如果是这样，您应该能够按以下方式分配：

```
NSDate * unformattedDate = [ datePicker dateValue ]; 
```

然后像以前一样进行格式化，`unformattedDate`用作格式化程序的输入。

# java - JPA - 何时使用关系？

> ID：10071262
> 
> 赞同：0
> 
> 时间：2012-04-09T09:22:19.367
> 
> 标签：java, jpa

我还没有完全适应 JPA 的阶段。

现在，我在使用关系注释或在需要查询时简单地检索相关对象之间左右为难。

例如，我有一个拥有项目的用户。我可以使用单对多关系并以对象方式检索项目，或者我可以在需要时简单地查询用户的项目。

后一种解决方案涉及更多代码，但不知何故，我对自己想做的事情有更多的自由和控制权，或者至少这是我的印象。前者显然会处理相当多的样板代码，例如对象的创建/删除/更新，但是在此过程中需要学习很多技巧。

如果有人能提出一个关于何时在 JPA 中使用关系注释的简单经验法则，我将不胜感激，最好是根据她/他的经验。

谢谢，

托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:53:44.847

基本规则是您应该在需要时创建关系。

对于一对一和多对一的关系，这很容易：您几乎总是需要它们。例如，当您显示`Project`信息时，您几乎总是需要同时显示其所有者信息，因此在这里创建关系是一个不错的选择。

一对多和多对多关系需要更加小心，因为过度使用它们会导致性能问题。

我个人的经验法则如下：如果您不需要在没有分页或过滤的情况下一次显示所有`Project`s `User`（或者至少不需要经常这样做），请不要创建关系。否则你可以创建它（例如，你通常需要一次所有`OrderLine`的 s `Order`，因此在这种情况下你需要一个一对多的关系）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:42:47.453

您的问题是有效的，在符合 JPA 的 ORM 中关系很难。然而，关系的好处是能够在 JPA QL 查询中使用它们。例如，当您想获取用户创建的所有项目时，您可以编写：

```
SELECT p
FROM Project p
WHERE p.user.name = 'Smith' 
```

你不能这样做，而不是：

```
@ManyToOne
private User user 
```

在`Project`关系中你有一个简单的：

```
private int userId; 
```

还要研究各种获取策略，以使人际关系更舒服。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T09:25:55.323

当两个实体之间存在关系并且您希望使用它时，请使用 JPA 关系注释。主要优点之一就是在实体之间存在关系时不必手动进行额外的查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T09:26:13.317

我会去注释。它更简单，产生的代码更少，这是使用 JPA 的重点。而且默认情况下，一对多集合是惰性获取的，因此您不会冒险从数据库中获取不需要的内容。

但我建议阅读惰性/渴望获取并了解其工作原理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T09:44:36.563

这完全取决于您的应用程序在检索数据方面的工作方式以及它需要它们的实例。尽管 JPA 可以在任何地方使用，甚至在 Java EE 容器之外（这是在标准 Java SE 应用程序或 Spring 等中使用的巨大优势），但我发现它的“思维方式”非常面向请求 -响应式交互、映射到 Web 应用程序等（公平地说，这是当今最流行的企业服务器端应用程序类型）。但是，除非您有一些非常具体的需求，否则我肯定会投资学习 JPA 关系注释。

在 JPA 中，一切都围绕 EntityManager 会话进行。如果您有一个 EntityManager 实例在整个工作流程中管理您的实体，您提到您需要在哪里获取用户、项目等，所有这些都在一个请求-响应中，那么肯定会使用 @OneToMany 等，因为它会照顾孩子实体，无论何时需要它们，而无需关心如何加入外键，并且还对何时检索什么进行了优化。即使您需要跨请求携带相同的实体，使用[refresh()](http://docs.oracle.com/javaee/5/api/javax/persistence/EntityManager.html#refresh%28java.lang.Object%29)和[merge()](http://docs.oracle.com/javaee/5/api/javax/persistence/EntityManager.html#merge%28T%29)也非常简单。

我同意你的观点，使用 FetchType、CascadeType 等注释往往会有点麻烦，而且你可能还会偶尔遇到臭名昭著的[无法同时获取多个包](http://www.jroller.com/eyallupu/entry/hibernate_exception_simultaneously_fetch_multiple)PersistenceException，所以这是一个颠簸的过程，但一旦你掌握了它，我想它值得投资。

# java - Java 等效于 c++ 中的 if (edgeTable[cubeindex] & 256)

> ID：10071264
> 
> 赞同：0
> 
> 时间：2012-04-09T09:22:33.373
> 
> 标签：java

> **可能重复：**
> [在 if 语句中使用按位 &](https://stackoverflow.com/questions/10064068/using-a-bitwise-inside-an-if-statement)

我有以下来自[http://local.wasp.uwa.edu.au/~pbourke/geometry/polygonise/的代码](http://local.wasp.uwa.edu.au/~pbourke/geometry/polygonise/)

```
 if (edgeTable[cubeindex] & 1)
      vertlist[0] =
         VertexInterp(isolevel,grid.p[0],grid.p[1],grid.val[0],grid.val[1]);
   if (edgeTable[cubeindex] & 2)
      vertlist[1] =
         VertexInterp(isolevel,grid.p[1],grid.p[2],grid.val[1],grid.val[2]); 
```

我如何重写 if 语句以便它们可以在 Java 中运行？

问候迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:23:39.333

`edgeTable[cubeindex] & 1`是 Java 中的有效操作，与 C 中的含义相同。您可以查看[有关位和位移运算符的 Java 教程以](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)获取更多信息。

但是您需要测试 if 语句中的显式条件：

```
if ((edgeTable[cubeindex] & 1) != 0) 
```

# java - 导入 java.awt.* 错误

> ID：10071270
> 
> 赞同：0
> 
> 时间：2012-04-09T09:23:26.100
> 
> 标签：java, awt

首先，我对Java真的很陌生。我有一个非常简单的脚本：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class JavaApplicationSchool extends JFrame {
    public static void main(String[] args) {
        JOptionPane.showMessageDialog(null, "Hello World");
        JOptionPane.showMessageDialog(null, "Goodbye");
        System.exit(0);
    }
} 
```

尝试使用 netbeans 7.1 运行此代码时。（已安装 JDK），我的 IDE 在代码顶部的 Import 部分返回错误。

这些错误与查找 awt 包有关。有人能告诉我这些包装需要放在哪里以及在哪里可以找到它们吗？

通过[此屏幕截图](http://hoornfive.nl/school/screenshot1.gif)，您可以看到我的目录结构目前的样子

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:31:36.033

```
package javaapplicationschool;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class JavaApplicationSchool extends JFrame {
public static void main(String[] args) {
    JOptionPane.showMessageDialog(null, "Hello World");
    JOptionPane.showMessageDialog(null, "Goodbye");
    System.exit(0);
}
} 
```

阅读更多关于[包的信息。](http://docs.oracle.com/javase/tutorial/java/concepts/package.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:29:16.100

写在最上面

```
package javaapplicationschool; 
```

如果您的源代码位于目录路径 a/b/c 中，则为 package`a.b.c;`错误似乎具有误导性，因为 package 语句是可选的 -*当*您将源代码放在源代码的根目录中时（尽管这是一种不好的做法） .

*您可以在 NetBeans 的“文件”选项卡中看到目录结构。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T09:34:08.793

我可以在 Eclipse 中运行此代码。这不是错误，而是我收到的警告。尝试删除未使用的导入。

```
import java.awt.*;
import java.awt.event.*; 
```

# windows-phone-7 - 在 xna 中读取文件二进制文件？

> ID：10071276
> 
> 赞同：1
> 
> 时间：2012-04-09T09:24:07.570
> 
> 标签：windows-phone-7, xna, binary

*我想在fileName*中从 x 处读取 10 个字节并保存到 bitLevel 我写道：

```
byte[] bitLevel = new byte[10];
using(FileStream fileStream = new FileStream(fileName, FileMode.Open, FileAccess.Read))
{
       fileStream.Read(bitLevel, x,10);
       //some code
} 
```

但在 bitLevel 中什么都没有，我迷路了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:58:54.437

**更新：** 听起来您的程序可能没有在正确的位置查找文件。在打开文件之前尝试添加以下内容以验证文件的完整路径以及它是否存在。如果这是问题所在，请检查**Project Properties的****Debug**选项卡下的**Working Directory**。

 ****```
fileName = Path.GetFullPath(fileName);
System.Diagnostics.Debug.Assert(File.Exists(fileName), "Error: Could not find " + fileName); 
```

* * *

**Read**函数的第二个参数指定将放置读取字节的数组中的字节偏移量。它没有指定要读取的流中的偏移量。使用**Seek**函数设置流的读取位置。

```
using (FileStream fileStream = new FileStream(fileName, FileMode.Open, FileAccess.Read))
{
   fileStream.Seek(x, SeekOrigin.Begin);
   fileStream.Read(bitLevel, 0, 10);
   //some code
} 
```****

# mysql - 如何将数据库字段条目向右移动

> ID：10071278
> 
> 赞同：1
> 
> 时间：2012-04-09T09:24:20.470
> 
> 标签：mysql, database

我有一个 MySQL 数据库。

在它的表中有一个名为“itm_name”的字段

我正在尝试从此字段中检索几位数据。

但是，由于不规则的空白和对齐，存在一些不均匀性。

是否可以将一些条目向右移动并用 WhiteSpace 替换移动的区域？

例如：

```
From:

CHOCOABLOC        (CH Egg.  |

To:

    CHOCOABLOC          (CH Egg.  | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:31:32.207

```
update your_table
set your_column = concat('  ', your_column)
where substring(your_column, 1, 2) != '  ' 
```

# android - 使用权限 android

> ID：10071279
> 
> 赞同：0
> 
> 时间：2012-04-09T09:24:42.323
> 
> 标签：android, permissions

在 AndroidManifest.xml 中，我添加了所有使用权限，现在我想删除我不需要的权限。我不使用相机或振动..我只使用简单的功能ajax，我使用互联网从服务器提取数据，我使用本地存储，所以我想知道不应该删除的使用权限。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T09:26:41.250

对于你的情况，这两个就足够了。

1.  **我只使用简单的函数 ajax，我使用 Internet 从服务器中提取数据，**

    ```
    <uses-permission android:name="android.permission.INTERNET" /> 
    ```

2.  **我使用本地存储，**

    ```
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:28:44.507

以下是您在 AndroidManifest.xml 中编写的权限

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# jquery - 提取数据值 - jQuery

> ID：10071280
> 
> 赞同：0
> 
> 时间：2012-04-09T09:24:52.387
> 
> 标签：jquery, web-services

我从我的 jquery 调用 web 服务

```
$.ajax({
        type: "POST",
        url: "/DataService.asmx/Search",
        contentType: "application/json; charset=utf-8",
        data: "{'date' : '" + $("#txtDate").val() + "'}",
        dataType: "json",
        success: function (data) {

        },
        error: function (req, status, error) {
        }
    }); 
```

在数据中收到一些值，例如`"[{"Id":10,"Name":"abdul samathu","Mobile":"8147708287","Email":"shanish.mca@gmail.com"}]"`

在这里我怎样才能单独获得这些值，我试过了

```
var name=data.Name;
var mobile=data.Mobile like this, but its not working can anyone help me here 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T09:29:13.273

利用

`data[0].Name`和`data[0].Mobile`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:31:34.023

我在这里做的是调用 Web 服务，循环 json 对象并打印项目名称。您可以根据需要更改它，但这有效。

```
$.ajax({
    url: "/DataService.asmx/Search",
    dataType: "json",
    type: "POST",
    cache: false,
    processData: false,
    data: "{'date' : '" + $("#txtDate").val() + "'}",
    contentType: "application/json; charset=utf-8",
    success: function (data) {

        if (data.d != null)
            data = data.d;

for (var i = 0; i < data.length ; i++) {
    console.log(data[i].Name);
}

    },
    error: function (x, y, z) { } // 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T09:30:29.373

而不是 $.ajax 使用 $.getJSON() 使用请通过以下链接 [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T09:28:50.897

你`data`是一个对象数组，而不是单个对象。用于`data[0].Name`访问第一个对象的名称。

编辑：根据您的帖子，由于某种原因，`data`它看起来像一个字符串，而不是正确的 JSON 解码数组。尝试以下操作：

```
data = jQuery.parseJSON(data);
console.log(data);
var name = data[0].Name;
console.log(name); 
```

# android - 复选框单击 Android 上的可扩展视图

> ID：10071284
> 
> 赞同：1
> 
> 时间：2012-04-09T09:25:40.567
> 
> 标签：android, view

我正在寻找一种在有人单击复选框时扩展视图的方法。
如果 checkbox = true，则视图会展开。如果为假，则视图折叠。
基本思想是我有一个 newPokerGame 类，如果游戏是锦标赛（复选框），则某些视图将展开，您可以选择多少玩家等。
我只是不知道实现这一点的最佳方法是什么。有任何想法吗？
问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:29:17.253

听复选框切换，使用`onCheckChangedListener`

```
yourCheckBox.setOnCheckedChangeListener(new OnCheckedChangeListener()
{
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if ( isChecked ) {
        // show the view
        } else {
        // hide the view
        }
    }
}); 
```

要实现“展开”视图，请创建您想要展开/折叠的布局，因为您希望它在展开模式下显示，并且只需设置将其包含在 onCheckChanged 内的布局的可见性。使用 View 的`setVisibility(View.VISIBLE);` 或`setVisibility(View.GONE);`

# javascript - Javascript 更改 Div 样式

> ID：10071286
> 
> 赞同：38
> 
> 时间：2012-04-09T09:25:48.043
> 
> 标签：javascript

我希望`part 1`onclick div 样式发生变化，然后`part 2`再次单击它恢复正常。我试过这样做，但我没有达到`part 2`结果。

以下是Javascript代码

```
function abc() {
    document.getElementById("test").style.color="red";
} 
```

再次单击测试 div 后，颜色应恢复为默认颜色，即黑色...

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-09T09:28:56.377

```
function abc() {
    var color = document.getElementById("test").style.color;
    if (color === "red")
         document.getElementById("test").style.color="black";
    else
         document.getElementById("test").style.color="red";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T09:35:49.680

使用 jQuery：

```
$(document).ready(function(){
    $('div').click(function(){
        $(this).toggleClass('clicked');
    });
});​ 
```

[活生生的例子](http://jsfiddle.net/jackdent/L6VqK/9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T09:30:49.680

有一些逻辑来检查颜色或有一些标志，

```
function abc() {
    var currentColor = document.getElementById("test").style.color;

    if(currentColor == 'red'){
    document.getElementById("test").style.color="black";
    }else{
   document.getElementById("test").style.color="red";

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T09:35:04.360

```
function abc() {
    var color = document.getElementById("test").style.color;
    color = (color=="red") ? "black" : "red" ;
    document.getElementById("test").style.color= color;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T09:30:49.493

您可以在单击更改颜色之前检查颜色。

```
function abc(){
     var color = document.getElementById("test").style.color;
     if(color==''){
         //change
     }else{
         //change back
     }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T09:33:28.113

一个简单的 switch 语句应该可以解决问题：

```
function abc() {
    var elem=document.getElementById('test'),color;
    switch(elem.style.color) {
        case('red'):
            color='black';
            break;
        case('black'):
        default:
            color='red';
    }
    elem.style.color=color;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-09T09:35:35.280

最好更改元素的类（.regular 为黑色，.alert 为红色）：

```
function abc(){
  var myDiv = document.getElementById("test");
  if (myDiv.className == 'alert') {
    myDiv.className = 'regular';
  } else {
    myDiv.className = 'alert';
  }
} 
```

# javascript - xml 到 json 一项数组问题

> ID：10071294
> 
> 赞同：5
> 
> 时间：2012-04-09T09:26:49.390
> 
> 标签：javascript

我正在尝试**使用 javascript**将 xml 转换为 javascript 对象。考虑以下示例

```
**Example 1**
**XML**

  <animal>
    <dog>dogname1</dog>
    <dog>dogname2</dog>
    </animal>

**JSON**

  animal {
    dog : ['dogname1', 'dogname2']
    }

**Notice that dog is of type array**

**Example 2**

  <animal>
    <dog>dogname1</dog>

    </animal>

**JSON**

  animal {
    dog : {'dogname1'}
    } 
```

**注意这里的狗是字符串类型。问题是我需要它作为数组，即使它的计数只有 1**

xml到json转换的代码

```
/*
xml2json v 1.1
copyright 2005-2007 Thomas Frank

This program is free software under the terms of the 
GNU General Public License version 2 as published by the Free 
Software Foundation. It is distributed without any warranty.
*/

xml2json={
    parser:function(xmlcode,ignoretags,debug){
        if(!ignoretags){ignoretags=""};
        xmlcode=xmlcode.replace(/\s*\/>/g,'/>');
        xmlcode=xmlcode.replace(/<\?[^>]*>/g,"").replace(/<\![^>]*>/g,"");
        if (!ignoretags.sort){ignoretags=ignoretags.split(",")};
        var x=this.no_fast_endings(xmlcode);
        x=this.attris_to_tags(x);
        x=escape(x);
        x=x.split("%3C").join("<").split("%3E").join(">").split("%3D").join("=").split("%22").join("\"");
        for (var i=0;i<ignoretags.length;i++){
            x=x.replace(new RegExp("<"+ignoretags[i]+">","g"),"*$**"+ignoretags[i]+"**$*");
            x=x.replace(new RegExp("</"+ignoretags[i]+">","g"),"*$***"+ignoretags[i]+"**$*")
        };
        x='<JSONTAGWRAPPER>'+x+'</JSONTAGWRAPPER>';
        this.xmlobject={};
        var y=this.xml_to_object(x).jsontagwrapper;
        if(debug){y=this.show_json_structure(y,debug)};
        return y
    },
    xml_to_object:function(xmlcode){
        var x=xmlcode.replace(/<\//g,"§");
        x=x.split("<");
        var y=[];
        var level=0;
        var opentags=[];
        for (var i=1;i<x.length;i++){
            var tagname=x[i].split(">")[0];
            opentags.push(tagname);
            level++
            y.push(level+"<"+x[i].split("§")[0]);
            while(x[i].indexOf("§"+opentags[opentags.length-1]+">")>=0){level--;opentags.pop()}
        };
        var oldniva=-1;
        var objname="this.xmlobject";
        for (var i=0;i<y.length;i++){
            var preeval="";
            var niva=y[i].split("<")[0];
            var tagnamn=y[i].split("<")[1].split(">")[0];
            tagnamn=tagnamn.toLowerCase();
            var rest=y[i].split(">")[1];
            if(niva<=oldniva){
                var tabort=oldniva-niva+1;
                for (var j=0;j<tabort;j++){objname=objname.substring(0,objname.lastIndexOf("."))}
            };
            objname+="."+tagnamn;
            var pobject=objname.substring(0,objname.lastIndexOf("."));
            if (eval("typeof "+pobject) != "object"){preeval+=pobject+"={value:"+pobject+"};\n"};
            var objlast=objname.substring(objname.lastIndexOf(".")+1);
            var already=false;
            for (k in eval(pobject)){if(k==objlast){already=true}};
            var onlywhites=true;
            for(var s=0;s<rest.length;s+=3){
                if(rest.charAt(s)!="%"){onlywhites=false}
            };
            if (rest!="" && !onlywhites){
                if(rest/1!=rest){
                    rest="'"+rest.replace(/\'/g,"\\'")+"'";
                    rest=rest.replace(/\*\$\*\*\*/g,"</");
                    rest=rest.replace(/\*\$\*\*/g,"<");
                    rest=rest.replace(/\*\*\$\*/g,">")
                }
            } 
            else {rest="{}"};
            if(rest.charAt(0)=="'"){rest='unescape('+rest+')'};
            if (already && !eval(objname+".sort")){preeval+=objname+"=["+objname+"];\n"};
            var before="=";after="";
            if (already){before=".push(";after=")"};
            var toeval=preeval+objname+before+rest+after;
            eval(toeval);
            if(eval(objname+".sort")){objname+="["+eval(objname+".length-1")+"]"};
            oldniva=niva
        };
        return this.xmlobject
    },
    show_json_structure:function(obj,debug,l){
        var x='';
        if (obj.sort){x+="[\n"} else {x+="{\n"};
        for (var i in obj){
            if (!obj.sort){x+=i+":"};
            if (typeof obj[i] == "object"){
                x+=this.show_json_structure(obj[i],false,1)
            }
            else {
                if(typeof obj[i]=="function"){
                    var v=obj[i]+"";
                    //v=v.replace(/\t/g,"");
                    x+=v
                }
                else if(typeof obj[i]!="string"){x+=obj[i]+",\n"}
                else {x+="'"+obj[i].replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")+"',\n"}
            }
        };
        if (obj.sort){x+="],\n"} else {x+="},\n"};
        if (!l){
            x=x.substring(0,x.lastIndexOf(","));
            x=x.replace(new RegExp(",\n}","g"),"\n}");
            x=x.replace(new RegExp(",\n]","g"),"\n]");
            var y=x.split("\n");x="";
            var lvl=0;
            for (var i=0;i<y.length;i++){
                if(y[i].indexOf("}")>=0 || y[i].indexOf("]")>=0){lvl--};
                tabs="";for(var j=0;j<lvl;j++){tabs+="\t"};
                x+=tabs+y[i]+"\n";
                if(y[i].indexOf("{")>=0 || y[i].indexOf("[")>=0){lvl++}
            };
            if(debug=="html"){
                x=x.replace(/</g,"&lt;").replace(/>/g,"&gt;");
                x=x.replace(/\n/g,"<BR>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")
            };
            if (debug=="compact"){x=x.replace(/\n/g,"").replace(/\t/g,"")}
        };
        return x
    },
    no_fast_endings:function(x){
        x=x.split("/>");
        for (var i=1;i<x.length;i++){
            var t=x[i-1].substring(x[i-1].lastIndexOf("<")+1).split(" ")[0];
            x[i]="></"+t+">"+x[i]
        }   ;
        x=x.join("");
        return x
    },
    attris_to_tags: function(x){
        var d=' ="\''.split("");
        x=x.split(">");
        for (var i=0;i<x.length;i++){
            var temp=x[i].split("<");
            for (var r=0;r<4;r++){temp[0]=temp[0].replace(new RegExp(d[r],"g"),"_jsonconvtemp"+r+"_")};
            if(temp[1]){
                temp[1]=temp[1].replace(/'/g,'"');
                temp[1]=temp[1].split('"');
                for (var j=1;j<temp[1].length;j+=2){
                    for (var r=0;r<4;r++){temp[1][j]=temp[1][j].replace(new RegExp(d[r],"g"),"_jsonconvtemp"+r+"_")}
                };
                temp[1]=temp[1].join('"')
            };
            x[i]=temp.join("<")
        };
        x=x.join(">");
        x=x.replace(/ ([^=]*)=([^ |>]*)/g,"><$1>$2</$1");
        x=x.replace(/>"/g,">").replace(/"</g,"<");
        for (var r=0;r<4;r++){x=x.replace(new RegExp("_jsonconvtemp"+r+"_","g"),d[r])}  ;
        return x
    }
};

if(!Array.prototype.push){
    Array.prototype.push=function(x){
        this[this.length]=x;
        return true
    }
};

if (!Array.prototype.pop){
    Array.prototype.pop=function(){
        var response = this[this.length-1];
        this.length--;
        return response
    }
};

module.exports=xml2json 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-09T09:43:13.580

简单的解决方案是使用 Jquery for Json。可能这个链接会帮助你。首先，您必须解析您的 xml 以创建 JSON。

[使用 jQuery 将表单数据转换为 JavaScript 对象](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery)

# python - 用于 Java 注释的 Python 正则表达式

> ID：10071295
> 
> 赞同：1
> 
> 时间：2012-04-09T09:26:49.457
> 
> 标签：python, regex, annotations

我正在尝试检测文本中的有效 Java 注释。这是我的测试程序（为了简单起见，我目前忽略了所有空格，稍后我将添加它）：

```
txts = ['@SomeName2',                   # match
        '@SomeName2(',                  # no match
        '@SomeName2)',                  # no match 
        '@SomeName2()',                 # match
        '@SomeName2()()',               # no match
        '@SomeName2(value)',            # no match
        '@SomeName2(=)',                # no match
        '@SomeName2("")',               # match
        '@SomeName2(".")',              # no match
        '@SomeName2(",")',              # match
        '@SomeName2(value=)',           # no match
        '@SomeName2(value=")',          # no match
        '@SomeName2(=3)',               # no match
        '@SomeName2(="")',              # no match
        '@SomeName2(value=3)',          # match
        '@SomeName2(value=3L)',         # match
        '@SomeName2(value="")',         # match
        '@SomeName2(value=true)',       # match
        '@SomeName2(value=false)',      # match
        '@SomeName2(value=".")',        # no match
        '@SomeName2(value=",")',        # match
        '@SomeName2(x="o_nbr ASC, a")', # match

        # multiple params:
        '@SomeName2(,value="ord_nbr ASC, name")',                            # no match
        '@SomeName2(value="ord_nbr ASC, name",)',                            # no match
        '@SomeName2(value="ord_nbr ASC, name"insertable=false)',             # no match
        '@SomeName2(value="ord_nbr ASC, name",insertable=false)',            # match
        '@SomeName2(value="ord_nbr ASC, name",insertable=false,length=10L)', # match

        '@SomeName2 ( "ord_nbr ASC, name", insertable = false, length = 10L )',       # match
       ]

#regex = '((?:@[a-z][a-z0-9_]*))(\((((?:[a-z][a-z0-9_]*))(=)(\d+l?|"(?:[a-z0-9_, ]*)"|true|false))?\))?$'
#regex = '((?:@[a-z][a-z0-9_]*))(\((((?:[a-z][a-z0-9_]*))(=)(\d+l?|"(?:[a-z0-9_, ]*)"|true|false))?(,((?:[a-z][a-z0-9_]*))(=)(\d+l?|"(?:[a-z0-9_, ]*)"|true|false))*\))?$'

regex = r"""
    (?:@[a-z]\w*)                               # @ + identifier (class name)
    (
      \(                                        # opening parenthesis
        (
          (?:[a-z]\w*)                          # identifier (var name)
          =                                     # assigment operator
          (\d+l?|"(?:[a-z0-9_, ]*)"|true|false) # either a numeric | a quoted string containing only alphanumeric chars, _, space | true | false
        )?                                      # optional assignment group
      \)                                        # closing parenthesis
    )?$                                         # optional parentheses group (zero or one)
    """

rg = re.compile(regex, re.VERBOSE + re.IGNORECASE)

for txt in txts:
    m = rg.search(txt)
    #m = rg.match(txt)
    if m:
        print "MATCH:   ",
        output = ''
        for i in xrange(2):
            output = output + '[' + str(m.group(i+1)) + ']'
        print output
    else:
        print "NO MATCH: " + txt 
```

所以基本上我所拥有的似乎适用于零个或一个参数。现在我正在尝试将语法扩展到零个或多个参数，就像在上一个示例中一样。

然后，我复制了代表分配的正则表达式部分，并在第 2 到第 n 组（该组现在使用 * 而不是？）前面加上逗号：

```
regex = '((?:@[a-z][a-z0-9_]*))(\((((?:[a-z][a-z0-9_]*))(=)(\d+l?|"(?:[a-z0-9_, ]*)"|true|false))?(,((?:[a-z][a-z0-9_]*))(=)(\d+l?|"(?:[a-z0-9_, ]*)"|true|false))*\))?$' 
```

然而那**行不通**。问题似乎是如何处理第一个元素，因为它必须是可选的，然后像第一个扩展示例这样的字符串`'@SomeName2(,value="ord_nbr ASC, name")'`将被接受，这是错误的。我不知道如何使第 2 次到第 n 次分配仅取决于第一个（可选）元素的存在。

可以做到吗？是这样做的吗？你如何最好地解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:57:54.963

如果你只是想检测有效的语法，我相信下面的正则表达式会给你你想要的匹配。但我不确定你对这些小组做了什么。您是否也希望每个参数值都在其自己的组中？那会更难，我什至不确定正则表达式是否可行。

```
regex = r'((?:@[a-z][a-z0-9_]*))(?:\((?!,)(?:(([a-z][a-z0-9_]*(=)(?:("[a-z0-9_, ]*")|(true|false)|(\d+l?))))(?!,\)),?)*\)(?!\()|$)' 
```

如果您需要单独的参数/值，您可能需要为此编写一个真正的解析器。

**编辑：** 这是一个评论版本。我还删除了许多捕获和非捕获组，以使其更易于理解。如果将其与`re.findall()`它一起使用，它将返回两组：函数名和括号中的所有参数：

```
regex = r'''
(@[a-z][a-z0-9_]*) # function name, captured in group
(                  # open capture group for all parameters
\(                 # opening function parenthesis 
  (?!,)            # negative lookahead for unwanted comma
  (?:              # open non-capturing group for all params
  [a-z][a-z0-9_]*  # parameter name
  =                # parameter assignmentoperators
  (?:"[a-z0-9_, ]*"|true|false|(?:\d+l?)) # possible parameter values
  (?!,\))          # negative lookahead for unwanted comma and closing parenthesis
  ,?               # optional comma, separating params
  )*               # close param non-capturing group, make it optional
\)                 # closing function parenthesis 
(?!\(\))           # negative lookahead for empty parentheses
|$                 # OR end-of-line (in case there are no params)
)                  # close capture group for all parameters
''' 
```

在阅读了您对参数的评论后，最简单的事情可能是使用上面的正则表达式提取所有参数，然后编写另一个正则表达式提取名称/值对以按照您的意愿处理。不过，这也很棘手，因为参数值中有逗号。我将把它作为练习留给读者:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T11:28:03.470

# 使用 re.VERBOSE 标志

你在这里做了一些有趣的事情。这是您的原始正则表达式：

```
regex = '((?:@[a-z][a-z0-9_]*))(\((((?:[a-z][a-z0-9_]*))(=)(\d+l?|"
(?:[a-z0-9_, ]*)"|true|false))?\))?$' 
```

对于初学者，请使用 re.VERBOSE 标志，这样您就可以将其拆分为多行。这样正则表达式中的空格和注释不会影响其含义，因此您可以记录正则表达式试图做什么。

```
regex = re.compile("""
((?:@[a-z][a-z0-9_]*))     # Match starting symbol, @-sign followed by a word
(\(
    (((?:[a-z][a-z0-9_]*))                     # Match arguments??
    (=)(\d+l?|"(?:[a-z0-9_, ]*)"|true|false))? # ?????
\))?$
""", re.VERBOSE + re.IGNORECASE) 
```

由于您还没有记录这个正则表达式试图做什么，我不能进一步分解它。使用 re.VERBOSE 记录任何重要的正则表达式的意图，将其拆分为多行并对其进行注释。

* * *

# 将问题分解为可管理的部分

您的正则表达式很难理解，因为它试图做的太多。就目前而言，您的正则表达式正在尝试做两件事：

1.  匹配形式的符号名称`@SomeSymbol2`，可选地后跟带括号的参数列表，`(arg1="val1",arg2="val2"...)`
2.  验证带括号的参数列表的内容，以便`(arg1="val1",arg2="val2")`通过但`(232,211)`不通过。

我建议将其分为两部分，如下所示：

```
import re
import pprint

txts = [
        '@SomeName2',              # match
        '@SomeName2(',             # no match
        '@SomeName2)',             # no match 
        '@SomeName2()',            # match
        '@SomeName2()()',          # no match
        '@SomeName2(value)',       # no match
        '@SomeName2(=)',           # no match
        '@SomeName2("")',          # no match
        '@SomeName2(value=)',      # no match
        '@SomeName2(value=")',     # no match
        '@SomeName2(=3)',          # no match
        '@SomeName2(="")',         # no match
        '@SomeName2(value=3)',     # match
        '@SomeName2(value=3L)',    # match
        '@SomeName2(value="")',    # match
        '@SomeName2(value=true)',  # match
        '@SomeName2(value=false)', # match
        '@SomeName2(value=".")',   # no match
        '@SomeName2(value=",")',   # match
        '@SomeName2(value="ord_nbr ASC, name")', # match

        # extension needed!:
        '@SomeName2(,value="ord_nbr ASC, name")', # no match
        '@SomeName2(value="ord_nbr ASC, name",)', # no match
        '@SomeName2(value="ord_nbr ASC, name",insertable=false)'
        ] # no match YET, but should

# Regular expression to match overall @symbolname(parenthesised stuff)
regex_1 = re.compile( r"""
^                   # Start of string
(@[a-zA-Z]\w*)      # Matches initial token. Token name must start with a letter.
                    # Subsequent characters can be any of those matched by \w, being [a-zA-Z0-9_]
                    # Note behaviour of \w is LOCALE dependent.
( \( [^)]* \) )?    # Optionally, match parenthesised part containing zero or more characters
$                   # End of string
""", re.VERBOSE)

#Regular expression to validate contents of parentheses
regex_2 = re.compile( r"""
^
(
    ([a-zA-Z]\w*)       # argument key name (i.e. 'value' in the examples above)
    =                   # literal equals symbol
    (                   # acceptable arguments are:
        true  |         # literal "true"
        false |         # literal "false"
        \d+L? |         # integer (optionally followed by an 'L')
        "[^"]*"         # string (may not contain quote marks!)
    )
    \s*,?\s*            # optional comma and whitespace
)*                      # Match this entire regex zero or more times
$
""", re.VERBOSE)

for line in txts:
    print("\n")
    print(line)
    m1 = regex_1.search(line)    

    if m1:
        annotation_name, annotation_args = m1.groups()

        print "Symbol name   : ", annotation_name
        print "Argument list : ", annotation_args

        if annotation_args:
            s2 = annotation_args.strip("()")
            m2 = regex_2.search(s2)
            if (m2):
                pprint.pprint(m2.groups())
                print "MATCH"
            else:
                print "MATCH FAILED: regex_2 didn't match. Contents of parentheses were invalid."
        else:
            print "MATCH"

    else:
        print "MATCH FAILED: regex_1 didn't match." 
```

这*几乎*可以让您找到最终解决方案。我能看到的唯一极端情况是这（错误地）匹配参数列表中的尾随逗号。（您可以使用简单的字符串操作来检查这一点`str.endswith()`。）

* * *

*事后编辑*：参数列表的语法实际上非常接近真实的数据格式——你可能会提供`argument_list`给 JSON 或 YAML 解析器，它会告诉你它是否好。如果可以的话，使用现有的轮子（JSON 解析器）而不是重新发明轮子。

除其他外，这将允许 -

*   识别 Javascript 支持的所有参数类型，包括浮点数等
*   支持字符串中的转义引号。现在，正则表达式将停止工作，`"This is a quote mark: \"."`因为它认为第二个引号结束了字符串。（它没有。）

这可以在正则表达式中完成，但它既可怕又复杂。

# c - 如果 cmd = 2 则不调用 ioctl

> ID：10071296
> 
> 赞同：11
> 
> 时间：2012-04-09T09:26:50.190
> 
> 标签：c, module, linux-kernel, ioctl

我正在开发一个使用 unlocked_ioctl 的内核模块。我用内核版本 2.6.24-23-generic 对其进行了测试，它运行良好。现在我用内核版本 3.3.1-1-ARCH 尝试了它，发生了一些奇怪的事情：当请求值（cmd）为 2 时，不执行 ioctl 函数。它返回 0，但不执行该函数。为了检查它是否未执行，我执行了以下操作：

```
static long midriver_ioctl(struct file *file,
    unsigned int cmd, unsigned long arg) {

printk("Called with cmd = %d\n", cmd); 
```

我编写了一个测试程序，从 0 到 4096 为这个设备调用 ioctl，我可以在 dmesg 中看到所有这些值的消息“用 cmd = n 调用”，除了“2”，唯一没有显示的值。

关于我做错了什么的任何线索？

先感谢您，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T09:32:17.730

看看[这个](http://lxr.linux.no/linux+v3.3.1/fs/ioctl.c#L546)：

```
 546 int do_vfs_ioctl(struct file *filp, unsigned int fd, unsigned int cmd,
 547             unsigned long arg)
 548 {
 549        int error = 0;
 550        int __user *argp = (int __user *)arg;
 551        struct inode *inode = filp->f_path.dentry->d_inode;
 552
 553        switch (cmd) {
 554        case FIOCLEX:
 555                set_close_on_exec(fd, 1);
 556                break;
 557
 558        case FIONCLEX:
 559                set_close_on_exec(fd, 0);
 560                break;
 561
 562        case FIONBIO:
 563                error = ioctl_fionbio(filp, argp);
 564                break;
 565
 566        case FIOASYNC:
 567                error = ioctl_fioasync(fd, filp, argp);
 568                break;
 569
 570        case FIOQSIZE:
 571                if (S_ISDIR(inode->i_mode) || S_ISREG(inode->i_mode) ||
 572                    S_ISLNK(inode->i_mode)) {
 573                        loff_t res = inode_get_bytes(inode);
 574                        error = copy_to_user(argp, &res, sizeof(res)) ?
 575                                        -EFAULT : 0;
 576                } else
 577                        error = -ENOTTY;
 578                break;
 579
 580        case FIFREEZE:
 581                error = ioctl_fsfreeze(filp);
 582                break;
 583
 584        case FITHAW:
 585                error = ioctl_fsthaw(filp);
 586                break;
 587
 588        case FS_IOC_FIEMAP:
 589                return ioctl_fiemap(filp, arg);
 590
 591        case FIGETBSZ:
 592                return put_user(inode->i_sb->s_blocksize, argp);
 593
 594        default:
 595                if (S_ISREG(inode->i_mode))
 596                        error = file_ioctl(filp, cmd, arg);
 597                else
 598                        error = vfs_ioctl(filp, cmd, arg);
 599                break;
 600        }
 601        return error;
 602 
```

如您所见，在`vfs_ioctl`或`file_ioctl`调用之前有一些 switch-case。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T09:45:36.830

正如@Ilya 所指出的，您遇到了一个通用案例（`FIGETBSZ`在这种情况下）。

通常，您希望使用具有唯一类型[`_IO`的宏系列](http://lxr.linux.no/linux+v3.3.1/include/asm-generic/ioctl.h#L83)来编写您的 ioctl 命令，以避免冲突。

我建议阅读内核文档中的[ioctl-number.txt](http://www.mjmwired.net/kernel/Documentation/ioctl-number.txt)以获取更多信息，包括最常用类型的列表

# .net - 将对象从一个进程传递到另一个进程

> ID：10071297
> 
> 赞同：6
> 
> 时间：2012-04-09T09:26:55.293
> 
> 标签：.net, process, ipc

我有两个 .NET 托管程序集。第一个是主应用程序，一个是独立工具。

现在我要做的是将小工具与主应用程序集成。因此，当用户单击主应用程序中的按钮时，需要将“用户定义的对象”传递给另一个小工具，该工具将运行到另一个不同的独立进程中。

但是我们只能向进程发送一个字符串参数。

什么是最好的方法呢？我需要发送给另一个进程的是包含每个文件设置的文件列表。这里的设置是我的“用户定义的对象”。

我对此有另一个转折。

第一次，如果您的进程没有运行，我将向它发送参数并运行该进程。但是，如果进程正在运行，我可以向它发送参数并将数据附加到现有的，而无需从头开始重新启动它。

对此有任何帮助。如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T09:31:39.967

在最简单的级别上，您可以将位置传递给包含序列化对象或其他一些配置选项的文件（可能在临时区域中）。

更有趣的是，您可以传递一些 IPC 通道信息——可能是连接套接字的端口号等——并建立任何你喜欢的 IPC：远程处理、WCF、原始套接字等等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T09:32:02.450

.NET 4 支持[内存映射文件](http://msdn.microsoft.com/en-us/library/dd997372.aspx)，这是一种在进程之间共享任意数据的简洁、方便且非常高效的机制（当然，您也可以通过技术含量更低的方式来实现这一点，例如通过写入临时文件）。

您可以从主进程创建一个非持久内存映射文件，将用户对象的序列化形式写入其中，然后从子进程中将其反序列化为对象。您将需要使对象类可序列化（显然），并将内存映射文件的名称从主进程传递给子进程；但是*名称*是一个字符串，因此您可以将其作为命令行参数传递。

MSDN 也有一个关于如何执行此操作的[示例。](http://msdn.microsoft.com/en-us/library/dd267552.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-17T06:41:09.010

我今天遇到了同样的问题。至少，我用这种方式解决了这个问题：

使用Newtonsoft.Json.dll，序列化和反序列化对象，并通过WM_COPYDATA消息传递字符串。

**在主机应用程序中：**

呼叫子应用程序：

```
private void RunChild()
{
    string appPath = Path.GetDirectoryName(Application.ExecutablePath);
    string childPath = Path.Combine(appPath, "ChildApp.exe");
    Process.Start(childPath, this.Handle.ToString());
} 
```

接收消息：

```
protected override void WndProc(ref Message m)
{
    base.WndProc(ref m);
    switch (m.Msg)
    {
        case WM_COPYDATA:
            COPYDATASTRUCT copyData = new COPYDATASTRUCT();
            Type type = copyData.GetType();
            copyData = (COPYDATASTRUCT)m.GetLParam(type);
            string data = copyData.lpData;
            RestorePerson(data);
            break;
    }
} 
```

反序列化对象：

```
private void RestorePerson(string data)
{
    var p = JsonConvert.DeserializeObject<Person>(data);
    txtName.Text = p.Name;
    txtAge.Text = p.Age.ToString();
} 
```

**在儿童应用程序中：**

获取主机句柄：

```
public ChildForm(string[] args)
{
    InitializeComponent();
    if (args.Length != 0)
        this.hostHandle = (IntPtr)int.Parse(args[0]);
} 
```

发送序列化字符串：

```
private void btnSubmit_Click(object sender, EventArgs e)
{
    this.person.Name = txtName.Text;
    this.person.Age = int.Parse(txtAge.Text);

    if (this.hostHandle != IntPtr.Zero)
    {
        string data = JsonConvert.SerializeObject(this.person);
        COPYDATASTRUCT cds = new COPYDATASTRUCT();
        cds.dwData = (IntPtr)901;
        cds.cbData = data.Length + 1;
        cds.lpData = data;
        SendMessage(this.hostHandle, WM_COPYDATA, 0, ref cds);
    }
}

//class Person can used by HostApp by add refrence.
[Serializable]
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

它工作正常！试试看？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T05:27:59.320

我为上述问题找到了两个很好的解决方案。

1）构造一个数据表，将所有给定的输入作为列并将其写为xml。并以该文件作为输入启动一个进程，并将该 xml 文件读入调用的进程。在这个解决方案中，我无法控制我的新进程，甚至无法调试它。这样做时我发现了很多复杂性。

2）所以找到了这个解决方案，将exe添加为对解决方案的引用，并简单地使用文件作为输入调用它作为对程序集的简单调用。现在完全控制它。我什至可以进行异常处理。

谢谢大家的回复。

# jquery - 如何在ckeditor中替换文本

> ID：10071299
> 
> 赞同：0
> 
> 时间：2012-04-09T09:27:06.267
> 
> 标签：jquery, ckeditor

您好为 ckeditor 创建了一个插件。我正在将选定的文本转换为大写或小写。

我已将其实现为

```
 var elementNode = editor.getSelection().getStartElement();
    var selectedText=editor.getSelection().getSelectedText();
    var nodeHtml=elementNode.getHtml();
    alert(nodeHtml);
    alert(selectedText);
    nodeHtml.replace(selectedText,selectedText.toUpperCase());
    alert(nodeHtml); 
```

我想用它的大写或小写版本替换这个文本。替换方法也不行。任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:30:34.147

为什么不使用 jquery replaceWith 函数。这将完全符合您的要求

```
$('#myElement').replaceWith(myValue); 
```

myElement 是选择元素的选择器。replaceWith 将为 myElement 分配新值。

# batch-file - 如何创建适用于 Program Files 和 Program Files(x86) 的批处理文件？

> ID：10071300
> 
> 赞同：13
> 
> 时间：2012-04-09T09:27:11.727
> 
> 标签：batch-file, 32bit-64bit, nsis, batch-processing

我创建了一个批处理文件，它会自动将 .sql 文件复制到安装的 Jasper 服务器的路径（它可以是任何软件安装目录）。

这是我的批处理脚本——

C:\PROGRA~2\JASPER~1.0\mysql\bin\mysql.exe -u root -proot < create_database.sql

当 jasper 安装在 Program Files(x86) 中时，这是有效的。我如何将它概括为 Program Files 和 Program Files(x86)。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-25T04:57:36.427

这是我从以下来源复制的一种方法：http: [//social.msdn.microsoft.com/Forums/zh/winforms/thread/69dc2aac-9956-40a0-9826-da48b9003a8e](http://social.msdn.microsoft.com/Forums/zh/winforms/thread/69dc2aac-9956-40a0-9826-da48b9003a8e)

```
SET ProgFiles86Root=%ProgramFiles(x86)%
IF NOT "%ProgFiles86Root%"=="" GOTO win64
SET ProgFiles86Root=%ProgramFiles%
:win64

"%ProgFiles86Root%\name of program" "arguments, etc." 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-09T09:36:24.613

您想使用环境变量来查找这样的内容。在 32 位 Windows 上，`%ProgramFiles%`是您的朋友。

在 64 位 Windows 上，事情有点复杂，因为应用程序可以安装在`%ProgramFiles%`和`%ProgramFiles(x86)%`.

如果您无法通过其他方式查找 Jasper 的位置（注册表？已安装的程序设置？），最好的办法是同时查看这两个位置，然后选择您可以找到预期目录的位置。

**编辑** 看到*nsis*标签 - 您正在创建安装程序吗？在这种情况下，常量[$ProgramFiles](http://nsis.sourceforge.net/Docs/Chapter4.html#4.2.3)可能很有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T09:57:51.450

在 NSIS 中，您通常可以假装 x64 不存在并使用`$programfiles`

在批处理文件中；如果定义了[%ProgramFiles(x86)%](http://msdn.microsoft.com/en-us/library/aa384274%28v=vs.85%29.aspx)，那么您可以假设您在 64 位系统上，并且 %ProgramFiles(x86)% 是 32 位文件夹，而 %ProgramFiles% 是 64 位文件夹。您还可以检查 PROCESSOR_*：[PROCESSOR_ARCHITEW6432](http://blogs.msdn.com/b/david.wang/archive/2006/03/26/howto-detect-process-bitness.aspx)是为在 64 位系统上运行的 32 位批处理文件定义的。PROCESSOR_ARCHITECTURE 是 x86-64/AMD64 位批处理文件的 AMD64（请记住，PROCESSOR_ARCHITECTURE 不仅仅是 x86 或 AMD64，还有 IA64 和 NT4 甚至更多值）

您还应该记住，变量可以由用户更改或可能根本不存在，因此如果您使用 NSIS 生成批次，最好使用 NSIS 为您提供的完整路径...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-23T09:10:50.377

简单的事情怎么样，

```
if exist "C:\Program Files (x86)" goto 64bit

goto 32bit

:32bit

(whatever u want to happen for the 32bit system)

:64bit

(whatever u want to happen for the 64bit system) 
```

我有一个像这样设置的脚本，并且适用于两个系统。

对不起，它不想保持格式正确的双倍间距。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-13T19:44:09.657

这是我的做法：

```
GOTO %PROCESSOR_ARCHITECTURE%

:AMD64
<64Bit code>
EXIT

:X86
<32bit code>
EXIT 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-28T03:46:29.513

似乎@RenniePet 的答案很好。对于另一种选择，这是我做的方式。[从这里](https://stackoverflow.com/questions/138981/how-do-i-test-if-a-file-is-a-directory-in-a-batch-script/28439918#28439918)的答案，主要来自@Samuel的答案，没有一个太有效和抄袭。使用此解决方案，仅依赖目录结构：没有参考环境变量。

```
@echo off
dir "C:\Program Files (x86)\\." > NUL 2>&1
if errorlevel 0 (
    set PROGRAMS_HOME="C:\Program Files (x86)"
    GOTO HomeSet
)
dir "C:\Program Files\\." > NUL 2>&1
if errorlevel 0 (
    set PROGRAMS_HOME="C:\Program Files"
    GOTO HomeSet
)   
GOTO NotWindows
:HomeSet
set PROGRAMS_HOME=%PROGRAMS_HOME:"=%
echo PROGRAMS_HOME set to *%PROGRAMS_HOME%*
:NotWindows 
```

# c - [ N ... M ] 在 C 聚合初始值设定项中是什么意思？

> ID：10071304
> 
> 赞同：102
> 
> 时间：2012-04-09T09:28:09.270
> 
> 标签：c, linux, kernel

从[sys.c](http://lxr.linux.no/#linux+v3.3.1/arch/unicore32/kernel/sys.c#L123)第 123 行：

```
void *sys_call_table[__NR_syscalls] = 
{
    [0 ... __NR_syscalls-1] = sys_ni_syscall,
#include <asm/unistd.h>
}; 
```

`sys_call_table`是指向数组的通用指针，我可以看到。但是符号是什么：

```
[0 ... __NR_syscalls-1] 
```

是什么`...`？

* * *

**编辑：**
我在这里学到了另一个 C 技巧：`#include <asm/unistd.h>`将被*预处理*并替换为其内容并分配给`[0 ... _NR_syscalls-1]`.

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-04-09T09:30:20.767

它是使用**[Designated Initializers](http://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html)**进行的初始化。

基于范围的初始化是一个 gnu gcc 扩展。

> 要将一系列元素初始化为相同的值，请编写`[first ... last] = value`. 这是一个 GNU 扩展。例如，
> 
> ```
>  int widths[] = { [0 ... 9] = 1, [10 ... 99] = 2, [100] = 3 }; 
> ```

它不是便携式的。用 with 编译`-pedantic`告诉你。

**它是如何在这里工作的？**
预处理器在基于范围的构造中替换`#include <asm/unistd.h>`为它的实际内容（*它定义了各种符号常量和类型，并声明了各种函数*），然后进一步用于初始化指针数组。

# opengl-es - GLSL ES 中的最大程序

> ID：10071306
> 
> 赞同：3
> 
> 时间：2012-04-09T09:28:16.007
> 
> 标签：opengl-es, glsl

可以在 GLSL ES 中编译的最大程序数是多少？所以假设我创建了 100 个片段着色器，每个都是不同的效果。所以在运行时我编译所有它们并动态地用glUseProgram交换它们。我假设每次我编译一个新的 GLSL-ES 程序时，它都会保存在 GPU 的某个地方。活动编译程序的最大数量是否有限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T17:15:29.700

没有最大限制。唯一的限制是可用内存或由 GPU 或其驱动程序控制的其他资源。

同样，纹理对象或顶点缓冲区对象的数量没有最大限制。

# php - 一个数的除数的除数

> ID：10071307
> 
> 赞同：-1
> 
> 时间：2012-04-09T09:28:18.250
> 
> 标签：php, algorithm, numbers

如果我们试图找到一个数 N 的所有除数 D(array)，那么 D 中每个 d 的除数也会在 D 的计算中自动计算出来。有没有办法可以找到一个数 N 的所有除数通过找到其所有除数的除数，然后最后将它们相加。显然，有一种方法，但我想要一种没有重复计算的方法。我认为这可以通过递归来完成，但我不知道如何进行。我正在提供计算数字 N 的所有除数的实现。我想以某种方式扩展它，在计算 N 的除数时，我还计算所有除数的除数（并保存它们）。最后，我可以把它们加起来，得到我想要的。但在整个过程中，好处是我也得到了所有除数的除数，而不需要任何额外的努力（即，

```
function divisors_of_a_number($n)//returns all the divisors of a number in an unsorted array
{
$i=1;
$s=bcsqrt($n);
while($i<=$s)
{
if(!(bcmod($n,$i)))
{
    $a[]=$i;
    if($i!=$s)
    $a[]=bcdiv($n,$i);
}
++$i;
}
return $a;
} 
```

这是一个澄清这一点的示例 - 假设 N 是 6。所以 N 的除数是 - {1,2,3,6}。现在，'3' 是 N 的除数。这意味着除以 '3' 的数（即它的除数）也将除 N。因此，我们可以说 '3' 的除数将除 N。同样，对于N 的每个除数 d，我们可以说 d 的除数也是 N 的除数。因此，当我们计算 N 的除数时，我们计算其每个除数 d 的所有除数。我想要一种方法，在计算 N=6 的除数时，我也得到 {1}、{2}、{3} 的除数（并保存它们）而无需额外计算（因为它们都已经被计算为 6） .

作为一个活生生的例子，如果 N=20，我希望我的函数在某种意义上工作，它返回一个数组数组。现在外部数组包含键作为 20 的除数，即键将是 {20,10,5,4,2,1}。现在，与这些键关联的是数组。这些数组中的每一个都是它们各自键的除数。现在，如果我取所有内部数组的元素的交集，我将得到 20 的除数。这意味着，即使我只计算 20 的除数，也会计算所有元素。但是，我想得到所需的输出无需任何额外计算。额外的计算意味着我显然可以计算 20 的除数的除数并返回数组数组。但是，我不想这样做，因为我知道“所有 20 的除数的除数都是自己计算的，而 20 的除数的计算”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:01:03.233

我不确定你想要什么，但我认为这个简单的脚本可以帮助你..让我知道它是否足够

尝试

```
function arrayOfDivisors($x) {
    $divisors = array ();
    for($i = 1; $i < $x; $i ++) {
        if ($x % $i == 0) {
            $divisors [] = $i;
        }
    }
    return $divisors;
}

$divisors = arrayOfDivisors ( 20 );
var_dump ( $divisors ); // List Divisors
var_dump ( array_sum ( $divisors ) )  // Total 
```

输出

```
array
  0 => int 1
  1 => int 2
  2 => int 4
  3 => int 5
  4 => int 10

int 22   // Total 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T02:58:17.203

这是列出一个数字的除数的算法：

y = x + 1 限制 -> n

z = (ny)%((n+y)%n)

如果 z = 0，y 是 n 的除数。

祝你好运;D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T03:28:57.373

您想要的输出的一种简单方法是首先计算原始数字的素数分解，然后使用它来枚举所有除数（及其所有除数）。

看到这不能比任何其他方法更有效的一种方法是注意从您想要的输出中很容易得出这个（例如，您知道主要因素，因为它们恰好有两个因素，然后可以检查是否有更高的权力是除数）。

# javascript - 在学习 JQuery 之前学习 JavaScript？

> ID：10071308
> 
> 赞同：-3
> 
> 时间：2012-04-09T09:28:21.553
> 
> 标签：javascript, jquery

2012 年刚接触 JavaScript，是先学 JavaScript 再学 jQuery 还是直接学 jQuery？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T09:29:38.980

Javascript 是一门语言，jQuery 是一个库。

**学习**javascript，然后**使用**jQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:33:44.477

**是的..!!** * *jQuery* * 是一个**库/框架**，它本身是用**javascript**编写的，它是一种**脚本语言**。所以它有助于学习javascript。一旦您对 JavaScript 有一点了解，您将能够更好地利用 JQuery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T09:32:54.850

在任何时候，如果没有良好的语言知识，您就无法使用库编写有效的代码。学完 Javascript 之后，学习库就很容易了，事实上，有很多 javascript 库。甚至 javascipt 在服务器端脚本 ( [Node.js](http://www.nodejs.org) ) 方面也很有名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T09:30:16.407

我建议先学习 JavaScript，jQuery 是建立在 JavaScript 之上的工具，有时您可能想使用 JavaScript 中的其他工具（例如 Handlebars.js）。但是学习这些工具背后的语言，当您想要开发富客户端应用程序时，您将拥有相当广泛的工具库。

有时 jQuery 可能无法解决您的问题，但通过学习 JavaScript，您将找到可以解决问题的解决方案，或者能够创建自己的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-09T09:40:06.440

如果您是程序员/开发人员，毫无疑问您应该在 jQuery 之前学习 javascript。

如果你只“学习 jQuery”（如果你不学习 javascript，这无论如何都是不可能的），你永远无法理解你在做什么。

但是，如果您学习 javascript，那么学习 jQuery 就不会遇到太多麻烦，因为它只是一堆 javascript。

如果您是一名设计师，您可能不需要所有这些，只需坚持复制粘贴 jQuery 片段/插件配置即可。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-04-09T09:59:46.710

我没有学过javascript，我只学过jquery。

```
<script scr="jquery.min.js">
///
</script> 
```

它确实有效。jquery 已经包含了旧 javascript 中可用的所有功能，从 CSS 到 DOM 等等。对我来说，是 jquery 定义了我，而不是 javascript。

可以用 JS 完成的事情可以用 jquery 轻松实现，因为 jquery 是用 js 编写的，并且为用户提供了不同的编码风格，以弥补 js 中嘈杂、冗长和明显容易出错的问题。

# sql - 如何将sql命令结果保存到文件中（postgresql）

> ID：10071309
> 
> 赞同：1
> 
> 时间：2012-04-09T09:28:23.443
> 
> 标签：sql, postgresql, command-line

我在 PostgreSQL 中有大量包含超过 300000 个插入命令。我什至无法将它加载到 pgAdmin 中（它崩溃了）。所以我使用命令行和 \i 来执行文件。我想查看错误消息（如果有）。如何通过命令行将消息保存到日志文件中？感谢您的帮助谢谢

**编辑** 我已经看过[其他一些帖子](https://stackoverflow.com/questions/5331320/psql-save-results-of-command-to-a-file)，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:41:24.593

来自 unix-prompt：（windows 可能有类似的机制）。

```
psql -U my_username my_databasename < the_script.sql >the_output.log 
```

更新：上面的命令假设执行它的用户能够读取“the_script.sql”并且用户可以写入“the_output.log”（在这种情况下是在当前目录中）如果你不能在那里写出于某种原因，您总是可以写入 /tmp，如`psql -U my_username my_databasename < the_script.sql >/tmp/other_output.log`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-13T13:14:23.740

```
psql -e -f file_name db_name 2>&1 > log.txt 
```

您会发现大多数有趣的日志都是从 psql 发送到 stderr 的，因此将 stderr 重定向到 stdout 然后将它们放入 log.txt 文件中应该可以工作。

# mercurial - 具有多个同级文件夹的 Mercurial 和 subrepos

> ID：10071310
> 
> 赞同：1
> 
> 时间：2012-04-09T09:28:32.927
> 
> 标签：mercurial

假设我有这个文件夹结构：

*   父文件夹
    *   A1
    *   A2
    *   A3
    *   乙
    *   C

是否可以保留上述文件夹结构并拥有 3 个 Mercurial 子存​​储库 A、B、C，其中：

*   A：包含文件夹 A1、A2、A3
*   B 包含文件夹 B
*   C 包含文件夹 C

同样，我不想创建将 A1、A2、A3 作为子文件夹的子存储库 A，我正在寻找一种方法来保留上面的文件结构。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:47:37.073

实现这一点的唯一可能方法是创建一个`A`包含`A1`、`A2`、`A3`以及存储库`B`和子存储库的存储库`C`。

*   ParentFolder（的子存储库`A`）
    *   A1
    *   A2
    *   A3
    *   B（in 的子存储`B`库`A`）
    *   C（in 的子存储`C`库`A`）

由于您不能只克隆存储库的一部分，因此您不能这样做。

# iphone - 在横向查看时，纵向拍摄的图像失真

> ID：10071313
> 
> 赞同：2
> 
> 时间：2012-04-09T09:28:46.770
> 
> 标签：iphone, ios, ipad

我创建了一个视图，其中有一个捕获按钮。当我单击该按钮时，相机屏幕正在打开。但是在横向查看时，纵向拍摄的图像会失真。如何获得不失真的实际图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T09:37:37.217

如果您在 ios 5 上工作，那么您必须在捕获图像并存储到照片时手动调用此函数。

```
 - (UIImage *)fixOrientation : (UIImage *)img
 {
if (img.imageOrientation == UIImageOrientationUp) return img;
CGAffineTransform transform = CGAffineTransformIdentity;

switch (img.imageOrientation) {
    case UIImageOrientationDown:
    case UIImageOrientationDownMirrored:
        transform = CGAffineTransformTranslate(transform, img.size.width, img.size.height);
        transform = CGAffineTransformRotate(transform, M_PI);
        break;

    case UIImageOrientationLeft:
    case UIImageOrientationLeftMirrored:
        transform = CGAffineTransformTranslate(transform, img.size.width, 0);
        transform = CGAffineTransformRotate(transform, M_PI_2);
        break;

    case UIImageOrientationRight:
    case UIImageOrientationRightMirrored:
        transform = CGAffineTransformTranslate(transform, 0, img.size.height);
        transform = CGAffineTransformRotate(transform, -M_PI_2);
        break;
}

switch (img.imageOrientation) {
    case UIImageOrientationUpMirrored:
    case UIImageOrientationDownMirrored:
        transform = CGAffineTransformTranslate(transform, img.size.width, 0);
        transform = CGAffineTransformScale(transform, -1, 1);
        break;

    case UIImageOrientationLeftMirrored:
    case UIImageOrientationRightMirrored:
        transform = CGAffineTransformTranslate(transform, img.size.height, 0);
        transform = CGAffineTransformScale(transform, -1, 1);
        break;
}

CGContextRef ctx = CGBitmapContextCreate(NULL, img.size.width, img.size.height,
                                         CGImageGetBitsPerComponent(img.CGImage), 0,
                                         CGImageGetColorSpace(img.CGImage),
                                         CGImageGetBitmapInfo(img.CGImage));
CGContextConcatCTM(ctx, transform);
switch (img.imageOrientation) {
    case UIImageOrientationLeft:
    case UIImageOrientationLeftMirrored:
    case UIImageOrientationRight:
    case UIImageOrientationRightMirrored:
        // Grr...
        CGContextDrawImage(ctx, CGRectMake(0,0,img.size.height,img.size.width), img.CGImage);
        break;

    default:
        CGContextDrawImage(ctx, CGRectMake(0,0,img.size.width,img.size.height), img.CGImage);
        break;
}

CGImageRef cgimg = CGBitmapContextCreateImage(ctx);
UIImage *img1 = [UIImage imageWithCGImage:cgimg];
CGContextRelease(ctx);
CGImageRelease(cgimg);
return img1;

 }

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
self.image = [info objectForKey:UIImagePickerControllerOriginalImage];
snapimage.image = [self fixOrientation:self.image];

 }
- (void)imagePickerController:(UIImagePickerController *)picker1 
    didFinishPickingImage:(UIImage *)image1
              editingInfo:(NSDictionary *)editingInfo
{

[picker1 dismissModalViewControllerAnimated:YES];
snapimage.image = [self fixOrientation:image1];
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:36:11.710

`shouldAutorotateToInterfaceOrientation`您需要在方法中将横向的图像自定义到视图的中心

试试这样：

```
if(interfaceOrientation == UIInterfaceOrientationLandscapeRight || UIInterfaceOrientationLandscapeLeft)

{
     here customize the rect of your image
} 
```

# android - 在快速操作中包含列表视图

> ID：10071317
> 
> 赞同：1
> 
> 时间：2012-04-09T09:29:06.183
> 
> 标签：android, android-listview, quickaction

我正在尝试为要在其中包含图像按钮和列表视图的按钮创建一个快速操作对话框。

代码片段：

```
lv=new ListView(this);
        ArrayAdapter<String> myad=new ArrayAdapter<String>(QuickActionActivity.this, android.R.layout.simple_list_item_1,myList);
        lv.setAdapter(myad);

        ActionItem myicon=new ActionItem(ID_DOWN,getResources().getDrawable(R.drawable.menu_ok));
        quickAction.addActionItem(myicon);
ActionItem mixlist=new ActionItem();
        mixlist.setActionId(ID_UP);
        mixlist.setLv(lv);

        quickAction.addActionItem(mixlist); 
```

这是正确的方法吗？

# visual-studio-2010 - 如何消除使用 YASM 构建的 VC++ 2010 中的 PropertyPageSchema 警告？

> ID：10071318
> 
> 赞同：0
> 
> 时间：2012-04-09T09:29:07.910
> 
> 标签：visual-studio-2010, visual-c++, xsd, warnings

我正在尝试使用 VS 2010 构建 Brian Gladman 的 C 代码，它使用模块化汇编程序 YASM。它构建没有错误，但有警告。警告说：

> 警告 1 命名空间“http://schemas.microsoft.com/developer/msbuild/2003”中的元素“ItemGroup”在命名空间“http://schemas.microsoft.com/developer/msbuild/”中具有无效的子元素“PropertyPageSchema” 2003 年'。预期的可能元素列表：'Item、Reference、COMReference、COMFileReference、Xdcmake、Bscmake、ClCompile、ClInclude、Midl、ResourceCompile、PreLinkEvent、CustomBuildStep、Manifest、ProjectConfiguration、NativeReference、ProjectReference、Compile、EmbeddedResource、Content、Page、Resource、ApplicationDefinition , 无, BaseApplicationManifest, 文件夹, 导入, 服务, WebReferences, WebReferenceUrl, FileAssociation, BootstrapperFile, PublishFile, CodeAnalysisDependentAssemblyPaths, CodeAnalysisDictionary, CodeAnalysisImport, Link, ResourceCompile, PreBuildEvent, PostBuildEvent' 在命名空间“http://schemas.microsoft.com/developer/msbuild/2003”中。E:\Visual Studio Projects\Downloaded Projects\BG aes-vs2010-11-01-11\vsyasm.targets 4 6

生成警告的代码的开头来自文件 vsyasm.targets。它包含：

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
 <ItemGroup>
   <PropertyPageSchema
     Include="$(MSBuildThisFileDirectory)$(MSBuildThisFileName).xml" />
   <AvailableItemName
     Include="YASM">
     <Targets>_YASM</Targets>
   </AvailableItemName>
 </ItemGroup>
 ... 
```

第一个警告位于 PropertyPageSchema 行上。有谁知道如何抑制警告？它使用的架构来自 2003 年。是否有更新的架构可以消除警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T23:20:51.750

我刚刚安装了 Visual Studio 2010 并安装了 SP1。安装 SP1 后，仍会生成警告。但是，随后 Windows 更新随后提供了一些更新。事实证明，更新最终使问题消失了。问题解决了。

# java - java：如何用 apache 或 lighttpd 编写服务器？

> ID：10071319
> 
> 赞同：1
> 
> 时间：2012-04-09T09:29:11.573
> 
> 标签：java, apache, lighttpd

我想用 Java 编写一个服务器端代码来访问数据库。像 , 这样的请求`http://localhost/name=jack`将访问数据库并返回 jack 的信息。

我想使用 Apache 或 lighttpd 网络服务器。但是，关于这些服务器配置的大部分页面都是关于JavaEE的，我只想使用javaSE来实现这个程序，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:31:43.503

请您使用 java web start，它使用带有普通 HTTP 服务器的 java SE，您在这里不需要 web 容器/Java EE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:00:45.167

您可以使用 GlassFish 3 来完成。它是免费的。它内置了 JavaDB 服务器。

# android - 一个 Fragment 中的两个 ListFragment

> ID：10071320
> 
> 赞同：0
> 
> 时间：2012-04-09T09:29:13.103
> 
> 标签：android, android-fragments, android-listfragment

我使用 android 兼容性支持包在 android 中创建了以下内容

![在此处输入图像描述](../Images/40f33bf5dd72ec32e668626a2cb532d4.png)

基本上我有一个显示两个选项卡的 FragmentAcitivity。一个 Tab 代表`Fragment #1`，第二个是`Fragment #2`。Fragment #2 有两个 ListFragment 即 ListFragment #1 和 ListFragment #2 ，但问题是当我尝试这样做时，我遇到了以下错误。

```
 android.view.InflateException: Binary XML file line #10: Error inflating class fragment
     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:582)
     at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
     at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
     at com.myexample.template.TextVoiceFragment.onCreateView(TextVoiceFragment.java:19)
     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:837)
     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1041)
     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:616)
     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1359)
     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:422)
     at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:86)
     at android.support.v4.view.ViewPager.populate(ViewPager.java:453)
     at android.support.v4.view.ViewPager.onAttachedToWindow(ViewPager.java:563)
     at android.view.View.dispatchAttachedToWindow(View.java:6015)
     at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:1124)
     at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:1129)
     at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:1129)
     at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:1129)
     at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:1129)
     at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:1129)
     at android.view.ViewRoot.performTraversals(ViewRoot.java:731)
     at android.view.ViewRoot.handleMessage(ViewRoot.java:1744)
     at android.os.Handler.dispatchMessage(Handler.java:99)
     at android.os.Looper.loop(Looper.java:143)
     at android.app.ActivityThread.main(ActivityThread.java:4914)
     at java.lang.reflect.Method.invokeNative(Native Method)
     at java.lang.reflect.Method.invoke(Method.java:521)
     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
     at dalvik.system.NativeStart.main(Native Method)
 Caused by: java.lang.IllegalStateException: Content view not yet created
     at android.support.v4.app.ListFragment.ensureList(ListFragment.java:328)
     at android.support.v4.app.ListFragment.getListView(ListFragment.java:222)
     at com.myexample.template.VoiceTemplate.onActivityCreated(VoiceTemplate.java:82)
     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:858)
     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1020)
     at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1099)
     at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:263)
     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:558) 
```

***二进制 XML***

```
<fragment class="com.myexample.template.VoiceTemplate" 
    android:id="@+id/voiceListFragment"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1" 
/> 
```

***第 19 行包含***TextVoiceFragment.class 的 onCreateView 内部，在这种情况下是 Fragment #2

```
 return inflater.inflate(R.layout.text_voice_fragment, container, false); 
```

***第 82 行包含***在 VoiceTemplate.class 的 onActivityCreated 内的代码中，它扩展了 ListFragment 和 ListFragment #2

```
// 
getListView().setOnItemClickListener( new OnItemClickListener(){

    @Override
    public void onItemClick(AdapterView<?> adapterView, View view,
            int position, long arg3) {
        // TODO Auto-generated method stub
    }

 }); 
```

我尝试用 FragmentActivity 替换 Fragment #2，如下所示

![在此处输入图像描述](../Images/1b733940b72003a924e4552d4be9b94c.png)

但在那种情况下，我会收到以下错误

```
 java.lang.ClassCastException: com.myexample.template.TextVoiceFragment 
```

这里 TextVoiceFragment 是 Tab 秒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:55:04.327

我不确定这是否会造成您的问题，但将来您可能会遇到其他问题，因为不支持嵌套片段。

您可以阅读 Android 框架工程师的回答：[Android：您可以嵌套 Fragments 吗？](https://stackoverflow.com/questions/6221763/android-can-you-nest-fragments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:37:29.703

您可以拥有一个包含两个 ListFragment 的 Activity。这基本上就是您在 GMail 应用程序中看到的内容。如果您希望 Fragment #1 出现在 ListFragment #1 和 ListFragment #2 旁边，则必须将所有 3 作为同级放在同一个 Layout 或 FragmentManager 中。

# bash - 如何在 bash 脚本中发出信号？

> ID：10071324
> 
> 赞同：2
> 
> 时间：2012-04-09T09:29:20.507
> 
> 标签：bash, signals

我写了一个脚本来做一些备份。有一个`if`要求确认的块：

```
read -p "Do you want to continue? [y/n]" confirm

if [[ ${confirm} == "n" ]]; then
    # do something like CTRL+Z, and halt until I run fg <job number> to activate this script
else
    # do some stuff
fi 
```

谁能帮忙？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T09:33:17.567

你可以使用`kill -STOP $$`, 或者`bash`你可以使用`suspend`命令。

# c# - 数组初始化方式

> ID：10071329
> 
> 赞同：4
> 
> 时间：2012-04-09T09:30:14.173
> 
> 标签：c#, linq

我知道我们可以通过以下两种方式之一初始化数组：

1.  循环（无内存反射问题）
2.  `Enumerable.Repeat`（可能导致内存问题？链接：[Enumerable.Repeat 有一些内存问题？](https://stackoverflow.com/questions/10071032/enumerable-repeat-has-some-memory-issues)）

我有两个问题：

1.  我们可以用`Array.ForEach`这种方式初始化一个数组吗？

    ```
    double[][] myarr = new double[13][];

    Array.ForEach(myarr, *enter_code_here*); 
    ```

    我尝试替换`enter_code_here`为：

    ```
    s => s = new double[2]; 
    ```

    但它没有初始化`myarr`。

2.  没有任何内存问题的其他数组初始化方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T09:39:58.797

您可以`Enumerable.Repeat`很好地初始化任何数组。唯一需要注意的是，如果数组元素是引用类型，则有两种方法可以解决：

```
// #1: THIS ARRAY CONTAINS 10 REFERENCES TO THE SAME OBJECT
var myarr = Enumerable.Repeat(new object(), 10).ToArray();

// #2: THIS ARRAY CONTAINS REFERENCES TO 10 DIFFERENT OBJECTS
var myarr = Enumerable.Range(0, 10).Select(i => new object()).ToArray();

// #3: SAME RESULT AS #2 BUT WITH Enumerable.Repeat
var myarr = Enumerable.Repeat(0, 10).Select(i => new object()).ToArray(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T09:33:08.827

A1：不，你不能。Foreach 只执行以元素为参数的方法，但不修改元素。

A2：您可以使用以下方法解决问题

```
static T[][] CreateArray<T>(int rows, int cols)
{
    T[][] array = new T[rows][];
    for (int i = 0; i < array.GetLength(0); i++)
        array[i] = new T[cols];

    return array;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T16:02:26.007

这就是我创建 256 行 x 2 列数组并将所有值初始化为 -1 的方式。

`int[][] myArr = Enumerable.Range(0, 256).Select(i => new int[2] {-1, -1}).ToArray();`

# c# - .net mvc 会话超时即使在添加会话状态之后

> ID：10071336
> 
> 赞同：0
> 
> 时间：2012-04-09T09:30:43.700
> 
> 标签：c#, asp.net-mvc-3

应用：

-.net MVC 3 / c# / SQL Server 2008

问题：

*   离开应用程序无人看管不超过 5 分钟后，必须再次登录。
*   有时，即使在应用程序内部工作时，我也会在某个地方单击，它会将我带回登录屏幕。
*   没有任何错误弹出出现，只需要再次登录。

我知道这篇文章有一些主题，但我想在我的 web.config 文件中添加我当前使用的代码。我试图在里面添加会话超时标签，但问题仍然存在。

我没有粘贴所有代码，但我正在添加我认为与此问题相关的代码，如果我遗漏了其他内容，请告诉我。

这是我添加的：

```
<sessionState mode="InProc" timeout="200000"/>
         <customErrors mode="Off"/>

<authentication mode="Forms">
      <forms loginUrl="Login/Login">
      </forms>
    </authentication>

    <authorization>
      <deny users="?" />
    </authorization> 
```

还有什么我想念的吗？我觉得添加 sesstionstate 行后没有任何改变。据我了解，没有 sessionstate 行，默认值为 30 分钟，但在此之前我会被踢出局。

我还看到一些 sesstionstate 设置超过了我添加的行，所以不确定我是否遗漏了一些东西。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:55:11.293

在 ASP.NET 中，会话超时和表单身份验证票证超时是不同的概念。这些值存储在不同的 cookie 中并且不相关。要增加超时，请参阅[KB910443](http://support.microsoft.com/kb/910443 "了解表单身份验证票证和 Cookie")并尝试修改`<authentication>`web.config 的标签，如下所示：

```
<authentication mode="Forms">
  <forms loginUrl="Login/Login" timeout="200000" slidingExpiration="true">
  </forms>
</authentication> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:42:34.383

您是否自己实例化了身份验证票？然后检查那里的超时。

此外，您可以检查您是否使用 jQuery 空闲超时。

# asp.net - 以编程方式发送回发

> ID：10071340
> 
> 赞同：1
> 
> 时间：2012-04-09T09:30:52.523
> 
> 标签：asp.net, postback

我已经为挑选日期构建了一个自定义 Web 控件。它由 3 个下拉列表组成。在他们的 selectedIndexChanged 事件中，我检查这样的日期。

```
 protected void SelectedIndexChanged(object sender, EventArgs e)
{
    DropDownList ddList = sender as DropDownList;
    if (ddlDays.SelectedIndex > 0 && ddlMonths.SelectedIndex > 0 && ddlYears.SelectedIndex > 0)
    {
        int day = ddlDays.SelectedIndex;
        int month = ddlMonths.SelectedIndex;
        int year = int.Parse(ddlMonths.SelectedValue);
        try
        {
            DateTime date = new DateTime(year, month, day);
        }
        catch
        {

            if (OnDateNotValid != null)
                OnDateNotValid("Entered date is not valid");
            //Here I want to invoke PosBack on the page where I use this control
        }
    }
} 
```

我实际上将警告标签文本更改为错误描述，但由于标签未显示的形式中没有回发。这里有一些考虑： 1\. 我将下拉列表的 AutoPostBack 属性设置为 false，因为每次更改 itemindex 后重新加载页面都令人沮丧。2\. 我尝试在控件上放置一个按钮并调用它的 onbuttonclick 事件，但它不起作用。

现在，如果我的控件发现日期无效，我需要向页面发送回发。

PS 当我在 SelectedIndexChganged 方法的开始处设置断点并更改任何下拉列表的索引时，调试器不会在该断点处停止。我已将所有下拉列表 SelectedIndexChanged 事件分配给此方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:59:06.783

你可以通过javascript回发

利用`__doPostback('ButtonRenderedId','');`

当您的 AutoPostback="true"`javascript:setTimeout('__doPostBack(\'DropDownList1\',\'\')', 0)` 呈现在 html 中时。

表示通过 javascript 更改的每个索引上的间接页面回发。

如果你的自动回发是假的，你可以手动回发。

了解更多点击下方 [如何使用 __doPostBack()](https://stackoverflow.com/questions/3591634/how-to-use-dopostback)

# python - Python-如何在列中写入数据块？

> ID：10071342
> 
> 赞同：0
> 
> 时间：2012-04-09T09:31:04.033
> 
> 标签：python

我有要写入 txt 或 csv 文件的数据块。这些数据块作为子列表包含在

```
data=[[('a1','b1'),('c1','d1')],
      [('a2','b2'),('c2','d2'),('e2','f2')],
      [('a3','b3'),('c3','d3'),('e3','f3')]] 
```

我希望这些块出现在由选项卡分隔的列集中。
有任何想法吗？
谢谢你，
吉姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T09:44:04.517

```
>>> from itertools import izip_longest
>>> data=[[('a1','b1'),('c1','d1')],[('a2','b2'),('c2','d2'),('e2','f2')],[('a3','b3'),('c3','d3'),('e3','f3')]]
>>> for columns in izip_longest(*data,fillvalue=''):
        print '\t'.join(map(' '.join,columns))

a1 b1   a2 b2   a3 b3
c1 d1   c2 d2   c3 d3
        e2 f2   e3 f3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:42:22.570

[在此处](http://docs.python.org/library/string.html#format-examples)查看文档以获取有关如何进行此操作的一些示例。您可以根据需要定义一个“选项卡”，无论是 2 个或 4 个空格，还是适合您的应用程序的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T09:45:43.897

CSV 模块提供了一个名为“DictWriter”的类，它将完全满足您的要求。你可以看看[这里](http://docs.python.org/library/csv.html#csv.DictWriter)

# java - 来自mysql数据库的mapView覆盖项目

> ID：10071345
> 
> 赞同：0
> 
> 时间：2012-04-09T09:31:15.950
> 
> 标签：java, android, mysql, google-maps

我是 Android 新手，遇到了一些问题：

我创建了一个地图视图，需要从 mysql 数据库中获取我的叠加项目，数据库中有很多兴趣点，所以我需要限制它说离用户最近的 50 个 pois。首先，我如何从我的数据库中获取信息以显示为覆盖？其次，我如何将其限制为距离用户位置最近的 x 个点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:40:07.373

首先通过[这里](http://developer.android.com/guide/tutorials/views/hello-mapview.html)您可以看到如何在地图上显示叠加层。

为了展示前 50 个位置，我的想法是，

1st.In 数据库存储与当前位置的距离。

第二。按升序获取它们。

3rd.然后在 MapView 中只显示前 50 个项目

[看到这个](https://stackoverflow.com/questions/3077994/how-to-calculate-distance-between-two-geopoints-with-android-mapview)来计算点之间的距离

[研究地图](http://mobiforge.com/developing/story/using-google-maps-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:39:15.610

首先从数据库中获取所有的经纬度，然后计算与当前位置的距离。然后找出距离您当前位置较近的 50 个距离并将它们存储在地图中，然后尝试创建叠加层...

# php - Wordpress 多个循环在行动 - 导航重复

> ID：10071347
> 
> 赞同：2
> 
> 时间：2012-04-09T09:31:18.183
> 
> 标签：php, wordpress

我已经在网上阅读了一些关于他的问题的信息，但我没有认真的解决方案。我阅读的资源： http:
[//codex.wordpress.org/The_Loop#Multiple_Loops_in_Action](http://codex.wordpress.org/The_Loop#Multiple_Loops_in_Action)

[http://wordpress.org/support/topic/next_posts_link-not-displays-same-posts-not-next-posts-when-using-offset](http://wordpress.org/support/topic/next_posts_link-not-displays-same-posts-not-next-posts-when-using-offset) - 完全相同的问题。

现在这是我在 index.php 中的代码：

```
<!--slider-->
<div id="featured"> 
            <?php 
                // query the posts of your custom post types
                query_posts('posts_per_page=5');
                if (have_posts()) : while (have_posts()) : the_post(); ?>

<!--main body-->
    <?php 
                // query the posts of your custom post types
                query_posts('posts_per_page=5&offset=5');
                if (have_posts()) : while (have_posts()) : the_post(); ?> 
```

当我按下下一个帖子时，我会得到相同的正文帖子副本。
解决方案是什么？

**编辑：** 我写了新代码：

```
// featured
$slider = new WP_Query(array('posts_per_page' => 5));
if ($slider->have_posts()) : while ($slider->have_posts()) : $slider->the_post();

//main:
    $p = get_query_var('paged');
                if($p >0){
                $main = new WP_Query(array('posts_per_page' => 5, 'paged'=>get_query_var('paged')));
                }else{
                $main = new WP_Query(array('posts_per_page' => 5, 'offset' => 5,'paged'=>get_query_var('paged')));
                }
                if ($main->have_posts()) : while ($main->have_posts()) : $main->the_post(); 
```

//导航：

```
<div class="navigation" >
    <div class="next-posts"><div class="nextBtn2"><?php previous_posts_link(); ?></div></div>
    <div class="prev-posts"><?php next_posts_link(); ?></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:51:26.910

您应该将 WP_Query 用于辅助循环（特色）并将 query_posts 用于主体。
它工作 95%
它将在最后一页中断，因为它会尝试获取（非常）最后 5 个项目，但那 5 个将在偏移量中。:(
因此，在倒数第二页上，您需要隐藏“下一页”分页....

```
$featured = new WP_Query(array('posts_per_page' => 5));
if ($featured->have_posts()) : while ($featured->have_posts()) :
    $featured->the_post();

//shouldn't be needed if u use only one query_posts but it won't hurt
wp_reset_query();

$paged = get_query_var('paged');
$wanted_offset = 5;
// page zero won't need a hack
if ($paged != 0 ) {
    $post_per_page = 3;
    //$paged -1 because there is no page 1, just 0 and 2
    $offset = ($paged-1) * $post_per_page + get_query_var('posts_per_page');
} else {
    $offset = get_query_var('posts_per_page');    
}
query_posts('offset=' . $offset);
if (have_posts()) : while (have_posts()) : the_post(); 
```

让我知道它是否也适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:34:00.993

我在制作wordpress主题时已经遇到了这个问题，

实际上，当您使用时，有很多方法可以显示 post 循环

query_posts，您可能需要在循环后重置查询

```
<?php

// The Query
query_posts('posts_per_page=5');   
// The 1st Loop
while ( have_posts() ) : the_post();
    //your first set of latest posts
endwhile;  
// Reset Query
wp_reset_query();

//Second Query
query_posts(array('paged'=>$paged, 'offset'=>5));
// The 2nd Loop
while (have_posts()) : the_post();
    // your second set of posts
endwhile;
// Reset Query
    wp_reset_query();

?> 
```

您也可以在第二个循环中使用 get post（这个 wp 函数有一个偏移参数）

```
<?php
global $post;
$tmp_post = $post;
$args = array( 'numberposts' => 5, 'offset'=> 1, 'category' => 1 );
$myposts = get_posts( $args );
foreach( $myposts as $post ) : setup_postdata($post); ?>
    <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
<?php endforeach; ?>
<?php $post = $tmp_post; ?> 
```

[http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

如果您已经在滑块上发布了帖子，则可以在正文的第二个循环中使用它。

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:35:43.977

```
<?php if(is_home() && !is_paged()): ?>

?>

<?php else:
$setpo = get_option('posts_per_page');
$targ = $setpo*($paged-2)+11; ?>

<?php query_posts(array('category_name' => 'websites', 'offset' => $setpo));
endif; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T05:39:03.443

您是否尝试过使用 WP_Query 对象的两个实例？

```
<?php

// featured
$featured = new WP_Query(array('posts_per_page' => 5));
if ($featured->have_posts()) : while ($featured->have_posts()) : $featured->the_post();

// main body
$main = new WP_Query(array('posts_per_page' => 5, 'offset' => 5));
if ($main->have_posts()) : while ($main->have_posts()) : $main->the_post();

?> 
```

# openlayers - WMS中如何过滤点？

> ID：10071349
> 
> 赞同：0
> 
> 时间：2012-04-09T09:31:25.253
> 
> 标签：openlayers

我使用 WMS 作为覆盖图。我想过滤 WMS 中的点 shapefile。目前仅使用 WMS Code 整体显示。以下是代码。

```
var jpl_wms = new OpenLayers.Layer.WMS("Administrative Layer",
                "http://localhost:8080/geoserver/test/wms", 
                {layers: "maharashtra_administrative",transparent: true},{isBaseLayer:false});
                map.addLayer(jpl_wms); 
```

这是点文件。我想传递参数来限制要显示的点（即点<100）。如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T16:57:43.900

您可以通过附加过滤器来限制 WMS 图层中的点。首先根据形状文件中的某些属性创建过滤器：

```
var filter = new OpenLayers.Filter.Comparison({
   type: OpenLayers.Filter.Comparison.EQUAL_TO,
   property: "id",
   value: 5
}); 
```

这将创建过滤器对象。您需要将其解析为 XML 字符串。以下代码将完成这项工作：

```
 var parser = new OpenLayers.Format.Filter.v1_1_0();
 var filterAsXml = parser.write(filter);
 var xml = new OpenLayers.Format.XML();
 var filterAsString = xml.write(filterAsXml); 
```

现在您有了一个字符串，您可以将它附加到您的 WMS 图层：

```
jpl_wms.params["FILTER"] = filterAsString; 
```

如果图层已经绘制，您将需要调用`redraw()`方法以应用过滤器：

```
jpl_wms.redraw(); 
```

# java - Android TextToSpeech 只是拼写短词而不是发音

> ID：10071350
> 
> 赞同：4
> 
> 时间：2012-04-09T09:31:30.917
> 
> 标签：java, android, word, text-to-speech

我是`TextToSpeech`用来读单词的。此代码适用于大多数情况：

```
public void speak(String pContent) {
    if (!isAvailable() || !isReady()) return;
    this.mEngine.speak(pContent, TextToSpeech.QUEUE_ADD, null);
} 
```

但是，对于具有 3 个或更少字符的单词，例如`dog`，`cow`它只会拼写每个字符 (d - o - g)。像`cow milk`, 它拼写的词`cow`，然后`milk`正确阅读。

我做错什么了吗？

更多信息：我试过Android的PicoTTS，在Galaxy Tab上，我也试过三星TTS，他们都有这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:51:42.267

AFAIK 让 TTS 拼写单词的唯一方法是使用所有大写字母。我看不到你的 pContent，但也许你在喂它牛奶？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T02:05:47.327

我用西班牙语和英语测试了 dog、cow、ant 等词，但我找不到您报告的问题。您很可能在代码中遗漏了某些内容。使用下面的示例，并指出问题是否已解决。

我希望它有用。

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/TextToSpeechActivity.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/TextToSpeechActivity.html)

# google-chrome - 每个选项卡使用 chrome.browserAction.setPopup

> ID：10071357
> 
> 赞同：10
> 
> 时间：2012-04-09T09:31:59.763
> 
> 标签：google-chrome, google-chrome-extension

我正在编写一个 Chrome 扩展程序，它会根据当前 URL 动态更改弹出窗口的内容。

我在 background.js 中做这样的事情，效果很好：

```
if(domains.contains(request.url)){
    chrome.browserAction.setPopup({
        popup: "tracking.html"
    });
}else{
    chrome.browserAction.setPopup({
        popup: "nottracking.html"
    });
} 
```

问题是，如果我切换选项卡，弹出窗口的内容在选项卡之间保持不变。处理这个问题的正确策略是什么？

*   以某种方式挂钩选项卡更改事件（如果存在这种可能性）？
*   将弹出内容的更改限制为当前选项卡？（我确实注意到`tabId`chrome.browserAction.setPopup 有一个可选参数，但文档有点少）
*   还有什么？

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T09:35:51.380

选项1，绑定一个事件监听器：

用于[`chrome.tabs.onUpdated`](https://developer.chrome.com/extensions/tabs.html#event-onUpdated)侦听 URI 更改，然后[`chrome.browserAction.setPopup`](https://developer.chrome.com/extensions/browserAction.html#method-setPopup)使用给定`tabId`设置给定选项卡的弹出窗口。例如：

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    if (domains.contains(tab.url)) {
        chrome.browserAction.setPopup({
            tabId: tabId,
            popup: 'tracking.html'
        });
    } else {
        chrome.browserAction.setPopup({
            tabId: tabId,
            popup: 'nottracking.html'
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T05:46:05.000

只需将 TabId 传递给 setPopup 调用。[http://code.google.com/chrome/extensions/browserAction.html](http://code.google.com/chrome/extensions/browserAction.html)

我一直在我的后台页面中这样做：

```
chrome.browserAction.setPopup({"tabId":data.tabId,"popup":url}); 
```

奇迹般有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T22:46:23.017

[参数的`setpopup`对象现在支持一个`tabId`值。](http://developer.chrome.com/extensions/browserAction.html#method-setPopup) 您需要先获取当前选项卡的数字 id。这不需要额外的权限。

```
chrome.tabs.query({currentWindow: true, active: true}, function(tabs){
    var url = domains.contains(request.url) ? "tracking.html" : "nottracking.html";
    chrome.browserAction.setPopup({
       popup: url,
       tabId: tabs[0].id
    });
}); 
```

# php - 从 PHP 代码中删除/插入值到 Microsoft ACCESS？

> ID：10071359
> 
> 赞同：-1
> 
> 时间：2012-04-09T09:32:07.717
> 
> 标签：php, ms-access

如主题所述。连接到 Microsoft Access 数据库后，如何使用 PHP 代码插入记录或删除记录？谢谢！

编辑：我已经使用用户帐户成功登录，现在我想插入记录。如下是插入记录没有成功的代码。

```
<?php
session_start();
echo "Welcome: ". $_SESSION['role'];
?>
<?php
error_reporting(0);
if (!$_POST['submit'])
{  
?
<html>
<body>
<br><br>
<fieldset >  
Add a new user 
<br>
<br>
<label for='username'>Username: &nbsp;</label>  
<input type='text' name='username' id='username'/>  
<label for='password'>Password:&nbsp;</label>  
<input type='password' name='password' id='password' maxlength="50" />  
<form action="<?=$_SERVER['PHP_SELF']?>" method="post">
Role: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>
<select name="role">
<option value="" selected="selected"></option>
<option VALUE="Administrator"> Administrator</option>
<option VALUE="Secretary"> Secretary</option> 
<option VALUE="Employee"> Employee</option>
</select>
<input type='submit' name='Submit' value='Submit' />  
</form>
</fieldset>  
<table width=100%>
</html>
</body>
<?php
}
else
{
$conn=odbc_connect("employee","","") or die (odbc_errormsg());
if (!$conn)  
{
exit
("Connection Failed: " . $conn);
}
$query = "INSERT INTO empTable (empID, password, Role, Days left in MC, Days left in   leave) VALUES" .
"('$_POST[username]', '$_POST[password]', '$_POST[role]', 14, 14)";
$result=odbc_exec($conn,$query) or die ("result error ".odbc_error().'-'.odbc_errormsg());
odbc_fetch_row($result);
odbc_close($conn);
} 
```

单击提交按钮后，当我刷新我的数据库时，什么也没有出现。为什么呢？非常感谢

更新：添加了 POST[username]、POST[password]、POST[role]，但它仍然不起作用 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:46:57.060

如果您使用 XAMPP，它应该将 Mercury 邮件作为内置服务。打开 XAMPP 控制面板并启动 Mercury。不要改变任何东西。保留默认值。

然后在您的 php.ini 文件中，确保在“邮件功能”部分中没有注释这些行（从行的开头删除“;”以取消注释）：

```
SMTP = localhost
smtp_port = 25
sendmail_from = postmaster@localhost 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:44:12.210

您可以使用 php.ini 中的`odb_connect`( [documentation](http://www.php.net/manual/en/function.odbc-connect.php) ) 和`odbc_exec`( [documentation](http://www.php.net/manual/en/function.odbc-exec.php) ) 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:00:49.753

你必须有一个 smtp hot 才能在 php 中发送电子邮件。所以只需在 php.ini 文件中配置一个 smtp 主机。此 smtp 主机和端口详细信息可以从您的 Internet 提供商处获得。

我认为您还可以使用 gmail 等的 smtp 服务器进行身份验证

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T09:39:31.800

这应该让您开始连接到您的 Access DB 以及如何对其运行查询：

[http://networking.mydesigntool.com/viewtopic.php?tid=263&id=31](http://networking.mydesigntool.com/viewtopic.php?tid=263&id=31)

完成此操作后，您将能够像查询其他数据库一样查询数据库（当然要考虑任何访问特定的 SQL 限制或优势）。您提到了其他数据库，所以我假设您了解查询数据库以满足您的需求的基础`delete`知识`select`。

# javascript - 如何使用 javascript 存储永久值以创建试用应用程序

> ID：10071361
> 
> 赞同：1
> 
> 时间：2012-04-09T09:32:40.527
> 
> 标签：javascript, html, ajax, persistent-storage

我想创建一个静态语言的试用网页，该网页在客户端计算机上运行 10 天后到期，如果已达到截止日期，它会在客户端计算机中存储一个值，可用于通知截止日期并在应用程序中做一些限制。如果我在用户重置浏览器时使用 cookie 执行此操作，则此值不起作用。

我还有其他选择来存储永久价值吗？

我应该注意，我不想使用 activex 对象，我将使用软件加密代码以防止查看源代码...。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:34:46.327

尝试使用本地存储，它比 cookie 更持久，但它们不是永久的，本地存储也仅适用于 webkit 支持的浏览器，如 chrome、safari 等...

# ruby-on-rails - 在 rails 中使用 capybara 单击一个特定按钮

> ID：10071367
> 
> 赞同：15
> 
> 时间：2012-04-09T09:33:13.190
> 
> 标签：ruby-on-rails, rspec, click, integration-testing, capybara

我正在使用 rails 3，目前正在使用 selenium 驱动程序编写 capybara 测试，我有以下问题

在一种形式中，我有 3 个名为“保存并添加另一个”、“保存并继续编辑”和“保存”的按钮现在，如果我尝试通过 capybara 保存表单，如下所示

```
click_button 'Save' 
```

然后这会引发错误，称为“保存”按钮，找不到 id、title 或 value 现在如果我删除上面的 2 个按钮然后我尝试然后它可以工作

仅供参考，我的 3 个按钮的 html 如下，

`<input class="btn" type="submit" value="Save and add another" name="_addanother" data-disable-with="Save and add another">`

`<input class="btn" type="submit" value="Save and continue editing" name="_continue" data-disable-with="Save and continue editing">`

`<input class="btn" type="submit" value="Save" name="_save" data-disable-with="Save">`

如果有人有想法，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T10:05:23.010

我认为问题在于所有值都返回匹配项，因为它们都包含“保存”。

尝试为每个人分配一个独特的 id 并改用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-16T23:52:33.640

[Matching With Exactness](https://github.com/jnicklas/capybara#exactness) - 来自 GitHub 文档。与更改模板相比，使用精确性可能会产生较小的影响。

`click_button('Save', exact: true)`

这只会找到完全匹配并跳过“保存等等”操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T09:43:39.147

click_button 方法需要按钮的 id、名称、值。下面将起作用。

```
click_button 'Save and add another'
click_button 'Save and continue editing' 
```

最后一个按钮可以正常工作，因为它的值为“保存”

```
click_button 'Save' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-22T14:37:12.660

我想出了以下解决方案

模块 ValidUserRequestHelper

```
# for use in request specs
def sign_in_as_a_valid_user
  before(:each) do
    user = FactoryGirl.create :user
    visit user_session_path
    fill_in 'user_email', :with => 'name@email.com'
    fill_in 'user_password', :with => 'foobar'
    click_button 'Einloggen'
  end
end 
```

# r - 仅对箱线图中的中位数着色

> ID：10071371
> 
> 赞同：4
> 
> 时间：2012-04-09T09:33:28.250
> 
> 标签：r, colors, boxplot

有没有办法只为箱线图的中线而不是整个箱线图着色。

当我尝试这个时：

```
boxplot(matrix,col="red") 
```

然后整个盒子变成红色。我只想为箱线图的中线着色。

有没有办法在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-09T09:43:39.767

尝试`medcol`如下

```
boxplot(matrix(rnorm(100), ncol=2), medcol="red") 
```

![在此处输入图像描述](../Images/3fcaf4225c60b7ead334c33ad6f828e2.png)

# iphone - RSS 阅读器未在 WebView 中显示选定的单元格

> ID：10071372
> 
> 赞同：1
> 
> 时间：2012-04-09T09:33:30.630
> 
> 标签：iphone, ios, xcode, rss, webview

我一直在尝试按照[本教程](http://www.raywenderlich.com/2636/how-to-make-a-simple-rss-reader-iphone-app-tutorial)制作一个简单的 RSS 阅读器应用程序。

由于我使用的是 Xcode 4.3.2，因此必须对本教程进行一些调整。一切正常，它可以很好地加载所有 RSS 提要，但是当我单击一篇文章查看它时，会加载详细视图控制器，但它完全是空白的。我尝试向情节提要上的 DetailViewController 添加标签或按钮，但即使在加载时也不会出现。唯一可见的是顶部的导航栏。所以我的问题是我做错了什么？我确定这是一个简单的设置问题，而不是代码问题。事实上我可以将任何对象添加到视图中并且没有显示它几乎就像正在加载一个完全不同的视图控制器。任何帮助将不胜感激。这是我一直在使用的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    RSSEntry *entry = [_allEntries objectAtIndex:indexPath.row];
_webViewController.entry = entry;
[self.navigationController pushViewController:_webViewController animated:YES];

}

- (void)viewDidLoad
{

NSURL *url = [NSURL URLWithString:_entry.articleUrl];    
[self.webView loadRequest:[NSURLRequest requestWithURL:url]];
NSLog(@"The URL is %@",url);

} 
```

因为这段代码是从旧版本的 Xcode 改编而来的，它是否与故事板而不是单个 nib 文件有关？

好的 _webviewController 设置在 RootViewController.h

```
@interface RootViewController : UITableViewController <UITableViewDelegate> {
NSOperationQueue *_queue;
NSArray *_feeds;
NSMutableArray *_allEntries;
DetailViewController *_webViewController; 
```

}

```
@property (retain) NSOperationQueue *queue;
@property (retain) NSArray *feeds;
@property (retain) NSMutableArray *allEntries;
@property (retain) DetailViewController *webViewController; 
```

didselectRowAtIndex 在 RootViewController 中设置 & viewDidload 在 DetailViewController 中设置

我已经在故事板中设置了一个 push segue。

我现在已经用下面建议的方法替换了 tableView didSelectRowAtPath 方法

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
// test segue.identifier if needed
DetailViewController *viewController = segue.destinationViewController;
NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
// set properties of viewController based on selection indexPath
RSSEntry *entry = [_allEntries objectAtIndex:indexPath.row];
viewController.entry = entry;
} 
```

不幸的是，即使这似乎工作正常，我仍然得到一个空白的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:38:23.793

这里有多个问题。

1.  `_webViewController`在您尝试将其推到导航控制器上之前，我没有看到您正在设置任何内容的地方。这就是您看到“应用程序试图在目标上推送一个 nil 视图控制器”错误的原因，并且可能与您看到空白视图的原因有关。

2.  您在问题中引用的两种方法是否都在同一个类中实现？大概`didSelectRowAtIndexPath`是在您的表视图控制器中（Ray Wenderlich 教程中的 RootViewController），并且`viewDidLoad`在 Web 视图控制器中？如果是这样，请在提问时提供此类信息。如果没有，那可能是您问题的一部分。

3.  最重要的是，听起来您正在尝试调整教程以使用故事板。从好的方面来说，这意味着你可以在 IB 中做很多你必须在代码中做的事情。不利的一面是，这使得视图控制器之间的程序“流动”有很大不同，因此解释本教程有点困难。

使用情节提要的主要区别在于情节提要负责创建和推送/呈现您的视图控制器。（无论如何，让根视图控制器保留并重用 Web 视图控制器的实例是反模式。）这是您在故事板世界中做事的方式：

1.  假设您的故事板已经包含嵌入在导航控制器中的根表视图控制器，通过将您的 Web 视图控制器拖出`UIViewController`库并将其类标识设置为您的`WebViewController`.

2.  按住 Control 键从表格视图中的原型单元格拖动到 Web 视图控制器，并使其成为 Push segue：

    ![拖动以创建 segue](../Images/6f4c5cbbb706ca17d38f7b6104d3b79a.png)

3.  使用上述内容，您可以运行您的应用程序并从表格视图转到 Web 视图（无需代码——耶！），但 Web 视图不知道要加载哪个 URL。因此，您需要将以下内容放入表视图控制器中：

    ```
    - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
        // test segue.identifier if needed
        WebViewController *viewController = segue.destinationViewController;
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        // set properties of viewController based on selection indexPath
        RSSEntry *entry = [_allEntries objectAtIndex:indexPath.row];
        viewController.entry = entry;
    } 
    ```

4.  然后您需要 Web 视图控制器在其 Web 视图中加载 URL——`viewDidLoad`您已经拥有的实现应该对此有好处。

# algorithm - 多分辨率小波分解代码

> ID：10071376
> 
> 赞同：0
> 
> 时间：2012-04-09T09:34:06.550
> 
> 标签：algorithm, math, decomposition, wavelet, dwt

我不是高级数学，所以我只了解小波分解的基础知识。我找到[了 JWave](http://code.google.com/p/jwave/)，它是小波处理的 Java 实现。作者告诉我它本质上可以进行多维分解。

问题是我不知道如何将它用于此任务。

我特别想要一个 8-tap Daubechies。我的最终目标是能够预测数字序列中的下一个数字。[这个 URL](http://digirep.rhul.ac.uk/file/0034a6af-bae8-1c1c-4a5c-136e9ef34569/1/Murtagh-_Wavelet_based_combined_signal_filtering_and_prediction.pdf)给出了所有的数学，但没有代码。

我已经搜索过，但找不到任何有关如何执行此操作的代码。请有人指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:43:56.673

我找到了以下 FOS C# 代码：[Wavelet Studio](http://www.waveletstudio.net)。这是一个很好的起点。

# database - 数据库表可以是 REST 中的资源实体吗？

> ID：10071378
> 
> 赞同：1
> 
> 时间：2012-04-09T09:34:25.030
> 
> 标签：database, rest, service, resources, models

我想创建使用**数据库表**作为资源实体的 RESTful Web 服务。

```
PUT myservice/table/new creates a new table in database
DELETE myservice/table/1 deletes a table in database and so on... 
```

我如何为此设计模型？通常模型是为资源实体所在的表创建的，但我的资源不存在于任何表中，而是数据库本身！

这是可能的还是我没有任何意义？请帮我！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:59:22.340

是的，这是可能的，因为 REST 依赖于一个非常抽象和灵活的资源概念。只要接口遵循统一接口（标准方法、使用 URI 等），您就可以在幕后做*任何您喜欢的事情。*为某物创建 HTTP 接口的最佳理由之一是隐藏丑陋的实现细节并呈现这样一个统一的接口。

究竟如何在您选择的语言或环境中做到这一点是一个更详细的问题，但基础知识类似于 CherryPy 伪代码：

```
class Table:
    exposed = True
    def __init__(self, tablename):
        self.tablename = tablename
    def PUT(self):
        fields = parse_fields(cherrypy.request.body.read())
        db.execute("CREATE TABLE %s (%s)" % (self.tablename, fields))
    def DELETE(self):
        db.execute("DROP TABLE %s" % self.tablename)

class Tables:
    def _cp_dispatch(self, vpath):
        return Table(vpath.pop(0)) 
```

您必须自己连接“db”连接逻辑，并弄清楚客户端应该对字段定义有多少控制权（以及哪种媒体类型最适合传达它，以及如何将该媒体类型解析为有效的 SQL对于 CREATE TABLE 语句）。您还需*要比*“DROP TABLE {user input}”更好的安全性；）但希望这能让您走上正轨。

# node.js - NodeJS 和 Socket.io

> ID：10071380
> 
> 赞同：4
> 
> 时间：2012-04-09T09:34:35.583
> 
> 标签：node.js, socket.io

我刚刚安装了这些 nodejs 和 socket.io，但是在让客户端连接到服务器时遇到了问题。

在我的服务器中，我有：

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(3000, 'localhost');
console.log('Server running at http://localhost:3000/');

var io = require('socket.io').listen(3000);

io.sockets.on('connection', function (socket) {

  socket.emit('Hi.') ;

}); 
```

在我的客户上：

```
<script src="/socket.io/socket.io.js"></script>
<script>
var socket = io.connect('http://localhost:3000');

socket.on('connect', function () {
  socket.emit('set nickname', confirm('What is your nickname?'));
  socket.on('ready', function () {
    console.log('Connected !');
    socket.emit('msg', confirm('What is your message?'));
  });
}); 
```

我在 Chrome 检查器中遇到了一些错误：

```
GET http://localhost:9261/socket.io/socket.io.js 404 (Not Found)
Uncaught ReferenceError: io is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:01:32.360

似乎您只向客户端发送“Hello World”，而不是带有客户端代码的 html。

您的服务器代码应如下所示（来自[http://socket.io/#how-to-use](http://socket.io/#how-to-use)）：

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(80);

function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

您的客户端代码应该在`index.html`. 还要确保您有一个名为`socket.io`包含脚本的文件夹`socket.io.js`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T14:04:37.607

您没有通过 nodeJS 为客户端提供服务，这将不起作用：

```
<script src="/socket.io/socket.io.js"></script> 
```

尝试使用 this 代替：

```
<script src="http://localhost:3000/socket.io/socket.io.js"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T13:42:29.230

它无法连接，因为您的客户端无法找到 socket.io.js 您可以通过使用适当的文件来解决，从 node_modules\socket.io\node_modules\socket.io-client\dist 目录使用 socket.io.js并将其放入您的本地目录并在脚本标签中使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-06T12:10:53.460

> `<script src="http://localhost:3000/socket.io/socket.io.js"></script>var socket = io.connect("http://localhost:3000");`

对于这种方式客户端连接到节点服务器。这将工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-22T13:56:53.170

另请注意，当您转向生产时，应更新客户端中的代码：

```
var socket = io.connect('http://localhost:3000'); 
```

像这样的东西

```
var socket = io.connect('my_host'); 
```

我已经通过提取参数`my_host`将要加载的页面发送到客户端脚本，所以对我来说它看起来像：`socket.io``req.headers.host`

```
 io.connect('http://' + host) 
```

您可以通过在客户端公开变量`express-expose`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-07T07:40:03.557

这可能是因为`io`没有正确实例化，因此**Uncaught ReferenceError: io is not defined**

```
// Instantiate without argument
var io = require('socket.io')();
// Instantiate with new keyword
var Server = require('socket.io')
  , io = new Server();

// Instantiate io server with app as argument
var app = require('http').createServer(handlerFunc)
  , io = require('socket.io')(app);
app.listen(80);

// Attaching socket.io with express server
var app = express()
  , server = require('http').createServer(app)
  , io = require('socket.io')(server);
server.listen(80, handlerFunc); 
```

# android - 如何将图像文件从 Android 上传到 .Net C# ( IIS )？

> ID：10071383
> 
> 赞同：0
> 
> 时间：2012-04-09T09:34:46.687
> 
> 标签：android, file-upload

我对 android 开发很陌生。有人可以帮助我继续将图像从 android 应用程序上传到 .net 服务器（IIS）。

我正在 android 中创建一个简单的应用程序，它将图像上传到 .net 服务器。所有上传的图像都显示在 asp.net 站点页面中。

任何建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:45:52.623

[Android：如何将 .mp3 文件和图像上传到 http 服务器？](https://stackoverflow.com/questions/5785803/androidhow-to-upload-mp3-file-and-image-to-http-server)

上面的链接有将 mp3 文件传输到 http 服务器的信息。您可以对图像使用相同的方法。

# c# - 验证 XAML 文本框/富文本框以接受电子邮件地址？

> ID：10071386
> 
> 赞同：0
> 
> 时间：2012-04-09T09:34:59.370
> 
> 标签：c#, string, validation, xaml, textbox

我在 XAML 中有一个 TextBox/RichTextBox，我想验证它以确保它包含一个带有“@”符号的字符串。我正在使用此功能来接受适当的电子邮件地址。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:07:23.427

一种选择是创建一个 ValidationRule ，如此处接受的答案中[所述](https://stackoverflow.com/questions/1734511/how-can-i-set-regular-expression-on-textbox)。至于实际使用的 RegEx，这取决于您希望检查的详细程度。

（非常）简单：^[\w.]+@[\w-]+.[az]+$

复杂选项：[许多选项可用](http://regexlib.com/%28X%281%29A%28SPZe5Gc5PVw7bXeo-JC-JvWlPC4kcrFeFQkLE5lAqxypxxLW7SO8fR8vVVhMgnXRJ34l0ptP94NQA45uil80fne_qVjhv6BpqYr6uc6aRbMUo81vH4PykowfvhhWEGp3d6C2Pm-bgY4uUxl6peGxovDuX6H0UTVxWUJS0XodA6qXEjOI4eY1OuHMuD36-Gt20%29%29/DisplayPatterns.aspx?AspxAutoDetectCookieSupport=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T11:09:15.510

您可以从 C# 获取文本框文本字符串，并查看它是否包含电子邮件
示例所需的内容

## XAML 和 C#

```
<TextBox Name="txt1" Text="abc@def.com"/>

C#*****************************

bool valid = txt1.Text.contains("@")

if(valid)
{
    whololo
} 
```

# db2 - COMMIT/ROLLBACK VS ROLLBACK TO SAVEPOINT 的批处理 DB2 性能

> ID：10071387
> 
> 赞同：0
> 
> 时间：2012-04-09T09:35:04.143
> 
> 标签：db2, cobol, mainframe

在 COBOL 批处理程序中，在性能方面什么更好？

提交：

```
IF SW-NEW-TRANSACT
  EXEC SQL
      COMMIT
  END-EXEC
END-IF.
PERFORM SOMETHING
   THRU SOMETHING-EXIT.
IF SW-ERROR
  EXEC SQL
      ROLLBACK
  END-EXEC
END-IF. 
```

使用同步点：

```
IF SW-NEW-TRANSACT
  EXEC SQL
      SAVEPOINT NAMEPOINT ON ROLLBACK RETAIN CURSORS
  END-EXEC
END-IF.
PERFORM SOMETHING
   THRU SOMETHING-EXIT.
IF SW-ERROR
  EXEC SQL
      ROLLBACK TO SAVEPOINT NAMEPOINT
  END-EXEC
END-IF. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T14:33:56.467

SAVEPOINT 和 COMMIT 不可互换。

进程总是必须在某个时刻提交或回滚数据库工作。**在**事务之间（完整的工作单元之间）进行COMMIT 。COMMIT 可以在每个事务之后执行，或者像批处理中常见的那样，在多个事务之后执行。决不应该在事务中进行 COMMIT（这违背了 UNIT OF WORK 概念）。

SAVEPOINT 通常**在**单个工作单元中获取并可能释放。SAVEPOINTs 应该总是在完成一个工作单元时被释放。它们总是在 COMMIT 时被释放。

SAVEPOINT 的目的是允许从工作单元中部分退出。当流程以一系列公共数据库插入/更新开始，然后是流程分支时，这很有用，在该流程分支中可能会执行一些更新，然后才能确定应该执行替代流程分支。SAVEPOINT 允许退出“死胡同”分支，然后继续使用备用分支，同时保留常见的“前期”工作。如果没有 SAVEPOINT，退出“死胡同”可能需要在事务（复杂处理）或 ROLLBACK 中进行大量数据缓冲，并从事务开始重新执行，并使用某种标志指示替代流程分支需要被关注。所有这些都会导致复杂的应用程序逻辑。ROLLBACK TO SAVEPOINT 有几个优点。它可以保留“前期”工作，节省重新做的成本。它节省了回滚整个事务。回滚可能比原始插入/更新更“昂贵”，并且可能跨越多个事务（取决于提交频率）。最后，当可以通过 ROLLBACK TO SAVEPOINT 有选择地“撤消”数据库工作时，流程复杂性通常会降低。

SAVEPOINT 如何用于提高批处理程序的效率？如果您的事务使用自我诱导的回滚来从“死胡同”处理中恢复，那么 SAVEPOINT 可能是一个巨大的好处。类似地，如果内部处理逻辑因需要避免为类似的“回退”要求执行数据库更新而变得复杂，则可以使用 SAVEPOINT 将过程重构为更简单且可能更有效的方法。除了这些因素之外，SAVEPOINT 不会以积极的方式影响性能。

一些人声称在批处理程序中具有较高的 COMMIT 频率会降低性能。因此，提交频率越低，性能越好。调整 COMMIT 频率并非易事。提交频率越低，持有的数据库资源就越长，因此导致数据库超时的可能性就越大。遭受数据库超时通常会导致进程回滚。回滚是一项**非常昂贵的操作**。ROLLBACKs 对 DBMS 本身来说是一个很大的打击，一旦重新启动，您的事务需要再次重新应用所有更新。降低提交频率最终可能会让您付出比获得更多的代价。谨防！

**编辑**

经验法则：提交是有代价的。回滚的成本更高。

不考虑由于坏数据、设备故障和程序异常终止（所有这些都应该很少见）导致的回滚，大多数回滚是由于进程之间的资源争用而导致的超时。执行较少的提交会增加数据库争用。减少提交可能会提高性能。诀窍是找到在不提交权重的情况下获得的性能，以及由于争用而导致的回滚成本。影响这一点的因素有很多——其中可能是动态的。我的总体建议是寻找其他地方以提高性能 - 调整提交频率（超时不是问题）通常是低回报投资。

提高批次性能的其他更有成效的方法通常包括：

*   通过负载拆分和运行同一作业的多个图像来提高并行性
*   分析 db/2 绑定计划并优化访问路径
*   分析批处理程序的行为并重构那些消耗最多资源的部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:03:45.500

这根本不是性能问题。

当你完成一个工作单元时，你提交，无论一个工作单元对你的应用程序意味着什么。通常，这意味着您已经处理了完整的交易。在批处理世界中，您将在 1,000 到 2,000 个事务后提交，因此您不会将所有时间都花在提交上。该数字取决于在 ROLLBACK 事件中可以重新运行的事务数。

当您遇到某种错误（数据库错误或应用程序错误）时，您会回滚。

当您处理复杂的工作单元时，您[SAVEPOINT](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2.doc.apsg/qsvpt.htm)，并且您希望保存已完成的工作而不进行完整的 COMMIT。换句话说，您将获取一个或多个 SAVEPOINT，然后最终执行 COMMIT。

# iphone - 系统调用来阻止 iPhone 4 中的来电

> ID：10071396
> 
> 赞同：0
> 
> 时间：2012-04-09T09:35:55.813
> 
> 标签：iphone, callblocking

有没有办法阻止/过滤 iphone 4.0+ 中的来电

我发现很多应用程序都说它们是为了阻止应用商店中的价格来电。但评论是负面的。真的可以阻止通话吗？谁能给我建议？

非常感谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T09:39:46.310

**答案是否定的**使用当前的 SDK 支持，您无法拦截/阻止通话短信。

# javascript - 有没有办法在用户切换到 iphone 上的另一个窗口时看到浏览器窗口被最小化？

> ID：10071397
> 
> 赞同：3
> 
> 时间：2012-04-09T09:36:04.470
> 
> 标签：javascript, jquery, iphone, safari, mobile-safari

**有没有办法在用户切换到iPhone**上的另一个窗口时看到浏览器窗口被最小化？当浏览器窗口通过切换到任何其他应用程序变为非活动状态时也是如此。

我试图绑定到 jQuery *onfocus*，*onblur*事件（`$(window).blur(...);`），但没有回调。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T14:07:21.270

我认为最接近你正在寻找的东西是[`pageshow`和`pagehide`事件](http://www.webkit.org/blog/516/webkit-page-cache-ii-the-unload-event/)。在我在 iOS 5.1 中进行的测试中，当双击主页按钮后从 Mobile Safari 切换到另一个应用程序时，该`pagehide`事件似乎在应用程序实际切换之前立即被触发，而如果我只按一次主页按钮即可到达主屏幕似乎 JavaScript 线程立即暂停，并且仅当 Mobile Safari 再次成为焦点时才调用事件的侦听器。

这是您监听事件的方式：

```
window.addEventListener('pageshow', myPageShowListenerFunc, false);
window.addEventListener('pagehide', myPageHideListenerFunc, false); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-24T16:34:37.690

对于更高版本的 iOS `pageshow`，`pagehide`不再可靠工作。但是，您现在可以使用该`visibilitychange`事件，该事件在用户打开另一个浏览器选项卡或浏览器最小化（通过按下主页按钮）时触发。

所以你的代码看起来像

```
window.addEventListener('visibilitychange', myVisibilityHandleFunc, false); 
```

或使用 jQuery

```
$(document).on('visibilitychange', myVisibilityHandleFunc); 
```

来自[MDN](https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API)：

> Page Visibility API 让您知道网页何时可见或处于焦点位置。使用选项卡式浏览，任何给定网页都有可能在后台，因此对用户不可见。当用户最小化网页或移动到另一个选项卡时，API 会发送有关页面可见性的 visibilitychange 事件。

有一个名为的属性`document.webkitHidden`可用于 iPhone，以了解更改是可见的 -> 隐藏的，还是隐藏的 -> 可见的。

# facebook - 如何将节点导入 Facebook 墙？

> ID：10071398
> 
> 赞同：0
> 
> 时间：2012-04-09T09:36:05.267
> 
> 标签：facebook, drupal, drupal-modules

我想将 drupal 节点和博客导入 facebook 墙。我应该为这个功能使用哪个模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:59:52.823

您可能对[Drupal for Facebook](http://drupal.org/project/fb)模块感兴趣。

> 这组模块和主题将 Drupal 变成了开发 Facebook 应用程序的平台。这使您可以在 facebook 中嵌入您的内容和功能，或允许 facebook 用户通过 Facebook Connect 访问您的网站。
> 
> 使用 Drupal for Facebook，您可以在 Facebook 应用程序中利用 Drupal 的所有功能。如果您已经在 Drupal 中有内容，您可以在 Facebook 上公开它。
> 
> Drupal for Facebook 的理念是，已经内置在 Drupal 中的功能应该用于创建 Facebook 应用程序。在可能的情况下，我们使用 Drupal 的用户管理、权限方案、块、视图等来实现 Facebook 应用程序。有经验的 Drupal 用户会发现构建 Facebook 应用程序非常简单。虽然对 Drupal 不熟悉的 Facebook 开发人员可能希望花一些时间在 Drupal.org 上学习最佳实践。
> 
> Drupal for Facebook 包含几个子模块。仅启用您需要的那些。例如，如果您需要社交插件，只需启用 fb.module。对于 Facebook Connect，启用 fb_connect.module；画布页面，fb_canvas.module；**墙贴和状态更新，fb_stream.module**；等等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:31:15.117

尝试将此发布在您的 Facebook 页面墙上。

1.  下载[facebook php SDK](https://github.com/facebook/php-sdk)

2.  实现[hook_node_submit](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_submit/7) () 钩子，并使用以下代码。

    ```
    function YOUR_MODULE_node_submit($node, $form, &$form_state)
    {
        $node_types = array("article", "blog");
        if(in_array($node->type, $node_types) && $form_state['clicked_button']['#id'] == "edit-submit")
        {
            $message = $form_state['values']['title'];
            $description = $form_state['values']['body'];
            $picture = $form['YOUR_IMAGE_FIELD']['und']['0']['#file']->uri;
            send_to_facebook($message, $description, $picture);
        }
    }

    function facebook_oauth_init($facebook_app_id, $facebook_app_secret, $cookie = false)
    {
        $facebook = new Facebook(array("appId" => $facebook_app_id, "secret" => $facebook_app_secret, "cookie" => $cookie));
        return $facebook;
    }

    function send_to_facebook($msg, $desc, $pic)
    {
        if(!class_exists('Facebook'))
            require_once('facebook/facebook.php');
        $fb_app_id = "YOUR_APP_ID";
        $fb_app_secret = "YOUR_APP_SECRET";
        $fb_user_id = "THE_USER_ID_OF_THE_ADMIN_FOR_THIS_PAGE";
        $fb_page_id = "YOUR_PAGE_ID";
        $fb_access_token = "YOUR_ACCESS_TOKEN";
        $fb_reirect_uri = "";
        $access_token_2 = '';
        foreach($accounts as $acc)
        {
            if($fb_page_id == $acc['id'])
            {
                $access_token_2 = $acc['access_token'];
                break;
            }
        }

        $fb_post_array = array(
            'access_token'      => $access_token_2,
            'message'           => $msg,
            'picture'           => render(file_create_url($pic)),
            'description'       => $desc,
            'link'              => $fb_reirect_uri,
        );
        if($picture == NULL || $picture == "")
            unset($fb_post_array['picture']);

        $fb_now = $facebook->api("/" . $fb_page_id . "/feed", "post", $fb_post_array);
    } 
    ```

这就是我将节点发布到我的 Facebook 页面所做的一切。

希望它有效……穆罕默德。

# ruby - 使用自定义格式将数组转换为哈希

> ID：10071402
> 
> 赞同：0
> 
> 时间：2012-04-09T09:36:22.660
> 
> 标签：ruby, arrays

有人可以帮我将以下数组转换为具有以下格式的哈希吗？

**大批**

`[["0", {"checkbox_2"=>"on"}], ["2", {"checkbox_1"=>"on"}]]`

**哈希**

```
search=>{"checkbox_2"=>"on", "checkbox_1"=>"on"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:08:47.750

```
xs = [["0", {"checkbox_2"=>"on"}], ["2", {"checkbox_1"=>"on"}]]
search = {:search => xs.map { |n, h| h }.inject(:merge)}
# {:search=>{"checkbox_2"=>"on", "checkbox_1"=>"on"}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:44:24.550

```
arr = [["0", {"checkbox_2"=>"on"}], ["2", {"checkbox_1"=>"on"}]] 
hash = Hash[arr.flatten.select{|e| e.is_a? Hash}.collect{|e| e.to_a.flatten}]
=> {"checkbox_2"=>"on", "checkbox_1"=>"on"} 
```

# .htaccess - 将 url 中的目录名称替换为另一个名称

> ID：10071404
> 
> 赞同：0
> 
> 时间：2012-04-09T09:36:31.693
> 
> 标签：.htaccess, redirect

使用 htaccess，如何将 url “http://www.website.com/abc/...”更改为“http://www.website.com/xyz/...”，使其充当重定向在“xyz”之后的文件名/目录结构与在“abc”之后的相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:27:39.720

```
RewriteRule ^abc/(.*)$ /xyz/$1 [R=302,L,QSA] 
```

这将重定向`example.com/abc/pink-kitten`到`example.com/xyz/pink-kitten`（或`example.com/abc/`到`example.com/xyz/`），但如果文件夹名称后的尾部斜杠丢失（即`example.com/abc`不会被重定向），则不会执行任何操作。如果您还需要最后一种情况，那么您将需要为此使用单独的规则。

如果需要，您可以将重定向代码更改`[R=302]`为另一个（例如 301 永久重定向）。

# javascript - 如何使用 socket.io 发送消息

> ID：10071406
> 
> 赞同：1
> 
> 时间：2012-04-09T09:36:42.397
> 
> 标签：javascript, apache, sockets, node.js

我想使用 socket.io 和 node 作为我的“推送通知功能”的层，所以我同时运行 apache 和 node。

我的服务器（节点）上有以下代码

```
var app = require('http').createServer(handler)
    , io = require('C:/path/to/file/socket.io').listen(app)
    , fs = require('fs');

app.listen(8080);

function handler(req, res) {
    console.log(req);
    fs.readFile('C:/path/to/file/index.html',
        function (err, data) {
            if (err) {
                console.log(err);
                res.writeHead(500);
                return res.end('Error loading index.html');
            }

            res.writeHead(200);
            res.end(data);
        });
}

io.sockets.on('connection', function (socket) {
    socket.on('my event', function (msg) {
        console.log("DATA!!!");
    });
}); 
```

然后页面由 apache 从 localhost 提供，没有 8080 端口

在客户端我有以下代码：

```
var socket = io.connect('http://localhost:8080'); 
```

当一个按钮被点击时：

```
socket.emit('my event', {data:"some data"}); 
```

我在节点控制台上什么也看不到……这是为什么呢？跨域问题？

**更新：** 它在 safari 5.1.5 甚至 IE 9 上都可以正常工作，但不能在 chrome(18.0.1025.151) 或 firefox (11.0) 上运行……我错过了什么？

这是节点日志：

```
 info  - socket.io started
   debug - served static content /socket.io.js
   debug - client authorized
   info  - handshake authorized 4944162402088095824
   debug - setting request GET /socket.io/1/websocket/4944162402088095824
   debug - set heartbeat interval for client 4944162402088095824
   debug - client authorized for
   debug - websocket writing 1::
   debug - setting request GET /socket.io/1/xhr-polling/4944162402088095824?t=13
33977095905
   debug - setting poll timeout
   debug - discarding transport
   debug - cleared heartbeat interval for client 4944162402088095824 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:29:36.967

这应该可以正常工作，只需确保在您的 index.html 中有：

```
<script src="http://localhost:8080/socket.io/socket.io.js"></script> 
```

此外，由于您通过 Apache 提供页面，因此您确实不需要节点文件中的处理程序和 http 服务器。这应该可以正常工作：

```
var io = require('socket.io').listen(8080);
io.sockets.on('connection', function (socket) {
    socket.on('my event', function (msg) {
        console.log("DATA!!!");
    });
}); 
```

对于 index.html ：

```
<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Hello World!</title>
        <meta charset="utf-8">

        <script src="http://localhost:8080/socket.io/socket.io.js"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                var socket = io.connect('http://localhost:8080');
                $("#button").click(function() {
                    socket.emit('my event' ,"Hello World!");
                })
            })
        </script>
    </head>

    <body>
        <button type="button" id='button'>Send Message</button> 
    </body>

</html> 
```

**编辑：**这适用于 Firefox 和 Chrome。

# testing - 在不使用 Camel-Case 的情况下创建 Fitnesse 页面

> ID：10071407
> 
> 赞同：2
> 
> 时间：2012-04-09T09:36:50.023
> 
> 标签：testing, fitnesse

我目前正在将大量脚本迁移到 Fitnesse。我实现了一个转换器，它采用现有的脚本 XML 并将它们转换为 Fitnesse 文件（例如 content.txt）。这工作正常。但是，我仍然面临名称问题，因为它们不是驼峰式格式（脚本名称的示例如下：BANK_Tran_BankStmtLoad_Add）。大多数脚本都有这样的名称。可以以编程方式删除“_”，但这不会很好，因为我们仍然有几个连续的大写字母。有没有一种方法可以在 Fitnesse 中创建新页面，而无需在 Camel-case 中编写名称。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:13:06.783

看起来这是融入 FitNesse 的。我尝试手动创建 FitNesse 文件夹，但没有成功。您可以使用 Folder Runner 在 FitNesse 外部运行测试：http: [//fitsharp.github.com/Fit/FolderRunner.html](http://fitsharp.github.com/Fit/FolderRunner.html)或[http://fitnesse.org/FitNesse.UserGuide.FitLibraryUserGuide.FolderRunner](http://fitnesse.org/FitNesse.UserGuide.FitLibraryUserGuide.FolderRunner)

# android - 如何在android中获取视频文件的帧

> ID：10071408
> 
> 赞同：0
> 
> 时间：2012-04-09T09:37:01.960
> 
> 标签：android, android-mediaplayer, android-mediascanner, android-mediarecorder

我想让视频文件的帧显示在 android 的画廊视图中。以及如何编辑框架，例如

选择框架部分

使用选定的部分

删除选定的部分

复制选定的部分

剪切选定的部分

贴在头上

粘贴到尾巴上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T21:39:31.910

实际上，`MediaMetadataRetriever.getFrameAtTime`使用微秒作为参数，而不是毫秒。进行更改后，您可以从视频中获取正确的帧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T01:37:02.403

您可以使用 MediaMetadataRetriever 类。它具有 getFrameAt() 方法，您可以在其中指定要获取的帧的时间。

有关详细信息，请参阅[MediaMetadataRetriever](http://developer.android.com/reference/android/media/MediaMetadataRetriever.html#getFrameAtTime%28long,%20int%29)

# android - 对话框中的活动

> ID：10071412
> 
> 赞同：0
> 
> 时间：2012-04-09T09:37:35.297
> 
> 标签：android, android-activity, dialog, layout-inflater, customdialog

我想在对话框中显示一个活动，如下图所示。有谁知道如何才能达到这个结果？ ![在此处输入图像描述](../Images/f36fab82342fc173877223637a2d5a0b.png)

我尝试将此代码用于该活动，但它对我没有帮助。

```
android:theme="@android:style/Theme.Dialog" 
```

它显示在屏幕中间我可以改变它的位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:43:11.087

我建议您不要使用 Theme.Dialog 创建新的 Activity，而是使用自定义视图来显示该操作并稍后隐藏它。

有称为 QuickAction 的开源自定义视图。

请看一下[这篇文章](https://stackoverflow.com/q/3059155/593709)。

特别是这个[git repo](https://github.com/lorensiuswlt/NewQuickAction3D)，指出在接受的答案中链接的帖子。

# java - 用java编写互联网浏览器时

> ID：10071420
> 
> 赞同：0
> 
> 时间：2012-04-09T09:37:49.367
> 
> 标签：java, browser, editor

我遇到了没有无法处理网页某些部分的编辑器工具包的问题。示例包括 javascript 和 css。有谁知道我在哪里可以找到适合的编辑工具包？我也很好奇 Google Chrome 和 IE 等浏览器使用什么编程语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:55:44.790

试用[Aptana Studio](http://aptana.com/products/studio3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:53:11.320

已经有各种使用 java 的浏览器项目。支持更多 JavaScript（JS 有时称为 ECMAScript）的 java Scripting API 值得研究。您应该在阅读 HTML 时，构建一个 DOM 树并解释`<script>`块，这些块可以在 DOM 上操作或编写您必须读取的 HTML。

swing 中的 EditorKit 构建了一个过于简单的 non.tree StyledDocument，您必须对其进行桥接。

继续的方法是首先不使用摆动输出，而是立即生成一个 DOM/生成的 HTML。

# android - android sqlite date中的SQL之间的操作不起作用？

> ID：10071424
> 
> 赞同：1
> 
> 时间：2012-04-09T09:38:17.653
> 
> 标签：android, android-datepicker, android-date

我是android开发的新手。我已经为此工作了一天，但我无法弄清楚确切的问题是什么，因为我的查询运行时没有错误但没有结果。

我的数据库查询 *formattedDate 的值*

```
 Calendar c = Calendar.getInstance();  

    SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd"); 

    String formattedDate = df.format(c.getTime());

  public Cursor paymentWeek(Activity activity)
    {

         String[] from = { _PAYMENTID, NAME, REQUESTEDDATE, FROMAD, TOADD, EMAILBODYPAYMENT, AMOUNT};  

         SQLiteDatabase db = getReadableDatabase(); 

         String orderby = REQUESTEDDATE+" DESC";   

         Cursor cursor = db.rawQuery("SELECT * FROM " + PAYMENTTABLE+ " WHERE " + REQUESTEDDATE + " BETWEEN date('"+formattedDate+"') AND date('"+formattedDate+"','-7 days')", null);

         activity.startManagingCursor(cursor);

         return cursor;  
    } 
```

我的数据库日期类型是`TEXT`. 我以（`yyyy-mm-dd`）的格式存储，例如：2012-04-07

但问题是我可以从数据库中检索所有数据，但如果我想检索过去 7 天的值，它不会显示任何值。

如果有任何替代品，那会很棒吗？并提示如何去做？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:51:59.833

```
 Cursor cursor = db.rawQuery("SELECT * FROM " + PAYMENTTABLE+ " WHERE " + REQUESTEDDATE + " BETWEEN date('"+formattedDate+"') AND date('"+formattedDate+"-7')", null); 
```

试试这个查询，你在`date('"+formattedDate+"','-7 days')"`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-09T10:01:00.937

正如你所说，你的`date`类型是`TEXT`，我不认为你可以使用`between x and y`过滤器来返回内容`x to y`。

你可以试试这个：[http](http://www.roseindia.net/sql/sql-between-date.shtml) ://www.roseindia.net/sql/sql-between-date.shtml或[http://www.techonthenet.com/sql/between.php](http://www.techonthenet.com/sql/between.php)。

# sql - sql语句中的UNION

> ID：10071425
> 
> 赞同：0
> 
> 时间：2012-04-09T09:38:23.613
> 
> 标签：sql, sql-server, stored-procedures

我有两个表，我只想显示第一个表中的子 ID，而不是第二个表中的子 ID。但它总是给我所有的 ID，即使是第二张表中的那些。这是存储过程；

```
ALTER PROC [dbo].[GetAllChildren]

@UserID int

AS

SELECT Child_ID FROM firstTable
UNION
SELECT Child_ID FROM SecondTable WHERE User_ID = @UserID 
```

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:42:08.133

试试这个

```
ALTER PROC [dbo].[GetAllChildren]
@UserID int
AS
SELECT Child_ID 
FROM firstTable 
WHERE Child_ID NOT IN
      (SELECT Child_ID FROM SecondTable WHERE User_ID = @UserID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:06:55.283

```
SELECT DISTINCT ft.Child_ID
FROM firstTable ft
LEFT JOIN secondTable st
    on ft.Child_ID = st.Child_ID
WHERE st.Child_ID is null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T09:42:03.923

如果您不需要第二个表子 ID，为什么要使用 UNION

```
SELECT Child_ID FROM firstTable 
```

这足以得到你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T09:27:40.583

`UNION`将关键字更改为`EXCEPT`（关系差异又名减号），例如

```
SELECT Child_ID FROM firstTable
EXCEPT
SELECT Child_ID FROM SecondTable WHERE User_ID = @UserID 
```

# python-2.7 - 创建与输入字符串大小相同的出现向量

> ID：10071427
> 
> 赞同：1
> 
> 时间：2012-04-09T09:38:38.840
> 
> 标签：python-2.7

我是 python 新手，需要一些帮助。

我有一个像 ACAACGG 这样的字符串

我现在想创建 3 个向量，其中元素是特定字母的计数。

例如，对于“A”，这将产生 (1123333) 对于“C”，这将产生 (0111222) 等等。

我不确定如何将计数结果放入字符串或向量中。我相信这类似于计算字符串中字符的出现次数，但我不确定如何让它遍历字符串并将计数值放在每个点。

作为参考，我正在尝试实现 Burrows-Wheeler 转换并将其用于字符串搜索。但是，我不确定如何为字符创建出现向量。

```
def bwt(s):
  s = s + '$'
  return ''.join([x[-1] for x in
     sorted([s[i:] + s[:i] for i in range(len(s))])]) 
```

这给了我变换，我正在尝试为它创建出现向量。最终，我想用它来搜索 DNA 字符串中的重复。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:44:46.173

我不确定您希望向量属于哪种类型，但这里有一个返回 a `list`of `int`s 的函数。

```
 In [1]: def countervector(s, char):
   ....:     c = 0
   ....:     v = []
   ....:     for x in s:
   ....:         if x == char:
   ....:             c += 1
   ....:         v.append(c)
   ....:     return v
   ....: 

 In [2]: countervector('ACAACGG', 'A')
 Out[2]: [1, 1, 2, 3, 3, 3, 3]

 In [3]: countervector('ACAACGG', 'C')
 Out[3]: [0, 1, 1, 1, 2, 2, 2] 
```

此外，这是一种更短的方法，但在长字符串上可能效率低下：

```
def countervector(s, char):
    return [s[:i+1].count(char) for i, _ in enumerate(s)] 
```

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:37:18.180

正如这里所承诺的，这是我写的完成的脚本。作为参考，我正在尝试使用 Burrows-Wheeler 变换在 DNA 字符串中进行重复匹配。基本上，这个想法是取一段长度为 M 的 DNA 链，并在该字符串中找到所有重复。因此，例如，如果我有奇怪的 acaacg 并搜索所有重复的大小为 2 的子字符串，我会得到 1 的计数和 0,3 的起始位置。然后您可以输入 string[0:2] 和 string[3:5] 来验证它们确实匹配并且它们的结果是“ac”。

如果有人有兴趣了解 Burrows-Wheeler，在 Wikipedia 上搜索它会产生非常有用的结果。这是斯坦福大学的另一个来源，它也很好地解释了它。 [http://www.stanford.edu/class/cs262/notes/lecture5.pdf](http://www.stanford.edu/class/cs262/notes/lecture5.pdf)

现在，有几个问题我没有解决。首先，我使用 n^2 空间来创建 BW 变换。另外，我正在创建一个后缀数组，对其进行排序，然后用数字替换它，因此创建它可能会占用一些空间。但是，最后我只真正存储了 occ 矩阵、结束列和单词本身。

尽管大于 4^7 的字符串存在 RAM 问题（使其适用于 40,000 但没有更大的字符串大小......），但我认为这是成功的，就像周一之前一样，这是我唯一新的方法python 是让它打印我的名字和你好世界。

```
#  generate random string of DNA
def get_string(length):
    string=""
    for i in range(length):
        string += random.choice("ATGC")
    return string

#  Make the BW transform from the generated string  
def make_bwt(word):
    word = word + '$'
    return ''.join([x[-1] for x in
        sorted([word[i:] + word[:i] for i in range(len(word))])])
#  Make the occurrence matrix from the transform        
def make_occ(bwt):
    letters=set(bwt)
    occ={}
    for letter in letters:
        c=0
        occ[letter]=[]
        for i in range(len(bwt)):
            if bwt[i]==letter:
            c+=1
            occ[letter].append(c)
    return occ

#  Get the initial starting locations for the Pos(x) values 
def get_starts(word):
    list={}
    word=word+"$"
    for letter in set(word):
        list[letter]=len([i for i in word if i < letter])
    return list

#  Single range finder for the BWT.  This produces a first and last position for one read.  
def get_range(read,occ,pos):
    read=read[::-1]
    firstletter=read[0]
    newread=read[1:len(read)]
    readL=len(read)
    F0=pos[firstletter]
    L0=pos[firstletter]+occ[firstletter][-1]-1

    F1=F0
    L1=L0
    for letter in newread:
        F1=pos[letter]+occ[letter][F1-1]
        L1=pos[letter]+occ[letter][L1] -1
    return F1,L1

#  Iterate the single read finder over the entire string to search for duplicates   
def get_range_large(readlength,occ,pos,bwt):
    output=[]
    for i in range(0,len(bwt)-readlength):
        output.append(get_range(word[i:(i+readlength)],occ,pos))
    return output

#  Create suffix array to use later 
def get_suf_array(word):
    suffix_names=[word[i:] for i in range(len(word))]   
    suffix_position=range(0,len(word))                  
    output=zip(suffix_names,suffix_position)
    output.sort()
    output2=[]
    for i in range(len(output)):                        
        output2.append(output[i][1])
    return output2

#  Remove single hits that were a result of using the substrings to scan the large string   
def keep_dupes(bwtrange):
    mylist=[]
    for i in range(0,len(bwtrange)):
        if bwtrange[i][1]!=bwtrange[i][0]:
            mylist.append(tuple(bwtrange[i]))
    newset=set(mylist)
    newlist=list(newset)
    newlist.sort()
    return newlist

#  Count the duplicate entries
def count_dupes(hits):
    c=0
    for i in range(0,len(hits)):
        sum=hits[i][1]-hits[i][0]
        if sum > 0:
            c=c+sum
        else:
            c
    return c

#  Get the coordinates from BWT and use the suffix array to map them back to their original indices 
def get_coord(hits):
    mylist=[]
    for element in hits:
        mylist.append(sa[element[0]-1:element[1]])
    return mylist

#  Use the coordinates to get the actual strings that are duplicated
def get_dupstrings(coord,readlength):
    output=[]
    for element in coord:
        temp=[]
        for i in range(0,len(element)):         
            string=word[element[i]:(element[i]+readlength)]
            temp.append(string)
        output.append(temp) 
    return output

#  Merge the strings and the coordinates together for one big list. 
def together(dupstrings,coord):
    output=[]
    for i in range(0,len(coord)):
        merge=dupstrings[i]+coord[i]
        output.append(merge)
    return output

Now run the commands as follows
import random  #  This is needed to generate a random string
readlength=12 #  pick read length
word=get_string(4**7) # make random word
bwt=make_bwt(word) # make bwt transform from word
occ=make_occ(bwt)  #  make occurrence matrix  
pos=get_starts(word)  #  gets start positions of sorted first row       
bwtrange=get_range_large(readlength,occ,pos,bwt) #  Runs the get_range function over all substrings in a string.    
sa=get_suf_array(word)  #  This function builds a suffix array and numbers it.  
hits=keep_dupes(bwtrange)   #  Pulls out the number of entries in the bwt results that have more than one hit.
dupes=count_dupes(hits) #  counts hits
coord=get_coord(hits)  #  This part attempts to pull out the coordinates of the hits.  
dupstrings=get_dupstrings(coord,readlength)  #  pulls out all the duplicated strings
strings_coord=together(dupstrings,coord)    #  puts coordinates and strings in one file for ease of viewing.
print dupes
print strings_coord 
```

# c# - 如何禁用 Telerik GridView 行中的特定单元格

> ID：10071429
> 
> 赞同：2
> 
> 时间：2012-04-09T09:38:44.693
> 
> 标签：c#, wpf, xaml, telerik

嗨，我的 WPF 应用程序中有一个**Telerik GridView**。在那个网格中，我有三列，例如**Number、Max**和**Min**。现在我需要**禁用****最小**和**最大**单元格，当我将在数字列上为选定行提供一些值时。

我将**MaxCell**和**MinCell**等两个变量声明为 GridViewCellBase。如果查询（下面提到获取 MaxCell 和 MinCell）将返回 null 值，我无法将**IsEnabled**设为**False**。它不接受任何价值。它给**Null 引用 Exception**。我怎么解决这个问题 ？可以请告诉我这个问题的解决方案吗？提前致谢。

```
 foreach (GridViewCell cell in row.Cells)
         {
             if (cell.Column.Header.ToString() == "Number" && Convert.ToInt32  (cell.Value) > 0)
             {
                 GridViewCellBase MaxCell = new GridViewCellBase();
                 GridViewCellBase MinCell=new GridViewCellBase();
                 MaxCell=(from c in row.Cells
                                    where c.Column.Name == "Max"
                                    select c).FirstOrDefault();
                 MinCell =(from c in row.Cells
                                     where c.Column.Name == "Min"
                                     select c).FirstOrDefault();

                 MaxCell.IsEnabled = false;// Here I am getting the null reference  exception when MaxCell and MinCell having empty values

                 MinCell.IsEnabled = false; 
                 break;
             }

         } 
```

MaxCell总是**只**返回空值。所以我不能给**IsEnabled**属性。现在我的疑问是，为什么 MaxCell 值总是以空值或空值的形式出现？单元格具有类似**"Max"**和**"Min"**的列。然后它应该返回**实际单元格**，但为什么它总是返回空值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:47:06.430

而不是使用您描述的方法。我会尝试修改特定列的单元格样式，并使用返回适当值的转换器创建 IsEnabled 属性的绑定。

```
<Style x:Key="MinMaxCellStyle" TargetType="{x:Type GridView:GridViewCell}">                        
      <Setter Property="IsEnabled" Value="{Binding Normal, Converter{StaticResources NormalToEnabledConverter}" />
</Style> 
```

然后将此样式应用于特定列作为休闲：

```
<GridView:GridViewDataColumn CellStyle="{StaticResource MinMaxCellStyle}" /> 
```

如果您不喜欢这样，您可以随时使用触发器。

# javascript - 将 onClick 应用到 iframe

> ID：10071431
> 
> 赞同：4
> 
> 时间：2012-04-09T09:38:52.880
> 
> 标签：javascript, html, iframe

有没有办法用其他元素“封装”一个 Iframe 来模拟 onClick？我知道 iframe 不支持事件，但我需要跟踪从我的网站离开 iframe 的点击。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T09:50:43.773

如果框架包含来自同一域的页面（不违反[同源策略](http://en.wikipedia.org/wiki/Same-origin_policy)），您可以直接与其文档交互：

```
<script type="text/javascript">
window.onload = function() {
    var oFrame = document.getElementById("myframe");
    oFrame.contentWindow.document.onclick = function() {
        alert("frame contents clicked");
    };
};
</script> 
```

如果它包含外部页面，那么你就不走运了——出于明显的安全原因，无法做你想做的事。尽管所有内容在视觉上都是同一页面的一部分，但来自不同域的框架必须在脚本方面保持独立。否则，任何页面都可能创建一个隐藏的 iframe，加载您的网络邮件并从中窃取您的会话 cookie。用户可以访问所有数据，但页面作者不应访问这些数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-06T11:42:15.550

尝试使用：[https ://github.com/vincepare/iframeTracker-jquery](https://github.com/vincepare/iframeTracker-jquery)

由于同源策略无法从父页面读取 iframe 内容 (DOM)，因此跟踪基于与页面/iframe 边界监控系统关联的模糊事件，随时告知哪个 iframe 是鼠标光标。

将要跟踪的 iframe 元素与 jQuery 选择器匹配，并使用回调函数调用 iframeTracker，该回调函数将在检测到点击 iframe 时调用：

```
jQuery(document).ready(function($){
    $('.iframe_wrap iframe').iframeTracker({
        blurCallback: function(){
            // Do something when the iframe is clicked (like firing an XHR request)
        }
    });
}); 
```

还有更多选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-20T17:57:32.103

上面的脚本非常适合测试 iframe 中的点击功能。更具体地说，如果您使用 Google 较新的[analytics.js](https://developers.google.com/analytics/devguides/collection/analyticsjs)跟踪代码和事件跟踪来跟踪 iframe 中的点击，上面的代码将如下所示：

```
<script type="text/javascript">
window.onload = function() {
    var oFrame = document.getElementById("myframe");
    oFrame.contentWindow.document.onclick = function() {
        ga('send', 'event', 'link', 'click', 'My Frame Was Clicked');
    };
};
</script> 
```

iframe 可能看起来像这样（注意 id="myframe" 在 javascript 中被引用）：

```
<iframe id="myframe" src="http://www.yourowndomain.com" scrolling="yes" marginwidth="0" marginheight="0" vspace="0" hspace="0" height="800" style="border:0; overflow:hidden; width:100%;"></iframe> 
```

然后测试事件点击，如果您熟悉 Google 的事件跟踪，在 Google Analytics（分析）仪表板中的标准报告 > 实时 > 事件下，点击将显示为事件操作：点击，事件标签：我的框架被点击。或长期在仪表板中的行为 > 事件下。

我已经对此进行了测试，并且正如之前的海报所指出的那样，这仅在 iframe 源位于同一域上时才有效。

# qt - Qt 应用程序在 Gnome/Fedora 下崩溃 X 会话 (QDialog)

> ID：10071436
> 
> 赞同：2
> 
> 时间：2012-04-09T09:39:07.793
> 
> 标签：qt, crash, x11, exit, metacity

我写了一个很小的 ​​Qt4 (C++) 应用程序，除了显示一个列表之外，它并没有做太多的事情。它是一个 QDialog，所以按 Escape 会关闭它。

现在，如果我连续执行此操作（运行，然后关闭）大约 3 到 8 次，我的 X 会话会崩溃并且我会看到我的登录屏幕。如果我杀死我的程序而不是优雅地关闭它，这不会发生。

自然地，我查看了我的代码，尤其是退出时执行的代码。然而，这只是一个很小的析构函数，它删除了一些以前分配的变量。将这些行注释掉（-> 退出时不再执行代码）不会改变任何内容。调用 QApplication::exit() 也会崩溃。

我目前在这个开发系统上使用 Gnome，如果这很重要的话。

我真的不知道要找什么。有任何想法吗？

**编辑**：试图找到罪魁祸首，我已经逐条注释掉了代码。但是，我现在基本上删除了所有内容，除了显示 QDialog 的代码并且崩溃仍然发生。

这是代码：

**主文件**

```
#include <iostream>

#include <QApplication>
#include <QDialog>

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    return QDialog().exec();
} 
```

正如你所看到的，这个程序什么都不做（除了显示一个QDialog，但那是Qt，不是我的程序）。我不明白 2 行代码（+ Qt 代码，应该可以工作，因为每天有数百万人使用它）如何使我的 X 会话崩溃。到目前为止，我只在带有 Gnome 3 的 Fedora 16 上对其进行了测试。

**Edit2**：在同一个系统上用 KDE 和 LXDE 测试它（相同的二进制文件）**，没有崩溃**。同样在带有 Gnome、KDE ​​和 LXDE 的 Ubuntu 上，没有崩溃。必须与 Gnome3/Fedora 有关...

# iphone - 不要全屏显示相机

> ID：10071442
> 
> 赞同：0
> 
> 时间：2012-04-09T09:39:43.240
> 
> 标签：iphone, ios, uiimagepickercontroller

有没有办法专门在 iPad 中呈现非全屏的相机界面？

我已经尝试过 cameraOverlay，但它仍然全屏显示相机 UI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:47:07.520

只需向您的 nib/storyboard 添加一个额外的视图对象并将其用作您的相机界面。

# jquery - 如何在 MVC 中动态绑定 html.DropDownList()

> ID：10071444
> 
> 赞同：0
> 
> 时间：2012-04-09T09:39:46.703
> 
> 标签：jquery, asp.net-mvc, html.dropdownlistfor

我的页面中有一个下拉列表和一个文本框，我想通过文本框更改来更改下拉列表。我使用这样的 JQuery 帖子：

`$("#txtBuildId").change(function() { var builddate = $("#txtBuildId").val(); $.post("/UTOverview/Index?builddate=" + builddate); });`

我的索引函数是：

```
public ActionResult Index()
    {
        string buildDate = Request.Params.Get("builddate");
        DataTable tbBuildid = DatabaseService.getBuilidByDate(buildDate);
        List<SelectListItem> list = new List<SelectListItem>();
        foreach (DataRow bd in tbBuildid.Rows as IEnumerable)
        {
            list.Add(new SelectListItem { Text = bd["buildid"].ToString(), Value = bd["buildid"].ToString() });
        }
        ViewData["tbbuildid"] = list;
        return View();
    } 
```

但是我发现下拉列表没有随着 DataView["tbbuildid"] 的改变而改变？为什么 ？

我尝试通过完整的回发方式来做到这一点，例如：`window.location = "/UTOverview/Index?builddate=" + builddate;`它有效。每次我将新的 builddate 发布到方法 index 时，ViewData["tbbuildid"] 都会发生变化。但是我怎样才能通过 Ajax 方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:35:38.023

在您的 Action 方法中，您正在返回一个视图，但是您对此有视图吗？在这种情况下，我会简单地从 action 方法中返回 Json。

只需`Json`从您的 Action 方法返回并使用它来填充您的下拉菜单。由于您正在进行 Http Post 调用，它会命中您的`HTTPPost`Action 方法

```
[HttpPost]
public ActionResult Index()
{
        string buildDate = Request.Params.Get("builddate");
        DataTable tbBuildid = DatabaseService.getBuilidByDate(buildDate);
        List<SelectListItem> list = new List<SelectListItem>();
        foreach (DataRow bd in tbBuildid.Rows as IEnumerable)
        {
            list.Add(new SelectListItem { Text = bd["buildid"].ToString(), Value = bd["buildid"].ToString() });
        }
        return Json(list);
} 
```

在你的剧本中，

```
 $("#txtBuildId").change(function () {
        var builddate = $("#txtBuildId").val();
        $.post("@Url.Action("Index","UTOverview")", {builddate:builddate},function(data){
          $.each(data, function() {
                $("#select1").append($("<option />").val(this.Value).text(this.Text));
         });
        }); 
     }); 
```

`Url.Action`使用HTML 帮助程序获取 Action 方法的路径始终是一个好习惯，因为 MVC 将负责返回到 action 方法的正确路径。您无需担心`../`要使用多少。

上面的代码已经过测试，可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:50:21.363

您是否尝试调试您的 cs 代码并在您的 javascript 代码中添加警报。

尝试这样做，您应该更接近实际问题，并将这些发现发布在您的问题中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T11:56:35.090

jquery .post() 实际上是对服务器的异步调用。它返回一些数据，然后您需要对其进行处理。

如果您只是想通过完整的回发来刷新您的页面，您可以这样做

```
window.location = "/UTOverview/Index?builddate=" + builddate; 
```

如果您想动态更改下拉菜单的状态，而无需刷新页面，您需要将回调传递给 .post() ，它会根据返回的数据更新下拉框。在这种情况下，您不想让它调用您的索引操作，而是一个用于检索更新数据的特定操作。例如：

```
$.post("/UTOverview/BuildSelect?builddate=" + builddate, function(data) {
  $('#buildDropDown').html(data);
}); 
```

有关更多信息，请参阅[jQuery.post()](http://api.jquery.com/jQuery.post/)。或者，与其在控制器操作中构建 HTML（这有点不妥），不如返回一个 Json 结果并将您的下拉列表绑定到此。

在这两种情况下，请注意监听 onchange 事件只会在文本框失去焦点时触发。

# c# - 在c#中使用后台进程从数据库中获取记录？

> ID：10071450
> 
> 赞同：0
> 
> 时间：2012-04-09T09:40:15.610
> 
> 标签：c#, .net, winforms

我在数据库中总共有 70,000 条记录。目前我在数据网格视图中显示所有记录。但这需要太多时间。现在我想在winform加载时加载前100条记录，然后使用后台进程获取记录。并将其绑定到datagridview。有可能吗？如果是的话，我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:46:37.977

您可以在数据表上使用 linq，因此您只能获取要显示的行（使用分页）。一个例子 ：

```
DS.Tables[0].Select().Skip<DataRow>(pageItems * (PageNumber - 1)).Take<DataRow>(pageItems).CopyToDataTable(); 
```

pageItems 在您的情况下为 100，而 PageNumber 是当前选择的页面。在示例中，我有一个数据集 DS 并在新数据表中获取结果的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:47:07.150

绑定到数据网格的 70000 行对最终用户来说没有太大意义。它可能会导致整个应用程序速度变慢和内存使用率过高。即使在后台填充行，用户体验也可能非常糟糕。

我建议使用过滤器来限制用户可以看到的行数。另一种选择是使用[虚拟模式](http://msdn.microsoft.com/en-us/library/15a31akc.aspx)

# javascript - 表单上的隐形提交按钮

> ID：10071451
> 
> 赞同：1
> 
> 时间：2012-04-09T09:40:17.593
> 
> 标签：javascript, html, forms, submit, show

我有一个受验证代码约束的表单。前任。userName 必须有字母字符。因此返回真或假。

```
function isAlphapet()
{
  var alphaExp = /^[a-zA-Z]+$/;
  var namee=document.validation.userName.value;
  var nalt=document.getElementById('name1');
  if(namee!="")
   {
      if(!namee.match(alphaExp))
      {
       nalt.innerHTML="<font color='red'> Invalid Name: " + document.validation.userName.value + "</font>";
       document.validation.userName.focus();
       document.validation.userName.value="";
       //This will remove the success class if the user tries to modify it incorrectly.
       document.getElementById("userName").className = document.getElementById("userName").className.replace(" validationSuccess", "");
       //This is calling the css class name validationError to color the text box border in red if there is an error.
       //Leaving the replacing attribute empty incase the user hasn't input the correct string.
       document.getElementById("userName").className = document.getElementById("userName").className + " validationError";
         return false;  
       }else{//if it's validated correctly
          nalt.innerHTML="";
         //The text box should be green.
          document.getElementById("userName").className = document.getElementById("userName").className + " validationSuccess";
            return true; 
        }
   }
  else  if(namee.length==0) { //if the user leaves it blank.
   nalt.innerHTML="<font color='red'> Enter Name</font>";
    document.getElementById('name1').focus();
    document.getElementById("userName").className = document.getElementById("userName").className.replace(" validationSuccess", "");
    document.getElementById("userName").className = document.getElementById("userName").className + " validationError";
    //The above is explained on line 27+.
   return false;
    }
} 
```

在用户名文本框的表单中，我有：

```
Your Name:<br /><input name="userName" id="userName" onBlur="isAlphapet()" type="text" size="20" maxlength="25" /><br /> 
```

一旦以上返回true，我需要启用我的按钮。但是由于某种原因，当我尝试在正文中的 JScript 中使用它时，isAlphapet 没有返回任何内容。

有没有人有办法解决吗？

非常感激。

**编辑**：

感谢您回复斯里尼。

唔。不，在我进行更改后，整个验证功能都停止了工作。我想要达到的目标比听起来要简单一些。我需要一个 if 语句或类似以下内容：

```
if (isAlphapet()== true && emailvalid()== true && browserValid()==true){
    document.validation.sumb.disabled=false;
}
else{
    document.validation.subm.diabled=true;
} 
```

验证是我的表单的名称。我尝试在标题和正文中使用它。它也不识别我的函数的返回值。但是按钮禁用和启用仅在 /form 标记之后有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:43:18.477

试试这个

```
 <html>
            <head>
            <script type="text/javascript">
            function isAlphapet()
            {

             var alphaExp = /^[a-zA-Z]+$/;
             var namee=document.getElementById('userName').value;

             var nalt=document.getElementById('name1');
      if(namee!="")
      {
    if(!namee.match(alphaExp))
    {
        alert(namee);       

        nalt.innerHTML="<span style='color:red;'> Invalid Name: " + namee + "</span>";
        document.validation.userName.focus();
        document.validation.userName.value="";
   //This will remove the success class if the user tries to modify it incorrectly.
         document.getElementById("userName").className = document.getElementById("userName").className.replace("             validationSuccess",        "");
   //This is calling the css class name validationError to color the text box border in red if there is an error.
   //Leaving the replacing attribute empty incase the user hasn't input the correct string.
         document.getElementById("userName").className = document.getElementById("userName").className + " validationError";
         return false;  
      }

      else{//if it's validated correctly
      nalt.innerHTML="";
     //The text box should be green.
      document.getElementById("userName").className = document.getElementById("userName").className + " validationSuccess";
        return true; 
      }
  }
    else  if(namee.length==0) { //if the user leaves it blank.
       nalt.innerHTML="<font color='red'> Enter Name</font>";
       document.getElementById('name1').focus();
       document.getElementById("userName").className = document.getElementById("userName").className.replace(" validationSuccess", "");
       document.getElementById("userName").className = document.getElementById("userName").className + " validationError";
//The above is explained on line 27+.
      return false;
    }
 }

            </script>
            </head>
        <body>
         <div style="float:left">
            <form>
                Your Name:<br /><input name="userName" id="userName" onBlur="isAlphapet()" type="text" size="20" maxlength=                    "25" /><br />
            </form>
        </div>
          <div id="name1" style="float:left"></div>
         </body>
        </html> 
```

# ios - 如何在 iOS 上创建更新

> ID：10071452
> 
> 赞同：3
> 
> 时间：2012-04-09T09:40:20.043
> 
> 标签：ios, patch

您好我正在尝试在应用商店为我的应用创建和分发更新/补丁。有谁知道如何以最好的方式制作它？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-09T17:20:08.253

Apple 没有用于热补丁生产原生应用程序的接口，如果它是一个混合应用程序，许多 JavaScript 平台允许上传新的 JS，因此某些功能可能会被修复/替换/等等。我也看到了更多这样的核心解决方案一个[Lua 脚本](https://github.com/mmin18/WaxPatch)，您可以远程加载和修补您的应用程序（可能在 Apple 的灰线中）

我们@ [Rollout.io](https://rollout.io)创建了一个 SDK，允许您远程热补丁本地生产应用程序，您可以在[此处](https://blog.rollout.io/2015/01/rollout-io-under-the-hood-how-we-patch-your-mobile-app-in-production/)阅读更多信息。

免责声明：我是 Rollout.io 的联合创始人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:44:24.527

没有补丁或纯粹的更新之类的东西 - 您发布了带有您需要的更改的应用程序的完整版本。

# http - 在 HTTP 1.1 中，Content-Length = "Content-Length" ":" 1*DIGIT

> ID：10071453
> 
> 赞同：0
> 
> 时间：2012-04-09T09:40:20.273
> 
> 标签：http

在 HTTP 1.1 中，Content-Length = "Content-Length" ":" 1*DIGIT 我的问题是如何理解“1*DIGIT”？

这是否意味着任何数字？它是否允许前缀 0，例如“00123”？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:45:58.170

引用 RFC 2616：

> 元素前面的字符`*`表示重复。完整的形式`<n>*<m>element`表示至少和最多出现的元素。默认值为 0 和无穷大，因此`*(element)`允许任何数字，包括零；`1*element` 至少需要一个；并`1*2element`允许一两个。

# jquery - jquery xml多语言的想法

> ID：10071454
> 
> 赞同：0
> 
> 时间：2012-04-09T09:40:24.620
> 
> 标签：jquery

为了实现多语言网站，我有使用 xml 和 jquery 的想法。每种语言都有一个 xml 文件，作为所有网站标签的持有者。我创建了一个名为 'nl.xml' 的测试 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<resource>
<language name="nl">
<label id="yes">ja</label>
<label id="no">nee</label>
</language>
</resource> 
```

我使用以下 javascript 创建了一个 html 文件：

```
 <html>
   <head>
   <title></title>
   <script src="jquery-1.4.4.min.js"></script> 
   <script type="text/javascript" language="javascript">
   $(function() {     
   var language = 'nl';     
   $.ajax({         
   url: 'nl.xml',         
   success: function(xml) {             
   $(xml).find('label').each(function(){
   var id = $(this).attr('id');
   var text = $(this).find(label).text();
   $("." + id).html(text);            
     });        
      }    
     }); 
     }); 
     </script> 
    </head> 
```

并希望查看值：

```
'div class="no">no</div>'
'div class="yes">yes</div>' 
```

对于也分布在两个不同文件中的每个 div 已更改，但需要一些建议才能更好地完成此操作，因为此当前代码不起作用。这个想法是访问者下载包含网站和网页的所有标签的 xml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:16:13.497

您希望“查看每个 div 的值，这些值也分布在两个不同的文件中更改”是什么意思？我真不明白你的意思。

```
success: function(xml) {             
   $(xml).find('label').each(function(){
      var id = $(this).attr('id');
      var text = $(this).text();
      $('.some_element').append('<div class="'+id+'">'+text+'</div>');            
   });        
} 
```

`<label id="">`这将在您的 XML 中找到 every并`<div class="">`通过将其附加到特定元素将其转换为文档中的 a。

# c++ - 如何使用父类的运算符？

> ID：10071457
> 
> 赞同：4
> 
> 时间：2012-04-09T09:40:27.960
> 
> 标签：c++, inheritance, operators

> **可能重复：**
> [如何在 C++ 中使用基类的构造函数和赋值运算符？](https://stackoverflow.com/questions/1226634/how-to-use-base-classs-constructors-and-assignment-operator-in-c)

```
class A
{
protected:
    void f();
}

class B : public A
{
protected:
    void f()
    {
         A::f();
    }
} 
```

我们可以这样使用父类的功能，但是我不知道如何使用父类的操作符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T10:24:04.163

用户定义类型的运算符只是具有时髦名称的成员函数。因此，它与您的示例非常相似：

```
#include <iostream>

class A
{
protected:
    A& operator++() { std::cout << "++A\n"; return *this; }
};

class B : public A
{
public:
    B& operator++()
    {
        A::operator++();
        return *this;
    }
};

int main()
{
    B b;
    ++b;
} 
```

# java - 在 Spring Security 和 Tomcat 中禁用 Remember-Me

> ID：10071462
> 
> 赞同：3
> 
> 时间：2012-04-09T09:40:55.373
> 
> 标签：java, spring, session, tomcat, spring-mvc

我想知道，有没有办法在 Spring Security 中禁用记住我？我想要实现的场景很常见：关闭浏览器窗口后，我希望用户的会话过期。看起来很奇怪，但它不适用于 Tomcat 7 和 Spring Security 3.1。我们在 Spring Security 配置文件中使用了 auto-config，但是没有 remember-me 元素。

让它工作的最佳解决方案是什么？提前致谢！

**更新**这是澄清我的问题的使用场景：

1.  用户登录到受限区域，例如 /secure.html
2.  然后他关闭浏览器而不手动注销。
3.  他再次打开浏览器并直接转到 /secure.html。
4.  当前 Spring 的行为：页面显示成功。预期行为：重定向到登录页面。

**鉴别诊断的新症状**：用户很可能被重新认证，因为浏览器关闭/打开之间的 JSESSIONID 相同。如何让 Tomcat 或 Spring 为每个浏览器会话生成一个新会话？

**Spring Security 配置的更新**片段：

```
<http auto-config="true">
    <anonymous key="anonymous-security" />
    <intercept-url pattern="/auth/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/**" access="ROLE_ADMIN" />
    <form-login login-page="/auth/login.html" 
                default-target-url="/auth/default.html"
                authentication-failure-url="/auth/failed.html" />
    <logout logout-success-url="/auth/logout.html" delete-cookies="JSESSIONID" />
</http> 
```

**更新**文档[声称](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#ftn.d0e765)自 3.0 以来 auto-config="true" 中没有默认的记住我配置（我们使用 3.1）：

> 在 3.0 之前的版本中，此列表还包括记住我功能。这可能会导致某些配置出现一些令人困惑的错误，并已在 3.0 中删除。

我的网络应用有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:46:21.450

为什么不通过重定向到：/j_spring_security_logout 来注销现有用户？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:06:35.240

在我使用最新的 Spring 安全性和 Tomcat 6 的实现中，我使用以下配置：它与您的相似吗？

```
<http use-expressions="true" access-denied-page="/Error.xhtml">
    <intercept-url access="isAuthenticated()" pattern="/secure.xhtml"/>               
    <form-login />
    <logout invalidate-session="true" logout-success-url="/search.xhtml"/>
</http> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:39:19.703

## 问题说明：

我遇到了同样的问题：我的浏览器会记住我的用户。

通常：登录以访问受限区域后，关闭浏览器，然后重新打开它并输入相同的受限区域，当我预计会提示我输入凭据时，它会让我访问它。

在玩了之后，我注意到一件重要的事情：**这种行为在浏览器之间并不一致**：

*   Eclipse 的底层浏览器在关闭后确实记得
*   关闭后 Chrome 确实记得
*   IE（9）关闭后不记得了
*   Firefox (16.0.1) 关闭后不记得了
*   Safari（5.1.7 for windows）关闭后不记得了

可以测试更多浏览器类型和版本...

## 解决方案：

1.  一种解决方法可能是尝试检测用户何时关闭其浏览器，并在发生这种情况时触发注销。不太确定这是多么可行。

可能有更好的解决方案，如果我找到它，我会更新这个答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T11:58:32.187

您可以尝试添加一个`logouthandler`来终止本地会话：

```
<!-- Logout handler terminating local session -->
<bean id="logoutHandler" class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler">
    <property name="invalidateHttpSession" value="true" />
</bean> 
```

实际上，它默认为 true，因此您可能不需要设置该属性。

# android - 与 layout-sw600dp 类似，可替代 drawable

> ID：10071463
> 
> 赞同：10
> 
> 时间：2012-04-09T09:40:59.333
> 
> 标签：android

我的问题很简单，就像 layout-sw600dp,values-sw600dp 分别用于布局和值一样，相对于屏幕大小，可绘制文件夹有什么。

我在各种文档中读到，如果我们想使用任何大于或等于 7 英寸的屏幕，我们可以使用 layout-sw600dp 文件夹，对于任何屏幕尺寸较小的设备，布局文件夹将被考虑在内。那么我们如何也可以对图像使用相同的概念。现在有 ldpi、mdpi、hdpi 文件夹，但是图像是根据屏幕密度而不是屏幕尺寸拍摄的。现在，如果我正在开发一个在设备和手机上都可以使用的应用程序，那么我可能的图像处理方法应该是什么。

提前谢谢，请指导我。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-09T09:53:47.783

你也可以对drawable使用相同的概念，比如drawable-sw600dp、drawable-sw600dp-mdpi等。我在我的应用程序中使用了这个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T09:57:37.607

我不是 100% 支持这个，但我认为您也可以对可绘制对象使用相同的约定。尝试`drawable-sw600dp-hdpi`或类似的东西。虽然我也有一些问题，但您可能想在继续之前回答：

1.  为什么要为更大的屏幕尺寸提供不同的图像（不是分辨率）？
2.  如您所知，7 英寸设备将使用 layout-sw600dp 文件夹，那么为什么不对不同的可绘制对象使用不同的名称呢？那看起来会干净得多，imo。

# ios - 需要从 rss 中获取项目并在 WebView 中打开它

> ID：10071464
> 
> 赞同：0
> 
> 时间：2012-04-09T09:41:01.470
> 
> 标签：ios, xcode, rss, webview, viewcontroller

嘿，这是我在 rootviewcontroller.m 上的代码（RSS 页面）

```
NSDictionary* storyLink = [[stories objectAtIndex: storyIndex] objectForKey: @"link"];

// clean up the link - get rid of spaces, returns, and tabs...
storyLink = [storyLink stringByReplacingOccurrencesOfString:@" " withString:@""];
storyLink = [storyLink stringByReplacingOccurrencesOfString:@"\n" withString:@""];
storyLink = [storyLink stringByReplacingOccurrencesOfString:@"  " withString:@""];

NSLog(@"link: %@", storyLink);

browserScreen=[[BrowserViewController alloc] initWithNibName:@"BrowserViewController" bundle:nil];
browserScreen.storyLink =[[stories objectAtIndex: storyIndex] objectForKey: @"link"];

[self.view addSubview:browserScreen.view]; 
```

这会打开 WebView 页面，但不会加载我请求的 url。这是我的 BrowserViewController.ms viewDidload 页面（网络视图，我还在 .xib 文件中修补了东西）

```
- (void)viewDidLoad
{
    [super viewDidLoad];

   // NSString *urlAddress = storyLink;
    NSString *urlAddress = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"storyLink"];

    //Create a URL object.

    NSURL *url = [NSURL URLWithString:urlAddress];

    //URL Requst Object

    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    //Load the request in the UIWebView.

    [webView loadRequest:requestObj];

    // Do any additional setup after loading the view from its nib.
} 
```

希望有人帮助，因为我对此感到绝望

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:36:05.850

我认为这段代码反映了很多问题，因为你计算了一个 local `storyLink`，清理它，记录它，然后忽略它；您从原始的、未清理的源设置`storyLink`属性；`browserScreen`然后，在`-viewDidLoad`，你甚至不使用它，你从你的包中得到一个文件路径。

对于最后一部分：鉴于您有一个文件路径字符串，您不应该使用`+URLWithString:`它来创建 URL。文件路径不是有效的 URL 字符串。你需要使用`+fileURLWithPath:`.

此外，您将文件路径计算为直接在您的包中。那真的是文件所在的地方吗？它不在内容/资源或类似的东西中？

# spring - 添加@PreAuthorize注解时出现NoSuchBeanDefinitionException

> ID：10071465
> 
> 赞同：0
> 
> 时间：2012-04-09T09:41:08.747
> 
> 标签：spring, gwt, spring-security, requestfactory

我正在尝试执行我的 GWT 应用程序和 Spring Security 的集成。`@PreAuthorize("hasRole('ROLE_USER')")`当我向我的 DAO 类的方法添加注释时，会出现以下异常：

> 没有定义类型 [server.dao.ElementServiceDAO] 的唯一 bean：预期的单个 bean 但找到 0

DaoServiceLocator 找不到 DAO bean，但在调试模式下，我在 ApplicationContext 实例中看到 elementServiceDAO bean。

我的 DAO 类如下所示：

```
@Service
public class ElementServiceDAO extends EntityDAO {

@PreAuthorize("hasRole('ROLE_USER')")
@SuppressWarnings("unchecked")
public Layer getFullRenderingTopology() {
...
}

} 
```

DAO 服务定位器的代码：

```
public class DaoServiceLocator implements ServiceLocator {

@Override
public Object getInstance(final Class<?> clazz) {
    try {
        final HttpServletRequest request = RequestFactoryServlet
                .getThreadLocalRequest();

        final ServletContext servletContext = request.getSession()
                .getServletContext();

        final ApplicationContext context = WebApplicationContextUtils
                .getWebApplicationContext(servletContext);

        return context.getBean(clazz);
    } catch (final Exception e) {
        throw new RuntimeException(e);
    }
}
} 
```

applicationContext-security.xml：

```
<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="operator" password="operator" authorities="ROLE_USER, ROLE_ADMIN" />
            <user name="guest" password="guest" authorities="ROLE_USER" />
        </user-service>
    </authentication-provider>
</authentication-manager>

<global-method-security pre-post-annotations="enabled" /> 
```

请给我任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:06:40.700

当`ElementServiceDAO`实现一个接口时（在你的情况下 - 通过传递`EntityDAO`），Spring 默认创建一个基于接口的代理来应用安全方面。因此，`elementServiceDAO`在您的应用程序上下文中，代理不是 的实例`ElementServiceDAO`，因此无法按类型检索。

你要么需要

*   强制创建基于目标类的代理，如下所示

    ```
    <global-method-security 
        pre-post-annotations="enabled" proxy-target-class = "true" /> 
    ```

*   或为该接口创建业务接口`ElementServiceDAO`并使用该接口而不是实现类。

**也可以看看：**

*   [7.6 代理机制](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-proxying)

# python - 在 web2py 中使用 menu.py 将视图添加为菜单项

> ID：10071468
> 
> 赞同：1
> 
> 时间：2012-04-09T09:41:48.090
> 
> 标签：python, model-view-controller, web2py

有人请帮我理解 models/menu.py 文件的以下代码：

```
response.menu = [  
(T('Home'),False,URL('default','index')),  
(T('About'),False,URL('default','what')),  
(T('Download'),False,URL('default','download')),  
(T('Docs & Resources'),False,URL('default','documentation')),  
(T('Support'),False,URL('default','support')),  
(T('Contributors'),False,URL('default','who'))  
] 
```

在此，我们在 URL 中指定控制器（例如，default/what）。如果我想在其中指定一个视图怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T13:16:31.030

> 在此，我们在 URL 中指定控制器（例如，default/what）。如果我想在其中指定一个视图怎么办？

在 web2py 中，URL 不会直接路由到视图。相反，它们路由到控制器，并且控制器具有关联的视图（每个控制器都有一个默认视图，但控制器本身可以指定任何视图）。如果您想使用 URL 来告诉给定控制器使用不同于其通常视图的视图，您可以通过 URL 中的 arg 或 var 来指示。例如：

```
response.menu = [...,
    (T('About'), False,URL('default', 'what', args='alt')),
    ...] 
```

在 default.py 控制器中：

```
def what():
    if request.args(0) == 'alt':
        response.view = 'default/what_alt.html'
    [rest of controller code] 
```

# installation - 安装过程中出现pyvlfeat错误：/usr/bin/ld: 找不到-lboost_python-mt-py26

> ID：10071471
> 
> 赞同：5
> 
> 时间：2012-04-09T09:41:52.860
> 
> 标签：installation

我没有成功找到解决我在 pyvlfeat 0.1.1a3 安装过程中遇到的以下错误的方法：/usr/bin/ld: cannot find -lboost_python-mt-py26

我已经安装了boost python。这是控制台输出：

```
lenovo@lenovo-ThinkPad-T61:~/Downloads/pyvlfeat-0.1.1a3$ ipython
Python 2.7.2+ (default, Oct  4 2011, 20:03:08) 
Type "copyright", "credits" or "license" for more information.

IPython 0.12 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details.

In [1]: run setup.py clean
running clean
removing 'build/temp.linux-i686-2.7' (and everything under it)

In [2]: run setup.py build
running build
running build_py
running build_ext
building '_vlfeat' extension
creating build/temp.linux-i686-2.7
creating build/temp.linux-i686-2.7/vlfeat
creating build/temp.linux-i686-2.7/vlfeat/vl
creating build/temp.linux-i686-2.7/vlfeat/mser
creating build/temp.linux-i686-2.7/vlfeat/sift
creating build/temp.linux-i686-2.7/vlfeat/imop
creating build/temp.linux-i686-2.7/vlfeat/misc
creating build/temp.linux-i686-2.7/vlfeat/kmeans
creating build/temp.linux-i686-2.7/vlfeat/quickshift
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/aib.c -o build/temp.linux-i686-2.7/vlfeat/vl/aib.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/generic.c -o build/temp.linux-i686-2.7/vlfeat/vl/generic.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/hikmeans.c -o build/temp.linux-i686-2.7/vlfeat/vl/hikmeans.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/ikmeans.c -o build/temp.linux-i686-2.7/vlfeat/vl/ikmeans.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/imopv.c -o build/temp.linux-i686-2.7/vlfeat/vl/imopv.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/mathop.c -o build/temp.linux-i686-2.7/vlfeat/vl/mathop.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/mathop_sse2.c -o build/temp.linux-i686-2.7/vlfeat/vl/mathop_sse2.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/pgm.c -o build/temp.linux-i686-2.7/vlfeat/vl/pgm.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/rodrigues.c -o build/temp.linux-i686-2.7/vlfeat/vl/rodrigues.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/stringop.c -o build/temp.linux-i686-2.7/vlfeat/vl/stringop.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/getopt_long.c -o build/temp.linux-i686-2.7/vlfeat/vl/getopt_long.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/host.c -o build/temp.linux-i686-2.7/vlfeat/vl/host.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/imopv_sse2.c -o build/temp.linux-i686-2.7/vlfeat/vl/imopv_sse2.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/mser.c -o build/temp.linux-i686-2.7/vlfeat/vl/mser.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/random.c -o build/temp.linux-i686-2.7/vlfeat/vl/random.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/sift.c -o build/temp.linux-i686-2.7/vlfeat/vl/sift.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/dsift.c -o build/temp.linux-i686-2.7/vlfeat/vl/dsift.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/vl/quickshift.c -o build/temp.linux-i686-2.7/vlfeat/vl/quickshift.o -msse2 -O2 -fPIC -w
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/mser/vl_erfill.cpp -o build/temp.linux-i686-2.7/vlfeat/mser/vl_erfill.o -msse2 -O2 -fPIC -w
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/mser/vl_mser.cpp -o build/temp.linux-i686-2.7/vlfeat/mser/vl_mser.o -msse2 -O2 -fPIC -w
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/sift/vl_sift.cpp -o build/temp.linux-i686-2.7/vlfeat/sift/vl_sift.o -msse2 -O2 -fPIC -w
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/sift/vl_dsift.cpp -o build/temp.linux-i686-2.7/vlfeat/sift/vl_dsift.o -msse2 -O2 -fPIC -w
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/sift/vl_siftdescriptor.cpp -o build/temp.linux-i686-2.7/vlfeat/sift/vl_siftdescriptor.o -msse2 -O2 -fPIC -w
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/imop/vl_imsmooth.cpp -o build/temp.linux-i686-2.7/vlfeat/imop/vl_imsmooth.o -msse2 -O2 -fPIC -w
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/misc/vl_binsum.cpp -o build/temp.linux-i686-2.7/vlfeat/misc/vl_binsum.o -msse2 -O2 -fPIC -w
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/kmeans/vl_hikmeans.cpp -o build/temp.linux-i686-2.7/vlfeat/kmeans/vl_hikmeans.o -msse2 -O2 -fPIC -w
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/kmeans/vl_ikmeans.cpp -o build/temp.linux-i686-2.7/vlfeat/kmeans/vl_ikmeans.o -msse2 -O2 -fPIC -w
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/kmeans/vl_hikmeanspush.cpp -o build/temp.linux-i686-2.7/vlfeat/kmeans/vl_hikmeanspush.o -msse2 -O2 -fPIC -w
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/kmeans/vl_ikmeanspush.cpp -o build/temp.linux-i686-2.7/vlfeat/kmeans/vl_ikmeanspush.o -msse2 -O2 -fPIC -w
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/quickshift/vl_quickshift.cpp -o build/temp.linux-i686-2.7/vlfeat/quickshift/vl_quickshift.o -msse2 -O2 -fPIC -w
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ivlfeat/ -I/usr/include/python2.7 -c vlfeat/py_vlfeat.cpp -o build/temp.linux-i686-2.7/vlfeat/py_vlfeat.o -msse2 -O2 -fPIC -w
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
g++ -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions build/temp.linux-i686-2.7/vlfeat/vl/aib.o build/temp.linux-i686-2.7/vlfeat/vl/generic.o build/temp.linux-i686-2.7/vlfeat/vl/hikmeans.o build/temp.linux-i686-2.7/vlfeat/vl/ikmeans.o build/temp.linux-i686-2.7/vlfeat/vl/imopv.o build/temp.linux-i686-2.7/vlfeat/vl/mathop.o build/temp.linux-i686-2.7/vlfeat/vl/mathop_sse2.o build/temp.linux-i686-2.7/vlfeat/vl/pgm.o build/temp.linux-i686-2.7/vlfeat/vl/rodrigues.o build/temp.linux-i686-2.7/vlfeat/vl/stringop.o build/temp.linux-i686-2.7/vlfeat/vl/getopt_long.o build/temp.linux-i686-2.7/vlfeat/vl/host.o build/temp.linux-i686-2.7/vlfeat/vl/imopv_sse2.o build/temp.linux-i686-2.7/vlfeat/vl/mser.o build/temp.linux-i686-2.7/vlfeat/vl/random.o build/temp.linux-i686-2.7/vlfeat/vl/sift.o build/temp.linux-i686-2.7/vlfeat/vl/dsift.o build/temp.linux-i686-2.7/vlfeat/vl/quickshift.o build/temp.linux-i686-2.7/vlfeat/mser/vl_erfill.o build/temp.linux-i686-2.7/vlfeat/mser/vl_mser.o build/temp.linux-i686-2.7/vlfeat/sift/vl_sift.o build/temp.linux-i686-2.7/vlfeat/sift/vl_dsift.o build/temp.linux-i686-2.7/vlfeat/sift/vl_siftdescriptor.o build/temp.linux-i686-2.7/vlfeat/imop/vl_imsmooth.o build/temp.linux-i686-2.7/vlfeat/misc/vl_binsum.o build/temp.linux-i686-2.7/vlfeat/kmeans/vl_hikmeans.o build/temp.linux-i686-2.7/vlfeat/kmeans/vl_ikmeans.o build/temp.linux-i686-2.7/vlfeat/kmeans/vl_hikmeanspush.o build/temp.linux-i686-2.7/vlfeat/kmeans/vl_ikmeanspush.o build/temp.linux-i686-2.7/vlfeat/quickshift/vl_quickshift.o build/temp.linux-i686-2.7/vlfeat/py_vlfeat.o -o build/lib.linux-i686-2.7/_vlfeat.so -msse -shared -lboost_python-mt-py26
/usr/bin/ld: cannot find -lboost_python-mt-py26
collect2: ld returned 1 exit status
An exception has occurred, use %tb to see the full traceback.

SystemExit: error: command 'g++' failed with exit status 1

In [3]: 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T17:22:40.947

对此的快速解决方法是简单地编辑 pyvlfeat 的 setup.py 并修改 LinkArgs 行以引用您的 boost-python 安装。对于我的系统（可能还有许多其他系统），这相当于将 -lboost_python-mt-py26 更改为 -lboost_python-mt-py27 以引用正确的 Python 版本。

# c++ - c++ QObject的子管理

> ID：10071474
> 
> 赞同：-5
> 
> 时间：2012-04-09T09:42:05.143
> 
> 标签：c++, qt4

此问题来自过去的试卷，用于复习

```
#include <QApplication>
#include <QLabel>
#include <QVBoxLayout> 
#include <QTextEdit>
#include <QWidget> 

int main (int argc, char* argv[]) {
    QApplication app (argc, argv);
    QWidget window;

    QLabel* label =  new QLabel("Please enter some text");
    QTextEdit* textEdit = new QTextEdit;
    QVBoxLayout* layout = new QVBoxLayout;
    layout->addwidget(label);
    layout->addwidget(textEdit);

    window.setLayout(layout);
    window.show;

    return app.exec();
} 
```

1.  Qt 通过 QObject 类提供了一个子管理工具。上面程序中的QObject在哪里？解释

2.  QObject 类提供函数 setParent(QObject *parent) 来指定一个 Qbject 作为它的父对象。为什么这个功能在这个程序中没有使用？

3.  该程序同时使用堆和堆栈对象。解释在以下情况下父子设施如何工作：

一个。parent 是堆对象，子对象是堆栈对象
b.parent 是堆栈对象，子对象是堆对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:59:14.123

QObject 文档可[在此处](http://qt-project.org/doc/qt-4.8/qobject.html)获得，也可以通过 Qt 助手访问。所以继续阅读吧。

# java - 将 Gigya 的登录名集成到我的应用程序登录名（使用 shiro apache）

> ID：10071480
> 
> 赞同：2
> 
> 时间：2012-04-09T09:42:41.540
> 
> 标签：java, shiro, gigya

我的应用程序登录是使用 Shiro Apache 开发的，它工作正常，但现在我想集成该应用程序 Gigya 的登录任何人请指定添加步骤我遵循下面提到的官方网站我没有得到那个

[http://developers.gigya.com/030_Server_SDKs/java](http://developers.gigya.com/030_Server_SDKs/java)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:03:16.980

最后我找到了我的问题的解决方案首先打开以下链接 [https://platform.gigya.com/login.aspx?ReturnUrl=%2fSite%2fpartners%2fDashboard.aspx](https://platform.gigya.com/login.aspx?ReturnUrl=%2fSite%2fpartners%2fDashboard.aspx) 单击请求帐户，然后注册获取 API 密钥和密钥

[从http://developers.gigya.com/030_Server_SDKs/java](http://developers.gigya.com/030_Server_SDKs/java)站点下载 GSJavaSDK.jar 文件并放置在 lib 文件夹中，然后在登录页面中添加以下代码（html 或 xhtml）

```
<html>
<head>
    <script type="text/javascript" lang="javascript" 
       src="http://cdn.gigya.com/JS/socialize.js?apikey=2_Y82PzwJ_chSFImHXaIDJClnLyJzmk-VFOavSsaNTzl6m901s_NNxRAS0xJ3bd3_N">
    </script>   
</head>
<body >
<br />
    <p>Please sign in using one of the following providers:</p>
    <div id="loginDiv"></div>
    <script type="text/javascript">
        gigya.socialize.showLoginUI({containerID: "loginDiv", cid:'', width:220, height:60,
                redirectURL: "http://wikifiles.gigya.com/Socialize/PostLoginPage.htm",
                showTermsLink:false, hideGigyaLink:true // remove 'Terms' and 'Gigya' links
                });
    </script>
</body>
</html> 
```

然后部署应用程序并运行

# iphone - 收到内存警告。等级=1

> ID：10071481
> 
> 赞同：2
> 
> 时间：2012-04-09T09:42:45.923
> 
> 标签：iphone, objective-c, ipad

嗨朋友们，我正在研究位置查找器应用程序，每次进入地图页面时，我都会收到类似警告：

```
"Received memory warning. Level=1" 
```

该应用程序崩溃后不知道该怎么做，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:30:16.190

这意味着您有非常严重的内存泄漏。因此，您将需要使用仪器 - 内存泄漏来找到它们并修复它们。在此之前要做的一件好事是转到您的 xcode 菜单，产品 - 分析以首先找到所有明显的内存问题。

有时您也可以尝试设置断点，以找出崩溃的来源，如果分析和仪器的结果 - 内存泄漏没有多大意义。

不管我猜什么，你都必须学习如何使用乐器。你无法摆脱它。

希望这可以帮助。

# c++ - Ofstream 在我的输出中添加了额外的字符

> ID：10071483
> 
> 赞同：0
> 
> 时间：2012-04-09T09:42:56.923
> 
> 标签：c++, encryption, ifstream, ofstream

我正在使用 XTEA 算法制作一个加密/解密程序。加密/解密功能工作正常，但是当我加密文件然后解密它时，我在文件末尾得到一些额外的字符：

```
--- Original file ---
QwertY

--- Encrypted file ---
»¦æŸS@±­

--- Deciphered from encrypted ---
QwertY  ß*tÞÇ 
```

我不知道为什么最后会出现“ß*tÞÇ”。我将发布我的一些代码，但不是全部，因为它太长了。加密/解密功能采用 64 位数据和 128 位密钥，并将数据加密/解密到相同的块大小，同样是 64 位（[此处类似功能](http://en.wikipedia.org/wiki/XTEA)）。然后可以将其写入新文件。

```
 long data[2]; // 64bits
    ZeroMemory(data, sizeof(long)*2);
    char password[16];
    ZeroMemory(password, sizeof(char)*16);

    long *key;
    if(argc > 1)
    {
        string originalpath = argv[1];
        string finalpath;
        string eextension = "XTEA";
        string extension = GetFileExtension(originalpath);
        bool encipherfile = 1;

        if(extension.compare(eextension) == 0) // If extensions are equal, dont encipher file
        {
            encipherfile = 0;
            finalpath = originalpath;
            finalpath.erase(finalpath.length()-5, finalpath.length());
        }

        ifstream in(originalpath, ios::binary);
        ofstream out(finalpath, ios::binary);

        cout << "Password:" << endl;
        cin.get(password,sizeof(password));
        key = reinterpret_cast<long *>(password);

        while(!in.eof())
        {
            ZeroMemory(data, sizeof(long)*2);
            in.read(reinterpret_cast<char*>(&data), sizeof(long)*2); // Read 64bits from file

            if(encipherfile == 1)
            {
                encipher(data, key);
                out.write(reinterpret_cast<char*>(&data), sizeof(data));
                continue;
            }
            if(encipherfile == 0)
            {
                decipher(data, key);
                out.write(reinterpret_cast<char*>(&data), sizeof(data));
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:59:36.913

阅读后立即检查`eof`，如果你`eof`跳出循环。

如果您可能有部分读取（即可能读取少于所有请求的字节），那么您还需要调用`gcount`以找出您实际读取的字节数，因此：

```
cin.read( ... )
if( cin.eof() )
    {
    streamsize bytesRead = cin.gcount();
    if( bytesRead > 0 )
       // process those bytes
    break;
    } 
```

# iphone - TabController 示例对象创建错误

> ID：10071493
> 
> 赞同：0
> 
> 时间：2012-04-09T09:44:01.907
> 
> 标签：iphone, objective-c, ios, xcode, tabcontrol

我有一个 Xcode 4 提供的 TabController 示例的 5 个选项卡扩展版本。我需要做一些数学运算，所以创建了一个对象来管理它。该对象仅插入到需要它的选项卡视图中。它编译得很好。

但是，当我单击按钮以更新屏幕上的答案时，它会出错。

```
label.text = [[NSString alloc] initWithFormat:@"%.2f", c]; 
```

没有上面的行，它不会。

调试器在 main.m 中引用的第一行是：

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([SolarAppDelegate class])); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:50:08.123

请检查您在 c 中的值类型。

同样在新的 xcode 中，如果您想知道确切的错误点，您需要更改一些设置并添加异常断点。如果您没有添加任何异常断点，那么它只会向您显示这一行

# android - 读写 Parcelable 对象数组

> ID：10071502
> 
> 赞同：79
> 
> 时间：2012-04-09T09:44:43.487
> 
> 标签：android, parcelable

我有以下类，它从/向包裹读取和写入对象数组：

```
class ClassABC extends Parcelable {
    MyClass[] mObjList;

    private void readFromParcel(Parcel in) {
        mObjList = (MyClass[]) in.readParcelableArray(
                com.myApp.MyClass.class.getClassLoader()));
    }

    public void writeToParcel(Parcel out, int arg1) {
        out.writeParcelableArray(mObjList, 0);
    }

    private ClassABC(Parcel in) {
        readFromParcel(in);
    }

    public int describeContents() {
        return 0;
    }

    public static final Parcelable.Creator<ClassABC> CREATOR =
            new Parcelable.Creator<ClassABC>() {

        public ClassABC createFromParcel(Parcel in) {
            return new ClassABC(in);
        }

        public ClassABC[] newArray(int size) {
            return new ClassABC[size];
        }
    };
} 
```

在上面的代码中，我`ClassCastException`在阅读时得到一个`readParcelableArray`：

> 错误/AndroidRuntime（5880）：引起：java.lang.ClassCastException：[Landroid.os.Parcelable;

上面的代码有什么问题？在编写对象数组时，我应该先将数组转换为`ArrayList`?

**更新：**

可以将 Object 数组转换为 an`ArrayList`并将其添加到 parcel 中吗？例如，在编写时：

```
 ArrayList<MyClass> tmpArrya = new ArrayList<MyClass>(mObjList.length);
    for (int loopIndex=0;loopIndex != mObjList.length;loopIndex++) {
        tmpArrya.add(mObjList[loopIndex]);
    }
    out.writeArray(tmpArrya.toArray()); 
```

阅读时：

```
 final ArrayList<MyClass> tmpList = 
            in.readArrayList(com.myApp.MyClass.class.getClassLoader());
    mObjList= new MyClass[tmpList.size()];
    for (int loopIndex=0;loopIndex != tmpList.size();loopIndex++) {
        mObjList[loopIndex] = tmpList.get(loopIndex);
    } 
```

但现在我得到一个`NullPointerException`. 上述方法是否正确？为什么它会抛出 NPE？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-05-28T07:51:05.223

您需要使用该方法写入数组并使用该`Parcel.writeTypedArray()`方法将其读回`Parcel.createTypedArray()`，如下所示：

```
MyClass[] mObjList;

public void writeToParcel(Parcel out) {
    out.writeTypedArray(mObjList, 0);
}

private void readFromParcel(Parcel in) {
    mObjList = in.createTypedArray(MyClass.CREATOR);
} 
```

您不应该使用`readParcelableArray()`/`writeParcelableArray()`方法的原因是它`readParcelableArray()`确实会创建`Parcelable[]`a 结果。这意味着您不能将方法的结果转换为`MyClass[]`. 相反，您必须创建一个`MyClass`与结果长度相同的数组，并将结果数组中的每个元素复制到`MyClass`数组中。

```
Parcelable[] parcelableArray =
        parcel.readParcelableArray(MyClass.class.getClassLoader());
MyClass[] resultArray = null;
if (parcelableArray != null) {
    resultArray = Arrays.copyOf(parcelableArray, parcelableArray.length, MyClass[].class);
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-09T11:14:10.210

> 错误/AndroidRuntime（5880）：引起：java.lang.ClassCastException：[Landroid.os.Parcelable;

根据[API](http://developer.android.com/reference/android/os/Parcel.html#readParcelableArray%28java.lang.ClassLoader%29)，readParcelableArray 方法返回 Parcelable 数组（Parcelable[]），不能简单地转换为 MyClass 数组（MyClass[]）。

> 但现在我得到空指针异常。

如果没有详细的异常堆栈跟踪，很难说出确切的原因。

* * *

假设你已经让 MyClass 正确地实现 Parcelable，这就是我们通常对 Parcelable 对象数组进行序列化/反序列化的方式：

```
public class ClassABC implements Parcelable {

  private List<MyClass> mObjList; // MyClass should implement Parcelable properly

  // ==================== Parcelable ====================
  public int describeContents() {
    return 0;
  }

  public void writeToParcel(Parcel out, int flags) {
    out.writeList(mObjList);
  }

  private ClassABC(Parcel in) {
    mObjList = new ArrayList<MyClass>();
    in.readList(mObjList, getClass().getClassLoader());
   }

  public static final Parcelable.Creator<ClassABC> CREATOR = new Parcelable.Creator<ClassABC>() {
    public ClassABC createFromParcel(Parcel in) {
      return new ClassABC(in);
    }
    public ClassABC[] newArray(int size) {
      return new ClassABC[size];
    }
  };

} 
```

希望这可以帮助。

您还可以使用以下方法：

```
 public void writeToParcel(Parcel out, int flags) {
      out.writeTypedList(mObjList);
  }

  private ClassABC(Parcel in) {
      mObjList = new ArrayList<ClassABC>();
      in.readTypedList(mObjList, ClassABC.CREATOR);
  } 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-10T06:49:36.883

我有一个类似的问题，并以这种方式解决。我在 MyClass 中定义了一个辅助方法，用于将 Parcelable 数组转换为 MyClass 对象数组：

```
public static MyClass[] toMyObjects(Parcelable[] parcelables) {
    MyClass[] objects = new MyClass[parcelables.length];
    System.arraycopy(parcelables, 0, objects, 0, parcelables.length);
    return objects;
} 
```

每当我需要读取 MyClass 对象的可打包数组时，例如从意图：

```
MyClass[] objects = MyClass.toMyObjects(getIntent().getParcelableArrayExtra("objects")); 
```

**编辑**：这是我最近使用的同一功能的更新版本，以避免编译警告：

```
public static MyClass[] toMyObjects(Parcelable[] parcelables) {
    if (parcelables == null)
        return null;
    return Arrays.copyOf(parcelables, parcelables.length, MyClass[].class);
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-01T09:33:33.360

您需要使用该方法写入数组并使用该`Parcel.writeTypedArray()`方法将其读回`Parcel.readTypedArray()`，如下所示：

```
MyClass[] mObjArray;

public void writeToParcel(Parcel out, int flags) {
    out.writeInt(mObjArray.length);
    out.writeTypedArray(mObjArray, flags);
}

protected MyClass(Parcel in) {
    int size = in.readInt();
    mObjArray = new MyClass[size];
    in.readTypedArray(mObjArray, MyClass.CREATOR);
} 
```

对于列表，您可以执行以下操作：

```
 ArrayList<MyClass> mObjList;

  public void writeToParcel(Parcel out, int flags) {
      out.writeTypedList(mObjList);
  }

  protected MyClass(Parcel in) {
      mObjList = new ArrayList<>(); //non-null reference is required
      in.readTypedList(mObjList, MyClass.CREATOR);
  } 
```

# javascript - Facebook Javascript SDK - 包含未安装我的应用的图片的好友列表

> ID：10071503
> 
> 赞同：1
> 
> 时间：2012-04-09T09:44:47.290
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我被困在一个我正在集成 Facebook javascript SDK 的位置。我想列出没有安装我的应用程序的朋友的姓名和照片。

我将在我可以使用它们通过 FB.ui 对话邀请的地方使用它。

我已经尝试了某些可以获取朋友列表但无法区分他们的方法。

任何人都可以传递相同的知识或代码。

我正在尝试这个，但这并没有给我任何回应。

```
FB.api(
  {
    method: 'fql.query',
    //query: 'SELECT pic_square FROM user WHERE uid='+udid  // get picture in other detail
    query: 'SELECT uid, name, pic_square FROM user WHERE is_app_user AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me())'
  },
  function(response) {
    //alert('Your pic is ' + response[0].pic_square);
    alert(response);
  }
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:31:15.360

`is_app_user`您试图通过以这种方式将字段添加到`WHERE`子句来检索安装了您的应用程序的用户列表。

您需要更改查询以仅过滤未安装您的应用程序的用户：

```
SELECT uid, name, pic_square FROM user WHERE is_app_user = 0 AND uid IN (
  SELECT uid2 FROM friend WHERE uid1 = me()
) 
```

顺便说一句，您使用 Graph API 而不是 REST 运行 FQL 查询：

```
FB.api('/fql', {q: 'FQL_QUERY_HERE'}, function(response){
  console.log(response);
}); 
```

# tomcat - 如何在 Windows 7 上测试 Tomcat 7.0 上的端口 8443 的作用？

> ID：10071504
> 
> 赞同：0
> 
> 时间：2012-04-09T09:44:49.077
> 
> 标签：tomcat, server.xml

我将对 Tomcat 的 7 sever.xml 文件进行更改，特别是端口 8443 到 443，但我

首先不知道如何测试端口 8443，用 8080，我可以用

localhost:8080，但是如何使用 8443 进行测试，我已经尝试使用 localhost:8443，但是

它说“Firefox 无法在 localhost:8443 建立与服务器的连接”。我有

对此进行了一些研究，但似乎每次都有对端口 8443 的引用，

它谈到了安装证书，这很可能是我接下来要做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:54:01.943

你是什​​么意思“测试端口8443”？Tomcat 中的此端口默认用于 SSL 连接。

更好地查看 SSL 的 tomcat 文档：http: [//tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:44:43.293

由于 8443 是 ssl，因此您需要使用 https 连接到该站点。尝试[https://localhost:8443](https://localhost:8443)。如果您没有正确设置证书，您可能会收到一些与 ssl 相关的错误。问这个问题有什么原因吗？

# php - 保存需要唯一的关联模型数据

> ID：10071506
> 
> 赞同：0
> 
> 时间：2012-04-09T09:45:06.267
> 
> 标签：php, cakephp

我已经构建了一个 CakePHP 应用程序，它允许用户创建帖子并向它们添加标签（主题）。可以在这里看到数据库和关联的结构：[在 CakePHP 中为连接表设置包含](https://stackoverflow.com/questions/10066171/setting-up-contains-for-a-join-table-in-cakephp)

我已经成功地通过连接表使用 Contain 提取数据。但是现在我正在尝试构建用户输入主题的部分，然后将其同时保存在主题表和 Topic_post 表中。

我有以下代码添加新的发布方法：

```
if ($this->request->is('post'))
        {
            //$this->Post->create();

            if ($this->Post->save($this->request->data))
            {
                // Save extra data
                $this->Post->saveField('user_id', $this->Auth->user('id'));
                $this->Post->saveField('datetime', date('Y-m-d H:i:s'));
                $this->Post->saveField('modified', date('Y-m-d H:i:s'));
                $this->Post->saveField('status', 1);

                // Build slug
                $post_title = Sanitize::html($this->request->data['Post']['title'], array('remove'=>true, 'quotes' => ENT_NOQUOTES));
                $post_title = String::truncate($post_title, 50, array('exact'=>false,'html'=>false,'ending'=>''));
                $this->Post->saveField('slug', Inflector::slug($post_title));

                // Redirect the user to the newly created post (pass the slug for performance)
                $this->redirect(array('controller'=>'posts','action'=>'view','id'=>Tiny::toTiny($this->Post->id),'slug'=>$this->Post->slug));
            }
            else
            {
                $this->Session->setFlash('Server broke!');
            }
        } 
```

所以我现在需要做的是保存在视图中输入的相关主题数据：

```
<?php echo $this->Form->create(); ?>

<?php echo $this->Form->input('Post.title'); ?>

<?php echo $this->Form->input('Post.content', array('type'=>'textarea','label'=>false)); ?>

<?php echo $this->Form->input('Topic.title', array('type'=>'textarea','label'=>'Topics')); ?>

<button type="submit" class="orangeButton small">Create</button>

<?php echo $this->Form->end(); ?> 
```

我查看了 CakePHP 文档，似乎我需要 saveAll 之类的东西？但是我很困惑，因为我不是 100% 确定如何使用它，重要的是要注意用户可以将多个主题保存到数据库中，并且主题本身都是唯一的，因此例如你不能创建一个已经存在的主题将改为仅使用链接器的现有 ID。

任何人都可以帮忙吗？因为我觉得这相当复杂......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:56:17.190

您可以执行以下操作：

```
 $this->Post->saveAll($this->data, array('validate'=>'first')); 
```

array('validate'=>'first'); 的使用 确保我们的两个模型在保存之前都经过验证。你是不是有这样的意思。

希望能帮助到你

# jquery - 使用 Javascript MVC 构建一个 webapp，没有服务器端技术。用什么？

> ID：10071508
> 
> 赞同：2
> 
> 时间：2012-04-09T09:45:18.733
> 
> 标签：jquery, model-view-controller, air, adobe, local-storage

着眼于使用 Javascript MVC 框架构建 Web 应用程序（不使用任何服务器端技术），然后我最终可以将其移植到 iOS/Android 或 Adob​​e Air for Desktop 机器。

什么是最好的框架？在这里找到了一些[链接，](http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/)其中详细介绍了一些很好的示例，但没有说明我应该如何存储数据（使用 JSON 平面文件、数据库文件等）

谁能让我知道这些框架中的哪些允许这样做以及我应该阅读的任何相关教程/链接。

最后看看为其他 D&D 玩家创建一个 Air 应用程序，用于他们的角色表（仅适用于我的 D&D 玩家组），显然将数据持久存储在他们的机器上。

谢谢

担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T01:21:33.113

Ember.js 看起来是 MVC 框架的最佳选择。

在数据存储方面，您有几个内置选项：[http](http://www.html5rocks.com/en/features/storage) ://www.html5rocks.com/en/features/storage 。这些都有自己的优点/缺点，并且支持有限。

我不知道有任何框架可以处理这个问题，但可以在你的模型中抽象这个：

```
var pf = new PlayerFactory;
pf.getById('player-id'); 
```

然后

```
function PlayerFactory()
{
  this.getById = function(playerId)
  {
    var key = 'player-'+playerId;
    if (localStorage.get(key) {
      var p = new Player();
      p.setAttributes(localStorage.get(key);
      return p;
    }
    return false;
  } 

  return this;
} 
```

# c++ - 这个单例对象创建代码中的错误是什么

> ID：10071509
> 
> 赞同：0
> 
> 时间：2012-04-09T09:45:24.763
> 
> 标签：c++, class, singleton

在此，我试图将单例对象复制到另一个对象。虽然我已经覆盖了 = 运算符，但它给了我一些问题。请帮忙。

```
 class singleTon
        {
        public:
            static singleTon*  InitInstance()
            {
                if(singleTonObjPtr== NULL)
                {
                singleTonObjPtr = new singleTon;
                }
                return singleTonObjPtr;
            }

            singleTon* getObject()
            {
                return singleTonObjPtr;
            }

            singleTon(const singleTon& singletonObj)
            {

            }

            void operator =(const singleTon& singletonObj)
            {
                  return;
            }

        private:
            singleTon()
            {
                i = 50;
                singleTonObjPtr = NULL;
            }

            ~singleTon()
            {
            }

            int i;
            static singleTon* singleTonObjPtr;

        };

        singleTon* singleTon::singleTonObjPtr = NULL;

        int _tmain(int argc, _TCHAR* argv[])
        {
          singleTon *singleTOnPtr =NULL;
          singleTOnPtr = singleTon::InitInstance();
          singleTon *singleTOnPtr2 = singleTOnPtr->getObject();

          singleTon obj3 = *singleTon::InitInstance();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:53:39.553

首先， operator= 是赋值运算符，所以你是在赋值，而不是在复制。您的赋值运算符返回`void`，但它应该返回一个`singleTon&`. 但是你真的要问分配给单例是什么意思。例如：

```
singleTon a = singleTon::InitInstance(); // single instance
singleTon b = singleTon::InitInstance(); // same instance
a = b; // assignment, but a and b really are the same instance, so what's the point? 
```

而且，对于单例，不应该有默认构造：

```
singleTon b; // this should not be allowed
b = a; // so this makes no sense 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:55:56.493

如果您阅读（并发布）编译器错误，它可能会有所帮助。我得到：

```
test.cpp:37: error: ‘singleTon::~singleTon()’ is private
test.cpp:55: error: within this context 
```

其中第 37 行是私有析构函数的声明，第 55 行是`_tmain`代码尝试创建和销毁对象的点，需要一个公共析构函数。

如果您希望能够创建和销毁命名混乱的单例事物的多个副本，那么您需要公开析构函数。对于这个简单的示例，您可以通过完全删除析构函数来做到这一点；隐式构造函数将是公共的，并且没有需要非平凡破坏的成员。

# php - 使用 php 和 sql 使用数据库中的值填充下拉框

> ID：10071511
> 
> 赞同：1
> 
> 时间：2012-04-09T09:45:34.463
> 
> 标签：php, sql, drop-down-menu

我想要一个包含不同大小项目列表的下拉框。我的数据库中有一个名为 items 的表，其中有一个名为 sizes 的属性。这映射到一个名为 size 的表，其中列出了具有不同价格等的不同尺寸。

我只是想在项目网页中创建一个下拉框，其中列出了与该项目相关的尺寸。如何使用 php 获取尺寸并将它们显示在下拉框中？

我有 items 表，它的复合键为`item_id`，并且`size_id`映射到 size 表，主键为`size_id`.

我试图从网上查找信息，但无济于事。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T09:49:04.357

您可以使用 HTML`SELECT`及其类似的`OPTION`东西：

```
<select name="mySelect"> 
    <?php $result= mysql_query('SELECT * FROM items'); ?> 
    <?php while($row= mysql_fetch_assoc($result)) { ?> 
        <option value="<?php echo htmlspecialchars($row['your_column_name']);?>"> 
            <?php echo htmlspecialchars($row['your_column_name']); ?> 
        </option> 
    <?php } ?> 
</select> 
```

当然，你可以在`ORDER BY ...`上面的 sql 查询中添加一个进行排序。然后根据您的表单方法，您可以使用`$_POST["mySelect"]`或访问它`$_GET["mySelect"]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:05:10.900

您可以编写两个查询，也可以使用 join 一次从两个表中获取值。但为此，我想知道您在 items 表和 sizes 表之间使用什么类型的映射。

# zend-framework - 从 Zend Request 对象获取查询

> ID：10071517
> 
> 赞同：1
> 
> 时间：2012-04-09T09:46:02.850
> 
> 标签：zend-framework

谁能告诉我为什么会这样

```
$month = $this->getRequest()->getQuery('month'); 
```

是一个空字符串

调用是从我的扩展 Zend_Controller_Action 的 blogcontroller 类发出的

网址：htp://www.domain.nl/blogmanager/?month=2005-01

它可能是我的 htaccess 吗？

```
Options +FollowSymlinks
RewriteEngine On
Options All -Indexes
IndexIgnore *
DirectoryIndex index.php 
RewriteCond %{SCRIPT_FILENAME} !-d 
RewriteCond %{SCRIPT_FILENAME} !-f 
RewriteRule ^(.*)$ index.php?/$1 
```

**编辑：**解决了，我不得不从重写器中删除问号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:08:27.573

我认为这应该是

```
RewriteRule ^(.*)$ index.php/$1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:58:30.670

尝试：

```
 $params = $this->getRequest()->getParams(); 
```

或者

```
 $month = $this->getRequest()->getParam('month'); 
```

# wordpress - Wordpress 帖子编辑器省略换行符？

> ID：10071520
> 
> 赞同：1
> 
> 时间：2012-04-09T09:46:23.873
> 
> 标签：wordpress, wordpress-theming

在编写 WordPress 帖子时，在可视模式下，文本编辑器中会显示换行符，但在 HTML 模式下，只有   而不是 BR 标签。

默认情况下，如何在每个换行符处添加 BR 标签而不是  ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T04:36:59.070

您可以使用 php 的 nl2br() 函数。例如：

```
nl2br(get_the_content()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T09:49:27.810

如果您想在 Wordpress 内容屏幕中添加换行符，您可以通过为`<br />`标签分配一个类来实现，即；

```
<br class="break" /> 
```

并且 Wordpress 不会删除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:38:37.613

您可以在您的functions.php中使用这些代码来删除删除线刹车的过滤器

```
remove_filter( 'the_content', 'wpautop' );
remove_filter( 'the_excerpt', 'wpautop' );

function my_tinymce_config( $init ) {
    $init['remove_linebreaks'] = false; 
    $init['convert_newlines_to_brs'] = true; 
    $init['remove_redundant_brs'] = false; 
    return $init;
}
add_filter('tiny_mce_before_init', 'my_tinymce_config'); 
```

# android - 为什么 CAT 命令在 android 设备中不起作用？

> ID：10071522
> 
> 赞同：2
> 
> 时间：2012-04-09T09:46:31.217
> 
> 标签：android, command, cat

我在安卓应用程序中工作。我想将数据从 1 个文件复制到其他文件。我已经为它执行了以下命令，但无法从文件 1-> 文件 2 复制数据。

```
 // Executes the command.
        String CAT_COMMAND = "cat /sdcard/file1 > /sdcard/file2";
        Process process = Runtime.getRuntime().exec(CAT_COMMAND); 
```

我在 DOS 使用了 ADB SHELL 命令，执行了 CAT 命令，效果很好。但是代码执行不适用于真实设备。

请帮我看看为什么它没有从file1->file2复制数据。？？

为使用 CAT 命令写入/复制数据提供解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:04:18.080

您可以尝试使用完整路径 /mnt/sdcard 吗？（或）尝试通过以下方式获得正确的路径`Environment.getExternalStorageDirectory()`

# c++ - 将char转换为int？

> ID：10071524
> 
> 赞同：0
> 
> 时间：2012-04-09T09:46:45.447
> 
> 标签：c++

我正在制作战舰游戏，因此当我将诸如“A10”之类的内容传递给坐标函数时，它需要将列变为字母并将行变为数字。

```
Coordinate(std::string coord = "A10")
    {
        char c = coord[0];
        col = c - 16;

        int r = atoi((coord.substr(1,2)).c_str());
        row = r-1;
    }; 
```

所以在这个例子中，通过 A10 应该使 col = 0 (A=0,B=1,C=2) 和 row = 9。

等于 9 的行似乎有效，但 col 同样 0 没有。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T09:49:58.227

应该是`col = c - 'A'`获取 的整数`A`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:51:56.177

您是否尝试将“A”的值映射为零？请记住，字符是单字节整数，

```
char c = std::toupper( coord[0] );
if( c >= 'A' && c <= 'Z' )
{
    col = c - 'A';
}
else
{
    // TODO: Invalid/error?
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T09:52:33.023

你所说的字符'A'只是数字65（它的ASCII值）的一个有趣的名字。根据[这个 ASCII 表](http://www.asciitable.com/)，'B' = 66，'C' = 67 等等。所以你应该做的是计算`int column = static_cast<int>(coord[0] - 'A')`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T09:52:46.377

的十进制值为，`A (0x41)`因此`65`您当前的数学运算将得到 49。`col = c - 65`应该给你想要的行为。

# python - 在python中拆分文本？

> ID：10071525
> 
> 赞同：-4
> 
> 时间：2012-04-09T09:46:53.710
> 
> 标签：python

基本上我需要编写与伪密码学相关的代码，其中给我一条消息/文本，我需要对其进行加密。该过程包括：

1.  用“X”替换单词之间的空格。
2.  反转文本。
3.  用 X 填充文本的开头和结尾，使总字符数是四的倍数
4.  将文本分成四个字符的块。

我已经能够成功编写工作代码来完成前 3 个步骤。（见问题的底部）但我**不能**，并且在最后一步中遇到了可怕的帮助。例如，如果我给出这个文本：'heyhowareyou'，我需要最后一步返回：'heyh owar eyou'。所以它需要被拆分在同一个字符串中。任何人都可以**帮**我解决这个问题吗？非常感谢你！！

**到目前为止编写的代码，用于评估前 3 个步骤：**

```
# Defining function to encrypt the message.
def encrypt(string, block_size):

    # Padding the begining and end of the text with 'X'.
    string_list = list(string)
    string_list.insert(0, 'X')
    string_list.append('X')
    string_list = ''.join(string_list)

    # Reversing the string.
    string_reversed = string_list[::-1]

    # Replacing any spaces with 'X'.
    string_reversed = string_reversed.replace(' ', 'X') 
```

**尝试为第四步编写代码：**

```
 for index in range(len(string)):
        string_list_1 = list(string_reversed)
        string_list_1.insert(4, ' ')
        string_list_1 = ''.join(string_list_1)

    return string_list_ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T09:53:06.187

```
return [ string_reversed[i:i+4] for i in range(0, len(string_reversed), 4) ] 
```

# android - 如何在表面视图中清除画布？

> ID：10071526
> 
> 赞同：1
> 
> 时间：2012-04-09T09:46:58.133
> 
> 标签：android

我正在开发一个 Android 数字签名应用程序，用户可以在其中签名，我必须将此文件保存为图像。我正在使用 SurfaceView 进行绘图。DigitalSignatureActivity 有两个按钮保存，清除。1.Save 按钮将文件保存为图像 2.Clear 按钮清除表面。但我无法清除表面。我尝试了 drawingSurface.setBackgroundColor(Color.BLACK); 仍然保留以前的标志和 canvas.drawColor(Color.BLACK); 没有效果，我可以保存文件，但它不能完美地存储签名（一些内容丢失）请帮忙。我的代码是：DigitalSignatureActivity.java

```
package com.pop.digitalsign;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.os.Bundle;
import android.os.Environment;
import android.view.MotionEvent;
import android.view.View;
import android.widget.Toast;

public class DigitalSignatureActivity extends Activity implements
        View.OnTouchListener {

    private DrawingSurface drawingSurface;
    private DrawingPath currentDrawingPath;
    private Paint currentPaint;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        setCurrentPaint();
        drawingSurface = (DrawingSurface) findViewById(R.id.drawingSurface);
        drawingSurface.setOnTouchListener(this);

    }

    private void setCurrentPaint() {
        currentPaint = new Paint();
        currentPaint.setDither(true);
        currentPaint.setColor(Color.WHITE);
        currentPaint.setStyle(Paint.Style.STROKE);
        currentPaint.setStrokeJoin(Paint.Join.ROUND);
        currentPaint.setStrokeCap(Paint.Cap.ROUND);
        currentPaint.setStrokeWidth(2);

    }

    public boolean onTouch(View view, MotionEvent motionEvent) {
        if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {

            drawingSurface.setBackgroundColor(0);
            currentDrawingPath = new DrawingPath();
            currentDrawingPath.paint = currentPaint;
            currentDrawingPath.path = new Path();
            currentDrawingPath.path.moveTo(motionEvent.getX(),
                    motionEvent.getY());
            currentDrawingPath.path.lineTo(motionEvent.getX(),
                    motionEvent.getY());

        } else if (motionEvent.getAction() == MotionEvent.ACTION_MOVE) {
            currentDrawingPath.path.lineTo(motionEvent.getX(),motionEvent.getY());
            drawingSurface.addDrawingPath(currentDrawingPath);

        } else if (motionEvent.getAction() == MotionEvent.ACTION_UP) {
            currentDrawingPath.path.lineTo(motionEvent.getX(),motionEvent.getY());
        }

        return true;
    }
    //To save file as  Image
    public void saveDrawing(View v) throws IOException {

        File mediaStorageDir = new File(
                Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
                "MySignatures");

        Bitmap nBitmap = drawingSurface.getBitmap();
        try {
            if (!mediaStorageDir.exists()) {
                mediaStorageDir.mkdirs();
            }
            String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss")
                    .format(new Date());
            File mediaFile = new File(mediaStorageDir.getPath()
                    + File.separator + "SIGN_" + timeStamp + ".png");
            FileOutputStream out = new FileOutputStream(mediaFile);

            nBitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
            out.flush();
            out.close();
            Toast.makeText(this, "Signature saved  to " + mediaFile,
                    Toast.LENGTH_LONG).show();
        } catch (Exception e) {
            e.printStackTrace();
            Toast.makeText(getApplicationContext(), "Not saved",
                    Toast.LENGTH_SHORT).show();
        }

    }

    //To clear Surface
    public void clearScreen(View v) {
        //drawingSurface.setBackgroundColor(Color.BLACK);
        drawingSurface.clear();
    }
} 
```

绘图表面.java

```
package com.pop.digitalsign;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.PorterDuff;
import android.util.AttributeSet;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class DrawingSurface extends SurfaceView implements SurfaceHolder.Callback {
    private Boolean _run;
    protected DrawThread thread;
    private Bitmap mBitmap;
    Canvas canvas;

    private CommandManager commandManager;

    public DrawingSurface(Context context, AttributeSet attrs) {
        super(context, attrs);

        getHolder().addCallback(this);
        commandManager = new CommandManager();
        thread = new DrawThread(getHolder());
    }

    class DrawThread extends  Thread{

         public SurfaceHolder mSurfaceHolder;

        public DrawThread(SurfaceHolder surfaceHolder){
            mSurfaceHolder = surfaceHolder;

        }
        public DrawThread() {
            // TODO Auto-generated constructor stub
        }

        public void setRunning(boolean run) {
            _run = run;
        }

        @Override
        public void run() {
            canvas = null;
            while (_run){
                try{
                    canvas = mSurfaceHolder.lockCanvas(null);
                    //canvas.drawColor(Color.WHITE);
                    if(mBitmap == null){
                        mBitmap =  Bitmap.createBitmap (1, 1, Bitmap.Config.ARGB_8888);;
                    }
                    final Canvas c = new Canvas (mBitmap);
                    c.drawColor(0, PorterDuff.Mode.CLEAR);
                    commandManager.executeAll(c);
                    canvas.drawBitmap (mBitmap, 0,  0,null);
                } finally {
                    if(canvas!=null){
                        mSurfaceHolder.unlockCanvasAndPost(canvas);
                    }
                }
            }
        }
    }

    public void addDrawingPath (DrawingPath drawingPath){
        commandManager.addCommand(drawingPath);
    }

    public void clear(){
        //Here i want to clear surface
         canvas.drawColor(Color.BLACK);//it has no effect
    }

    public boolean hasMoreUndo(){
        return commandManager.hasMoreUndo();
    }

    public Bitmap getBitmap(){
        return mBitmap;
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,  int height) {
        mBitmap =  Bitmap.createBitmap (width, height, Bitmap.Config.ARGB_8888);;
    }

    public void surfaceCreated(SurfaceHolder holder) {
        thread.setRunning(true);
        thread.start();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        boolean retry = true;
        thread.setRunning(false);
        while (retry) {
            try {
                thread.join();
                retry = false;
            } catch (InterruptedException e) {
            }
        }
    }

} 
```

命令管理器.java

```
package com.pop.digitalsign;

import android.graphics.Canvas;

import java.util.Iterator;
import java.util.List;
import java.util.Collections;
import java.util.ArrayList;

public class CommandManager {
    private List<DrawingPath> currentStack;

    public  CommandManager(){
        currentStack = Collections.synchronizedList(new ArrayList<DrawingPath>());
    }

    public void addCommand(DrawingPath command){
        currentStack.add(command);
    }

    public void undo (){
        final int length = currentStackLength();
        if ( length > 0) {
            final DrawingPath undoCommand = currentStack.get(  length - 1  );
            currentStack.remove( length - 1 );
            undoCommand.undo();
        }
    }

    public int currentStackLength(){
        final int length = currentStack.toArray().length;
        return length;
    }

    public void executeAll( Canvas canvas){
        if( currentStack != null ){
            synchronized( currentStack ) {
                final Iterator<?> i = currentStack.iterator();
                while ( i.hasNext() ){
                    final DrawingPath drawingPath = (DrawingPath) i.next();
                    drawingPath.draw( canvas );
                }
            }
        }
    }

    public boolean hasMoreUndo(){
        return  currentStack.toArray().length > 0;
    }
} 
```

绘图路径.java

```
package com.pop.digitalsign;

import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Path;

public class DrawingPath {
    public Path path;
    public Paint paint;

    public void draw(Canvas canvas) {
        canvas.drawPath( path, paint );
    }

    public void undo() {
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@android:color/white" >

     <com.pop.digitalsign.DrawingSurface
        android:id="@+id/drawingSurface"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        />

      <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center" >

      <Button
            android:id="@+id/saveBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="saveDrawing"
            android:text="@string/save" />
       <Button
            android:id="@+id/clearBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="clearScreen"
            android:text="@string/clear" />
       </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:52:14.463

我最好的建议是使用这个

```
if (surfaceHolder.getSurface().isValid()) {
                    Canvas c = surfaceHolder.lockCanvas();
                    if (first >= 0) {
                        c.drawARGB(255, 255, 255, 255);
                        first--;
                    } 
```

first 的值是 2 你可以使用你想要的每个名字。原因是画布是双缓冲的，因此您需要通过将其涂成白色来清除两个屏幕。这停止了​​闪烁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-10T15:27:27.960

```
canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-09T10:49:01.140

在`DrawingSurface`添加此方法

```
public void resetCanvas(){ commandManager.clearAllPath(); } 
```

并调用此方法，当您需要采取行动清除..

```
objectNameofDrawingSurefaceClass.resetCanvas(); 
```

将代码添加到`CommandManager`

```
public void clearAllPath(){currentStack.clear();  } 
```

好的..

# iphone - 调用 ABAddressBookGetPersonWithRecordID 的问题

> ID：10071530
> 
> 赞同：2
> 
> 时间：2012-04-09T09:47:08.120
> 
> 标签：iphone, objective-c, ios, abaddressbook

有没有人对这个代码有问题...

```
ABRecordRef person = ABAddressBookGetPersonWithRecordID (addressBook,recordID); 
```

到目前为止，我在这方面遇到了重大问题。我以前发布过这个问题[间歇性错误访问核心数据模型/联系人数据库](https://stackoverflow.com/questions/9923882/intermittent-error-accessing-core-data-model-contacts-database)

但是，尽管存在合法的 addressBook 和 recordID 值，但我现在已经将其追踪到返回 NULL 值的方法。

知道为什么会发生这种情况吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:19:30.000

发布答案以防它帮助其他人......

事实证明，这个问题与内存有关。我创建了一个地址簿：ABAddressBookCreate()。这是在循环中发生的，因此被一遍又一遍地创建。解决方案是将创建移出循环并使用 CFRelease(addressBook); 命令。

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:52:51.543

我已经成功地完成了一个地址簿，从联系人列表中添加、编辑和删除记录。没有出现这种类型的错误。把它放在.h文件中......

```
ABRecordID 
recordID; 
```

将以下代码放入

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person
{
 recordID = ABRecordGetRecordID(person);
 NSLog(@"Record id is %d",recordID);
} 
```

如果您在其中获得 reoord id，那么我认为不会出现此类问题。咱们试试吧 ...

# php - 使用生成的图像作为在论坛中使用的链接？

> ID：10071532
> 
> 赞同：0
> 
> 时间：2012-04-09T09:47:19.580
> 
> 标签：php

我遇到了 php 图像函数，并且在生成如何让用户使用生成的图像作为其签名或 w/e 的链接之后，我现在成功地使用 php 创建了签名？

```
 <?php
    $dest = imagecreatefromjpeg('test.jpg');
    $src = imagecreatefrompng('blade_02.png');

    imagealphablending($dest, false);
    imagesavealpha($dest, true);
    $black = imagecolorallocate($src, 0, 0, 0); 
    imagecolortransparent($src, $black);
    imagecopymerge($dest, $src, 17, 13, 0, 0, 60, 0, 0);
    imagecopymerge($dest, $src, 168, 70, 0, 0, 60, 100, 100);
    $font_black = imagecolorallocate($dest, 2, 1, 8);
    imagestring($dest, 3,357,19, "118" , $font_black);

    header('Content-Type: image/png');
    imagepng($dest);

    imagedestroy($dest);
    imagedestroy($src);

    ?> 
```

html

```
<IMG STYLE="position:absolute; TOP:150px; LEFT:500px;" SRC="style/inventoryclean.png">
<!--Weapon begin-->
<IMG STYLE="position:absolute; TOP:163px; LEFT:512px;" SRC="<?php  echo $wep_icon; ?>" onmouseover="TagToTip('Span2')">
<span id="Span2"><?php echo $seal_type[0]; ?><br><br> <?php echo $seal_wep; ?><br><br><?php echo $Degree_wep; ?> <br></span> 
<!--Wepaon end--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:49:25.770

如果您要将图像保存到文件中，只需向他们提供该文件的链接即可。

如果您将用于在数据库中生成图像的数据保存在数据库中，请给他们一个指向将构建图像的文件的链接，并在您用于将数据从数据库中拉出的末尾附加查询字符串。

**编辑**

从您提供的代码中，您似乎创建了图像，然后销毁了文件。尝试这个：

```
imagepng($dest, 'the_new_file.png'); 
```

这会将文件保存到文件系统，而不是仅将其显示到屏幕上您可以在此处查看有关 imagepng 及其选项的更多信息：http: [//php.net/manual/en/function.imagepng.php](http://php.net/manual/en/function.imagepng.php)

# memory-leaks - 主/详细演示应用程序中的 Titanium 内存泄漏

> ID：10071535
> 
> 赞同：0
> 
> 时间：2012-04-09T09:48:30.203
> 
> 标签：memory-leaks, titanium, master-detail

我对钛几乎没有经验。[基本上我需要与git](https://github.com/appcelerator-developer-relations/Template.MasterDetail)或示例 Titanstudio 中可用的演示版本相同的主/详细应用程序

这是我认为有泄漏的部分

```
masterView.addEventListener('itemSelected', function(e) {
    //create detail view container
    var detailView = new DetailView();
    var detailContainerWindow = Ti.UI.createWindow({
    title:'Product Details',
    navBarHidden:false,
    backgroundColor:'#ffffff'
    });
    detailContainerWindow.add(detailView);
    detailView.fireEvent('itemSelected',e);
    detailContainerWindow.open();
}); 
```

逻辑上每次点击表格行时，都应该创建一个详细视图，并在按下后退按钮时销毁。但正如在 android 设备上测试的那样。每次点击这个应用程序所占用的 tableview 内存都会增加。我认为钛每次都会采用新的细节视图，但不会破坏在后端继续运行的旧视图。请告诉我这是一个错误还是我弄错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:04:33.873

我已经找到了解决我所有内存问题的方法：

```
var memPool = Ti.UI.createWindow();
memPool.open();
memPool.hide();
memPool.add(yourTrashView);    
memPool.close(); 
```

在这里解释：

[http://developer.appcelerator.com/question/116867/this-is-a-solution-to-your-memory-woes](http://developer.appcelerator.com/question/116867/this-is-a-solution-to-your-memory-woes)

# c# - WP7 数据库和转换错误

> ID：10071536
> 
> 赞同：0
> 
> 时间：2012-04-09T09:48:40.853
> 
> 标签：c#, windows-phone-7

我是 C# 开发的新手我正在研究这个例子 [http://msdn.microsoft.com/en-us/library/hh286405%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/hh286405%28v=vs.92%29.aspx) 在这个链接中你可以看到我的代码在哪里我想我有问题： http: [//pastebin.com/LYqzuqYb](http://pastebin.com/LYqzuqYb) 当我运行应用程序并单击 button1 我有一个无效的投射错误，我只使用投射

```
 Category = (DB.Elements)listPicker.SelectedItem 
```

但我不明白问题出在哪里最好看安东尼奥

**更多信息** 我用这个在 listPicker 中插入元素

```
 public Inserimento()
    {
        InitializeComponent();
        List<Elenco> source = new List<Elenco>();
        source.Add(new Elenco() { Elemento = "Value1"});
        source.Add(new Elenco() { Elemento = "Value2" });
        source.Add(new Elenco() { Elemento = "Value3" });
        source.Add(new Elenco() { Elemento = "Value4" });
        this.listPicker.ItemsSource = source;
    } 
```

Elemento 是这个类，我使用这个类在 listPicker 中插入和存储元素

```
namespace Example.ViewModel{
public class Elenco
{  public string Elemento
    {
        get;
        set;
    }

}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:19:05.590

执行该`Inserimento`方法时，您`listPicker`包含一个`Elenco`对象列表。从该 listPicker 检索项目将检索**一个** `Elenco`对象。所以这：

> `Category = (DB.Elements)listPicker.SelectedItem`

其实应该是这样的：

> `Category = (Elenco)listPicker.SelectedItem`

# javascript - jQuery 中的基本 XML 解析

> ID：10071541
> 
> 赞同：-1
> 
> 时间：2012-04-09T09:49:39.437
> 
> 标签：javascript, jquery, xml

> **可能重复：**
> [使用 jQuery 解析 XML](https://stackoverflow.com/questions/2987908/xml-parsing-using-jquery)

假设 XML 文件是这样的：

```
<blah>
 <test>This is a test</test>
</blah> 
```

假设我有以下 HTML：

```
<div id="example"></div> 
```

如何从 XML 文件中提取内容并使用 jQuery`test`使其成为 HTML 代码中的内容？`#example`

此外，假设 XML 文件托管在与 HTML 代码不同的域上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:12:12.487

您可以执行以下操作：

```
$.ajax({
  dataType: "jsonp xml",
  url: "http://mydomain.com/xmlfile.xml",
}).done(function(data) { 
  $('#example').append($(data).find('test').text());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:19:21.613

如果您可以选择，我的建议是使用 JSON 和 jQuery 的 $.post（或 $.ajax）而不是 XML。IMO，它将为您省去一些麻烦。请注意，这是一个有争议的问题 - 关于选择的一些基本讨论可在[此处](http://www.jquery4u.com/json/json-vs-xml/)找到。

我使用的基本形式如下：

```
var namevariable="Suzie", agevariable=43;
var dS=JSON.stringify({"name":namevariable,"age":agevariable});
$.post('destination.php',{data:dS},function (res){
  var o=JSON.parse(res);
  // Return JSON format:  {"unit":"13","subject":"English"}  
  $("#example").html(o.subject);
},"text");  // closing argument of $.post 
```

这会将姓名和年龄字段发送到destination.php。然后它期望destination.php 返回一个单元和主题变量。然后将主题变量放入您的`<div id='example'></div>`.

如果您选择使用此方法，此站点和网络上有大量帮助。

例如，您可以使用[JSONLint](http://jsonlint.com/)检查 JSON 数据的格式。

# ajax - 通过 Ajax 提交表单

> ID：10071544
> 
> 赞同：-2
> 
> 时间：2012-04-09T09:50:18.467
> 
> 标签：ajax, asp.net-mvc

我的代码中有这个：

```
 document.imgUploadForm.submit(); 
```

或者

```
$.ajax({ url: "Controler/MyMethod",
            type: "POST",
            enctype: 'multipart/form-data',
            data: { data: $('#imgUploadForm').serialize() },
            success: function (data) {
                location.reload();
            }
       }) 
```

但在我的操作方法中，表单中的值没有提交。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:53:33.917

使用ajax请求应该是这样的

```
$.ajax({ url: "MyController/MyMethod",
        type: "POST",
        enctype: 'multipart/form-data',
        data:$('#imgUploadForm').serialize(),
        success: function (data) {
            location.reload();
        }
   }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:53:17.033

改变这个：

```
data: { data: $('#imgUploadForm').serialize() }, 
```

对此：

```
data: $('#imgUploadForm').serialize(), 
```

完整代码：

```
$.ajax({ 
        url: '@Url.Action("ActionName", "controllerName")',
        type: "POST",
        data: $('#imgUploadForm').serialize(),
        success: function (data) {
            location.reload();
        }
   }); 
```

# jquery - jQuery远程验证不适用于按键，仅适用于焦点更改

> ID：10071547
> 
> 赞同：0
> 
> 时间：2012-04-09T09:50:37.533
> 
> 标签：jquery, asp.net-mvc, jquery-validate, remote-validation

我有一个视图模型

```
public class UserRegister
    {
        [Remote("CheckUserEmail")]
        public string Email { get; set; }
    } 
```

有一个使用 UserRegister 模型强类型化的 Register 视图。

```
@Html.EditorFor(model => model.Email) 
```

在用户控制器中我有动作注册

```
 public ActionResult Register()
        {
            UserRegister userRegister = new UserRegister();
            //// remote validation does not work on key press when the email field is not empty, 
            //// if i comment the below line or set the email as empty then remote validation works on keypress
            userRegister.Email = "abc@abc.com";
            return View(userRegister);
        } 
```

远程验证适用于未预先填充电子邮件的表单中的按键事件，但是当预先填充电子邮件字段时（代码上方），远程验证（按键事件）不起作用。这仅在焦点改变时有效。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:26:29.700

我不知道这个问题，但你可以使用 jquery 来验证 from 做`"$("FormSelector").valid()`

所以你可以做

```
$("input[type='text'"]).keypress(function() {
  $(this).valid()
    //Or if you want to validate the whole form
  $(this).closest('form').valid()
}); 
```

# php - 如何在不同的网址上投放广告？

> ID：10071549
> 
> 赞同：0
> 
> 时间：2012-04-09T09:50:51.060
> 
> 标签：php, javascript, jquery, ajax, ads

我想通过我的服务器在其他网站上展示广告。我将提供广告代码，然后从我的服务器控制应在其他页面上显示的广告类型和大小。其他页面将在其他域和服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:52:10.057

有很多软件包可以做到这一点，例如 openx：[http ://www.openx.com/publisher/open-source-ad-server](http://www.openx.com/publisher/open-source-ad-server)

自己创建这个 - 你的问题可能是这个网站的广泛问题。

# c# - c#中是否有比较运算符，如SQL的IN语句

> ID：10071551
> 
> 赞同：2
> 
> 时间：2012-04-09T09:51:20.590
> 
> 标签：c#, asp.net, .net, sql

这不是一个具体的问题，而是一个笼统的问题，这是我长期以来一直在想的问题

我必须检查一个变量是否包含字符串列表中的值

例如

```
status == "Open" || status =="Active" || status =="Reopen" || status = "InActive" etc.. 
```

在 SQL 中，编写这种语句非常容易，例如

select * from ticket where status in ("Open","Active","Reopen","InActive)

我想知道我们在 C# 中没有这么简单的语句吗？

有谁知道像 SQL 这样的简单方法来编写这种语句而不使用 if else 、foreach 循环或 LINQ 等通用类型。

我知道 LINQ 在那里，但它仍然不像 sql 的 IN 那样简单

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T09:54:52.023

```
tickets.Where(t => new[] {"Open",
                          "Active",
                          "Reopen",
                          "InActive"}.Any(x => x == t.status)) 
```

您也可以使用 Contain 方法而不是 Any 方法，但如果要实现任何比较逻辑，请使用 Any 方法，而不是默认的相等比较器。

或者

实现扩展以支持 IN 方法：

```
public static class Extensions
{
    public static bool In<TItem>(this TItem source, Func<TItem, TItem, bool> comparer, IEnumerable<TItem> items)
    {
        return items.Any(item => comparer(source, item));
    }

    public static bool In<TItem, T>(this TItem source, Func<TItem, T> selector, IEnumerable<TItem> items)
    {
        return items.Select(selector).Contains(selector(source));
    }

    public static bool In<T>(this T source, IEnumerable<T> items)
    {
        return items.Contains(source);
    }

    public static bool In<TItem>(this TItem source, Func<TItem, TItem, bool> comparer, params TItem[] items)
    {
        return source.In(comparer, (IEnumerable<TItem>)items);
    }

    public static bool In<TItem, T>(this TItem source, Func<TItem, T> selector, params TItem[] items)
    {
        return source.In(selector, (IEnumerable<TItem>)items);
    }

    public static bool In<T>(this T source, params T[] items)
    {
        return source.In((IEnumerable<T>)items);
    }
} 
```

并像这样使用：

```
bool b;

b = 7.In(3, 5, 6, 7, 8); // true
b = "hi".In("", "10", "hi", "Hello"); // true
b = "hi".In("", "10", "Hi", "Hello"); // false
b = "hi".In((s1, s2) => string.Equals(s1, s2, StringComparison.OrdinalIgnoreCase), "", "10", "Hi"); // true

var tuples = new List<Tuple<int, string>>();

for (var i = 0; i < 10; i++)
{
    tuples.Add(Tuple.Create(i, ""));
}

var tuple = Tuple.Create(3, "");

b = tuple.In(tup => tup.Item1, tuples); // true 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-09T09:56:14.290

```
(new [] { "Open", "Active", "Reopen", "InActive" }).Contains(status) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T10:42:20.950

这对我有用。

```
(new List<string>{ "Open", "Active", "Reopen", "InActive" }).Contains("status"); 
```

我也喜欢为 String 类创建扩展的 c# 3.0 功能

```
public static class StringExtensions
{
    public static bool In(this string @this, params string[] strings)
    {
        return strings.Contains(@this); 
    }
} 
```

稍后我们可以以最简单的方式使用它

```
status.Contains("Open", "Active", "Reopen", "InActive"); 
```

如果您必须编写许多这样的语句，这很好，如果我在 2 个或更多文件中为至少 5-10 个语句语句编写旧样式，我更喜欢编写此扩展名。

# haskell - 纯函数超时

> ID：10071560
> 
> 赞同：21
> 
> 时间：2012-04-09T09:52:10.397
> 
> 标签：haskell, timeout, purely-functional

我怎样才能“杀死”一个耗时太长的纯计算？我试过

```
import System.Timeout

fact 0 = 1
fact n = n * (fact $ n - 1)

main = do maybeNum <- timeout (10 ^ 7) $ (return . fact) 99999999
          print maybeNum 
```

但是，这不起作用。`(return . fact) 99999999`用“真正的” IO 函数替换它`getLine`，这可以按预期工作。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-09T10:08:13.460

重点是

```
return (fact 999999999) 
```

立即返回并且不会触发超时。它返回一个稍后将被评估的 thunk。

如果您强制评估返回值，

```
main = do maybeNum <- timeout (10 ^ 7) $ return $! fact 99999999
          print maybeNum 
```

它应该触发超时（如果您提供的堆栈足够大，以便在堆栈溢出之前发生超时）。

# php - 如何获得日期差异超过 7 的总项目

> ID：10071561
> 
> 赞同：-1
> 
> 时间：2012-04-09T09:52:23.370
> 
> 标签：php, mysql

我必须做一个 mysql 语句来获取与今天的日期差异超过 7 的总项目（意味着今天 - 7）

这是我目前的声明：

```
SELECT 
    COUNT(*)
FROM 
    complaints 
WHERE 
    complaint_status = 'OPEN' AND 
    complaint_regdate <= curdate()
    complaint_regdate >= DATE_SUB(curdate(),INTERVAL 7 day) 
```

我收到此错误：

`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'complaint_regdate >= DATE_SUB(curdate(),INTERVAL 7 day)' at line 1`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T09:56:41.920

您的 sql 中缺少 AND 运算符。

```
SELECT COUNT(*) FROM complaints WHERE complaint_status = 'OPEN' AND complaint_regdate <= curdate() AND complaint_regdate >= DATE_SUB(curdate(),INTERVAL 7 day) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T10:01:42.827

您可以为此使用 BETWEEN 运算符

```
SELECT COUNT(*) 
FROM complaints 
WHERE complaint_status = 'OPEN' 
  AND complaint_regdate < (CURDATE() - INTERVAL 7 day) 
```

请注意，您不需要 DATE_SUB 函数，只需使用普通减法即可。此外，这些仅在您`complaint_regdate`是 DATE 列时才有效。如果它是 DATETIME 列，您将需要使用 NOW() 而不是 CURDATE() 或仅提取字段值的日期 pat。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T09:56:50.893

听起来您要求查询以查找日期超过过去 7 天的计数。上面列出的当前查询显示了过去 7 天内所有内容的计数。因此，这是过去 7 天以上的查询：

```
SELECT COUNT(*) FROM complaints WHERE complaint_status = 'OPEN' AND complaint_regdate < DATE_SUB(curdate(),INTERVAL 7 day) 
```

# git - 从 EC2 ubuntu 推送到 github

> ID：10071566
> 
> 赞同：1
> 
> 时间：2012-04-09T09:52:50.363
> 
> 标签：git, ubuntu, github, amazon-ec2

当我运行以下它似乎成功：

```
$ sudo ssh -T git@github.com
Hi x! You've successfully authenticated, but GitHub does not provide shell access. 
```

但是，当我`sudo git push`从我的回购中做一个时，它不起作用我得到

```
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

有人可以在这里帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:42:49.197

您在 EC2 上运行它的事实根本不重要。您在这里面临 ssh 密钥设置不正确和/或最初使用错误用户克隆 repo 的问题。

无论你做什么，绝对不需要使用 sudo。您应该能够使用普通用户克隆 repo。如果这不起作用，请确保为该用户生成一个新的 ssh 密钥并将其添加到 repo。如果

```
ssh -T git@github.com 
```

再次为该用户工作，请尝试再次克隆 repo。如果可行，请检查您是否可以推送它。

如果您仍然遇到问题，请确保您遵循了[GitHub 提供的 Linux 安装指南](http://help.github.com/linux-set-up-git/)。那里编写的所有内容也适用于没有图形前端的 Ubuntu 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-25T01:03:29.460

我在我的 AWS EC2 Ubuntu 实例上遇到了同样的问题，我最终通过这篇[博](http://www.anujgakhar.com/2010/12/28/permission-denied-publickey-with-git-on-ubuntu/)文的正确方向推动解决了这个问题。

对我来说发生的事情是可以`root`访问我试图克隆到的文件夹。

`drwxr-xr-x 2 root root 4096 Apr 25 00:51 sites`

因此，我必须执行一个`sudo git clone ...`命令，因为我没有作为默认用户对该文件夹的写入权限。

我需要做的就是让自己拥有对 /sites 文件夹的写入权限

`sudo chown -R ubuntu /sites`

这使我可以省略命令中的 sudo `git clone...`，它以用户身份运行 git 命令`ubuntu`。

这为我修复了它，我认为这是因为我`~/.ssh`文件夹中的文件归 拥有`ubuntu`，并且必须是运行该命令的用户。

# java - 使用 javassist 用字节码中的方法替换 java 运算符

> ID：10071573
> 
> 赞同：6
> 
> 时间：2012-04-09T09:53:29.123
> 
> 标签：java, bytecode, javassist, java-bytecode-asm, bytecode-manipulation

## 我的目标

为了能够在运行时检测何时进行比较（或任何其他操作，如 *、-、/、>、<、...

这应该通过使用 Javassist 或 ow2 ASM 编辑类的字节码来实现

## 必须达到什么

这段代码

```
public class Test{

    public void m(){

        if(a>2){
        //blablabla         
        }

    }  

} 
```

必须成为

```
public class Test{

    public void m(){

        if(someExternalClass.greaterThan(a,2)){
            //blalbla           
    }

    }

} 
```

GreaterThan 将返回与 '>' 完全相同的结果，但也将用于保存比较的数量 然后每次进行比较时都会通知外部类

## 额外说明

它必须在有手术的地方进行。所以不仅在 if 语句中。

这表示

```
int a = c+d; 
```

也必须成为

```
int a = someExternalClass.add(c,d); 
```

您对我如何使用 Javassist 或其他库实现这一点有任何建议吗？

我想这与 IFLT、IFGT 等操作码有关

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:18:34.923

这个聪明的黑客：[http](http://www.jroller.com/eu/entry/operation_overloading_in_java) ://www.jroller.com/eu/entry/operation_overloading_in_java可以给你一个提示。最初的想法是给Java一些运算符重载支持。你没有做完全相同的事情，但它有点相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T15:01:28.670

使用源代码或在编译时使用注释处理器可能更容易做到这一点。对于注释处理器方法，您可以使用[Juast](https://bitbucket.org/amelentev/juast/wiki/Home)或[Lombok](http://projectlombok.org/)。

[OperatorOverload](https://bitbucket.org/amelentev/juast/src/d4d681035da6/processors/src/main/java/juast/processors/OperatorOverload.java)似乎几乎可以满足您的需求，它用方法调用替换了二进制表达式。

# oracle - Oracle SYSDATE 输入数据类型

> ID：10071577
> 
> 赞同：0
> 
> 时间：2012-04-09T09:53:43.247
> 
> 标签：oracle, plsql

形成客户端，我需要将 SYSDATE 参数传递给 PL/SQL。在服务器中，它需要转换为日期，为此我使用 TO_DATE(in_timestamp, 'DD-MON-YYYY HH24:MI:SS'); in_timestamp 的数据类型应该是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T10:09:37.187

`SYSDATE`本身是 a `date`，并且目标字段似乎也是 a `date`（因为您使用了`TO_DATE()`）。因此，您实际上不需要在这里进行转换。

`SYSDATE`只需在您的 PL/SQL 块中传递并使用它，这意味着`in_timestamp`应该是一个日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:03:00.577

就 TO_DATE 而言，您可以使用 CHAR、VARCHAR 或 VARCHAR2（推荐），基本上它应该是**String**类型，如以下示例所示：-

```
to_date('2003/07/09', 'yyyy/mm/dd') would return a date value of July 9, 2003.
to_date('070903', 'MMDDYY') would return a date value of July 9, 2003.
to_date('20020315', 'yyyymmdd') would return a date value of Mar 15, 2002. 
```

[您可以在此链接](http://www.techonthenet.com/oracle/functions/to_date.php)中找到与 TO_DATE 相关的更多信息，

**编辑**

*“但是，如果您传递 sysdate，则不需要再次使用 TO_DATE，因为它已经是 Date 值......”*正如@Gaurav 所述，因此 in_timestamp 的**dataType**应该是 DATE ..

# symfony1 - 自定义所有错误 symfony 1.4

> ID：10071580
> 
> 赞同：2
> 
> 时间：2012-04-09T09:53:50.110
> 
> 标签：symfony1, custom-errors

对不起我的英语和通过翻译写作。

我是新来的，我对我想要的东西有点迷茫，如果他们愿意，也许你可以帮助我，如下所述：

我想自定义可能产生的所有错误（任何错误的状态代码。404、500、204、301 ....等）并且还显示基于“模块”和/或“操作”的建议从哪里发生错误。

我也希望我可以通过文件重定向“setting.yml”应用程序来判断，如下所示：

```
error_404_module: common
error_404_action: errors
error_500_module: common
error_500_action: errors
error_204_module: common
error_204_action: errors
error_301_module: common
error_301_action: errors
........ 
```

在“action.class.php”中的“app/frontend/modules/common”中定义“executeErrors”，在其中我收到已发生的状态代码和发生错误的模块，或者除了好，得到部分显示“ app/frontend/modules/common/templates/_errorXXXSuccess.php”以及我寻求并提取发生错误的模块“referer”的部分建议。

嗯，这就是想法，不同情况下不同类型错误的动态内容，并且与类型代码 404 完美配合，但与其他错误不配合......

我读到可以通过创建文件“config/error.html.php”和“config/exception.html.php”将我置于事件的中间。事实上，如果我产生这样的 500 错误并手动执行这些文件。问题是我无法从 symfony 访问变量。因为如果是这样，我可以调用“常见/错误”并将错误发送作为参数发送错误状态代码和发生错误的模块，但事实并非如此。从那里我所能做的就是使用 $ _SERVER 和 routing.yml 但无法获得好的结果，因为环境与开发生产 (/frontend_dev.php) 混合在一起，我也想避免这种情况。

也就是说，我想在“setting.yml”中得到“error_404_module”和“error_404_action”，但错误代码不同。因此，允许我根据“错误或异常”和/或“模块或操作”在生产中显示我的自定义页面，其中错误已从生产中释放，并且在处于开发模式的情况下（/frontend_dev.php/.. ..)，显示 symfony Dispatch。

当然，生活是复杂的，并且有一种更简单的方法来做我想做的事，但是经过数千种组合后却没有得到正确的结果。即使 symfony 可能不允许从“setting.yml”重定向其他类型的错误，也是因为它们是为他或其他东西保留的。我不明白。

请帮助我，因为这里没有文件可以找到和保护，至少我们为其他想要做某事的人公开。

非常感谢和问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:08:49.487

首先——你不能让 symfony 拦截所有的错误。一些错误可能是服务器错误，请求甚至不会到达您的应用程序。你可以在 symfony 中重现其中一些显式设置响应，但我可能没有必要处理所有这些。

至于确切的响应：您应该使用侦听器将您的错误挂钩到根据您的需要处理它们的类。有关实施细节，请参阅：[https ://stackoverflow.com/a/7077818/580167。](https://stackoverflow.com/a/7077818/580167)

# mel - MEL：遍历层次结构

> ID：10071584
> 
> 赞同：3
> 
> 时间：2012-04-09T09:54:10.033
> 
> 标签：mel

我正在编写一个 MEL 脚本，它将关节层次结构中的所有关节重命名为已知格式。这个想法是您将选择髋关节，脚本将重命名髋关节，并遍历所有其他关节并根据其在层次结构中的位置对其进行重命名。

您如何遍历 MEL 中的联合层次结构？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T16:39:05.077

如果您`$stat_element`在层次结构中指定顶部关节的名称并运行以下代码，它将`"myPrefix_"`为该关节的所有子元素添加前缀。

```
string $stat_element = "joint1";
select -r $stat_element;
string $nodes[] = `ls -sl -dag`;
for($node in $nodes){
    rename -ignoreShape $node ("myPrefix_" + $node);
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T09:46:39.910

如果您需要在进行过程中做出详细的决定，而不是批量重命名，遍历层次结构非常简单。命令是'listRelatives'；使用 'c' 标志它返回节点的子节点，使用 'p' 标志它返回父节点。（注意 -p 返回单个对象，-c 返回一个数组）

```
Joint1
    Joint2
        Joint3
        Joint4

listRelatives -p Joint2
// Result: Joint1 //
listRelatives -c Joint2
// Result: Joint3, Joint4 
```

棘手的一点是重命名，因为 Maya 并不总是给您期望的名称（它不允许在同一层次结构级别上出现重复的名称）。您需要跟踪重命名的对象，否则在重命名后您将无法找到它们，以防新名称与您的期望不符。

如果需要跟踪它们，可以在重命名之前使用 set 命令创建一个集合；无论名称如何，所有对象仍将在集合中。或者，您可以通过选择对象并重命名当前选择来遍历层次结构——这不会记录更改，但是您不会遇到对象在操作过程中更改名称和弄乱命令的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T00:21:07.020

如果您有非唯一名称，则在 MEL 中执行此操作可能会很麻烦，因为您拥有的对象句柄就是名称本身。使用非唯一名称重命名节点的父节点后，子节点的名称就会不同。如果在开始重命名之前存储了所有名称的列表，则会出现错误，因为 rename 命令将尝试重命名不存在的节点。我知道有两种使用 MEL 的解决方案。但首先，这里是更简单的 pyMel 解决方案，我建议您使用它。

**PyMel 解决方案：**

```
import pymel.core as pm
objects = pm.ls(selection=True, dag=True, type="joint")
pfx = 'my_prefix_'
for o in objects:
    o.rename(pfx + o.name().split('|')[-1]) 
```

作为`pm.ls`返回真实对象的列表，而不仅仅是名称，您可以安全地重命名父节点，并且仍然拥有其子节点的有效句柄。

如果您真的想在 MEL 中执行此操作，则需要从下往上重命名，或者递归，以便在与父母打交道之前不询问孩子的姓名。

第一个 MEL 解决方案是获取一个长对象名称列表，并根据它们的深度对它们进行排序，最深的优先。通过这种方式，您可以保证永远不会在子级之前重命名父级。排序位太复杂了，无法在这里打扰，无论如何递归解决方案更好。

**递归 MEL 解决方案：**

```
global proc renameHi(string $o, string $prefix) {

    string $children[] = `listRelatives -f -c -type "joint $o`;
    for ($c in $children) {
        renameHi( $c ,$prefix ) ;
    }

    string $buff[];
    int $numToks = tokenize($o, "|", $buff);
    string $newName = $buff[( $numToks - 1)];

    $newName = ($prefix + $newName);
    rename($o,$newName);
}

string $prefix = "my_prefix_";
string $sel[] = `ls -sl -type "joint"`;
for ($o in $sel) {
    renameHi($o, $prefix);
} 
```

这个递归解决方案深入到叶节点并在重命名它们的父节点之前重命名它们。

# jsf - 将 requestscoped 更改为 sessionscoped 会出错

> ID：10071585
> 
> 赞同：1
> 
> 时间：2012-04-09T09:54:13.510
> 
> 标签：jsf, scope

当我将 managedbean 从 requestscoped 更改为 sessionscoped 时，在部署应用程序时会出现此错误。谁能解释发生了什么？

ejb 注入是否在 postconstruct 中失败？此外，将其更改回 requestscoped 时，我也会遇到相同的错误。重新启动 NetBeans 时，requestscoped 工作。

```
SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: javax.servlet.ServletException: com.sun.enterprise.container.common.spi.util.InjectionException: Error creating managed object for class: class org.glassfish.webservices.WSServletContextListener
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5332)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.IllegalArgumentException: javax.servlet.ServletException: com.sun.enterprise.container.common.spi.util.InjectionException: Error creating managed object for class: class org.glassfish.webservices.WSServletContextListener
    at org.apache.catalina.core.StandardContext.addListener(StandardContext.java:2743)
    at org.apache.catalina.core.StandardContext.addApplicationListener(StandardContext.java:1966)
    at com.sun.enterprise.web.TomcatDeploymentConfig.configureApplicationListener(TomcatDeploymentConfig.java:235)
    at com.sun.enterprise.web.TomcatDeploymentConfig.configureWebModule(TomcatDeploymentConfig.java:94)
    at com.sun.enterprise.web.WebModuleContextConfig.start(WebModuleContextConfig.java:274)
    at com.sun.enterprise.web.WebModuleContextConfig.lifecycleEvent(WebModuleContextConfig.java:172)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:149)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5329)
    ... 39 more
Caused by: javax.servlet.ServletException: com.sun.enterprise.container.common.spi.util.InjectionException: Error creating managed object for class: class org.glassfish.webservices.WSServletContextListener
    at org.apache.catalina.core.StandardContext.createListener(StandardContext.java:2853)
    at org.apache.catalina.core.StandardContext.loadListener(StandardContext.java:4806)
    at com.sun.enterprise.web.WebModule.loadListener(WebModule.java:1599)
    at org.apache.catalina.core.StandardContext.addListener(StandardContext.java:2740)
    ... 46 more
Caused by: com.sun.enterprise.container.common.spi.util.InjectionException: Error creating managed object for class: class org.glassfish.webservices.WSServletContextListener
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl.createManagedObject(InjectionManagerImpl.java:315)
    at com.sun.enterprise.web.WebContainer.createListenerInstance(WebContainer.java:761)
    at com.sun.enterprise.web.WebModule.createListenerInstance(WebModule.java:1987)
    at org.apache.catalina.core.StandardContext.createListener(StandardContext.java:2851)
    ... 49 more
Caused by: java.lang.NullPointerException
    at com.sun.enterprise.container.common.impl.managedbean.ManagedBeanManagerImpl.createManagedBean(ManagedBeanManagerImpl.java:477)
    at com.sun.enterprise.container.common.impl.managedbean.ManagedBeanManagerImpl.createManagedBean(ManagedBeanManagerImpl.java:420)
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl.createManagedObject(InjectionManagerImpl.java:299)
    ... 52 more

WARNING: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: javax.servlet.ServletException: com.sun.enterprise.container.common.spi.util.InjectionException: Error creating managed object for class: class org.glassfish.webservices.WSServletContextListener
java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: javax.servlet.ServletException: com.sun.enterprise.container.common.spi.util.InjectionException: Error creating managed object for class: class org.glassfish.webservices.WSServletContextListener
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:921)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:680)

SEVERE: Exception while invoking class com.sun.enterprise.web.WebApplication start method
java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: javax.servlet.ServletException: com.sun.enterprise.container.common.spi.util.InjectionException: Error creating managed object for class: class org.glassfish.webservices.WSServletContextListener
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:138)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:680) 
```

豆子：

```
package Controllers;

import Domain.Device;
import Domain.Employee;
import Domain.Tags;
import Service.CompanyFacade;
import Service.DeviceFacade;
import Service.EmployeeFacade;
import java.util.*;
import javax.annotation.PostConstruct;
import javax.inject.Named;
import javax.enterprise.context.RequestScoped;
import javax.faces.application.FacesMessage;
import javax.faces.context.FacesContext;
import javax.faces.event.ValueChangeEvent;
import javax.inject.Inject;

@Named(value = "employeeController")
@RequestScoped
public class EmployeeController {
    @Inject
    private EmployeeFacade employeeFacade;
    @Inject
    private CompanyFacade companyFacade;
    @Inject
    private DeviceFacade deviceFacade;

    private Employee selectedEmployee;

    private String emptyMessage;

    private Long    employeeID;
    private String  firstNameOld;
    private String  firstNameNew;
    private String  insertionOld;
    private String  insertionNew;
    private String  lastNameOld;
    private String  lastNameNew;
    private String  functionNameNew;
    private String  functionNameOld;
    private String  emailNew;
    private String  emailOld;

    private List<Employee> employees;

    /**
     * Creates a new instance of EmployeeController
     */
    public EmployeeController() {
        this.emptyMessage = "Er zijn geen werknemers gevonden.";        
    }

    @PostConstruct
    public void init(){
        String user = FacesContext.getCurrentInstance()
                .getExternalContext()
                .getRemoteUser();
        Long companyID = null;
        System.out.println("user: " + user);
        try{
            companyID = this.companyFacade.getCompanyIDByUser(user);
        }
        catch(NullPointerException ex){
            FacesContext.getCurrentInstance().addMessage(null, 
                    new FacesMessage(FacesMessage.SEVERITY_ERROR, 
                    "Kan geen werknemers vinden.", ""));
        }
        System.out.println(companyID);
        if (companyID == null) {
            this.employees = new ArrayList<Employee>();
        }else{
            this.employees = (List<Employee>) this.employeeFacade.getAllByCompany(companyID);
        }
    }

    public Collection<Employee> getEmployees(){
        return this.employees;
    }

    public Collection<Tags> getTags(){
       return this.employeeFacade.getTags(1L, 1L);
    }

    public Collection<Device> getDevices(){
        return new ArrayList<Device>();
    }

    public String getEmptyMessage() {
        return emptyMessage;
    }

    public void firstNameChanged(ValueChangeEvent event) {
        System.out.println("firstNameChanged called.");
        this.firstNameOld = event.getOldValue().toString();
        this.firstNameNew = event.getNewValue().toString();
        //FacesContext context = FacesContext.getCurrentInstance();
        //Employee emp = context.getApplication().evaluateExpressionGet(context, "#{emp}", Employee.class);
        this.employeeID = this.selectedEmployee.getId();
    }

    public void insertionChanged(ValueChangeEvent event){
        this.insertionOld = event.getOldValue().toString();
        this.insertionNew = event.getNewValue().toString();
      //  FacesContext context = FacesContext.getCurrentInstance();
     //   Employee emp = context.getApplication().evaluateExpressionGet(context, "#{emp}", Employee.class);
        this.employeeID = this.selectedEmployee.getId();
    }

    public void lastNameChanged(ValueChangeEvent event){
        this.lastNameOld = event.getOldValue().toString();
        this.lastNameNew = event.getNewValue().toString();
      //  FacesContext context = FacesContext.getCurrentInstance();
      //  Employee emp = context.getApplication().evaluateExpressionGet(context, "#{emp}", Employee.class);
        this.employeeID = this.selectedEmployee.getId();
    }

    public void emailChanged(ValueChangeEvent event){
        this.emailOld = event.getOldValue().toString();
        this.emailNew = event.getNewValue().toString();
     //   FacesContext context = FacesContext.getCurrentInstance();
       // Employee emp = context.getApplication().evaluateExpressionGet(context, "#{emp}", Employee.class);
        this.employeeID = this.selectedEmployee.getId();
    }

    public void functionNameChanged(ValueChangeEvent event){
        this.functionNameOld = event.getOldValue().toString();
        this.functionNameNew = event.getNewValue().toString();
  //      FacesContext context = FacesContext.getCurrentInstance();
    //    Employee emp = context.getApplication().evaluateExpressionGet(context, "#{emp}", Employee.class);
        this.employeeID = this.selectedEmployee.getId();
    }

    public void saveName(){
        System.out.println("saveName called.");
        if(this.firstNameNew == null || this.firstNameOld == null){

        }
        else if(!this.firstNameNew.equals(this.firstNameOld)){
            if (this.employeeID != null) {
                Employee emp = this.employeeFacade.getByID(this.employeeID);
                emp.setFirstName(this.firstNameNew);
                this.employeeFacade.edit(emp);
                this.employeeID = null;
                this.firstNameNew = null;
                this.firstNameOld = null;
            }
        }
    }

    public void saveInsertion(){
        if(this.insertionNew == null || this.insertionOld == null){

        }
        else if(!this.insertionNew.equals(this.insertionOld)){
            if (this.employeeID != null) {
                Employee emp = this.employeeFacade.getByID(this.employeeID);
                emp.setInsertion(this.insertionNew);

                this.employeeFacade.edit(emp);
                this.employeeID = null;
                this.insertionNew = null;
                this.insertionOld = null;
            }
        }
    }

    public void saveLastName(){
        if(this.lastNameNew == null || this.lastNameOld == null){

        }
        else if(!this.lastNameNew.equals(this.lastNameOld)){
            if (this.employeeID != null) {
                Employee emp = this.employeeFacade.getByID(this.employeeID);
                emp.setLastName(this.lastNameNew);
                this.employeeFacade.edit(emp);
                this.employeeID = null;
                this.lastNameNew = null;
                this.lastNameOld = null;
            }
        }
    }

    public void saveFunctionName(){
        if(this.functionNameNew == null || this.functionNameOld == null){

        }
        else if(!this.functionNameNew.equals(this.functionNameOld)){
            if (this.employeeID != null) {
                Employee emp = this.employeeFacade.getByID(this.employeeID);
                emp.setFunctionName(this.functionNameNew);
                this.employeeFacade.edit(emp);
                this.employeeID = null;
                this.functionNameNew = null;
                this.functionNameOld = null;
            }
        }
    }

    public void saveEmail(){
        if(this.emailNew == null || this.emailOld == null){

        }
        else if(!this.emailNew.equals(this.emailOld)){
            if (this.employeeID != null) {
                Employee emp = this.employeeFacade.getByID(this.employeeID);
                emp.setEmail(this.emailNew);
                this.employeeFacade.edit(emp);
                this.employeeID = null;
                this.emailNew = null;
                this.emailOld = null;
            }
        }
    }

    public void cancel(){
        this.employeeID = null;
    }

    public Employee getSelectedEmployee() {
        return selectedEmployee;
    }

    public void setSelectedEmployee(Employee selectedEmployee) {
        System.out.println("setEmp: " + selectedEmployee.toString());
        this.selectedEmployee = selectedEmployee;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:14:56.547

It always depends on the scope of the objects you inject into your bean. If one the following objects you inject: EmployeeFacade, CompanyFacade or DeviceFacade has a smaller scope, it will fail. In other words, you can only inject a bean with the same or a higher scope. I never tried this: [request scoped property in session scoped JSF bean](https://stackoverflow.com/questions/6136507/request-scoped-property-in-session-scoped-jsf-bean) but it may help you out if you want to inject a smaller scoped object.

# c++ - 在 C++ 中删除二维数组

> ID：10071586
> 
> 赞同：2
> 
> 时间：2012-04-09T09:54:17.987
> 
> 标签：c++, multidimensional-array, delete-operator

有人可以告诉我 for 循环中有什么问题吗？当我运行它时，它会中断。我试图调试看看出了什么问题，我注意到在 for 循环中它只是停止了：

```
#define MAX_POPULATION 64
float **tr_pop;//Tournament candidates
float **matingPool;//Mating pool
tr_pop=new float *[m];
matingPool=new float *[m];
for(l=0;l<m+1;l++)//allocating
{
    tr_pop[l]=new float[MAX_POPULATION];
    matingPool[l]=new float[MAX_POPULATION];
}
for ( int r = 0; r < row; ++r )//deleting
{
 delete [] matingPool[r];//Stops here (not ending program just frozen)
 delete [] tr_pop[r];
}
delete [] tr_pop;
delete [] matingPool; 
```

=======好的。问题解决=======

原因如下：

我只是将其更改`MAX_POPULATION`为，`MAX_POPULATION+1`并且它起作用了。

```
for(l=0;l<m+1;l++)
    {
    tr_pop[l]=new float[MAX_POPULATION+1];
    matingPool[l]=new float[MAX_POPULATION+1];
    } 
```

因为在另一个函数中，我认为我违反了：

```
void crossover()
{
int p1,p2,i,j;float tempBit;
p1=m/3;
p2=(2*m)/3;
for(j=0;j<MAX_POPULATION;j++)
{
    for(i=p1;i<p2;i++)
    {
    tempBit=matingPool[i][j];
    matingPool[i][j]=matingPool[i][j+1];//THE VIOLATION POINT (I THINK)
    matingPool[i][j+1]=tempBit;
    }
    j++;
} 
```

如您所见，`j = MAX_POPULATION`在循环结束时，我试图到达`MAX_POPULATION + 1`. 所以我改变了列的分配，问题解决了:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:02:10.390

您遇到了未定义的行为：

```
for(l=0;l<m+1;l++)//allocating
{
    tr_pop[l]=new float[MAX_POPULATION];
} 
```

应该

```
for(l=0;l<m;l++)//allocating
{
    tr_pop[l]=new float[MAX_POPULATION];
} 
```

您正在`m`为每个数组分配元素并尝试访问`m+1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:02:30.437

您正在分配`m` `float*`，但在`for`循环中，您`0..m`在分配内存时迭代，它应该从`0..m-1`. 为此，您需要将`for`循环更改为 : `for(l=0;l<m;l++)`。

# php - 使用表单发布 XML 值

> ID：10071588
> 
> 赞同：1
> 
> 时间：2012-04-09T09:54:35.610
> 
> 标签：php, xml, forms, xpath

我已将 XPath 搜索集成到我的站点中，当用户搜索时，他们会看到结果以及每个结果的复选框，如下所示。

```
<form action="saveProcess.php" method="POST">
            <?php
            foreach ($holidays as $holiday) 
            {
                $resultTable .=  "<p><a href=\"{$holiday->link}\">{$holiday->title}</a>" . "<br/>" . 
                "{$holiday->pubDate}" . "<br>" . 
                "{$holiday->description}" . 
                "<input type='checkbox' name='chk[]' value='{$holiday->title}' />" . "<br /></p>";              
            }
            ?>
            <input type="submit"  name="btnOutput" value="submit"/>
        </form> 
```

当单击复选框并单击提交按钮时，我希望将值`{$holiday->title}`发布到`saveProcess.php`并回显。目前我遇到了错误`Notice: Undefined index: chk in saveProcess.php`

```
<?php
    $title = $_POST['chk']
    echo $title;
?> 
```

这是什么原因？可能是 XML 文件没有在 saveProcess.php 文件中实例化，还是我没有看到语法错误？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:42:17.773

你似乎没有在*回响*任何东西。你需要使用：

```
<?php
   $resultTable = '';
   foreach ($holidays as $holiday) 
   {
      $resultTable .=  "<p><a href=\"{$holiday->link}\">{$holiday->title}</a>" . "<br/>" . "{$holiday->pubDate}" . "<br>" . "{$holiday->description}" . "<input type='checkbox' name='chk[]' value='{$holiday->title}' />" . "<br /></p>";              
   }
   echo $resultTable;
?> 
```

因为您的元素`[]`在其名称的末尾有，它表明您希望将其 $_POST 值作为数组的一部分。在 PHP 中它看起来像这样：

```
array(0 => 'First value', 1 => 'Second value', 2 => 'Third value) 
```

如果您需要单独处理每个值，则可以循环遍历它：

```
foreach($_POST['chk'] as $check_value)
{
   // process $check_value
} 
```

# php - 如何在php文件中停止使用（cmd curl）攻击网站

> ID：10071595
> 
> 赞同：0
> 
> 时间：2012-04-09T09:55:40.407
> 
> 标签：php, curl, cmd

为我糟糕的英语而迷惑我。问题如下：

有人使用 cmd:curl ******使用代理 IP 地址攻击我的网站。这样我就无法判断是否来自已使用的 ip adderss 的点击操作。所以我想要一些php代码可以判断我的网站或跨领域提交的动作，并且只允许本地动作。

多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:03:38.433

抵御 DDoS 攻击的最简单方法是使您的网络服务更加健壮和高效，您无法仅使用 PHP 使您的系统更具适应性。

您可能会发现这些链接很有帮助：

*   [http://technet.microsoft.com/en-us/library/cc750213.aspx](http://technet.microsoft.com/en-us/library/cc750213.aspx)
*   [http://www.readwriteweb.com/archives/what_can_companies_do_to_stop_a_ddos_attack.php](http://www.readwriteweb.com/archives/what_can_companies_do_to_stop_a_ddos_attack.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:48:46.123

您可以在表单中创建一个隐藏元素，该元素的值可以是时间戳或某种唯一 ID，因此您可以检查请求是否来自您的表单并进行处理。

# xna - Xna 碰撞检测 2d

> ID：10071597
> 
> 赞同：0
> 
> 时间：2012-04-09T09:55:47.417
> 
> 标签：xna, collision-detection

嗨，我正在尝试编写一个简单的游戏，其中有一个玩家和一些简单的世界，如树木或一些建筑物，玩家可以拿着枪走路并射击树木等世界对象并最终摧毁它，游戏是自上而下的，所以我不不需要任何重力。玩家可以打很多子弹，世界上的一些怪物可以射击。所以屏幕上可能会同时出现很多子弹，所以我需要一些好的工具来进行碰撞检测。同样重要的是玩家现在不能在其他物体上行走，就像有一个怪物和玩家一样，它们不能存在于同一个地方（一个人不应该去另一个）。你能给我推荐一些碰撞检测引擎吗，也许我应该使用 Farser 还是更好，我应该自己写？

类似于这个[http://www.youtube.com/watch?v=u8rWomjyTWI](http://www.youtube.com/watch?v=u8rWomjyTWI)

我还有一个问题，几天以来我仍在阅读有关 xna 的信息，我现在知道，如果它涉及到碰撞检测，我们有像素或正方形和圆形，现在：是否有任何收费或引擎可以削减纹理映射它成一个多边形并检查碰撞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T00:19:42.667

Farseer 用于物理学。如果您需要复杂的碰撞**反应**，请使用它。如果您只需要 if colission then kill player，则不需要这样的引擎或库。

您是否阅读了 App Hub 中的碰撞示例？
链接：[http ://create.msdn.com/en-US/education/catalog/tutorial/collision_2d_perpixel_transformed](http://create.msdn.com/en-US/education/catalog/tutorial/collision_2d_perpixel_transformed)

这可能足以满足您的目的。

# java - Java的中间代码生成器

> ID：10071604
> 
> 赞同：0
> 
> 时间：2012-04-09T09:56:26.770
> 
> 标签：java, abstract-syntax-tree, intermediate-code

是否有为 java 文件生成中间代码的工具？或者是否有任何资源可以帮助生成一个？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:07:36.457

Java 源代码通常被编译为称为 Java 字节码的中间表示。如果这就是你想要的，那么你只需要一个 Java 编译器。如果您想要 JVM 汇编程序代码，您可以在 .class 文件上运行反汇编程序 javap。

如果不是其中任何一个，那么您将必须更具体地了解您想要的中间代码。

# actionscript-3 - 在 Adob e Air 中创建 XML 日志时需要一些帮助

> ID：10071606
> 
> 赞同：0
> 
> 时间：2012-04-09T09:56:45.973
> 
> 标签：actionscript-3, apache-flex, xml-serialization, flex4.5

我需要在 Adob​​e Air 中创建 XML 日志文件。我的第一个想法是使用某种自动序列化。我找到了 FlexXB 库。我创建了简单的记录器，并以下列方式用注释标记了类

```
package loggingTools
{

    [XmlClass]
    [ConstructorArg(reference="timeStamp")]
    [ConstructorArg(reference="item")]
    [ConstructorArg(reference="action")]
    [ConstructorArg(reference="arguments")]
    [ConstructorArg(reference="success")]
    [Bindable]
    public class MessageAction
    {
    [XmlAttribute()]
    public var timeStamp:Date;

            [XmlAttribute()]
            public var item:String;

            [XmlAttribute()]
            public var action:String;

            [XmlAttribute()]
            public var arguments:String;

            [XmlAttribute()]
            public var success:Boolean;

            public function MessageAction(timeStamp:Date, item:String, action:String, arguments:String, success:Boolean) {
                    this.timeStamp = timeStamp;
                    this.item = item;
                    this.action = action;
                    this.arguments = arguments;
                    this.success = success;

            }

} 
```

我正在尝试序列化单个对象：

```
public class PlainXMLLogger
{
    //private static var isStarted:Boolean;

    private var logFile:XML;

            [XmlArray(alias = "Log", type="loggingTools.MessageAction")]
            [ArrayElementType("loggingTools.MessageAction")]
    public var messages:Array;

    public function addMessageAction(item:String, action:String, arguments:String, success:Boolean):void {
        var newMessageAction:MessageAction;
        newMessageAction = new MessageAction(new Date(), item, action, arguments, success);
        messages.push(newMessageAction);

    }

public function close():void {

        var logXML:XML = FlexXBEngine.instance.serialize(messages);

        trace(">> XML LOG ");
        trace(logXML.toString() );

    }
} 
```

现在，序列化产生一个错误： **TypeError: Error #1009: Cannot access a property or method of a null object reference。在 com.googlecode.flexxb.core::SerializationCore/serialize()**

当然，我可以一个一个地序列化集合中的所有对象，但我认为这是一个坏主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:36:03.570

这是我的问题的答案，由 FlexXB 工具的创建者提供

[https://groups.google.com/forum/?hl=ru&fromgroups#!topic/flexxb/g912jkxwldE](https://groups.google.com/forum/?hl=ru&fromgroups#!topic/flexxb/g912jkxwldE)

# python - 我们可以使用 plone 4.1 在图像中搜索内容（文本）吗？

> ID：10071609
> 
> 赞同：0
> 
> 时间：2012-04-09T09:57:33.780
> 
> 标签：python, plone

我们如何使用 plone 4.1 在图像中搜索内容（文本）。我在 linux 上工作假设图像说 sample.jpg 包含像“生日快乐”这样的文本，使用搜索“生日”我应该得到内容，即 sample.jpg

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T19:30:49.773

以前有人用 Plone 3 做过这个。我认为同样的方法也适用于 Plone 4.1。

[http://plone.org/documentation/kb/ocr-in-plone-using-tesseract-ocr](http://plone.org/documentation/kb/ocr-in-plone-using-tesseract-ocr)

-马特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T10:31:17.997

最好的方法是使用带有各种选项的collective.DocumentViewer 以供选择

# php - php重命名交换文件名不会重新加载图像

> ID：10071616
> 
> 赞同：0
> 
> 时间：2012-04-09T09:58:28.233
> 
> 标签：php, rename, swap

我正在一个有一组图像的网站上工作，第一张图像就像一个头像..当我想更改头像（第一张图片）时，我所做的是将第一张图像名称与我想要的新图像交换用作头像。我在 ajax 函数上执行此操作，因此在执行此操作后我不需要刷新页面。

```
rename("C:/wamp/www/invest/Coded/oferte/" . $offer_id . "/" . $pic_name, "C:/wamp/www/invest/Coded/oferte/" . $offer_id . "/" . $temp_name);
rename("C:/wamp/www/invest/Coded/oferte/" . $offer_id . "/" . $avafile, "C:/wamp/www/invest/Coded/oferte/" . $offer_id . "/" . $pic_name);
rename("C:/wamp/www/invest/Coded/oferte/" . $offer_id . "/" . $temp_name, "C:/wamp/www/invest/Coded/oferte/" . $offer_id . "/" . $avafile); 
```

我的问题是在我这样做之后，我从 div 中删除了图像并以新的顺序再次添加它们，但我认为浏览器将图像保存在某处并且不重新加载它们并且它们以相同的顺序出现。只有在我刷新页面后，它们才会以正确的顺序出现。有没有办法让浏览器再次上传图片？

提前谢谢你，丹尼尔！

编辑：这是 ajax 函数：

```
function avaPic(offer_id, pic_name, onFinish) {
    var request;
    if(window.XMLHttpRequest)
        request = new XMLHttpRequest();
     else
        request = new ActiveXObject("Microsoft.XMLHTTP");

    request.onreadystatechange = function() {
        if (request.readyState == 4 && request.status == 200) {
            onFinish();
        }
    }

    request.open("GET", "php/script.php?action=avaPic&offer_id=" + offer_id + "&pic_name=" + pic_name, true);
    request.setRequestHeader("If-Modified-Since", "Sat, 1 Jan 2000 00:00:00 GMT");
    request.send();
} 
```

这是php：

```
if($action == "avaPic") {
        $offer_id = $_GET["offer_id"];
        $pic_name = $_GET["pic_name"];
        $filearray = getDirectoryList("C:/wamp/www/invest/Coded/oferte/" . $offer_id . "/");
        $avafile = $filearray[0];
        $temp_name = "temp.jpg";

        rename("C:/wamp/www/invest/Coded/oferte/" . $offer_id . "/" . $pic_name, "C:/wamp/www/invest/Coded/oferte/" . $offer_id . "/" . $temp_name);
        rename("C:/wamp/www/invest/Coded/oferte/" . $offer_id . "/" . $avafile, "C:/wamp/www/invest/Coded/oferte/" . $offer_id . "/" . $pic_name);
        rename("C:/wamp/www/invest/Coded/oferte/" . $offer_id . "/" . $temp_name, "C:/wamp/www/invest/Coded/oferte/" . $offer_id . "/" . $avafile);
    } 
```

在 onFinish 功能上，我用图像刷新 div，希望它们以新的顺序重新排序，但它们看起来和以前一样，直到我刷新页面

我找到了，如何强制浏览器重新加载图像。

```
<div>
       <img src="img1.jpg" />
       <img src="img2.jpg" />
       <img src="img3.jpg" />
</div> 
```

相反，我必须生成一个带有时间参数的 html 代码，以使浏览器重新加载图像。像这样`<img src='"img1.jpg?" + d.getTime()' />`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:16:57.527

检查这是否解决了您的问题，如果您有这样的 HTML，

```
 <div>
           <img src="abc.jpg" />
           <img src="abc.jpg" />
           <img src="abc.jpg" />
        </div> 
```

只需在您的 ajax 调用后运行此 jquery

```
 $('div img').attr("src",$('img').attr("src")+"?+"Math.random()) 
```

# post - Yii::app()->request 没有得到 $_POST 值

> ID：10071627
> 
> 赞同：-2
> 
> 时间：2012-04-09T09:59:50.983
> 
> 标签：post, yii

我是 Yii 框架的新手，无法从表单中检索数据。在我的控制器中，我写道：

```
$request = Yii::app()->request;
$form = $request->getPost('createProjectForm');
var_dump($form); 
```

每当我提交时，表单都是空的。但是，如果我使用 var_dump($_POST)，我仍然会得到这些值。谁能告诉我出了什么问题？非常感谢你，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：-6
> 
> 时间：2012-04-10T06:59:03.077

这是 getPost 函数，它返回 $_POST 数组

```
public function getPost($name,$defaultValue=null)
{
   return isset($_POST[$name]) ? $_POST[$name] : $defaultValue;
} 
```

你能告诉你这个代码在你的行动中的结果是什么吗

```
var_dump(isset($_POST['CreateProjectForm'])); 
```

# xml - 需要使用 xslt 将 xml 文件转换为另一个 xml，其 xsl 文件使用 Properties.xml 文件

> ID：10071629
> 
> 赞同：1
> 
> 时间：2012-04-09T09:59:58.610
> 
> 标签：xml, xslt, properties, mapping

考虑我的输入 xml 文件如下

```
 <?xml version="1.0" encoding="UTF-8"?>
        <com xsi:schemaLocation="http://do.way.com/sales/Amb
           http://do.way.com/temp/sales/ale/ax.xsd" 
           xmlns:w="http://do.way.com/sales/W" 
           xmlns="http://do.way.com/sales/Amb" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns:wire="http://do.way.com/sales/Wire">

    <content>
      <wire:wire>
        <wire:sI>

          <w:aH>
          <text>Ccc  <dynamic name="C_R_N"/>: More</text>
          <w:contact value="false"/>
          </w:aH>

          <w:page>
            <nL>Please call us</nL>
          </w:page>

          <w:body>
            <text> C R N: <strong>
           <dynamic name="C_R_N"/></strong>
            </text>
          </w:body>

          <w:body>
            <text>
              RE: <dynamic name="D_C_P"/> <dynamic name="M_C_O"/>
            </text>
          </w:body>

          <w:body>
            <text>
              In order <strong>
                <dynamic name="M_D_D"/>
              </strong>, we need some information.
            </text>
          </w:body>

          <w:body>
            <text>
              <strong>
                Please call us <dynamic name="C_P_D_N"/>.
              </strong> Our hours <ul class="nested">
                <li>
                   Monday - Friday, 
    <dynamic name="DST_M_F_S_Hour"/> am - 
    <dynamic name="DST_M_F_E_Hour"/> pm; Saturday, 
    <dynamic name="DST_M_F_S_Hour"/> am - 
    <dynamic name="DST_M_F_E_Hour"/> pm.
                </li>
                       </ul>
            </text>
          </w:body>

          <w:body>
            <text>
              Thank you for your  action. .
            </text>
          </w:body>

          <w:body>
            <text>
              <dynamic name="C_D_N"/>
            </text>
          </w:body>

          <w:TextAndImage>
            <text>
             <dynamic name="C_S_N_D"/>            
            </text>
          </w:TextAndImage>

          <w:dynamicNames>
            <w:dynamicName value="LOW"/>
            <w:dynamicName value="Env"/>
          </w:dynamicNames>

          </wire:sI>
        </wire:wire>

          </content>
          </com> 
```

转换上述输入 xml 文件的所需 xsl 文件是指 Properties.xml 文件，该文件具有对应于 Properties.xml 下面给出的输入 xml 标签元素（键）的转换标签（值）

```
 <?xml version="1.0" encoding="utf-8"?>

            <Properties>     
            <Property value="w:aH">aHe</Property>
           <Property value="w:contact">contact1</Property>
           <Property value="w:page">pageH</Property> 
           <Property value="w:body">bodyP</Property>
           <Property value="w:TextAndImage">textAndImage1</Property>
           <Property value="w:dynamicNames">dynamicNames1</Property>
           <Property value="w:dynamicName">dynamicValName</Property>
         </Properties> 
```

我转换后的 xml 看起来像

```
 <Content xsi:schemaLocation="id:d1234 http://abc:10/w/g/B/System/abc.xsd" 
 xmlns="id:d1234" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

     <aHe>
      <text>Ccc  
             <dynamic name="C_R_N" xmlns="http://www.w3.org/1999/xhtml" >
                  C_R_N
            </dynamic>
        : More
    </text>
      <contact1>false</contact1>
      </aHe>

      <pageH>
        <nL>Please call us</nL>
      </pageH>

      <bodyP>
        <text> C R N: <strong>
       <dynamic name="C_R_N" xmlns="http://www.w3.org/1999/xhtml">
      C_R_N
     </dynamic>
      </strong>
        </text>
      </bodyP>

      <bodyP>
        <text>
          RE: <dynamic name="D_C_P" xmlns="http://www.w3.org/1999/xhtml"> 
              D_C_P</dynamic>
             <dynamic name="M_C_O" xmlns="http://www.w3.org/1999/xhtml">M_C_O</dynamic>
        </text>
      </bodyP>

      <bodyP>
        <text>
          In order <strong>
            <dynamic name="M_D_D" xmlns="http://www.w3.org/1999/xhtml"> M_D_D </dynamic>
          </strong>, we need some information.
        </text>
      </bodyP>

      <bodyP>
        <text>  Please call us 
          <strong>
           <dynamic name="C_P_D_N" xmlns="http://www.w3.org/1999/xhtml">C_P_D_N</dynamic>.
          </strong> Our hours <ul class="nested">
            <li>
               Monday - Friday, <dynamic name="DST_M_F_S_Hour" xmlns="http://www.w3.org/1999/xhtml">DST_M_F_S_Hour</dynamic> am - <dynamic name="DST_M_F_E_Hour" xmlns="http://www.w3.org/1999/xhtml">DST_M_F_E_Hour</dynamic> pm; Saturday, <dynamic name="DST_M_F_S_Hour" xmlns="http://www.w3.org/1999/xhtml">DST_M_F_S_Hour</dynamic> am - <dynamic name="DST_M_F_E_Hour" xmlns="http://www.w3.org/1999/xhtml">
              DST_M_F_E_Hour</dynamic>pm.
            </li>
                   </ul>
        </text>
      </bodyP>

      <bodyP>
        <text>
          Thank you for your  action. .
        </text>
      </bodyP>

      <bodyP>
        <text>
          <dynamic name="C_D_N" xmlns="http://www.w3.org/1999/xhtml">
          C_D_N </dynamic>
        </text>
      </bodyP>

      <textAndImage>
        <text>
          <dynamic name="C_S_N_D" xmlns="http://www.w3.org/1999/xhtml">
           C_S_N_D </dynamic>
        </text>
      </textAndImage>

      <dynamicNames1>
        <dynamicValName>LOW</dynamicValName>
        <dynamicValName>Env</dynamicValName>
      </dynamicNames1>

     </Content>

      Can anyone  provide me with the xsl file which meets my requirement. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:58:26.387

看起来您不需要 Properties 文件，因为您只是摆脱了可以更简单地完成的命名空间：

```
<xsl:template match="*">
    <xsl:element name="{local-name()}">
        <xsl:apply-templates select="node() | @*"/>
    </xsl:element>
</xsl:template>
<xsl:template match="@*">
    <xsl:copy/>
</xsl:template> 
```

您想要实现的其余部分可能是普通的 xslt 东西。

**编辑**

更新，包括能让你更接近目标的东西

```
<xsl:template match="/">
    <Content>
        <xsl:apply-templates/>
    </Content>
</xsl:template>

<xsl:template match="@*">
    <xsl:copy/>
</xsl:template>

<xsl:template match="* [local-name() != 'com' and local-name() != 'content' and local-name() != 'wire' and local-name() != 'sI']">
    <xsl:element name="{local-name()}">
        <xsl:apply-templates select="node() | @*"/>
    </xsl:element>
</xsl:template>

<xsl:template match="* [local-name() = 'dynamic']">
    <xsl:element name="{local-name()}">
        <xsl:apply-templates select="node() | @*"/>
        <xsl:value-of select="@name"/>
    </xsl:element>
</xsl:template>

<xsl:template match="* [local-name() = 'contact' or local-name()='dynamicName']">
    <xsl:element name="{local-name()}">
        <xsl:value-of select="@value"/>
    </xsl:element>
</xsl:template> 
```

结果是

```
<?xml version="1.0" encoding="UTF-8"?>
<Content>
    <aH>
        <text>Ccc  <dynamic name="C_R_N">C_R_N</dynamic>: More</text>
        <contact>false</contact>
    </aH>
    <page>
        <nL>Please call us</nL>
    </page>
    <body>
        <text> C R N: <strong>
                <dynamic name="C_R_N">C_R_N</dynamic>
            </strong></text>
    </body>
    <body>
        <text>
              RE: <dynamic name="D_C_P">D_C_P</dynamic><dynamic name="M_C_O">M_C_O</dynamic></text>
    </body>
    <body>
        <text>
              In order <strong>
                <dynamic name="M_D_D">M_D_D</dynamic>
            </strong>, we need some information.
            </text>
    </body>
    <body>
        <text><strong>
                Please call us <dynamic name="C_P_D_N">C_P_D_N</dynamic>.
              </strong> Our hours <ul class="nested">
                <li>
                   Monday - Friday, 
    <dynamic name="DST_M_F_S_Hour">DST_M_F_S_Hour</dynamic> am - 
    <dynamic name="DST_M_F_E_Hour">DST_M_F_E_Hour</dynamic> pm; Saturday, 
    <dynamic name="DST_M_F_S_Hour">DST_M_F_S_Hour</dynamic> am - 
    <dynamic name="DST_M_F_E_Hour">DST_M_F_E_Hour</dynamic> pm.
                </li>
            </ul></text>
    </body>
    <body>
        <text>
              Thank you for your  action. .
            </text>
    </body>
    <body>
        <text>
            <dynamic name="C_D_N">C_D_N</dynamic>
        </text>
    </body>
    <TextAndImage>
        <text>
            <dynamic name="C_S_N_D">C_S_N_D</dynamic>
        </text>
    </TextAndImage>
    <dynamicNames>
        <dynamicName>LOW</dynamicName>
        <dynamicName>Env</dynamicName>
    </dynamicNames>
</Content> 
```

相反，如果您希望将属性 dynamic/@name 和 otherElement/@value 的所有属性值移动到元素主体，那么将执行以下操作：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
        <Content>
            <xsl:apply-templates/>
        </Content>
    </xsl:template>
    <xsl:template match="@*">
        <xsl:copy/>
    </xsl:template>
    <xsl:template match="* [local-name() != 'com' and local-name() != 'content' and local-name() != 'wire' and local-name() != 'sI']">
        <xsl:element name="{local-name()}">
            <xsl:apply-templates select="node() | @*"/>
        </xsl:element>
    </xsl:template>
    <xsl:template match="* [local-name() = 'dynamic']">
        <xsl:element name="{local-name()}">
            <xsl:apply-templates select="node() | @*[local-name !='name']"/>
            <xsl:value-of select="@name"/>
        </xsl:element>
    </xsl:template>
    <xsl:template match="* [local-name() != 'dynamic' and @value]">
        <xsl:element name="{local-name()}">
            <xsl:apply-templates select="node() | @*[local-name !='value']"/>
            <xsl:value-of select="@value"/>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

结果

```
<?xml version="1.0" encoding="UTF-8"?>
<Content>
    <aH>
        <text>Ccc  <dynamic>C_R_N</dynamic>: More</text>
        <contact>false</contact>
    </aH>
    <page>
        <nL>Please call us</nL>
    </page>
    <body>
        <text> C R N: <strong>
                <dynamic>C_R_N</dynamic>
            </strong></text>
    </body>
    <body>
        <text>
              RE: <dynamic>D_C_P</dynamic><dynamic>M_C_O</dynamic></text>
    </body>
    <body>
        <text>
              In order <strong>
                <dynamic>M_D_D</dynamic>
            </strong>, we need some information.
            </text>
    </body>
    <body>
        <text><strong>
                Please call us <dynamic>C_P_D_N</dynamic>.
              </strong> Our hours <ul class="nested">
                <li>
                   Monday - Friday, 
    <dynamic>DST_M_F_S_Hour</dynamic> am - 
    <dynamic>DST_M_F_E_Hour</dynamic> pm; Saturday, 
    <dynamic>DST_M_F_S_Hour</dynamic> am - 
    <dynamic>DST_M_F_E_Hour</dynamic> pm.
                </li>
            </ul></text>
    </body>
    <body>
        <text>
              Thank you for your  action. .
            </text>
    </body>
    <body>
        <text>
            <dynamic>C_D_N</dynamic>
        </text>
    </body>
    <TextAndImage>
        <text>
            <dynamic>C_S_N_D</dynamic>
        </text>
    </TextAndImage>
    <dynamicNames>
        <dynamicName>LOW</dynamicName>
        <dynamicName>Env</dynamicName>
    </dynamicNames>
</Content> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:01:33.153

我在 DavidCarlisle 给出的代码的帮助下使用了下面的 xslt 代码，它部分满足了要求

```
 <?xml version="1.0"?>
      <xsl:stylesheet version="1.0" 
       xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  
       xmlns="id:d1234"  
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       
       xmlns:w="http://do.way.com/sales/W" 
       xmlns:wire="http://do.way.com/sales/Wire"    
       exclude-result-prefixes=" wire w ">

         <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
         <xsl:template match="/">
           <Content xsi:schemaLocation="id:d1234 http://abc:10/w/g/B/System/abc.xsd">
            <xsl:apply-templates select="w:sI"/>
          </Content>
        </xsl:template>

         <xsl:template match="*[local-name()!=sI]">
            <xsl:variable name="n" select="name()"/>
              <xsl:variable name="new">
                <xsl:for-each select="document('Properties.xml')">
                 <xsl:choose>
                  <xsl:when test="key('n',$n)">
                    <xsl:value-of select="key('n',$n)"/>
                  </xsl:when>
                  <xsl:otherwise>
                    <xsl:value-of select="$n"/>
                  </xsl:otherwise>
                </xsl:choose>
               </xsl:for-each>
              </xsl:variable>

       <xsl:element name="{$new}">
          <xsl:copy-of select="@*"/>
            <xsl:apply-templates/>
          </xsl:element>
       </xsl:template>

     <xsl:key name="n" match="Property" use="@value"/>

        <xsl:template match="*[name() = 'dynamic']">
            <dynamic xmlns="http://www.w3.org/1999/xhtml">
               <xsl:copy-of select="@*"/>
                   <strong>
              <xsl:value-of select="@name"/>
             </strong>
           </dynamic>

        </xsl:template>
    </xsl:stylesheet> 
```

我在这方面面临的唯一问题是我无法想出一个 xslt 代码，它可以让具有“值”属性（联系人和动态名称）的节点提取其属性值并将它们放在相应的标签（在 Properties.xml 中指定）内容下. 请浏览这个 xsl 文件并在其中进行必要的更改，或者如果您能想出一个新文件，我会同样高兴。但请确保使用 Properties.xml 文件。谢谢。

# ruby-on-rails - Tire/Elasticsearch 搜索关联

> ID：10071634
> 
> 赞同：3
> 
> 时间：2012-04-09T10:00:44.497
> 
> 标签：ruby-on-rails, lucene, elasticsearch, tire

我有以下代码，我正在尝试使用 ElasticSearch 来查询它。

当我做 Book.search(:q=>'Foo') 时它可以工作，但当我做 Book.search(:author=>'Doctor') 时它不起作用。在我的数据库中，我有一个名称为“Barz，Foo，Doctor”的条目

我不确定在查询中是否应该使用术语或术语，因为我正在使用雪球破坏名称。我尝试了条款，然后出现错误。随着学期我没有得到任何结果。

```
class Author < ActiveRecord::Base
    has_many :books
end

class Book < ActiveRecord::Base
  belongs_to :author
  include Tire::Model::Search
  include Tire::Model::Callbacks
  mapping do
    indexes :title,
    indexes :description
    indexes :author,type: 'object', properties: {
         name: { type: 'multi_field',
                 fields: { name:  { type: 'string', analyzer: 'snowball' },
                           exact: { type: 'string', index: 'not_analyzed' } 
                  } 
          } }
  end

  def to_indexed_json
   to_json(:include=>{:author=>{:only=>[:name]}} )
  end

  def self.search(params = {})
    tire.search(load:true) do
      query do
       boolean do
        should { string params[:q] } if params[:q].present?
        should { term params[:author] } if params[:author].present?
       end
      end
      filter :term, :active=>true
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:30:15.103

你可以这样做

```
should { terms :author, [params[:author]]} if params[:author].present? 
```

或者

```
should { term :author, params[:author]} if params[:author].present? 
```

或者

```
should { string "author:#{params[:author]}"} if params[:author].present? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T22:20:27.920

正如@Karmi 所说[，在此处输入链接描述](https://github.com/karmi/tire/issues/306 "票#306")

嗨，是的，你的方法似乎是一种。有几件事：*除非您想使用 Lucene 查询语法（增强、范围等），否则最好使用文本查询，* 是的，过滤器比查询更高效，示例中的 active=true 是非常适合过滤器。不过要注意查询、过滤器和构面之间的相互作用。但是，您对术语查询的定义不正确-应该是：

```
term :author, params[:author] 
```

# shell - 如何在期望程序脚本中使期望命令等待精确的字符串匹配

> ID：10071636
> 
> 赞同：6
> 
> 时间：2012-04-09T10:00:46.303
> 
> 标签：shell, unix, scripting, sh, expect

我想知道如何使期望脚本中的期望命令等待确切的字符串匹配，然后再继续脚本中的下一行。

**Bourne shell (sh) 脚本：**

```
#!/bin/sh
#!/usr/bin/expect

spawn ssh -Y localuser@lbblr-tirumala
expect -exact "localuser@lbblr-tirumala's password: "

# replace password with ur own passwd
send "geomax45\r"

# replace the prompt with ur own prompt
expect "localuser@lbblr-tirumala:~$ "

# run application
send "./sample\r"

expect "*Menu*\r
1\. print hello world\r
2\. print Bye world\r
3\. quit\r
enter choice: "
# enter choice 1
send "1\r"
expect "Bye world\r
*Menu*\r
1\. print hello world\r
2\. print Bye world\r
3\. quit\r
enter choice: $"
# enter choice 2
send "2\r" 
```

在上面的代码中输入 1 后，代码应该等待“Bye world\r......”字符串出现在屏幕上。但即使屏幕提示完全不同的字符串，代码正在执行下一行并输入选项 2，根据期望的定义，这不应该发生。它应该等到期望命令中的完整字符串匹配。

我想知道是否可以使用任何更严格的命令，以便期望等待直到发生精确的字符串匹配。请在这个问题上帮助我

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T10:07:31.183

您已经在脚本的前面使用了它： `expect -exact`. 但是长匹配字符串几乎肯定会导致问题。您应该尝试将其缩减为最短的唯一匹配项，如有必要将其分解为多个`expect`命令。

在这种情况下，仅根据您显示的内容，正确的命令可能是`expect -exact "choice:"`. 但本质上，如果没有可能的程序输出的完整细节，就不可能确定这一点。

# php - Selenium/Ubuntu 的 PHPUnit 致命错误

> ID：10071642
> 
> 赞同：1
> 
> 时间：2012-04-09T10:01:04.977
> 
> 标签：php, unit-testing, ubuntu, selenium, phpunit

我已经阅读了各种教程/帖子，在我的 Ubuntu 系统上安装了带有 Selenium 的 PHPUnit。我相信我已按要求进行了所有设置：

```
/usr/share/php$ phpunit --version
PHPUnit 3.6.10 by Sebastian Bergmann. 
```

因此，我使用 IDE 创建了我的测试，并将其保存以供运行，这似乎是根据需要进行设置的。所以我使用以下方法运行测试：

```
phpunit /home/retrobadger/working_files/tutorials/phpunit/selenium1.php 
```

但每次我运行它时，我都会收到以下错误：

```
PHP Fatal error:  Class 'PHPUnit_Extensions_SeleniumTestSuite' not found in /usr/share/php/PHPUnit/Extensions/SeleniumTestCase.php on line 394
PHP Stack trace:
PHP   1\. {main}() /usr/bin/phpunit:0
PHP   2\. PHPUnit_TextUI_Command::main() /usr/bin/phpunit:46
PHP   3\. PHPUnit_TextUI_Command->run() /usr/share/php/PHPUnit/TextUI/Command.php:130
PHP   4\. PHPUnit_Runner_BaseTestRunner->getTest() /usr/share/php/PHPUnit/TextUI/Command.php:150
PHP   5\. ReflectionMethod->invoke() /usr/share/php/PHPUnit/Runner/BaseTestRunner.php:124
PHP   6\. PHPUnit_Extensions_SeleniumTestCase::suite() /usr/share/php/PHPUnit/Extensions/SeleniumTestCase.php:0 
```

扩展名中的文件存在，我已经为它设置了非常开放的权限。我唯一能想到的是我的 SeleniumTestCase.php 有问题，或者我需要另一个没有其他教程建议的文件。

任何建议将不胜感激。我对 PHPUnit 的经验很少，所以希望我的错误是一个基本错误。

感谢您提供的任何建议，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:07:00.247

检查您在调用测试时是否包含 PHPUnit。无论是在 php.ini 中，还是在您运行的 IDE 中，或者显式地——现在它只是找不到类。这意味着 PHPUnit 无法访问。尝试一个更简单的类 PHPUnit_Extensions_SeleniumTestCase

# image-processing - 使用opencv检测圆圈图案

> ID：10071644
> 
> 赞同：2
> 
> 时间：2012-04-09T10:01:16.460
> 
> 标签：image-processing, opencv, pattern-matching, computer-vision, object-recognition

我必须使用opencv检测6个圆圈的图案。我通过在 opencv 中使用阈值和轮廓函数检测到圆及其质心。

现在我必须以一种对缩放和旋转不变的方式来定义这些圆之间的关系。有了这个，我将能够在各种视图中检测到这种模式。我必须使用此模式来确定对象姿势。

如何实现缩放/旋转不变性？你有什么我可以读到的参考吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:05:36.807

如果您需要找到旋转，或者只是摆脱它，或者检测圆圈是否真的形成了您链接的图案，我并不完全清楚。无论哪种方式，答案都差不多。

我会首先找到只有一个邻居的两个圆圈。对于每个圆心计算到最近的两个邻居的距离。如果距离差异超过 10%，则质心属于“结束”圆（链接中的顶部之一）。

现在您已经找到了两个末端圆，旋转它们使它们彼此水平。如果其他质心现在位于它们上方，请再旋转 180 度，使图案以您想要的方向结束。

现在您可以根据平均质心间距离计算缩放比例。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:19:07.307

为了使您的图案对旋转和比例保持不变，您必须在检测图案时标准化方向和比例。这是一个简单的算法来实现这一点

*   检测中心和圆的大小（你说你已经做到了 - 好！）
*   使用简单平均值计算平均中心。以此均值表示所有中心
*   使用简单的范数找到最远的中心（欧几里得就足够了）
*   缩放中心位置和圆圈大小，使最大距离为 1.0
*   旋转中心，使最远的坐标为 (1.0, 0)

你完成了。您现在是比例/旋转不变模式检测器的骄傲拥有者！恭喜！

现在您可以找到模式，按照建议进行转换，并比较中心位置和圆的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T04:29:20.367

您的问题听起来与 SURF 算法所做的完全一样。它找到感兴趣的组并将它们组合在一起，旋转和缩放不变，并且可以在其他图片中找到相同的对象。

只需搜索 OpenCV 和 SURF。

# android - 活动重启问题

> ID：10071648
> 
> 赞同：1
> 
> 时间：2012-04-09T10:01:45.587
> 
> 标签：android, orientation

我在我的应用程序中有活动，我在我的清单文件中设置了**android:configChanges="orientation"**，如下所示：

```
 <activity
      android:name=".MyActivity"
      android:label="@string/app_name"
      android:configChanges="orientation">
      <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
      </intent-filter>
    </activity> 
```

和处理方法：

```
@Override
  public void onConfigurationChanged(Configuration config) {
    super.onConfigurationChanged(config);
    if (config.orientation == Configuration.ORIENTATION_LANDSCAPE) {
      Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
  } else if (config.orientation == Configuration.ORIENTATION_PORTRAIT){
      Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
  }
  } 
```

在大多数谷歌搜索中，我看到它说它会阻止重新启动我的活动，但它是从改变方向开始的。我在**onCreate()**里面放了一个 System.out ....它正在打印每个方向改变，这意味着它开始了.任何帮助为什么它会发生或者我在某个地方错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:05:52.497

在清单文件中使用它。

```
android:configChanges="orientation|keyboardHidden" 
```

在定向时，它不会重新启动活动

# css - 在phonegap android上隐藏轮廓

> ID：10071652
> 
> 赞同：0
> 
> 时间：2012-04-09T10:02:14.927
> 
> 标签：css, cordova

我正在测试 phonegap android 做某事，我想隐藏链接和输入标签上的轮廓。

```
outline:0; 
```

没用。

我该如何隐藏它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:04:22.520

尝试这个：

```
input:focus, textarea:focus {
  -webkit-tap-highlight-color: rgba(255, 255, 255, 0);   
  -webkit-user-modify: read-write-plaintext-only;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:46:53.850

对于链接和输入标签

```
 a, input
        {
        outline:0;
        border:none;
        } 
```

# blackberry - 如何在黑莓中获取 JAD 文件信息？

> ID：10071657
> 
> 赞同：-1
> 
> 时间：2012-04-09T10:03:03.543
> 
> 标签：blackberry

我想要与黑莓中的 jad 文件相关的所有信息。我应该如何获得它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:19:15.070

试试下面的代码请注意

> **这是仅在设备上工作，不在模拟器上测试**

```
import java.util.Enumeration;

import net.rim.device.api.system.ApplicationDescriptor;
import net.rim.device.api.system.CodeModuleGroup;
import net.rim.device.api.system.CodeModuleGroupManager;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.container.MainScreen;

public class StartUp extends UiApplication{
    public static void main(String[] args) {
        StartUp up=new StartUp();
        up.enterEventDispatcher();
    }
    public StartUp()
    {
        MainScreen screen=new MainScreen();
         CodeModuleGroup cmg = null;
            CodeModuleGroup[] allGroups = CodeModuleGroupManager.loadAll();
            String moduleName = ApplicationDescriptor.currentApplicationDescriptor().getModuleName();
            for (int i = 0; i < allGroups.length; i++) {
               if (allGroups[i].containsModule(moduleName)) {
                   cmg = allGroups[i];
                  break;
                 }
            }
            if (cmg == null) {
                screen.add(new LabelField("not able to fetch properties"));
            } else {
                double size=0;
                for (Enumeration e = cmg.getPropertyNames(); e
                        .hasMoreElements();) {
                    String name = (String) e.nextElement();
                    String value = cmg.getProperty(name);
                    System.out.println(name+" : "+value);
                    screen.add(new LabelField(name+" : "+value,Field.FOCUSABLE));
                }
            }
        UiApplication.getUiApplication().pushScreen(screen);

    }

} 
```

# python - django 无法打开数据库文件

> ID：10071658
> 
> 赞同：1
> 
> 时间：2012-04-09T10:03:11.467
> 
> 标签：python, django, exception

我正在实施一个 django 网站，

该站点转到 hello world 视图：

> [http://ec2-107-20-20-19.compute-1.amazonaws.com/](http://ec2-107-20-20-19.compute-1.amazonaws.com/)

视图.py`/home/ubuntu/djangoProj/micopiloto/portfolio`

```
 # Create your views here.
    from django.http import HttpResponse 

    def view(request):
        return HttpResponse('Hello Worlsss9d!') 
```

但我看不到 amin 网站，我看到了这个错误：`unable to open database file`

```
> http://ec2-107-20-20-19.compute-1.amazonaws.com/admin/

settings.py `/home/ubuntu/djangoProj/micopiloto`

# Django settings for micopiloto project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'thadb.db',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale
USE_L10N = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# URL prefix for admin static files -- CSS, JavaScript and images.
# Make sure to use a trailing slash.
# Examples: "http://foo.com/static/admin/", "/static/admin/".
ADMIN_MEDIA_PREFIX = '/static/admin/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '2&g_&k=+^(0t)1xf82m^=#0u6v1e!)nn7ixq*+2^h%4$mwlrsm'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

ROOT_URLCONF = 'micopiloto.urls'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'portfolio' 
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

所以我在我的项目文件夹中看到了创建的 thadb.db，

我有错误：

```
Exception Value:    
unable to open database file 
```

所以我有`$sudo chmod 777 thadb.db`

但仍然得到同样的错误，

这是因为许可吗？我应该将文件夹设置为 777 吗？

编辑>>

根据建议的解决方案，我为 db 和根文件夹尝试了 chmod root

```
-rwxrwxrwx 1 root     ubuntu   44032 2012-04-09 09:49 thadb.db
drwxrwxrwx 3 root   ubuntu 4096 2012-04-09 12:44 micopiloto 
```

还是行不通！;(

我收到此错误：

```
Exception Value:    
unable to open database file 
```

那么如何让管理员显示？

*   安全将如何受到影响？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T10:07:40.693

这是一篇描述您的问题的解决方案的文章：

[http://www.pantz.org/software/sqlite/unabletoopendbsqliteerror.html](http://www.pantz.org/software/sqlite/unabletoopendbsqliteerror.html)

解决方案是确保包含数据库文件的目录也允许对该进程进行写访问。

此外，Django 有一个针对此问题的页面。

[https://code.djangoproject.com/wiki/NewbieMistakes#DjangosaysUnabletoOpenDatabaseFilewhenusingSQLite3](https://code.djangoproject.com/wiki/NewbieMistakes#DjangosaysUnabletoOpenDatabaseFilewhenusingSQLite3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T13:31:14.873

好的，经过多次努力，它开始工作了，所以如果另一个菜鸟有这个问题，这是解决方案的一部分[为具有正确权限的 db 制作 db 文件 n 文件夹]

问题是我的数据库在 settings.py 上的路径

我给出了整个路径，然后它起作用了；）

```
/home/ubuntu/djangoProj/micopiloto/ 
```

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-27T09:36:15.957

[https://stackoverflow.com/a/10071711/11124205](https://stackoverflow.com/a/10071711/11124205)

为我工作。尝试让 www-data 写入数据库目录，让 sqlite 创建日志文件。

# .net - Facebook OGP 元标记在 asp.net MVC 中不起作用

> ID：10071664
> 
> 赞同：1
> 
> 时间：2012-04-09T10:03:39.010
> 
> 标签：.net, facebook

我已经使用 XFBML 在 asp.net MVC 中实现了类似 facebook 的按钮。我还添加了 OGP 元标签，如 og:title、og:Url、og:Image 但这些标签对墙贴没有任何影响......它只显示 url 不显示 og:Title 元标签中给出的标题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:41:40.220

你不能来这里指望人们只为你工作。

你需要亲自尝试、研究、阅读、亲自体验事物，然后你可以带着你面临的特定问题回到这里。

facebook api 有一个相当不错的文档，大部分内容都以直截了当的方式列出。您是否尝试阅读它关于[Open Graph](http://developers.facebook.com/docs/opengraph/)的内容？

# liferay - Liferay Hooks：对于覆盖 Liferay 默认值，我们可以指定如下所示吗？

> ID：10071668
> 
> 赞同：0
> 
> 时间：2012-04-09T10:04:02.943
> 
> 标签：liferay, liferay-6

我正在使用 Liferay 6 进行开发。

我试图理解 Liferay Hooks 的概念。在谷歌搜索时，我遇到了一个 Liferay Hooks 示例，它指定了一个带有以下条目的 liferay-hook-xml：

**liferay-hook.xml**

```
<hook>
    <portal-properties>portal-hook.properties</portal-properties>
    <service>
        <service-type>com.liferay.portal.service.UserLocalService</service-type>
        <service-impl> com.integratingstuff.liferay.hooks.CustomUserLocalServiceImpl</service-impl>
    </service>
</hook> 
```

谁能告诉我这到底是什么意思？我的理解是 Liferay 的 UserLocalService 类已被覆盖以使用 CustomUserLocalServiceImpl。它是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T11:54:57.107

我的思想`<service-impl>`超越了`UserLocalServiceWrapper`. 有了这个概念，您可以在 liferay 默认设计中添加一些功能。

见：[http ://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/overriding-a-portal-service](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/overriding-a-portal-service)

# asp.net - 如何在gridview中将列设置为只读

> ID：10071670
> 
> 赞同：1
> 
> 时间：2012-04-09T10:04:24.407
> 
> 标签：asp.net, gridview

我正在使用 gridview Edit 来编辑我在 gridview 中的值，当我按下编辑时，所有列都可以编辑，我希望不允许编辑其中一列。

有什么办法我可以做到这一点？

这是我的 aspx 代码：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateDeleteButton="True" 
            onrowdeleting="GridView1_RowDeleting" AutoGenerateEditButton="True" 
            onrowediting="GridView1_RowEditing" 
            onrowcancelingedit="GridView1_RowCancelingEdit" 
            onrowupdating="GridView1_RowUpdating" >
</asp:GridView> 
```

这是我的 aspx.cs 代码：

```
public void loadCustomer()
        {
            SqlConnection objConnection = new SqlConnection("Data Source=localhost;Initial Catalog=SampleApplication;Integrated Security=True");
            objConnection.Open();
            SqlCommand objCommand = new SqlCommand();
            objCommand.CommandText = "Select * from Customer";
            objCommand.Connection = objConnection;
            objCommand.ExecuteNonQuery();
            DataSet objds = new DataSet();
            SqlDataAdapter objadap = new SqlDataAdapter(objCommand);
            objadap.Fill(objds);
            GridView1.DataSource = objds.Tables[0];
            GridView1.DataBind();
            objConnection.Close();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-11T11:57:30.117

gridView1 的 RowDataBound 事件

((BoundField)gridView1.Columns[columnIndex]).ReadOnly = true;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-17T12:00:30.057

I know this is really old but I need to put the answer here for others who shared my issue. Regardless, I've been struggling with this non-stop for a couple of days now. Everyone seems to be posting code for VB, when your problem is clearly posted in C#.

What you're looking for is:

```
 protected void GridView_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        e.Row.Cells[columntobedisabled].Enabled = false;
    } 
```

where 'columntobedisabled' is index number of the column to be disabled...eg. 1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-11T20:52:47.060

在 C# 网站或 WebForm 的情况下，在文件后面的代码中的 Page_Load() 中输入以下代码

```
protected void Page_Load(object sender, EventArgs e)
{
    // Your code

    ((BoundField)GridView1.Columns[columnIndex]).ReadOnly = true;
} 
```

这样做也有助于克服错误

> **System.ArgumentOutOfRangeException: '指定的参数超出了有效值的范围。参数名称：索引'**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-20T10:47:48.533

您需要授予`"ReadOnly= true"`您不喜欢编辑的列的权限。

例如。

```
GridView1.columns[1].ReadOnly= true; 
```

您可以在 GridView 的 RowDataBound 事件中使用此行。

# iphone - 保留使用 NSUserDefaults 保存的数组的值

> ID：10071671
> 
> 赞同：-1
> 
> 时间：2012-04-09T10:04:26.827
> 
> 标签：iphone, objective-c, ios5, xcode4, nsuserdefaults

我有两个视图控制器。第一个与另一个视图控制器有一个segue。对于后一个视图控制器，我想要的是添加来自文本字段的项目，然后通过单击按钮将其保存在数组中。然后这个数组将使用 NSUserDefaults 保存。

在下面的代码中，我可以成功地将项目存储在我的数组中。这个数组也使用 NSUserDefaults 保存。然而，当我回到我的第一个视图控制器，然后再次进入我的第二个视图控制器以在我的数组上添加新项目时，我之前存储的项目已经消失了。新添加的项目是唯一保存的项目。

有人说我必须做一些序列化，那是怎么做的？如果还有其他方法，请指教:)

在我的 .h 文件中

```
@interface AddCardViewController : UIViewController <UITextFieldDelegate>

@property (strong, nonatomic) IBOutlet UITextField *cardNameTextField;

@end 
```

在我的 .m 文件中

```
@interface AddCardViewController ()

@property (nonatomic, strong)NSMutableArray *nameOfCards;

@end

@implementation AddCardViewController 

@synthesize cardNameTextField = _cardNameTextField;

@synthesize nameOfCards = _nameOfCards;

// setting my array
- (NSMutableArray *)nameOfCards 
{
    if (!_nameOfCards) _nameOfCards = [[NSMutableArray alloc] init];

    return _nameOfCards;
}

- (void) viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];

    self.cardNameTextField.delegate = self;
}

- (BOOL) textFieldShouldReturn:(UITextField *)textField{

    [self.cardNameTextField resignFirstResponder];

    return YES;
}

- (void)viewDidLoad
{
    //getting the data saved

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    NSMutableArray *cardName = [defaults objectForKey:@"cardName"];

    NSLog(@"contents of my array %@", cardName);

    [super viewDidLoad];

}

- (IBAction)addNewCard:(id)sender {
    [self.nameOfCards addObject:self.cardNameTextField.text];
    NSLog(@"contents :%@", _nameOfCards);

    // this is how to save the data

    NSMutableArray *cardName = _nameOfCards;

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    [defaults setObject:cardName forKey:@"cardName"];

    [defaults synchronize];

    NSLog(@"data saved");

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:20:17.773

所以在**appdelegate中使用****mutablearray**并在**appdidfinishlaunching中使用****alloc init**。所以如果你从其他视图中添加一些东西，它不会替换你的数据。

 ******也许它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:20:22.627

在我看来，假设错误如下：

```
NSMutableArray * = cardName _nameOfCards; 
```

这里 _nameOfCards 被初始化，然后设置为 0 个元素，然后你用 cardName 做一个引用，它最初有什么 storato 磁盘的值，所以现在 cardName 不再有旧的内容，而只有新的内容。从这里你错了。

您应该创建一个 _nameOfCards 的 cardName 的 addObject。

希望有所帮助******

# c - 字符到十六进制不显示字符串的 ASCII 值

> ID：10071673
> 
> 赞同：0
> 
> 时间：2012-04-09T10:05:08.550
> 
> 标签：c, hex, printf

玩弄 C 或 C99，我试图了解转换、位移和十六进制值是如何工作的。

我有以下问题

```
char c[4];
c[0] = 0x41;
c[1] = 0x42;
c[2] = 0x43;
c[3] = 0x00;
printf("%s", c); //prints ABC
printf("%X", c); //prints 99B11760 
```

99B11760 来自哪里？

所以同样...

```
int main() {
    char a = 'a'; //ascii value is 0x41 (Mistake I made, 'a' is 0x61, 'A' is 0x41) 
    printf("%X\n",a); //outputs "61"? (THIS IS CORRECT OUTPUT, 'a' != 0x41)
} 
```

我一直在寻找解决方案来解决如何解决将十六进制值存储到 char 中的类似问题，但我无法理解的是某些存储值与它的 ASCII 值不对应的原因或位置。由于它既不是 ASCII 十六进制值、十进制值或八进制值，所以使用 printf("%X\n", c); 时打印的是什么值；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:12:33.310

> 99B11760 来自哪里？

`c`这是在您强制它衰减为指针之后碰巧具有的值。

> 我一直在寻找解决这个问题的方法

什么问题？有没有你想做却不知道怎么做的事情？“我做了一些没有意义的事情并得到了一个无意义的答案”不是问题。只是不要那样做。

> ..但我遇到的问题是理解为什么或在哪里打印 61 而不是 ASCII 十六进制值 0x41。它不是十进制值，也不是八进制值。

如您所见，它应该没有特定的价值。但它必须是一些东西。如果你把骰子扔到空中，结果是 2，你想知道为什么它是 2 吗？当然不是。只有当它*应该*是一件事但又*是*另一件事时，你才会遇到问题。在这种情况下，应该没有什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:10:40.053

允许 C 中的数组变量自动转换为地址值（也称为指针值）。您看到的输出与数组的内容完全无关。

也许你打算这样做？

```
char c[4];
c[0] = 0x41;
c[1] = 0x42;
c[2] = 0x43;
c[3] = 0x00;
printf("%X", *(unsigned int*)c ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T10:23:16.227

```
int main() {
char a = 'a'; //ascii value is 0x41
printf("%X\n",a); //outputs "61"?
} 
```

在这种情况下，首先您将 'a'(ascii value = 97) 存储到字符 a 中，因此字符 a 包含 97，然后您将 97 以十六进制形式打印为“0x61”

```
char c[4];
c[0] = 0x41;
c[1] = 0x42;
c[2] = 0x43;
c[3] = 0x00;
printf("%s", c); //prints ABC
printf("%X", c); //prints 99B11760 
```

在这种情况下

```
 '0x41' in decimal value is 65 is 'A' in ASCII
         '0x42' in decimal value is 66 is 'B' in ASCII
         '0x43' in decimal value is 67 is 'C' in ASCII   
         '0x00' in decimal value is 00 is null in ASCII 
```

如果格式说明符是 char/string 类型，它将输出 'ABC'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T10:08:19.683

```
 printf("%X", c); //prints 99B11760 
```

这会调用未定义的行为。`x`转换说明符需要 a`unsigned int`但您传递的是`char *`.

在问题的第二部分中，您应该`a`转换为`unsigned int`.

```
printf("%X\n", (unsigned int) a); 
```

`A`ascii 值是`0x41`，但`a`ascii 值是`0x61`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T10:08:47.437

对于第一个问题，当您`c`使用`%X`格式打印时，它正在打印数组的地址（第一个字符的地址）。对于第二个问题，这是因为 ASCII 值`a`是 97（十进制），转换为十六进制是 61。如果使用`A`字符，那么它将打印 41，因为大写的 ASCII 值`A`是 65。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T10:09:01.620

`c`是一个指针，所以当你使用任何东西打印它时，`%s`你会得到打印的指针地址。

# javascript - 替换所有图像的图像源

> ID：10071677
> 
> 赞同：3
> 
> 时间：2012-04-09T10:05:24.283
> 
> 标签：javascript, regex, greasemonkey

我想`src`使用 Greasemonkey 脚本替换与正则表达式匹配的所有图像的属性。例子：

代替`http://aff.kooora.com/i/z3.gif`

和`http://example.com/aff.kooora.com/i/z3.gif`

我没有编写脚本的经验，但这就是我想出的：

```
var allImg=document.getElementsByTagName("img"), i=0, img;
var pattern = aff\.kooora\.com/([A-Za-z0-9/._]*);
while(img=allImg[i++])
{
    result = pattern.exec(img);
    if (result!=null) 
        img.src=img.src.replace(result, 'http://example.com/' + result);
} 
```

它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:22:39.620

您的正则表达式是问题所在，您需要用斜杠将其包装起来（否则解释器不知道它应该将其视为正则表达式）：

```
var allImg=document.getElementsByTagName("img"), i=0, img;

var pattern = /^http\:\/\/aff\.kooora\.com\/(.*)$/;

while (img = allImg[i++])
{
    if (img.src.match(pattern)) {
        img.src = img.src.replace(pattern, 'http://example.com/aff.kooora.com/$1');
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T01:22:31.187

只是一种选择。

在这个 Greasemonkey 脚本[ProxyLoadIMG](http://userscripts.org/scripts/show/76780)中，这是在不使用正则表达式的情况下完成的。

创建它是为了通过代理加载图像。
只有图像。链接和其他内容保持不变。

```
var proxy = 'https://proxytea.appspot.com/'

for (var x=0; x<document.images.length; x++) {
    imagem = document.images[x];
    imagem.src = imagem.src.replace(location.protocol + '//', proxy);
} 
```

[http://aff.kooora.com/i/any.jpg](http://aff.kooora.com/i/any.jpg)变成[https://proxytea.appspot.com/aff.kooora.com/i/any.jpg](https://proxytea.appspot.com/aff.kooora.com/i/any.jpg)
[http://aff.kooora.com/i/z3 .gif](http://aff.kooora.com/i/z3.gif)变成[https://proxytea.appspot.com/aff.kooora.com/i/z3.gif](https://proxytea.appspot.com/aff.kooora.com/i/z3.gif)
等等......

不需要正则表达式:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-04T10:03:16.823

用这个：

```
function replaceImages(oldUrl, newUrl) {
    var imgs = document.getElementsByTagName('img')
    for (i = 0; i<imgs.length; i++) {
        imgs[i].src = imgs[i].src.replace(oldUrl, remoteUrl)
    }
}

replaceImages('http://aff.kooora.com/i/z3.gif', 'http://example.com/aff.kooora.com/i/z3.gif') 
```

如果您正在处理网站的本地版本并且您不必费心下载他们的所有图像内容，这也很棒

# php - PHP 和 MySQL ORDER BY date_time 错误

> ID：10071679
> 
> 赞同：0
> 
> 时间：2012-04-09T10:05:27.120
> 
> 标签：php, mysql, datetime, sql-order-by

我正在开发自己的论坛，除了我尝试按日期时间排序之外，一切都运行良好。我的表名是正确的，所有的字段名也是正确的！当我在查询中添加 ORDER BY date_time 时出现 PHP 错误，我不明白为什么，因为它在网站的其他地方工作得很好。代码和错误如下：

```
// query responses
$sqlresponses = mysql_query("SELECT * FROM forum_replb ORDER BY date_time WHERE post_id='$disc_id'");
$responseList = "";
$numRows = mysql_num_rows($sqlresponses);
if ($numRows < 1) {
    $responseList = "There are currently no responses to this discussion/post yet! Add one above.";
} else {
    while($row = mysql_fetch_array($sqlresponses)){
        $response_author_id = $row["author_id"];
        $reply_body = $row["reply_body"];
        $date_time = $row["date_time"];
            $date_time = strftime("%b %d, %Y", strtotime($date_time));
        $responseList .= '<div id="sub_response_module"><p>' . $reply_body . ' -
        <a href="../profile.php?id=' . $response_author_id . '">' . $response_author_id . '</a> 
        | <i>' . $date_time . '</i></p></div>';
    }
} 
```

错误：

```
Warning: mysql_num_rows(): supplied argument is not a valid MySQL result resource in /home/public_html/lb/forum/post.php on line 49 
```

澄清一下，第 49 行是 $numRows = mysql_num_rows($sqlresponses);。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:08:44.007

您的 ORDER BY 子句必须在 WHERE 子句之后：

```
SELECT * FROM forum_replb WHERE post_id='$disc_id' ORDER BY date_time 
```

另请注意，不推荐使用 mysql_ 系列函数。您应该使用 mysqli_ 函数，或者可能更好的 PDO。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T10:08:09.410

您的查询中有语法错误 - 您应该将 ORDER BY 放在 WHERE 之后。

```
mysql_query("SELECT * FROM forum_replb WHERE post_id='$disc_id' ORDER BY date_time "); 
```

# javascript - getElementById 找不到结果

> ID：10071682
> 
> 赞同：1
> 
> 时间：2012-04-09T10:05:37.827
> 
> 标签：javascript, html, xml, dom

我正在尝试通过所有标签的 id 解析 xml 文件。这是我的xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <zones>
    <bedroom id="0">
       <fan id="00">on</fan>
       <tv id="01">off</tv>
    </bedroom>
    <hall id="1">
    <tube id="10">on</tube>
    <bulb id="11">off</bulb>
    <fan id="12">on</fan>
    <tv id="13">on</tv>
    <ac id="14">on</ac>
    </hall>
    <kitchen id="2">
    <freez id="20">on</freez>
    </kitchen>
    <toilet id="3">
        <bulb id="30">on</bulb>
    </toilet>
    <bathroom id="4">
        <heater id="40">on</heater>
    </bathroom>
   </zones> 
```

这是我的代码..

```
 <html>
     <head> <meta http-equiv="refresh" content="1" > </head>
     <body>

      <script type="text/javascript" for="window" event="onload">
       if (window.XMLHttpRequest)
       {// code for IE7+, Firefox, Chrome, Opera, Safari
           xmlhttp=new XMLHttpRequest();
       }
        xmlhttp.open("GET","home.xml",false);
        xmlhttp.send();
        xmlDoc=xmlhttp.responseXML; 

        document.write("<table border='1'>");
        var x=xmlDoc.getElementById("0");
        for (i=0;i<x.length;i++)
        { 
            document.write("<tr><td>");
                document.write("fan");
                document.write("</td><td>");

                document.write(x[i].getElementsByTagName("fan")[0].childNodes[0].nodeValue);
               document.write("<tr><td>");
               document.write("tv");
               document.write("</td><td>");
               document.write(x[i].getElementsByTagName("tv")[0].childNodes[0].nodeValue);
               document.write("</td></tr>");
       }

       var x=xmlDoc.getElementsByTagName("hall");
       for (i=0;i<x.length;i++)
       { 
            document.write("<tr><td>");
                document.write("tube");
                document.write("</td><td>");

                document.write(x[i].getElementsByTagName("tube")  [0].childNodes[0].nodeValue);

                document.write("<tr><td>");
                document.write("bulb");
                document.write("</td><td>");
                document.write(x[i].getElementsByTagName("bulb") [0].childNodes[0].nodeValue);

               document.write("<tr><td>");
               document.write("fan");
               document.write("</td><td>");
               document.write(x[i].getElementsByTagName("fan")[0].childNodes[0].nodeValue);

               document.write("<tr><td>");
               document.write("tv");
               document.write("</td><td>");
               document.write(x[i].getElementsByTagName("tv")[0].childNodes[0].nodeValue);

               document.write("<tr><td>");
               document.write("ac");
               document.write("</td><td>");
               document.write(x[i].getElementsByTagName("ac")[0].childNodes[0].nodeValue);

               document.write("</td></tr>");
         }

         var x=xmlDoc.getElementsByTagName("kitchen");
         for (i=0;i<x.length;i++)
         { 
            document.write("<tr><td>");
                document.write("freez");
                document.write("</td><td>");

                document.write(x[i].getElementsByTagName("freez") [0].childNodes[0].nodeValue);
         }

         var x=xmlDoc.getElementsByTagName("toilet");
         for (i=0;i<x.length;i++)
         { 
            document.write("<tr><td>");
                document.write("bulb");
                document.write("</td><td>");

                document.write(x[i].getElementsByTagName("bulb") [0].childNodes[0].nodeValue);
         }

         var x=xmlDoc.getElementsByTagName("bathroom");
         for (i=0;i<x.length;i++)
         { 
            document.write("<tr><td>");
                document.write("heater");
                document.write("</td><td>");

                document.write(x[i].getElementsByTagName("heater") [0].childNodes[0].nodeValue);
         }

       document.write("</table>");

</script>
</body>
</html> 
```

问题是当我用

```
var x=xmlDoc.getElementByTagName("bedroom"); 
```

一切正常。但是当我把它改成

```
var x=xmlDoc.getElementById("0"); 
```

浏览器中没有显示任何内容。所以请帮我解决这个问题，我坚持这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T17:47:03.117

getElementById 返回具有“ID”类型属性的元素，而不是名称为“ID”的属性。如果没有与 XML 文件一起使用的 DTD，则没有具有已定义类型的属性，因此 getElementById 将始终返回 null。[http://reference.sitepoint.com/javascript/Document/getElementById](http://reference.sitepoint.com/javascript/Document/getElementById)

W3Schools 很好地解释了如何使用 DTD。[http://www.w3schools.com/dtd/default.asp](http://www.w3schools.com/dtd/default.asp)

我建议如果你走这条路线，你可以考虑为你的 XML 元素使用更通用的名称，并使用属性来描述该元素所指的房间或设备（例如，而不是 <bedroom id="0">使用 <zone room="bedroom" id="0"> 或代替 <fan id="00"> 使用 <appliance name="fan" id="00">)，否则你的 DTD 会更大更难维护比它真正需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T10:14:11.190

看起来你有三个错误：

* * *

1.  在第 15 行，您正在使用：

    ```
    var x=xmlDoc.getElementsById("0"); 
    ```

    它应该是：

    ```
    var x=xmlDoc.getElementById("0"); 
    ```

    如果您还没有发现差异：

    您正在使用`getElement**s**ById`

    当你应该使用`getElementById()`

    [这是 MDN 文档`getElementById()`](https://developer.mozilla.org/en/DOM/document.getElementById)

2.  文件是在您的计算机上，还是在服务器上（包括家庭服务器（XAMPP、easyPHP 等））

    `XMLHttpRequest()`仅当它位于 HTTP 服务器上时才有效。

    我收到这些错误： ![错误](../Images/14d1acf06bed24ef9d898d0426732c34.png)

    您可以安装以下之一：

    *   [XAMPP](http://www.apachefriends.org/en/xampp.html)
    *   [易PHP](http://www.easyphp.org/)
    *   [阿帕奇服务器](http://apache.org/)

    我推荐使用 XAMPP 或 easyPHP，因为它们更容易设置。

    然后将您的 XML 和 HTML 文件放入您的 htdocs 文件夹中。

    最后，转到您的服务器并导航到您的 HTML 文件。

    它适用于我的：

    > HTML 文件上的输出：
    > 
    > ![看，它有效！](../Images/b2bfb235237dbd9942a2acccf1c77f8d.png)

3.  您将需要文件中的 DTD 以使其在某些浏览器中工作，或者您可以将`id`属性更改为`xml:id`. 它适用于大多数（也许是所有）现代浏览器。

* * *

**更新：** OP 已将代码从 更改`getElementsById()`为`getElementById()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T10:08:46.187

请使用 getElementById

不是 getElementsById

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T10:09:35.080

```
var x=xmlDoc.getElementsById("0") 
```

它应该是

```
var x=xmlDoc.getElementById("0") 
```

不是`getElementsbyId`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-11T07:10:49.530

`var x=xmlDoc.getElementById("0");`

字母字符非常重要

# android - 我可以用 2.2.1 在 android 手机中安装 4.0.3 apk 文件吗

> ID：10071684
> 
> 赞同：0
> 
> 时间：2012-04-09T10:05:52.377
> 
> 标签：android

我在 Eclipse 中使用*android 4.0.3*开发了我的应用程序，我已将其导出以创建一个 apk 文件，但我无法将它安装在我的 Samsung Galaxy S2 中，*Android 版本为 2.2.1*。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:13:31.583

Android 是向前兼容而不是向后兼容。所以如果你已经在 4.X 中做了一个应用程序，并且想要在 2.X 中，那将是不可能的。

这是一个链接，您可以找到[API 的级别](http://developer.android.com/guide/appendix/api-levels.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:07:23.023

您需要将`minSdkVersion`API 级别设置为 8 或更低。在你的 AndroidManifest.xml

```
 <uses-sdk android:minSdkVersion="8" /> 
```

[此链接](http://developer.android.com/guide/appendix/api-levels.html)将 API 级别映射到 Android 操作系统版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T10:08:09.173

你不应该.. Android 4.0 有不同的硬件要求和最新的 Api 不支持 2.1 .. 所以你不会被允许这样做..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T10:20:28.227

Android 支持向前兼容。也就是说，您可以将使用 API 1.5 编程的应用程序安装到该 API 之上的手机上，但您不能将应用程序 4.0.3 安装到该 API 之下的手机上。Sandy 引用了您无法在该 API 下安装的原因

# java - 此 for 循环的大 O 分析

> ID：10071692
> 
> 赞同：4
> 
> 时间：2012-04-09T10:06:48.377
> 
> 标签：java, for-loop, big-o, time-complexity, code-analysis

```
 sum = 0;
 for (i = 1; i <= n; i++) {    //#1
   for (j = 1; j <= i * i; j++) {     //#2
      if (j % i == 0) {    //#3 
          for (k = 1; k <= j; k++) {   //#4
             sum++;
         }
     }
  } 
```

}

以上让我感到困惑

```
Suppose #1 runs for N times
    #2 runs for N^2 times
    #3 runs for  N/c since for N inputs N/c could be true conditions
    #4 runs for  N times 
```

因此，大致我可以看 O(N^5) 。我不确定。请帮助澄清。

**编辑**我想知道`if(j%i==0)`. 由于它`N^2`从其父循环中获取输入，因此它可能正在`(N^2)/c`执行执行而不是`N/c`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T10:50:45.683

我会说它的 O(N^4) 和它一样。

```
 for (int i = 1; i <= n; i++)        //#1 O(n ...
   for (int j = i; j <= i * i; j+=i) //#2 ... * n ...
     for (int k = 1; k <= j; k++)    //#4 ... * n^2) as j ~= i^2
         sum++; 
```

或者

```
public static void main(String... args) {
    int n = 9000;
    System.out.println((double) f(n * 10) / f(n));
}

private static long f(long n) {
    long sum = 0;
    for (long i = 1; i <= n; i++)   //#1
        for (long j = 1; j <= i; j++) //#2
            sum += i * j; // # 4
    return sum;
} 
```

印刷

```
9996.667534360826 
```

这非常接近 10^4

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T11:32:44.003

@PeterLawrey 做了数学计算，这里是图表上绘制的基准（[我的数据集](https://gist.github.com/2342986)-`n`与以微秒为单位的执行时间）。

`n`基本上，我使用不同的输入（X 轴）多次运行有问题的代码。然后我将平均执行时间除以`n^5`,`n^4`和`n^3`函数并绘制：

![在此处输入图像描述](../Images/54bed3f31565423d58008b8254a7671b.png)

[^(全尺寸图片)](https://i.stack.imgur.com/nBoAa.png)

请注意，这是一个对数刻度，所有函数都被缩放到或多或少在同一范围内。

你猜怎么着，平均执行时间`t(n)`除以`n^5`不断减少，同时`t(n)/n^3`不断增长。只有`t(n)/n^4`在接近无穷大时才稳定，这证明**平均执行时间实际上是`O(n^4)`**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T18:58:02.143

我认为使用 Sigma 表示法的答案如下：

![在此处输入图像描述](../Images/c09c1aa90ea254a09317a3d028b5a66b.png)

# javascript - 导航工作一次，但什么都不做

> ID：10071693
> 
> 赞同：1
> 
> 时间：2012-04-09T10:06:51.443
> 
> 标签：javascript, navigation, css

我正在尝试编写一个包含四个元素的导航栏。如果当前选择了元素，它将有一个“红色”背景图像，如果它是其他 3 个之一，它将有一个“黑色”背景图像。我的四个标签是“时间表、作业、通知和运动”我尝试制作 8 个功能，如下面的 2 个

```
function setTimeRed() 
{
    document.getElementById("time").style.ClassName = 'timetable_r';
}

function setTimeBlack() 
{
    document.getElementById("time").style.ClassName = 'time_r';
} 
```

然后是这样的四个块：

```
function changeTimeButton()
{
    var timePath = new String();
    timePath = document.getElementById("timetable").style.backgroundImage;

    if(timePath == "url(assets/img/tabs/time_black.png)" || timePath == "")
    {
        setTimeRed();
        setHomeBlack();
        setNotiBlack();
        setSportBlack();
    }
    else {

    }  
} 
```

最后，我的 html 有这个：

```
<div id="tabbar">
            <ul id="tabs">

                <a href"#" onclick="changeTimeButton()">
                    <li id="timetable" class="time_b">
                        <p>Timetable</p>
                    </li>
                </a>

                <a href"#" onclick="changeHomeButton()">
                    <li id="homework" class="home_b">
                        <p>Homework</p>
                    </li>
                </a>

                <a href"#" onclick="changeNotiButton()">
                    <li id="notifications" class="noti_b">
                        <p>Notifications</p>
                    </li>
                </a>

                <a href"#" onclick="changeSportButton()">
                    <li id="sport"  class="sport_b">
                        <p>Sport</p>
                    </li>
                </a>

            </ul>

        </div> 
```

它工作一次然后什么也不做。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:19:02.780

我认为你的脚本中有错误，只是一个例子

```
document.getElementById("time").style.ClassName = 'timetable_r'; 
```

应该是（至少在您在此处发布的代码中，您的 html 中没有 ID 为“时间”的元素）

```
document.getElementById("timetable").style.ClassName = 'timetable_r'; 
```

另一件事，如果它工作一次，那么它似乎可以节省新会话或现有会话的一些问题。我不是javascript专家。但如果有帮助，请告知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:17:47.127

关闭背景颜色时，您需要删除任何现有的类，如下所示：

```
document.getElementById("timetable").className = 
document.getElementById("timetable").className.replace
( /(?:^|\s)time_b(?!\S)/ , '' ) 
```

由于您使用的是类而不是修改 javascript 中的样式，因此您应该坚持这一点。您似乎正在尝试在 javascript 中设置背景图像。相反，您应该将该背景图像应用于 CSS 中的类样式。

使用像 jQuery 这样的框架会更容易，因为它有一些辅助函数，比如 addClass()、toggleClass() 和 removeClass()。您还应该在“li”内设置“a”标签。在我看来，它使代码更简洁。浏览器仍会读取点击并能够正确应用类。

此外，您不必在代码中如此频繁地重复自己。一种解决方案是创建一个通用函数并将元素的 id 作为参数传入。然后，您使用“活动”类而不是“时间表_r”。活动类将应用于活动链接，您不必多次编写函数。希望这可以帮助。

# geometry - 倾斜相机时的地形图块比例

> ID：10071694
> 
> 赞同：0
> 
> 时间：2012-04-09T10:06:51.883
> 
> 标签：geometry, rendering, visualization, terrain

我现在正在研究 3d 地形可视化工具。表面在逻辑上被方形瓷砖覆盖。该平铺可以如下可视化：

![平铺的地球](../Images/ac5c70130d500edc1cf6333f5bfaa454.png)

假设我想在这些瓷砖上画一幅画。需要根据为每个图块单独计算的当前相机比例来选择图片的细节级别。

在垂直相机的情况下（没有倾斜，即相机垂直于地面），所有瓷砖都具有相同的比例，即相机焦距除以地面以上的相机高度。

下图描述了这种情况：

![没有倾斜的相机](../Images/d8d9ad5e0e091df7bdcefa9ab3c91060.png)

其中红色三角形是没有倾斜的相机，BG 是相机离地高度，EG 是焦距，那么 scale = AC/DF = BG/EG

但是，如果相机有倾斜（即俯仰角不为 0），那么比例会从瓷砖更改为瓷砖（甚至从点到点）。

![在此处输入图像描述](../Images/168e0d15ad46bd4b4dcdbadec8fc0ce3.png)

所以我想知道在这种情况下是否有任何方法可以为每个瓷砖产生合理的比例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:55:16.940

可能有（几乎肯定有）更直接的解决方案，但您可以做的是常规世界到屏幕坐标的转换。

您只需获取图块边界点的坐标并计算这些将投影到屏幕上的哪些像素（您当然可以获得浮点精度）。由此，我相信您可以计算出您提到的“规模”。

这适用于世界空间中的任何点或点集。

[这](http://paulbourke.net/miscellaneous/transform/)是有关如何“手动”执行此操作的教程。

如果您使用 OpenGL 或 DirectX 渲染图块，则可以更轻松地[完成此](http://www.gamedev.net/topic/426094-world-coordinates-to-screen-coordinates/)操作。

# c++ - C/C++ 多地图库

> ID：10071695
> 
> 赞同：2
> 
> 时间：2012-04-09T10:06:56.457
> 
> 标签：c++, c

我存储了 1.11 亿个键值对（一个键可以有多个值 - 最大 2/3），其键是 50 位整数，值是 32 位（最大）整数。现在，我的要求是：

1.  快速插入（键，值）对[允许重复]
2.  基于键快速检索值/值。

是否有任何 C/C++ 库可以解决这个问题（使用 MultiMap、B+ 树、B 树、R+ 树等）？我可以为此提供 5/6 GB 的主内存。欲了解更多信息：[我以前的帖子](https://stackoverflow.com/questions/10064422/java-on-memory-efficient-key-value-store)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:45:06.593

C 中的普通哈希表每个元素需要 50+32 (+14padding) + 32 +32 位。（+ 可能是 32 位对齐）。即每个元素 160（或 192）位：= 每个元素 20（或 24）字节。哈希表将花费您 111*20（或 111*24）MB 的内存。那是 2.2 GB 或 2.7 GB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:49:09.593

您的要求不包括任何订购集合的需要。使用哈希映射。如果您找不到现成的，那么创建一个并不是什么大挑战。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T11:10:56.510

因为“5/6 GB”实际上意味着 5 或 6 GB...

具有 50 位键和 32 位值的 111000000 个键/值对在存储为紧密打包（位）数组时将占用 (111000000 * (50+32))/(8*1024*1024*1024) = 1.05 GB 或内存。

你的内存是那个的 5 倍。

在 64 位系统上基于 10 级深度跳过列表的映射在最坏的情况下将占用 (111000000 * (64+32+10*16))/(8*1024*1024*1024) = 3.308 GB，您仍然会有超过千兆字节的 RAM 来处理堆管理开销。

所以我建议抓住任何可用的多图并尝试使用它——在我看来，你有足够的内存来处理你的情况，而无需使用任何额外的技巧。

- 编辑 -

> 其实我不懂C/C++

好吧，如果您不懂 C++，您希望如何使用包含 111000000 个键的映射？你必须做一些阅读。

标准库包括 std::multimap，boost 库中有几个类。Qt 4 包括基于跳过列表的 QMap。尝试使用其中任何一个。

# iphone - xcode UIWebView 加载器代码 HTML

> ID：10071696
> 
> 赞同：0
> 
> 时间：2012-04-09T10:06:58.390
> 
> 标签：iphone, xcode, ios5, uiwebview

我有一个关于在 web 视图中加载的问题：

我创建了一个 Json 文件来获取 Wordpress 表并运行良好，但在内容表中我只能在一行中获取纯 HTML 代码，所以如果我从 Web 视图发出请求以加载标准代码之类的内容，我看不到内容，但只有带有标签的纯代码：

```
[MyWeview loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:MyJsonClass.MyContentTeble ]]]; 
```

这个正常的代码可以工作，但不能编码 HTML，我会得到如下代码：

```
NSString *HTMLData = @"<iframe></iframe>";
[palinsesto loadHTMLString:HTMLData baseURL:nil]; 
```

但是我的代码 @"" 是从 MyJsonClass.MyContentTable

感谢帮助。

//------------------------------------------------ ---------------------//

谢谢你回答白色，但仍然无法正常工作，如果我尝试使用该代码：

```
[MyWebview loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:MyJsonClass.MyContentTeble ]]]; 
```

工作，但我看不到内容。

我尝试了您的代码并构建了良好的应用程序，但在触摸 UITable Cell 后崩溃。

认为我需要在应用程序中使用编码器来像 NormalWebBrowser 一样读取和编译简单的 HTML 代码，但从不`<html><body></body></html>`标记 T_T，因为我从 Mysql DB 上的 WordPress 表中获取纯代码和 tex。

还有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:35:12.380

您可以尝试以下方法：

```
[web loadHTMLString: @ "<html> <body> <iframe src = 'http://www.example.com', style = 'border-width: 0' width = '100% 'height = '480' frameborder = '0 'scrolling =' no '> </ iframe> </ body> </ html> "baseURL: nil];

- (BOOL) WebView: (UIWebView *) WebView shouldStartLoadWithRequest: (NSURLRequest *) request navigationType: (UIWebViewNavigationType) {navigationType
     if ([request.URL.absoluteString rangeOfString: @ "www.example.com"]. location! = NSNotFound) {
     NSLog (@"%@", [WebView stringByEvaluatingJavaScriptFromString: @ "document.body.innerText"]);
     return NO;
     }
     return YES;
} 
```

这是一个想法。

我希望你能帮忙

# ruby - Ruby：对字符串进行加密签名以确保真实性？

> ID：10071701
> 
> 赞同：2
> 
> 时间：2012-04-09T10:07:09.430
> 
> 标签：ruby, encryption, digital-signature, public-key-encryption

假设我有一个源服务器，它通过带有特定查询字符串参数的重定向行为需要向目标服务器提供详细信息。但是，我需要确保这些详细信息仅来自我的原始服务器。

我也不能确定目标服务器的完整性。或者具体来说，目标服务器可能会受到威胁，因此任何加密密钥都可能已被恶意方读取。

我想我可以使用某种形式的公钥/私钥对对查询字符串进行签名。源服务器使用私钥对字符串进行签名，目标服务器使用公钥验证它来自我的源服务器，并且消息没有被篡改。

我远离密码学专家或任何东西，所以我在这里所做的任何假设都可能是错误的，如果是，请纠正我:)

我基本上是在用一种（希望）简单的方法在 Ruby 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:27:05.520

可能，对查询数据（在您的情况下为重定向 URL）进行签名的最简单形式是使用[HMAC](http://en.wikipedia.org/wiki/HMAC)。在这种情况下，您的源服务器和目标服务器需要共享一个公用密钥 - HMAC 不是一种公钥/私钥加密形式，而是一种密钥散列形式。

您要查找的模块是[ruby​​-hmac](http://ruby-hmac.rubyforge.org/)，您的源服务器和目标服务器必须执行以下操作：

```
require 'hmac-md5'
HMAC::MD5.new("<your shared key>").update("<your URL to check>").hexdigest 
```

并在目的端比较源端 HMAC 计算的摘要是等价的：因此双方都进行相同的计算。HMAC 的十六进制摘要可以简单地通过附加查询参数从源传输到目标。

# javascript - 时间线图框架，Flotr 与 AmChart

> ID：10071704
> 
> 赞同：0
> 
> 时间：2012-04-09T10:07:13.960
> 
> 标签：javascript, charts, timeline, amcharts, flotr

我一直在比较许多图表框架，这两个是最后的竞争者。如果没有规范，就没有必要比较框架。因此，我将制定我的规范并希望得到一些回应，这对于那些对他们应该选择哪个框架有疑问的人来说是有价值的。

最终目标：股票图表就像谷歌财经 兴趣点 1\. 没有 Flash，用于移动设备兼容性 2\. 不收费（如果你有钱，HighCharts 很酷） 3\. 图表上的注释，用于标记事件 4\. 放大/缩小5\. 多个 Y 轴

你在哪里想？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:04:20.093

amCharts 支持所有提到的功能：

1) 它是基于 SVG/VML 的 2) 免费版与商业版相同，仅显示一个指向 amcharts 的小链接 3) 以下是事件示例：[http](http://amcharts.com/stock/events/) ://amcharts.com/stock/events/ 4) 放大, 支持缩小 5) 还支持多个 y 轴：http: [//amcharts.com/javascript/line-chart-with-multiple-value-axes/](http://amcharts.com/javascript/line-chart-with-multiple-value-axes/)

# ios - iOS 上的 Flash/AIR 舞台视频 - 有可能吗？表现如何？

> ID：10071706
> 
> 赞同：14
> 
> 时间：2012-04-09T10:07:17.573
> 
> 标签：ios, actionscript-3, flash, video, air

你们中的任何人都可以向我指出一些有关 iOS 设备上 AIR (3.2) 视频性能的资源。

我感兴趣：

*   StageVideo 是否可用
*   是否允许/启用视频流
*   高清视频的表现还可以吗？
*   是否允许播放 .flv？（在 android 上怎么样：flash 已经存在了）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T22:47:23.070

iOS 上只有 H264 有硬件解码。这意味着仅适用于 H264 的原生播放器的视频性能可比，而对于 Sorenson 和 VP6（即使在低分辨率下）解码缓慢（充其量）。

*“AIR 3 for iOS 将 StageVideo 对象用于具有硬件解码的 H.264 视频，对 NetStream 功能的支持有限。AIR 3 for iOS 还通过 StageVideo 对象支持 On2 和 Sorenson 编解码器。此支持不使用硬件解码，并且它不限制 NetStream 功能。”* **[flash.media.StageVideo](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageVideo.html)**

FLV 和 MP4 是封装格式。FLV 可以包含 VP6+MP3 或 H264+AAC（或其中任何一个单独使用）。MP4 可以包含 H264+AAC。文档没有说明 iOS 不支持 FLV。

但是，在 iOS 上，如果 FLV/H264 无法播放，则由于以下限制，您将无法即时将其重新混合为 MP4（否则您将丢失硬件解码）： *“注意：不支持此方法适用于 AIR 3.0 for iOS 中的 H.264 视频。”* **[flash.net.NetStream::appendBytes()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#appendBytes%28%29)**

没有任何关于 Sorenson 或 VP6 不支持即时 remuxing（因此它们应该是）的说法。

无论如何你都不应该需要 appendBytes，除非你打算做一些非常高级的事情，比如在播放过程中不中断地动态切换比特率。

实时流媒体需要类似于 appendBytes 所做的事情。由于需要 H264 硬件解码并且没有软件模式，因此您不会获得用于直播的 H264。

*“事实证明，H264 视频的实时流式传输无法在 Adob​​e Air 的 iOS 设备上呈现。其他视频编解码器可以工作 (H263)，但不适用于 H264。您将使用提要，但只会听到音频。在与 Adob​​e Air 开发团队的成员交谈后，我证实了这一点。”* 来自[Adob​​e 论坛](http://forums.adobe.com/message/4336274)

H264 解码在不同 Apple ARM CPU 上的表现在很大程度上取决于视频编码设置（B 帧或关键帧、比特率等）以及您是否拥有动态内容、静态内容、快速切换场景、分辨率、调色板等.

结论：使用FLV或MP4（哪个最适合你），里面有H264+AAC。尝试使用编码设置或您定位的大量视频（如果有）。确定哪个是您要定位的最低（最旧）iOS 设备，并在其上进行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T15:31:05.133

我不知道性能如何叠加，但 NetStream 的 Actionscript 文档有一些关于使用 NetStream/Video 在 iOS 设备上的 AIR 上播放视频的信息：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#play%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#play%28%29)

使用 AIR 3 的 iOS 上的 H.264 视频支持 StageVideo：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageVideo.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageVideo.html)

要点是 iOS 设备支持 StageVideo 和有限的流媒体功能，只要您的视频使用 iOS 所需的流媒体格式。

# c++ - WinAPI 找出当前正在挂接或打开套接字的进程

> ID：10071714
> 
> 赞同：0
> 
> 时间：2012-04-09T10:08:01.417
> 
> 标签：c++, c, winapi

**是否有一个 win32 函数/方法来确定哪些进程/服务/应用程序当前有钩子（键盘、鼠标、全局键盘等）？**

还有一种方法可以知道进程/服务/应用程序是否正在上传/下载数据？也许它涉及检测应用程序是否有打开的套接字？

我正在尝试创建自己的简单计算机状态应用程序。它将列出当前正在做什么的所有应用程序/进程。它是我打算制作的更大项目的一部分 - 一个简单的防病毒应用程序。

# c# - 从 xml 文件中提取命名空间

> ID：10071715
> 
> 赞同：0
> 
> 时间：2012-04-09T10:08:01.860
> 
> 标签：c#, xml, linq-to-xml, xmlreader

我正在处理 C# 中的 XML 文件。

我想提取名称空间并进行一些操作。

说我的 xml 文件看起来像这样。

```
 <Content xmlns="http://ABCD.com/sdltridion/schemas/XXXXX">
            <first>ABCD</first>
            <second>DCEF</second>
        </Content> 
```

我想从根标签中提取 Xml 命名空间，然后获取 XXXXX 的值。

需要输出：XXXXX

任何人都可以帮助解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:25:18.167

尝试这个：

```
var xdoc = XDocument.Parse(xml);
var ns = xdoc.Root.Name.Namespace.NamespaceName;
var value = new Uri(ns).Segments.LastOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:28:31.703

你可以试试 XNamespace 类

```
 XNamespace ns = XNamespace.Get("http://ABCD.com/sdltridion/schemas/XXXXX");
 var result = XElement.Load("URL").Descendants(ns + "NODENAME"); 
```

谢谢

迪普

# firefox - 在 Firefox 扩展中使用相对路径

> ID：10071716
> 
> 赞同：3
> 
> 时间：2012-04-09T10:08:04.447
> 
> 标签：firefox, firefox-addon

我使用捆绑的可执行文件开发 Firefox 扩展，该文件应该在浏览器启动时运行。

要运行进程，我需要获取指向可执行文件的 nsIFile 或 nsILocalFile 实例。我知道一种解决方案如何使用目录服务来获取它：

```
var file = Components.classes["@mozilla.org/file/directory_service;1"].getService(Components.interfaces.nsIProperties).get("ProfD", Components.interfaces.nsIFile);
file.append("extensions");
file.append("<extension id>");
file.append("<relative path>"); 
```

但是这个解决方案有两个缺点：

1.  它在开发模式下不起作用，当我没有安装扩展时，我只有具有真实扩展路径的文本文件

2.  由于路径的硬编码“扩展”部分，我不确定它是否适用于所有 Firefox 配置

那么有没有更好的方法来运行 Firefox 扩展附带的可执行文件？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T08:32:33.120

您对 Firefox 配置文件的目录结构做出了太多假设 - 不要。[Add-on Manager API](https://developer.mozilla.org/en/Addons/Add-on_Manager/AddonManager)允许您获取扩展内文件的路径，您应该使用它：

```
Components.utils.import("resource://gre/modules/AddonManager.jsm");

AddonManager.getAddonByID("<extension id>", function(addon)
{
  var uri = addon.getResourceURI("<relative path>");
  var file = uri.QueryInterface(Components.interfaces.nsIFileURL).file;
  ...
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T14:45:08.270

无重启插件的`startup`函数（在`bootstrap.js`文件中）将接收插件的安装路径作为其第一个参数。然后，您可以使用各种技巧来读取文件中的`.jar`文件（如果有）：请参阅[https://github.com/protz/GMail-Conversation-View/blob/master/bootstrap.js#L55](https://github.com/protz/GMail-Conversation-View/blob/master/bootstrap.js#L55)作为示例。

在一个非重启的情况下，我必须承认我没有太多的想法:)。

# android - Facebook Single Sign On 注册或登录服务器（Android 和 Ios）

> ID：10071720
> 
> 赞同：0
> 
> 时间：2012-04-09T10:08:17.240
> 
> 标签：android, ios, facebook, single-sign-on, facebook-access-token

我们正在实施一个项目，用户在该项目中发布并从服务器获取一些信息。场景是用户可以手动创建帐户/登录（提供电子邮件和密码），也可以使用 SSO 使用 Facebook 凭据。我主要实现 Android 部分，但我的问题很笼统。

1.  假设我有一个调用 SSO 的按钮，提示用户提供他的凭据。那么为了创建帐户我应该向服务器发送什么？获取用户的 FB 电子邮件并将我收到的 Access Token 设置为密码？每个 FB 帐户的访问令牌是否唯一且永久，这意味着每次我使用相同的 FB 凭据时，我都会获得相同的访问令牌？

2.  在服务器端是否需要做任何额外的工作？或者服务器是否可以像处理其他用户一样处理使用其 FB 帐户的用户？

每一个澄清都会非常有帮助。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:46:48.873

令牌有一个过期时间戳，我想最简单的方法是使用数据生成用户帐户 fb 将发送给您并将 fb 令牌和过期日期存储为用户属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:43:59.990

你在使用 Facebook Android SDK 吗？如果是这样，手动登录（使用用户电子邮件/密码）和 SSO（通过 Android Facebook 应用程序）非常相似，特别是在令牌处理方面。

例如，如果您查看 SDK 中的示例（位于 sdk\examples\simple\src\com\facebook\android），您将看到代码执行以下操作（在三个文件之间拆分）。

```
private static final String TOKEN = "access_token";
private static final String EXPIRES = "expires_in";
private static final String KEY = "facebook-session";
Facebook session = new Facebook(APP_ID);
SharedPreferences savedSession = context.getSharedPreferences(KEY, Context.MODE_PRIVATE);
session.setAccessToken(savedSession.getString(TOKEN, null));
session.setAccessExpires(savedSession.getLong(EXPIRES, 0));
if (session.isSessionValid()) {
    session.authorize(mActivity, mPermissions, new LoginDialogListener());
} 
```

因此，您必须在每次成功登录后将会话令牌保存在 SharedPreferences 中（在示例中也是如此），但`authorize()`手动登录和 SSO 登录的令牌处理和登录 ( ) 是相同的（取决于 activityCode 参数）。

# javascript - 如何使用 javascript 在 Webkit 控制台中执行数据？

> ID：10071723
> 
> 赞同：0
> 
> 时间：2012-04-09T10:08:39.807
> 
> 标签：javascript, webkit, console, copy-paste

我需要`copy()`为我的网站使用该功能，我发现它可以在 Webkit 浏览器的控制台中使用，但不能在我的页面的标记中使用。所以我想问的是，如何编写一些 javascript 代码来触发 Webkit 控制台中的代码执行？

谢谢，

卢卡斯

注意请评论我的问题中的任何误解或含糊之处。我会努力改进的。

PS我`copy()`从这里得到了这个想法：[在Chrome和Firefox中秘密复制到剪贴板Javascript函数？](https://stackoverflow.com/questions/4559180/secret-copy-to-clipboard-javascript-function-in-chrome-and-firefox)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:28:18.223

由于安全原因，您无法从 javascript 访问剪贴板。你可以使用闪光灯。请参阅此问题的答案：

[如何在 JavaScript 中复制到剪贴板？](https://stackoverflow.com/questions/400212/how-to-copy-to-the-clipboard-in-javascript)

# windows-phone-7 - 使用 C# 访问网站

> ID：10071729
> 
> 赞同：0
> 
> 时间：2012-04-09T10:08:59.807
> 
> 标签：windows-phone-7, c#-4.0

我正在尝试为 windows phone 7 制作一个应用程序。这个应用程序基本上会从我们在工作中用作工作日程的网站检索信息，然后将检索到的信息重新排列到 Metro 风格的 UI 中。老实说，我不知道从哪里开始，即。如何检索信息。我应该使用 webclient 类吗？httpwebrequest 类？或者是其他东西？

所有的想法都被应用了

这里有一个：-![图。 我尝试访问的网站](../Images/c5841fb7e64cba8b8faa245892dc3226.png)

更新：-

好吧，要么我完全愚蠢，要么我正在编写的代码有问题，我无法弄清楚。我使用的代码与您编写的代码相同，但我仍然收到一个错误，即 Proxy 的定义不在 System.Net.WebRequest 中：（这是我的代码（工作版本）：-

```
 private void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        if (!App.ViewModel.IsDataLoaded)
        {
            App.ViewModel.LoadData();
        }
        string url = "https://medinet.se/*****/schema/ibsef";
        WebRequest request = WebRequest.Create(url);
        request.BeginGetResponse(new AsyncCallback(ReadWebRequestCallBack), request);
    }

    private void ReadWebRequestCallBack(IAsyncResult callbackResult)
    {
        try
        {
            WebRequest myRequest = (WebRequest)callbackResult.AsyncState;
            WebResponse myResponse = (WebResponse)myRequest.EndGetResponse(callbackResult);

            using (StreamReader httpwebStreamReader = new StreamReader(myResponse.GetResponseStream()))
            {
                string results = httpwebStreamReader.ReadToEnd();
                Dispatcher.BeginInvoke(() => parsertextBlock.Text = results);
            }
            myResponse.Close();
        }
        catch (Exception ex)
        {
            System.Diagnostics.Debug.WriteLine(ex.ToString());
            Dispatcher.BeginInvoke(() => parsertextBlock.Text = ex.ToString());
        }
    } 
```

但是如果我添加 request.Proxy=null ！！我收到一个错误，即（System.Net.WebRequest）中没有代理的定义。老实说，我开始对此感到生气。

你的

/奥马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:31:26.967

该过程称为 ScreenScrape，我建议您使用 Html Agility Pack [http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)。制作一个 Web 服务，从您的网站检索信息并重新排列为适当的格式。通过电话使用您的网络服务并显示您的数据。

使用 WebRequest ( [http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx) ) 和 WebResponse ( [http://msdn.microsoft.com/en-us/library/system.net。网络响应（v=vs.100）.aspx](http://msdn.microsoft.com/en-us/library/system.net.webresponse(v=vs.100).aspx)）。

提示：将 WebRequest.Proxy 属性 ( [http://msdn.microsoft.com/en-us/library/system.net.webrequest.proxy.aspx](http://msdn.microsoft.com/en-us/library/system.net.webrequest.proxy.aspx) ) 设置为 null，因为我发现它会快得多。

**更新：**有关 WebRequest 代理属性的更多信息

在 WebRequest 对象上设置`Proxy = null`以避免初始延迟（这样请求就不会开始自动检测代理，我发现它更快）。

```
WebRequest req = WebRequest.Create("yourURL");
req.Proxy = null; 
```

它在 System.Net 命名空间中，所以放置一个 using 语句`using System.Net;`或

```
System.Net.WebRequest req = WebRequest.Create("yourURL");
req.Proxy = null; 
```

问候。

# monitoring - 请为托管在云中的应用程序推荐一个好的监控和警报工具

> ID：10071735
> 
> 赞同：1
> 
> 时间：2012-04-09T10:09:22.530
> 
> 标签：monitoring, zabbix

我正在为托管在云中的应用程序寻找监控和警报工具。我的应用程序托管在多个服务器上，我想监控所有这些服务器。我有兴趣监视以下内容：

**1、服务监控：**

*   检查服务是否启动。这需要
    *   尝试注册一个新用户
    *   使用给定的用户名/密码登录应用程序并执行某些步骤，如搜索等。
*   监控服务质量。搜索和其他一些操作需要多少时间

**2.资源监控** 监控每台服务器的以下参数：

*   CPU 利用率
*   平均负载
*   内存使用情况
*   磁盘使用情况
*   IOPS

**3.过程监控**

监视一组进程是否正在运行。如果没有运行，请尝试重新启动它们。例如：php-fpm、我的应用程序二进制文件、mysql、nginx、smtp 等。

**4.监控日志文件**

*   我的应用程序的错误日志
*   mysql错误日志
*   MySQL慢查询日志等。

此外，我应该能够通过执行 shell 命令或编写自己的 shell 脚本来扩展它的用途。

如果发现任何受监控的项目有问题，我应该能够设置警报。我应该能够通过

*   电子邮件
*   手机短信

监控系统应该在我想要的时间段内保持历史记录。因此，在收到警报后，我应该能够登录系统并查看过去的数据（比如过去 2 周）并调查问题。

**最重要的：**

该工具应该有一个很好的方法来管理自己的配置。

*   配置不应分散在多个地方。所有配置都应该存储在一个集中的地方。将来说，受监视的日志文件的路径已更改。我想在我的配置中搜索并替换该文件的所有出现。
*   我应该能够对我的配置进行版本控制。
*   我不想去网络界面手动设置配置，我想设置一个脚本来自动加载所有配置并开始监控。

我正在探索 Zabbix，但没有看到令人满意的配置管理方式。我应该尝试 Nagios 吗？还有什么工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:33:36.427

您可能感兴趣的 2 个较新的云类型监控解决方案是[http://logicmonitor.com/](http://logicmonitor.com/)和[http://copperegg.com/](http://copperegg.com/)。

LogicMonitor 有许多开箱即用的要求，因为它对您自己的警报进行了一些自定义。

CopperEgg / RevealCloud 是更基础的系统级监控（CPU、内存、磁盘和网络吞吐量）。它有一个漂亮的抛光界面，比 LogicMonitor 简单得多。但仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:54:35.313

好吧，考虑到你已经用 Zabbix 标记了这个，我假设你正在考虑这是一个选项。

我们使用 Zabbix 来监控 Amazon EC2 实例以及我们私有 openstack 云中的实例。真的就像“apt-get install zabbix-agent”一样简单。

Zabbix 在监控我们的 openstack 私有云时特别有用。我们让服务器扫描一个 IP 范围，并仅根据找到的机器的主机名自动设置检查、警报等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T10:11:48.323

Nagios 是一种标准的监控方式，可以支持您提出的所有用例（另外，可能已经为所有这些用例编写了插件）。

# c# - 更改页面时如何填充 datagridview 中的某些列？C＃

> ID：10071736
> 
> 赞同：0
> 
> 时间：2012-04-09T10:09:24.303
> 
> 标签：c#, asp.net

我在页面加载中有一个 gridview 我使用 checkfunction 更改了按钮的一些图像但是，当我更改页面的索引时。页面加载不要在程序中调用我尝试了 GridView1_PageIndexChanging, GridView1_SelectedIndexChanged,GridView1_PageIndexChanged 事件

在页面加载的代码中，我在事件中复制了它，但它不起作用

```
 DBConnection db = new DBConnection();

        for (int i = 0; i < GridView1.Rows.Count; i++)
        {
            GridViewRow gvrow = GridView1.Rows[i];
            ImageButton ib = (ImageButton)gvrow.Controls[1].Controls[0];

            string feedUrl = ((HiddenField)GridView1.Rows[i].FindControl("HiddenField1")).Value;

            bool res = db.CheckAddedFeeds(feedUrl, User_Name);
            if (res)
            {
                ib.ImageUrl = "~/images/delete.png";
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:46:56.400

首先，您需要创建一个用于绑定 gridview 的函数，如下所示

```
private void BindGridView()
{ 
        // place your bind grid code here..
    DBConnection db = new DBConnection();

    for (int i = 0; i < GridView1.Rows.Count; i++)
    {
        GridViewRow gvrow = GridView1.Rows[i];
        ImageButton ib = (ImageButton)gvrow.Controls[1].Controls[0];

        string feedUrl = ((HiddenField)GridView1.Rows[i].FindControl("HiddenField1")).Value;

        bool res = db.CheckAddedFeeds(feedUrl, User_Name);
        if (res)
        {
            ib.ImageUrl = "~/images/delete.png";
        }

    }

} 
```

在页面加载后面的顶点代码中调用此函数

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        BindGridView();
    }

} 
```

在后面的代码中处理分页事件，如下所示

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    BindGridView();
} 
```

希望对你有帮助...

# android - 在 mapview Android 中显示错误

> ID：10071740
> 
> 赞同：0
> 
> 时间：2012-04-09T10:09:47.027
> 
> 标签：android

我想在地图视图中显示三个针点，我已经检查了模拟器中的互联网连接，甚至我使用了显示地图视图的密钥，但它显示错误无法获取连接工厂客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:15:50.817

在您的 Android 应用程序中显示地图的基本信息。

```
1\. Your application build platform is Google-Api not Android-Api.

2\. put <uses-library android:name="com.google.android.maps" /> in Application tag in
   Android manifest file.

3\. Your mapview activity must extend MapActivity.

4\. You have a your system specific map-key for debug version of application. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:19:32.503

尝试添加这两个权限。

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

这可能是因为 Map 正在放大它。你可以参考这个[LINK](https://stackoverflow.com/questions/2199403/couldnt-get-connection-factory-client)。

# django - 使用 Django 表单集插入或更新数据

> ID：10071742
> 
> 赞同：1
> 
> 时间：2012-04-09T10:10:03.313
> 
> 标签：django, django-forms

我不清楚如何在 Django 中管理表单集。这是我的views.py：

```
def newAd(request):
    newAdFormSet = modelformset_factory(Ad)
    if request.method == 'POST':
        formset = newAdFormSet(request.POST, request.FILES)
        if formset.is_valid():
            formset.save()
            return render_to_response('conf.html',
                                     {'state':'Your ad has been successfull created.'},
                                     context_instance = RequestContext(request),)
    else:
        formset = newAdFormSet()
    return render_to_response('ad_form.html',
                             {'form':formset},
                             context_instance=RequestContext(request),) 
```

它可以工作，但它总是为每个现有的元组返回一个预填充的表单，最后加上一个空白表单。现在，我不知道它必须在哪里返回一个空白表单（以执行新的插入），以及它必须在哪里返回一个预填充的表单（可能传递广告的 id）以执行更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T14:28:07.517

modelformset_factory 和 formset 有助于解决很多问题，以您的代码为例

```
def newAd(request):
    newAdFormSet = modelformset_factory(Ad, extra=1)
    if request.method == 'POST':
        formset = newAdFormSet(request.POST, request.FILES)
        if formset.is_valid():
            formset.save()
            return render_to_response('conf.html',
                                     {'state':'Your ad has been successfull created.'},
                                     context_instance = RequestContext(request),)
    else:
        formset = newAdFormSet(queryset=Ad.objects.all())
    return render_to_response('ad_form.html',
                             {'form':formset},
                             context_instance=RequestContext(request),) 
```

注意`extra=1`modelformset_factory 行，它确保只有一个额外的空白表单。`queryset=Ad.objects.all()`在 else 语句中的第二个 newAdFormSet 中，它从 DB 中为 Ad 对象预填充表单，并在后端代码（大部分是隐藏的）字段中正确设置 PK 以识别提交的对象。

*更新*

如果你想设置`Ad().codU`指向一个`User()`实例，例如 request.user，你可以简单地设置它

```
instances = formset.save(commit=False)
for obj in instances:
    obj.codU = request.user
    obj.save() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:11:49.010

我仍然不是 100% 清楚你的问题是什么，但听起来你根本不想要一个表单集。如果您只对一次添加或更新一条记录感兴趣，那么您需要一个简单的`ModelForm`，而不是表单集。所以：

```
class AdForm(forms.ModelForm):
    class Meta:
        model = Ad

def add_update_ad(request, pk=None):
    if pk is not None:
        instance = Ad.objects.get(pk=pk)
    else:
        instance = Ad()

    if request.POST:
        form = AdForm(request.POST, instance=instance)
        if form.is_valid():
            new_instance = form.save()
            return HttpResponseRedirect('my_confirmation_view')
    else:
        form = AdForm(instance=instance)
    return render(request, 'ad_form.html', {'form': form}) 
```

# c# - 高性能锁定模式

> ID：10071744
> 
> 赞同：1
> 
> 时间：2012-04-09T10:10:22.650
> 
> 标签：c#, .net, multithreading, locking, task-parallel-library

我正在处理下面的代码，并试图让它尽可能快。

基本上，每次在系统中触发事件时都会调用 execute 方法。我正在测试的是查看自上次执行减少以来是否已经过去了 x 分钟。如果 x 分钟过去了，那么我们应该执行任务。

由于事件可以从任何线程触发并且发生得非常快，所以我认为在锁之外触发任务（即使它是一个任务）会比在锁中更好。

有人对如何改进有任何反馈吗？

```
public class TriggerReduce
{ 
    private readonly object _lock = new object();
    private readonly int _autoReduceInterval = 5;
    private DateTime _lastTriggered;

    public void Execute(object sender, EventArgs e)
    {
        var currentTime = DateTime.Now;
        if (currentTime.Subtract(_lastTriggered).Duration().TotalMinutes > _autoReduceInterval)
        {
            var shouldRun = false;
            lock (_lock)
            {
                if (currentTime.Subtract(_lastTriggered).Duration().TotalMinutes > _autoReduceInterval)
                {
                    _lastTriggered = currentTime;
                    shouldRun = true;
                }
            }

            if (shouldRun)
            {
                Task.Factory.StartNew(() =>
                {
                    //Trigger reduce which is a long running task
                }, TaskCreationOptions.LongRunning);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:22:58.580

哦，我不会那样做的！将“if (currentTime”和“shouldRun”内容放回锁内。

不要在锁外更改/检查状态 - 它肯定会搞砸。

在这种情况下，刚刚将 'shouldRun' 设置为 true 的线程可能会被另一个进入并再次将 'shouldRun' 设置为 false 的线程逆转其决定，然后才会卡在锁上。然后第一个线程不会到达“StartNew”，后面的线程也不会，因为第一个线程将 _lastTriggered 设置为当前时间。

OTOH :) 因为“shouldRun”是一个自动变量而不是一个字段，所以它不是状态。只有一个线程可以进入锁，仔细检查间隔并更新_lastTriggered时间。

我不喜欢这种双重检查，但目前不明白为什么它不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:26:39.213

避免锁定并改用[Interlocked.Exchange](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.exchange.aspx)会有所帮助吗？

例如

```
private long _lastTriggeredTicks;

private DateTime lastTriggered
{
    get 
    { 
        var l = Interlocked.Read( ref _lastTriggeredTicks );
        return new DateTime( l );
    }
    set
    {
        Interlocked.Exchange( ref _lastTriggeredTicks, value );
    }
} 
```

据我了解[`Interlocked`，这比`lock`](http://kenegozi.com/blog/2010/01/01/interlocked-dot-increment-vs-dot--lock-ndash-surprise-surprise)陈述要快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T10:27:45.597

```
public class TriggerReduce //StartNew is fast and returns fast
{

    private readonly object _lock = new object();
    private readonly int _triggerIntervalMins = 5;

    private DateTime _nextTriggerAt = DateTime.MinValue;
    private bool inTrigger = false;

    public void Execute(object sender, EventArgs e)
    {
        lock (_lock)
        {
            var currentTime = DateTime.Now;
            if (_nextTriggerAt > currentTime)
                return;

            _nextTriggerAt = currentTime.AddMinutes(_triggerIntervalMins);//runs X mins after last task started running (or longer if task took longer than X mins)
        }

        Task.Factory.StartNew(() =>
        {
            //Trigger reduce which is a long running task
        }, TaskCreationOptions.LongRunning);
    }
}

public class TriggerReduce//startNew is a long running function that you want to wait before you recalculate next execution time
{

    private readonly object _lock = new object();
    private readonly int _triggerIntervalMins = 5;

    private DateTime _nextTriggerAt = DateTime.MinValue;
    private bool inTrigger = false;

    public void Execute(object sender, EventArgs e)
    {
        var currentTime;
        lock (_lock)
        {
            currentTime = DateTime.Now;
            if (inTrigger || (_nextTriggerAt > currentTime))
                return;

            inTrigger = true;
        }
        Task.Factory.StartNew(() =>
        {
            //Trigger reduce which is a long running task
        }, TaskCreationOptions.LongRunning);

        lock (_lock)
        {
            inTrigger = false;
            _nextTriggerAt = DateTime.Now.AddMinutes(_triggerIntervalMins);//runs X mins after task finishes
            //_nextTriggerAt = currentTime.AddMinutes(_triggerIntervalMins);//runs X mins after last task started running (or longer if task took longer than X mins)
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T13:16:55.100

我认为您已经有了一个相当合理的方法。最大的问题是您`_lastTriggered`在锁之外访问。双重检查锁定习语在这里不起作用。只需您的代码，使其看起来像这样。

```
public void Execute(object sender, EventArgs e)
{
    var currentTime = DateTime.Now;
    var shouldRun = false;
    lock (_lock)
    {
        TimeSpan span = currentTime - _lastTriggeed;
        if (span.TotalMinutes > _autoReduceInterval)
        {
            _lastTriggered = currentTime;
            shouldRun = true;
        }
    }

    if (shouldRun)
    {
        Task.Factory.StartNew(() =>
        {
            //Trigger reduce which is a long running task
        }, TaskCreationOptions.LongRunning);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T10:21:02.077

使用 Monitor.TryEnter。

```
if (Monitor.TryEnter(_lock))
{
    try
    {
        if (currentTime.Subtract(_lastTriggered).Duration().TotalMinutes >
            _autoReduceInterval)
        {
            _lastTriggered = currentTime;
            shouldRun = true;
        } 
    }
    finally
    {
        Monitor.Exit(_lock);
    }
} 
```

# xml - 具有数组集合的 Flex 树控件

> ID：10071748
> 
> 赞同：0
> 
> 时间：2012-04-09T10:10:38.017
> 
> 标签：xml, apache-flex, tree, arraycollection

我已经为此苦苦挣扎了好几个小时！我真的需要帮助

我试图用通过 arraycollection 引入的外部 xml 文件填充树控件，但我需要将 xml 数据分组以显示在树中

好的，我的外部 xml 文件称为parts.xml，它看起来像这样：

```
<NewDataSet>
    <Parts>
        <PartGroup>51 Series</PartGroup>
        <PartType>20051</PartType>
        <PartNumber>20051-3</PartNumber>
        <PartDesc>Reusable Socket-51 SER</PartDesc>
        <PartImageFile />
    </Parts>
    <Parts>
        <PartGroup>51 Series</PartGroup>
        <PartType>20051</PartType>
        <PartNumber>20051-4</PartNumber>
        <PartDesc>Reusable Socket-51 SER</PartDesc>
        <PartImageFile />
    </Parts>
    <Parts>
        <PartGroup>51 Series</PartGroup>
        <PartType>20151</PartType>
        <PartNumber>20151-12-12</PartNumber>
        <PartDesc>Penis</PartDesc>
        <PartImageFile>20151-vi copy.jpg</PartImageFile>
    </Parts>
    <Parts>
        <PartGroup>90 Series</PartGroup>
        <PartType>090</PartType>
        <PartNumber>090-20B</PartNumber>
        <PartDesc>Replace Ferrule-90 SER</PartDesc>
        <PartImageFile>090 copy.jpg</PartImageFile>
    </Parts>
    <Parts>
        <PartGroup>90 Series</PartGroup>
        <PartType>090</PartType>
        <PartNumber>090-4B</PartNumber>
        <PartDesc>Replace Ferrule-90 SER</PartDesc>
        <PartImageFile>090 copy.jpg</PartImageFile>
    </Parts>
    <Parts>
        <PartGroup>90 Series</PartGroup>
        <PartType>20090</PartType>
        <PartNumber>20090-12</PartNumber>
        <PartDesc>Replacement Socket-FA</PartDesc>
        <PartImageFile>20090-vi copy.jpg</PartImageFile>
    </Parts>
    <Parts>
        <PartGroup>90 Series</PartGroup>
        <PartType>20090</PartType>
        <PartNumber>20090-12C</PartNumber>
        <PartDesc>Replacement Socket-FA, SS</PartDesc>
        <PartImageFile>20090-vi copy.jpg</PartImageFile>
    </Parts>
</NewDataSet> 
```

这只是一个示例（实际的 xml 长度为 7591 行）..

接下来我使用

```
<mx:HTTPService id="getPartsXml" url="assets/db/Parts_DB.xml" result="partsDB=getPFDXml.lastResult.NewDataSet.Parts"/> 
```

将 xml 转换为 flex。partsDB 是一个绑定到树控件的数组集合。

我遇到的问题是让树以我需要的方式显示数据而不会丢失任何其他数据。

我的意思是，从上面的 xml 我需要树像这样显示

```
+-51 series
|  +->20051
|  |  |->20051-3
|  |  |->20051-4
|  |
|  +->20151
|     |->20151-12-12
|
+-90 Series
   +->090
   |  |->090-20B
   |  |->090-4B
   |
   +->20090
      |->20090-12
      |->20090-12C 
```

另外我打算让用户拥有巨大的零件树，他们在零件编号级别选择一个节点并将其拖放到数据网格上，其中显示零件的所有其他标签。

我尝试并尝试了很多事情，但没有任何运气。即使现在我在想，如果我循环遍历数组集合并为树创建一个新数组以使其以我需要的方式显示，那么当用户将一个部分拖放到网格上时，我会有代码将在原始数组集合中查找该零件号并将其添加到仅用于数据网格的新数组中...我仍然不知道如何为树创建该新数组！导致 xml 数据按 partgroup 分组，然后再按 parttype 分组，然后再获得各个零件编号:(

我希望这是有道理的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:27:43.200

您有 2 个组件。第一个（树）没有正确显示数据：

1.  树需要分层数据。您的 XML 数据是平面的（但在数组集合中）。将其与[GroupingCollection2 分组](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/GroupingCollection2.html)。
2.  [或者使用 AdvancedDataGrid 来模拟这样](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7beb.html)的树形控件。

至于数据网格，您最有可能让它与自己的集合一起工作，但从您的第一个组件的集合中提供对象：

1.  从 1 到 2 双击/拖放会导致插入 2 的集合（检查它是否已经存在）
2.  您可能还需要包括一种从 2 中删除的方法，否则您将拥有一个始终填充且永远不会清除的组件。

# javascript - 打开帐户窗口时显示特定页面

> ID：10071750
> 
> 赞同：1
> 
> 时间：2012-04-09T10:10:51.883
> 
> 标签：javascript, dynamics-crm, dynamics-crm-2011

继我之前的 Dynamics CRM 问题之后（[如果帐户有相关实体记录，则显示弹出窗口/警报](https://stackoverflow.com/questions/10027404/show-popup-alert-if-account-has-related-entity-records)）

在 Account 表单的 OnLoad 事件中，我想将窗口设置为打开，并在右侧框架中加载特定的子导航项。

例如，默认情况下，当您打开“帐户”窗口时，它会加载帐户详细信息。左侧列出了各种相关项目。我有一个名为 Alert 的自定义相关实体。如果在我的 javascript 中满足特定条件，我希望将警报实体视图加载到右侧视图而不是帐户详细信息中。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:36:22.587

通过使用解决了它`Xrm.Page.ui.navigation.items.get("navItemName").setFocus();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T03:01:59.310

I can suggest three approaches

Approach 1 1\. add a tab>section>subgrid to show that associated view 2\. use form.onload javascript to show/hide that tab depending on criteria

Approach 2 (probably unsupported) 1\. use form.onload javascript to .click() the navigation link [you can take the associated entity name in webresource function parameters to make this a generic library]

Approach 3 Have you considered [custom forms in CRM 2011](http://www.resultondemand.nl/support/blog/post/Microsoft-CRM-2011-Multiple-Forms-basics.aspx)?

# visual-studio - 是否有理由不在您的解决方案中包含 Nant 文件？

> ID：10071755
> 
> 赞同：1
> 
> 时间：2012-04-09T10:11:38.637
> 
> 标签：visual-studio, visual-studio-2010, nant, projects-and-solutions

我目前正在处理的项目使用 Nant 构建脚本来构建持续集成服务器。构建文件存储在存储库的文件夹中。

当我需要进行更改时，我发现不得不通过 Windows 资源管理器浏览它而不是从 Visual Studio 解决方案中获得它，这很烦人。

我想知道是否有任何理由不将其包含在解决方案中以方便访问？如果这不是愚蠢的，您会将其存储在解决方案中的哪个位置？你会创建一个虚拟的非建筑项目来持有这些类型的资源吗？

谢谢，尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:14:18.507

继续并将其添加到您的解决方案文件中。

您将获得或必须手动为其创建一个文件夹，但我认为当您添加它时，您将获得一个名为 Solution Items 的文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:14:37.977

据我所见，没有真正的理由不将它们与您的项目解决方案一起使用。在一个项目中，由于有很多构建文件，因此为它们创建单独的解决方案是有意义的。

# ios - 是否有将 UIColor 转换为色相饱和度亮度的功能？

> ID：10071756
> 
> 赞同：24
> 
> 时间：2012-04-09T10:11:41.043
> 
> 标签：ios, uicolor, hsb

我可以用 RGB 值设置 uicolor：

```
[UIColor colorWithRed:0.53 green:0.37 blue:0.11 alpha:1.00]; 
```

我可以用 hsb 值设置 uicolor：

```
[UIColor colorWithHue:0.10 saturation:0.16 brightness:0.13 alpha:1.00]; 
```

我也可以将其转换回 RGB：

```
CGFloat* colors = CGColorGetComponents(Color1.CGColor); 
```

但是我如何从 uicolor 获得 HSB？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-09T11:06:27.803

使用`UIColor`方法： `getHue:saturation:brightness:alpha:`

来自 Apple 文档：
“返回构成 HSB 颜色空间中颜色的组件。”

```
- (BOOL)getHue:(CGFloat *)hue saturation:(CGFloat *)saturation brightness:(CGFloat *)brightness alpha:(CGFloat *)alpha 
```

例子：

```
UIColor *testColor = [UIColor colorWithRed:0.53 green:0.37 blue:0.11 alpha:1.00];

CGFloat hue;
CGFloat saturation;
CGFloat brightness;
CGFloat alpha;
BOOL success = [testColor getHue:&hue saturation:&saturation brightness:&brightness alpha:&alpha];
NSLog(@"success: %i hue: %0.2f, saturation: %0.2f, brightness: %0.2f, alpha: %0.2f", success, hue, saturation, brightness, alpha); 
```

NSLog 输出：

> 成功：1 色调：0.10，饱和度：0.79，亮度：0.53，alpha：1.00

这是@WhiteTiger 提供的方法的更正版本：

```
// Test values
CGFloat red = 0.53;
CGFloat green = 0.37;
CGFloat blue = 0.11;

CGFloat hue = 0;
CGFloat saturation = 0;
CGFloat brightness = 0;

CGFloat minRGB = MIN(red, MIN(green,blue));
CGFloat maxRGB = MAX(red, MAX(green,blue));

if (minRGB==maxRGB) {
    hue = 0;
    saturation = 0;
    brightness = minRGB;
} else {
    CGFloat d = (red==minRGB) ? green-blue : ((blue==minRGB) ? red-green : blue-red);
    CGFloat h = (red==minRGB) ? 3 : ((blue==minRGB) ? 1 : 5);
    hue = (h - d/(maxRGB - minRGB)) / 6.0;
    saturation = (maxRGB - minRGB)/maxRGB;
    brightness = maxRGB;
}
NSLog(@"hue: %0.2f, saturation: %0.2f, value: %0.2f", hue, saturation, brightness); 
```

NSLog 输出：

> 色调：0.10，饱和度：0.79，值：0.53

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-06-08T15:37:08.930

这是使用 Swift 特性（扩展、计算属性和元组）在几行代码中完成相同事情的好方法。

```
extension UIColor {
  var hsba: (h: CGFloat, s: CGFloat, b: CGFloat, a: CGFloat) {
    var hsba: (h: CGFloat, s: CGFloat, b: CGFloat, a: CGFloat) = (0, 0, 0, 0)
    self.getHue(&(hsba.h), saturation: &(hsba.s), brightness: &(hsba.b), alpha: &(hsba.a))
    return hsba
  }
} 
```

**Swift 3.2 / 4 小更新**

Swift 3.2 / 4 强制使用之前的代码触发了一个新警告，因为您`hsba`在同一次调用中多次修改变量`getHue`

> 同时访问参数‘hsba’，但修改需要独占访问；考虑复制到局部变量。

```
extension UIColor {
    var hsba: (h: CGFloat, s: CGFloat, b: CGFloat, a: CGFloat) {
        var h: CGFloat = 0, s: CGFloat = 0, b: CGFloat = 0, a: CGFloat = 0
        self.getHue(&h, saturation: &s, brightness: &b, alpha: &a)
        return (h: h, s: s, b: b, a: a)
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-09T11:14:51.363

请注意它是草稿，但如果您低于 5.0 版，您可以尝试此代码

```
...
CGFloat computedH = 0;
CGFloat computedS = 0;
CGFloat computedV = 0;

CGFloat minRGB = MIN(r, MIN(g,b));
CGFloat maxRGB = MAX(r, MAX(g,b));

if (minRGB==maxRGB) {
   computedH = 0;
   computedS = 0;
   computedV = minRGB;
} else {
   double d = (r==minRGB) ? g-b : ((b==minRGB) ? r-g : b-r);
   double h = (r==minRGB) ? 3 : ((b==minRGB) ? 1 : 5);
   computedH = (60*(h - d/(maxRGB - minRGB))) / 360.;
   computedS = ((maxRGB - minRGB)/maxRGB);
   computedV = maxRGB;
}
... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-04T16:00:18.780

只需使用以下代码段，即可完成 rgba、hsba 转换。

```
extension UIColor {

/**
 Decomposes UIColor to its RGBA components
 */
var rgbColor: RGBColor {
    get {
        var red: CGFloat = 0, green: CGFloat = 0, blue: CGFloat = 0, alpha: CGFloat = 0
        self.getRed(&red, green: &green, blue: &blue, alpha: &alpha)
        return RGBColor(red: red, green: green, blue: blue, alpha: alpha)
    }
}

/**
 Decomposes UIColor to its HSBA components
 */
var hsbColor: HSBColor {
    var h: CGFloat = 0, s: CGFloat = 0, b: CGFloat = 0, a: CGFloat = 0
    self.getHue(&h, saturation: &s, brightness: &b, alpha: &a)
    return HSBColor(hue: h, saturation: s, brightness: b, alpha: a)
}

/**
 Holds the CGFloat values of HSBA components of a color
 */
public struct HSBColor {
    var hue: CGFloat
    var saturation: CGFloat
    var brightness: CGFloat
    var alpha: CGFloat

    var uiColor: UIColor {
        get {
            return UIColor(hue: hue, saturation: saturation, brightness: brightness, alpha: alpha)
        }
    }
}

/**
 Holds the CGFloat values of RGBA components of a color
 */
public struct RGBColor {
    var red: CGFloat
    var green: CGFloat
    var blue: CGFloat
    var alpha: CGFloat

    var uiColor: UIColor {
        get {
            return UIColor(red: red, green: green, blue: blue, alpha: alpha)
        }
    }
}
} 
```

# entity-framework - 将接口与 mvc3 EF 中的类绑定

> ID：10071757
> 
> 赞同：0
> 
> 时间：2012-04-09T10:11:42.803
> 
> 标签：entity-framework, asp.net-mvc-3, class, interface

假设我有一些接口，例如：

```
public interface IIconComponent
{
   // statements ...
} 
```

然后我在我的类中实现这个接口，如下所示

```
public class IconComponent : IIconcomponent
{
   // implementing the interface statements ..
} 
```

并在 mvc3 中创建一个表，如：

```
public class IconDBContext : DbContext
{
   public DbSet<IIconComponent> Icon {get; set;} //Is this statement possible 
} 
```

那就是制作接口类型的对象集，用于在表中存储类 IconComponent 对象。如何在 MVC3 中做到这一点？

我是否必须为此实现一些模型绑定器？或者，还有其他方法吗？

感谢您，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:19:36.090

EF 不支持接口。`DbSet`必须用真正的实现来定义。一旦您将其更改为使用实现，您的操作很可能也会使用它，因为没有理由使用抽象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T20:46:31.030

如果你真的需要，你可以让你的实体框架类实现接口。使用 POCO 很简单，使用 edmx 您可以创建包含接口派生的部分类。然而，正如拉迪斯拉夫所说，类似的事情`DbSet<IIconComponent>`是不可能的。

我可以想象你想要使用它的场景，例如处理只接受特定接口但你想用你的 EF 类填充的其他应用程序组件。（前几天，我使用旧版 UI 层正是这样做的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T10:20:34.730

你为什么要使用实体框架是你在它之上创建抽象层，因为你根本没有使用实体框架，因为实体框架不能使用接口。

# c++ - 为什么我们不能创建自己的 ostream 对象

> ID：10071760
> 
> 赞同：14
> 
> 时间：2012-04-09T10:11:57.873
> 
> 标签：c++, class, object, iostream

如果 cout 是 ostream 类的对象，那么为什么我们不能声明我们自己的对象，比如从同一个类中“out”。即，下面的代码不应该工作吗？

```
#include<iostream>
using namespace std;
int main()
{
    ostream out;
    out<<"something";
} 
```

或其他

```
#include<iostream>
using namespace std;
int main()
{
    ostream_withassign out;
    out<<"something";
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-21T20:41:30.497

流对象需要一个缓冲区来将数据发送到外部设备。标准输出流对象 ,`std::cout`使用一个缓冲区初始化，该缓冲区将传输封装到您的输出出现的任何位置。这是一个人为的例子：

```
std::ostream cout(/* buffer */); 
```

要使您自己的流对象伪装成标准流对象，您可以简单地将缓冲区传递`std::cout`给它的构造函数。请注意，我不建议在实践中这样做：

```
std::ostream copy(std::cout.rdbuf()); // Note: not a *real* copy

copy << "Hello World"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:16:32.597

你没有设置 ostream 对象（这个流输出到什么），当然你不能使用它。 [http://www.cplusplus.com/reference/iostream/ostream/ostream/](http://www.cplusplus.com/reference/iostream/ostream/ostream/)
即

```
// ostream constructor
#include <iostream>
#include <fstream>
using namespace std;

int main () {
  filebuf fb;
  fb.open ("test.txt",ios::out);
  ostream os(&fb);
  os << "Test sentence\n";
  fb.close();
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-14T08:55:34.973

**ostream**类是从**ios**类派生的。ios 类的构造函数如下所示。

```
public: explicit ios (streambuf* sb);
protected: ios(); 
```

这意味着 ios 的默认构造函数受到保护，因此您不能使用 ostream 的默认构造函数创建对象。

创建 ostream 对象的唯一方法是使用*streambuf* sb* 参数。

```
std::ostream my_obj(std::cout.rdbuf()); 
```

同样，您不能按值传递 ostream 对象。

**原因**

ios 是从 ios_base 派生的。它的复制构造函数是私有的。

```
protected: ios_base();    
private: ios_base (const ios_base&); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-09-16T21:41:52.977

你只能这样做：

```
#include <iostream>

std::ostream& gvar = std::cout << "Hello world" << std::endl;

int main() {} 
```

来自：http: [//xazax.web.elte.hu/](http://xazax.web.elte.hu/)

# c# - 从 Windows 窗体应用程序执行批处理文件

> ID：10071762
> 
> 赞同：1
> 
> 时间：2012-04-09T10:12:14.580
> 
> 标签：c#, batch-file, console

我编写了一个小批处理文件，将 exe 从解决方案复制到`system32`文件夹。

```
copy "blah.exe" "%systemroot%/System32" 
```

如果通过双击从桌面运行，批处理文件可以正常工作并复制 exe（也将 exe 放在桌面上）

但是，我尝试通过以下方式从 Windows 应用程序执行此操作：

```
Process.Start("sample.bat"); 
```

（EXE 文件和 batfile -> 属性 -> 始终输出到复制） 确实出现了 cmd 窗口，但目标目录中没有 .exe 文件。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:19:50.263

在您的批处理文件更改路径到您有 blah.exe 的特定文件夹，更改到特定驱动器，然后到特定文件夹说您的源文件夹是 C:\test 然后在批处理文件中键入 cd\test，它应该是喜欢：

```
C:
cd\test
copy "blah.exe" "%systemroot%/System32" 
```

或使用完整路径的副本，例如

```
copy "C:\test\blah.exe" "%systemroot%/System32" 
```

编辑：要使用 CMD 复制尝试：

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
System.Diagnostics.ProcessStartInfo startInfo = new       System.Diagnostics.ProcessStartInfo();
startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
startInfo.FileName = "cmd.exe";
startInfo.Arguments = "/C copy /b blah.exe %systemroot%/System32";
process.StartInfo = startInfo;
process.Start(); 
```

编辑2：或批处理文件

```
 System.Diagnostics.Process.Start("cmd", "/c sample.bat"); 
```

# c# - AVIStreamSetFormat 错误

> ID：10071767
> 
> 赞同：1
> 
> 时间：2012-04-09T10:12:49.087
> 
> 标签：c#, screen-capture, avi

我正在尝试创建桌面录制应用程序。当我录制全屏时，程序会按预期工作，但在某些情况下，当我从桌面选择特定区域进行录制时，会出现以下错误：`int result = AVIStreamSetFormat(psCompress, 0, ref bi, (Int32)bi.biSize);`

`Error in VideoStreamSetFormat: -2147205016`.

我正在使用 Xvid MPEG-4 编解码器来创建 AVI 视频。我认为问题可能在于 Xvid MPEG-4 编解码器不接受确定的图像尺寸（宽度和高度）。我不确定并坚持这个问题，我问是否有人可以帮助我理解为什么它不起作用。

```
private void SetFormat(IntPtr psCompress)
    {
        BITMAPINFOHEADER bi = new BITMAPINFOHEADER();
        bi.biSize = (uint)Marshal.SizeOf(bi);
        bi.biWidth = (Int32)_width;
        bi.biHeight = (Int32)_height;
        bi.biPlanes = 1;
        bi.biBitCount = 24; 
        bi.biCompression = 0;  // 0 = BI_RGB
        bi.biSizeImage = _stride * _height;

        int result = AVIStreamSetFormat(psCompress, 0, ref bi, (Int32)bi.biSize);
        if (result != 0)
        {
            throw new Exception("Error in VideoStreamSetFormat: " + result.ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:19:44.937

我发现了问题所在。从桌面上的选定区域截取屏幕截图时，我必须确保高度和宽度可被 2 整除。Xvid MPEG-4 编解码器似乎不接受任何图像大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:22:27.463

我有同样的问题。就我而言，我将比例和速率设置为 0。请确保在调用该函数之前正确指定 avi 的速度。

# php - 从 Android 设备到 LAMP 服务器的视频流

> ID：10071768
> 
> 赞同：6
> 
> 时间：2012-04-09T10:12:57.647
> 
> 标签：php, android, sockets, video-streaming

从这一点开始：http: [//www.mattakis.com/blog/kisg/20090708/broadcasting-video-with-android-without-writing-to-the-file-system](http://www.mattakis.com/blog/kisg/20090708/broadcasting-video-with-android-without-writing-to-the-file-system) 我正在尝试创建一个应用程序来保存从移动摄像头到远程服务器的视频流。（我在 google 代码中为 android 部分找到了几个示例：ipcamera-for-android、spydroid-ipcamera 等。）

我在这里和网络上阅读了一些答案，但找不到关于如何“读取”和保存服务器端数据流的解决方案。

我对 java 的了解很差，所以我宁愿能够在 PHP 中创建服务器端脚本（使用服务器套接字或其他东西）。有人可以在这方面提供帮助吗？

**更新**

使用我对 mplayer / ffmpeg mencorer 等工具的了解，我能够保存视频流……例如，使用 ipcamera-for-android 及其在服务器端使用的 nanohttp 服务器：

```
ffmpeg-i "http://{ip of android phone}:8080/live.flv" /my/server/path/stream.flv 
```

但是，只能在局域网中使用，我需要移动连接服务器，反之亦然。

**更新 2**

一些进展..在服务器端使用这个脚本

```
#!/usr/bin/php5
<?php
$handle = fopen("stream.3gp","w");
$socket = stream_socket_server("tcp://192.168.0.102:9000", $errno, $errstr);
if ($socket)
{
 echo "start listening\n";
 while ( $conn = stream_socket_accept($socket, 180))
  {
    echo "phone connected\n";
    while ($chunk = stream_socket_recvfrom($conn, 1500))
    {
        fwrite($handle,$chunk);
    }
  }
}

  fclose($handle);
  fclose($socket);
?> 
```

但是，3gp文件还不能播放..

**更新 3**

```
#!/usr/bin/php5
<?php

$socket = stream_socket_server("tcp://192.168.0.102:9000", $errno, $errstr);
$file = "saved.3gp";
$threegp_header = "\x00\x00\x00\x18\x66\x74\x79\x70\x33\x67\x70\x34\x00\x00\x03\x00\x33\x67\x70\x34\x33\x67\x70\x36";
$four_bytes = "\x00\x00\x00\x00";

if (!$socket) {

  echo "$errstr ($errno)\n";

} else {

  echo "server start listening\n";

  while ( $conn = @stream_socket_accept($socket, 180))
  {
        echo "phone connected\n";

    $handle = fopen($file,"w");

    //mediaRecorder gives invalid stream header, so I replace it discarding first 32 byte, replacing with 28 good byte (standard 3gp header plus 4 empty bytes)
    $discard = stream_get_contents($conn, 32);
    fwrite($handle, $threegp_header);
    fwrite($handle, $four_bytes);

    //then confinue to write stream on file until phone stop streaming
        while(!feof($conn))
        {
        fwrite($handle, stream_get_contents($conn, 1500));
        }
    echo "phone disconnected\n";
    fclose($handle);

    //then i had to update 3gp header (bytes 25 to 28) with the offset where moov atom starts
    $handle = fopen($file,"c"); 
    $output = shell_exec('grep -aobE "moov" '.$file);
    $moov_pos = preg_replace('/moov:(\d+)/i', '\\1', $output);
    $moov_pos_ex = strtoupper(str_pad(dechex($moov_pos - 24), 8, "0", STR_PAD_LEFT));
    fwrite($handle, $threegp_header);
    $tmp = '';
        foreach(str_split($moov_pos_ex,2) as $hex)
        {
                 $tmp .= pack('C*', hexdec($hex));
        }
    fwrite($handle, $tmp);
    fclose($handle);

  }
  echo "phone disconnected\n";

}
  @fclose($handle);
  fclose($socket);
?> 
```

经过一些实验，这次 vlc/mplayer 似乎可以播放它.. 音频仍然存在一些问题（但我认为我在 android 方面有问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:24:12.777

您可能会想要使用 PHP 的[服务器套接字功能](http://www.php.net/manual/en/function.stream-socket-accept.php)。

[这是一个方便的教程](http://tutorials4free.hypeforum.net/t6-how-to-create-a-socket-server-in-php)，其中介绍了实现数据流所需的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:36:14.517

根据您最终或想要最终使用的传入流（协议等）：

我不确定您愿意在 LAMP 上使用/安装什么，或者您更喜欢什么，但我知道 VLC 可以轻松捕获传入的流。

[http://wiki.videolan.org/Documentation:Streaming_HowTo/Receive_and_Save_a_Stream](http://wiki.videolan.org/Documentation:Streaming_HowTo/Receive_and_Save_a_Stream)

当然，只有命令行的 VLC 版本可能是您想要的。我从来没有做过，不确定它是如何工作的，我希望它不会安装一吨额外的软件包。关于可能的问题[，这是值得关注的。](http://forum.videolan.org/viewtopic.php?f=2&t=41412)

# c++ - 时间：2019-05-10 标签：c++vectornew

> ID：10071770
> 
> 赞同：0
> 
> 时间：2012-04-09T10:13:09.880
> 
> 标签：c++, memory-leaks, vector

在下一个示例中我如何释放内存。vt.pop_back() 删除 vt 中的元素，但不会释放内存。delete vt[i] 不起作用，它给了我分段错误。

```
#include <vector>
#include <unistd.h>

using namespace std;

const int SIZE = 1000000;

class Test
{
public:
    Test();
    ~Test();    
private:
    int *arr;    
};

int main()
{
    vector<Test *> vt;
    for(int i = 0; i < 100; i++)
        vt.push_back(new Test());
    sleep(10);
    return 0;    
}

Test::Test()
{
    arr = new int[SIZE];
}

Test::~Test()
{
    delete[] arr;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T10:16:32.857

您不是在存储“测试”对象，而是在存储指向这些对象的指针。所以 delete 只会删除指针。

如果您希望将对象存储在向量中，则应设置类型

```
vector<Test> 
```

这样，删除调用实际上运行了对象的析构函数。

结果代码变为：

```
int main() 
{
    vector<Test> vt; 
    for(int i = 0; i < 100; i++) 
        vt.push_back(Test());
    sleep(10);
    return 0;
} 
```

正如所评论的，这还需要一个新的复制构造函数：

```
Test::Test(const Test& t)
{
    arr = new int[SIZE];
    for(int i = 0; i != SIZE; i++)
        arr[i] = t.arr[i];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T10:17:06.717

你可以`delete vt[i]`这样使用，它会释放分配给`Test`对象的内存：

```
for(size_t i = 0; i < vt.size(); ++i)
{
   delete vt[i];
}
vt.clear(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T10:17:24.713

您存储的是指针而不是对象，因此如果您销毁向量而不是指针指向的对象，则“指针对象”将被销毁

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T10:20:09.053

如果要删除特定元素，可以尝试使用`erase`.`std::vector`

# android - 如何在android中停止计时器

> ID：10071776
> 
> 赞同：0
> 
> 时间：2012-04-09T10:14:11.930
> 
> 标签：android, timer, uiimageview

这是我的代码，我正在我的图像视图中动态更改一些图像。公共类 LoadingScreen 扩展 Activity{

```
public static Integer[] imageList={R.drawable.food_pics1,R.drawable.food_pics2,R.drawable.food_pics3,
    R.drawable.food_pics4,R.drawable.food_pics5,R.drawable.food_pics6,R.drawable.food_pics7,
    R.drawable.food_pics8,R.drawable.food_pics9};
Thread thread;
ImageView foodImageView;
final Handler myHandler=new Handler();
public int currentImageIndex=0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.load_xml);
    foodImageView=(ImageView)findViewById(R.id.imageView_food);
    //      final int i=0;

    final Runnable runnable = new Runnable() {
        @Override
        public void run() {
            // TODO Auto-generated method stub
            animateImages();
        }

    };

    final int delay=500;            
    final long period=1000;
    Timer timer=new Timer();

    timer.scheduleAtFixedRate(new TimerTask() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            myHandler.post(runnable);
        }
    }, delay, period);
}

private void animateImages() {
    // TODO Auto-generated method stub
        foodImageView.setImageResource(imageList[currentImageIndex%imageList.length]);
        currentImageIndex++;
        foodImageView.getAnimation();
} 
```

我想停止计时器并在 20 秒后完成此活动。我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:01:02.633

试试用这个，

```
 View v = new View(this);
        v.postDelayed(new Runnable(){
            public void run() {
                // TODO Auto-generated method stub
                //cancel your animation and finish the Activity here.
                finish();
            }
         }, (long) 20000.0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:23:56.783

你可以这样说：

```
timer.cancel();
timer = null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T10:35:16.317

将 TimerTask 实例保存在类中并在其上调用[取消](http://docs.oracle.com/javase/6/docs/api/java/util/TimerTask.html#cancel%28%29)。

**这是一个我发现在不**使用 Java 的 Timer 的情况下非常有用的提示：尝试在 UI 线程中同步事物，特别是如果你想做 UI 任务。例子：

```
... onCreate() {
getUiThreadHandler().post(new Runnable(){
  if (canceled()) {
    return;
  }

  // Actual work
  ...

  // Invoke again after delay
  getUiThreadHandler().postDelayed(this, 500);
}); 
```

祝你好运

# osx-lion - 处理来自音频虚拟驱动程序的空闲睡眠 - Mac OSX

> ID：10071780
> 
> 赞同：3
> 
> 时间：2012-04-09T10:14:33.040
> 
> 标签：osx-lion, core-audio, audio-streaming, kernel-extension

我们有一个类似于 Sound Flower 的虚拟音频设备驱动程序。此虚拟设备将列在声音系统首选项中。每当我们的设备在系统偏好设置中被选中时，它都会阻止空闲睡眠。如果我们将选择切换到默认输出设备，一切都会按预期工作。

如果我们在终端中执行“pmset -g assertions”命令，它会给出以下输出

```
Assertion status system-wide:  
   ChargeInhibit                           0
   PreventUserIdleDisplaySleep             0
   PreventUserIdleSystemSleep              1
   NoRealPowerSources_debug                0
   CPUBoundAssertion                       0
   EnableIdleSleep                         1
   PreventSystemSleep                      0
   DisableInflow                           0
   DisableLowPowerBatteryWarnings          0
   ExternalMedia                           0

Listed by owning process:

   pid 115: [0x0000012c00000073] PreventUserIdleSystemSleep named: MY_DRIVER_IDENTIFER.noidlesleep" 
```

任何人都可以建议我一些解决这个问题的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T16:17:53.313

我**认为**这由`kIOPMPreventIdleSleep`位于[struct](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/KernelIOKitFramework/IOPMpowerState_h/index.html)`capabilityFlags`字段中的 flag 控制。[`IOPMPowerState`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/KernelIOKitFramework/IOPMpowerState_h/index.html)

要参与电源管理决策，您需要将设备驱动程序添加到电源管理平面，通常在您的覆盖`IOService::start(provider)`方法中：

```
PMinit();
provider->joinPMtree(this);
registerPowerDriver(this, powerStates, numPowerStates); 
```

where`powerStates`并`numPowerStates`指定您希望设备能够处于的一系列电源状态。对于虚拟设备，您可能不希望超过 2 个，甚至可能只需要一个。我怀疑你班级的一个超类正在设置抑制睡眠的状态。一旦您注册了电源管理，您的驱动程序将需要处理电源管理方法，例如`IOService::setPowerState()`.

根据您希望设备的行为方式，您可能需要创建 2 种电源状态，一种是在播放或捕获声音（并禁止睡眠）时“活动”，另一种是在设备不执行任何操作时“空闲”，以及允许睡眠。

电源管理主题有点太大，无法在 StackOverflow 答案中完全涵盖，因此我建议您阅读有关我上面提到的内容的文档，并尝试清除电源状态中的相关标志。

希望有帮助。

# php - PHP - 正则表达式多选项解析

> ID：10071783
> 
> 赞同：-2
> 
> 时间：2012-04-09T10:14:45.403
> 
> 标签：php, regex, parsing, templates

我不擅长正则表达式，因此需要一些帮助：

我需要在内容中使用一个正则表达式找到多个选项：

1.  `{{ Value }}`- 总是
2.  `{{ Value | Value 2 }}`- 可选的第二部分 - | 价值 2
3.  `{{ Value | Value 2(Value3) }}`- 可选的第三部分 - (Value3)

规则：值之前或之后允许有空格

我得到的是这个，但它不适用于所有三个需求和可选：

```
/\{{(.*)|(.*)}}/siU 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:48:15.310

```
/\{{2}\s*?(.+)(?:\s*?\|\s*?(.+)\s*?(?:\(\s*?(.+)\s*?\))?)?\s*?\}{2}/isU 
```

请自己美化这个。

*   `\{{2}`是一个左大括号 ( `\{`)，正好是其中的两个 ( `{2}`)。
*   `\s*?`是一个空格 ( `\s`)，零次或多次 ( `*`) 并且尽可能多（`?`在非贪婪模式下）
*   `(.+)`是任何字符 ( `.`)，一次或多次 ( `+`)
*   `(?:x)?`是一个子表达式 x，它不添加到结果 ( `?:`) 中，并且必须永远不会出现或出现一次（尾随`?`）。在这里，这用于使“值 2”部分可选。
*   `\s*?\|\s*?`与找到的空格一样多，一个竖线和更多的空格（如果找到）。
*   随后是另一个可选的“值 3”子表达式。
*   `\(\s*?(.+)\s*?\)`是左括号 ( `\(`)、找到的空格数 (`\s*?`再次)、实际内容 (至少一个字符, `.+`)、更多空格和右括号。
*   `\}{2}`是右花括号，也正好是其中的两个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:52:50.703

我的方法

```
/\{\{[\s\W]*((\w+)([\s\W]*\|[\s\W]*([\w]+)([\s\W]*\([\s\W]*(\w+)[\s\W]*\)[\s\W]*){0,1}){0,1})[\s\W]*\}\}/ 
```

# html - 在背景中偏移图像

> ID：10071784
> 
> 赞同：0
> 
> 时间：2012-04-09T10:14:49.503
> 
> 标签：html, css

我知道CSS非常糟糕。我需要一些帮助。
我有 div 和其他元素：

```
<div class="place_section" style="height:375px;" data-session="3" data-client="2">
   <div class="row">1</div>
     <div id="3" class="place place_type1" data-place="[l=1;f=0;r=1;p=1]">
       <div class="center_chair">
         <span class="left_chair"></span>
         <span class="right_chair"></span>
       </div>
     </div>
   // other divs
</div> 
```

这是`css`：

```
.place_section {
    background: url("/content/images/screen_bg.png") 0 0 repeat-x;    
    margin: 0 auto;
    margin-top: 40px;
    position: relative;
} 
```

这是它的外观截图： ![在此处输入图像描述](../Images/bc6e7d787bc862e77b54a9cfbc3e7574.png)

我想将图像（蓝线）向右偏移，大约 20-25 像素。我怎样才能做到这一点？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:47:43.903

如果我理解正确，我会在 row1 之前添加一个 div 来表示屏幕：

```
<div class="place_section">
  <div class="big_screen">
  <div class="row"> ... </div>
  <div class="row"/>... </div>
</div> 
```

这将为您在设置大屏幕样式时提供更大的灵活性：

```
.big_screen {
  background: url("/content/images/screen_bg.png") 0 0 repeat-x;    
  margin: ...;    
} 
```

希望能帮助到你。

# java - Java Swing 旋转和缩放

> ID：10071786
> 
> 赞同：1
> 
> 时间：2012-04-09T10:15:30.083
> 
> 标签：java, swing, java-2d

我有一个 JScrollPane 包围的 JPanel。此 JPanel 用于显示图像。我需要提供 zoomIn、zoomOut、顺时针旋转和 antiClockwiseRotate 等功能。所有这些功能都可以单独正常工作。对于缩放，我称之为图形对象的比例。它发生在左上角到右下角的基础上。对于旋转，我重置了比例，并平移、旋转和平移回图形对象。但是当我将缩放与旋转结合使用时，它的行为会有所不同。例如，我顺时针旋转，图像被旋转到 1.57079633 弧度（大约 90 度）。现在，当我按下缩放时，图像会被缩放，但缩放是基于右上角和左下角而不是左上角和右下角进行的。如果我再次以顺时针方向旋转图像，我会重置缩放，也就是说，我将图像缩放到其原始大小，然后在图形对象上调用平移、旋转和平移。现在，如果我再次按下缩放，它会根据右下角和左上角放大。

因此问题是当面板坐标改变时图像的坐标没有改变。有人可以帮我改变图像的坐标吗？

```
public void paint(Graphics g)
{     
    Graphics2D g2d = (Graphics2D)g;
    g2d.translate((tempWidth/2), (tempHeight/2));
    g2d.rotate(m_rotate);
    g2d.translate(-(tempWidth/2), -(tempHeight/2));
    g2d.scale(m_zoom, m_zoom); 
    if(this.image != null && this.image.getHeight(null) > 0)
    {
        g2d.drawImage(this.image, 0, 0,302,312,this);         
    } 
    else
    {
        g2d.drawString("View Image Here!. ", 20, 20);
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:02:40.910

谢谢你的帮助。它让我思考一个新的维度，帮助我解决了这个问题。我所做的只是在旋转之前缩放图像，现在它运行良好。

```
public void paint(Graphics g) 
{          
    Graphics2D g2d = (Graphics2D)g; 
    g2d.scale(m_zoom, m_zoom);//This is what made the magic    
    g2d.translate((tempWidth/2), (tempHeight/2));     
    g2d.rotate(m_rotate);     
    g2d.translate(-(tempWidth/2), -(tempHeight/2)); 
    /*g2d.scale(m_zoom, m_zoom); removed this and placed above */
    if(this.image != null && this.image.getHeight(null) > 0)     
    {         
        g2d.drawImage(this.image, 0, 0,302,312,this);
    }
    else
    {         
        g2d.drawString("View Image Here!. ", 20, 20);
    }     
} 
```

# c - 如何阻止此代码挂在错误的输入上？

> ID：10071790
> 
> 赞同：0
> 
> 时间：2012-04-09T10:16:02.457
> 
> 标签：c

我正在从 Stephen Kochan 的“C 语言编程”中学习 C。我正在做第 6 章的第 4 练习，编写一个充当简单累加器计算器的代码。代码如下。只要以正确的方式顺序提供输入，它就可以正常工作。

```
#include<stdio.h>

    int main(void)
    {
        float num, accum = 0;

        char operator;

        while(1)

        {

          printf("Enter the number and the operator ");
          scanf("%f %c",&num, &operator);

          if (operator == 'E') break;

          switch (operator){

        case 'S':
          accum = num;
          printf("= %g\n",accum);
          break;

        case '+':
          accum = accum + num;
          printf("= %g\n",accum);
          break;

        case '-':
          accum = accum - num;
          printf("= %g\n",accum);
          break;

        case '*': 
          accum = accum * num;
          printf("= %g\n",accum);
          break;

        case '/':
          accum = accum / num;
          printf("= %g\n",accum);
          break;
          }      
        }

        printf("= %g\n",accum);
        printf("End of Calculation\n");

      return 0;

    } 
```

但它挂在错误的输入上。可以做些什么来检查这种行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T10:24:58.930

简短的版本是“不要使用`scanf()`”。

问题是`scanf()`它只提供了有限的错误指示，并留下未读的错误数据被下一次调用拾取；特别是如果您不费心进行错误检查，那么它只会在错误数据上永远旋转。

1.  **总是**检查返回码，这样你就知道它是否有效。
2.  如果您正在执行面向行的输入，请使用`fgets()`或类似方法来读取整行，并`sscanf()`从该行进行解析。
3.  如果输入不是您所期望的，请做一些明智的事情，而不是仅仅通过。（您现有的代码只是假设它始终有效。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T10:19:44.847

不要使用`scanf`. 这是该计划的第一眼建议。使用类似[此处](http://gd.tuwien.ac.at/languages/c/programming-bbrown/c_055.htm)`getchar`所示的内容他们正在处理与您相同的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T10:22:58.800

1.  检查是否`scanf()`返回 2，表明它已填充了两个参数
2.  在报告错误的 switch 语句中提供默认情况。

为了提高鲁棒性，您可能希望使用读取整行`fgets()`（不要使用`gets()`，因为它容易受到缓冲区溢出的影响）并使用`sscanf()`. 仅当您想从错误输入中恢复时才需要这样做。否则，如果出现任何问题，请坚持使用`scanf()`and `exit(1)`（以及错误消息）。

# android - 缺少 Android 平板电脑缩放选项

> ID：10071793
> 
> 赞同：0
> 
> 时间：2012-04-09T10:16:19.943
> 
> 标签：android, screen, compatibility, tablet

我开发了一个 android 应用程序，它的 GUI 是为小屏幕设计的。在平板电脑上运行时，它看起来很垃圾，因为我假设 320dp 宽度让我的生活更轻松——我没有资源在平板电脑上进行测试。

使用 android 3.2 的人能够放大应用程序，因此它看起来像是在大手机上运行。但是在我上次更新之后，该选项不可用，我不明白为什么。

更改与 Manifest 文件有关。这是我的原始应用程序所拥有的（与清单中的屏幕无关）：

```
<uses-sdk android:minSdkVersion="7" /> 
```

更新我的开发环境后，我收到一条警告说我应该指定一个目标 sdk，所以我这样做了：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="10" /> 
```

使用一个非常缓慢的 Android 3.2 模拟器，我已经确认这是导致问题的原因。我认为任何低于 11 的目标 SDK 都不会影响缩放选项？

使用以下还删除了缩放选项：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="9" /> 
```

但这没有：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="8" /> 
```

所以将我的目标 SDK 设置为 8 是一种解决方法，但这也是错误的，因为我使用 2.3.3 版本进行测试。

我在这里错过了什么吗？有更好的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:30:59.410

尝试将 targetSdkVersion 设置为 9（或 10）**并**添加`<supports-screens android:xlargeScreens="false" />`到您的 AndroidManifest.xml（[supports-screens 的](http://developer.android.com/guide/topics/manifest/supports-screens-element.html#xlarge)文档）。这告诉系统您的应用程序不明确支持 xlarge 屏幕，并且它应该为在 xlarge 设备上使用该应用程序的用户提供兼容性缩放/缩放选项。请注意，这**不会**导致应用程序在 Play 商店中对 xlarge 设备隐藏（`supports-screens`如果应用程序设计为在较大屏幕上运行，则只会导致 Play 商店过滤来自较小屏幕的应用程序，而不是相反）。

我认为一旦将 targetSdkVersion 设置为 9+ 就会发生这种情况的原因是因为在 API 级别 9 中添加了 support-screens xlargeScreens 并且（我相信）默认为 true（至少对于 API 级别 9+）。一旦 xlargeScreens 为真，系统将禁用兼容性缩放/缩放模式。

支持文档（它确实这么说但相当复杂）：

*   [http://developer.android.com/guide/practices/screen-compat-mode.html](http://developer.android.com/guide/practices/screen-compat-mode.html)
*   [http://android-developers.blogspot.com/2011/07/new-mode-for-apps-on-large-screens.html](http://android-developers.blogspot.com/2011/07/new-mode-for-apps-on-large-screens.html)
*   [http://developer.android.com/guide/topics/manifest/supports-screens-element.html](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)

# java - Java：更改像 1010 这样的二进制数并反转位。1010 = 0101。0 到 1 和 1 到 0

> ID：10071796
> 
> 赞同：0
> 
> 时间：2012-04-09T10:16:36.650
> 
> 标签：java, binary, integer

我一直在网上搜索，似乎永远找不到这个问题的答案。如何更改二进制数中的位？

> 示例：假设我得到 1010，我想将数字 0 更改为 1，将 1 更改为 0。

现在，我有一个整数中的二进制数。

我完全被难住了，如果有人可以帮助我，谢谢。

对不起，如果人们对我的问题感到困惑。我想要做的是将数字 0's 更改为 1's 和 1's 更改为 0's 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:20:21.783

您不只是在 Integer 上寻找这种方法：[http](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#reverse(int) ://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#reverse(int )？

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:33:10.403

如果你想翻转你能做的所有位

```
int i = 0b1010; 
```

或在 Java 6 中

```
int i = Integer.parseInt("1010", 2);
int i2 = ~i; // toggle 0 and 1's.
int i3 = i ^ 0xFF; // toggle the lower 8 bit only. 
```

或者你可以试试

```
public static void main(String... args) {
    System.out.println(toggleBits("1010"));
    System.out.println(toggleBits("00001010"));
    System.out.println(toggleBits("1100001010"));
}

private static String toggleBits(String s) {
    long i = Long.parseLong(s, 2);
    long i2 = i ^ ((1L << s.length()) - 1);
    String s2 = Long.toBinaryString(i2);
    while (s2.length() < s.length()) s2 = '0' + s2;
    return s2;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T10:27:42.590

如果您尝试进行类似于**字符串反转**操作的位反转操作，那么我认为 Java 有一个名为“ `reverse()`”（或类似）的方法，我猜它会为您工作。您也可以尝试**@Dozz**的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T10:32:37.800

评论中讨论和建议的内容的快速演示将是：

```
 int i = 42;
    int j = i ^ 0xFF;
    System.out.println(Integer.toBinaryString(i));
    System.out.println(Integer.toBinaryString(j)); 
```

[在此处](http://en.wikipedia.org/wiki/Exclusive_or)查看有关 XOR的更多信息。

# sql - 将一些从其他表中选择的值插入到表中

> ID：10071797
> 
> 赞同：0
> 
> 时间：2012-04-09T10:16:43.213
> 
> 标签：sql, database

我有这样的数据库结构::

数据库结构 ::

*   `ATT_table- ActID(PK), assignedtoID(FK), assignedbyID(FK), Env_ID(FK), Product_ID(FK), project_ID(FK), Status`
*   `Product_table - Product_ID(PK), Product_name`
*   `Project_Table- Project_ID(PK), Project_Name`
*   `Environment_Table- Env_ID(PK), Env_Name`
*   `Employee_Table- Employee_ID(PK), Name`
*   `Employee_Product_projectMapping_Table -Emp_ID(FK), Project_ID(FK), Product_ID(FK)`
*   `Product_EnvMapping_Table - Product_ID(FK), Env_ID(FK)`

我想在`ATT_Table`. 现在在该表中，我有一些列，例如`assignedtoID`, `assignedbyID`, `envID`, `ProductID`，`project_ID`它们在此表中是 FK，但在其他表中它们只是数字）。

现在，当我从用户输入数据时，我以字符串的形式输入数据，例如用户输入`Name`( `Employee_Table`)、`product_Name`( `Product_table`) 而不是直接输入 ID。所以我想首先让用户输入名称（`Employee`或`product`或`Project`或`Env`），然后提取其主键（`Emp_ID, product_ID, project_ID, Env_ID`）的值，然后将它们插入`ATT_table`到`assignedtoID, assignedbyID, envID, ProductID, project_ID`.

请注意，从中`assignedtoID, assignedbyID`引用。`Emp_ID``Employee_Table`

这该怎么做 ？我有这样的东西，但它不工作::

```
INSERT INTO ATT_TABLE(Assigned_To_ID,Assigned_By_ID,Env_ID,Product_ID,Project_ID) 
VALUES (A, B, Env_Table.Env_ID, Product_Table.Product_ID, Project_Table.Project_ID)
SELECT Employee_Table.Emp_ID AS A,Employee_Table.Emp_ID AS B, Env_Table.Env_ID, Project_Table.Project_ID, Product_Table.Product_ID
FROM Employee_Table, Env_Table, Product_Table, Project_Table
WHERE Employee_Table.F_Name= "Shantanu" or Employee_Table.F_Name= "Kapil" or Env_Table.Env_Name= "SAT11A" or Product_Table.Product_Name = "ABC" or Project_Table.Project_Name = "Project1"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:27:49.877

处理这种情况的方法是使用下拉选择列表。该列表由（至少）两列组成：一列保存 Id 的 teh 数据库，另一列存储用户看到的字符串。像

```
1, "CA", "Canada"
2, "USA", 'United States"
... 
```

用户看到

```
CA | Canada
USA| United States  
... 
```

存储在数据库中的值是 1, 2, ... 用户选择的任何行。

您永远不能依赖用户的准确、正确的输入。他们迟早会打错字。

* * *

根据您的评论，我扩展了我的答案。

给定解决方案的问题（通过输入的文本将所有父表连接在一起并将它们与多个 AND 组合来从父表中获取 Id）是，只要一个给定的参数有错字，你就不会单条记录回来。想象一下当员工的真实 F_name 是“Shant* **anu*** ”并且用户输入“Shant* aun*”**时**的后果。

解决这个问题的最好方法是从父表中一一获取这些 ID。假设一些 FK 有一个 NOT NULL 约束。您可以检查 F_name 是否已填写，并在用户未填写该字段时通知用户。假设用户输入“Shant* aun ***** ”作为名称，程序不会警告用户，因为某些内容已填写。但这不是数据库将执行的检查，因为在 Id 上定义了 NOT NULL 约束（FK ）。当您从父表中一一获取ID时。您可以验证它们是否为 NOT NULL。当文本被填写时，如“Shant* aun ***** ”，但返回的 Id 为 NULL，您可以通知用户一个问题并让他更正他的输入：“找不到名为“Shantaun”的员工。 "

```
SELECT $Emp_ID_A = Emp_ID
FROM Employee_Table
WHERE F_Name= "Shantanu"

SELECT $Emp_ID_B = Emp_ID
FROM Employee_Table
WHERE B.F_Name= "Kapil" 

SELECT $Env_ID = Env_ID
FROM Env_Table
WHERE Env_Table.Env_Name= "SAT11A" 

SELECT $Product_ID = Product_ID
FROM Product_Table
WHERE Product_Table.Product_Name = "ABC" 

SELECT $Project_ID = Project_ID
FROM Project_Table
WHERE Project_Name = "Project1" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:32:02.667

请使用**AND**而不是*OR*。

```
INSERT INTO ATT_TABLE(Assigned_To_ID,Assigned_By_ID,Env_ID,Product_ID,Project_ID) 
    SELECT A.Emp_ID, B.Emp_ID, Env_Table.Env_ID, Project_Table.Project_ID, Product_Table.Product_ID
    FROM Employee_Table A, Employee_Table B, Env_Table, Product_Table, Project_Table
    WHERE A.F_Name= "Shantanu" 
        AND B.F_Name= "Kapil" 
        AND Env_Table.Env_Name= "SAT11A" 
        AND Product_Table.Product_Name = "ABC" 
        AND Project_Table.Project_Name = "Project1"; 
```

但我猜，在你的场景中使用下拉列表是最佳实践。

# ruby-on-rails - rails 3.0.12 更新 - 为什么这个 gem 的 rake 任务没有加载？

> ID：10071798
> 
> 赞同：1
> 
> 时间：2012-04-09T10:16:52.470
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, rake

我正在将 rails 2.x 应用程序更新到 rails 3.0.12。

这个应用程序使用引导程序 gem 来“播种”数据库。gem的[原始分支](https://github.com/jeanmartin/bootstrapper)似乎已停止在 rails 2.x 分支中，但我发现另一个分支（理论上）与 rails 3.2 兼容（请注意，我正在更新到 3.0.12，而不是 3.2）。

所以这就是我的 Gemfile 现在拥有的：

```
gem 'bootstrapper', :git => 'git://github.com/vivrass/bootstrapper.git' 
```

运行捆绑更新后，这似乎工作......除了 gem 应该添加一个名为 的新 rake 任务`rake db:bootstrap`，并且在我执行时它不会出现（我通过 oh-my-zsh`rake -T db`别名）。`bundle exec rake -T db`

```
rake db:create                         # Create the database from config/database.yml for the current Rails.env (use db:crea...
rake db:drop                           # Drops the database for the current Rails.env (use db:drop:all to drop all databases)
rake db:fixtures:load                  # Load fixtures into the current environment's database.
rake db:migrate                        # Migrate the database (options: VERSION=x, VERBOSE=false).
rake db:migrate:status                 # Display status of migrations
rake db:rollback                       # Rolls the schema back to the previous version (specify steps w/ STEP=n).
rake db:schema:dump                    # Create a db/schema.rb file that can be portably used against any DB supported by AR
rake db:schema:load                    # Load a schema.rb file into the database
rake db:seed                           # Load the seed data from db/seeds.rb
rake db:setup                          # Create the database, load the schema, and initialize with the seed data (use db:res...
rake db:structure:dump                 # Dump the database structure to an SQL file
rake db:version                        # Retrieves the current schema version number 
```

我检查了 repo，根据[这篇文章](http://blog.nathanhumbert.com/2010/02/rails-3-loading-rake-tasks-from-gem.html)，gem 似乎在做正确的事情： - 它有一个[railtie.rb](https://github.com/vivrass/bootstrapper/blob/master/lib/bootstrapper/railtie.rb)文件，用于加载[rake 文件](https://github.com/vivrass/bootstrapper/blob/master/lib/tasks/bootstrap.rake) - railtie.rb 文件包含在[lib/bootstraper 中。 .rb 文件](https://github.com/vivrass/bootstrapper/blob/master/lib/bootstrapper.rb)

然而，rake 任务并没有出现。

将 rake 任务添加到 gem 的过程是否从 rails 3.0.x 更改为 3.2.x？

我正在运行 ruby​​ 1.9.3。

谢谢。

编辑：

我在rails 3.0.12新建了一个空的rails项目，在Gemfile上添加了这行，打包后出现rake任务。这可能与我从 rails 2.x 更新而不是创建全新的 rails 3.0.12 项目这一事实有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:07:29.450

好的，找到问题了。

旧的（rails 2.x）引导程序 gem 需要一个名为`lib/tasks/bootstrapper.rake`. 我在我的 rails 项目中有那个文件，它正在处理 rake 任务。删除文件解决了这个问题。

# c# - 如何使用 iTextSharp 创建并附加到电子邮件中的多个 PDF？

> ID：10071802
> 
> 赞同：2
> 
> 时间：2012-04-09T10:17:21.143
> 
> 标签：c#, .net, azure

我正在使用 iTextSharp，我想知道如何将多个 PDF 作为附件发送？它也适用于 Azure 吗？在此先感谢，我很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:47:37.530

我们在 Azure 中使用 iTextSharp 已经一年多了，没有任何问题。

您可能希望使用第三方电子邮件服务来防止电子邮件被垃圾邮件过滤器捕获。我建议使用 Amazon SES（简单电子邮件服务）。它便宜又可靠。话虽如此，您必须阅读最终使用的第三方电子邮件服务的文档，以了解如何使用电子邮件附件。

作为参考，[这里有一篇](http://blogs.msdn.com/b/windowsazure/archive/2010/10/08/adoption-program-insights-sending-emails-from-windows-azure-part-1-of-2.aspx)来自 Windows Azure 博客的文章，其中列出了从 Azure 发送电子邮件的三种方式。我在上面提到了#3。其他两种方法要求您使用本地电子邮件服务器。

# ios - 提高绘图性能（适用于 Dudel 应用程序）

> ID：10071804
> 
> 赞同：1
> 
> 时间：2012-04-09T10:17:40.253
> 
> 标签：ios, performance, drawing, quartz-graphics, drawrect

我需要创建一个小型绘图/绘画应用程序，因此我转向了[为 iPhone 开发人员开始 iPad 开发：掌握 iPad SDK，作者是 Jack Nutting、Dave Wooldridge、David Mark](http://books.google.com.pk/books?id=mTGLGxnth0YC&lpg=PA194&ots=S85R4fAt2b&dq=Dudel%20Drawing%20Performance&pg=PA67#v=onepage&q&f=false)。

这很不错。架构很强大。但是，绘图应用程序（**Dudel**）在性能方面并不是很好。有两个主要问题（对我来说，目前）：

1.  最重要的是：绘图会在一段时间后变慢。原因：`drawRect`每次都在为所有路径调用。
2.  用铅笔工具绘图不流畅。原因：它使用`addLineToPoint:`而不是 (maybe) `addQuadCurveToPoint:`。
3.  没有橡皮擦控制。但这真的不是问题，因为我们可以为这幅画选择白色，给人一种橡皮擦的错觉。但是，如果有更好的实现，我很想知道。

**问题：**

是否有解决这些问题并提供简单但高效的绘图应用程序的解决方案？

注意：我也需要撤消/重做功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:02:52.903

让我试着一一回答你的问题。

> 用铅笔工具绘图不流畅。原因：它使用 addLineToPoint: 而不是（可能是）addQuadCurveToPoint:。

你说的是真的。IOS设备在定义的时间间隔内寻找触摸。如果你快速移动你的手，你很可能最终会失去几个接触点。因此，使用线连接点会导致丑陋的尖峰。

我们可以通过[曲线拟合](http://www.google.co.in/search?client=safari&rls=en&q=curve%20fitting&ie=UTF-8&oe=UTF-8&redir_esc=&ei=EdCCT73qA4jlrAft4eTnBQ)算法来平滑曲线。但是，绘图中的一些调整可以导致质量的可衡量的改进。[这](https://stackoverflow.com/a/5501354/641062)是一个例子。

> 橡皮擦控制

如果您知道背景颜色，则可以将其用作画笔颜色以产生橡皮擦的感觉。如果您不知道可以使用的背景

```
CGContextSetBlendMode(context, kCGBlendModeClear); 
```

> 撤销重做

你可以使用[NSUndoManager](http://www.google.co.in/search?client=safari&rls=en&q=NSUndoManager&ie=UTF-8&oe=UTF-8&redir_esc=&ei=q8-CT9CtGpGrrAfag43zBQ)。

# uiimage - NSData 的 UIImage 转换

> ID：10071807
> 
> 赞同：0
> 
> 时间：2012-04-09T10:18:21.457
> 
> 标签：uiimage, nsdata

我正在创建一个应用程序，它需要一个 json 并解析它以获得由 NSString 填充的各种 NSDictionary。
当我开始在我的表格视图中显示所有这些数据时，名称和地址工作正常，但我无法显示图像，我实际上使用了这段代码：

```
NSLog (@" URL img --> %@" , [dict objectForKey:@"urlimgp"]);

p.image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[dict objectForKey:@"urlimgp"]]]];

NSLog (@" IMG --> %@" , p.image); 
```

我无法弄清楚为什么第一个 NSLog 的输出显示了确切的 url（所以我知道 sql 和 php 一切正常），但在第二个 NSLog 中我有一个（null）。我真的提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:35:45.207

您的 URL 未使用 UTF-8 进行百分比转义编码。

```
NSString *urlStr = [dict objectForKey:@"urlimgp"];
urlStr = [urlStr stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *url = [NSURL URLWithString:urlStr];
NSData *data = [[[NSData alloc] initWithContentsOfURL:url] autorelease];
UIImage *image =[UIImage imageWithData:data]; 
```

# cakephp - CakePhp :: 如何设置记录器以便于调试？

> ID：10071810
> 
> 赞同：0
> 
> 时间：2012-04-09T10:19:04.170
> 
> 标签：cakephp

如何在 cakePhp 中设置记录器？

我想打印传递给控制器​​的参数？我怎么能在 cakePhp 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:34:15.613

如果要写入日志文件：

```
$this->log($this->params, 'debug'); 
```

欲了解更多信息：[http ://book.cakephp.org/2.0/en/core-libraries/logging.html](http://book.cakephp.org/2.0/en/core-libraries/logging.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:28:47.857

好吧，如果你想打印参数，那么：

```
 debug($this->params); 
```

会做的。您可以在函数内的 AppController 中使用它，并在特定的控制器操作中调用该函数。希望有帮助

# apache-camel - 动态停止/删除路由/以编程方式不删除相应线程

> ID：10071814
> 
> 赞同：7
> 
> 时间：2012-04-09T10:19:23.080
> 
> 标签：apache-camel

在处理从 JMS 收到的 Exchange 期间，我正在动态创建一条从 FTP 获取文件到文件系统的路由，当批处理完成时，我需要删除相同的路由。以下代码片段显示了我是如何做到这一点的：

```
public void execute() {
    try {
        context.addRoutes(createFetchIndexRoute(routeId()));
    } catch (Exception e) {
        throw Throwables.propagate(e);
    }
}

private RouteBuilder createFetchIndexRoute(final String routeId) {
    return new RouteBuilder() {
        @Override
        public void configure() throws Exception {
            from("ftp://" + getRemoteQuarterDirectory() +
                "?fileName=" + location.getFileName() +
                "&binary=true" +
                "&localWorkDirectory=" + localWorkDirectory)
                .to("file://" + getLocalQuarterDirectory())
                .process(new Processor() {
                    RouteTerminator terminator;

                    @Override
                    public void process(Exchange exchange) throws Exception {
                        if (camelBatchComplete(exchange)) {
                            terminator = new RouteTerminator(routeId, 
                                    exchange.getContext());
                            terminator.start();
                        }
                    }
                })
                .routeId(routeId);
            }
        };
} 
```

我正在**使用线程来停止路线中的路线**，这是骆驼文档中推荐的一种方法-[如何从路线中停止路线](http://camel.apache.org/how-can-i-stop-a-route-from-a-route.html)

```
public class RouteTerminator extends Thread {
    private String routeId;
    private CamelContext camelContext;

    public RouteTerminator(String routeId, CamelContext camelContext) {
        this.routeId = routeId;
        this.camelContext = camelContext;
    }

    @Override
    public void run() {
        try {
            camelContext.stopRoute(routeId);
            camelContext.removeRoute(routeId);
        } catch (Exception e) {
            throw Throwables.propagate(e);
        }
    }
} 
```

结果路线确实停止了。但是我在**jconsole**中看到的是与路由对应的线程没有被删除。因此，随着时间的推移，这些*废弃*的线程只会不断积累。

有没有办法以动态/编程方式正确停止/删除路线，并释放路线的线程，这样它们就不会随着时间的推移而累积？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T13:35:01.083

这在下一个 Camel 版本 2.9.2 和 2.10 中得到修复。由这张票修复： [https ://issues.apache.org/jira/browse/CAMEL-5072](https://issues.apache.org/jira/browse/CAMEL-5072)

# inno-setup - 强制 inno 设置以 PrivilegesRequired=lower 将数据存储在 HKCU

> ID：10071816
> 
> 赞同：3
> 
> 时间：2012-04-09T10:19:31.143
> 
> 标签：inno-setup

当 Inno Setup 配置为 PrivilegesRequired=admin 时，它将卸载注册表项存储在 HKEY_LOCAL_MACHINE 中。

如何强制将卸载注册表项存储在 HKEY_CURRENT_USER 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:01:01.847

正如你的标题所说，你需要使用`PrivilegesRequired=lowest`. 除此之外，“本地用户”可能不是您所期望的。

如果设置需要管理员权限来删除旧设置，您可以使用`ShellExec`，确保您调用的应用程序作为管理员清单，或者您传递“runas”动词。

# bash - 如何根据文本而不是行号搜索和替换 HTML 文件中的标记文本

> ID：10071825
> 
> 赞同：0
> 
> 时间：2012-04-09T10:20:22.127
> 
> 标签：bash

如何根据字符串匹配搜索特定行并将其替换为另一个字符串。下面是我需要使用 bash 脚本修改的 html strong 示例。

```
< link type="text/css" rel="stylesheet" href="https://teststore.xxx.com/store/downpanel.css"> 
```

改成：

```
< link type="text/css" rel="stylesheet" href="https://testsstore.xxx.com/store/downpanel.css"> 
```

即带有teststore 的teststore。只是想添加 's' 。

我想我需要匹配所有的字符串。因为downpanel.css 是区分要编辑哪一行的's'。

有人说这可以通过正则表达式来实现..但我无法做到。任何有关语法的帮助都会非常有用。

谢谢。
杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:07:37.980

如果您需要替换**所有**出现的此链接，只需执行

```
sed 's_"https://teststore.xxx.com/store/downpanel.css"_"https://testsstore.xxx.com/store/downpanel.css"_g' old_file > new_file 
```

如果你真的需要匹配你显示的整个部分，那么输入`sed`命令。当心换行符，如果在中间的某个地方遇到它们会破坏比赛。

这是. [_](http://www.grymoire.com/Unix/Sed.html#uh-1) `sed`或者只是`man sed`在 Linux 上输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:07:42.797

要解决此类问题，您通常使用`sed`如下构造：

```
sed -e '/unique pattern/s/string or pattern/replacement string/' file 
```

初始`/unique pattern/`部分将替换限制为给定模式的行。对于像您这样的简单情况，只需对包含 的所有行执行替换就足够了`teststore`，因此可以省略唯一模式部分并且替换变为全局：

```
sed -e 's/teststore/testsstore/' file 
```

如果这对您来说是个问题并替换了不应该的东西，您可以使用原始表单，可能像这样：

```
sed -e '/link.*teststore/s/teststore/testsstore/' file 
```

帮助限制影响。

请注意，这只会将修改后的版本写入`file`标准输出。要进行适当的更改，请将`-i`开关添加到`sed`.

# objective-c - 错误：_radians 引用自

> ID：10071829
> 
> 赞同：1
> 
> 时间：2012-04-09T10:20:49.690
> 
> 标签：objective-c, xcode, iphone-sdk-3.0, cgpoint

它可能是重复的。但我的问题是我将**CGPointUtils.c/.h**添加到我的项目中。我在**.h**文件中遇到错误。错误`"_radiansToDegree" referenced from`就像 `CGRect referenced from`错误消息。

我检查了代码中的所有内容都是正确的，它返回的 CGFloat 数据类型是 radiansToDegree(rads)。这是我得到错误的地方。

代码：

```
CGFloat angleBetweenPoints(CGPoint first, CGPoint second) {
CGFloat height = second.y - first.y;
CGFloat width = first.x - second.x;
CGFloat rads = atan(height/width);
return radiansToDegrees(rads); 
```

在最后一行，错误在哪里？谁能给我一个解决方案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:24:34.413

radiansToDegrees 不在 math.h 中。

可能最简单的解决方案是写一个，（它只是乘以 180/M_PI）。

# python - 生产中的lxml编码错误

> ID：10071831
> 
> 赞同：0
> 
> 时间：2012-04-09T10:21:24.453
> 
> 标签：python, google-app-engine, lxml

我正在尝试使用 lxml 处理一些数据。它在我的开发服务器上运行良好，但在生产中使用以下代码：

```
parser = etree.XMLParser(encoding='cp1251') 
```

抛出：

```
 File "parser.pxi", line 1288, in lxml.etree.XMLParser.__init__ (third_party/apphosting/python/lxml/src/lxml/lxml.etree.c:77726)
  File "parser.pxi", line 738, in lxml.etree._BaseParser.__init__ (third_party/apphosting/python/lxml/src/lxml/lxml.etree.c:73404)
LookupError: unknown encoding: 'cp1251' 
```

我正在使用 lxml 2.3。GAE似乎支持相同的版本。那么为什么会出现这个错误呢？

**编辑**：

我为 指定了不同的编码`XMLParser`，例如 cp1252、ISO-8859-5、ISO-8859-2，它总是在 GAE 上抛出相同的错误，但在我的本地机器上工作。这些是流行的编码，GAE 上的 lxml 必须支持它们。我相信这是基于 GAE 构建的 lxml 有问题。

我创建了一个问题：[http ://code.google.com/p/googleappengine/issues/detail?id=7315](http://code.google.com/p/googleappengine/issues/detail?id=7315)

**编辑2**：

完整追溯：

```
unknown encoding: 'cp1251'
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~my_cool_app_id/1.358126884781269352/main.py", line 29, in get
    parser = etree.XMLParser(encoding='cp1251')
  File "parser.pxi", line 1288, in lxml.etree.XMLParser.__init__ (third_party/apphosting/python/lxml/src/lxml/lxml.etree.c:77726)
  File "parser.pxi", line 738, in lxml.etree._BaseParser.__init__ (third_party/apphosting/python/lxml/src/lxml/lxml.etree.c:73404)
LookupError: unknown encoding: 'cp1251' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T21:53:44.690

在 OS X 上似乎存在一个关于此行为的错误，其中指定 encoding="cp1252" 会导致上述错误。评论还指出其他系统受到影响：[https ://bugs.launchpad.net/lxml/+bug/707396](https://bugs.launchpad.net/lxml/+bug/707396)

您是否尝试过指定其他编码类型？（看看是不是只是cp1252的问题）

# javascript - 六边形地图坐标 -> html 渲染

> ID：10071832
> 
> 赞同：2
> 
> 时间：2012-04-09T10:21:37.910
> 
> 标签：javascript, html, hex

我有一张六边形地图，但我意识到我的坐标系不适合使用某些 findpath 算法，所以我想对其进行改造。我选择了一个完全满足我的系统。你可以在[这里](http://vanreijmersdal.nl/development/experiments/javascript/hexpath/)找到它。但是在引用的示例中，整个地图的旋转方式与我需要的不同。

我的旧版地图在这里： [http ://dark-project.cz/wesnoth/map-view/1](http://dark-project.cz/wesnoth/map-view/1)

我的问题是如何在 HTML 中渲染我的地图，使其拥有与现在相同的地图，但使用新的坐标系？

（我使用 PHP 循环渲染它。对于每个字段，我都有以下信息：坐标、字段类型（草、村庄……）和字段图像的尺寸）

谢谢您的回答！

PS：我认为这可以通过使用 HTML5 Canvas 来完成，但我想要良好的浏览器支持，并且我没有任何使用 HTML5 的经验（但如果它速度快并且有良好的浏览器支持，我不会在客户端渲染）所以我更喜欢服务器端（PHP）解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:25:19.840

您的坐标系与算法演示中使用的坐标系不兼容。

我认为你最好的选择是改变你发现的算法来使用你的坐标系。

AFAIK你基本上必须改变：

*   采用给定坐标并确定 6 个相邻坐标的部分。
*   确定给定坐标是否在地图边界内的函数。
*   （某种）计算成本/距离的函数

我注意到演示代码如下：

```
function hex_distance(x1,y1,x2,y2) {
    dx = Math.abs(x1-x2);
    dy = Math.abs(y2-y1);
    return Math.sqrt((dx*dx) + (dy*dy));
} 
```

但这是一个不准确的估计，因为轴不垂直。它可能会产生非最佳结果 - A* 搜索中的分数函数的要求是产生*不高于*实际成本的值。此功能可能违反该规则。

您的坐标系实际上会使该功能更准确，但您也可以只使用曼哈顿距离：

```
function hex_distance(x1,y1,x2,y2) {
    return abs(x2-x1) + abs(y2-y1);
} 
```

如果我没记错的话，它计算出从 (x1,y1) 到 (x2,y2) 所需的平铺步数。

# android - 如何在android的同一选项卡中加载本机谷歌地图？

> ID：10071833
> 
> 赞同：0
> 
> 时间：2012-04-09T10:21:45.747
> 
> 标签：android, google-maps, tabs

我只是有 2 个选项卡，并用作[经验 - TabActivity 中的多个 Android 活动的](http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html)参考 我的类体系结构是这样的：
**MainActivity** 扩展 TabActivity
1\. **TabGroup1Activity**扩展 TabGroupActivity （从上述参考实现的 TabGroupActivity 类）
1.i。**Tab1Activity**扩展 MapActivity（它有多个标记）
2\. **TabGroup2Activity**扩展 TabGroupActivity
2.i。**Tab2Activity**

**MainActivity.java**

```
TabHost = getTabHost();
    Intent intentTab;
    intentTab = new Intent().setClass(this, TabGroup1Activity.class);
    mTabHost.addTab(mTabHost.newTabSpec("tab_1").setIndicator("Search")
            .setContent(intentTab));

    intentTab = new Intent().setClass(this, TabGroup2Activity.class);
    mTabHost.addTab(mTabHost.newTabSpec("tab_2").setIndicator("Google Map")
            .setContent(intentTab));
TabHost.setCurrentTab(0); 
```

**TabGroup2Activity.java**

```
public class GroupTab2Activity extends TabGroupActivity{
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        startChildActivity("Tab2Activity", new Intent(this,Tab2Activity.class));

    }

} 
```

在**Tab2Activity.java**中，我有一个名为 googleMapButton 的按钮。

```
googleMapButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {            

            final Intent intent = new Intent(Intent.ACTION_VIEW, Uri
                    .parse("http://maps.google.com/maps?"
                            + "saddr=43.0054446,-87.9678884"
                            + "&daddr=42.9257104,-88.0508355"));

            intent.setClassName("com.google.android.apps.maps",
                    "com.google.android.maps.MapsActivity");
            startActivity(intent);

        }
    }); 
```

单击按钮时，它会加载原生谷歌地图，但底部的标签消失了，我怎样才能让它在同一个标​​签中打开？
谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:40:32.833

看看这里：

```
googleMapButton.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {            

        final Intent intent = new Intent(Intent.ACTION_VIEW, Uri
                .parse("http://maps.google.com/maps?"
                        + "saddr=43.0054446,-87.9678884"
                        + "&daddr=42.9257104,-88.0508355"));

        intent.setClassName("com.google.android.apps.maps",
                "com.google.android.maps.MapsActivity");
        startActivity(intent);

    }
}); 
```

你正在做的是向设备上安装的谷歌地图应用程序（“com.google.android.apps.maps”）发出明确的意图，要求它运行 MapsActivity。一旦它被触发，它就会离开您的应用程序并运行 Google Map。

如果您想在自己的应用程序中打开 Google Map，则必须自己完成。这对你来说是一个好的开始： http: [//eagle.phys.utk.edu/guidry/android/mapOverlayDemo.html](http://eagle.phys.utk.edu/guidry/android/mapOverlayDemo.html)

# .net - VB.NET 不适用于带有 Mono 的 Ubuntu 10.04

> ID：10071836
> 
> 赞同：5
> 
> 时间：2012-04-09T10:22:26.443
> 
> 标签：.net, vb.net, mono, monodevelop, ubuntu-10.04

当我运行程序错误显示...

无法加载文件或程序集“Microsoft.VisualBasic，Version=8.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”或其依赖项之一。

说明：HTTP 500。处理请求时出错。

堆栈跟踪：

System.IO.FileNotFoundException：无法加载文件或程序集“Microsoft.VisualBasic，版本=8.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a”或其依赖项之一。文件名：'Microsoft.VisualBasic，版本 = 8.0.0.0，文化 = 中性，PublicKeyToken = b03f5f7f11d50a3a'，位于 mysite.login.loginAuthentication（System.String loginId，System.String pass）[0x00000]，位于：0，位于 mysite.login。 Page_Transfer (System.Object sender, System.EventArgs e) [0x00000] in :0 在 System.Web.UI.WebControls.Button.OnClick (System.EventArgs e) [0x00000] in :0 在 System.Web.UI.WebControls .Button.RaisePostBackEvent (System.String eventArgument) [0x00000] in :0 在 System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent (System.String eventArgument) [0x00000] in :0 在系统.Web.UI.Page。

版本信息：Mono 运行时版本：2.10.2（tarball Mon Apr 9 10:20:24 PKT 2012）；ASP.NET 版本：2.0.50727.1433

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T11:42:52.617

事实上，你应该安装 mono-vbnc。默认情况下，Ubuntu 不安装该软件包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:57:15.917

`Asc`Microsoft.VisualBasic DLL 包含一些特定于 VB.NET 的功能，例如`IIf`Mono 默认不包含的功能。

在 Ubuntu 上，您应该能够通过安装`libmono-microsoft-visualbasic8.0-cil`包来添加所需的依赖项。

此外，如果您使用的是 Visual Studio.NET 2010 SP1 或更高版本并且您的项目（大部分）是一个库，那么可能也值得研究一下[可移植类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)。

我还记得读过一些关于 VS.NET 选项的内容，将 Microsoft.VisualBasic 中的代码直接嵌入到 IL 中以避免依赖，但我现在找不到任何具体的内容......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T11:05:17.627

您需要在 Ubuntu 机器上安装 VB 运行时。

我从未使用过 Ubuntu，但我相信该软件包名为`libmono-microsoft-visualbasic8.0-cil`.

# .net - 使用任务库进行多线程

> ID：10071838
> 
> 赞同：3
> 
> 时间：2012-04-09T10:22:37.460
> 
> 标签：.net, asp.net-mvc, multithreading, threadpool, task-parallel-library

在 ASP.NET MVC 中，我有一个 Action，它接受用户输入的电子邮件地址列表，对其进行验证，然后将电子邮件的 HTML 和文本版本发送给每个收件人。然后用户被重定向到感谢页面。因为没有必要等待重定向到感谢页面，直到发送所有电子邮件，我正在使用 Task.Factory.StartNew 方法来启动一个实际发送电子邮件的新任务，它工作正常；用户立即被重定向到感谢页面，并且电子邮件消息在单独的线程上发送。所以一切都按我的意愿工作，但是我有以下关于多线程的问题。前几天看了很多帖子，还是没找到答案

1.  **任务库使用线程池中的线程**

    如果您使用的是任务库，则您正在使用 ASP.NET 线程池中的线程创建新线程。这意味着少一个线程可用于为应用程序提供其他 ASP.NET 请求。因此，通过使用任务库，您并没有通过将任务卸载到其他一些操作系统线程来优化 ASP.NET 线程的使用，只有用户体验更好，但任务库使用了另一个可用于服务其他 ASP.NET 请求的线程。所以唯一的结果是用户不需要等待。

2.  **手动螺纹**

    如果你真的想使用操作系统线程，你必须显式地启动新线程。但即使您启动新的操作系统线程，您也需要拥有多核或多处理器的机器才能真正看到应用程序可扩展性的改进。

3.  **后台线程池**

    一些帖子讨论了 ASP.NET 线程池和用于后台任务的单独应用程序的后台线程池。换句话说，每个 ASP.NET 应用程序都有一个线程池来服务应用程序请求，而另一个线程池来服务后台任务。我不认为这是真的，我认为每个 ASP.NET 应用程序只有一个线程池，并且该池中的线程用于同时服务：应用程序请求和后台任务。当通常只有一个线程在运行（UI 线程）并且您必须显式启动新线程时，也许对于 Windows 窗体应用程序可以这样说。但是 ASP.NET 在其基础上是多线程的。

以下是问题：

1.  我在 Dino Esposito 的 Programming ASP.NET MVC 2 中阅读了异步 MVC 控制器。他写了关于异步控制器如何使用 OS 线程来执行长时间运行的任务，因此最初为 ASP.NET 请求提供服务的 ASP.NET 线程现在可以自由地为其他请求提供服务。

    虽然我在这里不需要异步控制器，但我的问题是如何在我的示例中使用这样的操作系统线程。我是否必须显式地启动单独的线程，或者这是否也可以通过任务库以某种方式实现？

2.  即使我将这些任务卸载到某些操作系统线程，如果机器只有一个处理器，会有什么好处吗？我认为多核机器对于真正提高应用程序的可扩展性是必要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T11:03:58.707

您遇到的真正问题是 ASP.NET 可以随时回收您的 AppDomain。发生这种情况时，您的后台线程将因极端偏见而中止。使用线程池线程还是启动自己的线程都没有关系——如果 ASP.NET 不“知道”线程，它可以并且会破坏 AppDomain 并带走您的线程。

“正确”的解决方案是拥有一个单独的 Windows 服务进程，即 WCF 服务器。然后，您的 Web 应用程序可以将命令发送到执行它们的服务 - 例如发送一些电子邮件。

快速而肮脏的方法是在您的网络应用程序中隐藏一个发送电子邮件的操作。启动对该 Action 的异步请求，然后返回“感谢”页面而不等待结果。ASP.NET 并不关心请求是否来自您的应用程序 - 它只是将其视为另一个请求。因为 ASP.NET “知道”该请求，所以它不会中止它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T11:15:14.363

> [...] 他写到异步控制器如何使用 OS 线程来执行长时间运行的任务，因此最初为 ASP.NET 请求提供服务的 ASP.NET 线程现在可以自由地为其他请求提供服务。

嗯，这取决于你在那个异步控制器中有什么代码。它*可以*在 OS 上执行一些代码`Thread`，但不是必须的。通常发生的情况是您启动了一些在运行时不使用任何线程的异步操作。当它完成时，结果会在某个`ThreadPool`线程上执行。

> 虽然我在这里不需要异步控制器，但我的问题是如何在我的示例中使用这样的操作系统线程。我是否必须显式地启动单独的线程，或者这是否也可以通过任务库以某种方式实现？

您可以使用`TaskCreationOptions.LongRunning`. 这不能保证会启动一个新线程，但实际上它确实如此。

> 即使我将这些任务卸载到某些操作系统线程，如果机器只有一个处理器，会有什么好处吗？我认为多核机器对于真正提高应用程序的可扩展性是必要的。

如果该线程同步执行某些 IO 绑定操作，则可能会有好处。例如，发送电子邮件所花费的大部分时间很可能不是使用 CPU，而是等待服务器响应。如果是这种情况，使用另一个线程（无论是单独的线程还是来自 a 的线程`ThreadPool`）可能是有益的。当然，如果您异步执行该操作会更好，这不会阻塞任何线程，但这可能会使您的代码更加复杂（并且可能存在甚至不可能的情况）。

关于您写的其他内容：

> 如果您使用的是任务库，则您正在使用 ASP.NET 线程池中的线程创建新线程。这意味着少一个线程可用于为应用程序服务其他 ASP.NET 请求

是的，在正常情况下（如果您使用默认值`TaskScheduler`且未指定`TaskCreationOptions.LongRunning`）。但是，如果您遇到问题，更好的解决方案可能是增加 ThreadPool 限制，而不是`Thread`自己为短期运行的任务创建 s。那是因为创建和销毁线程是一项昂贵的操作，如果性能对您很重要，您应该避免它。

> [E] 每个 ASP.NET 应用程序都有一个线程池来服务应用程序请求，另一个线程池来服务后台任务。我不认为这是真的，我认为每个 ASP.NET 应用程序只有一个线程池，并且该池中的线程用于同时服务：应用程序请求和后台任务。

它比这稍微复杂一些，但是是的，ASP.NET 请求和 ThreadPool 任务（使用默认选项开始`ThreadPool.QueueUserWorkItem()`或通过`Task`使用默认选项开始）在同一个线程池上运行。

# c# - ObjectOfFoo = null 和 ObjectOfFoo.Dispose() 之间的区别

> ID：10071841
> 
> 赞同：1
> 
> 时间：2012-04-09T10:22:43.330
> 
> 标签：c#, .net

我知道使用 Dispose() 类应该从 IDisposable 继承，但是在我的应用程序中，一个类没有继承 IDisposable，如果我只是将 null 分配给 fooObject，它会释放资源吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:25:35.223

分配给`null`通常没有帮助（如果您要释放一个对象上的一个**字段**会更长寿，这主要是有用的） - 它当然不会强制收集。`Dispose()`与收藏无关，适用于您需要的时候。如果您没有任何需要提示的`Dispose()`资源（非托管资源、连接等），则`IDisposable`无需实施。

不理会 GC - 它会在选择时有效地收集，这在“常规”.NET 上意味着分代方案；短暂的对象收集起来非常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:25:54.433

如果一个对象是您自己的类，并且您在其中放置了一个处置机制并处置它而不是为其分配空值，那么更好，因为这将使您能够更好地控制内存和性能。

明确地销毁对象根本不是一个坏习惯。GC 为我们做了这些事情，但系统必须等待对象何时超出范围以及何时准备好进行垃圾回收。这可能需要一些时间，因此最好处置已处于无用状态的对象。

# android - RelativeLayout - 将项目定位在两个视图中最低的下方

> ID：10071845
> 
> 赞同：2
> 
> 时间：2012-04-09T10:23:02.277
> 
> 标签：android, android-ui

我在 RelativeLayout 中有一个 TextView（宽度：fill_parent），我想确保它位于其上方并排的两个视图下方，具有动态宽度和高度。这意味着，有时左视图更高，有时右视图更高。

我试图设置两个“低于”参数，但这当然是不允许的。我尝试通过代码修改它（将 XML 设置在 txt TextView 下面，img 是它旁边的 ImageView）：

```
if (txt.getHeight() + txt.getTop() < img.getHeight() + img.getTop()) {
                    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
                    params.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
                    params.addRule(RelativeLayout.BELOW, R.id.image);
                    txtDetails.setLayoutParams(params);
                } 
```

（txtDetails 是我想要在两个视图下方的那个）。

当这不起作用（没有任何改变）时，我将 txtDetails 放在它自己的 RelativeLayout 中，它位于包含两个视图并且有效的 RelativeLayout 下方。但是，我觉得 RL 应该能够处理这种情况，而无需创建新的 RL。可能吗？或者定位这种观点的最佳方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:56:53.670

为什么不使用表格布局？它在 2 行中完全符合您的要求。

首先在一行中添加两个变量视图，然后添加另一行包含您的文本视图。

像这样：

```
<TableLayout
    android:id="@+id/center"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <TableRow >
    <TextView
        android:id="@+id/textView1"
        android:layout_width="150sp"
        android:layout_height="wrap_content"
        android:text="@string/lorem_short" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="150sp"
        android:layout_height="wrap_content"
        android:layout_marginRight="15dp"
        android:text="@string/lorem_long" />
    </TableRow>
    <TableRow>
    <TextView
        android:id="@+id/textView3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5sp"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />
    </TableRow>
</TableLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:27:42.050

您的代码可能存在问题：
您正在视图上调用 getHeight()，如果尚未完成布局传递，则可能会返回 0。您应该将整个代码放在 GlobalLayoutListener 中，如下所示：

```
getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
   @Override
   public void onGlobalLayout() {
       // your code here...
       txt.requestLayout(); // Add this to ensure your changes are applied.
   }
} 
```

PS。你可以打电话`txt.getBottom()`而不是`txt.getHeight() + txt.getTop()`

# python - 如何阻止ftp在python中下载？

> ID：10071847
> 
> 赞同：0
> 
> 时间：2012-04-09T10:23:14.790
> 
> 标签：python, ftplib

这是我用来通过 ftp 下载的一些代码。我试图停止下载然后继续或之后重新下载。我试过 ftp.abort() 但它只会挂起并返回超时。

```
ftplib.error_proto: 421 Data timeout. Reconnect. Sorry. 
```

**SCENARIO：** 场景是用户选择要下载的文件，在下载时，用户可以停止当前下载并下载一个新文件。如果用户停止下载，代码 'if os.path.getsize(self.file_path) >117625:' 只是我的示例。它不是文件的完整大小。

谢谢。

```
from ftplib import FTP

class ftpness:

    def __init__(self):
            self.connect(myhost, myusername, mypassword)

    def handleDownload(self,block):
        self.f.write(block)
        if os.path.getsize(self.file_path) >117625:
                self.ftp.abort()

    def connect(self,host, username, password):
        self.ftp = FTP(host)
        self.ftp.login(username, password)
        self.get(self.file_path)

    def get(self,filename):
        self.f = open(filename, 'wb')
        self.ftp.retrbinary('RETR ' + filename, self.handleDownload)
        self.f.close()
        self.ftp.close

a = ftpness() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T11:10:05.597

这是您的会话空闲时间太长。您可以在会长文件后进入实例化 ftplib。否则。修改ftp软件配置。

比如你使用vsftpd，可以在vsftpd.conf中加入如下配置：

`idle_session_timeout=60000 # The default is 600 seconds`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:21:34.613

错误 421 是标准超时错误。所以需要在文件下载之前建立连接。

```
 def handleDownload(self,block):
        self.f.write(block)
        if os.path.getsize(self.file_path) >117625:
                self.ftp.abort() 
        else:
                self.ftp.sendcmd('NOOP')
#try to add this line just to keep the connection alive. 
```

希望这会帮助你。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:07:03.973

这是一种使用看门狗定时器的方法。这涉及创建一个单独的线程，这取决于您的应用程序的设计可能是不可接受的。

要使用用户事件终止下载，这是相同的想法。如果 GUI 在单独的线程中工作，那么该线程可以直接到达`FTP`实例内部并直接关闭其套接字。

```
from threading import Timer

class ftpness:
    ...

    def connect(self,host, username, password):
        self.ftp = FTP(host)
        self.ftp.login(username, password)
        watchdog = Timer(self.timeout, self.ftp.sock.close)
        watchdog.start()
        self.get(self.file_path)
        watchdog.cancel()  # if file transfer succeeds cancel timer 
```

这样，如果文件传输运行时间超过您预设的超时时间，计时器线程将关闭传输下方的套接字，强制`get`调用引发异常。只有当传输成功时，看门狗定时器才会被取消。

尽管这与您的问题无关，但通常`connect`调用不应传输有效负载数据。

# c# - C# 启动画面不工作

> ID：10071856
> 
> 赞同：0
> 
> 时间：2012-04-09T10:24:24.840
> 
> 标签：c#, splash-screen

我已经被困在这里几个小时了，我花了几个小时查找代码并自己制作批次。我从这里得到的代码之一给了我一个即时的 svHost 错误。

现在我的启动画面是我的 HWID / 串行检查，如果有效，它会打开主窗体，如果不是，它会完全关闭应用程序。但问题是我已经尝试了一些方法 splash.show(); 在主窗体上，但它只是冻结并在几分钟内变得愚蠢，另一件事是大多数方法都使用计时器，我只需要它，所以当 HWID 检查有效时，我可以启动主窗体，我已经尝试过 application.Run(新的 mainForm()); 如果 HWID 正确，然后更改 program.cs 文件，但仍然没有运气，我真的需要帮助。这将是美妙的，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T09:36:48.153

我在连接到套接字时使用了闪屏动画。我已经习惯`backgroundworker`了。

这是我的代码：

**主表格**

```
LoadingScreen frmLoadingScreen = new LoadingScreen();
.....
bkwNetworkConnector.RunWorkerAsync();

frmLoadingScreen.ShowDialog();

 /***********************************************************************************************************************/
        private void bkwNetworkConnector_DoWork(object sender, DoWorkEventArgs e)
        {
            try
            {
                hostSocket = new TcpClient();
                hostSocket.Connect(strIp, intPort);
            }
            catch (Exception exp)
            {

            }
        }

        private void bkwNetworkConnector_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            frmLoadingScreen.Close();

        } 
```

**加载屏幕表格：**

与`imagebox`控制。在其中加载 GIF 图像。

```
private void LoadingScreen_Load(object sender, EventArgs e)
        {
            pbAnimationBox.Image = Properties.Resources.LoadingAnimation; // win 8 animation
        } 
```

我正在使用 LoadingScreen 表单作为启动屏幕。

希望这会帮助你....

# python - 如何从列表中的字符串末尾去除特定标点符号并使所有单词小写

> ID：10071858
> 
> 赞同：1
> 
> 时间：2012-04-09T10:24:38.820
> 
> 标签：python

我有一个字符串列表，需要从列表中每个字符串的末尾删除某些标点符号。清单如下：

```
list = ['Twas', 'brillig,', 'and', 'the', 'slithy', 'toves', 'Did', 'gyre',
        'and', 'gimble', 'in', 'the', 'wabe:']  #the list is a lot longer 
```

我需要`'"-,.:;!?`从每个字符串的末尾去掉所有标点符号，并使所有单词小写。

Io I need `'Twas'`to become `'twas'`and I need `'wabe:'`to become`'wabe'`等...列表中我未在此处包含的其他单词在末尾包含其他标点符号。

我尝试使用`.rstrip()`和`.lower()`case，但我不知道如何使用 for 或 while 循环遍历列表中的每个字符串并执行此操作。如果有其他方式不需要使用`.rstrip`或者`.lower`我对他们开放。

我是使用python的初学者，所以非常基本的答案会对我有所帮助，如果您能准确解释您的工作，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T10:30:22.443

```
>>> [el.lower().rstrip('\'\"-,.:;!?') for el in list]
['twas', 'brillig', 'and', 'the', 'slithy', 'toves', 'did', 'gyre', 'and', 'gimble', 'in', 'the', 'wabe'] 
```

这是一个列表推导式，它是一种编写生成列表的 for 循环的单行方式。它逐项遍历列表，将每个元素设置为小写，然后去除尾随字符 '"-,.:;!?

# ios - 自定义 PhotoLibrary 和 jpeg 压缩

> ID：10071859
> 
> 赞同：0
> 
> 时间：2012-04-09T10:24:46.833
> 
> 标签：ios, arrays, image, compression, photolibrary

我必须像默认的那样创建一个自定义的 photolib，带有动画等。我有一些疑问..

**1.怀疑**
我应该创建3个图像（缩略图图像，320 * 480图像以显示完整图像和原始尺寸图像以防用户共享图像）（我将这些都存储在app doc目录中）还是应该只存储原始图像并在其他 2 张图像中裁剪它们？在这种情况下，如果我使用滚动视图来显示裁剪的图像，我怎么知道用户正在看到什么？我什么时候裁剪下一张图像以使其准备好显示？（可以像在 tableview 中一样在这里创建可重用单元格之类的东西吗？如果可以，你能给我一些想法吗？）

另外，我正在从 doc 目录中获取图像。在这种情况下，我应该将所有图像加载到 Array 中还是分批加载？

**2.问题主要：**
还需要压缩原始图像并保持其大小（我使用`uijpegrepresentation`压缩比，但压缩后有一些jpeg。它会增加大小甚至两倍大小）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:32:56.887

您可以使用单个图像和缩略图，您可以在运行时调整大小，否则会增加大小和性能问题。有很多开源库可以满足您的需求。请看下面。

[https://github.com/arturgrigor/AGImagePickerController](https://github.com/arturgrigor/AGImagePickerController)

[https://github.com/gdavis/FGallery-iPhone](https://github.com/gdavis/FGallery-iPhone)

# java - HTTP POST 和 GET 请求 + JAVA 中的 Javascript 调用的组合？

> ID：10071862
> 
> 赞同：0
> 
> 时间：2012-04-09T10:25:14.817
> 
> 标签：java, javascript, html, post, request

好的，这将很难解释，但这里什么都没有：

最近我一直在处理 POST 和 GET 请求，但现在我想向这个名为[http://www.mangareader.net/的站点发送一个 POST/GET 请求](http://www.mangareader.net/)

我面临的主要问题是我想使用这个网站的搜索功能。通常我会发送一个获取请求或类似的东西，但显然这个搜索功能不能那样工作，它可以与某种 Javascript 代码一起工作？我不知道它到底是什么，但试着在搜索栏中输入“精灵”，你会得到一个包含“精灵”一词的所有漫画（日本漫画）的下拉列表。我想知道如何调用这个过程，以及如何将它实现到 Java 程序中。例如：

登录网站 - > 发送 HTTP 发布请求。取回 HTML 数据。处理 HTML 数据。从 HTML 源中获取我需要的信息。

在 google.com 或 bing.com 等常规网站上使用搜索功能 - > 发送获取请求。取回 HTML 数据。处理 HTML 数据。从 HTML 源中获取我需要的信息。

使用 mangareader.net 上的搜索功能 - > ??????????

我将如何实现这一目标？理论上的解释就足够了，但一个实际的例子也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:32:36.943

如果您分析搜索时运行的 javascript，您会得到以下信息：

获取[http://www.mangareader.net/actions/search/?q=test&limit=100](http://www.mangareader.net/actions/search/?q=test&limit=100) [HTTP/1.1 200 OK 113ms]

换句话说，您可以通过 GET 请求在网站上搜索

[http://www.mangareader.net/actions/search/?q=test&limit=100](http://www.mangareader.net/actions/search/?q=test&limit=100)

其中 ?q 包含您的搜索词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:33:25.283

该站点使用 ajax 调用来获取 | （管道符号）从页面中分离出来的列表

> /actions/search?q=term

它使用字符串拆分解析此列表，然后将其放入组合框。

我对 java 的经验很少，但是对该页面的简单 GET 请求应该可以用您的搜索功能替换**{term} 。**

```
http://www.mangareader.net/actions/search/?q={term}&limit=100 
```

您可以使用 chrome 网络监视器查看是否为您自己

# android - 无法在 ICS 中添加首选项

> ID：10071866
> 
> 赞同：1
> 
> 时间：2012-04-09T10:25:35.847
> 
> 标签：android, android-4.0-ice-cream-sandwich, preferences

如何使用在 ICS 中添加首选项`addPreferencesFromResource()?` 在 ics 中显示已弃用。我在 xml 文件夹中添加了首选项布局..但这无法添加到首选项活动中..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:09:44.880

从 HC/ICS 开始，您应该使用[`PreferenceFragment.addPreferencesFromResource()`](http://developer.android.com/reference/android/preference/PreferenceFragment.html#addPreferencesFromResource%28int%29)而不是[`Activity.addPreferencesFromResource()`](http://developer.android.com/reference/android/preference/PreferenceActivity.html#addPreferencesFromResource%28int%29). 但是，这确实需要您切换首选项代码的结构 - 从`PreferenceActivity`直接添加首选项的旧样式转换为`PreferenceActivity`加载[PreferenceFragments](http://developer.android.com/reference/android/preference/PreferenceFragment.html)然后加载首选项的新样式。有关新方式的示例，请参阅[`PreferenceActivity`](http://developer.android.com/reference/android/preference/PreferenceActivity.html)文档中的代码示例。

请注意，[支持库](http://developer.android.com/sdk/compatibility-library.html)不会 PreferenceFragment 用于向后兼容 pre-HC。

# php - 在多列中查找搜索词

> ID：10071867
> 
> 赞同：0
> 
> 时间：2012-04-09T10:25:41.107
> 
> 标签：php, mysql, sql

如何在多列中搜索一个词：`title`, `content`. 例如：

```
$searchTerm = 'android';

SELECT * FROM posts WHERE `title` OR `content` contains $SearchTerm 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:30:34.070

```
SELECT 
  *
FROM 
  posts
WHERE
  lower(`title`) LIKE '%android%'
  OR lower(`content`) LIKE '%android%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:28:00.283

```
SELECT *
FROM posts
WHERE
   `title` LIKE '%android%'
OR `content` LIKE '%android%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T10:28:18.280

```
$sql = "SELECT * FROM posts WHERE `title` LIKE '%$SearchTerm%' OR `content` LIKE '%$SearchTerm%'"; 
```

# ios - 我在init中有一些泄漏。我看没有人泄漏

> ID：10071868
> 
> 赞同：0
> 
> 时间：2012-04-09T10:25:42.250
> 
> 标签：ios, memory-management, memory-leaks

我正在使用仪器的泄漏工具。它说我在 init 方法中有一些泄漏。它表明 NSMutableArray 有泄漏。

我没有看到任何泄漏。

```
@interface BookSettings : NSObject
  @property (nonatomic, retain) NSString *title;
  @property (nonatomic, retain) NSMutableArray *authors;
@end

- (id)init 
{
   self = [super init];

   if(self) 
   {
    title           = [[NSString stringWithString:@""] retain];
    authors         = [[NSMutableArray alloc] init];
   }
   return self;
}

- (void)dealloc 
{
 [title release];
 [authors release];
 [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:01:04.760

提供的代码没问题，问题出在没有平衡版本的情况下保留作者的其他地方。泄漏只是指向创建 ivar 的位置，而不是缺少的版本应该在哪里。检查保留计数增加的所有地方。

如果您需要查看对象使用工具的保留、释放和自动释放发生的位置：

在仪器中运行，在分配中设置“记录参考计数”（您必须停止记录才能设置选项）。导致问题代码运行，停止记录，搜索感兴趣的 ivar，向下钻取，您将能够看到所有保留、释放和自动释放发生的位置。

![](../Images/7838716286f7948b8b94a93abc6764ae.png)

认真考虑使用 ARC，没有理由不这样做，ARC 支持回 iOS 4.x。

顺便提一句：

```
title = [[NSString stringWithString:@""] retain]; 
```

可以写得更简洁：

```
title= @""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:40:58.187

我认为是从标题。您已经拥有该属性非原子，保留，所以这意味着保留计数为 1。

然后您指定另一个保留，使保留计数为 2。

在 dealloc 中，您释放它一次，将保留计数减少到 1。因此，保持字符串保留的这个 1 引用就是泄漏。

我不明白你为什么要这样初始化字符串......

# mysql - 在服务器重新启动时启用 mysql 事件调度程序

> ID：10071871
> 
> 赞同：5
> 
> 时间：2012-04-09T10:26:14.757
> 
> 标签：mysql, phpmyadmin, scheduling

我正在运行 phpmyadmin 并在我的个人计算机上安装了 apache 服务器。我的问题是我试图将 MySQL 设置`event_scheduler`为即使在服务器重新启动时也始终启用。我通过在服务器配置文件（`my.cnf`或`my.ini`）中设置以下命令行来阅读它应该可以工作：`event_scheduler=DISABLED`. 但是，我在哪里可以找到这个`my.cnf`或`my.ini`文件，命令行应该是`event_scheduler=DISABLED`还是`event_scheduler=ENABLED`看到我希望它始终启用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T10:45:01.120

您应该设置“ON”值（不是 ENABLED）。

在 [mysqld] 部分的配置文件中指定 'event-scheduler' 选项（不是 event_scheduler）。

此外，您可以使用“--event-scheduler”选项启动您的 MySQL 服务器，例如 -

外壳> mysqld --event-scheduler=ON

更多信息 - [event_scheduler 系统变量](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_event_scheduler)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-11T09:00:29.937

将 my.cnf 文件添加到 [mysqld] 部分。

```
GLOBAL event_scheduler=ON 
```

重启你的mysql服务器。使用此命令检查状态：

```
mysql> select @@GLOBAL.event_scheduler;
+--------------------------+
| @@GLOBAL.event_scheduler |
+--------------------------+
| ON                       |
+--------------------------+
1 row in set (0.00 sec)

mysql> SHOW VARIABLES LIKE 'event_scheduler';
+-----------------+-------+
| Variable_name   | Value |
+-----------------+-------+
| event_scheduler | ON    |
+-----------------+-------+
1 row in set (0.01 sec) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-06T09:49:51.417

`my.ini`这里是XAMPP的路径：

```
xampp\mysql\bin\my.ini 
```

打开`my.ini` 并添加以下内容

```
[mysqld]
event_scheduler=ON 
```

然后重启 MySQL 服务。

要检查状态，请使用以下 MySQL 查询：

```
SELECT @@event_scheduler 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-22T18:59:24.443

对于[WAMP](http://www.wampserver.com)：

1.  编辑您的 my.ini 文件并在 [mysqld] 部分下，添加以下内容：

    `event-scheduler=on`

2.  重启所有服务

3.  通过运行此查询进行验证：

    `select @@event_scheduler`;

要访问您的 my.ini 文件，只需单击 WAMP 托盘图标并将鼠标悬停在“MySQL”菜单上，然后单击“my.ini”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-04T10:27:35.660

对于OS X 上的[MAMP ：](http://blog-en.mamp.info/2010/02/how-to-set-mysql-default-storage-engine.html)

默认安装不包含`my.cnf`文件，因此您需要创建一个文件并设置默认配置。因此，要在 OS X MAMP 堆栈上启用调度程序，您需要：

1.  停止你的 MySQL 服务器
2.  `my.cnf`在您的文件夹中创建一个文件`/Applications/MAMP/conf/`，您需要 root 访问权限才能执行此操作（打开终端窗口），

    > sudo touch /Applications/MAMP/conf/my.cnf
    > 
    > 须藤纳米/Applications/MAMP/conf/my.cnf

3.  第二个 cmd 将打开 nano 编辑器，将以下内容粘贴到您的文件中，

    > [mysqld]
    > 
    > event_scheduler=开启

4.  保存 ( `^O`) 并退出 ( `^X`) nano 编辑器

5.  重新启动您的 MySQL 服务器。

# php - 用于计算最佳运输包装的 API/库

> ID：10071875
> 
> 赞同：0
> 
> 时间：2012-04-09T10:26:28.920
> 
> 标签：php, math, shipping, webshop

我正在为一个定制的网上商店（在 PHP 中）创建一个运输模块，结果证明它有点复杂（无论如何对我来说）；

在所需的运输过程中，（当前）有两个外部“运输箱/容器”，每个都可以包含不同的项目/产品组合。有大的和小的，小的显然更便宜。项目/产品（当前）属于“内盒”的三个维度。

我正在寻找一个 API/类，我可以在其中输入外箱的尺寸，然后输入要运送的内箱（或者更确切地说，产品）的数量和尺寸。然后应计算外箱及其内容物/包装顺序的最佳组合，以便需要最少数量的箱子。

不用说，我预计未来外盒、内盒的数量及其尺寸很可能会发生变化。

这甚至存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:38:21.837

这是著名的[打包问题](https://en.wikipedia.org/wiki/Packing_problem)的一个例子，其中大部分是[NP-hard](https://en.wikipedia.org/wiki/NP-hard)问题。要找到此类问题的最佳解决方案可能非常困难或不可能，因此您应该瞄准一个*足够好的*解决方案而不是*最佳*解决方案。

您应该检查与您的问题非常相似的[Bin 打包问题，不同之处在于您有两个不同的 bin 卷。](https://en.wikipedia.org/wiki/Bin_packing_problem)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:11:10.117

当您试图找出并实施一种装箱算法来制定最佳解决方案时，请让其中一个包装员写下一个查找表，以查找订单中最常见的项目组合。根据您告诉我们的情况，您只有 2 种尺寸的外盒和 3 种尺寸的内盒，您的一位包装员可能会在我写这个答案的时间内完成查找表。

现在，由于您是一名软件开发人员，请开发代码以读取查找表并在要打包新的项目组合时寻求帮助。将这些新组合以及如何打包它们存储在查找表中。随着业务的发展，开发查找表。

这种方法利用了人类在解决合理数量物体的 3D 包装问题方面的卓越技能。您不需要一个最佳解决方案，只要一个足够好，让您的客户不会经常查询包装数量的解决方案——您正在将成本转嫁给客户，不是吗？

# ajax - 在公共页面上使用 Ajax 的优缺点

> ID：10071877
> 
> 赞同：1
> 
> 时间：2012-04-09T10:26:41.230
> 
> 标签：ajax, zend-framework, jquery

我想制作一个像 WebMD 这样的症状检查器这样的项目 [WebMD Symptom Checker](http://symptoms.webmd.com/default.htm#./introView) 我不想登录用户与之交互。

我不想像 webmd 那样在 FLASH 中制作它，我想使用 JQuery 和 Ajax 制作它，

使用 Jquery 和 Ajax 做这样的项目的优点和缺点是什么，好吧，我将使用 Zend 框架来实现它

像这样的项目及其在公共页面上的 Ajax 请求是否会影响网站安全？它对SEO有影响吗？在这个项目上使用 Ajax 有什么缺点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:35:22.867

嗯，我不知道你所说的优点和缺点到底是什么意思，但我认为你的意思是你希望它在 HTML5 而不是 Flash 中实现。

**闪光强度：**

*   Flash 更为普遍（大多数桌面用户）。
*   Flash 开发者社区庞大而成熟。
*   开发人员工具功能强大且得到很好的支持。
*   设计师更喜欢在 Flash 中工作。
*   2D 和 3D API 比 Canvas 更成熟和可用。
*   Flash 让您可以更好地访问网络摄像头和录音。
*   Flash 更好地支持流式传输、安全和实时视频。

**闪光弱点：**

*   Flash 中嵌入的信息通常对搜索引擎不可见。
*   关于 Flash 导航的网站报告存在问题且繁琐。
*   Flash 打破了网络可用性标准。
*   缺乏一致的跨平台支持（并非所有设备都安装了相同的版本）。
*   嵌入 Flash 对象的代码未通过 w3c 验证。
*   一些用户禁用 Flash 以避免基于 Flash 的广告。
*   网站更新不断需要 Flash 技能。
*   Flash 中断搜索引擎站点预览。
*   Flash 不适用于 Mac OSX，Apple 的移动设备不支持 Flash 内容。

**HTML5 的优势：**

*   更适合移动设备（更低的电池消耗）。
*   HTML5 使用 DOM 和 HTML 支持，因此视频和音频嵌入不需要插件和 3rd 方程序。
*   与另一个网站相比，具有 HTML5 元素的网站在用于对一个网站上的页面进行编码的 HTML 方面具有更高的一致性。
*   更具描述性的语义
*   更丰富的媒体元素
*   HTML5 是未来。

**HTML5 的弱点**

*   只有现代浏览器支持它。
*   该语言本身被认为是一项正在进行的工作
*   富媒体必须以多种格式压缩才能与大多数浏览器兼容。
*   你必须使用 JavaScript

当然，您会发现许多库可以帮助您使用 html5。除了 JQuery 之外还有很多很棒的库，比如 [Modernizer](http://modernizr.com/)

我认为 Zend 框架可能导致与 HTML5 一起使用的唯一问题是它仍然不支持新的 HTML5 输入。

**更新：**

AJAX 在安全性方面与普通的 http 请求没有区别。几乎所有可以通过正常的 http 请求暴露的安全风险都可以使用 AJAX 来解决，因此缓解这些漏洞的方法是相同的。

作为一般规则，搜索引擎不会抓取由 JavaScript 或 Ajax 生成的内容。最值得注意的例外是 Google 的可抓取 Ajax。但这仅适用于谷歌，即便如此，这也是[一个坏主意。](http://isolani.co.uk/blog/javascript/BreakingTheWebWithHashBangs)

为了使您的游戏对搜索引擎更加友好，您需要通过静态链接提供内容。没有这些，您基本上拥有一个很难排名的单页网站。**但是**，如果您获得足够的传入链接，则*可以*，如果您的游戏非常好，这是可能的。

# firefox - 如何在构建时在firefox SpiderMonkey中设置默认的js引擎？

> ID：10071880
> 
> 赞同：0
> 
> 时间：2012-04-09T10:26:54.533
> 
> 标签：firefox, build, spidermonkey

众所周知，firefox中有几个JSengine（如SpiderMonkey，traceMonkey，jaegerMonkey等），我想知道我们在构建FF11.0或12.0时是否可以设置默认的JSengine SpiderMonkey（只有usr解释器模式）从源头？

例如，我们可以设置任何选项来实现它吗？如果可以，哪个选项可以做到？或者如果你知道其他方法，请告诉我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T21:08:55.443

只需使用首选项来关闭 JIT？您可以在编译之后或在编译之前通过编辑`modules/libpref/src/init/all.js`文件来执行此操作。

# python - 初始化 django 模型，从那一刻开始捕获衍生属性

> ID：10071882
> 
> 赞同：1
> 
> 时间：2012-04-09T10:27:04.473
> 
> 标签：python, django

我有一个具有以下字段的模型：

```
user = models.ForeignKey(User)
impact = models.IntegerField(default = value) 
```

我希望`value`用户`User.get_profile().someIntField`与传递给第一个字段的用户对象相同。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:30:32.187

覆盖`save`模型中的方法

```
class MyModel(models.Model):
    user = models.ForeignKey(User)
    impact = models.IntegerField()

    def save(self, *args, **kwargs):
        if not self.pk:
            self.impact = self.user.get_profile().someIntField
        super(MyModel, self).save(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T10:47:59.273

```
def __init__(self, *args, **kwargs):
    super(YourModel, self).__init__(*args, **kwargs)
    self.impact = self.user.get_profile().someIntField 
```

# c# - Datagrid c#中的交叉表

> ID：10071886
> 
> 赞同：1
> 
> 时间：2012-04-09T10:27:23.447
> 
> 标签：c#, sql

是否可以在数据网格中创建数据的交叉表表示。因为它适用于水晶报表，但我的要求是在 Windows 控件的数据网格中显示交叉表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:46:55.103

您可以使用[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)并按照您想要的方式获取已经组织好的数据。

要在表单上呈现它，您可能不得不求助于第三方控件，例如 Telerik 或[Infragistics 的 UltraWinGrid](http://blogs.infragistics.com/forums/p/37083/214714.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T22:00:18.530

我认为您必须自己旋转数据才能以正确的格式获取数据源。但是，LINQ 使这比以前容易得多。

# java - 如何在我的 JTextArea 中有行号？

> ID：10071887
> 
> 赞同：3
> 
> 时间：2012-04-09T10:27:37.643
> 
> 标签：java, swing, awt, jtextarea

是否可以在 a 中显示行号`JTextArea`？请告诉我如何在 JApplet 中编写代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T10:38:39.417

使用这个 [http://tips4java.wordpress.com/2009/05/23/text-component-line-number/](http://tips4java.wordpress.com/2009/05/23/text-component-line-number/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T10:40:13.237

[这可能对你有用](http://www.javaprogrammingforums.com/java-swing-tutorials/915-how-add-line-numbers-your-jtextarea.html)，[这个stackoverflow问题也](https://stackoverflow.com/questions/4618136/java-jtextarea-line-numbers)

# php - mysql中的嵌套选择

> ID：10071891
> 
> 赞同：0
> 
> 时间：2012-04-09T10:27:45.207
> 
> 标签：php, mysql, html

是否可以在 mysql 中创建类似这样的嵌套选择语句？

`SELECT * from myTable WHERE id = (SELECT id from data where dataId = 1);`

如果这不是制定这种陈述的正确方法，那么任何人都可以为我指出正确的方向来制定它的方式。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:29:53.507

```
SELECT * from myTable WHERE id IN (SELECT id from data where dataId = 1);
                                ^---- You should use in rather than = 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:30:42.070

这个语法很好。请注意，这仅在有一个 dataId 为 1 的数据时才有效。如果内部选择可能返回多个 id，那么最好使用：

```
SELECT * from myTable WHERE id IN (SELECT id from data where dataId = 1); 
```

# sql - SQL查询获取一列的最小值并将其与其他列的值相乘

> ID：10071894
> 
> 赞同：0
> 
> 时间：2012-04-09T10:27:55.097
> 
> 标签：sql, database

**我尝试做一个 sql 查询，通过将当前金额乘以所有账户的最低利率**，返回客户 ID、他们账户的货币和他们账户的年终金额

 **表就像

```
**customer**       **account**
 id                  id
 name                customer_id
 surname             curreny
                     cur_Amount
                     interest_rate 
```

我进行了如下查询，但它只返回具有最低利率的一行。

`SELECT customer.id, account.currency, account.cur_amount, MIN(account.interest_rate)*cur_amount AS End_Year_Balance FROM customer, account LEFT JOIN account on customer.id = account.customer_id`

如何通过乘以最低利率来列出所有具有切割者 ID 和年终余额的账户？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:44:59.397

```
SELECT
    customer.id, customer.name, customer.surname,
    account.id, account.currency, account.cur_Amount, account.interest_rate,
    account.cur_Amount * A2.LowestInterestRate

FROM
    customer
    INNER JOIN account ON (customer.id = account.customer_id)
    LEFT JOIN 
        (SELECT customer.id, MIN(interest_rate) LowestInterestRate 
         FROM account 
         GROUP BY customer.id
    ) AS A2 ON (customer.id = A2.customer_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:50:07.243

您需要从查询中删除**歧义**`GROUP BY`，如果您使用**AGGREGATE**函数，则应该使用。但是，这是一个适用于类似情况的示例查询。

```
select a.custid, a.custname, a.surname, 
b.accid, b.currency, b.curamount, b.interestrate, b.EndYearBalance 
from customer a 
left outer join 
(
select accid, custid, currency, curamount, MIN(interestrate) AS interestrate, 
ISNULL(MIN(interestrate)*curamount, 0) AS EndYearBalance 
from  account 
group by accid, custid, currency, curamount   
) as b on a.custid = b.custid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T10:37:22.130

这将适用于 MySQL

```
SELECT min(interest_rate) into @min_interest from account;

SELECT customer.id,account.currency,account.cur_amount,@min_interest*cur_amount AS End_Year_Balance 
FROM customer 
LEFT JOIN account 
ON customer.id = account.customer_id; 
```

这适用于任何数据库：

```
SELECT customer.id,account.currency,account.cur_amount,temp.min_interest*cur_amount AS End_Year_Balance 
FROM customer 
LEFT JOIN account ON customer.id = account.customer_id
LEFT JOIN (SELECT min(interest_rate) as min_interest from account) temp ON 1=1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T11:12:03.663

这应该有效并且非常简单：

```
SELECT
    c.id,
    a.currency,
    a.cur_amount,
    a.cur_amount * (SELECT MIN(interest_rate) FROM account)
FROM
    customer c left join account a on c.id = a.customer_id 
```**

# asp.net-mvc-3 - 日期选择器未保存到数据库

> ID：10071897
> 
> 赞同：0
> 
> 时间：2012-04-09T10:28:12.287
> 
> 标签：asp.net-mvc-3, entity-framework

连接日期选择器的问题

部分视图的代码

```
@model System.DateTime
@Html.TextBox("", Model.ToString("dd/MM/yy"), new { @class = "date" }) 
```

视图的代码

```
 @Html.TextBox("DateTime", (Model.AdvertStartDate.ToString()), new { @class = "date" }) 
```

脚本

```
 <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
 <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> 
```

用于日期选择器的代码

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.date').datepicker
        ({
            dateFormat: 'dd/mm/yy',
            showStatus: true,
            showWeeks: true,
            currentText: 'Now',
            autoSize: true,
            gotoCurrent: true,
            showAnim: 'blind',
            highlightWeek: true

        });
    });
</script> 
```

型号代码

```
 [Required]
   public DateTime AdvertStartDate { get; set; } 
```

日期正在插入文本框中，但未在数据库中更新

你能建议缺少的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:18:58.090

我认为由`<input>`渲染的 HTML 元素`TextBox("DateTime",...)`没有正确的名称（名称将是“DateTime”），因此`AdvertStartDate`当数据发布到服务器时，它没有正确绑定到您的模型属性。

您的“部分视图”对我来说就像一个 EditorTemplate。在这种情况下，您应该能够在您的视图中使用它：

```
@Html.EditorFor(model => model.AdvertStartDate) 
```

因为`AdvertStartDate`是`DateTime`包含 DatePicker 的 EditorTemplate 类型，所以应该使用它来呈现输入元素。

如果 EditorTemplate 文件的名称不是`DateTime.cshtml`- 像`AnotherTemplateName.cshtml`- 您可以显式指定模板：

```
@Html.EditorFor(model => model.AdvertStartDate, "AnotherTemplateName") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:37:46.990

Datapicker 不是 MVC 应用程序中易于实现的元素。

尝试考虑接下来的事情：

1.  确保将数据选择器中的数据发送到服务器（数据选择器应具有适当的名称）
2.  确保 datapicker 数据格式与您的应用程序数据格式相同（可能因所选文化而异） - 在这种情况下，数据被发送到服务器，但并不总是有效，因为 31.01 被转换为第 31 个月，第 1 个月。

# asp.net - 使用 Graph API 和 FQL 显示 Facebook 粉丝数

> ID：10071898
> 
> 赞同：0
> 
> 时间：2012-04-09T10:28:16.770
> 
> 标签：asp.net, facebook, facebook-graph-api, facebook-like, facebook-fql

在我的网站上，我用他们的 Facebook 点赞数显示了一些公司的名称。对于大多数公司来说，计数都在正常进行。但对于一些公司来说，这一数字为零。我已经看到了，我什至不能在没有登录 FB 的情况下打开这些公司的页面。我认为这些是安全页面。谁能指导我如何获得这些公司的粉丝/点赞数？我正在使用 ASP.NET。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:39:49.200

这与人口统计限制的页面有关。您需要一个活动用户`access_token`（能够看到该页面）来检索有关该页面的详细信息。

拥有活动访问令牌后，您可以通过 Graph API 请求检索粉丝数

```
https://graph.facebook.com/19292868552?fields=name,likes&access_token=... 
```

或下一个 FQL 查询：

```
SELECT page_id, name, fan_count FROM page WHERE page_id = 19292868552 
```

# c++ - 以下哪项会执行得更快？

> ID：10071908
> 
> 赞同：0
> 
> 时间：2012-04-09T10:29:49.540
> 
> 标签：c++, c, if-statement

> **可能重复：**
> [到“如果，如果，如果”或“如果，否则如果，否则如果，否则”](https://stackoverflow.com/questions/7414890/to-if-if-if-or-to-if-else-if-else-if-else)

1.

```
if(flag == 1)
{
    .....
}
else if(flag == 2)
{ 
     .....
}
else if(flag == 3) // true condition
{
     .....
} 
```

或
2。

```
if(flag == 1)
{
    .....
}
if(flag == 2)
{ 
     .....
}
if(flag == 3) // true condition
{
     .....
} 
```

如果它要最后执行`if`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T10:41:56.233

我的测试表明，第二个版本比前一个版本短了 4 条指令，但优化后的版本长度相同：

**我测试**
代码：

```
main(a) {
  if(a == 10)
    puts("10");
  else if(a == 20)
    puts("20");
  else if(a < 100)
    puts("yes");
} 
```

驳斥：

```
 0x00000000004004dc <+0>: push   rbp
   0x00000000004004dd <+1>: mov    rbp,rsp
   0x00000000004004e0 <+4>: sub    rsp,0x10
   0x00000000004004e4 <+8>: mov    DWORD PTR [rbp-0x4],edi
   0x00000000004004e7 <+11>:    cmp    DWORD PTR [rbp-0x4],0xa
   0x00000000004004eb <+15>:    jne    0x4004f9 <main+29>
   0x00000000004004ed <+17>:    mov    edi,0x4005c4
   0x00000000004004f2 <+22>:    call   0x4003b0 <puts@plt>
   0x00000000004004f7 <+27>:    jmp    0x40051b <main+63>
   0x00000000004004f9 <+29>:    cmp    DWORD PTR [rbp-0x4],0x14
   0x00000000004004fd <+33>:    jne    0x40050b <main+47>
   0x00000000004004ff <+35>:    mov    edi,0x4005c7
   0x0000000000400504 <+40>:    call   0x4003b0 <puts@plt>
   0x0000000000400509 <+45>:    jmp    0x40051b <main+63>
   0x000000000040050b <+47>:    cmp    DWORD PTR [rbp-0x4],0x63
   0x000000000040050f <+51>:    jg     0x40051b <main+63>
   0x0000000000400511 <+53>:    mov    edi,0x4005ca
   0x0000000000400516 <+58>:    call   0x4003b0 <puts@plt>
   0x000000000040051b <+63>:    leave  
   0x000000000040051c <+64>:    ret 
```

优化：

```
 0x00000000004004dc <+0>: sub    rsp,0x8
   0x00000000004004e0 <+4>: cmp    edi,0xa
   0x00000000004004e3 <+7>: jne    0x4004f1 <main+21>
   0x00000000004004e5 <+9>: mov    edi,0x4005c4
   0x00000000004004ea <+14>:    call   0x4003b0 <puts@plt>
   0x00000000004004ef <+19>:    jmp    0x400511 <main+53>
   0x00000000004004f1 <+21>:    cmp    edi,0x14
   0x00000000004004f4 <+24>:    jne    0x400502 <main+38>
   0x00000000004004f6 <+26>:    mov    edi,0x4005c7
   0x00000000004004fb <+31>:    call   0x4003b0 <puts@plt>
   0x0000000000400500 <+36>:    jmp    0x400511 <main+53>
   0x0000000000400502 <+38>:    cmp    edi,0x63
   0x0000000000400505 <+41>:    jg     0x400511 <main+53>
   0x0000000000400507 <+43>:    mov    edi,0x4005ca
   0x000000000040050c <+48>:    call   0x4003b0 <puts@plt>
   0x0000000000400511 <+53>:    add    rsp,0x8
   0x0000000000400515 <+57>:    ret 
```

**二、测试**
代码：

```
main(a) {
  if(a == 10)
    puts("10");
  if(a == 20)
    puts("20");
  if(a < 100)
    puts("yes");
} 
```

驳斥：

```
 0x00000000004004dc <+0>: push   rbp
   0x00000000004004dd <+1>: mov    rbp,rsp
   0x00000000004004e0 <+4>: sub    rsp,0x10
   0x00000000004004e4 <+8>: mov    DWORD PTR [rbp-0x4],edi
   0x00000000004004e7 <+11>:    cmp    DWORD PTR [rbp-0x4],0xa
   0x00000000004004eb <+15>:    jne    0x4004f7 <main+27>
   0x00000000004004ed <+17>:    mov    edi,0x4005c4
   0x00000000004004f2 <+22>:    call   0x4003b0 <puts@plt>
   0x00000000004004f7 <+27>:    cmp    DWORD PTR [rbp-0x4],0x14
   0x00000000004004fb <+31>:    jne    0x400507 <main+43>
   0x00000000004004fd <+33>:    mov    edi,0x4005c7
   0x0000000000400502 <+38>:    call   0x4003b0 <puts@plt>
   0x0000000000400507 <+43>:    cmp    DWORD PTR [rbp-0x4],0x63
   0x000000000040050b <+47>:    jg     0x400517 <main+59>
   0x000000000040050d <+49>:    mov    edi,0x4005ca
   0x0000000000400512 <+54>:    call   0x4003b0 <puts@plt>
   0x0000000000400517 <+59>:    leave  
   0x0000000000400518 <+60>:    ret 
```

优化：

```
 0x00000000004004dc <+0>: sub    rsp,0x8
   0x00000000004004e0 <+4>: cmp    edi,0xa
   0x00000000004004e3 <+7>: jne    0x4004f1 <main+21>
   0x00000000004004e5 <+9>: mov    edi,0x4005c4
   0x00000000004004ea <+14>:    call   0x4003b0 <puts@plt>
   0x00000000004004ef <+19>:    jmp    0x400507 <main+43>
   0x00000000004004f1 <+21>:    cmp    edi,0x14
   0x00000000004004f4 <+24>:    jne    0x400502 <main+38>
   0x00000000004004f6 <+26>:    mov    edi,0x4005c7
   0x00000000004004fb <+31>:    call   0x4003b0 <puts@plt>
   0x0000000000400500 <+36>:    jmp    0x400507 <main+43>
   0x0000000000400502 <+38>:    cmp    edi,0x63
   0x0000000000400505 <+41>:    jg     0x400511 <main+53>
   0x0000000000400507 <+43>:    mov    edi,0x4005ca
   0x000000000040050c <+48>:    call   0x4003b0 <puts@plt>
   0x0000000000400511 <+53>:    add    rsp,0x8
   0x0000000000400515 <+57>:    ret 
```

展位测试由 gcc 版本 4.7.0 20120324 (prerelease) (GCC) 在 Linux 3.2.14-1-ARCH x86_64 Intel(R) Core(TM) i5 CPU M 480 @ 2.67GHz 上编译。

**编辑：**正如@Als 建议的那样，我将提供具有基本优化的版本（`-O`GCC 中的标志）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T10:33:39.100

它们在逻辑上并不等价。一旦找到匹配条件，
First 将不会检查其他条件。 Second 检查每个条件，而不考虑任何先前的匹配。 `if`
`if`

如果您在第二种情况下使用块`return`内的语句，`if`那么它们在逻辑上将是等效的。我相信同样的性能。
但是，您需要在您的环境中对它们进行概要分析才能确定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T10:35:27.597

从技术上讲，您提供的两个代码片段并不等效，因此比较它们没有意义。

在第二个样本中可能会执行多个`if`块，而第一个样本保证只有一条执行路径通过该块。因此，在这一点上，如果您假设平均多个条件会成功，则可以说第一个会执行得更快。

但是，如果您假设只有一条路径会执行，那么除非您知道编译器如何将此代码转换为程序集，否则就无法确定地说，因为程序集没有条件原语（即`if-else`）。

汇编语言使用 和 等指令来`Compare`实现条件逻辑。在不了解相关优化的情况下，编译器可能无法说出哪个会执行得更快。`Jump if less than zero``Jump if zero`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T11:02:12.763

只是为了添加到@Haulet 的帖子，这是我在优化编译时得到的：

```
jirka@debian:~/xpath/libxml-xpathengine-perl$ diff -Naur ./-.s o2.s 
--- ./-.s       2012-04-09 12:50:50.000000000 +0200
+++ o2.s        2012-04-09 12:52:25.000000000 +0200
@@ -22,43 +22,34 @@
        subl    $16, %esp
        movl    8(%ebp), %eax
        cmpl    $10, %eax
-       je      .L8
-       cmpl    $20, %eax
        je      .L9
+       cmpl    $20, %eax
+       je      .L10
        cmpl    $99, %eax
-       jle     .L10
+       jle     .L3
        leave
        .cfi_remember_state
        .cfi_restore 5
        .cfi_def_cfa 4, 4
        .p2align 4,,4
        ret
-.L10:
-       .cfi_restore_state
-       movl    $.LC2, (%esp)
-       call    puts
-       leave
-       .cfi_remember_state
-       .cfi_restore 5
-       .cfi_def_cfa 4, 4
-       ret
-.L8:
+.L9:
        .cfi_restore_state
        movl    $.LC0, (%esp)
        call    puts
+.L3:
+       movl    $.LC2, (%esp)
+       call    puts
        leave
        .cfi_remember_state
        .cfi_restore 5
        .cfi_def_cfa 4, 4
        ret
-.L9:
+.L10:
        .cfi_restore_state
        movl    $.LC1, (%esp)
        call    puts
-       leave
-       .cfi_restore 5
-       .cfi_def_cfa 4, 4
-       ret
+       jmp     .L3
        .cfi_endproc
 .LFE0:
        .size   main, .-main 
```

如您所见，标签已重新标记（`L8 -> L9, L9 -> L10, L10 -> L3`），但代码大体相同（除非功能差异需要）。

我编译了

```
gcc-4.7 -S -O3 -march=k8 -x c - 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T10:33:09.000

同时; 如果第一个`if`条件为真，那么代码的第一个块将快速执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T10:35:37.110

从逻辑上讲，代码片段不是等效的。例如，第一个说

```
if (a==0)
{
}
else if (a < 10)
{
}
else if (a > 10)
{
} 
```

第二个是

```
if (a ==0)
{
}
if (a < 10)
{
}
if (a > 10)
{
} 
```

上面是一个非常琐碎的说明。但是，如果您试图比较 - 语句的执行时间`if`，假设它们在逻辑上是等价的，那么第一个语句会更快，因为`else`语句永远不会被执行。在第二种情况下，无论前面的语句`if`如何，都将评估条件。`if`

# iphone - UITabBar 似乎不接受我的语言设置

> ID：10071909
> 
> 赞同：0
> 
> 时间：2012-04-09T10:29:49.917
> 
> 标签：iphone, objective-c, ios, localization

我在用我想要的语言呈现我的 UITabBar 时遇到了一些困难。我正在为荷兰语市场开发一个应用程序，所以我希望荷兰语成为我的应用程序中使用的唯一语言。

该应用程序是一个选项卡栏应用程序，具有 5 个以上的选项卡，因此 UITabBarController 显示了其 moreNavigationController。

但是，它一直显示文本“More”和“Configure”，而不是荷兰语单词“Meer”和“Configureer”。我尝试过的任何方法似乎都无法解决此问题，我尝试过：

1.  将我 iPhone 的语言更改为荷兰语 -> 不，仍然有“更多”和“配置”

2.  在我的 AppDelegate 中将我的应用默认语言设置为荷兰语，如下所示：

    ```
    int main(int argc, char *argv[])
    {
        @autoreleasepool
        {
            [[NSUserDefaults standardUserDefaults] setObject: [NSArray arrayWithObjects:@"nl", nil] forKey:@"AppleLanguages"];
            return UIApplicationMain(argc, argv, nil, NSStringFromClass([MyAppDelegate class]));
        }
    } 
    ```

但还是没有运气...

2 号将是我的首选选项，因为我希望我的应用程序始终显示荷兰语文本，而不管系统默认设置如何。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:43:50.980

`CFBundleLocalizations`在 info.plist 中添加荷兰语。

# facebook - 如何知道用户是否第一次在我的网站上使用他们的 Facebook 帐户登录

> ID：10071912
> 
> 赞同：0
> 
> 时间：2012-04-09T10:29:58.717
> 
> 标签：facebook, login

我想让用户使用他们的 Facebook 帐户登录，但我想知道用户何时首次登录我的网站。所以我可以将他们的 facebook id 和 name 保存到我的数据库中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:05:08.117

当您将用户登录到您的站点时，您应该在数据库中查找以查看您是否已经保存了该用户 - 如果您没有保存他们，则它是一个新用户，您应该保存详细信息。

# c# - 是否可以在 C# 中伪造 Useragent？

> ID：10071914
> 
> 赞同：0
> 
> 时间：2012-04-09T10:30:23.450
> 
> 标签：c#, .net, web-crawler

我想用 C# 创建一个爬虫。*问题是一些网站在他们的robots.txt*文件中禁用了黑名单爬虫，使用：

```
User-agent: *
Disallow: / 
```

有没有办法可以伪造我的请求以表明我是例如 Googlebot？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:34:19.617

`HttpWebRequest`有`.UserAgent`，但是 - 我只想说：不要。

当然，您的观点 re robots.txt 是没有实际意义的；那是**你**要遵循的。如果你编写了一个行为不端的工具，`robots.txt` **不管**你声称自己的用户代理是什么，它都会忽略，那么你应该很快就会被列入黑名单。

特别是，试图冒充任何主要参与者都是非常可疑的。坦率地说，我希望大多数主要站点也会检查传入的 IP 范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:34:11.447

是的，HttpWebRequest 具有用户代理的属性。您可以将其设置为任何内容。

# php - 在文本框中显示 cookie 值

> ID：10071920
> 
> 赞同：-1
> 
> 时间：2012-04-09T10:30:50.383
> 
> 标签：php, html

我必须在文本框中显示一个 cookie 值，
但是该值在两边都有很多空间
我正在应用 trim() 但仍然没有修复

```
 < ? php
 uName="";
 if(isset($_COOKIE["uName"]))
 { $uName=trim($_COOKIE["uName"]);}
 ?>
 <input type="text" name="uName" value="<?php echo $uName; ?>"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:47:35.167

请修复代码第一行中的错误：

```
$uName = ""; 
```

出于调试目的，我使用[本文中描述的函数](https://stackoverflow.com/questions/9990414/asterisk-agi-php-file-debugging/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T20:37:28.630

我已经解决了。
错误在这里

```
<input type="text" value="<?php echo $_COOKIE["uName"]; ?>"> 
```

现在我已将其替换为

```
<input type="text" <?php echo "value='".$_COOKIE["uName"]."'"; ?> > 
```

现在工作正常。

# macos - Automator、AppleScript 或其他？

> ID：10071921
> 
> 赞同：1
> 
> 时间：2012-04-09T10:30:51.447
> 
> 标签：macos, cocoa, automation, applescript

我需要通过一次向它传递一系列参数来自动化我的应用程序。在 Windows 中，我将它们全部作为命令行从快捷方式传递，但我需要对 OSX 执行相同操作。

我一直在看 AppleScript，但似乎我需要像`tell myapp to use <x>`then一样单独发送每个参数`tell myapp to use <y>`。Automator 看起来可以做我想做的事，但看起来太复杂了。

我的最终目标是通过将文件拖放到桌面上的图标上来发送一系列文本参数，然后是文件路径列表。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:31:20.713

如果我理解正确，有问题的应用程序接受命令行参数。然后，您所需要的只是一个 AppleScript *droplet*，它接收文件并将其路径作为（空格分隔的）参数传递给 shell 命令：

```
on open these_items
    set file_args to ""
    repeat with one_item in these_items
        set file_args to file_args & " " & quoted form of POSIX path of one_item
    end repeat
    set command to "open" -- replace this with your shell command + arguments
    do shell script (command & file_args)
end open 
```

（基于[此论坛帖子](http://hintsforums.macworld.com/showpost.php?p=482254&postcount=3)）

# javascript - 使用 JavaScript 在 URL 中添加斜杠

> ID：10071922
> 
> 赞同：-1
> 
> 时间：2012-04-09T10:30:58.043
> 
> 标签：javascript

我有一个输入字段，它接受来自用户的 url，我需要像这样检查斜杠：

*   www.example.com（添加斜线）
*   www.exaple.com/（忽略）
*   www.example.com/index.php（忽略）

我如何在 JavaScript 中实现这一点？

PS .htaccess 和 php 不是选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:34:36.030

试试这个 -

```
function URLFormat() {
    var url = document.getElementById('inputURL').value;
    var urlParts = url.split("/")
    var result = '';
    for (i = 0; i < urlParts.length; i++) {
        if (i == urlParts.length - 1) {
            if (urlParts[i].indexOf('.') > -1) {
                // trailing slash not required
                result = url;
            }
            else {
                if (urlParts[i].indexOf('#') > -1) {
                    // trailing slash not required
                    result = url;
                }
                else {
                    //Assume this is a folder and add a slash
                    result = url + '/';
                }
            }
        }
    }
    alert(result);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:33:26.717

```
var input = "http://www.example.com";
var hasTrailingSlash = input.charAt(input.length - 1) === "/"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T11:41:30.393

试试这个

```
function func(url) {
     var domain = url.split("/")[0];
     var answer;
     if(url == domain){
       answer = url + "/";
     } else {
       answer = url;
     }
     alert(answer);
} 
```

# django - 基于模型的Django搜索

> ID：10071923
> 
> 赞同：-1
> 
> 时间：2012-04-09T10:31:08.167
> 
> 标签：django, django-models, django-templates, django-views

我是 Django 的新手。我正在尝试编写一个书店程序。但我有一些困惑。我在 model price 和 bookauthors 中有两个字段。我想写一个视图来根据价格范围搜索书籍。这意味着如果一个人选择两个金额（价格）和作者姓名（作者姓名）之间的价格范围。我想根据他们的选择显示可用的书籍。我如何编写代码以获得这些结果

我的模型：

```
 class books(models.Model):
             price = models.IntegerField(max_length=500,null=True,blank=True)
             authorname = models.CharField(blank=True,null=True)
             book=models.CharField(blank=True,null=True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:03:58.407

1.  “作者”拼写为“作者”
2.  authorname 最有可能更适合作为 CharField 而不是 TextField
3.  特别是如果您要搜索它们
4.  您确定要搜索确切的价格吗？价格高于/低于/范围似乎更有可能
5.  您是否阅读[了有关过滤的文档](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#methods-that-return-new-querysets)中的任何内容？
6.  或关于[意见](https://docs.djangoproject.com/en/1.4/topics/http/views/)？
7.  或关于[模板](https://docs.djangoproject.com/en/1.4/#the-template-layer)？
8.  您是否考虑过为作者创建模型？
9.  将“书”字段重命名为“标题”是否更好？

阅读这些内容，寻找答案，并在您努力（或完成高中？）后返回一些具体问题。

# c - 警告：0 标志忽略精度和 '%x' gnu_printf 格式

> ID：10071924
> 
> 赞同：2
> 
> 时间：2012-04-09T10:31:08.940
> 
> 标签：c, data-structures, warnings, printf

我在 C 中编译时收到以下警告。

```
 ../tcpuip/uip_arp.c: In function 'display_arp_table':
    ../tcpuip/uip_arp.c:547: warning: '0' flag ignored with precision and '%x' gnu_p
    rintf format
    ../tcpuip/uip_arp.c:547: warning: '0' flag ignored with precision and '%x' gnu_p
    rintf format
    ../tcpuip/uip_arp.c:547: warning: '0' flag ignored with precision and '%x' gnu_p
    rintf format
    ../tcpuip/uip_arp.c:547: warning: '0' flag ignored with precision and '%x' gnu_p
    rintf format
    ../tcpuip/uip_arp.c:547: warning: '0' flag ignored with precision and '%x' gnu_p
    rintf format
    ../tcpuip/uip_arp.c:547: warning: '0' flag ignored with precision and '%x' gnu_p
    rintf format
    ../tcpuip/uip_arp.c:547: warning: '0' flag ignored with precision and '%x' gnu_p
    rintf format
    ../tcpuip/uip_arp.c:547: warning: '0' flag ignored with precision and '%x' gnu_p
    rintf format
    ../tcpuip/uip_arp.c:547: warning: '0' flag ignored with precision and '%x' gnu_p
    rintf format
    ../tcpuip/uip_arp.c:547: warning: '0' flag ignored with precision and '%x' gnu_p
    rintf format
    ../tcpuip/uip_arp.c:547: warning: '0' flag ignored with precision and '%x' gnu_p
    rintf format
    ../tcpuip/uip_arp.c:547: warning: '0' flag ignored with precision and '%x' gnu_printf format 
```

错误所在的行是

```
 RELEASE_MSG("MAC: %0.2x.%0.2x.%0.2x.%0.2x.%0.2x.%0.2x  ",(unsigned char)tabptr->ethaddr.addr[0],(unsigned char)tabptr->ethaddr.addr[1],(unsigned char)tabptr->ethaddr.addr[2],(unsigned char)tabptr->ethaddr.addr[3],(unsigned char)tabptr->ethaddr.addr[4],(unsigned char)tabptr->ethaddr.addr[5]); 
```

tabptr 是 struct arp_entry 的指针

```
PACKED struct arp_entry {
  u16_t ipaddr[2];
  struct uip_eth_addr ethaddr;
  u8_t time;
#ifdef _ALIGNED_
  u8_t dummy;
#endif
} 
```

ethadder 是 struct uip_eth_addr 的指针

```
PACKED struct uip_eth_addr {
  u8_t addr[6];
}  ; 
```

请如果有人可以分享一些关于这个警告的信息。我只知道 %0.2x 表示字符为两位数十六进制。帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T10:38:52.337

格式字符串的`%0.2x`意思是：

*   以十六进制打印一个无符号整数
*   打印至少两个数字
*   从左边用零填充

由于精度定义了输出的最小位数，零填充将被忽略（来自规范）。你可以使用，`%.2x`否则`%02x`会做你想做的事。

要得到

```
 1
  11
55555 
```

你会用`%4x`.

```
 01
  11
 111 
```

将会`%4.2x`

```
0001
0011
55555 
```

将是`%04x`或`%.4x`。

请注意，值签名时存在差异。精度定义了*位数*，这意味着该值将多占用一个符号空间。使用最小输出宽度，符号已经被计算在内：

```
$ printf "%.5i\n%05i\n" '-11' -11
-00011
-0011 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T10:35:38.627

你当然想写：

`%02x`代替`%0.2x`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T10:34:25.047

实际上，`%2.2x`将是 2 位十六进制。 `0`是一个格式标志，表示零填充而不是空白填充，但是由于您没有指定字段宽度，只有精度，所以没有意义。

# asp.net-mvc-3 - 如何将Listbox的值保存在数据库中？

> ID：10071927
> 
> 赞同：1
> 
> 时间：2012-04-09T10:31:51.133
> 
> 标签：asp.net-mvc-3, c#-4.0

我在 asp.net MVC-3 中开发我的项目。

在这些模块中，我创建了一个用于创建团队的视图。其中有一个项目名称下拉列表。和一个列表框（ListBox-1），用于从下拉列表中显示所选项目的成员。并且还有另一个列表框（ListBox-2）用于传输/选择其中的选定或所有记录（成员姓名）。这是使用javascript完美完成的。

我必须将所有数据保存在该表格的数据库中。因为我必须保存显示在数据库中的第二个列表框（ListBox-2）中的团队成员列表。这些我的问题是如何获取该列表框（ListBox-2）的数据并将其保存在数据库字段中？

下面是我的创建团队视图... ![在此处输入图像描述](../Images/d6e360ddb455f55bd288e5310bedccfa.png)

在这种形式中，第一个下拉列表显示项目名称并且下拉列表下方有两个列表框，用于显示项目的成员名称

列表框的查看代码如下..

```
Dropdownlist for Project
  <%: Html.DropDownListFor(model => model.availableproject, new SelectList(ViewBag.Projects as System.Collections.IEnumerable, "project_id", "project_name"),"Select Project", new { id = "ddlCars" })   %> 

code of listbox.
 <div class="ddlModels" style="float:left; ">
                              <%--  <%: Html.ListBox("projectmembers_id") %>  --%>
                                 <%: Html.ListBoxFor(Models => Models.availableuser, new SelectList(Enumerable.Empty<SelectListItem>(), "user_id", "user_login_name"),
                             new { id = "ddlModels2" }) %>

                            </div>

                            <div style="display:inline; float:left; margin-left:5px; margin-right:5px; margin-top:10px;">
                                <input type="button" name="add" id="alladd"  onclick="CopyListsall();" value=">>" style="width:27px; height:15px; font-size:8px; color:#56a1d6;"/><br />
                                <input type="button" name="add" id="add" onclick="CopyLists();"value=">" style="width:27px; height:15px; font-size:8px; color:#56a1d6;"/><br /><br />
                                <input type="button" name="remove" id="allremove"  onclick="RemoveListsall();" value="<<" style="width:27px; height:15px; font-size:8px; color:#56a1d6;" /><br />                
                                <input type="button" name="remove" id="remove"  onclick="RemoveLists();"  value="<" style="width:27px; height:15px; font-size:8px; color:#56a1d6;" />
                            </div>

                            <div class="ddlModels" style="float:left;">
                             <%: Html.ListBoxFor(Models => Models.availableuser, new SelectList(Enumerable.Empty<SelectListItem>(), "user_id", "user_login_name"),
                             new { id = "ddlModels1" }) %>
                             <%-- <%: Html.ListBox("projectmembers_id") %>--%>
                            </div> 
```

模型代码（.cs 文件）

```
namespace ProjectManagementSystem.Models
{
    public class TeamCreate
    {

        [Required(ErrorMessage = "Empty Not Allow")]
        public int team_id { get; set; }

        [Required(ErrorMessage = "Empty Not Allow")]
        [DisplayName("Team Name")]
        public string team_name { get; set; }

        [Required(ErrorMessage = "Empty Not Allow")]
        public int project_id { get; set; }

        [Required(ErrorMessage = "Empty Not Allow")]
        public string project_name { get; set; }

        [Required(ErrorMessage = "Empty Not Allow")]
        public int projectmembers_id { get; set; }

        [Required(ErrorMessage = "Empty Not Allow")]
        public int projectmemberuser_id { get; set; }

        [Required(ErrorMessage = "Empty Not Allow")]
        public int user_id { get; set; }

        public int SerialNumber { get; set; }

        [Required(ErrorMessage = "Empty Not Allow")]
        [DisplayName("Team Leader")]
        public string user_real_name { get; set; }

        [Required(ErrorMessage = "Empty Not Allow")]
        public int technology_skill_id { get; set; }

        [Required(ErrorMessage = "Empty Not Allow")]
        public string technology_skill_name { get; set; }

        [Required(ErrorMessage = "Empty Not Allow")]
        public string team_description { get; set; }

        [Required(ErrorMessage = "Empty Not Allow")]
        public int leader_id { get; set; }

        public bool t1 { get; set; }

        public List<user_master> availableuser;
        public List<project_master> availableproject;
        public List<team_master> availableteam;
        public List<team_to_user> availableteamuser;

        public List<technology_skill_master> availabletechnology;

        public List<int> SelectSkill { get; set; }
        public List<int> lbtechnologyskillname2 { get; set; }

        public List<int> ddlModels { get; set; }
        public List<int> ddlModels1 { get; set; }

    }
} 
```

第二个.cs文件来获取数据..

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace ProjectManagementSystem.Models
{
    public class TeamCreateFetch
    {
        private int counter = 1;

        //ProjectManagementSystemEntities3 pb = new ProjectManagementSystemEntities3();
        public static IList<TeamCreate> all()
        {     

            IList<TeamCreate> result =
                (IList<TeamCreate>)HttpContext.Current.Session["team1"];

            if (result == null)
            {
                ProjectManagementSystemEntities3 pb = new ProjectManagementSystemEntities3();

                HttpContext.Current.Session["team1"] = result =

                    ( from l in pb.team_master
                     join u in pb.user_master
                     on l.user_id equals u.user_id
                     select new TeamCreate
                     {
                         //SerialNumber= counter++,
                         team_id= l.team_id,
                         user_id = u.user_id,
                         team_name= l.team_name,
                         user_real_name=u.user_real_name,

            }

            return result;
        }
    }
} 
```

我的数据库如下...

**表名 - team_master**

```
team_id
team_name
user_id(FK with user_id of "user_master")
team_description 
```

**表 2 名称-team_to_user**

```
user_id(PK)
user_real_name 
```

**表 3 名称-team_to_user**

```
team_id (FK with team id of "team_master")
user_id (FK with user_id of "user_master") 
```

现在我必须将第二个 ListBox 的值保存在 user_id 字段的表“team_to _user”中。

**那么如何在 MVC-3 中做到这一点？**

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:31:00.487

我建议取消双列表框并将其实现为单个 MultiSelectListBox。

该模型

```
public class MyClass {
    [Required]
    [Display(Name = "Items Selected (Use ctl + click to select multiple)")]
    public int[] SelectedItems { get; set; }
    public IEnumerable<ItemDTO> Items { get; set; }
}

public class ItemDTO { 
    public int ID { get; set; }
    public string Name { get; set; }
} 
```

风景

```
@Html.LabelFor(model => model.SelectedItems):                                                     
@Html.ListBoxFor(model => model.SelectedItems, new MultiSelectList(Model.Items, "ID", "Name", Model.SelectedItems))
@Html.ValidationMessageFor(model => model.SelectedItems) 
```

在您的控制器中，只需遍历 SelectedItems 数组并保存每个

# sql - 有没有办法在一个 SELECT 语句中做到这一点？使用分组依据

> ID：10071928
> 
> 赞同：2
> 
> 时间：2012-04-09T10:31:51.663
> 
> 标签：sql, sql-server

我有一张表，表 1。在这张表中是名称、城市、价格。名称都是唯一的，城市可以重复使用。我想做一个查询，给出每个城市的最高价格，以及与该行关联的名称。为了获得每个城市的最高价格，我只是这样做：

```
SELECT MAX(price), city FROM table1 GROUP BY city 
```

但我也想要这个名字。如果我尝试

```
SELECT MAX(price), city, name FROM table1 GROUP BY city 
```

然后我得到一个关于 name 如何不包含在 group by 中的查询错误。如果我将 name 添加到 group by，那么它不会做我想要的。我可以想到如何使用两个查询来做到这一点，但我敢打赌有一种方法可以做到这一点。我错过了什么？

我在 stackoverflow 上发现了一些类似的问题，但它们似乎都在做一些比我试图做的更复杂的事情。我只使用过简单的 SQL 查询，所以我正在自学一些更高级的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T10:41:23.287

```
WITH RankedPrices AS (
    SELECT *, ROW_NUMBER() OVER (PARTITION BY city ORDER BY price DESC) AS ix
    FROM table1
)
SELECT * FROM RankedPrices WHERE ix=1; 
```

请注意，如果一个城市中的两种产品价格最高且价格相同，您没有指定会发生什么。此处的此查询返回两者中的任何一个（但仅返回一个），您也可以以不同的方式处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:35:28.497

```
SELECT
  name, city, price
FROM
  table1 t
WHERE
  price = (SELECT MAX(price) FROM table 1 WHERE city = t.city) 
```

如果有很多行，则`(city, price)`一次又一次的索引有助于此查询的性能。`(price)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T10:36:25.207

```
SELECT name, city, price
FROM table1 t
WHERE price = (SELECT MAX(price) FROM table1 WHERE city = t.city) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T11:08:58.973

**只是为了完整起见**，这里有一个使用 的示例`GROUP BY`，但在处理每个城市的重复最高价格方面，与 Tomalak 和 Logan 的其他解决方案有相同的警告：

```
SELECT t2.city, t2.name, t2.price
    FROM (SELECT city, MAX(price) AS price FROM table1 GROUP BY city) AS t
    JOIN table1 AS t2 ON t.city = t2.city AND t.price = t2.price 
```

我更喜欢排名方法，因为它更清晰、更灵活。

# java - 在jsp页面中调用bean方法

> ID：10071931
> 
> 赞同：1
> 
> 时间：2012-04-09T10:31:57.720
> 
> 标签：java, oop, jsp, servlets, javabeans

我有一个可以创建 bean 的类，并且该 bean 很少有 get 和 set 方法（例如 setId 和 getId，现在我将这个 java 文件包含在 jsp 页面中，现在我的问题是如何转发 bean 返回的值到jsp文件？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:10:49.187

只需将 bean 放在您需要它可用的范围内。例如，如果它是`User`需要在会话范围内的类：

```
request.getSession().setAttribute("user", user); 
```

这样，`user`实例就可以通过 EL 中的属性名称`"user"`获得，如下所示`${user}`。然后，要通过 getter 方法访问其属性，只需`.`在 EL 中使用句点运算符，您可以在其中指定属性名称。

```
${user.id} 
${user.firstname}
${user.lastname}
... 
```

无需将所有属性单独放在请求范围内。

### 也可以看看：

*   [我们的 JSP 维基页面](https://stackoverflow.com/tags/jsp/info)
*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)
*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T11:00:59.750

这应该是您的 servlet 中的内容：

```
MyBean bean = new MyBean(); //This should be your bean
Object o1 = bean.getObject1(); //Please don't use Object, use the correct type
Object o2 = bean.getObject2();

request.setAttribute("name",o1); //name can be anything you want
request.setAttribute("test",o2);
//forward to JSP 
```

========================================

在您的 jsp 中，您可以使用 EL：

```
<!-- This is the firstObject -->
<p>${name}</p>

<!-- This is the second Object -->
<b>${test}</b> 
```

========================================

或使用旧样式：Bean：

```
<!-- This is the first Object, use the correct type in class -->
<jsp:useBean id="name" scope="request" class="java.lang.Object" /> 
```

现在您可以访问 bean 的属性：

```
<jsp:getProperty name="name" property="firstName"/> 
```

或者：

```
<%= name.getFirstName() %> 
```

========================================

通常很少使用第二部分。现在大多数人都使用 EL。但我只是把它包括在内，以涵盖所有内容

# c++ - 制作一个旋转器的功能，可以在一天中的每一分钟创建一个时间戳

> ID：10071934
> 
> 赞同：0
> 
> 时间：2012-04-09T10:32:30.760
> 
> 标签：c++, logging, rotator, logrotate, log-rotation

我有一个日志项目，我需要知道如何构建一个功能，以便旋转器在程序运行时每分钟检查一次，并为每分钟创建时间戳，只是为了将全天的时间戳存储到日志文件中，请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:58:14.117

一个适合您需求的示例异步计时器类...

MyPeriodicTimer.hh

```
#include "MyTimeOutHandler.hh"
#include <pthread.h>
#include <iostream>

using namespace std;

void* func(void* ptr);

class MyPeriodicTimer
{
    public:
       MyPeriodicTimer(MyTimeOutHandler* handler,int ms){
            milliSecondsM = ms;
            handlerM = handler;
            createClock();
       }
       void act(){
            time_t rawtime;
            time ( &rawtime );
            handlerM->handleTimeOut(&rawtime);
            sleep(milliSecondsM);
       }
       pthread_t getThread(){
           return clockThreadM;
       }
private:

   void createClock(){
        int retVal = pthread_create( &clockThreadM,NULL,&func,(void*)this);
        pthread_join(clockThreadM,NULL);
    }
    int milliSecondsM;
    MyTimeOutHandler* handlerM;
    pthread_t clockThreadM;
};

void* func(void* obj){
    while(1){
      (reinterpret_cast<MyPeriodicTimer*>(obj))->act();
   }
} 
```

定义处理超时的接口

MyTimeOutHandler.hh

```
#ifndef MY_TIMEOUT_HANDLER_HH
#define MY_TIMEOUT_HANDLER_HH

#include <time.h>

class MyTimeOutHandler{
  public:
    virtual void handleTimeOut(time_t*) = 0;
};

#endif 
```

创建你的 LogHandler

日志处理程序.cc

```
#include "MyTimeOutHandler.hh"
#include "MyPeriodicTimer.hh"
#include <iostream>
#include <time.h>

using namespace std;

class LogHandler : public MyTimeOutHandler{

  public:

    void start(int ms){
    MyPeriodicTimer timer(this,ms);
    }

    /* CallBack when timer is fired */
    void handleTimeOut(time_t* time){
        // Implement your Logging functionality Here
    cout<<"Time : "<<ctime(time)<<endl;
    }

};

int main(){
    LogHandler l;
    l.start(60);
     return 0;
} 
```

输出：

```
>g++ -pthread LogHandler.cc

>./a.out
Time : Tue Apr 10 17:24:17 2012
Time : Tue Apr 10 17:25:17 2012
Time : Tue Apr 10 17:26:17 2012 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-09T11:03:17.907

我建议使用互斥锁进行检查： http: [//msdn.microsoft.com/en-us/library/ms686927%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms686927%28VS.85%29.aspx) 时间戳和日志文件与它无关。使用 MSDN - 你会在那里找到示例。

# jasper-reports - 如何删除 JasperReports 中文本字段之间的额外空格？

> ID：10071943
> 
> 赞同：5
> 
> 时间：2012-04-09T10:33:29.110
> 
> 标签：jasper-reports

我在 Header 中创建了三个文本字段。我已将参数放入所有`textField`元素中。当我不调用三个`textField`元素的三个参数之一时。它将显示 2 个`textField`元素。现在的问题是文本字段之间有空格。

怎么去掉空格？

这是我的代码：

```
<textField isBlankWhenNull="true">
    <reportElement x="0" y="18" width="555" height="35" isRemoveLineWhenBlank="true"/>
    <textElement textAlignment="Center">
        <font size="12"/>
    </textElement>
    <textFieldExpression><![CDATA[$P{daterangefrom}  && $P{daterangeto}  ?  "From ( " + $P{daterangefrom} + " - " + $P{daterangeto} + ")"
: $P{weeks}  && $P{monthy} && $P{yrs} ? "For week " + $P{weeks} +" "+ $P{monthy} +" "+ $P{yrs}
: $P{monthy}  && $P{yrs} ? "For monthly " +$P{monthy} +" "+ $P{yrs}
: $P{quarter}  &&  $P{yrs}  ? "For Quarter " + $P{quarter} +" "+$P{yrs}
: $P{yrs}  ? "For " + $P{yrs}
: null]]>
    </textFieldExpression>
</textField> 
```

这是我的结果：

![在此处输入图像描述](../Images/19b3fb4e70b33a72892e9d0ba9154dd3.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T08:15:53.270

您可以使用属性设置为value的 3 个*`textField`*元素。***`isRemoveLineWhenBlank`***`true`

示例（jrxml 文件）：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport .. topMargin="0" bottomMargin="0">
    <parameter name="parameter1" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <parameter name="parameter2" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <parameter name="parameter3" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <title>
        <band height="102" splitType="Stretch">
            <textField isBlankWhenNull="true">
                <reportElement x="163" y="9" width="100" height="20" isRemoveLineWhenBlank="true"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$P{parameter1} == null ? null : "Parameter1: " + $P{parameter1}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="163" y="29" width="100" height="20" isRemoveLineWhenBlank="true"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$P{parameter2} == null ? null : "Parameter2: " + $P{parameter2}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="163" y="49" width="100" height="20" isRemoveLineWhenBlank="true"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$P{parameter3} == null ? null : "Parameter3: " + $P{parameter3}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="163" y="73" width="100" height="20"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <text><![CDATA[Static text]]></text>
            </staticText>
            <line>
                <reportElement x="63" y="6" width="447" height="1"/>
            </line>
            <line>
                <reportElement x="73" y="96" width="447" height="1"/>
            </line>
        </band>
    </title>
</jasperReport> 
```

报告设计`iReport`： ![iReport 中的报表设计](../Images/5e50b64b852a1077f230becff9ff1e1b.png)

对于*parameter1=null、parameter2=null、parameter1=value3*，结果将是： ![iReport 中的结果（预览模式）](../Images/8b384127be8644bc0135b84ee12ab7b0.png)

***更新***

为了解决向上移动的问题，*`textField`*如果上面的元素是隐藏的，您可以使用*`Frame`*容器。您应该添加 2 个框架（每列一个）并*`textField`*在每个框架中放置 2 个元素（2 行）。

示例（jrxml 文件）：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport .. topMargin="0" bottomMargin="0">
    <parameter name="par1" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <parameter name="par2" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <parameter name="par3" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <parameter name="par4" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <title>
        <band height="80" splitType="Stretch">
            <line>
                <reportElement x="10" y="6" width="520" height="1"/>
            </line>
            <line>
                <reportElement x="10" y="72" width="520" height="1"/>
            </line>
            <frame>
                <reportElement x="329" y="10" width="172" height="59"/>
                <frame>
                    <reportElement x="13" y="3" width="60" height="54"/>
                    <textField isBlankWhenNull="true">
                        <reportElement x="1" y="20" width="52" height="20" isRemoveLineWhenBlank="true"/>
                        <box>
                            <topPen lineWidth="1.0"/>
                            <leftPen lineWidth="1.0"/>
                            <bottomPen lineWidth="1.0"/>
                            <rightPen lineWidth="1.0"/>
                        </box>
                        <textElement/>
                        <textFieldExpression><![CDATA[$P{par3} == null ? null : "P3: " + $P{par3}]]></textFieldExpression>
                    </textField>
                    <textField isBlankWhenNull="true">
                        <reportElement x="1" y="0" width="52" height="20" isRemoveLineWhenBlank="true"/>
                        <box>
                            <topPen lineWidth="1.0"/>
                            <leftPen lineWidth="1.0"/>
                            <bottomPen lineWidth="1.0"/>
                            <rightPen lineWidth="1.0"/>
                        </box>
                        <textElement/>
                        <textFieldExpression><![CDATA[$P{par1} == null ? null : "P1: " + $P{par1}]]></textFieldExpression>
                    </textField>
                </frame>
                <frame>
                    <reportElement x="73" y="3" width="70" height="54"/>
                    <textField isBlankWhenNull="true">
                        <reportElement x="1" y="0" width="52" height="20" isRemoveLineWhenBlank="true"/>
                        <box>
                            <topPen lineWidth="1.0"/>
                            <leftPen lineWidth="1.0"/>
                            <bottomPen lineWidth="1.0"/>
                            <rightPen lineWidth="1.0"/>
                        </box>
                        <textElement/>
                        <textFieldExpression><![CDATA[$P{par2} == null ? null : "P2: " + $P{par2}]]></textFieldExpression>
                    </textField>
                    <textField isBlankWhenNull="true">
                        <reportElement x="1" y="20" width="52" height="20" isRemoveLineWhenBlank="true"/>
                        <box>
                            <topPen lineWidth="1.0"/>
                            <leftPen lineWidth="1.0"/>
                            <bottomPen lineWidth="1.0"/>
                            <rightPen lineWidth="1.0"/>
                        </box>
                        <textElement/>
                        <textFieldExpression><![CDATA[$P{par4} == null ? null : "P4: " + $P{par4}]]></textFieldExpression>
                    </textField>
                </frame>
            </frame>
            <textField isBlankWhenNull="true">
                <reportElement x="10" y="30" width="52" height="20" isRemoveLineWhenBlank="true"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$P{par3} == null ? null : "P3: " + $P{par3}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="10" y="10" width="52" height="20" isRemoveLineWhenBlank="true"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$P{par1} == null ? null : "P1: " + $P{par1}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="64" y="10" width="52" height="20" isRemoveLineWhenBlank="true"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$P{par2} == null ? null : "P2: " + $P{par2}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="64" y="30" width="52" height="20" isRemoveLineWhenBlank="true"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$P{par4} == null ? null : "P4: " + $P{par4}]]></textFieldExpression>
            </textField>
        </band>
    </title>
</jasperReport> 
```

报告设计`iReport`： ![iReport 中的设计。 两种情况](../Images/ffff8dc1ed9974e7ccb327c10842104e.png)

对于*par1=null、par2=2、par3=3、par4=4*，结果将是： ![iReport 预览中的结果。 两种情况](../Images/88407c49830d106d0d15ce0069d30812.png)

您可以比较结果 - 左侧是在不使用`frame`的情况下完成的，右侧是*`frame`*元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:23:50.027

有很多方法可以解决此类问题，但除非您提供有关报告的更详细信息。我实在想不出什么好的建议。

但这里有一些提示可能会对您有所帮助。

**使用一个`TextField`和一个参数。**

`TextField`您可以先将其组合在 jrxml 中，而不是在 jrxml 中组合标题`Java`，然后将其存储为参数。通过这种方式，您可以`Java`帮助您了解有关组成字符串的所有逻辑。

**使用一个`TextField`和三个参数**

您可以简单地在`TextField`

```
$P{FirstName} + " " + ${MiddleName} + " " + ${LastName} 
```

这样就可以防止由空造成的间隙`TextField`。或者像这样使用速记条件表达式。

```
$P{FirstName} + (${MiddleName}.isEmpty() ? "" : " " + ${MiddleName}) + " " + ${LastName} 
```

# r - ggplot2 geom_point 与二进制数据的分箱 x 轴

> ID：10071944
> 
> 赞同：2
> 
> 时间：2012-04-09T10:33:35.657
> 
> 标签：r, ggplot2

我正在尝试为二进制数据创建一个带有分箱 x 轴的散点图。当我使用`geom_point`二进制 y 时，该图毫无用处（见图 1）。如图 2 所示，我想根据 x 轴的值对数据进行分箱，然后使用`geom_point`(将每个箱中的 obs 数量映射到点的大小) 绘制每个箱内的 avg x 和 avg y ）。我可以通过聚合数据来做到这一点，但我想知道 ggplot 是否可以直接做到这一点。我玩过`stat_bindot`等，但找不到解决方案。有任何想法吗？下面是一些代码。

谢谢！

```
# simulate data
n=1000
y=rbinom(n,1,0.5)
x=runif(n)
data=data.frame(x,y)

# figure 1 - geom_point with binary data, pretty useless!
ggplot(data,aes(x=x,y=y)) + geom_point() + ylim(0,1)

# let's create an aggregated dataset with bins
bin=cut(data$x,seq(0,1,0.05))
# I am sure the aggregation can be done in a better way...
data.bin=aggregate(data,list(bin),function(x) { return(c(mean(x),length(x)))})

# figure 2 - geom_point with binned x-axis, much nicer!
ggplot(data.bin,aes(x=x[,1],y=y[,1],size=x[,2])) + geom_point() + ylim(0,1) 
```

*图 1 和图 2：*

![](../Images/e60d4882477df49fb98ab71515dfb895.png) ![](../Images/f19b435fca8bd159357588f848bf0612.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-28T12:17:33.407

为此，我编写了一个新的 Stat 函数。

它采用`nbins`、`bin_var`和作为参数，所有四个都具有默认值`bin_fun`。`summary_fun`

*   的默认值`nbins`取决于数据点的数量。
*   默认为`bin_var`“x”。您也可以将其设置为“y”。这指定了输入的变量`bin_fun`。
*   `bin_fun`是分箱函数。默认情况下，它是`seq_cut`我为此目的而编写的。您也可以编写自己的分箱函数。它只需要将 data 和 nbins 作为参数。
*   `summary_fun`是用于聚合 bin 的汇总函数。默认情况下，它是`mean`. 您还可以使用 和 分别为 x 和 y 指定聚合`fun.x`函数`fun.y`。
*   如果您使用将`ymin`and`ymax`作为美学的 geom，您还可以指定`fun.ymin`and `fun.ymax`。

请注意，如果您指定 aes(group = your_bins)，`bin_fun`则忽略并使用分组变量。另请注意，它将创建一个计数变量，可以作为`..count..`.

在您的情况下，您可以像这样使用它：

```
p <- ggplot(data, aes(x, y)) +
  geom_point(aes(size = ..count..), stat = "binner") +
  ylim(0, 1) 
```

在这种情况下不是很有用（尽管这证明了同方差性并且方差在 0.25 左右，符合 Bern(0.5) 变量的假设），但仅用于示例：

```
p + geom_linerange(stat = "binner",
                   fun.ymin = function(y) mean(y) - var(y) / 2,
                   fun.ymax = function(y) mean(y) + var(y) / 2) 
```

![geom_point 和 geom_linerange 与 stat_binner](../Images/7267b27e8ff58e411c2411bd3bbf1d41.png)

编码：

```
library(proto)

stat_binner <- function (mapping = NULL, data = NULL, geom = "point", position = "identity", ...) {
  StatBinner$new(mapping = mapping, data = data, geom = geom, position = position, ...)
}

StatBinner <- proto(ggplot2:::Stat, {
  objname <- "binner"

  default_geom <- function(.) GeomPoint
  required_aes <- c("x", "y")

  calculate_groups <- function(., data, scales, bin_var = "x", nbins = NULL, bin_fun = seq_cut, summary_fun = mean,
                       fun.data = NULL, fun.y = NULL, fun.ymax = NULL, fun.ymin = NULL,
                       fun.x = NULL, fun.xmax = NULL, fun.xmin = NULL, na.rm = FALSE, ...) {
    data <- remove_missing(data, na.rm, c("x", "y"), name = "stat_binner")

    # Same rules as binnedplot in arm package
    n <- nrow(data)
    if (is.null(nbins)) {
      nbins <- if (n >= 100) floor(sqrt(n))
              else if (n > 10 & n < 100) 10
              else floor(n/2)
    }

    if (length(unique(data$group)) == 1) {
      data$group <- bin_fun(data[[bin_var]], nbins)
    }

    if (!missing(fun.data)) {
      # User supplied function that takes complete data frame as input
      fun.data <- match.fun(fun.data)
      fun <- function(df, ...) {
        fun.data(df$y, ...)
      }
    } else {
      if (!is.null(summary_fun)) {
        if (!is.null(fun.x)) message("fun.x overriden by summary_fun")
        if (!is.null(fun.y)) message("fun.y overriden by summary_fun")
        fun.x <- fun.y <- summary_fun
      }

      # User supplied individual vector functions
      fs_x <- compact(list(xmin = fun.x, x = fun.x, xmax = fun.xmax))
      fs_y <- compact(list(ymin = fun.ymin, y = fun.y, ymax = fun.ymax))

      fun <- function(df, ...) {
        res_x <- llply(fs_x, function(f) do.call(f, list(df$x, ...)))
        res_y <- llply(fs_y, function(f) do.call(f, list(df$y, ...)))
        names(res_y) <- names(fs_y)
        names(res_x) <- names(fs_x)
        as.data.frame(c(res_y, res_x))
      }
    }
    summarise_by_x_and_y(data, fun, ...)
  }

})

summarise_by_x_and_y <- function(data, summary, ...) {
  summary <- ddply(data, "group", summary, ...)
  count <- ddply(data, "group", summarize, count = length(y))

  unique <- ddply(data, "group", ggplot2:::uniquecols)
  unique$y <- NULL
  unique$x <- NULL

  res <- merge(merge(summary, unique, by = "group"), count, by = "group")

  # Necessary for, eg, colour aesthetics
  other_cols <- setdiff(names(data), c(names(summary), names(unique)))
  if (length(other_cols) > 0) {
    other <- ddply(data[, c(other_cols, "group")], "group", numcolwise(mean))
    res <- merge(res, other, by = "group")
  }

  res
}

seq_cut <- function(x, nbins) {
  bins <- seq(min(x), max(x), length.out = nbins)
  findInterval(x, bins, rightmost.closed = TRUE)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T19:26:02.633

As @Kohske said, there is no direct way to do that in `ggplot2`; you have to pre-summarize the data and pass that to `ggplot`. Your approach works, but I would have done it slightly differently, using the `plyr` package instead of `aggregate`.

```
library("plyr")
data$bin <- cut(data$x,seq(0,1,0.05))
data.bin <- ddply(data, "bin", function(DF) {
  data.frame(mean=numcolwise(mean)(DF), length=numcolwise(length)(DF))
})
ggplot(data.bin,aes(x=mean.x,y=mean.y,size=length.x)) + geom_point() + 
  ylim(0,1) 
```

![enter image description here](../Images/db687d037f150f17fc314680d8fb4b99.png)

The advantage, in my opinion, is that you get a simple data frame with better names this way, rather than a data frame where some columns are matrices. But that is probably a matter of personal style than correctness.

# php - 澄清 PDOStatement::fetch()

> ID：10071948
> 
> 赞同：2
> 
> 时间：2012-04-09T10:33:59.837
> 
> 标签：php, pdo

我注意到`PDO::FETCH_INTO`fetch 模式在内部不起作用，`PDOStatement::fetch()`但在[手册](http://www.php.net/manual/en/pdostatement.fetch.php)中它说你可以使用`PDO::FETCH_INTO`with `PDOStatement::fetch()`。

我试图做： $query->fetch( PDO::FETCH_INTO, $user );

这将返回：`PDOStatement::fetch() expects parameter 2 to be long, object given`

那是不是意味着手册有点误导？`PDO::FETCH_INTO`在这种情况下，正确的使用方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:04:53.633

试试这个方法：

```
$stmt->setFetchMode(PDO::FETCH_INTO, $user);
$user = $stmt->fetch(); 
```

更新：

如果您有带有公共设置器（推荐）而不是公共属性的私有/受保护属性，请改用 FETCH_CLASS：

```
class User {
    protected $username;

    public setUsername($username) {
        $this->username = $username;
    }
...
}
...
$stmt->setFetchMode(PDO::FETCH_CLASS, 'User');
$user = $stmt->fetch(); 
```

更新 2：

使用 PDO::FETCH_CLASS，您甚至不需要设置器（编辑：不需要用于 PDO 的设置器，这对 id 字段很有用）：

```
class User {
    protected $username;
...
}
...
$stmt->setFetchMode(PDO::FETCH_CLASS, 'User');
$user = $stmt->fetch(); 
```

更新 3：在此处查看完整示例：http: [//pastebin.com/LneAj0xn](http://pastebin.com/LneAj0xn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:38:48.590

请注意 PDOStatement::fetch() 的第二个参数是`cursor_orientation`.

你可能想要这样的东西：

```
$user = $query->fetch(PDO::FETCH_INTO); 
```

# mysql - 结合这两个 mySQL 查询

> ID：10071949
> 
> 赞同：2
> 
> 时间：2012-04-09T10:34:04.267
> 
> 标签：mysql, subquery

我需要将我的主查询与子查询结合起来：

**当前查询（有效）：**

```
SELECT *,(SELECT SUM(shift_length)FROM overtime_list
WHERE overtime_list.user_ID = users.user_ID AND overtime_list.date > '$totalovertimedays') AS overtime_total FROM availability_list
JOIN users ON users.user_ID = availability_list.user_ID
JOIN stations ON users.station_ID` = stations.station_ID
WHERE availability_list.date = '$date' AND type = '$type'
ORDER BY overtime_total ASC 
```

*（$date 和 $type 是 PHP 填写的 vars）*

**我想将其作为子查询插入的查询：**

```
SELECT role_ID, GROUP_CONCAT(users_roles.role_ID) AS roles FROM users
JOIN users_roles ON users.user_ID = users_roles.user_ID
GROUP BY users.users_ID 
```

**我走了这么远 - 但我似乎无法让 GROUP BY 工作，所以它没有正确列出它们：**

```
SELECT *,(SELECT SUM(shift_length)FROM overtime_list
WHERE overtime_list.user_ID = users.user_ID AND overtime_list.date > '$totalovertimedays') AS overtime_total FROM availability_list
JOIN users ON users.user_ID = availability_list.user_ID
JOIN `stations` ON `users`.`station_ID` = `stations`.`station_ID`,
(SELECT role_ID, GROUP_CONCAT(users_roles.role_ID separator ', ') AS roles FROM users JOIN users_roles ON users.user_ID = users_roles.user_ID GROUP BY users.user_ID) AS roles
WHERE availability_list.date = '$date' AND type = '$type'
ORDER BY overtime_total ASC 
```

**可用性列表表：**

```
 +----------+---------+
 |  user_ID | user    |
 +----------+---------+
 |        1 |   Smith |
 +----------+---------+
 |        2 |   Jones |
 +----------+---------+
 |        3 |   Greg  |
 +----------+---------+ 
```

**overtime_list 表：**

```
 +----------+----------------+------------+
 |  date    | shift_length   |   user_ID  |
 +----------+----------------+------------+
 |  1/1/11  |   5            |      1     |
 +----------+---------+------+------------+
 |  1/2/11  |   5            |      2     |
 +----------+---------+------+------------+
 |  1/6/11  |   2            |      2     |
 +----------+---------+------+------------+
 |  1/8/11  |   5            |      1     |
 +----------+---------+------+------------+
 |  1/12/11 |   2            |      1     |
 +----------+---------+------+------------+ 
```

**users_roles 表：**

```
 +----------+---------+
 |  user_ID | roles   |
 +----------+---------+
 |        1 |   Admin |
 +----------+---------+
 |        2 |   Staff |
 +----------+---------+
 |        2 |   Admin |
 +----------+---------+
 |        2 |   Super |
 +----------+---------+
 |        1 |   Other |
 +----------+---------+ 
```

**所以结果是：**

```
 +----------+---------+----------------------------+------------------+
 |  user_ID | user    |   roles                    |  overtime_total  |
 +----------+---------+----------------------------+------------------+
 |        1 |   Smith |    Admin, Other            |        12        |
 +----------+---------+----------------------------+------------------+
 |        2 |   Jones |    Staff, Admin, Super     |        7         |
 +----------+---------+----------------------------+------------------+
 |        3 |   Greg  |                            |  null (or zero)  |
 +----------+---------+----------------------------+------------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:22:21.333

这应该工作 -

```
SELECT users.*,
    SUM(overtime_list.shift_length) AS overtime_total,
    (SELECT GROUP_CONCAT(users_roles.role_ID) FROM users_roles WHERE users.user_ID = users_roles.user_ID) AS roles
FROM availability_list
INNER JOIN users
    ON users.user_ID = availability_list.user_ID
INNER JOIN `stations`
    ON `users`.`station_ID` = `stations`.`station_ID`
INNER JOIN overtime_list
    ON overtime_list.user_ID = users.user_ID
    AND overtime_list.date >= '$totalovertimedays'
WHERE availability_list.date = '$date'
AND type = '$type'
GROUP BY users.user_ID
ORDER BY overtime_total ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:48:51.640

我建议重新考虑你想要的结果。你要求这个：

```
 +----------+---------+----------------------------+------------------+
 |  user_ID | user    |   roles                    |  overtime_total  |
 +----------+---------+----------------------------+------------------+
 |        1 |   Smith |    Admin, Other            |        12        |
 +----------+---------+----------------------------+------------------+
 |        2 |   Jones |    Staff, Admin, Super     |        7         |
 +----------+---------+----------------------------+------------------+ 
```

但是，查询返回以下内容更为常见：

```
 +----------+---------+----------------------------+------------------+
 |  user_ID | user    |   roles                    |  overtime_total  |
 +----------+---------+----------------------------+------------------+
 |        1 |   Smith |    Admin                   |        12        |
 +----------+---------+----------------------------+------------------+
 |        1 |   Smith |    Other                   |        12        |
 +----------+---------+----------------------------+------------------+
 |        2 |   Jones |    Staff                   |        7         |
 +----------+---------+----------------------------+------------------+
 |        2 |   Jones |    Admin                   |        7         |
 +----------+---------+----------------------------+------------------+
 |        2 |   Jones |    Super                   |        7         |
 +----------+---------+----------------------------+------------------+ 
```

然后将为每个用户创建的行收集在一起非常简单，从而收集他们的所有角色。（如果您先按 排序`user_ID`，然后检测 user_ID 何时更改，您可能会觉得更容易。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:07:03.657

如果您坚持使用 将`GROUP_CONCAT`所有角色名称组合在一起，这可能会起作用：

```
SELECT users.user_ID, users.user, 
   (SELECT GROUP_CONCAT(users_roles.roles) 
      FROM users_roles
      WHERE users_roles.user_ID = users.user_ID) as roles,
   (SELECT SUM(shift_length)
      FROM overtime_list
      WHERE overtime_list.user_ID = users.user_ID 
        AND overtime_list.date > '$totalovertimedays') AS overtime_total,
   FROM availability_list
     JOIN users ON users.user_ID = availability_list.user_ID
     JOIN stations ON users.station_ID` = stations.station_ID
     WHERE availability_list.date = '$date' AND type = '$type'
     ORDER BY overtime_total ASC 
```

使用这个第二个子查询似乎使这个查询的效率比现在更低，所以我会警惕在大容量系统中使用它。如果您每天只阅读几千篇文章几次，您将永远不会注意到延迟。

# android - Android：如何获取所有正在运行的进程的总 PSS

> ID：10071953
> 
> 赞同：2
> 
> 时间：2012-04-09T10:34:14.443
> 
> 标签：android, memory

我正在尝试使用[此处建议的 dalvikPss 值查找每个正在运行的应用程序和服务的相对内存使用情况](https://stackoverflow.com/questions/2298208/how-to-discover-memory-usage-of-my-application-in-android)

正如那里所建议的，我需要总结正在运行的进程的所有 PSS 值。我的问题是，如何获取所有正在运行的进程的 pss 值？

我的理解是，Android 中的服务和任务与进程相关联。这种理解正确吗？

如果是这样，将返回的所有进程的 PSS 值相加是否`ActivityManager.getRunningAppProcesses`会给我所有正在运行的进程（包括服务和任务）的总 PSS？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T11:17:09.687

获取所有正在运行的进程的 PSS 值：使用这个：

```
ActivityManager activityManager = (ActivityManager) context.getSystemService(ACTIVITY_SERVICE);  
List<RunningAppProcessInfo> runningAppProcesses = activityManager.getRunningAppProcesses();  
Map<Integer, String> pidMap = new TreeMap<Integer, String>();  
for (RunningAppProcessInfo runningAppProcessInfo : runningAppProcesses)  
{  
    pidMap.put(runningAppProcessInfo.pid, runningAppProcessInfo.processName);  
}  
Collection<Integer> keys = pidMap.keySet();  
for(int key : keys)  
{  
    int pids[] = new int[1];  
    pids[0] = key;  
    android.os.Debug.MemoryInfo[] memoryInfoArray = activityManager.getProcessMemoryInfo(pids);  
    for(android.os.Debug.MemoryInfo pidMemoryInfo: memoryInfoArray)  
    {  
        Log.i(TAG, String.format("** MEMINFO in pid %d [%s] **\n",pids[0],pidMap.get(pids[0])));  
        Log.i(TAG, " pidMemoryInfo.getTotalPrivateDirty(): " + pidMemoryInfo.getTotalPrivateDirty() + "\n");  
        Log.i(TAG, " pidMemoryInfo.getTotalPss(): " + pidMemoryInfo.getTotalPss() + "\n");  
        Log.i(TAG, " pidMemoryInfo.getTotalSharedDirty(): " + pidMemoryInfo.getTotalSharedDirty() + "\n");  
    }  
} 
```

或者您也可以使用运行时获取 PSS 值：

```
 final Process m_process = Runtime.getRuntime().exec("/system/bin/top -n 1");
    final StringBuilder sbread = new StringBuilder();
    BufferedReader bufferedReader = new BufferedReader(new 
InputStreamReader(m_process.getInputStream()), 8192); 
```

# java - 迷宫无法正确生成。越界异常

> ID：10071960
> 
> 赞同：0
> 
> 时间：2012-04-09T10:34:31.303
> 
> 标签：java, canvas, grid, runtime-error, maze

我的迷宫生成器似乎有问题。我正在尝试生成[类似这样的迷宫](http://mazeworks.com/mazegen/mazetut/index.htm) 我的程序显示：

![在此处输入图像描述](../Images/0eb242d955032f40206942b9c4dc8c10.png)

和错误

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: -1
        at Grid.genRand(Grid.java:73)
        at Grid.main(Grid.java:35) 
```

如何修复我的生成器程序？

```
import java.awt.*;
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import javax.swing.*;
import java.util.ArrayList;

public class Grid extends Canvas {

    Cell[][] maze;
    int size;
    int pathSize;
    double width, height;
    ArrayList<int[]> coordinates = new ArrayList<int[]>();

    public Grid(int size, int h, int w) {
        this.size = size;
        maze = new Cell[size][size];
        for(int i = 0; i<size; i++){
            for(int a =0; a<size; a++){
            maze[i][a] = new Cell();
            }
        }
        setPreferredSize(new Dimension(h, w));
    }

    public static void main(String[] args) {
        JFrame y = new JFrame();
        y.setLayout(new BorderLayout());
        Grid f = new Grid(25, 400, 400);
        y.add(f, BorderLayout.CENTER);
        y.setSize(450, 450);
        y.setVisible(true);
        y.setDefaultCloseOperation(y.EXIT_ON_CLOSE);
        f.genRand();
        f.repaint();
    }

    public void push(int[] xy)
  {
    coordinates.add(xy);
    int i = coordinates.size();
    coordinates.ensureCapacity(i++);
  }

  public int[] pop() {
    int[] x = coordinates.get((coordinates.size())-1);
    coordinates.remove((coordinates.size())-1);
    return x;
    }

    public int[] top() {
    return coordinates.get((coordinates.size())-1);
    }

    public void genRand(){
    // create a CellStack (LIFO) to hold a list of cell locations [x]
    // set TotalCells = number of cells in grid  
    int TotalCells = size*size;
    // choose a cell at random and call it CurrentCell 
    int m = randomInt(size);
    int n = randomInt(size);
    Cell curCel = maze[m][n];
    // set VisitedCells = 1  
    int visCel = 1,d=0;
    int[] q;
    int h,o = 0,p = 0;
    // while VisitedCells < TotalCells 
    while( visCel < TotalCells){
    // find all neighbors of CurrentCell with all walls intact
    if(maze[m-1][n].countWalls() == 4){d++;}
    if(maze[m+1][n].countWalls() == 4){d++;}
    if(maze[m][n-1].countWalls() == 4){d++;}
    if(maze[m][n+1].countWalls() == 4){d++;}
    // if one or more found 
    if(d!=0){
    Point[] ls = new Point[4];
    ls[0] = new Point(m-1,n);
    ls[1] = new Point(m+1,n);
    ls[2] = new Point(m,n-1);
    ls[3] = new Point(m,n+1);
    // knock down the wall between it and CurrentCell
    h = randomInt(3);
    switch(h){
        case 0: o = (int)(ls[0].getX());
                p = (int)(ls[0].getY());
                curCel.destroyWall(2);
                maze[o][p].destroyWall(1);
            break;
        case 1: o = (int)(ls[1].getX());
                p = (int)(ls[1].getY());
                curCel.destroyWall(1);
                maze[o][p].destroyWall(2);
            break;
        case 2: o = (int)(ls[2].getX());
                p = (int)(ls[2].getY());
                curCel.destroyWall(3);
                maze[o][p].destroyWall(0);
            break;
        case 3: o = (int)(ls[3].getX());
                p = (int)(ls[3].getY());
                curCel.destroyWall(0);
                maze[o][p].destroyWall(3);
            break;
    }   
    // push CurrentCell location on the CellStack 
    push(new int[] {m,n});
    // make the new cell CurrentCell
    m = o; n = p;
    curCel = maze[m][n];
    // add 1 to VisitedCells
    visCel++;
    }
    // else 
    else{
    // pop the most recent cell entry off the CellStack 
    q = pop();
    m = q[0]; n = q[1];
    curCel = maze[m][n]; 
    // make it CurrentCell
    // endIf
    }
    // endWhile  
    }   
    }

    public int randomInt(int s) { return (int)(s* Math.random());}

    public void paint(Graphics g) {
        int k, j;
        width = getSize().width;
        height = getSize().height;
        double htOfRow = height / (size);
        double wdOfRow = width / (size);
//checks verticals - destroys east border of cell
        for (k = 0; k < size; k++) {
            for (j = 0; j < size; j++) {
                if(maze[k][j].checkWall(2)){
                g.drawLine((int) (k * wdOfRow), (int) (j * htOfRow), (int) (k * wdOfRow), (int) ((j+1) * htOfRow));
            }}
        }
//checks horizontal - destroys north border of cell
        for (k = 0; k < size; k++) {
            for (j = 0; j < size; j++) {
                if(maze[k][j].checkWall(3)){
                g.drawLine((int) (k * wdOfRow), (int) (j * htOfRow), (int) ((k+1) * wdOfRow), (int) (j * htOfRow));
            }}
        }
    }
}

class Cell {

    private final static int NORTH = 0;
    private final static int EAST = 1;
    private final static int WEST = 2;
    private final static int SOUTH = 3;
    private final static int NO = 4;
    private final static int START = 1;
    private final static int END = 2;
    boolean[] wall = new boolean[4];
    boolean[] border = new boolean[4];
    boolean[] backtrack = new boolean[4];
    boolean[] solution = new boolean[4];
    private boolean isVisited = false;
    private int Key = 0;

    public Cell(){
    for(int i=0;i<4;i++){wall[i] = true;}
    }
    public int countWalls(){
    int i, k =0; 
    for(i=0; i<4; i++) {
    if (wall[i] == true)
    {k++;}
    }
    return k;}
    public boolean checkWall(int x){
    switch(x){
        case 0: return wall[0];
        case 1: return wall[1];
        case 2: return wall[2];
        case 3: return wall[3];
    }
    return true;
    }
    public void destroyWall(int x){
    switch(x){
        case 0: wall[0] = false; break;
        case 1: wall[1] = false; break;
        case 2: wall[2] = false; break;
        case 3: wall[3] = false; break;
        }
    }
    public void setStart(int i){Key = i;}   
    public int getKey(){return Key;}
    public boolean checkVisit(){return isVisited;}
    public void visitCell(){isVisited = true;}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:43:33.207

```
int m = randomInt(size);
int n = randomInt(size); 
```

那是你的问题。`n`并且`m`可以为 0。

当你尝试：

```
if(maze[m-1][n].countWalls() == 4){d++;}
if(maze[m+1][n].countWalls() == 4){d++;}
if(maze[m][n-1].countWalls() == 4){d++;}
if(maze[m][n+1].countWalls() == 4){d++;} 
```

您将尝试获取`maze[-1][n]`，或者`maze[m][-1]`其中任何一个为 0，这就是您会得到 ArrayIndexOutOfBounds 异常的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:43:51.837

您不是在检查您对迷宫的访问权限。例如，如果 m = 0 那么

```
maze[m-1][n] 
```

将访问

```
maze[-1][n] 
```

这是超出范围的。

# linux - 如何在linux中将文件存储在连续磁盘块中

> ID：10071962
> 
> 赞同：8
> 
> 时间：2012-04-09T10:34:49.793
> 
> 标签：linux, filesystems, block, store

我想在linux的磁盘上存储一些数据。我希望这些数据存储在物理磁盘的连续磁盘块中。如果我为了将这些数据写入一个普通文件，可能文件占用的块在物理磁盘中是不连续的。有什么办法可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T10:36:07.750

磁盘分区是磁盘的连续区域。

所以做你想做的事情的一种方法是调整磁盘分区的大小，并使用**gparted** (gnome) 或**partitionmanager** (kde) 或类似文件创建一个新的分区 - 大小适合你的文件。

然后，您可以使用以下文件直接写入新分区（不使用和绕过文件系统）：

```
/dev/sdxn 
```

其中 sdxn = {sda1, sda2, ..., sdb1, ... ...} 等是分区的字母/编号。

或者，您可以通过使用文件直接写入（完全绕过分区表）来留出整个磁盘：

```
/dev/sdx 
```

其中 sdx = {sda, sdb, sdc, ...} 等是磁盘的字母。

**警告：**不要打错字并写错一个（上面有文件系统），否则你会损坏它。最好做一个符号链接 ln -s /dev/sdxn /home/fred/mydata，然后总是写入 mydata 文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T13:46:51.297

您不能向常规文件系统询问。

如果出于某种原因，您真的想在磁盘上存储连续数据，则需要使用（免费）原始设备并自行管理其上的数据布局。这就是一些数据库正在做的事情。请注意，即使在这种情况下，也不能保证块是连续的。该设备可能由硬件或软件 RAID 层提供，或者是来自 ZFS 池的 zvol。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-09T11:14:52.537

文件系统代码（在内核中，例如在`linux-3.1.6/fs/ext4/`linux-3.1.6 内核源代码中的 ext4 文件系统中）正在管理用于给定文件的磁盘块。所以你不能自己组织一些文件的磁盘块。但是，您可能会使用一些奇怪的系统调用给内核一些提示。

如果您不喜欢这样，您可以通过直接写入*未挂载*的分区来避免文件系统，例如通过对[open(2)](http://linux.die.net/man/2/open)获得的文件描述符执行[write(2)](http://linux.die.net/man/2/write)系统调用 -例如；但是除非您真的知道自己在做什么（并且您的问题的表述让我觉得您不了解文件系统的确切作用），否则我不建议您这样做。`/dev/sda2`

内核文件系统代码相当不错，内核文件系统缓存效率很高。

如果您想加快读取速度，可以考虑使用[readahead(2)](http://linux.die.net/man/2/readahead)或[fadvise(2)](http://linux.die.net/man/2/fadvise)或[madvise(2)](http://linux.die.net/man/2/madvise)系统调用。

您还可以在创建文件系统时针对您的特定目的对其进行调整。例如，如果您知道其中大部分文件很大，则可以使用大于标准块大小（例如`mke2fs -b 8192`）等...

但是不要认为软件技巧会显着加速您的应用程序；如果你做了很多磁盘 IO，真正的瓶颈是硬件（所以使用 SSD 代替硬盘可能更容易）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-29T17:12:14.390

尝试使用 rsync --preallocate：

`rsync --preallocate /path/to/source/file /path/to/destination/`

rsync 将预先分配一个连续的存储块并将文件复制到其中。

只需确保文件不在目标位置，否则 rsync 不会重新分配和重新复制它。如果是，请将其删除，清空垃圾箱以确保它真的消失了，然后运行此命令。

验证它是否连续复制：

`filefrag /path/to/destination/file`

“找到 1 个范围”意味着它是连续的，一个以上意味着它是零散的。

# iphone - 指针和引用

> ID：10071963
> 
> 赞同：0
> 
> 时间：2012-04-09T10:34:50.183
> 
> 标签：iphone, objective-c, ios

我有一个名为 Region 的服装类，我正在使用这段代码来初始化 region 变量，这怎么可能在这段代码的末尾 myAppDelegate.provisoryRegion 不是 nil 而 region 是 nil？myAppDelegate.provisoryRegion 不是通过引用传递给 region 吗？？？我 100% 确定该区域在这段代码的末尾为零。

```
Region *region=myAppDelegate.provisoryRegion;
if (!myAppDelegate.provisoryRegion) {
    myAppDelegate.provisoryRegion=[[Region alloc]init];
}
if (!region){ NSLog(@"region is nil");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:40:33.457

是的。它必须为零。因为你改变了对象！

当做`myAppDelegate.provisoryRegion=[[Region alloc]init];`myAppDelegate.provisoryRegion 指向一个新对象（堆上的一个新地址）。

`*region`不会**跟随**新地址！

所以`*region`还是指向`NULL`地址。

但是为什么要在第 1 行复制指针呢？为什么不总是使用`myAppDelegate.provisoryRegion`. `*region`是一个未链接的别名`myAppDelegate.provisoryRegion`

只需在示例虚拟代码的最后执行并删除第 1 行：

```
if (!myAppDelegate.provisoryRegion){ NSLog(@"region is nil");
} 
```

顺便说一下...

```
myAppDelegate.provisoryRegion=[[Region alloc]init]; 
```

看起来像内存泄漏（如果您的 @property 设置为保留）。

修复：

```
myAppDelegate.provisoryRegion=[[[Region alloc] init] autorelease]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:41:20.600

`region`是一个包含内存地址的变量。 `myAppDelegate.provisoryRegion`是一个包含内存地址的不同变量。

代码的第一行`myAppDelegate.provisoryRegion`包含 nil 的内存地址，然后将其复制到`region`，即`region`还包含 nil 的内存地址，而**不是**的内存地址`myAppDelegate.provisoryRegion`。

接下来测试 if 是否`myAppDelegate.provisoryRegion`为 nil，它是，然后将内容设置`myAppDelegate.provisoryRegion`为新`Region`实例的内存地址。

region 是一个完全不同的变量，它仍然包含 nil 的内存地址。所以，最后当你测试`region`它仍然是零。

# jquery - jsTree创建节点，使用JS提示重命名节点标题

> ID：10071964
> 
> 赞同：1
> 
> 时间：2012-04-09T10:34:59.810
> 
> 标签：jquery, contextmenu, jstree

是否可以在创建节点后使用 java 脚本提示符中的值重命名节点标题？

![用户右键在树上创建新节点][1] 创建新节点后，用户会自动跳到弹出菜单并要求输入节点名称

用户创建新节点：http: [//i.stack.imgur.com/X6hIl.png](http://i.stack.imgur.com/X6hIl.png)

用户提示输入新节点名称：http://i.stack.imgur.com/WJmJw.png

并且节点名称将自动从用户的值重命名

这样做的目的是因为弹出屏幕实际上会从数据库中执行查询操作并将特定字符串作为节点标题发送回

这些是从树上下文菜单中获取弹出窗口的脚本。

```
 $(function () {
        $("#demo1").jstree({ 
    "plugins" : [ "themes", "html_data", "crrm", "contextmenu" ]
        })
        .bind( "rename_node.jstree", function (e, data) {    
    var data = prompt("enter node name ");
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:45:48.667

无需绑定到 rename_node 事件处理程序。您可以重写上下文菜单“重命名”对象以运行您自己的自定义函数。

```
$(function () {
 $("#demo1").jstree({   
    "contextmenu" : {
        items : { // Could be a function that should return an object like this one
            "create" : false,
            "rename" : {
                            "_class"            : "myClass",
                            "separator_before"  : false,
                            "separator_after"   : false,
                            "label"             : "Rename Node",
                            "action"            : function (obj) {
                                                    //Do some action here or pass the object to another function
                                                    //ex: myFunc(obj);
                                                    $(obj).find("a:first").text("My new node label.");
                                                }
                        },
            "remove" : false,
            "ccp" : false
        }
    },
    "plugins" : [ "themes", "html_data", "crrm", "contextmenu" ]
 });
}); 
```

# symfony - Symfony2 覆盖控制器

> ID：10071965
> 
> 赞同：3
> 
> 时间：2012-04-09T10:34:59.823
> 
> 标签：symfony, controller, overriding, fosuserbundle

我使用 FOSUserBundle，我想覆盖他的 registerAction 控制器。我阅读了与覆盖 FOSUserBundle 控制器相关的文档，但它不起作用。通过在控制器中回显一条小消息，它不会在模板中打印。

这是我选择的方式：

我从 FOSUserBundle 继承了我的包：

```
namespace Jheberg\MembersBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;

class JhebergMembersBundle extends Bundle
{
    public function getParent()
    {
        return 'FOSUserBundle';
    }
} 
```

我覆盖`RegistrationController.php`了我的包的控制器目录中命名的文件中的 registerAction ：

```
namespace Jheberg\MembersBundle\Controller;

use FOS\UserBundle\Controller\RegistrationController as BaseController;

class RegistrationController extends BaseController
{
    public function registerAction()
    {
        echo 'foo';
        $response = parent::registerAction();

        // do custom stuff

        return $response;
    }
} 
```

你有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:02:40.253

只是花了几个小时试图让这个工作，终于弄明白了。我缺少的部分是使用 MyUserBundle 中的 User 实体扩展我的 User 类。例如：

```
namespace MyNamespace\MyMainBundle\Entity;

use MyNamespace\MyUserBundle\Entity\User as BaseUser;

class User extends BaseUser
{
} 
```

User 实体与 FOSUserBundle 中的实体相同（只是具有不同的命名空间）。

```
namespace MyNamespace\MyUserBundle\Entity;

use FOS\UserBundle\Model\User as AbstractUser;

abstract class User extends AbstractUser
{
} 
```

如果我不这样做，正如 Jeffrey 所提到的，MyUserBundle 根本就没有被使用（好像它不存在一样）。现在我所有的覆盖视图、控制器等都被使用了。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-12T16:01:19.720

它对我不起作用。我试着做你的解决方案。最后，我只是清除运行 php bin/console 缓存的缓存：当然是在我的项目内部清除。并且像魅力一样发挥作用。

**所以..尝试清除缓存。**

对不起我的英语不好。

# google-app-engine - 谷歌 Cookie 解码

> ID：10071966
> 
> 赞同：0
> 
> 时间：2012-04-09T10:35:06.547
> 
> 标签：google-app-engine

我开发了一些基于谷歌服务的东西。

现在我注意到他们在他们的服务中添加了一个 sessionid，现在我也需要找到它。

我进行了很多搜索，我注意到他们保存了一个名称为：“ `SID`”的 cookie，所以我认为它是。

```
Set-Cookie: SID=DQAAALgAAABk20DNISbQnTIm0DHuZIhhJyMg3Gs9i1gxXZrlzfc66Fq05cxvpHShc1pcFzcW0bnFLcROwZSgoiECL2J-_tJ8iGkKh25GYutor0HD15DFjMO_HeUoG4MmrKR3WO8ShxWP624YY_l_sFES6RJzhUHQtvUk0AGtscU7XodCqDjL_7XZXhCsJlBEjB09PYxyxlbEx76ebiMYop-vIx47sTmV-ygoqFaxUfmAnRja9mMbNAu8c_XbQ8Gr9UM0QuviKsE;Domain=.google.com;Path=/;Expires=Thu, 07-Apr-2022 09:48:05 GMT 
```

我的问题是他们是否是一种将cookie值中写入的内容解码为数字的方式（因为会话ID是数字）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T23:28:42.883

大多数网站通过生成一个随机的字母字符串来设置 cookie，将其与用户相关联（在一个秘密的服务器端数据库中），并在将 cookie 返还给站点时使用它来查找用户。cookie 本身实际上没有任何信息——它只是一个任意字符串，仅对服务器有意义。所以没有什么可以“解码”的。这只是随机噪音。

我不知道关于谷歌 cookie 的任何细节，但我认为它们遵循标准做法，这意味着上述情况应该是正确的。

# ruby - 如何在 Ruby 1.9.x 中要求位于同一目录中的类

> ID：10071968
> 
> 赞同：3
> 
> 时间：2012-04-09T10:35:11.880
> 
> 标签：ruby, class

我在某个文件夹中有两个 ruby​​ 文件，分别是 A 和 B。

A类代码如下：

```
class A
  def self.foo
    puts "foo"
  end
end

A.foo 
```

B类代码如下：

```
class B
  def self.bar
    puts "bar"   
  end
end

B.bar
A.foo 
```

当我尝试运行 B 类文件时，出现以下错误：

```
bar
b.rb:10:in `<main>': uninitialized constant A (NameError) 
```

我不想使用模块。那么，如何从 B 类引用 A.foo 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:04:58.170

我不知道这是否回答了您的问题，因为我不完全理解您的意图。

您知道，您的`b.rb`脚本不知道来自 的 A 类`a.rb`，因此出现了错误。有几种方法可以告诉`b.rb`使用`a.rb`.

1.  您可以添加到文件中`b.rb`

    ```
    require 'a' 
    ```

2.  你可以像这样运行 b.rb 脚本：

    ```
    ruby -r a.rb b.rb 
    ```

一个旁注。在这两种情况下，代码`a.rb`

```
 A.foo 
```

也被执行。您可以使该代码仅在`a.rb`直接运行时才可运行，方法是包含要运行的代码：

```
 if __FILE__ == $0
      # code to run when a.rb is executed directly
      A.foo
    end 
```

# html - 如何创建一个提交后的表单，它会在新选项卡中打开谷歌搜索结果？

> ID：10071970
> 
> 赞同：0
> 
> 时间：2012-04-09T10:35:13.330
> 
> 标签：html, css

我想创建一个输入表单，它将接受输入文本并在新选项卡中显示其谷歌搜索结果。

新标签应该是谷歌的 SERP。

这是我到目前为止所拥有的。

```
<div id="searchContainer">
<form name="" action="" type="">
        <input type="text" name="field" id="field" />
        <input type="submit" name="submit" id="submit" value="Search" />
</form>
</div> 
```

我该怎么做呢？我需要使用javascript吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:45:50.320

查看[https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)并使用 Google API，它非常简单

# java - android：某个特定间隔之间的警报remian停止

> ID：10071971
> 
> 赞同：0
> 
> 时间：2012-04-09T10:35:14.613
> 
> 标签：java, android, calendar, alarmmanager, alarm

我将在我的应用程序中设置每日闹钟。

一切正常。但现在我想要的是：在特定的时间段内，我的闹钟应该保持静音。

例如：如果我设置了闹钟，应该每 30 分钟播放一次，如果我已经给出了喜欢它应该在凌晨 1:00 到凌晨 2:00 保持静音，那么它不应该在静音期间播放。

我有这样的代码：

每隔 30 分钟，我的服务就会呼叫一次，如果时间在凌晨 1:00 到凌晨 2:00 之间保持沉默。

见下面的代码：

```
Calendar currentTime = new GregorianCalendar();
    currentTime.set(Calendar.HOUR, Calendar.HOUR);
    currentTime.set(Calendar.MINUTE, Calendar.MINUTE);
    currentTime.set(Calendar.SECOND, Calendar.SECOND);
    currentTime.set(Calendar.DATE, Calendar.DATE);
    currentTime.set(Calendar.MONTH, Calendar.MONTH);

    Calendar start_time = new GregorianCalendar();
    start_time.set(Calendar.HOUR, sHour);
    start_time.set(Calendar.MINUTE, sMinute);
    start_time.set(Calendar.SECOND, Calendar.SECOND);
    start_time.set(Calendar.DATE, Calendar.DATE);
    start_time.set(Calendar.MONTH, Calendar.MONTH);

    Calendar end_time = new GregorianCalendar();
    end_time.set(Calendar.HOUR, eHour);
    end_time.set(Calendar.MINUTE, eMinute);
    end_time.set(Calendar.SECOND, Calendar.SECOND);
    end_time.set(Calendar.DATE, Calendar.DATE);
    end_time.set(Calendar.MONTH, Calendar.MONTH);

   if((!SILENCE) && (((!(start_time.getTimeInMillis() < currentTime.getTimeInMillis())) && (!(currentTime.getTimeInMillis() < end_time.getTimeInMillis()) )))){
    // Alarm will play
}
else{
// you are in Silent mode
} 
```

所以请给我解决方案，虽然我没有得到它的工作原理？使用此代码，我总是会出现“您处于静音模式”

所以请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:55:51.267

你做错了

```
currentTime.set(Calendar.HOUR, Calendar.HOUR); 
```

使用这句话，您将小时和分钟设置为整数值。例如，Calendar.HOUR 具有常量值 10，就像所有常量都具有不同的固定值一样，您正在将此值分配给日历，这可能会给您带来问题。

**解决方案**

如果您想设置唯一的小时和分钟，请保留其他字段，以便它会自动考虑您当前的数据时间。

```
Calendar currentTime = Calendar.getInstant();
currentTime.set(Calendar.HOUR, hours);
currentTime.set(Calendar.MINUTE, minuts); 
```

因此，这会将日历中的小时和分钟设置为您提供的值，并将其他信息（如日、月、年和其他信息）设置为当前值。

**编辑**

如果您遇到以毫秒为单位获取当前时间的问题，请使用`System.currentTimeMillis();`.

为了以毫秒为单位获取未来时间，您必须在日历中设置适当的时间，然后您必须以毫秒为单位从日历中获取时间，例如`calendar.getTimeInMillis()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:47:41.423

尝试一下 -

```
if((!SILENCE) && (start_time.getTimeInMillis() > System.getTimeInMillis())){
// Alarm will play
}
else{
// you are in Silent mode
} 
```

# android - 在android中的布局之间切换

> ID：10071974
> 
> 赞同：1
> 
> 时间：2012-04-09T10:35:26.173
> 
> 标签：android, layout

在我的布局文件 - main.xml（线性布局）中，有 2 个按钮（比如 b1 和 b2）、1 个列表视图和 1 个相对布局。当我单击 b1 时，会生成列表视图`VISIBLE`并生成相对布局`GONE`。当我单击 b2 时，会生成列表视图`GONE`并生成相对布局`VISIBLE`。这是代码，

```
b1.setOnClickListener(new OnClickListener(){
           public void onClick(View v)
           {
               try{ListView listView = (ListView) Home.this.findViewById(R.id.mylist);
                listView.setTextFilterEnabled(true);

                String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
                    "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
                    "Linux", "OS/2" ,"asdsad","asdsdsa","asdasdsa"};
                ArrayAdapter<String> adapter = new ArrayAdapter<String>(context,
                        R.layout.list_item,values);

                    // Assign adapter to ListView
                RelativeLayout rl=(RelativeLayout) findViewById(R.id.rl1);
                rl.setVisibility(8);
                    listView.setAdapter(adapter);
                    listView.setVisibility(0);}
               catch(Exception e){Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();}
           }

       });<br>
b2.setOnClickListener(new OnClickListener(){
           public void onClick(View v)
           {
            try
            {

            ListView ls=(ListView) findViewById(R.id.mylist);
            ls.setVisibility(8);
            RelativeLayout rl=(RelativeLayout) findViewById(R.id.rl1);
            getLayoutInflater().inflate(R.layout.creategroup,rl,true);
            rl.setVisibility(0);

            EditText username=(EditText) findViewById(R.id.group_owner_fill);
            username.setText(userid);
            username.setEnabled(false);
            username.setFocusable(false);
            boolean t=username.isEnabled();
            String s=new Boolean(t).toString();
            Toast.makeText(getApplicationContext(), s, Toast.LENGTH_LONG).show();

            }
            catch(Exception e)
            {
                Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
            }
           }

       }); 
```

第一次单击 b2 时，Edittext(username) 被锁定（即 setenabled 和 setfocussable 设置为 false）。但是当我单击 b1 然后单击 b2 时，Edittext 没有被锁定，并且 setText 也不存在。这可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:39:33.450

我建议您实施[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html) ，而不是设置可见性。因为 ViewFlipper 允许我们在用户需要时翻转视图。

```
 <ViewFlipper
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:id="@+id/flip">

    <ListView />
        <RelativeLayout>
        .............
        .............
        .............         
        </RelativeLayout>

</ViewFlipper> 
```

在代码中，您可以使用 setDisplayedChild() 方法翻转视图。仅供参考，RelativeLayout 是孩子 1\. 所以你必须写下`flipper.setDisplayedChild(1)`

# jsf - 需要 ace:datatable 中的延迟加载示例

> ID：10071976
> 
> 赞同：1
> 
> 时间：2012-04-09T10:35:28.433
> 
> 标签：jsf, lazy-loading, icefaces, icefaces-3, ace-datatable

我正在使用**icefaces 3** ，并查看了**ace：datatable**延迟加载的展示，但是示例非常复杂，所以任何人都可以与我们分享一个在ace：datatable中使用延迟加载从数据库中加载数据的示例来自集合，以及延迟加载如何与搜索一起工作，在此先感谢。

# c++ - 读取包含矩阵 C++ 的文本文件

> ID：10071978
> 
> 赞同：0
> 
> 时间：2012-04-09T10:35:29.803
> 
> 标签：c++, matrix, text-files

我需要在 C++ 上编写一个简单的程序，它可以从文本文件中获取两个矩阵，还需要每个矩阵的行数和列数，如下所示：

这是文本文件包含的 ex

```
3 5
1 -2 3 4 5
1 2 -3 4 5
-1 2 3 4 5
5 4
-1 2 3 4
1 -2 3 4
1 2 -3 4
1 2 3 -4
-1 -2 -3 -4 
```

每个矩阵的第一行包含它的行数和列数

这是我试图做的编

```
#include <cstdio>
#include <cstring>
#include <fstream>
#define Height 3
#define Width  5
// I assume that each input line in the file can contain at most width * 3 characters.
// Three extra characters for NL, CR, 0.
// Change this if you expect the file to contain longer lines.
#define BUFFER_WIDTH (Width * 3 + 3)
unsigned char Map[Height][Width];
char line[BUFFER_WIDTH];
// Remove CR, NL at the end of the line.
void clean_line(char *line)
{
 int len = strlen(line);
  while (len > 0 && (line[len - 1] == '\n' || line[len - 1] == '\r'))
{
 line[len - 1] = '\0';
 len--;
  }
}
int main ()
{
FILE *fp = fopen("input1.txt","r");
int row = 0;
while (!feof(fp) && row < Height)
  {
  fgets(line, BUFFER_WIDTH, fp);
  clean_line(line);
  int len = strlen(line);
  int rowLen = len > Width ? Width : len;
for (int col = 0; col < rowLen; col++)
{
  Map[row][col] = line[col];
  printf("%d  ",Map[row][col]);
 }
printf("\n");
row++;
 }
fclose(fp);
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:26:40.423

```
#include <iostream>

void matUpdate(int***mat,int& row,int& col,int**matData,int& rowData,int& colData) {
    *mat = matData;
    row = rowData;
    col = colData;
}
int read(int***mat1,int***mat2,int& row1,int& col1,int& row2,int& col2)
{
    FILE* fp = fopen("mat.txt","r");
    if (fp == NULL) {
        return -1;
    }
    int row,col,matNum = 0;
    while(matNum < 2) {
        if (fscanf(fp,"%d %d",&row,&col) != 2 || row < 0 || col < 0) {
            return -1;
        }
        int i,j;
        int** mat = new int*[row];

        for (i = 0; i < row;++i) {
            mat[i] = new int[col];
        }
        for (i = 0;i < row;++i) {
            for (j = 0;j < col;++j) {
                fscanf(fp,"%d",&mat[i][j]);
            }
        }
        if (matNum) {
            matUpdate(mat2,row2,col2,mat,row,col);
        }
        else {
            matUpdate(mat1,row1,col1,mat,row,col);
        }
        matNum++;
    }
    return fp;
}
int main()
{
    int **mat1 = NULL,**mat2 = NULL;
    int row1,col1,row2,col2;
    FILE* fp = read(&mat1,&mat2,row1,col1,row2,col2);
    if (fp != - 1) {
    //work with matrics
    //delete memory allocated for matrics
    fclose(fp);
    }
    else {
      //error
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:44:44.123

您需要整体解析文件，然后将其拆分为一些分隔符（在本例中为换行符和空格）。这个过程称为标记化。许多库，如 boost 或 poco 都支持此类操作。

[类 StringTokenizer](http://pocoproject.org/docs/Poco.StringTokenizer.html)

[提升::拆分](http://www.boost.org/doc/libs/1_49_0/doc/html/string_algo/reference.html#header.boost.algorithm.string.split_hpp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T11:32:41.940

```
#include <iostream>
#include <vector>
using namespace std;

vector<vector<int>> read_matrix(istream& in)
{
    int rows, cols;
    in >> rows >> cols;

    vector<vector<int>> matrix(rows, vector<int>(cols));

    for (auto& row : matrix)
        for (auto& cell : row)
            in >> cell;

    return matrix;
}

int main()
{
    fstream in("input.txt");
    vector<vector<int>> mat1 = read_matrix(in);
    vector<vector<int>> mat2 = read_matrix(in);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T11:32:43.477

我最近写了一个相当简单的 CSV 阅读器类，它可以完成很多你正在寻找的事情。我还在堆栈交换代码审查上[发布了此代码。](https://codereview.stackexchange.com/questions/10128/class-to-read-comma-separated-data-from-disk)这还包括对代码的一些注释。我`boost::MultiArray`用来将结果存储在二维数组中，我`boost::split`用来将文件中的文本拆分为数字。

这是代码：

一个头文件：

```
 #include <iostream>
 #include <sstream>
 #include <string>
 #include <stdexcept>

 class BadConversion : public std::runtime_error {
 public:
   BadConversion(std::string const& s)
     : std::runtime_error(s)
     { }
 };

 class BadIndex : public std::runtime_error {
 public:
   BadIndex(std::string const& s)
     : std::runtime_error(s)
     { }
 };

 inline double convertToDouble(std::string const& s)
 {
   std::istringstream i(s);
   double x;
   if (!(i >> x))
     throw BadConversion("convertToDouble(\"" + s + "\")");
   return x;
 } 
```

和 c++ 代码，其中包括一些示例用途：

```
#include <iostream>
#include <sstream>
#include <fstream>
#include <string>
#include <vector>
#include <boost/algorithm/string.hpp>
#include <boost/multi_array.hpp>
#include "csv-test.h"
#include <cassert>

template <class T> class csv_reader {
  boost::multi_array<T, 2> content2d ;
  std::vector<std::string> split_line ;        
  std::string line;
  std::string sep ;
  int ncol ;                         
  int nrow ;  
public :
  csv_reader(std::string, std::string) ;  // constructor
  ~csv_reader();          // desctructor
  void cout_content() ;    // print the contents
  T operator() (unsigned row, unsigned column) ;
} ;

// Constructor
template <class T> csv_reader<T>::csv_reader(std::string path, std::string sep = ",")
{
  // Initializing variables
  ncol = 0 ; // Initialize the number of colums to 0
  nrow = 1 ; // Initialize the number of rows to 1
  content2d = boost::multi_array<T, 2> (boost::extents[0][0]) ;
  std::ifstream  data(path.c_str()) ;

  // read the csv data
  while(getline(data, line))
  {   
    boost::split(split_line, line, boost::is_any_of(sep) ) ;
    if(ncol == 0) 
    {
      ncol = split_line.size() ;
    }
    else assert(ncol == split_line.size()) ;
    content2d.resize(boost::extents[nrow][ncol]) ;
    for(int i = 0; i < split_line.size(); i++) 
    {
      content2d[nrow - 1][i] = convertToDouble(split_line[i]) ;
    }
    nrow++ ;
  }
}

// Destructor
template <class T> csv_reader<T>::~csv_reader() { }

template <class T> void csv_reader<T>::cout_content()
{
  for(int row = 0; row < (nrow - 1); row++) 
  {
      for(int col = 0; col < ncol ; col++) 
      {
        std::cout << content2d[row][col] << " ";
      }
      std::cout << "\n" ;
  }
}

// Allow access to the contents
template <class T> T csv_reader<T>::operator() (unsigned row, unsigned column)
{ 
  if (row >= nrow || column >= ncol)
     throw BadIndex("boost::MultiArray subscript out of bounds");
  return(content2d[row][column]) ;
}

int main()
{
  // An integer csv reader
  csv_reader<int> csv_obj_int("test.csv") ;
  csv_obj_int.cout_content() ;

  // A double csv reader
  csv_reader<double> csv_obj_double("test.csv") ;
  csv_obj_double.cout_content() ;

  // It also supports direct access to the content using operator()
  std::cout << csv_obj_double(1,1) << "\n" ;
  std::cout << csv_obj_double(1,1) * 5 << "\n" ;

  // This statement fails with a subscript out of bounds error
  // std::cout << csv_obj_double(10,10) * 5 << "\n" ;

  // Testing a different seperator
  csv_reader<double> csv_obj_double_sep2("test_semicol.csv", ";") ;
  csv_obj_double_sep2.cout_content() ;
} 
```

# linq-to-sql - 保存 dbml 文件会创建一个新的 Designer.cs 文件

> ID：10071982
> 
> 赞同：3
> 
> 时间：2012-04-09T10:35:45.130
> 
> 标签：linq-to-sql

每次我在更新或添加新的数据库对象后保存我的 dbml 文件时，都会创建一个新的 Designer.cs 文件，而旧的设计器保持不变。我相信 dbml 已损坏，但不确定解决方案。谷歌似乎也不是特别有帮助。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:36:28.290

起初，每次更改模型上的某些内容时都会生成一个新的代码文件，这听起来很正常。

但是因为您说“*旧设计器保持不变*”，所以我假设新的 Designer.cs 文件在其文件名中有一些扩展名，以将其与旧设计器区分开来。一个目录中不能有两个同名文件。您是否检查过旧的设计器文件不是只读的？也许是由于您使用了一些文件版本控制系统。

在完美的世界中，我认为您在这种情况下会收到错误消息，但是对于您永远不知道的计算机。

# c# - 为 RadioButtonList 项添加工具提示

> ID：10071984
> 
> 赞同：3
> 
> 时间：2012-04-09T10:35:50.353
> 
> 标签：c#, asp.net, data-binding

My`RadioButtonList`绑定到数据库如下：

```
SqlDataAdapter adapter = new SqlDataAdapter("SELECT ItemsID,ItemsDescription FROM Items", con);
adapter.Fill(subjects);
rblUseCases.DataSource = subjects;
rblUseCases.DataTextField = "ItemsDescription";
rblUseCases.DataValueField = "ItemsID";          
rblUseCases.DataBind(); 
```

当用户悬停在任何单选按钮周围时，我需要添加一个新的工具提示。我计划将工具提示文本添加为`Tooltip`​​数据库表中的新列`Items`。如何将其数据绑定到单选按钮？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T11:19:03.837

以下代码将在单选按钮上显示工具提示：

```
ListItem li=new ListItem("Manish","oopde");
li.Attributes.Add("title","zello");
RadioButtonList1.Items.Add(li); 
```

对于数据绑定，您可以遍历每个项目并向其添加属性。数据绑定和数据绑定事件不会为每个项目调用，因此我们没有任何其他选项来实现相同的项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T10:41:50.947

数据绑定后写下这段代码：

```
foreach( ListItem itm in rblUseCases.Items)
       {
          itm.Attributes.Add( "title", "value: " + itm.Text);
       } 
```

这里 itm.Text 应该从数据库中绑定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T10:41:39.043

[答案可以在这里找到](http://www.dotnetspider.com/resources/5099-Tool-tip-for-DropDownList-ASP-NET.aspx)

文章中的代码：

```
foreach(var item in rblUseCases.items)
{                   
       item.Attributes.Add("Title", rblUseCases.Item[i].Text)
} 
```

如果您希望它成为适配器中的值，则必须手动获取适当的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T10:44:39.353

像这样试试

```
 rdoTest.DataSource = new string[]
    {
        "Hello",
        "World",
    }; 

    rdoTest.DataBind();

    foreach (ListItem item in rdoTest.Items)
    {
        item.Attributes["title"] = item.Text;
    } 
```

谢谢

迪普

# javascript - Fancybox 不考虑滚动条宽度

> ID：10071985
> 
> 赞同：2
> 
> 时间：2012-04-09T10:35:53.913
> 
> 标签：javascript, css, fancybox, width, scrollbar

一直试图解决这个问题，但无法提出一个好的解决方案，也看不到 Fancybox 已经找到了解决方案？如我错了请纠正我。

**问题：** 我有一个 Fancybox，它打开一个 iFrame，用户在其中经过几个步骤（新页面）。其中一些有很多内容，这给了我滚动条，而有些则没有。问题是 Fancybox 没有考虑滚动条的宽度，并且也给了我 x-scrollbar。

**解决方案**

*   我可以将 Fancybox 的宽度设置为 + 20，这大约是滚动条的大小，但不是在每个浏览器中，如果没有滚动条，它会给我一些奇怪的间距。
*   我可以添加溢出：隐藏在某处，但这会过多地裁剪我的内容。
*   我可以自己写一些 JS 来确定滚动条是否挡住了路。
*   或者我可以添加overflow-y: scroll，它会一直显示一个滚动条，但不是在每个浏览器中都会给出奇怪的间距。

这是我能想到的一些解决方案，但没有一个是好的。你们会怎么做？

**编辑** 在与 Rlemon 聊天后，我决定在具有固定宽度元素的内容周围放置一个容器，并在 body 上设置 overflow-x: hidden。这一切都意味着我可以隐藏太多的东西，因为我知道固定宽度的元素在里面并且是可见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:13:24.203

在与 Rlemon 聊天后，我决定在具有固定宽度元素的内容周围放置一个容器，并在 body 上设置 overflow-x: hidden。这一切都意味着我可以隐藏太多的东西，因为我知道固定宽度的元素在里面并且是可见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:27:42.440

也许只抑制水平滚动条：

```
overflow-y:hidden; 
```

# java - 如何获取显示标签的复选框值？

> ID：10071988
> 
> 赞同：0
> 
> 时间：2012-04-09T10:36:15.433
> 
> 标签：java, jsp, struts, struts-1

我已经使用装饰器类在显示表中添加了复选框，如下面的片段所示

```
public String getStatus()
       {
    DisplayLogTimeForm dltf =(DisplayLogTimeForm)getCurrentRowObject();
    String ret="";

    String status= dltf.getStatus();
    String date= dltf.getSET_DATE();
    //System.out.println("Decorator..." + date);
    if(status.equals("notpresent"))
    {

        System.out.println("Decorator..." + date);
        ret="<input type='checkbox' size='10' id = 'statusp"+i+"' name = 'statusp' property = 'status' value='"+date+"' onclick='changeCounter(this.id);' /><input type='hidden' name='checkedBox' value='"+i+"' />";
        i++;

        System.out.println("id.." + ret);
        System.out.println("id.." + i);
        return ret;
    }
    else
    {
        return null;
    } 
```

我想获取动作类中复选框的值。请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:21:07.463

我也遇到过这样的问题，目前在我的项目中使用。希望它对你有用。

```
Approve.jsp
============

<%@ taglib uri="http://displaytag.sf.net" prefix="display"%>
<jsp:scriptlet>
<![CDATA[  
org.displaytag.decorator.CheckboxTableDecorator decorator = new org.displaytag.decorator.CheckboxTableDecorator();
decorator.setId("form_no");  
decorator.setFieldName("_chk");
request.setAttribute("checkboxDecorator", decorator);        
]]>
</jsp:scriptlet>

<script type="text/javascript">
function Fnc_FormAction(action)
{   
document.forms[0].action="<%=request.getContextPath()%>/approve.do?reqCode="+action;
document.forms[0].submit();
}
function checkbox(form,form_no)
{
if(form.checked)
{
form.value= form_no;         
}    
}
</script>
<html:form method="POST" action="/approve.do" styleClass="FORM" styleId="form" style="form">    
<display:table name="result" export="false" class="displaytag"
requestURI="/approve.do?reqCode=approve" id="ReportTable"
uid="ReportTable" cellpadding="0" style="width:1200px"
decorator="checkboxDecorator" excludedParams="updateList">
<display:column title="Check To Approve">
<input name="form_no" type="hidden" value="<%=((Approval)ReportTable).getForm_no() %>" />
<input type="checkbox" name="chk" value="<%=((Approval)ReportTable).getForm_no() %>" onclick="checkbox(this,<%=((Approval)ReportTable).getForm_no() %>)">
</display:column>
<input type="button" name="Approve" id="Approval" value="  Approve  " onclick="Fnc_FormAction('approveByRoles')"/>
</display:table>

ApproveActionForm
==================
private int chk[];
/**
* @return the chk
*/
public int[] getChk() {
return chk;
}
/**
* @param chk the chk to set
*/
public void setChk(int[] chk) {
this.chk = chk;
}

ApproveAction.java
==================

public ActionForward approveByRoles(ActionMapping mapping, ActionForm form,
HttpServletRequest  request,HttpServletResponse response) throws STException 
{
ApproveActionForm aprForm=(ApproveActionForm)form;
if(aprForm.getChk()!=null)
{  
int chks[] = aprForm.getChk();
int updateFormNo = 0;
for(int i=0;i<chks.length;i++)
{   
updateFormNo = chks[i];
System.out.println("Updated Form Number is = "+ updateFormNo);
}   
}
} 
```

# image - 如何将 .Jpeg 图像转换为 .Bmp

> ID：10071994
> 
> 赞同：4
> 
> 时间：2012-04-09T10:37:05.463
> 
> 标签：image, image-processing

我的本地驱动器中有 JPEG 图像。我想将 JPEG 图像转换为 BMP，然后将托盘应用于所有转换后的 BMP 图像。

请建议我什么是最好的方法来做到这一点。托盘是 .pal 文件。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-09T10:43:50.180

转换图像的最佳选择是命令行工具[ImageMagick](http://www.imagemagick.org)。您的命令将类似于：

```
mogrify -format bmp *.jpg 
```

PS你确定要转换成BMP吗？它们占用了大量的磁盘空间。如果你想要无损压缩，你可以使用 PNG。

# 3d - 将 Beziér 控制点转换为 Catmull-Rom 控制点

> ID：10071998
> 
> 赞同：0
> 
> 时间：2012-04-09T10:37:43.833
> 
> 标签：3d, transition, bezier, catmull-rom-curve

我正在做一些平滑的 3D 相机转换，并使用一个小型库来处理我的相机转换。

不幸的是，它只执行 Catmull-Rom 转换。我还使用了出版物中的一些信息，他们使用贝塞尔曲线进行过渡。

所以我的问题是：给定一组贝塞尔控制点。如何将它们转换为 Catmull-Rom 点？

如果可能的话，我将能够使用这个库。否则，我将不得不从头开始实现贝塞尔曲线。

*更新*
我应该提到控制点本身很好。曲线不必完全相同。只需要相同的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:08:00.310

Catmull-Rom 使用被分析的点对的相邻点来构建切线，而贝塞尔曲线使用每个点给它们的切线数据。所以原则上你不能在贝塞尔曲线上，在每个现有点的两侧采样一个点来“伪造”Catmull-Rom 曲线使用的隐式生成的切线数据吗？