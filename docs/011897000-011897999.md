# StackOverflow 问答 11897000-11897999

# android - 连接两列和搜索结果

> ID：11897002
> 
> 赞同：0
> 
> 时间：2012-08-10T07:11:15.367
> 
> 标签：android, sqlite

我想在 sqlite 中连接两列并在 concat 列上执行搜索。这可能吗？

```
Cursor mCursor = db.rawQuery(
                "SELECT user_id,firstname,lastname, \"firstname\" || \"lastname\" AS val FROM "
                        + TABLE_DIRECTORY + " where val ='%" + text + "%'",
                null); 
```

使用 sqlite 和 android

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T07:18:16.833

试试这个

```
 Cursor mCursor = db.rawQuery(
        "SELECT user_id,firstname,lastname, \"firstname\" || \"lastname\" AS val FROM "
                + TABLE_DIRECTORY + " where \"firstname\" || \"lastname\" LIKE '%" + text + "%'",
        null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T07:17:55.877

```
cursor = db.rawQuery("SELECT _id, firstName, lastName, FROM TABLE_DIRECTORY WHERE firstName || ' ' || lastName LIKE ?", 
                    new String[]{"%" + val + "%"}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T07:16:54.193

我没试过，但只要我记得，你的 SQL 中有一个错误：

```
Cursor mCursor = db.rawQuery(
        "SELECT user_id,firstname,lastname, \"firstname\" || \"lastname\" AS val FROM "
                + TABLE_DIRECTORY + " where val LIKE '%" + text + "%'",
        null); 
```

使用通配符的文本比较使用`LIKE`, not`=`

# sql-server-2008 - 更改主键和标识的表列

> ID：11897007
> 
> 赞同：12
> 
> 时间：2012-08-10T07:12:16.493
> 
> 标签：sql-server-2008, tsql

我已创建表并想更改该表。我想添加一个主键和`identity(1,1)`.

我可以应用主键，但应用身份会出错。有什么遗漏吗？

```
ALTER TABLE MyTable ADD PRIMARY KEY (Id) 
```

如何使用主键添加身份？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-10T07:14:22.903

您不能更改数据库中*现有*列的定义来添加`IDENTITY`属性（也不能删除它）。您必须使用以下属性创建一个*新*列`IDENTITY`：

```
ALTER TABLE MyTable ADD NewID int IDENTITY(1,1) not null 
```

不幸的是，您无法将旧的 ID 值分配给这个新列。如果你想分配 ID 值，然后让`IDENTITY`接管，你最好用你想要的结构创建一个新表，然后从旧表中导入数据（你可以用来[`IDENTITY_INSERT`](http://msdn.microsoft.com/en-us/library/ms188059.aspx)为`IDENTITY`列分配值）。

然后，如果需要，您将删除旧表并重命名新表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-01T15:54:49.620

但是，它可能必须在设计模式下完成，并且您必须将有问题的列指定为标识。右键单击表格，选择“设计”，转到列，在“列属性”中查找“标识规范”，一切就绪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-08T03:22:16.400

我发现这个是因为我正在寻找相同的答案以编程方式将 IDENTITY 分配给 SQL Server 2019 中的表。我的情况是我试图将其应用到的表是一个导入的表，其中我试图应用 IDENTITY 的列在导入它的表中有 IDENTITY，因此它满足 IDENTITY 的要求 - 每个值都是唯一的并且具有正确的数据类型。这项和其他研究帮助我了解我无法以编程方式执行此操作。

但这并不妨碍我实际完成结果。只要种子和标识间隔与表的原始设置相匹配，我就可以在 SSMS 的设计视图中打开表并在那里分配 IDENTITY，而不是以编程方式。显然，如果涉及很多表，则解决方案不会那么快，但如果 IDENTITY 值在其他关联表中用作外键，则可以保护它们的完整性。

# javascript - 如何通过 HTML 5 javascript 在本地 ipad/iphone 上存储数据并在设备上线时提交

> ID：11897012
> 
> 赞同：1
> 
> 时间：2012-08-10T07:12:45.187
> 
> 标签：javascript, iphone, ipad, html

这是场景：有一个提问者，包括 3 个问题，每个问题有 4 个多个答案。用户将为每个问题选择一个答案，这些数据以隐藏形式存储在标签中，即

```
<label id=q1>A</label>
<label id=q2>C</label>
<label id=q3>D</label> 
```

现在，如果设备连接到互联网，这些数据可以轻松提交，但如果设备没有互联网，我需要找到一种方法将标签数据存储在用户设备上，然后下次有连接时，应用程序有一个提交按钮，它将提交所有存储的数据（每次回答提问者时）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:41:44.393

我要做的是将数据保存在[localStorage](http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#localStorage)中（尽管此链接指向 Phonegap Docs，localStorage 是 Html5 功能，非常有用）并定期调用一个函数来检查是否有要发送的内容。

因此，要检查网络连接的可用性：

```
function isOnline(){
    try{
        var status = navigator.network.connection.type;
        var val = (status != 'none' && status != 'unknown');
        return val;
    }catch(err){ console.error('isOnline(): '+err); return false; }
} 
```

包括这些代码行以向 localStorage 添加一些功能，因为它只允许保存字符串，但是通过这两个函数，它也能够存储 JSON 数据：

```
Storage.prototype.setObject = function(key, value) { 
    this.setItem(key, JSON.stringify(value)); 
}
Storage.prototype.getObject = function(key) { 
    var value = this.getItem(key);
    return value && JSON.parse(value); 
} 
```

在您的表单提交处理程序中，只需检查是否有连接。如果没有，保存要发送的数据：

```
if(isOnline()){
    // do stuff
}else{
    var data = // The data to be sent
    var toBeSent = localStorage.getObject('toBeSent') || [];
    toBeSent.push(data);    // It's better to store the data in an array, in case there's more than a questioner to be sent
    localStorage.setObject('toBeSent', toBeSent);
} 
```

之后编写一个检查和发送数据的函数：

```
function sendPending(){
    var toBeSent = localStorage.getObject('toBeSent') || [];
    var data;
    for(var i in toBeSent){
        data = toBeSent[i];

        // send data
    }
    // Remove the list
    localStorage.removeItem('toBeSent');
} 
```

最后，定期执行该功能：

```
setInterval(sendPending, 60000);  // The system will check every minute if there's something to send 
```

# c# - 在 HLSL 着色器中从精灵批次中获取色调颜色

> ID：11897015
> 
> 赞同：1
> 
> 时间：2012-08-10T07:12:48.943
> 
> 标签：c#, xna, hlsl

如何从 HLSL 着色器中的精灵批次中获取颜色？我正在与 xna 合作。

另外，这背后的理论是什么？我认为在将其传递给 HLSL 之前，色调颜色只会改变实际的纹理颜色，但似乎并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:23:05.123

您可以在[此处查看默认着色器的](http://xbox.create.msdn.com/en-US/education/catalog/sample/stock_effects)[源代码`SpriteBatch`](http://xbox.create.msdn.com/en-US/education/catalog/sample/stock_effects)。查看`SpriteEffect.fx`详情。

具体来说，色调颜色被传递`COLOR0`给顶点着色器，然后直接传递给像素着色器。在像素着色器中，它乘以该像素的纹理样本。

直接修改纹理数据会非常慢。

# node.js - ExpressJS 重定向方法

> ID：11897019
> 
> 赞同：1
> 
> 时间：2012-08-10T07:13:17.040
> 
> 标签：node.js, express

如果我使用`res.redirect( url )`重定向方法是否还会将先前的参数附加到它将被重定向的位置？

这意味着如果我使用 POST 方法传递/发送带有 json 参数的请求，然后我将请求重定向到另一台服务器，那么其他服务器（它被重定向的地方）会接收 json 参数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T07:26:16.017

不，这是一个简单明了的 HTTP Redirect 标头，大多数浏览器在收到这样的标头时只会“跳转”到目标 URL。

如果您以编程方式发布，那么如何对 HTTP Redirect 标头做出反应完全取决于您。如果需要，您可以将原始数据发送到重定向目标。

也可以看看：

[http://en.wikipedia.org/wiki/URL_redirection](http://en.wikipedia.org/wiki/URL_redirection)

# android - 如何在android中进行拼写检查？

> ID：11897020
> 
> 赞同：0
> 
> 时间：2012-08-10T07:13:16.843
> 
> 标签：android, android-layout, spell-checking

在我的应用程序中，我想检查输入的单词是否正确。我搜索了拼写检查示例，但没有找到任何示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:26:09.613

我认为android默认提供拼写检查服务。

假设你没有在开发者网站上寻找它，

这是链接，

[http://developer.android.com/guide/topics/text/spell-checker-framework.html](http://developer.android.com/guide/topics/text/spell-checker-framework.html)

此外，看起来这些示例可与 sdk 包本身一起使用。

# python - 金字塔 1.3 和谷歌应用引擎 1.7

> ID：11897028
> 
> 赞同：3
> 
> 时间：2012-08-10T07:14:14.293
> 
> 标签：python, google-app-engine, pyramid

我设法让 Pyramid 1.2 WSGI 应用程序在 Google App Engine SDK 1.7 上运行。但是，我当前的项目使用了几个新的 Pyramid 1.3 功能，我陷入了 WebOb 版本问题。这是错误消息：

```
VersionConflict: (WebOb 1.1.1 (/home/matt/Python/google_appengine/lib/webob_1_1_1), Requirement.parse('WebOb>=1.2dev') 
```

有什么我可以做的还是我必须等待新的 GAE 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:55:49.627

管理金字塔应用程序及其对 appengine 的依赖关系的一种相当可靠的方法是通过[pyramid_appengine](http://pypi.python.org/pypi/pyramid_appengine/) 库生成使用[buildout](http://www.buildout.org/)的骨架项目。

免责声明：我写这篇文章是今年 pycon 金字塔冲刺的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:36:14.567

您始终可以将您自己的 webob 版本与您的应用程序捆绑在一起：

在您的应用程序目录中执行以下操作：

```
wget http://pypi.python.org/packages/source/W/WebOb/WebOb-1.2.2.zip
unzip WebOb-1.2.2.zip
mv WebOb-1.2.2/webob .
rm -fR WebOb-1.2.2* 
```

并重新部署您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:58:30.243

我最终在我的 virtualenv 中修改了 lib/python2.7/site-packages/pyramid-1.3.2-py2.7.egg/EGG-INFO/requires.txt。我将 WebOb >= 1.2dev 更改为 WebOb >= 1.1.1，它起作用了！

# makefile - make 无法在 Cygwin 中工作

> ID：11897029
> 
> 赞同：0
> 
> 时间：2012-08-10T07:14:15.360
> 
> 标签：makefile, cygwin

我在 Cygwin 中遇到了 c 代码编译的问题。我的环境是 Window Xp 中的 Cygwin，

```
$ which make
/cygdrive/c/MinGW/bin/make

$ which cc
/usr/bin/cc.exe 
```

我的makefile看起来像：

```
CC=cc
CFLAGS= -g  -std=c99 -Wall -pedantic
EXE=graph
SRCS=graph.c
$(EXE):$(OBJS)
        $(CC) $(CFLAGS) $(SRCS) -o $(EXE)
CLEAN:
        rm -fr $(OBJS) $(EXE)* 
```

该文件`graph.c`与`cc`.

我跑了`make`，但它显示

```
cc -g  -std=c99 -Wall -pedantic graph.c -o graph
process_begin: CreateProcess(C:\cygwin\bin\cc.exe, cc -g -std=c99 -Wall -pedantic graph.c -o graph, ...) failed.
make (e=5): Access is denied.
make: *** [graph] Error 5 
```

但是当我运行时`cc -g -std=c99 -Wall -pedantic graph.c -o graph` 它工作正常。

我是 Cygwin 的新手，我的设置或 makefile 有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T08:15:47.587

我认为问题出在你的`$PATH`.

看起来您已经安装了 MinGW 和 Cygwin。它们是相似但不同的环境。

Cygwin`make`命令是`/usr/bin/make`（通常`C:\cygwin\bin\make`）。您正在调用 MinGW`make`命令`/cygdrive/c/MinGW/bin/make`( `C:\MinGW\bin/make`)。但它正在尝试调用 Cygwin`cc`命令`/usr/bin/cc`( `C:\cygwin\bin\cc`)。

调整你的`$PATH`，`/usr/bin`出现*在之前* `/cygdrive/c/MinGW/bin`，你应该没问题。您可能想通过修改`$HOME/.bash_profile`文件来做到这一点。

# mysql - 为什么字符串搜索在 sybase 中区分大小写，而在许多其他数据库中则不区分大小写

> ID：11897033
> 
> 赞同：2
> 
> 时间：2012-08-10T07:14:22.280
> 
> 标签：mysql, sql-server-2008, sybase, rdbms

我在我的应用程序开发中使用了`SQL Server`& `MySQL`RDMS 数据库。我是`sybase`数据库的新手，我发现字符串搜索默认区分大小写，而 in`SQL Server`和`MySQL`它不是。
1\. 是否有任何关于字符串搜索区分大小写的 SQL 标准？
2\. 如果这个字符串列有唯一键索引，那么如果发现两行有相同的字符串但一个大写另一个小写，会有什么问题吗？

```
SELECT * FROM TABLE1 WHERE COL1 = 'Sample'
SELECT * FROM TABLE1 WHERE COL1 = 'sample' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T07:18:36.593

1.  我认为这取决于`CHARACTER SET`和`collation`在 MySQL 中。默认字符集代表不`latin1_swedish_ci`区分`ci`大小写。您可以更改它以`latin1_swedish_cs`使其区分大小写。

    在 MySQL 和 SQL 服务器中，您可以在列、表、数据库和服务器级别设置字符集和排序规则。

    [http://dev.mysql.com/doc/refman/5.5/en/case-sensitive.html](http://dev.mysql.com/doc/refman/5.5/en/case-sensitivity.html)

2.  唯一索引将根据字符集和排序规则删除重复项。因此，如果您有，`latin1_swedish_cs`那么您将有两行用于“样品”和“样品”，而`latin1_swedish_ci`您将只有第一行“样品”。因此，数据库内的所有字符串比较（in `WHERE, DISTINCT, GROUP BY`）都将基于您设置的字符集和排序规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:41:17.083

对于 Sybase ASE，您可能希望切换到**nocase**排序顺序。

```
 sp_helpsort 
```

*   显示有关您当前字符集和排序顺序的信息

    `select id, csid, name, descpription from master..syscharsets where type >= 2000`

*   这将显示可用排序顺序的列表

    `sp_configure 'default sort order', *sortorder_id*`

*   是更改排序顺序的命令。对于 ISO_1(ISO-8859-1) 字符集，该值为“52”。此设置是静态的，因此必须重新启动数据库才能使其生效。

重启后，运行**sp_indsuspect**检查索引，运行**sp_tab_suspectptn**检查分区表。完成此操作后，您可以通过再次运行**sp_helpsort检查您的更改。**

在使用字符集/排序顺序时，确保您拥有数据库转储和数据的 BCP 副本非常重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T07:26:20.753

如果你想在 sqlserver 中选择区分大小写的搜索..试试这个

```
SELECT User_Id FROM Table 
WHERE User_Id=@userid AND Password=@pwd COLLATE SQL_Latin1_General_CP1_CS_AS 
```

这里@userid 和@pwd 是从用户发送到存储过程的参数。

# actionscript-3 - Flex SpinnerList - 如何动画旋转？

> ID：11897035
> 
> 赞同：0
> 
> 时间：2012-08-10T07:14:24.230
> 
> 标签：actionscript-3, apache-flex, mobile, air

如何以编程方式设置组件 SpinnerList (Flex mobile) 的旋转，使其可以旋转几秒钟，然后在选定的索引处停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:33:06.680

```
private function scrollToIndex(index:int, animationDuration:int = 1000):void {
if ((index != -1) && (list.layout != null)) {
var spDelta:Point = list.dataGroup.layout.getScrollPositionDeltaToElement(index);
if ((spDelta != null) && (spDelta.y != 0)) {
var target:DataGroup = list.dataGroup;
var animation:AnimateProperty = new AnimateProperty(target);
animation.property = "verticalScrollPosition";
animation.duration = animationDuration;
animation.toValue = target.verticalScrollPosition + spDelta.y;
animation.play();

} 
```

} }

# c++ - 如何在 C++ 中创建和使用共享库

> ID：11897038
> 
> 赞同：0
> 
> 时间：2012-08-10T07:14:53.507
> 
> 标签：c++

如何使用外部动态链接库访问以下函数？

```
double sum(double a, double b)
{
     return (a+b);
} 
```

**PS> 我对这些东西一无所知。只是想知道事情是如何运作的！

操作系统：Windows（首选）& Linux

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:16:45.883

链接到库并声明原型（通常通过包含声明函数的标头来完成）。

在 Windows 下，您必须明确地将函数标记为导入/导出（google for `declspec(dllimport)`and `declspec(dllexport`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:19:24.970

这在很大程度上取决于编译器。例如，在某些系统（Windows）上，您必须在前面添加一些东西 - __declspec(dllexport) / __declspec(dllimport)。在其他人（Linux）上，这不是必需的。

[这](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)是一个关于如何在 Linux 中使用 gcc 的很好的教程。

# mmu - 指令获取是否通过 MMU？

> ID：11897040
> 
> 赞同：0
> 
> 时间：2012-08-10T07:14:58.720
> 
> 标签：mmu

当CPU使用程序计数器取下一条指令时，是否需要先把下一条指令的地址送到MMU，这样地址才能变成物理地址，然后再通过那个物理地址从内存中取出指令呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:02:11.590

所有具有 MMU 并为指令和数据（包括 x86）共享公共地址空间的架构在获取指令之前都会对其指令进行转换。它要求它以明智的方式行事。

但是，与数据不同，这很少会导致任何性能问题。代码往往很小且本地化，因此几乎可以肯定所有经常访问的代码页的翻译都将缓存在 TLB 中。

# php - ChouchDB PHP 课程建议

> ID：11897045
> 
> 赞同：0
> 
> 时间：2012-08-10T07:15:20.307
> 
> 标签：php, couchdb

一个小问题：

我有这个类用于在 PHP 中使用 CouchDB。我在网上找到了它：

```
 class CouchSimple {

    public $user = "admin";

    public $pass = "admin";

    function CouchSimple($options) {
       foreach($options AS $key => $value) {
          $this->$key = $value;
       }
    } 

   function send($method, $url, $post_data = NULL) {
      $s = fsockopen($this->host, $this->port, $errno, $errstr); 
      if(!$s) {
         echo "$errno: $errstr\n"; 
         return false;
      } 

      $request = "$method $url HTTP/1.0\r\nHost: $this->host\r\n"; 

      if ($this->user) {
         $request .= "Authorization: Basic ".base64_encode("$this->user:$this->pass")."\r\n"; 
      }

      if($post_data) {
         $request .= "Content-Length: ".strlen($post_data)."\r\n\r\n"; 
         $request .= "$post_data\r\n";
      } 
      else {
         $request .= "\r\n";
      }

      fwrite($s, $request); 
      $response = ""; 

      while(!feof($s)) {
         $response .= fgets($s);
      }

      list($this->headers, $this->body) = explode("\r\n\r\n", $response); 
      return $this->body;
   } 
```

这就是问题所在：当我使用带有 GET 方法的 send 函数从一个视图中获取时，所有文档：

```
$options ['host'] = "localhost" ;
$options ['port'] = "5984" ;
$couchdb = new CouchSimple($options) ;
$couchdb -> user = "admin" ;
$couchdb -> pass = "admin" ;

$request = $couchdb -> send ("GET", '/verge/_design/application/_view/posts_by_user') ; 
```

当我点击 echo $request 或 var_dump($request) 时；返回值是具有以下格式的字符串：

```
{"total_rows":8,"offset":0,"rows":[ {"id":"ce9c512257acf399b40edc10e40006d1","key":"ce9c512257acf399b40edc10e40006d1","value":{"_id":"ce9c512257acf399b40edc10e40006d1","_rev":"1-55caf5929e19c7ee1c855baeb9bc1f81","date_created":"Thu, 09 Aug 2012 14:39:04 +0300","content":"asdsada","user":"123","type":"post"},"doc":{"_id":"ce9c512257acf399b40edc10e40006d1","_rev":"1-55caf5929e19c7ee1c855baeb9bc1f81","date_created":"Thu, 09 Aug 2012 14:39:04 +0300","content":"asdsada","user":"123","type":"post"}}, {"id":"ce9c512257acf399b40edc10e4000e35","key":"ce9c512257acf399b40edc10e4000e35","value":{"_id":"ce9c5....... 
```

而且我无法从此字符串中获取 JSON 格式的 VALUE （我的意思是“值”：{.....}）。问题是 ：

我应该如何创建请求链接以返回一个数组，每个位置都有一个文档？例子 ：

```
echo $result [0] ; // {"_id":"123o1josjg9023","_rev":"3-asfdksngosdnhon123o5234","date_created":"Thu, 09 Aug 2012 14:39:04" +0300","content":"kggafasf","user":"123","type":"post"}
echo $result [1] ; // {"_id":"123o1josjg9asdg023","_rev":"1-asfdksngosdnhon123gsgo5234","date_created":"Thu, 09 Aug 2012 14:33:04" +0300","content":"asdasgaa","user":"123","type":"post"} 
```

可以做这样的事情吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:07:29.823

```
$result = json_decode($result, 1); 
```

# data-structures - 使用数据结构查找系列中第 10,000 个最小的数字 (3^i * 5^j * 7^k)，其中 i,j,k >= 0

> ID：11897054
> 
> 赞同：3
> 
> 时间：2012-08-10T07:16:23.717
> 
> 标签：data-structures

如何使用数据结构解决以下问题？

3^i * 5^J * 7^k 其中 i,j,k >=0。找到这个系列中第 10, 000 个最小的数字。

我通过以下方式使用集合解决了它，我觉得这不是一个有效的解决方案：

*   初始集是 (1)
*   将集合的每个元素乘以数字 3,5 和 7 以获得下一个集合。
*   与前一组联合。
*   如果集合的大小大于或等于10,000，则停止乘法过程并按升序对集合进行排序。
*   集合的第 10,000 个元素将是第 10,000 个最小的数字。

有没有其他数据结构可以更有效地解决这个问题？

# php - 访问 $var 而不是 $_GET['var'] 的全局变量

> ID：11897055
> 
> 赞同：0
> 
> 时间：2012-08-10T07:16:25.797
> 
> 标签：php

我有这个非常古老的 Intranet 系统，我认为它是在 6-8 年前实施的。我遇到了一些问题，因为我现在使用的是最新版本的 PHP，当然有些已经被弃用了。

我能够修复/调整一些不推荐使用的 php 函数，允许 php 读取 short tag`<? ?>`等。但是我还想修复一个，但我不确定如何修复。

我的第一个计划是将所有全局变量更改为 $_GET，但这非常乏味，而且我只想在本地运行副本。降级我的 PHP 版本也不是一种选择，因为我也在其他项目中使用它。

所以我现在的问题是，有没有我可以设置的 php.ini 配置，以便系统在没有错误/警告的情况下运行并且可以识别全局变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T07:19:33.613

`register_globals`是你说的配置开关：[http ://www.php.net/manual/en/security.globals.php](http://www.php.net/manual/en/security.globals.php)

它自 PHP 5.3.0 起被弃用，自 PHP 5.4.0 起被删除，因为它存在**严重的安全问题**。请帮您自己和您的客户一个忙，并更改所有这些变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T07:25:54.623

读

### [http://www.php.net/manual/en/ini.core.php#ini.register-globals](http://www.php.net/manual/en/ini.core.php#ini.register-globals)

[`more info`](http://www.php.net/manual/en/security.globals.php)

**笔记 ：**

> 此功能自 PHP 5.3.0 起已弃用，自 PHP 5.4.0 起已移除。
> 
> 请注意，无法在运行时设置 register_globals (ini_set())。虽然，如果您的主机允许，您可以使用 .htaccess，如前所述。.htaccess 条目示例：php_flag register_globals off。

# javascript - 使用 Javascript 的电子邮件地址验证在 ASP.net 中不起作用

> ID：11897065
> 
> 赞同：0
> 
> 时间：2012-08-10T07:17:07.683
> 
> 标签：javascript, asp.net, .net

我正在使用下面的代码来验证电子邮件地址并将电子邮件地址与重新输入电子邮件地址进行比较。但是当我输入错误格式的电子邮件地址并单击注册时，不知何故我没有弹出。

```
<%@ Page Title="" Language="VB" MasterPageFile="~/Main.master" AutoEventWireup="false"
    CodeFile="Registration.aspx.vb" Inherits="Registration" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
<script type="text/javascript" language="javascript">
    function verifyEmail() {

        var status = false;

        var emailRegEx = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;
        if (document.aspnetForm.txtEmailAddress.value.search(emailRegEx) == -1) 
        {
            alert("Please enter a valid email address.");
        }
        else if (document.aspnetForm.txtEmailAddress.value != document.aspnetForm.txtVerifyEmailAddress.value) 
        {
            alert("Email addresses do not match.  Please retype them to make sure they are the same.");
        }
        else 
        {
            alert("Woohoo!  The email address is in the correct format and they are the same.");
            status = true;
        }
        alert(status)
        return status;
    }
</script>

</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <table >

        <tr>
            <td >
                <asp:Label ID="Label3" runat="server" Text="Email Address"></asp:Label>
            </td>
            <td >
                <asp:TextBox ID="txtEmailAddress" Width="234px" runat="server"></asp:TextBox>
            </td>
            <td >
               </td>
        </tr>
        <tr>
            <td >
                <asp:Label ID="Label4" runat="server" Text="Re-Enter Email"></asp:Label>
            </td>
            <td >
                <asp:TextBox ID="txtVerifyEmailAddress" Width="234px" runat="server"></asp:TextBox>
            </td>
            <td >
               </td>
        </tr> 
        <tr>
            <td >

            </td>
            <td >
                <asp:Button ID="btnRegister" runat="server" Text="Register"  OnClientClick ="verifyEmail();" value="Check Email Address"/>
               &nbsp;&nbsp;&nbsp;&nbsp;
                <asp:Button ID="btnCancel" runat="server" Text="Cancel" />
            </td>
            <td >
               </td>
        </tr>
    </table>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:53:49.677

Asp .net 有正则表达式验证器和比较验证器，你应该使用它们

这是他们的链接

[http://asp-net-example.blogspot.in/2009/02/aspnet-regularexpressionvalidator.html](http://asp-net-example.blogspot.in/2009/02/aspnet-regularexpressionvalidator.html) 和 [http://asp.net-tutorials.com/validation/compare-validator/](http://asp.net-tutorials.com/validation/compare-validator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:22:17.773

尝试这个

```
function validateEmail(email) { 
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\
".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA
-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
} 
```

根据您使用上述功能。

参考：[在 JavaScript 中验证电子邮件地址？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

# ios - self.detailViewController.event.title == NULL 在 iOS 5.1.1 中不起作用

> ID：11897066
> 
> 赞同：1
> 
> 时间：2012-08-10T07:17:09.820
> 
> 标签：ios, ekevent

```
- (void)navigationController:(UINavigationController *)navigationController 
      willShowViewController:(UIViewController *)viewController animated:(BOOL)animated 
{   

    if (viewController == self && self.detailViewController.event.title == NULL)
    {

    }
} 
```

`self.detailViewController.event.title == NULL`在 iOS 4.3 中运行良好，但在 iOS 5.1.1 中无法运行

删除事件后，标题仍然具有值...

任何人都知道解决方案，请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:12:10.067

如果您认为事件对象正在被释放，但它的 title 属性仍然具有值，则事件对象没有被释放。一定有什么东西保留了它，或者它还没有自动发布。您使用的是 ARC 还是手动保留/释放？

或者您的意思是事件标题正在被删除，在这种情况下您想要进行字符串比较？

将某物与 nil 或 NULL 进行比较相当于与 0 进行比较，如果您要进行字符串比较，则使用 NSString 的 isEqualToString 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:41:17.347

终于解决了，

通过在日历中再次检查该事件是否已删除。

这个问题也在苹果源代码中的 SimpleEKDemo 中。

无论如何感谢您的帮助。

# css - Wordpress：对齐电子邮件通知并跟进评论

> ID：11897071
> 
> 赞同：1
> 
> 时间：2012-08-10T07:17:37.233
> 
> 标签：css, wordpress

我已经安装了 jetpack 并激活了电子邮件通知并跟进评论。这些字段显示在评论框下方，但未对齐（供参考，这是我的博客链接：[http ://techiedreams.com/test/](http://techiedreams.com/test/)

请告诉我我可以做些什么更改以将它们正确对齐为“commentluv”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:26:19.840

这是因为`Notify Me...`文本是标签。在您的 CSS 中，您已定义

```
#comment-form label {
  float: left;
  width: 110px;
  padding-top: 1px;
  font-weight: bold;
  margin-bottom: 13px;
} 
```

将宽度设置为 110 像素，这适用于表单的其余部分，但您可以单独覆盖它们，因为它们各自具有 和 的`#subscribe-label`ID `#subscribe-blog-label`。

所以放在你的CSS中

```
#subscribe-label, #subscribe-blog-label { width: auto; } 
```

您可能希望在右侧放置一些填充，以便复选框间隔一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:49:15.690

commentluv 插件的问题。我已停用 commentluv 插件，问题已解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T07:39:13.973

只需对你的 CSS 做一点小改动。

在您的 style.css 行号 1699 中，将宽度更改为`70%`.

```
#respond textarea {
width: 70%;
} 
```

干杯！！！

# excel-2007 - 在 excel 2007 中将 YYYYMMDD 转换为 MMYYYY

> ID：11897072
> 
> 赞同：0
> 
> 时间：2012-08-10T07:17:39.493
> 
> 标签：excel-2007

如何在 Excel 中将 YYYYMMDD 转换为 MMYYYY。更具体地说，我需要在 excel 中将 20120531 转换为 May-2012。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:30:26.093

我想这张照片会让你开始 ![在此处输入图像描述](../Images/1e3a1ecb2a2c96573b30ed3c1e415a47.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T07:31:29.690

您可以做的是，右键单击带有日期的单元格，选择单元格属性，在类别列表中转到最后一个，自定义，输入文本框 mmmm-yyyy 然后它会显示 May-2012

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T07:32:17.103

选择列..右键单击>格式化单元格..在类别菜单下的新窗口中..突出显示日期并选择格式。

# sockets - 为什么当通过VPN时sokcet得到一个RST数据包

> ID：11897073
> 
> 赞同：0
> 
> 时间：2012-08-10T07:17:39.760
> 
> 标签：sockets

我的程序有一个服务器和一个客户端，它们与套接字通信。当我在 Intranet 环境中测试它们时没问题。并且在 Internet 环境中测试它们没有问题。我使用 NAT 来设置全球化服务器。但是当客户端通过VPN（TinyVPN）与服务器连接时，四分钟后客户端和服务器几乎同时收到一个RST数据包。为什么客户端通过VPN连接服务器，因为我公司的服务器和客户端都不能作为互联网环境访问，所以我使用VPN在我公司进行互联网访问。我很困惑，当我使用wireshark在服务器和客户端捕获最后一个数据包时，它们几乎同时收到一个RST数据包。我也是google search RST，对这个问题有很多意见。我不关闭操作，做任何通讯操作。只能连接并等待，4分钟后收到一个RST数据包，我不知道原因。请帮助你。我复制了部分源代码如下。

```
 private void OnReadComplete( IAsyncResult ar ) 
{
        ClientUser currentUser;
        int CbRead = -1;

        try
        {
             lock (this.syncSocket)
            {
                //set current opration usser
                currentUser = (ClientUser)ar.AsyncState;
                //Notice::::::::::::::There have a error
                CbRead = currentUser.Stream.EndRead(ar);
            }
        }
        catch(IOException IOExcep)
        {   
            if (m_ClientUser.IsConnected)
            {
                DisconnectClient();
                LogOutput.Logger.Error("IOExcep, Error: " + IOExcep.Message);
            }
    }    

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:51:22.853

最可能的原因是您的 VPN 超时，没有流量通过它并断开连接，从而关闭了所有通过它建立的 TCP 连接。

# java - javax.servlet.ServletContext.getContextPath()Ljava/lang/String

> ID：11897074
> 
> 赞同：1
> 
> 时间：2012-08-10T07:17:47.170
> 
> 标签：java, jakarta-ee

**嗨朋友们，我是新来使用 Tomcat6 我上周完成了所有工作，并且 Tomcat 工作正常。但现在我不能使用 Tomcat6 其他机器。我搜索了很多，但我找不到我的问题的真正答案

请帮我 **

```
SEVERE: Error deploying configuration descriptor host-manager.xml
java.lang.NoSuchMethodError: javax.servlet.ServletContext.getContextPath()Ljava/lang/String;
at org.apache.catalina.core.StandardHost$MemoryLeakTrackingListener.lifecycleEvent(StandardHost.java:616)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4700)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T07:34:20.823

看起来您在类路径中的某个位置有一个旧版本的 Servlet API，它覆盖了 Tomcat 6.0 Servlet API (Servlet API 2.5)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T06:41:41.960

这是奇怪的错误。问题的原因：-您的 Java-Built 路径中的 servlet api 覆盖了您的 Tomcat 服务器的 servlet-api。解决方案：-首先转到您的项目构建路径并删除您的 Tomcat 服务器 6 不支持的版本的 Sevlet-api。然后转到>Java 构建路径 > 库，如果您有 Apache Tomcat v6.0 [Apache Tomcat v6.0 ] 库就完成了。否则转到 > 添加库 > 服务器运行时 > 并选择 Apache Tomcat v6.0 并单击确定。

# protocol-buffers - tlv 和 protobuf

> ID：11897076
> 
> 赞同：0
> 
> 时间：2012-08-10T07:17:50.387
> 
> 标签：protocol-buffers

我正在尝试将 protobuf-c 消息附加到 TLV 中的值并通过网络发送。但我在数据包转储中没有看到正确的内容。下面是 tlv 结构和 .proto 文件。

```
struct test_tlv { 
    unsigned int type;
    unsigned int len;
    unsigned int val;
};
message testproto
{
    optional uint32 type=1;
    optional string id =2;
} 
```

将消息值填充为`test.type= 2 and test.id="0xabcdbcda";`

我已经使用 protobuf api 将测试打包到 val 中并通过网络发送 tlv，但我在转储的数据包中看不到正确的值。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:56:40.440

由于消息是用变量编码的，所以我假设这些值是错误的。在解码它们之后，这些值看起来是正确的。

# jquery - clearInterval 在一种情况下失败，但在另一种情况下失败

> ID：11897079
> 
> 赞同：3
> 
> 时间：2012-08-10T07:18:08.623
> 
> 标签：jquery, setinterval, clearinterval

我正在运行一个函数来检查数据库条目是否存在。

在我的页面加载中，我检查一个元素是否存在，如果它存在，我会使用它`setInterval`来运行一个函数。像这样：

```
if ( $('#encoding').length ) {

    console.log("auto_update start");
    var update = setInterval(auto_update, 12000);
} 
```

然后在我的`auto_update`函数中发生这种情况

```
function auto_update() {

    console.log("auto_update running");

    $.ajax({
        type: 'POST',
        url: ajaxurl,
        data: {
            action: "dhf_ajax_router",
            perform: "dhf_check_status", // the function we want to call
            post_id: $('#post_id').val(),
            nonce: $('#dhf-video-meta-nonce').val()
        },
        success: function(response) {

            if ( response === "continue" ) {

                console.log("still encoding");

            } else {

                clearInterval(update);
                console.log("complete " + response);
            }
        }
    });
} 
```

问题是如果`$('#encoding')`在开始时页面上不存在并且由用户手动触发：

```
$(document).on("click", ".run_encode", function(){

        // doing the necessary stuff here.
        if ( response === "sent" ) {

                // more stuff
                var update = setInterval(auto_update, 12000);
        } 

}); // end .run_encode 
```

然后`clearInterval(update)`它不起作用，它最终陷入无限循环。

我不知道为什么。在这两种情况下都设置了带有名称的间隔`update`，那么为什么在第二种情况下清除它不起作用呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T07:20:48.000

您在函数内声明`update`变量。另一个函数无法访问它的值。

jfriend00 就如何解决它给出了广泛的答案。我会采取另一条路线：使用`setTimeout`. 无论如何都建议这样做，因为 AJAX 调用不会花费恒定的时间，而是每次都会变化。想象一下，由于网络问题，它需要超过 12 秒：你会被搞砸的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T07:35:42.900

您必须确保共享变量`update`在两个范围内都可用。这意味着它要么需要在一个共同的父范围内，要么你需要将`update`变量设为全局变量，这样它就不会超出范围。

最有可能的是，您声明`update`is 在一个终止的函数内，当该函数终止时，该`update`变量超出范围并被销毁。

您可以使变量的初始设置进入全局范围（因此当您`clearInterval()`这样调用时它仍然可用：

```
$(document).on("click", ".run_encode", function(){

    // doing the necessary stuff here.
    if ( response === "sent" ) {

            // more stuff
            window.update = setInterval(auto_update, 12000);
    } 

}); // end .run_encode 
```

或者，您可以将`update`变量声明为全局变量，首先将其放在全局级别（在任何函数之外），然后此代码将只修改全局变量：

```
var update;

$(document).on("click", ".run_encode", function(){

        // doing the necessary stuff here.
        if ( response === "sent" ) {

                // more stuff
                update = setInterval(auto_update, 12000);
        } 

}); // end .run_encode 
```

# ios - 如果我将对象添加到子视图但以后想使用它，我应该释放它吗？

> ID：11897082
> 
> 赞同：1
> 
> 时间：2012-08-10T07:18:20.050
> 
> 标签：ios, ipad, memory-management

可以说我有`UIViewController`一个实例变量`UIBarButtomItem *button`，它不是属性。在`viewDidLoad`我做：

```
button = [[UIBarButtonItem alloc] init...] 
```

然后

```
self.navigationController.leftBarButtonItem = button 
```

如果我想稍后在同一个班级中使用它，我应该释放按钮对象吗？我对数组有同样的问题（将对象添加到数组并稍后使用）。我很困惑，因为集合和`UIViews`保留添加到它们的对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:30:36.307

这取决于您以后如何访问它们。如果您通过实例变量而不是通过目标集合来访问它们，那么您绝对应该释放它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:32:19.473

_button = [UIBarButtonItem alloc] init ..] //假设 _button 是类实例变量

按钮保留计数为 1。

当您将其分配给 leftBarButtonItem 属性时 - 它的保留计数变为 2。

因此，只要您在 viewdidunload/dealloc 中释放按钮对象，就应该很好，因为当 leftBarButton 消失或重新分配时，它将使 _button 计数为 0，从而正确释放您的对象。

如果 _button 不是实例变量，那么您应该释放 _button 并且您可以使用 .leftBarButtonProperty 再次访问它。

# javascript - 如何在 IE9 中启用使用 ajax 加载本地文件

> ID：11897086
> 
> 赞同：6
> 
> 时间：2012-08-10T07:18:35.500
> 
> 标签：javascript, ajax, xmlhttprequest, internet-explorer-9, local-files

我知道存在来源问题，但在这里设置 Web 服务器不是一个选项。Firefox v14 加载本地文件没有问题。添加'--allow-file-access-from-files'后Chrome没有问题有没有办法修复IE9？谢谢

* * *

编辑：我想出了解决方案。IE9 只需使用 ActiveXObject("MSXML2.XMLHTTP.6.0") 代替 XMLHttpRequest() 即可克服本地文件访问拒绝问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T07:20:55.140

~~阿贾克斯与否。~~HTTP 是一种客户端-服务器应用程序协议。没有服务器，这是**不可能的**。

**更新：**

[显然可能](https://stackoverflow.com/questions/4270999/google-chrome-allow-file-access-from-files-disabled-for-chrome-beta-8)在chrome（和firefox）中。至于 IE，你可以阅读[Mark of the Web](http://msdn.microsoft.com/en-us/library/ms537628%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:04:06.937

如果您使用[requirejs](http://requirejs.org/)的[文本插件](https://github.com/requirejs/text)，您只需将其添加到第一个 require.config 参数：

```
requirejs.config({
  config: {
    text: {
      createXhr: function(){
        return new ActiveXObject("MSXML2.XMLHTTP.6.0");
      }
    }
  }
}); 
```

也许其他 JS 库使用类似的语法。深思熟虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:47:50.950

据我所知，

1.  考虑到安全问题，javascript最好不要访问本地文件。所以不可能是标准的。

2.  在 AJAX 中，有各自的方法可以访问各个浏览器的本地文件。

3.  对于 IE，您似乎已经知道，在最初声明 AJAX 对象时，您应该`new ActiveXObject()`改用它。

4.  JavaScript 库 JQuery 的 AJAX 允许您访问本地文件。我认为它为不同的浏览器实现了所有方式，例如，用于 IE 的 ActiveXObject。JQuery 的 AJAX 非常好用；每个人都喜欢它。但是如上所述，存在安全问题。由于 JQuery 将其全部包装起来，因此 JQuery 对于访问您网站的人来说可能是危险的。

==================================================== ==================

参考： http: [//jquery.tiddlywiki.org/twFile.html](http://jquery.tiddlywiki.org/twFile.html)（告诉你JQuery实现访问本地文件的方式）

# java - 二叉树的直径 - 更好的设计

> ID：11897088
> 
> 赞同：16
> 
> 时间：2012-08-10T07:18:38.983
> 
> 标签：java, algorithm, recursion, tree, binary-tree

我写了一个代码来查找二叉树的直径。需要以下建议：

1.  我可以在不使用类级别的静态变量的情况下做到这一点吗？
2.  算法好吗/有什么建议吗？

    ```
    public class DiameterOfTree {   
    public static int diameter = 0; 
    public static int getDiameter(BinaryTreeNode root) {        
        if (root != null) {                     
            int leftCount = getDiameter(root.getLeft());
            int rightCount = getDiameter(root.getRight());
            if (leftCount + rightCount > diameter) {
                diameter = leftCount + rightCount;
                System.out.println("---diameter------------->" + diameter);
            }           
            if ( leftCount > rightCount) {
                return leftCount + 1;
            }
            return rightCount + 1;
        }
        return 0;
      }
    } 
    ```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-10T07:49:40.013

在尝试找到二叉树中两个节点之间的最长路径（直径）时，需要考虑三种情况：

1.  最长的路径通过根，
2.  最长的路径完全包含在左子树中，
3.  最长的路径完全包含在右子树中。

通过根的最长路径只是左右子树的高度之和（对于根不需要 +1，因为具有根节点和 1 个左、1 个右子树节点的树的直径将是 2 )，另外两个可以递归找到：

```
public static int getDiameter(BinaryTreeNode root) {        
    if (root == null)
        return 0;

    int rootDiameter = getHeight(root.getLeft()) + getHeight(root.getRight()); //Removing the +1
    int leftDiameter = getDiameter(root.getLeft());
    int rightDiameter = getDiameter(root.getRight());

    return Math.max(rootDiameter, Math.max(leftDiameter, rightDiameter));
}

public static int getHeight(BinaryTreeNode root) {
    if (root == null)
        return 0;

    return Math.max(getHeight(root.getLeft()), getHeight(root.getRight())) + 1;
} 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-10-01T17:51:34.997

这是一个 O(n) 解决方案，对已接受的答案进行了最小的更改：

```
public static int[] getDiameter(BinaryTreeNode root) {
    int[] result = new int[]{0,0};    //1st element: diameter, 2nd: height    
    if (root == null)  return result;
    int[] leftResult = getDiameter(root.getLeft());
    int[] rightResult = getDiameter(root.getRight());
    int height = Math.max(leftResult[1], rightResult[1]) + 1;
    int rootDiameter = leftResult[1] + rightResult[1] + 1;
    int leftDiameter = leftResult[0];
    int rightDiameter = rightResult[0];
    result[0] = Math.max(rootDiameter, Math.max(leftDiameter, rightDiameter));
    result[1] = height;

    return result;
} 
```

它只是同时计算高度和直径。由于 Java 没有传递引用，我定义了一个 int[] 来返回结果。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-27T00:42:52.193

这是一个具有`O(N)`时间复杂度的 Java 解决方案。它在计算直径时以相同的递归方式计算高度。参考[链接](http://www.geeksforgeeks.org/diameter-of-a-binary-tree/)

```
private class HeightWrapper {
    int height = 0;
}

private int getDiameter_helper(BinaryTreeNode root, HeightWrapper wrapper) {
    if (root == null) {
        return 0; // diameter and height are 0
    }

    /* wrappers for heights of the left and right subtrees */
    HeightWrapper lhWrapper = new HeightWrapper();
    HeightWrapper rhWrapper = new HeightWrapper();

    /* get heights of left and right subtrees and their diameters */
    int leftDiameter = getDiameter_helper(root.left, lhWrapper);
    int rightDiameter = getDiameter_helper(root.right, rhWrapper);

    /* calculate root diameter */
    int rootDiameter = lhWrapper.height + rhWrapper.height + 1;

    /* calculate height of current node */
    wrapper.height = Math.max(lhWrapper.height, rhWrapper.height) + 1;

    /* calculate the diameter */
    return Math.max(rootDiameter, Math.max(leftDiameter, rightDiameter));
}

public int getDiameter(BinaryTreeNode root) {
    HeightWrapper wrapper = new HeightWrapper();
    return getDiameter_helper(root, wrapper);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-10T07:39:25.767

您不需要将结果存储在静态字段直径中。只需使用这样的静态方法：

```
public class DiameterOfTree {

    public static long getDiameter(BinaryTreeNode root) {
        if (root != null) {
            long leftDiameter = getDiameter(root.getLeft());
            long rightDiameter = getDiameter(root.getRight());
            long leftHeight = getHeight(root.getLeft());
            long rightHeight = getHeight(root.getRight());
            return Math.max(leftHeight + rightHeight + 1, Math.max(leftDiameter, rightDiameter));
        }
        return 0;
    }

    public static long getHeight(BinaryTreeNode root) {
        if (root != null) {
            long leftHeight = getHeight(root.getLeft());
            long rightHeight = getHeight(root.getRight());
            return  1 + Math.max(leftHeight, rightHeight);
        }
        return 0;
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-15T02:58:54.773

与接受的答案相比，有一个最小的**O(n)答案。**

```
int DiameterTree(BinaryTreeNode root, int diameter) {
    int left, right;
    if (!root) return 0;

    left  = DiameterTree(root.getLeft(), diameter);
    right = DiameterTree(root.getRight(), diameter);
    if (left + right > diameter) diameter = left + right;

    return Math.max(left, right) + 1;
} 
```

假设`diameter`是类中的静态变量。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-10T18:29:28.107

一棵树的直径 T 为

> 直径(T) = max( 直径(T.left), 直径(T.right), 高度(T.left)+高度(T.right)+1 )

```
 private class Data {  
   public int height;  
   public int diameter;  
 }  

 private void diameter(TreeNode root, Data d) {  
   if (root == null) {  
     d.height = 0; d.diameter = 0; return;  
   }  
   diameter(root.left, d); // get data in left subtree  
   int hLeft = d.height;  
   int dLeft = d.diameter;  
   diameter(root.right, d); // overwrite with data in right tree  
   d.diameter = Math.max(Math.max(dLeft, d.diameter), hLeft+d.height+1);  
   d.height = Math.max(hLeft, d.height) + 1;  
 }  

 public int diameter(TreeNode root) {  
   Data data = new Data();  
   diameter(root, data);  
   return data.diameter;  
 } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-13T17:16:00.297

```
public class NodeWrap{
    int height = 0;
    int maxLength = 0;
    public NodeWrap(int h, int m){
        height = s;
        maxLength = m;
    }
}

public NodeWrap getDiameter(BinaryNode root){
    if(root == null){
        return new NodeWrap(0, 0);
    }

    NodeWrap left = getDiameter(root.left);
    NodeWrap right = getDiameter(root.right);

    int height = Math.max(left.height + right.height) + 1;

    int maxLength = Math.max(left.maxLength, right.maxLength);
    if(left.height != 0 && right.height != 0){
        maxLength = Math.max(left.height + right.height + 1, maxLength);
    }
    return new NodeWrap(singleLength, maxLength);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-09T08:53:59.060

```
One more O(n) solution in python,
code is self explanatory, only issue with this code is it returns tuple containing both height and diameter of the tree. 

def diameter(node, height):
  if node is None:
    return 0, 0
  leftheight  = 0
  rightheight = 0
  leftdiameter,  leftheight = diameter(node.left, leftheight)
  rightdiameter, rightheight = diameter(node.right, rightheight)
  rootheight = 1 + max(leftheight, rightheight ) 
  rootdiameter = ( leftheight + rightheight + 1 )
  return max( rootdiameter, leftdiameter, rightdiameter ), rootheight 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-11T08:53:30.780

最有效的方法是计算直径和高度以达到 O(n)，这是最简单的方法 [Python3,PyPy3]

```
for this definition for a binary tree node,
class TreeNode:
     def __init__(self, x):
         self.val = x
         self.left = None
         self.right = None

class Solution:
def diameterOfBinaryTree(self, root: TreeNode) -> int:
    self.height = 1

    def height(node):
        if node is None:
            return 0
        l_height = height(node.left)
        r_height = height(node.right)
        self.height = max(self.height,l_height+r_height+1)
        return max(l_height,r_height) + 1

    height(root)
    return self.height-1 
```

最简单且经济实惠的解决方案，运行时间更快，复杂性更低。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-21T13:23:43.467

干净整洁的解决方案：

```
// way to use below util function:
prop p = new prop();
diameterUtil(root, p);
System.out.println(p.d);

class prop {
    int h;
    int d;
}

private void diameterUtil(Node n, prop p) {
    if (n == null) {
        p.h = 0;
        p.d = 0;
        return;
    }
    prop lp = new prop();
    prop rp = new prop();
    diameterUtil(n.left, lp);
    diameterUtil(n.right, rp);
    p.h = Math.max(lp.h, rp.h) + 1;
    p.d = Math.max((lp.h + rp.h + 1), Math.max(lp.d, rp.d));
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-09T07:24:32.817

这是 C++ 中的一种递归解决方案，它为您提供二叉树的高度和直径。

```
struct tree
{
    int height = -1;
    int diameter = 0;
};

struct tree BSTDiameter(struct node *root)
{
    struct tree currentTree, leftTree, rightTree;
    if (root == NULL)
    {
        currentTree.height = -1;
        currentTree.diameter = 0;
        return currentTree;
    }
    leftTree = BSTDiameter(root->left);
    rightTree = BSTDiameter(root->right);
    currentTree.height = ((leftTree.height > rightTree.height) ? leftTree.height : rightTree.height) + 1;
    if (leftTree.height == -1 || rightTree.height == -1)
        currentTree.diameter = 0;
    else
        currentTree.diameter = (leftTree.height + rightTree.height + 3) > (rightTree.diameter > leftTree.diameter ? rightTree.diameter : leftTree.diameter) ? (leftTree.height + rightTree.height + 3) : (rightTree.diameter > leftTree.diameter ? rightTree.diameter : leftTree.diameter);
    return currentTree;
} 
```

其时间复杂度为 O(h)，其中 h 是树的高度。希望对你有所帮助。

# c++ - C++ 实例 VS 指针 VS 引用

> ID：11897094
> 
> 赞同：4
> 
> 时间：2012-08-10T07:19:08.497
> 
> 标签：c++, pointers, reference, instance

我有一个程序可以创建我自己的类的许多实例。然后我对它们进行操作：读取、更改、将它们传递给一些第三方方法等。

有三个问题。

1.  我是存储实例向量还是指针向量？为什么？

2.  如果我**不想**更改实例，是否将实例或指针传递给函数？为什么？

3.  如果我**确实**想更改一个实例，我是传递一个指针还是一个引用？为什么？

提前致谢！

类示例：

```
class Player {
    public:
        static const char               width = 35;
        static const char               height = 5;
        static const char               speed = 15;

        int                             socketFD;
        float                           xMin;
        float                           xMax;

        char                            status;
        float                           x;
        float                           y;
        char                            direction;

                                        Player ( int );
        void                            Reset();
        void                            Move();
        void                            SetHost();
        void                            SetClient();

    private:
        void                            EscapeCheck();
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T07:23:42.850

> 我是存储实例数组还是指针数组？为什么？

如果`Class`是一个基类，并且您想防止对象切片，则存储指针。否则，对象。

> 如果我不想更改实例，是否将实例或指针传递给函数？为什么？

如果按值传递，则不会修改原始对象，因为您正在处理副本。如果传递指针或引用，则将其标记为 const：

```
void foo ( MyClass const* );
void foo ( MyClass const& ); 
```

> 如果我确实想更改一个实例，我是传递一个指针还是一个引用？为什么？

任何一个。我个人更喜欢引用，指针与动态分配的联系更紧密。

如今，经常使用 RAII，因此一个很好的替代方法是使用智能指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T07:23:52.893

> 我是存储实例数组还是指针数组？为什么？

这实际上取决于用例。任何一种解决方案都可以，具体取决于上下文。您可能想要存储多态类型的基类，或者您可能想要避免复制元素（例如，在处理不可复制类型时）。在这些情况下，您应该存储指针或[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)。

> 如果我不想更改实例，是否将实例或指针传递给函数？为什么？

然后你应该传递一个 const 引用（对 const 实例的引用）

```
void foo(const Foo& f); 
```

> 如果我确实想更改一个实例，我是传递一个指针还是一个引用？为什么？

然后你应该传递一个非常量引用（对非常量实例的引用）。这假设您确实想要更改现有实例：

```
void foo(Foo& f); 
```

但是你什么时候会使用指针呢？那么我现在能想到的唯一情况是传递的实体有可能具有无效或空值。使用引用，这是不可能的，或者至少不是微不足道的实现。指针可以设置为`0`, `NULL`（相同）或`nullptr`在 C++11 中。

```
void (Foo* f) {
  if (f) {
    // do something with pointee
  } else {
    // deal with it
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T07:24:01.817

对于第二个，这取决于。最有效的可能是传递一个常量引用。

通常，尽量避免使用指针。如果*必须*使用指针，请使用[智能指针](http://en.cppreference.com/w/cpp/memory)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-10T08:02:02.310

> 我是存储实例数组还是指针数组？为什么？

如果您的对象很大（即超过 2-3 个基本类型），您可能希望存储一个指向动态分配实例的指针数组。这将使重新排序对象和调整容器大小/重新分配容器的速度更快。如果您使用多态性，则几乎必须使用指向基类的指针（请注意，引用也是多态的）。这将防止切片，因为数组的所有元素必须具有相同的大小，因此如果要存储多个对象，则可以使用指向基类的指针。

您可能更喜欢将实例存储在容器中的情况是，如果您只有一个类型（没有继承和多态性）并且它不是那么大（即几个原始成员类型）。对于较大的对象，您可能希望使用链表而不是数组，以避免昂贵的插入和重新分配。

> 如果我不想更改实例，是否将实例或指针传递给函数？为什么？

传递指向常量对象或常量引用的指针。除非您传递的是原始对象，否则您可以简单地传递廉价副本并避免修改原始对象。无论是指向 const 对象的指针还是 const 引用都取决于您的使用场景，引用更易于使用，就像普通实例一样，但不能像指针那样更改为引用其他对象。

> 如果我确实想更改一个实例，我是传递一个指针还是一个引用？为什么？

如果您打算更改实例，则传递指针或引用。两者中的哪一个 - 见上文。这样您就可以直接修改特定实例。您也可以按值传递，但它会创建一个临时副本，稍后您需要将其分配回原始对象。这样做没有意义，如果您的意图是修改，请始终使用指针或引用。即使您不打算修改对象，传递常量指针或引用仍然要便宜得多，因为它们是 int 的大小，而对象可能要大得多，因此复制它没有意义。如果您传递的是原始类型，则最好按值传递，尽管如果您打算修改对象，您仍然有一个可以避免的额外分配。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T07:23:05.153

1.  实例数组更好，因为您节省了指针本身以及分配块标头。（前提是该数组可以满足您的需求）。

2,3 在这两种情况下，最好通过引用。在第二种情况下，const ref。优点是节省了不调用ctors。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-10T07:52:20.483

> 我是存储实例数组还是指针数组？为什么？

我更喜欢使用实例数组。您将不再那么头疼管理内存。如果您动态填充指针数组，您可能会在第 1000 个元素处捕获 OOM - 现在程序必须清理半格式数组。从这个意义上说，最好一次性预先分配一大块。

> 如果我不想更改实例，是否将实例或指针传递给函数？为什么？如果我确实想更改一个实例，我是传递一个指针还是一个引用？为什么？

我总是更喜欢参考，因为这样你就可以跳过检查它的有效性。Wikipedia[说](http://en.wikipedia.org/wiki/Reference_%28C++%29)引用不能为 NULL，但我可以到处使用 NULL 引用，因为行为是未定义的，而在我的编译器中恰好是这样。但是，如果您考虑到这一点，那么您确实处于权力的阴暗面。或者，声明函数接受指针邀请传递`NULL`，您必须始终检查它。有一个很好的[博客](http://www.gotw.ca/conv/002.htm)描述了空引用——很好的例子改变了我的想法。

使用引用的一个缺点是，您不能从函数调用代码行中说出函数是通过值还是通过引用获取参数。

您应该记住，引用本质上是指针，并且引用类型具有大小，所以如果您`Class`真的很小，那么您可能会考虑按值传递对象，如果您不想在函数内部更改它们。不过，我仍然会通过参考传递 -`Class`可以增长，然后你去修复所有原型 - 不好。

# jenkins - 我可以在 cloudbees 构建中使用 JDK7

> ID：11897096
> 
> 赞同：1
> 
> 时间：2012-08-10T07:19:09.883
> 
> 标签：jenkins, cloudbees

我可以在我的 Cloudbees Jenkins 构建 (DEV@cloud) 上逐个工作地选择我需要的 JDK 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:19:09.883

是的 - 在 JDK 下拉列表中，您可以选择您想要的。此处注明[http://wiki.cloudbees.com/bin/view/DEV/Jenkins+Build+Machine+Specifications](http://wiki.cloudbees.com/bin/view/DEV/Jenkins+Build+Machine+Specifications)

# iphone - UIButton TouchUpInside 不工作

> ID：11897099
> 
> 赞同：0
> 
> 时间：2012-08-10T07:19:27.260
> 
> 标签：iphone, ios, xcode, cocoa-touch, uibutton

UIButton TouchUpInSide 不工作，但长按对应于 TouchUpinside 的选择器被调用，并且 TouchDown 工作正常。我google了很多来找到答案，但没有运气。希望这个奇怪的问题得到解决。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T07:21:01.723

使用`TouchUpInside`or`TouchUpOutside`代替`TouchInUpSide`. 你在哪里找到那个动作？...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-31T11:12:01.403

TouchUpInside Action 被 View Controller 的超类的手势识别器覆盖。谢谢大家的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T07:28:43.007

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html)

我没有看到 UIControlEvent TouchInUpSide。

请改用该列表之一：

UIControlEventTouchDown
UIControlEventTouchDownRepeat
UIControlEventTouchDragInside
UIControlEventTouchDragOutside
UIControlEventTouchDragEnter
UIControlEventTouchDragExit
UIControlEventTouchUpInside
UIControlEventTouchUpOutside
UIControlEventTouchCancel

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T08:24:34.317

您必须发布代码并可能解释视图层次结构，以便我们了解您的代码以及谁是第一响应者。为了安全起见，请尝试另一个事件，看看会发生什么，这可能是拼写错误。

# c# - 想在 wpf 应用程序中添加 swf 文件！但是 this.Controls 不能工作..但是已经在参考中添加了它

> ID：11897100
> 
> 赞同：0
> 
> 时间：2012-08-10T07:19:30.897
> 
> 标签：c#, wpf, winforms, flash

需要编码帮助..目前正在为我的最后一年项目开发一个 kinect 游戏..想在我的 wpf 应用程序中为启动页面添加 swf 文件..按照说明进行操作并提供参考..但是这个.Controls 出错了..

![错误](../Images/96da56622e34530a7b75ae0b43540f6c.png)

添加了我被要求添加的内容..但我仍然有这个错误..

![错误2](../Images/d50504ea533d6046538e1b4ce075d4eb.png)

还有一件事..我在我的工具箱中找不到 AxHost2Components..我不知道如何添加.. =(

![工具箱](../Images/291fe306703fa04e7607886e48bd0925.png)

假设有这个..但没有..有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:40:14.380

`Controls`是 WinForms 属性，而不是 WPF Window 属性。因此，如果它没有找到属性`Controls`，我认为您可能在期望 WinForms 应用程序时拥有 WPF 应用程序，或者您可能拥有 WPF 应用程序并且您使用了错误的属性。

我不知道工具箱窗口中缺少的 AxHost2 组件，因为我从未使用过这些组件，但如果您有自己的 WPF 应用程序而不是 WinForms 应用程序，那么也许这就是它没有显示的原因？

仅供参考：这是关于如何在 WPF 应用程序中嵌入 SWF[的另一篇文章。](https://stackoverflow.com/questions/7111165/embedding-swf-file-in-wpf-using-windows-forms-host)显然，您使用的类旨在与 WinForms 一起使用，所以我现在假设您设置了 WPF 项目，而您应该设置了 WinForms 项目。或者你还有一些工作要做。

[PS：在这本在线可读的书中](http://books.google.nl/books?id=b1n3mOfdsBoC&pg=PA345&lpg=PA345&dq=wpf+axshockwaveflash+object&source=bl&ots=Ae9H3r3Kbn&sig=UXw8BZackdYwAWII5t_KakiSV-M&hl=nl&sa=X&ei=sr0kUNCBGYL80QXmtoDICg&ved=0CFkQ6AEwADgK#v=onepage&q=wpf%20axshockwaveflash%20object&f=false)有更多关于如何做到这一点的文本和代码（你可能需要向上滚动一点，希望这些东西对你有所帮助）。

# android - GCM onRegistered() 方法

> ID：11897103
> 
> 赞同：0
> 
> 时间：2012-08-10T07:19:42.160
> 
> 标签：android, push-notification, registration

我从[http://developer.android.com/guide/google/gcm/gcm.html](http://developer.android.com/guide/google/gcm/gcm.html)看到了“GCM 架构概述” 。该文档说，当 android 应用程序注册 GCM 时，会调用 onRegistered(Context c,String regId) 包含 regId，然后用户将其发送到其服务器。文档说“谷歌可能会定期刷新注册 ID”。我的问题是我怎么知道谷歌已经为用户刷新了 regId？

我想到的一件事是，当刷新 id 时，它会再次触发**com.google.android.c2dm.intent.REGISTRATION**意图，从而调用 onRegistered() 方法。我对吗？如果是这样，那么我可以将 regId 重新发送到我的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:32:44.563

谷歌没有通知你关于 regid 的变化你必须定期检查 regid 并发送到你的服务器

# jquery - jquery回调函数有不同的语法吗？

> ID：11897104
> 
> 赞同：-3
> 
> 时间：2012-08-10T07:19:42.850
> 
> 标签：jquery, function, syntax, callback

我习惯使用这种语法：

```
<script type="text/javascript">
   $(document).ready(function(){
      $("button").click(function(){
           $("p").hide(1000,function(){
               alert("The paragraph is now hidden");
           });
      });
   });
</script> 
```

但就在最近我遇到了这个也可以的，

```
<script type="text/javascript">
    $(document).ready(function(){
        $("a").hover(function(){
            $(this).stop().animate({ color: '#a6d13b'}, "normal");
        }, function() {
            $(this).stop().animate({ color: '#000000'}, "normal"); //original color
        });
    });
</script> 
```

我只是 jquery 的新手，非常感谢一些帮助。为什么第二种语法有效？即使它在动画功能之外。?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T07:25:43.923

这两个脚本正在做完全不同的事情，但是（只是在这里猜测）我认为让您感到困惑的是，在第二个脚本中，该`.hover()`函数将*两个*回调作为参数，一个用于 mouseenter，一个用于 mouseleave，如下所示：

```
$("a").hover(callbackFunctionOne, callbackFunction2);
// OR
$("a").hover(function() { ... }, function() { ... }); 
```

`.hover()`在您的示例中，`.animate()`调用发生在这两个传递给的函数中，但`.animate()`调用本身（在这种情况下）没有回调。

编辑：现在 dknaack 已经编辑了您的代码以正确缩进它，更明显的是`.animate()`调用在两个函数内部。当它没有缩进时，更难看出什么属于什么。

请注意`.animate()`（以及许多其他 jQuery 函数）*可以*接受回调，但这是可选的。

# mysql - MySQL LOAD 数据 INFILE 加载顺序是什么？

> ID：11897105
> 
> 赞同：0
> 
> 时间：2012-08-10T07:19:43.710
> 
> 标签：mysql, load, file-io

我有一个 csv 文件，应该按顺序加载，这样我就可以用前一行的 person_name 更新空白的 person_name 字段。

我添加了一个 id（自动增量），我可以用它来更新空白行。

**表人**

```
id   person_name     car      model
1    Fred            Volvo    2001
2                    FIAT     2000
3    Paul            Volvo    2010 
```

我的疑问是，我可以确信文件将始终按顺序加载吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:54:04.243

尽管文档没有说明我认为数据将逐行按顺序插入到表中是非常安全的。

**但是请记住，它不能保证从 table 检索时行将按任何顺序排列**。

不同的存储引擎可能（并且确实）在内部以不同的方式分配行并以完全不同的顺序检索它们。因此，你转述它是**不安全**的。您应该对输入文件中的行进行编号并使用 line_id/row_id 进行进一步处理，或者在将文件加载到 MySQL 服务器之前对其进行处理。

# javascript - chrome 包应用程序中的 eval

> ID：11897112
> 
> 赞同：27
> 
> 时间：2012-08-10T07:20:32.267
> 
> 标签：javascript, google-chrome, google-chrome-extension, eval, google-chrome-app

我想创建一个包应用程序 chrome 扩展，以允许用户编写和执行 javascript 代码（如 javascript 控制台）。

我想使用该`eval()`函数来执行 JS 代码。

从 chrome 扩展程序调用经典的 javascript`eval`函数时会引发错误：

> 未捕获的错误：此上下文不允许从字符串生成代码

要`eval`在 chrome 扩展中使用，人们需要使用[sandbox](http://developer.chrome.com/trunk/apps/sandboxingEval.html)，但是当我在清单中编写沙箱时，会出现以下错误：

> 尝试安装此扩展时出现警告：指定包类型（主题、应用程序等）不允许使用“沙盒”。

**更新**

根据[这个问题](http://code.google.com/p/chromium/issues/detail?id=141501)，包应用程序不支持沙箱，所以我有两个问题：

1.  我可以使用另一种方法来代替`eval()`吗？

2.  `eval`没有沙箱可以使用吗？（我认为可能不是出于安全原因？）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-12T23:03:14.153

**更新：**

至少从 2013 年 1 月开始，Chrome 现在允许使用[`unsafe-eval`](https://developer.chrome.com/extensions/contentSecurityPolicy.html#relaxing-eval)内容安全策略 (CSP) 指令，该指令允许`eval`在沙盒之外执行：

> 可以通过添加到您的保单中来放宽针对`eval()`及其亲属的保单，如`setTimeout(String)`,`setInterval(String)`和`new Function(String)`**`'unsafe-eval'`**

向您的扩展清单添加适当的[CSP ，例如：](https://developer.chrome.com/extensions/contentSecurityPolicy.html)

```
"content_security_policy": "script-src 'self' 'unsafe-eval'; object-src 'self'" 
```

* * *

[您提到](http://code.google.com/p/chromium/issues/detail?id=141501)的错误现在标记为`fixed`，并且自 Chrome 22 起已包含在内。

在引入 之前`'unsafe-eval'`，没有办法让`manifest_version: 2`扩展的 CSP 允许将任意文本作为代码执行。 [当时](http://web.archive.org/web/20120812230022/http://developer.chrome.com/extensions/contentSecurityPolicy.html)，谷歌明确表示没有办法消除这个限制（沙盒之外）：

> 内联 JavaScript 以及危险的字符串到 JavaScript 方法（如`eval`）将不会被执行......没有机制可以放宽对执行内联 JavaScript 的限制。特别是，设置包含的脚本策略`unsafe-inline`将不起作用。这是故意的。

如上所述，这个限制现在可以放宽了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T19:16:10.847

我想您是在谈论新的打包应用程序（清单版本 2），对吧？

沙盒绝对可以在新的打包应用程序中使用。上周我刚刚上传[了一个示例](https://github.com/GoogleChrome/chrome-app-samples/tree/master/samples/sandbox)，它确实做到了：一个窗口向隐藏的沙盒 iframe 发送消息，iframe 编译一个把手模板（这里它可以使用 eval 代替）并将编译后的 HTML 返回到托管页面，它显示结果。

您还可以检查[this other sample](https://github.com/GoogleChrome/chrome-app-samples/tree/master/samples/sandboxed-content)，它完全符合您的要求。

所以，直接回答你的问题：

1) 否，因为 CSP 限制。在 Chrome 打包应用程序中评估动态 JavaScript 的唯一方法是沙盒 iframe。如果这不是您的应用程序的选项，您还可以在服务器中发送和评估 JavaScript 内容，并仅将结果返回给用户（尽管这会破坏 Chrome 打包应用程序的离线功能）

2) 不，您只能在沙盒 iframe 中使用 eval()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:43:38.677

你可以试试...

```
function evalMe(code){
    var script = document.createElement('script');
    script.innerText = code;
    document.querySelector('head').appendChild(script);
} 
```

这应该会产生相同的效果，除非他们也禁用了它，但据我所知，这很好。当然，如果脚本`errors`你不会听到它，除非你对 to 进行一些包装`string`，`eval`例如

```
function myHandler(err){
    // handle errors.   
}

function evalMe(code){
    var script = document.createElement('script');
    var wrapper = '(function(){ try{ @@ }catch(err){ myHandler(err); } })()';
    // Make sure the string has an ending semicolon
    code = code[code.length-1] === ';' ? code : code + ';';

    script.innerText = wrapper.replace('@@', code);
    document.querySelector('head').appendChild(script);
} 
```

或者，您可以使用官方机制

[http://developer.chrome.com/beta/extensions/tabs.html#method-executeScript](http://developer.chrome.com/beta/extensions/tabs.html#method-executeScript)

但是，这将要求您有一个[背景页面](http://developer.chrome.com/extensions/background_pages.html)并在您的页面和背景页面之间使用[消息传递。](http://developer.chrome.com/extensions/messaging.html)`app`

**更新：**工作方法

您可以`eval`使用 iframe 和`base64`处理`dataURI`扩展页面和`<iframe>`. [您可以在 github 上](https://github.com/AshHeskes/eval-extension)获取代码的工作副本。要使用简单的克隆或下载 repo，并`dir`在 chrome 扩展管理器中将“客户端”安装为未打包的扩展。驱动插件的代码位于`app.js`

使用 iframeEval 进行测试，错误通知有点错误，但嘿，`eval`工作正常。

@appsillers 为了让您的插件在没有任何额外代码的情况下工作，您可以使用代码中的`eval`方法覆盖扩展`window`上的`iframeEval`方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-22T13:34:50.777

在我开始的 Angular.js chrome 应用程序给出了同样的错误之后，我得到了这个答案。作者没有提到 Angular.js，但如果其他人遇到这个，你需要在你的网页上添加一个额外的指令，例如

```
<html ng-app ng-csp>
... 
```

这将 Angular 置于 CSP 安全模式 [https://docs.angularjs.org/api/ng/directive/ngCsp](https://docs.angularjs.org/api/ng/directive/ngCsp)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-20T19:19:35.770

您可以使用 : $scope.$eval() 从角度。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-10T07:24:21.977

这是一个不起作用的示例，因为所有带有代码的字符串都将在 Chrome 打包应用程序中被拒绝：

```
//To run some code from a string without `eval` just do this:
var code = new Function(yourCodeString);
code(); 
```

# node.js - 如何在 node-xmpp 中接收来自 ejabberd 的消息？

> ID：11897113
> 
> 赞同：0
> 
> 时间：2012-08-10T07:20:33.040
> 
> 标签：node.js, ejabberd, node-xmpp

我可以向 ejabberd 发送消息**，**但如何接收 - 我不知道。也许有人有活生生的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:38:57.310

解决方案是使用“节”事件。这是示例：

```
cl.addListener('stanza', function(stanza) {
    connection.write(stanza.children[1].children);
    console.log(stanza.children[1].children);
}); 
```

# ms-access - 如何使用我在其他 acees 数据库中制作的程序

> ID：11897114
> 
> 赞同：0
> 
> 时间：2012-08-10T07:20:35.530
> 
> 标签：ms-access, module, vba

如果您想在我打开访问时始终运行，如何使用我为一个数据库制作的程序。我创建了两个模块。我想在打开访问时始终运行它们。他们的任务是打开我想要的表。我需要做什么？在 Excel 记录宏中，但在访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:51:11.060

您不能在 MS Access 中记录宏，但可以创建宏，但是，如果您只想编辑表格，首先使用表格向导创建表格，数据表可能适合，然后选择文件->选项，当前数据库，显示表单，然后从下拉列表中选择您刚刚创建的表单（Access 2010/2007）。

您可以像添加任何其他引用一样添加对数据库的引用（从代码窗口中选择工具、引用、浏览）。获得参考后，您可以运行该数据库中的任何代码，但是，为简单起见，请确保为模块和过程指定唯一名称以避免名称冲突。

完成此操作后，创建一个调用代码的表单，就像从命令按钮调用任何代码一样。

# iphone - ASIHTTPRequest SOAP 问题

> ID：11897115
> 
> 赞同：1
> 
> 时间：2012-08-10T07:20:36.183
> 
> 标签：iphone, ipad, soap, asihttprequest, asiformdatarequest

请帮我创建 ASIHTTPRequest，它应该发送 xml 数据（soap 请求）。我使用 ASIHTTPRequest 创建通常的请求，但从不使用肥皂。在我的 iPhone 项目中，我需要发送与我的 Mac 上的其他程序相同的请求。我使用 WireShark 来做到这一点。

以下是wireshark PrintScreens：

获取 Assinded Jobs 请求（第 1 部分）： [完整图片](http://postimage.org/image/7va31j2br/full/)

![获取 Assinded 工作请求（第 1 部分）：](../Images/654de6f55203ec890fe7a2eae2ebcef7.png) 获取 Assinded Jobs 请求（第 2 部分）：[完整图像](http://postimage.org/image/n7k6koqdh/full/)

![获取 Assinded 工作请求（第 2 部分）：](../Images/f57cdf93b86913428ee49d31abe18d5b.png)

我有创建 ASIHTTPRequest 的经验，但它是 JSON 数据。我了解如何使用正确的标头创建请求。但我不知道如何使用 xml 创建请求。

**更新**

完整的 xml（对不起 1 个字符串，但 WireShark 以这种方式将 xml 提供给我）：

```
<?xml version="1.0" encoding="UTF-8"?>
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns0="http://com.test/types/AstoriaObjectProperties" xmlns:ns1="http://com.test/wsdl/AstoriaObjectProperties" xmlns:ns2="http://java.sun.com/jax-rpc-ri/internal"><env:Body><ns1:getObjectEnumerationProperties env:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><String_1 xsi:type="xsd:string">00000013UF10YZ</String_1><arrayOfString_2 xsi:type="ns0:ArrayOfstring" enc:arrayType="xsd:string[0]" xsi:nil="1"/><HashMap_3 xsi:type="ns2:hashMap" enc:arrayType="ns2:mapEntry[7]"><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">ancestorIds</key><value xsi:type="xsd:anyType" xsi:nil="1"/></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">getAssignedJobs</key><value xsi:type="xsd:anyType" xsi:nil="1"/></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">description</key><value xsi:type="xsd:anyType" xsi:nil="1"/></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">name</key><value xsi:type="xsd:anyType" xsi:nil="1"/></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">custAttrs</key><value xsi:type="enc:boolean">true</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">itemFlavor</key><value xsi:type="xsd:anyType" xsi:nil="1"/></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">defaultProperties</key><value xsi:type="xsd:anyType" xsi:nil="1"/></item></HashMap_3></ns1:getObjectEnumerationProperties></env:Body></env:Envelope> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:33:31.343

我使用了这段代码。有用

```
NSURL *url2=[NSURL URLWithString:stringForURL2];
self.request2 = [ASIFormDataRequest requestWithURL:url2];
[request2 setRequestMethod:@"POST"];
[request2 setValidatesSecureCertificate:NO];
[request2 addRequestHeader:@"SOAPAction" value:@""];
[request2 addRequestHeader:@"Content-Type" value:@"text/xml"];

NSString *soapMessage = xmlStringGoesHere;

NSMutableData *soapdata = [[[NSMutableData alloc] initWithData:[soapMessage dataUsingEncoding:NSUTF8StringEncoding]] autorelease];

[request2 setPostBody:soapdata];

request2.username = appDelegate.username;
request2.password = appDelegate.password;

[request2 setDelegate:self];
[request2 setTimeOutSeconds:60];
[request2 startAsynchronous]; 
```

# linux - 如何将 Linux 32 位 gcc 内联汇编转换为 64 位代码？

> ID：11897116
> 
> 赞同：11
> 
> 时间：2012-08-10T07:20:36.000
> 
> 标签：linux, gcc, assembly, x86-64, inline-assembly

我正在尝试使用 gcc 在 Linux[中将 RR0D Rasta Ring 0 调试器](http://rr0d.droids-corp.org/)从 32 位模式转换为 64 位模式（长模式）。我熟悉 x86 32 位汇编（在 MS-DOS 环境中），但我是 x86 64 位汇编和一般 Linux 汇编编程的初学者。

该项目用于生产（我需要一个工作的非源调试器），但我也尝试学习如何进行 32 位到 64 位的转换。如果可能的话，我试图找到一种通用的方法来进行 32 位到 64 位的转换，这种方法可以在任何 32 位程序上使用正则表达式完成（以便它可以自动化）。我知道不存在通用解决方案（64 位代码可能比 32 位代码占用更多空间等并消耗更多堆栈等），但即使在这种情况下，自动转换的代码也可以作为起点。

这个想法是保持 8 位和 16 位操作数不变，并用 64 位操作数替换 32 位操作数。`pushw %ax; pushw %bx; popl %ecx`如果替换为，这种方法自然会失败`pushw %ax; pushw %bx; popq %rcx`，但表现良好的程序通常不会`push`两个 16 位操作数，然后`pop`是一个 32 位操作数，或者是吗？

这些是迄今为止的转换：

**编辑：**修复：`pusha`/`pushad` **可以**替换为连续`push`的 'es，因为`pusha`/`pushad`命令在实际推送*之前*`sp`推送/的值，并且在 286+ 中的工作方式相同，但在 8088/8086 [The Assembly Language database](http://www.cs.ubbcluj.ro/~forest/HtmlFolder/AC/NG/ng142bb.html)中的工作方式不同。这种差异在这里不是问题（对于 386+ 代码）。因此可以用连续的命令代替。`esp` *`sp``push sp``pusha``pushad``push`*

 *另一种方法与[OpenSolaris 的`privregs.h`代码](http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/intel/amd64/sys/privregs.h)类似。

**编辑：**修复：对所有命令使用 64 位内存寻址。

1.  `pusha`-> `push %ax; push %cx; push %dx; push %bx; push %sp; push %bp; push %si; push %di`。

    **编辑：**修复：一个有效的替代方案（使用`lea`），请注意 x86 处理器是 little-endian: `pusha`-> `movq %rax, -8(%rsp); lea -8(%rsp), %rax; mov %ax, -10(%rsp); movq -8(%rsp), %rax; movw %cx, -4(%rsp); movw %dx, -6(%rsp); movw %bx, -8(%rsp); movw %bp, -12(%rsp); movw %si, -14(%rsp); movw %di, -16(%rsp); lea -16(%rsp), %rsp`。

2.  `pushad`-> `push %rax; push %rcx; push %rdx; push %rbx; push %rsp; push %rbp; push %rsi; push %rdi`。

    **编辑**：修复：一个有效的替代方案（使用`lea`）：`pushad`-> `movq %rax, -8(%rsp); movq %rcx, -16(%rsp); movq %rdx, -24(%rsp); movq %rbx, -32(%rsp); lea -32(%rsp), %rax; movq %rax, -40(%rsp); movq -8(%rsp), %rax; movq %rbp, -48(%rsp); movq %rsi, -56(%rsp); movq %rdi, -64(%rsp); lea -64(%rsp), %rsp`。

    **编辑：**修复：`popa`并`popad`弹出`sp`/的值`esp`但将其丢弃（[英特尔指令集 - popa/popad](http://web.itu.edu.tr/kesgin/mul06/intel/instr/popa_popad.html)）。让我们`pop`进入`bx`/ `rbx`。

3.  `popa`-> `popw %di; popw %si; popw %bp; popw %bx; popw %bx; popw %dx; popw %cx; popw %ax`。

4.  `popad`-> `popq %rdi; popq %rsi; popq %rbp; popq %rbx; popq %rbx; popq %rdx; popq %rcx; popq %rax`。

5.  `pushfd`-> `pushfq`。

6.  `popfd`-> `popfq`。

7.  **编辑：** `push`段寄存器，例如。`pushw %ds`-> `pushw %ax; pushw %ax; movw %ds, %ax; movw %ax, 2(%rsp); popw %ax`。

8.  **编辑：** `pop`段寄存器，例如。`popw %ds`-> `pushw %ax; movw 2(%rsp), %ax; movw %ax, %ds; popw %ax`。

9.  **编辑：** `inc %reg16` -> `add $1, %reg16`，例如。`inc %ax`-> `add $1, %ax`。

10.  **编辑：** `dec %reg16` -> `sub $1, %reg16`，例如。`dec %ax`-> `sub $1, %ax`。

11.  **编辑：** `inc %reg32` -> `add $1, %reg64`，例如。`inc %eax`-> `add $1, %rax`。

12.  **编辑：** `dec %reg32` -> `sub $1, %reg64`，例如。`dec %eax`-> `sub $1, %rax`。

13.  **编辑：** `aaa` ->？

14.  **编辑：** `aad` ->？

15.  **编辑：** `aam` ->？

16.  **编辑：** `aas` ->？

17.  **编辑：** `arpl` ->？

18.  **编辑：** `bound` ->？

19.  **编辑：** `daa` ->？

20.  **编辑：** `das` ->？

21.  **编辑：** `lahf` ->？

22.  **编辑：** `sahf` ->？

23.  **编辑**修复：任何带有直接操作数的命令在 64 位模式下不适合 32 位操作数大小，例如。`pushl $0xDEADBEEF`-> `pushq %rax; pushq %rax; movq $0xDEADBEEF, %rax; movq %rax, 8(%rsp); popq %rax`。

24.  `ret`使用立即操作数：我认为在这种情况下，必须回溯源代码以查看 last `push`ed 操作数的大小，并采取相应的行动，例如。`pushl %eax; ret 4`-> `pushq %rax; ret 8`。

25.  **编辑：：**系统调用：`int $0x80`-> `pushq %rdi; movq %rbp, %r9; movq %rdi, %r8; movq %rbx, %rdi; xchgq %rcx, %rsi; -- replace %rax value using a substitution list --; syscall; popq %rdi; xchgq %rcx, %rsi`（注意：32 位系统调用可能有超过 6 个参数，6 个在寄存器中，其余在堆栈中，64 位系统调用可能永远不会有超过 6 个参数）。

**编辑：**还应该考虑什么？将 32 位代码转换为 64 位代码（以长模式运行）还需要哪些其他转换？*

# c# - 在网格 c# 中显示完整的日期时间

> ID：11897125
> 
> 赞同：2
> 
> 时间：2012-08-10T07:21:38.590
> 
> 标签：c#, winforms, infragistics, ultrawingrid

例如，我有一个值，`07-August-2012 09:30:00`其中包含完整的日期和时间`DateTime`，但是`07.08.2012`当我将其值设置为此时，仅在我的基础设施超网格单元格中显示`DateTime`。

如何显示完整`DateTime`值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T07:28:02.257

如果`InitializeLayout`您使用 UltraGrid，请执行以下操作：

```
private void ultraGrid1_InitializeLayout(object sender, 
  Infragistics.Win.UltraWinGrid.InitializeLayoutEventArgs e)
{
e.Layout.Bands[0].Columns["yourDateCol"].Format = "G"; //MM/dd/yyyy HH:mm:ss
} 
```

有关完整参考，请参阅： [本地化单元格显示格式](http://help.infragistics.com/Help/NetAdvantage/WinForms/2012.1/CLR2.0/HTML/WinGrid_Localizing_Cell_Display_Format.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T07:30:23.887

您需要在**InitializeLayout**事件中使用此代码格式化列

```
 public static void FormatAsDate(UltraGridColumn cl)
    {
        cl.CellAppearance.TextHAlign = HAlign.Left;
        cl.Header.Appearance.TextHAlign = HAlign.Left;
        cl.MaskInput = "dd/MM/yyyy hh:mm:ss";
        cl.PromptChar = ' ';
        cl.Style = Infragistics.Win.UltraWinGrid.ColumnStyle.DateWithoutDropDown;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T09:59:46.320

显示完整日期时间值的最简单方法是使用正确的格式。如果您希望它与 07-August-2012 09:30:00 完全相同，您可以在 UltraGrid 控件的 InitializeLayout 事件中设置所需列的以下格式，例如：

```
 `private void ultraGrid1_InitializeLayout(object sender, Infragistics.Win.UltraWinGrid.InitializeLayoutEventArgs e)
    {
       e.Layout.Bands[0].Columns["DesireColumnKey"].Format = "dd-MMMM-yyyy hh:mm:ss";
    }   ` 
```

# tablesorter - tablesorter pager 使表格隐藏

> ID：11897129
> 
> 赞同：0
> 
> 时间：2012-08-10T07:21:52.797
> 
> 标签：tablesorter

如果我对表格进行排序，表格的内容将被禁用......我不知道为什么。没有寻呼机它可以工作。

有人有同样的问题吗？

```
 $(function() {
    $("table")
        .tablesorter({widthFixed: false, widgets: ['zebra']})
        .tablesorterPager({
            container: $("#pager"),
            size: 25
            });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:53:20.920

Tablesorter 的分页器插件从表中完全删除所有不可见的行。因此，如果要绑定到表内的任何元素，请使用`on()`or`delegate()`函数，如下所示（[ref](http://api.jquery.com/delegate/)）：

```
$(elements).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(elements).on(events, selector, data, handler);        // jQuery 1.7+ 
```

如果这不能解决问题，那么请分享一个演示或一些您遇到问题的代码，以便我们更好地帮助您。

# ios - 设备旋转时如何缩放 UIImageView？

> ID：11897130
> 
> 赞同：0
> 
> 时间：2012-08-10T07:21:56.993
> 
> 标签：ios, uiimageview

我希望我的 UIImageView 在我旋转设备时变成全屏。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:35:54.880

在您的视图控制器中实现`willAnimateRotationToInterfaceOrientation:...`并根据方向为图像视图设置所需的框架：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation) {
         self.imageView.frame = ...
    } else {
         self.imageView.frame = ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:40:25.547

并且不要忘记将您的设置`autoresizingMask`为这样的：

```
self.imageView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth; 
```

如果您这样做，您不必自己关心框架调整。

干杯

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T07:35:35.027

将 uiimageview.frame 设置为 widow.view.frame，并选择缩放以适应模式

# azure - “Web”网站与 Windows Azure 中的其他网站有什么区别？

> ID：11897132
> 
> 赞同：5
> 
> 时间：2012-08-10T07:22:09.747
> 
> 标签：azure, package

[定义网络角色](http://msdn.microsoft.com/en-us/library/windowsazure/gg557553.aspx)时，我可以在`<WebRole><Sites>`元素下指定站点。其中一个站点可以有一个名称`"Web"`，然后我不需要指定`physicalDirectory`它 - 相反，站点内容将被复制到`sitesroot`文件夹中并复制服务包的内容`approot`并扩展服务包。

所以它看起来很简单 - 我应该为我的网站命名任何其他名称，`"Web"`而不是指定`physicalDirectory`，它会工作得很好，没有重复，因此是一个更小的包。

通过命名我的网站有什么好处`"Web"`吗？`"Web"`考虑到负面后果，我为什么要命名它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T08:54:12.893

“Web”站点只是您在将 WebRole 添加到云项目时创建的新项目或选择的现有项目。因此 WebRole 的默认站点 (Web) 直接映射到该 Web 项目。

这仅仅意味着它将使用该项目的程序集作为 RoleEntryPoint (WebRole.cs)。这就是为什么在 approot（这是执行 RoleEntryPoint 的地方）和 sitesroot（IIS 网站）中使用该项目的输出的原因。

现在，如果你想保持你的包很小，你确实可以创建一个只为 WebRole.cs 部分服务的虚拟站点，除此之外还有一个真实的站点。这将在部署到 Azure 时创建 3 个“文件夹”：

*   approot => 包含虚拟站点的非常小的目录
*   sitesroot\0 => 包含虚拟站点的非常小的目录
*   sitesroot\1 => 你的真实站点

您要做的是使用端点来确保虚拟站点不会通过给它一个内部端点来暴露：

```
 <WebRole name="MyWebRole" vmsize="Small">
    <Sites>
      <Site name="Web">
        <Bindings>
          <Binding name="Endpoint1" endpointName="DummyEndpoint" />
        </Bindings>
      </Site>
      <Site name="RealWebApplication" physicalDirectory="..\MvcApplication1">
        <Bindings>
          <Binding name="Endpoint2" endpointName="RealEndpoint" />
        </Bindings>
      </Site>
    </Sites>
    <Endpoints>
      <InputEndpoint name="RealEndpoint" protocol="http" port="80" />
      <InternalEndpoint name="DummyEndpoint" protocol="http" />
    </Endpoints>
    ...
  </WebRole> 
```

您的虚拟 Web 应用程序将如下所示：

![在此处输入图像描述](../Images/e91af4d4a395f040da5d58999f60b2b2.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T12:37:23.383

几个月后，除了`Web`明确指定`physicalDirectory`. 它只是工作。

看起来 Azure 工具的默认设置是不合理的。我`.cspkg`变得更小了，因此准备和卸载所需的时间更少，我浪费的时间也少得多。我希望我早点找到这个。

# xamarin.ios - RedLaser3.3.0 的 MonoTouchBindings

> ID：11897134
> 
> 赞同：0
> 
> 时间：2012-08-10T07:22:15.777
> 
> 标签：xamarin.ios

RedLaserSdk 3.3 是否有任何 MonoTouch 绑定。我只找到了 2.4 版本的绑定。这是我发现的最新绑定：[https ://github.com/chrisbranson/monotouch-bindings/tree/master/RedLaser](https://github.com/chrisbranson/monotouch-bindings/tree/master/RedLaser)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:26:24.170

我认为您应该尝试使用 2.4 绑定。如果 RedLaser 进行了任何更改，您自己添加它们应该不会太难。

如果您为 3.3 修复任何内容，请确保提交拉取请求。

# ssh - 没有以前创建的文件夹的 sshfs 挂载点

> ID：11897138
> 
> 赞同：2
> 
> 时间：2012-08-10T07:22:35.043
> 
> 标签：ssh, mount, sshfs

我想用来`sshfs`将文件夹从我的服务器安装到我的笔记本电脑。

我一直在做这个我制作一个目录，例如在我的桌面下制作目录挂载

```
mkdir ~/Desktop/mount 
```

然后我会使用 sshfs 挂载到那个

```
sshfs user@ipaddress:path/to/file ~/Desktop/mount -o volname=Something 
```

这工作得很好。除了我必须先创建那个目录。我写了一个脚本来为我制作目录并挂载它

```
umount ~/Desktop/mount
rm -rf ~/Desktop/mount
mkdir ~/Desktop/mount
sshfs ichill@192.168.1.142:$1 ~/Desktop/mount -o volname=$1 
```

然后问题是尝试进行多个安装。所以，我修改了上面的代码来做多个挂载

```
umount ~/Desktop/$1
rm -rf ~/Desktop/$1
mkdir ~/Desktop/$1
sshfs ichill@192.168.1.142:$1 ~/Desktop/$1 -o volname=$1 
```

没问题，我有时会留下 4 到 5 个空文件夹。

有没有办法让这个挂载而不必每次都制作文件夹。

编辑：我也不想制作一个脚本来卸载它。我想使用系统弹出调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:32:39.467

不，需要有一个包含文件夹才能成功挂载

当您瞄准您的桌面文件夹时，我假设您在使用“挂载服务器”设施时正在寻找桌面系统（例如 gnome）的类似行为。

要使用 gnome-virtual-filesysem (GVFS) 实现此目的，您可以发出此命令。

```
gvfs-mount sftp://user@host:port 
```

它将在 .gvfs 下创建一个名为“sftp for user on host”的文件夹，其中用户和主机由您设置。此外，它应该出现在您的 Nautilus 资源管理器窗口下。

gvfs-mount 使用`GIO`其中`Glib`的一个`Gnome`特长。在这个库中，它可以监视挂载文件夹，*因此一旦卸载就将其删除*。

要卸载 gvfs 连接，用法与常规安装略有不同，因为它使用 gvfs-mount 二进制文件来执行此操作。

```
ls ~/.gvfs
>> outputs
/home/user/.gvfs/sftp for user on host
# to umount: (-u in short)
gvfs-mount --unmount "/home/user/.gvfs/sftp for user on host" 
```

# c# - 从 SAPI SpeakStarted 事件中获取文本内容

> ID：11897142
> 
> 赞同：0
> 
> 时间：2012-08-10T07:22:58.623
> 
> 标签：c#, sapi, text-to-speech

这是一个微软语音 api 相关的问题：

这个想法是，当 SpeechSynthesizer 触发 SpeakStarted 事件时，我想知道 SpeechSynthesizer 在这个事件中会说什么。所以我可以同步语音和GUI显示。

代码：

```
SpeechSynthesizer _reader = new SpeechSynthesizer();

_reader.SpeakStarted += new EventHandler<SpeakStartedEventArgs>(_reader_SpeakStarted);

  void _reader_SpeakStarted(object sender, SpeakStartedEventArgs e)
        {
            // now _speak started!
            Console.WriteLine("_reader_SpeakStarted\t" + e.ToString());
           // string textContent=????
          //  updateGUI(textContent);

        }

_reader.SpeakAsync("Hello world A B C"); //asynchronize method!!!
_reader.SpeakAsync("Hello world B C D");
_reader.SpeakAsync("Hello world C D E"); 
```

问题：

在 SpeakStarted 事件中，无法说出要说出的文本内容。

奇怪的是，“Hello world xx x”确实出现在参数中，如果你在那里放一个断点，但没有办法访问它。

如果有人可以帮助我，我将不胜感激。

.Net 4，Windows 7 64 位，VS2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:21:19.587

提示对象并不总是包含文本，这就是它不作为公共属性公开的原因。也可以使用标记或音频文件构建相同的对象。执行此操作的最佳方法是将传递给 SpeakAsync 方法的值存储为全局参数，当您想要显示它们时可以将其传递给 UI。

私有静态字符串_spokenWords；

```
 static void Main(string[] args)
    {

        SpeechSynthesizer _reader = new SpeechSynthesizer();

        _reader.SpeakStarted += ReaderSpeakStarted;

        _spokenWords = "Hello world A B C";
        _reader.SpeakAsync(_spokenWords); //asynchronize method!!! 

    }

    static void ReaderSpeakStarted(object sender, SpeakStartedEventArgs e)
    {
        // now _speak started! 
        Console.WriteLine("_reader_SpeakStarted\t" + _spokenWords);

        // string textContent=???? 
        //  updateGUI(textContent); 
```

您还可以查看使用反射来分解提示对象中的私有文本字段以访问该值。尽管这将更加耗费资源并且不一定稳定：

静态无效主要（字符串[] args）{

```
 SpeechSynthesizer _reader = new SpeechSynthesizer();

        _reader.SpeakStarted += ReaderSpeakStarted;

        _reader.SpeakAsync("Hello world A B C"); //asynchronize method!!! 
        _reader.SpeakAsync("Hello world B C D"); 
        _reader.SpeakAsync("Hello world C D E"); 

    }

    static void ReaderSpeakStarted(object sender, SpeakStartedEventArgs e)
    {
        // now _speak started! 
        var spokenWord = GetTextFieldValue(e.Prompt);
        Console.WriteLine("_reader_SpeakStarted\t" + spokenWord);

        // string textContent=???? 
        //  updateGUI(textContent); 

    }

    private static string GetTextFieldValue(Prompt p)
    {
        var text = typeof(Prompt).GetField("_text", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(p);
        return (string)(text.GetType() == typeof(String) ? text : string.Empty);
    } 
```

# silverlight - 超链接按钮内容未显示

> ID：11897148
> 
> 赞同：0
> 
> 时间：2012-08-10T07:23:27.167
> 
> 标签：silverlight, xaml

我正在创建一个像这样的超链接按钮：

```
<HyperlinkButton Name="Button"  Background="#11A3EB"  Height="29" Width="128" >
                <HyperlinkButton.Content>
                    <StackPanel Orientation="Horizontal">
                        <Image Source="../../Assets/Images/Image.png" Width="20" Height="20"/>
                        <sdk:Label Content="Some Text" Padding="5,0,0,0" />
                    </StackPanel>
                </HyperlinkButton.Content>
            </HyperlinkButton> 
```

在visual studio的设计预览中效果很好。

但是，当我编译我的应用程序时，该按钮显示一个矩形，其中没有任何内容。

为什么显示不正确，我应该如何解决这个问题？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:55:12.120

尝试将 Foreground 属性值设置为 #11A3EB 以外的其他颜色。也许您的按钮文本颜色与链接背景相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:15:11.003

我认为问题在于图像的路径在开发环境之间会有所不同，而部署的版本会有不同的路径。

还要检查以确保将图像设置为包含在编译的解决方案中。

我认为最好的办法是将图像作为资源包含，然后使用资源链接，这是一篇涵盖各种优缺点的好文章 - [http://www.windowsphonegeek.com/tips/wp7-working -with-images-content-vs-resource-build-action](http://www.windowsphonegeek.com/tips/wp7-working-with-images-content-vs-resource-build-action)

HTH，鲁珀特。

# uitableview - 如何将选定单元格的详细信息发送到另一个视图控制器

> ID：11897149
> 
> 赞同：0
> 
> 时间：2012-08-10T07:23:30.087
> 
> 标签：uitableview, ios5, sqlite, xcode4.3, uisearchbar

我有一个在 tableview 中加载的 sqlite3 数据库。我还有一个正常工作的搜索功能。我希望每当我选择一个单元格时，我都会被重定向到视图控制器“详细信息”，并在其中打印有关所选项目的详细信息。我曾尝试使用 indexpath.row 跟踪所选项目，但每当我执行搜索时，通常 indexpath.row 都会自动更改。因此，我被卡住了，如何将所选行中的唯一变量传递给详细信息 VC。我真的希望有人能花时间阅读代码，我已经被同样的错误卡住了将近 2 周。tableView 分配给类：AuthorVC 详细视图分配给类：Details

***Details.m***：

```
//
//  Details.m
//  AuthorsApp
//
//  Created by georges ouyoun on 7/17/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "Details.h"
#import "Author.h"
#import "AuthorVC.h"
#import <sqlite3.h>

@interface Details ()

@end

@implementation Details
@synthesize Favo;
@synthesize labelText;
@synthesize selectedAuthors;
@synthesize author , infoRequest;

BOOL PAss  = NO;
BOOL SElected2  = NO;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
 //       authorNAme = author.genre;
 //  self.labelText.text =authorNAme; 
    // Do any additional setup after loading the view.

  // self.labelText.text = @"nlsdjhfl";//*[self.author.genre description];*/
  //  NSLog(author.genre);

    /*          This is where the label text APPearsssssssss                 */

    NSLog(@"Everything is ok now !");
  //  NSLog(authorNAme);

}
- (void)viewDidUnload
{
  //  [self setLabelText:nil];
    NSLog(@"U have entered view did unload");
    [AddBut release];
    AddBut = nil;
    [super viewDidUnload];

    [self setLabelText:Nil];
    [authorNAme release];

    // Release any retained subviews of the main view.
}

/*
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if ([segue.identifier isEqualToString:@"AuthorsCell"]) {

        [segue.destinationViewController setLabelText:author.title];

    }

}

*/

-(void)viewWillAppear:(BOOL)animated
{ 

   //labelText.text = authorNAme;

    NSLog(@"U have entered the viewWillAppear tag");

  //  detailsLabel.text = food.description;
    //authorNAme=Nil;
    //[self setauthorName:Nil];
}

/*
-(void) viewDidAppear:(BOOL)animated{

    labelText.text = @"This is the DidAppearTag";

    NSLog(@"U have entered the viewDidAppear tag");

}

*/

-(void) viewWillDisappear:(BOOL)animated{

    NSLog(@"This is the view will disappear tag");

    //authorNAme.release;

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void)dealloc {
    [labelText release];
    [AddBut release];
    [super dealloc];
}

- (IBAction)AddButClick:(UIButton *)sender {

    [AddBut setImage:[UIImage imageNamed:@"apple-logo copy.png"] forState:UIControlStateSelected];
    [AddBut setImage:[UIImage imageNamed:@"apple-logo copy.png"] forState:UIControlStateHighlighted];
    Favo = [[NSMutableArray alloc] initWithCapacity:1000000];

    NSLog(authorNAme);

    @try {
        NSFileManager *fileMgr = [NSFileManager defaultManager];
        // NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"dictionary.sqlite"];
        //NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"authorsDb2.sqlite"];
        //     NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"FinalDb.sqlite"];
        //NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"xxJuridique-FINAL-OK.sqlite"];

        NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"data.sqlite"];

        BOOL success = [fileMgr fileExistsAtPath:dbPath];
        if(!success)
        {
            NSLog(@"Cannot locate database file '%@'.", dbPath);
        }
        if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
        {
            NSLog(@"An error has occured: %@", sqlite3_errmsg(db));

        }

        // const char *sql = "SELECT F_Keyword FROM wordss";  
        const char *sql = "SELECT * FROM Sheet1";
        NSLog(@"Successfully selected from database");
        sqlite3_stmt *sqlStatement;
        if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
        {
            NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));

        }else{

            NSLog(@"Got in the else tag");

            while (sqlite3_step(sqlStatement)==SQLITE_ROW /*&& PAss == NO*/) {

                NSLog(@"Got in the while tag");

                Author * author = [[Author alloc] init];
                NSLog(@"Author initialized");

                author.name = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,10)];
                NSLog(@"Initialization ok");
           //     NSLog(author.name);

                if(/*author.name == @"NO" &&*/ HighLighted == NO){
                    //const char *sql2 = "INSERT INTO Sheet1 ";

                    [AddBut setImage:[UIImage imageNamed:@"apple-logo copy.png"] forState:UIControlStateNormal];
                    NSLog(@"We have not selected it as fav yet");
                  //  [AddBut setSelected:NO]; //btn changes to normal state
                    NSLog(@"The button was NOt highlighted and now is");
                    HighLighted = YES;
                    //  PAss = YES;
                    //  [self release];
                     break;

                }

                else
                {

                    NSLog(@"We have selected it as fav");

                    [AddBut setImage:[UIImage imageNamed:@"apple-logo.png"] forState:UIControlStateNormal];
                    [AddBut setSelected:NO]; //btn changes to normal state
                    NSLog(@"The button was highlighted and now is NOt");

                    HighLighted = NO;
                     break;

                   // [self viewDidLoad];
                  //  PAss = YES;

                }
         //       [Favo release];

         //       NSLog(Favo);

//                author.name = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];
//                author.title = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];
//                author.genre = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 4)];
//                [theauthors addObject:author];
            }
        }
    }
    @catch (NSException *exception) {

        NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));

    }
    @finally {
        //   sqlite3_finalize(sqlStatement);
        sqlite3_close(db);

        return Favo;
    }

   // [AddBut setSelected:YES];

//    if(SElected == YES){
//        NSLog(@"The button was highlighted and now not");
//        
//        [AddBut setImage:[UIImage imageNamed:@"apple-logo.png"] forState:UIControlStateNormal];
//        [AddBut setSelected:NO]; //btn changes to highlighted åstate 
//        SElected = NO;
//        
//            }
//    
//    else{
//    
//        [AddBut setSelected:YES]; //btn changes to normal state
//        NSLog(@"The button was NOt highlighted and now is");
//        SElected = YES;
//    
//    }

}
@end 
```

***作者VC.m***：

```
#import "AuthorVC.h"
#import "Author.h"
#import <sqlite3.h>
#import "SearchVC.h"
//#import "DetailViewController.h"
#import "Details.h"

@implementation AuthorVC

@synthesize theauthors;
@synthesize author;
NSString *authorNAme; 

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{   searchBar.delegate = (id)self;
    [self authorList];
    [super viewDidLoad];

}

- (void)viewDidUnload
{
    [searchBar release];
    searchBar = nil;
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

-(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)text
{
    if(text.length == 0)
    {
        isFiltered = FALSE;
    }
    else
    {
        isFiltered = true;
        filteredTableData = [[NSMutableArray alloc] init];

        for (Author* author in theauthors)
        {  //[NSPredicate predicateWithFormat:@"SELECT * from books where title LIKE %@", searchBar.text];
            NSRange nameRange = [author.name rangeOfString:text options:NSAnchoredSearch];
            NSRange descriptionRange = [author.genre rangeOfString:text options:NSAnchoredSearch];
            if(nameRange.location != NSNotFound || descriptionRange.location != NSNotFound)
            {
                [filteredTableData addObject:author];

            }
        }
    }

    [self.tableView reloadData];
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    int rowCount;
    if(self->isFiltered)
        rowCount = filteredTableData.count;
    else
        rowCount = theauthors.count;

    return rowCount;
    // Return the number of rows in the section.
    //return [self.theauthors count];
}
/*

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    //    NSString *Title;
    // Author *auth = (Author*)segue.destinationViewController;
    Details *dv = (Details*)segue.destinationViewController;
    dv.labelText.text = author.title;
    NSLog(@"Did Enter prepareForSegue");
    //   labelText.text = @"Hy";
}
*/

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"AuthorsCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }
    int rowCount = indexPath.row;

    Author *author = [self.theauthors objectAtIndex:rowCount];
             //(NSIndexPath * ) indexPathForSelectedRow;
   //authorNAme =;  
    if(isFiltered){
        author = [filteredTableData objectAtIndex:indexPath.row];

     //   authorNAme = author.genre;
       // NSLog(author.genre);

    }
    else{
        author = [theauthors objectAtIndex:indexPath.row];

       // authorNAme = author.genre;
       // NSLog(author.genre);

    }

    cell.textLabel.text = author.name;
   cell.detailTextLabel.text = author.genre;
   //NSString *titleString = [[[NSString alloc] initWithFormat:@"Element number :  %d",author.name] autorelease];

    return cell;

}

-(NSMutableArray *) authorList{
    theauthors = [[NSMutableArray alloc] initWithCapacity:1000000];
   NSMutableArray * new2 = [[NSMutableArray alloc ] initWithCapacity:100000];
   // authorNAme = theauthors.sortedArrayHint.description;
    @try {
        NSFileManager *fileMgr = [NSFileManager defaultManager];
       // NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"dictionary.sqlite"];
        //NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"authorsDb2.sqlite"];
    //     NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"FinalDb.sqlite"];
         //NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"xxJuridique-FINAL-OK.sqlite"];

         NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"data.sqlite"];

        BOOL success = [fileMgr fileExistsAtPath:dbPath];
        if(!success)
        {
            NSLog(@"Cannot locate database file '%@'.", dbPath);
        }
        if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
        {
            NSLog(@"An error has occured: %@", sqlite3_errmsg(db));

        }

      // const char *sql = "SELECT F_Keyword FROM wordss";  
     const char *sql = "SELECT * FROM Sheet1";

        sqlite3_stmt *sqlStatement;
        if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
        {
         NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));
        }else{
            while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
                Author * author = [[Author alloc] init];

               //NSString *authorName = author.name;
                author.name = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];

                author.title = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,4)];
                author.genre = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 4)];
                new2 = author.genre;

                authorNAme=author.genre;              
                //NSLog(author.genre);
                [theauthors addObject:author];

            }
     //      authorNAme = author.genre;

                 }
    }
    @catch (NSException *exception) {
        NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));
    }
    @finally {
     //   sqlite3_finalize(sqlStatement);.
     //   authorNAme = nil;
        sqlite3_close(db);
     //   authorNAme = Nil;
        return theauthors;
    }

}

- (void)dealloc {
    [searchBar release];
    [super dealloc];
    //[authorNAme release];
}

//- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
//    
//    /*
//     When a row is selected, the segue creates the detail view controller as the destination.
//     Set the detail view controller's detail item to the item associated with the selected row.
//     */
//    if ([[segue identifier] isEqualToString:@"ShowSelectedPlay"]) {
//        
//        NSIndexPath *selectedRowIndex = [self.tableView indexPathForSelectedRow];
//        Details *detailViewController = [segue destinationViewController];
//        detailViewController.author = [dataController objectInListAtIndex:selectedRowIndex.row];
//    }
//}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    //Get the selected country
    NSString *selectedAuthors = [theauthors objectAtIndex:indexPath.row];
    //NSLog(selectedAuthors);

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    Details *dvController = [storyboard instantiateViewControllerWithIdentifier:@"Details"]; //Or whatever identifier you have defined in your storyboard

    //authorNAme = selectedAuthors.description;

        //Initialize the detail view controller and display it.
    //Details *dvController = [[Details alloc] init/*WithNibName:@"Details" bundle:nil*/];

   dvController.selectedAuthors = selectedAuthors;

 //   NSString *elem = [new2 objectAtIndex:0]; 

    //NSLog(dvController.labelText.text);
//    NSString *titleString = [[[NSString alloc] initWithFormat:@"Author title :  %d",indexPath.row] autorelease];

  //  NSString *titleString2 = [[new2 objectAtIndex:indexPath.row] autorelease];
   // NSLog(@"this is the selected row , %s",titleString2);

   // authorNAme = titleString;

    /* !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! BReak point of SQL Query!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
 /*   
    @try {

        NSFileManager *fileMgr2 = [NSFileManager defaultManager];

        // NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"dictionary.sqlite"];
        //NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"authorsDb2.sqlite"];
        //     NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"FinalDb.sqlite"];
        //NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"xxJuridique-FINAL-OK.sqlite"];

        NSString *dbPath2 = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"data.sqlite"];

        BOOL success = [fileMgr2 fileExistsAtPath:dbPath2];
        if(!success)
        {
            NSLog(@"Cannot locate database file '%@'.", dbPath2);
        }
        if(!(sqlite3_open([dbPath2 UTF8String], &db) == SQLITE_OK))
        {
            NSLog(@"An error has occured: %@", sqlite3_errmsg(db));

        }
        NSLog(@"access to the second DB is ok");

        // const char *sql = "SELECT F_Keyword FROM wordss";  
        const char *sql2 = "SELECT field7 FROM Sheet1 WHERE field1 = 'titleString' ";
        //NSLog(sql2);

        sqlite3_stmt *sqlStatement2;
        if(sqlite3_prepare(db, sql2, -1, &sqlStatement2, NULL) != SQLITE_OK)
        {   NSLog(@"Problem with prepare the db");
            NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));
        }else{

  //  while (sqlite3_step(sqlStatement2)==SQLITE_ACCESS_EXISTS) {

            NSLog(@"Starting to prepare the result");
            Author * author2 = [[Author alloc] init];
            NSLog(@"Author 2 created");

            author2.genre2 = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement2, 7 )];
            NSLog(@"Initialistion of author 2 is ok");

        //        NSLog(author2.genre);
              // authorNAme = author2.genre;   

            [theauthors addObject:author2];

   // }

        }

    }
    @catch (NSException *exception) {
        NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));
    }
    @finally {
        //   sqlite3_finalize(sqlStatement);.
        //   authorNAme = nil;
        sqlite3_close(db);
        //   authorNAme = Nil;
        return theauthors;
    }

*/

    UIAlertView *messageAlert = [[UIAlertView alloc]
                                initWithTitle:@"Row Selected" message:authorNAme delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

 [messageAlert show];

    [self.navigationController pushViewController:dvController animated:YES];

}

- (UITableViewCellAccessoryType)tableView:(UITableView *)tableView accessoryTypeForRowWithIndexPath:(NSIndexPath *)indexPath {

    //return UITableViewCellAccessoryDetailDisclosureButton;
    return UITableViewCellAccessoryDisclosureIndicator;
}

- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {

    [self tableView:tableView didSelectRowAtIndexPath:indexPath];
}

/*

-(void) showDetailsForIndexPath:(NSIndexPath*)indexPath
{
    [self->searchBar resignFirstResponder];
    DetailViewController* vc = [self.storyboard instantiateViewControllerWithIdentifier:@"DetailsViewController"];
    AuthorVC* author;

    if(isFiltered)
    {
        author = [filteredTableData objectAtIndex:indexPath.row];
    }
    else
    {
        author = [theauthors objectAtIndex:indexPath.row];
    }

    vc.author = author;
    [self.navigationController pushViewController:vc animated:true];    
}

*/

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:47:14.233

`property`只需在您的详细信息视图控制器中使用作者。你需要`tableView:didSelectRowAtIndexPath:`像这样在你的`showDetailsForIndexPath:`

```
if(isFiltered)
{
    author = [filteredTableData objectAtIndex:indexPath.row];
}
else
{
    author = [theauthors objectAtIndex:indexPath.row];
}

vc.author = author;
[self.navigationController pushViewController:vc animated:true]; 
```

# grails - grails 中的资源插件在文件删除时出错？

> ID：11897156
> 
> 赞同：1
> 
> 时间：2012-08-10T07:24:17.197
> 
> 标签：grails, groovy, grails-plugin

我在 Grails 上使用 Groovy 并且配置了资源插件。我有这种情况：

*   我有一个产品，它有多个图像。

*   管理员可以删除任何图像。

逻辑是，当管理员单击“删除”时，我会从文件系统中删除文件（及其拇指文件）。

整个过程运行顺利，但过了一段时间（5-6分钟），当资源插件再次刷新它的资源时，它会抛出一个错误，“some module depends on resource [path/to/file] but the file没找到”。

堆栈跟踪如下：

```
2012-08-10 12:49:41,159 [http-8080-2] ERROR errors.GrailsExceptionResolver  - Exception occurred when processing request: [GET] /
Stacktrace follows:
org.codehaus.groovy.grails.web.taglib.exceptions.GrailsTagException: Error executing tag <r:layoutResources>: Module [__@adhoc-files@__] depends on resource [/images/product/p312roduct/original/Candle_4.jpg] but the file cannot be found at /home/desktop2/finalWorkspace3/ds/grails-app/views/layouts/main.gsp:13
    at home_desktop2_finalWorkspace3_ds_grails_app_views_layouts_main_gsp$_run_closure1.doCall(main.gsp:13)
    at home_desktop2_finalWorkspace3_ds_grails_app_views_layouts_main_gsp$_run_closure1.doCall(main.gsp)
    at home_desktop2_finalWorkspace3_ds_grails_app_views_layouts_main_gsp.run(main.gsp:17)
    at org.grails.plugin.resource.DevModeSanityFilter.doFilter(DevModeSanityFilter.groovy:44)
    at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:197)
    at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:171)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.IllegalArgumentException: Module [__@adhoc-files@__] depends on resource [/images/product/p312roduct/original/Candle_4.jpg] but the file cannot be found
    at org.grails.plugin.resource.ResourceTagLib$_closure8.doCall(ResourceTagLib.groovy:463)
    at org.grails.plugin.resource.ResourceTagLib.invokeMethod(ResourceTagLib.groovy)
    at org.grails.plugin.resource.ResourceTagLib$_closure6.doCall(ResourceTagLib.groovy:387)
    ... 7 more
2012-08-10 12:49:41,172 [http-8080-2] ERROR pages.GroovyPagesServlet  - Error processing GSP: Error executing tag <r:layoutResources>: Module [__@adhoc-files@__] depends on resource [/images/product/p312roduct/original/Candle_4.jpg] but the file cannot be found at /home/desktop2/finalWorkspace3/ds/grails-app/views/layouts/main.gsp:13
org.codehaus.groovy.grails.web.taglib.exceptions.GrailsTagException: Error executing tag <r:layoutResources>: Module [__@adhoc-files@__] depends on resource [/images/product/p312roduct/original/Candle_4.jpg] but the file cannot be found at /home/desktop2/finalWorkspace3/ds/grails-app/views/layouts/main.gsp:13
    at home_desktop2_finalWorkspace3_ds_grails_app_views_layouts_main_gsp$_run_closure1.doCall(main.gsp:13)
    at home_desktop2_finalWorkspace3_ds_grails_app_views_layouts_main_gsp$_run_closure1.doCall(main.gsp)
    at home_desktop2_finalWorkspace3_ds_grails_app_views_layouts_main_gsp.run(main.gsp:17)
    at org.grails.plugin.resource.DevModeSanityFilter.doFilter(DevModeSanityFilter.groovy:44)
    at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:197)
    at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:171)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.IllegalArgumentException: Module [__@adhoc-files@__] depends on resource [/images/product/p312roduct/original/Candle_4.jpg] but the file cannot be found
    at org.grails.plugin.resource.ResourceTagLib$_closure8.doCall(ResourceTagLib.groovy:463)
    at org.grails.plugin.resource.ResourceTagLib.invokeMethod(ResourceTagLib.groovy)
    at org.grails.plugin.resource.ResourceTagLib$_closure6.doCall(ResourceTagLib.groovy:387)
    ... 7 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:35:26.100

资源插件期望模块中的底层文件不会改变。此外，应用程序直接链接的任何静态资产（而不是通过模块或 <g:resource> 标签）都被认为是[ad-hoc 的](http://grails-plugins.github.com/grails-resources/guide/2.%20Concepts.html)，并作为模块添加到资源上下文中。这甚至允许资源插件对这些“遗留”资产进行缩小、编译、缓存等。

如果您使用文件系统来交付您的这些有些动态的资产，最好将它们排除在资源插件的临时处理之外。设置配置标志[*grails.resources.adhoc.excludes*](http://grails-plugins.github.com/grails-resources/guide/9.%20Configuration.html)以排除您存储这些资产的任何目录。

# php - 删除空元素数组

> ID：11897160
> 
> 赞同：1
> 
> 时间：2012-08-10T07:24:27.013
> 
> 标签：php, arrays, search

我有`$wynik`下面的数组。

如何删除所有 [id] 为空的键？

我想提及具体的元素。

```
Array
(
    [0] => Array
        (
            [id] => 2531291225
            [ilosc] => 20
        )

    [1] => Array
        (
            [id] => 2531291312
            [ilosc] => 10
        )

    [2] => Array
        (
            [id] =>
            [ilosc] =>
        )
) 
```

解决方案：

```
foreach ($wynik as $key => $value) {
    if (is_array($value)) {
        foreach ($value as $key2 => $value2) {
            if (empty( $value2))
                unset($wynik[$key][$key2]);
        }
    }
    if (empty($wynik[$key]))
        unset($wynik[$key]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:26:37.310

```
$filtered = array_filter($wynik, function ($v) {
  return !empty($v['id']);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:15:01.697

```
foreach( $wynik as $key => $value ) {
    if( is_array( $value ) ) {
        foreach( $value as $key2 => $value2 ) if(!empty($value2)) $Row[$key2] = $value2; 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T07:30:33.997

```
$result=array();
foreach($wynik as $key=>$value)
{
    if($value['id']!=NULL)
        $result=array_merge($result,array($key=>$value));
}
var_dump($result); 
```

# ssh - 为什么我的程序没有收到 SIGTERM？

> ID：11897161
> 
> 赞同：0
> 
> 时间：2012-08-10T07:24:27.930
> 
> 标签：ssh, telnet, sigterm

我在某些服务器上使用 telnet/ssh 访问来运行特定的模拟器程序，并且该程序依靠 SIGTERM 退出自身（如果不交互式输入“退出”字符串）。

当我直接终止 telnet/ssh 会话时，程序通常会在大多数服务器上自行退出。但是在某些服务器上，我的模拟器不会收到 SIGTERM 信号，并继续作为 ROOT 进程的子进程运行。那么那些悬空的进程会消耗大量的 CPU 资源。

有人可以帮我看看在哪里看吗？或者如何解决这种情况？

谢谢，凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:57:15.547

编写一个包装程序

1.  执行你的模拟器程序
2.  当模拟器退出时，自行退出
3.  当它成为根进程的子进程时，将 SIGTERM 发送到模拟器（如果没有效果，则在几秒钟后发送 SIGKILL ）

这将是一个可怕的黑客攻击，但根据您迄今为止提供的信息，这是我能建议的最好方法。

# ruby - 使用 bewildr 执行 IronRuby 时出错

> ID：11897166
> 
> 赞同：0
> 
> 时间：2012-08-10T07:24:38.450
> 
> 标签：ruby, ironruby

我正在尝试使用 Bewildr、黄瓜和 IronRuby 自动化 WPF。到目前为止，作为一个婴儿步骤，我已经完成了以下操作

在 C:\IronRuby 中安装 IronRuby1.1 安装 Bewildr 和 cucumber gem

在 IronRuby bin **sample.rb中创建了一个 Ruby 文件**

```
require 'rubygems'    
require 'bewildr'    
@app, @main_window = Bewildr::Application.start_app_and_wait_for_window("C:\\Documents and Settings\\321106\\Desktop\\ExpenseItStandalone.exe", /App v1.\d+/) 
```

当我在 cmd 提示符下使用

```
ruby sample.rb 
```

我收到以下错误：

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/bewildr-0.1.14/lib/bewildr.rb:7:in `<top (required)>': Bewildr only works under IronRuby (LoadError)
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
        from adding_steps.rb:3:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:38:29.077

你正试图用纯红宝石运行 bewildr 。您需要使用 IronRuby。代替：

```
ruby sample.rb 
```

尝试：

```
ir sample.rb 
```

# r - 将 NA 更改为插值扁条

> ID：11897169
> 
> 赞同：2
> 
> 时间：2012-08-10T07:24:57.917
> 
> 标签：r, xts

如果我有一些 OHLC 数据，并且有一些 NA 行，那么其中一个 R 包中是否已经有一个函数可以插入数据？

`na.locf`有两个缺点：

1.  它是平坦的，然后突然跳跃
2.  天真地使用，它会重复整个最后一根柱子，包括它的高点/低点

**更新：** `na.approx`在第一方面优于`na.locf`，感谢 Dirk，但我仍在寻找现有的*bar-aware*功能。即，将从前一根柱线的收盘价插入到下一个非 NA 柱线的开盘价，并将创建扁平柱线。如果将音量设置为零，则奖励积分！（所以，我怀疑我的问题的答案将是“不”，我会自己动手……但我会再等一会儿。）

## 旁白：na.approx 与 na.spline

内容提要：`na.spline`富有*想象力*，慎用！

这是一些外汇数据（仅限收盘价），原始数据为蓝色，`na.approx`连接显示为绿色：

![在此处输入图像描述](../Images/a7e114c5cbf371c313143f9b586860d7.png)

然后这里是相同的数据，但使用`na.spline`：

![在此处输入图像描述](../Images/92c78fce8c7db44ab2770890f1159206.png)

特别值得关注的是，na.spline已经决定再创新高！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T10:20:50.523

此外， [zoo](http://cran.r-project.org/package=zoo)`na.locf()`包中已经有其他几种方法：

*   `na.aggregate()`
*   `na.approx()`
*   `na.fill()`
*   `na.spline()`
*   `na.trim()`

和`na.approx()`或`na.spline()`为您提供插值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:35:06.097

老鼠包 (http://cran.r-project.org/web/packages/mice/index.html) 可以帮助你。

# windows - 与 P/INVOKE 一起使用的 Windows 最流行的 dll 是什么

> ID：11897171
> 
> 赞同：0
> 
> 时间：2012-08-10T07:25:02.330
> 
> 标签：windows, dll, pinvoke

最近我发现了 C# 的 P/Invoke。我想知道哪些 DLL 是常用的以及它们的能力。

我找到了这个列表[http://www.win7dll.info/](http://www.win7dll.info/)但它太大了，并且没有提供任何有用的描述。

我希望 - 是“您可以使用 libxxx.dll 在桌面上绘图，并且 libyyy.dll 将允许您播放声音，libzzz.dll 可以访问任务栏的预览窗口”等等......

感谢您的指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:53:17.463

这确实是以错误的方式解决问题。您不会 P/Invoke 整个 DLL，而是 P/Invoke 从特定 DLL 导出的特定函数。因此，您不关心存在*哪些*DLL 以及它们做什么，您只关心使您能够执行特定操作的特定功能。你需要弄清楚你想要完成什么，然后弄清楚如何去做。.NET Framework 已经封装了很多东西，因此不需要您自己的 P/Invoke 代码。如果需要 P/Invoke，那么您将在知道要做什么以及要调用哪个函数*之后编写该代码。*你应该在 Stack Overflow 上问的问题是“我该怎么做*x*?” 我们会告诉你你需要哪些函数，然后你就会知道你需要哪些 DLL。

无论如何，很难提供比列表更好的描述。`user32.dll`字面上提供了用户界面组件。这包括大量的东西，从窗口到消息框，再到显示文本，再到处理窗口消息，再到显示桌面等等。

有一篇关于最常见的 Windows DLL[的 Wikipedia 文章。](http://en.wikipedia.org/wiki/Microsoft_Windows_library_files)但他们提供的信息大多只是为了好奇。

# html - 渲染 Wicket 组件

> ID：11897172
> 
> 赞同：0
> 
> 时间：2012-08-10T07:25:03.313
> 
> 标签：html, rendering, wicket

我有一个附加到页面的 Wicket 面板。我需要获取面板生成的渲染 HTML 代码。我需要面板生成的相同 HTML 以输出发送到浏览器。我不知道整个页面的 HTML。

我的面板是只读的，因此重新生成输出并不重要。

```
private MyPanel myPanel;

public void onIntialize() {
   super.onInitialize();
   add(myPanel = new MyPanel());
}

new AjaxLink() {
  public void onClick(AjaxRequestTarget target) {
    String myPanelHtml = // obtain html somehow from myPanel
    // do stuff with myPanelHtml
  }
} 
```

如果我需要从不是面板的组件中呈现 HTML，情况会有所不同吗？不提供标记的组件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-14T11:53:27.690

从 Wicket 6.7.0 可以轻松完成

`ComponentRenderer.render(Component c)`

从检票口页面：

> 将页面或组件呈现为字符串
> 
> 用户列表中一直存在的问题之一是将页面或组件呈现为字符串的能力，以便您可以使用 Wicket 呈现 HTML 电子邮件消息。现在您可以使用 ComponentRenderer 来实际执行此操作，而无需求助于其他不太明显的方法。
> 
> ComponentRenderer 公开了两个方法：renderComponent 和renderPage，它们完全按照它们的名字所暗示的那样工作。快乐的电子邮件！

虽然是用于邮寄的，当然您也可以将其用于其他目的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:18:16.170

根据 jordeu 的回答和 Wicket wiki，我做了这个。它不需要修改组件组件层次结构，但在我的情况下，面板已经是页面的一部分。

但是我有点担心更改应用程序设置和使用 Wicket API 的非公共部分。

```
public static StringResponse getRenderedResponse(final Component container) {
    // store rendered markup to different place
    final Response originalResponse = RequestCycle.get().getResponse();
    StringResponse stringResponse = new StringResponse();
    RequestCycle.get().setResponse(stringResponse);

    // disable "component must be rendered only once per request" -check
    boolean originalComponentCheck = container.getApplication().getDebugSettings().getComponentUseCheck();
    container.getApplication().getDebugSettings().setComponentUseCheck(false);

    try {
        // prepareForRender() is not part of public Wicket API!!
        container.prepareForRender();
        container.render();
        container.afterRender();
    } finally {
        // restore RequestCycle and checks
        container.getApplication().getDebugSettings().setComponentUseCheck(originalComponentCheck);
        RequestCycle.get().setResponse(originalResponse);
    }
    return stringResponse;
} 
```

用法：

```
new AjaxLink() {
  public void onClick(AjaxRequestTarget target) {
    StringResponse response = getRenderedResponse(myPanel);
    String myPanelHtml = response.toString();
    // do stuff with myPanelHtml
} 
```

# c# - 使用 c# 将所有 Excel 单元格类型更改为文本/常规

> ID：11897178
> 
> 赞同：0
> 
> 时间：2012-08-10T07:25:34.873
> 
> 标签：c#, asp.net, .net

我需要上传一个包含多种值类型和带有 $ 符号等值的 excel 文件。我的要求是在上传 excel 文件后将所有 excel 单元格类型转换为 Text/General。在此先感谢，威尔逊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:04:04.260

```
Worksheet ws;

Range oRng; 
```

在 ws 中加载您的工作集 现在选择要进行格式化的单元格范围。

例如

```
oRng = ws.get_Range(StartCol + StartRow, EndCol + EndRow);

Now just set oRng.NumberFormat `= "@";` 
```

# swi-prolog - SWI Prolog编辑器咨询失败

> ID：11897179
> 
> 赞同：1
> 
> 时间：2012-08-10T07:25:38.447
> 
> 标签：swi-prolog

我的 swi prolog 编辑器工作不正常。每当我尝试咨询一个简单的谓词时，它都会返回

咨询('C:/Users/Huan/Desktop/'filename.pl')。

如果咨询成功，它应该提示以下消息： % library(win_menu) 编译为 win_menu 0.00 sec, 20,952 字节 % library(swi_hooks) 编译为 pce_swi_hooks ...... (等等)

如需帮助，请使用 ?- help(Topic)。或 ?- apropos(Word)。

但我什至没有得到。我尝试卸载 prolog 和编辑器，但仍然没有运气。

有想法该怎么解决这个吗？

我在 Windows 7 32 位上使用了 SWI Prolog 32 位。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T20:56:44.343

您的输入中有一个杂散的撇号。`consult`谓词想要一个原子，而不是`'C:/Users/Huan/Desktop/'filename.pl'`一个原子。我会尝试

```
consult('filename.pl'). 
```

或者

```
consult('Desktop/filename.pl'). 
```

或者

```
consult('C:/Users/Huan/Desktop/filename.pl'). 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-09T10:00:13.830

作为其他答案，您有流浪撇号。无论如何，忘记咨询。就给这个——

```
?- ['C:/Users/Huan/Desktop/filename'] 
```

# html - 处理html文档

> ID：11897181
> 
> 赞同：0
> 
> 时间：2012-08-10T07:25:45.917
> 
> 标签：html, html-parsing, jsoup, html-manipulation

```
...<b><a>hello</a></b>... 
```

我想`<b></b>`从 html 文档中删除标签。可以使用 Jsoup 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:02:19.750

```
public String clean(String unsafe){ 
        Whitelist whitelist = Whitelist.none(); 
        whitelist.addTags(new String[]{"a"}); 

        String safe = Jsoup.clean(unsafe, whitelist); 
        return StringEscapeUtils.unescapeXml(safe); 
 } 
```

从[Java 中的 String 中删除 Html 标记，除了少数特定的标记](https://stackoverflow.com/questions/7023994/removing-html-tags-except-few-specific-ones-from-string-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:46:51.967

如果`doc`您的文档包含您的 HTML：

```
doc.select("b").unwrap(); 
```

（也可以与`Element`/一起使用`Elements`）

**例子：**

```
Document document = new Document("");
document.html("...<b><a>hello</a></b>...").select("b").unwrap(); 
```

现在您的文档不包含任何 b-Tag

# solr - Solr在没有任何数据时删除分面字段

> ID：11897189
> 
> 赞同：1
> 
> 时间：2012-08-10T07:25:58.443
> 
> 标签：solr, faceted-search

使用 Solrnet 库处理用于 ASP.net 项目的 Solr。

在将多个字段的 Faceted 字段设置为 true 进行查询时，它也会在结果中返回空白的 faceted 字段。有什么方法可以指示 Solr 删除那些没有任何结果的多面字段。

所以最终结果不包括任何没有数据的方面字段。我不是指 min.count 参数，这很好用。但我指的是即使里面没有数据也会保留在那里的 facet 字段。

如果您没有明白我的意思，请发表评论。预先感谢您帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T08:52:21.687

将[facet.mincount](http://wiki.apache.org/solr/SimpleFacetParameters#facet.mincount)设置为 1。
这将确保返回具有至少一条记录的构面。默认情况下，该值为 0。

编辑：-抱歉，这里没有得到方面的部分。即使其中没​​有匹配项，Facets 也会始终返回。所以处理需要在客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-09T13:33:04.927

如果要删除 count = 0 的方面，则需要**优化**核心。这是我发现的一种方式。我在**SOLR 版本 6.3.X上对其进行了测试**

要优化核心，请转到 SOLR 管理页面并选择要优化的核心。或使用 CURL。

CURL 看起来像这样 -

```
curl http://<host_name>:8983/solr/<core_name>/update -F stream.body=' <optimize />' 
```

希望这可以帮助！

# iphone - TwitPic API 的完整教程和示例应用程序

> ID：11897193
> 
> 赞同：0
> 
> 时间：2012-08-10T07:26:10.393
> 
> 标签：iphone, xcode4.2, twitpic

谁能告诉我 TwitPic api 的完整教程链接。我已经搜索了很多。我想得到它们。如果有人知道答案，请分享。请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:42:25.397

请参考以下网站：[add-twitpic-to-your-application](http://www.icodeblog.com/2010/02/23/adding-twitpic-to-your-application/)

# actionscript-3 - 具有不同列数的列表

> ID：11897205
> 
> 赞同：0
> 
> 时间：2012-08-10T07:26:51.693
> 
> 标签：actionscript-3, apache-flex, flex4

![在此处输入图像描述](../Images/a1f2ca457b4d9e0591252aa3844c82a4.png)

如图所示（这是由 PhotoShop 绘制的，尚未实现），我想实现一个`List`这样的。它有不同的列数，比如第一行只有一个项目，其他有两个项目。我尝试使用`itemRendererFunction`来检测不同的项目（第一行视为渲染器A，其他视为另一个渲染器B），但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T21:55:49.973

这个问题最干净的解决方案是创建自定义布局（我们在评论中讨论了 Romi 的解决方案最终会导致太多问题）。然而，这通常不是一件容易的事。

我将为您提供此自定义布局可能是什么样子的粗略草图，因此您可以将其作为起点来创建一个完全符合您需要的布局。要创建自定义布局，您必须继承`BaseLayout`并覆盖并实现其`updateDisplayList`和`measure`方法。

为了让事情变得更容易（并且为了不在这里转储 500 行代码），我在这个例子中使用了一些硬编码的变量。它假设总是有两列，第一项总是 200x200 像素，其他项目总是 100x100 像素。没有horizo​​ntalGap 或verticalGap。
结果当然是你可以只为这个特定的列表和这些特定的 ItemRenderers 使用这个自定义布局（就像现在一样）。如果您希望它更通用，则必须进行更多计算。

但现在代码：

```
public class MyCustomLayout extends LayoutBase {

    //hardcoded variables
    private var columnCount:int = 2;

    private var bigTileWidth:Number = 200;
    private var bigTileHeight:Number = 200;
    private var smallTileWidth:Number = 100;
    private var smallTileHeight:Number = 100;

    override public function updateDisplayList(width:Number, height:Number):void {
        var layoutTarget:GroupBase = target;
        if (!layoutTarget) return;

        var numElements:int = layoutTarget.numElements;
        if (!numElements) return;

        //position and size the first element
        var el:ILayoutElement = useVirtualLayout ? 
            layoutTarget.getVirtualElementAt(0) : layoutTarget.getElementAt(0);
        el.setLayoutBoundsSize(bigTileWidth, bigTileHeight);
        el.setLayoutBoundsPosition(0, 0);

        //position & size the other elements in 2 columns below the 1st element
        for (var i:int=1; i<numElements; i++) {
            var x:Number = smallTileWidth  * ((i-1) % 2);
            var y:Number = smallTileHeight * Math.floor((i-1) / 2) + bigTileHeight;

            el = useVirtualLayout ? 
                layoutTarget.getVirtualElementAt(i) : 
                layoutTarget.getElementAt(i);
            el.setLayoutBoundsSize(smallTileWidth, smallTileHeight);
            el.setLayoutBoundsPosition(x, y);
        }

        //set the content size (necessary for scrolling)
        layoutTarget.setContentSize(
            layoutTarget.measuredWidth, layoutTarget.measuredHeight
        );
    }

    override public function measure():void {
        var layoutTarget:GroupBase = target;
        if (!layoutTarget) return;

        var rowCount:int = Math.ceil((layoutTarget.numElements - 1) / 2);

        //measure the total width and height
        layoutTarget.measuredWidth = layoutTarget.measuredMinWidth = 
            Math.max(smallTileWidth * columnCount, bigTileWidth);
        layoutTarget.measuredHeight = layoutTarget.measuredMinHeight = 
            bigTileHeight + smallTileHeight * rowCount;
    }

} 
```

你可以像这样使用它：

```
<s:List dataProvider="{dp}" height="300">
    <s:layout>
        <l:MyCustomLayout />
    </s:layout>
</s:List> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:35:56.220

每当您想更改现有组件的已定义行为时，请始终先检查是否可以解决蒙皮问题。它是 i Flex 的一个非常强大的功能，也可以在这种情况下提供解决方案。

所以，让我们开始吧，假设您已经有了列表，您只需要创建一个自定义皮肤，它将数据提供者“拆分”为两部分，第一项和所有其他部分。所以，假设我们有这个初始设置：

```
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;

        [Bindable]
        private var c:ArrayCollection = new ArrayCollection([
            "String 1",
            "String 2",
            "String 3",
            "String 4",
            "String 5",
            "String 6",
            "String 7",
            "String 8",
            "String 9",
            "String 10",
            "String 11",
            "String 12",
            "String 13",
            "String 14",
            "String 15"]);
    ]]>
</fx:Script>

<s:List skinClass="CustomSkinList" dataProvider="{c}" /> 
```

如您所见，我们定义了一个自定义列表皮肤，它只是element`spark.skins.spark.ListSkin`的默认皮肤的副本。`spark.components.List`

在我们处理数据提供者逻辑之前，我们需要看看列表项是如何呈现的。这是通过使用`DataGroup`添加到皮肤中的元素来完成的，如下所示：

```
<s:Scroller left="0" top="0" right="0" bottom="0" id="scroller" minViewportInset="1" hasFocusableChildren="false">
    <!--- @copy spark.components.SkinnableDataContainer#dataGroup -->
    <s:DataGroup id="dataGroup" itemRenderer="spark.skins.spark.DefaultItemRenderer">
        <s:layout>
            <!--- The default layout is vertical and measures at least for 5 rows.  
            When switching to a different layout, HorizontalLayout for example,
            make sure to adjust the minWidth, minHeight sizes of the skin -->
            <s:VerticalLayout gap="0" horizontalAlign="contentJustify" requestedMinRowCount="5" />
        </s:layout>
    </s:DataGroup>
</s:Scroller> 
```

这是我们必须进行更改的地方，以便让第一个元素以不同的方式呈现。我们需要做的，只是添加另一个 DataGroup，用于以自定义方式渲染第一个元素（这当然意味着使用自定义项渲染器）。现在，我们的滚动条看起来像这样：

```
<s:Scroller left="0"
            top="0"
            right="0"
            bottom="0"
            id="scroller"
            minViewportInset="1"
            hasFocusableChildren="false">
    <!--- @copy spark.components.SkinnableDataContainer#dataGroup -->
    <s:VGroup width="100%" height="100%">

        <s:DataGroup id="firstItemDataGroup"
                     width="100%"
                     itemRenderer="CustomItemRenderer"
                     height="20">
            <s:layout>
                <s:VerticalLayout />
            </s:layout>
        </s:DataGroup>

        <s:DataGroup id="dataGroup" itemRenderer="spark.skins.spark.DefaultItemRenderer">
            <s:layout>
                <!--- The default layout is vertical and measures at least for 5 rows.
                When switching to a different layout, HorizontalLayout for example,
                make sure to adjust the minWidth, minHeight sizes of the skin -->
                <s:TileLayout horizontalAlign="center" requestedColumnCount="2" />
            </s:layout>
        </s:DataGroup>
    </s:VGroup>
</s:Scroller> 
```

请注意添加的“firstItemDataGroup”，以及它使用与默认 dataGroup 元素不同的项目渲染器这一事实。有了这个新容器，我们可以继续渲染元素。自定义皮肤需要重写父类的initializationComplete() 方法，如下所示：

```
 override protected function initializationComplete():void
        {
            useChromeColor = true;

            if (hostComponent.dataProvider && hostComponent.dataProvider.length > 0)
            {
                var allItems:Array = hostComponent.dataProvider.toArray().concat();

                firstItemDataGroup.dataProvider = new ArrayCollection([hostComponent.dataProvider.getItemAt(0)]);

                var remainingItems:Array = allItems.concat().reverse();
                remainingItems.pop();

                var reversed:Array = remainingItems.reverse();
                dataGroupProvider = new ArrayCollection(reversed);
            }

            super.initializationComplete();
        } 
```

添加的只是“if”块和一个名为 dataGroupProvider 的私有变量。这是因为我们将在 updateDisplayList() 方法中将新的 dataProvider（从第二个元素开始）设置为 dataGroup 元素。这是它的样子：

```
 override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
        {
            if (getStyle("borderVisible") == true)
            {
                border.visible = true;
                background.left = background.top = background.right = background.bottom = 1;
                scroller.minViewportInset = 1;
            }
            else
            {
                border.visible = false;
                background.left = background.top = background.right = background.bottom = 0;
                scroller.minViewportInset = 0;
            }

            // Here we assign the new data provider to the dataGroup element
            if (dataGroupProvider)
                dataGroup.dataProvider = dataGroupProvider;

            borderStroke.color = getStyle("borderColor");
            borderStroke.alpha = getStyle("borderAlpha");

            super.updateDisplayList(unscaledWidth, unscaledHeight);
        } 
```

总之，只需为我们的 List 元素创建一个自定义皮肤，我们就可以使用两个容器以不同于其他元素的方式呈现第一项。你不应该低估 Flex Skinning 的力量 :)

希望这可以帮助。祝你有美好的一天！

# asp.net-mvc-2 - 向 ASP.NET MVC 的 SiteMap 添加自定义属性

> ID：11897207
> 
> 赞同：6
> 
> 时间：2012-08-10T07:27:01.660
> 
> 标签：asp.net-mvc-2, web.sitemap

我在 asp.net mvc 中使用内置的 asp.net 站点地图，具有以下架构

> [http://schemas.microsoft.com/AspNet/SiteMap-File-1.0](http://schemas.microsoft.com/AspNet/SiteMap-File-1.0)

我有以下属性，resourcekey，title & description。我想向站点地图节点添加更多属性，请告诉我是否可以在站点地图文件中添加新属性，然后通过站点地图类读取它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T10:25:50.487

SiteMap 模式支持自定义属性，可以通过`SiteMapNode`类的 indexer 属性访问它们。

例如，如果在 Web.sitemap 文件中使用自定义工具提示属性定义了以下节点：

```
<siteMapNode url="~/Default.aspx" title="Home" tooltip="My Home Page" /> 
```

然后可以通过 SiteMapNode 索引器访问它，例如

```
string tooltip = siteMapNodeInstance["tooltip"]; 
```

有关自定义站点地图的更多信息，请[点击此处](http://ianoxley.wordpress.com/2008/06/07/adding-custom-attributes-to-aspnet-site-map-files-to-improve-accessibility/)

# php - if ($row_login['vstatus'] != 'verified' OR "reconized' && $_POST['amount'] >20) {

> ID：11897209
> 
> 赞同：0
> 
> 时间：2012-08-10T07:27:12.847
> 
> 标签：php, if-statement

一直在尝试不同的风格，甚至是管道，但似乎不起作用。想写下面的语句：

```
if ($row_login['vstatus'] != 'verified' OR 'recognized' && $_POST['amount'] >20)    { 
```

请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T07:30:00.723

实际上，您可以将一件事与许多其他事物进行比较，如果您做的有点不同：

```
if(!in_array($row_login['vstatus'], array('verified', 'recognized')) && $_POST['amount'] >20) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T07:28:36.757

如果我的逻辑正确，它应该是：

```
if (($row_login['vstatus'] != 'verified' && $row_login['vstatus'] !='recognized') && $_POST['amount'] >20){

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T07:28:31.817

你不能将一件事与另外两件事进行比较。使用这样的东西：

```
if ($row_login['vstatus'] != 'verified' && $row_login['vstatus'] != 'recognized' && $_POST['amount'] >20) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T07:29:01.407

像这样尝试：

```
 if ($row_login['vstatus'] != 'verified' || $row_login['vstatus'] != 'recognized' && $_POST['amount'] >20)  { 
```

是的，我想你可能真的想按照@Martin 的建议去做

# django-forms - Django ChoiseField 验证

> ID：11897210
> 
> 赞同：0
> 
> 时间：2012-08-10T07:27:26.093
> 
> 标签：django-forms, django-views

我有简单的形式女巫有交付选项；取货并张贴。也可以使用折扣券。使用优惠券时，用户必须亲自使用优惠券亲自付款。

我的问题是，当尝试强制执行此行为并在表单**clean**中使用优惠券时更改单选选项时，它将更改**form.cleaned_data**但视图将使用原始选择呈现表单。

```
#forms.py
class DeliveryOptionsForm(forms.Form):
    RADIO_CHOICES = (
       ('pickup',"Pick your stuff from office")),
       ('postit', "send to me by mail (+2€)"),
    )

    delivery = forms.ChoiceField(widget=forms.RadioSelect, 
                           choices=RADIO_CHOICES,
                           help_text=_('Select shipping method'))
    discount = forms.DecimalField(help_text=_('DISCOUNT TICKET'), required=False)

    def clean(self):
        data = self.cleaned_data

        if 'discount' in data:            
            if data['discount'] == None:
                data['discount'] = 0;
            else:
                #force pickup when putting discount coupongs
                data['pickup'] = 'pickup'
        return data 
```

而我的看法

```
def purchase_confirmation(req):
    cart = req.session['cart']
    form = DeliveryOptionsForm(req.POST or None, initial={'pickup': 'postit'})         

    if req.method == 'POST' and form.is_valid():         
        discount = form.cleaned_data['discount']
        pickup = form.cleaned_data['pickup'] 
        # pickup will be correctly set, for logic, 
        # but form will render selection unchanged
        #Some logic here
        .... 
        if 'confirm' in req.POST:
            return redirect('shop-generating_bill')

        if 'update' in req.POST:   
            pass

    return render(req,"confirmation.html",{'form' : form}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:21:18.327

不确定这是否是您的问题的原因，但是在您的 clean 方法中，您应该通过调用超类的 clean 方法来获取已清理的数据。

```
 cleaned_data = super(DeliveryOptionsForm, self).clean() 
```

# livechat - 彗星聊天问题：请帮助我

> ID：11897211
> 
> 赞同：0
> 
> 时间：2012-08-10T07:27:26.383
> 
> 标签：livechat

我很沮丧，我用 codeigniter 实现了彗星聊天，它几乎按预期工作，但我仍然有一些问题，需要尽快纠正。下面列出的问题。

1 当我用2-3个用户在不同的浏览器登录时，它会随机改变他们的状态“离线”和“在线”，不知道为什么？但是所有用户都在线。

2 有时当我用网站登录时，底部的cometchat栏只显示文本“离线”表示“0个在线用户”，一旦我点击cometchat栏，它就会开始显示用户的实际状态和数量。

3 我注意到彗星聊天的“页面翻译”功能似乎不适用于 IE 浏览器，但适用于谷歌浏览器。任何人都可以建议我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:48:42.920

1）检查用户表中的最后一个活动列是否正确更改

2)integration.php 中的getuser() 函数返回一个值

3）我必须检查一下

# c++ - 是否可以编写具有零长度数组成员的“完整”C++ 类？

> ID：11897216
> 
> 赞同：1
> 
> 时间：2012-08-10T07:28:03.240
> 
> 标签：c++, stl, flexible-array-member

我有一些数据类型，如果我使用*普通的旧 C*，将被实现为

```
typedef struct {
    ...many other members here...
    unsigned short _size;
    char           _buf[0];
} my_data; 
```

我想做的，基本上是把它变成一个*类*，并添加常用的运算符，如*less*、*equal*、*copy constructor*、*operator assignment*等。正如您可以想象的那样，我将在*std::map*等关联容器中使用*此类*作为其*key*。

 **我需要缓冲区在理想情况下与对象本身处于*同一级别*，否则当我必须比较其中两个（缓冲区）时，我会让 CPU 获取指针并将其加载到内存中；我不想使用*std::vector*因为分配的内存不会*与其余的数据成员*连续。

对我来说主要问题是在*C 语言*中我会有一个函数，给定缓冲区的大小，它会为其分配适当的内存大小。在*C++*中，这样的事情是做不到的。

我对吗？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:48:21.527

这是完全不可能的。您的对象实际上是可变大小的，但`std::map`将始终将其视为固定大小，并且无法实现复制或移动。你需要一个旧的 C 风格的容器来使用这样的 hack。

编辑：自定义分配器。有趣的解决方案，我没有想到这一点。我不知道你是否可以让它工作，但它值得研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:46:14.257

您可以在 C++ 中以这种方式处理它：

```
struct MyData {
    unsigned short size_;
    char * buf () { return reinterpret_cast<char *>(&size_ + 1); }
    //...
}; 
```

您可能希望重载`new`运算符以使用`malloc`和`delete`使用`free`，以便您可以根据需要扩展数据结构`realloc`。

正如 DeadMG 所指出的，这不能`STL`很容易地与容器一起使用。一种方法是`MyData`在容器中使用指针。另一个是用于`MyData`.

**编辑：**这是一个 hack，它`MyData`充当一种智能指针，但智能由`vector`.

```
struct MyData {
    struct State {
        unsigned short size_;
        //...
    };
    std::vector<State> data_;
    MyData () {};
    MyData (unsigned short size)
        : data_(1 + size/sizeof(State) + !!size%sizeof(State)) {
        data_[0].size_ = size;
    }
    unsigned short size () const { return data_[0].size_; }
    //...
    char * buf () { return reinterpret_cast<char *>(&data_[1]); }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T07:55:21.840

不，这是不可能的。零长度数组不是合法的 C++。

您可以¹使用长度为 1 的数组执行非常相似的操作，但您仍然必须自己管理实例的创建，因此无需复制构造函数，也无需将对象存储在`std::map`.

也许是这样的：

```
class my_data {
public:
  static my_data* create(int size) {
    void* memory = malloc(sizeof(_size) + size);
    return new(memory) my_data(size);
  }

  static void destroy(my_data* ptr) {
    ptr->~my_data();
    free(ptr);
  }

private:
  //disable construction and destruction except by static methods above
  explicit my_data(int size) : _size(size) {}
  ~my_data(){}

  //disable copying
  my_data(const my_data&);
  my_data& operator=(const my_data&);

  unsigned short _size;
  char           _buf[1];
}; 
```

注意默认构造函数、析构函数、复制构造函数和赋值运算符都是私有的，这极大地限制了类的使用方式。

* * *

¹实际上 - 它不符合标准，但几乎可以在任何地方使用。**

# javascript - 在一个项目上工作，想要添加以下菜单栏，并且向下滑动最少

> ID：11897217
> 
> 赞同：-1
> 
> 时间：2012-08-10T07:28:03.560
> 
> 标签：javascript, html, css

我想添加以下菜单栏，但向下滑动很大，我想减小幻灯片的大小，尝试了很多东西但没有奏效，请帮忙

动画菜单.css

```
body{   
    font-family:"Lucida Grande", arial, sans-serif;   
    background:#F3F3F3;   
}   

ul{   
    margin:0;   
    padding:0;   
}   

li{   
    width:100px;   
    height:50px;   
    float:left;   
    color:#191919;   
    text-align:center;   
    overflow:hidden;   
}   

a{   
    color:#FFF;   
    text-decoration:none;   
}   

p{   
    padding:0px 5px;   
}   

.subtext{   
        padding-top:15px;   
}   

/*Menu Color Classes*/  
.green{background:#6AA63B;}   
.yellow{background:#FBC700;}   
.red{background:#D52100;}   
.purple{background:#5122B4;}   
.blue{background:#0292C0;}  ` 
```

动画菜单.js

```
$(document).ready(function(){   

    //When mouse rolls over   
    $("li").mouseover(function(){   
        $(this).stop().animate({height:'150px'},{queue:false, duration:600, easing:                                                           
 'easeOutBounce'})   
    });   

   //When mouse is removed   
    $("li").mouseout(function(){   
        $(this).stop().animate({height:'50px'},{queue:false, duration:600, easing:             
  'easeOutBounce'}) 
    });   

}); 
```

动画菜单.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   

"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 

<head>  

<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>  

<title>Smooth Animated jQuery Menu</title>  

<link rel="stylesheet" href="animated-menu.css"/>    

<script src="http://jqueryjs.googlecode.com/files/jquery-1.3.js" 

 type="text/javascript"></script> 

<script src="js/jquery.easing.1.3.js" type="text/javascript"></script>  

<script src="animated-menu.js" type="text/javascript"></script>  

</head>  

<body>  

<p>Rollover a menu item to expand it.</p>  

 <ul>

   <li class="green"> 

        <p><a href="#">Home</a></p>  

        <p class="subtext">The front page</p> 

  </li>  

   <li class="yellow">  

       <p><a href="#">About</a></p>   

  <p class="subtext">More info</p>  
    </li>  

    <li class="red">  

        <p><a href="#">Contact</a></p>  

        <p class="subtext">Get in touch</p> 

    </li>  

  <li class="blue">  

       <p><a href="#">Submit</a></p>  

       <p class="subtext">Send us your stuff!</p> 

    </li>  

  <li class="purple"> 

        <p><a href="#">Terms</a></p>

    <p class="subtext">Legal things</p>  
   </li>  

   </ul>  .</body>  

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:06:31.297

我可能理解错了，但是如果您想减小下拉菜单的大小，请将 javascript 代码中的 150px 编辑为更小一点？

# symfony - Symfony 2 中的多捆绑包

> ID：11897220
> 
> 赞同：0
> 
> 时间：2012-08-10T07:28:16.823
> 
> 标签：symfony

我从 Symfony 2 创建项目，但我有一个问题：在项目中有多个捆绑包（例如：AdminBundle 和 FontEndBundle）

1.  案例 1：Doctrine orm 和 Entities 在 FrontEndBundle 上生成，然后从 AdminBundle，我将通过`FrontEndBundle:Object`它调用 Entity 工作正常。
2.  案例2：我想配置结构如下

    源/项目/

    *   模型/实体
    *   OrmYml/教义/orm
    *   捆绑包（包含 FontEndBundle 和 AdminBundle）
    *   扩展

在案例 2 中，如何配置实体映射以生成实体到`src/Model/Entity`目录？因为当我使用 Command: 时`doctrine:generate:entities Project/Model/Entity`，

> 错误：命名空间“Project\Model\Entity”不包含任何映射实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:53:47.490

你如何声明你的实体？你应该把你的实体放在一个包中。您不能将它们放在 bundle 之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:22:38.827

通常，Symfony 开发人员会创建一个名为“CoreBundle”的第三个包（例如），您将所有共享资源放在三个包之间，即实体、一些服务（如 twig 扩展）、配置（使用 service.xml/yml）、 ...此外，您可以删除此捆绑包中的控制器和视图目录，这些目录是无用的（不要忘记通过删除 CoreBundle 控制器注入来清理 app/config/routing.yml 文件）！

然后只需在正确的捆绑包中调用您的实体：

```
use MyName\Bundle\CoreBundle\Entity\MyEntity; 
```

永远不要在捆绑中创建模型库，这不是 Symfony 哲学，你真的错了！

# spotify - Apps API 中的 Spotify playlists.tracks 对象中缺少用户字段

> ID：11897223
> 
> 赞同：0
> 
> 时间：2012-08-10T07:28:34.550
> 
> 标签：spotify, playlist

我一直在使用 Spotify Apps API，特别是播放列表方法，但似乎用户字段 deos 不存在于 playlist.tracks 对象中。

检查员的一个例子：

播放列表已加载[曲目数据：对象专辑：对象艺术家：数组 [1] 可用性：0 可用的播放：真 discNumber：0 持续时间：280000 isAd：假 isInvalid：假 isLoaded：真 isLocal：假 isPlaceholder：假名：“没什么可说的” 人气：29 星级：假 trackNumber：13 类型：“track” uri：“spotify:track:24wKpBad6OrQKseDQnw1Fr”

我对这些信息感兴趣有两个原因： 1\. 从共享播放列表中清除播放统计信息，以便以后在构建应用程序、播放列表等时进行分析/使用 2\. 如果我需要重建播放列表，当我添加歌曲时，它们会都是以我为用户，不是原人

似乎很奇怪这个字段丢失了，但我还没有找到它，目前我将播放列表导出到数据库，按用户名对曲目进行排序，然后由于用户数量很少，因此可以快速填写适当的用户名在轨道/用户边界上，尽管这在重建播放列表时没有帮助。

当 Spotify 桌面客户端显示此信息时，该信息必须存在，但我猜它是私有 API？

干杯袜子小偷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:37:46.600

事实上，出于隐私原因，此信息无法通过 Apps API 获得。对不起！

# java - 为什么当我们在 Java 中将 Integer 分配给 int 时编译器不给出错误

> ID：11897229
> 
> 赞同：3
> 
> 时间：2012-08-10T07:28:48.997
> 
> 标签：java

为什么当我们将 Integer(object) 分配给 int(primitive) 时编译器不会出错？

```
int i;
Integer ii = new Integer(5);
i = ii;//no compilation error. 
```

所有其他类型（字节字节，浮点浮点）都是这种情况。

是什么原因？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T07:30:05.603

这称为自动装箱/拆箱。

从 Java 1.5 开始，编译器自动将原语“装箱”到它们对应的类中（例如`int`and`Integer`和等），并根据需要取消装箱`double`。`Double`

有关更多详细信息，请参阅文档中的[此页面](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T07:31:49.020

Java SE 5.0 引入了自动装箱作为一项新功能。您可以在 Java 文档中找到更多信息。[http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T07:32:48.863

Java 5 和更新版本能够执行[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)。编译器会将您的代码隐式转换为：

```
int i;
Integer ii = new Integer(5);
i = ii.intValue(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T07:30:50.507

`i = ii;//no compilation error.`

因为这称为自动拆箱。当您分配`object to primitive variable`时，对象中的值被取出并分配给原语。这个过程被称为`autounboxing`。反之亦然`Autoboxing`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-10T07:31:14.727

这称为“自动装箱/拆箱”。原始类型 like`int`会在需要时自动转换为类 like `Integer`，反之亦然。

# ruby-on-rails - 在 Rails 中过滤结果

> ID：11897242
> 
> 赞同：0
> 
> 时间：2012-08-10T07:29:41.020
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当用户使用索引操作时，我正在显示问题列表。我想过滤此列表，仅显示被拒绝的问题、仅附有图像的问题等。

你是怎样做的？您是否只需在索引操作中添加代码以检查不同的命名参数是否在请求参数哈希中并使用它们构建查询。

```
myurl.com/questions?status=approved&only_images=yes 
```

还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:07:44.133

您可以使用[has_scope](https://github.com/plataformatec/has_scope)优雅地执行此操作：

```
# Model
scope :status, proc {|status| where :status => status}
scope :only_images, ... # query to only include questions with images

# Controller
has_scope :status
has_scope :only_images, :type => boolean

def index
  @questions = apply_scopes(Question).all
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T07:53:52.850

为了使您的控制器保持纤薄并避免意大利面条式代码，您可以尝试使用以下方式：

控制器：

```
def index
  @questions = Question.filter(params.slice(:status, :only_images, ...) # you still can chain with .order, .paginate, etc
end 
```

模型：

```
 def self.filter(options)
    options.delete_if { |k, v| v.blank? }
    return self.scoped if options.nil?
    options.inject(self) do |scope, (key, value)|
      return scope if value.blank?
      case key
        when "status" # direct map
          scope.scoped(:conditions => {key => value})
        when "only_images"
          scope.scoped(:conditions => {key => value=="yes" ? true : false})
        #just some examples
        when "some_field_max"
          scope.scoped(:conditions => ["some_field <= ?", value])
        when "some_field_min"
          scope.scoped(:conditions => ["some_field >= ?", value])
        else # unknown key (do nothing. You might also raise an error)
          scope
      end
    end
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:56:01.273

所以，我认为在这种情况下，有些地方你需要编写代码才能做得很好；模型和控制器。

对于模型，您应该使用范围。

```
#Model
scope :rejected, lambda { where("accepted = false") }
scope :accepted lambda { where("accepted = true") }
scope :with_image # your query here 
```

在控制器中，

```
def index
  @questions = @questions.send(params[:search])
end 
```

您可以从 UI 发送方法名称并将其直接传递给模型中的范围。此外，您可以通过再次从 UI 传递它来避免 .all 大小写的“if”条件。

但是由于这直接将模型代码暴露给查看，您应该使用 before_filter 在控制器中的私有方法中过滤来自视图的任何不需要的过滤器参数。

# javascript - 不压缩javascript文件

> ID：11897243
> 
> 赞同：-3
> 
> 时间：2012-08-10T07:29:44.917
> 
> 标签：javascript, spring, maven, spring-mvc

**编辑：**感谢 khmarbaise 的回复。我没有检查我的目标文件夹......现在它工作得更好了......但问题是它没有压缩一些空格。下面是我用压缩后得到的输出单个文件。

Ext.onReady(function(){new Ext.Window({title:"Hello",width:300,height:500,items:getItems()}).show() });

function getItems(){var a=new Ext.Panel({title:"我是项目面板"}); 返回一个};

在分号之后，它不压缩空格......

* * *

下面是我用来压缩 JS 文件的代码。我可以将所有 js 文件复制到一个文件中。但无法压缩。请帮我...

```
<plugin>
    <groupId>net.alchim31.maven</groupId>
    <artifactId>yuicompressor-maven-plugin</artifactId>
    <version>1.1</version>          
    <executions>
        <execution>
            <goals>
                <goal>compress</goal>
            </goals>
        </execution>
    </executions>        
    <configuration>
        <removeIncluded>false</removeIncluded>
        <jswarn>false</jswarn>
        <aggregations>
            <aggregation>
                <insertNewLine>true</insertNewLine>
                <removeIncluded>false</removeIncluded>
                <inputDir>src/main/webapp/resources/js</inputDir>
                <includes>
                    <include>D:/TestWorkSpace/myProject/src/main/webapp/resources/js/panel.js</include>
                </includes>
                <output>src/main/webapp/resources/js/min.js</output>
            </aggregation>
        </aggregations>
    </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:57:46.357

永远不要使用像 d:/ 这样的硬编码路径。最好使用像 ${project.basedir} 这样的东西。

您不应该将修改后的代码放回 src/ 区域。根据文档，输出标签似乎不存在，但与默认情况下存在指向目标文件夹的标签 outputDirectory 相矛盾。我建议先尝试不配置输出标签。

# alfresco - 进出口问题

> ID：11897244
> 
> 赞同：1
> 
> 时间：2012-08-10T07:29:45.867
> 
> 标签：alfresco

我有一个场景，我必须从 Alfresco 导出整个信息并将其导入另一个 alfresco...

在用户、站点、dashlets、规则、方面和其他信息中找不到任何差异。它应该像导入后的前一个一样正常工作。

我使用插件 share-import-export-0.1-JAR-alfresco-3.4 在 Alfreso 共享中进行导入和导出。但是我在共享中的导出选项无法始终如一地工作，有时它会成功导出，有时会显示错误。

导出后，如果我成功获得 .acp 文件...我在将整个内容导入共享时收到错误消息，并且错误消息也不是那么具有描述性。错误消息：“内容提取过程中发生意外错误”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:20:41.237

您不能使用 ACP 来满足您的需要。ACP 包括内容和权限，但不包括这些权限的用户/组的定义。ACP 也不包括站点定义——站点不仅仅是组成它的内容。

如果您需要导出站点，包括其内容和用户，那么最好的办法是使用引入到 Alfresco 3.5 (Team) 中的新功能来支持示例站点。有一个处理导出的 webscript，还有一个引导导入器，它将为您将其加载到一个新系统中。我发现它对于这类事情非常有效，但是当我写的大部分内容时，我可能会有偏见；-)

用于导出的 webscript`org.alfresco.repository.site.site-export.get`位于`/alfresco/services/api/sites/{shortname}/export`- 将站点名称放入 URL 并获取（作为管理员）以接收包含站点所有部分的 zip。

要查看加载情况，请查看`patch-services-context.xml`并搜索`patch.siteLoadPatch.swsdp`. 加载的类是`org.alfresco.repo.admin.patch.impl.SiteLoadPatch`，它将用户、人员、组、内容和站点名称作为参数。（您将从导出的 zip 文件中获得所有这些内容）

如果您需要执行多个站点 + 用户 + 组 + 内容，那么您应该查看诸如导入/导出、复制/传输或滚动自定义的内容（可能基于 CMIS）。

# ruby - 使用 Nokogiri 在 Ruby 中跟踪元素出现并设置相应数组的最佳方法是什么

> ID：11897247
> 
> 赞同：1
> 
> 时间：2012-08-10T07:30:00.947
> 
> 标签：ruby, web-scraping, nokogiri

我正在尝试从一个同时包含`.value`和`.rating-ineligible`类混合的网站上抓取数据。

我想在单个数组中跟踪两者`.value`，以检查是否可用：`.rating-ineligible``.value`

```
page.css('td.title .value').text.strip
page.css('.rating-ineligible').text.strip 
```

我想要一个名为 的数组`FLAG[]`，其元素设置为何`"A"`时`.value`存在，`"NA"`如果`.rating-ineligible`存在，则输出应如下所示：

```
FLAG["A","A","A","NA","A","NA","A","A"] 
```

是否有任何黑客可以使`FLAG`阵列工作？

* * *

**样本输入：**

```
<td class=title>

<span class="rating-rating">
<span class="value">8.7</span>
</span>

<div class="rating-ineligible">
<a href="somelink">NYR</a>
</div>

<span class="rating-rating">
<span class="value">5.2</span>
</span>

<span class="rating-rating">
<span class="value">6.1</span>
</span>

<span class="rating-rating">
<span class="value">7.9</span>
</span>

<div class="rating-ineligible">
<a href="somelink">NYR</a>
</div>

<span class="rating-rating">
<span class="value">-</span>
</span>

<span class="rating-rating">
<span class="value">4.2</span>
</span>

</td> 
```

如果您看到上述示例输入，则存在三种类型的值，

```
一是评分：*.*
第二个是：NYR
第三个是：-（连字符）

```

我希望这些被捕获在一个数组中，

**如果以xx**格式存在有效评级，则该值应设置为**“A”**

 **如果输入中的值为**NYR** ，则该值应设置为**“NA”**。

 **如果连字符**-**出现在输入中，则为**“-” 。**

 ****期望的输出：**

标志 ["A","NA","A","A","A","NA","-","A"]

我没有设置标志，而是通过将值捕获到下面的数组中来厌倦它，

```
r = page.css('td.title span.value').text.strip
noe=["NOE"]
ra=r.scan(/./)
ra.map!{|x| x=='-'?noe:x}.flatten!
rat=ra.join("")
rati=rat.scan(/.../) 
```

数组 ratio[] 的输出如下所示，

比率 ["8.7","5.2","6.1","7.9","NOE","4.2"]

但这里的问题是，给定输入中共有 8 个值，其中 5 个值的格式为 xx 一个值的格式为“-”，在数组中被捕获为 NOE 但我无法在该阵列中捕获 NYR。

现在上述输入的期望输出应该是这样的，比率 ["8.7","NYR","5.2","6.1","7.9","NYR","NOE","4.2"] 但我不知道确切的方法，如何将 NYR 值捕获到数组中。

谁能给我正确的代码来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-03T05:42:04.763

```
doc = Nokogiri::HTML(DATA.read)
result = doc.search("//td/*[starts-with(@class, 'rating-')]").map do |node|

  case node.elements.first.text
  when /\d+\.\d+/
    'A'
  when 'NYR'
    'NA'
  when '-'
    '-'
  end

end

pp result # ["A", "NA", "A", "A", "A", "NA", "-", "A"] 
```******

# jquery - 悬停在鼠标上

> ID：11897258
> 
> 赞同：0
> 
> 时间：2012-08-10T07:30:39.633
> 
> 标签：jquery, hover

`<h3>`当鼠标悬停在使用 jQuery的标记文本上时，如何缩放标记的文本？

这是 JavaScript 代码。

```
 var bindBehaviors = function (scope) {
            $('h3',scope).hover(
            function () {
            $(this).css("font-size", "40px");
            },
           function () {
           $(this).css("font-size", "25px");
           }
           );
           }
           bindBehaviors(this); 
```

它正在改变它的大小，但是当我将鼠标放在包含`<h3>`文本的行的任何位置时，它就会发生。为什么？另一个问题是定位。

ASPX 代码如下。

```
<form id="form1" runat="server">
  <div id="dictionary">
  </div>
  <div class="letters">
    <div class="button" id="letter-a">
      <h3>A</h3>
      <button type="button">Load</button> 
    </div>
    <div class="button" id="letter-b">
      <h3>B</h3>
      <button type="button">Load</button> 
    </div>
    <div class="button" id="letter-c">
      <h3>C</h3>
      <button type="button">Load</button> 
    </div>
    <div class="button" id="letter-d">
      <h3>D</h3>
      <button type="button">Load</button> 
    </div>
  </div>
  <div class="button" id="letter-f">F
    <form>
      <input type="text" name="term" value="" id="term" />
      <input type="submit" name="search" value="search" id="search" />
    </form>
  </div>
  <div id="loading">
    Loading...
  </div>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T07:48:07.247

你有几个选择。

只是CSS。

```
h3
{
    transform: scale(1);
}

h3:hover
{
    transform: scale(1.5);
} 
```

JS(jQuery)

```
$('h3').hover(
    function()
    {
        $(this).effect('scale',{percent:200},1000);
    },
    function()
    {
        $(this).effect('scale',{percent:50},1000);
    },     
); 
```

类似的东西可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T07:34:40.060

html:`<h3>Some text</h3>`

CSS：`h3 {font-size: 14px;}`

jQuery：

```
$('h3').hover(
  function () {
    $(this).css("font-size", "16px");
  },
  function () {
    $(this).css("font-size", "14px");
  }
); 
```

# python - 为什么在使用 Python 的“float”函数时这些结果会如此不同？

> ID：11897260
> 
> 赞同：3
> 
> 时间：2012-08-10T07:30:42.953
> 
> 标签：python, math, floating-point, type-conversion, converter

我的 Python 代码对我（或者我的数字）做了一些奇怪的事情：

一种）

```
float(poverb.tangibles[1])*1000
1038277000.0 
```

b)

```
float(poverb.tangibles[1]*1000)
inf 
```

这导致发现：

```
long(poverb.tangibles[1]*1000) 
```

产生了我见过的最大的数字。

呃，我没有阅读整个 Python 教程或它的文档。我是否错过了有关如何`float`工作的关键信息？

编辑：

```
>>> poverb.tangibles[1]
u'1038277' 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-10T07:37:03.383

您可能错过的是有关乘法如何在字符串上工作的文档。您的`tangibles`列表包含*字符串*。 `tangibles[1]`是一个字符串。 `tangibles[1]*1000`是那个字符串重复了 1000 次。在该字符串上调用`float`or`long`会将其解释为一个数字，从而创建一个巨大的数字。如果你这样做`float(tangibles[1])`，你只会得到实际的数字，而不是重复 1000 次的数字。

您所看到的与此示例中的情况相同：

```
>>> x = '1'
>>> x
'1'
>>> x*10
'1111111111'
>>> float(x)
1.0
>>> float(x*10)
1111111111.0 
```

# javascript - 直接在视图 MVC 4 上注入/插入值

> ID：11897262
> 
> 赞同：0
> 
> 时间：2012-08-10T07:30:48.030
> 
> 标签：javascript, asp.net-mvc

我是 MVC 新手，有一个 MVC 4 Web 应用程序，我在应用程序启动中检索项目集合（静态参考数据）。我想在我的视图加载并循环通过它在视图上创建链接时显示这个项目集合，我想使用 javascript 来注入这些信息。我发现了一个帖子，他们提到在这样的视图中这样做

```
<script type="text/javascript> 
 <%= Model.JavascriptToInsert %> 
</script> 
```

但我正在寻找实施这种方法的工作示例。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T07:44:06.047

在将集合放入页面之前，您应该将集合序列化为 json。

**使用 ViewBag 显示数据**

控制器：

```
 //Show data with ViewBag
    public ActionResult Index()
    {
        ViewBag.DataList = SomeClass.SomeStaticList;
        return View();
    } 
```

看法：

```
<script type="text/javascript">
    var list = <%=Json.Encode(ViewBag.DataList)%>;

    for (var i = 0; i < list.length; i++) {
        //do something with your data
    }
</script> 
```

**使用强类型视图**

控制器：

```
 //Show data with ViewModel
    public ActionResult Index()
    {
        var model = new TempProject.Models.SampleModel();
        model.ListData = SomeClass.SomeStaticList;
        return View(model);
    } 
```

看法：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<TempProject.Models.SampleModel>" %>

<script type="text/javascript">
    var list = <%=Json.Encode(Model.ListData) %>;

    for (var i = 0; i < list.length; i++) {
        //do something with your data
    }
</script> 
```

# ruby-on-rails - 获取自己的IP地址

> ID：11897269
> 
> 赞同：18
> 
> 时间：2012-08-10T07:30:58.247
> 
> 标签：ruby-on-rails, ruby

如何使用 Rails 获取我自己的 IP 地址？

当我这样做时，我得到了：`127.0.0.1`

```
@ip = request.remote_ip 
```

有没有办法获得公共IP？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-10T08:07:18.130

尝试：

```
require 'socket'
ip=Socket.ip_address_list.detect{|intf| intf.ipv4_private?}
ip.ip_address if ip 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-06T11:14:03.113

我相信`request.env['SERVER_NAME']`有效，如果你想反映服务器基地址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T07:35:25.523

试试这个：

```
request.env['REMOTE_ADDR'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T08:11:55.280

使用您的 IP 调用页面，而不是本地主机。即，`192.168.2.9:3000`在默认开发环境的情况下会产生：

```
request.env['REMOTE_ADDR']
#=> 192.168.2.9 
```

或者：

```
request.remote_ip 
#=> 192.168.2.9 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T13:12:12.337

由于您的请求是服务器本地的，因此它返回“localhost”地址，即`127.0.0.1`. 如果您从托管在 Internet 上的计算机请求它，它将为您提供远程服务器的静态 IP。

如果您想要自己互联网的静态 IP，请访问[http://ping.eu](http://ping.eu)，您可以看到您的公共 IP。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-26T05:45:06.340

这并不能回答这个问题。我认为其他人会发现这个答案很有帮助。

**问题：**

我正在开发一个移动应用程序。所以，当我//`debug`应用程序在真正的移动设备中时。图片 url 不适用于.`hot reload``live reload``localhost:3000`

图像与 ip 一起使用，如下所示：`http://192.168.0.102:3000/user/1/profile-223hfkj33.jpg`

`Problem is`每次打开笔记本电脑并连接到wifi路由器时，笔记本电脑的ip都会改变。因此，每次我需要更改文件`asset_host`时。`environments/development.rb`

查看以前的答案，我找到了解决方案：

**解决方案：**

在`environments/development.rb`我写这段代码：

```
server_address = "#{Socket.ip_address_list.detect(&:ipv4_private?).try(:ip_address)}:3000"
config.asset_host = server_address

puts "Server address: #{server_address}"
# when I run `rails s`, this line prints server address in console 
```

所以，它`asset_host`是这样设置的：`192.168.0.102:3000`
当我打开笔记本电脑时，笔记本电脑会获得新的 IP 地址并且它可以工作。

# sql-server - 编写 CLR 存储过程

> ID：11897270
> 
> 赞同：1
> 
> 时间：2012-08-10T07:31:00.940
> 
> 标签：sql-server, delphi, stored-procedures, delphi-xe2

我想使用现有的 Delphi 代码来编写 SQL Server 存储过程。

过去我使用扩展存储过程，不知何故由 Delphi 编译的 dll 由 SQL Server 扩展存储过程包装。

扩展存储过程现在已被弃用，所以不知何故我想知道是否有解决方案，即使在“技巧域”中，比如一些包装普通 dll 的示例 CLR 代码或类似的东西。

只是给你一个例子：

我通过加密在数据库中插入了一些文档，我想创建一种基于 SQL Server 函数/过程的 API 用于插入或读取文档，以便其他访问 sql server 的人可以调用这些函数。

当然，另一种解决方案是使用 web 服务，但我想先尝试 SQL Server 方式。

**注意：**我不想使用 Delphi Prism，我的代码是用于 XE2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T07:59:22.610

不安全的 SQLCLR 程序集可以[p 调用](http://en.wikipedia.org/wiki/Platform_Invocation_Services)本机 dll。更好的方法是将本机 DLL 服务公开为 COM 接口并使用SQLCLR 中的[COM 互操作，或者甚至通过](http://en.wikipedia.org/wiki/COM_Interop)[OLE 自动化过程](http://msdn.microsoft.com/en-us/library/ms190501)直接从 SQL 调用 COM API 。一个更好的方法是将 Delphi 代码重写为 CLR 代码并直接调用它作为 SQLCLR 过程。最好的方法是使用 SQL Server[的本机加密功能](http://technet.microsoft.com/en-us/library/bb510663.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:34:10.757

更不用说 SQL Server 中的 CLR 保证了对性能的深刻影响。保持标准的 CRUD 运算符，你应该没问题。另一种方法是使用文件系统作为您的加密机制。如果您只是想防止随意访问文档，这是一个不错的方法。否则，可能是时候重新考虑您的访问协议了。

SQL Server 中的 CLR 是一个方便的坏主意。如果有的话，请谨慎使用。

# scala - 在scala中使用代数类型排序

> ID：11897272
> 
> 赞同：3
> 
> 时间：2012-08-10T07:31:11.173
> 
> 标签：scala

我有这个：

```
abstract class Issue( ... ) extends Ordered[Issue] { 
  def compare(o : Issue) = due.compare(o.due)
  def render() : String
}

case class Task( ..., subtasks : scala.List[Subtask]) extends Issue( ... ) {
  def render() = ...
}

case class Subtask( ..., parent : String ) extends Issue( ... ) {
  override def compare(o:Subtask) = {
    ... delegate to some field's compare function ...
  }

  def render() = ...

} 
```

我想用

```
val l1 : List[Task] = tasks.sorted
val l2 : List[Subtask] = subtasks.sorted 
```

但它不起作用：

```
error: diverging implicit expansion for type scala.math.Ordering[this.Subtask]

starting with method ordered in trait LowPriorityOrderingImplicits
         ,subtasks.sorted.map(_.render()).mkString(" | ")).mkString(" | ") 
```

**如何为各个构造函数编写具有不同排序的这种 agebraic 类型？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:39:25.800

因为`Subtask`您没有正确覆盖父方法，因为它们采用不同的参数类型。尝试这个：

```
case class Subtask( ..., parent : String ) extends Issue( ... ) {
  override def compare(o: Issue) = o match {
    case x: Subtask => ... // your new comparison
    case x          => super.compare(x)
  }
  ...
} 
```

但是，在排序时，我们需要一个`Ordering[Issue]`，而不是`Ordering[Subtask]`，因为该`compare`方法需要一个`Issue`。

因此，要对 a 进行排序`List[Subtype]`，编译器要获得正确的`Ordering`对象，需要将其键入为 a`List[Issue]`而不是`List[Subtask]`。

所以在你声明的地方添加一个类型注释`subtasks`，或者在调用时向上转换它：

```
(subtasks: List[Issue]).sorted 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:20:32.703

您是否尝试过将子类作为类型参数传递给抽象超类？像这样的东西：

```
abstract class Issue[I <: Issue[I]](...) extends Ordered[I] {
  def compare(o: I) = due.compare(o.due)
}

case class Task(...) extends Issue[Task](...)

case class Subtask(...) extends Issue[Subtask](...) 
```

# c++ - 使用 QPainter 在 QPixmap 上绘制图形

> ID：11897276
> 
> 赞同：1
> 
> 时间：2012-08-10T07:31:29.650
> 
> 标签：c++, qt, alphablending, qpainter, qpixmap

我需要绘制一个实时图表来保持背景图像。假设我正在用红色绘制图表。

但我用于绘图的逻辑是使用painter.drawline 绘制小线，其中painter 是像素图画家。然后我不断地在计时器 timeout() 事件上使用画家将这个像素图绘制到父小部件。所以看起来更新后的图像（即图表）被绘制在 Gui 中。

像素图在背景中为黑色，绘图笔颜色为红色，因此当它到达屏幕宽度的末端时，我必须从位置 0 开始绘制图形，但从第二个周期开始，我必须填充先前绘制的像素（不是整个像素图，只是一个宽度为几个像素和高度的矩形，像素图的高度）与黑色。

但现在我需要保留背景图像，并在其上绘制图表。所以用黑色填充是行不通的，因为我必须保留图像的背景。那么如何在上述图像上绘制图表呢？

有没有办法混合两个图像，使得源图像中只有特定颜色（红色）的像素与目标图像中的相应像素混合/替换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:51:42.343

将先前绘制的 Y 保留在内存中，而不是用相应的背景填充完全相同的像素。它更快，更可靠。

# requirejs - 使用 requirejs 优化时不要复制源文件

> ID：11897286
> 
> 赞同：5
> 
> 时间：2012-08-10T07:32:30.627
> 
> 标签：requirejs

使用 require.js (r.js) 优化 js 代码时，将所有 js 源代码复制到目标目录（dir 属性）。

有没有办法（一些配置）来防止 requirejs 复制源文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T20:24:58.400

如果您添加`removeCombined: true`到您的 r.js 构建配置，优化器将删除（基本上不复制）所有合并到您的输出模块中的源文件。

或者，如果您指的是根本不属于 requireJS 构建的源文件，请尝试`fileExclusionRegExp: /^\./`在您的配置中使用。

有关更多详细信息，请参阅[示例完整的 r.js 配置文件](https://github.com/jrburke/r.js/blob/master/build/example.build.js)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T11:52:46.230

正如 rharper 提到的，你必须使用这个属性：

```
fileExclusionRegExp 
```

例如，如果您使用 cssmin 来合并/缩小您的文件并且不希望 requirejs 移动您的样式表，并且如果您有另一个`foo`可以使用的文件夹：

```
fileExclusionRegExp: /css|foo/ 
```

排除这些文件夹被复制到您的构建目录。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-20T02:16:02.273

使用这个配置：

```
keepBuildDir: true, 
```

这可以保持输出目录

详细信息：[https ://github.com/jrburke/r.js/blob/master/build/example.build.js#L70](https://github.com/jrburke/r.js/blob/master/build/example.build.js#L70)

# java - 如何将 iTextPDF 文档转换为字节数组

> ID：11897290
> 
> 赞同：12
> 
> 时间：2012-08-10T07:32:45.337
> 
> 标签：java, pdf-generation, blob, itext, itextpdf

在**内存中创建****iTextPDF 文档**文件后，我需要将其转换为**byte[]**。我已经测试过正确创建 PDF 没有问题。问题是如何将其转换为字节数组以存储在数据库中。

 **这是我的代码：

```
Document generatedDocument = reportService.generateRequestForm(scdUser, jsonObject, 0, null);
reportService.generateRequestForm(scdUser, jsonObject, 0, null);
ByteArrayOutputStream baos = new ByteArrayOutputStream();
PdfWriter pdfWriter = PdfWriter.getInstance(generatedDocument, baos);
generatedDocument.open();
document.setDocument(baos.toByteArray()); // stores as blob 
```

我在数据库**blob**列中得到**null值。**

 **这是我的文档域对象：

**文档域对象**

```
@Entity
@Table(name = "document")
public class Document implements java.io.Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "document_id", nullable = false)
    private int documentId;
    @Column(name = "document_name", nullable = false, length = 65535)
    private String documentName;
    @Column(name = "document_type", nullable = false)
    private int documentType;
    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "upload_date", nullable = false, length = 19)
    private Date uploadDate = new Date();
    @Column(name = "document", nullable = false)
    private byte[] document;    // BLOB COLUMN
    @Column(name = "document_size", nullable = false)
    private long documentSize;
    @Column(name = "title", nullable = true, insertable = true, updatable = true, length = 65535, precision = 0)
    private String title;
    @Column(name = "tag", nullable = true, insertable = true, updatable = true, length = 65535, precision = 0)
    private String tag;
    @Column(name = "description", nullable = true, insertable = true, updatable = true, length = 65535, precision = 0)
    private String description;
    @Column(name = "shared", nullable = false, insertable = true, updatable = true, length = 1, precision = 0)
    private boolean shared = false;
    @Column(name = "status", nullable = false)
    private int status = DocumentStatus.READY.getStatus();

    public int getDocumentId() {
        return this.documentId;
    }

    public void setDocumentId(int documentId) {
        this.documentId = documentId;
    }

    public String getDocumentName() {
        return this.documentName;
    }

    public void setDocumentName(String documentName) {
        this.documentName = documentName;
    }

    public int getDocumentType() {
        return this.documentType;
    }

    public void setDocumentType(int documentType) {
        this.documentType = documentType;
    }

    public Date getUploadDate() {
        return this.uploadDate;
    }

    public void setUploadDate(Date uploadDate) {
        this.uploadDate = uploadDate;
    }

    public byte[] getDocument() {
        return this.document;
    }

    public void setDocument(byte[] document) {
        this.document = document;
    }

    public long getDocumentSize() {
        return this.documentSize;
    }

    public void setDocumentSize(long documentSize) {
        this.documentSize = documentSize;
    }

    public String getTag() {
        return tag;
    }

    public void setTag(String tag) {
        this.tag = tag;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public boolean getShared() {
        return shared;
    }

    public void setShared(boolean shared) {
        this.shared = shared;
    }

    public int getStatus() {
        return status;
    }

    public void setStatus(int status) {
        this.status = status;
    }

} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-10-09T14:17:51.610

我有一个类似的问题......我会创建文档并在我创建它的类中，我可以将它保存到文件，它工作得很好。但是，当我尝试将其作为 Stream 返回时，我会得到一个空值。

问题是一旦文档关闭（document.close()），它也会关闭流。

解决方法是在我创建 Document 时创建一个 ByteArrayOutputStream 并将 PdfWriter 输出到它。然后我可以对 PDF 字节做任何我想做的事情......在我的例子中，我将它们转换为 StreamedContent 以发送给用户。

创建一个变量来保存字节：

```
 private ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream(); 
```

让 PdfWriter 在创建文档时将数据输出到 byte[]：

```
 Document document = new Document(PageSize.LETTER, 0.75F, 0.75F, 0.75F, 0.75F);
  PdfWriter.getInstance(document, byteArrayOutputStream);  // Do this BEFORE document.open()

  document.open();
  createPDF(document);  // Whatever function that you use to create your PDF
  document.close(); 
```

完成生成 PDF 后，只需获取字节并按照您的意愿处理它们。

```
 byte[] pdfBytes = byteArrayOutputStream.toByteArray(); 
```

我不知道您的 reportService 类是什么样的，但这可能是一个放置它的好地方。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-05-06T03:58:57.587

只是更新 iText 7 版本的答案。

```
private static byte[] createPDF() {
    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
    PdfWriter writer = new PdfWriter(byteArrayOutputStream);
    PdfDocument pdfDocument = new PdfDocument(writer);
    Document document = new Document(pdfDocument);

    //Write the file content

    document.close();
    return byteArrayOutputStream.toByteArray();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T10:08:49.817

从评论看来，它与运行时生成 PDF 的方式无关，而是它存储在数据库中的方式。您还需要提供该代码。

这是我实际拥有的（我的测试）：

持有人：

```
import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;

@Entity
public class PDFHolder implements Serializable {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private long id;

@Column(columnDefinition = "LONGBLOB")
private byte[] documentPDF;

public byte[] getDocumentPDF() {
    return documentPDF;
}

public void setDocumentPDF(byte[] documentPDF) {
    this.documentPDF = documentPDF;
}

public long getId() {
    return id;
}

public void setId(long id) {
    this.id = id;
}
} 
```

进行保存的存储库：

```
@Repository
public interface PDFHolderRepository extends JpaRepository<PDFHolder, Long> {} 
```

和实际插入：

```
private void generateDatabaseRows() {

    try{
        String urlPDF = "http://cetatenie.just.ro/LinkClick.aspx?fileticket=K13DZkoIE2o%3d&tabid=57&mid=593";
        URL url = new URL(urlPDF);

        ByteBuffer byteBufferResponse = this.getAsByteArray(url.openConnection());
        byte [] responseArray = byteBufferResponse.array();
        System.out.println("Size of the PDF : " + responseArray.length);

        // Save it to DB
        PDFHolder pdfHolder = new PDFHolder();
        pdfHolder.setDocumentPDF(responseArray);

        pdfHolderRepository.save(pdfHolder);

    } catch(Exception e){
        e.printStackTrace();
    }
}

private ByteBuffer getAsByteArray(final URLConnection urlConnection) throws IOException {
    final ByteArrayOutputStream tmpOut = new ByteArrayOutputStream();
    final InputStream inputStream = urlConnection.getInputStream();
    final byte[] buf = new byte[1024];
    int len;
    while (true) {
        len = inputStream.read(buf);
        if (len == -1) {
            break;
        }
        tmpOut.write(buf, 0, len);
    }
    tmpOut.close();
    return ByteBuffer.wrap(tmpOut.toByteArray(), 0, tmpOut.size());
} 
```

当然，我在这个类中有一个 @Autowired 存储库：

```
@Autowired
PDFHolderRepository pdfHolderRepository; 
```

![MySQL 存储字节数组](../Images/ea945dd829b7ca7096ef8e1c6b52f407.png)****

# java - 在 Java 中从二维数组构造图像

> ID：11897297
> 
> 赞同：4
> 
> 时间：2012-08-10T07:33:13.707
> 
> 标签：java

我想从二维数组创建图像。我使用 BufferImage 概念来构造图像。但是原始图像和构造图像之间存在差异，如下图所示

![这是我的原图](../Images/b9154e774a7b56e87c9fac132fa29080.png)

![重建后的图像](../Images/9413490d29169808457adb881590edb0.png)

我正在使用以下代码

```
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO; 
```

/** * * @author 普拉提巴 */

```
public class ConstructImage{
    int[][] PixelArray;
    public ConstructImage(){
        try{

        BufferedImage bufferimage=ImageIO.read(new File("D:/q.jpg"));
        int height=bufferimage.getHeight();
        int width=bufferimage.getWidth();
        PixelArray=new int[width][height];
        for(int i=0;i<width;i++){
            for(int j=0;j<height;j++){
                PixelArray[i][j]=bufferimage.getRGB(i, j);
            }
        }
        ///////create Image from this PixelArray
        BufferedImage bufferImage2=new BufferedImage(width, height,BufferedImage.TYPE_INT_RGB);

        for(int y=0;y<height;y++){
            for(int x=0;x<width;x++){
                int Pixel=PixelArray[x][y]<<16 | PixelArray[x][y] << 8 | PixelArray[x][y];
                bufferImage2.setRGB(x, y,Pixel);
            }

        }

         File outputfile = new File("D:\\saved.jpg");
            ImageIO.write(bufferImage2, "jpg", outputfile);

        }
        catch(Exception ee){
            ee.printStackTrace();
        }
    }

    public static void main(String args[]){
        ConstructImage c=new ConstructImage();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T07:46:18.670

你从中得到一个`ARGB`值，`getRGB`然后得到`setRGB`一个`ARGB`值，所以这样做就足够了：

```
bufferImage2.setRGB(x, y, PixelArray[x][y]); 
```

从 API [`BufferedImage.getRGB`](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html#getRGB%28int,%20int%29)：

> **返回默认 RGB 颜色模型 (TYPE_INT_ARGB)**和默认 sRGB 颜色空间中的整数像素。

...并来自以下 API [`BufferedImage.setRGB`](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html#setRGB%28int,%20int,%20int%29)：

> 将此 BufferedImage 中的像素设置为指定的 RGB 值。假定像素位于**默认 RGB 颜色模型 TYPE_INT_ARGB**和默认 sRGB 颜色空间中。

* * *

另一方面，我建议您改为绘制图像：

```
Graphics g = bufferImage2.getGraphics();
g.drawImage(g, 0, 0, null);
g.dispose(); 
```

然后你就不需要担心任何颜色模型等。

# java - 用 java.lang.Boolean 和 switch 做三元逻辑

> ID：11897298
> 
> 赞同：4
> 
> 时间：2012-08-10T07:33:15.397
> 
> 标签：java, boolean, logic, switch-statement

java.lang.Boolean 非常适合处理三元逻辑，因为它可以完全具有三种状态：Boolean.TRUE（情况如此）、Boolean.FALSE（情况并非如此）和 null（我们不知道）是什么情况）。使用 switch 语句来处理这个问题将是一个不错的设计，例如。在这个构造函数中：

```
public class URN {
private String value = null;    

public URN (String value, Boolean mode){
    switch (mode){
        case TRUE:
            if(!isValidURN(value))
                throw new MalformedURLException("The string could not be parsed.");
            this.value = value;
        break;
        case FALSE:
            this.value = value.concat(checkByteFor(value));
        break;
        case null:
            if(isValidURN(value))
                this.value = value;
            else
                this.value = value.concat(checkByteFor(value));
        break;
    }
    return;
} 
```

不幸的是，Java 不允许这样做，并抱怨“无法打开布尔类型的值”。实现这一点会导致混淆的控制流和不好的代码：

```
public URN (String value, Boolean mode){
    Boolean valid = null;
    if (!Boolean.FALSE.equals(mode)){
        valid = isValidURN(value);

        if (Boolean.TRUE.equals(mode) && !valid)
                throw new MalformedURLException("The string could not be parsed.");

        if(Boolean.TRUE.equals(valid)) {
            this.value = value;
            return;
    }   }

    this.value = value.concat(checkByteFor(value));
} 
```

这样做需要实现一个枚举类（在现实生活中，它比这个例子更复杂，因为必须重写 .equals() 以便 Trinary.NULL.equals(null) 变为真）并转换：

```
private enum Trinary {TRUE, FALSE, NULL};
public URN (String value, Boolean toConvert, String x){

    Trinary mode;
    if(toConvert == null)
        mode = Trinary.NULL;
    else
        mode = toConvert.equals(Boolean.TRUE) ? Trinary.TRUE : Trinary.FALSE;

    switch (mode){
        case TRUE:
            if(!isValidURN(value)) throw new MalformedURLException("The string could not be parsed.");
            this.value = value;
        break;
        case FALSE:
            this.value = value.concat(checkByteFor(value));
        break;
        case NULL:
            if(isValidURN(value))
                this.value = value;
            else
                this.value = value.concat(checkByteFor(value));
        break;
    }
    return;
} 
```

在我看来，这是更好的解决方案，因为更具可读性，但是要转换的原始方法大小的另一半很烦人，在现实生活中，您必须关心两个具有相同语义的不同空值。有更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T08:35:42.940

使用空对象来传达这样的信息并不是最优的。请记住，您不能对空对象执行任何方法调用，这再次意味着如果您将来想要调用任何 .getClass、.equals、.compare 等，您将不得不重写您的代码。

您最好的选择绝对是使用 enum 选项。

```
enum Ternary {TRUE,FALSE,UNKNOWN} 
```

您可以进一步扩展该类以具有获取此类对象的方法，

```
public Ternary getByValue(Boolean o) {
    if(o == null)
        return UNKNOWN;
    if(o)
        return TRUE;
    return FALSE;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T07:38:40.293

我同意，令人讨厌的是，该开关确实支持`null`或将其视为`default`未提及。

注意：三位一体可能会`NULL`或`null`可能会令人困惑。

而不是使用 true、false 和 null。我建议为模式使用有意义的名称。例如，使用 VALIDATING、CONCATNATING、MIXED 或更合适的方式。

最简单的解决方案是

```
public URN (String value, Boolean mode){
    if (mode == null) {
        this.value = isValidURN(value) ? values : value.concat(checkByteFor(value));
    } else if (mode) {
        if(!isValidURN(value))
            throw new MalformedURLException("The string could not be parsed.");
        this.value = value;
    } else {
        this.value = value.concat(checkByteFor(value));
    }
    return;
} 
```

顺便说一句，比较`TRUE`可能会令人困惑。

```
Boolean b = new Boolean(true);
if (b == Boolean.TRUE) // is false !!! 
```

# xamarin.android - 带有 EditText 的 MVVMCross 数据绑定列表

> ID：11897300
> 
> 赞同：1
> 
> 时间：2012-08-10T07:33:16.907
> 
> 标签：xamarin.android, mvvmcross

我已经玩了一段时间的 monodroid/monotouch，并决定从 monocross 跳到 mvvmcross，我遇到了一些问题。

我有一个域模型，它包含一个子属性，它是另一个域对象的列表。如果你愿意的话，有很多。我要做的是显示聚合根对象并允许用户填写子对象的详细信息。

```
public class objA
{
    public List<objB> mySubObjs
} 
```

我很容易使用 MvxBindableListView 将其连接起来。除了我无法绑定到 objA.mySubObjs 之外，我必须在 ViewModel 中将列表提升到一个级别并绑定到它？无论如何，我面临的问题是我的列表项模板看起来有点像这样

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        android:layout_marginTop="2dip"
        android:layout_marginBottom="2dip">
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:text="a)"
            android:textAppearance="?android:attr/textAppearanceSmall" />
        <EditText xmlns:local="http://schemas.android.com/apk/res/x.x.x.x"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceMedium"
            local:MvxBind="{&apos;Text&apos;:{&apos;Path&apos;:&apos;Name&apos;}}" />
    </RelativeLayout> 
```

渲染得很好，但只是不可用。当我单击 editText 控件时，会调出软键盘，这样做会失去焦点。我已经阅读了几篇关于 ListView 中的 EditText 的文章不太好用。

因此，我尝试通过绑定到特定项目（即 objA.mySubObjs[0].Name）手动构建列表视图，但这似乎并没有反映在 ViewModel 中。

```
 <EditText
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Question"
        android:textAppearance="?android:attr/textAppearanceSmall"
        local:MvxBind="{&apos;Text&apos;:{&apos;Path&apos;:&apos;Items[0].Name&apos;}}" /> 
```

我有点茫然，并不想走在我的 ViewModel 中扁平化列表以适应 Android 视图的路线。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T04:16:58.607

这有帮助吗 - [ListView 中的 Focusable EditText](https://stackoverflow.com/questions/2679948/focusable-edittext-inside-listview)

> . 除了我无法绑定到 objA.mySubObjs，

在其他方面，请随时将此作为一个单独的问题提出 - 应该有可能......

# c++ - 以下联合中的值是如何分配的？

> ID：11897301
> 
> 赞同：0
> 
> 时间：2012-08-10T07:33:16.707
> 
> 标签：c++, c, arrays, unions

在下面的代码中，是否可以预测 int 的值（如何？），还是只是垃圾？

```
union a
{
    int i;
    char ch[2];
};
a u;
u.ch[0] = 0;
u.ch[1] = 0;
cout<<u.i;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:49:16.643

我会说这取决于 和 的`int`大小`char`。A`union`包含最大变量的内存。如果`int`是 4 个字节并`char[2]`表示 2 个字节，则`int`消耗的内存比`char`-array 多，因此您不会`int`通过设置所有 -variables 来将完整的 -memory 初始化为 0 `char`。这取决于您的内存初始化机制，但基本上 的值`int`似乎是随机的，因为额外的 2 个字节填充了未指定的值。

此外，在我看来，填充 a 的一个变量`union`并读取另一个变量正是使联合不安全的原因。

如果您确定这是最大的数据类型，则可以通过编写`int`来初始化整体`union`

```
union a
{
    int i;
    char ch[2];
};

void foo()
{
    a u = { 0 };  // Initializes the first field in the union
    cout << u.i;
} 
```

因此，将最大的类型放在联合的开头可能是个好主意。尽管不能保证当所有位都设置为 0 时所有数据类型都可以被视为零或空。

# asp.net - 奇怪的 ASP.net 错误会在一段时间内自行消失

> ID：11897302
> 
> 赞同：1
> 
> 时间：2012-08-10T07:33:21.493
> 
> 标签：asp.net, visual-studio-2010

我有一个正在运行的 ASP.net 应用程序，它工作得很好，但有时我会收到以下错误。它也可以通过刷新页面或保存给出错误的页面然后刷新它来自行解决。错误是：

> “/PinWW”应用程序中的服务器错误。
> 
> 编译错误
> 
> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：ASPNET：确保此代码文件中定义的类与“继承”属性匹配，并且它扩展了正确的基类（例如 Page 或 UserControl）。
> 
> 源错误：
> 
> 第 16 行：第 17 行：第 18 行：公共部分类 LoginPage：System.Web.UI.Page 第 19 行：{ 第 20 行：private String connString = "Data Source=DEVELOPMENT;Initial catalog=pin;uid=sa;Password=pass ";

凸轮有人告诉我为什么会这样？在页面显示和错误之前，我不会更改页面上的任何内容，然后再次保存并在它工作时刷新它。

# java - 如何将 jfree 图表作为小程序运行？

> ID：11897303
> 
> 赞同：0
> 
> 时间：2012-08-10T07:33:22.457
> 
> 标签：java, applet, jfreechart

我对java不太了解，但希望以下代码作为applet运行。请求真诚的帮助。

谁能帮我将此代码作为小程序运行？这是 Jfree 图表，我想将它作为小程序运行。请提出建议。

```
package org.jfree.chart.demo;

import java.awt.Color;
import java.text.SimpleDateFormat;

import javax.swing.JPanel;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.StandardChartTheme;
import org.jfree.chart.axis.DateAxis;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYItemRenderer;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.time.Month;
import org.jfree.data.time.TimeSeries;
import org.jfree.data.time.TimeSeriesCollection;
import org.jfree.data.xy.XYDataset;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RectangleInsets;
import org.jfree.ui.RefineryUtilities;

/**
 * An example of a time series chart.  For the most part, default settings are
 * used, except that the renderer is modified to show filled shapes (as well as
 * lines) at each data point.
 */
public class TimeSeriesChartDemo1 extends ApplicationFrame {

    private static final long serialVersionUID = 1L;

    {
        // set a theme using the new shadow generator feature available in
        // 1.0.14 - for backwards compatibility it is not enabled by default
        ChartFactory.setChartTheme(new StandardChartTheme("JFree/Shadow",
                true));
    }

    /**
     * A demonstration application showing how to create a simple time series
     * chart.  This example uses monthly data.
     *
     * @param title  the frame title.
     */
    public TimeSeriesChartDemo1(String title) {
        super(title);
        ChartPanel chartPanel = (ChartPanel) createDemoPanel();
        chartPanel.setPreferredSize(new java.awt.Dimension(500, 270));
        setContentPane(chartPanel);
    }

    /**
     * Creates a chart.
     *
     * @param dataset  a dataset.
     *
     * @return A chart.
     */
    private static JFreeChart createChart(XYDataset dataset) {

        JFreeChart chart = ChartFactory.createTimeSeriesChart(
            "Legal & General Unit Trust Prices",  // title
            "Date",             // x-axis label
            "Price Per Unit",   // y-axis label
            dataset,            // data
            true,               // create legend?
            true,               // generate tooltips?
            false               // generate URLs?
        );

        chart.setBackgroundPaint(Color.white);

        XYPlot plot = (XYPlot) chart.getPlot();
        plot.setBackgroundPaint(Color.lightGray);
        plot.setDomainGridlinePaint(Color.white);
        plot.setRangeGridlinePaint(Color.white);
        plot.setAxisOffset(new RectangleInsets(5.0, 5.0, 5.0, 5.0));
        plot.setDomainCrosshairVisible(true);
        plot.setRangeCrosshairVisible(true);

        XYItemRenderer r = plot.getRenderer();
        if (r instanceof XYLineAndShapeRenderer) {
            XYLineAndShapeRenderer renderer = (XYLineAndShapeRenderer) r;
            renderer.setBaseShapesVisible(true);
            renderer.setBaseShapesFilled(true);
            renderer.setDrawSeriesLineAsPath(true);
        }

        DateAxis axis = (DateAxis) plot.getDomainAxis();
        axis.setDateFormatOverride(new SimpleDateFormat("MMM-yyyy"));

        return chart;

    }

    /**
     * Creates a dataset, consisting of two series of monthly data.
     *
     * @return The dataset.
     */
    private static XYDataset createDataset() {

        TimeSeries s1 = new TimeSeries("L&G European Index Trust");
        s1.add(new Month(2, 2001), 181.8);
        s1.add(new Month(3, 2001), 167.3);
        s1.add(new Month(4, 2001), 153.8);
        s1.add(new Month(5, 2001), 167.6);
        s1.add(new Month(6, 2001), 158.8);
        s1.add(new Month(7, 2001), 148.3);
        s1.add(new Month(8, 2001), 153.9);
        s1.add(new Month(9, 2001), 142.7);
        s1.add(new Month(10, 2001), 123.2);
        s1.add(new Month(11, 2001), 131.8);
        s1.add(new Month(12, 2001), 139.6);
        s1.add(new Month(1, 2002), 142.9);
        s1.add(new Month(2, 2002), 138.7);
        s1.add(new Month(3, 2002), 137.3);
        s1.add(new Month(4, 2002), 143.9);
        s1.add(new Month(5, 2002), 139.8);
        s1.add(new Month(6, 2002), 137.0);
        s1.add(new Month(7, 2002), 132.8);

        TimeSeries s2 = new TimeSeries("L&G UK Index Trust");
        s2.add(new Month(2, 2001), 129.6);
        s2.add(new Month(3, 2001), 123.2);
        s2.add(new Month(4, 2001), 117.2);
        s2.add(new Month(5, 2001), 124.1);
        s2.add(new Month(6, 2001), 122.6);
        s2.add(new Month(7, 2001), 119.2);
        s2.add(new Month(8, 2001), 116.5);
        s2.add(new Month(9, 2001), 112.7);
        s2.add(new Month(10, 2001), 101.5);
        s2.add(new Month(11, 2001), 106.1);
        s2.add(new Month(12, 2001), 110.3);
        s2.add(new Month(1, 2002), 111.7);
        s2.add(new Month(2, 2002), 111.0);
        s2.add(new Month(3, 2002), 109.6);
        s2.add(new Month(4, 2002), 113.2);
        s2.add(new Month(5, 2002), 111.6);
        s2.add(new Month(6, 2002), 108.8);
        s2.add(new Month(7, 2002), 101.6);

        TimeSeriesCollection dataset = new TimeSeriesCollection();
        dataset.addSeries(s1);
        dataset.addSeries(s2);

        return dataset;

    }

    /**
     * Creates a panel for the demo (used by SuperDemo.java).
     *
     * @return A panel.
     */
    public static JPanel createDemoPanel() {
        JFreeChart chart = createChart(createDataset());
        ChartPanel panel = new ChartPanel(chart);
        panel.setFillZoomRectangle(true);
        panel.setMouseWheelEnabled(true);
        return panel;
    }

    /**
     * Starting point for the demonstration application.
     *
     * @param args  ignored.
     */
    public static void main(String[] args) {

        TimeSeriesChartDemo1 demo = new TimeSeriesChartDemo1(
                "Time Series Chart Demo 1");
        demo.pack();
        RefineryUtilities.centerFrameOnScreen(demo);
        demo.setVisible(true);

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T07:49:26.130

您需要扩展 Applet 类并覆盖该`paint(Graphics g)`方法。关键代码是`chart.draw( (Graphics2D) g,getBounds());`使用在 上绘制图表`Graphics g`。

如果您是 Java 新手，您可能需要查看[教程](http://docs.oracle.com/javase/tutorial/deployment/applet/)

![在此处输入图像描述](../Images/cfe6802c56540561e5b7add4211118e5.png)

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.text.SimpleDateFormat;

import javax.swing.JApplet;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.DateAxis;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYItemRenderer;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.time.Month;
import org.jfree.data.time.TimeSeries;
import org.jfree.data.time.TimeSeriesCollection;
import org.jfree.data.xy.XYDataset;
import org.jfree.ui.RectangleInsets;

public class AppletDemo extends JApplet {

    @Override
    public void paint(Graphics g) {
        JFreeChart chart = createChart(createDataset());
        chart.draw( (Graphics2D)g,getBounds()); 
    }

    private static JFreeChart createChart(XYDataset dataset) {

        JFreeChart chart = ChartFactory.createTimeSeriesChart(
            "Example Chart",  
            "Date",            
            "Value",   
            dataset,            
            true,               
            true,               
            false              
        );

        chart.setBackgroundPaint(Color.white);

        XYPlot plot = (XYPlot) chart.getPlot();
        plot.setBackgroundPaint(Color.lightGray);
        plot.setDomainGridlinePaint(Color.white);
        plot.setRangeGridlinePaint(Color.white);
        plot.setAxisOffset(new RectangleInsets(5.0, 5.0, 5.0, 5.0));
        plot.setDomainCrosshairVisible(true);
        plot.setRangeCrosshairVisible(true);

        XYItemRenderer r = plot.getRenderer();
        if (r instanceof XYLineAndShapeRenderer) {
            XYLineAndShapeRenderer renderer = (XYLineAndShapeRenderer) r;
            renderer.setBaseShapesVisible(true);
            renderer.setBaseShapesFilled(true);
            renderer.setDrawSeriesLineAsPath(true);
        }

        DateAxis axis = (DateAxis) plot.getDomainAxis();
        axis.setDateFormatOverride(new SimpleDateFormat("MMM-yyyy"));

        return chart;

    }

    private static XYDataset createDataset() {

        TimeSeries s1 = new TimeSeries("Series 1");
        s1.add(new Month(2, 2001), Math.random());
        s1.add(new Month(3, 2001), Math.random());
        s1.add(new Month(4, 2001), Math.random());
        s1.add(new Month(5, 2001), Math.random());

        TimeSeries s2 = new TimeSeries("Series 2");
        s2.add(new Month(2, 2001), Math.random());
        s2.add(new Month(3, 2001), Math.random());
        s2.add(new Month(4, 2001), Math.random());
        s2.add(new Month(5, 2001), Math.random());
        s2.add(new Month(6, 2001), Math.random());

        TimeSeriesCollection dataset = new TimeSeriesCollection();
        dataset.addSeries(s1);
        dataset.addSeries(s2);

        return dataset;

    }
} 
```

# raphael - 拉斐尔如何添加改变最后点击对象颜色的点击动作

> ID：11897307
> 
> 赞同：0
> 
> 时间：2012-08-10T07:33:38.970
> 
> 标签：raphael

感谢这篇[文章](https://stackoverflow.com/questions/8534776/raphael-how-to-add-onclick-action-that-changes-colour/11884574#11884574)，这是我所做的：

```
var current = null;
for (var state in fr) {
    (function (st, state) {
        st[0].state = 0;
        st[0].onmouseover = function() {
            st[0].style.cursor = "pointer";
            current && fr[current].animate({fill: "#EAEAEA", stroke: "#d5d5d5"}, 300);
            st.animate({fill: "#EC5505", stroke: "#EC5505"}, 300);
            st.toFront();
            paper.safari();
            document.getElementById(state).style.display = "block";
            current = state;
        };

        st[0].onmouseout = function () {
            if (this.state == 0)
                st.animate({ fill: "#EAEAEA", stroke: "#D5D5D5" }, 500);
            else
                st.animate({ fill: "#EC5505", stroke: "#EC5505" }, 500);
            st.toFront();
            paper.safari();
        };

        st[0].onclick = function () {
            st.animate({ fill: "#EC5505", stroke: "#EC5505" }, 500);
            st.toFront();
            if (this.state == 0) {                        
                this.state = 1;
            }
            else
                this.state = 0;
            paper.safari();
        };
    })(fr[state], state);
} 
```

我有一些问题......当我点击一个区域然后悬停（在悬停时填写#EC5505）这个区域时，该区域会返回#EAEAEA半秒然后返回#EC5505......通常，这个单击时应该保持悬停颜色...第二个问题是我只想选择一个区域。所以当我点击第二个区域时，第一个区域必须回到初始状态。

你可以帮帮我吗 ？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:31:13.333

它与您的事件有关...因为当您单击元素时会触发 mouseover 事件...当您离开时 mouseout 事件会触发，因此 click 和 mouseout 中的动画都会被触发...

对于第二个问题，您必须保留最后点击的元素的引用......这样当您点击一个元素时，您会检查

```
if(element has already been clicked){
   // go back to original state
} 
```

尝试将布尔值附加到 set[0] ...或单击 set[0] 时 ....

```
`var clickedElement = set[0]` 
```

在 onclick 函数内部

```
if(clickedElement){
// you already have a clicked element so restore its state
} 
```

# android - Android 错误中的媒体播放器错误 (1, -2147483648)

> ID：11897318
> 
> 赞同：0
> 
> 时间：2012-08-10T07:35:19.737
> 
> 标签：android, android-mediaplayer, android-video-player

我正在使用 MediaPlayer 从我从 Youtube json-c 提要解析的 URL 播放我的视频。我检索到的提要是：

```
"player":
{"default":"https://www.youtube.com/watch?v=4uwtqRBE4Kk&feature=youtube_gdata_player",

"mobile":"https://m.youtube.com/details?v=4uwtqRBE4Kk"},

"content":
{"5":"https://www.youtube.com/v/4uwtqRBE4Kk?version=3&f=videos&app=youtube_gdata",

"1":"rtsp://v3.cache1.c.youtube.com/CiILENy73wIaGQmp4EQQqS3s4hMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp",

"6":"rtsp://v3.cache2.c.youtube.com/CiILENy73wIaGQmp4EQQqS3s4hMYESARFEgGUgZ2aWRlb3MM/0/0/0/video.3gp"}," 
```

我在用

```
//URL I retrieved from a json-c feed from the player array described above
private String URL = "https://m.youtube.com/watch?v=4uwtqRBE4Kk";
mediaplayer.setDataSource(URL); 
```

它给出了一个`MediaPlayerError error(1, -2147483648)`. 而当我使用 Dropbox 中的 URL 时

```
private String URL = "http://dl.dropbox.com/u/145894/t/rabbits.3gp"; 
```

它运行并播放视频。请解释错误或给我补救措施。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:49:10.413

如果您在 Android 3.1 之前的设备上进行测试，您可能无法播放 AACP。

为了找出您可以在目标设备上播放哪些流，请查看官方文档：http: [//developer.android.com/reference/android/media/AudioManager.html](http://developer.android.com/reference/android/media/AudioManager.html)

如果您正在寻找如何处理 aacp 结帐，请执行以下操作： [https ://stackoverflow.com/a/8833346/200272](https://stackoverflow.com/a/8833346/200272)

# c - 换行或回车在 C 代码中不起作用

> ID：11897323
> 
> 赞同：-2
> 
> 时间：2012-08-10T07:35:35.127
> 
> 标签：c

我正在尝试在 Ubuntu 12.04 上使用 GCC (v. 4.7) 编译器编写程序，但我遇到了新行“/n”或回车“/r”在我的程序中不起作用的问题。而且我尝试在不同的文本编辑器中打开创建的文件，我得到了相同的结果。这是程序。

```
main()
{
    FILE *fp;
    int i;
    fp = fopen("/home/evan/Desktop/Numberlist.txt", "w");
    for(i;i<100;i++){
        fprintf(fp, "%d /n", i);
    }
    fclose(fp);
} 
```

这是输出的样子。

```
0 /n1 /n2 /n3 /n4 /n5 /n6 /n7 /n8 /n9 /n10 /n11 /n12 /n13 /n14 /n15 /n16 /n17 /n18 /n19 /n20 /n21 /n22 /n23 /n24 / n25 /n26 /n27 /n28 /n29 /n30 /n31 /n32 /n33 /n34 /n35 /n36 /n37 /n38 /n39 /n40 /n41 /n42 /n43 /n44 /n45 /n46 /n47 /n48 /n49 / n50 /n51 /n52 /n53 /n54 /n55 /n56 /n57 /n58 /n59 /n60 /n61 /n62 /n63 /n64 /n65 /n66 /n67 /n68 /n69 /n70 /n71 /n72 /n73 /n74 / n75 /n76 /n77 /n78 /n79 /n80 /n81 /n82 /n83 /n84 /n85 /n86 /n87 /n88 /n89 /n90 /n91 /n92 /n93 /n94​​ /n95 /n96 /n97 /n98 /n99 / n

```

它实际上是将回车打印到程序中，而不是在每个数字后开始一个新行。而且我还尝试使用标准 printf 在命令提示符中打印而不是打印到文本文件中，它在那里做同样的事情。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T07:37:05.207

反斜杠用于转义`\`使用`fprintf(fp, "%d \n", i);`

# tridion - 如何启用使用自定义控件创建的按钮

> ID：11897324
> 
> 赞同：-2
> 
> 时间：2012-08-10T07:35:37.927
> 
> 标签：tridion, tridion-2011

我需要在 tridion 功能区中创建一个位于另一个下方的按钮。

我创建了一个用户控件，它出现在功能区上，但处于禁用模式。在“http://tridiondeveloper.com/ribbon-item-group”；有人提到`<ext:issmallbutton>true</ext:issmallbutton>`在配置中包含我的扩展元素。我已将它包含在 extension.config 文件中。但我面临类似“加载扩展失败 - 有无效的子元素'issmallbutton'的错误。所以，目前我忽略了这一步，按钮处于禁用模式。

您能否让我了解我需要在哪里添加这个。（`<ext:issmallbutton>true</ext:issmallbutton>`）并启用按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T08:41:56.490

正如 Jeremy 的回答所表明的那样，您不需要`ext:issmallbutton`启用按钮（您提到[了我在 Tridion Developer 上的文章](http://tridiondeveloper.com/ribbon-item-group)，我在其中特别指出，`ext:issmallbutton`当您想将按钮堆叠在彼此之上时，不要使用）。

您可能应该尝试调试您的 JavaScript 并查看您的`_isAvailable(selection, pipeline)`和`_isEnabled(selection, pipeline)`方法中发生了什么。

isAvailable 方法应指示该命令是否适用于所选项目，isEnabled 方法应指示该命令是否可以执行。我通常只是让 isEnabled 方法返回 isAvailable 的结果（因为当按钮可用时，它应该大部分时间也被启用）。选择页面后如何启用按钮的示例如下所示：

```
Example.PageBtn.prototype._isAvailable = function PageBtn$_isAvailable(selection, pipeline) {
    if (pipeline) {
        pipeline.stop = false;
    }

    if (selection.getCount() == 1) {
        var itemType = $models.getItemType(selection.getItem(0));
        return itemType && (itemType == $const.ItemType.PAGE);
    }
    return false;
};
Example.PageBtn.prototype._isEnabled = function PageBtn$_isEnabled(selection, pipeline) {
    if (pipeline) {
        pipeline.stop = false;
    }
    return this._isAvailable(selection);
}; 
```

现在`ext:issmallbutton`元素与这一切无关，但如果你想知道应该在哪里准确使用它，它应该`ext:extension`像这样进入元素内部：

```
<ext:extension assignid="PageBtn" groupid="MyGroup" name="Example" pageid="HomePage">
    <ext:command>PageBtn</ext:command>
    <ext:title>Example</ext:title>
    <ext:issmallbutton>true</ext:issmallbutton>
    <ext:dependencies>
        <cfg:dependency>Example.Commands</cfg:dependency>
    </ext:dependencies>
    <ext:apply>
        <ext:view name="DashboardView">
            <ext:control id="DashboardToolbar" />
        </ext:view>
    </ext:apply>
</ext:extension> 
```

[您可以在通过 8 个步骤设置 SDL Tridion 2011 GUI 扩展中](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/GUIextensionIn8steps.aspx)找到更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T08:00:45.540

要启用按钮，您需要其 isEnabled 方法返回 true。issmallbutton 仅确定工具栏中按钮的大小。有关如何创建按钮扩展的信息，请查看关于同一主题的许多其他问题...

# ios - 通过 FTP 协议从 iPhone 上传/下载文件

> ID：11897327
> 
> 赞同：0
> 
> 时间：2012-08-10T07:35:47.643
> 
> 标签：ios, upload, ftp, download

我正在尝试通过 FTP 协议在我的 iPhone 和 FTP 服务器之间上传/下载文件（其中一些很大），但我不知道该怎么做。有什么办法可以做到这一点？

ASIHttpRequest 是否支持 FTP？

还是有其他一些开源项目可以解决我的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:56:38.930

试试这个
[http://www.chilkatsoft.com/ftp-objc.asp](http://www.chilkatsoft.com/ftp-objc.asp)

编辑：实际上我发现了这个 [http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Listings/Read_Me_About_SimpleFTPSample_txt.html](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Listings/Read_Me_About_SimpleFTPSample_txt.html)

# php - Javascript getTime到php日期

> ID：11897331
> 
> 赞同：6
> 
> 时间：2012-08-10T07:36:25.913
> 
> 标签：php, javascript, date, gettime

我有 javascript 使用 getTime() 将我视图中的日期转换为时间字符串。然后将其存储为我选择表单中选项的值。一旦它被传递给 php，我如何把它变成一个 php 日期？

我已经做好了：

```
echo date("m/d/Y", '1345618799000');

1345618799000 = Tue Aug 21 2012 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T07:41:49.963

您使用 PHP 的[date()](http://php.net/manual/en/function.date.php)函数：

```
date("Format here (see documentation)", round($_POST["time_field"]/1000)); 
```

更新了，谢谢耀西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:45:53.350

您可以使用 PHP`strtotime()`将任何字符串更改为 Unix 时间戳； [strtotime()](http://www.w3schools.com/php/func_date_strtotime.asp)

# xcode - 为什么我的 jpg 文件的绝对路径不起作用

> ID：11897337
> 
> 赞同：1
> 
> 时间：2012-08-10T07:36:56.157
> 
> 标签：xcode, path

我检查了一些类似的问题，但没有找到我的问题的答案。

问题的第一部分是如何编写文件的相对路径。我没有得到这项工作，但现在让我移动第二部分。由于我无法获得相对路径工作，所以我尝试了绝对路径。这是我使用的代码：

```
NSString *path = [NSString stringWithFormat:@"/Users/my.name/Documents/TestFour/TestFour/Library/file%d.txt", i]; //where i is 1 or 2
//NSString *path = [NSString stringWithFormat:@"./TestFour/Library/file%d.txt", i]; //this relative path didn't work, although TestFour.xcodeproj and TestFour are in the same directory and TestFour has child directory Library and xxx.h and xxx.m files
NSString *spath = [path stringByStandardizingPath];
NSLog(@"file is %@", spath);
if (spath) {
    NSString *myText = [NSString stringWithContentsOfFile:spath encoding:NSUTF8StringEncoding error:nil];
    //continue, and I got myText .... 
```

现在我有一个 jpg 文件，比如 myPic.jpg，位于与上述 file1.txt 相同的目录中，即在 Library 文件夹中。我想将此图像加载到 UIImageView 中，这是我的代码，但它失败了。

```
NSString *path = @"/Users/my.name/Documents/TestFour/TestFour/Library/myPic.jpg";
NSString *spath = [path stringByStandardizingPath]; 
```

[self._bgView setImage:[UIImage imageNamed:spath]];

但是，我尝试了一个基于网络的图像，顺便说一句，它来自另一个相关线程，它起作用了： [self._bgView setImage:[[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://farm4\. static.flickr.com/3092/2915896504_a88b69c9de.jpg"]]]];

所以我很困惑为什么我可以阅读 the_same_folder_file1.txt 但不能加载 the_same_folder_myPic.jpg

回到第一部分，为什么我的相对路径不起作用？不确定这是否相关，当我将这个和其他 jpg 拖到项目中时，我被询问并选择了默认设置（组或类似的东西）。我不知道我是否需要将此 jpg 拖到项目中，但无论是在拖动之前还是之后，代码都无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:08:39.317

`[UIImage imageNamed`] 将从应用程序包中加载具有给定名称的文件；你想要的是`[UIImage imageWithContentsOfFile]`（[参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageWithContentsOfFile%3a)）。

您还需要了解相对文件路径基于进程的当前工作目录工作。你知道那是什么吗？如果没有，那么您可以使用以下方式记录它：

```
char cwd[1024];
getcwd(cwd, sizeof(cwd));
NSLog(@"cwd='%s'", cwd); 
```

（您可能需要`#import <unistd.h>`）。

也许这会帮助您解决相对路径问题。

# jquery - jquery对话框渲染延迟

> ID：11897338
> 
> 赞同：0
> 
> 时间：2012-08-10T07:36:57.117
> 
> 标签：jquery

我有一个 Jquery 对话框，我想在页面加载后立即打开它。我在对话框背景显示的页面上有一些信息。当页面被点击时，打开对话框有一些延迟（不知道为什么），所以先显示对话框背景的信息，然后显示对话框。我不希望用户在后台看到信息，一段时间后对话框打开看起来很难看。我可以在页面呈现后立即同时打开对话框吗？下面是代码，

```
$(document).ready(function()
            {
            $("#showForm").dialog({
         autoOpen:true,
     position:'center',
        height:200,
        width: 452,
        modal: true

            });
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:12:28.827

您不需要将 autoOpen 设置为 true 是默认选项，无论哪种方式，如果您在 #showForm 上通过 CSS 设置 display:none，它应该是不可见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:19:13.427

您可以尝试将对话框命令放在 $(document).ready() 之外。虽然从未尝试过。

通常的另一个选择是在后台隐藏信息并添加一个打开事件回调来显示它：

```
$("#showForm").dialog({
     autoOpen:true,
     position:'center',
    height:200,
    width: 452,
    modal: true
    open: function(event, ui) { $('#mybackgoundstuff').show(); }
        }); 
```

# delphi - 滚动条的 TForm 问题

> ID：11897341
> 
> 赞同：1
> 
> 时间：2012-08-10T07:37:08.340
> 
> 标签：delphi, delphi-7

我创建了一个 Delphi 7 应用程序。主窗体是具有以下属性的 TForm 对象：

```
BorderIcons:
- biSystemMenu = True
- biMinimize = True
- biMaximize = False
- biHelp = False

BorderStyle = bsSizeable

Position = poScreenCenter

Event OnCanResize: Resize := FALSE; 
```

这个想法是表单不能最大化并且不能调整大小，仅此而已。它工作正常，但是当我在某些系统（Windows 7 和 Windows XP）上运行时，会显示滚动条。同样，仅在某些系统中。

我认为这是因为显示器的屏幕分辨率太小，所以应用程序窗口被剪裁了。但是，事实并非如此。该应用程序完美地显示在中心。

到目前为止，我尝试从互联网上应用许多技巧和提示：

OnFormShow：

```
 if VertScrollBarVisible(MainForm.Handle) then
  begin
    MainForm.Constraints.MaxHeight := MainForm.Constraints.MaxHeight + 10;
    MainForm.Constraints.MinHeight := MainForm.Constraints.MinHeight + 10;
    MainForm.Height := MainForm.Height + 10;
  end;

  if HorzScrollBarVisible(MainForm.Handle) then
  begin
    MainForm.Constraints.MaxWidth := MainForm.Constraints.MaxWidth + 10;
    MainForm.Constraints.MinWidth := MainForm.Constraints.MinWidth + 10;
    MainForm.Width := MainForm.Width + 10;
  end; 
```

它固定在某些系统上……但不是全部。

这让我很困惑。

我得到了另一个提示，设置 TForm.Scaled := FALSE 和 TForm.AutoScroll := FALSE。修复了这些系统，但是表格的底部被切断了！... 一点点。

所以，现在我问...

这些 TForm 参数，如 WIDTH、HEIGHT 是否保存并存储在系统的某个位置？Windows 操作系统会强制应用程序获取该值吗？

因为，在过去，我的应用根本没有这个问题。但是后来，我更改了表单大小，添加了更多 gui，然后问题就来了。现在，我在想，原来的 TForm 属性存储在某个地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:44:57.000

Windows > XP 中的边框更大。我不确定该`Constraints`怎么做，因为我没有使用它们。您是否测试过在组件和表单的右/下端之间使用更大的距离？

**编辑：**某些组件在不同的操作系统上有不同的默认大小。

**编辑 2：**您的表单不应调整大小，因此您可以使用 BorderStyle := bsSingle 关闭大小。

# ruby-on-rails - 在 Rails 中公开 Web 服务 API

> ID：11897355
> 
> 赞同：0
> 
> 时间：2012-08-10T07:38:23.543
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个包含测试的 iPhone 应用程序。但是此时所有问题都是静态的，这意味着我必须更新应用程序以修复错误。我现在已经制作了一个 Rails 应用程序，因此我可以在 Web 上管理它们，并且我希望该应用程序能够连接到我正在制作的 Web 服务 API (JSON)。

我希望该应用程序能够在用户更新应用程序时更新本地存储的所有问题，这样它就可以在没有有效互联网连接的情况下使用。

我在 Rails 应用程序中的模型是问题、答案和类别。问题有很多答案，一个问题有并且属于许多类别。

我不确定我接下来要做什么，如果这听起来很疯狂。我正在考虑以 JSON 格式向用户提供所有问题的列表及其所属关联。我该如何处理仅包含外键的连接表 categories_questions。而且我不明白如何以 JSON 格式公开具有关联的对象。

非常感谢您在正确方向上的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:57:36.980

解决此问题的一种方法是将关联嵌入到父模型的 JSON 中。使用像[rabl](https://github.com/nesquena/rabl/)这样的 gem可以很容易地做到这一点。

# c# - 在 SQL 中插入重音

> ID：11897357
> 
> 赞同：3
> 
> 时间：2012-08-10T07:38:38.140
> 
> 标签：c#, sql, sql-server-2008, non-ascii-characters

我有口音的问题（例如：é、à、è 等）。当我直接插入 SQL Server 2008 Management `INSERT INTO LETTRE_VOIT (LIB_PORT) VALUES ('Payé')`时，它运行良好。但是当我在 C# 上加载此语法时，它不起作用。

```
 try
            {
                using (var connectionWrapper = new Connexion())
                {
                    var connectedConnection = connectionWrapper.GetConnected();

                    string sql_Syntax = Outils.LoadFileToString(HttpContext.Current.Server.MapPath("~/SQL/UpdateEtClotureList.sql"));
                    SqlCommand comm_Command = new SqlCommand(sql_Syntax, connectionWrapper.conn);
                    comm_Command.Parameters.AddWithValue("@CHAUFFEUR", CHAUFFEUR);
                    comm_Command.Parameters.AddWithValue("@Trans", ClotList);
                    string IdOrdre = "";
                    SqlDataReader readerOne = comm_Command.ExecuteReader();
                    while (readerOne.Read())
                    {
                        if (IdOrdre != "") IdOrdre += ",";
                        IdOrdre += readerOne["NO_ORDRE"].ToString();                    
                    }
                    return IdOrdre;
                }
            }
            catch (Exception excThrown)
            {
                throw new Exception(excThrown.Message);
            } 
```

UpdateEtClotureList.sql 的内容：

```
DECLARE @AfterUpdate table (
    NO_ORDRE_Temp int NOT NULL, 
    CODE_DEST_Temp varchar(10) NOT NULL,
    DATE_CLOTUR_Temp datetime NOT NULL, 
    CODE_CLIENT_Temp varchar(20) NOT NULL,
    MODAL_MODE_Temp char(1) NOT NULL,
    MODAL_PORT_Temp bit NOT NULL,
    LIVRS_EXPRS_Temp bit NOT NULL,
    ENLEV_UNITE_Temp int NOT NULL,
    NBR_COLIS_Temp int NOT NULL,
    POID_Temp decimal(10, 2) NOT NULL,
    ENLEV_CREMB_Temp decimal(10, 2)  NULL,
    ENLEV_DECL_Temp decimal(10, 2)  NULL

  )  

UPDATE ORDRE 
SET STATUT_ORDRE = 2, DATE_CLOTUR = GETDATE(), CHAUFFEUR = @CHAUFFEUR
OUTPUT inserted.NO_ORDRE, inserted.CODE_DEST, inserted.DATE_CLOTUR, inserted.CODE_CLIENT, inserted.MODAL_MODE, inserted.MODAL_PORT,inserted.LIVRS_EXPRS,inserted.ENLEV_UNITE,  inserted.NBR_COLIS,inserted.POID,inserted.ENLEV_CREMB,inserted.ENLEV_DECL INTO @AfterUpdate
WHERE STATUT_ORDRE = 1 AND (TRANSPORTEUR IN (SELECT ParsedString From dbo.ParseStringList(@Trans)))

INSERT INTO LETTRE_VOIT 

OUTPUT inserted.NO_ORDRE

select rsVoit.NOID, NO_ORDRE_Temp, rsOrdre.CODE_DEST_Temp,rsOrdre.DATE_CLOTUR_Temp, rsOrdre.CODE_CLIENT_Temp, rsOrdre.MODAL_MODE_Temp, rsOrdre.MODAL_PORT_Temp,
CASE rsOrdre.MODAL_PORT_Temp
            WHEN 'false' THEN 'Payé'
            ELSE 'Du'
        END, 
rsOrdre.LIVRS_EXPRS_Temp,
CASE rsOrdre.LIVRS_EXPRS_Temp
            WHEN 'false' THEN 'Long'
            ELSE 'Express'
        END, 
  rsOrdre.ENLEV_UNITE_Temp, LIBELLE, NBR_COLIS_Temp,POID_Temp,ENLEV_CREMB_Temp,ENLEV_DECL_Temp
from @AfterUpdate rsOrdre
inner join
(
  select CODE_DEST,MODAL_MODE, MODAL_PORT, LIVRS_EXPRS,ENLEV_UNITE, ROW_NUMBER() over (order by CODE_DEST) as NOID
  from ORDRE
  group by CODE_DEST,MODAL_MODE,MODAL_PORT,LIVRS_EXPRS,ENLEV_UNITE
) rsVoit on rsVoit.CODE_DEST = rsOrdre.CODE_DEST_Temp and rsVoit.MODAL_MODE = rsOrdre.MODAL_MODE_Temp
and rsVoit.MODAL_PORT = rsOrdre.MODAL_PORT_Temp and rsVoit.LIVRS_EXPRS = rsOrdre.LIVRS_EXPRS_Temp
and rsVoit.ENLEV_UNITE = rsOrdre.ENLEV_UNITE_Temp

LEFT JOIN T_UNITE ON rsOrdre.ENLEV_UNITE_Temp = T_UNITE.NOID

order by rsVoit.NOID, NO_ORDRE_Temp 
```

结果是 Pay*，而不是 Payé ， * 是一个方形符号。

提前谢谢你。

PS：我使用 nvarchar 而不是 varchar 类型![nvarchar](../Images/f7be35036ae6b358e5e15fb8aab3b846.png)

当我更改语法时：

```
....
CASE rsOrdre.MODAL_PORT_Temp
            WHEN 'false' THEN N'Payé'
            ELSE 'Du'
        END, 
rsOrdre.LIVRS_EXPRS_Temp,
..... 
```

我有： ![结果](../Images/e50ff8185fe48ae541f93f90c61ce670.png)

当我通过 SQL Profiler 查看时： ![在此处输入图像描述](../Images/7469ca31120557390fcbdb0bd8315976.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:47:32.913

这可能是因为您使用的是`varchar`insead of`nvarchar`吗？`nvarchar`如果要存储 ASCII 以外的字符，则需要使用 SQL 类型 。`nvarchar`存储为 unicode。 [这个 SO 帖子](https://stackoverflow.com/questions/144283/what-is-the-difference-between-varchar-and-nvarchar)涵盖了差异。

**编辑：**由于所讨论的字符位于扩展的 ASCII 集中，因此使用 ASCII 与 unicode 可能不是问题（正如@podiluska 所指出的那样）。

**编辑 2：**您是否检查过 sql 脚本文件的编码（ANSI 与 Unicode？）。看看[这个论坛帖子](http://social.msdn.microsoft.com/forums/en-US/sqldatabaseengine/thread/44b7db5a-d805-42b1-b5a4-9491986a5a1e/)。保存 sql 脚本文件 (UpdateEtClotureList.sql) 时，从保存按钮下拉菜单中选择“使用编码保存”，然后选择 Unicode（代码页 65001）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T08:13:40.317

```
INSERT INTO LETTRE_VOIT (LIB_PORT) VALUES ('Payé') 
```

确实有效，但通常你应该使用：

```
INSERT INTO LETTRE_VOIT (LIB_PORT) VALUES (N'Payé') 
```

用`N`表示它是一个 unicode 字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T08:48:24.163

是否`LoadFileToString`破坏了 SQL？如果打印出来会怎样？你还看到 é 字符吗？

如果将 SQL 更改为

```
WHEN 'false' THEN 'Pay' +CHAR(233) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T08:52:48.623

检查 NVARCHAR 列和 N'' Unicode 字符串文字后，我的猜测是 Outils.LoadFileToString() 没有使用正确的[编码](http://msdn.microsoft.com/en-us/library/system.text.encoding%28v=vs.100%29.aspx)来读取 .sql 文件。

# c++ - 独占打开文件/锁定文件

> ID：11897359
> 
> 赞同：7
> 
> 时间：2012-08-10T07:38:43.570
> 
> 标签：c++, windows, qt, qfile

我想锁定现有文件以防止其他进程使用（读取和写入）。也就是说，通过此进程或任何其他进程打开文件的任何后续尝试都应该失败并出现“拒绝访问”错误。

[CreateFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx) WINAPI 函数有一个参数可以做到这`dwShareMode`一点，我正在寻找类似的功能，同时仍然能够使用`QFile`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-11T17:05:49.700

我发现的一种方法是在打开文件后在底层操作系统句柄上使用[LockFile 。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365202%28v=vs.85%29.aspx)

请注意，`LockFile`它的行为略有不同 - 随后尝试打开成功，但实际读取或写入将失败并显示`ERROR_LOCK_VIOLATION`.

```
#include <windows.h>
#include <io.h>
bool lockFile(QFile *file) {
    return (bool) LockFile((HANDLE) _get_osfhandle(file->handle()), 0, 0, -1, -1);
}
void test() {
    QFile f("test.txt");
    f.open(QIODevice::ReadOnly);
    lockFile(&f);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T07:50:46.737

您是否尝试过使用 Notepad++ 保存（覆盖）？我相信正确的行为是它不会让你写入相同的文件名。打开（阅读）是不可强制执行的；写作才是真正的考验。

# java - 从 HttpResponse 中获取 ETAG 值

> ID：11897363
> 
> 赞同：0
> 
> 时间：2012-08-10T07:38:52.427
> 
> 标签：java, http-headers, httpresponse

获取我们通常使用的内容长度`httpResponse.getEntity().getCotentLength()`。但是要获得 ETAG 是否应该使用`httpResponse.getFirstHeader("ETAG")`？`Content-Length`和都`ETAG`只是响应的标头，访问它们的区别是因为它们`Content-Length`是强制性的但是`ETAG`可选的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T15:24:05.147

是的，内容长度是强制性的，实体标签是可选的，因此您可以通过以下方式获取可选值：httpResponse.getFirstHeader("ETAG")。

# asp.net-mvc - asp .net mvc中的http摘要身份验证

> ID：11897364
> 
> 赞同：3
> 
> 时间：2012-08-10T07:39:04.890
> 
> 标签：asp.net-mvc, security

是否可以使用 asp.net mvc 进行 http 摘要身份验证？如果可能，它是内置的还是需要大量工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:53:24.740

我也在寻找一种在没有 SSL 的情况下保护我的登录页面的方法。摘要似乎是痛苦 HTTP 的最佳解决方案。

这可能是你想要的

[http://httpauthmod.codeplex.com/](http://httpauthmod.codeplex.com/)

# php - MYSQL 和 CI 数据数组

> ID：11897373
> 
> 赞同：0
> 
> 时间：2012-08-10T07:39:42.023
> 
> 标签：php, mysql, codeigniter, model

在我的一个控制器中为我的一般视图页面获取所有数据，我使用了一个 foreach 循环，`$object->column_name`但现在我决定我想用这些数据做几件事：

*   编辑它 -> 它是每个的编辑`$object`页面`$id`
*   通过控制器使用该`$object->name`字段使我能够在`$data['pageTitle']= Edit '.$object->name.';`

更改以下模型的最佳方法是什么，以便我可以将其用于多种目的/显示数据以进行操作的不同方式？

```
public function showAll()
{

    $database = $this->db->get('form');

    if($database->num_rows() > 0)
    {
        $row = $database->result();
    }

    return $row;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:11:57.747

将数据库查询部分保留在模型中而不是控制器中是一种很好的做法。

在您的控制器中，您可以执行以下操作：

```
$recs = $this->sample_model->model_function();
foreach ($recs as $r)
{
    $r->additional_info_appended_to_each_row = 'whatever';
} 
```

通过这种方式，您可以将附加变量附加到每个数据库行以进行显示/编辑等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:07:05.090

该代码并没有真正向我们展示足够的相关代码来回答这个问题。假设`$database->result()`返回一个行数组（数据库查询的结果集），那么它包含的数据取决于查询的外观。你所展示的只是`$this->db->get('form')`，这几乎可以意味着任何事情。

您的问题的一般答案是：更改 SQL 查询以包含 id 和 name 字段。然后通过控制器将它们注入到您的视图中。（或者直接让他们通过视图。这取决于你。）

对控制器或视图一无所知，这是一个假设您的视图扩展 Smarty 模板引擎的示例。

```
public function GeneralController
{
    public function defaultAction()
    {
        $model = new GeneralModel();
        $objects = $model->getAll();

        $view = new GeneralView();
        $view->assign("objects", $objects);
        $view->show();
    }
} 
```

Smarty 模板会在生成 HTML 时使用这些行

```
{foreach $objects as $object}
<section class="object">
    <header>
        <h1>{$object->name}</h1>
    </header>
    <p>{$object->contents}</p>
    <footer>
        <a href="/general/edit/?id={$object->id}">Edit</a>
    </footer>
</section>
{/foreach} 
```

# c - Segmentation Fault ++ 字符上的运算符 *

> ID：11897378
> 
> 赞同：0
> 
> 时间：2012-08-10T07:40:32.367
> 
> 标签：c, segmentation-fault

> **可能重复：**
> [为什么会出现此段错误？](https://stackoverflow.com/questions/3638851/why-does-this-seg-fault)

在 char * 上使用 ++ 运算符时收到分段错误

```
#include<stdio.h>

int main()
{
    char *s = "hello";
    printf("%c ", ++(*s));
    return 0;
} 
```

但是，如果我执行以下操作：

```
#include<stdio.h>

int main()
{
    char *s = "hello";
    char c = *s;
    printf("%c ", ++c);
    return 0;
} 
```

那么代码就完美编译了，上面的代码有什么问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T07:43:22.790

第一个代码片段试图将字符串文字中的字符修改为：

```
++(*s) 
```

正在尝试增加 中的第一个字符`s`。字符串文字（通常）是只读的，尝试修改将导致分段错误（C 标准规定*如果程序尝试修改这样的数组，则行为未定义。*）。

第二个片段正在修改一个`char`变量，该变量不是只读的，如下所示：

```
char c = *s; 
```

`c`是第一个字符的*副本*`s`，`c`可以安全地递增。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T07:42:46.853

在第一种情况下，您修改常量文字，在第二种情况下，您修改变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T07:43:14.970

这段代码：

```
printf("%c ", ++(*s)); 
```

尝试通过指向其中一个字符的指针来修改字符串文字。修改字符串文字是未定义的行为 - 很可能的结果是字符串文字通常存储在只读内存中，因此修改它们在技术上是非法的，这就是它在系统上表现为分段错误的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T07:44:44.460

字符 *s = "你好";

这意味着 's' 是一个 const 字符串。

如果您需要一个非常量字符串，您应该从堆中显式分配它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T07:44:51.290

您试图在第一种情况下更改字符串文字，这是不允许的。在第二种情况下，您从字符串文字的第一个字符创建一个新字符。您修改了该字符的副本，这就是第二种情况起作用的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T07:45:00.400

您的代码对存储字符串文字的段没有写权限。

# jquery - jquery next() 不工作

> ID：11897380
> 
> 赞同：0
> 
> 时间：2012-08-10T07:40:40.187
> 
> 标签：jquery

jquery next() 在我的代码中不起作用。我的html代码是

```
 <a class="reply">Reply</a> 
 <div class="respond" style="display:none;">respond 1</div>      
 <a class="reply">Reply</a>
 <div class="respond" style="display:none;">respond  2</div> 
 <a class="reply">Reply</a> <
 div class="respond" style="display:none;">respond  2</div> 
```

我的jQuery代码是

```
$('.reply').click(function(e){
      e.preventDefault();
      $(this).next().show();
}); 
```

但它不工作。请给我一个解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:10:52.970

执行顺序很重要。如果您的 jQuery 代码在定义元素的 HTML 之前出现，那么代码将在这些元素存在之前运行，因此实际上不会绑定任何事件处理程序。在这些情况下，您需要使用 jQuery[`.ready()`](http://api.jquery.com/ready/)函数为 DOM 就绪事件绑定事件处理程序，以便在绑定事件处理程序时保证元素存在。

```
$(document).ready(function() {
    $('.reply').click(function(e){
        e.preventDefault();
        $(this).next().show();
    });
}); 
```

# php - 如何使用 Google Maps API 显示一个位置的多个标记？

> ID：11897382
> 
> 赞同：1
> 
> 时间：2012-08-10T07:41:08.920
> 
> 标签：php, google-maps

我正在帮助一位同事构建一个项目，该项目允许人们说出他们要去（或去过）的地方，我们遇到了一个问题，如果两个人去同一个地方，只显示一个标记。

然后我们在 Facebook 上查看，我们注意到不是在一个位置显示多个标记，而是显示一个带有数字的圆圈，该数字表示那里有多少个标记，如下图所示：

![在此处输入图像描述](../Images/98b7b716fb07adedea9fe7101f6fce5c.png)

我们如何为我们自己的项目复制它？我们正在使用 Google Maps API。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T07:47:42.783

您可以使用您想要的任何图像作为标记，请参阅[https://developers.google.com/maps/documentation/javascript/reference#Marker](https://developers.google.com/maps/documentation/javascript/reference#Marker)

您可以使用诸如[http://doamin.tld/marker.php?number=42 之](http://doamin.tld/marker.php?number=42)类的 URL作为标记，脚本在其中生成标记图像（可能有一些缓存），或者预先生成所有可能的标记。

另一种解决方案是使用 svg 使用 markerShapes 定义标记图像，请参阅[https://developers.google.com/maps/documentation/javascript/reference#MarkerShape](https://developers.google.com/maps/documentation/javascript/reference#MarkerShape)和标记的 setShape 方法。

# filter - LDAP 过滤器 - 列出特定 OU 中的所有用户

> ID：11897384
> 
> 赞同：1
> 
> 时间：2012-08-10T07:41:16.533
> 
> 标签：filter, ldap

我需要显示特定 OU 中的所有用户。

我使用了下面的过滤器，但它不起作用。

```
(&(objectCategory=user)(ou=_Dorset,dc=andy,dc=com)) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:08:36.890

要显示 下属的所有条目`ou=_dorset`，请使用以下参数向服务器发送搜索请求：

*   基础对象：`ou=_Dorset,dc=andy,dc=com`
*   搜索范围：子树
*   筛选：`(objectCategory=user)`
*   要检索的属性列表

# selenium - 当目标元素和目标元素在不同的帧中时，如何使用 selenium-webdriver 执行拖放？

> ID：11897385
> 
> 赞同：14
> 
> 时间：2012-08-10T07:41:35.003
> 
> 标签：selenium, selenium-webdriver, automated-tests, aem

我必须将图像拖放到 CQ5 组件中。图像和组件位于不同的帧中。

这是在`destination`目标框架处于活动状态时无法找到 webelement 的代码。

`new Actions(driver).dragAndDrop(target, destination).perform();`

我还尝试在操作之间切换框架：

```
 Actions builder = new Actions(driver);
    Actions action = builder.clickAndHold(target);
    driver.switchTo().frame("newFrame"); //switching frames
    builder.moveToElement(destination);
    builder.release(destination);
    builder.build();
    action.perform(); 
```

这也不起作用。然后，我尝试通过偏移移动图像

```
new Actions(driver).dragAndDropBy(target,  x, y).perform(); // x and y 
```

这移动了图像，但组件没有捕获它，可能是因为动作太快了。有什么办法可以做到这样的拖放吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T11:26:50.073

你需要把它分成两部分。

```
// grab your element
Actions builder = new Actions(driver);
Actions action = builder.clickAndHold(target);
builder.build();
action.perform();

// switch to the frame (you havent told webdriver to un-grab
driver.switchTo().frame("newFrame"); //switching frames

// move and drop
Actions builder = new Actions(driver);
Actions action = builder.moveToElement(destination);
builder.release(destination);
builder.build();
action.perform(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T00:05:23.130

selenium / webdriver拖放似乎存在一些问题。我已经向 selenium 的人提交了一个缺陷，[http://code.google.com/p/selenium/issues/detail ?id=4420](http://code.google.com/p/selenium/issues/detail?id=4420)

希望我们能得到一些积极的回应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-28T18:44:32.090

有人找到 Adob​​e CQ 5.5 的解决方案吗？

我在使用 adobe CQ 5.5 时遇到了同样的问题，我尝试了多种不同的方法，我可以将图像放到拖放区，但是一旦出现，图像似乎仍然不活跃并且丢弃它没有意义。我发现这是因为鼠标指针没有随图像移动，这就是为什么丢弃没有意义。我添加了将鼠标移动到放置区域的代码，但看起来命令是单独工作的，所以仍然无法放置，请提供任何建议。

这是我的代码（不适用于 CQ 5.5）

```
String handle = driver.getWindowHandle(); // for main window 
```

// 切换到窗口以能够选择图像

```
driver.switchTo().window(handle);
WebElement dragble = driver.findElement(By.xpath("//xpath"));

Actions builder = new Actions(driver);
builder.clickAndHold(dragble);
Action action2 = builder.build();
action2.perform(); 
```

// 然后，切换到 iframe

```
driver.switchTo().frame("cq-cf-frame");
WebElement droppable = driver.findElement(By.cssSelector("#cssSelector of droppable")); 
```

// 机器人将鼠标指向可放置区域

```
Point coordinates = driver.findElement(By.cssSelector("#cssSelector of droppable")).getLocation();
Robot robot = new Robot(); 
```

// 查找可放置元素的位置

```
int x = driver.findElement(By.cssSelector("#ext-comp-1271")).getLocation().getX();
int y = driver.findElement(By.cssSelector("#ext-comp-1271")).getLocation().getY(); 
```

// 将可拖动对象移动到可放置对象

```
builder = new Actions(driver);
builder.moveByOffset(x,y).perform().
builder.build();
builder.release();
robot.mouseMove(coordinates.getX(),coordinates.getY()+120);
builder.release(droppable).perform(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-24T14:34:16.270

我和你有同样的prb。我不能将两个元素从一帧拖放到花药。ansers 鞋面是正确的，但从 selenium 3 开始，这个解决方案不再有效。工作箭头是将源元素（在 clickAndHol 之后）移动到位置 0,0，然后将其移动到第二帧下。例如 150,150。

```
 Actions builder = new Actions(driver);
 // switsh to the source frame
 driver.switchTo().frame("sourceFrame");
 // take the element with mouse 
 builder.clickAndHold(sourceElt).build().perfom();
 // move mouse to the top of the source frame
 builder.moveToElement(sourceElt, 0, 0 ).build().perfom();
 // move the mouse under the target frame (specific to your case)
 builder.moveToElement(sourceElt, 150,200).build().perfom();
 // switsh to the target frame
 driver.switchTo().frame("targetFrame");
 builder.moveToElement(targetElt).build().perform();
 builder.release(target).build().perform(); 
```

希望我也能帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T09:22:55.167

This code works on CQ 5.5

```
driver.switchTo().defaultContent();

Actions builder = new Actions(driver);
builder.clickAndHold(target);
Action action = builder.build();
action.perform();

driver.switchTo().frame("cq-cf-frame");
builder.moveToElement(destination);
builder.release(destination);     
action = builder.build();
action.perform(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-20T21:56:25.853

下面的代码有效，希望对您有所帮助：

```
WebElement dragElement = (WebElement) elements.get(sourceElement);
Actions builder = new Actions(driver);          
Actions action = builder.clickAndHold(dragElement);
action.build().perform();
driver.switchTo().frame("cq-cf-frame");   
WebElement dropElement = driver.findElement(By.id("ext-comp-1411"));
builder.moveToElement(dropElement).build().perform();
//click the destination 
builder.click(dropElement).build().perform();
//back to main page to release the hold mouse
driver.switchTo().defaultContent();
builder.release(dragElement).build().perform(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-23T12:54:04.373

以上发布的解决方案在 CQ 5.5 和 CQ 5.6 下对我不起作用

这有效：

```
 Actions builder = new Actions(driver);
    builder.clickAndHold(sideKickComponent);
    Action action = builder.build();
    action.perform();

    driver.switchTo().frame("cq-cf-frame");
    builder = new Actions(driver);
    builder.moveToElement(destination).perform();
    builder.build();
    builder.release();
    builder.release(destination).perform(); 
```

此方法允许方便的组件放置：

```
public void addComponentByDragAndDrop(String sideKickComponentName, WebElement destination){
        driver.switchTo().defaultContent();
        WebElement sidekick = driver.findElement(By.id("cq-sk"));
        List<WebElement> components =sidekick.findElements(By.tagName("button"));
        WebElement sideKickComponent = null;
        for (WebElement webElement : components) {
            if (webElement.getText().equals(sideKickComponentName)) {
                sideKickComponent = webElement;
                break;
            }
        }
        if (sideKickComponent == null) {
            fail("SideKick component with the name: "+sideKickComponentName + " was not found.");
        }
        Actions builder = new Actions(driver);
        builder.clickAndHold(sideKickComponent);
        Action action = builder.build();
        action.perform();

        driver.switchTo().frame(Consts.CQ_MAIN_FRAME);
        builder = new Actions(driver);
        builder.moveToElement(destination).perform();
        builder.build();
        builder.release();
        builder.release(destination).perform();     
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-27T08:09:40.527

```
String source = "xpath_of_source";
String destination = "xpath_of_destination";

// grab your element
Actions builder = new Actions(driver);
Actions action = builder.clickAndHold(driver.findElement(By.xpath(source)));
builder.build();
action.perform();

// switch to the frame
driver.switchTo().frame("newFrame"); //switching frames

// move and drop
builder = new Actions(driver);
action = builder.moveToElement(driver.findElement(By.xpath(destination)));
builder.release(driver.findElement(By.xpath(destination)));
builder.build();
action.perform(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-16T15:28:43.470

创建动作类的对象

```
Actions act=new Actions(driver); 
```

找到我们需要拖动的元素 xpath

```
WebElement drag=driver.findElement(By.xpath("put x path")); 
```

找到我们需要放置的元素 xpath

```
WebElement drop=driver.findElement(By.xpath("put x path")); 
```

将元素拖到目的地

```
act.dragAndDrop(drag, drop).build().perform(); 
```

要在 CQ 中使用拖放功能，请先使用双击功能并放置任何组件，然后尝试上述方法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-03T04:29:42.617

要从一个 iframe 拖放到另一个 iframe，您需要在源 Web 元素的 iframe 中引用您的所有操作。为此，您应该获取目标 iframe 的父级并使用它进行操作，即 CqFrameParent，它是具有目标 iframe 的 div。

由于源和目标属于单个 iframe，因此无需进行 iframe 的切换即可。 

```
builder.moveElement(CqFrameParent(), targetX, targetY).build().perform();
builder.release().build().perform(); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-11-30T12:57:34.383

Selenium webdriver 提供拖放功能。尝试这个

```
WebElement element = driver.findElement(By.name("source"));
WebElement target = driver.findElement(By.name("target"));

(new Actions(driver)).dragAndDrop(element, target).perform(); 
```

# c# - 在 MVC3 中回发时如何设置 DropDown 的默认值

> ID：11897386
> 
> 赞同：0
> 
> 时间：2012-08-10T07:41:35.737
> 
> 标签：c#, asp.net-mvc-3

我正在使用 MVC3，我有一个下拉列表，我需要从数据库中设置默认值。

当我在下拉列表中选择一个值时，我得到一个回发，即使在回发之后，我选择的值也被选中。如何在回发后再次获取默认值 <--Select Project--> 作为选定值？这在 MVC 中是如何完成的？

下面是我使用的控制器和视图。

**我的模特**

```
namespace BugTracker.Models
{
    public class BugModel
    {
        public List<BugModel> InsertBug {get; set;}
        public List<BugModel> Bugs { get; set; }
        public Int16 BugID { get; set; }
        [Required(ErrorMessage = "Title is required")]
        public string Title { get; set; }
        [Required(ErrorMessage = "Description is required")]
        public string Description {get; set;}
        [Required(ErrorMessage = "Version is required")]
        public string Version { get; set; }
        [Required(ErrorMessage = "BuildNumber is required")]
        public string BuildNumber { get; set; }
        [Required(ErrorMessage = "CreatedDate is required")]
        public string CreatedDate { get; set; }
        [Required(ErrorMessage = "GetDate is required")]
        public string GetDate { get; set; }

        public List<BugModel> GetProjects { get; set; }
        public int ProjectID { get; set; }
        [Required(ErrorMessage = "ProjectName is required")]
        public string ProjectName { get; set; }

        public List<BugModel> GetEmployee {get; set;}
        public int EmployeeID { get; set; }
        public int CreatedByID { get; set; }
        [Required(ErrorMessage = "EmployeeName is required")]
        public string EmployeeName {get;set;}
        [Required(ErrorMessage = "CreatedBy is required")]
        public string CreatedBy { get; set; }

        public List<BugModel> GetCategory { get; set;}
        public int CategoryID { get; set; }
        [Required(ErrorMessage = "Category is required")]
        public string Category { get; set;}

        public List<BugModel> GetSeverity { get; set;}
        public int SeverityID { get; set; }
        [Required(ErrorMessage = "Severity is required")]
        public string Severity { get; set; }

        public List<BugModel> GetPriority { get; set; }
        public int PriorityID { get; set; }
        [Required(ErrorMessage = "Prirority is required")]
        public string Prirority { get; set;}

        public List<BugModel> GetReleasePhase { get; set;}
        public int ReleasePhaseID { get; set; }
        [Required(ErrorMessage = "ReleasePhase is required")]
        public string ReleasePhase { get; set;}

        public List<BugModel> GetTypes { get; set; }
        public int TypeID { get; set; }
        [Required(ErrorMessage = "Type is required")]
        public string Type { get; set; }
 public List<BugModel> GetBugHistory { get; set; }    
        [Required(ErrorMessage = "AssignTo is required")]
        public string AssignTo { get; set; }

    }
} 
```

**我的控制器是**

```
[AcceptVerbs(HttpVerbs.Post)]    
public ActionResult BugDetails(FormCollection form,string Projects,string Prirority,string CreatedBy,BugModel model)    
{
    var modelList = new List();    
    ViewBag.Projects = new SelectList(GetProjects(), "ProjectId", "ProjectName");    
    ViewBag.Prirority = new SelectList(GetPriority(), "PriorityID", "Prirority");    
    ViewBag.CreatedBy = new SelectList(GetEmployee(), "EmployeeID", "EmployeeName");    
    using (SqlConnection conn = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=BugtrackerNew;Data Source=SSDEV5-HP\SQLEXPRESS"))    
    {    
        SqlCommand dCmd = new SqlCommand("Filter", conn);    
        dCmd.CommandType = CommandType.StoredProcedure;    
        conn.Open();    
        dCmd.Parameters.Add(new SqlParameter("@ProjectID", Projects));    
        dCmd.Parameters.Add(new SqlParameter("@PriorityID",Prirority));    
        dCmd.Parameters.Add(new SqlParameter("@CreatedByID",CreatedBy));    
        SqlDataAdapter da = new SqlDataAdapter(dCmd);    
        DataSet ds = new DataSet();    
        da.Fill(ds);
        for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)    
        {
            model.BugID = Convert.ToInt16(ds.Tables[0].Rows[i]["BugID"]);    
            model.Title = ds.Tables[0].Rows[i]["Title"].ToString();    
            model.Description = ds.Tables[0].Rows[i]["Description"].ToString();            
            conn.Close();             
           return View(modelList);
        }
    } 
```

**我的查看页面是**

```
using (Html.BeginForm())    
{ %>   

    <%: Html.DropDownList("Projects", (SelectList)ViewBag.Projects)%>    

    <%: Html.DropDownList("Prirority", (SelectList)ViewBag.Prirority, "Select Project")%>  

    <%: Html.DropDownList("CreatedBy", (SelectList)ViewBag.CreatedBy, "--Select Project--")%>
} 
```

当页面从回发返回时，我希望选择默认值，但在 MVC 中没有页面加载方法。所以，请有人指出我正确的方向。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:31:32.117

通过使用 DropDownListFor()，您可以将想要的项目传递到您视图上的模型中。

例子：

```
@{ var projects= (IEnumerable<Projects>)ViewBag.Projects; }

@Html.DropDownListFor(m => m.ProjectId, projects, string.Empty) 
```

简而言之，使用您的模型来确定下拉列表中的选定值，通过您的 viewbag 提供可能的值。如果模型上的属性是属性类型的默认值，则下拉列表将显示列表的第一个值以及可能的值。

# php - MP4 视频在通过 php readfile() 传递后无法在 MAC 上的 Quicktime 中播放

> ID：11897389
> 
> 赞同：0
> 
> 时间：2012-08-10T07:41:43.677
> 
> 标签：php, video-streaming, readfile

我花了几天时间寻找解决这个问题的方法，但我尝试的方法都没有。情况如下：我们在 Cloudfront 上托管了许多视频，并通过我们的网站流式传输这些视频。（奇迹般有效）

高级会员需要选择下载一些视频，但是，我们无法显示实际 URL。出于这个原因，我们设置了以下脚本，它从我们的 Cloudfront URL 读取视频并将其传递给服务器，从而有效地隐藏其位置。

这是奇怪的部分：虽然这对某些视频效果很好，但其他视频（具有相同编码）不会在 Apple 的 Quicktime 播放器中播放，说格式无法识别。如果我在 VLC 中打开文件，它工作得非常好，但苹果正在行动。

自然地，我尝试直接从它的 URL 下载文件，它在 Quicktime 中运行良好。此外，直接下载和 readfile passthru 中的标头都是相同的。

奇怪的是，正如我所说，其他分辨率较低的视频使用该脚本可以正常工作。不过，我找不到任何理由说明解决方案会对此产生影响。其他一切都是平等的。视频以 H.264 格式编码并存储在 MP4 容器中。

关于我可以做些什么来解决这个问题的任何想法？

非常感谢

```
header('Content-Description: File Transfer');
header('Content-Type: video/mp4'); //tried multiple options here, none work
header('Content-Disposition: attachment; filename=asciifriendly-filename.mp4');
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: 1234567890'); //this number IS correct. 100%
ob_clean();
flush();

readfile ( $url );  //points to Cloudfront server 
```

# hibernate - java.lang.ClassCastException：[Ljava.lang.Object；无法转换为 com.sx.mcqs.model

> ID：11897390
> 
> 赞同：1
> 
> 时间：2012-08-10T07:41:46.673
> 
> 标签：hibernate

```
questions=dao.getNamedQueryResultList("getUnansweredQuestionsByCategory", new Object[]{strUser});

    for(Question selectedResumes:questions) {
          //do something with the SelectedResumes object
        System.out.println("Unanswered::"+selectedResumes.getQuestion());
    } 
```

==================================================== =====================-

出现以下错误：

> java.lang.ClassCastException：[Ljava.lang.Object；无法在 com.sx.mcqs.service.QuestionService$$FastClassByCGLIB$$cd78275c.invoke 的 com.sx.mcqs.service.QuestionService.findRelatedQuestionsGame(QuestionService.java:142) 上转换为 com.sx.mcqs.model.Question () 在 net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191) 在 org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689) 在 org.springframework.aop.framework .ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) 在 org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) 在 org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) 在org.springframework.aop.framework。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:59:11.873

上面的代码假定命名查询返回一个问题列表，但它返回一个对象数组。要返回问题列表，查询应如下所示

```
select question from Question question ... 
```

但查询可能看起来像

```
select question.foo, question.bar, ... 
```

没有看到执行的查询，很难给出更详细的答案。

# eclipse-plugin - 在 Eclipse 中自定义通用导航器框架

> ID：11897393
> 
> 赞同：0
> 
> 时间：2012-08-10T07:41:58.510
> 
> 标签：eclipse-plugin, eclipse-rcp

我正在开发 Eclipse 应用程序。我正在使用通用导航器框架。如何从 Common Navigator Framework 中删除自定义视图的选项？

如果您需要有关我的问题的任何其他信息，请告诉我。

问候， 普里扬克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:40:28.167

我找到了解决方案。扩展 CommonNavigator 类并覆盖函数 createCommonActionGroup，如下所述：

```
@Override
protected ActionGroup createCommonActionGroup() {
    return new ActionGroup() {
    };  
} 
```

# php - 在 2 个下拉菜单之间进行验证，因此只能选择一个 php

> ID：11897394
> 
> 赞同：0
> 
> 时间：2012-08-10T07:42:00.793
> 
> 标签：php, mysql, validation, drop-down-menu

我有一个脚本，用户在该脚本下面记录一个 php 表单。

有一个部分有 2 个下拉菜单，“npc_battery_n_code”和“npc_battery_other_code”。

我要做的是使这些下拉菜单之一必须为要提交的表单选择一个选项，但不能同时选择两者或都不选择。

例如，如果在“npc_battery_n_code”中选择了一个选项，然后用户在“npc_battery_other_code”中选择了另一个选项，那么“npc_battery_n_code”的值将恢复为“None”选项。

欢迎任何建议

```
 <?php //logsale.php
     require_once ('./includes/config.inc.php');
     $page_title = 'Log a sale';
     include ('./includes/header.html');

     if (!isset($_SESSION['sp_user_id'])) {

     $url = 'http://' . $_SERVER['HTTP_HOST']
     . dirname($_SERVER['PHP_SELF']);
     // Check for a trailing slash.
     if ((substr($url, -1) == '/') OR (substr($url, -1) == '\\') ) {
     $url = substr ($url, 0, -1); // Chop off the slash.
     }
     $url .= '/login.php'; 

     ob_end_clean(); // Delete the buffer.
     header("Location: $url"); 
     exit(); // Quit the script.
     }
     $users = $_SESSION['sp_user_id'];
     ?>

     <h1>Heading</h1>

     <?php

     if (isset($_POST['submitted'])) {// Handle the form.

     require_once ('mydatabase.php');

     if (!empty($_POST['npc_quantity'])) {
     $quantity = escape_data($_POST ['npc_quantity']);
     } else {
     $quantity = FALSE;
     echo '<p><font color="red">You forgot to enter the Quantity</font></p>';
     }  

     if (!empty($_POST['npc_customer_name'])) {
     $customer = escape_data($_POST ['npc_customer_name']);
     } else {
     $customer = FALSE;
     echo '<p><font color="red">You forgot to enter the Customer Name</font></p>';
     }  

     if (!empty($_POST['npc_registration_no'])) {
     $rego = escape_data($_POST ['npc_registration_no']);
     } else {
     $rego = FALSE;
     echo '<p><font color="red">You forgot to enter the Customer Rego Number</font></p>';
     }  

     if (!empty($_POST['npc_suo_no'])) {
     $suo = escape_data($_POST ['npc_suo_no']);
     } else {
     $suo = FALSE;
     echo '<p><font color="red">You forgot to enter the SUO Number</font></p>';
     }  

     if (!empty($_POST['npc_amb_club_no'])) {
     $repair_order = escape_data($_POST ['npc_amb_club_no']);
     } else {
     $repair_order = FALSE;
     echo '<p><font color="red">You forgot to enter the A-Club number</font></p>';
     }  

     if (!empty($_POST['npc_repair_order'])) {
     $amb_club = escape_data($_POST ['npc_repair_order']);
     } else {
     $amb_club = FALSE;
     echo '<p><font color="red">You forgot to enter the Repair Order</font></p>';
     }  

     if (!empty($_POST['npc_invoice_no'])) {
     $inv = escape_data($_POST ['npc_invoice_no']);
     } else {
     $inv = FALSE;
     echo '<p><font color="red">You forgot to enter the Invoice Number </font></p>';
     }  

     if (!empty($_POST['npc_entry_userdate'])) {
     $inv_date = escape_data($_POST ['npc_entry_userdate']);
     } else {
     $inv_date = FALSE;
     echo '<p><font color="red">You forgot to enter the Invoice Date</font></p>';
     }

     if ($quantity && $customer && $rego && $suo && $repair_order && $amb_club && $inv && $inv_date)  {

     $uid = @mysql_insert_id(); //Get the url ID.
     $query = "INSERT INTO npc_sales_list 
     (npc_item_id , sp_user_id, npc_battery_n_code, npc_battery_other_code, npc_quantity, 
     npc_customer_name, npc_registration_no, npc_suo_no, npc_amb_club_no, npc_repair_order,
     npc_entry_userdate, npc_usertype, npc_points, npc_bonus_points, npc_entry_date)
     VALUES
     ('$uid', '$users', '$_POST[npc_battery_n_code]', '$_POST[npc_battery_other_code]', '$quantity',
     $customer , $rego, $suo, $amb_club , $repair_order, 
     $inv , 'NPC', '5' , '0' , NOW())";
     $result = mysql_query ($query) or trigger_error
     ("Query: $query\n<br />MySQL Error: " .mysql_error());

     if ($result = @mysql_query($query)) {

     //Finish the page.
     echo '<p>The sale with invoice number: <strong>' . $inv . '</strong>       <br />
     is now registered into the system.</p>
     <p>If you would like to log in further sales, please <a href="logsale.php">click here</a></p>
     <p>If you would like to view your sales log, please <a href="viewsales.php">click here</a></p>
     ';
     include ('./includes/footer.html'); // Include the HTML footer.
     exit();

     } else { // If it did not run OK.
     echo '<p><font color="red" size="+1">You could not be
     registered due to a system error. We apologize for any
     inconvenience.</font></p>';
     }

     } 

     } else { // If one of the data tests failed.
     echo '<p><font color="red" size="+1">Please check all manatory fields are complete and try again.
     </font></p>';
     }

     mysql_close(); // Close the database connection.

     ?>                         

     <form enctype="multipart/form-data" action="logsale.php" method="post">

     <table width="520" border="0" cellspacing="3" cellpadding="2">

     <tr>
     <td width="184"><div align="right">NPC Vehicle<span class="style2">*</span></div></td>
     <td width="323"><select  name="npc_battery_n_code" id="npc_battery_n_code">
     <option value="None" 
     <?php if (isset($_POST['npc_battery_n_code']) && $_POST['npc_battery_n_code'] == 'None') 
     {echo 'selected="selected"';} ?>>None
     </option>
     <option value="55D23L" 
     <?php if (isset($_POST['npc_battery_n_code']) && $_POST['npc_battery_n_code'] == '55D23L') 
     {echo 'selected="selected"';} ?>>55D23L
     </option>
     <option value="55D23R" 
     <?php if (isset($_POST['npc_battery_n_code']) && $_POST['npc_battery_n_code'] == '55D23R') 
     {echo 'selected="selected"';} ?>>55D23R
     </option>                                
     <option value="75D23R" 
     <?php if (isset($_POST['npc_battery_n_code']) && $_POST['npc_battery_n_code'] == '75D23R') 
     {echo 'selected="selected"';} ?>>75D23R
     </option>
     </select></td>
     </tr>

     <tr>
     <td width="184"><div align="right">Other <span class="style2">*</span></div></td>
     <td width="323">
     <select  name="npc_battery_other_code" id="npc_battery_other_code">
     <option value="50D20L" 
     <?php if (isset($_POST['npc_battery_other_code']) && $_POST['npc_battery_other_code'] == '50D20L') 
     {echo 'selected="selected"';} ?>>50D20L
     </option>
     <option value="50D20R" 
     <?php if (isset($_POST['npc_battery_other_code']) && $_POST['npc_battery_other_code'] == '50D20R') 
     {echo 'selected="selected"';} ?>>50D20R
     </option>
     <option value="55D23LMF" 
     <?php if (isset($_POST['npc_battery_other_code']) && $_POST['npc_battery_other_code'] == '55D23LMF') 
     {echo 'selected="selected"';} ?>>55D23LMF
     </option>
     <option value="55D23RMF" 
     <?php if (isset($_POST['npc_battery_other_code']) && $_POST['npc_battery_other_code'] == '55D23RMF') 
     {echo 'selected="selected"';} ?>>55D23RMF
     </option>
     </select></td>
     </tr>

     <tr>
     <td><div align="right">Quantity <span class="style2">*</span></div></td>
     <td><input type="text" name="npc_quantity" size="10" maxlength="10" 
     value="<?php if (isset($_POST['npc_quantity'])) echo $_POST['npc_quantity']; ?>" /></td>
     </tr>

     <tr>
     <td><div align="right">Customer name<span class="style2">*</span></div></td>
     <td><input type="text"  name="npc_customer_name" size="30" maxlength="30" 
     value="<?php if (isset($_POST['npc_customer_name'])) echo $_POST['npc_customer_name']; ?>" /></td>
     </tr>

     <tr>
     <td><div align="right">Rego number <span class="style2">*</span></div></td>
     <td><input type="text" name="npc_registration_no" size="10" maxlength="7" 
     value="<?php if (isset($_POST['npc_registration_no'])) echo $_POST['npc_registration_no']; ?>" /></td>
     </tr>

     <tr>
     <td><div align="right">SUO No.<span class="style2">*</span></div></td>
     <td><input type="text" name="npc_suo_no" size="10" maxlength="7" 
     value="<?php if (isset($_POST['npc_suo_no'])) echo $_POST['npc_suo_no']; ?>"/></td>
     </tr>

     <tr>
     <td><div align="right">A-Club ID<span class="style2">*</span></div></td>
     <td><input type="text" name="npc_amb_club_no" size="15" maxlength="7" 
     value="<?php if (isset($_POST['npc_amb_club_no'])) echo $_POST['npc_amb_club_no']; ?>"/></td>
     </tr>

     <tr>
     <td><div align="right">Repair Order <span class="style2">*</span></div></td>
     <td><input type="text" name="npc_repair_order" size="15" maxlength="12" 
     value="<?php if (isset($_POST['npc_repair_order'])) echo $_POST['npc_repair_order']; ?>" /></td>
     </tr>

     <tr>
     <td><div align="right">Invoice No. <span class="style2">*</span></div></td>
     <td><input size="10" name="npc_invoice_no" 
     value="<?php if (isset($_POST['npc_invoice_no'])) echo $_POST['npc_invoice_no']; ?>" /></td>
     </tr>

     <tr>
     <td><div align="right">Invoice Date <span class="style2">*</span></div></td>
     <td><input size="12" name="npc_entry_userdate" maxlength="10" 
     value="<?php if (isset($_POST['npc_entry_userdate'])) echo $_POST['npc_entry_userdate']; ?>"/>  </td>
     </tr>

     <tr>
     <td></td>
     <td><input type="submit" name="submit" value="Submit" /></p><input type="hidden" name="submitted" value="TRUE" />
     &nbsp;</td>
     </tr>
     </table>
     </form>

     <p>Footer</p>

     <?php
     include ('./includes/footer.html');
     ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:01:17.887

[jquery：选择和取消选择列表框的项目](https://stackoverflow.com/questions/1582361/jquery-select-and-unselect-items-of-listbox)是您正在寻找的。

PHP 或 Mysql 无法实现您希望脚本的工作方式。您只能在网站加载时使用数据。如果你想在不刷新页面的情况下编辑数据，你需要使用 JavaScript，或者更高级的 jQuery。

# html - 如何使用 HTML5 使文件夹 URL 脱机？

> ID：11897396
> 
> 赞同：0
> 
> 时间：2012-08-10T07:42:24.113
> 
> 标签：html, offline, offline-caching, cache-manifest

我的 Web 应用程序仅使用文件夹 url（使用 mvc 路由）。我想知道如何缓存其中一些 url，尤其是站点根目录。

```
CACHE MANIFEST
/
.
/myfolder
/myfolder/
myfolder 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:27:02.867

你所拥有的应该工作。你测试过吗？[它在http://manifest-validator.com/](http://manifest-validator.com/)中验证良好（我不确定“。” - 我认为它是多余的）。

我认为只需 /myfolder 就可以了。

要进行测试，只需启动 javascript 控制台从 chrome 打开应用程序。您将看到各种缓存操作。

格雷格

# c# - 使用 jquery 更改图像 src

> ID：11897399
> 
> 赞同：-3
> 
> 时间：2012-08-10T07:42:38.137
> 
> 标签：c#, javascript, jquery, asp.net-mvc, asp.net-mvc-3

我有这个代码：

```
function EnableiPad(event) {
    var id = $(event.currentTarget).attr("data-id");
    var status = $(event.currentTarget).attr("data-status");    
    $.post("/Ipad/ChangeStatus", { id: id, enable: status }, onAjaxSuccess);
};
function onAjaxSuccess(data) {
    var status = $(".button-enable").attr("data-status");

    if (status == 'true') 
    {
        $('#statusImg').attr("src", '/Content/img/disable.png');
    }
    else 
    {
        $('#statusImg').attr("src", '/Content/img/enable.png');
    }
} 
```

但它不会改变形象 -`$('#statusImg').attr("src", '/Content/img/disable.png');`

**更新**

这是我的图片：

```
@if (iPad.Enabled)
{
    <button  class="button-enable" data-original-title="Show timetable"  data-id="@iPad.Id" data-status="false" class="btn btn-mini" style="border: 0; background: transparent; box-shadow: none; padding: 0;">
        <img id="status" width="24" height="24" alt="Delete doctor" src="/Content/img/enable.png" />
    </button>
}
else
{ 
    <button id="statusDisable" class="button-enable" data-original-title="Show timetable"  data-id="@iPad.Id" data-status="true" class="btn btn-mini" style="border: 0; background: transparent; box-shadow: none; padding: 0;">
        <img id="status" width="24" height="24" alt="Delete doctor" src="/Content/img/disable.png" />
    </button>
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T08:01:09.830

**你的 img 标签的id**是状态，所以它应该是：

```
$('#status').attr("src", '/Content/img/disable.png'); 
```

# javascript - submit() 第一次在 Rails 中不工作

> ID：11897400
> 
> 赞同：0
> 
> 时间：2012-08-10T07:42:39.997
> 
> 标签：javascript, ruby-on-rails, ruby, spree, thickbox

我正在开发一个电子商务网站..现在我被卡住了..当我提交表单时，它不会在第**一次点击**时提交，我需要再次点击才能让它工作.. . 我已经使用锚标签提交我的数据bcoz我想显示thickbox（iframe）内的数据......

```
 View file
  <%= form_for :order, :url => populate_orders_url ,:html => { :class => "data# product.id}"},:method => "post",:remote => true do |f| %>

 // data 
//submit button

    <a href="/cart?KeepThis=true&TB_iframe=true&height=380&width=1000&modal=false"  onclick="$('.data<%= product.id %>').submit().trigger.reload();"   class="thickbox cart_button"></a>

 orders controller.rb
 def populate
  @order = current_order(true)

  params[:products].each do |product_id,variant_id|
    quantity = params[:quantity].to_i if !params[:quantity].is_a?(Hash)
    quantity = params[:quantity][variant_id].to_i if params[:quantity].is_a?(Hash)
    @order.add_variant(Variant.find(variant_id), quantity, ad_hoc_option_value_ids, product_customizations) if quantity > 0
  end if params[:products]

  params[:variants].each do |variant_id, quantity|
    quantity = quantity.to_i
    @order.add_variant(Variant.find(variant_id), quantity, ad_hoc_option_value_ids, product_customizations) if quantity > 0
  end if params[:variants]

  fire_event('spree.cart.add')
  fire_event('spree.order.contents_changed')

  redirect_to cart 

end 
```

我在萤火虫中看到并处理了填充方法，但它没有将数据发送到购物车，它显示我的购物车是空的......并且购物车正在处理......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:36:48.600

您正在发送**ajax 请求**，从表单中删除`:remote => true`选项并检查。

# mysql - CakePHP 下拉列表用户名和公司名称

> ID：11897402
> 
> 赞同：1
> 
> 时间：2012-08-10T07:42:43.287
> 
> 标签：mysql, forms, list, cakephp, dropdownbox

嘿有一个页面，允许企业向客户（个人和其他企业）发送发票。收件人输入字段允许用户选择将发票发送给哪个客户。目前下拉列表列出了企业，但我们希望该列表也包括个人（用户模型/表）。因此，如果帐户（帐户模型/表）没有 company_name，则显示用户的用户名。

以下是我试图让它工作的内容，没有给出错误，但没有在下拉列表中显示任何内容。我怎样才能实现我们想要的？

发票控制器：

```
$name = "";
if ('Account.company_name' != null) {
    $name = 'Account.company_name';
} else {
    $name = 'User.username';
}

$accounts2 = $this->User->find('list', array(
    'fields' => array('account_id'), 'conditions' => array(
        'id' => $this->Auth->user('id'))));

$accounts = $this->User->Relationship->find('list', array(
    'fields' => array('receiver_id'),
    'conditions' => array('sender_id' => $accounts2)));

$receivername = $this->Account->find('list', array(
    'fields' => array($name),
    'conditions' => array(
        'id' => $accounts))); 
```

看法：

```
echo $this->Form->input('receiver_id', array(
    'label' => 'Receiver: ',
    'type' => 'select',
    'options' => $receivername)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:40:10.997

```
'Account.company_name' != null 
```

显然总是正确的，因为字符串不为空。所以

```
if ('Account.company_name' != null) {
    $name = 'Account.company_name';
} else {
    $name = 'User.username';
} 
```

总是做`$name = 'Account.company_name';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:48:07.610

您可以定义一个临时虚拟字段“display_name”和如下代码

```
$this->Account->virtualFields['display_name'] = "IF(Account.company_name='' OR Account.company_name IS NULL, (SELECT u.name FROM users u WHERE u.account_id = Account.id),Account.company_name)";

$list = $this->Account->find('list',array(
   'fields' => array('Account.id','Account.display_name')
)); 
```

# jgit - JGit PullCommand 异常

> ID：11897404
> 
> 赞同：3
> 
> 时间：2012-08-10T07:42:50.120
> 
> 标签：jgit

我们正在使用 git 来维护我们的源代码。像 git@xx.xx.xx.xx:XYZ.git 这样的 URL。我正在使用 JGit 来拉取更改。

```
UsernamePasswordCredentialsProvider user = new UsernamePasswordCredentialsProvider("xxxx", "xxxx");
localPath = "E:\\murugan\\Test\\GIT_LOCALDEPY";
Git git = new Git(localRepo);
PullCommand pcmd = git.pull();
pcmd.setCredentialsProvider(user);
pcmd.call(); 
```

执行代码时出现以下异常。

```
org.eclipse.jgit.errors.UnsupportedCredentialItem: ssh://git@xx.xx.xx.xx:22: 
org.eclipse.jgit.transport.CredentialItem$StringType:Passphrase for C:\Users\Murugan.SOLVER\.ssh\id_rsa 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-23T10:26:41.727

如果用户名/密码安全不是问题，您可以在本地 Git 存储库的 .git/config 文件中指定凭据作为连接的一部分：

```
[remote "origin"]
    url = ssh://<user>:<pwd>@<host>:22/<remote-path-to-repo>/
    fetch = +refs/heads/*:refs/remotes/origin/* 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T09:22:54.863

在使用 Git 之前，你必须在你的机器上配置你的 SSH 参数。这是一个来自 github 的链接，用于配置它。

[https://help.github.com/categories/56/articles](https://help.github.com/categories/56/articles)

特别是这个：[https ://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

这将帮助您正确设置所有内容（您应该调整所有内容，因为您可能没有连接到 GitHub）

# blackberry - 使用 BB Fusion MDM 将 X509 证书部署到 Blackberry OS

> ID：11897407
> 
> 赞同：4
> 
> 时间：2012-08-10T07:43:11.773
> 
> 标签：blackberry, x509certificate, mdm

我已经用谷歌搜索了一段时间，但没有找到我的问题的答案。

是否可以使用 MDM 解决方案将自签名 CA X509 证书部署到黑莓设备？它必须可以通过无线方式进行。

谁能给我关于这个主题的提示或进一步的链接？

提前致谢！

# ruby-on-rails - Rails-Haml，复选框选择的表格显示

> ID：11897415
> 
> 赞同：0
> 
> 时间：2012-08-10T07:43:40.477
> 
> 标签：ruby-on-rails, checkbox, haml

我有一个表格，显示在上面的复选框中选择的项目的数据，如 a[]、b[]、c[]。最初，当页面首次加载时，表格显示为空。进行复选框选择时，表格会显示选择的数据。然后，当我取消选中所有复选框并按显示时，表格显示应该是空的。

因此，在控制器中，复选框选择的变量是>

@selected_brands = 参数[:brands] || 会话[:品牌] || {}

您可能意识到，params[] 和 session[] 是视图中表单提交的值。{} -> 未选中任何复选框时。再次在控制器中，我有这个 @products = Product.find_all_by_brand(@selected_brands.keys)

我遇到的问题是，当我取消选中这些框时，按照我之前所做的选择，表格会显示上一个会话的数据，而不是一个空表格。我不做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:37:18.070

您遇到了一个困扰很多人的 HTML 问题：当您取消选中所有复选框时，不会向服务器发送任何内容，因此不会记录任何更改，因此仍会记录最后的情况。

有很多解决方案（事件、javascript、服务器端代码），所以我的建议是将搜索范围扩大到通用 html 如何最好地处理这种情况。

如果您不喜欢 Javascript，并且对过多的 db-actions 没有问题，请删除该产品的所有选定品牌，并在获得此结果时重新应用选定的品牌。

# asp.net - 在 ASP.NET MVC 中将数据库与剑道 UI 网格绑定

> ID：11897416
> 
> 赞同：1
> 
> 时间：2012-08-10T07:43:43.143
> 
> 标签：asp.net, asp.net-mvc, kendo-ui

我正在尝试`Grid`在我的 ASP.NET MVC 应用程序中实现 KendoUI 控件。我知道 KendoUI 的人已经给出了很多例子，但它对我不起作用。

我的型号代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.SqlClient;
using System.Data.Sql;
using System.Data;

namespace KendoGrid.Models
{
    public class status
    {
        public string SiteId { get; set; }
        public string SiteName { get; set; }
        public string SiteStatus { get; set; }

        public static List<status> StatusInfo()
        {    
            SqlConnection sconn = new SqlConnection(@"Data Source=DS-7071BC8FDEE6\SQLEXPRESS;Initial Catalog=AmanoTest;User ID=sa;Password=india@123");
            SqlCommand cmd = new SqlCommand("select * from SiteMaster", sconn);
            SqlDataAdapter sda = new SqlDataAdapter(cmd);
            DataTable dt = new DataTable();
            sda.Fill(dt);
            status cstat;
            List<status> statlist = new List<status>();
            foreach (DataRow dr1 in dt.Rows)
            {
                cstat = new status();
                cstat.SiteId = dr1[0].ToString();
                cstat.SiteName = dr1[1].ToString();
                cstat.SiteStatus = dr1[2].ToString();

                statlist.Add(cstat);    
            }
            return statlist;
        }
    }
} 
```

我的控制器代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using KendoGrid.Models;
using Kendo.Mvc.UI;

namespace KendoGrid.Controllers
{
    public class statusController : Controller
    {
        //
        // GET: /status/

        public ActionResult Index()
        {
            return View();
        }
        public ActionResult Site()
        {
            //List<status> status = status.GetStatus();
            List<status> temp = status.StatusInfo();
            ViewData["table"] = temp;
            return View();
        }    
    }
} 
```

我的观点（.cshtml 页面）是：

```
@model KendoGrid.Models.status
@using Kendo.Mvc.UI 

@*@{
    Layout = null;
 }
*@
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Site</title>
</head>
<body>
    <div>
        @(Html.Kendo().Grid(Model)()
                .Name("Grid")
                .Columns(columns =>
                    {
                        columns.Bound(p => p.siteID);
                        columns.Bound(p => p.siteID);
                        columns.Bound(p => p.siteID);
                    })
            .Pageable()
            .Sortable()
            .Scrollable()
            .Filterable() 
            .DataSource(dataSource => dataSource        
        .Ajax()
        .ServerOperation(false)
        )
     )
   </div>
</body>
</html> 
```

在执行它说：

> 'Kendo.Mvc.UI.Fluent.WidgetFactory.Grid(System.Data.DataTable)' 的最佳重载方法匹配有一些无效参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:05:57.400

看起来你在这里错过了几步。请完成此步骤，这可能会解决您的问题

[http://docs.kendoui.c​​om/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/ajax-binding](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/ajax-binding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T07:20:48.413

您可以使用

```
var url = "/DesktopModules/MyServices/API/ATSManageClient/GetAllProjectsTechnologyBased?PortalId=210&tabid=95&Technology=" + selectedplatform;

var element = $("#grid").kendoGrid({
//debugger;
    type: "odata",
    dataSource: {
        transport: {
            read: url
        },
        schema: {
            model: {
                fields: {
                    RecievedDate: { type: "date" }
                }
            }
        },
        pageSize: 100
    },

    columnMenu: true,
    scrollable: true,
    filterable: true,
    resizable: true,
    sortable: true,
    detailTemplate: kendo.template($("#template").html()),
    detailInit: detailInit,
    dataBound: function () {
    },
    columns: [
{
    field: "ProjectID",
    title: "Action",
    template: "<a href='/Dashboard/Communication?ProjectID=#=ProjectID#'>View Communication</a>",
    width: "20%"
},
//s debugger;
 {
     field: "ClientName",
     width: "20%",
     title: "Client",
     template: "<a href='Accounts/UpdateClient.aspx?ClientId=#=ClientID#'> #= ClientName #</a>",
     attributes: {
         title: "#=ClientName#"
     }
 },
  {
      field: "ProjectTitle",
      width: "20%",
      title: "Project",
      template: "<a href='Project/EditProject.aspx?ProjectID=#=ProjectID#'> #= ProjectTitle #</a>",
      attributes: {
          title: "#=ProjectTitle#"
      }
  },
        {
            field: "ColorList",
            width: "20%",
            template: kendo.template($("#template2").html()),
            title: "Status"
        },
        {
            field: "RecievedDate",
            width: "20%",
            title: "Check List Status",
            template: ""
        },
        {
            field: "RecievedDate",
            width: "20%",
            title: "Opened Bugs",
            template: ""
        }

    ],
    pageable: {
        // we don't set any DataSource here
        pageSizes: [100, 150, 200]
    }
}); 
```

# c#-4.0 - CultureInfo 从何而来？

> ID：11897419
> 
> 赞同：0
> 
> 时间：2012-08-10T07:43:57.047
> 
> 标签：c#-4.0

我想更改我当前的文化信息。在我的代码中： CultureInfo.CurrentUICulture.Name 返回“en-US”

它是从哪里来的..？我想要“zh-CN”作为文化名称...在哪里设置？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:51:52.863

使用[Thread.CurrentCulture](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentculture.aspx)属性，对于当前线程尝试：

```
System.Threading.Thread.CurrentThread.CurrentCulture = new CultureInfo("zh-CN"); 
```

# javascript - Javascript 闭包语法

> ID：11897423
> 
> 赞同：7
> 
> 时间：2012-08-10T07:44:14.673
> 
> 标签：javascript, closures

这些构造之间有什么区别，优点/缺点（如果有）？

```
 new function(obj) {
     console.log(obj);
 }(extObj); 
```

对比

```
 (function(obj) {
     console.log(obj);
 })(extObj); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T07:57:04.467

第一个返回对您的匿名构造函数 (= `this`) 的新构造实例的引用。

第二个返回匿名函数的返回值。由于您的函数没有 return 语句，因此它将隐式返回 undefined。

尝试以下操作：

```
var t1 = new function(obj) { console.log(obj); }(extObj);
var t2 =    (function(obj) { console.log(obj); })(extObj);

typeof t1 => "object"
typeof t2 => "undefined" 
```

（顺便说一句，`t1.constructor`将返回您创建的原始函数`t1`。）

如果添加 return 语句，差异会变得更加明显：

```
var t1 = new function(obj){ return(obj); }("foo");
var t2 =    (function(obj){ return(obj); })("bar");

console.log(t1) => "object"
console.log(t2) => "bar" 
```

IMO，这`(function)()`对于日常用例更加有用 - 您将执行此函数的返回值分配给变量，如果您正在使用立即调用的函数，这通常是您想要的。尤其是当有更复杂的东西时，比如（伪代码）：

```
var myNameSpace = (function(){
    /* do some private stuff here*/
    ...
    /* expose parts of your anonymous function by returning them */
    return{
       functionX,
       variable1,
       variable2
    }
}(); 
```

基本上，您可以使用任意一元运算符将函数声明转换为立即调用的表达式。所以你也可以写：

```
!function(){ /* code */ }();
~function(){ /* code */ }();
-function(){ /* code */ }();
+function(){ /* code */ }(); 
```

根据您的函数的返回语句，这些将给出不同的返回结果。`!`- 否定返回值`+|-`评估为数字（应用负号）`~`应用于`bitwise not`返回值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T07:55:58.573

如果您正在考虑明确处理立即调用的函数，那么两者之间没有任何真正的区别，除了第一个将`this`在函数内部自动返回到外部世界（就是`new`这样） ，并且默认情况下，如果未指定不同的返回值（常规函数返回`undefined`）。

其余的主要区别并不重要——访问原型链将毫无意义，返回`this.constructor`指向匿名函数的点将使您可以访问缓存匿名函数以供以后使用（例如从事件侦听器中删除它，如果您设法将封闭的函数粘贴在... ...这本身就是一个技巧）。

允许人们将您立即调用的函数缓存为返回`this`对象的构造函数属性可能会带来安全风险... ...或者它可能真的很有用... ...在非常特定的场景中。

在线触发代码的日常目的——没有真正的区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T07:59:46.960

另一个区别是第一次调用会创建一个额外的对象。在这里，我输入了名称`f`并`o`表示一个对象：

```
var o = new function f(obj) {
    console.log(obj);
}(extObj); 
```

在第二种情况下，我们仍然创建一个函数对象`f`，但我们不创建`o`：

```
(function f(obj) {
    console.log(obj);
})(extObj); 
```

仍然会创建一个闭包，但它比实际的 JavaScript 对象便宜，因为它不携带整个原型链或其他属性（如隐藏的类引用），

# jquery - 如何让 JQgrid 像 web 控件一样？

> ID：11897425
> 
> 赞同：0
> 
> 时间：2012-08-10T07:44:16.297
> 
> 标签：jquery, jqgrid, jqgrid-asp.net

我们计划在我们的应用程序中使用 jqgrid。但是，我们需要将其设置为自定义 Web 控件，如下所示：

例子：

```
<TestGrid:JQGrid ID="grdTest" Sortable="True" runat="server"/> 
```

在所有示例中，他们在 aspx 页面中创建 jqgrid。有没有可能像上面那样创建控件？非常感谢任何建议或想法。另外，如果有的话，请给我网站链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T07:53:03.220

试试这两个链接..使用 jqGrid 作为用户控件是可能的（虽然我从来没有那样使用它），但这两个链接会帮助你，其中一个由 Oleg 回答。

[链接 1](http://forums.asp.net/t/1656564.aspx/1)

[链接 2](https://stackoverflow.com/questions/6983617/jqgrid-embedded-in-a-custom-user-control)

# android - getWritableDatabase() 上的 NullPointerException

> ID：11897426
> 
> 赞同：0
> 
> 时间：2012-08-10T07:44:23.583
> 
> 标签：android, getwritabledatabase

我在 getWritableDatabase() 上遇到了 NullPointerException 问题

```
public class DatabaseTable extends Activity {
            private Context context;
            @Override
            public void onCreate(Bundle savedInstanceState) {
                LBD conection = LBD.get(this);
                super.onCreate(savedInstanceState);
            }
        } 
```

有一个实现不起作用“openHelper.getWritableDatabase()”

```
 public class LBD {
                    private Context context;
                    private static SQLiteDatabase db;
                    private OpenHelper openHelper;
                    public static LBD get(Context context) {
                        LBD lbd = new LBD(context);
                        lbd.open();
                        return lbd;
                    }
                    public LBD(Context c) {
                        context = c;
                    }
                    final public void open() {
                                openHelper = new OpenHelper(context);
                                db = openHelper.getWritableDatabase();

                    }
                    public class OpenHelper extends SQLiteOpenHelper {
                        OpenHelper(Context context) {
                            super(context, "rss_base.db", null, 3);
                        }
                    }
                } 
```

![在此处输入图像描述](../Images/478f54ed257ed6f55af5c61cb758c052.png)

![在此处输入图像描述](../Images/7e4748ba40c119982240b1f312795a76.png)

**我意识到，我忘了初始化onCreate 谢谢大家**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:00:09.197

很可能是你的`Context`

```
openHelper = new OpenHelper(context); 
```

一片空白。确保你`Context`的设置。但我建议您提供更多详细信息，在此处添加您的 logcat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:12:13.787

问题不在您的数据库类中，它在`DatabaseTable.onCreate()..... java:27`

请检查一下。

谢谢，

哈普斯。

# android - 列表视图中的 RadioGroup 问题

> ID：11897427
> 
> 赞同：1
> 
> 时间：2012-08-10T07:44:30.210
> 
> 标签：android, listview, radio-group

我正在开发琐事应用程序，并在列表视图中显示问题，每个问题都有 4 个单选按钮。这是我的 XML 代码

```
 <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"        
    android:id="@+id/radioButtonLayout">
<RadioGroup
android:id="@+id/radioGroup"
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
 android:visibility="gone">

<RadioButton
    android:id="@+id/radioID_1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:focusable="false"
    android:saveEnabled="true"
    android:focusableInTouchMode="false"
    android:textColor="#000000" />

<RadioButton
    android:id="@+id/radioID_2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:focusable="false"
    android:saveEnabled="true"
    android:focusableInTouchMode="false"
    android:textColor="#000000" />

<RadioButton
    android:id="@+id/radioID_3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:focusable="false"
    android:saveEnabled="true"
    android:focusableInTouchMode="false"
    android:textColor="#000000" />

<RadioButton
    android:id="@+id/radioID_4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:focusable="false"
    android:saveEnabled="true"
    android:focusableInTouchMode="false"
    android:textColor="#000000" />
</RadioGroup>    
</LinearLayout> 
```

这就是我实现单选按钮选择的方式。getView 方法在这里。

```
@Override
    public int getCount() {
        // TODO Auto-generated method stub
        return mObjects.size();
    }

    public View getView(final int position, View view, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        if (view == null) {
            view = inflater.inflate(R.layout.question_option, parent, false);
            holder = new ViewHolder();
            holder.label = (TextView) view.findViewById(R.id.textView1);
            holder.radioButtonLayout = (RadioGroup) view.findViewById(R.id.radioGroup);

            holder.radioButtonFirst = (RadioButton) view.findViewById(R.id.radioID_1);
            holder.radioButtonSecond = (RadioButton) view.findViewById(R.id.radioID_2);
            holder.radioButtonThird = (RadioButton) view.findViewById(R.id.radioID_3);
            holder.radioButtonFourth = (RadioButton) view.findViewById(R.id.radioID_4);

            view.setTag(holder);
        } else {
            holder = (ViewHolder) view.getTag();
        }   
        holder.radioButtonFirst.setOnCheckedChangeListener(null);
            holder.radioButtonSecond.setOnCheckedChangeListener(null);
            holder.radioButtonThird.setOnCheckedChangeListener(null);
            holder.radioButtonFourth.setOnCheckedChangeListener(null);

                holder.radioButtonLayout.setVisibility(View.VISIBLE);
                holder.checkboxLayout.setVisibility(View.GONE);
                holder.radioButtonFirst.setChecked(firstItemChecked[position]);
                holder.radioButtonSecond.setChecked(secondItemChecked[position]);
                holder.radioButtonThird.setChecked(thirdItemChecked[position]);
                holder.radioButtonFourth.setChecked(fourthItemChecked[position]);
                holder.radioButtonFirst.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(
                            CompoundButton buttonView, boolean isChecked) {
                        if (isChecked) {
                                firstItemChecked[position] = true;

                            } else {
                                firstItemChecked[position] = false;

                            }                               
                        }
                    });
            holder.radioButtonSecond.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(
                        CompoundButton buttonView, boolean isChecked) {
                    if (isChecked) {
                        secondItemChecked[position] = true;

                    } else {
                        secondItemChecked[position] = false;
                    }
                }
            });
            holder.radioButtonThird.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(
                        CompoundButton buttonView, boolean isChecked) {
                    if (isChecked) {
                                thirdItemChecked[position] = true;

                            } else {
                                thirdItemChecked[position] = false;

                            }

                        }
                    });
            holder.radioButtonFourth.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(
                        CompoundButton buttonView, boolean isChecked) {
                    if (isChecked) {
                                fourthItemChecked[position] = true;

                            } else {
                                fourthItemChecked[position] = false;

                            }

                        }
                    });
        return view;
    } 
```

*   现在应用程序有 5 个问题并且 mObjects.size() 在 getCount 方法中是 5。即使 getview 方法被调用超过 5 次。为什么会这样？

*   选择第一个单选按钮后，我向下和向上滚动列表视图，当我向上滚动查看第一个问题（我选择第一个单选按钮用于回答的问题）时，它失去焦点并显示为未选中。我再次尝试检查第一个选项，这次无法选择第一个单选按钮。一旦我通过单击第二个单选按钮进入第二个选项并尝试，第一个工作正常。

在调试时，我总是将 firstItemchecked(0)(first question first option) 设为 true，即使它带有未选中状态。

在这个问题上苦苦挣扎超过 4 天。请朋友们帮帮我。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:09:13.203

首先尝试使您的代码更易于阅读。例如，我像这样替换了所有听众：

```
holder.radioButtonFirst.setOnCheckedChangeListener(new CheckChange(position));
holder.radioButtonSecond.setOnCheckedChangeListener(new CheckChange(position));
holder.radioButtonThird.setOnCheckedChangeListener(new CheckChange(position));
holder.radioButtonFourth.setOnCheckedChangeListener(new CheckChange(position));
...
}
private class CheckChange implements OnCheckedChangeListener {
    private int position;
    private CheckChange(int position) {
        this.position = position;
    }
    @Override
    public void onCheckedChanged(CompoundButton button, boolean isChecked) {
        switch (button.getId()) {
        case R.id.radioID_1:
            firstItemChecked[position] = isChecked;
            break;
        case R.id.radioID_2:
            secondItemChecked[position] = isChecked;
            break;
        case R.id.radioID_3:
            thirdItemChecked[position] = isChecked;
            break;
        case R.id.radioID_4:
            fourthItemChecked[position] = isChecked;
            break;
        default:
            break;
        }
    }
} 
```

其次，您确定 firstItemChecked[0] 不正确吗？你如何初始化它？我在 RadioButtons 上使用 setOnChangeListener 时也遇到了一些问题。改为使用 onClickListeners 解决它。

# google-chrome - Chrome 中的 FileUpload 给出了一些虚假的路径值

> ID：11897431
> 
> 赞同：5
> 
> 时间：2012-08-10T07:44:54.770
> 
> 标签：google-chrome, httpwebrequest

我正在尝试在 Chrome 中上传一个文件，然后它给出了一些假路径值。例如。它给出的文件名如“C:\fakepath\Hi.txt”。你能解释一下它为什么会来吗？在其他浏览器中它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:47:37.610

Chrome 出于安全目的显示它。

还要检查元stackoverflow上的这个[链接](https://meta.stackexchange.com/questions/68471/the-image-uploader-shows-fakepath-as-path-when-using-chrome)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-20T06:02:03.533

你不能那样做。出于安全目的，您无法获取上传文件的实际物理路径。

```
 document.getElementById("yourFileInput").files[0].fileName; 
```

这将从上传的路径中获取文件名。

# android - WebView.scrollTo 动画

> ID：11897435
> 
> 赞同：2
> 
> 时间：2012-08-10T07:45:06.967
> 
> 标签：android, android-webview

我正在使用 Android 中的 webviews 并陷入了为 scrollTo 方法制作动画的想法。基本上，方法 scrollTo(x,y) 将页面滚动到给定点，但它会立即执行。

我希望它慢一点，就像动画过渡一样。有谁知道该怎么做？

编辑 1：我刚刚尝试使用基于 xml 和代码的翻译动画。它似乎移动了 webview，但只是作为一个“整体”视图，所以它向下滚动，但不是 webview 的滚动条，而是 webview 的整个视口（这有意义吗？）所以我可以有效地看到我当前的页面滑动向下滑动黑屏（从顶部到底部）。这有点道理，因为我正在翻译整个 web 视图（将其向下移动......）。我尝试分别设置 Animation.ABSOLUTE、Animation.RELATIVE_TO_PARENT 和 Animation.RELATIVE_TO_SELF，但没有成功。

然后，如何直接在 webview 中而不是在整个视图中为滚动位置设置动画？

编辑 2：经过多次尝试，我更了解动画的工作原理。因此，我声称不可能覆盖默认的“即时”滚动行为。如果有人对此有不同的看法或知识，请告诉我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-19T10:53:37.860

使用 ObjectAnimators。此代码平滑地将 WebView 滚动到顶部：

```
ObjectAnimator anim = ObjectAnimator.ofInt(mWebView, "scrollY",
    mWebView.getScrollPositionY(), 0);
anim.setDuration(400);
anim.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:50:40.917

我认为您需要首先将动画设置为网络视图，如果您想立即使用它，那么您需要说开始动画。使用 xml 定义动画。

我已经看到与此问题相关的答案，请查看[此链接](https://stackoverflow.com/questions/8428738/slide-up-and-slide-down-animation-on-webview-in-android)

# android - 为什么这个布局的上半部分不显示？

> ID：11897440
> 
> 赞同：0
> 
> 时间：2012-08-10T07:45:17.810
> 
> 标签：android, android-layout

这是我的布局。问题是 PageViewer 内容是可见的，没有别的。如果我看到 PageViewer 消失了，我会看到它上面的所有内容。还尝试将根布局作为框架布局，但没有帮助。主要的是只有视图寻呼机是可见的。我想要的是包含数据的 2/3 ViewPager 内容，以及一些 1/3 的标题材料。我不想使用权重，因为上部的尺寸已经正确。我只想保证顶部和浏览器都正确显示。他们切换所有内容是网页浏览者的特征吗？还是不能将它们应用于另一个元素下方？

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:orientation="vertical"
android:layout_height="match_parent" >
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mHeaderHeader"
android:visibility="visible"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">

<include
    android:id="@+id/myInclude"
    layout="@layout/myInclude_layout" />

<include
    android:id="@+id/myInclude2r"
    layout="@layout/myInclude2" />

<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
 </FrameLayout>

<include
    android:id="@+id/myInclude3"
    layout="@layout/myinclude3layout" />

<ImageView
    android:id="@+id/myImageView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />

</LinearLayout>

<android.support.v4.view.ViewPager
android:id="@+id/myViewPager"
android:visibility="visible"
android:layout_width="match_parent" 
android:layout_height="wrap_content" 
 />
   <include layout="@layout/myinclude4" />

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:02:24.307

你可以尝试这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:orientation="vertical"
    android:layout_height="match_parent" >
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mHeaderHeader"
        android:visibility="visible"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:orientation="vertical">

        <include
            android:id="@+id/myInclude"
            layout="@layout/myInclude_layout" />

        <include
            android:id="@+id/myInclude2r"
            layout="@layout/myInclude2" />

        <include
            android:id="@+id/myInclude3"
            layout="@layout/myinclude3layout" />

        <ImageView
            android:id="@+id/myImageView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            />

    </LinearLayout>

    <include layout="@layout/myinclude4"
        android:id="@+id/myinclude4" />

    <android.support.v4.view.ViewPager
        android:id="@+id/myViewPager"
        android:visibility="visible"
        android:layout_width="match_parent" 
        android:layout_height="wrap_content"
        android:layout_alignBelow="@id/mHeaderHeader"
        android:layout_alignAbove="@id/myinclude4" />

 </RelativeLayout> 
```

我想 ViewPager 占用了所有空间，所以我使用 RelativeLayout 将它放在页眉下方和页脚上方

# c++ - 提升正则表达式和 ifstream

> ID：11897441
> 
> 赞同：1
> 
> 时间：2012-08-10T07:45:19.560
> 
> 标签：c++, boost-regex

有没有办法使用 boost 的正则表达式类在文件中搜索而不将其完全读入内存？

我目前每行读取一个文件，与通过正则表达式搜索相比，这使得解析非常复杂。我每行都这样做，因为文件可能很大，我不想浪费太多 RAM。

我想使用的正则表达式是，如果我将它用于记事本++中的示例，它可以正常工作

```
Block *\{([^\}]*?)MY_TOOL_Library([^\}]*?)\} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T07:55:19.750

我不认为 boost regex 实现了这一点。它们需要一个双向迭代器。

形式上，“正则表达式”（在数学意义上）允许一次解析，并且可以使用前向迭代器。但是 boost 与大多数其他正则表达式一样，实现了捕获（对正式定义的扩展），我认为这排除了真正的一次性算法（或使其极其困难）。

# eclipse - 如何测试 Eclipse 插件？

> ID：11897443
> 
> 赞同：3
> 
> 时间：2012-08-10T07:45:39.677
> 
> 标签：eclipse, user-interface, testing, plugins

测试 Eclipse 插件的最佳方法/工具是什么？是否有一些工具可以测试使用 Eclipse 插件创建的应用程序的 GUI 功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:42:50.650

您应该尽量减少 GUI 测试，因为它们运行缓慢并且需要时间来创建。如果您的代码在模型-视图-控制器模式中结构良好，那么特定于 GUI 的代码应该是最少的。

这就是至少在完美世界中的理论。在我们到达那里之前，我更喜欢使用[SWTbot](http://www.eclipse.org/swtbot/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-31T09:41:05.740

Eclipse [Jubula](http://www.eclipse.org/jubula/)是一个非常好的基于 GUI 的 Eclipse 插件测试工具。它为各种类型的应用程序提供自动化的功能 GUI 测试。它面向希望由测试专​​家从用户角度编写自动化测试而不需要任何编码工作的团队。Jubula 测试结合了软件开发的最佳实践，以确保自动化测试的长期可维护性。

1.  将 Jenkins 用作您的 CI 构建系统会很有用。

2.  您可以根据需要连接到真实数据库以存储测试结果。

3.  您可以直接在测试报告中保存 Jubula 在测试失败时截取的屏幕截图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-08T12:28:19.057

我建议你看看[RCP 测试工具](https://www.eclipse.org/rcptt/)。该工具可以让您每天为每个工程师开发数十个 UI 测试，并且不会出现稳定性和错误记录问题。它专门设计用于测试基于 Eclipse 的应用程序。它是官方的 Eclipse 项目，它是免费的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T12:51:25.040

在分析了可能性之后，我选择了使用 Jubula 来测试 GUI 部分：

[Eclipse Jubula 项目](http://www.eclipse.org/jubula/)

它是创建特定于 RCP 应用程序的测试的好工具。此外，它不是基于代码的，它允许从用户的角度创建测试。

# c++ - C++ DB2 在 QTEMP 中清除非日志表

> ID：11897444
> 
> 赞同：1
> 
> 时间：2012-08-10T07:45:50.690
> 
> 标签：c++, sql, db2, ibm-midrange

我正在开发一个 C++ 程序来获取和过滤数据，并将其存储到 DB2 AS400 上 QTEMP 库中的临时表 (P6SUBFCH) 中。

这样做的原因是，我们使用 PLEX，它有一个定义的方法来一次获取 64 条记录的块中的数据，所以调用 SQLBlockFetch 的函数将所有记录提取到一个临时表中，一次只返回 64 条记录从这个临时表中，并照此处理。

我正在开发自己的 SQLBockfetch，其中的 C++ 部分使用嵌入式 SQL 来执行所有 SQL 查询。它正在获取在 QTEMP 库中创建表 (P6SUBFCH) 的所有数据。

QTEMP 库在会话中处于活动状态，一旦会话结束，所有表都将删除到该库中。

还要注意的是，QTEMP 中的所有表都没有记录，从我在谷歌上的研究来看，它不可能。

**问题**
我的 C++ 程序第一次在会话中调用时运行良好，但第二次，它只是将数据附加到表 QTEMP/P6SUBFCH 中的先前数据。这是一个问题，我尝试先清除数据（SQL DELETE 语句），但在 AS400 作业日志中出现此 SQL 错误。

```
Member P6SUBFCH not journaled to journal *N.
P6SUBFCH in QTEMP not valid for operation. 
```

SQL 错误：-7008

我已阅读以下[ql7008-error-workaround](https://stackoverflow.com/questions/8232611/sql7008-error-workaround "sql7008-错误解决方法")

> 禁用事务隔离

不确定这是否是我的问题？我还是嵌入式 SQL 的新手，不知道我将如何去做。

这是我的代码：

```
void LinkRepository::SaveResultsToTable(InputParameters inputParameters)
{
EXEC SQL INCLUDE SQLCA;
EXEC SQL BEGIN DECLARE SECTION;
char Query2[2000] = { "" };
char Query3[2000] = { "" };

EXEC SQL END DECLARE SECTION;

strcpy(Query2, "CREATE TABLE QTEMP/P6SUBFCH");
strcat(Query2, " (PAOPIID CHAR(21) NOT NULL,");
strcat(Query2, " POPITPE CHAR(10),");
strcat(Query2, " POPISTPE CHAR(10),");
strcat(Query2, " POPIKNID CHAR(20),");
strcat(Query2, " PINSTAT CHAR(10),");
strcat(Query2, " PLEAFIND CHAR(1),");
strcat(Query2, " CLOPIID CHAR(21),");
strcat(Query2, " COPITPE CHAR(10),");
strcat(Query2, " COPISTPE CHAR(10),");
strcat(Query2, " COPIKNID CHAR(20),");
strcat(Query2, " CINSTAT CHAR(10),");
strcat(Query2, " CLEAFIND CHAR(1),");
strcat(Query2, " LINKIN CHAR(10))");

EXEC SQL EXECUTE IMMEDIATE :Query2;

// Error handling
if (sqlca.sqlcode == -601)
{
     strcpy(Query2, "DELETE FROM QTEMP/P6SUBFCH");

     EXEC SQL EXECUTE IMMEDIATE :Query2;

}

EXEC SQL COMMIT;

// Datalinks is a vector that has all the filter data to insert into the QTEMP/P6SUBFCH table
for(vector<Datalink*>::iterator dl = Datalinks.begin(); dl != Datalinks.end(); ++dl)
{
     EXEC SQL SET TRANSACTION ISOLATION LEVEL NO COMMIT;

     strcpy(Query3, "INSERT INTO QTEMP/P6SUBFCH (PAOPIID,POPITPE,");
     strcat(Query3, "POPISTPE,POPIKNID,PINSTAT,PLEAFIND,");
     strcat(Query3, "CLOPIID,COPITPE,COPISTPE,COPIKNID,CINSTAT,");
     strcat(Query3, "CLEAFIND,LINKIN)");
     strcat(Query3, "VALUES('");
     strcat(Query3, (*dl)->ParentOperationsItemId);
     strcat(Query3, "','");
     strcat(Query3, (*dl)->ParentOperationsItemType);
     strcat(Query3, "','");
     strcat(Query3, (*dl)->ParentOperationsItemSubType);
     strcat(Query3, "','");
     strcat(Query3, (*dl)->ParentKnownbyId);
     strcat(Query3, "','");
     strcat(Query3, (*dl)->ParentInternalStatus);
     strcat(Query3, "','");
     append_char(Query3, (*dl)->ParentLeafIndicator);
     strcat(Query3, "','");
     strcat(Query3, (*dl)->ChildOperationsItemId);
     strcat(Query3, "','");
     strcat(Query3, (*dl)->ChildOperationsItemType);
     strcat(Query3, "','");
     strcat(Query3, (*dl)->ChildOperationsItemSubType);
     strcat(Query3, "','");
     strcat(Query3, (*dl)->ChildKnownbyId);
     strcat(Query3, "','");
     strcat(Query3, (*dl)->ChildInternalStatus);
     strcat(Query3, "','");
     append_char(Query3, (*dl)->ChildLeafIndicator);
     strcat(Query3, "','");
     strcat(Query3, (*dl)->LinkInternalStatus);
     strcat(Query3, "')");

     EXEC SQL EXECUTE IMMEDIATE :Query3;

     EXEC SQL COMMIT;
}
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:43:12.443

好的，我解决了，我只是`EXEC SQL SET TRANSACTION ISOLATION LEVEL NO COMMIT;`在调用`strcpy(Query2, "DELETE FROM QTEMP/P6SUBFCH");`查询之前添加了。

这是我的完整代码：

```
void LinkRepository::SaveResultsToTable(InputParameters inputParameters)
{
    EXEC SQL INCLUDE SQLCA;
    EXEC SQL BEGIN DECLARE SECTION;
    char Query2[2000] = { "" };
    char Query3[2000] = { "" };

    EXEC SQL END DECLARE SECTION;

    strcpy(Query2, "CREATE TABLE QTEMP/P6SUBFCH");
    strcat(Query2, " (PAOPIID CHAR(21) NOT NULL,");
    strcat(Query2, " POPITPE CHAR(10),");
    strcat(Query2, " POPISTPE CHAR(10),");
    strcat(Query2, " POPIKNID CHAR(20),");
    strcat(Query2, " PINSTAT CHAR(10),");
    strcat(Query2, " PLEAFIND CHAR(1),");
    strcat(Query2, " CLOPIID CHAR(21),");
    strcat(Query2, " COPITPE CHAR(10),");
    strcat(Query2, " COPISTPE CHAR(10),");
    strcat(Query2, " COPIKNID CHAR(20),");
    strcat(Query2, " CINSTAT CHAR(10),");
    strcat(Query2, " CLEAFIND CHAR(1),");
    strcat(Query2, " LINKIN CHAR(10))");

    EXEC SQL EXECUTE IMMEDIATE :Query2;

    // Error handling
    if (sqlca.sqlcode == -601)
    {
         EXEC SQL SET TRANSACTION ISOLATION LEVEL NO COMMIT;

         strcpy(Query2, "DELETE FROM QTEMP/P6SUBFCH");

         EXEC SQL EXECUTE IMMEDIATE :Query2;

    }

    EXEC SQL COMMIT;

    // Datalinks is a vector that has all the filter data to insert into the QTEMP/P6SUBFCH table
    for(vector<Datalink*>::iterator dl = Datalinks.begin(); dl != Datalinks.end(); ++dl)
    {
         EXEC SQL SET TRANSACTION ISOLATION LEVEL NO COMMIT;

         strcpy(Query3, "INSERT INTO QTEMP/P6SUBFCH (PAOPIID,POPITPE,");
         strcat(Query3, "POPISTPE,POPIKNID,PINSTAT,PLEAFIND,");
         strcat(Query3, "CLOPIID,COPITPE,COPISTPE,COPIKNID,CINSTAT,");
         strcat(Query3, "CLEAFIND,LINKIN)");
         strcat(Query3, "VALUES('");
         strcat(Query3, (*dl)->ParentOperationsItemId);
         strcat(Query3, "','");
         strcat(Query3, (*dl)->ParentOperationsItemType);
         strcat(Query3, "','");
         strcat(Query3, (*dl)->ParentOperationsItemSubType);
         strcat(Query3, "','");
         strcat(Query3, (*dl)->ParentKnownbyId);
         strcat(Query3, "','");
         strcat(Query3, (*dl)->ParentInternalStatus);
         strcat(Query3, "','");
         append_char(Query3, (*dl)->ParentLeafIndicator);
         strcat(Query3, "','");
         strcat(Query3, (*dl)->ChildOperationsItemId);
         strcat(Query3, "','");
         strcat(Query3, (*dl)->ChildOperationsItemType);
         strcat(Query3, "','");
         strcat(Query3, (*dl)->ChildOperationsItemSubType);
         strcat(Query3, "','");
         strcat(Query3, (*dl)->ChildKnownbyId);
         strcat(Query3, "','");
         strcat(Query3, (*dl)->ChildInternalStatus);
         strcat(Query3, "','");
         append_char(Query3, (*dl)->ChildLeafIndicator);
         strcat(Query3, "','");
         strcat(Query3, (*dl)->LinkInternalStatus);
         strcat(Query3, "')");

         EXEC SQL EXECUTE IMMEDIATE :Query3;

         EXEC SQL COMMIT;
    }
}; 
```

# mysql - MySQL，CodeIgniter 一行与多行与 row_array 活动记录功能连接

> ID：11897446
> 
> 赞同：0
> 
> 时间：2012-08-10T07:45:59.917
> 
> 标签：mysql, sql, codeigniter, activerecord

我有三张桌子，

**作品：**

```
CREATE TABLE `works` (
  `work_id` int(11) NOT NULL AUTO_INCREMENT,
  `project_id` int(11) NOT NULL,
  `work_name` varchar(100) NOT NULL,
  `work_baslangic` int(11) NOT NULL,
  `work_bitis` int(11) NOT NULL,
  `work_onay` enum('0','1') NOT NULL,
  `work_onay_userid` int(11) NOT NULL,
  `work_brief` text NOT NULL,
  `work_not` text NOT NULL,
  `work_url` varchar(50) NOT NULL,
  `work_employees` varchar(200) NOT NULL,
  PRIMARY KEY (`work_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ; 
```

**通知：**

```
CREATE TABLE `notifications` (
  `notification_id` int(11) NOT NULL AUTO_INCREMENT,
  `notification_userid` int(11) NOT NULL,
  `notification_workid` int(11) NOT NULL,
  `notification_stat` enum('1','0') NOT NULL,
  `notification_tarih` int(11) NOT NULL,
  PRIMARY KEY (`notification_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=3 ; 
```

**用户**

```
CREATE TABLE `users` (
  `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `ip_address` varbinary(16) NOT NULL,
  `username` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `password` varchar(40) COLLATE utf8_unicode_ci NOT NULL,
  `salt` varchar(40) COLLATE utf8_unicode_ci DEFAULT NULL,
  `email` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `activation_code` varchar(40) COLLATE utf8_unicode_ci DEFAULT NULL,
  `forgotten_password_code` varchar(40) COLLATE utf8_unicode_ci DEFAULT NULL,
  `forgotten_password_time` int(11) unsigned DEFAULT NULL,
  `remember_code` varchar(40) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_on` int(11) unsigned NOT NULL,
  `last_login` int(11) unsigned DEFAULT NULL,
  `active` tinyint(1) unsigned DEFAULT NULL,
  `first_name` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `last_name` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `company` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `phone` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=8 ; 
```

场景：当人们创建新作品时，表单值插入了作品表和通知表。通知表保存谁在做这些工作。可能不止一个人。我保存用户 ID 并加入用户表以查找谁。

在控制器中：

```
$data["works"]  =   $this->db->select("users.first_name, works.work_employees, works.work_name, works.work_baslangic, works.work_bitis, works.work_onay, works.work_onay_userid")->from("works")->join("users", "users.id = works.work_onay_userid", "LEFT")->get()->result_array(); 
```

在视图中：

```
foreach($works as $row): 
```

**在这一行，我编写了另一个 sql 来查找通知用户。但是我不想写另一个sql来查看，我想在控制器（或模型）上完成所有这些。我怎样才能做到这一点？**

```
endforeach; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:42:00.440

在控制器中放置以下代码

```
// set to null so you can check against null value in view
$notifications = null;
foreach($works as $row)
    {

    $query = $this->db->query("SELECT * FROM `notifications` WHERE `notification_userid` = '{$row->works.work_onay_userid}'");// adapt query to your liking
    foreach($query->result() as $res)
            {
            $notifications[] = $res;
            }
    }
$data['notifications'] = $notifications; 
```

这样，您已经在控制器中完成了查询，并在视图中获得了结果对象

# python - Python 中的解释器设计

> ID：11897454
> 
> 赞同：-2
> 
> 时间：2012-08-10T07:46:26.503
> 
> 标签：python, compiler-construction, programming-languages, interpreter, pypy

我是 Python 新手，我想用它制作一个小型解释器/编译器。最初只是一个爱好项目。我想知道完成这样的工作与 c/c++ 相比有多好？它内置了高效的字符串处理库。所以我想一开始很容易开始（见下面的链接）但是当复杂性真的变得很高时，构建一种语言会做得很好吗？

# 一些资源

[http://www.jayconrod.com/posts/37/a-simple-interpreter-from-scratch-in-python-part-1](http://www.jayconrod.com/posts/37/a-simple-interpreter-from-scratch-in-python-part-1)

## 这个真的很简单，但很好开始：

[http://www.jroller.com/languages/entry/python_writing_a_compiler_and](http://www.jroller.com/languages/entry/python_writing_a_compiler_and)

## 另一个值得参观的地方：

[http://morepypy.blogspot.in/2011/04/tutorial-writing-interpreter-with-pypy.html](http://morepypy.blogspot.in/2011/04/tutorial-writing-interpreter-with-pypy.html)

[http://morepypy.blogspot.in/2011/04/tutorial-part-2-adding-jit.html](http://morepypy.blogspot.in/2011/04/tutorial-part-2-adding-jit.html)

不过，第一个使用 pypy。我不熟悉它。我正在使用 cpython

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:33:58.030

> 当复杂性真的变得很高时，构建一种语言会做得很好吗？

随着复杂性的增加，您将感谢您选择在 Python 中而不是在 C/C++ 中实现它。我唯一建议的是使用解析库，比如 PyParsing，来减少你需要做的工作量（除非你也想学习如何实现解析器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:01:27.697

这实际上取决于您的语言有多复杂。我不会将 Python 用于 C++ 编译器，但我发现编写代码生成器以解析一种语言的代码（特别是 SQL 的数据定义子集）以生成另一种语言的代码非常方便。

考虑使用解析器生成器，而不是全部手动完成。我发现[PLY](http://www.dabeaz.com/ply/)非常方便。

# java - 如何在我的根文件夹中上传图像？

> ID：11897456
> 
> 赞同：0
> 
> 时间：2012-08-10T07:46:41.600
> 
> 标签：java, jsp, servlets

我已成功将我的图像上传到 c:/images 如何上传到我的根文件夹中？

```
String fileName = getFileName(filePart);
                          FileOutputStream os = new FileOutputStream("C:/images" + fileName);
                          os.write(b); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:51:57.853

可以`ServletContext.getRealPath(relativePath)`用来获取文件的真实路径。

```
String relativePath="/images/" + fileName;
String realPath=getServletContext().getRealPath(relativePath);
FileOutputStream stream=new FileOutputStream(realPath); 
```

# google-apps-script - Google Apps 脚本中的仪表板无法在 IE 中正确呈现？

> ID：11897459
> 
> 赞同：0
> 
> 时间：2012-08-10T07:46:50.887
> 
> 标签：google-apps-script, google-apps

Google Apps 脚本中的仪表板是否存在无法在 IE 中正确呈现的已知问题？我已经在谷歌网站的页面上嵌入了仪表板应用脚本。它在 Chrome 和 Firefox 中正确呈现，但在 IE 中，图表和过滤器/选择器看起来不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:08:40.553

我也可以验证这一点。我的[仪表板](https://script.google.com/macros/s/AKfycbyUootM9U5uXo_hcFD3GZXX5RHSOhMN6JvJxfnem2uRg4p78MU/exec)在 IE v9.0.8112.16421 上无法正确呈现 - 一些过滤器和图表会在屏幕上出现和消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:47:46.270

我们在工作中使用 Chrome 和 IE8（我认为它永远处于怪癖模式），所以我有这行来让 IE8 渲染得更好：

```
var app = UiApp.createApplication();
//Will be true if the browser is IE8, false otherwise
app.setStandardsMode((UiApp.getUserAgent().indexOf("MSIE 8.0") > -1)); 
```

在不同的浏览器中尝试标准模式，并根据需要将其设置为 true。

# php - Windows 中的 Web 套接字安装

> ID：11897462
> 
> 赞同：0
> 
> 时间：2012-08-10T07:47:21.647
> 
> 标签：php, mysql, web, websocket, real-time-updates

我对使用 nodejs 感到困惑。我需要帮助。我要做的就是创建一个 PHP MySql 应用程序来显示任何办公室的销售信息。我希望数据是实时的。也就是说，只要对数据库进行更改，结果就会显示在网页中，而无需刷新页面。经过研究，我发现nodejs和socketio可以完成这项工作，但我不确定如何实现这一点。我在办公室使用 XAMPP localhost。在这个问题上我真的需要帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:40:55.723

您可能需要考虑以下方法：在您的 PHP 中，通过传出 HTTP/POST 将数据推送到 WebSocket 服务器。WebSocket 服务器维护与 JavaScript 前端的实时连接。收到数据后，JS 会更新 UI。当您的 PHP 应用程序是经典应用程序（不是单页 Web 应用程序）时，这意味着当用户浏览您的 Web 应用程序时会加载新页面。这反过来意味着失去 WS 连接并重新建立它。

这些是一些挑战：

*   您不仅需要 WebSocket 服务器，还需要一些消息代理（发布和订阅）。
*   该服务器需要有一个 HTTP/POST (REST) 端点供您的 PHP 推送。

如果您想使用托管云服务，我建议您查看 pusher.com。

如果您想快速上手，托管自己的东西，但不想构建/开发功能，您可以查看[http://www.tavendo.de/webmq](http://www.tavendo.de/webmq) 这是一个示例：[https://github .com/tavendo/WebMQConnectPHP/tree/master/examples/basic](https://github.com/tavendo/WebMQConnectPHP/tree/master/examples/basic)

披露：我为 Tavendo 工作。

# java - 在运行时设置 JaxWsPortProxyFactoryBean 的端点

> ID：11897465
> 
> 赞同：0
> 
> 时间：2012-08-10T07:47:36.410
> 
> 标签：java, web-services, spring, endpoint

我正在使用 JAX-WS 和 Spring 从给定的 WSDL 创建 Web 服务客户端。如果您有 WSDL 并且预先知道端点地址，那么 JaxWsPortProxyFactoryBean 很容易配置。但是现在我想在运行时动态设置端点地址，因为它在应用程序启动时是不知道的。有人知道 JaxWsPortProxyFactoryBean 是否以及如何做到这一点？

# javascript - 通过提交表单设置元素属性

> ID：11897469
> 
> 赞同：-1
> 
> 时间：2012-08-10T07:47:59.247
> 
> 标签：javascript, html, forms

是否有可能，当我单击表单上的提交以将此 href 类设置为活动时？

```
<li><a class="" href="#" onClick="goto('#ajanlok', this); return false">Ajánl Dalt!</a></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:05:56.027

你可以创建一个这样的函数。

```
function makeActive() {
    document.getElementById("InsertIdOfHref").className += ' active';
} 
```

然后只需添加 `onClick="makeActive();"`并设置一个默认类到您的`<a>`. 像 class="AMAGAD"

下一次，只是谷歌它:)

做了一些修改。感谢您的评论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:50:30.160

尝试以下操作：

*   在打开的表单标签上添加属性“onSubmit”。
*   在您的特定标签上添加属性“id”和“class”。您还可以添加样式而不是类属性。
*   编写一个 javascript 方法来查找这个 a 标记，即带有`getElementById()`or `getElementsByTagname("a")[0]`（如果您的表单或站点上只有一个 a 标记）。
*   之后，将特定的 css 类名称或适当的样式属性添加到您的 a 标签。
*   确保此函数`return true;`在函数体的末尾包含 a。

# java-2d - Java2D 应用程序的复杂背景图像

> ID：11897471
> 
> 赞同：0
> 
> 时间：2012-08-10T07:48:09.270
> 
> 标签：java-2d

我正在开发一个（纸牌）游戏，作为背景，我需要一些花哨的东西。在我的研究中，我发现[微软的纸牌游戏](https://i.stack.imgur.com/5hcLC.jpg)有这个非常漂亮的绿色背景，它试图模仿一张牌桌。实际上它在这方面做得很好。

所以我的问题是，如何用最少的资源在 Java2D 中复制它。

![接龙截图](../Images/41efbfd1f3882beea339e996303f9ff0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:34:44.273

您可以使用背景图像来完成此效果。您可以像使用形状一样绘制它：

[Graphics.drawImage(Image img, int x, int y, ImageObserver 观察者)](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20java.awt.image.ImageObserver%29)

如果您没有这方面的资源，请考虑使用可以平铺的纹理。

# java - EJBTransactionRolledbackException：未找到查询的实体

> ID：11897472
> 
> 赞同：3
> 
> 时间：2012-08-10T07:48:15.990
> 
> 标签：java, jsp, exception, ejb, jboss7.x

我正在尝试从 JBoss 5.1 迁移到 JBoss 7.1.1。我使用 @EJB 注释访问我的 SessionBeans，但有些方法失败了（它们中的大多数都有效）。这是导致应用程序崩溃的代码片段之一：

```
try {
    Package latestPatch = ph.getLatestPatchForPackage(productName.toString(), serverId);
} catch(Exception e) {
    // ignore
} 
```

如果没有找到包（NoResultException）没关系，我只是忽略它。但是无法捕获 EJBTransactionRolledbackException，为什么不呢？我怎样才能解决这个问题？

```
09:42:07,795 ERROR [org.jboss.as.ejb3.tx.CMTTxInterceptor] (http-localhost-127.0.0.1-8080-3) javax.ejb.EJBTransactionRolledbackException: No entity found for query
09:42:07,796 ERROR [org.jboss.ejb3.invocation] (http-localhost-127.0.0.1-8080-3) JBAS014134: EJB Invocation failed on component PackageHandling for method public Package .PackageManagement.PackageHandling.getLatestPatchForPackage(java.lang.String,int,java.lang.String,java.lang.String): javax.ejb.EJBTransactionRolledbackException: No entity found for query
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.handleInCallerTx(CMTTxInterceptor.java:139) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInCallerTx(CMTTxInterceptor.java:204) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:306) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:32) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:173) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at PackageManagement.PackageHandling$$$view595.getLatestPatchForPackage(Unknown Source) [classes:]
    at org.apache.jsp.View.ServerManagement.PatchHistory_jsp._jspService(PatchHistory_jsp.java:289)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:489) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_02]
Caused by: javax.persistence.NoResultException: No entity found for query
    at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:286) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at PackageManagement.PackageHandling.getLatestPatchForPackage(PackageHandling.java:721) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_02]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_02]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_02]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_02]
    at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInCallerTx(CMTTxInterceptor.java:202) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    ... 42 more

09:42:07,839 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/SSIS2_JBoss7].[jsp]] (http-localhost-127.0.0.1-8080-3) Servlet.service() for servlet jsp threw exception: javax.persistence.NoResultException: No entity found for query
    at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:286) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at PackageManagement.PackageHandling.getLatestPatchForPackage(PackageHandling.java:721) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_02]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_02]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_02]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_02]
    at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInCallerTx(CMTTxInterceptor.java:202) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:306) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:32) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:173) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at PackageManagement.PackageHandling$$$view595.getLatestPatchForPackage(Unknown Source) [classes:]
    at org.apache.jsp.View.ServerManagement.PatchHistory_jsp._jspService(PatchHistory_jsp.java:289)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:489) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_02]

09:42:07,882 ERROR [org.jboss.as.txn] (http-localhost-127.0.0.1-8080-3) JBAS010152: APPLICATION ERROR: transaction still active in request with status 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:03:08.380

`NoResultException``getLatestPatchForPackage()`不会自行导致事务回滚，但是如果从事务方法（在您的情况下）抛出任何已检查的异常，EJB 会回滚事务。

因此，如果您想忽略此异常，您需要在内部捕获它`getLatestPatchForPackage()`并产生适当的结果（例如，返回`null`或抛出[应用程序异常](http://docs.oracle.com/javaee/6/api/javax/ejb/ApplicationException.html)）。

# php - OpenX：为图像横幅添加自定义字段（例如背景颜色）

> ID：11897480
> 
> 赞同：3
> 
> 时间：2012-08-10T07:48:48.413
> 
> 标签：php, openx

为图像横幅添加自定义字段而不为新横幅类型创建单独的插件的最简单方法是什么？

如果插件是唯一的选择——我在哪里可以找到有关如何操作的信息？

（我正在研究 OpenX 视频插件，但它包含许多我不需要的功能，因此变得相当复杂。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:08:50.510

我理解需要找到“开箱即用”的解决方案，但只有在没有其他选择的情况下我才会这样做。

如果您只想拥有可以导航到选定广告位置的基本横幅，您可以制作自己的上传表单。你可以找到很多例子来帮助你。

要收集的信息可以是您需要的任何信息，例如图像选择框、图像尺寸、BG 颜色、URL 链接、ALT 文本、横幅类型、横幅位置等。

如果您要通过它们获利，则可以计算点击次数。

一种简单的方法是将您的广告暂时退回到空白页面，以便在重定向到实际页面之前在您的数据库中注册您的信息。

在不知道您需要什么规模或实施的情况下，人们很难针对您的问题做出正确的回答。

我会说使用给定的广告管理员，然后您需要做的就是将代码粘贴到您的网站中。

我个人在我的网站上使用 Google AdSense，但还有其他的。

# c# - 内存转换中的 C# XSLT

> ID：11897482
> 
> 赞同：1
> 
> 时间：2012-08-10T07:48:56.427
> 
> 标签：c#, xslt, memorystream

我目前正在使用以下代码运行实时“内存中”XSLT 转换

```
XmlDocument XmlDoc = new XmlDocument();
XmlDoc.LoadXml(DS.GetXml());
XslCompiledTransform XsltTranformation = new XslCompiledTransform();
XsltTranformation.Load(@"C:\Users\maskew\Desktop\XSLTMapping.xsl");
Stream XmlStream = new MemoryStream();
XmlDoc.Save(XmlStream); //Stream is still blank after this line
XmlReader XmlRdr = XmlReader.Create(XmlStream);
MemoryStream stm = new MemoryStream();
XsltTranformation.Transform(XmlRdr, null, stm);
stm.Position = 1;
StreamReader sr = new StreamReader(stm);
string Output = sr.ReadToEnd();
Output = Output.Substring(2);
XmlDoc.LoadXml(Output);
XmlWriter XmlWrtr = XmlWriter.Create(@"C:\Users\maskew\Desktop\XmlMapping.xml");
XmlDoc.WriteTo(XmlWrtr);
XmlWrtr.Flush();
XmlWrtr.Close(); 
```

但是，当我在第 6 行将文件从 XmlDocument 移动到 MemoryStream 时，流在检查时不包含任何内容，从而阻止了整个程序的运行。

有谁知道为什么会发生这种情况？

更新：流现在包含信息，但是 XmlReader 对象仍然没有收到任何信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:07:18.580

尝试简单化

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.PreserveWhitespace = true;
xmlDoc.LoadXml(DS.GetXml());

// Create a writer for writing the transformed file.
XmlWriter writer = XmlWriter.Create(@"C:\Users\maskew\Desktop\XmlMapping.xml");

// Create and load the transform with script execution enabled.
XslCompiledTransform transform = new XslCompiledTransform();
XsltSettings settings = new XsltSettings();
settings.EnableScript = true;
transform.Load(@"C:\Users\maskew\Desktop\XSLTMapping.xsl", settings, null);

// Execute the transformation.
transform.Transform(xmlDoc, writer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T07:58:42.377

```
Stream XmlStream = new MemoryStream(); 
```

里面怎么会有东西？您正在构建一个空的 memoryStream ...

**编辑 ：**

您应该尝试使用“使用”说明 (http://msdn.microsoft.com/fr-fr/library/yh598w02) 来澄清它。基本上，StreamReader、MemeryStream 等类实现了 IDisposable 接口。如果你用 using 包装它们，它会自动为你处理对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T08:00:48.697

尝试刷新和重置流：

```
XmlDoc.Save(XmlStream);
XmlStream.Flush();
XmlStream.Position = 0;
XmlReader XmlRdr = XmlReader.Create(XmlStream); 
```

# tcl - -tcl 中 lsearch 中的结束索引

> ID：11897492
> 
> 赞同：4
> 
> 时间：2012-08-10T07:50:12.680
> 
> 标签：tcl

该`lsearch`命令具有[`-start index`](http://www.tcl.tk/man/tcl8.4/TclCmd/lsearch.htm#M18)作为选项之一

> **-start** *index*从位置*index*开始搜索列表。如果*index*的值为**end**，它指的是列表中的最后一个元素，而 **end -** *integer*指的是列表中的最后一个元素减去指定的整数偏移量。

我想`-end`和`-start`. 如何做呢？可以通过丢弃返回列表中大于或等于`-end`index的索引来完成。`lsearch`但是有没有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T08:27:34.147

在您的情况下，我很想用它`lrange`来生成正在搜索的列表的副本，而没有您不想返回的元素。

```
lsearch [lrange $theList $start $end] $searchTerm 
```

该`-start`选项的真正目的是允许跳过以前找到的匹配项，现在我们有了该`-all`选项（它`lsearch`返回一个可以匹配搜索词的*所有位置的列表），它的用处不大。*它有点像这样使用：

```
for {set idx -1} {[set idx [lsearch -start [incr idx] $list $term]] >= 0} {} {
    # Process the match index...
    puts "found $term at $idx"
} 
```

现在你会写：

```
foreach idx [lsearch -all $list $term] {
    puts "found $term at $idx"
} 
```

# apache - 对 /favicon.ico 的请求始终返回 Subversion favicon.ico 但我找不到导致此问题的配置

> ID：11897496
> 
> 赞同：0
> 
> 时间：2012-08-10T07:50:43.363
> 
> 标签：apache, svn, virtualhost, favicon, apache-config

在我用于一些内部开发空间等的服务器上，配置了 Apache、Git、Subversion 等。VirtualHost 配置并没有什么特别之处，我认为我可以完全控制和理解该服务器的配置及其运行方式。我想我错了。我最近发现，无论我尝试什么 VirtualHost，所有请求都会在访问`<vhost>.<domain>/favicon.ico`. 这让我感到困惑——也让我有点恼火，因为我确信我对这个服务器的配置了如指掌。

它似乎没有造成任何问题，但我很生气，某处有一个配置做了我明确没有要求的事情。所以我一直在试图追踪这个配置，但到目前为止还没有运气。

服务器运行的是 Gentoo Linux，所以我想我正在寻找`<Location>`Apache 配置中的某个块。我一直在检查我所有的 VirtualHost 定义、我的所有模块配置和我的 Apache 配置。我什至已经到了我所有文件中`grep`的所有条目。仍然没有运气。`<Location>``favicon``/etc/`

关于如何追捕这件事，我已经没有想法了，所以我希望你们能得到一些帮助。

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:46:23.637

好吧，我有点懂事了。办公室的一天很慢，所以我有时间花在这个小细节上：）

我现在知道 favicon.ico 的来源——我想。

在我的服务器`/var/www/localhost/htdocs/`中`favicon.ico`，出于某种原因，我不知道 Subversion 徽标。如果我重命名此文件，一切都会突然起作用，并且它会正确抓取我为每个 VirtualHost 放置的网站图标。

这很好，但我仍然对为什么主机图标优先于单个 VirtualHosts 图标感到困惑。我似乎仍然无法`<Location>`在任何可能导致这种行为的 VirtualHosts 中找到任何定义。

# antlr - ANTLR 制定语法分析插入/更新/删除 SQL 查询

> ID：11897500
> 
> 赞同：3
> 
> 时间：2012-08-10T07:50:59.763
> 
> 标签：antlr, antlr3, antlrworks, sql-parser

我是`ANTLR`语法写作的新手。我的要求是解析插入/更新/删除`SQL`查询以获取详细信息，例如正在更新/插入/删除行的表、列列表及其值等。是的，有一个很好的文档`ANTLR`，但如果有人可以帮助我用于查询解析的特定语法将有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:00:13.183

Wiki 上有各种 SQL 语法：[http ://www.antlr.org/grammar/list](http://www.antlr.org/grammar/list)

但请注意：它们是由 ANTLR 用户贡献的，很可能它们没有经过适当的测试和/或包含错误。

但是为什么要自己生成一个 SQL 解析器呢？使用一些现有的 SQL 解析器可能会更容易。只需在“SQL parser Java”上进行搜索（假设您使用的是 Java），您一定会得到几十个点击。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T08:19:02.130

实现一个“体面的”SQL 解析器实际上是相当困难的。在 SQL 中，可以编写各种复杂的语句（嵌套连接，...），而且人们确实会这样做，因此您必须实现“完整”的语言。（我见过涵盖数十页的 SQL 查询。愚蠢，是的，但是您必须处理遇到的问题）。

我建议检查[SQL2011（标准）](http://en.wikipedia.org/wiki/SQL:2011)相当全面。但是，该语法可能对 ANTLR 不友好，因此请为大量工作做好准备。

您还必须担心标准 SQL 的数据库/供应商特定扩展。PL/SQL（只是 SQL 子语言部分）包含许多特定于 Oracle 的扩展。如果您面对 PL/SQL 存储过程，并且想要进行表/列跟踪，那么您可能也必须执行 PL/SQL 的过程部分，而且这也相当大。

# java - java在内存中缓存大文件的数据

> ID：11897501
> 
> 赞同：4
> 
> 时间：2012-08-10T07:51:01.743
> 
> 标签：java, algorithm, memory-management, garbage-collection, nlp

嗨，我正在从事自然语言处理的拼写校正项目，我应该从大小为~~6.2 MB~~ 1 GB 的文件中读取数据。虽然它工作正常，但我面临的问题是，每次运行 java 程序时，我都必须将数据加载到内存中，并且每次运行都需要相同的时间。

有没有什么办法可以将这些数据缓存到java中的内存中？有人可以建议我解决它吗？

基本上我想知道的是，在内存中存储大文件内容的过程是什么，这样我就不必再次阅读它了？可以说文件是GB。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T08:08:13.587

6.2 MB 的数据可能会存储在操作系统的缓存中，因为它是相对少量的数据，因此根本不需要花费太多时间来加载。您应该调查是否是解析这些数据需要很长时间，并可能将解析后的数据缓存到二进制文件中以便快速加载。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T07:55:17.697

6.2 MB 不是很大，除非这需要很长时间并且您不能使用后台线程来加载文件，否则我不会担心。

您可以使用内存映射文件，但这些文件使用起来并不简单。如果您有 1 GB 到 1 TB 的数据，内存映射文件很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T08:10:07.020

我在这里看到从文件加载/解析数据并创建缓存会导致您出现一些时间延迟，并且您希望每次都节省时间。

在这种情况下，我建议您使用[EHcache](http://ehcache.org/)。EHcache（它是ofcource开源和apache许可的）将为您维护cahce，防止您的应用程序出现内存不足错误，并将cahce的状态保存到磁盘。

因此，在下次启动应用程序时，您可以将应用程序配置为直接从 EHcahce 数据文件启动，这样您就可以避免一次又一次地解析文件。

您仍然可以将您正在使用的任何 cahce 加载到内存中，唯一的区别是通过 EHCache API 加载它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T02:06:58.607

如果您打算对程序进行编码/调试，并且似乎为您所做的每个更改重新加载资源需要太多时间，那么请考虑[JRebel Social](https://social.jrebel.com/dashboard)（如果这是一个非商业项目，或者[JRebel](http://zeroturnaround.com/software/jrebel/)如果是）。它允许您在不重新启动 VM 的情况下修复代码中的错误或进行一些更改，因此您可以保留加载的数据（例如，存储在静态变量中），而无需使用任何缓存，甚至不必重新启动 VM。请参阅我之前的问题：[Loading Resources Once in Java](https://stackoverflow.com/questions/2148161/loading-resources-once-in-java)。但是如果它是用于生产的，并且您的目的是节省内存而不是节省加载时间（在大多数情况下，这是一个仅限于启动期间的问题），那么 EhCache 或其他缓存库就足够了。

# jquery - Jquery .height() 给出舍入值而不是精确值

> ID：11897503
> 
> 赞同：1
> 
> 时间：2012-08-10T07:51:08.427
> 
> 标签：jquery

[http://jsfiddle.net/XRXNv/](http://jsfiddle.net/XRXNv/)

通过浏览器观看时，精确高度为 18.4 px，jquery 给出 18

如何解决这个问题

[http://jsfiddle.net/XRXNv/1/](http://jsfiddle.net/XRXNv/1/)

在这第二个jsfiddle中，我想将视口高度设置为前8个li-s的总和，并且有一个小问题......

IE 给出 144，Mozilla 172，chrome 160 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:32:08.370

在不同浏览器中收到不同高度的原因不是像素舍入问题，而是因为不同浏览器之间的默认渲染样式不同。

如果您希望所有浏览器的高度完全相同，请设置列表样式以手动设置高度。当您使用它时，将其设置为整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T07:55:18.407

您不能以像素为单位设置十进制值：

> [一个元素可以在 html/css 中有一个小数高度吗？](https://stackoverflow.com/questions/4778109/can-an-element-have-a-a-decimal-height-in-html-css)

如果您在 javascript 控制台中查看计算的样式，您会看到高度为 18px

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T07:59:07.790

我认为您不应该使用十进制数字。jQuery 将数字转换为 int。而不是双精度或浮点数。我建议坚持整数:)

# php - PHP 将字符串格式化为数字

> ID：11897507
> 
> 赞同：0
> 
> 时间：2012-08-10T07:51:51.000
> 
> 标签：php

我有这个 HTML 代码：

```
<span class="price">Price: <font class="rosu_12px_bold">2'099<sup>99</sup></font> EUR</span> 
```

我设法提取了价格：2'09999

我无法捕捉 sup 标签并插入 .

现在，在我的数据库中，我只能存储实数

提取的值不是数字，因此在尝试插入此值时我得到 0 值。

我只能这样插入：2099.99

我永远不知道我提取的值是什么样的，所以我需要一个解决方案来格式化它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T07:59:40.343

试试这个：

```
<?php
    $abc="2'099";
    echo preg_replace('/[^0-9]/i', '', $abc);
    ?> 
```

编辑：请记住，这也将替换句点（。）。

另一个编辑：您可以使用 strip 标签来去除 html 标签

```
<?php
$abc="<font class='rosu_12px_bold'>2'099<sup>99</sup></font>";
echo preg_replace('/[^0-9.]/i', '', strip_tags($abc));
?> 
```

编辑：但是 sup 标签之间的 99 可能表示货币的较低面额可能是 99 美分。在这种情况下，上面的示例将不起作用。

还有一个编辑，在使用条形标签之前，您可以用句点（。）替换 sup 标签，然后使用条形标签，如果您想保持货币的较低面额。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:56:23.223

我只得到类似`1'23499`或`1.99989`或`1'345'99`或`1'234.99`或其他格式的字符串。

问题是如何获得 99 美分？

这些值涉及以下字符：

```
0 1 2 3 4 5 6 7 8 9 . , ' 
```

以任何可能的组合

我的解决方案是：

1.  `0 - 9`用**`.`**（*点*）替换所有不是数字的东西

2.  解析字符串，从位置 0 到 strlen-1，从第一个**`.`**（*点*）的位置开始，尝试插入 3 到 3 个字符**`.`**（*点*）。如果已到达字符串的末尾，请避免插入 .

3.  查找插入 的最后一个**`.`**（*点***`.`**）的位置并删除所有其他（*点*）。

结果应该是数字 1234.99。

# android - 如何标记视频播放器以打开其他应用程序的视频文件？

> ID：11897511
> 
> 赞同：2
> 
> 时间：2012-08-10T07:51:59.340
> 
> 标签：android

我写了一个视频播放器，想知道...当您从其他应用程序（例如文件浏览器）单击视频文件时，会出现一个应用程序列表，可以打开此视频文件。

如何让我的播放器也出现在该列表中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:17:03.977

你必须`Intent`在你的活动中注册你想要的。

从 API 15 开始，您需要将[CATEGORY_APP_MUSIC](http://developer.android.com/reference/android/content/Intent.html#CATEGORY_APP_MUSIC)添加到您的应用清单中，可能在[ACTION_MAIN](http://developer.android.com/reference/android/content/Intent.html#ACTION_MAIN)意图过滤器下。

如果您想针对 API 8，也可以在意图过滤器中使用[INTENT_ACTION_MUSIC_PLAYER 。](http://developer.android.com/reference/android/provider/MediaStore.html#INTENT_ACTION_MUSIC_PLAYER)这是一个示例清单部分..

```
<activity android:name=".ui.MyActivity" >
<intent-filter>
    <category android:name="android.intent.action.MAIN" /> <!--  If this is the main activity -->
    <action android:name="android.intent.action.MUSIC_PLAYER" />
    <action android:name="android.intent.category.APP_MUSIC" />
    <data android:mimeType="video/*" /> <!-- To make sure we let Android know that we accept video -->
</intent-filter>
</activity> 
```

希望这可以帮助。

# django - Django：外键和多个模型的最佳实践

> ID：11897512
> 
> 赞同：1
> 
> 时间：2012-08-10T07:52:08.983
> 
> 标签：django, data-structures, foreign-keys, abstract-class, foreign-key-relationship

嗨 Stackoverflow 人，

从一个模型引用到 ForeignKeys 选择的最佳方法是什么？

我正在开发一个租赁应用程序，其中包括 GenericVehicle、Bikes 和 Cars 的模型。

```
class GenericVehicle(models.Model):
    licence = models.CharField(max_length=128)
    ...
    class Meta:
        abstract = True

class Bike(GenericVehicle):
    engine_type = models.CharField(max_length=128)
    ...

class Car(GenericVehicle):
    number_of_doors = models.SmallIntegerField()
    ... 
```

现在我有一个用于租赁登记的模型，我想在其中登记租用的车辆。我不确定这里的最佳做法。到目前为止，我有两个外键并确保至少有一个已填充。但是这种解决方案似乎效率很低，并且不能很好地适用于多种车辆类型。

**改进类结构/定义的最佳方法是什么？**

```
class Rental(models.Model):
    rental_bike = models.ForeignKey(Bike)
    rental_car = models.ForeignKey(Car)
    rental_date = ... 
```

感谢您的意见。一段时间以来，我一直在努力寻找有效的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:57:26.103

Django 为您提供了一个[`GenericForeignKey`](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#id1). A`GenericForeignKey`将需要模型上的字段，一个用于保存引用的模型，另一个用于`ContentType`保存对象的 id：

```
from django.db import models
from django.contrib.contenttypes.models import ContentType
from django.contrib.contenttypes import generic

class Rental(models.Model):
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()

    rental_vehicle = generic.GenericForeignKey('content_type', 'object_id') 
```

但请记住，这不是数据库级别的外键，只是 Django 模拟外键的一些典型行为。

# bash - bash 从日志文件中提取 ip 并保存到 ext 文本文件

> ID：11897517
> 
> 赞同：1
> 
> 时间：2012-08-10T07:52:26.410
> 
> 标签：bash

我需要创建一个 bash 文件来搜索日志文件中包含的所有行

```
Aug  9 16:11:46 igs kernel: [ATTS] Caution: IN=eth0 OUT= MAC=xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx SRC=1.1.1.1 DST=192.168.0.100 LEN=33 TOS=0x00 PREC=0x00 TTL=121 ID=9690 DF PROTO=TCP SPT=601 DPT=12500 LEN=13
Aug  9 16:11:46 igs kernel: [ATTS] Caution: IN=eth0 OUT= MAC=xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx SRC=2.2.2.2 DST=192.168.0.100 LEN=33 TOS=0x00 PREC=0x00 TTL=121 ID=9689 DF PROTO=TCP SPT=602 DPT=12502 LEN=13
Aug  9 16:11:46 igs kernel: [ATTS] Caution: IN=eth0 OUT= MAC=xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx SRC=3.3.3.3 DST=192.168.0.100 LEN=33 TOS=0x00 PREC=0x00 TTL=121 ID=9691 DF PROTO=TCP SPT=600 DPT=12503 LEN=13
Aug  9 16:11:46 igs kernel: [ATTS] Caution: IN=eth0 OUT= MAC=xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx SRC=1.1.1.1 DST=192.168.0.100 LEN=33 TOS=0x00 PREC=0x00 TTL=121 ID=9691 DF PROTO=TCP SPT=600 DPT=12503 LEN=13 
```

然后提取“SRC=”中的IP并将IP保存到名称为“ip.list”的外部文件中，但不要重复相同的IP

ip.list 的示例输出

```
1.1.1.1
2.2.2.2
3.3.3.3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T08:01:34.437

您可以为此使用`awk`和：`sort`

```
awk '/Caution: IN=/ {print substr($11,5)}' infile | sort -u 
```

只需将搜索字符串调整为您想要的（我使用过`"Caution: IN="`）。

它的`awk`作用是，对于与搜索字符串匹配的每个石灰，它会打印出从第五个字符（IP 地址的第一个数字）开始的第十一个参数 ( `"SRC=aaa.bbb.ccc.ddd"`)。

然后传递其输出，`sort -u`首先排序然后删除重复的行。

输出是您所期望的：

```
pax> awk '/Caution: IN=/ {print substr($11,5)}' infile | sort -u
1.1.1.1
2.2.2.2
3.3.3.3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:12:18.680

`sed`也可以这样做：

```
 sed 's/.*SRC=\([0-9.]\+\).*/\1/' infile | sort -u 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:10:35.247

或使用`grep`and `coreutils`：

```
grep Caution: logfile | cut -d= -f5 | cut -d' ' -f1 | sort -u 
```

# android - Android addTab favSpec

> ID：11897519
> 
> 赞同：0
> 
> 时间：2012-08-10T07:52:30.523
> 
> 标签：android, tabs, illegalargumentexception

早上好！

我一直在

> “TabView java.lang.IllegalArgumentException：您必须指定创建选项卡内容的方式”

在创建 TabSpec favSpec 时，这是出现故障线的代码块：

```
mTabHost.addTab(registerSpec);
mTabHost.addTab(weatherSpec);
mTabHost.addTab(commentSpec);
mTabHost.addTab(contactSpec);
mTabHost.addTab(localizationSpec);
mTabHost.addTab(mapSpec);
mTabHost.addTab(termsSpec);
mTabHost.addTab(favSpec); // This is the fault line 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:17:45.510

由于词法错误，favSpec 的内容没有被创建，因此 favSpec 的选项卡是空的 :) 我一给它内容，一切就OK了。

# silverlight - 如何使用 Silverlight 在 Windows Phone 中发送和接收文本？

> ID：11897520
> 
> 赞同：0
> 
> 时间：2012-08-10T07:52:30.743
> 
> 标签：silverlight, windows-phone

我想通过网络服务从 Windows Phone 向其他 Windows Phone 发送消息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:47:29.543

利用[推送通知](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402558%28v=vs.92%29.aspx)。它们用于在第三方电话上启动活动。它们分为三种类型：Tile Notification、Toast Notification 和 Raw Notification。

当应用程序未运行时，会收到 Toast 通知（例如：SMS 警报）。如果出于某种原因从一部手机发送到另一部手机意味着它们同时运行，请考虑使用原始通知。但是，我想您应该同时使用它们：如果删除了原始通知（这通常意味着应用程序没有在前台运行），请发送 Toast 通知。

据我了解您的要求，您应该执行以下操作：

1.  一旦应用程序启动（或用户登录），建立推送通道并从 Microsoft Push Notification Server 为手机请求 PushUri
2.  将 PushUri 发送到您的服务，将其与用户关联并保存。
3.  要将消息发送到电话应用程序，只需将适当的参数传递给其 PushUri。您可以从您的网络服务或直接从另一部电话执行此操作。

您可能会发现[文档](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402537%28v=vs.92%29.aspx)很有用。有如何建立、发送和接收它们的示例。

PS 考虑到第二个 Toast 通知也可能失败，因为在两个通知之间的时间跨度内，用户可能会启动您的应用程序。不要忘记处理这个。

# eclipse - 带有静态类的 Eclipse RCP activeWhen 表达式

> ID：11897523
> 
> 赞同：0
> 
> 时间：2012-08-10T07:52:46.373
> 
> 标签：eclipse, expression, handler, core, rcp

所以我有这样的课：

```
public class A {
   ...
   public static class B {
      ...
   }
} 
```

我在我的 rcp 应用程序中有一个处理程序，定义如下：

```
<extension
         point="org.eclipse.ui.handlers">
      <handler
            class="HandlerClass"
            commandId="commandId">
         <activeWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false">
                  <instanceof
                        value="A.B">
                  </instanceof>
               </iterate>
               <count
                     value="1">
               </count>
            </with>
         </activeWhen>
      </handler>
</extension> 
```

instanceof 部分不起作用。我想要做的是检查选择变量中的项目是否属于B类型。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:53:53.293

您可以使用 Property Testers 以编程方式检查处理程序是否处于活动状态。

检查此博客条目：[我、我自己和属性测试人员](https://www.compeople.eu/blog/?p=704)

# java - 无法使用 spring url 标签加载保存到文件系统的图像

> ID：11897524
> 
> 赞同：0
> 
> 时间：2012-08-10T07:52:48.310
> 
> 标签：java, jsp, url, spring-mvc, image

我正在使用它在我的控制器中保存上传的图像

```
saveImage(context.getRealPath("/resources/image.jpg"), image); 
```

然后尝试使用这个在 JSP 中加载图像

```
<img src="<c:url value="/resources/image.jpg"/>" /> 
```

我可以在浏览器地址栏中使用它来访问图像

```
home/user/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps/SpringMVCTest/resources/image.jpg 
```

但是图像没有加载到jsp中，只有一个断开的链接图像。

我也`<mvc:resources mapping="/resources/**" location="/resources" />`用来提供静态内容。

为什么这不起作用？

琐碎的答案。一切都是正确的，除了我错过了一个“/”

```
<mvc:resources mapping="/resources/**" location="/resources" /> 
```

它应该是

```
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T11:39:39.223

您应该将图像保存在项目文件之外的文件夹中，因为一旦重新部署它，您肯定会丢失提取目录中的文件。

更好的是，将图像保存在某个保存位置，我敢肯定，您将路径保存在数据库中，并且这些图像需要独立于您的部署和 webcontent 文件夹中的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:55:48.090

路径

> 主页/用户/工作空间/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps/SpringMVCTest/resources/image.jpg

是您服务器的文件系统路径，您的客户端将无法访问它，

而是将图像放在公共网络区域并给出相对路径，例如

```
/contextofyourweb/images/1.jpeg 
```

或创建一个 ImageServlet 从服务器文件系统读取文件并将其放入 servlet 响应

有关的：

*   [使用 servlet 从 Web 根文件夹外的文件夹中检索图像](https://stackoverflow.com/questions/11013300/retrieve-images-from-a-folder-outside-web-root-folder-using-servlet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:43:14.387

我有同样的问题。我的要求是视图的 Html5 和 Jquery，没有 JSP。我有模拟用 C 编写的服务器的 Spring MVC 应用程序。

我的弹簧 MVC 配置：

```
 <mvc:resources mapping="/resources/**" location="/resources" /> 
```

由于我无法使用标签，我找到了一个有效的 jQuery 解决方案：

```
 $(function(){
        var ctxRoot = window.location.pathname;
        var imgBtn1Url="/"+ctxRoot.split("/")[1]+"/resources/img/glyphs/glyphicons_173_play.png";
        alert(imgBtn1Url)
        $('#imgBtn1').attr('src', imgBtn1Url);
    }); 
```

HTML：`<img id="imgBtn1" alt="" data-src="holder.js/300x200" class="thumbnail" />`

在我的情况下 ctxRoot=/viper/config 因为 spring Dispatcher Servlet 的 url 模式。在您的情况下， location.pathname 可能就足够了。

```
 <servlet-mapping>
        <servlet-name>conf</servlet-name>
        <url-pattern>/config/*</url-pattern>
   </servlet-mapping> 
```

我希望其他使用 Spring MVC 的人会发现这很有帮助。

# ajax - 如何禁用网络安全

> ID：11897530
> 
> 赞同：0
> 
> 时间：2012-08-10T07:53:17.370
> 
> 标签：ajax, webkit, cross-domain

有没有办法在**webkit gtk**中修改以**禁用网络安全**？（是 WebKitWebSettings 中的设置吗？还是在哪里？）

我的目的是允许来自我的浏览器应用程序的任何跨域请求。我已经用谷歌搜索了一段时间。这似乎是 webkit 中的一个错误？

如果还没有解决，为什么我可以在 cmd-line 中使用带有 --disable-web-security 的 google-chrome？Chrome 也是基于 webkit 的浏览器...

欢迎任何建议！！！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T03:04:34.403

对比webkit和gtk的源码，发现webcore中其实设置了web security enable参数，而gtk websetting中没有响应功能。解决这个问题的唯一方法是修改gtk的源代码并重新编译。

# iphone - 检测 NSString 是否包含中文字符

> ID：11897531
> 
> 赞同：2
> 
> 时间：2012-08-10T07:53:29.600
> 
> 标签：iphone, objective-c, nsstring

我有一个`UISearchBar`，如果用户输入英文，我希望我的数据按拼音排序，并在用户输入汉字时按字符本身排序。

有没有类似的东西

```
if (searchText isKindofClass: UTF-8String) 
```

检测一个是否`NSString`包含汉字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T08:45:45.990

您可以使用 a`NSRegularExpression`搜索“字符族”：

[https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)

[http://userguide.icu-project.org/strings/regexp](http://userguide.icu-project.org/strings/regexp)

他们举了一个例子`\p{script=cyrillic}`，我想通过搜索你会发现一些与中文相关的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-23T09:38:14.270

如果你习惯`\p{script=Han}`检测中文，一定要`\`在前面加上'' `\p`。所以就像

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\\p{Script=Han}" options:NSRegularExpressionCaseInsensitive error:&error]; 
```

# php - Zend Framework 2 RC3 Zend\Form#getData()

> ID：11897534
> 
> 赞同：5
> 
> 时间：2012-08-10T07:53:46.730
> 
> 标签：php, forms, zend-form, zend-framework2, zend-inputfilter

我想知道我是否做错了什么，或者这是否是 ZF2 中的一个错误：当我尝试在表单上设置一些数据时，验证它并检索数据它只是一个空数组。

我从一些类中提取了这段代码以简化问题

```
 $form = new \Zend\Form\Form;
    $form->setInputFilter(new \Zend\InputFilter\InputFilter);
    $form->add(array(
        'name' => 'username',
        'attributes' => array(
            'type'  => 'text',
            'label' => 'Username',
        ),
   ));

   $form->add(array(
        'name' => 'submit',
        'attributes' => array(
            'type'  => 'submit',
            'value' => 'Register',
        ),
    ));

    if ($this->getRequest()->isPost()) {

        $form->setData($this->getRequest()->getPost()->toArray());
        if ($form->isValid()) {

            echo '<pre>';
            print_r($form->getData());
            print_r($form->getMessages());
            echo '</pre>';
        }
    } 
```

两个`print_r()`s 都显示空数组。我没有从表格中得到任何数据，也没有消息。是我的错还是Z​​F2的错？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T08:00:20.437

感谢@SamuelHerzog 和@Sam，表单需要所有元素的inputFilters。对于问题中描述的形式，这个简短的代码足以让它工作。

```
 $inputFilter = new InputFilter();
    $factory     = new InputFactory();

    $inputFilter->add($factory->createInput(array(
        'name'     => 'username'
    )));

    $form->setInputFilter($inputFilter); 
```

不需要对元素有任何规则，只需将其添加到 inpoutFilter 即可基本工作。默认情况下，任何元素都有所需的标志，并且不能是空白值。

# android - 在 android 中使用 docx4j 读取 word doc 时遇到以下问题

> ID：11897537
> 
> 赞同：2
> 
> 时间：2012-08-10T07:53:54.283
> 
> 标签：android, docx4j

**目的：将word doc的内容读到cosole上**

使用环境：Windows 7 32bit Eclipse IDE Indigo Android 4.1 API 16 Java 1.6 库：docx4j-2.8.0

以下是我用来在控​​制台上打印 word doc 文本的代码片段

```
WordprocessingMLPackage wordMLPackage = WordprocessingMLPackage.load(new java.io.File(Environment.getExternalStorageDirectory().getAbsolutePath(), selectedFromList));

MainDocumentPart documentPart = wordMLPackage.getMainDocumentPart(); 
System.out.println("file contents --->>>>>" +documentPart.getContent());    

DocPropsCorePart docPropsCorePart = wordMLPackage.getDocPropsCorePart();
CoreProperties coreProps = (CoreProperties)docPropsCorePart.getJaxbElement();

System.out.println("'dc:title' is " + coreProps.getTitle().getValue().getContent().get(0));
System.out.println(coreProps.getTitle().getValue().getClass().getName() );
System.out.println("'dcterms:created' is " + coreProps.getCreated().getClass().getName() ); 
```

当我尝试执行上述代码时，出现以下问题 eclipse logcat 显示以下日志

```
08-10 12:22:37.853: I/dalvikvm(1761): Could not find method javax.xml.bind.JAXBContext.createMarshaller, referenced from method 

org.docx4j.openpackaging.packages.WordprocessingMLPackage.save
08-10 12:22:37.853: W/dalvikvm(1761): VFY: unable to resolve virtual method 7579: Ljavax/xml/bind/JAXBContext;.createMarshaller ()Ljavax/xml/bind/Marshaller;
08-10 12:22:37.853: D/dalvikvm(1761): VFY: replacing opcode 0x6e at 0x0017

08-10 12:22:37.863: I/dalvikvm(1761): Could not find method javax.xml.bind.JAXBContext.createMarshaller, referenced from method 

org.docx4j.openpackaging.packages.WordprocessingMLPackage.transform

08-10 12:22:37.863: W/dalvikvm(1761): VFY: unable to resolve virtual method 7579: Ljavax/xml/bind/JAXBContext;.createMarshaller ()Ljavax/xml/bind/Marshaller;
08-10 12:22:37.863: D/dalvikvm(1761): VFY: replacing opcode 0x6e at 0x000d

08-10 12:22:37.863: I/dalvikvm(1761): Failed resolving Lorg/docx4j/jaxb/JaxbValidationEventHandler; interface 1254 'Ljavax/xml/bind/ValidationEventHandler;'
08-10 12:22:37.863: W/dalvikvm(1761): Link of class 'Lorg/docx4j/jaxb/JaxbValidationEventHandler;' failed

08-10 12:22:37.873: D/dalvikvm(1761): DexOpt: unable to opt direct call 0x46db at 0x1e in Lorg/docx4j/openpackaging/packages/WordprocessingMLPackage;.transform
08-10 12:22:37.873: D/dalvikvm(1761): DexOpt: unable to opt direct call 0x1dba at 0x26 in Lorg/docx4j/openpackaging/packages/WordprocessingMLPackage;.transform

08-10 12:22:37.883: E/dalvikvm(1761): Could not find class 'org.apache.poi.poifs.filesystem.POIFSFileSystem', referenced from method 

org.docx4j.openpackaging.packages.OpcPackage.load

08-10 12:22:37.883: W/dalvikvm(1761): VFY: unable to resolve new-instance 1658 (Lorg/apache/poi/poifs/filesystem/POIFSFileSystem;) in 

Lorg/docx4j/openpackaging/packages/OpcPackage;
08-10 12:22:37.883: D/dalvikvm(1761): VFY: replacing opcode 0x22 at 0x001a

08-10 12:22:37.893: I/dalvikvm(1761): Could not find method javax.xml.bind.JAXBContext.createUnmarshaller, referenced from method 

org.docx4j.openpackaging.packages.OpcPackage.load

08-10 12:22:37.893: W/dalvikvm(1761): VFY: unable to resolve virtual method 7580: Ljavax/xml/bind/JAXBContext;.createUnmarshaller ()Ljavax/xml/bind/Unmarshaller;
08-10 12:22:37.893: D/dalvikvm(1761): VFY: replacing opcode 0x6e at 0x004d

08-10 12:22:37.893: I/dalvikvm(1761): Could not find method javax.xml.bind.JAXBContext.createMarshaller, referenced from method 

org.docx4j.openpackaging.packages.OpcPackage.save

08-10 12:22:37.893: W/dalvikvm(1761): VFY: unable to resolve virtual method 7579: Ljavax/xml/bind/JAXBContext;.createMarshaller ()Ljavax/xml/bind/Marshaller;
08-10 12:22:37.893: D/dalvikvm(1761): VFY: replacing opcode 0x6e at 0x0017

08-10 12:22:37.905: D/dalvikvm(1761): DexOpt: unable to opt direct call 0x2654 at 0x1c in Lorg/docx4j/openpackaging/packages/OpcPackage;.load
08-10 12:22:37.905: D/dalvikvm(1761): DexOpt: unable to opt direct call 0x2651 at 0x21 in Lorg/docx4j/openpackaging/packages/OpcPackage;.load

08-10 12:22:37.905: I/dalvikvm(1761): Failed resolving Lorg/docx4j/jaxb/JaxbValidationEventHandler; interface 1254 'Ljavax/xml/bind/ValidationEventHandler;'
08-10 12:22:37.905: W/dalvikvm(1761): Link of class 'Lorg/docx4j/jaxb/JaxbValidationEventHandler;' failed

08-10 12:22:37.905: D/dalvikvm(1761): DexOpt: unable to opt direct call 0x46db at 0x53 in Lorg/docx4j/openpackaging/packages/OpcPackage;.load
08-10 12:22:37.963: W/System.err(1761): org.docx4j.openpackaging.exceptions.Docx4JException: Error reading from the stream

08-10 12:22:37.963: W/System.err(1761):     at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:239)
08-10 12:22:37.963: W/System.err(1761):     at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:195)
08-10 12:22:37.963: W/System.err(1761):     at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:178)
08-10 12:22:37.963: W/System.err(1761):     at org.docx4j.openpackaging.packages.WordprocessingMLPackage.load(WordprocessingMLPackage.java:172)
08-10 12:22:37.975: W/System.err(1761):     at com.reader.MainActivity$2.onItemClick(MainActivity.java:125)
08-10 12:22:37.975: W/System.err(1761):     at android.widget.AdapterView.performItemClick(AdapterView.java:298)
08-10 12:22:37.975: W/System.err(1761):     at android.widget.AbsListView.performItemClick(AbsListView.java:1086)
08-10 12:22:37.975: W/System.err(1761):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2855)
08-10 12:22:37.975: W/System.err(1761):     at android.widget.AbsListView$1.run(AbsListView.java:3529)
08-10 12:22:37.984: W/System.err(1761):     at android.os.Handler.handleCallback(Handler.java:615)
08-10 12:22:37.984: W/System.err(1761):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-10 12:22:37.984: W/System.err(1761):     at android.os.Looper.loop(Looper.java:137)
08-10 12:22:37.984: W/System.err(1761):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-10 12:22:37.984: W/System.err(1761):     at java.lang.reflect.Method.invokeNative(Native Method)
08-10 12:22:37.993: W/System.err(1761):     at java.lang.reflect.Method.invoke(Method.java:511)
08-10 12:22:37.993: W/System.err(1761):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-10 12:22:37.993: W/System.err(1761):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-10 12:22:37.993: W/System.err(1761):     at dalvik.system.NativeStart.main(Native Method)
08-10 12:22:38.085: W/System.err(1761): Caused by: java.io.IOException: Mark has been invalidated.
08-10 12:22:38.085: W/System.err(1761):     at java.io.BufferedInputStream.reset(BufferedInputStream.java:350)
08-10 12:22:38.093: W/System.err(1761):     at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:237)

08-10 12:22:38.923: I/Choreographer(1761): Skipped 107 frames!  The application may be doing too much work on its main thread. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T00:20:56.230

**披露：我从事 docx4j 项目**

您需要使用[docx4j 的 Android 特定分支](https://github.com/plutext/docx4j/tree/android)。

请参阅[jaxb-can-be-made-to-run-on-android](http://www.docx4java.org/blog/2012/05/jaxb-can-be-made-to-run-on-android/)

我建议你[先让 AndroidDocxToHtml](https://github.com/plutext/AndroidDocxToHtml)工作，然后从那里继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:49:36.830

答案是指 IOException "Mark has been invalidated"：我正在使用 docx4j 的 Android 分支，在尝试加载模板 DOCX 时遇到相同的错误。我更改为通过以下方式加载 docx 文件，从而解决了我的问题：

```
 final LoadFromZipNG loader = new LoadFromZipNG();
        mypackage= (WordprocessingMLPackage)loader.get(is); 
```

取自 DOCX4J-Sample：[https ://github.com/plutext/AndroidDocxToHtml](https://github.com/plutext/AndroidDocxToHtml)

# asp.net-mvc - 本地计算机上的 SignalR + Redis

> ID：11897544
> 
> 赞同：1
> 
> 时间：2012-08-10T07:54:52.053
> 
> 标签：asp.net-mvc, redis, signalr

我已经下载了最后一个 Signalr.Redis 包 (v0.1) 并编译了最后一个 Redis 源代码 (2.4.26)。我试图在我的本地电脑上运行 Redis（服务器和客户端运行良好），但是当我使用 Redis 作为消息广播器启动 SignalR 时，似乎信号器想要启动到服务器的多个连接（相同的服务器 = 本地主机但多个端口号）。

我知道 Redis 与 SignalR 的集成是新的并且可能存在错误，但是是否可以在本地机器上使用 redis+signalr 或者不是受支持的场景？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:25:40.113

SignalR 将尝试与服务器建立各种连接以保持打开的连接。对于大多数浏览器，它最终会长时间轮询服务器（无论如何都会导致多个请求）。我最终做的是使用允许 SignalR 以正常方式连接到我的 MVC 应用程序，然后在我的控制器上调用操作，这些操作又与 Redis 通信。这给了我额外的好处，即能够在两者之间执行业务逻辑。不确定我是否回答了您的问题，但我只是想分享它对我的工作方式。

# php - pg_prepare() 准备好的语句（不是 PDO）是否防止 SQL 注入？

> ID：11897546
> 
> 赞同：3
> 
> 时间：2012-08-10T07:54:59.530
> 
> 标签：php, security, postgresql, prepared-statement

**我正在研究的目标系统不支持 PDO**，尽管我正在寻找一种解决方案来防止在 PostGres-DB 8.2+ 上使用PHP 5.1.x 进行**SQL****注入**。目前**没有**机会切换到 PDO。

 ****我目前的解决方案是 pg_prepare-prepared 语句：

```
// Trying to prevent SQL-Injection
$query = 'SELECT * FROM user WHERE login=$1 and password=md5($2)';
$result = pg_prepare($dbconn, "", $query);
$result = pg_execute($dbconn, "", array($_POST["user"], $_POST["password"]));
if (pg_num_rows($result) < 1) {
  die ("failure");
} 
```

**但是 pg_prepare-documentation 缺少一个重要信息：**

**它讲述了“以后的使用”**

> pg_prepare() 为以后使用 pg_execute() 或 pg_send_execute() 创建一个准备好的语句。[...]

**它讲述了“命名/匿名声明”**

> 该函数根据查询字符串创建一个名为 stmtname 的预准备语句，该语句必须包含一个 SQL 命令。stmtname 可以是 "" 来创建一个未命名的语句，在这种情况下，任何预先存在的未命名语句都会被自动替换；[...]

**它讲述了“类型转换”**

> 用于 pg_prepare() 的预处理语句也可以通过执行 SQL PREPARE 语句来创建。（但 pg_prepare() 更灵活，因为它不需要预先指定参数类型。）此外，虽然没有用于删除准备好的语句的 PHP 函数，但 SQL DEALLOCATE 语句可以用于此目的。

**但它并没有说明，这种预准备语句的实现是否可以避免 SQL 注入**

*此安全问题的几乎所有评论均指 PDO 解决方案，其中在文档中注意到驱动程序可防止 SQL 注入。但是如果一个简单的解决方案可能是 pg_prepare，我现在会使用 pg_prepare。*

感谢您提供可能是最佳实践解决方案的重要信息。

**编辑（标记为解决方案后）：** 感谢您提供非常有启发性的答案！

*   我将 Frank Heikens 的解决方案标记为最佳答案，因为它解释了 SQL 注入中的一个重要点。程序员可能会使用准备好的语句，但 SQL-injection-lack 可能仍然存在错误！
*   除了 Frank Heikens 的回答之外，hoppa 表明使用 pg_prepare/pg_query_params 可以防止 SQL 注入。不过谢谢。
*   现在将使用优化的代码`pg_query_params`（感谢 Milen A. Radev）
*   `pg_escape_string()`作为替代方案（感谢halfer ）

所有答案都有帮助:)

```
// Trying to prevent SQL-Injection (**updated**)
$sql_query = 'SELECT * FROM user WHERE login=$1 and password=md5($2);';
$result = pg_query_params($dbconn_login, $sql_query, array($_POST["user"], $_POST["password"]));
if (pg_num_rows($result) < 1) {
  die('failure');
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T08:25:22.190

**准备好的语句不会受到 SQL 注入的影响，因为在准备好查询计划后**，没有人可以更改它。但是，如果您的语句已经被泄露，您仍然会遭受 SQL 注入：

```
<?php 
// how NOT to construct your SQL....
$query = 'SELECT * FROM user WHERE login=$1 and password=md5($2) LIMIT '. $_POST['limit']; -- injection!
$result = pg_prepare($dbconn, "", $query);
$result = pg_execute($dbconn, "", array($_POST["user"], $_POST["password"]));
if (pg_num_rows($result) < 1) {
  die ("failure");
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T08:00:54.610

准备好的语句内置于 MySQL ( [http://dev.mysql.com/doc/refman/5.6/en/sql-syntax-prepared-statements.html](http://dev.mysql.com/doc/refman/5.6/en/sql-syntax-prepared-statements.html) )。注入预防机制也在 MySQL 中，请参阅先前链接页面中的引用：

> 防止 SQL 注入攻击。参数值可以包含未转义的 SQL 引号和分隔符。

PHP 库只是将它们的功能映射到 MySQL 函数（可能使用[http://docs.oracle.com/cd/E17952_01/refman-5.0-en/c-api-prepared-statement-function-overview.html](http://docs.oracle.com/cd/E17952_01/refman-5.0-en/c-api-prepared-statement-function-overview.html)）。所以是的，pg_prepare 也应该保护你的注入。

[编辑] 我刚刚注意到您在谈论 PostgreSQL，对于 PostgreSQL 也是如此，它是一种内置[语言功能](http://www.postgresql.org/docs/9.1/static/sql-prepare.html)，而不是 PHP 库提供的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T08:11:52.437

据我从文档中收集到的信息，它应该可以防止您进行 SQL 注入。

一种更通用的方法是使用[`pg_query_params`](http://de.php.net/manual/en/function.pg-query-params.php)它，因为它与准备查询无关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T08:15:23.143

使用准备好的语句通常是最好的方法，因为您还应该从可以跳过的数据库优化中获得更好的 SQL 性能。

然而，了解替代的做事方式总是好的，所以请记住，您可以在受污染的变量上使用[pg_escape_string()](http://uk.php.net/manual/en/function.pg-escape-string.php)，然后直接在 SQL 查询中使用输出。****

# .net - 使用 XSLT 替换 XML 中的所有匹配节点

> ID：11897548
> 
> 赞同：0
> 
> 时间：2012-08-10T07:55:07.980
> 
> 标签：.net, xml, xslt, xslcompiledtransform, xpathdocument

我想替换 xml 文件中的所有匹配节点。

到原始xml：

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <StackPanel>
    <Button/>
  </StackPanel>
</Window> 
```

我应用了以下xslt：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Button">
        <AnotherButton><xsl:apply-templates select="@*|node()" /></AnotherButton>
    </xsl:template>    
</xsl:stylesheet> 
```

但它产生相同的xml。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:27:06.000

Sean 的意思是，如果您从 XML 文档中删除名称空间，XSLT 将起作用

```
<Window>
  <StackPanel>
    <Button/>
  </StackPanel>
</Window> 
```

产生...

```
<Window>
    <StackPanel>
        <AnotherButton />
    </StackPanel>
</Window> 
```

**或者**，您询问是否可以保留您的名称空间

将您的`x:`命名空间添加到您的 Button...

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <StackPanel>
    <x:Button/>
  </StackPanel>
</Window> 
```

更新您的 XSL 以也使用此`x:Button`命名空间

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="x:Button">
        <x:AnotherButton><xsl:apply-templates select="@*|node()" /></x:AnotherButton>
    </xsl:template>    
</xsl:stylesheet> 
```

产生...

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <StackPanel>
        <x:AnotherButton/>
    </StackPanel>
</Window> 
```

# asp.net - 将html的状态保存到数据库

> ID：11897549
> 
> 赞同：-1
> 
> 时间：2012-08-10T07:55:09.930
> 
> 标签：asp.net

我正在通过 asp.net 做项目。页面主题更改的一些状态（设置允许用户更改私人主题）。

例如：我使用了“关于可排序列表的 jquery”。用户可以对该列表中项目的位置进行排序。但我不知道如何在用户为每个用户排序后保存项目状态。

列表菜单：首页 关于默认值

Home，About，Default的位置可以根据用户的排序相互交换。

如何为每个用户将排序保存到数据库。

谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:08:25.057

我认为最好的方法是：**不要重新发明轮子**

ASP.Net 包含一个叫做：[用户配置文件的东西](http://msdn.microsoft.com/en-us/library/2y3fs9xs.aspx)

它们通过存储用户偏好来工作，并且它们适用于匿名用户和经过身份验证的用户。

当用户匿名时，他的个人资料存储在 cookie 中。当用户通过身份验证时，您可以*迁移*现有的匿名配置文件以将其存储在数据库中。

ASP.Net 包含为您完成所有这些工作的功能。您甚至可以使用 JavaScript 访问配置文件属性

我已经回答了几个可以解释这个过程的问题：

[如何坚持匿名用户选择（例如：主题选择）](https://stackoverflow.com/q/11706349/1268570)

[在 MVC Web 应用程序中访问 profile.newproperty](https://stackoverflow.com/q/11706950/1268570)

注意：如果您使用的是 Web 应用程序而不是网站，那么第一个链接中提供的答案将不起作用，这是因为`Profile`该类仅在使用网站时才被预编译。为了实现配置文件功能，您应该创建一个自定义类并继承自`ProfileBase`. 您可以使用第二个链接中指定的代码，即使该示例是专门为 MVC 制作的，配置文件类和 web.config 中的配置文件注册对于任何 Web 应用程序都是相同的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:59:12.270

我认为您应该为您想要存储的每种类型的设置添加一些设置值到您的数据库中。例如，对于列表菜单，您可能有一些字段在用户订购项目时保持项目的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T08:03:03.750

可能您需要数据库中的菜单表和 user_menu_order 表。在渲染菜单时，您可以使用 user_menu_order 表以正确的顺序对菜单项进行排序。

```
id | menu
---------
1 | Home
2 | About

menu_id | user_id | order
----------------
1 | 1 | 1
2 | 1 | 0 
```

# grid - 是否可以在道场网格上动态设置列名？

> ID：11897557
> 
> 赞同：0
> 
> 时间：2012-08-10T07:55:28.063
> 
> 标签：grid, dojo, dojox.grid

有没有办法为列标题设置动态名称，例如在格式化函数中！？

我将在网格上有一个弹出菜单，根据选择的选项，它应该更改列标题中显示的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:28:05.130

如果您使用 dojo.query，这很容易

```
var grid = dijit.byId('myGridId'),  NewHeader = "Foo Bar Text Content";
var columnHeaderNodes = dojo.query(
              '.dojoxGridHeader table th',
               grid.viewsHeaderNode)
var nthColumn = 12;
// if has child and its not a textnode - this may happen
// when there is a listener (dnd, click) attached for sorting etc.
if(columnHeaderNodes[nthColumn].firstChild && columnHeaderNodes[nthColumn].firstChild.nodeType != 3) 
    tgt = columnHeaderNodes[nthColumn].firstChild;
else tgt = columnHeaderNodes[nthColumn];
tgt.innerHTML = NewHeader; 
```

# ios - 该对象未保存在 NSMutableArray 中

> ID：11897565
> 
> 赞同：-1
> 
> 时间：2012-08-10T07:55:50.617
> 
> 标签：ios

这是通过 TFHpple 加载一些元素的方法中的一段代码：

```
// kvota1Niz, KvotaxNiz and Kvota2Niz are result arrays from TFHpple parser
NSArray *kvota1Niz = [kvoteParser searchWithXPathQuery:kvota1XpathUpit];
NSArray *kvotaxNiz = [kvoteParser searchWithXPathQuery:kvotaxXpathUpit];
NSArray *kvota2Niz = [kvoteParser searchWithXPathQuery:kvota2XpathUpit];
NSMutableArray *kvote1 = [[NSMutableArray alloc] initWithCapacity:0];
NSMutableArray *kvotex = [[NSMutableArray alloc] initWithCapacity:0];
NSMutableArray *kvote2 = [[NSMutableArray alloc] initWithCapacity:0];
NSMutableArray *privremeniArray = [[NSMutableArray alloc] initWithCapacity:0];
for (TFHppleElement *element in kvota1Niz)
{
    Par *trenutnaKvota1 =  [[Par alloc] init];
    [kvote1 addObject:trenutnaKvota1];
    trenutnaKvota.kvota1 = [[element firstChild] content];
}
for (TFHppleElement *element in kvotaxNiz)
{
    Par *trenutnaKvotax =  [[Par alloc] init];

    if ([_sekvencaLogoa objectAtIndex: [kvotaxNiz indexOfObject:element]] == @"2")
    {
        [privremeniArray addObject:trenutnaKvotaX]
    }
    else
    {
        [kvotex addObject:trenutnaKvotax];
    }
    trenutnaKvota.kvotax = [[element firstChild] content];
}
for (TFHppleElement *element in kvota2Niz)
{
    Par *trenutnaKvota2 =  [[Par alloc] init];
    if ([_sekvencaLogoa objectAtIndex: [kvota2Niz indexOfObject:element]] == @"2")
    {
        [kvote2 addObject:[privremeniArray objectAtIndex:k]];
        k++;
    }
    else
    {
        [kvote2 addObject:trenutnaKvota2];
    }
    trenutnaKvota.kvota2 = [[element firstChild] content];
}
kvota1 = _kvota1;
kvotax = _kvotax;
kvota2 = _kvota2; 
```

问题在于未保存在数组`for(TFHppleElement *element in kvota2Niz)`中的位置。程序进入 for 循环，因为我的 value 。 是类的实例变量。 是一个包含字符串和的数组。`[privremeniArray objectAtIndex:k]``kvote2``NSLogged``k``kvota2``NSString``Par``_sekvencaLogoa``"2"``"3"`

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:14:29.570

这不是正确的字符串比较

```
 if ([_sekvencaLogoa objectAtIndex: [kvota2Niz indexOfObject:element]] == @"2")
        {
            [kvote2 addObject:[privremeniArray objectAtIndex:k]];
            k++;
        } 
```

用这个：

```
 if ([[_sekvencaLogoa objectAtIndex: [kvota2Niz indexOfObject:element]] isEqualToString:@"2"])
        {
            [kvote2 addObject:[privremeniArray objectAtIndex:k]];
            k++;
        } 
```

# iphone - 输入校验位以形成 ISBN 10

> ID：11897572
> 
> 赞同：0
> 
> 时间：2012-08-10T07:56:37.747
> 
> 标签：iphone, ios, integer, nsnumber, isbn

我正在做一个条形码扫描仪，并在应用程序内将 ISBN13 转换为 ISBN10。我现在可以计算出 ISBN 10 的校验位，但我不知道如何将其连接回 10 位数字。

我所做的是取出条形码 9780340961391 的前缀“978”，然后留下 0340961391，我只取出 9 位数字，省略 isbn 13 的校验位 1，然后留下 034096139。

然后我计算 isbn10 的校验位是 2。现在的问题是我如何将它添加到 034096139 以形成 0340961392 的最终 ISBN10？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:05:26.147

我假设您的 ISBN13 是一个字符串，并且在将校验位添加回 SBN 号码时，您不想影响 9 位号码。我会建议：

```
/* SBNString = 034096139 */
NSString *ISBN10 = [NSString stringWithFormat:@"%@%u", SBNString, checkDigit]; 
```

# ruby-on-rails - 如何使用 Rails 3.1.X 或更高版本连接到 SQLServer 2000？

> ID：11897576
> 
> 赞同：1
> 
> 时间：2012-08-10T07:57:10.133
> 
> 标签：ruby-on-rails, sql-server, activerecord, ruby-on-rails-3.1

我尝试将我的 Rails 应用程序连接到在 2000 版中运行的 mssql 服务器。它无法更新 sqlserver，因为它不是我的。我尝试使用`activerecord-sqlserver-adapter`但它不再与版本 2000 一起使用，并且版本 2.3.X 的 gem 确实支持 2000 但不能与版本 2.3 以上的 Rails 一起使用，所以...我怎样才能让它与我的 mssql 服务器一起使用？

# android - 如何在不使用任何外部 API 的情况下在 Android 上绘制图表？

> ID：11897582
> 
> 赞同：1
> 
> 时间：2012-08-10T07:57:45.570
> 
> 标签：android, graph

我了解如何使用画布绘制线条，但如何使用画布使用相同的线条绘制图形？

问题在于坐标。(0,0) 从设备的左上角开始。如何将 (0,0) 设置为边距并相对于边距绘制特定线？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:21:00.153

1）创建一个活动。

```
public class GraphView1 extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    float[] values = new float[] { "your values"};
    String[] verlabels = new String[] { "your values" };
    String[] horlabels = new String[] { "your values"
    GraphView graphView = new GraphView(this, values,"GraphView",horlabels, verlabels, GraphView.BAR);
    setContentView(graphView);
}
} 
```

2）然后创建另一个类扩展视图：

```
public class GraphView2 extends View{

public static boolean LINE = true;

private Paint paint;
private float[] values;
private String[] str;
private String[] verlabels;
private String title;
private boolean type;
Context context;

public GraphView(Context context, float[] values, String title, String[] str,String[] verlabels, boolean type) {

    super(context);
    if (values == null)
        values = new float[0];
    else
        this.values = values;
    if (title == null)
        title = "";
    else
        this.title = title;
    if (str == null)
        this.str = new String[0];
    else
        this.str = str;
    if (verlabels == null)
        this.verlabels = new String[0];
    else
        this.verlabels = verlabels;
    this.type = type;
    paint = new Paint();
}

@Override
protected void onDraw(final Canvas canvas) {
    context=getContext();
    float border = 15;
    float horstart = border * 2;
    float height = getHeight();
    float width = getWidth();
    float max = getMax();
    Log.w("max", ""+max);
    float min = getMin();
    Log.w("min", ""+min);
    float diff = max - min;
    float graphheight = height - (2 * border);
    float graphwidth = width - (2 * border);

    paint.setTextAlign(Align.LEFT);
    int vers = verlabels.length;
    for (int i = 0; i < verlabels.length; i++) {
        paint.setColor(Color.DKGRAY);
        float y = ((graphheight / vers) * i) + border;
        canvas.drawLine(horstart, y, width, y, paint);
        paint.setColor(Color.WHITE);
        paint.setTextSize(10);
        canvas.drawText(verlabels[i], 0, y, paint);
    }
    int hors = values.length;
    for (int i = 0; i < str.length; i++) {
        paint.setColor(Color.DKGRAY);
        float x = ((graphwidth / hors) * i) + horstart;
        canvas.drawLine(x, height - border, x, border, paint);
        paint.setTextAlign(Align.LEFT);
        if (i==str.length)
            paint.setTextAlign(Align.RIGHT);
        if (i==0)
            paint.setTextAlign(Align.LEFT);
        paint.setColor(Color.WHITE);
        paint.setTextSize(9);
        canvas.drawText( str[i], x, height - 4, paint);
    }

    paint.setTextAlign(Align.CENTER);
    canvas.drawText(title, (graphwidth / 2) + horstart, border - 4, paint);

    if (max != min) {
        paint.setColor(Color.BLUE);
        paint.setStyle(Paint.Style.FILL);

        if (type == BAR) {
            float datalength = values.length;
            float colwidth = (width - (2 * border)) / datalength;
            for (int i = 0; i < values.length; i++) {
            //  float val = values[i] - min;

            //  float rat = val / diff;
            //  float h = graphheight * rat;
            //  canvas.drawRect((i * colwidth) + horstart, (border - h) + graphheight, ((i * colwidth) + horstart) + (colwidth - 1), height - (border - 1), paint);                     
                float graph_h = getHeight()-(border*2); 
                 // Log.e("", "graph_h > "+graph_h);

                float ind_h = graph_h/7; 
                  //Log.e("", "ind_h > "+ind_h);

                float t = values[i]/5;

                float top = (graph_h - ind_h*(t)); 
                 // Log.e("", " > "+i+1);
                 // Log.e("", "top > "+top);

                //for values between 0 and 5 ,vice versa
                //Log.e("", " values[i] > "+values[i]);
                float acc = ind_h/5;
                acc = acc * (values[i]%5);

              //  Log.e("", " acc > "+acc);

                canvas.drawRect((i * colwidth) + horstart, top+border-acc , ((i * colwidth) + horstart) + (colwidth - 1), graph_h+border, paint);                       
            }
        } else {
            float datalength = values.length;
            float colwidth = (width - (2 * border)) / datalength;
            float halfcol = colwidth / 2;
            float lasth = 0;
            for (int i = 0; i < values.length; i++) {
                float val = values[i] - min;
                float rat = val / diff;
                float h = graphheight * rat;
                if (i > 0)
                    canvas.drawLine(((i - 1) * colwidth) + (horstart + 1) + halfcol, (border - lasth) + graphheight, (i * colwidth) + (horstart + 1) + halfcol, (border - h) + graphheight, paint);
                lasth = h;
            }
        }
    }
}

private float getMax() {
    float largest = Integer.MIN_VALUE;
    for (int i = 0; i < values.length; i++)
        if (values[i] > largest)
            largest = values[i];
    return largest;
}

private float getMin() {
    float smallest = Integer.MAX_VALUE;
    for (int i = 0; i < values.length; i++)
        if (values[i] < smallest)
            smallest = values[i];
    return smallest;
}

} 
```

# biztalk - 使用 Orchestartion 中的自定义发送管道将 MultiPart 消息转换为 XML/HL7

> ID：11897583
> 
> 赞同：1
> 
> 时间：2012-08-10T07:57:47.293
> 
> 标签：biztalk, biztalk-2010

在我的项目中，我在编排中使用自定义发送管道将 MultiPart 消息转换为 HL7 消息，以便我可以在编排的下一步将原始 HL7 消息记录到 DB 中。

在 Custom Pipeline 中，我使用了 BTAHL7 2.x Assembler，它组装 Multipart 消息并转换为 XML messgae。

在 Message Assignment 中使用以下代码：调用自定义管道将 Multipart nessage 转换为 XML。

```
XMLResponse = new System.Xml.XmlDocument();
Microsoft.XLANGs.Pipeline.XLANGPipelineManager.ExecuteSendPipeline(
typeof(BTAHL7Schemas.SendPipeline1),MultiPartMsg,XMLResponse); 
```

但是上面的代码抛出

> 错误：“缺少正文模式”

如果上述步骤成功，我可以轻松地将 XML 转换为 HL7 字符串。

我怎样才能做到这一点？

# android - 在 Android 中单击主页按钮时更改布尔值

> ID：11897584
> 
> 赞同：1
> 
> 时间：2012-08-10T07:58:02.030
> 
> 标签：android, button

我试图仅在按下主页按钮时更改布尔值。谁能告诉我一个解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:02:42.297

看看 [onUserLeaveHint()](http://developer.android.com/reference/android/app/Activity.html#onUserLeaveHint%28%29)：

> 当活动由于用户选择而即将进入后台时，作为活动生命周期的一部分调用。例如，当用户按下 Home 键时，会调用 onUserLeaveHint()，但是当有来电导致通话中的 Activity 自动被带到前台时，被中断的 Activity 不会调用 onUserLeaveHint() . 如果调用它，则在活动的 onPause() 回调之前调用此方法。

使布尔变量在内部`onUserLeaveHint()`为真：

```
 @Override
    public void onUserLeaveHint() {
                super.onUserLeaveHint();
                //make Boolean true here because this method first  
                //called when user press home key
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:21:26.463

您需要覆盖附加到窗口方法。请检查以下代码。

```
 @Override
 public void onAttachedToWindow() {
 this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
 super.onAttachedToWindow();
 //set your boolean value here
 } 
```

# eclipse - 日食双子座会继续发展吗

> ID：11897589
> 
> 赞同：4
> 
> 时间：2012-08-10T07:58:26.747
> 
> 标签：eclipse, spring, eclipse-gemini

这可能听起来有点傻，但这个项目看起来真的很被动和死气沉沉，仅在他们的网站上判断。Spring 显然放弃了这个项目，只是把它交给了 Eclipse 基金会。现在 Eclipse 似乎没有做任何事情来将其提升到一个新的水平。我打算将我的 Spring Web 应用程序拆分为一个单独的模块，但我真的不知道我是否应该参加这个项目。我担心我走错了方向。如果有人对 Eclipse Gemini 有意见，请告诉我

# java - 使用 ObjectOutputStream 保存 HashMap

> ID：11897593
> 
> 赞同：3
> 
> 时间：2012-08-10T07:58:38.363
> 
> 标签：java, serialization, objectoutputstream, bukkit

为了在命令中保存传送点，我有一个`HashMap`：

```
public HashMap<Player, Location> mapHomes = new HashMap<>(); 
```

可以这样访问：

```
if(cmd.getName().equalsIgnoreCase("sethome")){
    Location loc = player.getLocation();
    mapHomes.put(player, loc);
    sender.sendMessage("Home set !");
    return true;
}
if(cmd.getName().equalsIgnoreCase("home")){
    Location loc1 = mapHomes.get(player);
    player.teleport(loc1);
    sender.sendMessage("Teleported to home");
    return true;
}
return false; 
```

由于这些设置应该在重启时保持，我实现了一个保存方法：

```
public void save(HashMap<Player,Location> mapHome, String path) throws NotSerializableException{
    try{
        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(path));
        oos.writeObject(mapHome);
        oos.flush();
        oos.close();
    }catch(Exception e){
        e.printStackTrace();
    }
} 
```

但它不起作用。它抛出`NotSerializableException`。

我认为主要问题是`Player`并且`Location`不是可序列化类型，那么我应该怎么写`HashMap`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:05:47.743

`HashMap`已经是`Serializable`。

问题是地图内的对象不是，所以你也必须使它们可序列化。

```
public class SerializedPlayer extends Player implements Serializable {
    public SerializedPlayer() {}
    public SerializedPlayer(Player playerToClone) {
        this.setField1(playerToClone.getField1());
        // Set all the fields
    }
} 
```

添加到地图时：

```
map.put(new SerializedPlayer(player), new SerializedLocation(location)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:10:22.980

`NotSerializableException`当实例需要有`Serializable`接口时抛出。

```
class YourClass implements Serializable {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T08:02:24.387

```
class Player implements Serializable {}

class Location implements Serializable {} 
```

请记住，您只能序列化实现该`Serializable`接口的对象。所以你`Player`和`Location`类也必须实现接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T08:05:36.227

我认为您正在写入`HashMap<Player, Location>`文件。

您需要做的是使您的`Player`和`Location`类可序列化。

```
public class Player implements java.io.Serializable {
    // ...
}

public class Location implements java.io.Serializable {
    // ...
} 
```

[`HashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)已经可以序列化了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T02:42:48.860

为了使`Location`可序列化，我建议使用[此类](http://pastie.org/4653888)。我自己写的，只是请求你在代码中给我信用。

```
package com.github.JamesNorris.Class;

import java.io.Serializable;
import java.util.HashMap;
import java.util.Map;

import org.bukkit.Bukkit;
import org.bukkit.Location;
import org.bukkit.Server;
import org.bukkit.World;

/**
 * The class that allows location to be serialized, and be used
 * in a file. This class should not be changed, otherwise it
 * will not work for older files.
 * 
 * @author Jnorr44
 */

public final class SerializableLocation implements Serializable {
    private static final long serialVersionUID = 8650311534439769069L;

    private final String world;
    private final String uuid;
    private final double x, y, z;
    private final float yaw, pitch;
    private transient Location loc;

    /**
     * Creates a new SerializableLocation instance of any org.bukkit.Location.
     * 
     * @param l
     */

    public SerializableLocation(Location l) {
        this.world = l.getWorld().getName();
        this.uuid = l.getWorld().getUID().toString();
        this.x = l.getX();
        this.y = l.getY();
        this.z = l.getZ();
        this.yaw = l.getYaw();
        this.pitch = l.getPitch();
    }

    /**
     * Gets the org.bukkit.Location back from any SerializableLocation.
     * 
     * @param l
     * @return
     */

    public static Location returnLocation(SerializableLocation l) {
        float pitch = l.pitch;
        float yaw = l.yaw;
        double x = l.x;
        double y = l.y;
        double z = l.z;
        World world = Bukkit.getWorld(l.world);
        Location location = new Location(world, x, y, z, yaw, pitch);
        return location;
    }

    // FROM HERE ON NEEDS DOC NOTES

    public SerializableLocation(Map<String, Object> map) {
        this.world = (String) map.get("world");
        this.uuid = (String) map.get("uuid");
        this.x = (Double) map.get("x");
        this.y = (Double) map.get("y");
        this.z = (Double) map.get("z");
        this.yaw = ((Float) map.get("yaw")).floatValue();
        this.pitch = ((Float) map.get("pitch")).floatValue();
    }

    public final Map<String, Object> serialize() {
        Map<String, Object> map = new HashMap<String, Object>();
        map.put("world", this.world);
        map.put("uuid", this.uuid);
        map.put("x", this.x);
        map.put("y", this.y);
        map.put("z", this.z);
        map.put("yaw", this.yaw);
        map.put("pitch", this.pitch);
        return map;
    }

    public final Location getLocation(Server server) {
        if (loc == null) {
            World world = server.getWorld(this.uuid);
            if (world == null) {
                world = server.getWorld(this.world);
            }
            loc = new Location(world, x, y, z, yaw, pitch);
        }
        return loc;
    }
} 
```

现在只需执行以下操作：

```
SerializableLocation loc = new SerializableLocation(LOCATION); 
```

这是必需的原因是因为`Location`contains `world`、`x`、`y`、和`z`,其中不可序列化。`yaw``pitch``world`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-02T02:29:56.100

实际上，您正在尝试序列化`Player`和`Location`，尝试实现新类等。但是您为什么要这样做？

`Player`如果您不存储和`Location`对象，而是存储它们的字符串表示，那会更好。例如，您可以使用`Player.getName()`类似`"world:100:65:100"`for location 的东西（这样我们就可以*轻松地*通过 . 获取所有数据`String.split(":")`。我认为这是一种更好的方法。

# python - 实施 nb_inplace_add 导致返回只读缓冲区对象

> ID：11897597
> 
> 赞同：1
> 
> 时间：2012-08-10T07:58:58.440
> 
> 标签：python, python-c-api, python-c-extension

我正在编写就地添加操作的实现。但是，由于某种原因，我有时会得到一个只读缓冲区作为结果（而我正在添加一个自定义扩展类和一个整数......）。

相关代码为：

```
static PyObject *
ModPoly_InPlaceAdd(PyObject *self, PyObject *other)
{

    if (!ModPoly_Check(self)) {
        //Since it's in-place addition the control flow should never
        // enter here(I suppose)
        if (!ModPoly_Check(other)) {
            PyErr_SetString(PyExc_TypeError, "Neither argument is a ModPolynomial.");
            return NULL;
        }
        return ModPoly_InPlaceAdd(other, self);
    } else {
        if (!PyInt_Check(other) && !PyLong_Check(other)) {
            Py_INCREF(Py_NotImplemented);
            return Py_NotImplemented;
        }
    }

    ModPoly *Tself = (ModPoly *)self;
    PyObject *tmp, *tmp2;
    tmp = PyNumber_Add(Tself->ob_item[0], other);
    tmp2 = PyNumber_Remainder(tmp, Tself->n_modulus);

    Py_DECREF(tmp);
    tmp = Tself->ob_item[0];
    Tself->ob_item[0] = tmp2;
    Py_DECREF(tmp);
    return (PyObject *)Tself;

} 
```

如果我没有返回`(PyObject*)Tself`（或简单地“自我”），而是引发异常，则原始对象会正确更新[使用 some 检查`printf`]。如果我使用`Py_RETURN_NONE`宏，它会正确地变成`ModPoly`（`None`在 python 端）。

我究竟做错了什么？我正在返回一个指向`ModPoly`对象的指针，这怎么会成为一个缓冲区？而且我没有看到对这些指针的任何操作。

示例用法：

```
>>> from algebra import polynomials
>>> pol = polynomials.ModPolynomial(3,17)
>>> pol += 5
>>> pol
<read-only buffer ptr 0xf31420, size 4 at 0xe6faf0> 
```

我尝试将返回线更改为：

```
printf("%d\n", (int)ModPoly_Check(self));
return self; 
```

并且`1`在就地添加时打印（意味着返回的值是类型`ModPolynomial`...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:39:52.083

根据[文档](http://docs.python.org/c-api/number.html#PyNumber_InPlaceAdd)，对象的就地添加操作返回一个新的引用。

通过`self`直接返回而不调用`Py_INCREF`它，您的对象将在它仍然被引用时被释放。如果为其他对象分配了同一块内存，那么这些引用现在将为您提供新对象。

# css - 为什么在萤火虫中有很多来自* {}的元素的继承部分？

> ID：11897606
> 
> 赞同：0
> 
> 时间：2012-08-10T07:59:26.950
> 
> 标签：css, styles, universal

如下图所示，我看到很多来自 * 选择器（通用选择器）的继承部分：
![在此处输入图像描述](../Images/87eb44bc64f35f2d9ac381caa64a8964.png)

我编写代码的方式是否效率低下？我应该做些什么来防止这种情况发生还是正常的？

**编辑：**
我看到 G+ 的情况相同：
![在此处输入图像描述](../Images/c81cd323e362f57abe4bb8de96b7134a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:01:50.563

使用 * 选择每个元素。然后每个孩子都继承了他们父母标签的一些属性。这就是为什么你得到了很长的继承列表。

一定有什么问题，我没有得到这么长的清单。请试试[这个](http://www.paul-muench-haus-ruchheim.de/Veran/veran2012.html)。

# java - 如何在netbeans中使用digitalpersona一键式sdk java版？

> ID：11897612
> 
> 赞同：0
> 
> 时间：2012-08-10T07:59:59.087
> 
> 标签：java, netbeans, sdk

我下载了digitalpersona免费的一键式sdk（1.6.1）：java版。安装了 sdk 和 java 运行时环境 (RTE)。我想使用 sdk 创建自己的指纹注册/验证用户界面，但是我不知道如何在 netbeans 的 java 应用程序中实现它。我对使用 netbeans 比较陌生，我有一个使用指纹匹配的项目要做。

如何使用包 com.digitalpersona.onetouch.ui.swing.sample.Enrollment；并导入 com.digitalpersona.onetouch.*；?

我需要将什么导入新的 java 应用程序以允许我使用 sdk 中可用的方法？我需要调用或添加到库中的任何 dll 或 jar 吗？您的指导将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-02T22:28:57.887

虽然这个答案晚了 4 年，但我希望它有助于使这个社区更有帮助。

在您的开发机器 (Windows) 上安装 SDK 后，您应该导航到安装 SDK 的目录（在我的情况下，它是`C:/Program Files/DigitalPersona`，打开`bin/java`并验证`dpotapi`jar 可执行文件是否存在。如果存在，则记下此路径jar 文件，因为这是您的类路径。

要将其添加到 Netbeans，请单击 IDE 中的 Projects，右键单击`Libraries`然后选择，然后`Add Jar/Folder`从弹出的对话框中导航到您之前找到该`dpotapi.jar`文件的目录，单击它，然后单击`Open`，您就可以开始了。

# python - 如何使用 GTK3 在 Python 上创建组合框？

> ID：11897626
> 
> 赞同：0
> 
> 时间：2012-08-10T08:01:06.400
> 
> 标签：python, gtk3

我已阅读[本手册](http://python-gtk-3-tutorial.readthedocs.org/en/latest/combobox.html#Gtk.ComboBox)以创建一个带有字符串的简单组合框：

但是当我启动我的应用程序时，我会收到以下消息：

```
(button.py:7646): Gtk-CRITICAL **: gtk_entry_set_text: assertion `text != NULL' failed 
```

组合框出现，但项目（我添加的唯一项目）不出现

这是我的来源：

```
class Ventana(Gtk.Window):
    def __init__(self):
        Gtk.Window.__init__(self,title="Test Window")
        paises=Gtk.ListStore(int,str)
        paises.append([1,"test"])

        combo=Gtk.ComboBox.new_with_model_and_entry(paises)
        combo.set_active(0)
        self.add(combo) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:36:14.453

通过调用 set_entry_text_column(column) 而不是 combo.set_active(0) 设置组合条目

```
class Ventana(Gtk.Window):
    def __init__(self, title = "Test"):
        Gtk.Window.__init__(self,title="Test Window")
        paises=Gtk.ListStore(int,str)
        paises.append([1,"test"])

         combo=Gtk.ComboBox.new_with_model_and_entry(paises)
         combo.set_entry_text_column(1)
         self.add(combo) 
```

请参阅：[http ://python-gtk-3-tutorial.readthedocs.org/en/latest/combobox.html?highlight=set_entry_text_column](http://python-gtk-3-tutorial.readthedocs.org/en/latest/combobox.html?highlight=set_entry_text_column)

# php - 如何从终端运行多线程 curl 脚本？

> ID：11897630
> 
> 赞同：1
> 
> 时间：2012-08-10T08:01:19.177
> 
> 标签：php, multithreading, cron, cakephp-2.0, curl-multi

我为 PHP 使用了一个多 curl 库，它有助于并行获取多个页面（基本上是一个易于使用的 API）。

`My Scenario`: 从 API 获取用户数据，处理并存储结果。所有必须提取数据的用户都放在队列中。整个提取、处理和存储结果将花费近 8 - 10 分钟。如果我同步处理它，它真的很昂贵。所以我使用 php curl 库进行多线程处理。如果我在浏览器中运行它，它工作正常，但由于它的 cron 作业，所以我必须使用命令行运行相同的脚本。当我这样做时；不起作用。有谁能够帮我？提前致谢。

伪代码：

```
$query = " Fetch users based on certain criteria LIMIT 200" ; 
$result = execute-query ;

$curl_handle = curl_multi_init();
$i = 0;
$curl = array();

while ($row = mysql_fetch_assoc($result)) {    
    $curl[$i] = add_handle($curl_handle, API_CALL);
}

exec_handle($curl_handle);

for ($j = 0; $j < count($curl); $j++)//remove the handles
    curl_multi_remove_handle($curl_handle, $curl[$i]);

curl_multi_close($curl_handle); 
```

// 参考网址 [http://codestips.com/php-multithreading-using-curl/](http://codestips.com/php-multithreading-using-curl/)

# javascript - 如何调用 TinyMCE 插件函数？

> ID：11897631
> 
> 赞同：6
> 
> 时间：2012-08-10T08:01:21.860
> 
> 标签：javascript, jquery, function, tinymce, rte

如何调用 tinymce 插件函数？

```
 tinymce.activeEditor.plugins.customplugin.customfunction(customvar); 
```

不工作！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T08:30:23.363

> tinymce.activeEditor.plugins.customplugin.customfunction(customvar);

是调用此类函数的正确方法。请注意，`tinymce.activeEditor`需要已经设置才能使用它。 `tinymce.activeEditor`例如，当用户单击编辑器时设置。否则使用

```
tinymce.get('your_editor_id_here').plugins.customplugin.customfunction(customvar); 
```

您的函数调用不起作用可能还有另一个原因：您要调用的函数需要像函数一样定义`getInfo`，`_save`并且`_nodeChange`在保存插件中（请参阅tinymce 的开发人员构建以检查插件目录中的此插件）。

保存插件在这里缩短：

```
(function() {
    tinymce.create('tinymce.plugins.Save', {
        init : function(ed, url) {
           ...
        },

        getInfo : function() {
                   ...
        },

        // Private methods

        _nodeChange : function(ed, cm, n) {
                   ...
        },

        // Private methods
                   ...
        _save : function() {

        }
    });

    // Register plugin
    tinymce.PluginManager.add('save', tinymce.plugins.Save);
})(); 
```

您可以`getInfo`使用以下 javascript 调用来调用此插件的功能：

```
tinymce.get('your_editor_id_here').plugins.save.getInfo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-29T09:34:00.920

把你要对外暴露的功能放在`self`.

```
tinymce.PluginManager.add('myplugin', function(editor) {
    var self = this;
    var self.myFunction = myFunction(); // Put function into self!

    function myFunction() {
        console.log('Hello world!');
    }
} 
```

然后：

```
tinymce.get('your_editor_id_here').plugins.myplugin.myFunction(); 
```

# jquery - 在删除元素之前检查元素是否存在更好？

> ID：11897633
> 
> 赞同：3
> 
> 时间：2012-08-10T08:01:25.650
> 
> 标签：jquery

我的页面有一个警告框，当没有要显示的条目时显示。当通过 AJAX 添加新条目时，我使用简单的方法删除此元素：

```
$('#empty-alert').remove(); 
```

我在想：当我添加以下条目时，无论元素是否存在，我都会再次调用此方法。最好先检查存在，如果存在，调用`remove()`？像：

```
if($('#empty-alert').length){
    $('#empty-alert').remove();
} 
```

或者当元素确实存在并且第一个想法已经在一次调用中检查存在和删除时，这只是额外的工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T08:07:13.433

作为参考，根据我的理解，用相当宽松的术语来说：

jQuery 中的`$()`选择器总是返回一个 jQuery 集合。如果没有匹配的元素，则集合为空。

当您调用诸如`remove()`jQuery 集合之类的函数时，它实际上会遍历集合，对其中的每个元素执行操作。如果集合为空，它将永远不会迭代，因此`remove()`在这种情况下永远不要调用任何元素。

例如，使用这种情况：

`$('#empty-alert')`将返回一个集合`["#empty-alert jQuery object"]`或`[]`（空数组）；

调用 .remove() 在幕后实际上是在做这样的事情：

```
//jqCollection is one of the arrays previously mentioned

jqCollection.each(function(){
    this.remove(); //'this' is a single jQuery object from the jqcollection
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T08:04:38.597

> 或者当元素确实存在并且第一个想法已经在一次调用中检查存在和删除时，这只是额外的工作？

在不存在的元素上调用 remove() 不会出错，因此您可以将它与不存在元素的检查一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T08:03:58.350

看看这个小提琴[http://jsfiddle.net/knFK4/1/](http://jsfiddle.net/knFK4/1/)，当你删除它时，不需要事先检查元素是否存在。如果缺少元素，不会引发错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T08:05:52.767

阅读文档[http://api.jquery.com/remove/](http://api.jquery.com/remove/)如果你需要做这个检查，他们会告诉你。

# java - 命令队列引导代码看起来像服务定位器模式而不是依赖注入

> ID：11897643
> 
> 赞同：1
> 
> 时间：2012-08-10T08:02:07.523
> 
> 标签：java, dependency-injection, guice, cqrs, service-locator

我有一个使用 CQRS 和依赖注入的项目。系统的查询端很好。

对于系统的命令端，我选择使用队列：

```
BlockingQueue<Command> commandQueue; 
```

这将存储从多个线程接收到的命令及其参数。这些命令都实现了一个带有执行方法的通用接口：

```
public interface Command extends Serializable {
    void execute();
} 
```

Commands 的参数作为数据存储在 Command 接口的具体实现中。参数的类型和可能的数量将根据它所代表的命令而有所不同，使用这种结构意味着这个细节都被封装在命令队列逻辑之外。

这个想法是命令稍后由一个工作线程按顺序执行，该工作线程依次在每个命令上调用 execute()，而不关心它在后台是哪个命令。

这些命令只有在从队列中取出准备执行时才需要注入（这主要是因为我希望能够序列化命令，但也因为命令的执行需要与接收和排队的应用程序部分不同的模块他们）

**我的问题是这样** 的：因为命令需要等到它们从队列中取出来获取它们的依赖关系，所以我最终将一个轻包装的 Injector 传递给它们的“执行”方法，这样它们就可以自己创建一个对象图。这感觉更像是服务定位器模式，而不是依赖注入。

```
public interface Command extends Serializable {
    void execute(**ExecutorLocator locator**);
} 
```

是否有我遗漏的东西，或者 DI 在堆栈中的某个点必须看起来像服务定位器是不可避免的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:52:24.420

自从我接触 Java 代码以来已经有一段时间了，但是好的架构和设计并不局限于一种语言。

首先：[ServiceLocator 是一种反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。

第二：[告诉，不要问](http://pragprog.com/articles/tell-dont-ask)。如果有任何东西从外部构建命令，不要让他们向定位器询问他们的依赖关系。

第三：我会创建为命令注册的处理程序，并且知道如何处理封装在命令中的信息。因此，您根本不需要注入或构建您的命令。设置您的处理程序并确保您的命令到达那里。

# java - 我应该在 SwingWorker.doInBackground() 中使用 SwingUtilities.invokeLater() 吗？

> ID：11897647
> 
> 赞同：5
> 
> 时间：2012-08-10T08:02:38.340
> 
> 标签：java, swing, swingworker, event-dispatch-thread, invokelater

从 swing worker 与 EDT 交互的常用方法是使用 get() 方法。但我有一个很长的任务和这样的代码：

```
public Void doInBackground() {
    for(Object o : objects) {
         doSomething();
         MyGlobalGUIConsole.addMessage("Done for " + o);
    }
} 
```

在大多数教程中，建议使用返回值从 SwingWorker 将某些内容返回到 EDT，但我可以：

```
public Void doInBackground() {
    for(Object o : objects) {
        doSomething();
        SwingUtilities.invokeLater(new Runnable() {        
            @Override                                      
            public void run() {                            
                MyGlobalGUIConsole.addMessage("Done for " + o);
            }                                              
        });                                                
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T08:11:06.963

可以，但是 SwingWorker 具有旨在报告后台任务进度的方法：您调用`publish()`from`doInBackground()`以发布进度，并覆盖`process()`（在 EDT 中调用）以显示进度。所以上面的代码可以改写为：

```
public Void doInBackground() {
    for(Object o : objects) {
        doSomething();
        publish("Done for " + o);                           
    }                                             
}

@Override
protected void process(List<String> messages) {
    for (String message : messages) {
        MyGlobalGUIConsole.addMessage(message);
    }
} 
```

# jquery - 无法使用 loadonce 刷新 jqgrid：true

> ID：11897649
> 
> 赞同：1
> 
> 时间：2012-08-10T08:02:55.337
> 
> 标签：jquery, jqgrid, refresh

在创建/编辑/删除一行后，我显然需要从服务器刷新网格。我已经检查了 Oleg 关于重新加载的所有问题，但我仍然无法使其正常工作。我究竟做错了什么？这么简单的事情为什么要这么复杂。

我也想在发布后关闭表格..但这是下一步

这是我的代码：

```
$(function(){ 
         var roles = null;
                $.ajax({
                    'async': false,
                    'global': false,
                    'url': '<?php echo base_url().'utils/Admin_Rest/get_roles'?>',
                    'dataType': 'json',
                    'success': function (data) {
                        roles = data;
                    }
                });
var comptes=$("#Comptes");
comptes.jqGrid({
            url:'<?php echo base_url().'utils/Admin_rest/get_comptes'?>',    
            mtype : "post",           
            datatype: "json",           
            colNames:['Nom','Prenom','Email','Utilisateur','Telephone', 'Password','Role'],   
            colModel:[  
                {name:'first_name',index:'first_name',editable:true, editrules: { required: true }, edittype:'text',search:false, align:"center"},
                {name:'last_name',index:'last_name',editable:true, edittype:'text', editrules: { required: true }, search:false,  align:"center"},
                {name:'email',index:'email',editable:true, editrules: { required: true }, edittype:'text',search:false, align:"center"},
                {name:'username',index:'username',editable:true, editrules: { required: true }, edittype:'text',search:false, align:"center"},
                {name:'phone',index:'phone',editable:true, editrules: { required: true }, edittype:'text',search:false, align:"center"},
                 {name:'password',index:'password',editable:true, hidden:true, editrules: { edithidden:true }, edittype:'password',search:false, align:"center"},                       
                {name:'role',index:'role', editable:true, editrules: {required: true},  edittype:'select', search:true, stype:'select', 
                    searchoptions:{ value:roles},
                    editoptions:{ value:roles}}
                ],

            rowNum:10,
            jsonReader: {
                 root: "rows", 
                  page: "page", 
                  total: "total", 
                  records: "records", 
                  repeatitems: false, 
                  id: "id",
                  userdata: "userdata"
            },                  
            width: 850,
            height: "100%",
            rowList:[10,20,30],
            pager: '#pager',
            sortname: 'id',
            viewrecords: true,
            loadonce:true,
            rownumbers: true,
            gridview: true,
            pagination:true,
            editurl: "<?php echo base_url().'utils/Admin_rest/edit_compte'?>",  

            caption:""
            }).navGrid('#pager',
                    {edit:true,
                    add: true, 
                    del:true,refresh:false},
              { // edit options
                    beforeShowForm: function(frm) { 
                        comptes.jqGrid('setColProp', 'password', {editrules: {required: false}});
                    }
                }, 
                { // add options
                    beforeShowForm: function(frm) { 
                        comptes.jqGrid('setColProp', 'password', {editrules: {required: true}});
                }
                });

comptes.jqGrid('navGrid', '#pager', {refresh: false},
        { // Edit options
            afterSubmit: function () {
                $(this).jqGrid('setGridParam', {datatype:'json'});
                return [true,'']; // no error
            }
        },
        { // Add options
            afterSubmit: function () {
                $(this).jqGrid('setGridParam', {datatype:'json'});
                return [true,'',false]; // no error and no new rowid
            }
        },
        { // Delete options
            afterSubmit: function () {
                $(this).jqGrid('setGridParam', {datatype:'json'});
                return [true,'']; // no error
            }
        }
    );
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:16:46.387

好像参数给错了。正确的寻呼机参数是：

```
.navGrid('#pager',
                    {edit:true,
                    add: true, 
                    del:true,refresh:false},
              { // edit options
                    beforeShowForm: function(frm) { 
                        comptes.jqGrid('setColProp', 'password', {editrules: {required: false}});
                    },
                    afterSubmit: function() {
                        comptes.jqGrid('setGridParam',{datatype:'json'}).trigger('reloadGrid');
                          return [true,'',false]; // no error and no new rowid
                         }
                }, 
                { // add options
                    beforeShowForm: function(frm) { 
                        comptes.jqGrid('setColProp', 'password', {editrules: {required: true}});
                    },
                     afterSubmit: function() {
                            comptes.jqGrid('setGridParam',{datatype:'json'}).trigger('reloadGrid');
                        return [true,'']; // no error
                    }
                } ,
                { // delete options
                     afterSubmit: function() {
                            comptes.jqGrid('setGridParam',{datatype:'json'}).trigger('reloadGrid');
                        return [true,'']; // no error
                    }
                }       
               ); 
```

# delphi - 用户友好的最佳 Delphi 免费软件编译器

> ID：11897651
> 
> 赞同：0
> 
> 时间：2012-08-10T08:03:00.517
> 
> 标签：delphi, winapi

我正在开发一个 C++/Win32 项目，我有一些来自其他（不是我的）项目的相关 Delphi 代码，我想将其转换为 C++ 并集成到我的项目中。

请记住，我没有使用 Delphi 的经验。

什么是好的和用户友好的德尔福编译器？我不介意命令行或 GUI，只要它易于使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T08:07:20.000

唯一的 Delphi 编译器是 Delphi 编译器。它不是免费的。有 Free Pascal 编译器，FPC。也就是说，顾名思义，免费。FPC 可以编译大多数 Delphi 代码，但请注意许多 Delphi 库，例如 VCL，不适用于 FPC。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T08:17:26.277

我不知道手动转换 C++ 中的源代码对你来说是否太痛苦了。

但是你试过[拉撒路](http://www.lazarus.freepascal.org/)吗？它旨在成为 Delphi 的开源等价物。

希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-02T10:38:53.073

之前的回复在 2012 年都是有效的，但情况发生了变化。

现在有一个免费的（如啤酒）社区版： [https ://www.embarcadero.com/products/delphi/starter/free-download](https://www.embarcadero.com/products/delphi/starter/free-download)

# webkit - 如何编写透明的 WebKit GTK 应用程序

> ID：11897654
> 
> 赞同：4
> 
> 时间：2012-08-10T08:03:06.710
> 
> 标签：webkit, gtk, xfce

我正在尝试编写一个 GTK 应用程序，其中只包含一个 GTK WebKit 视图。我希望 WebKit 的视图是透明的，所以下面的窗口可以看到，这个功能是有意的。

[我在“ Is it possible to render web content over a clear background using WebKit?](https://stackoverflow.com/questions/324923/is-it-possible-to-render-web-content-over-a-clear-background-using-webkit) ”中找到了答案，它可以在我的一台运行 Ubuntu 和 compiz 的 PC 上运行，但不能在另一台运行 Debian 和 xfwm4 的 PC 上运行。在 xfwm4 上，它只是在调用时显示灰色背景`webkit_web_view_set_transparent`，当我没有调用时`webkit_web_view_set_transparent`，它只是显示白色背景。测试 HTML 文件在 Ubuntu 和 Debian 上是相同的。

据我了解，要使 WebKit 视图透明，我必须设置一个合成窗口管理器。

为了检查我的 xfwm4 是否支持合成，我尝试了以下代码：

```
import gtk
import cairo

class MainWindow(gtk.Window):
__gsignals__ = {
    'expose-event': 'override'
    }

def __init__(self):
    super(MainWindow, self).__init__()

    self.set_app_paintable(True)
    # no window border
    self.set_decorated(False)

    # see if we can do transparency
    screen = self.get_screen()

    alphamap = screen.get_rgba_colormap()
    rgbmap   = screen.get_rgb_colormap()

    if alphamap is not None:
        self.set_colormap(alphamap)
    else:
        self.set_colormap(rgbmap)
        print 'sorry, no alpha channel available :('

    self.set_size_request(300, 200)

def do_expose_event(self, event):
    # we're going to draw on a temporary surface
    # then copy to the window surface
    # you can also draw directly on the window
    width, height = self.get_size()

    surface = cairo.ImageSurface(cairo.FORMAT_ARGB32, width, height)
    ctx = cairo.Context(surface)

    # background is gray and transparent
    ctx.set_source_rgba(.7, .7, .7, 0.75)
    ctx.paint()

    # red border
    ctx.set_line_width(3.0)
    ctx.rectangle(0, 0, width, height)
    ctx.set_source_rgba(1.0, 0.0, 0.0, .75)
    ctx.stroke()

    # now copy to our window surface
    dest_ctx = self.window.cairo_create()
    # only update what needs to be drawn
    dest_ctx.rectangle(event.area.x, event.area.y, 
                       event.area.width, event.area.height)
    dest_ctx.clip()
    # source operator means replace, don't draw on top of
    dest_ctx.set_operator(cairo.OPERATOR_SOURCE)
    dest_ctx.set_source_surface(surface, 0, 0)
    dest_ctx.paint()

if __name__ == "__main__":
    w = MainWindow()
    w.show()
    gtk.main() 
```

此应用程序显示一个带有红色边框的透明方块。所以，我猜我的带有 Xfwm4（版本 4.8.3-1）的 Debian 应该支持合成。

有人知道为什么我的 GTK 应用程序不能透明吗？

================

更新：我发现问题出在 libwebkit 中，而不是在窗口管理器中。这两个系统中的libwebkit版本不同，我在另一个xfwm4环境下尝试了我的应用程序，透明工作。

# asp.net-mvc-3 - 使用 Castle.Windsor 的 PersistenceFacility 如何影响我实现 NHibernateActionFilter 的能力？

> ID：11897656
> 
> 赞同：0
> 
> 时间：2012-08-10T08:03:08.660
> 
> 标签：asp.net-mvc-3, nhibernate, castle, sessionfactory

问题有点含糊不好意思。我使用教程与 NHibernate 和 Castle Windsor 建立了一个新项目。结果是一个 PersistenceInstaller 和一个 PersistenceFacility。PersistenceFacility 有一个 Init() 方法，如下所示：

```
 protected override void Init()
    {
        var config = BuildDatabaseConfiguration();

        Kernel.Register(
            Component.For<ISessionFactory>()
                .UsingFactoryMethod(_ => config.BuildSessionFactory()),
            Component.For<ISession>()
                .UsingFactoryMethod(k => k.Resolve<ISessionFactory>().OpenSession())
                .LifestylePerWebRequest());
    } 
```

[我在这里](http://ayende.com/blog/4808/refactoring-toward-frictionless-odorless-code-getting-rid-of-globals)遇到了 Ayendes 管理会话的解决方案- 在他的系列“重构无摩擦和无味代码”中。现在，目前[PersistenceFacility](http://pastebin.com/y6YP1zAR)负责创建 SessionFactory。我想知道我如何能够重构周围的东西（或者如果这甚至是必要的），所以我可以实现[NHibernateActionFilter](http://pastebin.com/GjppGNbX) - 目前需要访问 SessionFactory 行：

```
sessionController.Session = sessionFactory.OpenSession(); 
```

也许我没有正确理解 Castle.Windsor，我不太确定。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:28:34.613

我想我有它，如果有的话，有点明显。将自己从屏幕上撬开并步行到商店有帮助！我应该只将 ISessionFactory 注入 NHibernateActionFilter 对吗？

```
 private static ISessionFactory sessionFactory;

    public NHibernateActionFilter(ISessionFactory sessionFactory)
    {
        sessionFactory = sessionFactory;
    } 
```

# javascript - Javascript 中函数名称属性的可能用例

> ID：11897661
> 
> 赞同：1
> 
> 时间：2012-08-10T08:03:39.680
> 
> 标签：javascript

有人可以解释一下Javascript中函数名称属性的用例吗？我读到它对递归很有帮助，怎么样？

```
function foo() {}
foo.name; // "foo" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:08:29.953

来自[MDN的用例](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/name)

您可以使用`obj.constructor.name`检查对象的“类”

```
function a(){
}

var b = new a();
alert(b.constructor.name); //Alerts "a" 
```

把它想象成`get_class()`在 PHP 或`.getClass().getName()`Java 中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:07:53.033

我想不出太多用例，因为它是只读的。但它在 MDN 上有所描述：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/name](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/name)

我只能想象您可能想在`eval`类型情况下使用它。

# linux - 识别 Unix 域套接字连接的另一端

> ID：11897662
> 
> 赞同：18
> 
> 时间：2012-08-10T08:03:46.057
> 
> 标签：linux, kernel, unix-socket

我试图弄清楚是什么进程持有 unix 域套接字的另一端。在一些`strace`输出中，我已经确定了一个给定的文件描述符，该文件描述符涉及我当前正在调试的问题，我想知道哪个进程在另一端。由于该套接字有多个连接，因此仅按路径名是行不通的。

`lsof`为我提供以下信息：

```
dbus-daem  4175  mvg   10u  unix 0xffff8803e256d9c0      0t0  12828 @/tmp/dbus-LyGToFzlcG 
```

所以我知道一些地址（“内核地址”？），我知道一些套接字号，我知道路径。我可以在其他地方找到相同的信息：

```
$ netstat -n | grep 12828
unix  3      [ ]         STREAM     CONNECTED     12828    @/tmp/dbus-LyGToFzlcG
$ grep -E '12828|ffff8803e256d9c0' /proc/net/unix
ffff8803e256d9c0: 00000003 00000000 00000000 0001 03 12828 @/tmp/dbus-LyGToFzlcG
$ ls -l /proc/*/fd/* 2>/dev/null | grep 12828
lrwx------ 1 mvg users 64 10\. Aug 09:08 /proc/4175/fd/10 -> socket:[12828] 
```

但是，这些都没有告诉我套接字连接的*另一*端是什么。我怎么知道哪个进程在控制另一端？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-10T10:55:50.150

[在Server Fault](https://serverfault.com/q/252723/129921)和[Unix & Linux](https://unix.stackexchange.com/q/16300/20807)上也提出了类似的问题。公认的答案是，Linux 上的用户空间无法可靠地使用此信息。

一个常见的建议是查看相邻的套接字编号，但`ls -l /proc/*/fd/* 2>/dev/null | grep 1282[79]`这里没有给出任何结果。`netstat`也许可以使用输出中的相邻行。似乎存在一种带有和不带有关联套接字名称的连接模式。但我想要某种确定性，而不仅仅是猜测。

[一个答案](https://unix.stackexchange.com/a/16447/20807)建议一种工具，它似乎能够通过挖掘内核结构来解决这个问题。使用该选项需要内核的调试信息，由该`CONFIG_DEBUG_INFO`选项生成并由某些发行版作为单独的包提供。基于该答案，使用提供的地址`lsof`，以下解决方案对我有用：

```
# gdb /usr/src/linux/vmlinux /proc/kcore
(gdb) p ((struct unix_sock*)0xffff8803e256d9c0)->peer 
```

这将打印连接另一端的地址。查询`lsof -U`该数字将提供进程 ID 和文件描述符编号等详细信息。

如果调试信息不​​可用，则*可以*通过了解对等成员在 unix_sock 结构中的偏移量来访问所需的信息。就我而言，在 Linux 3.5.0 for x86_64 上，可以使用以下代码计算相同的地址，而无需依赖调试符号：

```
(gdb) p ((void**)0xffff8803e256d9c0)[0x52] 
```

我不会对该解决方案的便携性做出任何保证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-27T00:30:32.647

更新：现在可以使用实际接口来执行此操作已有一段时间了。从 Linux 3.3 开始，UNIX_DIAG 功能为此信息提供了一个基于 netlink 的 API，并且 lsof 4.89 及更高版本支持它。有关详细信息，请参阅[https://unix.stackexchange.com/a/190606/1820](https://unix.stackexchange.com/a/190606/1820)。

# asp.net-mvc-3 - 回发时如何设置下拉菜单的默认值

> ID：11897668
> 
> 赞同：0
> 
> 时间：2012-08-10T08:04:21.780
> 
> 标签：asp.net-mvc-3

我正在使用 MVC3。我有一个下拉列表，我需要从数据库中设置默认值。

当我在下拉列表中选择一个值时，我得到一个回发，即使在回发之后，我选择的值也被选中。如何`<--Select Project-->`在回发后再次获取默认值作为选定值？

楷模

```
namespace BugTracker.Models
{
    public class BugModel
    {
        public List<BugModel> InsertBug {get; set;}
        public List<BugModel> Bugs { get; set; }
        public Int16 BugID { get; set; }
        [Required(ErrorMessage = "Title is required")]
        public string Title { get; set; }
        [Required(ErrorMessage = "Description is required")]
        public string Description {get; set;}
        [Required(ErrorMessage = "Version is required")]
        public string Version { get; set; }
        [Required(ErrorMessage = "BuildNumber is required")]
        public string BuildNumber { get; set; }
        [Required(ErrorMessage = "CreatedDate is required")]
        public string CreatedDate { get; set; }
        [Required(ErrorMessage = "GetDate is required")]
        public string GetDate { get; set; }

        public List<BugModel> GetProjects { get; set; }
        public int ProjectID { get; set; }
        [Required(ErrorMessage = "ProjectName is required")]
        public string ProjectName { get; set; }

        public List<BugModel> GetEmployee {get; set;}
        public int EmployeeID { get; set; }
        public int CreatedByID { get; set; }
        [Required(ErrorMessage = "EmployeeName is required")]
        public string EmployeeName {get;set;}
        [Required(ErrorMessage = "CreatedBy is required")]
        public string CreatedBy { get; set; }

        public List<BugModel> GetCategory { get; set;}
        public int CategoryID { get; set; }
        [Required(ErrorMessage = "Category is required")]
        public string Category { get; set;}

        public List<BugModel> GetSeverity { get; set;}
        public int SeverityID { get; set; }
        [Required(ErrorMessage = "Severity is required")]
        public string Severity { get; set; }

        public List<BugModel> GetPriority { get; set; }
        public int PriorityID { get; set; }
        [Required(ErrorMessage = "Prirority is required")]
        public string Prirority { get; set;}

        public List<BugModel> GetReleasePhase { get; set;}
        public int ReleasePhaseID { get; set; }
        [Required(ErrorMessage = "ReleasePhase is required")]
        public string ReleasePhase { get; set;}

        public List<BugModel> GetTypes { get; set; }
        public int TypeID { get; set; }
        [Required(ErrorMessage = "Type is required")]
        public string Type { get; set; }
        public List<BugModel> GetBugHistory { get; set; }    
        [Required(ErrorMessage = "AssignTo is required")]
        public string AssignTo { get; set; }

    }
} 
```

控制器

```
[AcceptVerbs(HttpVerbs.Post)]    
public ActionResult BugDetails(FormCollection form,string Projects,string Prirority,string CreatedBy,BugModel model)    
{
var modelList = new List();    
ViewBag.Projects = new SelectList(GetProjects(), "ProjectId", "ProjectName");    
ViewBag.Prirority = new SelectList(GetPriority(), "PriorityID", "Prirority");    
ViewBag.CreatedBy = new SelectList(GetEmployee(), "EmployeeID", "EmployeeName");    
using (SqlConnection conn = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=BugtrackerNew;Data Source=SSDEV5-HP\SQLEXPRESS"))    
{    
    SqlCommand dCmd = new SqlCommand("Filter", conn);    
    dCmd.CommandType = CommandType.StoredProcedure;    
    conn.Open();    
    dCmd.Parameters.Add(new SqlParameter("@ProjectID", Projects));    
    dCmd.Parameters.Add(new SqlParameter("@PriorityID",Prirority));    
    dCmd.Parameters.Add(new SqlParameter("@CreatedByID",CreatedBy));    
    SqlDataAdapter da = new SqlDataAdapter(dCmd);    
    DataSet ds = new DataSet();    
    da.Fill(ds);
    for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)    
    {
        model.BugID = Convert.ToInt16(ds.Tables[0].Rows[i]["BugID"]);    
        model.Title = ds.Tables[0].Rows[i]["Title"].ToString();    
        model.Description = ds.Tables[0].Rows[i]["Description"].ToString();            
        conn.Close();             
        return View(modelList);
    }
} 
```

看法

```
using (Html.BeginForm())    
{ %>   
<%: Html.DropDownList("Projects", (SelectList)ViewBag.Projects)%>    
<%: Html.DropDownList("Prirority", (SelectList)ViewBag.Prirority, "Select Project")%>  
<%: Html.DropDownList("CreatedBy", (SelectList)ViewBag.CreatedBy, "--Select Project--")%> 
```

现在我想在页面回发时获得默认值。但是在 MVC 中我们没有页面加载方法，那我该怎么做呢？

# java - 如何动态更改java代码中的文件位置？

> ID：11897669
> 
> 赞同：0
> 
> 时间：2012-08-10T08:04:24.027
> 
> 标签：java, maven

我有 3 个模块链接到与此类似的父项目。

```
root (pom.xml)
   +--- mod1 (pom.xml)
   +--- mod2 (pom.xml)
   +--- mod3 (pom.xml) 
```

我在 mod1 的 config 文件夹中有一些配置文件。我在 mod2 的 config 文件夹中有其他配置文件。我已将所有这些配置文件放在输出 zip 文件中的一个公共文件夹中。

我现在必须动态更改位置以指向新位置。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:12:07.017

如果您使用类路径获取配置文件，则可以移动文件的位置并更改类路径。

# ruby-on-rails - 基本嵌套路线（如何同时拥有嵌套路线和不嵌套路线）

> ID：11897671
> 
> 赞同：1
> 
> 时间：2012-08-10T08:04:34.587
> 
> 标签：ruby-on-rails, ruby, routes

我有这样的路线：

```
resources :users do
  resources :projects
end 
```

我希望能够访问这样的路线：

```
/users/1/projects/1 
```

和

```
/projects/1 
```

这可能吗？我该如何设置？我在我的应用程序中遇到问题，我们希望用户能够通过 /users/:id/projects/:id 查看他们自己的项目，但也可以在其他页面上查看所有创建的项目，比如这个 /projects 或一个项目和一个 id，比如这个 /projects/:id。我觉得我错过了一些东西，我应该摆脱嵌套路线吗？或者我可以两者兼得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:09:44.383

你可以两者兼得。只需添加`resources :projects`到您的 routes.rb 即可。然后，在您的 ProjectsController 中，您必须执行以下操作：

```
def index
  if params[:user_id]
    @projects = User.find(params[:user_id]).projects
  else
    @projects = current_user.projects
  end
end 
```

我假设您的身份验证系统`current_user`为您的控制器提供了方法（就像大多数人一样）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T08:10:13.590

根据您的需要，您当然可以有两种方式。

```
resources :users do
  resources :projects 
end
resources :projects 
```

将在 /users/:user_id/projects/:id 和 /projects/:id 中为您提供您的网址。

您可以在项目控制器中检查 params[:user_id] 是否存在并采取必要的措施。

# facebook - 让 FB 喜欢抓取正确的 URL

> ID：11897672
> 
> 赞同：0
> 
> 时间：2012-08-10T08:04:37.163
> 
> 标签：facebook, iframe, facebook-like, facebook-opengraph

我在 Fancybox 的 iFrame 中使用 Facebook 之类的按钮，我的网站使用 Zenphoto。这似乎是让 Fancybox 中出现点赞按钮的唯一方法。

编码：

```
 this.title += '<iframe src="//www.facebook.com/plugins/like.php?    href=http://www.dagloos.com' + this.href +         '&amp;layout=button_count&amp;show_faces=false&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:80px; height:20px;" allowTransparency="true"></iframe>'; 
```

当有人现在点击点赞按钮时，Facebook 页面上会显示一个空白的点赞通知，并带有直接的 img 网址。我将 og 标签添加到我网站的标题中，但喜欢时它不会抓住它们。可能是因为 iFrame 版本已过时。

我怎样才能让它在 facebook 上显示带有图像缩略图的类似内容，如果可能的话，还有其他信息（网站标题、描述等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:00:39.503

```
<iframe src="http://www.facebook.com/widgets/like.php?href=type in ur web address here"
         scrolling="no" frameborder="0"
         style="border:none; width:450px; height:80px"></iframe> 
```

在href之后在这里输入你的网址

# java - 这不是调用 servlet

> ID：11897674
> 
> 赞同：0
> 
> 时间：2012-08-10T08:04:42.597
> 
> 标签：java, servlets

我有这个代码

```
<form method="post" action="localhost:8080/WelcomeServlet">
  <select name="Signal_Drop">
    <option value="True">True</opion>
  </select>
  <select name="Video_Glitch">
    <option value="True">True</option>
  </select>
  <select name="Call_Drop">
    <option value="True">True</option>
  </select>
  <input type="Submit" value="Submit">
</form> 
```

当我单击提交按钮时，页面没有改变。什么都没发生。它没有调用 servlet。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:06:03.683

写

```
http://localhost:8080/WelcomeServlet 
```

而不仅仅是

```
localhost:8080/WelcomeServlet 
```

而且您可能必须在 Servlet 名称之前添加 WAR 的上下文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T08:10:21.843

更好地使用：

```
<form method="post" action="/WelcomeServlet"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T08:18:15.580

首先，您在第 3 行有一个小 html 错误，`</opion>`而不是`</option>`

其次，我同意前两个答案避免使用绝对网址，因为服务器会自动解析网址。

web.xml

```
 <servlet>
    <servlet-name>welcome</servlet-name>
    <servlet-class>com.lab.WelcomeServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>welcome</servlet-name>
    <url-pattern>/WelcomeServlet</url-pattern>
</servlet-mapping> 
```

你的表格

```
<body>
<form method="post" action="WelcomeServlet">
    <select name="Signal_Drop">
        <option value="True">
            True
            </option>
    </select> <select name="Video_Glitch">
        <option value="True">True</option>
    </select> <select name="Call_Drop">
        <option value="True">True</option>
    </select> <input type="Submit" value="Submit">
</form> 
```

希望它会帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T08:08:18.427

代替

```
localhost:8080/WelcomeServlet 
```

写

```
/WelcomeServlet 
```

在这里写绝对地址不是很好。

# active-directory - 以编程方式为 ActiveDirectoryMembershipProvider 设置 connectionString

> ID：11897675
> 
> 赞同：7
> 
> 时间：2012-08-10T08:04:49.533
> 
> 标签：active-directory, asp.net-membership

一个可以使用

```
 new PrincipalContext(ContextType.Domain,null) 
```

没有为 Active Directory 提供任何连接字符串。

使用时，`ActiveDirectoryMembershipProvider`您必须在`web.config`.

我正在处理的站点将部署在多个站点上，我不想`web.config`为每个部署填写详细信息。

[如何：](http://msdn.microsoft.com/en-us/library/ff650307.aspx)在 MSDN 上的多个域中使用带有 Active Directory 的表单身份验证指定 3 个（！）成员资格提供商来处理 3 个域，这并不令人印象深刻。然而，这篇文章来自 2005 年，它处理的任务与我所追求的不同。

**问题：**

是否可以`ActiveDirectoryMembershipProvider`在 web.config 中不硬编码 LDAP 端点的方式使用？

我宁愿使用`ActiveDirectoryMembershipProvider`而不是`PrincipalContext`（可能）有能力打电话`ChangePassword`等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-15T18:34:32.353

`ActiveDirectoryMembershipProvider`不，不指定目标 LDAP 服务器就无法使用。

必须指定连接字符串，并且该字符串必须包含一个服务器（包含[`ADS_FORMAT_SERVER`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa772261%28v=vs.85%29.aspx)）

> 您必须在标识要使用的 Active Directory 服务器、Active Directory 域或 ADAM 应用程序分区的 Web.config 文件中创建一个 connectionStrings 元素（ASP.NET 设置架构）条目。提供者**将仅在域范围内**或域内的子范围内运行。

如果您想支持活动目录林，并且可以选择丢失表单身份验证，请考虑使用 Windows 身份验证。Windows 身份验证将使用 NTLM 和 Kerberos 来获取用户在森林中的身份，您仍然可以通过模拟更改用户密码。见[`WindowsIdentity.Impersonate()`](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsidentity.impersonate%28v=vs.110%29.aspx)。

# javascript - iframe 和 Firefox 问题

> ID：11897681
> 
> 赞同：0
> 
> 时间：2012-08-10T08:05:20.050
> 
> 标签：javascript, html, iframe, rich-text-editor

我正在使用 HTML/Javascript 设计一个简单的富文本编辑器。它使用 iframe。虽然它在 IE6（可能还有更新的 IE 版本）中运行良好，但它在 FireFox 中被破坏了。不能以任何方式编辑或使用 iframe。

**的HTML`<body>`**

```
<input type="button" id="bold" class="Button" value="B" onClick="fontEdit('bold');">
<input type="button" id="italic" class="Button" value="I" onClick="fontEdit('italic');">
<input type="button" id="underline" class="Button" value="U" onClick="fontEdit('underline');">
<hr>
<iframe id="TextEditor" class="TextEditor"></iframe> 
```

**Javascript（用于 IE）**

```
TextEditor.document.designMode="on";
TextEditor.document.open();
TextEditor.document.write('<head><style type="text/css">body{ font-family:arial; font-size:13px; }</style> </head>');
TextEditor.document.close();
TextEditor.focus(); 
```

*上面的脚本使 iframe 在 IE 中可编辑。在 FF 中无法这样做。所以我为FF版本改变了一些东西-*

**Javascript（用于 FF）**

```
id("TextEditor").contentWindow.designMode="on";
id("TextEditor").contentWindow.open(); //this line is responsible for pop-ups
id("TextEditor").contentWindow.write('<head><style type="text/css">body{ font-family:arial; font-size:13px; }</style> </head>'); //this line throws error: id("TextEditor").contentWindow.write is not a function at the FF debug console.
id("TextEditor").contentWindow.close();
id("TextEditor").focus(); 
```

*这段代码让FF以空白页为目标引发弹窗警报。它还是坏了。下面是一般功能，例如`id()`和`fontEdit()`-*

```
function fontEdit(x,y){
  TextEditor.document.execCommand(x,"",y);
  TextEditor.focus();
}

function id(id){
  return document.getElementById(id);
}

function tag(tag){
  return document.getElementsByTagName(tag);
} 
```

我确定 FF 不会以这种方式处理 iframe。那么如何让 iframe 用作富文本编辑器而不显示弹出窗口。请尽量避免使用 jQuery，因为我还不太擅长。这就是自定义函数喜欢`id()`并`tag()`存在的原因。

而且，我知道还有其他免费的文本编辑器可供*我*下载和使用，所以请不要向我推荐任何此类解决方案，也不要问我*为什么*必须重新发明轮子。仅当您知道我哪里出错并且您确实可以*帮助*我解决问题时才回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:27:31.677

FF 以空白页为目标引发弹出警报，因为您正在调用该函数`window.open`，而不是您应该调用`document.open`.

`window.open`: 打开一个新的浏览器窗口。

`document.open`：它打开一个输出流以收集任何`document.write()`或`document.writeln()`方法的输出。执行完所有写入后，该`document.close()`方法将显示写入输出流的任何输出。 **注意**：如果目标中已经存在一个文档，它将被清除。

请参阅[open() 方法](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#dom-document-open)

这应该适合你：

```
id("TextEditor").contentWindow.document.designMode="on";
id("TextEditor").contentWindow.document.open(); //this line is responsible for pop-ups
id("TextEditor").contentWindow.document.write('<head><style type="text/css">body{ font-family:arial; font-size:13px; }</style> </head>'); //this line throws error: id("TextEditor").contentWindow.write is not a function at the FF debug console.
id("TextEditor").contentWindow.document.close(); 
```

# oop - 设置器中的验证：哪种方法更好？

> ID：11897682
> 
> 赞同：4
> 
> 时间：2012-08-10T08:05:23.200
> 
> 标签：oop, validation, design-patterns

我和我的朋友发生了争执。

他告诉我这段代码：

```
method SetBalance(balance) {
    if (balance > 0) {
        this.balance = balance;
        return true;
    }
    return false;
} 
```

比这个更好：

```
method SetBalance(balance) {
    if (balance < 0) {
        throw new InvalidArgumentException("Balance couldn't be negative")
    }
    this.balance = balance; 
} 
```

我的问题是：“哪种方法更适合验证？” 为什么？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T08:07:35.230

啊。返回状态与异常。

我更喜欢抛出异常，因为你不能真正忽略异常。程序要么崩溃，要么你必须明确地捕捉和处理它。

您可以忽略退货状态。

此外，这不是现代编程中存在异常的原因吗？处理，嗯......异常（余额<= 0，不应该发生的事情）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:17:52.563

返回值很容易被忽略。在这里，您有明显的编码错误，因此请大声崩溃。我什至会停止/段错误/停止程序 - 仍然可能会捕获异常。我们生活在“理想世界”中，但想象一下我们不太幸运的同事——他们很可能会去堵嘴错误信号设施无法处理根本原因（在此处插入更复杂的错误场景）。当您不给客户以错误的方式做事时，编码会变得容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T08:12:27.177

在设置器的情况下，开发人员永远不会期望这些方法的返回值，因为他们认为无论如何这将负责设置值。
万一出现异常，这将有助于了解确实有问题并再次查看代码。
而不是`runtime exception`，您最好定义自己的异常，`InvalidBalanceException`并指定此方法将在签名本身中抛出此异常。这避免了测试阶段的意外，并决定了开发阶段本身的业务逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T08:29:16.880

除了已经给出的答案之外，在名为“setFoo”的函数中返回一个布尔值是非常具有误导性的。如果你翻译一个布尔值，你会得出是/否。因此，在 oop 中返回布尔值的函数应该可以作为一个给出是/否作为答案的问题来阅读，例如 isBalanceSet。

在与同事的讨论中，我们认为普通 setter 的唯一有效返回值是 fluent-interfaces 的类本身。

关于您的问题，如果该类实际验证其属性本身，则抛出异常是更好的解决方案；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T08:48:55.817

我个人的看法：这两种方法都有其用途。这取决于为什么会出现这种情况，是否可以防止这种情况发生，客户可以采取哪些措施来防止这种情况发生。

**服务器：**

```
method SetBalance(int balance)
{
   // do something only if balance >= 0
} 
```

**客户：**

```
myServer.SetBalance(balance); 
```

**情况 1：** 这种情况的出现只是因为某处（服务器或客户端）的错误。抛出异常。让责任方修复其代码。

**情况 2：** 从某些外部依赖项接收到错误输入。客户可以很容易地检查前提条件。抛出异常，如果客户对此不满意，请让客户修复其代码。

```
if(balance>0)
  myServer.SetBalance(balance);
else
  //take appropriate action. 
```

**情况 3：** 从某些外部依赖项接收到错误输入。客户无法轻松检查前提条件。示例：它需要客户端解析一个字符串，这是服务器的工作。在这里，服务器应该返回成功是有道理的：

```
bool succeeded = myServer.SetBalance(balance);
if(!succeeded)
  //take appropriate action. 
```

写下我的答案后，我注意到这一切都归结为：**客户端不应该使用 try-catch 来调用方法 SetBalance。**（要么是错误所以不要捕获异常，或者自己检查前置条件，或者检查返回值）

这是有关相关主题的好读物：http: [//blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx](http://blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx)

**编辑：** 乔乔提出了一个很好的观点。如果有可能失败，请重命名方法**TrySetBalance() 。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T12:55:51.593

异常处理是 OOP 中处理错误的首选方法，无论是运行时错误还是逻辑错误。证明异常处理合理性的一个论据是，如果使用错误代码，函数的客户端可能会忘记检查错误代码，从而导致可能不容易发现的潜在错误。然而，如果使用异常处理，即使它没有被捕获，它也会传播直到它被处理。因此，OOP 纯粹主义者总是建议使用异常处理。

# sql - 在一个组内做一个组

> ID：11897683
> 
> 赞同：1
> 
> 时间：2012-08-10T08:05:29.597
> 
> 标签：sql, oracle, group-by

我在名称为“Sometable”的表中有两列business_line（值X，Y）和business_segment（值X，Y，Z与business_line相同的X和Y）。我有另一列名为 type_of_payment（值 A、B、C、D、E）和最后一列名为 transaction_value。这就是我想要做的：

对按 business_line 和 business_segment 分组的交易求和，并找出这些付款中来自 A、C、E 的比例。所以我的输出表会是这样的

```
 (last three columns can be named anything
                                              but they specify proportions of A,C,E)  
Business_line       SUM(transaction_value)   A        C        E
and business seg.
X                   100                      20%      30%      50%
Y                   200                      11%      12%      77%     
X                   300                        and so on
Y                   170
Z                   230 
```

我该怎么做呢？？

PS：ACE 的总和不必是 100%，因为 B 和 D 也存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:21:24.800

对于 Oracle 11g 及更高版本，您可以使用`PIVOT`

```
select *
from
(
select sometable.line, paymenttype,total, 100.0*transaction_value/total as percentage
from sometable
    inner join
    (select line, sum(transaction_value) as total
        from sometable
        group by line) total
    on sometable.line = total.line          
) 
pivot 
(
    sum(percentage) for paymenttype in (a,c,e)
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T08:15:37.390

这是标准 SQL，应该在 Oracle 上工作（但未经测试）：

```
SELECT
   business_line,
   business_segment,
   grand_total,
   A_total * 100.0 / grand_total as A,
   C_total * 100.0 / grand_total as C,
   E_total * 100.0 / grand_total as E
FROM
   (
       SELECT
          business_line,
          business_segment,
          SUM(transaction_value) as grand_total,
          SUM(CASE WHEN payment_type = 'A' THEN transaction_value END) as A_total,
          SUM(CASE WHEN payment_type = 'C' THEN transaction_value END) as C_total,
          SUM(CASE WHEN payment_type = 'E' THEN transaction_value END) as E_total
       FROM
          SomeTable
       GROUP BY
          business_line,
          business_segment
    ) as t 
```

# javascript - NPM Pack / Nodejitsu 忽略隐藏的 Node_modules 文件夹

> ID：11897693
> 
> 赞同：1
> 
> 时间：2012-08-10T08:06:06.663
> 
> 标签：javascript, node.js, npm, nodejitsu

似乎 NPM 包以及扩展名 nodejitsu 不喜欢我的 node_modules 文件夹。:*(

我目前正在构建一个网络应用程序。

我的网络应用程序的项目文件夹结构如下：

根

```
Engine(folder)                      Server(folder)    readme.md     package.json 
```

（多个文件夹）（文件夹）（文件夹）node_modules（文件夹）

```
 easyimage,mongodb,mysql(folders)       socket.io (folder)

       node_modules(folder, NPM Pack ignores this)           node_modules(folder, NPM Pack ignores this)

                                                       Socket.io-client (folder, NPM Pack ignores this) 
```

希望大家可以看看这个结构好吗！

我遇到的问题是，当我在根目录运行 NPM Pack 时，整个目录结构都被正确打包，除了第一个 node_modules 文件夹下的所有 node_modules 文件夹。

就好像 NPM 包完全忽略了那些 node_modules 文件夹。（例如 socket.io 下面的那个）。

由于 NPM 包忽略了这些 npm 文件夹，jitsu 也忽略了它们，我无法启动我的网络应用程序。

如何让 NPM pack/nodejitsu 正确打包所有 node_modules 文件夹？

我当前的 package.json 文件位于根目录，如下所示：http: [//pastebin.com/SAU6rwb5](http://pastebin.com/SAU6rwb5)

如您所见，我尝试使用 bundleDependencies 告诉 NPM Pack 我正在尝试包含一些 node_modules 文件夹（模块？），但 pack 仍然忽略所有这些...此外，如果我在“依赖项”下包含任何内容， NPM start 在根目录创建一个新的 (??) node_modules 文件夹...但是在根目录中不需要 node_modules... 正如您所看到的在服务器文件夹中使用了 node_modules。

如何让 NPM Pack 识别所有 node_modules 文件夹中的文件和文件夹并正确打包它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T20:15:49.893

*（如果您想要一个非常简单的解决方案，请跳到最后一段）*

我很难理解您的应用程序结构。我想我明白你想要做什么。从[https://npmjs.org/doc/folders.html](https://npmjs.org/doc/folders.html)开始，它实际上详细介绍了子模块何时以及为什么会出现或不会出现。

> 在本地安装时，npm 首先尝试找到合适的前缀文件夹。这样 npm install foo@1.2.3 就会安装到你的包的合理根目录，即使你碰巧cdd到了其他文件夹。
> 
> 从 $PWD 开始，npm 将遍历文件夹树**，检查包含 package.json 文件或 node_modules 文件夹的文件夹**。***如果找到这样的东西，那么为了运行 npm commands***，它将被视为**有效的“当前目录”***。（在工作目录中运行 git 命令时，此行为受到 git 的 .git-folder 搜索逻辑的启发并与之类似。）*
> 
>  ***如果没有找到包根目录，则使用当前文件夹。**
> 
> 当你运行 npm install foo@1.2.3 时，包会被加载到缓存中，然后解压到 ./node_modules/foo 中。然后， foo 的任何依赖项都类似地解压缩到 ./node_modules/foo/node_modules/....*

 *忍受我的另一个报价...

> 循环使用节点模块系统的属性处理，它遍历目录查找 node_modules 文件夹。**因此，在每个阶段，如果一个包已经安装在祖先 node_modules 文件夹中，那么它就不会安装在当前位置。**
> 
> 考虑上面的情况，其中`foo -> bar -> baz`. 想象一下，如果除此之外，还`baz`依赖于`bar`，那么您将拥有：`foo -> bar -> baz -> bar -> baz ...`。但是，由于文件夹结构是：foo/node_modules/bar/node_modules/baz，所以不需要将另一个 bar 副本放入`.../baz/node_modules`，因为当它调用 require("bar") 时，它会得到安装在`foo/node_modules/bar`.
> 
> `node_modules`仅当将在多个嵌套文件夹中安装完全相同的版本时才使用此快捷方式。`a/node_modules/b/node_modules/a`如果两个“a”包是不同的版本，仍然有可能。**但是，如果不多次重复完全相同的包，将始终防止无限倒退。**

至于 bundledDependencies：

> 发布后[这也适用于打包]，npm 将在 node_modules 文件夹中查找。如果 bundledDependencies 数组中没有任何项，则它们将不会包含在包 tarball 中。

我认为这意味着它只会将*列出的模块*和`./node_modules/`特定的子模块捆绑在一起`./package.json`。然后当然如上所述，它再次递归地遍历目录树......所以如果它`package.json`在这个目录中看到另一个文件，npm 将查看它是否有任何捆绑的 deps 包含在包中。

因此，据我所知，由于您的基本目录中没有包，因此 package.json 中的捆绑依赖项不会*做任何事情*，实际上在 bundledDependencies 字段中包含项目弊大于利。

要修复，您需要编辑`package.json`文件以在每个级别包含这些捆绑包。

在尝试让一个打包然后解包的流星应用程序在 nodejitsu 上运行之前，我遇到过这个问题。我以不同的方式解决了它。在我的应用程序的根文件夹中，我包含了所有顶级节点模块，并在我的`package.json`文件中明确设置了它们的版本。

据我了解，您的文件结构是这样的：

```
    应用程序
    +-- 引擎
    +-- 服务器
    | +-- 套接字.io
    | | `-- 包.json
    | | +-- 节点模块
    `-- 自述文件.md
    `-- 包.json

```

如果是这样，那么您需要`package.json`在 socket.io 下编辑以包含您想要的捆绑的 deps。一般来说，虽然你可以信任包维护者来保持有效的版本。（但在这种情况下你不能？）

至于`Socket.io-client`没有被打包，那是因为它是 socket.io 的依赖项。

如果我要为您建议一种让您自己更轻松的方法，我建议您在您的**主要**顶级`package.json`文件中包含您的应用程序所需的依赖项@您需要的特定版本。如果您出于某种原因需要捆绑它们，请将它们添加到捆绑部分，如果您需要与作者预期不同版本的子模块。考虑创建一个名为`package`or的文件夹`vendor`，然后将模块放在那里，您可以在其中编辑`package.json`并将它们的依赖项捆绑到您的心脏内容中。请确保不要忽略您`vendor`或`packages`目录下的任何文件或文件夹`.npmignore`或`.gitignore`文件。

**或者，如果这太难了（编辑所有这些文件并指定某些版本可能会很痛苦），我建议将您的供应商软件包托管在您可以使用脚本下载它们的地方，然后在`postinstall`您的部分执行此脚本package.json （在[https://npmjs.org/doc/scripts.html](https://npmjs.org/doc/scripts.html)阅读......你可以在你有你的“开始”脚本的同一部分添加它。**

我希望这能澄清事情。*

# c# - 根据单击的按钮将字符串绑定到文本框

> ID：11897696
> 
> 赞同：2
> 
> 时间：2012-08-10T08:06:40.253
> 
> 标签：c#, .net, wpf

我有一个编辑器（文本框），我想根据单击的按钮将不同的文本绑定到它。

我可以在按钮上使用命令并通过命令参数传递我想编辑的字符串并更新绑定到文本框的字符串。这将起作用，但不会保存修改，因为文本（通过命令参数传递）和文本框的文本之间没有绑定。

我的问题是，我应该如何在不直接从视图模型访问文本框的情况下巧妙地实现此绑定？

编辑：我想要实现的目标可能很模糊。我试着澄清一下：

所以假设我有几个不同的按钮，如果我单击其中一个，它应该将一些字符串绑定到编辑器的文本框，我可以在其中修改它并稍后保存。

```
 <Button Content="Edit query" Command="{Binding ShowQueryInEditorCommand}" CommandParameter="{Binding SomeSqlStringToBeEdited}"/>

     <Button Content="Edit query" Command="{Binding ShowQueryInEditorCommand}" CommandParameter="{Binding SomeOtherSqlStringToBeEdited}"/> 
```

这是命令将执行的内容：

```
 public void ShowQueryInEditor(object o)
    {            
        string SqlStatementParam = o as string;
        if (SqlStatementParam != null)
            SQLStatement = SqlStatementParam;            
    } 
```

和编辑器 TextBox 本身：

```
 <TextBox Text="{Binding SQLStatement}"> 
```

如您所见，这是非常基本的，因为它只是设置 SQLStatement 字符串，但它们之间没有绑定，因此它无法将修改反映回 SomeSqlStringToBeEdited/SomeOtherSqlStringToBeEdited。这就是我想要实现的，在单击按钮时以某种方式将该字符串绑定到文本框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:17:39.773

我能想到的基本方法有两种：通过代码或通过 Xaml。

在代码中，不要从 ViewModel 访问文本框，而是向 ViewModel 添加一个新属性，用于“DisplayText”或“SelectedText”，或者在您的场景中有意义的任何内容。而是将您的文本框绑定到该属性，然后将您需要的其余逻辑放入 setter（或者，如果它是 ，则为`DependencyProperty`回调`OnPropertyChanged`）。这将所有逻辑保留在您的 ViewModel 中，这意味着 Xaml 不必关心。

或者在 Xaml 中，您可以使用触发器和模板来根据所选按钮更改文本框。最有可能形成您的描述，我建议有*多个*文本框，一个绑定到每个字符串，并根据单击的按钮切换可见文本框。这使您的 ViewModel 不了解此特定于显示的逻辑，并允许您以后更轻松地更改它。

就个人而言，我可能会建议使用 Xaml 方法，但这取决于您的具体情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:43:06.927

根据

> 但问题是按钮是动态创建的

1）将查询文本和按钮包装到视图模型中，如下所示：

```
public class ViewModel : ViewModelBase
{
    public ViewModel()
    {
        this.turnIsSelectedOnCommand = new RelayCommand(() => IsSelected = true);
    }

    public String Text
    {
        get { return text; }
        set
        {
            if (text != value)
            {
                text = value;
                OnPropertyChanged("Text");
            }
        }
    }
    private String text;

    public Boolean IsSelected
    {
        get { return isSelected; }
        set
        {
            if (isSelected != value)
            {
                isSelected = value;
                OnPropertyChanged("IsSelected");
            }
        }
    }
    private Boolean isSelected;

    public RelayCommand TurnIsSelectedOnCommand
    {
        get { return turnIsSelectedOnCommand; }
    }
    private readonly RelayCommand turnIsSelectedOnCommand;
} 
```

2）将您动态创建的文本/按钮放入集合中。为简单起见，我将它们添加到数组中：

```
 public MainWindow()
    {
        InitializeComponent();
        DataContext = new[] 
        { 
            new ViewModel { Text = "SELECT * FROM Foo", IsSelected = true },
            new ViewModel { Text = "SELECT * FROM Bar" },
            new ViewModel { Text = "DROP TABLE Foo" },
            new ViewModel { Text = "DROP TABLE Bar" },
        };
    } 
```

3) 将集合与 ListBox 和编辑器 - 与`Text`所选项目的 绑定：

```
<ListBox Grid.Row="0" Margin="5" ItemsSource="{Binding}" x:Name="lbItems">
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Right"/>
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
            <Style.Resources>
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                                 Color="Transparent"/>
            </Style.Resources>
        </Style>
    </ListBox.ItemContainerStyle>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Button Content="Edit query" Command="{Binding TurnIsSelectedOnCommand}"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox>

<TextBox Grid.Row="1" Margin="5" Text="{Binding Path=SelectedItem.Text, ElementName=lbItems}" /> 
```

我添加了一些样式修改。首先修改按钮布局。第二种意味着，当您按下按钮并且 ViewModel 将被选中时，列表框项目也将被选中。第三隐藏所选项目背景的选择。

希望这可以帮助。

# c# - 使用 EPPlus 打开 Excel 文档

> ID：11897697
> 
> 赞同：21
> 
> 时间：2012-08-10T08:06:40.673
> 
> 标签：c#, excel, epplus

我正在尝试使用 EPPlus 参考/包打开 Excel 文档。我无法打开 Excel 应用程序。我缺少什么代码？

```
protected void BtnTest_Click(object sender, EventArgs e)
{
     FileInfo newFile = new FileInfo("C:\\Users\\Scott.Atkinson\\Desktop\\Book.xls");

     ExcelPackage pck = new ExcelPackage(newFile);
     //Add the Content sheet
     var ws = pck.Workbook.Worksheets.Add("Content");
     ws.View.ShowGridLines = false;

     ws.Column(4).OutlineLevel = 1;
     ws.Column(4).Collapsed = true;
     ws.Column(5).OutlineLevel = 1;
     ws.Column(5).Collapsed = true;
     ws.OutLineSummaryRight = true;

     //Headers
     ws.Cells["B1"].Value = "Name";
     ws.Cells["C1"].Value = "Size";
     ws.Cells["D1"].Value = "Created";
     ws.Cells["E1"].Value = "Last modified";
     ws.Cells["B1:E1"].Style.Font.Bold = true;
} 
```

我试过`pck.open(newFile);`了，但它不允许...

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-10T08:17:44.817

尝试这个：

```
protected void BtnTest_Click(object sender, EventArgs e)
{
    FileInfo newFile = new FileInfo("C:\\Users\\Scott.Atkinson\\Desktop\\Book.xls");

    ExcelPackage pck = new ExcelPackage(newFile);
    //Add the Content sheet
    var ws = pck.Workbook.Worksheets.Add("Content");
    ws.View.ShowGridLines = false;

    ws.Column(4).OutlineLevel = 1;
    ws.Column(4).Collapsed = true;
    ws.Column(5).OutlineLevel = 1;
    ws.Column(5).Collapsed = true;
    ws.OutLineSummaryRight = true;

    //Headers
    ws.Cells["B1"].Value = "Name";
    ws.Cells["C1"].Value = "Size";
    ws.Cells["D1"].Value = "Created";
    ws.Cells["E1"].Value = "Last modified";
    ws.Cells["B1:E1"].Style.Font.Bold = true;

    pck.Save();
    System.Diagnostics.Process.Start("C:\\Users\\Scott.Atkinson\\Desktop\\Book.xls");
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-13T05:15:01.620

在 ASP NET Core 中尝试此操作以避免 win32 异常：

```
private void CreateWorkbook(string fileName)
{
    using (var p = new ExcelPackage())
    {
        p.Workbook.Properties.Author = "Barry Guvenkaya";
        p.Workbook.Properties.Title = "MyTitle";
        p.Workbook.Worksheets.Add("MySheet");
        var bin = p.GetAsByteArray();
        File.WriteAllBytes(fileName, bin);

        // Below code opens the excel doc
        var proc = new Process();
        proc.StartInfo = new ProcessStartInfo(fileName)
        {
            UseShellExecute = true
        };
        proc.Start();
    }
} 
```

# objective-c - 无法打开数据库“test.sql”：无法在 xcode 中打开数据库文件

> ID：11897699
> 
> 赞同：1
> 
> 时间：2012-08-10T08:06:49.880
> 
> 标签：objective-c, xcode4

我是目标 c 的新手。我正在尝试在我的 Mac 中第一次创建数据库我做了以下步骤

```
******100$ sqlite3 test.sql
SQLite version 3.7.5
Enter ".help" for instructions
Enter SQL statements terminated with a ";" 
```

但是当我输入 .schema 我得到以下错误

```
sqlite> .schema
Error: unable to open database "test.sql": unable to open database file 
```

如果我去创建一个 teble，也会出现同样的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:25:16.030

尝试这样的事情：

```
$ sqlite3 test.sql
SQLite version 3.6.20
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> CREATE TABLE test (a_int INTEGER, a_real REAL, a_text TEXT);
sqlite> .schema
CREATE TABLE test (a_int INTEGER, a_real REAL, a_text TEXT);
sqlite> INSERT INTO test (a_int, a_real, a_text) VALUES (1, 1.24, 'hello world');
sqlite> SELECT * from test;
1|1.24|hello world
sqlite> 
```

（这是来自 Linux，但应该是一样的......）

顺便说一句，文件扩展名`.sql`错误；用于包含 SQL 语句的文件。改为使用`.db`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:39:59.003

检查此链接以获取 Create database, create table insert into table 。

[通过 Objective-C 创建 SQLite3 数据库文件](https://stackoverflow.com/questions/10540728/creating-an-sqlite3-database-file-through-objective-c/11795399#11795399)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T08:18:01.340

您可以使用 Firefox 插件 SQLite Manager 来创建数据库。

# asp.net - 在 JQGrid 中选择展开子网格的父行

> ID：11897703
> 
> 赞同：0
> 
> 时间：2012-08-10T08:07:05.303
> 
> 标签：asp.net, jqgrid

我有一个具有两个层次结构的 JQGRid。我想在从父级展开子网格时执行行选择，因为如果单击加号图标，则不会选择主网格的行。我试图在子网格扩展时触发此代码，但它不起作用：

```
function showSubGrid(subgrid_id, row_id)
{
    jQuery("#<%= jqGrid.ClientID %>").setSelection(row_id, true);
    showSubGrid_jqGrid(subgrid_id, row_id);
} 
```

当子网格从父网格扩展时，会触发此 javascript 函数。这是我的服务器端代码：

```
<trirand:JQGrid ID="jqMasterGrid" runat="server" Height="400px" AutoWidth="False" OnSorting="jqMasterGrid_OnSorting">
<Columns>
<trirand:JQGridColumn DataField="COD_VALUTAZIONE" Width="220" HeaderText = "Codice Valutazione" PrimaryKey="True" Sortable="True" />
<trirand:JQGridColumn DataField="InfAsp" Width="170" TextAlign="Center" Sortable="True"/>
<trirand:JQGridColumn DataField="LineaAsp" Width="170" TextAlign="Center" Sortable="True"/>
<trirand:JQGridColumn DataField="SuperAsp" Width="170" TextAlign="Center" Sortable="True"/>
<trirand:JQGridColumn DataField="Eccellente" Width="170" TextAlign="Center" Sortable="True"/>
</Columns>
<ToolBarSettings
ShowAddButton="false" ShowDeleteButton="false" ShowEditButton="false" ShowRefreshButton="false"
ShowSearchButton="false" ShowViewRowDetailsButton="false" ToolBarPosition="Hidden" ShowSearchToolBar="False" ShowInlineDeleteButton="False" ShowInlineEditButton="True" />
<HierarchySettings HierarchyMode="Parent" />
<ClientSideEvents SubGridRowExpanded="showSubGrid"/>
<ClientSideEvents LoadComplete="jqLoadComplete"></ClientSideEvents>
<PagerSettings PageSize="2000" />
</trirand:JQGrid> 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T07:52:20.540

在你的父 jqgrid 中使用它：

```
HierarchySettings HierarchyMode="Parent" SelectOnExpand="true" 
```

通过使用此代码，当您在父 jqgrid 中展开一行时，将选择父 jqgrid 中的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:43:40.363

好的，试试这样的

```
subGridRowExpanded: function (subgrid_id, row_id) {
    $("#grid").jqGrid('setSelection', "row_id");
} 
```

我现在无法测试我的代码，但如果这不起作用，请告诉我。

# version-control - 仅下载在 perforce 上 2 个日期之间更改的文件

> ID：11897712
> 
> 赞同：2
> 
> 时间：2012-08-10T08:07:19.940
> 
> 标签：version-control, perforce

我只需要从 perforce 服务器下载那些在两个日期之间更改的文件。我正在寻找的是在两个日期之间比较一个包含近 50 万个文件的分支。由于文件太多，我不想同步到新的工作区。

那么有没有办法只下载在 perforce 上两个日期之间更改的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T03:22:09.223

试试这个，从映射存储库相关部分的空客户端：

```
p4 sync -k @2012/01/01
p4 sync @2012/02/01 
```

这`sync -k`会欺骗 Perforce 服务器，使其认为您的工作区包含存储库中的文件，因为它们存在于 1 月 1 日。第二个`sync`将同步 2 月 1 日存在的文件——但 Perforce 只会同步 1 月期间更改的文件，因为它“知道”您已经拥有 1 月 1 日存在的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T15:28:03.523

我认为你可以用一个小脚本来做到这一点。

1.  运行 'p4 changes ...@date1,@date2' 以了解进行了哪些更改
2.  在每个更改列表上运行“p4 describe”以查看包含哪些文件
3.  在这些文件上运行“p4 同步”

# jquery - 如何更改按钮的值

> ID：11897715
> 
> 赞同：0
> 
> 时间：2012-08-10T08:07:42.547
> 
> 标签：jquery, spring, jsp

我正在使用带有ibatis和jsp的spring mcv进行查看。我的问题在 jsp 页面中，我正在查看的数据表在最后一列中包含一个 BUTTON，该数据表从 spring 控制器呈现，如下所示。

```
<c:forEach var="aff" items="${hotellistdisplay}">

<td width="auto" align="center" class="row2"><b>
  <input type="button"  name="mybutton" id="${aff.hotel_id}" class="view" value="Deactivate">
  </b> </td> 
```

有 10 行包含按钮，但是当用户单击其中一行时，按钮的值应更改为 ACTIVE 而不会影响另一行按钮。虽然我得到了基于类的代码，但我正在更改值，但它也反映了所有其他按钮。我希望应该针对用户单击的特定值更改值..

任何帮助请。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:11:29.217

您可以使用该`val()`方法，尝​​试以下方法：

```
$('td input[type="button"]').click(function(){
   $(this).val('active')
}) 
```

或者：

```
$('tr td').click(function(){
   $('input[type="button"]', this).val('active')
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:29:20.007

你仍然可以使用类属性，但`this`在你的函数中使用：

```
$(".view").click(function(){
   $(this).val("ACTIVE");
});​ 
```

演示[在这里](http://jsfiddle.net/jB7EP/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T08:14:00.823

```
$('td').click(function(){
   $(this).find('input[type="button"]').val('ACTIVE');
}) 
```

# php - array_merge 奇怪的行为

> ID：11897719
> 
> 赞同：1
> 
> 时间：2012-08-10T08:08:08.760
> 
> 标签：php, arrays

看看这段代码：

```
$a = array('1'=>'1');
$b = array(''=>'');

var_dump(array_merge($a,$b)); 
```

输出对我来说真的很奇怪：

```
array(2) {
  [0] =>
  string(1) "1"
  '' =>
  string(0) ""
} 
```

好的，我已经变成`$a`了这样：`$a = array('k'=>'v');`并且输出变得更加可预测：

```
array(2) {
  'k' =>
  string(1) "v"
  '' =>
  string(0) ""
} 
```

问题是：为什么第一个元素的关键`0`在第一个例子中？

**编辑：**

```
var_dump($a);
array(1) {
  [1] =>
  string(1) "1"
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T08:11:07.273

> 带有数字键的输入数组中的值将使用从结果数组中的零开始的递增键重新编号。
> 
> [http://php.net/array_merge](http://php.net/array_merge)

是的，在这种情况下，将数字字符串值视为数字值是 PHP 的一个特性。您可能想`$a + $b`改用。

# c++ - 常量联合对象有什么用？

> ID：11897727
> 
> 赞同：31
> 
> 时间：2012-08-10T08:08:26.037
> 
> 标签：c++, c, constants, unions

如果我创建了一个 const union 对象（例如在下面的代码中），则无法在其中完成任何成员分配。那么在任何情况下都可以使用 const union 对象吗？

```
union un
{
    int i;
    float f;
    char c;
};
const union un a; 
/// ! a.i = 10; error. 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-10T08:12:04.893

您仍然可以按如下方式初始化联合：

```
const union un a = { .i = 100 }; 
```

然后在您的代码中使用它。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-10T08:12:38.587

您仍然可以在声明时分配它，例如：

```
const union un a = {0}; 
```

更新：该符号设置了工会成员中的*第一个。*

# facebook - 如何使用 REST API 更新 Facebook 粉丝页面状态

> ID：11897733
> 
> 赞同：0
> 
> 时间：2012-08-10T08:09:12.437
> 
> 标签：facebook

`stream.publish()`我在我的 JAVA Web 应用程序中创建了一个 IFacebookRestClient 对象，并使用方法在我的粉丝页面上发布了字符串。但它似乎是“其他人在 'myFansPage' 上的最新帖子”。更新消息不会显示在我的粉丝新闻提要中。

所以，我需要更新我的粉丝页面的状态。怎么可能？

当我通过 Rest API 时，我可以看到方法“status.set()”和“users.setStatus()”，但它只在用户个人资料中发布，而不是在粉丝页面上。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:39:15.997

您需要使用页面的令牌。

见[https://graph.facebook.com/me/accounts](https://graph.facebook.com/me/accounts)

然后使用您页面中的令牌并设置定期状态更新。

# ruby-on-rails - 如何使用carrierwave为第一个pdf页面创建缩略图

> ID：11897735
> 
> 赞同：12
> 
> 时间：2012-08-10T08:09:33.340
> 
> 标签：ruby-on-rails, file-upload, carrierwave

我正在以这种方式处理 PDF 文件的缩略图：

```
 version :thumb do
    process :resize_to_limit => [260, 192]
    process :convert => :jpg
    process :set_content_type
  end

  def set_content_type(*args)
    self.file.instance_variable_set(:@content_type, "image/jpeg")
  end 
```

但是当 PDF 文件是多页时，它会为一个 jpg 文件中的所有页面生成缩略图。有没有办法只为第一页生成缩略图？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-10T09:29:05.997

我今年早些时候提交了一个[补丁来做到这一点。](https://github.com/jnicklas/carrierwave/pull/691)使用自定义处理器：

```
def cover 
  manipulate! do |frame, index|
    frame if index.zero?
  end
end

process :cover 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-04T20:20:35.657

Tanzeeb 的绝佳解决方案！谢谢你。

所以我可以做这样的事情：

```
 def cover 
    manipulate! do |frame, index|
      frame if index.zero?
    end
  end 
```

并将其用于拇指生成

```
 version :thumb do
    process :cover    
    process :resize_to_fill => [50, 50, Magick::NorthGravity]
    process :convert => 'png'
  end 
```

伟大的！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T19:14:59.560

在寻找相同问题的解决方案时，我遇到了这篇文章。当您将 pdf 转换为 jpeg 时，它会创建一个长 pdf，其中所有页面都首尾相连，因此您需要将图像裁剪为所需的纵横比并丢弃其余部分。以下是我最终使用的：

```
version :thumb_safari do #special version for safari and ios
  process :resize_to_fit => [200,200]
  process :convert => 'jpg'
  process :paper_shape
  def full_filename (for_file = model.logo.file)
     super.chomp(File.extname(super)) + '.jpg'
  end     
end

version :thumb do #all browsers except safari
  process :resize_to_fit => [200,200]
  process :convert => 'jpg' #must convert to jpg before running paper shape
  process :paper_shape
  process :convert => 'jpg' #after running paper_shape it will default to original file type
  def full_filename (for_file = model.logo.file)
    super.chomp(File.extname(super)) + '.jpg'
  end
end

def paper_shape
   manipulate! do |img|
     if img.rows*4 != img.columns*3
       width=img.columns
       height=img.columns/3*4
       img.crop!(0,0,width,height,true)
     else
       img
     end
   end
 end 
```

在控制器/视图中，我使用了 useragent gem 并这样做了：

文档控制器.rb

```
def index
  @user_agent=UserAgent.parse(request.user_agent)
  @search = Document.search(params[:q])
end 
```

index.html.rb

```
<% if @user_agent.browser.downcase == 'safari' %>
<%= link_to(image_tag(doc.pdfdoc_url(:thumb_safari).to_s, :class=>"dropshadow", :size => "150x225"), doc.pdfdoc_url)%>
<% else %>
<%= link_to(image_tag(doc.pdfdoc_url(:thumb).to_s, :class=>"dropshadow", :size => "150x225"), doc.pdfdoc_url)%>
<% end %> 
```

毫无疑问，有一种更好的方法可以做到这一点，但目前正在奏效。

# timestamp - 如何使用 BOX API v2.0 为文件的 unshared_at 赋值

> ID：11897737
> 
> 赞同：0
> 
> 时间：2012-08-10T08:09:50.877
> 
> 标签：timestamp, box-api

我正在尝试为上传的文件创建一个“共享链接”。使用 BOX API，我发送的请求正文为：

{"shared_link": {"access": "open","unshared_at":1347215400,"permissions": {"download": true, "preview": false }} }

但是，它似乎不起作用！？？？（当然，1347215400 是 unix-timestamp 值，对应于 2012 年 9 月 9 日的某个时间）

不带 unshared_at 参数的请求，比如

{"shared_link": {"access": "open","permissions": {"download": true, "preview": false }} }

按预期工作并设置相关属性值。

实际上也尝试了各种其他可能的时间戳格式，但没有成功。API 文档确实提到了返回时间戳值的格式，但没有说明它期望设置值的格式！

有人来帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:25:12.817

请将时间戳值作为[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)发送。文档刚刚更新以更清楚地表明这一点。

# xcode - 在 NSArray 中循环

> ID：11897738
> 
> 赞同：0
> 
> 时间：2012-08-10T08:09:56.757
> 
> 标签：xcode, loops, if-statement, for-loop, nsarray

我有这个数组：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *firstname = [defaults objectForKey:kFirstName];
NSString *middlename = [defaults objectForKey:kMiddleName];
NSString *lastname = [defaults objectForKey:kLastName];
NSString *gender = [defaults objectForKey:kGender];
NSString *bloodtype = [defaults objectForKey:kBloodType];
NSString *civilstatus = [defaults objectForKey:kCivilStatus];
NSString *nationality = [defaults objectForKey:kNationality];

NSArray *nameArray = [NSArray arrayWithObjects:firstname, middlename, lastname, gender, bloodtype, civilstatus, nationality, nil]; 
```

我想在数组中创建一个循环来检查 NSString 对象是否为空或有一个值。

目前，我有这个不使用数组的凌乱 if 语句：

```
if (([firstname length] || [middlename length] || [lastname length] || [gender length] || [bloodtype length] || [civilstatus length] || [nationality length]) == 0)
{
    NSLog(@"test1");
} 
```

我怎样才能做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:16:03.080

您可以`enumerateObjectsUsingBlock`在您的阵列上使用，这对于此类任务非常方便：[https ://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/ occ/instm/NSArray/enumerateObjectsUsingBlock](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/enumerateObjectsUsingBlock)：

或者干脆使用快速枚举：

```
for (NSString *item in nameArray)
    if ([item length])
        NSLog(@"test1"); 
```

# tridion - 在哪里可以找到 SDL Tridion UI 扩展配置文件的架构

> ID：11897745
> 
> 赞同：9
> 
> 时间：2012-08-10T08:10:20.140
> 
> 标签：tridion, tridion-2011

我下载了[Tridion 2011](http://www.julianwraith.com/2010/10/helloworld-extension-for-tridion-2011/)代码的 HelloWorld Extension 以开始使用它，一切正常，但我想知道在哪里可以找到有关配置文件中选项的更多信息。

例如，是否有可用于 UI 扩展配置的架构，特别是**cfg:** (http://www.sdltridion.com/2009/GUI/Configuration), **ext:** (http://www.sdltridion.com/ 2009/GUI/extensions) 和**cmenu:** (http://www.sdltridion.com/2009/GUI/extensions/ContextMenu) 命名空间？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T08:19:37.360

所有扩展名称空间的架构都可以在您的 SDL Tridion CM 服务器的 下`..\Tridion\web\WebUI\Core\Schemas`找到，您将在那里找到以下文件：

*   配置.xsd
*   配置合并.xsd
*   ContextMenuExtension.xsd
*   扩展名.xsd
*   列表扩展.xsd
*   树扩展.xsd

如果您通过 XML -> Schemas... 菜单选项在 Visual Studio 中添加这些（只需单击 XML Schemas 窗口中的 Add... 按钮并从 CM 服务器中选择文件），您将获得 IntelliSense 和 XML 文档验证，让您可以轻松地尝试可用的选项。

请参阅[通过 8 个步骤设置 SDL Tridion 2011 GUI 扩展以](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/GUIextensionIn8steps.aspx)了解有关如何开始的更多详细信息，这比您提到的 HelloWorld 示例包含更多详细信息。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-10T08:15:27.047

您可以在“\web\WebUI\Core\Schemas”下的 Tridion 安装目录中找到模式。

# teamcity - 从项目文件中打包 NuGet 包以及如何使用 Teamcity 应用其他元数据（依赖项、app.conf）

> ID：11897750
> 
> 赞同：1
> 
> 时间：2012-08-10T08:10:36.163
> 
> 标签：teamcity, nuget, nuget-package

如果我使用 .csproj 文件作为 .nupsec 文件，我如何使用 teamcity 从项目文件中打包 NuGet 包以及一些应用额外的元数据（依赖项、app.conf），我如何以及在哪里添加其他元数据包裹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:35:10.930

最简单的方法是创建一个真正的 .nuspec 文件，而不是依赖 .csproj 并对其进行版本化。格式非常简单并且[有据可查](http://docs.nuget.org/docs/reference/nuspec-reference)。您可以在节点下添加任何其他依赖项以及在`<dependencies>`节点下添加任何其他文件`<files>`。

然后，在 TeamCity 下，添加一个类型为“NuGet Pack”的新构建步骤，指向存储库中的 .nuspec 文件，就完成了。

此外，如果您已启用 TeamCity NuGet 服务器并希望将包发布到其上，只需选中“发布创建的包以构建工件”，它们将自动部署。否则，您可以创建 NuGet 发布构建步骤并指向创建的 .nupkg 以将其发布到其他源上。

# php - Symfony2：如何使 form_rest(form) 不显示字段

> ID：11897753
> 
> 赞同：0
> 
> 时间：2012-08-10T08:10:52.703
> 
> 标签：php, forms, symfony

有一点我不喜欢。我真的很讨厌它使日期选择文件（三个选择）变得多么丑陋。我找不到让那些巨大的无样式选择显示适合我自己的风格（或我的网站风格）的方法。

因此，有两种可能性（和问题）：

*   我将如何以及在哪里更改“选择”日期类型以使其更漂亮？
*   如果不可能或太难，我将如何以及在哪里告诉引擎不要显示某个字段（在这种情况下是那个日期）？

我知道我可以手动显示每个字段，省略我不想出现的字段。但相反呢？即告诉 symfony 显示除一个以外的所有字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:26:24.250

首先，Symfony 允许您为日期或日期时间字段在不同的小部件和格式之间进行选择。这些在此处进行了描述：http: [//symfony.com/doc/current/reference/forms/types/date.html#widget](http://symfony.com/doc/current/reference/forms/types/date.html#widget)。

编辑字段的选项位于类“YourEntityType”中，位于“ROOT/TO/YOUR/BUNDLE/Form”目录中。

例子：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('datefield', null, array('widget' => 'single_text'));
} 
```

您提出的两种可能性也是可能的。

1.  对于第一种可能性，您应该查看有关如何自定义表单的文档。[http://symfony.com/doc/current/cookbook/form/form_customization.html](http://symfony.com/doc/current/cookbook/form/form_customization.html)

我会说您可以创建自己的字段类型，它将 date_time 字段作为父字段。

1.  也可以删除字段“日期”。

在您的控制器中：

```
$form = $this->createForm(new EntityType(), $entity);
$form->remove('name of your field in the entity'); 
```

或者在 EntityType 类中：

```
public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('onefiled');
        $builder->add('datefield'); //this is the line you must delete
    } 
```

# ios - ModalTransitionStyle 水平覆盖

> ID：11897754
> 
> 赞同：3
> 
> 时间：2012-08-10T08:10:57.823
> 
> 标签：ios

在我的 iPhone 应用程序中，我使用了几个模态视图。当我展示一个新的视图控制器时，我总是使用其中一个过渡动画

```
(UIModalTransitionStylePartialCurl,UIModalTransitionStyleFlipHorizontal
UIModalTransitionStyleCoverVertical,UIModalTransitionStyleCrossDissolve) 
```

我正在寻找的东西会被称为`UIModalTransitionStyleCoverHorizontal`，但没有这样的东西。然而，在很多应用程序（ios 和第 3 方）中，我看到了这种水平覆盖过渡。

有人知道如何实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:30:44.900

我也回答我的问题。@Max Justicz 所说的是一种方法。另一种方法是在 UINavigationController 中完成。

您创建要从中导航的 UIViewController：

```
UIViewController* controller1 = [[UINavigationController alloc]init]; 
```

还创建一个 UINavigationController 并使用控制器对其进行初始化

```
UINavigationController* controllerNVC = [[UINavigationController alloc]initWithRootViewController: controller1]; 
```

然后在“控制器的.m”文件中，当你想导航时，这样做。

```
UIViewController* controller2 = [[UINavigationController alloc]init];
[[self navigationController] pushViewController:controller2 animated:YES]; 
```

这会将控制器 2 推到控制器 1 上。

当您想从 controller2 返回时，只需调用以下命令：

```
[[self navigationController]popViewControllerAnimated:YES]; 
```

这样，您可以使用水平覆盖动画方式在视图之间导航

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:07:38.960

[这](https://stackoverflow.com/questions/1872076/is-there-a-way-to-perform-uimodaltransitionstylecoverhorizontal-not-fliphorizon)应该回答你的问题。这有点小技巧，但基本上通过将要过渡到的视图放置在当前视图框架之外，您可以更好地控制动画。

希望这可以帮助！

# php - 如何从 MySQL 和 PHP 中 500 万行的记分牌中获得排名？

> ID：11897757
> 
> 赞同：3
> 
> 时间：2012-08-10T08:11:16.817
> 
> 标签：php, mysql, database, ranking

我有一个排行榜，其中有一个“分数”列。我还在 score 列上有一个索引，它允许我非常快速地按分数排序表格，甚至可以切出前十名或任意数量的分数 - 即使有 500 万行！

但是，我真正想要的是在排行榜中也显示玩家“排名”。我尝试了几种方法，但在处理超过 100000 行的任何内容时似乎都没有叠加（它们开始占用半秒以上，考虑到我期待数百个当前用户，这太长了）。

我目前正在使用以下查询来确定一个用户的排名，然后在我的输出中为高于此的用户简单地递增 - 但它非常慢。

```
SELECT  tro.score, tro.userId,  
(
    SELECT  count(*) 
    FROM    scoreboard tri
    WHERE   tri.score >= :score
) AS rank
FROM test_tracks tro
WHERE userId = :userID"); 
```

我正在考虑生成一个排名表来“缓存”用户在将新分数插入记分牌时的排名，但即使生成这个也需要很长时间（几分钟，可能是几小时）。

有谁知道建立排名的任何好的指南或技巧？最好我也希望能够对结果进行分页，但即使只是暂时建立排名就足够了！

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T08:14:27.963

最好的方法是使用一个定期更新的表（一个小时一次，一天一次等），这个表*可能*需要更长的查询并运行它。没有任何必要一直使用这些繁重的查询来破坏数据库。这也意味着长时间运行的查询会运行一次，而不是针对浏览该页面的每个用户。

SO上有一个完美的例子，[每周/每月/每年的](https://stackexchange.com/leagues/1/month/stackoverflow)总数每天更新一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:23:05.377

我能建议的最好的方法如下。（它适用于我的 500 万行，但它没有经过并发测试。由于某种原因，它在 InnoDB 中真的很慢，但在 MyISAM 表中工作亚秒级，因此会丢失事务支持。）

我创建了一个名为 ranks 的表：ranks( score int PK, num int ) 然后用这个作为种子： insert into ranks(score,num) select score,count(*) from player group by score;

之后我创建了这个存储过程：

```
DELIMITER $$
CREATE PROCEDURE testranks(
     OldScore INT 
    ,NewScore INT 
)
BEGIN
    INSERT INTO ranks (score,num) VALUES (NewScore,1) 
    ON DUPLICATE KEY 
    UPDATE num = num + 1;
    UPDATE ranks SET num = num - 1 WHERE score = OldScore;
    DELETE FROM ranks WHERE num = 0 AND score = OldScore;
    SELECT COUNT(*) FROM ranks WHERE score >= newscore;

END$$
DELIMITER ; 
```

如果您调用 TestRanks（带有旧分数和新分数），它将返回新排名。

我很想看看其他人提出了什么解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T08:20:20.133

我最近对分数进行了排名。我发布了粗略的 mysql 代码，它应该可以进一步指导你。

```
SET @rank = 0, @prev_val = NULL;
SELECT id,rank, score FROM (
SELECT @rank := IF(@prev_val=score,@rank,@rank+1) AS rank,
@prev_val := score AS score, id
FROM rank ORDER BY score DESC
)AS result 
```

其中表名是“rank”，字段是 id、score

希望这可以帮助

# php - 无法使用 jquery 将 xml 数据发布到服务器端（php）

> ID：11897760
> 
> 赞同：2
> 
> 时间：2012-08-10T08:11:29.750
> 
> 标签：php, jquery

我正在做的是：

1.  使用ajax get方法读取xml文件

2.  然后更新 xml 的特定节点值

3.  更新此 xml 响应后，我将其发布到服务器端 (php) 以再次写入该 xml 文件

我在将更新的 xml 响应发布到服务器端时遇到错误，错误是：**NS_ERROR_XPC_BAD_CONVERT_JS：无法转换 JavaScript 参数**

我找到了这个公认的答案，但这对我不起作用：[如何使用 jquery 更改 xml 节点的值？](https://stackoverflow.com/questions/4667067/how-to-change-the-value-of-an-xml-node-with-jquery)

这是我的一些代码：

```
$.ajax({
                url: "<?php echo $xmlFilePath;?>",
                type: "GET",
                dataType: "xml",
                success: function(xml){    

                    $(xml).find("Page[id='1']").each(function(){
                       $(this).find('ContentOne').text("New Value");
                    });

                 $.post('<?php echo base_url(); ?>contentadd', { xml: escape($(xml))}, function(data){alert("Data Loaded: " + data);});

                }
        }); 
```

任何快速反应都会有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:56:27.430

我不会转义，而是尝试用 jQuery 序列化 xml 并在服务器端反序列化它......

# html - 如何通过 IE 中的 ActiveX 设置 Excel 列格式

> ID：11897761
> 
> 赞同：1
> 
> 时间：2012-08-10T08:11:33.713
> 
> 标签：html, excel, activex

我使用此代码通过 ActiveX 复制和粘贴将 HTML 中的表格导出到 Excel。

我需要将 B 列中的所有内容设置为文本格式，因为在导出 excel 时将 0 中的内容作为第一个字符剪掉 0。我`objWorksheet.Range("B:B").NumberFormat = "@";` 在行前尝试了 I`objWorksheet.columns.autofit;`但它不起作用 00001 显示为 1

```
var wshShell = new ActiveXObject("WScript.Shell");
var userProfile = wshShell.ExpandEnvironmentStrings("%USERPROFILE%\\Desktop\\xx.xls");
var thisTable = document.getElementById("mytable").innerHTML;
window.clipboardData.setData("Text", thisTable);
var objExcel = new ActiveXObject ("Excel.Application");
//objExcel.visible = true;
var objWorkbook = objExcel.Workbooks.Add();
objWorkSheet = objWorkbook.WorkSheets(2);
objWorkSheet.Select;
objWorkSheet.Delete;
objWorkSheet = objWorkbook.WorkSheets(2);
objWorkSheet.Select;
objWorkSheet.Delete;
var objWorksheet = objWorkbook.Worksheets(1);
objWorkbook.Worksheets(1).Activate;
objWorksheet.name = "xxxxx";
objWorksheet.Paste;
objWorksheet.columns.autofit; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:08:29.940

我`objWorksheet.Range("B:B").NumberFormat = "00000";` 在行前添加了答案`objWorksheet.columns.autofit;`

# java - 带注释（标记）类的 AOP AspectJ 静态字段初始化

> ID：11897770
> 
> 赞同：1
> 
> 时间：2012-08-10T08:12:17.893
> 
> 标签：java, static, annotations, aop, aspectj

我有一个静态字段`public static Class[] items;`，我希望它在应用程序开始时用具有注释的类`@ItemExample`填充。示例类（简化）：

```
public class ItemUtil{
public static Class[] itemClasses;
public static void actionsWithAllItemClasses(
//call some general method of classes in array using reflection API
)
}

  @ItemExample
    public class Item1 extends GeneralItem{
     public static void generalMethod(){
    //Item 1 specific action
        }
    }

    @ItemExample
    public class Item2 extends GeneralItem{
    public static void generalMethod(){
    //Item2 specific action
         }
    } 
```

所以在应用程序的启动（部署，在 ServletCONtextListneres 开始执行之前）时间（在 Tomcat 中运行）`item classes=={Item1.class, Item2.class}`。另外我希望每个类都覆盖`generalMethod()`of `GeneralItem`，但是这个方法是静态的，所以每个类都声明它自己的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:55:29.493

[Google Reflections](http://code.google.com/p/reflections/) Runtime 搜索和

[Evo 类索引](http://www.atteo.org/blog/evo-class-index)编译时间搜索

帮助。

# c# - 如何选择我从excel获得的数据表的数据表？

> ID：11897775
> 
> 赞同：0
> 
> 时间：2012-08-10T08:12:41.980
> 
> 标签：c#, console-application

我在 C# 控制台应用程序上有问题。我声明：

> DataTable MasterExcel =*此读取频率 excel*

我已经检查了 MasterExcel 有 141 个数据。但是当我尝试选择时：

> DataRow[] 结果 = MasterExcel.select("Name= 'Adam'");

应该找到一个数据。但“结果”仍然找不到任何数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:34:15.887

尝试一下

```
MasterExcel.Select("Name like '*Adam*'"); 
```

如果这也不起作用，则与 excel 数据相关的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:18:35.860

感谢您的帮助，我尝试再次检查我的代码：

```
DataTable MasterExcel = this read from excel 
```

我确实意识到返回列标题名称不是“名称”而是“Column4”。那天我改变了它，现在它与两个代码一起工作：

```
MasterExcel.Select("Name= 'Adam'"); 
```

或者

```
MasterExcel.Select("Name Like '*Adam*'"); 
```

# jquery - 编辑器中的 jquery

> ID：11897777
> 
> 赞同：1
> 
> 时间：2012-08-10T08:13:02.540
> 
> 标签：jquery, asp.net-mvc-3

我正在尝试在 asp.net mvc3 中使用 jquery。我正在使用 EditorTemplates 作为列表。我的模型是

```
public class staffinfo
{
    public int staffid { get; set; }
    public double extgrade { get; set; }
    public string lvlid { get; set; }
    public IList<SelectListItem> level { get; set; }
    public string grdid { get; set; }
    public IList<SelectListItem> grade { get; set; }
    public double pf { get; set; }       
    public double wages { get; set; }
    public List<hrfacility> facility { get; set; }

}

public class hrfacility
{
    public int id { get; set; }
    public string name { get; set; }
    public double price { get; set; }        
    public int staffid { get; set; }
    public string staffname { get; set; }               
    public double amount { get; set; }
    public bool selected { get; set; }
} 
```

看法：

```
...
@Html.EditorFor(m => m.wages)    
@Html.EditorFor(m=>m.facility) 
```

hrfacility 的编辑器模板

```
@model Mysol.Models.hrfacility
...
@Html.DisplayFor(m=>m.name)
@Html.CheckBoxFor(m=>m.selected)    
@Html.EditorFor(m => m.staffname)
@Html.EditorFor(m => m.amount)

 <script type="text/javascript">
    $('#staffname').attr('readonly', true);
</script> 
```

我在 editortemplates 中使用了没有列表部分的上述过程，并且 jquery 工作正常，但对于这种特殊情况，它不起作用！

是因为可能有不止一个员工姓名吗？

我怎样才能使 jquery 在上述情况下工作（使人员名称只读）？

PS readonly 仅用于示例目的。我还需要用 jquery 做其他事情，比如将值分配给文本框。如果我能得到这份工作，我想我也可以做其他事情。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:55:04.403

它不起作用，因为输入的 id`staffname`应该是类似`facility_0_staffname`的，`facility_1_staffname`等等。

您最好在`staffname`输入中添加一个类并使用该类访问它。

您可以使用 Firebug 检查 id（在 Firefox 上）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:42:25.793

Bj,

我认为你最好的选择可能是处理 a `class`，而不是 a `Id`，因为你有倍数。你可以试试：

```
@Html.TextBoxFor(m => m.staffname, new { @class = "staffname" })

....    

<script type="text/javascript">
    $(function () {
        $('.staffname').attr('readonly', true);
    });
</script> 
```

（注意你不能使用`EditorFor`，因为这不会接受`htmlAttributes`，你必须使用基本输入类型，但这并不重要，因为你“知道”你想在只读文本框中显示它）

**[编辑]** - 当然，如果使用文本框，则根本不需要使用类，您当然可以添加样式“内联”来达到相同的结果：

```
@Html.TextBoxFor(m => m.staffname, new { @readonly = "true" }) 
```

或（浏览器怪癖）：

```
@Html.TextBoxFor(m => m.staffname, new { @readonly = "readonly" }) 
```

**注意**

要补充的另一件事是，在加载 jquery 库之前，实际上调用 EditorFor 模板的可能性很小（取决于您的 javascript 加载）。通过查看生成的源来检查情况是否如此。Prolly 不是问题，而是以前使用编辑器模板和部分内容引起了我的注意。

# binary - 你如何得到 x 的值，使得 "(x-1) & x" 和 "(x-1) % 131071" 都为零？

> ID：11897782
> 
> 赞同：-1
> 
> 时间：2012-08-10T08:13:24.513
> 
> 标签：binary

最近在一次采访中被问到如何列出所有`x`这样的

```
((((x - 1) & x) == 0) && ((x - 1) % 131071 == 0)) 
```

其中`x`是一个 64 位无符号整数。

我被告知总共 4 个整数，如何获得所有 4 个值`x`？

最好采取什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:19:46.697

`((x - 1) & x) == 0)`意味着它`x`要么是零，要么是 2 的幂（请参阅[this bit twiddling hack](http://graphics.stanford.edu/~seander/bithacks.html#DetermineIfPowerOf2)）。它之所以有效，是因为 2 的幂表示为单个 1 位，后跟任意数量的 0 位（假设`N`它们）。

而且，当您减去一个时，您总是会得到一个正好是`N`1 位的数字，因此将它们组合在一起：

```
100000...000
 11111...111
------------
000000...000 
```

总是给你零。零当然是一种特殊情况，因为与零相加给你零：

```
0000000...000
1111111...111
-------------
0000000...000 
```

由于这是一个编程问答网站，请参阅此程序：

```
#include <stdio.h>
int main (void) {
    unsigned long long x = 0;
    unsigned long long oldx = x;

    while (x >= oldx) {
        if ((((x - 1ULL) & x) == 0) && (((x - 1ULL) % 131071ULL) == 0))
            printf ("%llu\n", x);
        oldx = x;
        x = (x == 0ULL) ? 1ULL : x * 2ULL;
    }

    return 0;
} 
```

它生成以下*四个*值（不是您建议的三个值）：

```
1
131072
17179869184
2251799813685248 
```

# xml - Xslt 连接

> ID：11897784
> 
> 赞同：1
> 
> 时间：2012-08-10T08:13:33.250
> 
> 标签：xml, xslt, xslt-2.0

嗨，我有如下所示的 xslt 结构

```
<xsl:template name="ConvertCriticalFlags">
<xsl:param name="src1"/>
<xsl:param name="src2"/>
<xsl:param name="src3"/>
<xsl:param name="src4"/>
<xsl:param name="src5"/>
<xsl:variable name="rslt" select="''"/>
<xsl:choose>
  <xsl:when test="$src1 = 'YES'" >
    <xsl:copy-of select="concat($rslt,',', '2TO4UNITS')"/>
  </xsl:when>
  <xsl:otherwise>
    <xsl:copy-of select="''"/>
  </xsl:otherwise>
</xsl:choose>
<xsl:choose>
  <xsl:when test="$src2 = 'YES'">
    <xsl:copy-of select="concat($rslt,',', 'COMMERCIAL')"/>
  </xsl:when>
  <xsl:otherwise>
    <xsl:copy-of select="''"/>
  </xsl:otherwise>
</xsl:choose>
<xsl:choose>
  <xsl:when test="$src3 = 'YES'">
    <xsl:copy-of select="concat($rslt,',', 'ACREAGE')"/>
  </xsl:when>
  <xsl:otherwise>
    <xsl:copy-of select="''"/>
  </xsl:otherwise>
</xsl:choose>
<xsl:choose>
  <xsl:when test="$src4 = 'YES'">
    <xsl:copy-of select="concat($rslt,',', 'MOBILEHOME')"/>
  </xsl:when>
  <xsl:otherwise>
    <xsl:copy-of select="''"/>
  </xsl:otherwise>
</xsl:choose>
<xsl:choose>
  <xsl:when test="$src5 = 'YES'">
    <xsl:copy-of select="concat($rslt,',', 'VACANTLAND')"/>
  </xsl:when>
  <xsl:otherwise>
    <xsl:copy-of select="''"/>
  </xsl:otherwise>
</xsl:choose>
<xsl:choose>
  <xsl:when test="starts-with($rslt,',') = true">
    <xsl:copy-of select="substring($rslt,2)"/>
  </xsl:when>
  <xsl:otherwise>
    <xsl:copy-of select="$rslt"/>
  </xsl:otherwise>
</xsl:choose> 
```

我想将所有数据连接到一个变量`$rslt`中，但我无法这样做，任何人都可以建议如何连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T17:09:28.010

```
<xsl:variable name="rslt" select="string-join((
  '2TO4UNITS'[$src1 = 'YES'],
  'COMMERCIAL'[$src2 = 'YES'],
  'ACREAGE'[$src3 = 'YES'],
  'MOBILEHOME'[$src4 = 'YES'],
  'VACANTLAND'[$src5 = 'YES']), ',')"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T08:29:02.880

```
<xsl:template name="ConvertCriticalFlags">
<xsl:param name="src1"/>
<xsl:param name="src2"/>
<xsl:param name="src3"/>
<xsl:param name="src4"/>
<xsl:param name="src5"/>
<xsl:variable name="rslt">
  <xsl:if test="$src1 = 'YES'">,2TO4UNITS</xsl:if>
  <xsl:if test="$src2 = 'YES'">,COMMERCIAL</xsl:if>
  <xsl:if test="$src3 = 'YES'">,ACREAGE</xsl:if>
  <xsl:if test="$src4 = 'YES'">,MOBILEHOME</xsl:if>
  <xsl:if test="$src5 = 'YES'">,VACANTLAND</xsl:if>
</xsl:variable>
<xsl:choose>
  <xsl:when test="starts-with($rslt,',')">
    <xsl:copy-of select="substring($rslt,2)"/>
  </xsl:when>
  <xsl:otherwise>
    <xsl:copy-of select="$rslt"/>
  </xsl:otherwise>
</xsl:choose>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T08:19:59.607

要将节点序列捕获到 XSLT 2.0 中的变量中，请使用以下形式...

```
<xsl:variable name="rslt">
 ... sequence constructors go here..
<xsl:variable> 
```

...而不是形式...

```
<xsl:variable name="rslt" select="bla bla bla" /> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-07-28T12:55:03.727

在一个变量中定义所有您选择的条件，该变量包含所有结果。

# android - 无法从文件夹中获取资源列表

> ID：11897787
> 
> 赞同：0
> 
> 时间：2012-08-10T08:13:45.483
> 
> 标签：android, android-resources

我的 res 文件夹中有一些文件夹。我需要动态获取他们的名字列表。

当我使用

```
AssetManager assetManager = getAssets();
list = assetManager.list("/"); 
```

我得到一个列表，其中包含：

```
AndroidManifest.xml
META_INF
assets
classes.dex
res
resources.arsc 
```

但是当我使用其中任何一个时：

```
assetManager.list("/res");
or
assetManager.list("res");
or
assetManager.list("/res/"); 
```

我得到一个空列表。

任何想法，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-10T08:18:44.223

请试试这个 `String[] allFilesInPackage = this.getResources().getAssets().list("");`

# c# - C#：向 WebClient 发送数据时正确完成连接

> ID：11897788
> 
> 赞同：1
> 
> 时间：2012-08-10T08:13:46.237
> 
> 标签：c#, sockets, webclient, tcpclient, networkstream

我需要在本地测试一些使用 WebClient 对象与 http 服务器通信的代码。为此，我决定编写一个非常简单的模拟服务器，它从二进制文件中读取一些字节并将它们发送到客户端。这是相关服务器的代码：

```
public void Listen()
{
    TcpClient client;
    NetworkStream netStream;
    listener.Start();

    try
    {
        client = listener.AcceptTcpClient();
        netStream = client.GetStream();
        ReadData(netStream);
        Console.WriteLine("Writing data, sequence 1");
        WriteData(netStream, 1);
        netStream.Close();
        client.Close();

        client = listener.AcceptTcpClient();
        netStream = client.GetStream();
        ReadData(netStream);
        Console.WriteLine("Writing data, sequence 2");
        WriteData(netStream, 2);
        netStream.Close();
        client.Close();
    }
    catch(Exception e)
    {
    }
}

private void WriteData(NetworkStream netStream, int sequence)
{
    byte[] bytes = PrepareResponse(sequence);    //get data from a file
    netStream.Write(bytes, 0, bytes.Length);
} 
```

对于 WebClient，我使用 UploadString：

```
string response = client.UploadString(address + link, data); 
```

所以，问题是，WebClient 显然接收到所有发送的数据，但是当我关闭流服务器端时抛出 System.IO.Exception（“无法从传输连接读取数据：连接已关闭。”）。如果我不关闭流，WebClient 会阻塞并等待传输完成，尽管已收到所有数据。我试图用 WebRequest 替换 WebClient，如果套接字在服务器端关闭或在流上阻塞，它也会引发异常。读取所有数据后读取。我觉得奇怪的是，我发送给 WebClient 的第一个数据块是一个 http 302“已移动”响应，这会导致 WebClient 立即发送一个 GET 请求。尽管我两次发送相同的数据，但 WebClient 仅在第二次响应时引发异常。

所以 - 我需要一种方法来正确发送数据并关闭连接，以便它与 WebClient 一起工作，我还想知道为什么 WebClient 正确处理 302 响应并在第二个响应时抛出异常。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:30:06.263

您应该尝试使用“使用”指令来澄清它：http: [//msdn.microsoft.com/fr-fr/library/yh598w02](http://msdn.microsoft.com/fr-fr/library/yh598w02)

基本上，NetworkReader、MemeryStream 等类实现了 IDisposable 接口。如果你用 using 包装它们，它会自动为你处理对象。

**编辑：** 另外，参考[http://msdn.microsoft.com/fr-fr/library/system.net.sockets.networkstream_methods%28v=vs.80%29](http://msdn.microsoft.com/fr-fr/library/system.net.sockets.networkstream_methods%28v=vs.80%29)有一些读写流的方法，你应该使用这不是你的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:18:35.383

答案实际上很简单——第二个 http 响应在其标头中设置了“Transfer-Encoding: chunked”，而我实际上并没有在响应结束时发送终止的零长度块，因此 WebClient 正在等待更多数据。

# maven - 使用 jenkins 创建构建时出现此错误。有人可以帮我弄这个吗

> ID：11897790
> 
> 赞同：0
> 
> 时间：2012-08-10T08:13:55.223
> 
> 标签：maven, jenkins

信息 ：

> 未能在项目 mw-platform-common 上执行目标：无法解析项目 com.meltwater.platform:mw-platform-common:jar:1.0.0 的依赖项：无法解析以下工件：org.apache.hbase： hbase-core:jar:0.20.5, net.sf.katta:katta-core:jar:0.6.1: 在 ibiblio 镜像中找不到工件 org.apache.hbase:hbase-core:jar:0.20.5 (http ://mirrors.ibiblio.org/pub/mirrors/maven2) 原因：无法解析项目 com.meltwater.platform:mw-platform-common:jar:1.0.0 的依赖关系：无法解析以下工件：org .apache.hbase:hbase-core:jar:0.20.5, net.sf.katta:katta-core:jar:0.6.1: 找不到工件 org.apache.hbase:hbase-core:jar:0.20.5在 ibiblio 镜像 (http://mirrors.ibiblio.org/pub/mirrors/maven2)

堆栈跟踪 ：

> org.apache.maven.lifecycle.LifecycleExecutionException：无法在项目 mw-platform-common 上执行目标：无法解析项目 com.meltwater.platform:mw-platform-common:jar:1.0.0 的依赖项：以下工件可以未解决：org.apache.hbase:hbase-core:jar:0.20.5, net.sf.katta:katta-core:jar:0.6.1: 找不到工件 org.apache.hbase:hbase-core: jar:0.20.5 在 ibiblio 镜像 (http://mirrors.ibiblio.org/pub/mirrors/maven2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:38:52.467

您使用的依赖项不在镜像中。镜像 url 上的文件夹为空[http://mirrors.ibiblio.org/pub/mirrors/maven2/org/apache/hbase/](http://mirrors.ibiblio.org/pub/mirrors/maven2/org/apache/hbase/)

尝试使用另一个镜子。

编辑：我在 apache maven repo 中找到了 21-SNAPSHOT 版本：[https ://repository.apache.org/](https://repository.apache.org/)

# asp.net-mvc-3 - MVC 嵌套视图和局部视图

> ID：11897791
> 
> 赞同：2
> 
> 时间：2012-08-10T08:13:57.353
> 
> 标签：asp.net-mvc-3, razor

我正在使用 MVC 3 创建一个原型项目，我遇到了一种我似乎无法找到答案的情况，而且似乎我可能以错误的方式解决问题。

快速浏览我的项目；它基于您通过 Visual Studio 获得的 MVC 模板，我使用提供的 _Layout 视图上的链接（选项卡）来访问我的其他一些视图。这些链接之一打开第二个部分视图，该视图再次包含更多视图的链接（特定于管理员。因此拆分）。我遇到的问题是，我似乎无法`@RenderBody`在第二个部分视图中显示视图，我理解这是因为在完整的 HTML 文件中不能有多个视图，这`@RenderBody`是有道理的。

**所以我的问题是，我怎样才能以这种方式显示视图？另外，可能更重要的是，这是实现我正在尝试的“子菜单”系统的正确方法，还是有更好的方法来实现这一目标？**

这是视图的相关部分，首先是'main' _Layout 文件：

```
<body>
    <div class="page">
        <header>
            <div id="title">
                <h1>Test App</h1>
            </div>
            <nav>
                <ul id="menu">
                    <li>@Html.ActionLink("Home", "Index", "Home")</li>
                    @if (User.Identity.IsAuthenticated)
                    {
                        <li>@Html.ActionLink("Contracts", "List", "Contract", new { user=User.Identity.Name, page=1 }, null)</li>
                    }
                    @if (User.IsInRole("Administrator"))
                    {
                        <li id="admin">@Html.ActionLink("Administration", "Administration", "Home")</li>
                    }
                </ul>
            </nav>
        </header>
        <section id="main">
            @RenderBody()
        </section>
        <footer>
        </footer>
    </div>
</body> 
```

单击`<li id="admin">@Html.ActionLink("Administration", "Administration", "Home")</li>`链接时，Home 控制器返回如下所示的第二个局部视图：

```
<header>
    <div id="admintitle">
        <h1>Administration</h1>
    </div>  
</header>
<body>
    <div id="div-1a">
         <nav>
            <ul id="adminmenu">
                <li>@Html.ActionLink("Contact", "List", "Contact")</li>
                <li>@Html.ActionLink("Home", "Index", "Home")</li>
            </ul>
        </nav>
    </div>
    <div id="div-1c">
        <h1>Test</h1>   
    </div>
    <section id="adminmain">
        @RenderBody()
    </section>
</body> 
```

当我尝试运行代码时，由于第二个原因而失败`@RenderBody`，这是可以理解的。

如果您需要更多信息，请告诉我。

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T08:19:38.717

您不能`@RenderBody()`多次使用。您的主 _Layout 文件中的一个`@RenderBody()`就足够公平了。在您的第二个视图中，请改用`@RenderPartial()`or `@RenderAction`。

**更新**（基于第一条评论）

假设你想渲染`/Administrator/TheAction`，所以你会打电话

```
@{
    Html.RenderAction("TheAction", "Administrator");
} 
```

`TheAction`动作将如下所示：

```
public PartialViewResult TheAction() {
    return PartialView();
} 
```

它会在`~/Views/Administrator/TheAction.cshtml`您调用`RenderAction()`.

重要的是它不会完成另一个`@RenderBody`。正如您在`TheAction()`示例中看到的，您正在返回**PartialViewResult**，它没有任何`@RenderBody()`帮助程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T09:07:28.327

转变

从

```
<section id="adminmain">
   @RenderBody()
</section> 
```

到

```
 <div id="adminmain"></div> 
```

从

```
@Html.ActionLink("Contact", "List", "Contact") 
```

到

```
@Ajax.ActionLink("Contact", "List", "Contact", new AjaxOptions { UpdateTargetId = "adminmain" }) 
```

并且在`ContactController` `List`行动中返回`PartialView()`而不是'View（）'。

不要忘记`jquery.unobtrusive-ajax`在您的视图中包含`Ajax`工作。

在所有阅读[罗马的答案之前](https://stackoverflow.com/a/11897868/887149)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T19:29:16.160

我找到了一个将@Roman Mazur 和@Mohayemin 的答案与AJAX 调用结合在一起的解决方案。

按照 Roman 的建议，我将 View 更改为以下内容：

```
public PartialViewResult List() {
    return PartialView();
} 
```

然后我按照 Mohayemin 的建议将该部分更改为 div：

```
<div id="adminmain"></div> 
```

然后，我创建了一个链接，该链接在其单击事件上调用 AJAX 脚本：

```
<li><a id="load-partial">CONTACTS</a></li>

<script>
$(document).ready(function () {
    $('#load-partial').click(function () {
        $.ajax({
            url: '/Contact/List/',
            datatype: 'html',
            success: function (data) {
                $('#adminmain').empty().html(data);
            }
        });
    });
});
</script> 
```

它运作良好，但我总是乐于接受有关如何改进它的更多建议。

非常感谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-10T16:18:59.527

在 MVC4 中使用嵌套的局部视图时，我遇到了一些有趣的事情。以防万一有人偶然发现这个..

在循环中渲染局部视图时，

```
@Html.Partial() 
```

不起作用。

相反，使用`@Html.RenderPartial();` 它发出 HTML 而不是在前一种情况下编码的 HTML 并且可以工作。

干杯!

# debugging - 当我访问这个网站时，如何模拟流行的网络浏览器？/为什么会出现 403 错误？

> ID：11897801
> 
> 赞同：0
> 
> 时间：2012-08-10T08:14:32.220
> 
> 标签：debugging, browser, emulation

感谢您查看我的问题:)

我正在为我制作一个程序来启动游戏“黑桃 A”。现在玩游戏的唯一方法是在浏览器中打开游戏网站，搜索一个好的服务器，然后希望在您点击它时它还没有满员。所以我认为制作一个启动器来为我组织这些服务器将是一个有趣且有用的项目。

但是，我遇到了一个奇怪的错误，我不确定如何修复：“java.io.IOException：服务器重新发送 HTTP 响应代码：403 for URL：[http ://www.ace-spades.com/play /](http://www.ace-spades.com/play/) "。

我的浏览器设置可以很好地加载大多数网站（包括“https://google.com”），但由于某种原因黑桃王牌网站拒绝了它！这不是一个错字，网站没有关闭或任何东西（它在谷歌浏览器中加载得很好），所以我认为它必须拒绝访问作为一种安全协议，以避免 DDoS 攻击或类似的东西。因此，如果它在 Chrome 中运行良好，我认为让我的浏览器在某些方面模拟 Chrome（或其他一些流行的浏览器）可能会解决这个问题。或者也许我只是在我的程序中做一些愚蠢和愚蠢的事情（我是 Java 的初学者）。你能帮助我吗？

这是我的程序：

```
//*****ADD-ONS*****
package browser;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.HyperlinkEvent;
import javax.swing.event.HyperlinkListener;

import java.net.*;
import java.io.*;

//*****PROGRAM*****
public class MainClass{
    //Initialize general variables
    private JFrame frame;
    private JPanel panelTop;
    private JEditorPane editor;
    private JScrollPane scroll;
    private JTextField field;
    private JButton button;
    private URL url;
    private String windowTitle = "Ace of Spades Launcher";
    private String homePage = "http://www.ace-spades.com/play/"; //"https://google.com";
    private int screenWidth = 854;
    private int screenHeight = 480;

    //MainClass CONSTRUCTOR
    public MainClass(){
        //Initialize Components
        initComponents();

        //Set up frame
        frame.setTitle(windowTitle);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(screenWidth,screenHeight);
        frame.setLocationRelativeTo(null);
        frame.add(BorderLayout.NORTH,panelTop); //Add JPanel to north of JFrame
        panelTop.add(field); //Add TextField to JPanel
        panelTop.add(button); //Add "Go" button to JPanel
        frame.add(BorderLayout.CENTER,scroll); //Add scroll pane to JFrame
        frame.setVisible(true);
    }

    //COMPONENT INITIALIZER
    private void initComponents(){
        frame = new JFrame(); //Create the JFrame
        panelTop = new JPanel(); //Create the JPanel used to hold the text field and button
        try{ //Set the URL
            url = new URL(homePage);
        }catch(MalformedURLException mue){
            JOptionPane.showMessageDialog(null,mue);}
        try{ //Create the JEditorPane
            editor = new JEditorPane(url);
            editor.setEditable(false); //Set the editor pane to false
        }catch(IOException ioe){
            JOptionPane.showMessageDialog(null,ioe);}
        scroll = new JScrollPane( //Create the scroll pane and add the JEditorPane to it
            editor,
            JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,
            JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED
        );
        field = new JTextField(); //Create the JTextField
        /**NOTE: We're not doing this on the event dispatch thread, so we need to use SwingUtilities */
        SwingUtilities.invokeLater( //Set the JTextField text to the URL
            new Runnable(){
                public void run(){
                    field.setText(url.toString());
                }
            }
        );
        button = new JButton("Go"); //Create the button for changing pages.
        button.addActionListener( //Add action listener to the button
            new ActionListener(){
                public void actionPerformed(ActionEvent e){
                    try{
                        editor.setPage(field.getText());
                    }catch(IOException ioe){
                        JOptionPane.showMessageDialog(null,ioe);}
                }
            }
        );

        editor.addHyperlinkListener( //Enable hyperlink clicking
            new HyperlinkListener(){
                public void hyperlinkUpdate(HyperlinkEvent e){
                    if (e.getEventType() == HyperlinkEvent.EventType.ACTIVATED){
                        try{
                            editor.setPage(e.getURL());
                        }catch(IOException ioe){
                            JOptionPane.showMessageDialog(null,ioe);}
                    }
                }
            }
        );
    }

    //MAIN PROGRAM EXECUTER
    public static void main(String[] args) {
        SwingUtilities.invokeLater(
            new Runnable(){
                public void run(){
                    new MainClass();}
            }
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:18:01.363

我不知道如何使用您正在使用的框架/库来做到这一点，但是将用户代理字符串设置为`Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1207.1 Safari/537.1`可能会解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:38:29.223

您可以使用[URLConnection](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html)并设置用户代理：

```
URL server = new URL("http://www.ace-spades.com/play");
URLConnection connection = server.openConnection();
connection.setRequestProperty("User-Agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/534.57.2 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2"); 
```

基本上，您可以继承 JEditorPane 并覆盖 getStream(URL page) 以添加 User-Agent 字符串。

```
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;

import javax.swing.JEditorPane;

public class UserAgentEditorPane extends JEditorPane {

    private static final long serialVersionUID = 1L;

    private String userAgent;

    public UserAgentEditorPane(URL url, String userAgent) throws IOException {
        super(url);
        this.userAgent = userAgent;
    }

    @Override
    protected InputStream getStream(URL page) throws IOException {
        URLConnection conn = page.openConnection();
        conn.setRequestProperty("User-Agent", userAgent);
        setContentType(conn.getContentType());
        return conn.getInputStream();
    }

} 
```

# jquery - 动态数据的 highcharts 饼图颜色

> ID：11897802
> 
> 赞同：2
> 
> 时间：2012-08-10T08:14:35.387
> 
> 标签：jquery, json, highcharts

我有一个饼图，如下

```
{
  type : 'pie',
  data : [], //here i'm getting dynamic data
  center : [50, 15 ],
  size : 80,
  showInLegend : false,
  dataLabels :  enabled: true,
} 
```

我想改变饼图的颜色

我的主要问题是
是否可以通过某些属性在此处设置颜色，或者我必须从动态数据中获取它

**更新**

得到答案

```
Highcharts.setOptions({
  colors: ['#F64A16', '#0ECDFD',]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:02:21.327

得到了答案

我们可以通过 setOption 函数设置 highchart 自定义颜色，如下所示

```
Highcharts.setOptions({
  colors: ['#F64A16', '#0ECDFD',]
}); 
```

它为我的饼图设置颜色。

**动态 3D 颜色的另一种解决方案**

实际上这个主题选择的定制在这里

3种颜色设置为颜色变量

```
var colors = Highcharts.getOptions().colors;
        $.each(colors, function(i, color) {
            colors[i] = {
                linearGradient: { x1: 0, y1: 0, x2: 1, y2: 0 },
                stops: [
                    [0, '#0ECDFD'],
                    [0.3, '#F64A16'],
                    [1, color]
                ]
            };

        }); 
```

& 直接串联赋值

```
 {

    type : 'column',
    name : 'bug',
    data : [],
    color : colors,                 
    pointWidth : 28,

} 
```

# c# - C#中的合并排序问题

> ID：11897806
> 
> 赞同：2
> 
> 时间：2012-08-10T08:14:57.610
> 
> 标签：c#, mergesort, sorting

作为提高我的编程技能计划的一部分，我决定尝试按字典顺序对大量字符串进行排序（稍后我计划使用线程来这样做）。我研究了不同的排序算法，并尝试根据我的理解实现一个合并排序。现在我打算对一些简单的字符串进行排序。

我正在输入以下要在以下方法中排序的字符串：

```
 string[] stringsArray = new string[] { "cixymn", "adfxij", "adxhxy", "abcdef", "iejfyq", "uqbzxo", "aaaaaa" };
 string[] stringSorted = MergeSort(stringsArray);

 // For display purposes
 foreach (string s in stringSorted)
        {
            Console.WriteLine("Item at index " + Array.IndexOf(stringSorted, s) + " is " + s);
        } 
```

我得到的结果如下：

```
Item at index 0 is aaaaaa
Item at index 1 is abcdef
Item at index 2 is adfxij
Item at index 3 is uqbzxo
Item at index 4 is 
Item at index 4 is 
Item at index 4 is 
```

由于要实现归并排序，必须先将数组一分为二，我很容易理解，在这种情况下，左边部分排序成功，右边部分被忽略。我的印象是这种情况正在发生，因为我在每次递归中比较数组左侧的每个字符串的字符（因此可能忽略右侧）。所以我想我真的明白问题可能出在哪里。但是，我不太清楚该怎么做。任何帮助将不胜感激。

下面是 MergeSort 方法的代码。

```
 private static string[] MergeSort(string[] stringsArray)
    {
        if (stringsArray.Length == 1)
        {
            return stringsArray;
        }

        int middle = stringsArray.Length / 2;

        string[] left = new string[middle];
        string[] right = new string[stringsArray.Length - middle];

        for (int i = 0; i < middle; i++)
        {
            left[i] = stringsArray[i];
        }

        for (int i = 0; i < stringsArray.Length - middle; i++)
        {
            right[i] = stringsArray[i + middle];
        }

        left = MergeSort(left);
        right = MergeSort(right);

        int leftPointer = 0;
        int rightPointer = 0;

        string[] sorted = new string[stringsArray.Length];

        for (int k = 0; k < stringsArray.Length; k++)
        {
            if (k == left.Length)
            {
                break;
            }

            for (int i = 0; i < left[leftPointer].Count(); i++)
            {
                var leftChar = left[leftPointer][i];

                if (i == right[rightPointer].Count())
                {
                    continue;
                }

                var rightChar = right[rightPointer][i];

                if ((rightPointer == right.Length || leftPointer < left.Length) && leftChar < rightChar)
                {
                    sorted[k] = left[leftPointer];
                    sorted[k + 1] = right[rightPointer];
                    leftPointer++;

                    break;
                }

                if ((leftPointer == left.Length || rightPointer < right.Length) && (rightChar < leftChar))
                {
                    sorted[k] = right[rightPointer];
                    sorted[k + 1] = left[leftPointer];
                    rightPointer++;
                    break;
                }
            }
        } 
```

问题 #2：您会如何建议优化代码以便能够使用线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:00:28.943

这是我从[这里抄袭、概括和更新的答案](http://www.cs.nyu.edu/~vs667/articles/mergesort/)

```
public static IList<T> MergeSort<T>(
    this IList<T> unsorted,
    IComparer<T> comparer = null)
{
    if (unsorted == null ||  unsorted.Count < 2)
    {
        return unsorted;
    }

    if (comparer == null)
    {
        comparer = Comparer<T>.Default;
    }

    IList<T> sorted = new List<T>();
    int middle = (int)unsorted.Count/2;
    Ilist<T> left = unsorted.GetRange(0, middle);
    IList<T> right = unsorted.GetRange(middle, unsorted.Count - middle);

    var sortLeft = Task<IList<T>>.Factory.StartNew(
        () => left.MergeSort(comparer));

    var sortRight = Task<IList<T>>.Factory.StartNew(
        () => right.MergeSort(comparer));

    left = sortLeft.Result;
    right = sortRight.Result;

    int leftPtr = 0;
    int rightPtr = 0;
    for (int i = 0; i < left.Count + right.Count; i++)
    {
        if (leftPtr == left.Count)
        {
            sorted.Add(right[rightPtr]);
            rightPtr++;
        }
        else if (rightPtr == right.Count)
        {
            sorted.Add(left[leftPtr]);
            leftPtr++;
        }
        else if (comparer.Compare(left[leftPtr], right[rightPtr]) < 0)
        {
            sorted.Add(left[leftPtr]);
            leftPtr++;
        }
        else
        {
            sorted.Add(right[rightPtr]);
            rightPtr++;
        }
    }

    return sorted;
} 
```

`IComparer<T>`除非您传递自己的代码，否则此代码将使用默认值。

正如您所看到的，这段代码在未排序数组的每一半上进行自我迭代，我添加了一些代码，使用[`Task`](http://msdn.microsoft.com/en-us/library/dd537613.aspx)TPL 类在单独的线程上异步运行这些调用。

你可以使用这样的代码，

```
var strings = new List<string>
    {
        "cixymn", 
        "adfxij",
        "adxhxy",
        "abcdef",
        "iejfyq",
        "uqbzxo",
        "aaaaaa" 
    };

var sortedStrings = strings.MergeSort(); 
```

如果默认字符串比较器对您来说字典顺序不够，您可以实例化并传递您的 a selected [`StringComparer`](http://msdn.microsoft.com/en-us/library/system.stringcomparer.aspx)，也许像这样，

```
var sortedStrings = strings.MergeSort(StringComparer.OrdinalIgnoreCase); 
```

万一没有一个`StringComparer`s 满足您的要求，您可以编写自己的实现`IComparer<string>`并将其传递给`MergeSort`函数。

在任何情况下，保持归并排序对所有类型都是通用的和可重用的，并将特化传递给函数是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:42:25.617

这是一个有效的解决方案。MergeSort 是最基本的版本，ThreadedMergeSort 使用任务和优化琐碎案例。简单版本比我机器上的 .Sort() 方法（我认为是快速排序）慢大约 30%，而线程版本大约快两倍。

```
 static List<T> MergeSort<T>(List<T> input) where T: IComparable
    {
        var length = input.Count;

        if (length < 2)
            return input;

        var left = MergeSort(input.GetRange(0, length / 2));
        var right = MergeSort(input.GetRange(length / 2, length - length / 2));
        var result = new List<T>();
        for (int leftIndex = 0, leftLength = left.Count, rightLength = right.Count, rightIndex = 0; leftIndex + rightIndex < length;)
        {
            if (rightIndex >= rightLength || leftIndex < leftLength && left[leftIndex].CompareTo(right[rightIndex]) <= 0)
                result.Add(left[leftIndex++]);
            else
                result.Add(right[rightIndex++]);
        }

        return result;
    }

    static List<T> ThreadedMergeSort<T>(List<T> input) where T : IComparable
    {
        var length = input.Count;

        if (length < 2)
            return input;

        // this next part can be commented out if you want a "pure" mergesort, but it
        // doesn't make sense to merge sort very short sublists.
        if (length < 10)
        {
            for (int i = 0; i < length - 1; i++)
                for (int j = i + 1; j < length; j++)
                    if (input[i].CompareTo(input[j]) > 0)
                    {
                        var tmp = input[i];
                        input[i] = input[j];
                        input[j] = tmp;
                    }
            return input;
        }

        List<T> left, right;
        if (length > 10000)
        {
            var taskLeft = Task<List<T>>.Factory.StartNew(() => { return ThreadedMergeSort(input.GetRange(0, length / 2)); });
            var taskRight = Task<List<T>>.Factory.StartNew(() => { return ThreadedMergeSort(input.GetRange(length / 2, length - length / 2)); });
            taskLeft.Wait();
            taskRight.Wait();
            left = taskLeft.Result;
            right = taskRight.Result;
        }
        else
        {
            left = ThreadedMergeSort(input.GetRange(0, length / 2));
            right = ThreadedMergeSort(input.GetRange(length / 2, length - length / 2));
        }
        var result = new List<T>();
        for (int leftIndex = 0, leftLength = left.Count, rightLength = right.Count, rightIndex = 0; leftIndex + rightIndex < length; )
        {
            if (rightIndex >= rightLength || leftIndex < leftLength && left[leftIndex].CompareTo(right[rightIndex]) <= 0)
                result.Add(left[leftIndex++]);
            else
                result.Add(right[rightIndex++]);
        }

        return result;
    } 
```

# c# - 查询活动目录直接获取专有名称的电子邮件属性？

> ID：11897812
> 
> 赞同：8
> 
> 时间：2012-08-10T08:15:27.937
> 
> 标签：c#, asp.net, active-directory

我目前正在活动目录中进行一些查询，我们的数据库用户 ID 与活动目录用户 ID 匹配。

我将用户 ID 与域和路径一起传递以获取我需要的内容。我的努力是从传递的用户 ID 中获取经理的电子邮件地址。当我获得 manager 属性时，我返回的是专有名称。

[在 Active Directory 中查找用户的经理记录](https://stackoverflow.com/questions/981621/finding-a-users-manager-record-in-active-directory)

上面的这篇文章是我的确切问题，但它是一篇旧文章，没有关于如何前进的进一步描述，并且 OP 知道接下来要使用专有名称做什么。事实是，我没有。

所以我的问题是，如何从我迄今为止存储为前缀为 LDAP:// +“MyDistinguishedName”的字符串的可分辨名称中获取电子邮件地址属性？

```
 public string GetManagerEmail(string ActiveDirectoryPath, string ActiveDirectoryDomain, bool email)
    {

        DirectoryEntry entry = new DirectoryEntry(ActiveDirectoryPath);

        try
        {
            DirectorySearcher search = new DirectorySearcher(entry);

            search.Filter = "(SAMAccountName=" + workerID + ")";
            search.PropertiesToLoad.Add("cn");
            search.PropertiesToLoad.Add("givenname");  //firstname
            search.PropertiesToLoad.Add("sn");//surname
            search.PropertiesToLoad.Add("manager");
            search.PropertiesToLoad.Add("email");
            SearchResult result = search.FindOne();

            if (null == result)
            {
                return workerID;
            }
            if (email)
            {
                return (string)result.Properties["email"][0];
            }
            else
            {
                return (string)result.Properties["manager"][0];
                //return (string)result.Properties["manager"].IndexOf[];
            }
        }
        catch (Exception ex)
        {
            throw new Exception("Error. " + ex.Message);

        }
        finally
        {
            entry.Close();
        }
    } 
```

以上是我用来获取所需数据的方法。任何输入或改进将不胜感激。

谢谢

这是我对那些可能感兴趣的人的解决方案

```
 string domainAndUsername = ActiveDirectoryDomain + @"\" + workerID;
        DirectoryEntry manager = new DirectoryEntry(ActiveDirectoryPath);

        try
        {
            if (manager != null)
            {
                // get e-mail of manager 
                if (manager.Properties["mail"] != null && manager.Properties["mail"].Count > 0)
                {
                    string managersEMail = manager.Properties["mail"].Value.ToString();
                    return managersEMail;
                }
            }

            //No email available, use contract manager
            return string.Empty;

        }
        catch (Exception ex)
        {
            throw new Exception("Error. " + ex.Message);

        }
        finally
        {
            manager.Close();
        } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T09:02:52.687

获取经理的电子邮件没有“神奇”的捷径。

一旦您检索到经理的 DN（专有名称）（在名为 的字符串变量中`managerDN`），您需要通过创建另一个实例来再次绑定到 Active Directory`DirectoryEntry`以获取经理的用户信息。

尝试这样的事情：

```
 .....(your other code up here)......
 else
 {
     string managerDN = result.Properties["manager"][0].ToString();

     // fully-qualified DN for manager
     string managerFQDN = "LDAP://" + managerDN;

     DirectoryEntry manager = new DirectoryEntry(managerFQDN);

     if(manager != null)
     {
        // get e-mail of manager
        if(manager.Properties["mail"] != null && 
           manager.Properties["mail"].Count > 0)
        {
           string managersEMail = manager.Properties["mail"].Value.ToString();
           return managersEMail;
        }
     }

     // we couldn't retrieve the manager's e-mail  
     return string.Empty;
} 
```

# nfc - 区分 Mifare Ultralight 和 Mifare Ultralight C

> ID：11897813
> 
> 赞同：6
> 
> 时间：2012-08-10T08:15:33.540
> 
> 标签：nfc, rfid, mifare

是否有可靠的方法来确定 RFID 卡是 Mifare Ultralight 还是 Mifare Ultralight C？

到目前为止，我发现的唯一方法是利用这两张卡的大小差异，发出超出较小卡边界的读取命令。但它看起来确实像一个黑客，我假设如果卡使用 Ultralight C 身份验证机制，读取命令可能会失败。

```
const char* mifare_ultralight_identification(const nfc_target_info_t nti)
{
  byte_t abtCmd[2];
  byte_t abtRx[265];
  size_t szRxLen;

  abtCmd[0] = 0x30;  // MIFARE Ultralight READ command
  abtCmd[1] = 0x10;  // block address (1K=0x00..0x39, 4K=0x00..0xff)

  if (!nfc_initiator_transceive_dep_bytes(pnd,abtCmd,2,abtRx,&szRxLen)) {
    // READ command of 0x10 failed, we consider that Ultralight does have 0x10 address, so it's a "simple" Ultralight (i.e. not a Ultralight C)
    // When a READ failed, the tag returns in HALT state, so we need to reselect tag
    nfc_initiator_select_passive_target(pnd, NM_ISO14443A_106, nti.nai.abtUid, nti.nai.szUidLen, NULL);
    return "";
  }
  return " C";
} 
```

[来源](http://nfc-tools.googlecode.com/svn-history/r529/trunk/nfcutils/src/lsnfc.c)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T11:06:03.607

是的，如果您有关于 MIFARE Ultralight C 身份验证机制如何工作的文档，这是可能的。MIFARE Ultralight 不支持此功能，因此会引发错误情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-18T14:28:51.637

一旦您获得 NDA 并访问完整的数据表，您将看到描述如何区分 Mifare Ultralight C 与其他 Mifare 标签的部分。

# c# - windows重装后注册保护

> ID：11897814
> 
> 赞同：1
> 
> 时间：2012-08-10T08:15:36.473
> 
> 标签：c#, windows, registration

我在 c# 中做了一个应用程序注册过程，它采用 MaccAddress ， VolumeSerialNumber 的磁盘并将它们合并。然后将其存储在 install.dll 文件中，该文件对于启动应用程序很重要。我在 system32 文件夹 (systemapplication.dll) 中又放置了一个文件，用于记录应用程序的安装。

所以过程就像当用户安装应用程序时，应用程序获取mac地址和卷序列号并将它们存储在install.dll中。并在系统 32 文件中创建安装日志。因此，如果用户想要重新安装，那么它会阻止他在试用期结束后重新安装。

现在这个结构有一个星期点，如果用户重新安装windows，那么system32文件夹中的文件会被删除，并且没有以前安装的记录。所以我想问一下是否有任何方法可以永久存储应用程序安装。所以它可以防止用户在重新安装 Windows 后再次安装它？

谢谢你！

# c# - 更新包含 Excel 公式的特定列

> ID：11897816
> 
> 赞同：3
> 
> 时间：2012-08-10T08:15:46.550
> 
> 标签：c#, excel

我有一个包含超过 3000 条记录的 Excel 工作表，我想更新具有类似表达式的特定列的值`=N8*(1+Q8)`。

```
System.Data.OleDb.OleDbConnection connection;
System.Data.OleDb.OleDbCommand cmd = new System.Data.OleDb.OleDbCommand();

string query = null;
connection = new System.Data.OleDb.OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + sourcefile + ";Extended Properties=\"Excel 12.0 Xml;HDR=YES\";");
connection.Open();
cmd.Connection = connection;

query = "Update [Data$] Set [" + Column1 + "] = '" + value1 + "' where ShortCust Like '%" + customername + "%' AND ShortProd Like '%" + productname + "%'";

cmd.CommandText = query;
cmd.ExecuteNonQuery();

connection.Close(); 
```

当我运行此应用程序以更新获取错误

> “无法更新'（表达式）'；字段不可更新。”

如何更新此 Excel 列？

# java - Android JSON解析错误未确定对象

> ID：11897817
> 
> 赞同：0
> 
> 时间：2012-08-10T08:15:46.380
> 
> 标签：java, javascript, android

我有一个包含以下内容的json：

```
{
    "Dictionary":[
        {
            "word": "abc"
            "meaning": "meaning of abc"
        },
        {
            "word": "def"
            "meaning": "meaning of def"
        }
        ]
} 
```

我为解析 json 文件编写的代码如下：

```
 public class JSONParser extends Activity
    {
         static JSONObject jObj = null;
        static String json = "";

        // constructor
        public JSONParser() 
        {

        }
public JSONObject getJSONFromInput(InputStream location) 
    {
InputStream isr = location;
Writer writer = new StringWriter();
            char[] buffer = new char[1024];
            try
            {
                Reader reader = new BufferedReader(new InputStreamReader(isr,"UTF-8"));
                int n;
                while ((n = reader.read(buffer)) != -1) 
                {
                    writer.write(buffer, 0, n);
                }
                isr.close();
                json = writer.toString();
            }
            catch (Exception e) 
            {
                Log.e("Buffer Error", "Error converting result " + e.toString());
            }
try 
            {
                jObj = new JSONObject(json);
            } 
            catch (JSONException e) 
            {
                Log.e("JSON Parser", "Error parsing data " + e.toString());
            }

        // return JSON String
        return jObj;
    }
} 
```

我收到以下错误：

```
E/JSON Parser(555): Error parsing data org.json.JSONException: Unterminated object at character 47 of {
E/JSON Parser(555): "Dictionary":[
E/JSON Parser(555): {
E/JSON Parser(555):     "word": "abc"
E/JSON Parser(555):     "meaning": "meaning of abc"
E/JSON Parser(555): },
E/JSON Parser(555): {
E/JSON Parser(555):     "word": "def"
E/JSON Parser(555):     "meaning": "meaning of def"
E/JSON Parser(555): }
E/JSON Parser(555): ]
E/JSON Parser(555): } 
```

谁能帮我吗。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T08:17:19.967

对象中的键/值对用逗号分隔。您的输入缺少它们。

原始和更正（按此顺序）：

```
 { "word": "abc" "meaning": "meaning of abc" },
    { "word": "abc", "meaning": "meaning of abc" }, 
```

另请参阅[JSON Lint](http://jsonlint.com/)的输出：

```
Parse error on line 4:
...       "word": "abc""meaning": "meaning 
-----------------------^
Expecting '}', ':', ',', ']' 
```

# web-services - 是否有用于将电子邮件转换为 url 调用的工具或网络服务？

> ID：11897824
> 
> 赞同：0
> 
> 时间：2012-08-10T08:16:28.413
> 
> 标签：web-services, email, url

我希望在收到新电子邮件后立即调用我的服务器的 URL。有人知道这样的工具吗？电子邮件地址不需要是我的域。

我的梦想是这样的服务：

*   让我们假设该服务称为“mail2url.com”
*   注册一个自定义地址，例如 qoiasdajk18@mail2url.com（所以它不可猜测）
*   告诉服务在收到新电子邮件时调用[http://myserver.com/myscript.php](http://myserver.com/myscript.php)

（我知道我可以自己做到这一点，但我需要它非常快速和可靠）

谢谢，马塞尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:02:08.717

看看[CloudMailin.com](http://cloudmailin.com)。它完全符合您的要求。它被设计为具有极大的可扩展性和稳定性，您也可以按照您的要求轻松使用自己的域。

# ios - iOS 临时文件夹位置

> ID：11897825
> 
> 赞同：35
> 
> 时间：2012-08-10T08:16:42.367
> 
> 标签：ios, objective-c, swift, macos, temporary-directory

我的应用程序刚刚被 Apple 拒绝，因为它在文档目录中存储了临时文件或缓存文件。正确的。他们的拒绝消息指出：

> 您的应用程序使用的临时文件应仅存储在`/tmp`目录中

我想除了应用程序文件夹中的**文档**和**库之外。**

我现在正试图在 iPhone 模拟器中调试这个问题，当我使用 时`NSTemporaryDirectory()`，我在 Xcode 调试器中得到的值是`/var/folders/yj/gnz1c7156c7d6d4fj429yms40000gn/T/tempzip.zip`，而不是`/Users/me/Library/Application Support/iPhone Simulator/5.1/Applications/8F71AB72-598C-427A-A116-36833D3209F7/tmp/tempzip.zip`。

那么：`NSTemporaryDirectory()`使用 iPhone 模拟器是否有不同的行为，是否可以在调试时跟踪应用程序的临时目录？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2016-09-04T15:28:43.893

**iOS 9 或更高版本 • Swift 3 或更高版本**

```
let tmpDirURL = URL(fileURLWithPath: NSTemporaryDirectory()) 
```

* * *

**iOS 10.0+Beta、macOS 10.12+、tvOS 10.0+Beta 和 watchOS 3.0+ • Xcode 8 • Swift 3 或更高版本**

```
let tmpDirURL = FileManager.default.temporaryDirectory 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-05-10T23:55:07.423

**2016 年更新答案：**

*   用户明确接受的个人数据，并可能备份在他/她的 iCloud 空间中，应写入用户的**“文档”目录**

*   属于和扩展您的应用程序的数据（例如，扩展用户可以下载，...），但不在捆绑包中，应写入**“Application Support/”目录**的子文件夹，标题为您的 appID。它也可以是**“缓存”目录**。

*   生命周期较短的数据可以存储在应用程序的 tmp 目录中。在这种情况下，使用 NSTemporaryDirectory() 可以获得**“tmp”目录**。*检查[此链接](http://nshipster.com/nstemporarydirectory/)以获得更多帮助。*

查看“**确定在哪里存储您的应用程序特定文件”部分中的**[官方 iOS 开发 Apple 页面](https://developer.apple.com/library/ios/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/AccessingFilesandDirectories/AccessingFilesandDirectories.html#//apple_ref/doc/uid/TP40010672-CH3-SW1)以获取解释。

 **以下是 Swift 中的 3 个函数，旨在将 NSURLs 返回到这些目录并使您的喜欢更简单。

**斯威夫特**：

```
func GetDocumentsDirectory()->NSURL{
    //returns User's "Documents" directory
    //something like this on a real device : file:///private/var/mobile/Containers/Data/Application/APPID/Documents/
    //something like this on the simulator : file:///Users/MACUSERID/Library/Developer/CoreSimulator/Devices/SIMDEVICEID/data/Containers/Data/Application/APPUUID/Documents/
    let filemgr = NSFileManager.defaultManager()
    let docsDirURL = try! filemgr.URLForDirectory(.DocumentDirectory, inDomain: .UserDomainMask, appropriateForURL: nil, create: true)
    return docsDirURL
}

func GetApplicationSupportDirectory()->NSURL{
    //returns Application's support directory
    //something like this on a real device : file:///private/var/mobile/Containers/Data/Application/APPID/Library/Application%20Support/YOURAPPBUNDLEID/
    //something like this on the simulator : file:///Users/MACUSERID/Library/Developer/CoreSimulator/Devices/SIMDEVICEID/data/Containers/Data/Application/APPUUID/Library/Application%20Support/YOURAPPBUNDLEID/
    let AllDirectories : [NSURL]
    var ApplicationSupportDirectory : NSURL=NSURL.init()
    var ApplicationDirectory : NSURL=NSURL.init()
    AllDirectories=NSFileManager.defaultManager().URLsForDirectory(.ApplicationSupportDirectory, inDomains: .UserDomainMask)
    if AllDirectories.count>=1{
        ApplicationSupportDirectory=AllDirectories[0]
    }
    if !ApplicationSupportDirectory.isEqual(nil) {
        ApplicationDirectory=ApplicationSupportDirectory.URLByAppendingPathComponent(NSBundle.mainBundle().bundleIdentifier!)
    }
    return ApplicationDirectory
}

func GetTemporaryDirectory()->NSURL{
    //returns Application's temporary directory
    //something like this on a real device : file:///private/var/mobile/Containers/Data/Application/APPID/tmp/
    //something like this on the simulator : file:///Users/MACUSERID/Library/Developer/CoreSimulator/Devices/SIMDEVICEID/data/Containers/Data/Application/APPUUID/tmp/
    return NSURL(fileURLWithPath: NSTemporaryDirectory(), isDirectory: true)
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-10T08:16:42.367

我在真实设备上对此进行了测试，它返回：“/private/var/mobile/Applications/C82383-EBD6-4F72-BC16-A865478D27/tmp/tempzip.zip”

所以总的来说，使用[`NSTemporaryDirectory()`](https://developer.apple.com/documentation/foundation/1409211-nstemporarydirectory?language=objc)是找到临时目录路径的正确方法，如果你想调试和查看里面做了什么，如果你使用的是 iPhone 模拟器，你需要在 Finder 中手动找到它。

> 检查下面的较新答案（此答案已弃用）

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-09-21T20:24:37.943

根据[文档](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/Reference/reference.html#//apple_ref/doc/uid/20000055-SW57)，您应该避免`NSTemporaryDirectory()`支持这种方法

```
- (NSURL)URLForTemporaryFolder
{
    // Get a parent folder, trying user folder (fails iOS) and falling back to AppSupport and Docs
    NSURL *parentFolderURL = [NSURL URLForDirectory:NSUserDirectory domainMask:NSUserDomainMask];
    if (!parentFolderURL) parentFolderURL = [NSURL URLForDirectory:NSApplicationSupportDirectory domainMask:NSUserDomainMask];
    if (!parentFolderURL) parentFolderURL = [NSURL URLForDirectory:NSDocumentDirectory domainMask:NSUserDomainMask];

    // Get the temp folder URL using approach outlined in the docs
    NSURL *tmpURL = [[NSFileManager defaultManager]
     URLForDirectory:NSItemReplacementDirectory
     inDomain:NSUserDomainMask
     appropriateForURL:parentFolderURL
     create:YES
     error:NULL];

    return tmpURL;
} 
```

请注意，这会在您每次调用它时创建一个*新*的唯一临时文件夹，并由您来清理它。**

# webgl - 使用未渲染的像素数据的 webgl 纹理

> ID：11897828
> 
> 赞同：0
> 
> 时间：2012-08-10T08:16:46.143
> 
> 标签：webgl, textures

在 webgl 中使用像素数据绘制纹理时，不会渲染纹理。对象改为显示为白色。有人可以指出以下代码中的错误吗？

```
 function handleLoadedTexture(texture ) {
    gl.bindTexture(gl.TEXTURE_2D, texture);
    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 16,16,0, gl.RGBA, gl.UNSIGNED_BYTE, texture.data);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
    gl.bindTexture(gl.TEXTURE_2D, null);
    try{
    }
    catch(e){       
            console.log("Error : "+ e.name + "\n"+ e.message);
            console.log(gl.getError());
    }
}

var neheTexture;
var data;
function initTexture() {
    neheTexture = gl.createTexture();

    data =[];
    for(var i=0;i<256*4;i++)
    {       
            if(i%4==0 || i%4==3)
                    data[i] = 1;
            else data[i] =0;
    }
    neheTexture.data =  new Uint8Array(data);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T21:12:40.077

几乎可以肯定，问题出在您的绘图代码中，因此也请发布该问题，但我想指出一件事：

您正在使用设置为 1 的红色和 alpha 通道来初始化纹理，但我很确定这并没有按照您的想法进行。像这样的纹理数据以字节为单位进行描述，其取值范围为 0-255。这意味着 1，而不是您可能认为的“完全强度”，实际上是 1/256 强度（0.004，从 0 到 1）。这意味着您的代码正在生成几乎完全透明且只有轻微红色的纹理。

如果您想要完全不透明的红色，您实际上会想要像这样进行循环：

```
for(var i=0; i<256*4; i++) {       
        if(i%4==0 || i%4==3)
            data[i]=255;
        else 
            data[i]=0;
} 
```

# android-ndk - android上的prebuilt_static_library

> ID：11897832
> 
> 赞同：1
> 
> 时间：2012-08-10T08:17:11.770
> 
> 标签：android-ndk, static-libraries

我需要在我的 android 项目中使用 fftw3 库。[该库是使用本指南](http://www.cmumobileapps.com/2011/08/31/compiling-open-source-libraries-with-android-ndk-part-2/)中稍作修改的脚本编译的

这里是

```
INSTALL_DIR="`pwd`/jni/fftw3"
SRC_DIR="`pwd`/../fftw-3.3.2"
NDK_ROOT=$ANDROID_NDK

echo $INSTALL_DIR
echo $SRC_DIR

cd $SRC_DIR

export PATH="$NDK_ROOT/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/:$PATH"
export SYS_ROOT="$NDK_ROOT/platforms/android-8/arch-arm/"
export CC="arm-linux-androideabi-gcc --sysroot=$SYS_ROOT"
export LD="arm-linux-androideabi-ld"
export AR="arm-linux-androideabi-ar"
export RANLIB="arm-linux-androideabi-ranlib"
export STRIP="arm-linux-androideabi-strip"

mkdir -p $INSTALL_DIR
./configure --host=arm-eabi --build=x86-pc-linux-gnu --prefix=$INSTALL_DIR LIBS="-lc -lgcc"

make
make install 
```

我的android项目的jni中的目录树

```
ls -R
.:
Android.mk  Application.mk  fftw3  wavfile

./fftw3:
Android.mk  bin  include  lib  share

./fftw3/bin:
fftw-wisdom  fftw-wisdom-to-conf

./fftw3/include:
fftw3.f  fftw3.f03  fftw3.h  fftw3l.f03  fftw3q.f03

./fftw3/lib:
libfftw3.a  libfftw3.la  pkgconfig

./fftw3/lib/pkgconfig:
fftw3.pc

./fftw3/share:
info  man

./fftw3/share/info:
dir  fftw3.info  fftw3.info-1  fftw3.info-2

./fftw3/share/man:
man1

./fftw3/share/man/man1:
fftw-wisdom.1  fftw-wisdom-to-conf.1

./wavfile:
Android.mk  wavfile.cpp  wavfile.h 
```

jni/Android.mk

```
include $(call all-subdir-makefiles) 
```

jni/wavfile/Android.mk（wavfile自己写的.cpp和.h）

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := wavfile
LOCAL_SRC_FILES := wavfile.cpp
include $(BUILD_SHARED_LIBRARY) 
```

jni/fftw3/Android.mk

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := fftw3
LOCAL_SRC_FILES := lib/libfftw3.a
LOCAL_EXPORT_C_INCLUDES := include
include $(PREBUILT_STATIC_LIBRARY) 
```

jni/应用程序.mk

```
APP_STL:=gnustl_static 
```

ndk-build 的输出

```
Compile++ thumb  : wavfile <= wavfile.cpp
Prebuilt       : libgnustl_static.a <= <NDK>/sources/cxx-stl/gnu-libstdc++/libs/armeabi/
SharedLibrary  : libwavfile.so
Install        : libwavfile.so => libs/armeabi/libwavfile.so 
```

和fftw3无关。

Асс根据 ndk 文档

```
A prebuilt module does not build anything. However, a copy of your prebuilt
shared library will be copied into $PROJECT/obj/local, and another will be
copied and stripped into $PROJECT/libs/<abi>. 
```

fftw3 库不存在。怎么了？

谢谢你。

.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T22:20:17.110

fft3 静态库就在那里。你已经列出了它们，完好无损。在下。

```
./fftw3/lib:
libfftw3.a  libfftw3.la  pkgconfig 
```

当您在根 Android.mk 文件上执行 ndk-build 时，`libwavfile.so`将创建共享库并且您`libfftw3.la`应该嵌入到`libwavfile.so`. 您加载或包含`libwavfile.so`在您的 java 文件中并开始使用 fftw3 库中的 API 以及您在`wavfile.cpp`.

希望有帮助。

# ruby-on-rails - NoMethodError：尝试运行 rspec 时未定义的方法“active_record”

> ID：11897833
> 
> 赞同：0
> 
> 时间：2012-08-10T08:17:12.337
> 
> 标签：ruby-on-rails, ruby, rspec, jruby

使用 rspec 创建测试工作正常，但如果我想执行这些测试，我会收到以下错误：

```
NoMethodError: undefined method `active_record' for #<Rails::Application::Configuration:0x3011c001>
    method_missing at org/jruby/RubyBasicObject.java:1687
    method_missing at c:/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.7/lib/rails/railtie/configuration.rb:85
            (root) at C:/Workspace/OE_11/project_name/config/environments/test.rb:33
       module_eval at org/jruby/RubyModule.java:2277
         configure at c:/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.7/lib/rails/railtie/configurable.rb:24
            (root) at C:/Workspace/OE_11/project_name/config/environments/test.rb:1
           require at org/jruby/RubyKernel.java:1042
           require at c:/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activesupport-3.2.7/lib/active_support/dependencies.rb:251
   load_dependency at c:/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activesupport-3.2.7/lib/active_support/dependencies.rb:236
           require at c:/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activesupport-3.2.7/lib/active_support/dependencies.rb:251
            Engine at C:/Workspace/OE_11/project_name/config/environments/test.rb:571
     instance_exec at org/jruby/RubyBasicObject.java:1757
               run at c:/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.7/lib/rails/initializable.rb:30
  run_initializers at c:/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.7/lib/rails/initializable.rb:55
              each at org/jruby/RubyArray.java:1615
  run_initializers at c:/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.7/lib/rails/initializable.rb:54
       initialize! at c:/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.7/lib/rails/application.rb:136
          __send__ at org/jruby/RubyBasicObject.java:1698
              send at org/jruby/RubyKernel.java:2097
    method_missing at c:/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.7/lib/rails/railtie/configurable.rb:30 
```

...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:32:13.517

[在这里](http://procbits.com/2011/08/18/using-mongoid-with-rspec/)找到我的答案。我没有在我的项目中使用活动记录。

# liferay - 如何在 Liferay 5.2.3 中阻止空表单字段被提交？

> ID：11897836
> 
> 赞同：2
> 
> 时间：2012-08-10T08:17:25.737
> 
> 标签：liferay

提交表单时，我也得到了零值的空字段。我只想接收填写的字段。使用 LR 5.2.3。

提前致谢！阿迪亚

* * *

更新（Web 表单的 view.jsp 文件）：

```
<script type="text/javascript">
    jQuery(document).ready(
        function() {
            jQuery('#<portlet:namespace />fm').submit(
                function() {
                    var keys = [];
                    var fieldLabels = {};
                    var fieldOptional = {};
                    var fieldValidationErrorMessages = {};
                    var fieldValidationFunctions = {};
                    var fieldsMap = {};

                    <%
                    int fieldIndex = 1;
                    fieldLabel = preferences.getValue("fieldLabel" + fieldIndex, StringPool.BLANK);

                    while ((fieldIndex == 1) || Validator.isNotNull(fieldLabel)) {
                        fieldOptional = PrefsParamUtil.getBoolean(preferences, request, "fieldOptional" + fieldIndex, false);
                        String fieldType = preferences.getValue("fieldType" + fieldIndex, "text");
                        String fieldValidationScript = preferences.getValue("fieldValidationScript" + fieldIndex, StringPool.BLANK);
                        String fieldValidationErrorMessage = preferences.getValue("fieldValidationErrorMessage" + fieldIndex, StringPool.BLANK);
                    %>

                        var key = "<%= HtmlUtil.escape(fieldLabel) %>";

                        keys[<%= fieldIndex %>] = key;

                        fieldLabels[key] = "<%= HtmlUtil.escape(fieldLabel) %>";
                        fieldValidationErrorMessages[key] = "<%= fieldValidationErrorMessage %>";

                        function fieldValidationFunction<%= fieldIndex %>(currentFieldValue, fieldsMap) {
                            <c:choose>
                                <c:when test='<%= Validator.isNotNull(fieldValidationScript) %>'>
                                    <%= fieldValidationScript %>
                                </c:when>
                                <c:otherwise>

                     jQuery(this).children(':input[value=""]').attr("disabled", "disabled");

                                    return true;
                                </c:otherwise>
                            </c:choose>
                        };

                        fieldOptional[key] = <%= fieldOptional %>;
                        fieldValidationFunctions[key] = fieldValidationFunction<%= fieldIndex %>;

                        <c:choose>
                            <c:when test='<%= fieldType.equals("radio") %>'>
                                fieldsMap[key] = jQuery("input[name='<portlet:namespace />field<%= fieldIndex %>']:checked").val();

                                if (!fieldsMap[key]) {
                                    fieldsMap[key] = '';
                                }
                            </c:when>
                            <c:otherwise>
                                fieldsMap[key] = jQuery("#<portlet:namespace />field<%= fieldIndex %>")[0].value;
                            </c:otherwise>
                        </c:choose>

                    <%
                        fieldIndex++;
                        fieldLabel = preferences.getValue("fieldLabel" + fieldIndex, "");
                    }
                    %>

                .
                .
                .
            );
        }
    );
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-22T11:58:48.837

您的代码更难理解。我正在使用 jquery 验证在 Liferay 中提供用于验证表单的代码。

这是正常的形式：

```
<form action='<portlet:actionURL/>' method="post" id="frmPin">
        <table id="pinTable">
            <tr>
                <td width="170px">
                    Email:
                </td>

                <td>
                    <form:input path="model.userEmail" type="email" id="userEmail"/>
                </td>
            </tr>
            <tr>
                <td width="170px">
                New Pin:
                </td>
                <td>
                    <form:input path="model.pin" maxlength="4" type="number" id="pin"/>
                </td>
            </tr>

            <tr>
                <td colspan="2"><input type="submit" id="btnResetPin" value="Reset PIN" name="resetPin"></td>
            </tr>
        </table>
    </form> 
```

和 javascript 中的 Jquery 验证代码：

```
<script type="text/javascript">
jQuery("#btnResetPin").click(function(){
    jQuery("#frmPin").validate({
        rules : {
            userEmail : "required",
            pin : {
                required : true,
                maxlength: 4,
                minlength: 4
            }
        },
        messages : {
            userEmail : {
                required: "Please enter the Email Address"
            },
            pin : {
                required: "Please enter the PIN",
                maxlength : "Please enter 4 digits PIN",
                minlength : "Please enter 4 digits PIN"
            }
        }
    });
})
</script> 
```

这将有助于所需和固定长度的输入。您可以使用 jquery 验证添加更多内容。

并且为了在您的 portlet 中启用 jquery 验证，您必须在您的 liferay-portlet.xml 中添加 flflowing 标记之前的`</portlet>`标记。

```
<header-portlet-javascript> http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js </header-portlet-javascript> 
```

希望这会帮助你。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:21:00.917

阻止表单提交没有值的字段的唯一方法是使用 Javascript 来控制表单提交，遍历所有表单字段并构建一个数据对象以发布到您的表单。否则，将提交所有字段。如果您有不同类型的表单字段（选择、单选、复选框等），这可能会变得复杂，因此让表单处理控制器检查空白/空值实际上更容易更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T18:46:26.990

我强烈推荐你可以在这里找到的 jQuery Validate：

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

它易于使用，非常适合验证任何 Web 表单。我用它来验证我用 Liferay 在 portlet 中创建的所有表单。开箱即用，它提供了很多验证范围，例如空字段、电子邮件地址等，但让您可以灵活地创建自己的规则！

看看它，因为它比标准 JavaScript 更干净、更简单、更好！

# windows - 如何将 Selenium Firefox (IDE) 测试移植到其他浏览器？（视窗）

> ID：11897837
> 
> 赞同：3
> 
> 时间：2012-08-10T08:17:26.157
> 
> 标签：windows, testing, browser, selenium, firefox-addon

我已经用 Firefox 上的 selenium IDE 插件编写了很多测试用例。

我现在想在其他浏览器上运行这些测试。据我所知，没有类似的插件，所以我可能不得不使用 selenium-driver。我现在的问题是：我应该如何导出和编写这些测试用例？我正在运行 Windows，否则我会导出到 ruby​​。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:36:19.910

最好的方法（据我所知，唯一的方法）是以您选择的编程语言导出 Selenium 测试用例。Selenium 支持 - *Java、C#、Python、Ruby、PHP 和 Perl*。

导出测试用例后，您可以应用自己的逻辑（至少我们愿意相信这是一个无限的世界）并使用其他浏览器（如 IE、Chrome、Opera 甚至 Android 等）的**驱动程序**在您选择的任何浏览器中运行测试. 甚至还有一个驱动程序可以无头方式运行您的测试（HTMLUnit）。

您可以在这方面探索数以千计的教程，并且可以在几分钟内上手。

PS：人们可能想要编辑这个答案以获得更好的解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:43:54.347

以下方法可用于让您的测试启动其他浏览器：

```
 public WebDriver getDriver(String driverName)
{

    WebDriver driver = null;  

    if( driverName == "firefox")
    {
       driver = new FirefoxDriver();
    }
    else if( driverName == "chrome")
    {
       File chromeFile = new File("C:/webdrivers/chromedriver.exe");
       System.setProperty("webdriver.chrome.driver", chromeFile.getAbsolutePath());
       driver = new ChromeDriver();
    }
    else if( driverName == "ie")
    {
       File ieFile = new File("C:/webdrivers/IEDriverServer.exe");
       System.setProperty("webdriver.ie.driver", ieFile.getAbsolutePath());
       driver = new InternetExplorerDriver();
    }

    return driver;
} 
```

如果您使用的是 TestNG，您可以像这样定义您的测试方法：

```
@Test
public void verifyElements_FF()
{
    verifyElements("firefox");
} 
```

要启动 Chrom 和 IE，您需要下载驱动程序，然后将它们放置在您的测试可以访问它们的地方，并在上述方法中更改这些驱动程序的路径。

# magento - 在 magento savePayment 中获取更多信息

> ID：11897839
> 
> 赞同：1
> 
> 时间：2012-08-10T08:17:35.303
> 
> 标签：magento

我遇到了一个奇怪的行为，至少对我来说感觉很奇怪。我使用发票付款方式，只是想获得有关出生日期的信息，但不是从客户那里，而只是在那个地方。我添加了标准的 dob 字段，它正在工作。checkout/onepage/savePayment 的请求中包含日期信息。

我们使用 Phoenix-Creditpass [http://www.magentocommerce.com/magento-connect/creditpass.html](http://www.magentocommerce.com/magento-connect/creditpass.html)进行检查。

我的问题是 creditpass 扩展中的付款信息。检查由 (JS) payment.save 上的 Ajax-Request 启动。付款信息加载有：`Mage::getSingleton('checkout/session')->getQuote()->getPayment()`。据我所见，`->debug()`dob 信息丢失了。

我试图找出问题所在，我可以看到在其中`Mage_Checkout_Model_Type_Onepage::savePayment()`包含正确的数据`$quote->save()`。看起来两个地方的付款信息是相同的，因为其中的 id 和时间戳是相同的，但是`method_instance[store]`不同，而且附加信息也丢失了，我不知道它们在哪里丢失了。

我的第一个想法是由于 JS 异步导致的问题，但我`sleep(10)`在 creditpass 扩展名中添加了一个，然后才获得付款信息，但这并没有帮助。

如果我`Mage::log`在流程中添加一些内容，那么我会看到 creditpass 检查中的 getPayment 记录在之后，`order->save()`因此时间线应该不是问题，但问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:10:54.043

通过使用付款的附加信息解决了问题。irc 上有人告诉我，必须更新支付信息表以存储给定的属性。如果添加新属性并通过 eav 机制链接它们，这是正常行为，因此我没有想到这个想法。使用附加信息后，我的问题得到了解决。

# css - 更改 CSS 文件时元素样式未更新

> ID：11897841
> 
> 赞同：2
> 
> 时间：2012-08-10T08:17:43.093
> 
> 标签：css

所以我有 2 个 css 文件 - light.css 和 dark.css。我在页面上有一个按钮，可以`<link>`在这两个 css 文件之间切换元素的“href”属性。

现在，我有一个`<div>`默认情况下从 light.css 获取背景样式的。将“href”属性更改为“dark.css”后，div 不会采用 dark.css 中提供的新样式代码...

任何想法为什么？

== 编辑：添加了代码片段...

JS改变`<link>`：

```
var nightMode = false;
var theme = document.querySelector('#theme');
// Where <link id="theme" style="text/css" rel="stylesheet" href="light.css">

function toggleNight()
{
    if (!nightMode)
    {
        setTimeout("theme.setAttribute('href', '_css/dark.css')", 400);
        nightMode = true;
    }
    else
    {
        setTimeout("theme.setAttribute('href', '_css/light.css')", 400);
        nightMode = false;  
    }
} 
```

除此之外，CSS 文件如下所示：

```
// light.css
div{background:#ddd;}

// dark.css
div{background:#333;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:49:50.573

我从这个网站更改了一些来源：[使用 Javascript 更改外部 CSS 文件](http://www.omnimint.com/A6/JavaScript/Changing-external-CSS-file-with-JavaScript.html)。

我认为这是您希望执行此操作的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Changing CSS extern file using only JavaScript</title>
    <link id="changeCSS" rel="stylesheet" type="text/css" href="positive.css"/>
    <script type="text/javascript">
      function changeCSS() {

        var oldlink = document.getElementById("changeCSS");
        var cssFile;

        if(oldlink.getAttribute('href') === 'positive.css') {
          cssFile = 'negative.css';
        }
        else {
          cssFile = 'positive.css';
        }

        var newlink = document.createElement("link");
        newlink.setAttribute("id", "changeCSS");
        newlink.setAttribute("rel", "stylesheet");
        newlink.setAttribute("type", "text/css");
        newlink.setAttribute("href", cssFile);

        document.getElementsByTagName("head").item(0).replaceChild(newlink, oldlink);
      }
    </script>
  </head>
  <body>
    <button onclick="changeCSS();">change</button>
    <div class="box">Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</div>
  </body>
</html> 
```

我希望这就是你要找的。如果您不理解代码，请询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:27:54.213

您的 jQuery/javascript 代码显然是错误的，请尝试以下操作：

```
$('button').click(function(){
  if ($('link[href*="temp1"]').length > 0)
      $("link").attr('href',"http://ajthomas.co.uk/temp2.css");
  else
      $("link").attr('href',"http://ajthomas.co.uk/temp1.css");
}); 
```

这是一个小提琴 - [http://jsfiddle.net/Xtjv2/](http://jsfiddle.net/Xtjv2/)

**更新**

只是为了排除它，尝试改变你的CSS：

```
// light.css
div{background:#ddd;}

// dark.css
div{background:#333;} 
```

至：

```
// light.css
div{background-color:#ddd;}

// dark.css
div{background-color:#333;} 
```

# java - 如何加载文件 privakey 文件类型是 pem

> ID：11897847
> 
> 赞同：0
> 
> 时间：2012-08-10T08:17:54.570
> 
> 标签：java, cryptography, rsa, rsacryptoserviceprovider

我加载私有（private.pem）我的代码是：

```
 FileReader fileReader = new FileReader(new File(private.pem));
    PEMReader r = new PEMReader(fileReader, new DefaultPasswordFinder("mypass".toCharArray()));
    try {
        KeyPair kp = (KeyPair) r.readObject();
    } catch (IOException ex) {
        throw new IOException("The private key could not be decrypted", ex);
    } finally {
        r.close();
        fileReader.close();
    } 
```

错误是： 引起：

```
java.io.IOException: problem creating RSA private key: java.security.NoSuchProviderException: No such provider: BC at org.bouncycastle.openssl.PEMReader.readObject(Unknown Source) 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:21:57.963

您是否尝试添加：

```
Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider()); 
```

* * *

编辑：您可能想去[Why java.security.NoSuchProviderException No such provider: BC?](https://stackoverflow.com/questions/3711754/why-java-security-nosuchproviderexception-no-such-provider-bc) 这可能会导致同样的问题。

# sharepoint - 使用收集反馈共享点工作流中的数据

> ID：11897854
> 
> 赞同：1
> 
> 时间：2012-08-10T08:18:12.020
> 
> 标签：sharepoint, workflow, sharepoint-list, sharepointdocumentlibrary

**我有一个想要收集反馈的 SharePoint 文档库。**

到目前为止，我已经使用内置的收集反馈工作流程实现了这一点。从审阅者那里收集的信息进入特定文档的工作流程历史记录。

无论如何，我是否可以使用 SharePoint 设计器访问此信息，并可能填充一个包含审阅者评论的列表？

我一直在谷歌搜索如何做到这一点，似乎没有任何关于我如何去做的简明说明。

由于这是一个小项目，我一直避免将 Visual Studio 用于自定义工作流，因此我正在寻找使用 SharePoint 设计器实现此目的的方法。

非常感谢任何建议，谢谢。

# android - 根据我选择的 ListView 加载不同的文件，仅使用一个 WebView

> ID：11897859
> 
> 赞同：1
> 
> 时间：2012-08-10T08:18:31.393
> 
> 标签：android

我正在尝试使用 a`ListView`根据我只使用一个选择的文件打开不同的文件`WebView`。

我已经设置了意图：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
  switch (position) {
  case '0' :
    Intent i = new Intent(getApplicationContext(), tabViewerClass.class);
    startActivity(i);
  }
} 
```

在`tabViewerClass`我有这个：

```
WebView tabViewing = (WebView) findViewById(R.id.webView1);
tabViewing.loadUrl("file:///android_asset/twentyseven.html"); 
```

第二行`tabViewing.loadUrl("file:///android_asset/twentyseven.html");`我想在我选择时被调用`case 0`，但如果我选择不同的选项，我希望它调用我的`WebView`.

像这样的东西：

```
case '0' :
    Intent i = new Intent(getApplicationContext(), tabViewerClass.class);
    startActivity(i);
    load whatever file
case '1' :
    Intent i = new Intent(getApplicationContext(), tabViewerClass.class);
    startActivity(i);
    load a different file in the webview
case '2' :
    Intent i = new Intent(getApplicationContext(), tabViewerClass.class);
    startActivity(i);
    load a different file in webview 
```

`load whatever file`做相当于 `tabViewing.loadUrl("file:///android_asset/twentyseven.html");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:24:35.967

您可以在您的意图中将文件名作为额外内容传递：

```
Intent i = new Intent(getApplicationContext(), tabViewerClass.class);
i.putExtra("filename", "file:///android_asset/twentyseven.html");
startActivity(i); 
```

在 tabViewerClass 里面：

```
String filename = getIntent().getStringExtra("filename");
WebView tabViewing = (WebView)findViewById(R.id.webView1);
tabViewing.loadUrl(filename); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:17:18.567

传递要加载的文件的另一种方法是使用 Uri。

```
Intent i = new Intent(getApplicationContext(), tabViewerClass.class);
i.setData(Uri.parse("file:///android_asset/twentyseven.html"));
startActivity(i); 
```

然后在 webview 中，您可以通过检索 uri 来加载页面

```
WebView tabViewing = (WebView) findViewById(R.id.webView1);
tabViewing.loadUrl(getIntent().getDataString()); 
```

两种方式都会达到你想要的。

# javascript - SlickGrid 中的“contextmenu.slickgrid”在哪里触发？

> ID：11897860
> 
> 赞同：1
> 
> 时间：2012-08-10T08:18:34.327
> 
> 标签：javascript, jquery, jquery-plugins, slickgrid

我正在浏览 slickgrid 代码并尝试为我们的团队编写一个小包装器。在浏览代码时，我观察到画布和 headScroller 上有几个自定义事件，例如“keydown.slickgrid”、“click.slickgrid”、“dblclick.slickgrid”、“contextmenu.slickgrid”。根据我在 jQuery 中的知识，应该在代码中的某处使用 $.trigger 触发此事件。但是，我在任何地方都看不到这个。令我惊讶的是，我搜索了此页面的整个源> [http://mleibman.github.com/SlickGrid/examples/example7-events.html](http://mleibman.github.com/SlickGrid/examples/example7-events.html) <，我没有看到任何明确触发的事件，但一切作品。有人可以揭开这部分代码的神秘面纱吗？

PS：真的很喜欢 Slickgrid，我很欣赏它的可扩展性。

# python - 如何检查zipfile是否尚未关闭

> ID：11897861
> 
> 赞同：0
> 
> 时间：2012-08-10T08:18:36.563
> 
> 标签：python, zipfile

在 Python 中检查 ZipFile 对象是否尚未关闭的最佳方法是什么？

目前我在课堂上这样做：

```
try:
    self.zf.open(archive_name).close()
except RuntimeError:
    self.zf = zipfile.ZipFile(self.path)

with self.zf.open(archive_name) as f: 
    # do stuff... 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:24:01.533

在内部，有一个名为`fp`get 的打开文件指针在关闭时被清除；你也可以自己测试：

```
if not self.zf.fp:
    self.zf = zipfile.ZipFile(self.path) 
```

查看[`zipfile`模块源代码](http://hg.python.org/cpython/file/2.7/Lib/zipfile.py)；如果为 True ，则该`open`方法引发`RuntimeError`异常。`not self.fp`

请注意，依赖这种内部的、未记录的实现可能很麻烦；如果未来的实现改变你的代码将会中断，也许是以微妙的方式。确保您的项目具有良好的测试覆盖率。

或者，您可以创建一个 ZipFile 子类并覆盖该`.close`方法以跟踪状态，这将减少由于内部更改而破坏的风险：

```
class MyZipFile(zipfile.ZipFile):
    closed = False
    def close(self):
        self.closed = True
        super(MyZipFile, self).close() 
```

和

```
if self.zf.closed:
    self.zf = MyZipFile(self.path) 
```

*感谢 aknuds1 的建议*。

# android - editText lineSpacing额外问题

> ID：11897865
> 
> 赞同：7
> 
> 时间：2012-08-10T08:19:13.390
> 
> 标签：android, android-edittext, css

我有一个带有布局的editText：

```
<EditText
        android:id="@+id/edittext"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:text="test"
        android:layout_margin="5dp"
        android:gravity="left|center_vertical"
        android:lineSpacingExtra="10dp"
        android:lineSpacingMultiplier="1"
        /> 
```

但文本没有垂直居中，因为`lineSpacingExtra`. 这是它的外观：

![在此处输入图像描述](../Images/34a0fbdfeb2500f5902a05ae50cc02b5.png)

如何制作它以便我保留`lineSpacingExtra`标签但文本垂直居中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:36:33.770

我找到了一种模拟这个但不是实际解决方案的方法。您可以添加填充顶部，但这不是一个安全的解决方案。

```
<EditText
    android:id="@+id/edittext"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:paddingTop="18dp"
    android:gravity="left|center_vertical"
    android:lineSpacingExtra="10dp"
    android:lineSpacingMultiplier="1"
    android:text="test" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T18:38:36.700

如果您设置以下内容：

```
android:includeFontPadding="false"
android:lineSpacingExtra="1" 
android:lineSpacingMultiplier="0dp" 
```

您的额外填充应该消失！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T01:07:38.750

对我来说，这感觉像是我在 Web 上设计表单并使用不正确的 CSS 属性试图为文本字段提供更多空间时第一次遇到的一个熟悉的问题。

那么——为什么不忘记这个`lineSpacingExtra`属性而只使用顶部填充和底部填充呢？

```
<EditText
    android:id="@+id/edittext"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:paddingTop="10dp"
    android:paddingBottom="10dp"
    android:gravity="left|center_vertical"
    android:text="test" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T23:20:41.943

我刚刚完成了 TextView 它工作正常。

```
 <TextView
            android:id="@+id/txtWelcome"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:gravity="center"
            android:text="@string/activation"
            android:lineSpacingMultiplier="1.5"
            android:textAppearance="@style/CleverFingerThemeLarge"
            android:textColor="@color/DFTextColor" /> 
```

如果我把 android:lineSpacingExtra="20dp"

我得到更多的线条之间的差距。

在我的示例中，@string/activation = 是一个多行文本。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-08-10T08:43:32.620

```
android:lineSpacingExtra="Your Value" 
android:lineSpacingMultiplier="Your Value" 
```

# iis - 通过 SVN 为 PHP 和 asp.net mvc 网站构建和部署系统

> ID：11897867
> 
> 赞同：2
> 
> 时间：2012-08-10T08:19:37.920
> 
> 标签：iis, web-deployment, webdeploy, automated-deployment

我正在寻找一些关于什么是最佳实践构建系统的指南，以允许从颠覆代码自动部署到远程网站。

目前，我为 3 个应用程序的每个环境运行一个测试和生产分支：

*   PHP 应用程序
*   ASP.NET MVC 应用程序
*   ASP.NET 网络服务

我通过 Visual Studio 中的 Web Deploy 和 WebMatrix 中的 PHP 应用程序部署 ASP.NET 应用程序。总比没有好，但仍然需要我加载 Visual Studio 或 WebMatrix 和应用程序进行部署，我发现从 WebMatrix 部署有点不可靠，部署后缺少一些文件。

理想情况下，我想要这样的东西：

*   将从 Subversion 签出相应的分支
*   如有必要，运行构建
*   部署到远程 IIS 服务器
*   允许回滚到以前的代码副本
*   具有 Web 界面或可以使用单个 CLI 命令运行（即一键部署）
*   具有一些文件管理功能，可以移动文件、创建快捷方式、写入文件等（远程）
*   必要时可以运行 SQL 脚本
*   是开源的或免费使用的

我不确定我是否应该使用 TeamCity（专业版）、编写 MSBuild 脚本、编写 WebDeploy 脚本或什么。我可能会在构建服务器上运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:04:09.217

您可以使用 TeamCity 或在普通 Windows 调度程序中调度的自定义 MSBuild 脚本。一种或另一种方式，您将需要自定义 MSBuild 脚本。然后，您可以在 TeamCity 中使用它。

就个人而言，我会选择 TeamCity。使用[自定义构建任务](http://msbuildextensionpack.codeplex.com/)应该允许您做任何您想做的事情。TeamCity 可免费用于商业和非商业用途。

# swig - swig“非常懒惰的绑定”在多大程度上可用？

> ID：11897869
> 
> 赞同：1
> 
> 时间：2012-08-10T08:19:41.753
> 
> 标签：swig, ogre

为了快速测试一些库，并避免编译一个简单的 C++ 程序所需的几秒钟，我想快速生成一些依赖于 Ogre 的库的绑定。

Swig 的文档说可以用简单的东西编写一个接口文件

> #include "食人魔.h"

这样真的可行吗？

我坚持认为我不需要精心制作的绑定，只需要一些快速而肮脏的东西，让我可以快速尝试各种测试场景......

编辑：以下是关于我已经尝试过的所有信息：

命令行 ：

```
swig -c++ -java -includeall -ignoremissing -v -notemplatereduce ogre.i 1>out.log 2>err.log 
```

接口文件：

```
 %module Ogre
 %{
 include "../include/OGRE/Ogre.h"
 %}
 %include "../include/OGRE/Ogre.h" 
```

stderr（最后一行，经过多次警告且没有其他错误）

> 无法打开文件 SWIGTYPE_p_Ogre__MapIteratorT_Ogre__mapT_Ogre__ResourceHandle_Ogre__ResourcePtr_std__lessT_Ogre__ResourceHandle_t_Ogre__STLAllocatorT_std__pairT_Ogre__ResourceHandle_const_Ogre__ResourcePtr_t_Ogre__GeneralAllocPolicy_t_t__type_t.java：没有这样的文件或目录

生成了很多java文件，但是生成的cxx文件只包含5行注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:43:06.210

好的，看起来我遇到的问题并不完全是 swig 的错。

事实上，swig 无法生成它那么长的文件名，因为它被 Windows 对路径长度的愚蠢限制所击败（甚至 Windows 7 也包含此限制）。将源代码放在另一个较短的命名文件夹中解决了这个问题（但后来我遇到了另一个错误，因为某些类型甚至更长）。

现在我必须找到一种方法来规避 Windows 限制。

编辑：我为 SWIG 提供了一个补丁，它通过散列非常长的类型名称来规避限制。AFAIK，它尚未应用。

# mysql - 将查询结果放入新表

> ID：11897871
> 
> 赞同：0
> 
> 时间：2012-08-10T08:19:44.140
> 
> 标签：mysql, database

我有一个 MySQL 查询，它基本上获取所有信息来填充一个新表，但我不知道该怎么做：

1.  创建一个新表，但如果它已经存在，则删除现有表并重新创建
2.  将所有数据放入新表中

并希望有人能帮我一把或指出我正确的方向。

这是我现有的 SQL，以防万一（放在 PHP 文件中）：

```
SELECT
 * 
FROM (                                                                                                                                                                                                                                                                                                                                                                         
SELECT
    'OverDue' AS ParentNode,
    'Documents ' AS ChildNode,
    COUNT(*) AS NoOfFails,
    '2' AS GroupLevel,
    'Red' AS ImageNamePrefix         
FROM 
    documents         
WHERE
    datenextreview BETWEEN '$datefrom' AND '$dateto'

UNION ALL                    
SELECT
    'Documents ' AS ParentNode,
    InternalorExternal & ' ' AS ChildNode,
    COUNT(*) AS NoOfFails,
    '3' AS GroupLevel,
    'Red' AS ImageNamePrefix         
FROM
    documents         
WHERE
    datenextreview BETWEEN '$datefrom' AND '$dateto'          
GROUP BY InternalorExternal                     

UNION ALL                    
SELECT
    'OverDue' AS ParentNode,
    'Equipment ' AS ChildNode,
    COUNT(*) AS NoOfFails,
    '2' AS GroupLevel,
    'Red' AS ImageNamePrefix         
FROM
    equipment
WHERE
    datenextcalib BETWEEN '$datefrom' AND '$dateto'

UNION ALL                    
SELECT
    'Equipment ' AS ParentNode,
    EqpmtType & ' ' AS ChildNode,
    COUNT(*) AS NoOfFails,
    '3' AS GroupLevel,
    'Red' AS ImageNamePrefix         
FROM
    equipment
WHERE
    datenextcalib BETWEEN '$datefrom' AND '$dateto'
GROUP BY EqpmtType

UNION ALL                                                                                                                                                                                                                                                                                                                                                       

SELECT
    'Due' AS ParentNode,
    'Documents ' AS ChildNode,
    COUNT(*) AS NoOfFails,
    '2' AS GroupLevel,
    'Yellow' AS ImageNamePrefix         
FROM documents         
WHERE
        datenextreview BETWEEN '$datefrom' AND '$dateto'                 

UNION ALL                    
SELECT
    'Documents ' AS ParentNode,
    InternalorExternal & ' ' AS ChildNode,
    COUNT(*) AS NoOfFails,
    '3' AS GroupLevel,
    'Yellow' AS ImageNamePrefix         
FROM documents         
WHERE
    datenextreview BETWEEN '$datefrom' AND '$dateto'          
GROUP BY InternalorExternal

UNION ALL                    
SELECT
    'Due' AS ParentNode,
    'Equipment ' AS ChildNode,
    COUNT(*) AS NoOfFails,
    '2' AS GroupLevel,
    'Yellow' AS ImageNamePrefix         
FROM equipment
WHERE
    datenextcalib BETWEEN '$datefrom' AND '$dateto'

UNION ALL                    
SELECT
    'Equipment ' AS ParentNode,
    EqpmtType & ' ' AS ChildNode,
    COUNT(*) AS NoOfFails,
    '3' AS GroupLevel,
    'Yellow' AS ImageNamePrefix         
FROM equipment         
WHERE
    datenextcalib BETWEEN '$datefrom' AND '$dateto'        
GROUP BY EqpmtType

UNION ALL                                                                                                                                                                                                                                                                                                                                                       

SELECT
    'Coming Up' AS ParentNode,
    'Documents ' AS ChildNode,
    COUNT(*) AS NoOfFails,
    '2' AS GroupLevel,
    'Green' AS ImageNamePrefix
FROM  documents        
WHERE
    datenextreview BETWEEN '$datefrom' AND '$dateto'

UNION ALL                    
SELECT
    'Documents ' AS ParentNode,
    InternalorExternal &  ' ' AS ChildNode,
    COUNT(*) AS NoOfFails,
    '3' AS GroupLevel,
    'Green' AS ImageNamePrefix         
FROM documents
WHERE
    datenextreview BETWEEN '$datefrom' AND '$dateto'
GROUP BY InternalorExternal

UNION ALL                    
SELECT
    'Coming Up' AS ParentNode,
    'Equipment ' AS ChildNode,
    COUNT(*) AS NoOfFails,
    '2' AS GroupLevel,
    'Green' AS ImageNamePrefix         
FROM  equipment
WHERE
    datenextcalib BETWEEN '$datefrom' AND '$dateto'

UNION ALL                    
SELECT
    'Equipment ' AS ParentNode,
    EqpmtType &   ' ' AS ChildNode,
    COUNT(*) AS NoOfFails,
    '3' AS GroupLevel,
    'Green' AS ImageNamePrefix         
FROM equipment
WHERE
    datenextcalib BETWEEN '$datefrom' AND '$dateto'
GROUP BY EqpmtType
) AS table2              
ORDER BY         
 GroupLevel,
 ChildNode DESC,
 ParentNode DESC 
```

我尝试使用以下格式：

```
SELECT *
INTO new_table_name
FROM [query] 
```

在上面的查询中，但它只显示`Invalid query: Undeclared variable: new_table_name`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:21:58.083

尝试`INSERT INTO...SELECT`声明

```
INSERT INTO newTable (ChildNode, NoOfFails, GroupLevel, ImageNamePrefix)
SELECT ... -- paste your SELECT STATEMENT HERE (the one you posted) 
```

来自 MySQL Doc，`SELECT INTO`服务器不支持。

**[阅读关于此](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-select-into-table.html)**
**[INSERT INTO...SELECT](http://www.1keydata.com/sql/sqlinsert.html)**

# php - PHP Session 行为怪异不会改变值

> ID：11897874
> 
> 赞同：1
> 
> 时间：2012-08-10T08:19:55.700
> 
> 标签：php, session, reference

所以这是我的设置。

在 file1 中，我有一个 class1。在构造函数中，我创建了一个类变量，例如

```
$this->session = $_SESSION['test']; 
```

在构造函数中，我在 $this->session 中设置了一些默认值，例如

```
$this->session['something']['somethingelse'] = 'test'; 
```

Class1 需要（在函数中）file2 并启动 class2（在 file2 中）。调用一个函数并给出一个 $this->session。然后我使用 &$session 引用变量。

$this->session 然后更改 class2 中的值让我们说喜欢

```
$this->session['something']['somethingelse'] = 'test2'; 
```

当我返回到 class1 时，我可以看到值已更改。我现在调用一个 storeSession 函数，该函数基本上与开始相反。

```
$_SESSION['test'] = $this->session; 
```

我对 $this->session 和 $_SESSION 都进行了 var_dump，在 file1 中我可以看到值已更改。

然后我通过调用我拥有的另一个 php 文件来结束

```
session_start();

var_dump(session_id());
var_dump($_SESSION);
exit; 
```

但是这里的结果是不对的！$this->session['something']['somethingelse'] 的值是 'test' 而不是 'test2'！如果我用 var_dump($_SESSION); 重新加载页面，file1 也是如此。在顶部，值没有改变。我也调试了 session_id，我肯定在所有文件中的同一个会话上运行！

现在这里有一些更奇怪的东西。就像我无法覆盖我在开始时设置的默认值。与它是多维数组有关吗？

我在 file1 中做的最后一件事是更改值。我做的第一件事是$_SESSION 上的var_dump。无论我尝试什么，多维数组中的值都不会改变（第一次设置时）！

我什至尝试在 file1 末尾转储 $this->session 值 - 确认它已更改。取消设置 $_SESSION 然后尝试设置

```
$this->session['something']['somethingelse'] = 'test'; 
```

但是它根本没有设置！这个地方简直是空的。那么整个 $_SESSION 是空的。如果我清除会话 cookie 并运行页面，就会出现这种情况。

我很困惑......我以前从未遇到过这些会话处理问题。有任何想法吗？它与会话中的多维数组有关吗？

我觉得我已经尝试了一切。我也试过在我用正确的值更改会话后立即创建一个 session_write_close() 但结果是一样的。

* * *

## 编辑

我离得更近了一点。我认为这与 $this->session 的引用有关。

就在我设置会话之前，我 var_dump 和 echo $this->session['seomthing'] 这表示值是正确的 - 来自 class2 的更改值。当我在 $_SESSION 中插入这个值时，我没有得到正确的值！！！我得到 test 而不是 test2 我刚刚被告知是它的价值。PHP 这里有一些完全错误的地方。如果我用像'lalala'这样的字符串设置$_SESSION，它会改变。如果我在 $this->session['seomthing'] 之前更改它也可以工作！所以会话不是问题。我可以改变它。

$this->session['seomthing'] = 'sdfsdfs';

那么 vardump 和 echo 如何告诉我该值是一回事，但是当我将其插入 SESSION 时，它又是另一个值！这就是为什么我如此困惑。PHP 告诉我两件事。

所以基本上我在第一类中有一个变量（测试）。我将它发送到第二类，在那里我将它更改为 test2，而我有 & 字体（参考）。然后我在第一堂 vardump 中回显它，它说它现在是 test2。我把它放入 $_SESSION 然后它说值是 test... 而不是 test2... wtf？

* * *

## 编辑2

所以我试着做一个非常简单的例子来说明我在做什么。当我这样做时，一切正常......所以答案必须在代码中的某个地方......我正在关闭这个并进一步挖掘这个谜团。

类1.php

```
<?php
session_start();
class Class1 {

    var $session;

    public function __construct() {
        $this->session = $_SESSION['something'];
        $this->session['somethingelse'] = 'test';
        $this->main();
    }

    private function main() {
        var_dump($this->session);
        require_once 'class2.php';
        $Class2 = new Class2($this->session);

        $Class2->main();

        $this->storeSession();
    }

    private function storeSession() {
        var_dump($this->session);
        $_SESSION['something'] = $this->session;
        var_dump($_SESSION);
        echo 1;     
    }
}

new Class1();
?> 
```

类2.php

```
<?php
session_start();

class class2 {

    public $session;

    function __construct(&$session) {
        $this->session = &$session;
        $this->main();
    }

    function main() {
        $this->session['somethingelse'] = 'test2';      
    }
}
?> 
```

会话.php

```
<?php
session_start();

var_dump(session_id());
var_dump($_SESSION);
?> 
```

/RJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:27:55.080

据我所知，您应该先调用 session_start()，然后再使用 $_SESSION... 这可以解释为什么您的整个 $_SESSION 都是空的。

> 请记住：如果要使用 $_SESSION 数组，则必须始终在脚本中使用“session_start()”。session_start() 不仅启动用户会话，而且继续当前会话。session_start() 用于获取用户的会话 ID 并将其与他们的文件相关联，从而将文件中的变量加载到 $_SESSION 中，如果不使用 session_start()，则 $_SESSION 值将不可用

[http://www.free2code.net/tutorials/view/php_sessions-11/page1.html](http://www.free2code.net/tutorials/view/php_sessions-11/page1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T02:20:50.963

我建议你扔掉所有奇怪的类和东西，并尝试一个完全空的 php 脚本。

例如 yoursite.com/test.php

只需放入基本的会话内容即可。session_start() 等

设置一些会话变量。

print_r($_SESSION,false); //打印到屏幕

然后，在重新加载页面之前，删除实际设置会话变量的任何代码，但保留 print_r 语句。

然后尝试加载页面，例如 yoursite.com/test.php?anyrandomthing=whatever

看看你是否打印相同的会话。如果这样做，那么您至少确定您的服务器正在正确处理会话，并且您的问题出在您的代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:10:14.383

您确定在设置新值之前没有 session_write_close() 吗？

# frama-c - 跟踪法律价值

> ID：11897877
> 
> 赞同：2
> 
> 时间：2012-08-10T08:20:04.943
> 
> 标签：frama-c

假设有两个外部函数 init() 和 revoke()。Init() 返回“有效”值，revoke() 使它们无效。我想验证 use() 仅使用已初始化但未撤销的值。我不知道如何将此属性描述为谓词（想想随机会话 ID）或其他方式。

```
#include <lib.h>

// "ensures valid_val(\result)"
extern int init();
extern revoke(int);

/*
 @ assigns \nothing;
 @ require valid_val(val);
 */
void use(int val) {
    ...
}

int main() {
    int v = init();
    use(v);
    revoke(v);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T16:07:14.927

确实不可能将此属性表示为单个 ACSL 谓词。实际上，这取决于程序的整个执行过程。Aorai插件允许以自动机的形式表达允许的函数调用序列，但恐怕它不能完全捕捉到你想要的。更准确地说，它无法表达令牌的生命周期重叠的场景（但足以证明您的示例的主要功能是正确的）。

也就是说，通过一些工具，应该可以提出一个通用规范。第一个技巧是声明一个 (ghost) 数组，如果相应的索引是有效标记，则其单元格不为零。

```
typedef int token;

/*@ ghost extern int valid_token[]; */

/*@ predicate is_valid(token t) = valid_token[t] != 0; */

/*@ 
  assigns valid_token[\at(\result,Post)];
  ensures is_valid(\result);
*/
extern token init();

/*@
  requires is_valid(t);
  assigns valid_token[t];
  ensures !is_valid(t);
*/
extern revoke(token t);

/*@
 @ requires is_valid(val);
 @ assigns \nothing;
 */
void use(token val) {

}

/*@ requires \forall token t; !is_valid(t); */
int main() {
    token v = init();
    use(v);
    revoke(v);
} 
```

如果我们使用没有定义大小的数组这一事实看起来有点可疑，那么几乎纯粹的 ACSL 解决方案是使用未定义的谓词，其真值取决于由 init 和 revoke 修改的状态，如下所示：

```
 typedef int token;

/*@ ghost int glob_state; */

/*@ axiomatic validity {
  predicate valid_token{L}(token t) reads glob_state;
}
*/

/*@ predicate unchanged_token{L1,L2}(token t) =
  \forall token t1; t!=t1 ==> 
  valid_token{L1}(t1) <==> valid_token{L2}(t1);
*/

/*@ 
  assigns glob_state;
  ensures valid_token(\result);
  ensures unchanged_token{Pre,Here}(\result);
*/
extern token init();

/*@
  requires valid_token(t);
  assigns glob_state;
  ensures !valid_token(t);
  ensures unchanged_token{Pre,Here}(t);
*/
extern revoke(token t);

/*@
 @ requires valid_token(val);
 @ assigns \nothing;
 */
void use(token val) {

}

/*@ requires \forall token t; !valid_token(t); */
int main() {
    token v = init();
    use(v);
    revoke(v);
} 
```

分配的函数`glob_state`可能会修改谓词。事实上，它仅针对参数的一个值发生变化，因此辅助谓词表示除一个之外的所有标记的有效性在`L1`和之间保持不变`L2`。

# java - akka getSender() 将来会丢失

> ID：11897881
> 
> 赞同：2
> 
> 时间：2012-08-10T08:20:32.923
> 
> 标签：java, akka, future

我在akka（java）中遇到了一个问题，发件人的引用在未来一段时间后消失了。这是代码：

```
class MyActor extends UntypedActor {
  @Override
  public void onReceive(Object msg){
    Future<Integer> future = Futures.future(new Callable<Integer>(){
      @Override
      public Integer call() throws Exception {
        System.out.println(getSender()); //works fine
        Thread.sleep(1000);
        System.out.println(getSender()); //show deadLetter
        return 42;
      }
    },getContext().dispatcher());

    //do something with the future, pipe it or whatever
    Patterns.pipe(future,getContext().dispatcher(),getSender());
  }
} 
```

我可能错过了文档中的某些内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T10:21:55.473

文档的 Actors 部分对此进行了解释，并带有一个很大的警告标志：

> 警告当使用未来的回调时，在actor内部你需要小心避免关闭包含actor的引用，即不要在回调中调用方法或访问封闭actor的可变状态。这会破坏actor封装，并可能引入同步错误和竞争条件，因为回调将同时调度到封闭的actor。不幸的是，目前还没有一种方法可以在编译时检测这些非法​​访问。另请参阅：Actor 和共享可变状态

这里也有解释：

[http://doc.akka.io/docs/akka/2.0.2/general/jmm.html#jmm-shared-state](http://doc.akka.io/docs/akka/2.0.2/general/jmm.html#jmm-shared-state)

当您关闭“getSender()”时，您实际上是关闭了“this.getSender()”，这意味着您正在关闭演员的内部状态，上面的文档告诉您不要这样做。

我会将其添加到我们的常见问题解答中。

快乐哈金，

√</p>

# actionscript-3 - 三角函数试图给球指明方向时遇到问题

> ID：11897882
> 
> 赞同：1
> 
> 时间：2012-08-10T08:20:55.473
> 
> 标签：actionscript-3, flash

天啊，不好意思又来打扰了，没想到开始写AS3会这么难（刚开始还容易，现在脑子都被堵住了），还是没办法让球跟上鼠标以所需的速度和角度，我以杰特的例子为例，但可能我没有正确实施，这是代码；我会解释我想要完成的事情

```
import flash.geom.Point;
import flash.events.MouseEvent;
import flash.events.Event;
import flash.display.MovieClip;
// here I added a custom cursor to my mouse (it’s an aim in png format)
var cursor:MovieClip;
function initializeGame():void
{
cursor = new Cursor();
addChild(cursor);
cursor.enabled = false;
Mouse.hide();
stage.addEventListener(MouseEvent.MOUSE_MOVE, dragCursor); 
```

}

```
function dragCursor(event:MouseEvent):void
{
cursor.x = this.mouseX;
cursor.y = this.mouseY;
}

initializeGame();
var mouse=this.Mouse;

// here I want to make the player  (called kicker) to kick the ball
stage.addEventListener(MouseEvent.CLICK, kick);

function kick(evt:Event){

kicker_mc.play(); // here I animate the kicker movieClip

this.addEventListener(Event.ADDED, moveBall);// this is the function that will move     the ball towards the goal

}

//And here unsuccessfully trying to make the ball start moving to the cursor position,     (currently when I kick the ball it appears at the right upper corner of the swf, exactly where the cursor appears when movie is tested

var speed:Number;
var angle:Number;
speed=200;
angle = Math.atan2(mouse.y-bola.y, mouse.x-bola.x);

function moveBall (event:Event){

ball.x += Math.cos (angle) * speed;
ball.y += Math.sin (angle) * speed;

} 
```

再次感谢您的指导

## **老问题**

我开始使用 AS3 创建足球点球大战游戏，但是一旦球被踢出，我无法给球提供速度和方向，我无法让球员踢球（是的，我不是开发人员，但我已经一直在努力完成游戏）所以我设法延迟了一个函数，该函数允许我在 3.5 秒后将球移动到球门，同时玩家的动画模拟踢球，这是代码：

```
kick_btn.addEventListener(MouseEvent.CLICK, kick);

function kick(evt:Event)
{
    kicker_mc.play();

    new delayedFunctionCall (myFunctionToStartLater, 350);

    function myFunctionToStartLater():void
    {    
        ballkicked();
    }
}

function ballKicked(event:Event)
{
    ball_mc.y=180;
} 
```

现在检查我只是将球移动到不同的位置，但我想在函数 ballkicked() 中将球扔给守门员；这是我想给球真正运动的地方，所以射门可以成为一个目标，我知道我需要使用一些三角函数来给出方向和速度，但三角函数似乎非常复杂，我正在学习一个教程，但我是只能准备一些变量和参数，但后来我迷路了：

```
var xSpeed:Number;
var ySpeed:Number;
var angle:Number;
var speed:Number; 
```

这应该继续功能：

```
angle = this.rotation / 180 * Math.PI;
xSpeed = Math.cos(angle) * speed;
ySpeed = Math.sin(angle) * speed; 
```

我非常感谢您的耐心和帮助，我真的很想学习如何做事，我不想放弃。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:41:54.853

atan2 函数将为您提供“投掷”球的角度。为此，您将需要两个位置向量，例如我们将使用鼠标位置来确定球的位置。

```
angle = atan2(mouse.y-ball.y, mouse.x-ball.x) 
```

请注意，首先使用 y 坐标。这将为您提供一个数字，您可以通过该数字向前推进球：

```
ball.x += cos(angle)*speed
ball.y += sin(angle)*speed 
```

这将使球向鼠标所在的位置移动。但是，您需要通过弯曲更接近地面的角度来考虑重力。当地面被击中时，您可以简单地降低速度并翻转向量的 y。

**您可能会发现使用额外的加速度矢量很有用。** 有了这个，你可以设置加速度矢量，类似于我上面显示的：

```
//same as above
ball.accx += cos(angle)*speed
ball.accy += sin(angle)*speed 
```

最初。然后只需将此向量添加到每一帧的 pos 向量中。在您的初始帧之后，您将需要提供某种阻尼和重力 - 这取决于您希望如何实现。

An alternative way to compute this is to use a sine wave to illustrate the path. You can see an example here: [sinewave](http://processing.org/learning/basics/sinewave.html), this is easier initially but you will need to learn the concepts of vectors to deal with collisions such as what I showed above.

# java - 为什么 Java 编译器有时允许对 null 进行拆箱？

> ID：11897883
> 
> 赞同：16
> 
> 时间：2012-08-10T08:21:03.943
> 
> 标签：java, compilation, javac, unboxing

例如：

```
int anInt = null; 
```

编译时失败，但

```
public static void main(String[] args) {
  for (int i = 0; i < 10; i++) {
    System.out.println("" + getSomeVal());
  }
}
public static int getSomeVal() {
   return new Random().nextBoolean() ? 1 : null;
} 
```

（通常）在运行时失败。试图返回 just`null`也会导致编译错误，所以我认为有多个路径会导致编译器推断出`null`可能是自动装箱的`int`？为什么 javac 不能编译这两种情况并出现相同的错误？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-10T08:23:42.487

在第一种情况下，编译器知道您正在尝试拆箱`null`.

在第二种情况下，条件表达式的类型是`Integer`，因此您实际上是在编写：

```
Integer tmp = new Random().nextBoolean() ? 1 : null;
return (int) tmp; 
```

...所以拆箱不会发生在常量表达式上，编译器会允许它。

`int`如果您通过取消装箱将其更改为强制条件表达式为类型*，*它将失败：

```
// Compile-time failure
return new Random().nextBoolean() ? 1 : (int) null; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T08:25:01.227

装箱部分隐藏了基元和相应的包装对象之间的区别，但并没有消除它。

拳击不会改变两个区别：

*   对象可以为空，而基元不能
*   对象既有状态又有身份，而原语只有状态（值）

有时，这些差异可能会在使用拳击时引起问题。

要记住的几点：

*   小心空值。自动拆箱 null 对象将导致`NullPointerException`.
*   比较项目`==`并且`equals`必须小心进行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T08:33:59.973

您不能将 null 分配给 int

```
 int anInt = null; 
```

Java 允许这样做，因为您没有将 null 分配给 int

```
 System.out.println("" + getSomeVal()); //null was just converted to a srting and was printed 
```

如果你执行这个，你会得到错误

```
 int anInt = getSomeVal(); 
```

# php - 如果不存在锚点，则检查字符串并创建链接

> ID：11897884
> 
> 赞同：0
> 
> 时间：2012-08-10T08:21:04.623
> 
> 标签：php, regex

这个函数从一个字符串创建链接，但问题是，如果我已经有一个链接，它就不起作用，例如：'我是一个链接'，但它适用于'我是链接[http://www.google.com](http://www.google.com) '。任何的想法？

```
 function checkStringForLinks($string)
{
    /*** make sure there is an http:// on all URLs ***/
    //$string = preg_replace("/([^\w\/])(www\.[a-z0-9\-]+\.[a-z0-9\-]+)/i", "$1http://$2",$string);

    /*** make all URLs links ***/
    $string = preg_replace("/([\w]+:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/i","<a target=\"_blank\" href=\"$1\">$1</A>",$string);

    /*** make all emails hot links ***/
    //$string = preg_replace("/([\w-?&;#~=\.\/]+\@(\[?)[a-zA-Z0-9\-\.]+\.([a-zA-Z]{2,3}|[0-9]{1,3})(\]?))/i","<A HREF=\"mailto:$1\">$1</A>",$string);

    return $string;
} 
```

哎呀，输入错误。我的意思是：我不希望它接触 \anchor\link\anchor\，而是只接触未形成的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:33:25.980

要使它正确，并不是那么简单，已经有免费的解决方案。像这个简单的类[linkify](http://brandonwamboldt.github.com/utilphp/#linkify)。

```
 $string = 'some text http://www.google.com <a href="http://www.google.com">google.com</a>';Some text http://www.google.com Some text <a href="http://www.google.com">google.com</a>
 echo Util::linkify($string);
 //returns 
 //Some text <a href="http://www.google.com">http://www.google.com</a> Some text <a   href="http://www.google.com">google.com</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:33:27.150

```
$string = preg_replace("/([\w]+\:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/i","<a target=\"_blank\" href=\"$1\">$1</A>",$string); 
```

在之前添加 \ ：并且您不需要 () 和 $1，只需使用 $0 代替

# android - 如何在Android上的选项卡活动内的某些活动中隐藏状态栏

> ID：11897886
> 
> 赞同：0
> 
> 时间：2012-08-10T08:21:13.817
> 
> 标签：android, android-layout

我有一个带有三个选项卡的应用程序。我`android:theme="@android:style/Theme.NoTitleBar.Fullscreen"`用来隐藏状态栏。当我把它放在我`TabActivty`的清单中时它就起作用了。这将隐藏所有三个活动中的状态栏（在 内`TabActivity`）。我想隐藏三个活动中的两个的状态栏，而不是全部。当我尝试在清单中使用`android:theme="@android:style/Theme.NoTitleBar.Fullscreen"`for each`Activity`时，它不会隐藏状态栏。
如何隐藏其中一些活动的状态栏`TabActivity`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:25:10.833

尝试在每个要隐藏状态栏的活动中使用此代码。

```
 public void onResume()
   {
     handler.postDelayed(new Runnable() {
        public void run() {
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                             WindowManager.LayoutParams.FLAG_FULLSCREEN);
        }
    }, 1500);  
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:28:02.937

您已在 android 清单中为您的活动设置主题，如下所示...

```
<activity android:name=".Login" android:theme="@android:style/Theme.NoTitleBar" /> 
```

请在编辑后验证您的活动标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T08:55:41.993

在您的代码中，您可以调用`getActionBar().hide()`或`getSupportActionBar().hide()`。这应该允许您根据需要显示和隐藏操作栏。如果您尝试在片段中执行此操作，则可能需要获取 FragmentActivity 的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T11:33:07.463

你应该做以下技巧

```
<activity android:name=".Login" android:theme="@android:style/Theme.NoTitleBar.Fullscreen" /> 
```

# silverlight - 如何删除或处置 GestureListener WP7

> ID：11897891
> 
> 赞同：3
> 
> 时间：2012-08-10T08:21:26.170
> 
> 标签：silverlight, windows-phone-7, xna

我有 Silverlight/XNA 应用程序，我在其中添加了一个 GestureListener 到图像控制。在 XNA 我有一个游戏。

游戏运行良好，直到我进入 Silverlight 部分并将 GestureListener 添加到图像中。之后，当我回到游戏时，它就会滞后。

我已经检查过，只有在 Silverlight 中将 GestureListener 添加到 Image 后，游戏才开始滞后。

```
Image newTroll = new Image();
newTroll.Stretch = Stretch.None;
newTroll.Source = image;

newTroll.Margin = new Thickness(10,10,0,0);
newTroll.RenderTransformOrigin = new Point(0.5, 0.5);
newTroll.CacheMode = new BitmapCache();
newTroll.RenderTransform = new CompositeTransform();
newTroll.MouseEnter += new MouseEventHandler(newTroll_MouseEnter);

var gestureListener = GestureService.GetGestureListener(newTroll);

gestureListener.PinchStarted += new EventHandler<PinchStartedGestureEventArgs>(gestureListener_PinchStarted);
gestureListener.PinchDelta += new EventHandler<PinchGestureEventArgs>(gestureListener_PinchDelta);
gestureListener.PinchCompleted += new EventHandler<PinchGestureEventArgs>(gestureListener_PinchCompleted);

gestureListener.DragStarted += new EventHandler<DragStartedGestureEventArgs>(gestureListener_DragStarted);
gestureListener.DragDelta += new EventHandler<DragDeltaGestureEventArgs>(gestureListener_DragDelta);
gestureListener.DragCompleted += new EventHandler<DragCompletedGestureEventArgs>(gestureListener_DragCompleted); 
```

我已经搜索但没有找到任何解决此问题的方法

**更新**

我刚读到这个，所以我真的很困惑

“一位内部开发人员报告说，显然 GestureService 对事件有一个静态订阅，该订阅`Touch.FrameReported`对每个接触点进行大量处理。

但它似乎永远不会取消订阅该活动，因此即使您不再积极使用该服务，您也总是为此付费。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T15:36:03.473

您是否尝试过在适当的时候使用“-=”来结束事件？

# html - 如何使用 Apache Ant 构建 OpenLaszlo DHTML 应用程序

> ID：11897892
> 
> 赞同：2
> 
> 时间：2012-08-10T08:21:26.360
> 
> 标签：html, ant, openlaszlo, lzx

我已经阅读了有关 OpenLaszlo 的[lzdeploy 工具](http://weblog.openlaszlo.org/archives/2008/04/lzdeploy-new-command-line-utility-for-deploying-solo-applications/)的信息，但似乎只有很少的文档可用。

应该可以使用 Apache Ant 构建 OpenLaszlo DHTML 应用程序（例如，作为自动构建过程的一部分）。如何在 Ant 之外使用 lzc 和 lzdeploy 工具为 DHTML 运行时生成 OpenLaszlo 应用程序的编译版本，包括包装器页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T11:14:24.843

这是一个完整的 Ant 构建脚本，您可以将其与 OpenLaszlo 5.0 一起使用（尚未使用旧版本进行测试）。

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="olApp" default="build" basedir=".">

  <description>Ant Build Script for OpenLaszlo DHTML App</description>

  <!-- OpenLaszlo canvas app filename -->
  <property name="app.file" value="testapp.lzx" />

  <!-- LPS home folder -->
  <property name="lps.home" value="PLEASE SET YOUR LPS_HOME FOLDER HERE!!!" />

  <!-- Build timestamp -->
  <property name="build.timestamp" value="will be the set through script below" />
  <script language="javascript">
    var date = new Date();
    var stamp = new java.text.SimpleDateFormat("yyyyMMdd-HHmmss").format(date);
    olApp.setProperty("build.timestamp", stamp);
  </script>

  <property name="project.folder" value="will be set through the script below" />
  <script language="javascript">
    var lpsHome = olApp.getProperty("lps.home"),
    basedir = olApp.getProperty("basedir"),
    fileSep = java.lang.System.getProperty("file.separator"),
    projectFolder = "app";
    olApp.setProperty("project.folder", projectFolder)
  </script>

  <!-- Default directories  -->
  <property name="lzx.dir" location="${basedir}/lzx" />
  <property name="build.dir" location="${basedir}/build" />
  <property name="temp.dir" location="${build.dir}/tmp" />
  <property name="release.dir" location="${basedir}/release" />

  <!-- CLASSPATH for Laszlo compiler lzc -->
  <path id="laszlo.compiler.classpath">
    <pathelement location="${lps.home}/WEB-INF/lps/server/build"/>
    <pathelement location="${lps.home}/WEB-INF/classes"/>
    <fileset dir="${lps.home}/WEB-INF/lib" includes="**/*.jar"/>
  </path>

  <target name="info"
          description="Dump useful configuration information before build">
    <echo message="Using LPS in ${lps.home}" />
    <echo message="Editor appl path relative to $LPS_HOME is  $LPS_HOME/${project.folder}" />
    <echo message="Timestamp for this build is ${build.timestamp} "/>
  </target>

  <target name="clean" depends="info"
          description="Delete all temporary and generated files and folders.">
    <!-- If the application file has been compiled using the
         browser developer console, remove all generate files. -->
    <script language="javascript">
      var file = olApp.getProperty("app.file");
      olApp.setProperty("masterSpriteFile", 
      file.substr(0,file.indexOf(".lzx")) + ".sprite.png");
    </script>
    <delete>
      <fileset dir="${lzx.dir}">
        <include name="**/*.sprite.png"/>
        <include name="**/*.swf10.swf"/>
        <include name="**/*.lzx.js"/>
      </fileset>
    </delete>
    <delete dir="${lzx.dir}/lps"/>
    <delete file="${lzx.dir}/${app.file}.js" />
    <delete file="${lzx.dir}/${app.file}.swf10.swf" />
    <delete file="${lzx.dir}/${masterSpriteFile}" />
    <echo message="Property app.file set to ${app.file}" />
    <delete dir="${build.dir}" />
    <delete dir="${release.dir}" />
  </target>

  <target name="init" depends="clean"
          description="Create all directories for the build process.">
    <mkdir dir="${temp.dir}" />
    <mkdir dir="${temp.dir}/lzxcompile" />
    <mkdir dir="${temp.dir}/lzdeploy" />
    <mkdir dir="${build.dir}" />
    <mkdir dir="${release.dir}" />
  </target>

  <target name="build" depends="init,compile-lzx"
          description="Compile Java and LZX source (SWF10 and DHTML), and copy the versions into the release folder.">
  </target>

  <!-- Copy LZX, JSP and other text files into folder ${temp.dir}.
       We don't want to pollute the source folder with files generated
       during compilation. -->
  <target name="copy-files-temp" depends="init">
    <echo message="Copying files from ${lzx.dir} to ${temp.dir}/lzxcompile" />
    <copy todir="${temp.dir}/lzxcompile">
      <fileset dir="${lzx.dir}" casesensitive="no">
        <!-- Include any file type here you want to package into the
             deployed application. -->
        <include name="**/*.lzx" />
        <include name="**/*.xml" />
        <include name="**/*.jsp" />
        <include name="**/*.html" />
        <include name="**/*.js" />
        <include name="**/*.css" />
        <include name="**/*.gif" />
        <include name="**/*.jpg" />
        <include name="**/*.mp3" />
        <include name="**/*.pdf" />
        <include name="**/*.png" />
        <include name="**/*.swf" />
        <include name="**/*.ttf" />
      </fileset>
    </copy>
  </target>

  <!-- Compile the LZX code for both the DHTML and SWF10 runtime -->
  <target name="compile-lzx" depends="init,copy-files-temp" >
    <echo message="Compiling LZX app for SWF10 and DHTML runtime (SOLO)"/>
    <script language="javascript">
      var lzxFile = olApp.getProperty("app.file");
      var timestamp = olApp.getProperty("build.timestamp");
      var fileNoending = lzxFile.substr(0,lzxFile.indexOf(".lzx"));
      olApp.setProperty("app.file.timestamp",
      fileNoending + "." + timestamp + ".lzx");
    </script>
    <move file="${temp.dir}/lzxcompile/${app.file}"
          tofile="${temp.dir}/lzxcompile/${app.file.timestamp}" />
    <!-- SWF10 with Laszlo Debugger enabled -->
    <antcall target="_solo-compile-file">
      <param name="file" value="${temp.dir}/lzxcompile/${app.file.timestamp}" />
      <param name="runtime" value="swf10" />
      <param name="debug" value="--debug"/>
      <param name="output" value="${temp.dir}/lzdeploy/swf10-debug.zip" />
    </antcall>
    <antcall target="_unzip-lzdeploy-package">
      <param name="output" value="${temp.dir}/lzdeploy/swf10-debug.zip" />
      <param name="targetFolder" value="${temp.dir}/lzdeploy/swf10-debug" />
    </antcall>
    <!-- FIX: lzdeploy bug workaround
         The SWF10 file is currently not added to the ZIP file, need to
         copy it over -->
    <copy file="${temp.dir}/lzxcompile/${app.file.timestamp}.swf10.swf"
          tofile="${temp.dir}/lzdeploy/swf10-debug/${app.file.timestamp}.swf10.swf" />

    <!-- DHTML with Laszlo Debugger enabled -->
    <antcall target="_solo-compile-file" >
      <param name="file" value="${temp.dir}/lzxcompile/${app.file.timestamp}" />
      <param name="runtime" value="dhtml" />
      <param name="debug" value="--debug"/>
      <param name="output" value="${temp.dir}/lzdeploy/dhtml-debug.zip" />
    </antcall>
    <antcall target="_unzip-lzdeploy-package">
      <param name="output" value="${temp.dir}/lzdeploy/dhtml-debug.zip" />
      <param name="targetFolder" value="${temp.dir}/lzdeploy/dhtml-debug" />
    </antcall>

    <!-- DHTML without Laszlo Debugger -->
    <antcall target="_solo-compile-file" >
      <param name="file" value="${temp.dir}/lzxcompile/${app.file.timestamp}" />
      <param name="runtime" value="dhtml" />
      <param name="output" value="${temp.dir}/lzdeploy/dhtml.zip" />
    </antcall>
    <antcall target="_unzip-lzdeploy-package">
      <param name="output" value="${temp.dir}/lzdeploy/dhtml.zip" />
      <param name="targetFolder" value="${temp.dir}/lzdeploy/dhtml" />
    </antcall>

    <!-- Copy the files for each app version - including dependencies - 
         into the release folder. -->
    <copy todir="${release.dir}/swf10-debug">
      <fileset dir="${temp.dir}/lzdeploy/swf10-debug/">
        <include name="**/*.*" />
      </fileset>
    </copy>
    <copy todir="${release.dir}/dhtml">
      <fileset dir="${temp.dir}/lzdeploy/dhtml/">
        <exclude name="${app.file.timestamp}.swf10.swf" />
        <include name="**/*.*" />
      </fileset>
    </copy>
    <copy todir="${release.dir}/dhtml-debug">
      <fileset dir="${temp.dir}/lzdeploy/dhtml-debug/">
        <exclude name="${app.file.timestamp}.swf10.swf" />
        <include name="**/*.*" />
      </fileset>
    </copy>
  </target>

  <!-- Compile the file and create the ZIP package with resources -->
  <target name="_solo-compile-file">
    <echo message="Creating application package for ${file}"/>
    <echo message="Using LPS_HOME: ${lps.home}"/>
    <echo message="args: --runtime=${runtime}  ${debug} --output ${output}"/>
    <java classpathref="laszlo.compiler.classpath"
          classname="org.openlaszlo.utils.DeployMain"
          fork="yes"
          failonerror="true">
      <jvmarg value="-Xmx1024M"/>
      <jvmarg value="-DLPS_HOME=${lps.home}"/>
      <arg line="--runtime=${runtime} --output ${output} ${debug} ${file}"/>
    </java>
  </target>

  <!-- Unzip the OpenLaszlo deployment ZIP file -->
  <target name="_unzip-lzdeploy-package">
    <echo message="Unzipping lzdeploy package ${output}" />
    <!--unzip src="${zip.target.file}" dest="${temp.zip.extracted}"-->
    <unzip src="${output}" dest="${targetFolder}">
      <patternset>
        <exclude name="widget-icon.png" />
        <exclude name="config.xml" />
        <!-- exclude name="index.html" /-->
        <exclude name="**/*.lzx" />
        <exclude name="**/*.css" />
      </patternset>
    </unzip>
  </target>

</project> 
```

将构建脚本放入名为 testapp 的 $LPS_HOME（OpenLaszlo 服务器主目录）的子文件夹中。创建一个子目录 LZX，其中包含一个名为 testapp.lzx 的 OpenLaszlo 画布应用程序。我已将图像资源添加到子文件夹资源中，以测试资源是否正确打包到 SOLO 编译的应用程序文件夹中。

```
$LPS_HOME
└── testapp
    ├── build.xml
    └── lzx
        ├── resources
        │   └── Winnie-the-Pooh.jpg
        └── testapp.lzx 
```

进入 $LPS_HOME，然后运行“ant build”。构建过程应该运行，并且您应该具有生成的文件夹结构：

```
testapp
├── build
│   └── tmp
│       ├── lzdeploy (more files)
│       └── lzxcompile (more files)
├── build.xml
├── lzx
│   ├── resources
│   │   └── Winnie-the-Pooh.jpg
│   └── testapp.lzx
└── release
    ├── dhtml
    │   ├── index.html
    │   ├── lps (more files)
    │   ├── resources
    │   │   └── Winnie-the-Pooh.jpg
    │   ├── testapp.20120810-125652.lzx.js
    │   └── testapp.20120810-125652.sprite.png
    ├── dhtml-debug
    │   ├── index.html
    │   ├── lps (more files)
    │   ├── resources
    │   │   └── Winnie-the-Pooh.jpg
    │   ├── testapp.20120810-125652.lzx.js
    │   └── testapp.20120810-125652.sprite.png
    └── swf10-debug
        ├── index.html
        └── lps (more files) 
```

构建过程生成了三个版本的 OpenLaszlo 应用程序：带调试的 SWF、启用和不启用调试模式的 DHTML/HTML5。所有 JavaScript 和 SWF 文件都附有时间戳，这意味着不会从浏览器缓存中提取新版本的应用程序。如果将浏览器指向发布文件夹，单击三个文件夹中的任何一个（swf10-debug、dhtml、dhtml-debug）应该会打开 SOLO 编译的应用程序。

添加您自己的脚本以将版本上传到网络服务器，这应该不难。

# objective-c - 无需输入管理员密码即可进行 Obj-c 代码签名？

> ID：11897894
> 
> 赞同：2
> 
> 时间：2012-08-10T08:21:48.670
> 
> 标签：objective-c, cocoa, nstask, codesign

是否可以通过可可“自动”协同设计捆绑包，而无需用户每次都输入他们的管理员用户名和密码？
如果有某种方法可以实现这一点，那么将不胜感激某种类型的工作示例。这是我目前正在使用的代码，它在执行时要求管理员积分：

```
- (void)codeSignature:(NSData *)privateKey {

    NSString* signSomething    = @"file";
    NSString* homeDir     = [NSHomeDirectory() stringByAppendingPathComponent:@"/Users/Rufote"];

    NSString* homePath = [homeDir stringByAppendingPathComponent:signSomething];

    NSTask *task;
    task = [[NSTask alloc] init];
    [task setLaunchPath: @"/usr/bin/codesign"];

    NSArray *args;
    args = [NSArray arrayWithObjects: @"-s", @"certificate", @"-vvvv", @"-f", homePath, nil];
    [task setArguments: args];

    NSPipe *pipe;
    pipe = [NSPipe pipe];
    [task setStandardOutput: pipe];

    NSFileHandle *file;
    file = [pipe fileHandleForReading];

    [task launch];

    NSData *data;
    data = [file readDataToEndOfFile];

    NSString *string;
    string = [[NSString alloc] initWithData: data encoding: NSUTF8StringEncoding];

    [string release];
    [task release];

    return;

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T23:49:53.067

在您的系统钥匙串上，您会发现与您的代码签名相关的 3 件事： - 您的证书 - 您的私钥（与您的证书同名） - 您的公钥（与您的证书同名）

如果你双击你的钥匙，在访问控制上，你*可以*选择“允许所有应用程序访问这个项目”。那么您将不必再输入管理员密码来进行代码签名，**但要注意安全风险**！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:18:55.470

无法访问 Keychain 的数据。

但是，既然您想对您的 Bundle 进行代码设计，那么您可以使用[xcodebuild](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/xcodebuild.1.html)和[xcrun](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcrun.1.html)命令编写 Apple/Shell 脚本，这将有助于自动化您的代码设计过程。

# apache - htaccess 中的多个 RewriteRule

> ID：11897895
> 
> 赞同：2
> 
> 时间：2012-08-10T08:21:49.273
> 
> 标签：apache, .htaccess, mod-rewrite

我是 PHP 和 Apache 的初学者。我正在尝试对我的网站使用 URL 重写，它可以具有以下 URI。

```
1\. http://localhost:8080/home
2\. http://localhost:8080/dell 
```

对于第一个 URI，有可用的**home.php**文件，我使用以下重写规则编辑了 .htaccess 文件。

```
RewriteRule ^([^\.]+)$ $1.php [NC] 
```

第二个 URI 是动态的 - 意味着没有可用于处理请求的**dell.php 。**所以我在 RewriteCond 之后写了。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ list.php?page=$1 
```

所以总的来说，我的 .htaccess 文件是

```
Options +FollowSymLinks
RewriteEngine on

RewriteRule ^([^\.]+)$ $1.php [NC] [N]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ list.php?page=$1 
```

因此，当我请求*localhost:8080/home*时， home.php 得到了适当的响应，但是当我请求*localhost:8080/dell*时，响应了一个错误

> “在此服务器上找不到请求的 URL /dell.php。”

我认为只有第一个 RewriteRule 优先，第二个甚至不被 Apache 服务器读取。更改顺序也不起作用。我的问题是我应该使用什么 RewriteRule(s) 可以在这两种情况下工作 - PHP 文件存在和不存在？

感谢您的意见和指导。

里特什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:29:08.507

在尝试重写*之前*，您需要先对 .php 进行先发制人的检查`%{REQUEST_FILENAME}`，以查看它是否存在，否则像**戴尔**这样的 URI将被盲目重写：

 ***```
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^([^\.]+)$ $1.php [L] 
```***

# xml - 使用 XQuery 将十进制 xml 转换为带有 2 个小数点的十进制

> ID：11897904
> 
> 赞同：3
> 
> 时间：2012-08-10T08:22:42.830
> 
> 标签：xml, xquery

我是 xml 和 XQuery 的新手，我对转换数字有疑问。

我有使用 Stylus Studio 转换器将其转换为 xml 的平面文件。然后我使用 XQuery 来提取我需要的各种表。

问题之一是货币输入数据。

平面文件数据：00004700000 这是 47000 美元
（在转换器中，源定义为字符串，目标定义为十进制）

在 XQuery 中，我可以将数字 00004700000 除以 100，但最终得到 47000。

我想要的是输出为 47000.00，这样我就可以用 2 个小数点显示它。

值 000038715 除以 100 得到 387.15 工作正常。

这就是我在 XQuery 中所做的：

```
<CREDIT_LIMIT>
{$cust/CREDIT_LIMIT div 100}
</CREDIT_LIMIT> 
```

有没有办法在 XQuery 的输出中获得 .00？

非常感谢。普拉文

PS不太了解xslt！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:19:31.483

你有这个功能格式编号：

```
<CREDIT_LIMIT>
{format-number($cust/CREDIT_LIMIT div 100,".00")}
</CREDIT_LIMIT> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:15:41.857

**使用**：

```
<CREDIT_LIMIT>
  {$x idiv 100 }.{$x mod 100 idiv 10}{$x mod 10}
</CREDIT_LIMIT> 
```

其中`$x`是以所需十进制格式表示的数字。

# batch-file - 我如何运行下面的脚本

> ID：11897914
> 
> 赞同：-1
> 
> 时间：2012-08-10T08:23:35.123
> 
> 标签：batch-file

```
@echo off
setlocal enabledelayedexpansion
rem initialize all variables
set counter=1
set groupnumber=1
rem change groupcount value if you want a different number of files per zip
set groupcount=3
set zipfilenamePrefix=archive
rem start looping over...
for %%f in (*) do (
    if not "%%f"=="%~nx0" (
        set fileList=!fileList! %%f
        set /a reminder=!counter!%%!groupcount!
        if !reminder! equ 0 (
            set zipfilename=archive!groupnumber!.tz
            echo Zipping files: !fileList! into !zipfilename!
            rem your zipping utility goes here: input = !fileList! and output = !zipfilename!
            set /a groupnumber=!groupnumber!+1
            set fileList=
        )
        set /a counter=counter+1
    )
)
rem there could be some left over files - last group may be less than 3 files
if !reminder! equ 0 (
    set zipfilename=archive!groupnumber!.tz
    echo Zipping into files: !fileList! !zipfilename!
    rem your zipping utility goes here: input = !fileList! and output = !zipfilename!
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:41:42.913

这是使用 7-Zip 创建 ZIP 文件的示例。应用了修复并添加了更多配置变量。

它将创建多个 ZIP 文件，每个 ZIP 中最多 100 个文件（可通过`groupcount`变量配置）并将 zip 文件保存为*MyBackup##.zip*，其中*##*是序列号。

单独键入`MAKEZIPS`没有任何参数以显示用法。将文件夹中的所有文件（不包括子文件夹）归档`C:\My Data`并将 ZIP 文件放置到的示例`D:\My Backup`：

```
MAKEZIPS "C:\My Data" "D:\My Backup" 
```

注意：请勿将 ZIP 文件与源文件夹放在同一文件夹中，否则可能会导致死循环。

如果您使用其他存档程序（例如：*WinRAR*），您将不得不更改程序路径和最可能的参数。

`MAKEZIPS.BAT`：

```
@echo off
setlocal enabledelayedexpansion
rem initialize all variables
rem ***config start***
rem change groupcount value if you want a different number of files per zip
set groupcount=100
rem change zipfilenamePrefix value if you want a different base file name
set zipfilenamePrefix=MyBackup
rem change zipfileExt value if you are creating other archive type
set zipfileExt=zip
rem ***config end***
set counter=0
set groupnumber=1
if "%~2"=="" (
  echo Usage: MAKEZIPS {Source Folder} {Target Folder}
  goto :eof
)
if not exist "%~1\nul" (
  echo Source folder not found.
  goto :eof
)
if not exist "%~2\nul" (
  echo Target folder not found.
  goto :eof
)
pushd %2
rem start looping over...
for %%f in (*) do (
    if not "%%f"=="%~nx0" (
        set fileList=!fileList! "%%f"
        set /a counter=!counter!+1
        set /a reminder=!counter!%%!groupcount!
        if !reminder! equ 0 (
            set zipfilename="%~1\%zipfilenamePrefix%!groupnumber!.%zipfileExt%"
            echo Zipping files: !fileList! into !zipfilename!
            rem your zipping utility goes here: input = !fileList! and output = !zipfilename!
            "C:\Program Files\7-Zip\7z.exe" a !zipfilename! !fileList!
            if not exist !zipfilename! (
                echo ZIP creation failed.
                goto :eof
            )
            set /a groupnumber=!groupnumber!+1
            set fileList=
        )
    )
)
rem there could be some left over files - last group may be less than 3 files
if %reminder% gtr 0 (
    set zipfilename="%~1\%zipfilenamePrefix%%groupnumber%.%zipfileExt%"
    echo Zipping into files: %fileList% %zipfilename%
    rem your zipping utility goes here: input = %fileList% and output = %zipfilename%
    "C:\Program Files\7-Zip\7z.exe" a %zipfilename% %fileList%
    if not exist %zipfilename% echo ZIP creation failed.
)
popd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:54:24.947

上面的代码没有做任何事情。

首先，您需要按照评论所说的去做（添加存档实用程序）。然后将代码保存到`.bat`or`.cmd`文件并执行。

# jquery - jquery中的事件冒泡问题

> ID：11897915
> 
> 赞同：1
> 
> 时间：2012-08-10T08:23:35.717
> 
> 标签：jquery, event-bubbling

我正在使用如下所示的事件冒泡`h3`在鼠标悬停时调整标记文本的大小，并在鼠标未悬停在文本上时恢复到原始大小。但它不起作用。

```
$('body').hover(function (event) {
    if ($(event.target).is('h3')) {
        $(event.target).hover(function () {
            $(this).css("font-size", "40px");
        },
        function () {
            $(this).css("font-size", "40px");
        });
    }
}); 
```

我是新手。所以可能有一个愚蠢的错误。请指出。提前谢谢各位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:25:56.467

您只需要将事件应用于`h3`元素本身。尝试这个：

```
$("h3").hover(function() {
    $(this).css("font-size", "40px");
},
function() {
     $(this).css("font-size", "20px");
}); 
```

此外，最好使用 CSS 类来修改字体的大小，因为它可以更好地分离关注点：

```
$("h3").hover(function() {
    $(this).addClass("big-text");
},
function() {
     $(this).removeClass("big-text");
});

// CSS
h3 { font-size: 12px; }
.big-text { font-size: 40px; } 
```

**更新**

由于`h3`元素是动态加载的，因此您需要使用`on`委托。尝试这个：

```
$("body").on("hover", "h3", function(e) {
    if (e.type == "mouseenter") {
       $(this).css("font-size", "40px");
    }
    else { // mouseleave
        $(this).css("font-size", "20px"); 
    }
}); 
```

我在`body`这里用作主要选择器，但您应该使用最接近`h3`页面加载时可用的元素的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:30:55.877

尝试这个：

```
$(document).on('mouseenter', 'h3', function(event) {
       $(this).css("font-size", "40px");
})

$(document).on('mouseleave', 'h3', function(event) {
       $(this).css("font-size", "20px");
}) 
```

或者：

```
$(document).on({
  mouseenter: function() {
       $(this).addClass('aClass')
  },
  mouseleave: function() {
       $(this).removeClass('aClass')
}, 'h3') 
```

# php - PHP给出错误的值或根本没有

> ID：11897916
> 
> 赞同：0
> 
> 时间：2012-08-10T08:23:39.760
> 
> 标签：php

好的，所以我遇到了一个奇怪的问题：在获取我的数据库的值时，我得到了一些行，而有些则根本没有。我正在使用 od javascript 和 PHP 的组合来获取值。

```
function fun(){     
        <?php
            $result = mysql_query("SELECT * FROM `pitanja` WHERE `rBr` LIKE '$rb';",$connection);
            $row = mysql_fetch_array($result);
            $pi=$row['pit'];
            $odgo=$row['odg'];
            $opt1=$row['opt1'];
            $opt2=$row['opt2'];
            $opt3=$row['opt3'];
            $bod=$row['point'];
        ?> 
```

这样我就得到了价值观。我的数据库中有 7 个输入，前 2 个我得到了我应该得到的，然后接下来的 2 个我没有，之后的一个我做，其余的我没有。我想我得到了 $odgo 和 $opt 值是 int 的值。在我的数据库中的其余行中，这些值是文本，我无法将它们取出。我的功能不会启动，也没有任何反应。

```
$hig=$hig+($bod*10);
mysql_query("UPDATE `gagq`.`user` SET `highscore` = '$hig' WHERE `user`.`id` ='$uid';"); 
```

此外，这每次都会给出 6400 的结果，即使`$hig`初始值为 0 和`$bod`100。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-25T14:41:11.043

You need to add a while loop:

```
while($row = mysqli_fetch_array($result)) {

            $pi=$row['pit'];
            $odgo=$row['odg'];
            $opt1=$row['opt1'];
            $opt2=$row['opt2'];
            $opt3=$row['opt3'];
            $bod=$row['point'];
} 
```

# sorting - SOLR查询过滤结果中的自定义排序？

> ID：11897919
> 
> 赞同：1
> 
> 时间：2012-08-10T08:24:02.643
> 
> 标签：sorting, solr, filter

在 Solr 索引记录中，假设我有这个示例记录（例如 JSON）：

```
{
    "title":"Innovation Life and Strategy",
    "author":"Sarah Howard",
},
{
    "title":"Simple Life", <--- This will be ignored
    "author":"W. David",
},
{
    "title":"Today's Innovations",
    "author":"Michael Wayne", <--- This Author will be listed at the top
},
{
    "title":"The Innovation Records",
    "author":"Tommy Wright",
},
etc .. 
```

如何进行 Solr 查询以：

*   `innovation`在`title`字段中过滤
    （所以我们在那里有 3 条记录）
*   然后，通过将**author:****放在顶部****对结果进行排序****`Wayne`**

所以最终的结果应该是：

```
{
    "title":"Today's Innovations",
    "author":"Michael Wayne",
},
{
    "title":"Innovation Life and Strategy",
    "author":"Sarah Howard",
},
{
    "title":"The Innovation Records",
    "author":"Tommy Chen",
}, 
```

我只进入第一步，`fq=title:*Innovation*`

但我不知道第二步的查询（自定义排序）。
请问我怎样才能得到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T10:01:26.923

您可以使用字段提升而不是排序。查看[http://wiki.apache.org/solr/SolrRelevancyFAQ](http://wiki.apache.org/solr/SolrRelevancyFAQ)了解详细信息。

你可能需要类似的东西：

```
q=title:*&bq=author:Wayne^10&fq=title:*Innovation* 
```

这会产生标题中包含“创新”的所有文档，匹配“Wayne”的文档得分更高。

确保使用 WhitespaceTokenizer（而不是 KeywordTokenizer）对“作者”进行索引，否则您将无法使用分隔词进行搜索（请参阅[http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:56:14.730

在这种情况下，我认为这是不可能的，因为作者是一个多值字段，因为有两个值：名字和姓氏。因此，如果您想按姓氏排序，则必须将此字段拆分为 2 个字段：author_first_name、author_surname

您可以在索引时间拆分名称，例如使用数据导入处理程序。

另一种解决方案是在 java 中编写自己的排序算法。

关键（在每种情况下）是要找到surename 是什么，因为并非每个名字都只包含两个名字，例如`Docotor Tommy Chen`或`kim jong il`- 也存在由两个名字组成的姓氏（尤其是在亚洲）。

这是真正的问题，我想。

# visual-studio - 是否可以在其他人都使用 VS 2010 的大型项目中使用 VS2012

> ID：11897920
> 
> 赞同：1
> 
> 时间：2012-08-10T08:24:04.423
> 
> 标签：visual-studio

这听起来像是一个奇怪的问题，但我在一个相当大的项目上工作，有一群人都提交到同一个存储库，我们都使用 VS2010。
老实说，我厌倦了它慢得可怜（“等待内部操作......”），所以我正在考虑给自己买 VS2012。
但问题是，就像我说的，我是大项目的一部分，其他人不会更新到 VS2012，因为我认为他们不太关心，也不想花钱升级他们的工作场所软件. 此外，我认为公司不会因为各种原因而乐于购买新的 Visual Studio。那么我是否可以在 VS 2012 中进行开发（C++、C++ CLI、C#）并轻松与他人集成。我将无法使用新的东西（例如 C++11），但是如果我只使用 VS2010 中的语言东西可以做到吗？

PS请不要“聘请猎头”评论:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:28:12.520

我想会太难了。VS2010 中现在已在 VS2012 中弃用的东西呢？

编辑：大型团队需要数月的计划才能迁移到较新版本的 Visual Studio。我从事一个大型项目，只是为了好玩，其中一个人尝试在 VS2012 中编译我们的一个解决方案（当前为 VS2008）。他面临 82k+ 编译错误（显然修复一个可以解决负载，但仍然）。

因此，我认为拥有不同版本的人将是一场噩梦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T17:35:48.550

我在工作中使用 VS2012 RC，我的同事使用带有 SP1（主要是 C# 和 C++）的 VS2010。我必须确保使用 .NET4，但只要您继续使用 .NET4，我就不会遇到有人为同一个项目同时开发这两个版本的问题。如果他们没有 VS2010 的服务包 1，您可能会遇到问题。我在 2012 年制作了项目，并在 2010 年打开了它，反之亦然，没有问题（只要它设置为 .NET4）。还！我在同一台机器上安装了 2010 和 2012，所以这可能会影响它为什么对我如此有效的一些原因。

使用版本控制，我注意到VS2012会更新项目文件中的一些标签为VS2012，然后2010将其更改为2010，但这并没有造成任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T08:28:33.517

我认为通过升级到 VS2012 而不是 VS2010，您不会获得太多的性能提升。如果这是您升级的主要目的，我认为这不值得麻烦。VS2012 也无法打开以前的版本而不将其转换为当前版本，因此您将与其他开发人员不断发生冲突。在继续之前，您需要仔细权衡升级的好处。如果 VS2012 的功能肯定会让您的整个开发团队受益，那么也许它是值得的。

# jquery - 用于呈现从 API 返回的数据的良好 JQuery 表

> ID：11897923
> 
> 赞同：0
> 
> 时间：2012-08-10T08:24:23.953
> 
> 标签：jquery, asp.net-mvc-4, asp.net-web-api

我有一个使用新的 ASP.NET Web API 的 ASP.NET MVC 4 应用程序。我有一个从我的数据库中检索查询列表的方法。问题是我现在不确定如何处理这些数据。

我想让它呈现在一个漂亮的表格中，该表格可过滤、可排序、可搜索、分页等。因为返回了大约 40000 个查询。有什么建议以及我将如何实施它？谢谢。

## 编辑

这是我的查询模型：

```
public int EnquiryId { get; set; }
public string CustomerAccountNumber { get; set; }
public string Creator { get; set; }
public string Owner { get; set; }
public DateTime EnquiryDate { get; set; }
public int StatusId { get; set; }
public virtual Status EnquiryStatus { get; set; }
public virtual ICollection<EnquiryLines> Lines { get; set; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:28:25.343

尝试使用[datatable](http://datatables.net/)或[jqgrid](http://www.trirand.com/blog/?page_id=6)。这些是与 jquery lib 一起工作的插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T16:46:24.663

我建议您查看[Flexigrid](http://flexigrid.info/)。这是一个开源的 jQuery 网格视图，我认为它具有您正在寻找的所有功能。以下是一些关键功能（来自网站）：

*   可调整大小的列
*   可调整高度和宽度
*   可排序的列标题
*   很酷的主题
*   可以转换普通表
*   能够连接到 ajax 数据源（XML 和 JSON[新]）
*   寻呼
*   显示/隐藏列
*   工具栏（新）
*   搜索（新）
*   可访问的 API

我认为这是一个非常棒的控件，而且非常易于使用。我想您会对它为您提供的灵活性感到惊喜。（我会为您发布一个完整的示例，但我是新手，不知道该怎么做。）

# jquery - Ajax 请求未触发

> ID：11897924
> 
> 赞同：0
> 
> 时间：2012-08-10T08:24:27.840
> 
> 标签：jquery, ajax

这让我发疯。我正在开发的网站上有此代码：http: [//jsfiddle.net/agNQt/](http://jsfiddle.net/agNQt/)

在 jsfiddle 上的 firebug 中，它会触发 ajax，但显然找不到路径。

在我的开发中，它不会在 firebug 中显示任何内容，如果我更改路径使其不存在，我会收到此错误：

> “网络错误：404 未找到 - /includes/ajax1.php”

通常它会显示发布请求并返回输出。但我什么也得不到。

在我发疯之前有什么建议吗？

谢谢。

-编辑-

安东尼格里斯特似乎是最接近的。我将其更改为完整路径，现在它发送请求并返回值。昨天它在没有完整路径的情况下工作！疯狂的。任何建议为什么？使用完整路径肯定不好？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:48:52.990

您必须像这样在 JS 中获取您的域，然后将其与 ajax 一起使用：

[jsFiddle 示例](http://jsfiddle.net/C3L3w/1/)

```
$(document).ready(function() {

   $("#typedrop").live('change', function() {
      var output = $(this).val();
      var querystring = "option=" + output;
      var mysite = document.domain;
         $.ajax({
                    type: "POST",
                    data: querystring,
                    url: mysite + "/includes/ajax.php",
                    success: function(){

                    }

         });
         return false;        
    });

});     ​ 
```

# android - 谷歌播放中的索引

> ID：11897927
> 
> 赞同：0
> 
> 时间：2012-08-10T08:24:40.503
> 
> 标签：android, google-play

有没有办法在 google play 中为您的应用程序设置标签。我已经创建了一个应用程序，但我可以查看它的唯一方法是搜索它的包名称。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:29:32.723

索引需要时间。你不能标记你的应用程序。但您可以向应用程序提供相关描述、促销文本。

# wpf - 如果用户没有移动滚动条，则自动滚动文本框

> ID：11897937
> 
> 赞同：0
> 
> 时间：2012-08-10T08:25:37.943
> 
> 标签：wpf, textbox, autoscroll

是否可以让 WPF-TextBox 自动滚动但在移动 ScrollBar 时停止该行为。当用户滚动结束时，TextBox 应再次自动滚动以结束文本更改。

```
textBox1.ScrollToEnd(); 
```

只要用户不移动 ScrollBar，这将起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:39:46.117

我重新创建了我认为您的设置中的内容：

```
<StackPanel>
    <ScrollViewer Height="50" x:Name="_scroll">
        <TextBox x:Name="_text" Width="50" Text="Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."  TextWrapping="Wrap"/>
    </ScrollViewer>
    <Button Click="Button_Click" Content="Add Text"/>
</StackPanel> 
```

我假设您有一些事件在我的设置中编辑此文本框，它是一个按钮。及其点击处理程序：

```
private void Button_Click(object sender, RoutedEventArgs e)
    {
        var shouldScroll = _scroll.VerticalOffset == _scroll.ScrollableHeight;

        _text.Text += "AAA ";

        if (shouldScroll)
        {
            _scroll.ScrollToEnd();
        }
    } 
```

仅当滚动条位于底部时，这将在文本编辑后自动滚动到结束。

编辑

对于更清洁的解决方案，您可以使用行为：

```
 public class AutoScrollingBehavior : Behavior<ScrollViewer>
{
    public object UpdateTrigger
    {
        get { return (object)GetValue(UpdateTriggerProperty); }
        set { SetValue(UpdateTriggerProperty, value); }
    }

    public static readonly DependencyProperty UpdateTriggerProperty =
        DependencyProperty.Register("UpdateTrigger", typeof(object), typeof(AutoScrollingBehavior), new UIPropertyMetadata(Update));

    private bool IsScrolledDown
    {
        get { return (bool)GetValue(IsScrolledDownProperty); }
        set { SetValue(IsScrolledDownProperty, value); }
    }

    public static readonly DependencyProperty IsScrolledDownProperty =
        DependencyProperty.Register("IsScrolledDown", typeof(bool), typeof(AutoScrollingBehavior), new UIPropertyMetadata(false));

    private static void Update(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        if ((bool)d.GetValue(IsScrolledDownProperty))
        {
            var scroll = ((AutoScrollingBehavior)d).AssociatedObject;
            scroll.ScrollToEnd();
        }
    }

    protected override void OnAttached()
    {
        AssociatedObject.Loaded += new RoutedEventHandler(AssociatedObject_Loaded);
        AssociatedObject.ScrollChanged += new ScrollChangedEventHandler(AssociatedObject_ScrollChanged);
    }

    private void AssociatedObject_ScrollChanged(object sender, ScrollChangedEventArgs e)
    {
        IsScrolledDown = AssociatedObject.VerticalOffset == AssociatedObject.ScrollableHeight;
    }

    private void AssociatedObject_Loaded(object sender, RoutedEventArgs e)
    {
        IsScrolledDown = AssociatedObject.VerticalOffset == AssociatedObject.ScrollableHeight;
    }
} 
```

和 xml：

```
<StackPanel>
    <ScrollViewer Height="50" >
        <e:Interaction.Behaviors>
            <local:AutoScrollingBehavior UpdateTrigger="{Binding ElementName=_text,Path=Text}" />
        </e:Interaction.Behaviors>
        <TextBox x:Name="_text" Width="50" Text="Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."  TextWrapping="Wrap"/>
</ScrollViewer>
    <Button Click="Button_Click" Content="Add Text"/>
</StackPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:13:57.997

我找到了一种奇怪的方法来做到这一点：

```
public class AutoScrollTextBox : TextBox
{
    ScrollViewer sv;
    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        if (Template != null)
        {
            sv = (ScrollViewer)Template.FindName("PART_ContentHost", this);
        }
    }

    protected override void OnTextChanged(TextChangedEventArgs e)
    {
        base.OnTextChanged(e);
        if (sv != null && sv.ScrollableHeight == sv.VerticalOffset)
        {
            this.ScrollToEnd();
        }
    }
} 
```

但是，如果 TextBox-Template 中 ScrollViewer 的名称发生更改，这将停止工作。

# asp.net - 破坏 pre_init 的母版页

> ID：11897938
> 
> 赞同：0
> 
> 时间：2012-08-10T08:25:46.123
> 
> 标签：asp.net, master-pages, page-lifecycle

我有一个（以前）工作正常的 aspx 页面

它由 aspx 中的一些简单控件组成-它们需要动态设置它们的值 aspx 中的一些用户控件需要将一些数据传递给它们一些通过中继器动态添加的用户控件..以及用户控件中的一些控件需要动态创建

它被设置为在 pre_init 事件中完成大部分工作 - 这样我就可以在页面和用户控件中创建动态控件，以便它们保持其视图状态。

因此：

```
Protected Sub Page_PreInit(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.PreInit
    paxID = Integer.Parse(Request.QueryString("g"))
    pax = New Pax(paxID)

    If Not IsPostBack Then
        ddlTitle.SelectedValue = pax.Title
        txtFirstname.Text = pax.FirstName
        txtSurname.Text = pax.Surname
        ddlGender.SelectedValue = pax.Gender.ToUpper()
        If (pax.DOB IsNot Nothing) Then
            txtDOB.Text = CType(pax.DOB, DateTime).ToString("dd/MM/yyyy")
        End If

        txtNationality.Text = pax.Nationality
        txtPassportNumber.Text = pax.PassportNumber

        If pax.Discount IsNot Nothing Then
            txtDiscount.Text = Math.Abs(pax.Discount.Price).ToString()
        End If
    End If
    LoadPaxData()
    RenderPageControls()

End Sub

Protected Sub RenderPageControls()

    ''work out how many weeks we are dealing with
    Dim weeks = Math.Floor(bk.nights / 7)
    If bk.nights Mod 7 <> 0 Then
        weeks += 1
    End If

    ''grab ALL the AVAILABILITY options for ALL weeks
    For ii = 1 To weeks
        Dim dt = DateAdd(DateInterval.Day, (ii - 1) * 7, theDate)
        allMHOptions.AddRange(AvailabilityOptionFactory.GetMainHolidayOptionAvailability(dt))
        allTravelOptions.AddRange(AvailabilityOptionFactory.GetTravelOptionAvailability(dt))
        allOptions.AddRange(AvailabilityOptionFactory.GetOptionAvailability(dt))
    Next

    allExtras = AvailabilityOptionFactory.GetExtrasAvailability(theDate)

    ''now all the booked options
    allBooked = Booked.BookedOptionFactory.LoadBookedOptions(pax.id)

    Dim tabContent = New Dictionary(Of String, Integer)
    ''WEEK tabs
    For i = 1 To weeks
        tabContent.Add(String.Format(divIdFormat, i.ToString()), i)
    Next

    ''bind the repeaters with the week data
    rptULTabs.DataSource = tabContent
    rptULTabs.DataBind()
    rptTabs.DataSource = tabContent
    rptTabs.DataBind()

    ''EXTRAS tab
    ucExtras.extraOptions = allExtras
    ucExtras.alreadyBooked = allBooked

    ''SUPPLEMENTS tab
    ucSupplements.p = pax

    ''TRAVEL tab
    ucTravel.travelOptions = allTravelOptions
    ucTravel.alreadyBooked = Booked.BookedOptionFactory.LoadTravelOptions(pax.RecNum, Nothing)
    ucTravel.outboundWeekStart = theDate
    ucTravel.returnWeekStart = DateAdd(DateInterval.Day, (weeks - 1) * 7, theDate)
        ucTravel.returnDate = depDate
End Sub 
```

loadpaxdetails 将一些额外的细节加载到 pax 对象上

在 RenderPageControls 中，它获取用户控件的位，而这些位又可以添加一些动态控件并在这些控件或任何静态控件上设置任何数据。

..

```
<div id="divTabs" runat="server">
    <ul id="ulTabs">
        <asp:Repeater runat="server" ID="rptULTabs">
            <ItemTemplate>
                <li><a href="#<%# DataBinder.Eval(Container.DataItem, "Key") %>">Week
                    <%#DataBinder.Eval(Container.DataItem, "Value")%>
                </a></li>
            </ItemTemplate>
        </asp:Repeater>
        <li><a href="#tabExtras">Extras</a></li>
        <li><a href="#tabRequirements">Requirements</a></li>
        <li><a href="#tabTravel">Travel</a></li>
    </ul>
    <asp:Repeater runat="server" ID="rptTabs">
        <ItemTemplate>
            <div id="<%# DataBinder.Eval(Container.DataItem, "Key") %>">
                <uc:WeekTab runat="server" ID="ucWeekTab" EnableViewState="true" />
            </div>
        </ItemTemplate>
    </asp:Repeater>
    <div id="tabExtras">
        <uc:ExtrasTab runat="server" ID="ucExtras" EnableViewState="true" />
    </div>
    <div id="tabRequirements">
        <uc:SupplementsTab runat="server" ID="ucSupplements" EnableViewState="true" />
    </div>
    <div id="tabTravel">
        <uc:TravelTab runat="server" ID="ucTravel" EnableViewState="true" />
    </div>
</div> 
```

现在这一切都很好，直到我决定将aspx放入母版页..

现在发生的事情是，aspx 中的静态控件似乎没有为 pre_init 及时创建，因此在尝试对其设置值时它会崩溃。除此之外，我也无法将用户控件添加到中继器，因为此时也没有设置

我很清楚这是一个生命周期问题，但不明白如何简单地将东西包装在母版页中可以完全搞砸所有事件。我不能简单地将 renderpagecontrols 调用放在页面加载中，因为这不会神奇地设置UC 回到 pre_init 并因此使用视图状态获取它们..？

谁能启发我？

谢谢

纳特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:57:32.717

`PreInit`不是控制操作的好地方，因为在这个阶段不能保证所有的控制都会被启动。事实上，当页面有主控时，它们不会被启动。这是因为`PreInit`在漏洞生命周期中唯一可以动态更改母版页的地方，当然，如果没有设置母版页，ASP.NET 引擎无法完全构建控件树。

这里对您的最佳建议是将您的逻辑移动到`Page_Init`处理`Page_Load`程序中。例如，所有属性设置和动态控件插入（我假设这就是方法`RenderPageControls`所做的）——事实上，所有你可以调用的*初始化*都应该放在`Page_Init`. 数据加载（大概是调用`LoadPaxData`）应该在`Page_Load`. 可以在[此处](http://msdn.microsoft.com/en-us/library/ms178472.aspx#lifecycle_events)找到有关在页面生命周期的哪个阶段推荐哪些操作的更多信息。

但是，如果您*非常*想在其中运行所有代码`Page_PreInit`（尽管我在代码段中看不到任何原因）-有一种解决方法。在处理程序的开头插入以下行：

```
MasterPage master = this.Master; 
```

这将使异常消失。这个技巧起作用的原因是对`Master`属性的调用触发了母版页的创建，其中包括为所有`asp:Content`控件生成内容。但仍然 - 这只是一般信息，绝对不是推荐的方式。

# android - ant 复制 android 项目-> 未编译'错误：错误：不允许字符串类型（在'layout_width' 处，值为'match_parent'）。'

> ID：11897944
> 
> 赞同：0
> 
> 时间：2012-08-10T08:26:25.297
> 
> 标签：android, eclipse, cordova, ant

我将 phonegap 应用程序拆分为基础部分、android 特定部分和 ios 特定部分。我编写了一个 ant 脚本来重新组装代码，具体取决于我要构建的平台。Ant 脚本复制 android 项目并将特定文件添加到 assets/www 目录

当我做一个

```
./android update project --target 1 --path /workspace/projectroot 
```

进而

```
ant debug 
```

从项目的根目录中，我收到以下错误

```
'error: Error: String types not allowed (at 'layout_width' with value 'match_parent'). '
BUILD FAILED
null returned: 1 
```

我在eclipse中打开新组装的项目，看到一个问题：android.jar和Android Dependencies不存在，与我的源项目进行比较。

那么我该如何解决这个问题呢？有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:44:56.013

你能用 id=1 (--target 1) 检查你有什么目标吗？打电话`android list targets`

很可能您使用了错误的 API 级别。在此处查看答案[Android NDK r4 san-angeles 问题](https://stackoverflow.com/questions/3000131/android-ndk-r4-san-angeles-problem)

# php - 如何显示所有数据库的记录号

> ID：11897946
> 
> 赞同：0
> 
> 时间：2012-08-10T08:26:35.757
> 
> 标签：php, mysql

我想循环（在 php 中）思想数据库以显示每个表的记录。

```
$retrun.=TableName." ".$RecordNumber 
```

我知道如何计算一个特定的表，但我不知道如何循环。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:31:03.990

有一个简单的解决方案

```
SELECT table_name, table_rows
FROM   INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA = '<your db>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:32:49.713

还有一个更简单的解决方案。

```
SELECT COUNT(*) FROM your_database
WHERE (whatever) 
```

# mysql - 为什么这个查询的行为不像我期望的那样？

> ID：11897948
> 
> 赞同：0
> 
> 时间：2012-08-10T08:26:42.423
> 
> 标签：mysql

有问题的查询是

```
SELECT MAX(Date) as max, MIN(Date) as min FROM 
table 
WHERE Id = 'id' 
ORDER BY Date DESC 
LIMIT 100 
```

我想要它做的是返回最近 100 条记录的最大和最小日期。它的作用是显示所有记录的最小值和最大值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:29:44.143

您必须*首先*选择您感兴趣的记录，*然后*从中选择`max()` 和`min()`。

```
SELECT max(Date) AS max,
       min(Date) AS min
  FROM ( SELECT *
           FROM t
          WHERE Id = 'id'
       ORDER BY Date DESC
          LIMIT 100) x; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T08:37:54.123

***不要忘记用反引号转义列。***

```
SELECT max(`date`) AS maxDate,
       min(`date`) AS minDate
FROM  ( 
         SELECT `date`
         FROM   myTable
         WHERE Id = 'id'
         ORDER BY `date` DESC
         LIMIT 100
      ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T08:29:18.277

```
select min(Date) as min, max(Date) as max from
(
     SELECT Date FROM your_table 
     WHERE Id = 'id' 
     ORDER BY Date DESC  
     LIMIT 100
) x 
```

# sql-server - 您如何在 SSMS 中查看来自 ntext 或 nvarchar(max) 的所有文本？

> ID：11897950
> 
> 赞同：236
> 
> 时间：2012-08-10T08:26:51.257
> 
> 标签：sql-server, sql-server-2008, tsql, ssms

如何在 SQL Server Management Studio 中查看 NTEXT 或 NVARCHAR(max) 中的所有文本？默认情况下，它似乎只返回前几百个字符（255 个？），但有时我只想快速查看整个字段，而无需编写程序来完成。即使 SSMS 2012 仍然存在这个问题 :(

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2015-03-11T19:44:10.793

我能够从 NVARCHAR(MAX) 列中获取全文（99,208 个字符），方法是仅选择（结果到网格）该列，然后右键单击它，然后将结果保存为 CSV 文件。要查看结果，请使用文本编辑器（不是 Excel）打开 CSV 文件。有趣的是，当我尝试运行相同的查询但启用了Results to File 时，输出被使用Results to Text 限制截断。

@MartinSmith 描述为对（当前）接受的答案的评论的解决方法对我不起作用（尝试查看完整的 XML 结果时出错，抱怨“'[' 字符，十六进制值 0x5B，不能包含在名称中”）。

* * *

## 回答 #2

> 赞同：182
> 
> 时间：2016-05-12T06:02:54.267

快速技巧-

```
SELECT CAST('<A><![CDATA[' + CAST(LogInfo as nvarchar(max)) + ']]></A>' AS xml)
FROM Logs
WHERE IDLog = 904862629 
```

* * *

## 回答 #3

> 赞同：115
> 
> 时间：2012-08-10T08:30:18.820

在较新版本的 SSMS 中，可以在**（查询/查询选项/结果/网格/检索的最大字符数）**菜单中进行配置：

[![在此处输入图像描述](../Images/f8cb04b18dec2195ef3fa79b2201bbfb.png)](https://i.stack.imgur.com/9ZiYl.png)

* * *

## 旧版本的 SSMS

[选项（查询结果/SQL Server/结果到网格页面）](http://msdn.microsoft.com/en-us/library/ms190078.aspx)

> > 要更改当前查询的选项，请单击“查询”菜单上的“查询选项”，或在 SQL Server 查询窗口中单击鼠标右键并选择“查询选项”。

...

> > **检索的最大字符**
> > 数 输入一个 1 到 65535 之间的数字以指定将在每个单元格中显示的最大字符数。

如您所见，最大值为 64k。默认值要小得多。

BTW [Results to Text](http://msdn.microsoft.com/en-us/library/ms178782)有更严重的限制：

> > **每列中显示的最大字符数**
> > 此值默认为 256。增加此值可显示更大的结果集而不会截断。最大值为 8,192。

* * *

## 回答 #4

> 赞同：59
> 
> 时间：2012-08-10T10:56:46.047

我已经为 SSMS 编写了一个插件，这个问题在那里得到了解决。您可以使用以下两种方式之一：

您可以使用“复制当前单元格 1:1”将原始单元格数据复制到剪贴板：

[http://www.ssmsboost.com/Features/ssms-add-in-copy-results-grid-cell-contents-line-with-breaks](http://www.ssmsboost.com/Features/ssms-add-in-copy-results-grid-cell-contents-line-with-breaks)![复制原始单元格内容](../Images/39d25f6149fd66ae726f0e47b6cb383e.png)

或者，或者，您可以使用“单元格可视化工具”功能在外部文本编辑器（记事本++或记事本）中打开单元格内容：[http ://www.ssmsboost.com/Features/ssms-add-in-results-grid-visualizers](http://www.ssmsboost.com/Features/ssms-add-in-results-grid-visualizers)

（功能允许在任何外部应用程序中打开字段的内容，所以如果您知道它是文本 - 您使用文本编辑器打开它。如果内容是带图片的二进制数据 - 您选择查看为图片。下面的示例显示打开图片):![SSMS 结果网格可视化工具](../Images/f761c55f03b240ccc2668ffb2b9fa1a9.png)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-07-23T11:37:20.967

**以 XML 形式返回数据**

```
SELECT CONVERT(XML, [Data]) AS [Value]
FROM [dbo].[FormData]
WHERE [UID] LIKE '{my-uid}' 
```

确保根据您期望的结果在 SSMS 选项窗口中设置合理的限制。 [![在此处输入图像描述](../Images/7bace17bfcf88664e15fab5e11665291.png)](https://i.stack.imgur.com/FlA0z.jpg)

如果您返回的文本不包含未编码的字符，这将起作用，`&`而不是`&amp;`那样会导致 XML 转换失败。

**使用 PowerShell 返回数据**

为此，您需要在运行命令的机器上安装[PowerShell SQL Server 模块。](https://docs.microsoft.com/en-us/sql/powershell/download-sql-server-ps-module?view=sql-server-2017)

如果您已全部设置好，请配置并运行以下脚本：

```
Invoke-Sqlcmd -Query "SELECT [Data] FROM [dbo].[FormData] WHERE [UID] LIKE '{my-uid}'" -ServerInstance "database-server-name" -Database "database-name" -Username "user" -Password "password" -MaxCharLength 10000000 | Out-File -filePath "C:\db_data.txt" 
```

确保将`-MaxCharLength`参数设置为适合您需要的值。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-09-10T13:58:55.790

我今天用这个方法成功了。它与其他答案类似，它也将内容转换为 XML，只是使用不同的方法。正如我没有看到`FOR XML PATH`答案中提到的那样，我想我会为了完整性添加它：

```
SELECT [COL_NVARCHAR_MAX]
  FROM [SOME_TABLE]
  FOR XML PATH(''), ROOT('ROOT') 
```

这将提供一个有效的 XML，其中包含嵌套在外部`<ROOT></ROOT>`元素中的所有行的内容。各个行的内容都将包含在一个元素中，在本示例中，该元素称为`<COL_NVARCHAR_MAX>`. 可以使用别名通过 更改其名称`AS`。

`&`像,`<`或类似的特殊字符`>`将被转换为它们各自的实体。因此，您可能必须转换`&lt;`，`&gt;`然后`&amp;`返回其原始字符，具体取决于您需要对结果执行的操作。

**编辑**

我刚刚意识到`CDATA`也可以指定使用`FOR XML`。不过我觉得有点麻烦。这会做到：

```
SELECT 1 as tag, 0 as parent, [COL_NVARCHAR_MAX] as [COL_NVARCHAR_MAX!1!!CDATA]
  FROM [SOME_TABLE]
  FOR XML EXPLICIT, ROOT('ROOT') 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-10-14T16:52:46.783

# PowerShell 替代品

这是一篇旧帖子，我通读了答案。尽管如此，我还是觉得输出未从 SSMS 更改的多行大文本字段有点太痛苦了。我最终为我的需要编写了一个小型 C# 程序，但我想它可能可以使用命令行来完成。事实证明，使用 PowerShell 很容易做到这一点。

首先[`SqlServer`](https://docs.microsoft.com/en-us/powershell/module/sqlserver/)从管理 PowerShell 安装模块。

```
Install-Module -Name SqlServer 
```

用于[`Invoke-Sqlcmd`](https://docs.microsoft.com/en-us/powershell/module/sqlserver/invoke-sqlcmd)运行您的查询：

```
$Rows = Invoke-Sqlcmd -Query "select BigColumn from SomeTable where Id = 123" `
    -MaxCharLength 2147483647 -ConnectionString $ConnectionString 
```

这将返回一个可以输出到控制台的行数组，如下所示：

```
$Rows[0].BigColumn 
```

或者输出到文件如下：

```
$Rows[0].BigColumn | Out-File -FilePath .\output.txt -Encoding UTF8 
```

结果是美丽的未截断文本写入文件以供查看/编辑。我确信有一个类似的命令可以将文本保存回 SQL Server，尽管这似乎是一个不同的问题。

**编辑：**事实证明@dvlsc 有一个答案，将这种方法描述为次要解决方案。我认为因为它被列为次要答案，这就是我最初错过它的原因。我将留下我的答案，重点是 PowerShell 方法，但至少想在应得的地方给予赞扬。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-01-28T23:44:03.400

如果您只需要查看它，我使用了这个：

```
print cast(dbo.f_functiondeliveringbigformattedtext(seed) as text) 
```

最终结果是我在 SMSS 的消息窗口中获得了换行符和所有内容。当然，它只允许一个单元格 - 如果你想从多行中做一个单元格，你可以这样做：

```
declare @T varchar(max)=''
select @T=@T
       + isnull(dbo.f_functiondeliveringbigformattedtext(x.a),'NOTHINGFOUND!')
       + replicate(char(13),4)
from x -- table containing multiple rows and a value in column a
print @T 
```

我用它来验证 SQL 代码生成的 JSON 字符串。否则太难读了！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-09-29T19:43:02.363

使用带有 sql server 插件的 Visual Studio 代码。对 json 超级有用

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-26T19:54:31.423

**备选方案 1**：右键单击以复制单元格并粘贴到文本编辑器中（希望支持 utf-8）

**备选方案 2**：右键单击并导出到 CSV 文件

**备选方案 3**：使用 SUBSTRING 函数可视化列的各个部分。例子：

> SELECT SUBSTRING(fileXml,2200,200) 从 mytable WHERE id=123456

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2018-10-24T19:33:21.347

快速查看大型 varchar/text 列的最简单方法：

```
declare @t varchar(max)

select @t = long_column from table

print @t 
```

# css-transitions - 触发 Javascript 警报的 CSS3 动画不起作用

> ID：11897954
> 
> 赞同：0
> 
> 时间：2012-08-10T08:27:08.080
> 
> 标签：css-transitions

我在下面找到了 JSFiddle 代码，当我进行精确复制并粘贴到 html 文档中时，它不起作用。我正在使用 Chrome。并且 Javascript 控制台说存在语法错误，但我什么也没看到。我不明白为什么这不起作用。

**JSFiddle（工作）**

[http://jsfiddle.net/jkUyT/3/](http://jsfiddle.net/jkUyT/3/)

**非工作复制和粘贴（当我将鼠标悬停在 Div 上时不会启动警报）**

```
<!DOCTYPE html>
<meta charset="UTF-8">
<title>fun</title>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js" charset="utf-8"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>

<a id="animationTest">Hover over me</a>​

<!--CSS-->
<style>
#animationTest {
            width: 150px;
            text-align: center;
            display: block;
            padding: 20px;
            background: #000;
            color: #fff;
            border-bottom: 10px solid red;
            cursor: pointer;
                    transition: border-bottom 0.5s linear; /* vendorless fallback */
                   -o-transition: border-bottom 0.5s linear; /* opera */
                -ms-transition: border-bottom 0.5s linear; /* IE 10 */
               -moz-transition: border-bottom 0.5s linear; /* Firefox */
            -webkit-transition: border-bottom 0.5s linear; /*safari and chrome */
        }

        #animationTest:hover {
            border-bottom: 10px solid blue;
        }​
</style>

<!--Javascript -->
<script>

var animationTest = document.getElementById('animationTest');

animationTest.addEventListener('webkitTransitionEnd', function(){
    alert("Finished animation (listener)!");
    console.log("Finished animation (listener)!");
});

$('#animationTest').bind("webkitTransitionEnd", function(){
    alert("Finished animation (bind)!");
    console.log("Finished animation (bind)!");
});

​
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:35:16.303

好的，发现你的问题，你之前的最后两行有无效字符

```
$('#animationTest').bind("webkitTransitionEnd", function(){
    alert("Finished animation (bind)!");
    console.log("Finished animation (bind)!");
});
-->HERE
​-->HERE 
```

所以删除这两行。

# sql - 用递增的数字更新满足条件的记录

> ID：11897964
> 
> 赞同：4
> 
> 时间：2012-08-10T08:28:06.310
> 
> 标签：sql, postgresql

我在 postgres 中有一张这样的表：

```
Id    Name    local_site_id    local_id
1     A       2                
2     B       2
3     C       1
4     D       2
5     E       1 
```

如何使用 SQL 查询将表更新为此：

```
Id    Name    local_site_id    local_id
1     A       2                1
2     B       2                2
3     C       1                
4     D       2                3
5     E       1 
```

现在，所有记录的 local_id 字段都是空的。我想使用从 1 开始的递增数字更新 local_id 值，仅适用于具有`local_site_id=2`是否可以使用 SQL 的行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T08:53:40.017

我相信这应该做你想做的事，否则请告诉我：

```
UPDATE table_name
SET    local_id = row
FROM
(
    SELECT *, 
           ROW_NUMBER() OVER (PARTITION BY local_site_id ORDER BY name) AS row
    FROM   table_name
    WHERE  local_site_id = 2
) AS Q
WHERE Q.id = table_name.id; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T08:55:45.263

`row_number()`这是窗口函数的典型用例。假设你的主表是 T，这个查询应该适用于 postgresql 8.4 或更新版本：

```
update T set local_id=s.rn 
from (select id,row_number() over(order by id) as rn from T where local_site_id=2) s
 where T.id=s.id; 
```

# node.js - 什么是 connect/expressjs 中的“签名”cookie？

> ID：11897965
> 
> 赞同：139
> 
> 时间：2012-08-10T08:28:07.033
> 
> 标签：node.js, cookies, express, connect

我试图弄清楚“签名cookie”实际上是什么。网上没有多少，如果我试试这个：

```
app.use(express.cookieParser('A secret')); 
```

但是仍然...... Cookies 在浏览器上仍然是 100% 正常的，我真的不知道这里的“签名”是什么（我有点希望在客户端上“看到”一些奇怪的东西，比如使用加密的数据像盐一样的“秘密”？）

文档说（[https://github.com/expressjs/cookie-parser](https://github.com/expressjs/cookie-parser)）：

> 解析*Cookie*标头并填充`req.cookies` 以 cookie 名称为键的对象。或者，您可以通过传递一个字符串来启用签名 cookie 支持，该`secret`字符串分配`req.secret`它可以被其他中间件使用。

有人知道吗？

默克。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-08-10T08:40:26.493

cookie 仍然可见，但它有一个签名，因此它可以检测客户端是否修改了 cookie。

它通过创建值（当前 cookie）的[HMAC并对其进行 base64 编码来工作。](https://en.wikipedia.org/wiki/HMAC)当 cookie 被读取时，它会重新计算签名并确保它与附加到它的签名匹配。

如果不匹配，则会报错。

如果您还想隐藏 cookie 的内容，则应该对其进行加密（或仅将其存储在服务器端会话中）。我不确定是否已经有中间件。

**编辑**

并创建一个签名的 cookie，您将使用

```
res.cookie('name', 'value', {signed: true}) 
```

要访问签名的 cookie，请使用以下`signedCookies`对象`req`：

```
req.signedCookies['name'] 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-10T16:24:39.513

是的，就像 emostar 提到的那样，它只是为了确保一个值没有被篡改。它被放置在不同的对象 (req.signedCookies) 中以区分两者，从而允许开发人员显示意图。如果它们与其他人一起存储在 req.cookies 中，则某人可以简单地制作一个同名的未签名 cookie，从而破坏它们的全部目的。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-06-11T13:08:51.003

我一直在寻找一个很好的答案......并且查看`cookie-signature`用于`cookie-parser`签署签名cookie的源代码让我更好地理解了签名cookie是什么。

`val`当然是 cookie 的值，并且`secret`是您作为选项添加到的字符串 `cookie-parser`

[https://github.com/visionmedia/node-cookie-signature/blob/master/index.js#L16](https://github.com/visionmedia/node-cookie-signature/blob/master/index.js#L16)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-14T03:28:32.820

我使用了 cookie-parser 1.4.4 版本。

我可以在浏览器中添加签名 cookie 和加密的签名 cookie，如果我尝试使用 editThisCookie（chrome 插件）编辑签名 cookie，则 cookie 解析器检测外部更改，然后将 false 设置为值。

```
response.cookie('userId',401,{signed: true}) 
```

浏览器中的响应头，显示为

```
Set-Cookie: empId=s%3A101.US2oSV4TSvfkvvEQ5fj1sXsjj8rNxx2ph4VdHNTuKX8; Path=/ 
```

获取签名的 cookie

```
request.signedCookies 
```

[https://gist.github.com/dineshbalaji/607d166f0240f932a5cb02099b0ece4c](https://gist.github.com/dineshbalaji/607d166f0240f932a5cb02099b0ece4c)

# linux - 如何使用 awk getline 清空文件

> ID：11897966
> 
> 赞同：1
> 
> 时间：2012-08-10T08:28:06.623
> 
> 标签：linux, shell, scripting, awk, getline

如何使用`getline`. 该文件应在每 9 次循环中刷新一次，旧内容直到最后 9 次循环，然后应将其删除，以便可以再次写入和检索新内容。

**脚本功能：**

```
 function leeren(tmpdatei){
      while(getline line < tmpdatei){
         line=""
      }
     } 
```

这是应该删除文件内容的功能。该函数在每 9 个循环中调用一次。从这个意义上讲，从逻辑上讲是可以的，但是我想删除内容是行不通的，删除文件的内容`getline`不是正确的方法，对吧？

然后如何一次或循环删除文件的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:55:59.060

如果您的 shell 是 bash，并且您真的想在 awk 中清空文件：请参阅下面的测试：

```
kent:/tmp$ seq 3 > a.txt
kent:/tmp$ cat a.txt
1
2
3
kent:/tmp$ awk '{system(">a.txt")}'<<<"foo"
kent:/tmp$ cat a.txt
kent:/tmp$ 
```

**编辑**

好吧，您可以更改为`awk '{system("cat /dev/null>a.txt")}'`

这个 system() 调用将启动另一个进程，在这种情况下是“cat”来清空文件。

您也可以应用 awk 重定向，正如 Thor 在他的回答中所显示的那样。

但如果你在循环中进行，请注意 awk 重定向。您应该每次关闭文件，`printf("") > filename.`否则它会在第一次截断后将所有内容附加到文件中。请参见下面的示例：

```
kent$  cat a.txt
1
2
3

kent$  awk 'BEGIN{fn="a.txt"}{
        printf ("") > fn;
        printf("refilled")>fn;
        printf("")>fn;
        printf("refilled again")>fn;
        printf("")>fn}'<<<"foo"  

kent$  cat a.txt
refilledrefilled again 
```

如您所见，您可能希望 awk ( `printf("")>fn}`) 中的最后一行清空文件，但事实并非如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:04:20.413

要从内部删除文件，`awk`您可以使用重定向：

```
echo '' | awk '{ printf("") > "file_to_delete" }' 
```

### 编辑

正如 Kent 所指出的，需要关闭文件才能使其正常工作。以下修改应该足够了：

```
close("file_to_delete")
printf("") > "file_to_delete" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T08:37:34.793

据我所知，您无法仅使用 awk 清空文件，除非您解析每一行并将其删除（因为 awk 逐行读取文件）。

我不知道您想要实现什么，但对我来说，最好的方法是创建一个 bash 脚本，其中您有一个运行 awk 脚本的函数和另一个清空文件（使用可能`sed`）并多次调用它们的函数如您所愿在该文件上。

# javascript - 用于临时存储 base64 图像数据的 IndexedDB 或 javascript 对象存储？

> ID：11897967
> 
> 赞同：1
> 
> 时间：2012-08-10T08:28:09.073
> 
> 标签：javascript

我的应用程序包括照片处理/编辑器部分。

在其中，我允许用户在每次进行修改时操作图像并保存图像的“撤消”版本。此“撤消状态”作为 base64 图像数据存储在 javascript 对象中。

这样以后可以检索到以前的版本。它工作得很好但是我担心像这样直接在内存中存储这么多图像。

我不需要这些撤消状态在用户访问之间持续存在，仅在用户实际操作图像时才需要存储。

indexedDB 会是存储这些多张图像的更好选择吗？如果是，为什么？indexedDB 将其数据存储在哪里，是直接在浏览器内存中吗？如果是这样，以我目前的方式直接存储在 javascript 对象中会有什么不同吗？

总而言之，我将同一图像的多个版本存储为 base64 数据，目前直接在 javscript 对象中供以后访问。有没有更好的方法来临时存储这个数据客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:05:39.033

有点晚了，但这是我在遇到同样情况后才发现的。IndexedDB 最适合您在某些时候可能需要查询的大量数据。IndexedDB 还允许超过 localstorage 提供的“安全区”5MB。（当然也有一些浏览器的问题，要查看哪个浏览器支持什么，请点击下面的jstore链接。）

数据文件在哪里？据我了解，任何本地存储内容都存在于 Web 浏览器的临时目录中，或者取决于您的操作系统，存在于某个本地 App Data 目录中。我还没有测试过，但由于本地存储类似于 cookie——从某种意义上说，两者都是“网络浏览器的一部分”——这是有道理的。（此外，在 Firefox 中，您可以使用 Firebug 直接检查本地存储的内容。）

因此，根据我的快速研究（意思是，它并不全面），我发现 localstorage 和 IndexedDB 都不将数据存储在内存中。如果我错了，请纠正我！

这是一个网站，它解释了有关 localstorage 和 IndexedDB 的更多信息。该站点还包含 jstore.js，这是一个插件，用于将数据存储在各种浏览器的正确位置：

```
http://www.jstorage.info/ 
```

除此之外，还有一篇有趣的文章，名为“Storing images and files in IndexedDB”，位于：

```
https://hacks.mozilla.org/2012/02/storing-images-and-files-in-indexeddb/ 
```

Mozilla 网站上有一些很好的信息：

```
https://developer.mozilla.org/en-US/docs/DOM/Storage#Storage_location_and_clearing_the_data 
```

关于 Firefox 和 Chrome，它指出“在 Firefox 中，DOM 存储数据存储在配置文件文件夹中的 webappsstore.sqlite 文件中（还有 chromeappsstore.sqlite 文件用于存储浏览器自己的数据，尤其是起始页 - 关于:home，但可能用于其他带有“关于：”URL 的内部页面）。

要真正了解将图像存储在 localstorage 或 IndexedDB 中会发生什么，我谦虚地建议查看这些链接并关注这些文章中的其他链接，尤其是来自 Mozilla 的文章。

# php - Mysql全文搜索查询修改多表

> ID：11897969
> 
> 赞同：0
> 
> 时间：2012-08-10T08:28:16.747
> 
> 标签：php, mysql, html, search

我正在构建一个 Mysql 全文搜索，我有 4 个表要搜索。当我在搜索查询中仅使用单个表时它可以工作，但是当我在查询中使用多个表时它不起作用。我也不想在查询中使用 UNION ALL，因为我正在使用复选框选择选项在单个或多个表中执行搜索。

多个表上的 MySQL 查询不起作用。

```
$sqlquery = mysql_query("(SELECT * FROM table1, table2, table3, table4 WHERE MATCH (pflink, title) AGAINST ('%$keyword*%' IN BOOLEAN MODE) )ORDER by pflink desc, $orderby $sortby LIMIT $rowsperpage OFFSET $offset ")or die (mysql_error()); 
```

它给了我错误`Column 'pflink' in where clause is ambiguous`

使用单表查询有效。

```
$sqlquery = mysql_query("(SELECT * FROM table1 WHERE MATCH (pflink, title) AGAINST ('%$keyword*%' IN BOOLEAN MODE) )ORDER by pflink desc, $orderby $sortby LIMIT $rowsperpage OFFSET $offset ")or die (mysql_error()); 
```

Html 复选框代码

```
 <input name="all-tables" type="checkbox" value="true" checked="checked" id="check-all" >
  <input name="table1" type="checkbox" value="true" disabled="disabled" >
  <input name="table2" type="checkbox" value="true" disabled="disabled" >
  <input name="table3" type="checkbox" value="true" disabled="disabled" >
  <input name="table4" type="checkbox" value="true" disabled="disabled" > 
```

请提出任何可能的方法来修改此查询以使其适用于多个表。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:55:14.183

很久以前，我遇到了类似的情况。我有多个表格可以使用全文，但我不知道该怎么做。我搜索但找不到路。所以最后我想出了以下想法

```
1\. Make another table say "keywords", with fields title, description , item_id, and the table data belongs to.
2\. make a code to fetch all title and description from table1,table2 and so on and insert it to keywords.
3\. Make keywords table suitable for full text search.
4\. when user searches, search keyword table. Retrieve relevant value from table1, table 2 etc from the recordset (as you get item id and table from the full text search query). 
```

这样做的好处是查询会更快更容易。

希望这可以帮助

# jms - activemq服务器如何知道何时将一个slave提升为master？

> ID：11897974
> 
> 赞同：3
> 
> 时间：2012-08-10T08:28:43.190
> 
> 标签：jms, cluster-computing, activemq

对于 ActiveMq，无共享部署如下：

![在此处输入图像描述](../Images/8270b3eed0f1b15e9f3afe343a04f9f4.png)

简而言之，当主人倒下时，一个奴隶就会被提升为主人。但我不知道：

1、谁负责判断master是否宕机，决定提升哪个slave？因为主人自己已经下来了。客户有责任吗？如何？2、哪个slave应该提升为master？任何人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T11:06:58.317

对于无共享（纯主从）设置，

从从站到主站建立了主站连接。此连接同步主代理的状态。如果从从站到主站的网络主站（同步）连接断开，即使是很短的时间，从站代理将停止侦听复制并启动它自己的连接器（网络和客户端连接器）。

同时，如果与客户端的连接也断开了（即主服务器实际上失败、崩溃、硬件中断、网络中断等），那么客户端将重新连接到从服务器并继续在那里。

也就是说，如果已在客户端设置中配置：failover://(tcp://masterhost:61616,tcp://slavehost:61616)?randomize=false

这意味着几件事

*   只能将一个从属连接到主控
*   从站不会“提升”为主站 - 如果主站出现故障，它只是作为独立代理运行。
*   如果主服务器在短暂中断后重新上线，它将继续作为独立代理与从服务器并肩运行，并且设置可能会变得不同步。恢复有点痛苦，而且是手动的——即关闭每个代理，手动按文件复制运行时数据并重新启动它们。请注意，失败的主代理将不会重新连接到从属并自动成为新的从属。

因此，shared nothing 状态主要在主从之间的网络连接非常稳定且每个节点的宕机时间非常短（即一年左右发生几次硬件故障的保护）时可用。

如果可能，我会使用其他一些故障转移方法，共享磁盘、master+master 等。

# python - 使用正则表达式搜索不区分大小写的括号

> ID：11897977
> 
> 赞同：0
> 
> 时间：2012-08-10T08:28:53.507
> 
> 标签：python, regex

```
with open(logfile) as inf:
    for line in inf:
        if re.search(string,line,re.IGNORECASE):
            print 'found line',line 
```

那么如何使用Python搜索包含括号的字符串，-字符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:35:59.693

```
import re

s = "foo[bar]baz"
m = re.search("[\[\]]", s)
print m.group(0)
# => '['

t = "foo-bar]baz"
n = re.search("[\[\]]", t)
print n.group(0)
# => ']' 
```

事实上，`re.IGNORECASE`是不必要的，因为括号没有大小写。

**编辑：**

```
u = "foo\\-bar]baz"
o = re.search('[\[\]]', u) # Does this match the \ ?
print o.group(0)
# => ']'
# Behold! 
```

# c# - 代码优先事务包装

> ID：11897978
> 
> 赞同：0
> 
> 时间：2012-08-10T08:29:00.733
> 
> 标签：c#, entity-framework, transactions

我们有一个现有的数据库，其中包含一个用户表和一个代码库（用 VB.Net 编写），它实现了某些业务逻辑并处理将“旧用户”记录添加到数据库中。我现在正在进行的一个项目需要创建一个“扩展”用户的新实体（ExternalUser）。我们选择通过创建旧用户记录并将其与新表以一对一的关系链接来实现新实体。当被要求创建新的 ExternalUser 时，UserRepository 将调用旧代码以创建记录的用户部分，然后存储库将首先使用 EF 代码 ExternalUserContext 在 ExternalUsers 表中创建记录。当然，如果第二次调用因任何原因失败，我们希望撤销旧用户的创建。这就是事情失败的地方。我们使用的是 SQL Server 2005 和 EF Code 4.3.1。以下是相关代码：

```
using (_context = new ExternalUserContext(Utils.ConnectionString))
{
     ObjectContext ob = ((IObjectContextAdapter) _context).ObjectContext;
     ob.Connection.Open();
     DbTransaction tran = ob.Connection.BeginTransaction(System.Data.IsolationLevel.ReadUncommitted);
     _legacyUser = new blUser();
     long id = _legacyUser.Add(//Params go here);
     if (id > 0)
     {
         toCreate.UserID = id;
         _context.ExternalUsers.Add(toCreate);
         tran.Rollback(); //Just for testing
         throw new FieldAccessException("testing"); //just for testing
         _context.SaveChanges();
         tran.Commit();
      }else
      {
          throw new ArgumentException("Could not create legacy user");
      }
 } 
```

在尝试显式管理事务之前，我曾尝试使用 TransactionScope（在实例化 ExternalUserContext 之前或之后开始），但均无济于事。引用的代码会引发错误，但用户记录仍保留在数据库中。VB 代码正在调用另一个执行实际记录创建的 .dll。两个 dll 都使用默认设置将创建包装在 TransactionScope 中。

我的代码正在调用一个 dll，而该 dll 本身正在调用一个执行数据库事务的 dll，这一事实是否在这里起作用？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:48:17.567

我很遗憾地说，事实证明这是由于代码碎片的严重情况造成的。我拥有的用于插入的低级 dll 的源代码不是用于生成我的项目引用的二进制文件的源代码。不同之处在于事务范围被定义为 RequiresNew。很抱歉浪费了任何人的时间.....它仍然可以作为糟糕的版本控制如何浪费一天工作的一个例子！

# android - android.database.sqlite.SQLiteException：表计划没有列命名

> ID：11897981
> 
> 赞同：2
> 
> 时间：2012-08-10T08:29:12.313
> 
> 标签：android, database, exception

您好，我在数据库中创建了一个表。当我运行它时，我看到没有名为 endTime 的列的疯狂异常。问题是我看到我在 onCreate 方法上创建了该列。

编码：

```
package com.example.pref;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class Databasehandler extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "ScheduleManager";

    // Contacts table name
    private static final String TABLE_SCHEDULE = "schedule";

    // Contacts Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_START_TIME = "StartTime";
    private static final String KEY_END_TIME = "EndTime";
    private static final String KEY_MONDAY = "Monday";
    private static final String KEY_TUESDAY = "Tuesday";
    private static final String KEY_WEDNESDAY = "Wednesday";
    private static final String KEY_THURSDAY = "Thursday";
    private static final String KEY_SATURDAY = "Saturday";
    private static final String KEY_FRIDAY = "Friday";
    private static final String KEY_SUNDAY = "Sunday";

    public Databasehandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT,"
    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_SCHEDULE_TABLE = "CREATE TABLE " + TABLE_SCHEDULE + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + KEY_START_TIME
                + " BIGINT," + KEY_END_TIME + " BIGINT," + KEY_MONDAY
                + " INTEGER," + KEY_TUESDAY + " INTEGER," + KEY_WEDNESDAY
                + " INTEGER," + KEY_THURSDAY + " INTEGER," + KEY_FRIDAY
                + " INTEGER," + KEY_SATURDAY + " INTEGER," + KEY_SUNDAY
                + " INTEGER" + ")";
        db.execSQL(CREATE_SCHEDULE_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_SCHEDULE);

        // Create tables again
        onCreate(db);
    }

    // Adding new Preference
    public void addPreference(Preference pref) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_ID, pref.getID());
        values.put(KEY_START_TIME, pref.getStartTime());
        values.put(KEY_END_TIME, pref.getEndTime());
        values.put(KEY_MONDAY, pref.getMonday());
        values.put(KEY_TUESDAY, pref.getTuesday());
        values.put(KEY_WEDNESDAY, pref.getWednesday());
        values.put(KEY_THURSDAY, pref.getThursday());
        values.put(KEY_FRIDAY, pref.getFriday());
        values.put(KEY_SATURDAY, pref.getSaturday());
        values.put(KEY_SUNDAY, pref.getSunday());
        // Inserting Row
        db.insert(TABLE_SCHEDULE, null, values);
        db.close(); // Closing database connection
    }

    // Getting single message
    public Preference getPreference(int id) {
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_SCHEDULE, new String[] { KEY_ID,
                KEY_START_TIME, KEY_END_TIME, KEY_MONDAY, KEY_TUESDAY,
                KEY_WEDNESDAY, KEY_THURSDAY, KEY_FRIDAY, KEY_SATURDAY,
                KEY_SUNDAY }, KEY_ID + "=?contact",
                new String[] { String.valueOf(id) }, null, null, null, null);
        if (cursor != null)
            cursor.moveToFirst();

        Preference pref = new Preference(cursor.getInt(0), cursor.getInt(1),
                cursor.getInt(2), cursor.getInt(3), cursor.getInt(4),
                cursor.getInt(5), cursor.getInt(6), cursor.getInt(7),
                cursor.getInt(8), cursor.getInt(9));
        // return contact
        return pref;
    }

    // Getting All messages
    public List<Preference> getAllPreferences() {
        List<Preference> preferenceList = new ArrayList<Preference>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + TABLE_SCHEDULE;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Preference pref = new Preference();
                pref.setID(Integer.parseInt(cursor.getString(0)));
                pref.setStartTime(Integer.parseInt(cursor.getString(1)));
                pref.setEndTime(Integer.parseInt(cursor.getString(2)));
                pref.setMonday(Integer.parseInt(cursor.getString(3)));
                pref.setTuesday(Integer.parseInt(cursor.getString(4)));
                pref.setWednesday(Integer.parseInt(cursor.getString(5)));
                pref.setThursday(Integer.parseInt(cursor.getString(6)));
                pref.setFriday(Integer.parseInt(cursor.getString(7)));
                pref.setSaturday(Integer.parseInt(cursor.getString(8)));
                pref.setSunday(Integer.parseInt(cursor.getString(9)));

                // Adding contact to list
                preferenceList.add(pref);
            } while (cursor.moveToNext());
        }

        // return contact list
        return preferenceList;
    }

    // Getting All messages

    public List<Preference> getPreferences(int index, int limit) {
        List<Preference> preferenceList = new ArrayList<Preference>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + TABLE_SCHEDULE + " LIMIT "
                + index + ", " + limit;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Preference pref = new Preference();
                pref.setID(Integer.parseInt(cursor.getString(0)));
                pref.setStartTime(Integer.parseInt(cursor.getString(1)));
                pref.setEndTime(Integer.parseInt(cursor.getString(2)));
                pref.setMonday(Integer.parseInt(cursor.getString(3)));
                pref.setTuesday(Integer.parseInt(cursor.getString(4)));
                pref.setWednesday(Integer.parseInt(cursor.getString(5)));
                pref.setThursday(Integer.parseInt(cursor.getString(6)));
                pref.setFriday(Integer.parseInt(cursor.getString(7)));
                pref.setSaturday(Integer.parseInt(cursor.getString(8)));
                pref.setSunday(Integer.parseInt(cursor.getString(9)));

                // Adding contact to list
                preferenceList.add(pref);
            } while (cursor.moveToNext());
        }

        // return contact list
        return preferenceList;
    }

    // Getting message Count
    public int getPreferenceCount() {
        // String countQuery = "SELECT * FROM " + TABLE_SCHEDULE;
        String countQuery = "SELECT count(id) FROM " + TABLE_SCHEDULE;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        cursor.close();
        // return count
        return cursor.getCount();
    }

    // Updating single message
    public int updatePreference(Preference pref) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_ID, pref.getID());
        values.put(KEY_START_TIME, pref.getStartTime());
        values.put(KEY_END_TIME, pref.getEndTime());
        values.put(KEY_MONDAY, pref.getMonday());
        values.put(KEY_TUESDAY, pref.getTuesday());
        values.put(KEY_WEDNESDAY, pref.getWednesday());
        values.put(KEY_THURSDAY, pref.getThursday());
        values.put(KEY_FRIDAY, pref.getFriday());
        values.put(KEY_SATURDAY, pref.getSaturday());
        values.put(KEY_SUNDAY, pref.getSunday());

        // updating row
        return db.update(TABLE_SCHEDULE, values, KEY_ID + " = ?",
                new String[] { String.valueOf(pref.getID()) });
    }

    // Deleting single message
    public void deleteMessage(Preference pref) {
        SQLiteDatabase db = this.getWritableDatabase();
        db.delete(TABLE_SCHEDULE, KEY_ID + " = ?",
                new String[] { String.valueOf(pref.getID()) });

        // db.close();
    }

    public int deleteAllMessages() {
        SQLiteDatabase db = this.getWritableDatabase();

        return db.delete(TABLE_SCHEDULE, null, null);

    }

} 
```

日志猫

```
08-10 11:24:29.976: E/Database(2997): Error inserting id=1 Saturday=0 Thursday=0 Monday=0 Tuesday=0 Wednesday=0 EndTime=0 StartTime=0 Friday=0 Sunday=0
08-10 11:24:29.976: E/Database(2997): android.database.sqlite.SQLiteException: table schedule has no column named EndTime: , while compiling: INSERT INTO schedule(id, Saturday, Thursday, Monday, Tuesday, Wednesday, EndTime, StartTime, Friday, Sunday) VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?); 
```

谢谢你。/mkounal

# c# - asp.net 网络表单标签属性

> ID：11897987
> 
> 赞同：1
> 
> 时间：2012-08-10T08:29:20.117
> 
> 标签：c#, asp.net

有人可以告诉我在 asp.net 网络表单中是否类似于`Tag`Windows 表单中的属性。
我想将一些数据绑定到控件，以便稍后我能够识别它们而无需添加很多。`if(...) { }`
更具体地说，我想在构建 sql 时使用该标签，`selectcommand`这些标签就像：`c.City, c.Country`并且它会被绑定到`checkboxlists`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:13:43.037

你能发明你自己的属性吗？

```
 <asp:CheckBoxList ID="CheckBoxList1" runat="server" MyAttribute="Country" >

    </asp:CheckBoxList> 
```

然后在代码隐藏中：

```
 string myatt = CheckBoxList1.Attributes["MyAttribute"];
switch (myatt) {
 case "Country":
   CheckBoxList1.DataSource = ... etc 
```

这是你要找的吗？

# jquery - 将可空小数从 json 传递到 ASP.NET MVC 控制器操作？

> ID：11897988
> 
> 赞同：1
> 
> 时间：2012-08-10T08:29:20.120
> 
> 标签：jquery, asp.net-mvc, json

我有一个 Asp.NET MVC 控制器操作，它接收一个 DTO，而 DTO 又包含一个可为空的十进制属性。

例如

```
 [DataContact]
 public class MyDTO
 {
     //other properties

     [DataMember]
     public decimal? SomeProp {get;set;}
 } 
```

我的动作是这样的：

```
 public JsonResult SaveMyDTO(MyDTO dto)
 {... 
```

我可以看到 js 客户端传递了正确的 json 数据，为“SomeProp”设置了值，但是，在服务器上反序列化时未设置该属性，其他属性是，但不是可为空的十进制道具。

使它工作的最简单方法是什么？将属性转换为字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:50:08.970

将属性更改为可为空的双精度使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:37:48.287

我假设您将 JSON 数据`SomeProp`作为数值发送到，如下所示：

```
var json = { "SomeProp": 2.233 }; 
```

MVC 中的序列化例程有时会出现可空数值的问题，因此如果是这种情况，请尝试在发送请求之前将该值转换为字符串：

```
var json = { "SomeProp": "2.233" }; 
```

*编辑*
刚刚注意到你在问题的最后一行提到了这个解决方案:)

# android - ubintu12.04无法安装Android ADT

> ID：11897989
> 
> 赞同：0
> 
> 时间：2012-08-10T08:29:24.543
> 
> 标签：android, ubuntu-12.04

嗨，我无法安装 Android ADT 并在 ubuntu 12.04 上出现以下错误。我正在使用 Eclipse 并通过 在 HELP -> INSTALL NEW SOFTWARE 选项卡中指定其 URL [https://dl-ssl.google.com/android/eclipse/来安装 Android ADT](https://dl-ssl.google.com/android/eclipse/)

> 无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Android 开发工具 20.0.2.v201207191942-407447 (com.android.ide.eclipse.adt.feature.group 20.0.2.v201207191942-407447) 缺少要求：Android 开发工具 20.0.2.v201207191942-407447 ( com.android.ide.eclipse.adt.feature.group 20.0.2.v201207191942-407447) 需要 'org.eclipse.wst.sse.core 0.0.0' 但找不到

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:43:32.750

卸载 eclipse 的所有 android 组件。

然后，在运行 eclipse 时尝试安装 ADT

```
sudo ./eclipse 
```

如果这不起作用，请手动下载 ADT 插件并安装它：

[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)（在“故障排除”段落中）。

# javascript - 检查“？”中任何孩子的css背景颜色？

> ID：11897991
> 
> 赞同：1
> 
> 时间：2012-08-10T08:29:37.130
> 
> 标签：javascript, jquery

如何检查 a 的任何孩子是否`<tr>`包含 a`background:blue;`然后做某事？

```
$('table tr').each(function(index,value){
    if (value.has('background:blue')){
        alert (index); //do something to this row
    }
}); 
```

```
<table>
    <tr>
        <td>dfgdfgdfgdf</td>
        <td><input style="background:blue; value="test" /></td>
        <td>gdfg</td>
        <td><p style="background:blue;>cvcxvcxvx</p></td>
    </tr>
    <tr>
    <td>gfdgdfg</td>
        <td>gdfgfd</td>
        <td style="background:blue;>dfgdf</td>
        <td><div><div><button style="background:blue; type="submit"/></div></div></td>
    </tr>
    <tr>
    <td>gfdgdfg</td>
        <td>gdfgfd</td>
        <td>dfgdf</td>
        <td>dfgdf</td>
    </tr>
    <tr>
    <td>gfdgdfg</td>
        <td>gdfgfd</td>
        <td>dfgdf</td>
        <td><div><div><button style="background:blue; type="submit"/></div></div></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:32:14.407

这不会很快，但它会起作用：

```
var $blueElements = $("tr *").filter(function() {
    return $(this).css("background-color") == "blue";
}); 
```

您是否有理由不能使用 CSS 类将蓝色背景放在每个元素上？然后你可以使用该类来选择它们：`$(".blue-element")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T08:53:08.087

接着就，随即 ？

```
$(function() {
    $('tr').find('*').each(function(i) {
         if ( $(this).css('background-color') == 'rgb(0, 0, 255)' )
            alert($(this).text());
    });
});​ 
```

[http://jsfiddle.net/xHgVf/3/](http://jsfiddle.net/xHgVf/3/)