# StackOverflow 问答 10664000-10664999

# objective-c - 来自数组元素的目标c自定义类初始化

> ID：10664003
> 
> 赞同：0
> 
> 时间：2012-05-19T09:33:04.170
> 
> 标签：objective-c

我有一个带有 setter / getter 的人......现在我正在循环那个人对象的数组。我如何将元素分配给新人。

```
for (int i =0; i<[people count]; i++)
{

   Person *p = [people objectAtIndex:i];
   nsLog(@"%@", [p id]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:44:02.120

好吧，你做对了，除了 nslog ......它应该是：`NSLog("%@",p);`

至于速度的事情......使用快速枚举......像这样：

```
for(Person *person in people){
//some assign code (Person *p=person);
NSLog("%@",person);
} 
```

请注意，我不知道如何`Person`创建...如果有问题，它就在那里

# java - 从 BlackBerry 向 Google App Engine 发送和存储数据

> ID：10664005
> 
> 赞同：1
> 
> 时间：2012-05-19T09:33:26.120
> 
> 标签：java, google-app-engine, blackberry

我不知道我的问题是否属于这里。我需要我的黑莓在 GAE 中发送和存储位置数据，我正在为 Eclipse 使用 BB 和 GAE 插件，没有关于如何开发这样一个应用程序的文献。我想知道我应该使用哪种架构，以及如何在 Eclipse 上执行（我应该将其视为 BB 项目还是 Web 项目或两者兼而有之，如何使用 BB 将数据发送到 GAE）？

# android - 旋转大尺寸位图的最快方法

> ID：10664006
> 
> 赞同：9
> 
> 时间：2012-05-19T09:33:27.497
> 
> 标签：android, bitmap

我正在处理大尺寸图像，当我尝试旋转它们`(applying matrix on the bitmap)`时会发生很多秒。我已经看到 android 系统库可以以非常快速的方式完成这项任务。这怎么可能？

我想在 asyncTask 上执行旋转，只在主线程上应用 ImageView 旋转（不需要很长时间），但是如果应用程序在 asyncTask 结束之前被杀死，应用程序就会处于不一致的状态.

这是我的位图旋转代码，对于大型位图需要很长时间执行：

```
Matrix mat = new Matrix();
mat.setRotate(90);
bMap = Bitmap.createBitmap(bMap, 0, 0, bMap.getWidth(), bMap.getHeight(), mat, true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T09:41:28.760

在对大图像进行修改时，创建一个低质量的位图副本，并使用它来显示即时旋转或其他编辑效果。一旦用户停止运动（或左滑块控件），将低质量位图替换为具有相同效果的原始图像。这将显着改善用户体验。试着让我知道。

这听起来可能与原始要求有所不同——您可以绘制一个矩形而不是实时旋转整个图像。最后，用户需要的是他的图像旋转了多少的指示。这将更快，并且可以轻松地在 UI 线程上完成，而不会出现延迟。

这是画布代码上最简单的旋转

```
canvas.save(); //save the position of the canvas
canvas.rotate(angle, X + (imageW / 2), Y + (imageH / 2)); //rotate the canvas
canvas.drawBitmap(imageBmp, X, Y, null); //draw the image on the rotated canvas
canvas.restore();  // restore the canvas position. 
```

# struts - 将字符串变量传递给 struts 标签

> ID：10664007
> 
> 赞同：0
> 
> 时间：2012-05-19T09:33:50.987
> 
> 标签：struts

我想将字符串变量传递给 struts 标记。

```
alert('<bean:message key="${result}"/>'); 
```

此标签负责从 ApplicationResources.properties 中提取消息。结果包含此消息的密钥。系统尝试使用相同的结果字符串本身而不是其内容。这是我得到的错误。

“缺少密钥“${result}”的消息

我看到了这个问题，我有了一个想法，但问题仍然存在。 [Struts 自定义标签中属性中的变量](https://stackoverflow.com/questions/7389308/variable-in-an-attribute-in-struts-custom-tag)

我的应用程序基于struts。

我用这样的东西，但我觉得它又丑又臭

```
 if(result == 'a.b.c' )
        alert('<bean:message key="a.b.c"/>');
    else if(result == 'a.b.c' )
        alert('<bean:message key="a.b.d"/>');
    else if(result == 'a.b.d' )
        alert('<bean:message key="a.b.d"/>'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:01:44.533

请尝试以下操作：

```
alert('<bean:message name="result"/>'); 
```

[http://struts.apache.org/1.2.x/userGuide/struts-bean.html#message](http://struts.apache.org/1.2.x/userGuide/struts-bean.html#message)

# javascript - CSS：为什么照片不按比例缩放？

> ID：10664010
> 
> 赞同：0
> 
> 时间：2012-05-19T09:34:18.180
> 
> 标签：javascript, css, height, gallery

我创建了一个图像查看器，由于某种原因，图像无法缩放到页面（我正在使用：）`height: 82%, width: auto`。你可以在我的网站上看到这个问题，[guyzyl.org](http://guyzyl.org)。转到画廊并输入照片以查看问题。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:42:14.103

尝试将其设置为

```
#viewer img {
    max-height: 82%;
    max-width: 100%;
    } 
```

这应该可以达到您想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:37:24.533

用于. `display:block` _`img`

此外，当您使用子容器`auto`的宽度和高度时，父容器应该具有指定的尺寸。

# winforms - 在所有 GUI Powershell 脚本中隐藏空的控制台窗口？

> ID：10664015
> 
> 赞同：3
> 
> 时间：2012-05-19T09:35:08.373
> 
> 标签：winforms, powershell

我用 WinForms GUI 制作了一个非常简单的 Powershell 脚本。一切都按预期工作，但是当我使用 PowerShell 运行 .ps1 脚本时，首先会出现一个黑色的空控制台窗口，然后显示 GUI。

无论如何让控制台窗口消失？

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T19:47:17.410

一年前我写了[一篇关于这个主题的小文章（抱歉是法语）。](http://www.silogix.fr/Blog-Silogix/powershell-ne-sait-pas-demarrer-sans-afficher-une-fenetre.aspx)

这是使用小型 VBS 脚本启动 PowerShell 隐藏他的窗口的常见解决方案（诀窍在最后一个**,0**）。

```
Set Args = Wscript.Arguments
'MsgBox  "Chemin LDAP: " & Args(0)
'MsgBox  "Classe: " & Args(1)

Set objShell = CreateObject("Wscript.Shell")
objShell.Run "c:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -nologo -Noninteractive -file c:\SlxRH\RhModif.ps1 " & chr(34) & Args(0) & chr(34) , 0 
```

我还将 PowerShell 嵌入到一个名为[slxPShell2.EXE](http://www.silogix.fr/developpement/outils/Ressources-PowerShell/menu-contextuel-windows-explorer-full-powershell.aspx)的没有控制台的可执行文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T10:38:13.747

我发现上面的方法对我不起作用。我用这个：

```
Set objShell = CreateObject("WScript.Shell")

objShell.Run "CMD /C START /B " & objShell.ExpandEnvironmentStrings("%SystemRoot%") & "\System32\WindowsPowerShell\v1.0\powershell.exe -file " & "YourScript.ps1", 0, False

Set objShell = Nothing 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-08T21:54:25.017

此解决方案在启动后最小化 Powershell 窗口。Powershell 窗口打开，然后消失，无需使用任何外部代码。放在脚本的开头。

```
$t = '[DllImport("user32.dll")] public static extern bool ShowWindow(int handle, int state);'
add-type -name win -member $t -namespace native
[native.win]::ShowWindow(([System.Diagnostics.Process]::GetCurrentProcess() | Get-Process).MainWindowHandle, 0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-17T14:25:32.487

这就是我得到这个工作的方式：

1.  将 Winforms GUI 脚本放在一个 ScriptOne.ps1 文件中
2.  使用以下内容创建另一个 LaunchScriptOne.ps1 文件：

`powershell.exe -WindowStyle Hidden -File "C:\path\to\ScriptOne.ps1"`.

该解决方案在同一主题的另一个线程中提供：[在 Winform Launch 后隐藏或最小化 powershell 提示](https://stackoverflow.com/questions/15922745/hide-or-minimize-the-powershell-prompt-after-winform-launch)

我希望有人也能找到一种方法将其放入一个脚本中。这个帖子上面的答案对我没有帮助，但也许我做错了什么，idk。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-07T04:51:19.027

我是 nube，所以没有代表，所以不能内联评论......虽然我很喜欢 @Ipse 的解决方案，但我也确保在脚本完成后关闭隐藏窗口......不确定是否 PS解决这种自动垃圾收集，但怀疑这是一个很好的最佳实践。

例如。在您的脚本结束时，我建议您这样做：

停止进程 -Id $PID

（这应该终止那个隐藏的窗口v。只是让它潜伏并占用这些资源）。

# android - 我看不到有多少安装了我的安卓游戏

> ID：10664016
> 
> 赞同：0
> 
> 时间：2012-05-19T09:35:30.893
> 
> 标签：android, google-play

我做了一个安卓游戏，我上传并发布了它。我把它安装在我的手机上。但我看不到它的谷歌播放页面上有多少安装。

[http://play.google.com/store/apps/details?id=com.andgame.evenodd233](http://play.google.com/store/apps/details?id=com.andgame.evenodd233)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:39:03.247

我想统计数据不会实时更新，尤其是在 Play 的用户可见部分。

作为开发者/发布者，您应该有权访问开发者控制台*（您可以：这是您发布应用程序的地方）*。
在那里，您会发现更多统计信息，这些统计信息将比Play 用户部分的可见*（或可见）更精确和更详细。*

尽管如此，统计数据也可能不会实时更新。

[作为参考，引用帮助页面“应用程序统计”中](https://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=139628&topic=16285&ctx=topic) 的几句话：

> 在 Google Play Developer Console 中，您当前可以查看有关您已发布应用程序的以下统计信息
> [...]
> 这些统计信息**每天都会刷新**。

# jquery - jQuery焦点在IE中不起作用

> ID：10664018
> 
> 赞同：3
> 
> 时间：2012-05-19T09:35:41.740
> 
> 标签：jquery, internet-explorer, focus

我知道其他人以前遇到过这个问题。我已经搜索并尝试了各种不同的解决方案（包括[JQuery focus](https://stackoverflow.com/questions/334489/jquery-focus)和[JQuery Problem .... Focus not working](https://stackoverflow.com/questions/6485006/jquery-problem-focus-not-working)和[JQuery focus() is not focus in IE but it is in Chrome](https://stackoverflow.com/questions/7996577/jquery-focus-is-not-focusing-in-ie-but-it-is-in-chrome)）但没有任何效果。

当代码在 FF 和 Chrome 中运行时，焦点会随之而来。但是，在 IE（我使用的是 IE9）中，没有这样的运气。焦点未放在输入文本上。任何援助将不胜感激。

```
// textInputArray contains the input field along with some other html with instructions
//  about the input field
$("input.answerBox").live("keypress", function(event) {
    if ((event.which == 13) && (i < textInputArrayLength)){
                $("div.textInput").html(textInputArray[i])
                    .fadeIn(200);
               $("input.focus:last").focus();
               i++;
            }
 } 
```

同样，在 FF 和 Chrome 中一切都按预期工作，但在 IE 中则不然。textInput div 的内容被替换，但输入文本框在 IE 中没有获得焦点。

编辑：根据要求的html

```
<div id="menuBar">
<ul class="dropdown">
<li class="menuLi"><a href="#" class="blank">Item 1</a>
<ul class="sub_menu">
<li class="menuLi"><a href="#" class="blank">Number</a>
<ul class="sub_sub_menu">
<li class="menuLi"><a href="/test/index.php" class="menuItem blank">Sub Item 1</a></li>
<li class="menuLi"><a href="/test/index.php" class="menuItem blank">Sub Item 2</a></li>
</ul>
</ul>
</ul>
<br>
</div>
<div id="main">
<h1 class="header1">Quick Quiz</h1>
<div class="textInput">
</div>
</div>
<div class="footer"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:48:45.297

它`.fadeOut(100)`在 IE 中导致某种类型的冲突

如果我们改变它工作正常

```
$("div.textInput").fadeOut(100).html('<input class="textBox focus" type="text">').fadeIn(200); 
```

和

```
 $("div.textInput").html('<input class="textBox focus" type="text">').fadeIn(200); 
```

[http://jsfiddle.net/8mpRg/1/](http://jsfiddle.net/8mpRg/1/) `[Run in IE]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-13T14:35:46.723

我的 IE 焦点问题也与我使用淡出（）和淡入（）有关。我的简短代码设置焦点，使文本框闪烁两次并重置焦点：

```
$('#friend_name').focus();
$('#friend_name').fadeOut(400);
$('#friend_name').fadeIn(400);
$('#friend_name').fadeOut(400);
$('#friend_name').fadeIn(400);
setTimeout(function () {
  $('#friend_name').focus();
}, 1300); 
```

我发现为了让焦点功能在 IE 中工作，我需要添加一个比 fadexx 函数的组合延迟更长的延迟。

在 Chrome 中，我可以省略延迟`$('#friend_name').focus()`调用。

# facebook - Facebook 忽略默认活动隐私设置

> ID：10664023
> 
> 赞同：1
> 
> 时间：2012-05-19T09:36:37.433
> 
> 标签：facebook, facebook-graph-api, privacy

我已将我的应用程序的默认活动隐私设置为“仅限我”，但在显示身份验证对话框时，Facebook 会忽略此设置并始终显示“朋友”。我对预期的行为没有误解。它记录在这里：[https](https://developers.facebook.com/docs/opengraph/authentication/) ://developers.facebook.com/docs/opengraph/authentication/ 。

即使我在应用程序设置页面中预览对话框，它也会显示“朋友”而不是“只有我”。是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:45:04.183

因为您的 Facebook 帐户已经接受了默认隐私为“朋友”的应用程序。你可以改变它。
转到您的 Facebook 页面，然后转到隐私设置，然后选择应用程序： http: [//www.facebook.com/settings?](http://www.facebook.com/settings?tab=applications)
tab=applications 找到您正在谈论的应用程序，您会看到当前的隐私是“朋友”。你可以在这里改变它。

# javascript - 即使在被注释掉之后，jQuery 代码仍然在执行

> ID：10664025
> 
> 赞同：0
> 
> 时间：2012-05-19T09:37:14.660
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, comments

我有一个基本的 .js 文件，里面有这个

```
//$('#show').html('<%= escape_javascript(render(:partial => 'show')) %>'); 
```

当 .js 文件被调用时，上面的代码被执行并且部分被渲染，即使它被注释掉了。当代码被删除时，部分永远不会被渲染。DOM 保持不变，但我可以看到服务器在命令行中呈现的部分内容。是什么赋予了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T22:38:54.947

您正在注释掉在客户端执行的 JavaScript。

在客户端看到渲染的 JavaScript 之前，部分渲染发生在服务器端。

换句话说，注释掉 JavaScript 对*服务器*端处理的影响为零。如果您不希望显示服务器端字符串，请将其注释掉：

```
<%#= escape_javascript(etc) %> 
```

* * *

让我们假设部分渲染是这样的：

```
<h1>Foo bar baz</h1>
<div>Plugh!</div> 
```

为 JavaScript 转义 this 会将换行符变成一个`\n`（并且会转义单引号和双引号等），从而在客户端留下这个：

```
$('#show').html('<h1>Foo bar baz</h1>\n<div>Plugh!</div>'); 
```

无论 JS 是否被注释掉，除非你注释掉`escape_javascript`Ruby 代码的结果，否则部分都会呈现。

在客户端，如果 JS 被注释掉，它不应该更新`show`的 HTML——你是说它是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T14:26:27.117

我有一个类似的问题，并想出了一个解决方法来解决我想要的问题。也许这样的事情会帮助你！

与其将代码行注释掉，不如尝试构建一个逻辑运算符，让您在要运行的功能上进行“开/关”切换。我是这样设置的，所以我可以关闭脚本，但保留它以供将来参考：

```
var toggle = 1; 

if(toggle == 2){
   functions that you want to run when turned on... 
} 
```

由于您的变量不等于 2，因此 if 语句不会呈现其中存储的内容，从而有效地为您“注释”该代码！要将其重新打开，您只需将“切换”变量更改回 2（或您想要的任何“打开”值）。我为自己找到了一些解决方法，希望对您有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T09:42:25.243

检查这是不是这条线，或者你在其他地方有这个电话：

```
//$('#show').html('<%=escape_javascript(render(:partial => 'show'))%>');alert('This is the line'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T09:44:42.320

也许您的 escape_javascript 函数正在插入换行符？这将结束注释并导致执行换行符之后的任何内容。

# objective-c - 如何使用其 KEY 字符串解析没有引号的 JSON？

> ID：10664028
> 
> 赞同：4
> 
> 时间：2012-05-19T09:37:30.157
> 
> 标签：objective-c, ios, sbjson, json-framework

我想解析来自 iOS SBJSON 框架中以下 url 的 json 输出 [http://maps.google.com/maps?q=school&mrt=yp&sll=13.006389,80.2575&output=json](http://maps.google.com/maps?q=school&mrt=yp&sll=13.006389,80.2575&output=json)

```
while(1);{title:"school - Google Maps",url:"/maps?q=school\x26mrt=yp\x26sll=13.006389,80.2575\x26ie=UTF8\x26hq=school\x26hnear=",urlViewport:false,ei:"RCu3T4eeMqSiiAe7k-yZDQ",form:{selected:"q",q:{q:"school",mrt:"yp",what:"school",near:""},d:{saddr:"",daddr:"",dfaddr:""},geocode:""}, 
```

我正在使用[http://www.bodurov.com/JsonFormatter/](http://www.bodurov.com/JsonFormatter/)在线阅读。

在 ASIHttpRequest 响应方法中，我删除了**while(1);** 从响应

```
NSString *responseString = [[request resonseString]substringFromIndex:9]; //to remove while(1)
SBJSONParser * parser = [[SBJSONParser alloc]init];
NSDictionary *jsonDict = (NSDictionary*)[parser objectFromString:responseString];
NSLog(@"%@",jsonDict) // prints null
// [responseString JSONValue] also reports error 
```

我猜没有双引号的 JSON 键会导致问题。

而不是 { **"title":** "hospital - Google Maps", "urlViewport": false, }，我们得到 { **title:** "hospital - Google Maps", "urlViewport": false }

请帮我解析从谷歌返回的这个复杂的 JSON 结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-05T21:47:47.800

这对我的情况更有效，因为我的值包含导致上述答案中的正则表达式匹配不正确的时间。

```
json = [json stringByReplacingOccurrencesOfString: @"(\\w*[A-Za-z]\\w*)\\s*:"
                                       withString: @"\"$1\":"
                                          options: NSRegularExpressionSearch
                                            range: NSMakeRange(0, json.length)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:59:19.920

您需要将缺少的引号添加到键中，因此请尝试以下操作：

```
responseString = [responseString stringByReplacingOccurrencesOfString:@"(\\w+)\\s*:" 
                                 withString:@"\"$1\":" 
                                 options:NSRegularExpressionSearch 
                                 range:NSMakeRange(0, [responseString length])]; 
```

这应该适用于给定的 JSON 字符串。

# c# - 如何使用 html 元素清除网页中的文本框

> ID：10664029
> 
> 赞同：-1
> 
> 时间：2012-05-19T09:37:37.670
> 
> 标签：c#, browser

我正在尝试在网页上写电子邮件。但是，我想在页面上写之前清除文本框。因为，如果文本框中有任何其他电子邮件，则以下代码不起作用。

如何使用 html 元素清除网页中的文本框？

```
HtmlElement ele = webBrowser.Document.GetElementById("email"); 
if (ele != null)
    ele.InnerText = "myacc@gmail.com"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:16:21.933

尝试这个：

```
ele.SetAttribute("value", ""); 
```

另一种选择是用于`Document.InvokeScript`调用清除文本框的 Javascript 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:42:11.453

尝试使用 value 属性来清除它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T09:47:00.947

嗯...如果您的意思是文本字段和 javascript 代码：

```
<input type="text" id="email"> 
```

那么你可以像这样简单地使用smth：

```
document.getElementById('email').value = 'myacc@gmail.com'; 
```

或者我误解了你的问题。

PS 哎呀。它似乎不像javascript，sry。

# web-services - 如何在没有 Jax-ws 的情况下在 Java EE 中开发有状态服务器

> ID：10664031
> 
> 赞同：1
> 
> 时间：2012-05-19T09:37:47.373
> 
> 标签：web-services, jakarta-ee, tomcat, stateful

我正在使用 Apache Tomcat 在 Java EE 中开发 Web 服务，到目前为止，我已经编写了一些基本的服务器端方法和一个测试客户端。我可以成功调用方法并获得结果，但是每次调用方法时，都会再次调用服务器构造函数，并且我也无法使用 set 方法修改服务器的实例变量。有没有一种特殊的方法可以在不使用 JAX-WS 或 EJB @Stateful 标签的情况下使我的服务器有状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T22:05:55.700

这在这里有点误解。有状态的 EJB 将维护一个客户端和服务器之间的会话，因此 EJB 状态仍然不会在不同的客户端之间共享。

您只能将无状态和单例 EJB 公开为 JAX-WS Web 服务。

最好的选择是使用数据库存储所有出价，并在拍卖完成后选择获胜的。

如果您想使用文件，那很好，只要您喜欢处理以下问题：

1.  同步从多个客户端访问该文件
2.  处理事务性读写
3.  解决文件损坏问题
4.  如果你足够倒霉，可能会出现一堆其他问题

听起来工作量很大，任何健全的数据库引擎都可以完成。

# php - 将一个数字分成相等的部分并存储它们的累积和

> ID：10664033
> 
> 赞同：1
> 
> 时间：2012-05-19T09:38:06.827
> 
> 标签：php, math

简单的问题，除数时如何获得每个选项？例如：

*   `24 by 6`返回`6, 12, 18, 24`
*   `24 by 4`返回`4, 8, 12, 16, 20, 24`
*   `24 by 5`返回`false`

我的数据库中有一个数字，例如 2，我的计数器，例如 14。这意味着每次我的计数器达到第二个数字时，我都想触发我的事件。所以我想，如果我有解决方案 2、4、6 等，并且我的计数器等于解决方案之一，我可以触发我的事件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T11:04:38.907

制作起来相当简单。

```
<?php

/**
 * @param int $number  The beginning number
 * @param int $divider The number dividing by
 *
 * @return array
 * @throws Exception   In case $number is not divisible by $divider
 */
function get_number_sequence($number, $divider) {
    //In case $number is not divisible by $divider, throw an Exception.
    if ($number % $divider !== 0) {
        throw new Exception("$number is not divisible by $divider");
    }
    //Return an array from $divider to $number in steps of $divider.
    $result = range($divider, $number, $divider);
    return $result;
}

/*
 * Testing begins
 */

try {
    echo "<pre>";
    echo implode(", ", get_number_sequence(24, 4)) . PHP_EOL;
    echo implode(", ", get_number_sequence(24, 6)) . PHP_EOL;
    echo implode(", ", get_number_sequence(24, 5)) . PHP_EOL;
    echo "</pre>";
}
catch (Exception $e) {
    echo "Invalid: " . $e->getMessage();
} 
```

## 几点

*   如果发生异常情况，请不要返回 false，`Exception`如示例中所示使用 an。
*   使用模运算符来确定数字是否可整除。
*   返回一个数组，而不是一个字符串。使用起来更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:23:47.407

```
function steps($target,$step) {
    if (($target % $step) != 0)
        return FALSE;
    $steps = range($step,$target,$step);
    return $steps;
}

$target = 24;
for ($step = 2; $step < 13; ++$step) {
    echo '$step = ',$step,PHP_EOL;
    $steps = steps($target,$step);
    var_dump($steps);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T09:43:47.557

应该很容易对 X 进行模数 Y 。如果为 0，则在 X 上除以 Y。创建一个循环，该循环将从 1 运行到（在 X 上除以 Y）并输出 Y 乘以循环计数器

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T09:46:35.987

```
function findQuotients($number, $divider)
{
    $arr = array();

    if($number % $divider != 0)
    {
        //return "false";        
    }
    else 
    {
        $loop = $number / $divider;
        //$output="";
        for($i = 1; $i <= $loop; $i++)
        {
            //$output .= $i * $divider. " ";
            array_push($arr, $i * $divider);
        }           
    }
    return $arr;
}

echo print_r(findQuotients(24, 6));
echo print_r(findQuotients(24, 4));
echo print_r(findQuotients(24, 5)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T10:10:12.093

根据您的描述，您想将一个数字相乘，然后根据给定的结果，您想将一个函数变白：

```
$num = 6;
$counter = 2;
$solution = 24;
while ($num * $counter) {
    $result= $num * $counter;
    if ($result = $solution) {
        echo $result;
        // here would go your event
        break;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-19T09:45:05.160

尝试这个

```
$number = 24;
$divider = 6;
if($number % $divider != 0 )
{ 
    return false;
}
$div = $number / $divider;

for($i = 1; $i <= $div; $i++)
{
    echo $i*$divider;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-19T09:46:34.010

下面的代码片段可以解决问题。这是一个简单的循环，迭代直到`$num`is <= 0.`$num`将被除法器减去，并且每转下一个倍数`$div`将存储为*“除法器步骤”*。

```
$num = 24;
$div = 4;

if ($num % $div != 0) {
    exit('invalid');
}

$divider = array();
for ($i = 1; $num > 0; $i++) {
    $divider[] = ($i * $div);
    $num -= $div;
}

echo 'in: ' . $num . '<br />';
echo 'div: ' . $div . '<br />';
echo '<pre>';
print_r($divider);
exit; 
```

# android - Android 开发清单

> ID：10664036
> 
> 赞同：1
> 
> 时间：2012-05-19T09:38:14.743
> 
> 标签：android, manifest

嗨，我第一次制作一个 android 应用程序，但我被卡住了我已经制作了一个带有按钮的主菜单，我希望它转到另一个二级菜单，例如单击控制台游戏，然后转到控制台菜单视图然后从那里点击 PlayStation 按钮进入谷歌地图。问题是当我进入控制台菜单时，即使我将 onclicklistener 方法设置为右侧按钮，这些按钮也无济于事。我已将其范围缩小（我认为）到问题所在的清单，但我找不到问题所在。这是整个代码。请帮助谢谢。:)

```
<uses-sdk android:minSdkVersion="10" />
 <uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

<application
    android:icon="@drawable/gf_icon"
    android:label="@string/app_name" 
    android:theme="@android:style/Theme.NoTitleBar"
    android:debuggable="true">

    <uses-library android:name="com.google.android.maps" />

    <!--splash screen-->
    <activity
        android:name=".myMain"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <!-- main screen -->
    <activity
        android:name=".myMenu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.irou.geekfast.CLEARSCREEN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <!-- console games menu -->
     <activity
        android:name=".consoleGames"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.irou.geekfast.CONSOLEGAMES" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

     <!-- console games menu -->
     <activity
        android:name=".consoleGames"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.irou.geekfast.CONSOLEGAMES" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

     <!-- hardware menu -->
      <activity
        android:name=".mainMenu"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="com.irou.geekfast.MAINMENU" />
            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>
    </activity>

      <activity
        android:name=".helpBox"
        android:label="@string/app_name" 
        android:theme="@android:style/Theme.Dialog">
        <intent-filter>
            <action android:name="com.irou.geekfast.HELPBOX" />
            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

        <!-- Map activity -->
      <activity
        android:name=".consoleMap"
        android:label="@string/app_name" >

        <intent-filter>
            <action android:name="com.irou.geekfast.CONSOLEMAP" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:49:30.933

从您提供的信息看来，您缺少意图过滤器

```
<intent-filter>
      <action android:name="android.intent.action.MAIN" />
       <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

# console - 在 Windows 注册表中，控制台宽度存储在哪里？

> ID：10664039
> 
> 赞同：2
> 
> 时间：2012-05-19T09:38:43.427
> 
> 标签：console, windows-xp, registry, width

我的默认控制台宽度是 80，但是当我查看`HKCU\Console`没有具有此值的名称时。只有一个应该与它有关的是：`WindowSize`但它的值为 0x190050，即 dec: 1638480。它的最后两位数字是否代表我正在搜索的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T09:42:19.907

在 HKCU\控制台

0x19 = 25
0x50 = 80
所以这是 25x80

在十进制中，它是行乘以 65,536 加上列。`(25 * 65536) + 80 = 1638480`

文档在[这里](http://technet.microsoft.com/en-us/library/cc978585.aspx)。

# javascript - 在 Facebook 订阅 AJAX 事件

> ID：10664047
> 
> 赞同：0
> 
> 时间：2012-05-19T09:39:24.433
> 
> 标签：javascript, jquery

我正在开发浏览器扩展。我希望它能够作用于 Facebook 中的所有 DOM 元素。现在 Facebook 只在页面加载时加载页面的开头，然后重复 AJAX 请求以获取页面的其余部分。我想知道这些负载何时发生，以便检查添加的 DOM 元素。有没有办法做到这一点？我尝试了 jQuery 的[ajaxSend](http://api.jquery.com/ajaxSend/)，但它没有触发。顺便说一句，由于这是一个浏览器扩展，我可以完全访问 DOM。

# android - 无法在 android 中序列化 KSOAP 中的问题

> ID：10664051
> 
> 赞同：0
> 
> 时间：2012-05-19T09:40:23.330
> 
> 标签：android, ksoap2

我在我的应用程序中使用 SOAP 服务，因为当我调用 SOAP 服务时，它会引发一些无法序列化的问题：

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);           
     SoapObject authentication = new SoapObject(NAMESPACE,"authentication");
     PropertyInfo usrid =new PropertyInfo();
     usrid.setName("LoginID");
     usrid.setValue("sting");
     usrid.setType(String.class);
     authentication.addProperty(usrid);        

     PropertyInfo pass =new PropertyInfo();
     pass.setName("Password");
     pass.setValue("string");
     pass.setType(String.class);
     authentication.addProperty(pass);  

     request.addSoapObject(authentication);

     PropertyInfo nos =new PropertyInfo();
     no.setName("No");
     no.setValue(no);
     no.setType(String.class);
     //authentication.addProperty(no);
     request.addProperty("Str", nos);

     SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
     envelope.setOutputSoapObject(request);
     envelope.dotNet=true;    
     HttpTransportSE androidHttpTransport = new HttpTransportSE(URL); 
     try
     { 
          androidHttpTransport.call(SOAP_ACTION,envelope);
          Object result=(Object)envelope.getResponse(); --------->Here i am getting nullpointer.
          Log.i("myApp",result.toString());         
          System.out.println("subbu="+result.toString());
     } 
```

我的请求结构是：

```
<authentication>
    <LoginID>string</LoginID>
    <Password>string</Password>
</authentication>
<No>string</No> 
```

我收到错误消息：

```
java.lang.RuntimeException: Cannot serialize:No: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:49:46.563

在我看来，您的代码不应在您编写时编译：

```
PropertyInfo nos =new PropertyInfo();
no.setName("No");
no.setValue(no);
no.setType(String.class);
//authentication.addProperty(no);
request.addProperty("Str", nos); 
```

你明确的意思是：

```
PropertyInfo nos =new PropertyInfo();
nos.setName("No");
nos.setValue(no);
nos.setType(String.class);
//authentication.addProperty(nos);
request.addProperty("Str", nos); 
```

无论如何，我觉得这是一个错字，在你的真实代码中你没有犯这个错误。
所以要回答你的问题，你应该告诉哪个是空对象。从您提供的代码片段中无法猜测它。
使用断点并在调试模式下运行您的应用程序。然后提供有关空对象的信息。
此外，显示您的 WSDL 也会有很大帮助。

# android - 避免在 android 中可能出现 null

> ID：10664053
> 
> 赞同：-1
> 
> 时间：2012-05-19T09:41:25.803
> 
> 标签：android, forceclose

我有一种情况，我可能会遇到可能的空值，我不希望我的程序崩溃。它只发生在一小部分用户身上，我不完全确定为什么，但我知道正在执行此操作的代码部分。基本上`isAchieved()`是一个应该返回一个布尔值的检查，但在少数情况下它返回一个空值。这是 scoreloop 库的一部分，我怀疑该错误可能与他们的代码有关。

而不是强制关闭并退出程序，有没有办法检查这个值是否会返回一个空值，如果是这种情况，只需跳过这部分代码？

```
if (_achievements[ltc].isAchieved()) {
   // Do stuff for 99.9% of users here, but skip if .isAchieved() would force close
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:44:25.907

```
 boolean checker=false;
        try{
            checker=_achievements[ltc].isAchieved();
        }
        catch(NullPointerException e){
        }
        if (checker) {
           //content
        } 
```

你有没有想过这样做？

# android - 如何在android中的两个视图之间画线？

> ID：10664054
> 
> 赞同：-3
> 
> 时间：2012-05-19T09:41:26.623
> 
> 标签：android, android-canvas, android-view

我想在两个视图之间画一条线，如何使用画布

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T09:52:52.720

它很简单在两个视图之间为其使用一个线性布局

```
 <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="1dp"
            android:background="#285A8C" > //Give Color As u want
        </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:24:47.700

Thanks every one i got the following solution for this I am using three layouts the middle layout i used for canvas and draw points in that canvas on button on click event

DrawView.java

```
 package demo.example;

 import android.content.Context;
 import android.graphics.Canvas;
 import android.graphics.Color;
 import android.graphics.Paint; 
 import android.view.View;

public class DrawView extends View {
  Paint paint = new Paint();
   float [][] points;
    public DrawView(Context context, float[][] points2, int k) {
    super(context);
    paint.setColor(Color.BLUE);
    paint.setStrokeWidth(5);
    this.points=points2;
}

@Override
 public void onDraw(Canvas canvas) {
    for(int i=0;i<points.length;i++)
    {
    canvas.drawLine(points[i][0],points[i][1],points[i][2],points[i][3], paint);
    }    
  }
 } 
```

get points using following click listener

```
 public  class listener implements OnClickListener
   {
      int i;   
      listener(int k)
       {
           this.i=k;
       }
        public void onClick(View v)
        {
            for(int k=0;k<match1.length;k++)
            {   
                    if(match1[k].isClickable()==false)
                   {    
                     if(match1[k].getId()==match2[i].getId())
                     {

                        points[k][0]=match1[k].getLeft();
                             points[k]1]=match1[k].getTop()+30+linearLayout2.getTop();                       points[k][2]=200;
                         points[k][3]=match2[i].getTop()+30+linearLayout2.getTop();

                         match1[k].setCompoundDrawablesWithIntrinsicBounds(null, null,null,null);
                         match2[i].setCompoundDrawablesWithIntrinsicBounds(getResources().getDrawable(R.drawable.bubble), null,null, null);

                         Toast.makeText(getBaseContext(),points[0]+"-"+points[1]+"-"+points[2]+"-"+points[3],Toast.LENGTH_SHORT).show();    

                     ViewGroup.LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);

                     drawView = new DrawView(getBaseContext(),points,k);
                                     linearLayout2.addView(drawView);

                     } 
                   }
                  }
        }
} 
```

# javascript - 从后面的代码中销毁 Jquery Cookie

> ID：10664063
> 
> 赞同：1
> 
> 时间：2012-05-19T09:43:28.783
> 
> 标签：javascript, jquery, html, cookies

我有一个应用程序，它有一个从 10 分钟开始倒计时的 Jquery cookie，有没有办法从后面的代码中销毁 Jquery cookie，我想我已经知道了这个问题的答案，你不能吗？但我只是好奇是否有人这样做过？

```
$.cookie('time', '0:00', { expires: 1 }); 
```

以下设置烹饪在一天后过期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:47:25.093

您可以通过将值设置为 null 来销毁 cookie：

```
$.cookie("time", null); 
```

# java - 有什么办法可以改进这个 Java 代码？

> ID：10664071
> 
> 赞同：-5
> 
> 时间：2012-05-19T09:44:28.813
> 
> 标签：java, performance, function, finance

有人可以帮我优化这段代码吗？

```
public final List<Double> Imprve() {    
List<Double> locDbValueList = new LinkedList<Double> ();
    for (int i = 0; i < 50000; ++i) {
     Calendar locMyCalendar = new GregorianCalendar ();
      locDbValueList.add(getNewDbValue(locMyCalendar.get(Calendar.YEAR), i));
}
    updateList(locDbValueList) ;    
    Integer locResult = 0 ;
    for (int i = 0; i < locDbValueList.size(); ++i) {
      final Integer locTempVal = doOperation(locDbValueList.get(i));
      if (locTempVal != null) {
        locResult += locTempVal;
      }
    }
    applyResult(locResult) ;
    return locDbValueList;
}

private Double getNewDbValue(int parYear, int parIdx) { … }
private void updateList(List<Double> valList) { … }   //Modifies value not size
private int doOperation (Double parDbRefValue) { … }
private void applyResult (int parIntValue) { … }* 
```

我想修改类 Imprve 以提高功能的及时性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T10:30:01.350

我不是在测试您的代码的性能。但是，我确实在给出的代码中看到了以下问题。

1.  根据 Java 编码约定，每个方法名称都应以小写字母开头。所以你应该将你的方法重命名`Imprve`为`improve`.
2.  您已经在 for 循环中创建`locMyCalendar`了一个实例。`Calendar`在这种情况下，您是只读`Year`属性。这是完全没有必要的。你应该从这个地方删除这条线。并且把它放在某个地方。这也是一个性能打击。
3.  `locTempVal`不需要对 进行空检查。因为，`doOperation`方法返回`int`并且`int`不太可能是一个`null`值。
4.  并且对于 locResult 和 locTempVal 的类型使用“int”而不是“Integer”，因为每次都不需要创建 Integer 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:04:44.373

使用 ArrayList 而不是 LinkedList。

根据经验，向量（如 Java 的 ArrayList）容器将优于链表容器（如 LinkedList）。就内存大小而言，这始终是正确的，因为向量容器不会对内务数据施加每个元素的开销。在大多数情况下，时间性能也会更好，因为更好的引用局部性和更小的内存大小（因此需要更少的昂贵内存访问）。仅当您在数据中添加和删除许多元素时，链表容器在速度方面可能优于矢量容器。请注意，当容器存储对象时，引用改进的局部性在 Java 中可能不像在 C++ 中那样明显，因为无论如何这些都是通过指针间接访问的。

在您的情况下，所有决策标准都指向使用向量容器（ArrayList）。你事先知道容器的大小，你不会在容器的中间添加元素，你存储的是 Double 值，编译器可能会将其作为普通的 double 值存储在容器中。

# android - 布局实现

> ID：10664080
> 
> 赞同：0
> 
> 时间：2012-05-19T09:45:46.193
> 
> 标签：android, layout

我想设计一个这样的用户界面， ![在此处输入图像描述](../Images/b45fa56aff77523f948322652bcd48fb.png)

但是我无法在底部添加这些按钮，并且我不知道如何将 textview 置于中心位置。

这是我的代码。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<ImageView
    android:id="@+id/poster"
    android:layout_width="130dp"
    android:layout_height="158dp"
    android:scaleType="center"
    android:src="@drawable/ic_launcher" />
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="158dp"
    android:orientation="vertical" >

<TextView 
    android:layout_height="wrap_content" 
    android:id="@+id/titleTextView" 
    android:text="TextView" 
    android:layout_width="fill_parent"
    android:gravity="center"
    android:layout_gravity="center"
    android:layout_centerInParent="true"
    ></TextView>
</LinearLayout>
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">

     <Button 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="button1" 
        android:id="@+id/button1button"></Button>

      <Button 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="button2" 
        android:id="@+id/button1button2"></Button>

       <Button 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="button3" 
        android:id="@+id/button1button3"></Button>

    </LinearLayout> 
```

这里的输出看起来如何。请帮助我在我的代码中要做哪些更改

![在此处输入图像描述](../Images/3ea4162e5abd9b0d0cdc63c77bab158d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:53:37.657

将您的父布局转换为`RelativeLayout`并开始在内部将其他视图相对于彼此对齐。它将帮助您在屏幕上的任何位置分配视图，无论其大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:14:10.810

可能对你有帮助，试试吧

```
 <LinearLayout android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <TableLayout
                    android:id="@+id/tblLayout"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TableRow
                        android:id="@+id/tblLayout_tableRow1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:gravity="center" >

                        <TableLayout
                            android:id="@+id/tblLayout_tableRow1_tbllayout1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" >

                            <TableRow
                                android:id="@+id/tblLayout_tableRow1_tbllayout1_tableRow1"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:gravity="center" >

                                <TextView
                                    android:id="@+id/tblLayout_tableRow1_tbllayout1_tableRow1_txtviewspace"
                                    android:layout_width="150px"
                                    android:layout_height="20px" />

     </TableRow>
                            <TableRow
                                android:id="@+id/tblLayout_tableRow1_tbllayout1_tableRow2"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content" >

                                <TextView
                                    android:id="@+id/tblLayout_tableRow1_tbllayout1_tableRow2_tbltxtviewspace"
                                    android:layout_width="30px"
                                    android:layout_height="40px" />
                            </TableRow>
                        </TableLayout>
                    </TableRow>

                    <TableRow
                        android:id="@+id/tblLayout_tableRow2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" >

                        <TableLayout
                            android:id="@+id/tblLayout_tableRow2_tblLayout1_tableRow2_tblLayout1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" >
    <TableRow
                             android:id="@+id/tblLayout_tableRow2_tblLayout1_tableRow2_tblLayout1_tableRow2"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/poster"
        android:layout_width="130dp"
        android:layout_height="158dp"
        android:scaleType="center"
        android:src="@drawable/ic_launcher" />
    </TableRow>
     </TableLayout>
                    </TableRow>   

      <TableRow
                        android:id="@+id/tblLayout_tableRow3"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:gravity="center" >

         <Button 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:text="button1" 
            android:id="@+id/button1button"></Button>

          <Button 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:text="button2" 
            android:id="@+id/button1button2"></Button>

           <Button 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:text="button3" 
            android:id="@+id/button1button3"></Button>

        </TableRow>
    </TableLayout>
    </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T10:37:04.487

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="10dp"
    android:text="Dummy text" />

<ImageView android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="36dp"
    android:src="@drawable/chilly" />

<TextView android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:layout_marginRight="76dp"
    android:text="Dummy Text" />

<Button android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="202dp"
    android:text="Button3" />

<Button android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="88dp"
    android:text="Button2" />

<Button android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_toRightOf="@+id/button1"
    android:text="Button1" /> 
```

# documentation - Mark Pilgrim 的“潜入 Greasemonkey”的著名来源

> ID：10664086
> 
> 赞同：5
> 
> 时间：2012-05-19T09:46:35.050
> 
> 标签：documentation, greasemonkey

鉴于[Mark Pilgrim](http://en.wikipedia.org/wiki/Mark_Pilgrim_%28software_developer%29)在 2011 年 10 月 6 日推出了他的“ [Dive into Greasemonkey](http://en.wikipedia.org/wiki/Greasemonkey#External_links) ”，它的可靠来源是什么？

我不想去恶意软件出没的网站获取它。例如，www.freetechbooks.com 是否有信誉？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-19T09:56:51.723

互联网档案（Wayback Machine）仍然有它。这是[2011 年 7 月 26 日最后记录的快照](http://web.archive.org/web/20110726001221/http://diveintogreasemonkey.org/)。

请注意，这本书最后一次更新是在 2005 年，并且已经过时了。该网站本身说（说）这个：

> 这本书已经过时了，可能永远不会更新。[您可以在 Greasemonkey wiki](http://wiki.greasespot.net/)上找到更多最新信息。

# sencha-touch - 使用 sencha touch2 动态创建轮播

> ID：10664104
> 
> 赞同：1
> 
> 时间：2012-05-19T09:49:56.477
> 
> 标签：sencha-touch, extjs, sencha-touch-2, carousel

我有以下示例 MVC 应用程序尝试使用从某个远程 url 获取的图像源动态创建轮播，当我执行应用程序时，我没有看到任何图像被附加到我的 carouselview，请任何人都可以突出显示我出错的地方?

型号代码：

```
Ext.define('Sencha.model.ImageModel', {
    extend: 'Ext.data.Model',

    config: {
        fields: [
            'id', 'title', 'link', 'author', 'content',
            {
                name: 'image',
                type: 'string',
                convert: function (value, record) {
                    var content = record.get('content'),
                        regex = /img src=\"([a-zA-Z0-9\_\.\/\:]*)\"/,
                        match = content.match(regex),
                        src = match ? match[1] : '';

                    if (src != "" && !src.match(/\.gif$/)) {
                        src = "http://src.sencha.io/screen.width/" + src;
                    }

                    return src;
                }
            }
        ]
    }

}); 
```

店铺代码：

```
Ext.define('Sencha.store.ImageStore', {
    extend: 'Ext.data.Store',
    config: {
        model: 'Sencha.model.ImageModel',

        proxy: {
            type: 'jsonp',
            url: 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&q=http://www.acme.com/jef/apod/rss.xml&num=20',

            reader: {
                type: 'json',
                rootProperty: 'responseData.feed.entries'
            }
        }
    }
}); 
```

控制器代码：

```
Ext.define('Sencha.controller.CarouselController', {
    extend: 'Ext.app.Controller',
    config:
        {
            init: function () {
                var carousel = Ext.getCmp('imagecarousel');
                Ext.getStore('ImageStore').load(function (pictures) {
                    var items = [];
                Ext.each(pictures, function (picture) {
                        if (!picture.get('image')) {
                            return;
                        }

                        items.push({
                            xtype: 'apodimage',
                            picture: picture
                        });
                    });

                    carousel.setItems(items);
                    carousel.setActiveItem(0);
                });
            }
        }
}); 
```

查看代码：

```
Ext.define('Sencha.view.CarouselView', {
    extend: 'Ext.Img',
    id:'imagecarousel',
    xtype: 'apodimage',

    config: {
        /**
        * @cfg {apod.model.Picture} picture The Picture to show
        */
        picture: null
    },

    updatePicture: function (picture) {
        this.setSrc(picture.get('image'));
    }
}); 
```

App.js 代码：

```
Ext.Loader.setConfig({
    enabled: true
});
Ext.require([
    'Ext.carousel.Carousel',
    'Ext.data.proxy.JsonP'
]);

Ext.application({
    name: 'Sencha',
controllers: ['CarouselController'],
stores: ['ImageStore'],
models: ['ImageModel'],
//views:['CarouselView'],
  launch: function () {
        Ext.create('Sencha.view.CarouselView');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:45:23.883

可以更具体地说明什么不起作用。尝试在您的代码中添加 console.logs 并给我们结果，例如 Ext.each 末尾的项目大小之类的东西。

我的第一个想法是使用 store.load 的回调函数：

```
Ext.getStore('ImageStore').load(
  callback: function (pictures) {
  var items = [];
  Ext.each(pictures, function (picture) {
    if (!picture.get('image')) {
      return;
    }
    items.push({
      xtype: 'apodimage',
      picture: picture
    });
  });

  carousel.setItems(items);
  carousel.setActiveItem(0);
}); 
```

希望这可以帮助

# transform - 如何从傅里叶变换中绘制频谱

> ID：10664105
> 
> 赞同：2
> 
> 时间：2012-05-19T09:50:35.800
> 
> 标签：transform, fft, frequency, spectrum

我想绘制音乐文件的频谱（就像他们在 Audacity 中所做的那样）。因此，我想要 x 轴上的赫兹频率和 y 轴上的幅度（或分贝）。

我一次将歌曲（大约 2000 万个样本）分成 4096 个样本块。这些块将产生 2049 (N/2 + 1) 个复数（正弦和余弦 -> 实部和虚部）。所以现在我有这数千个单独的 2049 阵列，我该如何组合它们？

假设我做了 5000 次 FFT，得到 5000 个 2049 复数数组。我是否将 5000 个数组的所有值相加，然后取组合 2049 个数组的大小？然后我是否使用歌曲采样率 / 2（例如：22050 用于 44100hz 文件）来调整 x 轴？

任何信息将被appriciated

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T10:01:14.663

您为此使用什么应用程序？我假设您不是手动执行此操作，所以这是一个 Matlab 示例：

`>> fbins = fs/N * (0:(N/2 - 1)); % Where N is the number of fft samples`

现在你可以表演了

`>> plot(fbins, abs(fftOfSignal(1:N/2)))`

[被盗](http://www.mathworks.com/matlabcentral/newsreader/view_thread/162141)

编辑：看看这个[http://www.codeproject.com/Articles/9388/How-to-implement-the-FFT-algorithm](http://www.codeproject.com/Articles/9388/How-to-implement-the-FFT-algorithm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T09:43:09.650

我在这方面可能不正确，但据我所知，您有两种方法可以获得整首歌的频谱。

1）对整首歌曲进行一次FFT，这会给你一个非常好的频率分辨率，但实际上效率不高，而且你也不需要这种分辨率。

2）将它分成小块（如你所说的4096个样本块），为每个块获取FFT并平均光谱。您将在频率分辨率上妥协，但使计算更易于管理（并且还减少了频谱的方差）。Wilhelmsen 链接描述了如何在 C++ 中计算 FFT，我认为已经有一些库可以做到这一点，比如 FFTW（但我从来没有设法编译它，公平地说 =））。

要获得幅度谱，请平均每个 bin 的所有块的能量（幅度的平方）。要获得以 dB 为单位的结果，只需 10 * log10 的结果。这当然是假设您对相位谱不感兴趣。我认为这被称为[Barlett 方法](http://en.wikipedia.org/wiki/Bartlett%27s_method)。

我会做这样的事情：

```
//  At this point you have the FFT chunks

float sum[N/2+1];

// For each bin
for (int binIndex = 0; binIndex < N/2 + 1; binIndex++)
{
    for (int chunkIndex = 0; chunkIndex < chunkNb; chunkIndex++)
    {
        //  Get the magnitude of the complex number
        float magnitude = FFTChunk[chunkIndex].bins[binIndex].real * FFTChunk[chunkIndex].bins[binIndex].real
            +   FFTChunk[chunkIndex].bins[binIndex].im * FFTChunk[chunkIndex].bins[binIndex].im;

        magnitude = sqrt(magnitude);

        //  Add the energy
        sum[binIndex] += magnitude * magnitude;
    }

    //  Average the energy;
    sum[binIndex] /= chunkNb;
}

//  Then get the values in decibel
for (int binIndex = 0; binIndex < N/2 + 1; binIndex++)
{
    sum[binIndex] = 10 * log10f(sum[binIndex]);
} 
```

希望这能回答你的问题。

编辑：Goz 的帖子将为您提供有关此事的大量信息 =)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T09:47:28.073

哇，我最近写了一篇关于这个的文章。

我什至把它变成了一篇博文，可以[在这里找到](http://trueharmoniccolours.co.uk/Blog/)。

我的解释是倾向于频谱图，但它就像你描述的那样容易渲染图表！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T01:56:34.433

通常，您只需要一个数组，对应于您感兴趣的音乐的时间点。您将计算每个复杂数组元素的大小的对数。将 N/2 结果绘制为 Y 值，并将 X 轴从 0 缩放到 Fs/2（其中 Fs 是采样率）。

# assembly - NEASM - 内联方法跳转

> ID：10664107
> 
> 赞同：1
> 
> 时间：2012-05-19T09:51:08.577
> 
> 标签：assembly, methods

是否可以在 nesasm 中进行内联“方法”跳转（或任何可能在 nesasm 中工作的 asm）？

我的意思是：我得到了这样的代码。

```
Start;
    LDA $0000
    ; here goes more code
    JSR SomeMethod ; jump to method (put back pointer on stack)
EndOfMethod: ; just help label to make code more clear
    STA $0000
    ; here goes a lot of more code
SomeMethod:
    TAX
    ;here goes more method code
    RTS ; return to position on stack 
```

现在我想让'SomeMethod'内联（就像在C++中一样），所以编译时它看起来像这样：

```
Start;
    LDA $0000
    ; here goes more code
SomeMethod:
    TAX
    ;here goes more method code
EndOfMethod: ; just help label to make code more clear
    STA $0000
    ; here goes a lot of more code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:06:37.167

如果您的汇编器支持某种宏，尤其是带有参数的宏，那么您可以定义`SomeMethod`为宏并使用参数让每个实例都有自己的一组标签（通过将参数合并到标签名称中）。

就像是：

```
defMacro SomeMethodMacro(idx):
SomeMethod$idx:
    TAX
    ;code...
EndOfMethod$idx:
endMacro 
```

然后当你想在你的代码中粘贴一个实例时：

```
SomeMethodMacro(001) 
```

您将负责确保每个实例都有不同的论点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:01:46.893

不，在汇编语言中，*您*是编译器。您可以完全控制所使用的所有指令，同时也承担所有责任。

汇编器只是将指令从文本文件转换为二进制指令。

# c - 打印 unsigned long long int 值类型返回奇怪的结果

> ID：10664109
> 
> 赞同：11
> 
> 时间：2012-05-19T09:51:41.553
> 
> 标签：c, syntax, printf, unsigned-long-long-int

`printf`使用该函数打印类型值时遇到问题`unsigned long long int`

我不知道出了什么问题。我在 Windows 7 Professional 64 位上使用 Dev-Cpp 4.9.9.2 和 Visual Studio 2010 Professional（我知道它不是 C 编译器，但无论如何，想尝试一下）。为了显示，我使用`%llu`了修饰符（根据[How do you printf an unsigned long long int(the format specifier for unsigned long long int)?](https://stackoverflow.com/questions/2844/how-do-you-printf-an-unsigned-long-long-int)），但我也尝试了 I64d 没有效果......

* * *

首先，我只想打印`unsigned long long int`（使用`ULONG_MAX`from `limits.h`）的最小值和最大值

```
printf("unsigned long long int: \n%llu to %llu \n\n", 0, ULONG_MAX); 
```

回报：

> unsigned long long int: 18446744069414584320 到 1580552164021 *(Dev-Cpp)*
> 
> unsigned long long int: 18446744069414584320 到 0 *(Visual Studio)*

* * *

然后我尝试使用`printf`打印两个零

```
printf("unsigned long long int: \n%llu to %llu \n\n", 0, 0); 
```

回报：

> unsigned long long int: 0 到 1580552164021 *(Dev-Cpp)*
> 
> unsigned long long int：0 到 0 *(Visual Studio)*

* * *

还尝试了两个`ULONG_MAX`值

```
printf("unsigned long long int: \n%llu to %llu \n\n", ULONG_MAX, ULONG_MAX); 
```

回报：

> unsigned long long int: 18446744073709551615 到 1580552164021 *(Dev-Cpp)*
> 
> unsigned long long int: 18446744073709551615 到 0 *(Visual Studio)*

* * *

为什么它会这样？你能给我解释一下吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-19T09:58:53.113

这是错误的：

```
printf("unsigned long long int: \n%llu to %llu \n\n", 0, ULONG_MAX); 
```

您使用`unsigned long long`格式说明符，但您传递一个`int`和一个`unsigned long`值。促销规则意味着您可以对任何`int`尺寸或更小的东西草率，这*不适*用于`long long`.

使用演员表：

```
printf("unsigned long long int: \n%llu to %llu \n\n",
       0ULL, (unsigned long long) ULONG_MAX); 
```

**解释：**当将参数传递给 时`printf`，任何可以适合 an 的类型`int`都被提升为`int`，然后任何可以适合 an 的类型`unsigned int`都被提升为`unsigned int`。也可以将无符号类型传递给有符号格式说明符，反之亦然，只要传递的*值*可以使用格式说明符指定的类型来表示。

所以你必须小心使用`long`and `long long`，但你可能会对`int`,`short`和感到草率`char`。

**大多数编译器**都有设置让它们警告你这种类型的错误，因为它可以在编译时很容易地检测到；GCC 和 Clang 会`-Wformat`导致以下警告：

```
test.c:5：警告：格式“%llu”需要类型“long long unsigned int”，但参数 2 的类型为“int”
test.c:5：警告：格式“%llu”需要类型“long long unsigned int”，但参数 3 的类型为“long unsigned int”

```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-19T09:58:08.260

你没有通过`unsigned long longs`。您正在传递`int`(0) 和`unsigned long`(ULONG_MAX)。您必须`printf()`准确传递您承诺在格式字符串中传递的内容。

试试这个：

```
printf("unsigned long long int: \n%llu to %llu \n\n", 0ULL, (unsigned long long)ULONG_MAX); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-19T09:58:15.810

`ULONG_MAX`指`unsigned long`而不是`unsigned long long`。对于后者，使用`ULLONG_MAX`（注意额外的`L`）。

您需要`printf()`像这样更改调用：

```
printf("unsigned long long int: \n%llu to %llu \n\n", 0ULL, ULLONG_MAX);
printf("unsigned long long int: \n%llu to %llu \n\n", ULLONG_MAX, ULLONG_MAX); 
```

这确保了参数`printf()`与格式说明符相匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T11:31:24.710

long long int 是 C99 标准中的一种类型，MSVC 不支持这一点。使用支持 C99 的编译器（如 Windows 的 MinGW），它会工作。

# android - 了解简单的 ProgressDialogue ，另一个线程如何更新 UI？

> ID：10664110
> 
> 赞同：0
> 
> 时间：2012-05-19T09:51:48.357
> 
> 标签：android, dialog, progressdialog, android-ui

这个例子是从一本关于 Android 的书中复制而来的。正如您从我的问题中看到的那样，我是 Android 新手并试图理解。**这个应用程序应该崩溃但它没有**（我正在从另一个线程更新 UI。这是不允许的。它应该会导致崩溃。它不会。为什么？）。我的代码是：

```
final ProgressDialog dialogue = ProgressDialog.show(this, "title", "message");

       new Thread(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
                try {
                    Thread.sleep(7000);
                dialogue.dismiss();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

        }
    }).start(); 
```

这是在`OnCreate`函数中完成的。我对线感到困惑 -`dialogue.dismiss();`这不是从另一个线程更新 UI（关闭对话）吗？为什么这个应用程序**不会**导致分段错误？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:56:10.837

你不能`dismiss()`在 run 方法中使用它，因为它是`non UI thread`.and 如果你想关闭然后使用[Handler](http://developer.android.com/reference/android/os/Handler.html)。最好使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:52:30.687

代码是正确的只有人。你正在使用 .start 函数启动一个线程，然后调用 run 函数，然后在 7 秒后对话将关闭。dialog.dismiss() 用于关闭对话。如果你不会调用dismiss()，进度条永远不会消失。您可以通过评论Thread.sleep(7000)行来检查。

# android - 看不懂这个比例位图代码

> ID：10664111
> 
> 赞同：0
> 
> 时间：2012-05-19T09:51:51.977
> 
> 标签：android, bitmap

在其中一个教程中，Google 提出了以下缩放位图算法以使位图适合给定窗口：

```
public static int calculateInSampleSize(
            BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }
    }
    return inSampleSize;
} 
```

（[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)）

我不明白这`if(width > height)`部分

假设一个位图的高度为 5，宽度为 2。然后假设一个窗口的高度为 1，宽度为 1。看起来位图不适合窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:41:34.067

它确保遵守尺寸比例

# android - 将数据从服务发送到活动和屏幕旋转

> ID：10664114
> 
> 赞同：2
> 
> 时间：2012-05-19T09:52:03.633
> 
> 标签：android, android-service, android-activity

我正在使用一个执行操作的 Intent 服务，并且需要将操作结果传递回启动它的活动。

我已经搜索了几十个类似的帖子，但据我所知，我发现的所有解决方案都有问题。他们不能很好地处理屏幕旋转。假设一个活动启动了 Intent 服务，该服务需要 10 秒来执行该操作，并且在这 10 秒内，屏幕会旋转。该活动被破坏并创建一个新活动。

1.  使用接收器：它会造成内存泄漏，因为接收器绑定到必须销毁的活动，因此活动永远不会被销毁。
2.  使用广播：您必须注册一个监听器，并在活动被销毁之前取消注册监听器。如果广播消息在监听器未注册之后到达，并且在新活动的监听器注册之前，将永远不会收到该消息。
3.  使用消息：与接收者相同。
4.  将共享首选项/数据库与侦听器一起使用：与广播相同。

我想出的解决方案是让服务将结果保存在首选项文件中，并定期检查活动（假设每 200 毫秒）以查看首选项文件中的更改。因此，当屏幕旋转时，活动停止检查，并在重新创建时重新开始。如果结果是在两者之间传递的，它仍然会到达（重新创建的）活动。但是，这似乎会消耗 cpu 并从 SD 卡执行不必要的读取。

另一种解决方案是让服务将结果保存在首选项文件/数据库中，并将全局变量设置为它保存它的时间。该活动有一个首选项文件/数据库的侦听器。在注册监听器之前，它会检查全局变量以查看是否在屏幕旋转期间放置了结果（global var < currentTimeMillies()），如果为真，则获取结果，如果不是，则注册监听器。由于结果可能放在检查和注册之间，因此必须在一个块内完成，在该块中活动持有一个锁，服务必须获取该锁才能放置结果。这也可以，但是太复杂了。

有没有一种更简单、更优雅的方法，可以在屏幕旋转中幸存下来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:52:04.050

看看我对这个问题的回答：

[如何处理服务和活动（及其子活动）之间的 IPC？](https://stackoverflow.com/questions/10485342/how-to-handle-ipc-between-a-service-and-an-activity-and-its-subactivity/10519846#10519846)

也许这会给你一个想法。

**编辑（添加以下建议）：**

另一种方法是使用您在活动中创建的接收器。在屏幕旋转时，操作系统将调用 onRetainNonConfigurationInstance()，您可以在其中返回 Receiver 实例，并将其移交给新的 Activity（请参阅 getLastNonConfigurationInstance()）。注意：这些方法在 4.0 中已被弃用，您可以使用 Fragment 和 setRetainInstance() 来实现类似的行为。

# c# - 在 C# 2010 中创建 .msi 或安装文件

> ID：10664117
> 
> 赞同：-2
> 
> 时间：2012-05-19T09:53:05.660
> 
> 标签：c#

如何从我在 VC# 2010 中创建的应用程序创建 .msi 文件或设置文件。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:58:08.107

在与可执行包相同的解决方案中，创建一个“安装”项目

[http://msdn.microsoft.com/en-us/library/19x10e5c.aspx](http://msdn.microsoft.com/en-us/library/19x10e5c.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:55:52.987

[msdn 中的部署任务和演练](http://msdn.microsoft.com/en-us/library/206sadcd)非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T09:56:31.740

在[Visual Studio 2010 中创建安装项目 - 创建安装项目并添加 File Types.mp4 - YouTube 。](http://bit.ly/L1E0NE)

# php - jquery引导分页

> ID：10664123
> 
> 赞同：0
> 
> 时间：2012-05-19T09:54:02.647
> 
> 标签：php, jquery, jquery-plugins, twitter-bootstrap

你对我在哪里可以获得引导分页插件有什么建议吗？我在互联网上搜索，发现**[这个](http://uliweb.clkg.org/static/bootstrap/2.0.3/js/bootstrap-pagination.js)**问题是我不知道如何使用它，因为他们没有任何文档。jquery引导分页的建议家伙？

我正在使用 PHP

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T12:11:30.083

嗨**演示**:) [http://jsfiddle.net/VHZqj/6/show/](http://jsfiddle.net/VHZqj/6/show/) *或* [http://jsfiddle.net/VHZqj/6/](http://jsfiddle.net/VHZqj/6/)或[http://jsfiddle.net/GewE4/](http://jsfiddle.net/GewE4/)

其余的整个讨论都在上面的评论中。

想法是让 twitter 引导程序正常工作，即完整的设置和 ui 以及使用它的分页。请注意，这不使用和 tablesorter 分页。

祝你好运，加油

# android - Android Layout，当布局与 Tabhost 耦合时，软键盘将屏幕元素推送到不对齐

> ID：10664125
> 
> 赞同：0
> 
> 时间：2012-05-19T09:54:49.597
> 
> 标签：android, android-layout, android-linearlayout, android-tabhost

我尝试在清单中切换窗口软输入模式无济于事。每当我点击 edittext 并且软键盘出现时，它会挤压我的文本输入以及按钮。

这是我的布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayoutRoot"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:layout_weight=".12" >
        <ImageView
            android:id="@+id/topBarImage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/top_banner2" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight=".15"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/NameText"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_weight=".60"
            android:inputType="textShortMessage|textAutoCorrect|textCapSentences|textMultiLine"
            android:text="Name" >
        </EditText>

        <Button
            android:id="@+id/name_picker"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_weight=".10"
            android:onClick="doLaunchContactPicker"
            android:text="+" >
        </Button>

        <Button
            android:id="@+id/addButton"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_weight=".30"
            android:text="Add Diner" >
        </Button>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout5"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight=".55"
        android:orientation="vertical"
        android:scrollbars="vertical" >

        <ListView
            android:id="@+id/userListView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:divider="#7A1962"
            android:dividerHeight="1dip" >
        </ListView>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/LinearLayout2"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_alignParentBottom="true"
        android:layout_weight=".15"
        android:gravity="center_horizontal"
        android:orientation="vertical"
        android:padding="0dip" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:57:37.450

这可能是因为 LinearLayout。在定义 LinearLayout 之前，请在 RelativeLayout 中包含布局。这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:30:57.420

你检查过 api-demos 吗？去那里应用程序->活动->软输入模式：http: [//developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/SoftInputModes.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/SoftInputModes.html)

他们有多种方法来处理软键盘的出现方式。

# php - https 与 php curl - 不支持协议，但 curl 命令行连接正常

> ID：10664126
> 
> 赞同：0
> 
> 时间：2012-05-19T09:54:58.250
> 
> 标签：php, curl, https

> **可能重复：**
> [libcurl 中不支持或禁用协议 https](https://stackoverflow.com/questions/9595820/protocol-https-not-supported-or-disabled-in-libcurl)

我正在尝试使用 php 中的 curl 通过 https 连接到站点。

```
<?php
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, 'https://api-3t.paypal.com/nvp');
  $response = curl_exec($ch);
  curl_close($ch);
?> 
```

curl 返回

```
* Protocol https not supported or disabled in libcurl 
```

但是通过命令行使用 curl 可以正常工作

```
 # curl https://api-3t.paypal.com/nvp 
```

我正在运行 CentOS 5.8，WHM 11.32.2

```
# curl-config --features
SSL
IPv6
libz
IDN
NTLM

# curl-config --protocols
HTTP
HTTPS
FTP
FTPS
FILE
TELNET
LDAP
DICT
TFTP
NTLM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:56:50.747

在 php.ini 中启用扩展**php_sockets**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:59:11.177

`curl`您从命令行运行的二进制文件是一回事；但它几乎独立于`curl_*()`您从 PHP 调用的函数。

curl-命令行工具提供的功能不一定*（如您所见）*可从 PHP 获得。

在这里，您可能必须重新编译 PHP，以确保在编译时支持 SSL。

# scala - 如何使用 Scala IDE 在 Netbeans 中设置 Play Framework 2.0

> ID：10664127
> 
> 赞同：3
> 
> 时间：2012-05-19T09:55:04.917
> 
> 标签：scala, netbeans, playframework-2.0

我下载了[http://wiki.netbeans.org/Scala](http://wiki.netbeans.org/Scala) “Scala IDE” Netbeans 插件，它运行良好。然后，我从现有资源创建了一个新的 Scala 项目。也工作得很好。现在唯一的问题是 Netbeans 无法识别任何播放类/包。似乎 SBT 插件以某种方式自动下载依赖项。如何手动下载这些依赖项，并将它们添加到我的 Netbeans 库中，或者在哪里可以找到下载的 Play JAR？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:31:58.637

我自己没有尝试过，但也许您可以运行`play eclipsify`然后从 Netbeans 执行 File->Import Project->Eclipse Project。

# wordpress - 带有自定义分类的wordpress自定义帖子类型

> ID：10664131
> 
> 赞同：0
> 
> 时间：2012-05-19T09:55:20.993
> 
> 标签：wordpress, custom-post-type, custom-taxonomy

我在我的 wordpress 主题中添加了自定义帖子和自定义分类法。问题是，当我尝试添加新的分类时，我得到一个 javascript 错误：（添加了分类，但需要刷新屏幕才能看到它）

```
f.responses[0] is undefined
[Break On This Error]   

...or","")}}});f.children().css("backgroundColor","#f33")}return false});a("#submit... 
```

这是我添加自定义帖子和分类的代码

```
add_action('init', 'catalog_register');
function catalog_register() {

$labels=...;
    $args = array(
        'labels' => $labels,
        'public' => true,
        'publicly_queryable' => true,
        'show_ui' => true,
        'show_in_menu' => true,
        'query_var' => true,
        'rewrite' => true,
        'capability_type' => 'post',
        'hierarchical' => true,
        'menu_position' => 101,
        'supports' => array('title','editor','thumbnail')
      ); 
register_post_type( 'catalog' , $args );
} 
```

这是我的自定义分类代码：

```
function create_catalog_taxonomies() {

    $labels =array(...);    

    register_taxonomy("product_category", array("catalog"), array(
            "hierarchical" => true, 
            "labels" => $labels, 
            'public' => true,
            'query_var' => true,
            'show_ui' => true,
            'rewrite' => true
        ));
}
add_action( 'init', 'create_catalog_taxonomies', 0 ); 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:33:12.730

您已经注册了 post type `catalog`，所以只需将分类注册更改为以下语法：

```
$args = array(
    'hierarchical' => true,
    'labels' => $labels, 
    'public' => true,
    'query_var' => true,
    'show_ui' => true,
    'rewrite' => true
    );
register_taxonomy('product_category', 'catalog', $args); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T01:09:37.140

当 functions.php 文件在开始之前包含空格时也会发生此错误

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-06-17T18:16:47.340

自定义帖子类型的代码

```
function my_post_type() {

    $labels = array(
        'name'                  => _x( 'Name', 'Post Type General Name', 'text_domain' ),
        'singular_name'         => _x( 'Name', 'Post Type Singular Name', 'text_domain' ),
        'menu_name'             => __( 'Names', 'text_domain' ),
        'name_admin_bar'        => __( 'Names', 'text_domain' ),
        'archives'              => __( 'Item Names', 'text_domain' ),
        'parent_item_colon'     => __( 'Parent Item:', 'text_domain' ),
        'all_items'             => __( 'All Names', 'text_domain' ),
        'add_new_item'          => __( 'Add New Names', 'text_domain' ),
        'add_new'               => __( 'Add New Name', 'text_domain' ),
        'new_item'              => __( 'New Name', 'text_domain' ),
        'edit_item'             => __( 'Edit Name', 'text_domain' ),
        'update_item'           => __( 'Update Name', 'text_domain' ),
        'view_item'             => __( 'View Name', 'text_domain' ),
        'search_items'          => __( 'Search Name', 'text_domain' ),
        'not_found'             => __( 'Not found', 'text_domain' ),
        'not_found_in_trash'    => __( 'Not found in Trash', 'text_domain' ),
        'featured_image'        => __( 'Featured Image', 'text_domain' ),
        'set_featured_image'    => __( 'Set featured image', 'text_domain' ),
        'remove_featured_image' => __( 'Remove featured image', 'text_domain' ),
        'use_featured_image'    => __( 'Use as featured image', 'text_domain' ),
        'insert_into_item'      => __( 'Insert into item', 'text_domain' ),
        'uploaded_to_this_item' => __( 'Uploaded to this item', 'text_domain' ),
        'items_list'            => __( 'Items list', 'text_domain' ),
        'items_list_navigation' => __( 'Items list navigation', 'text_domain' ),
        'filter_items_list'     => __( 'Filter items list', 'text_domain' ),
    );
    $args = array(
        'label'                 => __( 'Names', 'text_domain' ),
        'description'           => __( 'Names Description', 'text_domain' ),
        'labels'                => $labels,
        'supports'              => array('title','author','excerpt','editor','thumbnail','revisions' ),
        'hierarchical'          => false,
        'public'                => true,
        'show_ui'               => true,
        'show_in_menu'          => true,
        'menu_position'         => 5,
        'show_in_admin_bar'     => true,
        'show_in_nav_menus'     => true,
        'can_export'            => true,
        'has_archive'           => true,        
        'exclude_from_search'   => false,
        'publicly_queryable'    => true,
        'capability_type'       => 'page',
    );
    register_post_type( 'Name', $args );
}
add_action( 'init', 'my_post_type', 0 ); 
```

> 自定义分类

```
add_action( 'init', 'add_my_taxonomies', 0 );
function add_years_taxonomies() {
register_taxonomy('years', 'repository', array(
'hierarchical' => true,'labels' => array('labels' => array(
'name' => _x( 'Years', 'taxonomy general name' ),
'singular_name' => _x( 'Year', 'taxonomy singular name' ),
'search_items' =>  __( 'Search Years' ),
'all_items' => __( 'All Years' ),
'parent_item' => __( 'Parent ' ),
'parent_item_colon' => __( 'Parent Year:' ),
'edit_item' => __( 'Edit Year' ),
'update_item' => __( 'Update Year' ),
'add_new_item' => __( 'Add New Year' ),
'new_item_name' => __( 'New Year Name' ),
'menu_name' => __( 'Years' ),
),
'rewrite' => array(
'slug' => 'years', 
'with_front' => false, 
'hierarchical' => true 
),
));
} 
```

# regex - Perldoc 变量语法：$foo vs ${foo}

> ID：10664141
> 
> 赞同：3
> 
> 时间：2012-05-19T09:57:03.650
> 
> 标签：regex, perl, perldoc

当我在示例中遇到此问题时，我只是在浏览 perldocs（[http://perldoc.perl.org/perlre.html#Regular-Expressions](http://perldoc.perl.org/perlre.html#Regular-Expressions) - 请参阅捕获组示例）

```
"aa" =~ /${a}/; # True
"aa" =~ /${b}/; # True
"aa0" =~ /${a}0/; # False!
"aa0" =~ /${b}0/; # True
"aa\x08" =~ /${a}0/; # True!
"aa\x08" =~ /${b}0/; # False 
```

我找不到任何关于该语法含义的文档。

那么正则表达式 /${a}/ 在这种情况下是什么意思呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T11:26:53.193

需要大括号来消除歧义`$a`。`$a0`请注意，tokenizer 是贪婪的，因此变量名是可能的*最长*序列。如果在变量插值中跟随另一个字母或数字，则需要`${name}`语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T10:52:22.837

带括号的 $ 避免了变量名称的歧义。这样：

```
$foo = 'house';
'housecat' =~ /$foo/;      # matches
'cathouse' =~ /cat$foo/;   # matches
'housecat' =~ /${foo}cat/; # matches 
```

同样在您提供的链接中，有 $a 和 $b 的定义，但您忘记在此处复制。

# c++ - C++中的空指针

> ID：10664142
> 
> 赞同：1
> 
> 时间：2012-05-19T09:57:20.263
> 
> 标签：c++, pointers

我有几个关于指针的问题。第一的：

```
 ObjectType *p; 
 p->writeSomething(); 
```

为什么可以在指针尚未初始化的情况下调用对象上的方法？如果我运行该代码，我会从控制台窗口中的“writeSomething()”获得输出。第二：

```
ObjectType *p;
if(p==NULL) 
cout<<"Null pointer";//This is printed out
p = new ObjectType;
delete p;
if(p==NULL)
   cout<<"Null pointer";
else
   cout<<"Pointer is not null";//This is printed out 
```

为什么第二个 if 语句中的指针不是 null 以及如何检查指针是否未指向任何内存地址？我还想知道是否有任何方法可以检查程序执行完成时是否有一些内存没有被释放。例如，如果您忘记在代码中编写 1 个删除语句。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T09:58:59.220

第一个代码是**未定义的行为**，任何事情都可能发生，甚至看起来有效。它可能有效，因为调用是静态解析的，并且您没有访问该类的任何成员。

对于第二个片段`delete`没有将指针设置为`NULL`，它只是释放内存。指针现在悬空，因为它指向您不再拥有的内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T10:30:50.057

您的代码当然表现出未定义的行为，但这里有一个示例说明为什么即使没有对象也可能调用成员函数：如果成员函数不引用类的任何成员*对象*，那么它将永远不需要访问您尚未初始化的内存的任何部分。这意味着，您的成员函数本质上是静态的。

如您所知，成员函数可以被视为具有隐式实例对象引用参数的普通自由函数。例如，`Foo`像这样定义的一个简单类，

```
struct Foo
{
    void bar() { std::cout << "Hello\n"; }
}; 
```

可以实现为一个单一的、自由的功能：

```
void __Foo_bar(Foo * this)
{
    std::cout << "Hello\n";
} 
```

现在当你说`Foo * p; p->bar();`，这相当于一个免费的函数调用`__Foo_bar(p);`。您最终将无效指针传递给函数，但由于函数从不使用指针，因此不会造成任何伤害。

另一方面，如果你的类有一个成员对象，比如`int Foo::n;`，并且如果成员函数试图访问它，你的实现会尝试访问它`this->n`，这*很*可能会导致一个直接的问题，因为你实际上是在*取消引用*一个无效的指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T09:59:07.137

```
delete p; 
```

释放内存，但不会更改存储在`p`.

标准 C++ 中没有检测指针是否引用无效内存的方法。不取消引用无效指针是您的责任。

您的第一个示例是未定义的行为。未定义行为的可能结果之一是程序按您预期的方式工作。同样，您有责任不编写具有未定义行为的程序。

在您的代码中，`writeSomething()`可能是一个非虚拟成员函数，它不会取消引用`this`，这就是为什么它恰好在您的编译器上为您工作。如果您尝试引用某些成员数据字段，很可能会遇到运行时错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T10:03:12.727

`delete`将调用析构函数，`ObjectType`然后取消分配内存，但它没有明确地使您的指针`NULL`

作为良好的编程实践，这是您必须做的事情。

# visual-studio - Visual Studio 的字体和颜色扩展？

> ID：10664145
> 
> 赞同：4
> 
> 时间：2012-05-19T09:58:04.860
> 
> 标签：visual-studio, visual-studio-extensions

**[Visual Studio 颜色主题编辑器](http://visualstudiogallery.msdn.microsoft.com/20cd93a2-c435-4d00-a797-499f16402378)**是 Visual Studio 2010 的出色扩展，可用于尝试在 IDE 上应用不同的主题。主题仅更改 IDE 的镶边或窗口区域。

要更改代码的显示，仍然需要使用“**字体和颜色**”对话框中的设置或从`.vssettings`文件中导入设置。**[（ StudioStyles](http://studiostyl.es/)**提供多种款式）。

现在，所有编辑器都允许程序员通过单击尝试或在代码上的不同样式之间切换（例如华丽的**[Sublime Text](http://www.sublimetext.com/)**）。是否有 Visual Studio 扩展或外部工具可以轻松应用和使用不同的样式？如果没有，是否有一些技巧可以轻松尝试或在不同风格之间切换？我发现通过“导入设置”对话框非常繁琐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T06:32:03.120

[Visual Studio **2012**颜色主题编辑器](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)扩展现在允许（从 v2.3 开始）使用样式更改字体颜色（包括您自己的样式）。正是你需要什么。

> 版本历史
> 2.3 添加了对将字体和颜色自定义与主题合并的支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:15:48.817

更新到 Visual Studio 2012，您可以使用 Light 或 Dark 主题。什么真的很酷。

其他好的建议是检查[http://studiostyl.es/](http://studiostyl.es/) - 这个网站提供了许多颜色和字体的变体以供您的 Visual Studio 使用（但到目前为止，兼容性仅适用于 vs2005、vs2008 和 vs2010）

# maps - 即使应用程序运行正常，谷歌地图仍显示无效的错误密钥消息

> ID：10664149
> 
> 赞同：0
> 
> 时间：2012-05-19T09:58:45.343
> 
> 标签：maps, key

我刚刚更新了我的网站以包含一个页面，该页面包含使用 Google 地图的一些功能，请参见此处[http://twenty20investments.com/Research/ETFMarketMap.aspx](http://twenty20investments.com/Research/ETFMarketMap.aspx)。

尽管我以各种方式和组合生成了密钥，但当我单击此链接时，我收到一条消息，即需要获取不同的 Google Maps API 密钥。但是，地图应用程序工作正常并且不会再次显示此错误，直到下一次单击该链接。

生成密钥时，我应该创建服务器密钥还是浏览器密钥？

浏览器应用程序的密钥（带有引荐来源） API 密钥：AIzaSyB43pMEmHePuEpqxoSESxpLfUVq8lfz7AY 引荐来源：*twenty20investments.com

或者

服务器应用程序密钥（带 IP 锁定） API 密钥：AIzaSyCA16KV7uH6ZCUByJ6fXXM1nFPprt7-_X8 IPs：*twenty20investments.com

我使用通配符是否正确？

我的代码是否正确使用？

有没有其他人在地图应用程序工作正常但首次加载页面时显示错误消息的情况下遇到此问题？

非常感谢您的帮助，这让我发疯了。

艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:05:01.830

您的页面中有 2 次对地图 API 的调用。删除包含不正确密钥的第一个。

```
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=false&amp;key=ABQIAAAAPDUET0Qt7p2VcSk6JNU1sBSM5jMcmVqUpI7aqV44cW1cEECiThQYkcZUPRJn9vy_TWxWvuLoOfSFBw" type="text/javascript"></script>

<script src="http://maps.google.com/maps?file=api&v=3&sensor=false&key=AIzaSyB43pMEmHePuEpqxoSESxpLfUVq8lfz7AY" type="text/javascript"></script> 
```

# android - 如何在没有 getIntent() 的情况下在 android 中调用 getExtra()？

> ID：10664155
> 
> 赞同：0
> 
> 时间：2012-05-19T09:59:21.003
> 
> 标签：android

我是 android 新手，我想`getExtra()`不使用`getIntent()`. 这可能吗？如果是，那么如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T10:00:46.840

不，它不可能`getExtra()`没有`getIntent()`

因为没有意图我们怎么能传递数据我的意思是`.putExtra()`？然后你想`getExtra()`

# objective-c - PersistentDocument 之外的 NSManagedObjectContext

> ID：10664157
> 
> 赞同：0
> 
> 时间：2012-05-19T10:00:05.303
> 
> 标签：objective-c, core-data, nsmanagedobjectcontext

我已经为 Mac OSX 创建了一个文档应用程序来使用 CoreDataModel。

现在，我尝试在单击按钮时以编程方式将值保存在 coredata 中。

我可以在应用程序启动时保存一个值：

```
- (void)windowControllerDidLoadNib:(NSWindowController *)aController
{
[super windowControllerDidLoadNib:aController];

NSManagedObjcetContext *moc = [self managedObjectContext];
NSSet *session = [moc fetchObjectsForEntityName:@"Sessions" withPredicate:nil];
NSLog(@"%d", (int)[session count]);
NSManagedObject *obj = [NSEntityDescription insertNewObjectForEntityForName:@"Sessions"
                                                     inManagedObjectContext:moc];
[obj setValue:@"TEST" forKey:@"name"];
[obj setValue:[NSDate dateWithTimeIntervalSinceReferenceDate:112700] forKey:@"start"];
[obj setValue:[NSDate dateWithTimeIntervalSinceReferenceDate:118700] forKey:@"stop"];
} 
```

但我想在 NSObject 中保存一个计数器的值。所以我尝试在 PersistentDocument 中创建一个函数，就像之前传递一个值一样，但是 coredata 元素的计数是 0，所以我认为这没有引用正确的实体。

谁能解释我如何做到这一点或如何工作？

谢谢麦芽酒

编辑：

我会尽量说得更清楚。

我有一个带有开始和停止按钮的计时计数器。我想使用另一个按钮保存计时器的值，当停止时，在 coredata 中。计数器的管理是在一个 NSObject CounterObject 中。

我该怎么做？现在，我只能从 PersistentDocument 中写入核心数据，并从 windowControllerDidLoadNib 调用函数。我想调用一个在 coredata 中写入我的计数器值的函数，但是如果我从 CounterObject 调用 PersistentDocument 中的函数，我插入的日志显示 0 个元素而不是 4。所以它没有正确传递。

这是代码：

```
// Document
#import "Document.h"
#import "NSManagedObjectContext.h"

@implementation Document

- (id)init
{
self = [super init];
if (self) {

}
return self;
}

- (NSString *)windowNibName
{
// Override returning the nib file name of the document
// If you need to use a subclass of NSWindowController or if your document supports multiple NSWindowControllers, you should remove this method and override -makeWindowControllers instead.
return @"Document";
}

- (void)windowControllerDidLoadNib:(NSWindowController *)aController
{
[super windowControllerDidLoadNib:aController];
[self saveTimeMOC:[NSDate dateWithString:@"11:23:34"]];
}

-(IBAction)saveTimeMOC:(NSDate *)time {

NSManagedObjectContext *moc = [self managedObjectContext];
NSSet *session = [moc fetchObjectsForEntityName:@"Sessions" withPredicate:nil];
NSLog(@"%d", (int)[session count]);
NSManagedObject *obj = [NSEntityDescription insertNewObjectForEntityForName:@"Sessions"
                                                     inManagedObjectContext:moc];
[obj setValue:@"TEST" forKey:@"name"];
[obj setValue:time forKey:@"start"];
[obj setValue:[NSDate dateWithTimeIntervalSinceReferenceDate:118700] forKey:@"stop"];

}

+ (BOOL)autosavesInPlace
{
return YES;
}

@end

// CounterObject
#import "CounterObject.h"
#import "Document.h"

@implementation CounterObject

@synthesize contText, startButton, stopButton;

-(id)init {
self = [super init];
if (self) {

}
return self;
}

- (IBAction)startContatore:(id)sender {
stopButton.title = @"Stop";
[stopButton setEnabled:YES];
[startButton setEnabled:NO];
timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(gestioneTimer) userInfo:nil repeats:YES];
}

- (IBAction)stopContatore:(id)sender {
if (timer != nil) {
    [timer invalidate];
    timer = nil;
}
if (stopButton.title != @"Reset") {
    [startButton setEnabled:YES];
    stopButton.title = @"Reset";
    startButton.title = @"Continue";
} else if (stopButton.title == @"Reset") {
    stopButton.title = @"Stop";
    [stopButton setEnabled:NO];
    startButton.title = @"Start";
    timerCont = 0;
    contText.stringValue = [NSString stringWithFormat:@"00:00"];
}
}

- (void)gestioneTimer {
timerCont += 1;

int minutes = floor(timerCont/60);
int seconds = trunc(timerCont - minutes * 60);

contText.stringValue = [NSString stringWithFormat:@"%02i:%02i", minutes, seconds];
}

- (IBAction)saveTime:(id)sender {
Document *moc = [[Document alloc] init];
[moc saveTimeMOC:[NSDate dateWithString:@"13:45:22"]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:20:36.147

如果要将对象添加到核心数据，可以这样做：

```
- (void)windowControllerDidLoadNib:(NSWindowController *)aController
{
[super windowControllerDidLoadNib:aController];

NSManagedObjcetContext *moc = [self managedObjectContext];   
// But be sure that [self managedObjectContext] is the correct one; you can do this to see if   //it's not a null value : NSLog(@"%@",[self managedObjectContext]);

NSManagedObject *obj = [NSEntityDescription insertNewObjectForEntityForName:@"Sessions"
                                                     inManagedObjectContext:moc];
[obj setValue:@"TEST" forKey:@"name"];
[obj setValue:[NSDate dateWithTimeIntervalSinceReferenceDate:112700] forKey:@"start"];
[obj setValue:[NSDate dateWithTimeIntervalSinceReferenceDate:118700] forKey:@"stop"];
} 
```

对核心数据的请求是：

```
-(voi)testRequestCoreData {
NSError *error =nil;
NSFetchRequest *fetchRequest = [[[NSFetchRequest alloc] init]autorelease];
NSEntityDescription *entity = [NSEntityDescription
    entityForName:@"Sessions" inManagedObjectContext:moc];
[fetchRequest setEntity:entity];
NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
....
} 
```

# youtube - 自动启动+循环播放视频 YouTube 视频

> ID：10664158
> 
> 赞同：15
> 
> 时间：2012-05-19T10:00:16.113
> 
> 标签：youtube

YouTube 最近丢弃了旧的“嵌入”代码，并用 iframe 代码取而代之。

感谢[这篇文章](http://brianwong.com/blog/2012-youtube-embed-code-autoplay-on-and-all-other-parameters/)，在新的 iframe 代码中，我找到了在我的网站上循环+自动启动视频的方法。它说：

> 重要的是要注意“循环”参数需要与“播放列表”参数一起使用。这意味着我们正在循环播放一个只有一个视频的播放列表。所以嵌入代码将如下所示：
> 
> ```
> <iframe width=”560″ height=”315″ src=”http://www.youtube.com/embed/V3oJR5IAMxM?rel=0&autoplay=1&loop=1&playlist=V3oJR5IAMxM” frameborder=”0″ allowfullscreen></iframe> 
> ```

但是在我的新代码中，为什么每个 plalist 都有两个相同的视频？

当我将代码应用到播放列表时，其中包含相同的两个视频。参见例如： ![破碎的页面截图](../Images/a1574d80adca397d159d3f4c43f8dc65.png)

如何每个播放列表只有一个视频？我从未创建过任何播放列表。YouTube 默认显示我在播放列表中有相同的 2 个视频。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-10T07:41:20.317

这是循环播放列表的视频的正确方法（正如谷歌[在此处](https://developers.google.com/youtube/player_parameters#Selecting_Content_to_Play)解释的那样）

```
<iframe width="100%" height="100%" src="http://www.youtube.com/embed?
    listType=playlist&
    list=PLAYLIST_ID&
    version=3&
    loop=1&
    autoplay=1&
    rel=0&
    showinfo=0&
    controls=0&
    autohide=1
" frameborder="0" allowfullscreen></iframe> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-06-12T21:31:46.473

我带着类似的问题来到这里。这个问题已经解决了，我是怎么做到的。在链接源的地方，只需获取原始嵌入代码，然后将 embed 替换为 v.ex 的部分 **：**

```
www.youtube.com/v/lG5aSZBAuPs 
```

**（嵌入最初在这里，现在它的 av）**

现在将这些属性（或它们的名称）添加到该嵌入链接的末尾：

1.  &自动播放=1
2.  &循环=1
3.  &playlist=lG5aSZBAuPs <-- 这是嵌入源链接末尾显示的视频 ID。

所以最后链接应该是这样的：

```
<iframe width="853" height="480" src="//www.youtube.com/v/lG5aSZBAuPs&autoplay=1&loop=1&playlist=lG5aSZBAuPs" frameborder="0" allowfullscreen></iframe> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-15T03:45:02.920

复制 YouTube 嵌入式代码，然后进行这些修改。

*   将嵌入更改为 v
*   插入&自动播放=1
*   插入 & 循环 =1
*   插入 &playlist = "视频 ID"

这给出了：

```
<iframe width="420" height="315" src="//www.youtube.com/v/agAX34aHvCM&autoplay=1&loop=1&playlist=agAX34aHvCM" frameborder="0" allowfullscreen></iframe> 
```

遇到这个问题的人太多了。。。。。。

注意：此参数在 AS3 播放器和 IFrame 嵌入中的支持有限，它们可以加载 AS3 或 HTML5 播放器。目前，loop 参数仅在与 playlist 参数结合使用时才在 AS3 播放器中起作用。要循环播放单个视频，请将循环参数值设置为 1，并将播放列表参数值设置为已在 Player API URL 中指定的相同视频 ID。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-26T16:16:36.897

似乎循环参数也需要播放列表参数， - 我正在添加 YouTube 文档中的注释。

注意：此参数在 AS3 播放器和 IFrame 嵌入中的支持有限，它们可以加载 AS3 或 HTML5 播放器。目前，loop 参数仅在与 playlist 参数结合使用时才在 AS3 播放器中起作用。要循环播放单个视频，请将循环参数值设置为 1，并将播放列表参数值设置为已在 Player API URL 中指定的相同视频 ID：

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-26T02:35:44.260

[查看所有选项描述点击这里](https://developers.google.com/youtube/player_parameters)

```
autohide
autoplay
cc_load_policy
color
controls
disablekb
enablejsapi
end
fs
hl
iv_load_policy
list
listType
loop
modestbranding
origin
playerapiid
playlist
playsinline
rel
showinfo
start
theme
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-19T11:31:34.920

使用播放列表=你的视频嵌入自动播放=1和循环=1试试这个看看

```
<iframe style="height:600px;width:100%" src="https://www.youtube.com/embed/ithw-xIyd_8?playlist=ithw-xIyd_8&loop=1&autoplay=1" frameborder="0" allowfullscreen" ></iframe> 
```

它功能强大

# iphone - 我无法初始化我的 UIBarButtonItem？

> ID：10664161
> 
> 赞同：1
> 
> 时间：2012-05-19T10:00:31.363
> 
> 标签：iphone, objective-c, uibarbuttonitem, ibaction, iboutlet

我正面临以下问题。我有一个`UINavigationBar`使用 XIB 添加的（不是 NavController）的视图，并且在这个栏上有一个`ButtonBarItem`.

现在我希望我的按钮在控制台中打印“Hello”。这是我当前的代码：

*。H*

```
@property (nonatomic, retain) IBOutlet UIBarButtonItem *boutonInfos;
- (IBAction)versVueInfos : (UIBarButtonItem *)sender; 
```

*.m*

```
@synthesize boutonInfos;
[...]
- (IBAction) versVueInfos : (UIBarButtonItem *) sender { NSLog(@"Hello"); } 
```

但是，如果我尝试将按钮连接到操作*versvueInfos*，当我单击出现此错误的按钮时，我的应用程序将停止运行：

> -[UIViewController versVueInfos:]：无法识别的选择器发送到实例 0x60117f0 2012-05-19 13:54:36.512 EC[1405:207] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[UIViewController versVueInfos:]：无法识别的选择器发送到实例 0x60117f0'

当我尝试将按钮连接到插座 boutonInfos 时，同样的问题，但我的应用程序甚至没有运行：

> 2012-05-19 13:58:17.948 EC[1441:207] ***由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键 boutonInfos 的键值编码。

那么我做错了什么？对不起，如果这很无聊，但我仍然是 Obj-C/iPhone 编程的初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:07:41.547

在界面生成器中检查 xib 文件的类。如果它属于您的 viewcontroller 类，那么它可能会工作....这是一个猜测，因为在错误日志中它仍然显示 uiviewcontroller 而不是您的 viewcontroller 类名。检查文件所有者类在界面生成器中

# c# - C#如何添加一列字符串格式的小时数

> ID：10664162
> 
> 赞同：0
> 
> 时间：2012-05-19T10:00:40.123
> 
> 标签：c#, datetime

我的程序中一个人的工作时间将显示如下：

![在此处输入图像描述](../Images/5df3eecd0edb8202a2e6c372c9cd3a9e.png)

由于它们是字符串格式，我如何计算一个人的总小时数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:09:21.983

您需要将值存储为`TimeSpans`，以便您可以对它们执行计算，并且仅转换为字符串以用于显示目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:21:54.927

您确实需要将值存储为 TimeSpan 实例。

但也许它们是作为字符串给你的。在这种情况下，您可以使用 TimeSpan.Parse() 将它们转换为 TimeSpan，请参阅[http://msdn.microsoft.com/en-us/library/system.timespan.parse.aspx](http://msdn.microsoft.com/en-us/library/system.timespan.parse.aspx)

# openerp - 如何更改 OpenERP 上显示的默认记录数

> ID：10664166
> 
> 赞同：1
> 
> 时间：2012-05-19T10:01:08.167
> 
> 标签：openerp

默认情况下，OpenERP 在检索数据时显示 20 条记录。有什么办法可以将默认记录数更改为其他内容吗？我在任何地方都找不到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:29:57.707

如果要更改视图中显示的项目的限制，则必须编辑附加到它的窗口操作。

转到`Settings > Technical > Actions > Window Actions`（Odoo v10）。选择要更改的操作，编辑和更改字段`Limit`，以显示要显示的记录数。

或者，`Developer Mode`激活后打开视图。打开`Developer Tools (the bug icon) > Edit Action`并更改字段`Limit`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:21:41.307

要更改树视图中显示的默认记录数，当您定义操作添加时 `<field name="limit">your_record_limit</field>` ，例如，在销售订单中，默认记录数是 80，我们可以通过添加`<field name="limit">150</field>`到 ir.action.act_window将其更改为 150

```
<record id="action_order_form" model="ir.actions.act_window">
    <field name="name">Sales Orders</field>
    <field name="type">ir.actions.act_window</field>
    <field name="res_model">sale.order</field>
    <field name="view_type">form</field>
    <field name="limit">150</field>
    <field name="view_mode">tree,form,calendar,graph</field>
    <field name="search_view_id" ref="view_sales_order_filter"/>
</record> 
```

# javascript - 参考错误：函数未定义

> ID：10664174
> 
> 赞同：-1
> 
> 时间：2012-05-19T10:02:25.227
> 
> 标签：javascript, jquery, html, ajax, json

错误：

> ReferenceError：未定义 setDynaTreeCustom

add.js 代码：

```
 ......
success: function(treeData){                  
                        try{
                            showPopup("Add Fields|",'multi_list','event',0,0,1);  
                            alert("Here00!!")
                            setDynaTreeCustom(treeData);
                            alert("Here!!!");
                        }
                        catch(e)
                        {
                            alert(e);
                            alert(e.lineNumber);
                            errorExceptionLog(e,"js/request_custom_fields.js","populateTree","Custom Report","Creating Tree");
                        }
                    } 
```

diff.js

```
 function setDynaTreeCustom(treeData) {

        try{
            alert(" 000")
     ........// rest of the code
 .....
} 
```

在`alert("Here00!!")`它说函数 setDynaTreeCustom 未定义之后，即使我在 CustomReport.js 中定义了同一文件夹中的不同 js 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:07:40.190

只需确保在 add.js 之前在您的标记中声明了 diff.js

# iphone - Titanium.Facebook errDomain 错误 10000

> ID：10664180
> 
> 赞同：2
> 
> 时间：2012-05-19T10:03:24.490
> 
> 标签：iphone, ios, facebook, titanium

我正在使用 appcelerator 的 Titanium 工作室开发 iPhone 应用程序。我的应用程序使用 Facebook 模块它具有读取提要和发布提要的权限，并且它正确授权但是当我尝试将某些内容发布到用户的提要或阅读提要时，我在 95% 的情况下收到错误“errDomain 错误 10000”，它每 2 天正常工作一次，所以我知道我的请求是有效的。我找不到任何解决此问题的方法，我已尝试注销并重新登录它不起作用:(所以你能帮帮我吗？

这是我的代码：

```
Titanium.Facebook.requestWithGraphPath('me/feed', {message: "Trying out FB Graph API and it's NOT fun at all!"}, "POST", function(e) {
if (e.success) 
{
    alert("Success!  From FB: " + e.result);
} 
else 
{
    if (e.error) 
    {
        alert(e.error);
    } 
    else 
    {
        alert("Unkown result");
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T08:40:56.403

`Titanium.Facebook`已弃用，请参见此处

[http://docs.appcelerator.com/titanium/3.0/#!/api/Modules.Facebook](http://docs.appcelerator.com/titanium/3.0/#!/api/Modules.Facebook)

并尝试使用有效的访问令牌访问图形路径

```
fb.requestWithGraphPath('me/feed?access_token=YOUR_APP_ACCESS_TOKEN' , {message: "your message"}, 'POST', if (e.success) 
{
    alert("Success!  From FB: " + e.result);
} 
else 
{
    if (e.error) 
    {
        alert(e.error);
    } 
    else 
    {
        alert("Unkown result");
    }
}
}); 
```

# java - JDK动态代理和CGLib有什么区别？

> ID：10664182
> 
> 赞同：178
> 
> 时间：2012-05-19T10:03:46.660
> 
> 标签：java, reflection, cglib, dynamic-proxy

在[代理设计模式](http://en.wikipedia.org/wiki/Proxy_pattern)的情况下，[JDK的动态代理](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html)和第三方动态代码生成API如[CGLib有](http://cglib.sourceforge.net/)什么区别？

使用这两种方法有什么区别，什么时候应该更喜欢一种方法？

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2012-05-19T10:07:39.363

JDK动态代理只能通过接口代理（所以你的目标类需要实现一个接口，然后代理类也实现）。

CGLIB（和 javassist）可以通过子类化创建代理。在这种情况下，代理成为目标类的子类。不需要接口。

所以Java动态代理可以代理：`public class Foo implements iFoo`CGLIB可以代理的地方：`public class Foo`

编辑：

我应该提一下，因为 javassist 和 CGLIB 通过子类化使用代理，这就是在使用依赖于此的框架时不能声明最终方法或使类成为最终方法的原因。这将阻止这些库允许子类化您的类并覆盖您的方法。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2014-07-05T17:28:14.117

**功能差异**

*   JDK 代理允许在子类化时实现任何一组接口`Object`。任何接口方法，加号`Object::hashCode`，`Object::equals`然后`Object::toString`转发到一个[`InvocationHandler`](http://docs.oracle.com/javase/8/docs/api/java/lang/reflect/InvocationHandler.html). 此外，还实现了标准库接口`java.lang.reflect.Proxy`。

*   cglib 允许您在继承任何非最终类的同时实现任何一组接口。此外，可以选择性地覆盖方法，即并非所有非抽象方法都需要被截取。此外，存在实现方法的不同方式。它还提供了一个`InvocationHandler`类（在不同的包中），但它也允许通过使用更高级的拦截器来调用超级方法，例如`MethodInterceptor`. 此外，cglib 可以通过专门的拦截来提高性能，例如`FixedValue`. 我曾经[为 cglib 写过不同拦截器的总结](http://mydailyjava.blogspot.com/2013/11/cglib-missing-manual.html)。

**性能差异**

JDK 代理的实现相当天真，只有一个拦截调度程序，`InvocationHandler`. 这需要一个虚拟方法分派到一个不能总是内联的实现。Cglib 允许创建有时可以提高性能的专用字节码。以下是使用 18 个存根方法实现接口的一些比较：

```
 cglib                   JDK proxy
creation    804.000     (1.899)     973.650     (1.624)
invocation    0.002     (0.000)       0.005     (0.000) 
```

时间以纳秒为单位，括号中为标准偏差。[您可以在Byte Buddy 的教程](http://bytebuddy.net/#/tutorial)中找到有关基准测试的更多详细信息，其中 Byte Buddy 是 cglib 的更现代替代品。另外，请注意 cglib 不再处于积极开发中。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2016-01-13T14:04:26.560

**动态代理：使用****JDK Reflection API**在运行时动态实现接口。

**示例：** Spring 对事务使用动态代理，如下所示：

[![在此处输入图像描述](../Images/61855245bf3c9d845dcdc0df3d6628d4.png)](https://i.stack.imgur.com/CigPu.png)

生成的代理位于 bean 之上。它为 bean 添加了跨国行为。这里代理使用 JDK 反射 API 在运行时动态生成。

当应用程序停止时，代理将被销毁，文件系统上将只有接口和 bean。

* * *

在上面的例子中，我们有接口。但是在大多数接口的实现中并不是最好的。所以 bean 没有实现接口，在这种情况下我们使用继承：

[![在此处输入图像描述](../Images/f933fc836a8427d86338669b6093be7b.png)](https://i.stack.imgur.com/fsOVh.png)

为了生成这样的代理，Spring 使用了一个名为**CGLib**的第三方库。

CGLib（代码**生成****库**）建立在[ASM](https://en.wikipedia.org/wiki/ObjectWeb_ASM)之上，主要用于生成代理扩展 bean 并在代理方法中添加 bean 行为 **。**

 ****[JDK动态代理和CGLib的例子](https://gist.github.com/premraj10/3a3eac42a72c32de3a41ec13ef3d56ad)

[弹簧参考](https://spring.io/blog/2012/05/23/transactions-caching-and-aop-understanding-proxy-usage-in-spring)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-01-30T08:33:18.470

[来自 Spring 文档](https://docs.spring.io/spring/docs/2.0.x/reference/aop.html#aop-understanding-aop-proxies)：

> Spring AOP 使用 JDK 动态代理或 CGLIB 为给定的目标对象创建代理。（当您有选择时，首选 JDK 动态代理）。
> 
> 如果要代理的目标对象至少实现一个接口，则将使用 JDK 动态代理。目标类型实现的所有接口都将被代理。如果目标对象没有实现任何接口，那么将创建一个 CGLIB 代理。
> 
> 如果您想强制使用 CGLIB 代理（例如，代理为目标对象定义的每个方法，而不仅仅是那些由其接口实现的方法），您可以这样做。但是，有一些问题需要考虑：
> 
> 不能建议最终方法，因为它们不能被覆盖。
> 
> 您将需要类路径中的 CGLIB 2 二进制文件，而动态代理可用于 JDK。当 Spring 需要 CGLIB 并且在类路径中找不到 CGLIB 库类时，Spring 会自动警告您。
> 
> 代理对象的构造函数将被调用两次。这是 CGLIB 代理模型的自然结果，其中为每个代理对象生成一个子类。对于每个代理实例，都会创建两个对象：实际的代理对象和实现通知的子类的实例。使用 JDK 代理时不会出现此行为。通常，调用代理类型的构造函数两次不是问题，因为通常只有赋值发生，构造函数中没有实现真正的逻辑。****

# php - shell_exec 运行 Perl 文件

> ID：10664185
> 
> 赞同：-1
> 
> 时间：2012-05-19T10:04:07.763
> 
> 标签：php, perl, apache

```
$cmdOutput = shell_exec("perl run_single_test/hello.pl");
echo "the command output = $cmdOutput"; 
```

这会导致文件`hello.pl`执行并打印“hello world back to page”。但

```
shell_exec("perl run_single_test/test_single_run.pl -s \"$testSuiteName\" -t \"$testName\" -i $time"); 
```

不会被执行。我将命令回显到屏幕并在终端上运行，Perl 脚本完美执行。`test_single_run.pl`创建一个日志文件并复制一些文件。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:06:33.220

终于想通了答案。正在修改其他目录中的`test_single_run.pl`一些文件。我知道 apache 以不同的用户身份运行 perl 脚本。就我而言，它是`wwwrun`，因此缺乏对其他文件进行操作的权限。

更改了配置文件`uid.conf`以使 apache 以我的用户身份运行 perl 脚本。它奏效了

# ruby - gem安装在不同补丁级别的目录中

> ID：10664186
> 
> 赞同：0
> 
> 时间：2012-05-19T10:04:08.553
> 
> 标签：ruby, gem, rvm

通过*rvm*从*ruby* *​​-1.8.7-p352*更新到ruby​​-1.8.7-p358 后，gems 仍然安装到*ruby* ​​-1.8.7-p352 的路径。

 **`$GEM_PATH`设置正确但`rvm gemdir`错误。

```
# rvm use ruby-1.8.7-p358
Using /usr/local/rvm/gems/ruby-1.8.7-p358
# ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [x86_64-linux]
# echo $GEM_PATH
/usr/local/rvm/gems/ruby-1.8.7-p358:/usr/local/rvm/gems/ruby-1.8.7-p358@global
# rvm gemdir
/usr/local/rvm/gems/ruby-1.8.7-p352 
```

安装 gems 没有错误，但是 gem 的位置错误并且无法执行二进制文件。

```
# gem instll bundler
Successfully installed bundler-1.1.3
1 gem installed
# bundle
bash: bundle: command not found
# which bundle
/usr/bin/which: no bundle in (/usr/local/rvm/gems/ruby-1.8.7-p358/bin:/usr/local/rvm/gems/ruby-1.8.7-p358@global/bin:/usr/local/rvm/rubies/ruby-1.8.7-p358/bin:/usr/local/rvm/bin:/usr/local/bin:/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/sbin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin)
# gem which bundler
/usr/local/rvm/gems/ruby-1.8.7-p352/gems/bundler-1.1.3/lib/bundler 
```

我试过了`export GEM_HOME=/usr/local/rvm/gems/ruby-1.8.7-p358`，但`rvm gemdir`仍然显示了*p358*的路径，并且 gem 安装到了这个路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:52:42.207

更新 ruby​​gems 解决了这个问题：

```
# rvm rubygems latest 
```**

# php - PHP/MYSQLI - 如何检查此查询是否可行，如果可以，则显示错误（参见示例）

> ID：10664188
> 
> 赞同：0
> 
> 时间：2012-05-19T10:04:45.073
> 
> 标签：php, if-statement, mysqli

我正在学习一些 myqli，并想做一个简单的检查。

基本上，用户将输入他们的电子邮件地址然后提交表单，如果电子邮件地址已经包含在某个 mysql 表中，那么脚本必须停止并出现错误。

这是我的例子：

```
$userEmail = sanitize($_POST['specials']);          
// Check to see if email already exists, if not proceed
if ($stmt = $link->prepare("SELECT email FROM specials WHERE email=$userEmail"))
{
    $specialsErrorFocus = 'autofocus="autofocus"';
    $specialsInfo = 'This email address: $userEmail, is already in our database.';
    include "$docRoot/html/shop/home.html.php";
    exit();
} 
```

这段代码不像我所描述的那样做。

有人可以解释一下我哪里出了问题，或者可能为这项任务提供更好的解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T10:21:34.910

您需要先执行查询，因为仅仅准备语句是不够的。请参阅[文档](http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php)，因为它是一个多阶段过程。

首先，您准备声明：

```
$stmt = $link->prepare("SELECT `email` FROM `specials` WHERE `email` = ?")
if (!$stmt) {
   echo $link->errno . " : " . $link->error;
} 
```

接下来，绑定参数：

```
if (!$stmt->bind_param("s", $userEmail)) {
    echo $stmt->errno . " : " . $stmt->error;
} 
```

最后，执行查询：

```
if (!$stmt->execute()) {
    echo $stmt->errno . " : " . $stmt->error;
} 
```

得到结果：

```
$stmt->store_result();

if ($stmt->num_rows) {

   # Email exists
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:48:51.670

Prepare 不执行该语句。您可以使用[mysql::query](http://www.php.net/manual/en/mysqli.query.php "mysql::queryquot;")来执行该语句。

您的示例将变为：

```
$result = $link->query("SELECT email FROM specials WHERE email=$userEmail");    
if ( $result ) {
    if ( $result->num_rows > 0 ) {
        $specialsErrorFocus = 'autofocus="autofocus"';
        $specialsInfo = 'This email address: $userEmail, is already in our database.';
        include "$docRoot/html/shop/home.html.php";
        exit();
    }
} 
```

# generics - 与成员函数调用的结果进行比较的最干净的方法是什么

> ID：10664189
> 
> 赞同：0
> 
> 时间：2012-05-19T10:04:54.637
> 
> 标签：generics, boost, stl, functor

如果以前有人问过这个问题，请原谅我，我只是找不到合适的解决方案。

我经常发现自己为类的成员函数创建仿函数，如下所示，然后用于 find_if 或 remove_if

```
class by_id{
  public:
    by_id(int id):mId(id) {}

    template <class T>
    bool operator()(T const& rX) const { return rX.getId() == mId; }

    template <class T>
    bool operator()(T* const pX) const { return (*this)(*pX); }

  private:
    int mId;
}; 
```

虽然这很好用，但它包含很多样板文件，并且意味着为我想用于比较的每个成员函数定义一个类。

我知道 C++11 中的 lambda，但由于交叉编译器的限制，我无法切换到新标准。

我发现的最接近的相关问题是[stl remove_if with class member function result](https://stackoverflow.com/q/9922814/484230)但给定的解决方案意味着添加额外的成员函数进行比较，这很难看。

有没有更简单的方法使用标准 STL 或 boost 以更通用的方式编写此类函子或使用 bind 完全跳过它们？

像通用函子之类的东西会做，但我缺乏编写它的技能。只是为了弄清楚我的想法：

```
 template<typename FP,typename COMP>
  class by_id{
      public:
        by_id(COMP id):mId(id) {}

        template <class T>
        bool operator()(T const& rX) const { return rX.FP() == mId; } 
        //of course this does not work

        template <class T>
        bool operator()(T* const pX) const { return (*this)(*pX); }

      private:
        COMP mId;
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T10:36:41.527

如果您`T`提前知道（在创建`by_id`对象时，您可以将其作为模板参数`by_id`并将指向成员函数的指针传递给构造函数。例如：

```
template<typename T, typename COMP>
class by_id
{
 public:
  typedef COMP (T::*MemFunc)();
  by_id(COMP id, MemFunc mf) : mId(id), mmf(mf) {}

  bool operator()(T const& rX) const { return rX.*mmf() == mId; }

 private:
  COMP mId;
  MemFunc mmf;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:41:13.630

您可以将成员函数指针传递给比较器以指示要比较的值。

使用`make_comparer`函数避免在使用点指定类型参数（类似于`std::make_pair`）

```
#include <iostream>
#include <vector>
#include <algorithm>

template<typename T, typename R>
class comparer
{
public:
    typedef R ( T::*accessor_type ) () const;
    typedef R value_type;
    comparer ( accessor_type accessor, value_type value ) :
        accessor_ ( accessor ), value_ ( value ) { }

    accessor_type accessor_;
    value_type value_;

    bool operator() ( T const& rX ) const {
        return ( rX.*accessor_ ) () == value_;
    }
    bool operator() ( const T* pX ) const {
        return ( *this ) ( *pX );
    }
};

template <typename T, typename R>
comparer<T, R> make_comparer ( R ( T::*accessor ) () const, R value )
{
    return comparer<T, R> ( accessor, value );
}

class Foo
{
public:
    explicit Foo ( int id, int rank ) : id_ ( id ), rank_ ( rank ) { }
private:
    int id_, rank_;

public:
    int id() const {
        return id_;
    }
    int rank() const {
        return rank_;
    }

};

std::vector<Foo> foos;
typedef std::vector<Foo>::const_iterator FooIT;

void print ( FooIT it )
{
    if ( it == foos.end() )
        std::cout << "no match" << std::endl;
    else
        std::cout << "matches id: " << it -> id () << " rank: " << it -> rank () << std::endl;
}

main()
{

    foos.push_back ( Foo ( 1, 3 ) );
    foos.push_back ( Foo ( 2, 2 ) );
    foos.push_back ( Foo ( 3, 1 ) );

    std::cout << "compare id == 2 ";
    print ( std::find_if ( foos.begin(), foos.end(), make_comparer ( &Foo::id, 2 ) ) );

    std::cout << "compare id == 3 ";
    print ( std::find_if ( foos.begin(), foos.end(), make_comparer ( &Foo::id, 3 ) ) );

    std::cout << "compare rank == 3 ";
    print ( std::find_if ( foos.begin(), foos.end(), make_comparer ( &Foo::rank, 3 ) ) );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T16:55:45.177

```
using namespace boost;
std::find_if(first, last, bind(std::equal<int>(), bind(&Foo::getId, _1), id)); 
```

这将创建一个嵌套的绑定表达式并为 range 中的每个元素调用它`[first,last)`，其中为元素调用绑定表达式`Foo i`等效于调用：

```
std::equal<int>()( i.getId(), id ) 
```

即它测试是否`i.getId()`等于`id`

在 C++11 中，您可以替换`boost::bind`为`std::bind`

```
using namespace std::placeholders;
std::find_if(first, last, std::bind(std::equal<int>(), std::bind(&Foo::getId, _1), id)); 
```

# c# - C#如何用excel中的信息填充列表框？

> ID：10664191
> 
> 赞同：0
> 
> 时间：2012-05-19T10:05:07.227
> 
> 标签：c#

所以我想做的是用来自excel单元格的信息填充一个listBox。当我单击 button1 时，它会显示带有列表框的新表单，现在我需要将冒号 A 中包含信息的每个单元格添加到列表框中。谁能解释我该怎么做？任何类型的信息都会有帮助。所以我没有使用 OLEDB 我有预定义的文件路径到 excel 文档。所有这样的代码示例都会很有趣。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:07:45.930

我建议使用[EPPlus](http://epplus.codeplex.com)来读取 Excel 文件

# c++ - 进程间挂钩

> ID：10664194
> 
> 赞同：0
> 
> 时间：2012-05-19T10:05:37.370
> 
> 标签：c++, hook, ipc

是否可以使用钩子跳转到另一个进程的运行内存，然后跳转回来，而不需要像 DLL 注入那样的东西？

例如，如果 process`A`有一个过程`foo`并且 process`B`有一个`bar`具有相同原型的过程`foo`(用于挂钩)，是否可以挂钩`foo`到 jmp to `bar`，假设两个进程都在运行？

编辑：这需要在 Windows 上完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T10:09:19.960

根据定义，进程是沙箱。如果您甚至错误地超出了地址空间，它也会被引发并作为 SIG_USR 信号捕获并报告为分段错误

话虽如此，您可以使用共享内存-shmem、管道和套接字等进程间通信机制来跨进程进行通信。

编辑：还有可用的 RPC（远程过程调用）机制，例如提供远程方法调用的 CORBA。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T11:08:57.213

Windows（以及 Unix 和可能绝大多数其他现代操作系统）中的每个进程都有自己的虚拟内存空间，通常映射到不同的物理地址。因此，将 DLL 注入另一个进程的地址空间是挂钩该进程中任何内容的唯一方法。另一方面，一旦您在该进程中有一个 DLL，您可以在那里做很多事情，例如。生成自己的线程并使用 Windows 消息与父进程通信（作为 Windows 中最简单的通信方法之一）。

# php - 如何从 PHP 中返回数组

> ID：10664195
> 
> 赞同：-2
> 
> 时间：2012-05-19T10:05:48.197
> 
> 标签：php, arrays, while-loop

我有一个周期，而：

```
while ($userEquipments = mysql_fetch_array($getUserEquipments)) 
```

并且在这个循环中有一个带有数组的 if：

```
if ($userEquipments['cloth_id'] == $clothes['id'] && $userEquipments['cloth_is_used'] == 1)
            $isUsed = array('cloth_type' => $clothes['type_cloth'], 'cloth_name' => $clothes['name'], 'cloth_image' => $clothes['image']); 
```

我的问题是如何返回这个数组中的所有信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:47:40.143

您应该在 while 之外声明您的数组，这样您就可以在循环之外访问它。

尝试这个：

```
$isUsed[];

while ($userEquipments = mysql_fetch_array($getUserEquipments))
{
    if ($userEquipments['cloth_id'] == $clothes['id'] && $userEquipments['cloth_is_used'] == 1)
    {
        $isUsed['cloth_type'] =  $clothes['type_cloth'];
        $isUsed['cloth_name'] =  $clothes['name'];
        ...
        break;
    }
}

// Print the array
print_r($isUsed); 
```

# python - 是否可以使用 Python 为 iOS 和 Android 编写跨平台应用程序？

> ID：10664196
> 
> 赞同：86
> 
> 时间：2012-05-19T10:05:52.627
> 
> 标签：python, android, ios, cross-platform, beeware

是否可以使用 Python 为 iOS 和 Android 编写跨平台应用程序

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-06-12T16:14:41.927

一个选项是[kivy](http://kivy.org)：一个很酷的跨平台 Python 框架，适用于 Android、Win7、Linux、MacOSX 和 iOS。

更新：kivy 项目每天都在增长，现在还支持 Raspberry Pi

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-19T10:07:35.997

对于 Android，Google 提供了一种称为 ASE（Android 脚本环境）的东西，它允许脚本语言（包括 Python）在 Android 上运行。更多细节[在这里](http://google-opensource.blogspot.com/2009/06/introducing-android-scripting.html)

对于 iOS，它可能要复杂得多（我建议检查最新版本的 iOS SDK 协议以检查法律的当前状态 - 苹果倾向于定期允许和禁止此类应用程序）。对于技术部分，您可能需要在 Python 和 Objective C 之间进行接口，以及做一些魔法来静态链接 Python 所需的所有库；完整的详细信息可[在此处](http://www.saurik.com/id/5)获得。iOS Python 开发的另一种方法是将 Python 解释器嵌入到您的应用程序中并使用它分发您的 Python 脚本（以便与 Apple 规则很好地配合）。在这种情况下，您的 Python 应用程序将是一个 Python 解释器，它与您的脚本一起打包并自动运行。

第二种选择是使用 Kivy 框架（kivy.org）——它是一个用 Python 编写触摸友好型应用程序并将它们打包用于不同平台的框架。它支持 Android 有一段时间了，最​​近增加了 iOS 支持

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-25T09:00:08.320

要编写 GUI 应用程序，您可以使用[Toga](https://pybee.org/project/projects/libraries/toga/)库，然后将其与[公文包](https://pybee.org/project/projects/tools/briefcase/)一起打包到 Android 和/或 iOS 应用程序（或 Windows、Linux、macOS 等）中。

**注意：**该项目仍处于 alpha 状态，但正在快速开发中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-25T08:49:46.940

您可以尝试结合[brython](/questions/tagged/brython "显示标记为“brython”的问题")和[cordova](/questions/tagged/cordova "显示标记为“科尔多瓦”的问题")。Brython wiki 描述[了如何使用 Brython 编写 Android 应用程序](https://github.com/brython-dev/brython/wiki/Writing-an-Android-application)，它可能提供必要的信息来使用 Cordova 执行此操作。我还没有对此进行测试，但听起来很有希望。然而，您应该知道，由于其性质，Brython 不能支持 x86 编译的软件包，例如 OpenCV（参见例如[此处](https://stackoverflow.com/a/42210710/321973)）。另一方面，如果您对 JavaScript/HTML5 有所了解，您可以使用 WebView 的原生函数，例如[http://www.brython.info/gallery/three.html](http://www.brython.info/gallery/three.html)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-08T21:06:48.620

正如@piertoni 所提到的，[BeeWare](https://pybee.org)支持使用 Python 编写原生 iOS 和 Android 应用程序。

# php - 如何将 PHP 数组转换为 DOM XML nodeList？

> ID：10664197
> 
> 赞同：1
> 
> 时间：2012-05-19T10:05:55.417
> 
> 标签：php, xml, dom

我正在寻找一个 DOM XML 函数来转换 PHP 数组，如下所示：

```
<?php
$errors = array("A", "B", "C", "D");
?> 
```

到 DOM XML 节点列表

```
<?xml version="1.0" standalone="no"?>
<error>
    <missing>A</missing>
    <missing>B</missing>
    <missing>C</missing>
    <missing>D</missing>
</error> 
```

非常感谢您的帮助 ：）

我尝试了以下代码：

```
<?php
$basedoc = new DomDocument();
$basedoc->Load("Standard.svg"); //Fichier SVG de base
$baseroot = $basedoc->documentElement; //On prend l'élément racine
$errorgroup = $basedoc->createElement('error'); //On crée le groupe de base
foreach($erreurs as $erreur) {
    $missinggroup = $errorgroup->createElement('missing'); //On crée le groupe de base
    $errorgroup->appendChild($missinggroup);
}
$baseroot->appendChild($errorgroup);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:16:16.740

我认为这种结构过于简单，无法使用 DomXML 函数。我认为你应该为这个 XML 创建简单的视图模板——它看起来像这样：

```
<?xml version="1.0" standalone="no"?>
<error>
    <?php foreach ($errors as $error):?>
        <missing><?php echo $error;?></missing>
    <?php endforeach;?>
</error> 
```

确切的模板结构当然取决于您的框架 - 例如，在 zend 中它将是 $this->errors 而不是 $errors。

Od 在第一个链接中使用 @bassem-ala 建议的 SimpleXML。

**更新**

这是基于表生成 XML 的“递归”函数。类似的东西

```
function generateXMLElement($elements, $rootNode = null, $rootNodeName = 'xml')
{
    if (!$rootNode)
    {
        $rootNode = new SimpleXMLElement('<'.$rootNodeName.'/>');
    }
    foreach ($elements as $key => $val)
    {
        if (is_array($val))
        {
            $childElem = $rootNode->addChild($key);
            generateXMLElement($val, $childElem);
        }
        else
        {
            $childElem = $rootNode->addChild($key, $val);
        }
    }
    return $rootNode;
} 
```

你得到XML`$xml = generateXMLElement($errors, null, 'error');` 然后你可以使用打印它`print($xml->asXML());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:24:54.233

您没有`$erreur`在创建代码中使用任何地方，因此显然它不会出现在生成的 XML 中。此外，您不能从 a 创建元素，`DOMElement`但必须从`DOMDocument`. 您的代码将给出致命错误。

改变

```
$missinggroup = $errorgroup->createElement('missing'); 
```

到

```
$missinggroup = $basedoc->createElement('missing', $erreur); 
```

然后它将起作用：[http ://codepad.org/GmCIBIQW](http://codepad.org/GmCIBIQW)

# python - 使用 optimize.leastsq() 的一组方程中的最小二乘（Python）

> ID：10664199
> 
> 赞同：3
> 
> 时间：2012-05-19T10:06:04.263
> 
> 标签：python, optimization, numpy, scipy, least-squares

我有两个函数和一组数据。这两个函数具有相同的 x 数据和相同的参数。我想通过最小二乘法获得最适合我的数据的参数。

参数为：ex,ey,ez。

X 数据为：RA、DE（如 3000 点）。

Y 数据为：dRA,dDE。

我试过这个，但我得到了一个错误的解决方案：

```
def residuals(p, dRA, dDE, RA, DEC):
    ex,ey,ez = p
    f1 = dRA-(ex*sin(DEC)*cos(RA)+ey*sin(DEC)*sin(RA)-ez*cos(DEC))
    f2 = dDE-(-ex*sin(RA)+ey*cos(RA))
    err = np.concatenate((f1,f2))
    return err

from scipy.optimize import leastsq
p0 = [0, 0., 0.]
plsq_coord = leastsq(residuals, p0, args=(dRA, dDE, RA, DE))
print plsq_coord[0] 
```

任何形式的帮助都会非常受欢迎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:57:57.803

如此测试代码代码所示

```
import numpy as np, numpy.random,scipy.optimize
def residuals(p, dRA, dDE, RA, DEC):
    ex,ey,ez = p
    f1 = dRA-(ex*np.sin(DEC)*np.cos(RA)+ey*np.sin(DEC)*np.sin(RA)-ez*np.cos(DEC))
    f2 = dDE-(-ex*np.sin(RA)+ey*np.cos(RA))
    err = np.concatenate((f1,f2))
    return err    
ex, ey, ez = 0.2, 0.3, 0.4
N = 100
err = 1e-3
ra, dec = np.random.uniform(0,1,N), np.random.uniform(0,.5,N)
dra = (ex*np.sin(dec)*np.cos(ra)+ey*np.sin(dec)*np.sin(ra)-ez*np.cos(dec))+np.random.normal(size=N)*err
ddec = (-ex*np.sin(ra)+ey*np.cos(ra))+np.random.normal(size=N)*err
print scipy.optimize.leastsq(residuals, p0, args=(dra, ddec, ra, dec)) 
```

您的代码应该可以正常工作，除非您的函数编写不正确（例如，您的 ra,dec 以度为单位，而不是弧度），或者您在数据集中有一些错误的数据点导致 chisq 适合。

# android - 如何在 Eclipse Emulator for Android 中启用 GPS

> ID：10664202
> 
> 赞同：3
> 
> 时间：2012-05-19T10:06:41.273
> 
> 标签：android, eclipse, gps, emulation

> **可能重复：**
> [如何在 Android 模拟器中模拟 GPS 位置？](https://stackoverflow.com/questions/2279647/how-to-emulate-gps-location-in-the-android-emulator)

我正在努力激活 Android Emulator (Eclipse) 中的 GPS 功能

我写了一个测试程序来获取当前位置。它在我的 Android 手机上运行.. 所以我确定该应用程序正在运行。

如果我在 Eclipse 的 Android Emulator 中测试程序……什么都没有发生！我错过了什么？

我已经在 AVD 中添加了 GPS 支持，我知道 Emulator 控件......但应用程序中没有任何事情发生。

我需要在 SDK 中安装一些额外的期货吗？

我希望有人能指出我正确的方向！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T10:18:34.740

在模拟器运行的情况下，做一个

```
telnet localhost 5554 
```

连接到模拟器。然后你可以执行几个命令，例如：

```
geo fix (longitude) (latitude) 
```

该命令指示模拟器表现得好像手机在那个位置（基本上是伪造 GPS 坐标）。

您可以使用名为“drop latlong marker”的谷歌地图功能来获取特定地点的 GPS 坐标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T13:38:45.053

您只需要通过**DDMS**下的**Emulator Control**发送纬度和经度，不需要其他东西。很简单:)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T11:16:16.357

geo-fix 解决方案有效，但 eclipse ui 解决方案也应该有效。你不应该安装任何特殊的东西。

尝试创建一个新的模拟器（在其功能中启用了 gps 支持）并运行它，在“设备”下的模拟器列表中选择它，然后转到模拟器控制。在那里设置位置并按“发送”。

无论如何，如果这不起作用，您甚至可以在模拟器上安装执行相同操作的第三方应用程序：

[https://play.google.com/store/search?q=location+spoofer&c=apps](https://play.google.com/store/search?q=location+spoofer&c=apps)**

# c++ - 在动态内存分配中，在程序终止并且忘记释放内存后，该内存会保持分配状态吗？

> ID：10664205
> 
> 赞同：1
> 
> 时间：2012-05-19T10:07:21.907
> 
> 标签：c++, dynamic

一直在阅读 C++ 书籍，但我似乎找不到答案。我所知道的是动态内存分配，例如当我创建一个函数时：

```
void memoryleak(){
int * ptr = new int; 
} 
```

它分配一个内存并将该内存返回给指针，但是，由于指针是一个局部变量，在 memoryleak() 之后，包含内存引用的指针被释放，因为它是静态的，因此分配的内存丢失并且不能重复用于程序。

但这是否意味着内存将永远丢失，或者仅在程序终止之前，就像编译此代码片段后一样：

```
main(){
int * ptr = new int; 
} 
```

程序终止后，内存会保持分配还是释放？如果它保持分配状态，重新启动 PC 是否会使 PC 释放所有使用的内存？出于好奇，另一个关于他们使用的内存（在分配中）的问题是 RAM 吗？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T10:25:35.687

答案取决于你问谁。就 C++ 语言而言，内存只是丢失了。没有办法把它找回来。

但是任何合理的操作系统都足够聪明，可以知道哪些内存已分配给哪个进程，并且当一个进程终止时，它会回收所有内存。

所以在实践中，答案是只要进程存在，内存就会泄漏。之后，操作系统将其全部收集起来，并准备在其他地方重用它。

当然，这就是常见的主流操作系统（如 Windows、Linux 或 OSX）的行为方式。一个足够原始的操作系统可能不会这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T10:29:37.133

在进程终止后，所有资源都被回收。这包括地址空间、调度原语等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T10:09:06.900

当程序终止时，操作系统将收回进程分配的所有内存。一旦程序终止，您在程序生命周期中泄漏的任何内存都将返回到可用内存池中。

当您使用`new`then 分配内存时，这将由`RAM`. 如果您分配的内存多于可用内存，则计算机可能会使用磁盘上的交换文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T10:09:00.397

当程序终止时，程序要求的所有内存都会释放给操作系统，所以**不**，内存不会丢失。当您的程序完成时，内存将可供其他人使用。

> 出于好奇，另一个关于他们使用的内存（在分配中）的问题是 RAM 吗？

是的，内存是RAM。

# c# - 连接表上有额外列的多对多

> ID：10664206
> 
> 赞同：0
> 
> 时间：2012-05-19T10:07:33.497
> 
> 标签：c#, nhibernate, many-to-many, jointable

嗨，我将如何建立这种关系？我已经有一个多对多的关系，但现在有了新功能，我需要在连接表中添加一个额外的列。

为了简单起见，我有一个用户类、产品类和用户产品类，今天它看起来像这样。

产品.hbm.xml

```
<bag name="Users" table="users_products" inverse="true" cascade="save-update" >
  <cache usage="read-write" />
  <key column="ProductId" />
  <many-to-many class="User" column="UserId" outer-join="true" />
</bag>
<bag name="UserProduct" inverse="true" cascade="save-update">
    <cache usage="read-write" />
    <key column="ProductId" />
    <one-to-many class="UserProduct" />
</bag> 
```

用户.hbm.xml

```
<bag name="Products" table="users_products" inverse="true" cascade="save-update" >
  <cache usage="read-write" />
  <key column="UserId" />
  <many-to-many class="Product" column="ProductId" />
</bag>
<bag name="UserProduct" inverse="true" cascade="save-update">
    <cache usage="read-write" />
    <key column="UserId" />
    <one-to-many class="UserProduct" />
</bag> 
```

级联应该是什么样子？现在对于新功能，我创建了一个新类 UserProduct：

```
private int _id;
private User _user;
private Product _product;
private string _ownComment; 
```

并创建了 UserProduct.hbm.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="" assembly="">
  <class name="UserProduct" table="users_products">
    <cache usage="read-write"/>
    <id name="Id" column="UsersWhiskiesId" type="Int32" length="4" unsaved-value="0">
      <generator class="native" />
    </id>

    <many-to-one name="User" class="User" column="UserId" not-null="true" />
    <many-to-one name="Product" class="Product" column="ProductId" not-null="true" />

    <property name="OwnComment" column="OwnComment" type="String" />

  </class>
</hibernate-mapping> 
```

如果我之前使用过 user.Products.Add(product); 现在会是什么样子？我将如何映射用户和产品？如何更新现有记录？当我删除用户时，我想删除与产品而不是产品的关联。

**新问题：** 我有一个注册用户可以收集产品的页面。在这个页面上，我现在希望用户能够隐藏其中的一些产品。我有一个填充的网格视图和一个带有复选框的模板字段。如何更新我有“HideProduct”列的用户产品。我在一个按钮中有这个代码。

```
for (int i = 0; i < this.gvProducts.Rows.Count; i++)
        {
            GridViewRow row = this.gvProducts.Rows[i];
            bool isChecked = ((CheckBox)row.FindControl("chkSelect")).Checked;

            if (isChecked)
            {
                int productId= 

Convert.ToInt32(this.gvProducts.DataKeys[row.RowIndex].Value);
    UserProduct up= new UserProduct();
    up.User = this._user;
                up.Product= DataManagement.CoreRepository.GetObjectById<Product>(productId);
                up.HideProduct = isChecked;
                DataManagement.CoreRepository.UpdateObject(up); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T10:17:17.580

您需要将多对多关系拆分为两个多对一关系，就像在数据库中一样。

因此，一个用户有许多用户产品项目，一个产品有许多用户产品项目。一个用户产品有一个用户和一个产品。

# perl - 如何在 perl 中管理与 MySQL 服务器的数据库连接

> ID：10664214
> 
> 赞同：1
> 
> 时间：2012-05-19T10:08:05.353
> 
> 标签：perl

> **可能的重复：**
> [在 Perl 中爬行期间 MySQL 服务器已消失](https://stackoverflow.com/questions/10414682/mysql-server-has-gone-away-during-crawling-in-perl)

我正在使用以下脚本创建与我的 mysql 服务器的数据库连接。

```
my $dsn = "dbi:mysql:dbname=$dbname;$dbhost";
my $dbh = DBI->connect(
    $dsn, $dbuser,
    $dbpasswd,
    {
        PrintError         => 1,
        Warn               => 1,
        AutoCommit         => 1,
        ShowErrorStatement => 1
    }
); 
```

使用此连接的主脚本是一个长时间运行的脚本。有时在执行过程中，程序会因错误消息而失败。

```
MySQL server has gone away 
```

我是新手`Perl`，无法看到数据库连接有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T18:19:39.303

请看看这个线程：[http ://www.perlmonks.org/?node_id=317168](http://www.perlmonks.org/?node_id=317168)

本文讨论了处理“MySQL server has gone away”问题的方法。基本上，您需要`$dbh`在触发查询之前检查状态。

```
$dbh ||= DBI->connect("connection string", "username", "password"); 
```

# ios - 修改 iOS 项目的 RGB 值后尝试更新 UIImageView 时应用程序崩溃

> ID：10664220
> 
> 赞同：0
> 
> 时间：2012-05-19T10:09:11.140
> 
> 标签：ios, image, image-processing

我正在尝试对图像应用多种效果。我创建了一个单独的文件来处理我可以发送`UIImageView`和接收修改后的副本的效果处理。为了节省处理时间，我首先将图像加载到单独的处理文件中并存储在内存中，而不是每次要修改时都加载图像。流程是 getImageData -> modifyRGB -> displayImage。一切正常，直到最后一步。返回的修改后的图像会在屏幕上显示片刻，然后 Xcode 崩溃并出现`EXEC_BAD_ACCESS`:code 1 错误。我反复检查代码，找不到问题。任何帮助是极大的赞赏。谢谢！

**更新更多信息**

我正在使用带有自动引用计数的 Xcode 4.3.1

使用换行符，我可以验证当**self.imageView.image = [self.imageManipulation displayImage]; 行时发生崩溃** 被执行。图像已更新，但随后程序立即崩溃。使用 NSZombie，我收到一个错误**-[Not A Type retain]: message sent to deallocated instance 0x2cceaf80**

从我的 viewController 我使用：

```
[self.imageManipulation getImageData:self.imageView.image];
[self.imageManipulation modifyRGB];
self.imageView.image = [self.imageManipulation displayImage]; 
```

我的 ImageManipulation 文件包括：

```
@implementation ImageManipulation
static unsigned char *rgbaDataOld;
static unsigned char *rgbaDataNew;
static int width;
static int height;

- (void)getImageData:(UIImage *)image
{
    CGImageRef imageRef = [image CGImage];

    width = CGImageGetWidth(imageRef);
    height = CGImageGetHeight(imageRef);

    rgbaDataOld = malloc(height * width * 4);
    rgbaDataNew = malloc(height * width * 4);

    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * width;
    NSUInteger bitsPerComponent = 8;

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGContextRef context = CGBitmapContextCreate(rgbaDataOld, width, height, bitsPerComponent, bytesPerRow, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

    CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);

    CGColorSpaceRelease(colorSpace);
    CGContextRelease(context);
    CGImageRelease(imageRef);
}

//modify rgb values 
- (void)modifyRGB
{
    for (int byteIndex = 0 ; byteIndex < width * height * 4; byteIndex += 4)
    {
        rgbaDataNew[byteIndex] = (char) (int) (rgbaDataOld[byteIndex] / 3) + 1;
        rgbaDataNew[byteIndex+1] = (char) (int) (rgbaDataOld[byteIndex+1] / 3 + 1);
        rgbaDataNew[byteIndex+2] = (char) (int) (rgbaDataOld[byteIndex+2] / 3) + 1;
        rgbaDataNew[byteIndex+3] = (char) (int) 255;
    }    
}

//set image
- (UIImage *)displayImage
{
    CGContextRef context;

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    context = CGBitmapContextCreate(rgbaDataNew, width, height, 8, 4 * width, colorSpace, kCGImageAlphaPremultipliedLast ); 

    CGImageRef imageRef = CGBitmapContextCreateImage (context);
    UIImage *outputImage = [UIImage imageWithCGImage:imageRef];  

    CGColorSpaceRelease(colorSpace);    
    CGContextRelease(context);  
    CGImageRelease(imageRef);
    return outputImage;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:27:12.300

我更改了我的**dispayImage()**方法以接收**UIImageView**属性并返回**VOID**。这样，所有工作都对传递的**UIImageView**完成，而不是本地化实例，并且没有返回任何内容。

我的猜测是，我之前使用的返回**UIImage**方法崩溃了，因为返回的引用在方法完成的第二秒被释放。这也让我可以使用**CGImageRelease**而不会产生任何不良影响。

这是新方法：

```
- (void)displayImage:(UIImageView *)image
{
   CGContextRef context;
   CGImageRef imageRef = [image.image CGImage];

   CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
   context = CGBitmapContextCreate(rgbaDataNew, width, height, 8, 4 * width, colorSpace,  kCGImageAlphaPremultipliedLast ); 
   imageRef = CGBitmapContextCreateImage (context);
   image.image = [UIImage imageWithCGImage:imageRef];
   CGColorSpaceRelease(colorSpace);    
   CGContextRelease(context);  
   CGImageRelease(imageRef);
   image = nil;
} 
```

感谢所有提供帮助的人！仅从您的建议中，我就学到了很多东西。这是我第一次使用 bt 和 NSZombie，现在我正在虔诚地使用它们！再次感谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:21:02.517

您正在释放 imageRef，这会导致 UIImage 被自动释放。

确保保留 UIImage 以防止此类事件发生：

```
- (UIImage *)displayImage
{
    CGContextRef context;

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    context = CGBitmapContextCreate(rgbaDataNew, width, height, 8, 4 * width, colorSpace, kCGImageAlphaPremultipliedLast ); 

    CGImageRef imageRef = CGBitmapContextCreateImage (context);
    UIImage *outputImage = [[UIImage imageWithCGImage:imageRef] retain]; 

    CGColorSpaceRelease(colorSpace);    
    CGContextRelease(context);  
    CGImageRelease(imageRef); //this line would cause outputImage to be released
    return outputImage;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T11:47:47.857

在`displayImage`告诉编译器你想保留图像`__strong`：

```
UIImage __strong *outputImage = [UIImage imageWithCGImage:imageRef]; 
```

或者，如果您愿意：

```
__strong UIImage *outputImage = [UIImage imageWithCGImage:imageRef]; 
```

# php - PHP：从客户端站点上的服务器播放声音文件

> ID：10664223
> 
> 赞同：2
> 
> 时间：2012-05-19T10:09:29.287
> 
> 标签：php, javascript, jquery, html

想`/var/spool/sound/dog.wav`在服务器上播放这样的路径上的文件。
这没有任何
**1) `URL`**
**2) 甚至现在`website root folder`**
都没有 我怎样才能让我的客户听那个 dog.wav ？

我通过使用`Tree view`客户端单击文件来获取文件路径，它返回被单击的文件的路径。如果您能告诉我任何具有播放声音文件功能的树视图，那将是您的一大贡献。
非常感谢
上帝保佑你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:29:10.343

我猜你的意思是在你的网站根文件夹之外有一个音频文件。我对吗？

在这种情况下，您可以使用 Apache 虚拟目录（如果您使用的是 Apache）并让您的路径从 url 可见，例如`http://address/sound/`然后使用您想要播放文件的任何类型的音频播放器（现在您可以访问您的音频文件通过`http://address/sound/dog.wav`）。user1352571 正在向您展示 HTML5 解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-19T10:20:03.127

这是播放音频文件的代码：

```
<!DOCTYPE html>
<html>
<body>

<audio controls="controls">
  <source src="song.ogg" type="audio/ogg" />
  <source src="song.mp3" type="audio/mp3" />
  Your browser does not support the audio element.
</audio>

</body>
</html> 
```

# struts2 - 如何仅使屏幕的一部分可滚动

> ID：10664227
> 
> 赞同：0
> 
> 时间：2012-05-19T10:09:46.740
> 
> 标签：struts2, include

我在 Tabs 中开发了菜单选项卡。jsp 并将其包含在我的 Main.jsp 中。现在是否可以使选项卡在 jsp 中不滚动（即）包含的文件不应该向下滚动。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:40:37.240

这与 Struts2 无关，您需要的是一个不应该滚动并且应该修复的浮动菜单，有多种方法可以做到，一个非常简单但很好的方法可以在[这里找到](http://www.dittocode.com/how-to-emulate-gmails-floating-menu-bar-with-jquery/)

# javascript - 延迟后如何更改文本 - jQuery

> ID：10664229
> 
> 赞同：0
> 
> 时间：2012-05-19T10:10:06.213
> 
> 标签：javascript, jquery, html

我有两个具有单独 id 的 div 和一个样式相同的类。

foo_1 有一个 z-index，所以它在 foo_2 之上。

```
<div id="foo_1" class="foo"><p>I'm awesome.</p></div>
<div id="foo_2" class="foo"><p>No, I am.</p></div> 
```

我想做的是让 foo_1 在 foo_2 后面淡出。

我确实试过这个；

### HTML

```
<div id="foo_1" class="foo"><p>I'm awesome</p></div>
<div id="foo_2" class="foo" style="display: none;"><p>No, I am.</p></div> 
```

### jQuery

```
$(document).ready(function()
{
    setTimeout(function()
    {
        $("#foo_1").fadeOut("slow", function ()
        {
            $("#foo_1").remove();                
            $("#foo_1").html($("#foo_2").text());
            $("#foo_1").show();
        });
     }, 5000);
 }); 
```

​ 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:46:56.387

在我看来，你正在做的事情有点矫枉过正。

让我总结一下：你有两个 div，它们位于同一个位置，但只有 #foo_1 是可见的，因为它在顶部。您现在想要隐藏#foo_1 以显示#foo_2。

因此，在淡出 #foo_1 的同时使 #foo_2 可见就足够了：

```
setTimeout(function() {
    // Make #foo_2 visible
    $('#foo_2').show();

    // Fade out #foo_1
    $('#foo_1').fadeOut('slow');
}, 5000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:12:01.830

```
setTimeout(function()
    {
        $("#foo_1").fadeOut("slow", function ()
        {
            // remove $("#foo_1").remove(); 
            // line from code, 
            // because, its removing #foo_1 from dom, 
            // so in next strp you can't catch it

            // $("#foo_1").remove();           
            $("#foo_1").html($("#foo_2").text());
            $("#foo_1").show();
        });
     }, 5000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-20T21:55:27.003

只需在 ms 中使用带有参数的标准 jQuery 函数`FadeOut(500)`，`FadeIn(500)`：

```
$(document).ready( function ()
{
  $('#foo_1').fadeOut(1500);
  $('#foo_2').text('No, I am!').fadeIn(1000);
 });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id='foo_1' style='display:block;'> I'm awesome </div>
<div id ='foo_2' style='display:none;'></div>
```

# javascript - SoundManager 2 的问题

> ID：10664230
> 
> 赞同：0
> 
> 时间：2012-05-19T10:10:10.847
> 
> 标签：javascript, html, soundmanager2

我正在尝试实现[SoundManager 2以在](http://www.schillmania.com/projects/soundmanager2/doc/getstarted/)[此页面](http://www.transalpine.ch/portale/culturale/tempo_libero/9_81.php)上播放歌曲片段。这是我当前的 JavaScript 代码：

```
alert('c!');
soundManager.url = 'http://www.transapine.ch/common/soundmanagerv297a-20120513/swf/soundmanager2.swf';
soundManager.flashVersion = 8; // optional: shiny features (default = 8)
soundManager.useFlashBlock = false; // optionally, enable when you're ready to dive in
/*
    Example HTML to make sound snippet:
    <div>
        <a href="http://path.to/soundclip/sclip.mp3" class="sclip hidden"><img src="..." height="x" /></a>
    </div>
*/

alert('d!');
soundManager.onready(function() {
    alert('e!');
    var els = $.Elements.getElementsByClassName('sclip');
    var a = url = '';
    var clips = new Array();
    var masterVolume = 100;

    for (var i=0; i<els.length; i++) {
        a = els[i];
        url = a.href;

        clips[i] = soundManager.createSound({
            id: "clip" + i,
            url: url,
            volume: masterVolume
        });//clips[i] = soundManager.createSound({

        $.Events.add(a, "click", function(e) {
            e.preventDefault();
            clips[i].play();
        });//$.Events.add(el, "click", function() {

        $.CSS.removeClass(a, 'hidden');// show the button

    }//for (var i=0; i<els.length; i++) {
});//soundManager.onready(function() { 
```

这是 HTML 页面中调用必要脚本的部分：

```
<script src="http://assets.momo40k.ch/common/js/$-min.js" type="text/javascript"></script>

<script type="text/javascript">alert('a!'); //these alerts are for debugging</script>

<script src="http://assets.momo40k.ch/common/soundmanagerv297a-20120513/script/soundmanager2-nodebug-jsmin.js" type="text/javascript"></script>

<script type="text/javascript">alert('b!');</script>

<script src="http://assets.momo40k.ch/common/js/soundclips.js" type="text/javascript"></script>

<script type="text/javascript">alert('f!');</script> 
```

**注意：**[$ 库](http://assets.momo40k.ch/common/js/%24.js)是我用来消除浏览器差异的一个小库。

我遇到了几个问题。

## 1\. SWF 文件

在 SoundManager 的教程中，它说使用`soundManager.url`来告诉它它需要的 SWF 文件的位置。无论我给它什么值，它似乎都忽略了它，因为 Firebug 给了我以下错误： `NetworkError: 404 Not Found - http://www.transalpine.ch/portale/soundmanager2.swf` 所以我尝试`soundmanager2.swf`输入`http://www.transalpine.ch/portale/`，错误消失了，所以我继续看看是否可以让它像这样工作。

**注意：**我有一个基本标记设置`http://www.transalpine.ch/portale/`作为网站这一部分的基本 URL。

问题 2 和 3 是同时发生的，我只是通过一点一点的调试脚本才设法将它们分开......

## 2.脚本在某些情况下不执行

在那之后，什么也没有发生。我放在页面上的两个测试按钮没有按应有的方式显示（从元素`$.CSS.removeClass(a, 'hidden');`中删除类`hidden`，有效地显示它们），所以我开始计算正在执行的内容和不以我通常的方式执行的内容：警报！所以我发现它`soundclips.js`根本没有执行，然后我发现只要`clips[i] = soundManager.createSound({...});`注释掉第 28-32 行 ( ) 就可以执行。这让我感到困惑：浏览器尚未读取的内容怎么能阻止读取整个文件？！

## 3.`soundManager.onready`不开火

删除了这些行后，我仍然遇到了最后一个问题，尽管它可能是由问题 1 引起的：事件`soundManager.onready`永远不会触发。

有谁知道我的设置有什么问题，以及是什么导致了所有这些问题？我猜 2 和 3 都是从 1 派生的，但我真的不明白 1 也不明白 2 怎么可能……谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T04:54:14.950

首先，URL 应如下所示：

```
soundManager.url = 'http://www.transapine.ch/common/soundmanagerv297a-20120513/swf/'; 
```

其他一切现在都应该有所修复。

# java - 防止css通过restlet

> ID：10664233
> 
> 赞同：0
> 
> 时间：2012-05-19T10:10:45.033
> 
> 标签：java, rest, http-status-code-404, freemarker, restlet

我一直在寻找这个问题的答案，但在任何地方都找不到。真的希望有人能帮忙

我的结构：

```
WebContent
 - resources
     - css
         - style.css
 - WEB-INF
     - web.xml
template.html 
```

**web.xml**

```
 <servlet>
  <servlet-name>RestletServlet</servlet-name>
  <servlet-class>org.restlet.ext.servlet.ServerServlet</servlet-class>
 </servlet>
 <servlet-mapping>
  <servlet-name>RestletServlet</servlet-name>
  <url-pattern>/*</url-pattern>
 </servlet-mapping> 
```

**应用程序.java**

```
String ROOT_URI = "C:/projects/testsite/WebContent/"
    try {
        configuration.setDirectoryForTemplateLoading(new File(ROOT_URI));
        configuration.setObjectWrapper(new BeansWrapper());
    } catch (IOException e) {
        e.printStackTrace();
    }

    router.attach("/resources", new Directory(getContext(), LocalReference.createFileReference(ROOT_URI)));
    router.attach("/index", IndexResource.class); 
```

当我转到 URL: localhost:8080/testsite/index 时，我得到了模板文件，其中填充了正确的数据。但是没有加载 CSS。我可以在我的 Eclipse 控制台中看到 restlet 正在尝试获取它，但我得到了 404

```
127.0.0.1   8080    GET /testsite/resources/css/style.css   -   404 
```

正如您在上面看到的，我正在尝试使用`Directory`该类来加载我的 css 目录，但没有任何效果。也许这是错的！？有没有办法让css不通过restlet？如果`ROOT_URI`是相对路径而不是绝对路径会很好。有没有更简单的方法来获取我的位置路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:26:53.067

我首先注意到，由于您的目录基于“文件”协议，因此应用程序的容器必须声明此客户端连接器。这是在 web.xml 配置文件中完成的：

```
<servlet>
    <servlet-name>RestletServlet</servlet-name>
    <servlet-class>org.restlet.ext.servlet.ServerServlet</servlet-class>
    <init-param>
        <param-name>org.restlet.application</param-name>
        <param-value>test.MyApplication (actually the full name of your Application</param-value>
    </init-param>
    <init-param>
        <param-name>org.restlet.clients</param-name>
        <param-value>FILE</param-value>
    </init-param>
 </servlet> 
```

如果没有此说明，我认为您的日志包含一些如下所示的条目：

```
ATTENTION: The protocol used by this request is not declared in the list of client connectors. (FILE) 
```

话虽如此，使用“文件”协议来提供静态文件会将您的应用程序与文件系统联系起来。您可以在内部提供这些文件，也就是说让容器在应用程序 WAR 中查找您的静态资源（可能未压缩）。您可以简单地将目录基于“战争”协议，如下所示：

```
router.attach("/resources", new Directory(getContext(), "war:///")); 
```

我希望这能帮到您。

最好的问候，蒂埃里·布瓦洛

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:34:51.967

我让它工作了我必须把这个映射放到我的 web.xml 文件中

```
 <servlet-mapping>
 <servlet-name>default</servlet-name>
 <url-pattern>/resources/*</url-pattern>
</servlet-mapping> 
```

# android - 暂停在android中的音频播放器中

> ID：10664236
> 
> 赞同：0
> 
> 时间：2012-05-19T10:11:40.940
> 
> 标签：android, abc

我有一个严重的问题。我研究了两天，但我无法解决。当我运行我的应用程序时，我收到一个错误。

```
package jl.a.simple;

import android.app.Activity;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class AudioSimpleActivity extends Activity {
    /** Called when the activity is first created. */
    Button btn_play;
    MediaPlayer mMediaPlayer;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        btn_play=(Button)findViewById(R.id.simple);
        btn_play.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                mMediaPlayer=MediaPlayer.create(AudioSimpleActivity.this,R.drawable.testaudio );
                mMediaPlayer.start();
                mMediaPlayer.setOnCompletionListener(new OnCompletionListener() {

                    @Override
                    public void onCompletion(MediaPlayer mp) {
                        // TODO Auto-generated method stub

                    }
                });
            }
        });
    }
} 
```

逻辑猫…………

```
05-18 16:45:15.429: I/ApplicationPackageManager(22388): cscCountry is not German : XXV
05-18 16:45:20.919: D/BatteryService(162): update start
05-18 16:45:20.919: D/BatteryService(162): update start
05-18 16:45:20.929: D/BatteryService(162): update start
05-18 16:45:25.329: D/AndroidRuntime(27725): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
05-18 16:45:25.329: D/AndroidRuntime(27725): CheckJNI is OFF
05-18 16:45:25.329: D/AndroidRuntime(27725): setted country_code = VIETNAM
05-18 16:45:25.329: D/AndroidRuntime(27725): setted sales_code = XXV
05-18 16:45:25.329: D/AndroidRuntime(27725): found sales_code tag = <XXV>, </XXV> 
05-18 16:45:25.329: E/AndroidRuntime(27725): /system/csc/feature.xml ==> cannot open file
05-18 16:45:25.649: D/AndroidRuntime(27725): Calling main entry com.android.commands.pm.Pm
05-18 16:45:25.659: D/AndroidRuntime(27725): Shutting down VM
05-18 16:45:25.679: I/AndroidRuntime(27725): NOTE: attach of thread 'Binder Thread #3' failed
05-18 16:45:26.049: D/AndroidRuntime(27735): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
05-18 16:45:26.049: D/AndroidRuntime(27735): CheckJNI is OFF
05-18 16:45:26.049: D/AndroidRuntime(27735): setted country_code = VIETNAM
05-18 16:45:26.049: D/AndroidRuntime(27735): setted sales_code = XXV
05-18 16:45:26.049: D/AndroidRuntime(27735): found sales_code tag = <XXV>, </XXV> 
05-18 16:45:26.049: E/AndroidRuntime(27735): /system/csc/feature.xml ==> cannot open file
05-18 16:45:26.339: D/AndroidRuntime(27735): Calling main entry com.android.commands.am.Am
05-18 16:45:26.359: I/ActivityManager(162): Force stopping package jl.a.simple uid=10088
05-18 16:45:26.379: I/OrientationDebug(162): [pwm] in updateOrientationListenerLp()
05-18 16:45:26.379: V/OrientationDebug(162): in updateOrientationListenerLp(), Screen status=true, current orientation=5, SensorEnabled=false
05-18 16:45:26.379: I/OrientationDebug(162): [pwm] needSensorRunningLp(), return false #3
05-18 16:45:26.389: I/WindowManager(162): WIN DEATH: Window{408535b8 jl.a.simple/jl.a.simple.AudioSimpleActivity paused=false}
05-18 16:45:26.399: I/Launcher(246): onResume(). mIsNewIntent : false
05-18 16:45:26.419: D/ProgramMonitor(27518):  onReceive -no
05-18 16:45:26.419: D/ProgramMonitor(27518): appWidgetIds.length : 0
05-18 16:45:26.419: D/ProgramMonitor(27518):  onReceive - action:com.sec.android.app.controlpanel.RUNNING_PROGRAM_REQ
05-18 16:45:26.419: E/Launcher(246): setWindowOpaque()
05-18 16:45:26.429: I/ActivityManager(162): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=jl.a.simple/.AudioSimpleActivity } from pid 27735
05-18 16:45:26.449: D/AndroidRuntime(27735): Shutting down VM
05-18 16:45:26.469: E/Launcher(246): MTP-LAUNCHER: media scanning not yet finished. 
05-18 16:45:26.469: I/AndroidRuntime(27735): NOTE: attach of thread 'Binder Thread #3' failed
05-18 16:45:26.479: I/Launcher(246): onResume() ended
05-18 16:45:26.509: I/Launcher(246): onPause()
05-18 16:45:26.529: I/Launcher(246): onWindowFocusChanged(true)
05-18 16:45:26.529: D/Launcher(246): setWallpaperDimension() called
05-18 16:45:26.529: D/Launcher(246): USE_NON_SCROLLABLE_IMAGE_WALLPAPER is true
05-18 16:45:26.529: D/Launcher(246): It's image wallpaper. suggestDesiredDimensions(-1,-1)
05-18 16:45:26.529: E/Launcher(246): setWindowOpaque()
05-18 16:45:26.529: I/ActivityManager(162): Start proc jl.a.simple for activity jl.a.simple/.AudioSimpleActivity: pid=27744 uid=10088 gids={}
05-18 16:45:26.629: I/OrientationDebug(162): [pwm] in updateOrientationListenerLp()
05-18 16:45:26.639: V/OrientationDebug(162): in updateOrientationListenerLp(), Screen status=true, current orientation=-1, SensorEnabled=false
05-18 16:45:26.639: I/OrientationDebug(162): [pwm] needSensorRunningLp(), return false #3
05-18 16:45:26.649: I/Launcher(246): onWindowFocusChanged(false)
05-18 16:45:26.649: D/Launcher(246): setWallpaperDimension() called
05-18 16:45:26.649: D/Launcher(246): USE_NON_SCROLLABLE_IMAGE_WALLPAPER is true
05-18 16:45:26.659: W/ActivityThread(27744): Application jl.a.simple is waiting for the debugger on port 8100...
05-18 16:45:26.679: I/System.out(27744): Sending WAIT chunk
05-18 16:45:26.679: D/Launcher(246): It's image wallpaper. suggestDesiredDimensions(-1,-1)
05-18 16:45:26.989: D/ProgramMonitor(27518):  onReceive - action:com.sec.android.app.controlpanel.RUNNING_PROGRAM_ACK
05-18 16:45:26.989: D/ProgramMonitor(27518): updateNumberText
05-18 16:45:27.079: I/System.out(27744): Debugger has connected
05-18 16:45:27.079: I/System.out(27744): waiting for debugger to settle...
05-18 16:45:27.299: I/System.out(27744): waiting for debugger to settle...
05-18 16:45:27.499: I/System.out(27744): waiting for debugger to settle...
05-18 16:45:27.579: D/ProgramMonitor(27518): updateWidget
05-18 16:45:27.589: D/ProgramMonitor(27518): updateWidget - appWidgetIds == null -->> resetting
05-18 16:45:27.589: D/ProgramMonitor(27518): updateWidget - appWidgetIds.length == 0
05-18 16:45:27.699: I/System.out(27744): waiting for debugger to settle...
05-18 16:45:27.899: I/System.out(27744): waiting for debugger to settle...
05-18 16:45:28.099: I/System.out(27744): waiting for debugger to settle...
05-18 16:45:28.309: I/System.out(27744): waiting for debugger to settle...
05-18 16:45:28.509: I/System.out(27744): waiting for debugger to settle...
05-18 16:45:28.709: I/System.out(27744): waiting for debugger to settle...
05-18 16:45:28.909: I/System.out(27744): waiting for debugger to settle...
05-18 16:45:29.109: I/System.out(27744): waiting for debugger to settle...
05-18 16:45:29.309: I/System.out(27744): waiting for debugger to settle...
05-18 16:45:29.509: I/System.out(27744): debugger has settled (1322)
05-18 16:45:29.709: I/ApplicationPackageManager(27744): cscCountry is not German : XXV
05-18 16:45:29.899: W/InputManagerService(162): Got RemoteException sending setActive(false) notification to pid 27692 uid 10088
05-18 16:45:29.909: E/AxT9IME(234): setEditorType() - restarting : false
05-18 16:45:29.909: E/AxT9IME(234):  mRestartRequested : false
05-18 16:45:29.909: E/AxT9IME(234):  mIsScreenLocked : false
05-18 16:45:29.909: E/Vivek(234): mInputLanguage = 4242
05-18 16:45:29.969: I/ActivityManager(162): Displayed jl.a.simple/.AudioSimpleActivity: +3s444ms
05-18 16:45:30.009: D/ProgramMonitor(27518):  onReceive - action:com.sec.android.app.controlpanel.CPU_USAGE_WARN
05-18 16:45:30.009: I/ProgramMonitor(27518): cpu_usage_wan
05-18 16:45:30.009: D/ProgramMonitor(27518): updateSlideText
05-18 16:45:30.009: D/ProgramMonitor(27518): updateDefaultText
05-18 16:45:30.019: D/ProgramMonitor(27518): updateWidget
05-18 16:45:30.019: D/ProgramMonitor(27518): updateWidget - appWidgetIds == null -->> resetting
05-18 16:45:30.029: D/ProgramMonitor(27518): updateWidget - appWidgetIds.length == 0
05-18 16:45:30.939: D/BatteryService(162): update start
05-18 16:45:30.939: D/BatteryService(162): update start
05-18 16:45:30.949: D/BatteryService(162): update start
05-18 16:45:32.840: I/InputReader(162): dispatchTouch::touch event's action is 0
05-18 16:45:32.840: I/InputDispatcher(162): Delivering touch to current input target: action: 0, channel '407d3080 jl.a.simple/jl.a.simple.AudioSimpleActivity (server)'
05-18 16:45:32.840: D/PowerManagerService(162): reactivateScreenLocksLocked mProxIgnoredBecauseScreenTurnedOff=false
05-18 16:45:32.840: I/PowerManagerService(162): Ulight 1->7|0
05-18 16:45:32.840: D/PowerManagerService(162): setLightBrightness : mButtonLight : 30
05-18 16:45:32.929: I/InputReader(162): dispatchTouch::touch event's action is 1
05-18 16:45:32.929: I/InputDispatcher(162): Delivering touch to current input target: action: 1, channel '407d3080 jl.a.simple/jl.a.simple.AudioSimpleActivity (server)'
05-18 16:45:33.089: I/PowerManagerService(162): Light Animator Finished curIntValue=30
05-18 16:45:35.289: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:45:36.290: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:45:38.290: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:45:38.939: W/PowerManagerService(162): Timer 0x7->0x3|0x1
05-18 16:45:38.939: I/PowerManagerService(162): Ulight 7->3|0
05-18 16:45:38.939: D/PowerManagerService(162): setLightBrightness : mButtonLight : 0
05-18 16:45:39.289: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:45:40.960: D/BatteryService(162): update start
05-18 16:45:40.960: D/BatteryService(162): update start
05-18 16:45:40.970: D/BatteryService(162): update start
05-18 16:45:41.289: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:45:42.289: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:45:44.299: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:45:45.300: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:45:50.300: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:45:50.979: D/BatteryService(162): update start
05-18 16:45:50.979: D/BatteryService(162): update start
05-18 16:45:50.989: D/BatteryService(162): update start
05-18 16:45:55.939: I/InputReader(162): dispatchTouch::touch event's action is 0
05-18 16:45:55.939: I/InputDispatcher(162): Delivering touch to current input target: action: 0, channel '407d3080 jl.a.simple/jl.a.simple.AudioSimpleActivity (server)'
05-18 16:45:55.939: I/PowerManagerService(162): Ulight 3->7|0
05-18 16:45:55.939: D/PowerManagerService(162): setLightBrightness : mButtonLight : 30
05-18 16:45:55.969: I/InputReader(162): dispatchTouch::touch event's action is 1
05-18 16:45:55.969: I/InputDispatcher(162): Delivering touch to current input target: action: 1, channel '407d3080 jl.a.simple/jl.a.simple.AudioSimpleActivity (server)'
05-18 16:45:55.989: W/ResourceType(27744): getEntry failing because entryIndex 2 is beyond type entryCount 2
05-18 16:45:55.989: W/ResourceType(27744): Failure getting entry for 0x7f020002 (t=1 e=2) in package 0 (error -2147483647)
05-18 16:45:56.299: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:45:59.309: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:46:00.999: D/BatteryService(162): update start
05-18 16:46:00.999: D/BatteryService(162): update start
05-18 16:46:01.009: D/BatteryService(162): update start
05-18 16:46:01.979: W/PowerManagerService(162): Timer 0x7->0x3|0x1
05-18 16:46:01.979: I/PowerManagerService(162): Ulight 7->3|0
05-18 16:46:01.979: D/PowerManagerService(162): setLightBrightness : mButtonLight : 0
05-18 16:46:02.310: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:46:03.309: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:46:06.309: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:46:08.319: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:46:11.019: D/BatteryService(162): update start
05-18 16:46:11.019: D/BatteryService(162): update start
05-18 16:46:11.029: D/BatteryService(162): update start
05-18 16:46:16.029: I/InputReader(162): dispatchTouch::touch event's action is 0
05-18 16:46:16.029: I/InputDispatcher(162): Delivering touch to current input target: action: 0, channel '407d3080 jl.a.simple/jl.a.simple.AudioSimpleActivity (server)'
05-18 16:46:16.029: I/PowerManagerService(162): Ulight 3->7|0
05-18 16:46:16.029: D/PowerManagerService(162): setLightBrightness : mButtonLight : 30
05-18 16:46:16.130: I/InputReader(162): dispatchTouch::touch event's action is 1
05-18 16:46:18.330: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:46:20.489: I/ApplicationPackageManager(22388): cscCountry is not German : XXV
05-18 16:46:21.039: D/BatteryService(162): update start
05-18 16:46:21.039: D/BatteryService(162): update start
05-18 16:46:21.049: D/BatteryService(162): update start
05-18 16:46:21.319: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:46:22.139: W/PowerManagerService(162): Timer 0x7->0x3|0x1
05-18 16:46:22.139: I/PowerManagerService(162): Ulight 7->3|0
05-18 16:46:22.139: D/PowerManagerService(162): setLightBrightness : mButtonLight : 0
05-18 16:46:29.329: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:46:30.329: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:46:31.060: D/BatteryService(162): update start
05-18 16:46:31.060: D/BatteryService(162): update start
05-18 16:46:31.070: D/BatteryService(162): update start
05-18 16:46:32.329: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:46:35.339: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:46:36.150: I/InputDispatcher(162): Application is not responding: Window{407d3080 jl.a.simple/jl.a.simple.AudioSimpleActivity paused=false}.  20020.6ms since event, 20020.4ms since wait started
05-18 16:46:36.150: I/InputDispatcher(162): Current inboundQueue's length is 0, outboundQueue's length is 1
05-18 16:46:36.150: I/InputDispatcher(162): outboundQueue 0: inProgress is 1, type is 3
05-18 16:46:36.150: D/InputDispatcher(162): findTouchedWindow finished: injectionResult=-1, injectionPermission=1, timeSpentWaitingForApplication=20020.4ms
05-18 16:46:36.150: D/InputDispatcher(162): findTouchedWindow finished: injectionResult=-1, injectionPermission=1, timeSpentWaitingForApplication=20021.4ms
05-18 16:46:36.150: I/WindowManager(162): Input event dispatching timed out sending to jl.a.simple/jl.a.simple.AudioSimpleActivity
05-18 16:46:36.329: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL
05-18 16:46:41.080: D/BatteryService(162): update start
05-18 16:46:41.080: D/BatteryService(162): update start
05-18 16:46:41.090: D/BatteryService(162): update start
05-18 16:46:41.339: D/StatusBarPolicy(226): updateSignalStrength: numeric=45204, curOperator=VIETTEL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:50:46.407

特别是您的布局有问题。我用我自己的布局更改它并将您的音频移动到原始文件夹，我觉得它更好。然后我得到输出。那是一首好音乐：D。

# sql - MVC 创建 SQL 视图与将计算放入控制器

> ID：10664237
> 
> 赞同：2
> 
> 时间：2012-05-19T10:11:43.967
> 
> 标签：sql, asp.net-mvc, view, one-to-many

我申请了一份工作，他们要求我在面试之前创建一个小型 MVC 应用程序。他们拒绝了，说我使用了不良做法。请帮我弄清楚我做错了什么！

该任务涉及一个简单的数据库，`Product`其负载为`Sales`（一对多）。

我不得不：

1.  显示总销售额的产品列表
2.  显示并允许编辑和删除销售

我的解决方案：

1.  创建一个左连接 SQL 视图，该视图使用一个组并加入到自身以获取销售总额。该表每个产品有一行

2.  使用所有产品和销售数据创建一个内部连接的 SQL 视图。每次销售只有一排。

对于#1，我只是渲染了视图

对于 #2，我必须渲染产品详细信息和销售详细信息（在单个页面上一对多），因此我在控制器中执行了以下操作：

```
public ActionResult Details(int id)
{
     // get details for the selected product
     var product = db.ProductsWithTotals.Where(q => q.ProductId == id).Single();
     ViewData["CatalogueNumber"] = product.CatalogueNumber;
     ViewData["Title"] = product.Title;
     ViewData["Artist"] = product.Artist;
     ViewData["TotalSold"] = product.TotalSold;
     ViewData["ProductId"] = product.ProductId;

     // then pass its sales lines to the view
     var salesLines = db.SalesLineDetails.Where(q => q.ProductId == id);
     return View(salesLines);
} 
```

如果有人能解释我如何能更优雅地做到这一点，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:15:01.097

我个人唯一会做不同的事情是：

*   使用 EF（但是是的，L2S 适合这样的快速操作）
*   为详细信息视图创建一个 ViewModel 类。我尽可能少地使用 ViewData。

但是，是的，这里没什么不好，我同意这可能不是一个工作的好地方。如果人们不想说他们不喜欢你的脸，他们也倾向于编造模糊的理由。

/耸耸肩

# groovy - Groovy shell 评估中的死锁

> ID：10664238
> 
> 赞同：0
> 
> 时间：2012-05-19T10:11:54.950
> 
> 标签：groovy, concurrency, deadlock, dsl

我正在使用 Groovy 1.7.8。并编写了我在不同域对象上同时执行的 Groovy DSL。

最近，当 DSL 并发编译/执行时，我开始面临重并发下的死锁。

我在运行时编译/执行 Groovy DSL，使用：

```
Script s = compileScript(dsl)
def binding = new Binding()
binding.setVariable("domainObj", domainObj)
s.setBinding(binding)
s.run() 

def Script compileScript(String dsl) {
    def scriptText = getScriptText(dsl)
    def conf = new CompilerConfiguration()
    conf.setScriptBaseClass(GroovyViewExecutionBase.class.getName())
    new GroovyShell(conf).parse(scriptText)
} 
```

下面是死锁线程的线程转储，看线程转储我感觉Groovy内部是在我们在运行时并发编译/执行脚本的时候死锁的。

# 死锁参与者 1：

```
at java.beans.PropertyDescriptor.getReadMethod(PropertyDescriptor.java:158)

- waiting to lock <0x00007f41a3363960> (a java.beans.PropertyDescriptor)

at java.beans.Introspector.processPropertyDescriptors(Introspector.java:683)

at java.beans.Introspector.getTargetPropertyInfo(Introspector.java:615)

at java.beans.Introspector.getBeanInfo(Introspector.java:407)

at java.beans.Introspector.getBeanInfo(Introspector.java:164)

- locked <0x00007f41a3358c28> (a java.lang.Object)

at groovy.lang.MetaClassImpl$15.run(MetaClassImpl.java:2940)

at java.security.AccessController.doPrivileged(Native Method)

at groovy.lang.MetaClassImpl.addProperties(MetaClassImpl.java:2938)

at groovy.lang.MetaClassImpl.initialize(MetaClassImpl.java:2921)

- locked <0x00007f429f011268> (a groovy.lang.ExpandoMetaClass)

at groovy.lang.ExpandoMetaClass.initialize(ExpandoMetaClass.java:463)

- locked <0x00007f429f011268> (a groovy.lang.ExpandoMetaClass)

at org.codehaus.groovy.reflection.ClassInfo.getMetaClassUnderLock(ClassInfo.java:166)

at org.codehaus.groovy.reflection.ClassInfo.getMetaClass(ClassInfo.java:182)

at org.codehaus.groovy.runtime.metaclass.MetaClassRegistryImpl.getMetaClass(MetaClassRegistryImpl.java:210)

at org.codehaus.groovy.runtime.InvokerHelper.getMetaClass(InvokerHelper.java:751)

at groovy.lang.GroovyObjectSupport.<init>(GroovyObjectSupport.java:32)

at groovy.lang.Script.<init>(Script.java:40)

at groovy.lang.Script.<init>(Script.java:37)

at flipkart.cms.views.core.GroovyViewExecutionBase.<init>(GroovyViewExecutionBase.groovy)

at Script1.<init>(Script1.groovy)

at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)

at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)

at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)

at java.lang.reflect.Constructor.newInstance(Constructor.java:513)

at java.lang.Class.newInstance0(Class.java:355)

at java.lang.Class.newInstance(Class.java:308)

at org.codehaus.groovy.runtime.InvokerHelper.createScript(InvokerHelper.java:408)

at groovy.lang.GroovyShell.parse(GroovyShell.java:743)

at groovy.lang.GroovyShell.parse(GroovyShell.java:770)

at groovy.lang.GroovyShell.parse(GroovyShell.java:761)

at groovy.lang.GroovyShell$parse.call(Unknown Source)

at cms.views.core.GroovyDSLViewComputer.compileScript(GroovyDSLViewComputer.groovy:85) 
```

===================

死锁参与者 2：在 java.beans.Introspector.getPublicDeclaredMethods(Introspector.java:1277)

```
- waiting to lock <0x00007f41a3358c28> (a java.lang.Object)

at java.beans.Introspector.internalFindMethod(Introspector.java:1312)

at java.beans.Introspector.findMethod(Introspector.java:1383)

at java.beans.Introspector.findMethod(Introspector.java:1363)

at java.beans.PropertyDescriptor.getReadMethod(PropertyDescriptor.java:179)

- locked <0x00007f41a3363960> (a java.beans.PropertyDescriptor)

at groovy.lang.MetaClassImpl.applyPropertyDescriptors(MetaClassImpl.java:2215)

at groovy.lang.MetaClassImpl.setupProperties(MetaClassImpl.java:1995)

at groovy.lang.MetaClassImpl.addProperties(MetaClassImpl.java:2950)

at groovy.lang.MetaClassImpl.initialize(MetaClassImpl.java:2921)

- locked <0x00007f42a12972b8> (a groovy.lang.ExpandoMetaClass)

at groovy.lang.ExpandoMetaClass.initialize(ExpandoMetaClass.java:463)

- locked <0x00007f42a12972b8> (a groovy.lang.ExpandoMetaClass)

at org.codehaus.groovy.runtime.HandleMetaClass.replaceDelegate(HandleMetaClass.java:66)

at org.codehaus.groovy.runtime.HandleMetaClass.setProperty(HandleMetaClass.java:91)

at org.codehaus.groovy.runtime.InvokerHelper.setProperty(InvokerHelper.java:179)

at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.setProperty(ScriptBytecodeAdapter.java:483)

at flipkart.cms.views.core.GroovyViewExecutionBase.setupAttrProperties(GroovyViewExecutionBase.groovy:60)

at flipkart.cms.views.core.GroovyViewExecutionBase$setupAttrProperties$0.callCurrent(Unknown Source)

at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:44)

at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)

at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:149)

at cms.views.core.GroovyViewExecutionBase.computeView(GroovyViewExecutionBase.groovy:32) 
```

===================

有什么想法可以解决/解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:12:36.773

将此发布在 groovy-user 论坛上，看起来死锁是由于 java 6 的 java.beans.Introspector 类中的同步问题引起的，该类显然已在 Java 7 中修复。还收到了这些类的 Java 6 的反向移植，并且正在测试向后移植类以重现死锁。

更多细节在这里：

[http://groovy.329449.n5.nabble.com/Groovy-deadlocks-when-executing-DSL-from-GroovyShell-td5709889.html](http://groovy.329449.n5.nabble.com/Groovy-deadlocks-when-executing-DSL-from-GroovyShell-td5709889.html)

# javascript - 为具有随机 ID 的多个文本框单击选择文本

> ID：10664242
> 
> 赞同：0
> 
> 时间：2012-05-19T10:12:24.060
> 
> 标签：javascript, jquery

我的页面上有多个文本框，它们的 ID 以“Text”开头，后跟一个随机字符串，例如“Textc0816e05-d7c0-4acc-b233-bef152781cac”，当用户单击它时，如何选择文本框的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:14:43.300

您可以使用以下代码获取单击的文本框值

```
$('input[type=text][id^=Text]').on('click',function(){
     var value = $(this).val();

     //do what ever you want with the values
}); 
```

您可以查看[`Attributes start with selector`](http://api.jquery.com/attribute-starts-with-selector/)文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:14:53.153

```
$('input[type=text][id^=Text]').on('click', function() {
   console.log(this.value);
}); 
```

# python - Django：如何管理开发和生产设置？

> ID：10664244
> 
> 赞同：178
> 
> 时间：2012-05-19T10:12:34.153
> 
> 标签：python, django

我一直在开发一个基本的应用程序。现在在部署阶段，很明显我需要本地设置和生产设置。

很高兴知道以下内容：

*   如何最好地处理开发和生产设置。
*   如何将 django-debug-toolbar 等应用程序仅保留在开发环境中。
*   有关开发和部署设置的任何其他提示和最佳实践。

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-05-19T10:36:40.923

[`DJANGO_SETTINGS_MODULE`环境变量](https://docs.djangoproject.com/en/2.1/topics/settings/#envvar-DJANGO_SETTINGS_MODULE)控制 Django将加载哪些设置文件。

因此，您可以为各自的环境创建单独的配置文件（请注意，它们当然可以`import *`来自单独的“共享设置”文件），并用于`DJANGO_SETTINGS_MODULE`控制要使用的配置文件。

就是这样：

如 Django 文档中所述：

> DJANGO_SETTINGS_MODULE 的值应该是 Python 路径语法，例如 mysite.settings。请注意，设置模块应位于 Python 导入搜索路径中。

因此，让我们假设您创建`myapp/production_settings.py`并`myapp/test_settings.py`在您的源存储库中。

在这种情况下，您将分别设置`DJANGO_SETTINGS_MODULE=myapp.production_settings`为使用前者和`DJANGO_SETTINGS_MODULE=myapp.test_settings`使用后者。

* * *

从这里开始，问题归结为设置`DJANGO_SETTINGS_MODULE`环境变量。

## `DJANGO_SETTINGS_MODULE`使用脚本或 shell 进行设置

然后，您可以使用引导脚本或进程管理器来加载正确的设置（通过设置环境），或者在启动 Django 之前从 shell 运行它：`export DJANGO_SETTINGS_MODULE=myapp.production_settings`。

请注意，您可以随时从 shell 运行此导出 - 它不需要存在于您的`.bashrc`或任何东西中。

## `DJANGO_SETTINGS_MODULE`使用进程管理器进行设置

如果您不喜欢编写设置环境的引导脚本（并且有充分的理由有这种感觉！），我建议您使用流程管理器：

*   [Supervisor](http://supervisord.org/)允许您使用[程序的`environment`配置键](http://supervisord.org/configuration.html#program-x-section-settings)将环境变量传递给托管进程。
*   [Honcho](https://honcho.readthedocs.org/en/latest/)（Ruby 的 Foreman 的纯 Python 等价物）允许您在[“环境”( `.env`) 文件](https://honcho.readthedocs.org/en/latest/using_procfiles.html#environment-files)中定义环境变量。

* * *

最后，请注意，您*可以*利用该`PYTHONPATH`变量将设置存储在完全不同的位置（例如，在生产服务器上，将它们存储在 中`/etc/`）。这允许将配置与应用程序文件分开。您可能想要也可能不想要，这取决于您的应用程序的结构。

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2016-01-20T04:39:44.677

默认情况下使用生产设置，但在与您的文件`settings_dev.py`相同的文件夹中创建一个名为的`settings.py`文件。在那里添加覆盖，例如`DEBUG=True`.

在将用于开发的计算机上，将其添加到您的`~/.bashrc`文件中：

```
export DJANGO_DEVELOPMENT=true 
```

在`settings.py`文件的底部，添加以下内容。

```
# Override production variables if DJANGO_DEVELOPMENT env variable is set
if os.environ.get('DJANGO_DEVELOPMENT'):
    from settings_dev import *  # or specific overrides 
```

（请注意，`*`在 Python 中通常应避免导入）

默认情况下，生产服务器不会覆盖任何内容。完毕！

与其他答案相比，这个答案更简单，因为它不需要更新`PYTHONPATH`或设置`DJANGO_SETTINGS_MODULE`，它一次只允许您处理一个 django 项目。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-05-19T11:28:31.033

我通常每个环境有一个设置文件和一个共享设置文件：

```
/myproject/
  settings.production.py
  settings.development.py
  shared_settings.py 
```

我的每个环境文件都有：

```
try:
    from shared_settings import *
except ImportError:
    pass 
```

这允许我在必要时覆盖共享设置（通过在该节下方添加修改）。

然后我通过将其链接到 settings.py 来选择要使用的设置文件：

```
ln -s settings.development.py settings.py 
```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2019-01-21T15:21:02.613

这就是我通过 6 个简单步骤完成的方法：

1.  在您的项目目录中创建一个文件夹并将其命名为`settings`.

    *项目结构：*

    ```
    myproject/
           myapp1/
           myapp2/              
           myproject/
                  settings/ 
    ```

2.  在目录中创建四个 python 文件，`settings`即`__init__.py`、和`base.py``dev.py``prod.py`

    *设置文件：*

    ```
    settings/
         __init__.py
         base.py
         prod.py
         dev.py 
    ```

3.  打开`__init__.py`并填写以下内容：

    ***初始化**.py：*

    ```
    from .base import *
    # you need to set "myproject = 'prod'" as an environment variable
    # in your OS (on which your website is hosted)
    if os.environ['myproject'] == 'prod':
       from .prod import *
    else:
       from .dev import * 
    ```

4.  打开`base.py`并用所有常用设置（将在生产和开发中使用）填充它。例如：

    *基础.py：*

    ```
    import os
    ...
    INSTALLED_APPS = [...]
    MIDDLEWARE = [...]
    TEMPLATES = [{...}]
    ...
    STATIC_URL = '/static/'
    STATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles')
    MEDIA_ROOT = os.path.join(BASE_DIR, '/path/')
    MEDIA_URL = '/path/' 
    ```

5.  打开`dev.py`并包含特定于开发的内容，例如：

    *开发者.py：*

    ```
    DEBUG = True
    ALLOWED_HOSTS = ['localhost']
    ... 
    ```

6.  打开`prod.py`并包含特定于生产的内容，例如：

    *产品.py：*

    ```
    DEBUG = False
    ALLOWED_HOSTS = ['www.example.com']
    LOGGING = [...]
    ... 
    ```

7.  （根据 ANDRESMA 的评论）更新`BASE_DIR`您的文件以通过在末尾`base.py`添加另一个来反映您更新的路径。`.parent`例如：

    *基础.py：*

    ```
    BASE_DIR = Path(__file__).resolve().parent.parent.parent 
    ```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2017-03-14T20:56:44.330

我使用了很棒的[django-configurations](https://django-configurations.readthedocs.io)，所有设置都存储在我的`settings.py`：

```
from configurations import Configuration

class Base(Configuration):
    # all the base settings here...
    BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
    ...

class Develop(Base):
    # development settings here...
    DEBUG = True 
    ...

class Production(Base):
    # production settings here...
    DEBUG = False 
```

要配置 Django 项目，我只是按照[文档](https://django-configurations.readthedocs.io)。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-05-19T10:24:31.303

创建多个`settings*.py`文件，推断每个环境需要更改的变量。然后在你的主`settings.py`文件的末尾：

```
try:
  from settings_dev import *
except ImportError:
  pass 
```

`settings_*`您为每个阶段保留单独的文件。

在`settings_dev.py`文件的顶部，添加以下内容：

```
import sys
globals().update(vars(sys.modules['settings'])) 
```

导入需要修改的变量。

这个[wiki 条目](https://code.djangoproject.com/wiki/SplitSettings)有更多关于如何拆分设置的想法。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2018-03-22T21:57:20.390

这是我们使用的方法：

*   `settings`将设置拆分为多个文件以提高可读性的模块；
*   一个`.env.json`文件，用于存储我们希望从 git 存储库中排除或特定于环境的凭据和参数；
*   读取文件`env.py`的`.env.json`文件

## 考虑以下结构：

```
...
.env.json           # the file containing all specific credentials and parameters
.gitignore          # the .gitignore file to exclude `.env.json`
project_name/       # project dir (the one which django-admin.py creates)
  accounts/         # project's apps
    __init__.py
    ...
  ...
  env.py            # the file to load credentials
  settings/
    __init__.py     # main settings file
    database.py     # database conf
    storage.py      # storage conf
    ...
venv                # virtualenv
... 
```

### 喜欢`.env.json`：

```
{
    "debug": false,
    "allowed_hosts": ["mydomain.com"],
    "django_secret_key": "my_very_long_secret_key",
    "db_password": "my_db_password",
    "db_name": "my_db_name",
    "db_user": "my_db_user",
    "db_host": "my_db_host",
} 
```

### 并且`project_name/env.py`：

```
<!-- language: lang-python -->
import json
import os

def get_credentials():
    env_file_dir = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
    with open(os.path.join(env_file_dir, '.env.json'), 'r') as f:
        creds = json.loads(f.read())
    return creds

credentials = get_credentials() 
```

### 我们可以有以下设置：

```
<!-- language: lang-py -->
# project_name/settings/__init__.py
from project_name.env import credentials
from project_name.settings.database import *
from project_name.settings.storage import *
...

SECRET_KEY = credentials.get('django_secret_key')

DEBUG = credentials.get('debug')

ALLOWED_HOSTS = credentials.get('allowed_hosts', [])

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',

    ...
]

if DEBUG:
    INSTALLED_APPS += ['debug_toolbar']

...

# project_name/settings/database.py
from project_name.env import credentials

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': credentials.get('db_name', ''),
        'USER': credentials.get('db_user', ''),
        'HOST': credentials.get('db_host', ''),
        'PASSWORD': credentials.get('db_password', ''),
        'PORT': '5432',
    }
} 
```

## 该解决方案的好处是：

*   **用于本地开发的用户特定凭据和配置**，无需修改 git 存储库；
*   **特定于环境的配置**，例如，您可以拥有三个不同的环境，其中包括三个不同的环境，`.env.json`例如开发、临时和生产；
*   **凭据不在存储库中**

我希望这会有所帮助，如果您对此解决方案有任何警告，请告诉我。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-11-16T18:44:48.097

我使用以下文件结构：

```
project/
   ...
   settings/
   settings/common.py
   settings/local.py
   settings/prod.py
   settings/__init__.py -> local.py 
```

链接（unix中的ln或windows中的`__init__.py`mklink）`local.py`也是如此为生产环境运行命令。`prod.py``project.settings``DJANGO_SETTINGS_MODULE``project.settings.prod`

在文件`prod.py`和`local.py`：

```
from .shared import *

DATABASE = {
    ...
} 
```

并且该`shared.py`文件在没有特定配置的情况下保持为全局。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-08-24T14:03:55.327

建立 cs01 的答案：

如果您遇到环境变量问题，请将其值设置为字符串（例如 I did `DJANGO_DEVELOPMENT="true"`）。

我还更改了 cs01 的文件工作流程，如下所示：

```
#settings.py
import os
if os.environ.get('DJANGO_DEVELOPMENT') is not None:
    from settings_dev import * 
else:
    from settings_production import *
#settings_dev.py
development settings go here
#settings_production.py
production settings go here 
```

这样，Django 在运行适当的设置文件之前不必通读整个设置文件。如果您的生产文件需要仅在生产服务器上的内容，则此解决方案会派上用场。

注意：在 Python 3 中，导入的文件需要`.`附加（例如`from .settings_dev import *`）

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-10-25T10:16:34.797

用于`settings.py`生产。在同一目录`settings_dev.py`中为覆盖创建。

```
# settings_dev.py

from .settings import * 

DEBUG = False 
```

在开发机器上运行您的 Django 应用程序：

```
DJANGO_SETTINGS_MODULE=<your_app_name>.settings_dev python3 manage.py runserver 
```

在 prod 机器上运行，就好像你刚刚拥有`settings.py`，没有别的。

**好处**

1.  `settings.py`（用于生产）完全不知道任何其他环境甚至存在的事实。
2.  要查看 prod 和 dev 之间的区别，您只需查看一个位置 - `settings_dev.py`. 无需收集分散在`settings_prod.py`,`settings_dev.py`和`settings_shared.py`.
3.  如果有人在解决生产问题后将设置添加到您的产品配置中，您可以放心，它也会出现在您的开发配置中（除非明确覆盖）。因此，不同配置文件之间的差异将被最小化。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-12-07T03:09:36.057

如果您想保留 1 个设置文件，并且您的开发操作系统与生产操作系统不同，则可以将其放在 settings.py 的底部：

```
from sys import platform
if platform == "linux" or platform == "linux2":
    # linux
    # some special setting here for when I'm on my prod server
elif platform == "darwin":
    # OS X
    # some special setting here for when I'm developing on my mac
elif platform == "win32":
    # Windows...
    # some special setting here for when I'm developing on my pc 
```

阅读更多：[如何在 Python 中检查操作系统？](https://stackoverflow.com/questions/8220108/how-do-i-check-the-operating-system-in-python)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-09-16T17:53:14.357

这似乎已经得到解答，但是我结合版本控制使用的方法如下：

在与我也添加到 .gitignore 的本地开发环境中的设置相同的目录中设置一个 env.py 文件：

环境.py：

```
#!usr/bin/python

DJANGO_ENV = True
ALLOWED_HOSTS = ['127.0.0.1', 'dev.mywebsite.com'] 
```

.gitignore：

```
mywebsite/env.py 
```

设置.py：

```
if os.path.exists(os.getcwd() + '/env.py'):
    #env.py is excluded using the .gitignore file - when moving to production we can automatically set debug mode to off:
    from env import *
else:
    DJANGO_ENV = False

DEBUG = DJANGO_ENV 
```

我只是发现这很有效并且更加优雅 - 使用 env.py 可以很容易地查看我们的本地环境变量，我们可以在没有多个 settings.py 文件或类似文件的情况下处理所有这些。这种方法允许使用我们不想在生产服务器上设置的各种本地环境变量。通过版本控制利用 .gitignore，我们还保持一切无缝集成。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-02-09T05:45:57.377

对于设置文件的问题，我选择复制

```
Project
   |---__init__.py   [ write code to copy setting file from subdir to current dir]
   |---settings.py  (do not commit this file to git)
   |---setting1_dir
   |         |--  settings.py
   |---setting2_dir
   |         |--  settings.py 
```

当你运行 django 时，会运行 __init__py。这时候，`settings.py in setting1_dir`就要更换了`settings.py in Project`。

如何选择不同的环境？

*   直接修改`__init__.py`。
*   制作一个 bash 文件来修改`__init__.py`.
*   在linux中修改env，然后`__init__.py`读取这个变量。

* * *

为什么要用这种方式？

因为我不喜欢同一个目录下那么多文件，太多的文件会迷惑其他小伙伴，对IDE也不是很好。（IDE找不到我们用的什么文件）

如果您不想看到所有这些细节，您可以将项目分为两部分。

1.  制作像 Spring Initializr 这样的小工具，只是为了设置你的项目。（像复制文件一样做某事）
2.  你的项目代码

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-06-23T09:51:45.827

我正在使用不同的 app.yaml 文件来更改谷歌云应用引擎中环境之间的配置。

您可以使用它在终端命令中创建代理连接：

```
./cloud_sql_proxy -instances=<INSTANCE_CONNECTION_NAME>=tcp:1433 
```

[https://cloud.google.com/sql/docs/sqlserver/connect-admin-proxy#macos-64-bit](https://cloud.google.com/sql/docs/sqlserver/connect-admin-proxy#macos-64-bit)

文件：app.yaml

```
# [START django_app]
service: development
runtime: python37

env_variables:
  DJANGO_DB_HOST: '/cloudsql/myproject:myregion:myinstance'
  DJANGO_DEBUG: True

handlers:
# This configures Google App Engine to serve the files in the app's static
# directory.
- url: /static
  static_dir: static/

# This handler routes all requests not caught above to your main app. It is
# required when static routes are defined, but can be omitted (along with
# the entire handlers section) when there are no static files defined.
- url: /.*
  script: auto
# [END django_app] 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-08-05T00:01:36.090

我在生产的工作目录中创建了一个名为“production”的文件。

```
#settings.py
production = Path("production")
DEBUG = False

#if it's dev mode
if not production.is_file():
    INSTALLED_APPS +=[
       #apps_in_development_mode,
       #...
    ]
    DEBUG = True
    #other settings to override the default production settings 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-08-31T20:12:49.913

您希望能够根据您所在的 git 分支并依赖不同的设置文件来切换设置、秘密、环境变量和其他设置，但在企业情况下，您希望从存储库中隐藏所有敏感信息。向所有开发人员公开所有环境变量和所有环境（开发、登台、生产、质量保证等）的机密并不是最佳安全实践。以下应达到2。

1.  根据部署环境隔离设置
2.  从 git repo 隐藏敏感信息

我的 run.sh

```
#!/bin/bash
# default environment
export DJANGO_ENVIRONMENT="develop"
BRANCH=$(git rev-parse --abbrev-ref HEAD)

if [ $BRANCH == "main" ]; then
    export DJANGO_ENVIRONMENT="production"
elif [ $BRANCH == "release/"* ]; then
    export DJANGO_ENVIRONMENT="staging"
else
    # for all other branches (feature, support, hotfix etc.,)
    echo ''
fi

echo "
BRANCH: $BRANCH
ENVIRONMENT: $DJANGO_ENVIRONMENT
"
python3 myapp/manage.py makemigrations
python3 myapp/manage.py migrate --noinput
python3 myapp/manage.py runserver 0:8000 
```

我的 vars.py（或 secrets.py 或任何名称）与 django 的 settings.py 位于同一文件夹中

```
vars = {
    'develop': {
        'environment': 'develop',
        'SECRET_KEY': 'mysecretkey',
        "DEBUG": "True"
        },
    'production': {
        'environment': 'production',
        'SECRET_KEY': 'mysecretkey',
        "DEBUG": "False"
        },
    'staging': {
        'environment': 'staging',
        'SECRET_KEY': 'mysecretkey',
        "DEBUG": "True"
        }
    } 
```

然后在 settings.py 中执行以下操作

```
from . import vars # container environment specific vars
import os

DJANGO_ENVIRONMENT = os.getenv("DJANGO_ENVIRONMENT")  # declared in run.sh
envs = vars.vars[DJANGO_ENVIRONMENT] # SECURITY WARNING: keep the secret key 
used in production secret!
SECRET_KEY = envs["SECRET_KEY"]

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = envs["DEBUG"] 
```

让开发人员在他们的本地机器上拥有自己的 vars.py，但是在部署期间，您的 cicd 管道可以插入带有实际值的实际 vars.py，或者某些脚本应该插入它。如果您使用的是 gitlab cicd 那么您可以将整个 vars.py 存储为环境变量

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-09-13T02:40:14.830

您可能会使用 wsgi.py 文件进行生产（该文件是在您创建 django 项目时自动创建的）。该文件指向一个设置文件。因此，制作一个单独的生产设置文件并在您的 wsgi.py 文件中引用它。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-03-02T00:25:06.837

我们在这里所做的是为每个环境创建一个 .ENV 文件。该文件包含很多变量，例如`ENV=development`

settings.py 文件基本上就是一堆 os.environ.get()，比如`ENV = os.environ.get('ENV')`

因此，当您需要访问时，您可以这样做`ENV = settings.ENV`。

您必须有一个用于生产、测试​​和开发的 .env 文件。

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2016-10-03T09:21:44.860

这是我的解决方案，具有不同的开发、测试和生产环境

```
import socket

[...]

DEV_PC = 'PC059'
host_name = socket.gethostname()

if host_name == DEV_PC:
   #do something
   pass
elif [...] 
```

# php - ZF：路由器插件不起作用

> ID：10664247
> 
> 赞同：0
> 
> 时间：2012-05-19T10:13:43.513
> 
> 标签：php, zend-framework, frameworks, router

```
Zend_Controller_Front::getInstance()->setParam('useDefaultControllerAlways', true);
Zend_Controller_Front::getInstance()->getRouter()->addRoute('taxes', new     Zend_Controller_Router_Route_Static('taxes',
                    array('controller' => 'config', 'action' => 'taxes'))
                ); 
```

有谁知道如果像引导文件中的插件一样调用它为什么不起作用？如果直接在引导程序中调用 - 一切正常。插件设置为使用 preDispatch() 方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:39:16.873

因为在调用 preDispatch 时已经发生了路由。您可能想改用 routeStartup 。请参阅： http: [//framework.zend.com/manual/en/zend.controller.plugins.html#zend.controller.plugins.using](http://framework.zend.com/manual/en/zend.controller.plugins.html#zend.controller.plugins.using)以获取控制器插件方法的完整列表，按顺序排列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:55:50.283

> preDispatch() 在调度程序调度操作之前调用。此回调允许代理或过滤器行为。

这意味着在调度前路由已经发生，你想要的可能是 routeStartup 因为它在路由请求之前被调用：

> routeStartup() 在 Zend_Controller_Front 调用路由器之前调用，以根据已注册的路由评估请求。

# javascript - 函数 $(String) 未定义

> ID：10664248
> 
> 赞同：0
> 
> 时间：2012-05-19T10:13:50.937
> 
> 标签：javascript, jquery, html

[我在这里](http://jsbin.com/eyeyu/edit#javascript,html)看到了一个例子并检查了它是如何工作的，但我得到了一个错误 - （见标题）

你知道为什么吗？

这是代码（类似于链接）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!--

  Created using /
  Source can be edited via /eyeyu/edit

-->
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<title>Sandbox</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<style type="text/css" media="screen">
body { background-color: #000; font: 16px Helvetica, Arial; color: #fff; }
</style>
</head>
<body>
  <table border="1">
    <tr><td>1</td><td>2</td><td>3</td></tr>
    <tr><td>4</td><td>5</td><td>6</td></tr>
    <tr><td>7</td><td>8</td><td>9</td></tr>
  <tbody>
</table>
<script>
$('td').click(function(){
    var colIndex = $(this).parent().children().index($(this));
    var rowIndex = $(this).parent().parent().children().index($(this).parent());
    alert('Row: ' + rowIndex + ', Column: ' + colIndex);
});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T10:21:42.287

**你的代码工作得很好！**

执行的所有测试的问题可能来自缺少 jQuery 库，请参阅[实时模拟链接](http://dl.dropbox.com/u/76169930/stackoverflow/question/10664248/10664248.html)和[print-screen](http://dl.dropbox.com/u/76169930/stackoverflow/question/10664248/10664248.jpg)。

此外，这个工作[小提琴示例！](http://jsfiddle.net/zuul/FECGY/)

* * *

**作为旁注：**

*   您缺少结束标签，`tbody`并且开始标签乱序：

**将您的 HTML 更新为此**

```
<table border="1">
  <tbody>
    <tr><td>1</td><td>2</td><td>3</td></tr>
    <tr><td>4</td><td>5</td><td>6</td></tr>
    <tr><td>7</td><td>8</td><td>9</td></tr>
  </tbody>
</table> 
```

*   您的脚本标签缺少以下类型：

**将您的标签更新为此**

```
<script type="text/javascript">...</script> 
```

**和**

```
<script src="path_to_jquery.js" type="text/javascript"></script> 
```

* * *

# 已编辑 :: 为了更好地巩固这个答案

1.  [链接到正在运行的实时 HTML 文件](http://dl.dropbox.com/u/76169930/stackoverflow/question/10664248/10664248.html)！
2.  [链接到未加载 jQuery 的实时 HTML 文件](http://dl.dropbox.com/u/76169930/stackoverflow/question/10664248/10664248_force_fail.html)，从而导致错误！
3.  不想点击链接的人的打印屏幕：

![在此处输入图像描述](../Images/c80571c3f188a69c0851b18fa2272e82.png)

**注意：** 正如评论**中的疯狂悬崖**所述，在这种情况下不需要[.ready() ，因为 jQuery 代码位于它选择的元素下方！](http://api.jquery.com/ready/)

# ajax - ajax+spring MVC调用jsp

> ID：10664249
> 
> 赞同：1
> 
> 时间：2012-05-19T10:13:54.440
> 
> 标签：ajax, jsp, spring-mvc, render

使用 ajax+spring mvc 从控制器返回 jsp 时出现问题。我想刷新整页的一部分。实际上这是显示标签表。我的控制器向我发送了这个页面，但是从控制器返回给我的数据是一个 jstl 标签，它不是 html 页面。因此，浏览器当然不会向我显示该页面。

```
$(document).ready(function() {
    alert("asdfads");
    //$('#content').load('<c:url value="/pages/new.jsp"/>');
    $.ajax({    
        url : '/shop/getCartProducts/ajax/',
        type : 'GET',
        async: false,
        data : {},              
        success : function(data) {
            $('#content').html(data);
            alert(data);                                                
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert(jqXHR + " : " + textStatus + " : " + errorThrown);
        }
    });
}); 
```

我的`Controller`长相是这样的

```
@RequestMapping(value = "/getCartProducts/ajax/", method = RequestMethod.GET)
String ajaxGetProdCart(HttpServletRequest request, Model model) {
    LOG.error("We are in the controller");
    PaginatedListImpl<Product> paginatedList = new PaginatedListImpl<Product>(request);
    productService.getProductsFromCart(paginatedList, null, 100);
    model.addAttribute("paginatedList", paginatedList);
    return "cartProduct";
} 
```

购物车产品.jsp

```
<display:table class="table" id="product" name="paginatedList" defaultsort="1" requestURI="/shop/cart/" excludedParams="*" export="false">
<display:column>
    <a href='<c:url  value="/cart/remove/"/>'> <img
        src='<c:url value = "/resources/images/forbidden.png"/>'>
    </a>
</display:column>
<display:column sortable="false" sortProperty="name" title="Product"
    maxLength="55">

    <c:url var="prodUrl" value="/product/${product.product_id}/" />
    <a href='<c:out value="${prodUrl}"/>'> <c:out
            value="${product.name}" />
    </a>
</display:column>
<display:column property="price" paramId="price" sortable="false"
    title="Price" href="#" />
<display:column property="descr" sortable="true" paramName="descr"
    title="Description" maxLength="250" sortName="descr" /></display:table> 
```

警报向我展示这段代码，它不向我展示 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:25:53.080

如果您向我们展示的是 JSP 的完整代码，那么您只是忘记在 JSP 顶部声明两个标记库：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="display" uri="http://displaytag.sf.net" %> 
```

# php - 在元素被点击 x 次后，在 php 中调用 javascript 函数

> ID：10664250
> 
> 赞同：0
> 
> 时间：2012-05-19T10:13:56.577
> 
> 标签：php, javascript, jquery, html, function

**php/html**

```
$i=0

for each ($x as $y => $z){

<a>click me</a>

if (++$i == 5) {break;}
} 
```

**javascript**

```
function load_remaining_notifcations(){
    $.post('load_remaining_notifications.php',{},function(data){
        $('#load_remaining_notifcations').html(data);
    });
} 
```

当`<a>click me</a>`被点击五次时，我想运行一个javascript函数。我如何计时 javascript 函数，以便仅在单击我被单击 5 次后才调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:49:45.760

```
 var clicks = 0;
 $('a').click(function(){
     clicks++;         
     if (clicks == 5) {
         load_remaining_notifcations();
         clicks = 0; //reset counter for another 5 click or
     }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:21:39.117

```
// js script
var counter = 0;
function doclick() {
    counter++;
    if (counter>=5) {
        // do something
        alert("OK");
    }
}

// HTML
<a id="myanchor" href="javascript:" onclick="doclick();">click me</a> 
```

**编辑：**我看到你正在使用 jQuery。

```
// js
$("a#myanchor").click(function() {
    if (this.counter == undefined) this.counter = 0;
    this.counter++;
    if (this.counter >= 5) {
        load_remaining_notifcations();
    }
}); 
```

# python - 检查字符串是否有希伯来字符的正确方法

> ID：10664254
> 
> 赞同：1
> 
> 时间：2012-05-19T10:14:27.553
> 
> 标签：python, ord

希伯来语在 1424 和 1514（或十六进制 0590 到 05EA）之间具有 unicode 表示。

我正在寻找正确、最有效和最 Pythonic 的方式来实现这一目标。

首先我想出了这个：

```
for c in s:
    if ord(c) >= 1424 and ord(c) <= 1514:
        return True
return False 
```

然后我带来了一个更优雅的实现：

```
return any(map(lambda c: (ord(c) >= 1424 and ord(c) <= 1514), s)) 
```

有可能：

```
return any([(ord(c) >= 1424 and ord(c) <= 1514) for c in s]) 
```

其中哪一个是最好的？或者我应该做不同的事情？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-19T10:19:10.763

你可以这样做：

```
# Python 3.
return any("\u0590" <= c <= "\u05EA" for c in s)
# Python 2.
return any(u"\u0590" <= c <= u"\u05EA" for c in s) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:19:56.940

您的基本选择是：

1.  匹配包含字符范围的正则表达式；或者
2.  遍历字符串，测试包含所有目标字符的字符串或集合中字符的成员资格，如果找到匹配项则中断。

只有实际测试才能显示哪个会更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-03T17:39:50.197

使用 unidcodedata 检查第一个字符很简单：

```
import unicodedata

def is_greek(term):
    return 'GREEK' in unicodedata.name(term.strip()[0])

def is_hebrew(term):
    return 'HEBREW' in unicodedata.name(term.strip()[0]) 
```

# android - 无法使用 Javamail 从 Hotmail 接收附件

> ID：10664255
> 
> 赞同：0
> 
> 时间：2012-05-19T10:14:29.260
> 
> 标签：android, jakarta-mail, attachment, hotmail

我可以在 Android 上使用 Javamail.jar 访问 Hotmail。我想使用 Hotmail 接收邮件的附件，**此代码适用于 Gmail**，但使用 Hotmail 时不起作用。为什么它没有填满处置，所以“dosyaIsmiEkDurumu”没有填满，因此陷入了困境。

是否有其他代码示例用于访问 Hotmail 上的附件，或者为什么我对这段代码做错了？

```
public void EkDosyaIsim(Part part) throws IOException,
            MessagingException {

        if (part.isMimeType("multipart/*")) {
            Multipart mp = (Multipart) part.getContent();
            for (int i = 0; i < mp.getCount(); i++) {
                System.out.println("64 : [" + mp.getCount() + "] 个/n");
                BodyPart mpart = mp.getBodyPart(i);
                String disposition = mpart.getDisposition();
                if ((disposition != null)
                        && ((disposition.equals("ATTACHMENT")) || (disposition
                                .equals("INLINE")))) {
                    dosyaIsmiEkDurumu = mpart.getFileName();
                    if(dosyaIsmiEkDurumu != null)
                    {
                        dosyaIsmiDizi[k] = dosyaIsmiEkDurumu;
                        k++;
                    }
                    if (dosyaIsmiEkDurumu.toLowerCase().indexOf("gb2312") != -1) {
                        dosyaIsmiEkDurumu = MimeUtility.decodeText(dosyaIsmiEkDurumu);
                    }
                } else if (mpart.isMimeType("multipart/*")) {
                    EkDosyaIsim(mpart);
                } else 
                {
                    if ((dosyaIsmiEkDurumu != null)
                            && (dosyaIsmiEkDurumu.toLowerCase().indexOf("GB2312") != -1)) {
                        dosyaIsmiEkDurumu = MimeUtility.decodeText(dosyaIsmiEkDurumu);
                    }
                }
            }
        } else if (part.isMimeType("message/rfc822")) 
        {
            EkDosyaIsim((Part) part.getContent());
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:01:34.547

处置是“建议”，即使在带有附件的消息中也不能保证存在。有关处理带有附件的消息的更多信息，请参阅[JavaMail FAQ](http://www.oracle.com/technetwork/java/javamail/faq/index.html#hasattach)。

# android - 在 ICS 上的 webViewClient 中播放 SWF 文件？

> ID：10664258
> 
> 赞同：11
> 
> 时间：2012-05-19T10:14:52.933
> 
> 标签：android, flash, android-4.0-ice-cream-sandwich

我试图在 webViewClient 中打开一个 SWF 文件，它适用于 Android 2.1 和 2.3.3。但是当我尝试在 4.0.4 上播放相同的 SWF 文件时，它会导致错误，并且在 videoPlayer 页面中出现绿屏。

```
oWebView = (WebView) findViewById(R.id.wvhPlayer);
oWebView.setWebViewClient(new KhWebClient());
oWebView.getSettings().setJavaScriptEnabled(true);
oWebView.getSettings().setPluginsEnabled(true);
oWebView.getSettings().setAllowFileAccess(true);
oWebView.getSettings().setBuiltInZoomControls(true);

String html = " <object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" width=\"100%\" height=\"100%\" id=\"vPlayer\" align=\"middle\">"
            + " <param name=\"movie\" value=\"http://mysite.com/sites/all/modules/player/player.swf?id=0CYj9tI0hpQ"
            + "\" />"
            + "  <param name=\"quality\" value=\"high\" />"
            + " <param name=\"bgcolor\" value=\"#000000\" />"
            + " <param name=\"play\" value=\"true\" />"
            + " <param name=\"loop\" value=\"true\" />"
            + " <param name=\"wmode\" value=\"window\" />"
            + " <param name=\"scale\" value=\"showall\" />"
            + " <param name=\"menu\" value=\"true\" />"
            + " <param name=\"devicefont\" value=\"false\" />"
            + " </object>";

oWebView.loadDataWithBaseURL("null", html, "text/html", "utf-8", null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:16:00.313

根据这个[问题](https://stackoverflow.com/questions/5383364/flash-video-not-displaying-in-webview-for-android-3-0-1)，我曾经加载 swf 文件而不是加载 html。

它的工作就像一个魅力。

1.  添加到 AndroidManifest.xml

安卓：硬件加速=“真”

2.

```
oWebView = (WebView) findViewById(R.id.wvhPlayer);
oWebView.getSettings().setJavaScriptEnabled(true);
oWebView.getSettings().setPluginState(WebSettings.PluginState.ON);
oWebView.loadUrl("http://mysite.com/sites/all/modules/player/player.swf?id=0CYj9tI0hpQ"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T09:21:53.177

我在 android 4.0 中发现了一个带有硬件加速的错误（其中一个）`WebViewClient`。默认情况下，他们将其设置为 true，因此请尝试在清单中将其设置为 false 并告诉我发生了什么。

*如果这能解决问题，请考虑转移到 Iphone...

# php - 重定向和 PHP 变量的问题

> ID：10664262
> 
> 赞同：1
> 
> 时间：2012-05-19T10:15:31.217
> 
> 标签：php, html, variables, redirect, meta-tags

所以我有以下代码：

```
echo "<meta http-equiv=\"refresh\" content=\"1;url=/$file\" />"; 
```

我正在将用户重定向到 $file 的位置（之前已创建）。不幸的是，脚本正在重定向到

```
http://home/[redacted]/public_html/[redacted]/output/ytusgh 
```

事实上，我希望它被重定向到 http://[redacted].co.uk/output/ytusgh

有人知道我可以做些什么来使重定向*工作吗？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T10:17:54.117

基本上，重定向是由浏览器完成的——它适用于 URL。

因此，您必须确保在**标签中****使用了 URL`<meta>`**；而不是文件的路径。

我不知道您如何构造`$file`变量；但是您必须更改那部分代码，以确保它`$file`不指向文件——而是它包含您要重定向到的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:31:38.113

好像您正在传递本地路径，而您需要传递绝对路径

尝试

```
$file = preg_replace('path/to/local/folder', '', $file);
$file = $yourdomain . $file;
echo "<meta http-equiv=\"refresh\" content=\"1;url=/$file\" />"; 
```

# jquery - 使用 jquery 加载传递 id

> ID：10664263
> 
> 赞同：0
> 
> 时间：2012-05-19T10:15:34.710
> 
> 标签：jquery, asp.net-mvc, model-view-controller

我有以下 jquery 在 div 中加载部分视图

```
 var acc = this.id;    
$('#details').load('/AccountAndTransaction/Grab', function (html)
            { $('#details')[0].value = html; }); 
```

它工作得很好，但现在我想用这个加载方法传递'var acc'，我怎么能做到这一点？

控制器

```
 [HttpGet]
    public ActionResult Grab(string AccountNumber)
    {

        TermDepositAccountViewModel tdParent = new TermDepositAccountViewModel();
        account ac = db.accounts.Single(u => u.accountNumber == AccountNumber);
        deposittd td = db.deposittds.Single(u => u.accountNumber == AccountNumber);
        tdParent.deposittd = td;
        tdParent.account = ac;
        return PartialView("TermDepositPartialView", tdParent);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T10:18:58.553

您只需要传递`acc`作为 URL 的一部分。由于您已经在 Action 方法中命名了参数，`AccountNumber`因此它应该采用这种格式。

```
$('#details').load('/AccountAndTransaction/Grab?AccountNumber=' + acc, function (html) 
```

如果您的参数名称是`id`您可以使用这种格式（如在默认路由中，可选参数映射为`id`，应自动处理）

```
$('#details').load('/AccountAndTransaction/Grab/' + acc, function (html) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:19:12.167

```
 //var AccountNumber=   $(this).attr('id');  // try this

     $('#details').load('/AccountAndTransaction/Grab', {
          AccountNumber:AccountNumber} function (html){   
          $('#details:first').html(data); });
          //Or

          var AccountNumber = $(this).attr('id');
          $.ajax({
                url: '/AccountAndTransaction/Grab', type: 'Get', dataType: 'json',
                data: { AccountNumber: AccountNumber },
                success: function (data) {
                     $('#details:first').html(data);
                }
          });
     } 
```

# asp.net - Ajax 工具包 AjaxFileUpload 抛出异常

> ID：10664264
> 
> 赞同：3
> 
> 时间：2012-05-19T10:15:39.297
> 
> 标签：asp.net, webforms, ajaxcontroltoolkit

我有一个输入表单，我想添加一个文件上传器我向母版页添加了一个工具包脚本管理器，然后我添加了一个 ajaxfileupload 控件`<http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AjaxFileUpload/AjaxFileUpload.aspx>`

aspx 看起来像这样

```
<ajaxToolkit:AjaxFileUpload ID="AjaxFileUpload1" ThrobberID="myThrobber" ContextKeys="fred"
                AllowedFileTypes="jpg,jpeg" MaximumNumberOfFiles="2" runat="server" UploadedComplete="AjaxFileUpload1_UploadedComplete" /> 
```

AjaxFileUpload1_UploadedComplete 方法现在是空的。

我得到了这个异常，除了 page_load 没有触发任何事件

> Sys.ArgumentException：Sys.ArgumentException：无法反序列化。数据不对应于有效的 JSON。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T07:54:19.977

我意识到这是一个老问题，但我认为这是由控件中的“错误”引起的。它附加查询字符串参数，但假定没有现有参数。

这里有详细信息和修复：[https](https://ajaxcontroltoolkit.codeplex.com/workitem/27149) ://ajaxcontroltoolkit.codeplex.com/workitem/27149 （涉及更改源和重建工具包）

# asp.net - 如何在文本框中加载 Css 并保存 asp.net

> ID：10664277
> 
> 赞同：0
> 
> 时间：2012-05-19T10:17:32.793
> 
> 标签：asp.net, css, ckeditor, .net

我希望用户在 fckeditor 中查看并将 css 保存在 CMS 中我尝试过的从哪里开始

```
// aspx code
     <CKEditor:CKEditorControl runat="server" ID="txtckCss"   StartupMode="Source"></CKEditor:CKEditorControl><br>
//code behind
    string path = Server.MapPath("../App_Themes/White/Default.css");
    txtckCss.Text = System.IO.File.ReadAllText(path)); 
```

但它给出了错误

```
Object reference not set to an instance of an object. 
```

# c# - 线程似乎从来没有机会，除非我有一个断点

> ID：10664281
> 
> 赞同：1
> 
> 时间：2012-05-19T10:18:02.987
> 
> 标签：c#, multithreading, c#-4.0, locking

我尝试制作一个执行以下操作的简单程序：

我有两台起重机，可以将集装箱从船上卸下。他们把集装箱放在码头上，2/3 的卡车在那里接他们。起重机最多可以在码头上放置 5 个集装箱。

问题如下：当我没有断点时，起重机线程只是拾取船上的容器并将它们放在码头上，然后程序停止。这是每次的输出：

```
Kraan 2 heeft container nummer 1 van het schip gehaald.
Kraan 2 heeft container nummer 1 op de kade geplaatst.
Kraan 1 heeft container nummer 2 van het schip gehaald.
Kraan 1 heeft container nummer 2 op de kade geplaatst.
Kraan 2 heeft container nummer 3 van het schip gehaald.
Kraan 1 heeft container nummer 4 van het schip gehaald.
Kraan 2 heeft container nummer 3 op de kade geplaatst.
Kraan 2 heeft container nummer 5 van het schip gehaald.
Kraan 2 heeft container nummer 5 op de kade geplaatst.
Kraan 1 heeft container nummer 4 op de kade geplaatst.
Kraan 2 heeft container nummer 6 van het schip gehaald.
Kraan 1 heeft container nummer 7 van het schip gehaald. 
```

因此，卡车线程不会运行。当我在 Wagen.VoerWerkzaamhedenUit() 中设置断点时，断点*确实*被命中，整个程序奇迹般地运行，直到所有容器都被处理完。

这是我的代码：

```
 class Program
    {
        static void Main(string[] args)
        {
            for (int i = 1; i <= 100; i++)
            {
                Schip.LaadContainerOpSchip(i);
            }

            Thread kraan1 = new Thread(new Kraan().VoerWerkzaamhedenUit);
            kraan1.Name = "Kraan 1";
            kraan1.Start();

            Thread kraan2 = new Thread(new Kraan().VoerWerkzaamhedenUit);
            kraan2.Name = "Kraan 2";
            kraan2.Start();

            Thread wagen1 = new Thread(new Wagen().VoerWerkzaamhedenUit);
            wagen1.Name = "Wagen 1";
            wagen1.Start();

            Thread wagen2 = new Thread(new Wagen().VoerWerkzaamhedenUit);
            wagen2.Name = "Wagen 2";
            wagen2.Start();

            kraan1.Join();
            kraan2.Join();
            wagen1.Join();
            wagen2.Join();

            Console.WriteLine("Press any key to continue...");
            Console.Read();
        }
    }

public class Kraan
    {
        private Random random = new Random();

        public void VoerWerkzaamhedenUit()
        {
            while (Schip.HeeftContainers())
            {
                Thread.Sleep(random.Next(1000, 6000));

                int container = Schip.VerwijderContainer();

                if (container != -1)
                {
                    Console.WriteLine("{0} heeft container nummer {1} van het schip gehaald.", Thread.CurrentThread.Name, container);

                    Thread.Sleep(random.Next(1000, 6000));

                    Kade.PlaatsContainer(container);

                    Console.WriteLine("{0} heeft container nummer {1} op de kade geplaatst.", Thread.CurrentThread.Name, container);
                }
            }
        }
    }

public static class Schip
    {
        private static List<int> containers = new List<int>();

        public static void LaadContainerOpSchip(int container)
        {
            containers.Add(container);
        }

        public static int VerwijderContainer()
        {
            lock (containers)
            {
                int container = -1;

                if (containers.Any())
                {
                    container = containers[0];

                    containers.RemoveAt(0);
                }

                return container;
            }
        }

        public static bool HeeftContainers()
        {
            lock (containers)
            {
                return containers.Any();
            }
        }
    }

public static class Kade
    {
        private static List<int> containers = new List<int>();

        public static void PlaatsContainer(int container)
        {
            lock (containers)
            {
                while (containers.Count == 5)
                {
                    Monitor.Wait(containers);
                }

                containers.Add(container);

                Monitor.PulseAll(containers);
            }
        }

        public static int VerwijderContainer()
        {    
            lock (containers)
            {
                while (containers.Count == 0)
                {
                    Monitor.Wait(containers);
                }

                int container = -1;

                if (containers.Any())
                {
                    container = containers[0];

                    containers.RemoveAt(0);
                }

                Monitor.PulseAll(containers);

                return container;
            }
        }

        public static bool HeeftContainers()
        {
            lock (containers)
            {
                return containers.Any();
            }
        }
    }

public class Wagen
    {
        private Random random = new Random();

        public void VoerWerkzaamhedenUit()
        {
            while (Kade.HeeftContainers())
            {
                Thread.Sleep(random.Next(1000, 6000));

                int container = Kade.VerwijderContainer();

                if (container != -1)
                {
                    Console.WriteLine("{0} heeft container nummer {1} van de kade gehaald.", Thread.CurrentThread.Name, container);

                    Thread.Sleep(random.Next(1000, 6000));
                }
            }
        }
    } 
```

不，我**不想**使用阻塞集合，我想使用`List<int>`;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:58:24.650

当程序启动时，卡车`Kade.HeeftContainers()`会在起重机有机会将集装箱放在码头上之前检查码头（ ），以便卡车线程立即退出。然后起重机继续填满码头，直到达到 5 个集装箱的极限。由于卡车线程已经退出，码头保持满，所以起重机线程停止等待`Monitor.Wait(containers);`。

为了解决这个问题，卡车需要继续运行，直到所有集装箱都通过管道。例如，您可以在码头上设置一个计数器（例如`loadedContainers`），并在每次从码头卸下要装载到卡车上的集装箱时递增该计数器。然后`return loadedContainers == 100;`在 `Kade.HeeftContainers`吸气剂中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T12:17:37.000

还可以了解 Diagnostics 命名空间...

例如

```
if(!System.Diagnostics.Debugger.IsAttached)
    if(System.Diagnostics.Debugger.Attach()) System.Diagnostics.Debugger.Break(); 
```

# liferay - 如何自定义要在“添加更多 portlet”菜单中显示的 portlet

> ID：10664282
> 
> 赞同：6
> 
> 时间：2012-05-19T10:18:25.880
> 
> 标签：liferay, liferay-6

我需要自定义哪个 portlet 出现在“添加更多 portlet 菜单”中，如下图所示：

![在此处输入图像描述](../Images/64e404a396239a4b353ff3ae989758bd.png)

我需要根据登录的用户或站点（社区）来限制此菜单中显示的 portlet 的数量。因此，站点所有者或站点管理员将只能将那些 portlet 添加到他们的页面中，这些 portlet 由omni-admin 为他们决定。

Liferay 是否提供任何此类功能（通过配置或其他方式）还是我必须创建一个新的 portlet 和一个挂钩来实现这一点？

**环境：** Liferay 6.1 CE GA2

任何想法将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T11:29:35.183

以下是Liferay 论坛中对同一问题给出的[答案：](http://www.liferay.com/web/guest/community/forums/-/message_boards/view_message/16595309#_19_message_16595309)

您可以从管理端限制哪些 portlet 可以添加到页面中，而不必进行任何开发。

但是，您将需要创建一个角色并在其上添加每个人。以下是实现此目的的步骤：

1.  让用户成为您希望他们添加 portlet 的组织或站点的一部分。
2.  转到`Control Panel`->`Roles`并成为常规角色（不是组织或站点角色）
3.  在定义权限下拉菜单中，转到`Portal`-> `Site`-> `Page`-> 并检查`Update`为已定义的权限。
4.  再次转到 Define-permissions 下拉菜单并转到`Site Application`->（选择您希望用户添加到页面的 Portlet 名称）-> `Add to page`。
5.  如有必要，如果您希望用户添加其他 portlet，请重复第 4 步。
6.  将此角色添加到您的用户：转到`Control Panel`-> `User and Organizations`。单击您的`User`并转到`Roles`。
7.  最后，您需要转到`Server Administration`并执行`Clean Up Permissions`以清除`Guest`和`Power Users`角色的权限。

现在应该这样，无论用户附加到该角色，他们都会在左角看到一个“添加”按钮，并且只能添加您在角色权限中指定的 portlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:29:49.220

您需要为要允许的 portlet 授予 ADD_TO_PAGE 权限。默认情况下，社区管理员对所有 portlet 拥有相当广泛的权限。检查“定义权限”中的“社区管理员”角色（控制面板/角色/社区管理员/操作/定义权限）。

我建议查看允许社区管理员做什么并创建自定义角色，定义其权限并使您的“受限”管理员成为该角色的成员，而不是默认的社区管理员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:33:56.267

有更好的方法。在其权限表中检查所有 portlet 权限。转到 portlet 管理器并首先取消选中所有“用户”

所以它没有显示“添加更多portlet菜单”

# c - fopen c 有多个文件

> ID：10664283
> 
> 赞同：8
> 
> 时间：2012-05-19T10:18:34.467
> 
> 标签：c, fopen

在我的软件中，我必须以串行方式读取多个 txt 数据库，所以我读取第一个，然后使用从该文件中获得的信息做一些事情，然后再打开另一个进行写入，依此类推。

有时我在打开或创建文件时遇到错误，然后在所有以下打开/创建时遇到错误，这些打开/创建使用不同的函数、不同的变量、不同的文件。

因此，例如我调用下面的函数，它使用两个文件，我得到一个错误“*打开文件时出错 -%s-..\n”，然后我的代码中的所有其他 fopen() 都出错了！

这是单个文件的代码示例：

```
FILE *filea;
if((filea=fopen(databaseTmp, "rb"))==NULL) {
    printf("* error while opening file -%s- ..\n",databaseTmp);
    fclose (filea);
    printf("---------- createDatabaseBackup ----------\n");
    return -1;
}
int emptyFolder=1;
FILE *fileb;
if((fileb=fopen(databaseBackup, "ab"))==NULL) {
    printf("* error while opening file -%s- ..\n",databaseBackup);
    fclose (fileb);
    printf("---------- createDatabaseBackup ----------\n");
    return -1;
}
else {
    int i=0;
    char c[500]="";
    for (i=0;fgets(c,500,filea);i++) {
        fprintf(fileb,"%s",c);
        emptyFolder=0;
    }
} 
fclose(fileb);
fclose(filea); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T10:25:29.790

1.  给定进程的打开句柄数有上限。可能是您的程序中有句柄泄漏？

2.  创建文件时出错通常意味着您没有对父文件夹的访问权限。

3.  这些错误日志消息属于您的程序。您可以进一步增强它。操作系统有一个`errnum`集合，`fopen`本质上是一个系统调用。您可以打印该错误号并获取有关您的问题的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T10:24:26.360

如果`fopen`返回 NULL，则文件未打开，因此尝试打开`fclose`它没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T10:24:21.283

您应该检查除此之外的返回值`fgets`是否为 0。如果它读取 500 个字符并且缓冲区不是以 null 结尾的，则 fprintf 将尝试写入比分配给更多的字符`c`

# bash - 在 unix 中具有正确时间戳的命令历史记录

> ID：10664297
> 
> 赞同：2
> 
> 时间：2012-05-19T10:20:04.660
> 
> 标签：bash, unix, ssh, history, timestamp

我想安排一个显示远程机器历史记录的程序，并将其存储在本地机器的一个带有时间戳的文件中（即在什么时候执行了哪些命令）我使用的代码是这样的：

```
ssh -i private_key user@ip 'export HISTTIMEFORMAT=\"%D-%T \" ; \
                            export HISTFILE=/home/$user/.bash_history; \
                            set -o history; history' > myfile.txt 
```

但是，它没有给出正确的时间戳，而是将当前时间放在每个命令的前面。因此，如果调度程序在 9 点钟运行，则每个命令的时间戳都是 9 点钟。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T10:45:55.990

如果`BASHTIMEFORMAT`未在会话中设置，则计时信息不会保存到历史文件中（否则会在其中保存为注释）。

因此，除非您尝试登录的用户在他/她的环境中具有此功能，否则您将无法获得时间信息。它根本没有记录，因此无法检索。

# sql-server-2008 - 无法在单独的服务器上连接 SQL Server 2008 Reporting Services 和数据库

> ID：10664299
> 
> 赞同：2
> 
> 时间：2012-05-19T10:20:46.013
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008, remote-server

我的笔记本电脑上运行了两个虚拟机，假设它们的名称是 VMApp 和 VMDB，它们都运行相同的操作系统，Windows Server 2008 R2。

在 VMDB 上，我安装了除 Reporting Services 之外的所有 SQL Server 2008 功能。相反，我在 VMApp 上只安装了 SQL Server 2008 Reporting Services。

我在 VMApp 上运行 Reporting Services 配置管理器并将服务器名称指向 VMDB 的计算机名称，然后我收到一条错误消息

```
"A connection to the computer cannot be established" 
```

我在 VMDB 上启用了 SQL Server 配置工具中的命名管道，但我仍然在 VMApp 上收到该错误消息。

我认为问题不在于网络连接，因为虚拟机连接在同一个域网络中，并且它们可以相互 ping 通。

很抱歉这个愚蠢的案例，因为我是 SQL Server 的新手，非常感谢你们的帮助！

问候， 克里斯玛安迪卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:07:42.663

您不能在配置管理器上将数据库路径设置为 SERVERNAME\INSTANCENAME。甚至没有那个选项。首先你设置服务器：

![在此处输入图像描述](../Images/2c8a08d0956632505bfc619f13a35627.png)

然后是数据库： ![在此处输入图像描述](../Images/73c6b2dacf871ab9bc2cf0a3b1b49f76.png)

你到底在哪里遇到问题？

仅供参考：如果无法启用浏览器，请尝试在 VMDB 上启用 SQL 浏览器或通过 IP 连接

# wpf - 无需额外文件夹的 Wpf 本地化

> ID：10664304
> 
> 赞同：1
> 
> 时间：2012-05-19T10:21:36.027
> 
> 标签：wpf, localization, directory, resx

我创建了一个 WPF 应用程序并想为其添加几种语言。本地化是通过 resx 文件（如 Labels.resx 和 Labels.en-US.resx）创建的。项目构建后，会创建一个新文件夹**bin\en-US**。但概念是应用程序应该被表示为唯一的一个 EXE 文件。

所以问题是：是否可以在 EXE 文件中存储所有 resx 文件（默认（Labels.resx）和任何本地化（例如 Labels.en-US.resx））？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:20:33.050

我不这么认为，来自微软的网站：

> 在编译时，Visual Studio 首先将项目中的 .resx 文件转换为二进制资源 (.resources) 文件，并将它们存储在项目 obj 目录的子目录中。Visual Studio 会在项目生成的主程序集中嵌入任何不包含本地化资源的资源文件。如果任何资源文件包含本地化资源，Visual Studio 会将它们嵌入到每个本地化区域性的单独附属程序集中。然后它将每个附属程序集存储在名称对应于本地化文化的目录中。例如，本地化英语（美国）资源存储在 en-US 子目录的附属程序集中。

# amazon-rds - Amazon rds 实例要求 IP 许可所有 IP 已授权？

> ID：10664309
> 
> 赞同：0
> 
> 时间：2012-05-19T10:21:42.710
> 
> 标签：amazon-rds

这些天学习亚马逊AWS，我遇到了一个问题。要在亚马逊ec2中测试NerdDinner应用程序，我已经设置了一个带有安全组的ec2实例，该安全组接受到SQL Server端口1433的连接，我已经创建了一个rds实例，我添加所有 IP +EC 2 安全组（端口 1433）

使用 vs 2010 aws 工具包，当我尝试创建数据库时，rds 实例仍在要求将我的 IP 添加到 db 安全组中。参见图片。

![在此处输入图像描述](../Images/e447a0e7e909554b340122eb5f2ae8d1.png) ![在此处输入图像描述](../Images/7636b51cfcf6a33cd710238ee36dfe54.png) ![在此处输入图像描述](../Images/3360404563430a4336407a097e574b1c.png)

奇怪的是，当我从另一个 wifi（家庭 wifi）连接时，我可以访问数据库实例。现在我无法从公司 wifi 访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T02:44:59.647

您办公室的 1433 端口是否开放？您可能想要验证这一点。

# python - 如何将 django 开发者服务器连接到 MySQL 数据库？

> ID：10664311
> 
> 赞同：2
> 
> 时间：2012-05-19T10:22:40.027
> 
> 标签：python, mysql, sql, database, django

在我开始之前，请尊重我是一个新手，问我你需要什么更多的信息来解决这个问题，而不是关闭这个问题或其他什么。;） 好的。我正在尝试将我的 Django 开发人员服务器连接到托管在远程服务器上的 MySQL 数据库。我已经安装了 MySQL 和 MySQL-Python，并在“settings.py”中有这些设置：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'database_name',                      # Or path to database file if using sqlite3.
        'USER': 'database_user',                      # Not used with sqlite3.
        'PASSWORD': 'database_password',                  # Not used with sqlite3.
        'HOST': 'db9.subsys.no',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

当我尝试使用启动开发人员服务器时，`python manage.py runserver`我得到了这个：

```
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/django/core/management/commands/runserver.py", line 91, in inner_run
    self.validate(display_num_errors=True)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/Library/Python/2.7/site-packages/django/core/management/validation.py", line 103, in get_validation_errors
    connection.validation.validate_field(e, opts, f)
  File "/Library/Python/2.7/site-packages/django/db/backends/mysql/validation.py", line 14, in validate_field
    db_version = self.connection.get_server_version()
  File "/Library/Python/2.7/site-packages/django/db/backends/mysql/base.py", line 411, in get_server_version
    self.cursor()
  File "/Library/Python/2.7/site-packages/django/db/backends/__init__.py", line 306, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "/Library/Python/2.7/site-packages/django/db/backends/mysql/base.py", line 387, in _cursor
    self.connection = Database.connect(**kwargs)
  File "build/bdist.macosx-10.7-intel/egg/MySQLdb/__init__.py", line 81, in Connect
  File "build/bdist.macosx-10.7-intel/egg/MySQLdb/connections.py", line 187, in __init__
_mysql_exceptions.OperationalError: (2003, "Can't connect to MySQL server on 'db9.subsys.no' (60)") 
```

当我更改为时`'HOST': 'db9.subsys.no'`，`'HOST': ''`我得到了这个：

```
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/django/core/management/commands/runserver.py", line 91, in inner_run
    self.validate(display_num_errors=True)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/Library/Python/2.7/site-packages/django/core/management/validation.py", line 103, in get_validation_errors
    connection.validation.validate_field(e, opts, f)
  File "/Library/Python/2.7/site-packages/django/db/backends/mysql/validation.py", line 14, in validate_field
    db_version = self.connection.get_server_version()
  File "/Library/Python/2.7/site-packages/django/db/backends/mysql/base.py", line 411, in get_server_version
    self.cursor()
  File "/Library/Python/2.7/site-packages/django/db/backends/__init__.py", line 306, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "/Library/Python/2.7/site-packages/django/db/backends/mysql/base.py", line 387, in _cursor
    self.connection = Database.connect(**kwargs)
  File "build/bdist.macosx-10.7-intel/egg/MySQLdb/__init__.py", line 81, in Connect
  File "build/bdist.macosx-10.7-intel/egg/MySQLdb/connections.py", line 187, in __init__
_mysql_exceptions.OperationalError: (1045, "Access denied for user 'database_user'@'localhost' (using password: YES)") 
```

是否无法使用开发人员服务器连接到 MySQL，或者我需要对数据库进行某种配置？如果您有答案或需要更多信息，请回复。

非常感谢提前！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T10:41:28.637

如果要连接到远程 MySQL 服务器，应确保三件事：

1.  服务器正在使用网络而不是套接字（ 中没有`skip-networking`行`my.cnf`），并且服务器正在侦听公共 IP（带有`bind-address`）。

2.  `3306`默认情况下，您的防火墙允许远程访问 MySQL 端口。

3.  允许用户远程访问：

    `GRANT ALL ON someDatabase.* to someUser@some.remote.ip IDENTIFIED BY 'foopass';`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T10:37:30.090

只是一个快速的健全性检查 - 我假设你用实际值替换了占位符值（例如 *database_name*）？

另外，您是否尝试过首先通过命令行连接到数据库（在您的本地开发机器上 - 而不是通过某种 SSH 连接到 VPS 等）以检查它是否可以从您正在开发的任何地方访问，例如*mysql -向上*? 如果不是，这可能意味着您的网络托管公司（我假设这不是您的数据库 - 如果这是错误的，请纠正我和/或查看@Burhan Khalid 的答案）不允许外部连接到该数据库服务器，您将无法从任何软件远程连接 - 这与 Django 无关。在这种情况下，要么联系托管公司以了解要使用的端口号（或者他们的防火墙规则是否允许外部数据库连接），或者使用本地数据库进行开发，然后从您的转储文件中填充生产数据库本地数据库。这是有关此过程的教程 - [http://php.about.com/od/learnmysql/ss/mysql_backup.htm](http://php.about.com/od/learnmysql/ss/mysql_backup.htm)。

在我看来，这是一种更好的做事方式，因为在本地开发然后上传可能更容易、更实用。如果它最终成为实时数据库并且您运行可以清除表的 manage.py 命令之一，它还可以防止您犯下代价高昂的错误！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T10:35:20.200

您可以将数据库与开发服务器一起使用。

当您将主机和端口保留为空白时，django 使用默认端口连接到本地计算机上的数据库。在您的情况下，您会收到错误消息，因为您在连接到 localhost 上的数据库时使用的用户名或密码不正确。

在连接到远程服务器时，请确保您被允许远程访问它。MySQL 默认不允许远程连接。

此外，请确保您尝试连接的端口未被防火墙阻止。

阅读本文以了解您需要做什么才能允许这种行为：[http ://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html](http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html)

我希望这可以帮助您找出解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T23:32:37.380

尝试在 'HOST': 标记之后使用 IP 地址而不是 'db9.subsys.no'。

# php - 如何使用 jquery 和 php 链接到同一页面中的特定部分？

> ID：10664312
> 
> 赞同：1
> 
> 时间：2012-05-19T10:22:40.323
> 
> 标签：php, jquery, html, hyperlink, href

我知道要链接到同一页面中的某个部分，例如：

```
<a href='#A'>A</a>

<a name='A'>Here is A</a> 
```

但是当我用 jquery 和 php 设计它时，我遇到了问题。我的设计是这样的：所有字母都是字母。在字母下，有 div（item_A、item_B、item_c 等...）。例如当用户点击K字母时，页面会链接到#K div，并且#K div也会显示其内容。（因为当网站第一次打开时，item div的显示是无的）。但问题是，虽然#K（K只是示例）K显示了它的内容，但页面并没有重定向到#K div。您必须自己滚动。

这是代码：

```
 <div class="content_letters">
      <ul>
      <?php $array_letter = array("A","B","C","Ç","D","E","F","G","H","I","İ",
                                  "J","K","L","M","N","O","P","R","S","Ş","T",
                                  "U","Ü","V","Y","Z");

      for ($i=0;$i<27;$i++) {

      echo "<li><a id='letter_{$array_letter[$i]}'
            href='#letter_{$array_letter[$i]}'>{$array_letter[$i]} | </a></li>"; 

       }
    ?>
     </ul>
</div>

<?php
    for ($i=0;$i<27;$i++) {
 ?>
    <div class="content_letter_block">
            <div class="text">
            <div class="show_hide">
              <a class="button" id="
               <?php echo 'button_letter_'.$array_letter[$i]; ?>">SHOW/HIDE</a>
            </div>

              <a name="<?php echo "letter_".$array_letter[$i].'">';?>
         <?php  echo $array_letter[$i]; ?></a> starts from here</div>

            </div>                          
    </div>

    <?php } ?>

    <div style='display:none'  id='<?php echo "item_".$array_letter[$i];?>'>    

      Here is item...
    </div> 
```

这是jquery代码：

```
 $(document).ready(function() {
 // target everything with IDs that start with 'button_letter'

  $("[id^='button_letter']").click(function () {

// split the letter out of the ID
// of the clicked element and use it to target
// the correct div

$("#item_" + this.id.split("_")[1]).toggle();
});

$("[id^='letter']").click(function () {
$("#item_" + this.id.split("_")[1]).show();

});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:54:35.003

您也可以在您的网址中指定一个锚点。

```
<a href="your-page.html#k" /> 
```

当您单击链接时，您将被带到该页面，文档将自动滚动到`<a name="k">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:25:48.370

没有时间查看所有代码，但不能使用 scrollTop() 方法？
见[这里](http://api.jquery.com/scrollTop/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T10:25:50.023

要使用 jQuery 滚动到页面中的特定 ID，请使用

```
$('html,body').animate({scrollTop: $("#"+id).offset().top},'slow'); 
```

# .net - 枚举序列化 Json 与 XML

> ID：10664314
> 
> 赞同：21
> 
> 时间：2012-05-19T10:23:14.863
> 
> 标签：.net, xml, json, serialization, asp.net-web-api

我的项目中有以下枚举

```
public enum CameraAccessMethod
{
    Manual = 0,
    Panasonic = 1,
    Axis = 2,
    AirCam = 3
} 
```

我有一个对象，它根据不同的场景被序列化为 json 或 XML，并且对象的属性之一是 type `CameraAccessMethod`。我遇到的问题是，当此属性被序列化为 XML 时，它将给出枚举值（手动、松下、Axis、Aircam）的字符串表示，但在 JSON 中它被序列化为数值（0、1、2、3）。我怎样才能避免这种不一致？我也想要 JSON 序列化中的字符串。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-26T12:12:44.987

由于 Web API RC，您可以通过在以下期间将 a`StringEnumConvert`应用于现有`JsonMediaTypeFormatter`转换器集合来获取枚举的字符串表示形式`Application_Start()`：

```
var jsonFormatter = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
var enumConverter = new Newtonsoft.Json.Converters.StringEnumConverter();
jsonFormatter.SerializerSettings.Converters.Add(enumConverter); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:41:19.123

如果您切换到使用基于 Json.NET 的格式化程序（它将与下一个 ASP.NET Web API 一起提供开箱即用），您可以轻松完成此操作。有关详细信息，请参阅此 SO 帖子：

[如何全局告诉 Json.Net 将 StringEnumConverter 应用于所有枚举](https://stackoverflow.com/questions/7427909/how-to-tell-json-net-globally-to-apply-the-stringenumconverter-to-all-enums)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T04:23:56.413

要使用`JsonMediaTypeFormatter` 两者`enumConverter`，我们可以使用下面的代码。//代码从这里开始

```
var serializerSettings = GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings;
var enumConverter = new Newtonsoft.Json.Converters.StringEnumConverter();
serializerSettings.Converters.Add(enumConverter);
GlobalConfiguration.Configuration.Formatters.Clear();
GlobalConfiguration.Configuration.Formatters.Add(new PartialJsonMediaTypeFormatter()
{
     IgnoreCase = true,
     SerializerSettings = serializerSettings
}); 
```

# c++ - OpenSSL AES 解密更改大小

> ID：10664316
> 
> 赞同：0
> 
> 时间：2012-05-19T10:23:19.743
> 
> 标签：c++, function, encryption, openssl

我绕过recv函数，我试图解密缓冲区，但解密函数改变缓冲区大小，我认为解密无效，代码：

```
int WINAPI OwnRecv(SOCKET s, char FAR *buff, int len, int flags)
{
    if(s == GameClientSocket)
    {
        int received = pTrampolineRecv(s, buff, len, flags);

        if(received <= 0)
        {
            return received;
        }
            // now strlen(buff) is 2!!
        char * plaintext;
        plaintext = (char *)aes_decrypt(&Decrypt_Context, (unsigned char*)buff, &received);
        (char *) buff = plaintext; // now strlen(buff) is 5!!
        return received;
    }
    return pTrampolineRecv(s, buff, len, flags);
} 
```

我的代码有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:25:51.057

你忘了实现一个协议！无论您使用什么协议来加密和解密数据，您都必须实际实现它。它必须定义块大小、填充等。它不仅仅靠魔法起作用。（请注意，使用流密码比使用分组密码更容易。*）*

另外，不要调用`strlen`任意二进制数据！该`strlen`函数仅适用于 C 风格的字符串。

此外，这行代码并没有按照您的想法执行：

```
 (char *) buff = plaintext; // now strlen(buff) is 5!! 
```

更改 的值（`buff`保存指向缓冲区的指针的变量）对缓冲区的内容没有影响。这就是调用者所关心的。

# magento - 如何在magento的页脚显示顶部链接？

> ID：10664318
> 
> 赞同：2
> 
> 时间：2012-05-19T10:23:29.153
> 
> 标签：magento, toplink

如何在页脚的顶部链接下方显示，

![在此处输入图像描述](../Images/ad191c19a3973db90872293420d2f887.png)

我在 Footer.phtml 文件中使用了以下代码，

```
<?php echo $this->getChildHtml('topLinks'); ?> 
```

但链接不显示？我怎样才能做到这一点？

提前致谢

页脚.phtml

```
<div class="footer-container">
    <div class="footer">
        <?php echo $this->getChildHtml() ?>
        <?php echo $this->getChildHtml('newsletter') ?>

        <?php //echo $this->getLayout()->createBlock('cms/block')->setBlockId('sample_links')->toHtml() ?>

        <?php echo $this->getChildHtml('samplelinks') ?>

    <?php echo $this->getChildHtml('top.links'); ?> 

        <p class="bugs"><?php echo $this->__('Help Us to Keep Magento Healthy') ?> - <a href="http://www.magentocommerce.com/bug-tracking" onclick="this.target='_blank'"><strong><?php echo $this->__('Report All Bugs') ?></strong></a> <?php echo $this->__('(ver. %s)', Mage::getVersion()) ?></p>
        <address><?php echo $this->getCopyright() ?></address>
    </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T10:59:44.143

经典的学习主题 Magento 问题！

一个块与另一个块的关系在模板中最为明显（正如您当前的努力所证明的那样）。父级（在您的情况下为页脚）触发另一个块的呈现的能力需要建立父子关系。这通常发生在布局更新 XML 中。

如果这种关系是核心关系，您可能会在基本/默认主题的*layout/page.xml*文件中看到以下内容：

```
<block type="page/html_footer" name="footer" ...>
    <!-- other child block directives -->
    <block type="page/template_links" name="top.links" as="topLinks"/>
</block> 
```

在您的情况下，因为您要在两个现有块之间添加关系，所以您可以在名为*local.xml*的特殊最终用户布局 xml 文件中设置块实例之间的关系，您应该将其放置在自定义主题的*布局*文件夹中。这是它的样子：

```
<?xml version="1.0"?>
<layout>
    <default><!-- effectively: "do this on all pages" --> 
        <reference name="footer"><!-- parent block -->
            <action method="insert"><!-- this PHP class method sets the relationship -->
                <block_name_to_insert>top.links</block_name_to_insert><!--use the block name in the layout, not the alias. See Mage_Core_Block_Abstract::insert() -->
                <sort_relative_to_other_childname/><!-- empty val is fine here -->
                <sort_before_or_after/><!-- not relevant -->
                <alias>topLinks</alias><!-- because you are using the original alias, need to re-specify that here -->
            </action>
        </reference>
    </default>
</layout> 
```

# java - 使用反射制作对象

> ID：10664322
> 
> 赞同：0
> 
> 时间：2012-05-19T10:24:20.460
> 
> 标签：java, reflection

我们可以使用反射来创建对象。假设我在包 p 中有一个类“Employee”

```
Employee emp = Employee.class.newInstance()  OR
Employee emp = (Employee)Class.forName("p.Employee").newInstance() 
```

上面的代码行将通过调用 Employee 的默认或无参数构造函数来创建 Employee 对象。然后我通过调用 Employee 的 setter 为对象设置一些值

有没有办法通过在构造函数本身中给出值来使用反射创建对象，即通过调用参数化构造函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T10:28:56.560

是的，让我们假设`Foo`有一个构造函数接受单个字符串作为其参数。然后使用以下代码给出一个使用该构造函数的实例：

```
Class<?> fooClass = Foo.class;
Constructor<?> constructor = fooClass.getConstructor(String.class);
Object obj = constructor.newInstance("hello"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:33:28.103

看看[Class.getConstructor](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getConstructor%28java.lang.Class...%29)和[Constructor](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Constructor.html#newInstance%28java.lang.Object...%29)。

首先，您通过其参数类型获得正确的构造函数，然后使用该类型的参数调用它：

```
Constructor<Employee> constructor = Class.forName("p.Employee").getConstructor(Integer.class, String.class);
Employee employee = constructor.newInstance(1,"foo"); 
```

# php - PHP 和 SQL Server 2000 - odbc_connect 不起作用并且没有错误消息

> ID：10664330
> 
> 赞同：2
> 
> 时间：2012-05-19T10:25:05.640
> 
> 标签：php, sql-server-2000

我尝试重新运行早期的工作代码以从 PHP 连接 SQL Server 2000。我使用以下代码进行连接：

```
$connection = odbc_connect($databaseURL, $databaseUName, $databasePWord);

if (!$connection) {
    echo 'dyeing';
    die('Something went wrong while connecting to database ' + $databaseName);
}
else
{
    echo "connection successful";
} 
```

但是没有代码，在 $connection = odbc_connect($databaseURL, $databaseUName, $databasePWord); 之后

正在工作中。甚至没有回声声明。

设置中会出现什么问题。我格式化并重新安装了 windows、php 和 sql server 等。之前相同的代码工作正常。

现在 odbc_connect 语句之后不会出现任何消​​息。直到那一行，每个 echo 语句都运行良好。

无法弄清楚出了什么问题。

幸福永远 BKR Shivaprakkash

# sql - 在数据库中创建更多列或行是否更好

> ID：10664342
> 
> 赞同：0
> 
> 时间：2012-05-19T10:26:24.360
> 
> 标签：sql, sql-server, sql-server-2008

在数据库中创建更多列或行是否更好。我正在出勤表中输入学生出勤信息。

条件 1：我应该包括 1 周列和 3 讲座列，但这会增加每个学生的行数，因为有 16 周，每周有 3 次讲座。？？

条件2：或者我应该添加48个讲座栏，分别存储每个学生的出勤情况。？？？

我看到了很多答案，但我无法得到它可以有人帮助我吗？先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:32:24.940

都不做。你最好有一张桌子放你的学生，一张用来上课，还有一张交叉表来组合这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:56:21.867

不做更多的列和不做更多的行，只是为了在你的数据库设计中遵循关系代数，为了更高的性能和 oop 你必须遵循标准规则，为了打破性能规则你应该有经验和已知的原因。您的要求应该有 1 个并且只有一个基于关系代数的表设计。——萨梅·法库阿

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T10:38:13.040

如果一个条目（每个条目是数据库表中的一个“行”）的“项目”（讲座、部件、小部件、颜色）的数量是已知且固定的，那么没有理由不为每个条目设置一列“项目”。它可能变得非常难以使用，因为每一行都可能变得非常大——在你的例子中是 48 个讲座——但是所有的“项目”都可以通过查询你的行（在这种情况下是一个学生）来轻松定位通缉。

通常，您将拥有不同的数据库布局，其中您想要的主要实体是“学生”，并且对于每个“学生”实体，都会有许多与该“学生”相关联的附加实体。这些将是“讲座”，每个“讲座”实体将与“学生”和日期相关联。在这种情况下，您将在数据库中查询“学生”，然后使用称为“连接”的关系数据库操作通过连接与“讲座”表关联的“学生”标识符来从“讲座”表中定位学生的出勤情况用“学生”的名字记录。

这种方法的优点是您可以创建额外的实体——上交的家庭作业、考试或考试成绩等——然后也可以以相同的方式定位并“加入”学生。当您添加这些不同的实体时，您无需修改​​原始表（学生姓名加上 48 个讲座），而是创建新表（“作业”、“测试”、“考试”），然后这些表将学生姓名作为一个字段，以及日期和等级作为其他字段。

这种方法的一个缺点是不必要的复杂性。你真的需要一张额外的桌子来保存不能改变的东西——课程的周数是由日历和课程安排确定的吗？您必须做出决定——如果“学生出勤”数据库必须应用于其他课程，以及其他时间表，您别无选择，只能增加这种复杂性。如果这只是一门课程的一次性任务，那么复杂性在以后不会给你带来任何好处。

正如 Kyser 所说，研究关系数据库理论。

# android - 如何设置搜索网址？

> ID：10664345
> 
> 赞同：0
> 
> 时间：2012-05-19T10:26:40.413
> 
> 标签：android, webview

我遇到了谷歌搜索的网址问题。

实际上，我有一个字符串，我需要使用 webview 在 google 中使用字符串搜索。不幸的是，webview 什么也没显示。任何人都可以帮忙吗？

```
public class viewPage extends Activity {

  WebView mWebView;

  public void onCreate(Bundle savedInstanceState){

    super.onCreate(savedInstanceState);
    setContentView (R.layout.searchonwebview);

    Intent intent = getIntent();
    String result = intent.getStringExtra("result");

    String url = "http://www.google.com/"+result+" pdf";
    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.loadUrl(url);

    mWebView.setWebViewClient(new HelloWebViewClient());

  }

  private class HelloWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
      view.loadUrl(url);
      return true;
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:30:54.097

你为什么要设置

```
mWebView.setWebViewClient(new HelloWebViewClient()); 
```

加载网址后？它应该在加载 url 之前。

```
 String url = "http://www.google.com/"+result+" pdf";
    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.setWebViewClient(new HelloWebViewClient());
    mWebView.loadUrl(url); 
```

# java - java线程对静态类的影响

> ID：10664346
> 
> 赞同：0
> 
> 时间：2012-05-19T10:26:41.303
> 
> 标签：java, multithreading

考虑以下代码：

```
static class ThreadTest extends Thread {
    int x;
    int[] y;

    public ThreadTest(int x, int[] y) {
        this.x = x;
        this.y = y;
    }

    @Override
    public void run() {

        while (x< 10) {
            ++x;
            System.out.print("0");
        }
        while (y[0] < 10) {
            ++y[0];
            System.out.print('1');
        }
    }
}

public static void main(String args[]) {
    int x = 0;
    int[] y = new int[1];
    y[0] = 0;

    Thread A = new ThreadTest(x, y);
    Thread B = new ThreadTest(x, y);

    B.start();
    A.start();
} 
```

将打印多少个 1 和多少个 0？如何确保每次程序运行时 1 的数量都相同？注意这个类是**静态的**

如何评估“1”的最大和最小外观？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T10:29:37.853

目前，您的代码包含[竞争条件](https://stackoverflow.com/questions/34510/what-is-a-race-condition)，因为两个线程正在修改同一个`y`数组。这意味着打印的 1 的数量是不确定的。

> 如何确保每次程序运行时 1 的数量都相同？

您需要在两个线程之间引入同步。

这可以通过多种方式完成。Java 中最常见的一种是在`synchronized`修改和/或读取共享状态的代码周围使用块。

另一种方法是`int[1]`用单个[`AtomicInteger`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html). 对于这种特殊情况，这将非常有效。

> 注意这个类是静态的

类是否在`static`这里完全无关紧要。[这意味着](https://stackoverflow.com/a/3584151/367273)的实例`ThreadTest`没有对外部类实例的隐式引用。它与实例之间的状态共享无关`ThreadTest`（我认为这就是你在这里所暗示的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:52:35.337

1s的最小数量显然是10，最大数量将是20。

20 因为最坏的情况是两个线程都到达

```
while (y[0] < 10) 
```

每次同时，然后再次到达

```
++y[0]; 
```

每次也是在同一时间，这将导致其中一个增量丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T09:34:09.157

该类是否`static`在此处不起作用。

虽然`ThreadTest.y`变量不是静态的（也不应该是静态的），但它**为所有线程填充了对同一数组的引用**。这就是你的同步错误所在：`main`你不应该给两个线程*相同*的数组。

# processing - 处理图像时的 OutOfMemory

> ID：10664348
> 
> 赞同：0
> 
> 时间：2012-05-19T10:27:58.730
> 
> 标签：processing, out-of-memory

这会在运行几秒钟后产生 OutOfMemory 异常。有任何想法吗？

```
PGraphics img;

void setup() {
  size(500, 500);
  img = createGraphics(width, height, JAVA2D);

  // this is here just for the testcase because else I get a
  // NullPointerException too (probably a harmless Processing bug)
  img.beginDraw(); img.endDraw();
}

void draw() {
  PGraphics tmpImg = createGraphics(img.width, img.height, JAVA2D);
  tmpImg.beginDraw();
  tmpImg.image(img, 0, 0);
  tmpImg.endDraw();
  tmpImg.dispose();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T05:56:15.117

Mat 是对的，您不应该每帧都实例化一个新的 PGraphics。你可以简单地做这样的事情：

```
PGraphics img;

void setup() {
  size(500, 500);
  img = createGraphics(width, height, JAVA2D);

  // this is here just for the testcase because else I get a
  // NullPointerException too (probably a harmless Processing bug)
  img.beginDraw(); img.endDraw();
}

void draw() {
  image(img, 0, 0);
} 
```

因为[PGraphics](http://processing.googlecode.com/svn/trunk/processing/build/javadoc/core/processing/core/PGraphics.html)扩展[了 PImage](http://processing.googlecode.com/svn/trunk/processing/build/javadoc/core/processing/core/PImage.html)。通常你会使用[基本的 PImage API](http://processing.org/reference/PImage.html)，但如果你需要在位图或假“图层”上绘制形状，你可以将 PGraphics 与 PImage 结合使用，但不要分配新的 PGraphics 30 到 60 次一秒。

# sql - 无法使用 SQL 创建表

> ID：10664355
> 
> 赞同：1
> 
> 时间：2012-05-19T10:29:13.253
> 
> 标签：sql, sql-server, database

当我执行我的代码时，我有这个错误：

![错误](../Images/cbd4455c275ee43874581b1be8e9bc6d.png)

```
CREATE TABLE tblContactUs 
(
  contactUsID uniqueidentifier primary key default (newid()),
  name varchar(30) not null,
  newsletter VARCHAR(1) constraint check newsletter check(gender in ('Y','N')) default('N'),
  dbo.UseLogin foreign key references dbo.UseLogin(userID)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T10:32:48.253

尝试将数据库从更改`master`为 ProjectjeSQL

# html - iPad/iPhone 上的 Html5 表单元素“必需”不起作用

> ID：10664356
> 
> 赞同：19
> 
> 时间：2012-05-19T10:29:15.640
> 
> 标签：html, forms, mobile-safari, required, html-validation

iPad safari 应该是 html5 兼容的，但似乎所需的元素不起作用。任何人都知道为什么，或者有一个不需要大量 JavaScript 的体面的解决方法吗？

我的代码

```
<input type=email class=input placeholder="Email" name="email" required> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-19T10:48:48.877

iOS 尚不支持它：[我什么时候可以使用： required](http://caniuse.com/#search=required)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-10-16T14:36:55.407

这是该问题的 jQuery 解决方案，它也以小指颜色突出显示失败的输入字段。

```
$('form').submit(function(){
    var required = $('[required="true"]'); // change to [required] if not using true option as part of the attribute as it is not really needed.
    var error = false;

    for(var i = 0; i <= (required.length - 1);i++)
    {
        if(required[i].value == '') // tests that each required value does not equal blank, you could put in more stringent checks here if you wish.
        {
            required[i].style.backgroundColor = 'rgb(255,155,155)';
            error = true; // if any inputs fail validation then the error variable will be set to true;     
        }
    }

    if(error) // if error is true;
    {
        return false; // stop the form from being submitted.
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-17T11:03:50.977

从 iOS 10.3 开始支持此属性。电子邮件类型也需要写@符号等等......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T22:06:01.273

如果您已经在使用 jQuery、Modernizr 和 yepnope，这是处理它的一种方法。如果你不是那么这将添加很多额外的 javascript。

[我的解决方案](https://stackoverflow.com/a/13040023/844990)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-19T08:24:00.317

我想你可以在提交操作之前做一些这样的事情

```
<form name="myForm" action="valid.html" onsubmit="checkValid()" method="post">
  ... ...
</form> 
```

按下`submit`按钮后，`checkValid()`在它实际提交之前被唤起。的返回值`true`将继续提交操作。

请参阅[这篇文章](https://stackoverflow.com/questions/16262797/html-form-action-and-onsubmit-issues)以获得进一步的解释。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-14T10:50:07.037

如果你使用 PHP，你可以像这样添加一个验证

```
function validation(){

  if(isset($_POST['submit'])){
  $email = $_POST['email'];

     if(empty($email)){
        echo $error = "Your email cannot be empty";

      } else {
        return true; //or do something next here
     }
   } 
```

然后，您在表单之前的 php 中添加此函数。

# ruby-on-rails - Rails caches_action 正在跳过 before_filters

> ID：10664358
> 
> 赞同：12
> 
> 时间：2012-05-19T10:29:26.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, action-caching

我有一个控制器，我在其中缓存显示操作。show 操作有许多用于安全的 before 过滤器，如果用户未登录，而不是当前组的成员等，这些过滤器将执行和重定向。当我没有打开缓存时，这些 before 过滤器可以正常工作，但是当我翻转开关以在不再执行过滤器之前打开缓存时（我的调试器调用未命中）。

我一直认为，在为缓存操作调用过滤器之前，这是页面缓存和操作缓存之间的主要区别。这得到了[Rails 缓存教程中关于动作缓存](http://guides.rubyonrails.org/caching_with_rails.html#action-caching)的部分的支持，该部分内容如下：

> Action Caching 的工作方式与 Page Caching 类似，不同之处在于传入的 Web 请求确实从 Web 服务器发送到 Rails 堆栈和 Action Pack，以便在提供缓存之前可以在其上运行之前的过滤器。这允许运行身份验证和其他限制，同时仍提供缓存副本的输出结果。

那么为什么我之前的过滤器没有被调用呢？

关于我的设置：Rails 3.1 using Devise for authentication。我正在将 dalli gem 用于 memcached 存储。

这里有一些代码总结了我的代码（很多杂乱无章的删减）：

```
class GroupsController < ApplicationController
  caches_action :show
  cache_sweeper :group_sweeper

  before_filter :authenticate_user!, :except => [:index]
  before_filter :init_group, :except => [:new, :create, :index]
  before_filter :requires_group_membership, :except => [:new, :create, :index]

  def show
  end

  private

  def requires_group_membership
    if current_user and !@group.users_active.index(current_user).nil?
      return true
    else
      redirect_to :root
      return false
    end
  end

  def init_group
    @group = current_user.active_groups.find_by_id(params[:id])

    if @group.nil?
      redirect_to :root
      return false 
    end
  end 
```

那么，有没有人见过这种行为？我对过滤器和动作缓存应该如何工作之前的理解是否存在漏洞？或者也许我有一些奇怪的巫毒发生在一个奇怪的 gem 版本组合中？

[编辑]

有趣的是，我刚刚了解到，返回值对是否运行更远的方法没有影响，而是调用重定向或渲染。

[编辑 2]

我将我的应用程序升级到 rails 3.2.3 以查看它是否有效果，但没有解决问题。我发现，ApplicationController 中定义的过滤器被调用，但 GroupsController 中的过滤器没有。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-21T06:27:57.603

好吧，这是学习有关缓存的新花絮的一种非常耗时的方法。

事实证明，您需要在要运行的 before_filters**之后调用 caches_action。**我已将缓存操作作为课堂上的第一件事。这意味着所有之前的过滤器都没有运行，因为它们出现在 caches_action 的下方/之后，并且 caches_action 会停止代码的运行（并提供缓存的结果）。

感谢[Pan Thomakos](https://stackoverflow.com/users/427733/pan-thomakos)的[回答](https://stackoverflow.com/a/5097791/284168)，其中包含这些信息的瑰宝——这不是在 ruby​​ 文档中，或者我已经略过它。一旦我设法收回由于这个小盲点而损失的时间，我将努力将这些信息添加到文档中。

# c++ - 将组合框中键入的字符串与其项目进行比较

> ID：10664359
> 
> 赞同：0
> 
> 时间：2012-05-19T10:29:27.107
> 
> 标签：c++, string, combobox, std

假设我有 20 个不同长度的字符串，每个字符串都应该获得类似于以下内容：

```
TCHAR *itemText[...];
SendMessage(hwndCombobox, CB_GETLBTEXT, i, (LPARAM)itemText); 
```

由于我有项目的索引，我想在 for 循环中使用上面的代码。但是因为每个项目都有不同的长度，我不能使用类似的东西：

```
int itemLength = SendMessage(hwndCombobox, CB_GETLBTEXTLEN, i, 0);
TCHAR *itemText[itemLength]; 
```

由于使用消息`CB_GETLBTEXTLEN`首先需要长度，因此需要获取长度。我知道我可以使用，例如，`TCHAR *itemText[1024];`但我个人不喜欢这种方式。

我也尝试使用`new`and `delete`，而其他人建议我使用`vector`with `std::string`，就像在这篇文章中一样[delete pointers created by new in CallBack Function](https://stackoverflow.com/questions/10653746/delete-pointers-created-by-new-in-callback-function)，但这会导致另一个问题，即`CB_GETLBTEXT`requires所需的 LPARAM 参数`A pointer to the buffer that receives the string.`，所以下面的代码不起作用，因为最后一个参数是`std::string`，而不是接收字符串的指针：

```
int i;
Vec<std::string> itemText;
for (i = 0; i < itemCount; i++) {
    ......... // Don't know how to initialize a string with a specified length.
    SendMessage(win->hwndFindBox, CB_GETLBTEXT, i, (LPARAM)itemText.At(i));
} 
```

我也不知道如何`std::string str`用指定的长度初始化 a 。

实际上，我想将组合框控件的编辑控件中键入的字符串与此组合框上的项目进行比较。你有什么建议来解决这个问题或做我想做的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:54:07.377

您可能误解了使用`std::vector`with 的建议`std::string`。读取 ComboBox 项文本时应将`std::vector<TCHAR>`其用作临时缓冲区（因为您不能直接写入 使用的内部缓冲区`std::basic_string`），然后可以`std::basic_string<TCHAR>`根据需要将其复制到后面：

```
std::basic_string<TCHAR> s;
int itemLength = SendMessage(hwndCombobox, CB_GETLBTEXTLEN, i, 0);
if (itemLength != CB_ERR)
{
    std::vector<TCHAR> buf(itemLength + 1 /* for NUL */);
    SendMessage(hwndCombobox, CB_GETLBTEXT, i, reinterpret_cast<LPARAM>(&buf[0]));

    s = &buf[0];
} 
```

这`std::vector`是有效的，因为保证使用连续内存，所以`&buf[0]`应该等价于一个数组（假设它`buf`不为空，但在这种情况下，我们保证它至少有 1 个元素）。

# c# - AjaxRequest.get() 不接受来自 Response.Write() 函数的文本/Html

> ID：10664365
> 
> 赞同：0
> 
> 时间：2012-05-19T10:29:59.613
> 
> 标签：c#, asp.net, ajax, response.write

我正在使用[AjaxRequest](http://www.ajaxtoolbox.com/request/source.php)`AjaxRequest.Get()`中的方法。 以下是中的内联javascript
`analysis.aspx`

```
 function getAnalysis(type) {            
        var innerHtml;      
        AjaxRequest.get(
            {
                'url': 'getAnalysis.aspx?type=' + type
                , 'onSuccess': function (req) { innerHtml = req.responseText; }
            }
        );
        document.getElementById("div_analysis").innerHTML = innerHtml;
    } 
```

when`getAnalysis(type)`调用`analysis.aspx`一切正常 - 正确提交 ajax 请求并正确发送响应。但最终值`innerHTML`仍然未定义。

以下是代码`getAnalysis.aspx`-

```
 protected void Page_Load(object sender, EventArgs e)
 {
    if(type == "somwthing") str = load();    
    Response.Clear();     
    Response.CacheControl = "no-cache";              
    Response.Write(str);      
    Response.End();     
 } 
```

当我使用 google chrome 调试 javascript 时，我发现 value of`innerHMTL`是未定义的，尽管一切都很好。
所以我不明白为什么 AjaxRequest 类不接受来自`Reponse.Write()`.

PS：我也试过`Response.ContentType = "text/Html";`了`Reponse.Fluch()`。
请提前指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:38:17.913

您需要在 onsuccess 函数中设置 div 内容，因为它在 AJAX 请求完成时被异步调用

```
function getAnalysis(type) {             
        var innerHtml;       
        AjaxRequest.get( 
            { 
                'url': 'getAnalysis.aspx?type=' + type 
                , 'onSuccess': function (req) { document.getElementById("div_analysis").innerHTML = req.responseText; } 
            } 
        ); 
    } 
```

# php - wamp php CLI 已停止工作

> ID：10664370
> 
> 赞同：1
> 
> 时间：2012-05-19T10:30:18.120
> 
> 标签：php, windows, wamp

我安装`wamp server 2.2`了`php 5.3.10`和`apache 2.2.21`。但是当我想执行一些`symfony`命令时，我的 Windows 7 Home Premium 的响应是：

```
php -> CLI has stopped working 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:45:59.520

我有这个错误很长时间了。原来我使用的是稍旧版本的 Xdebug (php_xdebug-2.2.0-5.4-vc9.dll)。

我用“php_xdebug-2.2.2-5.4-vc9.dll”替换了那个文件，它神奇地立即开始工作。

我在 wamp 上，我用最新的文件名更新了两个 php.ini 文件（一个用于 cli，一个用于正常使用）。“zend_extension = c:\wamp\bin\php\php5.4.3\ext\php_xdebug-2.2.2-5.4-vc9.dll”

然后将新文件放入 php ext 文件夹并立即成功。希望这可以帮助。

# android - 短信应用意图在 android 3.0 及更高版本中不起作用

> ID：10664372
> 
> 赞同：4
> 
> 时间：2012-05-19T10:30:26.373
> 
> 标签：android, sms, android-3.0-honeycomb

这是我用来调用 SMS 应用程序的一段代码：

```
Intent intent = new Intent(Intent.ACTION_SENDTO, Uri.parse(uri));
            intent.putExtra("sms_body", body);
            intent.putExtra("compose_mode", true);
            launchIntent(intent); 
```

在 os 版本低于 Android 3.0 的设备上，上述代码运行正常，SMS 页面被打开并且要发送的消息和数字被正确预填，但在 Android 3.0 及更高版本的设备中，这不再工作了。

在 Android 3.0 中调用 SMS Intent 并填充数字而不是文本，而在 Android 4.0 中调用 SMS Intent 并填充文本而不是数字。

有谁知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:40:18.727

此代码适用于所有版本的 android

```
String smsBody = Resources.getString("InvitationBody", getBaseContext()) + Local.User.FirstName;
Intent sendIntent = new Intent(Intent.ACTION_VIEW);
sendIntent.putExtra("sms_body", smsBody); 
sendIntent.setType("vnd.android-dir/mms-sms");
startActivity(sendIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:14:44.090

以下代码完美运行

```
 String body = "This is the message i need to send";
                String num  = "smsto:999416231";
                String[] tokens = num.split(":");
                Intent sendIntent = new Intent(Intent.ACTION_VIEW);
                sendIntent.putExtra("address",tokens[1]);
                sendIntent.putExtra("sms_body", body); 
                sendIntent.setType("vnd.android-dir/mms-sms");
                startActivity(sendIntent); 
```

我在问题中提到的代码用于传递数字`Uri.parse(uri)`，其值为`"smsto:9941..."`

但在新代码中，我将文本和数字分开。

# flash - as2 flash中影片剪辑的_height和height有什么区别

> ID：10664375
> 
> 赞同：1
> 
> 时间：2012-05-19T10:30:57.170
> 
> 标签：flash, actionscript-2, zooming, movieclip

我正在放大和缩小电影剪辑。我通过 mc.height 得到原始高度。缩放影片剪辑后，我需要增加影片剪辑的高度。所以我使用了 mc._height 属性。但它提供了更多更高的价值，它不是原始价值。但它也变化在价值越来越少的价值和更多的价值内滚动。

请帮助我。

谢谢。

嗨，我正在做缩放概念。缩放动画剪辑宽度工作正常。但是在补间图像的情况下，宽度和高度会异常增加。我没有找到的原因是什么。请帮助我。

```
this.onMouseMove = function() {
constrainedMove(bg_mc, 4, 1);
};

function constrainedMove(target:MovieClip, speed:Number, dir:Number) {
var mousePercent:Number = _xmouse/Stage.width;
var mSpeed:Number;
if (dir == 1) {
    mSpeed = 1-mousePercent;
} else {
    mSpeed = mousePercent;
}
target.destX = Math.round(-((target._width-Stage.width)*mSpeed));

     target.onEnterFrame = function() {
    if (target._x == target.destX) {
        delete target.onEnterFrame;
    } 
              else if (target._x>target.destX) {
        target._x -= Math.ceil((target._x-target.destX)*(speed/100));
    } 
              else if (target._x<target.destX) {
        target._x += Math.ceil((target.destX-target._x)*(speed/100));
    }
};
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T15:53:30.943

Actionscript 2 中没有 .height 属性，正如您指出它的 ._height 一样，您很可能拥有 Actionscript 3 的代码。

作为旁注，AS3 中的所有旧变量都是 _visible、_width、_height 等。这些已更改为可见、宽度、高度等。

希望这可以帮助。

**编辑：**

如果您使用`_xscale`or`_yscale`那么您可能无法获得您期望的宽度和高度。这是一个使用`Matrix`. 首先在舞台上创建一个盒子并给出盒子的实例名称使其大小为 100x100：

```
import flash.geom.Matrix;

// will trace 100
trace(box._width);

// will trace 100
trace(box._height);

// get the current matrix and scale it by factor of two - doubling it
var matrix = box.transform.matrix;
matrix.scale(2,2);

// apply the matrix back to the movieclip
box.transform.matrix = matrix;

// will trace 200
trace(box._width);

// will trace 200
trace(box._height); 
```

有一篇关于 using - [`Matrix`in actionscript 2 by senoculor的好文章](http://www.senocular.com/flash/tutorials/transformmatrix/)

我真的希望这对您有所帮助，如果确实如此，请将答案标记为正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-20T17:56:55.347

我只是想用一些有用的信息来更新这篇文章。两个版本的高度都将突出显示为蓝色，因为它们都作为关键字存在。大多数对象使用 ._height 属性，但 Stage 类使用 .height。这有点令人困惑，但却是与 AS2 不一致的完美示例。

```
Stage.height
MovieClip._height 
```

# liferay - 更改 Liferay 中的默认语言

> ID：10664376
> 
> 赞同：11
> 
> 时间：2012-05-19T10:30:57.473
> 
> 标签：liferay

如何更改语言的默认值？

当用户第一次登录时，默认语言是英语，我需要更改它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T20:39:25.687

您可以从控制面板 - 门户设置 - 显示设置 - 默认语言更改默认语言。您也可以在 portal-ext.properties 覆盖参数：

```
#
# Set the default locale used by Liferay. This locale is no longer set at
# the VM level. See LEP-2584.
#
user.country=US
user.language=en 
```

BR，保罗

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-28T10:53:28.160

从 Liferay 7（2016 年发布）开始，可以在 UI 中找到默认语言设置：

**控制面板**>**实例设置**>**其他**>**显示设置**

[![在此处输入图像描述](../Images/ddecfe37e7ae70a4836f14fdb108bbf1.png)](https://i.stack.imgur.com/pmvFE.png)

不要忘记按页面底部的“保存”。

正如 MDT 所说，它会覆盖`portal-ext.properties`.

# java - “DataNucleus 增强器”错误 206

> ID：10664377
> 
> 赞同：3
> 
> 时间：2012-05-19T10:31:05.673
> 
> 标签：java, eclipse, google-app-engine, windows-7, datanucleus

我有个问题。我总是从 Java DataNucleus Enhancer 收到错误 206，因为 2 天前......几天前，它没有错误地工作。

> 无法运行程序“D:\Program Files\Java\jre6\bin\javaw.exe”（在目录“C:\Users\schmisa2\workspace\AMS0”中）：CreateProcess 错误=206，文件名或扩展名太长不能运行程序“D:\Program Files\Java\jre6\bin\javaw.exe”（在目录“C:\Users\schmisa2\workspace\AMS0”中）：CreateProcess error=206，文件名或扩展名太长

我在 Google 和 Stackoverflow 上搜索了很多，但无法解决问题。

我最长的路径是：

> C:\Users\schmisa2\workspace\AMS0\src\ch\zhaw\ams\module\football\sfv\news\server\NewsElement.java

[https://groups.google.com/group/google-appengine-java/browse_thread/thread/6cde7d1695b3eff3](https://groups.google.com/group/google-appengine-java/browse_thread/thread/6cde7d1695b3eff3)

有人知道我该如何解决吗？

我安装了一个 Linux Ubuntu 在那里进行测试。那里没有问题......但它在 Windows 7 上不起作用。我有 GWT 2.4，App 引擎 1.6.5。SDK 和 Eclipse 3.7

或者有人可以解释我如何在命令行上运行它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-30T13:05:57.093

这对我有用。

> “如果您使用 Eclipse 插件，请转到项目 | 属性，选择 Google \ App Engine \ ORM 并仅包含您想要增强的类的目录。默认情况下，它会执行整个项目，因此包含许多不必要的文件。 "

[来源在这里](https://groups.google.com/forum/#!topic/google-appengine-java/bN59FpWz7_M)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:55:02.953

我有一个项目，我正在使用 DataNucleus、JDO 和 Annotations。我在使用 Eclipse 的 Windows 上遇到了同样的问题（在我的 Mac 上很好）。为了解决这个问题，我做了以下事情：

*   为每个 @PersistenceCapable 类创建一个 .jdo 文件（参见下面的示例 JDO 文件）并将它们与类文件一起保存。
*   右键单击项目 -> 首选项 -> DataNucleus -> 增强器 -> 输入文件扩展名。删除此处的“类”条目。
*   如果您的项目也需要 SchemaTool 配置，请执行与上述相同的操作。

现在应该可以了。

**JDO 文件示例：**

```
<?xml version="1.0" encoding="UTF-8"?>
<jdo>
    <package name="my.package">
        <class name="MyPersistenceCapableClass"/>
    </package>
</jdo> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:52:34.417

Another way you can fix this issue or workaround it I should say in Eclipse is to create a new run configuration in eclipse copying the parameters from the datanucleus one which is created by the plugin Run Configurations -> Java Application -> DataNucleus Enhancer. Copy Main tab, Arguments, and you might need to add the Datanucleus jars to the classpath tab.

In the arguments tab, remove all the classes you don't need enhanced. Next I'll shut off the plugin by removing the classes extension under the projects Properties -> DataNucleus -> Enhancer -> Input File Extensions.

You'll just need to manually run this enhancer after each time you build now. If I need to add new classes to enhance, I'll just add it to my manual one.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T07:14:18.203

因此，您在命令行长度上达到了 Windows 过时的限制。例如，将增强器的调用更改为使用 persistence.xml。

# silverlight - 如何使用 Ironruby 在 Silverlight 应用程序中创建计时器？

> ID：10664378
> 
> 赞同：0
> 
> 时间：2012-05-19T10:31:15.330
> 
> 标签：silverlight, timer, ironruby

我想在客户端的浏览器中重复调用一些函数。
System::Timers::Timer 只在服务器端工作我怎么知道......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:23:05.937

在 Silverlight 中，您可以使用[System::Threading::Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer%28v=vs.95%29.aspx)或[System::Windows::Threading::DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer%28v=vs.95%29.aspx)。如果您的计时器回调主要与 UI 交互，请使用 DispatcherTimer，否则使用常规 Timer。

# android - Android中的文本分页

> ID：10664380
> 
> 赞同：4
> 
> 时间：2012-05-19T10:31:33.547
> 
> 标签：android, text, pagination, textview

如何进行文本分页`Android` `TextView`？如何将长文本分成页面？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:51:45.977

关于这个话题已经有相当多的讨论了，在我看来，还没有一个好的解决方案。

这是我最终使用的解决方案：[HTML book-like pagination](https://stackoverflow.com/questions/3636052/html-book-like-pagination)。看看 Nacho L 对已接受答案的实现。它在 Android 中也运行得相当好......虽然它有点错误，但根据我的经验，如果 html 内容中有图像或长字符串。

也许值得花时间为此编写一个新视图。

# android - 在android的edittext中插入textview？

> ID：10664386
> 
> 赞同：5
> 
> 时间：2012-05-19T10:32:29.500
> 
> 标签：android, textview, android-edittext, android-custom-view

我正在尝试在 Edittext 中插入一个 textview，如下所示

![在此处输入图像描述](../Images/81861ecaa2d7ab02f07979537f1b1959.png)

任何人都可以给我关于如何实现它或其他东西的想法。

谢谢 ：）

**更新：** edittext 中的文本视图会动态变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T10:55:31.477

试试这个示例代码。它符合您的要求。

```
PopupWindow pw = new PopupWindow(
                                 this.getViewInflate().inflate(R.layout.pw_layout, 
                                                               null, true, null), 
                                100,100,true);
// display the popup in the center
pw.showAtLocation(layout, Gravity.CENTER, 0, 0);
pw.update(20,20,100,100); 
```

对于内部视图`EditText`，您必须扩展`EditText`. 它的外观概述如下。

```
class emailEditText extends EditText {

List<NamePhotoView> ViewlistOfSelectedContacts; // create new

    void addContact(String name, Bitmap photo) {
       // create a new 'NamePhotoView' and add to the ViewlistOfSelectedContacts
    }

    @Override
    void onDraw(Canvas canvas) {
        for (....) {
            // draw all views from the list. left to right.
        }
    // you have to some how offset the text start coordinate. then call super
    super.onDraw(canvas);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T07:59:22.683

我认为你不能`TextView`在里面设置`EditText`。但或者你可以让它看起来那样。以下是步骤

1.  将文本视图转换为`BitmapDrawable`
2.  将可绘制的位图转换为`SpanableString`( `ImageSpan`)
3.  然后将其设置`SpannableString`为您的`EditText`

我最近完成了这种 ui，我在我的博客中解释了[使 GoSmsPro/Evernote 像 EditText](http://krishnalalstha.wordpress.com/2012/06/07/making-gosmsproevernote-like-edittext/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T10:45:41.823

Android 实现它的方式，即所谓的**Chips UI**，可以在[这里](https://android.googlesource.com/platform/frameworks/ex/+/refs/heads/master/chips)找到。
本质上，它是一种[`span`](http://blog.stylingandroid.com/archives/177)在文本上绘制组件（图像、文本等）的自定义，以及一些显示弹出窗口的逻辑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T10:56:53.040

您可以像上面提到的框架布局一样根据您的需要创建一个组件。当文本视图位于 EditText 之上时，您可能有一个带有两个视图的 FrameLayout 或 RelativeLayout，例如 EditText 和 TextView。如果你想要像你的图片一样，你也可以把图像视图放在右边。

尽管您不需要创建组件并且可以轻松地在 XML 布局中执行此操作，但如果您计划在应用程序中定期使用它，最好将这些视图创建为组件。

# extjs - 从 sencha 网站运行示例“源代码”，导致错误

> ID：10664388
> 
> 赞同：0
> 
> 时间：2012-05-19T10:32:49.057
> 
> 标签：extjs, extjs4, sencha-charts

我正在尝试修改[此网站](http://docs.sencha.com/ext-js/4-0/#!/example/charts/RadarFill.html)中的示例。我在 GoogleChrome 上运行此示例，但是编译器或其他任何东西都给了我以下错误

> “未捕获的 ReferenceError：未定义 store1”。

在我的浏览器中，我输入以下内容：localhost/helloext/index.html，我希望看到的结果是，RadarFillExample 与上述网站一样。

index.html 包含以下内容：

```
<html>
<head>
<title>Hello Ext</title>
   <link rel="stylesheet" type="text/css" href="extjs/resources/css/ext-all.css">
   <script type="text/javascript" src="extjs/ext-debug.js"></script>
   <script type="text/javascript" src="app2.js"></script>
</head>
<body></body>
</html> 
```

app2.js 包含上述网站中可用的源代码。

并且文件（index.html、app2.js 和 extjs 目录）位于 D:\xampp\htdocs\helloext\

谁能告诉我如何解决此错误，以便我可以修改代码？

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T10:41:49.580

从错误消息中可以清楚地看出，您名为 store1 的商店未定义。

该示例的数据存储来自另一个文件，即：example-data.js。您的应用程序应该有权访问此文件，或者您应该定义一个包含适当数据的存储以绘制图形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T00:38:43.893

已经一年了，但我今天遇到了这个问题，并想分享一个解决方案。

是的，您缺少要从 HTML 页面引用的 example-data.js 文件。此 .js 文件创建图表中填充的数据。

example-data.js 可以在 extjs/examples/example-data.js 下找到。注意：extjs 是您从 sencha.com 下载的解压文件夹。

# java - Java NotSerializableException - AquaPainter

> ID：10664389
> 
> 赞同：1
> 
> 时间：2012-05-19T10:32:52.690
> 
> 标签：java, serialization, stack-trace

我一直在尝试用序列化来解决我的问题，不幸的是我迷路了。如果有人可以帮助我找到问题，我将不胜感激。我已经在每个类中实现了 Serializable。

已解决：问题是，一个类实现了 Serializable 并扩展了 AbstractTableModel。我为表模型创建了新的类，问题就消失了。

```
IO java.io.NotSerializableException: com.apple.laf.AquaPainter$AquaSingleImagePainter
- field (class "com.apple.laf.AquaTableHeaderBorder", name: "painter", type: "class com.apple.laf.AquaPainter")
- object (class "com.apple.laf.AquaTableHeaderBorder", com.apple.laf.AquaTableHeaderBorder@77eb5239)
- field (class "javax.swing.JComponent", name: "border", type: "interface javax.swing.border.Border")
- custom writeObject data (class "javax.swing.JComponent")
- object (class "sun.swing.table.DefaultTableCellHeaderRenderer", sun.swing.table.DefaultTableCellHeaderRenderer[Table.cellRenderer,-150,-16,0x0,invalid,alignmentX=0.0,alignmentY=0.0,border=com.apple.laf.AquaTableHeaderBorder@77eb5239,flags=25165832,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,horizontalAlignment=CENTER,horizontalTextPosition=TRAILING,iconTextGap=4,labelFor=,text=Cena,verticalAlignment=CENTER,verticalTextPosition=CENTER])
- field (class "javax.swing.table.JTableHeader", name: "defaultRenderer", type: "interface javax.swing.table.TableCellRenderer")
- custom writeObject data (class "javax.swing.table.JTableHeader")
- object (class "javax.swing.table.JTableHeader", javax.swing.table.JTableHeader[,0,0,450x16,invalid,alignmentX=0.0,alignmentY=0.0,border=,flags=16777544,maximumSize=,minimumSize=,preferredSize=,draggedDistance=0,reorderingAllowed=true,resizingAllowed=true,updateTableInRealTime=true])
- custom writeObject data (class "javax.swing.event.EventListenerList")
- object (class "javax.swing.event.EventListenerList", EventListenerList: 2 listeners:  type javax.swing.event.TableColumnModelListener listener javax.swing.JTable[,0,0,450x16,invalid,alignmentX=0.0,alignmentY=0.0,border=,flags=251674952,maximumSize=,minimumSize=,preferredSize=,autoCreateColumnsFromModel=true,autoResizeMode=AUTO_RESIZE_SUBSEQUENT_COLUMNS,cellSelectionEnabled=false,editingColumn=-1,editingRow=-1,gridColor=javax.swing.plaf.ColorUIResource[r=255,g=255,b=255],preferredViewportSize=java.awt.Dimension[width=450,height=400],rowHeight=16,rowMargin=1,rowSelectionAllowed=true,selectionBackground=com.apple.laf.AquaImageFactory$SystemColorProxy[r=49,g=102,b=202],selectionForeground=com.apple.laf.AquaImageFactory$SystemColorProxy[r=255,g=255,b=255],showHorizontalLines=true,showVerticalLines=true] type javax.swing.event.TableColumnModelListener listener javax.swing.table.JTableHeader[,0,0,450x16,invalid,alignmentX=0.0,alignmentY=0.0,border=,flags=16777544,maximumSize=,minimumSize=,preferredSize=,draggedDistance=0,reorderingAllowed=true,resizingAllowed=true,updateTableInRealTime=true])
- field (class "javax.swing.table.DefaultTableColumnModel", name: "listenerList", type: "class javax.swing.event.EventListenerList")
- object (class "javax.swing.table.DefaultTableColumnModel", javax.swing.table.DefaultTableColumnModel@4621e873)
- field (class "javax.swing.JTable", name: "columnModel", type: "interface javax.swing.table.TableColumnModel")
- custom writeObject data (class "javax.swing.JTable")
- object (class "javax.swing.JTable", javax.swing.JTable[,0,0,450x16,invalid,alignmentX=0.0,alignmentY=0.0,border=,flags=251658568,maximumSize=,minimumSize=,preferredSize=,autoCreateColumnsFromModel=true,autoResizeMode=AUTO_RESIZE_SUBSEQUENT_COLUMNS,cellSelectionEnabled=false,editingColumn=-1,editingRow=-1,gridColor=javax.swing.plaf.ColorUIResource[r=255,g=255,b=255],preferredViewportSize=java.awt.Dimension[width=450,height=400],rowHeight=16,rowMargin=1,rowSelectionAllowed=true,selectionBackground=com.apple.laf.AquaImageFactory$SystemColorProxy[r=49,g=102,b=202],selectionForeground=com.apple.laf.AquaImageFactory$SystemColorProxy[r=255,g=255,b=255],showHorizontalLines=true,showVerticalLines=true])
- custom writeObject data (class "javax.swing.event.EventListenerList")
- object (class "javax.swing.event.EventListenerList", EventListenerList: 1 listeners:  type javax.swing.event.TableModelListener listener javax.swing.JTable[,0,0,450x16,invalid,alignmentX=0.0,alignmentY=0.0,border=,flags=251658568,maximumSize=,minimumSize=,preferredSize=,autoCreateColumnsFromModel=true,autoResizeMode=AUTO_RESIZE_SUBSEQUENT_COLUMNS,cellSelectionEnabled=false,editingColumn=-1,editingRow=-1,gridColor=javax.swing.plaf.ColorUIResource[r=255,g=255,b=255],preferredViewportSize=java.awt.Dimension[width=450,height=400],rowHeight=16,rowMargin=1,rowSelectionAllowed=true,selectionBackground=com.apple.laf.AquaImageFactory$SystemColorProxy[r=49,g=102,b=202],selectionForeground=com.apple.laf.AquaImageFactory$SystemColorProxy[r=255,g=255,b=255],showHorizontalLines=true,showVerticalLines=true])
- field (class "javax.swing.table.AbstractTableModel", name: "listenerList", type: "class javax.swing.event.EventListenerList")
- object (class "zakaznik.Host", Zakaznik{nazev=rychly0, ucetDPH=27.0})
- custom writeObject data (class "java.util.ArrayList")
- object (class "java.util.ArrayList", [Zakaznik{nazev=rychly0, ucetDPH=27.0}])
- field (class "zakaznik.Zakaznici", name: "rychly", type: "interface java.util.List")
- root object (class "zakaznik.Zakaznici", zakaznik.Zakaznici@60ab6b6f) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T11:19:37.597

从跟踪中您可以看到 zakaznik.Host 有一个对 AbstractTableModel 的字段引用，这是一个 Swing 类。序列化 GUI 没有意义。最快的解决方法是将其标记为瞬态，但您的应用程序架构可能需要更改。

# php - Redis在php中具有多维数组

> ID：10664394
> 
> 赞同：2
> 
> 时间：2012-05-19T10:33:45.680
> 
> 标签：php, arrays, multidimensional-array, nosql, redis

我正在尝试通过使用 HMSET 将 redis 与多维数组一起使用。
我的数组看起来像这样。

```
Array
(
    [t] => Hello
    [a] => This
    [c] => key
    [b] => 23
    [data] => Array
        (
            [1] => some value
            [more] => value
        )

) 
```

有什么方法可以使用 predis 库以这种格式将数据存储在 redis 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-30T12:05:54.577

更好的方法是通过`json_encode`PHP 中的数组并将其存储*在*Redis 中

```
$string = json_encode(Array
(
    [t] => Hello
    [a] => This
    [c] => key
    [b] => 23
    [data] => Array
        (
            [1] => some value
            [more] => value
        )   
)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T11:58:28.673

是的，Redis 能够存储[字符串](http://redis.io/topics/data-types)，PHP 能够将（多维）数组序列化为字符串。

示例中的[`serialize`函数](http://php.net/serialize)可用于该确切工作，但只是示例性的，您可以使用任何将数据序列化为（二进制）字符串的序列化方法。

例如，您可以使用 JSON ( [`json_encode`](http://php.net/json_encode))、[XML](http://php.net/refs.xml)或在某些情况下[`implode`](http://php.net/implode)可能适合。

```
$string = serialize(Array
(
    [t] => Hello
    [a] => This
    [c] => key
    [b] => 23
    [data] => Array
        (
            [1] => some value
            [more] => value
        )

));

$cmdSet = $redis->createCommand('set');
$cmdSet->setArgumentsArray(array('thisispredisdoingredis', $string)); 
```

# scala - Scala的编译器缓存？

> ID：10664395
> 
> 赞同：5
> 
> 时间：2012-05-19T10:33:54.533
> 
> 标签：scala, caching, compiler-construction, build

Scala 中的编译相当慢。有没有希望让它更快？

我想到的一件事是 Scala 相当于 ccache：编译器不必重新编译某些部分的缓存。我知道类型推断会使事情变得更复杂，但我想知道它是否可行。也许缓存应该在不同的级别（例如 AST）上完成，或者它需要进行某种预处理。

如果存在这种工具，我将很高兴看到一些估计可以节省多少。构建它需要解决什么样的挑战？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:33:26.330

与只重新编译所需内容的 SBT 一样，[JRebel](http://zeroturnaround.com/software/jrebel/)有助于解决这个问题并支持 Scala。

# java - PDF 创建在指定位置不起作用

> ID：10664396
> 
> 赞同：0
> 
> 时间：2012-05-19T10:33:56.303
> 
> 标签：java, mysql

我想从我的数据库中的 blob 字段创建一个 pdf。如果我不指定文件位置，它就可以正常工作：生成 pdf 并且可读。但是，如果我指定一个文件位置，我会得到一个`nullpointerexception`.

文件位置位于属性文件中。

```
/**
 * Deze methode zoekt een pdf in de database op pdfnaam
 * 
 * @param name, de naam van de pdf
 * @return maakt de pdf aan
 */
public void retrievePdf(int iddocument) {
    Properties prop = new Properties();
    String fileLocation = new String("");
    FileOutputStream fos = null;

    try {
        // load a properties file
        prop.load(new FileInputStream("props/config.properties"));

        // get the property value and use it
        fileLocation = prop.getProperty("FileLocation");

        // verwijderen
        System.out.println(fileLocation);

    } catch (IOException ex) {
        ex.printStackTrace();
    }

    try {
        c = MySqlDAOFactory.getInstance().getConnection();

        String sql = "select * from pdf where iddocument=?";
        prest = c.prepareStatement( sql );
        prest.setInt(1, iddocument);
        rs = prest.executeQuery();

        while (rs.next()) { 
            // create file with the filename from 
            // the db in the dir fileLocation
            File file = new File(fileLocation, rs.getString( "pdfname" ) );
            //get the blob from the db
            Blob blob = rs.getBlob( "pdffile" );
            InputStream is = blob.getBinaryStream();   
            try {
                fos = new FileOutputStream(file);
            } catch (FileNotFoundException e) {
                // ...
            }  
            byte [] buffer = new byte[(int)blob.length()];
            int length = -1;
            try {
                while( ( length = is.read( buffer ) ) != -1 ) {
                    try {
                        fos.write(buffer, 0, length);
                    } catch (IOException e) {
                        // ...
                    }
                    try {
                        fos.flush();
                        fos.close();
                    } catch (IOException e) {
                        // ...
                    }
                }
            } catch (IOException e) {
                // ...
            }

            return;
        }
    } catch (SQLException e) {
        // ...
    } finally {
        MySqlConnectionFactory.getInstance().closeResultSet(rs);
        MySqlConnectionFactory.getInstance().closeStatement(prest);
        MySqlConnectionFactory.getInstance().closeConnection(c);
    }
} 
```

在propertyfile中写着：`FileLocation=reports`

谁能给一个建议，为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:16:45.360

解决了 ：

我用 dir 更改了文件的制作，它成功了：

```
File file = new File(fileLocation + File.separator + rs.getString("pdfname"));
                    file.getParentFile().mkdirs(); 
```

# jquery - 了解一段用于过滤的 jQuery 代码

> ID：10664397
> 
> 赞同：1
> 
> 时间：2012-05-19T10:34:44.413
> 
> 标签：jquery, filter

我不明白这一点。这用于过滤不区分大小写：

```
jQuery.expr[':'].Contains = function(a,i,m){

   return (a.textContent
        || a.innerText
        || "").toUpperCase().indexOf(m[3].toUpperCase())>=0;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T10:49:32.840

我们开始吧，编译器风格：

```
(a.textContent || a.innerText || "") 
```

表示以下内容要么在 a.textContent 中定义的字符串上执行，要么在未设置的情况下在 a.innerText 上执行。两者通常都包含给定元素的文本内容，在这种情况下称为“a”。如果没有定义这些字符串，则使用空字符串来防止执行时出现以下错误。

```
.toUpperCase() 
```

将该字符串（来自以下部分的结果）转换为大写，从而消除小写字母和大写字母之间的差异。

```
.indexOf( m[3].toUpperCase() ) 
```

indexOf() 获取位置，给定的参数字符串首先在执行它的字符串中找到。例如，`("Hello").indexOf("e")`将返回 1（请记住，我们从 0 开始计数）。

m[3] 获取名为“m”的数组的第三个元素——不管它是什么。这个元素，此时必须是一个字符串，然后也转换为大写。当我们现在比较两个大写字符串时，整个函数变得不区分大小写。

因此，`indexOf( m[3].toUpperCase() )`将返回“m[3]”在 a.textContent 或 a.innerText 中的位置。

最后一位`>=0`是逻辑运算符。如果 indexOf()-Call 的结果返回 0 或更高，它将在该位置将整个表达式变为“true”。由于 indexOf() 准确地返回这个 - 零或更高 - 如果找到了寻找的字符串，如果`m[3]`在`a.textContent`or中找到，我们有效地得到一个“真” `a.innerText`。

这个值是通过使用前导`return`关键字从函数返回的。

--Lukx

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:54:09.123

代码可以像这样重写，更冗长，也许更容易理解。

```
jQuery.expr[':'].Contains = function(a,i,m){
    var text;

    if (typeof a.textContent !== 'undefined') {
        text = a.textContent;
    } else if (typeof a.innerText !== 'undefined') {
        text = a.innerText;
    } else {
        text = "";
    }

    text = text.toUpperCase();

    if (text.indexOf(m[3].toUpperCase()) >= 0) {
        return true; // text contains the passed parameter
    } else {
        return false; // text didn't contain passed parameter.
    }
}; 
```

# ruby-on-rails - 自相关模型重构和 url

> ID：10664398
> 
> 赞同：0
> 
> 时间：2012-05-19T10:34:58.197
> 
> 标签：ruby-on-rails, model, refactoring, routes, relationship

我正在我的个人网站上建立一个照片库，它的所有数据都是通过它的 API 从 Flickr 中提取的。

我已经在网站上展示了一段时间的相册和照片。这些都很好。

然后我注册了一个高级 Flickr 帐户，并获得了使用收藏来组织我的相册的权限。

然后，我使用它的 API 添加一个 Collection 模型，并将它的所有集合拉过来，并为每个专辑分配一个 parent_id 以指向它的所有者集合。

每个收藏都可以有子收藏，但不能有子收藏和子专辑。

使用这组关系，我已经完成了所有工作：

集合.rb：

```
has_many :children, class_name: "Collection", foreign_key: "parent_id"
belongs_to :parent, class_name: "Collection", foreign_key: "parent_id"
has_many :albums 
```

专辑.rb:

```
has_many :photos, :dependent => :destroy
belongs_to :collection 
```

在我的 Collection 索引操作中，我显示所有顶级集合，然后在每个集合名称上，我链接到相同的索引操作，但传递一个 collection_id，因此当页面重新加载时，它可以使用该 id 来查找以它为父的集合。等等。

如果输入的集合没有子集合，它会检查专辑，如果它们存在，则显示它们。

我想知道的是如何更改我的 URL 以使其更加用户友好。目前，如果我转到我的收藏索引并深入到第二级收藏，则 URL 类似于以下内容：

```
http://localhost:3000/collections?collection=114 
```

这是正确的吗？，你们会怎么做呢？

我只是想要一些想法和建议。此外，如果为集合找到专辑，它会重定向到专辑索引操作并传递集合 id，URL 如下所示：

```
http://localhost:3000/albums?collection=113 
```

对我来说，有些事情似乎不对，我相信有更好的解决方案。

# c# - 使用 Open Office for Image 可填写的 PDF

> ID：10664399
> 
> 赞同：2
> 
> 时间：2012-05-19T10:35:01.800
> 
> 标签：c#, winforms, pdf, itextsharp, openoffice.org

我想使用 Open Office 或开源的东西创建一个可填写的 PDF。使用 Open Office，我创建了可填写的 PDF，它在 Foxit Reader 上运行良好；我们也可以保存它。现在的问题是我在 PDF 中有一个图像，它也应该是可填充的，就像其他字段一样。用户应该能够将他/她的图像放入图像框中并保存。

稍后我将使用 iTextSharp 读取 PDF 以检索字段的值并将其保存在数据库中。除了图像，一切正常。我尝试使用 Open Office 创建图像框，但是当我在 PDF 阅读器中打开它时，我无法更改图片，而且我将如何使用 iTextSharp 读取图像并将其显示在图片框上，以便用户可以将所有数据保存在未来的数据库？

我试过这个，但它显示空值

```
string pdfTemplate = @"c:\Temp\PDF\Untitled 1.pdf";

            var reader = new PdfReader(pdfTemplate);
            var output = new MemoryStream();
            var stamper = new PdfStamper(reader, output);
            //textBox2.Text = stamper.AcroFields.GetField("f1_09(0)");

            Bitmap bimg = new Bitmap(stamper.AcroFields.GetField("ImageControl"));
            System.Drawing.Image tempimg = bimg;

            pictureBox1.Image = tempimg;

            stamper.FormFlattening = true;
            stamper.Close();
            reader.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:00:08.567

无法“将图像放入可填写的表格”。PDF 规范仅支持可填充*文本*，不支持图像...

以下是根据 PDF-1.7 ISO 规范提供的交互式 AcroForm 元素的一般类型列表：

*   *按钮字段*表示用户可以用鼠标操作的屏幕上的交互式控件。它们包括按钮、复选框和单选按钮。
*   *文本字段*是用户可以从键盘输入文本的框或空格。
*   *选择字段*包含多个文本项，最多可以选择其中一个作为字段值。它们包括可滚动的列表框和组合框。
*   *签名字段*表示用于验证签名者姓名和文档内容的数字签名和可选数据。

如您所见，此列表中没有图像...

# javascript - Flexigrid 从本地 json 对象加载数据

> ID：10664406
> 
> 赞同：3
> 
> 时间：2012-05-19T10:35:51.207
> 
> 标签：javascript, jquery, flexigrid

我正在尝试使用以下代码从本地创建的 json 对象填充 flexigrid 表：

```
var rows = new Array();
rows.push({cell: [1, 2, 3] });
rows.push({cell: [11, 22, 33] });
rows.push({cell: [111, 222, 333] });

var data = {
    total: 3,    
    page:1,
    rows: rows
}

$('table').flexAddData(data);//.flexReload(); 
```

但执行此操作后，它只会清空我的表。

[可以在这里看到](http://jsfiddle.net/m93qg/2/)完整和实时的示例

**注意：** ->我注释了试图加载 json 对象的最后一行，因为它清空了表。-> 在这个 jsfiddle 示例中，我使用来自 flexigrid.info 网站的 flexigrid 链接，它在 chrome 中不起作用，在 Firefox 中它起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T13:28:13.060

我想通了，在最初创建 flexigrid 表时，我错过了通过

```
dataType : 'json' 
```

工作副本可以在这里看到：http: [//jsfiddle.net/m93qg/3/](http://jsfiddle.net/m93qg/3/)

# javascript - javascript中使用prompt()方法初始化变量时，初始化变量的类型会是什么？

> ID：10664410
> 
> 赞同：0
> 
> 时间：2012-05-19T10:36:40.040
> 
> 标签：javascript, prompt

我在 Codecademy 的介绍 javascript 教程中搞砸时遇到了这个问题/问题。

对于以下代码行，如果我在弹出框提示时输入整数 5（不带引号），变量 x 最终会是什么类型？同样，如果我输入“幸福”或“182”（带引号），变量 x 的类型是什么？

代码： var x = prompt("请输入一个从 1 到 10 的数字");

摘要：输入：5；x 的类型是什么？输入：“幸福”；x 的类型是什么？输入：“182”；x 的类型是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:37:34.637

结果将是字符串类型，在所有情况下，除非用户取消提示（在这种情况下它将是`null`）。

> `result`是包含用户输入的文本的字符串，或者值为 null。

[https://developer.mozilla.org/en/DOM/window.prompt](https://developer.mozilla.org/en/DOM/window.prompt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:40:04.580

如果取消，它们都将是字符串或 null 。您可以在它们上使用字符串函数。对于数学计算，您需要对其进行解析。

你为什么不自己尝试这些例子呢？

# c# - 未调用按钮单击事件

> ID：10664411
> 
> 赞同：0
> 
> 时间：2012-05-19T10:36:40.137
> 
> 标签：c#, asp.net

我想禁用一个按钮，只使用 javascript。

我在表格上有一个按钮。我想从 javascript 中禁用该按钮。当我尝试这样做时，按钮提交点击事件没有调用。

**我在javascript上使用了以下代码：**

```
document.getElementById('<%=imgSubmit.ClientID%>').disabled = true; 
```

该按钮被禁用；但它在服务器端的按钮单击事件没有被调用。

当我删除此 javascript 时，它正在调用服务器端点击事件。从javascript禁用按钮有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:48:08.330

好吧，如果按钮被禁用，它不会触发服务器端事件。尝试从客户端提交表单。

```
document.getElementById('<%=imgSubmit.ClientID%>').disabled = true; 
Form1.submit(); 
```

# c# - 从 WebClient 流中读取时缺少字节

> ID：10664415
> 
> 赞同：0
> 
> 时间：2012-05-19T10:36:52.283
> 
> 标签：c#

为什么从 WebClient 流中读取时会丢失字节，如下所示？

```
const int chuckDim = 80;

System.Net.WebClient client = new System.Net.WebClient();
Stream stream = client.OpenRead("http://media-cdn.tripadvisor.com/media/photo-s/01/70/3e/a9/needed-backup-lol.jpg");
//Stream stream = client.OpenRead("file:///C:/Users/Tanganello/Downloads/needed-backup-lol.jpg");

//searching file length
WebHeaderCollection whc = client.ResponseHeaders;
int totalLength = (Int32.Parse(whc["Content-Length"]));
byte[] buffer = new byte[totalLength];

//reading and writing
FileStream filestream = new FileStream("C:\\Users\\Tanganello\\Downloads\\clone1.jpg", FileMode.Create, FileAccess.ReadWrite);
int accumulator = 0;
while (accumulator + chuckDim < totalLength) {
    stream.Read(buffer, accumulator, chuckDim);
    filestream.Write(buffer, accumulator, chuckDim);

    accumulator += chuckDim;
}
stream.Read(buffer, accumulator, totalLength - accumulator);
filestream.Write(buffer, accumulator, totalLength - accumulator);

stream.Close();
filestream.Flush();
filestream.Close(); 
```

这是我从第一个流中得到的：http: [//img839.imageshack.us/img839/830/clone1h.jpg](http://img839.imageshack.us/img839/830/clone1h.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T10:41:18.013

问题是您忽略了[Stream.Read 方法](http://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx)的返回值：

> *数数*
> 
> 从当前流中读取的**最大**字节数。
> 
> *返回值*
> 
> 读入缓冲区的总字节数。这可能**小于**请求的字节数

* * *

[您可以通过简单地使用WebClient.DownloadFile 方法](http://msdn.microsoft.com/en-us/library/ez801hhe.aspx)来避免读取和写入流的整个业务：

```
using (var client = new WebClient())
{
    client.DownloadFile(
        "http://media-cdn.tripadvisor.com/media/photo-s/01/70/3e/a9/needed-backup-lol.jpg",
        "C:\\Users\\Tanganello\\Downloads\\clone1.jpg");
} 
```

或者，如果你真的想使用流，你可以简单地使用[Stream.CopyTo 方法](http://msdn.microsoft.com/en-us/library/dd782932.aspx)：

```
using (var client = new WebClient())
using (var stream = client.OpenRead("http://..."))
using (var file = File.OpenWrite("C:\\..."))
{
    stream.CopyTo(file);
} 
```

如果您坚持自己真正复制字节，那么正确的方法如下：

```
using (var client = new WebClient())
using (var stream = client.OpenRead("http://..."))
using (var file = File.OpenWrite("C:\\..."))
{
    var buffer = new byte[512];
    int bytesReceived;
    while ((bytesReceived = stream.Read(buffer, 0, buffer.Length)) != 0)
    {
        file.Write(buffer, 0, bytesReceived);
    }
} 
```

# jquery - 如何选择多个 使用 jquery 拖放

> ID：10664417
> 
> 赞同：0
> 
> 时间：2012-05-19T10:37:06.550
> 
> 标签：jquery, drag-and-drop

> **可能重复：**
> [jQuery Sortable - 选择并拖动多个列表项](https://stackoverflow.com/questions/3774755/jquery-sortable-select-and-drag-multiple-list-items)

我需要拖放多个`<li>`. 目前我可以拖放单个`<li>`。但我无法选择多个`<li>`并删除

```
<ul id="draggable">
    <li class="lclass">1</li>
    <li class="lclass">2</li>
    <li class="lclass">3</li>
    <li class="lclass">4</li>
    <li class="lclass">5</li>
</ul>

<div class="droppable" >
    <p>Drop here</p>
</div> 
```

查询

```
 $(function() {
         $( ".lclass" ).draggable({ revert: true,scroll: false  });
         $( ".droppable" ).droppable({ drop: function( event, ui ) {}  });
    }); 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:01:12.893

您可以使用[jQuery UI 多个可拖动插件](http://www.myphpetc.com/2009/01/jquery-multiple-draggable-elements.html)来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:03:24.993

此波纹管链接可能会对您有所帮助

[https://github.com/someshwara/MultiDraggable](https://github.com/someshwara/MultiDraggable)

# javascript - Javascript：事件重复

> ID：10664422
> 
> 赞同：0
> 
> 时间：2012-05-19T10:37:49.140
> 
> 标签：javascript, jquery, events, asynchronous

我无法弄清楚我的代码有什么问题。我有几个全局变量，每次按下某个按钮时我都会更改它们，还有几个自定义函数执行 ajax 调用，这些函数返回一段带有下面分页的 html 代码，其工作方式如下：

```
 $('#foot #pagination a.page').live('click', function(){
        window.mode = 'partial';        
        window.key = $('input#search').val();           
        window.page = $(this).parent().find('input').val();
        setTimeout('getData();', 0);        
    }); 
```

有时当移动到另一个页面时，事件加倍，我得到了加倍的 html。调用 getData() 时；从浏览器控制台 - 一切正常，就像它必须工作一样。什么会导致这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T21:55:09.447

问题是jQuery`.live()`在文档就绪时将一些数据推送到jQuery堆栈，但是在ajax响应来自服务器并且再次调用文档就绪事件之后 - 在这种情况下`.live()`再次将相同的数据推送到jQuery堆栈，然后导致多个事件主体来电。

我以前用过`.die()`，`.live()`现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:51:41.357

您应该只在 之后执行此函数一次`document.ready`。或者做这样的事情：

```
$('#foot').off('click', '#pagination a.page', navigation) // remove event
          .on('click', '#pagination a.page', navigation); // add event

function navigation(e) {
   window.mode = 'partial';        
   window.key = $('input#search').val();           
   window.page = $(e.currentTarget).parent().find('input').val();
   setTimeout('getData();', 0);        
}); 
```

# java - Java中静态和非静态内部类之间的非语法差异是什么？

> ID：10664424
> 
> 赞同：6
> 
> 时间：2012-05-19T10:37:50.480
> 
> 标签：java, static, inner-classes, non-static

> **可能重复：**
> [Java 内部类和静态嵌套类](https://stackoverflow.com/questions/70324/java-inner-class-and-static-nested-class)

静态内部类的实例不能访问其封闭类的实例成员，而非静态内部类的实例可以。这就是我所说的句法差异。因为是否声明一个内部类是静态的，决定了你程序的语法是否正确。

但是还有其他不属于 Java 语法的区别吗？假设 A 类是顶级类，B 类是 A 的内部类。如果我不打算在 B 中访问 A 的实例成员，那么我应该将 B 声明为静态的。但由于我不需要这样做，我可以将 B 声明为非静态的，并且不会出现编译错误。那么在这种情况下，是否有任何区别，可能是生成的字节码，或者任何运行时区别？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T10:39:56.797

差异远不止于此。`static`内部类可以从外部创建`class`，没有类的实例，非静态类不能。

您可以访问封闭类成员的事实是这样的结果，因为`static`内部类未绑定到封闭类的实例，但非绑定类`static`。

# jquery - 使用可点击按钮的 Jquery 多项选择测验

> ID：10664428
> 
> 赞同：1
> 
> 时间：2012-05-19T10:38:20.440
> 
> 标签：jquery

我是 Jquery 的初学者。我想创建一个包含 30 多个问题的多项选择测验。每个问题都有四个选项分配给 4 个可点击的 CSS 按钮 - 不是单选按钮）。用户只需单击一个按钮即可做出选择。每个按钮都会触发一个脚本（在单击功能中），并且根据单击的按钮（例如按钮 A）将一个点或没有点分配给内存中的变量，然后自动将一组新问题分页到替换前一组。这一直持续到 30 道题库的末尾，然后（并且仅在那时）总分显示在屏幕上。我希望相同的按钮（A、B、C、D）始终显示在屏幕上，而不需要 CSS 重写它们，但是每个按钮被重新分配一个不同的正确或不正确的脚本（例如，这次问题 C 是正确的并且，如果点击，

很容易将 30 组不同问题的题库复制到 html 文件中，但必须有更优雅的方式来将代码从一个按钮切换到另一个按钮，这取决于要单击的正确按钮，而不必使用那么多线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:37:57.350

另一种简单的方法是将javascript属性添加到复选框...

例如

```
element.answer = true;
...
elements.filter(function(cb, index){      return cb.answer === true && cb.checked; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:42:37.017

您始终可以使用两个数组，其中一个放置正确和不正确的代码，然后是另一个二维数组，每个问题和每个答案都有一个包含代码的数组的索引。

当您遇到某个问题时，循环遍历 2D 数组的该部分并将代码附加到每个答案。

例如：

```
var codeArray = [notCorrect, correct]; // your functions you have defined, that are called when the answer is correct or not correct.
var answerArray = [
  [1, 0, 0, 0],
  [0, 1, 0, 0], 

  // ... etc ...

  [1, 0, 0, 0],
];

$('.button').click (function (event) {
  // get questionNumber and answerNumber
  codeArray[answerArray[questionNumber-1][answerNumber-1]](); // call the function, and mind the 0 indices!
} 
```

* * *

**编辑**，更多信息：

数组可以这样定义：

```
var myArray = [0, 1, 2, 3, 4, 5]; 
```

您可以在每个“插槽”中放置任何值。在我的示例中，我只使用`1`'s 和`0`'s。要访问数组中的这些数字，请使用方括号 ( `[]`)。

您还可以将函数放入数组中（在我的示例中，`codeArray`. 您甚至可以提供匿名函数，如下所示：

```
var codeArray = [function () { alert("Not correct"); }, function () { alert("Correct!"); }]; 
```

最后几行代码是任何`.button`点击的点击处理程序。如果用户单击带有 class 的按钮，`button`则触发此功能。

我希望这对您有所帮助，如果您对此不了解，请阅读一些 JavaScript 书籍，并获得更多的教育。

# python - Python 将 long 转换为 date

> ID：10664430
> 
> 赞同：7
> 
> 时间：2012-05-19T10:38:35.847
> 
> 标签：python, datetime

我正在尝试将 long 转换为日期：

```
class timeStamp(object):
     def getDateTime(self,longDate):                                                                                                                                 
         myNumber = float(longDate)
         return str(datetime.datetime.fromtimestamp(time.ctime(myNumber)).strftime('%Y-%m-%d %H:%M:%S')) 
```

但我有一个奇怪的错误：

```
 File "./index.py", line 104, in getDateTime
    return str(datetime.datetime.fromtimestamp(time.ctime(myNumber)).strftime('%Y-%m-%d %H:%M:%S'))
TypeError: a float is required 
```

为什么当我明确地将它转换为浮动时它会抱怨？long 是在 mysql 中存储为 long 的 Unix 时间戳。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-19T10:50:35.257

`time.ctime()`给你时间的字符串表示。

它应该与：

```
datetime.datetime.fromtimestamp(myNumber).strftime('%Y-%m-%d %H:%M:%S') 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-19T10:50:47.957

您需要的只是 `datetime.datetime.fromtimestamp(myNumber).strftime('%Y-%m-%d %H:%M:%S')`返回`time.ctime()`一个字符串：

```
>>> time.ctime()
'Sat May 19 13:46:09 2012' 
```

# php - 将 PHP 变量从表单传递到 URL

> ID：10664432
> 
> 赞同：0
> 
> 时间：2012-05-19T10:38:57.133
> 
> 标签：php, html

我试图将一个从表单创建的 php 变量传递给 url/ 以在另一个页面上使用。我可能会以完全错误的方式去做，我不确定。

```
//THE FORM

<form><input style="height:35px; width:520px; font-family:Arial, Helvetica, sans-serif; font-size:24px; text-align:center;" type="text" name="fbid" /></form>

//PHP TO GET THE TEXT FROM THE TEXT INPUT BOX

<?php
$id = $_GET['fbid'];
?>

//THE IMAGE/BUTTON THAT SENDS THE USER TO THE VARIABLE URL

<img src="images/FacebookSite_32.gif" width="333" height="59" alt="" onclick="location.href='page.php?id=<?php echo $id; ?>'"> 
```

因此，我试图获取在文本输入框中输入的文本，并将其传递给 URL，以便在另一个页面上使用。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:09:30.470

PHP 在服务器上运行，所以当用户看到表单时，PHP 已经运行并将一个空字符串放入您的 javascript。

你最好只使用javascript来做这个：

```
<form>
    <input style="some style stuff here..." type="text" name="fbid" />
</form>

<img src="images/FacebookSite_32.gif" width="333" height="59"
     onclick="location.href='page.php?id='+document.forms[0].elements[0].value" /> 
```

此代码假定页面上只有一个表单，并且您想要的值在第一个 ( `0`th) 元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:08:54.823

尝试这个：

```
//THE FORM

<form action="" method="GET">
<input style="height:35px; width:520px; font-family:Arial, Helvetica, sans-serif; font-size:24px; text-align:center;" type="text" name="fbid" />
<input type="submit">
</form>

//PHP TO GET THE TEXT FROM THE TEXT INPUT BOX

<?php
$id = (int)$_GET['fbid'];
?>

//THE IMAGE/BUTTON THAT SENDS THE USER TO THE VARIABLE URL

<img src="images/FacebookSite_32.gif" width="333" height="59" alt="" onclick="location.href='page.php?id=<?php echo $id ?>'"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T11:17:24.000

尝试这个：

```
 <form action="<?php echo $_SERVER['PHP_SELF']; ?>" methode="GET" > 
  <input style="height:35px; width:520px; font-family:Arial, Helvetica, sans-serif; font-size:24px; text-align:center;" type="text" name="fbid" />
  <input type="submit" value="submit" name="submit" />
    </form>

<?php

if(isset($_GET['fbid'])){
   $id = $_GET['fbid'];
   echo $id;
 }
   ?> 
```

# c# - 如何更改已存在的 Binding 的 Path？

> ID：10664433
> 
> 赞同：0
> 
> 时间：2012-05-19T10:39:03.617
> 
> 标签：c#, wpf, binding

我在这里有一个文本框

```
<TextBox ...>
    <TextBox.Text>
        <Binding Path="MinStepDiff" UpdateSourceTrigger="PropertyChanged">
            <Binding.ValidationRules>
                <local:ImpellerArgsRule IsCanBeZero ="false"/>
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

它的内容依赖于其他 ComboBox

```
<ComboBox ...>
    <ComboBoxItem Content="Sample1"/>
    <ComboBoxItem Content="Sample2"/>
    <ComboBoxItem Content="Sample3"/>
</ComboBox> 
```

如果选择`Sample1`或`Sample3`，则 TextBox 应绑定到`MinStepDiff`

如果选中，则`Sample2`TextBox 应绑定到`MinTolerance`

它们都是对象的属性。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T01:46:31.513

你可以使用一个`DataTrigger`. 为此，您必须创建一个样式并`ComboBox`命名（此处为“cb”）。因为它更容易我绑定`SelectedIndex`而不是`SelectedItem`.

```
<TextBox>
    <TextBox.Style>                
        <Style TargetType="TextBox">
            <Setter Property="Text">
                <Setter.Value>
                    <Binding Path="MinStepDiff" UpdateSourceTrigger="PropertyChanged">
                        <Binding.ValidationRules>
                            <local:ImpellerArgsRule IsCanBeZero="false" />
                        </Binding.ValidationRules>
                    </Binding>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <DataTrigger Binding="{Binding SelectedIndex, ElementName=cb}" Value="1">
                    <Setter Property="Text">
                        <Setter.Value>
                            <Binding Path="MinTolerance" UpdateSourceTrigger="PropertyChanged" />
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox> 
```

# java - 转义 Java 正则表达式中的特殊字符

> ID：10664434
> 
> 赞同：38
> 
> 时间：2012-05-19T10:39:10.580
> 
> 标签：java, regex, escaping

Java 或任何开源库中是否有任何方法可以转义（不引用）特殊字符（元字符），以便将其用作正则表达式？

这在动态构建正则表达式时非常方便，无需手动转义每个单独的字符。

例如，考虑一个简单的正则表达式`\d+\.\d+`，它匹配带有小数点的数字，如`1.2`，以及以下代码：

```
String digit = "d";
String point = ".";
String regex1 = "\\d+\\.\\d+";
String regex2 = Pattern.quote(digit + "+" + point + digit + "+");

Pattern numbers1 = Pattern.compile(regex1);
Pattern numbers2 = Pattern.compile(regex2);

System.out.println("Regex 1: " + regex1);

if (numbers1.matcher("1.2").matches()) {
    System.out.println("\tMatch");
} else {
    System.out.println("\tNo match");
}

System.out.println("Regex 2: " + regex2);

if (numbers2.matcher("1.2").matches()) {
    System.out.println("\tMatch");
} else {
    System.out.println("\tNo match");
} 
```

毫不奇怪，上述代码产生的输出是：

```
Regex 1: \d+\.\d+
    Match
Regex 2: \Qd+.d+\E
    No match 
```

也就是说，`regex1`匹配`1.2`but `regex2`（它是“动态”构建的）不匹配（相反，它匹配文字 string `d+.d+`）。

那么，是否有一种方法可以自动转义每个正则表达式元字符？

如果有，比方说，一个静态`escape()`方法`java.util.regex.Pattern`，输出

```
Pattern.escape('.') 
```

将是字符串`"\."`，但是

```
Pattern.escape(',') 
```

应该只产生`","`，因为它不是元字符。相似地，

```
Pattern.escape('d') 
```

可以产生`"\d"`, since`'d'`用于表示数字（尽管在这种情况下转义可能没有意义，因为它`'d'`可能意味着字面`'d'`量 ，正则表达式解释器不会将其误解为其他东西，就像 的情况一样`'.'`）。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-19T12:11:11.960

> Java 或任何开源库中是否有任何方法可以转义（不引用）特殊字符（元字符），以便将其用作正则表达式？

如果您正在寻找一种方法来创建可以在您的正则表达式模式中使用的常量，那么只需在它们前面加上`"\\"`应该可以工作，但没有很好的`Pattern.escape('.')`功能可以帮助解决这个问题。

因此，如果您尝试匹配`"\\d"`（字符串`\d`而不是十进制字符），那么您将执行以下操作：

```
// this will match on \d as opposed to a decimal character
String matchBackslashD = "\\\\d";
// as opposed to
String matchDecimalDigit = "\\d"; 
```

Java 字符串中的 4 个斜杠在正则表达式模式中变成了 2 个斜杠。正则表达式模式中的 2 个反斜杠与反斜杠本身匹配。在任何特殊字符前面加上反斜杠会将其变成普通字符而不是特殊字符。

```
matchPeriod = "\\.";
matchPlus = "\\+";
matchParens = "\\(\\)";
... 
```

在您的帖子中，您使用[`Pattern.quote(string)`方法](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)。此方法将您的模式包装在和之间`"\\Q"`，`"\\E"`因此您可以匹配一个字符串，即使它恰好有一个特殊的正则表达式字符（`+`, `.`,`\\d`等）

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-09-15T17:25:34.037

我写了这个模式：

```
Pattern SPECIAL_REGEX_CHARS = Pattern.compile("[{}()\\[\\].+*?^$\\\\|]"); 
```

并在此方法中使用它：

```
String escapeSpecialRegexChars(String str) {

    return SPECIAL_REGEX_CHARS.matcher(str).replaceAll("\\\\$0");
} 
```

然后你可以像这样使用它，例如：

```
Pattern toSafePattern(String text)
{
    return Pattern.compile(".*" + escapeSpecialRegexChars(text) + ".*");
} 
```

我们需要这样做，因为在转义之后，我们添加了一些正则表达式。如果没有，您可以简单地使用`\Q`and `\E`：

```
Pattern toSafePattern(String text)
{
    return Pattern.compile(".*\\Q" + text + "\\E.*")
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-19T10:47:20.740

正则表达式匹配器知道您在寻找数字而不是字母的唯一方法`d`是转义字母 ( `\d`)。要在 java 中键入正则表达式转义字符，您需要对其进行转义（因此`\`变为`\\`）。因此，没有办法为特殊的正则表达式字符键入双反斜杠。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-05-24T21:39:03.170

`Pattern.quote(String s)`那种做你想做的事。然而，它还有一些不足之处。它实际上并没有转义单个字符，只是用`\Q...\E`.

没有一种方法可以完全满足您的需求，但好消息是，在 Java 正则表达式中转义所有特殊字符实际上相当简单：

```
regex.replaceAll("[\\W]", "\\\\$0") 
```

为什么这行得通？好吧，文档[`Pattern`](https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#bs)专门说它允许转义不一定必须转义的非字母字符：

> 在任何不表示转义结构的字母字符之前使用反斜杠是错误的；这些是为将来对正则表达式语言的扩展而保留的。**可以在非字母字符之前使用反斜杠，无论该字符是否是未转义结构的一部分。**

例如，`;`不是正则表达式中的特殊字符。但是，如果你逃避它，`Pattern`仍然会解释`\;`为`;`. 这里还有几个例子：

*   `>`变成`\>`相当于`>`
*   `[`成为`\[`的转义形式`[`
*   `8`还在`8`。
*   `\)`成为`\\\)`它是转义形式`\`和`(`连接。

**注意：**关键是“非字母”的定义，在文档中真正的意思是“非*单词*”字符，或者字符集之外的字符`[a-zA-Z_0-9]`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-01-08T08:00:27.100

使用此实用程序***函数***可以`escapeQuotes()`转义***.*****[`RegualrExpression`](https://www.regular-expressions.info/)**

 ***要转义的正则表达式文字列表[**`<([{\^-=$!|]})?*+.>`**](https://docs.oracle.com/javase/tutorial/essential/regex/literals.html)*

```
public class RegexUtils {
    static String escapeChars = "\\.?![]{}()<>*+-=^$|";
    public static String escapeQuotes(String str) {
        if(str != null && str.length() > 0) {
            return str.replaceAll("[\\W]", "\\\\$0"); // \W designates non-word characters
        }
        return "";
    }
} 
```

*从[**Pattern**](https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html)类中，反斜杠字符`('\')`用于引入转义结构。字符串文字`"\(hello\)"`是非法的，会导致编译时错误；为了匹配字符串 (hello)，`"\\(hello\\)"`必须使用字符串文字。*

***示例***：要匹配的字符串`(hello)`和带有组的正则表达式是`(\(hello\))`. 在此处形成您只需要转义匹配的字符串，如下所示。^([`Test Regex online`](https://regex101.com/))

```
public static void main(String[] args) {
    String matched = "(hello)", regexExpGrup = "(" + escapeQuotes(matched) + ")";
    System.out.println("Regex : "+ regexExpGrup); // (\(hello\))
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-09T01:49:04.267

同意 Gray，因为您可能需要您的模式同时具有文字（\[，\]）和元字符（[，]）。所以使用一些实用程序，您应该能够首先转义所有字符，然后您可以添加要添加到相同模式的元字符。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-28T09:57:33.520

利用

```
pattern.compile("\"");
String s= p.toString()+"yourcontent"+p.toString(); 
```

将按原样给出`yourcontent`结果**

# jquery - 无法让嵌套的 ajax jquery 表单工作

> ID：10664436
> 
> 赞同：0
> 
> 时间：2012-05-19T10:39:20.963
> 
> 标签：jquery, ajax, plugins, nested

我在使用带有选择器的嵌套 ajax 调用时遇到问题。我有一段名为“mysection”的html代码被对$（“mysection”）.load（“/nextpage”）的ajax调用替换。“nextpage”是一个准系统html表单，id =“signin”，使用ajax jquery 表单来操作数据。所以我的 jquery 代码基本上是这样的：

```
 $(document).ready(function() {
     $("#signin").submit(function() {
          $(this).ajaxSubmit(options);
          return false;
     });
 }); 
```

如果我运行它，我会得到一个错误： Uncaught TypeError: Object # has no method ajaxSubmit 但是，如果我不使用 ajax 的 $().load() 调用而正常进入“下一页”（self.location=），一切工作正常。我尝试通过用“#signin”和“mysection”替换“this”来解决这个问题，但它们都不起作用。请帮忙，我真的希望表单动态加载到页面上，而不刷新整个页面。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:45:14.333

我不确定是否可以与 Submit 机制进行交互（了解可以触发它，但我认为出于安全原因，无法更改它上传数据的方式）。

你可以做两件事：

1.  监听 onSubmit，重载数据加载（意味着表单永远不会自己“加载”，你只需捕获事件并转移到 ajax 加载）
2.  赶上提交，隐藏您的表单并显示包含您要加载的内容的 iFrame。

# php - 在循环内外声明的数组在 php mysql 中给出不同的结果

> ID：10664437
> 
> 赞同：-1
> 
> 时间：2012-05-19T10:39:28.927
> 
> 标签：php, arrays, json

为什么我的数组在while循环中有不同的输出，就像它从json中的数据库中获取所有数据一样，但是一旦我将while循环之外的数组声明为注释掉，它就会在json中输出单行？我错过了一些基本的东西还是什么？提前致谢

```
$query = "SELECT * from creative ORDER BY rand()";

$rs = mysql_query($query);

//$arr = array();

while ($obj = mysqli_fetch_object($rs)) {

    $arr[] = $obj;

    $cid = $arr -> id; //get id

} 

if (isset($imei) && !empty($imei)) {

$add = array('delay'=>"1800000"); //Add Objects to JSON Encoded Array

$arr[] = $add;

echo json_encode($arr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:11:02.933

你试过数组推送吗？

```
 $arr = array();
    while ($obj = mysqli_fetch_object($rs)) {

        //$arr[] = $obj;
        array_push($arr, $obj);
        //$cid = $arr -> id; //get id
    } 
```

# wpf - 为什么这个触发器起作用？

> ID：10664439
> 
> 赞同：1
> 
> 时间：2012-05-19T10:39:35.643
> 
> 标签：wpf, attached-properties

只要 TextBlock 有一个空字符串值，底部的代码就会使 DockPanel Visibility=Collapsed ，这就是我想要的。但是，我偶然发生了这件事，我想知道为什么在 TextBlock 中设置 DockPanel.Visibility 附加属性会影响 DockPanel。

我知道 DockPanel.Dock 是一个附加属性，您可以直接在元素中设置，例如

```
 <TextBlock DockPanel.Dock="Top"/> 
```

..但你不能设置

```
 <TextBlock DockPanel.Visibility="Collapsed"/> 
```

..以同样的方式。

那么 DockPanel 是如何知道为 DockPanel.Visibility 查询子元素的，或者父元素是否**总是**查询子元素以获取所有附加属性并在未在本地设置值时使用这些属性？我的印象是只有某些附加属性以这种方式使用（例如 DockPanel.Dock）。

此外，还有什么其他方法可以获得相同的结果（例如，使用在 DockPanel 样式中设置的触发器 - 问题似乎是 errorTextBlock 名称不在范围内）

```
 <DockPanel x:Key="errorDisplay" LastChildFill="False">
            <Border Background="Red" DockPanel.Dock="Top" BorderBrush="Black" BorderThickness="1">
                <TextBlock Padding="4" x:Name="errorTextBlock">
                        <TextBlock.Style>
                            <Style>
                                <Style.Triggers>
                                    <Trigger Property="TextBlock.Text" Value="">
                                    <Setter Property="DockPanel.Visibility" Value="Collapsed"/>
                                    </Trigger>
                                </Style.Triggers>
                             </Style>
                        </TextBlock.Style>
                </TextBlock>
            </Border>            
    </DockPanel> 
```

# version-control - 查看哪些文件未使用 VSS 提交

> ID：10664442
> 
> 赞同：1
> 
> 时间：2012-05-19T10:39:48.070
> 
> 标签：version-control, visual-sourcesafe

我想知道是否有一种方法可以确定文件夹中的哪些文件未在 VSS 8.0.xxxxx 中提交。

VSS 8.0.xxxxx 中的任何功能可以实现这一点吗？

非常感谢，弗拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:15:33.143

您可以将本地文件夹与服务器副本进行[比较来实现此目的。](http://www.kevingao.net/sourcesafe/project-diff.html)

# php - 共享网络驱动器上的数据库，只有客户端？

> ID：10664446
> 
> 赞同：0
> 
> 时间：2012-05-19T10:40:16.220
> 
> 标签：php, jquery, xml, ajax, database

这是我的第一篇文章，我真的找不到解决问题的方法。

我正在为我的办公室开发一个内部团队网站，所有文件都在网络驱动器上。现在我想编写一个新闻系统，我已经设法用 jquery ajax 读取了我的 xml 文件，但发现没有 php/server 就无法写入 xml 文件。

所以这是我迄今为止所做的，在表格中显示所有新闻

```
$(document).ready(function() {
    $.ajax({
       type: "GET",
       url: "db/news.xml",
       dataType: "xml",
       success: function(xml) {
        $(xml).find('news').each(function(){
            var id = $(this).attr('id');
            var title = $(this).find('title').text();
            var author = $(this).find('author').text();
            var date = $(this).find('date').text();
            var content = $(this).find('content').text();
            $('#tabs-1').append("<table class='news' width='1000px'><tr><td width='950px' class='newstitle'>"+title+"</td><td class='newsdate'>"+date+"</td></tr><tr><td colspan='2' class='newscontent'>"+content+"</td></tr></table>");
        });
    }});
}); 
```

有什么方法可以读取和写入“数据库”（xml、sqlite、我们），将所有内容都放在共享网络驱动器上？如果那不可能，那么当我可以使用带有 php 和 mysql 的网络服务器时，最简单的解决方案是什么，只有 php 文件将写入网络服务器上的数据库？

希望你明白我想做什么。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:30:49.807

有很多解决方案..因为您提到 php 将 Web 服务器安装到您的网络并使用存储在网络驱动器中的 SQLite 来解决问题。php 脚本将由服务器解释并存储在那里..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T00:40:39.983

仅使用 JavaScript 是不可能的。您将需要在某处进行一些服务器端交互。这是因为浏览器的构建方式符合管理这些东西的任何组织的标准、策略和安全实践。

但总体而言，JavaScript 是一种客户端语言。它对文件系统没有访问权或权限，并且开发了浏览器以保持这种状态，否则会带来极高的安全风险，因为任何人都可以随时将“注入”javascript添加到在该窗口中打开的任何站点中.

底线是您将需要某种程度的服务器端交互，无论是 php 还是其他方式。

# winapi - x86 程序集 - GetStdHandle 和 WriteConsole

> ID：10664451
> 
> 赞同：0
> 
> 时间：2012-05-19T10:40:53.530
> 
> 标签：winapi, assembly, x86

在回答我关于 Windows API 的问题时，我已经成功地让它工作了。我的问题是关于这段代码：

```
push STD_OUTPUT_HANDLE
    call GetStdHandle
    push NULL
    push offset other
    push mlen
    push offset msg
    push eax
    call WriteConsole
push    0
call ExitProcess 
```

此代码应该打印 的值`msg`。为什么需要这样做：

一个）

```
push STD_OUTPUT_HANDLE
    call GetStdHandle
    push NULL 
```

和：

b)

```
push offset other
    push mlen
    push offset msg
    push eax 
```

我只是想知道获得`StdHandle`和推动偏移量的需要是什么。

提前致谢，

程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:04:16.423

查看[WriteConsole 的定义](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687401%28v=vs.85%29.aspx)。NULL 是函数的最后一个参数，即 lpReserved 参数。参数按从右到左的顺序推送。第一个函数参数是控制台句柄，它是您从 GetStdHandle 获得的，然后通过 push eax 传递。

所以正确地注释汇编代码：

```
push STD_OUTPUT_HANDLE          ; GetStdHandle nStdHandle argument
call GetStdHandle               ; eax = Console handle
push NULL                       ; lpReserved = null
push offset other               ; lpNumberOfCharsWritten = pointer to "other"
push mlen                       ; nNumberOfCharsToWrite = length of "msg"
push offset msg                 ; lpBuffer = pointer to "msg"
push eax                        ; hConsoleOutput = console handle from GetStdHandle
call WriteConsole               ; Write string
push    0                       ; exit code = 0
call ExitProcess                ; terminate program 
```

# php - PHP - 仅检索某些 XML 节点并保存到文件

> ID：10664453
> 
> 赞同：1
> 
> 时间：2012-05-19T10:41:15.517
> 
> 标签：php, xml

我正在使用 PHP curl 从远程 url 检索 xml 文件并将其保存到我服务器上的本地文件中。结构如下：

```
<Store Country="Ireland">
<EventsPoints>
    <Event ID="1800" >
        <ArtistIDs>
            <ArtistID ID="109" Type="Primary" />
        </ArtistIDs>
        <CategoryID>1</CategoryID>
        <Country>IRL</Country>
        <PerformanceName>Music and Arts</PerformanceName>
        <VenueID ID="197" />
    </Event>
<Venues>
    <Venue ID="197">
        <City>Dublin</City>
        <Country>IRL</Country>
        <VenueName>ABC</VenueName>
        <VenueNumber>22</VenueNumber>
    </Venue>
</Venues> 
```

上述 xml 块存储在同一个 XML 文件中。有几个 Event 块和几个 Venue 块。我遇到的问题是使用 PHP 访问这个大型 XML 文件并遍历 Venue 块，仅检索具有通过参数指定的特定 ID 的 Venue 块。然后我想遍历事件块 - 仅检索与此指定场地 ID 匹配的事件。然后我想将其保存到服务器上的文件中。我想为每个场地都这样做。

我该如何进行上述操作？

编辑：

对于与该场地相关的每个场地和活动，我只想将它们复制到自己的文件中 - 基本上将较大的文件拆分为单独的文件

```
 $docSource = new DOMDocument();
$docSource->loadXML($xml);
$docDest = new DOMDocument();
$docDest->loadXML(file_get_contents('/var/www/html/xml/testfile.xml'));

$xpath = new DOMXPath($docSource);
$id = "197";
$result = $xpath->query('//Event/VenueID[@ID=$id]')->item(0); //Get directly the node you want

$result = $docDest->importNode($result, true); //Copy the node to the other document

$items = $docDest->getElementsByTagName('items')->item(0);
$items->appendChild($result); //Add the copied node to the destination document

echo $docDest->saveXML(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:38:27.563

您没有显示所需的输出格式，因此我假设这会生成您想要的。如果没有，请随意修改代码，使其符合所需的输出格式。这与上面的评论一起应该有你自己工作所需要的一切。

```
// load Source document
$srcDom = new DOMDocument;
$srcDom->load('/var/www/html/xml/testfile.xml');
$xPath = new DOMXPath($srcDom);
// iterate over all the venues in the source document
foreach ($srcDom->getElementsByTagName('Venue') as $venue) {
    // create a new destination document for the current venue
    $dstDom = new DOMDocument('1.0', 'utf-8');
    // add an EventsPoint element as the root node
    $dstDom->appendChild($dstDom->createElement('EventsPoint'));
    // import the Venue element tree to the new destination document
    $dstDom->documentElement->appendChild($dstDom->importNode($venue, true));
    // fetch all the events for the current venue from the source document
    $allEventsForVenue = $xPath->query(
        sprintf(
            '/Store/EventsPoints/Event[VenueID/@ID=%d]',
            $venue->getAttribute('ID')
        )
    );
    // iterate all the events found in Xpath query
    foreach ($allEventsForVenue as $event) {
        // add event element tree to current destination document
        $dstDom->documentElement->appendChild($dstDom->importNode($event, true));
    }
    // make output prettier
    $dstDom->formatOutput = true;
    // save XML to file named after venue ID
    $dstDom->save(sprintf('/path/to/%d.xml', $venue->getAttribute('ID')));
} 
```

这将创建一个像这样的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<EventsPoint>
  <Venue ID="197">
                <City>Dublin</City>
                <Country>IRL</Country>
                <VenueName>ABC</VenueName>
                <VenueNumber>22</VenueNumber>
            </Venue>
  <Event ID="1800">
            <ArtistIDs>
                <ArtistID ID="109" Type="Primary"/>
            </ArtistIDs>
            <CategoryID>1</CategoryID>
            <Country>IRL</Country>
            <PerformanceName>Music and Arts</PerformanceName>
            <VenueID ID="197"/>
        </Event>
</EventsPoint> 
```

在文件 197.xml

# google-maps - 如何使用 JSON 获得灰度地图？

> ID：10664456
> 
> 赞同：0
> 
> 时间：2012-05-19T10:41:39.690
> 
> 标签：google-maps, google-maps-api-3, grayscale

这是我在页面中使用的代码，用于将带有指针数据库的地图显示为纬度和经度。

此代码显示谷歌地图中表示的正常图像，但由于我需要灰度地图，因此使用谷歌 api 进行了尝试并获得了 JSON 代码，但我担心如何用完地图以灰度显示的 json 代码。

这是我页面中的脚本：- 下面是来自 Google 地图的 JSON 代码

```
<script src="http://maps.google.com/maps?file=api&v=2&key=ABQIAAAAfJRXkzFVohAp-Okxjr5B7xR_ljEFASla9K2hAbTooXc5TaM12hShF8opt9JtUXJpFbuViIHs05-CNg" type="text/javascript">
</script>
<script type="text/javascript">
//<![CDATA[
$(document).ready(function(){
    if (GBrowserIsCompatible()) {
        var latitude = <?php echo $store_details->latitude; ?>; 
        var longitude = <?php echo $store_details->longitude; ?>;                                   
        var map = new GMap2(document.getElementById("map"));
        map.setCenter(new GLatLng(latitude,longitude),13);          
        var marker = new GMarker(new GLatLng(latitude,longitude));
        map.addOverlay(marker); 

    }
}); 
//]]>
</script> 
```

这是 JSON 代码：

```
[ { stylers: [ { saturation: -100 }, { visibility: "on" } ] } ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:14:03.283

您正在使用 API 的第 2 版，它没有样式化的地图。您需要使用版本 3 来使该功能可用。第 3 版与第 2 版有很大不同。新项目一定要使用第 3 版，第 2 版项目将在 2013 年 5 月停止工作。

灰度地图改编自谷歌[相当花哨的例子](https://google-developers.appspot.com/maps/documentation/javascript/examples/maptype-styled-simple)：

```
<!DOCTYPE html>
<html> 
<head>
<title>Google Maps JavaScript API v3 Example: Styled MapTypes</title>
<link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>  
<script>

var map;
var brooklyn = new google.maps.LatLng(40.6743890, -73.9455);

var MY_MAPTYPE_ID = 'Greyscale';

function initialize() {

  var graystyle = [
    {
      featureType: "all",
      elementType: "all",
      stylers: [ { saturation: -100 }, { visibility: "on" } ]
    }
  ];

  var mapOptions = {
    zoom: 12,
    center: brooklyn,
    mapTypeControlOptions: {
       mapTypeIds: [google.maps.MapTypeId.ROADMAP, MY_MAPTYPE_ID]
    },
    mapTypeId: MY_MAPTYPE_ID
  };

  map = new google.maps.Map(document.getElementById("map_canvas"),
      mapOptions);

  var styledMapOptions = {
    name: "Greyscale"
  };

  var grayMapType = new google.maps.StyledMapType(graystyle, styledMapOptions);

  map.mapTypes.set(MY_MAPTYPE_ID, grayMapType);
}
</script> 
</head> 
<body onload="initialize()"> 
  <div id="map_canvas" style="width: 640px; height: 480px;"></div> 
</body> 
</html> 
```

# c# - MemoryStream.WriteTo(Stream destinationStream) 与 Stream.CopyTo(Stream destinationStream)

> ID：10664458
> 
> 赞同：9
> 
> 时间：2012-05-19T10:42:05.907
> 
> 标签：c#, .net, stream, memorystream

哪个更好：`MemoryStream.WriteTo(Stream destinationStream)`还是`Stream.CopyTo(Stream destinationStream)`？？

我正在谈论没有 Buffer 的这两种方法的比较，因为我正在这样做：

```
Stream str = File.Open("SomeFile.file");
MemoryStream mstr = new MemoryStream(File.ReadAllBytes("SomeFile.file"));

using(var Ms = File.Create("NewFile.file", 8 * 1024))
{
    str.CopyTo(Ms) or mstr.WriteTo(Ms);// Which one will be better??
} 
```

## 更新

这是我想做的事情：

*   打开文件[说“X”类型文件]
*   解析内容
*   从这里我得到了一堆新的 Streams [ 3 ~ 4 Files ]
*   解析一个流
*   提取数千个文件 [ 流是图像文件 ]
*   将其他流保存到文件
*   编辑所有文件
*   生成一个新的“X”型文件。

我已经编写了实际上正常工作的每一段代码..

但现在我正在优化代码以提高效率。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-19T13:14:15.203

有两种方法可以做同样的事情，这是一个历史偶然。MemoryStream 总是有 WriteTo() 方法，Stream 直到 .NET 4 才获得 CopyTo() 方法。

MemoryStream.WriteTo() 版本如下所示：

```
public virtual void WriteTo(Stream stream)
{
    // Exception throwing code elided...
    stream.Write(this._buffer, this._origin, this._length - this._origin);
} 
```

Stream.CopyTo() 实现如下：

```
private void InternalCopyTo(Stream destination, int bufferSize)
{
    int num;
    byte[] buffer = new byte[bufferSize];
    while ((num = this.Read(buffer, 0, buffer.Length)) != 0)
    {
        destination.Write(buffer, 0, num);
    }
} 
```

Stream.CopyTo() 更通用，它适用于任何流。并帮助那些笨拙地从 NetworkStream 复制数据的程序员。忘记关注 Read() 的返回值是一个*非常*常见的错误。但是它当然会复制字节两次并分配那个临时`buffer`的， MemoryStream 不需要它，因为它可以直接从自己的缓冲区写入。所以你还是更喜欢WriteTo()。注意到差异的可能性不大。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-19T10:51:45.677

[`MemoryStream.WriteTo`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.writeto.aspx)：将此内存流的全部内容写入另一个流。

[`Stream.CopyTo`](http://msdn.microsoft.com/en-us/library/dd782932.aspx)：从当前流中读取字节并将它们写入目标流。复制从当前流中的当前位置开始。您需要回溯到 0，以复制整个源流。

所以我认为 MemoryStream.WriteTo 对于这种情况更好的选择

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-19T10:53:58.737

如果使用`Stream.CopyTo`，则无需将所有字节读入内存即可。然而：

*   如果您只是使用此代码会更简单[`File.Copy`](http://msdn.microsoft.com/en-us/library/system.io.file.copy.aspx)
*   如果要将所有*数据*加载到内存中，则可以使用：

    ```
    byte[] data = File.ReadAllBytes("input");
    File.WriteAllBytes("output", data); 
    ```

*   您应该有一个`using`输入和输出流的语句

如果您确实需要处理而无法使用`File.Copy`，则使用`Stream.CopyTo`将处理比将所有内容加载到内存中更大的文件。当然，您可能不需要它，或者您可能出于其他原因需要将整个文件加载到内存中。

如果你*有*a `MemoryStream`，我可能会使用`MemoryStream.WriteTo`而不是`Stream.CopyTo`，但它可能不会对你使用有太大的影响，*除了*你需要确保你在使用时处于流的开头`CopyTo`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-10T13:51:17.437

我认为 Hans Passant 声称 MemoryStream.WriteTo() 中存在错误是错误的；它不会“忽略 Write() 的返回值”。Stream.Write() 返回 void，这对我来说意味着写入了整个 count 字节，这意味着 Stream.Write() 将在必要时阻塞以完成对 NetworkStream 的操作，或者如果最终失败则抛出。

这确实不同于 ?nix 中的 write() 系统调用，以及它在 libc 等中的许多仿真，它们*可以*返回“短写”。我怀疑 Hans 得出了 Stream.Write() 遵循的结论，这也是我所预料的，但显然事实并非如此。

可以想象，Stream.Write() 可以执行“短写入”，而不返回任何指示，要求调用者检查 Stream 的 Position 属性是否实际上已按计数提前。那将是一个非常容易出错的 API，我怀疑它是否会这样做，但我还没有彻底测试过它。（测试它会有点棘手：我认为您需要将 TCP NetworkStream 与另一端的读取器连接起来，该读取器永远阻塞，并写入足够的内容以填充线路缓冲区。或类似的东西......）

Stream.Write() 的注释不是很明确：

摘要：在派生类中重写时，将字节序列写入当前流，并将该流中的当前位置前进写入的字节数。参数： buffer：一个字节数组。此方法将 count 字节从缓冲区复制到当前流。

将其与 write(2) 的 Linux 手册页进行比较：

write() 将缓冲区指向的 buf 中的 count 个字节写入文件描述符 fd 所引用的文件。

注意关键的“最多”。这句话后面是对可能发生“短写”的一些条件的解释，非常明确地表明它可能发生。

这确实是一个关键问题：毫无疑问，我们需要知道 Stream.Write() 的行为方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-21T12:19:22.573

在 Vb.Net 中从 HttpInputStream 创建 MemoryStream：

```
Dim filename As String = MyFile.PostedFile.FileName
Dim fileData As Byte() = Nothing
Using binaryReader = New BinaryReader(MyFile.PostedFile.InputStream)
    binaryReader.BaseStream.Position = 0
    fileData = binaryReader.ReadBytes(MyFile.PostedFile.ContentLength)
End Using
Dim memoryStream As MemoryStream = New MemoryStream(fileData) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-19T11:04:13.697

CopyTo 方法创建一个缓冲区，用原始流中的数据填充它，然后调用 Write 方法，将创建的缓冲区作为参数传递。WriteTo 使用 memoryStream 的内部缓冲区进行写入。这就是区别。什么更好 - 由您决定您喜欢哪种方法。

# python - 从 python 脚本启动 python IDLE

> ID：10664461
> 
> 赞同：2
> 
> 时间：2012-05-19T10:42:15.383
> 
> 标签：python, python-idle

如何以某种方式从 python 脚本启动 Python-IDLE，以使之前在脚本中声明的所有变量和函数在 IDLE 中都不知道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T10:51:56.957

您可以使用以下命令从命令行运行 IDLE：

```
idle.py [-c command] [-d] [-e] [-s] [-t title] [arg] ...

-c command  run this command
-d          enable debugger
-e          edit mode; arguments are files to be edited
-s          run $IDLESTARTUP or $PYTHONSTARTUP first
-t title    set title of shell window 
```

还：

> 在使用 -s 选项启动时，IDLE 将执行由环境变量 IDLESTARTUP 或 PYTHONSTARTUP 引用的文件。空闲首先检查 IDLESTARTUP；如果 IDLESTARTUP 存在，则运行引用的文件。如果 IDLESTARTUP 不存在，则 Idle 检查 PYTHONSTARTUP。这些环境变量引用的文件是存储 Idle shell 中经常使用的函数的方便位置，或者用于执行 import 语句以导入公共模块。（来自文档：[http](http://docs.python.org/library/idle.html) ://docs.python.org/library/idle.html ）

因此，您可以将 $IDLESTARTUP 或 $PYTHONSTARTUP 设置为包含您要声明的变量的 python 文件，并且当 IDLE 启动时，它们将在 IDLE 中可用。

您可以使用 os.system 命令（或 subprocess.Popen）以这种方式从 Python 脚本启动 IDLE，以运行上述命令。

# javascript - Jquery.deferred 的语法，使同步函数返回承诺

> ID：10664466
> 
> 赞同：2
> 
> 时间：2012-05-19T10:43:00.773
> 
> 标签：javascript, jquery-deferred, promise

关于如何使用 Jquery.deferred 使慢速同步函数返回一个 Promise 的快速问题。到目前为止我所做的是：

```
function sayIt(ms) {
    setTimeout( function() { console.log('what I say'); }, ms);
} 

function doIt() {
    return $.Deferred( function() { sayIt(2000); }).promise();
}

doIt().then( function() { console.log('ah'); }); 
```

sayIt(2000) 总是通过，但“then”之后的链接函数永远不会触发。

如果我这样做：

```
doIt().then( console.log('ah')); 
```

“啊”立即出现，然后 2000 毫秒后出现“我说什么”——我想要的当然是相反的——两秒钟后我得到“我说什么”，然后是“啊”。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T11:04:44.907

要同步执行某些操作，但仍使用 Promise，请执行以下操作：

```
function slowPromise() {

    var def = $.Deferred();

    // do something slow and synchronous
    ...

    // resolve the deferred with the result of the slow process
    def.resolve(res);

    // and return the deferred
    return def.promise();
} 
```

结果是你仍然得到了一个承诺，但这个承诺已经被解决了，所以`.then()`随后在它上面注册的任何东西都会立即进行。

这种模式的优点是，如果您随后用异步代码替换同步代码，该函数仍然具有相同的外部接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-24T13:56:16.127

如果要在超时到期后执行函数，则需要从超时到期函数中调用对象`resolve()`：`Deferred`

```
function sayIt(ms) {
  var d = $.Deferred();
  setTimeout(function() {
      console.log('what I say');
      d.resolve()
    }, ms);
  return d;
} 
```

通过这种方式，您可以将对象的解析限制为`Deferred`超时到期。

为了实现我相信你的意图：

```
function doIt() {
  return sayIt(2000).promise()
} 
```

`.promise()`调用是可选的。它只限制调用者可用的接​​口：通过返回 a`Promise`而不是原始`Deferred`对象，调用者只能对事件做出反应，但不能触发它们。参考：[http](http://api.jquery.com/deferred.promise/) ://api.jquery.com/deferred.promise/ 。

最终，你原来的电话：

```
doIt().then( function() { console.log('ah'); }); 
```

将输出：

```
// 2 seconds delay
what I say
ah 
```

# objective-c - 10.7.4 和 libPNG

> ID：10664467
> 
> 赞同：1
> 
> 时间：2012-05-19T10:43:09.457
> 
> 标签：objective-c, macos, cocoa, appkit, libpng

自从我更新到 10.7.4 后，我的 NSImage 代码就开始出现问题。当我读出图像的表示时，选择位图图像表示并尝试将其写出到 PNG 文件中，我收到错误消息。

因此，我尝试通过“常规”方式进行操作，但出现以下错误：

![在此处输入图像描述](../Images/945fab8019a49ae1e7b48d2cecdf93d1.png)

我的第一个猜测是删除 libPNG 的损坏版本并将其替换为工作版本。关于我应该如何解决这个问题的任何建议？我可以尝试编译旧版本的 libPNG 并读出位图图像并自己写出来。喜欢 OSX 的质量如何下降到 Lion 中的 windows vista 水平。

是的，OSX 使用 libPNG：[http ://d.pr/i/nOEX](http://d.pr/i/nOEX)

为了更清楚一点，这是我的测试构建代码：

```
NSImage *image = [[NSImage alloc] initWithContentsOfFile:@"/Users/jabwd/Desktop/Icons/4099.ico"];

    NSLog(@"%@",[image representations]);
    NSImageRep *biggest = nil;
    for(NSImageRep *rep in [image representations])
    {
        if( ! biggest )
        {
            biggest = rep;
        }
        else if( [rep size].width >= [biggest size].width && [rep size].height >= [biggest size].height )
        {
            biggest = rep;
        }
    }

    if( biggest && [biggest isKindOfClass:[NSBitmapImageRep class]] )
    {
        NSBitmapImageRep *bitmap = (NSBitmapImageRep *)biggest;
        NSData *data = [bitmap representationUsingType:NSPNGFileType properties:nil];
        [data writeToFile:@"/Users/jabwd/Desktop/test.png" atomically:false];
    } 
```

如您所见，我假设图像中有多种表示形式。在这种情况下我可以这样做，因为我正在加载某种类型的图标，它是一个私人项目，不会落入某些用户的手中 => 我有另一个更大的应用程序需要执行某个任务自动化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:17:00.547

看起来 ImageIO.framework 在 10.7.4 中有一些错误，它与 10.7.3 上的 libPNG 版本相同。在将图像转换为 png 之前使用 automator 脚本将图像转换为 jpeg 似乎可以正常工作。

# jboss - 分别部署ejb模块和web模块时无法访问bean？

> ID：10664470
> 
> 赞同：0
> 
> 时间：2012-05-19T10:43:50.173
> 
> 标签：jboss, ejb-2.x

我正在测试一个 EJB 2.x 应用程序。**我分别**创建了 2 个模块：

**EJB 模块**：包含一个简单的无状态会话 bean

**Web 模块**：包含用于查找 EJB 模块的单个 servlet 页面。我正在使用`Jboss 4.2.3`.

**首先**，我部署了 EJB 模块，部署顺利。 **其次**，我部署了web模块，部署很顺利。

然后我使用以下代码查找 EJB 模块：

```
Context c = new InitialContext();
Object o = c.lookup("HelloJNDI"); // Line 1
HelloLocalHome rv = (HelloLocalHome) o; // Line 2
HelloLocal local =  rv.create(); 
```

查找进行得很顺利 ( `Line 1`)，但`Line 2`产生了一个类转换异常。

然后我在2个场景中测试上面的代码：

1.  我将 EJB 和 Web 模块打包成一个`EAR module`. 然后，在 中部署这个`EAR`模块`JBoss 4.2.3`，上面的查找代码就像一个魅力。

2.  我尝试使用`JBoss 5`，甚至分别部署了 EJB 模块和 Web 模块，上面的查找代码效果很好。

那么，为什么当我在 JBoss 4 中分别部署这 2 个模块时，事情没有成功呢？我只使用本地 JNDI 查找，因为这 2 个模块部​​署在同一个容器中。是我遗漏了什么还是这是 JBoss 4 中的一个缺陷？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:53:28.483

尝试使用以下代码而不是您的演员表：

```
HelloLocalHome rv = (HelloLocalHome)javax.rmi.PortableRemoteObject.narrow(o, HelloLocalHome.class); 
```

如果这确实有效，那么您就有臭名昭著的类加载问题。（JBoss 5 的默认服务器使用不同的类加载机制的原因之一）。最简单的方法是将它们放在一个 EAR 中（因此 Home 和远程类只加载一次）。Web 应用程序中的 Home 接口类由与 JNDI 返回的类加载器不同的类加载器加载。

您还可以从 WAR 文件的类或 lib 目录中删除接口

# php - 使用 array_unique 删除重复项会给出错误的结果

> ID：10664475
> 
> 赞同：1
> 
> 时间：2012-05-19T10:44:53.160
> 
> 标签：php, arrays

我有两个数组，我想用单个数组制作唯一数组

例如我有`$a=array(3);`，`$b=array(1,2,3)`所以我想要`$c=array(1,2,3)`

我做了一个像这样的代码：

```
 $a=array(3);
        $b=explode(',','1,2,3');
        $ab=$a+$b;
        $c=array_unique ($ab);
            print_r($c); 
```

它给了我`Array ( [0] => 3 [1] => 2 )`

但是我要`Array ( [0] => 1 [1] => 2 [2] => 3 )`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T10:50:53.017

```
$a = array(1,2,3,4,5,6);

$b = array(6,7,8,2,3);

$c = array_merge($a, $b);

$c = array_unique($c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:48:29.187

操作

```
$ab = $a + $b 
```

正在给你一个你没想到的结果。这种行为的原因之前已经在[PHP：Adding arrays together中解释过](https://stackoverflow.com/questions/2811798/php-adding-arrays-together)

```
$ab  is Array ( [0] => 3 [1] => 2 [2] => 3 ) 
```

> + 运算符将剩余键的元素从右手数组附加到左手，而重复的键不会被覆盖。

array_merge 提供了更直观的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T10:50:01.000

数组合并，伙计。数组合并。无论如何，正如类似问题的答案（[https://stackoverflow.com/a/2811849/223668](https://stackoverflow.com/a/2811849/223668)）告诉我们：

```
The + operator appends elements of remaining keys from the right handed array to the left handed, whereas duplicated keys are NOT overwritten. 
```

如果您有数字键（如在标准表中），它们肯定会在两个数组中重复，并且结果远非理想。

所以代码应该是这样的：

```
$c = array_unique(array_merge($a, $b)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T10:50:19.733

您需要使用此 array_merge 来连接两个数组。

[http://www.php.net/manual/en/function.array-merge.php](http://www.php.net/manual/en/function.array-merge.php)

不是

```
$ab = $a + $b 
```

# iphone - 为什么保留 NSURLConnection 和 CAAnimation 委托？

> ID：10664478
> 
> 赞同：2
> 
> 时间：2012-05-19T10:45:33.727
> 
> 标签：iphone, ios, ipad

我是 ios 开发的新手。我才知道他们是基金会中保留的两名代表。我的理解是委托必须始终是松耦合的。那么为什么要专门保留这两个呢？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T11:29:24.853

通常，对象的整个生命周期都需要委托，这就是为什么它*通常*是弱/非保留引用的原因。否则，对象和委托都不能被释放，因为它们都会等待对方离开。

然而，在这种情况下`NSURLConnection`，`CAAnimation`委托实际上只需要用于具有某种“已完成”状态的特定任务。当连接完成加载/取消或动画结束时，他们可以自己释放委托，从而打破保留周期。

# javascript - 在java脚本中评估struts2标签

> ID：10664479
> 
> 赞同：1
> 
> 时间：2012-05-19T10:45:42.683
> 
> 标签：javascript, struts2, tags, eval

我正在使用 java 脚本函数向表中添加行。每行都有文本字段和选择框。我想为这些控件使用 struts 标签。当我将 innerHTML 直接设置为标签时，屏幕上不会显示任何结果。即使我尝试在设置 html 之前对字符串内容进行 eval 函数，但也没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:33:28.383

Struts 标签最终将被评估为 HTML 标签，如果您的 JavaScript 在 JSP 中并且将在页面加载期间被调用，您的 Struts 标签将被评估并且您将能够看到输出，

如果您将 JavaScript 代码放在 Java Script 文件中，那么您的 Struts 标记将不会被评估，并且您将无法看到 HTML 输出，因为 Struts 标记评估是由您的服务器而不是客户端执行到网络的浏览器没有什么叫做 Struts 标签，它只是理解 HTML 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:53:39.530

你尝试过使用 jQuery 的`html()`功能吗？

# java - 如何在 Android 的 EditText 中更改默认键盘输入语言

> ID：10664480
> 
> 赞同：3
> 
> 时间：2012-05-19T10:45:44.297
> 
> 标签：java, android, android-emulator

我认为这是因为我的操作系统是中文的。我的 android 应用程序中有一个 EditText 框，当我单击它输入内容时，默认输入语言是中文。可以改成英文吗？

好像是因为项目是在我的电脑上创建的，当别人导入项目并在模拟器上运行时，默认输入也是中文。我可以修改一些文件以将**默认设置**改回英文吗？非常感谢！

我创建项目的版本是 Android 2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:29:20.670

默认情况下，所有模拟器都安装了英文、日文 IME 和中文键盘。由于 Android 操作系统使用的键盘是用户的选择，因此无法在应用代码中强制使用特定的键盘。如果您想完全摆脱模拟器中不必要的键盘，请参阅以下帖子：[单击此处](https://stackoverflow.com/questions/2268239/why-is-my-android-emulator-keyboard-in-chinese-character-mode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:00:36.583

根据[我的数字生活](http://www.mydigitallife.info/how-to-switch-or-change-input-method-on-android-smart-phone-device/)：

> 或者，在安卓键盘或其他基于安卓键盘的输入法上，点击并按住?123键，将显示带有切换输入法选项的键盘设置对话框供选择。
> 
> 要使输入法的更改生效，请取消焦点文本输入字段（点击其他任何位置）以关闭键盘，然后再次点击输入字段以打开新的输入法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T10:55:05.153

单击并按住 EditText。将出现一个上下文菜单，允许您更改 IME（编辑器）。

# java - java“ClassNotFoundException”错误

> ID：10664482
> 
> 赞同：6
> 
> 时间：2012-05-19T10:45:54.257
> 
> 标签：java, classpath, classnotfoundexception, scribe

我是 java 编程新手，我收到了备受诟病的错误“ClassNotFoundException”错误。

奇怪的是它编译得很好：

```
java -cp /usr/share/java/scribe-1.3.0.jar FacebookProg 
```

但是当我尝试运行它时，我收到以下错误：

```
steve@steve-ThinkPad-T61:~/facebook$ java  FacebookProg  
Exception in thread "main" java.lang.NoClassDefFoundError:
org/scribe/builder/ServiceBuilder  
    at FacebookProg.main(FacebookProg.java:8)  
Caused by: java.lang.ClassNotFoundException: org.scribe.builder.ServiceBuilder  
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)  
    at java.security.AccessController.doPrivileged(Native Method)  
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)  
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)  
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)  
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)  
    ... 1 more 
```

我在网上查了一下，似乎java在运行时找不到它在编译时能够找到的库。所以尝试了以下变体：

```
java -cp /usr/share/java/scribe-1.3.0.jar FacebookProg  
java -cp /usr/share/java/ FacebookProg  
export CLASSPATH="/usr/share/java"; java FacebookProf  
export CLASSPATH="/usr/share/java/usr/share/java/scribe-1.3.0.jar"; java FacebookProg 
```

我检查了 StackOverflow 和谷歌上的几个地方，但仍然无法弄清楚原因。我是java新手，所以可能有一个简单的解决方案，但我找不到。我在 Ubuntu 11.04 上使用 Sun Java 1.6 64 位。scribe-1.3.0.jar 文件位于“/usr/share/java”中，我相信这是放置 java 包的规范位置。

准系统代码在这里（以防万一）：

```
import org.scribe.builder.*;
import org.scribe.builder.api.*;
import org.scribe.oauth.*;

public class FacebookProg {
    public static void main (String args[]) {
        OAuthService service = new ServiceBuilder()
        .provider(FacebookApi.class)
        .apiKey("blah_blah")
        .apiSecret("blah_blah")
        .build();
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T10:55:01.340

类路径必须指向您正在使用的外部库的目录和您尝试自行运行的类。尝试这个：

视窗：

```
java -cp .;/usr/share/java/scribe-1.3.0.jar FacebookProg 
```

Linux：

```
java -cp .:/usr/share/java/scribe-1.3.0.jar FacebookProg 
```

顺便说一句，要编译它，你应该运行这个：

```
javac -cp /usr/share/java/scribe-1.3.0.jar FacebookProg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:50:21.363

这个

```
java -cp /usr/share/java/scribe-1.3.0.jar FacebookProg 
```

意味着您正在运行`FacebookProg`课程，而不是编译它。

如果您将其`-cp ...`排除在外，那么您就是将重要的类路径排除在外，因此 JVM 无法找到所需的类`FacebookProg`。

要编译，您需要

```
javac -cp /usr/share/java/scribe-1.3.0.jar FacebookProg.java 
```

（注意`javac`, 而不是`java`调用编译器）

要运行，您已经知道如何运行。

此外，您在以下行中有错误：

```
export CLASSPATH="/usr/share/java"; java FacebookProf     
export CLASSPATH="/usr/share/java/usr/share/java/scribe-1.3.0.jar"; java FacebookProg 
```

第一个拼写错误`FacebookProg`并且类路径上没有所需的 jar，第二个有错误的 jar 路径。尝试

```
export CLASSPATH="/usr/share/java/scribe-1.3.0.jar"; java FacebookProg 
```

另外，确保罐子确实位于`/usr/share/java/scribe-1.3.0.jar`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T10:54:10.483

```
java -cp /usr/share/java/scribe-1.3.0.jar FacebookProg 
```

如果您在同一目录中编译 FacebookProg.class，这应该可以正常工作。你可以试试`java -cp /usr/share/java/scribe-1.3.0.jar:/locationOfFacebookProg.class directory/ FacebookProg`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T10:51:00.000

假设，你的程序目录是

$家

$HOME/lib/*.jar

您可以编写如下脚本：

```
for file in "$HOME/lib/*.jar"
    do
        if [ -f $file ]
        then 
            CLASSPATH=$CLASSPATH:$file
        else
            echo ignore $file
        fi
done

java  -cp $CLASSPATH FacebookProg 
```

# php - 如果用户代理值被更改，操作系统检测

> ID：10664485
> 
> 赞同：1
> 
> 时间：2012-05-19T10:46:16.743
> 
> 标签：php, user-agent

即使浏览器代理值被更改，使用 Php 是否可以检测到确切的操作系统？

这是案例

如果有人使用“general.useragent.override”覆盖 Firefox 用户代理值

```
Actual: Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0

Override: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/534.55.3 (KHTML, like Gecko) Version/5.1.3 Safari/534.53.10 
```

$_SERVER['HTTP_USER_AGENT'] 值将完全是假的。即使检测到正确的操作系统也没有用。

在这种情况下是否有任何 PHP 解决方案？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T10:48:52.357

不，这是不可能的。您拥有的唯一信息是`User-agent`标头提供的信息，如果用户想要发送虚假信息，您无法检测到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-23T18:12:03.940

您仍然可以使用 JavaScript 来查找屏幕大小，但不能使用操作系统，这是如何做到的

```
<script type="text/javascript">
document.write(screen.width+'x'+screen.height);
</script> 
```

但这无论如何都可以由客户端更改，因为它在 ios 上的客户端有一种方法是通过将移动管理配置文件临时设置为非常设备，但这对客户端来说有很多工作，所以只有在你必须这样做时才这样做但在大多数情况下，你不能非常它不是 mod

# c# - VB.NET 中方法的长度

> ID：10664492
> 
> 赞同：-1
> 
> 时间：2012-05-19T10:47:16.660
> 
> 标签：c#, vb.net-to-c#

VB.NET 如何计算方法的长度？我怎样才能在 C# 中做到这一点？

这是我的[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)代码：

```
Private Function ZeroPad(ByRef pNumber As Integer, ByRef pLength As Integer) As String
    Dim Padding As Object
    If IsNumeric(pNumber) And IsNumeric(pLength) Then
        Padding = New String("0", pLength)
        ZeroPad = Padding & CStr(pNumber)
        ZeroPad = Right(ZeroPad, pLength)
    Else
        ZeroPad = CStr(pNumber)
    End If
End Function 
```

我转换成C#如下：

```
private string ZeroPad(ref int pNumber, ref int pLength) {
    object Padding;
    if ((IsNumeric(pNumber) && IsNumeric(pLength))) {
        Padding = new string("0", pLength);
        return (Padding + pNumber.ToString());

        ZeroPad = ZeroPad.Substring((ZeroPad.Length - pLength));

        // In the above line, how can I take the length of a method in C#?
    }
    else {
        return pNumber.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T10:55:52.463

您可能对变量`ZeroPad`和方法感到困惑`ZeroPad`。通常使用小写首字母来编写变量名，例如`zeroPad`. 要从方法返回值，请`return`在 C# 中使用。我不确定您的`IsNumeric`子例程的目的是什么，或者您为什么通过引用获取价值，但您在 C# 中的代码将类似于：

```
private string ZeroPad(ref int pNumber, ref int pLength)
{
    string padding;
    string zeroPad;
    if ((IsNumeric(pNumber) && IsNumeric(pLength)))
    {
        padding = new string('0', pLength);
        zeroPad = (padding + pNumber.ToString());

        zeroPad = zeroPad.Substring((zeroPad.Length - pLength));
    }
    else
    {
        zeroPad = pNumber.ToString();
    }
    return zeroPad;
} 
```

由于您不更改`pNumber`or的值`pLength`，因此可以按值传递它们（`ByVal`在 Visual Basic 中）。并且知道`pNumber`和`pLength`都是整数，因此总是数字，您的方法可以缩短为以下内容：

```
private string ZeroPad(int pNumber, int pLength)
{
    string zeroPad;
    string padding = new string('0', pLength);

    zeroPad = (padding + pNumber.ToString());

    zeroPad = zeroPad.Substring(zeroPad.Length - pLength);

    return zeroPad;
} 
```

.NET Framework 的基类库有一个[String.PadRight](http://msdn.microsoft.com/en-us/library/36f2hz3a.aspx)方法，如果您指定`'0'`为`paddingChar`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:51:52.820

在 C# 中，您不分配给方法名称。相反，您使用“return”语句。声明一个变量：

```
string retVal; 
```

而不是

```
ZeroPad = some_value; 
```

利用：

```
retVal = some_value; 
```

最后返回 retVal：

```
return retVal; 
```

# objective-c - 如何在我的文本视图中更改字体大小

> ID：10664496
> 
> 赞同：0
> 
> 时间：2012-05-19T10:48:15.647
> 
> 标签：objective-c

我正在使用一个文本视图，其中我传递了一个对象数组。在该数组中，我获取了将传递给 textview 的消息列表，但是我已经更改了 textview 字体的大小。提供适用于我的应用程序的任何建议和源代码。

在我的代码下方，我已经应用了 UIFont 但未在字体中使用。

```
msgtxtView.text=selectedmsg;
[msgtxtView setFont:[UIFont fontWithName:@"Arial" size:10]] 
```

`selectedmsg`是该消息列表中的对象数组，将传递给 textview 的对象，但输出字体大小和 arialfont 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:30:23.660

查看他的示例如何从数组中添加文本并更改大小（您正确更改大小）：

```
NSMutableArray *array = [NSMutableArray arrayWithObjects:@"message1", @"message2", @"message3", @"message4", @"message5", nil];

for (int i=0; i<[array count]; i++) {
    msgtxtView.text = [NSString stringWithFormat:@"%@%@\n",msgtxtView.text,[array objectAtIndex:i]];
}

[msgtxtView setFont:[UIFont fontWithName:@"Arial" size:10]]; 
```

不要忘记**IBOutlet** msgtxtView。

结果：

![在此处输入图像描述](../Images/8c0977f8d62a7f50acf9542350ecd105.png)

例如使用这个: `[UIFont fontWithName:@"Chalkduster" size:25]`:

![在此处输入图像描述](../Images/63b8bbb8893d01012cd507333922dcf7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:08:57.977

用这个 ：

```
msgtxtView.text=selectedmsg;
[msgtxtView setFont:[UIFont fontWithName:@"ArialMT" size:10]] 
```

# header - 使用 CKEditor 和 PHPMailer 发送 HTML 电子邮件

> ID：10664498
> 
> 赞同：-1
> 
> 时间：2012-05-19T10:48:18.353
> 
> 标签：header, ckeditor, mime-types, phpmailer, php

我需要发送使用 CKEditor 创建的电子邮件并使用 phpmailer 发送。我使用以下代码：

```
 $to =$_POST["toEmail"];
    $subject=$_POST["emailSubj"];
    $from=$_POST["fromEmail"];

    $body= $_POST["editor1"];

    $mail = new PHPMailer(); 
    $mail->IsHTML(true);
    $mail->From     = "example@example.com";
    $mail->AddAddress($to);
    $mail->Subject  = $subject;
    $mail->Body     = $body;
    $mail->WordWrap = 50;
    $mail->AltBody="Hello, my friend! \n\n This message uses HTML entities, but you prefer plain text !"; 

    if($mail->Send())
    {
              echo "Message Send Successfully";

            } 
```

但我收到了这样的文字

# 你好

等等..或者有时纯文本不是html电子邮件。

我需要做什么才能接收 html 电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:04:18.690

$mail->IsHTML(true); 这一行本身确保正文将作为 HTML 发送出去。
1) 尝试将普通 HTML 格式的字符串作为电子邮件发送并检查它是否有效。
2）在浏览器上回显 $body 并查看它是否正确显示。
3) 不太确定，但这一定是 HTML 实体被编码的问题，因此请检查这些行。

# iphone - 关于以编程方式访问 ios 设置

> ID：10664503
> 
> 赞同：1
> 
> 时间：2012-05-19T10:48:46.557
> 
> 标签：iphone, ios, widget, settings

我知道在 iOS 中无法以编程方式访问/修改某些系统设置。但是，为什么会有这么多小部件可以打开/关闭 wifi？

我想创建一个简单的小部件来在手机中的 2 张 sim 卡之间切换，但我不知道这在 iOS 中是否可行。是吗？

我有使用 Android 的经验，在那里您几乎可以访问所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T04:11:07.150

该设备需要越狱才能执行您的要求。

# c++ - Turning from .cproject to .vcproj

> ID：10664509
> 
> 赞同：1
> 
> 时间：2012-05-19T10:49:16.943
> 
> 标签：c++, eclipse, visual-studio-2010, gcc, mingw

I have searched a net for some nice code and suddenly I have bumped on a one, however it's been worked in Eclipse, and since I don't have an Eclipse( and I am not planning to instal it anyway ) I can't properly compile it on my VS10\. The thing is that all linker references are mapped in .cproject and if I create an app in my VS10 and paste all the headers and cpp files to it, I still can't build it, 'cause it freezes once it gets up. The main issue may lay in .cproject, so my Q. is can I somehow transform .cproject to .vcproj without much fuss so that this can work on my VS10 as well? :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T22:52:17.963

You can avoid the fuss partially by using CMake (http://www.cmake.org/)

You need to extract the source files' list from the .cproject and run the CMake to get the .vcproj/.vcxproj (basically, you create the "metaproject" for "all of the IDEs")

If you require some extra compiler setup then the fuss is unavoidable.

# css - 使用 setText 和 setUrl 在 SWT 浏览器中进行不同的渲染

> ID：10664510
> 
> 赞同：5
> 
> 时间：2012-05-19T10:49:26.300
> 
> 标签：css, eclipse, swt

我正在尝试编写一个将一些信息显示为 HTML 页面的 Eclipse 插件。为此，我想使用 SWT`Browser`小部件。问题是当我通过 设置浏览器的内容时`setText`​​，`nth-child`选择器不起作用，但是当我通过 设置完全相同的内容时`setUrl("file://...`，它们可以正常工作。为什么渲染不同，如何使用`setText`as with实现相同的渲染`setUrl`？

我正在创建`Browser`with `SWT.NONE`，因为我不想强迫用户安装 Safari 或 Firefox。

这是问题可重现的 HTML：

```
<!doctype html><html><head>
<style type="text/css">
    div:nth-child(2n) { background-color: #f00; }
</style>
</head><body>
    <div>1</div>
    <div>2</div>
    <div>3</div>
</body></html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T17:25:21.247

广泛使用浏览器的`setText()`方法后，我没有看到任何像您所描述的行为。

这可能是本地 Intranet 怪癖模式/兼容模式问题吗？IE 根据内容的来源默认其渲染引擎不同 - 默认情况下，它在渲染 Intranet 内容与 Internet 内容时的行为不同（并且本地文件系统上的内容被视为 Intranet 内容。）无论如何，这就是我的回忆，所有我请务必记住，除非您明确设置兼容性标头，否则存在相当多的巫术。

添加以下元标记是否会改变行为？

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

`DOCTYPE`另外，您在添加的 HTML 中是否有适当的定义`setText()`？

# c++ - 独立调用truecrypt函数？

> ID：10664512
> 
> 赞同：2
> 
> 时间：2012-05-19T10:49:36.320
> 
> 标签：c++, ubuntu, encryption, cryptography, truecrypt

我想实现“文件内”加密文件系统的基本功能，因为我正在尝试使用开源 truecrypt 的文件，我希望能够实例化 VolumeCreate 类并调用它的函数，只使用一种算法，没什么复杂的，我想这样做是出于教育目的。我收到以下错误：

```
> /tmp/cc92sV4t.o: In function `main':
a.cpp:(.text+0x31): undefined reference to `TrueCrypt::VolumeCreator::VolumeCreator()'
/tmp/cc92sV4t.o: In function `TrueCrypt::SharedVal<unsigned long>::Decrement()':
a.cpp:    (.text._ZN9TrueCrypt9SharedValImE9DecrementEv[TrueCrypt::SharedVal<unsigned                     long>::Decrement()]+0x18): undefined reference to `TrueCrypt::Mutex::Lock()'
a.cpp:(.text._ZN9TrueCrypt9SharedValImE9DecrementEv[TrueCrypt::SharedVal<unsigned         long>::Decrement()]+0x48): undefined reference to `TrueCrypt::Mutex::Unlock()' 
```

collect2: ld 返回 1 个退出状态

对于以下代码：

```
#include "Core/VolumeCreator.h"

using namespace TrueCrypt;
int main(int argc, char **argv)
{
    VolumeCreator *vct = new VolumeCreator();
    struct VolumeCreationOptions opt;
    return 0;
} 
```

# c++ - 指向二维数组的 C++ 指针

> ID：10664513
> 
> 赞同：0
> 
> 时间：2012-05-19T10:49:45.263
> 
> 标签：c++, pointers, multidimensional-array

嗨，我知道有很多类似的问题，但我已经解决了这些问题，但我似乎无法让我的功能正常工作。我需要返回一个指向二维数组的指针。到目前为止，我正在使用此代码：

（这段代码是Level.cpp中的一个函数）

```
TileType* CLevel::getTiles()
{
TileType (*matrix_ptr)[31] = tiles;

return *matrix_ptr;
 } 
```

（TileType 是一个枚举）这个函数只返回一行，我显然需要两者。有什么建议么？

头文件Level.h：

```
class CLevel 
{
private:

list<CBox> boxes;
TileType tiles[GRID_HEIGHT][GRID_WIDTH];
CPlayer player;

public:
CLevel();
~CLevel();

CPlayer* getPlayer();
list<CBox>* getBoxes();
TileType** getTiles();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:23:51.760

不要定义 getTiles()。

你完全打破了类的封装。这并不总是很重要，但在这种情况下，C/C++ 2D 数组不适合在可能不知道其维度的外部传递。

因此，将您对瓦片的操作定义为 CLevel 的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T11:13:31.540

你应该做的是：

```
// Class declaration
class CLevel
{
public:
   TileType (*getTiles())[GRID_WIDTH];

   TileType tiles[GRID_HEIGHT][GRID_WIDTH];

   //...
};

// Implementation
TileType (*CLevel::getTiles())[GRID_WIDTH]
{
   return tiles;
} 
```

或这个：

```
// Class declaration
class CLevel
{
public:
   TileType (&getTiles())[GRID_WIDTH][GRID_HEIGHT];

   TileType tiles[GRID_HEIGHT][GRID_WIDTH];

   //...
};

// Implementation
TileType (&CLevel::getTiles())[GRID_WIDTH][GRID_HEIGHT]
{
   return tiles;
} 
```

这是一个有点复杂的声明，但要从里到外阅读：在这两种情况下`getTiles()`都是一个函数，它返回对二维图块数组的引用（该示例显示了两种形式的语法）。通过调用`getTiles()`，您实际上指的是`tiles`. 你甚至可以用这种方式调用函数：`getTiles()[i][j]`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-19T11:06:02.977

如果你想返回一个指向二维数组的指针，那么你的函数声明应该是：

```
TileType** CLevel::getTiles() 
```

你的回报应该是matrix_ptr，而不是它的指针内容（它是一个一维数组）。

```
return matrix_ptr; 
```

# ios - 安排 iOS 应用程序任务在后台运行

> ID：10664527
> 
> 赞同：6
> 
> 时间：2012-05-19T10:51:37.250
> 
> 标签：ios, background

我正在为客户端编写一个应用程序，用户将在白天输入数据，然后在晚上的给定时间（比如午夜），用户当天的数据应该上传到服务器。

因此，即使应用程序在后台，我也需要安排一个方法在午夜在我的应用程序上运行。然后，此方法会将收集的数据与服务器同步并下载任何更改。

为了实现这一点，我想我需要将应用程序设置为始终在后台运行（即超过 10 分钟），然后安排该功能在特定时间后运行。我是否通过使用来做到这一点`performSelector: withDelay:`？还是我需要更强大的东西，因为应用程序将在后台运行？

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:25:06.133

您可以查看 UILocalNotifications。您可以安排该事件发生，然后设置一个徽章图标，让用户知道它处理了某些事情（或没有处理）。

这些信息在[这里](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:37:05.653

我认为您的应用程序或您正在尝试做的事情不符合 Apple 对长时间运行后台任务的要求。查看[Apple 文档的“实现长时间运行的后台任务”部分。](https://developer.apple.com/library/ios/ipad/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# upload - Rails 3.2.3 Carrierwave-Gem 错误“调用了私有方法‘write_uploader’”

> ID：10664529
> 
> 赞同：0
> 
> 时间：2012-05-19T10:51:42.590
> 
> 标签：upload, ruby-on-rails-3.2, carrierwave

我正在使用[Carrierwave](https://github.com/jnicklas/carrierwave/ "载波") -Gem 在我的网络应用程序中上传文件。但是由于以下错误，我无法保存图像：

```
private method `write_uploader' called for #<Image:0x000000035eafd0> 
```

我没有找到一个很好的解决方案来解决这个问题。这是我的应用程序代码：

/app/models/image.rb

```
#encoding: utf-8
class Image < ActiveRecord::Base

  scope :public, joins(:gallery).where('images.public=true AND galleries.public=true')

  belongs_to :gallery
  attr_accessible :gallery_id, :name, :image, :remote_image_url, :desc, :public, :crop_x, :crop_y, :crop_w, :crop_h
  attr_accessor :crop_x, :crop_y, :crop_w, :crop_h
  mount_uploader :image, ImageUploader

  validates :gallery_id, presence: true
  after_update :crop_gallery_image

  # this method is needed and a part of a quickhack because of an bug in caarierwave, if you want to save files in a private folder
  def image_url(image_size)
    Rails.application.routes.url_helpers.image_url(image_id: self.id, image_size:     image_size, host: (Rails.env.production? ? 'xyz.de': 'localhost:3000'))
  end

  def crop_gallery_image
    image.recreate_versions! if crop_x.present?
  end  

end 
```

/app/uploaders/image_uploader.rb

```
#encoding: utf-8
class ImageUploader < CarrierWave::Uploader::Base
  include CarrierWave::RMagick

  storage :file

  #the following methods doesn't work @ the moment; i used an initializer to change the paths
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  def cache_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  version :thumb do
    resize_to_limit(200, 200) 
  end

  version :medium do
    resize_to_limit(800, 600)  
  end

  version :normal do
    resize_to_limit(1024, 768)
  end

  version :big do
    resize_to_limit(1440, 1024)  
  end

  version :gallery do
    process :crop
    resize_to_fill(920, 400)
  end

  def crop
    if model.crop_x.present?
      resize_to_limit(1024, 768)
      manipulate! do |img|
        x = model.crop_x.to_i
        y = model.crop_y.to_i
        w = model.crop_w.to_i
        h = model.crop_h.to_i
        img.crop!(x, y, w, h)
      end
    end
  end
end 
```

在我尝试上传图像后调用异常。我正在使用 Ruby 1.9.3-p125、Rails 3.2.3 和实际的 Carrierwave-Gem（主分支）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:01:37.687

我找到了解决方案。我必须先打电话给“ `mount_uploader :image, ImageUploader`”@！！！！

# java - 块级同步

> ID：10664534
> 
> 赞同：0
> 
> 时间：2012-05-19T10:52:01.637
> 
> 标签：java, multithreading, synchronization

我需要澄清有关块级同步的一些要点。

假设以下同步块**位于类的同一方法**中：

```
class A{

some_method(){

//BLOCK1
synchronized(OBJ1){
shared code...
}

//BLOCK2
synchronized(OBJ1){
shared code...
}

//BLOCK3
synchronized(OBJ2){
shared code...
}
}

} 
```

以下查询：

1）如果一个线程通过获取OBJ1的锁进入block1，那么只要第一个线程持有OBJ1的锁，其他线程就不能进入Block2，但其他线程可以同时运行block3，这对吗？

2）第一个线程在完成block1后进入block2是否需要再次获取OBJ1的锁？

3）如果第一个线程从block1调用block2中的一些代码，那么它是否必须释放在第一个块执行期间获得的OBJ1上的锁并再次获得它或者在第一个块期间获得相同的锁会起作用？

现在假设 block1 在一个类的方法中，而 blockk2 和 3 在**另一个类的方法中**

4) 与第 1 点相同，因为同步是通过获取某个第三类 obj (OBJ1,OBJ2) 的锁定而发生的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:00:41.210

1.  是的，这是正确的。
2.  是的，因为块在 OBJ1 上同步
3.  我不明白你的意思。如果您要问的是“锁是可重入的吗？”，那么是的。已经锁定对象的线程可以进入在同一对象上同步的另一个块。
4.  是的。代码在哪里并不重要。重要的是线程是否有锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:02:40.087

1) 是的，如果一个线程持有 OBJ1 锁，那么没有其他线程可以获取相同的锁

2) 是的，需要再次获取锁，因为它会在第 1 块结束时被释放

3) 不，线程不会阻塞它已经持有的锁

4) 是的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T11:13:44.660

1) 是
2) 是的，因为它在 BLOCK1 之外。

3) 与此相同的嵌套锁定持有（即已经获得）。

> > 现在假设 block1 在一个类的方法中，而 blockk2 和 3 在某个其他类的方法中
> > >> Ans: 只要锁定对象是内存中的同一个对象，结果就不会不同。

4) 是的

# amazon-ec2 - 在多个 ec2 实例上部署 asp.net 应用程序？

> ID：10664536
> 
> 赞同：0
> 
> 时间：2012-05-19T10:52:27.080
> 
> 标签：amazon-ec2

假设我创建了一个具有三个 ec2 实例的亚马逊负载均衡器：A、B、C。

每当我将 asp.net 应用程序部署到实例 A 时，负载平衡是否会在 B、C 实例中部署/更新它？

如果没有，怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:21:38.123

ELB（负载均衡器）与部署无关，至少没什么用处。它只是将流量拆分到来自客户端的传入 (http) 请求的不同实例。

**AWS Elastic Beanstalk（简单的方法）**

创建一个 Elastic Beanstalk 应用程序，您可以在其中通过 Amazon Visual Studio Toolkit 部署您的 asp.net 应用程序。该过程非常简单，您不必为所有实例进行部署。在构建项目并将其上传到 S3 后，beantalk 将在 20-60 秒内将新版本分发到所有实例，具体取决于大小。

优势：

*   很容易
*   现有工具
*   它是平台即服务 (PaaS)，而不是基础设施即服务 (IaaS)，如果您自己设置所有 AWS 资源则适用。

坏处：

*   您可以为每个 Beanstalk 应用程序部署**一个**“项目”，这意味着您无法部署不同的“虚拟目录应用程序”
*   也许您需要构建自己的自定义 Beanstalk AMI，但通常您可以使用 AWS 默认映像（beanstalk 主机管理器需要在实例上运行，否则将无法正常工作）
*   你可能会失去一点控制，但恕我直言，这不是问题

更多信息：

*   [https://aws.amazon.com/elasticbeanstalk/](https://aws.amazon.com/elasticbeanstalk/)
*   [https://forums.aws.amazon.com/forum.jspa?forumID=86](https://forums.aws.amazon.com/forum.jspa?forumID=86)
*   [http://aws.amazon.com/visualstudio/](http://aws.amazon.com/visualstudio/)

**更难的方式**

如果您已经设置了一个带有 3 个实例的负载均衡器，那么您的任务就是将代码部署到所有实例。

例如，您可以通过 Visual Studio 和 Web Deploy 部署到所有 3 个实例来执行此操作……您需要在此处使用实例本身的公共 dns 名称，而不是负载均衡器/应用程序 dns 名称。

您可以为应用程序目录使用某种网络服务器同步软件，例如 MS web deploy，它应该可以工作，但设置并不像恕我直言，而且肯定比 Beanstalk 复杂。

更多信息：

*   [http://www.iis.net/downloads/microsoft/web-deploy](http://www.iis.net/downloads/microsoft/web-deploy)

# xml - Adobe Air - 删除 XML 条目

> ID：10664538
> 
> 赞同：1
> 
> 时间：2012-05-19T10:52:41.760
> 
> 标签：xml, actionscript-3, air

如何使用 Adob​​e Air 删除 XML 条目？

这就是我的 XML 的样子：

```
<?xml version="1.0" encoding="utf-8"?>
    <ENTRY "IMG_ID="01042012"/>
    <ENTRY "IMG_ID="03052012"/>
    <ENTRY "IMG_ID="09052012"/> 
```

这是我加载 XML 的代码：

```
var xmlGallery:XML

    function readGalleryXml(e:Event = null):void
    {
        var fileGallery:File = File.applicationStorageDirectory.resolvePath("gallery.xml");
        if (fileGallery.exists)
        {
            var streamGallery:FileStream = new FileStream();
            try
            {
                streamGallery.openAsync(fileGallery,flash.filesystem.FileMode.READ);
                xmlGallery = new XML(streamGallery.readUTFBytes(streamGallery.bytesAvailable));
            }
            finally
            {
                streamGallery.close();
            }
        }
    } 
```

谢谢。乌里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T02:44:45.073

[您可以按照此处](http://edsyrett.wordpress.com/2008/07/26/xmlremovechild/)所述滚动您自己的删除子功能：

```
 public static function deleteNode(node:XML):void
 {
     if (node != null && node.parent() != null)
     {
         delete node.parent().children()[node.childIndex()];
     }
} 
```

# javascript - 推荐人/位置 - javascript:window["contents"]

> ID：10664539
> 
> 赞同：1
> 
> 时间：2012-05-19T10:52:47.050
> 
> 标签：javascript, http, browser

任何人都可以解释以下javascript变量如何：

```
document.referrer
document.location.href 
```

或 http REFERRER 标头，可能是 'javascript:window["contents"]' ？

我不仅不明白如何将它们设置为 javascript uri - 而且 window.contents 在我所知道的任何浏览器中都不是标准 DOM 属性......（它是 window["contents"]，而不是 window[ “内容”]）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:41:38.990

我相信我找到了解决方案..

有一些 javascripts 在野外似乎使用这样的代码（东西）创建 iframe：

```
var contents = '<html>......</html>';
var ifr = document.createElement('iframe');
ifr.contentWindow.open();
ifr.contentWindow.write(contents); 
```

某些特定的组合有时最终会指定 iframe 的 href 或引荐来源网址为“javascript:window['contents']” - 即临时保存页面数据的 javascript 变量。

（还没有完全确定细节，但这是基本想法）

# java - 读取文件时java中的日期和时间转换

> ID：10664541
> 
> 赞同：2
> 
> 时间：2012-05-19T10:53:04.617
> 
> 标签：java, parsing, datetime, file-io

我在java中遇到日期和时间转换问题。

实际上，我正在从一个文件中读取一个字符串，该文件将该字符串拆分并将其存储到一个字符串数组中，现在用这个数组初始化一些变量。我的问题是我将此值保存到另一个文件中，在保存时，日期格式正在更改我发布我的代码。

**我正在从文件中读取的字符串：**

```
2012 年 5 月 2 日星期三 12:07:54 EST，测试 1,20 的任务 1

```

**我写的代码：**

```
String s = br.readLine();
String[] list = s.split(",");
this.description = list[0];                
this.weight = Integer.parseInt(list[1]);
this.dueDate = new Date(list[2]);
//this.dueDate = dateFormat.parse(list[2]);
//SimpleDateFormat dateFormat = new SimpleDateFormat("E,dd MMM yyyy HH:mm.ss");
pw.println(description + "," + weight + "," + dueDate); 
```

**我的代码的输出：**

```
Thu May 03 03:07:54 EST 2012,Task 1 for Test 1,20

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:16:14.607

我不同意@GrefHNZ 的回答，因为它不适用于`list[0] = Wed May 02 12:07:54 EST 2012`. Wed 和 May 无法在输入中解析。

我做了这个解决方案（仅适用于 JDK7）：

```
public static void main(String[] args)
    String s = "Wed May 02 12:07:54 EST 2012,Task 1 for Test 1,20";
    String[] list = s.split(",");
    String dateDesc = list[0];  
    String dateToParse = createStringToParse(dateDesc); //return "3 05 02 12:07:54 CEST 2012"
    SimpleDateFormat dateFormat = new SimpleDateFormat("u MM dd kk:mm:ss z yyyy");
    Date dueDate=null;
    try {
        dueDate = dateFormat.parse(dateToParse);
    } catch (ParseException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    }
    System.out.println(dueDate); //print "Wed May 02 12:07:54 CEST 2012"
 }
 private static String createStringToParse(String dateDesc) {
    int idx=dateDesc.indexOf(" ");
    String day = dateDesc.substring(0,idx);
    String month = dateDesc.substring(idx+1,dateDesc.indexOf(" ",idx+1));
    String rest = dateDesc.substring(dateDesc.indexOf(month)+month.length());
    switch(day){
        case "Mon" :
            day="1";break;
        case "Tue" :
            day="2";break;
        case "Wed" :
            day="3";break;
        case "Thu" :
            day="4";break;
        case "Fri" :
            day="5";break;
        case "Sat" :
            day="6";break;
        case "Sun" :
            day="7";break;
    }

    switch(month){
        case "Jan" :
            month="01";break;
        case "Feb" :
            month="02";break;
        case "Mar" :
            month="03";break;
        case "Apr" :
            month="04";break;
        case "May" :
            month="05";break;
        case "Jun" :
            month="06";break;
        case "Jul" :
            month="07";break;
        case "Aug" :
            month="08";break;
        case "Sep" :
            month="09";break;
        case "Oct" :
            month="10";break;
        case "Nov" :
            month="11";break;
        case "Dec" :
            month="12";break;
    }

    return day+" "+month+rest.replace("EST", "CEST");
} 
```

要了解请`SimpleDateFormat`阅读[Oracle 文档](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T11:22:11.607

您需要使用`SimpleDateFormat`来**解析**输入日期。

假设您的输入数据按照您发布的格式进行了格式化（因此日期为 list[0]），请将其放入：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy");
this.dueDate = dateFormat.parse(list[0]); 
```

重要的是您告诉它检查时区 ( `zzz`)。这应该算出所描述的正确的、实际的时间。

如果您只是打印出来，它将（默认情况下）在您当地的时区打印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T10:56:49.207

尝试使用该`.toString()`方法并将您的转换`this.weight`为`String`不解析。

# regex - 正则表达式批量重命名 OS X 终端中的文件

> ID：10664542
> 
> 赞同：40
> 
> 时间：2012-05-19T10:53:13.867
> 
> 标签：regex, macos, shell, sed, awk

我正在寻找一种使用正则表达式批量重命名文件的方法，即

```
s/123/onetwothree/g 
```

我记得我可以将 awk 和 sed 与正则表达式一起使用，但无法弄清楚如何将它们连接在一起以获得所需的输出。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2014-12-31T22:46:25.353

您可以安装基于 perl 的重命名实用程序：

```
brew install rename 
```

而不仅仅是像这样使用它：

```
rename 's/123/onetwothree/g' * 
```

如果您想在不重命名任何文件的情况下测试您的正则表达式，只需添加 -n 开关

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-19T11:04:19.790

执行重命名操作的一种有效方法是在 sed 管道中构造重命名命令并将它们输入 shell。

```
ls |
sed -n 's/\(.*\)\(123\)\(.*\)/mv "\1\2\3" "\1onetwothree\2"/p' |
sh 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-09-26T08:37:44.473

我对友好的递归正则表达式文件名重命名器的看法，默认情况下仅模拟替换并显示生成的文件名。

`-w`当您对试运行结果满意时，用于实际写入更改，以`-s`抑制显示不匹配的文件；`-h`或`--help`将显示使用说明。

最简单的用法：

```
# replace all occurences of 'foo' with 'bar'
# "foo-foo.txt" >> "bar-bar.txt"
ren.py . 'foo' 'bar' -s

# only replace 'foo' at the beginning of the filename
# "foo-foo.txt" >> "bar-foo.txt"
ren.py . '^foo' 'bar' -s 
```

也支持匹配组（例如`\1`，`\2`等）：

```
# rename "spam.txt" to "spam-spam-spam.py"
ren.py . '(.+)\.txt' '\1-\1-\1.py' -s 

# rename "12-lovely-spam.txt" to "lovely-spam-12.txt"
# (assuming two digits at the beginning and a 3 character extension 
ren.py . '^(\d{2})-(.+)\.(.{3})' '\2-\1.\3' -s 
```

> [`-w`注意：当您测试结果并想要实际编写更改时，不要忘记添加。]

适用于 Python 2.x 和 Python 3.x。

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
from __future__ import print_function
import argparse
import os
import fnmatch
import sys
import shutil
import re

def rename_files(args):

    pattern_old = re.compile(args.search_for)

    for path, dirs, files in os.walk(os.path.abspath(args.root_folder)):

        for filename in fnmatch.filter(files, "*.*"):

            if pattern_old.findall(filename):
                new_name = pattern_old.sub(args.replace_with, filename)

                filepath_old = os.path.join(path, filename)
                filepath_new = os.path.join(path, new_name)

                if not new_name:
                    print('Replacement regex {} returns empty value! Skipping'.format(args.replace_with))
                    continue

                print(new_name)

                if args.write_changes:
                    shutil.move(filepath_old, filepath_new)
            else:
                if not args.suppress_non_matching:
                    print('Name [{}] does not match search regex [{}]'.format(filename, args.search_for))

if __name__ == '__main__':

    parser = argparse.ArgumentParser(description='Recursive file name renaming with regex support')

    parser.add_argument('root_folder',
                        help='Top folder for the replacement operation',
                        nargs='?',
                        action='store',
                        default='.')
    parser.add_argument('search_for',
                        help='string to search for',
                        action='store')
    parser.add_argument('replace_with',
                        help='string to replace with',
                        action='store')
    parser.add_argument('-w', '--write-changes',
                        action='store_true',
                        help='Write changes to files (otherwise just simulate the operation)',
                        default=False)
    parser.add_argument('-s', '--suppress-non-matching',
                        action='store_true',
                        help='Hide files that do not match',
                        default=False)

    args = parser.parse_args(sys.argv[1:])

    print(args)
    rename_files(args) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-19T10:56:17.797

```
files = "*"
for f in $files; do
     newname=`echo "$f" | sed 's/123/onetwothree/g'`
     mv "$f" "$newname"
done 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-10-02T14:09:29.633

Namechanger 超级好用。它支持用于搜索和替换的正则表达式：考虑到我正在使用以下正则表达式进行超级复杂的重命名： `\.sync-conflict-.*\.` 这是一个救生员。

[![在此处输入图像描述](../Images/fda779fce5732849ffdce8237a2cd797.png)](https://i.stack.imgur.com/yzMQR.jpg)

# plugins - Django CMS 插件自定义模板

> ID：10664543
> 
> 赞同：0
> 
> 时间：2012-05-19T10:53:20.453
> 
> 标签：plugins, django-templates, django-cms

我使用 django-cms 2.2 和 imagestore 作为画廊插件。但我需要自定义厨房视图。ImageStore 使用 imagestore_album.html 模板来渲染画廊，我创建了它并放入我的 tempaltes 文件夹。如何设置 imagestore 以使用我的模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:17:01.427

刚刚添加 cms/plugins/imagestore_album.html 现在插件使用我的模板，太容易了

# c# - c# 和存储过程，每个 SProc 的唯一代码？

> ID：10664551
> 
> 赞同：0
> 
> 时间：2012-05-19T10:54:19.487
> 
> 标签：c#, sql-server, c#-4.0, stored-procedures

我正在编写一个应用程序，它首先连接到数据库并检索一个包含所有存储过程、输入及其相关数据类型列表的 dt。然后，用户从组合框中选择了一个 SProc，并且必须输入必要的输入。然后，应用程序将连接到数据库并使用用户指定的输入运行选定的 SProc，并在数据表中返回结果。

我不确定是否需要为每个 SProc 编写特定的方法。我假设是这样，因为我不知道如何说明其他参数是什么。

很抱歉第一次没有说清楚。如果这还不够清楚，请告诉我。

示例如下（这是别人的代码）

```
public static GetDaysDTO GetDays(int offset)
    {
        GetDaysDTO ret = new GetDaysDTO { TODAY = DateTime.Now, TOMORROW = new DateTime(2012, 01, 01) };
        SqlConnection con = new System.Data.SqlClient.SqlConnection(@"Server = FrazMan-pc\Programming; Database = master; Trusted_Connection = True");
        SqlCommand cmd = new System.Data.SqlClient.SqlCommand
        {
            CommandText = "GetDays",
            CommandType = System.Data.CommandType.StoredProcedure,
            CommandTimeout = 1,
            Connection = con,
            Parameters = { new System.Data.SqlClient.SqlParameter("@offset", System.Data.SqlDbType.Int) { Value = offset } }
        };
        using (con)
        {
            con.Open();
            using (System.Data.SqlClient.SqlDataReader reader = cmd.ExecuteReader())
            {
                while (reader.Read())
                {
                    ret.TODAY = DateTime.Parse(reader[0].ToString());
                    ret.TOMORROW = DateTime.Parse(reader["TOMORROW"].ToString());
                }
            }
        }

        return ret;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:00:44.583

您正在寻找的是一种名为 Factory 的设计模式，以及一种告诉在每个 SP 调用上创建哪个类型的数据表的方法 如果您有每个过程的参数列表，您可以通过循环实例 化
Parameters 对象：
类将用于填充从 db 接收到的 sp 的参数

```
class ParamData
{
  public object Data;
  public SqlDbType type;
  public string ParamName;
} 
```

然后稍后，在调用 sp 时，您还应该将您的 ParamData 对象传递给该方法，并使用它在循环中动态填充您的 sp 的参数：

```
List<ParamData> list = new List<ParamData>();
//initialize command here as u did
SqlCommand cmd;
foreach (ParamData param in list)
{
  SqlParameter sqlParam = new SqlParameter(param.ParamName, param.type);
  sqlParam.Value = param.Data;
  cmd.Parameters.Add(sqlParam);
}
//execute the command
//fill the datatable with result
DataTable dt = GetTableBySPName("GetDays");
SqlDataReader reader = cmd.ExecuteReader();
dt.Load(reader); 
```

您唯一需要添加的是您的类型化数据表和过程返回的表之间的映射。
您可以添加一个方法来执行此操作：

```
private DataTable GetTableBySPName(string name)
{
  DataTable dt = null;
  switch (name)
  {
   case "GetDays":
   {
    dt = new GetDatsDTO();
    break;
   }
  }
 return dt;
} 
```

# database - 用于数据库结构的 Flyway/Liquibase 和用于数据库插入的 DBUnit？

> ID：10664553
> 
> 赞同：4
> 
> 时间：2012-05-19T10:54:32.167
> 
> 标签：database, dbunit, liquibase, flyway

我的应用程序有以下场景：

*   1 台生产服务器
*   1 台测试服务器
*   n 开发计算机

对于数据库迁移，我们使用 Hibernate Schema Update 来为 Schema 和 DBUnit 填充所有生产数据（在所有服务器/计算机上）。模式更新完成后，我为新模式生成了一个新的 DTD 文件，因此我可以重新导入 DBUnit XML。应用程序在启动时使用 XML 文件更新数据库（仅在开发和测试服务器/计算机上！）

当然，这种方法不是最优的和脆弱的。所以我研究了 Liquibase 和 Flyway。两者似乎都是很棒的工具，但我没有得到的是：如何迁移数据？就我而言，我每周转储一次生产系统的数据，并将其作为 DBUnit XML 文件添加到应用程序源代码管理中，因此所有开发人员都有“新鲜”数据，测试服务器也有当前生产数据。

我在 Liquibase 和 Flyway 中看到的问题是，没有解决方案如何从数据库数据中进行自动差异并自动生成迁移更改。

所以我的想法是以下步骤：

1.  将 Hibernate 设置为验证而不是更新。
2.  当需要更改 STRUCTURAL 数据库时，我将其添加到主要版本的迁移脚本中
3.  迁移脚本中没有数据库插入。
4.  根据新的数据库结构为 DBunit 生成新的 DTD
5.  从生产数据库生成 DBUnit XML。

另一个想法是利用 flyways JavaMigration 并提供基于 DBUnit 的初始数据库转储。数据库数据的所有其他更改将在迁移脚本中处理。但仍然存在问题：如何从当前迁移脚本状态和生产数据库状态进行差异？

如果有人能给我提示如何处理我的场景，那就太棒了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:14:49.847

简短的回答是，您的所有更改都将通过 Liquibase 或 Flyway 完成。

我们使用 Flyway，具有相同的产品/测试/开发设置。我们使用存储在源代码管理中的 Flyway 迁移脚本进行所有数据库更改（结构或元数据）。每次我们对环境进行新部署时，我们首先在那里运行迁移脚本（使用命令行工具或 maven 插件）。代码首先进入开发环境，在那里进行集成测试，然后继续测试和生产。

需要注意的主要事情是 Flyway 需要对文件进行线性版本控制，因此如果两个开发人员同时签入迁移，其中一个将不得不重命名他们的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T22:15:33.337

如果您的目标是在 DEV 和 TEST 环境中使用 PROD 数据库的转储，我会：

*   将数据库迁移工具配置为在应用程序启动时运行（Flyway 和 Liquibase 都通过各自的 API 支持这一点）
*   将所有数据库结构迁移与应用程序一起打包
*   从 PROD 转储数据和结构

这样，当 PROD 数据库恢复到 DEV 或 TEST 时，迁移工具的旧元数据表也会恢复。

当应用启动时，迁移工具会发现数据库结构已经过时，并将其升级到最新版本。完毕。

无需为此使用 DBUnit。

# php - Chamilo 2.1 - 如何正确创建新主题？

> ID：10664554
> 
> 赞同：2
> 
> 时间：2012-05-19T10:54:35.333
> 
> 标签：php, content-management-system, themes

我是 Chamilo 2.1 的新手，它是一个开源 LMS。

几天前，我最初在官方 chamilo 支持论坛上发布了这个问题。但是只要没有人知道或愿意在那里回答，我就在这里转发它，希望也许有人可以对此事有所了解，愿意分享。[[原帖](http://www.chamilo.org/forum/viewtopic.php?f=17&t=2206)]

我想知道除了当前主题（aqua，ruby）之外，是否还有一种“正确”的方式来创建新主题。

我在他们的论坛中搜索到的内容，尚未有人尝试创建新主题，而只是修改了基本主题（aqua）。也就是说，正如他们所说，通过更改 aqua 主题中的 css，并可能找到标题图像的地址并将其替换为他们选择的具有相同名称的一个。

还没有尝试过上述方法，但是，这听起来不像是正确的方法。此外，我也想保留 aqua 主题，而不是破坏它。

基于这个想法，我的一个想法是复制 ./common/libraries/resources/ 中的“aqua”文件夹并将其重命名为“aqua2”。尽管在管理设置面板中存在“aqua2”并且可以选择（在 aqua 和 ruby​​ 下），但在激活它时，它并没有真正起作用......

但是试图在 Chamilo 2.1 文件夹中挖掘，我设法在 ./common/libraries/php/util/theme_generator 下找到了一个名为“theme_generator.php”的文件。我看到它做了很多创建文件夹、复制 aqua 主题文件等的事情，但它真的像我想的那样做吗？它是从网络界面内部的某个地方调用的吗？（顺便说一句，我不知道任何 php，我只是在做 css 的东西）。

我将不胜感激有关此事的任何反馈或帮助。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T20:29:01.493

在已经发布的 chamilo lcms connect 版本（2.1 和 3.0）中还没有主题管理器，而且 afaik 也没有计划在下一个版本中使用。

Chamilo lcms connect 是一个包的集合，有些是必须安装的（核心）有些是可选的。

每个包都处理自己的主题、图像、翻译等。因此，如果您想要一个新主题，您确实需要复制/重命名您要使用的所有包中的所有 aqua 文件夹。

在我们的生产系统中，我们确实这样做了，但我们没有在大多数文件夹中复制/实现 CSS，我们只是提供（空）文件并从 aqua CSS 文件中导入 CSS。

您确实需要在您将使用的每个包中同时拥有一个包含必要 CSS 文件的 CSS 文件夹和一个主题的图像文件夹，否则您的主题将无法工作。

您可能只需要更改 common 包中的 CSS 文件，因为在那里设置了主要颜色以及页眉和页脚。

我可以想象将来会有一个自动脚本为您执行此操作，但目前，或者可能会有一种机制在找不到文件时默认为 aqua 主题，但现在开发人员正在专注于其他事情所以你必须自己弄清楚。

chamilo lcms connect (2.1, 3.0) 和 chamilo lms (1.*) 不共享任何代码并且以不同的方式处理事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:20:14.217

没有关于如何编写新主题的文档（据我所知）。您可能想在本周尝试 IRC 频道以获得更多关注，或*在*lists.chamilo.org 上写信给 dev（我会批准您的邮件，因此您不必订阅）。

补充一点，Chamilo 1.8 和 2.1 不是同一个产品，它们将分别重命名为 Chamilo LMS 和 Chamilo Connect Core。两者都由 Chamilo 协会管理，但有两个不同的团队正在研究它们（显然沟通频繁）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T12:01:55.493

我没有使用过 Chamilo 2.1，但我在 Chamilo 1.8.8.4 方面经验丰富。我通过复制已经存在的主题更改了主题，并通过修改 css 将其更改为我喜欢的。在那里我可以操纵颜色。我更改了`header-logo.png`目录中的`css/nameoftheme/images`。确保图像不大于 316 x 84 像素，否则图像不会显示。

# javascript - 更改 iframe src 中的链接

> ID：10664572
> 
> 赞同：-4
> 
> 时间：2012-05-19T10:57:42.560
> 
> 标签：javascript, jquery

以下是 iframe 代码，我想知道如何更改 src 链接，当我说我将单击任何按钮时，它会更改链接并相应地显示结果而无需重新加载页面

谢谢，

```
<iframe name="reloader" id="reloader" width="500" height="400" src="http://www.google.com/"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:00:17.230

```
$('#yourBtn').on('click', function(){
   $('#reloader').attr('src', 'yourNewLink'); 
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:07:33.320

这是完美的解决方案，如果您可以使用链接代替按钮：

[基本 jQuery 问题：如何通过单击链接更改 iframe src？](https://stackoverflow.com/questions/1473295/basic-jquery-question-how-to-change-iframe-src-by-clicking-a-link)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T11:22:13.557

（以防你过于复杂）

```
 <a href="http://www.somewebsite.com" target="reloader">
            click here
         </a>

        <iframe name="reloader" 
             id="reloader" width="500" 
             height="400" 
             src="http://www.google.com/"/> 
```

没有 jquery（对 seo 友好并且降级良好）

```
 <a href="http://www.somewebsite.com" class="mybutton" target="reloader">
            click here
         </a>

        <iframe name="reloader" 
             id="reloader" width="500" 
             height="400" 
             src="http://www.google.com/"/>

       <script type="text/javascript">

           $(".mybutton").click(function(e) {

              /* stop the link */
              e.preventDefault();

           /* get the url from the link */
           var url = $(this).attr("href");

          /* do something with it */
           $("#reloader").attr("src",url);

           });

       </script> 
```

# php - 如何在 AJAX 中调用外部 PHP 文件

> ID：10664574
> 
> 赞同：1
> 
> 时间：2012-05-19T10:58:12.100
> 
> 标签：php, javascript, ajax

我有代码来检查 test.php 文件中的用户名和密码。

但是当我调用这个 ajax 时，它总是显示用户名和密码错误的警报。
谁能告诉我哪里出错了？

```
$.ajax({
    type: "GET",
    url: 'http://externalurl/external/test.php',
    contentType: "text/html",
    data: 'uname=' + uname + '&pass=' + pass,
    success: function (data) {
        if (data == 'success') {
            alert('success');
        } else {
            alert('Wrong user name and password.Please try again');
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:18:52.067

```
$.ajax({
    type: "GET",
    url: 'test.php',
dataType: 'jsonp',
    contentType: "text/html",
    crossDomain:'true',
    data: {uname: "admin", pass: "admin"},
    success: function (json) {
        //process the json here.
    }
}); 
```

您`data`对 ajax 的字段使用了不正确的格式。

不，Javascript 通常不允许您通过 ajax 从外部服务器访问数据。它会给出

> Access-Control-Allow-Origin 不允许Origin http:// *externalhost 。*

**编辑：**

但是，您可以设置`crossDomain` 并`dataType:'jsonp'`从外部服务器获取 JSON 数据。

# javascript - 显示随机背景图片

> ID：10664575
> 
> 赞同：0
> 
> 时间：2012-05-19T10:58:22.023
> 
> 标签：javascript, jquery, image, background

我有一个带有背景图像的元素，是否可以将该背景图像更改为我拥有的随机图像 URL？

因此，当用户加载页面时，将显示随机背景图像。

# 更新

* * *

感谢所有回答我问题的人，你们都很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:00:21.827

是的。这是一个例子：

```
$(document).ready(function() {
    $("body").css("background-image", "url("+your_random_image_url+")");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T11:02:15.400

将图像文件命名为“image1.jpg”“image2.jpg”等等。生成一个随机数

```
Math.floor(Math.random()*range_of_your_image_nums+1); 
```

然后使用此数字将您的随机图像加载为

```
$("#id_of_your_element").css("background","<url>"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T11:03:44.327

这是执行此操作的示例脚本，以下是我执行此操作的方式。使用 IE 6 和 Firefox（2 和 3）测试。背景图像固定在正确的站点上，不会滚动。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Untitled</title>
<script type="text/javascript">
function changeImg(imgNumber) {
var myImages = ["images/image0.jpg", "images/image1.jpg", "images/image2.jpg", "images/image3.jpg"];
var imgShown = document.body.style.backgroundImage;
var newImgNumber =Math.floor(Math.random()*myImages.length);
document.body.style.backgroundImage = 'url('+myImages[newImgNumber]+')';
}
window.onload=changeImg;
</script>
<style type="text/css">
.bg {background-attachment:fixed; background-repeat: no-repeat; background-position:top right;}
</style>
</head>
<body class="bg">
<p>Some text</p>
<!-- put a lot text lines here to see that the background stays fixed. -->
<p>Some text</p>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T11:04:20.957

保留一个包含所有背景的数组，并在`$(document).ready()`

```
$(document).ready(function() {
    var backgrounds = ['link1', ..., 'linkN'];
    $("#yourElementId").css("background-image: url("+backgrounds[Math.round(Math.random() * (backgrounds.length - 1))] +")");
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-19T11:06:05.957

```
var backgrounds = ['',
                   'bg3.jpg',
                   'bg1.jpg',
                   'bg1013.jpg',
                   'bg123.gif',
                   'bg553.jpg',
                   'bg663.png',
                   'bgdaas3.jpg',
                   'bgdw3.jpg',
                   'bgdd3.jpg',
                   'dasd.png'
                  ];

$('#elementID').css('background', 'url('+backgrounds[Math.random()*10]+')'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-19T11:21:09.227

```
$(document).ready(function() {
    var images = ["the-nude-art.jpg", "the-secret-pic.jpg","topless-pic.png","oolala-pic.jpg"]; 
    var rand_image = images[Math.floor(Math.random() * images.length)];
    var my_site_image_folder_path  = 'http://www.xyz.com/images/';
    $('body').css('background-image', 'url("' + my_site_image_folder_path + rand_image + '")');
}); 
```

# java - 当多个具有相同 ID 的组件位于一个布局中时，旋转后的值错误

> ID：10664577
> 
> 赞同：2
> 
> 时间：2012-05-19T10:58:32.547
> 
> 标签：java, android, android-layout

我创建了一个可删除的`EditText`. 这是布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal" >

<EditText
    android:id="@+id/cacEditText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:inputType="text"
    android:paddingRight="35dp" />

<Button
    android:id="@+id/cacClearButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="5dp"
    android:layout_marginRight="5dp"
    android:background="@android:drawable/ic_input_delete"
    android:visibility="invisible" />

</RelativeLayout> 
```

问题是，当我将更多这些放入一个布局并旋转到横向时，它们突然都具有相同的值。我想这是因为系统按 ID 恢复值，并且每个组件都由相同 ID 的元素组成。我怎么解决这个问题？

**更多信息：**

布局中的可删除`EditText`( )`cz.kns.uome.component.CleanAndClearEditText`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/cz.kns.uome"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="5dp" >

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <cz.kns.uome.component.CleanAndClearEditText
                    android:id="@+id/nameEditText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_toLeftOf="@+id/contactPickerButton"
                    app:hint="@string/person_name"
                    app:type="textPersonName" />

                <ImageButton
                    android:id="@+id/contactPickerButton"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:contentDescription="@string/select_contact"
                    android:src="@drawable/ic_action_dropdown" />
            </RelativeLayout>

            <cz.kns.uome.component.CleanAndClearEditText
                android:id="@+id/emailEditText"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                app:hint="@string/person_email_opt"
                app:type="textEmailAddress" />

            <cz.kns.uome.component.CleanAndClearEditText
                android:id="@+id/descriptionEditText"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                app:hint="@string/description_opt"
                app:type="text" />

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <Button
                    android:id="@+id/saveButton"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="5"
                    android:text="@string/save" />

                <Button
                    android:id="@+id/cancelButton"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="2"
                    android:text="@string/cancel" />
            </LinearLayout>
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

**java类**

```
public class CleanAndClearEditText extends RelativeLayout {

    private final EditText editText;
    private final Button clearButton;

    public CleanAndClearEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.clean_and_clear_edit_text, this);

        TypedArray typedArray = getContext().obtainStyledAttributes(attrs,
                R.styleable.ClearAndCleanEditText);

        // ?????
        // I have to somehow access that edittext here but static id does not work
        editText = (EditText) findViewById(R.id.cacEditText);
        editText.addTextChangedListener(textWatcher);
        editText.setHint(typedArray.getString(R.styleable.ClearAndCleanEditText_hint));

        String type = typedArray.getString(R.styleable.ClearAndCleanEditText_type);
        if (type != null) {
            editText.setInputType(InputTypes.get(type));
        }

        clearButton = (Button) findViewById(R.id.cacClearButton);
        clearButton.setOnClickListener(clearButtonListener);
    }
    // rest ommited
} 
```

![正常状态](../Images/f54e5a47749be8c8daf42bf55bf0d403.png) ![旋转](../Images/c8dc916eca06e3a4c865e58803573fc3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T00:27:43.160

我正在处理这个问题，我能够通过删除包含自定义视图的布局中的所有视图来“解决”这个问题，实现这个：

```
public void onSaveInstanceState(Bundle outState) {
    // TODO Auto-generated method stub
    super.onSaveInstanceState(outState);
    // retain your data in the bundle then remove views
    layout.removeAllViewsInLayout();
} 
```

因此，您可以在 onCreate 方法中从包中取回数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T13:52:29.407

看看这是否有帮助：

```
public class CleanAndClearEditText extends RelativeLayout {

    private final EditText editText;
    private final Button clearButton;

    public CleanAndClearEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.clean_and_clear_edit_text, this);
        RelativeLayout rl = (RelativeLayout) getChildAt(0); // consider using a merge tag in R.layout.clean_and_clear_edit_text instead of the parent RelativeLayout
        //clearButton = (Button) findViewById(R.id.cacClearButton);
        clearButton = (Button) rl.getChildAt(1);
        clearButton.setOnClickListener(null);
        //editText = (EditText) findViewById(R.id.cacEditText);
        editText = (EditText) rl.getChildAt(0);
    }

    @Override
    protected Parcelable onSaveInstanceState() {
        Parcelable superState = super.onSaveInstanceState();
        SavedState ss = new SavedState(superState);
        ss.stateToSave = editText.getText().toString();
        return ss;

    }

    @Override
    protected void onRestoreInstanceState(Parcelable state) {
        if (!(state instanceof SavedState)) {
            super.onRestoreInstanceState(state);
            return;
        }
        SavedState ss = (SavedState) state;
        super.onRestoreInstanceState(ss.getSuperState());
        editText.setText(ss.stateToSave);
    }

    static class SavedState extends BaseSavedState {
        String stateToSave;

        SavedState(Parcelable superState) {
            super(superState);
        }

        private SavedState(Parcel in) {
            super(in);
            stateToSave = in.readString();
        }

        @Override
        public void writeToParcel(Parcel out, int flags) {
            super.writeToParcel(out, flags);
            out.writeString(stateToSave);
        }

        // required field that makes Parcelables from a Parcel
        public static final Parcelable.Creator<SavedState> CREATOR = new Parcelable.Creator<SavedState>() {
            public SavedState createFromParcel(Parcel in) {
                return new SavedState(in);
            }

            public SavedState[] newArray(int size) {
                return new SavedState[size];
            }
        };
    }
} 
```

和修改后的`R.layout.clean_and_clear_edit_text`文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal" >

    <EditText
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:inputType="text"
        android:paddingRight="35dp" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="5dp"
        android:background="@android:drawable/ic_input_delete"
        android:visibility="invisible" />

</RelativeLayout> 
```

**编辑：** 代码的主要部分来自我作为评论发布的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T11:43:51.327

好的，我看到您正在夸大自定义代码并将其插入到线性布局中。您应该使用 ListView 并实现您的 ListAdapter。您可以自定义 ListItem 以满足您的需求。我就是这样做的。

# java - 在 android 应用程序中使用切换按钮

> ID：10664583
> 
> 赞同：1
> 
> 时间：2012-05-19T10:59:40.493
> 
> 标签：java, android, android-widget

我正在将此代码用于我的 android 应用程序。但是这段代码中的问题是它在模拟器上安装时可以完美运行。一旦我尝试在我的手机中安装它，它就会安装，但是在打开应用程序时它会显示错误消息，因为应用程序没有响应。我需要使用开关按钮。还有其他方法可以使用它吗？

```
 switch1= (Switch) findViewById(R.id.switch1);

    switch1.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v) 
        {  
             if(switch1.getText().toString().equals("On"))
             {
                String message = "t030s005n123456";                 

                sendSMS(phoneNo, message);          
             }

             else if(switch1.getText().toString().equals("Off"))
             {
                String message = "notn123456";                 

                sendSMS(phoneNo, message);  
             }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:32:40.820

switch1= (Switch) findViewById(R.id.switch1);

```
Api levels lesser than 14 does not support your switch1 obj must be null.. 
place if(switch1!=null)
{
//click listener
} 
```

还要确保您的设备升级到 api 级别 14 `ICE_CREAM_SANDWICH`。

**由于开关小部件来自 api 级别 14。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:11:59.787

`sendSms()`在新线程中调用方法。这只是一个快速修复。

```
new Thread(new Runnable() {
        @Override
        void run() {
            sendSms();
        }
    }
}).start(); 
```

或者，您可能希望在完成发送任务时显示进度对话框并执行其他操作。在这种情况下，使用`AsyncTask`. 谷歌的好例子。

# java - 对不可比较的对象进行排序

> ID：10664589
> 
> 赞同：2
> 
> 时间：2012-05-19T11:00:06.110
> 
> 标签：java, sorting

我有一个不可比较的对象列表。但是，我仍然想根据提供的索引位置数组对这个对象列表进行排序。对此列表进行排序的最快和最有效的方法是什么？这是一个例子：

```
List<Colour> list = new ArrayList<Colour>();
list.add(Colour.BLUE);
list.add(Colour.GREEN);
list.add(Colour.RED);
list.add(Colour.YELLOW);
list.add(Colour.GREEN);

int[] order = new int[] {3, 1, 2, 0, 4}; 
```

最终列表应如下所示：

```
[YELLOW, GREEN, RED, BLUE, GREEN] 
```

我的具体要求是 Java 解决方案，但我也有兴趣了解其他语言的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T11:03:41.297

为什么不直接从索引创建列表？不需要“排序”。

```
List<Colour> sortedList = new ArrayList<Colour>();
for (int index : order) {
    sortedList.add(list.get(index));
} 
```

或 C#：

```
var sorted = order.Select(index => list[index]).ToList(); 
```

# java - 在 Jelastic 中帐户到期后取消绑定自定义域

> ID：10664591
> 
> 赞同：0
> 
> 时间：2012-05-19T11:00:21.600
> 
> 标签：java, dns

我无法解除绑定到[http://boseapp1.jelastic.servint.net/的自定义域 ( www.udhc.co.in )](http://boseapp1.jelastic.servint.net/)

在我的 jelastic 帐户过期到另一个域后，我从我的域注册商的控制面板中修改了设置（CNAME 记录）。因此，www.udhc.co.in 不应再指向[http://boseapp1.jelastic.servint.net/](http://boseapp1.jelastic.servint.net/)。

但是，www.udhc.co.in 仍然指向旧的（过期的）应用程序域。

Jelastic 控制面板上的仪表板甚至没有在我的试用期到期后取消绑定的选项！

如何尽快解除绑定自定义域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:40:51.400

Jelastic 仪表板中的绑定仅用于内部解析目的。因此，当您从 CNAME 记录中删除 Jelastic URL 时，您的域 www.udhc.co.in 将停止指向[http://boseapp1.jelastic.servint.net/](http://boseapp1.jelastic.servint.net/)。您的问题的可能原因是您的域名注册商缓存了 CNAME 记录一段时间。尝试联系他们的支持以找出答案。

# iphone - 将多个值传递给iphone中的webservice

> ID：10664599
> 
> 赞同：1
> 
> 时间：2012-05-19T11:01:25.030
> 
> 标签：iphone, objective-c, xml, soap

我想访问一个网络服务，想传递 2 个参数。

当我运行下面的代码时，会显示此错误：

```
@countryname not supplied 
```

我已经将 2 个参数传递为`txtcity`和`txtcountry`。

```
-(IBAction)FindWords:(id)sender
{
NSString *soapMsg =    
[NSString stringWithFormat:  

 @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"

 "<soap:Envelope xmlns:xsi=" 

 "\"http://www.w3.org/2001/XMLSchema-instance\" "

 "xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" " 

 "xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"

 "<soap:Body>"

 "<GetWeather xmlns=\"http://www.webserviceX.NET/\">"

 "<CityName>%@</CityName>"

 "<CountryName>%@</CountryName>"

 "</GetWeather>"  

 "</soap:Body>"

 "</soap:Envelope>", txtCity.text,txtCounrty.text];

//---print it to the Debugger Console for verification---
NSLog(@"%@",soapMsg);

NSURL *url = [NSURL URLWithString:
              @"http://www.webservicex.net/globalweather.asmx"];

NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
              //---set the various headers---
              NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMsg length]];
 NSLog(@"WebData....%@",soapMsg);
              [req addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
              [req addValue:@"http://www.webserviceX.NET/GetWeather" forHTTPHeaderField:@"SOAPAction"];

               [req addValue:msgLength forHTTPHeaderField:@"Content-Length"];

               //---set the HTTP method and body---

               [req setHTTPMethod:@"POST"];

               [req setHTTPBody:[soapMsg dataUsingEncoding:NSUTF8StringEncoding]];

               //---start animating--
               [activityIndicator startAnimating];

               conn = [[NSURLConnection alloc] initWithRequest:req                                                          delegate:self];

               if(conn)
               {                   
               webData = [[NSMutableData data] retain];

                    NSLog(@"WebDatanew....%@",webData);

               }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:15:18.227

只需包含 ASIHTTPRequest。它更易于使用。

```
http://allseeing-i.com/ASIHTTPRequest/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:14:44.940

使用 ASIHTTP 请求和 JSON 库与您的 Web 服务进行通信。JSON 比 XML 提要好得多，而且很容易处理。

[在此处](http://iphonedevelopertips.com/wp-content/uploads/2009/08/iPhone-JSON-Flickr-Part1.zip)下载 JSON 库表单

这是 ASIHTTP 请求的文档：- [http://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)

希望这会帮助你。谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T05:37:25.337

更改您的 soapMsg 格式：

```
NSString *soapMsg = [NSString stringWithFormat:
                         @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                         "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                         "<soap:Body>\n"
                         "<GetWeather xmlns=\"http://www.webserviceX.NET\">\n"
                         "<CityName>%@</CityName>"
                         "<CountryName>%@</CountryName>\n"
                         "</GetWeather>\n"
                         "</soap:Body>\n"
                         "</soap:Envelope>\n",txtCity.text,txtCounrty.text]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T11:05:03.050

Web 服务采用三个参数：

```
rw_app_id: The unique identifier for the app. If you’ve been following along with the previous tutorial, there should be only one entry so far, App ID #1.
code: The code to attempt to redeem. This should be a string that’s entered by the user.
device_id: The device ID that is attempting to redeem this code. We can get this with an easy API call. 
```

使用：- ASIHTTPRequest

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-10T06:59:18.937

可能这可以帮助你。它包含一个参数

```
-(void)serverconnection{

   NSString *CountryName=@"India";

    NSString *soapMessage = [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                             "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
                             "<soap:Body>"
                             "< GetWeather xmlns=\"http://tempuri.org/\">"
                             "<CountryName>%@</CountryName>"
                             "</GetWeather >"
                             "</soap:Body>"
                             "</soap:Envelope>",CountryName];

    NSURL *myNSUObj=[NSURL URLWithString:@"http://www.webservicex.net/globalweather.asmx?op=GetCitiesByCountry"];
    // NSURLRequest *myNSURequestObj=[NSURLRequest requestWithURL:myNSUObj];

    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:myNSUObj];
    NSString *msgLength = [NSString stringWithFormat:@"%lu", (unsigned long)[soapMessage length]];

    [theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [theRequest addValue: @"http://tempuri.org/GetWeather" forHTTPHeaderField:@"SOAPAction"];
    [theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
    [theRequest setHTTPMethod:@"POST"];
    [theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

    myNSUConnectionObj=[[NSURLConnection alloc]initWithRequest:theRequest delegate:self];
    NSLog(@"Data =%@",myNSUConnectionObj);
    if(myNSUConnectionObj)
    {

        NSLog(@"successful connection");
        myNSMDataFromServer=[[NSMutableData alloc]init];
    }
} 
```

您的网络服务有所不同，但这可能会给您一些想法。

# types - 我在哪里可以获得每个网站上的服务器和平台信息？

> ID：10664600
> 
> 赞同：1
> 
> 时间：2012-05-19T11:01:52.093
> 
> 标签：types, content-management-system, hosting

我需要知道托管公司、服务器类型和平台（CMS 等）和版本，客户端站点正在运行吗？我知道那里有提供这些信息的网站......会提出一些建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:19:16.207

我认为 whois.sc 会有所帮助...它为您提供有关服务器类型、托管公司名称服务器和其他一些信息的信息...

输入[http://www.whois.sc/yourdomainname.com](http://www.whois.sc/yourdomainname.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:45:24.307

塞思·戈特利布（Seth Gottlieb）提出了一个不错的小倡议，旨在构建“该站点正在运行什么 CMS？” 现场指南。它基本上包含针对不同 CMS 系统的大量签名，当您在 URL 上运行 (Python) 脚本时，它会告诉您每个 CMS 运行该特定站点的可能性有多大。

它可能不会为您提供您正在寻找的所有信息 - 但它会帮助您找出网站正在运行的 CMS 平台。

该网站目前处于[私人测试阶段](http://www.cmfieldguide.org/)，但您已经可以从 Github 上查看代码并自行运行。

请务必阅读[Seth 的博文](http://www.contenthere.net/2012/05/cm-field-guide-social-coding-for-cms-geeks.html)以获取更多信息。

# c# - 如何在c#中设置路径？

> ID：10664601
> 
> 赞同：0
> 
> 时间：2012-05-19T11:02:00.943
> 
> 标签：c#, visual-studio-2010

我的解决方案中有一个名为 Template 的文件夹。我希望将一些文件复制到其中并从中访问。我该如何设置路径？当我部署应用程序时，这个文件夹会在那里吗？

这行得通吗？

```
File.Move(@"DebriefReportTemplate.docx", @"~\Template\DebriefReportTemplate.docx"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:11:34.950

除非您构建设置/部署项目以在安装时创建它，或者在您的应用程序中添加代码以在第一次调用时创建它，否则它不会被创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:46:23.397

您可以使用

```
 string sourceFile = Path.GetDirectoryName(Application.ExecutablePath)+@"\Template\DebriefReportTemplate.docx";
    string destinationFile = @"C:\DebriefReportTemplate.docx";

    // To move a file or folder to a new location:
    System.IO.File.Move(sourceFile, destinationFile); 
```

> 参考 ：
> 
> *   [MSDN：复制文件和文件夹](http://msdn.microsoft.com/en-us/library/cc148994.aspx)
> *   [C# 示例：获取应用程序目录 [C#]](http://www.csharp-examples.net/get-application-directory/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T11:10:14.820

编辑：此答案适用于 ASP.NET 应用程序。

如果模板文件夹（包括其内容）是 Web 项目的一部分，则部署应该会自动运行。如果要在运行时将文件添加到此文件夹，可以使用

```
Server.MapPath(@"~\Template\DebriefReportTemplate.docx") 
```

，但请注意，Web 应用程序通常以对本地资源具有有限访问权限的身份运行。

如果你有一个 Win 应用程序，同样的事情也适用。您需要做的是将文件夹和文件添加到项目中，作为内容。不过，您将需要一个安装项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T11:23:16.263

如果您担心 Template 文件夹的存在，您可以在代码中的某个位置创建它。

```
string path = System.IO.Path.Combine("", "Template");
System.IO.Directory.CreateDirectory(path); 
```

然后移动文件

```
File.Move(@"DebriefReportTemplate.docx", @"Template\DebriefReportTemplate.docx"); 
```

# javascript - 获取 Cookie 的 Javascript 不会在某些值上起作用

> ID：10664603
> 
> 赞同：1
> 
> 时间：2012-05-19T11:02:08.987
> 
> 标签：javascript, cookies

我的 PHP 中有这个函数：

```
setcookie("UserPusser", $user, time() + 604800, "/pusser/beta/");
setcookie("PassPusser", $pass, time() + 604800, "/pusser/beta/");
setcookie("NotifPusser", $notif, time() + 604800, "/pusser/beta/"); 
```

我的javascript中有这个功能

```
function getThisCookie(name){
    var value;
    var singleCookie = document.cookie.split(";")
    for(var x in singleCookie){
        var y = singleCookie[x].split("=");
        if(y[0] == name) {
            value = y[1];
        }
    }
    return value;
} 
```

当我输入`alert(getThisCookie('UserPusser'))`结果是我想要的。但是当我试图写的时候，结果`alert(getThisCookie('NotifPusser'));`还是`alert(getThisCookie('PassPusser'));`：undefined。

任何人都可以帮助我吗？

我要做的是让浏览器在每次重新加载页面时记住复选框的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:01:06.253

*只是为了完整起见，这里有一个完整的答案，而不仅仅是评论中的提示：*

Cookie 值由`;`（分号 + 空格）分隔，这会给您留下如下内容：

```
cookie = 'a=123; b=456; c=678' 
```

为了将它们分开，您必须用相同的分隔符将它们分开。使用现代浏览器（我猜是 JS 1.6+，现在不太确定）或像[underscore.js](http://underscorejs.org)这样的库，您也可以将它们放入对象中。

```
// if your browser supports 'reduce'
var cookieObject = document.cookie.split('; ').reduce(function(o, kvp) {
  var split_kvp = kvp.split('=');
  o[split_kvp[0]] = split_kvp[1];
  return o;
}, {});

// underscore.js version
var cookieObject = _.reduce(document.cookie.split('; '), function(o, kvp) {
  var split_kvp = kvp.split('=');
  o[split_kvp[0]] = split_kvp[1];
  return o;
}, {}); 
```

无论如何，在执行任何这些之后，您都可以轻松访问您正在寻找的值：

```
cookieObject.a == 123
cookieObject.b == 456 
```

请记住，那些是*readOnly*。为了修改它们，您必须将对象写回`document.cookie`

```
// again, modern browser version
document.cookie = Object.keys(cookieObject).map(function(key) {
  return key + '=' + cookieObject[key];
}).join('; ');

// with underscore.js
document.cookie = _.chain(cookieObject).keys().map(function(key) {
  return key + '=' + cookieObject[key];
}).value().join('; ') 
```

# c# - 使用访问器进行 C# 单元测试 - 构造函数不起作用

> ID：10664605
> 
> 赞同：0
> 
> 时间：2012-05-19T11:02:20.273
> 
> 标签：c#, .net, wpf, unit-testing, accessor

我必须为我的应用程序编写单元测试，但我有一个问题。我正在使用 C# 和 .NET 4。在我的测试中，我无法访问类的私有属性和方法，所以我在单元测试中为每个类使用自动生成的访问器，但是......

我的 Accessor 类的构造函数不接受他们的参数。例子：

```
class SearchControl(bool isLogged, MainWindow mainWindow);
class MainWindow(); 
```

要创建**SearchControl**类型的对象，您需要传递 mainWindow 对象。因此，如果我使用非 Accessor 类进行此操作，我将无法访问私有方法和属性，也无法对其进行测试。

```
MainWindow mainWindow = new MainWindow();
SearchControl serchControl = new SearchControl(false, mainWindow); 
```

我必须使用 Accessor clasees，但是当我这样做时，我的代码带有红色下划线，并且 Visual Studio 说不能接受参数。为什么，当我传递相同类型的参数时。如果我再次将**MainClass**对象传递给**SearchControl_Accessor**对象，我将无法访问 MainClass 中的**属性**。所以带有访问器的代码如下所示：

```
MainWindow_Accessor mainWindow = new MainWindiow_Accessor();
SearchControl_Accessor searchControl = new SearchControl_Accessor(false, mainWindow); 
```

任何人都知道出了什么问题以及我必须做些什么来解决它。谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T11:50:05.383

如果您必须对私有方法进行单元测试，也许类设计一开始就不好？我（我承认有些微弱）的理解是“外部世界”不应该关心对象的私有方法 - 只关心它是否正确地写在盒子上。私有方法不是“合同”的一部分——它们的实现、返回类型等都可以改变，公共 API 才是最重要的。

在什么情况下你的对象的公共方法可以通过测试而私有方法失败？如果这是可能的，那么：

*   公共方法没有经过适当的测试，或者
*   私有方法无关紧要——它们不会影响对象的行为方式，因此不需要进行测试。

还是不可能，但是您想测试私有方法以确定哪个导致某些公共方法出现意外行为？

如果是这种情况，则可能表明：

*   那些公共方法应该更小（做更少的事情，并且这不会让你完全困惑于哪个私有方法可能是有罪的），加上
*   当私有方法依赖于行为不端时，一个好主意是抛出特定的异常。然后您测试这些异常的公共方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T11:12:20.100

通常，您不能访问对象的私有属性、方法和字段。如果你真的需要访问它，你可以考虑制作它们`internal`（而不是`private`）。如果您的测试存在于另一个程序集中，请查看[InternalsVisibleTo](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)属性。该属性在正确应用到带有您要测试的代码的程序集时，允许您的带有测试的程序集访问您已标记的方法、字段和属性`internal`。

我希望我正确理解了您的问题，因为您使用了不清楚的术语（访问器类）。请解释或询问您是否想了解更多信息。

# c++ - 用于 UTF-8 请求的 cURL。当它应该是çabe时，它总是像“abe”一样

> ID：10664610
> 
> 赞同：2
> 
> 时间：2012-05-19T11:03:31.207
> 
> 标签：c++, curl, libcurl

好吧，我在 Visual Studio 2008 和 Windows 7 Professional 32 位上使用 C++ 中的 libcurl 来发送带有 UTF-8 字符的请求，但问题是我收到了那个编码错误。 `�abe`而不是`çabe`.

当我在我的本地主机服务器中进行测试时，我注意到一件事，这是我第一次在这样的 PHP 服务器中收到`echo $_POST['post'];`它`�abe`，但如果我对其进行编码，它就会正确：`echo utf8_encode($_POST['post']);`它`çabe`就是我想要的。

但问题是我无法控制接收数据的服务器，我想发送它已经用 UTF-8 编码。

我怎么能那样做？

这是我的帖子部分

```
struct curl_httppost *formpost=NULL;
struct curl_httppost *lastptr=NULL;
std::string post = "çabe";
url_formadd(&formpost,
      &lastptr,
      CURLFORM_COPYNAME, "post",
      CURLFORM_COPYCONTENTS, post.c_str(),
      CURLFORM_END); 
```

**@编辑**

根据 DietrichEpp 的说法，要查看我是否打开了 UTF-8，我可以简单地测试示例“ç”中不同字符的长度，所以我尝试`printf("%d\n", (int) strlen("ç"));`了 - 它应该打印 2 或 3 用于 UTF-8，或 1 用于别的东西。

它确实打印出 1，所以这可能是原因，我该如何解决这个问题？

我想将其设置为 UTF-8 或至少能够在 cURL 的 post 字段中使用时将其设置为 utf8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:52:34.367

如果要发送 UTF-8 编码数据，*则必须将其*编码为 UTF-8。例如，以 UTF-8 编码的“ç”可以方便地拼写`\xC3\xA7`为

```
std::string post = "\xC3\xA7abe"; 
```

Visual Studio 2008 应该能够自动[将文件保存为 UTF-8](http://msdn.microsoft.com/en-us/library/w11571b4%28v=vs.90%29.aspx "如何：使用编码管理文件")，省去您自己进行这种编码的麻烦。如果您被困在 ISO 8859-1 中，可以通过以下方式轻松实现对 UTF-8 的*特定转码*（优化留作练习）：

```
std::string utf8_from_iso8859_1(std::string str)
{
  std::string res;
  for (std::string::iterator i = str.begin(); i < str.end(); i++) {
    if (0 <= *i && *i < 0x80)
      res += *i;
    else {
      res += 0xC0 | ((*i >> 6) & 0x03);
      res += 0x80 | (*i & 0x3F);
    }
  }
  return res;
} 
```

然后使用

```
std::string post = "çabe";
std::string encoded = utf8_from_iso8859_1(post);
url_formadd(&formpost,
  &lastptr,
  CURLFORM_COPYNAME, "post",
  CURLFORM_COPYCONTENTS, encoded.c_str(),
  CURLFORM_END); 
```

从其他编码转码需要特定的映射，最好的选择是使用像[libiconv这样的专用库](http://www.gnu.org/software/libiconv/)

# php - 依赖注入或范围解析运算符？

> ID：10664616
> 
> 赞同：2
> 
> 时间：2012-05-19T11:04:17.277
> 
> 标签：php, oop, api, dependency-injection, scope-resolution

我没有找到类似的问题，所以如果它已经存在，我深表歉意。

在我的系统中，我想要一些函数库来简化整个系统中的许多任务。那可能是验证电子邮件。如果我可以让一个函数来做，就没有理由每次都写完整的正则表达式，所以我只需要在一个地方进行更改和修复错误。

假设我编写了一个名为 Files_Tools 的类。

我可以通过将此类的实例依赖注入到需要此类函数的对象中来使其工作。但我也可以使用静态函数编写 Files_Tools 类，并使用范围解析运算符访问它们。但正如我所了解的，关于 DI（依赖注入）的主要事情之一是避免这种“全局使用”。所以我的逻辑告诉我采用 DI 方法。然而，我这样做仍然感觉不“正确”。

所以我的问题是——什么被认为是为系统创建工具集的最正确方法？首先，是把它做成一个类，而不是简单的函数吗？然后，如果它真的是一个类是要走的路，我应该瞄准 SRO 还是 DI？

我知道这个问题可能没有一个明确的答案，但我想知道我是否完全偏离轨道或走向许多其他编码人员也会做的事情。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:10:14.373

DI 可以更轻松地对您的类和方法进行单元测试，而无需依赖注入的类……您可以模拟注入的对象并根据您的测试操作其返回。范围解析为您留下了这种依赖关系，因此测试不会完全隔离。

我早期的许多项目都使用静态类来实现此类功能，并且在 6 年后尝试为它们编写单元测试现在是一件真正的苦差事，因为我没有使用 DI。

# iphone - iphone UIActionSheet

> ID：10664634
> 
> 赞同：2
> 
> 时间：2012-05-19T11:07:04.590
> 
> 标签：iphone, nsarray, label, uiactionsheet

我使用了两个不同的 NSArray 在自定义表视图中以两个不同的标签显示数据。如何使用 UIActionSheet（使用 UIActionSheet 的破坏性按钮）从表格视图中删除一个单元格，以便数据也从 NSArray 中删除？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T14:01:33.057

您必须从数组中删除它 [arrayName removeObjectAtIndex:indexPath.row];

然后重新加载表：

[表重载数据];

# c# - C#:Visual-Studio：如何最大化 winform 上的特定面板

> ID：10664642
> 
> 赞同：0
> 
> 时间：2012-05-19T11:08:52.017
> 
> 标签：c#, winforms, visual-studio-2010

我在 winform 上有 2 个面板。`Panel2`最大化winform时如何最大化？

我尝试锚定`Panel1`到顶部和左侧，并锚定`Panel2`到所有边距（顶部、底部、左侧和右侧）。

但是这种方式，在winform最大化时`Panel1`保持固定但`Panel2`没有调整大小！

有什么办法可以解决这个问题，或者是否可以`Panel2`单独使用代码最大化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:15:47.370

添加面板 1 停靠在顶部，然后添加面板 2，停靠类型设置为“填充”

# html - 如何在sencha touch 2中更改音频控制音量

> ID：10664651
> 
> 赞同：0
> 
> 时间：2012-05-19T11:09:57.343
> 
> 标签：html, sencha-touch-2, html5-audio

我在面板上添加了音频控制。我只是设置它的网址，没有别的。在运行应用程序时，我可以看到音频控制和歌曲也在播放。我可以执行播放/暂停/静音等操作。悬停在音量控制上，我得到音量转换器搜索栏，但我无法更改音量。我正在使用 chrome 来测试我的应用程序。

关于如何处理音频控制音量变化的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:47:02.873

如果您想以编程方式更改音量，您可以在“audio”xtype 元素上使用“setVolume”方法： [http ://docs.sencha.com/touch/2-0/#!/api/Ext.Audio- method-setVolume](http://docs.sencha.com/touch/2-0/#!/api/Ext.Audio-method-setVolume) 您只需传递一个介于 0.0（最小值）和 1.0（最大值）之间的浮点值。

如果您在谈论自动控制面板，请看这个小提琴： [http](http://www.senchafiddle.com/#fOAGD#CcDKl) ://www.senchafiddle.com/#fOAGD#CcDKl 我正在 Chrome 中测试这个，我完全能够使用本机滑块更改音量。我还添加了一个自定义滑块来向您展示如何以编程方式进行操作。

你能准确地说出你的问题是什么吗？

# ms-access - 查询性能：使用保存的查询与在运行时向查询添加约束

> ID：10664652
> 
> 赞同：2
> 
> 时间：2012-05-19T11:10:03.663
> 
> 标签：ms-access, ms-access-2007

我有多个带有特定按钮的表单来显示/隐藏数据（去年的数据/所有数据）。我一直在考虑查询性能，但我真的找不到一个好的资源来解释访问如何处理这些。

我特别想知道，使用保存的查询（对于特定情况，例如“去年的数据”）和在运行时将参数附加到查询之间是否存在性能差异（比如添加“where xy = -1”到一个没有约束的查询）。这两个查询会在后端执行，还是我通过 VBA 添加到现有查询的任何约束都会在前端执行？

我应该为每个可能的场景创建一个查询，还是只使用一个查询来在运行时添加参数？

仅供参考，我使用的是 jet，我的数据库分为前端和后端（Access 2007）。后端将位于网络文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:19:17.870

检查这个问题的答案：[存储过程是否提高了访问数据库的性能，为什么？](https://stackoverflow.com/questions/9566790/does-stored-procedure-enhance-the-performance-in-an-acess-databank-why)

主要涵盖您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:24:39.897

由于 Access 是基于文件的系统而不是专用服务器，因此在后端绝对不会运行任何内容，即使它存储在那里，所有内容都在您打开的任何副本中本地执行，即前端或后端 -结尾。

# php - 将变量传递给 PHP 脚本而不提交

> ID：10664653
> 
> 赞同：0
> 
> 时间：2012-05-19T11:10:12.243
> 
> 标签：php, jquery, ajax

我想知道是否有人可以帮助我。

我正在使用下面的代码在删除图像时捕获“onlick”事件。一旦选择了我的'delete.php'脚本，就会从服务器中删除物理图像。

```
<script type="text/javascript"> 
        Galleria.ready(function() {
            this.$('thumblink').click();

        $(".galleria-image").append( 
        "<span class='btn-delete ui-icon ui-icon-trash'></span>"); 
        $(".btn-delete").live("click", function(){
        var img = $(this).closest(".galleria-image").find("img"); 

        // send the AJAX request
        $.ajax({
        url : 'delete.php',
        type : 'post',
        data : { image : img.attr('src') },
        success : function(){
        alert('Deleting image... ');
        img.parent().fadeOut('slow');
        }
        }); 
```

我遇到的问题是，因为“click”事件没有发布表单，我无法捕获“userid”和“locationid”变量以将它们传递给接收脚本，即“delete.php”。

我知道这是问题所在，因为如果我使用：

```
<?php session_start(); 

$_SESSION['userid']=$_POST['userid'];
$_SESSION['locationid']=$_POST['locationid']; 
```

我的“delete.php”脚本的其余部分不起作用。但是，如果我使用：

```
<?php session_start(); 

$_SESSION['userid']=2;
$_SESSION['locationid']=1; 
```

我的脚本的其余部分工作正常。

我对 PHP 比较陌生，我不确定是否有解决方案。

但我只是想知道是否有人可以看看这个，并就我如何克服这个问题提供一些指导？

非常感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:18:07.247

您只需要在 ajax 调用的数据对象中传递值：

```
var sessionUserid = <?= $_SESSION['userid']; ?>;
var sessionLocationid = <?= $_SESSION['locationid']; ?>;
data : { image : img.attr('src'), userid: sessionUserid, locationid: sessionLocationid }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:33:12.703

经过一些进一步的实验，我找到了解决问题的方法。

我把这条线改成`data : { image : img.attr('src'),`它 `data : { image : img.attr('src'), userid: "VALUE", locationid: "VALUE"},`工作正常。亲切的问候

# symfony - 如何从 symfony2 admin-generator 生成管理员

> ID：10664657
> 
> 赞同：3
> 
> 时间：2012-05-19T11:10:38.147
> 
> 标签：symfony

我对 symfony2 完全陌生，我在 symfony 中使用教义 orm 创建了一个简单的实体模型，但我不知道如何生成和使用 admin-generator，我实际上尝试并从这个 admin 生成器[http:/安装了所有必需的包/symfony2admingenerator.org/](http://symfony2admingenerator.org/)。甚至尝试使用

```
php app/console admin:setup 
```

一切顺利，但我不知道如何查看管理端是否生成。

我的生成器.yml

```
generator: admingenerator.generator.doctrine
params:  
  model: Go\UserBundle\Entity\User
  namespace_prefix: Go
  bundle_name: UserBundle
  fields: 
    firstname:
      help: If you want to see this content on you website
    lastname:
      help: If you want to see this content on you website

builders:
  list:
    params:
      firstname: Here is a beautiful title no  ???
      display: [ id, firstname, firstname, email ]
      max_per_page: 3
      actions:
        new: ~ 
      object_actions:
        edit: ~ 
        delete: ~
  filters: 
    params:
      fields:
        release_date:
          formType: date_range
      display: [ id, firstname, firstname, email ]

  new: 
    params:
      title: You're creating a new movie
      display: [ firstname, firstname, email  ]
      actions:
        list: ~
  edit: 
    params:
      title: You're editing the movie ""
      display: 
        "NONE": [ email ]
        "Other informations": [  ]
      actions:
        list: ~
  delete: ~ 
```

我的实体类位于

```
src\Go\UserBundle\Entity\User.php
src\Go\UserBundle\Entity\UserRepository.php 
```

我的管理包位于

```
Go\GoAdminBundle\Controller\Admin\DeleteController.php
Go\GoAdminBundle\Controller\Admin\EditController.php
Go\GoAdminBundle\Controller\Admin\ListController.php
Go\GoAdminBundle\Controller\Admin\NewController.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:06:45.237

我现在可以访问刚刚通过 routing.yml 配置的管理员

```
GoGoAdminBundle_admin_go_go_admin_bundle_admin:
    resource: "@GoGoAdminBundle/Controller/Admin/"
    type: admingenerator
    prefix: /admin 
```

# c++ - 如何从 c/c++ 源代码获取适用于 Windows 的 python .pyd？（更新：如果你想要的话，现在在 Python 中很活跃）

> ID：10664658
> 
> 赞同：12
> 
> 时间：2012-05-19T11:10:41.173
> 
> 标签：c++, python, c, opencv

# 如何从 C/C++ 扩展源代码到 Windows 的 pyd 文件（或我可以导入到 Python 的其他项目）？

***编辑：***我想使用的特定库（BRISK）包含在[OpenCV](http://opencv.org/) 2.4.3 中，所以我对这项技能的需求暂时消失了。如果您来这里寻找 BRISK，这里是我发布[的 Python 演示中的简单 BRISK 。](http://github.com/kobejohn/python_brisk_demo)

* * *

我有想要在我的 python 应用程序中构建和使用的[Brisk](http://www.asl.ethz.ch/people/lestefan/personal/BRISK)源代码（[下载）。](http://www.asl.ethz.ch/people/lestefan/personal/BRISK/brisk.zip)我已经生成了一个 brisk.pyd 文件......但它是 0 字节。如果有更好/替代的方法来瞄准 brisk.pyd 文件，那么我当然也愿意接受。

***编辑：***请忽略下面我原始问题中的所有尝试，并查看我的答案，这是通过 obmarg 的详细演练实现的

# 我哪里错了？

1.  **没有库路径的 Distutils：**首先我尝试使用 distutils 和以下 setup.py 构建源代码（我刚刚开始学习 distutils，所以这是在黑暗中拍摄）。BRISK源代码的结构在这个问题的底部供参考。

    ```
    from distutils.core import setup, Extension
    module1 = Extension('brisk',
        include_dirs = ['include', 'C:/opencv2.4/build/include', 'C:/brisk/thirdparty/agast/include'],
        #libraries = ['agast_static', 'brisk_static'],
        #library_dirs = ['win32/lib'],
        sources = ['src/brisk.cpp'])
    setup (name = 'BriskPackage',
        ext_modules = [module1]) 
    ```

    这立即给了我以下几行和构建文件夹中某处的**0 字节 brisk.pyd 。**很近？

    ```
    running build
    running build_ext 
    ```

2.  **带有库路径的 Distutils：**暂缓该尝试。所以我添加了上面 setup.py 中注释掉的两个库行。在我得到这个链接错误之前，这似乎没问题：

    ```
    creating build\lib.win32-2.7
    C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\link.exe /DLL /nologo /INCREMENTAL:NO /LIBPATH:win32/lib /LIB
    PATH:C:\Python27_32bit\libs /LIBPATH:C:\Python27_32bit\PCbuild agast_static.lib brisk_static.lib /EXPORT:initbrisk build
    \temp.win32-2.7\Release\src/brisk.obj /OUT:build\lib.win32-2.7\brisk.pyd /IMPLIB:build\temp.win32-2.7\Release\src\brisk.
    lib /MANIFESTFILE:build\temp.win32-2.7\Release\src\brisk.pyd.manifest
    LINK : error LNK2001: unresolved external symbol initbrisk
    build\temp.win32-2.7\Release\src\brisk.lib : fatal error LNK1120: 1 unresolved externals
    error: command '"C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\link.exe"' failed with exit status 1120 
    ```

3.  **不受控制的甩尾：**我认为可能需要构建库，所以我用 cmake + mingw - mingw + vc++ express 2010 做了一个速成课程（很多崩溃），如下所示：

    *   **cmake gui：**来源：c:/brisk，构建：c:/brisk/build
    *   **cmake gui：**为 Visual Studio 10 配置
    *   **cmake gui：**使用默认选项并生成（CMAKE_BACKWARDS_COMPATIBILITY、CMAKE_INSTALL_PREFIX、EXECUTABLE_OUTPUT_PATH、LIBRARY_OUTPUT_PATH）
    *   **VC++ Express 10：**更改为发布并构建由 cmake 生成的解决方案，并获得大约 20 页看起来像非关键警告的内容，然后全部成功。注意 - 不会由此生成任何 dll。它确实会生成以下与下载中包含的类似大小的库：

        ```
        win32/lib/Release/
            agast_static.lib
            brisk_static.lib 
        ```

4.  **进一步挥舞。**

# 相关BRISK源文件结构供参考：

```
build/ (empty)
include/brisk/
    brisk.h
    hammingsse.hpp
src
    brisk.cpp
    demo.cpp
thirdparty/agast/
    include/agast/
        agast5_8.h ....
        cvWrapper.h
    src/
        agast5_8.cc ...
    CMakeLists.txt
win32/
    bin/
        brisk.mexw32
        opencv_calib3d220.dll ...
    lib/
        agast_static.lib
        brisk_static.lib
CMakeLists.txt
FindOpenCV.cmake
Makefile 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-06T15:46:13.237

您确定这个轻快的库甚至可以导出 python 绑定吗？我在源代码中看不到对它的任何引用——它甚至似乎都没有导入 python 头文件。这肯定会解释为什么到目前为止你还没有取得太大的成功——你不能只编译普通的 C++ 代码并期望 python 与之交互。

我认为您的第二个 distutils 示例最接近正确-它显然是在编译内容并进入链接器阶段，但是随后您遇到了此错误。该错误仅意味着它找不到名为 initbrisk 的函数，我猜这将是模块的顶级 init 函数。这再次表明您正在尝试从不适合它的代码编译 python 模块。

如果您想自己将 C++ 代码包装在 python 包装器中，您可以查看[有关编写 c/c++ 扩展的官方文档](http://docs.python.org/extending/extending.html)。或者，您可以查看[boost::python](http://www.boost.org/doc/libs/1_49_0/libs/python/doc/)、[SIP](http://www.riverbankcomputing.co.uk/software/sip/intro)或[shiboken](http://www.pyside.org/docs/shiboken/)，它们试图在某种程度上（或完全）自动化从 C++ 代码制作 python 扩展的过程。

编辑：由于您似乎已经做出了相当大的努力来自己解决问题并发布了一个很好的问题，因此我决定就如何进行此操作提供更详细的回复。

## 使用 boost::python 包装 C++ 库的快速教程

就我个人而言，我只使用过 boost::python 来处理这样的事情，所以我会试着给你一个很好的总结，告诉你如何去做。我将假设您使用的是 Visual C++ 2010。我还将假设您已经安装了 32 位版本的 python，因为我相信 boost pro 库仅提供 32 位二进制文​​件。

## 安装升压

首先，您需要获取 boost 库的副本。最简单的方法是从[boost pro 网站](http://www.boostpro.com/download/)下载安装程序。这些应该安装在 Windows 上使用 boost c++ 库所需的所有头文件和二进制文件。记下将这些文件安装到的位置，因为稍后您将需要它们 - 最好安装到其中没有空格的路径。为方便起见，我假设您将这些文件放在 C:\boost 中，但您可以将其替换为您实际使用的路径。

或者，您可以按照[这些说明](http://www.boost.org/doc/libs/1_49_0/more/getting_started/windows.html#or-build-binaries-from-source)从源代码构建提升。我不是 100% 确定，但您可能*需*要这样做才能获得与您安装的 python 版本兼容的 boost::python 版本。

## 设置视觉工作室项目

接下来，您需要为 brisk.pyd 设置一个 Visual Studio 项目。如果您打开 Visual Studio，请转到新建 -> 项目，然后找到 Win32 项目的选项。设置您的位置等，然后单击确定。在出现的向导中选择一个 DLL 项目类型，然后勾选空项目复选框。

现在您已经创建了项目，您需要设置包含和库路径以允许您使用 python、boost::python 和 brisk.lib 文件。

在 Visual Studios 解决方案资源管理器中，右键单击您的项目，然后从出现的菜单中选择属性。这应该会为您的项目打开属性页。转到 Linker -> General 部分并查找 Additional Library Directories 部分。您需要使用`.lib`boost、python 和您的`brisk_static.lib`. 通常，这些可以在您安装库的任何位置的`lib`（或）子目录中找到。`libs`路径用分号分隔。我在下面附上了我的设置截图：

![其他库目录设置](../Images/d881baa00b39a64ae7cda1b251988eb5.png)

接下来，您需要让 Visual Studio 链接到 .lib 文件。这些部分可以在属性的 Linker -> Input 部分的 Additional Dependencies 字段中找到。同样，它是一个分号分隔的列表。您应该需要为 python 添加库（在我的情况下是这样，`python27.lib`但这会因版本而异）和`brisk_static.lib`. 这些不需要您在上一阶段添加的完整路径。同样，这是一个屏幕截图：

![附加依赖项设置](../Images/4f59f548238a30a232702587c8dc8ad1.png)

您*可能*还需要添加 boost_python 库文件，但我*认为*boost 使用了一些头文件魔术来为您省去麻烦。如果我不正确，请查看您提升库路径以查找名为类似于的文件并将其`boost_python-vc100-mt.lib`添加。

最后，您需要设置包含路径以允许您的项目包含相关的 C++ 头文件。要使相关设置出现在项目属性中，您需要将 .cpp 文件添加到您的项目中。右键单击解决方案资源管理器中的源文件文件夹，然后转到添加新项目。选择一个 C++ 文件 (.cpp) 并将其命名为 main.cpp（或您想要的任何其他名称）。

接下来，返回您的项目属性并转到 C/C++ -> 常规。在附加库目录下，您需要添加 brisk、python 和 boost 的包含路径。再一次，分号用于分隔符，这里又是一个屏幕截图：

![在此处输入图像描述](../Images/db7b72459f469454ee1a1d4c4793d48c.png)

我怀疑您可能需要更新这些设置以包括 opencv2 和 agast 库，但我将把它留给您来解决 - 它应该是相同的过程。

## 用 boost::python 包装现有的 c++ 类。

现在有点棘手 - 实际上编写 C++ 以将您的轻快库包装在 boost python 中。[你可以在这里](http://www.boost.org/doc/libs/1_49_0/libs/python/doc/tutorial/doc/html/index.html)找到一个教程，但我也会试着复习一下。

这将在`main.cpp`您之前创建的文件中进行。首先，在文件顶部添加您需要的相关包含语句：

```
#include <brisk/brisk.h>
#include <Python.h>
#include <boost/python.hpp> 
```

接下来，您需要声明您的 python 模块。我假设你希望这被称为轻快，所以你做这样的事情：

```
BOOST_PYTHON_MODULE(brisk)
{
} 
```

这应该告诉 boost::python 创建一个名为`brisk`.

接下来，它只是遍历所有要包装的类和结构并用它们声明 boost python 类的情况。类的声明都应该包含在 brisk.h 中。您应该只包装类的公共成员，而不是任何受保护或私有成员。作为一个简单的例子，我在这里做了几个结构：

```
BOOST_PYTHON_MODULE(brisk)
{
    using namespace boost::python;

    class_< cv::BriskPatternPoint >( "BriskPatternPoint" )
         .def_readwrite("x", &cv::BriskPatternPoint::x)
         .def_readwrite("y", &cv::BriskPatternPoint::y)
         .def_readwrite("sigma", &cv::BriskPatternPoint::sigma);

    class< cv::BriskScaleSpace >( "BriskScaleSpace", init< uint8_t >() )
         .def( "constructPyramid", &cv::BriskScaleSpace::constructPyramid );
} 
```

在这里，我包装了 cv::BriskPatternPoint 结构和 cv::BriskScaleSpace 类。一些快速的解释：

`class_< cv::BriskPatternPoint >( "BriskPatternPoint" )`告诉 boost::python 声明一个类，使用`cv::BriskPatternPoint`C++ 类，并像`BriskPatternPoint`在 python 中一样公开它。

`.def_readwrite("y", &cv::BriskPatternPoint::y)`向类添加可读和可写属性`BriskPatternPoint`。该属性名为 y，并将映射到`BriskPatternPoint::y`c++ 字段。

`class< cv::BriskScaleSpace >( "BriskScaleSpace", init< uint8_t >() )`这次声明了另一个类，`BriskScaleSpace`但还提供了一个接受 uint8_t 的构造函数（一个无符号字节 - 它应该只映射到 python 中的一个整数，但我要小心不要传入一个大于 255 字节的字节 - 我不知道在那种情况下会发生什么）

以下`.def`行只是声明了一个函数 - boost::python 应该（我认为）能够自动确定函数的参数类型，因此您不需要提供它们。

可能值得注意的是，我实际上并没有编译任何这些示例——它们很可能根本不起作用。

无论如何，要让这个在 python 中完全工作，它应该只是对你希望从 python 访问的每个结构、类、属性和函数做类似的事情——这可能是一项相当耗时的任务！

如果你想看到另一个例子，我在[这里做了这个](https://raw.github.com/obmarg/syncro/develop/Syncro%20Server/libsyncro/pysyncro/pysyncro.cpp)来结束[这个类](https://github.com/obmarg/syncro/blob/develop/Syncro%20Server/libsyncro/include/libsyncro/connection.h)

## 构建和使用扩展

Visual Studio 应该负责构建扩展 - 然后使用它只是获取 .DLL 并将其重命名为 .pyd 的情况（您可以让 VS 为您执行此操作，但我将由您决定）。

然后你只需要将你的 python 文件复制到你的 python 路径上的某个地方（`site-packages`例如），导入它并使用它！

```
import brisk

patternPoint = brisk.BriskPatternPoint()
.... 
```

无论如何，我花了一个小时左右的时间来写这篇文章——所以我要在这里停下来。如果我遗漏了任何内容或有任何不清楚的地方，我深表歉意，但我主要是凭记忆这样做的。希望它对您有所帮助。如果您需要澄清任何事情，请发表评论或提出其他问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T15:26:53.727

如果有人需要它，这是我到目前为止所拥有的。基本上是一个**BriskFeatureDetector**，可以在 Python 中创建，然后调用**检测。**其中大部分只是确认/复制 obmarg 向我展示的内容，但我已经添加了一直到 pyd 库的详细信息。

检测方法对我来说仍然不完整，因为它不转换数据类型。任何知道改善这一点的好方法的人，请做！例如，我确实找到了[这个库](http://www.ros.org/doc/api/pano_py/html/numpy__to__mat_8cpp_source.html)，它似乎将 numpy ndarray 转换为 cv::Mat，但我现在没有时间弄清楚如何集成它。还有其他数据类型需要转换。

**安装[OpenCV 2.2](http://sourceforge.net/projects/opencvlibrary/files/opencv-win/2.2/)**

*   对于下面的设置，我安装到`C:\opencv2.2`
*   2.4 版对 API 或实现进行了更改，这给我带来了问题（可能是新的算法对象？），所以我坚持使用 BRISK 开发的 2.2。

使用 Boost Python**安装****[Boost](http://www.boost.org/users/download/)**

*   对于下面的设置，我安装到`C:\boost\boost_1_47`

**创建一个 Visual Studio 10 项目：**

*   新项目 --> win32
*   对于下面的设置，我将其命名为`brisk`
*   next --> DLL 应用程序类型；空项目 --> 完成
*   在顶部，从**Debug** Win32 更改为**Release** Win32

**在源文件中创建 main.cpp**

在项目设置之前执行此操作，以便 C++ 选项在项目设置中可用

```
#include <boost/python.hpp>
#include <opencv2/opencv.hpp>
#include <brisk/brisk.h>

BOOST_PYTHON_MODULE(brisk)
{
    using namespace boost::python;

    //this long mess is the only way I could get the overloaded signatures to be accepted
    void (cv::BriskFeatureDetector::*detect_1)(const cv::Mat&,
                std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint>>&,
                const cv::Mat&) const
                = &cv::BriskFeatureDetector::detect;
    void (cv::BriskFeatureDetector::*detect_vector)(const std::vector<cv::Mat, std::allocator<cv::Mat>>&,
                std::vector< std::vector< cv::KeyPoint, std::allocator<cv::KeyPoint>>, std::allocator< std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint>>>>&,
                const std::vector<cv::Mat, std::allocator<cv::Mat>>&) const
                = &cv::BriskFeatureDetector::detect;

    class_< cv::BriskFeatureDetector >( "BriskFeatureDetector", init<int, int>())
        .def( "detect", detect_1)
    ;
} 
```

**项目设置（右键单击项目 --> 属性）：**

1.  包括/标题

    *   配置属性 --> C/C++ --> 常规
    *   添加到**附加包含目录**（调整到您自己的 python / brisk / 等基本路径）：

        `C:\opencv2.2\include;`

        `C:\boost\boost_1_47;`

        `C:\brisk\include;C:\brisk\thirdparty\agast\include;`

        `C:\python27\include;`

2.  库（链接器）

    *   配置属性 --> 链接器 --> 常规
    *   添加到**附加库目录**（调整到您自己的 python / brisk / 等基本路径）：

        `C:\opencv2.2\lib;`

        `C:\boost\boost_1_47\lib;`

        `C:\brisk\win32\lib;`

        `C:\python27\Libs;`

    *   配置属性 --> 链接器 --> 输入

    *   添加到**附加依赖**项（调整到您自己的 python / brisk / 等基本路径）：

        `opencv_imgproc220.lib;opencv_core220.lib;opencv_features2d220.lib;`

        `agast_static.lib; brisk_static.lib;`

        `python27.lib;`

3.  .pyd 输出而不是 .dll

    *   配置属性 --> 常规
    *   将目标扩展更改为 .pyd

**如有必要，构建和重命名**

*   右键单击解决方案并构建/重建
*   您可能需要将输出从“Brisk.pyd”重命名为“brisk.pyd”，否则 python 会给您有关无法加载 DLL 的错误
*   通过将 brisk.pyd 放在站点包中或放置一个链接到其路径的 .pth 文件，使 python 可以使用 brisk.pyd

**更新路径环境变量**

*   在 Windows 设置中，确保您的路径中包含以下内容（再次调整为您的路径）：

    ```
    `C:\boost\boost_1_47\lib;C:\brisk\win32\bin` 
    ```

# php - 使用php即时订购具有不同行跨度的html表格单元格

> ID：10664659
> 
> 赞同：0
> 
> 时间：2012-05-19T11:10:43.890
> 
> 标签：php, html

嗨，昨晚有人通过另一个问题帮助我写了一些代码：[Transform html table](https://stackoverflow.com/questions/10661452/transform-html-table)

我已经对其进行了一些更改，但我又有点卡住了。

基本上 $results 是一系列电影。我已将其格式化为包含一个单独的条目，用于每当数组中的第一个字母发生变化时，包含第一个字母。

这是执行此操作的代码：

```
while (false !== ($entry = readdir($handle)) ) {
    if($entry == "." or $entry == "..") 
        continue;

    if($i == 0) {
        array_push($results,substr($entry, 0,1));
    } else if (substr($entry, 0,1) != substr($lastEntry, 0,1)) {
        array_push($results,substr($entry, 0,1));
    }
    $lastEntry = $entry;
    array_push($results,$entry);
    $i++;
} 
```

这会产生一个像这样的数组：

```
Array ( 
    [0] => 0 
    [1] => 007, A View to a Kill (1985) 
    [2] => 1 
    [3] => 127 Hours (2010) 
    [4] => A 
    [5] => A Clockwork Orange (1971) 
    [6] => B 
    [7] => Back to the Future (1985) 
    [8] => Butterfly on a Wheel (2007) 
    [9] => C 
    [10] => Carnage (2011) 
    [11] => Casino (1995)  
    [12] => D 
    [13] => Defiance (2008) 
) 
```

所以基本上我想生成一个表格，为每个索引（0,1,A,C 等）提供一个不同的 CSS 类，并给它一个行跨度为 2。我已经做到了。我制作了一张看起来正确的表格。下面的代码在添加 rowspan=2 的单元格时递增 $indexRow，然后下一行打印 number_of_cols - $indexRow。由于上一行中的 rowspan=2 单元格占据了当前行中的一个单元格。

```
$NUM_COLUMNS = 3;

$numRows = count($results) / $NUM_COLUMNS;
if (count($results) % $NUM_COLUMNS > 0) {
    $numRows += 1;
}

echo "<div align=\"center\"><table>";
$i=0;
$indexRow=0;
for ($i = 0; $i < $numRows; $i++) {
    echo "<tr>\n";

    $index = $i;
    $j=0;

    if($indexRow > 0) {
        $j+=$indexRow;
        $indexRow=0;
    }

    while ($j < $NUM_COLUMNS) {
        $entry = '';
        if ($index < count($results)) {
           $entry = $results[$index];
        }
        if(strlen($entry) < 2) {
            echo "\t<td rowspan=\"2\" class=\"movieindex\">" . $entry . "</td>\n";
            $indexRow++;
        } else {
            echo "\t<td>" . $entry  . "</td>\n";
        }   
        $index += $numRows;

        $j++;
    }
    echo "</tr>\n";
}
echo "</table></div>"; 
```

我的实际问题是，现在使用 rowspan=2 单元格的电影没有正确排序。电影应该垂直排序，但会被索引单元格丢弃。我不确定如何规避这个问题，有什么想法吗？

这是我得到的表：

```
<div align="center">
<table>
<tr>
    <td rowspan="2" class="movieindex">0</td>
    <td>Hancock (2008)</td>
    <td>Sin City (2005)</td>
</tr>
<tr>
    <td>007, A View to a Kill (1985)</td>
    <td>Hangover (2009)</td>
</tr>
<tr>
    <td>007, Diamonds Are Forever (1971)</td>
    <td>Happy Feet Two (2011)</td>
    <td>Snow White (1987)</td>
</tr> 
```

这就是我要的：

```
<div align="center">
<table>
<tr>
    <td rowspan="2" class="movieindex">0</td>
    <td>Hancock (2008)</td>
    <td>Sin City (2005)</td>
</tr>
<tr>
    <td>Hangover (2009)</td>
    <td>Snow White (1987)</td>
</tr>
<tr>
    <td>007, A View to a Kill (1985)</td>
    <td>Happy Feet Two (2011)</td>
    <td>Step Brothers (2008)</td>
</tr> 
```

如果需要更多解释，请询问，我会编辑。基本上我要问的是如何正确地垂直排列单元格？

也许这会帮助你理解我想要做什么：http: [//imageshack.us/f/163/exampletable.png/](http://imageshack.us/f/163/exampletable.png/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:03:24.410

正如我在评论中所说，作为一个**肮脏**的解决方案，您可以在索引之后在数组中添加一个占位符，并且不要在代码中显示它们。

```
} else if (substr($entry, 0,1) != substr($lastEntry, 0,1)) {
    array_push($results,substr($entry, 0,1));
    array_push($results,"");
} 
```

这将导致这样的数组：

```
Array ( 
    [0] => 0
    [1] => 
    [2] => 007, A View to a Kill (1985) 
    [3] => 1 
    [4] => 
    [5] => 127 Hours (2010)
); 
```

如果您将代码修改为：

```
if(strlen($entry) == 1) {
    echo "\t<td rowspan=\"2\" class=\"movieindex\">" . $entry . "</td>\n";
    $indexRow++;  // This might be unneeded now, did not test this myself
} else if(strlen($entry) == 0){
     // Do nothing, just a placeholder
} else {
    echo "\t<td>" . $entry  . "</td>\n";
} 
```

# ruby-on-rails - 在 Rails 3.2 的生产模式下检查 500 内部服务器错误

> ID：10664661
> 
> 赞同：3
> 
> 时间：2012-05-19T11:10:46.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ubuntu, nginx, unicorn

我的 linode 帐户中有我的应用程序处于生产模式，我在一页中收到 500 内部服务器错误消息：

```
We're sorry, but something went wrong. 
```

但是在我的开发环境中这个页面可以正常工作。

如何调试此错误？

如何在**生产模式中查看错误来源？**

我希望rails在生产模式下显示错误。

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T11:25:39.607

如果您可以访问 ssh，请通过 ssh 登录到您的服务器并转到您的 rails 日志目录，该目录位于您的 rails 目录中。

一旦你在那里运行命令`tail production.log`。如果这没有给你足够的信息，你也可以做一个`tail -n100 production.log`（给你最后一百行的生产日志）。

如果您已经通过 heroku 部署，那么您可以通过`heroku logs`在本地控制台中运行来访问日志。（更多信息在这里[https://devcenter.heroku.com/articles/logging](https://devcenter.heroku.com/articles/logging)）

我还发现在生产中运行时使用 exception_notification gem [https://github.com/rails/exception_notification](https://github.com/rails/exception_notification)很有帮助，因为它会在发生错误时通过电子邮件向您发送堆栈跟踪。很多其他人也使用 Hoptoad (http://hoptoadapp.com/) 或 Exceptional (http://www.exceptional.io/) 但我更喜欢简单的 exception_notification gem。

此外，在极少数情况下，当我无法将错误作为最终措施进行跟踪时，我有时会在远程服务器防火墙上临时打开端口 3000 并 cd 到 rails 项目并`rails server production`在 config/environments/ 中设置为调试的日志级别运行production.rb 所以我可以在控制台中看到错误，然后在我完成后关闭端口。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-22T06:29:43.137

```
tail -n100 production.log 
```

只会显示日志文件的最后 100 行。以防万一您想查看实时运行的日志。

用这个

```
tail -1000f log/production.log 
```

# r - 如何测试条件何时在R中返回数字（0）

> ID：10664662
> 
> 赞同：36
> 
> 时间：2012-05-19T11:10:59.503
> 
> 标签：r

假设您想基于条件构建一个简单的测试`setdiff(input, 1:9)`。

我怎样才能构建一个

```
if isnotempty(setdiff(input, 1:9)) stop ("not valid") 
```

输入时停止执行`c(3, 12)`但输入时继续执行的语句`c(2,5,7)`？非常感谢，伯蒂

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-19T11:41:03.687

你可以使用`?length`：

```
isEmpty <- function(x) {
    return(length(x)==0)
}

input <- c(3, 12);

if (!isEmpty(setdiff(input, 1:9))) {
    stop ("not valid")
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-19T13:01:10.857

这是另一种选择`identical(x, numeric(0))`。这是一个示例（基本上从 sgibb 中获取了所有内容并替换了关键行，因为我很懒）：

```
isEmpty <- function(x) {
    return(identical(x, numeric(0)))
}

input <- c(3, 12)

if (!isEmpty(setdiff(input, 1:9))) {
    stop ("not valid")
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-14T07:57:08.397

我使用了以下功能：

```
# 1\. Check if 'integer(0)'
is.integer0 <- function(x) {
  is.integer(x) && length(x) == 0L
}

# 2\. Check if 'numeric(0)'
is.numeric0 <- function(x) {
  identical(x, numeric(0))
}

# 3\. Check is 'integer0' or 'numeric0'
is.int_num_0 <- function(x) {
  is.integer0(x) || is.numeric0(x)
} 
```

希望它会有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T18:20:29.920

这并不能回答您的主题行中的问题，但我认为这是您要实现的目标的更好方法：

```
 if(!all(input %in% 1:9)) stop("not valid") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-13T11:38:55.693

我喜欢 isEmpty 函数。我提出以下建议，以防万一您解析向量或列表：

```
isEmpty <- function(x) {
s<-sapply(x, function(y) length(y)==0, simplify = T)
return(s)
} 
```

# javascript - 如何在不使用 DOM 突变事件的情况下检测 AJAX 节点插入？

> ID：10664669
> 
> 赞同：3
> 
> 时间：2012-05-19T11:11:38.727
> 
> 标签：javascript, jquery, twitter, greasemonkey, mutation-events

我正在尝试编写一个 Greasemonkey 脚本来更改 Twitter 帖子中的关键字。麻烦的是，内容是“延迟加载”并且是根据用户请求添加的。

如果我要向添加的元素添加事件侦听器，我可以使用 JQuery 的`delegate()`. 因为我只是想在加载时更改内容，所以这似乎不合适。

突变事件似乎符合要求。它们是 Gecko 特有的，但这对于 Greasemonkey 脚本并不重要。问题是，[它们已经贬值](https://developer.mozilla.org/en/DOM/Mutation_events)了，并且有一系列[很好的理由](http://lists.w3.org/Archives/Public/public-webapps/2011JulSep/0779.html)。

当然，我可以使用计时器并定期轮询 DOM，但这看起来很恶心。

如何检测对 DOM 的添加并对插入的元素做出反应？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T11:53:10.903

如果您想检测 AJAX 创建的节点，您的选项（除了您明智地排除的 Mutation 事件）是：

1.  使用间隔或计时器进行轮询。
2.  试图挂钩页面的 AJAX 请求（如果有）。
3.  拼接、劫持或替换页面的javascript。

我一次完成了所有这些，除了一个之外，所有这些都有主要缺点：

1.  拼接到页面的 javascript 中并不总是那么容易（尤其是使用匿名函数），通常需要对该代码进行复杂的解构，并且非常脆弱。页面的 javascript 更改恕不另行通知。
2.  挂钩到页面的 AJAX 请求有时可能很容易，但通过沙盒屏障传输信息通常会带来更多麻烦，而不是值得。
3.  轮询在实践中效果很好，实施简单，通常成本低。

我建议您使用[waitForKeyElements() 实用程序](https://gist.github.com/2625891)并完成它。它非常易于使用。例如：

```
// ==UserScript==
// @name    Highlight good comments
// @include http://SOME_SITE/*
// @require http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require https://gist.github.com/raw/2625891/waitForKeyElements.js
// ==/UserScript==

function highlightGoodComments (jNode) {
    if (/beer/i.test (jNode.text () ) ) {
        jNode.css ("background", "yellow");
    }
}

waitForKeyElements ("#userBlather div.comment", highlightGoodComments); 
```

# c# - 刷新表单窗口

> ID：10664670
> 
> 赞同：1
> 
> 时间：2012-05-19T11:11:44.693
> 
> 标签：c#

我正在制作一个简单的小型 Windows 应用程序。这是我的主要功能：

```
static void Main()
{

    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);

    // This will be my Form object  
    Form1 robotPath = new Form1();

    Application.Run(robotPath);

    // at this point I'll try to make changes to my object
    // for instance I'll try to change a background image
    robotPath.changeImage();
} 
```

但是，更改我的对象后，更改不会反映在输出窗口中（背景未更改）。我试过 robotPath.refresh() 和 robotPath.invalidate() 但背景仍然没有改变。但是，当我使用按钮单击事件调用 changeImage 函数时，它可以工作。但是我希望在不使用按钮/鼠标事件的情况下对其进行更改。（背景随着 Form1 对象的更改而更改）有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T11:13:18.943

```
Application.Run() 
```

在主窗体关闭之前不会返回。之后运行的所有代码`Application.Run()`在程序关闭之前不会运行。这显然不是你想要的。

您可以通过重新排序来轻松解决问题`main`：

```
Form1 robotPath = new Form1();
robotPath.changeImage();
Application.Run(robotPath); 
```

另一种方法是将调用移动`changeImage`到 的构造函数中`Form1`，或者在表单生命周期的早期触发的某个事件中，例如`Load`. 此选项更好地封装了表单的行为。

# html - 平滑 div 滚动自动滚动 autoScrollingMode：“总是”不起作用

> ID：10664674
> 
> 赞同：0
> 
> 时间：2012-05-19T11:12:49.287
> 
> 标签：html, scroll, smooth, autoscroll

我使用了选项 autoScrollingMode: "always" 但当用户将鼠标移动到左侧或右侧热点或使用鼠标滚轮时，自动滚动仍然停止。与描述相反，热点未被禁用。我怎样才能在不停止的情况下自动滚动。她是我的代码：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#makeMeScrollable").smoothDivScroll({ 
            mousewheelScrolling: true,
            manualContinuousScrolling: true,
            visibleHotSpotBackgrounds: "onstart",
            autoScrollingMode: "always",
            hotSpotScrollingStep: "5",
            hotSpotsVisibleTime: "2000"
        });
    });
</script> 
```

感谢您的帮助，Afrikpit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T16:05:18.117

使用自动滚动模式：“onStart”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:00:05.507

如果你想自动滚动，这个设置应该足够了：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#makeMeScrollable").smoothDivScroll({ 
            autoScrollingMode: "always"
        });
    });
</script> 
```

这意味着滚动条将一直自动滚动，而不会受到用户的干扰。或者您是否在寻找不同的设置？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-26T18:03:29.013

好的，我已经通过稍微编辑源以禁用鼠标滚轮滚动来修复它。

在 jquery.smoothDivScroll.js（不是 .min.js）的第 337-355 行，我注释掉了所有的`self.stopAutoScrolling();`和`self.move(pixels);`行：

```
if (o.mousewheelScrolling === "vertical" && deltaY !== 0) {
    // Stop any ongoing auto scrolling if it's running
    // self.stopAutoScrolling();
    event.preventDefault();
    // pixels = Math.round((o.mousewheelScrollingStep * deltaY) * -1);
    // self.move(pixels);
} else if (o.mousewheelScrolling === "horizontal" && deltaX !== 0) {
    // Stop any ongoing auto scrolling if it's running
    // self.stopAutoScrolling();
    event.preventDefault();
    // pixels = Math.round((o.mousewheelScrollingStep * deltaX) * -1);
    // self.move(pixels);
} else if (o.mousewheelScrolling === "allDirections") {
    // Stop any ongoing auto scrolling if it's running
    // self.stopAutoScrolling();
    event.preventDefault();
    // pixels = Math.round((o.mousewheelScrollingStep * delta) * -1);
    // self.move(pixels);
} 
```

然后我将第 364 行更改为：

```
el.data("scrollingHotSpotLeft").add(el.data("scrollingHotSpotRight")).add(el.data("scrollWrapper")).mousewheel(function (event) { 
```

我刚刚添加了`.add(el.data("scrollWrapper"))`部分以禁用整个区域的鼠标滚轮滚动。

这样做使它滚动得更快一些，所以我不得不调整我的`autoScrollingInterval`设置，但它似乎无论如何都禁用了鼠标滚轮滚动。顶部的默认设置是禁用热点滚动的良好开端（我在 jquery.smoothDivScroll.js 顶部的选项中默认禁用它并且看不到任何热点）。

然后只需将代码压缩回您的 jquery.smoothDivScroll.min.js 文件，您就应该进行设置。最后我的配置看起来像这样：

```
$(document).ready(function() {

    $("div#makeMeScrollable").smoothDivScroll({
        manualContinuousScrolling: true,
        autoScrollingMode: "always",
        autoScrollingInterval: 80,
        autoScrollingDirection: "endlessLoopRight",
        autoScrollingStep: 1,
        hotSpotScrolling: false,
        mousewheelScrolling: "",
        touchScrolling: false
    });

}); 
```

# asp.net - Sharepoint LINQ 名称空间“系统”中不存在类型或名称空间名称“Linq”

> ID：10664676
> 
> 赞同：1
> 
> 时间：2012-05-19T11:13:00.637
> 
> 标签：asp.net, sharepoint

我的 Win7 Home 高级 64 位笔记本电脑中安装了 sharepoint Foundation 2010。

我使用 layouts 文件夹复制我的 aspx 页面，该页面使用 System.Linq;,Microsoft.SharePoint.Linq; 我收到了这个错误

命名空间“系统”中不存在类型或命名空间名称“Linq”（您是否缺少程序集引用？）但即使按照许多论坛中的建议添加以下行

我更改了 C:\inetpub\wwwroot\wss\VirtualDirectories\80 下可用的 web.xml 文件以添加以下内容

```
 <add assembly="Microsoft.Web.CommandUI, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" />
    <add assembly="Microsoft.SharePoint.Search, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" />

    <add assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Data.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
    <add assembly="System.Web.Extensions.Design, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Web.Extensions.Design, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>

  </assemblies> 
```

而这之前 `</configuration>`

```
<system.codedom>
    <compilers>
        <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <providerOption name="CompilerVersion" value="v3.5"/>
            <providerOption name="WarnAsError" value="false"/>
        </compiler>
        <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4" type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <providerOption name="CompilerVersion" value="v3.5"/>
            <providerOption name="OptionInfer" value="true"/>
            <providerOption name="WarnAsError" value="false"/>
        </compiler>
    </compilers>
</system.codedom> 
```

请指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:54:20.620

我在我的工作框中检查了这个：所有你需要包含在网络中的东西。**config**是*System.Core*程序集和*CompilerVersion*设置为“v3.5”的`compiler`元素。

 *这进入*Configuration/system.web/compilation*：

```
<assemblies>
  <add assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" />
  <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  <add assembly="Microsoft.Web.CommandUI, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" />
  <add assembly="Microsoft.SharePoint.Search, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" />
  <add assembly="Microsoft.Office.Access.Server.UI, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" />
  <add assembly="Microsoft.SharePoint.Publishing, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" />
  <add assembly="Microsoft.Office.Server.Search, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" />

  <!-- Additional Assembly -->
  <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
</assemblies> 
```

这进入*/Configuration/*：

```
<system.codedom>
  <compilers>
    <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <providerOption name="CompilerVersion" value="v3.5" />
      <providerOption name="WarnAsError" value="false" />
    </compiler>
  </compilers>
</system.codedom> 
```

不需要程序集*System.Data.Linq*和*System.Data.Linq 。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T17:37:03.723

找到了 ！由于它的 aspx 部署在 layouts 文件夹中，因此 layouts 文件夹中的 web.config 必须按照上面的建议进行更改。谢谢大家*

# ruby-on-rails - 带有类名和外键的 Rails has_one

> ID：10664677
> 
> 赞同：33
> 
> 时间：2012-05-19T11:13:14.933
> 
> 标签：ruby-on-rails, activerecord, foreign-keys

我有一个 Rails 模型，我使用两个`has_one`关系：`requester`和`friend`. 在控制台中我使用：

```
f = FriendRequest.all
f[0].requester 
```

我明白了`ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: users.requester_id: SELECT "users".* FROM "users" WHERE "users"."requester_id" = 4 LIMIT 1` 。

我真的不知道如何使用类名和指定记录的键来指定“has_one”关系。这是我的模型：

```
class FriendRequest < ActiveRecord::Base
  has_one :requester, :class_name => "User", :foreign_key => "requester_id"
  has_one :friend, :class_name => "User", :foreign_key => "friend_id"
end 
```

我怎么能做到？在一段`belongs_to`关系中，我使用相同的，显然替换`has_one`为`belongs_to`. 谢谢！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-19T11:30:32.647

```
has_one :requester, :class_name => "User", :foreign_key => "requester_id" 
```

这一行（来自您发布的代码）表明`requester`是 a `User`，并且表`users`应该包含一个作为记录`requester_id`外键的列`friend_requests`。rails 错误消息指出该列`requester_id`不存在（您必须通过[迁移](http://guides.rubyonrails.org/migrations.html)创建它）。

在这种情况下，使用

```
rails generate migration AddRequesterIdToUsers requester_id:integer 
```

它将生成迁移：

```
class AddRequesterIdToUsers < ActiveRecord::Migration
  def change
    add_column :users, :requester_id, :integer
  end
end 
```

并使用`rake db:migrate`.

查看[Rails Relation Guide](http://guides.rubyonrails.org/association_basics.html)了解更多关于 和 的区别`has_one`以及`belongs_to`如何使用它们的信息。

# javascript - 发布到用户 facebook 墙和页面墙

> ID：10664684
> 
> 赞同：1
> 
> 时间：2012-05-19T11:13:59.027
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-opengraph, facebook-social-plugins

我希望在我的网站上有一个“喜欢”按钮，按下该按钮后会发布到用户 Facebook 墙以及 Facebook 页面墙。

所以“用户 xzy 喜欢这个”会出现在页面墙上

有人知道我该如何实现吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:22:36.190

您可以通过订阅点赞按钮对点赞事件做出反应，但这只会发布到会话用户墙，但在反应中，您可以撰写可由用户发布到页面墙的新帖子。

1.  [http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/) 你首先需要 JS-SDK。

2.  [http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/) 您接下来需要订阅页面上的任何类似事件。

3.  [http://developers.facebook.com/docs/reference/dialogs/](http://developers.facebook.com/docs/reference/dialogs/) 您可以使用提要对话框生成帖子到页面。

> **注意：** 要发布到页面，您需要将页面访问令牌附加到发布请求。

# windows - Rails 3、windows、Paperclip 无法制作缩略图

> ID：10664688
> 
> 赞同：0
> 
> 时间：2012-05-19T11:14:58.903
> 
> 标签：windows, ruby-on-rails-3, paperclip

所以我使用的是 windows 7、Rails 3、最新的回形针 gem 和 ImageMagick-6.7.7-Q16（在 cmd 中测试），我的 PATH 环境已更新。

**模型**

```
class Image < ActiveRecord::Base
  attr_accessible :description, :user_id, :file
  has_attached_file :file, :styles => { :medium => "300x300>", :thumb => "100x100>" }, :storage => :filesystem

  belongs_to :user

  #validations
  validates_attachment_presence :file
  validates_attachment_size :file, :less_than => 4.megabytes
  validates_attachment_content_type :file, :content_type => [ 'image/gif', 'image/png', 'image/x-png', 'image/jpeg', 'image/pjpeg', 'image/jpg' ]
end 
```

**形式**

```
<%= form_for(@image, :html => { :multipart => true }) do |image| %>

    <div class="control-group">
      <%= image.label :description, "Description", :class => 'control-label' %>
      <div class="controls">
        <div class="input-prepend">
          <%= image.text_field :description %>
        </div>
      </div>
    </div>

    <div class="control-group">
      <%= image.label :file, "Image", :class => 'control-label' %>
      <div class="controls">
        <div class="input-prepend">
          <%= image.file_field :file %>
        </div>
      </div>
    </div>

    <%= image.hidden_field :user_id, :value => current_user.id %>

    <div class="actions">
      <%= image.submit "Upload Image", :class => 'btn btn-primary btn-medium' %>
    </div>
<% end %> 
```

**我的 paperclip.rb 在初始化程序中**

```
require "paperclip"
Paperclip.options[:command_path] = 'C:\Program Files (x86)\ImageMagick-6.7.7-Q16'
Paperclip.options[:swallow_stderr] = false
Paperclip.options[:whiny_thumbnails] = true 
```

一切正常，无需裁剪 (:styles => { :medium => "300x300>", :thumb => "100x100>" })。但是当我想制作缩略图时，回形针会抛出这个错误

```
Command :: identify -format %wx%h "C:/Users/Zaraka/AppData/Local/Temp/DSCN630520120519-7696-18l3nw5.JPG[0]"
Command :: convert "C:/Users/Zaraka/AppData/Local/Temp/DSCN630520120519-7696-18l3nw5.JPG[0]" -resize "300x300>" "C:/Users/Zaraka/AppData/Local/Temp/DSCN630520120519-7696-18l3nw520120519-7696-1p8rcsr"
[paperclip] An error was received while processing: #<Paperclip::Error: There was an error processing the thumbnail for DSCN630520120519-7696-18l3nw5>
Command :: identify -format %wx%h "C:/Users/Zaraka/AppData/Local/Temp/DSCN630520120519-7696-18l3nw5.JPG[0]"
Command :: convert "C:/Users/Zaraka/AppData/Local/Temp/DSCN630520120519-7696-18l3nw5.JPG[0]" -resize "100x100>" "C:/Users/Zaraka/AppData/Local/Temp/DSCN630520120519-7696-18l3nw520120519-7696-tx3bmo"
[paperclip] An error was received while processing: #<Paperclip::Error: There was an error processing the thumbnail for DSCN630520120519-7696-18l3nw5> 
```

我发现上传的图像甚至不在临时文件夹中，所以这些创建的图像只有 0 个字节。如果回形针或图像上传有问题，我完全被困在这里。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:08:13.527

这可能意味着您没有正确指向 IM。要么您还没有安装它，要么只是没有按预期找到它。改用双反斜杠：`'C:\\Program Files (x86)\\ImageMagick-6.7.7-Q16'`. （为了避免空格，您还可以使用 8.3 文件名系统来标识带有正斜杠的路径。）

如果您使用的是最新版本的 Paperclip (3.1.4)，在 Windows 上，我建议您从 GnuWin32 安装 File 包。请看这篇文章：[https](https://github.com/thoughtbot/paperclip/issues/926) ://github.com/thoughtbot/paperclip/issues/926 。

最后，为了支持文件名中的非英文字符，您可能需要对 Cocaine 进行猴子补丁。我在初始化程序之间放置了一个 cocaine_path.rb。请注意，“iso-8859-1”可能不适合您。

**cocaine_pacth.rb：**

```
if RUBY_PLATFORM == "i386-mingw32"
  module Cocaine
    class CommandLine
      def run
        output = ''
        begin
          with_modified_path do
            @logger.info("\e[32mCommand\e[0m :: #{command}") if @logger
            ec = Encoding::Converter.new("utf-8", "iso-8859-1")
            output = self.class.send(:'`', ec.convert(command.encode('UTF-8')))
          end
        rescue Errno::ENOENT
          raise Cocaine::CommandNotFoundError
        end
        if $?.exitstatus == 127
          raise Cocaine::CommandNotFoundError
        end
        unless @expected_outcodes.include?($?.exitstatus)
          raise Cocaine::ExitStatusError, "Command '#{command}' returned #{$?.exitstatus}. Expected #{@expected_outcodes.join(", ")}"
        end
        output
      end
    end
  end
end 
```

这涵盖了我最近几天在 Windows 上使用 Paperclip 时遇到的所有问题。我希望它有所帮助。

# java - Android facebook-sdk me/friendrequests

> ID：10664690
> 
> 赞同：-1
> 
> 时间：2012-05-19T11:15:06.143
> 
> 标签：java, android, facebook, request

我尝试从 facebook.com 接收好友请求，但出现异常

> W/System.err(1139)：com.facebook.android.FacebookError：无效的 OAuth 访问令牌。W/System.err(1139)：在 com.facebook.android.Util.parseJson(Util.java:279) W/System.err(1139)：在 test.project.facebook.AutFacebookActivity$1$2.onComplete(AutFacebookActivity. java:147) W/System.err(1139):at com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:254)

我的java代码：

```
private void authorize(){
    intent = new Intent(AutFacebookActivity.this,FaceListView.class);
        fb.authorize(this,new DialogListener(){

            @Override
            public void onComplete(Bundle values){
                Toast.makeText(AutFacebookActivity.this,"Вы вошли",Toast.LENGTH_LONG).show();
                asyncRanFace.request("me/friends",new RequestListener(){
            public void onComplete(String response, Object state) {
                try{
                    JSONObject json = Util.parseJson(response);
                    JSONArray friendsArray =  json.getJSONArray("data");

                    //friendsList = new ArrayList<HashMap>();

                    String fId,fNm;
                    JSONObject friend;
                    for(int i =0 ; i<friendsArray.length(); i++){
                        friend = friendsArray.getJSONObject(i);
                        fId = friend.getString("id");
                        fNm= friend.getString("name");
                        myFriendsMap.put(fId, fNm);

                    }
                    intent.putExtra("map1",myFriendsMap);

                }catch(JSONException e){
                    e.printStackTrace();
                    }
                catch(FacebookError e){
                    e.printStackTrace();
                }
            }
            @Override
            public void onFacebookError(FacebookError e, Object state) {
                // TODO Auto-generated method stub

            }
            @Override
            public void onIOException(IOException e, Object state) {
                // TODO Auto-generated method stub

            }
            @Override
            public void onFileNotFoundException(FileNotFoundException e,
                    Object state) {
                // TODO Auto-generated method stub

            }
            @Override
            public void onMalformedURLException(MalformedURLException e,
                    Object state) {
                // TODO Auto-generated method stub

            }

            });
                asyncRanFace.request("me/friendrequests?access_token=read_requests",new RequestListener(){

                            public void onComplete(String res, Object state) {
                                try{
                                    JSONObject jsonRequest = Util.parseJson(res);
                                    JSONArray friendsRequestArray =  jsonRequest.getJSONArray("data");
                                    JSONObject friendRequest;
                                    String fRId,fRNm;
                                    for(int i =0 ; i<friendsRequestArray.length(); i++){
                                        friendRequest= friendsRequestArray.getJSONObject(i);
                                        fRId = friendRequest.getString("id");
                                        fRNm= friendRequest.getString("name");
                                        myRequestFriendsMap.put(fRId, fRNm);
                                        intent.putExtra("map2",myRequestFriendsMap);
                                        startActivity(intent);
                                    }

                        }catch(JSONException e){
                            e.printStackTrace();
                        }
                    catch(FacebookError e){
                        e.printStackTrace();
                    }

        }
                            @Override
                            public void onFacebookError(FacebookError e, Object state) {
                                // TODO Auto-generated method stub

                            }
                            @Override
                            public void onIOException(IOException e, Object state) {
                                // TODO Auto-generated method stub

                            }
                            @Override
                            public void onFileNotFoundException(FileNotFoundException e,
                                    Object state) {
                                // TODO Auto-generated method stub

                            }
                            @Override
                            public void onMalformedURLException(MalformedURLException e,
                                    Object state) {
                                // TODO Auto-generated method stub

                            }
                        });

                    }
            @Override
            public void onFacebookError(FacebookError e) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onError(DialogError e) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onCancel() {
                // TODO Auto-generated method stub
                Toast.makeText(AutFacebookActivity.this, "Вы вышли", Toast.LENGTH_LONG).show();

            }

        });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:56:37.037

这是整个 Facebook 部分的代码吗？首先，您需要自动化 Facebook，获取 AccessToken（如果需要，保存并重复使用）。

然后只是：

```
mAsyncRunner.request("me/friends", new FriendsRequestListener());

private class FriendsRequestListener implements RequestListener 
{           
            @Override
            public void onComplete(String response, Object state) 
            {
                    try 
                    {
                            JSONObject json = Util.parseJson(response);
                            JSONArray friends = json.getJSONArray("data");                               
                    } 
                    catch (JSONException e) 
                    {
                            Log.e("OnComplete","JSONException");
                    }
                    catch (FacebookError e) 
                    {
                            Log.e("OnComplete","FacebookError");
                    }
            }
            @Override
            public void onIOException(IOException e, Object state)
            {
                    Log.e("FriendsRequest","onIOException");
            }
            @Override
            public void onFileNotFoundException(FileNotFoundException e,Object state)
            {
                    Log.e("FriendsRequest","onFileNotFoundException");
            }
            @Override
            public void onMalformedURLException(MalformedURLException e,Object state)
            {
                    Log.e("FriendsRequest","onMalformedURLException");
            }
            @Override
            public void onFacebookError(FacebookError e, Object state)
            {
                    Log.e("FriendsRequest","onFacebookError");
            }
    } 
```

# css - css3中的边框上的文本

> ID：10664697
> 
> 赞同：0
> 
> 时间：2012-05-19T11:15:51.347
> 
> 标签：css, border, effect

我很好奇。它更多的是为了乐趣和提示，但你知道我是否可以处理一个属性来将文本定位在中间。

我在 JS bin 上有帖子代码（如果 CSS 未打开则刷新）：http: [//jsbin.com/3/uhumok/edit ?html,css,live](http://jsbin.com/3/uhumok/edit?html,css,live)

**HTML：**

```
<a class="one" href="#">Hi !</a> 
```

**CSS：**

```
a {
    display:block;
    color:white;
    text-decoration:none;
    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    box-sizing:border-box; 
    width:100px;
    height:100px;
    text-align:center;
    -webkit-border-radius:50px;
    -moz-border-radius:50px;
    border-radius:50px;

    border-width:50px;
    border-color:rgba(0,0,0,1);

    -webkit-transition:0.2s ease;
    -moz-transition:0.2s ease;
    -ms-transition:0.2s ease;
    -o-transition:0.2s ease;
    transition:0.2s ease;
}

a:hover {
    border-width:0;
    border-color:rgba(0,0,0,0.5);

    -webkit-transition-duration:0.5s;
    -moz-transition-duration:0.5s;
    -ms-transition-duration:0.5s;
    -o-transition-duration:0.5s;
    transition-duration:0.5s;
}

a.one {border-style:solid;} 
```

`:after`我认为如果没有or ，这是不可能的`:before`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:47:09.910

你不能在里面添加另一个标签`<a>`吗？如果是这样，您可以绝对定位这个内部标签来实现：http: [//jsbin.com/3/uhumok/6/edit](http://jsbin.com/3/uhumok/6/edit?html,css,live) ?html,css,live 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:48:57.273

如果您将颜色设置为：#000 并将 padding-top:50px 添加到 :hover，文本将几乎保持在同一个位置。我没有保存示例，因为我没有看到保存选项。如果您使用 :before/:after 文本将被绝对定位，那么我知道为什么您不想使用它们；

# java - 将集合转换为 int 数组

> ID：10664698
> 
> 赞同：9
> 
> 时间：2012-05-19T11:16:04.153
> 
> 标签：java, collections

我想显示一个图表并显示我需要整数值。我从我的代码中得到这个

```
 Collection c = Sort.values(); 
```

有什么方法可以让我转换集合以获取整数值？当我打印集合 c 时我得到了这个

```
 [64770, 26529, 13028, 848, 752, 496] 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-19T11:19:16.730

假设值是 type `Integer`，你可以试试这个：

```
Collection c = Sort.values();
Integer[] a = (Integer[])(c.toArray(new Integer[c.size()])); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T11:19:57.237

```
for (Integer value : c) {
    int i = value.intValue();
    //do something with either value or i
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-25T17:01:03.460

*问题是：*不能分配到**int**数组的转换，反之亦然
`Integer[]``int[]`

```
int[] array = c.stream().mapToInt( i -> i ).toArray(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-30T11:14:25.450

简单地：

```
Integer[] yourArrayVar = yourCollectionVar.toArray(new Integer[0]); 
```

java 只需要知道要生成什么样的数组。

# c++ - std::to_string - 多个重载函数的实例与参数列表匹配

> ID：10664699
> 
> 赞同：54
> 
> 时间：2012-05-19T11:16:07.613
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11

`counter`是一个`int`

```
void SentryManager::add(std::string name,std::shared_ptr<Sentry>){
    name = name + std::to_string(counter);
} 
```

阻止此错误的最佳方法是什么？当我懒惰时，我只是做了 int `long long`（或其他东西），但我确信有更好的方法来解决这个问题。

错误信息：

```
sentrymanager.cpp(8): error C2668: 'std::to_string' : ambiguous call to overloaded function 
```

我正在使用 Visual C++ 2010 Express。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-19T15:51:53.617

在 VC++ 2010 中，分别有三个重载`std::to_string`take `long long`、`unsigned long long`和`long double`—— 显然`int`这些都不是，而且没有一个转换比另一个更好（[demo](http://coliru.stacked-crooked.com/a/69cf73c6af5a7294)），所以转换不能隐式/明确地完成。

就真正的 C++11 支持而言，这是 VC++ 2010 标准库实现部分的失败——C++11 标准本身实际上需要([string.conversions]/7)的*九个*重载：`std::to_string`

> ```
> string to_string(int val);
> string to_string(unsigned val);
> string to_string(long val);
> string to_string(unsigned long val);
> string to_string(long long val);
> string to_string(unsigned long long val);
> string to_string(float val);
> string to_string(double val);
> string to_string(long double val); 
> ```

如果所有这些重载都存在，您显然不会遇到这个问题；但是，VC++ 2010 并不是基于实际的 C++11 标准（在其发布时还不存在），而是基于[N3000](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n3000.pdf)（从*2009 年开始*），它不需要*这些*额外的重载。因此，在这里*过多*地责怪VC++是很苛刻的......

无论如何，对于少数几个调用，使用强制转换自己解决歧义并没有错：

```
void SentryManager::add(std::string& name, std::shared_ptr<Sentry>) {
    name += std::to_string(static_cast<long long>(counter));
} 
```

或者，如果`std::to_string`在您的代码库中大量使用了

```
#include <type_traits>
#include <string>

template<typename T>
inline
typename std::enable_if<std::is_integral<T>::value && std::is_signed<T>::value, std::string>::type
to_string(T const val) {
    return std::to_string(static_cast<long long>(val));
}

template<typename T>
inline
typename std::enable_if<std::is_integral<T>::value && std::is_unsigned<T>::value, std::string>::type
to_string(T const val) {
    return std::to_string(static_cast<unsigned long long>(val));
}

template<typename T>
inline typename std::enable_if<std::is_floating_point<T>::value, std::string>::type
to_string(T const val) {
    return std::to_string(static_cast<long double>(val));
}

// ...

void SentryManager::add(std::string& name, std::shared_ptr<Sentry>) {
    name += to_string(counter);
} 
```

* * *

我无法通过上述 SFINAE 用法检查 VC++ 2010 是成功还是失败；如果失败，以下内容——使用标签调度而不是 SFINAE——应该是可编译的（如果可能不太清楚）：

```
#include <type_traits>
#include <string>

namespace detail {
    template<typename T>                   // is_float         is_unsigned
    inline std::string to_string(T const val, std::false_type, std::false_type) {
        return std::to_string(static_cast<long long>(val));
    }

    template<typename T>                   // is_float         is_unsigned
    inline std::string to_string(T const val, std::false_type, std::true_type) {
        return std::to_string(static_cast<unsigned long long>(val));
    }

    template<typename T, typename _>       // is_float
    inline std::string to_string(T const val, std::true_type, _) {
        return std::to_string(static_cast<long double>(val));
    }
}

template<typename T>
inline std::string to_string(T const val) {
    return detail::to_string(val, std::is_floating_point<T>(), std::is_unsigned<T>());
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-19T15:57:18.680

您已经绊倒了[C++ DR 1261](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#1261)，其中部分内容为

> 代码 " `int i; to_string(i);`" 无法编译，因为 ' ' 在 ' ' 和 ' '`int`之间有歧义。期望用户为了使用而将数字转换为更大的类型似乎是不合理的。`long long``long long unsigned``to_string`

建议的解决方案是添加更多的重载。 [GCC 已经实现了这一点](http://gcc.gnu.org/ml/libstdc++/2009-11/msg00030.html)；我猜MSVC没有。

# java - 在 Eclipse 中进行动态 Web 项目或 Spring MVC 开发需要哪些插件

> ID：10664702
> 
> 赞同：0
> 
> 时间：2012-05-19T11:16:37.287
> 
> 标签：java, eclipse, spring-mvc

我正在寻找动态 Web 项目或 Spring MVC 开发所需的插件。安装我的 Arch Linux 包管理器的 Eclipse 没有（如预期的那样），如果可能的话，我不想下载 Eclipse EE。我确信我可以使用我现在拥有的 Eclipse 完成相同的结果。

*   我相信动态 Web 项目就足够了，我该如何启动它
*   还尝试安装 Spring Toolkit，但我不断收到依赖项错误（我想我应该先启动 Dynamic Web Project ...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:24:12.540

去下载 Eclipse Java EE 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T23:00:33.223

进入 Help -> Eclipse Marketplace -> Search for Spring Source Tool Suite 并安装它。

这就是你所需要的。希望能帮助到你。

# java - ArrayList 添加和删除对象

> ID：10664704
> 
> 赞同：0
> 
> 时间：2012-05-19T11:16:55.163
> 
> 标签：java, android, arraylist

我正在开发一个 android 应用程序，我必须在其中使用带有复选框的自定义列表视图。当用户选中/取消选中时，我需要分别在数组列表中添加/删除对象。

这是我的代码：

```
@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id)
{
    selectedView=view;
    System.out.println("Position of list item:"+position);
    if(parent.getAdapter().equals(categoryAdapter))
    {       
        System.out.println("First Adapter");        
        fl=new FoodList();      
        System.out.println("Tag:"+view.getTag());
        btOrder.setVisibility(View.GONE);
        addToOrder.setVisibility(View.VISIBLE);
        back.setVisibility(View.VISIBLE);
        buttonSeperator.setVisibility(View.VISIBLE);

        fl.bundleCategory=fc.list[position];        
        fl.foodListService();       
        checks=new SparseBooleanArray();        
        quantity=new SparseArray<Integer>();

        orderList=new ArrayList<Order>();
        order=new Order();
        Order Null=null;
        for(int i=0;i<fl.foodList.size();i++)
        {
            checks.put(i, false);
            quantity.put(i, 0);
            order.setQuantity(0);
            order.setItem("");
            //orderList.add(i,Null);
            //orderList.add(i,order);
            orderList.add(order);
            System.out.println("Adding at pos:"+i+"Value:"+Null);
        }   
        WaiterFoodAdapter foodAdapter=new WaiterFoodAdapter(this, R.layout.take_order_list, fl.foodList);
        categoryList.setAdapter(foodAdapter);
        categoryList.setOnItemClickListener(this);
        }
        else
        {           
            System.out.println("Second Adapter:Id="+parent.getId());

            if(view != null)
            {
                final TextView tvItem=(TextView)selectedView.findViewById(R.id.foodName);   
                final TextView tvQuantity=(TextView)selectedView.findViewById(R.id.quantity);

                selectedPosition=position;
                SelectFood = (CheckBox)view.findViewById(R.id.selectFood);

                if(SelectFood.isChecked())          
                {           
                    SelectFood.setChecked(false);                   
                    checks.put(selectedPosition, false);
                    quantity.put(selectedPosition,0);

                    //order.setQuantity(0);
                    //order.setItem("");
                    System.out.println("Removing at pos:"+selectedPosition+"Value:"+orderList.get(selectedPosition).getItem()+orderList.get(selectedPosition).getQuantity());
                    orderList.remove(orderList.get(selectedPosition));

                    tvQuantity.setText("0");
                    System.out.println("Position="+selectedPosition);
                }           
                else
                {
                    SelectFood.setChecked(true);                    
                    checks.put(selectedPosition, true);
                    System.out.println("Position="+selectedPosition);

                    //orderList=new ArrayList<Order>();                     
                    final AlertDialog.Builder quantityAlert= new AlertDialog.Builder(TakeOrder.this);
                    quantityAlert.setTitle("Quantity");
                    quantityAlert.setMessage("Please enter quantity");

                    final EditText input = new EditText(TakeOrder.this);
                    input.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);
                    quantityAlert.setView(input);

                    quantityAlert.setPositiveButton("Ok", new DialogInterface.OnClickListener()
                    {   
                        public void onClick(DialogInterface dialog, int whichButton)
                        {
                            value = input.getText();

                            if(value.toString().equals(""))
                            {               
                                SelectFood.setChecked(false);
                                Toast msg=Toast.makeText(TakeOrder.this, "Please provide quantity", Toast.LENGTH_SHORT);
                                msg.show();       
                            }
                            else
                                if(value.toString().equals("0"))
                                {                       
                                    SelectFood.setChecked(false);                        
                                    Toast msg=Toast.makeText(TakeOrder.this, "Please enter valid quantity", Toast.LENGTH_SHORT);                          
                                    msg.show();
                                }
                                else                    
                                {                                   
                                    tvQuantity.setText(value);
                                    quantity.put(selectedPosition, Integer.valueOf(value.toString()));
                                    order.setQuantity(Integer.valueOf(tvQuantity.getText().toString()));
                                    order.setItem(tvItem.getText().toString());
                                    orderList.add(selectedPosition, order);
                                    System.out.println("setting at pos:"+selectedPosition+"Value:"+orderList.get(selectedPosition).getItem()+orderList.get(selectedPosition).getQuantity());
                                }

                            //Log.v("Item:",orderList.get(selectedPosition).getItem());
                            //Log.v("Quantity:",String.valueOf(orderList.get(selectedPosition).getQuantity()));

                        }               
                    });

                quantityAlert.setNegativeButton("Cancel", new DialogInterface.OnClickListener()
                {
                      public void onClick(DialogInterface dialog, int whichButton)
                      {
                          SelectFood.setChecked(false);                
                      }
                    });

                quantityAlert.show();
            }                                           
        }

    }

} 
```

当用户单击 addToOrder 按钮时，它只搜索选中的复选框并获取选中的 listItems 的相关 textViews 值。

```
public void addToOrder(View v)
{
    for(int i=0;i<fl.foodList.size();i++)
    {           
        if(checks.get(i)==true)
            {
            System.out.println("Order is:"+orderList.get(i).getItem()+orderList.get(i).getQuantity());
            }                   
    }
} 
```

这是我的适配器，仅用于自定义视图目的

```
public class WaiterFoodAdapter extends ArrayAdapter<Food> 
{
    Context context;
    TakeOrder holder;
    int layoutResourceId;
    List<Food> foodList;

    public WaiterFoodAdapter(Context context, int layoutResourceId,List<Food> foodList)
    {
        super(context, layoutResourceId, foodList);         
        this.context=context;
        this.layoutResourceId=layoutResourceId;
        this.foodList=foodList;
    }

    @Override
    public View getView(int position,View convertView,ViewGroup parent)
    {
        View row=convertView;

        if(row==null)
        {
            LayoutInflater inflater=((Activity)context).getLayoutInflater();
            row=inflater.inflate(layoutResourceId, parent,false);
            holder=new TakeOrder();
            holder.foodIcon=(ImageView)row.findViewById(R.id.foodIcon);
            holder.tvFoodName=(TextView)row.findViewById(R.id.foodName);
            holder.cbSelectFood=(CheckBox)row.findViewById(R.id.selectFood);
            holder.cbSelectFood.setClickable(false);             
            holder.tvFoodDescription=(TextView)row.findViewById(R.id.foodDescription);
            holder.tvFoodQuantity=(TextView)row.findViewById(R.id.foodQuantity);
            holder.tvQuantity=(TextView)row.findViewById(R.id.quantity);
            row.setTag(holder);

        }       
        else
        {               
            holder=(TakeOrder)row.getTag();             
        }
        if(fl.bundleCategory.equals("Appetisers"))
        {
        holder.foodIcon.setImageResource(R.drawable.appetiser);
        }
        else
            if(fl.bundleCategory.equals("Main Courses"))
            {
                holder.foodIcon.setImageResource(R.drawable.main_course);
            }
            else
                if(fl.bundleCategory.equals("Sides"))
                {
                    holder.foodIcon.setImageResource(R.drawable.sides);
                }
                else
                    if(fl.bundleCategory.equals("Desserts"))
                    {
                        holder.foodIcon.setImageResource(R.drawable.desserts);
                    }
                    else
                        if(fl.bundleCategory.equals("Drinks"))
                        {
                            holder.foodIcon.setImageResource(R.drawable.drinks);
                        }
        holder.tvFoodName.setText(foodList.get(position).getMenuItem());
        holder.tvFoodDescription.setText(foodList.get(position).getDescription());
        holder.cbSelectFood.setChecked(checks.get(position));
        holder.tvQuantity.setText(String.valueOf(quantity.get(position)));      
        return row;     
    }

} 
```

假设我选择（检查）两个列表项，然后按 addToOrder 按钮，它只会打印最后一次选择的项目两次。我不知道为什么它只是覆盖了我列表中的第一个对象我认为我的逻辑是正确的，但不知道为什么它不起作用？有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:25:44.973

您应该在适配器中创建一个方法，让您更新当前的数组列表或添加/删除您传递的项目。但我看不出你是如何实现你的适配器的，这可能是最重要的代码......

你需要这样的东西，在你的适配器中（这是为了更新一个完整的列表）：

```
public void updateListArray(ArrayList<Item> list) {
    this.clear();
    for(Item item : list) {
        this.add(item);
    }
    notifyDataSetChanged();
} 
```

# objective-c - 弹出时未释放 UIViewController

> ID：10664710
> 
> 赞同：4
> 
> 时间：2012-05-19T11:17:32.843
> 
> 标签：objective-c, memory-management

I have a table view that when a cell is selected it pushes a view controller onto the navigation stack:

```
SAPostTableViewController *postViewController = [[SAPostTableViewController alloc] initWithNibName:NSStringFromClass([SAPostTableViewController class]) bundle:nil];
postViewController.site = site;
[self.navigationController pushViewController:postViewController animated:YES];
[postViewController release]; 
```

SAPpostTableViewController 有一个静态的 tableView，它的单元格是从一个 nib 加载的。

我已经覆盖了`initWithNibName:bundle:`方法：

```
-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
        self.sections = [NSMutableDictionary dictionary];
    }
    return self;
} 
```

`sections`是保留财产。

在我有这个`viewDidLoad`：`SAPostTableViewController`

```
- (void)viewDidLoad
{
    [super viewDidLoad];
     [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(cellVisibiltyChanged:) name:@"SAStaticCellVisibiltyChanged" object:nil];
} 
```

所以要匹配`viewDidUnload`：

```
- (void)viewDidUnload
{
    [super viewDidUnload];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:@"SAStaticCellVisibiltyChanged" object:nil];
} 
```

但是，当我按下导航栏中的后退按钮（所有标准行为，无覆盖）并`SAPostTableViewController`弹出时，它不会调用`viewDidUnload`或`dealloc`. 所以这意味着，如果我然后重新选择推动`SAPostTableViewController`它的单元格，则会创建一个新实例`SAPostTableViewController`并前后重复，这意味着内存使用量不断增加，因为弹出`SAPostTableViewController`的 s 永远不会被释放。（我通过在分配上运行 Instruments 知道这一点）

奇怪的是，如果我两次发布 SAPostTableViewController，它会按我的预期工作：

```
SAPostTableViewController *postViewController = [[SAPostTableViewController alloc] initWithNibName:NSStringFromClass([SAPostTableViewController class]) bundle:nil];
postViewController.site = site;
[self.navigationController pushViewController:postViewController animated:YES];
[postViewController release];
[postViewController release]; 
```

（如果我添加第三个发布声明，它会像我预期的那样崩溃，只有 2 个）

我已经使用`retainCount`并逐步执行了在上面直接代码的第一行中执行的代码行，retainCount 保持为 1。它在第一行和第二行之间跳跃，所以我看不到它在任何地方被保留额外的时间？

SAPpostTableViewController 只用在这个地方，它不是任何东西的委托，也没有委托。

我怎样才能找到解决方法，还是我错过了一些简单的东西？

以下是 Instruments 在推送一次 SAPostTableViewController 后显示的内容（只有一个发布声明）： ![在此处输入图像描述](../Images/cc98286f1f228c966502ee15a0a1ce21.png)

以及反复来回导航后显示的内容（再次，一个发布声明）： ![在此处输入图像描述](../Images/c48e101a64fddbe7f8fcee48babacb5e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:25:44.927

当您单击一个单元格时，您正在创建一个新对象，为什么您不在`SAPostTableViewController`init 方法中创建您的对象（）然后推送您在单元格中单击的相同对象观看时间

你可以这样做：

```
postViewController = [[SAPostTableViewController alloc] initWithNibName:NSStringFromClass([SAPostTableViewController class]) bundle:nil]; 
```

并且在

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath { 
postViewController.site = site; 
[self.navigationController pushViewController:postViewController animated:YES]; [postViewController release]; 

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:14:36.687

我不知道你的问题是什么，但这里有一些事情需要考虑：

1.  你绝对**不**应该释放视图控制器两次。如果您确实在 UIKit 中发现了内存泄漏（这不太可能），那么它很可能会在 UIKit 的未来版本中得到修复。这意味着任何人在新版本的操作系统上运行旧版本的应用程序只会遇到崩溃（由于过度释放视图控制器）。泄漏总比崩溃好。泄漏的应用程序仍然是可用的应用程序（至少在您泄漏太多之前）。但是一个崩溃的应用程序根本无法运行。

2.  `-viewDidUnload`没有做你认为应该做的事情。它仅在视图控制器的视图*因内存压力而*被卸载时调用。在正常释放期间不会调用它。依靠`-viewWillAppear:`而`-viewDidDisappear:`不是更明智。

# c++ - 通过 linux 消息的简单 IPC

> ID：10664714
> 
> 赞同：2
> 
> 时间：2012-05-19T11:18:24.227
> 
> 标签：c++, linux, message-queue

我正在尝试编写一些使用 linux 消息的客户端-服务器应用程序示例。这是我的代码：

```
#include <mqueue.h>
#include <ctype.h>
#include <stdlib.h>
#include <stdio.h>
#include <errno.h>
#include <string.h>
#include <sys/stat.h>
#include <sys/types.h>

#define MSG_SIZE 4096
#define MSG_MAX_COUNT 1024
#define MSG_TYPE_TO_UPPER 0
#define MSG_TYPE_EXIT 1
#define MQ_NAME "msg_queue"

namespace {
    int str_toupper(char *str)
    {
        int len = 0;
        for(; str[len]; ++len) {
            str[len] = toupper(str[len]);
        }
        return len;
    }
}

int main(int argc, char** argv)
{
    if(argc != 2) {
        fprintf(stderr, "Usage: msg_queue (client|server)\n");
        exit(EXIT_FAILURE);
    }

    struct mq_attr attr;    // MQueue attributes
    mqd_t mqd;      // MQueue descriptor
    char buf[MSG_SIZE]; // Msg buffer
    unsigned int type;  // Msg type(priority)

    // Set up MQueue attributes
    attr.mq_maxmsg = MSG_MAX_COUNT;
    attr.mq_msgsize = MSG_SIZE;
    attr.mq_flags = 0;
    attr.mq_curmsgs = 0;

    mqd = mq_open(MQ_NAME, O_RDWR | O_CREAT, 0664, &attr);
    if(mqd == -1) {
        fprintf(stderr, "mq_open() failed for \""MQ_NAME"\": %s\n", strerror(errno));
        exit(EXIT_FAILURE);
    }

    if(strcmp(argv[1], "server") == 0) {
        while(mq_receive (mqd, buf, MSG_SIZE, &type) != -1) {
            if(type == MSG_TYPE_EXIT) {
                mq_unlink(MQ_NAME);
                mq_close(mqd);
                break;
            } else if(type == MSG_TYPE_TO_UPPER) {
                int len = str_toupper(buf);
                if(mq_send (mqd, buf, len, MSG_TYPE_TO_UPPER) == -1) {
                    fprintf(stderr, "Server: mq_send() failed: %s", strerror(errno));
                }
            }
        }
    } else if(strcmp(argv[1], "client") == 0) {
        while(1) {
            printf("Input a message: <type>(0 - TO_UPPER, 1 - EXIT) <message>\n");
            scanf("%u %s", &type, buf);

            if(mq_send (mqd, buf, strlen(buf), type) == -1) {
                fprintf(stderr, "Client: mq_send() failed: %s", strerror(errno));
            }

            if(type == MSG_TYPE_TO_UPPER) {
                if(mq_receive (mqd, buf, MSG_SIZE, &type) == -1) {
                    fprintf(stderr, "Client: mq_receive() failed: %s", strerror(errno));
                }
                printf("\"%s\" received\n", buf);
            } else if(type == MSG_TYPE_EXIT) {
                mq_unlink(MQ_NAME);
                mq_close(mqd);
                break;
            }
        }
    } else {
        fprintf(stderr, "Usage: msg_queue (client|server)\n");
        exit(EXIT_FAILURE);
    }
    return 0;
} 
```

我的错误是什么？它总是从第 47 行打印错误 -`fprintf(stderr, "mq_open() failed for \""MQ_NAME"\": %s\n", strerror(errno));`带有`errno = EINVAL`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:34:46.280

我看到两个问题：

*   在 Linux 上，您的消息队列名称**必须**以 a 开头。`/`见[`mq_overview(7)`](http://www.kernel.org/doc/man-pages/online/pages/man7/mq_overview.7.html)：

> 每个消息队列由 /somename 形式的名称标识；即，最多 NAME_MAX（即 255）个字符的以 null 结尾的字符串，由一个初始斜杠组成，后跟一个或多个字符，其中没有一个是斜杠。

*   `MSG_MAX_COUNT`很可能超出您的系统限制。它必须小于（或等于）`/proc/sys/fs/mqueue/max_size`。见[`mq_open(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/mq_open.3.html)：

> `EINVAL`: 在 oflag 中指定了 O_CREAT，并且 attr 不是 NULL，但是 `attr->mq_maxmsg`or`attr->mq_msqsize`是无效的。这两个字段都必须大于零。在非特权进程（没有 CAP_SYS_RESOURCE 能力）中，**`attr->mq_maxmsg`必须小于或等于 msg_max 限制**，并且`attr->mq_msgsize`必须小于或等于 msgsize_max 限制。此外，即使在特权进程中，`attr->mq_maxmsg`也不能超过 HARD_MAX 限制。（有关这些限制的详细信息，请参阅 mq_overview(7)。）

另一个限制可能没问题，但您也应该验证它。

# java - 为 JFileChooser 上的选定文件设置自己的文件图标

> ID：10664715
> 
> 赞同：3
> 
> 时间：2012-05-19T11:18:24.547
> 
> 标签：java, swing, icons, jfilechooser, filelist

我有以下问题。我有一个选定的文件列表，我在`JFileChooser`. 现在我想删除这个文件列表，并想在所选文件上显示一个绿色勾号`JFileChooser`。

是否可以更改某些特定文件的图标`JFileChooser`（在这种情况下为所选文件）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T12:52:09.210

是的，您可以通过将自定义 FileView 传递给[setFileView()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFileChooser.html#setFileView%28javax.swing.filechooser.FileView%29)方法来实现。在[JFileChooser 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html#fileview)中甚至有一个这样做的例子。

# php - 从需要 cookie 的站点自动下载 URL 内容

> ID：10664717
> 
> 赞同：-1
> 
> 时间：2012-05-19T11:18:51.130
> 
> 标签：php, matlab, cookies, automation, download

我正在尝试定期从要求用户登录的站点自动下载内容。我要下载的内容是一个小的 .js 文件（<10 kb）。

由于该站点仅在我登录时才会显示所需的数据，因此我无法简单地使用诸如**urlwrite**（在 MATLAB 中）之类的函数来下载数据。

我不确定 PHP 中的**libcurl**库是否能够轻松解决问题。

正如对这个类似问题的回答中所建议的那样（[从需要 POST 数据的站点获取数据？](https://stackoverflow.com/questions/8244795/fetching-data-from-a-site-requiring-post-data)），我尝试使用 Zend_Http_Client，但无法让它工作。

总而言之，我想要帮助从需要用户登录（并且可能提交 cookie）的站点自动下载 URL 内容。

* * *

除此之外，我希望得到有关哪种软件最适合定期自动下载此类数据的建议。

*（如果您确实需要我尝试下载的确切 URL 来测试解决方案，请在下面发表评论。）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:23:08.993

我唯一关心的是登录，而不是一般的 cookie。检查此问题的答案：[如何使用 libcurl 登录到安全网站并获取登录后的 html](https://stackoverflow.com/questions/3550016/how-do-i-use-libcurl-to-login-to-a-secure-website-and-get-at-the-html-behind-the)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:43:27.377

这取决于网站使用的登录类型。如果它使用 HTTP 身份验证，则使用 curl 选项 CURLOPT_HTTPAUTH（请参阅 setopt，[http](http://php.net/manual/en/function.curl-setopt.php) ://php.net/manual/en/function.curl-setopt.php ）否则，如前所述，您使用 COOKIEJAR 和可能的 COOKIEFILE。

另一种选择是独立实用程序 wget。常见问题解答包含对两种登录方法的很好解释[http://wget.addictivecode.org/FrequentlyAskedQuestions#password-protected](http://wget.addictivecode.org/FrequentlyAskedQuestions#password-protected)

如果这是您第一次使用 curl：不要忘记将 CURL_RETURNTRANSFER 设置为 true（如果为 false，则将内容发送到标准输出）并将 CURL_HEADER 设置为 false 以获取没有标题的内容。

# c# - 从 Asp.net mvc3 控制器重定向到不同的 URL

> ID：10664728
> 
> 赞同：1
> 
> 时间：2012-05-19T11:20:19.290
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, c#-4.0

我正在使用 asp.net mvc3 并且有一个问题，我想将用户重定向到用户输入的任何动态链接，如何做到这一点我目前的工作如下

我尝试了两种类型

**1.**

**控制器**

```
 if (condition == true)
        {
            string Link ="www.google.com";  // suppose this is the url entered by user
            ViewData["link"] = Link;
            return PartialView("REdirectToLink");
         } 
```

**重定向链接.cshtml**

```
@{
  string link = ViewData["link"].ToString(); 
 }
 <script type="text/javascript" >
 var tlink = "@link";
 window.location.replace(tlink);
 </script> 
```

**2.**

**控制器**

```
if (condition == true)
        {              
           string Link ="www.google.com"; // suppose this is the url entered by user
            return  RedirectPermanent(Link);// also tried return  Redirect(Link);
         } 
```

如何做到这一点，提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T11:42:51.120

只需使用：

```
string link = "http://www.google.com";
return Redirect(link); 
```

# c# - Java 中 C# IEnumerable 的等价物是什么？具有协变能力的，而不是可迭代的

> ID：10664729
> 
> 赞同：12
> 
> 时间：2012-05-19T11:20:23.237
> 
> 标签：c#, java

这种协方差在 C# 中是可能的：

```
IEnumerable<A> a = new List<A>();
IEnumerable<B> b = new List<B>();

a = b;

...

class A {
}

class B : A {
} 
```

这在 Java 中是不可能的：（Iterable: Seen in this question [Java Arrays & Generics : Java Equivalent to C# IEnumerable<T>](https://stackoverflow.com/questions/362367/java-arrays-generics-java-equivalent-to-c-sharp-ienumerablet)）。

```
Iterable<A> a = new ArrayList<A>();
Iterable<B> b = new ArrayList<B>();

a = b;

...

class A {
}

class B extends A {
} 
```

使用 Iterable，Java 看不到这两个集合是协方差的

Java中哪个可迭代/可枚举接口可以促进协变？

* * *

协方差的另一个很好的例子，给定上面相同的 A 类和 B 类，这在 Java 和 C# 上都是允许的：

```
 A[] x;
   B[] y = new B[10];

   x = y; 
```

从版本 1 开始，这两种语言都具有该功能。很高兴他们正在取得进展，以使其在[泛型](https://stackoverflow.com/a/10664932)上成为现实。尽管在语法方面，C# 的摩擦较小。

所有 OOP 语言都必须使用协变，否则 OOP 继承将是无用的练习，例如

```
 A x;
 B y = new B();

 x = y; 
```

这种权力也应该扩展到泛型。

* * *

* * *

感谢大家的回答和见解。现在有了一个具有协变能力的 Java 泛型的可重用方法。这不是我们中的一些人想要的语法，但 it( `<? extends classHere>`) 确实符合要求：

```
import java.util.*;    
public class Covariance2 {  

        public static void testList(Iterable<? extends A> men) {                 
                for(A good : men) {
                        System.out.println("Good : " + good.name);
                }
        }    

        public static void main(String[] args) {    
                System.out.println("The A"); 
                {
                        List<A> team = new ArrayList<A>();
                        { A player = new A(); player.name = "John"; team.add(player); }
                        { A player = new A(); player.name = "Paul"; team.add(player); }
                        testList(team);
                }

                System.out.println("The B");
                {
                        List<B> bee = new ArrayList<B>();
                        { B good = new B(); good.name = "George"; bee.add(good); }
                        { B good = new B(); good.name = "Ringo"; bee.add(good); }
                        testList(bee);
                }    
        }
}

class A { String name; }    
class B extends A {} 
```

输出：

```
The A
Good : John
Good : Paul
The B
Good : George
Good : Ringo 
```

* * *

如果有人对它在 C# 中的样子感兴趣

```
using System.Collections.Generic;
using System.Linq;

public class Covariance2 {  

        internal static void TestList(IEnumerable<A> men) {                 
                foreach(A good in men) {
                        System.Console.WriteLine("Good : " + good.name);
                }
        }    

        public static void Main(string[] args) {    
                System.Console.WriteLine("The A"); 
                {
                        IList<A> team = new List<A>();
                        { A player = new A(); player.name = "John"; team.Add(player); }
                        { A player = new A(); player.name = "Paul"; team.Add(player); }
                        TestList(team);
                }

                System.Console.WriteLine("The A"); 
                {
                        IList<B> bee = new List<B>();
                        { B good = new B(); good.name = "George"; bee.Add(good); }
                        { B good = new B(); good.name = "Ringo"; bee.Add(good); }
                        TestList(bee);
                }    
        }
}

class A { internal string name; }    
class B : A {} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-19T11:50:39.687

Java 泛型仅在通过通配符显式声明时才允许协变，以提供更严格的类型安全。这有效：

```
 Iterable<? extends A> a = new ArrayList<A>();
    Iterable<B> b = new ArrayList<B>();
    a = b; 
```

但是，请注意，您现在无法通过引用添加任何内容，`a`因为它被声明为包含某些特定但*未知*的类的实例，这些类可能是 A 或其任何子类。通配符的行为通常是违反直觉的，并且会变得非常复杂，因此应适度使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T11:23:40.047

[泛型在 Java 中不是协变](https://www.ibm.com/developerworks/java/library/j-jtp01255/index.html)的。您必须以旧方式执行此操作，就像 C# 不支持泛型中的协变时一样。

但是，在 Java 中，您可以假装泛型可迭代对象是*任何事物*的可迭代对象，用问号表示。任何事物的列表只包含对象。

```
Iterable<A> a = new ArrayList<A>();
Iterable<?> b = a; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T11:37:17.357

泛型集合中的这种协方差是一个坏主意，这是有充分理由的：

假设你这样做：

```
ArrayList<A> a = new ArrayList<A>();
ArrayList<B> b = new ArrayList<B>();

a.add(new A()); 
b = a;
B item=b.get(0); 
```

糟糕——一个只返回 B 类型对象的函数返回了 A 类型。这显然行不通。因此 Java 编译器不允许它以确保类型安全。

不过这没什么大不了的——简单的解决方法是只使用非泛型集合类或将泛型类型参数限制为公共超类（在本例中为 A）。

# oop - 比较存储库与提供者与服务

> ID：10664731
> 
> 赞同：17
> 
> 时间：2012-05-19T11:20:46.577
> 
> 标签：oop, design-patterns, architecture

我需要实现从某个远程数据源检索数据的逻辑。现在我需要决定——我需要哪个概念：Provider、Repository 或 Service。

其实我不太明白这两者之间的巨大差异。是的，我知道存储库是更具体的数据，不应该包含任何业务逻辑。另一方面，提供者除了管理数据外，还可能包含一些业务规则。Service 除了管理数据外，还可以包含一些业务逻辑。那么Service和Provider有什么区别。

从另一个角度来看，我认为使用服务是更好的方法来表明它是远程访问的抽象。

结论：所有这些方法看起来都很合理，我完全对此感到困惑。如果有人能帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-19T22:30:41.223

存储库和服务不是相互排斥的。事实上，它们经常一起使用。

服务层位于您的领域对象之上，并为业务操作提供粗粒度接口。它通常描述您的应用程序的用例。服务层使用存储库来获取您的域对象，并在可能的情况下将进一步的执行委托给它们。

Repository 就像一个持久域对象的集合。它提供了使用某些标准查找正确对象的方法。它还提供了保存这些对象的方法。

野外存储库的实现差异很大。存储库可以提供类似的方法

> ```
> List<Person> findPersonByName(String name) 
> ```

或更通用的方法与标准对象

> ```
> List<Person> find(Criteria criteria) 
> ```

附加阅读：[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)、[存储库](http://martinfowler.com/eaaCatalog/repository.html)

我不熟悉提供者模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:45:31.960

> 所有这些方法看起来都很合理，我完全对此感到困惑。

难怪您会感到困惑，因为如今人们似乎对任何事情都求助于服务和提供者，而这恰恰相反；）

存储库模式的定义更加精确：它是一组相同类型的对象，您可以从中查询、添加或删除，对调用者显示为内存中的集合，但实际上映射到幕后的持久存储。

如何找到一个真正描述您的对象所做的名称而不是使用淡化的、破烂的概念包？我完全支持所有开发人员都能立即识别的模式和共享习语，但是当它们不再意味着任何精确时，我看不到单词的使用......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T15:14:07.597

简单来说，您的服务 Service S 使用 Repository R 进行数据库 CRUD 或搜索操作。假设你有不同的服务 S1、S2、S3，每一个都有相同的合约（接口）但不同的实现，你需要一个提供者来选择在什么上下文中使用哪一个。您可以使用依赖注入覆盖提供者模式，这样您的代码耦合度就会降低并且不负责实例化服务，您的客户端将使用 DI 容器实例化正确的服务

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-21T17:37:52.257

**Repository**封装了特定的数据逻辑来获取数据，例如 ICustomerRepository 可以有 SqlCustomerRepository、MySqlCustomerRepository 的实现。但是，**DataProvider**抽象了数据逻辑并使用配置的方式来解析数据。数据可以来自数据库、平面文件或 NoSql 数据库。此外，与注入服务的存储库实现不同，DataProvider 的配置可以在上下文中更改。另一方面，正如 Nefron 解释的那样，**Service**在实体中定义的业务逻辑上运行。

# java - 使用 NIO 的套接字中客户端的 IP 地址

> ID：10664732
> 
> 赞同：1
> 
> 时间：2012-05-19T11:20:48.853
> 
> 标签：java, sockets, nio

使用 NIO，我们将两个端口绑定到 ServerSocket 类。

```
 serverChannelPrimary = ServerSocketChannel.open();
        serverChannelSecondary = ServerSocketChannel.open();

        // Retrieves a server socket associated with this channel
        serverSocketPrimary = serverChannelPrimary.socket();
        serverSocketSecondary = serverChannelSecondary.socket();

        // Opens a connection selector
        connectionSelector = Selector.open();

        // Bind the specified port num
        serverSocketPrimary.bind(new InetSocketAddress(portOne));
        serverSocketSecondary.bind(new InetSocketAddress(portTwo));

        // Set nonblocking mode for the listening socket
        serverChannelPrimary.configureBlocking(false);
        serverChannelSecondary.configureBlocking(false);

        // Register the ServerSocketChannel with the Selector
        serverChannelPrimary.register(connectionSelector, SelectionKey.OP_ACCEPT);
        serverChannelSecondary.register(connectionSelector, SelectionKey.OP_ACCEPT); 
```

现在，我们还能够获取新客户端发出第一个请求时连接的客户端的 IP 地址，我们将其添加到向量 clientIps 中。

```
 while (isActive) {
        try {
            numberOfKeys = 0;
            numberOfKeys = connectionSelector.select(timeOut);
            if (numberOfKeys == 0) {
                continue; // None of request available
            }
            // Get iterator through the selected keys list
            Iterator<SelectionKey> iterKeys = connectionSelector
                    .selectedKeys().iterator();
            while (iterKeys.hasNext()) {
                try {
                    SelectionKey selectedKey = (SelectionKey) iterKeys
                            .next();
                    // Verify the key validity
                    if (!selectedKey.isValid()) {
                        logger.error("Received key is invalid");
                        continue;
                    } else if (selectedKey.isAcceptable()) {
                        // Accept the client request
                        ServerSocketChannel server = (ServerSocketChannel) selectedKey
                                .channel();
                        SocketChannel channel = server.accept();
                        // Get the socket associated with this channel
                        Socket clientInfo = channel.socket();
                        logger.debug("Application got client request from (Host name:"
                                + clientInfo.getInetAddress().getHostName()
                                + ",Ip address:"
                                + clientInfo.getInetAddress()
                                        .getHostAddress()
                                + ",port:"
                                + clientInfo.getPort());

                        String clientAddress=clientInfo.getInetAddress().getHostAddress();
                        if(!clientIps.contains(clientAddress)){
                            clientIps.add(clientAddress);
                        }

                        logger.debug("List of client : "+clientIps);

                        clientMgr.includeClient(channel);
                    }
                } catch (Exception e) {
                    logger.error(e.getMessage());
                } finally {
                    logger.debug("Since this key has been handled, remove the SelectedKey from the selector list.");
                    iterKeys.remove();
                }

            }

        } catch (Exception e) {
            logger.error(e.getMessage());
        }
    } 
```

但是，在建立连接之后，一旦我们开始从两个端口上的多个客户端获取数据，是否有可能确定**每个客户端发送数据时每个客户端的 IP 地址**。我希望我提供的代码足以清楚地解释我们所遇到的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:49:20.753

您可以调用`SocketChannel.socket().getSocketAddress()`以获取任何特定 SocketChannel 的远程地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T11:32:28.137

ServerSocketChannel是TCP的，所以两端的IP地址是不能改变的。

在你的行

```
SocketChannel channel = server.accept(); 
```

频道特定于特定客户。这些是您将用于与每个客户端通信的对象，每个对象代表一个带有单个远程 ip/port 元组的单个 TCP 会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-21T10:28:42.680

我没有看到代码的“阅读”部分，但我相信你有一个。您可以尝试像这样获取远程套接字地址（ip + 端口）：

```
if (selectionKey.isReadable()) {
    SocketChannel client = (SocketChannel) selectionKey.channel();
    // you can here read data from given socket; client.read(buffer);
    // and also get remote (and local too) address
    client.getRemoteAddress();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-26T12:14:53.653

一旦你让 socketChannel 能够发送回客户端，你就可以使用下面的函数。

```
//Not complete example
SocketChannel ssc;
/* after accepting and other such required operations */

ssc.socket().getInetAddress().toString();
/**
Returns:
the remote IP address to which this socket is connected, or null if the socket is not connected. 

will return 10.50.10.20 as a string
*/

//To get remote port as an int
ssc.socket().getPort(); 
```

# php - 如果在如果

> ID：10664735
> 
> 赞同：-2
> 
> 时间：2012-05-19T11:21:12.503
> 
> 标签：php, wordpress, if-statement

`if`我在将语句放在语句中时遇到了一个小问题，`if`例如：

```
<?php
$steponeimage = get_post_meta($post->ID, 'step_one_image', true);
$steponecontent = get_post_meta($post->ID, 'step_one_content', true);
$steptwoimage = get_post_meta($post->ID, 'step_two_image', true);
$steptwocontent = get_post_meta($post->ID, 'step_two_content', true);
$stepthreeimage = get_post_meta($post->ID, 'step_three_image', true);
$stepthreecontent = get_post_meta($post->ID, 'step_3_content', true);
if ($steponecontent) {
?>
<div id="processPanel" class="panel">
    <a href="#content1" label="1">Step 1</a>
<?php if ($steptwocontent) { ?>
<a href="#content2" label="2">Step Two</a>
<?php } else { ?><?php } ?>
<?php if ($stepthreecontent) { ?>
<a href="#content3" label="3">Step Three</a>
<?php } else { ?><?php } ?>
    <div id="content1">
<p><?php $images1 = $helper->imageDisplay($steponeimage , $height , $width , true , $ar[0] , false, false,'' ,'' ,false);
echo "<div class='imageholder'> $images1 </div>"; ?></p>
<p><?php echo $steponecontent; ?></p>
</div>
<?php if ($steptwocontent); { ?>
<div id="content2">
<p><?php $images2 = $helper->imageDisplay($steptwoimage , $height , $width , true , $ar[0] , false, false,'' ,'' ,false);
echo "<div class='imageholder'> $images2 </div>"; ?></p>
<p><?php echo $steptwocontent; ?></p>
</div><?php } else { ?><?php } ?>
<?php if ($stepthreecontent); { ?>
<div id="content3">
<p><?php $images3 = $helper->imageDisplay($stepthreeimage , $height , $width , true , $ar[0] , false, false,'' ,'' ,false);
echo "<div class='imageholder'> $images3 </div>"; ?></p>
<p><?php echo $stepthreecontent; ?></p>
</div><?php } else { ?><?php } ?>
</div>
<?php } else { ?>
<?php } ?> 
```

我正在尝试从 wordpress 帖子中读取帖子元数据，如果填写了第一步元框，它会显示分步信息，然后如果填写了第二步的元框，则在此处添加第二步，如果第三步的框是填充它添加第三步等。

我的错误是

> 解析错误：语法错误，意外的 T_ELSE

这来自这里：

```
<p><?php echo $steptwocontent; ?></p>
</div><?php } else { ?><?php } ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T11:24:42.727

这是你的问题：

```
if ($steptwocontent); { 
```

将其更改为

```
if ($steptwocontent) { 
```

编辑：

只是注意到你也对 stepthreecontent 做了同样的事情

改变

```
if ($stepthreecontent); { 
```

至

```
if ($stepthreecontent) { 
```

# mysql - MySQL 选择别名

> ID：10664736
> 
> 赞同：0
> 
> 时间：2012-05-19T11:21:18.853
> 
> 标签：mysql

我在 sql 语句上有错误

```
SELECT temp.*  FROM 
    (SELECT th1.process_id,th2.process_id FROM `thread` as th1,`thread` as th2
    where (th1.thread_id=th2.thread_id)and 
    (th1.process_id!=th2.process_id) and 
    (th1.analysis_id='".$analysis_id."' ) and  
    (th2.analysis_id='".$analysis_id."' )) as temp 
     where ((t emp.p1  NOT IN (select pr.parent_process_id from process as pr 
            wherer pr.process_id=th2.process_id and (th2.analysis_id='".$analysis_id."' ) 
                and (pr.analysis_id='".$analysis_id."' )))  
        or  (temp.p2  NOT IN 
                         (select pr1.parent_process_id from process as pr1 
                           wherer pr1.process_id=th1.process_id  and (th2.analysis_id='".$analysis_id."' ) 
and (pr1.analysis_id='".$analysis_id."' )))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T11:24:44.217

使用`wherer`而不是出现明显的语法错误`where`。

```
wherer pr.process_id=th2.process_id and 
```

应该

```
where pr.process_id=th2.process_id and 
```

当 MySQL 报告类似于*Check the manual for the correct syntax to use near...*的错误时，请准确查看该位置或紧邻其之前的字符是否存在语法错误。

> 检查与您的 MySQL 服务器版本相对应的手册，以在 'wherer pr.process_id=tem.p2 附近使用正确的语法

# asp.net - 读取 e pub 文件

> ID：10664741
> 
> 赞同：2
> 
> 时间：2012-05-19T11:21:59.273
> 
> 标签：asp.net, c#-4.0, epub

我有 e pub 格式的文件。我必须向用户展示他们的内容。我如何在 asp.net 中阅读它们？可以通过javascript完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T15:41:14.887

权威性？还有什么比 StackOverflow 答案更好的呢？我从这个问题开始（[https://stackoverflow.com/questions/4870594/is-there-ac-sharp-epub-library](https://stackoverflow.com/questions/4870594/is-there-a-c-sharp-epub-library)）并收集了一些有用的链接：

*   有关使用 javascript 在 Web 浏览器中显示文本以便很好地分页的有用信息：[HTML book-like pagination](https://stackoverflow.com/questions/3636052/html-book-like-pagination/3636957#3636957)
*   用于读取 ePub 文件的 AC# 开源库，主页上的示例代码包括如何将内容获取为 HTML：[http ://epubreader.codeplex.com/](http://epubreader.codeplex.com/)

*   如果 codeplex 上的 ePub 阅读器库没有成功，还有其他库可能会派上用场：http: [//sourceforge.net/projects/epubsharp/](http://sourceforge.net/projects/epubsharp/)和[http://www.aspose.com/categories/.net -components/aspose.words-for-.net/default.aspx](http://www.aspose.com/categories/.net-components/aspose.words-for-.net/default.aspx)

当然，您不能仅使用 JavaScript 来执行此操作，您将在您的 asp.net 网页上有一个服务器端，例如 Web 服务或代码，它打开 epub 文件，将内容提取为 HTML 并将其返回给客户端，但我认为这里有足够的东西让你开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T11:52:33.637

只是添加然后我建议的步骤：

第 1 步：使用具有一些第三方库的 C#、.net 代码解压缩文件。

参考：[推荐一个库/API 在 C# 中解压缩文件](https://stackoverflow.com/questions/1023476/recommend-a-library-api-to-unzip-file-in-c-sharp)

步骤2：检查提取的文件夹中是否只有一个或多个文件。

参考：[我如何找出一个目录中有多少个文件？](https://stackoverflow.com/questions/349251/how-do-i-find-out-how-many-files-are-in-a-directory)

第 3 步：在 c#.net 中使用流阅读器读取文件

参考： http: [//msdn.microsoft.com/en-us/library/aa328963 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa328963(v=vs.71).aspx)

[http://www.dotnetperls.com/streamreader](http://www.dotnetperls.com/streamreader)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T18:13:37.707

Epub 文件实际上是一个 zip 存档，其中包含

*   用于元数据、目录等的 xml 文件
*   用于内容的 xhtml 或 dtbook (xml) + gif、jpeg、png、svg + css

为了能够显示 epub，您必须能够处理上述所有内容。在这里[阅读 ePub 格式](https://stackoverflow.com/questions/1388467/reading-epub-format/2034410#2034410)，您将找到逐步打开 epub 所需的操作 - 这是 iphone 的示例，但应该足够了。

# lua - 如何通过用作字典的 Lua 表中的数据“分页”？

> ID：10664742
> 
> 赞同：0
> 
> 时间：2012-05-19T11:22:08.317
> 
> 标签：lua, coronasdk

我将如何编写一个函数来遍历一个“页面”的数据？示例代码将是理想的...

所以假设我们图像页面的大小是 5 个项目。如果我们有一个包含 18 个项目的 lua 表，它需要打印出来：

*   第 1 页：1 至 5
*   第 2 页：6 到 10
*   第 3 页：11 至 15
*   第 4 页：16 至 18

所以假设数据是这样的：

```
local data = {}
data["dog"] = {1,2,3}
data["cat"] = {1,2,3}
data["mouse"] = {1,2,3}
data["pig"] = {1,2,3}
.
.
. 
```

一个人将如何编写与此等效的函数：

```
function printPage (myTable, pageSize, pageNum)
  -- find items in "myTable" 
end 
```

所以实际上我什至不确定用作字典的 Lua 表是否可以做到这一点？这样的表中没有特定的顺序，那么当您返回打印第 2 页时，您如何确定顺序是相同的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:49:46.353

该[`next`](http://www.lua.org/manual/5.1/manual.html#pdf-next)功能允许您按顺序浏览表格（尽管是不可预测的）。例如：

```
data = { dog = "Ralf", cat = "Tiddles", fish = "Joey", tortoise = "Fred" }

function printPage(t, size, start)
    local i = 0
    local nextKey, nextVal = start
    while i < size and nextKey ~= nil do
        nextKey, nextVal = next(t, nextKey)
        print(nextKey .. " = " .. nextVal)
        i = i + 1
    end
    return nextKey
end

local nextPage = printPage(data, 2)  -- Print the first page
printPage(data, 2, nextPage)         -- Print the second page 
```

我知道这不是你所追求的形式，但我相信它可以很容易地适应。

该[`next`](http://www.lua.org/manual/5.1/manual.html#pdf-next)函数返回表中提供的键之后的键及其值。当到达表的末尾时，它返回`nil`。如果您提供`nil`作为第二个参数，它会返回表中的第一个键和值。它也记录[在 Corona 中](http://developer.anscamobile.com/reference/index/next)，尽管它看起来是相同的。

# javascript - jquery如何访问仅选中的复选框？

> ID：10664747
> 
> 赞同：-1
> 
> 时间：2012-05-19T11:22:34.523
> 
> 标签：javascript, jquery

我有一个包含的 div ，我编写了`7 checkboxes`以下代码以访问`only the checked checkbox``array icons`

```
var icons = $("div").find("input[type=checkbox]").each(function () { 
if($(this).attr("checked") == "checked") return this; });

alert(icons.length); 
```

但它总是提醒 7 。有人能告诉我问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T11:25:14.933

```
var icons = $("div").find("input[type=checkbox]:checked"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:25:36.627

```
var icons= $("div").find("input:checked").length;
alert(icons); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T11:27:44.553

最简单的方法是将一个类分配给目标输入并使用[选中的选择器](http://api.jquery.com/checked-selector/)，请参见下面的示例：

```
var icons = $('.box:checked'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T11:35:41.327

你可以使用`$.map`，

```
$(document).ready(function() {
    var checks = $.map($("div").find('input[type="checkbox"]:checked'),function(arr){
        return arr;
    })
    console.log(checks.length);
}) 
```

或者你的方法，

```
$(document).ready(function() {
    var checks = $.each($("div").find('input[type="checkbox"]:checked'),function(){
        return this;
    })
    console.log(checks.length);
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T11:36:39.557

Hiya**演示** [http://jsfiddle.net/KzMqB/](http://jsfiddle.net/KzMqB/)

您可能只需要检查一次使用`:checked`它就会为您提供所需的内容。

好读：[http ://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)

希望这可以帮助！

**代码**

```
var icons = $("div").find("input[type=checkbox]:checked").each(function() {
           alert("ID of checked checkbox = " + $(this).attr("id"));
}); 
```

# java - 防止 Java XML Web 服务中的枚举

> ID：10664753
> 
> 赞同：3
> 
> 时间：2012-05-19T11:23:33.383
> 
> 标签：java, web-services, enums, jax-ws, jbossws

我喜欢`Enum`类型安全，它也使代码更具可读性。我总是`Enum`一有机会就利用。

当我需要将这些代码公开为 Web 服务时，问题就开始了。例如，如果我有这样的枚举：

```
public enum Language {
    ENGLISH(1),
    BAHASA_MALAYSIA(2);
} 
```

它将在 wsdl 中公开，如下所示：

```
<xs:simpleType name="language">
<xs:restriction base="xs:string">
  <xs:enumeration value="ENGLISH"/>
  <xs:enumeration value="BAHASA_MALAYSIA"/>
  </xs:restriction>
</xs:simpleType> 
```

如果将来我决定添加一种新语言我会遇到麻烦，wsdl 文件会有所不同，并且会破坏旧客户端。

我的问题是，如何防止枚举在 wsdl 中暴露为枚举？我希望它被暴露为简单的数据类型`String`或者`int`.

如果有问题，我正在使用[JBoss WS 。](http://www.jboss.org/jbossws/ "JBoss WS")

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T12:37:04.270

> 如果将来如果我决定添加一种新语言我会遇到麻烦，那么 wsdl 文件将会 > 不同并且它会破坏旧客户端。

不，它不会破坏旧的（结构良好的）客户。向枚举添加值可以被认为是向后兼容的更改。请参阅[Extensibility、XML Vocabularies 和 XML Schema](http://www.xml.com/pub/a/2004/10/27/extend.html)等文章。

根据您的说法，我首先猜测您的工作代码，然后让 JBoss-WS 生成 WSDL 和 XSD。没有什么不妥。但是，如果向后和向前兼容性对您来说非常重要，您应该首先使用合同（即手动设计 WSDL 和 XSD）。因为您永远不知道 WSDL 和 XSD 的新版本 JBossWS 会是什么样子。

如果您真的希望 JBoss-WS 生成不同的东西，那么您需要查看 JAX-B 的枚举。JAX-B 是实际的 XSD 生成所做的。

# asp.net-mvc - 处理 MVC JSON 控制器操作中的异常

> ID：10664756
> 
> 赞同：2
> 
> 时间：2012-05-19T11:23:40.063
> 
> 标签：asp.net-mvc

我正在寻找在返回 JSON 结果时处理控制器中的错误的最佳方法。

首先，如果我在控制器中遇到未处理的异常并且我返回 JSON，那么最佳实践是什么？我在想 400 或 500 错误？客户端检查状态并执行任何操作。

我正在使用 FilterAttribute 和 IExceptionFilter 但我无法调用 OnException 函数。我已将该属性应用于控制器操作。

任何想法为什么可能不会调用？

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = false, AllowMultiple = false)]
public sealed class AjaxHandleErrorAttribute : FilterAttribute, IExceptionFilter
{
    // This is never called !!!
    public void OnException(ExceptionContext filterContext)
    {
        if (filterContext == null)
        {
            throw new ArgumentNullException("filterContext");
        }

        if (filterContext.Exception != null 
            && !filterContext.ExceptionHandled)
        {
            ...
            filterContext.HttpContext.Response.StatusCode = 400;
            filterContext.HttpContext.Response.StatusDescription = "Error processing                 request";
            ...
        }
    }
}

public class MyController : Controller
{
    public MyController(IMyRepository repo)
    {
        ...
    }

    [AjaxHandleError]
    public ActionResult GetSomeJson(int anId)
    {
        throw new System.Exception();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T00:06:30.023

您应该使用该属性或在您需要添加的 global.asax.cs 中装饰您的控制器

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters) {
    filters.Add(new AjaxHandleErrorAttribute());
} 
```

并且您的 OnException 方法将被调用。

# java - 如何为短信捕捉器注册 BroadcastReceiver？

> ID：10664757
> 
> 赞同：0
> 
> 时间：2012-05-19T11:23:50.453
> 
> 标签：java, android

我一直在开发必须捕获所有输入短信的应用程序。为此，我使用扩展 BroadcastReceiver 类的 SmsReceiver 类并且它可以工作，但我需要应用程序在自动重启后可以工作。为此，我使用了第二个 BroadcastReceiver RebootingReceiver，它也扩展了 BroadcastReceiver，但我不知道如何再次注册 SmsReceiver。请，我尝试使用此代码，但它不起作用：

```
public class RebootingReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        IntentFilter filter=new IntentFilter();
        filter.addAction("android.provider.Telephony.SMS_RECEIVED");
        context.registerReceiver(new SmsReceiver(), filter);
    }
} 
```

我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:27:58.983

将此添加到您的清单文件中

```
<receiver android:name=".RebootingReceiver">
    <intent-filter >              
          <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

# c# - C# 类库参考

> ID：10664760
> 
> 赞同：0
> 
> 时间：2012-05-19T11:23:53.567
> 
> 标签：c#, class, reference

我创建了一个带有目标框架 4.0 的类库，其中的一些类处理 SQLite 的数据库连接。

现在我想在另一个项目中使用那个类库，让它连接到数据库、查询数据、更新行等等。

但是当我在testproject中“添加引用”时，它似乎是“空的”，即在对象目录中，我无法扩展引用的库。

并且在输入 using 语句时，它说它是未知的命名空间。

怎么了？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:51:17.427

确实是愚蠢的问题，但是这些课程在您的外部程序集中肯定是公开的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:53:36.153

在“解决方案资源管理器”中，右键单击“参考”，然后选择“添加参考”。

[http://msdn.microsoft.com/en-us/library/wkze6zky(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/wkze6zky(v=vs.90).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T06:13:49.263

解决方案是将 den 外部程序集中的类公开。

在将课程从 testproject 移动到 classlibrary 之后，忘记了这一点。感谢您的帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T12:00:27.133

您的程序集可能正在使用需要完整 .net 配置文件而不是客户端 .net 配置文件的代码。尝试将新项目的配置文件从 Client 更改为 Full，看看是否有帮助。

# java - 如何减少java中的冗余编码？

> ID：10664762
> 
> 赞同：-5
> 
> 时间：2012-05-19T11:23:59.747
> 
> 标签：java, python, optimization

```
public static byte[] sendRequest(String url ,Object params ,boolean isHttps){
        if(isHttps){
            HttpsURLConnection urlConnection = (HttpsURLConnection)newURL(url).openConnection();
            urlConnection.setDoOutput(true);
            urlConnection.setDoInput(true);
            urlConnection.setRequestMethod("POST");
            urlConnection.setConnectTimeout(5000);
            urlConnection.setReadTimeout(60000);
            urlConnection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8");
       }

        }else{
            HttpURLConnection urlConnection = (HttpURLConnection)new URL(url).openConnection();
            urlConnection.setDoOutput(true);
            urlConnection.setDoInput(true);
            urlConnection.setRequestMethod("POST");
            urlConnection.setConnectTimeout(5000);
            urlConnection.setReadTimeout(60000);
            urlConnection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8");

        }

} 
```

在这种情况下， if 和 else 都包含除了类型转换之外的相同代码行。如果我再次将这行代码移动到一个通用方法中，我想键入 cast 并再次执行此过程。我怎样才能减少这些多余的行，任何人都可以帮助我。

我在 python 中有一个解决方案。

```
 //pseudo code .
     if(isHttps) :
           urlConnection = https . 
     else : 
         urlConnection = http .
     urlConnection.setDoOutput(true);
     urlConnection.setDoInput(true);
     urlConnection.setRequestMethod("POST");
     urlConnection.setConnectTimeout(5000);
     urlConnection.setReadTimeout(60000); 
```

因为在 if 内部的 python 变量中，也可以从外部 block 访问。在java中我该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T11:29:04.100

简单的

```
public static byte[] sendRequest(String url ,Object params ,boolean isHttps){
     HttpsURLConnection urlConnection;
     if(isHttps){
         urlConnection = (HttpsURLConnection)newURL(url).openConnection();
      }else{
         urlConnection = (HttpURLConnection)new URL(url).openConnection();
      }
         urlConnection.setDoOutput(true);
         urlConnection.setDoInput(true);
         urlConnection.setRequestMethod("POST");
         urlConnection.setConnectTimeout(5000);
         urlConnection.setReadTimeout(60000);
         urlConnection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T11:27:31.657

为什么不：

```
HttpsURLConnection urlConnection = isHttps
                                 ? (HttpsURLConnection)newURL(url).openConnection()
                                 : (HttpsURLConnection)new URL(url).openConnection();

urlConnection.setDoOutput(true);
// etc. 
```

与“在变量之前声明”方法相比，它的优点`if`是即使变量是`final`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T11:32:50.273

我假设`isHttps`变量检查是有原因的（？），因此第二个演员实际上应该是`HttpURLConnection`，这意味着问题中有错字吗？如果是这样，问题中使用的大多数方法都可以在`URLConnection`没有强制转换的父类中使用，但不是全部。

幸运的是 HttpsURLConnection 是 HttpUrlConnection 的一个子类，所以只要总是转换为它就可以在这里工作，全部替换为（不需要 isHttps 检查）：

```
HttpURLConnection urlConnection = (HttpURLConnection)new URL(url).openConnection();
urlConnection.setDoOutput(true);
urlConnection.setDoInput(true);
urlConnection.setRequestMethod("POST");
urlConnection.setConnectTimeout(5000);
urlConnection.setReadTimeout(60000);
urlConnection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T11:28:08.580

将变量声明放在 if 块之前

```
HttpsURLConnection urlConnection;
if (isHttps) {
    urlConnection= (HttpsURLConnection) new URL(url).openConnection();
} else {
    urlConnection = (HttpsURLConnection) new URL(url).openConnection();
}
urlConnection.setDoOutput(true);
urlConnection.setDoInput(true);
urlConnection.setRequestMethod("POST");
urlConnection.setConnectTimeout(5000);
urlConnection.setReadTimeout(60000);
urlConnection.setRequestProperty("Content-Type",
        "application/x-www-form-urlencoded;charset=UTF-8"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T11:27:29.733

在 if 语句之前声明变量，并为其分配“null”（以避免警告变量可能未初始化）。然后按照您的伪代码示例中的样式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-19T11:34:39.493

这两个块有什么区别？只需使用：

```
HttpURLConnection urlConnection = (HttpURLConnection) new URL(url).openConnection();
urlConnection.setDoOutput(true);
urlConnection.setDoInput(true);
urlConnection.setRequestMethod("POST");
urlConnection.setConnectTimeout(5000);
urlConnection.setReadTimeout(60000);
urlConnection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8"); 
```

你类型转换没有什么特别的。是`HttpsURLConnection`一个子类`HttpURLConnection`

# android - 当我尝试在 android 2.3 中检索反向地理编码时退出

> ID：10664764
> 
> 赞同：0
> 
> 时间：2012-05-19T11:24:21.637
> 
> 标签：android, android-intent, android-emulator

我试图通过从 Telnet 传递值来获得经纬度位置。完成之后，现在我尝试实施反向地理编码以获取模拟器中的 apporx 地址。 [关注了这个链接](http://www.javacodegeeks.com/2010/09/android-reverse-geocoding-yahoo-api.html)

但它显示应用程序流意外停止。

日志猫错误..

```
05-19 16:51:14.292: E/AndroidRuntime(460): java.lang.NullPointerException
05-19 16:51:14.292: E/AndroidRuntime(460):  at com.gps.HelloAndroidGpsActivity$ReverseGeocodeLookupTask.onPostExecute(HelloAndroidGpsActivity.java:137)
05-19 16:51:14.292: E/AndroidRuntime(460):  at com.gps.HelloAndroidGpsActivity$ReverseGeocodeLookupTask.onPostExecute(HelloAndroidGpsActivity.java:1)
05-19 16:51:14.292: E/AndroidRuntime(460):  at android.os.AsyncTask.finish(AsyncTask.java:417)
05-19 16:51:14.292: E/AndroidRuntime(460):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
05-19 16:51:14.292: E/AndroidRuntime(460):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
05-19 16:51:14.292: E/AndroidRuntime(460):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-19 16:51:14.292: E/AndroidRuntime(460):  at android.os.Looper.loop(Looper.java:130)
05-19 16:51:14.292: E/AndroidRuntime(460):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-19 16:51:14.292: E/AndroidRuntime(460):  at java.lang.reflect.Method.invokeNative(Native Method)
05-19 16:51:14.292: E/AndroidRuntime(460):  at java.lang.reflect.Method.invoke(Method.java:507)
05-19 16:51:14.292: E/AndroidRuntime(460):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-19 16:51:14.292: E/AndroidRuntime(460):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-19 16:51:14.292: E/AndroidRuntime(460):  at dalvik.system.NativeStart.main(Native Method) 
```

...

HelloAndroidGpsActivity.java

```
package com.gps;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;

import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;
import com.gps.GeoCodeResult;
import com.gps.GeoCoder;

public class HelloAndroidGpsActivity extends Activity {

    private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
    private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Milliseconds

    private GeoCoder geoCoder = new GeoCoder();

    protected LocationManager locationManager;
    protected Location currentLocation;

    protected Button retrieveLocationButton;
    protected Button reverseGeocodingButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);
        reverseGeocodingButton = (Button) findViewById(R.id.reverse_geocoding_button);

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 
                MINIMUM_TIME_BETWEEN_UPDATES, 
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
                new MyLocationListener()
        );

        retrieveLocationButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                showCurrentLocation();
            }
        });

        reverseGeocodingButton.setOnClickListener(new OnClickListener() {            
            public void onClick(View v) {                
                performReverseGeocodingInBackground();
            }
        });

    }    

    protected void performReverseGeocodingInBackground() {
        showCurrentLocation();
        new ReverseGeocodeLookupTask().execute((Void[])null);
    }

    protected void showCurrentLocation() {

        currentLocation = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

        if (currentLocation != null) {
            String message = String.format(
                    "Current Location \n Longitude: %1$s \n Latitude: %2$s",
                    currentLocation.getLongitude(), currentLocation.getLatitude()
            );
            Toast.makeText(HelloAndroidGpsActivity.this, message,
                    Toast.LENGTH_LONG).show();
        }

    }   

    private class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            String message = String.format(
                    "New Location \n Longitude: %1$s \n Latitude: %2$s",
                    location.getLongitude(), location.getLatitude()
            );
            Toast.makeText(HelloAndroidGpsActivity.this, message, Toast.LENGTH_LONG).show();
        }

        public void onStatusChanged(String s, int i, Bundle b) {
            Toast.makeText(HelloAndroidGpsActivity.this, "Provider status changed",
                    Toast.LENGTH_LONG).show();
        }

        public void onProviderDisabled(String s) {
            Toast.makeText(HelloAndroidGpsActivity.this,
                    "Provider disabled by the user. GPS turned off",
                    Toast.LENGTH_LONG).show();
        }

        public void onProviderEnabled(String s) {
            Toast.makeText(HelloAndroidGpsActivity.this,
                    "Provider enabled by the user. GPS turned on",
                    Toast.LENGTH_LONG).show();
        }

    }

    public class ReverseGeocodeLookupTask extends AsyncTask <Void, Void, GeoCodeResult> {

        private ProgressDialog progressDialog;

        @Override
        protected void onPreExecute() {
            this.progressDialog = ProgressDialog.show(
                    HelloAndroidGpsActivity.this,
                    "Please wait...contacting Yahoo!", // title
                    "Requesting reverse geocode lookup", // message
                    true // indeterminate
            );
        }

        @Override
        protected GeoCodeResult doInBackground(Void... params) {
            return geoCoder.reverseGeoCode(currentLocation.getLatitude(), currentLocation.getLongitude());
        }

        @Override
        protected void onPostExecute(GeoCodeResult result) {

            Toast.makeText(HelloAndroidGpsActivity.this, result.toString(), Toast.LENGTH_LONG).show();            
        }

    }

} 
```

地理编码器.java

```
*package com.gps;
import com.gps.GeoCodeResult;
import com.gps.HttpRetriever;
import com.gps.XmlParser;
public class GeoCoder {

    private static final String YAHOO_API_BASE_URL = "http://where.yahooapis.com/geocode?q=%1$s,+%2$s&gflags=R&appid=[yourappidhere]"; **//This is correct API**
       private HttpRetriever httpRetriever = new HttpRetriever();
        private XmlParser xmlParser = new XmlParser();

        public GeoCodeResult reverseGeoCode(double latitude, double longitude) {

            String url = String.format(YAHOO_API_BASE_URL, String.valueOf(latitude), String.valueOf(longitude));        
            String response = httpRetriever.retrieve(url);
            return xmlParser.parseXmlResponse(response);

        }
    }* 
```

地理编码结果

```
package com.gps;
public class GeoCodeResult {

    public String line1;
    public String line2;
    public String line3;
    public String line4;

    @Override
    public String toString() {

        StringBuilder builder = new StringBuilder();
        builder.append("Location:");

        if (line1!=null)
            builder.append("-"+line1);
        if (line2!=null)
            builder.append("-"+line2);
        if (line3!=null)
            builder.append("-"+line3);
        if (line4!=null)
            builder.append("-"+line4);

        return builder.toString();

    }

} 
```

问题是地理编码结果为空

我错过了什么吗？点我是我做错了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:46:43.727

检查你的android表现文件（manifest.xml），看看你是否调用了互联网使用权限，它看起来像这样：

`<uses-permission android:name="android.permission.INTERNET" />`

并尝试`<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />`使用 GPS 外壳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:52:27.870

**有时它会发生。它给我们null。同样的问题是在我的情况下。在其他设备上或一段时间后尝试。尝试每分钟只访问一次服务器地址。一分钟内请求地址超过一个，可能导致'null'**

# c - MPI 类型匹配

> ID：10664765
> 
> 赞同：4
> 
> 时间：2012-05-19T11:24:35.553
> 
> 标签：c, mpi

我想知道为什么这个程序实际上可以在 MPI (openMPI 1.5/1.6.)

```
#include <stdio.h>
#include <mpi.h>

#define VECTOR_SIZE 100

int main(int argc,char ** argv) {
  int A[VECTOR_SIZE];
  int sub_size=2;
  int count=10;
  MPI_Datatype partial_array;
  int rank,size;
  MPI_Status status;

  MPI_Init(&argc,&argv);
  MPI_Comm_rank(MPI_COMM_WORLD,&rank);
  MPI_Comm_size(MPI_COMM_WORLD,&size);

  MPI_Type_vector(count, sub_size,
          2*sub_size, MPI_INT, &partial_array);

  MPI_Type_commit(&partial_array);

  if (rank == 0) {
    int i;
    // server - initialize data and send
    for (i = 0; i< VECTOR_SIZE; i++) {   
      A[i] = i;
    }
    MPI_Send(&(A[0]), 1, partial_array, 1, 0, MPI_COMM_WORLD);
  } else if (rank==1) {
    int i;
    for (i = 0; i< VECTOR_SIZE; i++) {

        A[i] = 0;

    }
    // vector is composed by 20 MPI_INT elements
    MPI_Recv(&(A[0]),20, MPI_INT, 0, 0, MPI_COMM_WORLD, &status);

    printf("\n");

    for (i = 0; i<VECTOR_SIZE; i++) {
      printf("%d ",A[i]);

    }
    printf("\n");
  }

  MPI_Finalize();

} 
```

而另一个交换发送和接收原语的程序不会终止（接收永远不会完成）：

```
#include <stdio.h>
#include <mpi.h>

#define VECTOR_SIZE 100

int main(int argc,char ** argv) {
    int A[VECTOR_SIZE];
    int sub_size=2;
    int count=10;
    MPI_Datatype partial_array;
    int rank,size;
    MPI_Status status;

    MPI_Init(&argc,&argv);
    MPI_Comm_rank(MPI_COMM_WORLD,&rank);
    MPI_Comm_size(MPI_COMM_WORLD,&size);

    MPI_Type_vector(count, sub_size,
                    2*sub_size, MPI_INT, &partial_array);

    MPI_Type_commit(&partial_array);

    if (rank == 0) {
        int i;
        // server - initialize data and send
        for (i = 0; i< VECTOR_SIZE; i++) {

            A[i] = i;

        }
        MPI_Send(&(A[0]),20, MPI_INT, 0, 0, MPI_COMM_WORLD);

    } else if (rank==1) {
        int i;
        // client - receive data and print
        for (i = 0; i< VECTOR_SIZE; i++) {

            A[i] = 0;

        }

        MPI_Recv(&(A[0]), 1, partial_array, 1, 0, MPI_COMM_WORLD, &status);

        printf("\n");

        for (i = 0; i<VECTOR_SIZE; i++) {
            printf("%d ",A[i]);

        }
        printf("\n");
    }

    MPI_Finalize();

} 
```

如果我正确理解 MPI 类型数学规则，则两者都不应该完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T11:37:21.387

显然，在第二个程序中，rank 0 正在发送给自己，而 rank 1 也在期待来自自己的消息：

```
MPI_Send(&(A[0]),20, MPI_INT, 0, 0, MPI_COMM_WORLD); 
```

目的地排名应该是 1，而不是 0

```
MPI_Recv(&(A[0]), 1, partial_array, 1, 0, MPI_COMM_WORLD, &status); 
```

源等级应该是 0，而不是 1。

否则你不能正确理解 MPI 类型匹配。它只说明两端*类型映射中的底层原始类型应该匹配。*您正在创建一个向量，其类型映射具有 20 个原始整数。如果您发送一个这种类型的元素，您的消息实际上将包含 20 个整数。在接收方，您为至少 20 个整数提供空间，所以这是正确的。反之亦然。

如果在第二个程序中只发送 10 或 18 个整数是不正确的，因为它们不会构成向量类型的*完整*元素。尽管如此，接收操作将完成，但如果您调用`MPI_Get_count()`状态，if 将返回`MPI_UNDEFINED`，因为从接收的原始整数元素的数量中无法构造整数数量的向量元素。混合原始类型也是不正确的，例如发送`MPI_DOUBLE`（或向量，或结构，或任何其他具有双精度的类型）并将其接收为`MPI_INT`.

Please also note that MPI messages do not carry their type map or type ID with them so most MPI implementations do not check if types match. It is *possible* to send `MPI_FLOAT` and receive it as `MPI_INT` (because both are 4 bytes on most systems) but it is not *correct* to do so.

# c# - AjaxControlToolKit：HTML 编辑器（未知服务器标记）

> ID：10664768
> 
> 赞同：0
> 
> 时间：2012-05-19T11:24:46.797
> 
> 标签：c#, asp.net, ajax, ajaxcontroltoolkit, html-editor

我要添加 HTML 编辑器，代码如下

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="WebApplication1._Default" %>
    <%@ Register TagPrefix="asp" Namespace="AjaxControlToolkit" Assembly="AjaxControlToolkit"%>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
  <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="Server" />

        <asp:TextBox
        ID="txtComments"
        TextMode="MultiLine"
        Columns="60"
        Rows="8"
        runat="server" />

<asp:HtmlEditorExtender
        TargetControlID="txtComments"
        runat="server" />
</asp:Content> 
```

但它给出了错误

**说明**：解析服务此请求所需的资源时出错。请查看以下特定的解析错误详细信息并适当地修改您的源文件。

**解析器错误消息**：未知的服务器标记“asp:HtmlEditorExtender”。

帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:26:54.970

更改标签前缀

```
 <%@ Register TagPrefix="ajaxToolkit" Namespace="AjaxControlToolkit" Assembly="AjaxControlToolkit"%> 
```

和

```
<ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="Server" /> 
```

然后

```
<ajaxToolkit:HtmlEditorExtender
        TargetControlID="txtComments"
        runat="server" /> 
```

它应该工作。

如果您的母版页上有 ScriptManager，则无需在内容页面上添加它。而且，当您使用 ToolkitScriptManager 时，您不需要默认的 ScriptManager。

## 更新：

如下所示检查 AjaxControlToolkit tagPrefix 的 Web 配置。

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <pages>
      <controls>
        <add tagPrefix="ajaxToolkit" assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" />
      </controls>
    </pages>
  </system.web>
</configuration> 
```

如果在您拖放控件时它在那里，则将插入正确的标签前缀。

尝试使用包管理器控制台添加带有[nuget的 ajax 工具包。](http://nuget.org/)可以`Install-Package AjaxControlToolkit`在控制台输入命令安装Ajax ControlToolkit

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:34:38.700

尝试在母版页中使用脚本管理器....

# c# - 用 SQL 语句的结果填充任何 ArrayList

> ID：10664770
> 
> 赞同：3
> 
> 时间：2012-05-19T11:25:02.170
> 
> 标签：c#, .net, sql, arraylist, sqldatareader

我有以下代码，它采用 SQL 语句（字符串），将结果加载到一个 ArrayList（organisationList）中，它是一个组织的集合：

```
public void FillDataGridView(DataGridView grid, string SQLCommand)
{
    SqlCommand dataCommand = new SqlCommand();
    dataCommand.Connection = dataConnection;
    dataCommand.CommandType = CommandType.Text;
    dataCommand.CommandText = SQLCommand;

    SqlDataReader dataReader = dataCommand.ExecuteReader();

    while (dataReader.Read())
    {
        Organisation org = new Organisation();

        org.OrganisationId = (int)dataReader["OrganisationId"];
        org.OrganisationName = (string)dataReader["OrganisationName"];

        organisationList.Add(org);
    }

    grid.DataSource = organisationList;
    dataReader.Close();
} 
```

我想调整此方法以填充传递给它的 ArrayList。

我是否可以将列表传递给方法并具有以下内容：

```
public void FillArrayList(DataGridView grid, SqlDataReader reader, ArrayList list)
{
    //Fill the list with the contents of the reader
    while (reader.Read())
    {
        Object  obj = new Object

        for(int i; i = 0; i < obj.NoOfProperties)
        {
            obj.Property[i] = reader[i];
        }

        list.Add(obj);
    }
} 
```

抱歉，如果这有点模糊，我对 OOP 还是很陌生，有点迷茫！

编辑：根据 Darren Davies 的建议，我将方法修改如下：

```
public void FillArrayList<T>(DataGridView grid, SqlDataReader reader, List<T> list)
{
    //Fill the list with the contents of the reader
    while (reader.Read())
    {
        Object obj = new Object();
        Type type = typeof(T);

        FieldInfo[] fields = type.GetFields(); // Get the fields of the assembly
        int i = 0;

        foreach(var field in fields)
        {
            field.SetValue(obj, reader[i]); // set the fields of T to the reader's value
            // field.setValue(obj, reader[field.Name]); // You can also set the field value to the explicit reader name, i.e. reader["YourProperty"]
            i++;
        }

        list.Add((T)obj);
    }

    grid.DataSource = list;
} 
```

当我运行代码时，将对象转换为类型 T 时出现错误：

> 无法将“System.Object”类型的对象转换为“TestHarness.Organisation”类型。

我的印象是 Object 可以存储任何东西。谁能告诉我为什么这个演员不能表演？

谢谢，

安迪

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T11:40:09.063

除非您使用的是 .NET 1.1，否则您可能不应该使用`ArrayList`; 通用`List<T>`的更可取。

您不能添加成员`object`- 它不可扩展。您需要知道要创建的对象的类型。泛型将是一个合理的对象。但是，为了节省您一些时间，您最好看看[dapper](http://nuget.org/packages/Dapper)：

```
var list = dataConnection.Query<YourType>(SQLCommand).ToList(); 
```

这将做所有事情，使用直接的列名到成员名的映射。您需要创建一个`YourType`具有您期望的属性（适当键入）的类。

如果您使用的是 4.0，dapper 还支持`dynamic`：

```
var list = dataConnection.Query(SQLCommand).ToList(); 
```

这使用`dynamic`，所以你仍然可以这样做（不声明类型）：

```
foreach(var obj in list) {
    Console.WriteLine(obj.OrganisationId);
    Console.WriteLine(obj.OrganisationName);
} 
```

就我个人而言，我只会`dynamic`在数据非常接近访问位置的情况下使用该方法。对于从方法返回，通用方法是首选。同样，`dynamic`不适用于`DataGridView`.

最后，我注意到没有参数；你总是想使用参数而不是连接。Dapper 也支持这一点：

```
string foo = ...;
var list = dataConnection.Query<YourType>(
    "select * from SomeTable where Foo = @foo", new { foo }).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T11:47:40.530

如果您使用的是 C# 2.0。或更多用途`Generics`而不是`ArrayList`.

您可以使用`Reflection`获取您传入的类型的属性：

```
public void FillArrayList<T>(DataGridView grid, SqlDataReader reader, List<T> list)
{
    //Fill the list with the contents of the reader
    while (reader.Read())
    {
       Object  obj = new Object();
       Type type = typeof(T); // get the type of T (The paramter you passed in, i.e. Organisations)

       FieldInfo[] fields = type.GetFields(); // Get the fields of the assembly
       int i = 0;

        foreach(var field in fields) // Loop round the fields 
        {
            field.setValue(obj, reader[i]); // set the fields of T to the readers value
            // field.setValue(obj, reader[field.Name]); // You can also set the field value to the explicit reader name, i.e. reader["YourProperty"] 
            i++;
        }

        list.Add(obj);
    }
} 
```

要调用它：

```
 FillArrayList(grid, reader, list); 
```

其中 list 是 List 类型的 Organizations

```
 List<Organisations> list = new List<Organisations>(); 
```

[http://msdn.microsoft.com/en-us/library/ms379564(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms379564(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T11:29:48.033

如果您创建与返回数据集中的列同名的类的属性，那么您可以使用反射从数据读取器或数据表构造任何类型的对象（如果数据读取器或数据表的列和对象的属性是匹配）。

[您可以在此](http://lozanotek.com/blog/archive/2007/05/09/Converting_Custom_Collections_To_and_From_DataTable.aspx)链接中看到以下内容。它展示了如何将数据表转换为自定义类的集合。使用数据阅读器将是相同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T12:07:54.477

难道你不能也使用 DataContext 并提供你的连接字符串然后使用 Linq 吗？

[http://msdn.microsoft.com/en-us/library/bb399375.aspx](http://msdn.microsoft.com/en-us/library/bb399375.aspx)

# symfony - 教义查询构建器结果

> ID：10664773
> 
> 赞同：4
> 
> 时间：2012-05-19T11:25:23.750
> 
> 标签：symfony, doctrine, doctrine-orm, query-builder

我正在使用 Symfony2 和 Doctrine2 开发应用程序。我也使用 Doctrine 的 QueryBuilder。我有这个查询：

```
public function getInterpDesberdinak($MarkId)
    {
          $qb = $this->createQueryBuilder('c')
              ->select('DISTINCT c.Gordailua, c')
              ->where('c.MarkIdGordailua = :MarkId')
              ->setParameter('MarkId', $MarkId);
          $Emaitza = $qb->getQuery()->getResult();
          return $Emaitza;
    } 
```

我想知道在 $Emaitza 中得到的结果如何。会不会是这样的：

$Emaitza[0]['Gordailua'] = 选择的第一个 Gordailua 值。

然后 $Emaitza[0][?????] = 第一个 c 类型对象。

我有点困惑。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-10-22T19:32:06.357

不记得我是如何来到这篇文章的，但我什至读过它并想，好吧..无论如何..

我认为他要求获得第一个结果，如果是这样..查询应该首先知道结果的最大大小是多少

```
$qb->setMaxResults(1) 
```

然后你可以调用一个真正定义自己的方法

```
$single_result = $qb->getSingleResult() 
```

所以在给出的例子中，代码看起来像

```
$qb->getQuery()->setMaxResults(1)->getSingleResult(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-20T10:17:45.577

首先，您需要指定 From 子句：

```
$qb->from('YourBundle\Entity\ParentOfGordailua as pg'); 
```

您可以使用： getArrayResult() 将数据作为数组获取，如果您想从 Object ArrayCollection 中获取第一个对象（当您使用 getResult() 时，您必须：

```
$Gordailua = $Emaitza->first()->getGordailua(); 
```

查看参考资料和示例：http: [//docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language.html)

# crystal-reports - 创建水晶报表后更改表之间的关系

> ID：10664790
> 
> 赞同：-1
> 
> 时间：2012-05-19T11:27:41.990
> 
> 标签：crystal-reports

我创建了一个水晶报表并导入了 3 个表格，并使用**Standard Report Creation Wizard**设置了它们之间的关系。现在我想改变表之间的关系。但是我该如何改变呢？（例如如何再次启动**标准报告创建向导**？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:03:42.790

`Database | Database Expert...`到

*   添加和删​​除表
*   更改表名
*   修改链接
*   创建命令（“原始”SQL 语句）

`Database | Set Location...`到：

*   更改主报表和子报表的数据源（从一个数据库实例更改为另一个）
*   查看每个表连接的详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T16:01:58.473

您使用 Database Expert 来执行此操作。你这样做的地方很容易错过。数据库专家中有另一个选项卡可让您查看/修改链接。

它在这里：

![Crystal Reports 数据库专家截图](../Images/c01c20cca9b381378fbd2500b88cbe4b.png)

# c++ - boost::bind 和 io_service 的问题

> ID：10664796
> 
> 赞同：2
> 
> 时间：2012-05-19T11:28:37.467
> 
> 标签：c++, multithreading, boost, boost-asio

您好我目前正在尝试为 io_service 对象创建一个线程池。

我还找到了一个如何做到这一点的例子（见那里，例子1f：[http ://www.gamedev.net/blog/950/entry-2249317-a-guide-to-getting-started-with-boostasio?pg =2](http://www.gamedev.net/blog/950/entry-2249317-a-guide-to-getting-started-with-boostasio?pg=2) )

该示例也有效（当然）但是我宁愿尝试保持 io_service 非全局（在示例中）。所以现在我考虑尝试将 io_service 作为参数传递给工作线程，因此将其保持为“内部”。

boost::thread_group 似乎还不支持传递参数，所以我尝试使用 boost::bind

结果代码如下所示：

```
void workerThread(io_service service)
{
    service.run();
}

void initListeners() //this function gets called in the main function
{   
    io_service io_service;
    //we give the io_service something to work here
    boost::thread_group worker_threads;

    for(int i = 0; i < 4; ++i)
        worker_threads.create_thread(boost::bind(workerThread, io_service));

    worker_threads.join_all();
} 
```

但是，当我尝试编译此代码时，他给了我错误

> 错误 C2248：“boost::noncopyable_::noncopyable::noncopyable”：无法访问在类“boost::noncopyable_::noncopyable”中声明的私有成员
> 
> 此诊断发生在编译器生成的函数'boost::asio::io_service::io_service(const boost::asio::io_service &)'

这是否意味着我根本不能将 io_service 对象作为参数传递？

如果是，那么我如何在没有 io_service 作为全局对象的情况下执行此线程池？
如果没有，那么上面的代码如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T11:37:20.523

您需要通过引用而不是值传递 io_service ：

```
io_service &service 
```

作为论据和

```
boost::ref(io_service) 
```

作为绑定的参数。
请注意，您必须在`io_service`结束的生命周期之前加入所有线程，否则您将获得无效的引用。

# blackberry - 调用方法来重新启动一个打开的应用程序

> ID：10664797
> 
> 赞同：-1
> 
> 时间：2012-05-19T11:28:47.733
> 
> 标签：blackberry, java-me, blackberry-jde

是否可以重新启动从自身内部运行的同一应用程序。

比如说，我有一个在单击按钮时打开的表单。现在一旦打开这个表单，我想刷新它的显示，所以我再次从这个表单中调用 init 方法。

我期待重新打开/刷新已启用打开的选项卡式窗格。它究竟是如何实现的。

这真的可能吗？请指导

请通过此[链接](https://stackoverflow.com/questions/10657112/refresh-tab-panes-display-without-reopening-the-application)更好地了解我的问题。如果仍然无法理解，请随时交流。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:35:53.743

阅读这篇[文章](http://java.dzone.com/articles/programmatically-restart-java)。我不太确定您要做什么，但似乎您并不需要重新启动整个应用程序。你可以创建一个新的表单实例并交换它们吗？

如果您使用 Swing，请查看此[文档。](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html)

# javascript - 焦点事件 jquery 组合框/自动完成

> ID：10664801
> 
> 赞同：1
> 
> 时间：2012-05-19T11:29:23.147
> 
> 标签：javascript, autocomplete, combobox, jquery

尝试在自动完成 jquery 插件的焦点事件上绑定一些其他操作（在包装元素上显示工具提示）jquery 代码：

```
$(document).ready(function(){

$( "#municipality_cb" ).combobox({
                focus: function(event, ui) {
    //tipTip(); - tooltip script* 
                $("#municipality_wrap").tipTip({maxWidth: "auto", edgeOffset: 10}); 
                }

                });
}); 
```

html:

```
<div class="ui-widget">
//-combobox wrapper div for tooltip
<div id="municipality_wrap" title="Chose municipality: Karposh" style="float: left;">
<select id="municipality_cb" tabindex="2" data-placeholder="Choose ..." title="test">

        <option value=""></option>
            other options....  

    </select></div></div> 
```

工具提示根本不显示。我做错了什么？请帮忙 ：）

Jquery 自动完成插件（查看事件选项卡） [http://jqueryui.com/demos/autocomplete/#combobox](http://jqueryui.com/demos/autocomplete/#combobox)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T23:05:04.247

I was running into the same problem...

The trick here is that the combobox replaces your select with an input, so instead of tying the focus to the select, I got this to work by tying it to the wrap:

```
$("#municipality_wrap input").focus(function() { ... }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:46:20.877

```
$(document).ready(function(){
$("#municipality_cb" ).focus(function() {
 //tipTip(); - tooltip script* 
        $("#municipality_wrap").tipTip({maxWidth: "auto", edgeOffset: 10}); 
        });
       }); 
```

# windows - Vim 错误 E510：无法制作备份文件（添加 ! 以覆盖）

> ID：10664805
> 
> 赞同：18
> 
> 时间：2012-05-19T11:30:23.663
> 
> 标签：windows, vim, vi

我在 Windows 上使用 Vim 并决定为我`backup files`创建的所有 vim 创建一个单独的目录。

我正在使用我的 Vim`command prompt`而不是使用 vim GUI(gVim)。

我查看了这篇[文章](https://stackoverflow.com/a/1625850/1222595)并在我的`_vimrc`

```
set backup
set backupdir = D:\\VimTemp 
```

我已经`D:\VimTemp`在我的系统上创建了。

现在，每当我尝试使用将更改保存到我的文件时，`:w`我都会收到以下错误消息

```
"PenProperties.py" E510: Can't make backup file (add ! to override) 
```

我已经尝试通过以下方式设置备份目录：

*   设置备份目录 = D:\\VimTemp

*   设置 backupdir = "D:\\VimTemp"

*   设置 backupdir = "D:\\VimTemp\\"

*   设置备份目录 = "D:\VimTemp"

现在，我已经在 stackoverflow 上查看了类似的问题，但问题仍然存在。

所以，我的问题是如何使它正常工作。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-19T13:44:10.027

杀死周围的空格=

```
set backupdir=D:\\VimTemp 
```

如果您已经创建了目录，应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T07:10:15.700

在 Linux 上，您可以通过在编辑器中设置 - :verbose set backupdir?

# java - 使用 2 个用 javascript 呈现的列表

> ID：10664811
> 
> 赞同：1
> 
> 时间：2012-05-19T11:30:54.397
> 
> 标签：java, javascript

我正在我的 Web 应用程序中创建一个 tagCloud。我有一个呈现 2 个列表的方法：

```
public static void tagCloud(){
        List<Topic> topics = Topic.find("order by topicName asc").fetch();
        List<Tutorial> tutorials = Tutorial.find("order by id asc").fetch();
        List<Integer> topicCount = new ArrayList<Integer>();
        for(int i = 0; i < topics.size(); i++){
            int z = 0;
            for(int j = 0; j < tutorials.size(); j++){
                if (tutorials.get(j).getTopic().equals(topics.get(i))){
                    z++;
                    topicCount.add(z);

                }
            }
        }
        render (topics, topicCount);
    } 
```

我想在与此类似的行中将这 2 个列表用于 tagCloud：

```
<a href="/Topics/topicView?topicId=${topicList.id}" rel="8">${topicList.topicName.raw()}</a> 
```

我想使用 topicCount 列表中的索引作为“rel”（单词的大小）和主题作为要显示的元素本身，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:37:43.283

我不会有两个列表，而是将每个主题及其计数存储在一个对象中（我们称之为`TopicWithCount`），并使用单个`List<TopicWithCount>`.

# asp.net-mvc-3 - 制作通配符 nopcommerce

> ID：10664813
> 
> 赞同：1
> 
> 时间：2012-05-19T11:31:05.550
> 
> 标签：asp.net-mvc-3, iis-7, nopcommerce

首先，我想问的是我必须做一个支持通配符的网站，就像您收到 blog.domainname.com 和 forum.domainname.com 的请求一样。这是我必须做的服务器设置，或者我必须制作这样的应用程序来支持通配符。就像我想 nopcommerce 支持通配符一样？

提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:44:04.940

您可以将 IIS 中的多个网站绑定到同一个 IP/端口，并通过主机头区分它们。

当您在 IIS 中定义绑定时，请指定相同的 IP/端口并将 blog.domainname.com 添加为您的博客网站的主机头，并将 forum.domainname.com 添加到您的论坛。

# xml - HaXml：从 XML 文件中读取数据时遇到问题

> ID：10664818
> 
> 赞同：0
> 
> 时间：2012-05-19T11:31:53.660
> 
> 标签：xml, parsing, haskell

我正在努力理解如何使用 HaXml 来解析以下 XML 文件（例如）：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
  <author>Mark</author>
  <year>2012</year>
</root> 
```

具体来说，我该如何：

*   确定 XML 文档的格式*正确*（我假设我使用了函数 xmlParse，希望它可以为我做这件事）
*   确定 XML 文档是*有效的*
*   找到标签并将*字符串*“Mark”读入String类型的值
*   找到标签并将*数字*2012 读入 Int 类型的值

（相当稀疏的）HaXml 文档似乎不是很有帮助，任何博客/Stackoverflow 条目充其量只是粗略的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T03:42:33.270

好的，所以我解决了我自己的问题。

基本上`xmlParse`检查文档是否格式正确，并且 Unix 命令行工具`Validate`检查`.xml`文件是否符合相关`.dtd`文件。

使用运算符查找特定标签深入到文档中`/>`。

所以使用类似的东西`tag <tagname1> /> tag <tagname2> /> txt $ getContents xmlContents`

这`xmlContents`是 的结果，`xmlParse`定义`getContents`为

`getContents (Document _ _ e _) = CElem e noPos`

# java - 是否可以禁用所有物理电话按钮？

> ID：10664822
> 
> 赞同：3
> 
> 时间：2012-05-19T11:32:28.887
> 
> 标签：java, android

我正在开发一个安全应用程序，当手机丢失或被盗时，手机屏幕会自动锁定，如果盗窃者尝试通过随机输入密码登录手机，手机将记录到 3 次尝试失败。

在 3 次尝试失败后，当前布局将变为黑色布局，布局内没有任何内容，我将为此布局设置计时器，在此布局期间，除非计时器到期，否则任何键都无法唤醒此布局。我已经成功实现了计时器，但是当我按下手机上的后退按钮时，布局回到了登录布局。如何禁用所有电话按钮？可能吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T00:03:49.040

不要这样做。

您尝试实施的“黑客”可以通过在将设备重新启动到安全模式后删除您的应用程序来绕过。禁用硬按钮不会阻止这种情况发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T12:49:18.780

您可以使用以下代码禁用**后退按钮：**

```
@Override
    public void onBackPressed() { //disable back button in this activity
        return;
    } 
```

> [http://developer.android.com/reference/android/app/Activity.html#onBackPressed](http://developer.android.com/reference/android/app/Activity.html#onBackPressed) ()

还可以使用以下方法禁用**主页按钮**：

```
@Override
    public void onAttachedToWindow() { //disable home button in this activity
        this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
        super.onAttachedToWindow();
    } 
```

> [http://developer.android.com/reference/android/app/Activity.html#onAttachedToWindow](http://developer.android.com/reference/android/app/Activity.html#onAttachedToWindow) ()

# php - 如何将新的支付网关添加到 pinnacle 购物车

> ID：10664823
> 
> 赞同：2
> 
> 时间：2012-05-19T11:32:29.387
> 
> 标签：php, payment-gateway, shopping-cart, pinnacle-cart

我对 pinnacle 购物车比较陌生，我想将自定义支付网关集成到不在他们默认列表中的 pinnacle 购物车。我怎么做 ？我已经阅读了 pinnacle cart 的文档，但似乎没有任何帮助。任何建议表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:49:23.617

1) 您的网关应该具有与其他 Pinnacle Cart 支付类相同的面向对象接口。它必须继承基类 PAYMENT_PROCESSOR（扩展 PAYMENT_PROCESSOR）。例如，查看 payment_authorizenet.php。最简单的方法是使用现有网关类之一作为基础。选择与您正在安装的最相似的并对其进行修改。

2) 接下来，将您的网关添加到 payment_methods 表中的数据库

3) 将网关的设置保存在“设置”表中。

4) Pinnacle Cart 会自动创建网关类的实例，并在需要时调用类方法

5) 最重要的方法之一是 process()。所有网关都包含验证码

[http://www.pinnaclecart.com/kb/questions/55/I've+created+a+Payment+Gateway+for+the+cart,+how+do+I+add+it%3F](http://www.pinnaclecart.com/kb/questions/55/I%27ve+created+a+Payment+Gateway+for+the+cart,+how+do+I+add+it?)

# php - PHP while 循环与内循环

> ID：10664828
> 
> 赞同：-1
> 
> 时间：2012-05-19T11:33:22.683
> 
> 标签：php

我希望有人可以帮助我解决一个小问题！

我有一个循环 3 次的 php while 循环。

每次循环时，我都希望内部循环在每个循环中输出 2 个增量值。

例如：

```
Loops the first time: Inner loop should output value 1, value 2

Loops the second time: Inner loop should output value 3, value 4

Loops the third time: Inner loop should output value 5, value 6 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:35:57.217

像这样的东西怎么样：

```
$in = 1;
$out = 0;
while (++$out <= 3) {
    echo "Outer loop $out : ";
    for ($i=0 ; $i<2 ; $i++) {
        echo "$in ";
        $in++;
    }
    echo "<br />";
} 
```

这让我得到以下输出：

```
Outer loop 1 : 1 2
Outer loop 2 : 3 4
Outer loop 3 : 5 6 
```

基本上，这里：

*   我正在使用该`$out`变量来跟踪我通过外循环的次数——我只想循环 3 次
*   我正在使用该`$i`变量来控制内部循环循环的次数——两次，每次外部 while 循环。
*   我将`$in`变量用作**全局计数器**，每次内部循环循环时递增 1——这就是我想要输出的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:48:20.347

This may not be very useful in case this was some project problem, but here's a solution that only requires one loop.

```
for($i=1;$i<=3;$i++) {
  echo "Outer loop $i : ".($i*2-1)." ".($i*2);
} 
```

This is possible only because of the relation between the printed numbers. There exists a linear dependency between the tuples `(1,2,3)`, `(1,3,5)` and `(2,4,6)`.

# ios - 如何使用 Xcode 4.2 将图像转换为文本 (OCR)？

> ID：10664830
> 
> 赞同：2
> 
> 时间：2012-05-19T11:34:24.927
> 
> 标签：ios, ocr

我想使用 ocr 扫描仪从图像中提取文本数据。谷歌搜索后，我发现了很多示例代码，但这些代码在我们的 xcode 中不起作用。我还更改了构建 sdk。示例代码之一成功执行，但服务 url 似乎未处于活动状态

> “HTTP/1.1 400 错误请求缺少语言参数”

我使用此“https://github.com/rcarlsen/Pocket-OCR”下载了该项目。

请告诉我如何获得我的解决方案。还请建议任何有关它的教程。

# image - 将带有 Primefaces 的图像保存到 DB2

> ID：10664843
> 
> 赞同：1
> 
> 时间：2012-05-19T11:36:00.413
> 
> 标签：image, jpa, primefaces, save

使用 JPA 将使用 PrimeFaces 组件 fileUpload 加载的图像保存到 DB2 的最佳方法是什么？

fileUpload 给了我一个 UploadedFile 对象...在 DB2 数据库中，我有一个带有 BLOB 值的字段，它在我的项目中的 JPA 表示是：

```
@Lob()
private byte[] data; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T12:34:25.007

像这样 ：

```
public void handleFileUpload(FileUploadEvent event) {
   byte[] data= event.getFile().getContents();
} 
```

?

# c# - 有没有办法只有在从特定线程调用它时才会发生某些事情？

> ID：10664844
> 
> 赞同：2
> 
> 时间：2012-05-19T11:36:10.277
> 
> 标签：c#

好的，这是一个非常奇怪的问题，但情况是这样的。我有一个我一直在研究的通信库，它的众多功能之一是一个后台线程，它接受来自套接字的所有传入数据包并根据需要将它们分发出去。在最简单的形式中，您可以有请求或对请求的响应。多个线程可以使用此库在同一个套接字上发送请求，方法是发送请求，然后在其响应到达时等待来自后台线程的信号（事件）。

您定义一个与后台线程关联的委托来处理传入请求所发生的情况。简而言之，您可以尝试从该委托发送请求。由于这与后台接收线程都在同一个线程上，因此它变得死锁（线程将阻塞，等待它的响应，这永远不会发生）。这些是我和大多数人都知道要避免的情况，但我希望有一种方法来抛出异常，或者可能有一个编译时检查，以防止程序员尝试调用某个方法，即发送请求的方法，从处理接收的线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:43:55.653

您可以[`Thread.CurrentThread.ManagedThreadId`](http://msdn.microsoft.com/en-us/library/system.threading.thread.managedthreadid.aspx)通过与目标线程的 ID 进行比较来识别当前正在执行的线程并做出决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T11:44:28.000

你可以命名你的线程

```
Thread.CurrentThread.Name = "Any name you like"; 
```

或者您可以创建一个静态字段来保存您的线程 ID

```
SomeClass.RequestSenderThreadId = Thread.CurrentThread.ManagedThreadId; 
```

然后在你的方法

```
if(SomeClass.RequestSenderThreadId == Thread.CurrentThread.ManagedThreadId)
{
    throw new OperationException("You cant use this method in this thread");
} 
```

# android - 自定义视图不绘制，即使视图添加了具有常量值的布局参数，视图八也为零

> ID：10664848
> 
> 赞同：0
> 
> 时间：2012-05-19T11:36:38.480
> 
> 标签：android, android-layout, view, drawing

我有一个简单的自定义视图，我正在务实地添加到布局中。视图不绘制。来自`onMeasure`和`onLayout`的值表明视图没有绘制，因为它没有高度。我尝试使用布局参数的常量应用视图，但这并没有解决问题。我尝试设置布局参数的不同组合，覆盖`onMeasure`, `onDraw`, `onLayout`, setting `setMeasuredDimension`, setting`setWillNotDraw`为 false，但似乎没有任何效果。

附加此视图的布局设置为包装内容，并在适配器中创建。我已经发布了我的源代码。

```
private void addGuessNumeral(RowHolder row) {       
    LinearLayout.LayoutParams numeral_view_params = new LinearLayout.LayoutParams(100, 100); 

    NumeralView numeral_view = new NumeralView(context);
    numeral_view.setLayoutParams(numeral_view_params);
    Log.d("MyGamesAdapter", "row.game.getGuesses.length = " + row.game.getGuesses().length);
    numeral_view.setCount(row.game.getGuesses().length);

    row.layout_numeral.addView(numeral_view);       
}

public class NumeralView extends View {

    private static final int BAR_SPACING = 5;
    private static final int BAR_WIDTH = 5;
    private static final int BAR_HEIGHT = 15;
    private static final int PADDING = 5;

    private static final String TAG = "NumeralView";

    private int count;
    private Paint paint;
    private int width;
    private int height;

    public NumeralView(Context context) {
        super(context);

        paint = new Paint (Paint.ANTI_ALIAS_FLAG);
        paint.setStyle(Paint.Style.FILL_AND_STROKE);
        paint.setColor(Color.BLACK);
        paint.setStrokeWidth(BAR_WIDTH);

        setWillNotDraw(false);          
    }

    public void setCount(int count) {           
        this.count = count;

    //  this.setLayoutParams(new LayoutParams((PADDING*2) + (count * (BAR_SPACING + BAR_WIDTH)), 
    //          BAR_HEIGHT + (PADDING*2)));
    }

    @Override
    protected void onDraw(Canvas canvas) {          
        canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR);

        for(int i = 0; i < count; i++) {
            //algorithm: each bar will occupy on tenth of the width.  Bars are spaced with one tenth of the width apart
            canvas.drawLine(i * (BAR_SPACING + BAR_WIDTH), 0, i * (BAR_SPACING + BAR_WIDTH) + BAR_WIDTH,  height, paint);               
            if (i%5 == 0) {                 
                canvas.drawLine(0, 0, width, height, paint);
            }
        }           
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {            
        Log.d("NumeralView", "left = " + left);
        Log.d("NumeralView", "top = " + top);
        Log.d("NumeralView", "right  = " + right);
        Log.d("NumeralView", "bottom = " + bottom);

        height = bottom - top;
        width = right - left;

        Log.d("NumeralView", "height = " + height);
        Log.d("NumeralView", "width = " + width);

        super.onLayout(changed, left, top, right, bottom);
    }

    /* (non-Javadoc)
     * @see android.view.View#onMeasure(int, int)
     */
    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {         
        widthMeasureSpec = MeasureSpec.makeMeasureSpec(widthMeasureSpec, MeasureSpec.AT_MOST);
        heightMeasureSpec = MeasureSpec.makeMeasureSpec(heightMeasureSpec, MeasureSpec.AT_MOST);

        Log.d("NumeralView", "widthMeasureSpec = " +  widthMeasureSpec);
        Log.d("NumeralView", "heightMeasureSpec = " +  heightMeasureSpec);

        setMeasuredDimension(heightMeasureSpec, heightMeasureSpec);

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }

    /* (non-Javadoc)
     * @see android.view.View#onSizeChanged(int, int, int, int)
     */
    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);          
    }           
} 
```

如果有人知道深入了解`Android`View 系统如何工作的好资源，请逐步说明如何避免这些问题；我将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:11:10.350

1.  如果您调用 setMeasuredDimension ，则不应调用 super.onMeasure ，因为这将调用默认测量。
2.  在 onMeasure 方法中，一定要保存视图的宽度和高度，以供 onDraw 稍后使用。
3.  在包含它的视图“查看”其布局参数之前获取视图的宽度和高度是不可能的，因为这些容器需要根据其周围环境决定赋予它的大小。
4.  [onLayout](http://developer.android.com/reference/android/view/View.html#onLayout%28boolean,%20int,%20int,%20int,%20int%29) - “当此视图应为其所有子级分配大小和位置时调用。” 这意味着它仅适用于包含其他视图 (ViewGroup) 的视图。

有关更多信息，请参见下一个链接：

[http://developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)

[http://developer.android.com/guide/topics/ui/how-android-draws.html](http://developer.android.com/guide/topics/ui/how-android-draws.html)

# mysql - MYSQL+加载数据INFILE+检查字段

> ID：10664850
> 
> 赞同：2
> 
> 时间：2012-05-19T11:36:52.057
> 
> 标签：mysql, file, csv

我有两个关于`MYSQL LOAD DATA FILE`函数的问题：

**1）**如何确保`data file`设置中的所有字段？

~~**2）**我可以让它跳过第一行`data file`吗？~~

我目前正在使用的代码：

```
$dbq    = "field1,field2,field3,field4";
$query  = "LOAD DATA LOCAL INFILE '$targetPath' INTO TABLE $db FIELDS TERMINATED BY ';' ($dbq)";
$result = $mysqli->query($query);

if(!$result){
    echo($mysqli->error+".");
    exit();
} else{
    header("Location: admin.php");
} 
```

这`data file`是一个`.csv`文件：

![在此处输入图像描述](../Images/f0ba6d71197aeffb64de8e3c5ab71c0c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T11:43:31.767

要跳过一行，请将加载字符串更改为：

```
$query  = "LOAD DATA LOCAL INFILE '$targetPath' INTO TABLE $db FIELDS TERMINATED BY ';' IGNORE 1 LINES ($dbq)"; 
```

# python - 在 Python 中创建一个带有重复键的字典

> ID：10664856
> 
> 赞同：82
> 
> 时间：2012-05-19T11:37:28.937
> 
> 标签：python, dictionary

我有以下列表，其中包含具有不同值的重复汽车登记号。我想把它转换成一个接受这多个汽车登记号码键的字典。

到目前为止，当我尝试将列表转换为字典时，它消除了其中一个键。如何制作带有重复键的字典？

名单是：

```
EDF768, Bill Meyer, 2456, Vet_Parking
TY5678, Jane Miller, 8987, AgHort_Parking
GEF123, Jill Black, 3456, Creche_Parking
ABC234, Fred Greenside, 2345, AgHort_Parking
GH7682, Clara Hill, 7689, AgHort_Parking
JU9807, Jacky Blair, 7867, Vet_Parking
KLOI98, Martha Miller, 4563, Vet_Parking
ADF645, Cloe Freckle, 6789, Vet_Parking
DF7800, Jacko Frizzle, 4532, Creche_Parking
WER546, Olga Grey, 9898, Creche_Parking
HUY768, Wilbur Matty, 8912, Creche_Parking
EDF768, Jenny Meyer, 9987, Vet_Parking
TY5678, Jo King, 8987, AgHort_Parking
JU9807, Mike Green, 3212, Vet_Parking 
```

我试过的代码是：

```
data_dict = {}
data_list = []

def createDictionaryModified(filename):
  path = "C:\Users\user\Desktop"
  basename = "ParkingData_Part3.txt"
  filename = path + "//" + basename
  file = open(filename)
  contents = file.read()
  print contents,"\n"
  data_list = [lines.split(",") for lines in contents.split("\n")]
  for line in data_list:
    regNumber = line[0]
    name = line[1]
    phoneExtn = line[2]
    carpark = line[3].strip()
    details = (name,phoneExtn,carpark)
    data_dict[regNumber] = details
  print data_dict,"\n"
  print data_dict.items(),"\n"
  print data_dict.values() 
```

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-05-19T11:41:15.263

Python 字典不支持重复键。一种解决方法是将列表或集合存储在字典中。

实现此目的的一种简单方法是使用[`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)：

```
from collections import defaultdict

data_dict = defaultdict(list) 
```

你所要做的就是更换

```
data_dict[regNumber] = details 
```

和

```
data_dict[regNumber].append(details) 
```

你会得到一个列表字典。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-05-19T12:42:38.843

您可以更改 Python 中内置类型的行为。对于您的情况，创建一个 dict 子类非常容易，它将自动将重复值存储在同一键下的列表中：

```
class Dictlist(dict):
    def __setitem__(self, key, value):
        try:
            self[key]
        except KeyError:
            super(Dictlist, self).__setitem__(key, [])
        self[key].append(value) 
```

输出示例：

```
>>> d = dictlist.Dictlist()
>>> d['test'] = 1
>>> d['test'] = 2
>>> d['test'] = 3
>>> d
{'test': [1, 2, 3]}
>>> d['other'] = 100
>>> d
{'test': [1, 2, 3], 'other': [100]} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-19T11:40:59.913

你不能有一个带有重复键的字典来定义！相反，您可以使用单个键，并将具有该键的元素列表作为值。

因此，您可以按照以下步骤操作：

1.  查看当前元素的（您的初始集合中的）键是否在最终字典中。如果是，请转到步骤 3
2.  用键更新字典
3.  将新值附加到 dict[key] 列表
4.  重复 [1-3]

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-09-06T13:24:55.780

可以参考以下文章： [http ://www.wellho.net/mouth/3934_Multiple-identical-keys-in-a-Python-dict-yes-you-can-.html](http://www.wellho.net/mouth/3934_Multiple-identical-keys-in-a-Python-dict-yes-you-can-.html)

在 dict 中，如果键是对象，则不存在重复问题。

例如：

```
class p(object):
    def __init__(self, name):
        self.name = name
    def __repr__(self):
        return self.name
    def __str__(self):
        return self.name
d = {p('k'): 1, p('k'): 2} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-05-01T17:37:40.697

我刚刚发布了一个问题的答案，该问题随后作为该问题的副本关闭（我认为有充分的理由），但我很惊讶地看到我提出的解决方案未包含在此处的任何答案中。

`defaultdict`您可以使用以下方法轻松地将值附加到字典中的列表中，而不是使用或弄乱成员资格测试或手动异常处理`setdefault`：

```
results = {}                              # use a normal dictionary for our output
for k, v in some_data:                    # the keys may be duplicates
    results.setdefault(k, []).append(v)   # magic happens here! 
```

这很像使用默认字典，但您不需要特殊的数据类型。当您调用 时`setdefault`，它会检查第一个参数（键）是否已经在字典中。如果没有找到任何东西，它会将第二个参数（默认值，在这种情况下为空列表）分配为键的新值。如果密钥确实存在，则不做任何特殊处理（默认未使用）。但是，无论哪种情况，值（无论是旧的还是新的）都会返回，因此我们可以无条件地调用`append`它，知道它应该始终是一个列表。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-01-30T09:26:03.413

如果您只想在**必要时拥有列表**，而在任何其他情况下才拥有值，那么您可以这样做：

```
class DictList(dict):
    def __setitem__(self, key, value):
        try:
            # Assumes there is a list on the key
            self[key].append(value)
        except KeyError: # If it fails, because there is no key
            super(DictList, self).__setitem__(key, value)
        except AttributeError: # If it fails because it is not a list
            super(DictList, self).__setitem__(key, [self[key], value]) 
```

然后，您可以执行以下操作：

```
dl = DictList()
dl['a']  = 1
dl['b']  = 2
dl['b'] = 3 
```

其中将存储以下`{'a': 1, 'b': [2, 3]}`.

* * *

当我想要**反向/反向字典**时，我倾向于使用这个实现，在这种情况下我只是这样做：

```
my_dict = {1: 'a', 2: 'b', 3: 'b'}
rev = DictList()
for k, v in my_dict.items():
    rev_med[v] = k 
```

这将产生与上面相同的输出：`{'a': 1, 'b': [2, 3]}`.

* * *

**CAVEAT：**此实现依赖于`append`方法的不存在（在您存储的值中）。**如果您存储的值是列表，**这可能会产生意想不到的结果。例如，

```
dl = DictList()
dl['a']  = 1
dl['b']  = [2]
dl['b'] = 3 
```

将产生与以前相同的结果`{'a': 1, 'b': [2, 3]}`，但可能会预期以下结果：`{'a': 1, 'b': [[2], 3]}`.

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-05-19T11:50:22.793

字典中不能有重复的键。使用列表的字典：

```
for line in data_list:
  regNumber = line[0]
  name = line[1]
  phoneExtn = line[2]
  carpark = line[3].strip()
  details = (name,phoneExtn,carpark)
  if not data_dict.has_key(regNumber):
    data_dict[regNumber] = [details]
  else:
    data_dict[regNumber].append(details) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-16T08:24:12.700

字典不支持重复键，你可以使用**defaultdict**
下面是如何在 python3x 中使用**defaultdict**来解决你的问题的例子

```
from collections import defaultdict

sdict = defaultdict(list)
keys_bucket = list()

data_list = [lines.split(",") for lines in contents.split("\n")]
for data in data_list:
    key = data.pop(0)
    detail = data

    keys_bucket.append(key)
    if key in keys_bucket:
        sdict[key].append(detail)
    else:
        sdict[key] = detail

print("\n", dict(sdict)) 
```

上面的代码将产生如下输出：

```
{'EDF768': [[' Bill Meyer', ' 2456', ' Vet_Parking'], [' Jenny Meyer', ' 9987', ' Vet_Parking']], 'TY5678': [[' Jane Miller', ' 8987', ' AgHort_Parking'], [' Jo King', ' 8987', ' AgHort_Parking']], 'GEF123': [[' Jill Black', ' 3456', ' Creche_Parking']], 'ABC234': [[' Fred Greenside', ' 2345', ' AgHort_Parking']], 'GH7682': [[' Clara Hill', ' 7689', ' AgHort_Parking']], 'JU9807': [[' Jacky Blair', ' 7867', ' Vet_Parking'], [' Mike Green', ' 3212', ' Vet_Parking']], 'KLOI98': [[' Martha Miller', ' 4563', ' Vet_Parking']], 'ADF645': [[' Cloe Freckle', ' 6789', ' Vet_Parking']], 'DF7800': [[' Jacko Frizzle', ' 4532', ' Creche_Parking']], 'WER546': [[' Olga Grey', ' 9898', ' Creche_Parking']], 'HUY768': [[' Wilbur Matty', ' 8912', ' Creche_Parking']]} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-15T21:09:16.150

这是一个古老的问题，但也许我的解决方案可以帮助某人。

通过覆盖`__hash__`魔术方法，您可以将相同的对象保存在 dict.

例子：

```
from random import choices

class DictStr(str):
    """
        This class behave exacly like str class but
        can be duplicated in dict
    """
    def __new__(cls, value='', custom_id='', id_length=64):
        # If you want know why I use __new__ instead of __init__
        # SEE: https://stackoverflow.com/a/2673863/9917276
        obj = str.__new__(cls, value)
        if custom_id:
            obj.id = custom_id
        else:
            # Make a string with length of 64
            choice_str = "abcdefghijklmopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ1234567890"
            obj.id = ''.join(choices(choice_str, k=id_length))
        return obj

    def __hash__(self) -> int:
        return self.id.__hash__() 
```

现在让我们创建一个字典：

```
>>> a_1 = DictStr('a')
>>> a_2 = DictStr('a')
>>> a_3 = 'a'
>>> a_1
a
>>> a_2
a
>>> a_1 == a_2 == a_3
True
>>> d = dict()
>>> d[a_1] = 'some_data'
>>> d[a_2] = 'other'
>>> print(d)
{'a': 'some_data', 'a': 'other'} 
```

**注意**：此解决方案可以适用于任何基本数据结构，例如 (int, float,...)

## 解释 ：

我们几乎可以使用任何对象作为`dict`类中的键（或通常称为`HashMap`或`HashTable`在其他语言中），但应该有一种方法来区分键，因为 dict 不知道对象。

为此，想要以某种方式作为键添加到字典中的对象必须为自己提供一个唯一的标识符号（我将其命名为 uniq_id，它实际上是一个以某种方式使用哈希算法创建的数字）。

由于字典结构在大多数解决方案中广泛使用，因此大多数编程语言将对象 uniq_id 生成隐藏在`hash`名称构建方法中，该方法在键搜索中提供 dict

因此，如果您操作`hash`类的方法，则可以将类的行为更改为字典键

# maven - Maven 通过生成 Tapestry 给 MojoExecutionException

> ID：10664863
> 
> 赞同：0
> 
> 时间：2012-05-19T11:38:26.903
> 
> 标签：maven, tapestry

尝试执行以下命令时：

```
mvn archetype:generate -DarchetypeCatalog=http://tapestry.apache.org. 
```

我收到以下错误消息：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2
.2:generate (default-cli) on project standalone-pom: Execution default-cli of go
al org.apache.maven.plugins:maven-archetype-plugin:2.2:generate failed: Plugin o
rg.apache.maven.plugins:maven-archetype-plugin:2.2 or one of its dependencies co
uld not be resolved: The following artifacts could not be resolved: org.codehaus
.groovy:groovy:jar:1.8.3, org.apache.ant:ant:jar:1.8.1: Could not transfer artif
act org.codehaus.groovy:groovy:jar:1.8.3 from/to central (http://repo.maven.apac
he.org/maven2): GET request of: org/codehaus/groovy/groovy/1.8.3/groovy-1.8.3.ja
r from central failed: Read timed out -> [Help 1]

[ERROR] For more information about the errors and possible solutions, please rea
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginResoluti
onException 
```

所以我参观了

> [https://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException](https://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException)

它说要在挂毯文档中查看此错误的含义，但我在那里找不到。在我得到任何帮助的情况下提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:29:34.087

错误消息指出下载此文件时出现问题：

[http://repo.maven.apache.org/maven2/org/codehaus/groovy/groovy/1.8.3/groovy-1.8.3.jar](http://repo.maven.apache.org/maven2/org/codehaus/groovy/groovy/1.8.3/groovy-1.8.3.jar)

我认为这是由您的网络设置引起的。在 ~/.m2/settings.xml 中是否有任何代理设置您应该考虑作为问题的根源？

# objective-c - beginSheetModalForWindow

> ID：10664865
> 
> 赞同：0
> 
> 时间：2012-05-19T11:38:28.463
> 
> 标签：objective-c, cocoa, alert

从 Apple 的示例中复制/粘贴的这段代码有什么问题？警报很快出现在窗口上，然后应用程序终止（没有任何错误）。

```
 (NSApplicationTerminateReply)applicationShouldTerminate:(NSNotification *)notification {
     return NSTerminateCancel;
     if (registerModified){
     NSAlert *testAlert = [NSAlert alertWithMessageText:@"Voulez-vous enregister les modifications du registre?"
     defaultButton:@"Enregistrer"
     alternateButton:@"Ne pas enregistrer"
     otherButton:nil
     informativeTextWithFormat:@"Ces modifications seront permanentes."];

    [testAlert beginSheetModalForWindow:[self mainWindow]
     modalDelegate:self
     didEndSelector:@selector(alertDidEnd:returnCode:contextInfo:)
     contextInfo:nil];
    }

    - (void)alertDidEnd:(NSAlert *)alert returnCode:(NSInteger)returnCode contextInfo:(void *)contextInfo
    {
    #pragma unused (contextInfo)
    [[alert window] orderOut:self];
    } 
```

beginSheetModalForWindow…如果你很快！

# oauth-2.0 - 在哪里可以找到 Google 的 OAuth 2.0 API 的范围列表？

> ID：10664868
> 
> 赞同：119
> 
> 时间：2012-05-19T11:39:39.047
> 
> 标签：oauth-2.0, google-authentication

我正在使用的示例将 OAuth 请求中的范围指定为：scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth% 2Fuserinfo.profile

解码成两个 URI：

*   [https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)
*   [https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)

我找不到涵盖可用范围的完整列表以及在每个范围内可以访问哪些信息的文档 - 有人知道这样的事情是否存在吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-05-20T09:02:44.067

您正在寻找的是[`Google APIs Discovery Service`](https://developers.google.com/discovery/).

其他一些有趣的资源：

*   *Nicolas Garnier*的一篇[优秀博客](http://googleappsdeveloper.blogspot.com.es/2012/01/tips-on-using-apis-discovery-service.html)描述了这项服务背后的重要内容。

**   [Google OAuth2 playground](https://developers.google.com/oauthplayground/)是另一个很好的信息来源。

    *   最后，如果您对跟踪发现文档的更改感兴趣或者不想阅读所有文档，*Gerwin Sturm*提供了一个有趣的[在线实现](http://discovery-check.appspot.com/)。* 

 *** * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-03-10T22:40:25.433

感谢 Antonio Sacco 的链接，我能够找到：

[https://www.googleapis.com/discovery/v1/apis/oauth2/v2/rest?fields=auth(oauth2(scopes))](https://www.googleapis.com/discovery/v1/apis/oauth2/v2/rest?fields=auth(oauth2(scopes)))

它说这些是可用的范围：

```
 - https://www.googleapis.com/auth/plus.me (Know who you are on Google)
 - https://www.googleapis.com/auth/userinfo.email (View your email address)
 - https://www.googleapis.com/auth/userinfo.profile (View basic information about your account) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-12-01T22:37:04.830

这是最近添加到 Google 的 OAuth 2.0 文档中的文档，其中包含完整的范围列表：

[https://developers.google.com/identity/protocols/googlescopes](https://developers.google.com/identity/protocols/googlescopes)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-01T14:37:09.803

OAuth 文档中未提供完整的范围列表，但在 GData 开发人员的常见问题解答中提供。范围在更改 OAuth 1.0 或 Oauth 2.0 时没有更改。添加到页面的链接[单击此处](https://developers.google.com/gdata/faq#AuthScopes)了解 Google 范围的完整列表或链接是[https://developers.google.com/gdata/faq#AuthScopes](https://developers.google.com/gdata/faq#AuthScopes)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-01-21T16:34:55.687

以下是所有 google 范围的列表： [https ://developers.google.com/identity/protocols/googlescopes](https://developers.google.com/identity/protocols/googlescopes)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-09-19T00:03:51.557

Google 的 oauth 文档显示了一个列出所有可用范围的表格。

[https://developers.google.com/+/api/oauth#scopes-table](https://developers.google.com/+/api/oauth#scopes-table)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-04-14T19:12:38.670

可能有点晚了，但这来自文档：

> 有关可用登录范围的信息，请参阅[登录](https://developers.google.com/+/api/oauth#login-scopes)范围。要查看所有 Google API 的可用范围，请访问[API Explorer](https://developers.google.com/apis-explorer/#p/)。

不喜欢点击链接的人的网址：

*   [https://developers.google.com/+/api/oauth#login-scopes](https://developers.google.com/+/api/oauth#login-scopes)
*   [https://developers.google.com/apis-explorer/#p/](https://developers.google.com/apis-explorer/#p/)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-03-28T23:50:33.770

我一直在寻找同样的东西，我发现了这个由 Google 开发的非常棒的工具 oAuth 2.0 Playground，您可以在其中找到他们提供的各种 api 中的所有范围。

他们推荐使用的链接和 Chrome 扩展：

[https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)

[http://goo.gl/y9nH4H](http://goo.gl/y9nH4H)**

# matlab - 如何显示几个保存为图像的图

> ID：10664870
> 
> 赞同：0
> 
> 时间：2012-05-19T11:40:30.187
> 
> 标签：matlab

如果我使用 saveas 命令将多个绘图保存为图像，我该如何显示它们。我正在使用的代码是：

```
if we==1
    figure()
    saveas(gcf(),'myownfile.jpg'); % save the figure if condition is satisfied  
    clf % clear the figure after saving it
end 
```

如果 we==1 则程序检查条件，然后在保存绘图后清除图形。它是功能的一部分。而在函数中保存为图像的图必须显示在主函数中。代码是：

```
p=imread('myownfile.jpg');% read the image
imshow(p); %show the image 
```

但我得到一个空白的数字。我不知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:47:19.177

可能是`()`你在你的代码之后`gcf`可能会导致一些问题。

固定代码：

```
if we==1
    figure()
    saveas(gcf,'myownfile.jpg'); % save the figure if condition is satisfied  
    clf % clear the figure after saving it
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:51:30.373

我总是使用该`print`命令，因为它可以为您提供更多控制权。

```
print(gcf, '-djpeg', '-r400', 'myownfile.jpg') 
```

如果我不得不猜测您遇到的问题，我敢打赌您需要将其称为：`saveas(gcf,'myownfile.jpg','jpg');` 因为 Matlab 在这方面可能非常愚蠢。

另一个可能的问题是渲染器（使用`get/set(gcf,'Renderer')`） - 其中一些无法保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T14:04:27.243

这是解决方案。感谢您的帮助。通过删除命令`figure()`并在上面的代码中添加命令`saveas(gcf(),strcat('myownpic',strcat(int2str(m1),'.jpg')));`将解决问题。

# java - 如何在android中删除特定联系人号码的所有短信

> ID：10664873
> 
> 赞同：0
> 
> 时间：2012-05-19T11:40:57.057
> 
> 标签：java, android

我有以下代码删除所有短信对话，

```
Uri inboxUri = Uri.parse("content://sms/conversations");
int count = 0;
Cursor c = context.getContentResolver().query(inboxUri , null, null, null, null);
while (c.moveToNext()) {
    try {
        // Delete the SMS
        String pid = c.getString(0); // Get id;
        String uri = "content://sms/" + pid;
        count = context.getContentResolver().delete(Uri.parse(uri),
                null, null);
    } catch (Exception e) {
    }
}
return count; 
```

但我想删除特定联系号码的短信，怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:43:42.997

您可以使用删除特定号码的所有短信，

```
private void removeMessage(Context context, String fromAddress) {

    Uri uriSMS = Uri.parse("content://sms/inbox");
    Cursor cursor = context.getContentResolver().query(uriSMS, null, 
                                                               null, null, null);
    cursor.moveToFirst();
      if(cursor.getCount() > 0){
        int ThreadId = cursor.getInt(1);
        Log.d("Thread Id", ThreadId+" id - "+cursor.getInt(0));
        Log.d("contact number", cursor.getString(2));
        Log.d("column name", cursor.getColumnName(2));

        context.getContentResolver().delete(Uri.
                parse("content://sms/conversations/"+ThreadId), "address=?", 
                                                      new String[]{fromAddress});
        Log.d("Message Thread Deleted", fromAddress);
      }
      cursor.close();
} 
```

# php - 通过快速连续 AJAX 调用显示结果

> ID：10664881
> 
> 赞同：0
> 
> 时间：2012-05-19T11:42:51.627
> 
> 标签：php, javascript, ajax

为了更好地可视化它，我有一个用于显示日历的酒店管理应用程序的 PHP 脚本（表格列：每月的天数/行：每天的价格）。

我可以在编辑模式下访问这个脚本，它会在每个 .

当我更改字段的值时，ajaxcall 会执行后台作业并将更新的值返回给字段（以确认数据库中的新值已更新）。

当我缓慢更改值（每个字段超过 1 秒）时，它可以完美运行。但是当我尝试加快速度时（编辑值、TAB 到下一个字段、更改值等等），ajaxcall 会更新数据库，但无法更新回该字段。

关于为什么会发生这种情况的任何想法？以及如何解决？我在所有浏览器中都试过了。

HTML部分：

```
<td>
    <input type='text' id='$counter' onChange='updateAvailability(this,$idroomclass,\"$date\",$counter)'
    value='$total' />
</td> 
```

Javascript：

```
function ajaxRequest() {
    try {
        var request = new XMLHttpRequest()
    } catch (e1) {
        try {
            request = new ActiveXObject("Msxml2.XMLHTTP")
        } catch (e2) {
            try {
                request = new ActiveXObject("Microsoft.XMLHTTP")
            } catch (e3) {
                request = false
            }
        }
    }
    return request
}

function updateAvailability(vagos, idroomclass, date, input_id) {
    if (vagos.value != "") {
        params = "vagos=" + vagos.value + "&idroomclass=" + idroomclass + "&date=" + date
        request = new ajaxRequest()
        request.open("POST", "ajaxcalls/updateAvailability.php", true)
        request.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
        request.setRequestHeader("Content-length", params.length)
        request.setRequestHeader("Connection", "close")
        request.onreadystatechange = function () {
            if (this.readyState == 4) {
                if (this.status == 200) {
                    document.getElementById(input_id).value = request.responseText;
                } else alert("Ajax error: " + this.statusText)
            }
        }
        request.send(params)
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:33:19.820

我认为你应该重新考虑整体算法。

据我了解，您正在尝试创建一个允许同时修改数据的 Web 应用程序（在本例中：日历条目）。

这可以通过用于同时编辑文本文档（例如Google Docs）的算法来解决——但这在这里可能是矫枉过正的。

我建议使用具有本地锁定的方法：
一旦用户单击该元素，AJAX 调用就需要服务器提供“租约”来修改该元素。服务器将响应一条消息，告诉客户端它当前已锁定（-> 用户无法修改它）或告诉客户端它现在允许修改它的内容 - 所有其他客户端现在将返回锁定消息他们试图修改它。
然后在客户端你可以写任何你想要的（直到超时）。
一旦您再次离开该元素，客户端就会向服务器发送一条消息，其中包含新内容以及它现在再次解锁的信息。

如果您还需要其他客户端的实时更新，您可以通过计时器发送当前内容。

# jquery - jQuery Datatables 服务器端处理具有自定义值的空列

> ID：10664882
> 
> 赞同：2
> 
> 时间：2012-05-19T11:42:57.687
> 
> 标签：jquery, datatables

我打算使用数据表从 mysql 表中检索我的所有用户数据并显示它们。我正在使用他们的服务器端处理代码来检索所有数据。我有一个要求，其中某些需要插入自定义值的附加列。

```
$('#data').dataTable( {
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": "userlist.php"
} ); 
```

在服务器端处理中，

```
$aColumns = array('col1', 'col2', 'col3'); 
```

要显示的实际列，

```
<th>col1</th>
<th>col2</th>
<th>col3</th>
<th>col4</th> 
```

其中 col4 包含一个示例代码，例如，

```
<a href='del.php?userid=col1value></a> 
```

我怎样才能做到这一点？

参考：[http ://datatables.net/examples/server_side/server_side.html](http://datatables.net/examples/server_side/server_side.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:21:36.097

您需要做的就是将第四列作为 HTML 标记发送，例如，它可以在从服务器端返回值时工作

```
$aColumns = array('col1', 'col2', 'col3', "<a href='del.php?userid=col1value>sometext</a>"); 
```

它会工作:)。

PS：你可以从服务器端返回任何东西，它可以是 HTML 标签或字符串，数据表会将值放在你的列中，没有任何问题。

# jquery - jquery用ajax加载html并让它在你的页面中滑动

> ID：10664893
> 
> 赞同：5
> 
> 时间：2012-05-19T11:44:13.843
> 
> 标签：jquery, web

我正在制作一个 webapge，我需要在我的主页中加载一个带有点击事件的 html 页面。那工作正常。

我的问题是，是否可以让传入的 html 页面在主页中滑动？

我正在使用以下内容加载 html 页面：

```
$.ajax({
    url: "gegarandeerd.html",
    dataType: "html",
    success: function(data) {
        $("#content").html(data);
    }
});​ 
```

**如何使加载的数据在页面中滑动？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T11:54:03.543

这个效果看起来不错。

```
$.ajax({
    url: "gegarandeerd.html",
    dataType: "html",
    success: function(data) {
        $("#content").fadeOut(function() {
            $(this).html(data).slideDown();
        });
    }
});​ 
```

旧内容正在淡出，新内容正在下滑。

**演示：http:** [//jsfiddle.net/2yJhc/](http://jsfiddle.net/2yJhc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:50:24.243

$('#book').slideDown('slow', function() { // 动画完成。});

```
$.ajax({
            url:"gegarandeerd.html",
            dataType: "html",
            success: function(data){    
                $("#content").html(data);
  $('#content').slideDown('slow', function() {
    // Animation complete.
  });
                }   
            }); 
```

试试这个

# java - 将 HashTable 转换为表格结构

> ID：10664895
> 
> 赞同：2
> 
> 时间：2012-05-19T11:44:40.190
> 
> 标签：java, hashtable, tsv

我有一个 HashTable，其中有如下键值对： 值由制表符分隔

```
<key, value>
Director, Chantal Akerman   Aleksandr Sokurov       Alexandra McGuinness
Country, Belgium-France Russia  UK-Ireland  UK-Ireland 
```

我需要在 tsv 文件中写入以下结构中的值：

```
Director             Country
Chantal Akerman      Belgium-France
Aleksandr Sokurov    Russia
                     UK-Ireland
Carol Morley         UK-Ireland 
```

java中是否有任何可用的API？或者有没有其他办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:08:10.850

标准工具很容易解决这个问题。

输出键：

```
List<Scanner> values = new ArrayList<Scanner>();
for( String title: hashTable.keySet() ){
    out.print( title + "\t" );
    Scanner sc = new Scanner(hasTable.get( title );
    sc.useDelimiter("\t");
    values.add();     
}
out.println(); 
```

输出值：

```
while( values.get(0).hasNext() ){
   for(int i = 0; i < values.size(); i++){
      out.print( values.get(i).next() + "\t" );
   }
   out.println();
} 
```

# php - Cookie 设置两次

> ID：10664897
> 
> 赞同：2
> 
> 时间：2012-05-19T11:45:47.477
> 
> 标签：php, cookies

为什么我的网站要设置两次 cookie？为“www.example.com”存储一组 cookie，为“example.com”存储同一组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T11:48:33.770

最有可能的是，您允许通过两个域名访问您的站点`example.com`，`www.example.com`并且您没有指定应设置 cookie 的域名。第五[个参数`setcookie()`](http://us3.php.net/manual/en/function.setcookie.php)指定域，所以设置为`example.com`only。这也将使其可用于更高的域`www.example.com`。

```
setcookie('key', 'value', time(), '/path', 'example.com'); 
```

通过 URL 重写，您可以在设置 cookie 之前强制您网站的所有用户访问这些域中的一个或另一个，但这只是用户体验一致性的解决方案，而不是管理 cookie 的方法。

从文档：

> ### 领域
> 
> cookie 可用的域。将域设置为“www.example.com”将使 cookie 在 www 子域和更高的子域中可用。可用于较低域的 Cookie，例如“example.com”，将可用于较高的子域，例如“www.example.com”。仍在实施已弃用的 » RFC 2109 的旧浏览器可能需要前导 . 匹配所有子域。

# php - 登录系统+新闻提要错误

> ID：10664899
> 
> 赞同：0
> 
> 时间：2012-05-19T11:46:13.653
> 
> 标签：php, mysql, css, database

我正在创建一个登录 + 新闻提要网站。我已经设置了所有需要的数据库。

这是所有网站的代码：

索引.php：

```
<?php

session_start();

 mysql_pconnect("MyServer","Username","Password");
  mysql_select_db("Database_Name");

  $page = $_GET['page'];

   ?>

   <html>
   <head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>InstaWord</title>
    <link href="style.css" type="text/css" rel="stylesheet">
   </head>

    <body>
   <center>
   <table>
   <tr>
    <td id="body">

    <h1>News Feed <a href="?page=Home">Home</a></h1>

     <?php

    if ( !$page ) {

        $page = "Home";

    }

    include("$pages.php");

?>

      </td>
      <td id="nav">

      <?php

      if ( !$_SESSION['uid'] ) {

   ?> <a href="?page=Login">Login</a>

        <?php

     } else {

          ?>

          <a href="?page=Admin">Profile</a> | <a href="?page=Logout">Logout</a>

        <?php

   }

   ?>

   </td>
  </tr>
    </table>
  </center>
 </body>
 </html> 
```

style.css 看起来像这样：

```
body {

background: #cfcfcf;
font-size: 12px;
line-height: 18px;
font-family: Trebuchet MS;
 }

  td {

font-size: 12px;
line-height: 18px;
font-family: Trebuchet MS;

   }

    #body {

background: #FFF;
border: 1px solid #000;
width: 600px;
padding: 10px;

    }

    #nav {

background: #FFF;
border: 1px solid #000;
padding: 10px;
width: 125px;
} 
```

Home.php 看起来像这样：

```
<?php

$sql = mysql_query("SELECT * FROM `news1`") or die(mysql_error());

if ( mysql_num_rows($sql) == 0 ) {

   echo "There are no posts.";

} else {

   $sql = mysql_query("SELECT * FROM `news1` ORDER BY `time` DESC") or    die(mysql_error());

    while ( $row = mysql_fetch_assoc($sql) ) {

       echo "<hr>";

       echo "<h3>";

       echo $row['news_title'];

       echo "</h3>";

       echo $row['news_body'];

      }

      }

    ?> 
```

Login.php 看起来像这样：

```
 <?php

   if ( !$_SESSION['uid'] ) {
   if ( !$_POST['submit'] ) {
   ?>  

   <form action="?page/Login"  method="post">
   <table>
   <tr>
   <td>Username</td>
   <td><input type="text" name="username"></td>
   </tr>
   <tr>
   <td>Password</td>
   <td><input type="password" name="password"></td>
   </tr>
   <td colspan="2">
   <input type="submit" value="Login" name="submut">
   </td>
   </tr>
   </table>
   </form> 

   <?php       
   } else {

       $username = $_POST['username'];
       $password = md5($_POST['password']);

       $errors = array();

       if ( !$username ) {

           $errors[1] = "Please enter a username.";

        }

        if ( !$password ) {

            $errors[2] = "Please enter a password";

        }

       $sql = "SELECT * FROM `users3` WHERE `name`='$username'";

       $res = mysql_query($sql) or die(mysql_error());

       $exists = mysql_num_rows($res);

       if ( $exists == 0 ) {

           $errors[3] = "The username does not exist!";

       } else {

            $sql = "SELECT * FROM `users3` WHERE `name`='$username' AND  `password`='$password'";

            $res = mysql_query($sql) or die(mysql_error());

            $exists = mysql_num_rows($res);

            if ( $exists == 0 ) {

                $errors[4] = "The username and password do not match.";

            }

     }

     if ( count($errors) > 0 ) {

         echo "<ul>";

         foreach ( $errors as $error ) {
             echo "<li>";
             echo $error;
             echo "</li>";
         }

         echo "</ul>

     } else {

          $sql = "SELECT * FROM `users3` WHERE `name`='$username' AND `password`='$password'";

          $res = mysql_query($sql) or die(mysql_error());

          $res = mysql_fetch_assoc($res);

          $_SESSION['uid'] = $res['user_id'];

          echo "You have successfully logged in! <a href=\"?  page=Home\">Home</a><br><br>";

     }

       }  else {

   echo "You are already logged in!";

   include("?pages/Home.php");

        }

       }
       }

       ?> 
```

Logout.php 看起来像这样：

```
<?php

$_SESSION['uid'] = "";

?>
You have logged out! 
```

Admin.php 看起来像这样：

```
<?php

$action = $_GET['action'];

if ( !$action ) {
?>

<a href="?page=Admin&action=Post">Post News</a><br>
<a href="?page=Admin&action=Edit">Edit/Delete News</a><br>

<?php   
} else {

    if ( $action == "Post" ) {

    if ( !$_POST['submit'] ) {

    ?>

    <form action="?page=Admin&action=Post" method="post">
    <table>
      <tr>
        <td>News Title</td>
        <td><input type="text" name="news_title"></td>
        </tr>
        <tr>
        <td>News Body</td>
        <td><textarea name="news_body" cols="8" rows="4"></textarea></td>
        </tr>
        <tr>
        <td colspan="2">
        <input type="submit" name="submit" value="Post News">
        </td>
        </tr>
        </table>
        </form>

    <?php  

    } else {

        $user_id = $_SESSION['uid'];
        $news_title = $_POST['news_title'];
        $news_body = $_POST['news_body'];
        $time = time();

        $errors = array();

        if ( !$user_id ) {

            $errors[1] = "You are not logged in.";

        }

        if ( !$news_title ) {

            $errors[2] = "Please enter a title of the news.";

        }

        if ( !$news_body ) {

            $errors[3] = "Please enter a news body.";

        }

        if ( count($errors) > 0 ) {

            echo "<ul>";
            foreach ( $errors as $error ) {

                echo "<li>";
                echo $error;
                echo "</li>";

            }

            echo "</ul>";

        } else {

           $sql = mysql_query("INSERT INTO `news1` (`news_id`, `news_title`, `news_body`, `user_id`, `time`) 
           VALUES ('$news_title', '$news_body', '$user_id', '$time');';") or die(mysql_error());

           echo "You have posted the news successfully!";

        }

    }

    } elseif ( $action == "Edit" ) {

        if ( !$_GET['id'] ) {

             $sql = mysql_query("SELECT * FROM `news1`") or die(mysql_error());

             while ( $row = mysql_fetch_assoc($sql) ) {

             echo $row['news_title'] . " | <a href=\"?page=Admin&action=Edit&id=" . $row['news_id'] . "&type=Delete\">Delete</a><br>";

        }

        } else {

            $type = $_GET['type'];

            $id = $_GET['id'];

            if ( $type == "Delete" ) {

                $sql = mysql_query("DELETE FROM `news1` WHERE `news_id`='$id'") or die(mysql_error());
                echo "You successfully deleted the news entry.";

            }

        }

    }

}

    ?> 
```

但请尝试继续[http://www.youngcreativity.com](http://www.youngcreativity.com)

您可以在第一页看到错误：![错误](../Images/3f61e011c5f0978a0890909c1e8fda06.png)

在我的服务器上，我导入了这些文件：

![服务器](../Images/e970bd5d23e7b98d204b86d48fdcd382.png)

请帮我解决这个问题。我已经卡在它上面很久了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:15:26.093

问题在第 83 行

```
 echo "</ul>

             echo "</ul>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:03:00.503

在 index.php 第 39 行是：

包括（“$pages.php”）；

应该是：

包括（“页面/$page.php”）；

这将解决问题。

# java - Android Listview 显示 ArrayList 中的最后一个元素

> ID：10664906
> 
> 赞同：1
> 
> 时间：2012-05-19T11:47:29.737
> 
> 标签：java, android, arraylist, android-listview

嗨，我的代码只显示了 ArrayList 的最后一个元素！这是我的代码：

```
 ListView list = (ListView) findViewById(R.id.t1player_statsList);

    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    HashMap<String, String> map = new HashMap<String, String>();

    for(Player player : team1.getPlayers())
        map.put("player", player.getName()); 
        map.put("score", "0");
        mylist.add(map);

    SimpleAdapter mSchedule = new SimpleAdapter(this, mylist, R.layout.mylistrow,
                new String[] {"player", "score"}, new int[] {R.id.NameCell, R.id.ScoreCell});
    list.setAdapter(mSchedule); 
```

我觉得这与我的 for 循环有关。有人可以帮忙！！提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T11:53:29.253

您只创建了一个 Hashmap 实例，它一次又一次地覆盖所有值，最后一个值仍然存在。因此，在 for 循环中创建一个新实例。

```
 HashMap<String, String> map;

    for(Player player : team1.getPlayers()){
        map = new HashMap<String, String>();
        map.put("player", player.getName()); 
        map.put("score", "0");
        mylist.add(map);
     } 
```

# mysql - 如何确定列是否无符号？

> ID：10664913
> 
> 赞同：17
> 
> 时间：2012-05-19T11:49:03.153
> 
> 标签：mysql, database-metadata

我目前正在尝试列出特定表的所有列并确定每列是否无符号。

这里，我的测试夹具的一个例子：

```
CREATE TABLE ttypes
(
    cbiginteger BIGINT UNSIGNED,
    cinteger INT UNSIGNED,
    csmallinteger SMALLINT UNSIGNED
) ENGINE = InnoDB; 
```

为了列出特定表的所有列，我发现了两种可能性：

```
SHOW FULL COLUMNS
FROM ttypes; 
```

根据[文档](http://dev.mysql.com/doc/refman/5.0/en/show-columns.html)，此查询返回以下字段：字段、类型、空值、默认值、额外和注释。它们都不允许我确定列是否未签名。

之后，我查看[`information_schema.columns`](http://dev.mysql.com/doc/refman/5.0/en/columns-table.html)哪个是`SHOW COLUMNS`查询使用的基表。

```
SELECT ...
FROM information_schema.columns
WHERE table_name = 'ttypes'; 
```

不幸的是，没有一个结果字段允许我确定列是否是无符号的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T13:24:34.760

据我所知，这些属性存储的唯一位置是`COLUMN_TYPE`在`INFORMATION_SCHEMA.COLUMNS`.

这应该包含在`SHOW COLUMNS`（within `Type`）的输出中：

```
mysql> show columns from ttypes;
+---------------+----------------------+------+-----+---------+-------+
| Field         | Type                 | Null | Key | Default | Extra |
+---------------+----------------------+------+-----+---------+-------+
| cbiginteger   | bigint(20) unsigned  | YES  |     | NULL    |       |
| cinteger      | int(10) unsigned     | YES  |     | NULL    |       |
| csmallinteger | smallint(5) unsigned | YES  |     | NULL    |       |
+---------------+----------------------+------+-----+---------+-------+
3 rows in set (0.00 sec) 
```

不幸的是，您必须解析`Type`and find的内容`unsigned`，或者不在`unsigned`那里 - 它不会为已签名的列添加任何内容。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-20T12:45:47.470

试试这个魔法：

```
select COLUMN_NAME,
       COLUMN_TYPE, 
       IS_NULLABLE, 
       IF(COLUMN_TYPE LIKE '%unsigned', 'YES', 'NO') as IS_UNSIGNED 
       from information_schema.COLUMNS where TABLE_NAME='record1' 
```

输出

```
COLUMN_NAME  COLUMN_TYPE       IS_NULLABLE  IS_UNSIGNED
-----------  ----------------  -----------  -----------
id           int(10) unsigned  NO           YES
recordID     varchar(255)      YES          NO 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-19T14:59:37.253

要确定表中所有变量的类型，您可以运行如下查询：

```
select COLUMN_NAME,COLUMN_TYPE from information_schema.COLUMNS where TABLE_NAME='ttypes' and COLUMN_TYPE LIKE '%unsigned%' 
```

之后，您可以使用如下查询轻松确定特定变量（例如 cinterger）的类型：

```
select COLUMN_NAME from information_schema.COLUMNS where TABLE_NAME='ttypes' and COLUMN_TYPE LIKE '%unsigned%' and COLUMN_NAME LIKE 'cinteger' 
```

上面的代码只有在没有符号的情况下才会返回搜索到的变量的名称。

最后，您可以使用 mysql 循环、过程或您喜欢的脚本语言来使用此结果和/或继续搜索其他变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-27T16:28:53.970

以防万一有人偶然发现.net 中的 MySQL 驱动程序，像我一样使用 GetSchema()，这里是未签名信息的可用方式。

```
_connection.GetSchema("Columns") 
```

[![在此处输入图像描述](../Images/5532f7224b1b30957625cb171feb90e4.png)](https://i.stack.imgur.com/5vNti.png)

进而：

[![在此处输入图像描述](../Images/649b41a6692f7f6d865c27157c7f8680.png)](https://i.stack.imgur.com/QF20P.png)

希望这不是完全不适合这个问题，并帮助寻找以编程方式确定标志的人。

# javascript - 将一组重叠范围划分为一组非重叠范围

> ID：10664920
> 
> 赞同：2
> 
> 时间：2012-05-19T11:49:33.357
> 
> 标签：javascript, set, intervals, overlapping, range

我有一组重叠范围：

```
var ranges = [{
    "from": 0,
    "to": 100
}, {
    "from": 50,
    "to": 200
}, {
    "from": 0,
    "to": 100
}, {
    "from": 70,
    "to": 200
}, {
    "from": 90,
    "to": 300
}]; 
```

我需要将其转换为一组非重叠范围，即：

```
var nonOverlapping = splitRanges(ranges);

/*
nonOverlapping = [{
    "from": 0,
    "to": 49
}, {
    "from": 50,
    "to": 69
}, {
    "from": 70,
    "to": 89
}, {
    "from": 90,
    "to": 100
}, {
    "from": 101,
    "to": 200
}, {
    "from": 201,
    "to": 300
}]
*/ 
```

我已经做了一个函数（在 JavaScript 中），但当然你可以看到它的运行速度非常慢，因为它使用了所谓的“幼稚方法”：

```
function splitRanges(ranges) {
    var repeat, length, i, j;
    var rangeA, rangeB, intersection;
    do {
        repeat = false;
        length = ranges.length;
        for (i = 0; i < length; i++) {
            rangeA = ranges[i];
            for (j = i + 1; j < length; j++) {
                rangeB = ranges[j];
                if (isIntersectingRanges(rangeA, rangeB)) {
                    repeat = true;
                    ranges.splice(i, 1);
                    intersection = splitRange(rangeA, rangeB);
                    while (intersection.length) {
                        ranges.push(intersection.shift());
                    }
                }
                if (repeat) break;
            }
            if (repeat) break;
        }
    } while (repeat);
} 
```

有人可以帮我重写它，所以它的行为方式相同并且比天真的方法更快吗？

**编辑：**

算法应该能够跟踪范围 id + 正确处理从 == 到的范围：

```
var ranges = [{
    id: 1,
    from: 0,
    to: 100
}, {
    id: 2,
    from: 30,
    to: 30,
}, {
    id: 3,
    from: 0,
    to: 100
}, {
    id: 4,
    from: 90,
    to: 300
}]; 
```

预期输出为：

```
[{
    "id": 3,
    "from": 90,
    "to": 100
}, {
    "id": 4,
    "from": 90,
    "to": 100
}, {
    "id": 4,
    "from": 101,
    "to": 300
}, {
    "id": 1,
    "from": 0,
    "to": 29
}, {
    "id": 1,
    "from": 90,
    "to": 100
}, {
    "id": 3,
    "from": 0,
    "to": 29
}, {
    "id": 1,
    "from": 30,
    "to": 30
}, {
    "id": 1,
    "from": 31,
    "to": 89
}, {
    "id": 2,
    "from": 30,
    "to": 30
}, {
    "id": 3,
    "from": 30,
    "to": 30
}, {
    "id": 3,
    "from": 31,
    "to": 89
}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:36:32.807

这会为指定的输入生成所需的结果：

```
function splitRanges (intervals) { 'use strict';
  // Create arrays of the from and to values, do not record duplicate values 
  for (var to = [], from = [], n, i = intervals.length; i--;) {
    if (to.indexOf (n = intervals[i].to) < 0)
      to.push (n);
    if (from.indexOf (n = intervals[i].from) < 0)
      from.push (n);
  }

  // Sort both arrays
  to.sort (function (a, b) { return a-b; });
  from.sort (function (a, b) { return a-b; });

  // Create new intervals array
  intervals = [];
  while (to.length)
    intervals.push ({
      from: from.shift (),
      to: from.length == 0 ? (from.push ((n = to.shift ()) + 1), n) :
          from[0] > to[0] ? from[1] - 1 : from[0] - 1
    });

  return intervals;
} 
```

当相同的数字同时作为 from 和 to 值出现时，就会产生“虚假”空值范围。不知道这种情况是否会发生在您的数据中，或者额外的范围是否有问题

# jsf - PrimeFaces 选项列表控件使用

> ID：10664929
> 
> 赞同：0
> 
> 时间：2012-05-19T11:50:33.077
> 
> 标签：jsf, jakarta-ee, jsf-2, primefaces, managed-bean

我在我的项目中使用 PrimeFaces 的 pickList 组件。但问题是永远不会调用动作函数。

```
<p:pickList id="pickList" value="#{pickListBean.names}" var="name"
    itemLabel="#{name}itemValue="#{name}" />
<p:commandButton ajax="false" id="submit" value="Submit" type="submit"
    action="#{pickListBean.performAction}" /> 
```

我的托管 bean 如下所示：

```
@ManagedBean(name="pickListBean")
@SessionScoped
public class PickListBean {
private DualListModel<String> names;
private List<String> nam1;
private List<String> nam2;

public PickListBean() {
    nam1 = new ArrayList<String>();
    nam2 = new ArrayList<String>();

    nam1.add("Ammar");
    nam1.add("Nisar");
    nam1.add("Khalid");
    nam1.add("Haris");
    nam1.add("Yasir");

    names = new DualListModel<String>(nam1, nam2);
}

public DualListModel<Player> getPlayers() {
    return players;
}
public void setPlayers(DualListModel<Player> players) {
    this.players = players;
}

public DualListModel<String> getNames() {
    return names;
}
public void setNames(DualListModel<String> names) {
    this.names = names;
}

public String performAction()
{
    for (Iterator iterator = nam2.iterator(); iterator.hasNext();) {
        String name = (String) iterator.next();
        System.out.print("\t" + name);
    }
    return "";
} 
```

}

我会感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:35:53.273

首先，选择列表和命令按钮是否嵌套在表单中？检查操作是否有效，将 println 退出 for 循环，因为您可能永远不会到达那里

公共字符串执行操作（）{

```
 System.out.println("works"); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:23:54.460

那好吧！所以问题不在于您认为您的操作按钮有效，您想知道如何从双重列表中检索数据，我理解正确吗？如果是这样，那么要获得双重列表中的每个位置，您将必须

```
public void performAction(){
      String sor;
      String tar;
      sor=names.getSource().get(i);
      tar=names.getTarget().get(i);
      System.out.println("works"+sor+tar);

  } 
```

其中 i 是列表中从上侧开始的当前位置数（因此，如果 i=0，您将获得每个列表的最高位置）使用简单的 for 循环，您可以迭代以获取所有条目。此外，如果您需要使用迭代器，我认为您可以使用 names.getSource().iterator() 和 getTarget() 相同。除了迭代器，我尝试了上述解决方案并且它有效，所以我希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T03:05:35.810

要获取选定的值，请使用 names.getTarget() 并获取选择列表。

# html - 使父容器拉伸到绝对定位的子容器的宽度，反之亦然

> ID：10664930
> 
> 赞同：3
> 
> 时间：2012-05-19T11:50:35.820
> 
> 标签：html, css, position, width

我正在为下拉菜单使用一些标记。

标记如下：

```
<div class="select">
    <a href="#" class="anchor menu-active">
        <label>val1</label><span class="arrow"><label></label></span>
    </a>

    <div class="container menu-visible">
        <ul>
            <li>
                <a value="val1" class="item-selected">val1</a>
            </li>
            <li>
                <a value="val2333333333">val2333333333</a>
            </li>
        </ul>
    </div>
</div> 
```

第一个`a`表示菜单项，`container`div 表示子菜单项的列表。

*   子菜单项的宽度是可变的，因为它们是动态生成的。
*   锚中的文本是粗体的，因此在某些情况下，锚的宽度可能大于子菜单列表。

我需要做什么： 和 的宽度`container`必须`anchor`相同。子菜单可能比锚点更宽，反之亦然。另外，宽度不应该人为限制，应该允许随着内容变宽而扩大，无论是.`anchor`还是`container`.

这是我一直在玩的 CSS，但似乎根本无法`anchor`扩展以适应`container`：

```
.container{
    position: absolute;
}

.anchor{
    font-weight: bold;
}

li{
    background: blue;
}

ul{
    display: inline-block;
}

.select{
    background: red;
    display: inline-block;
} 
```

和小提琴：http: [//jsfiddle.net/MxdQS/](http://jsfiddle.net/MxdQS/)

我希望尽可能只使用 CSS，所以请不要使用 javascript 解决方案 :)

还有一个图表可以更好地说明我在说什么： ![在此处输入图像描述](../Images/0db62e9b0bf5ec2a67f0c2a213b7ca48.png)

一些澄清：如果我有 2 个不同宽度的容器并且 1 个是绝对定位的，我怎样才能将它们匹配在一起，以便较短的容器总是扩展到较长容器的宽度？

谁能建议如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:18:58.730

在这里查看**[演示](http://jsfiddle.net/9CUFh/)**

**CSS**

```
.container{
    position: absolute;
    width:150px;
}

.anchor{
    font-weight: bold;
}
ul{
    margin:0;
    padding:0;
}

li{
    background: blue;
    list-style:none;
    margin:0;
    padding:0l
}

.select{
    background: red;
    display: inline-block;
    width:150px;
} 
```

**更新**

检查更新**[的演示](http://jsfiddle.net/QQgA6/)**

# javascript - 如何在javascript中使用系统时区和UTC时间从服务器获取当前本地时间

> ID：10664933
> 
> 赞同：1
> 
> 时间：2012-05-19T11:51:12.973
> 
> 标签：javascript, jquery, datetime, utc

我得到了`Sat, 19 May 2012 11:26:51 +0000`json 响应中的 UTC 时间，并且系统时区为`+0530`. 如何使用两个可用结果将 UTC 时间转换为本地时间？我希望日期为`isoDate`格式，时间为`isoTime`格式。请帮助如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:08:01.417

将 JSON 日期时间转换为日期对象（使用不带 +0000 时区信息的字符串）并添加/减去客户端 timezoneOffset：

```
var received = new Date('Sat, 19 May 2012 11:26:51'),
    clientDate = new Date(new Date().getTimezoneOffset()*-60000 
                  + received.getTime());
//note: -60000 reverses the sign of the timezone offset 
//      clientDate is calculated in milliseconds.
//alternatively you can set [received] directly to the local datetime using:
received.setMinutes(received.getMinutes()+(-(new Date().getTimezoneOffset())); 
```

在我的时区 (GMT+2)`clientDate`现在读取`Sat May 19 2012 13:26:51 GMT+0200`

# java - Sqlite 数据库 onUpgrade() 没有被调用

> ID：10664935
> 
> 赞同：15
> 
> 时间：2012-05-19T11:51:17.693
> 
> 标签：java, android, sqlite, upgrade

我正在开发一个 android 应用程序，我在资产文件夹中使用了现有的 sqlite 数据库。所以我实际上从那个文件夹中复制了数据库。用户还可以保存自己的数据（将任何内容标记为收藏）。

我在市场上上传了一个版本。现在我想在数据库中添加一些新数据并上传一个新版本。如果用户从市场更新应用程序，我想保留用户数据（来自以前的版本）并添加新数据。我做了一些谷歌，发现升级方法应该可以解决问题。但是我正在从代码中更改 DATABASE_VERSION，但是 on upgrade 方法没有被调用。我想知道我错过了什么。这是我的代码：

```
public class DataBaseHelper extends SQLiteOpenHelper {

private static String DB_PATH = "/data/data/riskycoder.login/databases/";
public static String DB_NAME = "datenbank_EN.sqlite";
private SQLiteDatabase myDataBase;
private final Context myContext;
private static final int DATABASE_VERSION = 1;

public DataBaseHelper(Context context) {
    super(context, DB_NAME, null, DATABASE_VERSION);
    this.myContext = context;
}

public void createDataBase() throws IOException {
    boolean dbExist = checkDataBase();
    if (dbExist) {
    } else {
        this.getWritableDatabase();
        try {
            this.close();
            copyDataBase();
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }

}

private boolean checkDataBase() {
    SQLiteDatabase checkDB = null;
    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,SQLiteDatabase.OPEN_READWRITE);
    } catch (SQLiteException e) {
    }
    if (checkDB != null)
        checkDB.close();
    return checkDB != null ? true : false;
}

private void copyDataBase() throws IOException {

    InputStream myInput = myContext.getAssets().open(DB_NAME);
    String outFileName = DB_PATH + DB_NAME;
    OutputStream myOutput = new FileOutputStream(outFileName);
    byte[] buffer = new byte[2048];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }
    myOutput.flush();
    myOutput.close();
    myInput.close();

    //myDataBase.setVersion(DATABASE_VERSION);
}

public void openDataBase() throws SQLException {
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null,SQLiteDatabase.OPEN_READWRITE);
    Log.d("Test", "Database version: " +myDataBase.getVersion());
}

@Override
public synchronized void close() {
    if (myDataBase != null)
        myDataBase.close();
    super.close();
}

@Override
public void onCreate(SQLiteDatabase db) {
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.d("Test", "in onUpgrade. Old is: " + oldVersion + " New is: " + newVersion);

} 
```

}

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-19T12:19:30.783

`onUpgrade()`仅当检测到数据库版本号发生更改时才调用。增加数据库版本如下：

```
private static final int DATABASE_VERSION = 2; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T02:45:00.783

将您的 onUpgrade 更改为以下内容

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

            if(newVersion > oldVersion){                    
                    myContext.deleteDatabase(DB_NAME);
            }
        } 
```

并像下面一样更改您的 createDataBase()，

```
public void createDataBase() throws IOException{

            boolean dbExist = checkDataBase();

            if(dbExist){
                // By calling this method here onUpgrade will be called on a
                // writable database, but only if the version number has been increased

                this.getWritableDatabase();
            }

            dbExist = checkDataBase();

            if(!dbExist){

                //By calling this method an empty database will be created into the                     default system path
                   //of the application so we will be able to overwrite that database with our database.
                this.getReadableDatabase();

                try {

                    copyDataBase();

                } catch (IOException e) {

                    throw new Error("Error copying database");

                }
            }

        } 
```

最后增加您的数据库版本并再次运行它。在您调用或类似功能`onUpgrade`之前不会被调用。`getReadableDatabase()`

希望这可以帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T12:14:27.337

试试这个（增加 DATABASE_VERSION）& onUpdate() 将被调用：

```
private static final int DATABASE_VERSION = 2; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-19T12:19:49.317

假设您确实更改了 DATABASE_VERSION，您仍然必须将代码放入 onUpgrade 中才能实现。这并不神奇，你必须告诉它该做什么。

在您的情况下，您需要：

1）复制旧数据库（给它一个新名称）
2）复制到新数据库中
3）从旧数据库中读取数据
4）将任何差异复制到新数据库中
5）删除旧数据库

**编辑**

假设您将数据库放在 assets 文件夹中，您将复制它以供使用，如下所示：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // First copy old db
    InputStream bakInput = getActivity().getAssets().open(dbname);
    String bakFileName = getActivity().getAssets() + "YourDB.old";
    OutputStream bakOutput = new FileOutputStream(bakFileName);
    byte[] buffer = new byte[1024];
    int length;
    while ((length = bakInput.read(buffer)) > 0) {
        bakOutput.write(buffer, 0, length);
    }
    myOutput.flush();
    myOutput.close();
    myInput.close();

    // delete the old db
    File delDB = new File(getActivity().getAssets() + "YourDB"); 
    boolean deleted = file.delete(); 

    // Copy in the new db
    InputStream myInput = getActivity().getAssets().open("YourDB");
    String outFileName = MAIN_DB_PATH + dbname;
    OutputStream myOutput = new FileOutputStream(outFileName);
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }
    myOutput.flush();
    myOutput.close();
    myInput.close();

    // add code here to get changes user has made to db and move them to updated db

    // delete the old db copy
    File delDB = new File(getActivity().getAssets() + "YourDB.old"); 
    boolean deleted = file.delete(); 
} 
```

# iphone - 如何只删除一节中的行

> ID：10664936
> 
> 赞同：4
> 
> 时间：2012-05-19T11:51:21.623
> 
> 标签：iphone, objective-c, ios, ipad

我创建了一个包含 2 个部分的表格，我希望应用程序在按下编辑按钮时仅在第一部分而不是第二部分显示删除按钮，我编写了以下代码

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (indexPath.section == 0) {
Book_own *temp= (Book_own *)[self.books objectAtIndex:indexPath.row];

if (editingStyle == UITableViewCellEditingStyleDelete) {
    // Delete the row from the data source

    [books removeObjectAtIndex:indexPath.row];

    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

}

else if (editingStyle == UITableViewCellEditingStyleInsert) {
    // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
}  
}
} 
```

但是当我按下编辑按钮时，它会在两个部分中显示删除按钮，我怎样才能防止这种情况并在第一部分中进行删除？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:56:56.367

'UITableViewCellEditingStyleNone' 可以为您已经实现的委托中的特定部分设置。只需返回它。

您可以使用以下代码实现它：-

在 cellForRowAtIndexPath 中：-

```
if(indexPath.section==0)
{
cell.editing=NO;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T11:58:53.273

`dataSource`可以实现`tableView:canEditRowAtIndexPath:`返回 YES 或 NO 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T12:00:11.407

试试这个...

```
-(UITableViewCellEditingStyle) tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {

        if(indexPath.section == yourVariable) return UITableViewCellEditingStyleDelete;

        else return UITableViewCellEditingStyleNone;

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T13:59:15.493

您可以检查该特定部分： if(indexPath.section == editSection){

返回 UITableViewCellEditingStyleDelete；

}

```
 else{ 
```

返回 UITableViewCellEditingStyleNone;

}

# c# - 如何使用 LINQ 从集合中添加和删除记录

> ID：10664937
> 
> 赞同：1
> 
> 时间：2012-05-19T11:51:50.673
> 
> 标签：c#, linq, collections

我有以下名为 City 的类，其中包含另一个名为 Detail 的类。

```
 public class City
    {
        public override string PartitionKey { get; set; }
        public override string RowKey { get; set; }
        public string Title { get; set; }

        public class Detail {
            public Detail() {
                Text = new HtmlText();
            }
            public HtmlText Text { get; set; }
        }

} 
```

公共类 HtmlText {

```
public HtmlText()
{
    TextWithHtml = String.Empty;
}
[AllowHtml]
public string TextWithHtml { get; set; } 
```

}

在我的代码中，我使用以下内容创建详细信息列表。后来我填充了一些细节，但不是全部。

```
IList<City.Detail> Details = Enumerable.Range(1,6).Select(x => new City.Detail()).ToList(); 
```

我需要能够做两件事。有人可以告诉我最好的方法来做到这一点。希望使用 LINQ。

*   a) 从具有空文本字段的详细信息中删除任何 CityDetails？

*   b) 添加到详细信息以使其具有六个 City.Detail 记录，如果它少于六个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:09:12.600

您的第一个问题可以通过使用此“查询”来解决：

```
Details = Details.Where(cityDetail=>cityDetail.Text != null && !string.IsNullOrEmpty(cityDetail.Text.TextWithHtml)).ToList(); 
```

这将覆盖您的详细信息 var 并使用新列表，仅包括非空项目。

至于您的第二个问题-您并不清楚您想做什么，您需要向我们提供更多详细信息/解释

**编辑：**
IEnumerable(T) 表示只读集合，这意味着它不支持按定义删除项目。当然你可以添加你自己的 RemoveWhere 扩展方法，但它本质上和我在这里做的一样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T12:23:39.343

@YavgenyP 很好地回答了您的第一个问题。对于第二个问题，我的建议如下：

```
while (Details.Count < 6)
    Details.Add(new City.Detail()); 
```

尝试使用 LINQ 执行此操作会更糟（长度、可读性、速度）：

```
if (Details.Count < 6)
    Enumerable.Range(1, 6 - Details.Count).Select(x =>
    {
        var d = new City.Detail();
        Details.Add(d);
        return d;
    }).ToArray(); 
```

虽然我最喜欢他的解决方案，但这里有一些替代方法可以回答第一个问题：

```
foreach (var toRemove in Details.Where(cityDetail => cityDetail.Text == null || string.IsNullOrEmpty(cityDetail.Text.TextWithHtml)))
    Details.Remove(toRemove);

foreach (var toRemove in (from cityDetail in Details
                              where cityDetail.Text == null || string.IsNullOrEmpty(cityDetail.Text.TextWithHtml)
                              select cityDetail))
    Details.Remove(toRemove);

(from cityDetail in Details
where cityDetail.Text == null || string.IsNullOrEmpty(cityDetail.Text.TextWithHtml)
select Details.Remove(cityDetail)).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T14:38:03.697

一种）

```
Details = 
   Details
   .Except(Details
       .Where(d => string.IsNullOrEmpty(d.Text.TextWithHtml)))
   .ToList(); 
```

b)

```
 Details = 
    Details
      .Concat(
        Enumerable
        .Range(1, 6 - Details.Count())
        .Select(x => new City.Detail()))
      .ToList(); 
```

# php - jQuery Tokeninput 无法识别单词的首字母

> ID：10664938
> 
> 赞同：1
> 
> 时间：2012-05-19T11:51:52.437
> 
> 标签：php, jquery, jquery-tokeninput

我正在使用来自[http://loopj.com/jquery-tokeninput/的 jQuery Tokeninput 自动完成插件](http://loopj.com/jquery-tokeninput/)

我已经将它构建到我的应用程序中，并且我正在使用服务器端脚本来获取所有结果。当我使用 Tokeninput-Demo 中的 php-script 尝试它时，它工作正常。但是当我使用我的 php 脚本作为源时，它不能识别单词的第一个字母。例如，如果我正在搜索“Marc Fisher”并输入“Marc”，它什么也找不到，但是当我输入“arc”时，它就可以工作了。姓氏也是如此。

这是我的 php 脚本：

```
 $search             = $_GET['q'];
    $friends            = array(
    0   => array('name' => 'Marc Fisher', 'id' => '111'),
    1   => array('name' => 'Thomas Mann', 'id' => '222'),
    2   => array('name' => 'Jon Applebaum', 'id' => '333')
    );
    $searched_friends   = array();
    foreach ($friends as $friend) {
        $check          = strpos($friend['name'], $search);
        if ($check !== false) {
            array_push($searched_friends, $friend);
        }
    }
    echo(json_encode($searched_friends)); 
```

奇怪的是，如果我直接在 GET 的 URL 中输入“Mar”，那么它会起作用并输出：

```
[{"name":"Marc Fisher"}] 
```

我到处搜索并尝试了我能想到的一切 - 但无济于事。你知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:26:31.293

我让它工作，但我不知道为什么。基本上，我用 preg_match 切换了 strpos。现在它起作用了。

# hadoop - Hadoop 和 HBase

> ID：10664939
> 
> 赞同：10
> 
> 时间：2012-05-19T11:52:08.940
> 
> 标签：hadoop, hbase

嗨，我是 hbase 和 hadoop 的新手。我找不到为什么我们将 hadoop 与 hbase 一起使用。我知道 hadoop 是一个文件系统，但我读到我们可以在没有 hadoop 的情况下使用 hbase，那么我们为什么要使用 hadoop？
谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T13:54:19.653

`Hadoop`是一个允许我们以并行方式跨机器集群**存储**和**处理**大量数据的平台。它是一个批处理系统，我们不必担心数据存储或处理的内部结构。

它不仅提供**HDFS** （用于可靠数据存储的**分布式文件系统**），还提供处理框架 MapReduce，允许以并行方式跨机器集群处理大量数据集。

Hadoop 的最大优势之一是它提供了数据局部性。我的意思是，移动大量数据的成本很高。因此 Hadoop 将计算转移到数据上。Hdfs 和 MapReduce 都经过高度优化，可以处理非常大的数据。

HDFS 通过数据复制确保高可用性和故障转移，因此如果您的集群中的任何一台机器由于某些灾难而停机，您的数据仍然是安全且可用的。

另一方面，**HBase**是一个`NoSQL database`.我们可以将其视为分布式、可扩展的大数据存储。它用于克服 Hdfs 的“无法随机读写”等陷阱。

**如果我们需要对我们的数据进行随机、实时的读/写访问， Hbase**是一个合适的选择。它以 Google 的“BigTable”为模型，而 Hdfs 则以 GFS（Google 文件系统）为模型。

不必仅在顶级 Hdfs 上使用 Hbase。我们可以将 Hbase 与“S3”或“EBS”等其他持久存储一起使用。如果您想详细了解 Hadoop 和 Hbase，您可以访问各自的主页 -“hadoop.apache.org”和“hbase.apache.org”。

如果想深入学习《Hadoop.The.Definitive.Guide》和《HBase.The.Definitive.Guide》，还可以翻阅以下书籍。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-19T11:59:43.600

名为HDFS的Hadoop分布式文件系统为我们提供了多个作业。实际上，我们不能说 Hadoop 只是一个文件系统，但它也为我们提供了资源，所以我们可以通过提供一个主从架构来执行分布式处理，我们可以从中轻松地管理我们的数据。

至于 HBase 的问题，我简单地告诉你，如果不使用 HDFS，你就无法远程连接到 HBase，因为 HBase 不能创建集群并且它有自己的本地文件系统。

[我认为您应该查看此链接以了解hadoop](http://www.slideshare.net/cloudera/tokyo-nosqlslidesonly)的良好介绍！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-11T22:28:11.787

我已经说过的话几乎没有什么可补充的。Hadoop 是分布式文件系统 (HDFS) 和 MapReduce（分布式计算框架）。HBase 是建立在 Hadoop 之上的键值数据存储（意思是在 HDFS 之上）。

使用 HBase 而不是普通的 Hadoop 的原因主要是为了做随机读写。如果您使用的是普通 Hadoop，则无论何时要运行 MapReduce 作业，都必须读取整个数据集。

如果我正在处理数千个小文件，我还发现将数据导入 HBase 很有用。

我向您推荐 Todd Lipcon (Cloudera) 的演讲：“Apache HBase：介绍” [http://www.slideshare.net/cloudera/chicago-data-summit-apache-hbase-an-introduction](http://www.slideshare.net/cloudera/chicago-data-summit-apache-hbase-an-introduction)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-19T12:04:37.777

HBase 可以在没有 Hadoop 的情况下使用。以独立模式运行 HBase 将使用本地文件系统。

Hadoop 只是一个分布式文件系统，具有冗余性并且能够扩展到非常大的大小。无法在 Hadoop 上运行任意数据库的原因是 HDFS 是仅附加文件系统，不符合 POSIX。大多数 SQL 数据库都需要能够查找和修改现有文件。

HBase 的设计考虑了 HDFS 的限制。CouchDB 理论上可以移植到 HDFS 上运行，因为它也使用仅附加文件格式。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-19T14:06:37.423

我会尝试以更严格的顺序排列条款。
Hadoop 是一组集成技术。最值得注意的部分是：
HDFS - 专为海量数据处理而构建的分布式文件系统
MapReduce - 实现分布式文件系统的 Map Reduce 范例的框架，其中 HDFS - 其中之一。它可以在其他 DFS 上运行 - 例如 Amazon S3。
HBase - 建立在 DFS 之上的分布式排序键值映射。据我所知，HDFS 只是与 HBase 兼容的 DFS 实现。HBase 需要附加功能来写入其预写日志。例如，亚马逊 s3 上的 DFS 不支持它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-08T21:58:27.837

它的唯一目的是分发和**读取速度**。在 Hbase 中发生的情况是数据会自动“分片”（分区），由您的行键分配驱动。选择智能行键很重要，因为它们是二进制排序的。请记住，数据的“分片”子集被拆分到称为区域服务器的东西上。集群中的每台机器上都可以有多个区域服务器。如果您不将数据分布在多节点 hadoop 集群上，您将无法利用多台机器的处理能力并行搜索它们各自的数据子集，从而将结果返回给您的客户端查询应用程序。希望这可以帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-19T23:21:11.400

您应该记住的一件事 - HBase 尚不支持 ACID 属性。HBase 确实支持 ROW LEVEL 上的原子性。您应该尝试阅读 MVCC 实现。

另外，阅读 RDBMS 中的 LSM 与 B+ 树。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-12-15T05:36:28.757

Hadoop 由 2 个主要组件组成。

1.  高清文件系统。
2.  地图减少。

两者的解释如下，

1.  HDFS 是一种文件系统，它通过将数据分布在一组节点上来提供具有高容错性（使用复制）的可靠存储。它由 2 个组件组成，NameNode（存储有关文件系统的元数据的位置。）和 datanodes（这些可以是多个。它们是存储实际分布式数据的位置。）

2.  Map-Reduce 是一组 2 种类型的 java 守护进程，称为“Job-Tracker”和“Task-Tracker”。通常，Job-Tracker 守护进程管理要执行的作业，而 Task-tracker 守护进程是在数据分布的数据节点之上运行的守护进程，以便它们可以计算用户提供的程序执行逻辑特定于相应数据节点中的数据。

因此，总而言之，HDFS 是存储组件，Map-Reduce 是执行组件。

另一方面，HBase 再次由 2 个组件组成，

1.  HMaster-再次由元数据组成。

2.  RegionServers - 这些是运行在 HDFS 集群中数据节点之上的另一组守护进程，用于在 HDFS 集群中存储和计算与数据库相关的数据（我们将其存储在 HDFS 中，以便我们利用 HDFS 的核心功能即数据复制和容错）。

Map-Reduce 守护进程和 Hbase-RegionServer 守护进程在 HDFS 之上运行的区别在于，Map-Reduce 守护进程只执行 Map-Reduce（聚合）类型的作业，而 Hbase-RegionServer 守护进程执行与数据库相关的功能，例如读、写等

# java - ListFragment如何获取listView？

> ID：10664940
> 
> 赞同：15
> 
> 时间：2012-05-19T11:52:30.767
> 
> 标签：java, android

我正在将我的应用程序从 AsyncTasks 移植到 Fragments。

但是如何访问我的片段中的 listView (id: list) 元素？

```
class MyFragment extends ListFragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.list_fragment, container, false);
        ListView listView = getListView(); //EX: 
        listView.setTextFilterEnabled(true);
        registerForContextMenu(listView);
        return v;
    }
} 
```

xml:

```
 <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </ListView> 
```

前任：

```
Caused by: java.lang.IllegalStateException: Content view not yet created 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-19T11:58:31.907

正如`onCreateView`医生留下的：

```
creates and returns the view hierarchy associated with the fragment 
```

因此，由于该方法没有返回，您将无法访问`ListView`through `getListView()`。`onActivityCreated`您可以在回调中获取有效的引用。或者你可以尝试使用`v.findViewById(android.R.id.list)`如果在`ListView`里面声明`list_fragment.xml`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-01T12:50:47.490

从视图中获取列表视图，您越来越早了。

```
View view = inflater.inflate(android.R.layout.list_content, null);
    ListView ls = (ListView) view.findViewById(android.R.id.list);
    // do whatever you want to with list. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-23T17:37:22.003

这个问题最简单和更可靠的解决方案是覆盖 onActivityCreated(); 并在那里进行列表操作。

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    ListView listView = getListView(); //EX: 
    listView.setTextFilterEnabled(true);
    registerForContextMenu(listView);
    super.onActivityCreated(savedInstanceState);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-02T20:29:04.893

我可以通过 OnViewCreated 方法访问 ListView。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-02T18:56:23.343

```
ListFragment listFrag = new ListFragment(){
        @Override
        public void onViewCreated(View view, Bundle savedInstanceState) {
            super.onViewCreated(view, savedInstanceState);
            ListView list = getListView();
            // DO THINGS WITH LIST
        }
    }; 
```

# google-chrome - @font-face 在 IE 和 Firefox 中正确渲染，但在 Chrome 中不正确

> ID：10664944
> 
> 赞同：2
> 
> 时间：2012-05-19T11:53:16.497
> 
> 标签：google-chrome, css, webkit, font-face

我的自定义字体过去在所有浏览器中看起来都很完美，但在最近的 webkit 更新之后，它现在在 Chrome 和 Safari 中呈现非常粗体，但在 Firefox 和 IE 中看起来很好。

这是我的CSS：

```
@font-face  {
    font-family: "KlavikaBasicRegular";
    src: url("i/klavikabasic-regular-webfont.eot");
    src: url("i/klavikabasic-regular-webfont.eot?#iefix") format("embedded-opentype"),
         url("i/klavikabasic-regular-webfont.woff") format("woff"),
         url("i/klavikabasic-regular-webfont.otf") format("opentype"),
         url("i/klavikabasic-regular-webfont.svg#KlavikaBasicRegular") format("svg");
    font-style:normal;
    font-weight:400;
}
.block_header {
    font-family:"KlavikaBasicRegular",sans-serif;
    text-transform: uppercase;
    font-weight: normal;
    font-size: 16px;
    color: #5b5b5b;
    line-height: 18px;
    margin: 0;
    padding: 7px 10px 5px 20px;
} 
```

和 HTML：

```
<h3 class="block_header">MY headline</h3> 
```

![字体-face-firefox-chrome](../Images/2bcc762acd5c8e8e2032c039fa7a5f20.png)

其他人注意到类似的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:56:29.180

我个人没有...

我会说您很可能是正确的，并且各种浏览器的呈现方式存在差异..

我看你已经有`weight:normal`...

尝试`-webkit-font-smoothing: antialiased;`

见@http: [//ilikekillnerds.com/2010/12/a-solution-to-stop-font-face-fonts-looking-bold-on-mac-browsers/](http://ilikekillnerds.com/2010/12/a-solution-to-stop-font-face-fonts-looking-bold-on-mac-browsers/)

# visual-studio - 德尔福安装“破碎”的视觉工作室

> ID：10664950
> 
> 赞同：3
> 
> 时间：2012-05-19T11:53:51.170
> 
> 标签：visual-studio, delphi

最近我犯了一个可怕的错误，我在我的笔记本电脑上安装了 delphi 6，当被问到关于调试器的那个很长的问题时，我选择了是......结果我的 Visual Studio 不再工作了。

我记得解决这个问题非常简单，可能是注册表设置更改。我不记得了。

我尝试了很多方法来恢复这种状态，因为我不再需要 delphi 但确实需要 VS，如果我真的不需要的话，我宁愿不必再次重置我的所有开发环境。

我试过： - 恢复到一个恢复点（在安装 Delphi 之前创建一个） - VS 在许多状态下（devenv.exe /reset ， devenv.exe /setup ...等）

在我的事件查看器中，我可以看到：

```
Faulting application name: devenv.exe, version: 10.0.40219.1, time stamp: 0x4d5f2a73
Faulting module name: clr.dll, version: 4.0.30319.239, time stamp: 0x4e181a6d
Exception code: 0xc0000005
Fault offset: 0x00024e38
Faulting process id: 0x1468
Faulting application start time: 0x01cd35b33ad2193d
Faulting application path: C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe
Faulting module path: C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Report Id: 7beb5eac-a1a6-11e1-93cc-00262256e631 
```

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T12:06:40.260

我认为这个长问题是关于即时调试器的。当应用程序崩溃时，将调用 JIT 调试器。JIT 调试器设置保存在[这些](https://stackoverflow.com/questions/6758741/how-can-i-disable-delphi-as-just-in-time-debugger)位置的注册表中。

我不相信这个设置是你的 Visual Studio 崩溃的原因。我在同一台机器上安装了几个版本的 Delphi 和 Visual Studio，没有问题。并且此设置仅在应用程序在调试器之外崩溃时产生影响。

# mysql - 在 MySQL 语句中对分组行进行排序

> ID：10664953
> 
> 赞同：0
> 
> 时间：2012-05-19T11:54:32.107
> 
> 标签：mysql, join, group-by, sql-order-by

我有一个具有以下结构的 MySQL 数据库：

**表`customers`：**

*   标识（整数）
*   名称（字符串）
*   ...

**表`orders`：**

*   标识（整数）
*   客户 ID（整数）
*   timestamp_unix (int)
*   标题

现在我想选择所有客户以及他们的最新订单。我尝试了以下语句：

```
SELECT a.id, a.name, b.timestamp_unix, b.title FROM customers AS a JOIN orders AS b ON a.id = b.customerID GROUP BY a.id 
```

这很好用，除了我没有得到*最新*的订单（及其标题），而是第一个作为第一个插入数据库的订单。

那么我怎样才能得到最新的订单（最高`id`和最高`timestamp_unix`）？仅对于时间戳，我可以使用`MAX(b.timestamp_unix)`但如何获得匹配`b.title`？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T15:40:41.890

你可以试试这个，我已经测试过了。

`SELECT a.name as 'Customer Name', b.title as 'Order Title' FROM customers a, orders b where a.id=b.customerID AND b.timestamp_unix=(Select max(c.timestamp_unix) from orders c where c.customerID=a.id) GROUP BY a.id`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T12:03:47.483

```
SELECT a.id, a.name, b.timestamp_unix, b.title 
FROM customers AS a 
JOIN (  SELECT customerID, timestamp_unix, title
        FROM orders
        ORDER BY timestamp_unix DESC) AS b
ON a.id = b.customerID 
GROUP BY a.id
ORDER BY timestamp_unix DESC 
```

[阅读此问题以获取更多信息](https://stackoverflow.com/questions/10550386/group-by-user-and-show-latest-in-mysql-not-working/10550415#answer-10551071)

正如在提到的问题中提到的，至少有两种方法可以解决这个问题。选择您认为最安全和最简单的一种。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T12:04:26.920

你应该做一个子选择，做你的加入，但把分组拿走，然后把它变成你加入的东西

```
 Left join (select orderid from orders where customerid = A.customerid order by orderdate desc limit 1) as lastorder 
```

我想更清楚，但我在我的手机上哈哈

我现在在我的电脑上，这是一个 MSSQL 小提琴来展示它 - 只需转换为 Mysql （语法应该相同，除了 TOP 1 应该是最后的 LIMIT 1 ）

[http://sqlfiddle.com/#!3/29a3c/13](http://sqlfiddle.com/#!3/29a3c/13)

# objective-c - iOS中的fopen问题

> ID：10664955
> 
> 赞同：8
> 
> 时间：2012-05-19T11:54:39.860
> 
> 标签：objective-c, ios, c, fopen

`No such file or directory`出于某种原因，即使我已将路径转换为文档路径，fopen 也会出现错误。

```
NSString *docsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
NSString *filePath = [docsPath stringByAppendingPathComponent:filename]; 
```

我使用该方法传递 NSString`UTF8String`并且仅在读取模式下打开

```
if ((fh=fopen(filename, "r+b")) == NULL){
    perror("fopen");
    return -1;
} 
```

尝试打开文件名时打印出以下完整路径（我删除了应用程序实际目录名称的确切值）

> /var/mobile/Applications/#####/Documents/testImages.pak

为什么 fopen 检测不到文件？我已将其添加到目标中，甚至尝试将文件检查器中的位置设置更改为`Relative to Group`和`Relative to Project`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T06:02:50.687

您必须使用以下方法将 NSString 转换为 char*，否则它将无法正确映射到文件系统。

```
 char const *path_cstr = [[NSFileManager defaultManager] fileSystemRepresentationWithPath:pathString]; 
```

现在您可以直接在 fopen() 中使用它。

# iphone - 在 NSString 中将 NSData 显示为二进制

> ID：10664958
> 
> 赞同：6
> 
> 时间：2012-05-19T11:55:33.283
> 
> 标签：iphone, ios, nsstring, binary, nsdata

我在资源文件夹中有一个二进制文件（file.bin），我想读取它并将其显示为二进制文件。这个想法是将二进制信息放入一个数组中，但是，起初，我试图在 UILabel 中显示它，如下所示：

` NSData *databuffer; NSString *字符串数据；

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"file" ofType:@"bin"];  
NSData *myData = [NSData dataWithContentsOfFile:filePath];

if (myData) {  
        stringdata = [NSString stringWithFormat:@"%@",[myData description]]; 
        labelfile.text = stringdata;
} 
```

`

但它以十六进制显示数据。如何以二进制形式将其放入 NSMutableArray 中？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T13:07:12.093

我不知道是否有任何本机可以做到这一点，但我可以提出一个解决方案。你为什么不做你自己的功能来进行转换。这是我的例子：

在您获得十六进制值的地方：

```
NSString *str = @"Af01";
NSMutableString *binStr = [[NSMutableString alloc] init];

for(NSUInteger i=0; i<[str length]; i++)
{
    [binStr appendString:[self hexToBinary:[str characterAtIndex:i]]];
}
NSLog(@"Bin: %@", binStr); 
```

变通功能：

```
- (NSString *) hexToBinary:(unichar)myChar
{
    switch(myChar)
    {
        case '0': return @"0000";
        case '1': return @"0001";
        case '2': return @"0010";
        case '3': return @"0011";
        case '4': return @"0100";
        case '5': return @"0101";
        case '6': return @"0110";
        case '7': return @"0111";
        case '8': return @"1000";
        case '9': return @"1001";
        case 'a':
        case 'A': return @"1010";
        case 'b':
        case 'B': return @"1011";
        case 'c':
        case 'C': return @"1100";
        case 'd':
        case 'D': return @"1101";
        case 'e':
        case 'E': return @"1110";
        case 'f':
        case 'F': return @"1111";
    }
    return @"-1"; //means something went wrong, shouldn't reach here!
} 
```

希望这可以帮助！

# jquery - jVectorMap 标签不可见，为什么？

> ID：10664969
> 
> 赞同：7
> 
> 时间：2012-05-19T11:57:34.757
> 
> 标签：jquery, jvectormap

我在网页上创建了一个带有触发器的滑块面板。在这个面板上，我放置了 jVectorMap。它工作正常（当我打开滑块面板时地图可见）只是国家标签不可见。有人知道为什么吗？

代码部分：

```
 $(".trigger").click(function(){
                $(".panel").toggle("fast");
                $(this).toggleClass("active");
                return false;
    });

        colors = {};
        colors['it'] = '#76ced9';
        $('#map').vectorMap({
            map: 'europe_en',
            //map: 'jquery-jvectormap-europe-en',
            onLabelShow: function(event, label, code){
                if (code == 'it') {
                    event.preventDefault();
                } else if (code == 'it') {
                    label.text('bla bla bal');
                }
            },              

            colors: colors,
            hoverOpacity: 0.7, // opacity for :hover
            hoverColor: false
        }); 
```

这是面板的创建方式（我删除了一些部分，以便您可以查看代码）：

```
<div class="panel" style="z-index:10;">
    <h3>Our Destinations</h3>
    <div id="map" style="width: 600px; height: 550px;"></div> 
```

```
<a class="trigger" href="#">Map</a> 
```

我在想，也许因为面板在 html 上，所以标签可能不可见，因为它在后面，但我不知道在哪里放置 z-index:10; 但问题可能是其他问题。如果你有敏锐的眼光和头脑，你可能会给我一个很好的建议。谢谢，K

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-24T03:52:46.363

您可以`z-index=11`在*jquery-jvectormap-1.2.2.css*中设置如下：

```
.jvectormap-label {
    position: absolute;
    display: none;
    border: solid 1px #CDCDCD;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
    background: #292929;
    color: white;
    font-family: sans-serif, Verdana;
    font-size: smaller;
    padding: 3px;
    z-index:11;
 } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-23T16:35:54.883

您是否在此过程中丢失了 jquery.vector-map.css 样式表？这将导致标签和缩放按钮消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-28T11:45:44.627

我在使用滑块和 jvectormap 的组合时遇到了同样的问题。但是，我不得不更改 .jvectormap-tip 的 z-index，而不是更改 .jvectormap-label 的 z-index。

# highcharts - highcharts 图表不显示 y 轴值

> ID：10664978
> 
> 赞同：1
> 
> 时间：2012-05-19T11:59:04.910
> 
> 标签：highcharts

该图不显示 y 轴值。谁能帮我解决这个问题？谢谢。

如果我将值放入`prueba`系列数据中，则一切正常，`prueba`数组和`dinero`数组显示正确。

谢谢，

```
$.getJSON('http://localhost/jquery/grafica4.php', function(data) {

    var dinero = [];
    var categories = [];
    var prueba = [79, 71, 66,44,42,38,32,10];

    $.each(data, function(index, value) {
        categories.push(data[index].producto_id);
        dinero.push(data[index].cantidad);
        alert("hola");
    });
    alert(dinero);
    alert(prueba);

    chart4 = new Highcharts.Chart({
        chart: {
            renderTo: 'container3',
            type: 'column'
        },
        title: {
            text: 'Productos más vendidos'
        },
        xAxis: {
            categories: categories
        },
        yAxis: {
            min: 0,
            title:
            text: 'Cantidad'
        },
        labels: {
            formatter: function() {
                return this.value; // clean, unformatted
            }
        }
    },
    legend: {
        layout: 'vertical',
        backgroundColor: '#FFFFFF',
        align: 'left',
        verticalAlign: 'top',
        x: 100,
        y: 70,
        floating: true,
        shadow: true
    },
    tooltip: {
        formatter: function() {
            return ''+
            '<b>'+'Producto:'+this.x +'</b>'+'<br/>'+ this.y+ ' unidades';
        }
    },
    plotOptions: {
        column: {
            pointPadding: 0.3,
            borderWidth: 0
        }
    },
    series: [{
        name: 'Cantidad',
        data: dinero
    }],
    exporting: {
        filename: 'Facturacion-de-empleados'
    }
});
}); 
```

# java - 包括 Javax 和 com.sun.j3d.utils 库

> ID：10664982
> 
> 赞同：1
> 
> 时间：2012-05-19T11:59:27.493
> 
> 标签：java, sun

我在哪里可以获得 javax 库和 com.sun.j3d.utils 库，这样我就可以运行使用它的代码：

```
import javax.vecmath.*;
import com.sun.j3d.utils.behaviors.mouse.*; 
```

我可以从哪里下载它们？它包含在 JDE 中吗？

# xml - 将参数从jsp传递到xsl

> ID：10664983
> 
> 赞同：1
> 
> 时间：2012-05-19T11:59:39.363
> 
> 标签：xml, jsp, xslt

我下面的代码似乎合乎逻辑，但我不知道为什么排序不适用于错误“**变量或参数'排序'未定义。”** “？我怀疑在 xsl 中声明参数有问题。谁能指出我的错误？谢谢

传递参数的java代码

```
String sort = "rating";
transformer.setParameter("sort", sort); /It will control the sort in xsl 
```

xml文件

```
 <?xml version="1.0" ?>

<cd>
  <title>A Funk Odyssey</title>
  <artist>Jamiroquai</artist>

  <tracklist>
    <track id="1">
      <title>Feels So Good</title>
      <time>4:38</time>
      <rating>2</rating>
    </track>

    <track id="2">
      <title>Little L</title>
      <time>4:10</time>
      <rating>5</rating>
    </track>

    <track id="3">
      <title>You Give Me Something</title>
      <time>5:02</time>
      <rating>3</rating>
    </track>

    <track id="4">
      <title>Corner of the Earth</title>
      <time>3:57</time>
      <rating>1</rating>
    </track>
  </tracklist>

</cd> 
```

这是我的 xsl

```
 <?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" encoding="UTF-8" omit-xml-declaration="yes"/>
    <xsl:param name="sort" select="title"/>
    <xsl:template match="/">
        <table border="1">
            <thead>
                <tr>
                    <th><a href="#">Title</a></th>
                    <th><a href="#">Time</a></th>
                    <th><a href="#">Rating</a></th>
                </tr>
            </thead>
            <tbody>
                <xsl:for-each select="cd/tracklist/track">
                    <xsl:sort select="$sort"/>
                    <tr>
                        <td><xsl:value-of select="title" /></td>
                        <td><xsl:value-of select="time" /></td>
                        <td><xsl:value-of select="rating" /></td>
                    </tr>
                </xsl:for-each>
            </tbody>
        </table>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T12:08:52.940

在您的`xsl:param`声明中，您尝试默认在评估`$sort`时未定义。`xsl:param`它看起来确实像是对自身的引用。

如果您不需要默认值，则只需将参数声明更改为：

```
<xsl:param name="sort"/> 
```

或默认为字符串值：

```
<xsl:param name="sort" select="'title'"/> 
```

或者

```
<xsl:param name="sort">title</xsl:param> 
```

也就是说，我们只解决了参数声明问题。现在开始排序。`xsl:sort`需要一个[表达式](http://www.w3.org/TR/xslt#dt-expression)，它不会像您期望的那样将字符串值转换为 XPath 。

这是**一个解决方案**：[在`<xsl:sort select=""/>`](https://stackoverflow.com/questions/2328896/using-variables-in-xslsort-select).

你基本上会做类似的事情：

```
<xsl:sort select="*[name() = $sort]"/> 
```

# c# - 如何将结果从 C# 应用程序发送到 Django Web 服务？

> ID：10664986
> 
> 赞同：0
> 
> 时间：2012-05-19T12:00:00.527
> 
> 标签：c#, django

我有一个 C# 控制台应用程序，将其结果本地存储在 CSV 文件中。这个结果文件的大小从几个字节到大约 0.5MB 不等。

我想为 C# 应用程序添加将结果发送到 Django Web 应用程序的功能；Django 应用程序会将结果存储在数据库中。我不确定如何将数据从 C# 应用程序获取到 Django Web 应用程序。我应该为每一端查看哪些 C#/Django 库和技术？网络上是否有任何资源描述了如何进行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:28:04.177

使用[sweetpie](http://tastypieapi.org/)为您的 django 应用程序创建一个 API，然后`POST`从您的 C# 应用程序中调用它。

# css - CSS 剪辑 - 精灵图像

> ID：10664989
> 
> 赞同：1
> 
> 时间：2012-05-19T12:00:30.503
> 
> 标签：css, clip

我有一个精灵图像，我想在多个跨度元素中显示 128x89px 的部分。

在示例中，我将左剪辑设置为 30px 以突出显示问题，通常这将是 128px 的倍数。当我将左剪辑设置为 30 像素时，似乎添加了 30 像素的左边距。当然，我不需要添加负左边距来纠正它？

我完全是新手，`clip`因为我从来没有真正需要使用它，但现在有了。我对它的理解就像一张纸剪成正方形一样。调整剪辑值将移动纸张，从而改变查看的图像。

请帮忙。

**JSFiddle：http:** [//jsfiddle.net/VgjXr/](http://jsfiddle.net/VgjXr/)

**CSS：**

```
a {  
    border: 1px solid #000;  
    height: 89px;  
    width: 128px;  
    display: block;  
}
span.image {  
    background-image: url('http://i1269.photobucket.com/albums/jj591/mark1979smith/splice.jpg');  
    position: absolute;  
    display: block;  
    width: 128px;  
    height: 89px;  
    clip: rect(0px,158px,89px,30px);  
    clear: both;  
} 
```

**HTML：**

```
<div class="element" id="cheeseOption7">   
    <div id="optional_46">
        <a href="#">                    
            <span class="image"><!--  --></span>
        </a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:27:12.570

我发现的最好的解释`clip`是[在这个网站上](http://www.ibloomstudios.com/articles/misunderstood_css_clip/)，尽管我认为你确实对它的工作原理有一个大致正确的掌握。您没有掌握的是这与您的情况有何关系。`clip`正在发生在 的背景图像上`span`。您`30px`是在告诉浏览器从左侧剪掉 30px 的图像（这正是您的小提琴示例正在做的事情），但*它不会影响 background 的定位*。

**使用精灵，通常不使用`clip`，而是`background-position`**切换精灵图像相对于显示它的元素的位置。因此，对于 128px x 89px 精灵图像，您将开始`background-position: 0 0`并移动到`-189px 0`将一个图像向右移动或移动`0 -89px`到下移一张图像。

我假设因为`clip`requires`position: absolute`是你使用 的原因`span`，但事实上，因为你真的应该使用`background-position`，它会让你一起消除所有，直接在元素`span`的背景上做定位。`a`

# ios - Titanium 中的 TableViewRow 高度

> ID：10664992
> 
> 赞同：0
> 
> 时间：2012-05-19T12:00:48.723
> 
> 标签：ios, titanium

我不知道为什么 TableView 会自动为我隐藏长字符串的结尾。有没有办法可以避免这种情况？以下是截图和代码：

![截屏](../Images/21f26157feaebdc7c0a4abca77a3b604.png)

```
var data = [];

var row = Ti.UI.createTableViewRow();
var label = Ti.UI.createLabel({ text: 'ALongLongLongLongLongLongLongLongLongStringFromDatabaseOrSomewhere~', });

row.add(label);
data[0] = row;

var table = Titanium.UI.createTableView({
    data: data,
    style: Titanium.UI.iPhone.TableViewStyle.GROUPED,
});

Ti.UI.currentWindow.add(table); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:32:31.350

```
var toImg = row.toImage(),
rowHeight = toImg.height;
row.height = rowHeight;
toImg = null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:57:19.057

尝试

```
var row = Ti.UI.createTableViewRow({
  height: 'auto'
}); 
```

或者

```
var row = Ti.UI.createTableViewRow({
  height: Ti.UI.SIZE
}); 
```

如果您是 2.0 或更高版本。

# ms-access - 毫秒访问年度标准

> ID：10664996
> 
> 赞同：1
> 
> 时间：2012-05-19T12:01:14.963
> 
> 标签：ms-access, ms-access-2007

我需要创建一个查询条件来获取从去年最后 1 月 1 日到今天的任何日期，例如，如果我现在运行查询，它应该获取从 2012 年 5 月 1 日到今天的数据，如果我在明年运行查询2013 年 2 月，然后获取 2012 年 5 月 1 日至 2013 年 2 月的数据。

更新

我已将以下内容用作 [JOINED DATE] 查询条件，但它没有返回任何内容，这有什么问题？

```
IIf(Month([Data]![JOINED DATE])>=5,Between DateSerial(Year(Now()),5,1) And Now(),Between DateSerial(Year(Now())-1,5,1) And Now()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:18:36.640

您的语法不正确，我不建议在 IIF 语句中包含“between”关键字，您希望 IIF 仅返回日期，例如：

```
SELECT *
FROM A
WHERE A.Date BETWEEN IIf(Month([Joined Date])>=5,DateSerial(Year(Date()),5,1),DateSerial(Year(Date())-1,5,1) AND Date() 
```

注意：我使用的是 Date() 而不是 Now()，因为 Now() 包括在这种情况下不需要的时间戳。

# iphone - 苹果通知中心的“突发新闻”滚动视图

> ID：10664997
> 
> 赞同：0
> 
> 时间：2012-05-19T12:01:20.067
> 
> 标签：iphone, objective-c

您将如何创建滚动的突发新闻视图，正如您在 iphone 上的苹果通知中心（显示股票的位置）中看到的那样？

有这方面的开源例子吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:09:28.057

```
`https://github.com/cbpowell/MarqueeLabel` 
```

MarqueeLabel 与 UILabel 功能等效，当标签的文本超出可用宽度（对于给定的字体大小）时，它会添加滚动选取框效果。所有标准的 UILabel 属性都在 MarqueeLabel 中可用，它的行为就像 UILabel。

# asp.net - 使网站暂时不可用的优雅方法？

> ID：10664999
> 
> 赞同：9
> 
> 时间：2012-05-19T12:01:56.103
> 
> 标签：asp.net, asp.net-mvc-3

您知道使网站暂时不可用的优雅方法吗？对此有任何配置或设置吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T12:03:46.023

在 IIS 中你可以放一个 app_offline.htm

[http://weblogs.asp.net/scottgu/archive/2005/10/06/426755.aspx](http://weblogs.asp.net/scottgu/archive/2005/10/06/426755.aspx)

在其他网络服务器中检查手册或使用脚本将索引重命名为备份名称，然后将离线页面重命名为索引，反之亦然......

您还可以创建一个“非活动”文件，当页面加载时，将检查“非活动”文件是否存在。如果找到内容，那么您可以中止逻辑。

例如，在 php 中，您将包含以下行（尤其是通过包含）

```
<?php if(file_exists('/path/to/OffLine.file')) die('The Application is currently Offline! Please try again in a few minutes...'); ?> 
```

如果你想要这个@盒子级别，你可以将函数添加到 PHP.ini... 见[http://uk.php.net/manual/en/ini.core.php#ini.auto-prepend-file](http://uk.php.net/manual/en/ini.core.php#ini.auto-prepend-file)

要为每个站点设置 PHP.ini，请参阅[https://serverfault.com/questions/34078/how-do-i-set-up-per-site-php-ini-files-on-a-lamp-server-using -namevirtualhosts](https://serverfault.com/questions/34078/how-do-i-set-up-per-site-php-ini-files-on-a-lamp-server-using-namevirtualhosts)

显然，在其他语言中也是如此。

我有一个特定的脚本，它做了一些修补并实际上为我创建了这个文件......请参阅[发布期间的自定义 app_offline.htm 文件](https://stackoverflow.com/questions/2846097/custom-app-offline-htm-file-during-publish/7884527#7884527)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T12:07:16.227

实际上，已经有一种机制可以做到这一点，开箱即用。[你可以在这里](http://weblogs.asp.net/scottgu/archive/2006/04/09/442332.aspx)找到一篇关于它的帖子。

基本上，您必须在站点的根目录中包含一个 App_Offline.htm，IIS 将关闭该站点，直到该文件被删除。