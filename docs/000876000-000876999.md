# StackOverflow 问答 000876000-000876999

# windows - 如何在 Windows 上运行的 ruby 上捕获信号

> ID：876006
> 
> 赞同：1
> 
> 时间：2009-05-18T02:19:14.907
> 
> 标签：windows, ruby

如何在 Windows 上运行的 ruby​​ 上捕获信号？

我想将信号/消息从 C++ 应用程序发送到 ruby​​ 脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T02:40:45.170

查看[信号模块](http://www.ruby-doc.org/core/classes/Signal.html)。该文档的顶部有一个很好的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T17:40:05.497

这取决于信号。如果您想捕获 ctrl-C，则可以在 Windows 中使用。许多信号（sigup1、sigusr1 等）在 Windows 中并不能真正正常工作（至少对我来说不是）。这是捕获 ctrl-C 的方法。在此示例中，我只是打印一条消息，然后退出应用程序。您可以将任何 proc 对象传递给信号管理器——如果您在 proc 中读取/编辑变量，请务必注意范围：

```
trap("INT") { puts "\nExiting"; exit;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-05T18:35:24.860

Signal.list 告诉您系统支持哪些

# database-design - 数据库设计 - 多个查找/枚举表或一个大表？

> ID：876008
> 
> 赞同：16
> 
> 时间：2009-05-18T02:20:12.473
> 
> 标签：database-design, saas

我有许多表对它们的大部分列值使用查找/枚举引用。例如：
**人员表 - PersonID | 比赛代码 | 头发颜色代码 | 发型代码 | TeethConditionCode**
**位置表 - LocationID | 尺码 | 外观颜色代码 | ConditionCode**
诸如 Race、Size、Color、Condition 等之类的东西只是对代码查找表的外键引用。此代码表还有其他字段，但对我的问题并不重要。该数据库用于 SaaS 应用程序，这意味着每个客户都可以拥有自己的颜色、种族、条件等列表。有些代码是静态的，客户无法更改。

是有 1 个代码表还是 2 种代码表更好（DynamicCodeTable 用于客户定义的代码表，StaticCodeTable 用于更改的代码表）还是我应该为每种代码类型（RaceCodeTable、HairColorTable、Condition 等）都有一个表？

我最担心的是所有的sql连接。我正在使用的 Person 表有 20 多个这样的代码属性。加入 20 个不同的表 VS 加入同一个表 20 次时，性能是否存在差异？拥有多个表意味着每个表会更小，并且查找“应该”花费更少的时间。但是拥有一张桌子也可能很快。有什么建议么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-18T12:06:52.400

在过去的 15 年中，在“一个真正的查找表”（简称 OTLT）的主题下，对该主题进行了详细讨论。这种方法的优势突显了数据库新手。缺点会随着时间的推移而出现。请参阅以下链接了解 OTLT 缺点：

*   [http://tonyandrews.blogspot.com/2004/10/otlt-and-eav-two-big-design-mistakes.html](http://tonyandrews.blogspot.com/2004/10/otlt-and-eav-two-big-design-mistakes.html)
*   [http://web.archive.org/web/20100130062850/http://www.dbazine.com/ofinterest/oi-articles/celko22](http://web.archive.org/web/20100130062850/http://www.dbazine.com/ofinterest/oi-articles/celko22)

或[搜索](https://www.google.com/search?q=otlt)以`OTLT`找到更多讨论。

如果您为它们创建了许多查找表和许多维护屏幕，您可以通过创建一个巨大的 UNION 来创建一个模拟 OTLT 的视图，该 UNION 包括每个代码、每个描述以及存储代码描述对的表的名称. 如果您知道自己在做什么，则可以使用半自动方法生成这样的联合。我想半自动方法将使您能够为数百个查找表构建一个维护屏幕，然后在该屏幕和将在正确表中插入新代码的表之间放置一些逻辑。

至于让用户引入新的代码类型，而不仅仅是新的代码值，这会打开一大堆蠕虫。请参阅上面讨论 EAV 的文章。这很诱人，因为它允许用户设计自己的底层数据结构。如果您忽略性能，这在一段时间内效果很好。您无需向用户或主题专家学习数据结构，即可获得一个完美通用的数据库。

当它遇到真正的悲痛时，是当您尝试将数据用作集成数据库时，而不仅仅是关于数据的杂乱无章的意见。在这一点上，当您的客户期望生成例行报告时，您就进入了一些严肃的数据考古领域。祝你好运。

（编辑将“数据挖掘”改为“数据考古”）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-18T02:30:09.703

在不了解应用程序或要求的更多信息的情况下，我建议为每种代码类型设置一个表。IMO 数据库设计会更加清晰和自我记录，以便为您拥有的每种类型的代码提供外键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T02:29:07.350

在重新设计我们相当宽的表时，我错误地认为所有这些查找表都是一个好主意。如此多的灵活性等，但最终编码变得更加困难，无法四处导航，这简直是一件痛苦的事。

那我学到了什么？

*   对于静态值，只需使用枚举 - 它更快更方便。必须根据有多少其他表可能引用同一变量来做出此决定。
*   坚持使用更少的查找表，而不是创建尽可能多的查找表。JOIN 慢得多。
*   为了帮助自己导航，设计数据库视图。它会让你的生活轻松很多。
*   作为奖励，如果您不希望您的客户接触某些表（即您的静态表）或接触枚举列值，您可以使用 MySQL（例如）细粒度权限来禁用对某些表中某些列的更改. 很多人没有意识到这些权限可以变得多么灵活。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T02:35:32.763

存在潜在的性能差异。

只有 2 行的表在缓存中为这两个小行占用了大量空间。

如果您在单个表中有很多查找值，您可以有效地将这些值更密集地打包到缓存中。

# .net - 在 .Net 中，“使用”是否做了我们被引导相信的事情？

> ID：876011
> 
> 赞同：2
> 
> 时间：2009-05-18T02:23:40.763
> 
> 标签：.net

最近在看论坛，看到这样的评论：

> 因此，您会发现您被欺骗相信“使用”语法会帮助您清理资源。哦，好吧，欢迎来到 .NET 开发。

这真的把我吓坏了！在几乎所有情况下（尤其是流），我几乎只使用 .Dispose() 。没有人告诉我“使用”有什么奇怪的事情吗？使用是好是坏还是无所谓？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-18T02:29:39.203

来自[MSDN](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)：

```
using (Font font1 = new Font("Arial", 10.0f)) 
{
    byte charset = font1.GdiCharSet;
} 
```

由编译器翻译成以下内容：

```
{
  Font font1 = new Font("Arial", 10.0f);
  try
  {
    byte charset = font1.GdiCharSet;
  }
  finally
  {
    if (font1 != null)
      ((IDisposable)font1).Dispose();
  }
} 
```

所以不确定你在担心什么。

编辑：但请注意，如果您在自己的类型上使用**using模式，则该模式将仅与您的 Dispose() 方法一样有效。**一些评论和其他人回答了这个问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-18T02:33:44.063

在某些情况下 using 不会像您预期的那样清理，例如：

```
using (var myObject = new DisposableObject().AnotherDisposable())
{
    //Do things to myObject
} 
```

在此示例中，您有两个对象， DisposableObject 和 AnotherDisposable 并且 using 只会清理 AnotherDisposable 并让 DisposableObject 泄漏。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-18T02:27:41.033

如果您可以向我们提供上下文链接，将会有所帮助；但是，一般来说，这种没有支持的大多数态度的意见应该谨慎对待。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-18T02:29:16.320

是的，它确实做了你期望它做的事情。如果您查看“使用”语句的 IL，这就是您得到的：

```
L_0007: newobj instance void Demo.SomeClass::.ctor()
L_000c: stloc.0 
L_000d: nop 
...
L_0040: nop 
L_0041: nop 
L_0042: leave.s L_0054
L_0044: ldloc.0 
L_0045: ldnull 
L_0046: ceq 
L_0048: stloc.2 
L_0049: ldloc.2 
L_004a: brtrue.s L_0053
L_004c: ldloc.0 
L_004d: callvirt instance void [mscorlib]System.IDisposable::Dispose() 
```

（我从我的 using 语句中删除了一些东西以浓缩一点，但你明白了）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T02:27:13.827

“使用”是一种模式。有时您的代码会随着模式流动，有时则不会。这意味着有时您必须实际调用 dispose 因为您的对象不适合“使用”模式的范围。

例如，如果您在应用程序启动时实例化一个对象，然后需要在应用程序中间处理它并实例化一个新对象，那么您可能无法使用“使用”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-18T02:27:52.580

它将清理 Dispose() 方法清理的所有资源，因为 using(){} 构造只是调用 Dispose() 方法的语法糖。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-18T02:31:21.900

我认为你的意思是这个线程？（谢谢谷歌）：
[http ://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/4b63dc82-c7c0-4495-97ca-d92502a33d15](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/4b63dc82-c7c0-4495-97ca-d92502a33d15)

该`using`语句*将*调用`.Dispose()`任何实现`IDisposable`. 如果 using 语句未能清理资源，则`Dispose()`直接调用也会失败。在我链接到的特定情况下，这听起来像是一个行为不端的病毒检查器是问题所在。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-18T02:30:46.520

使用只是确保在您的对象上调用 Dispose 方法的另一种方式。至于任何未由 Dispose 方法处理的资源，它们将保留用于垃圾回收，因此您仍然受您在 using 语句中声明的对象的支配。我显然正在阅读您的评论，因为您没有发布指向您所指文章的链接。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-18T02:35:24.247

using 块的末尾调用 Dispose。Dispose 为调用者提供了*显式*释放对象正在使用的非托管资源的机会。垃圾收集器将使用对象的终结器*隐式释放托管资源。*但是 GC 对您分配的非托管资源（文件句柄、窗口句柄）一无所知。因此，如果您分配非托管资源并且没有在 Dispose 中正确释放它们，您就会泄漏。使用与您的 Dispose 一样好。

这里有更多[关于垃圾收集](http://msdn.microsoft.com/en-us/library/0xy59wtx%28VS.71%29.aspx)的内容，还有更多关于 Finalize vs Dispose 在这个[SO thread](https://stackoverflow.com/questions/732864/finalize-vs-dispose)中的内容。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-18T03:03:37.500

我曾经见过由于使用了 using 构造而导致应用程序崩溃时文件仍处于打开状态的情况。使用它时似乎并不总是关闭连接。因此，当我打开文件或数据库连接时，我自己明确地使用了 try..finally。

# excel - 如何从 Excel/VBA 中的数字键盘发送 +？

> ID：876013
> 
> 赞同：0
> 
> 时间：2009-05-18T02:25:16.640
> 
> 标签：excel, vba, sendkeys

我正在做一个项目，基本上，做屏幕抓取。我正在使用 VBA 根据存储在电子表格中的输入来驱动另一个系统。我遇到的问题是某些字段需要数字键盘中的 + 作为字段退出字符。

我使用 SendKeys 函数填写其他字段没有问题，但是对于我的一生，在我所做的任何研究中，我都无法弄清楚如何专门通过那个 + 。有没有人必须这样做？我觉得有一些简单的东西我没有得到......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T04:00:46.077

不确定 2007，但 2003 和更早的 VBA SendKeys 不支持发送键盘特定键。

我确实找到了这个实用程序，它将做键盘键，[http://cpap.com.br/orlando/SendKeysMore.asp ?IdC=New](http://cpap.com.br/orlando/SendKeysMore.asp?IdC=New)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T13:29:46.853

大括号不起作用吗？

```
 SendKeys I & "{+}", True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T13:38:05.447

回到另一种生活，我编写了一个名为 PushKeys 的程序，它绕过了 VB SendKeys 命令的限制，但语法兼容并具有一些其他功能（如睡眠、数字键盘键）。我所在的网站已经不存在了，但幸运的是有人在[这里存档了我的 PushKeys 程序](http://mc-computing.com/languages/DOSSendKeys.htm#VisualBasic)。

有 VB、Delphi、C 等的变体。VB 应该很容易在 VBA 中工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-06T14:15:38.043

我已经能够将**AutoIT**用于一些 MS Office VBA 项目，其中键盘或鼠标输入是唯一的方法，例如当 MS Office 没有在对象模型中公开某些内容但它存在于 GUI 中时。

在 AutoIT 脚本中，这应该可以在数字键盘上键入 + 键：

```
Send("{NUMPADADD}") 
```

您可以编译 AutoIT 脚本 (*.au3) 文本文件来创建可以从 VBA 运行的 EXE：

```
Dim RetVal As Variant
RetVal = Shell("YourAutoITscript.exe") 
```

[您可以在www.autoitscript.com](http://www.autoitscript.com/ "www.autoitscript.com")找到 AutoIT

# grails - Grails 安全问题和搜索引擎优化

> ID：876028
> 
> 赞同：2
> 
> 时间：2009-05-18T02:33:39.897
> 
> 标签：grails, spring-mvc, spring-security, gsp

我正在尝试构建一个控制逻辑，它依赖于当前的 gsp 页面来调用一个动作，是否有一个标签或会话方法可以用来识别当前的 gsp 页面

我想限制对除 singup 和登录之外的所有 GSP 的访问，因此如果用户打开任何其他 gsp，他将被重定向到注册页面，并且他也将能够导航到登录页面。

我试图实现的逻辑是这样的，如果 current_Page 是 login.gsp 或 singup.gsp 然后什么也不做重定向到注册 //用户可以导航到登录页面也没有问题

我想在主布局中添加这个逻辑，以便在所有应用程序域中实现它。

我想知道是否有使用 RequestmapController 或 UrlMappings 的替代方法？

任何有 springMVC 经验的人都可以提供帮助，因为 Grails 构建在 SpringMVC 之上，而 SpringMVC 又构建在标准 servlet 框架之上！

注意：我正在使用 Acegi 插件

备注：应用程序如何在实现这种安全机制的情况下对 SEO 友好（即 Google 索引）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T06:52:07.053

您应该阅读以下内容：[链接文本](http://www.grails.org/AcegiSecurity%20Plugin%20-%20Securing%20URLs)

以及使用ACEGI插件的教程：[链接文字](http://www.grails.org/AcegiSecurity+Plugin+-+Basic+Tutorial)

后者是我要走的路。它允许您设置角色并按角色保护“页面”和 URL。它还包括一种创建用户并将其分配给角色的方法。

要安装 ACEGI grails 插件，请执行以下操作：`grails install-plugin acegi`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T08:02:39.960

**编辑**：对不起，我误解了你的问题。我以为您正在寻找 Requestmaps 的替代品。这就是为什么我最初建议[使用注释来保护控制器。](http://www.grails.org/AcegiSecurity+Plugin+-+Basic+Tutorial+with+Annotations "使用注释保护控制器")

如果您想使用 Requestmaps，您可以执行以下操作：

1.  创建一个新的 Requestmap，如下所示：
    URL pattern = `/login/**`
    Role =`IS_AUTHENTICATED_ANONYMOUSLY`

2.  要限制对站点其余部分的访问，请创建另一个匹配所有 url 的 requestmap 条目：
    URL pattern = `/*/**`
    Role = `ROLE_USER`（您可以使用您喜欢的任何其他角色）

`IS_AUTHENTICATED_ANONYMOUSLY`意味着任何人都可以访问匹配的 URL。第一个规则更具体，因此应该覆盖第二个和更一般的规则。

您可以查看[AcegiSecurity 插件 - 保护 URL](http://grails.org/AcegiSecurity%20Plugin%20-%20Securing%20URLs)以了解更多信息。

关于网站的SEO。AFAIK 搜索引擎无法访问需要身份验证的网站。这就是为什么像 Experts Exchange 这样的网站会使用[狡猾的技巧](http://blog.webdistortion.com/2008/04/16/experts-exchange-stop-the-cloaking-before-its-too-late/)来获得 Google 的索引。

您可以选择授予匿名用户读取权限，同时需要登录才能写入（就像 SO 一样）。这将允许您的网站被搜索引擎机器人索引。

我希望这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T01:59:05.263

您需要 Spring 安全插件。最好的方法不是在您的 GSP 中，而是对所有 Web 请求使用过滤器。这会给你提到的 Requestmaps 和 UrlMappings GrailsNewbie。

# java - red5 动作脚本

> ID：876030
> 
> 赞同：0
> 
> 时间：2009-05-18T02:34:59.427
> 
> 标签：java, actionscript, red5

如何在 url 中获取参数编码？例如，如果我们有一个包含以下内容的 html 文件：如何从 application.java 类中获取 a 的值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:48:45.847

我可能会误解，但您是否尝试访问 RTMP uri 中的参数发送？比如这个URL中的“auth_token”：rtmp://localhost/myapp/foo?x=0&auth_token=aavsgwqh 如果是，那么看你的连接参数的tcUrl属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T02:45:50.540

由于 Red5 是基于 RTMP 的，所以没有 http 请求可以从中获取参数。相反，您需要通过 RTMP 将参数从客户端 swf 发送到 Red5。根据您传递的数据，您可以将此数据作为连接参数发送到 NetConnection，或者您可以在 Application 类上定义一个方法，客户端将在 NetConnection 上调用该方法。

# asp.net-mvc - ASP.NET MVC：如何处理视图中的 Null 对象？

> ID：876036
> 
> 赞同：5
> 
> 时间：2009-05-18T02:36:34.023
> 
> 标签：asp.net-mvc

进入视图的模型对象是否应该在查看之前检查是否为空？如果为空，创建一个虚拟实例？或者视图应该检查是否为空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T05:24:49.050

如果对象为空，如何返回不同的视图？

```
if(object == null)
{
return View("notfound");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T02:56:10.887

我的观点是[空对象模式](http://en.wikipedia.org/wiki/Null_Object_pattern)是一件好事™。使用它，您可以编写视图来处理 Foo 对象，并且所有这些对象（包括 null 对象）都会正确运行。

这种模式的美妙之处在于，无论空值仅可能单独出现，还是作为集合的一部分，它都有效（尽管后一种情况应该是，恕我直言，非常罕见）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T02:58:09.540

您不需要检查空值。如果您通过列表在控制器中获取数据，它应该只返回实际的数据库结果作为对象。如果没有记录，您可以随时检查视图中的 0 计数并显示一条消息，如下所示

```
<% if (ViewData.Model.Count == 0) { %>
    No results found.
<% } %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T19:56:27.913

当您的模型为空时，这是一种特殊情况 - 因此您应该抛出异常或创建默认模型（或者可能返回特殊视图）。我认为如果需要模型，您应该始终向 View 提供模型实例。

# iphone - 如何序列化 iPhone sdk 中的简单对象？

> ID：876041
> 
> 赞同：27
> 
> 时间：2009-05-18T02:37:55.317
> 
> 标签：iphone, cocoa, cocoa-touch, serialization, cocoa-design-patterns

我有一本对象字典；它们都是应该可序列化的 POCO 对象。我应该看什么技术将这些写入磁盘。我正在寻找最简单的选项来编写一些列表来保存状态。

我想我有3个选择。

1.  plist 文件。然而，这似乎仅限于存储预定义的对象（字符串、数字等）而不是对象（如具有姓名和年龄的人）。

2.  核心数据。（3.0 中的新功能）这会很好用；但是我的数据模型需要更改才能使这项工作。这将是一次大规模的返工，我不确定是否值得付出努力。

3.  SQLLite。实现一个简单的 SQL 数据库来读取和读取。我对此做了最少的研究，但我不想“重写”一些核心数据 ORM 函数。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-18T03:37:55.377

要序列化自定义对象，您只需要符合`NSCoding`协议。如果您的对象扩展了 NSObject，那么您需要做的（我相信）就是实现这些（以 person 对象为例）：

```
// Encode an object for an archive
- (void)encodeWithCoder:(NSCoder *)coder
{
    [super encodeWithCoder:coder];
    [coder encodeObject:name forKey:@“Name”];
    [coder encodeInteger:age forKey:@“Age”];
}
// Decode an object from an archive
- (id)initWithCoder:(NSCoder *)coder
{
    self = [super initWithCoder:coder];
    name = [[coder decodeObjectForKey:@“Name”] retain];
    age  = [coder decodeIntegerForKey:@“Age”];
} 
```

`NSArray`并且`NSDictionary`已经实现了序列化方法。他们将序列化他们持有的所有对象（如果对象实现了 NSCoder 接口——如果他们扩展了 NSObject，他们就会这样做）。NSObject`encodeWithCoder`并且`initWithCoder`默认情况下什么都不做，所以除非你在你的类中实现你自己的代码，否则什么都不会被序列化。

如果您有 NSArray 或 NSDictionary 对象，您可以使用以下方法同步它们：

```
// Writing
- (BOOL)writeToFile:(NSString *)aPath atomically:(BOOL)flag;
- (BOOL)writeToURL:(NSURL *)aURL atomically:(BOOL)flag;
// Reading
- (id)initWithContentsOfFile:(NSString *)aPath;
- (id)initWithContentsOfURL:(NSURL *)aURL; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-18T02:44:40.433

您可以像在 Mac OS X 上一样执行此操作：您的 POCO 必须符合`NSCoding`协议。有关概念参考，请参见[此处](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Archiving/Archiving.html)，有关 NSCoding 参考，请参见[此处。](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSCoding)

如果数据不是那么疯狂，并且您的对象之间没有非常复杂的关系，那么将所有内容写成 plist 可能是您的最佳选择；它的执行速度非常快，并且在您的代码中实现起来很简单。就像你说的，CoreData 可能需要*很多*额外的工作来适应你的代码，而 sqlite 真的只适用于存储非常适合存储在关系数据库中的数据。请记住，sqlite 也比使用二进制 plist 更慢并且使用更多资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T02:47:12.750

[`NSCoder`](http://developer.apple.com/documentation/Cocoa/Conceptual/Archiving/Archiving.html)是用于序列化的标准 Cocoa 习惯用法。

# cuda - “初学者”分布式处理项目

> ID：876042
> 
> 赞同：1
> 
> 时间：2009-05-18T02:38:17.983
> 
> 标签：cuda, parallel-processing, cluster-computing

很长一段时间以来，我一直对构建一个异构节点集群感兴趣，以尝试拥有一台家用超级计算机，因为我对人工智能研究非常感兴趣。

然而，问题是即使我有无数的硬件，（2x 双四机架安装服务器，8 285GTX Gpus，6x PS3s 2x Hacked 360s（它们可以运行 linux）访问大量普通 PC 以及一些工作站）我没有需要处理的大型数据集，甚至没有任何可以分布式运行的软件。我已经搞乱了分布式代码编译，但充其量它使我的内核构建从 10 分钟（最坏的情况）到 30 秒（我认为其中 20 秒只是设置）。

那么我应该从哪里开始呢？我对 Obj-C/C/C++ 有相当的了解，所以写东西应该不会太难，但我应该写什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T03:10:28.967

如果您希望数据处理得当，这里有很多：

*   [一系列数据挖掘和知识发现数据集](http://www.kdnuggets.com/datasets/)
*   [各种抓取和/或可抓取的数据集](http://theinfo.org/get/data)
*   [综合知识档案网络数据包列表](http://www.ckan.net/package/list)
*   [大型健康数据集的集合](http://www.ehdp.com/vitalnet/datasets.htm)

至于“我应该建造什么”，真正的问题是，你对什么感兴趣？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T02:52:53.157

好吧，我认为最好确定您将为其开发应用程序的可用硬件子集。PS3 的软件需要特别注意，并且需要与在典型 linux 服务器上运行的软件分开开发。

您可能还需要研究如何为 360 开发应用程序；老实说，我不确定它是否真的会给你你想要的东西。

一旦你决定了你需要开发的硬件子集，最好从一些基本的开发开始，以确保你可以建立一个能够进行通信的基础。有了坚实的基础，您将能够扩展您的代码以支持各种分布式项目。

我希望我能正确理解你的问题！

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T07:45:40.593

如果您真的很喜欢冒险，您可以尝试将[Sprite](http://www.eecs.berkeley.edu/Research/Projects/CS/sprite/sprite.html "精灵操作系统") (Unix-y) 或/和[Plan 9](http://plan9.bell-labs.com/plan9/ "贝尔实验室的计划 9")（只是很奇怪）移植到您拥有的每种硬件风格（Plan 9 已经在 PC 上运行）。

# security - 如何使页面使用ssl？

> ID：876045
> 
> 赞同：4
> 
> 时间：2009-05-18T02:41:59.580
> 
> 标签：security, ssl

我有一个我想使用 SSL 的付款页面。我已经安装了证书......现在怎么办？我可以只使用 https 引用页面吗？当我这样做时，我收到以下错误：SSL 收到了超出最大允许长度的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T04:55:29.753

您的具体错误意味着您的网络服务器上的某些设置不正确。例如，如果您使用的是 Apache，您是否安装了 mod_ssl？（在未安装 mod_ssl 的情况下在 Apache 上配置 SSL 主机会产生发帖者的错误。）

有关设置安全支付页面的一些进一步建议：

1）添加 sw 以便如果某些加载[http://secure.foo.com/yourSecurePage](http://secure.foo.com/yourSecurePage)，它们将被重定向到[https://yourSecurePage.foo.com](https://yourSecurePage.foo.com)。如何最好地做到这一点取决于您的网络堆栈。

确保付款过程中的所有页面安全。这有助于增加客户的信心。

2) 请记住，您的安全页面中包含的所有图像和文件都必须使用 https 加载，否则用户将在页面上看到有关“不安全”内容的警告。使用相对链接或使用 /another_dir/image.foo 或 //asset_server.foo.com/images/foo.jpg 形式的链接。不要使用[http://asset_server.foo.com/](http://asset_server.foo.com/) ...（当然任何其他服务器也需要支持 SSL 才能工作。）

3) 如果您在安全支付页面上收集信用卡信息，那么您应该添加以下信息：

a) 您的网站已通过认证，符合信用卡行业的 PCI 数据安全标准

或者

b) 收集的信用卡信息永远不会存储在您的服务器上，只会发送到您的银行。

您可以在另一个页面上说明这些类型的详细信息，但您可能希望在付款页面本身上有一个链接，例如“我们是安全的”或“您的信息是安全的”。根据您的受众，他们可能对向网站提交信用卡信息非常害羞。

4) 使用谷歌分析（免费）或其他工具，使您能够准确确定“废弃购物车”的数量——即开始订购您的产品/服务但未完成付款流程的人数—— -放弃他们的购物车而不是购买它。这是您网站的关键指标。

请记住，您可以使用 Ajax 来存储人们在将其输入到字段中后立即输入的数据——您不必等待提交按钮。这种技术可以为您提供更多信息，以了解人们在什么时候放弃他们的购物车。

付款页面和购买过程的其他最后部分是为潜在客户提供电话号码给您的销售人员、实时聊天的机会等的好地方。

快乐销售，

拉里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-09T17:41:07.617

`SSL received a record that exceeded the maximum permissible length.`

我在运行 apache 时遇到了这个错误，因为我错误地定义了我的虚拟主机。我的错误是我在为 *:80 和 *:443 定义虚拟主机时使用了 * 作为 IP 地址。尝试使用您的服务器 IP。XXX.XXX.XXX.XXX:80 和 XXX.XXX.XXX.XXX:443 作为 NameVirtualHosts

# axapta - 对 IAxaptaRecord.ExecuteStmt() 的注入安全调用

> ID：876047
> 
> 赞同：2
> 
> 时间：2009-05-18T02:43:08.440
> 
> 标签：axapta, x++

是否有通过 axpata 业务连接器调用的安全注入方式

```
string salesId = someObject.Text;

IAxaptaRecord salesLine = ax.CreateRecord("SalesLine");
salesLine.ExecuteStmt("select * from %1 where %1.SalesId == '" + salesId + "'"); 
```

如果 someObject.Text 设置为以下，那么我很容易受到 x++ 代码注入：

```
"SomeSalesOrder' || %1.SalesId == 'SomeOtherOrder" 
```

有没有办法对查询进行参数化，或者直接在 x++ 中编写所有数据访问代码，然后从 COM 调用它会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T07:13:32.580

无法确保您已涵盖所有案例...

使用 ExecuteStmt 很可能是错误的方法。您应该在 Axapta 方法（带参数）中编写您的选择或其他内容，然后调用该方法。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2009-05-18T04:14:14.403

你应该在 ' to \' 上做一个替换，例如

```
string salesId = someObject.Text.Replace("'", "\\'"); 
```

# c++ - 为什么我可以在 C++ 中的函数中定义结构和类？

> ID：876048
> 
> 赞同：97
> 
> 时间：2009-05-18T02:43:35.333
> 
> 标签：c++, data-structures, functional-programming

我只是错误地在 C++ 中做了这样的事情，它可以工作。为什么我可以这样做？

```
int main(int argc, char** argv) {
    struct MyStruct
    {
      int somevalue;
    };

    MyStruct s;
    s.somevalue = 5;
} 
```

现在在这样做之后，我有点记得很久以前在某个地方读过这个技巧，作为一种穷人的 C++ 函数式编程工具，但我不记得为什么这是有效的，或者我在哪里读到它。

欢迎回答任何一个问题！

注意：虽然在写问题时我没有得到任何对[这个问题](https://stackoverflow.com/questions/681068/declaring-structures-within-functions-in-c)的引用，但当前的侧边栏指出了它，所以我将它放在这里以供参考，无论哪种方式问题都不同但可能有用。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2009-05-18T02:55:22.450

**[编辑 18/4/2013]：**令人高兴的是，下面提到的限制在 C++11 中已经解除，所以本地定义的类毕竟是有用的！感谢评论者竹子。

在本地定义类的能力*将使*创建自定义函子（具有 的类`operator()()`，例如用于传递到的比较函数`std::sort()`或与 一起使用的“循环体” `std::for_each()`）更加方便。

**不幸的是，C++ 禁止将本地定义的类与模板一起使用**，因为它们没有链接。由于函子的大多数应用程序都涉及在函子类型上模板化的模板类型，因此不能使用本地定义的类——您必须在函数之外定义它们。:(

**[编辑 2009 年 1 月 11 日]**

该标准的相关报价是：

> **14.3.1/2：**本地类型、无链接类型、未命名类型或由这些类型中的任何一种复合的类型不得用作模板类型参数的模板参数。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2009-05-18T03:15:54.100

本地定义的 C++ 类的一种应用是[工厂设计模式](http://en.wikipedia.org/wiki/Factory_method_pattern)：

```
 // In some header
class Base
{
public:
    virtual ~Base() {}
    virtual void DoStuff() = 0;
};

Base* CreateBase( const Param& );

// in some .cpp file
Base* CreateBase( const Params& p )
{
    struct Impl: Base
    {
        virtual void DoStuff() { ... }
    };

    ...
    return new Impl;
} 
```

尽管您可以对匿名命名空间执行相同的操作。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2011-10-14T01:44:44.047

它实际上对于做一些基于堆栈的异常安全工作非常有用。或者从具有多个返回点的函数中进行一般清理。这通常被称为 RAII（资源获取即初始化）习语。

```
void function()
{

    struct Cleaner
    {
        Cleaner()
        {
            // do some initialization code in here
            // maybe start some transaction, or acquire a mutex or something
        }

        ~Cleaner()
        {
             // do the associated cleanup
             // (commit your transaction, release your mutex, etc.)
        }
    };

    Cleaner cleaner;

    // Now do something really dangerous
    // But you know that even in the case of an uncaught exception, 
    // ~Cleaner will be called.

    // Or alternatively, write some ill-advised code with multiple return points here.
    // No matter where you return from the function ~Cleaner will be called.
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-05-18T02:47:39.973

好吧，基本上，为什么不呢？C中的A `struct`（追溯到时间的黎明）只是声明记录结构的一种方式。如果你想要一个，为什么不能在你声明一个简单变量的地方声明它呢？

一旦你这样做了，请记住 C++ 的目标是尽可能与 C 兼容。于是就留了下来。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-18T02:51:40.400

[例如，在http://www.icce.rug.nl/documents/cplusplus/cplusplus07.html](http://www.icce.rug.nl/documents/cplusplus/cplusplus07.html)的“7.8：本地类：函数内部的类”部分中提到了它，称它为“本地类”并说它“在涉及继承或模板的高级应用程序中非常有用”。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-18T03:43:11.290

它用于制作正确初始化的对象数组。

我有一个没有默认构造函数的 C 类。我想要一个 C 类的对象数组。我弄清楚我希望如何初始化这些对象，然后使用静态方法从 C 派生一个 D 类，该方法为 D 的默认构造函数中的 C 提供参数：

```
#include <iostream>
using namespace std;

class C {
public:
  C(int x) : mData(x)  {}
  int method() { return mData; }
  // ...
private:
  int mData;
};

void f() {

  // Here I am in f.  I need an array of 50 C objects starting with C(22)

  class D : public C {
  public:
    D() : C(D::clicker()) {}
  private:
    // I want my C objects to be initialized with consecutive
    // integers, starting at 22.
    static int clicker() { 
      static int current = 22;
      return current++;
    } 
  };

  D array[50] ;

  // Now I will display the object in position 11 to verify it got initialized
  // with the right value.  

  cout << "This should be 33: --> " << array[11].method() << endl;

  cout << "sizodf(C): " << sizeof(C) << endl;
  cout << "sizeof(D): " << sizeof(D) << endl;

  return;

}

int main(int, char **) {
  f();
  return 0;
} 
```

为简单起见，此示例使用了一个普通的非默认构造函数和在编译时已知值的情况。将此技术扩展到您希望使用仅在运行时才知道的值初始化对象数组的情况很简单。

# java - @SecondaryTable 的休眠映射和继承问题

> ID：876049
> 
> 赞同：1
> 
> 时间：2009-05-18T02:44:06.080
> 
> 标签：java, sql, hibernate, orm

我有一个非常简单的类层次结构，如下所示，每个子类都有一个 @DiscriminatorValue 枚举类型，效果很好。

*抽象类：*

**AbstractNode**（映射到节点表的抽象类）

*子类：*

**FieldNode**（也映射到 Node 表的简单类，但具有不同的 @DiscriminatorValue 值）

**SynonymNode**（问题类，该类也映射到具有不同@DiscriminatorValue 值的Node 表）

但也有一个@SecondaryTable 属性并有额外的列，例如deletedDate、createdDate 等......每个都映射到@SecondaryTable 属性中定义的表中的coumns **。**

当我对该节点表进行简单的休眠查询时，我的问题就出现了

我收到如下错误：

org.hibernate.exception.GenericJDBCException：无法执行查询...堆栈跟踪...原因：java.sql.SQLException：无效的列名

在我的日志中我可以看到：

Hibernate: Select * from vocab_node where lower(name) like '%' || ? || '%'

INFO [NullableType.java:132]：无法从结果集中读取列值：DELETED_DATE；列名无效

我的猜测是它在 DB 表中找到了一行，然后确定这是一个**SynonymNode**类类型（通过 @DiscriminatorValue 列），然后尝试填充该类，包括使用 @SecondaryTable 映射的额外列表。

我怎么能告诉它，留下加入@SecondaryTable，或者完全排除这个特定查询？

多谢！这个问题要死我了！

我正在运行 Hibernate 3.2.1 和 Java 1.5

干杯，马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-11-02T18:33:48.670

我认为问题在于您必须指定要映射到@SecondaryTable 的字段...

在@Column 注释中设置“table”属性：@Column(name="somecol", table="secondaryTable")

Hibernate 抱怨是因为它在原始表中查找您的字段，而它应该在辅助表中查找它们。

# .net - 如何在运行时在 linq 查询中指定排序字段和方向？

> ID：876054
> 
> 赞同：1
> 
> 时间：2009-05-18T02:45:04.567
> 
> 标签：.net, linq

假设我有以下简单查询

```
var q = 
    from p in products
    orderby p.ProductName descending
    select p; 
```

在运行时指定排序字段和方向的最简单和最直接的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T02:49:33.057

我们之前使用过动态 linq 库来执行此操作。 [这是](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)Scott Guthrie 的博客的链接，他在其中进行了描述。

基本上，您可以将上述查询更改为如下所示：

```
var q = db.Products
        .OrderBy("ProductName Descending") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T03:00:39.193

我用 switch 语句做到了。这是一个片段，我将朝着上升的方向前进。在我的网址中，我传入了一个参数来确定方向以及排序依据。

```
if (sortDirection == "asc")
{
    switch (sortCol)
    {
        case 1:
            q = from f in q
                orderby f.Id ascending
                select f; 
```

q 显然是原始 LINQ 选择的结果。

# c# - 这对于使用 IDisposable 处理对象是否正确

> ID：876062
> 
> 赞同：1
> 
> 时间：2009-05-18T02:48:55.693
> 
> 标签：c#, idisposable

我有一个实现 IDisposable 接口的类。我正在使用网络客户端使用 AsyncDownloadString 下载一些数据。

我想知道我是否在构造函数和 web 客户端的 using 语句中正确声明了我的事件处理程序？这是在 Dispose 方法中删除事件处理程序的正确方法吗？

否决这是使用 IDisposable 接口的正确方法吗？

```
public class Balance : IDisposable
{
    //Constructor
    WebClient wc;
    public Balance()
    {
        using (wc = new WebClient())
        {
            //Create event handler for the progress changed and download completed events
            wc.DownloadProgressChanged += new DownloadProgressChangedEventHandler(wc_DownloadProgressChanged);
            wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
        }
    }

    ~Balance()
    {
        this.Dispose(false);
    }

    //Get the current balance for the user that is logged in.
    //If the balance returned from the server is NULL display error to the user.
    //Null could occur if the DB has been stopped or the server is down.       
    public void GetBalance(string sipUsername)
    {
        //Remove the underscore ( _ ) from the username, as this is not needed to get the balance.
        sipUsername = sipUsername.Remove(0, 1);

        string strURL =
            string.Format("https://www.xxxxxxx.com", 
            sipUsername);

        //Download only when the webclient is not busy.
        if (!wc.IsBusy)
        { 
            // Download the current balance.
            wc.DownloadStringAsync(new Uri(strURL));             
        }
        else
        {
            Console.Write("Busy please try again");
        }
    }

    //return and display the balance after the download has fully completed
    void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        //Pass the result to the event handler
    }

    //Dispose of the balance object
    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    //Remove the event handlers
    private bool isDisposed = false;
    private void Dispose(bool disposing)
    {
        if (!this.isDisposed)
        {
            if (disposing)
            {
                wc.DownloadProgressChanged -= new DownloadProgressChangedEventHandler(wc_DownloadProgressChanged);
                wc.DownloadStringCompleted -= new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);

                wc.Dispose();
            }               
            isDisposed = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-18T02:56:51.697

使用 IDisposable 对象有两种正确的方法：

1.  把它放在一个`using`块中
    **或**
2.  将它包装在一个也*正确*实现 IDisposable 的类中，并在释放这个新类时释放它。您现在希望新类的所有实例都是用`using`块创建的。

请注意，我说的是“或”，而不是“和”。做一个或另一个，但不要两者都做。

在这里，当您`using`在构造函数中使用块创建 WebClient 实例时，您将在有机会在其他任何地方使用它之前将其处置。在这种情况下，您应该只执行选项二。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-18T02:53:11.690

这几乎是正确的，除了`wc`被处理两次并且在处理`GetBalance`后将始终使用`wc`！

编辑：具有该更正的版本：

```
public class Balance : IDisposable
{
    //Constructor
    WebClient wc;
    public Balance()
    {
        wc = new WebClient();
        //Create event handler for the progress changed and download completed events
        try {
            wc.DownloadProgressChanged += new DownloadProgressChangedEventHandler(wc_DownloadProgressChanged);
            wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
        } catch {
            wc.Dispose();
            throw;
        }
    }

    ~Balance()
    {
        this.Dispose(false);
    }

    //Get the current balance for the user that is logged in.
    //If the balance returned from the server is NULL display error to the user.
    //Null could occur if the DB has been stopped or the server is down.       
    public void GetBalance(string sipUsername)
    {
        //Remove the underscore ( _ ) from the username, as this is not needed to get the balance.
        sipUsername = sipUsername.Remove(0, 1);

        string strURL =
            string.Format("https://www.xxxxxxx.com", 
            sipUsername);

        //Download only when the webclient is not busy.
        if (!wc.IsBusy)
        { 
            // Download the current balance.
            wc.DownloadStringAsync(new Uri(strURL));             
        }
        else
        {
            Console.Write("Busy please try again");
        }
    }

    //return and display the balance after the download has fully completed
    void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        //Pass the result to the event handler
    }

    private bool isDisposed = false;

    //Dispose of the balance object
    public void Dispose()
    {
        if (!isDisposed)
            Dispose(true);
        GC.SuppressFinalize(this);
    }

    //Remove the event handlers
    private void Dispose(bool disposing)
    {
        isDisposed = true;
        if (disposing)
        {
            wc.DownloadProgressChanged -= new DownloadProgressChangedEventHandler(wc_DownloadProgressChanged);
            wc.DownloadStringCompleted -= new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
            wc.Dispose();
        }               
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-18T02:58:51.677

由于您在 using 语句中声明了 wc，因此不应在该语句之外使用。所以我猜你在 GetBalance 中使用 wc 的调用会引发异常。您应该从 Balance 构造函数中删除 using 块。

有关 using 语句的更多信息，请参阅“ [using 语句（C# 参考）](http://msdn.microsoft.com/en-us/library/yh598w02.aspx) ”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-04-06T02:58:06.363

其他答案是正确的，但他们都错过了一个事实，即您在不应该声明终结器时声明了终结器。

来自 .Net Framework 设计指南（第 258 页）：

*   **避免**使类型可终结。
*   **如果类型负责释放没有自己的终结器的非托管资源，请务必使类型可终结**。****

 **所以 rpetrich 的编辑答案是正确的，提供编辑权限的人会删除终结器。

# jquery - 使用带有 jquery 的循环的方法后文档未准备好插入

> ID：876063
> 
> 赞同：0
> 
> 时间：2009-05-18T02:49:10.467
> 
> 标签：jquery, insert, load, loops, document

有没有办法使用循环在彼此后面插入单独的 DIV 元素？

现在我使用循环来做到这一点，但它不记得之前使用 load 方法插入的 DIV。结果是我只看到最后一个。

该代码旨在显示所有消息，当您第一次到达页面时，它会读取带有 db-id 的 cookie。

概括：

该`addmessage()`函数接收 xml 对象并开始循环遍历它。每条单独的消息都会调用该`newnote()`函数，该函数会加载一个 DIV 元素并在其回调函数中执行一些操作，例如设置`db-id`. 之后它返回到`addmessage`函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T02:57:28.250

您使用什么方法插入 DIV？如果您只想将它​​们全部添加到您正在使用的任何容器的末尾，您可以使用`append`. 如果您在特定位置需要它们，我会使用`before`或`after`

```
<div id="container">
    <div id="itemOne"></div>
    <div id="itemTwo"></div>
    <div id="itemThree"></div>
</div> 
```

如果你需要在 itemTwo 之后插入一些东西：

```
$('#itemTwo').after("<div>New node</div>"); 
```

如果您在循环中执行此操作并且需要在 itemTwo 之后继续按顺序添加它们（例如），那么您可以尝试存储对最后插入的元素的引用，然后在其`after`上使用该函数，或者通过插入它在以下项目 itemThree 之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T08:49:15.933

在上面的帮助下，我找到了解决方案，并提供了参考建议

如果我尝试使用这样的选择器计算新添加的元素的数量

```
index = $("div.paneltbnote").size(); 
```

结果始终为 0

但是，如果您将 indexnumber 明确地提供给 newnote() 函数，它也会像预期的那样工作。我只是在循环中添加了一个计数器并将其用作函数的额外参数

选择器无法计算函数本身内新添加的元素。至少，这是我目前的理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T02:58:53.877

假设您的问题是找到最后一个 DIV，您可以搜索[最后一个](http://docs.jquery.com/Selectors/last)DIV，然后将其放在[后面](http://docs.jquery.com/Manipulation/after#content)。

# cocoa - 如何使用滚动视图的控制器控制滚动视图中的 webview？

> ID：876079
> 
> 赞同：0
> 
> 时间：2009-05-18T03:01:17.537
> 
> 标签：cocoa

通常，在scrollview中是一个tableview或者textview，然后我们可以通过右边或者底部的scroller来控制页面。现在我想放置 webview 而不是 tableview 或 textview ，我不想用 safari 的控制器和滚动视图的控制器来控制网页，但我不知道该怎么做？如果我可以禁用野生动物园的控制器，怎么办？或者有人可以给我一个样品吗？非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T03:22:31.573

在您的 nib 中选择您的 Web 视图，然后从“布局”菜单的“嵌入对象”子菜单中选择“滚动视图”。

如果由于某种原因，您正在以编程方式构建视图层次结构，则创建一个 NSScrollView 并将 Web 视图设置为滚动视图的文档视图。

# delphi - 注册自定义框架

> ID：876081
> 
> 赞同：4
> 
> 时间：2009-05-18T03:02:20.250
> 
> 标签：delphi, delphi-2009, tframe

在 Delphi 2009 中，在我的一个项目中，我有一个自定义框架，上面有一些控件，我想将其用作其他一些控件的基类。我想将此框架注册为 IDE 向导，以便在新项目列表中可用。当我将新添加的项目（我的自定义框架）添加到项目时，我希望它：

1.  在对象检查器中显示我添加到自定义框架的所有属性和事件。
2.  从我的自定义框架而不是 TFrame 派生新创建的框架。

好的，为了让它在 Object Inspector 中显示我的属性和事件，我在 IDE 中注册了一个自定义模块。它不适用于框架。幸运的是，有人在 StackOverflow 上提到了这一点，并给出了答案：

[在对象检查器上显示 TFrame 后代的附加属性](https://stackoverflow.com/questions/289672/showing-tframe-descendants-additional-properties-on-the-object-inspector)

然后，为了让它加载我的自定义框架的 DFM，我将 InitInheritedComponent 添加到我的自定义框架的构造函数中。像这样的东西：

```
constructor TMyFrame.Create(AOwner: TComponent); override;
begin
  inerited;
  if (ClassType <> TMyFrame) and not (csDesignInstance in ComponentState) then
  begin
    if not InitInheritedComponent(Self, TMyFrame) then
      raise EResNotFound.CreateFmt('Resource %s not found', [ClassName]);
  end;
end; 
```

它不起作用！它仍然在设计器中创建一个空框架，而不是我自己的框架。如果我没有将自定义模块注册到 IDE 中，即使不需要 InitInheritedComponent，它也会正确显示我的框架，但对象检查器中不会显示其他属性！

如果我将构造函数源更改为此（*用 TFrame 替换 TMyFrame*）：

```
constructor TMyFrame.Create(AOwner: TComponent); override;
begin
  inerited;
  if (ClassType <> TFrame) and not (csDesignInstance in ComponentState) then
  begin
    if not InitInheritedComponent(Self, TFrame) then
      raise EResNotFound.CreateFmt('Resource %s not found', [ClassName]);
  end;
end; 
```

框架已正确添加到设计器中，并且在 Object Inspector 中可以看到其他属性，但运行应用程序失败，因为它抱怨框架上的组件已经存在。

所以，我的问题是：**让 Delphi IDE 向导使用 DFM 从自定义框架（不是表单）创建派生框架并在 Object Inspector 中显示其附加属性的解决方案是什么？**

顺便说一句，我不想​​在运行时在框架中构建控件，因为我也需要它们在设计时可用。

我希望有人能把这件事告诉我。

问候

**编辑：**

这些框架实际上用作向导组件的页面。我的向导组件在运行时创建它们。我希望用户在“新建项目”菜单中有一个选项，可以将向导页面添加到项目中，并在 IDE 设计器中设计其布局，并将其注册到我的向导组件中以显示在向导中。我从 TFrame 继承了一个基类，因为我的向导页面应该有一些强制控件和一些自定义属性和事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-01T22:06:36.333

我已经相当广泛地探索了使用 TFrames（及其相关继承）作为组件开发的基础，并且可以详细说明我发现的内容是否有用，但我从来不需要使用 RegisterCustomModule——我只是从直接使用 TFrame，使用正常的帧继承，然后在标准组件注册单元中注册生成的“最终”版本。这似乎允许两全其美（可视化开发+继承，加上组件调色板+对象检查器功能）。

不过，它有一些小技巧，还有一些需要注意的问题，例如如何命名 TFrame 本身，确保 DFM 文件在第一行正确使用“对象”或“继承”，而且，一般来说，我已经发现创建一个从 TFrame 继承但不添加任何内容的“基本框架”对于复杂继承树的稳定性*非常有益……然后从那里继承所有其他的。*（在添加已发布的属性等时尤其如此）。

告诉我更多关于您为什么特别想要使用 IDE 向导的信息，也许如果这不是一成不变的方法，我可以提供更多帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-02T04:03:34.290

是的，它可以做到！

我已经完成了您在 Delphi 2007 和 2009 中的要求，并且可以说无论更新级别如何，它都适用于两个版本。在此过程中我确实遇到了一些有趣的问题，但最终的解决方案在事后看来非常直接（在我的头撞到墙上一天之后）。在我的回答中对此有更多的了解。

我将自定义框架放入组件的设计时包引用的运行时包中。这对于允许在使用运行时包的应用程序中使用框架以及允许在其他自定义组件包中使用相同的框架是必要的。设计时包还包含一个自定义模块专家，用于将框架添加到文件 -> 新建 -> 其他... -> “新项目”图库并生成自定义默认模块代码。后面的部分主要是为了在实际使用过程中节省编码时间，而且要做好是一件非常痛苦的事情。我将其归结为学习曲线，因为我找不到与我的情况相匹配的完整示例。

来自设计时 DPK 的代码：

```
requires
  DesignIDE,
  FramePageListD11R,
...
contains
  FramePageListPkgReg in 'FramePageListPkgReg.pas', 
```

并来自 FramePageListPkgReg

```
implementation

{$R FramePageListIcons.res}

procedure Register;
  begin
    ...
    RegisterCustomModule(TBaseDisplayFrame, TCustomModule);
    RegisterPackageWizard(TDisplayFrameModuleExpert.Create);
  end; 
```

我的框架实现在框架上没有可视组件，因为我的目标是引入虚拟方法、发布的属性、事件并为我的动态框架处理逻辑实现自定义接口。这里是DFM文件的内容和部分PAS文件供参考。请忽略 IDisplayFrameEvent 接口，因为它与当前讨论的主题无关。

```
object BaseDisplayFrame: TBaseDisplayFrame
  Left = 0
  Top = 0
  Width = 500
  Height = 300
  HorzScrollBar.Smooth = True
  HorzScrollBar.Style = ssHotTrack
  HorzScrollBar.Tracking = True
  VertScrollBar.Smooth = True
  VertScrollBar.Style = ssHotTrack
  VertScrollBar.Tracking = True
  TabOrder = 0
end

TBaseDisplayFrame = class(TFrame, IDisplayFrameEvent)
private
  FOnPageShow : TDisplayFrameEvent;
  FOnPageHide : TDisplayFrameEvent;
  ...
published
  ...
  property OnPageShow: TDisplayFrameEvent read FOnPageShow write FOnPageShow;
  property OnPageHide: TDisplayFrameEvent read FOnPageHide write FOnPageHide;
end; 
```

至于让 DFM 加载，我不需要任何特殊编码。我确实发现 Delphi IDE 中存在一个错误，即 foo 禁止将表单包含到包中。我不记得所有的细节，但是通过手动编辑生成的 DPK 代码很容易解决这个问题。这里是DPK的相关部分供参考。我怀疑这是你的主要问题。请特别*注意*该行的注释部分，因为这对于将 DFM 包含在包中至关重要。

```
contains
  BaseDisplayFrameModule in 'BaseDisplayFrameModule.pas' {BaseDisplayFrame: TFrame}; 
```

一切正常后，您可以照常创建框架，然后修改 PAS 文件和 DFM 以从框架继承。正如 Jamo 所指出的，不要忘记在 DFM 的第一行中将“object”更改为“inherited”。我看到的唯一怪癖是继承框架上的事件处理程序的名称不符合典型的 Delphi 命名约定，而是派生自基框架类。这纯粹是装饰性的，我还没有花时间弄清楚是否有一个简单的修复方法。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-02T19:25:03.040

鉴于您的实际目标，您是否考虑过可能使用嵌入式表单？我已经使用 AppControls TacEmbeddedForm与[Greatis Form Designer （现在也以与](http://www.greatis.com/delphicb/formdes/)[TMS Scripter Studio](http://www.tmssoftware.com/site/scriptstudio.asp#features)略有不同的形式提供）结合使用[AppControls TacEmbeddedForm](http://www.appcontrols.com/manuals/appcontrols/index.html?tacembeddedform.htm)来完成与您尝试完成的类似的事情，并取得了积极的成果。还没有完成，但它看起来像是提供您正在寻找的一些运行时自定义功能的有希望的途径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-01T16:27:11.097

怀疑这可能已通过[Update 3](http://cc.embarcadero.com/item/26921)修复，因为我按照您的描述没有问题。我刚刚创建了一个 TFrame 后代，添加了两个属性（布尔值和一个事件），添加了一个面板等。创建了一个新包，其中注册了所述框架，安装了包，将包路径添加到搜索路径。

然后我创建了一个新的 vcl 应用程序，创建了新表单，添加了我的新框架组件，它可以正常编辑，并且两个新属性都可以在 Object Inspector 中使用。

如果这不起作用，我看到了[QC 5230中列出的解决方法](http://qc.embarcadero.com/wc/qcmain.aspx?d=5230)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-01T22:22:19.513

从我的角度来看，框架对于 Delphi 开发人员来说是非常有用的工具。但是——我强烈建议您动态地将框架放置在表单（或其他框架上）（例如来自代码而不是来自表单设计器）。表单上的框架被放入信息 DFM 中，如果您不小心在这种静态放置的框架中移动了一些按钮，Delphi 会将有关更改的信息放入表单 DFM 中。稍后对该按钮在实际框架上的位置的更改有时不会转移到放置的框架上。

# iphone - 使用 iPhone/Android 手机写脚本的优缺点是什么？

> ID：876082
> 
> 赞同：2
> 
> 时间：2009-05-18T03:02:40.560
> 
> 标签：iphone, android, scripting, text-editor

使用 iPhone/Android 手机写脚本有哪些正面和负面属性？

我想买一部新手机，即使我不在台式电脑前，我也可以利用我的时间编写一些脚本。

我听说你不能将文件保存到你的 iPhone，除非你越狱它。如果我想创建一些新的脚本文件，这可能是一个大问题。假设我想创建一个 abc.java 并且我无法保存它。

Android也一样吗？我可以在 Android 手机上创建本地脚本文件吗？由于 Android 是一个 linux 操作系统。

**是否可以在其上安装 java sdk 或其他 sdk（如 flex？）？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T12:48:05.670

忘掉它。

iPhone显然太封闭了。Android 让你随心所欲（如果没有，获得 root 访问权限是小菜一碟），但没有开发环境，只安装了 java，可用的 shell 真的很差，最终键盘/屏幕大小会让你发疯。

写下这个唯一的答案花了我 10 分钟的时间来实现我的 HTC 梦想，我只愿意这样做，因为我陷入了一个非常无聊的会议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T14:01:08.660

可以使用 Android SDK[在文件系统上创建文件](http://developer.android.com/reference/java/io/FileOutputStream.html)- 无需 root 访问权限 - 无论是在您的应用程序沙箱中还是在 SD 卡上。

从理论上讲，编写一个程序来编译或执行这些文件是可能的，尽管试图在 Android 设备上为 Android 应用程序创建一个合理的开发环境可能会增加你的运气。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T03:22:23.960

iPhone 的文本编辑器可以保存在自己的应用程序空间中，并且可以与 PC 同步。

也就是说，我认为您不会发现在手持设备上键入脚本是一个特别高效的环境。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T16:00:05.503

我发现在 Android 上编写脚本非常酷且非常方便。最好的部分是剪切和粘贴的能力。我使用文本编辑器，它允许您将任何文件扩展名保存到您的 SD 卡。到目前为止，我已经能够编辑 php 文件并使用 ftp 应用程序上传。你甚至可以通过 ssh 进入你的远程服务器。

我认为没有适用于 Android 的 SDK。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T03:14:01.733

您是对的，iPhone 不会向用户公开文件系统（请参阅[本文](http://www.macworld.com/article/133971/2008/06/iphone_open_save.html)）。当然，这方面存在漏洞，但没有一个是方便的。[使用 Android访问](http://www.saurik.com/id/10)真正的 Linux shell应该更容易。从理论上讲，您可以通过一些工作来安装 SDK，但我认为您不会发现它是一个高效的开发环境。

# quotes - 谁写了这个程序语句？“始终编写代码，就好像最终维护您的代码的人将是一个知道您住在哪里的暴力精神病患者。”

> ID：876089
> 
> 赞同：167
> 
> 时间：2009-05-18T03:04:49.150
> 
> 标签：quotes, code-maintainability

> 始终编​​写代码，就好像最终维护您的代码的人将是一个知道您住在哪里的暴力精神病患者。

我在某人的博客上找到了这个，它介绍为 Rick Osborne 的。但是我用谷歌搜索了这个，其他人说：Martin Golding's，John Woods' 和 Damian Conway's... 是的，Damian Conway 在“ [Perl Best Practices](https://books.google.co.id/books?id=gJf9tI2mytIC&pg=PT27#v=snippet&q=%22Always%20code%20as%20if%20the%20guy%20who%20ends%20up%20maintaining%20your%20code%20will%20be%20a%20violent%20psychopath%20who%20knows%20where%20you%20live%22&f=false) ”（2005）中使用了这句话，但 Damian 没有提到是谁写的。

有谁知道这句格言的真正作者是谁？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2009-05-18T15:55:12.550

我认为 ChrisW 的研究是正确的，我试图通过做同样的事情来确认它。我在 1991 年在这个帖子中找到了[约翰·伍兹的名字：](http://groups.google.com/groups/search?q=Always+code+as+if+the+guy+who+ends+up+maintaining+your+code+will+be+a+violent+psychopath+who+knows+where+you+live.&sitesearch=groups.google.com&scoring=d&sa=N&start=50)[逗号运算符的用法](https://groups.google.com/d/msg/comp.lang.c++/rYCO5yn4lXw/oITtSkZOtoUJ)

> Bill Mitchell 查看个人资料 更多选项 1991 年 9 月 26 日，上午 1:57 在文章 <5...@ksr.com> j...@ksr.com (John F. Woods) 中写道：
> 
> > [...] 始终编写代码，就好像最终维护您的代码的人将是一个知道您住在哪里的暴力精神病患者。代码可读性。
> 
> 太他妈正确了！

所以也许是约翰伍兹？

2014 年 8 月 22 日：链接已更新。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-18T03:15:20.063

它最早出现在 Google Groups 上并未归因于 Martin Golding 1994 年的一篇帖子。

# asp.net - 如何使用 LINQ to SQL 在 Gridview Asp.Net 中仅显示持续时间小时：分钟：秒？

> ID：876090
> 
> 赞同：1
> 
> 时间：2009-05-18T03:06:47.087
> 
> 标签：asp.net, vb.net, linq-to-sql, gridview, timespan

我想通过使用 LINQ to SQL 从 ASP.NET 中的 TimeCheckIn 中减去 TimeCheckOut 来在数据 Gridview 中仅显示持续时间 Hour、Minutes 和 Second

这是后面的代码：

```
Dim db = new MyDataContext
Dim user = from u in db.Employees select IDNumber = u.IDNumber, _
           FirstName = u.firstName, LastName = u.lastName, TimeCheckIn = u.timeCheckIn, _
           TimeCheckOut = u.timeCheckOut, Duration = u.timeCheckIn
Gridview1.DataSource = user  
Gridview1.DataBind() 
```

页面代码：

```
 <asp:GridView ID="GridView1" runat="server" Width="100%" 
    AutoGenerateColumns="False">
    <Columns>
        <asp:BoundField DataField="IDNumber" HeaderText="ID Number" ReadOnly="True" />
        <asp:BoundField DataField="FirstName" HeaderText="First Name" ReadOnly="True"/>
        <asp:BoundField DataField="LastName" HeaderText="Last Name" ReadOnly="True"/>
        <asp:BoundField DataField="TimeCheckIn" HeaderText="Time Check In" ReadOnly="True"/>
        <asp:BoundField DataField="TimeCheckOut" HeaderText="Time Check Out" ReadOnly="True" />
        <asp:TemplateField HeaderText="Duration">
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# FieldDisplayDuration(Eval("Duration")) %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

这是我的 FieldDisplayDuration 助手：

```
Protected Function FieldDisplayDuration(ByVal Duration As DateTime) As String
    Dim rtn As String = "DefaultValue"
    Dim dif As TimeSpan = DateTime.Now.Subtract(Duration)
        rtn = dif.Hours & " hours, " & dif.Minutes & " minutes, " & dif.Seconds & " seconds. "
    Return rtn
End Function 
```

在 Helper 函数的第 3 行中，Dim dif as TimeSpan = DateTime.Now.Subtract(Duration) 仅给出从 TimeCheckIn 到 DateTime.Now 的小时、分钟和秒的持续时间。但是，我希望从 TimeCheckIn 到 TimeCheckOut 的持续时间仅以小时、分钟和秒为单位。我知道 FieldDisplayDuration 函数是完全错误的逻辑，但我只想让你明白我的意思，它也可能是那些想要计算员工从雇佣日期开始的持续时间的代码示例。最后，让我们通过从 gridview 问题中的 TimeCheckIn 中减去 TimeCheckOut 来回到 TimeSpan，我该怎么做？请给我一些线索..非常感谢你...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T03:27:11.750

可以只减去日期和时间来获得时间跨度，因此您应该能够使用

```
 Text='<%# FieldDisplayDuration(Eval("TimeCheckIn"), Eval("TimeCheckOut")) %>' 
```

和类似这个功能的东西：

```
Protected Function FieldDisplayDuration(ByVal CheckIn As DateTime, ByVal CheckOut as DateTime) As String    
    Dim rtn As String = "DefaultValue"    
    Dim dif As TimeSpan = CheckOut - CheckIn        
    rtn = dif.Hours & " hours, " & dif.Minutes & " minutes, " & dif.Seconds & " seconds. "    
    Return rtnEnd 
Function 
```

虽然我可能会在 rturn 行上使用字符串格式并执行此操作...

```
rtn = string.Format("{0} hours, {1} minutes, {2} seconds.", dif.Hours, dif.Minutes, difSeconds) 
```

因为我认为它更容易阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T03:29:48.357

您可以将计算持续时间的逻辑放在 Select 子句中，如下所示：

```
Dim user = from u in db.Employees select IDNumber = u.IDNumber, _
       FirstName = u.firstName, LastName = u.lastName, TimeCheckIn = u.timeCheckIn, _
       TimeCheckOut = u.timeCheckOut, Duration = u.timeCheckOut.Subtract(u.timeCheckIn) 
```

然后，您只需要格式化生成的时间跨度。

或者，您可以在选择中完成所有操作，甚至调用一个函数，所以有类似的东西

```
Duration = FormatDuration(u.timeCheckOut.Subtract(u.timeCheckIn) 
```

或者

```
Duration = FormatDuration(u.timeCheckIn, u.timeCheckOut)\ 
```

如果你这样做了，并假设 FormatDuration 返回一个字符串，你将能够完全取消列模板

# sorting - JQuery TableSorter Comma-Digit Parser 不工作

> ID：876092
> 
> 赞同：2
> 
> 时间：2009-05-18T03:08:59.797
> 
> 标签：sorting, jquery-plugins, tablesorter

这是我的问题，

我目前正在使用 JQuery Table Sorter，并且在网上找到了 Comma-Digit 解析器。我遇到的问题是它似乎不起作用。

因此，这是该列的排序方式：

1.  4,666
2.  141,666
3.  293
4.  341,666
5.  346
6.  461,676

这应该排序为

1.  293
2.  346
3.  4,666
4.  141,666
5.  341,666
6.  461,676

我正在使用的解析器是这样的：

```
$( function() { 

    $.tablesorter.addParser({
        id: "fancyNumber",
        is: function(s) {
            return /^[0-9]?[0-9,\.]*$/.test(s);
        },
        format: function(s) {
            return $.tablesorter.formatFloat(s.replace(/,/g, ''));
        },
        type: "numeric"
    });
}); 
```

我只是不知道我做错了。我是不是加载错了？解析器错了吗？我在这里需要真正的帮助，并且已经为这个问题苦苦挣扎了一段时间。

**编辑：**由于我如何生成我的列和允许用户选择的列，我永远不会知道哪个标题在哪个不在。我曾尝试使用此处所述的 class="{sorter: 'fancyNumber'}" 命令：[http ://tablesorter.com/docs/example-meta-parsers.html](http://tablesorter.com/docs/example-meta-parsers.html)

**编辑：**看起来其中一列工作正常，但此列仍有问题。也许是因为它有数字和逗号分隔的数字？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-18T18:00:07.710

对于遇到这个问题的任何人。我必须将类添加到我的标题行。因此，对于我想要排序的任何标题，我添加了这个类：

```
<th class=\"{sorter: 'fancyNumber'}\"> 
```

默认情况下，这会打开分拣机，使其运行良好。

是什么让我意识到我的错误是像这样打开调试器。

```
$("#tblInfo").tablesorter({debug:true, widgets: ['zebra'], widgetZebra: { css: ['d0', 'd1']} }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-10T14:49:07.360

如果您忘记包含元数据插件，也会发生这种情况

** 由于这是 Google 上的第一个搜索结果，因此在此处发布。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-06-09T06:51:54.583

这是我所做的：

```
$(document).ready(function() {
      $.tablesorter.addParser({
        id: 'fancyNumber',
        is:function(s){return false;},
        format: function(s) {return s.replace(/[\,\.]/g,'');},
        type: 'numeric'
    });
    $("table").tablesorter({headers: {0: {sorter: 'fancyNumber'}}});
}); 
```

使用逗号和点分隔符。

测试它[http://jsbin.com/equci5](http://jsbin.com/equci5)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-02T14:53:05.153

我找到了一个适合我的解决方案。在tablesorter.js中，修改*formatFloat()*函数如下：

```
this.formatFloat = function (s) {
            var i = parseFloat(s.replace(/[,]/g, ''));
            return (isNaN(i)) ? 0 : i;
        }; 
```

这将替换干扰排序的逗号。[在这里](https://forum.jquery.com/topic/tablesorter-plugin-wrong-sort-with-thousands-separators)找到了答案。希望这可以帮助...！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T03:16:06.020

尝试在 .tablesorter() 声明中显式分配解析器。

```
.tablesorter( { headers: { 0: { sorter:'fancyNumber' } }); 
```

[查看源代码](http://tablesorter.com/docs/example-parsers.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-18T14:38:55.027

正如 Jared 所提到的，您需要指定哪个列使用哪个 Parser，如果您不知道该列的索引，那么您可以使用以下方法找到它：

```
var fancyIndex = $('th.fancyColumn').prevAll().length
var headers = {};
headers[fancyIndex] = {sorter:'fancyNumber'}

$("table").tablesorter({headers:headers}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-09T16:34:10.120

我，试试这个正则表达式：/(\d{1,3})?(\,\d{3})*/

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-07-06T23:49:32.320

解析器只查看第一个 tbody 行来检测使用哪个解析器。我猜你的第一行没有任何逗号。我遇到了同样的问题，最后只是强制使用我想要的解析器，使用 class="{sorter: 'fancyNumber'}"

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-12-21T01:48:03.853

解析器应该可以工作是完全正确的，原因是插件中的错误。简而言之，插件认为它可以正确地对带有逗号的数字进行排序，因此使用其内置的排序器，但随后无法正确排序。

有几种方法可以修复它。

首先，您可以（如您上面建议的那样）强制使用您的排序功能（在插件初始化时在 javascript 中或在 javascript 中）。

其次，您可以编辑插件以优先使用您自己的功能，这可以通过反转插件第 220 行的 for 循环的方向来实现。

第三，您可以通过修改数字检测功能以不接受逗号（插件的第 861 行）或修改默认数字排序器以处理逗号（插件的第 852 行）来修复损坏的默认排序行为。

我在 tablesorter google 代码页上提出了这个问题：[http ://code.google.com/p/tablesorter/issues/detail?id=6](http://code.google.com/p/tablesorter/issues/detail?id=6)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-11T05:06:06.100

我找到了一个适合我的解决方案。在tablesorter.js中，修改formatFloat()函数如下：

```
this.formatFloat = function (s) {
            s = s.toString();
            var i = parseFloat(s.replace(/[,]/g, ''));
            return (isNaN(i)) ? 0 : i;
        }; 
```

这将替换干扰排序的逗号。在这里找到了答案。希望这可以帮助...！

# delphi - Delphi ListView“卡在”鼠标事件中

> ID：876094
> 
> 赞同：1
> 
> 时间：2009-05-18T03:09:27.953
> 
> 标签：delphi, listview

情况有点难以解释，我会尽力而为。

我有一个 ListView，它有一个右键菜单。其中一个菜单项打开一个新的非模态表单。通常用户单击菜单项，新表单出现并且很好。

但是，如果用户通过单击 ListView 中没有显示 ListItem 的区域来调出右键菜单，例如在最后一个 ListItem 下方，然后单击菜单项，则显示非模态表单，但光标似乎是在ListView中卡在鼠标左键按下状态，即非模态窗体在最前面，但是当我移动鼠标时，它使那些拖动区域矩形在背景ListView中，好像鼠标按钮被按住.

我尝试过使用各种BringToFront、SetFocus，并尝试使用SendMessage 来模拟鼠标点击以绕过它，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-09T00:15:07.720

发现了问题。经过进一步调查，ListView 实际上是 TListView 的自定义后代，并且它有自己的（错误的）处理弹出菜单的方式。

我将它切换为使用 TListView 的默认 TListView.PopupMenu 并且效果很好。

感谢 Lars Truijens 建议构建一个最小的测试应用程序，这让我找到了正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T07:59:05.970

在我看来，列表视图没有正确处理[WM_CANCELMODE](http://msdn.microsoft.com/en-us/library/ms632615(VS.85).aspx)消息，该消息告诉它在捕获鼠标时失去焦点。不知道如何解决这个问题，除非向它发送鼠标向上消息。

# c# - 为什么有一个 Create 方法而不是使用“new”？

> ID：876095
> 
> 赞同：11
> 
> 时间：2009-05-18T03:10:26.313
> 
> 标签：c#, constructor

使用静态构造函数有哪些优点以及何时适合使用？

```
public class MyClass
{
    protected MyClass()
    {
    }

    public static MyClass Create()
    {
        return new MyClass();
    }
} 
```

然后通过创建类的实例

```
MyClass myClass = MyClass.Create(); 
```

而不是仅仅拥有一个公共构造函数并使用创建对象

```
MyClass myClass = new MyClass(); 
```

如果 Create 方法返回类实现的接口的实例，我可以看到第一种方法很有用......它会强制调用者创建接口的实例而不是特定类型。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-18T03:31:16.793

这是工厂模式，它通常可用于生成子类，但允许静态方法的参数确定哪一个。

如果并不总是需要新对象，也可以使用它，例如在池实现中。

如果对象的所有实例都需要在创建时被缓存或以其他方式注册，也可以使用它。这确保了客户不会忘记这样做。

当然，它是 Singleton 模式的重要组成部分。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-18T03:33:03.297

这不是单例...如果是，Create 每次都会返回相同的实例。

这是工厂模式。我通常会用接口而不是类来做到这一点，所以我必须在这里延伸，但一个人为的例子是：

```
public static MyClass Create()
{
    if(OS == Windows)
        return new MyDerivedClassForWindows();
    else if(OS == Linux)
        return new MyDerivedClassForLinux();
    etc....
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-18T03:55:54.163

您发布的特定示例与使用普通构造函数相比并没有任何优势。然而，有两种**常见的**模式，它们使用这样的方法来产生一个对象：

**单例模式**

当您希望防止创建对象的多个实例但仍希望利用类的面向对象方面（例如，字段、属性、无参数方法）时，可以使用单例模式。例子：

```
public class MySingletonClass
{
    private MySingletonClass currentInstance = null;

    public MySingletonClass CreateInstance()
    {
         if (currentInstance == null)
         {
              currentInstance = new MySingletonClass();
         }
         else
         {
              return currentInstance;
         }
    }
} 
```

**工厂模式**

工厂模式是抽象具体类的创建的绝佳机会；例如，假设您有一些 XML，并且根据您在 XML 中看到的节点（NodeA、NodeB 或 NodeC），您有一个不同的类来处理它。例子：

```
public class MyXmlProcessorFactory
{
    public static IMyXmlProcessor GetMyXmlProcessor(XmlDocument document)
    {
         XmlNode rootNode = document.DocumentElement;

         if (rootNode.SelectSingleNode("NodeA") != null)
         {
              return new NodeAMyXmlProcessor();
         }
         else if (rootNode.SelectSingleNode("NodeB") != null)
         {
              return new NodeBMyXmlProcessor();
         }
         else if (rootNode.SelectSingleNode("NodeC") != null)
         {
              return new NodeCMyXmlProcessor();
         }
         else
         {
              return new DefaultMyXmlProcessor();
         }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-18T03:46:04.200

Guid.NewGuid() 静态方法证明的另一个原因是类型是否为结构。在这种情况下，CLR 要求默认无参数构造函数创建一个新实例，其中所有字段都初始化为默认值。对于 Guid，这意味着：

指导 g = new Guid();

将是 Guid.Empty。显然，您希望能够创建一个随机的新 Guid，因此 Guid.NewGuid() 方法是一种方法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-18T04:30:05.530

你是对的。这不是单例模式。这是工厂模式。

使用 Create() 而不是 new Give 可以为方法赋予有意义的名称，从而使用户更加清晰

拿这个例如：

```
public class User
{
    public int id;
    public string userName;
    public string password;
    public string role;

    private User() { }

    public static User CreateByCredentials(string uid, string pwd)
    {
        User user = new User();
        user.userName = uid;
        user.password = pwd;
        return user;
    }

    public static User CreateById(int id)
    {
        User user = new User();
        user.id = id;
        return user;
    }

} 
```

这种方法有两个优点：

1.  我们可以返回一个空对象，这是构造函数无法做到的（这在所有情况下都可能有用，也可能不有用。）
2.  如果有很多不同的方法来创建一个对象，它会让你有机会提供更有意义的函数名。在示例中，您有 User.CreateByCredentials（字符串用户名，字符串密码）和 User.CreateById（int id）。您可以通过构造函数重载来完成相同的功能，但很少有相同的清晰度。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-18T03:17:36.297

在多个类实例共享相同的初始化数据块的情况下可能很有用——这是 OOP 工厂模式。

一个例子是一个连接到数据库的类——只需要一个连接，并且可以被类的所有实例共享。

[http://en.wikipedia.org/wiki/Factory_pattern](http://en.wikipedia.org/wiki/Factory_pattern)

比利3

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-18T04:36:56.237

更正式地说，它通常被称为[用工厂方法替换构造函数](http://www.refactoring.com/catalog/replaceConstructorWithFactoryMethod.html)

> 创建对象时，您要做的不仅仅是简单的构造。

即，通过使用工厂方法，您可以更加明确，并通过简单的构造函数为代码提供更多可用的创建选项。

我推荐这本书[Refactoring:](http://www.martinfowler.com/books.html#refactoring) [Improvement the Design of Existing Code (Fowler)](http://books.google.com/books?id=1MsETFPD3I0C&dq=refactoring+fowler&printsec=frontcover&source=bn&hl=en&ei=-9kRSsKADqOctgPRpJT7Ag&sa=X&oi=book_result&ct=result&resnum=4#PPP1,M1)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-18T03:17:08.450

这种模式通常用于[Singleton 模式](http://en.wikipedia.org/wiki/Singleton_pattern)。当您有一个类或外观时，它很有用，该类或外观在程序的生命周期中只应实例化一次，通常是因为对象将使用的资源。

[如何在 C# 中](http://www.switchonthecode.com/tutorials/csharp-tutorial-singleton-pattern)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-18T03:17:14.643

您可能会这样做有多种原因，例如总是从固定对象池（包括 Singleton 对象）返回一个实例，或者如您所说，返回一个接口的实例。

但是，如果您没有明确的理由这样做，请不要这样做。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-18T03:21:54.710

这种方式只*常用*于Singletons，否则这种方式是非正统的。在您了解它要做什么之前不要使用它。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-18T03:32:35.637

如果您使用私有构造函数，这是强制 MyClass 成为最终的好方法。这样子类就不能被创建，因为它们的构造函数不能访问超级的构造函数。

另一个优点是当你有一个构造函数的参数时。然后，您可以使用模拟命名参数来命名创建：

```
public static MyClass createWithDays(int days) {
...
} 
```

`new MyClass(5)`现在比较`MyClass.createWithDays(5)`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-18T03:35:01.890

除了当它是一个单例时，`MyClass.Create`如果实现的人`MyClass.Create`可能想要返回一个子类`MyClass`......例如在测试期间它可以返回一个`MyClassWithExtraTestingFunctionality`子类的实例......或者，取决于配置选项，`MyClassBeingRemotedOverTheNetwork`子类的实例...

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-05-18T03:45:33.590

许多其他答案都涵盖了这个想法可能有用的特定场合。Spring、Castle等很多IoC框架都采用了封装实例创建的思想。这个想法是，通过集中实例创建，您可以自定义应用程序的配置以使用不同的对象集。一个常见的例子是日志记录。通过更改配置，您可以告诉您的记录器工厂根据情况生成不同的记录类实例。

如果应用这个想法，可能会导致非常松散耦合的系统，在部署后甚至在运行时很容易改变。但是，当您有另一个级别的间接时，复杂性会增加。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-05-18T03:50:51.750

静态构造函数也是为构造函数提供更明确名称的好方法。对于默认参数也很有用

例如：Myclass.create(); 代替新的 Myclass(defaultParam1,defaultParam2 ... )

[Joshua Bloch 用有效的 Java](https://rads.stackoverflow.com/amzn/click/com/0321356683)谈论它（第 1 项）

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-18T03:44:35.710

当您希望框架、类或其他一些配置来确定实际创建对象的位置时，这也很常用。当您使用新的构造方法时，它是在本地创建的。如果您使用这种方法，它可能会通过服务调用远程创建并返回等。这是 Rocky Lhotka 在[CSLA 框架](http://lhotka.net/cslanet/Default.aspx#)中采用的方法。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-05-18T04:44:27.847

这也可以用于延迟加载的情况。出于某种原因，您希望对象存在的位置，但除非需要，否则不想执行真实构造函数中涉及的所有繁重工作。因此，您可以创建一个单独的方法 Create 并在您准备好进行繁重的工作时调用它。

@Rashmi Pandit 还写道：

```
 public static User CreateByCredentials(string uid, string pwd)
    {
       ....
    }

    public static User CreateById(int id)
    {
    ...
    } 
```

对于您的回应，您不能只使用具有不同方法签名的重载构造函数而不是创建两个不同的创建方法吗？

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-05-18T05:12:07.477

请注意，您只能在使用构造函数方法时使用构造函数初始化。

```
 public void Example()
    {
        var person = new Person
                         {
                             GivenName = "John",
                             FamilyName = "Smith",
                             Address = new Address
                                           {
                                               Street = "Wallace",
                                               Number = 12
                                           },
                             PhoneNumbers = new List<PhoneNumber>
                                                {
                                                    new PhoneNumber
                                                        {
                                                            Number = 1234234,
                                                            AreaCode = 02
                                                        },
                                                    new PhoneNumber
                                                        {
                                                            Number = 1234234, AreaCode = 02
                                                        }
                                                }
                         };
    }

    internal class PhoneNumber
    {
        public int AreaCode { get; set; }

        public int Number { get; set; }
    }

    internal class Address
    {
        public int Number { get; set; }

        public string Street { get; set; }
    }

    internal class Person
    {
        public Address Address { get; set; }

        public string GivenName { get; set; }

        public string FamilyName { get; set; }

        public List<PhoneNumber> PhoneNumbers { get; set; }
    }
} 
```

# php - 如何使用 ZF 提取完整的 url（子域、域和目录）？

> ID：876102
> 
> 赞同：11
> 
> 时间：2009-05-18T03:14:11.670
> 
> 标签：php, zend-framework

有没有办法使用 ZF 中的功能来获取完整的 url
(http[s]::/xxx.yyyy.ddd/ggg/hhh)

我目前在？
baseUrl() 只会给我路径，而不是域和子域。

我知道如何从 $_SERVER 中提取它，试图避免这种情况。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-18T03:38:31.043

使用控制器的 getRequest() 方法获取 Zend_Controller_Request_Http 对象的实例。然后尝试请求对象的 getHttpHost() 方法。所以在你的控制器中，它会是这样的：

```
$hostName = $this->getRequest()->getHttpHost(); 
```

构建您的完整 URL，如下所示：

```
$this->getRequest()->getScheme() . '://' . $this->getRequest()->getHttpHost() . $this->getRequest()->getRequestUri(); 
```

# python - PyQt：加载“重”库时的启动画面

> ID：876107
> 
> 赞同：3
> 
> 时间：2009-05-18T03:15:35.257
> 
> 标签：python, performance, matplotlib, pyqt

我使用的 PyQt 应用程序`matplotlib`第一次加载需要几秒钟，即使在快速机器上也是如此（第二次加载时间要短得多，因为 Windows 将 DLL 保存在内存中）。

我想知道`matplotlib`在加载库时显示启动屏幕是否可行。实际加载发生在哪里 - 是在`from`执行行时？如果是这样，我怎样才能使这一行在启动屏幕期间执行，并且仍然能够在整个代码中使用该模块？

一个相关的难题是如何对此进行测试——我可以要求 Windows 为每次执行加载 DLL 而不是缓存它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T03:33:49.270

是的，加载模块发生在 import 语句所在的行。如果您`QApplication`在此之前创建并显示您的启动画面，您应该能够做您想做的事——您还需要`QApplication.processEvents()`在需要启动屏幕更新时调用新消息。

# iphone - 已通过的 iphone 的 udocumented api

> ID：876111
> 
> 赞同：3
> 
> 时间：2009-05-18T03:17:03.833
> 
> 标签：iphone, api

有没有人用“未记录的 api”创建了一个 iphone 应用程序并通过了批准？如果是这样，您能否向全世界分享您的流程以及对苹果评论的任何后续回应，这可能会成为您的理由？

一切顺利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-05T15:40:17.673

据我所知，允许访问实时摄像机图像的 API 不是公开的，但有许多应用程序使用它们。其中一些甚至被苹果公司推荐。

在这些情况下，使用未记录的 API 似乎并没有阻止 Apple 批准，但还有其他实例使用相同的 API 集尚未获得批准。您可能想阅读[http://www.appleiphonereview.com/news/apple-blocks-video-camera-app/](http://www.appleiphonereview.com/news/apple-blocks-video-camera-app/)。

总而言之，对我来说，使用未记录的 API 似乎是一项非常冒险的事情。最终，苹果掌握了所有的牌。你想浪费你的时间来开发一些会被拒绝的东西吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T11:49:17.693

我忘记了应用程序的名称，但我读到有人花时间重新实现 Cover Flow，但在最初将其提交给 Apple 批准时仍然被拒绝。

虽然这是几个月前的事了，所以苹果可能从那时起改变了他们的流程，但这表明他们没有一个自动化的流程来检查未经授权的 API 的使用。如果这仍然是正确的，这意味着您对“未记录的 API”的使用可能会被忽视，除非它非常明显并且审阅者可以关注它们的使用。

说了这么多，你真的要冒险吗？您可能不喜欢这些规则，但您在注册开发者计划时确实同意了这些规则。与某些“品味”拒绝不同，这条规则一点也不模棱两可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T03:21:11.700

[http://news.cnet.com/8301-13579_3-10108348-37.html](http://news.cnet.com/8301-13579_3-10108348-37.html)

谷歌的搜索应用程序使用了未记录的 API，但通过了审查过程。据我了解，在这种情况下，普通开发人员不会获得批准——谷歌只是“特殊”。

# javascript - 如何确定 div 是否滚动到底部？

> ID：876115
> 
> 赞同：113
> 
> 时间：2009-05-18T03:19:05.747
> 
> 标签：javascript, scroll, scrollbar

在不使用 jQuery 或任何其他 JavaScript 库的情况下，如何确定带有垂直滚动条的 div 是否一直滚动到底部？

我的问题不是如何滚动到底部。我知道该怎么做。我想确定 div 是否已经滚动到底部。

这不起作用：

```
if (objDiv.scrollTop == objDiv.scrollHeight) 
```

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2009-05-18T03:26:46.493

你非常接近使用`scrollTop == scrollHeight`.

`scrollTop`指滚动位置的顶部，这将是`scrollHeight - offsetHeight`

您的 if 语句应如下所示（不要忘记使用三等号）：

```
if( obj.scrollTop === (obj.scrollHeight - obj.offsetHeight))
{
} 
```

编辑：更正了我的答案，完全错误

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2017-03-17T15:07:15.537

为了在考虑边框、水平滚动条和/或浮动像素计数等因素时获得正确的结果，您应该使用...

```
el.scrollHeight - el.scrollTop - el.clientHeight < 1 
```

**注意：**如果你想得到正确的结果，你必须使用 clientHeight 而不是 offsetHeight。只有当 el 没有边框或水平滚动条时，offsetHeight 才会给你正确的结果

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-07-03T20:25:31.377

这次聚会有点晚了，但是当...时，上述答案似乎都不是特别有效

*   显示缩放应用于超高清显示器的操作系统
*   缩放/缩放应用于浏览器

为了适应所有可能发生的情况，您需要对计算的滚动位置进行四舍五入：

```
Math.ceil(element.scrollHeight - element.scrollTop) === element.clientHeight 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-01-26T08:39:02.130

如果元素位于其滚动的末尾，则返回 true，否则返回 false。

```
element.scrollHeight - element.scrollTop === element.clientHeight 
```

[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-07-03T17:58:08.393

```
function difference(first,sec){
  return Math.abs(first-sec);
}

document.getElementById("myDIV").addEventListener("scroll", function() {
  var diff = difference((this.scrollTop+this.clientHeight),(this.scrollHeight));

   if(diff < 5) {
      alert('Scroll Ends Here');
    }
});
```

```
<!DOCTYPE html>
<html>
<head>
<style>
#myDIV {
  height: 250px;
  width: 250px;
  overflow: none;
  overflow-y: auto;
}

#content {
  height: 800px;
  width: 2000px;
  background-color: coral;
}
</style>
</head>
<body>

<p>Scroll inside the div element to display the number of pixels the content of div is scrolled horizontally and vertically.</p>

<div id="myDIV">
  <div id="content">Scroll inside me!</div>
</div>

<p id="demo"></p>

</body>
</html>
```

没有 JQuery 或 Javascript 库，它运行良好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-07T12:36:46.810

```
<!DOCTYPE HTML> 
<html> 
<head> 
    <title>JQuery | Detecting when user scrolls to bottom of div. 
    </title> 
</head> 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script> 

<body style="text-align:center;" id="body"> 
    <h1 style="color:green;">  
            Data Center  
        </h1> 
    <p id="data_center" style="font-size: 17px; font-weight: bold;"></p> 
    <center> 
        <div class="div" style="width:200px; height:150px; overflow:auto;"> 
            <h1>Hello Friends</h1> 
            <h1>Hello Friends</h1> 
            <h1>Hello Friends</h1> 
            <h1>Hello Friends</h1> 
            <h1>Hello Friends</h1> 
            <h1>Hello Friends</h1> 
            <h1>Hello Friends</h1> 
            <h1>Hello Friends</h1> 
            <h1>Hello Friends</h1> 
            <h1>Hello Friends</h1> 
            <h1>Hello Friends</h1> 
            <h1>Hello Friends</h1> 
            <h1>Hello Friends</h1> 
        </div> 
    </center> 
    <script> 
        $('#data_center').text('Scroll till bottom to get alert!'); 
        jQuery(function($) { 
            $('.div').on('scroll', function() { 
                if ($(this).scrollTop() + $(this).innerHeight() >=  $(this)[0].scrollHeight) {                     
                    alert('End of DIV has reached!'); 
                } 
            }); 
        }); 
    </script> 
</body> 

</html> 
```

它对我有用，我希望，这也会对你有所帮助。谢谢。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-06T10:51:18.590

这个对我有用。略有不同的做法。

```
if (list.scrollTop + list.clientHeight >= list.scrollHeight - 1) {
    return 'scrollOnTheBottom';
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-12T06:00:05.143

我在[https://www.geeksforgeeks.org/how-to-detect-when-user-scrolls-to-the-bottom-of-a-div/](https://www.geeksforgeeks.org/how-to-detect-when-user-scrolls-to-the-bottom-of-a-div/)上找到的解决方案对我有用，希望它也对你有用.

```
$(window).on('scroll', function() { 
    if ($(window).scrollTop() >= $( 
        '.div').offset().top + $('.div'). 
        outerHeight() - window.innerHeight) { 
            alert('You reached the end of the DIV'); 
        } 
}); 
```

# servlets - Tomcat 6 和 Tomcat 5.5 不兼容的错误

> ID：876123
> 
> 赞同：2
> 
> 时间：2009-05-18T03:22:18.953
> 
> 标签：servlets, tomcat6, tomcat5.5

我使用 Tomcat 6 开发了一个 Tomcat 应用程序进行测试。我现在已经将它部署到 Tomcat 5.5 - 当我调用 servlet 时，我得到一个对我来说没有多大意义的错误。有谁知道是什么导致了这个错误。

例外

javax.servlet.ServletException：分配 servlet 实例时出错 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117) org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174) org.apache .coyote.http11.Http11Processor.process(Http11Processor.java:874) org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665) org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint .java:528) org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81) org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689) java.lang .Thread.run(Thread.java:595) 根本原因

java.lang.UnsupportedClassVersionError: .class 文件中的错误版本号 java.lang.ClassLoader.defineClass1(Native Method) java.lang.ClassLoader.defineClass(ClassLoader.java:620) java.security.SecureClassLoader.defineClass(SecureClassLoader.java: 124) org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1853) org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:875) org.apache.catalina.loader.WebappClassLoader.loadClass( WebappClassLoader.java:1330) org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1209) java.security.AccessController.doPrivileged(Native Method) org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java :117) org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174) 组织。apache.coyote.http11.Http11Processor.process(Http11Processor.java:874) org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665) org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket( PoolTcpEndpoint.java:528) org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81) org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689) java。 lang.Thread.run(Thread.java:595)runIt(LeaderFollowerWorkerThread.java:81) org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689) java.lang.Thread.run(Thread.java:595)runIt(LeaderFollowerWorkerThread.java:81) org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689) java.lang.Thread.run(Thread.java:595)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T03:32:22.720

这与tomcat无关。该错误是由 .class 文件版本差异引起的。

很可能，您已经用 Java6 编译了一个 .class 文件，并尝试在 Java5 上运行它。

解决方案是在较新版本的 Java 上运行 tomcat5.5，或者只是重新编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-02-14T20:04:26.380

我也遇到了这个。问题实际上是在Tomcat 6中编译的jsps。所以当我切换到Tomcat 5时，这些编译的jsps是问题的原因。解决办法是清除工作目录。

但是，只有当您指定由 Tomcat 6 和 5 共享的 CATALINA_BASE 时，这才是问题所在。

# struts2 - struts2:getting value of multiple checkbox and made them checked on another page

> ID：876127
> 
> 赞同：1
> 
> 时间：2009-05-18T03:23:01.323
> 
> 标签：struts2

I am working on struts2\. I have 3 checkbox in my jsp page (say a.jsp) like

```
<s:checkbox name="authority" fieldValue="ORIGINATOR"/>
<s:checkbox name="authority" fieldValue="EVALUATOR"/>
<s:checkbox name="authority" fieldValue="EXECUTOR"/> 
```

Suppose I checked first two and when I fetched the value of “authority” in my action class in gives “ORIGINATOR, EVALUATOR”. Now in another jsp page (say b.jsp) I have all these checkbox as it is and I need those two checkbox should be checked here what I have checked in my previous jsp page (a.jsp).

Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T03:32:29.740

You can set the "value" property to "true" to make this check box checked. Understood? For example, you can write the code like this: < s:checkbox name="authority" fieldValue="ORIGINATOR" value="%{var}" > while the "var" is in the server side.

Well, this is an example:

the a.jsp

```
<%@ page language="java" contentType="text/html; charset=utf-8"
    pageEncoding="utf-8"%>
<%@ taglib uri="/struts-tags" prefix="s" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
    <s:form action="Handler" method="post">
        <s:checkbox name="authority" fieldValue="ORIGINATOR" label="ORIGINATOR"/>
        <s:checkbox name="authority" fieldValue="EVALUATOR" label="EVALUATOR"/>
        <s:checkbox name="authority" fieldValue="EXECUTOR" label="EXECUTOR"/>
        <s:submit label="Submit"></s:submit>
    </s:form>
</body>
</html> 
```

b.jsp

```
<%@ page language="java" contentType="text/html; charset=utf-8"
    pageEncoding="utf-8"%>
<%@ taglib uri="/struts-tags" prefix="s" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
    <s:form>
        <s:checkbox name="authority" fieldValue="ORIGINATOR" value="%{isORIGINATORSet}" label="ORIGINATOR"/>
        <s:checkbox name="authority" fieldValue="EVALUATOR" value="%{isEVALUATORSet}" label="EVALUATOR"/>
        <s:checkbox name="authority" fieldValue="EXECUTOR" value="%{isEXECUTORSet}" label="EXECUTOR"/>
    </s:form>
</body>
</html> 
```

The handler is:

```
package com.sesoft.test;

import com.opensymphony.xwork2.Action;

public class Handler implements Action{

    private String isORIGINATORSet = "false";

    private String isEVALUATORSet = "false";

    private String isEXECUTORSet = "false";

    private String[] authority;

    @Override
    public String execute() throws Exception {

        for(String s : authority){

            if(s.equals("ORIGINATOR"))
                isORIGINATORSet = "true";
            if(s.equals("EVALUATOR"))
                isEVALUATORSet = "true";
            if(s.equals("EXECUTOR"))
                isEXECUTORSet = "true";
        }

        return Action.SUCCESS;
    }

    public void setAuthority(String[] authority){

        this.authority = authority;
    }

    public String getIsORIGINATORSet(){

        return this.isORIGINATORSet;
    }

    public String getIsEVALUATORSet(){

        return this.isEVALUATORSet;
    }

    public String getIsEXECUTORSet(){

        return this.isEXECUTORSet;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-10-14T01:24:55.797

convert the comma separated `string` to `String[]` and set the string array as value to `checkboxlist`.

# jakarta-ee - 死信队列和退出队列有什么区别？

> ID：876137
> 
> 赞同：21
> 
> 时间：2009-05-18T03:27:47.410
> 
> 标签：jakarta-ee, jms, ibm-mq

死信队列和退出队列有什么区别？

在 WebSphere MQ 术语和应用程序服务器方面。

所有 J2EE/JEE 应用程序服务器都有一个 MQ 提供程序，它们是否也有一个死信队列的构造，或者是特定于 WebSphere MQ 的东西？

我对退出队列的理解如下：

如果在指定的尝试次数后 MQ 无法将消息传递到目标，它会将消息移动到回退队列。

我对死信队列没有清楚的了解。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-18T05:02:23.797

死信队列总是在 MQSeries 中使用（我最后一次使用 MQ）来存储到达队列管理器但队列不存在的消息。

例如，如果消息是队列管理器**X**和队列**Y的地址，它将通过管理器****X**的通道到达。

如果接收通道发现没有队列**Y**，它将被放入死信队列。

另一方面，回退队列更像是应用程序级别的东西（至少就 MQ 而言）。当 MQ 客户端由于某种原因无法处理消息时，它可以将其退回以供以后处理（返回到它的原始队列）。

如果它被撤销太多次（可以配置阈值），它会被移动到撤销队列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-23T03:30:55.953

感谢您的回答。我还发现，如果应用程序由于某种原因无法将消息移动到 Back Out Queue (BOQ)，则会尝试将队列移动到死信队列 (DLQ)。

在我们的应用程序中它发生了。Back Out Queue 存在一些权限问题，因此消息无法写入 BOQ，最终进入死信队列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T03:44:05.083

死信队列的行为与回退相同。我将死信队列视为无法在错误或回退队列中恢复的消息的火葬场，并且需要收集一些最后的非业务特定数据。一旦信息被捕获，消息就会被永久删除。回退有助于分析可能需要恢复以完全重新处理或发送回应用程序区域供他们决定的数据的消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-16T07:54:39.337

死信队列也是本地队列。如果我们试图将消息从一个队列放入另一个队列，但消息没有发送到正确的目的地，此时消息将进入死信队列。

# php - 如何在 php 中生成安全的激活字符串？

> ID：876139
> 
> 赞同：19
> 
> 时间：2009-05-18T03:29:04.647
> 
> 标签：php, email, auto-generate, confirmation

用户订阅电子邮件到我的网站后。我的网站将生成一封电子邮件确认并发送给他们。在电子邮件内容中，我需要包含激活密钥，例如：

www.domain.com/activate.php?key=$generatedKey

你如何生成密钥？使用 sha1($email)??

生成密钥后，我将其存储在数据库中，这样当用户单击链接时，我可以使用数据库对其进行验证？我是新手，请指教.. 我需要一个电子邮件确认脚本..

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-18T03:34:07.037

就个人而言，我只是使用以下组合：

```
$generatedKey = sha1(mt_rand(10000,99999).time().$email); 
```

发生冲突的可能性很小，但我建议在发送之前先检查您的数据库（使用 UNIQUE 约束是一种简单的方法）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-18T04:34:21.087

你基本上有几个选择：

1）创建一个看似随机的唯一标识符，并将其存储在与它对应的用户名的数据库中

2) 生成随机密码，并在链接中包含用户名和密码，并将密码存储在数据库中

3) 使用单向散列函数（md5、sah1 等）和秘密标识符来加密用户标识符。您不必将加密的用户标识符存储在数据库中。

选项 1 很困难，因为您必须担心检查数据库以查看密钥是否已存在。但是，很好的是 URL 不包含被激活的用户名。

如果您将来已经打算使用某种数据库来存储用户信息（可能至少是密码），则可以使用选项 2。向数据库添加另一列并不需要太多。发送电子邮件时，将用户名和类似 $key = sha1(rand(1, 99999) . $username) 的内容保存在包含用户名的行的另一列中。然后让您的链接看起来像这样：http: [//you.com/activation.php](http://you.com/activation.php?user=) ? user= $username&key=$key。在activation.php 中，您检查键是否等于存储在数据库中的值。

如果您想在数据库中使用更少的存储空间，选项 3 将起作用。您可以使用类似 $key = sha1($mysecret . $username) 作为秘密标识符。使用只有你知道的奇怪的东西作为 $mysecret，例如 'aaafj_my_secret_adfaf'。使用与选项 2 中相同类型的 URL。但是，由于您可以仅根据 $username 生成 $key，因此您不需要存储它。因此，当您在activation.php 中进行处理时，只需检查是否 sha1($mysecret . $_GET[username]) == $_GET[key]。如果是这样，您就知道您拥有正确的用户。从理论上讲，只要注册足够多，有人就可以计算出您对 $mysecret 的价值并生成激活密钥。但是，您肯定会注意到在他们开始计算它之前需要进行数十亿或更多的注册。所需的激活次数取决于散列函数的密钥大小。使用 sha1（160 位）与 md5（128 位）更难猜测您的 $mysecret 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T03:34:36.880

```
$guid=md5(uniqid(mt_rand(), true)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T03:54:18.450

如果您将激活字符串存储在数据库中并稍后检查，则根本不需要哈希！

你只需要一个很长的随机字符串。你可以随心所欲地生成它，只要让它变长。事实上，理想情况下，它应该与电子邮件或用户名无关。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T03:34:50.783

应该这样做，但是您可以通过添加一些盐来改进它，例如：

```
$key = sha1($email . 'doYouLikeSauce'); 
```

其他方法只是生成一个随机密码并通过电子邮件发送。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-10T05:36:37.967

```
$code = md5($_POST['username'] . microtime()); 
```

# image - 查找裁剪后的相似图像

> ID：876142
> 
> 赞同：1
> 
> 时间：2009-05-18T03:30:12.460
> 
> 标签：image

2 张图像具有相同的颜色、图案等。一张图像是从另一张图像中裁剪出来的。我发现的算法主要使用位置来比较图像之间的差异，因此它会为裁剪图像产生错误的结果。如何知道这两张图片相似？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-07T14:57:59.727

您确实需要提供更多信息，但也许您可以使用互相关算法？您基本上将裁剪后的图像滑过图像中的每个点以进行匹配，并找到相似之处。如果它们在某个阈值以上匹配，您可以假设较小的图像是该位置较大图像的子集。

您可以通过使用 FFT 算法而不是实际滑动它来大大加快该过程。

维基百科称之为“[相位相关](http://en.wikipedia.org/wiki/Phase_correlation)”

MATLAB 示例：[使用归一化互相关注册图像](http://www.mathworks.com/products/demos/image/cross_correlation/imreg.html)

[![替代文字](https://i.stack.imgur.com/2OSbH.png)](https://i.stack.imgur.com/2OSbH.png)
[（来源：[mathworks.com](http://www.mathworks.com/products/demos/image/cross%5Fcorrelation/imreg5.png)）]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T04:46:31.233

了解有关您的问题域的更多信息会很有帮助。例如，您是否试图从 100 张图片中挑选出裁剪后的样本来自哪一张？或者您甚至不知道裁剪后的样本是否来自您图书馆中的任何图像？

我不是图像处理专家，但我使用过一种或一些东西。首先想到的是，您可以尝试进行某种颜色平均，看看您是否可以创建一个 huristic，让您找到可能的候选人。

找到裁剪样本的平均 RGB。然后查看它是否可能与样本匹配，在图像中的多个点中找到局部 RGB 颜色平均值。如果裁剪后的 RBG 平均值与图像中的所有局部平均值相差太远，那么它们之间的相关性不太可能。

一旦你缩小了一些候选人的范围，找到确切的位置仍然很棘手。尝试处理图像的子采样版本。如果原件。图像为 2000x2000，对两张图像进行 10 次采样以获得 200x200 的主图像。对裁剪后的图像执行相同的子样本，然后查看最适合的位置。然后反复减少二次采样的数量并微调您裁剪图像的确切位置。你仍然在做一些蛮力，但它在一个小 100 倍的图像上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T21:21:39.520

这可能是矫枉过正，但我​​会检查[SIFT](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)算法。它通常用于为全景图排列图像时使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T04:38:54.160

如果您使用的是 OpenCV，您想要的函数是 MatchTemplate()，然后是 MinMaxLoc() 来找到最佳匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T05:04:12.203

哎呀！多年前，我对此进行了抨击，但从未为我的问题想出可行的答案。自从我没有尝试实施以来，我有一些想法，我会把它们扔掉，以防它们对你有任何好处：

我不同意 Al Crowley 关于平均 RGB 值的说法——裁剪很可能是移除与目标完全不同的对象。

此外，观察：将图像缩小为 8x8 缩略图（对于人眼来说不够大）并取每个组件差异的平方在挑选重复项方面做得很好，即使边缘周围有小作物也能很好地工作. 理想情况下，应该在做缩略图之前对对比度进行标准化，我没有这样做，发现当它们根本没有相似性时，它会声明一堆低对比度的图像是相互欺骗的。这种方法每个图像仅使用 192 字节，因此允许您比较内存中的大量图像，尽管它仍然是 O(n^2) 算法。（我这样做是为了让你可以随时关闭程序，它会转储状态信息并关闭，下次它会从中断的地方恢复。）

鉴于您所描述的问题，我倾向于尝试对图像进行一组测试作物并与每种作物进行比较。当您找到可能的候选人时，然后开始使用更大的图像并尝试通过慢跑几个像素来缩小范围，看看它是变得更好还是更糟。除了这种例程的性能非常缓慢之外，我无法想象其他任何事情。

# mysql - Eclipse/MySQL 集成插件？

> ID：876143
> 
> 赞同：33
> 
> 时间：2009-05-18T03:30:16.610
> 
> 标签：mysql, eclipse, plugins

我应该在 Eclipse 中安装哪些插件来将 MySQL 集成到 Eclipse 中，以便我可以在 Eclipse 中创建和修改表？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-05-18T04:43:30.703

您可以使用任何允许通过 JDBC 编辑数据库的插件。您将需要 MySql JDBC 驱动程序（[在此处获取](http://www.mysql.com/products/connector/)）。

有 Eclipse 自己的[数据工具项目](http://www.eclipse.org/datatools/)（您可以将它作为[BIRT 包](http://www.eclipse.org/downloads/packages/eclipse-ide-java-and-report-developers/ganymedesr2)的一部分获取）。

两个流行的插件是[DBViewer](http://www.ne.jp/asahi/zigen/home/plugin/dbviewer/about_en.html)和[Eclipse SQL Explorer](http://eclipsesql.sourceforge.net/)，但还有很多其他选项。[其中](http://www.eclipseplugincentral.com/Web_Links-index-req-viewcatlink-cid-3.html)大部分都会起作用。

就个人而言，我承认，我更喜欢使用本机工具，我只是不喜欢浏览我的 IDE 中的表格（我使用[Sequel Pro](http://www.sequelpro.com/)，它仅适用于 Mac）。

# iphone - Default.png 未在 iPhone 上以 RELEASE 模式显示

> ID：876148
> 
> 赞同：1
> 
> 时间：2009-05-18T03:32:38.757
> 
> 标签：iphone

我已经在 iPhone 上启动并运行了一个 openGL ES 应用程序。

我的项目有一个 Default.png 来显示开机时黑屏以外的内容。

当我为模拟器和设备编译 DEBUG 版本时，会出现此图像。如果我在 RELEASE 模式下对 DEVICE 进行编译，图像不会显示（而是黑屏）。

我正在运行 OS3.0 Beta 5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T14:49:45.240

弄清楚了。它被命名为 default.png 而不是 Default.png。案件很重要！

我还必须对所有目标进行干净的构建，

# c++ - 驱动程序开发入门

> ID：876155
> 
> 赞同：20
> 
> 时间：2009-05-18T03:34:08.143
> 
> 标签：c++, windows, driver

有没有人有任何书籍/教程可能对开始 Windows 设备驱动程序开发有用？

对于普通的 Win32/GUI 开发，Petzold 的书似乎是必不可少的参考。司机有这种情况吗？

我想指出，我实际上并不是在谈论硬件——我实际上想在软件中模拟一个硬件，但我想先看看一般情况下是如何工作的。

比利3

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-18T03:53:37.827

需要注意的一件事是设备驱动程序开发（架构和工具）的变化比 Win32 开发更多……因此，虽然 Petzold 1990 年代的书适用于 Win32，并且可能被认为是永恒的经典，但适用于多种驱动程序的架构（打印机驱动程序、网络驱动程序等）在各种操作系统版本中有所不同。

这是一篇评论各种书籍的博客条目：[Windows 设备驱动程序书评](http://blogs.msdn.com/iliast/archive/2006/10/25/Windows-Device-Drivers-Book-Reviews.aspx)。

不要忘记 DDK 中包含的 microsoft 文档：以及最重要的是 DDK 中包含的示例驱动程序（源代码）。例如，当我想编写一个模拟串行端口驱动程序时，我发现示例串行驱动程序文档与 DDK 文档相结合是非常宝贵的（而且足够了）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2011-05-20T08:20:47.030

要学好内核开发：

一种。大量示例内核程序：

Windows DDK 示例：

[http://social.msdn.microsoft.com/Forums/en-US/softwaretesting/thread/08690203-1757-4129-b59a-6bae10bcdce8/](http://social.msdn.microsoft.com/Forums/en-US/softwaretesting/thread/08690203-1757-4129-b59a-6bae10bcdce8/)

WDK 示例：

[http://msdn.microsoft.com/en-us/windows/hardware/gg487428](http://msdn.microsoft.com/en-us/windows/hardware/gg487428)

或者只是搜索：

[http://www.google.com/search?q=windows+ddk+samples](http://www.google.com/search?q=windows+ddk+samples)

（因为上面的网址可能会改变，但谷歌可能会返回给你最合适/可达的）

湾。调试技巧很多，我觉得最好的是VMware（或VirtualBox）+windbg+串口调试：

[http://www.google.com/search?q=windbg+vmware+kernel+debug](http://www.google.com/search?q=windbg+vmware+kernel+debug)

这篇论文是使用 VMWare + windbg（指环王0）的经典之作：

[http://silverstr.ufies.org/lotr0/windbg-vmware.html](http://silverstr.ufies.org/lotr0/windbg-vmware.html)

C。以及其他人构建的系统管理工具：

[http://technet.microsoft.com/en-us/sysinternals/bb545021](http://technet.microsoft.com/en-us/sysinternals/bb545021)

（过去称为 SysInternals 由“Windows Internal”的合著者 Mark Russinovich 构建 - 必须阅读！！）

[http://technet.microsoft.com/en-us/sysinternals/bb963901](http://technet.microsoft.com/en-us/sysinternals/bb963901)

从这些工具中，您将拥有巨大的调试选项。

d。加入 OSR 邮件列表（尤其是 ntdev 非常活跃，但还有其他类似 windbg 的）：

[http://www.osronline.com/page.cfm?name=ListServer](http://www.osronline.com/page.cfm?name=ListServer)

e. 在 channel9 上观看大量与 windows + 内核相关的视频（谷歌返回了 1000 多个链接）：

[http://www.google.com/search?q=site:channel9.msdn.com+kernel+video&num=100](http://www.google.com/search?q=site:channel9.msdn.com+kernel+video&num=100)

F。论坛如：

[http://social.microsoft.com/Forums/en-us/kernel/threads](http://social.microsoft.com/Forums/en-us/kernel/threads)

[http://social.msdn.microsoft.com/Forums/en-US/wdk/threads](http://social.msdn.microsoft.com/Forums/en-US/wdk/threads)

也订阅了免费的 OSR 杂志（硬拷贝）。从 1998 年到现在，我一直收到我的 - 它是绕地球半圈交付的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T08:25:38.790

我会搜索包含丰富示例的教程，比如[这个](http://www.codeproject.com/KB/system/driverdev.aspx)。windows驱动开发的本质是了解层和IRP、IRQL，以及过滤驱动等术语。如果您正在寻找示例代码，这里是我的 Spodek 驱动程序代码：[sf.net 链接](http://spodek.cvs.sourceforge.net/viewvc/spodek/spodek/)。您将在那里找到过滤器驱动程序（用于键盘，keyb.c）、内核空间队列（queue.c）和隐藏系统中存在的技术。不过，它是旧版 (sys) 驱动程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-01-18T10:38:28.147

您可能应该使用最近的 Windows Driver Foundation (WDF) 框架，而不是旧的 WDM 框架。一个很好的起点是阅读[WDF 概述 Word 文档](http://www.microsoft.com/whdc/driver/wdf/default.mspx)。

如果您想阅读一本书，[“使用 Windows 驱动程序基础开发驱动程序”](https://rads.stackoverflow.com/amzn/click/com/0735623740)就是您要找的书。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-07-29T18:35:05.817

就个人而言，开始开发的最佳方式是通过现实世界的曝光。考虑到这一点，我会推荐这本书

> [Rootkit 兵工厂：系统黑暗角落的逃生与躲避](http://en.wikipedia.org/wiki/The_Rootkit_Arsenal:_Escape_and_Evasion_in_the_Dark_Corners_of_the_System)

![Rootkit 兵工厂封面](https://i.stack.imgur.com/XioLl.jpg)

这应该足以让您开始运行一些执行“某些事情”的代码，然后在您了解总体情况之后，您可能会关注诸如 - 缓冲/两者/直接方法之间的差异以及与它们相关的特性之间的差异。

当您需要有关某些特定主题的详细信息时，“Windows 驱动程序模型编程，第 2 版”也很有帮助。但首先，我认为最重要的是把事情放在上下文中，然后在此基础上再接再厉。

# javascript - 有没有办法检测 Javascript 中的 DOM 节点更改？

> ID：876163
> 
> 赞同：3
> 
> 时间：2009-05-18T03:36:29.773
> 
> 标签：javascript, dom

我正在寻找一种方法来检测给定 DOM 节点内是否有任何变化。是否有事件或其他技术可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T03:42:59.683

你定义了一些叫做 DOM 突变事件的东西：

[http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents)

目前这仅适用于 Firefox，不适用于 Internet Explorer。

# php - 标签“文件系统”的问题

> ID：876188
> 
> 赞同：6
> 
> 时间：2009-05-18T03:47:59.200
> 
> 标签：php, language-agnostic, file, operating-system, filesystems

出于娱乐原因，我编写了一个 PHP 类，它使用标签而不是分层方式对文件进行分类，标签以 +tag1+tag2+tagN+MD5.EXTENSION 的形式存储在文件名本身中，因此我被困在了FS/OS 强加的字符数限制 (255)。这是课程：

```
<?php

class TagFS
{
    public $FS = null;

    function __construct($FS)
    {
        if (is_dir($FS) === true)
        {
            $this->FS = $this->Path($FS);
        }
    }

    function Add($path, $tag)
    {
        if (is_dir($path) === true)
        {
            $files = array_slice(scandir($path), 2);

            foreach ($files as $file)
            {
                $this->Add($this->Path($path) . $file, $tag);
            }

            return true;
        }

        else if (is_file($path) === true)
        {
            $file = md5_file($path);

            if (is_file($this->FS . $file) === false)
            {
                if (copy($path, $this->FS . $file) === false)
                {
                    return false;
                }
            }

            return $this->Link($this->FS . $file, $this->FS . '+' . $this->Tag($tag) . '+' . $file . '.' . strtolower(pathinfo($path, PATHINFO_EXTENSION)));
        }

        return false;
    }

    function Get($tag)
    {
        return glob($this->FS . '*+' . str_replace('+', '{+,+*+}', $this->Tag($tag)) . '+*', GLOB_BRACE);
    }

    function Link($source, $destination)
    {
        if (is_file($source) === true)
        {
            if (function_exists('link') === true)
            {
                return link($source, $destination);
            }

            if (is_file($destination) === false)
            {
                exec('fsutil hardlink create "' . $destination . '" "' . $source . '"');

                if (is_file($destination) === true)
                {
                    return true;
                }
            }
        }

        return false;
    }

    function Path($path)
    {
        if (file_exists($path) === true)
        {
            $path = str_replace('\\', '/', realpath($path));

            if ((is_dir($path) === true) && ($path[strlen($path) - 1] != '/'))
            {
                $path .= '/';
            }

            return $path;
        }

        return false;
    }

    function Tag($string)
    {
        /*
        TODO:
        Remove (on Windows):            . \ / : * ? " < > |
        Remove (on *nix):               . /
        Remove (on TagFS):              + * { }
        Remove (on TagFS - Possibly!)   -
        Max Chars (in Windows)          255
        Max Char (in *nix)              255
        */

        $result = array_filter(array_unique(explode(' ', $string)));

        if (empty($result) === false)
        {
            if (natcasesort($result) === true)
            {
                return strtolower(implode('+', $result));
            }
        }

        return false;
    }
}

?> 
```

我相信这个系统适用于几个小标签，但我的问题是当整个文件名的大小超过 255 个字符时。我应该采取什么方法来绕过文件名限制？我正在考虑在同一文件的几个硬链接上拆分标签，但排列可能会杀死系统。

有没有其他方法可以解决这个问题？

**编辑 - 一些使用示例：**

```
<?php

$images = new TagFS('S:');

$images->Add('P:/xampplite/htdocs/tag/geoaki.png', 'geoaki logo');
$images->Add('P:/xampplite/htdocs/tag/cloud.jpg', 'geoaki cloud tag');
$images->Add('P:/xampplite/htdocs/tag/cloud.jpg', 'nuvem azul branco');
$images->Add('P:/xampplite/htdocs/tag/xml-full.gif', 'geoaki auto vin api service xml');
$images->Add('P:/xampplite/htdocs/tag/dunp3d-1.jpg', 'dunp logo');
$images->Add('P:/xampplite/htdocs/tag/d-proposta-04c.jpg', 'dunp logo');

/*
[0] => S:/+api+auto+geoaki+service+vin+xml+29be189cbc98fcb36a44d77acad13e18.gif
[1] => S:/+azul+branco+nuvem+4151ae7900f33788d0bba5fc6c29bee3.jpg
[2] => S:/+cloud+geoaki+tag+4151ae7900f33788d0bba5fc6c29bee3.jpg
[3] => S:/+dunp+logo+0cedeb6f66cbfc3974c6b7ad86f4fbd3.jpg
[4] => S:/+dunp+logo+8b9fcb119246bb6dcac1906ef964d565.jpg
[5] => S:/+geoaki+logo+5f5174c498ffbfd9ae49975ddfa2f6eb.png
*/
echo '<pre>';
print_r($images->Get('*'));
echo '</pre>';

/*
[0] => S:/+azul+branco+nuvem+4151ae7900f33788d0bba5fc6c29bee3.jpg
*/
echo '<pre>';
print_r($images->Get('azul nuvem'));
echo '</pre>';

/*
[0] => S:/+dunp+logo+0cedeb6f66cbfc3974c6b7ad86f4fbd3.jpg
[1] => S:/+dunp+logo+8b9fcb119246bb6dcac1906ef964d565.jpg
[2] => S:/+geoaki+logo+5f5174c498ffbfd9ae49975ddfa2f6eb.png
*/
echo '<pre>';
print_r($images->Get('logo'));
echo '</pre>';

/*
[0] => S:/+dunp+logo+0cedeb6f66cbfc3974c6b7ad86f4fbd3.jpg
[1] => S:/+dunp+logo+8b9fcb119246bb6dcac1906ef964d565.jpg
*/
echo '<pre>';
print_r($images->Get('logo dunp'));
echo '</pre>';

/*
[0] => S:/+geoaki+logo+5f5174c498ffbfd9ae49975ddfa2f6eb.png
*/
echo '<pre>';
print_r($images->Get('geo* logo'));
echo '</pre>';

?> 
```

**编辑：由于使用无服务器数据库或任何其他类型的查找表（XML、平面、键/值对等）的几个建议，我想澄清以下几点：虽然这段代码是用 PHP 编写的，但想法是将它移植到 Python 并用它制作一个桌面应用程序 - 这与 PHP 无关（当然除了示例之外）。此外，*如果我必须*使用某种查找表，我肯定会使用 SQLite 3，但我正在寻找的是一种解决方案，除了文件系统（文件夹、文件和硬链接）。**

**你可能会说我疯了，但我试图在这里完成两个简单的目标：1）保持系统“垃圾”免费（例如谁喜欢 Thumbs.db 或 DS_STORE？）和 2）如果出于某种原因，保持文件易于识别查找表（在本例中为 SQLite）变得忙碌、损坏、丢失或忘记（例如在备份中）。**

**PS：这应该在 Linux、Mac 和 Windows（在 NTFS 下）上运行。**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-19T03:40:33.570

如果您使用硬/软链接，那么您可能会考虑为每个标签提供它自己的目录，该目录具有每个带有该“标签”的文件的链接。然后，当您获得多个标签时，您可以比较两者中的标签。然后文件可以存储在一个文件夹中，当然它们的名称是唯一的。

我不知道这与使用标签命名的元文件有什么不同，然后列出该标签中存在的所有文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-18T03:54:06.000

您可能希望为您关注的每个文件夹创建标签缓存，类似于 Windows 在浏览文件夹时创建 [Thumbs.db](http://en.wikipedia.org/wiki/Thumbs.db)文件以缓存拇指的方式。

像这样创建元数据文件的优点是可以跨许多不同的文件系统工作，而不会遇到文件名限制。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-22T13:05:42.073

我会将这些信息插入数据库，即使它是轻量级的，例如同一目录中的 sqlite 文件。

如果您不想这样做，您可以创建指向文件的硬链接而无需任何排列。每个标签一个文件。使用 geoaki 和 logo 标记 P:/xampplite/htdocs/tag/geoaki.png 将导致两个文件都是指向与原始文件相同的数据的硬链接：

*   P:/xampplite/htdocs/tag/geoaki.png.geoaki)
*   P:/xampplite/htdocs/tag/geoaki.png.logo)

这样做的好处是您可以选择属于该文件的所有标签[`glob()`](http://de.php.net/manual/en/function.glob.php)，例如。

```
# All tags
$tags = array();
files = glob('P:/xampplite/htdocs/tag/geoaki.png.*')
foreach ($files as $file) {
    if (fileinode($file) === fileinode('P:/xampplite/htdocs/tag/geoaki.png')) {
        $tags[] = substr($file, strlen('P:/xampplite/htdocs/tag/geoaki.png.'));
    }
}

# Check if file has tag foo:
file_exists('P:/xampplite/htdocs/tag/geoaki.png.foo')
    && fileinode(P:/xampplite/htdocs/tag/geoaki.png.foo) === fileinode('P:/xampplite/htdocs/tag/geoaki.png'); 
```

还有一件事：仅依靠 md5 哈希来识别文件是不安全的，最好使用文件名作为标识符，这可以保证在文件夹中是唯一的。md5 作为标识符的负面影响是：

*   文件一更改，系统就会中断
*   md5 有冲突，两个不同的文件可能有相同的 md5 哈希（概率很小，但存在）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-23T05:39:44.593

您已经充分缩小了问题的范围，我相信答案是：“不”。

您不想要标签的中央注册表，因为它可能会损坏。

您不希望隐藏在每个目录中的文件或文件保存数据，因为那是“垃圾”。

您可能不想要一组并行的目录或带有链接的目录，因为这样当您移动内容时它就会过时并且可能构成文件系统上的“垃圾”。

您**肯定**不想在文件本身的内容中添加标签。

那么除了文件名之外，还有什么地方可以在目录结构中放置标签？

不。（或者至少没有什么可移植的）。

当然，除了文件名或实际文件本身之外，没有任何地方可以保存元数据，这些文件将与文件一起保存（当使用常用工具复制和移动文件时），该文件适用于您提到的所有三个主要操作系统（ Linux、Mac、Win）。

如果有一个可移植的元数据系统可以做到这一点，那就太好了，但没有。我的印象是，对于标记的最佳方法是什么，并没有普遍的共识。因此，每个系统都以不同的方式进行操作，并进行了不同的权衡。

我认为相对于操作系统中的大多数主要思想（分层文件系统、GUI 界面等），使用标记是一个相对较新的思想。在所有三个系统中共享的大多数设施都是相当陈旧且成熟的想法。

您最好的选择可能是研究每个系统是如何做到的，然后编写一个库，该库可移植地提供系统之间功能的最低公分母。

也许有人已经为 Python 编写了一个库来做到这一点？

CJ

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-25T15:20:50.690

与其说是答案，不如说是头脑风暴。

正如@CJ 指出的那样，没有任何外部元数据并且限制为 255 个字节作为文件名标识符加上“标签云”，您的 tagfs 仍然是一个问题。

符号链接很好。与其将所有标记名打包到一个文件名中，不如将标记分散到多个文件中，或者——为了空间——符号链接。脚步：

1.  计算给定文件的校验和或哈希
2.  以某种格式存储符号链接，例如 <hash>-tag 或 tag-<hash>

我明白，这就是你所说的“垃圾”的意思，但是如果你想在一个固定长度的字符串中存储任意数量的任意标签，你迟早会遇到信息障碍。使用数据库可以更好地扩展，但存储和检索符号链接应该很容易实现。“垃圾”可以存储在带有前导“点”的*单个*元数据存储库中，这是某些操作系统上广泛使用和建立的实践。

祝你好运！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-26T04:50:15.983

实际上，我已经构建了这个实用程序的 shell 脚本实现，并将它与 nautilus 文件浏览器集成......

我使用了软链接方法：名为 .tags 的目录包含所有“标签”，而标签只是 .tags 目录中的目录。

如果一个文件被标记为“fun”，那么将在 .tags/fun 中创建一个指向它的软链接。但是，这种方法不适合按标签搜索。

如果你也想支持搜索，我推荐使用 sqlite。

干杯，jrh。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-28T04:30:40.533

文件系统就是你的数据库，所以使用它。

1.  为您的文件想出一个“唯一名称”。文件名是什么无关紧要，只要它在整个空间中是唯一的。文件名与标签无关。

2.  将文件名散列到“存储”目录。如果您没有大量文件（< 1000-2000），您可以将所有文件存储在一个目录中。否则，创建一堆“桶”目录，并将文件散列到正确的目录。显然，这个过程是基于文件名的确定性的。

3.  对于文件上的每个标签，要么将同名的“空”文件存储在“标签”目录中，要么简单地拥有一个列出该标签中文件的“标签文件”。同样，如果您希望在特定标签中有无数文件，请将这些文件散列到存储桶中。

要将标签添加到文件，只需将文件引用添加到正确的标签目录即可。要删除标签，同样的事情。

要删除文件，只需从主存储中删除该文件。当您迭代标记引用时，您可以在该点检查文件并懒惰地删除条目。无论如何，您可能会因为任何有趣的事情而访问该文件。

如果要存储文件的实际元数据，则创建一个镜像“元数据”目录。添加文件时，将其放置在文件存储目录中，并将匹配的元数据文件放置在“元数据存储”目录中，使用相同的方案。通过删除原始文件及其元数据来删除文件。

只是简单的文件操作，没有文件系统的恶作剧（除了哈希目录桶），没有链接，属性，你有什么。

这为每个文件提供了“无限”标签，您可以从命令行或文件资源管理器管理它，唯一需要的工具是 Mark I Eyeball。您还可以获得对实际文件的永久引用（因为它的名称永远不会改变）。

最黑暗的部分是您需要“扫描标签云”以找出文件具有哪些标签。如果您选择使用元数据文件，则可以在其中维护标签列表（这会使您的标记/取消标记操作复杂化，但不会很糟糕）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-28T04:49:28.490

如果您的操作系统和文件系统支持文件扩展属性，请使用它来存储标签。在 OS X 和 FreeBSD 上，请参阅 setxattr 和 getxattr 手册页；Linux 和 Solaris 具有类似的功能。Windows 支持 NTFS 中的扩展属性。有关更多信息，请参阅 wikipedia 上的“扩展文件属性”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-18T03:52:27.057

您应该制作标签目录而不是文件名元素，即代替`/dir/tag1+tag2+tagN+MD5.EXT`, `/dir/tag1/tag2/tagN/MD5.EXT`。通过将目录层次结构视为要避免的事情，您会以多种方式自取其辱。

如果您因为认为难以按需生成目录结构而进行这种避免，那么您应该查看 PHP 的 mkdir 的第三`$recursive`个[参数](http://us.php.net/function.mkdir).

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-22T18:17:05.743

选择避免使用 SQLite，因为它“不是 PHP 原生的”似乎是一种错误的二分法，因为它几乎被编译到 PHP 的每个实际发行版中。如果您希望使用非 SQL 解决方案，则 berkeleydb 提供了一个简单的键值存储，您可以使用它来将文件名列表与任何给定的标签文件名与标签列表相关联。

但是使用 SQL 解决方案。它将比您想象的更快、更便携、更简单。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-22T20:44:42.980

“我应该采取什么方法来绕过文件名限制？”

支持标签的文件系统怎么样？[Tagsistant](http://www.tagsistant.net/)您没有指定您的操作系统。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-07-08T17:07:15.673

在 Windows 中，您可以右键单击文件 > 属性并添加注释和其他数据。您可以将它用于您的标记系统（当然，用户可以很容易地弄乱它，这是可以的）

问题是，其他系统可以从 Windows 文件属性中读取这些注释和数据吗？

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2009-05-22T12:46:50.160

如果您不想使用数据库，为什么不尝试使用 xml，您可以像这样列出所有数据：

```
<file>
  <md5>MD5</md5>
  <body>tag5+tag4+tag3</body>
</file> 
```

您可以轻松添加更多类似标题和描述的内容。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2009-05-22T13:07:17.310

标签的全部意义在于能够快速搜索标签的多种组合。理想情况下，您希望拥有一个带有标签表 {tag, path-to-file} 的数据库。如果您打算将标签保留在文件名中，则需要使用某种压缩。保留一个查找表（db 或平面文件），将每个标签映射到一个 2 字符代码（例如 aa：tag1，ab：tag2，ac：tag3 ......）。坚持使用 ascii，这应该会给你大约 10k 个标签，如果这还不够，请使用三个字符。现在您的文件名将类似于 aa.ag.f2.gx.ty.extension

另一点需要注意的是，由于您要搜索多个标签，因此您要确保文件名中的标签代码具有严格的词汇顺序。然后，要同时搜索标签 aa、f3 和 yz，请执行“ `ls .*aa.*f3.*yz.*`”，它将挑选出包含所有这些代码的文件名。

# image - 如何组合两个单色图像？

> ID：876189
> 
> 赞同：1
> 
> 时间：2009-05-18T03:49:24.680
> 
> 标签：image, 3d

我需要编写[一个立体图像](http://en.wikipedia.org/wiki/Anaglyph_image)程序。假设我有两张单色图像：一张红色和一张青色。如何将它们组合成一个来制作立体图像？

请给我一个建议。谢谢你。

P/s：我使用的是 C# 程序语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T04:09:16.097

一种方法是使用 ImageMagick[合成](http://www.imagemagick.org/script/composite.php)实用程序来叠加图像。此方法无需编程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T04:55:00.363

如果图像是 RGB，请使用变暗混合模式。如果它们是 CMYK，请使用变亮混合模式。

对于变暗，取每个通道的较低值 (Math.Min())。对于减轻，取较高的（Math.Max()）。

```
//Darken pseudocode
for(int y=0;y<CompositionBitmap.Height;y++)
    for(int x=0;x<CompositionBitmap.Width;x++){
        CompositionBitmap[x,y].R=Math.Min(RedBitmap[x,y].R,CyanBitmap[x,y].R);
        CompositionBitmap[x,y].G=Math.Min(RedBitmap[x,y].G,CyanBitmap[x,y].G);
        CompositionBitmap[x,y].B=Math.Min(RedBitmap[x,y].B,CyanBitmap[x,y].B);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T04:16:19.337

可能将它们设置为 50% alpha，然后使用绘图表面进行偏移并复制它们

# java - AspectJ load-time weaving in production systems

> ID：876206
> 
> 赞同：6
> 
> 时间：2009-05-18T03:59:48.137
> 
> 标签：java, performance, tomcat, aop, aspectj

Does anyone have an experience with pure AspectJ load time weaving in production systems (mostly interesting Tomcat related activities)? I'm slightly worrying regarding memory footprint and cpu overhead.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T08:42:35.947

I wouldn't imagine that it'd have a significantly different impact to other AOP-related libraries like cglib, which we use a lot in production systems for AOP proxy generation in Spring. The performance is fine, but there is an increased memory footprint in the permgen pool (due to a large number of synthetic classes being generated), which can be a problem if not managed carefully.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T07:23:20.547

I would encourage you to do compile time weaving for aspectj. You can do that in your build with ant or maven and in development in Eclipse with the AJDT plugin.

Load time weaving works in tomcat. I had a production system running for some months but switching to compile time weaving made configuration and maintenance a lot easier.

# asp.net - 链接到选项下拉菜单

> ID：876207
> 
> 赞同：0
> 
> 时间：2009-05-18T04:00:04.470
> 
> 标签：asp.net, javascript, ajax, vbscript, option-strict

您可以链接到另一个页面的选项下拉框中的特定值吗？

换句话说，假设我在第 1 页，我想将链接锚定到第 2 页，该链接有一个选项下拉框，其中包含 3 个不同的值。假设默认情况下，当您转到第 2 页时，下拉选项框显示值 1。

是否可以链接到第 2 页并即时更改该选项框的值？而当您单击第 1 页上的链接时，它将自动显示值 3 而不是第 2 页上的 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T04:07:15.703

这当然是可能的。您可以在查询字符串中传递一个标志。因此，在 page1 上，您有一个指向 page2 的链接，例如“page2.aspx?option=3”。然后，在 page2 的`PageLoad`方法中，只需从查询字符串 ( ) 中读取该值`Request.QueryString["option"]`并适当地设置所选项目`DropDownList`。

一页1你会...

```
<a href="page2.aspx?option=3">link to page 2</a> 
```

在 page2 的代码隐藏中，基于 Al 的示例...

```
void Page_Load(object sender, EventArgs e) {
   if (!Page.IsPostBack) {
      int option;
      if(int.TryParse(Request.QueryString["option"], out option) { //Only set the value if it is actually an integer
         ddlList.SelectedIndex = option;
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T04:33:38.387

乔恩弗里兰的回答基本上是我会这样做的方式。您可能希望将用于设置列表索引的代码放在 Page_Load 函数内的代码隐藏类中。

您还可以保存在 ASP.Net 会话中设置的选项的值，但是如果您开始让用户在站点中跳来跳去，这会变得有点棘手。他们可能会回到第 2 页，并且仍然将会话变量设置为意外的值。此外，如果用户有一段时间不活动或服务器被重置，您可能会遇到会话被删除的问题。从好的方面来说，如果你把它放在 Session 对象中，你可以在你的页面之间来回移动，并把你需要的所有数据放在手边。

如果您想查看示例，请尝试以下操作：

```
 void Page_Load (object sender, EventArgs e) {
   if (! Page.IsPostBack) {
     ddlList.SelectedIndex = Request.QueryString["option"]
   } 
```

您希望将代码放在 !IsPostBack 部分中，以便它仅在用户第一次被定向到页面时运行。

# iphone - UIActionSheet 不响应触摸

> ID：876209
> 
> 赞同：4
> 
> 时间：2009-05-18T04:00:29.353
> 
> 标签：iphone

我有一个这样设置的 UIActionSheet：

```
-(void)trash:(id)sender
{
UIActionSheet *sheet = [[[UIActionSheet alloc] initWithTitle:@"Delete" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:@"Remove text" otherButtonTitles:@"Remove tags", nil] autorelease];

[sheet showInView:self.view]; 
```

}

该工作表按预期从屏幕底部出现，并且全部正确。但是，没有一个按钮处于活动状态。唯一的出路是触摸主页按钮。

有什么我想念的吗？

视图 self.view 是视图控制器的视图。唯一奇怪的是它低于全屏高度，因为它位于键盘上方。

```
// Never called
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex;
{
    NSLog(@"%d",buttonIndex);
}

// Never called
- (void)actionSheet:(UIActionSheet *)actionSheet     didDismissWithButtonIndex:(NSInteger)buttonInde
{

}

// Never called
- (void)actionSheet:(UIActionSheet *)actionSheet     willDismissWithButtonIndex:(NSInteger)buttonIndex
{

}

// Called if I hit Home button
- (void)actionSheetCancel:(UIActionSheet *)actionSheet
{

}

// Called second
- (void)didPresentActionSheet:(UIActionSheet *)actionSheet
{

}

// Called first
- (void)willPresentActionSheet:(UIActionSheet *)actionSheet
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T09:45:14.793

如果视图上有键盘，则键盘可见的文本字段/文本视图很可能是第一响应者。对于任何响应触摸的控件，它必须是第一响应者。

确保您的操作表在显示时是第一响应者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-17T06:06:29.700

You need to show your view not in self.vew but in Appdelegate's root view.

Use [appDelegate.window.subviews objectAtIndex:0];

I have this method in AppDelegate:

```
-(UIView *) getRootView {
return [self.window.subviews objectAtIndex:0]; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T08:06:47.017

仔细检查 firstResponder 状态。

# apache-flex - 等效于 mx.controls.HTML 的 Flex Web 应用程序控件

> ID：876211
> 
> 赞同：0
> 
> 时间：2009-05-18T04:01:06.657
> 
> 标签：apache-flex, web-applications, controls

由于 Flex Web 应用程序没有 mx.controls.HTML 控件（仅适用于 AIR 应用程序），因此任何人都知道可以接近该功能的 FOSS 自定义控件。我检查了 flex-iframe 控件，但它只提供 HTML 内容的查看，而不像 AIR 控件中那样提供操作。

提前感谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T13:13:23.297

抱歉，Flex SDK 中没有内置的 HTML 控件。

一种解决方法是使用 ExternalInterface 在 Flex 和 JavaScript 之间交换消息来操作您的 flex iframe 内容

# c++ - 将 char[] 数组转换为 byte[] ，反之亦然？C++

> ID：876213
> 
> 赞同：14
> 
> 时间：2009-05-18T04:01:59.920
> 
> 标签：c++, char

将字符数组转换为字节的最佳方法是什么，反之亦然？

解决方案：

```
void CharToByte(char* chars, byte* bytes, unsigned int count){
    for(unsigned int i = 0; i < count; i++)
        bytes[i] = (byte)chars[i];
}

void ByteToChar(byte* bytes, char* chars, unsigned int count){
    for(unsigned int i = 0; i < count; i++)
         chars[i] = (char)bytes[i];
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-18T04:40:53.430

char 类型是少数几个具有 ANSI 标准所保证的大小并且大小为 1 字节的类型之一。据我所知，C 并没有直接定义类型字节。然而，拥有一个名为 byte 的类型实际上并不是一个字节大小的类型，这简直是太疯狂了。因此，一个简单的演员应该可以解决问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-18T04:05:23.123

C++ 中没有字节类型，根据标准：

编辑：

1.7：

> 一个字节至少大到足以包含基本执行字符集的任何成员，并且由连续的位序列组成，其数量由实现定义。

5.3.3：

> sizeof(char)、sizeof(signed char) 和 sizeof(unsigned char) 为 1；sizeof 应用于任何其他基本类型（3.9.1）的结果是实现定义的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-18T04:40:20.373

C++ 中没有字节类型。你可以 typedef 'unsigned char' 到 'byte' 如果这样更好的话。真的，这就是 C++ 中的所有字节 - 一个无符号字符。除此之外，是的，我会投......但这个演员更好：

```
unsigned_char_arr[i]= static_cast<unsigned char>(char_arr[i]); 
```

或者...只需使用 char 数组并在需要将其解释为无符号字符时将其转换...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T04:10:22.073

在您会遇到的几乎所有 C++ 实现中，a`char`恰好~~是`byte`~~一个八位字节。C++ 标准不保证这一点，但实际上总是如此。A`char`总是*至少*8 位大，确切的位数由预处理器常数 给出`CHAR_BIT`。此外，`sizeof()`运算符会根据 s 的数量告诉您对象/类型的大小`char`，而不是~~字节~~八位组的数量，因此，如果您使用的是 16 位`char`和 32 位的奇怪系统`int`，那么`sizeof(int)`将是2，不是 4。

**编辑：**用八位字节替换字节。C 标准保证A`char`是一个字节，但不保证一个字节是八位字节，正好是 8 位。如果您曾经阅读过任何法国技术文献，它们总是使用“octet”而不是“byte”，并且它们有千字节 (KO)、兆字节 (MO) 等，而不是千字节和兆字节。

# asp.net - 使用在运行时创建的控件在 VB/ASP 中拖放

> ID：876215
> 
> 赞同：0
> 
> 时间：2009-05-18T04:04:42.233
> 
> 标签：asp.net, vb.net, drag-and-drop, runtime

这是我第一次在 Stackoverflow 上发帖，但几个月来我一直在阅读许多问题和答案！现在，我被困住了，我迫切需要帮助。

背景信息：网站位于[http://www.mobiuspc.com](http://www.mobiuspc.com)，相关部分是我顶行导航上的“配置器”按钮。
一切都是用最新的 VB.NET 和 ASP 3.5 编写的，我的主机上有一个 SQL2005 服务器。

这是我的困境中最糟糕的地方：
在页面加载期间，我得到了零件表中所有零件的列表。然后我为每个条目创建一个图像对象和 2 个标签对象，并将它们放在我的精美手风琴窗格控件中。到目前为止效果很好，我可以获得一个巨大的图片和文字列表，这些图片和文字与我喜欢的方式一致（目前）。现在 - 我真的需要一种方法来让访问者将图像/标签/标签组合从手风琴拖到右侧的当前不可见的面板（或任何真正的东西）上。一旦将拖动的东西放入放置目标，我希望它触发我在 VB 中编写的函数或子程序。

从我对 jquery 的了解来看，显然有一种方法可以使我的网页上的元素可拖动、可放置或你有什么。它的示例代码 - 我不完全理解，所以快速示例会很棒。我是一个快速学习者，可以从那里将它应用到我的项目中。更重要的是，如何让在运行时创建的对象可拖动，并触发我用我知道的唯一语言编写的事件？

这是我按原样生成运行时对象的方式：

```
Public Function loadallimages()
    Dim brandholder As ArrayList = New ArrayList
    Dim partnumberholder As ArrayList = New ArrayList
    Dim modelholder As ArrayList = New ArrayList
    Dim imageinsert As Image
    Dim labelinsert1 As Label
    Dim labelinsert2 As Label
    Dim gridinsert As Table
    Dim gridrow1 As TableRow
    Dim gridrow2 As TableRow
    Dim gridrow3 As TableRow
    Dim gridcell1 As TableCell
    Dim gridcell2 As TableCell
    Dim gridcell3 As TableCell
    Dim switcher As Integer = 0

    conn.ConnectionString = connstring 'I got my fancy connection string stored elsewhere
    conn.Open()

    'Add all images to the chassis section
    inserter = "SELECT Brand,PartNumber,Model FROM Chassis" 'this is the command I'm sending to the SQL command
    sqlmagicmaker = New SqlCommand(inserter, conn) 'this is the actual sql command object, created in my declarations
    bloater = fucker.ExecuteReader 'bloater is my easy way of remembering "data reader object"
    Do While bloater.Read
        brandholder.Add(bloater.Item("Brand").ToString)
        partnumberholder.Add(bloater.Item("PartNumber").ToString)
        modelholder.Add(bloater.Item("Model").ToString)
    Loop
    bloater.Close() 'can't forget to close it!

    For i = 0 To brandholder.Count - 1
        imageinsert = New Image 'make new objects and give them ID's later
        labelinsert1 = New Label
        labelinsert2 = New Label
        If switcher = 0 Then 'this is my ghetto way of getting 3 "chunks" of data in a row
            gridinsert = New Table
            gridrow1 = New TableRow
            gridrow2 = New TableRow
            gridrow3 = New TableRow
        End If
        gridcell1 = New TableCell
        gridcell2 = New TableCell
        gridcell3 = New TableCell
        gridcell1.CssClass = "configgridcell" 'just sets the width so it looks nice
        gridcell2.CssClass = "configgridcell"
        gridcell3.CssClass = "configgridcell"

        imageinsert.ImageUrl = ".\Images\Chassis\" + brandholder(i) + "{}" + partnumberholder(i) + ".jpg"
        imageinsert.ID = brandholder(i) + "{}" + partnumberholder(i)
        labelinsert1.Text = brandholder(i)
        labelinsert2.Text = modelholder(i)
        imageinsert.AlternateText = "No Image"

        gridrow1.Cells.Add(gridcell1) 'create a table and add controls
        gridrow1.Cells(switcher).Controls.Add(imageinsert)
        gridrow2.Cells.Add(gridcell2)
        gridrow2.Cells(switcher).Controls.Add(labelinsert1)
        gridrow3.Cells.Add(gridcell3)
        gridrow3.Cells(switcher).Controls.Add(labelinsert2)
        If switcher = 2 Then
            gridinsert.Rows.Add(gridrow1) 'compile all the rows and put into a table
            gridinsert.Rows.Add(gridrow2)
            gridinsert.Rows.Add(gridrow3)
            AccordionPane1.ContentContainer.Controls.Add(gridinsert) 'dump the table in the appropriate accordion pane
        End If
        switcher = switcher + 1
        If switcher = 3 Then switcher = 0 'do it all over again

    Next
    brandholder.Clear()
    partnumberholder.Clear()
    modelholder.Clear()
    switcher = 0
    'then we go onto other sections, which basically do the exact same thing to other accordions 
```

然后页面加载我所有的图像/标签/标签对象三重奏。其中很多。在这一点上，性能不是问题，我只是希望我的想法能够奏效。再次的想法是，一旦我以某种方式神奇地将我创建的一个对象“拖动”到一个拖放区中，然后放开鼠标使其真正下降，就会执行类似这样的事情（伪代码）：

```
Public Function fire_the_great_event()
  x = the id of the element that just got dropped
  'do work here
  'take that element id, figure out what it is, and ask the database for more help
  'depending on what the database says, start deleting un-needed image/label/label's
End Function 
```

任何形式的帮助将不胜感激！如果可能的话，我想尽量减少与非 VB/ASP 的交互。如果我能以某种方式从我的 vb 编码窗口中为一个对象添加一个神奇的属性，那将是最好的。

谢谢！账单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T02:05:04.153

我想到了！我所要做的就是确保 cssclass 可以使用 Jquery 通过 javascript 拖动。将 .draggable 应用于该类，并确保这部分 js 在页面中而不是页面中。还了解到我以表格格式创建控件的方法似乎不起作用，我不得不在我想要控件的地方放置一个容器面板，然后将它们单独添加到面板中。效果很好！

# objective-c - 我的插件崩溃了 Interface Builder

> ID：876218
> 
> 赞同：0
> 
> 时间：2009-05-18T04:06:08.553
> 
> 标签：objective-c, xcode, interface-builder

我为它构建了一个自定义控件和一个 IB 插件。如果我使用 IB 作为插件项目中的自定义可执行文件运行插件，那么一切都会像冠军一样工作。但是，如果我将框架和插件复制到“正常位置”，为它创建一个测试应用程序，然后运行模拟器 - IB 在从模拟器返回后崩溃。我已经搜索了网络和文档，但我在这些方法上找不到任何东西。知道我错过了什么吗？（顺便说一下，框架在/Library/Frameworks，插件在/Developer/Platforms/MacOSX.platform/Developer/Library/Interface Builder/Plugins）。这是来自 IB 崩溃报告的堆栈：

断言消息：“IBResizeActionInitialFrame”键没有对象。

回溯：
0.Interface Builder 0x00004d29 [IBApplication handleAssertion:inFile:onLine:]
1.InterfaceBuilderKit 0x002c74ee [IBLibraryController createDetailedDescriptionFromTemplate:]
2.InterfaceBuilderKit 0x003aad22 [NSView lastResizeAction]
3.Foundation 0x90b98a7a [NSObject valueForKey:]
4.Foundation 0x002c74ee [NSObject valueForKeyPath:b6 ]
5\. InterfaceBuilderKit 0x0043cec6 [IBResourceManager 文档]
6\. InterfaceBuilderKit 0x0043d6f9 [IBResourceManager 文档:willSynchronizeWithProjectFiles:project:]
7\. InterfaceBuilderKit 0x002dfdae [IBDocument willSynchronizeWithProjectFiles:project:]
8\. InterfaceBuilderKit 0x002df00a [IBDocument beginSyncingWithXcodeIfNeeded]
9.基金会0x90baa22e [NSRunLoop runMode：beforeDate：]
10.的CoreFoundation 0x932d6b25 CFRunLoopRunSpecific
11.的CoreFoundation 0x932d6cd8 CFRunLoopRunInMode
12.使HIToolbox 0x92f622c0 BlockUntilNextEventMatchingListInMode
13.使HIToolbox 0x92f620d9 BlockUntilNextEventMatchingListInMode
14.使HIToolbox 0x92f61f4d BlockUntilNextEventMatchingListInMode
15.了AppKit 0x95229d7d _DPSNextEvent
16 . AppKit 0x95229630 [NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:]
17\. Interface Builder 0x0000276b [IBApplication nextEventMatchingMask:untilDate:inMode:dequeue:]
18\. AppKit 0x9522266b [NSApplication run]
19\. AppKit 0x951ef8a4 NSApplicationMain
20\. Interface Builder 0x00004eca [IBApplication changeInspectorMode:]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T19:36:32.647

好的，这是我自己问题的答案：如果您覆盖`ibDidAddToDesignableDocument`，则必须调用`super`. 一旦我这样做了，断言问题就解决了。希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-04T07:28:59.307

感谢您的提示，在阅读您的帖子之前，我有几周的例外情况。这似乎解决了我的问题。

# optimization - 什么是好的、免费的 SSA/SCCP 资源？

> ID：876220
> 
> 赞同：3
> 
> 时间：2009-05-18T04:08:17.513
> 
> 标签：optimization, compiler-construction, ssa

到目前为止，这是我能想到的：

gcc 相关：

*   [树木 SSA](http://gcc.gnu.org/projects/tree-ssa/)
*   [树 SSA——GCC 的新优化框架](http://www.airs.com/dnovillo/Papers/tree-ssa-gccs03-slides.pdf)
*   [Tree SSA 一种新的 GCC 优化基础架构](http://gcc.fyxm.net/summit/2003/Tree%20SSA%20-%20A%20New%20optimization%20infrastructure.pdf)
*   [树SSA的设计与实现](http://mirror-fpt-telecom.fpt.net/gcc/summit/2004/Design%20of%20Tree%20SSA.pdf)

其他：

*   [机器 SUIF 的稀疏条件常数传播的一种实现](http://lapwww.epfl.ch/dev/machsuif/opt_passes/sccp.pdf)
*   [显式并行程序的并发静态单一赋值形式和常量传播](http://eprints.kfupm.edu.sa/31688/1/31688.pdf)

我已将其设为社区 wiki，因此请随时添加您自己的资源 - 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-08-07T21:17:01.240

您应该知道 GCC 不再使用那些论文中描述的 SSA（Chow 的 HSSA）。相反，它使用“别名 oracle”来消除内存地址之间的歧义。它仍然将 SSA 用于标量变量。

资源：

*   我很惊讶你错过了：“ [GCC 的传播引擎](http://www.airs.com/dnovillo/Papers/gcc2005.pdf)”，它描述了 SCCP 的一般框架和 GCC 中使用的其他稀疏条件分析。
*   [Lenart 和 Sadler](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.35.1934)将 SCCP 扩展到类型推断。
*   [Patterson](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.48.7118)将 SCCP 扩展到值范围传播（并且还允许复制传播）。我很确定这是 GCC 使用的算法。
*   最后，如果我可以大胆地提出[我自己的短篇论文](http://paulbiggar.com/research/fit-2009.pdf)，该论文讨论了算法，并尝试将符号执行（SCCP 的核心）扩展到构建 SSA。

# delphi - 如何使用Delphi检查进程是否正在运行？

> ID：876224
> 
> 赞同：18
> 
> 时间：2009-05-18T04:12:03.730
> 
> 标签：delphi, process

与此问题类似，但在 Delphi 中：

[如何确定一个进程是否已经在使用 c# 运行？](https://stackoverflow.com/questions/51148/how-do-i-find-out-if-a-process-is-already-running-using-c)

我有一个更新程序，我希望它检查即将更新的程序当前没有运行，最好它会检查所有用户，而不仅仅是当前用户。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-05-18T04:18:11.023

来自： http: [//www.delphitricks.com/source-code/windows/check_if_a_process_is_running.html](http://www.delphitricks.com/source-code/windows/check_if_a_process_is_running.html)

```
uses TlHelp32; 

    function processExists(exeFileName: string): Boolean; 
var 
  ContinueLoop: BOOL; 
  FSnapshotHandle: THandle; 
  FProcessEntry32: TProcessEntry32; 
begin 
  FSnapshotHandle := CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0); 
  FProcessEntry32.dwSize := SizeOf(FProcessEntry32); 
  ContinueLoop := Process32First(FSnapshotHandle, FProcessEntry32); 
  Result := False; 
  while Integer(ContinueLoop) <> 0 do 
  begin 
    if ((UpperCase(ExtractFileName(FProcessEntry32.szExeFile)) = 
      UpperCase(ExeFileName)) or (UpperCase(FProcessEntry32.szExeFile) = 
      UpperCase(ExeFileName))) then 
    begin 
      Result := True; 
    end; 
    ContinueLoop := Process32Next(FSnapshotHandle, FProcessEntry32); 
  end; 
  CloseHandle(FSnapshotHandle); 
end; 

procedure TForm1.Button1Click(Sender: TObject); 
begin 
  if processExists('notepad.exe') then 
    ShowMessage('process is running') 
  else 
    ShowMessage('process not running'); 
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-18T04:52:09.770

如果您正在编写一些自动更新代码，您还可以考虑与您的应用程序建立某种连接并告诉它自行关闭。

例如，这可能涉及向应用程序的主窗口发布一条消息，告诉它自行关闭。或打开 IPC 管道等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-20T13:50:05.157

```
uses TlHelp32, PsAPI;

function ProcessExists(anExeFileName: string): Boolean;
var
  ContinueLoop: BOOL;
  FSnapshotHandle: THandle;
  FProcessEntry32: TProcessEntry32;
  fullPath: string;
  myHandle: THandle;
  myPID: DWORD;
begin
  // wsyma 2016-04-20 Erkennung, ob ein Prozess in einem bestimmten Pfad schon gestartet wurde.
  // Detection wether a process in a certain path is allready started.
  // http://stackoverflow.com/questions/876224/how-to-check-if-a-process-is-running-using-delphi
  // http://swissdelphicenter.ch/en/showcode.php?id=2010
  FSnapshotHandle := CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);
  FProcessEntry32.dwSize := SizeOf(FProcessEntry32);
  ContinueLoop := Process32First(FSnapshotHandle, FProcessEntry32);
  Result := False;
  while Integer(ContinueLoop) <> 0 do
  begin
    if UpperCase(ExtractFileName(FProcessEntry32.szExeFile)) = UpperCase(ExtractFileName(anExeFileName)) then
    begin
      myPID := FProcessEntry32.th32ProcessID;
      myHandle := OpenProcess(PROCESS_QUERY_INFORMATION or PROCESS_VM_READ, False, myPID);
      if myHandle <> 0 then
      try
        SetLength(fullPath, MAX_PATH);
        if GetModuleFileNameEx(myHandle, 0, PChar(fullPath), MAX_PATH) > 0 then
        begin
          SetLength(fullPath, StrLen(PChar(fullPath)));
          if UpperCase(fullPath) = UpperCase(anExeFileName) then
            Result := True;
        end else
          fullPath := '';
      finally
        CloseHandle(myHandle);
      end;
      if Result then
        Break;
    end;
    ContinueLoop := Process32Next(FSnapshotHandle, FProcessEntry32);
  end;
  CloseHandle(FSnapshotHandle);
end; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-02T17:25:29.423

如果您可以控制应用程序（正如您的问题所暗示的那样），一个很好的方法是在流程开始的早期创建一个命名文件映射对象。这类似于从 RedLEON 创建互斥锁的建议。

```
// Add this into the application you wish to update
CreateFileMapping(HWND($FFFFFFFF), nil, PAGE_READONLY, 0, 32, 'MAIN-PROGRAM');
// Note: Mapping object is destroyed when your application exits

// Add this into your updater application       
var
    hMapping: HWND;
begin
    hMapping := CreateFileMapping(HWND($FFFFFFFF), nil, PAGE_READONLY, 0, 32, 'MAIN-PROGRAM');
    if (hMapping <> 0) then
        begin
        if (GetLastError() = ERROR_ALREADY_EXISTS) then
            ShowMessage('Application to update is already running!');
        end; 
```

查看[有关 CreateFileMapping 的 MSDN 文档以](https://msdn.microsoft.com/en-us/library/windows/desktop/aa366537(v=vs.85).aspx)了解更多详细信息。

[另请参阅此问题](https://stackoverflow.com/questions/29142727/fast-way-to-check-for-a-specific-process-running)的已接受答案，其中涵盖了卢克的答案并提供了其他解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T15:03:52.060

我正在输入这些代码初始化部分的主机。

```
initialization
mHandle := CreateMutex(nil, True, 'myApp.ts');
if GetLastError = ERROR_ALREADY_EXISTS then
begin
  MessageDlg('Program already running!', mtError, [mbOK], 0);
  Halt;
end; 
```

# aix - 为 AIX 编写内核扩展

> ID：876226
> 
> 赞同：2
> 
> 时间：2009-05-18T04:14:10.440
> 
> 标签：aix

我即将踏上为 AIX 6.1 编写一些内核扩展的旅程。

如果他们能在查找书籍、文章、博客方面为我提供一些帮助，我会非常非常满意社区。无论我能得到什么信息。

我已经检查了 IBM 站点。但我需要更多信息。

感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-12-18T14:10:07.300

有几本 IBM 红皮书可用：

如果它们适用于旧版本的 AIX，请不要太担心，自 5.1 以来没有太大的变化，甚至更旧版本的东西可能仍然适用。

[http://www.redbooks.ibm.com/abstracts/sg245674.html](http://www.redbooks.ibm.com/abstracts/sg245674.html)（开发和移植 C/C++ 程序） [http://www.redbooks.ibm.com/abstracts/sg244946.html](http://www.redbooks.ibm.com/abstracts/sg244946.html)（编写可靠的 AIX 守护进程） [http ://www.redbooks.ibm.com/abstracts/sg246034.html](http://www.redbooks.ibm.com/abstracts/sg246034.html)（AIX 5L 移植指南）

希望你看过官方文档：（Kernel Extensions and Device Support Programming Concepts） [http://publib.boulder.ibm.com/infocenter/aix/v6r1/topic/com.ibm.aix.kernelext/doc/kernextc/内核扩展.htm](http://publib.boulder.ibm.com/infocenter/aix/v6r1/topic/com.ibm.aix.kernelext/doc/kernextc/kernextc.htm)

马库斯

# visual-studio-2008 - VS2008 在断网的开发环境中运行缓慢

> ID：876228
> 
> 赞同：0
> 
> 时间：2009-05-18T04:14:18.677
> 
> 标签：visual-studio-2008, performance

我的开发环境与 Internet 断开连接，并且似乎 Visual Studio 2008 在那里很慢。我的猜测是，速度缓慢是由于 vs2008 尝试执行 Internet 操作时超时造成的，因为在连接到 Internet 的类似 PC 上，vs2008 的速度要快得多。有谁知道我怎样才能加速vs2008？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T04:22:08.643

看看这个线程[https://stackoverflow.com/questions/8440/visual-studio-optimizations](https://stackoverflow.com/questions/8440/visual-studio-optimizations)

尤其是关于禁用 F1 的要点

# c++ - 二叉搜索树

> ID：876229
> 
> 赞同：2
> 
> 时间：2009-05-18T04:14:42.453
> 
> 标签：c++, recursion, binary-tree, implementation

我有一个关于 C++ 中的二叉搜索树实现的问题。这是下面的问题

实现一个存储整数的简单（非模板化）BST。提供如下操作：Insert、Remove、inOrder遍历、preOrder遍历、postOrder遍历。

使用递归例程来处理树。

处理一个节点只涉及打印出节点的内容，在这种情况下是存储在节点中的整数。

数据应该来自测试文件。主程序应打开数据文件并插入树并演示其他树操作。

本练习的目的是证明您了解 BST。没有必要过度使用它并进行未要求的操作。

到目前为止，我只创建了头文件。任何人都可以看看并建议我是否朝着正确的方向前进？

```
using namespace std;
#ifndef BSTNODE_H
#define BSTNODE_H
class BSTNode
{
    private:
    //Defines the 'node' structure
    struct tree_node 
    {
     tree_node *left;   // left subtree has smaller elements
     tree_node *right;  // right subtree has larger elements
     int m_data;
    };
    //root * r;
    public:
        //The Constructor
        BSTNode();
        //The Destructor
       ~BSTNode();
       //Inserts a value into a BST, public function
        void insert(const m_data & d);
        //Removes a value from a BST, public function
        void remove(const m_data & d);
        //isEmpty function, public function
        bool isEmpty();
        BSTNode getData();
        void inOrder(const m_data & d);
        void preOrder(const m_data & d);
        void postOrder(const m_data & d);
};
#endif 
```

接下来我必须创建 BSTNode.cpp 文件。感谢您通过邮件回复 jediknight80n@hotmail.com 提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T04:27:55.093

你似乎忘记了你在各种方法中使用`typedef`的类型`m_data`，我不明白你为什么想要一个单独的`tree_node`结构（而不​​是使用类本身？）也不明白为什么`getData`要 return`BSTNode`而不是`int`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T04:31:21.227

```
 //Inserts a value into a BST, public function
    void insert(const m_data & d);
    //Removes a value from a BST, public function
    void remove(const m_data & d);
    //isEmpty function, public function
    bool isEmpty();
    BSTNode getData();
    void inOrder(const m_data & d);
    void preOrder(const m_data & d);
    void postOrder(const m_data & d); 
```

m_data 是成员，而不是类型。你应该在这里使用 int 。此外，由于您的节点是 tree_node，因此外部类可能应该将树作为一个整体来表示（即 BSTree 而不是 BSTNode）。

还有“使用命名空间标准；” 标题是邪恶的，因为它会强制包含标题的任何内容而无法选择退出。如果您要使用它，我建议将其保存为 .cpp 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T05:19:16.197

一些琐碎的事情：

```
tree_node *left;   // left subtree has smaller elements 
```

一般来说，左子树也包含相等的元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T04:31:41.040

这是一个关于 BST 的经典问题——任何关于数据结构的好书都会给你完整的代码。以下页面包含 C++ [http://cslibrary.stanford.edu/110/BinaryTrees.html](http://cslibrary.stanford.edu/110/BinaryTrees.html)的代码示例。

遍历函数不应该是 BST 类本身的一部分，实际上 BSTNode 应该公开左/右节点指针 - 调用应用程序应该以特定方式调用它。或者使用回调函数并在您的类中提供遍历代码，这样会更干净。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T04:45:29.173

几件事-正如其他人指出的那样，您将不得不使用

```
void insert(const int & d);
//Removes a value from a BST, public function
void remove(const int & d);
//isEmpty function, public function
bool isEmpty();
BSTNode getData();
void inOrder(const int & d);
void preOrder(const int & d);
void postOrder(const int & d); 
```

另一件事是你已经注释掉了你的根节点。尽管您定义错误，但您必须在类中包含一个根节点。正确的定义是

```
tree_node *root; 
```

此外，如前所述，删除

> 使用命名空间标准；

从头文件中取而代之，将其放入您的实现文件中。

这就是我现在所能看到的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-18T04:46:41.390

另一个问题是指定的类声明了嵌套类型和方法，但没有成员数据。

* * *

您可以使用迭代器声明遍历功能：例如 preorder 方法返回一个 interator，您可以取消对节点的引用，或者递增以指向 preorder 序列中的下一个节点。

或者，您可以使用回调声明遍历功能：即调用者将回调实例传递给预排序方法，预排序方法遍历树并为每个节点调用回调方法：回调方法将采用一个节点（或者，更具体地说，节点数据）作为参数，并可能返回一个布尔值，让回调指定它想要终止遍历。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-18T04:48:37.677

我也会添加一个搜索方法。

```
bool search(int whatIlookfor); 
```

甚至更好

```
tree_node* search(int whatIlookfor); 
```

另外，请保存`tree_node *root`在安全的地方。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-18T05:22:41.733

*   在您的示例中使用结构类型的左右指针会限制灵活性 - 假设我采用您的 BST 并遍历根的左子节点，然后想要在这个新子树上调用操作。我不能，因为指针是结构类型的。我宁愿建议使用 BSTNode 类型的两个指针。

    `BSTNode *left;`

    `BSTNode *right;`

    这也将解决您的根问题（不需要显式根指针），因为您用于在 main 中引用对象的指针无论如何都会指向根。

*   遍历函数应该不需要任何参数，因为它们本质上会遍历整个树并打印所有数据项。数据项可以传递给另一个搜索成员函数以搜索其位置，正如 TrueStar 已经指出的那样。

*   我还建议使用一些私有成员函数来降低公共成员函数的复杂性（`DeleteNodeCaseB(int data)`会`DeleteNodeCaseA(int data)`一次又一次地调用）-

    `BSTNode * setleft(int data);`

    `BSTNode * setright(int data);`

    `void DeleteNodeCaseA(int data)` /* 左右孩子中的一个或两个都不存在 */

    `void DeleteNodeCaseB(int data)` /* 有左右孩子 */

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-18T05:26:19.577

由于您使用的是 C++，您可能要考虑使用一些标准库而不是尝试自己实现它？STL 库带有一个红黑树，它可能更适合您的应用程序。二叉树可能会变得不平衡或退化为链接列表。

PS：当然，这是假设你没有做家庭作业。

# java - 需要一种方法来缩放字体以适应矩形

> ID：876234
> 
> 赞同：16
> 
> 时间：2009-05-18T04:16:22.113
> 
> 标签：java, graphics, fonts, awt

我刚刚编写了一些代码来缩放字体以适应矩形（的长度）。它从 18 宽度开始并向下迭代直到适合。

这似乎非常低效，但我找不到非循环的方式来做到这一点。这条线用于可缩放的游戏网格中的标签，因此我看不到解决方案（包装、切断和延伸超出矩形都是不可接受的）。

它实际上非常快，我正在为数百个矩形执行此操作，它的速度足以让它减慢一点。

如果没有人想出更好的方法，我会从表中加载起始猜测（这样它就比 18 更接近）并使用它——除了滞后它工作得很好。

```
public Font scaleFont(String text, Rectangle rect, Graphics g, Font pFont) {
    float nextTry=18.0f;
    Font font=pFont;

    while(x > 4) {                             
            font=g.getFont().deriveFont(nextTry);
            FontMetrics fm=g.getFontMetrics(font);
            int width=fm.stringWidth(text);
            if(width <= rect.width)
                return font;
            nextTry*=.9;            
    }
    return font;
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-18T04:41:44.213

半伪代码：

```
public Font scaleFont(
    String text, Rectangle rect, Graphics g, Font font) {
    float fontSize = 20.0f;

    font = g.getFont().deriveFont(fontSize);
    int width = g.getFontMetrics(font).stringWidth(text);
    fontSize = (rect.width / width ) * fontSize;
    return g.getFont().deriveFont(fontSize);
} 
```

* * *

迭代的推导：

```
/**
 * Adjusts the given {@link Font}/{@link String} size such that it fits
 * within the bounds of the given {@link Rectangle}.
 *
 * @param label    Contains the text and font to scale.
 * @param dst      The bounds for fitting the string.
 * @param graphics The context for rendering the string.
 * @return A new {@link Font} instance that is guaranteed to write the given
 * string within the bounds of the given {@link Rectangle}.
 */
public Font scaleFont(
    final JLabel label, final Rectangle dst, final Graphics graphics ) {
  assert label != null;
  assert dst != null;
  assert graphics != null;

  final var font = label.getFont();
  final var text = label.getText();

  final var frc = ((Graphics2D) graphics).getFontRenderContext();

  final var dstWidthPx = dst.getWidth();
  final var dstHeightPx = dst.getHeight();

  var minSizePt = 1f;
  var maxSizePt = 1000f;
  var scaledFont = font;
  float scaledPt = scaledFont.getSize();

  while( maxSizePt - minSizePt > 1f ) {
    scaledFont = scaledFont.deriveFont( scaledPt );

    final var layout = new TextLayout( text, scaledFont, frc );
    final var fontWidthPx = layout.getVisibleAdvance();

    final var metrics = scaledFont.getLineMetrics( text, frc );
    final var fontHeightPx = metrics.getHeight();

    if( (fontWidthPx > dstWidthPx) || (fontHeightPx > dstHeightPx) ) {
      maxSizePt = scaledPt;
    }
    else {
      minSizePt = scaledPt;
    }

    scaledPt = (minSizePt + maxSizePt) / 2;
  }

  return scaledFont.deriveFont( (float) Math.floor( scaledPt ) );
} 
```

想象一下，您想向具有矩形边界的组件添加标签，以`r`使标签完全填满组件的区域。可以写：

```
final Font DEFAULT_FONT = new Font( "DejaVu Sans", BOLD, 12 );
final Color COLOUR_LABEL = new Color( 33, 33, 33 );

// TODO: Return a valid container component instance.
final var r = getComponent().getBounds();
final var graphics = getComponent().getGraphics();

final int width = (int) r.getWidth();
final int height = (int) r.getHeight();

final var label = new JLabel( text );
label.setFont( DEFAULT_FONT );
label.setSize( width, height );
label.setForeground( COLOUR_LABEL );

final var scaledFont = scaleFont( label, r, graphics );
label.setFont( scaledFont ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-05-06T23:22:06.913

将所有宽度变量更改为 float 而不是 int 以获得更好的结果。

```
public static Font scaleFontToFit(String text, int width, Graphics g, Font pFont)
{
    float fontSize = pFont.getSize();
    float fWidth = g.getFontMetrics(pFont).stringWidth(text);
    if(fWidth <= width)
        return pFont;
    fontSize = ((float)width / fWidth) * fontSize;
    return pFont.deriveFont(fontSize);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-18T07:13:33.003

您可以使用插值搜索：

```
public static Font scaleFont(String text, Rectangle rect, Graphics g, Font pFont) {
    float min=0.1f;
    float max=72f;
    float size=18.0f;
    Font font=pFont;

    while(max - min <= 0.1) {
        font = g.getFont().deriveFont(size);
        FontMetrics fm = g.getFontMetrics(font);
        int width = fm.stringWidth(text);
        if (width == rect.width) {
            return font;
        } else {
            if (width < rect.width) {
                min = size;
            } else {
                max = size;
            }
            size = Math.min(max, Math.max(min, size * (float)rect.width / (float)width));
        }
    }
    return font;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-05T21:32:17.060

```
private Font scaleFont ( String text, Rectangle rect, Graphics gc )
{
    final float fMinimumFont = 0.1f;
    float fMaximumFont = 1000f;

    /* Use Point2d.Float to hold ( font, width of font in pixels ) pairs. */
    Point2D.Float lowerPoint = new Point2D.Float ( fMinimumFont, getWidthInPixelsOfString ( text, fMinimumFont, gc ) );
    Point2D.Float upperPoint = new Point2D.Float ( fMaximumFont, getWidthInPixelsOfString ( text, fMaximumFont, gc ) );
    Point2D.Float midPoint = new Point2D.Float ();

    for ( int i = 0; i < 50; i++ )
    {
        float middleFont = ( lowerPoint.x + upperPoint.x ) / 2;

        midPoint.setLocation ( middleFont, getWidthInPixelsOfString ( text, middleFont, gc ) );

        if ( midPoint.y >= rect.getWidth () * .95 && midPoint.y <= rect.getWidth () )
            break;
        else if ( midPoint.y < rect.getWidth () )
            lowerPoint.setLocation ( midPoint );
        else if ( midPoint.y > rect.getWidth () )
            upperPoint.setLocation ( midPoint );
    }

    fMaximumFont = midPoint.x;

    Font font = gc.getFont ().deriveFont ( fMaximumFont );

    /* Now use Point2d.Float to hold ( font, height of font in pixels ) pairs. */
    lowerPoint.setLocation ( fMinimumFont, getHeightInPixelsOfString ( text, fMinimumFont, gc ) );
    upperPoint.setLocation ( fMaximumFont, getHeightInPixelsOfString ( text, fMaximumFont, gc ) );

    if ( upperPoint.y < rect.getHeight () )
        return font;

    for ( int i = 0; i < 50; i++ )
    {
        float middleFont = ( lowerPoint.x + upperPoint.x ) / 2;

        midPoint.setLocation ( middleFont, getHeightInPixelsOfString ( text, middleFont, gc ) );

        if ( midPoint.y >= rect.getHeight () * .95 && midPoint.y <= rect.getHeight () )
            break;
        else if ( midPoint.y < rect.getHeight () )
            lowerPoint.setLocation ( midPoint );
        else if ( midPoint.y > rect.getHeight () )
            upperPoint.setLocation ( midPoint );
    }

    fMaximumFont = midPoint.x;

    font = gc.getFont ().deriveFont ( fMaximumFont );

    return font;
}

private float getWidthInPixelsOfString ( String str, float fontSize, Graphics gc )
{
    Font font = gc.getFont ().deriveFont ( fontSize );

    return getWidthInPixelsOfString ( str, font, gc );
}

private float getWidthInPixelsOfString ( String str, Font font, Graphics gc )
{
    FontMetrics fm = gc.getFontMetrics ( font );
    int nWidthInPixelsOfCurrentFont = fm.stringWidth ( str );

    return (float) nWidthInPixelsOfCurrentFont;
}

private float getHeightInPixelsOfString ( String string, float fontSize, Graphics gc )
{
    Font font = gc.getFont ().deriveFont ( fontSize );

    return getHeightInPixelsOfString ( string, font, gc );
}

private float getHeightInPixelsOfString ( String string, Font font, Graphics gc )
{
    FontMetrics metrics = gc.getFontMetrics ( font );
    int nHeightInPixelsOfCurrentFont = (int) metrics.getStringBounds ( string, gc ).getHeight () - metrics.getDescent () - metrics.getLeading ();

    return (float) nHeightInPixelsOfCurrentFont * .75f;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T04:30:23.033

您可以使用二分搜索模式来提高效率 - 具有一定粒度的高/低 - 1、0.5 或 0.25 点。

比如，猜18，太高了？移动到 9，太低了？13.5，太低了？15.75，太高了？14！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-18T04:30:19.227

另一种明显的方法是将文本预先绘制在位图上，然后缩小位图以适应矩形；但是，由于手工制作的字体设计和提示等，找到合适的字体大小会产生最好看的（虽然可能不是最快的）结果。

# java - 如何在 Java 中使用 SocketChannel 发送然后读取 \n

> ID：876236
> 
> 赞同：3
> 
> 时间：2009-05-18T04:16:58.557
> 
> 标签：java, nio

我正在将`SocketChannel`Java 类用于客户端/服务器应用程序。我可以发送和检索数据。但如果我的数据包含`'\n'`，那么我不会读取正确的数据。例如

```
sending data = "Hi dear"
receiving data = "Hi dear"

sending data = "Hi dear\n\n i am fine"
receiving data = "Hi dear"

sending data = "Hi dear\\n\\n i am fine"
receiving data = "Hi dear\n\n i am fine"

ByteBuffer byteBuffer = ByteBuffer.allocate(BUFSIZE);
int nbytes = socketChannel.getChannel().read(byteBuffer); 
```

我正在使用 US-ASCII 解码。我怎样才能克服这种类型的问题？

谢谢，迪帕克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T05:05:04.170

如果 SocketChannel 处于非阻塞模式，读操作不保证读取所有可用数据，也不保证读取任何数据。在上述情况下，您可能需要多次调用才能读取所有传输的数据。

您需要某种方式让接收代码知道它何时读取了所有数据。这意味着要么让发送方发送有关数据内容（长度等）的信息，作为商定协议的一部分，要么只使用 Channel 处理一个数据块并读取 Channel 直到它关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T05:02:47.883

我认为您在分配时遇到了 ByteBuffer 问题。

我之前遇到过 SocketChannel 的问题，数据似乎被阻止了。我建议在 ByteBuffer 上做一些系统输出

```
while(ByteBuffer.hasRemaining(){
    socketChannel.write(buffer) //writing data
    System.out.printline(socketChanel.remaining() + " : bytes to go");
} 
```

这可能是朝着隔离问题的正确方向迈出的一步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T06:15:37.143

如果您按照建议以二进制形式发送数据，则没有理由将 \n 与任何其他字节区别对待。如果是图像之类的东西，就会一直被破坏。如果您使用字符 <= 127，则编码不应该有任何区别。

我会建议您的应用程序没有按照您认为的方式工作，并且您正在阅读假设代码中某处出现 \n 终止的字符串。

您可以发布用于编写和读取字符串的代码吗？即你如何确定字符串何时结束？

# bash - 如何使用 Bash 将标准输出和标准错误重定向并附加到文件中

> ID：876239
> 
> 赞同：1768
> 
> 时间：2009-05-18T04:19:45.877
> 
> 标签：bash, append, stdout, io-redirection, stderr

[要将标准输出](https://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29)重定向到 Bash 中的截断文件，我知道要使用：

```
cmd > file.txt 
```

要在 Bash 中重定向标准输出，附加到文件，我知道使用：

```
cmd >> file.txt 
```

要将标准输出和[标准错误](https://en.wikipedia.org/wiki/Standard_streams#Standard_error_(stderr))都重定向到截断的文件，我知道要使用：

```
cmd &> file.txt 
```

如何重定向附加到文件的标准输出和标准错误？`cmd &>> file.txt`对我不起作用。

* * *

## 回答 #1

> 赞同：2286
> 
> 时间：2009-05-18T04:23:16.287

```
cmd >>file.txt 2>&1 
```

Bash 从左到右执行重定向，如下所示：

1.  `>>file.txt`：以附加模式打开`file.txt`并重定向`stdout`到那里。
2.  `2>&1`：重定向`stderr`到*“`stdout`当前要去的地方”*。在这种情况下，这是一个以附加模式打开的文件。换句话说，`&1`重用当前使用的文件描述符`stdout`。

* * *

## 回答 #2

> 赞同：407
> 
> 时间：2009-05-18T04:42:13.683

有两种方法可以做到这一点，具体取决于您的 Bash 版本。

经典且可移植的（**Bash pre-4**）方式是：

```
cmd >> outfile 2>&1 
```

**从Bash 4**开始的一种不可移植的方式是

```
cmd &>> outfile 
```

（类似于`&> outfile`）

为了获得良好的编码风格，您应该

*   确定是否需要考虑可移植性（然后使用经典方式）
*   决定是否考虑到 Bash pre-4 的可移植性（然后使用经典方式）
*   无论您使用哪种语法，都不要在同一个脚本中更改它（混淆！）

如果您的脚本已经开始`#!/bin/sh`（无论是否有意），那么 Bash 4 解决方案以及通常任何特定于 Bash 的代码都不是要走的路。

还要记住，Bash 4`&>>`只是更短的语法——它没有引入任何新功能或类似的东西。

语法（除了其他重定向语法）在[Bash 黑客 wiki](https://wiki.bash-hackers.org/syntax/redirection#appending_redirected_output_and_error_output)中描述。

* * *

## 回答 #3

> 赞同：102
> 
> 时间：2013-07-24T18:09:45.047

在 Bash 中，您还可以明确指定重定向到不同的文件：

```
cmd >log.out 2>log_error.out 
```

附加将是：

```
cmd >>log.out 2>>log_error.out 
```

* * *

## 回答 #4

> 赞同：74
> 
> 时间：2015-12-12T06:17:38.270

这应该可以正常工作：

```
your_command 2>&1 | tee -a file.txt 
```

它将所有日志存储在*file.txt*中，并将它们转储到终端中。

* * *

## 回答 #5

> 赞同：69
> 
> 时间：2012-03-27T18:24:48.073

在 Bash 4（以及[Z shell](https://en.wikipedia.org/wiki/Z_shell) ( `zsh`) 4.3.11）中：

```
cmd &>> outfile 
```

开箱即用。

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2014-04-10T05:56:00.840

试试这个：

```
You_command 1> output.log  2>&1 
```

您`&> x.file`在 Bash 4 中的使用确实有效。对此感到抱歉：（

## 这里有一些额外的提示。

0, 1, 2, ..., 9 是 bash 中的文件描述符。

0代表[标准输入](https://en.wikipedia.org/wiki/Standard_streams#Standard_input_(stdin))，1代表[标准输出](https://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29)，2代表[标准错误](https://en.wikipedia.org/wiki/Standard_streams#Standard_error_(stderr))。3~9 留作其他临时用途。

任何文件描述符都可以通过使用运算符`>`或`>>`（附加）重定向到其他文件描述符或文件。

用法：< **file_descriptor** > **>** <**文件名**| **&file_descriptor** >

请参阅*[第 20 章中的参考资料。I/O 重定向](http://www.tldp.org/LDP/abs/html/io-redirection.html)*。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2019-02-15T16:11:31.437

另一种方法：

如果在`&>>`不可用的情况下使用旧版本的 Bash，您还可以执行以下操作：

```
(cmd 2>&1) >> file.txt 
```

这会产生一个子shell，因此它的效率低于传统方法 的`cmd >> file.txt 2>&1`，因此它不适用于需要修改当前 shell 的命令（例如`cd`, `pushd`），但这种方法对我来说感觉更自然和易于理解：

1.  将标准错误重定向到标准输出。
2.  通过附加到文件来重定向新的标准输出。

此外，括号消除了任何顺序的歧义，特别是如果您想将标准输出和标准错误传递给另一个命令。

为了避免启动子shell，您可以使用花括号而不是括号来创建*组命令*：

```
{ cmd 2>&1; } >> file.txt 
```

（请注意，终止 group 命令需要分号（或换行符）。）

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2021-04-05T09:40:19.683

## 来自脚本本身的重定向

您可以从脚本本身计划重定向：

```
#!/bin/bash

exec 1>>logfile.txt
exec 2>&1

/bin/ls -ld /tmp /tnt 
```

运行它会创建/追加`logfile.txt`，包含：

```
/bin/ls: cannot access '/tnt': No such file or directory
drwxrwxrwt 2 root root 4096 Apr  5 11:20 /tmp 
```

## 登录到许多不同的文件

您可以创建两个不同的日志文件，附加到一个*整体*日志并重新创建另一个*最后一个*日志：

```
#!/bin/bash

if [ -e last.log ] ;then
    mv -f last.log last.old
fi
exec 1> >(tee -a overall.log /dev/tty >last.log)
exec 2>&1

ls -ld /tnt /tmp 
```

运行此脚本将

*   如果`last.log`已经存在，将它们重命名为（如果存在则`last.old`覆盖）。`last.old`
*   创建一个新的`last.log`.
*   将所有内容附加到`overall.log`
*   将所有内容输出到终端。

## 简单*和*组合的日志

```
#!/bin/bash

[ -e last.err ] && mv -f last.err lasterr.old
[ -e last.log ] && mv -f last.log lastlog.old

exec 2> >(tee -a overall.err combined.log /dev/tty >last.err)
exec 1> >(tee -a overall.log combined.log /dev/tty >last.log)

ls -ld /tnt /tmp 
```

所以你有了

*   `last.log`上次运行日志文件
*   `last.err`上次运行错误文件
*   `lastlog.old`以前的运行日志文件
*   `lasterr.old`上一次运行错误文件
*   `overall.log`附加的整体日志文件
*   `overall.err`附加的整体错误文件
*   `combined.log`附加了整体错误和日志组合文件。
*   仍然输出到终端

### 对于交互式会话，请使用`stdbuf`：

如果你打算在*交互式*shell 中使用它，你必须告诉`tee`不要缓冲他的输入/输出：

```
# Source this to multi-log your session
[ -e last.err ] && mv -f last.err lasterr.old
[ -e last.log ] && mv -f last.log lastlog.old
exec 2> >(exec stdbuf -i0 -o0 tee -a overall.err combined.log /dev/tty >last.err)
exec 1> >(exec stdbuf -i0 -o0 tee -a overall.log combined.log /dev/tty >last.log) 
```

一旦采购了这个，你可以尝试：

```
ls -ld /tnt /tmp 
```

# java - XPath 无法通过 id 找到表

> ID：876240
> 
> 赞同：0
> 
> 时间：2009-05-18T04:21:01.590
> 
> 标签：java, xpath, watij

我正在使用 WATIJ 进行一些屏幕抓取，但它无法读取 HTML 表（抛出 NullPointerExceptions 或 UnknownObjectExceptions）。为了克服这个问题，我阅读了 HTML 并通过 JTidy 运行它以获得格式良好的 XML。

我想用 XPath 解析它，但它无法找到一个`<table ...>`by，`id`即使该表在 XML 纯文本中作为一天存在。这是我的代码：

```
XPathFactory factory=XPathFactory.newInstance();  
XPath xPath=factory.newXPath();  
InputSource inputSource = new InputSource(new StringReader(tidyHtml));  
XPathExpression xPathExpression=xPath.compile("//table[@id='searchResult']");  
String expression = "//table[@id='searchResult']";
String table = xPath.evaluate(expression, inputSource);
System.out.println("table = " + table); 
```

该表是一个空字符串。

但是，该表在 XML 中。如果我打印`tidyHtml`它显示的字符串

```
 <table
   class="ApptableDisplayTag"
   id="searchResult"
   style="WIDTH: 99%"> 
```

我以前没有使用过 XPath，所以也许我遗漏了一些东西。

谁能让我直截了当？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-08-31T20:39:53.593

我对 JTidy 一无所知，但对于 WATIJ，我相信您获得 NullPointer 和 UnknownObject 异常的原因是因为您的 XPATH 使用的是小写节点。因此，假设您使用“//table[@id='searchResult']”作为在 WATIJ 中查找表的 xpath。这实际上不起作用，因为“table”是小写的。对于 WATIJ，您需要将所有节点名称大写，例如：“//TABLE[@id='searchResult']”。例如，假设您想使用 WATIJ 打印该表的行数，您可以执行以下操作：

```
导入 watij.runtime.ie.IE；
导入静态 watij.finders.SymbolFactory.*；

公共类示例{
    公共静态无效主要（字符串[]参数）{
        IE 即 = 新的 IE();
        ie.start("your_url_goes_here");
        System.out.println(ie.table(xpath, "//TABLE[@id='searchResult']").rowCount());
        即关闭（）；
    }
}

```

此代码或答案可能不正确，因为我今天才开始使用 WATIJ。尽管我确实遇到了与 xpaths 相同的问题。花了我几个小时的搜索/测试，我才注意到这个页面上的所有 xpath 是如何大小写的：[WATIJ 用户指南](http://watij.com/wiki:user_guide)一旦我在我的 xpath 中更改了大小写，WATIJ 就能够找到对象，所以这也应该适用于你.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T04:54:04.327

我从未直接使用过 Java 的 XPath API，我总是通过[dom4j](http://www.dom4j.org/dom4j-1.6.1/guide.html)或其他语言（Perl 和 C）使用它。但我对它如何正常工作有很好的理解。一开始您可能应该将输入解析为 DOM 文档，这将有很大帮助。此外，如果您知道您的文档具有 ID，您应该通过加载描述它的 DTD 或模式来解析它，XML 解析器将标记和识别具有正确 ID 的节点。完成此操作后，您可以将代码与 DOM 树一起使用。

[XPath.evaluate(expression, item)]( [http://java.sun.com/j2se/1.5.0/docs/api/javax/xml/xpath/XPath.html#evaluate(java.lang. String,%20java.lang.Object)](http://java.sun.com/j2se/1.5.0/docs/api/javax/xml/xpath/XPath.html#evaluate(java.lang.String,%20java.lang.Object))表明第二个元素应该是 Node 或 NodeList。这可能是为什么你有很多 UnknownObjectExceptions。

如果您的 XML 解析器能够识别 ID 元素，那么您可以使用以下 XPath 表达式访问具有 ID 的元素：

```
XPathExpression xPathExpression=xPath.compile("id('searchResult')");
xPathExpression.evaluate(document); // document is a DOM document instance 
```

使用 XPath 函数[id()](http://www.exampledepot.com/egs/org.w3c.dom)是访问元素的最有效方式，即当元素使用 ID 并且已在 DTD 或 Schema 中以这种方式声明时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T04:54:35.590

你的 xPath 是正确的......无论失败是什么，都不是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T15:11:32.497

看起来问题主要出在 JTidy 上。我可以通过执行以下操作让 xpath 解析 JTidy-ied 结果：

删除所有“<&>nbsp;”。JTidy 返回带有“<&>nbsp;”的 xhtml 标签之外。移除标签中的 xmlns=... 属性 移除“head”标签。（我使用了一些有趣的格式，因为 HTML 实体在正确输入时不会显示）

如果 ... 元素，JTidy 还会在文本内容的中间放置换行符。

我将不得不查看其他 HTML -> XML 转换选项。我快速尝试了 Cobra，但它也无法通过 ID 找到我的表。我没有尝试手动清理 Cobra 的结果，所以我不知道它与 JTidy 相比如何。

如果您知道返回良好 XML 的 HTML 解析器，请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-31T20:53:45.127

解决方案是放弃 WATIJ 并切换到 Google WebDriver。WebDriver 记录了不同浏览器如何处理 xpath 语句中的大小写。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-11-10T00:46:24.800

双引号绝对不是必需的，大写也不是。命名空间和/或 DTD 更有可能是答案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-04-06T07:23:08.427

Uniue ID 属性需要通过 id() 方法访问`id('search')`

# html - 为什么命名您的 HTML 表单提交按钮“提交”会破坏事情？

> ID：876243
> 
> 赞同：5
> 
> 时间：2009-05-18T04:26:03.967
> 
> 标签：html, form-submit, http-post, form-post

在 ASP.NET webforms 和 ASP 3 (Classic ASP) 中，我遇到了一个问题，将表单提交按钮命名为“提交”会“破坏”。下面是渲染的 HTML：

```
<input type="submit" name="Submit" value="Submit" id="Submit" /> 
```

我说“破坏事物”是因为我不确定到底为什么或发生了什么。但症状通常是按下提交按钮有时什么也没做，即它只是不起作用。但有时它确实有效。

事实上，我只是用下面的代码构建了一个快速的一页测试，并且提交工作正常：

```
<form id="form1" runat="server">
<div>
    <asp:TextBox ID="txtTest" runat="server" />
    <asp:Button ID="Submit" runat="server" Text="Submit" />
</div>
</form> 
```

**但是**，在过去，这个问题已经出现，并且重命名按钮总是使症状消失。

**那么，是否有任何 HTML/HTTP/浏览器专家知道为什么在提交按钮上设置 id="submit" 会导致任何问题？**

**编辑**

这个[SO 评论](https://stackoverflow.com/questions/729330/jquery-triggersubmit-breaking/749706#749706)似乎暗示“提交”是一个保留关键字。但是为什么“id”或“name”属性会干扰这个呢？以及如何以会导致冲突的方式实现这个“保留”关键字？

再次感谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-18T04:46:07.630

该`form`元素有一个名为 的方法`submit`，但也有表单中的表单元素作为成员。

如果您有一个名为 的表单中的按钮`submit`，您可以使用 访问它`document.form1.submit`。但是，由于它与方法同名`submit`，因此不再有任何方法可以访问该方法。如果您使用该方法提交表单，则将不再有效。

例如，如果您有一个使用 Javascript 提交表单的按钮，则该按钮不起作用：

```
<input type="button" name="submit" onclick="this.form.submit();" value="try" /> 
```

当按钮尝试使用该`submit`方法时，它将获得对自身的引用（以及尝试调用它时的错误消息，因为按钮不是函数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T04:49:22.157

我会敦促您远离所有 javascript 的 DOM 保留字。在您定义的所有内容或 $ 或其他显然不会与保留字冲突的东西前面使用“my”，您可能会意外地超载并造成严重破坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T04:45:05.243

生成的允许您将事件绑定到对象的代码隐藏是根据您指定的值命名的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-07T06:26:20.700

如果表单提交有问题，只需使用 onsubmit

```
<form id="form1" runat="server" onsubmit="this.submit()">
<div>
    <asp:TextBox ID="txtTest" runat="server" />
    <asp:Button ID="Submit" runat="server" Text="Submit" Type="submit"/>
</div>
</form> 
```

# php - ExtJS Gridfilter 值到 PHP

> ID：876256
> 
> 赞同：1
> 
> 时间：2009-05-18T04:32:45.533
> 
> 标签：php, extjs, filter, grid

我正在使用 ExtJS v2.0 。我想获取这些值并将它们作为,或任何可以使用此后端代码插入 PHP 查询的可能方法`gridfilter`传递给 PHP 页面：http: [//www.vinylfox.com/grid-filter-php -后端代码/](http://www.vinylfox.com/grid-filter-php-backend-code/)`$_POST``$_GET``$variable`

我将使用这些查询来打印一张带有打印结果和格式的表格。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T10:34:33.237

GridFilter 使用一些搜索参数重新加载存储，例如：

> filter[0][data][type] = string
> filter[0][data][value] = some value
> filter[0][field] = company

这些数据通常会在 $_POST 中以 PHP 结束。因此，您应该分析这些值并创建 SQL 语句。就像评论中提到的那样，您应该引用这些值。

# python - 是否有任何适用于 python 3.0 的 AES 加密 python 库？

> ID：876258
> 
> 赞同：0
> 
> 时间：2009-05-18T04:34:12.397
> 
> 标签：python, encryption, aes

我想知道是否有任何支持 python 3.0 的加密库。加密128位数据的文件？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T04:49:10.440

`slowaes`我建议我的开源项目[http://code.google.com/p/slowaes/](http://code.google.com/p/slowaes/) - 如果它不能开箱即用，那么它应该是微不足道的，因为它是纯 Python（并且适用于 128 位数据，“慢”部分应该无关紧要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T05:01:14.343

要正确加密数据，您需要的不仅仅是加密算法。如果您绝对必须自己做，最好找到一个完整的库，其中包含显示如何正确做事的文档。

仅加密是不够的。你是如何生成密钥的？您使用的是什么操作模式？您是否在数据上使用 MAC？

ECB 模式下的直接 AES 泄漏信息。如果没有 MAC，即使数据被加密，攻击者仍然可以篡改您的数据。

# payment-gateway - 如何将每个请求的唯一订单 ID 发送到支付网关？

> ID：876264
> 
> 赞同：1
> 
> 时间：2009-05-18T04:40:30.560
> 
> 标签：payment-gateway

我有一个购物车。我想与 CCAvenue 支付网关集成。我总是从数据库发送订单 ID。结帐后，我的系统突然关闭。然后我必须再次检查它再次发送。我数据库中的订单 ID 与支付网关重复。这是我的问题。

我的问题是：我如何每次都发送一个唯一的订单 ID？我的网站是 PHP 的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T05:08:04.950

对于大多数支付网关，您可以发送单个 auth+capture AKA“销售”交易，或者您可以将授权和捕获交易作为两个单独的请求发送。

如果您担心发送单个销售交易的交易一致性问题，我的建议是发送授权以首先保留资金，然后在您的订购流程结束时发送捕获。

如果系统在初始授权期间出现故障，更糟糕的情况是，在您的身份验证到期后三天内将释放资金。您应该注意不要发生更糟糕的授权情况，因为它会阻止授权资金在被清除之前被使用，这有时会导致客户不高兴。

如果系统在最终捕获期间失败并且您无法记录状态，您可以稍后重新运行捕获，在这种情况下，结果将是成功或来自网关的消息表明捕获已经发生，然后可用于更新支付状态你的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T04:47:48.443

我认为应该有一个单独的功能 - 一直运行，检查先前版本的订单是否在购物车中。此外，该过程的副本应始终存储在数据库中。这样，如果由于某种原因，服务器重新启动，订单仍然可以从相同的位置进行（这样就不会有重复订单的问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T04:48:05.807

可能想要一个像这样的唯一ID [http://us3.php.net/uniqid](http://us3.php.net/uniqid)虽然你的问题有点模糊

# css - HTML：具有背景颜色和图像的跨度 - 为什么颜色不会出现在图像下方？

> ID：876268
> 
> 赞同：6
> 
> 时间：2009-05-18T04:42:48.393
> 
> 标签：css, image, html

我正在尝试在跨度内的文本旁边添加一个箭头图像。这是我正在使用的 HTML：

```
<span id="status" class='unreviewed'>
  Unreviewed 
  <img src="bullet_arrow_down.png" />
</span> 
```

现在，我用这个 css 为 span 的背景着色：

```
#status {
  float: right;
  position: relative;
  cursor: pointer;
  -moz-background-clip:border;
  -moz-background-inline-policy:continuous;
  -moz-background-origin:padding;
  color:#FFFFFF;
  font-size: 1.8em;
  top: 10px;
}

#status span.unreviewed {
  padding: 3px 4px; 
  background:#DA704B none repeat scroll 0 0;
}

#status span.unreviewed img {
  float: right;
} 
```

现在，这显示所有内容都正确排列，但背景颜色不会超出“未审核”一词的末尾。该图像尽管是透明的 png，但后面是白色的，而不是 #DA704B。

Firefox 和 Safari 都是这种情况。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-18T05:19:07.537

Spans 需要有 display: block; 为了那样工作。

```
#status {
  display: block;
  float: right;
  position: relative;
  cursor: pointer;
  -moz-background-clip:border;
  -moz-background-inline-policy:continuous;
  -moz-background-origin:padding;
  color:#FFFFFF;
  font-size: 1.8em;
  top: 10px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T05:32:19.543

好吧，让我眼前一亮的是：

```
#status span.unreviewed 
```

将是跨度的选择器，其类“未审查”是#status 的*后代*。您正在寻找的选择器是

```
#status.unreviewed 
```

您可能想查看 CSS2 的 w3c 规范以避免此类选择器问题。 [http://www.w3.org/TR/CSS2/selector.html](http://www.w3.org/TR/CSS2/selector.html)

希望有帮助。

编辑：另一个快速点，为什么不使用`background-color`而不是`background`因为你所做的只是改变背景颜色？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T05:20:53.573

改变：

```
#status span.unreviewed { 
```

到 span.unreviewed {

在所有浏览器中都适用于我。

如果它仍然不起作用，请尝试将其设置为块级或使用 div，因为着色不像您对内联元素所期望的那样工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T06:46:04.373

您可能还会发现值得声明：

```
#status span.unreviewed img {
background-color: transparent;
} 
```

那至少应该删除白色的默认图像背景。

# javascript - 在 JavaScript 中单击按钮时动态更改属性名称

> ID：876278
> 
> 赞同：0
> 
> 时间：2009-05-18T04:46:44.213
> 
> 标签：javascript

我在单击添加按钮时在表中添加行。

每行包含姓名、班级、年份文本框。

对于第一行，属性名称将是...... name_1，class_1，year_1。
对于第 2 行，属性名称将是...... name_2、class_2、year_2。

如果我删除第一行（name_1，class_1，year_1），第二行的属性名称应该变成

```
name_2,class_2,year_2 <==> name_1,class_1,year_1 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T04:48:26.337

我不会在客户端这样做。在您的服务器端代码中，只需检查密钥是否存在于 POST 数组中。

如果您仍想重命名元素：

```
var f = document.myForm;
var removeThisOne = 3;
var current = removeThisOne + 1;

while (f['name_' + current]) {
    f['name_' + current].name = 'name_' + (current - 1);
    f['class_' + current].name = 'class_' + (current - 1);
    // etc
    ++current;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T04:58:00.690

你可以做这样的事情（未经测试，应该几乎可以工作......）

需要“委托”内部方法来维护行的范围。

设置：

```
var table = document.createElement('table');
var tbody = document.createElement('tbody');
table.appendChild(tbody);
document.appendChild(table); // or wherever you want it. 
```

添加行：

```
function clickHandler( row )
{
    function delegate()
    {
        tbody.removeChild(row);
    }
    return delegate;
}
for (var i in someObj)
{
    var row = document.createElement('tr')
    var td1 = document.createElement('td');
    var td2 = etc...

    td1.innerHTML = someObj[i].field1;
    row.appendChild(td);
    td2 = etc...

    var del = document.createElement("input");
    input.type="button";
    input.value = "delete";
    input.onclick = clickHandler(row);
    tdX.appendChild(del);

    tbody.appendChild(row);
} 
```

# regex - Vim 通过减少反向引用进行搜索和替换？

> ID：876279
> 
> 赞同：10
> 
> 时间：2009-05-18T04:47:12.640
> 
> 标签：regex, vim, replace

鉴于 Vim 中的以下文本：

```
[2] [3] [4] 
```

我想执行搜索和替换并生成以下内容：

```
[1] [2] [3] 
```

我知道如何通过搜索和替换使用反向引用来提取数字：

```
:%s/\[\(\d\)\]/[\1]/g 
```

但现在的问题是如何减少 \1 的值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-18T05:02:36.637

尝试

```
:%s/\[\(\d\+\)\]/\=join(['[', submatch(1) - 1, ']'], '')/g 
```

编辑：我添加了一个`\+`后`\d`，以防你想匹配多个个位数的数字。

请参阅[:help sub-replace-special](http://vimdoc.sourceforge.net/htmldoc/change.html#sub-replace-special)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T01:21:08.690

当您使用`\zs`and`\ze`将数字锚定在括号内而不匹配它们时，替换变得更简单，因为您不需要在替换中连接：

```
:%s/\[\zs\d\+\ze]/\=submatch(0)-1/g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T05:12:27.320

试试这个：

```
%s:\d:\r&\r:g 
```

然后

```
s/\d/\=submatch(0)-1/ 
```

现在你需要加入这些行。

# php - 从类似字段收集 POST 数据

> ID：876288
> 
> 赞同：1
> 
> 时间：2009-05-18T04:53:03.437
> 
> 标签：php, html, forms, variables

我正在发布一个具有许多类似字段（艺术家1、艺术家2、....艺术家20）的表单。我正在尝试将它们添加到数据库中，但我不确定如何轻松获取所有发布的数据而不必单独写出每个数据。我怎样才能将一个 int 组合到一个字符串中，这样我就不必把每一个都写出来？这是我尝试过的一种方法，但没有奏效：

```
for( $i=0; $i <= 20; $i++ )
{
   $artist = $_POST['artist'.$i] 
} 
```

我也试过（没用）：

```
for( $i=0; $i <= 20; $i++ )
{
   $art = 'artist' . $i;
   $artist = $_POST[ $art ];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T04:57:55.387

您可以使用方括号命名您的 HTML 元素，PHP 会为您将它们转换为数组：

```
<input type="text" name="artist[]" value="abc" />
<input type="text" name="artist[]" value="def" />
<input type="text" name="artist[]" value="ghi" />
<input type="text" name="artist[]" value="jkl" /> 
```

当你发布它时，这就是你将在 PHP 中得到的：

```
print_r($_POST);

/* array(
    artist => array(
        0 => "abc",
        1 => "def",
        2 => "ghi",
        3 => "jkl"
    )
) */ 
```

...至于将它们放入数据库，请参阅以下问题：[在同一张表中插入两种数组](https://stackoverflow.com/questions/861239/insert-two-kinds-of-array-in-the-same-table)

# algorithm - 用于 M 位置的圆移位 N 大小数组的最快算法

> ID：876293
> 
> 赞同：38
> 
> 时间：2009-05-18T04:55:18.040
> 
> 标签：algorithm, arrays, math, puzzle, programming-pearls

M个位置的圆移阵列最快的算法是什么？
例如，`[3 4 5 2 3 1 4]`移位 M = 2 个位置应该是`[1 4 3 4 5 2 3]`。

非常感谢。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-05-18T05:46:56.350

如果您想要 O(n) 时间并且不需要额外的内存使用（因为指定了数组），请使用 Jon Bentley 的书“Programming Pearls 2nd Edition”中的算法。它交换所有元素两次。不如使用链表快，但使用更少的内存并且概念上很简单。

```
shiftArray( theArray, M ):
    size = len( theArray )
    assert( size > M )
    reverseArray( theArray, 0, size - 1 )
    reverseArray( theArray, 0, M - 1 )
    reverseArray( theArray, M, size - 1 ) 
```

reverseArray( anArray, startIndex, endIndex ) 将元素的顺序从 startIndex 反转到 endIndex，包括端点。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-09-21T15:18:29.517

# 最佳解决方案

要求最快的问题。反转 3 次是最简单的，但每个元素恰好移动两次，需要 O(N) 时间和 O(1) 空间。也可以在 O(N) 时间和 O(1) 空间中对一个数组进行循环移位，将每个元素仅移动一次。

## 主意

`N=9`我们可以用一个循环循环移位一个长度数组`M=1`：

```
tmp = arr[0]; arr[0] = arr[1]; ... arr[7] = arr[8]; arr[8] = tmp; 
```

如果`N=9`，`M=3`我们可以用三个循环循环移位：

1.  `tmp = arr[0]; arr[0] = arr[3]; arr[3] = tmp;`
2.  `tmp = arr[1]; arr[1] = arr[4]; arr[4] = tmp;`
3.  `tmp = arr[2]; arr[2] = arr[5]; arr[5] = tmp;`

请注意，每个元素被读取一次并写入一次。

## 换档示意图`N=9, M=3`

[![循环移位示意图](https://i.stack.imgur.com/2r3ZP.png)](https://i.stack.imgur.com/2r3ZP.png)

第一个循环以黑色显示，数字表示操作顺序。第二个和第三个循环以灰色显示。

所需的周期数是 和 的最大公约数[(](https://en.wikipedia.org/wiki/Greatest_common_divisor) GCD) 。如果 GCD 为 3，我们在每个 开始一个循环。[使用二进制 GCD 算法](https://en.wikipedia.org/wiki/Binary_GCD_algorithm)计算 GCD 速度很快。`N``M``{0,1,2}`

示例代码：

```
// n is length(arr)
// shift is how many place to cycle shift left
void cycle_shift_left(int arr[], int n, int shift) {
  int i, j, k, tmp;
  if(n <= 1 || shift == 0) return;
  shift = shift % n; // make sure shift isn't >n
  int gcd = calc_GCD(n, shift);

  for(i = 0; i < gcd; i++) {
    // start cycle at i
    tmp = arr[i];
    for(j = i; 1; j = k) {
      k = j+shift;
      if(k >= n) k -= n; // wrap around if we go outside array
      if(k == i) break; // end of cycle
      arr[j] = arr[k];
    }
    arr[j] = tmp;
  }
} 
```

## 任何数组类型的 C 代码：

```
// circle shift an array left (towards index zero)
// - ptr    array to shift
// - n      number of elements
// - es     size of elements in bytes
// - shift  number of places to shift left
void array_cycle_left(void *_ptr, size_t n, size_t es, size_t shift)
{
  char *ptr = (char*)_ptr;
  if(n <= 1 || !shift) return; // cannot mod by zero
  shift = shift % n; // shift cannot be greater than n

  // Using GCD
  size_t i, j, k, gcd = calc_GCD(n, shift);
  char tmp[es];

  // i is initial starting position
  // Copy from k -> j, stop if k == i, since arr[i] already overwritten
  for(i = 0; i < gcd; i++) {
    memcpy(tmp, ptr+es*i, es); // tmp = arr[i]
    for(j = i; 1; j = k) {
      k = j+shift;
      if(k >= n) k -= n;
      if(k == i) break;
      memcpy(ptr+es*j, ptr+es*k, es); // arr[j] = arr[k];
    }
    memcpy(ptr+es*j, tmp, es); // arr[j] = tmp;
  }
}

// cycle right shifts away from zero
void array_cycle_right(void *_ptr, size_t n, size_t es, size_t shift)
{
  if(!n || !shift) return; // cannot mod by zero
  shift = shift % n; // shift cannot be greater than n
  // cycle right by `s` is equivalent to cycle left by `n - s`
  array_cycle_left(_ptr, n, es, n - shift);
}

// Get Greatest Common Divisor using binary GCD algorithm
// http://en.wikipedia.org/wiki/Binary_GCD_algorithm
unsigned int calc_GCD(unsigned int a, unsigned int b)
{
  unsigned int shift, tmp;

  if(a == 0) return b;
  if(b == 0) return a;

  // Find power of two divisor
  for(shift = 0; ((a | b) & 1) == 0; shift++) { a >>= 1; b >>= 1; }

  // Remove remaining factors of two from a - they are not common
  while((a & 1) == 0) a >>= 1;

  do
  {
    // Remove remaining factors of two from b - they are not common
    while((b & 1) == 0) b >>= 1;

    if(a > b) { tmp = a; a = b; b = tmp; } // swap a,b
    b = b - a;
  }
  while(b != 0);

  return a << shift;
} 
```

*编辑*：由于缓存局部性，该算法与数组反转（当`N`大和小）相比也可能具有更好的性能，因为我们以小步骤循环数组。`M`

*最后一点：*如果你的数组很小，三重反转很简单。如果您有一个大数组，那么计算 GCD 以将移动次数减少 2 倍是值得的。参考：[http ://www.geeksforgeeks.org/array-rotation/](http://www.geeksforgeeks.org/array-rotation/)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-05-18T05:07:59.163

这只是一个代表问题。将当前索引保留为整数变量，并在遍历数组时使用模运算符来知道何时回绕。然后，移位仅更改当前索引的值，将其包裹在数组的大小周围。这当然是 O(1)。

例如：

```
int index = 0;
Array a = new Array[SIZE];

get_next_element() {
    index = (index + 1) % SIZE; 
    return a[index];
}

shift(int how_many) {
    index = (index+how_many) % SIZE;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-05-18T04:58:48.600

用指针设置它，几乎不需要时间。每个元素都指向下一个，而“最后一个”（没有最后一个；毕竟，您说它是循环的）指向第一个。一个指向“开始”（第一个元素）的指针，也许还有一个长度，你就有了你的数组。现在，要进行轮班，您只需沿着圆圈移动起始指针即可。

要求一个好的算法，你就会得到明智的想法。要求*最快*，你会得到奇怪的想法！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-06T06:25:33.727

该算法在 O(n) 时间和 O(1) 空间中运行。这个想法是跟踪移位中的每个循环组（按`nextGroup`变量编号）。

```
var shiftLeft = function(list, m) {
    var from = 0;
    var val = list[from];
    var nextGroup = 1;
    for(var i = 0; i < list.length; i++) {
        var to = ((from - m) + list.length) % list.length;
        if(to == from)
            break;

        var temp = list[to];
        list[to] = val;
        from = to;
        val = temp;

        if(from < nextGroup) {
            from = nextGroup++;
            val = list[from];
        }
    }
    return list;
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-10-15T01:50:54.410

```
def shift(nelements, k):       
    result = []
    length = len(nelements)
    start = (length - k) % length
    for i in range(length):
        result.append(nelements[(start + i) % length])
    return result 
```

此代码即使在负移位 k 上也能正常工作

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-16T15:33:35.943

C 数组ShiftRight 函数。如果 shift 为负，则函数将数组左移。它针对更少的内存使用进行了优化。运行时间为 O(n)。

```
void arrayShiftRight(int array[], int size, int shift) {
    int len;

    //cut extra shift
    shift %= size;

    //if shift is less then 0 - redirect shifting left
    if ( shift < 0 ) {
        shift += size;
    }

    len = size - shift;

    //choosing the algorithm which needs less memory
    if ( shift < len ) {
        //creating temporary array
        int tmpArray[shift];

        //filling tmp array
        for ( int i = 0, j = len; i < shift; i++, j++ ) {
            tmpArray[i] = array[j];
        }

        //shifting array
        for ( int i = size - 1, j = i - shift; j >= 0; i--, j-- ) {
            array[i] = array[j];
        }

        //inserting lost values from tmp array
        for ( int i = 0; i < shift; i++ ) {
            array[i] = tmpArray[i];
        }
    } else {
        //creating temporary array
        int tmpArray[len];

        //filling tmp array
        for ( int i = 0; i < len; i++ ) {
            tmpArray[i] = array[i];
        }

        //shifting array
        for ( int i = 0, j = len; j < size; i++, j++ ) {
            array[i] = array[j];
        }

        //inserting lost values from tmp array
        for ( int i = shift, j = 0; i < size; i++, j++ ) {
            array[i] = tmpArray[j];
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-08-28T15:23:22.723

一个非常简单的解决方案。这是一种非常快速的方法，这里我使用一个大小相同或原始的临时数组，并在最后附加到原始变量。该方法使用 O(n) 时间复杂度和 O(n) 空间复杂度，实现起来非常简单。

```
int[] a  = {1,2,3,4,5,6};
    int k = 2;
    int[] queries = {2,3};

    int[] temp = new int[a.length];
    for (int i = 0; i<a.length; i++)
        temp[(i+k)%a.length] = a[i];

    a = temp; 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-02-23T14:31:00.627

这应该可以循环移动一个数组： Input : { 1, 2, 3, 5, 6, 7, 8 }; 输出值出现在 forloops 之后的数组中：{8,7,1,2,3,5,6,8,7}

```
 class Program
    {
        static void Main(string[] args)
        {
            int[] array = { 1, 2, 3, 5, 6, 7, 8 };
            int index = 2;
            int[] tempArray = new int[array.Length];
            array.CopyTo(tempArray, 0);

            for (int i = 0; i < array.Length - index; i++)
            {
                array[index + i] = tempArray[i];
            }

            for (int i = 0; i < index; i++)
            {
                array[i] = tempArray[array.Length -1 - i];
            }            
        }
    } 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-03-10T09:21:51.397

**这里是一个简单高效的通用C++就地旋转函数，不到10行。**

摘自我对另一个问题的回答。[如何旋转数组？](https://stackoverflow.com/a/42714433/3625404)

```
#include <iostream>
#include <vector>

// same logic with STL implementation, but simpler, since no return value needed.
template <typename Iterator>
void rotate_by_gcd_like_swap(Iterator first, Iterator mid, Iterator last) {
    if (first == mid) return;
    Iterator old = mid;
    for (; mid != last;) {
        std::iter_swap(first, mid);
        ++first, ++mid;
        if (first == old) old = mid; // left half exhausted
        else if (mid == last) mid = old;
    }
}

int main() {
    using std::cout;
    std::vector<int> v {0,1,2,3,4,5,6,7,8,9};
    cout << "before rotate: ";
    for (auto x: v) cout << x << ' '; cout << '\n';
    int k = 7;
    rotate_by_gcd_like_swap(v.begin(), v.begin() + k, v.end());
    cout << " after rotate: ";
    for (auto x: v) cout << x << ' '; cout << '\n';
    cout << "sz = " << v.size() << ", k = " << k << '\n';
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-18T05:07:15.903

根据您使用的数据结构，您可以在 O(1) 中完成。我认为最快的方法是以链表的形式保存数组，并有一个哈希表可以在数组中的“索引”到条目的“指针”之间转换。这样你可以在 O(1) 中找到相关的头和尾，并在 O(1) 中进行重新连接（并在 O(1) 中切换后更新哈希表）。这当然是一个非常“混乱”的解决方案，但如果你感兴趣的只是移位的速度，那会做（以在数组中更长的插入和查找为代价，但它仍然会保持 O( 1))

如果你有一个纯数组中的数据，我认为你不能避免 O(n)。

编码方面，这取决于您使用的语言。

例如，在 Python 中，您可以“切片”它（假设 n 是移位大小）：

```
result = original[-n:]+original[:-n] 
```

（我知道哈希查找在理论上不是 O(1) 但我们在这里是实用的而不是理论上的，至少我希望如此......）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-10-08T10:57:54.467

`circleArray`有一些错误，并非在所有情况下都有效！

循环必须继续`while i1 < i2`NOT `i1 < last - 1`。

```
void Shift(int* _array, int _size, int _moves)
{
    _moves = _size - _moves;
    int i2 = _moves;
         int i1 = -1;
         while(++i1 < i2)
    {
        int tmp = _array[i2];
        _array[i2] = _array[i1];
        _array[i1] = tmp;
        if(++i2 == _size) i2 = _moves;
    }
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2011-03-13T20:50:53.060

```
static int [] shift(int arr[], int index, int k, int rem)
{
    if(k <= 0 || arr == null || arr.length == 0 || rem == 0 || index >= arr.length)
    {
        return arr;
    }

    int temp = arr[index];

    arr = shift(arr, (index+k) % arr.length, k, rem - 1);

    arr[(index+k) % arr.length] = temp;

    return arr;
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2011-07-05T06:18:07.207

如果您对 Java 实现感兴趣，请参阅此内容：

[编程珍珠：循环左/右移位操作](http://programmingpearls.blogspot.com/search?updated-min=2011-01-01T00%3A00%3A00-08%3A00&updated-max=2012-01-01T00%3A00%3A00-08%3A00&max-results=2)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-07-09T18:43:00.693

红宝石示例：

```
def move_cyclic2 array, move_cnt
  move_cnt = array.length - move_cnt % array.length 
  if !(move_cnt == 0 || move_cnt == array.length)            
    array.replace( array[move_cnt..-1] + array[0...move_cnt] )  
  end   
end 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-11-04T05:06:03.523

理论上，最快的是这样的循环：

```
if (begin != middle && middle != end)
{
    for (i = middle; ; )
    {
        swap(arr[begin++], arr[i++]);
        if (begin == middle && i == end) { break; }
        if (begin == middle) { middle = i; }
        else if (i == end) { i = middle; }
    }
} 
```

在实践中，您应该对其进行分析并查看。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-05-16T12:48:22.330

这是另一个（C++）：

```
void shift_vec(vector<int>& v, size_t a)
{
    size_t max_s = v.size() / a;
    for( size_t s = 1; s < max_s; ++s )
        for( size_t i = 0; i < a; ++i )
            swap( v[i], v[s*a+i] );
    for( size_t i = 0; i < a; ++i )
        swap( v[i], v[(max_s*a+i) % v.size()] );
} 
```

当然，它不如著名的反向三倍解决方案那么优雅，但根据机器的不同，它可以同样[快速](http://ideone.com/St7wPv)。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-10-05T03:33:18.733

我的一个朋友在开玩笑时问我如何移动数组，我想出了这个解决方案（见 ideone 链接），现在我看到了你的，有人似乎有点深奥。

看看[这里](https://ideone.com/6avuUF)。

```
#include <iostream>

#include <assert.h>

#include <cstring>

using namespace std;

struct VeryElaboratedDataType
{
    int a;
    int b;
};

namespace amsoft
{
    namespace inutils
    {
        enum EShiftDirection
        {
            Left,
            Right
        };
template 
<typename T,size_t len>
void infernalShift(T infernalArray[],int positions,EShiftDirection direction = EShiftDirection::Right)
{
    //assert the dudes
    assert(len > 0 && "what dude?");
    assert(positions >= 0 && "what dude?");

    if(positions > 0)
    {
    ++positions;
    //let's make it fit the range
    positions %= len;

    //if y want to live as a forcio, i'l get y change direction by force
    if(!direction)
    {
        positions = len - positions;
    }

    // here I prepare a fine block of raw memory... allocate once per thread
    static unsigned char WORK_BUFFER[len * sizeof(T)];
    // std::memset (WORK_BUFFER,0,len * sizeof(T));
    // clean or not clean?, well
    // Hamlet is a prince, a prince does not clean

    //copy the first chunk of data to the 0 position
    std::memcpy(WORK_BUFFER,reinterpret_cast<unsigned char *>(infernalArray) + (positions)*sizeof(T),(len - positions)*sizeof(T));
    //copy the second chunk of data to the len - positions position
    std::memcpy(WORK_BUFFER+(len - positions)*sizeof(T),reinterpret_cast<unsigned char *>(infernalArray),positions * sizeof(T));

    //now bulk copy back to original one
    std::memcpy(reinterpret_cast<unsigned char *>(infernalArray),WORK_BUFFER,len * sizeof(T));

    }

}
template 
<typename T>
void printArray(T infernalArrayPrintable[],int len)
{
        for(int i=0;i<len;i++)
    {
        std::cout << infernalArrayPrintable[i] << " ";
    }
    std::cout << std::endl;

}
template 
<>
void printArray(VeryElaboratedDataType infernalArrayPrintable[],int len)
{
        for(int i=0;i<len;i++)
    {
        std::cout << infernalArrayPrintable[i].a << "," << infernalArrayPrintable[i].b << " ";
    }
    std::cout << std::endl;

}
}
}

int main() {
    // your code goes here
    int myInfernalArray[] = {1,2,3,4,5,6,7,8,9};

    VeryElaboratedDataType myInfernalArrayV[] = {{1,1},{2,2},{3,3},{4,4},{5,5},{6,6},{7,7},{8,8},{9,9}};
    amsoft::inutils::printArray(myInfernalArray,sizeof(myInfernalArray)/sizeof(int));
    amsoft::inutils::infernalShift<int,sizeof(myInfernalArray)/sizeof(int)>(myInfernalArray,4);
    amsoft::inutils::printArray(myInfernalArray,sizeof(myInfernalArray)/sizeof(int));
    amsoft::inutils::infernalShift<int,sizeof(myInfernalArray)/sizeof(int)>(myInfernalArray,4,amsoft::inutils::EShiftDirection::Left);
    amsoft::inutils::printArray(myInfernalArray,sizeof(myInfernalArray)/sizeof(int));
    amsoft::inutils::infernalShift<int,sizeof(myInfernalArray)/sizeof(int)>(myInfernalArray,10);
    amsoft::inutils::printArray(myInfernalArray,sizeof(myInfernalArray)/sizeof(int));

    amsoft::inutils::printArray(myInfernalArrayV,sizeof(myInfernalArrayV)/sizeof(VeryElaboratedDataType));
    amsoft::inutils::infernalShift<VeryElaboratedDataType,sizeof(myInfernalArrayV)/sizeof(VeryElaboratedDataType)>(myInfernalArrayV,4);
    amsoft::inutils::printArray(myInfernalArrayV,sizeof(myInfernalArrayV)/sizeof(VeryElaboratedDataType));
    amsoft::inutils::infernalShift<VeryElaboratedDataType,sizeof(myInfernalArrayV)/sizeof(VeryElaboratedDataType)>(myInfernalArrayV,4,amsoft::inutils::EShiftDirection::Left);
    amsoft::inutils::printArray(myInfernalArrayV,sizeof(myInfernalArrayV)/sizeof(VeryElaboratedDataType));
    amsoft::inutils::infernalShift<VeryElaboratedDataType,sizeof(myInfernalArrayV)/sizeof(VeryElaboratedDataType)>(myInfernalArrayV,10);
    amsoft::inutils::printArray(myInfernalArrayV,sizeof(myInfernalArrayV)/sizeof(VeryElaboratedDataType));

    return 0;
} 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-12-02T08:54:59.670

这种方法将完成这项工作：

```
public static int[] solution1(int[] A, int K) {
    int temp[] = new int[A.length];

    int count = 0;

    int orignalItration = (K < A.length) ? K :(K%A.length); 

    for (int i = orignalItration; i < A.length; i++) {
        temp[i] = A[count++];
    }
    for (int i = 0; i < orignalItration; i++) {
        temp[i] = A[count++];
    }

    return temp;
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-07-26T20:31:37.967

与@IsaacTurner 类似，由于不必要的复制而不那么优雅，但实现很短。

这个想法 - 将索引 0 上的元素 A 与位于 A 目的地的元素 B 交换。现在 B 是第一个。将它与位于 B 的目的地的元素 C 交换。继续直到目的地不为 0。

如果最大公约数不是 1，那么您还没有完成 - 您需要继续交换，但现在在起点和终点使用索引 1。

继续，直到您的起始位置不是 gcd。

```
int gcd(int a, int b) => b == 0 ? a : gcd(b, a % b);

public int[] solution(int[] A, int K)
{
    for (var i = 0; i < gcd(A.Length, K); i++)
    {
        for (var j = i; j < A.Length - 1; j++)
        {
            var destIndex = ((j-i) * K + K + i) % A.Length;
            if (destIndex == i) break;
            var destValue = A[destIndex];
            A[destIndex] = A[i];
            A[i] = destValue;
        }
    }

    return A;
} 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-08-09T05:55:39.373

这是我在 Java 中的解决方案，它让我在 Codility 获得了 100% 的任务分数和 100% 的正确性：

```
class Solution {
    public int[] solution(int[] A, int K) {
        // write your code in Java SE 8
        if (A.length > 0)
        {
            int[] arr = new int[A.length];
            if (K > A.length)
                K = K % A.length;

            for (int i=0; i<A.length-K; i++)
                arr[i+K] = A[i];

            for (int j=A.length-K; j<A.length; j++)
                arr[j-(A.length-K)] = A[j];

            return arr;
        }
        else
            return new int[0];
    }
} 
```

请注意，尽管看到了两个`for`循环，但整个数组的迭代只进行了一次。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2018-08-13T18:59:02.430

用于左移数组的 Swift 4 版本。

```
func rotLeft(a: [Int], d: Int) -> [Int] {

   var result = a
   func reverse(start: Int, end: Int) {
      var start = start
      var end = end
      while start < end {
         result.swapAt(start, end)
         start += 1
         end -= 1
      }
   }

   let lenght = a.count
   reverse(start: 0, end: lenght - 1)
   reverse(start: lenght - d, end: lenght - 1)
   reverse(start: 0, end: lenght - d - 1)
   return result
} 
```

例如，如果输入数组是`a = [1, 2, 3, 4, 5]`，并且左移偏移量是`d = 4`，那么结果将是`[5, 1, 2, 3, 4]`

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-05-24T01:04:58.353

@IsaacTurner 的答案 (C) [https://stackoverflow.com/a/32698823/4386969](https://stackoverflow.com/a/32698823/4386969)

和@SomeStrangeUser 的答案（Java）： [https ://stackoverflow.com/a/18154984/4386969](https://stackoverflow.com/a/18154984/4386969)

提供一个简单的 O(N) 时间、O(1) 空间算法来回答这个问题并且需要准确地分配 N 个元素。我相信（如果我错了，有人纠正我）计算 N 和 M 之间的 gcd 是不必要的；简单地计算我们放置在正确位置的元素数量就足够了。这是因为一旦我们将一个元素放在正确的位置，我们就可以保证在当前循环和后续循环中都不必再次访问它。

这是一个带有额外简化的 Python 3 实现：

```
# circle shift an array to the left by M 
def arrayCircleLeftShift(a, M):
    N = len(a)
    numAccessed = 0
    cycleIdx = 0
    while numAccessed != N:
        idx = cycleIdx
        swapIdx = (idx + M) % N
        tmp = a[idx]
        while swapIdx != cycleIdx:
            a[idx] = a[swapIdx]
            numAccessed += 1
            idx = swapIdx
            swapIdx = (idx + M) % N
        a[idx] = tmp
        numAccessed += 1
        cycleIdx += 1 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2021-12-21T14:42:58.640

我知道这是一篇旧文章，但是这是 O(n) 中的最佳解决方案：每个元素只移动一次，不需要额外的空间。它与 Isaac Turner 提出的解决方案非常相似，但不需要 gcd 计算。

```
public static void shiftArray(int[] A, int k) {
    if (A.length == 0) {
        return;
    }
    k = k % A.length;
    k = (k + A.length) % A.length; // ensure k is positive
    if (k == 0) {
        return;
    }
    int i = 0, i0 = 0;
    int x = A[0];
    for (int u = 0; u < A.length; u++) { // count number of shifted elements
        int j = (i - k + A.length) % A.length; // ensure modulo is positive
        if (j == i0) { // end of a (sub-)cycle, advance to next one
            A[i] = x;
            x = A[i = ++i0];
        } else {
            A[i] = A[j];
            i = j;
        }
    }
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-08-03T19:16:25.017

为数组保留两个索引，一个索引从数组的开头到数组的结尾。另一个索引从 last 的第 M 个位置开始，并循环遍历最后的 M 个元素任意次数。始终采用 O(n)。不需要额外的空间。

```
circleArray(Elements,M){
 int size=size-of(Elements);

 //first index
 int i1=0;

 assert(size>M)

 //second index starting from mth position from the last
 int i2=size-M;

 //until first index reaches the end
 while(i1<size-1){

  //swap the elements of the array pointed by both indexes
  swap(i1,i2,Elements);

  //increment first pointer by 1
  i1++;

  //increment second pointer. if it goes out of array, come back to
  //mth position from the last
  if(++i2==size) i2=size-M;

 }
} 
```

# asp.net - 带有 jQ ueryUI 的 ASP.NET：服务器端事件未触发

> ID：876295
> 
> 赞同：3
> 
> 时间：2009-05-18T04:55:50.533
> 
> 标签：asp.net, jquery-ui

我有一个 ASP.NET 页面，该页面使用 jQuery UI 对话框。当用户单击`btnGo`页面中的按钮 ( ) 时，我将检查用户是否已登录。如果没有登录，我会显示 jQuery UI 对话框来登录。我使用了这段代码：

```
<body>
<form id="form1" runat="server">
<div>
   <br />  
    <asp:TextBox ID="txtModelId" runat="server" Text="12"></asp:TextBox><br />

   <asp:Button ID="btnGo" runat="server" Text="Go" OnClick="btnGo_Click" />
    <br />
    <asp:Label ID="lblUserMsg" runat="server" Text="Label"></asp:Label></div>
    <div id="divContentHolder">
    <div class="demo">

    <div id="dialog" title="Login with your User Account">
    <p id="validateTips">Enter your EmailId & password</p>

    <fieldset>

    <label for="email">Email</label>
    <input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" />
    <label for="password">Password</label>
    <asp:TextBox ID="txtFirstName" CssClass="text ui-widget-content ui-corner-all" runat="server" Text=""></asp:TextBox>
  <!-- &nbsp;<asp:Button   ID="btnSingIn" runat="server" OnClick="btnSingIn_Click" Text="Button" /><br />-->
    <asp:Button ID="btnLogin" runat="server" Text="Login" OnClick="btnLogin_Click" />
    </fieldset>

    </div><!--dialog-->
    </div><!--demo-->
   </div><!--divContentHolder-->

</form> 
```

在服务器端：

```
protected void btnGo_Click(object sender, EventArgs e)
    {
        CheckUserLoggedIn();
    }

private void CheckUserLoggedIn()
    {
        if (Session["username"] != null)
        {
            Response.Write("Logged in user");
            ClientScript.RegisterHiddenField("isAuthenticated", "true");
        }
        else
        {
            ClientScript.RegisterHiddenField("isAuthenticated", "false");
        }
    } 
```

上面的代码工作得很好。如果用户未登录，它将显示 jQuery UI 对话框以登录。但问题是，服务器端功能`btnLogin_Click()`（ASP.NET 按钮的 Click 事件`btnLogin`）没有被触发。我在另一个测试页面中通过在字段集之前放置一个表单标签来尝试它并且它有效。前任：

```
<form id="form1" runat="server">
 <fieldset>  then  rest of the items...(text box and button) 
```

但我不能在第一页这样做，因为如果我将表单标记放在字段集之前，我的其他 ASP.NET 文本框和按钮将不在表单中，并且在尝试运行时显示错误，告诉 txt 框控件必须在表单中。

我知道我们不能在此页面中使用多个表单`runat="server"`。

这个问题的解决方案是什么？

javascript代码是：

```
<script type="text/javascript">
$(function() {

    var name = $("#name"),
        email = $("#email"),
        password = $("#password"),
        allFields = $([]).add(name).add(email).add(password),
        tips = $("#validateTips");

    function updateTips(t) {
        tips.text(t).effect("highlight",{},1500);
    }

    function checkLength(o,n,min,max) {

        if ( o.val().length > max || o.val().length < min ) {
            o.addClass('ui-state-error');
            updateTips("Length of " + n + " must be between "+min+" and "+max+".");
            return false;
        } else {
            return true;
        }

    }

    function checkRegexp(o,regexp,n) {

        if ( !( regexp.test( o.val() ) ) ) {
            o.addClass('ui-state-error');
            updateTips(n);
            return false;
        } else {
            return true;
        }

    }

    $("#dialog").dialog({
        bgiframe: true,
        autoOpen: false,
        height: 300,
        modal: true,
        buttons: {
            'Create an account': function() {
                var bValid = true;
                allFields.removeClass('ui-state-error');

                bValid=true;
                if (bValid) {

                    /*$('#users tbody').append('<tr>' +
                        '<td>' + name.val() + '</td>' + 
                        '<td>' + email.val() + '</td>' + 
                        '<td>' + password.val() + '</td>' +
                        '</tr>'); */

                        alert("Check User Credentials")
                    $(this).dialog('close');
                }
            },
            Cancel: function() {
                $(this).dialog('close');
            }
        },
        close: function() {
            allFields.val('').removeClass('ui-state-error');
        }
    });

    $('#create-user').click(function() {
        $('#dialog').dialog('open');
    })
    .hover(
        function(){ 
            $(this).addClass("ui-state-hover"); 
        },
        function(){ 
            $(this).removeClass("ui-state-hover"); 
        }
    ).mousedown(function(){
        $(this).addClass("ui-state-active"); 
    })
    .mouseup(function(){
            $(this).removeClass("ui-state-active");
    });

//});
var isAuthenticated = $("#isAuthenticated").val();
if (isAuthenticated && isAuthenticated == "false")
{
// Display the modal dialog.
$("#dialog").dialog("open");
}
});
</script> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-18T05:55:34.937

尝试`UseSubmitBehavior=false`在按钮控件上进行设置。显然 jQuery BlockUI 小部件改变了按钮的行为并且它没有正确提交。

请参阅：[http ://encosia.com/2008/10/04/using-jquery-to-enhance-aspnet-ajax-progress-indication/](http://encosia.com/2008/10/04/using-jquery-to-enhance-aspnet-ajax-progress-indication/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-11-14T22:21:15.533

很好地使用这些说明，我发现它们非常有帮助：

[http://relativelypositioned.wordpress.com/2008/11/14/jquery-dialog-aspnet-no-postback/](http://relativelypositioned.wordpress.com/2008/11/14/jquery-dialog-aspnet-no-postback/)

特别是：

```
uiDialog.parent().appendTo('/html/body/form[0]'); 
```

# c++ - 除了托管代码，还有什么方法可以在 C++ 中使用 SMO？

> ID：876301
> 
> 赞同：0
> 
> 时间：2009-05-18T04:59:32.033
> 
> 标签：c++, sql-server

除了托管代码之外，还有什么方法可以在 c++ 中使用 SQLSERVER SMO（sqlserver 管理对象）？

在这方面帮助我...

我真诚地要求不要重复发表评论我仍然没有得到明确的答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T16:34:55.213

正如你所指出的。这个问题[已经被问过](https://stackoverflow.com/questions/771203/is-managed-code-is-the-only-way-to-use-smo-in-c)了，没有满意的答案。

SMO 是严格管理代码。以前的版本 DMO 可用于非托管代码。如果您需要使用 SMO，您必须使用 C++/CLI 或为 COM 创建包装器。

来自[SMO 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms162557.aspx)：

> SMO 对象模型取代并取代了 SQL-DMO。SMO 支持 SQL Server 2000、SQL Server 2005 和 SQL Server 2008。它支持更多的 SQL Server 管理任务，并包含 SQL Server 中的许多新功能。SMO 旨在提高效率并提供更多控制。
> 
> DMO 库是一个 COM 对象模型，而 SMO 是作为 .NET Framework 程序集实现的。COM 组件是为应用程序和非托管应用程序编程提供可重用功能的库。.NET Framework 程序集为 .NET Framework 提供可重用的功能来编写托管代码应用程序。
> 
> 在过渡到 .NET Framework 技术的过程中，可以让应用程序部分用托管代码编写，部分用非托管代码编写。.NET Framework 允许您与需要主互操作程序集的 COM 组件交互。SQL-DMO 需要运行时包装，以便可以从基于 .NET Framework 的应用程序中调用它。

# c++ - 工具栏上的图标不透明

> ID：876303
> 
> 赞同：0
> 
> 时间：2009-05-18T05:01:01.863
> 
> 标签：c++, atl

我们已经创建了一个 IE 工具栏。我们通过使用静态控件并在其上保留图像来在工具栏上显示一个图标。

由于此静态控件不透明，因此此图标显示一些背景颜色（这是 Windows 常用控件的默认颜色）。

无论浏览器主题如何，是否可以使静态控件透明。

项目是用 ATL C++ 开发的。

我们尝试将 WS_EX_TRANSPARENT 作为静态控件的属性，当我们尝试在 OnCtrlColorStatic 事件中返回 null_brush 时，问题仍然没有解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-12-16T15:33:09.447

好吧，我对 ATL 了解不多，但在标准 Windows API 中，您会使用[LoadImage](http://msdn.microsoft.com/en-us/library/ms648045(VS.85).aspx "加载图像")函数来加载图像。以下是获取具有透明部分（透明背景）的图像的一些技巧：

1.  图像必须具有“关键颜色”，并且图像中该颜色的每个像素在显示时都会变得透明。该颜色必须是位于图像左上角的第一个像素的颜色。在使用某些标志调用 LoadImage 时（详细如下），windows 将加载图像，读取左上角的像素颜色，并使图像中与第一个具有相同颜色的所有像素隐藏（它们被设置为透明）。

2.  当您调用LoadImage 时，第三个参数必须是IMAGE_BITMAP 或IMAGE_ICON，这取决于您使用哪些GDI 函数来显示图像（图标函数或位图函数）。此外，最后一个标志必须包含 LR_LOADTRANSPARENT 才能正确使用颜色键控。

3.  如上所述动态加载图像后，您将拥有此资源的句柄，您可以使用标准 GDI 函数在静态控件的显示上下文上动态绘制，例如 DrawIconEx，如果您使用 IMAGE_ICON 标志加载它。

希望能帮助到你。

# c# - 我们什么时候在 C# 中创建这种类型的对象...？

> ID：876309
> 
> 赞同：-1
> 
> 时间：2009-05-18T05:03:24.793
> 
> 标签：c#, .net, oop

我在某些网站上看到过以下类型的场景......有人可以帮我什么时候准确地使用这种场景......？

```
class emp
{

    public void add()
    {
        MessageBox.Show("Emp class");
    }
}

class dept : emp
{
    public void disp()
    {
        MessageBox.Show("dept class");
    }
}

emp ee = new dept(); 
```

我只想知道我们何时创建这种类型的对象 emp 'ee=new dept()' 而不是 'emp ee=new emp()' 谢谢，siva

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-18T05:07:22.313

上面的例子演示了继承。继承是一种“IS A”关系，在这种情况下，“dept”是“emp”，这意味着任何时候你的代码使用一个 emp，它也应该能够使用一个 dept 对象。

将新部门分配给 ee 表明部门是 emp，即使它可能会添加其他功能，例如 disp 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T05:09:57.120

此处显示的过程称为继承。

基本上所做的是变量的类型`ee`被声明为 type `emp`；这是合法的，因为该类型`dept`具有 is-a 关系`emp`（大声说出来，它是“dept 是 emp 的一种类型”）。

当您想要接受从 emp 继承的任何变量（如`class dept : emp`声明所表示的）作为某种参数时，您可以执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T05:12:42.407

你是说继承？如果这就是你要问的，你需要一本关于[C# 面向对象编程的书。](https://rads.stackoverflow.com/amzn/click/com/0470261293)

部门上的方法 disp() 没有理由。你可以去：

emp ee = 新部门（）；ee.add();

这将调用 emp 中的 add() 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T05:20:38.240

这明明是继承..

在继承中，如果你想同时使用派生类方法和基类方法，你需要创建这个对象。

希望这有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T06:20:41.677

如果你想同时使用派生类方法和基类方法，你需要创建这个对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-18T06:38:43.307

我们这样做是为了运行时多态性。当我们需要调用派生类方法，但需要调用哪个派生类时，取决于基于用户输入的运行时。这是一个非常简单的例子：

```
static void Main(string[] args)
        {
            List<Shape> shapes = new List<Shape>();
            shapes.Add(new Circle());
            shapes.Add(new Square());
            shapes.Add(new Rectangle());

            foreach (Shape s in shapes)
                s.Draw();

            Console.Read();
        }

public class Shape
    {
        public virtual void Draw() { }

    }

    public class Square : Shape
    {
        public override void Draw()
        {
            // Code to draw square
            Console.WriteLine("Drawing a square");
        }
    }

    public class Circle : Shape
    {
        public override void Draw()
        {
            // Code to draw circle
            Console.WriteLine("Drawing a circle");

        }
    }

    public class Rectangle : Shape
    {
        public override void Draw()
        {
            // Code to draw circle
            Console.WriteLine("Drawing a rectangle");

        }
    }

*****Output:
Drawing a circle
Drawing a square
Drawing a rectangle***** 
```

在实际场景中，用户可能在运行时确定他想要绘制的形状。因此，在实现时，您需要创建一个 Shape 类的对象，并根据用户选择（在开关或 if-else 中）为其分配圆形、矩形或方形。当你调用 Shape.Draw() 时，它会调用适当的派生类方法。

# c# - 如何使用 MEF（托管扩展框架）从目录加载 dll

> ID：876323
> 
> 赞同：3
> 
> 时间：2009-05-18T05:11:53.780
> 
> 标签：c#, .net, assemblies, mef

我目前正在与 MEF 合作并面临一些问题

我想要的是从目录中加载 dll。

首先我扫描目录并将两件事保存在字典中

来自相应 DLL 的名称属性（作为字符串）

和模块名称（作为字符串）

这是 ScanDirectory() 代码

```
private void ScanPluginDirectory()
{
    catalog = new AggregateCatalog();

    catalog.Catalogs.Add(new DirectoryCatalog(@"..\..\plugin"));            
    container = new CompositionContainer(catalog);

    batch = new CompositionBatch();
    batch.AddPart(this);        

    container.Compose(batch);    

    pluginDictionary = new Dictionary<String, String>();
    foreach (IFilter filter in filters)
    {
        Type t = filter.GetType();
        pluginDictionary.Add(filter.Name, t.Module.Name);
    }
} 
```

并在复选框列表中显示他们的名字。从复选框中选择 dll。

我有进口声明

```
[Import]
public IEnumerable<IFilter> filters { get; set; } 
```

目前我的程序运行良好。我所做的是当我从复选框列表中检查插件时。它将其移动到“已加载”目录中，并且 QueryPlugin() 方法会查看“已加载”目录以搜索插件。

从复选框列表中取消选中插件后。我将它移出“加载”目录...

我想要的是使用 batch.RemovePart() 方法来摆脱 dll 从一个目录到另一个目录的快速移动......

注意：我不会使用手动将插件添加到批处理中

```
batch.AddPart(new DemoFilter1()); 
```

而不是这个我使用 DirectoryCatalog();;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T17:09:19.077

不使用 DirectoryCatalog，而是使用 AggregateCatalog 并将目录中每个程序集的 AssemblyCatalog 添加到聚合目录中。然后当一个插件被选中或取消选中时，您可以将相应的 AssemblyCatalog 添加或删除到 AggregateCatalog。

请注意，如果给定程序集中有多个插件，则此方法可能会出现问题。更强大的方法是使用[过滤目录](http://mef.codeplex.com/Wiki/View.aspx?title=Filtering%20Catalogs)过滤单个零件定义。

# c - 在 EZ Flash 3 合 1 中写入 PSRAM

> ID：876331
> 
> 赞同：1
> 
> 时间：2009-05-18T05:15:16.620
> 
> 标签：c, embedded, arm, nintendo-ds, game-boy-advance

我试图弄清楚如何在 GBA 大小的 EZ Flash 3 合 1 卡中对 PSRAM 进行编程。基本上重复 GBA Exploader 和其他程序所做的。

如果我选择一个块并对其进行编程，然后将其读回第一个半字始终是 0x1500 或类似的东西，但其余数据都很好。

如果在写入时我选择了前一个块，则从 0x20000 字节开始写入该块（根据我确定的块大小）。从所需块读回仍然显示第一个半字是错误的，但其余半字是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T21:10:27.320

我是这个“关闭。我试图备份一个然后两个块但不是三个，这就是诀窍。事后注意有多少函数写入 0x08000000、0x08020000 和 0x08040000：

```
void            OpenNorWrite()
{
        *(vuint16 *)0x9fe0000 = 0xd200;
        *(vuint16 *)0x8000000 = 0x1500;
        *(vuint16 *)0x8020000 = 0xd200;
        *(vuint16 *)0x8040000 = 0x1500;
        *(vuint16 *)0x9C40000 = 0x1500;
        *(vuint16 *)0x9fc0000 = 0x1500;
} 
```

损坏的数据始终是 0x1500，这现在也很有意义。

解决方案是备份三个（或更多）块并向前寻址三个（或更多）块：

```
CloseNorWrite();
SetRompage(0x180-3);
OpenNorWrite();
rb=FLASHBASE+(0x20000*3);
for(ra=0;ra<(sizeof(prog)>>2);ra++)
{
    rc=prog[ra];
    PUT16(rb,(rc>> 0)&0xFFFF); rb+=2;
    PUT16(rb,(rc>>16)&0xFFFF); rb+=2;
}
CloseNorWrite();
SetRomPage(0x180);
reboot(); 
```

# sql-server-2008 - 在 SQL Server 中存储密码

> ID：876342
> 
> 赞同：49
> 
> 时间：2009-05-18T05:18:43.683
> 
> 标签：sql-server-2008

在 SQL Server 2008 中存储用户密码的推荐做法是什么？

我正在为 Intranet 存储用户详细信息，并希望获得有关存储用户详细信息（例如名称、密码和用户访问权限等）的最佳方式的建议。我正在考虑创建一个 nvarchar 列，然后在插入之前加密此文本桌子。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2009-05-18T05:39:15.310

存储密码的常用方法是对密码使用哈希函数，但事先对其进行[加盐。](http://en.wikipedia.org/wiki/Salt_(cryptography))重要的是要“加盐”密码，以保护自己免受[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)攻击。

所以你的桌子应该看起来像这样

```
._______._________________.______________.
|user_id|hash             |salt          |
|-------|-----------------|--------------|
|12     |adsgasdg@g4wea...|13%!#tQ!#3t...|
|       |...              |...           | 
```

在检查给定密码是否与用户匹配时，您应该将盐连接到给定密码，并计算结果字符串的哈希函数。如果散列函数输出与`hash`列匹配 - 它是正确的密码。

然而，重要的是要理解 salt-hash 的想法有一个特定的原因——防止任何有权访问数据库的人知道任何人的密码（反转散列函数输出被认为是一个难题）。因此，例如，银行的 DBA 将无法登录到您的银行帐户，即使他可以访问所有列。

如果您认为您的用户将使用敏感密码（例如他们的 gmail 帐户密码）作为您网站的密码，您也应该考虑使用它。

恕我直言，它并不总是需要的安全功能。所以你应该考虑你是否想要它。

有关此机制的详细摘要，请参阅[本文](http://chargen.matasano.com/chargen/2007/9/7/enough-with-the-rainbow-tables-what-you-need-to-know-about-s.html)。

**更新：**值得一提的是，为了获得额外的安全性，以防止有针对性的攻击以反转个人密码的哈希值，您应该[使用 bcrypt](http://codahale.com/how-to-safely-store-a-password/)，这可能是任意难以计算的。（但除非你真的害怕神秘的黑衣人瞄准你的特定数据库，否则我认为 sha1 已经足够了。我不会为我的项目引入另一个依赖项来获得额外的安全性。也就是说，没有理由不使用 sha1 100 次，这将产生类似的效果）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-18T05:27:04.930

敏感数据的加密很好。但是，使用密码，您永远不需要知道原始值，并且由于任何加密的内容也可以解密，因此您将这些信息置于被发现的危险之中。

相反，您应该保留密码的哈希值。此过程获取值并生成相当于非常复杂的校验和。给定数字后，无法返回原始密码，从而提高了此类信息的安全性。当您想知道是否有人给了您正确的密码时，您可以对他们给您的值进行哈希处理并比较哈希值。

安全是一个复杂的话题。即使使用哈希，您最终也可能拥有一个存在重大安全漏洞的系统。如果您的团队中没有其他人已经具备这种知识，那么获得安全顾问的帮助并不是一个坏主意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T05:25:44.413

这通常是这样做的方法。

您的应用程序将处理加密（和可选的解密），数据库将只存储密码。

我建议使用比过时的事实更强大的东西 - MD5

大多数 .net 开发人员似乎都喜欢使用 TDES

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-18T05:26:46.193

T-Sql 包含加密功能 - 4Guys 有[一篇关于 SQL Server 2005](http://www.4guysfromrolla.com/articles/022107-1.aspx) aa 的好文章，但我认为它仍然适用于 2008。

# subsonic - 使用 SubSonic2.2

> ID：876347
> 
> 赞同：0
> 
> 时间：2009-05-18T05:19:47.710
> 
> 标签：subsonic

我只是下载了 SubSonic2.2 并使用它，但我的许多 prev 代​​码（当我有身份或唯一字段时插入表中）抛出错误，而且 scraffold 组件也无法插入此表中。我看到 SubCommander 中的 SubSonic 版本是 2.1，也许这会造成问题，我找不到任何其他具有 SubSonic2.2 的版本。

虽然 Subsonic 使用 Google 代码并且该站点阻止了伊朗等少数国家对其站点的访问，但我无法访问代码并对其进行编译。我在哪里可以找到与 subSonic 2.2 配合使用的 SubCommander 版本？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T12:00:06.777

您可以尝试在互联网上使用匿名代理来“伪造”您所在的国家/地区。

# google-checkout - 如何通过 API 向 Google Checkout 发送信息？

> ID：876350
> 
> 赞同：1
> 
> 时间：2009-05-18T05:20:42.670
> 
> 标签：google-checkout

有没有集成 Google Checkout 的？我已经尝试过 Google Checkout 帮助中提供的示例，它工作正常，但我想通过 API 从我的网站发送信用卡信息和其他信息，如地址、姓名等。我没有找到任何方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-31T03:48:45.247

以下是有关 Google Checkout SDK 的一些信息。

[http://code.google.com/apis/checkout/index.html](http://code.google.com/apis/checkout/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-31T03:53:19.093

Google Checkout 允许您发送姓名和地址，但不能发送信用卡信息。
这样，客户帐单信息就受到保护。

要在您的网站上收集信用卡号并将其发送到支付处理器，您需要获得一个商家帐户或只使用[Paypal Pro](https://www.paypal.com/cgi-bin/webscr?cmd=_display-vt-fees-outside)（我认为它每月 30 美元）。

# javascript - 所有浏览器中的 JavaScript 和 jQuery 滚动问题

> ID：876376
> 
> 赞同：1
> 
> 时间：2009-05-18T05:30:21.010
> 
> 标签：javascript, jquery, ajax, browser

我刚刚启动了带有一系列新功能的[http://tweetmp.org.au/ ，包括您可以在主页上看到的 MP Spotlight](http://tweetmp.org.au/)

每隔几秒钟，就会运行以下代码，

```
// get the next it
var nextId = ids[Math.floor(Math.random() * ids.length)];

$.get('/GetSummary?id=' + nextId, function (result) {
    if (result) {
        $('#memberList').fadeOut('slow', function () {
            $(this).html(result).fadeIn('slow');
        });
    }
}); 
```

它去获取下一个 MP 并淡出旧 MP 并淡入新 MP。看起来很棒！

***但***

如果向下滚动到页面底部并等待 MP 聚光灯刷新，浏览器将滚动回 #memberList

有谁知道这是什么原因造成的？如何阻止它滚动？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T07:14:22.843

我已经修好了。

我在 0.01 和 1.0 之间将 fadeIn 和 fadeOut 更改为 fadeTo

当不透明度达到0时，jQuery会设置display：none，从而减小页面的大小（强制向上滚动）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T07:11:03.287

试试这个

```
$.get('/GetSummary?id=' + nextId, function (result) {
    $('#memberList').fadeOut('slow').html(result).fadeIn('slow');
}); 
```

# java - 从另一个 servlet 调用 servlet

> ID：876387
> 
> 赞同：1
> 
> 时间：2009-05-18T05:34:44.550
> 
> 标签：java, servlets, urlconnection

我有两个在不同的 tomcat 服务器上运行的 servlet。

我并尝试通过以下方式从 servlet2 调用 servlet1，并希望将对象写入输出流。

```
URL url=new URL("http://msyserver/abc/servlet1");
URLConnection con=url.openConnection();
con.setDoOutput(true);
con.setDoInput(true);
OutputStream os=con.getOutputStream();
ObjectOutputStream oos=new ObjectOutputStream(os);
oos.writeObject(pushEmailDTO);
oos.flush();
oos.close(); 
```

问题是我无法访问 servlet？我无法弄清楚我错过了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-18T07:56:50.247

您必须先创建连接，`url.connect()`然后才能读取/发送数据。这是违反直觉的，因为`openConnection()`顾名思义它已经这样做了，但文档说：

> 通常，创建到 URL 的连接是一个多步骤的过程：
> 
> 1.  `openConnection()`
> 2.  操纵影响与远程资源的连接的参数。
> 3.  连接（）
> 4.  与资源交互；查询标题字段和内容。

这就是`getExpiration()`让它发挥作用的原因：它需要`connect()`你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T05:44:16.710

你得到什么错误？检查地址是否正确。如果远程服务器在 80 以外的端口中运行，则在构建 URL 时要考虑到这一点。

我也可以建议使用[HttpClient](http://hc.apache.org/httpclient-3.x/index.html)而不是 URLConnection。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T06:25:27.800

我无法理解，但它通过在代码中添加以下行来工作。

```
con.getExpiration(); 
```

像这样

```
URL url=new URL("http://msyserver/abc/servlet1");
URLConnection con=url.openConnection();
con.setDoOutput(true);
con.setDoInput(true);
con.getExpiration();//<----------
OutputStream os=con.getOutputStream();
ObjectOutputStream oos=new ObjectOutputStream(os);
oos.writeObject(pushEmailDTO);
oos.flush();
oos.close(); 
```

# javascript - 可靠的跨浏览器设置状态栏文本的方式

> ID：876390
> 
> 赞同：4
> 
> 时间：2009-05-18T05:36:07.840
> 
> 标签：javascript, dom, statusbar

我听说过**window.status**，它可以用来控制浏览器的状态栏文本，但我想知道是否有更好或更新的方法可以在大多数现代浏览器中做同样的事情。另外，页面加载后是否可以多次更改状态文本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-18T05:46:24.260

出于安全原因，您正在寻找的功能已被禁用。

这是您问题的另一种解决方案。

您可以创建一个 DIV 并放置位置：固定；位于页面底部，因此人们将始终看到它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-18T05:38:57.293

出于安全原因，大多数现代浏览器默认禁用状态栏访问。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-18T05:39:31.347

您会发现大多数现代浏览器不再允许它，因为它被滥用来隐藏链接目标。

# ruby-on-rails - rails rake 任务是否提供对 ActiveRecord 模型的访问？

> ID：876396
> 
> 赞同：245
> 
> 时间：2009-05-18T05:39:14.717
> 
> 标签：ruby-on-rails, activerecord, rake, task

我正在尝试创建自定义 rake 任务，但似乎我无权访问我的模型。我认为这是 rails 任务中隐含的内容。

我在 lib/tasks/test.rake 中有以下代码：

```
namespace :test do
  task :new_task do
    puts Parent.all.inspect
  end
end 
```

这是我的父模型的样子：

```
class Parent < ActiveRecord::Base
  has_many :children
end 
```

这是一个非常简单的示例，但我收到以下错误：

```
/> rake test:new_task
(in /Users/arash/Documents/dev/soft_deletes)
rake aborted!
uninitialized constant Parent

(See full trace by running task with --trace) 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：429
> 
> 时间：2009-05-18T05:47:09.907

想通了，任务应该是这样的：

```
namespace :test do
  task :new_task => :environment do
    puts Parent.all.inspect
  end
end 
```

注意 `=> :environment`添加到任务的依赖项

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-18T05:45:19.767

你可能需要你的配置（应该指定所有你需要的模型等）

例如：

```
require 'config/environment' 
```

或者，您可以单独要求每个，但您可能会遇到环境问题 AR 未设置等）

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-08-29T06:56:51.133

当您开始编写您的**rake**任务时，请使用生成器为您生成它们。

例如：

```
rails g task my_tasks task_one task_two task_three 
```

您将获得一个在 lib/tasks 中创建的存根，称为`my_tasks.rake`（显然使用您自己的命名空间。）它看起来像这样：

```
namespace :my_tasks do

  desc "TODO"
  task :task_one => :environment do 
  end  

  desc "TODO"
  task :task_two => :environment do 
  end  

  desc "TODO"
  task :task_three => :environment do 
  end  

end 
```

您的所有 Rails 模型等都将在每个任务块内用于当前环境，除非您使用的是**生产**环境，在这种情况下，您需要需要您想要使用的特定模型。在任务主体内执行此操作。（IIRC 这在不同版本的 Rails 之间有所不同。）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-06-14T21:30:06.087

使用新的 ruby​​ 哈希语法（Ruby 1.9），环境将像这样添加到 rake 任务中：

```
namespace :test do
  task new_task: :environment do
    puts Parent.all.inspect
  end
end 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-12-28T14:06:31.673

使用以下命令生成任务（带有任务名称的命名空间）：

```
rails g task test new_task 
```

使用以下语法添加逻辑：

```
namespace :test do
  desc 'Test new task'
  task new_task: :environment do
    puts Parent.all.inspect
  end
end 
```

使用以下命令运行上述任务：

```
bundle exec rake test:new_task 
```

或者

```
 rake test:new_task 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-05T00:13:50.873

:environment 依赖关系被正确地调用了，但是 rake 仍然可能不知道你的模型依赖的其他 gem - 在我的一个例子中，'protected_attributes'。

答案是运行：

```
bundle exec rake test:new_task 
```

这保证了环境包含您的 Gemfile 中指定的任何 gem。

# c# - 使用 UTF-8 解码文件流

> ID：876399
> 
> 赞同：6
> 
> 时间：2009-05-18T05:39:51.520
> 
> 标签：c#, validation, encoding, utf-8

我有一个 XML 文档，它非常大（大约 120M），我不想一次将它加载到内存中。我的目的是检查这个文件是否使用了有效的 UTF-8 编码。

有什么想法可以在不将整个文件以以下形式读入内存的情况下进行快速检查`byte[]`？

我正在使用 VSTS 2008 和 C#。

用于`XMLDocument`加载包含无效字节序列的 XML 文档时，出现异常，但是当将所有内容读入字节数组然后检查 UTF-8 时，没有异常，有什么想法吗？

[这是显示我的 XML 文件内容的屏幕截图，或者您可以从这里](http://www.filefactory.com/file/ag00da3/n/a_xml)下载文件的副本

[![在此处输入图像描述](https://i.stack.imgur.com/cPlhO.jpg)](https://i.stack.imgur.com/cPlhO.jpg)

**编辑1：**

```
class Program
{
    public static byte[] RawReadingTest(string fileName)
    {
        byte[] buff = null;

        try
        {
            FileStream fs = new FileStream(fileName, FileMode.Open, FileAccess.Read);
            BinaryReader br = new BinaryReader(fs);
            long numBytes = new FileInfo(fileName).Length;
            buff = br.ReadBytes((int)numBytes);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }

        return buff;
    }

    static void XMLTest()
    {
        try
        {
            XmlDocument xDoc = new XmlDocument();
            xDoc.Load("c:\\abc.xml");
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
    }

    static void Main()
    {
        try
        {
            XMLTest();
            Encoding ae = Encoding.GetEncoding("utf-8");
            string filename = "c:\\abc.xml";
            ae.GetString(RawReadingTest(filename));
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }

        return;
    }
} 
```

**编辑2：**使用`new UTF8Encoding(true, true)`时会出现异常，但使用时`new UTF8Encoding(false, true)`不会抛出异常。我很困惑，因为它应该是控制是否抛出异常的第二个参数（如果有无效的字节序列），为什么第一个参数很重要？

```
 public static void TestTextReader2()
    {
        try
        {
            // Create an instance of StreamReader to read from a file.
            // The using statement also closes the StreamReader.
            using (StreamReader sr = new StreamReader(
                "c:\\a.xml",
                new UTF8Encoding(true, true)
                ))
            {
                int bufferSize = 10 * 1024 * 1024; //could be anything
                char[] buffer = new char[bufferSize];
                // Read from the file until the end of the file is reached.
                int actualsize = sr.Read(buffer, 0, bufferSize);
                while (actualsize > 0)
                {
                    actualsize = sr.Read(buffer, 0, bufferSize);
                }
            }
        }
        catch (Exception e)
        {
            // Let the user know what went wrong.
            Console.WriteLine("The file could not be read:");
            Console.WriteLine(e.Message);
        }

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-18T05:45:27.600

```
var buffer = new char[32768] ;

using (var stream = new StreamReader (pathToFile, 
    new UTF8Encoding (true, true)))
{
    while (true)
    try
    {
        if (stream.Read (buffer, 0, buffer.Length) == 0)
            return GoodUTF8File ;
    }
    catch (ArgumentException)
    {
        return BadUTF8File ;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T07:07:09.580

@George2我认为他们的意思是像下面这样的解决方案（我没有测试过）。

处理缓冲区之间的转换（即在读取之间缓存额外的字节/部分字符）是 StreamReader 实现的责任和内部实现细节。

```
using System;
using System.IO;
using System.Text;

class Test 
{
    public static void Main() 
    {
        try 
        {
            // Create an instance of StreamReader to read from a file.
            // The using statement also closes the StreamReader.
            using (StreamReader sr = new StreamReader(
                "TestFile.txt",
                Encoding.UTF8
                ))
            {
                const int bufferSize = 1000; //could be anything
                char[] buffer = new char[bufferSize];
                // Read from the file until the end of the file is reached.
                while (bufferSize == sr.Read(buffer, bufferSize, 0)) 
                {
                    //successfuly decoded another buffer's-worth of data
                }
            }
        }
        catch (Exception e) 
        {
            // Let the user know what went wrong.
            Console.WriteLine("The file could not be read:");
            Console.WriteLine(e.Message);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-19T19:20:11.763

这行不通吗？

```
StreamReader reader = new StreamReader(file);

Console.WriteLine(reader.CurrentEncoding.ToString()); //You get the default encoding
reader.Read();

Console.WriteLine(reader.CurrentEncoding.ToString()); //You get the right encoding. 
reader.Close(); 
```

如果没有，有人可以帮助解释原因吗？

# asp.net-mvc - 使用 ASP.NET MVC 进行图像编辑

> ID：876402
> 
> 赞同：2
> 
> 时间：2009-05-18T05:41:15.077
> 
> 标签：asp.net-mvc

ASP.NET MVC 有什么好的图像编辑组件吗？可以裁剪/重新调整大小/旋转等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T07:17:36.707

如上所述，使用 jcrop jquery 插件可以轻松进行裁剪。这让你可以调整大小，在 javascript 中也相对容易，最大的问题是旋转。要旋转工作，您需要使用画布（或闪光灯）。目前除了 IE 之外的所有浏览器都支持 canvas 元素。IE 有自己的画布实现。

*   [JCROP](http://deepliquid.com/content/Jcrop.html)或[IMGAREASELECT](http://odyniec.net/projects/imgareaselect/)用于裁剪
*   [jRotate](http://code.google.com/p/jquery-rotate/)用于旋转
*   [resizer](http://tinyjs.com/files/projects/jquery-resizer/index.html)用于基本调整大小，虽然只是寻找更好的

请记住，这只是客户端代码，您需要做很多工作才能结合三个所需插件的所有功能。

一旦你让它在客户端上工作，你必须找到一种方法将所有参数转储到隐藏字段中并将其发送到服务器。在服务器上，您需要 System.Drawing 来实际更改图像。

开始寻找优秀插件的好地方是[Google](http://www.google.com)或[jQuery 插件库](http://plugins.jquery.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T07:41:54.850

有一个集成的图像过滤/编辑解决方案可用作`java-script editor`使用`HTML5`画布属性。**[Fabric](http://fabricjs.com/demos/)**，它有大量可用的编辑选项。

此外，如果您希望`ASP.NET WebForms Telerik RADImageEditor`在 mvc 中使用，您可以阅读[**这篇文章**](http://www.telerik.com/community/forums/aspnet-ajax/image-editor/imageeditor-in-asp-net-mvc.aspx)，它在 iframe 中以 mvc 视图呈现它。

# asp.net-mvc - 未找到 Html 帮助程序扩展

> ID：876412
> 
> 赞同：7
> 
> 时间：2009-05-18T05:47:19.017
> 
> 标签：asp.net-mvc, extension-methods

我正在使用 ASP.net MVC 的发布版本，我似乎经常收到此错误

```
'System.Web.Mvc.HtmlHelper' does not contain a definition for 'RenderPartial' and no extension method 'RenderPartial' accepting a first argument of type 'System.Web.Mvc.HtmlHelper' could be found (are you missing a using directive or an assembly reference?) 
```

这很奇怪，因为我可以浏览到 System.Web.Mvc.HtmlHelper 并且所有扩展方法都在那里。更奇怪的是，我可以编译并且所有错误都消失了，但是一旦我再次开始编辑，它们就会重新出现。我包括

```
<%@ Import Namespace="System.Web.Mvc" %>
<%@ Import Namespace="System.Web.Mvc.Html" %> 
```

在我发现某处建议的 site.master 文件中，但这似乎无济于事。有任何想法吗？智能感知也没有找到扩展方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T15:16:36.450

首先，检查您是否正确使用了 RenderPartial 方法：

```
<% Html.RenderPartial(...); %> 
```

其次，检查您的 web.config 包含：

```
<system.web>
    <compilation>
        <assemblies>
            <add assembly="System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        </assemblies>
    </compilation>
    <pages>
        <namespaces>
            <add namespace="System.Web.Mvc.Html" />
        </namespaces>
    </pages>
</system.web> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-14T04:33:37.263

Also see: ['System.Web.Mvc.HtmlHelper' does not contain a definition for 'RenderPartial' - ASP.Net MVC](https://stackoverflow.com/questions/1780097/system-web-mvc-htmlhelper-does-not-contain-a-definition-for-renderpartial-a)

You may think this is dumb, but I just had the same problem. I had a working MVC app, running 1.0.0.0 and all of a sudden it stopped working giving me the same RenderPartial isn't in the definition. Well it turns out that while I was going crazy cleaning up my web.config, I removed this section. When I re-added it, everything worked again. I'm sure this has something to do with how the class extensions load during runtime.

Anyway, re-adding this to my web.config worked on my machine. ;)

```
<system.codedom>
    <compilers>
        <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4"
                     type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <providerOption name="CompilerVersion" value="v3.5"/>
            <providerOption name="WarnAsError" value="false"/>
        </compiler>

        <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4"
                     type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <providerOption name="CompilerVersion" value="v3.5"/>
            <providerOption name="OptionInfer" value="true"/>
            <providerOption name="WarnAsError" value="false"/>
        </compiler>
    </compilers>
</system.codedom> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T06:57:58.223

你用

`<% Html.RenderPartial("~/Views/Project/Projects.ascx", ViewData); %>`

或者

`<%=Html.RenderPartial("~/Views/Project/Projects.ascx", ViewData); %>`

?

它应该是第一个，没有“=”。我不确定这是否会解决它，但我记得他们以这种方式改变了一些东西。

# django - 如何在 django 中使用过滤器

> ID：876426
> 
> 赞同：1
> 
> 时间：2009-05-18T06:05:18.107
> 
> 标签：django, django-models, django-queryset, django-orm

类状态(models.Model): someid = models.IntegerField() value = models.IntegerField() status_msg = models.CharField(max_length = 2000)

```
so my database look like:
 20     1234567890   'some mdg'
 20     4597434534   'some msg2'
 20     3453945934   'sdfgsdf'
 10     4503485344   'ddfgg' 
```

所以我必须获取一些值之间包含一个给定的 someid 的值。所以说

```
 val1 = '1234567890'
    val2  = '4414544544' 
```

所以我的最终结果应该是包含 id = 20 的 2 个条目的列表，如何实现这一点。

我尝试使用

```
list = Status.objects.filter(someid = 20, value < val2, value > val1) 
```

哪个是错的？如何解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-18T06:17:54.457

Django Query API 不使用传统的比较运算符。它使用 (field)__(operatorname)=(value) 样式语法。

您的查询将是：

```
list = Status.objects.filter(someid=20, value__lt=val2, value__gt=val1) 
```

[请参阅有关进行查询](http://docs.djangoproject.com/en/dev/topics/db/queries/)的 Django 文档

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T09:28:23.327

您还可以使用[*__range 查找](http://docs.djangoproject.com/en/1.0/ref/models/querysets/#range)：

```
list = Status.objects.filter(someid=20, value__range=(val1+1, val2-1)) 
```

请注意，范围查找是“包容性的”，因此您必须调整范围边界。如果像上面一样适用，这应该会产生与 Imran 发布的完全相同的列表。范围查找也适用于日期。

# jquery - 在 JQUERY 中创建带有选项的选择标签

> ID：876428
> 
> 赞同：0
> 
> 时间：2009-05-18T06:07:09.383
> 
> 标签：jquery

是否可以在 JQuery 中创建带有选项的选择标签。

```
 $("<select id="jSelect">
        <option value="1">String</option>
        <option value="2">Number</option>
        <option value="3">Date</option>
    </select>").appendTo(".menu li") 
```

这应该工作吗？它不适合我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T06:19:15.623

您使用错误的字符串。你在双引号字符串中有双引号，试试这个，javascript中的字符串也不跨越多行。

```
 $(' <select id="jSelect">'+
            '<option value="1">String</option>'+
           '<option value="2">Number</option>'+
            '<option value="3">Date</option>'+
    '</select>').appendTo(".menu li") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T09:51:42.143

尝试这个。

```
var optionList = ["String", "Number" ,  "Date"];
var combo = $("<select>").attr("id", "jSelect");
$.each(optionList, function (j, el1) 
    {
    combo.append("<option>" + el1 + "</option>");
    });
combo.appendTo(".menu li"); 
```

# c# - 如何从默认位置而不是通过硬编码选择文件？

> ID：876429
> 
> 赞同：0
> 
> 时间：2009-05-18T06:08:14.857
> 
> 标签：c#

我想从默认位置（如 bin 文件夹（项目的 exe 文件所在的位置））选择我的 XHTML dtd 文件，而不是通过提供文件的确切路径（如 C:\temp\xhtml1.dtd）对其进行硬编码。我的代码在 C# 中。任何人都可以帮助如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T06:13:26.177

一种选择是使用应用程序库：

```
string path = Path.Combine(
            AppDomain.CurrentDomain.SetupInformation.ApplicationBase,
            "foo.dtd"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T06:11:56.290

我想这可能是你想要的？

```
string xhtml = Directory.GetCurrentDirectory()+"xhtml1.dtd"; 
```

# c# - 从 Web 客户端类继承

> ID：876433
> 
> 赞同：3
> 
> 时间：2009-05-18T06:10:27.883
> 
> 标签：c#, inheritance

C# 2008

我不确定从 Web 客户端类继承需要做多少工作。

目前我在我的项目中使用它。我不能改变其他任何东西。客户希望在一段时间后超时。网络客户端没有这个。

因此，与其重新发明轮子，我正在考虑从 Web 客户端继承并添加此属性。

您认为这是一个合适的解决方案吗？添加这个是否意味着更多的工作。解决这个问题的最简单方法是什么？

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T06:37:40.907

扩展 webclient 以添加一个超时属性，该属性可以选择在重载的构造函数中设置（0 或更小的超时意味着没有超时）。然后重写 GetWebRequest 方法：

```
protected override WebRequest GetWebRequest(Uri address) 
{ 
    var req = base.GetWebRequest(address); 
    var httpReq = req as HttpWebRequest;
    if (httpReq != null && Timeout > 0) 
    {
        httpReq.Timeout = Timeout; 
    } 

    return req; 
} 
```

# asp.net - 如何从 Windows 应用程序编程（使用 C#.NET 的 WinForms）转移到 Web 应用程序编程（ASP.NET）？

> ID：876440
> 
> 赞同：8
> 
> 时间：2009-05-18T06:16:36.783
> 
> 标签：asp.net, winforms

我在公司中使用 C# 开发 winforms 已经有很长一段时间了，我在实现这些方面有相当丰富的经验。但是，我需要换工作并在其他地方工作。这里的市场主要需要我以前从未合作过的 Web 应用程序开发人员。转向使用 ASP.NET 有多难？鉴于我不喜欢背着书阅读，开始自学的最佳方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-18T07:11:13.490

WinForms 开发未涵盖的一些绊脚石是：

*   ASP.NET 页面生命周期
*   IIS 配置
*   安全
*   表现
*   搜索引擎优化
*   HTTP 协议
*   HTML/XML/CSS/Javascript
*   数据库（无论如何大多数网站）
*   网页服务
*   浏览器差异（这个真的很厉害）

请参阅[开发人员在构建公共网站之前应该知道什么？](https://stackoverflow.com/questions/72394/what-should-a-developer-know-before-building-a-public-web-site)为您将要进入的内容有个良好的开端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T06:21:31.270

这些天，很多人似乎正在转向 Web 应用程序。好消息是它并不像你想象的那么难。ASP.NET 利用了许多与 WinForms 相同的 UI 框架设计模式，因此它应该非常简单。

此外，迁移到 ASP.NET，您仍然可以利用您对 C# 的所有知识，因为它是该技术支持的语言之一。您将立即启动并运行。

有几种方法可以使用 ASP.NET 构建用户界面，但最常见的是 ASP.NET WebForms。如果您想进一步分离业务逻辑和界面，您还可以使用提供一些抽象的框架，例如 ASP.NET MVC（类似于 Ruby on Rails）。

我建议看一下[http://www.asp.net](http://www.asp.net)，它有大量用于起步的资源以及视频、示例和演练。祝你好运；我相信你会没事的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T06:32:11.037

关于这种转换最困难的事情是，您将看到的许多示例都包含 aspx.cs 代码隐藏页面中的大部分（如果不是全部）代码。

如果您一直在 WinForms 世界中遵循良好的设计和编码方法，您就会知道越能将表示与您设计的类和对象分开，您的设计就越容易测试。在网络世界中也是如此。

适应页面和控件生命周期需要一些时间，并且一些对象与您最初想象的不同 - 但它应该是一个相当平稳的过渡。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T06:39:00.157

你猜对了！Web 应用程序与富客户端 Windows 应用程序有很大不同。最重要的是，他们需要改变思维。

最基本和主要的区别来自“Web 是无状态的”这一事实。IMO，第二个最重要的区别是 Web 应用程序是在用户的浏览器上呈现的，因此您可以提供的交互级别本质上受到浏览器功能的限制。

我的建议是慢慢开始并习惯 ASP.NET 页面生命周期、创建 Web 表单的代码隐藏和代码旁模型、了解 ASP.NET 如何在服务器上编译和执行页面、状态管理、客户端脚本功能（例如Javascript）等。

获得一本关于 ASP.NET 的入门级书籍，不要忘记查看[ASP.NET](http://www.asp.net/learn)站点上的所有精彩视频。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T06:32:06.607

如前所述，就代码而言，这并不是一个非常困难的过渡。但不要让表面上的相似之处欺骗你；Web UI 与 Window Forms UI 完全不同。投入一些精力来理解 Windows 窗体应用程序的有状态 UI 和 Web 应用程序中基于请求的 UI 之间的区别。这是我多年来在 ASP.NET 应用程序中看到的最奇怪结构的地方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-18T17:33:51.397

首先你应该买一些基本的asp.net书籍来了解asp.net应用的核心概念。然后创建一些基本的简单应用程序并使用文本框、按钮、单选按钮、下拉列表、gridview 等基本控件。然后你应该开始专业编程。

您只需要查看 asp.net 应用程序和页面生命周期就很容易了。在进行 winforms 编程时，您熟悉 c# 和 vb.net 编程。

ASP.NET Webforms 也是事件驱动的。所以它会为你工作。

# core-animation - iPhone SDK：如何使用半透明渐变和投影绘制圆角矩形

> ID：876445
> 
> 赞同：0
> 
> 时间：2009-05-18T06:19:05.797
> 
> 标签：core-animation, core-graphics, quartz-graphics, gradient, shadows

我正在尝试通过为我的应用程序手动创建部分 UI（在本例中为图表）在 iPhone 上绘图。本质上，我想绘制一个带有圆角、阴影和半透明渐变的矩形作为矩形的填充。这是我的 Photoshop 模型的屏幕截图： [alt text http://img36.imageshack.us/img36/6097/picture1nvf.png](http://img36.imageshack.us/img36/6097/picture1nvf.png)

我已经使用 CALayer 创建了一个带有阴影的实心圆角矩形，但是为了让形状和阴影完全显示出来，我必须设置一个不允许我制作的背景颜色半透明渐变是图层的唯一填充。

我已经为此工作了一段时间，并且已经阅读了整个 Core Animation 编程指南，但我还没有取得任何进一步的进展。我觉得答案就在我的眼皮底下。

我错过了什么？

PSI 知道我可能会使用图像文件来完成此操作，但我正在尝试以这种方式进行操作，因为我想学习，并且有一天我想用它来做一些更精美的动画。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T15:19:42.573

1.  用阴影填充圆角矩形。以 100% 的不透明度进行此填充 - 您将在下一步中影响透明度。
2.  使用 Destination Out 混合模式，在（1.0 - 所需的不透明度）处填充没有阴影的相同圆角矩形。例如，如果您想要 40%，请在 60% 处进行 Destination-Out 抽签。可以将其视为从图像的不透明度中减去那么多。

# regex - 如何使用 sed 删除匹配的行，上一行和下一行？

> ID：876446
> 
> 赞同：12
> 
> 时间：2009-05-18T06:19:14.737
> 
> 标签：regex, sed

我在一个文件中多次出现以下序列：

```
yyyy
xxxx
zzzz 
```

我有一个匹配的正则表达式`xxxx`。每当有匹配时，我想删除该行，之前的行（例如`yyyy`）和之后的行（例如`zzzz`）。我怎样才能使用 sed 来做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-20T17:10:20.660

诀窍是存储在“保持空间”中看到的最后一行。

```
sed -n '
/^xxxx/{n
        n
        x
        d
       }
x
1d
p
${x
  p
 }
' <input file> 
```

从`x`- 将当前输入行与保留空间 ( `x`) 交换，然后对于第一行不打印任何内容 ( `1d`)，后续行打印刚刚从保留空间交换的行 ( `p`)，在最后一行交换保留再次空格并打印其中的内容（`$x{x p}`。当我们击中目标行（开始）时要做什么`/^xxxx/`- 将接下来的两行读入模式空间（`n n`）并将模式空间与保持空间交换（`x`） - 这会留下我们想要打印的下一行的保持空间和匹配前一行的模式空间，我们不想要，所以我们放弃它（`d`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T06:49:53.803

这就是我在 perl 中的做法，也许它可以帮助你走上正确的轨道……祝你好运！

```
open(INFILE,"<in.txt");
my(@arrayOutBoundData, $skipNextLine)l
for (<INFILE>) {
    if (not $skipNextLine) {
        if (/^xxxx$/) {
            pop(@arrayOutBoundData);
            $skipNextLine = 1;
        } else {
            push(@arrayOutBoundData,$_);
        }
    }
$skipNextLine = 0
}

open(OUTFILE,">out.txt");
for (@arrayOutBoundData) {
    print OUTFILE;
} 
```

（未在此系统上测试没有 perl，请原谅任何过度站点。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T06:55:02.533

您可以查看[此文档](http://www.grymoire.com/Unix/Sed.html#uh-51)。它涵盖了使用`sed`多行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-03-16T12:11:43.667

这可能对您有用（GNU sed）：

```
echo -e "a\nyyyy\nxxxx\nzzzz\nb" | sed 'N;/^xxxx/M{/^xxxx/d;$!N;d};P;D'
a
b 
```

这会在模式空间中保留两行的窗口，如果在第一行或第二行中找到所需的正则表达式，则读取下一行，然后删除所有三行。边缘情况是如果在第一行或最后一行中找到正则表达式，而之前/之后没有行。在这些情况下，只能删除两行。

顺便说一句，这个解决方案可能在 GNU sed 中发现了一个可能的错误。地址的`M`标志允许`^`和`$`元字符在正则表达式中用作零长度标记，用于多行字符串中的行首和行尾。空地址`//`重用先前声明的地址。该地址应该是包含多行标志的地址吗？目前它似乎包括标志，即使它没有说明，即

```
sed 'N;/^xxxx/M{/^xxxx/d;$!N;d};P;D' file 
```

产生不同（正确）的结果：

```
sed 'N;/^xxxx/M{//d;$!N;d};P;D' file 
```

if`xxxx`出现在文件的第二行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-23T13:12:36.613

您可以使用以下内容：

```
sed -n '/xxxx/{N;s/.*//;x;d;};x;p;${x;p;}' 
```

这将用一个空行替换 3 行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-05T05:03:22.840

您可以先反转文件，使用`sed`删除匹配的行和下一行（或行，`+Nd`在`sed`命令中），最后将结果反转回来：

```
tac old.file | sed -e '/xxxx/,+1d' | tac > new.file 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2010-03-06T12:02:11.277

```
grep -v -f <(grep -1 "xxxx" file) file 
```

# apache-flex - 如何在没有 Adob e air player 的情况下运行 adobe air 应用程序？

> ID：876450
> 
> 赞同：0
> 
> 时间：2009-05-18T06:20:17.230
> 
> 标签：apache-flex, flash, actionscript-3, animation, air

我从[http://www.3dfreeair.com](http://www.3dfreeair.com)下载了一些动画。那么我如何在没有 Adob​​e AIR 的情况下运行？我如何在 linux 操作系统中安装？

我是初学者所以不要误会我。我对空气一无所知。PLZ伙计们告诉我这个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-18T06:22:25.497

没有 Adob​​e AIR 就无法运行它们...

您需要从这里安装它：http: [//get.adobe.com/air/](http://get.adobe.com/air/)

# perl - Perl 5 中的父级和基级有什么区别？

> ID：876471
> 
> 赞同：50
> 
> 时间：2009-05-18T06:36:49.627
> 
> 标签：perl, subclass, pragma

似乎有一个名为的新 pragma[`parent`](http://search.cpan.org/dist/parent/lib/parent.pm)与[`base`](http://perldoc.perl.org/base.html). 什么`parent`保证了新的（非核心）模块？我错过了什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-05-18T07:26:50.140

`base`试图做太多的事情——自动处理加载模块，但也允许从已经加载的类（可能来自名称不是基于模块名称的文件）建立继承。为了让它发挥作用，在某些情况下，有一些骇客行为会导致令人惊讶的结果。不是破坏向后兼容性，而是`parent`引入了具有更清晰语义的新替换编译指示。

`parent`将成为 5.10.1 的核心模块。

**更新：**忘记了`base`句柄`fields`（如果您使用的是`fields`编译指示），这`parent`是不行的。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2009-05-18T13:43:47.477

借助来自 ysth 的额外信息，我能够看到文档中的差异：

该[`base`](http://perldoc.perl.org/base.html)pragma 执行以下操作：

*   将命名包添加到`@ISA`
*   加载与命名包同名的模块[`require`](http://perldoc.perl.org/functions/require.html)（除非它检测到包已经加载）
*   如果与包同名的模块不存在，则不会失败
*   如果命名包中没有符号，则死亡
*   如果`$VERSION`命名包中不存在，则 base 将其设置为`"-1, set by base.pm"`
*   [`fields`](http://perldoc.perl.org/fields.html)如果存在，则初始化命名包的
*   不调用命名包的导入函数

该[`parent`](http://search.cpan.org/dist/parent/lib/parent.pm)pragma 执行以下操作：

*   将命名包添加到`@ISA`
*   加载与命名包同名的模块`require`
*   如果不存在与包同名的模块，则接受一个选项，告诉它不要死

# c# - 有没有办法检查文件是否正在使用？

> ID：876473
> 
> 赞同：928
> 
> 时间：2009-05-18T06:37:40.640
> 
> 标签：c#, .net, file, file-io, file-locking

我正在用 C# 编写一个需要重复访问 1 个图像文件的程序。大多数情况下它可以工作，但如果我的计算机运行速度很快，它会在文件保存回文件系统之前尝试访问文件并抛出错误：

> “文件正在被另一个进程使用”

我想找到解决这个问题的方法，但我所有的谷歌搜索都只通过使用异常处理产生了创建检查。这违反了我的宗教信仰，所以我想知道是否有人有更好的方法？

* * *

## 回答 #1

> 赞同：612
> 
> 时间：2009-06-02T01:20:19.047

**更新了此解决方案的注意事项**：检查`FileAccess.ReadWrite`只读文件将失败，因此已修改解决方案以检查`FileAccess.Read`。

**ORIGINAL：** 过去几年我一直在使用这个代码，我没有遇到任何问题。

了解您对使用异常的犹豫，但您不能一直避免它们：

```
protected virtual bool IsFileLocked(FileInfo file)
{
    try
    {
        using(FileStream stream = file.Open(FileMode.Open, FileAccess.Read, FileShare.None))
        {
            stream.Close();
        }
    }
    catch (IOException)
    {
        //the file is unavailable because it is:
        //still being written to
        //or being processed by another thread
        //or does not exist (has already been processed)
        return true;
    }

    //file is not locked
    return false;
} 
```

* * *

## 回答 #2

> 赞同：595
> 
> 时间：2009-05-18T06:57:05.370

您可能会因此受到线程竞争条件的影响，有记录的示例将其用作安全漏洞。如果您检查该文件是否可用，然后尝试使用它，您可能会在此时抛出，恶意用户可以使用它来强制和利用您的代码。

您最好的选择是尝试获取文件句柄的 try catch / finally。

```
try
{
   using (Stream stream = new FileStream("MyFilename.txt", FileMode.Open))
   {
        // File/Stream manipulating code here
   }
} catch {
  //check here why it failed and ask user to retry if the file is in use.
} 
```

* * *

## 回答 #3

> 赞同：97
> 
> 时间：2012-06-16T02:31:09.753

使用它来检查文件是否被锁定：

```
using System.IO;
using System.Runtime.InteropServices;
internal static class Helper
{
const int ERROR_SHARING_VIOLATION = 32;
const int ERROR_LOCK_VIOLATION = 33;

private static bool IsFileLocked(Exception exception)
{
    int errorCode = Marshal.GetHRForException(exception) & ((1 << 16) - 1);
    return errorCode == ERROR_SHARING_VIOLATION || errorCode == ERROR_LOCK_VIOLATION;
}

internal static bool CanReadFile(string filePath)
{
    //Try-Catch so we dont crash the program and can check the exception
    try {
        //The "using" is important because FileStream implements IDisposable and
        //"using" will avoid a heap exhaustion situation when too many handles  
        //are left undisposed.
        using (FileStream fileStream = File.Open(filePath, FileMode.Open, FileAccess.ReadWrite, FileShare.None)) {
            if (fileStream != null) fileStream.Close();  //This line is me being overly cautious, fileStream will never be null unless an exception occurs... and I know the "using" does it but its helpful to be explicit - especially when we encounter errors - at least for me anyway!
        }
    }
    catch (IOException ex) {
        //THE FUNKY MAGIC - TO SEE IF THIS FILE REALLY IS LOCKED!!!
        if (IsFileLocked(ex)) {
            // do something, eg File.Copy or present the user with a MsgBox - I do not recommend Killing the process that is locking the file
            return false;
        }
    }
    finally
    { }
    return true;
}
} 
```

出于性能原因，我建议您在同一操作中读取文件内容。这里有些例子：

```
public static byte[] ReadFileBytes(string filePath)
{
    byte[] buffer = null;
    try
    {
        using (FileStream fileStream = File.Open(filePath, FileMode.Open, FileAccess.ReadWrite, FileShare.None))
        {
            int length = (int)fileStream.Length;  // get file length
            buffer = new byte[length];            // create buffer
            int count;                            // actual number of bytes read
            int sum = 0;                          // total number of bytes read

            // read until Read method returns 0 (end of the stream has been reached)
            while ((count = fileStream.Read(buffer, sum, length - sum)) > 0)
                sum += count;  // sum is a buffer offset for next reading

            fileStream.Close(); //This is not needed, just me being paranoid and explicitly releasing resources ASAP
        }
    }
    catch (IOException ex)
    {
        //THE FUNKY MAGIC - TO SEE IF THIS FILE REALLY IS LOCKED!!!
        if (IsFileLocked(ex))
        {
            // do something? 
        }
    }
    catch (Exception ex)
    {
    }
    finally
    {
    }
    return buffer;
}

public static string ReadFileTextWithEncoding(string filePath)
{
    string fileContents = string.Empty;
    byte[] buffer;
    try
    {
        using (FileStream fileStream = File.Open(filePath, FileMode.Open, FileAccess.ReadWrite, FileShare.None))
        {
            int length = (int)fileStream.Length;  // get file length
            buffer = new byte[length];            // create buffer
            int count;                            // actual number of bytes read
            int sum = 0;                          // total number of bytes read

            // read until Read method returns 0 (end of the stream has been reached)
            while ((count = fileStream.Read(buffer, sum, length - sum)) > 0)
            {
                sum += count;  // sum is a buffer offset for next reading
            }

            fileStream.Close(); //Again - this is not needed, just me being paranoid and explicitly releasing resources ASAP

            //Depending on the encoding you wish to use - I'll leave that up to you
            fileContents = System.Text.Encoding.Default.GetString(buffer);
        }
    }
    catch (IOException ex)
    {
        //THE FUNKY MAGIC - TO SEE IF THIS FILE REALLY IS LOCKED!!!
        if (IsFileLocked(ex))
        {
            // do something? 
        }
    }
    catch (Exception ex)
    {
    }
    finally
    { }     
    return fileContents;
}

public static string ReadFileTextNoEncoding(string filePath)
{
    string fileContents = string.Empty;
    byte[] buffer;
    try
    {
        using (FileStream fileStream = File.Open(filePath, FileMode.Open, FileAccess.ReadWrite, FileShare.None))
        {
            int length = (int)fileStream.Length;  // get file length
            buffer = new byte[length];            // create buffer
            int count;                            // actual number of bytes read
            int sum = 0;                          // total number of bytes read

            // read until Read method returns 0 (end of the stream has been reached)
            while ((count = fileStream.Read(buffer, sum, length - sum)) > 0) 
            {
                sum += count;  // sum is a buffer offset for next reading
            }

            fileStream.Close(); //Again - this is not needed, just me being paranoid and explicitly releasing resources ASAP

            char[] chars = new char[buffer.Length / sizeof(char) + 1];
            System.Buffer.BlockCopy(buffer, 0, chars, 0, buffer.Length);
            fileContents = new string(chars);
        }
    }
    catch (IOException ex)
    {
        //THE FUNKY MAGIC - TO SEE IF THIS FILE REALLY IS LOCKED!!!
        if (IsFileLocked(ex))
        {
            // do something? 
        }
    }
    catch (Exception ex)
    {
    }
    finally
    {
    }

    return fileContents;
} 
```

自己尝试一下：

```
byte[] output1 = Helper.ReadFileBytes(@"c:\temp\test.txt");
string output2 = Helper.ReadFileTextWithEncoding(@"c:\temp\test.txt");
string output3 = Helper.ReadFileTextNoEncoding(@"c:\temp\test.txt"); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-05-26T15:29:09.790

只需按预期使用异常。接受该文件正在使用中，然后重试，重复直到您的操作完成。这也是最有效的，因为您不会浪费任何循环在执行之前检查状态。

使用下面的函数，例如

```
TimeoutFileAction(() => { System.IO.File.etc...; return null; } ); 
```

2秒后超时的可重用方法

```
private T TimeoutFileAction<T>(Func<T> func)
{
    var started = DateTime.UtcNow;
    while ((DateTime.UtcNow - started).TotalMilliseconds < 2000)
    {
        try
        {
            return func();                    
        }
        catch (System.IO.IOException exception)
        {
            //ignore, or log somewhere if you want to
        }
    }
    return default(T);
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-18T06:52:09.807

也许您可以使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher_events.aspx)并监视 Changed 事件。

我自己没有使用过这个，但它可能值得一试。如果在这种情况下文件系统观察器变得有点重，我会选择 try/catch/sleep 循环。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-10-20T12:33:01.467

您可以返回一个任务，该任务会在它可用时立即为您提供流。这是一个简化的解决方案，但它是一个很好的起点。它是线程安全的。

```
private async Task<Stream> GetStreamAsync()
{
    try
    {
        return new FileStream("sample.mp3", FileMode.Open, FileAccess.Write);
    }
    catch (IOException)
    {
        await Task.Delay(TimeSpan.FromSeconds(1));
        return await GetStreamAsync();
    }
} 
```

您可以像往常一样使用此流：

```
using (var stream = await FileStreamGetter.GetStreamAsync())
{
    Console.WriteLine(stream.Length);
} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-10-15T13:34:59.510

上面接受的答案会遇到一个问题，如果文件已打开以使用 FileShare.Read 模式进行写入，或者文件具有只读属性，则代码将不起作用。这个修改后的解决方案最可靠，需要记住两点（对于公认的解决方案也是如此）：

1.  它不适用于以写入共享模式打开的文件
2.  这没有考虑线程问题，因此您需要将其锁定或单独处理线程问题。

牢记上述内容，这将检查文件是否被*锁定以进行写入*或*锁定以防止读取*：

```
public static bool FileLocked(string FileName)
{
    FileStream fs = null;

    try
    {
        // NOTE: This doesn't handle situations where file is opened for writing by another process but put into write shared mode, it will not throw an exception and won't show it as write locked
        fs = File.Open(FileName, FileMode.Open, FileAccess.ReadWrite, FileShare.None); // If we can't open file for reading and writing then it's locked by another process for writing
    }
    catch (UnauthorizedAccessException) // https://msdn.microsoft.com/en-us/library/y973b725(v=vs.110).aspx
    {
        // This is because the file is Read-Only and we tried to open in ReadWrite mode, now try to open in Read only mode
        try
        {
            fs = File.Open(FileName, FileMode.Open, FileAccess.Read, FileShare.None);
        }
        catch (Exception)
        {
            return true; // This file has been locked, we can't even open it to read
        }
    }
    catch (Exception)
    {
        return true; // This file has been locked
    }
    finally
    {
        if (fs != null)
            fs.Close();
    }
    return false;
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2021-04-18T00:40:14.207

我最近遇到了这个问题，发现了这个：[https](https://docs.microsoft.com/en-us/dotnet/standard/io/handling-io-errors) ://docs.microsoft.com/en-us/dotnet/standard/io/handling-io-errors 。

在这里，Microsoft 描述了以下方法来检查是否`IOException`是由于锁定文件引起的：

```
catch (IOException e) when ((e.HResult & 0x0000FFFF) == 32 ) {
    Console.WriteLine("There is a sharing violation.");
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2011-08-22T16:01:58.190

```
static bool FileInUse(string path)
    {
        try
        {
            using (FileStream fs = new FileStream(path, FileMode.OpenOrCreate))
            {
                fs.CanWrite
            }
            return false;
        }
        catch (IOException ex)
        {
            return true;
        }
    }

string filePath = "C:\\Documents And Settings\\yourfilename";
bool isFileInUse;

isFileInUse = FileInUse(filePath);

// Then you can do some checking
if (isFileInUse)
   Console.WriteLine("File is in use");
else
   Console.WriteLine("File is not in use"); 
```

希望这可以帮助！

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2018-10-09T06:56:20.183

除了工作 3-liners 并且仅供参考：如果您想要**完整**的信息 - Microsoft 开发中心有一个小项目：

[https://code.msdn.microsoft.com/windowsapps/How-to-know-the-process-704839f4](https://code.msdn.microsoft.com/windowsapps/How-to-know-the-process-704839f4)

现在可以在以下位置找到： [https ://github.com/TacticalHorse/LockFinder/blob/master/LockFinder.cs](https://github.com/TacticalHorse/LockFinder/blob/master/LockFinder.cs)

从简介：

> 在 .NET Framework 4.0 中开发的 C# 示例代码将有助于找出锁定文件的进程。 **rstrtmgr.dll**中包含的 RmStartSession 函数已用于创建重启管理器会话，并根据返回结果创建 Win32Exception 对象的新实例。通过 **RmRegisterRescources**函数将资源注册到 Restart Manager 会话后，调用**RmGetList函数通过枚举****RM_PROCESS_INFO**数组来检查哪些应用程序正在使用特定文件。

它通过连接到“重新启动管理器会话”来工作。

> 重新启动管理器使用在会话中注册的资源列表来确定必须关闭和重新启动哪些应用程序和服务。 **资源可以通过文件名、服务短名称或**描述正在运行的应用程序的 RM_UNIQUE_PROCESS 结构来标识。

对于您的特定需求，它可能有点*过度设计*......但如果这是**您**想要的，请继续抓住 vs-project。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2009-05-18T06:42:31.010

我知道的唯一方法是使用速度不太快的 Win32 独占锁 API，但存在示例。

大多数人，对于一个简单的解决方案，只需尝试/捕获/睡眠循环。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-08-22T20:41:25.453

这是一些代码，据我所知，它们与接受的答案相同，但代码更少：

```
 public static bool IsFileLocked(string file)
    {
        try
        {
            using (var stream = File.OpenRead(file))
                return false;
        }
        catch (IOException)
        {
            return true;
        }        
    } 
```

但是，我认为以以下方式执行此操作更为稳健：

```
 public static void TryToDoWithFileStream(string file, Action<FileStream> action, 
        int count, int msecTimeOut)
    {
        FileStream stream = null;
        for (var i = 0; i < count; ++i)
        {
            try
            {
                stream = File.OpenRead(file);
                break;
            }
            catch (IOException)
            {
                Thread.Sleep(msecTimeOut);
            }
        }
        action(stream);
    } 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-09-02T10:31:24.670

以我的经验，您通常希望这样做，然后“保护”您的文件以做一些花哨的事情，然后使用“受保护”的文件。如果您只想像这样使用一个文件，则可以使用 Jeremy Thompson 的答案中解释的技巧。但是，如果您尝试对大量文件执行此操作（例如，当您编写安装程序时），您将受到相当大的伤害。

可以解决此问题的一种非常优雅的方法是使用这样一个事实，即如果您的文件系统正在使用其中一个文件，您将不允许您更改文件夹名称。将文件夹保存在同一个文件系统中，它会像一个魅力一样工作。

请注意，您应该了解可以利用它的明显方式。毕竟，文件不会被锁定。此外，请注意还有其他原因可能导致您的`Move`操作失败。显然，适当的错误处理 (MSDN) 可以在这里提供帮助。

```
var originalFolder = @"c:\myHugeCollectionOfFiles"; // your folder name here
var someFolder = Path.Combine(originalFolder, "..", Guid.NewGuid().ToString("N"));

try
{
    Directory.Move(originalFolder, someFolder);

    // Use files
}
catch // TODO: proper exception handling
{
    // Inform user, take action
}
finally
{
    Directory.Move(someFolder, originalFolder);
} 
```

对于单个文件，我会坚持 Jeremy Thompson 发布的锁定建议。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2019-08-16T01:32:45.037

我曾经需要将 PDF 上传到在线备份存档。但如果用户在另一个程序（如 PDF 阅读器）中打开文件，备份将失败。匆忙中，我尝试了该线程中的一些最佳答案，但无法使它们起作用。对我有用的是试图将 PDF 文件移动到**它自己的目录**。我发现如果文件在另一个程序中打开，这将失败，如果移动成功，则不需要恢复操作，就像将它移动到单独的目录一样。我想发布我的基本解决方案，以防它可能对其他人的特定用例有用。

```
string str_path_and_name = str_path + '\\' + str_filename;
FileInfo fInfo = new FileInfo(str_path_and_name);
bool open_elsewhere = false;
try
{
    fInfo.MoveTo(str_path_and_name);
}
catch (Exception ex)
{
    open_elsewhere = true;
}

if (open_elsewhere)
{
    //handle case
} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-09-07T10:44:08.407

您可以使用我的库从多个应用程序访问文件。

您可以从 nuget 安装它：Install-Package Xabe.FileLock

如果您想了解更多信息，请查看 [https://github.com/tomaszzmuda/Xabe.FileLock](https://github.com/tomaszzmuda/Xabe.FileLock)

```
ILock fileLock = new FileLock(file);
if(fileLock.Acquire(TimeSpan.FromSeconds(15), true))
{
    using(fileLock)
    {
        // file operations here
    }
} 
```

fileLock.Acquire 方法只有在可以为该对象锁定文件独占时才会返回 true。但是上传文件的应用程序也必须在文件锁定中进行。如果对象不可访问，则方法返回 false。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-04-05T12:07:23.587

我有兴趣看看这是否会触发任何 WTF 反射。我有一个创建并随后从控制台应用程序启动 PDF 文档的过程。但是，我正在处理一个弱点，如果用户要多次运行该进程，生成相同的文件而不先关闭先前生成的文件，应用程序将抛出异​​常并死掉。这是一个相当频繁的事件，因为文件名基于销售报价编号。

我决定依靠自动递增的文件版本控制，而不是以这种不优雅的方式失败：

```
private static string WriteFileToDisk(byte[] data, string fileName, int version = 0)
{
    try
    {
        var versionExtension = version > 0 ? $"_{version:000}" : string.Empty;
        var filePath = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, $"{fileName}{versionExtension}.pdf");
        using (var writer = new FileStream(filePath, FileMode.Create))
        {
            writer.Write(data, 0, data.Length);
        }
        return filePath;
    }
    catch (IOException)
    {
        return WriteFileToDisk(data, fileName, ++version);
    }
} 
```

可能可以对`catch`块给予更多的关注，以确保我捕捉到正确的 IOException(s)。我可能还会在启动时清除应用程序存储，因为这些文件无论如何都是临时的。

我意识到这超出了 OP 简单检查文件是否正在使用的问题的范围，但这确实是我到达这里时想要解决的问题，所以也许它对其他人有用。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-04-09T12:48:56.303

这样的事情会有帮助吗？

```
var fileWasWrittenSuccessfully = false;
while (fileWasWrittenSuccessfully == false)
{
    try
    {
        lock (new Object())
        {
            using (StreamWriter streamWriter = new StreamWriter("filepath.txt"), true))
            {
                streamWriter.WriteLine("text");
            }
        }

        fileWasWrittenSuccessfully = true;
    }
    catch (Exception)
    {

    }
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-07-30T17:11:38.503

```
retry_possibility:
//somecode here

try
{
    using(FileStream stream = file.Open(FileMode.Open, FileAccess.Read, FileShare.None))
    {
        stream.Close();
    }
    //write or open your file here
}
catch (IOException)
{
    DialogResult dialogResult = MessageBox.Show("This file is opened by you or another user. Please close it and press retry.\n"+ expFilePath, "File Locked", MessageBoxButtons.RetryCancel);
    if (dialogResult == DialogResult.Retry)
    {
        goto retry_possibility;
    }
    else if (dialogResult == DialogResult.Cancel)
    {
        //do nothing
    }
} 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2009-05-18T09:11:04.440

尝试将文件移动/复制到临时目录。如果可以，它没有锁，您可以在临时目录中安全地工作而不会获得锁。否则，只需尝试在 x 秒内再次移动它。

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2012-01-17T15:45:31.450

我使用这个解决方法，但是在我使用 IsFileLocked 函数检查文件锁定和打开文件之间有一个时间跨度。在这个时间跨度内，一些其他线程可以打开文件，所以我会得到 IOException。

所以，我为此添加了额外的代码。就我而言，我想加载 XDocument：

```
 XDocument xDoc = null;

        while (xDoc == null)
        {
            while (IsFileBeingUsed(_interactionXMLPath))
            {
                Logger.WriteMessage(Logger.LogPrioritet.Warning, "Deserialize can not open XML file. is being used by another process. wait...");
                Thread.Sleep(100);
            }
            try
            {
                xDoc = XDocument.Load(_interactionXMLPath);
            }
            catch
            {
                Logger.WriteMessage(Logger.LogPrioritet.Error, "Load working!!!!!");
            }
        } 
```

你怎么看？我可以改变一些东西吗？也许我根本不需要使用 IsFileBeingUsed 函数？

谢谢

# java - 在 Java VisualVM 中将默认配置文件 CPU 设置为 true

> ID：876481
> 
> 赞同：3
> 
> 时间：2009-05-18T06:41:28.310
> 
> 标签：java, visualvm

我想使用 Java VisualVM 来分析应用程序，即使它正在启动。默认情况下，它设置为 false。

有什么方法可以更改默认启用的分析？

谢谢，阿卡什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-14T12:27:58.807

VisualVM 不支持这种用法。它用于监视已经运行的 java 应用程序。

如果您需要分析应用程序启动，您应该使用 NetBeans Profiler 而不是。NetBeans Profiler 和 VisualVM 共享相同的分析引擎，因此您可以稍后在 VisualVM 中打开和分析分析快照。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T11:06:47.607

我今天为了我自己的目的一直在使用 VisualVM，但不幸的是，似乎没有任何方法可以做到这一点。您可能会在 main 的开头放置一个 Thread.sleep(15000) 以获得 15 秒的时间来连接到应用程序并开始分析。

# asp.net - 在 ASP.NET 中播放视频或音频

> ID：876485
> 
> 赞同：0
> 
> 时间：2009-05-18T06:44:33.690
> 
> 标签：asp.net, silverlight, video

我已经存储在 SQL Server 2005 中的音频和视频文件。我想在 ASP.NET 中播放这些文件而不将它们存储在文件系统上。

对于存储在 SQL Server 2005 中的图像，我使用自定义 HTTP 处理程序，但我不知道是否可以对视频和音频文件执行相同操作。

最好的方法是什么？银光？

也许我需要一个物理文件才能用 silverlight 播放它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T06:58:06.787

对于您正在使用的控件，您需要将源设置为动态页面，该页面使用正确的内容类型写出内容。

那么你：

创建“查看”页面并将您的视频播放对象放入其中。将源设置为一些新的 aspx 页面。在新的 aspx 页面中，设置适合文件流的内容类型，从数据库中流出字节。

# jquery - JQuery 中的变量

> ID：876486
> 
> 赞同：0
> 
> 时间：2009-05-18T06:44:47.340
> 
> 标签：jquery

我在菜单中创建了一个 Div 标记`li`并向其中添加了一个类`Div1`。一切运作良好。但现在我想创建 div 标签，然后`div1`再单击一次。`div2``div3`

那么是否可以使用变量并在其中有一个计数器？

```
 $(document).ready(function(){

            $(".menu a").click(function () {

       $("<div> Label </div>").appendTo(".menu li").addClass("div1");
                                 $(".div1").show(function () {
                           $(".div1").editInPlace({
                            url: "./server",
                            show_buttons: true
                                });//editinplace

                         });//show
                        });//click
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T06:49:58.190

不知道你为什么要更改课程，但如果你这样做了……我没有看到 ID 被设置……

```
$(document).ready(function()
{
    var increment = 0;
    $(".menu a").click(function () 
    {
        increment++;
        $("<div> Label </div>").appendTo(".menu li").addClass("div" + increment);
        $(".div" + increment).show(function () 
        {
            $(".div" + increment).editInPlace({
                url: "./server",
                show_buttons: true
            });//editinplace

        });//show
    });//click
}); 
```

javascript 中的范围链接意味着“增量”变量始终对 click 函数可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T06:52:09.230

我认为您不需要指定 div1、div2 等。我已经在 jquery 中使用了编辑。我只是将相同的类（如可编辑）添加到我需要编辑的所有元素并放入准备好的功能，如下所示：

```
$(document).ready(function(){
    $(".editable").editInPlace(...../*other stuff*/);
}); 
```

# c# - SQL Reporting Services：查找报表所在的文件夹

> ID：876492
> 
> 赞同：1
> 
> 时间：2009-05-18T06:46:45.590
> 
> 标签：c#, .net, sql, reporting-services

如果我有报告名称，我如何以编程方式获取报告所在的项目/文件夹的名称？

例如，如果我有这样的报告

```
http://server/Reports/Pages/Report.aspx?ItemPath=/ReportProject1/ReportName 
```

鉴于`ReportName`我如何才能确定报告在文件夹中`ReportProject1`？

所以我想是否有一个函数可以传递他的报告名称并获取它的详细信息，或者查询报告服务器以获取其报告文件夹的列表，我可以遍历这些并检查报告的内部情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T07:41:03.270

数据位于 Reporting Services 数据库的目录表中。所以像这样的查询

```
Select Path, Name 
From reportserver.dbo.catalog 
Where name = 'ReportProject1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T22:44:06.233

您还可以使用报告服务 api，您可以创建一个自定义应用程序，使用报告服务器 Web 服务连接到您的报告服务器。这将为您提供大量信息来查询您的安装。

查看[http://technet.microsoft.com/en-us/library/ms155076(SQL.90)](http://technet.microsoft.com/en-us/library/ms155076(SQL.90).aspx) .aspx 了解更多信息

# antlr - ANTLR 相当于野牛 REJECT 动作？

> ID：876493
> 
> 赞同：0
> 
> 时间：2009-05-18T06:47:17.570
> 
> 标签：antlr, grammar, bison

我正在尝试解析一个`Name=Value`对列表，其中值可以包含除空格以外的任何内容（即值可以包含等号）。
该名称仅限于通常的标识符字符。

问题是，“价值”标记匹配一切。例如，对于输入：

```
dude=sweet 
```

解析器会将**整个**输入与“值”标记匹配（并抛出一个`MismatchedTokenException`）。

在*bison*中，有可能将状态分配给标记（或者这只是用于非终结符？），以便它们只有在显式转换到该状态后才变得“有资格”进行匹配。

*编辑考虑一下，这在**野牛*中也不起作用-令牌拆分已经发生（在*flex*中）；但是，我认为有一种方法可以**`REJECT`**标记，迫使*flex*尝试次优匹配。

这是我的 ANTLR 语法。

```
grammar command_string;

start   
    :    commandParam* EOF
    ;
commandParam 
    :   IDENTIFIER '=' CONTINUOUS_VALUE 
    ;
IDENTIFIER 
    :   ('-'|'_'|'a'..'z'|'A'..'Z'|'0'..'9')+ 
    ;
CONTINUOUS_VALUE
    :   ~( ALL_WS )+
    ;
WS
    :   (ALL_WS) +      { $channel = HIDDEN; }
    ;
fragment ALL_WS     
    :   ' ' | '\t' | '\r' | '\n' 
    ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-31T03:26:05.010

您在 CONTINUOUS_VALUE 和 IDENTIFIER 之间有一些重叠（IDENTIFIER 中的字符是 CONTINUOUS_VALUE 的子集。可能有几种方法可以解决这个问题。一种方法是使用 '=' 开始 CONTINUOUS_VALUE，然后将其从文本。在 CSharp 中，它看起来像这样：

```
CONTINUOUS_VALUE
    :   '=' ~( ALL_WS )+ { Text = Text.Substring(1, Text.Length - 1); }
    ; 
```

然后只需将“=”从 commandParam 规则中取出。

第二种方法是制定 IDENTIFIER 和 CONTINUOUS_VALUE 解析器规则（至少第一个字母小写），然后你有上下文来确定哪个应该匹配。您也可以将它们制作成片段并在 commandParam 中引用它们，但我不确定您是否可以嵌套片段，因为您已经拥有 ALL_WS 片段。

此外，您不需要在 NameValue 对之间使用某种分隔符吗？

# c++ - 如何在 Pre-Build... 中修改源文件而不修改源文件？

> ID：876497
> 
> 赞同：4
> 
> 时间：2009-05-18T06:49:38.453
> 
> 标签：c++, visual-studio-2005, add-in, aop, pre-build-event

所以我正在使用 Visual Studio 2005，对于我当前的项目，我正在构建一个 C# 加载项来处理 AspectC++ 方面的编织。收集方面和源文件并将它们提供给方面编译器非常简单，但这会生成新的（修改过的）源文件。我正在尝试模拟标准的 AspectC++ 插件：[http ://www.pure-systems.com/AspectC_Add-In.22+M54a708de802.0.html](http://www.pure-systems.com/AspectC_Add-In.22+M54a708de802.0.html)，所以我想保持项目的源文件不变，因为我将编织文件提供给 C++ 编译器。假设我什至可以做到这一点（不确定如何），我将如何让调试器正确指向原始源文件？我知道我必须取消选中 VS 选项，这样源就不必与编译版本匹配，但我不知道如何在不直接修改源文件的情况下将两者关联起来。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T11:42:52.527

听起来您想在预处理器之前或之后修改源代码。在这种情况下，您应该使用 #line 指令来告诉编译器它正在处理的文件和行。这就是预处理器的工作方式，它将所有头文件包含在一个大文件中，该文件包含#line 指令，它使编译器能够报告正确行的错误并在调试器的符号中指定正确的行。

您应该尝试仅在源文件上运行预处理器。这将向您展示#line 指令的工作原理。cl.exe 命令行选项 /P 将在这里为您提供帮助。请记住，您将需要编译文件所需的所有其他预处理器选项，例如 /D 和 /I 以使其工作。

[http://msdn.microsoft.com/en-us/library/b5w2czay(VS.71).aspx](http://msdn.microsoft.com/en-us/library/b5w2czay(VS.71).aspx)

# asp.net - 尝试从 asp.net 应用程序运行进程

> ID：876504
> 
> 赞同：2
> 
> 时间：2009-05-18T06:52:40.227
> 
> 标签：asp.net, iis

我需要在服务器上运行一个应用程序。我有一个可执行文件，它通过终端服务在我自己的权限下运行得很好。当我用我的 VS 运行站点时，它也可以通过 asp.net 在我自己的机器上运行良好。

当我尝试在真正的 IIS 上运行我的网站时，它就挂了。我尝试将 StartInfo 的凭据更改为我自己的凭据，并在 web.config 中尝试 Impresonate=true 给我自己。在这两种情况下，它仍然不起作用。

我不断收到以下错误（在我的凭据下运行并在 /console 上输入服务器时）

![替代文字](https://i.stack.imgur.com/ijQlM.png)

我还在 IIS 选项中选中了“允许服务与桌面交互”。

这里的任何人都知道我错过了什么？我应该检查一些选项，或者做我需要的其他方式？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T07:08:23.090

尝试使用新的管理员帐户创建新的应用程序池。如果可行，请从管理员组中删除用户并创建一个具有应用程序必要权限的新组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T07:21:20.273

我试图在我的本地 IIS 上运行，将测试控制台应用程序复制到网站的 bin 目录中，它可以工作：

```
 string path = "bin/test.exe";
        try
        {
            ProcessStartInfo pi = new ProcessStartInfo();
            pi.UseShellExecute = true;
            pi.FileName = Server.MapPath(path);
            System.Diagnostics.Process.Start(pi);
            lbl.Text = "Started Process: " + Server.MapPath(path);
        }
        catch (Exception ex)
        {
            lbl.Text = ex.Message + 
            "<br/><p>" + ex.StackTrace + "</p>" +
            Server.MapPath(path);
        } 
```

# version-control - 版本控制是如何工作的？

> ID：876506
> 
> 赞同：11
> 
> 时间：2009-05-18T06:53:24.643
> 
> 标签：version-control

版本控制通常如何工作？它是否将差异文件保存为带有哈希的跟踪以验证跟踪？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-18T06:56:15.463

查看[关于版本控制的 Eric Sinks 博客系列](http://www.ericsink.com/scm/source_control.html)。

此外，Joel Spolsky 编写了[Hg Init：一个 Mercurial 教程](http://hginit.com/)，这最终让我“了解”了分布式源代码控制的全部内容。

给猫剥皮的方法不止一种……

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-18T07:46:47.893

不同的 VCS 使用不同的方法。例如，CVS 将为您提交的每个文件在服务器上创建一个文件。这本质上是一个 RCS 格式的文件；CVS 只是 RCS 的包装器，它在目录子树中的许多文件上运行 RCS 命令（RCS 只能在单个文件上工作）。

RCS 文件包含更改列表（版本号、签入消息以及更改的数量）。之后是当前 HEAD 版本的副本。其余文件是版本之间的差异（[长解释](http://durak.org/sean/pubs/software/cvsbook/RCS-Format.html)）。

这样，CVS 可以快速返回 HEAD 版本（最常被请求）并可以计算其他版本。

CVS 不做任何验证；如果您的某个文件损坏，则需要备份。由于 CVS 基于 RCS，它不能对目录进行版本控制，也不能跟踪重命名。CVS 和 RCS 使用标准`diff(1)`命令来创建差异。

[Subversion](http://subversion.tigris.org/) (SVN) 的工作方式类似，但增加了目录和重命名的版本控制。此外，SVN 使用更好的差异算法 (xdelta)，它提供了更小的存储库。

有关[Git](http://git-scm.com/)工作原理的说明，请参见[此处](http://eagain.net/articles/git-for-computer-scientists/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T22:56:42.160

[Darcs](http://darcs.net/)非常不同，恕我直言，它比其他 SCM 甚至分布式 SCM 更直观。对于初学者来说，它是如何工作的，有一个很好的指南：[了解 Darcs](http://en.wikibooks.org/wiki/Understanding_darcs)。

# c# - 检查两个列表的最佳方法是什么 C# 中的相等列表

> ID：876508
> 
> 赞同：19
> 
> 时间：2009-05-18T06:54:15.093
> 
> 标签：c#, linq, list, equality

有很多方法可以做到这一点，但我觉得我错过了一个功能或其他东西。

显然`List == List`会使用`Object.Equals()`并返回`false`。

如果列表中的每个元素都相等并且出现在相反列表中的相同位置，那么我会认为它们是相等的。我正在使用值类型，但正确实现的 Data 对象应该以相同的方式工作（即我不是在寻找浅拷贝列表，只是其中每个对象的*值*是相同的）。

我已经尝试过搜索并且有类似的问题，但我的问题是每个元素的相等性，并且按照确切的顺序。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-05-18T06:58:59.127

```
Enumerable.SequenceEqual<TSource> 
```

[MSDN](http://msdn.microsoft.com/en-us/library/bb348567.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-18T06:59:49.327

邪恶的实施是

```
if (List1.Count == List2.Count)
{
   for(int i = 0; i < List1.Count; i++)
   {
      if(List1[i] != List2[i])
      {
         return false;
      }
   }
   return true;
}
return false; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-18T07:14:36.370

我把这个变化放在一起：

```
private bool AreEqual<T>(List<T> x, List<T> y)
{
    // same list or both are null
    if (x == y)
    {
        return true;
    }

    // one is null (but not the other)
    if (x== null || y == null)
    {
        return false;
    }

    // count differs; they are not equal
    if (x.Count != y.Count)
    {
        return false;
    }

    for (int i = 0; i < x.Count; i++)
    {
        if (!x[i].Equals(y[i]))
        {
            return false;
        }
    }
    return true;
} 
```

我的书呆子也爬了出来，所以我对 SequenceEquals 做了一个性能测试，这个有一点优势。

现在，要问的问题；这种微小的、几乎可测量的性能提升是否值得将代码添加到代码库并对其进行维护？我非常怀疑;o)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-18T07:03:01.413

我敲了一个快速扩展方法：

```
namespace ExtensionMethods
{
    public static class MyExtensions
    {
        public static bool Matches<T>(this List<T> list1, List<T> list2)
        {
            if (list1.Count != list2.Count) return false;
            for (var i = 0; i < list1.Count; i++)
            {
                if (list1[i] != list2[i]) return false;
            }
            return true;
        }
    }   
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-30T01:39:53.390

可以为序列编写通用目的`IEqualityComparer<T>`。一个简单的：

```
public class SequenceEqualityComparer<T> : IEqualityComparer<IEnumerable<T>>
{
    public bool Equals(IEnumerable<T> x, IEnumerable<T> y)
    {
        return x.SequenceEqual(y);
    }

    public int GetHashCode(IEnumerable<T> obj)
    {
        return unchecked(obj.Aggregate(397, (x, y) => x * 31 + y.GetHashCode()));
    }
} 
```

* * *

**一个更充实的版本**：应该表现更好。

```
public class SequenceEqualityComparer<T> : EqualityComparer<IEnumerable<T>>, 
                                           IEquatable<SequenceEqualityComparer<T>>
{
    readonly IEqualityComparer<T> comparer;

    public SequenceEqualityComparer(IEqualityComparer<T> comparer = null)
    {
        this.comparer = comparer ?? EqualityComparer<T>.Default;
    }

    public override bool Equals(IEnumerable<T> x, IEnumerable<T> y)
    {
        // safer to use ReferenceEquals as == could be overridden
        if (ReferenceEquals(x, y))
            return true;

        if (x == null || y == null)
            return false;

        var xICollection = x as ICollection<T>;
        if (xICollection != null)
        {
            var yICollection = y as ICollection<T>;
            if (yICollection != null)
            {
                if (xICollection.Count != yICollection.Count)
                    return false;

                var xIList = x as IList<T>;
                if (xIList != null)
                {
                    var yIList = y as IList<T>;
                    if (yIList != null)
                    {
                        // optimization - loops from bottom
                        for (int i = xIList.Count - 1; i >= 0; i--)
                            if (!comparer.Equals(xIList[i], yIList[i]))
                                return false;

                        return true;
                    }
                }
            }
        }

        return x.SequenceEqual(y, comparer);
    }

    public override int GetHashCode(IEnumerable<T> sequence)
    {
        unchecked
        {
            int hash = 397;
            foreach (var item in sequence)
                hash = hash * 31 + comparer.GetHashCode(item);

            return hash;
        }
    }

    public bool Equals(SequenceEqualityComparer<T> other)
    {
        if (ReferenceEquals(null, other))
            return false;

        if (ReferenceEquals(this, other))
            return true;

        return this.comparer.Equals(other.comparer);
    }

    public override bool Equals(object obj)
    {
        return Equals(obj as SequenceEqualityComparer<T>);
    }

    public override int GetHashCode()
    {
        return comparer.GetHashCode();
    }
} 
```

这有几个特点：

1.  比较是从下到上进行的。在典型用例中，最终集合不同的可能性更大。

2.  `IEqualityComparer<T>`可以传递一个来比较集合中的项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-12T09:35:52.577

使用**linq** `SequenceEqual`检查序列是否相等，因为 Equals 方法检查引用是否相等。

```
bool isEqual = list1.SequenceEqual(list2); 
```

该`SequenceEqual()`方法将第二个 I`Enumerable<T>`序列作为参数，并与目标（第一个）序列**进行逐个元素的比较。**如果两个序列包含**相同数量**的元素，并且第一个序列中的每个元素都等于第二个序列中的对应元素（使用*默认相等比较器*），则`SequenceEqual()` `returns true`. 否则，`false`返回。

或者，如果您不关心元素顺序使用`Enumerable.All`方法：

```
var isEqual = list1.All(list2.Contains); 
```

第二个版本还需要对 Count 进行另一次检查，因为即使`list2`包含比 . 更多的元素，它也会返回 true `list1`。

# c# - Sharepoint Lists.GetListItems 排序

> ID：876511
> 
> 赞同：0
> 
> 时间：2009-05-18T06:55:53.857
> 
> 标签：c#, sharepoint, moss, sharepoint-api

我正在通过我的 c# 代码调用共享点的 Lists.GetListItems Web 方法。是否可以从共享点获取排序列表？或者我是否必须在我的 c# 代码中检索后对其进行排序？我无法在查询或查询选项中找到任何选项。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T03:31:47.827

请参阅[http://msdn.microsoft.com/en-us/library/lists.lists.getlistitems.aspx](http://msdn.microsoft.com/en-us/library/lists.lists.getlistitems.aspx)

GetListItems 包含一个参数“查询”。如果您在该查询中传递一个 xml 节点，例如：

```
<OrderBy><FieldRef Name='fieldnametosort' /></OrderBy> 
```

你会得到一个返回的排序列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T18:48:17.357

对我们来说，这很有效。

```
<Query><OrderBy><FieldRef Name='Modified' Ascending='False' /></OrderBy></Query> 
```

`<Query>`注意周围的多余部分`<OrderBy>`。我们尝试`ows_Modified`了这个名字，但没有用。

# c# - 在运行时显示随机图像

> ID：876519
> 
> 赞同：2
> 
> 时间：2009-05-18T06:59:04.960
> 
> 标签：c#, asp.net

我正在尝试显示随机图像

这是我的代码

```
 private void Page_Load(object sender, EventArgs e)
{
   int num1=0;
   Random randNum = new Random();
   num1 = randNum.Next(0, 9);
   Image1.ImageUrl = DisplayNumber(num1);
   Image1.Visible=true;
}

protected  string DisplayNumber(int i)
{
        string imagepath="";
        switch (i)
        {
            case 0:
                imagepath = "~/fordoctor/doctor_login/images/0.GIF";
                break;

            case 1:
                imagepath = "~/fordoctor/doctor_login/images/1.GIF";
                break;

            case 2:
                imagepath = "~/fordoctor/doctor_login/images/2.GIF";
                break;

            case 3:
                imagepath = "~/fordoctor/doctor_login/images/3.GIF";
                break;

            case 4:
                imagepath = "~/fordoctor/doctor_login/images/4.GIF";
                break;

            case 5:
                imagepath = "~/fordoctor/doctor_login/images/5.GIF";
                break;

            case 6:
                imagepath = "~/fordoctor/doctor_login/images/6.GIF";
                break;

            case 7:
                imagepath = "~/fordoctor/doctor_login/images/7.GIF";
                break;

            case 8:
                imagepath = "~/fordoctor/doctor_login/images/8.GIF";
                break;

            case 9:
                imagepath = "~/fordoctor/doctor_login/images/9.GIF";
                break;
        }
        Session["num1"] = imagepath;
        return imagepath;

    } 
```

但它什么也没显示我什至使用 Response.Write(Session["num1"].ToString()); 检查图像 并且图像显示在下一页

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T07:42:18.617

我建议使您的代码类似于以下内容：

```
private void Page_Load( object sender, EventArgs e ) {
    string imgUrl = GetRandomImageUrl();
    Session["num1"] = imgUrl;
    Image1.ImageUrl = imgUrl;
    Image1.Visible = true;
}

protected string GetRandomImageUrl() {
    Random r = new Random();
    return String.Format( "~/fordoctor/doctor_login/images/{0}.gif", r.Next( 0, 9 ) );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T07:17:42.370

检查 GIF 的大小写，应该是小写（通常）。

# apache-flex - 如何从 Adob e Air 执行 windows 程序？

> ID：876521
> 
> 赞同：1
> 
> 时间：2009-05-18T07:00:12.447
> 
> 标签：apache-flex, air, adobe

你能告诉我如何从 Adob​​e air 应用程序运行程序，比如我想运行 utorrent 或 word 的某些事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T07:01:45.453

[在这里检查](https://stackoverflow.com/questions/672021/adobe-air-to-execute-program)

# postgresql - 在 PostgreSQL 中创建数据库的副本

> ID：876522
> 
> 赞同：823
> 
> 时间：2009-05-18T07:00:17.783
> 
> 标签：postgresql

将整个数据库（其结构和数据）复制到 pgAdmin 中的新数据库的正确方法是什么？

* * *

## 回答 #1

> 赞同：1251
> 
> 时间：2009-05-18T07:18:51.590

Postgres 允许在创建新数据库时使用服务器上的任何现有数据库作为模板。我不确定 pgAdmin 是否在创建数据库对话框中为您提供了选项，但如果没有，您应该能够在查询窗口中执行以下操作：

```
CREATE DATABASE newdb WITH TEMPLATE originaldb OWNER dbuser; 
```

不过，您可能会得到：

```
ERROR:  source database "originaldb" is being accessed by other users 
```

要断开所有其他用户与数据库的连接，您可以使用以下查询：

```
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity 
WHERE pg_stat_activity.datname = 'originaldb' AND pid <> pg_backend_pid(); 
```

* * *

## 回答 #2

> 赞同：307
> 
> 时间：2011-07-18T22:05:05.950

[贝尔答案](https://stackoverflow.com/a/876565/642706)的命令行版本：

```
createdb -O ownername -T originaldb newdb 
```

这应该在数据库 master 的权限下运行，通常是 postgres。

* * *

## 回答 #3

> 赞同：116
> 
> 时间：2014-05-12T14:33:17.613

要使用 postgres 克隆现有数据库，您可以这样做

```
/* KILL ALL EXISTING CONNECTION FROM ORIGINAL DB (sourcedb)*/
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity 
WHERE pg_stat_activity.datname = 'SOURCE_DB' AND pid <> pg_backend_pid();

/* CLONE DATABASE TO NEW ONE(TARGET_DB) */
CREATE DATABASE TARGET_DB WITH TEMPLATE SOURCE_DB OWNER USER_DB; 
```

IT 将终止与源数据库的所有连接以避免错误

```
ERROR:  source database "SOURCE_DB" is being accessed by other users 
```

* * *

## 回答 #4

> 赞同：86
> 
> 时间：2014-11-12T21:47:18.253

在原始数据库流量不足的生产环境中，我只是使用：

```
pg_dump production-db | psql test-db 
```

* * *

## 回答 #5

> 赞同：52
> 
> 时间：2009-05-18T07:05:46.697

不了解 pgAdmin，但`pgdump`在 SQL 中为您提供了数据库的转储。您只需要创建一个同名的数据库并执行

```
psql mydatabase < my dump 
```

恢复所有表及其数据和所有访问权限。

* * *

## 回答 #6

> 赞同：30
> 
> 时间：2015-03-23T15:26:58.777

首先，`sudo`作为数据库用户：

```
sudo su postgres 
```

转到 PostgreSQL 命令行：

```
psql 
```

创建新数据库，授予权限并退出：

```
CREATE DATABASE new_database_name;
GRANT ALL PRIVILEGES ON DATABASE new_database_name TO my_user;
\d 
```

将旧数据库中的结构和数据复制到新数据库：

```
pg_dump old_database_name | psql new_database_name 
```

* * *

## 回答 #7

> 赞同：25
> 
> 时间：2010-08-14T00:24:43.253

在 pgAdmin 中，您可以从原始数据库进行备份，然后只需创建一个新数据库并从刚刚创建的备份中恢复：

1.  右键单击源数据库，备份...并转储到文件。
2.  右键单击，新建对象，新建数据库...并命名目标。
3.  右键单击新数据库，Restore... 并选择您的文件。

* * *

## 回答 #8

> 赞同：23
> 
> 时间：2014-06-12T17:21:07.087

# 复制“负载不足”的数据库

我将这种方法与上面的示例拼凑在一起。我正在使用“负载不足”的服务器，当我尝试来自@zbyszek 的方法时出现错误。我也在寻求“仅限命令行”的解决方案。

`createdb: database creation failed: ERROR: source database "exampledb" is being accessed by other users`.

这对我有用（*前面的命令`nohup`将输出移动到文件中并防止服务器断开连接*）：

1.  `nohup pg_dump exampledb > example-01.sql`
2.  `createdb -O postgres exampledbclone_01`

    > *我的用户是“postgres”*

3.  `nohup psql exampledbclone_01 < example-01.sql`

* * *

## 回答 #9

> 赞同：21
> 
> 时间：2012-01-11T06:20:26.587

将整个数据库（其结构和数据）复制到 pgAdmin 中的新数据库的正确方法是什么？

回答：

```
CREATE DATABASE newdb WITH TEMPLATE originaldb; 
```

尝试和测试。

* * *

## 回答 #10

> 赞同：14
> 
> 时间：2019-10-31T14:02:40.673

这是仅使用 pgadmin4 GUI（通过备份和恢复）在数据库上创建副本的整个过程

Postgres 带有 Pgadmin4。如果您使用 macOS，您可以按`CMD`+`SPACE`并键入`pgadmin4`来运行它。这将在 chrome 中打开一个浏览器选项卡。

* * *

# 复制步骤

## 1\. 创建备份

通过右键单击数据库->“备份”来执行此操作

[![在此处输入图像描述](https://i.stack.imgur.com/2hQt9.png)](https://i.stack.imgur.com/2hQt9.png)

## 2\. 给文件命名。

喜欢`test12345`。点击备份。这会创建一个二进制文件转储，它不是`.sql`格式

[![在此处输入图像描述](https://i.stack.imgur.com/FyEZm.png)](https://i.stack.imgur.com/FyEZm.png)

## 3.查看下载位置

屏幕右下角应该有一个弹出窗口。单击“更多详细信息”页面以查看您的备份下载到的位置

[![在此处输入图像描述](https://i.stack.imgur.com/5cXqM.png)](https://i.stack.imgur.com/5cXqM.png)

## 4.找到下载文件的位置

在这种情况下，它是`/users/vincenttang`

[![在此处输入图像描述](https://i.stack.imgur.com/vJiyy.png)](https://i.stack.imgur.com/vJiyy.png)

## 5.从pgadmin恢复备份

假设您正确执行了步骤 1 到 4，您将拥有一个还原二进制文件。有时您的同事可能想在他们的本地计算机上使用您的还原文件。说过人去 pgadmin 并恢复

通过右键单击数据库->“恢复”来执行此操作

[![在此处输入图像描述](https://i.stack.imgur.com/bAUhb.png)](https://i.stack.imgur.com/bAUhb.png)

## 6.选择文件查找器

确保手动选择文件位置，不要将文件拖放到 pgadmin 中的上传器字段中。因为你会遇到错误权限。相反，找到您刚刚创建的文件：

[![在此处输入图像描述](https://i.stack.imgur.com/0FL3F.png)](https://i.stack.imgur.com/0FL3F.png)

## 7.找到所说的文件

您可能需要将右下角的过滤器更改为“所有文件”。之后从第 4 步开始查找文件。现在点击右下角的“选择”按钮进行确认

[![在此处输入图像描述](https://i.stack.imgur.com/woFcW.png)](https://i.stack.imgur.com/woFcW.png)

## 8.恢复所述文件

您将再次看到此页面，并选择文件的位置。继续并恢复它

[![在此处输入图像描述](https://i.stack.imgur.com/i7cTv.png)](https://i.stack.imgur.com/i7cTv.png)

## 9\. 成功

如果一切正常，右下角应该会弹出一个显示成功恢复的指示器。您可以导航到您的表以查看每个表上的数据是否已正确恢复。

## 10\. 如果不成功：

如果第 9 步失败，请尝试删除数据库上的旧公共架构。转到“查询工具”

[![在此处输入图像描述](https://i.stack.imgur.com/bqmyP.png)](https://i.stack.imgur.com/bqmyP.png)

执行此代码块：

```
DROP SCHEMA public CASCADE; CREATE SCHEMA public; 
```

[![在此处输入图像描述](https://i.stack.imgur.com/BaHyr.png)](https://i.stack.imgur.com/BaHyr.png)

现在再次尝试步骤 5 到 9，它应该可以解决

**编辑**- 一些附加说明。如果您在上传过程中遇到错误，请更新 PGADMIN4

* * *

## 回答 #11

> 赞同：13
> 
> 时间：2018-06-15T16:54:44.193

从[文档](https://www.postgresql.org/docs/10/static/sql-createdatabase.html)中，不鼓励使用`createdb`或与模板一起使用：`CREATE DATABASE`

> 虽然可以通过将模板名称指定为模板来复制除 template1 之外的数据库，但这（目前）还不是通用的“复制数据库”工具。主要限制是在复制模板数据库时没有其他会话可以连接到模板数据库。CREATE DATABASE 启动时如果存在任何其他连接将失败；否则，与模板数据库的新连接将被锁定，直到 CREATE DATABASE 完成。

[`pg_dump`](https://www.postgresql.org/docs/current/static/app-pgdump.html)或者[`pg_dumpall`](https://www.postgresql.org/docs/current/static/app-pg-dumpall.html)是复制数据库和所有数据的好方法。如果您使用的是 pgAdmin 之类的 GUI，则在执行备份命令时会在后台调用这些命令。复制到新数据库分两个阶段完成：备份和还原

`pg_dumpall`将所有数据库保存在 PostgreSQL 集群上。这种方法的缺点是您最终会得到一个可能非常大的文本文件，其中包含创建数据库和填充数据所需的 SQL。这种方法的优点是您可以免费获得集群的所有角色（权限）。要转储所有数据库，请从超级用户帐户执行此操作

```
pg_dumpall > db.out 
```

并恢复

```
psql -f db.out postgres 
```

`pg_dump`有一些压缩选项可以为您提供更小的文件。我有一个生产数据库，我每天使用 cron 作业备份两次

```
pg_dump --create --format=custom --compress=5 --file=db.dump mydatabase 
```

其中`compress`是压缩级别（0 到 9）并`create`告诉`pg_dump`添加命令以创建数据库。使用恢复（或移动到新集群）

```
pg_restore -d newdb db.dump 
```

其中 newdb 是您要使用的数据库的名称。

# 其他需要考虑的事情

PostgreSQL 使用 ROLES 来管理权限。这些不被复制`pg_dump`。此外，我们还没有处理**postgresql.conf**和**pg_hba.conf**中的设置（如果您要将数据库移动到另一台服务器）。您必须自己弄清楚conf设置。但是我刚刚发现了一个用于备份角色的技巧。角色在集群级别进行管理，您可以使用命令行开关要求`pg_dumpall`仅备份角色。`--roles-only`

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2013-01-09T14:42:18.780

对于那些仍然感兴趣的人，我想出了一个 bash 脚本，它（或多或少）做了作者想要的。我必须在生产系统上制作日常业务数据库副本，这个脚本似乎可以解决问题。请记住更改数据库名称/用户/密码值。

```
#!/bin/bash

if [ 1 -ne $# ]
then
  echo "Usage `basename $0` {tar.gz database file}"
  exit 65;
fi

if [ -f "$1" ]
then
  EXTRACTED=`tar -xzvf $1`
  echo "using database archive: $EXTRACTED";
else
  echo "file $1 does not exist"
  exit 1
fi

PGUSER=dbuser
PGPASSWORD=dbpw
export PGUSER PGPASSWORD

datestr=`date +%Y%m%d`

dbname="dbcpy_$datestr"
createdbcmd="CREATE DATABASE $dbname WITH OWNER = postgres ENCODING = 'UTF8' TABLESPACE = pg_default LC_COLLATE = 'en_US.UTF-8' LC_CTYPE = 'en_US.UTF-8' CONNECTION LIMIT = -1;"
dropdbcmp="DROP DATABASE $dbname"

echo "creating database $dbname"
psql -c "$createdbcmd"

rc=$?
if [[ $rc != 0 ]] ; then
  rm -rf "$EXTRACTED"
  echo "error occured while creating database $dbname ($rc)"
  exit $rc
fi

echo "loading data into database"
psql $dbname < $EXTRACTED > /dev/null

rc=$?

rm -rf "$EXTRACTED"

if [[ $rc != 0 ]] ; then
  psql -c "$dropdbcmd"
  echo "error occured while loading data to database $dbname ($rc)"
  exit $rc
fi

echo "finished OK" 
```

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2012-05-25T03:15:32.857

PostgreSQL 9.1.2：

```
$ CREATEDB new_db_name -T orig_db_name -O db_user; 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2014-11-21T13:29:22.183

创建数据库转储

```
cd /var/lib/pgsql/
pg_dump database_name> database_name.out 
```

重新设置数据库转储

```
psql -d template1
CREATE DATABASE database_name WITH  ENCODING 'UTF8' LC_CTYPE 'en_US.UTF-8' LC_COLLATE 'en_US.UTF-8' TEMPLATE template0;
CREATE USER  role_name WITH PASSWORD 'password';
ALTER DATABASE database_name OWNER TO role_name;
ALTER USER role_name CREATEDB;
GRANT ALL PRIVILEGES ON DATABASE database_name to role_name;

CTR+D(logout from pgsql console)
cd /var/lib/pgsql/

psql -d database_name -f database_name.out 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2013-08-06T14:59:46.717

如果数据库有打开的连接，这个脚本可能会有所帮助。我每天晚上都使用它从实时生产数据库的备份中创建一个测试数据库。这假设您有一个来自生产数据库的 .SQL 备份文件（我在 webmin 中执行此操作）。

```
#!/bin/sh

dbname="desired_db_name_of_test_enviroment"
username="user_name"
fname="/path to /ExistingBackupFileOfLive.sql"

dropdbcmp="DROP DATABASE $dbname"
createdbcmd="CREATE DATABASE $dbname WITH OWNER = $username "

export PGPASSWORD=MyPassword

echo "**********"
echo "** Dropping $dbname"
psql -d postgres -h localhost -U "$username" -c "$dropdbcmp"

echo "**********"
echo "** Creating database $dbname"
psql -d postgres -h localhost -U "$username" -c "$createdbcmd"

echo "**********"
echo "** Loading data into database"
psql -d postgres -h localhost -U "$username" -d "$dbname" -a -f "$fname" 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2013-11-06T15:39:26.913

使用 pgAdmin，断开要用作模板的数据库。然后选择它作为创建新数据库的模板，这样可以避免出现已经在使用的错误。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-01-30T16:01:10.720

如果要复制整个架构，可以使用以下命令创建 pg_dump：

`pg_dump -h database.host.com -d database_name -n schema_name -U database_user --password`

当您想导入该转储时，您可以使用：

`psql "host=database.host.com user=database_user password=database_password dbname=database_name options=--search_path=schema_name" -f sql_dump_to_import.sql`

有关连接字符串的更多信息：[https ://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING](https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING)

或者然后将其组合在一个衬里中：

```
pg_dump -h database.host.com -d postgres -n schema_name -U database_user --password | psql "host=database.host.com user=database_user password=database_password dbname=database_name options=--search_path=schema_name” 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-04-18T16:32:44.743

1.  在 pgAdmin 中打开主窗口，然后打开另一个查询工具窗口
2.  在 pgAdmin 的主窗口中，

断开要用作模板的“模板化”数据库。

3.  转到查询工具窗口

运行 2 个查询，如下所示

```
SELECT pg_terminate_backend(pg_stat_activity.pid) 
    FROM pg_stat_activity 
    WHERE pg_stat_activity.datname = 'TemplateDB' AND pid <> pg_backend_pid(); 
```

（上面的 SQL 语句将终止与 TemplateDB 的所有活动会话，然后您现在可以选择它作为模板来创建新的 TargetDB 数据库，这样可以避免出现已经在使用的错误。）

```
CREATE DATABASE 'TargetDB'
  WITH TEMPLATE='TemplateDB'
       CONNECTION LIMIT=-1; 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-09-01T16:07:25.717

pgAdmin4：

1.选择要复制的数据库并断开连接

> 右键单击“断开数据库”

2.在旧数据库旁边创建一个新数据库：

*   给它一个名字。
*   在“定义”选项卡中选择第一个表作为**模板**（下拉菜单）

点击创建，然后左键单击新数据库以重新连接。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2021-11-02T06:24:28.797

新版本的 pgAdmin（肯定是 4.30）支持从模板创建新数据库。您需要填充的只是新的数据库名称和现有的模板数据库。

[![在此处输入图像描述](https://i.stack.imgur.com/bjtXp.png)](https://i.stack.imgur.com/bjtXp.png)

* * *

## 回答 #21

> 赞同：-4
> 
> 时间：2013-12-16T16:18:53.600

试试这个：

```
CREATE DATABASE newdb WITH ENCODING='UTF8' OWNER=owner TEMPLATE=templatedb LC_COLLATE='en_US.UTF-8' LC_CTYPE='en_US.UTF-8' CONNECTION LIMIT=-1; 
```

GL XD

# spring - 在 Spring+Tiles2 应用程序中设置 HTML 头部标题的最佳方法？

> ID：876528
> 
> 赞同：3
> 
> 时间：2009-05-18T07:03:35.327
> 
> 标签：spring, layout, usability, tiles2

我在使用 Tiles 作为视图技术的 Spring webapp 中存在可用性问题。目前所有页面都显示相同`HEAD_TITLE`，并且`PAGE_TITLE`是特定于页面的：

```
 <html>
 <head><title>HEAD_TITLE</title></head>
 <body>
 <h1>PAGE_TITLE</h1>
 </body>
 </html> 
```

这是一个主要的可用性问题，因为浏览器历史记录列出了应用程序的所有不同页面并具有相同的标题。`HEAD_TITLE`所有页面都相同的原因是我还没有找到一种合理的方式来`PAGE_TITLE`使用`HEAD_TITLE`.

在大多数情况下，`PAGE_TITLE`它来自带有`<fmt:message />`标签的消息包，并且一些参数被传递给它。Tiles 布局`HEAD_TITLE`应该已经设置好了，因为 webapp 的所有页面都使用相同的通用布局，该布局定义了`<HEAD>`页面的元素以及其他内容。

有什么建议可以解决这个可用性问题吗？我是否应该在我的 Spring 控制器中为所有页面设置一个“pageTitle”请求属性并将其用作 the`PAGE_TITLE`和`HEAD_TITLE`? 或者是否有可能以某种方式在页面特定的 JSP 中设置 HEAD_TITLE？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-11-22T20:23:25.830

创建一个通用定义并定义 headTitle 和 pageTitle 属性。

```
<definition name="threeColumnLayout" template="/WEB-INF/ThreeColumnLayout.jsp" >
    <put-attribute name="headTitle" value="" />
    <put-attribute name="pageTitle" value="" />
    <put-attribute name="left" value="/WEB-INF/left.jsp" />
    <put-attribute name="middle" value="" />
    <put-attribute name="right" value="/WEB-INF/right.jsp" />
</definition> 
```

在更具体的定义中设置适当的值。

```
<definition name="/user/new" extends="threeColumnLayout">
    <put-attribute name="headTitle" value="Administration" />
    <put-attribute name="pageTitle" value="Create User" />
    <put-attribute name="middle" value="WEB-INF/views/UserCreate.jsp" />
</definition> 
```

使用`<tiles:getAsString />`标签在 jsp 页面中检索这些值。

```
<head>
    <title><tiles:getAsString name="headTitle"/></title>
</head>
<body>
    <h1>
        <title><tiles:getAsString name="pageTitle"/></title>
    </h1>
</body> 
```

参考：- [http://tiles.apache.org/framework/tiles-jsp/tagreference.html#tiles:getAsString](http://tiles.apache.org/framework/tiles-jsp/tagreference.html#tiles:getAsString)

# c# - WCF：使用 JSON 对 SOAP 消息体进行编码

> ID：876529
> 
> 赞同：0
> 
> 时间：2009-05-18T07:04:12.533
> 
> 标签：c#, .net, wcf, json, soap

我们有我们的服务的 SOAP 实现，到目前为止，我们有一些遗留代码包装我们的 args 并返回另一个对象，以绕过 RPC 方法上的一些序列化/泛型。

经过优化，我们实现了这个类，使其Json序列化（DataContractJsonSerializer）并GZip压缩我们复杂的请求参数和响应对象。

我现在想将这些东西下推到 WCF 堆栈中。我真正想要的是能够在标准 SOAP 服务上将消息体编码为 GZipped Json。我们需要事务支持和安全等，因此我们需要能够支持标准绑定。

我已经设法实现 Json 序列化的操作行为，以便消息信息集将包含 json 兼容的 XML。然后我想添加一个 MessageEncoder 将 xml 转换为消息正文中的 json。这是我有问题的地方。我无法序列化整个消息，因为我们仍然有标准的肥皂头等，并且 s:body 在 json 兼容的 xml 之前仍然包含根请求或响应对象。我想我可以使用 JsonReaderWriterFactory 只是不确定如何应用于消息的正确部分。

我知道如果我能弄清楚读写这个 Json 部分，我以后可以做 GZIP。

有任何想法吗？皮特

好的。所以一些澄清。

我的服务看起来像这样

```
[ServiceContract]
public interface IMyService {
  [OperationContract]
  Person SavePerson(Person personToSave);

  [OperationContract]
  Person GetPersons();
} 
```

GetPersons() 方法的输出如下所示：

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">
  <s:Header>
    <a:Action s:mustUnderstand="1">http://www.petegoo.com/wcf/MyService/IMyService/GetPersonsResponse</a:Action>
    <a:RelatesTo>urn:uuid:a18ccf1c-0793-4240-ba6f-9e86b6f2fdf6</a:RelatesTo>
  </s:Header>
  <s:Body>[{"DateOfBirth":"\/Date(286801200000+1300)\/","FirstName":"Foo","Id":1,"LastName":"Bar"},{"DateOfBirth":"\/Date(333720000000+1200)\/","FirstName":"Foo","Id":1,"LastName":"Bar"}]</s:Body>
</s:Envelope> 
```

注意：以上内容是临时的，因此在语法或语义上可能不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T08:59:03.607

我的理解是您喜欢将 JSON 嵌入到 SOAP 中的 XML 信息集中吗？编写一些您想要实现的示例请求和响应会更容易。

我看不出将 JSON 信息集与 XML 信息集共存的充分理由。但是，您可以将 JSON 数据作为 SOAP 中 XML 元素/属性的字符串值返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T08:07:53.973

啊！！才知道这是多少岁。将离开这里，以防它适用于其他任何人。

我自己对这一切都很陌生，但作为一个建议，你有没有试过调查`MessageInspectors`？您可以在WCF 发送 SOAP 消息之前和之后将它们添加到`clientRuntime`和“播放”它们。`dispatchRuntime`

通过实现`IDispatchMessageInspector`和/或`IClientMessageInspector`您可以在发送消息之前收到一个调用，读取当前的soap消息xml，更改body元素的内容以包含您的压缩内容（可能将其添加为新的子节点），然后重新构建消息并将其传递回 WCF 以发送出去。在接收端，您再次获取消息`AfterReceiveRequest`并反转该过程。

不知道这是否对您有用，但希望对您有所帮助。W

# iphone - 退出 iPhone 应用程序时黑色状态栏变为白色

> ID：876530
> 
> 赞同：4
> 
> 时间：2009-05-18T07:04:16.933
> 
> 标签：iphone

通过将 UIStatusBarStyleOpaqueBlack / UIStatusBarStyle 添加到 Info.plist 文件中，我为我的 iPhone 应用程序提供了一个黑色状态栏。它大部分时间都很好用。黑色状态栏显示应用程序何时运行以及 Default.png 何时显示。

问题是当我按下主页按钮退出应用程序时，状态栏变成一个白色块，而 iPhone 的标准退出动画正在发生。我还没有看到任何其他使用黑色状态栏的应用程序存在这个问题。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-18T10:07:26.667

将窗口的背景颜色设置为黑色。

```
[self.view.window setBackgroundColor:[UIColor blackColor]]; 
```

# javascript - window.opener.focus() 在 IE 中失败，在 FireFox 中有效

> ID：876533
> 
> 赞同：1
> 
> 时间：2009-05-18T07:05:56.180
> 
> 标签：javascript, html, window.opener

当我调用 opener.focus() 方法时，我遇到了 IE 无法调出开启器窗口的问题

window.opener.focus(); //**之后，子窗口留在前面。**

* * *

**html1.htm**文件：

```
<script type="text/javascript" language="JavaScript"><!--
function toCompare() {
    wCompare = window.open("html2.htm", "wCompare", "width=800,height=600,resizable=yes,directories=no,status=no,toolbar=no,menubar=0,location=no,scrollbars=yes");
    wCompare.focus();
};
//--></script>
</head>
<body>

<a href="javascript://" onClick="toCompare();">open child window</a>

</body> 
```

* * *

**html2.htm**

```
<script type="text/javascript" language="JavaScript"><!--
      function show_Parent(url) {
          window.opener.location.href = url;
          window.opener.focus(); // After that, child window stay in front.
       }
    //--></script>
</head>
<body>

<a onclick="return show_Parent('html3.htm');">go back to parent window</a>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T12:57:49.117

这对我来说很好，但我看到了类似的行为。尝试在父页面中创建一个函数来获取它自己的焦点并更改 URL

**html1.htm**

```
function focusAndGo(url) {
   window.focus();
   // EDIT: changed document.location.href= to window.location.href=
   // Reference:
   // https://developer.mozilla.org/En/Document.location
   // document.location was originally a read-only property,
   // although Gecko browsers allow you to assign to it as well.
   // For cross-browser safety, use window.location instead.
   window.location.href=url;
   } 
```

并从**html2.htm调用它**

```
window.opener.focusAndGo(url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T07:21:10.667

尝试先模糊当前窗口，也许会有所帮助。

```
window.blur();
window.opener.focus(); 
```

# c# - 通过指定文化名称设置日期格式 yyyyMMdd

> ID：876534
> 
> 赞同：1
> 
> 时间：2009-05-18T07:06:24.167
> 
> 标签：c#, asp.net, date, format, culture

我想使用文化名称设置用户日期格式 yyyyMMdd。必须指定哪个文化名称才能完成此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-18T08:35:04.357

*您可以使用 CultureAndRegionInfoBuilder 类（在程序集sysglobl*中）创建自己的文化。但这可能对您的需要有点过分...

另一个更简单的解决方案：根据当前文化创建一个 CultureInfo 的新实例，并为其分配一个自定义 DateTimeFormatInfo ：

```
DateTimeFormatInfo dtfi = new DateTimeFormatInfo();
dtfi.ShortDateTimePattern = "yyyyMMdd";
CultureInfo ci = new CultureInfo(CultureInfo.CurrentCulture.Name);
ci.DateTimeFormat = dtfi; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-18T07:10:50.073

为什么不使用格式说明符？

```
string s = DateTime.Today.ToString("yyyyMMdd"); 
```

我不知道有任何使用此说明符的预卷文化。你也许可以推出自己的文化？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T09:35:23.497

此[链接](http://www.codeproject.com/Articles/27053/Culture-Specific-Number-Formatting-in-ASP-NET)可能会帮助您了解数字和日期时间格式以及特定于文化的格式覆盖。它基本上通过修改[msdn 代码示例](http://msdn.microsoft.com/en-us/library/1ksz8yb7.aspx)来演示它：

# algorithm - 采访 qns...在没有任何条件或比较运算符的情况下执行以下操作

> ID：876550
> 
> 赞同：4
> 
> 时间：2009-05-18T07:14:06.090
> 
> 标签：algorithm, math

在没有任何条件或比较运算符的情况下执行以下操作。

```
if (Number <= 0)
{
    Print '0';
}
else
{
    print Number;
} 
```

谢谢..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-18T07:17:12.480

我原来的简单解决方案：

```
1\. print( (abs(Number)+Number) / 2 ) 
```

该解决方案在大多数情况下都有效，除非 Number 非常大（超过最大值的一半，例如 Number >= MAX_INT/2），在这种情况下，添加可能会导致溢出。

以下解决方案解决了溢出问题：

```
2\. print( (abs(Number)/2) + (Number/2) ) 
```

但是，可能存在 Number 是并且必须保持整数的情况，并且除法运算符 (/) 是整数除法，因此 7/2=3。在这种情况下，解决方案 2 将不起作用，因为如果 Number=7 它将打印 6（对于这种情况，解决方案 1 可以正常工作）。

因此，如果我们需要同时处理大数和整数运算，下面的怪物来拯救，增加对奇数情况下除以 2 时可能丢失的 1 的补偿：

```
3\. print( 
    ( (abs(Number)/2)+(Number/2) ) +
    ((
        (Number-(2*(Number/2))) + 
        (abs(Number)-(2*(abs(Number)/2)))
    ) / 2)
    ) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-18T07:17:08.753

```
print max(0, number) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-18T09:16:29.310

假设该数字由一个 8 位二进制补码整数表示。

包括 0 在内的正数都将 MSB 设置为 0。

负数都将 MSB 设置为 1。

所以我们取 MSB 的补码，将其扩展到完整的 8 位，并与原始数字按位与它，例如

积极的：

00110101 -> MSB 为 0

11111111 -> 扩展 MSB 的补码

00110101 -> 上述按位与

消极的：

10110101 -> MSB 为 1

00000000 -> 扩展 MSB 的补码

00000000 -> 上面的按位与

不需要比较 - 我有点假设按位 AND 不是严格的比较。

另外，很抱歉缺少代码，但你明白了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T08:16:07.717

我还没有看到对整个域有效的解决方案。

另一种解决方案是，如果输入值为 0 或低于 0，则调用引发异常的函数。然后捕获异常并打印 0。

或者您可以使用函数Sign，如果输入<0，则返回-1，如果输入为0，则返回0，否则返回1。

```
print ((sign(x)+1) * sign(x) / 2) * x. 
```

sign 可以是 -1、0 或 1，因此 ((sign(x)+1) * sign(x) / 2) 可以具有以下值：

```
-1 -> ((-1+1)*-1)/2 = 0
 0 -> ((0+1)*0)/2 = 0
 1 -> ((1+1) * 1)/2  = 1 
```

另一种方法是创建一个查找表，将所有非负数映射到它们自己，其余的映射到 0。

但是，在我看来，原来的功能要清晰得多。那么为什么要违反KISS原则。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-23T05:47:24.613

类似于接受的答案。虽然在使用比较实现绝对值的情况下可以接受，但也更容易溢出：

print((sqrt(数字 * 数字) + x) / 2);

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-05-18T07:40:32.287

假设 C 或 C++：

```
switch ((unsigned long)Number & ~(unsigned long)LONG_MAX) {
    case 0:
        printf("%d\n", Number);
        break;
    default:
        printf("0\n", Number);
        break;
} 
```

如果您认为 switch 是一个条件运算符，那么试试这个：

```
unsigned long flag = (unsigned long)Number & ~(unsigned long)LONG_MAX;
flag /= (unsigned long)LONG_MAX + 1;
flag = 1 - flag;
printf("%d\n", Number * flag); 
```

# c# - C#/C++ pInvoke 提示

> ID：876553
> 
> 赞同：4
> 
> 时间：2009-05-18T07:14:35.247
> 
> 标签：c#, c++, .net, pinvoke, windows-mobile

从 C#.NET CF 修改要与 pInvoke 一起使用的 C++ 程序的最佳方法是什么？

我有一个广泛使用 STL 的大型 C++ 代码库。即迭代器、容器类和标准字符串。

除此之外，许多轻量级类都是按值传递的。

我想在这个代码库上为 Windows 移动触摸设备构建一个 C# gui。

这值得么？

我已经设法获得了一些使用 pInvoke 从 C#.NET 调用 C++ 代码的示例，但是为每个访问点和所有 STL 返回类型编写包装器似乎非常令人生畏和丑陋。还有其他方法还是我有点吃饱了？

顺便提一句。托管 C++ 不是一个选项，因为 .NET CF 不以任何形式支持它。

--edit：我有一个关于 pinvoke 的具体问题。

假设您有一个按值返回 C++ 字符串的函数

```
std::string foo () {
   return std::string ("Hi");
} 
```

我知道不可能使用 pinvoke 从 C# 调用此函数，因为无法编组 STL 字符串，但我的问题是我什至无法在不分配新数组的情况下编写包装器，因为返回的 std::string 不是在堆上。

```
char* foo2 () {
   return foo().c_str(); //Very bad
   //the returned pointer is released when the std::string falls out of scope.
   //and will be invalid before the caller is able to do anything with it.
} 
```

所以我的问题是，如何将 foo 包装成 pInvoke 合适的格式，而不需要重新分配整个字符串。

```
char* foo2 () {
   std::string f = foo();
   char* waste = new char[f.length()+1];
   strcpy (waste, f.c_str());
   return f;
} 
```

对需要返回 std::string 的每个点执行上述操作的想法足以让我放弃尝试使用 C#。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T19:43:28.123

我个人会说这是值得的，但我同意另一篇文章，这并不容易。

可能的方法可能是：

1.  围绕 C++ 的 C 接口并作为 DLL 公开。
2.  COM 对象（尽管 WM 不支持 COM 服务器，因此您不得不使用进程内服务器，基本上是 DLL COM 实现）。这将为您提供更多的 OO 界面。
3.  暴露某种 API 的后台进程。您可以使用“CE 服务”模式或提出自己的 API。

一切皆有可能，各有利弊。无论做什么，都不能在界面中使用 STL 类型。您已简化为易于在进程之间编组的简单基本类型。既然你在谈论 C#，那么 COM 可能会因为你可以暴露 OO 接口而去。

我建议尽量保持两者之间的界面尽可能简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T20:08:07.967

你想做的事情一点都不容易。如果你*真的*想这样做，最好的办法是创建一些干净的 C 接口，这些接口包含所有 C++ 和 STL 内容，并传递可以很好地从 .net 传递到 C 的结构。根据您拥有的代码库有多大，这可能是一项非常困难的任务。

对不起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T07:23:32.643

也许您应该编写一个 com 包装器，然后使用 .net 工具自动为您创建 c# 程序集？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-07-22T01:58:21.243

SWIG 不会为您创建 C++ 的 C 风格包装器吗？就像处理复杂 c++ 的所有非基础知识一样？如果我错了，请纠正我，因为我处于类似的情况，我想包装一个暴露在 dll 中的非常大且复杂的 C++ api。我需要通过编写 C 风格来避免重整和非基本数据类型包装器在 Pinvoking 之前公开所有内容，鉴于 api 的大小以及类型和原型的复杂性，如果没有自动化工具是不可行的。

# c - Microsoft SDL 和 memcpy 弃用

> ID：876557
> 
> 赞同：10
> 
> 时间：2009-05-18T07:17:27.783
> 
> 标签：c, security, memcpy

正如你们中的一些人可能知道的那样，[微软禁止`memcpy()`了他们的安全开发生命周期](http://blogs.msdn.com/sdl/archive/2009/05/14/please-join-me-in-welcoming-memcpy-to-the-sdl-rogues-gallery.aspx)，取而代之的是`memcpy_s()`.

```
void *memcpy(void *dest, const void *src, size_t n);

/* simplified signature */
errno_t memcpy_s(void *dst, size_t dstsize, const void *src, size_t n); 
```

因此，如果您的代码曾经是：

```
if (in_len > dst_len) {
    /* error */
}
memcpy(dst, src, in_len); 
```

它成为了：

```
if (memcpy_s(dst, dst_len, src, src_len)) {
    /* error */
} 
```

或者，通过截断，

```
memcpy(dst, src, min(in_len, dst_len)); 
```

对比

```
(void)memcpy_s(dst, dst_len, src, src_len); 
```

问题：额外的长度参数如何使代码更安全？要使用`memcpy()`，我应该已经知道所有四个参数，并将适当的长度作为第三个参数传递。是什么阻止我犯同样的错误，即错误计算目标缓冲区大小并传递错误的值`dst_size`？我不明白为什么它与它有任何不同`memcpy()`以及为什么它被弃用。有什么我看不到的常见用例吗？**我在这里想念什么？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-18T07:26:52.730

没有什么能阻止您在“安全”版本中获取错误的参数。微软似乎认为你总是会使用类似的东西：

```
errno_t e = memcpy_s (&dstbuff, sizeof(dstbuff), &srcbuff, sizeof(srcbuff)); 
```

并检查错误。

但这只会帮助那些不知道自己在用这种语言做什么的人。在我看来，这群人要么不应该使用这种语言，要么应该学习它是如何正常工作的。

从长远来看，这种拐杖对他们没有任何好处，因为他们的代码不可移植。

现在可能是微软做了一些分析，发现有很多人滥用造成的问题`memcpy()`，他们认为这样可以解决问题。但是，如果是这种情况，我怀疑更好的解决方案是教育开发人员，而不是强迫他们使用标准编译器中不可用的非标准功能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-18T08:27:13.047

重复信息总是不好的设计——它只会给你更多出错的机会。微软在 API 设计方面有着令人震惊的记录，并且过去仅靠其卓越的文档才得以保存。令人欣慰的是，他们无法删除原始的 memcpy() 函数——它是 ANSI C 的一部分。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-18T07:34:31.253

你完全正确。如果您要跟踪两个缓冲区的长度，则 memcpy 可以安全使用。如果你不是， memcpy_s 不会救你。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-18T07:25:17.023

你没有遗漏任何东西，我认为你链接到的文章中的这个片段几乎涵盖了它：

> 如果不出意外，memcpy_s 会让您考虑目标缓冲区的大小。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T07:38:10.903

根据微软的说法，这将使编写代码质量检查变得更容易一些 - 您可以检查以确保程序员不会将相同的值传递给两个大小参数（许多人可能仍然会因为懒惰而这样做）。另一件事（实际上与代码安全性无关）是您可以使用此方法稍微清理您的代码，因为在您的代码中要做的检查较少 - 该`memcpy_s`函数将为您检查是否有足够的空间目标缓冲区，消除您的一项检查。

最重要的是，`memcpy_s`返回一个错误代码，指示整个复制是否成功，但`memcpy`没有办法确定这一点。 *这*就是微软认为`memcpy_s`比`memcpy`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-10-25T16:53:48.760

C like assembly is for people that know what they are doing, I remember to read something like that direcly from K&R

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-07-24T11:16:35.830

有时我真的不以为然，世界上真正的程序员已经不多了，他们看到了机器的本来面目并喜欢四处移动。我知道有点离题，但我想确切地知道发生了什么，并且绝对不希望任何蹩脚的垃圾收集器在后台拼命地试图整理草率的程序员乱七八糟的堆。我的意思是，将 free() 的调用与 malloc()/strdup() 的调用相匹配有多难，确保分配足够的缓冲区空间以便知道可以安全地调用 memcpy() 有多难？回答：不是，但 99.9% 的程序员真的不在乎他们在做什么，因为他们只是为了钱，而不是为了写一段优美的代码。

结束咆哮。

# javascript - 提供 JavaScript 文件时，使用 application/javascript 还是 application/x-javascript 更好

> ID：876561
> 
> 赞同：103
> 
> 时间：2009-05-18T07:18:03.230
> 
> 标签：javascript, http, content-type

整个问题符合标题。并添加一些上下文：我不是在问根据规范所说什么是最好的，而是考虑到当今部署的浏览器组合，什么是最好的。

一些数据点：

*   Google 使用`text/javascript`其主页上使用的 JS。
*   谷歌`text/javascript`在谷歌文档上使用。
*   Google 使用`application/x-javascript`其[Ajax 库服务](http://code.google.com/apis/ajaxlibs/)来提供 JavaScript 文件。
*   雅虎`application/x-javascript`用来服务他们的 JS。
*   雅虎`application/x-javascript`在其主页上使用 JavaScript。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2009-05-18T09:06:11.173

根据截至 2021 年 2 月 22 日的 IETF 的[ECMAScript 媒体类型更新，](https://datatracker.ietf.org/doc/draft-ietf-dispatch-javascript-mjs/) [RFC-4329](https://www.rfc-editor.org/rfc/rfc4329)已过时。

所以：

*   `text/javascript`是推荐标准（IETF 和 MDN 都推荐）
*   `application/x-javascript`在决定搬到……时是实验性的。</li>
*   `application/javascript`已过时

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-18T07:29:00.607

在大多数情况下，服务器发送的 mime 类型没有实际区别。我会选择[application/javascript](http://www.rfc-editor.org/rfc/rfc4329.txt)，这也是 RFC 推荐的。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2020-01-16T17:27:51.483

这是这个问题的 2020 年答案。

`text/javascript`[是根据HTML Standard](https://html.spec.whatwg.org/multipage/scripting.html#scriptingLanguages:javascript-mime-type)的正确 JavaScript MIME 类型，其中指出：

> 服务器应该使用`text/javascript`JavaScript 资源。服务器不应将其他 JavaScript MIME 类型用于 JavaScript 资源，并且不得使用非 JavaScript MIME 类型。

还有：[_](https://html.spec.whatwg.org/multipage/infrastructure.html#dependencies:willful-violation)

> […] 在本规范中用于指代 JavaScript 的 MIME 类型是`text/javascript`，因为这是最常用的类型，尽管根据 RFC 4329 它是正式过时的类型。

在 IETF 级别的 RFC 中反映这一现实的工作正在进行中：[https ://datatracker.ietf.org/doc/draft-ietf-dispatch-javascript-mjs/](https://datatracker.ietf.org/doc/draft-ietf-dispatch-javascript-mjs/)

任何声称“`text/javascript`已过时”的说法都是基于 RFC 4329，HTML 标准和上述 IETF 草案（即即将发布的 RFC）都在明确纠正。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2011-01-18T17:56:09.363

如果您在页面中选择使用 application/javascript for js，IE7 和 IE8 将不会运行您的脚本！随便责怪微软，但如果你想让大多数人运行你的页面，请使用 text/javascript。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-09-28T03:08:26.320

它曾经是`language="javacript"`。然后它变成了`type="text/javascript"`。现在是`type="application/javacript"`。好的，这变得愚蠢。一些较旧的浏览器不能识别新的`application/javascript`，但仍能识别旧的`text/javascript`。我打算继续使用它，否则我将浪费数小时的时间尝试将每个实例更改`text/javascript`为`application/javascript`.
现在有一天，情况可能正好相反。有一天，最新的浏览器可能会拒绝旧技术，以严格遵守标准。
但是，直到浏览我网站的人开始抱怨“自从升级我的浏览器后，您的网站大约有 50% 消失了”，我才没有动机更改我网站中的代码。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-18T07:53:16.010

它一直是“text/javascript”，但已经过时（参见[IANA 列表](http://www.iana.org/assignments/media-types/text/)），现在应该是“应用程序/javascript”（参见[另一个 IANA 列表](http://www.iana.org/assignments/media-types/application/)）。

# c# - 使用 C# 在 VS2005 中的窗口应用程序中集成 Nunit

> ID：876566
> 
> 赞同：0
> 
> 时间：2009-05-18T07:18:53.273
> 
> 标签：c#, nunit

我正在使用 C# 在 VS2005 中开发一个**窗口应用程序。**我需要将 NUnit 集成到我的项目中。主要是我需要实现 NUint 中可用的“执行”选项。我怎样才能做到这一点。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T07:21:58.107

[TestDriven.Net](http://testdriven.net/)是 Vs2005 中的一个 .Net 插件，它将帮助您实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T07:35:27.427

听起来你想从你的 exe 运行 NUnit？

除非您遇到很多麻烦，否则在我看来最好的选择是将 NUnit 控制台 exe（和 dll）包含在您的包中，并通过执行`Process.Start`、捕获 stdout（或写入文件，这可能更简单）。然后解析输出文件。

它可能不如 GUI 版本漂亮，但可能更容易部署。

# linq-to-sql - Linqtosql - 查找与查询中所有标签匹配的所有实体

> ID：876574
> 
> 赞同：0
> 
> 时间：2009-05-18T07:23:51.613
> 
> 标签：linq-to-sql, distinct, tagging

我有经典的 3 表 - 实体、标签和实体标签 - 数据库结构。

为了找到所有标记有特定标签的实体，我使用以下 Linqtosql 代码：

```
string[] myTags = {"tag1","tag2"};

var query = from m in entity
            where m.entitytag.Where(c => myTags.Contains(c.tag.TagName)).Count() == myTags.Count()
            select m; 
```

但是，当实体具有重复的标签时（在我的真实应用中这是有正当理由的），查询会返回与所有标签不匹配的实体。

例如，在上面的代码示例中，如果一个实体被两次标记为“tag1”而不是“tag2”，它会在结果中返回，尽管两个标记都不匹配。

我不知道如何从结果中排除这些实体？

还是我应该采取完全不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T07:36:27.817

试试这个查询：

```
 string[] myTags = { "tag1", "tag2" };
                    var query = from m in entity
                                where myTags.All(tag => m.entitytag.Contains(tag))
                                select m;
                    query.Dump(); 
```

All 扩展方法将确保每个标签都满足包含条件。

对于只希望满足一个条件的情况，还有一种 Any 扩展方法。

希望能帮助到你。

卡万

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T07:33:42.937

怎么改成

```
where m.entitytag.Distinct().Where(c => ... 
```

这将从您的实体对象子集合中删除重复的实体标签，并允许您的计数正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T15:10:30.330

正如 Eoin 所建议的，需要使用 Distinct() 但它不适用于整个实体标签集。使用另一个 Select 语句仅与实际标签进行比较是这里的技巧。

```
 string[] myTags = {"tag1","tag2"};

    var query = from m in entity
    where m.entitytag.Select(et => et.tag.TagName).Distinct().Where(c => myTags.Contains(c)).Count() == myTags.Count()
    select m; 
```

不幸的是，不利的一面是这会在一定程度上损害性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-04T06:51:50.423

尝试

```
string[] myTags = { "tag1", "tag2" };

var query = from e in entity
            where !myTags.Except(from e.tag select e.tag.TagName).Any()
            select e; 
```

这个想法是从 myTags 的副本中删除实体的标签。之后留下的任何元素都对应于实体中缺少的标签。

不过，我不知道这是如何执行的。

# php - PHP表单设计最佳实践

> ID：876576
> 
> 赞同：8
> 
> 时间：2009-05-18T07:24:18.727
> 
> 标签：php

我使用 PHP 已经有一段时间了，我一直想知道如何表示单个表单来处理数据库的更新和插入。目前，我正在使用 2 个单独的表单来执行此操作，它们都具有基本相同的信息和文本框等。我知道有更好的处理方法，但我不确定那是什么。

我过去曾尝试使用单一表单，但与 php 混合的 html 看起来很糟糕，而且真的很难维护。我追求“干净”和整洁。

有人可以让我走上正确的轨道。

我必须使用的一件事是 POST 值，如果用户提交表单并且验证未通过，则刷新不应清除已输入的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T07:30:45.983

您可以使用单个表单，其中包含一个隐藏字段`id`。如果设置了此字段 - 那么您应该`$_POST['id']`使用表单的其余部分更新记录。如果该字段未设置（即它具有 value=""），则应将表单数据插入新记录。

您将`id`根据操作设置字段，例如`/data/edit/1`将`id`字段设置为`, and`/data/new` 不会为其设置值。

例如，您的视图可能是

```
<form action="/data/edit/1">
<input type="hidden" value="<?php echo $data->id; ?>" />
<input type="text" value="<?php echo $data->name; ?>" />
</form> 
```

如果有新记录，请使用以下数据调用您的视图

```
$data->id = '';
$data->name = ''; 
```

如果是已知记录，只需使用数据初始化`$data`对象

```
$data->id = $record_id;
$data->name = $record_name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T08:34:04.233

这就是我在不使用任何其他框架/库等的情况下可能会这样做的方式。这基本上是 Elazar Leibovich 所说的。

```
 <?php
    //id is zero or a record id depending on whether updating or inserting
    //an existing record could be edited using edit.php?id=10
    //if the id GET parameter is omitted a new record will be created
    $id = isset($_REQUEST['id']) ? (int) $_REQUEST['id'] : 0;
    $error = '';

    if ($id) {
        //this array would be in the same format as the one below
        $record = fetchRecordFromDb($id);    
    } else {
        $record = array( 'field1' => 'default value', 'field2' => 'some other default' );    
    }

    //allow POST data to override what is already in the form
    foreach ($record as $key => $value) {
        if (isset($_POST[$key])) {
            $record[$key] = $_POST[$key];
        }
    }

    if (isset($_POST['submit'])) {
        if (!validateForm()) {
            $error = 'Some form error';
        } else {
            if ($id) {
                updateRecord($id, $record);
            } else {
                insertRecord($record);
            }

            //ok, redirect somewhere else
            header('Location: http://somewhere');
            exit();
        }
    }

    ?>

    <form method="post">
       <?php echo $error; ?>
       <input type="hidden" name="id" value="<?php echo $id; ?>">
       <input type="text" name="field1" value="<?php echo htmlspecialchars($record['field1']); ?>"><br />
       <input type="text" name="field2" value="<?php echo htmlspecialchars($record['field2']); ?>"><br />
       <input type="submit" name="submit">
    </form> 
```

# php - 如何在空字体标签中插入字符串？

> ID：876580
> 
> 赞同：1
> 
> 时间：2009-05-18T07:26:55.943
> 
> 标签：php

如何在空字体标签中添加字符串？就像在第二个字体标签中没有值一样，我将只插入一个`<br />`标签。我怎样才能做到这一点？

我有这个 HTML 代码：

```
<P ALIGN="LEFT">
    <FONT FACE="Verdana" style="font-size:10" COLOR="#0B333C" LETTERSPACING="0" KERNING="0">
        Welcome to jQuery Course
    </FONT>
</P>
<P ALIGN="LEFT">
    <FONT FACE="Verdana" style="font-size:10" COLOR="#0B333C" LETTERSPACING="0" KERNING="0">
    </FONT>
</P>
<P ALIGN="LEFT">
    <FONT FACE="Verdana" style="font-size:10" COLOR="#0B333C" LETTERSPACING="0" KERNING="0">
        This is the jQuery Introduction content.
    </FONT>
</P> 
```

我喜欢输出是：

```
<P ALIGN="LEFT">
        <FONT FACE="Verdana" style="font-size:10" COLOR="#0B333C" LETTERSPACING="0" KERNING="0">
            Welcome to jQuery Course
        </FONT>
    </P>
    <P ALIGN="LEFT">
        <FONT FACE="Verdana" style="font-size:10" COLOR="#0B333C" LETTERSPACING="0" KERNING="0">
            <br />
        </FONT>
    </P>
    <P ALIGN="LEFT">
        <FONT FACE="Verdana" style="font-size:10" COLOR="#0B333C" LETTERSPACING="0" KERNING="0">
            This is the jQuery Introduction content.
        </FONT>
    </P> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T07:41:44.330

你不应该使用字体标签。

你可以

```
str_replace("></FONT>", ">$myinserttext</FONT>", $myhtml); 
```

在 PHP 或

```
$("font:empty").html("Sample Content"); 
```

在 jQuery 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T07:41:19.227

就像是

```
$("font:empty").html("My string");

or append:

$("font:empty").append("My string"); 
```

# sql-server - 通过在 SQL Server 2005 中为重复的列名添加前缀来获取重复的列名

> ID：876589
> 
> 赞同：0
> 
> 时间：2009-05-18T07:29:53.367
> 
> 标签：sql-server

如何在 SQL Server 2005 中编写存储过程，以便通过添加前缀来显示重复的列名？

示例：如果我将“其他”作为属于多个类别的列名，该列名映射到另一个表，其列为“MyColumn”、“YourColumn”。我需要加入这两个表，以便我的输出应该是“M_Others”和“Y_Others”。我可以使用一个案例，但我不确定表中是否有任何其他重复的列。如何动态编写以了解重复？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T07:54:51.157

如果不使用动态 SQL，则无法动态更改列名。

你必须明确地给它们起别名。在此查询中无法更改“A_Others”或“B_Others”：

```
SELECT
    A.Others AS A_Others,
    B.Others AS B_Others
FROM
    TableA A
    JOIN
    TableB B ON A.KeyCol = B.KeyCol 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T17:35:12.330

如果重复的列包含相同的数据（即它们是连接字段），则无论如何都不应该在查询中同时发送它们，因为这是一种不好的做法，并且会浪费服务器和网络资源。您不应该在生产查询中使用 select *，尤其是在存在连接的情况下。如果您正在正确编写 SQL 代码，那么当有两列具有相同名称但表示不同的事物时，您将使用别名（例如，如果您加入了两次 person 表，一次获取医生姓名，一次获取患者姓名）。从系统表动态执行此操作不仅效率低下，而且最终可能会给您带来很大的安全漏洞，具体取决于您编写代码的糟糕程度。您希望通过永久影响每个用户的性能并可能对数据安全性产生负面影响，在开发过程中节省五分钟或更短的时间。这就是数据库人们所说的坏事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T07:34:27.103

您应该在查询的投影中使用别名：（虚假示例，显示用法）

```
SELECT c.CustomerID AS Customers_CustomerID, o.CustomerID AS Orders_CustomerID
FROM Customers c INNER JOIN Orders o ON c.CustomerID = o.CustomerID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T12:23:24.690

select n.id_pk, (当 groupcount.n_count > 1 then substring(m.name, 1, 1) + '_' + n.name else n.name end) from test_table1 m
left join test_table2 n on m.id_pk = n.id_fk
left join (select name, count(name) as n_count from test_table2 group by name) groupcount on n.name = groupcount.name

# c# - 是否有标准的 C# 库，例如用于 java 的 Apache commons？

> ID：876597
> 
> 赞同：14
> 
> 时间：2009-05-18T07:35:49.410
> 
> 标签：c#

Php 有 PEAR，PERL 有 CPAN，Java 有 Appache commons。简短而简单：是否有一个可接受的 c# 扩展/食谱食谱库？

（如果完全重复，请随时关闭，我有点怀疑，但似乎没有找到它）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2010-01-28T06:35:45.123

是的，有一个类似于 Java Commons 的 C# Commons。

它相对较新，但相当不错。它是codeplex.com 上的[CommonLibrary.NET 。](http://commonlibrarynet.codeplex.com/)commonlibrarynet.codeplex.com/

我的公司混合使用 Java 和 C#。我现在同时使用 Java Commons 和 C# CommonLibrary.NET，到目前为止它还不错。它拥有 Java Commons 拥有的大部分（不是全部）相同组件以及其他一些组件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-18T07:39:10.963

不; 代码库有点分散。

显然有核心框架类（在所有不同的版本级别），但除此之外几乎没有共识...... codeplex 有许多有用的库，code.google.com 等 - 但你通常会从特定的社区项目中挑选特定的工具。

# objective-c - Objective-C中的字节数组

> ID：876598
> 
> 赞同：15
> 
> 时间：2009-05-18T07:36:14.463
> 
> 标签：objective-c, arrays, byte

如何在 Objective-C 中创建字节数组？

我有一些像这样的数据：`0x12, 0x23, 0x34, 0x45, 0x56, 0x67, 0x78, 0x89, 0x12, 0x23, 0x34, 0x45, 0x56, 0x67, 0x78, 0x89`，我想准备一个字节数组。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-05-18T07:56:45.210

您可以简单地使用 Objective-C 中提供的纯 C 语法：

```
const char myByteArray[] = {
    0x12,0x23,0x34,0x45,
    0x56,0x67,0x78,0x89,
    0x12,0x23,0x34,0x45,
    0x56,0x67,0x78,0x89 }; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-18T08:22:13.960

要么使用 mouviciel 给出的普通 C 解决方案，要么阅读[`NSData`](https://developer.apple.com/documentation/foundation/nsdata?language=objc)and的类描述[`NSMutableData`](https://developer.apple.com/documentation/foundation/nsmutabledata?language=objc)。

# java - 使用java nio套接字通道写入大数据的问题

> ID：876602
> 
> 赞同：-3
> 
> 时间：2009-05-18T07:37:58.750
> 
> 标签：java, nio

我可以使用 java nio 发送小数据。

但是如果我想发送一个非常大的数据，那么我的套接字通道就不能正常工作。

```
message = "very large data"+"\n";
ByteBuffer buf = ByteBuffer.wrap(message.getBytes());
int nbytes = channel.write(buf); 
```

所有数据都已发送。

我想从服务器读取数据，所以我使用 BufferedInputStreaReader.readLine(); 在这种情况下，我没有收到任何错误，我也无法检索我发送的任何数据

谢谢迪帕克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T08:11:27.290

```
write()

Returns:
The number of bytes written, possibly zero 
```

不保证写入你的整个 buf。你需要检查写了多少，然后再写一次。（可能还要等待（选择），直到您可以再次写入。）

您可能还应该搜索一个好的 java.nio 教程...如果您需要更简单的 api，请改用 java.io 中的阻塞 io...

# c# - c# 记事本

> ID：876603
> 
> 赞同：2
> 
> 时间：2009-05-18T07:38:00.123
> 
> 标签：c#

我是编程新手，我开始创建一个简单的记事本，只有 4 个按钮（打开、保存、新建和字体）。

如果我打开或保存我会收到一个错误：这是我的代码：

```
 //Declare save as a new SaveFileDailog
        SaveFileDialog save = new SaveFileDialog();
        //Declare filename as a String equal to the SaveFileDialog's FileName
        String filename = save.FileName;
        //Declare filter as a String equal to our wanted SaveFileDialog Filter
        String filter = "Text Files|*.txt|All Files|*.*";
        //Set the SaveFileDialog's Filter to filter
        save.Filter = filter;
        //Set the title of the SaveFileDialog to Save
        save.Title = "Save";
        //Show the SaveFileDialog
        if (save.ShowDialog(this) == DialogResult.OK)
        {
            //Write all of the text in txtBox to the specified file
            System.IO.File.WriteAllText(filename, textBox1.Text);
        }
        else
        {
            //Return
            return;
        }//Declare save as a new SaveFileDailog
        SaveFileDialog save = new SaveFileDialog();
        //Declare filename as a String equal to the SaveFileDialog's FileName
        String filename = save.FileName;
        //Declare filter as a String equal to our wanted SaveFileDialog Filter
        String filter = "Text Files|*.txt|All Files|*.*";
        //Set the SaveFileDialog's Filter to filter
        save.Filter = filter;
        //Set the title of the SaveFileDialog to Save
        save.Title = "Save";
        //Show the SaveFileDialog
        if (save.ShowDialog(this) == DialogResult.OK)
        {
            //Write all of the text in txtBox to the specified file
            System.IO.File.WriteAllText(filename, textBox1.Text);
        }
        else
        {
            //Return
            return;
        } 
```

任何的想法？谢谢并恭祝安康

ooopss 我忘了写错误对不起：这是错误：“错误：ArgumentException 未处理。空路径名不合法”

如果我打开一个文本文件，我会得到这个。然后它突出显示了这一行代码： textBox1.Text=System.IO.File.ReadAllText(filename,System.Text.Encoding.Default);

如果我保存什么都不会发生。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-18T07:42:29.133

我希望您应该在用户使用对话框*后读取文件名：*

```
System.IO.File.WriteAllText(save.FileName, textBox1.Text); 
```

也 -`SaveFileDialog`是`IDisposable`，所以你应该是“ `using`”它......

```
using (SaveFileDialog save = new SaveFileDialog())
{
    // your code that involves "save"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T07:44:21.547

尝试移动线路

```
String filename = save.FileName; 
```

在 IF 块内。您在用户设置 SaveDialog 的属性*之前分配给文件名。*您需要了解此行不会在您的`filename`变量和`FileName`对话框的属性之间创建永久链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T07:42:50.880

调用 ShowDialog**后，**您从 SaveFileDialog 获取文件名。您正在预先设置文件名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T07:44:45.853

好吧，看起来您正在使用空白文件名进行保存 - 这在调用 .ShowDialog() 期间会发生变化，因此您事先检索它并没有帮助。
您只需要在.ShowDialog 之后再次拉出.FileName。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-07T17:39:30.227

//声明私有 int docno //声明私有字符串文件名 //声明私有 bool modified=false;

```
 if (modify == true)
            {

                //this.Text = filename;

                filename = saveFileDialog1.FileName;
                sw = new StreamWriter(filename);
                sw.Write(textBox1.Text);

                sw.Close();
                //modify = false;

            }

        else
            {
                saveFileDialog1.FileName = "Untitled" + docno.ToString() + ".txt";
                dresult = saveFileDialog1.ShowDialog();
                docno++;
            } 
```

# c - 多个子进程

> ID：876605
> 
> 赞同：19
> 
> 时间：2009-05-18T07:38:33.943
> 
> 标签：c, fork, child-process

有人可以帮助我了解如何创建具有相同父级的多个子进程以完成特定工作的“某些”部分吗？

例如，应用于子进程的外部排序算法；每个子进程对一部分数据进行排序，最后父进程合并它们。

编辑：也许我应该提到带有循环的分叉多个子进程..

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-05-18T08:07:19.187

以下是如何分叉 10 个孩子并等待他们完成：

```
pid_t pids[10];
int i;
int n = 10;

/* Start children. */
for (i = 0; i < n; ++i) {
  if ((pids[i] = fork()) < 0) {
    perror("fork");
    abort();
  } else if (pids[i] == 0) {
    DoWorkInChild();
    exit(0);
  }
}

/* Wait for children to exit. */
int status;
pid_t pid;
while (n > 0) {
  pid = wait(&status);
  printf("Child with PID %ld exited with status 0x%x.\n", (long)pid, status);
  --n;  // TODO(pts): Remove pid from the pids array.
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-18T08:07:41.463

我认为值得指出为什么线程在这里更合适：

当您尝试并行完成工作的“一部分”时，我假设您的程序需要了解计算结果。进程的 fork() 共享的信息不超过 fork() 之后的初始信息。一个进程中的每一次更改都不为另一个进程所知，您需要将信息作为消息传递（例如，通过管道，请参阅“man pipe”）。进程中的线程共享相同的地址空间，因此能够操作数据并使它们“立即”彼此可见。还增加了更轻量级的好处，我会选择 pthreads()。

毕竟：如果您仍然使用 pthread，您将了解有关 fork() 的所有知识。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-18T07:48:58.140

你可以用[fork](http://www.opengroup.org/onlinepubs/000095399/functions/fork.html)做到这一点。给定的父母可以根据需要进行分叉。不过，我同意 AviD [pthreads](https://computing.llnl.gov/tutorials/pthreads/)可能更合适。

```
pid_t firstChild, secondChild;
firstChild = fork();
if(firstChild > 0)
{
  // In parent
  secondChild = fork();
  if(secondChild > 0)
  {
    // In parent
  }
  else if(secondChild < 0)
  {
    // Error
  }
  else
  {
    // In secondChild
  }
}
else if(firstChild < 0 )
{
  // Error
} 
else
{
  // In firstChild
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-13T09:23:46.000

如果要启动多个分叉，则应递归执行。这是因为您必须从父进程调用 fork。否则，如果您启动第二个分叉，您将复制父进程和第一个子进程。这是一个例子：

```
void forker(int nprocesses)
{
    pid_t pid;

    if(nprocesses > 0)
    {
        if ((pid = fork()) < 0)
        {
            perror("fork");
        }
        else if (pid == 0)
        {
            //Child stuff here
            printf("Child %d end\n", nprocesses);
        }
        else if(pid > 0)
        {
            //parent
            forker(nprocesses - 1);
        }
    }
} 
```

# asp.net-mvc - 如何在 asp.net MVC 中将数据导出为 pdf？

> ID：876609
> 
> 赞同：1
> 
> 时间：2009-05-18T07:39:36.157
> 
> 标签：asp.net-mvc, pdf

我在使用 asp.net MVC 时没有网格视图。

那么我可以创建将数据写入pdf格式的响应对象吗

```
Response.AddHeader("Content-Disposition", "attachment; filename=data.pdf");
Response.ContentType = "application/.pdf"; 
```

我使用这两行但我不知道我应该以哪种格式写入数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T08:03:14.183

你必须使用像[iTextSharp](http://itextsharp.sourceforge.net/)这样的 pdf 库。只是做一个谷歌搜索。[我通常使用报告查看器控件](http://www.gotreportviewer.com/)（客户端模式）即时生成我的 pdf 报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T07:45:49.220

哈哈。

您需要获取 PDF 转换器才能将您使用的任何格式转换为 PDF。我最后一次检查没有免费的全功能转换器。买吧，伙计。

# sql-server - 为什么在我的情况下 SQL 选择了不正确的索引？

> ID：876610
> 
> 赞同：2
> 
> 时间：2009-05-18T07:39:50.667
> 
> 标签：sql-server, tsql, sql-server-2008, sql-execution-plan

我有一个有两个索引的表；一个是多列聚集索引，在 3 列上：

```
(
   symbolid int16,
   bartime int32,
   typeid int8
) 
```

第二个是非聚集在

```
(
   bartime int16
) 
```

我试图运行的选择语句是：

```
 SELECT symbolID, vTrdBuy
    FROM mvTrdHidUhd 
    WHERE typeID = 1 
    AND barDateTime = 44991 
    AND symbolid in (1010,1020,1030,1040,1050,1060) 
```

我使用 sql management studio 编辑器在 sql2008 上运行此查询并启用实际执行计划，我发现 sql 使用第二个索引和 propse 为三列（symbolid、bartime、typeid）创建一个新索引但非聚集！！！（我认为它说的是非聚集索引，因为已经有一个聚集索引）

这个选择是错误的，我再次重新运行相同的查询并强制 SQL 使用聚集索引（使用“with index”）并且性能应该更好。

我在这里有两个问题，一个与此行为有关，第二个与查询本身有关

1.  为什么 SQL 选择错误的索引并支持相同的索引
2.  在这种情况下我应该使用哪一个以`"where"`获得更好的性能

> 符号在 (1010,1020,1030,1040,1050,1060)
> 
> （符号 = 1010 或符号 = 1020 ..等）
> 
> （符号介于 (1010 和 1060) 之间）

测试后

我发现当我将 where 条件从使用 IN 更改为使用 >= 和 <= bartime 列上的非聚集索引比 3 列上的聚集索引提供更好的性能。

所以我有两种情况，如果 WHERE 使用 IN 最好使用聚集索引，如果它包含 >= 和 <= 它使用第二个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T16:15:49.100

```
SELECT  symbolID, vTrdBuy
FROM    mvTrdHidUhd 
WHERE   typeID = 1 
        AND barDateTime = 44991 
        AND symbolid IN (1010,1020,1030,1040,1050,1060) 
```

聚集索引的单个连续范围不涵盖此条件。

这些行：

```
1010, 44991, 1
1010, 50000, 1
1020, 44991, 1 
```

将在索引中按顺序排列，但您的查询将选择第一个和第三个，跳过第二个。

`SQL Server``Clustered Index Seek`如果谓词数量有限，则可以使用，例如您的`IN`情况。在这种情况下，它使用了多个范围：

```
SELECT  symbolID, vTrdBuy
FROM    mvTrdHidUhd 
WHERE   (typeID = 1 
        AND barDateTime = 44991 
        AND symbolid = 1010)
        OR
        (typeID = 1 
        AND barDateTime = 44991 
        AND symbolid = 1010)
        OR … 
```

但是如果一个`BETWEEN`范围`symbolid`不能构造如此有限数量的谓词，这就是它恢复到较低效率的原因`Clustered Index Scan`（它会扫描`symbolid`并过滤掉错误的结果）。

在这种情况下，您的非聚集索引性能更好。

您可以像这样重写您的查询：

```
SELECT  symbolID, vTrdBuy
FROM    (
        SELECT  DISTINCT symbolid
        FROM    mvTrdHidUhd 
        WHERE   symbolid BETWEEN 1010 AND 1050
        ) s
JOIN    mvTrdHidUhd m
ON      m.symbolid = s.symbolid
        AND m.typeID = 1 
        AND m.barDateTime = 44991 
```

，这也将`Clustered Index Seek`在您的表上使用，既可以建立列表，`DISTINCT symbolid`也可以加入该列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T07:42:26.667

更新表/索引的统计信息可能使其选择正确的索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T07:44:51.750

`symbolid BETWEEN 1010 AND 1050`尽可能使用。与使用 or 相比，使用or`BETWEEN`或`=`or`>=`或`>`n`<`或`<=`它们的组合`AND`通常会导致更好的性能和更好的索引选择。`OR``IN`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T07:48:14.083

索引列的顺序可能会影响优化器是否会选择您的索引。您指出索引是 (symbolid int16,bartime int32,typeid int8) 但 symbolid 是 where 子句中最不明显的值。这将需要对您拥有的 6 个值进行 6 次索引查找。

我可能会从 between 语句开始，但只有使用您的数据、服务器、索引等进行测试才能证明是最好的情况。

如果您要创建另一个索引，请尝试这些列的 2 个其他顺序。

如其他地方所述，更新您的统计信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T13:26:00.400

您还可以在 (symbolid,bartime,typeid,mvTrdBuy) 上尝试覆盖索引

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-03T16:09:06.850

您的查询引用*了四*列：

*   符号ID
*   vTrdBuy
*   类型ID
*   条日期时间

而聚集索引只涵盖其中的三个

*   **符号ID**
*   vTrdBuy
*   **类型ID**
*   **条日期时间**

SQL Server 忽略该索引的原因是它对它毫无用处。索引首先按 排序`symbolID`，您不需要特定的 symbolID，而是需要一堆随机值。这意味着它必须读取整个表格。

聚集索引中的下一列是`vTrdBuy`。这不是用来帮助它跳到它实际想要的行。

查看查询，有两列非常具体地限制了您要返回的行：

```
WHERE typeID = 1
AND barDateTime = 44991 
```

创建以**typeID**和**barDateTime**开头的索引对于帮助 SQL Server 跳转到您感兴趣的行非常*有用*。

第一个 SQL Server 可以直接跳转到

```
typeID = 1\. 
```

到达那里后，它可以直接跳到酒吧所在的位置

```
barDateTime = March 8, 2023 
```

它可以通过直接搜索索引来做到这一点，因为索引是按其中的列排序的。这是非常快的，它消除了大多数行的查看。

如果要创建索引：

```
(
   typeID
   barDateTime
   symbolID
) 
```

如果查询返回很多行，它仍然可能没有用。为了完成 SELECT 语句，SQL Server 仍然需要**vTrdBuy**值。*它必须通过为符合条件的每一*行（称为**Bookmark Lookup**）跳过表来执行此操作。如果行数过多（例如 > 500），SQL Server 将忘记索引并仅扫描整个表 - 因为它会更快。

您想阻止书签查找，通过让它不必回到表中查找缺失值，您希望将值包含在索引中：

```
CREATE INDEX IX_mvTrdHidUhd_FancyCovering ON mvTrdHidUhd 
(
   typeID, barDateTime, symbolID, vTrdBuy
) 
```

现在您有了一个索引，它包含 SQL Server 想要的所有内容，按照它想要的顺序，并且您不必弄乱物理表的物理排序顺序（即集群）。

# arrays - VB6 动态数组确定

> ID：876617
> 
> 赞同：1
> 
> 时间：2009-05-18T07:42:06.763
> 
> 标签：arrays, vb6, dynamic

在 VB6 中，您可以静态和动态地声明一个数组。当数组被动态声明时，是否可以确定数组是否被声明为动态数组，因此可能需要“redim”才能使用它？即我正在寻找类似的东西：

```
if myarray is dynamic then
  redim ...
end if
myarray(x) = y 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T09:35:01.753

不幸的是，没有什么内在的东西可以判断一个数组是否是动态的。您可能可以使用有关 VB6 数组底层实现的特殊知识来破解某些东西，如 Matt Curland 的书中所述。

我认为最好的方法是使用[这个答案中](https://stackoverflow.com/questions/183353/how-do-i-determine-if-an-array-is-initialized-in-vb6/184909#184909)的函数。它测试数组是否是需要 ReDimmed 的动态数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T12:20:20.937

使用此代码

```
Private Sub Command1_Click()
    Dim A() As Double
    Dim B() As Double
    ReDim B(4)
    If (Not A()) = -1 Then MsgBox "Empty"
    If (Not B()) = -1 Then MsgBox "Empty"
End Sub 
```

(Not ArrayName()) 如果为空，则返回 -1。

# javascript - 提供 JavaScript 文件时，默认 gzip 是否安全

> ID：876619
> 
> 赞同：2
> 
> 时间：2009-05-18T07:42:26.340
> 
> 标签：javascript, http, gzip, content-encoding

这个问题适合标题。我对规范推荐的内容不感兴趣，但对当前部署的浏览器组合支持最好的内容不感兴趣。

*   Google Docs 压缩他们的 JS。
*   Google AJAX 库 API CDN gzip JS。
*   Yahoo 将 JS 压缩为他们的 YUI 文件。
*   雅虎主页 gzip 压缩了他们的 JS。

所以我认为我的问题的答案是**肯定的，gzip JS for all browsers**没问题。但如果你不同意，你会告诉我的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-18T07:49:47.217

如果您 gzip 您的`.js`（或任何其他内容），可能会出现两个问题：1\. gzip 增加了不可压缩文件的延迟（需要时间来压缩和解压缩） 2\. 较旧的浏览器可能无法理解 gzip 压缩的内容。为避免出现问题 2，您应该检查*Accept-Encoding*和*User-Agent*或 HTTP 请求的其他部分，以猜测浏览器是否支持 gzip。现代浏览器不应该有 gzippd 内容的问题。

摘自[http://httpd.apache.org/docs/2.2/mod/mod_deflate.html](http://httpd.apache.org/docs/2.2/mod/mod_deflate.html)：首先，我们探测一个用户代理字符串，它指示 Netscape Navigator 4.x 版本。这些版本无法处理除 text/html 以外的类型的压缩。4.06、4.07 和 4.08 版本也存在解压缩 html 文件的问题。因此，我们完全关闭了他们的放气过滤器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-18T07:57:37.563

不，这不对。[首先，浏览器必须根据Supercharging Javascript](http://www.cforcoding.com/2009/05/supercharging-javascript-part-2-gzip.html)声明它们接受 gzip 编码。最重要的是，某些版本的 IE6 已经破坏了实现，如果它们没有被修补，这仍然是一个问题。[Internet Explorer 问题（使用 gzip 编码）](http://www.cforcoding.com/2009/05/supercharging-javascript-part-6.html)中的更多内容。

# objective-c - 为什么这个属性需要“保留”？

> ID：876622
> 
> 赞同：5
> 
> 时间：2009-05-18T07:42:35.200
> 
> 标签：objective-c, cocoa

给定具有保留属性的类的以下定义：

```
@interface FeedEntry : NSObject<NSCoding>
{
    NSURL*  url;
    NSData* source;
}

@property (retain) NSURL*   url;
@property (retain) NSData*  source;
@end

@implementation FeedEntry

@synthesize url;
@synthesize source;

-(void)encodeWithCoder:(NSCoder*)coder
{
    [coder encodeObject:url     forKey:@"url"];
    [coder encodeObject:source  forKey:@"source"];
} 
```

为什么initWithCoder方法中的url属性需要“retain”：

```
-(id)initWithCoder:(NSCoder*)coder
{
    url = [[coder decodeObjectForKey:@"url"] retain];
    source  = [coder decodeObjectForKey:@"source"];

    NSLog(@"got url=%@\n", url);
    return self;
} 
```

具体来说，为什么合成的“get url”方法不保留对象？（我猜源属性也需要保留）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-18T07:48:18.547

**快速回答：**

当你设置：

```
url = [[coder decodeObjectForKey:@"url"] retain]; 
```

你*没有*使用`@property`. 您正在手动设置实例变量的值`url`。因此，您还必须手动`retain`设置该值。

要使用综合属性设置变量，您可以调用：

```
[self setUrl:[coder decodeObjectForKey:@"url"]]; 
```

或者

```
self.url = [coder decodeObjectForKey:@"url"]; 
```

这些形式中的任何一种都将利用合成方法，并`retain`自动处理。

**细节：**

在 Objective-C 中，`@property`and`@synthesize`关键字会自动为您创建 getter 和 setter 方法：

```
@interface MyClass
{
    id someValue;
}
@property (retain) id someValue;
@end

@implementation MyClass
@synthesize someValue;
@end 
```

相当于：

```
@interface MyClass
{
    id someValue;
}
- (id)someValue;
- (void)setSomeValue:(id)newValue;
@end

@implementation MyClass
- (id)someValue { return someValue; }
- (void)setSomeValue:(id)newValue
{
    [newValue retain];
    [someValue release];
    someValue = newValue;
}
@end 
```

这在“内部”成员变量和具有相同名称的属性之间产生了重要区别。如果您按名称引用成员变量，您将绕过合成的属性方法。

# iphone - iPhone 的 Dijkstra 算法

> ID：876623
> 
> 赞同：1
> 
> 时间：2009-05-18T07:42:47.870
> 
> 标签：iphone, shortest-path, dijkstra

从 sdk 3.0 开始可以轻松使用 iPhone 中的 GPS 功能，但明确禁止使用 Google 的地图。我认为这有两个含义：

1.  您必须自己提供地图
2.  您必须自己计算最短路线。

我知道计算最短路线多年来一直困扰着数学家，但汤姆汤姆和谷歌都做得很好，所以这个问题似乎已经解决了。在网上搜索，我自己不是数学家，我遇到了[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra's_algorithm "Dijkstra算法")。有没有人在 iPhone 的类似地图的应用程序中成功使用过这个算法？您愿意与我/社区分享吗？这是正确的方法，还是其他选择？非常感谢您的考虑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T07:52:29.677

我不相信 Dijkstra 的算法对现实世界的映射有用，因为正如 Tom Leys 所说（我会评论他的帖子，但缺乏这样做的代表），它需要一个单一的起点。如果起点发生变化，则必须重新计算一切，我想这在 iPhone 这样的设备上对于非常大的数据集会相当慢。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-18T07:49:32.210

Dijkstra 算法用于寻找到所有节点的最短路径（从单个起始节点开始）。游戏程序员使用定向搜索，例如 A*。其中 Dijkstra 首先处理最接近起始位置的节点，A* 处理估计最接近结束位置的节点

它的工作方式是您提供从任何给定位置到终点的廉价“估计”功能。一个很好的例子是一只鸟要飞多远才能到达那里。A* 将此添加到每个节点从起点开始的当前距离，然后选择似乎在最短路径上的节点。

您的估计越好，找到一条好路径所需的时间就越短。如果这个时间仍然太长，您可以在简单地图上进行路径查找，然后在更复杂的地图上进行另一次查找，以查找您在简单地图上找到的地点之间的路线。

*更新* 找了好久，找到了[一篇关于A*](http://www.gamasutra.com/features/19990212/sm_04.htm)的文章供大家阅读

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-18T09:53:52.670

Dijkstra 的算法对于 n 个节点和 m 个边（对于单个路径）是 O(m log n)，并且足够高效，可用于网络路由。这意味着它的效率足以用于一次性计算。

简而言之，Dijkstra 算法的工作原理如下：

```
Take the start node
Assign it a depth of zero
Insert it into a priority queue at its depth key

Repeat:
    Pop the node with the lowest depth from the priority queue
    Record the node that you came from so you can track the path back
    Mark the node as having been visited
    If this node is the destination:
        Break
    For each neighbour:
        If the node has not previously been visited:
            Calculate depth as depth of current node + distance to neighbour
            Insert neighbour into the priority queue at the calculated depth.

Return the destination node and list of the nodes through which it was reached. 
```

与普遍的看法相反，Dijkstra 的算法不一定是全对最短路径计算器，尽管它可以适应这一点。

您必须获得街道和十字路口的图表以及十字路口之间的距离。如果您有这些数据，您可以使用 Dijkstra 算法来计算最短路线。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-08-21T10:42:34.733

如果您查看技术 tomtom 所称的“IQ 路线”，它们会测量一天中每个时间段的实际速度和行驶时间。这使得到达时间更加准确。所以预计到达时间更基于事实[http://www.tomtom.com/page/iq-routes](http://www.tomtom.com/page/iq-routes)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T13:52:20.840

在具有离线地图数据的 iPhone 上，使用 A* 算法计算路线已经足够快了。我有商业上做这件事的经验。我使用 Wikipedia 上记录的 A* 算法，并将道路网络保存在内存中并重新使用它；一旦加载完毕，即使是在西班牙或加拿大西半部这样的大片地区，也几乎是即时的。

我从 OpenStreetMap 或 elswhere 获取数据并将其转换为有向图，假设（根据知情人士的说法，这是正确的做法）任何两条道路共享一个具有相同 ID 的点。我根据预期速度为不同类型的道路分配权重，如果道路的一部分是单向的，我只创建一条弧线；双向道路有两条弧线，每个方向一条。除了一些防止危险转弯的临时代码和实施路由限制之外，这几乎是全部内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-18T10:40:46.913

这在前面讨论过：[什么算法计算地图上从点 a 到点 b 的方向？](https://stackoverflow.com/questions/430142/what-algorithms-compute-directions-from-point-a-to-point-b-on-a-map)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-02-27T10:33:17.627

看看[CloudMade](http://developers.cloudmade.com/projects/show/iphone-sdk)。他们为 iPhone 和 iPad 提供免费服务，允许根据您当前的位置进行导航。它建立在开放的街道地图上，并具有一些漂亮的功能，例如制作自己的地图样式。它有时有点慢，但它完全免费。

# c# - 如何从 C# 保存到 Excel？

> ID：876625
> 
> 赞同：2
> 
> 时间：2009-05-18T07:43:02.953
> 
> 标签：c#, excel, export

```
BOWorkerDetail oBOWorkerDetail = new BOWorkerDetail();
            WorkerDetails oWorkerDetails = new WorkerDetails();
            oWorkerDetails = oBOWorkerDetail.Gets(); 
```

oWorkerdetails 是所有工人的集合。我需要将此值保存在 Excel 中。怎么做 ？任何人都可以帮忙吗？我在 C# 窗口平台 vs05 上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T08:10:38.383

你应该看看这个[http://www.connectionstrings.com/excel](http://www.connectionstrings.com/excel)，在那里你可以找到一些适用于 ODBC 引擎的连接字符串。一个例子是：

```
OdbcConnection connection = new OdbcConnection(@"Driver={Microsoft Excel Driver (*.xls)};DriverId=790;Dbq=" + xlsFilePath + "; ReadOnly=False; DefaultDir=" + xlsDir + ";"); 
```

（您应该在工作站上安装 Microsoft Excel）

然后你可以像这样创建一个 IDbCommand： IDbCommand command = connection.CreateCommand();

您可以像使用任何 sql 命令一样使用此命令：DataTable 中每个 DataRow 的“CREATE TABLE”、“INSET INTO”。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T08:43:28.833

如果您没有在运行代码的机器上安装 Excel，您可以导出为 XML 或 CSV（逗号分隔值）文件，然后在以后将其导入 Excel。

如果您使用 XML，您也可以导出模式。

正如 BarneyHDog 在评论中指出的那样，Excel 可以根据它认为的数据类型对数据做一些讨厌的事情。因此，如果您沿着这条路线走，请仔细检查您的输出是否得到正确处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T08:56:49.740

下面是使用 Visual Studio Tools for Office 2008 和 Office Excel Interop 将 List> 写入新 Excel 文件的示例：

```
using System;
using System.Collections.Generic;
using System.Reflection;

using Microsoft.Office.Interop.Excel;

namespace Project1
{
  public class ExportExcel
  {
    public void Export(string fileName, List<List<string>> data)
    {
      _Application excel = null;
      _Workbook wb = null;
      try
      {
        excel = new ApplicationClass { Visible = false }; // new excel application (not visible)
        wb = excel.Workbooks.Add(Missing.Value); // new excel file

        var sh = ((_Worksheet)wb.ActiveSheet); // current sheet
        for (var i = 0; i < data.Count; i++)
        {
          var listMaster = data[i];
          for (var j = 0; j < listMaster.Count; j++)
          {
            sh.get_Range(sh.Cells[j + 1, i + 1], sh.Cells[j + 1, i + 1]).Value2 = listMaster[j];
            // get_Range(start, end) where start, end is in R1C1 notation
          }
        }
      }
      finally
      {
        if (wb != null)
        {
          wb.SaveAs(fileName, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, XlSaveAsAccessMode.xlExclusive, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
        }
        if (excel != null)
        {
          excel.Quit();
        }
        GC.Collect();
      }
    }
  }
} 
```

VSTO 要求在客户端计算机上安装 Excel

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T08:06:06.130

我的建议是使用本机库并避免互操作。看看[Aspose.Cells](http://www.aspose.com/categories/file-format-components/aspose.cells-for-.net-and-java/default.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T09:35:43.157

一个非常简单的方法是使用 filehelpers 库

[http://filehelpers.sourceforge.net/](http://filehelpers.sourceforge.net/)

那里有很多例子。

这个库真的很可靠，我用过很多次。希望能帮助到你

# winapi - 用于提取 zip 文件的 Windows API？

> ID：876626
> 
> 赞同：5
> 
> 时间：2009-05-18T07:43:17.960
> 
> 标签：winapi, zip

在 Windows 资源管理器中，您可以提取一个压缩文件夹（一个 zip 文件）

是否有 API 或命令行以编程方式使用相同的方法提取 zip 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-05T21:54:13.580

您可以使用此 VBScript 脚本：

```
'Adapted from http://www.robvanderwoude.com/vbstech_files_zip.html

strFile = "c:\filename.zip"
strDest = "c:\files"

Set objFSO = CreateObject("Scripting.FileSystemObject")

If Not objFSO.FolderExists(strDest) Then
    objFSO.CreateFolder(strDest)
End If

UnZipFile strFile, strDest

Sub UnZipFile(strArchive, strDest)
    Set objApp = CreateObject( "Shell.Application" )

    Set objArchive = objApp.NameSpace(strArchive).Items()
    Set objDest = objApp.NameSpace(strDest)

    objDest.CopyHere objArchive
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T07:53:59.770

1.  检查[使用 Windows Shell API 和 C# 压缩 Zip 文件](http://www.codeproject.com/KB/cs/compresswithwinshellapics.aspx)
2.  您可以使用对点网项目免费的[SharpZipLib 。](http://www.icsharpcode.net/OpenSource/SharpZipLib/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T19:11:49.373

`Sub UnZipFile(...)`我在 Excel 2010 下尝试了上述功能，但它**不起作用**：运行时错误 '91' (Object variable or With block not set) in the line

```
Set objArchive = objApp.Namespace(strArchive).Items() 
```

和线

```
Set objDest = objApp.Namespace(strDest) 
```

默默地也不工作：执行后`objDest`仍然什么都没有！

Microsoft`.Namespace()`接受对象、字符串常量或字符串变量作为参数。对于字符串变量，通常存在可疑问题，需要解决方法：

```
Set objArchive = objApp.Namespace(**CStr(** strArchive **)**).Items()  
Set objDest = objApp.Namespace(**CStr(** strDest **)**) 
```

或替代解决方法

```
Set objArchive = objApp.Namespace(**"" &** strArchive).Items()  
Set objDest = objApp.Namespace(**"" &** strDest) 
```

该行`objDest.CopyHere objArchive`也无法正常工作：目标文件夹仍然是空的！

这是一个在 Excel 2010 中工作的版本，很可能也在其他环境中工作：

```
Sub UnZipFile(strZipArchive As String, strDestFolder As String)
  Dim objApp As Object
  Dim vItem As Variant
  Dim objDest As Object

  Set objApp = CreateObject("Shell.Application")
  Set objDest = objApp.Namespace(CStr(strDestFolder))
  For Each vItem In objApp.Namespace(CStr(strZipArchive)).Items
    objDest.CopyHere vItem
  Next vItem
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-17T01:30:18.753

对于 C# 或 VB 用户，您可以查看 MSDN 的答案： [https ://msdn.microsoft.com/en-us/library/ms404280(v=vs.100).aspx](https://msdn.microsoft.com/en-us/library/ms404280(v=vs.100).aspx)

对于 .net 4.x，这里是来自 MSDN 的示例代码

```
using System;
using System.IO;
using System.IO.Compression;

namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            string startPath = @"c:\example\start";
            string zipPath = @"c:\example\result.zip";
            string extractPath = @"c:\example\extract";

            ZipFile.CreateFromDirectory(startPath, zipPath);

            ZipFile.ExtractToDirectory(zipPath, extractPath);
        }
    }
} 
```

# c# - C# 中可空类型的替代方案

> ID：876632
> 
> 赞同：15
> 
> 时间：2009-05-18T07:46:13.620
> 
> 标签：c#, nullable, nan, non-nullable

我正在编写适用于一系列数字数据的算法，有时，该系列中的一个值需要为空。但是，由于此应用程序对性能至关重要，因此我避免使用可空类型。我已经对算法进行了性能测试，专门比较了使用可空类型和不可空类型的性能，在最好的情况下，可空类型会慢 2 倍，但通常要差得多。

最常用的数据类型是 double，目前选择的 null 替代方案是 double.NaN。但是我知道这不是 NaN 值的确切预期用途，所以我不确定这是否有任何我无法预见的问题以及最佳实践是什么。

我有兴趣找出以下数据类型的最佳空替代方案：double/float、decimal、DateTime、int/long（尽管其他数据类型非常受欢迎）

编辑：我想我需要澄清我对性能的要求。通过这些算法一次处理大量数字数据需要几个小时。因此，尽管例如 10ms 或 20ms 之间的差异通常是微不足道的，但在这种情况下，它确实会对所用时间产生重大影响。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-18T07:50:26.937

好吧，如果您已经排除了`Nullable<T>`，那么您将得到域值 - 即您将其视为 null 的幻数。虽然这并不*理想*，但也并不罕见——例如，许多主框架代码都将`DateTime.MinValue`其视为 null。这至少使损害远离共同价值观......

**编辑以仅突出显示没有 NaN 的地方**

因此，在没有 的地方`NaN`，也许可以使用`.MinValue`- 但请记住，如果您不小心*使用*了相同的值，表示相同的数字，会发生什么坏事......

显然，对于您需要的无符号数据`.MaxValue`（避免零！！！）。

就个人而言，我会尝试`Nullable<T>`更安全地表达我的意图......也许有一些方法可以优化你的`Nullable<T>`代码。而且-当您在所有需要的地方检查了幻数时，也许它不会比`Nullable<T>`?

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-18T08:04:42.123

在这个特定的边缘情况下，我有点不同意 Gravell：一个 Null 变量被认为是“未定义”，它没有值。因此，无论使用什么来表示都可以：即使是幻数，但是对于幻数，您必须考虑到幻数在将来突然变成“有效”值时总会困扰您。使用 Double.NaN，您不必为此担心：它永远不会成为有效的替身。虽然，您必须考虑到双打序列意义上的 NaN 只能用作“未定义”的标记，但显然，您也不能将其用作序列中的错误代码。

因此，无论使用什么来标记“未定义”：必须在值集的上下文中明确该特定值被认为是“未定义”的值，并且将来不会改变。

如果 Nullable 给您带来太多麻烦，请使用 NaN 或其他任何方法，只要您考虑后果：选择的值表示“未定义”并且将保留。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-18T08:15:39.980

我正在开发一个使用 NaN 作为`null`值的大型项目。我对此并不完全满意-出于与您类似的原因：不知道会出什么问题。到目前为止，我们还没有遇到任何实际问题，但请注意以下几点：

**NaN 算术**- 虽然在大多数情况下，“NaN 提升”是一件好事，但它可能并不总是您所期望的。

**比较**- 如果您希望 NaN 比较相等，则值的比较会变得相当昂贵。现在，测试浮点数是否相等并不简单，但是排序 (a < b) 可能会变得非常丑陋，因为 nan 有时需要比正常值更小，有时更大。

**代码感染**- 我看到很多算术代码需要对 NaN 进行特定处理才能正确。因此，出于性能原因，您最终会得到“接受 NaN 的函数”和“不接受 NaN 的函数”。

**其他非有限**NaN 是唯一的非有限值。应该牢记...

**禁用时，浮点异常**不是问题。直到有人启用它们。真实故事：ActiveX 控件中 NaN 的静态初始化。听起来并不可怕，直到您将安装更改为使用 InnoSetup，它使用 Pascal/Delphi(?) 内核，默认情况下启用 FPU 异常。我花了一段时间才弄清楚。

所以，总而言之，没什么大不了的，尽管我不想经常考虑 NaN。

* * *

我会尽可能频繁地使用 Nullable 类型，除非它们是（被证明是）性能/资源限制。一种情况可能是带有偶尔 NaN 的大型向量/矩阵，或者*默认 NaN 行为正确的*大量命名单个值。

* * *

或者，您可以将索引向量用于向量和矩阵、标准“稀疏矩阵”实现或单独的布尔/位向量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-18T08:14:00.030

部分答案：

Float 和 Double 提供 NaN（不是数字）。NaN 有点棘手，因为根据规范，NaN ！= NaN。如果您想知道一个数字是否为 NaN，则需要使用 Double.IsNaN()。

另请参阅[二进制浮点和 .NET](http://www.yoda.arachsys.com/csharp/floatingpoint.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T10:01:42.403

调用 Nullable 的成员或属性之一（装箱）时，可能会发生显着的性能下降。

尝试使用带有双精度 + 布尔值的结构来判断是否指定了值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-22T04:24:27.680

`Nullable<T>`可以通过定义自己的结构来避免与相关的一些性能下降

```
struct MaybeValid<T>
{
    public bool isValue;
    public T Value;
} 
```

如果需要，可以定义构造函数或转换运算符 from `T`to`MaybeValid<T>`等，但过度使用这些东西可能会产生次优性能。如果避免不必要的数据复制，暴露字段结构可能会很有效。有些人可能不赞成暴露字段的概念，但它们可以比属性更有效。如果将返回 a 的函数`T`需要一个类型的变量`T`来保存其返回值，则使用 a`MaybeValid<Foo>`只需将要返回的事物的大小增加 4。相比之下，使用 a`Nullable<Foo>`将要求函数首先计算`Foo`，然后将其副本传递给`Nullable<Foo>`. 此外，返回一个`Nullable<Foo>`将要求任何想要使用返回值的代码必须至少将一个额外的副本复制到类型的存储位置（变量或临时），`Foo`然后才能对其执行任何有用的操作。相比之下，代码可以像使用任何其他变量一样有效地使用`Value`类型变量的字段。`Foo`

# c# - 我怎样才能阻止网站？

> ID：876635
> 
> 赞同：2
> 
> 时间：2009-05-18T07:46:55.460
> 
> 标签：c#

代码：

```
string path = @"C:\Windows\System32\drivers\etc\hosts";
StreamWriter sw = new StreamWriter(path, true);
string sitetoblock = "\r\n127.0.0.1 http://" + textBox1.Text +
    " 127.0.0.1 http://www." + textBox1.Text;

sw.Write(sitetoblock);
sw.Close();
MessageBox.Show(textBox1.Text + " blocked"); 
```

这是一个阻止网站的代码，....但它不起作用......有时它会起作用..我怎样才能阻止网站？

告诉我什么是阻止网站的正确方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-18T07:52:01.690

首先，这不是一个有效的阻止网站的方法，但是如果你真的想这样做，那么请查看 hosts 文件的格式。

如果您想通过劫持 DNS 查找来阻止网站，则只需重定向主机名。

您生成的主机文件如下所示：

127.0.0.1 [http://网站/文件](http://website/file)

你想在文件中看到的是：

127.0.0.1 网站

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T07:55:13.933

许多间谍软件/广告软件程序阻止访问主机文件。因此，您很有可能会以这种方式失败。恕我直言，最好在防火墙中阻止 URL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T07:53:22.110

'hosts' 文件将 IP 地址映射到主机名，因此它不需要协议位和片段。

您的目标应该是将“127.0.0.1 主机名”写入文件，例如阻止您添加的“badsite.com”：

```
127.0.0.1 badsite.com
127.0.0.1 www.badsite.com 
```

不过，可能有更好的方法来阻止网站；-)

# asp.net - 我可以从 aspx.cs 页面发送服务器控件吗

> ID：876636
> 
> 赞同：0
> 
> 时间：2009-05-18T07:47:12.103
> 
> 标签：asp.net

我可以从 aspx.cs 页面发送服务器控件吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T07:57:13.820

如果“发送”是指“创建”，那么您可以通过将动态创建的控件添加到页面或面板等容器来轻松完成：

```
LinkButton lnk1 = new LinkButton();
// Set any required properties.
...

// Add the control to the container.
Panel1.Controls.Add(lnk1); 
```

LinkBut​​ton 将按预期在客户端呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T07:54:38.053

在表单中添加标签

在文件 [cs 文件] 后面的代码中

```
label1.Text="<a href='your url'>LinkButton</a>";
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T17:30:38.473

你也直接做。

Pages.Controls.Add(yourcontrolpathhere)

# windows-vista - 哪种方式可以在 XP 或 Vista 上为项目创建软链接？

> ID：876655
> 
> 赞同：2
> 
> 时间：2009-05-18T07:54:54.447
> 
> 标签：windows-vista, windows-xp, symlink

我想在 XP 和 Vista 上创建一个软链接，以便

c:\proj01\lib 将指向 c:\lib

和

c:\proj02\lib 将指向 c:\lib

这样做的原因是某些IDE有自动完成提示函数名或者可以快速跳转到不同文件中的函数，但是所有文件必须在一个文件夹下，例如c:\proj01，所以我希望创建一个指向 c:\lib 的软链接 c:\proj01\lib

在 XP 和 Vista 上，创建此类链接的最佳方式是什么？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-18T08:18:39.913

mklink 在 XP 上不存在，但您可以使用 Sysinternals 的[Junction 工具](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-18T07:59:27.793

从终端： mklink /D {linkname} {targetdir}

# c# - 字典和哈希表的区别

> ID：876656
> 
> 赞同：107
> 
> 时间：2009-05-18T07:55:02.420
> 
> 标签：c#, collections

> **可能重复：**
> [为什么字典比 C# 中的哈希表更受欢迎？](https://stackoverflow.com/questions/301371/why-dictionary-is-preferred-over-hashtable-in-c)

字典和哈希表有什么区别。如何决定使用哪一个？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2009-05-18T07:56:01.700

简单地说，`Dictionary<TKey,TValue>`是一个泛型类型，允许：

*   静态类型（和编译时验证）
*   不使用拳击

如果您是 .NET 2.0 或更高版本，您应该*更喜欢* `Dictionary<TKey,TValue>`（以及其他通用集合）

一个微妙但重要的区别是，它`Hashtable`支持具有单个编写器线程的多个读取器线程，但`Dictionary`不提供线程安全性。如果您需要通用字典的线程安全，则必须实现自己的同步或（在 .NET 4.0 中）使用`ConcurrentDictionary<TKey, TValue>`.

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2011-01-10T11:49:16.067

让我们举一个例子来解释哈希表和字典之间的区别。

这是一个实现哈希表的方法

```
public void MethodHashTable()
{
    Hashtable objHashTable = new Hashtable();
    objHashTable.Add(1, 100);    // int
    objHashTable.Add(2.99, 200); // float
    objHashTable.Add('A', 300);  // char
    objHashTable.Add("4", 400);  // string

    lblDisplay1.Text = objHashTable[1].ToString();
    lblDisplay2.Text = objHashTable[2.99].ToString();
    lblDisplay3.Text = objHashTable['A'].ToString();
    lblDisplay4.Text = objHashTable["4"].ToString();

    // ----------- Not Possible for HashTable ----------
    //foreach (KeyValuePair<string, int> pair in objHashTable)
    //{
    //    lblDisplay.Text = pair.Value + " " + lblDisplay.Text;
    //}
} 
```

以下是字典

```
 public void MethodDictionary()
  {
    Dictionary<string, int> dictionary = new Dictionary<string, int>();
    dictionary.Add("cat", 2);
    dictionary.Add("dog", 1);
    dictionary.Add("llama", 0);
    dictionary.Add("iguana", -1);

    //dictionary.Add(1, -2); // Compilation Error

    foreach (KeyValuePair<string, int> pair in dictionary)
    {
        lblDisplay.Text = pair.Value + " " + lblDisplay.Text;
    }
  } 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2010-03-16T03:04:45.673

HashTable 和 Dictionary 之间还有一个更重要的区别。如果您使用索引器从 HashTable 中获取值，则 HashTable 将为不存在的项目成功返回 null，而如果您尝试使用 Dictionary 中不存在的索引器访问项目，则 Dictionary 将引发错误

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-05-18T07:57:00.560

字典是类型化的（所以值类型不需要装箱），哈希表不是（所以值类型需要装箱）。Hashtable 具有比字典恕我直言更好的获取值的方法，因为它始终知道该值是一个对象。尽管如果您使用的是 .NET 3.5，很容易为字典编写扩展方法来获得类似的行为。

如果每个键需要多个值，请在此处查看我的 MultiValueDictionary 源代码： [multimap in .NET](https://stackoverflow.com/questions/380595/multimap-in-c-3-0/380601#380601)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2011-07-06T09:50:25.393

**想加个区别：**

尝试访问不存在的键会在 Dictionary 中产生运行时错误，但在 hashtable 中没有问题，因为它返回 null 而不是错误。

例如

```
 //No strict type declaration
        Hashtable hash = new Hashtable();
        hash.Add(1, "One");
        hash.Add(2, "Two");
        hash.Add(3, "Three");
        hash.Add(4, "Four");
        hash.Add(5, "Five"); 
        hash.Add(6, "Six");
        hash.Add(7, "Seven");
        hash.Add(8, "Eight");
        hash.Add(9, "Nine");
        hash.Add("Ten", 10);// No error as no strict type

        for(int i=0;i<=hash.Count;i++)//=>No error for index 0
        {
            //Can be accessed through indexers
            Console.WriteLine(hash[i]);
        }
        Console.WriteLine(hash["Ten"]);//=> No error in Has Table 
```

这里键 0 和键“十”没有错误（注意：t 很小）

```
//Strict type declaration
        Dictionary<int,string> dictionary= new Dictionary<int, string>();
        dictionary.Add(1, "One");
        dictionary.Add(2, "Two");
        dictionary.Add(3, "Three");
        dictionary.Add(4, "Four");
        dictionary.Add(5, "Five");
        dictionary.Add(6, "Six");
        dictionary.Add(7, "Seven");
        dictionary.Add(8, "Eight");
        dictionary.Add(9, "Nine");
        //dictionary.Add("Ten", 10);// error as only key, value pair of type int, string can be added

        //for i=0, key doesn't  exist error
        for (int i = 1; i <= dictionary.Count; i++)
        {
            //Can be accessed through indexers
            Console.WriteLine(dictionary[i]);
        }
        //Error : The given key was not present in the dictionary.
        //Console.WriteLine(dictionary[10]); 
```

这里键 0 和键 10 的错误，因为两者在字典中都不存在，运行时错误，同时尝试访问。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-05-18T08:16:58.980

Hashtable 类是一种特定类型的字典类，它使用整数值（称为哈希）来帮助存储其键。Hashtable 类使用哈希来加快在集合中搜索特定键的速度。.NET 中的每个对象都派生自 Object 类。此类支持 GetHash 方法，该方法返回唯一标识对象的整数。Hashtable 类通常是一个非常有效的集合。Hashtable 类的唯一问题是它需要一点开销，而且对于小型集合（少于十个元素），开销会影响性能。

> 两者之间有一些特殊的区别，必须考虑：
> 
> HashTable：是非泛型集合，这个集合的最大开销是它会自动为您的值进行装箱，并且为了获得您需要执行拆箱的原始值，这些会降低您的应用程序性能作为惩罚。
> 
> 字典：这是一种通用类型的集合，没有隐式装箱，因此无需拆箱，您将始终获得您存储的原始值，从而提高您的应用程序性能。
> 
> 第二个相当大的区别是：
> 
> 如果您试图根据不存在的键访问哈希表中的值，它将返回 null。但在 Dictionary 的情况下，它会给您 KeyNotFoundException。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-07-04T20:02:04.117

ILookup 接口在 .net 3.5 中与 linq 一起使用。

HashTable 是弱类型的基类；DictionaryBase 抽象类是严格类型的，并在内部使用 HashTable。

我发现 Dictionary 有一个奇怪的地方，当我们在 Dictionary 中添加多个条目时，条目的添加顺序保持不变。因此，如果我在字典上应用 foreach，我将按照插入它们的相同顺序获取记录。

然而，对于普通的 HashTable，情况并非如此，因为当我在 Hashtable 中添加相同的记录时，不会保持顺序。据我所知，Dictionary 是基于 Hashtable 的，如果这是真的，为什么我的 Dictionary 保持顺序但 HashTable 没有？

至于为什么它们的行为不同，这是因为通用字典实现了一个哈希表，但不是基于 System.Collections.Hashtable。通用字典实现基于从列表中分配键值对。然后用散列表桶对它们进行索引以进行随机访问，但是当它返回一个枚举器时，它只是按顺序遍历列表 - 只要不重新使用条目，这就是插入的顺序。

shiv govind Birlasoft。:)

# asp.net - 带有 jQ ueryUI 的 ASP.NET：按钮单击事件中的文本框值变为 null

> ID：876660
> 
> 赞同：1
> 
> 时间：2009-05-18T07:56:07.987
> 
> 标签：asp.net, jquery, .net-2.0

我有一个 ASP.NET 页面，其中有一个按钮当用户单击按钮时，我将检查用户是否已登录。如果未登录，我将显示一个模式弹出窗口以登录（使用 jQueryUI）。我在 Div 中放置了一个文本框（txtPassword）和一个按钮（btnLogin）控件，这些控件将由 jQueryDialog 显示。但是在 btnLogin 的 Click 事件中，我无法读取文本框 txtPassword 中输入的文本值

以下是我的代码

```
 <form id="form1" runat="server">
<div>
   <br />  
    <asp:TextBox ID="txtModelId" runat="server" Text=""></asp:TextBox><br />

   <asp:Button ID="btnGo" runat="server" Text="Go" OnClick="btnGo_Click" />
    <br />
    <asp:Label ID="lblUserMsg" runat="server" Text="Label"></asp:Label></div>
    <div id="divContentHolder">
    <div class="demo">

    <div id="dialog" title="Login with your TradeIn Account">
    <p id="validateTips">Enter your EmailId & password</p>

    <fieldset> 
      <label for="email">Email</label>
      <asp:TextBox ID="txtEmail" CssClass="text ui-widget-content ui-corner-all" runat="server" ></asp:TextBox>
      <label for="password">
       <asp:TextBox ID="TextBox1" runat="server" Text="sample"></asp:TextBox>Password</label>
      <asp:TextBox ID="txtPassword"  CssClass="text ui-widget-content ui-corner-all" runat="server" ></asp:TextBox>
      <asp:Button ID="btnLogin" runat="server" Text="Login" OnClick="btnLogin_Click" UseSubmitBehavior="false"/>
    </fieldset>

    </div><!--dialog-->
    </div><!--demo-->
   </div><!--divContentHolder-->

</form> 
```

服务器端代码

```
protected void btnGo_Click(object sender, EventArgs e)
{
    CheckUserLoggedIn();
}

private void CheckUserLoggedIn()
{
    if (Session["username"] != null)
    {
        Response.Write("Logged in user");
        ClientScript.RegisterHiddenField("isAuthenticated", "true");
    }
    else
    {
        ClientScript.RegisterHiddenField("isAuthenticated", "false");
    }
}

   protected void btnLogin_Click(object sender, EventArgs e)
    {
        string txtSample= TextBox1.Text;  // this is showing the value 'sample'
        string txtPass= txtPassword.Text; // this is showing null

        if (txtPass == "shyju") 
        {
            Session["username"] = txtPassword.Text;
            Response.Redirect("TestingModal.aspx");
        }
   } 
```

我的 java 脚本代码来呈现对话框

$（函数（）{

```
 var name = $("#name"),
            email = $("#email"),
            password = $("#password"),
            allFields = $([]).add(name).add(email).add(password),
            tips = $("#validateTips");

    function updateTips(t) {
            tips.text(t).effect("highlight",{},1500);
    }

    function checkLength(o,n,min,max) {

            if ( o.val().length > max || o.val().length < min ) {
                    o.addClass('ui-state-error');
                    updateTips("Length of " + n + " must be between "+min+" and "+max+".");
                    return false;
            } else {
                    return true;
            }

    }

    function checkRegexp(o,regexp,n) {

            if ( !( regexp.test( o.val() ) ) ) {
                    o.addClass('ui-state-error');
                    updateTips(n);
                    return false;
            } else {
                    return true;
            }

    }

    $("#dialog").dialog({
            bgiframe: true,
            autoOpen: false,
            height: 300,
            modal: true,
            buttons: {
                    'Create an account': function() {
                            var bValid = true;
                            allFields.removeClass('ui-state-error');

                            bValid=true;
                            if (bValid) {

                                    /*$('#users tbody').append('<tr>' +
                                            '<td>' + name.val() + '</td>' + 
                                            '<td>' + email.val() + '</td>' + 
                                            '<td>' + password.val() + '</td>' +
                                            '</tr>'); */

                                            alert("Check User Credentials")
                                    $(this).dialog('close');
                            }
                    },
                    Cancel: function() {
                            $(this).dialog('close');
                    }
            },
            close: function() {
                    allFields.val('').removeClass('ui-state-error');
            }
    });

    $('#create-user').click(function() {
            $('#dialog').dialog('open');
    })
    .hover(
            function(){ 
                    $(this).addClass("ui-state-hover"); 
            },
            function(){ 
                    $(this).removeClass("ui-state-hover"); 
            }
    ).mousedown(function(){
            $(this).addClass("ui-state-active"); 
    })
    .mouseup(function(){
                    $(this).removeClass("ui-state-active");
    });

var isAuthenticated = $("#isAuthenticated").val();
if (isAuthenticated && isAuthenticated == "false")
{
// Display the modal dialog.
$("#dialog").dialog("open");
 }
}); 
```

我在我的 ASPX 文件的 HTML 部分中将 TextBox1 的文本属性值硬编码为“示例”。在按钮单击事件中我得到了它。但是另一个文本框 txtPassword 的 Text 属性给了我空值

请指导我继续前进

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-27T09:52:02.050

Try to get txtPassword value like this

```
string val=txtPassword.Attributes["value"].ToString(); 
```

# asp.net-ajax - ASP.NET AJAX 控件工具包中 HTMLEditor 控件的事件？

> ID：876668
> 
> 赞同：0
> 
> 时间：2009-05-18T07:57:42.587
> 
> 标签：asp.net-ajax, ajaxcontroltoolkit

我正在使用 ASP.NET AJAX 控件工具包中的 HTMLEditor 控件。工作正常。我想挂钩一个 keyup (onkeyup) 事件，这样我就可以做一些事情，比如显示编辑器中字符数的（近似）运行计数。

我推断编辑器最终是 iframe 元素内的 textarea 元素。我可以使用如下语法将事件附加到文本区域：

```
$addHandler($get("Editor1_ctl02_ctl01"), "keyup", displayCharCount); 
```

这条线运行没有错误。但是，永远不会调用引用的方法 (displayCharCount)。我不知道这是否是 iframe 中的 textarea 的功能，或者控件是否已经吃掉了事件或什么。

FWIW，这在使用普通 textarea 元素的简单页面中按预期工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-06T19:21:22.867

The textarea is there, but it is hidden. So your event handler may be registered, but "keyup" will never fire on a hidden control. You may want to try another event like onchange or ontextchange (or whatever its called).

The editor window you see is actually an html document in the iframe itself. The html document is in "edit mode" so it kind of resembles a textarea. The hidden textarea is simply used as a clever place to hold the html markup, so when the form is submitted, the html markup is sent to the server.

It is a tricky way to get it all to work...but it works!

# asp.net-mvc - 如何从自定义帮助程序中使用 ASP.NET MVC Html 帮助程序？

> ID：876670
> 
> 赞同：12
> 
> 时间：2009-05-18T07:58:51.120
> 
> 标签：asp.net-mvc

我有几个页面列出了搜索结果，对于我想显示的每个结果我想创建一个自定义 View Helper 以避免重复显示代码。

如何从我的自定义视图助手中访问方便的现有视图助手？即在我的自定义视图助手中，我想使用 Url.Action()、Html.ActionLink 等。如何从自定义视图助手中访问它们？

```
using System;
namespace MvcApp.Helpers
{
    public class SearchResultHelper
    {
        public static string Show(Result result)
        {
            string str = "";

            // producing HTML for search result here

            // instead of writing
            str += String.Format("<a href=\"/showresult/{0}\">{1}</a>", result.id, result.title);
            // I would like to use Url.Action, Html.ActionLink, etc. How?

            return str;
        }
    }
} 
```

`using System.Web.Mvc`可以访问`HtmlHelpers`，但似乎没有像 ActionLink 这样的方便方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-18T08:03:06.900

这个例子应该对你有所帮助。这个助手根据用户是否登录来呈现不同的链接文本。它演示了在我的自定义助手中使用 ActionLink：

```
 public static string FooterEditLink(this HtmlHelper helper,
        System.Security.Principal.IIdentity user, string loginText, string logoutText)
    {
        if (user.IsAuthenticated)
            return System.Web.Mvc.Html.LinkExtensions.ActionLink(helper, logoutText, "Logout", "Account",
                new { returnurl = helper.ViewContext.HttpContext.Request.Url.AbsolutePath }, null);
        else
            return System.Web.Mvc.Html.LinkExtensions.ActionLink(helper, loginText, "Login", "Account",
                new { returnurl = helper.ViewContext.HttpContext.Request.Url.AbsolutePath }, null);
    } 
```

**编辑：**
访问该`Url.Action()`方法所需要做的就是`this HtmlHelper helper`用类似的东西替换参数，`this UrlHelper urlHelp`然后调用`urlHelp.Action(...`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T08:07:21.527

一个简单的 gravatar html 助手，你的**类**也需要是静态的。

```
 public static string GetGravatarURL(this HtmlHelper helper, string email, string size, string defaultImagePath)
    {

        return GetGravatarURL(email, size) + string.Format("&default={0}", defaultImagePath);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T08:07:51.883

您可以仅使用扩展方法扩展默认的 HtmlHelper 和 UrlHelper（因此您将 xxxHelper 作为方法中的第一个参数）。

Or you can just create your base view with the method you want and use the Html or URL variable of the view.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-18T08:05:45.133

在我看来，您不应该尝试在代码中使用 ActionLink。MVC 的整个概念是将逻辑与显示分离，因此您应该尝试坚持这一点。

我建议您将结果对象传递给视图（可能通过 ViewData），然后在视图中内联解析结果。例如

```
<%= Html.ActionLink(result.title,"/showresult/" + result.id, "myController") %> 
```

# database-design - 具有完整性的传统和类ini文件数据的数据库设计

> ID：876674
> 
> 赞同：1
> 
> 时间：2009-05-18T07:59:20.853
> 
> 标签：database-design, data-integrity

我想就处理具有正常（传统）数据库数据的情况的最佳方法提出一些观点，同时也有更像“ini 文件”数据的数据，并且您希望保持它们之间的完整性（分层数据？ ）。

例如，假设我有一个包含 100 行的“CURRENCY”表。同时，我有一个“默认货币”的系统设置，它必须映射到这 100 行之一。

现在，我会将默认货币代码存储在 XML 配置文件、ini 文件或 Windows 注册表中。这对数据来说很好，但要确保 XML 文件中的值确实对应于数据库中的有效外键值，需要做一些工作。

如何在数据库中（以声明方式？）完成此操作，以便分层数据可以引用并因此与关系数据保持完整性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T09:36:55.887

可能是具有 2 列、一个键（或名称）和一个值列的表可以满足您的要求。将您的关系数据放入规范化表中，将“配置”类型的数据放入键/值对表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T08:03:47.507

在配置文件中按名称存储值可能比使用外键 ID 更有意义。配置文件可能包含“USD”，然后您的代码将按名称进行查找以获取 CURRENCY 表中的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T08:07:49.747

这是无法做到的，因为配置设置总是可以由外部程序（例如文本编辑器、regedit 等）更新。防止这种情况发生的唯一方法是运行一个服务，持续监控文件或注册表设置并禁止任何除非数据库正在运行并且还可以执行完整性检查，否则更改。这显然是大材小用——正确的解决方案是将配置数据存储在数据库中。

# c# - 如何获取添加到 Windows Mobile 应用程序的文件的文件路径？

> ID：876679
> 
> 赞同：1
> 
> 时间：2009-05-18T08:02:14.497
> 
> 标签：c#, windows-mobile, filepath, playsound

我在我的 Windows Mobile 应用程序中添加了一个 wav 文件，我想使用 CoreDll.dll 中的 MobilePlaySound 来播放它。

fileName 是它的参数之一：

```
 MobilePlaySound(fileName, IntPtr.Zero, (int)(Flags.SND_ASYNC | Flags.SND_FILENAME)); 
```

我创建了一个新文件夹“sound”，将“start.wav”添加到项目中，并将其属性“Build Action”设置为“Embedded Resources”。

然后我设置文件名：

```
 fileName = "\\Program Files\\myApp\\sound\\start.wav"; 
```

但声音根本不播放。那么正确的文件路径是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T08:06:17.410

通过将构建操作设置为“嵌入式资源”，文件将作为资源编译到您的程序集中。这意味着 wav 文件将嵌入到您的 .exe 或 .dll 文件中，并且不会出现在文件系统中。因此，您不能将 wav 的文件名传递给需要它的方法。

有两种解决方法：如果你真的想将 wav 文件作为嵌入式资源，则需要在运行时提取资源并将其写入文件系统中的文件。然后，您可以将该文件的名称传递给 MobilePlaySound 方法。在这种情况下，我个人不会选择此解决方案。

另一种解决方案是*不*将 wav 文件作为资源嵌入，而是让它在文件系统中作为自己的文件存在。为此，请将构建操作设置为“内容”并将“复制到输出目录”设置设置为“始终复制”或“如果更新则复制”。这将使编译器在输出中包含该文件。在这种情况下，您对文件位置的假设是正确的。

简而言之：

*   构建动作 = “内容”
*   复制到输出目录 =“始终复制”或“如果更新则复制”

# terminal - GNU 屏幕和更少：覆盖以前的输出

> ID：876680
> 
> 赞同：1
> 
> 时间：2009-05-18T08:02:28.710
> 
> 标签：terminal, gnu-screen

我正在从 iTerm 中的多个选项卡切换到一个 GNU`screen`会话。在 iTerm 中，我可以查看一个文件，`less`并且当我退出时终端的内容会恢复`less`。在 GNU`screen`中，以前的内容会被我查看的文件内容覆盖`less`。有什么办法可以改变这种情况吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-18T08:05:38.923

尝试添加

```
altscreen on 
```

到你的 .screenrc。

# svn - 在 Ubuntu 中设置 SVN 和 WebDAV 的问题

> ID：876695
> 
> 赞同：1
> 
> 时间：2009-05-18T08:07:46.643
> 
> 标签：svn, ubuntu-8.10

我已按照此处发布的每个步骤进行操作：

[如何在 GNU/Linux 上设置 Subversion (SVN) 服务器 - Ubuntu](https://stackoverflow.com/questions/60736/how-to-setup-a-subversion-svn-server-on-gnu-linux-ubuntu)

我正在使用 Ubuntu 8.10

启动浏览器后，我得到

禁止的

您无权访问此服务器上的 /svn。Apache/2.2.9 (Ubuntu) DAV/2 SVN/1.5.1 mod_ssl/2.2.9 OpenSSL/0.9.8g 服务器在 localhost 端口 443

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T08:25:24.780

该指南遵循 07 年的指南，所以我并不感到惊讶，并非一切都按计划进行。

查看有关设置它[的官方文档。](https://help.ubuntu.com/8.10/serverguide/C/subversion.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T08:37:24.633

您还应该考虑看一下红皮书，这是官方的颠覆文档。我发现它在过去非常有帮助。

[http://svnbook.red-bean.com/](http://svnbook.red-bean.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T08:53:54.147

尝试查看该文件夹的权限。我无法正确处理它们，唯一对我有用的是 chmod 777 所有文件夹。

# icefaces - 在数据表中使用复选框的问题

> ID：876700
> 
> 赞同：0
> 
> 时间：2009-05-18T08:10:09.257
> 
> 标签：icefaces

我想用作 datateble 中的一列，我的代码是

```
</ice:checkbox>

</ice:column> 
```

但我收到此错误：“java.lang.IllegalStateException：找不到复选框的 UISelectMany 组件。”

任何人都可以帮助我并告诉我在dataTable中使用复选框的正确方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-24T22:00:01.197

您是否尝试过使用类似的东西

```
<ice:column>

    </ice:checkbox value="#{BEAN.ATTRIBUTE}"></ice:checkbox>

</ice:column> 
```

确保在 Faces-config.xml 中将 BEAN 定义为托管 bean，并且 Attribute 应该是该 bean 的布尔类型的成员。

# javascript - 如何以另一种形式获取隐藏字段的值

> ID：876707
> 
> 赞同：0
> 
> 时间：2009-05-18T08:15:32.803
> 
> 标签：javascript, asp.net, vb.net

我在 form1.aspx 中的 hdnField 中有值。我在 javascript 中为 hdnfield 分配了一个值。我想以另一种形式 form2.aspx 在 aspx.vb 中获取该值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T09:09:29.467

如果您的 Form1.aspx 提交给 Form2.aspx，那么您至少有几种方法可以访问表单字段（包括隐藏字段）的值：

*   Request.Form 属性公开了一个`NameValueCollection`包含所有提交的表单字段名称作为键和它们的值作为值。您可以使用语法`Request.Form["fieldName"]`来访问该值。

*   如果这是 ASP.NET 2+ 并且您使用了跨页发布技术，您将能够使用`PreviousPage`Page 的属性访问上一页中的字段值。

*   如果使用`Server.Transfer`，则可以使用 Current 访问值`HttpContext`。

如果您需要更多信息，您应该查看[在 ASP.NET 中的页面之间传递值](http://msdn.microsoft.com/en-us/library/6c3yckfw.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T08:17:57.637

我认为您的会话概念是错误的。Session 是一个服务器端对象，而 javascript 在客户端上运行，因此您不能直接将该值分配给会话。相反，您可以使用一些 AJAX 将其发送到服务器，然后在服务器中添加代码以便分配值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T08:43:42.607

嗯...您必须首先考虑服务器端和客户端之间的区别...您不能直接访问您在服务器端的客户端中所做的更改，因为您曾经向服务器发送请求，作为响应您会显示该站点在您的浏览器中。一旦您收到请求，服务器就已完成并且无法再访问该站点。它就像一封你寄走的信。一旦你把它放入邮箱，你就不能再进行更改了。但是您可以向服务器发布一个新请求并添加 POST 或 GET peremeters。这些可以被服务器访问。您发送请求的方式无关紧要......您可以使用 AJAX 发送请求或简单地重新加载页面。

# mysql - mysql性能

> ID：876709
> 
> 赞同：0
> 
> 时间：2009-05-18T08:16:04.690
> 
> 标签：mysql, innodb

我们正在使用 innoDB 引擎在 MySql 中开发我们的数据库。该数据库包含一个 varchar 类型的列，每个条目包含大约 3000 个字符。我们将在此列上提供搜索。为了加快速度，我们需要在该列上添加索引。你能提供一些这方面的信息吗？

我们需要放入哪种类型的索引来加快搜索速度？我们是否需要对它进行一些其他的关注以提高性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T08:35:34.387

如果通过搜索，您的意思是您将执行如下查询：

```
SELECT * from cars WHERE car LIKE '%{search_str}%' 
```

那么恐怕即使您向`car`列添加键 mysql 仍然必须执行全扫描，并且您的查询可能会非常慢。

如果您计划支持要搜索的大量数据并期望一些高 qps 数字，我建议您查看[Apaches Lucene](http://lucene.apache.org/)项目，它可以大大加快执行的任何搜索查询。此外，它还支持全文搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T08:44:13.590

就像鸭子说的那样，如果您要使用 SQL LIKE 查询列，那么无论您在列上放置什么索引，查询都会非常慢。

有2个选项：

*   切换到 MyIsam 数据库而不是 InnoDB 并在此列上使用全文搜索。这是通过在列上放置一个“全文”索引来完成的。[更多信息。](http://dev.mysql.com/doc/refman/5.1/en/fulltext-search.html)
*   使用 Lucene 之类的工具进行全文搜索

# r - 在 R 中绘制简单数据

> ID：876711
> 
> 赞同：21
> 
> 时间：2009-05-18T08:16:10.573
> 
> 标签：r, plot

我有一个逗号分隔的文件，名为`foo.csv`包含以下数据：

```
scale, serial, spawn, for, worker
5, 0.000178, 0.000288, 0.000292, 0.000300
10, 0.156986, 0.297926, 0.064509, 0.066297
12, 2.658998, 6.059502, 0.912733, 0.923606
15, 188.023411, 719.463264, 164.111459, 161.687982 
```

我基本上有两个问题：

1) 如何绘制第一列（x 轴）与第二列（y 轴）？我正在尝试这个（通过阅读[这个网站](http://www.ats.ucla.edu/stat/R/gbe/scatter.htm)）：

```
data <- read.table("foo.csv", header=T,sep=",")
attach(data)
scale <- data[1]
serial <- data[2]
plot(scale,serial) 
```

但我得到了这个错误：

```
Error in stripchart.default(x1, ...) : invalid plotting method 
```

知道我做错了什么吗？一个[快速的谷歌搜索](http://www.nabble.com/Problems-producing-a-simple-plot-td23347296.html)发现其他人有同样的问题，但没有相关的答案。更新：事实证明，如果我跳过中间的两个赋值语句，它工作得很好。知道这是为什么吗？

第二个问题在第一个问题之后很容易出现：

2）如何绘制第一列（x 轴）与 y 轴上的所有其他列？我想一旦我解决了我遇到的第一个问题，这很容易，但对 R 来说有点新，所以我仍然在思考它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-18T09:25:08.140

您不需要这两行：

```
scale <- data[1]
serial <- data[2] 
```

因为 scale 和 serial 已经从`read.table`.

还`scale <- data[1]`从 a 创建一个元素`data.frame`

```
 data[1]
1     5
2    10
3    12
4    15 
```

而`scale`from`read.table`是一个向量

```
5 10 12 15 
```

并且`plot(scale, serial)`函数需要向量而不是data.frame，所以你只需要做

```
plot(scale, serial) 
```

在 y 轴上绘制其他数据列的一种方法：

```
plot(scale,serial, ylab="")
par(new=TRUE) 
plot(scale,spawn,axes=F, ylab="", type="b")
par(new=TRUE) 
plot(scale,for., axes=F, ylab="", type="b")
par(new=TRUE) 
plot(scale,worker,axes=F, ylab="", type="b") 
```

可能有更好的方法可以做到这一点，但这超出了我目前的 R 知识......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-07-22T02:44:39.433

In your example,

```
plot(scale, serial) 
```

won't work because `scale` and `serial` are both data frames, e.g.

```
class(scale)
[1] "data.frame" 
```

You could try the following and use `points()`, once the plot has been generated, to plot the remaining columns. Note, I used the `ylim` parameter in `plot` to accommodate the range in the third column.

```
data <- read.csv('foo.csv', header=T)
plot(data$scale, data$serial, ylim=c(0,750))
points(data$scale, data$spawn, col='red')
points(data$scale, data$for., col='green')
points(data$scale, data$worker, col='blue') 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-14T17:36:56.153

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-18T08:56:02.270

我远非 R 专家，但我认为你需要一个 data.frame：

```
plot(data.frame(data[1],data[2])) 
```

它至少在我的 R 设置上绘制了一些东西！

按照 luapyad 的回答中的建议，我想出了这个。我将标题重命名为“比例”：

```
scaling, serial, spawn, for, worker
5, 0.000178, 0.000288, 0.000292, 0.000300
10, 0.156986, 0.297926, 0.064509, 0.066297
12, 2.658998, 6.059502, 0.912733, 0.923606
15, 188.023411, 719.463264, 164.111459, 161.687982 
```

然后：

```
foo <- read.table("foo.csv", header=T,sep=",")
attach(foo)
plot( scaling, serial ); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-18T09:55:31.510

试试这个：

```
data <- read.csv('foo.csv')
plot(serial ~ scale, data)
dev.new()
plot(spawn ~ scale, data)
dev.new()
plot(for. ~ scale, data)
dev.new()
plot(worker ~ scale, data) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-01T04:26:39.507

There is a simple-r way of plotting it:

[https://code.google.com/p/simple-r/](https://code.google.com/p/simple-r/)

Using that script, you just have to type:

```
r -cdps, -k1:2 foo.csv 
```

To get the plot you want. Put it in the verbose mode (-v) to see the corresponding R script.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-02T00:39:41.870

```
data <- read.table(...)
plot(data$scale,data$serial) 
```

# c# - 在 C# 中使用 FtpWebRequest 时设置端口号

> ID：876712
> 
> 赞同：9
> 
> 时间：2009-05-18T08:16:36.920
> 
> 标签：c#, ftpwebrequest

当我尝试使用 VS2008 作为调试器从 C# 代码 FTP 到我的 Win 2008 服务器时，我不断收到异常。

我的测试类如下所示：

```
public class FTP
{
    private string ftpServerIP = "192.168.10.35:21";
    private string ftpUserID = "Administrator";
    private string ftpPassword = "XXXXXXXX";
    private string uploadToFolder = "uploadtest";

    public void Upload(string filename)
    {
        FileInfo fileInf = new FileInfo(filename);
        string uri = "ftp://" + ftpServerIP + "/" + uploadToFolder + "/" + fileInf.Name;
        FtpWebRequest reqFTP;

        reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri(uri));
        reqFTP.Credentials = new NetworkCredential(ftpUserID, ftpPassword);
        reqFTP.KeepAlive = false;
        reqFTP.Method = WebRequestMethods.Ftp.UploadFile;
        reqFTP.UseBinary = true;
        reqFTP.ContentLength = fileInf.Length;

        int buffLength = 2048;
        byte[] buff = new byte[buffLength];
        int contentLen;

        FileStream fs = fileInf.OpenRead();
        try
        {
            Stream strm = reqFTP.GetRequestStream();
            contentLen = fs.Read(buff, 0, buffLength);

            while (contentLen != 0)
            {
                strm.Write(buff, 0, contentLen);
                contentLen = fs.Read(buff, 0, buffLength);
            }

            strm.Close();
            fs.Close();
        }
        catch (Exception ex)
        {
            throw new Exception(ex.Message);
        }
    }
} 
```

当我执行代码时，我在 GetRequestStream() 调用中收到一个连接失败并出现 FTP 错误 227。在异常中，我可以看到连接失败：192.168.10.35:52184

我不知道它是如何产生端口 52184 的。我在 ftpServerIP 中指定它应该是端口 21。

我在 google 上发现了一些有同样问题的人，但我没有找到一个很好的例子来说明如何解决这个问题，我仍然不明白为什么会发生这种情况。

有谁知道如何处理这个问题？？

更新：

我尝试连接到不同的 FTP 帐户，一切正常。因此我测试了我的 192.168.10.35:21 FTP，但它在 CuteFTP Pro 等中运行良好。这只会让它更加奇怪..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-18T08:25:27.277

我的猜测是 Windows 防火墙问题，FTP 使用的端口不仅仅是端口 21 - 有时将 FTP 模式从主动更改为被动有助于使事情正常进行。

```
reqFTP.UsePassive = false; 
```

看看这篇关于 FTP 的好文章：[Active FTP vs. Passive FTP, a Definitive Explanation](http://slacksite.com/other/ftp.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-18T09:08:25.460

Thies 是对的，它与被动模式有关

代码中的修复非常简单:)

```
reqFTP.UsePassive = false; 
```

它工作得很快而且没有错误！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-24T22:29:56.493

区分 COMMAND 端口和 DATA 端口很重要。连接协议也将根据您处于 ACTIVE 或 PASSIVE 模式而改变。

活动模式：

1) 客户端从一个随机的未指定 COMMAND 端口 (N > 1023) 到默认服务器 COMMAND 端口 (21) 发起连接。客户端将指定他的 DATA 端口 (N+1) 并开始侦听此端口。

2）服务器发起一个从他的默认DATA端口（20）到指定客户端DATA端口（N+1）的连接。

被动模式：

1) 客户端使用 PASSIVE 命令从随机未指定的 COMMAND 端口 (N > 1023) 到默认服务器 COMMAND 端口 (21) 发起连接。服务器打开一个随机的 DATA 端口（P > 1023）并将其发送给客户端。

2）客户端发起一个从他的DATA端口（N+1）到指定的服务器DATA端口（P>1023）的连接。

如果您使用 ACTIVE 模式，您很可能需要让客户端的防火墙接受从服务器到您的端口（N+1 > 1024）的连接。

In your example, you were in ACTIVE mode. Your client initiated a connection from his COMMAND port (52183) to the server's default COMMAND port (21) and specified its DATA port (52184 = 52183 + 1). Then the server initiated a connection from its default DATA port (20) to the client's DATA port (52184) which was most likely rejected by the client's firewall.

I hope this helps you solve your problem!

# c# - 用于访问 ActiveDirectory 的代码的单元测试

> ID：876715
> 
> 赞同：11
> 
> 时间：2009-05-18T08:17:07.480
> 
> 标签：c#, unit-testing, active-directory, mocking

对访问 ActiveDirectory 和/或模拟对 AD 的依赖项的应用程序进行单元测试的最佳方法是什么？

所有必需的类型，例如`DirectorySearcher`and`DirectoryEntry`似乎都不容易模拟。

我们有类似`FindByUserName()`并且想要（单元）测试它们的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-18T08:25:31.053

如果它们不是可模拟的（手头没有 MSDN，所以我无法确定），您总是可以将它们抽象为`IDirectorySearcher`and`IDirectoryEntry`并模拟它们。使用这种方法，您可以通过专门定制 API 来满足您的需求来简化 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T20:36:33.783

有没有其他可能使用轻量级目录服务器（ldap），就像java开发人员在.NET中使用Apache DS（ [http://directory.apache.org ）一样？！](http://directory.apache.org)

这将是一个不错的选择。

# sql - RDBS 何时使用复杂索引进行查询，何时使用简单索引？

> ID：876723
> 
> 赞同：1
> 
> 时间：2009-05-18T08:23:48.187
> 
> 标签：sql, performance, indexing, rdbms

假设我的数据库模式中有一个名为 TEST 的表，其中包含字段（id、name、address、phone、comments）。现在，我知道我将为该表执行大量不同的查询，因此我的问题是下一个，何时以及为什么要创建像 ID_NAME_INDX（id 和名称的索引）这样的索引以及何时创建更有效分别索引 id 和索引 name 字段（当我的意思是什么类型的查询时）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T08:30:00.903

一般目标是“覆盖”所有列，因此查询只需使用索引。

```
-- An index on Name including ID would be ideal
SELECT
    [id]
FROM
    TEST
WHERE
    [name] = 'bob' 
```

假设您需要 name 和 indx 但有单独的索引。您最终会从索引到 PK 进行书签查找以获取其他列（假设它不只是扫描 PK）

编辑，在第一条评论之后：

```
select * from test where id='id1' and name='Name1' 
```

对于此查询， SELECT * 但会缓解任何索引，因此将使用 PK。如果你有：

```
select address from test where id='id1' and name='Name1' 
```

那么 ID 上的索引，包括地址在内的名称将“覆盖”它。

使用“OR”会给任何策略带来困难。然而，

```
select address from test where id='id1' and name='Name1' 
```

仍然最有可能使用“ID，名称，包括地址” inex，但扫描它而不是寻找

阅读本文：[执行计划基础](http://www.simple-talk.com/sql/performance/execution-plan-basics/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T08:51:58.753

我不确定您的示例是否解释了您要问的实际问题。你是说你是否应该在 ID 和 Name 上有一个索引，而不是在 ID 和 Name 上都有一个索引。问题是，我猜 ID 是您的主键，因此您不太可能对 ID AND Name 进行搜索。

但是，就具有两个 ID 的表而言，您希望在其中一个上搜索，或者同时搜索两个 ID，然后具有三个索引，每个 ID 上一个，一个结合起来将是最快的。如果您有两个索引，那么要查找您要查找的记录，则需要搜索两个索引。但是，如果您有一个涵盖两个 ID 的索引，则只需搜索该索引。

与所有索引一样，当您添加它们时，您的数据库会增加大小，并且您将降低插入/更新性能。您总是需要权衡收益/损失。

向绝对明显的候选者添加索引，在需要时向“可能”的候选者添加索引。继续监控您的数据库性能并运行查询分析器，以查看随着时间的推移可以在哪里获得任何性能提升。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T08:38:05.893

大多数数据库软件都包含某种工具来调试您的查询。这些通常可以告诉您服务器考虑了哪些索引以及最终使用了哪些索引。此功能通常称为解释或类似名称。

通常您应该为 where 子句或连接中使用的列创建索引。

# mysql - 如何比较 MySQL 数据库模式

> ID：876731
> 
> 赞同：9
> 
> 时间：2009-05-18T08:30:27.487
> 
> 标签：mysql, schema

我正在寻找一种工具，可以让我比较 MySQL 数据库的模式。
哪个是最好的工具？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-18T08:40:25.127

Navicat 能够为你做到这一点。它还将在两个 mysql 数据库实例之间同步模式和/或数据。我过去曾成功使用过它。

[http://www.navicat.com/en/products/navicat_mysql/mysql_overview.html](http://www.navicat.com/en/products/navicat_mysql/mysql_overview.html)

这里有数据和结构同步工具的截图：

[http://www.navicat.com/en/products/navicat_mysql/mysql_detail_mac.html#7](http://www.navicat.com/en/products/navicat_mysql/mysql_detail_mac.html#7)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-07-29T09:59:06.837

也许聚会有点晚了，但我刚刚用 PHP 编写了一个简单的工具来比较 MySQL 数据库模式：

[比较 MySQL 数据库模式的 PHP 脚本](https://github.com/joefreeman/dbdiff) [如何使用该脚本](https://web.archive.org/web/20160203150852/http://joef.co.uk/blog/2009/07/php-script-to-compare-mysql-database-schemas)

它在进行比较之前导出模式并对其进行序列化。这样可以比较驻留在不同主机上的数据库（PHP 脚本可能无法访问这两个主机）。

**编辑：**

[Python 脚本](https://github.com/cj203/compare_mysql/blob/master/schema_diference.py)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-18T09:39:14.117

我使用 SQLyog：

[http://www.webyog.com/en/](http://www.webyog.com/en/)

它不是免费的，但它是一个非常好的工具，并且已经多次节省了它的许可证成本。我与该公司没有任何关系，只是一个使用过许多 MySQL 工具的人。

[可从此处](http://www.webyog.com/en/downloads.php)免费试用（30 天）。

![在此处输入图像描述](https://i.stack.imgur.com/dCzMA.png)

* * *

## 回答 #4

> 赞同：-9
> 
> 时间：2009-05-18T08:39:22.070

最好的办法是尝试一些已经存在的性能基准。使用久经考验的基准总是更好，除非您完全确信您的数据和数据库加载将与传统的使用模式有很大不同（但是，那么，您使用数据库的目的是什么？）。我[要从 ServerFault 窃取我自己的答案](https://serverfault.com/questions/219/how-do-you-choose-a-mysql-database-engine/232#232)：

> 对于不同的 MySQL 数据库引擎，有大量的基准测试。在[Percona MySQL 性能博客](http://www.mysqlperformanceblog.com/)上比较了 MyISAM、InnoDB 和 Falcon ，见[这里](http://www.mysqlperformanceblog.com/2007/01/08/innodb-vs-myisam-vs-falcon-benchmarks-part-1/)。
> 
> 上述两个引擎（MyISAM 和 InnoDB）之间要考虑的另一件事是它们的锁定方法。MyISAM 执行表锁定，而 InnoDB 执行行锁定。有很多事情需要考虑，而不仅仅是彻头彻尾的性能数据。

# windows-installer - 在 Vista Home/Premium/Ultimate 中安装 Shield 2009 Premier Custom Action 问题

> ID：876734
> 
> 赞同：0
> 
> 时间：2009-05-18T08:34:47.383
> 
> 标签：windows-installer, action

环境：安装 Shield 2009 Premier、Vista（Home/Premium、Ultimate）

我在 Install Shield 2009 中有一个自定义操作，它会在安装过程中触发。如果 setup.exe 运行良好，但在 Vista 中运行 MyApplication.msi 时（请注意在其他操作系统中自定义操作工作正常），它会显示运行自定义操作的异常。自定义操作只是执行带有命令行参数的 exe。

该 exe 在该操作系统中单独执行得很好。但是当 MyApplication.msi 想要运行它时，它会显示一个异常。

我认为：MyApplication.msi 不能赋予该自定义操作（.exe 文件）适当的权限（管理）来运行。但是 setup.exe 可以。

怎么解决……？

* * *

从我的自定义操作的自定义操作向导中，对于“脚本内执行”值，我选择了“系统上下文中的延迟执行”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T14:24:06.477

您没有说明，但听起来您的 setup.exe 有一个需要管理权限的清单（如果您在启动 setup.exe 时收到 UAC 提示，就是这种情况）。听起来您尝试从自定义操作运行的 exe 也可能具有类似的管理权限要求。MSI 中的 exe 自定义操作使用无法提升的 CreateProcess。

如果您的操作在 UI 序列中运行，您需要以某种方式使用 ShellExecute 或 ShellExecuteEx - 这可以通过使用带有标志 LAAW_OPTION_USE_SHELLEXECUTE 的 LaunchApplication 的 InstallScript 自定义操作或直接调用 ShellExecuteEx 的 C++ 来完成。

如果您的操作在执行序列中运行，则应将其标记为“在系统上下文中延迟”，以便从提升的上下文开始启动它。这通常是首选（至少在用户体验方面），因为它避免了其他方法将显示的额外 UAC 提示。但是，任何延迟操作都有限制（例如最小的属性访问），您可能需要熟悉。

# linux - Linux iNotify one shot 和 event mask 问题

> ID：876740
> 
> 赞同：2
> 
> 时间：2009-05-18T08:39:21.743
> 
> 标签：linux, filesystems, glibc, inotify

我正在尝试在 linux rhel5、内核 2.6.18、glibc 2.5-18 中使用 iNotify。我没有将事件定义为一枪，但出于某种原因，它的行为就像我做了一样。影响是我必须在每次活动后重新添加手表。有人用过 iNotify 吗？另一个问题是事件对象中返回的掩码只包含一个标志：IN_ONE_SHOT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:11:48.997

很可能 inotify 正在隐式删除监视，因为正在删除文件。[手册页](http://www.kernel.org/doc/man-pages/online/pages/man7/inotify.7.html)巧妙地引用了该行为（请参阅有关 IN_IGNORED 事件的部分）。您可以通过检查是否在调用`read`.

另请参阅[修改和保存文件时的 inotify delete_self 以](https://stackoverflow.com/questions/2754954/inotify-delete-self-when-modifying-and-saving-a-file?rq=1)了解为什么在您认为只是修改的过程中文件可能在您不知情或不采取行动的情况下被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T14:14:29.087

写出你能写出的最小的例子并进行测试。如果它证明了您正在谈论的行为，请将其添加到您的问题中。如果它表现正常，则添加更多代码并再次测试。不断重复，直到您重现错误或您的代码正常工作。我经常发现构建一个玩具程序可以准确地告诉我我做错了什么，而我在更大的程序中看不到。

# bug-tracking - 有没有办法离线运行 Trac？

> ID：876747
> 
> 赞同：6
> 
> 时间：2009-05-18T08:43:42.513
> 
> 标签：bug-tracking, trac, offline, issue-tracking

我想下载[Trac](http://trac.edgewall.org/)数据库，以便离线查看其票证。有没有办法做到这一点？即，如果我需要离开办公室并随身携带笔记本电脑，如何在无需连接到公司网络的情况下随身携带门票？

我知道[Mylyn](http://www.eclipse.org/mylyn/)可以通过它的 trac 连接器下载和同步票证，但我想要一些独立的查看器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-17T23:46:10.533

请参阅[简单缺陷 (SD)](http://syncwith.us/sd/)。

我特别喜欢“一条推文安装”的想法。

```
I’m installing #SD (http://syncwith.us) 
after reading about it on #StackOverflow
curl fsck.com/sd|perl; 
export $PATH=~/sd/bin:$PATH; sd 
```

请注意，您可以[在 SD 中克隆 Trac（和其他错误跟踪器）](http://syncwith.us/sd/using/#sharingticketdatabases)：

```
sd clone --from trac:https://trac.parrot.org/parrot 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T09:35:31.783

既然不想安装服务器，那用RSS怎么样？IIRC，Trac 让您可以获取每个人的 RSS 提要，因此您可以拥有分配给您的事物的提要。

然后，您需要做的就是获得一个可以下载这些票证的好客户端。您应该能够在没有互联网连接的情况下访问纯文本版本。

如果这不够灵活，您可以在服务器上编写脚本以直接使用数据库发布提要。

如果 RSS 不适合您（并且您的电子邮件可以离线使用），您可以将报告邮寄回家。Trac 也有这个内置的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-11T21:13:59.197

默认的 Trac 安装使用 SQLite 的组合来维护所有数据。附件存储在文件系统中。

在包含 trac 站点的文件夹中，找到 \db\trac.db

可以使用[SQLite 管理器 Firefox 插件查看此文件](https://addons.mozilla.org/en-US/firefox/addon/5817)

狩猎愉快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T09:39:38.470

如果 RSS 或电子邮件不是您选择的通知，则有一个 trac 插件，可让您在“[记住牛奶”](http://www.rememberthemilk.com)待办事项列表中接收任务通知。

见： http: [//1.www.rememberthemilk.com/forums/ideas/3580/ ?forum=ideas&hl=bs&topic=3580](http://1.www.rememberthemilk.com/forums/ideas/3580/?forum=ideas&hl=bs&topic=3580)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-14T18:13:59.810

如果您的目标只是离线**查看**门票，那么如何

1.  运行包含所有票证（或所有您感兴趣的票证）的报告。
2.  选择页面底部的逗号分隔或制表符分隔的下载链接。
3.  将下载的文件导入 Excel。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-18T08:52:13.527

你可以将它安装在本地机器上

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-18T08:52:40.607

您可以在本地托管 trac 并将连接字符串指向您下载的数据库。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-18T08:54:20.277

当然。在本地安装 Web 服务器，安装 trac，将其设置为与实时版本相同（或相似）的方式，然后编写服务器脚本以发布数据库备份并编写本地脚本来下载这些备份并恢复它们你的数据库。

这并不简单（根据我的经验，安装 Trac 本身就是一场战斗），但每个元素都是高度可搜索的 =）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-05T03:09:15.387

[https://trac.edgewall.org/wiki/Clients](https://trac.edgewall.org/wiki/Clients)中列出 的 trac 客户端 FatBug ( [http://fat-bug.com/](http://fat-bug.com/) ) 似乎完全符合 OP 的描述。我刚检查 SD 后碰到它。SD 在 Linux 上似乎很琐碎，但在 Windows 上很重，它依赖于 Perl 和 CPAN。

# c# - 在 WPF 的 RichTextBox 中打开 PDF 文件

> ID：876749
> 
> 赞同：1
> 
> 时间：2009-05-18T08:43:45.103
> 
> 标签：c#, wpf, pdf, richtextbox

我可以在 RichTextBox 中打开 PDF 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T08:56:00.523

简短的回答：没有。

更长的答案：不。 RichTextBox 用于显示富文本。PDF 可以包含任何内容，包括文本，但这不是 RichTextBox 底层的文档模型。此外，WPF 本身并不处理 PDF。但是，有第三方控件。

[这个问题](https://stackoverflow.com/questions/55083/opening-a-pdf-in-wpf-application)也有一些可能对你有用的指针，尽管没有使用 RichTextBox。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T09:11:47.113

您需要使用 Acrobat Control for ActiveX 或至少 Adob​​e Reader 9 等效版本，并用作

```
using PdfLib;
namespace WindowsFormsApplication1{
public partial class ViewerForm : Form{
    public ViewerForm()
    {
     InitializeComponent();
     PdfLib.AxAcroPDF axAcroPDF1;
     axAcroPDF1.LoadFile(@"C:\Documents and Settings\jcrowe\Desktop\Medical Gas\_0708170240_001.pdf");
     axAcroPDF1.Show(); }

    private void richTextBox1_TextChanged(object sender, EventArgs e)
    {   } } } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T09:23:19.447

您可以在几秒钟内编写一个包含 WebBrowser 控件的简单应用程序，只需调用导航方法并为其提供指向所需文档的 URL。

XAML：

```
<Grid>
    <WebBrowser x:Name="Browser"/>
</Grid> 
```

C＃：

```
private void Window1_Loaded(object sender, WindowLoadedArgs args)
{
    Browser.Navigate(new URL("path to document.pdf");
} 
```

注意：我是从内存中写的，所以考虑这个伪代码而不是按原样工作的东西。

# git - 如何为多个项目和开发人员组设置 git 存储库和权限

> ID：876752
> 
> 赞同：0
> 
> 时间：2009-05-18T08:44:16.023
> 
> 标签：git, permissions, repository, version-control, project-planning

使用 Subversion 可以为存储库中的每个目录设置访问权限。所以例如。一组可以对目录 A 具有提交访问权限，在 B 上读取 - DevA 也对 B 具有提交权限。

如何为 Git 存储库设置这样的结构和权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T08:50:30.923

[Gitosis](http://swik.net/gitosis)可以帮助你。（该页面目前似乎已关闭，但源代码仍可在[http://eagain.net/gitweb/?p=git​​osis.git](http://eagain.net/gitweb/?p=gitosis.git)获得。）

# subsonic - 亚音速，脚手架错误

> ID：876753
> 
> 赞同：1
> 
> 时间：2009-05-18T08:44:24.027
> 
> 标签：subsonic

我使用 Scaffold 来管理我的表格数据，使用 subsonic 2.1。仅对于一个表，我在尝试查看表数据时收到此错误消息，我多次重新创建相关类但仍然只是为了脚手架我收到此错误，我可以使用表类并自己插入/编辑数据。在我的表中，我有 nvarchar 和 bigint 字段。怎么了？

```
 Error converting data type nvarchar to bigint. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.SqlClient.SqlException: Error converting data type nvarchar to bigint.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[SqlException (0x80131904): Error converting data type nvarchar to bigint.]
   System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +1948826
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +4844747
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) +194
   System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2392
   System.Data.SqlClient.SqlDataReader.HasMoreRows() +157
   System.Data.SqlClient.SqlDataReader.ReadInternal(Boolean setTimeout) +197
   System.Data.SqlClient.SqlDataReader.Read() +9
   System.Data.Common.DataAdapter.FillLoadDataRow(SchemaMapping mapping) +78
   System.Data.Common.DataAdapter.FillFromReader(DataSet dataset, DataTable datatable, String srcTable, DataReaderContainer dataReader, Int32 startRecord, Int32 maxRecords, DataColumn parentChapterColumn, Object parentChapterValue) +164
   System.Data.Common.DataAdapter.Fill(DataSet dataSet, String srcTable, IDataReader dataReader, Int32 startRecord, Int32 maxRecords) +353
   System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) +164
   System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) +287
   System.Data.Common.DbDataAdapter.Fill(DataSet dataSet) +94
   SubSonic.SqlDataProvider.GetDataSet(QueryCommand qry) in C:\svn\subsonicproject\trunk\SubSonic\DataProviders\SqlDataProvider.cs:428
   SubSonic.DataService.GetDataSet(QueryCommand cmd) in C:\svn\subsonicproject\trunk\SubSonic\DataProviders\DataService.cs:523
   SubSonic.SqlQuery.ExecuteJoinedDataSet() in C:\svn\subsonicproject\trunk\SubSonic\SqlQuery\SqlQuery.cs:1449
   SubSonic.Scaffold.BindGrid(String orderBy) in C:\svn\subsonicproject\trunk\SubSonic\Controls\Scaffold.cs:1285
   SubSonic.Scaffold.CreateChildControls() in C:\svn\subsonicproject\trunk\SubSonic\Controls\Scaffold.cs:706
   SubSonic.Scaffold.ddlTables_SelectedIndexChanged(Object sender, EventArgs e) in C:\svn\subsonicproject\trunk\SubSonic\Controls\Scaffold.cs:750
   System.Web.UI.WebControls.ListControl.OnSelectedIndexChanged(EventArgs e) +111
   System.Web.UI.WebControls.DropDownList.RaisePostDataChangedEvent() +134
   System.Web.UI.WebControls.DropDownList.System.Web.UI.IPostBackDataHandler.RaisePostDataChangedEvent() +10
   System.Web.UI.Page.RaiseChangedEvents() +165
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1485

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:2.0.50727.3053; ASP.NET Version:2.0.50727.3053 

CREATE TABLE [dbo].[Tbl_Document](    [Code] [bigint] IDENTITY(111111111,1) NOT NULL,    [DocCode] [nvarchar](20) COLLATE  NULL,    [FkLoginID] [nvarchar](20) COLLATE  NOT NULL,    [CurrentUser] [nvarchar](20) COLLATE  NOT NULL,    [FkStatus] [smallint] NOT NULL,    [TypeWorkFlow] [nvarchar](50) COLLATE NOT NULL,    [Step] [int] NOT NULL,    [Note] [ntext] COLLATE NULL,    [FKProvince] [smallint] NOT NULL,    [NORahgiry] [nvarchar](20) COLLATE Arabic_CI_AS NULL,    [IsLock] [bit] NOT NULL,    [IsArchive] [bit] NOT NULL,    [FKTolidUnit] [nvarchar](20) COLLATE Arabic_CI_AS NOT NULL,    [OldUnitCode] [nvarchar](50) COLLATE Arabic_CI_AS NULL, CONSTRAINT [PK_Tbl_Document_1] PRIMARY KEY CLUSTERED (    [Code] ASC)WITH (IGNORE_DUP_KEY = OFF) ON [PRIMARY]) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]GO 
```

# jquery - 在 JQuery 中的每个 EditInPlace 上插入数据库

> ID：876754
> 
> 赞同：0
> 
> 时间：2009-05-18T08:44:49.453
> 
> 标签：jquery

如何在 JQuery 中的每个 editInplace 上插入数据库..

```
 <script type="text/javascript">
                   var increment = 0;
        $(document).ready(function(){
                       $(".menu a").click(function () {
                        increment++;
   $("<div> Label </div>").appendTo(".menu li").addClass("div" + increment);
                 $(".div" + increment).show(function () {
           $(".div" + increment).editInPlace({
                url: "./server",
                show_buttons: true
                    });//editinplace

                         });//show
               });//click
            });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T08:46:57.483

您不能仅使用 JQuery 插入数据库。您必须使用 AJAX 将数据发送到服务器，然后在那里插入数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T09:07:48.127

使用 Jquery 插入数据库的最佳方法是使用 Jquery 调用包含其他代码的页面，这些代码可以轻松插入数据库。

最常见的方法是使用 PHP 和 Jquery 的 post/get/ajax 功能来调用具有用于插入数据库的 PHP 代码的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T09:09:13.570

您可以使用 asp.net 页面方法来处理来自就地编辑的 ajax 请求，并以该方法处理将信息推送到数据库中。我在我当前的项目中这样做，这对用户来说真的很有吸引力，因为他们不必刷新整个页面来进行小改动！！！

# amazon-product-api - 如何通过亚马逊API获取书籍封面图片

> ID：876758
> 
> 赞同：9
> 
> 时间：2009-05-18T08:48:39.977
> 
> 标签：amazon-product-api

我想通过亚马逊 API 从它的 ASIN 中获取一本书的封面。我使用该`ItemLookup`功能，但我只得到`author`,`manufacturer`和`title`.

IE ：

```
<ItemAttributes>
<Author>Anna Gavalda</Author>
<Manufacturer>J'Ai Lu</Manufacturer>
<ProductGroup>Book</ProductGroup>
<Title>Ensemble, C'Est Tout (French Edition)</Title>
</ItemAttributes> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T09:07:16.133

请参阅[如何从 Amazon Book API 获取图书图形和描述？](https://stackoverflow.com/questions/433104/how-do-i-get-a-book-graphic-and-description-from-the-amazon-book-api)

此外，关于在此处使用亚马逊图片的有趣文章：http: [//bibwild.wordpress.com/2008/03/19/think-you-can-use-amazon-api-for-library-service-book-covers/](http://bibwild.wordpress.com/2008/03/19/think-you-can-use-amazon-api-for-library-service-book-covers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:25:46.617

你可以试试这个：

```
$track=$_GET['title'];

// Call To Amazon Predefined Class
$client = new AmazonECS(AWS_API_KEY, AWS_API_SECRET_KEY, 'com', AWS_ASSOCIATE_TAG);
$response = $client->category('Books')->responseGroup('Images,Reviews,ItemAttributes,OfferSummary')->search($track);

// To Get Image
<img src="<?php echo $response->Items->Item[0]->LargeImage->URL ?>" width="233" height="300"> 
```

# c# - 如何用某种颜色突出显示树视图选定的项目？

> ID：876759
> 
> 赞同：6
> 
> 时间：2009-05-18T08:49:09.523
> 
> 标签：c#, wpf, xaml, treeview, selecteditem

我在 WPF 中有一个树视图。当我选择树视图项时，我想要不同的颜色。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2010-11-16T16:17:56.203

*TreeView.ItemContainerStyle*中的简单触发器无法为默认的 TreeView 模板提供帮助。

对于标准模板突出显示是通过特定的背景更改完成的*TreeView 模板内的元素。如果不更改 TreeView 模板，程序员将无法访问此特定元素。默认资源**用于设置此元素的背景以突出显示。***

 ***所以有几种方法：

1.  简单（但可能产生副作用）：使用TreeView 或*ItemsPanel*模板的键**{x:Static SystemColors.HighlightBrushKey}重新定义资源；**
**   重新定义 TreeView 的完整模板。*

 ** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2010-03-19T05:25:01.273

试试下面的代码。它应该工作。

```
<Style TargetType="{x:Type TreeViewItem}">
    <Style.Triggers>
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="Background" Value="Yellow"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

# mercurial - Mercurial：还原一个大块

> ID：876763
> 
> 赞同：18
> 
> 时间：2009-05-18T08:51:39.050
> 
> 标签：mercurial, tortoisehg, revert

我如何在 Mercurial 中恢复单个大块，类似于在 darcs 中完成的方式，即它询问我是否要恢复每个大块和文件？可以使用 TortoiseHg 吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-02-23T08:04:30.287

实际上，至少在 Shelve 工具中，mercurial 指的是“块”。这让我想到了最喜欢的方式来恢复它们（以及 TortoiseHg 最喜欢的功能）。

只需将要还原的块移动到您创建的专门用于删除的架子上。只要按照您的需要识别块，这就会非常有效。如果没有，您别无选择，只能手动执行某些操作。

如果您使用 TortoiseHg Workbench 或 VisualHg，很容易使用 Shelve 工具：在 diff 模式切换按钮旁边有一个按钮。如果您不熟悉货架，请帮自己一个忙并开始使用它。当我忘记提早提交或决定从提交中省略实验代码时，它为我节省了很多麻烦。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-21T11:56:16.387

该[`record`扩展](http://mercurial.selenic.com/wiki/RecordExtension)的灵感来自`darcs record`. 它将允许您仅将特定的大块*添加*到下一次提交，即与您想要的相反。但是你可以添加除了你想要恢复的那个之外的所有大块，然后做一个`hg revert`来恢复它。有点倒退，我知道... :-)

你也可以这样做`hg diff > patch; hg revert`，编辑`patch`以删除大块并`hg import --no-commit`重新应用补丁。这可能更快，但需要您手动编辑补丁。我在 Emacs 上取得了巨大的成功`diff-mode`，但既然您询问 TortoiseHg，您可能不想使用 Emacs。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-10-01T09:19:47.200

要反转单个文件上的变更集，请尝试：

> 汞差异-c | 补丁-R

这将反转该文件名上该修订引入的变更集。现在，如果可以在其中包含相同的 darcs/git 风格的樱桃采摘行为，我会非常高兴。

# c# - 使用 autoflush='false' 完成自定义 TraceListener (C#, .net)

> ID：876768
> 
> 赞同：2
> 
> 时间：2009-05-18T08:53:02.807
> 
> 标签：c#, .net, configuration, trace

我正在编写一个自定义跟踪侦听器来将跟踪消息写入添加轮换的文件（例如每天更改文件名）。
在`Flush`方法的覆盖中，我调用`Flush`了底层`StreamWriter`，但如果我`autoflush='false'`在应用程序配置中设置，`Flush`则在应用程序终止时不会被调用。

应用程序退出时完成自定义跟踪侦听器的正确方法是什么？

编辑：我覆盖了该`Dispose(bool disposing)`方法，因为基`TraceListener`类已经实现了一次性模式，但是，据我所知，该方法没有被调用。如果我实现了显式析构函数，就会调用析构函数，但那时我不应该假设流引用仍然有效，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T11:28:42.290

如果您的软件在终止时没有调用 Trace.Close，那么您无法确保完成任何刷新。有关更多详细信息，请参阅[本文](http://geekswithblogs.net/akraus1/articles/81629.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T09:11:53.550

我建议您`TraceListener`在关闭底层之前在自定义类的 dispose 方法中执行此操作`StreamWriter`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T19:35:38.047

您应该覆盖`Close`自定义跟踪侦听器中的方法，以及`Flush`那里`Dispose`的底层`StreamWriter`。

# gwt - smartGWT 的优缺点

> ID：876770
> 
> 赞同：27
> 
> 时间：2009-05-18T08:54:10.043
> 
> 标签：gwt, smartgwt

几天后我将开始一个 smartGWT 项目的工作，我想知道你有什么样的经历。为了避免使这成为对 smartGWT 或 GWT 的抨击或自由式讨论，我将为讨论提供一些指导：

*   您觉得提供的小部件集成良好吗？有没有你特别想念的小部件？
*   您在设计应用程序时是否遇到过由框架引起的问题？
*   数据源集成是否像 smartClient 团队声称的那样有用？
*   您使用什么方法使您的 smartGWT 应用程序持久化？例如，Hibernate 和 smartGWT 相互配合如何？

随意添加您认为值得指出的任何内容。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-25T17:16:07.203

我想你已经有了答案，但我想补充一些可能会影响你决定的评论：

优点：

*   SmartGWT 是您能找到**的**最全面的基于 LGPL GWT 的小部件库。所以如果你关心 GPL 的痛苦，这就是你的事
*   综合展示。
*   非常好的性能（只需检查 Showcase）。
*   论坛中非常活跃的社区。
*   SmartGWT 扩展是另一个重要的项目。例如，它支持基于 GWT-RPC 的通信，这仅通过 SmartGWT 是不可能的（除非您实现自己的集成）。
*   SmartGWT 开发人员的快速发展步伐。只需计算自 SmartGWT 项目出现以来的发布数量。

缺点：

*   除了展示之外，我有时觉得弄清楚某件事是如何工作的唯一方法就是在论坛上提问。这导致了传播知识库。基于社区的 wiki 会更好。
*   您必须在应用程序中使用大量静态文件（著名的“sc”目录），如果您的后端在 GAE 中，这可能会导致问题（因为 1000 个文件的限制）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2010-12-11T09:58:02.250

我们在上一个项目中使用了 SmartGWT（持续时间：6 个月）。以下是我个人的看法：

小部件真的很棒！文档和 API 很冗长。我们将再次使用客户端。

服务器端集成有效，但没有节省任何开发时间。相反，我们遇到了很多问题，我们必须找到解决方法。此外，由于新的 API，没有其他开发人员可以在投入大量时间学习 SmartGWT API 的情况下维护项目。

一些缺点：

*   您必须学习全新的 API，而不是使用 Hibernate 和 GWT-RPC 或 REST。

*   数据集成是自动完成的，这是真的。但是，如果您需要一些（也很少）更改，则必须像使用 Hibernate 或 JDO 一样编写 XML 映射文件。所以福利没了。

*   论坛的支持很糟糕：几乎每个发布的问题都会得到答案。但这个答案往往无济于事。他们会问你诸如“你为什么要这样做”之类的问题。或者他们说：“使用我们的工具并用它做 XYZ”三遍，尽管我一次又一次地告诉他们这个建议不起作用。在回答了几个问题后，最终答案是：“您需要培训，购买我们的支持”。

*   商业支持非常昂贵（成本大约与 SmartGWT 许可证一样多）。

我们可能不会再使用 SmartGWT 的服务器端集成。

你可以在我的博客上阅读我所有的“经验教训”与优点和缺点：

[http://www.kai-waehner.de/blog/2010/12/11/lessons-learned-smartgwt-2-3-component-library-for-google-web-toolkit-gwt/](http://www.kai-waehner.de/blog/2010/12/11/lessons-learned-smartgwt-2-3-component-library-for-google-web-toolkit-gwt/)

最好的问候， Kai Wähner

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-18T09:05:49.037

> 您觉得提供的小部件集成良好吗？有没有你特别想念的小部件？

您可以创建任何错过的小部件，没有一个框架可以提供您想要的一切。小部件非常可扩展。

> 数据源集成是否像 smartClient 团队声称的那样有用？

数据 (JSON/XML) 可以由 servlet 服务提供，并且它们可以被小部件理解。

> 您使用什么方法使您的 smartGWT 应用程序持久化？例如，Hibernate 和 smartGWT 相互配合如何？

在 GWT 的后端 servlet 服务中，您可以使用 Java 中的任何持久层将数据持久保存在存储中。Hibernate 可以和普通的 java 应用程序一样使用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-19T13:34:02.007

> 您觉得提供的小部件集成良好吗？有没有你特别想念的小部件？

是的。这些小部件具有一致的 API，并且可以很好地协同工作。

> 数据源集成是否像 smartClient 团队声称的那样有用？

这个 IMO 是他们最强大的功能之一。一旦你开始使用他们的 Datasource API，你就会意识到获得一个功能齐全的 CRUD 屏幕只需要很少的代码

> 您使用什么方法使您的 smartGWT 应用程序持久化？例如，Hibernate 和 smartGWT 相互配合如何？

Hibernate 在 SmartGWT EE 版本中开箱即用。使用 Glead 的 LGPL 版本效果很好

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-12-28T10:23:27.960

我认为 SmartGWT 有很多很棒的小部件，但是价格却很高。创建一个简单的基于 SmartGWT 的项目并观察页面加载了多少文件。我认为，这完全违背了 GWT 之类的理想。虽然 SmartGWT 对于在截止日期前的人们来说可能是一个不错的选择，但如果您想要原始性能，请远离它。HTTP 请求的数量只会杀死您的应用程序。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-19T22:29:17.353

*   您在设计应用程序时是否遇到过由框架引起的问题？

是的。当我结合 Google Eclipse 插件、SmartGWT、GWT 1.6.4 和 Wicket 时，gwt 编译器会发出错误的 javascript。我所说的糟糕的 javascript 是指在 webkit 或 firefox 中不起作用的 javascrip。在我将它从 Eclipse 项目中完全删除并重新启动 Eclipse 之前，我无法获得好的 javascript。所以，这种组合是行不通的，我最终在另一个项目中单独构建了 SmartGWT 部分。另一个问题是 Smart 客户端似乎想要在 CSS 意义上控制整个页面。因此，集成的 SmartGWT 模块全部搞砸了，因为样式没有正确隔离。你的旅费可能会改变。

就个人而言，如果您只使用 SmartGWT 并且对于所有事情，那么一切都很可能会很好，但是如果您尝试混合使用它，那么我的结果是灾难性的。所以，我不再使用它了。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-06-10T23:37:31.723

正如上面提到 Wicket 问题的发帖人的对立面，SmartClient 论坛 (forums.smartclient.com) 有成功将 SmartGWT 与各种其他技术集成的报告。这张海报的问题听起来像 1) 导致错误 JavaScript 的 GWT 错误和 2) SmartGWT 和 Wicket 之间的 CSS 命名冲突，可能不是框架的错。SmartGWT 的所有样式名称都可以通过换肤系统重命名，以解决任何此类冲突。

# javascript - iframe 内的输入框

> ID：876772
> 
> 赞同：0
> 
> 时间：2009-05-18T08:54:58.670
> 
> 标签：javascript, browser, iframe

我有一个输入框和 iframe。如果我键入并按后退键删除文本，后退键事件将作为浏览器返回并转到上一页。可能是什么原因。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T09:11:45.640

请告诉您使用哪种浏览器进行了测试。

我的猜测是您的注意力集中在该领域之外？是否有脚本将焦点放在 iframe 中包含输入框的文档上？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T09:20:29.927

我什至不能提出同样的事件。我在 iframe 中按 BackSpace，在输入中按 BackSpace，在主页中按 BackSpace。您使用哪种浏览器？页面中是否有任何 javascript 代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-29T15:27:06.193

这是一种旧的浏览器行为。更新您的浏览器。在最坏的情况下，您可以阻止输入元素的默认事件，使用 jS 库来获得浏览器事件的统一响应。

# html - 如何避免 CSS 选择器应用于多个后代级别

> ID：876773
> 
> 赞同：4
> 
> 时间：2009-05-18T08:55:02.070
> 
> 标签：html, css

如何防止 CSS 应用我的样式做后代的后代而不给他们类或 ID？例如

```
#mycontent table {border: 1px solid red;} 
```

将设置正确的表格样式，然后该表格中的所有表格也将设置样式。我想要的只是要选择的第一个表，而不是所有子表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-18T09:01:38.763

您描述的不是级联，而是简单的选择器匹配。

您可以采取几种方法。

第一种是使用更具体的选择器。如果您要设置样式的表格是子表（而不是孙子或其他更深的后代），那么您可以使用子选择器而不是后代选择器。这在 MSIE 6 中不受支持**。**

```
#mycontent > table { border: 1px solid red; } 
```

第二个是向您实际想要设置样式的表添加更多信息（使用 id 或类）。

```
#mycontent table.tableThatIWantToStyle {} 
```

三是利用级联，对更深的后代进行不同的风格化。

```
#mycontent table { border: 1px solid red; }
#mycontent table table { border: none; } 
```

也就是说，如果您在表格内有表格，那么您很可能滥用它们进行布局 - 这是错误的 - 您应该改正您的标记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T08:58:17.257

您可以使用子选择器：

```
#mycontent > table {border: 1px solid red;} 
```

问题是 IE6 不支持子选择器。如果您需要支持该浏览器，您将不得不做一些更笨重的事情：

```
#mycontent table {border: 1px solid red;}
#mycontent table table {border: none;} 
```

或者，您可以使用类来区分表，这样您就不会得到这种级联效应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T08:58:17.040

给你的表一个类型（类）：

```
table.mycontent {border: 1px solid red;} 
```

所有子表都不应标有 .mycontent。然后样式将仅应用于父表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T09:00:52.730

你为什么不给那个 HTML 表格标签一个 id，'mycontent'，然后按如下方式编写 CSS：

```
表#我的内容{
  边框：1px 纯红色；
}

```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-01-11T15:52:24.683

我有类似的困境，这就是我如何解决它。我的解决方案类似于其他人发布的关于使用更具体的选择器进行适当匹配的解决方案。

假设我有一个嵌套跨度如下，我不希望样式级联到它。

```
<span class="boldText">
     some bolded text
     <span class="italicText">some italic text</span>
</span> 
```

换句话说，我希望它显示为“**一些粗体文本** *一些斜体文本*”而不​​是“**一些粗体文本*一些斜体文本***”（反之亦然）。通过设置特定的选择器来清除嵌套子项上的这些样式，可以如下实现。

```
span span {
   font-weight:normal; /*clear bold style from 'cascading' by specifying it*/
   font-style:normal; /*clear italic style from 'cascading' by specifying it*/
}
.boldText {
   font-weight:bold;
}
.italicText {
   font-style:italic;
} 
```

“跨度跨度”选择器可以确保嵌套跨度将其样式设置为任何必要的样式，以覆盖父跨度的正常级联样式，将它们设置回“正常”无样式状态。然后，跨度本身的特定粗体文本或斜体文本类将在接下来应用该跨度的内容，以粗体或斜体（或两者），因为它们是更具体的选择器。

这里的便利是我不再需要担心父级联到子级的字体格式样式。我可以简单地将适当的格式化类添加到任何跨度，并且只应用该类，而不应用父类。

我可以很容易地为所有嵌套跨度添加一个“.clearBold”和“.clearItalic”类，但这更干净，导致我的应用程序中的代码更少。

# c++ - 在类中调用类

> ID：876776
> 
> 赞同：0
> 
> 时间：2009-05-18T08:55:58.103
> 
> 标签：c++, class

我正在尝试编写一个类，当被问到时，它将调用一个类并使其成为类成员。这是我的意思的一个简单示例：

```
class foo{
  myClass Class;
  foo(); 
};
foo::foo()
{
  //Create the class and set it as the foo::Class variable
} 
```

我确信这实际上是一件容易的事。任何帮助将不胜感激谢谢

**编辑：**抱歉术语不好。我将尝试更简洁地介绍我想做的事情。我正在创建一个类（*foo*），它有一个变量（*Class ）和（* *myClass* ）的类定义。我需要创建一个*myClass*对象并将其分配给*Class*，在类*foo*中。在大家的帮助下，我算是做到了这一点。

我现在的问题是我创建的对象在我试图执行的*myClass*函数的第一行在*Class中给了我一个“未处理的异常”...“访问冲突读取位置 0x000000c0”。**谢谢你的帮助！*

 ***注意：*我目前正在使用 emg-2 的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T09:05:25.247

没有必要做任何事情。假设 myClass 有一个默认构造函数，它将用于为您构造 Class（您可以在这里使用更好的名称，您知道）实例。如果您需要将参数传递给构造函数，请使用初始化列表：

```
foo :: foo() : Class( "data" ) {
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T09:00:04.057

如果您只想合成，请使用 Neil 解决方案。如果你想要一个聚合（即你将外部对象分配给 myClass*Class），你应该使用一个指针：

```
class foo{
  myClass * Class;
  void createClass(); 
};
// can't use name foo, because its a name reserved for a constructor
void foo::createClass() {
  Class = new myClass();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T09:03:00.570

我不确定我是否正确理解了这个问题。但是，如果您尝试按需创建**对象，则可以执行以下操作：**

```
class foo{
  myClass* m_pClass;
  foo();
  myClass* f();
  ~foo();
};

foo::foo() : m_pClass(NULL) //Initialize the pointer to NULL do not create any object in the constructor
{
}

foo::~foo()
{
  //Release the allocated object
  delete m_pClass;
  m_pClass = NULL;
}

myClass* foo::f()
{
  //Create a new object and return
  m_pClass = new myClass;
  return m_pClass;
} 
```

# xtragrid - 如何将 2 列组合框添加到 XtraGrid

> ID：876780
> 
> 赞同：0
> 
> 时间：2009-05-18T08:56:39.710
> 
> 标签：xtragrid

如何向 Xtragrid 添加一个 2 列组合框，其中一个列存储到数据库中，另一个用于在 xtragrid 中显示。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-25T14:27:50.813

您需要创建一个 RepositoryItemLookUpEdit 然后将其设置为您的 column.ColumnEdit 属性：

```
//Set the dropdown values for the cell
RepositoryItemLookUpEdit colCombo = new RepositoryItemLookUpEdit();  
colCombo.ShowHeader = true;  
colCombo.ShowFooter = false;  
colCombo.DataSource = dsRules.YOURTABLE;  
colCombo.DisplayMember = "DESCRIPTION";  
colCombo.ValueMember = "ID"; //Your DB column  
colCombo.TextEditStyle = DevExpress.XtraEditors.Controls.TextEditStyles.DisableTextEditor;  
colCombo.NullText = "";  

//colGRIDCOLUMN is your DevExpress.XtraGrid.Columns.GridColumn  
colGRIDCOLUMN.ColumnEdit = colCombo;  
LookUpColumnInfoCollection coll = colCombo.Columns;  
coll.Add(new LookUpColumnInfo("DESCRIPTION", "DESCRIPTION", 0));  
coll.Add(new LookUpColumnInfo("ID", "ID", 0));
colCombo.BestFit(); 
```

# c - 互斥和 C 套接字

> ID：876782
> 
> 赞同：0
> 
> 时间：2009-05-18T08:58:03.437
> 
> 标签：c, tcp, mutual-exclusion

我正在维护一个现有系统，其中以前的开发人员对每个操作都在套接字上执行，需要多个线程来读取和写入，以前的开发人员已经在控制和互斥锁下执行了 io 操作。是否需要相互排除 C 套接字 IO 操作？或者由于套接字是全双工的，使用互斥体是多余的？只有一个线程

毫无疑问，线程将对象放入的处理队列是共享内存，必须注意相互排斥它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T09:26:13.020

默认情况下，套接字不是线程安全的。因此，如果您有多个线程读取和写入它们，您将需要以某种方式锁定访问（例如使用互斥锁）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T05:37:14.873

在 TCP (AF_INET, SOCK_STREAM) 的情况下，可以有一个不同步的读取器线程 (recv) 和一个写入器线程 (send)。

但是从您的描述中，不清楚在您的代码中使用互斥锁的目的是什么 - 它看起来像“以前的开发人员”同步网络操作不是因为套接字，而是由于您的应用程序协议的要求。许多应用程序以这种方式执行通信：

```
lock
-> send request
<- recv reply
unlock

lock
-> send request
<- recv reply
unlock 
```

此处需要锁定（如果涉及多个线程）以同步发送/接收对，否则您的应用程序协议可能会变成一堆不匹配的请求和回复。

# asp.net - “CombinedScript”中的 ASP.NET 验证错误？

> ID：876788
> 
> 赞同：3
> 
> 时间：2009-05-18T08:59:44.383
> 
> 标签：asp.net, validation

我们有一个 ASP.NET Web 表单应用程序，它偶尔会生成如下所示的验证错误。这可能是什么原因？

```
发生验证错误。

异常类型：System.Web.HttpRequestValidationException

异常消息：潜在危险的 Request.QueryString 值
    从客户端检测到
    (_TSM_CombinedScripts_="... </div> ...")。

请求网址：https://...:443/Default.aspx?_TSM_HiddenField_=
    ctl00_sm1_HiddenField&_TSM_CombinedScripts_=
    %3b%3bAjaxControlToolkit%2c+版本%3d3.5.11119.20050%2c
    +文化%3d中性%2c
    +PublicKeyToken%3d28f01b0e8%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20
    %20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20
    </div>%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20<div%20class=

堆栈跟踪：在 System.Web.HttpRequest.ValidateString(String s, String valueName, String collectionName)
   在 System.Web.HttpRequest.ValidateNameValueCollection（NameValueCollection nvc，字符串 collectionName）
   在 System.Web.HttpRequest.get_QueryString()
   在 System.Web.UI.Page.GetCollectionBasedOnMethod（布尔 dontReturnNull）
   在 System.Web.UI.Page.DeterminePostBackMode()
   在 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）
   在 System.Web.UI.Page.ProcessRequest（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）
   在 System.Web.UI.Page.ProcessRequest()
   在 System.Web.UI.Page.ProcessRequestWithNoAssert（HttpContext 上下文）
   在 System.Web.UI.Page.ProcessRequest（HttpContext 上下文）
   在 ASP.user_default_aspx.ProcessRequest（HttpContext 上下文）
   在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep（IExecutionStep 步骤，Boolean& completedSynchronously）

```

* * *

更多细节：

我不认为这是一个“恶意”请求，而是由于对这个脚本链接的一些不正确处理。如果是这样，如何处理？

以下脚本块位于相关页面的生成 html 源代码中：

```
<script src="/Default.aspx?_TSM_HiddenField_=
ctl00_sm1_HiddenField&_TSM_CombinedScripts_=
%3b%3bAjaxControlToolkit%2c+版本%3d3.5.11119.20050%2c
+文化%3d中性%2c
+PublicKeyToken%3d28f01c0e84b6d53e%3aen%3a7e147239-dd05-47b0-7fb3-
f743a139f982%3be2e86bf9%3a1aa13a87%3a8ccd9c1b%3a9ea3f0e2%3a9e7e87e9
%3a4c9865be%3aba594826%3ac4c00916%3a630bb7c2%3af442e939"
type="text/javascript"></script>

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T09:16:51.980

默认情况下，ASP.NET 不允许在 Querystring 或 Form 字段值中使用任何 HTML（基本上是潜在危险值的列表）。这是由@Page 指令的`ValidateRequest`属性设置的（`true`默认情况下）。

您可以关闭该功能，但它会使您面临 XSS 攻击。更好的方法是确保您的所有查询字符串都经过正确的 URL 编码。

在您的情况下，它似乎`</div>`是导致问题的标签。如果这个查询字符串是通过 Javascript 创建的，我建议使用[encodeURIComponent()](http://www.w3schools.com/jsref/jsref_encodeURIComponent.asp)函数来编码值。

# cognos - 复选框组的默认选择

> ID：876792
> 
> 赞同：2
> 
> 时间：2009-05-18T09:01:24.163
> 
> 标签：cognos

我想根据某些条件在我的 cognos 8 报告中放置复选框，即如果条件为真复选框将出现带有单击标记，如果不是则没有单击标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T19:49:24.710

我假设您将此控件放在提示页面上...

这有点令人费解，但这是我知道如何做到这一点的唯一方法。您可以在提示页面上放置 2 个“值提示”控件，并将两者的“必需”属性设置为“否”。将两个提示的“参数”属性设置为相同（即，它们将对您的查询应用相同的过滤条件）。对于提示之一，设置“默认选择”属性，以便在其中一个控件上自动选择您的默认值。此外，请务必将“选择 UI”属性设置为“复选框组”（即使您只有一个值要检查），以便获得复选框控件。

现在您的控件已设置好，您需要将它们放在提示页面上，并将条件渲染变量应用于两个控件（如果您不确定如何执行此操作，可以在帮助中查找它——这很简单，但也在这里描述很长）。基本上，当您的查询条件为真时，呈现选中复选框的那个，否则呈现一个没有选中的复选框。我不确定“渲染变量”属性的版本支持，但它适用于版本 8.4。

据我所知，没有办法通过将提示直接链接到查询来动态选择默认值——您必须通过条件格式/呈现方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-05T10:13:20.550

是的，我完全同意杰米的观点，这是唯一已知的方法。

还有另一种非常困难的方法是编写一个几乎相同的java代码。

所以我建议你坚持使用杰米的解决方案。

就版本问题而言，“渲染变量”属性在 cognos 8 的所有版本（即 8.2、8.3 和 8.4）中的工作方式相同。

# cocoa - 使用 NSRect 信息发布 NSNotification 的最佳方式？

> ID：876795
> 
> 赞同：2
> 
> 时间：2009-05-18T09:02:16.330
> 
> 标签：cocoa, notifications, nsnotifications

使用 NSRect 信息发布通知的最佳方式是什么？

这是我当前的解决方案（使用 NSStringFromRect）。

```
- (void)postNotificationForDirtyRect:(NSRect)rect
{
    NSDictionary *userInfo = 
        [NSDictionary dictionaryWithObject: NSStringFromRect(rect) 
                                     forKey: ILDirtyRect];

    NSNotificationCenter *ncenter = [NSNotificationCenter defaultCenter];
    [ncenter postNotificationName: ILDocumentBecomeDirtyRectNotification
                           object: self 
                         userInfo: userInfo];
} 
```

但是，我不确定这是否是发送 rect 结构的最佳方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-18T09:05:11.567

您应该使用使用类方法创建的[NSValue 。](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/nsvalue_Class/Reference/Reference.html)`+valueWithRect:`

# windows - 在 Visual Studio 的内存地址处观察类对象

> ID：876803
> 
> 赞同：7
> 
> 时间：2009-05-18T09:05:41.313
> 
> 标签：windows, visual-studio, debugging

我正在调试一个用户转储文件，堆栈跟踪顶部有这个类成员函数

*   堆栈跟踪是这样的 -

msvcr80.dll!__invalid_parameter_noinfo() + 0xc 字节 -**第 1 帧** msvcr80.dll!__invalid_parameter_noinfo() + 0xc 字节 -**第 2 帧**
myDLL!myClass::myClassMemFunc(int val = 90) -**第 3 帧**

现在，当我跳转到第 3 帧时——“this”指针值无效（“this”值是从 ECX 寄存器中检索的——但 ECX 寄存器值在上述堆栈跟踪的前两个函数中发生了变化——） - 所以我看不到我的类对象的实际成员变量 -

但我知道我的类对象的地址——即 0x0012ECE0

当我试图用 - (myClass*)(0x0012ECE0) 观察那个内存地址时

我得到一个 CXX0019: Error: bad type cast

甚至 (myClass)(0x0012ECE0) 也会产生相同的错误。

我在这里做错什么了吗？- 检索类对象值的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-18T11:35:19.173

只是一个盲目的猜测：尝试 (myDLL!myClass*)(0x0012ECE0)

另一个问题，你怎么能确定它是你的对象的地址？

作为旁注，请尝试使用 windbg - 在内存/堆栈周围查找对象要简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T03:25:32.917

这可能对您现在获得的用户转储没有帮助，但对于将来的用户转储，请将优化设置“省略帧指针”设置为否。这有助于“this”指针和本地变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-15T11:19:13.717

这可能是由于嵌套类

示例：类 A { 类 B { int i; }; };

像 (B*)(0x12345678) 一样的转换会失败，但 (A::B*)(0x12345678) 会成功

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-07T08:03:19.113

我通过添加 dll 上下文解决了这个问题：

```
{,,myDLL.dll}(myClass*)(0x028073a8) 
```

[文档在这里](https://msdn.microsoft.com/en-us/library/y2t7ahxk.aspx)

# wpf - WPF 虚拟化画布

> ID：876811
> 
> 赞同：7
> 
> 时间：2009-05-18T09:08:45.897
> 
> 标签：wpf, canvas, virtualization

我们在 Canvas 中生成了一系列矩形，它们在 XAML 中以 ScrollView>Canvas>VirtualizingStackPanel>Rectangles 的顺序嵌套。

微软似乎很少有关于在什么情况下支持虚拟化的 senarios 信息，并且在不是没有抛出错误的情况下，它只是将其视为标准 StackPanel。

鉴于我们的视图在任何时候在屏幕上大约有 60 个矩形，而整个画布上总共有大约 800 个矩形，所以大约 5 分钟的加载时间慢得让人无法接受。

我们已经尝试删除 ScrollView 无效（除了删除滚动条性能没有提高），并删除一些其他嵌套元素，最终效果似乎是什么都不显示，或者它显示但仍然减缓。

到目前为止，我找到的最好的解决方案是一段免费的软件代码 VirtualizedCanvas，但它非常有限，不支持嵌套在其中的任何内容，实际上它需要的唯一输入是 UI 元素的集合。

该解决方案基本上忽略了数据绑定，并要求您将完成的 Canvas 传回给它，这会使我们所有现有的代码和转换器变得毫无用处，并且将是重大的返工来实现。

有没有办法简单地剪辑 Virtualize the Canvas 只在屏幕上绘制 60 个项目？

# c# - 具有默认类型转换的枚举？那可能吗？

> ID：876814
> 
> 赞同：3
> 
> 时间：2009-05-18T09:09:37.873
> 
> 标签：c#, asp.net, linq, linq-to-sql, enums

是否可以为枚举进行默认类型转换？

我经常使用枚举，例如状态，我想将枚举直接与 LINQ 字段进行比较，但我必须一直进行类型转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T09:12:05.030

您应该能够在具有枚举类型的 LINQ 对象中具有属性。这样你就不必投了。

因此，只需将您的属性更改为具有正确的枚举类型，您就不必再担心强制转换了。您可以在 LINQtoSQL 设计器中执行此操作。只需右键单击一个属性，选择“属性”并在 Visual Studio 属性窗口中设置适当的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T17:04:49.753

答案要简单得多！！！

我的一个好朋友告诉我这很简单！看看这个样本！

```
public enum State:byte
{
    EmailNotValidated = 0x00,
    EmailValidated = 0x10,
    Admin_AcceptPending = 0x40,
    Active = 0x80,
    Admin_BlockedAccount = 0xff
} 
```

* * *

注意枚举名称后面的**:BYTE**部分......这是我正在寻找的技巧！但是感谢所有为我努力的人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T09:25:11.027

LINQ-to-SQL 通常会处理直接整数映射和精确字符串（名称）映射（注意：区分大小写）。含义：在某处写您的枚举，并在设计器中将属性类型设置为完全限定的枚举名称：`Some.Namespace.MyEnum`. 它通常应该工作。

对于非平凡的映射（例如，列是具有混合大小写值的 varchar，或诸如“进行中”[注意空格]之类的内容），您必须将存储属性保留为`int`/ `varchar`（等）并映射它手动。我通常通过将其标记为 private 并命名它`FooStorage`，并在部分类中添加映射属性来做到这一点：

```
partial class MyType {
    public MyEnum Foo {
        get {... mapping logic reading from FooStorage...}
        set {... mapping logic, updating FooStorage...}
    }
} 
```

唯一的问题是 LINQ 查询只能针对*存储*属性（而不是定制属性）起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T09:14:04.793

您是否尝试过扩展方法？

```
public enum MyEnum
{
    First = 1,
    Second = 2,
    Third = 3
}

public static class Utility
{
    public static string Description(this Enum e)
    {
        Type t = e.GetType();
        DescriptionAttribute[] desc =
            (DescriptionAttribute[])(t.GetField(e.ToString())
            .GetCustomAttributes(typeof(DescriptionAttribute), false));
        return desc.Length > 0 ? desc[0].Description : e.ToString();
    }
    public static byte ToByte(this Enum ai)
    {
        object o=Enum.ToObject(ai.GetType(), ai);
        return Convert.ToByte(o);
    }
}

class Program
{
    static void Main(string[] args)
    {
        MyEnum me = MyEnum.Third;

        Console.WriteLine("Value: {0}\r\nType: {1}"
        ,me.ToByte(),me.ToByte().GetType().ToString());

        Console.ReadLine();
    }
} 
```

它输出：

值：3

类型：System.Byte

# java - 在java中打开临时文件

> ID：876816
> 
> 赞同：6
> 
> 时间：2009-05-18T09:11:36.810
> 
> 标签：java, io

我正在将字符串写入临时文件`temp.txt`（

这是我用来在 Java 中创建临时文件的代码：

```
File temp = File.createTempFile("temp",".txt");

FileWriter fileoutput = new FileWriter(temp);
Bufferedwriter buffout = new BufferedWriter(fileoutput); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-18T09:20:41.860

由以下人员创建的文件：

```
File temp = File.createTempFile("temp",".txt"); 
```

不会被删除，见[javadoc](http://java.sun.com/j2se/1.4.2/docs/api/java/io/File.html)，你要调用

```
temp.deleteOnExit(); 
```

所以JVM会在退出时删除文件......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-18T09:30:48.003

怎么样：

```
if (!temp.delete())
{
    // wasn't deleted for some reason, delete on exit instead
    temp.deleteOnExit();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T09:16:01.217

一些可能对您有帮助的链接：

*   [File.getAbsoluteFile()](http://java.sun.com/j2se/1.5.0/docs/api/java/io/File.html#getAbsoluteFile()) / [getAbsolutePath()](http://java.sun.com/j2se/1.5.0/docs/api/java/io/File.html#getAbsolutePath())。
*   [文件阅读器](http://java.sun.com/j2se/1.5.0/docs/api/java/io/FilterReader.html)。
*   [文件删除（）](http://java.sun.com/j2se/1.5.0/docs/api/java/io/File.html#delete())。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T09:34:11.273

要在单击按钮时执行操作，您将需要如下代码：

```
 button.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(ActionEvent event) {
            fileOperation();
        }
    }
...
private void fileOperation() {
    ... do stuff with file ...
} 
```

您可能可以通过 google 找到很多示例。一般来说，匿名内部类代码应该很短，只需将事件和上下文转换为对外部类有意义的操作。

目前，您需要在`File.delete`关闭文件后手动删除文件。如果你真的想要，你可以扩展，说，`RandomAccessFile`并覆盖`close`关闭后删除。我相信 delete-on-close 被认为是在 JDK7 上打开文件的一种模式（不知道它是否存在）。

就像在您的代码中一样，仅写入文件是没有意义的。您可能想在关闭读取流而不是写入流后删除文件。如果可能的话，避免使用临时文件并不是一个坏主意。

# sql - SQL 中的连续序列

> ID：876820
> 
> 赞同：1
> 
> 时间：2009-05-18T09:12:01.880
> 
> 标签：sql, ms-access, sequence

有一个包含以下字段的表：

顺序、组、序列

要求给定组中的所有订单形成连续序列。例如：1,2,3,4 或 4,5,6,7。如何使用单个 SQL 查询检查哪些订单不符合此规则？谢谢你。

```
Example data:

Order   Group   Sequence
1   1   3
2   1   4
3   1   5
4   1   6
5   2   3
6   2   4
7   2   6

Expected result:
Order
5
6
7 
```

如果查询仅返回具有错误序列的组，则也接受，示例数据为 2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T09:29:40.923

假设生成了序列，因此不能复制：

```
 SELECT group
 FROM theTable
 GROUP BY group
 HAVING MAX(Sequence) - MIN(Sequence) <> (COUNT(*) - 1); 

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T17:53:04.603

我个人认为我会考虑重新考虑要求。关系数据库的本质是，由于记录回滚，序列中的间隙很容易出现。例如，假设一个订单开始在其中创建四个项目，但一个因某种原因而失败并被回滚。如果您手动预先计算序列，那么您将有一个间隙，即回滚的序列不是最后一个。在其他情况下，由于多个用户几乎同时查找序列值，或者如果客户在最后一分钟从订单中删除了一条记录，您可能会遇到间隙。老实说，您希望从父子关系中无法获得的连续序列中获得什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T09:22:45.507

这个怎么样？

从具有计数（序列）<=最大（序列）-最小（序列）
的组中选择组

[编辑] 这假设 Sequence 不允许在特定组内重复。最好使用：
count != max - min + 1

[再次编辑] D'oh，仍然不完美。不过，另一个清除重复项的查询会解决这个问题。

[编辑最后一个] 原始查询在 sqlite 中运行良好，这是我可用于快速测试的。它比 SQL Server 宽容得多。感谢贝尔的指点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T09:28:31.033

此 SQL 选择没有连续序列的订单 3 和 4。

```
DECLARE @Orders TABLE ([Order] INTEGER, [Group] INTEGER, Sequence INTEGER)

INSERT INTO @Orders VALUES (1, 1, 0)
INSERT INTO @Orders VALUES (1, 2, 0)
INSERT INTO @Orders VALUES (1, 3, 0)

INSERT INTO @Orders VALUES (2, 4, 0)
INSERT INTO @Orders VALUES (2, 5, 0)
INSERT INTO @Orders VALUES (2, 6, 0)

INSERT INTO @Orders VALUES (3, 4, 0)
INSERT INTO @Orders VALUES (3, 6, 0)

INSERT INTO @Orders VALUES (4, 1, 0)
INSERT INTO @Orders VALUES (4, 2, 0)
INSERT INTO @Orders VALUES (4, 8, 0)

SELECT o1.[Order]
FROM @Orders o1
     LEFT OUTER JOIN @Orders o2 ON o2.[Order] = o1.[Order] AND o2.[Group] = o1.[Group] + 1
WHERE o2.[Order] IS NULL
GROUP BY o1.[Order]
HAVING COUNT(*) > 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T10:44:08.947

After a while I came up with the following solution. It seems to work but it is highly inefficient. Please add any improvement suggestions.

```
SELECT OrdMain.Order
  FROM ((Orders AS OrdMain
  LEFT OUTER JOIN Orders AS OrdPrev ON (OrdPrev.Group = OrdMain.Group) AND (OrdPrev.Sequence = OrdMain.Sequence - 1))
  LEFT OUTER JOIN Orders AS OrdNext ON (OrdNext.Group = OrdMain.Group) AND (OrdNext.Sequence = OrdMain.Sequence + 1))
WHERE ((OrdMain.Sequence < (SELECT MAX(Sequence) FROM Orders OrdMax WHERE (OrdMax.Group = OrdMain.Group))) AND (OrdNext.Order IS NULL)) OR
      ((OrdMain.Sequence > (SELECT MIN(Sequence) FROM Orders OrdMin WHERE (OrdMin.Group = OrdMain.Group))) AND (OrdPrev.Order IS NULL)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-18T10:03:23.290

所以你的桌子是

```
Order Group Sequence
1     1     4
1     1     5
1     1     7 
```

..你想知道 1,1,6 丢失了吗？

和

```
select
  min(Sequence) MinSequence, 
  max(Seqence) MaxSequence 
from 
  Orders 
group by 
  [Order], 
  [Group] 
```

您可以找出给定订单和组的界限。

现在您可以使用特殊的**数字表**来模拟正确的数据，该表只包含您可以用于序列的每个数字。[这](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=47685)是这样一个数字表的一个很好的例子。如何创建它并不重要，您还可以创建一个包含从 x 到 y 的所有数字的 excel 文件并导入该 excel 表。

在我的示例中，我假设这样一个名为“Numbers”的数字表只有一列“n”：

```
select 
  [Order], 
  [Group], 
  n Sequence
from
  (select min(Sequence) MinSequence, max(Seqence) MaxSequence from [Table] group by [Order], [Group]) MinMaxSequence
  left join Numbers on n >= MinSequence and n <= MaxSequence 
```

将该 SQL 放入新视图中。在我的示例中，我将调用视图“vwCorrectOrders”。

这为您提供了序列连续的数据。现在您可以将该数据与原始数据连接起来，以找出缺少哪些序列：

```
select 
  correctOrders.*
from
  vwCorrectOrders co 
  left join Orders o on 
      co.[Order] = o.[Order] 
  and co.[Group] = o.[Group]
  and co.Sequence = o.Sequence
where
  o.Sequence is null 
```

应该给你

```
Order Group Sequence
1     1     6 
```

# expression - 将表达式转换为带有扭曲的合取范式

> ID：876825
> 
> 赞同：2
> 
> 时间：2009-05-18T09:14:03.140
> 
> 标签：expression, conjunctive-normal-form

我有一个库，我必须与之交互，它基本上充当数据源。检索数据时，我可以将特殊的“过滤器表达式”传递给该库，然后将其转换为 SQL WHERE 部分。这些表达非常有限。它们必须是合取范式。喜欢：

```
(A or B or C) and (D or E or F) and ... 
```

这对于编程来说当然不是很舒服。所以我想制作一个小包装器，它可以解析任意表达式并将它们转换为这种正常形式。喜欢：

```
(A and (B or C) and D) or E 
```

会被翻译成类似的东西：

```
(A or E) and (B or C or E) and (D or E) 
```

[我可以使用Irony](http://www.codeplex.com/irony)库将表达式解析为树。现在我需要对其进行规范化，但我不知道如何......哦，还有，这是扭曲：

*   最终表达式可能不包含**NOT**运算符。但是，我可以通过将运算符替换为逆运算符来反转各个项。所以，这没关系：

    `(not A or not B) AND (not C or not D)`

    但这不是：

    `not (A or B) and not (C or D)`

*   我想让表达式尽可能简单，因为它将被翻译成几乎相同的 SQL WHERE 语句，因此复杂的语句很可能会降低执行速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T09:33:09.200

我会在树上使用两次迭代，尽管可能一次。

[第一次迭代：通过遍历树并使用德摩根定律（维基百科链接](http://en.wikipedia.org/wiki/De_Morgan%27s_laws "维基百科链接")）摆脱您的 NOT 节点，并在适用的情况下删除双重否定。

第二次迭代（NOT 现在只在叶节点之前）遍历你的树：

```
Case "AND NODE":
    fine, inspect the children
Case "OR NODE":
    if there is a child which is neither a Leaf nor a NOT node
        apply the distributive law.
        start from parent of current node again
    else
        fine, inspect children 
```

在那之后你应该完成。

# reflection - 查找 RCP 应用程序的显示

> ID：876828
> 
> 赞同：0
> 
> 时间：2009-05-18T09:14:26.943
> 
> 标签：reflection, swt, eclipse-rcp, classloader

我正在编写一个正在启动 GUI 应用程序的测试框架。为了能够在 SWT 应用程序的情况下测试这个 GUI，我需要知道它的显示。一般来说，这个显示是由另一个类加载器加载的，因此我通过反射使用 swt Display 类的 findDisplay(Thread t) 方法来完成这个任务。我的代码看起来像这样：

```
Thread[] threads = new Thread[10];
Thread.enumerate(threads);
Object foundObject = null;
for (Thread t : Arrays.asList(threads)){
    foundObject = null;
    Class<?> clazz = t.getContextClassLoader().loadClass("org.eclipse.swt.widgets.Display");
    final Method method = clazz.getMethod("findDisplay", Thread.class);
    foundObject = method.invoke(null, new Object[] {t});
    if (foundObject != null) {
        System.out.println("yeah, found it!");
        break;
    }
} 
```

在我看来，这应该在当前线程组中找到每个 Display 类型的对象。但是，尽管 GUI 正在完美启动，但我没有得到任何文本编辑器 RCP 示例。

任何想法出了什么问题或我如何以合理的方式调试它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T11:15:37.163

我弄清楚主要问题是什么： ContextClassloader 与实际加载类的类加载器无关。

为了解决我的问题，我负责在 RCP 程序的层次结构和我的框架的层次结构中加载 swt 显示类的类加载器。这可以通过使用 java 扩展类加载器来实现。（我不能使用应用程序类加载器，因为我的 RCP 应用程序不能将它用作父应用程序，我还没有弄清楚为什么）然后只需将 swt.jar 添加到 java.ext.dirs财产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-09T12:01:18.287

如果您使用的是 Eclipse RCP，那么也许您可以使用：

> PlatformUI.getWorkbench().getDisplay()

# javascript - Javascript 清除所有 cookie

> ID：876830
> 
> 赞同：0
> 
> 时间：2009-05-18T09:15:51.840
> 
> 标签：javascript, html, cookies

我正在尝试清除我的所有 cookie，其中一些设置在服务器上，其中一些是浏览器 cookie。

我尝试过使用 document.cookie = "" 但这并不能满足我的需求，所以我编写了一些 Javascript 代码，如下所示

pauseClearAllCookies 函数称为 onload。

```
<script type="text/javascript">

        //var cookie_names = new Array("__utma", "__utmb", "__utmc", "__utmz", "mortgage", "track_source","currency","selenium_testing","visit_secure_token", "rdb_history", "_csuid", "search", "finance", "searchhistory");

        function pauseClearAllCookies(){
            Set_Cookie("selenium_testing","1");
            drawTable();
            setTimeout("checkCookies();",1000);
            document.getElementById('msg').innerHTML = "Gathering Cookies....";
        }

        var cookie_counter = 0;
        var cookieList;

        function checkCookies(){
            if(document.cookie.indexOf(";") != -1){
                cookieList = document.cookie.split(";");
            }else{
                cookieList = [document.cookie];
            }
            setTimeout("clearAllCookies();",1000);
        }

        function clearAllCookies(){

            document.getElementById('msg').innerHTML = "Deleting Cookies....";

            if(cookie_counter < cookieList.length ){

                var cookieName = "";

                if(cookieList[cookie_counter].indexOf("=") != -1){
                    cookieName = cookieList[cookie_counter].split("=")[0];
                }else{
                    cookieName = cookieList[cookie_counter];
                }
                document.getElementById('msg').innerHTML = "Deleting Cookie: "+cookieName;
                // clear js cookies
                Delete_Cookie(cookieName, '/', document.domain);
                Delete_Cookie(cookieName, '/', '.www.abc.co.uk');
                Delete_Cookie(cookieName, '/', 'www.abc.co.uk');
                Delete_Cookie(cookieName, '/', '.abc.co.uk');

                // clear server cookies
                Delete_Cookie(cookieName, '/', '');

                // increment counter
                cookie_counter++;

                drawTable();
                //recall the function
                setTimeout("clearAllCookies();",800);
            }else{
                Set_Cookie("selenium_testing","1");
            }
        }
        function drawTable() {
            var allcookies = document.cookie.split(";");
            document.getElementById('heading').innerHTML = allcookies.length + " cookie found";

            var table_html = "<table class='data'>";
            for(var i=0; i < allcookies.length; i++){
                var cookie = allcookies[i].split("=");
                table_html +=  "<tr>";
                table_html +=  "<td>"+(i+1)+"</td>";
                table_html +=  "<td>" + cookie[0] + "</td>";
                table_html +=  "<td>" + cookie[1] + "</td>";
                table_html +=  "<tr>";
            }

            table_html += "</table>";

            document.getElementById('table').innerHTML = table_html;
        }
    </script> 
```

问题是，每次我运行此代码时，都会留下一个 cookie，它会循环通过但不会被删除，并且它始终在数组中排名第一。非常感谢您对排序此问题的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T09:17:42.397

您是否尝试将所有 cookie 时间格式设置为“一毫秒前”？那应该清除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-21T06:47:11.670

添加[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)库并执行此脚本

for (var it in $.cookie()) $.removeCookie(it);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T12:24:35.733

数组中的第一个对象始终标记为 0

.split()[0]

# java - Ant loadproperties 失败（bcel 错误？）

> ID：876840
> 
> 赞同：6
> 
> 时间：2009-05-18T09:20:00.333
> 
> 标签：java, ant, build-process, bcel

我正在开发一个简单的构建脚本，它应该从 java 类文件中获取一些常量，并将它们用作我的文件名中的版本号。我使用 Eclipse 和它自己的 Ant，但将*bcel-5.2.jar*放在我的 libs 文件夹中并放入 Ant 调用的类路径中。

```
<target name="generate_version" depends="compile">
    <loadproperties srcfile="${dir.dest}/MyVersion.class">
        <classpath>
            <fileset dir="${dir.libs}">
                <include name="**/bcel*.jar"/>
            </fileset>
        </classpath>

        <filterchain>
            <classconstants/>
        </filterchain>
    </loadproperties>
</target> 
```

但不幸的是，蚂蚁任务*loadproperties*失败了：

```
build.xml:46: expected a java resource as source 
```

之后，我尝试使用以下命令行从 Eclipse 外部运行 Ant：

```
set ANT_HOME=C:\Program Files\Java\ant\apache-ant-1.7.1
"%ANT_HOME%\bin\ant.bat" 
```

结果是

```
Buildfile: build.xml

init:
     [echo] Building project.
     [echo] ant.home:          C:\Program Files\Java\ant\apache-ant-1.7.1
     [echo] ant.java.version:  1.6
     [echo] ant.version:       Apache Ant version 1.7.1 compiled on June 27 2008

compile:
    [javac] Compiling 262 source files to **********\build
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

generate_version:

BUILD FAILED
********************\ant\build.xml:46: expected a java resource as source 
```

我现在真的迷路了。是bcel错误吗？是否与我自己的 bcel 不兼容？

最后一个提示：从 Ant 目标中删除 bcel 类路径条目会导致：

```
Buildfile: build.xml

init:
     [echo] Building project.
     [echo] ant.home:          C:\Program Files\Java\ant\apache-ant-1.7.1
     [echo] ant.java.version:  1.6
     [echo] ant.version:       Apache Ant version 1.7.1 compiled on June 27 2008

compile:
    [javac] Compiling 262 source files to ********************\build
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

generate_version:

BUILD FAILED
java.lang.NoClassDefFoundError: org/apache/bcel/classfile/ClassParser
        at org.apache.tools.ant.filters.util.JavaClassHelper.getConstants(JavaClassHelper.java:47)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
```

**UPDATE**在 Eclipse 中设置 Ant 首选项后，错误消息发生了变化：

```
BUILD FAILED
*********************\build.xml:46: org.apache.bcel.classfile.ClassFormatException:  is not a Java .class file
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:115)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:357)
    at org.apache.tools.ant.Target.performTasks(Target.java:385)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1329)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1298)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.eclipse.ant.internal.ui.antsupport.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1181)
    at org.eclipse.ant.internal.ui.antsupport.InternalAntRunner.run(InternalAntRunner.java:423)
    at org.eclipse.ant.internal.ui.antsupport.InternalAntRunner.main(InternalAntRunner.java:137) 
```

现在我认为这可能是Ant和BCEL之间的版本冲突。或者BCEL和JDK1.6。或者 Eclipse 和 BCEL 和 Ant 或 JDK……我迷路了。

* * *

**回答：**

这是在下面找到的评论

> 我应该提到这一点 - 你不需要转换任何东西。文档：“从 Ant 1.7 开始，字符编码 ISO-8859-1 用于将字符转换回字节，因此必须使用此编码来读取 java 类文件。” 这只是为了绕过字符过滤器用于原始字节这一事实的约定。ant.apache.org/manual/CoreTypes/... 使用 UTF-8 会很糟糕！——麦克道尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T09:55:58.360

[*loadproperties*](http://ant.apache.org/manual/Tasks/loadproperties.html)的[文档](http://ant.apache.org/manual/Tasks/loadproperties.html)*说嵌套的*类路径*元素用于*资源*属性 - 使用*srcfile*的替代方法。*

 *将 BCEL jar 添加到全局类路径。在 Eclipse 中，将其作为全局条目添加到[运行时首选项](http://help.eclipse.org/ganymede/topic/org.eclipse.platform.doc.user/reference/ref-antruntimeprefs.htm)中的类路径。在命令行上，使用[-lib](http://ant.apache.org/manual/running.html#options)开关。

[![替代文字](https://i.stack.imgur.com/g1LtZ.png)](https://i.stack.imgur.com/g1LtZ.png)
[（来源：[eclipse.org](http://help.eclipse.org/ganymede/topic/org.eclipse.platform.doc.user/images/Image91_ant_prefs_1.png)）]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T12:13:07.130

废话，我就知道！它归结为文件编码问题。这些文件仍在 ISO-8819-1 中，但我使用的是 UTF-8。该项目相当陈旧，并且是使用错误的编码创建的。在*javac*和*loadproperties*任务中设置参数*编码*修复它。

 **```
<target name="generate_version" depends="compile">
    <loadproperties encoding="iso-8859-1" srcfile="${dir.dest}/MyVersion.class">
        <filterchain>
            <classconstants/>
        </filterchain>
    </loadproperties>
</target> 
```

我认为它已被我们的 Subversion 服务器更改，但我认为我现在必须自己将每个文件转换为 UTF-8 ......认为这是 SO 的另一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T09:28:01.427

看起来像一个类路径错误。运行“ant -v”，为您提供有关错误的更多详细信息。

# qt - Qt 应该以 HyperSpace 为目标吗？

> ID：876841
> 
> 赞同：1
> 
> 时间：2009-05-18T09:20:14.703
> 
> 标签：qt, nokia

您可能已经知道，[Phoenix](http://www.phoenix.com/)正在开发一种基于其 BIOS 的替代计算环境，称为[HyperSpace](http://www.hyperspace.com/)。根据其设计者的说法，它应该运行“一组常用的支持浏览器的应用程序，旨在使互联网浏览体验简单、快速和安全”。

尽管 Phoenix 在其常见问题解答中声明您将*无法*在 HyperSpace 之上安装/运行自己的应用程序，但在[最近接受](http://www.technologyreview.com/computing/22643/page1/)麻省理工学院技术评论的采访时表示，他们计划在 6 月开设一家 iTunes 风格的商店以出售应用程序。

我猜它们可能取决于 Apple 通过集中式服务提供安全应用程序的商业模式，因此迟早会出现开发人员工具包。

由于 Qt 在跨平台能力方面有着令人印象深刻的记录，您是否认为诺基亚应该与 Phoenix 结成联盟，将 Qt 工具包移植到即将到来的 HyperSpace 应用程序开发人员？如果不是 Qt，那么理想的 HyperSpace 开发平台应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T11:29:48.560

在我看来，这基本上是一台双启动机器。

*   一次引导进入 QT 支持（或可能支持）的 Windows 版本。

*   一个人使用网络浏览器，只会运行网络应用程序或小部件。

如果您询问 QT 是否应该允许您针对第二个环境，那么这完全取决于这是否与包含 Webkit 引擎的 QT 技术选择远程兼容。

也可能存在许可问题。

我不相信 Hyperspace 产品像 QT 那样针对桌面开发人员。我认为它是针对 Web 应用程序开发人员的。

编辑：您似乎想知道的是，诺基亚是否看到了支持 Hyperspace 的商业利益，以及他们是否有资源去做。不幸的是，我怀疑只有诺基亚 QT 开发负责人才能真正回答这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-08T17:44:48.173

“我不相信 Hyperspace 产品像 QT 那样针对桌面开发人员”
Qt 针对嵌入式手机应用程序，它们现在归诺基亚所有，如果 Qt 恰好在桌面上运行，这对诺基亚来说是一个不错的奖励。

考虑到它的体积小、没有外部依赖和“易于移植”，我会认为 Qt 是 bios-os 桌面的良好开端。

# sql - 如何找到表中行之间的平均时间差？

> ID：876842
> 
> 赞同：9
> 
> 时间：2009-05-18T09:20:18.197
> 
> 标签：sql, mysql

我有一个存储一些时间戳的 mysql 数据库。让我们假设表中只有 ID 和时间戳。时间戳可能重复。

我想找到不重复的连续行之间的平均时间差（按时间）。有没有办法在 SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-05-18T10:18:52.587

如果您的表是 t，并且您的时间戳列是 ts，并且您希望以秒为单位得到答案：

```
SELECT TIMESTAMPDIFF(SECOND, MIN(ts), MAX(ts) ) 
       /
       (COUNT(DISTINCT(ts)) -1) 
FROM t 
```

这对于大型表来说会快几英里，因为它没有 n-squared JOIN

这使用了一个可爱的数学技巧来帮助解决这个问题。暂时忽略重复的问题。连续行之间的平均时间差是第一个时间戳和最后一个时间戳之间的差，除以行数-1。

证明：连续行之间的平均距离是连续行之间的距离之和，除以连续行数。但是连续行之间的差异之和只是第一行和最后一行之间的距离（假设它们是按时间戳排序的）。并且连续行数是总行数-1。

然后我们只是将时间戳设置为不同的条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T09:40:34.223

ID是连续的吗？

你可以做类似的事情，

```
SELECT 
      a.ID
      , b.ID
      , a.Timestamp 
      , b.Timestamp 
      , b.timestamp - a.timestamp as Difference
FROM
     MyTable a
     JOIN MyTable b
          ON a.ID = b.ID + 1 AND a.Timestamp <> b.Timestamp 
```

这将为您提供每个连续行对的时间差列表...

然后你可以把它包装在一个 AVG 分组中......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T09:38:06.053

这是一种方法：

```
select avg(timestampdiff(MINUTE,prev.datecol,cur.datecol))
from table cur
inner join table prev 
    on cur.id = prev.id + 1 
    and cur.datecol <> prev.datecol 
```

[timestampdiff](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_timestampdiff)函数允许您在天、月、秒等之间进行选择。

如果 id 不连续，您可以通过添加中间没有其他行的规则来选择上一行：

```
select avg(timestampdiff(MINUTE,prev.datecol,cur.datecol))
from table cur
inner join table prev 
    on prev.datecol < cur.datecol
    and not exists (
        select * 
        from table inbetween 
        where prev.datecol < inbetween.datecol
        and inbetween.datecol < cur.datecol)
    ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-31T19:51:05.557

改编自此讨论的 SQL Server。

使用的基本列是： cmis_load_date：与每条记录关联的日期/时间戳。extract_file：从中加载记录的文件的完整路径。

注释：每个文件中可以有很多条记录。记录必须按 extract_file 列上加载的文件分组。在一个文件和下一个文件加载之间可能会经过几天的间隔。任何列中都没有可靠的顺序值，因此分组的行按每个文件组中的最小加载日期排序，然后 ROW_NUMBER() 函数用作临时顺序值。

```
SELECT 
AVG(DATEDIFF(day,  t2.MinCMISLoadDate, t1.MinCMISLoadDate)) as ElapsedAvg
FROM
(
SELECT 
ROW_NUMBER() OVER (ORDER BY MIN(cmis_load_date)) as RowNumber,  
MIN(cmis_load_date) as MinCMISLoadDate,
CASE WHEN NOT CHARINDEX('\', extract_file) > 0 THEN '' ELSE RIGHT(extract_file, CHARINDEX('\', REVERSE(extract_file)) - 1) END as ExtractFile
FROM
TrafTabRecordsHistory 
WHERE 
court_id = 17
and 
cmis_load_date >= '2019-09-01'
GROUP BY 
CASE WHEN NOT CHARINDEX('\', extract_file) > 0 THEN '' ELSE RIGHT(extract_file, CHARINDEX('\', REVERSE(extract_file)) - 1) END
) t1
LEFT JOIN 
(
SELECT 
ROW_NUMBER() OVER (ORDER BY MIN(cmis_load_date)) as RowNumber,  
MIN(cmis_load_date) as MinCMISLoadDate,
CASE WHEN NOT CHARINDEX('\', extract_file) > 0 THEN '' ELSE RIGHT(extract_file, CHARINDEX('\', REVERSE(extract_file)) - 1) END as ExtractFile
FROM
TrafTabRecordsHistory 
WHERE 
court_id = 17
and 
cmis_load_date >= '2019-09-01'
GROUP BY 
CASE WHEN NOT CHARINDEX('\', extract_file) > 0 THEN '' ELSE RIGHT(extract_file, CHARINDEX('\', REVERSE(extract_file)) - 1) END
) t2 on t2.RowNumber + 1 = t1.RowNumber 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-20T09:02:03.373

旧帖子但是....

简单的方法是使用 Lag 函数和 TIMESTAMPDIFF

```
SELECT 
   id, 
   TIMESTAMPDIFF('MINUTES', PREVIOUS_TIMESTAMP, TIMESTAMP) AS TIME_DIFF_IN_MINUTES
FROM (
   SELECT 
     id, 
     TIMESTAMP, 
     LAG(TIMESTAMP, 1) OVER (ORDER BY TIMESTAMP) AS PREVIOUS_TIMESTAMP
   FROM TABLE_NAME
) 
```

# nhibernate - 使用 NHibernate 将聚合与实体一起投影

> ID：876847
> 
> 赞同：0
> 
> 时间：2009-05-18T09:20:58.100
> 
> 标签：nhibernate, projection, aggregate-functions

我有一个非常标准的 Orders 表和一个关联的 OrderRows 表，比如：

```
Orders
[id] INTEGER
[name] ...

OrderRows
[orderId] INTEGER
[quantity] INTEGER
[unitPrice] SMALLMONEY
[description] VARCHAR(...) 
```

在某些情况下，我想检索订单列表以及总计摘要，大多数时候我不关心摘要。

使用标准 API，我可以为每个订单创建 [数量]*[单位价格] 的投影，但是如何在同一结果集中同时获得订单和投影？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-23T09:08:22.283

您可以在实体中计算 Total 并将其存储在数据库中（如果您不想每次都加载所有行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T14:10:53.600

我相信这里的解决方案是创建一个 DTO 类，然后将其用作结果转换。

```
public class OrderDTO
{
    int Id;
    // Rest of Orders properties you want

    int LineTotal; // [quantity]*[unitPrice]

    public OrderDTO(int id, /* rest of constructor parameters */);
}

session.CreateCriteria(typeof(... /* criteria query here */))
    .SetResultTransformer(new AliasToBeanConstructorResultTransormer(typeof(OrderDTO).GetConstructors()[0])); 
```

# keyboard - 如何在 Windows PC 上实现键盘自动重复？

> ID：876852
> 
> 赞同：1
> 
> 时间：2009-05-18T09:23:46.380
> 
> 标签：keyboard, autorepeat

我希望能够在 Windows 上拦截（并对其进行任意处理）自动重复按键。我想知道键盘自动重复是如何实现的，以便我知道我有哪些选项。即我可以在以下位置拦截：

*   应用，
*   设备驱动程序和/或
*   硬件级别

?

**更新：**看起来自动重复（很差？）在硬件级别生成，然后被设备驱动程序覆盖（[见这里](http://stason.org/TULARC/pc/pc_hardware_faq/3_26_How_does_the_keyboard_interface_work.html)）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T12:42:06.603

要修改或过滤行为，您可以使用挂钩拦截键：

[`SetWindowsHookEx`](http://msdn.microsoft.com/en-us/library/ms644990(VS.85).aspx) 使用`WH_KEYBOARD`

[钩子程序](http://msdn.microsoft.com/en-us/library/ms644984(VS.85).aspx)接收，除其他外，重复计数（由于按住键）

请注意，低级键盘挂钩 ( `WH_KEYBOARD_LL`) 不接收重复计数。

如果您的所有窗口都在同一个 trhead 中创建，您可以使用特定于线程的钩子，并避免将钩子过程移动到 DLL。

* * *

我依稀记得重复计数是由键盘本身生成的，而 LL 钩子会发送重复的 keydown 事件——不过我可能弄错了。在 DOS 下，在 BIOS 中或通过 BIOS 调用设置的键重复率和时间在拔下和重新插入 DIN 或 PS/2 键盘时确实会返回默认值。我不确定为什么你需要确切地知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T09:40:35.427

我建议您可能想编辑您的问题...您的实际问题是“如何在 ${yourLangauge} 中抑制 Windows 上的自动重复”...

我的回答是，我没有任何线索，我只在汇编程序（MASM 80286）中做过......即使那时我在BBS上找到了一个解决方案（有人记得他们吗）并且只是使用它. 从内存中，拦截必须在设备驱动程序级别完成。

autorepeat 的实现（100 美元说它是汇编程序）可能不会对抑制它有任何启示......而且微软将这些牌打得非常接近它的胸膛。

干杯。基思。

编辑：我只是想......技术现在可能会因 Windows 版本和各种设备的过多而有所不同......哦，天哪！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T09:49:49.527

但是，听起来这与“与编程无关”。转到控制面板中的“辅助功能选项”。选择“过滤键”组下的“设置”，在这里，您可以关闭该机器上该用户的重复键。

希望这就是你要找的。

PS 以上是针对 Windows XP 的说明。

# python - 在 Python 中生成颜色范围

> ID：876853
> 
> 赞同：32
> 
> 时间：2009-05-18T09:24:32.040
> 
> 标签：python, colors

我想以 (r, g, b) 元组的形式生成一个颜色规范列表，它跨越整个色谱，包含我想要的多个条目。所以对于 5 个条目，我想要类似的东西：

*   (0, 0, 1)
*   (0, 1, 0)
*   (1, 0, 0)
*   (1, 0.5, 1)
*   (0, 0, 0.5)

当然，如果条目多于 0 和 1 的组合，它应该转而使用分数等。最好的方法是什么？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-05-18T09:29:59.457

使用 HSV/HSB/HSL 颜色空间（三个名称或多或少相同）。生成 N 个均匀分布在色调空间中的元组，然后将它们转换为 RGB。

示例代码：

```
import colorsys
N = 5
HSV_tuples = [(x*1.0/N, 0.5, 0.5) for x in range(N)]
RGB_tuples = map(lambda x: colorsys.hsv_to_rgb(*x), HSV_tuples) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2018-03-06T13:51:33.663

调色板很有趣。你知道吗，同样亮度的绿色，比红色的感觉更强烈？看看[http://poynton.ca/PDFs/ColorFAQ.pdf](http://poynton.ca/PDFs/ColorFAQ.pdf)。如果您想使用预配置的调色板，请查看[seaborn 的调色板](https://seaborn.pydata.org/tutorial/color_palettes.html)：

```
import seaborn as sns
palette = sns.color_palette(None, 3) 
```

从当前调色板生成 3 种颜色。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-11-09T04:50:29.077

按照 kquinn 和 jhrf 的步骤 :)

对于 Python 3，可以通过以下方式完成：

```
def get_N_HexCol(N=5):
    HSV_tuples = [(x * 1.0 / N, 0.5, 0.5) for x in range(N)]
    hex_out = []
    for rgb in HSV_tuples:
        rgb = map(lambda x: int(x * 255), colorsys.hsv_to_rgb(*rgb))
        hex_out.append('#%02x%02x%02x' % tuple(rgb))
    return hex_out 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-07-16T18:41:30.963

我根据[kquinn 的](https://stackoverflow.com/users/54486/kquinn)回答创建了以下函数。

```
import colorsys

def get_N_HexCol(N=5):

    HSV_tuples = [(x*1.0/N, 0.5, 0.5) for x in xrange(N)]
    hex_out = []
    for rgb in HSV_tuples:
        rgb = map(lambda x: int(x*255),colorsys.hsv_to_rgb(*rgb))
        hex_out.append("".join(map(lambda x: chr(x).encode('hex'),rgb)))
    return hex_out 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-28T07:31:42.350

但是，您需要许多颜色并且非常简单。

```
from matplotlib import cm
n_colors = 10
colours = cm.rainbow(np.linspace(0, 1, n_colors)) 
```

# haskell - 矩阵的第一列作为 Haskell 中的行列表给出

> ID：876855
> 
> 赞同：3
> 
> 时间：2009-05-18T09:25:04.240
> 
> 标签：haskell, matrix

如果我有一个矩阵作为行列表 [[1,2,3],[4,5,6]]，我想返回第一列 [1,4]。我是 Haskell 的绝对初学者，我什至不知道如何处理嵌套列表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-18T09:27:51.240

以下代码将完成这项工作：

```
map head [[1,2,3],[4,5,6]] 
```

[`map`](http://en.wikipedia.org/wiki/Map_(higher-order_function))是haskell（和其他函数式编程语言）中最有用的函数之一。给定一个列表`[a,b,c,d]`和一个函数`f`，`map f [a,b,c,d]`将返回该列表`[f a, f b, f c, f d]`。该`head`函数提取列表的第一个元素。这就是为什么

```
map head [[1,2,3],[4,5,6]] ->
[head [1,2,3], head [4,5,6]] ->
[1,4] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-18T09:31:55.177

更一般地说：

```
col :: Int -> [[a]] -> [a]
col n = map (head . drop n) 
```

请记住，如果 n 大于或等于您提供的任何列表的长度，这将失败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T14:22:37.180

将行矩阵转换为列矩阵的库函数是`Data.List.transpose`. 所以解决你的问题的一种方法是

```
import Data.List (transpose)
col = head . transpose 
```

您还可以编写一个函数来从矩阵中获取任何列：

```
colN n matrix = transpose matrix !! n 
```

免责声明：

请记住，如果您需要转置整个矩阵，则转置成本很高。对于第一列，它应该与人们给出的其他解决方案的成本大致相同。

此外，转置在复杂代码中相对危险，因为它的结果与其参数的类型相同：`[[a]] -> [[a]]`. 所以很容易输入错误数量的转置。（我经过惨痛的教训才学到这个。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T09:35:00.600

> 以下代码将完成这项工作：
> 
> ```
> map head [[1,2,3],[4,5,6]] 
> ```

扩展乔纳斯的答案；`map`将函数应用于列表的每个元素。在列表上“映射”一个函数的结果是一个不同类型的新列表。

您在这里的输入列表是 类型`[[Int]]`，这意味着列表中的每个元素都是 s 的列表`Int`。因此，您需要一个函数来获取每个子列表并返回其第一个元素；那就是`head`。

总而言之，`map`将获取函数`head`，将其应用于每个子列表，以便您将获得一个新的类型列表，`[Int]`其中仅包含每个列表的头部（第一个元素）。

# wcf - WCF 元数据不起作用

> ID：876858
> 
> 赞同：5
> 
> 时间：2009-05-18T09:25:21.087
> 
> 标签：wcf

我曾多次尝试让我的 WCF 服务公开元数据。相反，我一直保持例外：

> **在服务SecurityBroker**实施的合同列表中找不到合同名称“IMetadataExchange” 。将 ServiceMetadataBehavior 添加到配置文件或直接添加到 ServiceHost 以启用对此协定的支持。

... 使用 IE 手动浏览服务时。

（我假设这与我的客户端应用程序无法生成服务引用的原因相同。小步骤和所有）

然而我的 web.config 看起来还不错：

```
<system.serviceModel>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
<behaviors>
    <endpointBehaviors>
        <behavior name="webHttpEnablingBehaviour">
            <webHttp />
        </behavior>
    </endpointBehaviors>
    <serviceBehaviors>
        <behavior name="webHttpEnablingBehaviour">
            <serviceMetadata httpGetEnabled="true" />
        </behavior>
    </serviceBehaviors>
</behaviors>
<services>
    <service name="IWW.MIGTurbo2.WCF.Security.SecurityBroker">
        <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
        <endpoint address=""
            binding="webHttpBinding"
            bindingConfiguration="default"
            contract="IWW.MIGTurbo2.WCF.Security.ISecurityBroker"
                behaviorConfiguration="webHttpEnablingBehaviour">
        </endpoint>
    </service>
</services>
<client />
<bindings>
    <webHttpBinding>
        <binding name="default" />
    </webHttpBinding>
</bindings>
</system.serviceModel> 
```

因此，据我所知，我的**IMetadataExchange**合同用**mex**定义，并且已连接。我错过了什么愚蠢的东西吗？

**编辑**

我的服务定义如下所示，如果这有用的话：

```
<%@ ServiceHost Language="C#" Debug="true" Service="IWW.MIGTurbo2.WCF.Security.SecurityBroker" Factory="System.ServiceModel.Activation.WebScriptServiceHostFactory"   %> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-18T09:52:43.123

您的配置文件在“endpoint”元素上具有 behaviorConfiguration 属性，但在“service”元素上也需要它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T20:02:30.510

我正在为所有人使用 NetTcpBinding。就我而言，我遇到了同样的问题并通过添加解决了它：

(a) 到 mex 端点的 behaviorConfiguration=""

```
 <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange" behaviourConfiguration="" /> 
```

(b) 服务定义的 behaviorConfiguration="mex"：

```
 <services>
     <service name="AcmeService" behaviorConfiguration="mex"> 
```

(c) 行为入口

```
 <behaviors>
    <serviceBehaviors>
        <behaviour name="mex">
            <serviceDebug includeExceptionDetailInFaults="false"/>
            <serviceMetadata />
        </behavior>
     </serviceBehaviors>
  </behaviors> 
```

# multithreading - 如果只使用 1 个线程，我可以轻松编写程序来使用英特尔的四核或 i7 芯片吗？

> ID：876859
> 
> 赞同：2
> 
> 时间：2009-05-18T09:25:36.190
> 
> 标签：multithreading, performance, multicore

我想知道在我的程序中是否只有 1 个线程，我可以编写它以便四核或 i7 可以实际使用不同的内核吗？通常当我在四核计算机上编写程序时，CPU 使用率只会达到 25% 左右，而且工作似乎在 4 个核心之间进行，如任务管理器所示。（我写的程序通常是 Ruby、Python 或 PHP，所以它们可能没有那么优化）。

**更新：**如果我用 C 或 C++ 编写它会怎样，并且

```
for (i = 0; i < 100000000; i++) {
  a = i * 2;
  b = i + 1;
  if (a == ...  || b == ...) { ... }
} 
```

然后对编译器使用最高级别的优化。编译器能否使乘法发生在一个内核上，而加法发生在另一个内核上，从而使两个内核同时工作？使用 2 个核心不是一个相当容易的优化吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-18T09:30:11.467

不，您需要使用线程在多个 CPU（无论是真实的还是虚拟的）上同时执行多个路径......一个线程的执行本质上是绑定到一个 CPU，因为这保持了语句之间的“发生在之前”的关系，这是核心程序如何工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T15:39:42.360

首先，除非在程序中创建了多个线程，否则该程序中只有一个执行线程。

看到 25% 的 CPU 资源用于该程序，这表明四个内核中的一个内核正在以 100% 的速度使用，但所有其他内核都没有被使用。如果使用了所有内核，那么理论上该进程可能会占用 100% 的 CPU 资源。

附带说明一下，Windows 任务管理器中显示的图表是当时运行的所有进程的 CPU 利用率，而不仅仅是一个进程。

其次，您提供的代码可以拆分为可以在两个单独的线程上执行的代码，以便在两个内核上执行。我猜你想证明这一点`a`并且`b`彼此独立，它们只依赖于`i`. 在这种情况下，`for`像下面这样分离循环内部可以允许多线程操作，从而提高性能：

```
// Process this in one thread:
for (int i = 0; i < 1000; i++) {
    a = i * 2;
}

// Process this in another thread:
for (int i = 0; i < 1000; i++) {
    b = i + 1;
} 
```

但是，变得棘手的是，是否需要评估来自两个单独线程的结果的时间，例如`if`后面的​​语句似乎暗示的那样：

```
for (i = 0; i < 1000; i++) {
  // manipulate "a" and "b"
  if (a == ...  || b == ...) { ... }
} 
```

这将需要查找位于不同线程（在不同处理器上执行）中的`a`and值，这是一个非常令人头疼的问题。`b`

没有真正好的保证`i`两个线程的值同时相同（毕竟，乘法和加法可能会花费不同的时间来执行），这意味着一个线程可能需要等待另一个线程在比较和对应于从属值`i`之前使值同步。或者，我们是否要创建第三个线程来进行两个线程的值比较和同步？无论哪种情况，复杂性都开始迅速增加，所以我认为我们可以同意我们开始看到出现严重的混乱——线程之间共享状态可能非常棘手。`a``b``i`

因此，您提供的代码示例只是部分可并行化而不需要太多努力，但是，一旦需要比较两个变量，分离这两个操作很快就会变得非常困难。

并发编程的几个经验法则：

当有些任务可以分解为涉及完全独立于其他数据及其结果（状态）的数据处理的部分时，并行化可以非常容易。

例如，从输入计算值的两个函数（在伪代码中）：

```
f(x) = { return 2x }
g(x) = { return x+1 } 
```

这两个函数不相互依赖，因此它们可以并行执行而没有任何痛苦。此外，由于它们不是在计算之间共享或处理的状态，即使`x`需要计算多个值，即使*这些*值也可以进一步拆分：

```
x = [1, 2, 3, 4]
foreach t in x:
    runInThread(f(t))
foreach t in x:
    runInThread(g(t)) 
```

现在，在这个例子中，我们可以有 8 个独立的线程来执行计算。对于并发编程来说，没有[副作用](http://en.wikipedia.org/wiki/Side_effect_(computer_science))可能是一件好事。

但是，一旦依赖于其他计算的数据和结果（这也意味着存在副作用），并行化就变得极其困难。在许多情况下，这些类型的问题必须连续执行，因为它们等待返回其他计算的结果。

也许问题归结为，为什么编译器不能找出可以自动并行化并执行这些优化的部分？我不是编译器方面的专家，所以我不能说，但维基百科上有一篇关于[自动并行](http://en.wikipedia.org/wiki/Automatic_parallelization)化的文章可能有一些信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-10-17T17:48:52.570

我非常了解英特尔芯片。

根据您的代码，“如果（a == ... || b == ...）”是一个障碍，否则处理器内核将并行执行所有代码，而不管编译器做了什么样的优化。这只要求编译器不是一个非常“愚蠢”的编译器。这意味着硬件本身具有能力，而不是软件。因此，在这种情况下不需要线程编程或 OpenMP，尽管它们有助于改进并行计算。注意这里并不意味着超线程，只是普通的多核处理器功能。

请谷歌“处理器管道多端口并行”以了解更多信息。

这里我想举一个经典的例子，它可以由多核/多通道IMC平台（例如Intel Nehalem家族，如Core i7）并行执行，不需要额外的软件优化。

```
char buffer0[64];
char buffer1[64];
char buffer2[64];
char buffer[192];

int i;
for (i = 0; i < 64; i++) {
    *(buffer + i) = *(buffer0 + i);
    *(buffer + 64 + i) = *(buffer1 + i);
    *(buffer + 128 + i) = *(buffer2 + i);
} 
```

为什么？3个原因。

1 Core i7有一个三通道IMC，其总线宽度为192位，每通道64位；并且内存地址空间在每个高速缓存行的基础上在通道之间交错。高速缓存行长度为 64 字节。所以基本上buffer0在通道0上，buffer1在通道上，buffer2在通道2上；而对于缓冲区[192]，它在 3 个通道之间交错，每个通道 64 个。IMC 支持同时从多个通道加载或存储数据。那是具有最大吞吐量的多通道 MC 突发。在我的以下描述中，我只会说每个通道 64 字节，例如每个通道 w/BL x8（突发长度 8、8 x 8 = 64 字节 = 缓存行）。

2 buffer0..2 和 buffer 在内存空间中是连续的（在虚拟和物理上的特定页面上，堆栈内存）。运行时，缓冲区 0、1、2 和缓冲区被加载/提取到处理器缓存中，总共 6 个缓存行。所以在开始执行上面的“for(){}”代码之后，完全不需要访问内存，因为所有数据都在缓存中，L3缓存，一个非核心部分，由所有核心共享。我们不会在这里讨论 L1/2。在这种情况下，每个内核都可以提取数据然后独立计算它们，唯一的要求是操作系统支持 MP 并且允许窃取任务，例如运行时调度和关联共享。

3 buffer0、1、2和buffer之间没有任何依赖关系，所以没有执行停顿或障碍。例如执行 *(buffer + 64 + i) = *(buffer1 + i) 不需要等待 *(buffer + i) = *(buffer0 + i) 的执行完成。

虽然，最重要和最难的一点是“窃取任务，运行时调度和亲和共享”，这是因为对于一个给定的任务，只有一个任务执行上下文，它应该由所有内核共享以执行并行执行。任何人如果能理解这一点，他/她就是世界顶级专家之一。我正在寻找这样的专家来合作我的开源项目，并负责并行计算和最新的 HPC 架构相关工作。

请注意，在上面的示例代码中，您还可以使用一些 SIMD 指令，例如 movntdq/a，它将绕过处理器缓存并直接写入内存。在进行软件级优化时也是一个非常好的主意，虽然访问内存非常昂贵，例如访问缓存（L1）可能只需要 1 个周期，但在以前的 x86 芯片上访问内存需要 142 个周期。

请访问[http://effocore.googlecode.com](http://effocore.googlecode.com)和[http://effogpled.googlecode.com](http://effogpled.googlecode.com)了解详情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T10:39:24.013

The only way to use multiple cores without using multithreading is to use multiple programs.

In your example above, one program could handle 0-2499999, the next 2500000-4999999, and so on. Set all four of them off at the same time, and they will use all four cores.

Usually you would be better off writing a (single) multithreaded program.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T09:30:38.817

[隐式并行](http://en.wikipedia.org/wiki/Implicit_parallelism)性可能是您正在寻找的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-18T09:30:39.110

如果您的应用程序代码是单线程的，则仅在以下情况下才会使用多个处理器/内核：

*   您使用的库正在使用多个线程（可能将这种用法隐藏在一个简单的界面后面）
*   您的应用程序会产生其他进程来执行其部分操作

但是，Ruby、Python 和 PHP 应用程序都可以编写为使用多线程。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-18T09:31:27.473

单线程程序将只使用一个内核。操作系统很可能会不时地在内核之间切换程序——根据一些规则来平衡负载等。所以你会看到总体上只有 25% 的使用率并且所有四个内核都在工作——但一次只有一个。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-19T18:14:43.217

使用 C/C++，您可以使用[OpenMP](http://en.wikipedia.org/wiki/OpenMP)。这是带有编译指示的 C 代码，例如

```
#pragma omp parallel for
for(..) {
...
} 
```

说这个 for 将并行运行。这是并行化某些东西的一种简单方法，但有时您必须了解并行程序的执行方式，并且会遇到并行编程错误。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-10-17T15:14:53.997

如果您想并行选择评估为“真”您的陈述的“i”，`if (a == ... || b == ...)`那么您可以使用 PLINQ（在 .NET 4.0 中）执行此操作：

```
 //note the "AsParallel"; that's it, multicore support.
        var query = from i in Enumerable.Range(0, 100000000).AsParallel()
                    where (i % 2 == 1 && i >= 10) //your condition
                    select i;

        //while iterating, the query is evaluated in parallel! 
        //Result will probably never be in order (eg. 13, 11, 17, 15, 19..)
        foreach (var selected in query)
        {
            //not parallel here!
        } 
```

相反，如果您想并行化操作，您将能够：

```
Parallel.For(0, 100000000, i =>
{
    if (i > 10)           //your condition here
        DoWork(i);        //Thread-safe operation
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-18T09:47:41.230

由于您在谈论“任务管理器”，因此您似乎在 Windows 上运行。但是，如果您在那里运行一个具有多个进程的网络服务器（对于带有 fcgi 或 Apache 预分叉的 Ruby 或 PHP，在较小程度上是其他 Apache 工作人员），那么它们往往会分散在内核中。

如果只有一个没有线程的程序正在运行，那么，不，不会有任何显着的优势——你一次只会破坏一件事，除了操作系统驱动的后台进程。

# objective-c - 如何比较 Objective-C 中的对象？

> ID：876866
> 
> 赞同：24
> 
> 时间：2009-05-18T09:28:15.997
> 
> 标签：objective-c

如何比较自定义类的两个对象？我的想法是在类中添加一个额外的方法，我可以在其中将当前对象与另一个同类对象进行比较。

所以我可以编写自己的代码来比较类的每个字段。

我就是这样做的。还是有一些预定义的方法可以做到这一点？像 NSString 类的“isEqualTo”？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-05-18T14:00:12.220

指向的指针`-isEqual:`很好，但是如果您实现`-isEqual:`，则绝对还*必须*`-hash`以这样一种方式实现，即如果两个对象返回`YES`for`-isEqual:`它们也将返回相同的值 for `-hash`。当你使用像 NSArray 这样的集合时，实现`isEqual:`而不实现`-hash`会导致一些非常令人惊讶的错误。

对于新开发人员，我倾向于建议不要重载`-isEqual:`. 我建议改为使用与 NSString 相同的技术，并创建一个自定义`-isEqualToFoo:`（`Foo`您的类在哪里），直到您了解`-isEqual:`对集合的影响并特别想要这种行为。重载`-isEqual:`功能强大，但您可以创建的错误很微妙。在许多情况下，创建自己的自定义比较器更安全、更清晰。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-18T13:22:25.820

标准方法是覆盖`- (BOOL)isEqual:(id)anObject`and `- (NSUInteger)hash`。

您应该阅读[NSObject 协议](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/hash)的文档，[这个](https://stackoverflow.com/questions/254281/best-practices-for-overriding-isequal-and-hash/254337)SO question 有一些关于如何编写哈希方法的有趣答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T13:28:07.993

看`isEqual:`和`compare:`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-11T06:00:36.827

我有以下对象：

```
#import <Foundation/Foundation.h>

typedef NS_ENUM(NSUInteger, SeasonType) {
    kWinter,
    kSpring,
    kSummer,
    kFall
};

@interface Season : NSObject

@property (nonatomic) SeasonType season;
@property (nonatomic) NSUInteger year;

+(id) seasonWithYear:(NSInteger)year season:(SeasonType)season;
-(id) initWithYear:(NSInteger)year season:(SeasonType)season;

@end 
```

我所做的是覆盖基本 NSObject 比较方法，无需重新发明轮子，代码也保持清洁：

```
#import "Season.h"

@interface Season()

@end

@implementation Season

+(id) seasonWithYear:(NSInteger)year season:(SeasonType)season{
    return [[self alloc] initWithYear:year season:season];
}

-(id) initWithYear:(NSInteger)year season:(SeasonType)season{
    self = [super init];
    if (self)
    {
        _year = year;
        _season=season;
        _baseDate=nil;
    }

    return self;
}

#pragma mark - NSObject

- (BOOL)isEqual:(id)object {
    if (self == object) {
        return YES;
    }

    if (![object isKindOfClass:[Season class]]) {
        return NO;
    }

    return [self _isEqualToSeason:(Season *)object];
}

- (NSUInteger)hash {
    return self.season ^ self.year;
}

#pragma mark - Private/Internal

- (BOOL)_isEqualToSeason:(Season *)season {
    if (!season) {
        return NO;
    }

    return ((!self.season && !season.season) || self.season == season.season) &&
    ((!self.year && !season.year)    ||  self.year == season.year) ;
}

@end 
```

用法：

```
Season *season2 = [Season seasonWithYear:2010 season:kFall];
Season *season3 = [Season seasonWithYear:2009 season:kFall];
[season2 isEqual:season3]; 
```

# javascript - 我怎样才能优雅地选择一个父母，包括它的一组直系后代？

> ID：876884
> 
> 赞同：0
> 
> 时间：2009-05-18T09:33:47.733
> 
> 标签：javascript, jquery

我正在处理一堆乱七八糟的 HTML 标记。为了获得可靠的匹配，我使用['>' 运算符](http://docs.jquery.com/Selectors/child)显式查询元素链。

对于这个问题，我试图选择显式后代链的父级。

例如，我想在以下 HTML 中选择具有类“工具栏”的表格元素：

```
<table class='toolbar'>
  <tbody>
    <tr>
      <td class='button'>
        ...
      </td>
    </tr>
  </tbody>
</table> 
```

这是我尝试过的：

**1.使用“有”**

```
$("table.toolbar:has(tbody > tr > td.button)") 
```

即使 tbody 不是 table 的直接后代，这里的元素也会匹配，因此这不能可靠地工作。

**2.使用'>'和parent()**

```
$("table.toolbar > tbody > tr > td.button").parent().parent().parent() 
```

这有效，但很混乱。还必须确保包含正确数量的 parent() 调用。

**3\. ？？？**

由于 HTML 很糟糕，因此在查询中明确给出元素作为**另一个下一个直接后代**是至关重要的。

任何人都可以帮助以最好的方式做到这一点吗？*谢谢！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T09:38:29.220

```
$("td.button").parents("table.toolbar") 
```

似乎是最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T09:49:29.183

**更新：**
您可以使用：

```
$("table.toolbar:has(tbody:has(td.button))") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T09:52:02.517

我认为：

$("td.button").closest("table.toolbar")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T10:50:23.960

```
$("table.toolbar > tbody > tr > td.button").closest("table.toolbar") 
```

仍然有点混乱，但应该可以工作。

*   [最接近（expr）的文档](http://docs.jquery.com/Traversing/closest)

# sql-server-2008 - SSIS 2008 Execute SQL 输出参数映射datetime2问题

> ID：876886
> 
> 赞同：3
> 
> 时间：2009-05-18T09:33:49.543
> 
> 标签：sql-server-2008, ssis, types, parameters, datetime2

我正在尝试使用 SSIS 2008 中的执行 SQL 任务将存储过程输出参数映射到包变量。

包变量是 SSIS 类型的 DateTime，存储过程参数是 SQL 类型的 DATETIME。

SQL 语句`EXEC GetCurrentDate @CurrentDate=?`在参数映射屏幕中，参数被映射到包变量，并指定了方向输出和数据类型 DBTIMESTAMP。

当我运行包时，我收到以下错误：

> [执行 SQL 任务] 错误：执行查询“EXEC GetCurrentDate @CurrentDate=?”失败，出现以下错误：“分配给变量“User::CurrentDate”的值的类型与当前变量类型不同。变量可能不在执行期间更改类型。变量类型是严格的，除了 Object 类型的变量。“。可能的失败原因：查询有问题，“ResultSet”属性设置不正确，参数设置不正确，或连接未正确建立。

如果我对正在运行的查询进行跟踪，我会看到类型被假定为 datetime2：

```
declare @p3 datetime2(7)
set @p3=NULL
exec sp_executesql N'EXEC GetCurrentDate @CurrentDate=@P1 ',N'@P1 datetime2(7) OUTPUT',@p3 output
select @p3 
```

有谁知道为什么它假设类型是 datetime2？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T12:48:38.527

在 Micorsoft Connect 错误报告中找到了答案：

> 我们将关闭此案例，因为这是预期的行为，并且是新的 sql 日期时间类型更改的结果。您正在为 sql 任务使用本机 oledb 连接管理器，在 COM 互操作过程中，我们使用 VARIANT 来保存值，防止数据丢失的唯一方法是将值存储为 BSTR 变体。如果您将 User::dateParam 更改为 String 类型，它将起作用，或者您可以切换到使用托管连接管理器来绕过 COM 互操作。

[http://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=307835](http://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=307835)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T10:51:06.017

尝试指定 inout/output 参数，`DATE`而不是`DBTIMESTAMP`在 SSIS 任务中。

这当然适用于我研究过的 SSIS 2005 包。

也值得看看[这个链接](http://blogs.conchango.com/jamiethomson/archive/2005/03/12/SSIS_3A00_-Datetime-variables-don_2700_t-always-do-what-you-expect.aspx)，它涵盖了这个以及 SSIS 和日期的其他几个问题。

# screen-capture - 我需要录制我们的应用程序的演示。谁能推荐一个好的屏幕录像机？

> ID：876887
> 
> 赞同：2
> 
> 时间：2009-05-18T09:34:10.430
> 
> 标签：screen-capture

我需要录制我们的应用程序的演示。谁能推荐一个好的屏幕录像机？

我试过 CamStudio，但它会抛出错误。我应该尝试其他任何好的免费软件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T09:41:29.993

试试UVScreenCamera，我觉得很正常

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T10:14:42.657

Camtasia 工作室做得很好。
如果该应用程序是跨平台的（Java、基于 Web），您可以请使用 Mac 的朋友使用 Screenium、Snapz Pro 或 ScreenFlow。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T09:38:54.070

静态截图？也许 Wink 也适合你：

[问题​​​步骤记录器工具制作教程](https://stackoverflow.com/questions/876889/steps-recorder-tool-to-make-tutorials)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T09:39:30.310

您可以使用[ScreenToaster](http://www.screentoaster.com/)做到这一点，而无需安装任何软件（种类）。

否则，如果您更喜欢传统的应用程序， [Jing](http://www.jingproject.com/)和[Screen2EXE](http://www.screen-record.com/screen2exe.htm)都是免费的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T09:40:43.100

[Wink](http://www.debugmode.com/wink/)是免费软件。从他们的主页：

> Wink 是一个教程和演示创建软件，主要用于创建有关如何使用软件的教程（如 MS-Word/Excel 等的导师）。使用 Wink，您可以捕获屏幕截图、添加解释框、按钮、标题等，并为您的用户生成高效的教程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-05-28T07:32:35.307

周围有很多屏幕录制工具，包括免费的和专业的，但我以前从未见过像 ScreenToaster 这样的东西。这是非常好的屏幕录制应用程序。

# documentation - 制作教程的问题步骤记录器工具

> ID：876889
> 
> 赞同：1
> 
> 时间：2009-05-18T09:34:18.573
> 
> 标签：documentation, documentation-generation, problem-steps-recorder

这个周末我安装了 Windows 7（太棒了！），在那里我发现了这个名为[Problem Steps Recorder](http://www.istartedsomething.com/20090111/windows-7-problem-steps-recorder-miracle-tool/)的天才工具。显然是 beta 错误报告工具 thingy 附带的一个工具。

我目前正在尝试为其他开发人员记录一些应用程序的使用情况。（在这种情况下，如何在 SQL Profiler 中获取 Showplan XML Statistics 以及数据库引擎优化顾问的一些基本用法）。我在想一个像问题步骤记录器这样的工具非常适合这个！唯一的问题是它只在 Windows 7（？）中，输出是一个 mht 文件，其中还包含一些一般错误问题文本等......

无论如何，有谁知道这个工具是否有更通用的版本？或者，如果有一些免费且流畅的替代方案对 Vista（以及其他 Windows 版本，如果可能的话）做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T09:37:52.217

也许[Wink](http://www.debugmode.com/wink/)是你的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:49:20.150

我正在为用户文档和报告错误寻找更好的捕获工具。我见过的最好的“步数记录器”与[Testuff](http://www.testuff.com/)捆绑在一起。他们的 Test Runner 应用程序可让您选择要录制的区域（视频）。它捕获每一次鼠标点击，并在视频播放的同时记录每一次按键。当然，它只是为向开发团队报告错误而设计的。

我仍在使用[SnagIt](http://www.techsmith.com/snagit.html)（便宜，不是免费的）来捕获屏幕和添加注释。我也有[Camtasia](http://www.techsmith.com/camtasia.html)，但这绝对不是您要求的“免费”:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:02:26.287

我刚刚偶然发现了“Imago recorder”，可通过各种软件/下载站点获得。它不漂亮，但它可以解决问题而且它是免费的。

它目前可用[here](http://www.softoxi.com/imago-recorder.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-27T16:28:32.977

您绝对应该注意的附加选项是[StepsToReproduce](http://stepstoreproduce.net)。有多种录制选项（屏幕/窗口/区域）和功能强大的注释工具。而且它也是免费的！

# c# - 用于访问 Exchange 2003 日历的 WebDAV 与 SDK

> ID：876890
> 
> 赞同：0
> 
> 时间：2009-05-18T09:34:29.337
> 
> 标签：c#, sdk, calendar, exchange-server, webdav

我试图弄清楚如何从远程托管的 ASP.NET/C# 页面访问 Exchange 2003 的日历（我只需要阅读和显示日历约会/会议等）。据我了解，我主要有两个选择 - 使用 WebDAV 或 Exchange SDK。

我找到了一些如何使用 WebDAV 的好例子，虽然我还没有让它正常工作。我还没有仔细研究 SDK，在我花时间研究之前，我想知道是否有人对这两种不同的技术有任何优缺点，以及我应该采取的任何建议？

任何有用的 SDK 链接也将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T15:24:29.380

正如您所说，有很多方法可以做到这一点，但 webdav 是最好的选择，因为它由托管代码中的 MS 支持，而 CDO 往往根据您正在做的事情有更灰色的支持。如果您是 webdav 的新手，那么看看周围的一些包装器类可能是一个想法，因为这可以加快您的开发速度。我使用了第 3 方
[http://www.independentsoft.de/webdavex/index.html](http://www.independentsoft.de/webdavex/index.html)他们的支持很快！

MSDN 文档可能是起点 [http://msdn.microsoft.com/en-us/library/aa143161(EXCHG.65).aspx](http://msdn.microsoft.com/en-us/library/aa143161(EXCHG.65).aspx)

这是我在展示示例之前已预订标记的其他内容

[http://msdn.microsoft.com/en-us/library/aa123570.aspx](http://msdn.microsoft.com/en-us/library/aa123570.aspx) [http://www.msexchange.org/articles/Access-Exchange-2000-2003-Mailbox-WebDAV.html](http://www.msexchange.org/articles/Access-Exchange-2000-2003-Mailbox-WebDAV.html) [http://blogs。 technet.com/kclemson/archive/2004/01/23/62247.aspx](http://blogs.technet.com/kclemson/archive/2004/01/23/62247.aspx) [http://blog.mbcharbonneau.com/2006/10/26/using-net-and-webdav-to-access-an-exchange-server /](http://blog.mbcharbonneau.com/2006/10/26/using-net-and-webdav-to-access-an-exchange-server/)

# performance - 确定单台 PC 上编译性能硬件瓶颈的最简单方法？

> ID：876897
> 
> 赞同：4
> 
> 时间：2009-05-18T09:35:50.067
> 
> 标签：performance, hardware, compilation, upgrade

我现在已经为硬件升级节省了一些钱。我想知道，这是**衡量**硬件的哪一部分是编译瓶颈并且应该升级的最简单方法？

有什么我可以使用的聪明技巧吗？我已经调查过了`perfmon`，但它有太多的计数器，如果不知道应该查看什么，它就不是很有帮助。

条件：家庭开发，Windows XP Pro，Visual Studio 2008

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-18T10:41:12.120

问题实际上是“在编译过程中最大化了什么？”

如果不想使用 perfmon，可以使用任务监视器之类的东西。

1.  运行编译。

2.  看看什么是最大的。

您是否一直使用 100% CPU？获得更多 CPU - 更快或更多内核或其他东西。

您是否一直使用 100% 的内存？显示器上哪个数字很重要？您可以购买的唯一内存是“物理”内存。唯一重要的因素是物理内存。您在仪表上看到的其他东西不是您购买的东西，它们是对 Windows 工作方式的调整。

您是否进行了“大量” I/O？你不能轻易说出什么是“巨大的”，但你可以得出结论。如果您不使用内存且不使用 CPU，那么您将使用唯一剩下的资源——I/O 受限并且需要更快的总线——这通常意味着全新的机器。

更快的 HDD 几乎没有价值——总线时钟速度是一个限制因素。总线宽度是另一个限制因素。没有人设计出令人讨厌的 I/O 总线，然后用垃圾硬盘驱动它。通常，他们根据可用的 HDD 设计符合特定成本目标的总线。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-04-04T05:22:23.393

> > 更快的 HDD 几乎没有价值——总线时钟速度是一个限制因素。总线宽度是另一个限制因素。没有人设计出令人讨厌的 I/O 总线，然后用垃圾硬盘驱动它。通常，他们根据可用的 HDD 设计符合特定成本目标的总线。

垃圾。与它们连接的 I/O 总线相比，现代 HDD 速度较慢。命名一个可以最大化 SATA 2 接口（现在甚至是一代旧的）随机 IOPS 的单个硬盘驱动器......当总线能够达到大约 280MB/s 时，硬盘驱动器很幸运能够达到 10MB/s。例如[http://www.anandtech.com/show/2948/3](http://www.anandtech.com/show/2948/3)。即使在那里，SSD 也只能达到 50MB/s。很明显，IOPS 不是瓶颈，否则 HDD 的性能将与 SSD 一样多。

我从未见过计算机 IOP 绑定而不是 HDD 绑定。它不会发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T11:53:56.857

已经建议使用任务监视器，但 Sys Internals 任务监视器比内置的 Windows 任务监视器为您提供更多信息：

[Sys Internals 任务监视器](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

您可能还想查看您的 PC 上正在运行哪些其他正在耗尽内存和/或 CPU 处理能力的东西。可以删除或仅按需运行影响性能的事物。

Windows XP 将仅支持 3GB 内存使用您必须打开的开关，我似乎记得需要编写应用程序才能真正考虑到这一点。

# python - Django 可重用应用程序，具有与朋友提要中类似的功能

> ID：876898
> 
> 赞同：2
> 
> 时间：2009-05-18T09:36:15.997
> 
> 标签：python, django

我希望实现“喜欢”的功能，就像他们在[friendfeed](http://friendfeed.com)中所做的那样。是否有一个 django 可重复使用的应用程序已经这样做了？

谢谢！缺口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T10:17:08.627

这种事情你应该从头开始自己写。最基本形式的“喜欢”将是一个与用户和其他对象有关系的对象。查看[contenttypes 框架](http://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/)文档，了解如何为此使用通用外键。您唯一需要担心的另一件事是使创建视图具有幂等性。

如果您是 django 新手，这可能是一个有趣的小练习，可以让您熟悉内容类型。如果您不是新手，整个应用程序应该花不到一个小时。无论哪种方式，我都不会去寻找可插拔的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T09:58:35.060

[您可以使用Pinax](http://pinaxproject.com/)的某些部分将您自己的组合在一起。

没有一个应用程序可以为您执行此操作，因为它太具体且可重用的 Django 应用程序应该非常专注。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T10:07:37.150

搜索[http://djangoplugables.com/](http://djangoplugables.com/)

# c++ - 在 C++ 中计算执行时间

> ID：876901
> 
> 赞同：45
> 
> 时间：2009-05-18T09:37:27.147
> 
> 标签：c++, execution-time

我写了一个c++程序，我想知道如何计算执行时间，这样我就不会超过时间限制。

```
#include<iostream>

using namespace std;

int main ()
{
    int st[10000],d[10000],p[10000],n,k,km,r,t,ym[10000];
    k=0;
    km=0;
    r=0;
    scanf("%d",&t);
    for(int y=0;y<t;y++)
    {
    scanf("%d",&n);
    for(int i=0;i<n;i++)
    {
            cin>>st[i] >>d[i] >>p[i];
    }
    for(int i=0;i<n;i++)
    {
            for(int j=i+1;j<n;j++)
            {
                    if((d[i]+st[i])<=st[j])
                    {
                              k=p[i]+p[j];
                    }
                    if(k>km)
                    km=k;
            }
        if(km>r)
        r=km;
    }
    ym[y]=r;
}
    for( int i=0;i<t;i++)
    {
         cout<<ym[i]<<endl;
    }

    //system("pause");
    return 0;
} 
```

这是我的程序，我希望它在 3 秒的时间限制内！怎么做 ？是的，对不起，我的意思是执行时间！

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2009-05-18T09:56:36.453

如果你安装了 cygwin，从它的 bash shell，运行你的可执行文件，比如说`MyProgram`，使用`time`实用程序，像这样：

```
/usr/bin/time ./MyProgram 
```

这将报告您的程序的执行花费了多长时间——输出如下所示：

```
real    0m0.792s
user    0m0.046s
sys     0m0.218s 
```

您还可以手动修改您的 C 程序以使用`clock()`库函数对其进行检测，如下所示：

```
#include <time.h>
int main(void) {
    clock_t tStart = clock();
    /* Do your stuff here */
    printf("Time taken: %.2fs\n", (double)(clock() - tStart)/CLOCKS_PER_SEC);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2017-12-19T13:27:00.427

使用 C++11 来测量一段代码的执行时间，我们可以使用 now() 函数：

```
auto start = chrono::steady_clock::now();

//  Insert the code that will be timed

auto end = chrono::steady_clock::now();

// Store the time difference between start and end
auto diff = end - start; 
```

如果要在上面的代码中打印开始和结束之间的时间差，可以使用：

```
cout << chrono::duration <double, milli> (diff).count() << " ms" << endl; 
```

如果您更喜欢使用纳秒，您将使用：

```
cout << chrono::duration <double, nano> (diff).count() << " ns" << endl; 
```

diff 变量的值也可以截断为整数值，例如，如果您希望结果表示为：

```
diff_sec = chrono::duration_cast<chrono::nanoseconds>(diff);
cout << diff_sec.count() << endl; 
```

更多信息请点击[这里](https://solarianprogrammer.com/2012/10/14/cpp-11-timing-code-performance/)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-01-24T07:46:15.193

**概述**

我为此使用`@AshutoshMehra`响应编写了一个简单的语义破解。这样你的代码看起来真的很可读！

**宏**

```
#include <time.h>

#ifndef SYSOUT_F
#define SYSOUT_F(f, ...)      _RPT1( 0, f, __VA_ARGS__ ) // For Visual studio
#endif

#ifndef speedtest__             
#define speedtest__(data)   for (long blockTime = NULL; (blockTime == NULL ? (blockTime = clock()) != NULL : false); SYSOUT_F(data "%.9fs", (double) (clock() - blockTime) / CLOCKS_PER_SEC))
#endif 
```

**用法**

```
speedtest__("Block Speed: ")
{
    // The code goes here
} 
```

**输出**

```
Block Speed: 0.127000000s 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-05-18T09:56:44.940

注意：这个问题最初是关于编译时间的，但后来发现 OP 真的意味着执行时间。但也许这个答案对某人仍然有用。

对于 Visual Studio：转到`Tools / Options / Projects and Solutions / VC++ Project Settings`并将`Build Timing`选项设置为“ `yes`”。之后，每个构建的时间将显示在“输出”窗口中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-18T13:01:28.670

这看起来像 Dijstra 的算法。在任何情况下，运行所需的时间将取决于 N。如果需要超过 3 秒，我看不到任何加速它的方法，因为它正在进行的所有计算都需要完成。

根据您要解决的问题，可能会有更快的算法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T04:07:42.817

我已经使用了上面说的技术，但我仍然发现**Code:Blocks IDE**中给出的时间或多或少与获得的结果相似——（可能会相差几微秒）..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-26T16:52:59.247

如果您使用的是 C++，那么您应该尝试下面的代码，因为如果您直接使用[@Ashutosh Mehra 的答案，您总是会得到 0 作为答案](https://stackoverflow.com/a/876970)。

```
#include <iostream>
#include <time.h>

using namespace std;

int main() {
    int a = 20000, sum=0;

    clock_t start = clock();
    for (int i=0; i<a; i++) {
        for (int k = 0; k<a; k++)
            sum += 1;
    }
    cout.precision(10);
    cout << fixed <<  float(clock() - start)/CLOCKS_PER_SEC  << endl;
    return 0;
} 
```

因为在 C++ 中，浮点和双精度值将直接四舍五入。所以我使用 将`cout.precision(10)`任何值的输出精度设置为小数点后 10 位。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-30T10:40:53.660

您可以尝试以下 C++ 代码：

```
#include <chrono>

auto start = std::chrono::system_clock::now();
// Your Code to Execute //
auto end = std::chrono::system_clock::now();
std::cout << std::chrono::duration_cast<std::chrono::milliseconds>(end - start).count() << "ms" << std::endl; 
```

# wpf - 将页面或用户控件加载到 XAML 框架元素有什么区别？

> ID：876902
> 
> 赞同：6
> 
> 时间：2009-05-18T09:37:45.027
> 
> 标签：wpf, xaml, user-controls

[我正在重建在此 WPF 视频的可下载代码中](http://windowsclient.net/learn/video.aspx?v=6886)找到的 WPF 幻灯片应用程序结构。

有一个 Presentation 类，它有一个 INotifyPropertyChanged 属性“CurrentSlide”，当您单击下一个/上一个按钮时它会发生变化，并在 Frame 元素中动态显示。

下载的代码**将 Pages 加载**到此框架中，但我尝试**加载 UserControls**，这似乎也能正常工作，实际上我找不到任何区别。

**有谁知道将 Pages 或 UserControls 加载到 XAML Frame 元素中的任何区别？**

```
<Window x:Class="TestFull8229.Views.MainView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:c="clr-namespace:TestFull8229.Commands"
    xmlns:viewModels="clr-namespace:TestFull8229.ViewModels"
    Title="Main Window" Height="400" Width="800">

    <Window.Resources>
        <viewModels:Presentation x:Key="presentation"/>
    </Window.Resources>

    <DockPanel>
        <StackPanel>
            <Viewbox Stretch="Uniform">
                <Frame Width="800" Height="600" 
                       Source="{Binding Path=CurrentSlide, 
                       Source={StaticResource presentation}}"/>
            </Viewbox>
        </StackPanel>
    </DockPanel>
</Window> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-18T09:51:39.397

Page 被设计为位于导航容器中，因此它具有标题属性和对导航服务的访问权限。但正如您所指出的，用户控件可以加载到框架中，任何有效的 WPF“内容”也可以加载。Page 还用作 PageFunction 的基类，这对于创建结构化导航（例如向导）很有用。

哦，还有一件事……一个页面可以在没有主机应用程序的情况下加载到 Internet Explorer 中。换句话说，IE 可以像 Frame 或 NavigationWindow 一样充当页面的导航容器。

# javascript - 如何在不影响网站健壮性的情况下捕获浏览器页面上的点击？

> ID：876917
> 
> 赞同：3
> 
> 时间：2009-05-18T09:41:57.387
> 
> 标签：javascript

我的 javascript 代码被添加到随机网站。当单击网站上的（特定）链接/按钮时，我希望能够向我的服务器报告。但是，我希望在任何情况下都不会中断网站执行（例如我的代码错误或我的服务器 ID 关闭等）。换句话说，无论我的代码如何，我都希望网站执行其默认操作。

简单的方法是在点击事件中添加事件监听器，同步调用服务器以确保调用被注册，然后执行点击。但我不希望我的网站和代码能够导致点击无法完成。

关于如何做到这一点的任何其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T14:03:11.340

附上这个功能：

```
(new Image()).src = 'http://example.com/track?url=' + escape(this.href)
    + '&' + Math.random(); 
```

1.  它是异步的（“伪图像”在后台加载）
2.  它可以是跨域的（与 ajax 不同）
3.  它使用最基本的 Javascript 功能

但是，由于在图像请求完成之前网站卸载，它可能会*错过一些点击。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T09:49:32.630

只要你**不返回 false**；在您的回调中，您的 AJAX**是异步**的，我认为您的链接无法正常工作不会有任何问题。

```
$("a.track").mousedown(function(){ $.post("/tools/track.php") }) 
```

我还建议您将整个 logicc 封装在**try{} catch()**块中，这样遇到的任何错误都不会阻止正常的点击行为继续。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T10:03:00.980

也许是这样的？我还没有测试它，所以它可能包含一些错字，但想法是一样的......

```
<script type="text/javascript">
function mylinkwasclicked(id){
    try{
        //this function is called asynchronously
        setTimeOut('handlingfunctionname('+id+');',10);
    }catch(e){
        //on whatever error occured nothing was interrupted
    }
    //always return true to allow the execution of the link
    return true;
}
</script> 
```

那么您的链接可能如下所示：

```
<a id="linkidentifier" href="somelink.html" onclick="mylinkwasclicked(5)" >click me!</a> 
```

或者您可以动态添加 onclick：

```
<script type="text/javascript">
    var link = document.getElementById('linkidentifier');
    link.onclick=function(){mylinkwasclicked(5);};
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T12:45:16.660

如果您同步向服务器发出请求，您将阻止原始事件处理程序的执行，直到收到响应，如果您异步执行此操作，则链接或按钮的原始行为可能是表单发布或更改文档的 url，这将中断您的异步请求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T09:50:59.337

点击应该正常处理。

1）如果您的javascript代码有错误，页面可能会在状态栏中显示一个错误图标，但它会继续处理，它不会挂起。

2) 如果您的 ajax 请求是异步的，则页面将发出该请求并同时处理点击。如果您的服务器已关闭并且后台发生的 ajax 请求超时，则不会导致 click 事件无法得到处理。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-18T16:50:15.370

将页面退出延迟足够长的时间以 ping 您的服务器 url

```
function link_clicked(el)
{
  try {
    var img = new Image();
    img.src = 'http://you?url=' + escape(el.href) + '&rand=' + math.random();
    window.onbeforeunload = wait;
  }catch(e){}
  return true;
}

function wait()
{
  for (var a=0; a<100000000; a++){}
  // do not return anything or a message window will appear
} 
```

所以我们所做的是在页面退出时添加一个小的延迟，以便为出站 ping 提供足够的时间来注册。您也可以在单击处理程序中调用 wait() ，但这会给不退出页面的链接添加不必要的延迟。将延迟设置为可以产生良好结果的任何值，而不会明显减慢用户的速度。任何超过一秒的时间都是粗鲁的，但对于不返回数据的请求往返来说，一秒是很长的时间。只需确保您的服务器不再需要处理请求或只是转储到日志并稍后处理即可。

# c# - 如何创建与当前视觉风格相匹配的颜色？

> ID：876919
> 
> 赞同：1
> 
> 时间：2009-05-18T09:42:40.007
> 
> 标签：c#, .net, winforms, color-scheme

对于我们的 winforms 应用程序，我们被要求将无效单元格着色`DataGridView`为红色。我们需要找到一种与当前视觉风格相匹配的红色，但如果用户选择了以红色为主的调色板，它仍然是独特的。如何创建与当前视觉风格相匹配的颜色？如何确保避免冲突？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T13:20:50.957

我不认为原始海报正在寻找颜色（颜色）的调色板，而是试图突出显示无效的单元格。选择的突出显示颜色是红色，但他担心如果用户选择了红色调色板，红色可能不会突出。

怎么样：绘制无效单元格时，使用 SystemColors.Window 作为文本，使用 SystemColors.WindowText 作为背景。（或 DataGridView 的任何等价物）。这样，您可以保证无效单元格将是正常单元格的相反颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T13:34:24.330

您也许可以尝试使用[ControlPaint类的](http://msdn.microsoft.com/en-us/library/system.windows.forms.controlpaint.aspx)[Light](http://msdn.microsoft.com/en-us/library/system.windows.forms.controlpaint.light.aspx)和[Dark](http://msdn.microsoft.com/en-us/library/system.windows.forms.controlpaint.dark.aspx)方法？我做类似的事情，虽然有点相反。我需要使网格中的一些行突出，但不像选定的行那样突出。所以我创建了一种比默认选择颜色浅一点的颜色，如下所示：

```
 checkedColor = ControlPaint.Light(grid.DefaultCellStyle.SelectionBackColor, 1.65f); 
```

可以尝试使用它，也许加上一些额外的逻辑，并基于一些突出的系统颜色。例如`System.Drawing.SystemColors.HighLight`或`System.Drawing.SystemColors.HotTrack`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T09:56:49.060

我认为您以错误的方式看待这个问题。经常选择红色有几个原因。它（在西方文化等中）通常用于描述某些事情是错误的或危险的。但红色也是一种通常引人注目的颜色。然而，当试图引导用户注意页面上的某些内容时，有两种万无一失的方法。

1) 动画 gif 或视频（令人讨厌）或

2) 冲突的颜色

通常红色很突出，但在用户可能具有红色主题风格的情况下，最好的选择是使用会发生冲突的颜色。有可能有冲突的颜色一起去（如果有道理的话）。

以下是我过去使用的一些网站，可帮助我找到可能对您也有帮助的配色方案：

[Kuler](http://kuler.adobe.com/)，[颜色组合](http://www.colorcombos.com/)和[配色方案设计师](http://colorschemedesigner.com/)

这可能不是您正在寻找的答案，但我希望它有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T09:58:59.693

这个问题有点模棱两可，有点主观；直接对示例进行评论要容易得多。但是，有[许多在线工具](http://www.cssjuice.com/25-popular-color-scheme-and-palette-generators/)可以帮助您为网站创建调色板，这些工具可能有助于衡量特定的红色阴影如何与各种其他颜色相互作用。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T11:34:20.610

看看 Krypton Toolkit ( [http://www.componentfactory.com](http://www.componentfactory.com) )。他们为带有主题管理器的 WinForms 控件提供免费工具包。这个主题管理器提供了现成的方法来提取当前的颜色值。

我和他们没有任何关系。我将它用于我自己的产品（Royal TS at [http://www.code4ward.net](http://www.code4ward.net)）并发现它非常有用。

如果你想构建漂亮的 UI，你应该看看 Krypton 的东西。

# c++ - 如何在 C++ 中重用字符串变量

> ID：876920
> 
> 赞同：2
> 
> 时间：2009-05-18T09:42:59.743
> 
> 标签：c++, string

这是正确的，它工作正常

```
string str("in.dat");
ifstream fin(str.c_str(), ios::binary | ios::ate );
.
.
.
//Do I need to clear the string before assigning new name???
str = "out.dat";
ofstream fout(str.c_str(), ios::binary); //seems to work 
```

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-18T09:52:04.060

其他人说的都是真的。但是，在您发布的代码中，您也可以说：

```
ifstream fin( "in.dat", ios::binary | ios::ate );
ofstream fout( "out.dat", ios::binary ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T09:45:26.617

你所做的是正确的。= 运算符将覆盖字符串内容，这是重用字符串变量的正常情况。它甚至可能不会重新分配任何缓冲区，而是重用现有缓冲区。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T09:45:32.873

这样做是正确的。赋值，在任何语言中，都意味着*对象失去其旧值并获得新值*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T09:45:43.170

不，只需分配一个新值就可以了。确保分配有效且不会引入泄漏是字符串类的责任。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T09:59:46.963

虽然它是有效的 C++，但它不是*很好的*C++。

代码的读者需要记住`str`变量是可变的，并且在整个代码文件中用于不同的目的。当在 str 的第二个赋值之间插入代码并将其用作文件名时，读者可能会发现很难找出变量中的内容。

给你的变量起一个合理的名字总是更好的；然后它几乎总是变得恒定。

```
const char* inputpath("in.dat");
ifstream inputstream( inputpath, ... );

const char* outputpath("out.dat");
... lots of code
ofstream outputstream( outputpath, ... ); 
```

# vb.net - 从 CPP 文件中挖掘函数

> ID：876921
> 
> 赞同：0
> 
> 时间：2009-05-18T09:43:09.257
> 
> 标签：vb.net, visual-studio-2005

我正在使用 Visual Studio 2005，VB。我必须解析一个 CPP 文件并列出在该 CPP 文件中调用的所有函数。是否有任何内置对象可以让我更轻松，或者我应该去搜索 () 然后找出函数调用？这也有点困难（我想），因为还有很多函数链接。请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T09:56:16.237

*可靠地*做到这一点的唯一方法是解析所有 C++ 文件，因为正则表达式和字符串操作都无法区分无`()`参数函数调用与重载`operator ()`和构造函数调用之间的区别。

# sql - 循环匹配

> ID：876922
> 
> 赞同：4
> 
> 时间：2009-05-18T09:44:41.970
> 
> 标签：sql, algorithm, oracle, circular-reference

我有一个包含三个表的数据库：userid_tbl、need_tbl、have_tbl

```
create table userid_tbl
(user_id varchar2(15) not null primary key);

create table need_tbl
(user_id varchar2(15) not null,
have_item varchar2(100) not null,
foreign key (user_id) references userid_tbl (user_id)
);

create table have_tbl
(user_id varchar2(15) not null,
have_item varchar2(100) not null,
foreign key (user_id) references userid_tbl (user_id)
); 
```

每个用户可以创建无限数量的需求或服务记录，他们可以在数据库中提供给其他人。这些项目来自预定列表。

在对需要和有表进行连接后，我已经匹配了需要和需要，并在如下视图中丢弃了任何用户都无法完成的请求：

```
Item:         Need:            Have:
1             Bob              George
2             George           Herbie
3             Herbie           Bob
4             Larry            Wally
5             Wally            Larry
6             John             George 
```

我现在正在尝试编写一个查询，我可以在其中计算满足其请求需求的每个用户的排列数。例如，在上面的示例中，Bob、George 和 Herbie 可以一起满足彼此的需求，Larry 和 Wally 也可以，但 John 不能，因此总数为 2。

我一开始是用 LOOP 来做这件事的，但必须有一种更简单、资源消耗更少的方法来用单个查询来做这件事。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-18T10:18:18.767

详细解释见我博客中的文章：

*   [**在树中查找循环**](http://explainextended.com/2009/05/18/finding-loops-in-a-tree/)

`needs`如果您的用户可能在表格的列中出现多次，这是一项`NP`复杂的任务。

如果没有，请在您的视图上发出此查询：

```
SELECT  COUNT(*)
FROM    v_needs
CONNECT BY NOCYCLE
        need = PRIOR have
WHERE   CONNECT_BY_ISCYCLE = 1 
```

`CONNECT BY NOCYCLE`允许分层查询中的循环（`NOCYCLE`仅在找到循环时停止分支，不`NOCYCLE`返回错误）。

`CONNECT_BY_ISCYCLE`每当找到循环时返回 true（它返回`1`记录，该记录将在下一次迭代中产生当前分支的根）。

请注意，此查询将为您生成循环中的所有用户，而无需对它们进行分组。

要对用户进行分组，请发出以下查询：

```
SELECT  n.*, CONNECT_BY_ROOT(have), level
FROM    v_needs n
START WITH
        have IN
        (
        SELECT  MIN(have)
        FROM    (
                SELECT  have, CONNECT_BY_ROOT(have) AS root
                FROM    t_needs
                START WITH
                        have IN
                        (
                        SELECT  have
                        FROM    t_needs n
                        WHERE   CONNECT_BY_ISCYCLE = 1
                        CONNECT BY NOCYCLE
                                needs = PRIOR have
                        )
                CONNECT BY NOCYCLE
                        have = PRIOR needs
                )
        GROUP BY
                root
        )
CONNECT BY NOCYCLE
        have = PRIOR needs 
```

**更新：**

从您的帖子中，我可以看到您对最大循环长度有限制。

这使得这个问题更容易解决。

只需将循环限制条件添加到每个查询中：

```
SELECT  n.*, CONNECT_BY_ROOT(have), level
FROM    v_needs n
START WITH
        have IN
        (
        SELECT  MIN(have)
        FROM    (
                SELECT  have, CONNECT_BY_ROOT(have) AS root
                FROM    t_needs
                START WITH
                        have IN
                        (
                        SELECT  have
                        FROM    t_needs n
                        WHERE   CONNECT_BY_ISCYCLE = 1
                        CONNECT BY NOCYCLE
                                needs = PRIOR have
                                AND level <= 5
                        )
                CONNECT BY NOCYCLE
                        have = PRIOR needs
                        AND level <= 5
                )
        GROUP BY
                root
        )
CONNECT BY NOCYCLE
        have = PRIOR needs
        AND level <= 5 
```

这将停止遍历级别上的层次结构树`5th`。

如果您`1,000,000`的数据库中有用户并且`5`平均每个用户匹配，则查询将需要检查`1,000,000 * 5^5 = 3,125,000,000`行，这是可观察到的行数。

如果您`MATERIALIZE`在“需要”和“拥有”上查看并创建索引，查询将得到极大改进。

在这种情况下，查询完成将在几分钟内完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T18:14:15.057

这对我来说是一个很好的开始。几天来，我一直在用头撞墙。让我提供更多细节以使这一点更清楚。不幸的是，这个问题是一个集团问题，并且是 NP 完全的，因为所有三列都不是唯一的。

这是现实世界的应用：我正在做一个关于负互惠效率的研究项目，即以物易物，以代替不适当或非法的货币交换。

具体的例子是器官移植。假设 Bob 需要一个肾脏，而他的妻子愿意捐赠一个肾脏，但不能保证她是匹配的。然而，她可能是数据库中另一个用户的匹配项，作为回报，她可能能够为 Bob 提供匹配的肾脏。

如果我有一个包含数千名接受者和数万个潜在捐赠者的数据库，我可能会促成一项多向交易，以最大限度地为尽可能多的接受者带来利益。

显然必须限制关闭循环所需的最大级别数。5 路交易是可能的，但 100 路交易在逻辑上是不可行的。

直到今天我才听说过 Oracle Spatial。看起来这可能正是我需要使这更容易的产品。

# hashtable - 在哈希表或排序列表中查找项目哪个更快？

> ID：876923
> 
> 赞同：26
> 
> 时间：2009-05-18T09:44:50.970
> 
> 标签：hashtable, lookup, performance, sortedlist

在哈希表或排序列表中查找项目哪个更快？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-18T09:54:53.057

算法复杂性是一件好事，已知哈希表为*O(1)*而排序向量（在你的情况下，我猜使用排序数组比列表更好）将提供*O(log n)*访问时间.

但是您应该知道，复杂性表示法为您提供了 N 进入无穷大的访问时间。这意味着，如果您知道您的数据**会不断增长**，那么复杂性符号会为您提供一些关于选择算法的提示。

当您知道您的数据将保持相当短的长度时：例如，您的数组/哈希表中只有几个条目，您必须随身携带手表并进行测量。所以做一个测试。

例如，在另一个问题中：对数组进行排序。对于**一些条目**冒泡排序，而*O(N^2)*可能比 .. 快速排序更快，而它是*O(n log n)*。

此外，根据其他答案，并根据您的项目，您必须尝试为您的哈希表实例找到最佳哈希函数。否则，它可能会导致在您的哈希表中查找的性能非常差（正如 Hank Gay 的回答中所指出的那样）。

编辑：查看这篇文章以了解[Big O notation 的含义](http://en.wikipedia.org/wiki/Big_O_notation)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-18T09:49:51.523

假设“排序列表”是指“随机可访问的排序集合”。列表具有只能逐个元素遍历它的属性，这将导致 O(N) 复杂度。

在已排序的可索引集合中查找元素的最快方法是通过 N 元搜索 O(logN)，而没有冲突的哈希表的查找复杂度为 O(1)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-18T09:49:43.020

除非散列算法**非常**慢（和/或糟糕），否则散列表会更快。

更新：正如评论者所指出的，您也可能因过多的冲突而降低性能，这不是因为您的哈希算法不好，而仅仅是因为哈希表不够大。大多数库实现（至少在高级语言中）会在幕后自动增长你的哈希表——这将导致触发增长的插入性能低于预期——但如果你自己滚动，那肯定是考虑。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-18T09:57:37.823

a 中的`get`操作`SortedList`是`O(log n)`，而 ea HashTable 中的操作相同`O(1)`。因此，*通常*情况下，`HashTable`会快得多。但这取决于许多因素：

*   列表的大小
*   哈希算法的性能
*   冲突次数/哈希算法的*质量*

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-18T10:13:12.723

这完全取决于您存储的数据量。

假设你有足够的内存扔给它（所以哈希表足够大），哈希表会在固定的时间内定位目标数据，但是需要计算哈希会增加一些（也是固定的）开销。

搜索排序列表不会有散列开销，但实际定位目标数据所需的时间会随着列表的增长而增加。

因此，一般来说，对于小型数据集，排序列表通常会更快。（对于经常更改和/或不经常搜索的极小数据集，*未*排序的列表可能更快，因为它避免了进行排序的开销。）随着数据集变大，列表的搜索时间增长掩盖了哈希的固定开销，并且哈希表变得更快。

该断点的位置将根据您的特定哈希表和排序列表搜索实现而有所不同。在许多典型大小的数据集上运行测试和基准性能，看看哪些在您的特定情况下实际上表现更好。（或者，如果代码已经“足够快”地运行，则不要。只需使用您更熟悉的那个，不要担心优化不需要优化的东西。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-18T09:53:56.273

在某些情况下，它取决于集合的大小（以及在较小程度上，实现细节）。如果您的列表非常小，可能有 5-10 项，我猜列表会更快。否则 xtofl 是正确的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-18T09:57:22.833

HashTable 对于包含超过 10 个项目的列表会更有效。如果列表中的项目少于 10 个，则散列算法的开销会更多。

如果您需要快速字典，但还需要以有序的方式保存项目，请使用 OrderedDictionary。（.Net 2.0 以上）

# regex - 用于匹配不包含单词的行的正则表达式

> ID：876927
> 
> 赞同：10
> 
> 时间：2009-05-18T09:45:32.450
> 
> 标签：regex, tortoisesvn

我有以下几行：

```
Message:Polarion commit Mon May 18 06:59:37 CEST 2009
Message:Polarion commit Fri May 15 19:39:45 CEST 2009
Message:424-18: use new variable
Message:Polarion commit Fri May 15 19:29:10 CEST 2009
Message:Polarion commit Fri May 15 19:27:23 CEST 2009
Message:000-00: do something else
Message:Polarion commit Fri May 15 17:50:30 CEST 2009
Message:401-103: added application part
Message:Polarion commit Fri May 15 17:48:46 CEST 2009
Message:Polarion commit Fri May 15 17:42:04 CEST 2009 
```

我想得到所有不包含“Polarion”的行

我该怎么做？

ps：我看到： [正则表达式匹配不是特定子字符串的东西，](https://stackoverflow.com/questions/42990/regex-to-match-against-something-that-is-not-a-specific-substring) 但它对我没有帮助

pps：我正在尝试在 tortoiseSVN 中执行此操作以选择日志消息，并且我认为“负面后视”存在问题

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-18T10:35:38.247

这个表达式将完成这项工作。

```
^(?:.(?<!Polarion))*$ 
```

它使用零宽度的否定后向断言来断言字符串不包含“Polarion”。

```
    ^ 锚定到字符串的开头
    (?: 非捕获组
        . 匹配任意字符
        (?<!Polarion) 零宽度否定后向断言 - 文本到
                       当前位置的左边不能是“Polarion”
    )
    * 零次或多次
    $ 锚定到字符串结尾

```

以下版本将仅在“n”之后执行断言 - 也许这会更快，也许更慢。

```
^(?:[^n]*|n(?<!Polarion))*$ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-18T09:50:15.797

如果你让你的正则表达式匹配你正在寻找的东西然后反转结果可能会更容易。

大多数使用 Regex 的工具都允许您反转搜索结果，通常在 Vert 中调用选项“v” **（**保持 i 表示**不**区分大小写）：

例如

```
grep -v <search>
find /v <search> 
```

等等

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T21:07:41.793

这是一个使用负前瞻的解决方案，它比后瞻得到更广泛的支持：

```
^Message:(?!Polarion).*$ 
```

（此外，由于我们知道 Polarion 可能出现在哪里，我们不需要做任何 Daniel 建议的毫无意义的花哨的事情。）

以正则表达式注释形式对上述表达式的解释是：

```
(?x)       # Enable comments
^          # Start of string (start of line in multiline mode)
Message:   # Literal text
(?!        # Begin negative lookahead
Polarion   # Literal text
)          # End negative lookahead
.*         # Greedily match any number of any character
$          # End of string (end of line in multiline mode) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T14:02:32.247

我找不到任何关于 TortoiseSVN 正在使用什么正则表达式引擎的信息，但你可能会在[邮件列表中](http://tortoisesvn.tigris.org/list_etiquette.html)询问。并非所有引擎都支持诸如零宽度负后视之类的高级功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-04T08:33:30.320

正如[这个答案](https://stackoverflow.com/a/1368189/2936460)所示，TortoiseSVN 的搜索框不限于正则表达式。具体来说，如果表达式包含在 中`!( )`，则它会被否定，并且不匹配的行会显示在结果中。否定封闭的`!`表达式（常规与否）。

对于你的情况，

```
!(Polarion) 
```

应该做的伎俩。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T02:11:39.153

This has worked for me and is quick to enter (in a search dialogue box or the like): `^(?!.*not this).*but this`

# actionscript-3 - 任何迁移工具 AS2 到 AS3

> ID：876940
> 
> 赞同：0
> 
> 时间：2009-05-18T09:49:19.947
> 
> 标签：actionscript-3

大家好，

我有一个 AS2 代码。我想换AS3。

任何迁移工具 AS2 到 AS3。

请帮我。谢谢

关于维斯瓦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T09:52:38.053

[http://www.electrotank.com/junk/jobe/AS2_to_AS3.zip](http://www.electrotank.com/junk/jobe/AS2_to_AS3.zip)

说明书和里面的一切。这可能会帮助您编写少量代码，但对于正确的转换，恐怕没有神奇的工具。

祝你好运 ：）

PS：更多信息[在这里](http://jobemakar.blogspot.com/2007/05/convert-actionscript-2-to-actionscript.html)

# delphi - 我的应用程序在调试时挂起

> ID：876943
> 
> 赞同：0
> 
> 时间：2009-05-18T09:49:34.847
> 
> 标签：delphi, debugging, dll, opengl, delphi-2009

我在 Vista Ultimate 64 位上使用 Delphi 2009。

我从 Delphi IDE 中运行我的应用程序，一段时间后（一分钟或两分钟）我的应用程序将挂起。

查看事件日志，挂起与退出的线程相关联。它不是主线程，而是在模块 RSAENH.DLL 加载后立即启动的线程。

该应用程序在调试器之外正常运行。

更多信息：该应用程序广泛使用 OpenGL，包括着色器和一些 OpenGL 3 功能。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-04T16:59:14.160

在 Vista 中运行 IDE 时，线程视图应指示线程是否死锁以及它正在等待哪些资源。查看这篇关于“等待链遍历”功能的博客文章： [Tiburon 预览：Vista 等待链遍历](http://blogs.embarcadero.com/chrishesik/2008/07/21/34833)

# java - Java中的高级泛型

> ID：876948
> 
> 赞同：34
> 
> 时间：2009-05-18T09:50:50.863
> 
> 标签：java, generics, haskell, polymorphism, higher-kinded-types

假设我有以下课程：

```
public class FixExpr {
  Expr<FixExpr> in;
} 
```

现在我想介绍一个通用论点，对 Expr 的使用进行抽象：

```
public class Fix<F> {
  F<Fix<F>> in;
} 
```

但 Eclipse 不喜欢这样：

> F 类型不是通用的；它不能用参数 <Fix<F>> 参数化

这是可能的，还是我忽略了导致这个特定实例中断的东西？

一些背景信息：在 Haskell 中，这是编写泛型函数的常用方法；我正在尝试将其移植到 Java。上例中的类型参数 F 具有种类 * -> * 而不是通常的种类 *。在 Haskell 中，它看起来像这样：

```
newtype Fix f = In { out :: f (Fix f) } 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-05-18T10:15:26.540

我认为Java泛型根本不支持您尝试做的事情。更简单的情况

```
public class Foo<T> {
    public T<String> bar() { return null; }
} 
```

也不使用 javac 编译。

由于 Java 在编译时不知道什么`T`是，它不能保证它`T<String>`是有意义的。例如，如果您创建了`Foo<BufferedImage>`,`bar`将具有签名

```
public BufferedImage<String> bar() 
```

这是荒谬的。由于没有机制强制您仅`Foo`使用泛型`T`s 实例化 s，因此它拒绝编译。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-05-25T03:29:34.973

也许您可以尝试 Scala，它是一种在 JVM 上运行的函数式语言，它支持更高种类的泛型。

* * *

**[[拉胡尔 G](https://stackoverflow.com/users/192247/missing-faktor)编辑]**

以下是您的特定示例大致转换为 Scala 的方式：

```
trait Expr[+A]

trait FixExpr {
  val in: Expr[FixExpr]
}

trait Fix[F[_]] {
  val in: F[Fix[F]]
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-18T09:55:26.613

为了传递一个类型参数，类型定义必须声明它接受一个（它必须是*通用*的）。显然，您`F`不是泛型类型。

更新：这条线

```
F<Fix<F>> in; 
```

声明一个类型变量，`F`它接受一个类型参数，其值为`Fix`，它本身接受一个类型参数，其值为`F`。`F`在您的示例中甚至没有定义。我想你*可能*想要

```
Fix<F> in; 
```

这将为您提供一个类型变量`Fix`（您在示例中定义的类型），您将向其传递带有 value 的类型参数`F`。由于`Fix`被定义为接受类型参数，因此这是可行的。

更新 2：重新阅读您的标题，现在我认为您可能正在尝试做一些类似于[“为高级类型实现平等权利”](http://www.cs.kuleuven.be/~adriaan/files/higher.pdf)（PDF 警报）中提出的方法。如果是这样，Java 不支持，但您可以尝试 Scala。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-15T14:12:27.610

尽管如此，还是有一些方法可以在 Java 中编码更高种类的泛型。请看看[high-kinded-java 项目](https://github.com/sviperll/higher-kinded-java)。

使用它作为库，您可以像这样修改代码：

```
public class Fix<F extends Type.Constructor> {
    Type.App<F, Fix<F>> in;
} 
```

您可能应该为您的课程添加`@GenerateTypeConstructor`注释`Expr`

```
@GenerateTypeConstructor
public class Expr<S> {
    // ...
} 
```

此注释生成 ExprTypeConstructor 类。现在您可以像这样处理您的 Expr 修复：

```
class Main {
    void run() {
        runWithTyConstr(ExprTypeConstructor.get);
    }

    <E extends Type.Constructor> void runWithTyConstr(ExprTypeConstructor.Is<E> tyConstrKnowledge) {
        Expr<Fix<E>> one = Expr.lit(1);
        Expr<Fix<E>> two = Expr.lit(2);

        // convertToTypeApp method is generated by annotation processor
        Type.App<E, Fix<E>> oneAsTyApp = tyConstrKnowledge.convertToTypeApp(one);
        Type.App<E, Fix<E>> twoAsTyApp = tyConstrKnowledge.convertToTypeApp(two);

        Fix<E> oneFix = new Fix<>(oneAsTyApp);
        Fix<E> twoFix = new Fix<>(twoAsTyApp);

        Expr<Fix<E>> addition = Expr.add(oneFix, twoFix);
        process(addition, tyConstrKnowledge);
    }

    <E extends Type.Constructor> void process(
            Fix<E> fixedPoint,
            ExprTypeConstructor.Is<E> tyConstrKnowledge) {

        Type.App<E, Fix<E>> inTyApp = fixedPoint.getIn();

        // convertToExpr method is generated by annotation processor
        Expr<Fix<E>> in = tyConstrKnowledge.convertToExpr(inTyApp);

        for (Fix<E> subExpr: in.getSubExpressions()) {
            process(subExpr, tyConstrKnowledge);
        }
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T10:13:31.757

看起来你可能想要类似的东西：

```
public class Fix<F extends Fix<F>> {
    private F in;
} 
```

（请参阅 Enum 类，以及有关其泛型的问题。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-02T22:01:34.927

正如 Victor 所指出的，有一种迂回的方法可以在 Java 中编码更高种类的类型。它的要点是引入一种类型`H<F, T>`进行编码`F<T>`。然后可以使用它来编码函子的定点（即 Haskell`Fix`类型）：

```
public interface Functor<F, T> {
    <R> H<F, R> map(Function<T, R> f);
}

public static record Fix<F extends H<F, T> & Functor<F, T>, T>(F f) {
    public Functor<F, Fix<F, T>> unfix() {
        return (Functor<F, Fix<F, T>>) f;
    }
} 
```

从这里您可以继续并在初始代数上实现变态：

```
public interface Algebra<F, T> extends Function<H<F, T>, T> {}

public static <F extends H<F, T> & Functor<F, T>, T> Function<Fix<F, T>, T> cata(Algebra<F, T> alg) {
    return fix -> alg.apply(fix.unfix().map(cata(alg)));
} 
```

请参阅我的[GitHub 存储库](https://github.com/mduerig/java-functional/blob/master/src/michid/fun/Free.java)以获取工作代码，包括一些示例代数。（注意，IDE 之类的 IntelliJ 与代码斗争，尽管它在 Java 15 上编译和运行得很好）。

# c# - 启用和禁用系统搜索选项

> ID：876952
> 
> 赞同：-1
> 
> 时间：2009-05-18T09:51:49.880
> 
> 标签：c#

如何通过 c# 程序启用/禁用系统搜索选项

是的，我想要启用/禁用（开始-> 搜索）选项。我已经通过程序禁用它我不知道如何启用它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-09-23T00:48:06.100

也许你应该实例化一个 ServiceController 并停止/启动它

```
ServiceController myService = new ServiceController("WSearch");
...
myService.Stop(); 
... 
myService.Start(); 
```

# php - PHP 逻辑编码风格

> ID：876962
> 
> 赞同：2
> 
> 时间：2009-05-18T09:54:44.617
> 
> 标签：php

我必须修改大型 PHP 应用程序的某些部分。当然，不同的部分是由不同的人（主要是实习生）编写的。查看代码后，我发现其他开发人员使用了 2 种编码风格：

*   “PHP 是互联网的粘合剂”风格，混合了 html 和 php，例如：

[剪辑]

```
<tr class="ds_subsubhead_2">
<td colspan="21" align="left">&nbsp;A&nbsp;<select name="nb_linge" onChange="MM_jumpMenu('parent',this,0)" style="vertical-align:middle">       <option value="<?=get('index.php',$orgurl,'nb_ligne=','22','23','9999') ?>" <? if($messagesParPage == '9999') { ?>selected="selected"<? } ?>>Tous</option>
    <option value="<?=get('index.php',$orgurl,'nb_ligne=','22','23','25') ?>" <? if($messagesParPage =='25') { ?>selected="selected"<? } ?>>25</option>
    <option value="<?=get('index.php',$orgurl,'nb_ligne=','22','23','50') ?>" <? if($messagesParPage =='50') { ?>selected="selected"<? } ?>>50</option>
    <option value="<?=get('index.php',$orgurl,'nb_ligne=','22','23','75') ?>" <? if($messagesParPage =='75') { ?>selected="selected"<? } ?>>75</option> 
```

[剪辑] 或

```
<td <? if((isset($_GET['t1']))&&($_GET['t2']!='ALL')) { ?>bgcolor="#0099FF"<? } ?>></td>
<td <? if((isset($_GET['t3']))&&($_GET['t4']!='ALL')) { ?>bgcolor="#0099FF"<? } ?>></td>
<td <? if((isset($_GET['t5']))&&($_GET['t6']!='ALL')) { ?>bgcolor="#0099FF"<? } ?>></td> 
```

[snip] 甚至

```
<script type="text/javascript" src="<?=$_SESSION["path"]?>lib/js/ajax.js"></script> 
```

[剪辑]

*   ...以及更程序化的方式，例如：

[剪辑]

```
 $output .= '<td valign="top"><form name="form5" method="GET" action=""><select name="m" onchange="this.form.submit()">';
     if ( empty($_GET['p']) ) $output .= '<option value=" ">All</option>';
     else $output .= '<option value='.$_GET['m'].'>'.$_GET['m'].'</option>';
     $query = "SELECT DISTINCT maoie FROM ".$BD."site";
     $res = mysql_query($query);
     while ( $row = mysql_fetch_assoc($res) ) {
         if( !empty($row['maoie']) ) $output .= '<option  value="'.$row['maoie'].'">'.$row['maoie'].'</option>'; 
     }
     $output .= '</select></form></td>';
     $output .= add_more_stuff();
     echo $output; 
```

现在，我不完全确定这是一种*更*程序化的做事方式，但至少它与以前的方式不同。您认为哪一个*通常*更好？

我个人不喜欢“互联网粘合剂”的风格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T10:01:49.080

我会抛弃这两者并将 PHP 编码远离任何表示层特定的 HTML。否则，对于比“Hello World”更大的东西，事情会变得非常糟糕，很快：)

如果您想稍后修改代码，您就是在自取其辱。我会尝试通过移植到适当的 CMS/Abstract 演示文稿来解决这个问题。

都不好看。我不想以任何一种风格维护代码。**通过现在花时间**正确清理它来节省以后的时间。

即使是像将 HTML 移动到外部加载的格式字符串并通过 sprintf() 或类似方法运行它们这样的基本操作，也可能比当前情况更好。你说你混合了这些编码风格！？！

**祝你好运，先生！**

这两种风格都应该被归为动态互联网成长之痛的坟墓。浏览一些开源 PHP 项目，了解一种良好的、可维护的编码风格。像[http://sourceforge.net/projects/wikipedia](http://sourceforge.net/projects/wikipedia) MediaWiki 这样的东西显示了 HTML-In-Source 和分离的良好组合（尽管它不是完美的恕我直言）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T10:03:05.817

还有第三种选择：模板。模板比胶水或 ascii 呕吐物的随机发射更具可读性。我只是倾向于使用 HEREDOCd 字符串和 str_replace，因此：

```
$template = <<<TEMPLATE
<html>
<head>
<title>{TITLE}</title>
</head>
<body>
<div id='nav'>{NAV}</div>
<div id='content'>{CONTENT}</div>
</body>
TEMPLATE;

$data = array (
"{TITLE}" => "Page title example",
"{NAV}" => buildNav(),
"{CONTENT}" => buildContent());

str_replace(array_keys($data),array_values($data), $template); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T10:05:50.507

我倾向于选择中间的东西。如果我调用十五个不同的函数来生成一个 select `<option>`，为什么不只使用一个函数来完成所有事情并创建完整的标记呢？

像这样的东西（完全虚构的例子）：

```
<select>
<?php
    foreach (database_query() as $row)
        echo gen_select($row)
?>
</select> 
```

和其他地方

```
function gen_select($row) {
    // do something horrifically complicated with the data (creating some variables to make the output easier to follow

    return "<option class=\"$class\">$text</option>";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T09:57:08.760

我个人在具有后一个版本的 CMS 上工作，我很难阅读它。

第二，视图中的模型/控制器代码是一道很棒的意大利菜。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T10:10:38.640

两者都很糟糕（在我看来，这是 PHP 的真正弱点），但至少第一个看起来可读。
一旦添加了条件（请求 POST 吗？数据是否有效？）最终会出现问题，并且总是会导致可怕的第二种编码。尝试解耦视图和逻辑：str_replacing 比通过连接无数个小片段来构建字符串要好得多。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-18T11:25:56.617

没有冒犯，但两种风格都来自 90 年代后期。

您应该认真考虑重构系统并使用模板引擎来分离至少 PHP 和 HTML 代码。如果您可以将“业务逻辑”和“显示逻辑”部分分开，那就更好了。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-18T10:07:03.047

我认为 HTML 和 PHP 应该尽可能地分开。它使整个代码更易于阅读并创建清晰的结构。这对我来说意味着 PHP 不应该输出 HTML，因为你可以使用 HTML 来完成那部分......

所以我也更喜欢最后一个例子，但有一个区别：我认为在 HTML 中混合使用括号样式会使代码难以阅读。我认为这种`if...endif`风格是更好的选择。用 PHP 打印 HTML 似乎也不合逻辑。

我会这样做：

```
 <td valign="top"><form name="form5" method="GET" action=""><select name="m" onchange="this.form.submit()">;
 <? if ( empty($_GET['p']) ): ?>
     <option value=" ">All</option>
 <? else: ?>
     <option value="<?=$_GET['m']?>"><?=$_GET['m']?</option>
 <? endif; ?>
 <?
 $query = "SELECT DISTINCT maoie FROM ".$BD."site";
 $res = mysql_query($query);
 while ( $row = mysql_fetch_assoc($res) ):
 ?>
     <? if( !empty($row['maoie']) ): ?>
         <option  value="<?=$row['maoie']?>"><?=$row['maoie']?></option>
     <? endif; ?> 
 <? endwhile; ?>
 </select></form></td>
 <? echo add_more_stuff(); ?> 
```

至少这更符合逻辑。然而，像数据库交互这样的事情应该被排除在你的 web 应用程序的其他地方。如果您将数据和页面设计分开，它会变得更加清晰。

尽管如此，我认为使用 PHP 作为*模板语言*是完全可以的，只要你只使用一些替换变量和简单的 if 语句。

# biztalk - 将自定义“视图”添加到 BizTalk 管理控制台

> ID：876965
> 
> 赞同：1
> 
> 时间：2009-05-18T09:55:07.253
> 
> 标签：biztalk

有没有人想出如何将自定义 UI“视图”添加到 BizTalk 管理控制台？

例如树上的自定义节点，或组概览上的自定义选项卡显示自定义数据，例如服务状态等？

我的客户的系统有许多服务和其他部分，可以很好地让系统管理员从单个应用程序中获得整个系统的单一概览，而不必复制 biztalk 应用程序控制台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T12:37:06.193

这是可能的，尽管容易程度取决于您想要做什么。BizTalk 管理控制台（至少到 R2，不确定 2009 年）基于 MMC 2.0，因此您需要使用 MMC SDK 并执行大量 COM 互操作操作。

SDK 中有一个示例：[扩展 BizTalk Server 管理控制台](http://go.microsoft.com/fwlink/?LinkId=99719)：

> 此示例演示如何使用 Microsoft 管理控制台 (MMC) 2.0 软件开发工具包 (SDK) 通过您自己的自定义菜单项、节点项、新数据项和视图或不同的视图来扩展 BizTalk Server 管理控制台的功能。现有数据。

# chmod - 无法设置 chmod 640？

> ID：876974
> 
> 赞同：1
> 
> 时间：2009-05-18T09:57:05.470
> 
> 标签：chmod, phpbb

我刚刚在我的网站上安装了 phpbb。根据phpbb的建议，我想将config.php chmod设置为640。在filezilla（我的ftp程序）中，我尝试右键单击该文件，然后选择文件权限为640，但它给了我这个错误：

500 'SITE CHMOD 640 config.php'：命令不理解

我如何更改chmod？我正在使用Windows操作系统...

编辑：我的服务器是 Windows Server 2003

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T10:12:42.257

[JimG 是对的](https://stackoverflow.com/questions/876974/unable-to-set-chmod-640/877004#877004)- 我们不知道您的托管类型或 FTP/SSH 限制。

最快的解决方案：

```
<?php
chmod("/home/youruser/yourwebsite/config.php", 0640);
?> 
```

希望您不会遇到所有者/组权限问题；在这种情况下，您将不得不使用更多的 chown 和 chgrp 函数调用来处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T10:05:05.283

网站托管在什么样的环境中？

*如果是 linux：* 可以通过 SSH 登录到服务器吗？（[Putty](http://www.chiark.greenend.org.uk/~sgtatham/putty/)是一个很好的 Windows SSH 客户端）。进入后，将目录更改为 config.php 所在的位置，然后在其中键入 chmod commnad。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T10:05:41.677

听起来 FTP 服务器不支持 chmod。您有其他访问方法（例如 ssh）吗？

作为一个有趣的后备选项，创建一个 php 脚本，通过 PHP 的 chmod 函数设置权限，然后浏览到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T06:37:26.797

一定错过了你的编辑。模式 0640 对 Windows 来说毫无意义。以这种方式设置它的建议适用于类 Unix 系统。这意味着所有者是唯一可以更改它的人，并且该组可以读取它，仅此而已。对于您的系统，只需通过设置适当的 ACL（文件属性、安全性）来确保非管理员无法写入它。

# c# - 实现 IPagedList 在我的模型上使用 NHibernate

> ID：876976
> 
> 赞同：6
> 
> 时间：2009-05-18T09:57:15.080
> 
> 标签：c#, asp.net, nhibernate, interface, asp.net-3.5

我发现当使用 NHibernate 并在一个对象上创建一对多关系时，当许多对象变得非常大时，它会显着减慢。现在我的存储库中确实有用于收集该类型的分页 IList 的方法，但是我更希望在模型上也有这些方法，因为这通常是其他开发人员首先会寻找收集子对象列表的地方。

例如

RecipientList.Recipients 将返回列表中的每个收件人。

我想实现一种方法，将我的所有oen 上的分页添加到我的模型中的许多关系中，最好使用一个接口，但实际上是任何不会将类型化关系强加到模型上的东西。例如，最好有以下界面：

```
public interface IPagedList<T> : IList<T>
{
    int Count { get; }
    IList<T> GetPagedList(int pageNo, int pageSize);
    IList<T> GetAll();
} 
```

然后能够在代码中使用它......

```
IList<Recipient> recipients = RecipientList.Recipients.GetPagedList(1, 400); 
```

我一直在想办法在不让模型意识到分页的情况下做到这一点，但我现在正把头撞到一堵砖墙上。

无论如何，我是否可以以类似于 NHibernate 目前为 IList 和延迟加载所做的方式实现接口？我没有足够的 NHibernate 知识知道。

实施这甚至是一个好主意吗？如果您是内部唯一的 .NET 开发人员，您的想法将不胜感激。

*更新*

下面的帖子向我指出了 NHibernate 的 custom-collection 属性，它可以很好地工作。但是我不确定解决此问题的最佳方法是什么，我尝试从 PersistentGenericBag 继承，以便它具有与 IList 相同的基本功能而无需太多工作，但是我不确定如何收集基于 ISessionImplementor 的对象列表. 我需要知道如何：

*   获取我要填充的当前 IList 的某种 ICriteria 详细信息
*   获取与 IList 关联的特定属性的映射详细信息，以便我可以创建自己的 ICriteria。

但是我不确定我是否可以做上述任何一个？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T11:40:51.790

好的，我将把它作为答案发布，因为它主要是在做我想要的。但是，我想要一些反馈，也可能是迄今为止我对解决方案的一个警告的答案：

我创建了一个名为 IPagedList 的接口。

```
public interface IPagedList<T> : IList<T>, ICollection
{

    IList<T> GetPagedList(int pageNo, int pageSize);

} 
```

然后创建了一个从 IPagedList 继承的基类：

```
public class PagedList<T> : IPagedList<T>
{

    private List<T> _collection = new List<T>();

    public IList<T> GetPagedList(int pageNo, int pageSize)
    {
        return _collection.Take(pageSize).Skip((pageNo - 1) * pageSize).ToList();
    }

    public int IndexOf(T item)
    {
        return _collection.IndexOf(item);
    }

    public void Insert(int index, T item)
    {
        _collection.Insert(index, item);
    }

    public void RemoveAt(int index)
    {
        _collection.RemoveAt(index);
    }

    public T this[int index]
    {
        get
        {
            return _collection[index];
        }
        set
        {
            _collection[index] = value;
        }
    }

    public void Add(T item)
    {
        _collection.Add(item);
    }

    public void Clear()
    {
        _collection.Clear();
    }

    public bool Contains(T item)
    {
        return _collection.Contains(item);
    }

    public void CopyTo(T[] array, int arrayIndex)
    {
        _collection.CopyTo(array, arrayIndex);
    }

    int Count
    {
        get
        {
            return _collection.Count;
        }
    }

    public bool IsReadOnly
    {
        get { return false; }
    }

    public bool Remove(T item)
    {
        return _collection.Remove(item);
    }

    public IEnumerator<T> GetEnumerator()
    {
        return _collection.GetEnumerator();
    }

    int ICollection<T>.Count
    {
        get { return _collection.Count; }
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return _collection.GetEnumerator();
    }

    public void CopyTo(Array array, int index)
    {
        T[] arr = new T[array.Length];
        for (int i = 0; i < array.Length ; i++)
        {
            arr[i] = (T)array.GetValue(i);
        }

        _collection.CopyTo(arr, index);
    }

    int ICollection.Count
    {
        get { return _collection.Count; }
    }

    // The IsSynchronized Boolean property returns True if the 
    // collection is designed to be thread safe; otherwise, it returns False.
    public bool IsSynchronized
    {
        get 
        {
            return false;
        }
    }

    public object SyncRoot
    {
        get 
        {
            return this;
        }
    }
} 
```

然后，我为 NHibernate 创建一个 IUserCollectionType 以用作自定义集合类型，并将继承自 PersistentGenericBag 的 NHPagedList、IPagedList 作为实际集合本身。我为它们创建了两个单独的类，因为 IUserCollectionType 的使用似乎对要使用的实际集合没有任何影响，所以我将这两个逻辑分开。以下代码用于上述两个：

```
public class PagedListFactory<T> : IUserCollectionType
{

    public PagedListFactory()
    { }

    #region IUserCollectionType Members

    public bool Contains(object collection, object entity)
    {
        return ((IList<T>)collection).Contains((T)entity);
    }

    public IEnumerable GetElements(object collection)
    {
        return (IEnumerable)collection;
    }

    public object IndexOf(object collection, object entity)
    {
        return ((IList<T>)collection).IndexOf((T)entity);
    }

    public object Instantiate(int anticipatedSize)
    {
        return new PagedList<T>();
    }

    public IPersistentCollection Instantiate(ISessionImplementor session, ICollectionPersister persister)
    {
        return new NHPagedList<T>(session);
    }

    public object ReplaceElements(object original, object target, ICollectionPersister persister, 
            object owner, IDictionary copyCache, ISessionImplementor session)
    {
        IList<T> result = (IList<T>)target;

        result.Clear();
        foreach (object item in ((IEnumerable)original))
        {
            result.Add((T)item);
        }

        return result;
    }

    public IPersistentCollection Wrap(ISessionImplementor session, object collection)
    {
        return new NHPagedList<T>(session, (IList<T>)collection);
    }

    #endregion
} 
```

NHPagedList 下一个：

```
public class NHPagedList<T> : PersistentGenericBag<T>, IPagedList<T>
{

    public NHPagedList(ISessionImplementor session) : base(session)
    {
        _sessionImplementor = session;
    }

    public NHPagedList(ISessionImplementor session, IList<T> collection)
        : base(session, collection)
    {
        _sessionImplementor = session;
    }

    private ICollectionPersister _collectionPersister = null;
    public NHPagedList<T> CollectionPersister(ICollectionPersister collectionPersister)
    {
        _collectionPersister = collectionPersister;
        return this;
    }

    protected ISessionImplementor _sessionImplementor = null;

    public virtual IList<T> GetPagedList(int pageNo, int pageSize)
    {
        if (!this.WasInitialized)
        {
            IQuery pagedList = _sessionImplementor
                .GetSession()
                .CreateFilter(this, "")
                .SetMaxResults(pageSize)
                .SetFirstResult((pageNo - 1) * pageSize);

            return pagedList.List<T>();
        }

        return this
                .Skip((pageNo - 1) * pageSize)
                .Take(pageSize)
                .ToList<T>();
    }

    public new int Count
    {
        get
        {
            if (!this.WasInitialized)
            {
                return Convert.ToInt32(_sessionImplementor.GetSession().CreateFilter(this, "select count(*)").List()[0].ToString());
            }

            return base.Count;
        }
    }

} 
```

您会注意到它将检查集合是否已初始化，以便我们知道何时检查数据库中的分页列表或何时仅使用当前内存中的对象。

现在您可以开始了，只需将模型上的当前 IList 引用更改为 IPagedList，然后将 NHibernate 映射到新的自定义集合，使用流畅的 NHibernate 如下，您就可以开始了。

```
.CollectionType<PagedListFactory<Recipient>>() 
```

这是此代码的第一次迭代，因此需要进行一些重构和修改才能使其完美。

目前我唯一的问题是它不会按照映射文件建议的父子关系的顺序获取分页项目。我在地图上添加了一个 order-by 属性，它只是不会注意它。与每个查询中的任何其他 where 子句一样，没有问题。有谁知道为什么会发生这种情况以及周围是否存在？如果我不能解决这个问题，我会很失望。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-26T05:42:44.243

您应该查看 NHibernate 的 LINQ 提供程序之一。您正在寻找的是一种延迟加载查询结果的方法。LINQ 的最大威力在于它确实做到了……延迟加载查询的结果。当您实际构建一个查询时，实际上它会创建一个表示您想要做的事情的表达式树，以便它可以在以后实际完成。通过使用 NHibernate 的 LINQ 提供程序，您将能够执行以下操作：

```
public abstract class Repository<T> where T: class
{
    public abstract T GetByID(int id);
    public abstract IQueryable<T> GetAll();
    public abstract T Insert(T entity);
    public abstract void Update(T entity);
    public abstract void Delete(T entity);
}

public class RecipientRepository: Repository<Recipient>;
{
    // ...

    public override IQueryable<Recipient> GetAll()
    {
        using (ISession session = /* get session */)
        {
            // Gets a query that will return all Recipient entities if iterated
            IQueryable<Recipient> query = session.Linq<Recipient>();
            return query;
        }
    }

    // ...
}

public class RecipientList
{
    public IQueryable<Recipient> Recipients
    {
        RecipientRepository repository = new RecipientRepository();
        return repository.GetAll(); // Returns a query, does not evaluate, so does not hit database
    }
}

// Consuming RecipientList in some higher level service, you can now do:    
public class RecipientService
{
    public IList<Recipient> GetPagedList(int page, int size)
    {
        RecipientList list = // get instance of RecipientList
        IQueryable<Recipient> query = list.Recipients.Skip(page*size).Take(size); // Get your page
        IList<Recipient> listOfRecipients = query.ToList(); // <-- Evaluation happens here!
        reutrn listOfRecipients;
    }
} 
```

使用上面的代码（它不是一个很好的例子，但它确实展示了一般想法），您构建了一个表示您想要做什么的表达式。该表达式的评估只发生一次......当评估发生时，您的数据库将使用特定查询进行查询，该查询将仅返回您实际请求的特定行子集。无需加载所有记录，然后稍后将它们过滤到您请求的单个页面......没有浪费。如果在评估之前发生异常，无论出于何种原因，您甚至都不会访问数据库，从而进一步提高效率。

这种能力可以比查询单页结果更进一步。扩展方法 .Skip() 和 .Take() 可用于所有 IQueryable<T> 和 IEnumerable<T> 对象，以及一大堆其他对象。此外，您还有 .Where()、.Except()、.Join() 等等。这使您能够使用 .GetAll()，然后通过一次或多次调用 .Where() 过滤该查询的可能结果，最后以 .Skip(...).Take(...) ，在您的 .ToList() （或 .ToArray()) 调用中以单次评估结束。

这将要求您稍微更改您的域，并开始传递 IQueryable<T> 或 IEnumerable<T> 来代替 IList<T>，并且只转换为更高级别的 IList<T>，“面向公众”服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T18:24:58.517

如果你要做这样的事情，我想不出办法，你可以“写”到分页集合中让 NH 坚持下去。分页集合将是只读的。

如果没问题，那么您可以使用这样的方法：[http ://www.acceptedeclectic.com/2007/12/generic-custom-nhibernate-collections.html](http://www.acceptedeclectic.com/2007/12/generic-custom-nhibernate-collections.html)

他正在包装 PersistentGenericBag 并添加一些 ekstra 方法，就像你描述的那样。然后可以使用返回 ReadOnlyCollection 的标准来实现 GetPagedList()，就像 Count 一样 - 当然返回 long。GetAll() 方法不是必需的，据我所知，它只会返回它自己的集合。

至于这是否是一个好主意，我确实认为，如果你有很多收藏品，这是一个实际问题。如果它只是一两个集合，我会在它自己的实体上使用一个方法，该方法返回页面中的集合。

# c# - 从标记视图自动创建事件处理程序（c#）

> ID：876980
> 
> 赞同：0
> 
> 时间：2009-05-18T09:58:13.097
> 
> 标签：c#, visual-studio

是否可以让 Visual Studio 自动为标记视图中的 UI 组件创建事件处理程序方法？

假设我有

```
<asp:label runat="server" /> 
```

并想处理 OnPreRender 事件..

你如何创建处理程序方法？手动还是切换到设计视图并双击属性窗口中的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T10:05:53.143

您可以通过转到页面的 OnLoad 或 Page_Load 方法并为事件添加处理程序来自动创建处理程序方法。例如，对于这个标签：

```
<asp:label ID="MyLabel" runat="server" /> 
```

你会这样做：

```
protected void OnLoad(object sender, EventArgs e)
{
     MyLabel.PreRender += 
} 
```

此时，IntelliSense 应该启动并提供为您生成事件处理程序。如果你点击 TAB 几次，你应该有一个新的 MyLabel_PreRender 方法。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T10:06:53.453

您应该能够简单地在标记视图中编写事件处理程序并使用选项卡完成在代码中生成方法并同时在标记中指定它。我相信这是 VS.NET 2008 的新功能，因此如果您使用的是以前的版本，您可能没有此功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-12-21T06:49:42.770

看看这个msdn的链接：http: [//msdn.microsoft.com/en-us/library/6w2tb12s%28v=VS.90%29.aspx](http://msdn.microsoft.com/en-us/library/6w2tb12s%28v=VS.90%29.aspx)（VS 2008版）

它说您可以以声明方式创建一个名为 Page_event 的方法。

例如，要为页面的 Load 事件创建处理程序，请创建一个名为 Page_Load 的方法。

ASP.NET 页面自动将页面事件绑定到名为 Page_event 的方法。此自动绑定由 @Page 指令中的 AutoEventWireup 属性配置，默认情况下设置为 true。如果将 AutoEventWireup 设置为 false，则页面不会自动搜索使用 Page_event 命名约定的方法。

为我工作！

# windows - 我可以在我的 WD 160gb USB 硬盘上安装的便携式 xp 上安装 Oracle 吗？

> ID：876985
> 
> 赞同：1
> 
> 时间：2009-05-18T09:59:35.620
> 
> 标签：windows, windows-xp, portability

请帮我。

我想安装一个地址打印软件。我不想使用内部硬盘驱动器，而是想使用 USB 硬盘驱动器来给我灵活性和说服力，使系统具有便携性。

我想知道，我是否可以在我的 USB 硬盘上成功安装 Portable XP。如果是，我可以在运行 Portable XP 的硬盘上安装 oracle 吗？软件是在 Oracle 上制作的吗？

我该如何安装它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T10:04:48.123

我认为您不会在此论坛中找到有关该问题的太多帮助。

这取自常见问题解答：

**常见问题** 我可以在这里问什么样的问题？当然是编程问题！

对不起 ;-）

# asp.net-mvc - 在 asp.net mvc 中，我应该将强类型视图数据引用放在我的视图页中的什么位置？

> ID：876988
> 
> 赞同：1
> 
> 时间：2009-05-18T10:00:08.117
> 
> 标签：asp.net-mvc, viewdata

我的 viewpage 没有代码隐藏，那么我如何告诉它使用强类型的 viewdata？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-18T10:01:43.120

就在标题中：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" 
            Inherits="System.Web.Mvc.ViewPage<HomePageViewModel>" %> 
```

然后你可以像这样访问你的强类型模型：

```
<%= Model.Username %> 
```

“模型”属性会自动转换为您的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T15:42:57.143

您当然可以通过从它继承并添加一个 .cs 文件来创建强类型视图数据，如下所示：

1.  在视图旁边创建一个 .cs 文件（即：如果您有“Index.aspx”，则将其称为“Index.cs”）。
2.  创建一个继承自 System.Web.Mvc.ViewPage 类的类
3.  修改 aspx 文件以继承它：

    <%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="MyNamespace.MyViewPage" %>

# java - 用于测试 svnkit 测试的模拟 svn 实例

> ID：876993
> 
> 赞同：4
> 
> 时间：2009-05-18T10:02:05.913
> 
> 标签：java, tdd, mocking, svnkit

我正在处理的一个项目使用 svnkit 与 Subversion 进行大量交互。

是否有任何关于运行模拟内存 svn 实例的示例，以帮助促进测试等？

干杯

马蒂

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T12:07:26.107

在文件系统上创建一个临时 SVN 存储库以在测试期间使用非常简单，您可以在测试结束时立即删除它。您将使用 file:// 协议来访问它。

```
import static org.junit.Assert.*;
import java.io.*;
import org.apache.commons.io.FileUtils;
import org.junit.*;
import org.tmatesoft.svn.core.*;

public class SVNTest {

    private static final String path = "/tmp/testrepo";
    SVNURL tgtURL;

    @Before
    public void setUp() throws Exception {
        SVNRepositoryFactoryImpl.setup();
        tgtURL = SVNRepositoryFactory.createLocalRepository( new File( path ), true , false );
    }

    @After
    public void tearDown() throws IOException {
        FileUtils.deleteDirectory(new File(path));
    }

    @Test
    public void test() {
        fail("Not yet implemented");
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T10:41:12.543

为什么不直接用模拟数据创建一个简单的 SVN 存储库？这只是几个命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T10:35:00.057

你可能在[mockito](http://mockito.org/)中测试过，它应该可以在 SVNkit 中正常工作

我的 0.02 美元

# c# - ViewingMode设置为Scroll时调整FlowDocumentReader的滚动增量？

> ID：876994
> 
> 赞同：6
> 
> 时间：2009-05-18T10:02:58.937
> 
> 标签：c#, wpf, scroll

我正在使用 ViewingMode="Scroll" 在 FlowDocumentReader 中显示 FlowDocument。如果我使用鼠标上的滚轮，文档滚动非常缓慢。我想增加滚动步骤。

1.  我试图在控制面板中更改鼠标的滚动设置，但这没有任何效果。我认为 WPF 忽略了 FlowDocumentScrollViewer 的设置。

2.  我在 FlowDocument 和 FlowDocumentReader 上添加了一个 Scroll 事件，但是当我使用鼠标滚轮时它不会触发。

3.  我在 FlowDocumentReader 上添加了一个 Loaded 事件，获得了 ScrollViewer 后代，从滚动查看器的模板中找到了 ScrollBar（“PART_VerticalScrollBar”）并调整了 SmallChange 和 LargeChange 属性。那也没有任何效果。

有人有想法么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-06-10T03:01:11.067

我们可以在控件的 MouseWheel 事件中修改它，就像 Sohnee 所建议的那样，但是它只能针对一种特定情况来解决，并且您必须有权访问 FlowDocumentReader，如果您使用类似 MVVM 的东西，您不会。相反，我们可以创建一个附加属性，然后我们可以使用 ScrollViewer 在任何元素上设置该属性。在定义我们的附加属性时，我们还需要一个 PropertyChanged 回调，我们将在其中对滚动速度进行实际修改。我还为我的属性设置了默认值 1，我将使用的速度范围是 0.1x 到 3x，尽管您可以轻松地执行 1-10 之类的操作。

```
public static double GetScrollSpeed(DependencyObject obj)
{
    return (double)obj.GetValue(ScrollSpeedProperty);
}

public static void SetScrollSpeed(DependencyObject obj, double value)
{
    obj.SetValue(ScrollSpeedProperty, value);
}

public static readonly DependencyProperty ScrollSpeedProperty =
    DependencyProperty.RegisterAttached(
    "ScrollSpeed",
    typeof(double),
    typeof(ScrollHelper),
    new FrameworkPropertyMetadata(
        1.0,
        FrameworkPropertyMetadataOptions.Inherits & FrameworkPropertyMetadataOptions.BindsTwoWayByDefault,
        new PropertyChangedCallback(OnScrollSpeedChanged)));

private static void OnScrollSpeedChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
{
} 
```

现在我们有了附加属性，我们需要处理滚动，为此，我们可以在 OnScrollSpeedChanged 中处理 PreviewMouseWheel 事件。我们想要挂钩到 PreviewMouseWheel，因为它是一个隧道事件，在 ScrollViewer 可以处理标准 MouseWheel 事件之前发生。

目前，PreviewMouseWheel 处理程序正在接收 FlowDocumentReader 或我们绑定到的其他东西，但是我们需要的是 ScrollViewer。由于可能有很多东西：ListBox、FlowDocumentReader、WPF Toolkit Grid、ScrollViewer 等，我们可以创建一个使用 VisualTreeHelper 的简短方法来执行此操作。我们已经知道通过的项目将是某种形式的 DependancyObject，因此我们可以使用一些递归来查找 ScrollViewer（如果存在）。

```
public static DependencyObject GetScrollViewer(DependencyObject o)
{
    // Return the DependencyObject if it is a ScrollViewer
    if (o is ScrollViewer)
    { return o; }

    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(o); i++)
    {
        var child = VisualTreeHelper.GetChild(o, i);

        var result = GetScrollViewer(child);
        if (result == null)
        {
            continue;
        }
        else
        {
            return result;
        }
    }

    return null;
}

private static void OnScrollSpeedChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
{
    var host = o as UIElement;
    host.PreviewMouseWheel += new MouseWheelEventHandler(OnPreviewMouseWheelScrolled);
} 
```

现在我们可以得到 ScrollViwer 我们终于可以修改滚动速度了。我们需要从发送的 DependancyObject 中获取 ScrollSpeed 属性。此外，我们可以使用我们的帮助方法来获取包含在元素中的 ScrollViewer。一旦我们有了这两个东西，我们就可以获取和修改 ScrollViewer 的 VerticalOffset。我发现将 MouseWheelEventArgs.Delta（即鼠标滚轮更改的量）除以 6 即可获得大约默认的滚动速度。因此，如果我们将其乘以 ScrollSpeed 修饰符，我们就可以得到新的偏移值。然后我们可以使用它公开的 ScrollToVerticalOffset 方法设置 ScrollViewer 的 VerticalOffset。

```
private static void OnPreviewMouseWheelScrolled(object sender, MouseWheelEventArgs e)
{
    DependencyObject scrollHost = sender as DependencyObject;

    double scrollSpeed = (double)(scrollHost).GetValue(Demo.ScrollSpeedProperty);

    ScrollViewer scrollViewer = GetScrollViewer(scrollHost) as ScrollViewer;

    if (scrollViewer != null)
    {
        double offset = scrollViewer.VerticalOffset - (e.Delta * scrollSpeed / 6);
        if (offset < 0)
        {
            scrollViewer.ScrollToVerticalOffset(0);
        }
        else if (offset > scrollViewer.ExtentHeight)
        {
            scrollViewer.ScrollToVerticalOffset(scrollViewer.ExtentHeight);
        }
        else
        {
            scrollViewer.ScrollToVerticalOffset(offset);
        }

        e.Handled = true;
    }
    else
    {
        throw new NotSupportedException("ScrollSpeed Attached Property is not attached to an element containing a ScrollViewer.");
    }
} 
```

现在我们已经设置了附加属性，我们可以创建一个简单的 UI 来演示它。我将创建一个 ListBox 和一个 FlowDocumentReaders，以便我们可以看到 ScrollSpeed 将如何在多个控件中受到影响。

```
<UniformGrid Columns="2">
    <DockPanel>
        <Slider DockPanel.Dock="Top"
            Minimum=".1"
            Maximum="3"
            SmallChange=".1"
            Value="{Binding ElementName=uiListBox, Path=(ScrollHelper:Demo.ScrollSpeed)}" />
        <ListBox x:Name="uiListBox">
            <!-- Items -->
        </ListBox>
    </DockPanel>
    <DockPanel>
        <Slider DockPanel.Dock="Top"
            Minimum=".1"
            Maximum="3"
            SmallChange=".1"
            Value="{Binding ElementName=uiListBox, Path=(ScrollHelper:Demo.ScrollSpeed)}" />
        <FlowDocumentReader x:Name="uiReader"
            ViewingMode="Scroll">
            <!-- Flow Document Content -->
        </FlowDocumentReader>
    </DockPanel>
</UniformGrid> 
```

现在，在运行时，我们可以使用 Sliders 来修改每一列的滚动速度，这很有趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-24T14:46:00.117

哇。Rmoore 的回答很精彩，但有点复杂。我已经简化了一点。对于那些不使用 MVVM 或者可以将代码放在可以访问目标元素的类中的人来说，这两种方法对你来说就足够了：

将此方法放置到您的扩展中：

```
 public static DependencyObject GetScrollViewer(this DependencyObject o)
        {
            // Return the DependencyObject if it is a ScrollViewer
            if (o is ScrollViewer)
            { return o; }

            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(o); i++)
            {
                var child = VisualTreeHelper.GetChild(o, i);

                var result = GetScrollViewer(child);
                if (result == null)
                {
                    continue;
                }
                else
                {
                    return result;
                }
            }

            return null;
        } 
```

然后将第二个方法放置到可以访问目标 UI 元素的类中，并将其订阅到“PreviewMouseWheel”事件

```
 private void HandleScrollSpeed(object sender, MouseWheelEventArgs e)
        {
            try
            {
                if (!(sender is DependencyObject))
                    return;

                ScrollViewer scrollViewer = (((DependencyObject)sender)).GetScrollViewer() as ScrollViewer;
                ListBox lbHost = sender as ListBox; //Or whatever your UI element is

                if (scrollViewer != null && lbHost != null)
                {
                    double scrollSpeed = 1;
    //you may check here your own conditions
                    if (lbHost.Name == "SourceListBox" || lbHost.Name == "TargetListBox")
                        scrollSpeed = 2;

                    double offset = scrollViewer.VerticalOffset - (e.Delta * scrollSpeed / 6);
                    if (offset < 0)
                        scrollViewer.ScrollToVerticalOffset(0);
                    else if (offset > scrollViewer.ExtentHeight)
                        scrollViewer.ScrollToVerticalOffset(scrollViewer.ExtentHeight);
                    else
                        scrollViewer.ScrollToVerticalOffset(offset);

                    e.Handled = true;
                }
                else
                    throw new NotSupportedException("ScrollSpeed Attached Property is not attached to an element containing a ScrollViewer.");
            }
            catch (Exception ex)
            {
//Do something...
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-09T10:53:23.993

不要使用滚动事件，而是捕获 MouseWheel 事件。

```
<FlowDocumentReader MouseWheel="..."> 
```

# javascript - 在 AJAX 发布后连接按钮单击事件

> ID：876997
> 
> 赞同：2
> 
> 时间：2009-05-18T10:03:08.017
> 
> 标签：javascript, jquery

我有一个包含各种行的 HTML 表，每个行都有一个带有类的删除按钮。

在`DocumentReady`事件中，我将所有按钮与此类连接起来以处理`click`事件。

在`click`事件中，它`jQuery` `POST`会从数据库中删除数据并返回包含已删除行的表。

如果我去单击另一个删除按钮，它不会做任何事情，就好像`click`事件没有连接一样。`OnSuccess`我曾尝试在活动中将其连接起来，`DocumentReady`但没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T10:07:56.290

请务必发布`jQuery`负责整个逻辑的代码。就像在黑暗中拍摄一样，我建议您必须使用：

```
$(".button").live("click",function(){...}) 
```

代替

```
$(".button").click(...) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T10:05:55.593

我会在 jquery 中使用实时绑定功能，以便能够在创建的任何时候绑定到所有指定的元素：

[http://docs.jquery.com/Events/live](http://docs.jquery.com/Events/live)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T10:07:25.620

听起来您正在删除整个表格（带有附加事件的按钮）并用新表格替换它（带有没有附加按钮的新按钮）。

你有几个选择。

1.  只需删除您删除的行 - 不要替换整个表

2.  使用[事件委托](http://icant.co.uk/sandbox/eventdelegation/)并将事件处理程序放在包含表格的元素上

3.  每次重建表时重新运行附加事件的代码

# networking - 为什么我无法通过非浏览器应用程序连接到此 url？

> ID：876999
> 
> 赞同：0
> 
> 时间：2009-05-18T10:03:34.600
> 
> 标签：networking, network-programming, network-protocols

任何人都知道为什么这个 url 拒绝非浏览器应用程序发送的连接请求（wget、curl、elinks！）：[http ://sube.garanti.com.tr](http://sube.garanti.com.tr)

[https://sub.garanti.com.tr/isube/login/en](https://sube.garanti.com.tr/isube/login/en)

这是我的银行帐户，我正在尝试使用脚本进行转账，但正如您所见，这个超级安全的服务器不允许我这样做。

有什么建议么？

阿泽

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T16:13:31.187

试试这个：

```
wget --referer="http://www.google.com" --user-agent="Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6" --header="Accept: text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5" --header="Accept-Language: en-us,en;q=0.5" --header="Accept-Encoding: gzip,deflate" --header="Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7" --header="Keep-Alive: 300" 
```

这可能会诱使网站认为您拥有“合法”浏览器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T11:19:16.303

好吧，我试过这样做：

```
wget http://sube.garanti.com.tr 
```

哪个超时。

但这样做：

```
wget https://sube.garanti.com.tr/isube/login/en 
```

给了我网站的来源。它是框架基础，我正在获取框架定义。

其原因可能是，该站点无法通过正常（http）连接访问，您必须使用安全连接（https）。

但是，根据经验，我会尝试为任何此类应用程序设置 User-Agent: 标头，如 pjc50 所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T10:07:12.500

也许是因为您需要先登录才能在此网址上执行任何操作？

您可以使用 perl 的 LWP 登录站点，例如，通过正确提交登录表单。

PS 我的浏览器也无法连接到 sube.garanti.com.tr。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T10:44:03.317

AFAIK wgte，curl 在服务器端打开站点。所以检查你的防火墙（如果有的话），看看它是否被阻止。

此外，该站点还可以阻止传入请求。它是一个银行网站，我们可以期待一些安全限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T11:11:25.320

一些网站检查 User-Agent: 标头。您可能需要配置您的下载器以将其自身标识为“Mozilla”而不是其自身。***********