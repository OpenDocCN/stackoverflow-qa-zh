# StackOverflow 问答 10817000-10817999

# ruby-on-rails - 永久 URL 参数

> ID：10817000
> 
> 赞同：1
> 
> 时间：2012-05-30T13:10:53.130
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我一直在构建一个时尚电子商务应用程序，该应用程序的开发周期相当长。它适用于男士和女士产品。此刻，用户在开始时选择他们的性别，然后将gender_id 传递到用户的会话中。然后在整个站点的许多查询中使用此 ID，并确定向用户显示哪些性别产品。

但是，出于 SEO 目的，此信息必须显示在 URL 而不是会话中。我不想为我做的每个链接都传递一个性别参数，就像这样......

```
http://www.shop.com/products?category=Jeans&gender=women 
```

基本上我想做的是将性别输入到路线中，并让它保持不变。我看到一些网站的 URL 结构如下......

```
http://www.shop.com/women/products?category=Jeans 
```

如何在对控制器影响最小的情况下实现第二个 URL 结构？或者也许有不同的方式可以实现我的目标？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:40:51.380

把它放在你的路线中，有一个范围：

```
scope ':gender', :constraints => {:gender => /women|men/} do
  resources :products
  resources :cart
  # other routes here
end 
```

您可以使用 访问性别`params[:gender]`。您放置在该块中的任何路线都将限定为性别上下文。

此外，生成 url 时，性别范围将默认为当前范围。例如，如果我浏览到`/men/products`并在该视图中我有一个指向购物车的链接，如果 url 是用 url 生成的，`cart_path`那么`/men/cart`. 选择性别后，您可以编写将它们重定向到正确的作用域路径。我看到的一个问题是，您使用这种方法失去了产品和购物车的不间断路线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:30:20.543

您可以将默认`GET`参数传递给您的路线。例如，下面的模式将匹配`http://www.shop.com/women/products?category=Jeans`并自动附加`gender=women`到您的 params 哈希。

```
get '/women/products' => 'Products#index', :gender => 'women'
get '/men/products' => 'Products#index', :gender => 'men' 
```

您还可以通过在路由定义中使用占位符和约束来进一步概括这一点。

```
get '/:gender/products' => 'Products#index', :constraints => {:gender => /men|women/} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:13:18.310

您可能希望查看不在 URL 中传递变量的 HTTP-POST，而不是执行 HTTP-GET。例如，这是一个简单的 HTML 页面，其中包含一个 HETT-GET 操作和一个 HTTP-POST 操作：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
<html> 
<head> 
    <meta http-equiv="content-type" content="text/html;charset=ISO-8859-1"> 
    <title>HTTP example</title>        
</head> 

<body> 

<h1>POST & GET example</h1> 

    <h2> Post form</h2> 
    <form method="post" action="post_get2.php"> 
    text:<input type="text" size =40 name="name"> 
    <input type=submit value="Submit Post"> 
    </form> 

    <h2> GET form</h2> 
    <form method="get" action="post_get2.php"> 
    text:<input type="text" size =40 name="name"> 
    <input type=submit value="Submit Get" > 
    </form> 

</body> 
</html> 
```

这是一个简单的 PHP 页面 (post_get2.php)，它检测您是否进行了 POST 或 GET 操作并将其打印在页面上：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
<html> 
<head> 
<meta http-equiv="content-type" content="text/html;charset=ISO-8859-1"> 
<title>HTTP example</title>        
</head> 

<body> 

<h1>POST & GET example</h1> 

<? 

    function stripFormSlashes($arr) 
        { 
        if (!is_array($arr)) 
                { 
                return stripslashes($arr); 
                } 
            else 
                { 
                return array_map('stripFormSlashes', $arr); 
                } 
        } 

    if (get_magic_quotes_gpc()) 
        { 
        $_GET  = stripFormSlashes($_GET); 
        $_POST = stripFormSlashes($_POST); 
        } 

    echo ("<br/>"); 
    echo ("<pre>"); 
    echo ("POST info:\n"); 
    print_r($_POST); 
    echo("</pre>"); 

    echo ("<br/>"); 
    echo ("<pre>"); 
    echo ("GET info:\n"); 
    print_r($_GET); 
    echo("</pre>"); 

    if($_GET['name']) 
        { 
        $name = $_GET['name']; 
        } 

    echo($name); 

?> 

<p> 
    <a><input type="button" value="back" onclick="history.go(-1)"></a> 
</p> 

</body> 
</html> 
```

POST 的好处在于它不会显示您在页面上所做的选择。它一直显示“http://www.shop.com/products”。不像 GET 'http://www.shop.com/products?category=Jeans&gender=women'

# c++ - 交付具有其他依赖项的 xcode 框架

> ID：10817011
> 
> 赞同：3
> 
> 时间：2012-05-30T13:12:15.110
> 
> 标签：c++, ios, xcode, frameworks, static-libraries

我们正在尝试发布我们库的 iOS 版本，并计划将其作为已编译的静态框架提供。使用 Xcode，我们拥有的框架和测试应用程序编译成功并且运行良好。

问题是：交付它的最佳方式是什么？

我们的库依赖于其他一些开源框架，我们还希望发布一个带有该框架的测试应用程序，以展示如何正确使用该库。

我们应该使用伞式框架吗？苹果建议“不要创建伞形框架”（http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Concepts/CreationGuidelines.html）

我们是否应该只提供一个包含我们的框架以及我们依赖的所有框架的 zip，并告诉客户他们必须在他们的项目中包含这些框架？

包含测试应用程序的最佳方式是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:10:00.380

看看 CocoaPods 作为管理依赖项的一种方式（特别是如果这些依赖项是开源的）。

[https://github.com/CocoaPods/CocoaPods](https://github.com/CocoaPods/CocoaPods)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:05:33.480

我会将所需的框架包含在您编译的框架中，但 iOS SDK 标配的框架除外。大多数框架都将依赖 Foundation 和 UIKit，这些框架很可能已经包含在内。他们无法访问的任何其他内容，包括您发送的框架。

# javascript - HTML5 画布游戏计时器

> ID：10817014
> 
> 赞同：0
> 
> 时间：2012-05-30T13:12:23.557
> 
> 标签：javascript, html, canvas, timer

如何为 HTML5 Canvas 游戏创建好的计时器？我正在使用 RequestAnimationFrame（[http://paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)）

但是物体的移动太快了。

像我的代码是：

[http://pastebin.com/bSHCTmq](http://pastebin.com/bSHCTMmq)

但是如果我按下 UP_ARROW 播放器不要移动一个像素，而是移动 5、8 或 10 个或更多或更少的像素。如果我按下 UP_ARROW 播放器移动 1 个像素怎么办？

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:47:03.630

问题是您在每个间隔上增加值的方法会产生不一致的结果。听起来在您的情况下 RequestAnimationFrame 触发太快，但在其他情况下——比如在慢速 CPU 上——它们会触发更慢，给出不同的结果。

所以，游戏动画需要基于“绝对”时间。即，您需要“记住”按下 UP_ARROW 的时间以及玩家当时所处的位置。然后，当您调用 update() 确定经过了多少时间，并基于此以及所需的速度（例如，每秒像素数），将播放器移动到适当的位置。它使您的代码更加复杂，但不幸的是，它必须这样做。

这个问题网上讨论很多。这是我发现的一篇随机文章（基于 Flash，但没关系）： [http ://www.flashgamesclassroom.com/classroom/actionscript/frame-based-vs-time-based-animation/](http://www.flashgamesclassroom.com/classroom/actionscript/frame-based-vs-time-based-animation/)

你可以谷歌“基于时间的游戏动画”来研究更多。

# php - 在html页面中显示文件夹内容？

> ID：10817029
> 
> 赞同：1
> 
> 时间：2012-05-30T13:12:50.307
> 
> 标签：php, html, css, apache

我正在研究我网站的一部分，该部分用于文件存储。默认情况下，当您导航到没有 index.html 的文件夹时，会列出所有文件和目录，并且可以下载。我想知道如何保留此页面样式并为其添加额外的链接和按钮。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:16:13.213

该页面由[mod_autoindex](http://httpd.apache.org/docs/2.4/mod/mod_autoindex.html)生成。

您可以使用[HeaderName 指令](http://httpd.apache.org/docs/2.0/mod/mod_autoindex.html#headername)将文件插入到响应的顶部（包括一些内容和`<link>`样式表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:16:16.953

我在快速搜索中找到了这个，但之前没有搞砸过：

[http://paradox460.newsvine.com/_news/2008/04/05/1413490-how2-stylish-apache-directory-listings](http://paradox460.newsvine.com/_news/2008/04/05/1413490-how2-stylish-apache-directory-listings)

# .htaccess - 将 AddType 规则从 htaccess 转换为 web.config

> ID：10817035
> 
> 赞同：4
> 
> 时间：2012-05-30T13:13:03.603
> 
> 标签：.htaccess, web-config

我需要转换 .htaccess

```
AddType application/x-httpd-php .txt 
```

到 web.config。你能帮我吗？我试过了

```
 <configuration>
  <system.web>
    <httpHandlers>
      <add verb="*" path="*.txt" 
         type="php " />
    </httpHandlers>
  </system.web>
</configuration> 
```

但这对我不起作用。所以我需要在IIS上打开像php这样的txt文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T10:49:48.893

这对我有用：

```
<configuration>
   <system.webServer>
      <staticContent>
         <mimeMap fileExtension=".syx" mimeType="application/octet-stream" />
         <mimeMap fileExtension=".tab" mimeType="text/plain" />
      </staticContent>
   </system.webServer>
</configuration> 
```

来源：[http ://www.iis.net/configreference/system.webserver/staticcontent/mimemap](http://www.iis.net/configreference/system.webserver/staticcontent/mimemap)

# ios - 我可以使用 AVCaptureSession 将 AAC 流编码到内存吗？

> ID：10817036
> 
> 赞同：7
> 
> 时间：2012-05-30T13:13:05.883
> 
> 标签：ios, avfoundation, audio-recording, avcapturesession, aac

我正在编写一个通过网络传输视频和音频的 iOS 应用程序。

我正在使用 AVCaptureSession 使用**AVCaptureVideoDataOutput****抓取**原始视频帧，并[使用 x264](https://stackoverflow.com/questions/9356946/compiling-x264-for-ios-5)在软件中对其进行编码。这很好用。

 **我想对音频做同样的事情，只是我不需要在音频方面进行太多控制，所以我想使用内置的硬件编码器来生成 AAC 流。这意味着使用音频工具箱层中的[音频转换器。](https://developer.apple.com/documentation/audiotoolbox/audio_converter_services)为了做到这一点，我为**AVCapudeAudioDataOutput**的音频帧添加了一个处理程序：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection 
{
    // get the audio samples into a common buffer _pcmBuffer
    CMBlockBufferRef blockBuffer = CMSampleBufferGetDataBuffer(sampleBuffer);
    CMBlockBufferGetDataPointer(blockBuffer, 0, NULL, &_pcmBufferSize, &_pcmBuffer);

    // use AudioConverter to
    UInt32 ouputPacketsCount = 1;
    AudioBufferList bufferList;
    bufferList.mNumberBuffers = 1;
    bufferList.mBuffers[0].mNumberChannels = 1;
    bufferList.mBuffers[0].mDataByteSize = sizeof(_aacBuffer);
    bufferList.mBuffers[0].mData = _aacBuffer;
    OSStatus st = AudioConverterFillComplexBuffer(_converter, converter_callback, (__bridge void *) self, &ouputPacketsCount, &bufferList, NULL);
    if (0 == st) {
        // ... send bufferList.mBuffers[0].mDataByteSize bytes from _aacBuffer...
    }
} 
```

在这种情况下，音频转换器的回调函数非常简单（假设数据包大小和计数设置正确）：

```
- (void) putPcmSamplesInBufferList:(AudioBufferList *)bufferList withCount:(UInt32 *)count
{
    bufferList->mBuffers[0].mData = _pcmBuffer;         
    bufferList->mBuffers[0].mDataByteSize = _pcmBufferSize;
} 
```

音频转换器的设置如下所示：

```
{
    // ...
    AudioStreamBasicDescription pcmASBD = {0};
    pcmASBD.mSampleRate = ((AVAudioSession *) [AVAudioSession sharedInstance]).currentHardwareSampleRate;
    pcmASBD.mFormatID = kAudioFormatLinearPCM;
    pcmASBD.mFormatFlags = kAudioFormatFlagsCanonical;
    pcmASBD.mChannelsPerFrame = 1;
    pcmASBD.mBytesPerFrame = sizeof(AudioSampleType);
    pcmASBD.mFramesPerPacket = 1;
    pcmASBD.mBytesPerPacket = pcmASBD.mBytesPerFrame * pcmASBD.mFramesPerPacket;
    pcmASBD.mBitsPerChannel = 8 * pcmASBD.mBytesPerFrame;

    AudioStreamBasicDescription aacASBD = {0};
    aacASBD.mFormatID = kAudioFormatMPEG4AAC;
    aacASBD.mSampleRate = pcmASBD.mSampleRate;
    aacASBD.mChannelsPerFrame = pcmASBD.mChannelsPerFrame;
    size = sizeof(aacASBD);
    AudioFormatGetProperty(kAudioFormatProperty_FormatInfo, 0, NULL, &size, &aacASBD);

    AudioConverterNew(&pcmASBD, &aacASBD, &_converter);
    // ...
} 
```

这似乎很简单，只是**它不起作用**。一旦 AVCaptureSession 运行，音频转换器（特别是 AudioConverterFillComplexBuffer）返回一个“hwiu”（使用中的硬件）错误。如果会话停止，转换工作正常，但我无法捕获任何东西......

我想知道是否有办法从 AVCaptureSession 中获取 AAC 流。我正在考虑的选项是：

1.  不知何故使用 AVAssetWriterInput 将音频样本编码为 AAC，然后以某种方式获取编码的数据包（而不是通过 AVAssetWriter，它只会写入文件）。

2.  重新组织我的应用程序，使其仅在视频端使用 AVCaptureSession 并在音频端使用[音频队列](https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/Introduction/Introduction.html)。这将使流控制（开始和停止录制，响应中断）更加复杂，我担心它可能会导致音频和视频之间的同步问题。此外，它似乎不是一个好的设计。

有谁知道是否可以将 AAC 从 AVCaptureSession 中取出？我必须在这里使用音频队列吗？这会让我陷入同步或控制问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T07:47:52.297

我最终向 Apple 寻求建议（事实证明，如果你有付费开发者帐户，你可以这样做）。

似乎 AVCaptureSession 抓住了 AAC 硬件编码器，但只允许您使用它直接写入文件。

您可以使用软件编码器，但您必须专门要求它而不是使用 AudioConverterNew：

```
AudioClassDescription *description = [self
        getAudioClassDescriptionWithType:kAudioFormatMPEG4AAC
                        fromManufacturer:kAppleSoftwareAudioCodecManufacturer];
if (!description) {
    return false;
}
// see the question as for setting up pcmASBD and arc ASBD
OSStatus st = AudioConverterNewSpecific(&pcmASBD, &aacASBD, 1, description, &_converter);
if (st) {
    NSLog(@"error creating audio converter: %s", OSSTATUS(st));
    return false;
} 
```

和

```
- (AudioClassDescription *)getAudioClassDescriptionWithType:(UInt32)type
                                           fromManufacturer:(UInt32)manufacturer
{
    static AudioClassDescription desc;

    UInt32 encoderSpecifier = type;
    OSStatus st;

    UInt32 size;
    st = AudioFormatGetPropertyInfo(kAudioFormatProperty_Encoders,
                                    sizeof(encoderSpecifier),
                                    &encoderSpecifier,
                                    &size);
    if (st) {
        NSLog(@"error getting audio format propery info: %s", OSSTATUS(st));
        return nil;
    }

    unsigned int count = size / sizeof(AudioClassDescription);
    AudioClassDescription descriptions[count];
    st = AudioFormatGetProperty(kAudioFormatProperty_Encoders,
                                sizeof(encoderSpecifier),
                                &encoderSpecifier,
                                &size,
                                descriptions);
    if (st) {
        NSLog(@"error getting audio format propery: %s", OSSTATUS(st));
        return nil;
    }

    for (unsigned int i = 0; i < count; i++) {
        if ((type == descriptions[i].mSubType) &&
            (manufacturer == descriptions[i].mManufacturer)) {
            memcpy(&desc, &(descriptions[i]), sizeof(desc));
            return &desc;
        }
    }

    return nil;
} 
```

软件编码器当然会占用 CPU 资源，但会完成工作。**

# java - Java-将树集转换为列表

> ID：10817037
> 
> 赞同：21
> 
> 时间：2012-05-30T13:13:06.657
> 
> 标签：java

如何将其转换为相同对象类型的列表？

```
TreeSet<FieldBean> Fields = new TreeSet<FieldBean>(); 
```

谢谢

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-30T13:15:02.027

[的构造函数之一`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#ArrayList%28java.util.Collection%29)将集合作为参数，并用该集合中包含的项目填充列表：

```
List<FieldBean> list = new ArrayList<FieldBean> (fields); 
```

# javascript - jQuery获取表行中的隐藏字段值

> ID：10817041
> 
> 赞同：3
> 
> 时间：2012-05-30T13:13:16.117
> 
> 标签：javascript, jquery, asp.net, html, css

我有一个表，每行都有一个隐藏字段。单击该行中的按钮时，我需要提醒隐藏字段的值。我有以下 jQuery 代码。但它不起作用。我们如何让它发挥作用？

代码：http: [//jsfiddle.net/Lijo/xWanB/](http://jsfiddle.net/Lijo/xWanB/)

```
<script>
    $(document).ready(function () {

        //"Show ID" for Associate Button Click
        $('.resultGridTable tr > td > .actionButtonNational').click(function () {
            //"this" means show ID button
            //Traversing to get the parent row and then the required columns in the row
            var associateID = $(this).parents('tr:first > .wrapperDivHidden input[type=hidden]').val();
            alert(associateID);
            return false;
        });
    });
</script> 
```

HTML

```
<td>
    XXXXX
    <input type="submit" name="ctl00$detailContentPlaceholder$grdSubscribedAssociates$ctl04$btnNational"
                        value="Show ID" id="detailContentPlaceholder_grdSubscribedAssociates_btnNational_2"
                        class="actionButtonNational" style="color: White; background-color: #A7A7A6;
                        font-weight: bold; width: 60px" />
    <div id="wrapperDivHidden" class="wrapperDivHidden">
        <input type="hidden" name="ctl00$detailContentPlaceholder$grdSubscribedAssociates$ctl04$hdnAssociateID"
                            id="detailContentPlaceholder_grdSubscribedAssociates_hdnAssociateID_2"value="789345680" />
    </div>
</td> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-30T13:14:59.313

您的选择器以`tr:first > .wrapperDivHidden ...`但`.wrapperDivHidden`不是直接子级开头，`tr`因此请更改您的选择器，如下所示：

```
$(this).parents('tr').find('.wrapperDivHidden input[type="hidden"]').val(); 
```

小提琴：http: [//jsfiddle.net/xWanB/3/](http://jsfiddle.net/xWanB/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:18:59.073

试试这个：

```
<script type="text/javascript">

    $(document).ready(function () {
        //"Show ID" for Associate Button Click
        $('.actionButtonNational').click(function () {
            var associateID = $('input[type=hidden]', $(this).closest("td")).val();
            alert(associateID);
            return false;
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:25:32.523

这是您尝试执行的操作的过度简化示例：

[http://jsfiddle.net/6S5rD/](http://jsfiddle.net/6S5rD/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-01T17:46:45.773

如果您的行的第一列被隐藏然后使用这个 var x = $('input[type=hidden]', $(this).find("td:first")).val();

# android - Eclipse Indigo OS X 箭头和退格键不再起作用

> ID：10817046
> 
> 赞同：0
> 
> 时间：2012-05-30T13:13:30.103
> 
> 标签：android, eclipse, macos

我正在做一些 Android 开发，经过一些项目后，我最近发现我的箭头和退格键在编辑器视图（Java 和 XML）中不再起作用。

它适用于所有其他应用程序。我已经尝试重新启动 Eclipse 并重新启动我的 macbook，但它仍然会发生。

任何人都可以帮忙吗？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:02:56.933

好的，我已经卸载了我安装的一个名为 Air Display 的应用程序。显然，我在 Lion 上的 2008 年末 macbook pro 存在问题（我失去了拖放功能）。

重新启动后，一切都恢复正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:01:09.513

尝试在编辑器中单击鼠标中键，然后重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:18:43.033

```
Windows -> Preferences -> General -> Keys 
```

检查您是否使用空格或箭头创建了一个奇怪的热键

# objective-c - 需要帮助解决基本的objective-c构建错误

> ID：10817049
> 
> 赞同：0
> 
> 时间：2012-05-30T13:13:50.167
> 
> 标签：objective-c, ios

我对objective-c一点经验都没有，现在才开始。和我一起工作的一个开发者出国几天，一不小心留下了代码错误，现在我无法编译一个Iphone应用程序来完成它......

我通过邮件从他那里得到了一些信息，他告诉我他离开了一个名为 dialog 的库，我需要将其删除以使其正常工作......

问题是我在 Objective-c 和 Xcode 方面没有经验……我是 Web 开发人员 :)

我尝试运行该项目，并收到此错误：

> 建立目标mormar
> 
> ld /Users/yanivshimony/Library/Developer/Xcode/DerivedData/mormar-cxfykryhzfovlbgtsjfowgleiyxu/Build/Products/Debug-iphonesimulator/mormar.app/mormar normal i386 cd /Users/yanivshimony/Desktop/mormar setenv MACOSX_DEPLOYMENT_TARGET 10.6 setenv PATH "/Applications /Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/ sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/ iPhone模拟器5.0。sdk -L/Users/yanivshimony/Library/Developer/Xcode/DerivedData/mormar-cxfykryhzfovlbgtsjfowgleiyxu/Build/Products/Debug-iphonesimulator -F/Users/yanivshimony/Library/Developer/Xcode/DerivedData/mormar-cxfykryhzfovlbgtsjfowgleiyxu/Build/Products/ Debug-iphonesimulator -filelist /Users/yanivshimony/Library/Developer/Xcode/DerivedData/mormar-cxfykryhzfovlbgtsjfowgleiyxu/Build/Intermediates/mormar.build/Debug-iphonesimulator/mormar.build/Objects-normal/i386/mormar.LinkFileList -mmacosx- version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=40300 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/yanivshimony/Library/Developer/Xcode/DerivedData/mormar- cxfykryhzfovlbgtsjfowgleiyxu/Build/Products/Debug-iphonesimulator/mormar.app/mormar应用程序/mormar应用程序/mormar应用程序/mormar应用程序/mormar6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=40300 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/yanivshimony/Library/Developer/Xcode/DerivedData/mormar-cxfykryhzfov/lbgtsjfowgle/Build产品/Debug-iphonesimulator/mormar.app/mormar6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=40300 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/yanivshimony/Library/Developer/Xcode/DerivedData/mormar-cxfykryhzfov/lbgtsjfowgle/Build产品/Debug-iphonesimulator/mormar.app/mormar
> 
> 架构 i386 的未定义符号：
> “_OBJC_CLASS_$_CATransition”，引用自：LoadingView.o 中的 objc-class-ref “_kCATransitionFade”，引用自：LoadingView.o 中的 +[LoadingView loadingViewInView:] -LoadingView.o 中的 [LoadingView removeView] ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

谷歌搜索了一段时间后，我仍然不知道如何解决这个问题......我将不胜感激任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:22:33.813

您需要链接到 QuartzCore。

在 Xcode 侧边栏中单击您的项目名称。然后单击您的目标，并在“摘要”选项卡中找到链接框架和库的列表。单击此列表下方的加号按钮，然后添加 QuartzCore。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:22:10.263

你需要 QuartzCore 框架。将其添加到您的项目中（通过项目设置的“链接二进制”构建阶段）。添加`#import <QuartzCore/QuartzCore.h>`到项目的前缀标头（通常是`Prefix.pch`或`{ProjectName}-Prefix.pch`）。这应该可以在不删除此库的情况下解决问题。

# c++ - 移动头文件中的函数以获得干净的排序

> ID：10817052
> 
> 赞同：1
> 
> 时间：2012-05-30T13:13:59.510
> 
> 标签：c++, coding-style, semantics

我正在从事一个大型项目，并且随着时间的推移，一些标头正在增长。我想把头文件中的函数按正确的顺序排列，以保持语义干净。

我可以复制和粘贴它们，但我更喜欢在不同的视图中上下拖动它们（没有评论）。可能是您知道一种可以轻松订购此类东西的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:28:30.617

满足您所有排序需求的答案是`sort`.

您的声明通常看起来像

```
type1 SomeName::fun();
type2 funtastic(); 
```

`sort`您可以选择用于比较的列。如果您想使用函数名称或类进行排序，在上面的示例中将是第 2 列。

```
$ sort -k2 header.h > sorted_header.h 
```

也许您的编辑器可以选择在某些选定的行上运行外部命令。这将使事情更加集成。

# algorithm - “追随者”算法

> ID：10817053
> 
> 赞同：2
> 
> 时间：2012-05-30T13:14:01.920
> 
> 标签：algorithm, language-agnostic, recommendation-engine, graph-algorithm

我想让用户能够查看他们可能会感兴趣并可能关注他们的一些个性化用户......

我是这样想的：

```
- Get all users he is currently following
- Get all followers that they follow
- rank them by total posts they made (DESC), filled up personal information fields
- show 5 of them on each page load 
```

如果用户有关注者，则会出现一条信息消息...

这种算法可以完成这种功能，还是有更好甚至更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T06:20:37.923

在您的算法中，我想知道为什么您需要根据帖子数量对用户进行排序，也许这与声誉有关？

推荐确实是一个非常大的、开放的话题，也是一个热门的学术研究领域。如果我们在做一个实际的项目，我认为保持简单和专注会很好。

我在一个非常受欢迎的社交网站上目睹了以下两种推荐。根据我的经验，推荐输出质量很高。在这里，我正在集思广益背后的算法。希望能帮助到你。

1.  发现您可能认识的人：推荐“关注集”与您的“关注集”相交的人。它基于社交网络的“集群效应”：你朋友的朋友更有可能成为你的朋友。

2.  根据兴趣推荐人：如果用户可以是名人、公司、机构、新闻媒体等，那么像下面这样的推荐可能会有用：“关注@Linus 的人也关注@Stallman、@LinuxDeveloper，...”。假设你刚刚关注了@Linus，要推荐@Stallman、@LinuxDeveloper，首先我们需要找出所有关注@Linus 的用户，然后找出他们的常见关注列表，可能按关注者数量排名。这个想法是根据兴趣相关性推荐用户。我们计算并发现高相关性用户，假设用户的关注列表按他们的兴趣分组。

（我也在想，算法 1 会发现与你有共同兴趣的人，如果用户可能是名人等。这在某些情况下可能是首选。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T16:20:16.510

您在这里提出了一个非常开放的问题 - 如何从大量建议中挑选出少量建议。所以答案是——你可以让它变得像你想要的那样简单或复杂！最简单的方法是随机选择一些（任何更复杂的算法最好证明它产生比这更好的结果。）你收集两跳之外的所有用户，然后按帖子数排名的解决方案就是稍微复杂一点，然后在另一个极端是世界上亚马逊和谷歌使用的复杂算法。公司付出了很多努力来打造这种东西——你听说过[Netflix Prize](http://www.netflixprize.com/)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:21:05.350

据我了解，您想要关注可以提供有关您的 Thema 的高质量信息的用户。我们需要一个算法来将此用户作为结果提供给我们，但是我如何找到这些用户：拥有很多关注者的用户是一个不错的选择但并非总是有许多 Twitter 用户关注其他用户只是出于尊重或礼仪。与其他用户多次转发的用户和被其他用户多次提及的用户是一个不错的选择。我认为，要找到这些用户，我们应该使用基于链接的分析，例如 HITS 或页面排名算法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T21:59:38.527

您可能要考虑不包括关注给定用户的人。我想可能对你不那么感兴趣，这可能是有问题的。但是，您可能非常有兴趣找到更多关于关注的人的信息。

您是否正在考虑向用户展示这些人被推荐给他们的原因？例如，说喜欢你可能会对小比利说的话感兴趣，因为他和你妻子有联系。如果是这样，为了潜在地避免激怒用户，允许他们在某种意义上选择退出可能是值得的。

似乎除此之外，这似乎是推荐某人感兴趣的用户的一种很好的方式。我能想到的唯一其他事情也可能有助于找到具有相似兴趣的人，如果您允许用户标记帖子。允许您通过相似的兴趣或他们发布的内容来查找用户。

您可以研究的另一件更有问题的事情是寻找具有相似兴趣的用户。例如，如果人 a 关注人 c，人 b 关注人 c，那么可能会将人 a 推荐给人 b。尽管如果您不小心，这似乎会导致一些非常冗长的查询。

# javascript - 如何在网站加载时自动点击链接

> ID：10817056
> 
> 赞同：1
> 
> 时间：2012-05-30T13:14:20.170
> 
> 标签：javascript, jquery

我试图弄清楚如何在访问网站时点击锚链接。如果有人可以帮助我，我将不胜感激，这是一个演示代码，您可以匹配 id 以方便我谢谢。

```
<body>
<a id='deepakkamat' href='http://mywebpage.com'> This is my webpage </a>
</body> 
```

所以我想知道任何 JavaScript 代码以在页面加载时点击链接。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:16:07.283

页面加载时使用元标记重定向到另一个页面：

```
<meta http-equiv="refresh" content="2;url=http://www.example.com/" /> 
```

`2`重定向发生前的秒数在哪里。

这将比编写 JavaScript 来单击链接更可靠、更直接。让我知道它是如何为您工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:20:25.857

jQuery 答案：

```
$($('#deepakkamat').click()); 
```

这实际上会将点击事件注册为原因，但这似乎非常不必要。元方法是首选方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:19:52.597

当您尝试归档重定向时，请使用`document.location.href = "http://mywebpage.com"`（或前面提到的元标记）。

还有一个`click`方法可用，这样你就可以运行

```
document.getElementById("deepakkamat").click()​​​;​ 
```

# performance - 在 Mathematica 中的其他列表上生成具有基于元素的条件的列表

> ID：10817060
> 
> 赞同：0
> 
> 时间：2012-05-30T13:14:36.787
> 
> 标签：performance, wolfram-mathematica

我想计算一个二维数组“tocalc”，其中的元素是根据对其他三个列表（z、b1、b2）的测试来计算的。

```
(*example data*)
z = Range[0, 100, 10];
x = Range[10];
b1 = ConstantArray[0., Length[x]];
tocalc = ConstantArray[0, {Length[x], Length[z]}];
b2 = {0, 20, 30, 40, 50, 40, 30, 20, 10, 0}; 
```

一个解决方案是

```
(*simple but slow solution*)
Do[
 Do[
   If[z[[k]] <= b2[[i]] && z[[k]] >= b1[[i]], 
    tocalc[[i, k]] = (b2[[i + 1]] - b2[[i - 1]])],
   {k, 1, Length[z]}];,
 {i, 2, Length[x] - 1}] 
```

结果

```
{{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {30, 30, 30, 0, 0, 0, 0, 0, 0, 0, 
  0}, {20, 20, 20, 20, 0, 0, 0, 0, 0, 0, 0}, {20, 20, 20, 20, 20, 0, 
  0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
  0}, {-20, -20, -20, -20, -20, 0, 0, 0, 0, 0, 
  0}, {-20, -20, -20, -20, 0, 0, 0, 0, 0, 0, 0}, {-20, -20, -20, 0, 0,
   0, 0, 0, 0, 0, 0}, {-20, -20, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {0, 0, 0,
   0, 0, 0, 0, 0, 0, 0, 0}} 
```

**问题：如何在 Mathematica 中有效地做到这一点？**

如果评估 10000 次，则需要 3.66 秒。而在 Matlab 中，这需要 0.04 秒，所以 Matlab 快了近 100 倍。我知道使用两个 Do 循环的解决方案对于 Mathematica 来说并不完美，因此我尝试了其他几种解决方案，例如 MapIndexed、Table、函数、条件等。但是这两个 Do 循环并不是真的更快，甚至可能更慢。这是 MapIndexed 的一个示例：

```
tocalc = ConstantArray[0, {Length[x], Length[z]}];
MapIndexed[
  If[z[[Part[#2, 2]]] <= b2[[Part[#2, 1]]] && 
     z[[Part[#2, 2]]] >= b1[[Part[#2, 1]]] && Part[#2, 1] >= 2 && 
     Part[#2, 1] <= Length[x] - 1, 
    tocalc[[Part[#2, 1], Part[#2, 2]]] = (b2[[Part[#2, 1] + 1]] - 
       b2[[Part[#2, 1] - 1]]), 0.] &, tocalc, {2}]; 
```

理想的解决方案应该适用于更大的矩阵和实数以及更复杂的条件。

- -编辑：

因为它看起来一些解决方案在我的实际问题中甚至更慢，这里是它的一个例子：

**现实世界的问题**

```
b2 = {0.`, 0.`, 0.`, 990.3440201085594`, 1525.7589030785484`, 
   1897.6531659202747`, 2191.6073263357594`, 2433.0441988616717`, 
   2630.6658409463894`, 2799.347578394955`, 2944.656306810331`, 
   3070.718467691769`, 3179.485627984329`, 3272.3788096129415`, 
   3346.199103579602`, 3405.384848015466`, 3346.199103579602`, 
   3272.3788096129415`, 3179.485627984329`, 3070.718467691769`, 
   2944.656306810331`, 2799.347578394955`, 2630.6658409463894`, 
   2433.0441988616717`, 2191.6073263357594`, 1897.6531659202747`, 
   1525.7589030785484`, 990.3440201085594`, 0.`, 0.`, 0.`};
z = {0.`, 250.`, 500.`, 750.`, 1000.`, 1250.`, 1500.`, 1750.`, 2000.`,
   2250.`, 2500.`, 2750.`, 3000.`, 3250.`, 
  3500.`}; (*z(k)*)
imax = 31; (*number of x(i)*)
b1 = ConstantArray[0., imax]; (*lower boundary, can be different form 0*)
deltax = 50000.`;
mmax = 10000.; (*number of calculations*)
A00 = 1.127190283243198`*^-12; (*somefactor*)
n = 3; 
```

一种解决方案：

```
f2C = Compile[{{b2, _Real, 1}, {z, _Real, 1}, {b1, _Real, 1}},
   With[{zeros = {ConstantArray[0., Length[z]]}},
    Join[zeros, 
     Table[If[
       b1[[i]] <= z[[k]] <= 
        b2[[i]], -(A00*(Abs[(b2[[i + 1]] - b2[[i - 1]])/(2.0*
                 deltax)])^(n - 
              1.0)*(b2[[i]]^(n + 1.) - (b2[[i]] - z[[k]])^(n + 
                1.)))*((b2[[i + 1]] - b2[[i - 1]])/(2.0*deltax))
       , 0.],
      {i, 2, Length[b2] - 1}, {k, Length[z]}
      ], zeros]]
   , CompilationTarget -> "C"]; 
```

结果是

```
Timing[Do[f2C[b2, z, b1];, {mmax}]]
Out[85]= {81.3544, Null} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:45:31.483

您可以执行以下操作。不过，您需要弄清楚如何处理边界（其中未定义 b2[[i+1]] 或 b2[[i-1]]）。

```
f[x_, y_] := If[x[[1]] <= y <= x[[2]], x[[4]] - x[[3]], 0] 
```

在这里，我限制了 Outer 的水平，这样我就不需要改变头部（就像我在原始响应中所做的那样）。

```
In[1309]:= Outer[f, 
 Transpose[{b1, b2, RotateRight[b2], RotateLeft[b2]}], z, 1]

Out[1309]= {{20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {30, 30, 30, 0, 0, 0, 
  0, 0, 0, 0, 0}, {20, 20, 20, 20, 0, 0, 0, 0, 0, 0, 0}, {20, 20, 20, 
  20, 20, 0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
  0}, {-20, -20, -20, -20, -20, 0, 0, 0, 0, 0, 
  0}, {-20, -20, -20, -20, 0, 0, 0, 0, 0, 0, 0}, {-20, -20, -20, 0, 0,
   0, 0, 0, 0, 0, 0}, {-20, -20, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {-10, 0, 
  0, 0, 0, 0, 0, 0, 0, 0, 0}} 
```

速度检查：

```
In[1298]:= Timing[
 Do[Outer[f, 
   Apply[list, 
    Transpose[{b1, b2, RotateRight[b2], RotateLeft[b2]}], {1}], 
   z], {10^4}]]

Out[1298]= {2.68, Null} 
```

我们可以编译该函数以获得更好的速度。

```
fC = Compile[{{x, _Integer, 1}, {y, _Integer}}, 
   If[x[[1]] <= y <= x[[2]], x[[4]] - x[[3]], 0]];

In[1306]:= Timing[
 Do[Outer[fC, Transpose[{b1, b2, RotateRight[b2], RotateLeft[b2]}], z,
    1], {10^4}]]

Out[1306]= {0.8, Null} 
```

- - 编辑 - -

变体包括编译整个例程。这是一个这样的。

```
ff = Compile[{{b1, _Integer, 1}, {b2, _Integer, 1}, {z, _Integer, 
     1}},
   With[{lc = 
      RotateRight[ListConvolve[{1, 0, -1}, b2, {-1, -1}, 0]]},
    Table[
     If[b1[[i]] <= z[[k]] <= b2[[i]], lc[[i]], 0], {i, 
      Length[b2]}, {k, Length[z]}
     ]]];
In[385]:= Timing[Do[ff[b1, b2, z], {10^4}]]

Out[385]= {0.24, Null} 
```

如果我添加`CompilationTarget -> "C"`，那么它的速度会快两倍。

另一个变体，在 C 代码中，不到 0.1 秒。

```
In[441]:= 
ff2C = Compile[{{b1, _Integer, 1}, {b2, _Integer, 1}, {z, _Integer, 
     1}},
   With[{zeros = {ConstantArray[0, Length[z]]}},
    Join[zeros, Table[
      If[b1[[i]] <= z[[k]] <= b2[[i]], b2[[i + 1]] - b2[[i - 1]], 
       0], {i, 2, Length[b2] - 1}, {k, Length[z]}
      ], zeros]], CompilationTarget -> "C"];

In[442]:= Timing[Do[ff2C[b1, b2, z], {10^4}]]

Out[442]= {0.04, Null}

In[443]:= ff2C[b1, b2, z]

Out[443]= {{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {30, 30, 30, 0, 0, 0, 0,
   0, 0, 0, 0}, {20, 20, 20, 20, 0, 0, 0, 0, 0, 0, 0}, {20, 20, 20, 
  20, 20, 0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
  0}, {-20, -20, -20, -20, -20, 0, 0, 0, 0, 0, 
  0}, {-20, -20, -20, -20, 0, 0, 0, 0, 0, 0, 0}, {-20, -20, -20, 0, 0,
   0, 0, 0, 0, 0, 0}, {-20, -20, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {0, 0, 0,
   0, 0, 0, 0, 0, 0, 0, 0}} 
```

我猜有些变种可能会更快。

--- 结束编辑 ---

--- 编辑 2 ---

当然，如果您有全局变量（即在您的编译之外定义），那么还有更多工作要做。我知道两种可能性。在版本 8 之前，人们会在 Compile 周围使用 With[] 来吸收常量，如下所示。

f2C = With[{n = n, deltax = deltax, A00 = A00}, 编译[{{b2, _Real, 1}, {z, _Real, 1}, {b1, _Real, 1}}, With[{zeros = {ConstantArray[0., Length[z]]}}, Join[zeros, Table[If[ b1[[i]] <= z[[k]] <= b2[[i]], -(A00* (Abs[(b2[[i + 1]] - b2[[i - 1]])/(2.0* deltax)])^(n - 1.0) *(b2[[i]]^(n + 1.) - (b2[[i]] - z[[k]])^(n + 1.)))* ((b2[[i + 1]] - b2[[i - 1]])/(2.0*deltax )), 0.], {i, 2, Length[b2] - 1}, {k, Length[z]}], zeros]], CompilationTarget -> "C"]];

在版本 8 中，以下实现了相同的效果。

f2Cb = 编译[{{b2, _Real, 1}, {z, _Real, 1}, {b1, _Real, 1}}, With[{zeros = {ConstantArray[0., Length[z]]}}, 加入[零，表[If[ b1[[i]] <= z[[k]] <= b2[[i]], -(A00*(Abs[(b2[[i + 1]] - b2[[ i - 1]])/(2.0* deltax)])^(n - 1.0) *(b2[[i]]^(n + 1.) - (b2[[i]] - z[[k]]) ^(n + 1.)))* ((b2[[i + 1]] - b2[[i - 1]])/(2.0*deltax)), 0.], {i, 2, Length[b2] - 1}, {k, Length[z]}], zeros]], CompilationTarget -> "C", CompilationOptions -> {"InlineExternalDefinitions" -> True}];

无论使用哪种方法，我都会在大约 0.7 秒内得到更实际示例的结果，而我的机器将花费 100 多秒，而这些全局变量在 Compile.

A more general approach might be to pass them as parameters (if they were likely to change rather than be constants). That would lead to a slightly slower run time though.

Regarding that option approach, you might have a look at ref/CompilationOptions in the Cocumentation Center

--- end edit 2 ---

# ios5 - 如何在 ViewController 中使用 Facebook 实例？

> ID：10817064
> 
> 赞同：1
> 
> 时间：2012-05-30T13:14:47.717
> 
> 标签：ios5, facebook-ios-sdk

我在开发带有 Facebook SDK 集成的 iOS 5 应用程序时遇到了麻烦。我的应用程序有许多 ViewsController，对于每个 ViewsController，我想使用不同的请求从 Facebook 获取不同的数据（当然）。目前我只能在 AppDelegate 上获取数据（按照官方教程），但我需要在视图控制器中获取数据。我尝试了 2 个选项：1）在每个 ViewController 上实例化不同的 Facebook 实例 - 它不起作用，我不知道为什么，但似乎

`- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation;` 从未被调用

2 在 AppDelegate 中实例化 Facebook 实例，然后在 ViewControllers 中使用该实例 - 它不起作用，因为使用此代码（在此处找到：[如何在多个 IOS 视图类中持久化 Facebook 实例？](https://stackoverflow.com/questions/5454857/how-do-i-persist-a-facebook-instance-in-multiple-ios-view-classes)）

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    Facebook *facebook = [appDelegate facebook];
} 
```

脸书是零。

哪种工作方式才是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:57:53.547

（如果您在此之后给我更多反馈，我将编辑我的答案。）

我没有大量使用 Facebook SDK，但我记得我尝试过时遇到了这个问题。

`- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation`实现应该在您的应用委托中

如果您只需要在一个 viewController 中访问您的 Facebook 实例（比如说 MyFacebooViewController）

你可以有这样的东西

```
#import <UIKit/UIKit.h>
#import "FBConnect.h"

@interface MyFacebookViewController : UIViewController <FBSessonDelegate, FBRequestDelegate>
@property (nonatomic, strong) Facebook *facebook;
...
@end 
```

你的 .m 文件应该包含这个

```
#import "MyFacebookViewController.h"
#import "MyAppDelegate.h"

@implementation MyFacebookViewController

@synthesize facebook = _facebook;

-(Facebook *)facebook
{
    if(!_facebook){
        _facebook = [[Facebook alloc] initWithAppId:MY_APP_ID andDelegate:self];
    }
    return _facebook;
}

-(void)viewDidLoad
{
    [super viewDidLoad];
    ((MyAppDelegate *)([[UIApplication sharedApplication] delegate])).facebookViewController = self;
    ...
} 
```

当然你需要实现你的 FBSessionDelegate 和 FBRequestDelegate 方法

在 AppDelegate 中：

```
#import <UIKit/UIKit.h>
#import "MyFacebookViewController.h"

@interface MyAppDelegate : UIResponder <UIApplicationDelegate>
...
@property (strong, nonatomic) MyFacebookConnectViewController *facebookViewController;
@end 
```

您需要在实现文件中放置`- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation`

```
@implementation MyAppDelegate

@synthesize facebookViewController = _facebookViewController;
...

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    return [self.facebookViewController.facebook handleOpenURL:url];
} 
```

如果您仍然有问题，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T18:50:36.647

我没有编辑我的答案，因为这是我从未测试过的代码。

如果您想在不同的 viewController 中使用相同的 Facebook 实例，这是一种方法：

正如您的问题中已经提到的，您应该在 appDelegate 中对其进行初始化（我会使用一个属性。）

MyAppDelegate.h：

```
#import <UIKit/UIKit.h>
#import "FBConnect.h"

@interface MyAppDelegate : UIResponder <UIApplicationDelegate>
...
@property (strong, nonatomic) Facebook *facebook;
@end 
```

MyAppDelegate.m：

```
#import "MyAppDelegate.h"

@implementation MyAppDelegate

@synthesize facebook = _facebook;

-(Facebook *)facebook
{
    if(!_facebook){
        _facebook = [Facebook alloc] initWithAppId:MY_APP_ID andDelegate:self];
    }
    return _facebook;
}

-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    return [self.facebook handleOpenURL:url];
} 
```

然后在任何你想要的 ViewController 中，你可以有一个 Facebook 属性，你不会分配/初始化，但你会以这种方式从 appDelegate 询问它

AnyViewController.h：

```
#import "MyAppDelegate.h"

@interface AnyViewController : UIViewController
...
@property (strong, nonatomic) Facebook *facebook;
@end 
```

AnyViewController.m ：

```
#import "AnyViewController.h"

@implementation AnyViewController

@synthesize facebook = _facebook;

-(Facebook *)facebook
{
    if(!_facebook){
        MyAppDelegate *theAppDelegate = (MyAppDelegate *)[[UIApplication sharedApplication] delegate];
        _facebook = theAppDelegate.facebook;
    }
    return _facebook;
} 
```

当然，您将使用的不同 ViewController 应根据您的需要实现不同的 SDK 协议

你应该看看 Facebook 的名为[Hackbook的示例项目](https://github.com/facebook/facebook-ios-sdk/tree/master/sample/Hackbook)

# scala - 如何在 Play 2 Scala 模板中迭代 Java Bean 属性？

> ID：10817065
> 
> 赞同：0
> 
> 时间：2012-05-30T13:14:48.157
> 
> 标签：scala, reflection, playframework, javabeans

假设我有一个 Java bean：

```
class Fruit {
    public String getName(){}
    public String getOrigin(){}
    public int getRipeningTimeInDays(){}
} 
```

还有一个带有水果参数的 Play 2.0 scala 模板

```
@(obj: Object)
@** add code for rendering JavaBeans properties via reflection 
```

我希望能够通过反射呈现所有 Java Bean 的属性。在 scala 中是否有一种简单的方法，或者我应该使用 Apache commons beanutils 等？

# dojo - Dojo Mobile 522.remove 不是函数 - SpinWheelDatePicker 锁定释放事件

> ID：10817075
> 
> 赞同：0
> 
> 时间：2012-05-30T13:15:08.187
> 
> 标签：dojo, ibm-mobilefirst, dojox.mobile

我对 dojo 很陌生（这是我关于 stackoverflow 的第一个问题，所以放轻松:)）。我正在工作中从事一个新项目，并被要求调查 dojo mobile。以下代码的目的只是为了测试 dojo mobile 在一个简单的 html 页面中提供的不同可用小部件。

我遇到了以下问题，当我在浏览器中运行此代码或将其部署到移动设备时，似乎在单击鼠标或在触摸屏上释放后应该触发的释放事件存在问题，需要注意是这仅发生在涉及拖动对象的小部件上。例如，按钮和标签栏工作正常。这仅适用于 SpinWheelDatePicker/SpinWheelTimePicker、滑块、开关等。在开发人员控制台中，我收到以下错误

在 Chrome 中：

```
Uncaught TypeError: Object #<klass> has no method 'remove' dojo.js:17 
_51d.disconnect dojo.js:17 
_a.onTouchEnd libs/dojo/dojox/mobile/scrollable.js:401 
_3e6 dojo.js:17 
Event.Handler.Class.create.handleEvent prototype.js:5767 
__method prototype.js:396 
responder 
```

在火狐中：

```
522.remove is not a function 
[Break On This Error] 

... function(){return _2f4.apply(window,arguments)&&_2f5.apply(window,arguments);};... 

dojo.js (line 17)( 
```

我正在使用 1.7.2 工具包，并且该项目被部署到工作灯服务器上。

这是代码：

```
<!DOCTYPE html "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
        <meta name="apple-mobile-web-app-capable" content="yes"/>

        <title>Android DOJO Test</title>

        <link rel="shortcut icon" href="images/favicon.png" />
        <link rel="apple-touch-icon" href="images/apple-touch-icon.png" />  

        <link type="text/css" rel="Stylesheet" href="css/blackbird/blackbird.css" />
        <link rel="stylesheet" href="libs/dojo/dojox/mobile/themes/android/android.css" />
        <link rel="stylesheet" href="libs/dojo/dojox/mobile/themes/common/SpinWheel.css" >
        <!-- <link rel="stylesheet" href="libs/dojo/dojox/mobile/themes/iphone/iphone.css" type="text/css" media="screen" title="no title" /> -->
        <script type="text/javascript" src="libs/blackbird/blackbird.js"></script>
        <script type="text/javascript" src="libs/dojo/dojo/dojo.js" data-dojo-config="async:true, parseOnLoad:true, mblAlwaysHideAddressBar:true"></script> 

        <script src="js/Test.js"></script>
        <script src="js/messages.js"></script>
        <script src="js/auth.js"></script>

        <script type="text/javascript">

           var jsonData = {
                    items:[
                    { src: "images/4242373_460s.jpg"},
                    { src: "images/4242618_460s.jpg"},
                    { src: "images/4242864_460s.jpg"},
                    { src: "images/icon.png"},
                    { src: "images/thumbnail.png"}
                ]
            };

            log.info('Attempting to load dojo libraries');

            require(["dojox/mobile/parser",
                     "dojo/data/ItemFileReadStore",
                     "dojox/mobile/deviceTheme", 
                     "dojox/mobile/compat",
                     "dojox/mobile",
                     "dojox/mobile/Carousel",
                     "dojox/mobile/Button",
                     "dojox/mobile/TabBar",
                     "dojox/mobile/ScrollableView",
                     "dojox/mobile/PageIndicator",
                     "dojox/mobile/SwapView",
                     "dojox/mobile/CheckBox",
                     "dojox/mobile/ToggleButton",
                     "dojox/mobile/TextBox",
                     "dojox/mobile/Switch",
                     "dojox/mobile/Slider", 
                     "dojox/mobile/RadioButton",
                     "dojox/mobile/SpinWheelDatePicker",
                     "dojox/mobile/SpinWheelTimePicker",
                     "dojox/mobile/Overlay",
                     "dojox/gauges/GlossyCircularGauge",
                     "dojox/gauges/GlossyHorizontalGauge",
                     "dojox/gauges/GlossySemiCircularGauge",
                     "dojo/on",
                     "dojo/domReady!"
                     ],
                     function(store, mobile, parser) {
                log.info('Dojo libraries loaded succesfully');
            });

            function setTabBar(to){
                if(to!=null){
                    var selectedTab = dijit.byId(to);
                    selectedTab.select();
                }
                else{
                    log.error('From or To parameter/s are empty or not a string value');
                    return; 
                }   
            }

         </script> 

    </head>
    <body onload="WL.Client.init({})" id="content" style="display: none">

            <h1 data-dojo-type="dojox.mobile.Heading">DOJO TEST APP</h1>
            <ul data-dojo-type="dojox.mobile.TabBar" id="mainTabBar">
                    <li data-dojo-type="dojox.mobile.TabBarButton" id="homeBar"     icon1="images/Aqua-Ball-Red-icon.png"       moveTo="mainView"           >Home</li>
                    <li data-dojo-type="dojox.mobile.TabBarButton" id="fadeBar"     icon1="images/Button-Blank-Green-icon.png"  moveTo="fadeView"           >Fade</li>
                    <li data-dojo-type="dojox.mobile.TabBarButton" id="slideBar"    icon1="images/Aqua-Ball-Red-icon.png"       moveTo="slideView"          >Slide</li>
                    <li data-dojo-type="dojox.mobile.TabBarButton" id="swapBar"     icon1="images/Button-Blank-Green-icon.png"  moveTo="swapViewExample"    >Swap View</li>
                    <li data-dojo-type="dojox.mobile.TabBarButton" id="formBar"     icon1="images/Aqua-Ball-Red-icon.png"       moveTo="formButtons"        >Form Buttons</li>
                    <li data-dojo-type="dojox.mobile.TabBarButton" id="carouselBar" icon1="images/Button-Blank-Green-icon.png"  moveTo="carouselView"       >Carousel</li>
                    <li data-dojo-type="dojox.mobile.TabBarButton" id="pickerBar"   icon1="images/Aqua-Ball-Red-icon.png"       moveTo="pickerView"         >Picker</li>
                    <li data-dojo-type="dojox.mobile.TabBarButton" id="overlayBar"  icon1="images/Button-Blank-Green-icon.png"  moveTo="overlayView"        >Overlay</li>
                    <li data-dojo-type="dojox.mobile.TabBarButton" id="gaugesBar"   icon1="images/Aqua-Ball-Red-icon.png"       moveTo="gaugeView"          >Gauges</li>
             </ul>

            <div data-dojo-type="dojox.mobile.View" id="mainView" selected ="true"> 
                <ul data-dojo-type="dojox.mobile.RoundRectList">
                    <li data-dojo-type="dojox.mobile.ListItem" moveTo="fadeView"        transition="fade"       onClick = "setTabBar('fadeBar');"       >Fade</li>
                    <li data-dojo-type="dojox.mobile.ListItem" moveTo="slideView"       transition="slide"      onClick = "setTabBar('slideBar');"      >Slide</li>
                    <li data-dojo-type="dojox.mobile.ListItem" moveTo="swapViewExample" transition="scaleIn"    onClick = "setTabBar('swapBar');"       >Swap View</li>
                    <li data-dojo-type="dojox.mobile.ListItem" moveTo="formButtons"     transition="scaleOut"   onClick = "setTabBar('formBar');"       >Form Buttons</li>
                    <li data-dojo-type="dojox.mobile.ListItem" moveTo="carouselView"    transition="swirl"      onClick = "setTabBar('carouselBar');"   >Carousel</li>
                    <li data-dojo-type="dojox.mobile.ListItem" moveTo="pickerView"      transition="flip"       onClick = "setTabBar('pickerBar');"     >Picker Examples</li>
                    <li data-dojo-type="dojox.mobile.ListItem" moveTo="overlayView"     transition="zoomOut"    onClick = "setTabBar('overlayBar');"    >Overlay Eaxmples</li>
                    <li data-dojo-type="dojox.mobile.ListItem" moveTo="gaugeView"       transition="zoomOut"    onClick = "setTabBar('gaugesBar');"     >Gauges</li>
                </ul>           
            </div>

            <div data-dojo-type="dojox.mobile.View" id="fadeView">
                <h2 data-dojo-type="dojox.mobile.RoundRectCategory">Fade View</h2>
            </div>

            <div data-dojo-type="dojox.mobile.View" id="slideView">
                <h2 data-dojo-type="dojox.mobile.RoundRectCategory">Slide View</h2>
            </div>  

            <div data-dojo-type="dojox.mobile.View" id="swapViewExample">

                  <div data-dojo-type="dojox.mobile.View" selected="true">

                      <div data-dojo-type="dojox.mobile.SwapView">
                        <div>
                            <h2 data-dojo-type="dojox.mobile.RoundRectCategory">Swap View Page 1</h2>
                            <img src="images/4242373_460s.jpg">
                        </div>
                      </div>

                      <div data-dojo-type="dojox.mobile.SwapView">
                        <div>
                            <h2 data-dojo-type="dojox.mobile.RoundRectCategory">Swap View Page 2</h2>
                            <img src="images/4242618_460s.jpg">
                        </div>
                      </div>

                      <div data-dojo-type="dojox.mobile.SwapView">
                        <div>
                            <h2 data-dojo-type="dojox.mobile.RoundRectCategory">Swap View Page 3</h2>
                            <img src="images/4242864_460s.jpg">
                        </div>
                      </div>
                  </div>  

                  <div data-dojo-type="dojox.mobile.PageIndicator" fixed="bottom"></div>
            </div>

            <div data-dojo-type="dojox.mobile.View" id="formButtons">   

                  <ul data-dojo-type="dojox.mobile.RoundRectList" shadow="true">
                    <span>Button</span><br> 
                        <div align="right"><button data-dojo-type="dojox.mobile.Button" data-dojo-props='label:"Click me!", onClick:function(e){ alert("button clicked");return true; }'></button></div>
                  </ul>

                    <ul data-dojo-type="dojox.mobile.RoundRectList" shadow="true">
                    <span>CheckBox</span><br> 
                        <div align="right"><input data-dojo-type="dojox.mobile.CheckBox" type="checkbox" data-dojo-props='onChange:function(checked){ alert("checked state changed to " + checked); },checked:true' /></div>
                     </ul>      

                    <ul data-dojo-type="dojox.mobile.RoundRectList" shadow="true">
                    <span>Radio Button</span><br> 
                         <div align="right"><input type="radio" data-dojo-type="dojox.mobile.RadioButton" checked="true"  name="radioGroup" value="yes" /><input type="radio" data-dojo-type="dojox.mobile.RadioButton" checked="false" name="radioGroup" value="no" /></div>
                     </ul>      

                    <ul data-dojo-type="dojox.mobile.RoundRectList" shadow="true">
                    <span>Slider</span><br> 
                        <div align="right"><input type="range" style="width:200px;" data-dojo-type="dojox.mobile.Slider" value="10" max="20" /></div>
                     </ul>      

                    <ul data-dojo-type="dojox.mobile.RoundRectList" shadow="true">
                    <span>Switch</span><br> 
                        <div align="right"><div data-dojo-type="dojox.mobile.Switch" align="right"></div></div>
                     </ul>  

                    <ul data-dojo-type="dojox.mobile.RoundRectList" shadow="true">
                    <span>Toggle Button</span><br> 
                        <div align="right"><button data-dojo-type="dojox.mobile.ToggleButton" checked="true">Toggle me</button></div>
                    </ul>         
            </div>  

            <div data-dojo-type="dojox.mobile.View" id="carouselView">
                <div data-dojo-type="dojox.mobile.ScrollableView" >
                    <span data-dojo-type="dojo.data.ItemFileReadStore" id="store1" data-dojo-props="data:jsonData"></span> 
                    <div id="carousel1" data-dojo-type="dojox.mobile.Carousel" store = "dijit.registry.byId('store1')" data-dojo-props="height:'500px', navButton:'true' , numVisible:2, title:'Photo Gallery'"></div>
               </div>
            </div>  

            <div data-dojo-type="dojox.mobile.View" id="pickerView">              
                  <h2  data-dojo-type="dojox.mobile.Heading">Date Picker</h2>
                    <div align="center"><div id="spin1" data-dojo-type="dojox.mobile.SpinWheelDatePicker" align="center"></div></div>

                  <h2  data-dojo-type="dojox.mobile.Heading">Time Picker</h2>
                    <div align="center"><div id="spin2" data-dojo-type="dojox.mobile.SpinWheelTimePicker" align="center"></div></div>
            </div>

            <div data-dojo-type="dojox.mobile.View" id="overlayView">
                <div align="center"><button data-dojo-type="dojox.mobile.Button" onClick="dijit.registry.byId('customPicker').show()" data-dojo-props='label:"Select date"'></button></div>
                  <div id="customPicker" data-dojo-type="dojox.mobile.Overlay">         

                    <h1 data-dojo-type="dojox.mobile.Heading" label="Custom Picker">
                        <div data-dojo-type="dojox.mobile.ToolBarButton" label="Done" class="mblColorBlue" style="width:45px;float:right;" onClick="dijit.registry.byId('customPicker').hide()"></div>
                    </h1>
                    <div id="spin3" data-dojo-type="dojox.mobile.SpinWheelDatePicker"></div>                    
                  </div>    
           </div>

             <div data-dojo-type="dojox.mobile.View" id="gaugeView">
                <div data-dojo-type="dojox.mobile.View" id="gaugeMainView">
                <div align="center"><h2 data-dojo-type="dojox.mobile.Heading">Guages</h2></div>
                    <ul data-dojo-type="dojox.mobile.RoundRectList">
                        <li data-dojo-type="dojox.mobile.ListItem" moveTo="glossyCircView"      transition="fade"  onClick = >Glossy Circular</li>
                        <li data-dojo-type="dojox.mobile.ListItem" moveTo="glossySemiView"      transition="slide" onClick = >Glossy Semi Circular</li>
                        <li data-dojo-type="dojox.mobile.ListItem" moveTo="glossyHorView"       transition="scaleIn" onClick = >Glossy Horizontal</li>
                        <li data-dojo-type="dojox.mobile.ListItem" moveTo="simpleAnalog"        transition="scaleOut" onClick = >Simple Analog Gauges</li>
                    </ul>   
                </div>
                <div data-dojo-type="dojox.mobile.View" id="glossyCircView">
                    <h1 data-dojo-type="dojox.mobile.Heading" back="Gauge View" moveTo="gaugeMainView" onClick="console.log('Going back');">Glossy Circular</h1>
                        <div align="center"><div id="CircularGauge" background='{color : "rgba(0,0,0,0)"}'useTooltip='false'  data-dojo-type='dojox.gauges.GlossyCircularGauge' width='200' height='200' value='20'></div></div>
                </div>

                <div data-dojo-type="dojox.mobile.View" id="glossySemiView">
                    <h1 data-dojo-type="dojox.mobile.Heading" back="Gauge View" moveTo="gaugeMainView" onClick="console.log('Going back');">Glossy Semi Circular</h1>
                        <div align="center"><div id="CircularGauge1" background='{color : "rgba(0,0,0,0)"}'useTooltip='false'  data-dojo-type='dojox.gauges.GlossySemiCircularGauge' width='200' height='200' value='20'></div></div>
                </div>

                <div data-dojo-type="dojox.mobile.View" id="glossyHorView">
                    <h1 data-dojo-type="dojox.mobile.Heading" back="Gauge View" moveTo="gaugeMainView" onClick="console.log('Going back');">Glossy Horizontal</h1>
                        <div align="center"><div id="CircularGauge2" background='{color : "rgba(0,0,0,0)"}'useTooltip='false'  data-dojo-type='dojox.gauges.GlossyHorizontalGauge' width='400' height='30' value='20'></div></div>
                </div>

                <div data-dojo-type="dojox.mobile.View" id="simpleAnalog">
                    <h1 data-dojo-type="dojox.mobile.Heading" back="Gauge View" moveTo="gaugeMainView" onClick="console.log('Going back');">Simple Analog Gauges</h1>

                </div>
            </div> 
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:35:24.190

我认为您遇到了 Worklight JavaScript 库（更具体地说是prototype.js）和 Dojo 之间的已知不兼容问题。

您的确切问题是prototype.js为所有元素添加了一个“on”方法，但不幸的是，这个方法与Dojo期望的不兼容（Dojo希望'on'返回一个带有remove（）方法的对象，而prototype.js返回一个带有 stop() 方法的对象）。

作为一种解决方法，请尝试将以下脚本添加到您的页面：

```
 <script type="text/javascript">
        // Fix incompatibility between Prototype and Dojo
        Event.Handler.prototype.remove = function(){
            this.stop();
        };
    </script> 
```

您必须在 Worklight 将插入prototype.js 的位置之后添加它，在您的页面中，我会说auth.js 和您的主脚本之间应该是正确的位置。

# apache - 将具有某个 url 的页面重写到另一个 htaccess

> ID：10817077
> 
> 赞同：0
> 
> 时间：2012-05-30T13:15:09.527
> 
> 标签：apache, .htaccess

我需要做的是将 url 从一件事重写为另一件事，例如：

```
http://www.domain.com/page_one/blah //to
http://www.domain.com/page_two/blah
```

我尝试了一些我在互联网上找到的脚本，但我很糟糕，`.htaccess`永远无法理解或正确理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:22:30.707

如果您只想更改此特定 url，请使用以下**命令：**

```
RewriteEngine On
RewriteRule ^page_one/blah?$ http://www.domain.com/page_two/bla [L] 
```

如果您想将每个文件的 url 更改为“page_one”文件夹，这将帮助您：

```
RewriteEngine On
RewriteRule ^page_one/([^/]+)$ http://www.domain.com/page_two/$1 [L] 
```

激活 RewriteEnigine ，`RewriteEngine On`以便您能够使用 RewriteRules。
第二种`([^/]+)`解决方案中的意思是“每个文件，但没有文件夹（不包括斜线）”。这被存储`$1`并用于创建新的 url。

**编辑**
`[L]`阻止脚本使用其他规则（如果有的话）

# wpf - WPF 数据注释/验证奇怪的行为

> ID：10817080
> 
> 赞同：0
> 
> 时间：2012-05-30T13:15:20.960
> 
> 标签：wpf

我有一个具有以下属性的类，它在我的视图中绑定到一个文本框：

```
[Required(ErrorMessage = "Enter a value!")]
[Range(0, 255, ErrorMessage = "Must be 0-255")]
public byte Register0Value
{
    ...etc... 
```

当我运行应用程序并清空文本框时，它显示错误消息“输入字符串格式不正确”，而不是必需属性中的消息。同样，如果我输入诸如“999”之类的值，我会收到错误消息“对于无符号字节而言，值太大或太小”。

这是预期的行为还是我错过了什么？我可以通过将我的属性更改为可为空的 int 来获得所需的行为，但我不应该这样做吗？

提前致谢

安德鲁

# javascript - 检测滚动完成/结束

> ID：10817088
> 
> 赞同：7
> 
> 时间：2012-05-30T13:15:49.463
> 
> 标签：javascript, jquery, scroll, dom-events

我想检测用户何时停止滚动页面/元素。这可能很棘手，因为最近对 OSX 滚动行为的增强会产生这种新的惯性效应。是否触发了事件？

我能想到的唯一其他解决方案是在页面/元素的滚动位置不再变化时使用间隔来拾取，例如：

```
var element     = $( el );
var previous    = element.scrollLeft();
var current;

element.scroll( function(event)
{
    current = element.scrollLeft();

    if ( current === previous )
    {
        // user has stopped scrolling
    }

    previous    = current;
}); 
```

# android - 自定义数组适配器中未处于编辑模式时的Android锁定复选框

> ID：10817089
> 
> 赞同：2
> 
> 时间：2012-05-30T13:15:50.430
> 
> 标签：android, checkbox, android-arrayadapter, editmode

我有一个活动，它显示可以分配给我的应用程序中的活动事件的复选框（焦点区域）列表。但是，我希望能够阻止用户表单编辑这些值，直到单击按钮将表单置于编辑模式。

有人可以解释或提供代码示例如何将其实现到我的应用程序中吗？

此列表保存在 ListView 中，其中包含我为我的应用程序创建的类 FocusArea 的自定义 ArrayAdapter。Activity 的 xml 如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" android:background="@drawable/horizontal_gradient_line_reverse">

    <TextView
        android:id="@+id/textViewCustomerNameNumber"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Customer Name &amp; Number" android:layout_margin="5dp"/>

    <ListView
        android:id="@+id/listViewFocusAreas"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/relativeLayoutControls"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textViewCustomerNameNumber"
        android:layout_margin="5dp"
        android:background="@drawable/myborder" >

    </ListView>

    <RelativeLayout
        android:id="@+id/relativeLayoutControls"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true" >

        <ImageView
            android:id="@+id/imageViewCancelFocusAreaChanges"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/ic_mini_undo" />

        <ImageView
            android:id="@+id/imageViewSaveFocusAreaChanges"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/imageViewCancelFocusAreaChanges"
            android:src="@drawable/ic_mini_save" />

        <ImageView
            android:id="@+id/imageViewEditFocusArea"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/imageViewSaveFocusAreaChanges"
            android:src="@drawable/ic_mini_edit" />

    </RelativeLayout>

    <ImageView
        android:id="@+id/imageViewEditMode"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/textViewCustomerNameNumber"
        android:layout_alignRight="@+id/listViewFocusAreas"
        android:src="@drawable/edit16x16"
        android:visibility="gone" />

</RelativeLayout> 
```

以下是焦点区域行的 xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <CheckBox
        android:id="@+id/checkBoxFocusArea"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Focus Area" />

</LinearLayout> 
```

以下是自定义 ArrayAdapter 的代码：

```
 public class FocusAreaAdapter extends ArrayAdapter<FocusArea> {

    private ArrayList<FocusArea> focusAreas;
    private Context context;

    public FocusAreaAdapter(Context context, int textViewResourceId, ArrayList<FocusArea> focusAreas) {
        super(context, textViewResourceId, focusAreas);
        this.context = context;
        this.focusAreas = focusAreas;
    }

    @Override
    public View getView(final int position, View convertView, final ViewGroup parent) {
        View v = convertView;
        if(v == null) {
            LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.focus_area_menu_item, null);
        }
        FocusArea focusArea = focusAreas.get(position);

        if(focusArea != null) {
            CheckBox cbFocusArea = (CheckBox)v.findViewById(R.id.checkBoxFocusArea);
            cbFocusArea.setText(focusArea.getFocusAreaCodeDescription());
            if(focusArea.isFocusAreaCodeChecked() == 1) {
                cbFocusArea.setChecked(true);
            } else {
                cbFocusArea.setChecked(false);
            }

            cbFocusArea.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    FocusArea focusArea = focusAreas.get(position);
                    if(focusArea.isFocusAreaCodeChecked() == 1) {
                        focusArea.setFocusAreaCodeChecked(0);
                    } else {
                        focusArea.setFocusAreaCodeChecked(1);
                    }
                }
            });
        }       
        return v;
    }
} 
```

最后，我使用以下代码实例化了我的自定义数组适配器：

```
 private void assignFocusAreasToAdapter() {
    // get reference to available responsibles list view control
    lvFocusAreas.clearChoices();

    // create an array adapter with the communications data array
    activityFocusAreaAdapter = new FocusAreaAdapter(this, R.layout.focus_area_menu_item, activityFocusAreas);

    // assign the my customers list control the array adapter
    lvFocusAreas.setAdapter(activityFocusAreaAdapter);
    activityFocusAreaAdapter.notifyDataSetChanged();
    Log.i(TAG, "Available Activity Focus Areas Loaded");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T10:22:28.060

好的，我为可能遇到相同问题的任何人找到了解决此问题的方法。

焦点区域活动的 XML 与上面发布的相同。

焦点区域行项目的 XML 进行了相应的修改：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:descendantFocusability="blocksDescendants" >

    <CheckBox
        android:id="@+id/checkBoxFocusArea"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Focus Area" />

</LinearLayout> 
```

您可以看到现在添加了以下行`android:descendantFocusability="blocksDescendants"`这可以防止复选框 onClickListener 触发，这通常会阻止 ListViews OnItemClickedListener 触发。

修改自定义适配器代码以删除复选框 OnClickListener，如下所示：

```
public class FocusAreaAdapter extends ArrayAdapter<FocusArea> {

    private ArrayList<FocusArea> focusAreas;
    private Context context;

    public FocusAreaAdapter(Context context, int textViewResourceId, ArrayList<FocusArea> focusAreas) {
        super(context, textViewResourceId, focusAreas);
        this.context = context;
        this.focusAreas = focusAreas;
    }

    @Override
    public View getView(final int position, View convertView, final ViewGroup parent) {
        View v = convertView;
        if(v == null) {
            LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.focus_area_menu_item, null);
        }
        FocusArea focusArea = focusAreas.get(position);

        if(focusArea != null) {
            CheckBox cbFocusArea = (CheckBox)v.findViewById(R.id.checkBoxFocusArea);
            cbFocusArea.setText(focusArea.getFocusAreaCodeDescription());
            if(focusArea.isFocusAreaCodeChecked() == 1) {
                cbFocusArea.setChecked(true);
            } else {
                cbFocusArea.setChecked(false);
            }

            cbFocusArea.setClickable(false);            
        }       
        return v;
    }
} 
```

自定义适配器使用与上面发布的相同代码进行实例化，但您必须将 OnItemClickListener 添加到 ListView 并执行 OnItemClickListener click 事件中的复选框的检查，如下所示：

```
 lvFocusAreas = (ListView)findViewById(R.id.listViewFocusAreas);
    lvFocusAreas.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> adapter, View view, int position, long id) {
            if(editMode){
                FocusArea focusArea = (FocusArea)lvFocusAreas.getItemAtPosition(position);
                if(focusArea.isFocusAreaCodeChecked() == 0) {
                    focusArea.setFocusAreaCodeChecked(1);
                } else {
                    focusArea.setFocusAreaCodeChecked(0);
                }
                activityFocusAreaAdapter.notifyDataSetChanged();
                setControlsEnabled();
            }               
        }
    }); 
```

希望这可以帮助任何有同样问题的人。:D

# datagrid - jqGrid：如何从“navButtonAdd”和“delGridRow”中删除行？

> ID：10817090
> 
> 赞同：0
> 
> 时间：2012-05-30T13:15:50.790
> 
> 标签：datagrid, jqgrid, jqgrid-php, delete-row, jqgrid-formatter

我遇到了 jqGrid 数据网格的问题。我需要使用“删除”按钮删除一行或多行。这是我的代码：

```
$grid.navGrid('#pager', { edit: false, add: false, del: false, search: false });
$grid.navButtonAdd('#pager', {
    caption: "Delete",
    buttonicon: "ui-icon-del",
    position: "last",
    onClickButton: function() {
        alert("Deleting Row");
        row_ids = $grid.getGridParam('selarrrow');
        $grid.delGridRow(row_ids, {
            dataType: 'json',
            mtype: 'GET',
            url: '<?php echo $_SERVER['PHP_SELF'].'?app=my_app&action=record_delete'; ?>'
        });
    }
}); 
```

这段代码将所选行的 id/s 发送到“url:”选项（它有效）。该 url 以 json 格式返回一个响应。这个答案说明操作是否成功。我需要显示带有该消息的警报，我该怎么做？而且，另一个问题是，当我单击“删除”按钮（在 jqGrid 底部）时，它会显示一个带有问题“您要删除选定项目吗？”的 ajax 窗口，带有“是”输入和“否” “ 输入。当我单击“是”时，此 ajax 窗口将不会关闭！

谢谢！

但丁

编辑 [1] && [2]

```
$(document).ready(function()
{
    $grid = $("#list");
    fixPositionsOfFrozenDivs = function() {
        if (typeof this.grid.fbDiv !== "undefined") {
            $(this.grid.fbDiv).css($(this.grid.bDiv).position());
        }
        if (typeof this.grid.fhDiv !== "undefined") {
            $(this.grid.fhDiv).css($(this.grid.hDiv).position());
        }
    };

    $grid.jqGrid({
        url: '<?php echo $_SERVER['PHP_SELF'].'?app=my_app&option=get_records'; ?>',
        datatype: 'json',
        mtype: 'GET',
        height: 'auto',
        width: window.innerWidth-35, //width: '1225',
        colNames: ['ID', 'Column A', 'Column B', 'Column C', 'Column D'],
        colModel: [
            { name: 'id', index: 'id', width: 130, align: 'center', search: true,
                sortable: true, frozen: true, editable: true, edittype: 'text', formatter: 'showlink',
                editoptions: { size: 130, maxlength: 50 }, stype: 'text' },
            { name: 'col_a', index: 'col_a', width: 250, align: 'left', search: true,
                sortable: true, frozen: false, editable: true, edittype: 'text',
                editoptions: { size: 250, maxlength: 40 }, stype: 'text' },
            { name: 'col_b', index: 'col_b', width: 120, align: 'left', search: true,
                sortable: true, frozen: false, editable: true, edittype: 'text',
                editoptions: { size: 120, maxlength: 40 }, stype: 'text' },
            { name: 'col_c', index: 'col_c', width: 100, align: 'right', search: true,
                sortable: true, frozen: false, editable: true, edittype: 'text',
                editoptions: { size: 100, maxlength: 40 }, stype: 'text' },
            { name: 'col_d', index: 'col_d', width: 100, align: 'right', search: true,
                sortable: true, frozen: false, editable: true, edittype: 'text',
                editoptions: { size: 100, maxlength: 6 }, stype: 'text' }
        ],
        caption: 'Objects',
        pager: '#pager',
        sortname: 'id',
        sortorder: 'ASC',
        rowNum: 25,
        rowList: [25, 50, 100, 200, <?php echo $totrecords; ?>],
        loadonce: true,
        gridview: true,
        viewrecords: true,
        rownumbers: true,
        rownumWidth: 40,
        toppager: true,
        multiselect: true,
        autoencode: true,
        ignoreCase: true,
        shrinkToFit: false,
        loadComplete: function() {
            $("option[value=<?php echo $totrecords; ?>]").text('All');
        },
        editurl: '<?php echo $_SERVER['PHP_SELF'].'?app=my_app&option=delete_records'; ?>'
    });

    $grid.jqGrid('filterToolbar', {multipleSearch: false, stringResult: false, searchOnEnter: false, defaultSearch: 'cn'});
    $grid.navGrid('#pager', { edit: false, add: false, del: false, search: false });
    $grid.navButtonAdd('#pager', {
        caption: "Delete",
        buttonicon: "ui-icon-del",
        position: "last",
        onClickButton: function() {
            row_ids = $grid.getGridParam('selarrrow');
            $grid.delGridRow(row_ids, {
                closeOnEscape: true,
                mtype: 'POST',
                afterSubmit: function(data_from_server, array_data) {
                    var result = data_from_server.responseText;
                    var message = eval('(' + result + ')');
                    alert(message.query);
                }
            });
        }
    });

    $grid.jqGrid('setFrozenColumns');
    $grid[0].p._complete.call($grid[0]);
    fixPositionsOfFrozenDivs.call($grid[0]);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:39:06.347

您应该能够使用该`afterSubmit`事件来显示您的消息。从[jqGrid 文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#delgridrow)：

> **提交后**
> 
> 从服务器收到响应后触发。通常用于显示来自服务器的状态（例如，数据已成功删除或由于服务器端原因取消删除）。接收从请求返回的数据和 id=value1,value2 类型的已发布值数组作为参数。使用此事件时，应返回包含以下项目的数组，`[success, message]` 其中`success`为布尔值，如果为 true，则流程继续，如果为 false，则出现错误消息并停止所有其他处理。
> 
> ```
> afterSubmit : function(response, postdata) 
> { 
>   … 
>   return [succes,message] 
> } 
> ```

关于您的第二个问题，我不确定为什么 Ajax 窗口不会关闭。您是否调试过代码以查看当时是否收到 JavaScript 错误？如果没有，您可能需要发布一个小示例来演示该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:20:35.657

使用 HTTP GET 进行删除操作并不好。您是否希望将同一 URL 上的先前服务器响应缓存而不发送到服务器？`mtype`默认值为`'POST'`。如果您在服务器端有 RESTfull 服务，您将需要使用`mtype: 'DELETE'`，但使用`'GET'`只能对一些不会删除服务器上任何内容的虚拟代码有意义。

此外，您使用`dataType: 'json'`不存在的参数`delGridRow`（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#properties2)）。即使您会使用`ajaxDelOptions: { datyType: "json" }`，您也会得到服务器响应（请参阅 Justin 的答案）不会自动从 JSON 转换为对象。原因是当前代码`delGridRow`使用`complete`回调而不是`success`回调（参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.3.2/js/grid.formedit.js#L1596)）。因此，如果您从服务器获得 JSON 响应，则必须在回调内部显式调用[$.parseJSON](http://api.jquery.com/jQuery.parseJSON/)`afterSubmit`（请参阅贾斯汀的回答）。

# sql-server-2008 - 从批处理文件执行 SQL Server 脚本

> ID：10817092
> 
> 赞同：2
> 
> 时间：2012-05-30T13:15:55.597
> 
> 标签：sql-server-2008

我有一个需要使用批处理文件执行的脚本。我是否在批处理文件中使用 SQLCMD 来运行脚本？此外，该脚本将数据插入到数据库中的表中。我应该如何格式化批处理文件中的 SQLCMD，以便它知道它应该使用什么数据库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T13:23:53.063

首先，将查询保存到 sql 文本文件（扩展名为 .sql 的文本文件）中。确保在开头添加 USE 语句，它告诉服务器您要使用哪个数据库。使用 MSDN 中的示例：

```
USE AdventureWorks2008R2;
GO
SELECT p.FirstName + ' ' + p.LastName AS 'Employee Name',
a.AddressLine1, a.AddressLine2 , a.City, a.PostalCode 
FROM Person.Person AS p 
   INNER JOIN HumanResources.Employee AS e 
        ON p.BusinessEntityID = e.BusinessEntityID
    INNER JOIN Person.BusinessEntityAddress bea 
        ON bea.BusinessEntityID = e.BusinessEntityID
    INNER JOIN Person.Address AS a 
        ON a.AddressID = bea.AddressID;
GO 
```

然后在批处理文件中，运行 SQLCMD 并将 sql 文件（带路径）作为参数传递给它。

> sqlcmd -S myServer\instanceName -i C:\myScript.sql

如果您还需要进行身份验证，则需要在 SQLCMD 命令中添加 -U 和 -P 参数。

这是一篇有关[sqlcmd 实用程序](http://msdn.microsoft.com/en-us/library/ms170207%28v=sql.105%29.aspx)的 MSDN 文章，其中包含更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T13:20:20.430

使用`-S`开关指定服务器和实例名称，例如`-S MyDbServer\Database1`

`SQLCMD`[在此处找到的](http://msdn.microsoft.com/en-us/library/ms162773.aspx)文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-01T10:01:50.443

如果要为多个数据库执行所有 .sql 文件（文件夹中的多个 sql 脚本），请创建一个批处理文件“RunScript-All.bat”，其内容如下

```
echo "======Start - Running scripts for master database======="
Call RunScript-master.bat
echo "=======End - Running scripts for master database=========="
pause
echo "=====Start - Running scripts for model database========"
Call RunScript-model.bat
echo "=======End - Running scripts for master database=========="
pause 
```

特定数据库的单个批处理文件的定义，即“RunScript-master.bat”可以如下编写

```
for %%G in (*.sql) do sqlcmd /S .\SQL2014 /U sa /P XXXXXXXXX /d master  -i"%%G"
::pause 
```

为不同的数据库创建许多文件并从“RunScript-All.bat”中调用它们。

现在，您可以通过单击“RunScript-All.bat”批处理文件来运行许多数据库中的所有 sql 脚本。

# android - 像安卓闹钟这样的可点击布局？

> ID：10817096
> 
> 赞同：1
> 
> 时间：2012-05-30T13:16:05.940
> 
> 标签：android

我有这样的布局：每一行都是可点击的

```
---------------------------
  stuff from database
---------------------------
 next entry from database
---------------------------
next entry
-------------------------- 
```

我喜欢做的是：视图“数据库中的东西”的第一部分将包含有关闹钟的信息，例如时间闹钟响起和星期几等，它是可点击的，并且视图的打开部分也是可点击的但应该能够从它旁边的行中获取信息，因为它需要信息说警报的 id 我该怎么做？

* * *

```
 stuff from database       |  turn on
--------------------------------------
 next entry from database  | turn on
--------------------------------------
next entry                 | turn on
--------------------------------------- 
```

这是我的代码：

```
 protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_activity);

        databaseHelper = new DatabaseStore(this);
        databaseHelper.open();
        ListViewData();

        registerForContextMenu(getListView());
    }

    private void ListViewData(){
         Cursor MainPageCursor = databaseHelper.fetchAllReminders();
         startManagingCursor(MainPageCursor);

         String[] empty = new String[] { DatabaseStore.MUTE_TITLE,  DatabaseStore.START_KEY_TIME, DatabaseStore.END_KEY_TIME, DatabaseStore.COVERT_DAYS }; 

            int[] notempty = new int[]{R.id.text1,R.id.text2, R.id.text4,  R.id.text5};
            SimpleCursorAdapter mainPageList = new SimpleCursorAdapter(this, R.layout.editinfo_row,MainPageCursor, empty, notempty);
           setListAdapter(mainPageList); 

          }

protected void onListItemClick(ListView l, View v, int position, long id){
    super.onListItemClick(l, v, position, id);
    Intent i = new Intent(this, AddTimeEntry.class); /// fix this back to wha tit was
    i.putExtra(DatabaseStore.kEY_ROWID, id);
     startActivityForResult(i, ACTIVITY_EDIT); 

} 
```

编辑info_tow.xml

```
<?xml version="1.0" encoding="utf-8"?>

 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/widget38"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginLeft="10dip"
        android:layout_marginRight="10dip"
        android:orientation="vertical" >

        <TextView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/text1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_vertical"
            android:textSize="25sp" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/text2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="30sp" />
    <TextView
                android:id="@+id/text3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=" - "
                android:textSize="30sp" />
            <TextView
                android:id="@+id/text4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="30sp" />

             <CheckBox
                  android:text=""
        android:id="@+id/list_checkbox"
      android:layout_marginLeft="20dp"
       android:layout_width="wrap_content"
                android:layout_height="wrap_content"
        android:checked="false"
        android:focusable="false"
android:focusableInTouchMode="false"
        />

</LinearLayout>

  <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >
            <TextView
                android:id="@+id/text5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="15sp" />

        </LinearLayout>

    </LinearLayout> 
```

更新

```
public void addListenerOnButton() {

    final ToggleButton toggleButton1 = (ToggleButton) findViewById(R.id.toggleButton1);
    //toggleButton2 = (ToggleButton) findViewById(R.id.toggleButton2);
    Button btnDisplay = (Button) findViewById(R.id.toggleButton1);

    btnDisplay.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

          // StringBuffer result = new StringBuffer();
          // result.append("toggleButton1 : ").append(toggleButton1.getText());
    //     result.append("\ntoggleButton2 : ").append(toggleButton1.getText());

         //  Toast.makeText(MyAndroidAppActivity.this, result.toString(),
            //Toast.LENGTH_SHORT).show();

        }

    });

 } 
```

我使用了上面的代码，我得到空指针异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:34:40.910

您可以按如下方式使用切换按钮：

```
<LinearLayout
                        android:id="@+id/prob1"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content" >

                        <TextView
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="4"
                            android:gravity="left|center"
                            android:text="@string/someText"
                            android:textColor="@color/lbl_text_color"
                            android:textSize="25sp" >
                        </TextView>

                        <ToggleButton
                            android:id="@+id/toggle"
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center|center_vertical"
                            android:layout_weight="1"
                            android:background="@drawable/toggle_no_img"
                            android:onClick="onToggleClick"
                            android:textOff=""
                            android:textOn="" />
                    </LinearLayout> 
```

# php - MySQL 和 PHP - 如何只显示前五行？

> ID：10817103
> 
> 赞同：0
> 
> 时间：2012-05-30T13:16:24.583
> 
> 标签：php, mysql, select, limit, where

我有一个数据库，我正在成功查询它以显示一个字段的值等于 x 的所有行。我现在需要做的是只显示符合该条件的前 5 条记录。

到目前为止，这是我的 sql 查询：

```
$result = mysql_query("SELECT Player, Team, Pass_Yds, Pass_TDs, Int_Thrown, Rush_Yds, Rush_TDs, Overall_Pts, Total_Fantasy_Pts FROM ff_projections WHERE Position = 'QB' ORDER BY Pass_Yds DESC;"); 
```

我尝试将 LIMIT 0,5 添加到查询中（在 DESC 之后但在 ';' 之前），但它根本不会显示任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:40:21.060

最有可能的是，您不小心输入了一个句号：

```
LIMIT 0.5 
```

相当于：

```
LIMIT 0,0 
```

或者

```
LIMIT 0 
```

尝试用逗号代替

```
LIMIT 0,5 
```

或者干脆

```
LIMIT 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:55:07.457

你可以用这个 `$result = mysql_query("SELECT Player, Team, Pass_Yds, Pass_TDs, Int_Thrown, Rush_Yds, Rush_TDs, Overall_Pts, Total_Fantasy_Pts FROM ff_projections WHERE Position = 'QB' ORDER BY Pass_Yds DESC LIMIT 0,5");`

# vb.net - 直接从 .exe 执行控制台应用程序与通过任务计划执行的差异？

> ID：10817105
> 
> 赞同：0
> 
> 时间：2012-05-30T13:16:26.887
> 
> 标签：vb.net, visual-studio-2008, exception, console-application, excel-2003

我在 Window server 2008 上工作，在这个服务器上我开发了一个 vb.net 2008 控制台应用程序，它打开一个 excel 2003 文件并使用它的内容来创建一个 xml 文件，所以我有两种情况：
**1\. 程序执行的差异：**如果我从 Visual Studio 或直接从可执行文件运行应用程序，它会毫无问题地打开并处理 excel，但是如果我在 Windows 任务调度程序或执行该程序的 adtempus 中配置了一个任务，它会失败并抛出此异常：

*HRESULT 的异常：Microsoft.Office.Interop.Excel.Workbooks.Open 中的 0x800A03EC-（字符串文件名、对象 UpdateLinks、对象只读、对象格式、对象密码、对象 WriteResPassword、对象 IgnoreReadOnlyRecommended、对象来源、对象分隔符、对象可编辑、对象Notify, Object Converter, Object AddToMru, Object Local, Object CorruptLoad) at .Module1.convertExcelToXmlFile(String excelFile)*

我已经阅读了很多关于这个异常的内容，但目前我无法解决，所以我想知道这个程序如何执行如果两种情况都在同一台服务器中，则从 Visual Studio 正确或直接从执行但在任务上执行时失败？有没有办法解决这种行为？

2\. 在控制台应用程序中，当我使用 open 方法打开 excel 文件时，excel 中的文件会出现几秒钟然后关闭，有没有办法访问 excel 文件内容但文件不显示在 Ms Excel 中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:53:08.977

您不应在无人参与的过程中使用 Office Interop。

> Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。
> 
> 如果您正在构建在服务器端上下文中运行的解决方案，您应该尝试使用已确保无人值守执行安全的组件。或者，您应该尝试找到允许至少部分代码在客户端运行的替代方案。如果您使用来自服务器端解决方案的 Office 应用程序，该应用程序将缺少许多成功运行所需的功能。此外，您将承担整体解决方案稳定性的风险。

[http://support.microsoft.com/?id=257757](http://support.microsoft.com/?id=257757)

有许多产品可以在无人看管的情况下处理 Excel 文档并正确运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:57:04.280

您尝试在网络上打开的 Excel 文件是什么？

如果是这样，问题很可能是因为您的任务计划程序服务及其运行的任何作业（默认情况下）在本地 SYSTEM 帐户下运行，该帐户被禁止访问网络。

如果您将任务更改为在其他帐户下运行（例如，您已授予远程文件共享权限的域帐户）。（请注意，此更改可能会影响其他计划任务的运行方式，因此您需要非常确定所需的权限。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-02T15:05:49.480

万一您还没有弄清楚，最有可能对我有用的解决方案可以在此 URL 中找到：

[https://social.msdn.microsoft.com/Forums/en-US/b81a3c4e-62db-488b-af06-44421818ef91/excel-2007-automation-on-top-of-a-windows-server-2008-x64？论坛=创新办公室](https://social.msdn.microsoft.com/Forums/en-US/b81a3c4e-62db-488b-af06-44421818ef91/excel-2007-automation-on-top-of-a-windows-server-2008-x64?forum=innovateonoffice)

如果您的服务器是 64 位服务器，请在下面提到的路径中创建一个名为“Desktop”的文件夹，即*C:\Windows\SysWOW64\config\systemprofile\Desktop*

如果您的服务器是 32 位服务器，请将此文件夹*设为 C:\Windows\System32\config\systemprofile\Desktop*

# jquery - 从外部在 iFrame 中创建可拖动对象

> ID：10817109
> 
> 赞同：1
> 
> 时间：2012-05-30T13:16:38.807
> 
> 标签：jquery, events, iframe, jquery-ui-draggable, jquery-slider

我的问题：我需要从 iframe 外部创建可拖动的小部件（例如这里是 jslider）。Container 和 iframe 内容都来自同一个来源。问题是 jQuery 在错误的文档对象上附加了 mousemove 事件。

[http://jsfiddle.net/techunter/4pnxh](http://jsfiddle.net/techunter/4pnxh)

尝试移动滑块，它只能在鼠标触发 iframe 之外的事件时移动。请帮忙，我卡在这里

编辑：JQuery 侦听滑块句柄上的单击，并在单击事件时在 mousemove 上创建一个新的侦听器，但在窗口内，而不是在框架内。我正在考虑更改 jquery 库并添加一个上下文（默认情况下是 window.document），但它的时间很昂贵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:57:59.880

解决此问题的方法是：

*   由于默认情况下滑块实际上不起作用，所以在开始时不要调用任何东西

*   创建一个`JavaScript`函数，当鼠标在滑块内按住时设置滑块的值。

*   您需要使 ui-slide-handle 在被按住时返回对其父级的引用

此解决方案适用于所有主要浏览器：

```
$(function(){

  $('iframe').ready(function(){
     var $document = $('#result iframe',$('#main').contents()).contents();
     $('.slider',$document).slider({
          //Prevent the slider from doing anything from the start
          start:function(event,ui){return false;}
     });

     $(document).mouseup(function(){
         $('.slider,.ui-slider-handle',$document).unbind('mousemove') 
     })

     //While the ui-slider-handle is being held down reference it parent.
     $('.ui-slider-handle',$document).mousedown(function(e){
        e.preventDefault();
        return $(this).parent().mousedown()})

     //This will prevent the slider from moving if the mouse is taken out of the
     //slider area before the mouse down has been released.                
     $('.slider',$document).hover(function(){

        $('.slider',$document).mousedown(function(){
           $(this).bind('mousemove',function(e){

                //calculate the correct position of the slider set the value
                $(this).slider('value',e.pageX*100/$(this).width())
           });             
        }).mouseup(function(){
             $(this).unbind('mousemove');
        })},function(){
        $( '.slider',$document ).unbind('mousemove'); 
     })          
    })
    }); 
```

解决方案链接：

[解决方案](http://jsfiddle.net/qtvsZ/112/)

# c# - 任务阻止 UI 在 WPF 中刷新

> ID：10817112
> 
> 赞同：0
> 
> 时间：2012-05-30T13:16:47.873
> 
> 标签：c#, wpf, mvvm-light, task-parallel-library

我正在构建一个 WPF 应用程序，当您从列表中选择一个时，它会将 powerpoint 转换为 WPF 元素。我正在使用 MVVM 灯将 ViewModel 绑定到我的视图并添加 ViewModel 之间的通信。

我有两个视图：OpenLocalView 和 PresentationView。当我在 OpenLocalView 中选择一个 powerpoint 时，MVVM 灯将向 PresentationView 的 ViewModel 和 MainViewModel 发送一条消息，其中包含该 powerpoint 的路径。MainViewModel 将视图切换到 PresentationView，PresentationViewModel 执行此代码以转换 powerpoint，完成后，设置当前幻灯片，使其显示在 PresentationView 中：

```
 public void StartPresentation(string location)
  {
        var scheduler = TaskScheduler.FromCurrentSynchronizationContext();
        Loading = true;
        Task.Factory.StartNew(() =>
            {
                var converterFactory = new ConverterFactory();
                var converter = converterFactory.CreatePowerPointConverter();
                _slides = converter.Convert(location).Slides;
            }, 
            CancellationToken.None, 
            TaskCreationOptions.LongRunning, 
            scheduler).ContinueWith(x =>
                {
                    Loading = false;
                    CurrentSlide = _slides.First();
                }, 
                CancellationToken.None, 
                TaskContinuationOptions.OnlyOnRanToCompletion, 
                scheduler);
   } 
```

设置 Loading 属性后，视图会使用“正在加载”消息进行更新，以使 UI 响应更快：

```
 public Boolean Loading
    {
        get { return _loading; }
        set
        {
            _loading = value;
            RaisePropertyChanged("Loading");
        }
    } 
```

问题是，这在我第一次加载 powerpoint 时正确执行：视图切换到 PresentationView，显示“正在加载”消息，转换完成后，消息消失并显示幻灯片。但是当我回到 OpenLocalView 并选择另一个 powerpoint 时，OpenLocalView 挂起，并在转换器完成后切换到 PresentationView，根本没有显示“正在加载”消息。

作为参考，我将添加一些更相关的代码。

这在 OpenLocalViewModel 中选择了一个 powerpoint 时执行：

```
 private void PerformOpenPresentation(string location)
    {
        Messenger.Default.Send<OpenPowerPointMessage>(new OpenPowerPointMessage {Location = location});
    } 
```

MainViewModel 订阅了 messenger 并切换视图：

```
Messenger.Default.Register<OpenPowerPointMessage>(this,
            delegate
            {
                if (_presentation == null) _presentation = new PresentationView();
                CurrentView = _presentation;
            }); 
```

PresentationViewModel 也订阅了 messenger 并执行上面显示的方法：

```
Messenger.Default.Register<OpenPowerPointMessage>(this, message => StartPresentation(message.Location)); 
```

那么，我做错了什么？再次，它执行一次很好，然后不再执行，尽管执行了相同的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:19:39.900

看这里：

```
 var scheduler = TaskScheduler.FromCurrentSynchronizationContext();
 Loading = true;

Task.Factory.StartNew(() =>
        {
            var converterFactory = new ConverterFactory();
            var converter = converterFactory.CreatePowerPointConverter();
            _slides = converter.Convert(location).Slides;
        }, 
        CancellationToken.None, 
        TaskCreationOptions.LongRunning, 
here  ----> scheduler).ContinueWith(x =>
            {
                Loading = false;
                CurrentSlide = _slides.First();
            }, 
            CancellationToken.None, 
            TaskContinuationOptions.OnlyOnRanToCompletion, 
            scheduler); 
```

您正在同步上下文（即 UI 线程）上启动“长时间运行”任务。在长时间运行的任务中摆脱调度程序，让它继续运行。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:05:05.740

当您已经开始转换时，也许 UI 尚未更新。尝试在将 Loading 设置为 true 和转换器线程开始之间等待几毫秒 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:46:55.930

我建议将“Loading = true”移动到任务启动块中。但请确保在设置“Loading”值时使用调度程序。我可能不会给出问题的实际原因，但值得一试......

这样的事情可能会有所帮助..

```
Task.Factory.StartNew(() =>
            {
               System.Windows.Application.Current.Dispatcher.BeginInvoke((Action)delegate()
                 {
                     Loading = true;
                  });
                var converterFactory = new ConverterFactory();
                var converter = converterFactory.CreatePowerPointConverter();
                _slides = converter.Convert(location).Slides;
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:24:15.150

好的，我是用 windows 窗体做的，但我认为是一样的

我在任务线程中创建一个标签并调用表单的调用

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    public void AddControl(Control control)
    {
        if (InvokeRequired)
        {
            this.Invoke(new Action<Control>(AddControl), new object[] { control });
            return;
        }
        this.Controls.Add(control);
    }

    private void Form1_Load(object sender, EventArgs e)
    {

        Task.Factory.StartNew(() =>
            {
                var label = new Label
                {
                    Location = new Point(0, 0),
                    Text = "hola",
                    ForeColor = Color.Black
                };
                this.Invoke(new Action<Control>(AddControl), new object[] { label });
            });
    }
} 
```

*编辑*

好的，如何使用 Dispather.Invoke 我不确定这是否会阻止 UI ....

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    public void AddControl()
    {
        var l = new Label
        {
            Content = "Label",
            Height = 28,
            HorizontalAlignment = System.Windows.HorizontalAlignment.Left,
            Margin = new Thickness(209, 118, 0, 0),
            Name = "label1",
            VerticalAlignment = System.Windows.VerticalAlignment.Top
        };

        Grid.Children.Add(l);
    }

    private void Grid_Loaded(object sender, RoutedEventArgs e)
    {
        Task.Factory.StartNew(() =>
        {
            Dispatcher.Invoke(new Action(AddControl), null);
        });
    }
} 
```

# jquery - 链接到另一个页面上的锚点 jQuery 选项卡

> ID：10817116
> 
> 赞同：0
> 
> 时间：2012-05-30T13:17:01.023
> 
> 标签：jquery, html, css

如果您知道我的意思，我想创建一个指向 jQuery 选项卡上的锚点的链接。我有一个页面，在该页面上锚定了两个选项卡#idTab1 和#idTab2。我使用 Sean Catchpole 的 jQuery idTabs，在这里... [http://www.sunsean.com/idTabs/](http://www.sunsean.com/idTabs/)

这是我拥有的代码的模拟版本......

```
<div class="usual">
  <ul class="idTabs">
    <li><a name="idTab1" href="#idTab1" class="selected">Terms of Use</a></li>
    <li><a name="idTab2" href="#idTab2">Privacy Policy</a></li>
  </ul>

    <div class="handbook" id="idTab1">
    <p>Some content here...</p>
    </div>

    <div class="handbook" id="idTab2">
    <p>Some content here...</p>
    </div>

</div> 
```

我想要实现的是两个链接，一个用于#idTab1，第二个用于#idTab2。我在下页脚中创建了以下内容...

```
<div class="subfooter">  
    <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td width="100%"><a href="<?php echo url('/content/legal#idTab1');?>">Terms of Use</a> | <a href="<?php echo url('/content/legal#idTab2');?>">Privacy Policy</a><br/>
            <small><?php

            $mtime = explode(' ', microtime());
            $totaltime = $mtime[0] + $mtime[1] - $starttime;
            printf('Page generated in %.3f seconds.', $totaltime);

            ?></small></td>
        </tr>
    </table>
</div> 
```

上面的链接确实有效，页面打开，但 legal#idTab2 链接到第一个选项卡。我很感激你的任何提示或帮助。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:25:43.117

jquery 函数通过首先更改选项卡然后转到锚选项卡来完成此操作。

```
<script>
function js_tabs_link(tabnum,anchorLink){
    $('#tabs_container_id').tabs('option', 'selected', tabnum);
    //tabnums start from 1 not 0
    window.location = "#"+anchorLink;
}    
</script> 
```

并使用为您的链接调用脚本

```
<a href='javascript:js_tabs_link("3","about_us")'>about us</a> 
```

# php - 如何通过 POST 发送有关 HTML 元素的信息？

> ID：10817122
> 
> 赞同：2
> 
> 时间：2012-05-30T13:17:29.437
> 
> 标签：php, html, post

我想通过 POST 将 HTML 元素的属性作为数据发送，例如元素是否可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:19:17.297

您不能单独使用 PHP 和 HTML 来完成，因为 HTML 表单只会发布表单输入的名称。您需要添加一些 JavaScript，在提交表单时，它将遍历其所有输入并修改它们的值以包含属性值。

### 例子：

```
yourform.onbeforesubmit = function() {
  // Loop over form elements and append -visible or -hidden to its value based on CSS style
  // jQuery selectors like .is(":visisble") would help a lot here.
  // This is just a basic example though - it would require an explicit visibility CSS rule on each 
  // input element...
  for (var i=0; i<yourform.elements.length; i++) {
    yourform.elements[i].value = += "-" + yourform.elements[i].style.visibility;
  }
} 
```

另一种方法不是修改输入本身的值，而是为每个可见用户输入保留一个隐藏输入，并将属性设置为隐藏输入而不是可见输入的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:19:24.673

你不能用 PHP 做到这一点。您将需要使用 Javascript 来确定此信息，然后发送 Ajax 请求或将此信息添加到现有表单中。

详细说明一下：PHP 在服务器端执行，然后发送到客户端（浏览器）。服务器不知道浏览器中 HTML 元素的状态。

据我所知，您有一个提交的表格吗？因此，添加一段在提交表单之前调用的 javascript（表单的 onsubmit 属性）并让它读出元素的状态（可见，隐藏，...）并将此信息设置为一些隐藏的表单字段。

确保在提交表单之前调用的 javascript 返回 true，否则操作将被取消。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:20:31.507

在阿贾克斯。试试Prototype Framework，真的好用！ [http://prototypejs.org/api/ajax/request](http://prototypejs.org/api/ajax/request)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T13:19:29.123

如果你想这样做，我想你将不得不创建一些隐藏字段和 javascript，它们会根据你的元素属性用信息填充它们。据我所知，没有其他办法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T13:23:09.960

您必须首先定义您的数据定义标准：您要存储什么，以及以什么名称存储。

然后，恕我直言，您必须对结果进行序列化并通过 POST 发送，以便最终在服务器上对其进行一次反序列化。

使用 JSON 序列化是一种有效的处理方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T13:29:53.773

使用 PHP 包含隐藏输入，如下所示：

```
<input type="hidden" id="hidden1" name="hidden1" value="<?php if(condition) echo "default"; else echo "default";?>"> 
```

这个默认值可以在页面加载期间由 PHP 设置，用于将额外的隐藏数据从一个页面加载传输到另一个页面加载。但也可以在页面加载后通过javascript修改：

```
<script type="text/javascript">
document.getElementById("hidden1").value="true";
</script> 
```

> **注意：** PHP 只能在下一页加载期间更改任何隐藏或非隐藏元素的值。它对发送给浏览器的 HTML 没有任何控制权。这就是您需要 Javascript（客户端脚本）的原因。

# javascript - jQuery 可选限制

> ID：10817129
> 
> 赞同：0
> 
> 时间：2012-05-30T13:18:09.993
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试添加 6 个可选行的限制，但我无法使其工作。任何帮助！

```
<script>
$(function() {
  $(".selectable").selectable({
      filter: "td.cs",

      stop: function() {
          var result = $("#select-result").empty();
          var result2 = $("#result2");
          $(".ui-selected", this).each(function() {

              var cabbage = this.id + ', ';
              result.append(cabbage);
          });

          var newInputResult = $('#select-result').text();
          newInputResult = newInputResult.substring(0, newInputResult.length - 1);
          result2.val(newInputResult);
      }
  });
 });​
 </script> 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T13:20:58.017

您可以使用`selecting`事件回调来执行此操作，如下所示

```
$( "#selectable" ).selectable({
   selecting: function(event, ui) { 
     if ($(".ui-selected, .ui-selecting").length > 6) {
       $(ui.selecting).removeClass("ui-selecting");
     }
   }
});​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/77KrR/1/)

参考：[选择事件](http://jqueryui.com/demos/selectable/#event-selecting)

# php - PHP致命错误：定义函数时调用未定义函数

> ID：10817133
> 
> 赞同：6
> 
> 时间：2012-05-30T13:18:12.387
> 
> 标签：php

我在 PHP 中遇到错误：

```
PHP Fatal error:  Call to undefined function getCookie 
```

代码：

```
include('Core/dAmnPHP.php');
$tokenarray = getCookie($username, $password); 
```

在 dAmnPHP.php 内部，它在 dAmnPHP 类中包含一个名为 getCookie 的函数。当我运行我的脚本时，它告诉我该函数未定义。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T13:38:22.467

看起来您需要先创建该类的一个新实例，然后才能使用它的功能。

尝试： `$dAmn = new dAmnPHP; $dAmn->getCookie($username, $password);`

我以前没有使用过 dAmn，所以我不能确定，但​​我从这里提取了我的信息： [https ://github.com/DeathShadow/Contra/blob/master/core/dAmnPHP.php](https://github.com/DeathShadow/Contra/blob/master/core/dAmnPHP.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-18T17:37:25.313

**如何重现此错误：**

把它放在一个名为 a.php 的文件中：

```
<?php
include('b.php');
umad();
?> 
```

把它放在一个名为 b.php 的文件中：

```
<?php
class myclass{
  function umad(){
    print "ok";
  }
}
?> 
```

运行：

```
PHP Fatal error:  Call to undefined function umad() in 
/home/el/a.php on line 4 
```

**什么地方出了错：**

如果不先实例化它们，就不能在类中使用方法。像这样做：

```
<?php
include('b.php');
$mad = new myclass;
$mad->umad();
?> 
```

然后php解释器可以找到方法：

```
eric@dev ~ $ php a.php
ok 
```

# sql-server - 从多个表中获取值，使用 count 和 group by

> ID：10817135
> 
> 赞同：2
> 
> 时间：2012-05-30T13:18:24.907
> 
> 标签：sql-server, count, group-by, multiple-tables, multiple-databases

我正在尝试从 2 个不同数据库（全局和私有）中的 3 个不同表（状态、状态和案例）中输出 MSSQL 中的一些数据。

```
global.status    // contains labels for global status ID's
     fields (id, text)
private.status   // contains labels for private status ID's
     fields (id, text)
private.cases    // contain case information, such as status
     fields (status, count(status) AS amount) 
```

我需要将 case 表中的状态与两个状态表中的状态 ID 进行比较，并输出以下内容：

```
 statusID |    text     | amount
   ----------|-------------|--------
     9993    |    Open     |   24
     9991    |   Closed    |    3
     9992    |   Pending   |   12 
```

拥有全局和私有的原因是私有允许自定义私有状态，其中全局可以在整个系统中访问。

我对此的不成功尝试是以下 sql

```
SELECT  c.status, 
    COUNT(c.status) as amount, 
    ss.text,
    gs.text
FROM [DB11111111].dbo].[cases] AS c, [DB11111111].[dbo].[status] AS ss, [global].[dbo].[status] AS gs
WHERE (c.status = ss.id) OR (c.status = gs.id)
GROUP BY c.status, ss.text, gs.text 
ORDER BY amount DESC 
```

你知道该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:30:47.073

```
SELECT  *
FROM    (
        SELECT  id, text
        FROM    private
        UNION ALL
        SELECT  id, text
        FROM    global
        ) q
CROSS APPLY
        (
        SELECT  COUNT(*) cnt
        FROM    cases
        WHERE   status = q.id
        GROUP BY
                status
        ) c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:29:48.090

如果它们是不同的，您可以联合/联合所有本地和全局状态：

```
SELECT  c.status, 
    COUNT(c.status) as amount, 
    s.text
FROM [DB11111111].dbo.[cases] AS c
LEFT JOIN
(
   select id, [text]
     from [DB11111111].[dbo].[status] 
   union all
   select id, [text]
     from [global].[dbo].[status]
) s
  ON c.Status = s.Id
GROUP BY c.status, s.Text
ORDER BY amount DESC 
```

如果它们重叠，您需要定义哪个优先并在它们上使用完全外连接。

```
SELECT  c.status, 
    COUNT(c.status) as amount, 
    s.text
FROM [DB11111111].dbo.[cases] AS c
LEFT JOIN
(
   -- local before global
   select isnull (l.id, g.id) ID
          isnull (l.[text], g.[text]) [text]
     from [DB11111111].[dbo].[status] l
     full outer join [global].[dbo].[status] g
       on l.id = g.id
) s
  ON c.Status = s.ID
GROUP BY c.status, s.Text
ORDER BY amount DESC 
```

# ms-access - 访问报告字段截断为 255 个字符

> ID：10817136
> 
> 赞同：1
> 
> 时间：2012-05-30T13:18:33.580
> 
> 标签：ms-access, report, ms-access-2003

我有一个记录源是查询的报告，比如 qryRecords。在报告标题中，我想添加一个冗长的注释字段（超过 255 个字符）。我已经建立了一个表格来保存这些注释（字段类型为“备忘录”），并且因为该表格与报告的记录源是分开的，所以我打算使用 VBA 代码将注释字段放入报告中。

在报告的打开事件中，我添加了以下代码：

```
Dim rst as Recordset
Dim sql_qry as String

sql_qry = "SELECT notes FROM tblNotes WHERE id = 1;"
Set rst = CurrentDb.OpenRecordset(sql_qry)

rst.MoveFirst
Me.txtNote = rst![notes]  'I get the run-time error on this line 
```

不幸的是，我收到了一个运行时错误（“你不能给这个对象赋值”）。我在表单上发现了一个有类似问题的人，建议将代码从 open 事件移动到 OnCurrent 事件，但报告中不存在该事件。有什么建议么？谢谢。

--- 原始问题 ---

我有一个带有未绑定文本框 (txtNotes) 的表单，当用户打开表单时，文本框会填充超过 255 个字符的文本（它连接数据库中的各个字段）。这没有问题。

窗体上有一个打开报表的按钮，在报表中，我将一个文本框的Control Source设置为Forms![frmMain]![frmSub]![txtNotes]，也就是上面提到的文本框。这也有效，但由于某种原因，报告中的文本被截断为 255 个字符。表单的文本框是未绑定的，因此没有基础表来限制长度。有谁知道为什么会发生这种情况或者是否有解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:30:25.530

最有可能将来自字段的数据转换为文本类型而不是备忘录。确实没有办法将文本显式转换为备忘录（尽管使用 CStr，您可以反过来）。在尝试这种情况时，我也遇到了表格截断的问题。

我建议您可能以错误的方式在表单上生成此字段。美元到甜甜圈，您可以在查询中生成它（在表单的控制源中使用），而不是将其连接在一起并放入未绑定的字段中。同样，您可以使用相同的查询作为您正在打开的报告的控制源。

如果这一切真的不可能，我会指出您将表单中的值转储到专门用于报告的表中，然后使用该表作为报告的控制源。

- - 编辑 - -

我仍然认为您可以将其添加到您的报告的数据源中。在下面的示例中，我已将 tblNotes 添加到 Bar 表上的选择中。

```
SELECT bar.f0, bar.f1, bar.f2, bar.f3, tblNotes.notes 
FROM bar, tblNotes 
WHERE tblNotes.id = 1; 
```

是的，如果有 300 行 Bar，您将获得 300 个相同 Notes 字段的副本，但这是一个小问题。

在那里，您只需将 txtNote 的数据源设置为 tblNotes.Notes 列。txtNote当然可以存在于报表/页眉中，MS Access生成时只会使用一行。我不确定是选择第一行/最后一行，还是随机行——因为它们都是一样的，所以没关系。

# java - 类的方法在 Android 动态壁纸中不起作用

> ID：10817138
> 
> 赞同：0
> 
> 时间：2012-05-30T13:18:37.200
> 
> 标签：java, android, methods, render, live-wallpaper

我正在尝试在运行时更改动态壁纸中的图像。我正在调用方法 changeFlowers。我能够打印 Log.W() 但无法更改位图。提前致谢。

* * *

## 当我从这里调用 f1.changeColor(this._theme) 它不起作用时，我想在运行时更改鱼位图图像

```
public void changeFlowers(int i)
{

    FlowerOne f1 = (FlowerOne)(this._fishes.get(i));   
    f1.changeColor(this._theme); // 

} 
```

* * *

## 来自 FishOne.java 的 changeColor 函数

```
public void changeColor(int mfishColor)
{

    switch(mfishColor) {
    case 1:

    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inPurgeable = true;
    this.leftBitmap = BitmapFactory.decodeResource(getContext().getResources(), com.gotit.livewallpaper.fishshd.R.drawable.fish1, options);

    BitmapFactory.Options options1 = new BitmapFactory.Options();
    options1.inPurgeable = true;
    this.rightBitmap = BitmapFactory.decodeResource(getContext().getResources(), com.gotit.livewallpaper.fishshd.R.drawable.fish2, options1);

    break;

    case 2:
    BitmapFactory.Options options2 = new BitmapFactory.Options();
    options2.inPurgeable = true;
    this.leftBitmap = BitmapFactory.decodeResource(getContext().getResources(), com.gotit.livewallpaper.fishshd.R.drawable.redfish1, options2);

    BitmapFactory.Options options3 = new BitmapFactory.Options();
    options3.inPurgeable = true;
    this.rightBitmap = BitmapFactory.decodeResource(getContext().getResources(), com.gotit.livewallpaper.fishshd.R.drawable.redfish2, options3);

    break;
    default:
    }

} 
```

* * *

## 水族馆.java

```
public class Aquarium {
private AquariumThread _aquariumThread; 
private SurfaceHolder _surfaceHolder;   
private ArrayList<Renderable> _fishes;  
private Bitmap _backgroundImage;
private Context _context;

public void render(){
    Canvas canvas = null;
    try{

    canvas = this._surfaceHolder.lockCanvas(null);
    synchronized (this._surfaceHolder) {
        this.onDraw(canvas);
    }

    }finally{
        if(canvas != null){
            this._surfaceHolder.unlockCanvasAndPost(canvas);
        }
    }   
}

protected void onDraw(Canvas canvas) {
    this.renderBackGround(canvas);
    for (Renderable renderable : this._fishes) {
        renderable.render(canvas);
    }
};

public void initialize(Context context, SurfaceHolder surfaceHolder) {
    this._fishes = new ArrayList<Renderable>();
}

protected void onDraw(Canvas canvas) {
    this.renderBackGround(canvas);
    for (Renderable renderable : this._fishes) {
        renderable.render(canvas);
    }
};

public void start(){
    this._aquariumThread.switchOn();
}

public void stop(){
    boolean retry = true;
    this._aquariumThread.switchOff();
    while (retry) {
    try {
     this._aquariumThread.join();
        retry = false;
    } catch (InterruptedException e) {
        // we will try it again and again...
}
}
}

public synchronized void addFishes() {      

Point startPoint1 = new Point(1,300);
this._fishes.add(new fishOne(this._context, this, startPoint1, 90));

Point startPoint2 = new Point(100,300);
this._fishes.add(new fishOne(this._context, this, startPoint2, 90));

Point startPoint3 = new Point(200,300);
this._fishes.add(new fishOne(this._context, this, startPoint3, 90));

}

public void changeFlowers(int i)
{

    FlowerOne f1 = (FlowerOne)(this._fishes.get(i));
    f1.changeColor(this._theme);

}

} 
```

* * *

## FishOne.java

```
public class fishOne extends Animal {
private static final int TOTAL_FRAMES_IN_SPRITE = 1;
private static final int CLOWN_FISH_FPS = 1; 

int _fishColor;
Bitmap leftBitmap;
Bitmap rightBitmap;

public fishOne(Context context, Aquarium aquarium,  Point startPoint, int speed){       

super(context, aquarium);   
this.changeColor(1);
this.initialize(this.leftBitmap, this.rightBitmap, CLOWN_FISH_FPS, TOTAL_FRAMES_IN_SPRITE, startPoint, speed);

    }

public void changeColor(int mfishColor)
{

    switch(mfishColor) {
    case 1:

    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inPurgeable = true;
    this.leftBitmap = BitmapFactory.decodeResource(getContext().getResources(), com.gotit.livewallpaper.fishshd.R.drawable.fish1, options);

    BitmapFactory.Options options1 = new BitmapFactory.Options();
    options1.inPurgeable = true;
    this.rightBitmap = BitmapFactory.decodeResource(getContext().getResources(), com.gotit.livewallpaper.fishshd.R.drawable.fish2, options1);

    break;

    case 2:
    BitmapFactory.Options options2 = new BitmapFactory.Options();
    options2.inPurgeable = true;
    this.leftBitmap = BitmapFactory.decodeResource(getContext().getResources(), com.gotit.livewallpaper.fishshd.R.drawable.redfish1, options2);

    BitmapFactory.Options options3 = new BitmapFactory.Options();
    options3.inPurgeable = true;
    this.rightBitmap = BitmapFactory.decodeResource(getContext().getResources(), com.gotit.livewallpaper.fishshd.R.drawable.redfish2, options3);

    break;
    default:
    }

}

public void render(Canvas canvas){
    super.render(canvas);   
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:47:36.193

在方法内部再次重新初始化。有效

```
this.initialize(this.leftBitmap, this.rightBitmap, CLOWN_FISH_FPS, TOTAL_FRAMES_IN_SPRITE, startPoint, speed); 
```

# asp.net - 如何处理谷歌结帐“立即购买按钮”交易？

> ID：10817139
> 
> 赞同：-3
> 
> 时间：2012-05-30T13:18:39.447
> 
> 标签：asp.net, .net, google-checkout

Google-checkout 有一个为按钮创建 html 代码的向导，但我如何让我的网站确认交易已完成（或未完成）？

编辑：我已经看过诸如[https://developers.google.com/checkout/developer/Google_Checkout_HTML_API_Notification_API#Receiving_and_Processing_Notifications](https://developers.google.com/checkout/developer/Google_Checkout_HTML_API_Notification_API#Receiving_and_Processing_Notifications)之类的页面。但我不知道如何实现它们。例如：什么是“HTTP Basic Authentication”、“HTTP request headers”、“HTTP 200 response code”、“POST”等。

所以我需要的是一个简单的（！）示例，代码最少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:06:14.177

您必须实现 Google 的通知 API。您可以在此处阅读：[实现通知 HTML API](https://developers.google.com/checkout/developer/Google_Checkout_HTML_API_Notification_API)。

**编辑**

回应：

> 谢谢。但不幸的是，我不知道足够的网络开发来知道如何应用那里写的东西。

我会对你说实话。简单是相对的，如果您不熟悉 POST 和请求标头等一些基本概念，您可能永远不会得到简单的响应。

话虽如此，我相信对您来说最简单的解决方案是在收到确认电子邮件后手动确认交易。

我设想你会有某种管理屏幕，显示所有“待处理”交易的列表。当您收到来自 Google 的确认电子邮件时，您只需将相应的交易标记为已完成。这并非完全不常见。事实上，由于您使用 Google 按钮购买单件商品，因此这可能是您的最佳选择。

一个更复杂的场景（同样不是一个简单的解决方案）是创建一个服务来解析您的电子邮件并使用一些巫术将这些电子邮件映射到您的 Web 应用程序中的相应事务。不过，这可能与实现通知 API 一样先进。

# css - div 不随内容扩展

> ID：10817143
> 
> 赞同：0
> 
> 时间：2012-05-30T13:18:48.697
> 
> 标签：css, html, css-float

我知道有几篇关于此的帖子，但没有一个解决方案对我有用。话虽如此，我的包含 div 不会随着我的内容而增长。我知道为什么会发生这种情况，因为它是“浮动”的，但即使我使用“清除”，它也不会随着父 div 扩展。我尝试在下面的几乎每个元素中使用 clear 都没有成功。任何帮助将不胜感激。

查看问题图片：

![在此处输入图像描述](../Images/8d6258c434d046ea3d625e52daf53f78.png)

有关现场示例，请访问[http://thehopcompany.com/index.php?id=49](http://thehopcompany.com/index.php?id=49)

---------------CSS----------------

```
 .product {
   width:775px;
   margin:0;    
   padding:0;
   margin-top:75px;
   margin-left:-8px;

 }
 .product ol{
   margin:0px;
 }
 .product li{
   list-style:none;
   margin: 0 0 15px 0;
   padding:15px;    
   border:1px solid #ccc;
   height:100px;
   color:#000;
 }
 .product-column-left{
   float:left;
   width:100px;
   height:100px;
 }
 .product-column-right{
   float:left;
   width:120px;
   border-left:1px solid #ccc;
   height:100px;
   text-align:center;
 }
 .product-column-center{
   float:left;
   width:470px;
   min-height:100px;
   padding-right:15px;
   padding-left:15px;
   text-align:left;
   padding-bottom:30px;
       display:block;

 }
 .product h2{
   font-size:18px;  
   margin-bottom:5px;
   margin-top:0;
 }
 .product .text-underline{
   text-decoration:underline;   
 }
 .description-text{
   font-size:12px;
   color: #000;

 }
 .clear{
   clear:both;  
 } 
```

--------------------------HTML------------------------ ---

```
 <li style="list-style:none;">

        <div style="width:750px;" >

             <div class="product-column-left">

                <img align="left" style="border:0;"  src="images/hop-pellets.png" width="100" height="100" />

             </div>

          <div class="product-column-center"  >

                <h2><span class="hop-title-text-product">Columbus, Tomahawk and Zeus</span></h2>

                <div class="description-text" >Proprietary naming rights sometimes have identical or nearly identical strains being sold under multiple names. Columbus, Tomahawk and Zeus, or the CTZ hops, are the most famous example of this phenomenon. CTZ hops are known as super-alpha hops due to the extremely high percentage of alpha acids they contain, making them ideal bittering additions. Columbus hops can be found alongside Centennial hops in Stone Ruination IPA or in Saranac's Brown Ale. 
```

专有命名权有时会以多个名称出售相同或几乎相同的菌株。哥伦布、战斧和宙斯，或 CTZ 啤酒花，是这种现象最著名的例子。CTZ 酒花被称为超级 α 酒花，因为它们含有极高比例的 α 酸，使其成为理想的苦味添加剂。在 Stone Ruination IPA 或 Saranac 的 Brown Ale 中，您可以在 Centennial 啤酒花旁边找到哥伦布啤酒花。

```
 </div>

             <div class="product-column-right">

                <h2>$0.00</h2>

                <a href="index.php?cart=1&pid=49"><img style="margin-top:10px; border:0;" type="image"src="images/add-to-cart-button.png" width="90" height="25"   /></a>

             </div>

        </div>

    </li>

    </ol>

    </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T13:25:45.807

尝试将溢出隐藏添加到父级`li`

```
.product li { 
    .... 
    overflow: hidden;

    /*height: 100px;*/
  } 
```

问题`overflow:hidden`是如果你的布局中有溢出的元素，它会隐藏它们。因此，通过使用`clearfix`which is 我想你可以像下面这样实现它的最佳实践。

```
.clearfix:after {
   content: " "; /* Older browser do not support empty content */
   visibility: hidden;
   display: block;
   height: 0;
   clear: both;
} 
```

然后，基本上你只需要在你的`container`元素中添加类。[更多关于 Clearfix](http://goo.gl/crOCwo)

```
<li class="clearfix">
    <div style="float: left;">        
        <div class="content">Big content</div>    
    </div>
</li> 
```

[小提琴演示](http://jsfiddle.net/gwopjdb5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:25:37.423

```
.clear{width: 100%; clear: both; height: 0px; line-height:0px;}

<div class='clear'></div> 
```

在容器 div 的最后（我认为在 product-column-right 之后）和结束 li 标签之前添加上面的 div。这应该确保 div 跨越内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-21T18:36:37.590

添加[clearfix](https://stackoverflow.com/questions/8554043/what-is-clearfix)应该可以解决您的问题：

```
.clear{width: 100%; clear: both; height: 0px; line-height:0px;}

<div class='clear'></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T13:28:00.937

您的 product.li 样式的高度为 100px，因此无论如何这都会约束盒子。删除该设置（或将其更改为 height:auto），然后在结束 li 标记之前添加一个空的清除 div，你应该没问题。

因此，您的 CSS 定义将更改为：

```
 .product li{
   list-style:none;
   margin: 0 0 15px 0;
   padding:15px;    
   border:1px solid #ccc;
   height:auto;
   color:#000;
 } 
```

然后是相关的 HTML：

```
 <a href="index.php?cart=1&pid=49"><img style="margin-top:10px; border:0;" type="image"src="images/add-to-cart-button.png" width="90" height="25"   /></a>

         </div>

    </div>
    <div style="clear:both"></div>
</li>

</ol>

</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T17:24:49.927

我使用了 overflow: 有一段时间取得了很大的成功 - 但我遇到了一些问题，并决定回到这个明确的修复程序。如果您有任何问题 - 请检查一下。

[http://css-tricks.com/snippets/css/clear-fix/](http://css-tricks.com/snippets/css/clear-fix/)

# java - 带有客户端身份验证和 p12 证书的 Java Webservices SOAP

> ID：10817154
> 
> 赞同：4
> 
> 时间：2012-05-30T13:19:19.013
> 
> 标签：java, web-services, pkcs#12

我需要从 Java 独立应用程序调用 Web 服务。该网络服务需要客户端身份验证访问权限，并且它有一个 https:// url。

应用程序的用户应提供 p12 证书和 pin 码才能访问 Web 服务。

客户提供了一个示例证书来测试 Web 服务，但我实际上不知道如何实现它。

在实际应用程序中，证书存储在智能卡 (pkcs#11) 中。

我应该在哪里找到一个howto或一些例子？谢谢...

# matlab - Matlab：“分组均值”

> ID：10817155
> 
> 赞同：2
> 
> 时间：2012-05-30T13:19:24.593
> 
> 标签：matlab, statistics

假设我有向量：

```
 y = [1 1.01 1.02 1.03 2 2.01 2.02 3 3.01 3.02 3.03];
 c = [0 0    0    0    1 1    1    2 2    2    2   ]; 
```

是否有一种矢量化方法来获得“分组平均值”，即`y`每个唯一值的平均值`c`？（这是一个简化的示例；我有类似的东西，但向量大小为数千，并且 c 有数百个值）

我可以在 for 循环中做到这一点，只是想知道它是否可以被矢量化。这是我的for循环实现：

```
function [my,mc] = groupmean(y,c)
my = [];
mc = [];
for ci = unique(c)'
    mc(end+1) = ci;
    my(end+1) = mean(y(c==ci));
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T13:43:51.710

简短的回答：

```
>> y = [1 1.01 1.02 1.03 2 2.01 2.02 3 3.01 3.02 3.03];
>> c = [0 0    0    0    1 1    1    2 2    2    2   ];
>> groupmeans = accumarray(c'+1,y',[],@mean)
groupmeans =
        1.015
         2.01
        3.015 
```

解释上述内容：`accumarray`有点神秘，但非常有用且值得了解（而且速度非常快）。第一个输入是一个向量（它们必须是列向量，这就是为什么它是`c'`and `y'`），它对第二个输入向量的行进行分组。元素必须是正整数（出于某种原因），这就是我将 1 添加到`c'`. 最后一个输入是函数的句柄，该函数作为累加器应用于 y 中的每组值。

希望这是有道理的！如果没有，`doc accumarray`:)

# maven-3 - 访问被拒绝问题

> ID：10817158
> 
> 赞同：2
> 
> 时间：2012-05-30T13:19:31.960
> 
> 标签：maven-3

尝试从命令行使用 Maven。已设置 setting.xml 代理 -

```
 <proxy> 
       <id>optional</id>
       <active>true</active>
       <protocol>http</protocol>
       <username></username>
       <password></password>
       <host>access.lb.xxx.org</host>
       <port>80</port>
       <nonProxyHosts>local.net|some.host.com</nonProxyHosts>
    </proxy> 
```

从 cmd 屏幕尝试运行命令 - mvn archetype:generate -X

出现错误，例如 -

```
 ...
    Caused by: org.sonatype.aether.transfer.ArtifactTransferException: 
    Could not transfer artifact org.apache.maven.plugins:maven-release-plugin:pom:2.0  
    from/to central (http://repo.maven.apache.org/maven2): Access denied to:     
    http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-release   
    plugin/2.0/maven-release-plugin-2.0.pom, ReasonPhrase:Forbidden.
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap  
    (WagonRepositoryConnector.java:951) ... 
```

无法确定代理设置是否正确？有没有办法通过代理？或者任何其他方式让我至少创建一个简单的 Maven 项目？

谢谢

# php - PHP Strtotime 没有当前时间？

> ID：10817166
> 
> 赞同：0
> 
> 时间：2012-05-30T13:20:12.570
> 
> 标签：php, time

我希望我的用户能够输入以下值：

```
4 hours

23 minutes 
```

等等

strtotime 非常适合将这些值转换为秒，但它会将它们添加到当前时间。有没有办法让它返回输入的总时间量，而不是从现在开始？还是我需要做这样的事情：

```
$time = strtotime($value) - time(); 
```

只是为了争论，如果时间值在 strtotime 评估它和 time 评估它之间发生变化会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T13:21:52.397

```
$time = strtotime($value, 0); 
```

[http://php.net/strtotime](http://php.net/strtotime)

> ```
> $time = strtotime($value) - time(); 
> ```
> 
> 只是为了争论，如果时间值在 strtotime 评估它和 time 评估它之间发生变化会发生什么？

然后你会错过几秒钟（可能是 1 秒），因为`strtotime($value)`首先被评估，如果时间过去了，结果`time()`会比预期的要大（可能是 1 秒；））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:53:26.293

您可以使用此模式确保始终在同一时间工作：

```
$start = time();
$time = strtotime($value, $start) - $start; 
```

或者更简单，通过将第二个参数设置为 0 来跳过减法：

```
$time = strtotime($time, 0); 
```

# android - onclick 一个微调器？

> ID：10817167
> 
> 赞同：1
> 
> 时间：2012-05-30T13:20:16.173
> 
> 标签：android, spinner, android-spinner

嗨，我需要在微调器上单击一下。这是我的微调器：

```
Spinner spinner = (Spinner) findViewById(R.id.spnTarghe);
final String targhe[]=risposta.split("/");
ArrayAdapter<String> adapter = new ArrayAdapter<String>(
        this,
        android.R.layout.simple_spinner_item,
        targhe
        );
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

spinner.setAdapter(adapter); 
```

我该怎么做才能使用执行此简单指令的 onclicklistener：

```
 sTarga=targhe[position]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T13:23:00.007

通过使用 onitemselected 侦听器，您可以在微调器中选择项目

```
 spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub
            String  mselection=spinner.getSelectedItem().toString();    
            Toast.makeText(getApplicationContext(), "selected "+ mselection, 30).show();              
            /**** do your code*****/
        }
        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub
        //  
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:22:27.947

使用 onItemSelected

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
        // your code here
          sTarga=targhe[position];
    }

    @Override
    public void onNothingSelected(AdapterView<?> parentView) {
        // your code here
    }

}); 
```

# java - Maven - 父 pom 中的 EJB 插件

> ID：10817170
> 
> 赞同：0
> 
> 时间：2012-05-30T13:20:30.683
> 
> 标签：java, maven, maven-plugin, maven-3

我刚刚被要求处理现有的 Java EE Web 项目。

该项目包含许多模块，一些 EJB 封装在 EAR 中，还有一个 Web 部件在 WAR 中。

困扰我的是你实际上需要 1h30 来编译整个东西。我在插件管理部分之间的父 POM 中发现了这个：

```
 <plugin>
            <artifactId>maven-ejb-plugin</artifactId>
            <configuration>
                <ejbVersion>3.0</ejbVersion>
                <generateClient>true</generateClient>
                <clientIncludes>
                    <!-- Includes only service interface and business delegate. -->
                    <clientInclude>**/*Service.class</clientInclude>
                    <clientInclude>**/*Delegate.class</clientInclude>
                    <clientInclude>**/ejb/*EJBRemote.class</clientInclude>
                </clientIncludes>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                        <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                        <addDefaultSpecificationEntries>true</addDefaultSpecificationEntries>
                    </manifest>
                    <manifestEntries>
                        <Build-Time>${timestamp}</Build-Time>
                        <Implementation-URL>${project.url}</Implementation-URL>
                    </manifestEntries>
                </archive>
            </configuration>
        </plugin> 
```

这不是意味着每个模块都被 EJB 插件“解析”了吗？甚至非ejb模块？

谢谢。

ps：父 pom 也有一些依赖关系，这些依赖关系也在模块的 pom.xml 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T13:13:12.963

我完全忘记了这一点：我找到了解决方案，然后项目“只”需要 15 分钟来编译。

java版本需要升级，据我记得maven和java 1.6版本xxxxx存在某种错误。

当时升级到最新版本的 java 1.6 解决了这个问题（或者是 1.5，我不记得了）。

# jquery - 如何动态设置宽度 根据其中的内容进行标记并相应地滚动？

> ID：10817173
> 
> 赞同：0
> 
> 时间：2012-05-30T13:20:32.940
> 
> 标签：jquery, html, scroll, scrollbar

我是 Javascript 新手，遇到了这个问题。我想`<li>`根据其中的内容动态设置标签的宽度并相应地滚动。

```
<html>
<head>
<style type="text/css">
ul.images 
{
  padding:0px;
  margin:0px;
  white-space: nowrap;
  width:auto;
  overflow:hidden;
}

ul.images li 
{
  line-height:200px;
  display: inline;

}

</style>

<script type="text/javascript" src="jquery-1.7.2.js"></script>

<script language="javascript">
 $(document).ready(function(){
    var totalWidth = $("li.list").width();
        totalWidth += 4;
 });

 function scrollDiv(dir,px) {
     alert("heloo");
        /*var img_w=document.getElementsByTagName("li").width;
        var curr_width = parseInt(img_w);
        var scroll_width=(curr_width+4);*/

        alert(img_w);
        var scroller = document.getElementById("scroller");
        if (dir == 'l') {
            scroller.scrollLeft -= px;
        }
        else if (dir == 'r') {
            scroller.scrollLeft += px;
        }
    }

</script>

</head>
<body>
<div style="width:1450px">
    <div style="float:left;">
        <a href="javascript: void(0);" onClick="scrollDiv('l',totalWidth); return false;" style="display:table-cell;height:155px;vertical-align:middle"><img src="backward.png" height="50" width="50"/></a>
    </div>

        <div style="width:1220px;float:left">
            <ul class="images" id="scroller">
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li> 
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li> 
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>       
            </ul>
        </div>

    <div style="float:left;">
        <a href="javascript: void(0);" onClick="scrollDiv('r',totalWidth); return false;" style="display:table-cell;height:155px;vertical-align:middle;"><img src="forward.png" height="50" width="50"/></a>
    </div>
</div>
</body>
</html> 
```

我面临的错误是`Error: totalWidth is not defined`

任何帮助都会得到帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:26:06.760

尝试在您的样式标签中包含以下代码片段

```
li{
    min-width:12px;
    overflow:auto;
} 
```

在这里，我将 li 标签的溢出属性设置为 auto 和最小宽度。希望这有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:23:43.423

我相信你的问题是 .width() 返回一个无单位的值。例如，它将删除`px`from `400px`。

您可以尝试更改`.width()`为`.css('width')`，看看是否有效

# regex - 在 mod_rewrite 中允许与符号

> ID：10817177
> 
> 赞同：1
> 
> 时间：2012-05-30T13:20:50.493
> 
> 标签：regex, mod-rewrite, rewrite, ampersand

我试图在我的 mod_rewrite 中允许“&”。目前我正在使用

```
RewriteRule ^([-a-zA-Z0-9_'_-]+)$ 
```

我尝试添加：

```
RewriteRule ^([-a-zA-Z0-9_'_-_&]+)$ 
```

允许＆符号，但我知道这很可能是错误的。谁能指导我正确的正则表达式布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:15:08.437

您还必须转义连字符，因为它表示方括号内的匹配范围（它不会失败，因为您最后包含了它，但在其他情况下它会像在 OP 中一样）。

正确转义连字符： `^([a-zA-Z0-9'&_\-]+)$`

这将失败：`^([a-zA-Z0-9'_-&]+)$`

这不会：`^([a-zA-Z0-9'_\-&]+)$`

（我会评论但我的代表不够高）

# extjs4 - ExtJs 4.1 MVC 网格实现中的 PagingScroller 未触发 ajax 请求

> ID：10817178
> 
> 赞同：1
> 
> 时间：2012-05-30T13:20:50.537
> 
> 标签：extjs4, extjs-mvc, infinite-scroll, extjs4.1

我试图找出在 ExtJs 4.1.0 网格中无限滚动的基本实现。

我正在处理这个示例[http://ext4all.com/post/extjs-4-1-grid-infinite-scroll-in-mvc](http://ext4all.com/post/extjs-4-1-grid-infinite-scroll-in-mvc)，此时我的代码实际上与示例相同。

当我的页面加载时，当第一个 ajax 请求触发并按预期工作时，网格会填充第一页数据。但是，当我向下滚动到网格底部时，什么也没有发生……我期待看到一个 ajax 请求触发，获取额外的数据（如示例中所示）。

有任何想法吗？

这是我的代码：

**HTML**

```
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="./extjs-4.1.0/resources/css/ext-all.css">
        <link rel="stylesheet" type="text/css" href="./styles.css">
        <script type="text/javascript" src="./extjs-4.1.0/ext-all-debug.js"></script>
        <script type="text/javascript" src="./test-scrolling.js"></script>
    </head>

    <body>
        <div id="page">
            <header>
                <div class='wrap'>
                     <h1>Test</h1>

                    <div class='clear'></div>
                </div>
            </header>
            <div class="content">
                <div class="wrap">
                    <div id="main"></div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

**Javascript**

```
Ext.define('AP.model.Log', {
    extend: 'Ext.data.Model',
    fields: [
        'Id',
        'ProcessId',
        'IndexRequest',
        'AssetIndexStart',
        'AssetIndexEnd',
        'StartDate',
        'EndDate']
});

Ext.define('AP.store.Log', {
    extend: 'Ext.data.Store',
    model: 'AP.model.Log',
    autoLoad: true,
    remoteSort: true,
    buffered: true,
    pageSize: 100,
    proxy: {
        type: 'ajax',
        url: 'http://localhost/...',
        limitParam: 'limit',
        reader: {
            type: 'json',
            root: 'Log',
            successProperty: 'Success'
        }
    }
});

Ext.define('AP.view.Log', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.log',
    title: 'Log',
    store: 'Log',
    initComponent: function () {
        this.columns = [{
            header: 'Index Start',
            dataIndex: 'AssetIndexStart',
            flex: 1
        }, {
            header: 'Index End',
            dataIndex: 'AssetIndexEnd'
        }, {
            header: 'Start Date',
            dataIndex: 'StartDate'
        }, {
            header: 'End Date',
            dataIndex: 'EndDate'
        }];
        this.callParent(arguments);
    }
});

Ext.define('AP.controller.Log', {
    extend: 'Ext.app.Controller',
    stores: ['Log'],
    models: ['Log'],
    views: ['Log'],
    init: function () {}
});

Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    name: 'AP',
    appFolder: 'app',
    controllers: [
        'Log'],
    launch: function () {
        Ext.widget('log', {
            title: 'Log',
            width: 600,
            height: 400,
            renderTo: 'main'
        });
    }
}); 
```

# android - 当设备在 Android2.3 及以下时，setInitialScale() 不适用于 phonegap 1.7

> ID：10817181
> 
> 赞同：0
> 
> 时间：2012-05-30T13:21:14.063
> 
> 标签：android, cordova, webview

我删除 this.appView.setInitialScale(0); 在 DroidGap.java 和初始化 WebView 如下

```
WebSettings ws = wv.getSettings();
ws.setJavaScriptEnabled(true);
ws.setDomStorageEnabled(true);
ws.setLightTouchEnabled(false);
ws.setDatabaseEnabled(true);
String databasePath = getApplicationContext().getDir("database",
        Context.MODE_PRIVATE).getPath();
ws.setDatabasePath(databasePath);
ws.setSupportZoom(false);
ws.setBuiltInZoomControls(false);

wv.requestFocusFromTouch();

DisplayMetrics metric = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metric);

int orient = getRequestedOrientation();
float width = 480.0f;
float height = 320.0f;
if(orient == ActivityInfo.SCREEN_ORIENTATION_PORTRAIT) {
    width = 320.0f;
    height = 480.0f;
}
width*=2;height*=2;

final float scale = Math.min(metric.widthPixels / width, metric.heightPixels / height);

int web_scale = 100;
if(android.os.Build.PRODUCT.equals("blaze")) {
    web_scale = (int) (scale * 96);
}else {
    web_scale = (int) (scale * 100);
}
wv.setInitialScale(web_scale); 
```

在我的网页中，视口是：

```
<meta name="viewport" content="width = device-width,initial-scale=0.75,minimum-scale=0.1,maximum-scale=3.0,user-scalable=yes" /> 
```

它可以在 4.0 设备上运行，但在 2.3 或更低版本上运行时，页面似乎比预期的要大。提前谢谢任何建议。

我发现它不能在我的手机上运行（HTC G11 Incredible S），但在其他手机上运行（galaxy note、galaxy II、galaxy nexus、moto 里程碑 2）

# architecture - 使用 Amazon Web 服务设置不同环境的最佳实践

> ID：10817182
> 
> 赞同：0
> 
> 时间：2012-05-30T13:21:16.190
> 
> 标签：architecture, amazon-web-services, amazon-dynamodb

我们正在通过移除一些微软服务器/实例/硬件来重构我们的环境，并迁移到亚马逊云网络服务（例如 DynamoDB）

我知道亚马逊会根据服务的使用情况对服务收费，这对生产环境很有意义，但我们也有需要迁移到云的 dev、systest、uat 环境，我们不希望公司为此付费由于内部开发或测试过程而导致的使用。

是否有任何可以避免/降低成本的最佳实践

谢谢

明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:43:16.997

亚马逊为大多数服务提供“免费套餐”定价，允许您免费进行大量开发（假设您没有进行任何大容量负载测试或测试大型数据集......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:52:04.843

使用 Dynamo，您可以获得 5 次免费读取/写入 - 一张桌子足够了，我有 10 个活动桌子，全部设置为 5 / 5，我认为每月花费大约 30 美元，这当然不会破坏银行。EC2 微型实例是完全免费的，对于您的过渡期应该绰绰有余。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:49:21.663

用于开发目的的 EC2 实例可以在需要时启动/停止以帮助节省成本。如前所述，AWS 确实有免费使用套餐，但一些免费配额会在一年后到期（有关详细信息，请参阅[http://aws.amazon.com/free/](http://aws.amazon.com/free/)）。

[Eucalyptus](http://en.wikipedia.org/wiki/Eucalyptus_%28computing%29)提供了一个与 S3 兼容的实现，您可以在本地进行测试。

# vb.net - 排序 Ms Access 表记录和 VB.net

> ID：10817190
> 
> 赞同：0
> 
> 时间：2012-05-30T13:21:50.893
> 
> 标签：vb.net, ms-access, combobox, ms-access-2010

我已经在 vb.net 2010 上实现了一个系统，其数据库位于 Ms Access 2010 (.accdb) 上。我必须通过将其数据源直接绑定到表来将表中的记录读取到组合框。问题是组合框中的数据没有排序，因为在数据库本身中，记录没有排序。我怎样才能实现排序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:33:33.853

使用语句的`ORDER BY`子句`SELECT`：[ORDER BY Clause](http://office.microsoft.com/en-us/access-help/order-by-clause-HP001032258.aspx "ORDER BY 条款 - 访问 - Office.com")

# c++ - 如果 recv 和 send 匹配，mpi 请求是否完成

> ID：10817192
> 
> 赞同：1
> 
> 时间：2012-05-30T13:21:58.353
> 
> 标签：c++, mpi, boost-mpi

从两个匹配的非阻塞发送和接收操作中仅检查一个请求对象是否足够。

这会很棒，因为这会减少在我的程序中处理请求对象的工作量。

这里有一个 boost mpi 的小例子：

```
#include <boost/mpi.hpp>

int main(int argc, char* argv[]) {
    // initialize mpi

    mpi::environment env(argc, argv);
    boost::mpi::communicator world;
    boost::mpi::request req0, req1;
    double blub;
    if(world.rank()==1)
       req1 = world.irecv(0, 23, blub);
    if(world.rank()==0)
       req0 = world.isend(0, 23, blub);

    //now I want to synchronize the processors is this enough?
    req0.wait();
    //or do I also need this line
    req1.wait();

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T13:28:37.843

Rank 1 没有 valid `req0`， rank 0 没有 valid `req1`；它们是仅对实际执行非阻塞操作（并返回请求的句柄）的任务有效的请求。

所以不，这里的排名都不需要（甚至不能）对两个请求都调用 wait ；每个调用一个等待它的请求，例如

```
if(world.rank()==0)
    req0.wait();
if(world.rank()==1)
    req1.wait(); 
```

或者，更好（我假设等级 0 的 isend 应该去等级 1，而不是 0）：

```
boost::mpi::request req;
...
if(world.rank()==1)
   req = world.irecv(0, 23, blub);
if(world.rank()==0)
   req = world.isend(1, 23, blub);

if (world.rank() == 0 || world.rank() == 1)
   req.wait(); 
```

请注意，当您*确实*需要等待多个请求对应的多个操作时，您可以拥有一个请求列表并调用[wait_all](http://www.boost.org/doc/libs/1_49_0/doc/html/boost/mpi/wait_all.html)。

# c# - 2D 球碰撞和分辨率

> ID：10817194
> 
> 赞同：0
> 
> 时间：2012-05-30T13:22:06.620
> 
> 标签：c#, collision

我创建了一个简单的方法，通过计算距离来检测两个球之间的碰撞。我想知道，一旦检测到碰撞，我如何更新球的位置以不允许球相互进入（相交）

```
 private void BallCollisionBlueRed()
    {
        double fDist;
        CentreAX = redBall.Left + ball.Width / 2;
        CentreAY = redBall.Top + ball.Height / 2;
        CentreBX = blueBall.Left + ball.Width / 2;
        CentreBY = blueBall.Top + ball.Height / 2;

        vDx = CentreBX - CentreAX;
        vDy = CentreBY - CentreAY;
        fDist = Math.Sqrt((vDx * vDx) + (vDy * vDy));

        if (fDist < radA + radB)
        {
           // Help!
        }
    } 
```

vDx 和 vDy 仅用于保存计算值。我用箭头键（玩家）控制两个球，我不希望它们相互反弹，但不允许它们相交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:27:14.627

您需要在脑海中想象互动。当距离正好为零时，物体会反弹并开始彼此远离。

从大学开始计算新轨迹已经太久了，但主要的是，如果 radA + radB - fDist 为 -4，您需要将新距离设置为 radA + radB + 4。

这将适应您拥有的任何低 fps（直到它们滞后到如此严重以至于在您检测到碰撞之前它们互相穿过：-p

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:27:33.473

对于这类物理学的一些好的建议，我会阅读这篇博文：http: [//www.wildbunny.co.uk/blog/2011/04/06/physics-engines-for-dummies/](http://www.wildbunny.co.uk/blog/2011/04/06/physics-engines-for-dummies/)

# android - 如何在 Android 中检查 Internet 连接是否有 wifi 连接？

> ID：10817207
> 
> 赞同：5
> 
> 时间：2012-05-30T13:22:47.203
> 
> 标签：android

当wifi连接到无线调制解调器互联网覆盖范围是否存在时，它总是说是的，你连接它只检查wifi连接而不是互联网连接，那么如何处理这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:26:13.653

1.）你可以检查它

```
URL url = new URL("YOUR urlString");
HttpURLConnection conn= (HttpURLConnection) url.openConnection();
.
.
int responseCode = conn.getResponseCode();
//if responseCode = 200 - THEn CONN is connected 
```

或者

2.) 你可以做一些像 dis

```
public static boolean isNetworkAvailable(Activity activity) {
        ConnectivityManager connectivity = (ConnectivityManager) activity
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        if (connectivity == null) {
            return false;
        } else {
            NetworkInfo[] info = connectivity.getAllNetworkInfo();
            if (info != null) {
                for (int i = 0; i < info.length; i++) {
                    if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                        return true;  //<--  --  -- Connected
                    }
                }
            }
        }
        return false;  //<--  --  -- NOT Connected
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:05:01.037

尝试这个。

```
private boolean haveNetworkConnection(Context context)
    {
        boolean haveConnectedWifi = false;
        boolean haveConnectedMobile = false;

        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo[] netInfo = cm.getAllNetworkInfo();
        for (NetworkInfo ni : netInfo)
        {
            if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            {
                if (ni.isConnected())
                {
                    haveConnectedWifi = true;
                    Log.v("WIFI CONNECTION ", "AVAILABLE");
                } else
                {
                    Log.v("WIFI CONNECTION ", "NOT AVAILABLE");
                }
            }
            if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            {
                if (ni.isConnected())
                {
                    haveConnectedMobile = true;
                    Log.v("MOBILE INTERNET CONNECTION ", "AVAILABLE");
                } else
                {
                    Log.v("MOBILE INTERNET CONNECTION ", "NOT AVAILABLE");
                }
            }
        }
        return haveConnectedWifi || haveConnectedMobile;
    } 
```

希望它会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-25T11:21:16.403

使用此代码

```
final ConnectivityManager connectivityManager = (ConnectivityManager)context.
            getSystemService(Context.CONNECTIVITY_SERVICE);

final Network network = connectivityManager.getActiveNetwork();
final NetworkCapabilities capabilities = connectivityManager
            .getNetworkCapabilities(network);

return capabilities != null
                && capabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_VALIDATED); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T13:42:19.800

对，如果您使用 ConnectivityManager，则仅提供连接信息（WiFi、移动设备、WiMax 等）以及是否已连接。

为了确保数据连接，您可以进行 ping：

```
public static boolean ping() {

    try {
        SocketAddress addr = new InetSocketAddress("www.example.com", 80); // Set IP/Host and Port
        Socket socket = new Socket();
        //Connect socket to address, and set a time-out to 5 sec
        socket.connect(addr, 5000);
        //If network isn't conecctet then throw a IOException else socket is connected successfully
        socket.close();
        return true;
    } catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T13:29:42.030

你试过这个吗？

[http://developer.android.com/reference/android/net/NetworkInfo.html#isConnected](http://developer.android.com/reference/android/net/NetworkInfo.html#isConnected) ()

描述说：

> 指示是否存在网络连接，是否可以建立连接并传递数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-07T05:11:41.670

您可以使用它来检查 Android 中的 Internet 连接是否有 wifi 或移动数据连接

```
 public boolean isConnected() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
        boolean NisConnected = activeNetwork != null && activeNetwork.isConnected();
        if (NisConnected) {
            //  if (activeNetwork.getType() == ConnectivityManager.TYPE_MOBILE || activeNetwork.getType() == ConnectivityManager.TYPE_WIFI)
            if (activeNetwork.getType() == ConnectivityManager.TYPE_WIFI) {
           return true;
            } else if (activeNetwork.getType() == ConnectivityManager.TYPE_MOBILE)
                return true;
            else
                return false;
        }
        return false;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-22T13:36:57.070

也就是这样

```
public static boolean isNetworkAvailable(Context context)
{
    ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();
    return networkInfo != null && networkInfo.isConnectedOrConnecting();
} 
```

# php - PHP / Doctrine 1.2 / MySQL - 根据另一个值识别一个值

> ID：10817210
> 
> 赞同：1
> 
> 时间：2012-05-30T13:22:58.320
> 
> 标签：php, mysql, doctrine-1.2, dql

我正在开发一个在线仓库/购物系统（php + 教义 + mysql），其中每个产品可以有多个价格，具体取决于数量。我有两张表（1）产品和（2）价格：

**产品**

```
id    name
1     product1  
2     product2
3     product3 
```

**价格**

```
id  product_id     from    to      price
1   1              1       10      90
2   1              11      20      80
3   1              21      30      70 
```

如您所见，**product1**有 3 个不同的价格。例如，如果客户购买 1 到 10 个产品 1，他应该得到第一个价格 - 90，11 到 20 之间的下一个价格 - 80 等等。

由于计算是**渐进式**的，因此总结果将是：

**发票**

```
id  product_id   quantity    price_id
1   1            10          1
2   1            10          2
3   1            10          3 
```

问题是使用 Doctrine 根据产品数量确定价格水平的最佳方法是什么。

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-30T13:30:12.453

在您的产品模型中创建一个`getPrice()`方法并让它进行计算。然后你可以用:`$product->price`或`$product->getPrice()`. 我会避免尝试使用您的 DQL/SQL 查询进行计算

# javascript - JS页面滚动不起作用

> ID：10817215
> 
> 赞同：0
> 
> 时间：2012-05-30T13:23:12.470
> 
> 标签：javascript, jquery

我写了类似的代码

```
$.ajax({
  type: 'POST',
  url: form.attr('action'),
  data: data,
  dataType: 'html',
  success: function(html){
    $(html).hide().appendTo(parent.find("[data-interactions]")).show().stop().animate({
        scrollTop: $(".vote_feedback_snippet:last-child").offset().top
    }, 1500,'easeInOutExpo'); 
```

当我点击发布按钮时，上面的代码会在列表底部生成新的 HTML 片段 **我想要什么：-** 当新的 Html 片段出现时，它只会滚动到该片段

有人可以帮我吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:27:23.310

尝试：

```
$(html).hide()
.appendTo(parent.find("[data-interactions]"))
.show('fast', function(){
  $('html, body').animate({
     scrollTop:  $(".vote_feedback_snippet:last-child").offset().top
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:30:33.637

使用这个插件：[http ://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

将允许您这样做：

```
$.scrollTo(".vote_feedback_snippet:last-child") 
```

它一直对我有用。

# wordpress - IE8 兼容性 - css 背景和边框

> ID：10817218
> 
> 赞同：1
> 
> 时间：2012-05-30T13:23:19.163
> 
> 标签：wordpress, css

我在 wordpress 网站上使用了一些 CSS。它在 chrome/safari 等中看起来应该是这样，但在 IE8 中通常不正确。

div 有一个背景颜色和 moz-border-radius 用于边框。边框并不重要，但是背景颜色只是延伸了一部分，或者在 IE8 的情况下，根本没有。

示例： http: [//mesirow.btg340.co.uk](http://mesirow.btg340.co.uk)

如果您在页面中间看到新闻通讯注册表格，在 Chrome 等中它有一个漂亮的蓝色背景和边框。然而在 IE 中它只是显示为白色背景而忽略了大部分样式。

如果您随后查看： http: [//mesirow.btg340.co.uk/industries/airlines/](http://mesirow.btg340.co.uk/industries/airlines/)

时事通讯注册位于右侧边栏。在 IE8 中，背景只延伸了一半？

这无疑与 css 相关。我尝试了各种更改，例如使用固定高度等，但到目前为止没有运气:(

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:52:26.523

最后我解决了这个问题......:)

请检查您的 html 代码

```
 <aside id="wpmlwidget-2" class="wpmlwidget">....</aside> 
```

请用 div 替换您的备用代码，这将起作用..ie-8 不支持备用代码。

```
 <div id="wpmlwidget-2" class="wpmlwidget">....</div> 
```

对于 ie-7 或 ie-8 中的边界半径，可以通过 java 脚本检查此链接[http://davidwalsh.name/css-rounded-corners](http://davidwalsh.name/css-rounded-corners)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:56:08.337

您使用`<aside>`了标签，这就是为什么它是 IE 8 的无效标记

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:39:34.653

在 ie8/7 中使用 html5 标记会导致问题。

如果您使用[http://modernizr.com/](http://modernizr.com/)它带有一个 html5 shiv 并且应该允许在 ie7/8 中使用 html5 标签。

# ruby-on-rails - Capybara 无法识别 ajax 加载的元素。？

> ID：10817220
> 
> 赞同：2
> 
> 时间：2012-05-30T13:23:28.383
> 
> 标签：ruby-on-rails, ruby, view, capybara

在我的**Rails 3**应用程序中，我的 HTML 页面上有一个“**图像”，****单击**时会在 html 页面中创建一个“ **div** ”元素。

 **我必须通过**RSpec**测试这个新“ **div** ”的创建（我正在使用**Capybara**进行基于视图的测试）。

 ****我写了以下代码：

```
it "clicks the extended details button" do
    Capybara.default_wait_time = 5
    within('.table_expand') do
      find("#img_dealer_code_04039").click
      should have_selector('#extended_details_04039')
    end
end 
```

是的，我已经`:js=>true`在相应的`describe`.

我认为问题出在 Ajax 时间，所以我添加`Capybara.default_wait_time = 5`了它以使其正确加载。（但它没有工作）

我也尝试`:visible=>true`加入应该`have_selector('#extended_details_04039')`，但没有成功..

有什么我想念的..？？

请帮助我......我很长一段时间都被这个问题困扰了......！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:14:31.307

[https://github.com/rspec/rspec-rails/issues/478](https://github.com/rspec/rspec-rails/issues/478)

你确定你在现场没有重复的ID吗？尝试将其保存到文件并检查重复来源。

要查看页面上发生了什么，请尝试 page.save_and_open_page 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:46:23.667

img 是您 ID 的一部分还是标签类型？我相信你应该有

```
find("img#dealer_code_0409").click 
```******

# installation - 应用程序和驱动程序安装

> ID：10817221
> 
> 赞同：1
> 
> 时间：2012-05-30T13:23:31.893
> 
> 标签：installation, installshield

我正在制作安装项目（目前使用的是 VS2010 附带的 installshield le）。

该项目包含一个文件 - 应用程序 .exe 文件。和驱动文件。驱动程序文件是应在安装过程中安装的 .inf 和 .sys。每个操作系统平台 (64/32) 都有不同的 .inf 和 .sys。

我如何使用 InstallShield LE 做到这一点？如果您插入 USB 设备，您将在设备管理器下看到它，并且可以手动设置驱动程序，但我想在安装过程中自动设置。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:14:42.993

严格来说，ISLE 不支持这个。解决方法：

1) 查看如何在 WiX 中进行操作：

[使用 WiX 安装驱动程序](http://www.codeproject.com/Articles/44191/Drivers-Installation-With-WiX)

2) 调整解决方案以封装在 WiX 合并模块中。

3) 将合并模块添加到您的 InstallShield LE 解决方案中：

[使用 Windows Installer XML 增强 InstallShield - 证书](http://blog.iswix.com/2011/01/augmenting-installshield-using-windows_19.html)

如果要花几天时间才能弄清楚这一切（很可能），您可能只想升级到 IS 专业版，它有一个简单的向导，用于构建安装驱动程序的安装程序。

# java - 休眠 @ManyToOne @OneToMany 用于同一实体

> ID：10817223
> 
> 赞同：0
> 
> 时间：2012-05-30T13:23:38.343
> 
> 标签：java, hibernate

我正在尝试创建一个实体，该实体具有与他相同类型的父和子（如树）。

这是代码：

> @Entity @Table(name = "areas") 公共类区域 {

```
@Id
@Column(name = "id")
@GeneratedValue
private int id;

@Column(name = "name")
private String name;

@Column(name = "area_type", nullable = true)
private int areaType;

@ManyToOne
@JoinColumn(name="parent_area_id")
private Area parentArea;

@OneToMany (fetch = FetchType.EAGER, mappedBy = "parentArea")
@Cascade({CascadeType.ALL})
private Collection<Area> childAreas = new ArrayList<Area>(); 
```

当我尝试将此类实体保存到我得到的数据库时，我首先在堆栈溢出的一些帖子中看到了此代码：

```
nested exception is org.hibernate.loader.MultipleBagFetchException: cannot simultaneously fetch multiple bags 
```

此外，我对这个设计还不太了解。

如果子区域由父区域映射。这不意味着“这个”区域将在孩子们中间吗？换句话说......子区域不会是“这个”类的父区域的子区域。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:44:15.707

[这](https://stackoverflow.com/questions/4334970/hibernate-cannot-simultaneously-fetch-multiple-bags)似乎是一个类似的问题。你应该试试：

```
@LazyCollection(LazyCollectionOption.FALSE)
@OneToMany (mappedBy = "parentArea")
@Cascade({CascadeType.ALL})
private Collection<Area> childAreas = new ArrayList<Area>(); 
```

# haskell - Haskell 卡在解析布尔逻辑

> ID：10817229
> 
> 赞同：0
> 
> 时间：2012-05-30T13:24:09.917
> 
> 标签：haskell, parsec

我目前正在为一种简单的编程语言编写解析器。它到了那里但是我无法解析布尔逻辑语句，例如“i == 0 AND j == 0”。我得到的只是“以防万一”

当我自己解析一个布尔表达式时，它可以正常工作，例如“i == 0”。注意“i == 0 a”也将返回布尔语句，但“i == 0 AND”不返回任何内容。

有人可以帮忙吗？

虽然上面的输入可以正常工作，例如运行 parseBoolean "i == 0"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:28:29.690

正如@hammar 指出的那样，你应该使用`Text.Parsec.Expr`这种东西。然而，既然这是家庭作业，也许你必须努力去做！

问题在于`parseArithmetic`，您允许`anyChar`成为运算符，但在 case 语句中，您只允许`+`, `-`, `*`, `/`, `%`, 和`^`. 当`parseArithmetic`尝试解析`i == 0`时，它使用第一个`=`作为运算符，但无法解析`intExp2`第二个中的一个`=`，并且在进入 case 语句之前在 monad 和回溯中失败。但是，当您尝试 parse 时`i == 0 AND j == 0`，它​​得到了`i ==`部分，但随后它认为有一个算术表达式`0 A ND`， where`A`是一个运算符，并且`ND`是某个变量的名称，所以它到达了 case 和**boom**。

顺便说一句，您可以让解析器返回一个函数而不是字符串，然后直接应用该函数，而不是使用解析器来匹配一个字符串，然后再使用 case 语句来匹配它：

```
 parseOp :: String -> a -> Parser a
 parseOp op a = string op >> spaces >> return a

 parseLogic :: Parser BoolExp 
 parseLogic = do 
    boolExp1 <- parseBoolExp 
    spaces 
    operator <- choice [ try $ parseOp "AND" And
                       , parseOp "OR" Or
                       , parseOp "XOR" XOr
                       ]
    boolExp2 <- parseBoolExp
    return $ operator boolExp1 boolExp2

parseBoolean :: Parser BoolExp 
parseBoolean = do       
   intExp1 <- parseIntExp 
   spaces 
   operator <- choice [ try $ parseOp "==" Main.EQ
                      , parseOp "=>" GTorEQ
                      , parseOp "<=" LTorEQ 
                      ]
   intExp2 <- parseIntExp
   return $ operator intExp1 intExp2 
```

# c# - 使用反射在方法调用中获取正确的返回值

> ID：10817233
> 
> 赞同：3
> 
> 时间：2012-05-30T13:24:25.160
> 
> 标签：c#, generics, reflection, casting

我的类中有以下通用方法，可用作存储库模式：

```
public DbSet<T> GetAll<T>() where T : class
{
  return dbContext.Set<T>();
} 
```

现在，我想获取数据库中属于实现特定接口（`IChangeTrackingEntity`）的实体类的所有实体的列表。所以目前大约有 10 个特定的表/类符合这一点，但我不想向这些表添加 10 个硬编码调用，所以我想使用反射来代替（也可能是实现的类这个接口将来会改变，我不想记住在这里也改变并使代码相互依赖）。

有效但我不想要的代码示例：

```
var result = new List<IChangeTrackingEntity>();
using ( var repository = new DbRepository())
{
  result.AddRange( repository.GetAll<FirstTypeThatImplementsInterface>() );
  result.AddRange( repository.GetAll<SecondTypeThatImplementsInterface>() );
  result.AddRange( repository.GetAll<ThirdTypeThatImplementsInterface>() );
  result.AddRange( repository.GetAll<FourthTypeThatImplementsInterface>() );
  result.AddRange( repository.GetAll<FifthTypeThatImplementsInterface>() );
}
return result; 
```

我已经很接近了，但是我无法完成将返回结果`Invoke`转换为正确类型的最后一部分工作。我目前得到的是这样的：

```
var result = new List<IChangeTrackingEntity>();
var method = typeof (DbRepository).GetMethod("GetAll");
using ( var repository = new DbRepository())
{
  foreach (var p in typeof(AnchorDbContext).GetProperties())
  {
    if (p.PropertyType.IsGenericType && p.PropertyType.GetGenericTypeDefinition() == typeof(DbSet<>))
    {
      var pType =  p.PropertyType.GetGenericArguments()[0];
      if (pType.GetInterface("IChangeTrackingEntity") != null)
      {
        var genericMethod = method.MakeGenericMethod(new[] {pType});
        result.AddRange(genericMethod.Invoke(repository, null) as DbSet<IChangeTrackingEntity>);
      }
    }
  }
  return result;
} 
```

上面的问题是 Invoke 调用返回 a `object`，我需要将其转换为`DbSet<pType>`.

在我当前的代码`genericMethod.Invoke(repository, null) as DbSet<IChangeTrackingEntity>`返回`null`中，表明我无法根据需要转换返回值，因此我需要特定的返回值类型，而不是我认为的接口。

知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:38:04.417

尝试投射到`IEnumerable<IChangeTrackingEntity>`. 由于协/逆变，这应该起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:32:58.017

我对这个具体问题了解不多，但您似乎正在从`DbSet<T> where T : IChangeTrackingEntity`to 转换`DbSet<IChangeTrackingEntity>`。这称为协变或逆变（我总是在它们之间感到困惑......），它只有在`DbSet<>`是一个接口时才有效。所以，铸造在这里不起作用。如果可以，请使用等效接口，或者创建一个接受 DbSet where T:`IChangeTrackingEntity`并`DbSet<IChangeTrackingEntity>`以某种方式返回的通用方法。如果没有人在我之前回答过，我会尝试弄清楚如何做到这一点，并发布一个答案（不太可能在这个网站上：P）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:30:51.257

我想你需要看看[这个问题](https://stackoverflow.com/questions/232535/how-to-use-reflection-to-call-generic-method)：

```
MethodInfo method = typeof(Sample).GetMethod("GenericMethod");
MethodInfo generic = method.MakeGenericMethod(myType);
generic.Invoke(this, null); 
```

# gwt - JSNI GWT jQuery

> ID：10817236
> 
> 赞同：4
> 
> 时间：2012-05-30T13:24:31.587
> 
> 标签：gwt, jsni

我有一个文件 jQuery 来创建翻牌效果，我将其更改为 JSNI，使用本机函数但错误。我不知道怎么了。有谁能够帮我？这是我的本机功能：

```
public native void flip() /*-{
$(document).ready(function () {
    $('#nav-list-example div div.back').hide().css('left', 0);

    function mySideChange(front) {
        if (front) {
            $(this).parent().find('div.front').show();
            $(this).parent().find('div.back').hide();

        } else {
            $(this).parent().find('div.front').hide();
            $(this).parent().find('div.back').show();
        }
    }

    $('#nav-list-example div').hover(
        function () {
            $(this).find('div').stop().rotate3Di('flip', 250, {direction: 'clockwise', sideChange: mySideChange});
        },
        function () {
            $(this).find('div').stop().rotate3Di('unflip', 500, {sideChange: mySideChange});
        }
    );
});
         }-*/; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T13:57:15.940

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T19:07:17.790

我总是用这个：

```
$wnd.jQuery($doc).ready(function(){}); 
```

在函数内部，您可以为 jQuery 创建一个“别名”，例如：

```
function(){
  var _ = $wnd.jQuery;
  // go on....
} 
```

希望能帮助到你 ：）

* * *

顺便说一句：这就是我们在 GWT-Bootstrap 中的做法。

# java - 在 Java 中使用 iaik_full_signed.jar 解密 pfx OR p12 失败

> ID：10817237
> 
> 赞同：1
> 
> 时间：2012-05-30T13:24:33.787
> 
> 标签：java, security, pfx, pkcs#12

我正在编写代码来使用上述库解密 .pfx 或 .p12 证书。它只是将密码输入 charArray。但它无法解密它。它会生成以下异常。

```
iaik.pkcs.PKCSException: Unable to decrypt PrivateKey! java.security.GeneralSecurityException: Unable to decrypt private key: javax.crypto.BadPaddingException: Given final block not properly padded
at iaik.pkcs.pkcs12.AuthenticatedSafe.decrypt(Unknown Source)
at iaik.pkcs.pkcs12.PKCS12.decrypt(Unknown Source)
at com.code.others.SecurityCerts.main(SecurityCerts.java:50) 
```

非常感谢任何帮助。

# android - ListView 项目在 ArrayAdapter 上混淆了

> ID：10817238
> 
> 赞同：2
> 
> 时间：2012-05-30T13:24:38.070
> 
> 标签：android

我正在使用`ArrayAdapter`我的`ListView`，在第一次一切都正确显示时，问题只是`ListView`当我滚动浏览它时它是滞后的。所以我找到了一个解决方案`ViewHolder`，最后我的 ListView 可以平滑滚动，但有个缺点，我的项目`ListView`混淆了。

我该如何解决？

这是我的`getView()`方法`ArrayAdapter`：

```
public class VideoLocationAdapter extends ArrayAdapter<VideoLocationDB> {
        public ImageLoader imageLoader;
        ImageLoader loader = null;

        public VideoLocationAdapter(Context context, int resource,
                VideoLocationDB[] videoLocationDBs) {
            super(context, resource, videoLocationDBs);
            loader = new ImageLoader(context);
        }

        private LayoutInflater layoutInflator;

        @Override
        public View getView(final int position, View convertView,
                ViewGroup parent) {

            FeedViewHolder feedViewHolder;

            if (convertView == null) {

                convertView = LocationsListActivity.this.getLayoutInflater()
                        .inflate(R.layout.listitems, null, true);

                feedViewHolder = new FeedViewHolder();
                feedViewHolder.titleView = (TextView) convertView.findViewById(R.id.txt_title);
                feedViewHolder.descView = (TextView) convertView.findViewById(R.id.txt_list_desc);
                feedViewHolder.more = (TextView) convertView.findViewById(R.id.txt_more);
                feedViewHolder.distanceView = (TextView) convertView.findViewById(R.id.txt_distance);
                feedViewHolder.v  = (ImageView) convertView.findViewById(R.id.image);

                final VideoLocationDB vidLocation = videoLocationsDB[position];

                // Image
                String url = vidLocation.documentary_thumbnail_url;
                String name = vidLocation.name;
                feedViewHolder.v.setTag(url);

                loader.DisplayImage(url, LocationsListActivity.this, feedViewHolder.v, name);

                // Title        
                String title = vidLocation.name;
                feedViewHolder.titleView.setText(title.toUpperCase());
                Typeface fontRegular = Typeface.createFromAsset(getAssets(),
                        "miso.otf");
                feedViewHolder.titleView.setTypeface(fontRegular);

                // Description          
                String desc = vidLocation.text;
                feedViewHolder.descView.setText(desc);
                Typeface fontLight = Typeface.createFromAsset(getAssets(),
                        "miso-light.otf");
                feedViewHolder.descView.setTypeface(fontLight);

                // More     
                feedViewHolder.more.setText(getString(R.string.de_list_more));
                feedViewHolder.more.setTypeface(fontLight);

                // Distance
                feedViewHolder.distanceView.setTypeface(fontRegular);

                if (location != null) {
                    double lat = location.getLatitude();
                    double lng = location.getLongitude();

                    double lat2 = roundDown(vidLocation.latitude);
                    double lng2 = roundDown(vidLocation.longitude);

                    if (countDistance(lat, lng, lat2, lng2) >= 500) {
                        double kilometer = countDistance(lat, lng, lat2, lng2) / 1000;
                        int decimalPlaces = 1;
                        BigDecimal decimal = new BigDecimal(kilometer);
                        decimal = decimal.setScale(decimalPlaces,
                                BigDecimal.ROUND_HALF_UP);
                        double new_km = decimal.doubleValue();
                        feedViewHolder.distanceView.setText(new_km + " km");
                    } else {
                        int decimalPlaces = 1;
                        BigDecimal decimal = new BigDecimal(countDistance(lat, lng,
                                lat2, lng2));
                        decimal = decimal.setScale(decimalPlaces,
                                BigDecimal.ROUND_HALF_UP);
                        double meter = decimal.doubleValue();
                        feedViewHolder.distanceView.setText(meter + " m");
                    }
                    videoLocationAdapter.notifyDataSetChanged();
                }

                convertView.setTag(feedViewHolder);

            } else
            {
                feedViewHolder = (FeedViewHolder) convertView.getTag();
            }
            return convertView; 
            }

static class FeedViewHolder{

        TextView titleView;
        TextView descView;
        TextView more;
        TextView distanceView;
        ImageView v;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:27:51.283

你已经在 if (convertView == null) {} 和 else 之后设置了文本

if (convertView == null) { //创建视图 }else { //从 convertView 获取视图 }

这里设置视图中的文本

看

[http://android.amberfog.com/?p=296](http://android.amberfog.com/?p=296)

```
@Override
        public View getView(int position, View convertView, ViewGroup parent) {
            System.out.println("getView " + position + " " + convertView);
            ViewHolder holder = null;
            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.item1, null);
                holder = new ViewHolder();
                holder.textView = (TextView)convertView.findViewById(R.id.text);
                convertView.setTag(holder);
            } else {
                holder = (ViewHolder)convertView.getTag();
            }

         holder.textView.setText(mData.get(position));//<========== see it .....
            return convertView;
        }

    } 
```

将此代码放在 if/else 之后

```
 final VideoLocationDB vidLocation = videoLocationsDB[position];

                // Image
                String url = vidLocation.documentary_thumbnail_url;
                String name = vidLocation.name;
                feedViewHolder.v.setTag(url);

                loader.DisplayImage(url, LocationsListActivity.this, feedViewHolder.v, name);

                // Title        
                String title = vidLocation.name;
                feedViewHolder.titleView.setText(title.toUpperCase());
                Typeface fontRegular = Typeface.createFromAsset(getAssets(),
                        "miso.otf");
                feedViewHolder.titleView.setTypeface(fontRegular);

                // Description          
                String desc = vidLocation.text;
                feedViewHolder.descView.setText(desc);
                Typeface fontLight = Typeface.createFromAsset(getAssets(),
                        "miso-light.otf");
                feedViewHolder.descView.setTypeface(fontLight);

                // More     
                feedViewHolder.more.setText(getString(R.string.de_list_more));
                feedViewHolder.more.setTypeface(fontLight);

                // Distance
                feedViewHolder.distanceView.setTypeface(fontRegular);

                if (location != null) {
                    double lat = location.getLatitude();
                    double lng = location.getLongitude();

                    double lat2 = roundDown(vidLocation.latitude);
                    double lng2 = roundDown(vidLocation.longitude);

                    if (countDistance(lat, lng, lat2, lng2) >= 500) {
                        double kilometer = countDistance(lat, lng, lat2, lng2) / 1000;
                        int decimalPlaces = 1;
                        BigDecimal decimal = new BigDecimal(kilometer);
                        decimal = decimal.setScale(decimalPlaces,
                                BigDecimal.ROUND_HALF_UP);
                        double new_km = decimal.doubleValue();
                        feedViewHolder.distanceView.setText(new_km + " km");
                    } else {
                        int decimalPlaces = 1;
                        BigDecimal decimal = new BigDecimal(countDistance(lat, lng,
                                lat2, lng2));
                        decimal = decimal.setScale(decimalPlaces,
                                BigDecimal.ROUND_HALF_UP);
                        double meter = decimal.doubleValue();
                        feedViewHolder.distanceView.setText(meter + " m");
                    }
                    videoLocationAdapter.notifyDataSetChanged();
                } 
```

# java - PDF页面底部的表格位置

> ID：10817244
> 
> 赞同：0
> 
> 时间：2012-05-30T13:24:41.790
> 
> 标签：java, alignment

我制作了一个 Table 对象，它正确显示在我的 PDF 上，但我想定位表格，使其位于页面底部。我一直试图打电话

```
Table table = new Table(3);
table.setAlignment(Element.ALIGN_BOTTOM); 
```

但这似乎并没有改变我桌子的位置。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:28:41.600

你能多说一些关于你的桌子的事情吗，意思是它是哪张桌子？(xyzTable) 那些 x 和 y 是什么？如果桌子是你的，请告诉我哪个是超级班级。以及您正在使用的 LayOut。你说的是javafx表还是swing表。

# c++ - 用线段和另一个多边形创建一个多边形

> ID：10817251
> 
> 赞同：1
> 
> 时间：2012-05-30T13:25:04.927
> 
> 标签：c++, algorithm, matlab, geometry

我想创建一个新的多边形，给定一个初始多边形和一条线段，如下所示：

![在此处输入图像描述](../Images/0b1c37b0e8d55c23d83cc790dfec96c0.png)

在上图中，我有一个红色多边形（初始多边形）（QBDFG-...-PQ）和一条线段（由绿色指定）（A - H），现在我的问题是如何使用它创建一个多边形多边形和这条线段，**从 A 开始，到 H 并继续 IJ-...-PQ 并以 A 结束**。

注意：解决方案既不是（ABCA），也不是（CDEC）或（EFGHE）

为了更清楚，假设我们从线段中切割出红色多边形之外的所有东西，然后填充由该线段创建的区域（如 ABCA 和 EFGHE）。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:44:28.700

A 点位于 QB 段上，H 点位于 GI 段上。所以看起来你只需要从列表中排除 Q 和 B 之间的顶点，并将它们替换为 A, H

QBDFGIJKLMNOPQ

Q- **A** - *BDFG* - **H** -IJKLMNOPQ

QAHIJKLMNOPQ

# c++ - 为什么无效套接字在 WinSock2.h (c++) 中定义为 ~0？

> ID：10817252
> 
> 赞同：22
> 
> 时间：2012-05-30T13:25:11.913
> 
> 标签：c++, sockets, network-programming

在WinSock2.h中，invalid socket和socket error是这样定义的？这有什么意义吗？

```
#define INVALID_SOCKET  (SOCKET)(~0)
#define SOCKET_ERROR            (-1) 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-08T03:21:41.247

很久以前，一个寒冷的雨天的清晨，在华盛顿州西雅图一个古色古香但不断发展的郊区，在雾蒙蒙的绿色覆盖的山丘中，有一小群蔓延的红砖建筑，其中一栋是一个中等大小的会议室，越来越多的网络软件工程师、经理和架构师聚集在这里。会议开始时已经足够安静了，大部分是男性群体，啜饮着他们的茶和咖啡，旋转着他们的自动铅笔，同时在他们的记事本上乱涂乱画，或者在他们的掌上电脑上刮擦（有*那个*拿着牛顿的人，但每个人都忽略了他）。

当演示者继续滚动浏览源代码时，他被 5 位软件架构师中的一位拦住了，他们没有被特别邀请参加评审，但还是出现了。“请告诉我，那是*什么*。”他怒火中烧，像克林顿总统一样摇着手指。主持人停下来盯着手指，发现自己不知何故被建筑师继续摇晃时手指的摆动所迷住了。“我说过，”他开始重复。

主持人抬头看着屏幕，并没有发现任何异常。“你在说什么？” 他问。

建筑师挑了挑眉，脸上先是惊愕，然后是愤愤不平，然后是便秘，大喊“*这*是公然违反编码风格准则！”。

观察者之间开始窃窃私语，想知道这到底是怎么回事。但是，演示者却是一头雾水（第二种），很快就感谢了反馈，并继续进行了审查。

“我*不会*被忽视的！”建筑师尖声尖叫，猛地站起身来，手掌砰地一声砸在桌面上。

当拳头捶桌子时，房间里爆发了，经理们开始想办法遮住他们的屁股，工程师们开始翻阅他们的编码风格手册，包括目录、索引、脚注和参考资料。

演示者表面上没有受到干扰，但感到很恼火，因为他迫切希望完成审查，这样他就可以在斯诺夸尔米进行滑雪之旅。“你说的是类型不匹配？”他随口问道。

建筑师微微一怔，但很快就镇定下来，“显然”，他哼了一声。

演示者将“-1”两个字符替换为“~0”，转身。建筑师仔细检查了更改，然后是屏幕的其余部分，然后查阅了他的笔记，最后又坐了下来。

其余的审查很顺利。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-30T13:38:11.330

在二进制补码系统上（并且 Windows 始终是二进制补码），`~0`等于`-1`，因此对编译器没有意义。

对读者来说可能有一个意义：`~0`强调它是一个所有位都设置的值，而`-1`强调它是一个小于 0 的值 1。

在旁边：

在不是二进制补码的系统上，并假设它`SOCKET`是无符号类型，通常*写*`(SOCKET)(~0)`. 原因是在这样的系统上，`~0`不表示值 -1，它是`INT_MIN`、负零或陷阱表示之一。因此，它不一定会转换为类型`SOCKET`为所有位为零的值，而是将转换为`INT_MAX+2`、`0`或 goodness-knows-what （可能是所有位设置的值）。

所以通常你应该初始化无符号类型`-1`以获取所有位设置的值。如果您知道要处理的无符号类型，则*可以*使用`UINT_MAX`、 或或类似的。`~0UL`但这不值得，因为`-1`适用于所有无符号类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T16:55:22.293

主要是草率。-1 和 ~0 实际上是同一件事。

您可能会争辩说 ~0 是更好的样式，因为套接字是无符号整数，但实际上它对于任何实际目的都没有任何区别。

因为他们使用“#define”而不是“const unsigned”，所以你仍然对陌生事物持开放态度。例如

```
 unsigned   a = SOCKET_ERROR;
    long long  b = a;
    if (b != SOCKET_ERROR)
        std::cout << "????\n"; 
```

可能会给一些人一个惊喜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T13:50:08.360

因为 SOCKET 是无符号的，所以不能使用 (-1)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T19:49:12.663

`INVALID_SOCKET`用于返回 a 的函数`SOCKET`，它是一个指针（很像 a `HANDLE`）。在 32 位系统上它将是一个 32 位值，而在 64 位系统上它将是一个 64 位值。

当正确转换为等效大小的整数时，它将与`-1`. 但是不要假设它总是会被正确地投射会更安全。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-14T11:32:59.297

每个 (-1) 都是 (~0) 但不是每个 (~0) 都是 (-1)。

# c++ - 在 C++ 中连接字符串时令人困惑

> ID：10817253
> 
> 赞同：0
> 
> 时间：2012-05-30T13:25:21.397
> 
> 标签：c++, string

我只是尝试测试如何在 C++ 中拆分单词，但遇到了非常未知的错误。这个问题真的让我发疯，我不知道为什么会这样。

这是我的代码：

```
std::string key = "hello world";
std::string word = "";

for (int i = 0; i < (int)key.length(); i++)
{
    if (std::isspace(key[i]) || key[i] == '\0')
    {
        std::cout << word << "\n";
        word.clear();
    }
    else
        word += key[i];
} 
```

结果只是“你好”，我试图调试并弄清楚为什么在`isspace`条件之后停止连接这个词？那么有人可以请我指出正确的方向吗？

谢谢

编辑：尝试了以下，现在它到底缺少字母d？

```
 if (std::isspace(key[i]) || key[i + 1] == '\0')
    { 
```

编辑2：解决了这个问题：

```
 if (std::isspace(key[i]) || key[i + 1] == '\0')
    {
        if (key[i + 1] == '\0')
            word += key[i]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:29:28.760

`key[j] == 0`永远不会发生，字符串长度不计算终止 0，所以最后一个单词永远不会被打印出来。

删除该测试，并`std::cout << word`在循环后添加一秒钟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T13:37:52.410

### 为什么它不起作用

因为这个条件永远不会满足：

```
key[i] == '\0' 
```

因为`j`总是小于 key.length() 并且（理论上）'\0' 字符应该在 key[key.length()] 你永远不会到达它，因此不会打印出第二个单词。

您将密钥更改为：

```
std::string key = "hello world again"; 
```

你会看到它打印

```
hello
world 
```

但它不会打印`again`。

### 从 C 的角度来看

C-String（不是 C++ std::string）以 '\0' 终止
因此，如果您想继续沿当前路径查找 '\0' 字符，则需要使用 C-Strings。

为此，您可以将`for()`其更改`j`为. 但要小心 C++ std::string 不像 C-String。at 的字符无效，您无权访问它。您应该做的是将 C++ std::string 转换为带有.`<=``key.length()``key[key.length()]``c_str()`

```
 char tmp = key.c_str()[j];
    if (std::isspace(tmp) || tmp == '\0') 
```

### 或者

您可以在循环后打印单词（如果它不为空）

```
std::string key = "hello world";
std::string word = "";

for (int j = 0; j < (int)key.length(); j++)
{ 

     if (std::isspace(key[j]) || key[i] == '\0')
     {
           std::cout << word << "\n";
           word.clear();
     }
     else
           word += key[j];
}
if (!word.empty())
{    std::cout << word << "\n";
} 
```

# jquery - Fancybox 中的附加按钮

> ID：10817256
> 
> 赞同：0
> 
> 时间：2012-05-30T13:25:27.553
> 
> 标签：jquery, fancybox

我想在 fancybox 中创建额外的按钮（靠近图像的边框）。我尝试使用`beforeShow()`and`afterShow()`方法，但是当我在内部调用`this.content`or时`this.inner`，我得到一个 javascript 错误 - 这些变量是未定义的。

另一件事是，我必须获取每个 A 元素的其他属性。所以当我打电话时`this.rel`，或者`this.alt`我再次遇到未定义的错误。

你有一些想法如何找到我的问题的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:29:42.883

您可以尝试使用回调将任何新的*html*附加到`.fancybox-wrap`容器中，例如：`afterShow`

```
afterShow : function(){
 var myContent = '<div id="myContent">{my html content here}</div>'; 
 $(".fancybox-wrap").append(myContent);
} 
```

用于`CSS`定位（绝对）框内的新内容

删除它也是一个好主意`afterClose`，否则下次打开fancybox时会重新添加它

```
afterClose: function(){
 $(".fancybox-wrap #myContent").remove();
} 
```

另一方面，为了从触发 fancybox 的选择器中获取其他属性，请`$(this.element)`在任何回调函数中使用，例如：

```
beforeShow: function(){
 var thisAlt = $(this.element).attr("alt");
 var thisRel = $(this.element).attr("rel");
} 
```

您还可以使用 HTML5`data-*`属性，例如

```
<a class="fancybox" data-width="500" data-height="320" .... 
```

并获得他们的价值观

```
var thisWidth = $(this.element).data("width");
var thisHeight = $(this.element).data("height"); 
```

或使用这些值直接为fancybox分配一个新大小，例如

```
afterShow: function(){
   this.width = $(this.element).data("width");
   this.height = $(this.element).data("height");
} 
```

**注意**：所有这些信息都适用于 fancybox v2.x。只要。

# android - 如何通过进度条更新实现多次下载？

> ID：10817257
> 
> 赞同：1
> 
> 时间：2012-05-30T13:25:28.420
> 
> 标签：android, android-asynctask, android-gridview, android-progressbar

描述：我有一个网格视图，横向模式有 4 个项目，纵向模式有 3 个项目。网格元素是杂志缩略图。单击该杂志的缩略图开始下载，并出现一个水平进度条，显示下载进度。但是当我一个接一个地点击两个缩略图时，后来点击的缩略图的进度条只会更新，最后损坏的杂志被下载了。我使用异步任务进行杂志下载。

代码：

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

    progress = (ProgressBar) arg1.findViewById(R.id.progress);
    thumbnail = (ImageView) arg1.findViewById(R.id.thumbnail);

    thumbnail.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // Download Magazine
             downloadMagazine.execute(bank.get(index).getPdfLink());

            }
    });

}

class DownloadMagazineTask extends AsyncTask<String, Integer, Long> {
    File sdDir = Environment.getExternalStorageDirectory();

    @Override
    protected void onPreExecute() {

       progress.setVisibility(View.VISIBLE);

    }

    @Override
    protected Long doInBackground(String... arg0) {

        String[] urls = arg0;

        try {
            URL url = new URL(urls[0]);
            URLConnection con = url.openConnection();
            int fileLength = con.getContentLength();

            InputStream input = new BufferedInputStream(url.openStream());

            File file = null;

            File dir = new File(sdDir + "/BeSpoken/pdfs");
            boolean flag = dir.mkdirs();
            if (flag)

                System.out.println("Directory created");
            else {
                System.out.println("Directory not created");
                file = new File(dir+ "/"+ bank.get(index).getPdfLink().substring(bank.get(index).getPdfLink().lastIndexOf("/")));

            }
            OutputStream output = new FileOutputStream(file);

            byte data[] = new byte[1024];
            long total = 0;

            int count;
            while ((count = input.read(data)) != -1) {
                total += count;
                // publishing the progress....
                publishProgress((int) (total * 100 / fileLength));
                output.write(data, 0, count);
            }

            String m = bank.get(index).getTitle();
            manager.updateDownloadedMagazines(
                    Integer.parseInt(m.substring(m.lastIndexOf(" ") + 1)),
                    file.toString());
            output.flush();
            output.close();
            input.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
        startActivity(getIntent());
        finish();

        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {

        super.onProgressUpdate(values);
        progress.setProgress(values[0]);

    }

    @Override
    protected void onPostExecute(Long result) {

        super.onPostExecute(result);

        progress.setVisibility(View.INVISIBLE);

    }

} 
```

问题：如何实现多个下载功能，以便进度条单独显示每个下载的进度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:22:33.287

I have defined the image view and the progress bar as final and sending these references to the AsyncTask where the magazine downloading activity is going, on click of image view. AsyncTask spawns multiple threads and that's how progress of each download can be updated.Code:

```
 @Override
    public View getView(final int position, View convertView, ViewGroup arg2) {

        View grid;

        if (convertView == null) {
            grid = new View(context);
            grid = layoutInflater.inflate(item, null);

        } else {
            grid = (View) convertView;
        }

        final TextView title = (TextView) grid.findViewById(R.id.mgntitle);
        title.setText(bank.get(position).getTitle());
        final ImageView imageView = (ImageView) grid
                .findViewById(R.id.thumbnail);
        imageView.setImageResource(R.drawable.icon);
        final ProgressBar progress = (ProgressBar) grid
                .findViewById(R.id.progress);
        final ImageView downloadmark = (ImageView) grid
                .findViewById(R.id.downloadmark);
        String pdfLink = bank.get(position).getPdfLink();
        String filename = pdfLink.substring(pdfLink.lastIndexOf("/") + 1);
        final File targetDir = new File(fileLocation + filename);
        System.out.println("target file name " + targetDir);

        if (new File(fileLocation + filename).exists()) {
            if (!getPrefName(filename).equalsIgnoreCase("NA")) {
                downloadmark.setVisibility(View.VISIBLE);
            }
        }

        imageView.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                if (!targetDir.exists()) {
                        map.put(bank.get(position).getTitle(), progress);
                        new DoBackgroundTask(GridDisplayActivity.this, bank
                                .get(position).getPdfLink(), progress,
                                downloadmark, imageView, position)
                                .execute();

                }

            }

        });

        imageView.setImageBitmap(BitmapFactory.decodeByteArray(
                bank.get(position).getCoverPages(), 0, bank.get(position)
                        .getCoverPages().length));

        return grid;

    } 
```

# lightopenid - 如何使用 LightOpenID php 类为 google 和 yahoo 获取用户照片

> ID：10817258
> 
> 赞同：0
> 
> 时间：2012-05-30T13:25:31.393
> 
> 标签：lightopenid

我正在使用 LightOpenID php 类，即 openid.php 类。我想获取用户照片。但它不会返回有关用户照片的信息。请帮助我，我必须获取用户帐户照片。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:52:18.770

OpenID 提供商不必返回您请求的任何信息。

如果您要求，以下是 Google 将返回的属性列表：

*   国家
*   电子邮件
*   名
*   语言
*   姓

您可以在[google 的 openid 端点文档](https://developers.google.com/accounts/docs/OpenID)中找到它。

无论您是否要求，Google 都不会返回任何其他属性。由于用户照片不在列表中，因此您无法获取。

至于雅虎，[developer.yahoo.com 上的一个帖子](http://developer.yahoo.com/blogs/ydn/posts/2009/12/yahoo_openid_now_with_attribute_exchange/)说，如果你请求`media/image/default`它会返回个人资料图片。我不知道这些信息是否是最新的。如果您仍然无法通过请求获得个人资料图片，那么很可能雅虎不再支持它（或者您没有个人资料图片）。

# c - 与 C 中的 Union 混淆

> ID：10817260
> 
> 赞同：3
> 
> 时间：2012-05-30T13:25:32.537
> 
> 标签：c, unions

我不明白Union是如何工作的。。

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    union {
    int a:4;
    char b[4];
    }abc;
abc.a = 0xF;

    printf(" %d, %d, %d, %d, %d, %d\n", sizeof(abc), abc.a, abc.b[0], abc.b[1], abc.b[2], abc.b[3]);

    return 0;
} 
```

![在此处输入图像描述](../Images/eeaeda1b421e4d504091a50f9c90e860.png)
在上述程序中。
我做了`int a : 4;`
所以，a 应该占用 4 位。
现在我正在存储，`a = 0xF; //i.e a= 1111(Binary form)`
所以当我访问`b[0 0r 1 or 2 or 3]` 为什么输出不来时`1, 1, 1, 1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:38:45.490

您工会的总规模至少为`4 * sizeof(char)`.

假设您使用的编译器将此作为定义的行为处理，请考虑以下事项：

1.  `abc`永远不会完全初始化，因此它包含随机的零和一。大问题。所以，首先这样做：
    `memset(&abc, 0, sizeof(abc));`
2.  联合应该是其最大成员的大小，因此您现在应该有 4 个清零**字节**：`00000000 00000000 00000000 00000000`
3.  你只设置了 4**位**高，所以你的联合将变成这样：
    `00000000 00000000 00000000 00001111` 或
    `11110000 00000000 00000000 00000000`.

    我不确定您的编译器如何处理这种类型的对齐，所以这是我能做的最好的。

您也可以考虑进行 char-to-bits 转换，以便您可以手动检查二进制格式中每个位的值：
[Access individual bits in a char c++](https://stackoverflow.com/questions/9531214/access-individual-bits-in-a-char-c)

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:32:56.207

0xF如果看成4位有符号的话就是-1，所以输出是正常的。b 甚至没有完全赋值，所以它的值是未定义的。它是一个 4 字节实体，但您只分配一个 4 位实体。所以在我看来一切都很正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:30:37.220

因为每个`char`（在大多数平台上）需要 1 个字节，即 8 位，所以所有 4 位都`a`属于`b[]`.

除此之外，位字段的存储方式取决于编译器，因此它没有定义，`b[]`映射到哪个字节......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T13:33:54.880

如果您将其定义为 4 位有符号数，则 0xF 为 -1。检查[二补码二进制表示](http://en.wikipedia.org/wiki/Two%27s_complement)以了解原因。

而且您没有初始化`b`，因此它可能包含任何随机值。

# linux - 无法在 Linux (XFS) 上挂载设备

> ID：10817264
> 
> 赞同：2
> 
> 时间：2012-05-30T13:25:42.383
> 
> 标签：linux

由于安装时出错，我无法在我的服务器上安装设备，设备类型为 XFS。mount 命令返回消息：“mount：结构需要清理”

我试过使用 xfs_check ，它只返回一条消息，指出日志中有条目需要中继，并且您需要运行 xfs_repair -L 其中“-L”选项删除日志文件但可能/将导致数据丢失/腐败。

有谁知道您是否可以在不修复的情况下访问/安装驱动器，或者无论如何减少数据丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-25T18:08:57.453

如果文件系统损坏*并*需要重播日志，您所能做的就是运行

```
# xfs_repair -L <DEVICE> 
```

将日志清零并修复文件系统中的元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-14T10:22:33.750

我已经能够使用 GParted 修复分区。

1.  打开 GParted
2.  选择您的设备
3.  卸载有缺陷的分区
4.  选择分区 -> 检查

![GParted](../Images/ab36d9114a695c6e67990630522f7877.png)

5.  应用更改

# java - 使用 Java-Hadoop 连接器更新 MongoDB 中的现有集合

> ID：10817265
> 
> 赞同：2
> 
> 时间：2012-05-30T13:25:44.903
> 
> 标签：java, mongodb, hadoop, mapreduce, mongodb-hadoop

是否可以使用新数据更新现有的 MongoDB 集合。我正在使用 hadoop 作业向 Mongo 读取写入数据。所需的场景是：-说 Mongo 中的第一个集合是

```
{ 
  "_id" : 1,
  "value" : "aaa"
  "value2" : null
} 
```

从 Mongo 读取数据并处理数据后，MongoDB 应该包含

```
{ 
  "_id" : 1,
  "value" : "aaa"
  "value2" : "bbb"
} 
```

如果可能，请提供一些虚拟代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-21T19:11:13.500

```
BasicBSONObject query=new BasicBSONObject();
query.append("fieldname", value);
BasicBSONObject update=new BasicBSONObject();

update.append("$set", new BasicBSONObject().append("newfield",value));
MongoUpdateWritable muw=new MongoUpdateWritable(query,update,false,true);
contex.write(key, muw); 
```

**查询**：用于提供条件（匹配条件）。

**update**：用于在现有集合中添加新字段和值。

**MongoUpdateWritable** : 第三个参数是 upsert 值（与 mongodb 相同）

第 4 个参数是集合中多个文档的多次更新。

在 Driver 类中设置 **`job.setOutputValueClass(MongoUpdateWritable.class);`**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:19:36.427

我通过扩展`org.apache.hadoop.mapreduce.RecordWriter`和覆盖这个类的 write 方法来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:53:24.753

Mongo-Hadoop 连接器当前不支持此功能。[如果您愿意，可以在MongoDB Jira](http://jira.mongodb.org/browse/HADOOP)中打开功能请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-28T07:38:39.270

我是通过[stratio](https://github.com/Stratio/Spark-MongoDB)做的，如果你用的是spark，你可以看看！

# jquery - 如何获取下拉（选择框）所有值并写入任何 div

> ID：10817276
> 
> 赞同：-1
> 
> 时间：2012-05-30T13:26:53.827
> 
> 标签：jquery

我有下拉（选择）框喜欢：

```
<select name="drp_name" id="drp_name">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
</select> 
```

我想在任何 div 中获取所有选项值并写入（打印），例如：

```
<div id="main_div">
<div>1</div>
<div>2</div>
<div>3</div>
<div>4</div>
<div>5</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:29:29.997

很简单：

```
$('#drp_name option').map(function() {
    return $('<div />', {text: $(this).text()}).get(0); // or this.value / $(this).val()
}).appendTo('#main_div'); 
```

**参考**：[`.map`](http://api.jquery.com/jQuery.map/)，[`.appendTo`](http://api.jquery.com/appendTo/)

[**演示**](http://jsfiddle.net/DnkzB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:28:09.763

```
$('#main_div').empty();
$('#drp_name option').each(function() {
  $('#main_div').append('<div>'+ $(this).text() +'</div>');
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/PPhsn/1/)**

如果您`div`的 s inside`#main_div`以前存在，那么

```
$('#drp_name option').each(function(index, item) {
  $('#main_div div').eq(index -1).html($(this).text());
}); 
```

或者

```
$('#main_div').empty();
$('#drp_name option').filter(function() {
  $('#main_div').append('<div>'+ $(this).text() +'</div>');
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/PPhsn/)**

**注意**如果需要，请`value`使用`this.value`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:28:42.130

```
var div = $('#main_div').empty();
$('#drp_name > option').each(function() {
    $('<div/>').text($(this).text()).appendTo(div);
}); 
```

如果您不需要选项的文本而是值，请替换`$(this).text()`为`this.value`。

# jquery - jQuery.ajax(..) 在 POST 请求中生成“Content-CtrlType”标头字段

> ID：10817277
> 
> 赞同：0
> 
> 时间：2012-05-30T13:27:04.573
> 
> 标签：jquery

我有一个非常奇怪的问题。使用 jQuery.ajax(...) 发布 JSON 数据突然开始将内容类型（“application/json”或您可能指定的任何其他内容类型）放入名为“Content-CtrlType”的请求标头字段中，而不是“Content-类型”。“Content-Type”也存在，但包含“text/plain”：

![奇怪的 POST 请求标头的屏幕截图](../Images/d91a13424910c1b37f5906c20f78ea1c.png)

我使用 jQuery 1.7.2。该问题存在于 IE9、Firefox 12 和 Chrome 上。没有测试过其他浏览器，因为我认为它与浏览器无关。

这是我生成请求的 JavaScript 代码：

```
...
var ajaxOptions = {
    url: url,
    type: 'POST',
    dataType: 'json',
    data: JSON.stringify(params),
    contentType: 'application/json; charset=utf-8',
    cache: false,
    error: function (jqXHR, textStatus, errorThrown) { .... },
    success: function(data, textStatus, jqXHR) { .... },
    converters: {
         "text json": function(data) { .... }
    }
};

$.ajax(ajaxOptions);

... 
```

“params”是我的 JavaScript 对象，用于保存要传输的数据。

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:04:28.060

好吧，在 Jonathan 确认我的代码没有问题之后，我开始了一个详细的调试会话并深入研究 jQuery 代码。在这里我发现了问题。可能由于一些重构，请求头字段“Content-Type”的设置被重命名为“Content-CtrlType”。如果它被重命名为其他东西，它会更加明显。@*$&§...关于琐碎的重构...

打扰了！

# c++ - 为什么没有输出显示

> ID：10817278
> 
> 赞同：0
> 
> 时间：2012-05-30T13:27:09.543
> 
> 标签：c++

为什么这段代码没有显示任何输出：相反，如果我们使用

```
cout << &s1.f 
```

或者

```
cout << &s1.i 
```

给出正确的输出。

```
# include <iostream>
using namespace std;

struct s
{
char c;
int i;
float f;

}s1;

int main()
{
cout << &s1.c;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T13:30:52.170

有一个重载`operator<<`需要 a`char*`并将其显示为以空字符结尾的字符串。如果要显示指针地址，请将指针转换为`void*`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:31:54.053

获取的地址`c`使类型 a `char*`，这将被解释为以空字符结尾的字符串。默认情况下，全局变量初始化为零，这意味着`c`将被解释为空字符串，因此不会打印任何内容。

# java - 拖动时如何设置默认dragIndicator的样式？

> ID：10817282
> 
> 赞同：0
> 
> 时间：2012-05-30T13:27:16.033
> 
> 标签：java, jsf, richfaces

使用 RF 4.1 我正在尝试设置默认样式`dragIndicator`（未定义时使用的样式）。当我使用自定义`dragIndicator`时，我可以使用类对其进行样式设置`rf-ind-drag`，但默认`dragIndicator`只有类`ui-draggable`。

问题`ui-draggable`是，它在拖动之前已经设置好了，所以我的组件在开始拖动之前就具有拖动样式。

如何设置默认样式`dragIndicator`或使自定义看起来像我正在拖动的组件（我拖动树节点）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:02:51.107

当我在treeNode中定义dragIndicator时，它会做我想做的事。

```
<rich:treeNode type="FIELD" iconCollapsed="/images/field_icon.gif" iconExpanded="/images/field_icon.gif"
    iconLeaf="/images/field_icon.gif">
    <h:outputText value="#{node.nodeName}" />
    <rich:dragSource dragValue="#{node}" type="FIELD" dragIndicator="fieldIndicator" />
    <rich:dragIndicator id="fieldIndicator">
        <h:outputText value="#{node.nodeName}" />
    </rich:dragIndicator>
</rich:treeNode> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:39:36.343

Rich:dragIndicator 的所有 CSS 类都记录在开发人员指南 [1] 中。

[1] [http://docs.jboss.org/richfaces/4.2.X/4.2.2.Final/Developer_Guide/en-US/html_single/#sect-Developer_Guide-Style_classes_and_skin_parameters-richdragIndicator](http://docs.jboss.org/richfaces/4.2.X/4.2.2.Final/Developer_Guide/en-US/html_single/#sect-Developer_Guide-Style_classes_and_skin_parameters-richdragIndicator)

# security - 服务器如何验证来自客户端的游戏分数？

> ID：10817283
> 
> 赞同：0
> 
> 时间：2012-05-30T13:27:20.243
> 
> 标签：security, verification

我见过很多在线高分的Flash游戏。不仅是 Flash 游戏，还有游戏制作者游戏。服务器端如何验证客户端是否真的收到了它声称的分数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:32:18.520

取决于避免作弊者的重要性。如果它不重要，只需相信来自客户的分数。如果它有点重要，您可以使用密钥对其进行签名（尽管此密钥需要存在于客户端中，并且可能进行逆向工程）。如果非常重要，您可以监控整个游戏过程，在游戏过程中计算服务器上的分数并检测不可能的动作；这将要求作弊者能够将整个看似合理的游戏回放到您的服务器，以便让您相信他们的分数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T13:32:44.527

对于我制作的游戏（不是 Flash），我动态提供了一个 salt，客户端代码必须使用这个 salt 对一些我可以在服务器上验证的东西（用户名、IP、整个游戏、分数）进行哈希处理. 在我看来，这与调试检测（基于时间）之类的一些东西相结合，对于大多数情况来说已经足够强大了。

# django - Django：作为表单字段的表单集

> ID：10817286
> 
> 赞同：15
> 
> 时间：2012-05-30T13:27:24.277
> 
> 标签：django, dynamic, django-forms

我需要的一种形式是简单字段（例如“Department”、“Building”和“RoomNumber”）和动态生成的字段对（例如“Name”和“Email”）的组合。理想情况下，编辑简单字段的内容和添加/删除动态字段对将在单个表单上完成。

代码方面，我想知道是否尝试将 Formset（具有两个动态字段的表单）作为普通表单中的字段嵌入是一种明智的方法，或者是否有另一种最佳实践来实现我想要完成的目标.

非常感谢您对这些问题的任何建议，

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-30T15:52:09.297

我不确定您需要“将 Formset 作为字段嵌入”的想法来自哪里；这听起来像是[formset 标准用法的](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)一个案例。

例如（对您的模型做出大量假设）：

```
class OfficeForm(forms.Form):
  department = forms.ModelChoiceField(...
  room_number = forms.IntegerField(...

class StaffForm(forms.Form):
  name = forms.CharField(max_length=...
  email = forms.EmailField(...

from django.forms.formsets import formset_factory

StaffFormSet = formset_factory(StaffForm) 
```

然后，为了您的观点：

```
def add_office(request):
    if request.method == 'POST':
        form = OfficeForm(request.POST)
        formset = StaffFormSet(request.POST)

        if form.is_valid() && formset.is_valid():
            # process form data
            # redirect to success page
    else:
        form = OfficeForm()
        formset = StaffFormSet()

    # render the form template with `form` and `formset` in the context dict 
```

可能的改进：

*   使用[django-dynamic-formset jQuery 插件](http://code.google.com/p/django-dynamic-formset/)来获得可能想要的“向办公室添加任意数量的员工”功能，而无需每次都向用户显示一堆空白表单。
*   请改用[模型表单集](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#model-formsets)（假设您收集的信息由 Django 模型支持），因此您不必显式指定字段名称或类型。

希望这可以帮助。

# wpf - Visual Studio 在断点处冻结

> ID：10817287
> 
> 赞同：2
> 
> 时间：2012-05-30T13:27:24.373
> 
> 标签：wpf, visual-studio-2010, c#-4.0

从一周前开始，我看到 VS2010 的一个非常烦人的行为：当我正在调试一个项目并且调试器在断点处停止时，Windows 冻结了将近十秒钟。我说“Windows 冻结”是因为在这段时间内鼠标和键盘都没用。

问题仅在我调试特定项目时发生，并且我在两台不同的机器上尝试过，结果相同。该项目是WPF，我确实在某一点上钩住了键盘（虽然不是鼠标），但该代码几个月没有被触及，而问题只有一周之久。

在这开始显示之前，我确实安装了 Telerik 的所有东西（试用版），所以我的第一个怀疑是 Telerik 的 VS 集成是罪魁祸首。我卸载了所有 Telerik VS 集成（“JustXXX”产品），但问题仍然存在。

我会非常感谢安倍的任何人提供关于这里可能发生的事情的提示。

谢谢

**编辑 1：** 我现在尝试构建一个新的解决方案，将所有项目移入其中，但问题仍然存在。

然后我卸载了 Telerik 的所有东西，只是为了确保，但这也没有效果。

下一个测试是在另一台机器上加载完全相同的解决方案，这确实有帮助。除了 reSHarper 6.1 之外，该机器没有与 VS2010 的第 3 方集成。

我还对这个问题进行了更多分析，典型的情况是，前几次断点被击中，UI 冻结了大约十秒钟。鼠标/键盘停止响应，但光标在代码编辑器中不断闪烁。接下来的几个断点也是如此，通常从一行跳到另一行会导致很长的延迟（尽管没有 UI 冻结）。

此外，如果在我的应用程序启动代码中很早就设置了第一个断点，我可能不会遇到问题。但是当我继续单步调试代码时，调试器会随着应用程序自身的初始化（在单独的线程中）变得更加迟缓。

正如我之前所说，这发生在单个应用程序中，因此代码显然以某种方式相关。

有没有人对调试器的运行方式有很好的了解？除了设置断点或用户从一行到另一行（刷新堆栈跟踪和监视窗口）时所需的明显步骤之外，后台发生了什么可能会冻结所有内容，这怎么可能？

我最后的希望是完全重新安装 VS2010，但我希望我能在需要该选项之前解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T13:45:33.787

我终于找到了这种奇怪行为的原因。正如我在原始帖子中提到的那样，我在应用程序初始化期间确实挂上了键盘（*和*鼠标，我忘记了我这样做了），以便能够检测到用户的不活动。

监视发生在后台线程中，该线程只是等待`AutoResetEvent`发现用户活动或不活动。出于某种奇怪的原因，它`AutoResetEvent.WaitOne(...)`会以某种方式影响调试器。我目前的解决方法是在附加调试器时避免等待。

我仍然无法解释为什么现在会发生这种情况。它已经工作了一年，但问题的原因终于找到并处理了。

我已经向微软提交了我的问题，希望得到一个很好的解释。如果我这样做，我会在这里发布。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T16:42:02.190

如果您确实对一个项目/解决方案有问题，您可以尝试创建一个新的空解决方案并在那里添加项目，也许这会有所帮助。

我对 Visual Studio 的内部工作原理了解不多（毕竟它一定是最复杂的软件之一）。但我了解到，重新安装通常是最好和**最快**的解决方案（即使需要一两个小时）。只要确保备份您不想丢失的任何设置。

**更新**：

我在这里找到了这个，也许你也已经找到了：[http ://connect.microsoft.com/VisualStudio/feedback/details/260864/visual-studio-debugger-occasionally-locks-up-the-entire-windows -gui](http://connect.microsoft.com/VisualStudio/feedback/details/260864/visual-studio-debugger-occasionally-locks-up-the-entire-windows-gui)

您可以尝试一下并禁用语言栏。

# entity-framework - 实体框架查找外键

> ID：10817289
> 
> 赞同：4
> 
> 时间：2012-05-30T13:27:33.863
> 
> 标签：entity-framework

我想在我的实体模型中找到一个实体的所有外键。

我使用以下内容获取实体的所有属性的列表：

```
var workspace = _entities.MetadataWorkspace; 
var entityType = workspace.GetItems<EntityType>(DataSpace.CSpace).FirstOrDefault(e => e.Name == tablename);
var keyNames = entityType.Members.Select(k => k.Name); 
```

有没有办法只找到那些具有外键关联的属性？还有与之关联的参考实体中的那个属性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T09:01:00.960

我制定了解决方案：

```
var fk = _entities.MetadataWorkspace.GetItems<AssociationType>(DataSpace.CSpace).Where(a => a.IsForeignKey);
//check if the table has any foreign constraints for that column
var fkname = fk.Where(x => x.ReferentialConstraints[0].ToRole.Name == tablename).Where(x => x.ReferentialConstraints[0].ToProperties[0].Name == columnname);
//Get the corresponding reference entity column name
var refcol = fkname.Select(x => x.ReferentialConstraints[0].FromProperties[0].Name).First(); 
```

# sql-server-2008 - 我如何知道该值是自动插入还是需要手动插入？

> ID：10817294
> 
> 赞同：2
> 
> 时间：2012-05-30T13:27:53.130
> 
> 标签：sql-server-2008, sql-server-2012

好吧，我正在使用 MS SQL Server（主要与 Management Studio 一起使用），但我不知道如何知道我必须插入表中的哪些值以及自动创建哪些值？我怎么看？我的意思是 ID 通常是自动计算的，但有时您需要手动插入它们，那么我怎样才能找到/看到呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:43:25.830

由于您已经在 SSMS (SQL Server Management Studio) 中，请在查询窗口/选项卡中运行以下命令：

```
USE [DBNameWhereTableResides]
EXEC sp_help 'SchemaName.TableName' 
```

或者

```
EXEC DBNameWhereTableResides.dbo.sp_help 'SchemaName.TableName' 
```

您将看到“Identity”和“RowGuidCol”的条目，它们会告诉您 ID 是否是自动生成的。

您还将看到约束部分，第一列显示为“constraint_type”，如果未在 INSERT 中指定值，则将显示将预填充列的任何 DEFAULT 约束。

第二部分显示所有列定义，标记为“Nullable”=“yes”的列定义不需要在 INSERT 中，但如果不是 IDENTITY 字段或具有 DEFAULT，它将不会获得值并将保留如果未在 INSERT 中指定，则为 NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:38:39.773

您可以使用此查询来查找所有表和 id 列

```
SELECT  s.name + '.' + t.name AS TableName,  c.name AS ColumnName,  
 IDENT_SEED(s.name + '.' + t.name) AS Seed, 
 IDENT_INCR(s.name + '.' + t.name) AS Increment
 FROM sys.tables t
INNER JOIN sys.schemas s ON t.schema_id = s.schema_id
INNER JOIN sys.columns c ON c.object_id = t.object_id
    AND c.is_identity = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:44:50.150

```
CREATE TABLE Product 
( 
    id int IDENTITY, 'this will be automatically inserted
    product_name VARCHAR(30),
    description varchar(200),
    price money NOT NULL
)

INSERT Product (product_name) VALUES ('Strawberry', 1200); 
```

注意：我没有在插入中指定“id”。您不必指定“描述”，默认值为 null 必须指定任何列标记 NOT NULL，例如 PRICE

# c# - 表达式树，listFoo.Where(lambda) 抛出无效参数错误

> ID：10817297
> 
> 赞同：0
> 
> 时间：2012-05-30T13:28:02.583
> 
> 标签：c#, lambda

为什么下面的代码会抛出 '... has some invalid arguments at'

```
 var qry = listFoo.Where(lambda); 
```

我应该如何编写我的 listFoo 以便通过传递谓词委托来调用 Where 。我的整个代码如下，

```
 List<Foo> listFoo = new List<Foo>();

    ParameterExpression foo = Expression.Parameter(typeof(Foo), "foo");
    MemberExpression bar = Expression.PropertyOrField(foo, "Bar");
    ConstantExpression abc = Expression.Constant("abc", typeof(string)); 
    BinaryExpression test = Expression.Equal(bar, abc);

    Expression<Func<Foo, bool>> lambda = Expression.Lambda<Func<Foo, bool>>(test, foo);

    var qry = listFoo.Where(lambda); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:36:26.957

因为您的列表不是 IQueryable。你为什么不这样做呢？

```
var qry = listFoo.Where(foo => foo.Bar == "abc"); 
```

如果您不能这样做，请执行以下操作：

```
var qry = listFoo.Where(lambda.Compile()); //warning, slow performance 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:41:00.090

IEnumerable 上的 LINQ 扩展方法采用委托实例（`Action<>`或`Func<>`对象）。Lambdas 只是委托文字，所以在这种情况下它不需要 an`Expression<Func<>>`因为你给它一个计划，而不是一个委托。这就是一个表达式，是一个如何处理一些数据的计划。IQueryable 采用 Expressions（并且编译器将委托文字视为`Expression`s），以便它可以采用计划并整合（如果可以减少它们）。

对于 IEnumerable，您必须`Compile()`在`Expression<Func<>>`将其传递给`Where`方法之前调用它。但是，您可以这样做：

```
var qry = listFoo.AsQueryable().Where(lambda); 
```

但是，这会给你一个`IQueryable<Foo>`结果，所以你仍然需要做`AsEnumerable`, `ToList`,`ToArray`等。

# c++ - auto_ptr 的动态内存分配

> ID：10817300
> 
> 赞同：0
> 
> 时间：2012-05-30T13:28:10.200
> 
> 标签：c++, memory-management, dynamic, auto-ptr

这是我的程序的示例代码。在这里，我使用 std::auto_ptr 动态分配内存并输入值（在函数中），之后我再次为同一个变量分配内存。因此，当为相同的分配新内存时，是否会释放先前分配的内存。我对此表示怀疑，因为我使用的是 std::auto_ptr。提前致谢。

```
 #include "stdafx.h"
  #include <iostream>
  #include <memory>
  #include <windows.h>

  std::auto_ptr<HANDLE> *eventHandle;

  void function()
  {
    eventHandle = new std::auto_ptr<HANDLE>[5];
    std::auto_ptr<HANDLE> handle(new HANDLE);
    *handle = CreateEvent(NULL, false, false, NULL);
    eventHandle[0] = handle;
  }

  void f2()
  {
    if(NULL == eventHandle)
    {
      std::cout<<" HANDLE NULL";
    }
  }

  int _tmain(int argc, _TCHAR* argv[])
  {
    function();
    f2();
    function();
    return 0;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:12:00.760

在您的示例中： HANDLE 指针是智能指针，但不是`std::auto_ptr`. 在这种情况下，您必须`delete [] eventHandle`在第二次调用之前`function()`调用，这也会删除 HANDLE 智能指针。

但是，在删除之前，必须通过[CloseHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724211%28v=vs.85%29.aspx)函数关闭 HANDLE 对象，因此我在这里质疑智能指针的需要，因为您将始终知道何时不再需要 HANDLE 并且必须删除指向对象的指针。

PS`std::auto_ptr`有点瑕疵。如果您可以访问 VS2010，我建议您使用`std::shared_ptr`.

PPS 如果要测试 NULL，则应始终初始化指向 NULL 的指针，默认情况下它们不是。`std::auto_ptr<HANDLE> *eventHandle = NULL;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:30:41.200

这里

```
std::auto_ptr<HANDLE> *eventHandle; 
```

您有一个原始指针，因此当您重新分配它时，之前的值将被覆盖，并且`auto_ptr`先前指向的类型的对象数组被泄露。

# objective-c - 不支持推送导航控制器 - 执行 segues

> ID：10817305
> 
> 赞同：15
> 
> 时间：2012-05-30T13:28:25.353
> 
> 标签：objective-c, ios

我在我的故事板中创建了一个新的导航控制器（不是以编程方式！）并将其设置为常规 UIViewController 的“根视图控制器”，并在其中添加了一个按钮，上面写着 - 转发到下一个视图控制器（第二个视图控制器是我想要的视图控制器将有一个后退按钮链接到初始视图控制器）。现在，每当我尝试将按钮链接到下一个视图控制器时——“不支持推送导航控制器”。

请帮助我，谢谢

编辑：我不小心将 UINavigationController 子类化，而不是 UIViewController 在我的类中。还是非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T15:07:58.957

我已经尝试过了，没有任何问题，它全部在 IB 中完成，不需要额外的代码......

1.  使用故事板开始一个新项目“单一视图应用程序”
2.  选择故事板并删除其产生的视图。
3.  拖动一个新的导航控制器（它会带来一个表格视图）
4.  删除表格和表格视图控制器，只剩下导航控制器
5.  在普通视图控制器上拖动
6.  右键单击并从导航控制器拖动到新视图并选择“关系 - 根视图控制器”
7.  将“Bar Button Item”拖到应在 ViewController 顶部可见的 Navbar 上，如果您愿意，可以重命名此 Forward。
8.  现在拖动另一个视图控制器，这是您的“前进”按钮将推入查看的视图。
9.  右键单击并从栏按钮拖动到 2nd View Controller，然后选择“Push”

运行项目，您将获得一个带有导航栏和您的按钮的单一视图，单击您的按钮将推送另一个视图并给您一个后退按钮以返回到第一个视图控制器。如果有帮助，我会尝试发布我的故事板的图片。

![PushViewControllers](../Images/3ef8f3c68aed77a986c435d7dd7f58c2.png)

等离子体

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T07:40:02.493

我有同样的麻烦。我想在每个故事板上都有一个导航控制器，以便每个故事板都可以独立运行，单独调试，并且导航栏的外观是正确的。

使用其他方法，我发现 UINavigationController 将从原始情节提要中保留——这是我不想要的——否则我会出错。

在您的视图控制器中使用 AppDelegate 设置 rootViewController 对我有用（从[Segue 借用 segue 命名约定到另一个故事板？](https://stackoverflow.com/questions/9575702/segue-to-another-storyboard)）：

```
- (void)showStartupNavigationController {
NSLog(@"-- Loading storyboard --");

//Get the storyboard from the main bundle.
UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:@"Startup" bundle:nil];
//The navigation controller, not the view controller, is marked as the initial scene.
UINavigationController *theInitialViewController = [storyBoard instantiateInitialViewController];

NSLog(@"-- Loading storyboard -- Nav controller: %@", theInitialViewController);

//Remove the current navigation controller.
[self.navigationController.view removeFromSuperview];
UIWindow *window = [(AppDelegate *)[[UIApplication sharedApplication] delegate] window];
window.rootViewController = theInitialViewController; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T21:12:11.493

要以编程方式交换视图，您需要选择 segue 并给它一个标识符，如“PushView”，然后像这样调用它......

```
[self performSegueWithIdentifier:@"PushView" sender:self]; 
```

这将以编程方式与单击前进按钮相同。我已经使用上面讨论的代码为您创建了一个示例项目。有一个 -(IBAction) 代码，可用于以编程方式更改视图。

[PushView.zip](http://www.multiupload.co.uk/D72QVPV9M9)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-19T13:48:19.117

我也想这样做，当用户按下按钮时显示一个屏幕（具有嵌入式导航控制器）。

在我第一次尝试时，我将第一个屏幕中的按钮连接到导航控制器，应用程序因“不支持推送导航控制器”错误而崩溃。

这是我找到的解决方案：

从第一个屏幕中的按钮选择 segue 到导航控制器。如果它有一个标识符，复制它的名字。然后删除那个segue。

然后通过按住 CTRL 键单击第一个视图控制器中的按钮并拖动到**您想要呈现的视图控制器**（而不是指向它的导航控制器）来创建一个新的转场，然后在小弹出窗口中选择推送。

然后单击 segue 中间的图标并粘贴您在第一步中复制的名称作为它的标识符。

IB 会给你一个警告“场景由于缺少入口点而无法访问，并且没有通过 -instantiateViewControllerWithIdentifier: 进行运行时访问的标识符。” 不用担心，它可以完美运行。

如果要自定义显示为返回按钮的字符串，可以在按下按钮后显示的**视图控制器**的 viewDidLoad 方法中添加这一行，即子视图控制器。
（将“设置”替换为您需要的名称）

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationController.navigationBar.topItem.title = @"Settings";
    ...

} 
```

# c++ - 如何使用 ffmpeg 在 linux 中编写音乐播放器

> ID：10817310
> 
> 赞同：-1
> 
> 时间：2012-05-30T13:28:47.933
> 
> 标签：c++, linux, ffmpeg, audio-player

我有一个使用 ffmpeg 在 linux 中制作音乐播放器的课程项目，谁能给我一些关于它的指导。有谁知道任何学习如何使用ffmpeg的好资源？考虑到我只想编写一个支持多种格式和编解码器的简单音乐播放器，对于这个范围的项目来说，ffmpeg 是否过于重量级？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:35:24.197

这不是一个具体的问题，网上有很多教程，比如[http://dranger.com/ffmpeg/tutorial01.html](http://dranger.com/ffmpeg/tutorial01.html)和其他教程。

# c++ - 如何返回目录的结尾

> ID：10817312
> 
> 赞同：0
> 
> 时间：2012-05-30T13:28:53.107
> 
> 标签：c++, string, directory

我有一个函数应该在字符串中找到目录的最后一位。例如：“C:\Lolcats\pie\ambulance\”应该返回“ambulance”。然而，它返回了一些我从未见过的奇怪字符，比如男性箭头符号和其他一些奇怪的东西。

```
string App::getlastName(string cakes){
    //finds the name of the last folder in a directory
    string name;
    string temp;//popback all of temp into name to invert it
    cakes.pop_back();
    char i = cakes[cakes.length()-1];
    while (i != '\\'){
        temp.push_back(cakes[i]);
        cakes.pop_back();
        i = cakes[cakes.length()-1];
    }                           //-1?
    for (int j = 0; j<temp.length(); ++j){
        name.push_back(temp.back());
        temp.pop_back();
    }
    return name;
} 
```

这可能是我写过的最糟糕的函数之一，但我想不出还有什么方法可以解决这个问题:(有人可以帮我吗？:D

请注意，该函数不需要查找文件的名称，它只是文件夹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T13:41:30.750

两步：

*   如果它以反斜杠字符结尾，请将其删除：

    ```
    if (!cakes.empty() && '\\' == *(cakes.end() - 1))
    {
        cakes.erase(cakes.end() - 1);
    } 
    ```

*   用于[`std::string::find_last_of()`](http://en.cppreference.com/w/cpp/string/basic_string/find_last_of)定位最后一个反斜杠并[`std::string::substr()`](http://en.cppreference.com/w/cpp/string/basic_string/substr)提取最后一部分：

    ```
    std::string last_part;
    const size_t slash_idx = cakes.find_last_of("\\");
    if (std::string::npos != slash_idx)
    {
        last_part = cakes.substr(slash_idx + 1);
    } 
    ```

如果目录名称可能包含正斜杠，请添加对最后一个字符的额外检查，并将其添加到 的参数中`find_last_of("\\/")`，因为它可以搜索多个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:45:30.000

如果您从字符串中删除尾随 \，您可以使用 rfind 和 substr 的简单组合来获取您想要的数据。

```
string substring = cakes.substr(cakes.rfind("\\") + 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:43:22.297

你的方法依赖于字符串已经是正确的格式，没有断言或错误检查——这不是一个好主意。

我只会做类似的事情：

```
char* directoryName = strrchr(fullPath, '\\') + 1; 
```

在您修剪掉尾随的“\”之后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T13:48:57.457

@Joel Rondeau 的评论他说这条线`temp.push_back(cakes[i])`是一个问题是正确的，但我想我会详细说明。

原因是该变量`i`被定义为 a`char`而不是 a `int`，但两者可能被隐式转换。因此，返回奇怪字符的原因是因为将 a`char`转换为 an`int`会导致字符串中可能不存在的索引值。

阅读您的代码示例，看起来您应该这样做`temp.push_back(cakes[cakes.length()-1])`（或者更好的是，将此索引存储在临时变量中，这样您就不必每次都继续编写它）。

# hibernate - NHibernate 中 ISession.Save/Update 和 ITransaction.Commit 之间的区别

> ID：10817313
> 
> 赞同：2
> 
> 时间：2012-05-30T13:28:53.807
> 
> 标签：hibernate, nhibernate

我有一段代码将元素添加到实体集合（一对多关系）。这是带有**ISession.Save的版本**

```
 using (ISession session = sessionFactory.OpenSession())
        {
            var package = session.QueryOver<Package>().Where(x => x.ID == selectedPackage).SingleOrDefault();
            foreach(var themeId in selectedThemes)
            {
                var selectedTheme = session.QueryOver<HBTheme>().Where(x => x.ID == themeId).SingleOrDefault();
                if (selectedTheme != null)
                {
                    package.Themes.Add(new PackageTheme() { Package = package, Theme = selectedTheme });
                }
            }
            session.Save(package);
        } 
```

那个版本对我不起作用。正如我用**ITransaction**编写的测试一样，我将其更改为以下内容：

```
 using (ISession session = sessionFactory.OpenSession())
        using (ITransaction transaction = session.BeginTransaction())
        {
            var package = session.QueryOver<Package>().Where(x => x.ID == selectedPackage).SingleOrDefault();
            foreach(var themeId in selectedThemes)
            {
                var selectedTheme = session.QueryOver<HBTheme>().Where(x => x.ID == themeId).SingleOrDefault();
                if (selectedTheme != null)
                {
                    package.Themes.Add(new PackageTheme() { Package = package, Theme = selectedTheme });
                }
            }
            transaction.Commit();
        } 
```

现在它可以工作了。**package.Themes**集合中的元素存储在数据库中。怎么来的？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T13:36:54.077

比较苹果和橘子！

1.  Save() 将告诉 NHibernate“这个对象应该被持久化”。未定义发出 INSERT 语句的确切时间，并且可能会在一段时间后发生。
2.  根据级联设置，可能不需要 Save()。
3.  您应该**始终**使用事务。
4.  默认情况下，将脏状态刷新到实际数据库中发生在事务提交和查询时，如果脏状态可能会影响查询的结果。

情况 1 中发生的情况很可能永远不会触发刷新操作。在情况 2 中，该项目可能由于集合上的级联而被保存，而事务提交会触发刷新。

# java - 重置 JSTL 值

> ID：10817314
> 
> 赞同：2
> 
> 时间：2012-05-30T13:28:57.903
> 
> 标签：java, jsp, jstl

我无法弄清楚为什么这不起作用。除非`c:if`是真的，否则下面的代码片段基本上可以正常工作。

如果 if 语句为真，则应手动将 clientId 设置为 1。这确实有效，但由于某种原因，它不会获取 clientProps。

如果从会话变量“用户”中获取 ClientId=1，它确实可以正常工作。所以 clientProps 应该在点 1 有一些东西。有什么线索吗？

```
<c:set var="clientId" value="${sessionScope['user'].client.clientId}"/>
<c:if test="${empty sessionScope['user'].client.clientId}">
    True
    <c:set var="clientId" value="1" />
</c:if>

<c:set var="clientProperties" value="${clientProps[clientId]}"/>
<c:set var="clientLogo" value="${clientProperties.clientLogo}"/>
<c:set var="clientURL" value="${clientProperties.clientWebURL}" />
clientId = ${clientId}
clientLogo = ${clientLogo}
clientURL = ${clientURL} 
```

如果用户对象存在，则结果：

`clientId = 1 clientLogo = /images/logos/Logo1.png clientURL = http://www.xxx.xxx`

用户对象不存在时的结果：

`True clientId = 1 clientLogo = clientURL =`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:25:02.057

```
<c:set var="clientId" value="1" /> 
```

这将其设置为`String`map 键显然是`Long`.

您需要将其设置为 a `Long`。

```
<c:set var="clientId" value="${1}" /> 
```

EL 中的数字被隐式处理为`Long`，这就是上述方法有效的原因。

# android - 检查 ListView 的选中项

> ID：10817315
> 
> 赞同：0
> 
> 时间：2012-05-30T13:29:07.870
> 
> 标签：android, android-listview

我有一个 ListView 并且需要检查已单击了哪个项目。我拥有它的方式，它只在我使用鼠标滚轮时显示我选择的项目（在 Eclipse 模拟器中测试它时）。当我在真正的移动设备上测试它时，它根本没有反应。

```
adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, listItems);
listView.setAdapter(adapter);

listView.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

    public void onItemSelected(AdapterView<?> arg0, View arg1,
            int arg2, long arg3) {
        myFunction(listView.getSelectedItem());
    }

    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:31:02.887

使用`setOnItemClickListener` **代替** `setOnItemSelectedListener`

```
listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {
            //get value for listItems using position    

                     String str =listItems[position];                   
                     myFunction(str);
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:32:49.410

我认为你需要在 onListItemClick 监听器上使用更好

```
 public void onListItemClick(ListView parent, View v, int position, long id)
              {
                parent.setItemChecked(position, parent.isItemChecked(position));
         Toast.makeText(this,  "You have selected" + items[position],30).show();
                } 
```

# java - 像 Java 的 `libconfig` 之类的东西？

> ID：10817316
> 
> 赞同：1
> 
> 时间：2012-05-30T13:29:22.530
> 
> 标签：java, configuration, configuration-files, libconfig

我正在寻找像[**libconfig**](http://www.hyperrealm.com/libconfig/)这样的 Java 框架。我喜欢它[简单的人类可读的配置](http://www.hyperrealm.com/libconfig/test.cfg.txt)文件，而且我可以创建由数组、列表、组组成的复杂设置值。

Java（不是 XML）有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:34:26.380

看起来像一个简单的 JSON 格式；为什么不直接使用 JSON？

[Commons Configuration](http://commons.apache.org/configuration/)支持使用[PropertyListConfiguration](http://commons.apache.org/configuration/apidocs/org/apache/commons/configuration/plist/PropertyListConfiguration.html)的类似格式的配置。

如果您正在考虑使用 JVM 而不是 Java 语言的解决方案，则基于 Groovy 的[ConfigSlurper可能是合适的。](http://groovy.codehaus.org/ConfigSlurper)JRuby 和 JavaScript 等都有类似的实现。

# vb.net - 在 Internet Explorer 中使用 Visual Basic 选择 Google 搜索结果

> ID：10817321
> 
> 赞同：0
> 
> 时间：2012-05-30T13:29:29.620
> 
> 标签：vb.net, internet-explorer, vba

我有 VB 代码去 Google，填写搜索栏，然后点击搜索按钮。有没有办法让我的程序在搜索后选择特定结果？IE。我搜索“奶酪”，我希望我的程序选择倒数第二个结果（在这种情况下，它是 wwww.chuckecheese.com）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:01:31.723

我最终使用 Sendkeys 来模拟键盘上的选项卡和向下箭头键。然后，您可以使用这 2 个键导航到所需的搜索结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-26T11:36:34.363

或者您可以绕过使用 API 并使用**语音识别**来避免广告或成本以改进您的**听写**搜索。如果您不跳出框框思考并创新自己的解决方案，那么编程就不是编程。编码伴随着创造力，如果你不尝试，你将不知道那是什么。这个网站非常适合这个目的，许多人为编码创新做出了贡献。您必须将一个文本文件添加到您的项目中并随意调用它，然后将代码中的以下路径更改为您自己的路径。文本文件保持空白。该程序会将您的语音搜索写入文件，然后执行搜索，不断覆盖自身。出于某种奇怪的原因，这种方法极大地改进了语音识别和听写的融合。您可以说出整个短语，它会进行搜索。一个好的麦克风是必须的，并且说话清晰，没有背景干扰。

```
Imports System.Speech.Recognition

'Declarations:
Private ReadOnly Drone As New SpeechRecognitionEngine()

Private ReadOnly Qa As New DictationGrammar()

  Private Sub Form1_Load(sender As Object,
                           e As EventArgs) Handles MyBase.Load

       'Dictation Mode | Google Engine
        Drone.LoadGrammarAsync(Qa)
        Drone.RequestRecognizerUpdate()
        Drone.SetInputToDefaultAudioDevice()
        Drone.InitialSilenceTimeout = TimeSpan.FromSeconds(2.5)
        Drone.BabbleTimeout = TimeSpan.FromSeconds(1.5)
        Drone.EndSilenceTimeout = TimeSpan.FromSeconds(1.2)
        Drone.EndSilenceTimeoutAmbiguous = TimeSpan.FromSeconds(1.5)
        AddHandler Drone.SpeechRecognized, AddressOf Drone_SpeechRecognized
        Drone.RecognizeAsync(RecognizeMode.Multiple)

    End Sub

 Private Sub Drone_SpeechRecognized(sender As Object, e As SpeechRecognizedEventArgs)
        Dim google As String = e.Result.Text.ToString

        Select Case (google)
            Case google

                If google <> "+" Then
                    'This section will take spoken word, write to file then execute search.
                    Dim sb As New StringBuilder
                    'Be sure to change the text file path below to your path if you are new to this program.
                    sb.AppendLine(google)
                    'Add your own path below here. you can also change google to youtube and conduct youtube searches
File.WriteAllText("C:\Users\justin.ross\source\repos\ScarlettCenturium\Scarlett Centurium\Scarlett Centurium\File.txt", sb.ToString())
                    google = "https://www.google.com/search?q=" & Uri.EscapeUriString(google)
                    Dim proc As New Process()
                    Dim startInfo As New ProcessStartInfo(google)
                    proc.StartInfo = startInfo
                    proc.Start()
                    'This sendkey will close out previous tab on new search
                    SendKeys.Send($"^{{w}}")
                    Return
                End If
        End Select
    End Sub 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-14T01:15:20.310

好吧，您可以为此使用google api

转到[http://code.google.com/p/google-api-for-dotnet/](http://code.google.com/p/google-api-for-dotnet/)

下载 GoogleSearchAPI_0.4_alpha.zip

提取它并添加对项目中 dll 文件的引用（在文件夹 .net 2 中）

你可以像这样使用它

首先导入库

```
Imports Google.API.Search 
```

然后在子或函数中将您的代码作为

```
 Dim rf As String = "http://www.google.com"
    Dim v As New Google.API.Search.GwebSearchClient(rf)
    Dim result = v.Search(TextBox1.Text, 40)
    ' number (40) is the amount of fetched results ( change it if you want )
     For Each item In result

        If item.Url.Contains("chuckecheese") Then
            '  your code goes here
        End If

    Next 
```

# ipad - TinyMessenger 和 Monotouch

> ID：10817324
> 
> 赞同：1
> 
> 时间：2012-05-30T13:29:37.637
> 
> 标签：ipad, dependency-injection, xamarin.ios, inversion-of-control, eventaggregator

我正在尝试在我的 iPad 应用程序中使用 TinyMessenger。iPad 应用程序的 UIViewController 很少。我想通过 TinyMessenger 看到这些控制器之间的通信。我将步骤理解为

## 第 1 步 - 创建消息中心 [ ? ]

```
var messageHub = new TinyMessengerHub(); 
```

## 第 2 步 - 发布消息 [在 UIViewController1 中]

```
messageHub.Publish(new MyMessage()); 
```

## 第 3 步 - 订阅消息 [在 UIViewController2 中]

```
messageHub.Subscribe<MyMessage>((m) => { MessageBox.Show("Message Received!"); }); 
```

MyMessage 定义如下

```
public class MyMessage : ITinyMessage
{
    /// <summary>
    /// The sender of the message, or null if not supported by the message  implementation.
    /// </summary>
    public object Sender { get; private set; }
} 
```

请告知这是否是使此设置正常工作的正确步骤。而且我不知道应该在哪里创建messagehub。我相信 messagehub 必须是全局的，以便任何 UIViewController 都可以访问它。我可以在 AppDelegate 中创建 messagehub 吗？如果在 AppDelegate 中创建 messagehub，如何从 UIViewController1 访问 messagehub？

感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T02:33:57.983

您需要将此信使集线器与 IoC 容器结合使用。

您只需要应用程序中的 1 个集线器实例，并且使用容器是执行此操作的方法。

请参阅[TinyIoC](https://github.com/grumpydev/TinyIoC/wiki/Setup---getting-started)中设置容器的示例（我相信您正在使用）。你基本上会打电话：

```
var hub = TinyIoCContainer.Current.Resolve<ITinyMessengerHub>();
//for subscribers
hub.Subscribe<YourMessage>(OnYourMessage);
//for publishers
hub.Publish(new YourMessage(this, "BOOYAH!")); 
```

PS - 如果你真的在使用 TinyIoC，`#if TINYMESSENGER`你可以打开一个预处理器指令来自动为你的应用程序注册一个集线器。

# ruby-on-rails - Rails 2.3 和 minitest

> ID：10817331
> 
> 赞同：4
> 
> 时间：2012-05-30T13:30:00.077
> 
> 标签：ruby-on-rails, ruby, minitest

我想用现有的 Rails 2.3.14 应用程序尝试 minitest。我已经尝试了几种方法，但它们似乎都不起作用。

它基本上归结为这一点。当我将 minitest 添加到 Gemfile 时，我运行的所有测试`bundle exec rake test`都不会使用 minitest 执行。

问题是大多数测试用例扩展了 ActiveSupport::Testcase 或 ActionController::Testcase（扩展了 ActiveSupport::TestCase）。

通过查看此类的代码，我发现它已经（不知何故）支持 MiniTest：

```
class TestCase < ::Test::Unit::TestCase
    if defined? MiniTest
      Assertion = MiniTest::Assertion
      alias_method :method_name, :name if method_defined? :name
      alias_method :method_name, :__name__ if method_defined? :__name__
    else
...
end 
```

（完整代码见[https://github.com/rails/rails/blob/2-3-stable/activesupport/lib/active_support/test_case.rb ）](https://github.com/rails/rails/blob/2-3-stable/activesupport/lib/active_support/test_case.rb)

我的问题是：

是否可以在 Rails 2.3 中使用 minitest 而不是 test::unit 而无需扩展 (MiniTest::Unit::TestCase)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T09:24:39.770

任何测试框架都由两部分组成，定义和运行测试的方法（称为测试运行器）和断言框架。

查看 ActiveSupport 似乎如果 MiniTest 被定义，运行 rails 单元测试运行器将默认使用 MiniTest 的断言类。这意味着您可以使用 Minitest 的断言语法。

定义 MiniTest 应该只是需要 'minitest\unit' 的情况。

但是，如果您想使用运行器，则需要从 MniTest 框架测试夹具基类派生。

[在railscasts](http://railscasts.com/episodes/327-minitest-with-rails)中有一步一步的演练，用于自己设置。

它归结为：

1.  从你的 config/applications.rb 中删除 test_unit
2.  将 minitest gem 添加到您的 gem 文件“Gemfile”
3.  在可以包含在测试中的帮助文件中设置环境
4.  添加一个 rake 任务来运行测试。(/lib/tasks/minitest.rake)

[Railscasts](http://railscasts.com/episodes/327-minitest-with-rails)有详细信息。

如果您不想更改现有测试来执行此操作..那么您必须修改 Test::Unit 以将 TestCase 重新定义为选择的 MiniTest 基类或派生自一个的东西。这是[这个 gem](http://metaskills.net/2011/03/26/using-minitest-spec-with-rails/)采用的方法，可能会给你一些关于如何最好地去做的想法。

另一种解决方案是通过代码进行搜索/替换以切换测试用例的基类。

我希望这有帮助。

* * *

我更新了我的答案并将以下内容删除为过时：

minitest-rails 已被正确指出，因为它仅适用于 Rails 3.1。

[这颗宝石](http://metaskills.net/2011/03/26/using-minitest-spec-with-rails/)似乎很旧（2009 年 3 月 26 日），但它可能会有所帮助。如果您需要提示来做类似的事情，请检查源代码。

# java - 用不同的 RemoteWebDrivers 驱动相同的 JUnit 类的最佳方法是什么？

> ID：10817333
> 
> 赞同：0
> 
> 时间：2012-05-30T13:30:04.117
> 
> 标签：java, maven, selenium, junit, webdriver

当时我使用 Class Parameterized 在不同的浏览器中驱动相同的测试。我不喜欢的是，测试不是并行运行的。

我也试过[这个](http://www.scribd.com/barsan_dan/d/66306687-Running-SoapUI-Parameterized-JUnit-Tests-in-Parallel)，但它对我不起作用，但我承认我并没有真正理解我在做什么。

难道没有更好的方法吗？

Maven/Surefire 有没有办法完成这项工作？

有没有人有实现这一目标的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:27:05.957

如果您想并行运行测试，JUnit 可能不是完美的工具。改用[TestNG](http://testng.org/doc/index.html)。它已经知道如何并行运行测试，因此您不必担心这一点。

要为不同的浏览器配置测试，请遵循以下方法：

```
public abstract BaseBrowserTests {
     public abstract WebDriver getDriver();

     ... common tests...
}

public void ChromeTests {
     ... implement getDriver() to connect to Chrome ...

     ... you can add specific Chrome tests here ...
} 
```

# file-upload - Windows Batch：通过 FTP 自动上传本地 CSV 文件列表

> ID：10817336
> 
> 赞同：0
> 
> 时间：2012-05-30T13:30:15.757
> 
> 标签：file-upload, csv, ftp, batch-file, automation

我构建了一个脚本，它读取 CSV 文件以获取文件列表，然后将它们上传到 FTP 服务器。CSV 结构是这样的：

`local_file,remote_file`

该脚本会创建一个包含所有必要 FTP 命令的文本文件，然后运行 ​​FTP 命令。一切正常，除了 for 循环执行它的命令之外的代码，即，下面的所有`echo put "%1" "%2" >> %Commands%`内容也在每个 for 循环上执行，而不是得到一个包含所有 put 命令的格式良好的文件，我得到了这个（来自命令文件输出）：

```
open servername 
username 
password 
binary 
put "local_path_to\first_file_on_the_list.php" "remote_path_to\first_file_on_the_list.php" 
close 
bye   
put "-d" "-i" 
close 
bye   
put "-d" "-i" 
close 
bye   
put "-d" "-i" 
close
... 
```

这是脚本代码：

```
@echo off
setlocal EnableExtensions

rem Connection credentials
set Server=servername
set UserName=username
set Password=password

set Commands="commands.txt"
echo open %Server% > %Commands%
echo %UserName% >> %Commands%
echo %Password% >> %Commands%
echo binary >> %Commands%

rem Read the CSV file line by line
for /f %%a in (matches3.csv) do call :parse %%a

rem Transform CSV line into FTP put commmand
:parse
echo put "%1" "%2" >> %Commands%

:end
rem Add commands to close ftp conn
echo close >> %Commands%
echo bye   >> %Commands%

rem Perform the FTP upload
echo loggin in to ftp...
FTP -d -i -s:%Commands% %Server%
echo finished.
pause

rem Clean up.
if exist %Commands% del %Commands%
endlocal
exit 
```

我不明白为什么下面的一切 :end 都被执行了！非常感谢您提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:57:23.270

为什么下面的代码不应该`:end`执行？您永远不会在脚本中添加任何内容来结束 :parse 例程。

第一个 ewall 答案应该几乎可以工作，除了你需要一个 GOTO :END 在 FOR 语句之后。我看不出正确实施他的建议会如何导致无限循环。

另一种选择是在您的 EXIT 语句之后简单地移动您的子例程。

你还有其他隐藏的问题。文件路径/名称可以包含空格，因此默认的 FOR 分隔符空格，制表符将不会保留整行，如果有空格。默认的 EOL 也会导致任何以 开头的行`;`被忽略。这是一个潜在（但不太可能）的问题，因为有效的文件名可以以`;`.

解决方案是将 EOL 设置为无法开始有效文件规范的字符，并将 DELIMS 设置为空：`"EOL=: DELIMS="`

将所有文件写入行括在括号中并仅重定向一次输出会更有效。它也更容易编写并且看起来更好。

***编辑 -*** *原始脚本试图在 ftp 脚本和 ftp 命令行中连接到服务器。一个或另一个必须被删除。我从 ftp 脚本中删除了它。*

```
@echo off
setlocal EnableExtensions

rem Connection credentials
set Server=servername
set UserName=username
set Password=password

set Commands="commands.txt"
(
  echo %UserName%
  echo %Password%
  echo binary

  rem Read the CSV file line by line
  for /f "eol=: delims=" %%a in (matches3.csv) do call :parse %%a

  rem Add commands to close ftp conn
  echo close
  echo bye
)>%Commands%

rem Perform the FTP upload
echo logging in to ftp...
FTP -d -i -s:%Commands% %Server%
echo finished.
pause

rem Clean up.
if exist %Commands% del %Commands%
endlocal
exit

rem Transform CSV line into FTP put commmand
:parse
echo put "%1" "%2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:43:19.347

`:end`不会阻止[`CALL`函数](http://ss64.com/nt/call.html)运行，它只是一个标签。相反，我怀疑您打算使用`GOTO :eof`，这将返回到 for 循环：

```
...
rem Read the CSV file line by line
for /f %%a in (matches3.csv) do call :parse %%a

rem Transform CSV line into FTP put commmand
:parse
echo put "%1" "%2" >> %Commands%

goto :eof

rem Add commands to close ftp conn
... 
```

或者，您可能会发现使用括号更简单，而不是使用调用，如下所示：

```
...
rem Read the CSV file line by line
for /f %%a in (matches3.csv) do (
  rem Transform CSV line into FTP put command
  echo put "%%a" "%%b" >> %Commands%
)

rem Add commands to close ftp conn
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T10:07:52.693

也许这行得通

```
@echo off
setlocal EnableExtensions

rem Connection credentials
set Server=servername
set UserName=username
set Password=password

set Commands="commands.txt"
echo open %Server% > %Commands%
echo %UserName% >> %Commands%
echo %Password% >> %Commands%
echo binary >> %Commands%

rem Read the CSV file line by line
for /f %%a in (matches3.csv) do call :parse %%a

rem Transform CSV line into FTP put commmand
:parse
echo put "%1" "%2" >> %Commands%

:end
rem Add commands to close ftp conn
echo close >> %Commands%
echo bye   >> %Commands%

rem Perform the FTP upload
echo loggin in to ftp...
FTP -d -i -s:%Commands% %Server%
echo finished.
pause

rem Clean up.
if exist %Commands% del %Commands%
endlocal
exit /b

rem Transform CSV line into FTP put commmand
:parse
echo put "%1" "%2" >> %Commands%
exit /b

:end
rem Add commands to close ftp conn
echo close >> %Commands%
echo bye   >> %Commands%
exit /b 
```

# svg - svg - 退出组区域时隐藏元素，类似于 css 溢出隐藏

> ID：10817338
> 
> 赞同：6
> 
> 时间：2012-05-30T13:30:25.857
> 
> 标签：svg, hidden

我需要在画布（a）上制作一个盒子，其中包含的外部女巫元素是不可见的。

类似于溢出：隐藏；在 CSS 中。

注意：里面有可拖动的元素。我需要能够拖动它们，但是如果它们退出一个框（例如相机焦点），我需要它们不被显示（或者它们的一部分，如果部分在里面，部分在外面），正如我所说的完全一样溢出：隐。

注意2：我不能使用其他元素来覆盖盒子周围的区域（请不要让我解释为什么，除非绝对必要（我不知道怎么说短，所以我会添加图片和大量字） ：） ）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T15:30:51.503

让您的可拖动元素成为元素的子`<svg>`元素并设置溢出：隐藏在其上。一个`<svg>`元素既可以是子元素，也可以是根元素。一个`<g>`元素不会这样做，因为它没有明确的宽度/高度，并且会扩展到包含的子元素的大小。

# svn - SVN 忽略文件

> ID：10817339
> 
> 赞同：6
> 
> 时间：2012-05-30T13:30:29.010
> 
> 标签：svn

我试图忽略该文件`img/test.jpg`被 SVN 跟踪。[在这个问题](https://stackoverflow.com/questions/86049/how-do-i-ignore-files-in-subversion)的提示下，我尝试了以下命令：

```
svn propset svn:ignore "img/test.jpg" . 
```

而不是忽略`img/test.jpg`，SVN 告诉我`property 'svn:ignore' set on '.'`。

另外，当我这样做时，`svn status`我现在得到了额外的行：

```
 M      . 
```

SVN如何忽略文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T13:34:37.633

尽管输出令人困惑，但您的命令似乎运行正常。线

```
M    . 
```

...表示您已在当前目录（运行命令的目录）上设置了一个属性。忽略的路径是`./img/test.jpg`，但该属性是在当前目录而不是特定文件上设置的。它有一个修改标志`M`，因为您尚未将该属性提交回存储库。提交后，后续签出或其他在此代码库上工作的人`svn update`也将获得该`svn:ignore`文件的属性。

注意：要通过 修改或删除它`svn propdel`，您还需要从当前目录执行此操作：

```
svn propdel svn:ignore . 
```

您也可以`cd`'ed 进入`img/`目录并在其中运行`propset`，在这种情况下，它将绑定到该目录而不是其父目录。然后，您的提交将类似于：

```
M    img 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-25T08:13:38.507

您必须在`img`目录上设置属性，而不是根目录：

```
svn propset svn:ignore "test.jpg" img 
```

# android - 应用程序 DecRa（进程 com.Decra）意外停止。请重试

> ID：10817343
> 
> 赞同：0
> 
> 时间：2012-05-30T13:30:34.527
> 
> 标签：android

日志猫：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.Decra/com.Decra.DecRaActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521) 
```

代码：

```
 TextView dectv=(TextView)findViewById(R.id.dec);
    TextView ratv=(TextView)findViewById(R.id.ra);
    TextView result=(TextView)findViewById(R.id.result);
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button btn=new Button(this);
        btn.setOnClickListener(this);
    } 
```

启动应用程序时，它会强制关闭并出现以下错误：

`the application DecRa (process com.Decra) has stopped unexpectedly.Please try again.`

而且编译器没有错误，所以一定是运行时错误。但我不明白错误是什么意思！我的理解是其中一个错误是指`findViewById`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:11:55.560

`findViewById()`如果你`setContentView()`事先没有打电话，你就不能打电话。只需将 TextView 初始化行移到`onCreate()`方法中，如下所示：

```
TextView dectv;
TextView ratv;
TextView result;

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        dectv=(TextView)findViewById(R.id.dec);
        ratv=(TextView)findViewById(R.id.ra);
        result=(TextView)findViewById(R.id.result);

        ...
        ...
    } 
```

# asp.net-mvc - ASP.NET MVC，将模型从视图传递到控制器

> ID：10817347
> 
> 赞同：4
> 
> 时间：2012-05-30T13:30:39.440
> 
> 标签：asp.net-mvc, controller, ienumerable, html.beginform

我在使用 ASP.NET MVC 并将数据从视图传递到控制器时遇到问题。我有一个这样的模型：

```
 public class InputModel {
   public List<Process> axProc { get; set; }

   public string ToJson() {
     return new JavaScriptSerializer().Serialize(this);
   }
 }

 public class Process {
   public string name { get; set; }
   public string value { get; set; }
 } 
```

我在控制器中创建了这个 InputModel 并将其传递给视图：

```
public ActionResult Input() {
  if (Session["InputModel"] == null)
    Session["InputModel"] = loadInputModel();
  return View(Session["InputModel"]);
} 
```

在我的 Input.cshtml 文件中，我有一些代码来生成输入表单：

```
@model PROJ.Models.InputModel

@using(Html.BeginForm()) {
  foreach(PROJ.Models.Process p in Model.axProc){
    <input type="text" />
    @* @Html.TextBoxFor(?? => p.value) *@
  }
  <input type="submit" value="SEND" />
} 
```

现在，当我单击提交按钮时，我想处理放入文本字​​段中的数据。

**问题 1：**我看过这个 @Html.TextBoxFor()，但我并没有真正理解这个“stuff => others”。我得出的结论是，“其他东西”应该是我想要写入数据的字段，在这种情况下，它可能是“p.value”。但是箭头前面的“东西”是什么？

回到控制器，然后我有一个带有一些调试的 POST 功能：

```
[HttpPost]
public ActionResult Input(InputModel m) {
  DEBUG(m.ToJson());
  DEBUG("COUNT: " + m.axProc.Count);

  return View(m);
} 
```

此处调试仅显示如下内容：

```
{"axProc":[]}
COUNT: 0 
```

所以我得到的返回模型是空的。

**问题 2：**我在使用 @using(Html.BeginForm()) 时做错了什么？这不是正确的选择吗？如果是这样，我如何让我的模型充满数据回到控制器？
（我不能在这里使用“@model List<Process>”（因为上面的例子是缩写的，在实际代码中会有更多的东西）。）

我希望有人可以填写我忽略的一些细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:03:55.967

将您的视图更改为类似这样的内容，以正确绑定表单提交的列表。

```
@using(Html.BeginForm()) {
  for(int i=0;i<Model.axProc.Count;i++){
   <span>
    @Html.TextBoxFor(model => model.axProc[i].value)
</span>
  }
  <input type="submit" value="SEND" />
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:19:19.723

1.  在 @Html.TextBoxFor(stuff => otherstuff) 中，东西是您的视图模型，其他东西是您模型的公共成员。
2.  由于要在视图中为集合类型 (List) 的模型成员呈现输入元素，因此应首先创建一个单独的局部视图以呈现该集合的单个项目 (Process)。它看起来像这样（例如，将其命名为 Process.cshtml，然后放入 /Views/Shared 文件夹）：

    ```
    @model List<PROJ.Models.Process>

    @Html.TextBoxFor(model => p.value) 
    ```

然后，您的主视图将如下所示：

```
@model PROJ.Models.InputModel

@using(Html.BeginForm()) {
  foreach(PROJ.Models.Process p in Model.axProc){
    @Html.Partial("Process", p)
  }
  <input type="submit" value="SEND" />
} 
```

此外，检查 loadInputModel() 方法是否确实返回了某些内容，例如，不是一个空列表。

# c - 现代 Ada 到 C/C++ 转换器

> ID：10817349
> 
> 赞同：7
> 
> 时间：2012-05-30T13:30:42.083
> 
> 标签：c, ada, code-translation

是否有从 Ada (95, 2005) 到 C 的源到源转换器（翻译器）？他们有多满（他们可以将 Ada 的每个功能都转换为 gnu c99 + pthreads + POSIX）吗？

是否可以在关键应用程序中使用这种 ada-to-c 转换器？

PS：C++ 的翻译器（直到 2003 年，带有 gnu 扩展）也受到欢迎。

PPS：当说“gnu c99”时，仅表示支持C99+大多数gnu扩展，并不表示GCC。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T13:42:38.240

我不知道有任何*开源*Ada-to-C 翻译器。我所知道的唯一一个是 SofCheck，据说它非常好。

SofCheck 已被 AdaCore 收购，我在 AdaCore 网站上进行了*非常*简短的搜索以寻找翻译器，但没有任何内容跳出。如果寻求商业解决方案对您来说是一个可行的选择，您可以通过 sales@adacore.com 询问他们。（至少得到一个价格。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:51:34.720

除非有非常充分的理由将 Ada 用于此应用程序（例如，客户需要它，或者您已经有一个用 Ada 编写的大型应用程序要使用），否则如果您只是咬紧牙关，可能会少很多痛苦项目符号并在您认为合适的情况下使用精心设计的 C99 或 C++ 编写您的解决方案。

如果您坚持，Sofcheck 的翻译器可能是最好的；他们已经为此工作了很长时间。

如果做不到这一点，您可能（？）从 Ada 编译器的 ASIS 输出开始构建翻译器。这可能是相当多的挑剔工作，因为 Ada 具有非常精确的语义，如果您只想在 Ada 中随意编码、翻译和运行，最好保留这些语义。如果您希望输出对最终客户来说“漂亮”，那将是更多的工作。（应考虑长期维护）。我怀疑实现代码来模拟 Ada 的集合点可能相当棘手，同时在语义上既复杂又异步。这种方法的真正缺陷是工作量很大。也许只是继续你的生活并以非 Ada 的方式编写应用程序本身会更省力。

[请参阅我对语言翻译做得不好](https://stackoverflow.com/questions/3455456/how-to-translate-between-programming-languages/3460977#3460977)和替代方法的警告。

# django - django 性能瓶颈

> ID：10817352
> 
> 赞同：4
> 
> 时间：2012-05-30T13:30:48.963
> 
> 标签：django, performance

我的 django 网页以 45,41 毫秒（根据 django 调试工具栏）获取所有 db 查询，但服务器以 300-350 毫秒返回初始 html 页面（当我查看此号码时，我关闭了 django 调试工具栏）。瓶颈可能在哪里？

我想问题可能出在 django 模板上。他们有那么慢吗？

PS 必须注意它不是真正的网络服务器，而是开发的（只是用“python manage.py runserver”运行应用程序）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:26:36.987

Django 的运行服务器很慢，不应该用于基准测试。

> Django runserver 命令：Django 的 runserver 只是一个原始服务器，不应该用于生产目的，因为它没有针对速度进行优化或设计时考虑到安全性。相反，它允许快速开发，包括在您进行更改时自动重新加载您的模型、视图和 URL。

让它使用 Nginx 或 Apache 运行 mod_wsgi。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T01:07:52.657

我认为这是一个合理的问题，应该得到比偏转更多的东西。我也遇到过类似的情况，我只是想了解一下性能瓶颈在哪里；慢查询、ORM、模板引擎、类型映射？

结果我的很简单，[DEBUG=True](https://docs.djangoproject.com/en/dev/ref/settings/#debug)实际上是重量级的——我的页面加载大约需要 4 秒，其中 3.5 秒归因于此设置完成的工作。

值得注意的是，我当时正在使用开发服务器，这似乎对我的情况影响很小。不过，不打折@scoopseven 的答案是非常有效的。

# codeigniter - CMD 模式下的 Codeigniter 重定向（或转发到另一个等效控制器）

> ID：10817353
> 
> 赞同：0
> 
> 时间：2012-05-30T13:30:49.597
> 
> 标签：codeigniter, redirect, cron

```
Redirect ('controller_name'); 
```

在 http 模式下工作，但不在 cmd 模式下工作。

如何在 Codeigniter 中以 CMD 模式转发到另一个控制器？

```
I'm trying to achieve the following.
Controller A forward to Controller B (one of many subclasses of A decided upon what Model A returns in that time) in cron jobs. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:41:44.413

`Redirect`只是做了一个`header('location: controller_name');`在 CLI 模式下无法完成的事情。

如果您尝试加载另一个控制器并执行它，您最好查看 HMVC (http://codeigniter.com/wiki/Modular_Extensions__-_HMVC/) 方法：

```
modules::run('controller_b/action/param'); 
```

代替

```
redirect('controller_b/action/param'); 
```

希望有帮助吗？

# python - pytables 中的数组顺序

> ID：10817360
> 
> 赞同：0
> 
> 时间：2012-05-30T13:31:10.063
> 
> 标签：python, numpy, pytables

使用[pytables](http://www.pytables.org/moin)，[`CArray`](http://pytables.github.com/usersguide/libref.html#carrayclassdescr)有没有办法指定数据存储在磁盘上的顺序（Fortran/C）？

我正在寻找类似于[`ndarray`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html)'s`order`参数的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:22:32.127

您可以使用`chunkshape`实际上指定数据顺序的参数：

[http://pytables.github.com/usersguide/libref.html#tables.File.createCArray](http://pytables.github.com/usersguide/libref.html#tables.File.createCArray)

例如，对于二维数据，如果以 Fortran 顺序访问数据并且以 C 顺序访问数据，`chunkshape=(2000, 1)`则效率会更高。`chunkshape=(1, 2000)`您可能需要稍微调整一下数字：http: [//pytables.github.com/usersguide/optimization.html](http://pytables.github.com/usersguide/optimization.html)

# java - Java 输入流

> ID：10817362
> 
> 赞同：1
> 
> 时间：2012-05-30T13:31:15.233
> 
> 标签：java, stream

我正在尝试通过以下程序代码打开文件

```
public void actionPerformed(ActionEvent e)
{
    else if(e.getSource() == menyFlikTre)
    {
        läsInFil(textFalt.getText());
    }    

private void läsInFil(String filename)
{
    try {
        FileReader r = new FileReader(filename);
        textArea.read(r, null);
    }
    catch(IOException e){}
} 
```

当我输入带有 .txt 扩展名的文件名时，它只会添加文件的整个名称，包括扩展名 .txt 而不是文件的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:46:00.823

```
private void läsInFil(String filename)
{
    try {
        File file = new File(filename);   
        FileReader r = new FileReader(filename);
        char[] buf = new char[(int)file.length()];
        r.read(buf);
        String contentString = new String(buf);
        textArea.append(contentString);
    }
    catch(IOException e){
e.printStacktrace();
}
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:35:35.897

您应该遍历文件的内容并将其添加到 textArea ：

```
FileReader fr = new FileReader(filename); 
BufferedReader br = new BufferedReader(fr); 
String s; 
while((s = br.readLine()) != null) { 
// write to textArea
} 
```

# - NSProgressIndicator

> ID：10817366
> 
> 赞同：0
> 
> 时间：2012-05-30T13:31:38.687
> 
> 标签：

NSProgress​Indicator 类让 macOS 应用程序显示一个进度指示器，以显示一个冗长的任务正在进行中。

# android - 在 Android 中禁用屏幕锁定（电源）按钮

> ID：10817367
> 
> 赞同：7
> 
> 时间：2012-05-30T13:31:38.970
> 
> 标签：android, android-camera, android-wake-lock

我希望当我的应用程序运行电源按钮时（按下锁定屏幕和屏幕变黑），应该被禁用。使用户无法锁定屏幕。

我在三星 Galaxy S 手机的默认相机应用程序中注意到了这个东西。这也是我试图做同样的事情的原因。我还有一个相机相关的应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T13:36:37.733

试试这个

```
int val=android.provider.Settings.System.getInt(getContentResolver(),
                                                                SCREEN_OFF_TIMEOUT);

                    android.provider.Settings.System.putInt(getContentResolver(),
                                                            SCREEN_OFF_TIMEOUT, -1);
                    Toast.makeText(this, "Disabled Screen Timeout", Toast.LENGTH_LONG).show();
                    SharedPreferences.Editor editor = settings.edit();
                    editor.putInt("ScreenTimeout",val);
                    editor.commit();
                }
            } catch(Throwable er) {
                Toast.makeText(this, "Error "+er.getMessage(), Toast.LENGTH_LONG).show();
            } 
```

这将关闭屏幕

在 android 使用中禁用密钥保护

```
KeyguardManager keyguardManager = (KeyguardManager)getSystemService(Activity.KEYGUARD_SERVICE);
KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
lock.disableKeyguard(); 
```

和使用许可

```
<uses-permission android:name="android.permission.DISABLE_KEYGUARD"/> 
```

* * *

让屏幕保持活力

```
 @Override
    protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);

        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-17T14:24:00.147

我已经使用 root 访问权限实现了这一点。

```
sqlite3 /data/data/com.android.providers.settings/databases/settings.db
insert into secure (name, value) values ('lockscreen.disabled', 1); 
```

或取决于版本

```
sqlite3 /data/system/locksettings.db
insert into locksettings (name, value) values ('lockscreen.disabled', 1); 
```

# java - 执行mysql查询时出现java.lang.StackOverflowError

> ID：10817370
> 
> 赞同：1
> 
> 时间：2012-05-30T13:31:49.783
> 
> 标签：java, mysql, jdbc

我不时引发此异常，导致我的 mysql 调用失败。

```
 Caused by: java.lang.StackOverflowError
           at java.net.SocketOutputStream.socketWrite0(Native Method)
           at java.net.SocketOutputStream.socketWrite(Unknown Source)
           at java.net.SocketOutputStream.write(Unknown Source)
           at java.io.BufferedOutputStream.flushBuffer(Unknown Source)
           at java.io.BufferedOutputStream.flush(Unknown Source)
           at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3251)
           at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1932)
           at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2101)
           at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2548)
           at com.mysql.jdbc.ConnectionImpl.setAutoCommit(ConnectionImpl.java:4916)
   ..... 
```

我正在使用带有 c3p0 的 mysql jdbc 5.1.7。JVM 在 linux 64 服务器上运行。我在 mysql jdbc 3.0.7 中发现了一个在 3.0.8 版本中修复的相关错误。所以我想这不是我的情况。

这似乎是随机行为，因为对于大多数执行没有错误，但它经常每周发生。这可能是由于mysql服务器通信失败引起的吗？欢迎任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:04:03.407

找到了问题的原因。似乎这是由于 mysql 服务器中的空闲连接丢失所致。`autoReconnect=true`in mysql url 为我解决了这个问题。

# python - 从 pymongo Map Reduce 操作记录/打印

> ID：10817376
> 
> 赞同：1
> 
> 时间：2012-05-30T13:32:02.380
> 
> 标签：python, debugging, mongodb, logging, pymongo

mongo shell 包含一个有用的`print`命令。

从 pymongo执行[`map_reduce`](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.map_reduce)时，如何从 javascript 块中打印/记录信息？

**更新：**好的，我有一个答案。正在运行的进程`mongo`将输出使用 打印的任何内容`print()`。第二个选项是配置[mongo 日志记录](http://www.mongodb.org/display/DOCS/Logging)（并且可能拖尾日志文件）。回答“我仍然可以通过 pymongo 在 python 中直接获取这些值吗？”的虚拟奖励积分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:15:25.063

您仍然可以`print()`在将被写入的 JS 块内使用`/var/log/mongodb/mongodb.log`，[更多信息请点击此处](http://www.mongodb.org/display/DOCS/Troubleshooting+MapReduce)。由于发生在服务器端的事实，`map/reduce`它不会在您的 Python 应用程序中发出任何内容。

# eclipse - 更新 FDT 后，闪屏和图标消失了

> ID：10817379
> 
> 赞同：0
> 
> 时间：2012-05-30T13:32:10.190
> 
> 标签：eclipse, icons, fdt

当我更新 FDT 5.0 -> 5.5 时，我丢失了 FDT 图标和闪屏。现在它只是一个通用的 Eclipse 图标。每次 FDT 更新都会发生这种情况，而不仅仅是这个。

发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:32:10.343

## 品牌被另一个 Eclipse 插件（或 Eclipse 本身）取代

因为 FDT 是基于 Eclipse 的，其他 Eclipse 插件可能会覆盖您的 FDT 的某些部分。示例包括 FDT 的工作区设置和 GUI 部分（例如图标和闪屏）。

## 改回来

要更改图标，请像使用任何应用程序一样替换图标。要更改 spalsh 屏幕，请替换 FDT 安装目录中的 splash.bmp 文件（OSX 用户可能需要右键单击它并转到“Shoe Package Contents”）。

![在此处输入图像描述](../Images/49e3c64a99982f8a828d0b825357580c.png)

## 艺术品

![在此处输入图像描述](../Images/4761c50b96ed4ae7da4be0a6fb32c495.png) ![在此处输入图像描述](../Images/539fc44a90dcacdfd25a15c800ee5c7b.png)

# c# - 实体框架 - 覆盖导航属性（挂钩生成代理）

> ID：10817381
> 
> 赞同：2
> 
> 时间：2012-05-30T13:32:12.010
> 
> 标签：c#, entity-framework-4.1

我最近发现一个博客讨论了使用 POCO 时生成的实体框架代理。博主展示了如何查看生成的代理代码，非常有趣。

他还谈到了覆盖导航属性，即在可以访问导航属性时执行代码。问题是代码似乎位于不可用的图像中。

我的问题是：有谁知道在回调实体框架之前如何覆盖导航属性（挂钩到生成的代理）来做某事？

* * *

**编辑**

我正在使用代码优先

# c++ - 使用 valgrind 在内存泄漏检测中抑制“dl-hack3-cond-1”

> ID：10817383
> 
> 赞同：5
> 
> 时间：2012-05-30T13:32:15.863
> 
> 标签：c++, memory, memory-leaks, valgrind, suppression

我正在使用 valgrind 来检测内存泄漏。valgrind 的输出由命令生成

```
valgrind -v --leak-check=full ../spython test.py 2>/tmp/log 
```

事实上，我的程序是一个高度简化的 Python 解释器（家庭作业 ToT），正如您可以从名称中推断的那样`spython test.py`

困扰我的是底部的输出

```
==24269== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 3 from 3)
--24269-- 
--24269-- used_suppression:      3 dl-hack3-cond-1 
```

这是什么意思？我查了一下，`dl-hack3-cond-1`valgrind的抑制文件里没有`default.supp`。我想消除这个烦人的抑制错误（这意味着通过 valgrind 测试，而不是通过“抑制抑制”）。

这是/tmp/log的内容：

```
==24269== Memcheck, a memory error detector
==24269== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==24269== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==24269== Command: ../spython test.py
==24269== 
--24269-- Valgrind options:
--24269--    -v
--24269--    --leak-check=full
--24269-- Contents of /proc/version:
--24269--   Linux version 3.3.2-1-ARCH (tobias@T-POWA-LX) (gcc version 4.7.0 20120407 (prerelease) (GCC) ) #1 SMP PREEMPT Sat Apr 14 09:48:37 CEST 2012
--24269-- Arch and hwcaps: AMD64, amd64-sse3-cx16
--24269-- Page sizes: currently 4096, max supported 4096
--24269-- Valgrind library directory: /usr/lib/valgrind
--24269-- Reading syms from /home/tim/oop-2012-spring-spython/bin/spython (0x400000)
--24269-- Reading syms from /lib/ld-2.15.so (0x4000000)
--24269-- Reading syms from /usr/lib/valgrind/memcheck-amd64-linux (0x38000000)
--24269--    object doesn't have a symbol table
--24269--    object doesn't have a dynamic symbol table
--24269-- Reading suppressions file: /usr/lib/valgrind/default.supp
==24269== embedded gdbserver: reading from /tmp/vgdb-pipe-from-vgdb-to-24269-by-tim-on-???
==24269== embedded gdbserver: writing to   /tmp/vgdb-pipe-to-vgdb-from-24269-by-tim-on-???
==24269== embedded gdbserver: shared mem   /tmp/vgdb-pipe-shared-mem-vgdb-24269-by-tim-on-???
==24269== 
==24269== TO CONTROL THIS PROCESS USING vgdb (which you probably
==24269== don't want to do, unless you know exactly what you're doing,
==24269== or are doing some strange experiment):
==24269==   /usr/lib/valgrind/../../bin/vgdb --pid=24269 ...command...
==24269== 
==24269== TO DEBUG THIS PROCESS USING GDB: start GDB like this
==24269==   /path/to/gdb ../spython
==24269== and then give GDB the following command
==24269==   target remote | /usr/lib/valgrind/../../bin/vgdb --pid=24269
==24269== --pid is optional if only one valgrind process is running
==24269== 
--24269-- REDIR: 0x4017a20 (strlen) redirected to 0x380625a7 (???)
--24269-- Reading syms from /usr/lib/valgrind/vgpreload_core-amd64-linux.so (0x4a24000)
--24269--    object doesn't have a symbol table
--24269-- Reading syms from /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so (0x4c26000)
--24269--    object doesn't have a symbol table
--24269-- REDIR: 0x4017890 (index) redirected to 0x4c2aed0 (index)
--24269-- REDIR: 0x4017910 (strcmp) redirected to 0x4c2be90 (strcmp)
--24269-- Reading syms from /usr/lib/libstdc++.so.6.0.17 (0x4e31000)
--24269--    object doesn't have a symbol table
--24269-- Reading syms from /lib/libm-2.15.so (0x5135000)
--24269--    object doesn't have a symbol table
--24269-- Reading syms from /usr/lib/libgcc_s.so.1 (0x542a000)
--24269--    object doesn't have a symbol table
--24269-- Reading syms from /lib/libc-2.15.so (0x563f000)
--24269-- REDIR: 0x56c73a0 (strncasecmp) redirected to 0x4a24620 (_vgnU_ifunc_wrapper)
--24269-- REDIR: 0x56c1470 (strnlen) redirected to 0x4a24620 (_vgnU_ifunc_wrapper)
--24269-- REDIR: 0x56c50e0 (strcasecmp) redirected to 0x4a24620 (_vgnU_ifunc_wrapper)
--24269-- REDIR: 0x56c2e60 (__GI_strrchr) redirected to 0x4c2acf0 (__GI_strrchr)
--24269-- REDIR: 0x56c1340 (strlen) redirected to 0x4a24620 (_vgnU_ifunc_wrapper)
--24269-- REDIR: 0x57863d0 (__strlen_sse2_pminub) redirected to 0x4c2b210 (strlen)
--24269-- REDIR: 0x4e90430 (operator new(unsigned long)) redirected to 0x4c2a3d0 (operator new(unsigned long))
--24269-- REDIR: 0x56c9a70 (memcpy@@GLIBC_2.14) redirected to 0x4a24620 (_vgnU_ifunc_wrapper)
--24269-- REDIR: 0x576b790 (__memcpy_ssse3_back) redirected to 0x4c2c1a0 (memcpy@@GLIBC_2.14)
--24269-- REDIR: 0x56c38a0 (bcmp) redirected to 0x4a24620 (_vgnU_ifunc_wrapper)
--24269-- REDIR: 0x5780d00 (__memcmp_sse4_1) redirected to 0x4c2cf10 (bcmp)
--24269-- REDIR: 0x56bbab0 (malloc) redirected to 0x4c2a8d0 (malloc)
--24269-- REDIR: 0x4e8e750 (operator delete(void*)) redirected to 0x4c296c0 (operator delete(void*))
--24269-- REDIR: 0x4e90540 (operator new[](unsigned long)) redirected to 0x4c29e30 (operator new[](unsigned long))
--24269-- REDIR: 0x56c3ec0 (memset) redirected to 0x4a24620 (_vgnU_ifunc_wrapper)
--24269-- REDIR: 0x56c3f00 (__GI_memset) redirected to 0x4c2d2f0 (memset)
--24269-- REDIR: 0x56bbfd0 (free) redirected to 0x4c29a30 (free)
--24269-- REDIR: 0x4e8e780 (operator delete[](void*)) redirected to 0x4c292a0 (operator delete[](void*))
--24269-- REDIR: 0x56cada0 (__GI___rawmemchr) redirected to 0x4c2d670 (__GI___rawmemchr)
--24269-- REDIR: 0x56c1390 (__GI_strlen) redirected to 0x4c2b230 (__GI_strlen)
--24269-- REDIR: 0x56bf850 (strcmp) redirected to 0x4a24620 (_vgnU_ifunc_wrapper)
--24269-- REDIR: 0x5759bb0 (__strcmp_sse42) redirected to 0x4c2bdd0 (strcmp)
--24269-- REDIR: 0x56cafb0 (strchrnul) redirected to 0x4c2d620 (strchrnul)
==24269== 
==24269== HEAP SUMMARY:
==24269==     in use at exit: 0 bytes in 0 blocks
==24269==   total heap usage: 39,501 allocs, 39,501 frees, 973,647 bytes allocated
==24269== 
==24269== All heap blocks were freed -- no leaks are possible
==24269== 
==24269== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 3 from 3)
--24269-- 
--24269-- used_suppression:      3 dl-hack3-cond-1
==24269== 
==24269== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 3 from 3) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T18:26:41.757

我的 default.supp 中肯定存在这种抑制：

```
$ grep dl-hack $(locate default.supp | grep /usr)
   dl-hack3-cond-0
   dl-hack3-cond-1
   dl-hack3-cond-2
   dl-hack3-cond-3
   dl-hack3-cond-4
   dl-hack4-64bit-addr-1
   dl-hack4-64bit-addr-2
   dl-hack4-64bit-addr-3
   dl-hack5-32bit-addr-1
   dl-hack5-32bit-addr-3
   dl-hack5-32bit-addr-4 
```

你的 valgrind 运行正在过去。它说在 0 个上下文中有 0 个错误，不包括被抑制的错误。您不应该关心被抑制的错误，因为它们与您的代码无关。通常它们是系统库中的问题，因此无论如何您都无法修复它们。

在 dl-hack 抑制的情况下，它们与动态链接器有关。

# java - 如何获得不能以任何原始数据类型保存的两个大数的总和？

> ID：10817384
> 
> 赞同：5
> 
> 时间：2012-05-30T13:32:18.270
> 
> 标签：java

如何找到不能以任何原始数据类型保存的两个大数的总和？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T13:33:24.603

我假设“任何数据类型”是指“任何原始数据类型”。

根据您的数据类型，您可以使用[`BigInteger`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)或[`BigDecimal`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T13:34:15.567

您可以通过将 2 个数字存储为`Strings`（或`char[]`数组）然后通过执行加法迭代来`char`手动`char`执行计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:06:39.360

```
import java.math.BigInteger;

  BigInteger n1 = new BigInteger("123456789012345678901234567890");
  BigInteger n2 = new BigInteger("111122222233334445556666");
  BigInteger result = n1.add(n2);
  System.out.println(result.toString()); 
```

# jquery - 如何向右滑动我的 div

> ID：10817387
> 
> 赞同：0
> 
> 时间：2012-05-30T13:32:29.440
> 
> 标签：jquery, html, css

我正在创建一个要滑动的 div 列表。每张幻灯片都有自己的图像和某种描述。我见过几种滑动的方法，但我仍然无法自己构建一个。

我正在寻找的想法：

*   创建一个 div 列表。第一个可见
*   当我按“下一个”或“上一个”时，查看列表的下一个或上一个元素并隐藏/淡入/向右滑动另一个

幻灯片转换需要正确，以防万一。

我不是要你为我构建代码，但任何建议都会受到赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:34:27.753

有很多 javascript carousel 插件，尤其是 jQuery 等框架的插件。

[jCarousel](http://sorgalla.com/projects/jcarousel/)是最受欢迎的之一，但简单的谷歌搜索会显示很多结果。其中大多数将允许您配置滚动方向以及要显示的元素数量等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:36:37.277

如果您不坚持从头开始构建一个，您可以使用

[Bx滑块](http://bxslider.com/)

它使您可以配置许多设置以及转换、速度、寻呼机链接，并具有许多您在某些时候可能需要的回调方法。

还有很多其他选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:38:06.323

首先，有很多插件，您可以在其中阅读代码以了解它们的标记。

基本思路如下：

您有一个左侧浮动列表 ( `<ul>`)，您的项目（在本例中为图像）显然是`<li>`-Tag。这个标签有一个常数`width`。用常量项将 div 包裹在列表周围`width`并设置`overflow-x:hidden;`为 div。

在你的javascript中你计算`var maxWidth = constantWidth * numberOfElements`。

当发生上一个/下一个单击时，您只需将常量与 -Tag 的`margin-left`样式属性`<ul>`相加。当您使用 jQuerys`.animate()`方法执行此操作时，您将获得不错的滑动效果。要捕获元素外的滑动，请使用`maxWidth`变量并`margin-left`在执行动画之前将其与计算结果进行检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T13:47:54.003

看看其中一些；

[http://www.blogohblog.com/20-killer-image-sliders-carousels/](http://www.blogohblog.com/20-killer-image-sliders-carousels/)

# c# - DataGridView 和 CheckBox

> ID：10817389
> 
> 赞同：0
> 
> 时间：2012-05-30T13:32:33.997
> 
> 标签：c#, winforms

我使用数据集将数据库连接到 DataGridView 并设置：

```
DataGridView.autogenerate=false 
```

然后我使用 gui 属性逐列添加，然后我将其中一列设置为复选框。

首先，我想将复选框的值设置为 true 或 false，然后检查该值是否为 true，如果为 true，那么我想获取另一列但在同一行中的值，然后隐藏当前行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:31:08.000

首先，您需要检查该单元格是否被选中。

```
if (DataGridViewRow.Cells[CellNumber].Value != null)
{
    if ((Boolean)DataGridViewRow.Cells[CellNumber].Value == true)
    {
        //Get other cell value
    }
} 
```

完成此操作后，您可以隐藏该行。

```
DataGridViewRow.Visible = false; 
```

# automapper - 使用 Automapper 将多个集合映射到单个集合

> ID：10817392
> 
> 赞同：0
> 
> 时间：2012-05-30T13:32:48.813
> 
> 标签：automapper, automapper-2

我可以使用以下代码将一组相同类型的集合映射到单个集合。

```
AutoMapper.Mapper.CreateMap<Source, Destination>().ForMember(
                dest => dest.Drivers,
                opt => opt.MapFrom(src => src.BikeDrivers.Concat(src.CarDrivers).Concat(src.TruckDrivers))); 
```

通过上述解决方案，我可以将所有三种类型的驱动程序映射到一个集合中。我的目标对象（驱动程序）有一个名为 DriverType 的属性，它有助于识别驱动程序的类型。（自行车司机/汽车司机/卡车司机）

在上面的代码中，我如何根据我添加的集合设置 DriverType 属性。

例如：我必须硬编码

DriverType = CarDriver 用于 CarDrivers 集合项 DriverType = BikeDriver 用于 BikeDrivers 集合项。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:44:31.340

要设置 DriverType 属性，您必须在源对象中具备此知识。我看不到你的大图，但这可能用作样本

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Text;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            var s = new Source()
                        {
                            BikeDrivers = new List<BikeDriver>() {new BikeDriver()},
                            CarDrivers = new List<CarDriver>() {new CarDriver()},
                            TruckDrivers = new List<TruckDriver>() {new TruckDriver()},
                        };

            var d = new Destination();

            AutoMapper.Mapper.CreateMap<Source, Destination>().ForMember(
                dest => dest.Drivers,
                opt => opt.MapFrom(src => src.BikeDrivers.Concat<IDriver>(src.CarDrivers).Concat<IDriver>(src.TruckDrivers)));

            var result = AutoMapper.Mapper.Map(s, d);
        }

        public class Driver : IDriver
        {
            public string DriverType { get; set; }
        }

        public class Destination
        {
            public IEnumerable<IDriver> Drivers { get; set; }
        }

        public class Source
        {
            public IEnumerable<BikeDriver> BikeDrivers { get; set; }
            public IEnumerable<CarDriver> CarDrivers { get; set; }
            public IEnumerable<TruckDriver> TruckDrivers { get; set; }
        }

        public interface IDriver
        {
            string DriverType { get; set; }
        }

        public class BikeDriver : IDriver
        {
            public string DriverType
            {
                get { return "BikeDriver"; }
                set { throw new NotImplementedException(); }
            }
        }
        public class CarDriver : IDriver
        {
            public string DriverType
            {
                get { return "CarDriver"; }
                set { throw new NotImplementedException(); }
            }
        }
        public class TruckDriver : IDriver
        {
            public string DriverType
            {
                get { return "TruckDriver"; }
                set { throw new NotImplementedException(); }
            }
        }
    }
} 
```

# android - 有没有办法在一个上运行一个以上的 IntentService？

> ID：10817395
> 
> 赞同：1
> 
> 时间：2012-05-30T13:32:50.733
> 
> 标签：android, multithreading, android-service, intentservice

我想我已经明白了 IntentService 类的意义。它处理一个队列，防止太多或更多的服务实例一起执行。

我发现它很有用，但是如果我从 IntentService 派生了太多具有不同目的的类，并且我希望它们一起运行而无需相互等待怎么办？

如果我可以设置任何标志或属性，那就太好了，它会说：“允许太多或更多不同的派生类意图服务在他自己的队列上运行每个服务”

有什么办法吗？

我知道所有其他替代方案，例如“常规”服务、AsyncTesk、手动管理线程，所以请不要建议我考虑使用它们。我知道它们的优点和局限性。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:24:06.957

没有什么可以阻止两个`IntentService`s 一起执行。

例如，给定一个服务，`ServiceA`

```
public class ServiceA extends IntentService {
   ...
} 
```

和`ServiceA`恰当命名的子类`ServiceB`

```
public class ServiceB extends ServiceA {
} 
```

`ServiceB`不会**与**共享执行器/队列（或*其他任何*东西）`ServiceA`，即两者可以同时执行。您可以通过在其中放置一个循环来轻松测试它`ServiceA`，例如

```
protected void onHandleIntent(Intent intent) {
    for (int i = 0; i < 20; i++) {
        System.out.println(getClass().getSimpleName() + " says hello");
        try {
            Thread.sleep(2000L);
        } catch (InterruptedException e) {
            return;
        }
    }
} 
```

然后打电话

```
startService(new Intent(this, ServiceA.class));
startService(new Intent(this, ServiceB.class)); 
```

从你的`Activity`. 它们将同时运行。

# matlab - Matlab：对 3D 绘图进行颜色编码

> ID：10817396
> 
> 赞同：0
> 
> 时间：2012-05-30T13:32:53.090
> 
> 标签：matlab, colors, 3d

我一直试图在网上寻找我想要的东西，但我运气不佳，所以我想我会在这里问。

是否可以用不同的颜色精确定位并在图表上显示两个图之间存在交叉点的点？

谢谢你提供的所有帮助。

这是代码：

```
file1 = fopen('C:\Program Files (x86)\Notepad++\avatar1.txt'); % open text file
file2 = fopen('C:\Program Files (x86)\Notepad++\avatar2.txt'); % open text file
file3 = fopen('C:\Program Files (x86)\Notepad++\avatar3.txt'); % open text file

tline1 = fgetl(file1); % read line by line and remove new line characters
tline2 = fgetl(file2); % read line by line and remove new line characters
tline3 = fgetl(file3); % read line by line and remove new line characters

% declare empty arrays
CX1 = [];
CY1 = [];
CZ1 = [];

CX2 = [];
CY2 = [];
CZ2 = [];

CX3 = [];
CY3 = [];
CZ3 = [];

while ischar(tline1) % true if tline is a character array
    temp = cell2mat(textscan(tline1, '<%n,%n,%n>'));

    % convert all the cell fields to a matrix
    CX1 = vertcat(CX1, temp(1));
    CY1 = vertcat(CY1, temp(2));
    CZ1 = vertcat(CZ1, temp(3));

    tline1 = fgetl(file1);
end

while ischar(tline2) % true if tline is a character array
    temp = cell2mat(textscan(tline2, '<%n,%n,%n>'));

    % convert all the cell fields to a matrix
    CX2 = vertcat(CX2, temp(1));
    CY2 = vertcat(CY2, temp(2));
    CZ2 = vertcat(CZ2, temp(3));

    tline2 = fgetl(file2);
end

while ischar(tline3) % true if tline is a character array
    temp = cell2mat(textscan(tline3, '<%n,%n,%n>'));

    % convert all the cell fields to a matrix
    CX3 = vertcat(CX3, temp(1));
    CY3 = vertcat(CY3, temp(2));
    CZ3 = vertcat(CZ3, temp(3));

    tline3 = fgetl(file3);
end

fclose(file1); % close the file
fclose(file2); % close the file
fclose(file3); % close the file

plot3(CX1, CY1, CZ1) % plot the data and label the axises
plot3(CX2, CY2, CZ2)
plot3(CX3, CY3, CZ3)
xlabel('x')
ylabel('y')
zlabel('z') 
grid on
axis square
rotate3d on; % activate interactive mouse rotation 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:57:37.323

更改颜色很简单，只需在 plot3 命令中添加颜色代码，例如：

```
plot3(CX1, CY1, CZ1, 'b'); % blue lines/markers
plot3(CX2, CY2, CZ2, 'r'); % red lines/markers
plot3(CX3, CY3, CZ3, 'g'); % green lines/markers 
```

有关颜色代码的更多详细信息，请参阅[Matlab Colourspec 页面](http://www.mathworks.co.uk/help/techdoc/ref/colorspec.html)。

交点可能有点棘手，具体取决于您是想要点的交点（即出现在所有 3 个数据集中的特定点）还是连接点的线的交点。

我认为前者应该相当容易（这是未经测试的，假设`CX1`等是垂直向量）：

```
figure; % Open up a new figure
hold on; % This means the everything you plot stays in the figure and is not overwritten

% Plot the original points
plot3(CX1, CY1, CZ1, '-*b'); % blue lines/markers
plot3(CX2, CY2, CZ2, '-*r'); % red lines/markers
plot3(CX3, CY3, CZ3, '-*g'); % green lines/markers

% turn those 1xn vectors into 3xn matrices for each set of points
points1 = [CX1, CY1, CZ1];
points2 = [CX2, CY2, CZ2];
points3 = [CX3, CY3, CZ3];

% Find the intersection of the 3 sets
CX_intersect = intersect( points1, intersect( points2, points3, 'rows'), 'rows');

% Draw a scatter plot of the intersection points. the 'mo' means:
% m: magenta in colour, o: circular markers
scatter3( CX_intersect(:,1),CX_intersect(:,2),CX_intersect(:,3),'mo'); 
```

交叉点的工作方式如下：

假设我们有 3 个矩阵，每个矩阵包含许多 3d 点。让我们称它们`A`为`B`和`C`。

`A`为了找到所有 3 个集合之间的交集，我们首先找到在和中相交的点`B`。我们现在有一组我们知道在`A`和中的点`B`，所以现在我们只需要检查这些点是否`C`也在。我们通过做另一个交集来做到这一点。

我只是将它们链接成一行代码，这可能不是很有用，所以我道歉。`A`, `B`,交叉点的代码`C`如下：

```
D = intersect(A,B,'rows') % we use rows because each row represents a 3D point
E = intersect(C,D,'rows') % E is the intersection of the 3 sets. 
```

然后我们可以将 D 代入该行`E = ...`，我们得到：

```
E = intersect( intersect(A,B,'rows'), C, 'rows' ); 
```

希望有帮助！

# asp.net - ASP.NET 网站翻译

> ID：10817401
> 
> 赞同：1
> 
> 时间：2012-05-30T13:33:15.913
> 
> 标签：asp.net, url, translation

我想翻译我的 ASP.NET 网站，就像微软一样。我希望网址具有 /en-EN/ 或 /de-DE/ 问题是我的网址已经路由网址

我怎样才能做到这一点？

我找到了这个[http://blog.maartenballiauw.be/post/2010/01/26/Translating-routes-(ASPNET-MVC-and-Webforms).aspx](http://blog.maartenballiauw.be/post/2010/01/26/Translating-routes-(ASPNET-MVC-and-Webforms).aspx) 但我不想翻译所有的网址和这个方法在我看来，视图和控制器太复杂了。

我需要 mysite.com/en-EN/routedpage 或 mysite.com/de-DE/routedpage

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:49:51.720

上面的例子是针对mvc的，你的网站是mvc吗？您需要为特定文化设置您的网站，这里有一篇文章如何做到这一点

[http://www.ezzylearning.com/tutorial.aspx?tid=3477182](http://www.ezzylearning.com/tutorial.aspx?tid=3477182)

也供进一步阅读

[http://www.codeproject.com/Articles/7998/Creating-multilingual-websites-Part-1](http://www.codeproject.com/Articles/7998/Creating-multilingual-websites-Part-1) 和 [http://www.codeproject.com/Articles/8073/Create-multilingual-web-pages-very-easily](http://www.codeproject.com/Articles/8073/Create-multilingual-web-pages-very-easily)

它很容易设置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-25T15:17:26.643

这是一个重要的问题。您希望 URL 中包含用于 SEO 和可用性目的的语言编码。

两种常见的解决方案是：

1）更改域。fr.example.com 或 de.example.com。然后不需要更改路线。

2) 使用# 作为语言代码。现在的搜索引擎会观察到这一点。那么，您将拥有 www.example.com/#de 或 www.example.com/#fr

您可以使用 www.SiteTran.com 实现这两种解决方案，只需将我们的 javascript 粘贴到您的页面并将 sitetran_url_type 变量设置为：

`var sitetran_url_type = 'sub.domain';`

或者

`var sitetran_url_type = 'hash';`

SiteTran 是 100% 免费的，是我的公司。

# c++ - 如何使用 toInt 从 Qt 中的 QByteArray 中提取整数？

> ID：10817402
> 
> 赞同：3
> 
> 时间：2012-05-30T13:33:22.043
> 
> 标签：c++, qt

我是 C++ 和 Qt 的初学者。发送的数据是一串 ASCII 字符，例如：“jdlsfjffjf:XX”，我想在其中提取数字 XX。我知道我可能应该使用 indexof 来指向它，但不确定如何。有什么方向吗？这是接收、显示和写入的服务器端代码。我在应用程序中得到了正确的数字，但我正在写入的文件中出现乱码。

```
void Receiver::processPendingDatagrams()
    {
        while (udpSocket->hasPendingDatagrams()) {
            QByteArray datagram; //array of bytes
            datagram.resize(udpSocket->pendingDatagramSize()); //size it depending on sent data
            udpSocket->readDatagram(datagram.data(), datagram.size()); //read all
            statusLabel->setText(tr("%1 C").arg(datagram.data()));

            //writing stream to file
            bool ok;
            QFile file("file.dat");
            file.open(QIODevice::WriteOnly);
            QDataStream out(&file);   
            out << datagram.toInt(&ok, 10 );        
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T13:37:49.067

```
int num = datagram.right(datagram.size() - datagram.indexOf(':') - 1).toInt(); 
```

# c# - 在 PInvoking 非托管代码时我应该调用 FinalReleaseCOMObject

> ID：10817409
> 
> 赞同：0
> 
> 时间：2012-05-30T13:33:57.410
> 
> 标签：c#, com, pinvoke

我有一个托管的 .NET 2.0 dll，它提供 IDispatch 接口并调用 IDispatch 接口。阅读这个问题这个问题：

[何时使用 ReleaseComObject 与 FinalReleaseComObject？](https://stackoverflow.com/questions/3937181/when-to-use-relasecomobject-vs-finalreleasecomobject)

听起来好像我应该等待垃圾收集释放我的 COM 对象引用，而不是尝试自己计算它们。但是，当我这样做时，调用我的 DLL 的非托管代码会引发错误（我没有源代码来调试错误是什么），但这表明这是一个未经授权的虚拟内存访问问题。添加 FinalReleaseCOMObject 可停止此错误。

那我应该使用 FinalReleaseCOMObject 吗？

编辑：忘记提及当托管代码被非托管dll替换时，它不会出现错误。

# c# - 如何将返回类引用数据的函数添加到我的 c# 类中？

> ID：10817419
> 
> 赞同：1
> 
> 时间：2012-05-30T13:34:35.590
> 
> 标签：c#

我有以下课程：

```
public class Content {
    public int Key { get; set; }
    public int Order { get; set; }
    public string Title { get; set; }
} 
```

我有以下函数，它根据 id 返回内容类型代码。

```
protected string getType(string id) {
    switch(id.Substring(2, 2)) {
        case "00": return ("14");
        case "1F": return ("11");
        case "04": return ("10");
        case "05": return ("09");
        default: return ("99");
    }
} 
```

尽管 id 不是内容类的一部分，但类和函数总是一起使用。

有什么方法可以让我把这个功能完全融入我的课堂吗？我正在考虑一个枚举或一些固定的东西，但是我对 C# 的了解还不足以让我知道如何做到这一点。我希望有人能给我和例子。

**更新：**

我喜欢以下建议：

```
public static readonly Dictionary<String, String> IdToType = 
    new Dictionary<string, string>
    {
        {"00", "14"},
        {"1F", "11"},
        {"04", "10"},
        {"05", "09"},
        //etc.
    }; 
```

但我不知道我怎么能把它融入我的课堂。有没有人可以告诉我？我想做的是写这样的东西：

```
Content.getType("00") 
```

按照建议将数据存储在字典中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T13:45:16.477

这可能不是您要查找的内容，但我会使用字符串到字符串字典。

如果你想让它成为你班级的公共静态成员，那可能就是你所追求的。

前任：

```
public static readonly Dictionary<String, String> IdToType = 
    new Dictionary<string, string>
    {
        {"00", "14"},
        {"1F", "11"},
        {"04", "10"},
        {"05", "09"},
        //etc.
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:39:52.093

你在找这样的东西吗？

```
public class Content
{
    public int Key { get; set; }
    public int Order { get; set; }
    public string Title { get; set; }

    public static string getType(string id)
    {
        switch (id.Substring(2, 2))
        {
            case "00": return ("14");
            case "1F": return ("11");
            case "04": return ("10");
            case "05": return ("09");
            default: return ("99");
        }
    }
} 
```

该方法可以像这样调用：`Content.getType("00")`.

* * *

[**另外：**按照 C# 的约定，方法名称应该是 Pascal 大小写的，所以你的方法名称应该是`GetType`. 您可能已经发现，在`System.Object`called上已经有一个方法`GetType`，因此您可能想提出一个更具描述性的名称。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:54:02.897

看来您需要将枚举与扩展方法结合起来......

例如

```
static string Default = "99";
public static readonly Dictionary<string, string> Cache = new Dictionary<string,string>(){
    {"00", "14"},
    {"1F", "11"},
    {"04", "10"},
    {"05", "09"},
    //etc
}
public static getType(Content this){
    if(Cache.ContainsKey(this.typeId)) return Cache[this.typeId];
    else return Default;
}
//Add other types as needed 
```

或者查看这篇文章以获取 TypeSafe 枚举模式的示例：[C# String enums](https://stackoverflow.com/questions/424366/c-sharp-string-enums)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T14:44:11.637

芽，

只是为了解释**@DLH**的答案：

```
public class Content 
{
 public int Key { get; set; }
 public int Order { get; set; }
 public string Title { get; set; }

 public static readonly Dictionary<String, String> getType = 
       new Dictionary<string, string>
 {
     {"00", "14"},
     {"1F", "11"},
     {"04", "10"},
    {"05", "09"},
    //etc.
 };
} 
```

然后将允许您这样做：

```
string value = Content.getType["00"]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T15:15:49.037

您可以定义一个与字符串可比的类...

然后，您可以使用您想要的内容值定义一个枚举。

然后，您可以添加运算符重载来处理字符串、int 或 long 等。

然后，您将为枚举类型添加运算符重载。

使用这种方法，您将不需要 Dictionary 并且您甚至不需要枚举，因为您将在 Content 类中声明 const readonly 属性，例如`public static readonly Type0 = "00";`

这实际上比使用类型安全枚举模式要少，尽管它是相似的，并且它为您提供了能够声明实常量的好处。

# django - 在Django中将模型对象从模型复制到另一个模型

> ID：10817422
> 
> 赞同：6
> 
> 时间：2012-05-30T13:34:38.223
> 
> 标签：django, django-models

我必须建模。我想将模型对象从一个模型复制到另一个模型：模型 2 是模型 1 的副本（这个模型有太多 m2m 字段）模型 1：

```
class Profile(models.Model):
      user = models.OneToOneField(User)
      car = models.ManyToManyField(Car)
      job = models.ManyToManyField(Job)
      .
      . 
```

这是一个调查应用程序。我想在他/她参加调查时保存用户的个人资料（因为他可以在调查后编辑个人资料）我创建了另一个模型来在他接受调查时保存用户个人资料（我不确定它的正确方式）

```
class SurveyProfile(models.Model):
      user = models.OneToOneField(SurveyUser) #this is another model that takes survey users
      car = models.ManyToManyField(Car)
      job = models.ManyToManyField(Job) 
```

如何将用户配置文件从 Profile 复制到 SurveyProfile。

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T15:02:18.387

`deepcopy`等将不起作用，因为类/模型不同。

如果您确定*`SurveyProfile`中存在所有字段`Profile`，这应该可以工作（未经测试）：

```
for field in instance_of_model_a._meta.fields:
    if field.primary_key == True:
        continue  # don't want to clone the PK
    setattr(instance_of_model_b, field.name, getattr(instance_of_model_a, field.name))
instance_of_model_b.save() 
```

`*`（在这种情况下，我建议您创建一个抽象`ProfileBase`类并将其继承为`Profile`and的具体类`SurveyProfile`，但这不会影响我上面所说的）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T13:54:45.630

我很难理解你上面写的内容，因此我不能 100% 确定这是否可行，但如果我理解你的话，我想我会做的是这样的事情：

```
class Model2Form(ModelForm):
    class Meta:
        model = models.Model2 
```

接着

```
f = Model2Form(**m1.__dict__)
if f.is_valid():
    f.save() 
```

但我认为这看起来更像是糟糕的数据库设计，而不是任何东西，没有看到整个模型我无法确定。但是，无论如何，当您可以简单地在模型级别使用继承或其他方式来获得相同的行为时，我不确定您为什么要这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-07T13:08:14.057

这是我一直在使用的函数，它建立在 model_to_dict 之上。Model_to_dict 只返回外键的 id + 而不是它们的实例，所以对于那些我用模型本身替换它们。

```
def update_model(src, dest):
    """
    Update one model with the content of another.

    When it comes to Foreign Keys, they need to be
    encoded using models and not the IDs as
    returned from model_to_dict.

    :param src: Source model instance.
    :param dest: Destination model instance.
    """
    src_dict = model_to_dict(src, exclude="id")
    for k, v in src_dict.iteritems():
        if isinstance(v, long):
            m = getattr(src, k, None)
            if isinstance(m, models.Model):
                setattr(dest, k, m)
                continue

        setattr(dest, k, v) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-23T15:36:19.670

我就是这样做的（注意：这是在 Python3 中，你可能需要改变一些东西 - 摆脱字典理解 - 如果你使用的是 python 2）：

```
def copy_instance_kwargs(src, exclude_pk=True, excludes=[]):
    """
    Generate a copy of a model using model_to_dict, then make sure
    that all the FK references are actually proper FK instances.  
    Basically, we return a set of kwargs that may be used to create
    a new instance of the same model - or copy from one model
    to another.

    The resulting dictionary may be used to create a new instance, like so:

    src_dict = copy_instance_kwargs(my_instance)
    ModelClass(**src_dict).save()

    :param src: Instance to copy
    :param exclude_pk: Exclude the PK of the model, to ensure new records are copies.
    :param excludes: A list of fields to exclude (must be a mutable iterable) from the copy. (date_modified, for example)
    """
    # Exclude the PK of the model, since we probably want to make a copy.
    if exclude_pk:
        excludes.append(src._meta.pk.attname)
    src_dict = model_to_dict(src, exclude=excludes)
    fks={k: getattr(src, k) for k in src_dict.keys() if 
         isinstance(getattr(src, k, None), models.Model) }
    src_dict.update(fks)
    return src_dict 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-31T04:48:12.390

因此，如果我正确地解释了您的问题，那么您有一个旧模型 ( `Profile`)，并且您正在尝试用新模型替换它`SurveyProfile`。鉴于这种情况，从长远来看，您可能需要考虑使用像[South这样的数据库迁移工具。](http://south.aeracode.org/)现在，您可以在 Django shell ( ) 中运行脚本`manage.py shell`：

```
from yourappname.models import *
for profile in Profile.objects.all():
    survey_profile = SurveyProfile()
    # Assuming SurveyUser has user = ForeignKey(User)...
    survey_profile.user = SurveyUser.objects.get(user=profile.user)
    survey_profile.car = profile.car
    survey_profile.job = profile.job
    survey_profile.save() 
```

## 使用南

如果这个项目需要长期维护和更新，我强烈建议使用像[South](http://south.aeracode.org/)这样的数据库迁移包，它可以让您修改模型上的字段，并轻松迁移数据库。

例如，您建议您的原始模型存在太多`ManyToManyField`s。与南方，你：

1.  从模型中删除字段。
2.  自动生成架构迁移。
3.  应用迁移。

这使您可以重用所有旧代码，而无需更改模型名称或与数据库混淆。

# sql - sql查询分页：两种方法有什么区别

> ID：10817425
> 
> 赞同：1
> 
> 时间：2012-05-30T13:34:42.323
> 
> 标签：sql, oracle, pagination

我在 Oracle 上运行了这两个查询：

```
select B.* from (
    select A.*, rownum as rn  from (
        select * from .... order by ...
    ) A  ) B  where  B.rn > 0 and B.rn <=30; 
```

和

```
select B.* from (
    select A.*, rownum as rn  from (
        select * from .... order by ...
    ) A  where  rownum <= 30 ) B  where  rn > 0 
```

实际上这些查询的结果是不同的。第一个看起来更正确。为什么？

第二种方法的问题是：当我以 0-30 的间隔运行它时，乍一看还不错。但是当我以 30-60 间隔运行它时，我发现 30-60 结果确实包含我已经在 0-30 结果中看到的条目（这显然不应该发生）。

**UPD**：我刚刚发现它可能无法正常工作，因为我的`order by`子句产生了不唯一的排序。所以它不是按 PK 排序，而是按 clientName 排序，结果中可能有很多相同的客户端。那么，这可能是原因吗？当订单实际上未定义时，oracle 如何对条目进行排序？在分页顺序的情况下，应该非常定义，以便在我们在页面之间切换时结果稳定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:53:39.583

您正在引用列别名“rn”，它派生自在应用 orderby 之前在内部查询中分配的 rownum。

而是在外部查询中引用 rownum。

```
select *
from (
  select   *
  from     ...
  order by ...
) 
where rownum between 1 and 30; 
```

或者 ...

顺便说一句，Rownum 0 不存在。

```
select *
from (
  select   a.*, rownum rn
  from (
    select   *
    from     ...
    order by ...
    ) a
  where rownum < 60
) 
where rn >= 30 
```

# c# - DllImport ERROR_MORE_DATA UNMANAGED 在 C# 中调用 C++

> ID：10817426
> 
> 赞同：0
> 
> 时间：2012-05-30T13:34:44.227
> 
> 标签：c#, winapi, registry, unmanaged, dllimport

```
 DWORD OREnumKey(
      __in         ORHKEY Handle,
      __in         DWORD dwIndex,
      __out        PWSTR lpName,
      __inout      PDWORD lpcName,
      __out_opt    PWSTR lpClass,
      __inout_opt  PDWORD lpcClass,
      __out_opt    PFILETIME lpftLastWriteTime
    ); 
```

我的代码

```
[DllImport("offreg.dll", CharSet = CharSet.Unicode, SetLastError = true)]
public static extern uint OREnumKey(IntPtr Handle, IntPtr dwIndex, [MarshalAs(UnmanagedType.LPWStr)]out StringBuilder lpName, ref IntPtr lpcName, [MarshalAs(UnmanagedType.LPWStr)]out StringBuilder lpClass, ref IntPtr lpcClass, out System.Runtime.InteropServices.ComTypes.FILETIME lpftLastWriteTime);
 IntPtr myKey = hiveid;
    IntPtr dwindex=(IntPtr)0;
    StringBuilder lpName=new StringBuilder("",255);
    IntPtr lpcName = (IntPtr)0;
    StringBuilder  lpClass=new StringBuilder("",255);
    IntPtr lpcClass = (IntPtr)11;
    System.Runtime.InteropServices.ComTypes.FILETIME lpftLastWriteTime;
    uint ret3 = OREnumKey(myKey, dwindex, out lpName, ref lpcName, out lpClass, ref lpcClass, out lpftLastWriteTime); 
```

ret3=ERROR_MORE_DATA 234 问题可能是错误的 StringBuilder 大小或 FILETIME 2nd 我应该如何从 C# 调用 PWSTR 参数？ `[MarshalAs(UnmanagedType.LPWStr)]out StringBuilder lpName`这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:15:34.043

这是一个非常标准的 Windows 错误代码，这意味着您调用了一个 winapi 函数并且您没有传递足够大的缓冲区。解决问题的唯一方法是传递更大的缓冲区。

这看起来很像 RegQueryKeyEx() 的包装器，这使得您很可能将错误数据传递给函数。lpcName参数实际上是*，*`ref int`而不是 IntPtr。你应该传递一个变量来存储你传递的缓冲区的大小，在你的例子中是 255。lpcClass 参数同样是无聊的。这应该解决它：

```
[DllImport("offreg.dll", CharSet = CharSet.Unicode, SetLastError = true)]
public static extern uint OREnumKey(
    IntPtr Handle, 
    int dwIndex,
    StringBuilder lpName, 
    ref int lpcName, 
    StringBuilder lpClass, 
    ref int lpcClass, 
    out System.Runtime.InteropServices.ComTypes.FILETIME lpftLastWriteTime);

    ...   
    StringBuilder lpName=new StringBuilder("",255);
    int nameSize = lpName.Capacity;
    StringBuilder  lpClass=new StringBuilder("",255);
    int classSize = lpClass.Capacity;
    System.Runtime.InteropServices.ComTypes.FILETIME lpftLastWriteTime;
    uint ret3 = OREnumKey(hiveid, 0, lpName, ref nameSize, lpClass, ref classSize, out lpftLastWriteTime);
    if (ret3 != 0) throw new Exception("kaboom");
    string name = lpName.ToString();
    string className = lpClass.ToString(); 
```

# data-binding - knockout.js 数据绑定 'with' 与 jQuery 更改事件冲突

> ID：10817428
> 
> 赞同：4
> 
> 时间：2012-05-30T13:35:02.397
> 
> 标签：data-binding, knockout.js, onchange

出于某种原因，当我使用 data-bind="with: detailStudent" 时，不会调用 jQuery change() 绑定。我正在动态填充选择选项，但我不确定这是否重要。这是我正在使用的一些代码，只是为了对正在发生的事情给出一个像样的图片：

```
var viewModel;
$(document).ready(function() {  
    viewModel = new StudentViewModel();
    ko.applyBindings(viewModel); 

    // this change event is not getting called, but if i put the onchange directly into the html as an attribute, it works fine.
    $("#accountDialog").find("#mySelect").change(function() {
        alert('hi');
    }
}

function Student(data) {
    var self = this;    
    ko.mapping.fromJS(data, {}, this);                
}

function StudentViewModel() {
    var self = this;    
    this.students = ko.observableArray([]);    
    this.detailedStudent = ko.observable(); 
}

<div id="accountDialog" class="modal hide fade" data-bind="with: detailedStudent">
    <select id="mySelect" name="mySelect" data-bind="value: GraduationClassId"></select>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T13:57:55.033

The `with` binding is a wrapper to the `template` binding. It copies off the child elements and uses them as the template. So, if your `detailedStudent` is changing, then KO will be rendering new elements each time that did not have the event handler attached to it.

Some alternatives:

*   use a binding to attach the event handler (can use `event` binding)
*   create a [manual subscription](http://knockoutjs.com/documentation/observables.html#explicitly_subscribing_to_observables) against your `detailedStudent` observable and perform your action in the view model (best option, if your action does not involve DOM manipulation)
*   try to use a delegated event handler like jQuerys `$.on()` [http://api.jquery.com/on/](http://api.jquery.com/on/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T09:45:51.787

如果该操作不涉及 DOM 操作，那么我同意 RP Niemeyer，手动订阅是最佳选择。

但是，通常我们会有一些带有 DOM 操作的事件，例如，为您的属性设置 jquery 对话框/日期选择器插件。我认为自定义绑定将是最好的选择。自定义绑定将与“with”绑定子句完美配合，以将事件处理程序设置为任意 javascript 函数。

你可以通读它，它并不像看起来那么难。 [http://knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

# php - PHP SoapClient 请求：不是此服务的有效方法

> ID：10817430
> 
> 赞同：21
> 
> 时间：2012-05-30T13:35:11.310
> 
> 标签：php, web-services, soap, soap-client

好吧，我想我需要另一双眼睛来看看这个。我正在对远程服务器上的 echo web 服务进行简单的 php soapclient 调用。我很确定我没有任何拼写错误并且函数调用是正确的。但是，我收到一个致命错误，声称该函数不是有效方法。下面是 Web 服务类型的 var_dump。

> array(4) { [0]=> string(88) "struct EspException { string Code; string Audience; string Source; string Message; }" [1]=> string(71) "struct ArrayOfEspException { string Source; EspException Exception ; }" [2]=> string(43) "struct EchoTestRequest { string ValueIn; }" [3]=> string(45) "struct EchoTestResponse { string ValueOut; }" }
> 
> 致命错误：未捕获的 SoapFault 异常：[Client] 函数（“EchoTestRequest”）不是 /home/grafixst/public_html/cpaapp/echo_test.php:38 中此服务的有效方法堆栈跟踪：#0 /home/grafixst/public_html /cpaapp/echo_test.php(38): SoapClient->__call('EchoTestRequest', Array) #1 /home/grafixst/public_html/cpaapp/echo_test.php(38): SoapClientAuth->EchoTestRequest(Array) #2 {main在第 38 行的 /home/grafixst/public_html/cpaapp/drew/echo_test.php 中抛出

这是我用来拨打电话的代码：

```
require_once('SoapClientAuth.php');

ini_set("soap.wsdl_cache_enabled", "0");

#- Loading the WSDL document
$server = "https://wsonline.seisint.com/WsAccurint/EchoTest?ver_=1.65";
$wsdl = $server . "&wsdl";     

$client = new SoapClientAuth($wsdl,
                array(
                      'login' => $username,
                      'password' => $password
                     ));   

$types = $client->__getTypes();

var_dump($types);

echo "</br>";

$req = $client->EchoTestRequest(array('ValueIn' => 'echo'));

print $req->ValueOut;
echo "</br>"; 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-13T19:05:27.787

对 Web 服务可用功能的简单请求解决了这个问题。

```
$functions = $client->__getFunctions ();
var_dump ($functions); 
```

EchoTestRequest 不是有效的函数调用。正确的函数调用是 EchoTest，由函数变量 dump 说明。

```
array(1) { [0]=> string(54) "EchoTestResponse EchoTest(EchoTestRequest $parameters)" } 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-10-05T03:43:15.787

我假设您没有错字，并且该方法实际上是可用的。

尝试这个

```
ini_set("soap.wsdl_cache_enabled", "0"); 
```

这可能是因为 wsdl 被缓存了。

# hibernate - “运行 HQL 查询”未出现在 Netbeans 中

> ID：10817434
> 
> 赞同：1
> 
> 时间：2012-05-30T13:35:33.397
> 
> 标签：hibernate, netbeans, hql

我只想运行 HQL 查询而不为它编写 java 代码。我尝试右键单击 hibernate.cfg.xml 文件，但在菜单中找不到“运行 HQL 查询”选项。请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:39:10.690

按照以下步骤检查在 netbeans 中运行的 hql 是否用于休眠项目

*   右键单击 Projects 窗口中的项目节点并选择 Clean and Build。
*   在 Projects 窗口中右键单击 hibernate.cfg.xml 并选择 Run HQL Query 以打开 HQL 查询编辑器。
*   从工具栏中的下拉列表中选择 hibernate.cfg。
*   通过在编辑器中键入查询并单击工具栏中的运行 HQL 查询按钮来测试连接。

参考[http://netbeans.org/kb/docs/web/hibernate-webapp.html#06](http://netbeans.org/kb/docs/web/hibernate-webapp.html#06)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T10:00:51.707

右键单击**src ->default-package**中的 Hibernate.cfg.xml 文件，而不是 WEB-INF **->** classess

# hadoop - 将包含 ® 和 © 等字符的数据从 Oracle 加载到 HDFS 时出现问题 - Hadoop 分布式文件系统

> ID：10817436
> 
> 赞同：3
> 
> 时间：2012-05-30T13:35:42.017
> 
> 标签：hadoop, hdfs, sqoop

我正在使用 Cloudera Sqoop 将数据从 Oracle 数据库获取到 HDFS。除了像 ® 和 © 这样的字符在 HDFS 中被转换为 ®Â© 之外，一切都很好。（但是在 Oracle 中，数据的存储没有任何问题）。有什么方法可以将这些字符原样存储在 HDFS 中？

Sqoop 版本：1.3

谢谢， Karthikeya

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T06:34:51.263

您在 Oracle 数据库中使用哪种格式的字符？由于 Hadoop 使用 UTF-8 格式，如果它们不同，则应转换 Oracle 数据库中的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T16:23:15.670

我强烈建议检查 HDFS 上的实际字节，而不是查看表示。我见过太多的情况，其中数据存储得很好（实际上由 Sqoop 自动转换为 UTF8），而只是表示/终端仿真器/用于读取数据的其他任何东西都弄乱了编码。从 HDFS 下载文件并简单`hexdump -C`地验证编码是否确实被破坏。

# apache - 从子域到域的 Apache 别名文章

> ID：10817438
> 
> 赞同：0
> 
> 时间：2012-05-30T13:35:47.390
> 
> 标签：apache, apache2, virtualhost

我想知道是否可以从子域（例如[http://sub.domain.com](http://sub.domain.com)到[http://domain.com/some-article](http://domain.com/some-article) ）创建别名。当用户在地址栏中输入 sub.domain.com 时，他应该看到那篇文章（地址栏中的地址应该是同一个子域，所以我认为重定向不是我需要的）。有任何想法吗？

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:03:20.773

Apache ServerAlias 仅涵盖主机名而不是完全限定的 URI。

在上面的示例中，您应该使用 mod_rewrite，确保省略 R 标志，因为您不想重定向，即在响应中提供 30X 状态代码。

所以在上面的例子中，你可以有以下

```
<VirtualHost *:80>
...
ServerName domain.com
ServerAlias sub.domain.com

RewriteCond %{HTTP_HOST} ^domain.com$
RewriteCond %{REQUEST_URI} ^$
RewriteRule ^$ /some-article [L]

RewriteCond %{HTTP_HOST} ^sub.domain.com$
RewriteRule ^(.*) http:/domain.com/some-article$1 [L]
...
</VirtualHost> 
```

# bash - 在bash中计算一行中的逗号

> ID：10817439
> 
> 赞同：19
> 
> 时间：2012-05-30T13:35:51.170
> 
> 标签：bash, shell

有时我会收到一个 CSV 文件，该文件在单元格内有一个回车符。对于将其用作输入的程序来说，这不是可接受的格式。

为了检测输入行是否被拆分，我确定坏行中不会包含预期数量的逗号。是否有 bash 或其他常见的 unix 命令行工具可以让我计算行中的逗号？如有必要，我可以编写一个 Python 或 Perl 程序来执行此操作，但如果可能，我想在现有的 bash 脚本中添加一两行，以便在逗号计数错误时使其失败。有任何想法吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-30T13:40:23.103

去掉除逗号之外的所有内容，然后计算剩余的字符数：

```
$ echo foo,bar,baz | tr -cd , | wc -c
2 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-30T13:41:40.933

要计算逗号出现的次数，可以使用类似 awk 的方法：

```
string=(line of input from CSV file)
echo "$string" | awk -F "," '{print NF-1}' 
```

但这确实不足以确定一个字段中是否有回车。字段可以在里面有逗号，只要它们被引号包围。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-30T14:08:13.877

在纯 Bash 中：

```
while IFS=, read -ra array
do
    echo "$((${#array[@]} - 1))"
done < inputfile 
```

或者

```
while read -r line
do
    count=${line//[^,]}
    echo "${#count}"
done < inputfile 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-30T13:46:38.700

试试 Perl：

```
$ perl -ne 'print 0+@{[/,/g]},"\n"'
a
0
a,a
1
a,a,a,a,a
4 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-10-15T23:41:36.750

比其他解决方案更适合我的是这个。如果`test.txt`有：

```
foo,bar,baz
baz,foo,foobar,bar 
```

然后`cat test.txt | xargs -I % sh -c 'echo % | tr -cd , | wc -c'`产生

```
2
3 
```

这对于流媒体源或拖尾日志等非常有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-04T22:10:16.420

根据您尝试对 CSV 数据执行的操作，使用 csvquote 之类的包装脚本临时替换引用字段中有问题的换行符（和逗号），然后恢复它们可能会有所帮助。例如：

```
csvquote inputfile.csv | wc -l 
```

和

```
csvquote inputfile.csv | cut -d, -f1 | csvquote -u 
```

可能是您正在寻找的东西。查看`[https://github.com/dbro/csvquote][1]`代码和更多信息

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-05-30T13:46:09.427

只需删除所有回车：

```
tr -d "\r" old_file > new_file 
```

# objective-c - 在 Obj-c 中定义屏幕尺寸常量

> ID：10817441
> 
> 赞同：-2
> 
> 时间：2012-05-30T13:36:22.543
> 
> 标签：objective-c, constants

有没有一种方法可以在`-(void) viewDidLoad`我的屏幕变量（视网膜，而不是视网膜等）之类的方法中初始化一些常量？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:39:02.573

在 C 和 Objective-C 中，常量不能在运行时赋值，因为它们是常量。如果您询问如何分配给实例变量，或使该变量可供其他类访问，请更新您的问题。

# c# - asp.net主属性字符串，如果字符串为空，如何签入内容页面

> ID：10817442
> 
> 赞同：0
> 
> 时间：2012-05-30T13:36:25.333
> 
> 标签：c#, asp.net

如果我有一个主属性字符串，例如：

```
public String SharedInfo
{
    get { return (String)Session["SharedInfo"]; }
    set { Session["SharedInfo"] = value; }
} 
```

和内容页面中的标签，我通过执行以下操作检查字符串是否为空： if(Master.SharedInfo == null)

现在我的问题是：为什么 if(Master.SharedInfo == "") 不起作用，因为 SharedInfo 是一个字符串，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:40:12.820

有一种方便的方法可以“抓住”两者

```
if (String.IsNullOrEmpty(Master.SharedInfo)) {
    ...
} 
```

`null`并且`""`不相等。`null`意味着根本没有字符串。`""`是一个长度的字符串`0`。

```
string s = null;
int i = s.Length; // <-- Throws null reference exception 
```

但

```
string s = "";
int i = s.Length; // OK, i => 0 
```

`""`并且`String.Empty`是等价的。有些人说您应该始终使用`String.Empty`而不是`""`，但这并没有什么区别。

* * *

**更新**

相等的字符串常量由编译器保留，即编译器只存储相等的常量一次。你可以做一个简单的测试（回应@BobTodd的评论），

```
string s = ""; 
Console.WriteLine(Object.ReferenceEquals(s, "")); // --> true
Console.WriteLine(Object.ReferenceEquals(s, String.Empty)); // --> true 
```

* * *

为了完整起见（根据@JoelEtherton 的评论）。从 .NET Framework 4.0 开始，您可以测试

```
if (String.IsNullOrWhitespace(Master.SharedInfo)) {
    ...
} 
```

这将捕获类似`" "`or`"\t"`的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:38:58.970

在 C# 中，空字符串`""`不为空。这是一个实际的字符串，长度为零。

您可以使用`string.IsNullOrEmpty(string stringToTest)`检查空字符串和空字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:39:48.163

`String.Empty`("") 和`null`完全不同

这完全取决于写入 Session["SharedInfo"] 的内容。

如果什么都没有，那么它将为 null，否则为写入的值，可以是空字符串或 null。

确保使用`String.IsNullOrEmpty(string @string)`

# teamcity - 如何启用 Teamcity 性能监视器

> ID：10817448
> 
> 赞同：0
> 
> 时间：2012-05-30T13:36:48.637
> 
> 标签：teamcity, teamcity-7.0

我找不到任何与此相关的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T07:17:42.993

性能监视器是一个构建功能。可以在构建步骤管理页面上添加构建功能，请参见“添加构建功能”按钮。

# php - 强制 Magento 没有返回状态 301 而不是 404 的路由

> ID：10817449
> 
> 赞同：3
> 
> 时间：2012-05-30T13:36:50.100
> 
> 标签：php, magento, http-status-code-301, http-status-codes

我的任务是强制我们所有的 404 页面返回 301 的 http 状态。我一直在网上搜索/阅读，但找不到任何有关如何完成此操作的信息。

有没有办法改变 layout.xml 或模板文件中的 http 状态？如果没有，我应该看什么控制器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T19:29:38.197

我没有仔细研究它，但 404 消息似乎是在这个文件中发送的 - 在 3 个函数中：

服务器路径：/app/code/core/Mage/Cms/controllers

我将标头从 404 更改为 301 重定向。可能不是最漂亮的解决方案，但它似乎有效。

```
**/**
 * Default index action (with 404 Not Found headers)
 * Used if default page don't configure or available
 *
 */
public function defaultIndexAction()
{
    $this->getResponse()->setHeader('HTTP/1.1, 301 Moved Permanently');
    $this->getResponse()->setHeader('Location','http://www.streetcred.dk');
}
/**
 * Render CMS 404 Not found page
 *
 * @param string $coreRoute
 */
public function noRouteAction($coreRoute = null)
{
    $this->getResponse()->setHeader('HTTP/1.1, 301 Moved Permanently');
    $this->getResponse()->setHeader('Location','http://www.streetcred.dk');
}
/**
 * Default no route page action
 * Used if no route page don't configure or available
 *
 */
public function defaultNoRouteAction()
{
    $this->getResponse()->setHeader('HTTP/1.1, 301 Moved Permanently');
    $this->getResponse()->setHeader('Location','http://www.streetcred.dk');
}** 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T17:36:30.157

根据上面提到的[文章](http://alanstorm.com/magentos_many_404_pages)，CMS 无路由页面（或 defaultNoRoute 操作）都使用以下代码从控制器操作设置其 404 标头

```
$this->getResponse()->setHeader('HTTP/1.1','404 Not Found'); 
```

如果你看一下方法定义`setHeader`

```
#File: lib/Zend/Controller/Response/Abstract.php
public function setHeader($name, $value, $replace = false)
{
    $this->canSendHeaders(true);
    $name  = $this->_normalizeHeader($name);
    $value = (string) $value;

    if ($replace) {
        foreach ($this->_headers as $key => $header) {
            if ($name == $header['name']) {
                unset($this->_headers[$key]);
            }
        }
    }

    $this->_headers[] = array(
        'name'    => $name,
        'value'   => $value,
        'replace' => $replace
    );

    return $this;
} 
```

您可以看到有第三个参数名为`$replace`，您可以使用它再次设置标题值，所以像这样

```
Mage::app()->getResponse()->setHeader('HTTP/1.1','...header text...',true); 
```

应该足以更改标头的值。只需在前端控制器告诉响应对象发送其输出之前调用它。您可能可以从 phtml 模板执行此操作（因为在发送之前呈现输出），但更好的方法是使用两个 CMS 无路由操作的事件侦听器（如果您为无路由设置了自定义操作，相应调整）

```
controller_action_postdispatch_cms_index_noRoute
controller_action_postdispatch_cms_index_defaultNoRoute 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T13:54:08.833

Magento 中有许多 404 页，Alan Storm 的这篇文章应该可以帮助您找到所需的内容：

[http://alanstorm.com/magentos_many_404_pages](http://alanstorm.com/magentos_many_404_pages)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T18:07:27.973

我最终通过 3 个步骤完成了此操作：

首先，我创建了一个新的 cms 页面（404/登陆）并从我的 404 页面复制了所有 cms 设置。这是我将用户重定向到的页面。

然后我创建了一个新模块（您可以使用 Alan Storm 的这篇很棒的指南[http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-3-magento-controller-dispatch](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-3-magento-controller-dispatch)）并使用以下动作：

```
public function indexAction() {
    $url = Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB)."404/landing"; //build url
    $this->getResponse()->setRedirect($url, $code = 301); //set a redirect using Zend response object
} 
```

一旦我的模块和登录页面正常工作，我简单地将默认无路由 URL（系统 -> 配置 -> Web -> 默认页面）更改为我的新模块。

# ruby - OS X Lion 上的 RubyGems 问题

> ID：10817451
> 
> 赞同：1
> 
> 时间：2012-05-30T13:36:57.883
> 
> 标签：ruby, rubygems, osx-lion

我创建了一个新的 RoR 应用程序，但是每当我运行`bundle install`（它与其他 gem 一起安装 RSpec）时，我都会收到以下错误：

> Gem::Package::FormatError: no metadata found in /Users/petarpetrovic/.rvm/gems/ruby-1.9.3-p194/cache/selenium-webdriver-2.22.0.gem 安装 selenium-webdriver ( 2.22.0)，并且 Bundler 无法继续。`gem install selenium-webdriver -v '2.22.0'`在捆绑之前确保成功。

当我运行时`gem install selenium-webdriver -v '2.22.0'`，我收到以下错误消息：

> 错误：安装 selenium-webdriver 时出错：/Users/petarpetrovic/.rvm/gems/ruby-1.9.3-p194/cache/selenium-webdriver-2.22.0.gem 的 gem 格式无效

我尝试从缓存文件夹中手动删除 gem，然后重新运行`bundle install`，但仍然收到相同的错误消息。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T13:49:43.083

更新宝石

```
gem update --system
gem update 
```

在您的 rails 应用程序中检查 Gemfile。应内容：`gem "selenium-webdriver", "~> 2.22.0"`

再跑`bundle install`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T04:07:40.970

我不太了解上述解决方案，尽管它可能对某人有用。我遇到了同样的错误，但使用了不同的宝石。我遇到了 nokogiri 问题并收到以下错误消息：

```
Gem::Package::FormatError: no metadata found in /home/myname/.rvm/gems/ruby-1.9.3-p194/cache/nokogiri-1.5.5.gem 
```

我去了`/home/myname/.rvm/gems/ruby-1.9.3-p194/cache/`并删除了该文件`nokogiri-1.5.5.gem`，并且能够再次运行捆绑软件。我认为 .gem 文件有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-19T14:20:45.163

删除 gem 的缓存副本，然后再次尝试安装

```
rm -rf /Users/petarpetrovic/.rvm/gems/ruby-1.9.3-p194/cache/selenium-webdriver-2.22.0.gem
gem install selenium-webdriver -v '2.22.0' 
```

# c# - COMAddIns 如何在 Office Word 2003 中以编程方式打开/关闭它们

> ID：10817452
> 
> 赞同：1
> 
> 时间：2012-05-30T13:37:09.390
> 
> 标签：c#, ms-word, office-2003, word-2003, comaddin

我需要能够关闭 Office Word 2003 中的 COM 加载项，但仍将其保留在 COMAddIn 列表中（只是未启用）。

我找到了 COMAddIn.Connect 标志，我将其设置为 false 以尝试关闭，但它似乎已将其从 Office Word 中完全删除，我必须重新安装程序才能再次将其取回（似乎关闭了注册表项）。

所以我的问题是如何关闭 Office Word 2003 COMAddIn 而不将其从 Word 本身中完全删除？

另请注意，我正在使用 c#

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:20:35.510

我想通了，您想遍历 CommandBar 属性中的列表，并将要关闭的加载项的可见性设置为 false。您将 visible 设置为 true 以打开它们。

# mysql - sql LIKE 子句在哪里出错？

> ID：10817453
> 
> 赞同：1
> 
> 时间：2012-05-30T13:37:10.630
> 
> 标签：mysql, sql, sql-like

我尝试使用此选择计算另一个表中的所有项目：

```
SELECT id, name,  (SELECT count(*) 
                   FROM prekes_main 
                   WHERE prekes_main.pristKaina = 1 
                   and   prekes_main.pg_kodas LIKE 'grupes_main.pg_kodas%') as pristKaina
FROM grupes_main 
WHERE grupes_main.level = 1 
and grupes_main.name <> '' 
```

在 LIKE 子句中我想自动获取选定的 grupes_main 列 pg_kodas，但在这个查询中它总是返回 0，LIKE 函数的错误在哪里？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T13:39:55.447

```
SELECT  id, name,
        (
        SELECT  COUNT(*)
        FROM    prekes_main
        WHERE   prekes_main.pristKaina = 1
                AND prekes_main.pg_kodas LIKE CONCAT(grupes_main.pg_kodas, '%')
        ) pristKaina
FROM    grupes_main
WHERE   grupes_main.level = 1
        AND grupes_main.name <> '' 
```

# sharepoint - 在运行时将自定义功能区组添加到现有 OOB Sharepoint 功能区选项卡

> ID：10817454
> 
> 赞同：0
> 
> 时间：2012-05-30T13:37:12.423
> 
> 标签：sharepoint, ribbon

如何在运行时将自定义功能区组添加到现有 OOB Sharepoint 功能区选项卡？

我有一个自定义 Web 部件，我想在运行时将自定义组添加到 Ribbon.Documents 上下文选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T15:28:27.870

You can use Javascript to create buttons. Here is the helpful link

[http://www.ro.umt.com/blog/2013/11/14/creating-sharepoint-ribbon-elements-in-javascript/](http://www.ro.umt.com/blog/2013/11/14/creating-sharepoint-ribbon-elements-in-javascript/)

if you look at the createTab() function you see you can create new group using this function CUI.Group .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:56:04.127

您需要使用自定义操作来提供选项卡定义，然后在您的服务器代码中使用 SPRibbon.MakeContextualGroupInitiallyVisible 和 SPRibbon.MakeTabAvailable 来显示您的选项卡。你也可以使用 Visual Studio 的 CKS.Dev 扩展，它包含模板，这些模板有一些标记和代码来帮助你开始。

# c# - 如何在不使用邮件凭据的情况下发送邮件

> ID：10817457
> 
> 赞同：0
> 
> 时间：2012-05-30T13:37:29.813
> 
> 标签：c#, asp.net, sendmail

如何在不使用邮件凭据（如使用本地主机的电子邮件 ID 和密码）的情况下发送邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T12:56:23.120

为此使用此代码，

```
 protected void btnSubmit_Click(object sender, EventArgs e)
    {
    try
    {
    MailAddress SendFrom = new MailAddress(txtFrom.Text);
    MailAddress SendTo = new MailAddress(txtTo.Text);

    MailMessage MyMessage = new MailMessage(SendFrom, SendTo);

    MyMessage.Subject = txtSubject.Text;
    MyMessage.Body = txtBody.Text;

    Attachment attachFile = new Attachment(txtAttachmentPath.Text);
    MyMessage.Attachments.Add(attachFile);

    SmtpClient emailClient = new SmtpClient(txtSMTPServer.Text);
    emailClient.Send(MyMessage);

    litStatus.Text = "Message Sent";
    }
    catch (Exception ex)
    {
    litStatus.Text=ex.ToString();
    }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:39:01.013

只需在您的 c:/ 驱动器上创建一个名为“maildrop”的文件夹，然后在您的 Web.config 文件中使用以下内容：

```
<mailSettings>
    <smtp deliveryMethod='SpecifiedPickupDirectory'>
        <specifiedPickupDirectory pickupDirectoryLocation="c:\maildrop" />
    </smtp>
</mailSettings> 
```

更多信息：

[http://weblogs.asp.net/gunnarpeipman/archive/2010/05/27/asp-net-using-pickup-directory-for-outgoing-e-mails.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2010/05/27/asp-net-using-pickup-directory-for-outgoing-e-mails.aspx)

对于没有凭据的外部交付：

```
<mailSettings>
    <smtp from="info@mysite.com">
        <network host="smtp.myhost.com"/>
    </smtp>
</mailsettings> 
```

# android - ListView 中 TextView 上的 URLSpan

> ID：10817459
> 
> 赞同：3
> 
> 时间：2012-05-30T13:37:51.080
> 
> 标签：android, listview, textview

我开发了一个 Thread BBS 应用程序。我将 ListView 用于线程。ListView 有一些 TextView，而 TextView 有一些 Clickable URLSpan。

* * *

textview1 我的名字

textview2 消息消息消息。正文[http://google.co.jp/](http://google.co.jp/) 正文消息消息消息。

* * *

我想在下面采取行动，但我不能。

当我点击除 urlspan(link) 之外的行时，发生了 onListItemClick 事件。当我点击 urlspan 时，没有发生 onListItemClick 事件，并且发生了 URLSpan 的 OnClick 事件。

我在 ArrayAdapter 为 ListView 编写以下代码。

```
Spanned html = Html.fromHtml(body, new EmojiGetter(mContext), null);
SpannableString spannable = new SpannableString(html);
Pattern p = Pattern.compile("(http://google.co.jp/)");
Matcher m = p.matcher(spannable);
while(m.find()){
    MyUrlSpan myUrlSpan = new MyUrlSpan("http://google.co.jp/", m.group(1));
    spannable.setSpan(myUrlSpan, m.start(1), m.end(1), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
}
holder.body.setText(spannable, TextView.BufferType.SPANNABLE);
holder.body.setMovementMethod(LinkMovementMethod.getInstance());
holder.body.setFocusable(false);
holder.body.setFocusableInTouchMode(false); 
```

但是当我点击 textview2 时，没有发生 onListItemClick 事件。

我怎样才能意识到这个动作？

# appharbor - 将预构建的包部署到 Appharbor

> ID：10817467
> 
> 赞同：1
> 
> 时间：2012-05-30T13:38:12.813
> 
> 标签：appharbor

我在 Appharbor 的网站上找不到任何关于部署预构建的 asp.net (mvc) 应用程序的信息。有谁知道这是否可行？

我的另一个问题是 appharbor 的构建过程是否支持启动可执行文件（在本例中为 node.exe）的项目，该可执行文件作为自定义构建步骤的一部分包含在解决方案文件夹中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:38:04.667

如果您担心预编译，那是[AppHarbor 开箱即用的功能](http://blog.appharbor.com/2012/05/07/build-improvements)。如果您推送没有解决方案文件的存储库，我们将不会构建它，而只是[部署内容](http://support.appharbor.com/kb/getting-started/build-process-and-solution-file-convention)（参见没有解决方案文件的部分）。

您还应该能够在构建过程中运行 node.exe，只要所有依赖项（包括`node.exe`）都在存储库中。

# coldfusion - 无法删除 Solr 密钥

> ID：10817468
> 
> 赞同：2
> 
> 时间：2012-05-30T13:38:15.537
> 
> 标签：coldfusion, solr

从文件的 Solr 集合中删除键时遇到问题。

用这个更新 Solr 集合：

```
<cfoutput query="fileQuery">
  <cfset theFile = defaultpath & "#fileID#.pdf" />

  <cfif fileExists(theFile)>
    <cfindex
      action="update"
      collection="file_vault_solr"
      type="file"
      key="#theFile#"
      title="#documentName#"
      body="fileNumber,documentName"
      custom1="/filevault/#filealias#"
      custom2="#fileNumber#"
      custom3="#documentName#"
    >
  </cfif>
</cfoutput> 
```

但是，当尝试从目录中删除密钥时，它根本不起作用。这是用于（尝试）删除键的代码：

```
<cfoutput query="deletedFile">
  <cfset theFile = defaultpath & "#fileID#.pdf" />

  <!--- Remove the deleted file from the collection. --->
  <cfindex
    collection="file_vault_solr"
    type="file"
    action="Delete"
    key="#theFile#"
  >
</cfoutput> 
```

但是，密钥不会被删除。唯一有效的是清除整个目录并重新索引所有文档。

有什么见解吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-03T19:16:04.093

经过大量调试，我发现。

这种行为的原因是一个非常……呃……不幸的呃……“设计决策”Adobe 在实现 ColdFusion 和 Solr 之间的接口时做出的。

因此，您有一个 Solr 索引文件集合，并希望有选择地清除磁盘上不再存在的文件。我很确定这就是你所处的确切情况。

让我们假设：

*   `/path/to/file`您的系统上调用了一个文件，并且
*   它在 Solr 集合中被索引`foo`。

当您发出 a`<cfindex collection="foo" action="delete" key="/path/to/file">`时，ColdFusion 会向 Solr 发送以下 HTTP 请求：

```
POST /solr/foo/update?wt=xml&version=2.2 (application/xml; charset=UTF-8)
<delete><id>1247603285</id></delete> 
```

这是一个完全合理的要求，Solr 很乐意满足。唯一奇怪的是里面的数字`<id>`。在任何情况下，此操作后文件都会从索引中消失。

重新索引文件并将其从磁盘中删除。现在：

*   您的系统上不再有一个文件被调用`/path/to/file`，但是
*   它*仍然*在 Solr 集合中被索引`foo`。

让我们再次执行相同的`<cfindex action="delete">`操作。

```
POST /solr/foo/update?wt=xml&version=2.2 (application/xml; charset=UTF-8)
<delete><id>/path/to/file</id></delete> 
```

嗯？身份证上不应该有数字吗？

事实证明，Adobe 的某个人认为使用数字作为索引文件的唯一 ID 是一个非常聪明的想法，我认为这样可以*节省空间*。

**然而**，由于某些莫名其妙的原因，这只发生在有问题的文件仍然存在时。如果它不再存在，ColdFusion 会注意到并传递路径。

检查数字表明它适合 32 位有符号整数值。`uid`（我已经检查过了，集合的字段中有很多负值。）

所以这看起来好像他们使用某种散列算法返回 32 位并将其放入 int 中。CRC32 浮现在脑海中，但事实并非如此。此外，`java.util.zip.CRC32`返回 a `long`，因此首先不会有任何负值。

Java 中另一个现成的 32 位散列是 ... [`java.lang.Object.hashCode()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)。

答对了。

```
"/path/to/file".hashCode() // -> 1247603285 
```

所以解决方案是永远不要按路径删除文件，但总是这样：

```
<cfindex collection="foo" action="delete" key="#path.hashCode()#"> 
```

对于不再存在的文件，这是正确的。

更重要的是：对于仍然存在的文件，这也是正确的 - ColdFusion 无论如何都会发送哈希码。

在 Adob​​e 修复此问题之前，这是一个安全且简单的解决方法。

请注意，文件路径区分大小写，并且必须与存储在索引中的路径完全匹配。

一个快速

```
<cfsearch collection="foo" name="foo"> 
```

没有任何`criteria`将返回所有索引条目，因此检索孤立条目的确切路径不是一个大问题。

* * *

[Eric Lippert 解释了对象哈希码以及为什么在应用程序中将它们用于任何“实用”的东西是一个坏主意。](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)这是一篇 .NET 文章，但也适用于 Java。

归结为：Adobe 应该将实际*路径*存储在 Solr 集合中，并将他们似乎试图进行的性能优化留给 Solr。

* * *

我已经针对 Adob​​e 的 ColdFusion 错误数据库提交了[错误 3589991 。](https://bugbase.adobe.com/index.cfm?event=bug&id=3589991)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:08:26.597

键必须与 Solr 索引中的内容完全匹配。因此，请确保两者中的“defaultpath”相同，并检查大小写是否匹配，因为我认为 Solr 区分大小写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T17:13:05.670

要对此进行调试，我建议您将 status="myStatusVar" 添加到 cfindex call 。然后在添加和删除上查看发生了什么。如果删除未返回已删除计数。然后是密钥不匹配。

```
<cfindex
collection="file_vault_solr"
type="file"
action="Delete"
key="#theFile#"
status="myStatusVar"
> 
```

# javascript - 当我附加一个新的 div 时没有触发警报

> ID：10817472
> 
> 赞同：0
> 
> 时间：2012-05-30T13:38:29.040
> 
> 标签：javascript, jquery

在这个小提琴[http://jsfiddle.net/adrianjsfiddlenetuser/zyUkd/46/](http://jsfiddle.net/adrianjsfiddlenetuser/zyUkd/46/)上，div 'Hello 01' & 'Hello 02' 在点击时会发出警报。当我单击“添加新”时，会添加一个新的 div，但是当我单击此 div 时，即使它使用相同的 css 样式，也不会触发警报。

如何修改它以便在添加新 div 时触发警报？

来自 jsFiddle 的代码供后代使用

JS

```
$(function() {
    $(".myDivs").click(function() {
         alert('Clicked');
    });

    $("#button").click(get);   
    function get() {
        $(".connected").append("<div class=\"myDivs\">hello</div>");
    }
}); 
```

HTML

```
<div class="connected">
    <div class="myDivs">Hello 01</div>
    <div class="myDivs">Hello 02</div>
</div>
<input name="Button3" type="button" value="Add New" id="button"> 
```

​ ​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:39:31.653

您需要委托事件处理程序，因为您在绑定事件上的方式仅将事件绑定到现有 DOM `.myDivs`，但不适用于即将到来的。

```
$(".connected").on('click', '.myDivs', function() {
    alert('Clicked');
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/zyUkd/47/)**

有关更多详细信息，请访问**[此处](http://api.jquery.com/on/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:40:56.520

那是因为您的 jQuery 正在使用`document.ready`进行分配。因为这个元素在加载时不存在，所以它没有这个分配。您需要单独进行此分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:48:22.540

代码悖论给出的答案是有效的。但我继续更新您的小提琴以完全匹配最新的 jQuery 约定。

[演示](http://jsfiddle.net/GWg8w/1/)

这是 jQuery 文档的链接以获取更多信息： [jQuery .on()](http://api.jquery.com/on/)

# java - 如何检查服务是否已经在android中运行？

> ID：10817474
> 
> 赞同：6
> 
> 时间：2012-05-30T13:38:32.253
> 
> 标签：java, android, service, android-service

在我的项目中，单击按钮时我正在启动一项服务。但是我不想在单击该按钮时再次启动该服务，除非前一个按钮已经停止。所以我需要先检查服务是否正在运行。我使用了以下方法

```
private boolean isMyServiceRunning() {
    ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
        if ("com.example.MyService".equals(service.service.getClassName())) {
            return true;
        }
    }
    return false;
} 
```

但它对我不起作用，它没有给出任何异常，但总是返回 false。我现在该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:52:05.170

我认为您的服务未在运行服务中列出的原因是您启动服务的方式。以下建议与您使用方法的[线程相同。](https://stackoverflow.com/questions/600207/android-check-if-a-service-is-running)

```
You MUST call startService for your service to be properly registered and
passing BIND_AUTO_CREATE will not suffice. 
```

如下所示：

```
Intent bindIntent = new Intent(this,ServiceTask.class);
startService(bindIntent);
bindService(bindIntent,mConnection,0); 
```

试试这个，看看它是否也适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T10:29:16.197

您的方法返回 false ，因为在停止后，如果没有任何客户端绑定到服务，进程将被系统销毁。

# google-analytics - 您如何在 Google Analytics 中进行同期群分析？

> ID：10817478
> 
> 赞同：3
> 
> 时间：2012-05-30T13:38:41.667
> 
> 标签：google-analytics, analytics, mixpanel, kissmetrics

Mixpanel、KISSmetrics 等工具支持开箱即用的同期群分析，但我听说您也可以在 Google Analytics 中稍加努力即可做到这一点。如果您想跟踪访问者的每日和每周留存率，您将如何设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:48:38.513

Google Analytics 可以做很多事情，但留存分析是它的弱点之一。由于它倾向于关注访问（而不是访问者），因此您需要使用 Google Analytic 的自定义变量配置跟踪自己的 cookie。话虽如此，让一个简单的解决方案快速运行并不难。

1.  首先，根据您的要求决定如何在 Google Analytic 的自定义变量中布局数据。例如，您是否存储每天、每周或每月跟踪的保留日期？您还想跟踪同类群组目标吗？将此数据分区到可用的自定义变量槽中。
2.  当访问者到达或使用 Google Analytic 的 _setCustomVar 函数实现目标时，将同类群组数据写入这些自定义变量。将该函数的第四个参数设置为 1 表示您想要进行访问者级别 (cookie) 跟踪。
3.  对于您要分析的每个同类群组，请在 Google Analytics（分析）中创建一个高级细分。在条件中使用正则表达式将使您能够灵活地分割有趣的群组。例如：“所有在圣诞节前一周首次访问的用户”。
4.  通过指定日期范围和相应的同类群组切片高级细分，使用报告分析结果。另一种选择是使用 Google Analytics Data Feed Query Explorer 或其 API 提取数据。

一旦你投入工作，你的新访客将被他们的第一次访问日期标记，并且很好地落入每个每日或每周的保留桶中。如果您需要更多详细信息，请参阅我的博客： [How to do Cohort Analysis in Google Analytics](http://jonathonbalogh.com/2012/04/01/how-to-do-cohort-analysis-in-google-analytics/ "如何在 Google Analytics 中进行队列分析")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:59:50.497

这真的让我很感兴趣，所以我做了一些研究，基本上你必须在页面中自定义 GA javascript 才能将自定义变量上传到谷歌。

完成后，您需要转到“Google Analytics 中的高级细分”并选择您的自定义变量。以下是有关如何完成此操作的详细说明：

[使用 Google Analytics 破解队列分析](http://danhilltech.tumblr.com/post/12509218078/startups-hacking-a-cohort-analysis-with-google)

# javascript - jquery添加十进制数字

> ID：10817479
> 
> 赞同：2
> 
> 时间：2012-05-30T13:38:42.190
> 
> 标签：javascript, jquery

我正在尝试将十进制数字相加，但是当我提醒变量时`finalnumber`我得到零。变量`number`是十进制数。我该如何解决这个问题，以便变量`finalnumber`是所有的总和`number`？

```
var finalnumber = 0;

$('#chosen-keyword-container').find('.keyword-row').each(function() {
    var number = $(this).find('td:last').find('input[name=bid-price[]]').val();

    var finalnumber = parseInt(number) + parseInt(finalnumber);

});​ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T13:41:43.433

改变这个：

```
var finalnumber = parseInt(number)+parseInt(finalnumber); 
```

对此：

```
finalnumber = finalnumber + parseFloat(number); 
```

或者：

```
finalnumber += parseFloat(number); 
```

*   `parseInt` **不能保存十进制值**。改为使用`parseFloat`。
*   不要声明`finalnumber`with `var`，因为它隐藏`finalnumber`在外部范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:41:10.980

只需将`var`关键字放在函数中`finalnumber`. 这样，`var`您可以在该名称和范围下定义一个新变量。所以基本上你有两个版本，`finalnumber`只需添加到本地版本（函数内部的版本而不是全局版本）。

另一方面，您应该在使用十进制数字时更改`parseInt`为`parseFloat`（参见@gdoron 的答案）。

```
$('#chosen-keyword-container').find('.keyword-row').each(function() {
  var number = $(this).find('td:last').find('input[name=bid-price[]]').val();

  finalnumber = parseFloat(number) + finalnumber;  
}); 
```

在旁注中：您可以`parseInt()`将`finalnumber`. 这个变量总是一个数值，所以不需要转换它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:42:22.810

更改添加行如下

```
finalnumber = finalnumber + parseFloat(number); 
```

# objective-c - NSString 为空且长度 = 1？

> ID：10817480
> 
> 赞同：1
> 
> 时间：2012-05-30T13:38:42.277
> 
> 标签：objective-c, nsstring, string, string-length

我遇到了一个非常奇怪的行为：

```
NSLog(@"substring: '%@'\t- length: %d",substring,substring.length); 
```

返回

```
substring: '‍'  - length: 1 
```

substring 变量是一个 NSString 对象。

有人可以解释发生了什么...

**编辑::解决**

正如艾米回答的那样：

> 它正在打印一个不可见的字符。：‍</p>
> 
> 零宽度连接器 Unicode：U+200D，UTF-8：E2 80 8D

```
if ([substring isEqualToString:@"\u200d"]) {
    NSLog(@"It is a ZERO WIDTH JOINER...");
} 
```

并感谢菲利普的小费。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:42:36.117

看不见的空间呢？您应该检查 U+200B 符号的子字符串，或查看此处[http://www.cs.tut.fi/~jkorpela/chars/spaces.html](http://www.cs.tut.fi/~jkorpela/chars/spaces.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:42:48.420

可能是某种空白。如果要忽略空格，可以尝试：

```
string = [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:43:02.350

它正在打印一个不可见的字符。：

‍ 零宽度连接器 Unicode：U+200D，UTF-8：E2 80 8D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T22:58:26.863

我不得不使用以下内容进行修剪以消除一些额外的隐形。

```
[[NSCharacterSet alphanumericCharacterSet] invertedSet] 
```

# android - 在 Xamarin Android 中处理 ItemClick 或 Click

> ID：10817481
> 
> 赞同：1
> 
> 时间：2012-05-30T13:38:45.457
> 
> 标签：android, events, click, xamarin.android, xamarin

我正在尝试在 Xamarin Android Mono 项目中为 ItemClick 或 Click 创建一个处理程序。

我的代码：

```
_widgets.DepartureSpinner.ItemClick += delegate (object sender, AdapterView.ItemClickEventArgs args) {
        // When clicked, show a toast with the TextView text
        Toast.MakeText (Application, ((TextView)args.View).Text, ToastLength.Short).Show ();
    } 
```

导致

```
java.lang.RuntimeException: setOnItemClickListener cannot be used with a spinner. 
```

和 Click 差不多。我不想使用自定义按钮，因为它不会随着主题的变化而改变。有关于如何在 java 中执行此操作的主题，但我无法在 Xamarin 中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:40:13.003

使用`setOnItemSelectedListener`而不是`setOnItemClickListener`用于微调器。

# audio - A-Law 和 mu-law 的 WAV 文件头

> ID：10817483
> 
> 赞同：-4
> 
> 时间：2012-05-30T13:38:49.923
> 
> 标签：audio, header, wave, wav

有人能告诉我 A-Law 和 Mu-Law 的 WAV 文件头信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:45:55.853

简而言之，[WAVE 格式](http://en.wikipedia.org/wiki/WAV)是多媒体文件的[RIFF](http://en.wikipedia.org/wiki/Resource_Interchange_File_Format)规范，它使用“块”来存储数据。与[类型-长度-值表示](http://en.wikipedia.org/wiki/Type-length-value)类似，每个块在其余数据之前包含有关其自身类型和长度（字段`SubChunkID`和`SubChunkSize`）的信息。有关音频压缩的信息存储在“fmt”块中。

阅读[此](https://web.archive.org/web/20130510081513/https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)内容和[此](http://unusedino.de/ec64/technical/formats/wav.html)内容以获取更多信息。

# extjs - 如何在 TabPanel 中显示 Ext.List 数据？

> ID：10817492
> 
> 赞同：2
> 
> 时间：2012-05-30T13:39:10.317
> 
> 标签：extjs, sencha-touch-2

我是 Sencha Touch 2 的新手。我正在尝试使用 Tab Panel 开发一个简单的屏幕。在面板中，将有三个选项卡——艺术家、专辑和播放列表。因此，当我单击艺术家时，它应该向我显示艺术家姓名列表。这个艺术家的名字我保存在一个商店文件中。我为视图、存储和模型编写了代码。但是是否也需要为容器编写代码代码？因为我得到一个包含 3 行的空列表。这是我的应用程序的 senchafiddle 链接：[Sencha fiddle 链接](http://www.senchafiddle.com/#AOZGY)

请帮我。因为我是 Sencha Touch 2 的新手。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:45:47.537

请注意，Javascript 区分大小写。

您似乎想将您的字段命名为**firstName**。因此，请查看您的模型定义并将其更改为：

```
Ext.define('MyApp.model.modelname', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            {
                name: 'firstName' //it's 'firstname' before
            }
        ]
    }
}); 
```

# visual-studio-2012 - VS11 的 vcredist_x86.exe

> ID：10817496
> 
> 赞同：1
> 
> 时间：2012-05-30T13:39:26.067
> 
> 标签：visual-studio-2012

我们刚刚将我们的代码从 MSVS9 迁移到了 MSVS11。

我想在 vcredist_x86.exe 的帮助下手动安装 C++ 运行时，但找不到 VisualStudio 11 的文件。关于在哪里可以找到 VS11 的 vcredist_x86.exe 的任何指针？

我能够在安装了 VS11 Beta Ultimate 的系统上正确编译代码。我在编译代码时确实包含了新的 MSCRT.lib。

当我尝试在不同的系统上运行代码时，我收到一个错误 - “Missing MSVCR110.dll”。我可以将这个文件破解到我的应用程序的二进制文件中，然后它会询问“MSVCP110.dll”。我通过阅读一些博客了解到破解此文件不适用于 Windows7 以下的系统。

# batch-file - 相同的命令，不同的结果（命令行或批处理）

> ID：10817501
> 
> 赞同：0
> 
> 时间：2012-05-30T13:39:39.163
> 
> 标签：batch-file, escaping, registry, environment-variables, command-prompt

我一直在尝试创建一个非常简单的*几乎*可以工作的 Windows 脚本（“几乎”解释了我在这里的存在......）。我想链接几个命令。其中之一是用于添加注册表项。我已经找到了如何使用以下命令来解决这个问题：

```
REG ADD "HKCU\Software\Microsoft\Office\12.0\Common\DRM" /v "AdminTemplatePath" /t REG_EXPAND_SZ /d ^%LocalAppData^%\Microsoft\DRM\Templates /f 
```

我想添加一个名为“ **AdminTemplatePath** ”的键，其值为“ **%LocalAppData%\Microsoft\DRM\Templates** ”。

问题是关于环境变量**%LocalAppData%**。当我执行 时`REG ADD /?`，它说我必须在每个“ **% ”之前加上“** **^** ”才能使命令行工作（没有“ **^** ”，变量将被解释并被其绝对值替换）。

 ****当我在提示符中键入完整命令时，一切正常。我在值字段“ **%LocalAppData%\Microsoft\DRM\Templates** ”。当我将此命令复制/粘贴到我的批处理文件中时，运行时没有问题。系统告诉我一切都很好。但实际上，该值是“ **^\Microsoft\DRM\Templates** ”或“ **\Microsoft\DRM\Templates** ”。

当我删除完整命令中的“ **^** ”并重试时，值为“ **C:\Users\My User\AppData\Local\Microsoft\DRM\Templates** ”。

有谁知道保持环境变量不变的诀窍，运行批处理文件？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:48:01.787

^ 应该是批处理脚本中的转义字符，但我也一直遇到麻烦。

相反，请尝试使用双引号括起来的双倍百分比：

```
^%LocalAppData^%\Microsoft\DRM\Templates 
```

应该

```
"%%LocalAppData%%\Microsoft\DRM\Templates" 
```

查看[http://www.robvanderwoude.com/escapechars.php](http://www.robvanderwoude.com/escapechars.php)以获取有关批处理脚本中转义字符的更多信息****

# php - 缓慢的 CakePHP 表单输入

> ID：10817502
> 
> 赞同：0
> 
> 时间：2012-05-30T13:39:41.610
> 
> 标签：php, forms, cakephp, optimization

我正在使用 CakePHP 创建一些相当复杂的表单（大量输入，主要是复选框）。问题是它很慢：大约 1 毫秒 / 输入，因此 1000 个输入大约需要 1 秒。

我正在使用 CakePHP 函数`$this->Form->input(...);`

有没有办法更快地创建这些输入？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:58:12.157

CakePHP 中的 HTML 助手并不快。如果您想要速度，请使用清晰的 html。

另外，您可以尝试禁用调试并启用缓存，但这不是很有效。

# performance - 使用 loadrunner 11.0 监控 websphere

> ID：10817503
> 
> 赞同：0
> 
> 时间：2012-05-30T13:39:45.410
> 
> 标签：performance, websphere, monitor, loadrunner

我想使用 loadrunner 监视带有 JDK 1.5 的 websphere 6.1。由于 loadrunner V8 只支持 JDK1.4，所以我必须设置 loadrunner V11。但是在完成安装并打开控制器后，可用图形中没有 websphere 监视器，只能选择 MS asp 和 Weblogic 监视器。对于 Websphere，只有 MQ 用于监视器。

问题是，loadrunner V11.0是否支持websphere应用服务器监控？如果可以，如何配置。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:07:56.890

我使用 LoadRunner 8.1 来监控 websphere6.1，它现在可以工作了。

# sql-server - SQL Server 存储过程缓存

> ID：10817509
> 
> 赞同：1
> 
> 时间：2012-05-30T13:40:01.657
> 
> 标签：sql-server, stored-procedures, user-defined-functions, openquery

我正在尝试通过两种不同的方法执行相同的选择。

首先通过使用存储过程的**表值函数**

```
SELECT * FROM dbo.DF_PRODUCTS(); 
```

二`openquery`是通过执行存储过程

```
SELECT * 
FROM openquery([servername], 
               'SET FMTONLY OFF exec DatabaseName.dbo.My_StoredProcedure') 
```

问题是我得到了各种结果，我认为问题出在存储过程缓存中。谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T20:50:20.200

If you're getting different results from running the exact same code, and the 'only' (perceived) difference is that you are running one through an OPENQUERY command, do a sanity check and confirm that the OPENQUERY([servername]...) is definitely running against the same server as your first query.

The likeliest scenario is that your linked server is different to the one you're running against locally - e.g. you're running against a local database versus a development/test/staging/live database.

# ssh - 带有日期的动态文件名的 SSH 数据库备份

> ID：10817518
> 
> 赞同：0
> 
> 时间：2012-05-30T13:40:32.853
> 
> 标签：ssh, cron

您好我正在尝试使用 SSH/cron 备份数据库，一切正常，除了我想在命令行中使用当前日期戳，因此我的备份文件每次都有不同的名称。

有谁知道在字面上理解文本时如何包含日期？

```
myDATE=date +%Y-%m-%d; 

mysqldump mydbname | gzip > /home/mywebsite/vps_backups/my_db_back_${myDATE}.sql.gz; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:54:07.670

在`crontab`中，`%`字符必须使用反斜杠。

```
* * * * * command &> log_$(date +\%Y\%m\%d\%H_\%M) 
```

见[http://mywiki.wooledge.org/BashFAQ/043](http://mywiki.wooledge.org/BashFAQ/043)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:48:31.087

您需要使用以下语法：

```
myDATE=$(date +\%Y-\%m-\%d) 
```

# c# - FormsAuthentication.SetAuthCookie 未在 WebResponse Cookie 集合中设置 cookie

> ID：10817527
> 
> 赞同：0
> 
> 时间：2012-05-30T13:41:13.343
> 
> 标签：c#, formsauthentication

我有一个网站，它使用表单身份验证并`FormsAuthentication.SetAuthCookie`在用户被验证时调用，即`FormsAuthentication.SetAuthCookie(userName, false)`.

我目前正在创建 HttpWebRequests 并使用用户名和密码调用网站，尽管凭据通过了验证 - 响应在其 cookie 集合中没有任何 cokkies。

HTTP 请求/响应代码如下：

```
HttpWebRequest request = (HttpWebRequest) CreatePostRequest(baseAddress, postParameters);
HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

代码得到了很好的响应，在调试时我可以看到凭据被验证正常并且 FormsAuthentication.SetAuthCookie(user, false) 被调用。

当我检查响应 cookie 集合时，计数为 0。谁能帮我理解这是为什么。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:45:09.000

您很可能会在`response.Headers["Set-Cookie"]`. 您可以简单地将这些 cookie 存储在`CookieContainer`类的实例中`CookieContainer.SetCookies(baseAddress, response.Headers["Set-Cookie"]`，然后`CookieContainer`在后续请求中使用此实例。希望这可以帮助。

# xcode - XCode：Scheme Post-Action 脚本中的 ${BUILD_PRODUCTS_DIR} 错误地转换为调试目录

> ID：10817528
> 
> 赞同：2
> 
> 时间：2012-05-30T13:41:16.930
> 
> 标签：xcode

我有一个简单的脚本，它在 Post-actions 下的 XCode 方案中运行，如下所示：

```
cp -fr ${BUILT_PRODUCTS_DIR}/MyApp.app /tmp/MyApp.app 
```

奇怪的是，当我通过这个命令行运行命令行构建时：

```
/usr/bin/xcodebuild -workspace MyWorkspace -scheme MyScheme -configuration Release clean build 
```

${BUILT_PRODUCTS_DIR} 变量正在转换为调试目录而不是发布目录，我收到此错误：

```
cp: /Users/me/Library/Developer/Xcode/DerivedData/MyProject-afslklkwadvqqggjrlcuycyeyxfv/Build/Products/Debug/MyApp.app: No such file or directory 
```

更奇怪的是，在环境变量列表中，它指向了正确的发布位置：

```
setenv BUILT_PRODUCTS_DIR /Users/me/Library/Developer/Xcode/DerivedData/MyProject-afslklkwadvqqggjrlcuycyeyxfv/Build/Products/Release 
```

这似乎是一个 XCode 错误，我能想到的唯一解决方法是硬编码“发布”目录，这是一个非常糟糕的主意。

有谁知道发生了什么？

更新：

我找到了一种解决方法，如果我将方案中的运行构建配置更改为“发布”，它会将环境变量修复为指向发布位置。

但是我不知道为什么 BUILT_PRODUCTS_DIR 应该与 Run 配置相关，所以我愿意接受其他方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:58:18.867

我有完全相同的问题。我做了一个完整的清理，删除了**DerivedData**文件夹，然后重新启动了 Xcode - 它消失了......永远不会回来。

* * *

编辑：另一个想法

删除调试方案（或重命名）怎么样 - 那么如果由于某种原因它正在寻找**调试**它将无法找到它。可能无法解决问题，但可以指出原因。

# android - 强制 ExpandableListView 的顶层位于列表顶部

> ID：10817529
> 
> 赞同：0
> 
> 时间：2012-05-30T13:41:25.497
> 
> 标签：android, expandablelistview

我们有一个 ExpandableListView，其中包含大量的父项和子项。

当打开一个“父级”时，我们会自动关闭先前打开的组，以便在任何一个顶部只打开一个组。但是，我们希望该组出现在可见数据的当前顶部。换句话说，“父母”应该是列表中第一个可见的，随后是孩子。

实际发生的是它正确打开它，但它是随机定位的。在大多数情况下，顶部可见行实际上是子项之一，我们必须向后滚动才能到达父项。

是否有某种方法可以强制在视图中显示为顶线的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T08:00:38.813

所以，经过一番挣扎，我们设法找到了解决方案：

```
categoryListView.setOnGroupClickListener(new OnGroupClickListener() {

        @Override
        public boolean onGroupClick(ExpandableListView parent, View v,
                int groupPosition, long id) {

            categoryListView.setSelectionFromTop(groupPosition, 0);
            Boolean shouldExpand = (!categoryListView.isGroupExpanded(groupPosition));
            categoryListView.collapseGroup(lastClickedPosition);
            if (shouldExpand){
                categoryListView.expandGroup(groupPosition);
            }                
            lastClickedPosition = groupPosition;

            return true;
        }
    }); 
```

# python - 在 virtualenvs 中自动定义 PYTHONPATH

> ID：10817530
> 
> 赞同：1
> 
> 时间：2012-05-30T13:41:25.867
> 
> 标签：python, virtualenv

是否可以使用 mkvirtualenv 自动为 virtualenv 配置 PYTHONPATH？我没有在 ~/.bashrc 中定义 PYTHONPATH，而是在每个 virtualenv 中定义。每次我创建一个新的 virtualenv 时，我都必须`$VIRTUAL_ENV/bin/activate`手动输入这些行：

在停用功能中：

```
unset PYTHONPATH 
```

外部停用：

```
PYTHONPATH="$VIRTUAL_ENV/lib/python2.7/site-packages" 
```

我想用 mkvirtualenv 自动放置这些行。我正在使用 virtualenv 1.7.1.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T02:50:32.850

该路径`$VIRTUAL_ENV/lib/python2.7/site-packages`是 virtualenv 中的默认路径。我只从我的系统中删除[了 ipython](http://ipython.org/)并将其安装在 virtualenv 中：

```
workon myvirtualenv
pip install ipython 
```

因此，我使用 ipython 内部检查了路径：

```
import sys
sys.path 
```

# android - 从android eclipse上的webservice检索特定数据

> ID：10817532
> 
> 赞同：-1
> 
> 时间：2012-05-30T13:41:28.363
> 
> 标签：android, eclipse, web-services

谁能告诉我如何从 android eclipse 上的 web 服务中检索特定数据。到目前为止我已经做了这些事情。如果它是错误的，请让我如何修复这个来源。

请在下面找到我的来源。

**[网络方式]**

```
package com.android.backend;

public class FahrenheitToCelsius {

    public double FahrenheitToCelsius(double str){
        return ((str-32)*5)/9;
    }
} 
```

**[屏幕活动.JAVA]**

```
package com.android.button.web;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class Tesing_webserviceActivity extends Activity
{
    /** Called when the activity is first created. */
    private static String NAMESPACE = "http://tempuri.org/";
    private static String METHOD_NAME = "FahrenheitToCelsius";
    private static String SOAP_ACTION = "http://tempuri.org/FahrenheitToCelsius";
    private static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";

      Button btnFar,btnClear;
      EditText txtFar,txtres;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btnFar = (Button)findViewById(R.id.btn_getvalues);

        btnClear = (Button)findViewById(R.id.btnClear);
        txtFar = (EditText)findViewById(R.id.txtFar);
        txtres = (EditText)findViewById(R.id.txtresult);

        btnFar.setOnClickListener(new View.OnClickListener()
        {

           public void onClick(View v)
           {
           //Initialize soap request + add parameters
           SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);       

           //Use this to add parameters
           request.addProperty("str",txtFar.getText().toString());

           //Declare the version of the SOAP request
           SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

           envelope.setOutputSoapObject(request);
           envelope.dotNet = true;

           try {
               HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

               //this is the actual part that will call the webservice
                 androidHttpTransport.call(SOAP_ACTION, envelope);

               // Get the SoapResult from the envelope body.
                 SoapObject result = (SoapObject)envelope.bodyIn;

                 if(result != null)
                 {
                 //Get the first property and change the label text
                   txtres.setText(result.getProperty(0).toString());
                    }
                   else
                   {
                      Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
                    }
                  } catch (Exception e) {
                        e.printStackTrace();
               }
              }
            });

        btnClear.setOnClickListener(new View.OnClickListener()
        {

                  public void onClick(View v)
                  {
                        txtres.setText("");
                        txtFar.setText("");
                  }
            });
     }
 } 
```

非常感谢！！.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:14:43.353

如果您从 Web 服务中检索简单信息，我建议您使用返回 JSON 对象的 REST 服务。在 Android 中，您可以使用 GSON 库轻松解析此 JSON 对象。将 JSON 解析为 Java 对象的示例：

```
objectType = new TypeToken<YourClass>(){}.getType();
//Parse the respons with GSON
Gson gson = new Gson();
return gson.fromJson(webserviceResponse, objectType); 
```

您可以使用简单的 HTTP GET 请求轻松访问 Web 服务。

```
 HttpClient client = new DefaultHttpClient();
        client.getParams().setParameter(CoreProtocolPNames.USER_AGENT,"android");
        HttpGet request = new HttpGet();
        request.setHeader("Content-Type", "text/plain; charset=utf-8");
        request.setHeader("Cache-Control", "no-cache");

        request.setURI(new URI(URL));
        HttpResponse response = client.execute(request);
        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

        StringBuffer sb = new StringBuffer("");
        String line = "";

        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null)
        {
            sb.append(line + NL);
        }
        in.close();
        String webserviceResponse = sb.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:36:34.620

我在我的一个项目中使用此功能（您可能不需要 Authorization 标头）：

```
private static InputStream sendRequest(String requestContent, String serviceUrl, String SoapAction) throws Throwable {

    // initialize HTTP post
    HttpPost httpPost = null;
    try {
    httpPost = new HttpPost(serviceUrl);

    httpPost.addHeader("Authorization", getB64Auth());
    httpPost.addHeader("Content-Type", "text/xml; charset=ISO-8859-1");//ISO-8859-1 ; UTF-8     
    httpPost.addHeader("SOAPAction", SoapAction);
    } catch (Throwable e) {
      Log.e(LOG_TAG, "Error initializing HTTP post for SOAP request", e);
      throw e;
    }

    // load content to be sent
    try {
      HttpEntity postEntity = new StringEntity(requestContent);
      httpPost.setEntity(postEntity);         
    } 
    catch (UnsupportedEncodingException e) {
          Log.e(LOG_TAG, "Unsupported encoding of content for SOAP request", e);
          throw e;
        }

    // send request
    HttpResponse httpResponse = null;
    HttpClient httpClient = new DefaultHttpClient();
    try {
      httpResponse = httpClient.execute(httpPost);
    } catch (Throwable e) {
      Log.e(LOG_TAG, "Error sending SOAP request", e);
      throw e;        
    }

    // get SOAP response
    try {
      // get response code
      int responseStatusCode = httpResponse.getStatusLine().getStatusCode();

      // if the response code is not 200 - OK, or 500 - Internal error,
      // then communication error occurred
      if (responseStatusCode != 200 && responseStatusCode != 500) {
        Log.i(LOG_TAG, "Got SOAP response code " + responseStatusCode + " "
            + httpResponse.getStatusLine().getReasonPhrase());
      }

      // get the response content
      HttpEntity httpEntity = httpResponse.getEntity();
      InputStream is = httpEntity.getContent();
      return is;
    } catch (Throwable e) {
      Log.e(LOG_TAG, "Error getting SOAP response", e);
      throw e;
    }
  } 
```

# jsp - 使用 Translation Servlet 后重定向/分派到源 jsp

> ID：10817534
> 
> 赞同：0
> 
> 时间：2012-05-30T13:41:35.540
> 
> 标签：jsp, servlets, redirect, translation, forward

我正在实现一个功能，以法语或英语自动翻译我的所有 JSP 页面。用户在导航中每时每刻都有两个按钮来更改语言。我使用了一个 servlet 来处理这种语言更改，但我不知道每次调用这个 servlet 时如何自动重定向到正确的 JSP 页面。这可能是微不足道的，但我不知道该怎么做，所以请帮助我......

我创建了一个 JSP 文件，只是为了存储一个标题，该标题将在几乎所有其他 JSP 中使用，以便为用户提供翻译服务：

在 header.jsp 中：

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
 <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
 <%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<div id="settings">
        <p><fmt:message key="connection"/><c:out value=" ${sessionScope.firstname} ${sessionScope.name}"></c:out> <a href="../../disconnect"><fmt:message key = "disconnect"/></a></p>
        <p id="translateText"><fmt:message key="translation"/> :
            <a href="../../language?lang=fr" onclick=""><img src="../css/images/icone_fr.gif" alt="Français"></a>
            <a href="../../language?lang=en" onclick=""><img src="../css/images/icone_en.gif" alt="English"></a>   
        </p>
</div>

</html> 
```

然后我将此 jsp 包含在所有其他使用这些翻译功能的 JSP 文件中（例如：example.jsp）：

示例.jsp：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<!doctype html>
<html>

<!-- To initialize the language of the page -->
<c:set var="language" value="${not empty sessionScope.language ? sessionScope.language : not empty language ? language : pageContext.request.locale}" scope="session" />
<fmt:setLocale value="${language}" />

<c:choose>
    <c:when test="${language=='fr'}"><fmt:setBundle basename="translation/message_fr"/></c:when>
    <c:otherwise><fmt:setBundle basename="translation/message_en"/></c:otherwise>
</c:choose>

<head>
<meta charset="utf-8" />
<title><fmt:message key="platform"/>!</title>
<link rel="stylesheet" href="../css/styles.css" type="text/css" media="screen" />
<link rel="stylesheet" type="../text/css" href="css/print.css" media="print" />
<!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js">     </script><![endif]-->
</head>
<body>
 <div id="wrapper"><!-- #wrapper -->

<%@ include file = "header.jsp" %>

<section id="main"><!-- #main content and sidebar area -->

        <section id="content"><!-- #content -->
            <h1><fmt:message key="newProject"/></h1>

                    <article>
                <p>blabla</p>
            </article>
                    </section>
  </section>
</div><!-- #wrapper -->

</body>
</html> 
```

当用户单击“header.jsp”中的链接更改语言时，将调用“Language”servlet 并更改 sessionScope 中语言参数的值。这可以正常工作，但是我的 servlet 必须重定向（转发？）对原始 JSP 的响应，以便它再次以正确的语言显示，这对我不起作用。

我的问题是：我怎样才能找到或传递这个 JSP URL？我尝试了 request.getRequestURI() 但它返回的是 Servlet URI，而不是发送请求的 JSP。

这是我的小服务程序：

```
/**
 * Servlet implementation class Language
 */
@WebServlet("/language")
public class Language extends HttpServlet {
private static final long serialVersionUID = 1L;

/**
 * @see HttpServlet#HttpServlet()
 */
public Language() {
    super();
    // TODO Auto-generated constructor stub
}

/**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
 */
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    doPost(request, response);
}

/**
 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
 */
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    String lang = request.getParameter("lang");
    HttpSession session = request.getSession();
    session.setAttribute("language", lang);
    System.out.println(request.getRequestURI());//give the servlet URI

    response.sendRedirect(//where ??????);

}

} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:04:57.647

您可以使用 response.sendRedirect(.jsp?language='urlangaue')。所以现在控制转到相应的 jsp 然后你使用 request.parameter("langauge"); 重新审查语言

# jquery - jQuery：切换和淡入？

> ID：10817535
> 
> 赞同：0
> 
> 时间：2012-05-30T13:41:38.473
> 
> 标签：jquery, toggle, fadein

我有以下工作正常的切换，天知道我是如何让它工作的；不明白这一切。

```
jQuery(function() {
    jQuery('.toggle1').click(function() {
        jQuery('.toggle-box').slideToggle('fast');
        return false;
    });
});​ 
```

是否有可能在`.toggle-box`打开盒子后淡入淡出？

我尝试添加..

```
jQuery(".toggle-box").fadeIn(2000); 
```

但没有运气。

有可能吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:58:56.033

这里有一些最佳实践可以帮助你，但一般来说，只要有任何容器（我称之为 .toggle-boxInner）fadeIn() 就像这样

此外，您的代码可能会发生一些清理工作，只是一些捷径

```
$(function(){ // when ready...

    // here's your onClick listener for the toggle1 class element(s)
    $('.toggle1').click(function(){ 

        // slideToggle the toggle-box
        $('.toggle-box').slideToggle('fast', function(){ 

            // this is called when the toggle-box slideToggle is complete
            $('.toggle-box .toggle-boxInner').fadeToggle('fast'); 
        });
        return false; // i don't think you should need this unless you're using
                      //    a <a/> or <input type='submit' /> 
                      //    as the .toggle1 element
    });
}); 
```

您可能想要 .fadeToggle 内部容器，以便在切换框滑回时它会消失。另外，请随意将 .fadeIn('slow') 更改为 'fast'。

希望这可以帮助！

编辑：进行了这些建议的更改：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:31:50.993

```
$(function() {
    $('.toggle-box').hide().contents().hide();
    $('.toggle1').on('click', function(e) {
        e.preventDefault();
        $('.toggle-box').slideToggle('fast', function(e) {
            if ($(this).is(':visible')) {
                $(this).contents().fadeIn(2000);
            }else{
                $(this).contents().hide();
            }
        });
    }); 
}); 
```

[小提琴](http://jsfiddle.net/adeneo/qxnYN/)

# forms - 空间有限的子表单解决方案 - MS Access

> ID：10817539
> 
> 赞同：1
> 
> 时间：2012-05-30T13:41:47.580
> 
> 标签：forms, ms-access, subforms

我一直在寻找并尝试很多不同的东西，但我无法解决我的情况：

房间里有家具。我需要关于这件家具和房间的库存/详细信息。用户使用其他一些细节来测量房间，然后 IDEALLY 会使用子表单来添加家具及其使用多项目子表单的详细信息。但是我的空间非常有限。这适用于平板电脑，因此屏幕空间几乎为零。我需要合并图片和描述框等，所以我基本上有大约 1-2 个字段宽，7-8 个字段长来放入我的子表单。问题是家具本身有大约 15 个字段。

所以我认为，由于空间限制和奇怪的要求，我需要一些不是子表单的东西；可能是指向另一个表单的链接，用户可以添加家具而无需重新填充房间信息（即房间号、建筑物号等）。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:46:05.843

使用子表单，但仅包括项目名称和数量（？）。在合适的地方放置一个添加按钮，并使用它将项目添加到当前子表单中包含的任何表单中。添加按钮可以打开未绑定或绑定的表单。

# winforms - 如何防止编译器为不更本地化的应用程序创建 appname.resources.dll？

> ID：10817540
> 
> 赞同：5
> 
> 时间：2012-05-30T13:41:51.120
> 
> 标签：winforms, visual-studio-2010, visual-studio, localization, culture

我有一个用 vb2010 编写的 winform 应用程序。

我将应用程序的 winform 的“语言”属性更改为德语，仅用于测试目的。我构建了应用程序，并在我的 \bin\debug 文件夹中创建了一个新的 \de 文件夹，其中包含本地化资源文件“appname.resources.dll”。

然后我将“Language”属性设置回（默认）和“Localizable”设置为 FALSE，并再次构建应用程序，但再次创建了带有 appname.resources.dll 的 \de 文件夹。我已经控制了我的应用程序中的每个表单，我的项目设置也是如此，没有任何其他文化指向。我删除了整个 \debug 文件夹，但每次构建后，我总是得到 \de 子文件夹。

我现在无法理解我的应用程序中发生了什么变化：如果我设置回表单属性，为什么编译器会创建本地化资源？

我对一种新文化（南非荷兰语）重复了同样的操作，以发现表单属性的任何变化：我没有发现任何可以帮助我的东西，但现在我得到了两个子文件夹。：\de 和 \af

有什么建议吗？谢谢你的回复。

**编辑：找到解决方案！** 在解决方案资源管理器中，您必须单击显示所有文件；然后在表单（或表单）下有一个名为“formname.de-DE.resx”的文件，这是表单“formname”的语言资源文件。您必须手动删除此文件才能构建非本地化项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T08:05:28.500

在解决方案区域扩展您的表格。

你找到文件*yourformname.de.resx*删除此文件并重建您的项目。

使用本地化语言后，vs 创建资源文件非常快。如果您更改表格上的任何内容！

要解决此问题，请删除错误的资源文件。

# ios - 使用 llvm-gcc-4.2 交叉编译对象

> ID：10817542
> 
> 赞同：1
> 
> 时间：2012-05-30T13:41:58.670
> 
> 标签：ios, macos, compiler-errors

我正在尝试使用 -static 交叉编译两个目标文件，但我收到一条错误消息。

```
/Developer/usr/bin/arm-apple-darwin10-llvm-gcc-4.2 -o launchd launchd.o syscalls.o -static
-nostartfiles -nodefaultlibs -nostdlib -Wl,-e,_main
/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/ld_classic: launchd.o incompatible,
file contains unsupported type of section 3 (__TEXT,__picsymbolstub4) in load command 0 (must
specify "-dynamic" to be used)
collect2: ld returned 1 exit status 
```

如果我尝试使用选项 -dynamic 运行它，那么我会得到...

```
/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/arm-apple-darwin10-llvm-gcc-4.2 -o
launchd launchd.o syscalls.o -dynamic -nostartfiles -nodefaultlibs -nostdlib -Wl,-e,_main
ld: warning: -force_cpusubtype_ALL will become unsupported for ARM architectures
Undefined symbols for architecture arm:
"_cp", referenced from:
  _main in launchd.o
ld: symbol(s) not found for architecture arm
collect2: ld returned 1 exit status 
```

有人有什么想法可能是错的吗？谢谢！

# ruby - 无法在 Windows 7 上安装 watir-webdriver

> ID：10817546
> 
> 赞同：0
> 
> 时间：2012-05-30T13:42:21.400
> 
> 标签：ruby, watir, watir-webdriver, ruby-development-kit

您好，我正在尝试使用 Ruby 1.9.3 在 Windows 7 上安装 watir-webdriver，安装挂起：

构建原生扩展。这可能需要一段时间...

我在等待，我在等待，我在等待

没有任何进展。你能告诉我我做错了什么吗？

以前我安装了 Ruby 1.9.3，更新了 gems，安装了 devkit。

感谢您未来的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:37:19.797

您是否按照说明进行操作？

[https://github.com/watir/watirbook/blob/master/installation/windows.md](https://github.com/watir/watirbook/blob/master/installation/windows.md)

尝试使用详细输出进行安装，让我们知道您得到了什么：

```
gem install watir-webdriver -V 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:55:35.687

我必须在下面更改我的 c:\ruby193\bin\gem.bat 以使 devkit 用于本机扩展

```
@ECHO OFF
IF NOT "%~f0" == "~f0" GOTO :WinNT
ECHO.This version of Ruby has not been built with support for Windows 95/98/Me.
GOTO :EOF
:WinNT
SET HTTP_PROXY=server.domain.com:9999
SET RI_DEVKIT=c:\devkit\
SET PATH=%RI_DEVKIT%bin;%RI_DEVKIT%mingw\bin;%PATH%
@"%~dp0ruby.exe" "%~dpn0" %* 
```

# php - 如何通过头函数（如 post）发送数据

> ID：10817549
> 
> 赞同：0
> 
> 时间：2012-05-30T13:42:33.590
> 
> 标签：php, post, header

我尝试将数据从 php 文件传递​​到另一个带有 header 函数的 php 文件。像那样：

```
header("location:login.php?userName=$username"); 
```

（该行出现在第一个 php 文件中。）问题是数据出现在第二个 php 文件的 url 中。像 GET。我尝试寻找一些例子但没有成功。我在寻找如何使它像 POST？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T13:44:51.763

你不能。如果您重定向，您将始终收到 GET 请求。

一个可能的解决方案（如果目标脚本在同一个域上）是使用 PHP 会话将数据存储在服务器上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T13:46:10.090

最初建议使用[CURL](http://php.net/manual/en/curl.examples-basic.php)，我现在认为它可能不是最好的解决方案。如果您只是想在脚本之间保存或传递数据，您可能需要查看 Sessions，它允许您在脚本之间设置和保存数据。

例如：

**脚本 1**

```
session_start();

$_SESSION['userName'] = $username; 
```

**脚本 2**

```
session_start();

if (isset($_SESSION['userName']))
    $username = $_SESSION['userName'];

echo $username; 
```

这将成功地在两个脚本之间传递 $username 的值。只需将任何变量放入 $_SESSION 数组，它们将在您的脚本中可用。

*   一定要包括 session_start(); 在每个脚本的顶部
*   还要查看[session_set_cookie_params()](http://www.php.net/manual/en/function.session-set-cookie-params.php)以确保您的会话可通过您的域使用和/或不与其他站点的会话冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:46:21.187

您可以使用 PEAR 出色的[HTTP_Request2](http://pear.php.net/package/HTTP_Request2)包来[发出 POST 请求](http://pear.php.net/manual/en/package.http.http-request2.request.php#package.http.http-request2.request.body)。

# tortoisesvn - Tortoise SVN 提交和更新问题

> ID：10817555
> 
> 赞同：0
> 
> 时间：2012-05-30T13:42:52.627
> 
> 标签：tortoisesvn

好的，我昨天用 1 个文件更新了我们的网站/网络应用程序，它弹出并出错。它并没有真正给我任何关于错误是什么的细节，但是当我再次尝试更新时。我懂了： ![错误](../Images/f54f6853d2691317dfe2ccbe4602d2db.png)

我不能更新，我不能提交......另一个程序员在同一个帐户上，他的工作正常，在不同的计算机上。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:46:54.220

从上下文菜单运行`Clean up`命令：

![在此处输入图像描述](../Images/d7b6f38f8622239f1e126c33ad092ca6.png)

您也可以尝试删除然后更新整个工作目录

# android - 在android中复制HTML表格的最简单方法是什么？

> ID：10817558
> 
> 赞同：0
> 
> 时间：2012-05-30T13:43:10.470
> 
> 标签：android

我正在构建一个网站抓取工具，我想在一个 android 活动中复制一个 HTML 表。

有没有一种简单的方法来使用表格 html 而不是逐行构建它..？

-我正在使用 jsoup 来解析 html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:03:33.580

Display the html in a WebView.

# qt - Qt配置freetype错误

> ID：10817562
> 
> 赞同：0
> 
> 时间：2012-05-30T13:43:18.747
> 
> 标签：qt, configure

我正在尝试为 ARM cortex-8 板构建 QT。

我按照给定的说明成功安装了主机配置：http: [//qt-project.org/wiki/Building_Qt_for_Embedded_Linux](http://qt-project.org/wiki/Building_Qt_for_Embedded_Linux)

在 ARM 板目标构建配置时，我创建了自己的 mkspec 文件 linux-TIarmv7-g++，其配置如下：

```
> #
> # qmake configuration for building with arm-linux-g++
> #
> 
> include(../../common/gcc-base-unix.conf)
> include(../../common/g++-unix.conf) include(../../common/linux.conf)
> include(../../common/qws.conf)
> 
> # modifications to g++.conf
> #Toolchain
> 
> 
> #Compiler Flags to take advantage of the ARM architecture QMAKE_CFLAGS_RELEASE    = -O3 -march=armv7-a -mtune=cortex-a8 -mfpu=neon
> -mfloat-abi=softfp QMAKE_CXXFLAGS_RELEASE = -O3 -march=armv7-a -mtune=cortex-a8 -mfpu=neon -mfloat-abi=softfp QMAKE_CC                = arm-none-linux-gnueabi-gcc QMAKE_CXX               = arm-none-linux-gnueabi-g++ QMAKE_LINK              =
> arm-none-linux-gnueabi-g++ QMAKE_LINK_SHLIB        =
> arm-none-linux-gnueabi-g++
> 
> # modifications to linux.conf QMAKE_AR = arm-none-linux-gnueabi-ar cqs QMAKE_OBJCOPY = arm-none-linux-gnueabi-objcopy QMAKE_STRIP =
> arm-none-linux-gnueabi-strip
> 
> QMAKE_INCDIR += $$TSLIB_INCDIR QMAKE_LIBDIR += $$TSLIB_LIBDIR
> QMAKE_LIBS   += -lts
> 
> load(qt_config) 
```

我已经安装了codesourcery工具链，我的环境是Ubuntu 12.04 64位操作系统，目标板是ARM-cortex8

我的配置如下：

./configure -prefix /usr/local/qt-embedded -embedded arm -platform qws/linux-x86_64-g++ -xplatform qws/linux-TIarmv7-g++ -depths 16,24,32 -no-mmx -no-3dnow - no-sse -no-sse2 -no-glib -no-cups -no-largefile -no-accessibility -no-openssl -no-gtkstyle -qt-mouse-pc -qt-mouse-linuxtp -qt-mouse-linuxinput -插件-鼠标-linuxtp -插件-鼠标-pc -fast -confirm-license -v

在执行和详细之后，我得到以下错误：与 freetype 库相关

```
> m-none-linux-gnueabi/bin/ld: cannot find -lts collect2: ld returned 1
> exit status make: *** [sound] Error 1 sound disabled. FreeType
> auto-detection... () arm-none-linux-gnueabi-g++ -c -pipe -O3
> -march=armv7-a -mtune=cortex-a8 -mfpu=neon -mfloat-abi=softfp -Wall -W  -I../../../mkspecs/qws/linux-TIarmv7-g++ -I. -o freetype.o freetype.cpp freetype.cpp:42:22: fatal error: ft2build.h: No such file
> or directory compilation terminated. make: *** [freetype.o] Error 1
> FreeType disabled. Determining machine byte-order...
> (/home/rootx/qt-everywhere-opensource-src-4.8.1/mkspecs/qws/linux-TIarmv7-g++
> yes /home/rootx/qt-everywhere-opensource-src-4.8.1
> /home/rootx/qt-everywhere-opensource-src-4.8.1)
> arm-none-linux-gnueabi-g++ -Wl,-O1 -o endiantest endiantest.o     -lts
> /home/rootx/toolchain/bin/../lib/gcc/arm-none-linux-gnueabi/4.6.1/../../../../arm-none-linux-gnueabi/bin/ld:
> cannot find -lts collect2: ld returned 1 exit status make: ***
> [endiantest] Error 1 Unknown byte order!
> 
> The target system byte order could not be detected! 
```

如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:19:16.047

似乎没有安装 freetype 开发库。

sudo apt-get install libfreetype6-dev 能解决你的问题吗？

# asp.net - 您如何在 asp.net MVC 中更新数据库 - 这是最好的方法吗？

> ID：10817569
> 
> 赞同：0
> 
> 时间：2012-05-30T13:43:35.633
> 
> 标签：asp.net, asp.net-mvc

在这个论坛的一些出色帮助下，任何人都可以确认这是否是更新数据库中数据的最佳方式，在 MVC 控制器中，多个记录/模型一次回发？

```
[HttpPost]
public ActionResult Edit(ObjectivesEdit model)
{
    if (model.Objectives != null)
    {
        // model will have several records posted back - so loop through each one, and update the database
        foreach (var item in model.Objectives)
        {
            // find the database row
            Objective objective = db.objectives.Find(item.ID);

            // Set the database row to the posted values
            objective.objective = item.objective;
            objective.score = item.score;
            objective.possscore = item.possscore;
            objective.comments = item.comments;
        }
        // Save the changes to the database
        db.SaveChanges();
    }
    return View(model);
} 
```

我认为可能有更好的工作方式的部分是：

```
objective.objective = item.objective;
objective.score = item.score;
objective.possscore = item.possscore;
objective.comments = item.comments; 
```

可以用更精简的东西代替，还是这样做的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:01:40.610

最好使用存储库模式来更新或添加到数据库。

看看下面的链接

[https://codereview.stackexchange.com/questions/6266/asp-net-mvc-using-repository-pattern-code-review](https://codereview.stackexchange.com/questions/6266/asp-net-mvc-using-repository-pattern-code-review)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:49:27.693

除了使用 lambda 表达式，例如：

```
var employees = data.Employees.Where(em => em.City.StartsWith("B")).ToList();
employees.ForEach(em => em.City = "ABC"); 
```

（以上取自[这里](http://social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/0f014318-5259-43c7-8518-06948cec465e)）

您必须像当前那样循环更新记录。请注意，上面仍然是一个循环，但在内部执行（并且看起来更干净一些）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:20:04.283

我在您的代码中看到的最大问题是您可能会针对返回的每条记录访问数据库。此外，如果您在表单上持有整个对象，则映射不是完全必要的

所以你会想在一个查询中查询所有必要的对象

```
var Objectives = db.Objectives.where(o => model.Objectives.select(ob => ob.ID).Contains(o.ID)); 
```

这将从数据库中带回所有已发布到控制器操作的目标。

然后在你的 foreach 里面改变

```
Objective objective = db.objectives.Find(item.ID); 
```

到

```
Objective objective = Objectives.First(o => o.ID == item.ID); 
```

然后继续你的映射

总是尽量减少访问数据库的次数

# plot - 如何使我的情节足够大，以至于图例不会隐藏数据点？

> ID：10817572
> 
> 赞同：0
> 
> 时间：2012-05-30T13:43:46.227
> 
> 标签：plot, matplotlib, legend

我想做的是：

![内有图例的情节](../Images/2379a307a7612d1865b5b449f21b0b43.png)

如何扩展我的情节，使图例在我的数据点之上，但在情节之内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:46:48.987

使用命令`xlim(0, 100)`设置 x-limits（或者`ax.set_xlim(0, 100)`如果您使用 matplotlib 的面向对象的编程风格）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T05:47:50.660

更好的方法是以英寸为单位指定画布的大小。所以字体（默认为 10 点，看起来更小，数据点也是如此）。你可以选择任何你想要的尺寸，

```
# in this case 3 inches times 3 inches
fig = pyplot.figure(figsize=(3,3))
ax  = fig.add_subplot(111) 
```

但请注意，您应该将图像保存到文件中，而不是尝试使用 show() 查看它们。

```
fig.savefig('mycoolgraph.png') # you could also you vector formats like PDF or SVG... 
```

另请参阅[有关将图例保存在图外的这个问题](https://stackoverflow.com/questions/8971834/matplotlib-savefig-with-a-legend-outside-the-plot/8972020#8972020)。

# xml - XSLT：如何按指定的顺序从键返回结果

> ID：10817582
> 
> 赞同：0
> 
> 时间：2012-05-30T13:44:09.783
> 
> 标签：xml, xslt, xpath

我正在尝试根据“标题”元素中的数字选择元素，然后按特定顺序返回它们。我已经使用一个键对它们进行了分组，但是当我访问它们的键并将模板应用到节点时，它们不会按指定的顺序返回。

示例代码：

```
<test>
    <anElement>
        <title>001 title</title>
    </anElement>
    <anElement>
        <title>002 title</title>
    </anElement>
    <anElement>
        <title>003 title</title>
    </anElement>
    <anElement>
        <title>004 title</title>
    </anElement>
    <anElement>
        <title>005 title</title>
    </anElement>
    <anElement>
        <title>006 title</title>
    </anElement>
    <anElement>
        <title>007 title</title>
    </anElement>
    <anElement>
        <title>008 title</title>
    </anElement>
    <anElement>
        <title>009 title</title>
    </anElement>
    <anElement>
        <title>010 title</title>
    </anElement>   
</test> 
```

当转换为：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="2.0">

<xsl:strip-space elements="*"/>
<xsl:output indent="yes"/>

<xsl:key name="keyNodes" match="//anElement" use="title/substring(., 1, 3)"/>

<xsl:template match="/">
    <groupsOfNodes>
       <aGroup>
           <title>group one</title>
        <members>
            <xsl:apply-templates select="key('keyNodes', ('003', '002', '001'))"/>
         </members>
       </aGroup>
        <aGroup>
            <title>group one</title>
            <members>
                <xsl:apply-templates select="key('keyNodes', ('010', '009', '008'))"/>
            </members>
        </aGroup>
    </groupsOfNodes>
</xsl:template>

<xsl:template match="anElement">
    <para><xsl:apply-templates/></para>
</xsl:template>

</xsl:stylesheet> 
```

给出这个结果：

```
<groupsOfNodes>
   <aGroup>
  <title>group one</title>
  <members>
     <para>001 title</para>
     <para>002 title</para>
     <para>003 title</para>
  </members>
  </aGroup>
   <aGroup>
  <title>group one</title>
  <members>
     <para>008 title</para>
     <para>009 title</para>
     <para>010 title</para>
  </members>
   </aGroup>
  </groupsOfNodes> 
```

这是所需结果的示例：

```
 <members>
     <para>003 title</para>
     <para>002 title</para>
     <para>001 title</para>
  </members> 
```

有什么方法可以指定它们的处理顺序，还是我必须为密钥中的每个节点使用单独的“应用模板”规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:00:23.203

您可以将代码更改为

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="2.0">

<xsl:strip-space elements="*"/>
<xsl:output indent="yes"/>

<xsl:key name="keyNodes" match="anElement" use="title/substring(., 1, 3)"/>

<xsl:template match="/">
    <groupsOfNodes>
       <aGroup>
           <title>group one</title>
        <members>
            <xsl:apply-templates select="for $s in ('003', '002', '001') return key('keyNodes', $s)"/>
         </members>
       </aGroup>
        <aGroup>
            <title>group one</title>
            <members>
                <xsl:apply-templates select="for $s in ('010', '009', '008') return key('keyNodes', $s)"/>
            </members>
        </aGroup>
    </groupsOfNodes>
</xsl:template>

<xsl:template match="anElement">
    <para><xsl:apply-templates/></para>
</xsl:template>

</xsl:stylesheet> 
```

当您使用 XSLT 2.0 时，我也想知道为什么您使用键进行分组，但这是一个不同的问题。

# qt - QString arg() 打印限制？

> ID：10817583
> 
> 赞同：1
> 
> 时间：2012-05-30T13:44:12.917
> 
> 标签：qt, qstring

我可能错过了一些关于`QString`论点操纵的重要内容。

找不到 str2 给出有效结果的原因。我发现很少有以 str1 方式编写的示例，所以我想它应该可以工作。谢谢。

```
QString str1 = QString("%1");
str1.arg("help");
qDebug() << QString("str1 - ") + str1;

QString str2 = QString("%1").arg("help");
qDebug() << QString("str2 - ") + str2; 
```

结果是：

```
"str1 - %1" 
"str2 - help" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:49:02.107

尝试分配 arg() 的值

所以改用返回值

例如

```
QString str1 = QString("%1");
str1 =str1.arg("help");
qDebug() << QString("str1 - ") + str1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:05:17.370

你在你的例子中回答了自己。

```
QString str1 = QString("%1");  // creates str1 with value "%1"
str1.arg("help");              // returns a string with `help` and the result is lost. 
qDebug() << QString("str1 - ") + str1;  // print "str1 - %1" because str1 still have "%1"

QString str2 = QString("%1").arg("help"); // creates str2 with value !help": given by returned value of `arg` that takes a string with value "%1" and substitutes "help".
qDebug() << QString("str2 - ") + str2; // now you are printing "str2 - help" 
```

如果你看到文档[Qstring:arg](http://doc.qt.nokia.com/4.7-snapshot/qstring.html#arg-2)你会看到，如果你打电话`qstring("%1").arg("help")`，你在打电话`QString QString::arg ( const QString & a, int fieldWidth = 0, const QChar & fillChar = QLatin1Char( ' ' ) ) const`

# iphone - iPhone中的NSData对象

> ID：10817593
> 
> 赞同：1
> 
> 时间：2012-05-30T13:44:46.097
> 
> 标签：iphone

```
NSString  *imagePath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/InAppLibrary"];

NSString *str=[@"/" stringByAppendingFormat:appDelegate_iPad.DrawPicture];
NSString *currentImageName=[imagePath  stringByAppendingFormat:str];

NSData *dataImage = [NSData dataWithContentsOfFile:currentImageName]; 
```

这里 NSData 对象 dataImage 为我提供空值，请任何朋友帮助我了解这里有什么问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:48:29.750

我认为你的路径是错误的，你应该使用：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES );
  NSString *docPath =  [paths objectAtIndex:0];

  NSString *imagePath = [docPath stringByAppendingFormat:@"/InAppLibrary/%@", appDelegate_iPad.DrawPicture];
  NSData *dataImage = [NSData dataWithContentsOfFile: imagePath ]; 
```

# java - 数据库表自联接的 Java 应用程序表示

> ID：10817594
> 
> 赞同：0
> 
> 时间：2012-05-30T13:44:48.207
> 
> 标签：java, algorithm, generics

我有一个具有以下结构的数据库表：

```
CREATE TABLE `Professions` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `profession` varchar(254) NOT NULL,
  `profession_type` enum('system','custom') NOT NULL,
  PRIMARY KEY (`id`),
  KEY `profession_index` (`profession`)
) ENGINE=InnoDB AUTO_INCREMENT=296 DEFAULT CHARSET=utf8

 CREATE TABLE `Professions_Professions` (
  `parent_id` bigint(20) unsigned NOT NULL,
  `child_id` bigint(20) unsigned NOT NULL,
  PRIMARY KEY (`parent_id`,`child_id`),
  UNIQUE KEY `child_id_UNIQUE` (`child_id`),
  KEY `parent_id_index` (`parent_id`),
  CONSTRAINT `fk_Professions_Professions1` FOREIGN KEY (`parent_id`) REFERENCES `Professions` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_Professions_Professions2` FOREIGN KEY (`child_id`) REFERENCES `Professions` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

为了获得专业的整个结构，我编写了以下 SQL：

```
SELECT id, profession, profession_type, parent_id FROM Professions P LEFT OUTER JOIN Professions_Professions PP ON PP.child_id = P.id; 
```

现在，我想在 Java 应用程序中表示这种类型的结构（我的位置表结构几乎相同）。
对我来说，创建某种没有根的树看起来很合理，但它是一个充当根的元素列表。每个元素都将实现“节点”接口，该接口将允许获取其父元素和子元素列表。由于这应该是通用解决方案，我希望有一个通用树。
我也想有一个程序在这棵树中上下走动并执行一些可以返回的动作（接口）（在每个孩子和每个孩子列表上 - '节点'和'节点列表'动作）某个值与否，并且可以采用任意数量的参数。
如果动作将有一个返回值，我希望它的返回类型由动作实现指定。
我试图实现这一点并最终得到以下代码（应该有很多kludges ...）：

```
// Removed the generic because i was unable to figure out how to make it all work ... 
public interface TreeNode {
    public void setParent(Object parent);
    public void setChildList(List childList);
    public Object getParent();
    public List getChildList();
}

public class Tree<T extends TreeNode> {

    private List<T> tree;

    public Tree(List<T> treeNodeList) {
        /* Ensuse that the list is not empty */
        if((null != treeNodeList) && (!treeNodeList.isEmpty())) {
            tree = new ArrayList<T>();
            /* Link the elements and create the tree */
            for(T node:treeNodeList) {
                /* If the current node has a parent */
                if(null != node.getParent()) {
                    /* Look the actual parent object in the initial node list */
                    int parentIndex = treeNodeList.indexOf(node.getParent());
                    if(-1 != parentIndex) {
                        T parent = treeNodeList.get(parentIndex);
                        /* Set the actual parent */
                        node.setParent(parent);
                        /* Add node to parent children list */
                        if(null == parent.getChildList()) {
                            parent.setChildList(new ArrayList<T>());
                        }
                        parent.getChildList().add(node);
                    }
                }
                else {
                    /* Add element to tree root list */
                    tree.add(node);
                }
            }
        }
    }

    public List<?> getRootList() {
        return tree;
    }

    public void forEachChild(List<T> rootList, SimpleNodeTreeAction<T> action, Object... args) {
        if((null != rootList) && (!rootList.isEmpty())) {
            Object[] localArgs = null;
            for(T node:rootList) {
                /* Store the local copy of args */
                if(null != args) {
                    localArgs = args.clone();
                }
                action.doAction(node, localArgs);
                forEachChild(node.getChildList(), action, localArgs);
            }
        }
    }

    public void forEachChild(T rootNode, SimpleNodeTreeAction<T> action, Object... args) {
        if(null != rootNode) {
            forEachChild(rootNode.getChildList(), action, args);
        }
    }

    public void forEachChild(SimpleNodeTreeAction<T> action, Object... args) {
        forEachChild(tree, action, args);
    }

    public Object forEachChild(List<T> rootList, NodeTreeAction<T> action, Object... args) {
        Object result = null;
        if((null != rootList) && (!rootList.isEmpty())) {
            Object[] localArgs = null;
            for(T node:rootList) {
                /* Store the local copy of args */
                if(null != args) {
                    localArgs = args.clone();
                }
                result = action.doAction(node, localArgs);
                if(null == result) {
                    result = forEachChild(node.getChildList(), action, localArgs);
                    if(null != result) {
                        break;
                    }
                }
                else {
                    break;
                }
            }
        }
        return result;
    }

    public Object forEachChild(T rootNode, NodeTreeAction<T> action, Object... args) {
        Object result = null;
        if(null != rootNode) {
            result = forEachChild(rootNode.getChildList(), action, args);
        }
        return result;
    }

    public Object forEachChild(NodeTreeAction<T> action, Object... args) {
        return forEachChild(tree, action, args);
    }

    public void forEachChildList(List<T> rootList, SimpleNodeListTreeAction<T> action, Object... args) {
        if((null != rootList) && (!rootList.isEmpty())) {
            action.doAction(rootList, args);
            for(T node:rootList) {
                forEachChildList(node.getChildList(), action, args);
            }
        }
    }

    public void forEachChildList(T rootNode, SimpleNodeListTreeAction<T> action, Object... args) {
        if(null != rootNode) {
            forEachChildList(rootNode.getChildList(), action, args);
        }
    }

    public void forEachChildList(SimpleNodeListTreeAction<T> action, Object... args) {
        forEachChildList(tree, action, args);
    }

    public Object forEachChildList(List<T> rootList, NodeListTreeAction<T> action, Object... args) {
        Object result = null;
        if((null != rootList) && (!rootList.isEmpty())) {
            result = action.doAction(rootList, args);
            if(null == result) {
                for(T node:rootList) {
                    result = action.doAction(node.getChildList(), args);
                    if(null != result) {
                        break;
                    }
                }
            }
        }
        return result;
    }

    public Object forEachChildList(T rootNode, NodeListTreeAction<T> action, Object... args) {
        Object result = null;
        if(null != rootNode) {
            result = forEachChildList(rootNode.getChildList(), action, args);
        }
        return result;
    }

    public Object forEachChildList(NodeListTreeAction<T> action, Object... args) {
        return forEachChildList(tree, action, args);
    }

    public void forEachParent(T rootNode, SimpleNodeTreeAction<T> action, Object... args) {
        if(null != rootNode) {
            T parent = (T) rootNode.getParent();
            while(null != parent) {
                action.doAction(parent, args);
                parent = (T) parent.getParent();
            }
        }
    } 

    public Object forEachParent(T rootNode, NodeTreeAction<T> action, Object... args) {
        Object result = null;
        if(null != rootNode) {
            T parent = (T) rootNode.getParent();
            while(null != parent) {
                result = action.doAction(parent, args);
                if(null == result) {
                    parent = (T) parent.getParent();
                }
                else {
                    break;
                }
            }
        }
        return result;
    }

    public Object search(final T searchObject) {
        return forEachChild(
                new NodeTreeAction<T>() {

                    @Override
                    public Object doAction(T node, Object... args) {
                        if(node.equals(searchObject)) {
                            return node;
                        }
                        else {
                            return null;
                        }
                    }

                },
                searchObject);
    } 

    public void sort(final Comparator comparator) {
        forEachChildList(
                new SimpleNodeListTreeAction<T>() {
                    @Override
                    public void doAction(List node, Object... args) {
                        Collections.sort(node, comparator);
                    }
                }, (Object) null);
    }

    public void sort() {
        forEachChildList(
                new SimpleNodeListTreeAction<T>() {
                    @Override
                    public void doAction(List node, Object... args) {
                        Collections.sort(node);
                    }

                }, (Object) null);
    }
}

public interface NodeTreeAction<T extends TreeNode> {
    public Object doAction(T node, Object... args);
}

public interface SimpleNodeTreeAction<T extends TreeNode> {
    public void doAction(T node, Object... args);
}

public interface NodeListTreeAction<T extends TreeNode> {
    public Object doAction(List<T> node, Object... args);
}

public interface SimpleNodeListTreeAction<T extends TreeNode> {
    public void doAction(List<T> node, Object... args);
} 
```

谁能指出我如何使这个（假设不是完美的）解决方案变得更好（例如从方法返回实际类型对象，而不是现在的对象）。如果有人能提出更好的解决方案来解决这个问题，我也将不胜感激。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:22:46.390

嗯。使 Node 成为 Tree 的内部类。这使得泛型声明更简单。添加一些空检查，如果你想懒惰地创建 up 和 down 集合。

没有测试/编译这个。YMMV。

```
class Tree<T implements Comparable<? super T>> {
  final Collection<Node> sourceNodes = new HashSet<Node>();
  final Collection<Node> sinkNodes = new HashSet<Node>();
  final Map<T, Node<T>> allNodes = new HashMap<T, Node<T>>();

  class Node implements Comparable<Node> {
      final T t;
      final Collection<Node> up = new HashSet<Node>();
      final Collection<Node> down = new HashSet<Node>();
      Node(t) {if(t==null) throw new IllegalArgumentException(); this.t = t;}
      public int hashCode() { return t.hashCode; }
      public int equals(Node n) { return t.equals(n.t);}
      public int compareTo(Node n) { return t.compareTo(n.t);}
  }

  void makeNewNode(T t) {
    Node n = new Node(t);
    sourceNodes.add(n);
    sinkNodes(n);
    alNodes.add(t,n);
  }

  void link(T up, T down) {
    link(all.get(up), all.get(down));
  }

  void link(Node up, Node down) {
    sourceNodes.remove(down); // no need to check
    sinkNodes.remove(up); // no need to check
    up.down.add(down);
    down.up.add(up);
  }

  void unlink(T up, T down) {
    unlink(all.get(up), all.get(down));
  }

  void unlink(Node up, Node down) {
      up.down.remove(down);
      down.up.remove(up);
      if(up.down.isEmpty()) sinkNodes.add(up);
      if(down.up.isEmpty()) sourceNodes.add(down);
  }
} 
```

# java - Java图像缩放而不将整个图像加载到内存中

> ID：10817597
> 
> 赞同：3
> 
> 时间：2012-05-30T13:44:50.140
> 
> 标签：java, javax.imageio, imageicon, jmagick

我们有一些非常大的 jpg 在 A0 打印机上打印时使用。

问题是我们需要将这个大图像转换为缩略图以便在一些 Java UI 中使用。

有没有办法在不将整个图像加载到内存的情况下转换图像（使用 Java）？目前，当我们尝试加载图像时，我们会出现内存不足的异常。

标准代码中有什么或者我最好的选择是使用 jmagick 吗？纯 Java 实现最适合我们的部署。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T08:06:57.053

我设法让它工作，完整的代码如下。

调用 reader.setInput(iis, true, true); 是我在上一篇文章中遗漏的魔法。

```
FileInputStream fin = new FileInputStream(source);

ImageInputStream iis = ImageIO.createImageInputStream(fin);

Iterator iter = ImageIO.getImageReaders(iis);
if (!iter.hasNext()) {
    return;
}

ImageReader reader = (ImageReader) iter.next();

ImageReadParam params = reader.getDefaultReadParam();

reader.setInput(iis, true, true);

params.setSourceSubsampling(width, height, 0, 0);

BufferedImage img = reader.read(0, params);

ImageIO.write(img, "JPG", destination); 
```

# eclipse - 如何独立重用不同 Eclipse 插件中的代码

> ID：10817602
> 
> 赞同：0
> 
> 时间：2012-05-30T13:45:21.513
> 
> 标签：eclipse, encapsulation, modularity

如果我有 2 个具有相似功能的不同 Eclipse 插件（例如，它们都实现了第三个插件的扩展点或服务），我怎样才能轻松地**在两个插件中重用相同的代码而不使一个依赖于另一个**？

示例：让两个插件共享完全相同的`Activator.java`.

我已经考虑过的替代方案：

*   创建另一个（基本）插件以包含共享代码并使其他 2 个插件依赖于该基本插件。适合一般的 Eclipse 模块化概念，但会导致功能分布在多个插件上，并且插件中没有封装任何合理的功能。
*   在 Eclipse 中有一个库项目，并在 2 个插件项目中将其作为源代码或 JAR 引用。这样我就避免了创建“帮助”插件，但是让一个库项目引用 Eclipse 插件运行时中的类似乎也不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:02:26.047

执行此操作的标准方法是创建第三个插件。通常，如果您正在使用插件开发，最好将其用于所有内容（不要创建库项目）。这样，您就可以获得插件开发的所有好处。

# reporting-services - SSRS 报告突然挂了

> ID：10817609
> 
> 赞同：4
> 
> 时间：2012-05-30T13:45:49.247
> 
> 标签：reporting-services

有一个我在 VS 2008 中创建的 SSRS。SQL server = 2008r2，使用我的域凭据进行身份验证登录。

我拥有的报告上有大约 12 个左右的 TableX 控件，其中包含各种查询以生成活动摘要报告。

我昨天离开时一切都很好，但是，当我今天早上进来时，当我单击“预览”（或在调试器中运行报告）时，报告只是挂起。我看到的只是“正在生成报告”，然后我必须进入任务管理器并杀死 devenv.exe 才能从中恢复。

在报表设计器中，我单独运行了每个查询，以验证没有“长时间运行”的查询并且没有。每个需要大约一秒钟才能返回结果。包中的其他报告运行良好，只是这个是一个问题。

有什么地方我可以看，还是我必须开始一一删除TableX才能找到罪魁祸首（如果这就是问题的话）。

谢谢

坦率

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T17:59:31.767

是时候将我的评论放入答案中了（即使您已经尝试过其中的一些）。您要求找出报告的哪一部分妨碍执行的方法，这是我的 2 cts。

遇到困难时可以尝试的第一件事：

*   **重新启动 Visual Studio**（好的 'ole“你试过把它关掉然后再打开吗？”）
*   **删除 .data 文件**以强制刷新正在查询的数据

如果您想更深入地了解并访问真正的报表服务器：

*   部署到报表服务器，**查看[执行日志](http://blogs.msdn.com/b/robertbruckner/archive/2009/01/05/executionlog2-view.aspx)**

一些其他可能有帮助的事情：

*   **在 Visual Studio 和/或 SSMS 中分别运行查询**，最好使用与触发报告的参数值相同的参数值（为了完整性而提到这一点，但问题已经表明这没有解决任何问题）
*   尝试**针对最近的数据库备份（如果可用）****运行**报告，最近的数据更改或增加可能是您遇到问题的原因
***   **查看 RDL 代码**，特别是查询，并寻找问题 :)*   在所有查询中包含一个`TOP 10`或类似的内容，以找出是哪一个导致了问题。**

 **失败所有我认为你最好的选择是你已经提到的：找到有问题的 tablix 并通过消除过程进行查询。

作为最后的想法，导致我们在 SSRS 中 99% 的性能问题的两件事：

1.  使用大量数据和/或时髦的格式/布局表达式进行透视（例如：带有动态列的 tablix）。
2.  过度使用子报表。

希望这对您或任何未来的访客有所帮助。*如果不确定在这里回答您自己的问题，并告诉我们您最终是如何解决问题的。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-23T01:35:35.237

虽然这个问题已有多年历史，但我在试图找出自己的问题时发现了它。这是我的解决方案，以防万一它对其他人有帮助：

**关闭连接到相关数据库的任何 Server Management Studio 实例。**

在我的例子中，我打开了 SSMS 并从另一台计算机连接到数据库服务器，并且一直在我的报告试图连接到的同一数据库上测试一些长时间运行的存储过程。一定有一些挥之不去的连接导致它没有响应，因为在 SSRS 中出现问题后，我也开始在 SSMS 中遇到非常简单的查询超时。

一旦我关闭 SSMS 并稍等片刻，我的报告在 SSRS 中运行良好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-13T19:00:29.070

对我来说，关闭 SSMS，重新启动 VS 不起作用。我有一个 SQL Server 没有清理的孤立事务。如果上述方法均无效，则只需执行以下操作，并且对我有用的方法可以解决您的 SSRS 崩溃问题：

```
IF(SELECT @@TRANCOUNT) > 0
  COMMIT TRANSACTION 
```**

# php - PHP层次结构/画廊系统

> ID：10817610
> 
> 赞同：2
> 
> 时间：2012-05-30T13:45:52.857
> 
> 标签：php, mysql, hierarchy

我正在用 OOP（仍在学习）PHP 中编写自己的简单画廊脚本。

我正在尝试以最有效的方式从数据库中提取相册，因为当前的图库脚本 (Gallery2) 资源非常繁重，这将取代它。目前的画廊有大约 35,000 件物品和大约 100 张专辑。

[![专辑布局](../Images/8297da04acb9d12a0407e4017951c2bb.png)](https://i.stack.imgur.com/Ii7nd.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/maxxwope.4tm.png)）]

如上图所示，我需要无限的子专辑（实际上最多可能只有 5-6 个）。

数据库布局非常简单，因为它需要做的就是显示图像。

专辑表album_id（int/auto_increment）album_parent（int）album_name（tingtext）

项目表 item_id (int/auto_increment) item_album (int) item_name (int)

我提出的几个查询都是基于使用 WHERE 语句并脱离父专辑 ID 例如..

父 ID 0 = 顶级父 ID 3 将抓取所有以该 ID 为父的专辑。

我遇到的问题是我想使用专辑（album_1/subalbum_1/etc）名称和子专辑来构建面包屑和 URL，使用当前查询我不能一次全部提取它们。

除非我忽略了某些东西，否则 URL 需要像 script.php?album_id=1&album_id=3&album_id=6 这样才能抓住它们，就好像 1 是顶级，3 是子，6 是 3 的子一样。

我已经阅读了很多关于层次结构设置的文章，但大多数都是针对树层次结构布局的，我不需要为每个专辑一次显示所有专辑的子专辑，而更倾向于单个路径层次结构。

谢谢

编辑 **我想我应该指出专辑名称可以命名任何东西，日期仅用于命名而不是实际时间戳等。对不起**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:57:46.383

**按照ianhales 的**建议检索路径，但将其存储到数据库表中，然后从那里检索以显示。

所以将当前节点路径存入表中，只有在移动时，重命名节点才需要更新路径。

这种方式将更有效地读取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:50:51.683

如果我理解您的问题，您需要从叶子（例如“第 2 天”）到树根（专辑数据）的路径。

如果是这样，这个问题的答案应该是这样： [mysql + php retrieve leaf children with path](https://stackoverflow.com/questions/5720936/mysql-php-retrieve-leaf-children-with-path)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:04:50.220

考虑为专辑使用[MPTT](http://en.wikipedia.org/wiki/Nested_set_model)表，然后您可以随意命名它们并拥有无限/无限制的嵌套。然后，您可以通过 id 将图片添加到相册。您可以使用拖放界面管理此类表。它们适用于快速阅读，较慢的更新。

至于数据，
专辑表：album_id（mediumint/unsigned auto_increment），lft（mediumint/unsigned），rgt（mediumint/unsigned）album_name（tingtext？）
项目表：item_id（mediumint/unsigned auto_increment）item_album_id（mediumint/unsigned）item_name （varchar）
Mediumint，因为您可能会超过 65,000 个项目/专辑，但似乎不太可能超过 1600 万。

**编辑：**
如果你使用好的工具，你可以减少学习曲线。见[http://mjsarfatti.com/sandbox/nestedSortable/](http://mjsarfatti.com/sandbox/nestedSortable/)和[https://github.com/mjsarfatti/nestedSortable](https://github.com/mjsarfatti/nestedSortable)方法提供给你需要存储在数据库中的值`toArray()`。你可以使用标准的 jQuery UI`sortable()`事件`update`来改变隐藏的输入。

选择树或其中的一部分，基本上是按`left`值排序。对于子树，您还可以将项目限制为具有`left`介于父级`left`和`right`值之间的项目。您还可以通过（相对）深度进行限制，例如`depth <= parent_depth + number_of_levels_down`.

要将您从 db 获得的平面列表显示为层次结构，您可以使用堆栈来记录前一项的深度。当您迭代项目时，您可以使用它来创建打开的 html 标记，当它变得更深时，并在深度减小时创建关闭标记。

# javascript - 使用 Noir 的 webapp：如何在不使用 javascript 的情况下显示相关的下拉菜单

> ID：10817612
> 
> 赞同：1
> 
> 时间：2012-05-30T13:45:59.097
> 
> 标签：javascript, web-applications, clojure, noir

我正在尝试使用 Noir 编写一个简单的 Web 应用程序，该应用程序具有一系列下拉菜单，其内容会发生变化，具体取决于在前一个下拉菜单中选择的内容。然后将这些选项作为表单提交。虽然网上有很多关于如何使用直接 javascript 来做到这一点的信息，但我更愿意坚持使用 Clojure。我正在使用 Noir 1.2.1 和 Hiccup 0.3.6。

我目前的尝试看起来像这样（fh 是 hiccup.form-helpers:

```
(defpage "/run-experiment" []
  (common/layout 
    (fh/form-to [:post "/run-experiment"]
      (fh/label "dd1" "Drop Down 1:")
      (fh/drop-down :opts1 '(Opt1A Opt1B) 'Opt1A)
      (fh/label "dd2" "Drop Down 2:")
      (fh/drop-down :opts2 (cond (= 'Opt1A (get-opt1)) '(Opt2A1 Opt2A2)
                                 (= 'Opt1B (get-opt1)) '(Opt2B1 Opt2B2)))))) 
```

（而不是条件，我会用地图实现上述内容，但现在我虽然这更清楚）

我希望能够获取第一个下拉列表中选定元素的文本值，并根据该值显示第二个元素的 html。我试图弄清楚是否有办法使用 Hiccup 来生成我需要添加到第一个下拉列表中的 onclick 参数所需的 Javascript。此外，我试图弄清楚是否有办法访问表单其他元素的 id 值，以便我可以将它们链接到生成的 Javascript/HTML 中。理想情况下，我希望有一些类似于 Hiccup 对 HTML 所做的事情，但对于 Javascript。我认为 Clojurescript 可能是一个不错的候选者，但似乎它可能比我想要的要多。我想我想要的是一个轻量级的库，它可以生成可以与 Hiccup 结合使用的常见 Javascript 任务字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:36:18.637

I know this is ugly, but you can insert javascript as string literals with hiccup:

```
(hiccup.element/javascript-tag "alert(\"hello world\")") 
```

But then why not just write js..

# sql - 从 EXEC(@sql) 中检索值

> ID：10817615
> 
> 赞同：1
> 
> 时间：2012-05-30T13:46:03.107
> 
> 标签：sql, sql-server

问题的标题可能不是最好的，但我找不到另一个，如果模组找到更准确的问题描述，欢迎编辑它。

我需要构建一个动态 sql 查询，它在顶部子句中具有可变参数，例如

```
SELECT top (value) field, field2 FROM table 
```

现在前一个查询实际上是这个查询的子查询

```
SELECT @first = min(field2) FROM (SELECT top (value) field, field2 FROM table) 
```

这意味着我需要`exec(@sql)`构建查询，因为 sql top 不采用动态值，但`exec(@sql)`据我所知，不允许我检索参数。我读过类似的案例来`sp_executesql`检索一个值，但我相信我无法使用顶部子句旁边的动态值构建查询。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:48:15.873

```
declare @top int = 10

select top (@top) field, field2 from table 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:50:26.287

如果您在 sql server 2005 或更高版本上，您可以使用变量来做动态顶部，如果您仍在 2000 上，您可以使用 SET ROWCOUNT 和变量

2005 及更高版本的语法

```
DECLARE @RowCount int -- =25 -- sql server 2008 allows to assign when declaring
SELECT @RowCount = 25 

SELECT TOP (@RowCount) * FROM table1 
```

2000 语法

```
DECLARE @RowCount int 
SELECT @RowCount = 25 

SET ROWCOUNT @RowCount
SELECT  * FROM table1

SET ROWCOUNT 0  -- make sure to set back to 0 otherwise 
                -- queries below will return 25 rows 
```

# asp.net - Tipsy 无法识别 asp.net 中的 d3 元素

> ID：10817622
> 
> 赞同：1
> 
> 时间：2012-05-30T13:46:30.940
> 
> 标签：asp.net, tooltip, d3.js, tipsy

我正在编写一些 ASP.NET 并使用 d3 绘制散点图，然后进行鼠标悬停。

这是受此[示例](http://bl.ocks.org/1373263)启发的。

我已经大大简化了我的图表，所以就是这样：http: [//jsfiddle.net/scottieb/D9Vjg/](http://jsfiddle.net/scottieb/D9Vjg/)

但是当我将该代码放在 ASP.NET 中时，它就不起作用了！如果我放一个按钮并将醉意系在那个按钮上，那么生成工具提示就没有问题了。

```
$('button').tipsy({
   html: false,
            live: true,
            fade: true,
            gravity: 'e',
            title: function () {
                return "test";
            }
        }); 
```

对于它的价值，这是代码：

```
%@ Page Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="Reports_test.aspx.cs"
Inherits="Pricing.App.Web.Reports_test" %

asp:content id="bodyContent" contentplaceholderid="Body" runat="server">
<script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script>
<script type="text/javascript" src="http://onehackoranother.com/projects/jquery/tipsy/javascripts/jquery.tipsy.js"></script>

<div id="slidegraph"></div>
<script type="text/javascript">

//$(function () {
        //var x_data = [1, 1.2, 1.4, 1.6, 1.8]; 
        var x_data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
        var y_data = [2, 4, 6, 7, 8, 9, 10, 12, 14, 15, 19, 20];
        var r_data = [5, 5, 5, 5, 10, 10, 10, 10, 4, 4];
        var c_data = [1, 1, 1, 1, 1, 2, 2, 2, 2, 2];
        var ipg_data = ['MUSTARD', 'MUSTARD', 'MUSTARD', 'MUSTARD', 'MUSTARD', 'MUSTARD', 'MUSTARD', 'MUSTARD', 'MUSTARD', 'MUSTARD'];
        var srp_data = [2, 4, 6, 7, 8, 9, 10, 12, 14, 15, 19, 20];
        var old_data = [2, 4, 6, 7, 8, 9, 10, 12, 14, 15, 19, 20];

        var data = [];

        for (i = 0; i < x_data.length; i++) {
            data.push({ "x": x_data[i], "y": y_data[i], "c": c_data[i], "r": r_data[i]
                    , "ipg": ipg_data[i], "srp": srp_data[i], "old": old_data[i]
            });
        }

        var h = 400;
        var w = 400;
        var margin = 40;

        var x = d3.scale.linear().domain([0, 10]).range([0 + margin, w - margin]),
                y = d3.scale.linear().domain([20, 0]).range([0 + margin, h - margin]),
                r = d3.scale.linear().domain([0, 10]).range([3, 20]),
                c = d3.scale.ordinal().domain([1, 7]).range(["#FF0000", "#00FF00", "#0000FF"
                        , "#FFFF00", "#00FFFF", "#FF00FF", "#FFFFFF"]);

        var vis = d3.select("#slidegraph")
                    .append("svg:svg")
                    .attr("width", w)
                    .attr("height", h);

        vis.selectAll("circle").data(data).enter().append("svg:circle")
        .attr("stroke", "black")
        .attr("cx", function (d) {
            return x(d.x);
        }).attr("cy", function (d) {
            return y(d.y);
        }).attr("fill", "red").attr("r", 15)
;
        $('svg circle').tipsy({
            html: true,
            //live: true,
            //fade: true,
            gravity: 'w',
            title: function () {
                alert("gotcha!");
                return "test";
            }
        });

   //     });

    </script>
/asp:content> 
```

**更新**

它变得更奇怪了。在 IE 中，没有任何效果。在 Firefox 中，我得到了工具提示，但它默认在屏幕的左上角，而不是在圆圈旁边。可悲的是，我无法在我们的开发机器中安装 chrome。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T05:51:07.880

默认情况下，ASP.net 母版页通常具有较旧的 DOCTYPE。删除它并放入 HTML 5 文档类型`<!DOCTYPE html>`。此外，请确保 IE 未设置为以兼容模式显示网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:32:04.410

这只是一个浏览器问题。感谢 paxRoman 播下那颗种子。我让它在 chrome 中完美地工作，在 Firefox 中勉强工作，而在 IE 中则完全没有。这可能不会让任何人感到震惊。

# c# - javascript代码中的ASP方法不起作用

> ID：10817626
> 
> 赞同：0
> 
> 时间：2012-05-30T13:46:53.723
> 
> 标签：c#, asp.net, mono

我们在mono 2.6（debian服务器）下有一个asp应用程序，升级到2.10后出现这种情况：

简单的代码

```
<script language="javascript" type="text/javascript"><!--

var x = "<%= 2+2 %>";

//--></script> 
```

在浏览器中测试时，我发现了这个来源

```
<script language="javascript" type="text/javascript"><!--

x = "<%= 2+2 %>";

//--></script> 
```

**没有解释 asp 标签！**

但如果我删除标签 < script ...> 中的“<!--”和“//-->”，一切正常

```
<script language="javascript" type="text/javascript">

var x = "<%= 2+2 %>";

</script> 
```

这行得通！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:35:23.863

标签`<!--`和`-->`用于注释掉html中的多行，而`//`注释掉单个javascript行，它们会阻止您的代码执行，只需删除它们即可。

# mysql - Sql按最大字段分组和获取行

> ID：10817627
> 
> 赞同：1
> 
> 时间：2012-05-30T13:46:53.713
> 
> 标签：mysql, sql

我有下表：

```
 T1 | T2 | T3
  ------------
  A  | 2  | XY
  A  | 1  | XA
  A  | 4  | XZ
  B  | 2  | XF
  C  | 3  | XA
  C  | 7  | XY
  D  | 1  | XL
  D  | 2  | XF
  E  | 3  | XA
  E  | 6  | XZ
  E  | 2  | XY
  F  | 3  | XL
  F  | 2  | XZ 
```

我正在尝试 GROUP BY T1 并在同一 MAX(T2) 行中获取 MAX(T2) 和 T3；如果没有其他选择，我怎么能得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:00:55.247

```
SELECT * FROM table outertable
INNER JOIN (
    SELECT t1, MAX(t2) as `mx` FROM table GROUP BY t1
) innertable ON outertable.t1 = innertable.t1 AND outertable.t2 = innertable.mx 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:03:49.237

MySQL 不支持分析函数（a-la Oracle 或 MS SQL Server），所以很遗憾你不能（没有第二个查询就可以做到）。

MySQL 查询看起来像这样：

```
SELECT *
FROM YOUR_TABLE YT1
WHERE
    EXISTS (
        SELECT T1
        FROM YOUR_TABLE YT2
        WHERE YT1.T1 = YT2.T1
        GROUP BY T1
        HAVING YT1.T2 = MAX(T2)
   ); 
```

您可以在这个[SQL Fiddle](http://sqlfiddle.com/#!2/c4f75/3)中使用它。

警告：MySQL 不擅长优化 EXISTS。将其转换为 JOIN 以防您的测量显示性能问题..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:01:37.577

```
WITH A AS (
  SELECT T1, MAX(T2) AS T2 FROM MyTable GROUP BY T1
)
SELECT A.T1, A.T2, B.T3
FROM A INNER JOIN MyTable AS B
  ON  B.T1 = A.T1
  AND B.T2 = A.T2 
```

Two caveats: - Yes, it has two selects, but don't underestimate what the server can optimize - My sample assumes T2 is unique within one group of T1

# eclipse-gef - windowbuilder实现中的draw2d和gef类

> ID：10817631
> 
> 赞同：0
> 
> 时间：2012-05-30T13:46:58.190
> 
> 标签：eclipse-gef, windowbuilder, draw2d

我正在浏览windowbuilder的源代码。在[org.eclipse.wb.core](http://dev.eclipse.org/svnroot/tools/org.eclipse.windowbuilder/trunk/org.eclipse.wb.core/)插件中，在[src](http://dev.eclipse.org/svnroot/tools/org.eclipse.windowbuilder/trunk/org.eclipse.wb.core/src/)文件夹旁边，存在[src-draw2d](http://dev.eclipse.org/svnroot/tools/org.eclipse.windowbuilder/trunk/org.eclipse.wb.core/src-draw2d/)和[src-gef](http://dev.eclipse.org/svnroot/tools/org.eclipse.windowbuilder/trunk/org.eclipse.wb.core/src-gef/)文件夹，其中包含 eclipse.gef 和 eclipse.gef.draw2d 的相同（或至少非常相似）实现.

他们为什么不直接导入这些插件，而是重复代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:19:19.080

如果你查看那些目录中的源代码，你会发现它不是 draw2d 或 GEF，而是它们自己以更简单的方式实现了相同的功能。例如，GEF 抽象`Command`类有 11 个方法和两个构造函数，而“新”WB 抽象`Command`只有一个方法：execute。

我认为他们这样做可能是因为尽管 GEF 令人难以置信，但它也很大而且很复杂，因此他们决定重新实现它的淡化版本。

# ruby-on-rails - 使用 net-ldap 从 AD 组中删除成员

> ID：10817632
> 
> 赞同：3
> 
> 时间：2012-05-30T13:47:10.993
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, active-directory, ldap

从 AD 组中删除用户的正确方法（步骤）是什么？在这种情况下，我在 Rails 项目中使用 net-ldap gem。

最初，我打算修改用户的“memberof”值（从“memberof”字段中的组 DN 数组中删除该特定组），但我了解到“memberof”是只读的。

我对 LDAP 的概念有点陌生，所以我不确定标准做法是什么。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T18:10:56.900

我知道这已经有一年多了，但我发帖是为了后代，因为这会在使用 Ruby net-ldap 从 Active Directory 中的组中搜索删除用户时出现。

```
@ldap.open do |ldap|
  ldap.modify :dn => "CN=your group,OU=something,DC=domain,DC=org", :operations => [[:delete, :member, "CN=Johnny Doe,OU=something,DC=domain,DC=org"]]
end 
```

有两个“陷阱”。首先，使用 Active Directory，您无法管理用户的组，您只能管理组的成员资格。其次，":operations" 必须是操作元组的数组。

# iphone - 如何用 GCD 制作“连续”动画？

> ID：10817633
> 
> 赞同：10
> 
> 时间：2012-05-30T13:47:14.753
> 
> 标签：iphone, ios, core-animation, grand-central-dispatch

当远程通知到来时，我正在尝试`UIView`在屏幕上自定义显示 5 秒。

**像这样的代码：**

```
//customView.alpha = 1.0 here
[UIView animateWithDuration:1 animations:^{
                                  customView.alpha = 0.3;
                              } 
                              completion:^(BOOL finished){
                                  // remove customView from super view.
                              }]; 
```

**问题和我需要什么**

但是在某些情况下，一些通知可能会在很短的时间间隔内出现，其中几个`customView`可能同时动画，一个可能覆盖其他。

我希望这些动画一个接一个地执行，这样它们就不会发生冲突。

**假设但失败**

```
//(dispatch_queue_t)queue was created in other parts of the code
dispatch_sync(queue, ^{
    [UIView animationWithDuration:animations:...];
}); 
```

在 GCD 队列中制作动画后，我得到了与我使用的原始代码相同的结果，它没有使用 GCD。动画仍然存在冲突。

**顺便说一句**，我听说***涉及 UI 的动画或任务***应该始终在主线程上运行，但在我的第二个代码中，动画看起来很流畅。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:48:54.297

如果每次都运行相同的动画，那么您可以只存储动画应该运行的次数（与动画的重复计数属性不同）。

当您收到远程通知时，您增加计数器并调用动画方法，如果计数器正好是一。然后在 methodThatAnimates 中，您在完成块中递归调用自己，同时每次减少计数器。它看起来像这样（带有伪代码方法名称）：

```
- (void)methodThatIsRunWhenTheNotificationIsReceived {
    // Do other stuff here I assume...
    self.numberOfTimesToRunAnimation = self.numberOfTimesToRunAnimation + 1;
    if ([self.numberOfTimesToRunAnimation == 1]) {
        [self methodThatAnimates];
    }
}

- (void)methodThatAnimates {
    if (self.numberOfTimesToRunAnimation > 0) {
        // Animation preparations ...
        [UIView animateWithDuration:1 
                         animations:^{
                                  customView.alpha = 0.3;
                         } 
                         completion:^(BOOL finished){
                                  // Animation clean up ...
                                  self.numberOfTimesToRunAnimation = self.numberOfTimesToRunAnimation - 1;
                                  [self methodThatAnimates];
                         }];
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T20:58:54.077

使用队列顺序提交动画是行不通的，因为开始动画的方法会立即返回，然后将动画添加到动画树中，稍后再执行。队列中的每个条目将在几分之一秒内完成。

如果您的每个动画都在同一个视图上运行，那么默认情况下，系统应该让每个动画在开始下一个动画之前完成运行。

引用 UIViewAnimationOptionBeginFromCurrentState 选项值的文档：

> UIViewAnimationOptionBeginFromCurrentState
> 
> 从与已经进行中的动画关联的当前设置开始动画。 **如果此键不存在，则允许任何飞行中的动画在新动画开始之前完成。**如果另一个动画不在飞行中，则此键无效。

如果你想链接一系列动画，我会这样做：

创建一个可变的动画块数组。（代码块是对象，可以添加到数组中。）编写一个方法，将顶部动画块拉出数组（并将其从数组中删除）并使用 animateWithDuration:animations:completion 提交它，其中完成方法简单再次调用该方法。使代码在从数组中拉出一个项目之前断言一个锁，并在删除该项目后释放锁。

然后，您可以编写响应传入通知的代码，方法是断言您的动画数组锁、将动画块添加到锁并释放锁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:56:34.753

您可以使用（非）并发[NSOperationQueue](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/NSOperationQueue_class/)来“逐步”执行动画

> NSOperationQueue 类管理一组 NSOperation 对象的执行。被添加到队列后，操作将保留在该队列中，直到它被显式取消或完成其任务的执行。队列中的操作（但尚未执行）本身根据优先级和互操作对象依赖性进行组织，并相应地执行。一个应用程序可以创建多个操作队列并向其中的任何一个提交操作。
> 
> 操作间的依赖关系为操作提供了绝对的执行顺序，即使这些操作位于不同的操作队列中。直到其所有相关操作都完成执行后，才认为操作对象已准备好执行。对于准备好执行的操作，操作队列总是执行相对于其他准备好的操作具有最高优先级的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T13:55:06.777

我建议在完成块中向触发动画的任何对象发送一条消息。然后，您可以让该对象将通知本身排队，并在每次收到消息时启动下一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-26T22:49:10.980

[ProcedureKit](https://github.com/ProcedureKit/ProcedureKit "程序包")（基于`NSOperation`）是现成解决方案的一个示例，但仅将其用于动画是相当重量级的。

我`Operation`用来排队动画弹出窗口和其他东西的子类：

```
class SerialAsyncOperation: Operation {

    private var _started = false

    private var _finished = false {
        willSet {
            guard _started, newValue != _finished else {
                return
            }
            willChangeValue(forKey: "isFinished")
        }
        didSet {
            guard _started, oldValue != _finished else {
                return
            }
            didChangeValue(forKey: "isFinished")
        }
    }

    private var _executing = false {
        willSet {
            guard newValue != _executing else {
                return
            }
            willChangeValue(forKey: "isExecuting")
        }
        didSet {
            guard oldValue != _executing else {
                return
            }
            didChangeValue(forKey: "isExecuting")
        }
    }

    override var isAsynchronous: Bool {
        return true
    }

    override var isFinished: Bool {
        return _finished
    }

    override var isExecuting: Bool {
        return _executing
    }

    override func start() {
        guard !isCancelled else {
            return
        }
        _executing = true
        _started = true
        main()
    }

    func finish() {
        _executing = false
        _finished = true
    }

    override func cancel() {
        _executing = false
        _finished = true
        super.cancel()
    }
} 
```

使用示例：

```
// Setup a serial queue
private lazy var serialQueue: OperationQueue = {
    let queue = OperationQueue()
    queue.maxConcurrentOperationCount = 1
    queue.name = String(describing: type(of: self))
    return queue
}()

// subclass SerialAsyncOperation
private class MessageOperation: SerialAsyncOperation {

    // ...

    override func main() {
        DispatchQueue.main.async { [weak self] in
            // do UI stuff

            self?.present(completion: {
                self?.finish()  
            })
        }
    }

    func present(completion: @escaping () -> Void) {
        // do async animated presentation, calling completion() in its completion
    }

    func dismiss(completion: @escaping () -> Void) {
        // do async animated dismissal, calling completion() in its completion
    }

    // animated cancellation support
    override func cancel() {
        if isExecuting {
            dismiss(completion: {
                super.cancel()
            })
        } else {
            super.cancel()
        }
    }
} 
```

`finish()`基本上，只需将此操作添加到串行队列中，并记住在完成异步操作时调用。您还可以通过一次调用取消串行队列上的所有操作，这些操作将被优雅地解除。

# javascript - NodeJS 应用程序布局和变量传递

> ID：10817636
> 
> 赞同：1
> 
> 时间：2012-05-30T13:47:36.233
> 
> 标签：javascript, node.js

大家好，我在应用程序布局方面遇到了一个小问题。我正在像这样设置我的控制器。

```
ApplicationController = function(_app) {
    this.app = _app;
    console.log(this.app); //this works
};

ApplicationController.prototype.index = function(req, res, next) {
    console.log(this.app); //this is undefined
    res.json("hello");
};

module.exports = function(app) {
    return new ApplicationController(app);
}; 
```

在我的路线文件中，我正在这样做。

```
module.exports = function(app) {

    //require controllers
    var Application = require('./controllers/ApplicationController')(app);       

    //define routes
    app.get('/', Application.index);
    app.get('/blah', Application.blah);

    return app;
}; 
```

我传递的 app 变量没有出现在其他实例方法中。我失踪有什么原因吗？谢谢你的帮助。

在过去，我已经像这样设置了我的控制器。

```
module.exports = function(app) {

    var controller = {

            //app is defined
            res.render('index', {
                title: "Index"
            });
        }
    };

    return controller;
}; 
```

但我更喜欢这种另一种模式，而且我更好奇为什么它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:52:00.900

尝试更改这些行：

```
app.get('/', Application.index);
app.get('/blah', Application.blah); 
```

至：

```
app.get('/', Application.index.bind(Application));
app.get('/blah', Application.blah.bind(Application)); 
```

否则，您的路线不会在您的`Application`实例的上下文中被调用。

# jquery - Jquery：如何将图像叠加在一起？

> ID：10817644
> 
> 赞同：1
> 
> 时间：2012-05-30T13:48:03.900
> 
> 标签：jquery, css, append, z-index

在下面的代码中，我有一个构建衬衫的页面。当用户单击一个选项（“男/女”）时，“#shirt”部分通过将 PNG 图像叠加在一起来显示构造的衬衫。例如，选择基色“蓝色”将显示蓝色衬衫的图像。然后，选择“罗纹”的身体缝合将在添加罗纹细节的蓝色衬衫顶部放置一个图像。现在，我的问题是每个新图像都会替换以前的图像。其他一切正常（响应先前选择的选项而出现的选项）。

```
<div id="gender" class="diy-box">
    Pick Gender<br>
    <input type="radio" name="gender" data-id="" value="male" /><label>Male</label><br>
    <input type="radio" name="gender" data-id="" value="female" /><label>Female</label>

</div>

<section id="displaysection">

    <div id="male" class="desc gender diy-box">

        Pick Body<br>
        <input type="radio" name="male" data-id="105" value="" /><label>Blue</label><br>
        <input type="radio" name="male" data-id="120" value="" /><label>Black</label><br>
        <input type="radio" name="male" data-id="145" value="" /><label>White</label>

    </div>

    <div id="female" class="desc gender diy-box">

        Pick Body<br>
        <input type="radio" name="female" data-id="107" value="" /><label>Blue</label><br>
        <input type="radio" name="female" data-id="211" value="" /><label>Black</label><br>
        <input type="radio" name="female" data-id="212" value="" /><label>Pink</label>

    </div>

</section>

<div id="body_stitching" class="diy-box">

    Body Stitching<br>
    <input type="radio" name="body_stitching" data-id="" value="body_stitching_plain" /><label>Plain</label><br>
    <input type="radio" name="body_stitching" data-id="" value="body_stitching_rib" /><label>Rib</label>

</div>

<section id="displaysection">

    <div id="body_stitching_plain" class="desc body_stitching diy-box">

        Plain<br>
        <input type="radio" name="body_stitching_plain" data-id="324" value="" /><label>Blue</label><br>
        <input type="radio" name="body_stitching_plain" data-id="325" value="" /><label>Red</label>

    </div>

    <div id="body_stitching_rib" class="desc body_stitching diy-box">

        Rib<br>
        <input type="radio" name="body_stitching_rib" data-id="" value="black" /><label>Black</label><br>
        <input type="radio" name="body_stitching_rib" data-id="" value="green" /><label>Green</label>

    </div>

</section>

<div class="clear"></div>

<div id="shirt"></div>

<div id="pricefield" style="float:right"></div>

<script>

$(document).ready(function() {
    $("div.desc").hide();

    var data = {
        "105" : { img: "http://oceandrive.localhost/images/diy-images/105.png", label: "color 1", price: "100" },
        "120" : { img: "http://oceandrive.localhost/images/diy-images/120.png", label: "color 2", price: "110" },
        "145" : { img: "http://oceandrive.localhost/images/diy-images/145.png", label: "color 3", price: "120" },
        "107" : { img: "http://oceandrive.localhost/images/diy-images/107.gif", label: "color 4", price: "130" },
        "211" : { img: "http://oceandrive.localhost/images/diy-images/211.png", label: "color 5", price: "140" },
        "212" : { img: "http://oceandrive.localhost/images/diy-images/212.png", label: "color 6", price: "150" },
        "324" : { img: "http://oceandrive.localhost/images/diy-images/324.png", label: "color 7", price: "160" },
        "325" : { img: "http://oceandrive.localhost/images/diy-images/325.png", label: "color 8", price: "170" },
    };

    $('input[name]').click(function() {

        var value = $(this).val();   // pics the value of the radio button

        if(value=='male' || value=='female') {
            $("div.gender").hide('slow');
            $("div.gender input:radio").removeAttr('checked');
        }

        if(value=='body_stitching_plain' || value=='body_stitching_rib') {
            $("div.body_stitching").hide('slow');
            $("div.body_stitching input:radio").removeAttr('checked');
        }

        $("#" + value).show('slow');  // addresses the div with the radio button value picked

        if(this.checked) {

            //var value = $(this).val();
            var value = $(this).data('id');

            if (data[value] != undefined)
            {

                var html = '';
                html = html + '<img style="z-index:2;" src="'+data[value].img+'"/>';
                $('#shirt').html(html);

                var html = '';
                html = html + '- '+data[value].label+' - '+data[value].price+' NT<br>';
                $('#pricefield').html(html);

            }

        }

    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:39:25.480

首先，您需要决定您的图像应该以什么顺序出现。例如，从您的代码中，我会说您有两个级别（如果需要，您可以添加更多级别）：

1.  根据
2.  车身缝合

其次，将每个级别分配给一个 z-index 并`<div>`为每个级别创建元素。这些`<div>`'s 的样式应使其定位是绝对的，如下所示：

```
<div id="baseImage" style="z-index:1; position: absolute;"></div>
<div id="stitchImage" style="z-index:2; position: absolute;"></div>
... 
```

我可能还会指定每个的宽度/高度`<div>`以匹配您的图像。

最后，使用 jQuery 将每个元素定位`<div>`在基础图像之上。

```
$("#stitchImage").offset($("#baseImage").offset()); 
```

然后，当您需要替换图像时，只需使用您拥有的代码：

```
$("#stitchImage").html("<img src='" + src + "' />"); 
```

请注意，您必须使用空白占位图像，以便用户在尚未选择较高层时可以看到较低层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:57:53.177

而不是使用：

```
$('#shirt').html(html);
('#pricefield').html(html); 
```

使用`.append(...)`方法。

```
$('#shirt').append(html);
('#pricefield').append(html); 
```

[jQuery .append()](http://api.jquery.com/append/)

# c# - 希望对不同的页面使用相同的 Web 方法。

> ID：10817646
> 
> 赞同：0
> 
> 时间：2012-05-30T13:48:08.097
> 
> 标签：c#, asp.net, jquery

我需要在其中一个网页中有一个自动完成的文本框。我正在后面的代码中对 Web 方法进行 jQuery Ajax 调用，以将数据发送到该文本框。那工作正常。但是我必须在不同的网页中具有相同的功能。

如何在不复制代码的情况下使用相同的 Web 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:54:09.810

创建 Web 服务将允许您从页面背后的代码中重构代码，并在您可能需要的任何其他页面中使用它。

# assembly - 屏蔽取消后能否接收屏蔽中断？

> ID：10817654
> 
> 赞同：3
> 
> 时间：2012-05-30T13:48:29.770
> 
> 标签：assembly, linux-kernel, kernel, interrupt

如果中断被“cli”指令屏蔽，那么在“sti”指令之后，cpu 是否可以接收到相同的中断（不是同一源的中断）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:06:26.317

在几乎所有合理的中断应用程序中，屏蔽中断就是这样做的；取消屏蔽将导致 CPU 接受任何未决的中断请求。

如果不是这种情况，中断掩码的使用会导致一些中断由于狭窄的时序分裂而丢失（软件在新请求出现的同时禁用掩码；你不想要不同的行为只是因为其中一个事件发生在另一个之前的飞秒）。

如果在屏蔽了一类中断（“all”或“level7”或您的硬件支持的任何中断）之后，您想要一个特定的中断源消失，您的程序应该在屏蔽中断时采取明确的措施来告诉硬件忽略/确认该中断。

如果我们颠倒这个想法，你可以得到一些非常漂亮的操作系统/中断架构。有时处理极高优先级的中断很有用，但希望将开销保持在低水平。因此，在可能的情况下经常使用一个便宜的技巧，即让高优先级中断例程只做一小部分工作，然后通过在该级别*引发*中断来将其余工作降低到较低优先级。一些硬件使这成为可能。如果任何级别的中断例程完成了应该导致任务重新调度的工作，这将特别方便；它只是发出一个低优先级中断的信号，其服务程序恰好是调度程序。

# javascript - TaffyDB 和文档修改功能

> ID：10817655
> 
> 赞同：0
> 
> 时间：2012-05-30T13:48:30.430
> 
> 标签：javascript, database, offline

TaffyDb 是否修改了 javascript 文档中的 Json 对象，还是只是临时修改？我可以用它来永久存储和修改数据吗？（我有一个网络服务器，我只想制作一个离线网络应用程序，其中包含我稍后将解析到数据库的一些信息）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:55:02.857

TaffyDB 默认不存储数据。您可以使用 .store() 方法将数据存储在浏览器本地存储中。否则，您将需要滚动您自己的基于 cookie 的存储或连接到后端服务器来存储您的更改。

# java - 解码密码或更复杂的方式为用户发送密码？

> ID：10817658
> 
> 赞同：1
> 
> 时间：2012-05-30T13:48:39.813
> 
> 标签：java, encoding, security, decoding, string-decoding

我有一组用户。他们每个人都有相同的用户名密码组合。我的数据库中有加密的数据（见下面的代码）。问题是，处理整个用例的最佳和最安全的方法是什么？我只想在电子邮件中发送用户名 - 密码组合，向每个用户发送相同的电子邮件。我应该只是解码密码还是保存这段时间的文本密码，然后用户发送电子邮件并在此之后删除文本密码，或者您对此有什么想法？

我的软件中没有那么无价的数据，但仍然......

```
private Users hashPasswordBase64(Users currentUser) {

    try {
        MessageDigest md = MessageDigest.getInstance("SHA-256");
        String text = currentUser.getPassword();
        md.update(text.getBytes("UTF-8"));
        byte[] digest = md.digest();

        currentUser.setPassword(Base64.encode(digest));
    } catch (NoSuchAlgorithmException ex) {
        Logger.getLogger(UsersController.class.getName()).log(Level.SEVERE, null, ex);
    } catch (UnsupportedEncodingException ex) {
        Logger.getLogger(UsersController.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:24:57.237

Betaaminos 几乎奠定了指导方针。

我建议将密码服务器端以编码格式存储，并且仅在有人尝试以个人身份登录时对其进行解码。

另一种选择（假设这是一个小规模的事情）是发送一个带有大量垃圾邮件字符的混淆密码（例如这里：http: [//pastebin.com/hT1AVMUp](http://pastebin.com/hT1AVMUp)）（这里是：[http://pastebin。 com/9He1sk2m](http://pastebin.com/9He1sk2m)）并让他们在客户端对其进行解码。它不会击败任何人类，但它应该使解码程序变得更加困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:53:19.460

我建议即时解码密码、发送电子邮件并处理变量。存储密码只会让木马更容易检索它。

除此之外，我建议提供用户在第一次登录后需要更改的密码。这样，用户就可以选择容易记住的密码，并且发送明文密码不会有任何问题，因为这在一次使用后就失效了。

# javascript - 使用 Jplayer 播放 pls 文件

> ID：10817659
> 
> 赞同：0
> 
> 时间：2012-05-30T13:48:52.473
> 
> 标签：javascript, radio, html5-audio, jplayer, shoutcast

我目前正在尝试从 ShoutCast 获取无线电流以与 JPlayer 一起玩，但没有成功。

[理想情况下，我想要一个像http://yp.shoutcast.com/sbin/tunein-station.pls?id=1377246](http://yp.shoutcast.com/sbin/tunein-station.pls?id=1377246)这样的 pls 文件来与 JPlayer 一起玩。

这是我当前的代码：

```
<script type='text/javascript'>//<![CDATA[ 
$(function(){
$("#jquery_jplayer_1").jPlayer({
swfPath: "js/Jplayer.swf",
ready: function () {
    $(this).jPlayer("setMedia", { mp3: "http://yp.shoutcast.com/sbin/tunein-station.pls?id=1377246" });
},
supplied: "mp3"
});

});//]]>  

</script> 
```

不确定这是否可能，但我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:03:00.117

`.pls`文件是一个播放**列表**，而不是任何类型的实际流。使用您喜欢的文本编辑器打开该文件以查看实际流的 URL。

在播放它链接到的音频之前，您必须解析此文件。

# objective-c - SMIME 解密

> ID：10817660
> 
> 赞同：0
> 
> 时间：2012-05-30T13:48:53.447
> 
> 标签：objective-c, security, smime

我目前正在使用用户 A 的证书来加密发送给用户 B 的电子邮件，用户 B 仍然能够解密它们。

这怎么可能？USER A 和 USER B 拥有同一个 CA 颁发的不同证书。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:57:09.860

电子邮件加密主要使用公钥加密完成。这意味着发送者有一个带有接收者公钥的证书，用于加密正在发送的消息。接收者将收到加密的消息并使用她/他的私钥解密消息。以这种方式加密的消息将只对接收者可见，而其他不拥有私钥的接收者则看不到。加密/解密的配置通常保存在 Thunderbird 等电子邮件客户端中（在设置下！）

[http://en.wikipedia.org/wiki/Email_encryption](http://en.wikipedia.org/wiki/Email_encryption)

您使用的证书必须是属于接收者的公钥，或者是可以被任何证书解密的通用密钥，或者根本不需要真正的加密密钥。

# gcc - 为什么 mingw g++ 编译器会导致错误的链接结果？

> ID：10817662
> 
> 赞同：1
> 
> 时间：2012-05-30T13:49:00.157
> 
> 标签：gcc, linker, mingw

我在 linux 下开发了一些（更大的）代码。一旦我意识到我在 Windows 下需要它，我就在 linux 下安装了一个交叉编译器，一切顺利。

现在应该在不需要虚拟机的情况下进一步管理代码。因此我安装了mingw并尝试在windows下编译代码。我得到一个没有任何警告或类似警告的 DLL。

但是：当我尝试使用 DLL（在 Matlab 中绑定它）时，我收到一个关于找不到模块的错误。使用 Dependency walker 我得到一个错误

```
At least one module has an unresolved import due to a missing export function in an implicitly dependent module. 
```

我看到，例如`InterlockedDecrement`kernel32.dll 中的函数是红色的（缺失）。在 mingw 安装中，我找到了一个 libkernel32.a，它根据这个函数有两个函数（来自 的输出`nm`）：

```
00000000 T _InterlockedDecrement@4
00000000 I __imp__InterlockedDecrement@4 
```

到目前为止，这看起来相当不错。里面`c:\Windows\System32\kernel32.dll`有一个函数根据`InterlockedDecrement`。`pexport`

所以我的问题是：这个错误来自哪里？我做错了什么？

# android - SharedPreferences 和 Application 类

> ID：10817664
> 
> 赞同：0
> 
> 时间：2012-05-30T13:49:03.073
> 
> 标签：android, android-preferences

我对我的应用程序有很多共同的偏好（主要与颜色定制有关），我不确定在运行时存储/使用它们的最佳方法是什么。

目前我在每个活动/片段中都在做这样的事情（或多或少的偏好取决于视图）：

```
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getActivity());
int buttonbg = settings.getInt("buttonmenu_bg", 0);
int buttontxt = settings.getInt("buttonmenu_txt", 0);
int headerclr = settings.getInt("header", 0); 
```

然后使用这些设置显示中的各种颜色。每次都必须调用 PreferenceManager 并经历所有这些，这似乎是一个很大的开销。

所以我开始考虑创建一个应用程序类，一次性读取首选项并使用活动/片段中应用程序类的静态变量来设置显示。

我的问题是，在我进一步冒险进入 Application 类路径之前，我应该考虑这样做有什么缺点或陷阱吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:00:30.757

如果您没有使用这么多静态变量，那么这可能不会影响您的应用程序。但是当您的应用程序进入后台并且在前面运行的应用程序需要内存时，可能会出现静态变量的问题，因此它可能会清除您的静态数据，所以当您将转到您的应用程序，您可能找不到任何东西（null）来代替静态数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:17:34.877

您没有设置显示颜色有什么特别的原因`res/values/styles.xml`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:23:22.987

[Application](http://developer.android.com/reference/android/app/Application.html)类的目的是存储全局应用程序状态或数据（当然在内存中），因此您的方法是正确的。我已经多次使用它，它就像一个魅力。

我通常做的是创建一个 Map 成员变量并提供获取和放入值的方法，如下所示：

```
package com.test;
...
...
public class MyApp extends Application{

    private Map<String, Object> mData;

    @Override
    public void onCreate() {
        super.onCreate();
        mData = new HashMap<String, Object>();
    }

    public Object get(String key){
        return mData.get(key);
    }
    public void put(String key,Object value){
        mData.put(key, value);
    }
} 
```

然后从我的活动中，我只是做`((MyApp) getApplication()).get("key")`or `((MyApp) getApplication()).put("key",object)`。另外，不要忘记`android:name`在清单文件中的`application`标记下设置属性：

```
<application
        ...
        ...
        android:name="com.test.MyApp"> 
</application> 
```

# javascript - onchange submit 当表单尚未提交但无法正常工作时提交

> ID：10817666
> 
> 赞同：0
> 
> 时间：2012-05-30T13:49:07.830
> 
> 标签：javascript, forms, iframe

我有一个包含 2 个 iframe 的页面：一个 iframe 由一个 html 表单组成，另一个是由表单输出控制的图形。我已经包含了一个 javascript 代码，当我在下拉菜单中更改我的选择时，它会自动提交，从而使图表适应新参数。当我已经手动提交表单然后更改参数时，这非常有效。但是，当我之前没有输出图表并且我更改了参数时，第二个 iframe 会显示表单的副本而不是图表。有人可以帮我解决这个问题吗？我似乎找不到问题。这是我用于表单的代码的一部分：

```
<select id="Graf1" onchange="makeChoice5();updateSelect(this,'Graf2');this.form.submit();" name="graf1">
    <option value="other">---------- Kies ---------- </option>
    <option value="1">Temperatuur</option>
    <option value="2">Relatieve vochtigheid</option>
    <option value="3">Straling</option>
    <option value="4">Dendrometer 1</option>
    <option value="5">Dendrometer 2</option>
    </select> 
```

这是手动提交按钮的代码：

```
<input type="submit"
style="
font-family: verdana;
font-weight: bold;"
value="Bekijk Grafiek" onclick="action='grafiek.php'; this.form.target='grafiek';return true;" >
</br>
<input type="submit"
style="
font-family: verdana;
font-weight: bold;"
value="Printvriendelijke versie" onclick="action='grafiekPrint.php'; this.form.target='grafiek';return true;" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:54:07.783

如果没有您的整个表单代码和 javascript，很难说，但我猜您最初没有设置目标和操作。因此，当您通过 onchange 提交它时，它无处可去。但是，当您单击按钮时，您会设置表单目标和操作，因此将来对您的选择所做的更改将起作用，这似乎正是您所经历的。因此，请尝试将其放在您的表单上：

```
<form target="grafiek"..> 
```

并在页面加载时将您的操作变量设置为您希望它执行的默认值。

# python - 子图背景渐变色

> ID：10817669
> 
> 赞同：5
> 
> 时间：2012-05-30T13:49:16.687
> 
> 标签：python, colors, matplotlib

如何在 matplotlib 中创建一些渐变颜色，然后将子图的参数设置`axisbg`为此？

```
f = plt.figure()
ax = f.add_subplot(111, axisbg='green') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:59:03.820

这不使用`axisbg`参数，但可以做你想做的事。

有一个用于渐变的 matplotlib 示例：http: [//matplotlib.sourceforge.net/examples/pylab_examples/gradient_bar.html](http://matplotlib.sourceforge.net/examples/pylab_examples/gradient_bar.html)。我自己尝试过，这个简化版本给了我一个绿白色渐变背景（出于某种原因，在交互式 python shell 中执行此操作时，我需要调用`draw()`以显示图像）：

```
import matplotlib.pyplot as mplt  
fig = mplt.figure()  
ax = fig.add_subplot(111)  
mplt.plot([1,2,3],[1,2,1])  
plotlim = mplt.xlim() + mplt.ylim()  
ax.imshow([[0,0],[1,1]], cmap=mplt.cm.Greens, interpolation='bicubic', extent=plotlim)  
mplt.draw() 
```

为不同的渐变选择另一个颜色图。也可以在没有`'bicubic'`插值的情况下工作，但它更丑陋。

# iphone - 如何允许在 iPad 应用程序中突出显示文本？

> ID：10817670
> 
> 赞同：1
> 
> 时间：2012-05-30T13:49:23.717
> 
> 标签：iphone, ios, ipad, highlighting, core-text

我正在制作一个 iPad 杂志应用程序，用户可以在其中突出显示任意数量的文本。每次加载该文章时，都需要保存并显示这些亮点。

我可以用 CoreText 以某种方式做到这一点（目前我正在使用它来允许多列格式）？

我注意到如果文本中有图像，则在 UIWebView 中使用 HTML 选择文本将无法正常工作。

有人有什么建议吗？

非常感谢，

-克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:21:36.853

CoreText 没有内置支持选择或“复制和粘贴”，但您可以使用一些 CoreText 函数制作自己的选择引擎。

看看这个其他主题帖子。

[核心文本 - 在 iPhone 中选择文本？](https://stackoverflow.com/questions/7979592/is-it-possible-to-select-the-text-rendered-by-core-text-in-iphone/11005546#11005546)

# html - 如何更改 html 文件字段的行为和样式？

> ID：10817673
> 
> 赞同：0
> 
> 时间：2012-05-30T13:49:33.790
> 
> 标签：html, css, file-upload

我想创建一个显示`input type=text`（显示文件名）的文件上传字段，上传按钮替换为自定义图像。

像这样的东西：

![在此处输入图像描述](../Images/26304a16c0130a8974c5412db6cf5262.png)

一个没有任何黑客的简单解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:54:17.667

由于浏览器如何处理文件上传字段，您将找不到任何不是黑客的解决方案。出于安全考虑，它们限制了您可以对它们进行的样式设置，以防止恶意网站使它们看起来不像。您的限制程度因浏览器而异，但如果不使用 JavaScript 和 hacky 技巧，您将无法通过直接的 HTML/CSS 设置您喜欢的文件上传字段样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:56:49.107

```
 <INPUT type="image" class="myButton" value="">

.myButton {
background:url(YOUR IMAGE) no-repeat;
cursor:pointer;
width: 200px;
height: 100px;
border: none;
} 
```

使用按钮

```
<button type="submit" style="border: 0; background: transparent">
<img src="/images/Btn.PNG" width="90" heght="50" alt="submit" /> 
</button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-08T20:28:34.103

如果您使用的是 jQuery，请查看此插件 - [https://github.com/ajaxray/bootstrap-file-field](https://github.com/ajaxray/bootstrap-file-field)

这个小插件会将文件输入字段显示为引导按钮（带有可配置的类），在所有浏览器中都类似，并且会漂亮地显示选定的文件名（或选择错误）。

此外，您可以使用简单的数据属性或 JS 设置来设置各种限制。例如，`data-file-types="image/jpeg,image/png"`将限制选择除 jpg 和 png 图像之外的文件类型。

# sql-server-2008 - 快速行的 SQL Server 查询提示？

> ID：10817675
> 
> 赞同：0
> 
> 时间：2012-05-30T13:49:41.617
> 
> 标签：sql-server-2008

我有一个带有存储过程的 MSSQL 2008 数据库，它返回一个包含 1-10 行和 5 列的结果集。我做了所有我能想到的优化，而且我的查询计划到处都显示出良好的索引搜索。获取结果集的 .net 4.0 代码使用老式的 ado.net SqlDataReader 来努力从读取数据中获得每毫秒的速度（不间接来自 EF 或 LINQtoSQL 等）。我试图了解“快速行”查询提示是否真的会让我更快。我没有足够的系统来测试事情，而且关键的 Bing/Google 搜索结果相对枯燥，所以我正在寻找有关这方面的任何见解。

谢谢。

# forms - Tomcat 6 Ssl 和 Form 身份验证并排

> ID：10817683
> 
> 赞同：2
> 
> 时间：2012-05-30T13:50:03.160
> 
> 标签：forms, authentication, tomcat, ssl

是否可以在 Tomcat 6.xxx 中并排使用两种身份验证方法？

故事：现在我的应用程序在端口 80 和 443 上运行。在 443 连接器中有 clientAuth="want" 参数。如果客户超过 80 岁，则不需要证书。但是当客户端超过 443 并且客户端在读卡器中有智能卡时，即使客户端不想登录，也会自动询问证书。

对于使用用户证书登录，我有 FormFallBack 身份验证器，这意味着如果客户端不发送证书（他在读卡器中没有智能卡）或身份验证器中的认证失败，身份验证器将定向到表单，在那里他可以使用密码和用户名登录. 我的英语不是很好，所以这里是类似系统的更好概述：[http ://wiki.apache.org/tomcat/SSLWithFORMFallback](http://wiki.apache.org/tomcat/SSLWithFORMFallback)

但是如果浏览器多次询问证书，如果用户不想使用智能卡登录（但他在阅读器中有它），那么询问用户证书的过程对用户来说很烦人，而是他想用用户名和密码登录。

那么是否有以下选项：我有登录页面，其中有用户名和密码字段以及登录按钮。如果用户按下登录按钮，他将使用用户名和密码登录（定向到表单验证器）。

但在同一页面中有“使用智能卡登录”按钮。如果他按下此按钮，服务器会请求用户证书并将其提供给身份验证器。

希望你能理解问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:07:16.310

如果您通过 servlet 会话保持身份验证状态，您可以通过提供两个不同的按钮（或链接）来提供通过表单或客户端证书登录。

我在这里假设您可以通过客户端证书`/login/form`获得表单和身份验证等路径。`/login/cert`

`/login/cert`在使用 SSL/TLS 重新协商访问时，您可以按需触发客户端证书身份验证。为此，请`clientAuth="false"`在连接器配置中使用，但在 webapp 中对该路径设置安全约束，使用`<auth-method>CLIENT-CERT</auth-method>`: 这将在需要时触发重新协商。

为此，您需要[支持 RFC 5746](http://www.oracle.com/technetwork/java/javase/documentation/tlsreadme2-176330.html)（Oracle Java 6 r22 或更高版本）的 JRE 版本，并且您的客户端也应该支持它。现代版本的浏览器/操作系统现在应该支持这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:50:56.937

我相信您将不得不编写自己的 Tomcat 身份验证器来理解这些要求。

这实际上可能是不可能的，因为您要求 AFAICT 能够基于每个用户重新配置 SSL 连接器的行为，并且您无法在 SSL 协商发生之前为用户配置连接器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T22:03:22.497

请参阅 Google 代码中的 AuthenticRoast 项目。它确实做到了这一点以及更多。

# qt - Qt QWebView加载错误链接一些SSL库？

> ID：10817686
> 
> 赞同：1
> 
> 时间：2012-05-30T13:50:15.770
> 
> 标签：qt, plugins, ssl, qwebview

所以我正在用 Qt 创建一个迷你浏览器并使用`QWebView`. 它可以加载一些页面，但是其中一些页面存在 SSL 问题，因为我收到了以下错误：

```
QSslSocket: cannot call unresolved function SSLv23_client_method
QSslSocket: cannot call unresolved function SSL_CTX_new
QSslSocket: cannot call unresolved function SSL_library_init
QSslSocket: cannot call unresolved function ERR_get_error 
```

我以前遇到过库和 的问题`QTPlugins`，并且在喜欢静态插件（更具体地说是图像格式）方面没有任何成功。我不知道如何解决这些问题，因为我对 QT 框架还很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:43:55.933

这个问题似乎只出现在 Linux 平台上，当您安装`QtCreator`.

我没有找到任何解决方案或文档。

但是问题不会出现在 Windows 上，并且 QWebView 对所有功能都适用。

# android - Android Facebook SDK 对话框在关闭前冻结

> ID：10817689
> 
> 赞同：0
> 
> 时间：2012-05-30T13:50:23.383
> 
> 标签：android, facebook, dialog

我有一个小问题，谷歌没有帮助我......

我集成在我的应用程序 facebook sdk 中，然后当我尝试关闭提要对话框时，应用程序冻结并显示加载进度对话框，我必须终止应用程序。

如果我点击“发布”，则消息已成功发布在我的 Facebook 墙上，但对话框冻结，我无能为力。

这是我调用提要对话框的简单代码：

```
this.facebook.dialog(this.context, "feed", new HTFeedDialogListener(this.context, success, error)); 
```

当我尝试使用“取消”或“发布”关闭对话框时，在 FbDialog.java 中，使用以下 url 作为参数调用覆盖的方法 onPageStarted：

```
https://m.facebook.com/dialog/feed 
```

但是永远不会调用 onPageFinished 或 shouldOverrideUrlLoading 方法。

有人注意到这种奇怪的行为吗？我正在使用 Galxy s2 和 Galaxy tab 10.1

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:08:06.377

这个问题是因为我在我的外部 android 库中使用了 facebook 提要对话框。为了解决它，我使用以下代码在主 ui 线程上运行 dialg：

```
mainActivity.runOnUiThread(new Runnable(){
     @Override
 public void run() {
         mFacebook.dialog(getContext() , "feed",  feedParams, new SimpleDialogListener()));
    }
}); 
```

# mongodb - Mongodb和Cassandra数据存储机制

> ID：10817692
> 
> 赞同：3
> 
> 时间：2012-05-30T13:50:31.043
> 
> 标签：mongodb, cassandra

我一直在阅读有关 MongoDB 和 Cassandra 的信息。MongoDB 是主/从，而 Cassandra 是无主的（所有节点都是平等的）。我的疑问是数据如何存储在这两者中。

假设一个用户正在向 MongoDB（一个具有主控和不同从属的集群，每个集群都在一个单独的机器上）写一个请求。这意味着主设备将决定（或通过某些应用程序实现）将此更新写入哪个从设备。也就是说，MongoDB 中的所有节点都不会提供相同的数据。每个节点的大小可能会有所不同。我对吗 ？此外，当被查询时，master 是否知道该请求应该发送到哪个节点？

在 cassandra 的情况下，相同的数据将被写入所有节点，即）如果一个节点大小为 10GB，则其他节点大小也是 10GB。因为如果只有这样的话，那么当一个节点发生故障时，用户在另一个节点查询不会丢失任何数据。我在这里吗？如果我是对的，所有节点都可以使用相同的数据，那么在 Cassandra 中使用 map/reduce 函数有什么好处？如果我错了，那么在 Cassandra 中如何维护可用性，因为相同的数据在另一个节点中不可用？

我在 stackoverflow 中搜索有关 MongoDB 与 cassandra 的内容，并阅读了大约 10 篇帖子，但我的问题无法通过这些帖子中的答案得到解决。请消除我的疑虑，如果我假设错误，也请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:37:43.457

关于 MongoDB，是的，你是对的，只有一个主节点。

只要一切都同步，任何辅助节点都可以成为主节点，因为这意味着辅助节点拥有所有数据。每个节点不必具有相同的磁盘大小，这可能会根据复制完成的时间而有所不同，但是，它们确实具有相同的数据（只要它们是同步的）。

我对 Cassandra 了解不多，抱歉！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:01:30.473

我写了一篇关于 NoSQL 存储的论文，因此我希望我能正确记住 Cassandra 的大部分内容：

Cassandra 是 Amazon Dynamo 的混合体，它从中继承了复制和分片，而 Google 的 BigTable 从中获得了数据模型。因此，Cassandra 基本上将您的数据分片，同时将其副本保存在其他节点上。让我们有一个五个节点的集群，节点称为 A 到 E。您的密钥通过一致的哈希散列到密钥环，其中密钥环的连续区域存储在给定节点上。因此，如果我们有一个从 1 到 100 的值范围，默认情况下每个节点将获得环的 1/5。A 的范围为 [1,20)，B 的范围为 [20,40)，依此类推。
Dynamo 的一个重要概念是三元组 (R,W,N)，它告诉有多少节点必须读取、写入和保持给定值。
默认情况下，您有 3 (N) 个数据副本，这些副本存储在主节点和两个后续节点上，它们保存备份。当我从 Dynamo 论文中记得它时，您的写入默认为您的 N 个副本的前 W 个节点，其他节点最终通过 Gossip 协议进行更新。
只要一切顺利，您将获得一致的结果，如果您的主节点停机一段时间，另一个节点会通过提示切换获取您的数据。一旦主数据库返回，您的数据将被合并或尝试被合并（这部分我真的不记得了，但检查那些用于告诉更新历史的向量时钟）。因此，如果您的集群没有太大的部分出现故障，您将对数据有一致的看法。如果您的节点的较大部分已关闭，或者您仅从副本的一小部分请求，您可能会看到不一致，这（可能）最终是一致的。
希望对您有所帮助，我强烈建议您阅读有关[Amazon Dynamo](http://www.allthingsdistributed.com/2007/10/amazons_dynamo.html)和[Google BigTable的原始论文](http://research.google.com/archive/bigtable-osdi06.pdf)，但我认为您最感兴趣的是 Amazon Dynamo。此外，[Werner Vogels](http://www.allthingsdistributed.com/2007/12/eventually_consistent.html)的这篇文章也可能派上用场。
至于分片大小，我认为这些可能会因您的机器以及密钥环的给定区域的热度而异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:16:36.440

Cassandra 通常不会将所有数据保存在所有节点上。正如您所建议的那样，这将破坏其分布式数据模型提供的一些优势（特别是会阻碍快速写入）。所需的复制量（应保留多少个节点的数据副本）可由客户端在写入时自定义。因此，您可以将其设置为跨所有节点进行复制，或者仅将数据保存在单个节点上而不进行复制。由你决定。数据写入的特定节点由键的哈希值决定。每个节点都被分配了一系列哈希值，它将存储，所以当你去查找一个值时，键再次被哈希，这表明在哪个节点上找到数据。

# javascript - 如何测试该方法是否已在 jasmine 中调用？

> ID：10817694
> 
> 赞同：13
> 
> 时间：2012-05-30T13:50:37.030
> 
> 标签：javascript, testing, bdd, jasmine

我对监视茉莉花有点困惑。我有这样的代码，但我不知道如何测试它。

```
var params = {
    param1: "",
    param2: "link",
    param3: "1", 
    param4 : "1"
};
var func = new myFunction(params );
func.doSomething(); 
```

如何测试 func.doSomething 已被调用。

这是我到目前为止写的测试

```
describe("Library", function() {

  beforeEach(function() {
  });

  it("should include correct parameters", function() {
      expect(params.param1).toEqual("");
      expect(params.param2).toEqual("link");
      expect(params.param3).toEqual("1");
      expect(params.param4).toEqual("1");
  });

  it("should show that method doSomething is called with zero arguments", function() {
          // I'm not sure how to write test for this.
  });
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-30T17:53:48.697

我想你想使用`toHaveBeenCalledWith()`：

```
it("should show that method doSomething is called with zero arguments", function() {
    // Ensure the spy was called with the correct number of arguments
    // In this case, no arguments
    expect(func.doSomething).toHaveBeenCalledWith();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-03T20:26:35.433

如果 spy 函数只被调用过一次，请使用`toHaveBeenCalledOnceWith`matcher：

```
expect(mySpy).toHaveBeenCalledOnceWith('', 'link', "1", "1"); 
```

* * *

它结合`toHaveBeenCalledTimes(1)`和`toHaveBeenCalledWith()`匹配器。

与`Jasmine 3.6`.

# c# - 使用字体创建条形码 - 这是正确的吗？我错过了什么吗？

> ID：10817696
> 
> 赞同：6
> 
> 时间：2012-05-30T13:50:49.793
> 
> 标签：c#, .net, fonts, barcode

我看到了很多关于 .NET 和生成条形码的线程和帖子。很多人都在谈论库、dll 和一些“开箱即用的应用程序”。我只是问自己：我真的需要这些东西吗？我（此时）能够在没有任何额外库或其他东西的情况下创建条形码。与[Font](http://msdn.microsoft.com/en-us/library/system.drawing.font.aspx)一起工作很好。我只需要一个条形码字体，让我们像[3 of 9](http://www.squaregear.net/fonts/free3of9.shtml)一样免费取一个，我可以安装它（实际上我什至不必安装它，它足以拥有文件的路径）然后我会做这样的事情：

```
 Font f = new Font("Free 3 of 9", 80);
    this.Font = f;

    Label l = new Label();
    l.Text = "*STACKOVERFLOW*";
    l.Size = new System.Drawing.Size(800, 600);
    this.Controls.Add(l);

    this.Size = new Size(800, 600); 
```

我可以显示条形码。你知道吗？我的手机可以读取它。所以这就是多么容易。我可以将其保存为 jpg，我可以将其粘贴到 xml 文件中等等。如果我想要另一个条形码，我只需要新字体，将 3 of 9 更改为其他内容，仅此而已。

所以我的问题是：我错过了什么？每个人都在谈论“呃使用已经完成的东西”，“使用库”等等。那么如果我在没有额外的库和其他东西的情况下继续这个，我会遇到什么问题呢？有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T13:55:47.483

3 of 9 只是编码条形码的一种方法。通常当我们想到条形码时，我们会想到 UPC 标准，但对于大多数条形码阅读器来说，9 个中的 3 个就可以了。如果它适用于您的应用程序，请不要在第三方库上浪费时间，只需使用 3 of 9 字体即可。

需要考虑的一件事是 3 of 9 标准不包含校验位。这有助于检测某些标准中的读取错误。关于编码的[维基百科页面](http://en.wikipedia.org/wiki/Code_39)对此有一些详细信息，但由于字符的编码方式，这听起来并不是什么大问题。

# delphi - TPageControl/TTabSheet 位置 Delphi XE

> ID：10817698
> 
> 赞同：1
> 
> 时间：2012-05-30T13:50:55.483
> 
> 标签：delphi, delphi-xe

我在 TPageControl 上有一些 TTabSheet 像这样。

选项卡 1 选项卡 2 选项卡 3 选项卡 4

但我希望我的第一个标签开始一个特定的位置，依此类推；

```
 Tab1 Tab2 Tab3 Tab4 
```

如何在 Delphi XE 中设置起始位置？和鼠标点击将正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:36:35.093

最简单的解决方案是在第一个选项卡的标题前添加空格（参见下图中的第二个示例）。

但是我会选择通过实现事件来插入一个无法设置为活动状态的虚拟选项卡（参见第一个示例）`PageControl.OnChanging`，如下所示：

```
procedure TForm1.PageControl1Changing(Sender: TObject;
  var AllowChange: Boolean);
begin
  AllowChange := not PtInRect(PageControl1.TabRect(0),
    PageControl1.ScreenToClient(Mouse.CursorPos));
end; 
```

![标签标题上的填充](../Images/b64f9a478fd7eab3fc530a165b355f7c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:16:25.907

您可以查看 Raize 控件。他们的标签页控件有很大的灵活性，但我不知道他们是否做你想要的。他们有一个不错的可下载演示程序，您可以玩它来看看他们是否按照您的意愿行事。如果你没有找到你想要的，你也可以给他们发邮件询问是否有可能。

这不是一个免费的图书馆，但是，IMO，物有所值。我们经常使用 Raize 控件并且对它们非常满意。

# jquery - 为什么会出现此错误 SyntaxError: Unexpected token ILLEGAL

> ID：10817702
> 
> 赞同：1
> 
> 时间：2012-05-30T13:51:23.597
> 
> 标签：jquery

我得到错误：`SyntaxError: Unexpected token ILLEGAL [http://localhost/test/drop:13]`

我的页面代码操作系统：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="mini.js"></script>
<script language="javascript">
$(document).ready(function() {
$("#main_div").empty();
$("#drp_name option").each(function() {
  $("#main_div").append("<div>"+ $(this).text() +"</div>")
});
​});
</script>
</head>
<body>
<select name="drp_name" id="drp_name">
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
</select>
<div id="main_div"></div>
</body>
</html> 
```

我用jQuery`v1.7.2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:00:35.483

Add the jQuery library to your page.

Put this in the `<head>`

```
<head>
<script type="text/javascript"  
        src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
</script>
...
</head> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:03:56.483

您忘记添加 JqueryScript

你可以简单地使用：

```
<script src="jquery-1.7.2.min.js"></script> 
```

如果您下载 jquery 脚本并添加到您的项目中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:59:05.607

你加

```
<script type="text/javascript" src="mini.js"></script> 
```

但不要包含您的 jQuery 库 js

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

或者如果 jquery 库在您的本地

```
<script type="text/javascript" src="SOURCE_TO_YOUR_LOCAL_FILE"></script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-30T13:53:34.047

您没有将任何内容传递给函数：

```
$("#drp_name option").each(function(this) {
  $("#main_div").append("<div>"+ $(this).val() +"</div>")
}); 
```

请注意，我在 .each(...

当您从选项元素中提取值时，我还将 $(this).text() 更改为 $(this).val()。

# java - 线程“主”java.lang.ArithmeticException 中的异常：/ 为零

> ID：10817706
> 
> 赞同：4
> 
> 时间：2012-05-30T13:51:46.347
> 
> 标签：java, exception, main, arithmeticexception

我有两个关于`Exceptions`. 首先，我从我的代码中收到了这条消息......

```
Exception in thread "main" java.lang.ArithmeticException: / by zero 
```

此错误消息意味着除以零，例如通过做`int a = 5 / 0;`

一个方法可以抛出一个`Exception`类实例，不是吗？但这是一种表达。为什么表达式可以抛出`Exception`类实例？

我的第二个问题是关于`thread "main"`. 是什么`thread "main"`？`"main"`是指`static main`方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T13:57:06.560

`java.lang.ArithmeticException`是一种`Exception`旨在更好地描述实际问题的类型。仅仅创建一个 没有意义`Exception`，因为它真的可能是由任何事情引起的。通过生成`ArithmeticException`，用户可以立即知道问题与计算有关。`Exception`任何一段代码都可以抛出An ，包括在您的示例等计算中。

`Exception in thread "main"`表示该方法引发了异常，该`main()`方法也恰好是运行您的代码的主线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:58:17.197

*方法可以抛出异常类实例，不是吗？*

是的他们可以。

*但这是声明。为什么语句可以抛出异常类实例？*

异常可以在任何地方发生。所以即使是语句也可以抛出异常。如果您的意思是为什么语句不能抛出异常，那么它们可以。这是一个例子：

```
if ((a/b) == 0) {
        throw new ArithmeticException();
    } 
```

*第二个问题是关于线程“main”。什么是线程“主”？*

当 Java 程序启动时，一个线程立即开始运行。这通常称为程序的主线程，因为它是在程序开始时执行的主线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-13T19:06:38.443

其算术例外情况：指逻辑中**不存在于数学算术中的事物；**

检查“for 循环”或任何其他逻辑函数的条件。

一个例子是当你在某处写下类似的东西：`(n % i == 0)`并给出初始化`i = 0`，现在每个人都知道这个数字不能被零除。因此，您可能需要将初始化更改为`i = 1`.

# javascript - 为什么返回在 getJSON 中不起作用，为什么我不能从 getJSON 写入变量？

> ID：10817708
> 
> 赞同：0
> 
> 时间：2012-05-30T13:52:04.303
> 
> 标签：javascript, jquery

我有一个使用`getJSON`但它没有像我预期的那样工作的函数。

```
function balbla(name, param) {
        $.getJSON("/blabla.json?name=" + name + "&param=" + param, function(data) {
                return data.bla;
        });
} 
```

当我`alert(data.bla)`在 getJSON 方法中使用它时，它可以工作，但当我尝试`return data.bla`它时却没有。此外，当我创建一个变量并尝试将其值写入`data.bla`它时，它根本不起作用！

// 我试过这个：

```
function getRouteData(name, param) {
    return $.getJSON('/routes_js.json', {route:name, opt: param});
}
function getRoute(name, param) {
        getRouteData(name, param).done(function(data) {
                return data.route;
        });
} 
```

但是当我调用`getRoute("bla", "blub")`它时仍然返回`undefined`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T13:53:20.683

AJAX 是异步的。在这种依赖于 AJAX 调用结果的函数中，您不能轻易地返回值。更改您的函数以接受回调：

```
function balbla(name, param, cb) {
    $.getJSON('/blabla.json', {name:name, param: param}, function(data) {
        cb(data.bla);
    });
} 
```

并像这样使用它：

```
balbla('foo', 'bar', function(bla) {
    // do stuff
}); 
```

一种更简洁的方法是返回 jqXHR 对象：

```
function balbla(name, param) {
    return $.getJSON('/blabla.json', {name:name, param: param});
} 
```

调用它时，使用jqXHR 对象的*deferred/promise接口附加一个成功回调：*

```
balbla('foo', 'bar').done(function(data) {
    alert(data.bla);
}); 
```

请注意，`$.ajax()`在同步模式下使用根本不是您应该考虑的选项。它可能会挂起浏览器的 UI（或至少是活动选项卡），直到请求完成。除此之外，异步回调是每个人都这样做的方式。

如果你不喜欢使用回调函数，你可以使用[tamejs](http://tamejs.org)之类的预处理器来自动生成异步函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T13:55:45.037

带有您的 return 语句的函数：

```
function(data) {
    return data.bla;
} 
```

... 没有被您的代码调用（它在 jQuery 内部被调用），因此您无法对函数调用的左侧进行赋值。

它也作为异步函数的一部分被调用，因此该`balbla`函数将完成运行并在匿名函数被调用之前返回。

如果您想对响应数据做一些事情，请**在匿名回调函数**中进行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T13:53:44.437

[getJSON](http://api.jquery.com/jQuery.getJSON/)是异步的，不是同步的。您需要使用回调，因此您的逻辑需要分两步完成。调用步骤和处理步骤。

# c# - 当 WPF 应用程序最大化时 UI 经常挂起

> ID：10817712
> 
> 赞同：3
> 
> 时间：2012-05-30T13:52:16.953
> 
> 标签：c#, wpf, c#-4.0

我有一个 WPF 应用程序，当主窗口最大化并且特定选项卡可见并且在我的选项卡控件顶部时，它经常挂起（变得完全无响应）。当窗户恢复下来时，它就像魅力一样。我能做些什么来解决这个问题？

有问题的选项卡有很多控件（文本框、图像、按钮、组合框、网格分割器、文本块、数据网格），我正在处理来自这些不同字段的事件，所以它是一个非常“忙碌”的网格。

这听起来类似于以下未解决的问题：WPF Datagrids freeze when windows Maximize ( [http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/4641d825-cf80-4b76-a4f9-14183bb72bb2# 58dc7fdf-b43c-4782-833f-1d90401f1914](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/4641d825-cf80-4b76-a4f9-14183bb72bb2#58dc7fdf-b43c-4782-833f-1d90401f1914) )

最后，让我说一下我没有按照我应该设计的那样设计应用程序，并且在主窗口中有超过 3000 行代码。我可能应该将这些繁忙的表单创建为用户控件。这会导致我的问题吗？

```
 <TabItem Header="Details" Name="tabDetails" Visibility="Collapsed" Width="125" TabIndex="0">
        <!--<ScrollViewer HorizontalAlignment="Stretch" Name="svrDetails" VerticalAlignment="Stretch" VerticalContentAlignment="Stretch" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">-->
        <Grid Name="grdDetails">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="548*" />
                    <ColumnDefinition Width="220*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="326*" />
                    <RowDefinition Height="174" />
                </Grid.RowDefinitions>
                <GridSplitter Name="gspDetailsColumns" Width="10" Grid.Column="0" ResizeDirection="Columns" TabIndex="420" />
                <GridSplitter Name="gspDetailsRows" Width="Auto" Grid.Row="0" Grid.ColumnSpan="2" ResizeDirection="Rows" Grid.Column="0" Height="10" VerticalAlignment="Bottom" HorizontalAlignment="Stretch" TabIndex="410" />
                <ComboBox Height="52" Margin="6,6,6,0" Name="cbxStatus" VerticalAlignment="Top" Cursor="Arrow" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" FontSize="26" Background="#FFF0F0F0" Grid.Column="1" SelectionChanged="cbxStatus_SelectionChanged" SelectedIndex="0" TabIndex="280">                        
                    <ComboBoxItem Content="Select status..." FontSize="20" FontStyle="Italic" />
                    <ComboBoxItem Content="Active"/>
                    <ComboBoxItem Content="Inactive" />
                    <ComboBoxItem Content="Closed" />
                </ComboBox>
                <Label Height="28" HorizontalAlignment="Left" Margin="119,78,0,0" Name="lblGuid" VerticalAlignment="Top" Visibility="Hidden" Grid.Column="1" />
                <GroupBox Header="Info" HorizontalAlignment="Stretch" Margin="6,64,0,12" Name="gbxInfo" VerticalAlignment="Stretch" Grid.Column="1">
                    <Grid>
                        <!--<TextBox HorizontalAlignment="Stretch" Name="tbkImportant" Text="" VerticalAlignment="Stretch" TextWrapping="Wrap" IsReadOnly="True" Background="#FFF0F0F0" IsTabStop="False" IsUndoEnabled="False" />-->
                    <TextBlock HorizontalAlignment="Stretch" Name="tbkImportant" VerticalAlignment="Stretch" Background="#FFF0F0F0" TextWrapping="Wrap" />
                </Grid>
                </GroupBox>
                <Grid Grid.Row="1" Name="grdDetailsNotesMacro" Grid.ColumnSpan="2">
                    <GroupBox Header="Notes" Name="gbxNotes" >
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="484*" />
                                <ColumnDefinition Width="266*" />                                        
                            </Grid.ColumnDefinitions>                                    
                            <TextBox GotFocus="tbxTag_GotFocus" LostFocus="tbxTag_LostFocus" Height="23" Margin="6,6,6,35" Name="tbxTag" VerticalAlignment="Bottom" Grid.Column="1" Foreground="Gray" Text="[Add tags so to make finding notes easy]" TabIndex="350" />
                            <TextBox GotFocus="tbxNote_GotFocus" LostFocus="tbxNote_LostFocus" Grid.Column="1" Margin="6,6,6,57" Name="tbxNote" Text="[Add notes, comments, or remarks relating to this contact]" Foreground="Gray" TextWrapping="Wrap" SelectionBrush="#9B16181A" VerticalScrollBarVisibility="Auto" TabIndex="340" />
                            <Button Content="Submit" Grid.Column="1" Height="23" HorizontalAlignment="Right" Margin="0,0,128,6" Name="btnSubmit" VerticalAlignment="Bottom" Width="75" Click="btnSubmit_Click" TabIndex="360" />                                    
                            <Button Content="Cancel" Grid.Column="1" Height="23" HorizontalAlignment="Right" Margin="0,0,43,6" Name="btnCancelNote" VerticalAlignment="Bottom" Width="75" Click="btnCancelNote_Click" TabIndex="370" />
                            <DataGrid IsReadOnly="True" AutoGenerateColumns="False" Margin="6,6,0,35" Name="dtgNotes" ItemsSource="{Binding}" AlternatingRowBackground="#33000000" RowBackground="#24000000" VerticalGridLinesBrush="#00000000" ClipboardCopyMode="IncludeHeader" CanUserDeleteRows="True" CanUserAddRows="True" GridLinesVisibility="Horizontal" AreRowDetailsFrozen="True" BorderBrush="#B7000000" CanUserReorderColumns="False">
                                <DataGrid.Columns>
                                <DataGridTextColumn Header="Date" Binding="{Binding Path=Date, StringFormat={}{0:dd/MM/yyyy}}" SortDirection="Descending" />
                                <DataGridTextColumn Header="Author" Binding="{Binding Path=Author}" />
                                <DataGridTextColumn Header="Tags" Binding="{Binding Path=Tags}" />
                                <DataGridTextColumn Header="Notes" Binding="{Binding Path=Notes}"/>
                                </DataGrid.Columns>
                            </DataGrid>
                            <ComboBox Height="23" IsEditable="True" Margin="6,0,160,6" Name="cbxFilter" VerticalAlignment="Bottom" TabIndex="380" Tag="What is a tag?" />                                    
                            <Button Content="Filter" Height="23" HorizontalAlignment="Right" Margin="0,0,81,6" Name="btnFilter" VerticalAlignment="Bottom" Width="75" Click="btnFilter_Click" TabIndex="390" />
                        <Button Content="Clear" Height="23" HorizontalAlignment="Right" Margin="0,0,0,6" Name="btnClearFilter" VerticalAlignment="Bottom" Width="75" Click="btnClearFilter_Click" TabIndex="400" />
                    </Grid>
                    </GroupBox>
                </Grid>
                <ScrollViewer Margin="0,0,10,10" HorizontalAlignment="Stretch" Name="svrDetailsFull" VerticalAlignment="Stretch" VerticalContentAlignment="Stretch" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                    <Grid Name="grdDetailsFullPanel" Grid.Column="0" Grid.Row="0" Margin="0,0,6,6">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="150*" />
                        </Grid.ColumnDefinitions>
                    <Grid Name="grdDetailsPanel">
                            <TextBox LostFocus="tbxNameContent_LostFocus" GotFocus="tbxNameContent_GotFocus" Background="#00000000" BorderBrush="#00000000" FontSize="24" FontWeight="ExtraBold" Height="52" HorizontalAlignment="Center" Margin="10,10,2,0" Name="tbxNameContent" VerticalAlignment="Top" Width="328" MouseEnter="tbxNameContent_MouseEnter" MouseLeave="tbxNameContent_MouseLeave" Text="[Enter name here]" Foreground="Gray" TabIndex="10" />
                            <TextBox GotFocus="tbxAddressContent_GotFocus" Background="#00000000" BorderBrush="#00000000" Height="28" HorizontalAlignment="Center" Margin="10,68,2,0" Name="tbxAddressContent" VerticalAlignment="Top" Width="328" TextChanged="tbxAddressContent_TextChanged" LostFocus="tbxAddressContent_LostFocus" MouseLeave="tbxAddressContent_MouseLeave" MouseEnter="tbxAddressContent_MouseEnter" Foreground="Gray" Text="[Enter address here]" TabIndex="20" />
                            <ComboBox Height="28" HorizontalAlignment="Center" HorizontalContentAlignment="Center" IsEditable="False" Margin="10,136,2,0" Name="cbxType" SelectedIndex="0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="328" TabIndex="30" LostFocus="cbxType_LostFocus">
                                <ComboBoxItem Content="This is a..." />
                                <ComboBoxItem Content="Laufhaus" />
                                <ComboBoxItem Content="Club" />
                                <ComboBoxItem Content="Studio" />
                                <ComboBoxItem Content="Nightclub" />
                                <ComboBoxItem Content="Generic brothel" />
                                <ComboBoxItem Content="Person" />
                            </ComboBox>
                            <Label Content="" FontStyle="Italic" Height="28" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" Margin="10,102,2,0" Name="lblCoord" VerticalAlignment="Top" VerticalContentAlignment="Top" FontSize="10" />
                            <TextBox MouseEnter="tbxMore_MouseEnter" MouseLeave="tbxMore_MouseLeave" Height="28" HorizontalAlignment="Center" Margin="169,170,44,0" Name="tbxMore" VerticalAlignment="Top" Width="204" LostFocus="tbxMore_LostFocus" TabIndex="50" />
                        <Button Content="x" Height="28" Margin="317,170,6,0" Name="btnClearMore" VerticalAlignment="Top" Background="#00000000" FontWeight="Bold" Foreground="#BC000000" Padding="0" HorizontalAlignment="Center" Width="17" VerticalContentAlignment="Center" Click="btnClearMore_Click" TabIndex="60" />
                        <ComboBox Height="28" HorizontalAlignment="Center" HorizontalContentAlignment="Center" Margin="10,170,216,0" Name="cbxOther" SelectedIndex="0" Text="" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="114" SelectionChanged="cbxOther_SelectionChanged" TabIndex="40" ItemsSource="{Binding Path=comboList}" GotFocus="cbxOther_GotFocus">
                                <!--<ComboBoxItem Content="More info..." />
                                <ComboBoxItem Content="Email" />
                                <ComboBoxItem Content="Email 2" />
                                <ComboBoxItem Content="Mobile" />
                                <ComboBoxItem Content="Telephone" />
                                <ComboBoxItem Content="Address 2" />
                                <ComboBoxItem Content="Nationality" />
                                <ComboBoxItem Content="Works at" />-->
                            </ComboBox>
                            <TextBox MouseEnter="tbxMore2_MouseEnter" MouseLeave="tbxMore2_MouseLeave" Height="28" HorizontalAlignment="Center" Margin="130,204,6,0" Name="tbxMore2" VerticalAlignment="Top" Width="204" Visibility="Collapsed" TabIndex="80" />
                        <Button Visibility="Hidden" Click="btnClearMore2_Click" Content="x" Height="28" Margin="317,204,6,0" Name="btnClearMore2" VerticalAlignment="Top" Background="#00000000" FontWeight="Bold" Foreground="#BC000000" Padding="0" HorizontalAlignment="Center" Width="17" VerticalContentAlignment="Center" TabIndex="90" />
                        <ComboBox ItemsSource="{Binding Path=comboList}" Height="28" HorizontalAlignment="Center" HorizontalContentAlignment="Center" Margin="10,204,216,0" Name="cbxOther2" SelectedIndex="0" Text="" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="114" Visibility="Collapsed" SelectionChanged="cbxOther2_SelectionChanged" TabIndex="70">
                                <!--<ComboBoxItem Content="More info..." />
                                <ComboBoxItem Content="Email" />
                                <ComboBoxItem Content="Email 2" />
                                <ComboBoxItem Content="Mobile" />
                                <ComboBoxItem Content="Telephone" />
                                <ComboBoxItem Content="Address 2" />
                                <ComboBoxItem Content="Nationality" />
                                <ComboBoxItem Content="Works at" />-->
                            </ComboBox>
                            <TextBox MouseEnter="tbxMore3_MouseEnter" MouseLeave="tbxMore3_MouseLeave" Height="28" HorizontalAlignment="Center" Margin="130,238,6,0" Name="tbxMore3" VerticalAlignment="Top" Width="204" Visibility="Collapsed" TabIndex="110" />
                        <Button Visibility="Hidden" Click="btnClearMore3_Click" Content="x" Height="28" Margin="317,238,6,0" Name="btnClearMore3" VerticalAlignment="Top" Background="#00000000" FontWeight="Bold" Foreground="#BC000000" Padding="0" HorizontalAlignment="Center" Width="17" VerticalContentAlignment="Center" TabIndex="120" />
                        <ComboBox ItemsSource="{Binding Path=comboList}" SelectionChanged="cbxOther3_SelectionChanged" Height="28" HorizontalAlignment="Center" HorizontalContentAlignment="Center" Margin="10,238,216,0" Name="cbxOther3" SelectedIndex="0" Text="" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="114" Visibility="Collapsed" TabIndex="100">
                                <!--<ComboBoxItem Content="More info..." />
                                <ComboBoxItem Content="Email" />
                                <ComboBoxItem Content="Email 2" />
                                <ComboBoxItem Content="Mobile" />
                                <ComboBoxItem Content="Telephone" />
                                <ComboBoxItem Content="Address 2" />
                                <ComboBoxItem Content="Nationality" />
                                <ComboBoxItem Content="Works at" />-->
                            </ComboBox>
                            <TextBox MouseEnter="tbxMore4_MouseEnter" MouseLeave="tbxMore4_MouseLeave" Height="28" HorizontalAlignment="Center" Margin="130,272,6,0" Name="tbxMore4" VerticalAlignment="Top" Width="204" Visibility="Collapsed" TabIndex="140" />
                        <Button Visibility="Hidden" Click="btnClearMore4_Click" Content="x" Height="28" Margin="317,272,6,0" Name="btnClearMore4" VerticalAlignment="Top" Background="#00000000" FontWeight="Bold" Foreground="#BC000000" Padding="0" HorizontalAlignment="Center" Width="17" VerticalContentAlignment="Center" TabIndex="150" />
                        <ComboBox ItemsSource="{Binding Path=comboList}" SelectionChanged="cbxOther4_SelectionChanged" Height="28" HorizontalAlignment="Center" HorizontalContentAlignment="Center" Margin="10,272,216,0" Name="cbxOther4" SelectedIndex="0" Text="" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="114" Visibility="Collapsed" TabIndex="130">
                                <!--<ComboBoxItem Content="More info..." />
                                <ComboBoxItem Content="Email" />
                                <ComboBoxItem Content="Email 2" />
                                <ComboBoxItem Content="Mobile" />
                                <ComboBoxItem Content="Telephone" />
                                <ComboBoxItem Content="Address 2" />
                                <ComboBoxItem Content="Nationality" />
                                <ComboBoxItem Content="Works at" />-->
                            </ComboBox>
                            <TextBox MouseEnter="tbxMore5_MouseEnter" MouseLeave="tbxMore5_MouseLeave" Height="28" HorizontalAlignment="Center" Margin="130,306,6,0" Name="tbxMore5" VerticalAlignment="Top" Width="204" Visibility="Collapsed" TabIndex="170" />
                        <Button Visibility="Hidden" Click="btnClearMore5_Click" Content="x" Height="28" Margin="317,306,6,0" Name="btnClearMore5" VerticalAlignment="Top" Background="#00000000" FontWeight="Bold" Foreground="#BC000000" Padding="0" HorizontalAlignment="Center" Width="17" VerticalContentAlignment="Center" TabIndex="180" />
                        <ComboBox ItemsSource="{Binding Path=comboList}" SelectionChanged="cbxOther5_SelectionChanged" Height="28" HorizontalAlignment="Center" HorizontalContentAlignment="Center" Margin="10,306,216,0" Name="cbxOther5" SelectedIndex="0" Text="" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="114" Visibility="Collapsed" TabIndex="160">
                                <!--<ComboBoxItem Content="More info..." />
                                <ComboBoxItem Content="Email" />
                                <ComboBoxItem Content="Email 2" />
                                <ComboBoxItem Content="Mobile" />
                                <ComboBoxItem Content="Telephone" />
                                <ComboBoxItem Content="Address 2" />
                                <ComboBoxItem Content="Nationality" />
                                <ComboBoxItem Content="Works at" />-->
                            </ComboBox>
                            <TextBox MouseEnter="tbxMore6_MouseEnter" MouseLeave="tbxMore6_MouseLeave" Height="28" HorizontalAlignment="Center" Margin="130,340,6,0" Name="tbxMore6" VerticalAlignment="Top" Width="204" Visibility="Collapsed" TabIndex="200" />
                        <Button Visibility="Hidden" Click="btnClearMore6_Click" Content="x" Height="28" Margin="317,340,6,0" Name="btnClearMore6" VerticalAlignment="Top" Background="#00000000" FontWeight="Bold" Foreground="#BC000000" Padding="0" HorizontalAlignment="Center" Width="17" VerticalContentAlignment="Center" TabIndex="210" />
                        <ComboBox ItemsSource="{Binding Path=comboList}" SelectionChanged="cbxOther6_SelectionChanged" Height="28" HorizontalAlignment="Center" HorizontalContentAlignment="Center" Margin="10,340,216,0" Name="cbxOther6" SelectedIndex="0" Text="" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="114" Visibility="Collapsed" TabIndex="190">
                                <!--<ComboBoxItem Content="More info..." />
                                <ComboBoxItem Content="Email" />
                                <ComboBoxItem Content="Email 2" />
                                <ComboBoxItem Content="Mobile" />
                                <ComboBoxItem Content="Telephone" />
                                <ComboBoxItem Content="Address 2" />
                                <ComboBoxItem Content="Nationality" />
                                <ComboBoxItem Content="Works at" />-->
                            </ComboBox>
                            <TextBox Height="28" HorizontalAlignment="Center" Margin="130,374,6,0" Name="tbxMore7" VerticalAlignment="Top" Width="204" Visibility="Collapsed" TabIndex="230" />
                        <Button MouseEnter="btnClearMore7_MouseEnter" MouseLeave="btnClearMore7_MouseLeave" Visibility="Hidden" Click="btnClearMore7_Click" Content="x" Height="28" Margin="317,374,6,0" Name="btnClearMore7" VerticalAlignment="Top" Background="#00000000" FontWeight="Bold" Foreground="#BC000000" Padding="0" HorizontalAlignment="Center" Width="17" VerticalContentAlignment="Center" TabIndex="240" />
                        <ComboBox ItemsSource="{Binding Path=comboList}" SelectionChanged="cbxOther7_SelectionChanged" Height="28" HorizontalAlignment="Center" HorizontalContentAlignment="Center" Margin="10,374,216,0" Name="cbxOther7" SelectedIndex="0" Text="" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="114" Visibility="Collapsed" TabIndex="220">
                                <!--<ComboBoxItem Content="More info..." />
                                <ComboBoxItem Content="Email" />
                                <ComboBoxItem Content="Email 2" />
                                <ComboBoxItem Content="Mobile" />
                                <ComboBoxItem Content="Telephone" />
                                <ComboBoxItem Content="Address 2" />
                                <ComboBoxItem Content="Nationality" />
                                <ComboBoxItem Content="Works at" />-->
                            </ComboBox>
                            <TextBox Height="28" HorizontalAlignment="Center" Margin="130,408,6,0" Name="tbxMore8" VerticalAlignment="Top" Width="204" Visibility="Collapsed" TabIndex="260" />
                        <Button MouseEnter="btnClearMore8_MouseEnter" MouseLeave="btnClearMore8_MouseLeave" Visibility="Hidden" Click="btnClearMore8_Click" Content="x" Height="28" Margin="317,408,6,0" Name="btnClearMore8" VerticalAlignment="Top" Background="#00000000" FontWeight="Bold" Foreground="#BC000000" Padding="0" HorizontalAlignment="Center" Width="17" VerticalContentAlignment="Center" TabIndex="270" />
                        <ComboBox ItemsSource="{Binding Path=comboList}" Height="28" HorizontalAlignment="Center" HorizontalContentAlignment="Center" Margin="10,408,216,0" Name="cbxOther8" SelectedIndex="0" Text="" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="114" Visibility="Collapsed" TabIndex="250">
                                <!--<ComboBoxItem Content="More info..." />
                                <ComboBoxItem Content="Email" />
                                <ComboBoxItem Content="Email 2" />
                                <ComboBoxItem Content="Mobile" />
                                <ComboBoxItem Content="Telephone" />
                                <ComboBoxItem Content="Address 2" />
                                <ComboBoxItem Content="Nationality" />
                                <ComboBoxItem Content="Works at" />-->
                            </ComboBox>
                        </Grid>
                    <Grid Grid.Column="1" Name="grdDetailsStaticMapAndButtons" >
                        <Grid.RowDefinitions>
                            <RowDefinition Height="81*" />
                            <RowDefinition Height="95*" />
                        </Grid.RowDefinitions>
                        <Grid Margin="10,10,25,0" Name="grdImage" Background="LightGray" SizeChanged="grdImage_SizeChanged">
                            <Image Name="imgThumbnail" Stretch="Fill" SizeChanged="imgThumbnail_SizeChanged" />
                        </Grid>
                        <Button Content="Save" Grid.Row="1" Height="23" HorizontalAlignment="Left" Margin="10,37,0,0" Name="btnSave" TabIndex="290" VerticalAlignment="Top" Width="75" Click="btnSave_Click" />
                        <Button Content="Add" Grid.Row="1" Height="23" HorizontalAlignment="Left" Margin="90,37,0,0" Name="btnAddFromDetails" TabIndex="300" VerticalAlignment="Top" Width="35" Click="btnAddFromDetails_Click" />
                        <Button Content="Close" Grid.Row="1" Height="23" HorizontalAlignment="Right" Margin="0,37,25,0" Name="btnCancel" TabIndex="310" VerticalAlignment="Top" Width="75" Click="btnCancel_Click" />
                        <Label Content="Not right? Be more specific in the address." FontSize="10" Foreground="#FF0000AF" Height="28" HorizontalAlignment="Center" HorizontalContentAlignment="Center" Margin="10,4,25,0" Name="label1" VerticalAlignment="Top" Width="207" Grid.Row="1" />
                        <Label Content="" FontSize="10" FontStyle="Italic" Grid.Row="1" Height="28" HorizontalAlignment="Center" HorizontalContentAlignment="Center" Margin="10,67,25,0" Name="lblSaved" VerticalAlignment="Top" Width="207" />
                        <Button Background="#00000000" Content="+" Height="23" HorizontalAlignment="Right" Margin="222,68,0,108" Name="btnPlusDetails" TabIndex="320" VerticalAlignment="Center" Width="20" Click="btnPlusDetails_Click" />
                        <Button Background="#00000000" Content="-" Height="23" HorizontalAlignment="Right" Margin="222,108,0,70" Name="btnMinusDetails" TabIndex="330" VerticalAlignment="Center" Width="20" Click="btnMinusDetails_Click" />
                    </Grid>
                </Grid>
                </ScrollViewer>
            </Grid>
        <!--</ScrollViewer>-->
    </TabItem> 
```

这是窗口元素：

```
<Window x:Class="mapperWPF.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"        
    Title="Mapper" Height="600" Width="1000" Loaded="Window_Loaded" Initialized="Window_Initialized" Closing="Window_Closing" Name="wdoMain"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:19:28.857

挂起可能来自绑定/事件处理程序中的无限循环/ ...也可能来自 wpf 无法解决您设置的所有约束（width/maxWidth/... with bindings...）以显示所有内容. 所以对于 xaml：布局、大小和视觉内容：让所有事情都变得非常简单，然后放回你的真实设计，直到它坏掉。对于代码：将其拆分为一些大块，并使用允许禁用/启用这些块的布尔值。然后将这些布尔值设置为 false/true，直到它运行正常。然后将非工作代码拆分成更小的部分并启用/禁用功能，直到它运行良好，以找到循环。（布尔值可能会阻止事件触发，在函数开始时返回默认值，......取决于你在做什么）

只是一个简单的问题，如果您对调试器进行（一些）暂停，它会在哪里停止？也可能让您了解核心循环问题。如果调试器从未在代码中停止，则很可能您遇到了 xaml 问题（布局）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:19:15.180

将代码分解一下可能是明智的，因为超过 3000 行不会有帮助。此外，如果您的主窗口上有很多控件，明智的做法是查看线程以及 WPF 执行 UI 线程的方式[http://msdn.microsoft.com/en-us/library/ms741870.aspx](http://msdn.microsoft.com/en-us/library/ms741870.aspx) 作为渲染WPF 中的控件，尤其是 DataGrid 中的控件很慢。当我上次使用 WPF 数据网格显示大量数据时，我实现了数据分页，然后加载第一页，同时仍检索数据以帮助加快速度。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:28:15.987

WPF 使用图形芯片的资源来呈现应用程序，尤其是在调整窗口大小时。您是否尝试过在不同的硬件上运行您的应用程序？你仍然得到相同的行为吗？

此外，它可能来自最大化事件处理程序中的一些自定义代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T15:03:30.333

这简直太奇怪了。请确认症状。请定义“最大化”。只有当你点击最大化按钮时？如果在调整大小模式下，您可以拖动到全尺寸吗？

请发布 XAML 的窗口部分。

据我所知，没有特定的最大化事件 - 它只是一种调整大小。

根据this这个链接，可能有不同的处理最大化过大到最大值。“优先顺序也可以确定窗口最大化时的大小” [在此处输入链接描述](http://msdn.microsoft.com/en-us/library/ms748948.aspx) 这是一个范围，但您可能在 Window XAML 中有一些设置会导致冲突。

# python - python pool.map 与地图

> ID：10817714
> 
> 赞同：3
> 
> 时间：2012-05-30T13:52:22.167
> 
> 标签：python, map, multiprocessing, pool

我需要将一个复杂的函数应用于一个长系列。按顺序完成这似乎效率低下，因为我可以访问 12 核机器。

在对此进行大量投资之前，我编写了一个比较 pool.map 和 map 的简单版本。

1) 令人惊讶的是，地图要快得多（见下面的结果）。

2) 并且在地图版本上没有出现的池函数中存在溢出错误。

3) 使用较小的数组，不会出现运行时警告，但 map 仍然更快。

我不是计算机科学专家（只是一个功能用户） - 有什么想法和建议吗？我选择了 pool.map 因为异步版本可能会打乱系列的顺序（这对我来说很痛苦）。

请参阅下面的更新：基于 Jdog 的建议。

配置：python v 2.7，64位版本，windows 7

```
#-------------------------------------------------------------------------------
# Name:        poolMap
#-------------------------------------------------------------------------------
import multiprocessing as mp
import numpy as np
import time

def func(x):
   y=x*x
   return y

def worker(inputs):
   num=mp.cpu_count()
   print 'num of cpus', num
   pool = mp.Pool(num)
   #inputs = list(inputs)
   #print "inputs type",type(inputs)
   results = pool.map(func, inputs)
   pool.close()
   pool.join()
   return results

if __name__ == '__main__':
   series = np.arange(500000)
   start = time.clock()
   poolAnswer = worker(series)
   end = time.clock()
   print 'pool time' ,(end - start)
   start = time.clock()
   answer = map(func,series)
   end = time.clock()
   print 'map time', (end - start) 
```

结果：

cpu 数量 12

池时间 2.40276007188

D:\poolmap.py:19: RuntimeWarning: long_scalars y=x*x 中遇到溢出

地图时间 0.904187849745

＃＃＃＃＃＃＃＃＃＃＃＃＃＃更新

使用这个函数给了我我正在寻找的结果

```
def func(x):
    x=float(x)
    y=(((x*x)**0.35))*x+np.ma.sqrt((((x*x)**0.35)))
    return y 
```

结果：CPU 数量 12

泳池时间 12.7410957475

地图时间 45.4550067581

# java - 背景图像不起作用

> ID：10817718
> 
> 赞同：0
> 
> 时间：2012-05-30T13:52:31.580
> 
> 标签：java, javafx

```
 String image = JavaFXApplication9.class.getResource("splash.jpg").toExternalForm();
      root.setStyle(" -fx-background-image: url('" + image + "'); 
               -fx-background-position: center center; 
               -fx-background-repeat: stretch;"); 
```

谁能帮我解决这个问题？:S 我已经尝试了很多。

我知道这是一个小错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:21:17.077

尝试清理并重新构建项目。
**编辑**：
根据此工作方法编辑您的启动方法：

```
@Override
public void start(Stage primaryStage) {
    StackPane root = new StackPane();
    String image = this.getClass().getResource("splash.jpg").toExternalForm();
    root.setStyle(" -fx-background-image: url('" + image + "');  "
            + "-fx-background-position: center center; "
            + "-fx-background-repeat: stretch;");
    primaryStage.setScene(new Scene(root, 300, 250));
    primaryStage.show();
} 
```

确保**splash.jpg**图像文件位于主类的同一包中。

# asp.net - HtmlEncode 本地资源

> ID：10817719
> 
> 赞同：0
> 
> 时间：2012-05-30T13:52:34.270
> 
> 标签：asp.net, localization, html-entities

我有一个使用本地资源的网站。默认页面上的主要文本（不是标签等）存储在文件中。该文件被添加到我的本地资源文件 default.aspx.fi-FI.resx 中，并命名为 text-defaultPage。这是一个带有标签等的常规文本文件。

然而问题是，文本是芬兰语，换句话说，它使用了很多带有变音符号 (ä) 和其他特殊字符的字符。网站所针对的人想要自己编辑此文本，但他对编程、html 实体等一无所知。

有没有办法让这些字符用 htmlEncode 编码？

在我的 Global.asax 中，我检查所选语言，然后页面会重新加载该语言。

# 编辑

没关系，我将文件制作为 Unicode 文本文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:58:27.487

该问题的解决方案是将文件设为 unicode。

# android - 通过亚行擦除数据/恢复出厂设置

> ID：10817721
> 
> 赞同：59
> 
> 时间：2012-05-30T13:52:53.803
> 
> 标签：android, adb, reset, recovery

基本上这是我的问题/

我有 200 多部运行库存 Android 的手机需要擦除（以擦除数据/恢复出厂设置的方式），然后安装一个带有一些额外 apk 的新 ROM。

目前，除了擦除数据部分之外，我已经将所有内容都自动化了。其他一切都可以通过带有一组命令的 .bat 非常愉快地完成，但我终其一生都无法弄清楚如何模仿或强制恢复模式来擦除数据。

我目前尝试过的事情：

*   使用 rm -r * 自己在应该执行的文件夹（数据、缓存、sd-ext 等）上擦除数据。这确实会擦除，但随后 ROM 无法正常工作并卡在引导循环中。
*   尝试使用“adb input keyevent”来模拟按键。我不知道它们映射到什么，因为它们基本上位于 UNIX shell 中，即使这样也没有“输入”，因为操作系统还没有被加载。
*   试图在系统上找到实际运行擦除/重置然后手动运行的文件/脚本。这可能是最简单的方法，因为它已经在某个地方为我编写了，但我就是看不到它隐藏在哪里，即使在 CWM 之类的东西中也是如此。

如果有人有任何方法可以让我通过 .bat 或 adb shell 进行出厂重置，我将不胜感激。已经尝试解决这个问题大约 2 天了，但进展甚微。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-31T08:02:10.200

经过大量的挖掘，我终于下载了 Android 恢复部分的源代码。事实证明，您实际上可以向恢复发送命令。

```
 * The arguments which may be supplied in the recovery.command file:
 *   --send_intent=anystring - write the text out to recovery.intent
 *   --update_package=path - verify install an OTA package file
 *   --wipe_data - erase user data (and cache), then reboot
 *   --wipe_cache - wipe cache (but not user data), then reboot
 *   --set_encrypted_filesystem=on|off - enables / diasables encrypted fs 
```

这些是您可以根据我找到的命令使用的命令，但对于修改后的文件可能会有所不同。所以使用 adb 你可以这样做：

```
adb shell
recovery --wipe_data 
```

使用 --wipe_data 似乎可以满足我的需求，尽管我尚未对此进行全面测试。

编辑：

对于仍在使用此主题的任何人，这些命令可能会根据您使用的恢复方式而改变。如果您使用 Clockword 恢复，这些命令应该仍然有效。您可以在 /cache/recovery/command 中找到其他命令

有关更多信息，请参见此处： [https ://github.com/CyanogenMod/android_bootable_recovery/blob/cm-10.2/recovery.c](https://github.com/CyanogenMod/android_bootable_recovery/blob/cm-10.2/recovery.c)

# c# - 使用 Linq 搜索 DataRow 并从数据集中删除

> ID：10817723
> 
> 赞同：0
> 
> 时间：2012-05-30T13:53:08.063
> 
> 标签：c#, linq, ado.net, dataset, datarow

我想在 MySql 数据库中删除一个 DataRow，使用 Linq 搜索行，然后从数据集中删除该行。但是删除我的数据库中的行是行不通的。我的代码：

```
var results = (from myRow in dataSet.Tables["Students_has_Courses"].AsEnumerable()
              where myRow.Field<int>("Students_idStudents") == 1 && myRow.Field<int>("Courses_idCourses") == 1
              select new { id = myRow }).ToList();
foreach (var x in results)
{
        dataSet.Tables["Students_has_Courses"].Rows.Remove(x.id);
        x.id.Delete();
}

dataAdapter.Update(dataSet); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:00:36.433

[从 DataTable 中删除](http://msdn.microsoft.com/en-us/library/system.data.datarowcollection.remove%28v=vs.80%29.aspx)行并不意味着它们稍后会从数据库中删除。

如果您希望使用 DataAdapter/TableAdapter 删除它们，则需要调用[`Delete`](http://msdn.microsoft.com/en-us/library/system.data.datarow.delete%28v=vs.80%29.aspx)DataRow。然后它们将被标记为[`DataRowState.Deleted`](http://msdn.microsoft.com/en-us/library/system.data.datarowstate.aspx)。

```
var results = from myRow in dataSet.Tables["Students_has_Courses"].AsEnumerable()
              where myRow.Field<int>("Students_idStudents") == 1 
                 && myRow.Field<int>("Courses_idCourses")   == 1
              select myRow;
foreach (DataRow row in results)
    row.Delete();
dataAdapter.Update(dataSet); 
```

# python - 'RawQuerySet' 对象没有属性 'key'

> ID：10817728
> 
> 赞同：2
> 
> 时间：2012-05-30T13:53:21.760
> 
> 标签：python, sql, django, django-models

我对python很陌生，所以这是我犯的一个愚蠢的错误。

我正在制作一个可以使用外部链接调用的 api。调用链接时，我的 django 服务器出现以下错误：“'RawQuerySet' 对象没有属性 'key'”

下面是发生错误的代码（请求的定义、sql请求和我使用的模型）。当我尝试调用planning.key 时发生错误。我相信 django 不知道它是哪种类型的对象，也不知道如何从中检索数据。

希望有人能看到我做错了什么。

出错的代码

```
def get(request):
    if not len(request.GET):
        raise WeegNetError(101)

    data = request.GET.copy()

    usr = user.checkUser(data)

    planning = libs.getPlanning(data['planningkey'])

    if not planning:
        raise WeegNetError(310)

    fields = {
        'key': planning.key,
        'reference': planning.reference,
        'startdate': planning.plan_start.strftime("%Y-%m-%d %H:%M:%S"),
        'enddate': None if not p.plan_end else planning.plan_end.strftime("%Y-%m-%d %H:%M:%S"),
        'product': planning.product,
        'address_from': {
                                'relation': planning.rel_from,
                                'street': planning.street_from,
                                'housenr': planning.housenr_from,
                                'zipcode': planning.zipcode_from,
                                'city': planning.city_from
                        },
        'address_to': {
                                'relation': planning.rel_to,
                                'street': planning.street_from,
                                'housenr': planning.housenr_to,
                                'zipcode': planning.zipcode_to,
                                'city': planning.city_to
                        }}
    return HttpResponse(simplejson.dumps(fields)) 
```

sql请求

```
def getPlanning(planningkey):
    sqlQuery = """SELECT k.key, 
        pl.id,
        pl.reference As ref, 
        pl.plan_start , 
        pl.plan_end, 
        pr.title as product,
        r1.name AS rel_from, 
        loc1.address AS street_from, 
        loc1.housenr AS housenrfrom, 
        loc1.zipcode AS zipcode_from, 
        loc1.city AS city_from, 
        r2.name as rel_to,  
        loc2.address AS street_to, 
        loc2.housenr AS housenr_to,
        loc2.zipcode AS zipcode_to, 
        loc2.city AS city_to 
        FROM `planning` pl
        LEFT JOIN `keys` k
        ON pl.id = k.planning_id
        LEFT JOIN `product` pr
        ON pl.product_id = pr.id
        LEFT JOIN `relations` r1
        ON pl.from_owner = r1.id
        LEFT JOIN `relations` r2
        ON pl.to_owner = r2.id
        LEFT JOIN `depot` dep1
        ON pl.to_depot = dep1.id
        LEFT JOIN `locatie` loc1
        ON dep1.locatie_id = loc1.id
        LEFT JOIN `depot` dep2
        ON pl.from_depot = dep2.id
        LEFT JOIN `locatie` loc2
        ON dep2.locatie_id = loc2.id
        WHERE pl.id = (SELECT planning_id
        FROM `keys`
        WHERE `key` = %(planningkey)s)
        AND pl.deleted = 0"""

    from models import Planning
    try:
        return Planning.objects.raw(sqlQuery, {'planningkey': planningkey})
    except:
        return None 
```

模型

```
class Planning(models.Model):
    id = models.AutoField(primary_key=True)
    key = models.CharField(max_length=8, blank=True, null=True)
    reference = models.CharField(max_length=255, blank=True, null=True)
    plan_start = models.DateField(null=False)
    plan_end = models.DateTimeField(null=True, default=None)
    product = models.CharField(max_length=255, blank=True, null=False)
    rel_from = models.CharField(max_length=255, blank=True, null=True)
    street_from = models.CharField(max_length=255, blank=True, null=True)
    housenr_from = models.CharField(max_length=10, blank=True, null=True)
    zipcode_fom = models.CharField(max_length=10, blank=True, null=True)
    city_from = models.CharField(max_length=255, blank=True, null=True)
    rel_to = models.CharField(max_length=255, blank=True, null=True)
    street_to = models.CharField(max_length=255, blank=True, null=True)
    housenr_to = models.CharField(max_length=10, blank=True, null=True)
    zipcode_to = models.CharField(max_length=10, blank=True, null=True)
    city_to = models.CharField(max_length=255, blank=True, null=True)
    class Meta:
        db_table = u'planning' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:01:32.483

`Planning.objects.raw()` returns [`RawQuerySet` instance](https://docs.djangoproject.com/en/1.4/topics/db/sql/#django.db.models.Manager.raw), which is different from model instance.

You need to iterate or slice on the `RawQuerySet` to access actual model instance and its properties

```
qs = planning.objects.raw()
qs[0].key
for x in qs:
    x.key 
```

# sdl - 如何使用 sdl_ttf 绘制纯文本？

> ID：10817732
> 
> 赞同：0
> 
> 时间：2012-05-30T13:53:29.303
> 
> 标签：sdl, sdl-ttf

这是一个例子：

```
SDL_Color textcol = {255, 255, 255};
SDL_Color backtextcol = {0, 0, 0};
SDL_Surface *mes = TTF_RenderText_Shaded(font, "The game has begun", textcol, backtextcol);
apply_surface(40, 40, mes, screen);
SDL_Flip(screen); 
```

多亏了那个例子，我们绘制了一个带有白色字母的黑色矩形。是否可以在没有整个黑色矩形的情况下仅绘制带有黑色内部的白色字母？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:11:35.440

对的，这是可能的。SDL_TTF 中有 3 个主要的文本绘图函数：

TTF_RenderText_Solid - 这个渲染基本文本（无背景），速度快，但质量低，看起来像素化。

TTF_RenderText_Shaded - 这个绘制了很好的混合字符，但使用了预定义的背景颜色

TTF_RenderText_Blended - 这个绘制了一个很好的混合文本，但是它使用了 alpha 混合并且速度很慢，但是给出了非常好的结果

# java - JLabel 的高度随行数增长

> ID：10817734
> 
> 赞同：0
> 
> 时间：2012-05-30T13:53:37.887
> 
> 标签：java, swing, jlabel, multiline

我希望 my`JLabel`成为分配给文本的特定字符串所需的高度。文本字符串可以有任意数量的行，这些行在`\n`字符串中使用。因此，如果您有一个字符串，`"Hello\nit\nis\nme\n"`标签的高度将自动调整以适合 4 行。

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:41:49.423

1通常会忽略换行符`JLabel`^。要获取多行文本，请使用多行组件（例如`JTextArea`²）或在标签中使用 HTML 格式。

![](../Images/aa44d2619b9309a7ddae9f869fd00e5c.png)

1.  这是一个[使用 HTML 格式的示例](https://stackoverflow.com/a/7861833/418556)（上面的屏幕截图）。该示例使用样式 (CSS) 来自动插入换行符。这比手动计算在文本块中插入换行符的位置要容易得多。
2.  当然，`JTextArea`具有[`setLineWrap(true)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html#setLineWrap%28boolean%29)&之类的方法[`setWrapStyleWord(true)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html#setWrapStyleWord%28boolean%29)也会自动处理换行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:58:08.840

*   使用正确的[JTextComponent](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)而不是在`JLabel`

*   我认为`"Hello\nit\nis\nme\n"`应该禁用[JTextArea](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)对`JComponent`

# cocos2d-iphone - 模拟精灵的黑洞/漩涡行为

> ID：10817736
> 
> 赞同：1
> 
> 时间：2012-05-30T13:53:42.197
> 
> 标签：cocos2d-iphone, physics, game-physics

我的游戏中的一个道具是吸引所有硬币的漩涡。我知道我有任何 cocos2d 的 moveto/bezierto 方法可用，但我不知道如何使它们具有切向和径向速度。

额外的困难是涡流中心可以在每一步中改变，所以所有的运动都必须重新调整。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:32:46.320

在没有物理引擎的情况下实现此目的的一种方法是使用[围绕点的旋转](https://stackoverflow.com/questions/3249083/is-this-how-rotation-about-a-point-is-done)算法。

这涵盖了围绕涡旋中心的旋转。一旦一个物体绕着漩涡旋转，你需要做的就是每帧将该物体与中心的距离减少一定的量。这样，它将继续向内移动。

唯一棘手的部分是让物体从其初始位置被“吸入”涡流。将需要进行很多调整。使用物理引擎，该部分将来自物理本身，并且看起来总是正确的。

这不能保证手动解决方案，也绝对不能保证不是为跟踪移动目标而设计的操作。例如，如果您通过将现有动作替换为新动作来更改每一帧的移动动作，则您的对象根本不会移动。每次执行此操作时，在新操作开始工作之前都会有 1 帧延迟。

# performance - Mongo DB MapReduce：根据条件从数组中发出键

> ID：10817750
> 
> 赞同：2
> 
> 时间：2012-05-30T13:54:11.910
> 
> 标签：performance, mongodb, mapreduce

我是 mongo db 的新手，所以如果这相当琐碎，请原谅。我非常感谢您的帮助。

这个想法是在某些特定值上生成直方图。在这种情况下，某些文件的 mime 类型。为此，我正在使用地图缩减作业。

我有一个文件格式如下的mongo：

```
{
    "_id" : ObjectId("4fc5ed3e67960de6794dd21c"),
    "name" : "some name",
    "uid" : "some app specific uid",
    "collection" : "some name",
    "metadata" : [
        {
            "key" : "key1",
            "value" : "Plain text",
            "status" : "SINGLE_RESULT",
        },
        {
            "key" : "key2",
            "value" : "text/plain",
            "status" : "SINGLE_RESULT",
        },
        {
            "key" : "key3",
            "value" : 3469,
            "status" : "OK",
        }
     ]
} 
```

请注意，几乎每个文档中都有更多元数据键值。

**地图缩减作业**

我尝试执行以下操作：

```
function map() {
   var mime = "";
   this.metadata.forEach(function (m) {
     if (m.key === "key2") {
        mime = m.value;}
     });
     emit(mime, {count:1});
}

function reduce() {
  var res = {count:0};
  values.forEach(function (v) {res.count += v.count;});
  return res;
}

db.collection.mapReduce(map, reduce, {out: { inline : 1}}) 
```

这似乎适用于少量文档（~15K），但问题是在映射阶段遍历所有元数据键值需要大量时间。在更多文档（〜1Mio）上运行此操作时，该操作将永远存在。

所以我的问题是：有什么方法可以直接发出 mime 类型（值），而不是遍历所有键并选择它？或者有没有更好的方法来编写 map reduce 函数。

像 emit (this.metadata.value {$where this.metadata.key:"key2"}) 或类似的东西......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T17:58:44.433

两个想法...

第一个想法：您对这个文档模式的依附程度如何？您能否将元数据字段值作为嵌入文档而不是嵌入数组，如下所示：

```
{
    "_id" : ObjectId("4fc5ed3e67960de6794dd21c"),
    "name" : "some name",
    "uid" : "some app specific uid",
    "collection" : "some name",
    "metadata" : {
        "key1" : {
            "value" : "Plain text",
            "status" : "SINGLE_RESULT"
        },
        "key2": {
            "value" : "text/plain",
            "status" : "SINGLE_RESULT"
        }, 
        "key3" : {
            "value" : 3469,
            "status" : "OK"
        }
     }
} 
```

然后您的地图步骤完全取消了循环：

```
function map() {
   emit( this.metadata["key2"].value, { count : 1 } );
} 
```

那时，您甚至可以将其转换为“组”命令而不是“mapReduce”。

第二个想法：如果没有这样的模式更改，特别是如果“key2”出现在元数据数组的早期，您至少可以在找到密钥后急切地退出循环以节省一些迭代，如下所示：

```
function map() {
   var mime = "";
   this.metadata.forEach(function (m) {
     if (m.key === "key2") {
        mime = m.value;
        break;
     } 
     });
     emit(mime, {count:1});
} 
```

不确定任何一条道路是否是胜利的关键，但希望有帮助的想法。祝你好运！

# ide - FDT5 Haxe 编译错误“未捕获的异常 - module.c(124)：未找到内置函数：fasthash”

> ID：10817756
> 
> 赞同：1
> 
> 时间：2012-05-30T13:54:55.823
> 
> 标签：ide, haxe, fdt, neko

我是 FDT5 的用户，在使用 v2.09 的 Haxe 和 v1.8.2 的 NekoVM 时遇到了这个非常奇怪的 Haxe 编译器错误。

“未捕获的异常 - module.c(124)：找不到内置函数：fasthash”

谁能帮我解决这个错误，因为无法编译我的 FDT5 项目，就好像我直接在 Mac OSX Lion 中编译它一样。终端它不报告任何问题。

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:16:28.000

## 您可能需要设置 Neko 安装的路径

FDT 5.5 附带 Neko，但默认情况下未设置它的路径。因为它不是，你可能会得到你提到的错误：

![在此处输入图像描述](../Images/1e71f837ae8f73dcc9326e839b8766c0.png)

要解决此问题，请转到 Preferences>Haxe>Neko VM 并指向 Neko 安装目录。

## 自定义安装目录

您可以指向自定义安装。如果您使用[Haxe 网站上](http://haxe.org/download)的独立安装程序，也许可以。

![设置为自定义安装目录](../Images/73d4ede52e682ee20ee556d3ebb0f2ca.png)

## 使用 FDT 的 Neko 安装

对于 Windows，您只需指向 FDT5>haxe>neko-1.8.2-osx

对于 OSX，因为 FDT 是一个自包含的包，所以您不能通过 OSX GUI 导航到 Neko。而是键入此路径，或复制并粘贴设置 Haxe 位置的路径，然后将其粘贴到 Neko 位置。然后只需将最后一个目录名称更改为 Neko 文件夹的名称：haxe-2.09-osx -> neko-1.8.2-osx。

![在此处输入图像描述](../Images/5d55bedcfffbd5e1a9de41bf2edecc8b.png) ![在此处输入图像描述](../Images/5dd09aa552a4c33804e79e25776c6063.png)

# c# - XtraReports 双标签结合

> ID：10817758
> 
> 赞同：0
> 
> 时间：2012-05-30T13:55:00.273
> 
> 标签：c#, .net, devexpress, report, xtrareport

我正在尝试在 XtraReports 中做一个简单的条件语句绑定。我将主要报告绑定到我的数据集、我的字段（GoalAmount、GoalName、GoalNumber、GoalStart、GoalEnd）。

现在填充了 GoalNumber 或 GoalAmount。它总是一个或另一个。所以我想做一些类似的事情 -

```
Private void Detail_BeforePrint(object sender, PrintEventArgs e) {
   if ([GoalNumber] != null) {
       xrLabelGoal.Text = [GoalNumber].ToString()
   }
   else {
      xrLabelGoal.Text = [GoalAmount].ToString()
   }

   xrCWPerct.Text = Convert.ToString(Convert.ToInt32(xrLabelGoal.Text)/Convert.ToInt32(xrLabelCurrentValue.Text);
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:07:05.963

我找到了答案——

```
xrLabelGoal.Text =  ((DataRowView)GetCurrentRow()).Row["goalnumber"].ToString(); 
```

原来我错过了允许我使用 DataRowView 的 System.Data。这解决了它。

# jsf - 使用 PrimeFaces SelectOneMenu 禁用具有自定义内容 / p:column 的项目

> ID：10817760
> 
> 赞同：0
> 
> 时间：2012-05-30T13:55:06.153
> 
> 标签：jsf, jsf-2, primefaces, selectonemenu

在使用自定义内容时，似乎无法从 PrimeFaces (3.3) 禁用 SelectOneMenu 中的项目（如[http://www.primefaces.org/showcase-labs/ui/selectOneMenu.jsf](http://www.primefaces.org/showcase-labs/ui/selectOneMenu.jsf)所示）。

测试用例很简单，只需要以下内容：

```
<h:form>
    <p:selectOneMenu value="#{testBean.selected}">
        <f:selectItems value="#{testBean.options}" var="t"
            itemLabel="#{t.label}" itemValue="#{t}"
            itemDisabled="#{t.value % 2 == 0 ? 'true' : 'false'}" />
    </p:selectOneMenu>

    <p:selectOneMenu value="#{testBean.selected}" var="x">
        <f:selectItems value="#{testBean.options}" var="t"
            itemLabel="#{t.label}" itemValue="#{t}"
            itemDisabled="#{t.value % 2 == 0 ? 'true' : 'false'}" />
        <p:column>
            #{x.label} -- #{x.label}
        </p:column>
    </p:selectOneMenu>
</h:form> 
```

和以下 Java 文件：

豆：

```
@Named
public class TestBean {

private TestObject  selected;
// getter/setter

public List<TestObject> getOptions() {
    return Arrays.asList(new TestObject("1"), new TestObject("2")); }
} 
```

目的：

```
public class TestObject {
    private Integer value;
    // getter/setter

    public TestObject() {}
    public TestObject(String s) {
        this.setLabel(s);
    }
    public String getLabel() {return "label: " + value;}
    public void setLabel(String l) {this.value = new Integer(l);}
} 
```

第一个下拉菜单工作正常，第二个没有。关于如何解决这个问题的任何想法？

# php - 使用 jQuery 使行可点击并在 div 中加载结果

> ID：10817763
> 
> 赞同：1
> 
> 时间：2012-05-30T13:55:18.200
> 
> 标签：php, jquery, ajax

我有两个问题：
1\. 我怎样才能使我的表格行可点击并仍然在 div 中加载 ajax 内容`ajaxContent`？
2.如何在`<div id='ajaxContent'>`

这是`students.php`

```
<?php

echo "<table id='tblStudents'>\n";

        echo "<thead><tr>\n";
            echo "<td>Namn</td>\n";
            echo "<td>Personnummer</td>\n";
            echo "<td>Startdatum</td>\n";
            echo "<td>Slutdatum</td>\n";
        echo "</tr></thead>\n";

        echo "<tbody>\n";
        while ($row = mysql_fetch_assoc($list_students)) {

            $count = ($count + 1) % 2; //will generate 0 or 1 and is used to alternatve the css classes row0 and row1 in the loop result

            echo "<tr class='row$count'>\n";
                echo "<td><a class='ajaxCall' href='#' rel='".$row['student_id']."'>" . $row['student_firstname'] . "</a> " . $row['student_lastname'] . "</td>\n";
                echo "<td>" . $row['student_socialnr'] . "</td>\n";
                echo "<td>" . $row['student_startdate'] . "</td>\n";
                echo "<td>" . $row['student_enddate'] . "</td>\n";

            echo "</tr>\n";
        }
        echo "</table>\n";  
}

?>
<div id='ajaxContent'></div>

<script src="js/jfunc.js"></script> 
```

这是`jfunc.js`

```
$('a.ajaxCall').click(function() {
var rowId = $(this).attr('rel');

 $.ajax({
  type: "get",
  url: '/page/editstudent.php',
  data: { student_id: rowId },
  success: function(data) {
  $('#ajaxContent').html(data);
 }
}); 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:03:10.227

使用事件委托并监听表格上的所有点击。

```
$("#tblStudents").on("click", "tr", function(e){
    var row_id = $("td:first a.ajaxCall", this).attr("rel");
    $("#ajaxContent").html("Loading...");
    $.ajax({
        url: "/page/editstudent.php",
        data: { 'student_id':row_id },
        success: function(data){
            $("#ajaxContent").html(data);
        }
    });
}); 
```

### 附带问题

您不需要为每个表行添加`0`或添加类名。`1`使用纯 CSS，您可以针对偶数行和奇数行来设置不同的样式：

```
#tblStudents tr:nth-child(even) {
    background: #f1f1f1;
    color: #999;
} 
```

此外，我鼓励您将学生 ID 存储在数据属性而不是`rel`属性上。这就是数据属性存在的目的。您甚至可以将它们存储在其`<tr>`自身上。更多关于[http://api.jquery.com/data/#data-html5](http://api.jquery.com/data/#data-html5)的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:02:11.223

1 a 在每个 tr 上添加一个点击事件

```
$('#tblStudents').on('click', 'tr', function(e) {
     // do something
]); 
```

1b防止ajaxCall上的click事件冒泡

```
$('a.ajaxCall').click(function(e) {
    e.preventDefault();
    e.stopPropagation();
    var rowId = $(this).attr('rel');

    $.ajax({
    type: "get",
    url: '/page/editstudent.php',
    data: { student_id: rowId },
    success: function(data) {
    $('#ajaxContent').html(data);
    }
    }); 
```

2 在请求ajax url之前，在ajaxContent中插入一张图片。请求完成后，图像将被新的 html 覆盖

# c# - Web服务从方法返回匿名对象

> ID：10817764
> 
> 赞同：0
> 
> 时间：2012-05-30T13:55:19.717
> 
> 标签：c#, web-services, service

我有一个简单的 Web 服务，它从数据库中获取数据，我想将这些数据作为数据集、字符串、XML 返回。但是 Web 服务 xml 没有得到我返回的类型。问题是，是否可以作为对象和 Web 服务 XML 返回以显示正确的标签。目前它显示此标签 anytype 而不是 string 例如。

这是方法

```
 [WebMethod]
public Object serviceForPostcode(String postCode, String type)
{
/**
* 
*  create dataset to store query
*  convert dataset to required return type
*  create types for returned object
*  
* 
**/

    SqlDataAdapter adapter = new SqlDataAdapter();
    SqlCommand cmd = new SqlCommand();
    SqlConnection conn = new SqlConnection(dbConnection());
/**
* 
*              -- types--
* 
**/
    XmlDocument xmlD = new XmlDocument();
    StringWriter sw = new StringWriter();
    DataSet dataSet = new DataSet();
/**
* 
* 
**/ 

    // connection and query string
    string dbQuery = "SELECT id, address1, address2, address3, address4, address5, post_code, country FROM paf WHERE (post_code = @postCode)";
    try
    {
        cmd.Parameters.Add(new SqlParameter("@postcode",SqlDbType.NChar, 10)).Value = postCode.ToUpper();
        cmd.CommandText = (dbQuery);
        cmd.CommandType = CommandType.Text;
        cmd.Connection = conn;
        adapter.SelectCommand = cmd;
        adapter.Fill(dataSet,"post codes");

    }
    catch(Exception e)
    {
        System.Web.HttpContext.Current.Response.Write(e.Message);

    }
    finally
    {
       //close database connection
        conn.Close();
    }
    if (type.Equals("xml", StringComparison.InvariantCultureIgnoreCase))
    {
        return dataSet.GetXml();
    }
    else if (type.Equals("string", StringComparison.InvariantCultureIgnoreCase))
    {

        dataSet.WriteXml(sw);
        return sw.ToString(); 
    }
    else if(type.Equals("dataset",StringComparison.InvariantCultureIgnoreCase))
    {
        return "";
    }

        return "error";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:35:53.917

为什么不创建三种不同的方法？

```
public string serviceForPostcodeString(String postCode)

public XElement serviceForPostcodeXML(String postCode)

public DataSet serviceForPostcodeDataSet(String postCode) 
```

或者总是返回一个 DataSet 并让消费者将其转换为 XML 或 String。

**编辑**

一个技巧是使用泛型类型，但这不适用于 web 服务。但是您也可以在客户端使用通用方法来包装对 Web 服务的调用。像这样的东西：

```
public T serviceForPostcodeWrapped<T>(String postCode)
{
    // ... do some checking for allowed types here ...
    return (T)serviceForPostcode(postCode, typeof(T).Name);
} 
```

免责声明：我说你*可以*，不是*你应该*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:28:30.020

试试这个：

```
 [WebMethod]
public string serviceForPostcode(String postCode, String type) 
```

# javascript - 在 iOS 中从网页执行 JS 函数

> ID：10817765
> 
> 赞同：1
> 
> 时间：2012-05-30T13:55:27.260
> 
> 标签：javascript, ios, function, uiwebview

我正在制作一个从网站获取内容的 iOS 应用程序。该网站允许通过在网页中单击链接时调用的 JS 脚本对内容进行投票。

我想在我的应用程序中实现投票，而不必向用户显示网页并要求我点击投票。

我知道可以使用执行 UIWebView 的 javascript 函数

```
[myWebView stringByEvaluatingJavaScriptFromString:@"myJSFunction()"] 
```

但是加载 UIWebView 有点长，特别是因为它只是投票（应该很快），没有更简单的方法来调用 JS 函数而不需要用户交互（除了在应用程序中点击投票按钮，课程）

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:13:01.807

在 iOS 上，该函数是执行 JS 函数的唯一方法。

您是否在谈论使用本机 UI 输入一些投票信息，但处理信息由 JS 完成？

这取决于 JS 正在做什么，即它是否与 dom 交互等，但您可能不必等待 UIWebView 完成下载/加载/渲染网页，然后才能调用 stringByEvaluatingJavaScriptFromString。JS 可能可以立即使用，在这种情况下，您可以在等待调用 webViewDidFinishLoad 之前调用 stringByEvaluatingJavaScriptFromString 吗？

# apache - Apache CXF - 如何在没有 Spring 的情况下注册 SOAP 服务？

> ID：10817766
> 
> 赞同：1
> 
> 时间：2012-05-30T13:55:38.547
> 
> 标签：apache, rest, soap, cxf

我需要注册一个没有 Spring 配置的 SOAP 服务。我知道在 RESTFUL 服务的情况下可以做到这一点（通过使用 CXFNonSpringJaxrsServlet 并在 web.xml 中进行配置），但我怎么能对 SOAP 服务使用类似的东西呢？这是我原来的 applicationContext.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:cxf="http://cxf.apache.org/core"
   xmlns:jaxws="http://cxf.apache.org/jaxws"
   xmlns:jaxrs="http://cxf.apache.org/jaxrs"
   xsi:schemaLocation="
   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
   http://cxf.apache.org/core
   http://cxf.apache.org/schemas/core.xsd
   http://cxf.apache.org/jaxws
   http://cxf.apache.org/schemas/jaxws.xsd
   http://cxf.apache.org/jaxrs
   http://cxf.apache.org/schemas/jaxrs.xsd"
   default-autowire="byName">

<!-- Load CXF modules from cxf.jar -->
<import resource="classpath:META-INF/cxf/cxf.xml"/>
<import resource="classpath:META-INF/cxf/cxf-extension-soap.xml"/>
<import resource="classpath:META-INF/cxf/cxf-servlet.xml"/>
<import resource="classpath:META-INF/cxf/cxf-extension-jaxrs-binding.xml"/>

<bean id="businessServiceabilityService" 
      class="XXXXXXXXXXXXXXXXXXServiceImpl"
      autowire="autodetect"/>
<bean id="jaxbBean"
      class="org.apache.cxf.jaxb.JAXBDataBinding"
      scope="prototype"/>
<bean id="jaxws-and-aegis-service-factory"
      class="org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean"
      scope="prototype">
    <property name="dataBinding" ref="jaxbBean"/>
    <property name="serviceConfigurations">
        <list>
            <bean class="org.apache.cxf.jaxws.support.JaxWsServiceConfiguration"/>
            <bean class="org.apache.cxf.aegis.databinding.AegisServiceConfiguration"/>
            <bean class="org.apache.cxf.service.factory.DefaultServiceConfiguration"/>
        </list>
    </property>
</bean>

<!-- JAX-RS -->
<jaxrs:server id="businessServiceabilityServiceJaxRsServer" address="/bs/rest">
    <jaxrs:serviceBeans>
        <ref bean="businessServiceabilityService"/>
    </jaxrs:serviceBeans>
</jaxrs:server>

<!-- JAX-WS -->
<jaxws:endpoint implementor="#businessServiceabilityService" address="/bs/soap">
    <jaxws:serviceFactory>
        <ref bean="jaxws-and-aegis-service-factory"/>
    </jaxws:serviceFactory>
</jaxws:endpoint> 
```

如何注册 SOAP 服务？我在 web.xml 中找不到这样做的任何可能性。web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
     version="2.5">
<display-name></display-name>

<servlet>
    <servlet-name>CXFNonSpringJaxrsServlet</servlet-name>
    <servlet-class>org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet</servlet-class>
    <init-param>
        <param-name>jaxrs.providers</param-name>
        <param-value>XXXXXXXXXXXXXXXXXXXServiceImpl</param-value>
    </init-param>
    <init-param>
        <param-name>jaxrs.serviceClasses</param-name>
        <param-value>XXXXXXXXXXXXXXXXXXXServiceImpl</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>CXFNonSpringJaxrsServlet</servlet-name>
    <url-pattern>/cxf/rest/*</url-pattern>
</servlet-mapping> 
```

先感谢您！五。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-15T03:46:54.750

Spring 框架对于使用 CXF 创建 web 服务是可选的，它将显着减少 pacakge 大小，因为您只需要以下 jars **[截至使用 CXF 2.7.3]**

```
 commons-logging-1.1.1.jar
        cxf-2.7.3.jar
        httpasyncclient-4.0-beta3.jar
        httpclient-4.2.1.jar
        httpcore-4.2.2.jar
        httpcore-nio-4.2.2.jar
        neethi-3.0.2.jar
        wsdl4j-1.6.2.jar
        xmlschema-core-2.0.3.jar 
```

**以下是 JAX-WS 服务的示例**

[http://www.javatips.net/blog/2012/10/cxf-soap-without-spring](http://www.javatips.net/blog/2012/10/cxf-soap-without-spring)

**以下是 JAX-RS 服务的示例**

[http://www.javatips.net/blog/2012/10/cxf-rest-without-spring](http://www.javatips.net/blog/2012/10/cxf-rest-without-spring)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T16:29:52.107

我找到了解决方案。

```
public class MyServiceServlet extends CXFNonSpringServlet {

private static final long serialVersionUID = 1L;

@Override
// Called at startup time to register this web service.
public void loadBus(ServletConfig servletConfig) throws ServletException {
    super.loadBus(servletConfig);

    Bus bus = getBus();
    BusFactory.setDefaultBus(bus);

    createFactoryBean(servletConfig);
}

private void createFactoryBean(ServletConfig servletConfig) {
    String address = servletConfig.getInitParameter("jaxws.address");
    String provider = servletConfig.getInitParameter("jaxws.provider");
    String serviceClass = servletConfig.getInitParameter("jaxws.serviceClass");

    JaxWsServerFactoryBean fb = new JaxWsServerFactoryBean();
    fb.setAddress(address);
    try {
        fb.setServiceBean(Class.forName(provider).newInstance());
    } catch (Exception e) {
        throw new RuntimeException("The class '"+provider+"' cannot be instantiated!", e);
    }
    try {
        fb.setServiceClass(Class.forName(serviceClass).getClass());
    } catch (ClassNotFoundException e) {
        throw new RuntimeException("The class '"+serviceClass+"' cannot be found!", e);
    } 
    fb.create();
}
} 
```

和 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
     version="2.5">

<display-name></display-name>

<!-- CXF config -->
<servlet>
    <servlet-name>CXFNonSpringJaxrsServlet</servlet-name>
    <servlet-class>org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet</servlet-class>
    <init-param>
        <param-name>jaxrs.providers</param-name>
        <param-value>xxx.BusinessServiceabilityServiceImpl</param-value>
    </init-param>
    <init-param>
        <param-name>jaxrs.serviceClasses</param-name>
        <param-value>xxx.BusinessServiceabilityServiceImpl</param-value>
    </init-param>
</servlet>

<servlet>
    <servlet-name>MyServiceServlet</servlet-name>
    <servlet-class>xxx.MyServiceServlet</servlet-class>
    <init-param>
        <param-name>jaxws.address</param-name>
        <param-value>/almafa</param-value>
    </init-param>
    <init-param>
        <param-name>jaxws.serviceClass</param-name>
        <param-value>com.infoaxon.bpt.services.OACCostingServiceSoap</param-value>
    </init-param>
    <init-param>
        <param-name>jaxws.provider</param-name>
        <param-value>xxx.BusinessServiceabilityServiceImpl</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>CXFNonSpringJaxrsServlet</servlet-name>
    <url-pattern>/cxf/rest/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>MyServiceServlet</servlet-name>
    <url-pattern>/cxf/soap/*</url-pattern>
</servlet-mapping>

</web-app> 
```

# c# - 如何在 C# 中向我的所有应用程序发送一条消息？

> ID：10817768
> 
> 赞同：3
> 
> 时间：2012-05-30T13:55:45.153
> 
> 标签：c#, tcp

我一直在研究使用 TCP 通过网络发送消息。

我目前的情况是我在计算机上运行单个应用程序的多个实例。我想发送一条 TCP 消息并让所有应用程序接收该消息并对其采取行动。

所有我能找到的例子有 1 个发送者和 1 个接收者。我不想只是向网络发送一条 TCP 消息，然后让所有监听应用程序接收相同的消息。

我尝试使用[本指南](http://www.csharp-examples.net/socket-send-receive/)，但它似乎也不适用于多个接收器。

任何人都可以将我指向正确的方向，以指导我在上面描述的内容或发布一些示例吗？

编辑：我要发送的只是一个 10 个字符的字符串，也许还有另一种发送/接收类似内容的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-01T04:35:19.783

您可以使用 C# 中的共享内存来实现您的要求。让我解释一个简单的解决方案：例如：

1.  创建一个映射文件（具有特定名称，例如“XXX”），

    *   它将在内存中创建一个字节数组，
    *   将第一个字节设置为零 (0) 或值您可以定义自己的值。（这个字节将决定传入的消息）
2.  如果一个应用程序想向其他应用程序发送消息：

    *   将数据（使用 UTF-8 或任何编码转换为字节数组）从第三个元素（索引 = 2）写入内存数组
    *   设置第一个字节（索引=0）为1
    *   将第二个字节设置为随机值（为什么我使用这个字节？我将在下面解释。）
3.  在接收端，他们还打开同名“XXX”的映射文件

    *   他们需要在第一个字节上触发以检测传入的消息。您可以使用 Timer（间隔可以是 500 毫秒）来检查该字节
    *   如果第一个字节是 1 -> 它有传入消息，则从第三个元素（从索引 2）读取数据
4.  您现在可以接收来自其他应用程序的消息，但是有一个小问题：

    *   在下一个触发器中，应用程序仍然继续将其视为有新的传入消息。
    *   所以此时，您需要读取第二个（随机）字节的值并将其存储为备份，以便在下次触发时进行比较。
    *   如果备份 id 不等于新 id，则这是一条真正的新传入消息

希望这能解释您如何解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:28:26.640

Are these GUI applications? If yes, you could use `SendMessage` or `PostMessage` with a destination of `HWND_BROADCAST`. (although this will only let you send a pair of numbers, not a "string")

More complex, but designed exactly for this purpose, is a [mailslot](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365576%28v=vs.85%29.aspx).

> Mailslots, on the other hand, are a simple way for a process to broadcast messages to multiple processes

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:30:08.283

如果您想向所有应用程序实例发送消息，您可以查看`SignalR`.

有几篇文章确实介绍了这个框架：

*   [具有与 SignalR 的实时持久长期运行连接的异步可扩展 Web 应用程序](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)
*   [教程：SignalR 入门 (C#)](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)
*   [带有 SignalR 的 ASP.NET MVC 3 实时协作应用程序](http://www.dotnetcurry.com/ShowArticle.aspx?ID=780)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T13:04:09.120

可能愚蠢但简单且可能......当通过一个干净的接口抽象时可能是一个好的开始：为应用程序选择一个共享目录，将包含消息的文件写入该目录并使用 FileWatcher 监听目录中的更改。

一旦您的应用程序需求增加，请用使用 MSMQ 或类似企业的接口实现替换接口实现。

另一个简单的解决方案是共享内存/[内存映射文件](http://msdn.microsoft.com/en-us/library/dd997372.aspx)。该 API 自 v4 起包含在 .NET 框架中。不过，您必须手动进行读/写同步。

# vba - VBA Excel 代码在 2010 年运行比 2007 年慢得多

> ID：10817770
> 
> 赞同：0
> 
> 时间：2012-05-30T13:55:48.687
> 
> 标签：vba, excel-2007, excel-2010

我有一些代码在 Excel 2007 中运行良好，但在 Excel 2010 中使用时需要大约十倍的时间才能运行，并导致整个任务栏/其他程序无响应。

我不认为硬件是问题，因为运行 Excel 2007 的计算机是具有 2 gigs ram 的 Pentium 4，而运行 2010 的计算机是具有 8 gigs ram 的 i7。

这是代码本身：

```
Sub Macro6()
    With Application
        .ScreenUpdating = False 'Prevent screen flickering
        .Calculation = xlCalculationManual 'Preventing calculation
        .DisplayAlerts = False 'Turn OFF alerts
        .EnableEvents = False 'Prevent All Events
    End With

    Dim i As Integer
    Dim j As Integer
    Dim Anc As String
    Dim MSA As String

    j = 1

    Do
        i = 0
        MSA = ActiveCell
        Selection.Copy
        Sheets("Sheet1").Select
        ActiveCell.Offset(0, -2).Select
        ActiveSheet.Paste
        ActiveCell.Offset(0, 2).Select
        Sheets("wip").Select
        Do
            i = i + 1
            ActiveCell.Offset(0, 1).Select
            Anc = ActiveCell.Offset(-j, 0)
            Selection.Copy
            Sheets("Sheet1").Select
            ActiveCell.Offset(0, -1) = Anc
            ActiveCell.Offset(0, -2) = MSA
            ActiveSheet.Paste
            ActiveCell.Offset(1, 0).Select
            Sheets("wip").Select

        Loop Until IsEmpty(ActiveCell.Offset(0, 1))
        j = j + 1
        ActiveCell.Offset(1, -i).Select
    Loop Until IsEmpty(ActiveCell)

    'Speeding Up VBA Code
    With Application
        .ScreenUpdating = True 'Prevent screen flickering
        .Calculation = xlAutomatic 'Preventing calculation
        .DisplayAlerts = True 'Turn OFF alerts
        .EnableEvents = True 'Prevent All Events
    End With
End Sub 
```

代码做了我想要的，但我担心为什么在 2010 年运行时间会有如此大的差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:39:44.440

这是你想要做的吗？

```
Option Explicit

Sub Sample()
    Dim ws1 As Worksheet, ws2 As Worksheet
    Dim i As Long, j As Long, k As Long, lRow As Long, lCol As Long

    On Error GoTo Whoa

    With Application
        .ScreenUpdating = False
        .Calculation = xlCalculationManual
        .EnableEvents = False
    End With

    '~~> Setting the worksheets to work with
    Set ws1 = Sheets("wip"): Set ws2 = Sheets("Sheet1")

    '~~> Setting the start cell in "Sheet1"
    k = 3

    With ws1
        '~~> Get the last row in Col A of "wip"
        lRow = .Range("A" & .Rows.Count).End(xlUp).Row
        '~~> Get the last column in row 3 of "wip"
        lCol = .Cells(3, .Columns.Count).End(xlToLeft).Column

        '~~> Looping through rows in Col A in "wip"
        For i = 3 To lRow
            '~~> Looping through columns in the relevant row in "wip"
            For j = 3 To lCol + 1
                '~~> Writing output directly in "Sheet1"
                ws2.Cells(k, 1).Value = ws1.Cells(i, 1).Value
                ws2.Cells(k, 3).Value = ws1.Cells(i, 1).Offset(, j - 2).Value
                k = k + 1
            Next j
        Next i
    End With

LetsContinue:
    With Application
        .ScreenUpdating = False
        .Calculation = xlCalculationManual
        .EnableEvents = False
    End With
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

# android - 将基于可绘制对象的视图传递给 ImageView

> ID：10817771
> 
> 赞同：0
> 
> 时间：2012-05-30T13:55:52.883
> 
> 标签：android, gridview, imageview, drawable

我有这样的事情：
`view = gridView.getChildAt(position)`

gridView 中的所有元素都是存储在可绘制文件夹中的可绘制对象
现在我的问题：
如何将视图传递给 imageView 或如何从视图中获取 resourceId？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:03:26.710

[This](http://developer.android.com/resources/tutorials/views/hello-gridview.html) tutorial should have everything you need, the only difference is, that you need to pass in the item at `gridView.getChildAt(position)` rather then all the items in the gridView as in this tutorial

you would want to do something like

```
 imageView.setImageResource(gridView.getChildAt(position)) 
```

but without seeing your code i cannot put up the correct answer, but looking at the tutorial that i have added, you would add code like above to get want you want

# c# - 在 C# 中高效地同时访问和写入同步字典

> ID：10817773
> 
> 赞同：0
> 
> 时间：2012-05-30T13:55:54.810
> 
> 标签：c#, performance, concurrency

我正在寻找将键值对存储在静态同步字典（.NET 3.5，因此不是 ConcurrentDictionary）中同时能够同时访问它们的最有效方法。

```
Dictionary.Add(key, value);

if (Dictionary.Count >= 200)
{
       foreach (KeyValuePair<string, Info> pair in Dictionary)
       {
              Info entry = pair.Value;
              StoreInDatabase(entry);
       }

       Dictionary.Clear();
} 
```

这就是问题所在。如果一个用户正在向字典中添加内容，而另一个用户正在访问并存储到数据库中，则会中断。

```
lock (Dictionary)
{
    //Same Code Above
} 
```

我放了一个锁，它似乎工作正常，但我想知道是否有更有效的方法来做到这一点。它不像我希望的那样有效。我们欢迎所有的建议！

注意：我必须使用 StoreInDatabase 方法来存储值。

* * *

修订后的代码：

```
private static SynchronizedDictionary<string, Info> Dictionary = new SynchronizedDictionary<string, Info>();

...

Dictionary.Add(key, value);

if (Dictionary.Count >= 200)
{
       SynchronizedDictionary<string, Info> temporaryDictionary = new SynchronizedDictionary<string, Info>();
       lock (Dictionary)
       {
            temporaryDictionary = Dictionary;
            Dictionary.Clear();
       }

       lock(temporaryDictionary)
       {
            foreach (KeyValuePair<string, Info> pair in temporaryDictionary)
            {
                  Info entry = pair.Value;
                  StoreInDatabase(entry);
            }
       }
} 
```

这大大提高了性能。谢谢flq！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:59:26.700

您将锁定数据库操作，与内存中的活动相比需要很*长时间*。

在锁中，您应该复制要存储在数据库中的值并清除字典。然后你可以释放字典，其他一些线程将这些东西写入数据库。

此外，使用一些私有锁定对象以最大程度地减少死锁的可能性可能是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:39:06.433

我已经使用 Interlocked 实现了一个线程安全的字典，这是可用的最轻量级的同步机制。

你可以在这里找到[源代码](http://fasterflect.codeplex.com/SourceControl/changeset/view/32749c4dd310#Fasterflect/Fasterflect/Caching/Cache.cs)。它是为 Fasterflect 编写的，Fasterflect 是一个有助于使反射任务更轻松、更快的库。该代码使用 #ifdefine 有条件地启用 .NET 3.5 的自定义字典，因为我们的基准测试显示 .NET 4.0 ConcurrentDictionary 更快。

正如 flq 指出的那样，在持有锁的同时访问数据库是一个非常糟糕的主意。认真地说，不是你想做的事情。寻找更好的解决方案，例如将需要存储的数据复制到临时数据结构中。

# ipad - XCode 4 CpResource 错误

> ID：10817774
> 
> 赞同：10
> 
> 时间：2012-05-30T13:55:57.513
> 
> 标签：ipad, xcode4

当我使用 Xcode 4 构建我的应用程序时，它总是显示以下错误消息：

```
 CpResource "Color Calculator/X.png"    
 "/Users/mauro/Library/Developer/Xcode/DerivedData/Color_Calculator-eomtenpvfeomibgervrskkupofrx/Build/Products/Debug-iphonesimulator/Color Calculator.app/X.png" 
```

似乎 Xcode 想在 DerivedData 中复制 X.png。

但我的项目中没有 X.png。我曾经拥有它，但它在某些版本之前已被删除（与许多其他 png 一起）。为了验证，我删除了项目的xibs中的所有对象。所以现在我有两个空的xib，但是错误消息继续出现。

谢谢你。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-30T14:00:05.737

Click on your project, go in the tab "Build phase" then in the tab "Copy bundle ressources" and delete the .png to tell xcode to stop trying to copy it :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-28T12:39:34.623

[![复制捆绑资源](../Images/56bde4591750ea7b3308d9e6a950a419.png)](https://i.stack.imgur.com/QHPpJ.png)

在我的情况下，我删除了图标并添加了我的“启动屏幕和主故事板”。

# java - 挂断点越过线程 run()

> ID：10817775
> 
> 赞同：1
> 
> 时间：2012-05-30T13:55:59.913
> 
> 标签：java, multithreading, debugging

在尝试调试多线程程序时，我遇到了一个新问题。下面，我包含了一个测试程序来演示我的问题。本质上，当我在对线程的 start() 方法以及该线程的 run() 方法的调用上设置断点时，如果我在调试器中“继续”，一切都会好起来的。但是，如果我跳过，我可以跳过对 start()、println() 和 join() 的调用，之后程序会等待执行完成，但这永远不会发生。线程似乎没有执行，我在线程的 run() 中的断点从不跳闸。我必须退出程序。

现在，如果 run() 上没有断点，我继续还是单步都没有关系；线程执行。我在这里想念什么？

请注意，我正在使用 vanilla eclipse 调试。

```
public class Test {
    public static void main(String[] args) {
        try {
            Thread myThread = new Test().new TestThread();
            long threadStartTime = System.currentTimeMillis();
            myThread.start(); // **********Breakpoint 1
            System.out.println("Thread started");
            myThread.join();
            long threadExecutionTime = System.currentTimeMillis() - threadStartTime;
            System.out.println("Thread finished execution in " + threadExecutionTime + " milliseconds.");
        } catch(InterruptedException e) {
            System.err.println(e.getMessage());
        }
    }

    private class TestThread extends Thread {
        @Override
        public void run() { // **********Breakpoint 2
            try {
                sleep(5*1000);
            } catch(InterruptedException e) {
                System.err.println(e.getMessage());
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:03:32.327

如果您使用 eclipse 进行调试，您应该在调试窗口中看到线程列表。从那里选择另一个线程的堆栈跟踪，您也应该能够调试运行方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T14:03:35.977

你确定断点`run()`没有被绊倒吗？在 Eclipse 中，您需要单击第二个线程才能看到它已暂停。我怀疑线程已经启动但正在等待你说继续。

我怀疑如果您没有断点，`run()`那么跨步`start()`将可以正常工作。它是第二个断点，它阻止了另一个线程并阻止它运行`sleep()`或返回到`join()`.

在下图中，您可以看到我跳过了该`start()`方法并`Thread-1`已启动。但它已暂停（请参阅黄色暂停条）等待您切换到它并继续。

![在此处输入图像描述](../Images/a45803206729616811e7ab4391d03d16.png)

# ruby-on-rails - Rails 控制台与生产服务器上的服务器差异

> ID：10817776
> 
> 赞同：7
> 
> 时间：2012-05-30T13:56:02.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, dreamhost, fastcgi

在使用 RVM Ruby 1.9.3-p194 将一个非常基本的 Rails 3.2.3 试用站点部署到“生产”服务器（不是真正投入生产，谢天谢地！）后，我发现以下列出的命令是正确的：

```
╔══════════════════════════════════════╤═══╗
║ command issued                       │OK?║
╟──────────────────────────────────────┼───╢
║ bundle exec rails console            │ N ║
║ bundle exec rails console production │ Y ║
║ bundle exec rails server             │ Y ║
║ bundle exec rails server production  │ N ║
╚══════════════════════════════════════╧═══╝ 
```

**我的第一个问题：这是预期的吗？**（我原以为右栏中的模式应该是 NYNY。）

更多信息：由于服务器上未安装*sqlite3*`bundle exec rails console` gem的可理解原因而失败。但是，失败的痕迹更难理解：*`bundle exec rails server production`*

 *```
$ bundle exec rails server production
Exiting
/home/spkspike/www/spike.sampablokuper.com/releases/20120530134819/vendor/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler.rb:63:in `require': cannot load such file -- rack/handler/production (LoadError)
from /home/spkspike/www/spike.sampablokuper.com/releases/20120530134819/vendor/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler.rb:63:in `try_require'
from /home/spkspike/www/spike.sampablokuper.com/releases/20120530134819/vendor/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler.rb:16:in `get'
from /home/spkspike/www/spike.sampablokuper.com/releases/20120530134819/vendor/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:269:in `server'
from /home/spkspike/www/spike.sampablokuper.com/releases/20120530134819/vendor/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands/server.rb:59:in `start'
from /home/spkspike/www/spike.sampablokuper.com/releases/20120530134819/vendor/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:55:in `block in <top (required)>'
from /home/spkspike/www/spike.sampablokuper.com/releases/20120530134819/vendor/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
from /home/spkspike/www/spike.sampablokuper.com/releases/20120530134819/vendor/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

**我的第二个问题：如何最好地解决这个错误？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-30T14:22:37.287

您不想使用生产环境以生产模式启动服务器吗？

```
rails server -e production 
```

rails 控制台环境和 rails server -e 环境的语法差异有点像 PITA

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T14:06:57.223

在控制台生产的情况下指定环境，在服务器的情况下它指定其他东西（可能使用哪个服务器 webrick/...）。

因此，如果您想指定环境，请执行以下操作：

```
ENV=production rails server 
```*

# php - 使用 yii 处理动态数据和 highcharts

> ID：10817783
> 
> 赞同：1
> 
> 时间：2012-05-30T13:56:29.960
> 
> 标签：php, yii, highcharts, yii-cactiverecord

大家好，感谢阅读我正在徘徊如何将动态数据插入到 highcharts 扩展中，例如我有如下的 highcharts 扩展（代码位置 => Reprting/index）：

```
$this->Widget('ext.highcharts.HighchartsWidget', array(

   'options'=>array(

       'credits' => array('enabled' => false),
      'title' => array('text' => $graphTitle),
      'xAxis' => array(
         'categories' => array('Apples', 'Bananas', 'Oranges')
      ),

      'yAxis' => array(
         'title' => array('text' => 'Fruit eaten')
      ),
      'series' => array(
         array('name' => 'Jane', 'data' => array(3, 6, 7)),
         array('name' => 'John', 'data' => array(5, 7, 3))
      )   ))); 
```

我在控制器中有以下代码：

```
public function actionIndex()
{
        $model= $this->loadModel();
    $dataProvider=new CActiveDataProvider('Reporting');
        $graphTitle= 'Price Per Product';
    $this->render('index',array(
    'dataProvider'=>$dataProvider, 'graphTitle'=>$graphTitle, 'model'=>$model,
    ));
} 
```

以下代码是模型：

```
class Reporting extends CActiveRecord
{

    public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }

    /**
     * @return string the associated database table name
     */
    public function tableName()
    {
        return '{{price}}';
    }

    /**
     * @return array validation rules for model attributes.
     */
    public function rules()
    {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
            array('id_product, id_channel', 'required'),
            array('id_product, id_channel', 'numerical', 'integerOnly'=>true),
            array('price_min, price_max', 'numerical'),
            // The following rule is used by search().
            // Please remove those attributes that should not be searched.
            array('id_price, id_product, id_channel, price_min, price_max', 'safe', 'on'=>'search'),
        );
    }

    /**
     * @return array relational rules.
     */
    public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
            'idChannel' => array(self::BELONGS_TO, 'Channel', 'id_channel'),
            'idProduct' => array(self::BELONGS_TO, 'Product', 'id_product'),
        );
    }

    public function attributeLabels()
    {
        return array(
            'id_price' => __('Id Price'),
            'id_product' => __('Id Product'),
            'id_channel' => __('Id Channel'),
            'price_min' => __('Price Min'),
            'price_max' => __('Price Max'),
        );
    }

    public function search()
    {

        $criteria=new CDbCriteria;

        $criteria->compare('id_price',$this->id_price);
        $criteria->compare('id_product',$this->id_product);
        $criteria->compare('id_channel',$this->id_channel);
        $criteria->compare('price_min',$this->price_min);
        $criteria->compare('price_max',$this->price_max);

        return new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
        ));
    }
} 
```

我如何将所有这些放在一起以实现动态驱动图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:22:07.480

为您提供一份样品：

```
<?php
    $xAxis = array(1,2,3);
    $yAxis = array(4,5,6);
    $this->Widget('ext.highcharts.HighchartsWidget',
        array(
            'id' => 'something',
            'options'=> array(
                'chart' => array(
                    'defaultSeriesType' => 'bar',
                    'style' => array(
                        'fontFamily' => 'Verdana, Arial, Helvetica, sans-serif',
                    ),
                ),
                'title' => array(
                    'text' => 'title',
                ),
                'xAxis' => array(
                    'title' => array(
                        'text' => 'xTitle,
                    ),
                    'categories' => $xAxis,
                    'labels' => array(
                        'step'     => 1,
                        'rotation' => 0,
                        'y'        => 20,
                    ),
                ),
                'yAxis' => array(
                    'title' => array(
                        'text' => 'yTitle,
                    ),
                ),
                'series' => array(
                    array(
                        'name'   => 'seriesName',
                        'data'   => $yAxis,
                        'shadow' => false,
                    )
                )
            )
        )
    );
    ?> 
```

要自定义它，您必须构建自己的 $yAxis、$xAxis 数组，并修改标题和设置。有关更多信息，请查看[官方 Highcharts 文档](http://www.highcharts.com/documentation/how-to-use)。

# macos - SMJobBless 返回错误 4098

> ID：10817785
> 
> 赞同：4
> 
> 时间：2012-05-30T13:56:34.797
> 
> 标签：macos, code-signing

我正在尝试使用 SMJobBless 安装安全帮助工具。当它失败并且在调用 SMJobBless 之前，我正在调用 SMJobRemove，因为我需要删除该工具的旧版本并且这会成功。SMJobBless 返回错误代码 4098。NSError 对象只是告诉我“操作无法完成。CodeSigning 子系统中出现错误。”

如果我重新运行我的代码，SMJobBless 函数就会起作用。我认为这是因为它之前已被删除，但为什么它第一次没有工作？然后我可以与该工具通信，一切正常。观察到一切运行正常，我相信我可以确定我满足文档中描述的 SMJobBless 的五个要求。

如果我增加工具的版本并重试，SMJobRemove 将起作用，但是，SMJobBless 再次出现错误代码 4098。

如果重要的话，我使用的是 OS X 10.7.3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:16:36.857

可能是您正在调用`CFBundleCopyInfoDictionaryForURL`代码签名的帮助工具吗？

如果是这样，看起来这个函数似乎破坏了代码签名的有效性。（大概是因为`CFBundle`修改了内存中的Info.plist数据，但这只是我的猜测。）

解决方案是使用`SecCodeCopySigningInformation`读取帮助工具的版本信息：

```
-(NSString *) bundleVersionForCodeSignedItemAtURL:(NSURL *)url {
    OSStatus status;

    // Sanity check -- nothing begets nothing
    if (!url) {
        return nil;
    }

    // Get the binary's static code
    SecStaticCodeRef codeRef;
    status = SecStaticCodeCreateWithPath((CFURLRef)url, kSecCSDefaultFlags, &codeRef);
    if (status != noErr) {
        NSLog(@"SecStatucCodeCreateWithPath() error for %@: %d", url, status);
        return nil;
    }

    // Get the code signature info
    CFDictionaryRef codeInfo;
    status = SecCodeCopySigningInformation(codeRef, kSecCSDefaultFlags, &codeInfo);
    if (status != noErr) {
        NSLog(@"SecCodeCopySigningInformation() error for %@: %d", url, status);
        CFRelease(codeRef);
        return nil;
    }

    // The code signature info gives us the Info.plist that was signed, and
    // from there we can retrieve the version
    NSDictionary *bundleInfo = (NSDictionary *) CFDictionaryGetValue(codeInfo, kSecCodeInfoPList);
    NSString *version = [bundleInfo objectForKey:@"CFBundleVersion"];

    // We have ownership of the code signature info, so we must release it.
    // Before we do that, we need to hold onto the version otherwise we go
    // crashing and burning.
    [[version retain] autorelease];
    CFRelease(codeInfo);
    CFRelease(codeRef);

    return version;
} 
```

值得称赞的是：有关的重要信息`CFBundleCopyInfoDictionaryForURL`来自[Ian MacLeod's`SMJobKit`](https://github.com/nevir/SMJobKit)。

# ios - 在 if 条件内调用数组元素时出错？

> ID：10817786
> 
> 赞同：-1
> 
> 时间：2012-05-30T13:56:42.957
> 
> 标签：ios, xcode

当我调用这个 if 条件时， if 内的条件不会被执行。用于调用元素的代码

```
if([NSNumber numberWithFloat:(([[[shared instance].y objectAtIndex:0] floatValue]))>10])
{
 [MONObject sharedInstance1[.counterPlus++;  //counter used to update the value
} 
```

无论内部条件如何，计数器值都会更新？这是从数组中获取元素并进行比较的方法吗？

注意：我创建了一个单音阵列！请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:11:12.353

**不要试图把所有东西都塞进一个语句中**——这是一种糟糕的编码风格，难以调试（正如你所发现的）并且难以维护。使用一些中间变量，这样你就可以看到发生了什么。

条件始终为真的原因是您的 if 语句归结为：

```
if ([NSNumber numberWithFloat: <something>])... 
```

`-[NSNumber numberWithFloat:]`始终为真——事实上任何对象总是等同于真。所以即使`[NSNumber numberWithBool: NO]`是真的。

如果您只想检查您的值是否大于 10（假设您的数组包含`NSNumber`s），您需要：

```
NSNumber * someNumber = [[shared instance].y objectAtIndex:0];

if([someNumber floatValue] > 10)
{
    [MONObject sharedInstance1[.counterPlus++;  //counter used to update the value
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:37:21.267

如果那是您的实际代码，则您有一个后括号...

```
[MONObject sharedInstance1[.counterPlus++; 
```

应该

```
[MONObject sharedInstance1].counterPlus++; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:11:51.293

一旦我解码了所有括号，您似乎正在测试是否正在创建 NSNumber 对象。

# ios - MKAnnotation 在 MKPolyline 上的平滑移动

> ID：10817787
> 
> 赞同：4
> 
> 时间：2012-05-30T13:56:44.827
> 
> 标签：ios, iphone, mkmapview, mkannotation

我正在开发一个可以在地图上建议从 A 点到 B 点的路线的应用程序。

我正在使用 MKPolyline 绘制路线。

我的问题是，当建议路线并且应用程序用户遵循路线时，用户当前位置（蓝点）可能不精确（跳来跳去，尤其是在中心城市，即使使用 BestForNavigation LocationManager 准确度）。

除了蓝点当前位置之外，我还想要另一个 MKAnnotation，它可以顺利地跟随用户在路线上的移动。

我找不到任何代码来做到这一点。有没有人有任何想法或示例代码？也许使用卡尔曼滤波器？

我执行此类任务的资源来自 LocationManager：当前位置、速度和路线的 MKCoordinates。

我想做一些类似 iphone 上的地图应用程序的事情。当您处于方向模式并绘制路线时，当您在汽车中移动时，蓝点不再显示估计的当前位置。相反，它会显示您在绘制的路线上的运动（它永远不会离开路线，除非您转向不在路线上的街道）。真的很酷。我不知道他们是怎么做到的。

投影到折线上的最近点效果不佳。很多时候，最接近设备估计当前位置的折线不是您实际所在的折线（街道）。但是 Iphone Map 应用程序非常好用。我敢肯定他们不只是投射到最近的 MKPolyline

# hibernate - 基于Hibernate ORM映射外键值的判别

> ID：10817789
> 
> 赞同：0
> 
> 时间：2012-05-30T13:56:51.783
> 
> 标签：hibernate, orm, mapping, self-reference

我正在尝试对一个表执行自引用映射（父/子关系）映射。

我想要的是来自同一个表的两个不同的实体，这样我就可以分离属性等等。我正在考虑使用鉴别器值，但我不能，因为我的数据库已经定义如下：为了区分父级和子级，我们有列 parent_id 对于子类型不为空（parent_id 当然是外键到同一张桌子）。无法通过以下方式定义鉴别器值：如果对象是父类型，则鉴别器值为 null 否则为子类型。

我一直在寻找解决方案，但我有点卡住了。也许，我最终会使用一个具有两个属性的实体，这些属性指的是父级（子级不是 null，@ManyToOne）和子级列表（子级@OneToMany null）。但在那之前（那一刻，我必须决定使用一个实体），我想问一下是否有解决方法来执行我想做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:00:32.990

鉴别器可以是“公式”。这严格来说是 Hibernate 特性，JPA 不支持。您将使用@org.hibernate.annotations.DiscriminatorFormula，例如：

```
@Entity
@Inheritance(strategy=SINGLE_TABLE)
@DiscriminatorFormula( "case when parent_id is null then 'PARENT' ELSE 'CHILD' end" )
@DiscriminatorValue("PARENT")
public class Parent {
    ...
}

// map Child using @DiscriminatorValue("CHILD") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T05:31:48.060

另一种解决方案是利用特殊的 Hibernate 值`@DiscriminatorValue("null")`和`@DiscriminatorValue("not null")`

```
@Entity
@Inheritance(strategy=SINGLE_TABLE)
@DiscriminatorColumn("parent_id")
@DiscriminatorValue("null")
public class Parent {
    ...
}

@Entity
@DiscriminatorValue("not null")
public class Child extends Parent {
    ...
} 
```

# c# - MySql throwing different exceptions with 8 threads

> ID：10817795
> 
> 赞同：2
> 
> 时间：2012-05-30T13:57:20.090
> 
> 标签：c#, mysql, multithreading

So something weird has started happening in my program. So I have multiple threads queued up with `ThreadPool.QueueUserWorkItem`. Until recently each thread in the threadpool would receive a `List<MyObject>` from an array and each insert the list into my MySql database. Recent changes to the handling of the list forced me to create one big list containing all the small lists (am using `List.AddRange`). I then split this list into smaller parts and sent each part to the same insert thread from before. Now the everything works perfectly with **7 threads or less**. My program originally was using 8 threads to perform everything since I recall reading something that threads should be 2 * number of cores.

Now when I run the program with 8 threads it starts throwing all kinds of MySqlExceptions which just seem to be thrown at random. Example: All threads query a certain table that is never changed. Some threads will return the select * from table fine, while 1 random thread will suddenly say the table doesn't exist or that my `DataTable` is empty which is impossible since it's the same table and query. I've had all kinds of other exceptions such as OpenDataReader, Connection must valid and open, NullReferenceException when trying to close the Connection etc..

Note: Each thread holds a separate connection to the database and therefore shouldn't be conflicting with each other.

I'm not sure about pasting the code here since the code is pretty long. Plus I'm not so sure its something with my code since as I stated the problem arises when I use 8 threads or more. I don't want to take the easy road and just use 7 threads since there might be something underneath that I have no clue about that will cause problems in the future when I implement extra changes. I can edit my question accordingly if anyone asks me to show specific pieces.

```
public MySqlDb 
{ 
    MySqlConnection mySqlConnection;
    MySqlDataAdapter mySqlDataAdapter;
    public int ExecuteInsert(string query)
    {
        using (MySqlCommand mySqlCommand = new MySqlCommand())
        {
            mySqlCommand.CommandText = query;
            using (mySqlCommand.Connection = GetConnection())
            {
                  mySqlCommand.Connection.Open();
                  using (mySqlDataAdapter = new MySqlDataAdapter())
                  {
                       try
                       {
                           mySqlDataAdapter.InsertCommand = mySqlCommand;
                           return mySqlDataAdapter.InsertCommand.ExecuteNonQuery();
                       }
                       catch (MySqlException mse)
                       {
                            logger.Warn("MySqlException : " + mse.Message);
                            throw;
                       }
                       finally
                       {
                            mySqlCommand.Connection.Close();
                       }
                  }
             }
         }
    }

    public MySqlConnection GetConnection()
    {
        connectionString.DefaultCommandTimeout = 3600;
        myConnection = new MySqlConnection(connectionString.GetConnectionString(true));
        return myConnection;
    }
} 
```

My connection string is loaded from my .xml file and is just a basic connection string

`<add name="MySqlConnectionString" providerName="System.Data.SqlClient" connectionString="Server=server_name;Database=db_name; Uid=my_username;Pwd=my_pass;charset=utf8;port=3306;" </add>`

**Update 1:** So after trying to figure out the problem I've cut back the amount of inserts I do to 1 at a time. Each thread contains an Object that represents my MySql table. From one of the exceptions when I print out the query it seems that `Insert()` is called twice without doing the actual `mySql.ExecuteInsert(query.ToString())`. I don't see any reason it should do that unless somehow some of the variables are getting shared amongst the threads even though each has its own separate Object. Below is the relevant code. If this is getting too long to be readable as a proper question please comment on this and how it should be done.

```
class PartsInventories 
{
    MySqlDb mySql;

    public const String PARTS_INVENTORIES = "parts_inventories";

    // find the optimum of best perfomance while not raising MAX_PACKETS_ALLOWED exception - right now 6000 - 2012-06-05
    public const int MAX_PARTS_IN_QUERY = 1;
    public StringBuilder query;
    bool havePartsToInsert = false;
    int insertedCount = 0;

    public PartsInventories()
    {
        mySql = new MySqlDb();
    }

    public void Init(int usersCompanyId, string mailId,
            string appendDate, bool toInsertPrices, string fileId)
    {
        // init query string and shared query variables here
        insertedCount = 0;
        query = new StringBuilder(GetQueryString());
    }

    private string GetQueryString()
    {
        return @"INSERT INTO  parts_inventories (part_number,base_part_number,
            date_code,quantity,price,currency_types_id,delivery,rohs,parts_pkg_type_id,parts_mfg_id,
            users_company_id,notes,in_stock,mail_id,append_date,file_id,ad_price) VALUES ";
    }

    private void InsertPart(ParsedInformation part, bool toInsertPrices)
    {
        // assign all specific query variables here
         query.AppendFormat("({0},{1},{2},{3},{4},{5},{6},{7},{8},{9},{10},{11},{12},{13},'{14}',{15},{16}),",
                    PartNumber, BasePartNumber, DateCode, Quantity, Price, CurrencyTypesId, Delivery,
                    Rohs, PartsPkgTypeId, PartsMfgId, UsersCompanyId, Notes, InStock, MailId, AppendDate, FileId, adPrice);
    }

    public void InsertPart(ParsedInformation part)
    {
        InsertPart(part, toInsertPrices);
        insertedCount++;
        if (insertedCount % MAX_PARTS_IN_QUERY == 0)
        {
            Insert();
            query = new StringBuilder(GetQueryString());
        }                
    }

    public void Insert()
    {
        if (!havePartsToInsert) return;

        query.Remove(query.Length - 1, 1);

        query.Append(@" ON DUPLICATE KEY UPDATE part_number = VALUES(part_number), date_code = VALUES(date_code),
        quantity = VALUES(quantity), price = VALUES(price), currency_types_id = VALUES(currency_types_id),
        delivery = VALUES(delivery),rohs = VALUES(rohs), parts_pkg_type_id = VALUES(parts_pkg_type_id),
        parts_mfg_id = VALUES(parts_mfg_id), notes = VALUES(notes), in_stock = VALUES(in_stock),
        mail_id = VALUES(mail_id), append_date = VALUES(append_date), sent_rfq = NULL, from_website = NULL, from_lti = NULL, 
        file_id = VALUES(file_id), ad_price = VALUES(ad_price);");

        try
        {
            logger.DebugFormat("Inserted/Updated {0} parts.", mySql.ExecuteInsert(query.ToString()));
            havePartsToInsert = false;
        }
        catch
        {
            logger.Debug("problem inserting");
            havePartsToInsert = false;
            throw;
        }
    }
} 
```

Each thread is a class and receives the list from the class creating and invoking the threads.

```
class ThreadInserter 
{
    ManualResetEvent doneEvent;
    PartsInventories partsInventories;
    public ThreadSafeInserter(List<ParsedInformation> allParts, ManualResetEvent doneEvent, string mailId, int usersCompanyId,
            string appendDate, bool toInsertPrices, bool hasStockInBody, string fileId)
    {
        this.doneEvent = doneEvent;
        partsInventories = new PartsInventories();
    }

    private void InsertAllParts(int threadIndex)
    {
        partsInventories.Init(usersCompanyId, mailId, appendDate, toInsertPrices, fileId);

        if (allParts != null)
        {
            foreach (ParsedInformation part in allParts)
            {
                // another thread has thrown an exception so aborting all threads
                // set from the main invoking the threadcallback 
                if (doneEvent.WaitOne(0)) 
                {
                    logger.Warn("Thread aborted.");
                    return; 
                }
                partsInventories.InsertPart(part);
            }
        }
        partsInventories.Insert(); 
        doneEvent.Set();
    }
} 
```

# sql - 在 1 亿个数据库上构建频率词对的脚本

> ID：10817797
> 
> 赞同：0
> 
> 时间：2012-05-30T13:57:28.187
> 
> 标签：sql, sql-server, frequency

请帮助我从在 SQL Server 2008 db 上工作的具有 1 亿条记录的表中构建单词对频率表。表看起来像：

```
Original table 
id |source |comment(255)
-------------------
1     A1     review budget limitation 
```

source 是一些 ID，可能有大约 800 个不同的值。原始表中的源分布是指数级的。这意味着源 A1 的记录数量可能为 2000 万条，而 A500 仅为 10,000 条。

最后我想得到一个忽略单词的单词对频率表：the, and, of, to, a, i, it, in, or, is

我期望它应该如何工作（我在这里可能不是最佳的）：

1.  从原始表中的评论中读取前两个单词，将其放入 FREQUENCY
2.  阅读接下来的两个单词并输入

频率表

```
id | word pairs        | source |Frequency
 ---------------------------------------------
1   review budget         A1         1
2   budget limitation     A1         1 
```

1.  填写第一条记录的完整评论，例如源 A1
2.  开始下一条记录并以相同的方式处理它。
3.  如果它发现频率表中已经存在相同的单词对，并且来源与增加频率相同，如果来源不同 - 使用新来源添加这对。

请帮助我为 SQL Server 提供最佳 sql 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:07:04.220

我会在一分钟内解决这个问题（给定时间），但我想提出两个必要条件：

*   任何需要在 SQL 中快速完成的事情都需要基于集合完成。避免“一次一个”地处理事情。
*   使用表值函数将评论拆分为单词对表
*   使用通用表表达式将您的工作分层以保持可读性

使用这三个规则，您可以移动大量数据。在构建了 select 语句之后，只需将其转储到表中即可。

**编辑：**

```
CREATE FUNCTION dbo.SplitToPairs(@sText nvarchar(255))
RETURNS @Pairs TABLE (
    Pair nvarchar(255) NOT NULL
)
AS
BEGIN
    SET @sText = LTRIM(RTRIM(@sText));
    DECLARE @Pos1 int = 0
    DECLARE @Pos2 int = CHARINDEX(' ', @sText);
    DECLARE @Pos3 int;
    IF @Pos2 <> 0
    BEGIN
        DECLARE @Word1 nvarchar(255) = SUBSTRING(@sText, @Pos1+1, @Pos2-@Pos1-1);
        WHILE CHARINDEX(N'|' + @Word1 + N'|', N'|the|and|of|to|a|i|it|in|or|is|') <> 0
        BEGIN
            SET @Pos1 = @Pos2;
            SET @Pos3 = CHARINDEX(' ', @sText, @Pos2+1);
            SET @Pos2 = @Pos3;
            SET @Word1 = SUBSTRING(@sText, @Pos1+1, @Pos2-@Pos1-1);
        END
        DECLARE @Word2 nvarchar(255);

        WHILE @Pos2 <> 0
        BEGIN
            SET @Pos3 int = CHARINDEX(' ', @sText, @Pos2+1);
            IF @Pos3 <> 0
            BEGIN
                SET @Word2 = SUBSTRING(@sText, @Pos2+1, @Pos3-@Pos2-1);
                WHILE CHARINDEX(N'|' + @Word2 + N'|', N'|the|and|of|to|a|i|it|in|or|is|') <> 0
                BEGIN
                    SET @Pos1 = @Pos2;
                    SET @Pos2 = @Pos3;
                    SET @Word2 = SUBSTRING(sText, @Pos2+1, @Pos2-@Pos1-1);
                END
                INSERT @Pairs (Pair) VALUES (@Word1 + N' ' + @Word2)
            END

            SET @Pos1 = @Pos2;
            SET @Pos2 = @Pos3;
            SET @Word1 = @Word2;
        END
    END
    -- Note: if only one word in text, no insert happens
    RETURN @Pairs
END 
```

然后，使用它来构建一个选择

```
SELECT I.Source, P.Pair, COUNT(*) AS Frequency
FROM Information AS I CROSS APPLY dbo.SplitToPairs(i.Comment) AS P
GROUP BY I.Source, P.Pair 
```

我可能会因为一些极端情况而离开，但它应该让你知道我要做什么。它也不认为“word1 word2”和“word2 word1”是相等的。

我把它作为练习留给读者：p

**编辑：**

在线添加`TABLE`关键字`RETURNS`。

`DECLARE`此外，我认为从 SQL 2008 开始的唯一作品中分配一个值..

**编辑：**

添加`RETURN`声明

**编辑：**

根据 AntarticIce 的反馈进行的更改

# excel - Comparing two text cells in different sheets

> ID：10817799
> 
> 赞同：0
> 
> 时间：2012-05-30T13:57:43.177
> 
> 标签：excel, vba, loops, compare

I'm trying to compare two text cells (like `abcDEF`) from different sheets. One sheet is fixed but the other is not.

My code is:

```
Private Sub Worksheet_Change(ByVal Target As Range)

Dim i As Long, LastRow As Long, n As Long
Dim Project As String
Dim Responsible As String, Site As String, Sample As String, _
    Description As String, Parameter As String, Method As String
Dim j As Long

Application.EnableEvents = False

' Find LastRow in Col A into the Sheet2
LastRow = Sheet2.Range("A" & Rows.Count).End(xlUp).Row

' Select all Col A in Project
For Each Value In Sheet2.Range("A2:A" & LastRow)
   Project = Project & "," & Value
Next Value

Sheet1.Range("A2").ClearContents: Sheet1.Range("A2").Validation.Delete

' Create the Data Validation List
With Range("A2").Validation
    .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:=xlBetween,     Formula1:=Project
    .IgnoreBlank = True
    .InCellDropdown = True
    .InputTitle = ""
    .ErrorTitle = ""
    .InputMessage = ""
    .ErrorMessage = ""
    .ShowInput = True
    .ShowError = True
End With

' Select the sheet coinciding with the cell "A2" value
For j = 3 To Sheets.Count

    If Sheets(j).Range("A2").Text = Sheets(1).Range("A2").Text Then
        'Write 4 in sheet1 cell C6 when the two values are coinciding.
        Sheet1.Range("C6") = 4
    End If

Next j
End Sub 
```

The problem is the `If...` line, probably is the range definition. I've tried `.Text` and `.Value` and neither works.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:42:39.690

您可能想要使用的是

```
If StrComp(Sheets(j).Range("A2").Value2, Sheets(1).Range("A2").Value2, _
    vbTextCompare) = 0 Then
'added the underscore since I made it two lines for neatness 
```

`vbTextCompare`不区分大小写，`vbBinaryCompare`区分大小写。网上有几个关于[字符串比较](http://www.aivosto.com/vbtips/stringopt.html#comp)的资源可以帮助你。

另外，我注意到您正在使用`Worksheet_Change`和更改`Sheet1`. 我的猜测是你的`Worksheet_Change`是为了`Sheet1`，是吗？如果是这种情况，那么每次您修改`Sheet1`时，都会再次调用 sub（一次又一次......直到它崩溃）。为了防止这种情况，您要添加

```
Application.EnableEvents = False 
```

到子的开头，然后

```
Application.EnableEvents = True 
```

在最后。这样，您对工作表所做的任何更改都不会触发`Worksheet_Change`子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:08:33.843

你可以使用`EXACT(text1,text2)`功能

# android - 如何将图像存储在联系人管理器中的图像视图中？

> ID：10817800
> 
> 赞同：0
> 
> 时间：2012-05-30T13:57:44.513
> 
> 标签：android, image, gallery, contacts

每个人都知道联系人管理器的样子。在右上角，您可以单击此图像视图。这使您可以从图库中选择图像。

我正在寻找的是如何在我的应用程序中实现此功能。我已经设置了一个图像按钮，您可以在其中单击。这会将您带到画廊。

接下来是设置 onActivityResult 方法，可能是一个用于存储图像的数据库和一种检索图像的方法，以便它可以显示在图像按钮中。

拜托，我真的很想知道如何构建它，但不知道如何开始。有人可以发布一些上述步骤的示例代码吗？你会是我的英雄！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:09:01.290

从您的问题来看，您似乎在这`onActivityResult`部分中最挣扎。

它应该是这样的：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
   if(requestCode == 0 && data != null && data.getData() != null) {
       Uri uri = data.getData();
       if(uri != null) {
          Cursor cursor = getContentResolver().query(uri, new String[] {   
                                   android.provider.MediaStore.Images.ImageColumns.DATA}, 
                                   null, null, null);
                cursor.moveToFirst();
                String imageFilePath = cursor.getString(0);             
                cursor.close();

                if(imageFilePath != null) {
                        // Do whatever you want like decode it into a Bitmap
                        Bitmap bitmap = BitmapFactory.decodeFile(imageFilePath);
                        // Or.. store it somewhere in your local db  
                    }
       }
   }
} 
```

在您检索到图像的文件路径后，您可以自由地做任何您想做的事情。正如您所说，您显然可以将其存储在用户表的本地数据库中。

# cookies - Are cookies shared between Safari and Webviews?

> ID：10817805
> 
> 赞同：1
> 
> 时间：2012-05-30T13:57:52.847
> 
> 标签：cookies, safari, webview

According to Apple documentation on [NSHTTPCookieStorage](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Concepts/URLOverview.html#//apple_ref/doc/uid/20001834-BAJEAIEE)

The NSHTTPCookieStorage class provides the interface for managing the collection of NSHTTPCookie objects shared by all applications.

Therefore, If I'm not mistaken, since a Webview on OS X uses NSHTTPCookieStorage, and Safari uses Webviews, if I login on a given website on a Webview, Safari will use the cookies that has been set by the Webview and when the same website is opened by Safari, it should be authenticated.

My question is, if cookies are shared between Safari and Webviews. If so, why the test above is not working ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-12-02T01:31:10.267

根据 NSHTTPCookieStorage 文档：

> 从 OS X 10.11 开始，每个应用程序都有自己的 sharedHTTPCookieStorage 单例，不会与其他应用程序共享。

因此，虽然之前的答案在 3 年前编写时是正确的，但现在的答案应该是：

1) 在 OS X 10.11 之前 - 是的，它们是共享的

2) OS X 10.11 和 macOS 10.12 - 不，它们不再共享。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T17:08:15.783

[根据了解 iPhone 的 NSHTTPCookieStorage 中的](https://stackoverflow.com/questions/2520331/understanding-nshttpcookiestorage-for-the-iphone)讨论，cookie 不会在应用程序之间共享。

这在“Cookie 存储”部分下的[文档中得到确认：](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Concepts/URLOverview.html)

> **iOS 注意：iOS**中的应用程序不共享 Cookie。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-28T14:38:44.900

根据我的经验，在 OS X 上，答案是**肯定**的。Cookie 似乎在 Safari 和 WebView 之间共享。

# javascript - Canvas or PNG? (for html5 animation)

> ID：10817808
> 
> 赞同：1
> 
> 时间：2012-05-30T13:57:57.013
> 
> 标签：javascript, html, canvas, html5-animation

I'm going to develop an html5 rich animation. I've already design the components in Illustrator, but now the question is how to export this components? **via Canvas object? or via Image(png)?**.

Notice that the components may have some changes(like a flower who get an wings at some point)..

1.  Canvas it will able me easily add and remove this additions, But with Image I should make them absolute with z-index..
2.  Image will prevnt copying my components without permission(at least it prevent anybody take them as vector image).. so it really advantage.

Thanks!, ~ Almog Baku

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:28:44.140

如果你想要一些快速的东西，有很多精灵和直接交互，那很容易：使用画布。

该 API 与其他语言中最常见的 2D 图形 API 之一非常相似，并且支持“直接”绘图和合成。

一旦你有很多对象和转换，使用 html 引擎来组合和重绘东西是非常无效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:07:15.647

**我发现为网络构建丰富的动画（短片）最简单、最有效的方法是`using both JS and css animations/transictions`..**

用 sass+compass 构建它也使它变得简单而强大。

### 为什么？关于我的研究

实际上，我是用同样的动画电影制作了两次半：
首先我只用 jQuery 制作了整部电影（这真的很慢、笨拙且难以构建）。
比，我尝试了画布..但我发现很难创建一些常见的转换，比如上滑等等。所以，我尝试使用一些常见的画布库来实现它......并在一段时间后放弃了（电影完成了 1/5）。
我选择使用 compass+sass 和 CSS ANIMATIONS/TRANSICTIONS 从头开始​​实现它，我发现它是处理这个问题的最强大、最简单的解决方法和快速开发。

我在 css 类检测到的 css 动画中实现了每一个“幻灯片”。并使用监听 css 动画事件的 JS 确定每张幻灯片的结尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T13:27:58.690

因为 Illustrator 是一个矢量应用程序，您可能想要查看大多数 HTML5 浏览器支持的[SVG格式。](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)

[您可以在此处](http://labs.adobe.com/technologies/illustrator_html5/)获得 Illustrator HTML5 SVG 包，并在[此处](http://www.webmonkey.com/2010/10/export-adobe-illustrator-drawings-and-animations-to-html5/)获得说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T10:40:18.570

如果您使用 svg，请查看[Raphaeljs](http://raphaeljs.com/)库，它可以更轻松地从 javascript 操作 svg

# javascript - IE8中的交叉过滤器？

> ID：10817809
> 
> 赞同：1
> 
> 时间：2012-05-30T13:58:01.383
> 
> 标签：javascript, internet-explorer-8, cross-browser, crossfilter

有谁知道[Crossfilter](http://square.github.com/crossfilter/)是否可能在 IE8 中工作？

我没有可用的 Windows 副本来检查它。我需要在我完成的应用程序中支持 IE8，但不知道从 Crossfilter 开始是否是一个禁忌。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:01:34.593

它使用 HTML5 功能，所以我猜，没有 :)

另见：[http ://caniuse.com/#feat=typedarrays](http://caniuse.com/#feat=typedarrays)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:23:23.537

**编辑：**我不确定这是否有效。我遇到了一些奇怪的间歇性错误，我认为这可能是原因。我还没有隔离它，但我想在有人遇到这个并尝试它之前先提个醒。

[github上](https://github.com/zackham/crossfilter/tree/ie8compatible)有一个使用下划线垫片的叉子。当然，您还需要包括[underscore.js](http://underscorejs.org/)。

如果您正在使用另一个库，例如 Mootools 或任何您可以使用库的等效函数找到/替换 .forEach、.isArray、.map 和 .indexOf 的库。它只有几行。

# jquery - JsTree json leaf detection

> ID：10817811
> 
> 赞同：2
> 
> 时间：2012-05-30T13:58:08.353
> 
> 标签：jquery, jstree

I have a JsTree instance in which all childs are loaded async by a json call.

How can I detect if a user has **selected** a leaf node?

I've tried to use the success callback of ajax, but of course that also gets called if you simply open a Node with a "+". Is there an event like "child nodes loaded"?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:32:22.957

拉德克，你是对的。

最后我想出了另一个解决方案。在服务器上请求子节点时，我检测节点是否有子节点。通过向响应 dto 添加一个标志，可以在客户端上使用此信息，如下所示：

```
success: function (data) { 
  return $.map(data.d, function (item) {
    if(item.HasChildren)
      return {
          data: item.data,
          state: item.state,
          attr: item.attr,
          children: item.children
      };
      else
          return {
          data: item.data,
          attr: item.attr
      };
  })
} 
```

如果响应中没有“children”和“state”属性，jsTree 会将其识别为叶节点。现在可以在“node_select”中使用jsTree的.is_leaf(node)方法了。

# qemu - apparmor 使用自定义 qemu 导致 libvirt 出现问题

> ID：10817813
> 
> 赞同：4
> 
> 时间：2012-05-30T13:58:13.177
> 
> 标签：qemu, libvirt, apparmor

我想使用定制版本的 qemu 运行 libvirt。但是，在我安装了我的 qemu 版本并重新启动后，我在 dmesg 中收到以下消息

> type=1400 审计(1338385059.381:51): apparmor="DENIED" operation="exec" parent=1700 profile="/usr/sbin/libvirtd" name="/usr/local/bin/qemu-system-x86_64" pid =1746 comm="libvirtd" requested_mask="x" denied_mask="x" fsuid=0 ouid=0

我尝试编辑 /etc/apparmor.d/abstractions/libvirt-qemu 并添加以下行并重新启动

> /usr/local/bin/qemu-system-x86_64 rmix,

但是，问题仍然存在。我对 apparmor 真的很陌生，实际上在我发现这个错误之前并没有读过太多。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T01:45:25.080

您的日志消息表明问题出在`/usr/sbin/libvirtd`配置文件中；查看`profile="/usr/sbin/libvirtd"`消息的部分。此配置文件存储在`/etc/apparmor.d/usr.sbin.libvirtd`; 此配置文件*不*包括`/etc/apparmor.d/abstractions/libvirt-qemu`抽象——而是通过`/etc/apparmor.d/libvirt/`. 请参阅配置文件中的最后几行`libvirtd`：

```
 # allow changing to our UUID-based named profiles
  change_profile -> @{LIBVIRT}-[0-9a-f]*-[0-9a-f]*-[0-9a-f]*-[0-9a-f]*-[0-9a-f]*, 
```

可能最简单的答案是将以下行添加到您的`local/usr.sbin.libvirtd`文件中：

```
/usr/local/bin/qemu-system-x86_64 rmix, 
```

（虽然它可能需要`PUx`；主要`/usr/sbin/libvirtd`配置文件当前有`/usr/bin/* PUx,`，这可能是`/usr/bin/qemu-system-x86_64`当前执行的方式。）

另一种方法是运行`aa-logprof`，并让工具提示您。您可能无法使用这些工具构建*最漂亮*的配置文件，但它应该相当简单，并且具有与手动编写配置文件相同的安全属性。

我希望这有帮助。

# templates - Groovy 嵌套模板 - 无法从模板内调用类中的方法

> ID：10817814
> 
> 赞同：2
> 
> 时间：2012-05-30T13:58:13.693
> 
> 标签：templates, groovy

我正在尝试使用 Groovy 的 SimpleTemplateEngine 来生成一些输出而不是 StringBuilders，但是我无法让模板成功调用我的类中的其他方法（最终调用其他模板以形成嵌套链）。

当模板（下面的示例）调用该方法时`<% generateItemOutput(itemDescriptor.itemList) %>`，我得到一个异常：

```
groovy.lang.MissingMethodException: No signature of method:
SimpleTemplateScript1.generateItemOutput() is applicable for
argument types: (java.util.ArrayList) 
```

我尝试将所有方法设为静态，并将导入添加到模板中的静态方法（如此[处所建议](http://jira.codehaus.org/browse/GROOVY-4668)），但我得到`unable to resolve class ...`了我使用的导入：

```
SimpleTemplateScript1.groovy: 1: unable to resolve class uk.co.e2x.convert.XMLToSlurp.generateItemOutput
 @ line 1, column 20.
   out.print(""""""); import uk.co.e2x.convert.XMLToSlurp.generateItemOutput ;
                      ^ 
```

这是我在没有`static`s 的情况下所做的示例：

```
public String generateItemDescriptorOutput(itemDescriptor) {
    def params = [itemDescriptor: itemDescriptor]
    def template = new groovy.text.SimpleTemplateEngine().createTemplate(itemDescriptorTemplate())
    def writeable = template.make(params)
    return writeable.toString()
}

public String generateItemOutput(itemList) {
    ...
}

public String itemDescriptorTemplate() {
    return = '''\
${itemDescriptor.name} {
repository = "${itemDescriptor.repository}"
props = [
    <% generateItemOutput(itemDescriptor.itemList) %>
]
}
'''
} 
```

我用它调用它，`java -cp ...`但通过 groovy 调用它时遇到了同样的问题。我转向通过 java 调用它的原因是我无法在 groovy 脚本中计算出静态方法的包路径。

有没有人有任何从模板中调用您自己的脚本/类方法的具体示例，或者可以告诉我我做错了什么？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:32:38.777

好的，我设法让它工作，最后它相当简单。我必须对所有生成和模板方法使用静态，然后将完全限定的包名称添加到模板内的方法中，而不是尝试进行导入。

还发现我在命令中也缺少打印。这是固定模板：

```
public static String itemDescriptorTemplate() {
    return = '''\
${itemDescriptor.name} {
repository = "${itemDescriptor.repository}"
props = [
    <% print uk.co.e2x.convert.XMLToSlurp.generateItemOutput(itemDescriptor.itemList) %>
]
}
''' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-06T22:46:40.877

我使用这样的静态实用程序方法在父模板中包含嵌套模板：

```
class TemplateUtils {

    static String generateOutput(String templateFilename, Map templateBinding) {
        URL templateResource = TemplateUtils.classLoader.getResource(templateFilename)
        assert templateResource : "Resource for '${templateFilename}' not found"
        new GStringTemplateEngine().createTemplate(templateResource).make(templateBinding)
    }
} 
```

然后在父模板中：

```
Dear $to
<% out.println(com.example.TemplateUtils.generateOutput("letterContent.template", variables)) %>
Regards $from 
```

父模板的绑定变量被中继到变量中的“letterContent”模板`variables`。

# gnuplot - gnuplot 最大值，列中差异的最小值

> ID：10817819
> 
> 赞同：0
> 
> 时间：2012-05-30T13:58:39.553
> 
> 标签：gnuplot, max, min

我有一个有 4 列的表格。

我需要*gnuplot*来获取第3 列和第 4 列（3-4）之间**差异**的 MAX 和 MIN 值。我已经尝试了通常的程序，但它不起作用：

```
plot 'datafile' using 1:2:(\$3-\$4) with image
max=GPVAL_DATA_Z_MAX
min=GPVAL_DATA_Z_MIN 
```

但如果我只使用例如它**确实有效：**

```
plot 'datafile' using 1:(\$3-\$4)
max=GPVAL_DATA_Y_MAX
min=GPVAL_DATA_Y_MIN 
```

这意味着问题出在**Z** `GPVAL`变量和`with image`选项上。

我无法使用我的解决方法，因为在我`plot`再次使用命令制作实际绘图后，它会在我的实际图形后面留下一个可怕的图形。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:27:56.237

问题来自使用`plot`命令而不是`splot`. 该`plot`命令只知道二维。如果你试试

```
set terminal postscript enhanced color
set output '/dev/null'
splot 'datafile' using 1:2:($3-$4)
max=GPVAL_DATA_Z_MAX
min=GPVAL_DATA_Z_MIN
set output 'output.eps'
plot 'datafile' using 1:($3-$4) with image 
```

你应该能够得到你需要的值。设置`output '\dev\null'`允许您在不实际绘制数据的情况下获取这些值。

# sql - SQL 数据检查和逻辑

> ID：10817820
> 
> 赞同：1
> 
> 时间：2012-05-30T13:58:46.903
> 
> 标签：sql, conditional-statements

我在自动取款机上有点困惑，我在一个需要小搜索的房地产网站上工作，问题是一些列表有一个价格范围，例如从 10,000 美元到 25,000 美元，其他只有固定价格。

所以我的数据库看起来像这样：

```
id | price | minPrice | maxPrice
1  |       | 10000    | 45000
2  | 7500  |          |
3  |       | 15000    | 20000
4  | 80000 |          | 
```

搜索包含 2 个字段：minPriceRange 和 maxPriceRange，例如，当用户搜索价格范围内的列表时：minPriceRange = 8000 和 maxPriceRange = 17000，则应该显示列表 1、2 和 3。

我对如何在 SQL 语句中处理这个问题有点困惑。

所以它必须检查价格是否在 min 和 maxPrice 之间，但还要考虑到价格可以单独设置

编辑

我知道这可能有点令人困惑。

所以基本上当我搜索 12000 到 60000 之间的列表时，列表 1 和 3 应该会出现。

这就是为什么我不能只做 minPrice >= 5000 AND maxPrice <= 60000。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:02:21.223

```
Select id from tablename where (minPrice >= 8000 and maxPrice <=17000) or (price between 8000 and 17000) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:03:54.000

您最好更改设计以消除价格列，对于那些有固定价格的房屋，将最低价格和最高价格设置为相同的价格。

```
id | minPrice | maxPrice
1  | 10000    | 45000
2  | 7500     | 7500
3  | 15000    | 20000
4  | 80000    | 80000 
```

根据其他需求，情况可能并非如此，但可靠的数据库设计至关重要。我必须重写的大多数应用程序都已经完成，因为一些以前的程序员（通常是以前的程序员是我）没有彻底考虑数据库设计，我们基于有缺陷的设计陷入了困境。

**也就是说，使用当前的数据库设计，您可以使用括号对 where 子句进行分组** （信用到期，此查询的 99% 来自 rs。我必须修改一项才能使其工作。）

```
DECLARE @pricemin int = 8000 
DECLARE @pricemax int = 17000 
SELECT * FROM tableName WHERE (ISNULL(minPrice,0) <= @pricemin  
AND    @pricemax <= ISNULL(maxPrice,2147483647))   -- 2147483647 is max Int Value in SQL Server - adjust as necessary
or ISNULL(price,0) between @pricemin and @pricemax 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T14:12:04.847

这应该有效：[更新]

```
DECLARE @table table (id int, price int, minPrice int, maxPrice int)
INSERT into @table 
SELECT 1, null, 10000, 450000 UNION
SELECT 2,7500,null,null UNION
SELECT 3,null,15000  ,20000 UNION
SELECT 4,80000, null,null    

DECLARE @pricemin int = 8000
DECLARE @pricemax int = 17000
SELECT * FROM @table WHERE (minPrice <= @pricemin or minPrice is null) 
AND    (@pricemax <= maxPrice or maxPrice is null) 
or ISNULL(price,0) between @pricemin and @pricemax 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T14:52:27.067

```
DECLARE @table table (id int, price int, minPrice int, maxPrice int)
INSERT into @table 
SELECT 1, null, 10000, 450000 UNION
SELECT 2,7500,null,null UNION
SELECT 3,null,15000  ,20000 UNION
SELECT 4,80000, null,null  

DECLARE @pricemin int = 15000
DECLARE @pricemax int = 90000

SELECT * FROM @table
WHERE (((minPrice IS NOT NULL AND minPrice <= @pricemin)
   AND (maxPRICE IS NOT NULL AND maxPrice >= @pricemax))
   OR
   (price IS NOT NULL AND (( price >= @pricemin) AND (price <= @pricemax)))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T14:00:35.467

如何根据价格范围进行选择，然后使用并集将固定价格的结果相加？

寻找价格在 10,000 到 20,000 之间的客户的伪代码尝试

```
SELECT id FROM table WHERE price BETWEEN 10,000 AND 20,000
UNION
SELECT id FROM table WHERE minPrice > 10,000 AND maxprice < 20,000 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T14:06:16.163

```
SELECT * FROM table
WHERE
    price BETWEEN :min AND :max
OR (
    minPrice <= :min AND maxPrice >= :min
) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-30T15:37:31.880

我将把它作为一个新的答案发布，以减少混乱，在打破我的头脑之后，我终于想出了这个：

```
(((minPrice IS NOT NULL AND minPrice >= 10000) AND (minPrice IS NOT NULL AND minPrice <= 15000)) 
OR 
((maxPrice IS NOT NULL AND maxPrice >= 10000) AND (maxPrice IS NOT NULL AND maxPrice <= 15000))) 
OR
(price IS NOT NULL AND (( price >= 10000) AND (price <= 15000))) 
```

现在，这适用于您选择最低和最高价格的情况，但如果最低价格为 0，它只会选择所有可能的结果

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-30T15:37:39.920

我会把这个查询写成：

```
select *
from t
where <usermin> >= coalesce(minprice, price) and
      <usermax> <= coalesce(maxprice, price) 
```

这将逻辑保持在一个地方，只需在前者不可用时用价格替换最小值和最大值。

# http - Zend_Http_Client 超时

> ID：10817821
> 
> 赞同：2
> 
> 时间：2012-05-30T13:58:55.487
> 
> 标签：http, zend-framework

嘿，我正在使用`Zend_Http_Client`在服务器中调用 php 服务，但我遇到了与超时有关的异常：

```
2012-05-30T13:47:26+02:00 INFO(6): LeomobileMdcms: Requesting callback url  (http://######.nurago.com/mobileRedirect.php?resp=NRGH&annotations=) while updating  (356812045426135) of device with token (BtPhP), in    LeomobileMdcms_UserInformationController::registerdeviceAction

2012-05-30T13:47:41+02:00 ERR(3): LeomobileMdcms: Exception throwed: Unable to Connect to tcp://########.nurago.com:80\. Error #110: Connection timed out, in LeomobileMdcms_UserInformationController::registerdeviceAction 
```

此代码段负责调用回调 URL：

```
$client = new Zend_Http_Client($receivedSmsUrl);
$client->setConfig(array("timeout"=>5));
try {
    $this->log("Requesting callback url ($receivedSmsUrl) while updating "
               ."IMEI ($address) of device with token ($token), in ".__METHOD__,
               Zend_Log::INFO);
    $response = $client->request();
    if ($response->isError()) {
        $this->log("Request failed. Server reply: ".$response->getStatus()
                   ." ".$response->getMessage(),
                   Zend_Log::WARN);
    }
} catch(Zend_Http_Client_Exception $e) {
    $this->log("Exception throwed: ".$e->getMessage().", in ".__METHOD__,
               Zend_Log::ERR);
} 
```

我认为这是一个防火墙问题，但不幸的是它与防火墙无关。

请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-07T11:15:51.837

将您的适配器从 Socket（默认）更改为 Curl。这应该可以解决问题：

```
$client = new Zend_Http_Client();
$client->setAdapter('Zend_Http_Client_Adapter_Curl'); 
```

# javascript - 在同一页面上的不同时间刷新多个 div

> ID：10817823
> 
> 赞同：1
> 
> 时间：2012-05-30T13:59:04.823
> 
> 标签：javascript, jquery, html, asp.net-mvc-3

下面是我用来根据我公司目前正在进行的项目数量制作单独 div 的代码。每个 div 包含项目的最新构建是成功还是失败。

我目前将此设置为在 120 到 180 秒之间自动刷新。目前，每个 div 都会同时刷新。我想要它，所以每个 div 都会自己随机刷新。

CSHMTL 创建 div：

```
@if (Model.Client.ClientStatus != null && Model.Client.ClientStatus.Trim() != "InActive")
{
<div class="span4 dashboard-success">

<div class="well dashboard-well" style="display:none;">
    <div class="loading">Loading...</div>
    <div> 
        <div class="dashboard-link">

            <h3>@Html.ActionLink(Model.Client.ClientName, "Details", new { controller = "Client", ClientId = Model.Client.ClientID })</h3>
        </div>
    </div>
    @foreach (var project in Model.Client.Projects)
    {

        <div>        
            <div class="dashboard-link">
                <h4>@Html.ActionLink(project.ProjectName, "Details/" + project.ProjectID, "project", new { controller = "Client", ClientId = Model.Client.ClientID },
                    new { controller = "Project", ProjectId = project.ProjectID })</h4>

            </div>

      @if (project.ProjectStatus != null && project.ProjectStatus.Trim() != "InActive")
      {
            <table class="build table table-condensed">
                @foreach (var build in project.Builds)
                {          

                    <tr id="@project.ProjectName.Trim().ToLower().Replace(" ", "_").Replace(".", "").Replace("-", "").Replace("[", "").Replace("]", "")@build.BuildConfigID">
                        <td>                            
                            <!--Adds a link back to client project build details-->

                                <a href = @Url.Content("client/" + Model.Client.ClientID.ToString() + "/project/" +
                                        project.ProjectID + "/build/Details/" + build.BuildID)>@build.BuildName</a>

                        </td>
                        <td class="date">
                        </td>
                        <td class="user">   
                        </td>
                        <td class="status">
                        </td>
                    </tr>                 
                }
            </table>
      }
        </div> 
    }
</div> 
```

处理页面刷新的Javascript：

```
function random(x) {
  return Math.floor(x * (Math.random() % 1))
}

function randomBetween(MinV, MaxV) {
    return MinV + random(MaxV - MinV + 1)
}

$(function () {
    UpdateStatus();
    window.setInterval(UpdateStatus, randomBetween(120000, 180000))
}) 
```

这些当前都放置在局部视图中。任何想法或建议将不胜感激。

编辑：UpdateStatus() 的请求代码

```
function UpdateStatus() {
    $(".dashboard-well").show().css({ 'background-color': "black", 'overflow': "hidden" })
    $(".loading").show()
    $("td").hide()
    $(".status").hide()
    $.ajax
    ({
        url: "/Build/AllStatuses", //New ULRs
        dataType: 'json',
        success: function (buildstatuses) {

            for (var i in buildstatuses) {
                var status = buildstatuses[i];
                var statusColor = 'black';
                switch (status.status) {
                    case "SUCCESS":
                        statusColor = "green";
                        break;
                    case "FAILURE":
                        statusColor = "#99182C";
                        break;
                    case "ERROR":
                        statusColor = "#CD950C";
                        break;
                    default:
                        statusColor = "black";
                        break;
                }
                var rowID = $.trim(new String(status.teamCityProject).toLowerCase().replace(/ /g, "_").replace(/\./g, "").replace(/-/g, "").replace(/\[/g, "").replace(/]/g, "")) + status.id;

                $("tr#" + rowID + " td.status").html(status.status).css({ 'color': statusColor, 'font-weight': 'bolder' })
                if (status.status != "SUCCESS") {

                    var row = $("tr#" + rowID)

                    row.parent().parent().parent().parent().parent().removeClass("dashboard-success").addClass("dashboard-fail");

                    row.parent().parent().prepend(row.clone());  // Places Failure at the top by cloning then removing
                    row.remove();

                }

                $("tr#" + rowID + " td.date").html(status.date)
                $("tr#" + rowID + " td.user").html(status.user)

                // jQuery show hide
                $(".loading").hide()
                $(".dashboard-well").show().css({ 'background-color': "#D8D8D8", 'overflow': "auto" })
                $(".status").show()
                $("td").show()

            }

            //Sets Failed results to the left
            $("div.dashboard-fail").each(function () {

                var div = $(this);

                div.parent().prepend(div.clone());
                div.remove();

            });

            // Scroll to the bottom of the Div defined and scroll up --> See scroll function at top

            scrollDown();
            scrollUp();
            scrollDown();
        }

    })
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:56:04.227

尝试以下方式：

```
<script type="text/javascript">
$(function () {
    UpdateStatus("@Model.Client.ClientID")
    var random = randomBetween(120000, 180000)

    window.setInterval(function(){
        UpdateStatus("@Model.Client.ClientID")
    }, random)
})
 </script> 
```

这将被添加到您的 .cshtml 页面中，这将调用 UpdateStatus 函数，我认为这在以前没有发生，让我知道这是否有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T14:17:39.857

我建议不要完全随机刷新这些 div，因为随机性有效地消除了平衡服务器压力的可能性。

因此，我建议您使用随机计数器触发更新波，它将更新单个 div，获取新版本，然后更新下一个。如果您有许多 div，那么一次更新多个容器可能是值得的（因此该波实际上在下一波开始之前完成）。为 wave 设置随机开始允许您让多个客户端在不同时间更新其 div 容器 - 这可以平衡服务器上的并发压力。

对于更新单个 div，我建议修改您的 UpdateStatus() 函数，以便它更新由 ProjectID 标识的特定项目（您似乎可以访问此信息，所以为什么不使用它）。当 UpdateStatus(ProjectID) 函数完成时，您获取包含此项目信息的 div 并相应地更新它。

# java - 在 FileSystem.liststatus 中过滤日志文件（_success 和 _log）

> ID：10817824
> 
> 赞同：2
> 
> 时间：2012-05-30T13:59:05.307
> 
> 标签：java, filter, hadoop

嗨，在使用 FileSystem.listStatus 方法时，我想过滤日志文件并仅列出不是日志文件的文件。我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:09:21.297

这就是我摆脱 _SUCCESS 文件的方式

```
PathFilter clusterFileFilter = new PathFilter() {
                  public boolean accept(Path path) {
                    return path.getName().startsWith("part");
                  }
                };

    FileStatus[] fileStatusArray = fs.listStatus(path, clusterFileFilter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:18:21.603

如果您查看[FileInputFormat](http://svn.apache.org/viewvc/hadoop/common/tags/release-1.0.3/src/mapred/org/apache/hadoop/mapreduce/lib/input/FileInputFormat.java?view=markup)的源代码（第 62 行），它们有一个私有静态 PathFilter 忽略以下划线或句点开头的文件。由于它是私有的，您必须复制代码，或者如果您的输入文件总是以部分开头（即您没有使用 MultipleOutputs），那么您的答案就足够了

# javascript - jquery手机图片动态加载

> ID：10817829
> 
> 赞同：0
> 
> 时间：2012-05-30T13:59:22.893
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在使用 phongap 1.5、jquery 1.7.1、jquery mobile 1.1.0

在多页模板中，我有这个 html：

```
<ul data-role="listview" id="listviewPreferiti"></ul> 
```

当一个按钮被点击时，这个 js 被执行（我更喜欢这种 json 和 javascript 扩展的方法）：

```
$("ul[id="listviewPreferiti"] li").remove();
$("#listviewPreferiti").append(res).listview("refresh"); 
```

或与以前相同的代码： $("#listviewPreferiti").html(res).listview("refresh");

res 是这样的“li”列表：

```
<li><a id="1" href="#">
    <img src="http://www.pippo.com/images/02.jpg" class="ui-li-thumb"/>
    <p>some text</p>
</a></li>
<li><a id="2" href="#">
    <img src="http://www.pippo.com/images/03.jpg" class="ui-li-thumb"/>
    <p>some other text</p>
</a></li> 
```

渲染通常可以工作但是：有时直到我点击屏幕才会显示图像。我想原因是：jquery mobile的渲染过程在加载图像之前完成（实际上一旦加载图像，问题就不会发生，重新加载相同的listview）。

如何强制渲染图像？（我尝试使用 jquery .live，但没有运气）（我正在使用 android 4 手机进行测试）

编辑我在调用附加后发现了这个问题的可怕补丁：refreshListView(listviewPreferiti,8); （我试过 $('img').trigger('refresh') dut 不起作用）

```
var refreshListView = function(listName, times){
    if (times >0){
        setTimeout(function() {
            $("ul[id="+ listName +"] li img").each(function(index) {
                this.style.borderBottom = "0px solid red";
            });
        },200); 
        refreshListView(listName, --times);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:06:21.547

JavaScript`Image`对象有一个`onload`可以使用的回调。例子：

```
var myImage = new Image();
// Set the 'onload' callback to one of your functions
myImage.onload = imageLoadedCallback();
// Image starts loading once you set the 'src' attribute
myImage.src = "http://www.pippo.com/images/03.jpg"; 
```

这是加载图像后如何触发回调的通用示例。

### 更新：

由于您正在获取包含图像的整个 HTML 列表，因此我将使用 jQuery 来查找每个`<img>`的`src`属性。`<img>`然后，您可以为jQuery 在您的 HTML 中找到的每个标签设置一个类似上述的回调。加载图像后，您可以将其附加到文档中。

[这是jsFiddle](http://jsfiddle.net/RustyTheBoyRobot/nfbkV/4/)中的一个示例

# preferences - 通过命令行获取制表符大小

> ID：10817832
> 
> 赞同：5
> 
> 时间：2012-05-30T13:59:27.383
> 
> 标签：preferences, matlab

是否有自动检索 matlab 编辑器和命令窗口的选项卡大小的方法？是的，您可以打开首选项窗口并自己查找，但我希望它自动化。实际上，我认为这可以概括为在下面的屏幕截图中检索*任何*这些用户偏好。

![在此处输入图像描述](../Images/9dc106263c72d2d17dfa4f7ba42e2b19.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T13:59:27.650

我很快找到了解决方案，经过深思熟虑后，最好分享这个链接：

[http://undocumentedmatlab.com/blog/changeing-system-preferences-programmatically/](http://undocumentedmatlab.com/blog/changing-system-preferences-programmatically/)

所以你要做的是：

1.  打开首选项文件并查找您要阅读的首选项：

    ```
    edit(fullfile(prefdir,'matlab.prf')); 
    ```

    就我而言，它是线条`CommandWindowSpacesPerTab=I4`，`EditorSpacesPerTab=I4`看起来很有希望。我认为 I 代表类型（整数）。

2.  通过加载值来测试它：

    ```
    com.mathworks.services.Prefs.get<type>Pref(<pref-name>) 
    ```

    就我而言：

    ```
    >> com.mathworks.services.Prefs.getIntegerPref('EditorSpacesPerTab')
    ans =

        4 
    ```

这个问题也有一点重叠：[Saving settings in matlab](https://stackoverflow.com/questions/2003382/saving-settings-in-matlab)

**编辑：**显然，使用此功能时，它不会读取首选项的默认值。即：当您尚未更改首选项的值时，该值不会保存到首选项文件中，因此无法以这种方式加载。这些函数只返回 0。现在，我正在手动检测这种情况：

```
if loadedpref==0
    set default
end 
```

**EDIT2：**我还在 linux 命令行中使用 matlab，它有自己的选项卡设置（通常默认为 8）。为了检测这种情况，我使用了以下方法：

```
function retval = isCommandWindowOpen()
    jDesktop = com.mathworks.mde.desk.MLDesktop.getInstance;
    retval = ~isempty(jDesktop.getClient('Command Window'));
end 
```

# android - 序列化Android意图

> ID：10817834
> 
> 赞同：4
> 
> 时间：2012-05-30T13:59:32.593
> 
> 标签：android, serialization, android-intent, deserialization

我正在尝试实现一个应用程序来序列化android意图并通过套接字从客户端发送到服务器并在服务器上反序列化它。我尝试使用常规java序列化API在客户端序列化意图但在运行时它说意图不可序列化。是否有任何解决方案来序列化意图和反序列化它？只是我需要提一下，我也将 kryo 用于序列化和反序列化，但我在反序列化时再次遇到错误。有什么解决办法吗？

BR，拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:23:48.890

我将创建一个新`Serializable`对象并添加`Intent`您感兴趣的部分，即操作、捆绑参数等。

对象`Intent`本身不是。`Serializable`

另一种方法可能是编写自己的`Parcel`实现，将值存储在另一个`Serializable`对象类型中，然后将该对象序列化到服务器。您可以使用api`Intent`向 a写入。`Parcel``Intent.writeToParcel()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T21:58:41.450

我有一些运气使用 toUri() 序列化意图。不幸的是，相应的反序列化方法 Intent.parseUri 是不可靠的，并且经常返回 null，尽管序列化的数据看起来是有效的。

# android - 如何在Android中通过电子邮件地址获取用户名和密码

> ID：10817836
> 
> 赞同：-2
> 
> 时间：2012-05-30T13:59:36.340
> 
> 标签：android, sqlite

我试图通过电子邮件地址获取用户名和密码并将其作为电子邮件发送[密码恢复].....我可以通过电子邮件检查用户的存在，但现在我需要通过他/她之前提供的电子邮件......

这是我的 DB_Class

```
public boolean getEmail(String emailNo) throws SQLException //pass the EmailNo which you want in where clause 
{                              

Cursor mCursor = db.rawQuery("SELECT Username, Passwords FROM " + USERS_TABLE + " WHERE EmailNO='"+emailNo+"'",null); 
 if (mCursor != null) {          
 if(mCursor.getCount() > 0) 
 return true; 

}
return false; 

} 
```

还有我的用于检查用户存在和发送电子邮件的 Activity 类。下面是

```
 public void onClick(View v) {
            String EmailAddress = txtEmailAddress.getText().toString();

        try{
        if(EmailAddress.length() > 0)
        {
         DBAdapter  dbUser = new DBAdapter (RecoverPassword.this);
            dbUser.open();

        if(dbUser.getEmailAddress(EmailAddress))
            {
        Toast.makeText(RecoverPassword.this,"Email Successfully ", Toast.LENGTH_LONG).show();

 String to = txtEmailAddress.getText().toString();

         Intent email = new Intent(Intent.ACTION_SEND);
          email.putExtra(Intent.EXTRA_EMAIL, new String[]{ to});
         email.putExtra(Intent.EXTRA_SUBJECT, "Password Recovery");

         if(dbUser.getEmail(EmailAddress)){

          email.putExtra(Intent.EXTRA_TEXT,dbUser.getEmailAddr(obj.getusername(),obj.getpassword())) ;

     }else{

         Toast.makeText(RecoverPassword.this,"Email Not matching " ,Toast.LENGTH_LONG).show();
    }

      email.setType("message/rfc822");

  startActivity(Intent.createChooser(email, "gmail :"));                 

    }else{
        Toast.makeText(RecoverPassword.this,"Invalid Email", Toast.LENGTH_LONG).show();

        txtEmailAddress.setTex 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:05:06.477

您应该永远无法从数据库中恢复密码。如果您真的想恢复原始密码，那么您的安全性非常低（希望您不要将密码存储为纯文本？）。

我强烈建议生成一个新的，将其存储在数据库中并将其发送给用户。

在他第一次使用新密码登录后，您应该强制他定义新密码。密码本身至少应该被加盐和散列。搜索 MD5 和 salt 以获取有关该主题的更多信息。那应该足够安全。

# hibernate - 休眠返回比预期更多的行

> ID：10817837
> 
> 赞同：0
> 
> 时间：2012-05-30T13:59:40.567
> 
> 标签：hibernate

我的查询在使用 sql explorer 运行时返回 662 行，当我使用 hibernate 在代码中运行它时，它返回 856 行...我尝试使用集合并以这种方式删除重复项但显然没有任何重复...

***询问：***

```
String queryString = "FROM AEntity AS A " +
                     "LEFT JOIN A.bEntityAS B " +
                     "WHERE A.INIT||A.NUM IN (:carList) AND A.INIT IN (:initList) AND A.NUM IN (:numberList) " + 
                     "AND B.TRUK_AXL_CNT > 0"; 
```

***课程***

```
public class BEntity implements Serializable{

    @Id
    @Column(name = "NUM")
    private String num;

    @Id
    @Column(name = "INIT")
    private String init;

    @Column(name = "V_CNT")
    private Integer vcnt;
}

public class AEntity implements Serializable{

    @Id
    @Column(name = "NUM")
    private String num;

    @Id
    @Column(name = "INIT")
    private String init;

    @OneToOne
    @PrimaryKeyJoinColumns({
        @PrimaryKeyJoinColumn(name="NUM", referencedColumnName="NUM"),
        @PrimaryKeyJoinColumn(name="INIT", referencedColumnName="INIT")
    })
    private BEntity bEntity;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:48:12.577

如果可以使用`Criteria`，请尝试以下操作：

`criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY)`

否则，请尝试`DISTINCT`在 HQL 中使用关键字。

`select distinct a from AEntity a...`

[该问题在本文](http://blog.xebia.com/2008/12/11/sorting-and-pagination-with-hibernate-criteria-how-it-can-go-wrong-with-joins/)顶部进行了一些解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:13:09.610

这

```
WHERE A.INIT||A.NUM IN (:carList) 
```

没有做你期望做的事情。

如果您有一个实体

```
INIT = 1, NUM = 34 
```

和另一个实体

```
INIT = 13, NUM = 4 
```

那么在这两种情况下，表达式的`A.INIT||A.NUM`计算结果都是`134`，如果您`INIT = 1, NUM = 34`只查找具有的实体，那么您的选择仍然会获取两个实体。

要使其正常工作，您必须使用不会出现在任何可能的 INIT 或 NUM 值中的分隔符。让我们在此示例中使用“+”作为分隔符，然后将您的选择更改为

```
WHERE A.INIT || '+' || A.NUM IN (:carList) 
```

并且您在 carlist 中的值必须使用相同的分隔符准备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T15:44:37.120

不幸的是，其他答案都没有奏效-但确定无论出于何种原因，hibernate 返回了正确的结果，而 sql explorer 返回了不正确的结果。结果集中的所有两个字符首字母都被 sql explorer 消除了......给出了错误的结果。

休眠是正确的！

# jakarta-ee - EJB 3.0 - 嵌套事务！= 需要新的？

> ID：10817838
> 
> 赞同：28
> 
> 时间：2012-05-30T13:59:42.117
> 
> 标签：jakarta-ee, transactions, ejb-3.0, nested-transactions

我刚刚阅读了“掌握 EJB 3.0”的事务第 (10) 章，现在我对嵌套事务感到困惑。

书上说

> “EJB 定义的事务管理器不支持嵌套事务；它只需要支持平面事务。” （站点 278，注）

这个事实不仅在本书中有所描述，我在其他书籍/网站上也发现了这一说法。

但是，如果我从 a 中调用“Requires New”注释方法，比如说“Required”注释 Methode，我所拥有的是嵌套事务，不是吗？我可以回滚或提交内部事务，而不影响外部事务。如果我想中止外部事务，我会抛出一个 EJBException 并且整个事务将被回滚。

那么仅仅是EJB 3.0规范**不需要**这种行为还是我误解了什么？我只是无法区分嵌套事务和所描述的行为。

问候诺曼

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-30T17:18:54.073

RequiresNew 不会创建嵌套事务，因为第一个事务在第二个事务运行时被挂起。嵌套事务如下所示：

```
Nested transaction example
> method1 - begin tran1
  > method2 - begin tran2
    workA
  < method2 - commit tran2
< method1 - rollback tran1 (tran2 also rolled back because it's nested) 
```

相反，RequiresNew 看起来像这样：

```
EJB RequiresNew example
> method1 - begin tran1
  > method2 - suspend tran1, begin tran2
    workA
  < method2 - commit tran2, resume tran1
< method1 - rollback tran1 (tran2 remains committed) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-30T17:19:17.993

简单的答案是“外部”事务在新事务开始之前被挂起。这两个交易的命运没有任何联系，因此从所有意图和目的来看，一个交易不会嵌套在另一个交易中。

如果该`REQUIRES_NEW`方法抛出一个`EJBException`它将被回滚的是它创建的新事务，而不是“外部”事务。

# jquery - 动态创建输入框并设置值

> ID：10817839
> 
> 赞同：0
> 
> 时间：2012-05-30T13:59:42.457
> 
> 标签：jquery, html, json

这是我在页面中获得的 json 数据。每次它带来不同的数据和长度。

```
 {
       "d":[
          {

             "MenuItem":"AboutUs",
             "NoOfColumn":0,
             "ColumnNo":0,
             "ContentType":1,
             "MenuContent":"testtest",
             "Header":"Header",
             "MenuItemID":2,

          },
          {
             "MenuItem":"AboutUs",
             "NoOfColumn":0,
             "ColumnNo":1,
             "ContentType":1,
             "MenuContent":"sdfsdfsdfsdfsdfdsfsdf",
             "Header":"Header",
             "MenuItemID":2,
          }
       ]
    } 
```

所以我想动态创建字段并尝试绑定它。我尝试：

```
 var contain = data.d;
       var html = "";
       $.each(contain, function(index, item) {
        html += '<input type="text" val=' + item.Header + ' id=txtColumnHeader_' + item.ColumnNo + ' class="Inputbox" />';

       var txtColumnHeader="txtColumnHeader_"item.ColumnNo;
       $('#'+txtColumnHeader).val(item.MenuItem);  //Its not work.Want help here. data.d have value.
    alert(item.MenuItem);
       });
 $('#divEdit').html(html);//Div is in html page its not created dynamically. 
```

我也尝试：

```
$('#'+txtColumnHeader).text(item.MenuItem); 
```

但它也不起作用。但是警报给了我一个正确的值。我的错误是什么。我错了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:02:04.047

```
var html = "";
$.each(contain, function(index, item) {
    html += '<input type="text" id="txtColumnHeader_' + 
            item.ColumnNo + '" class="Inputbox" value="' + item.MenuItem + '" />';
}); 
```

`.val()` not necessary, because you're set the value in the time of initialization.

But if you wanna use `.val()` then try:

```
var txtColumnHeader="txtColumnHeader_" + item.ColumnNo;

                                       ^--- you missed this `+` here

$('#'+txtColumnHeader).val(item.MenuItem); 
```

# java - 使用 Hibernate 加入没有 PK 的旧表

> ID：10817842
> 
> 赞同：0
> 
> 时间：2012-05-30T13:59:46.657
> 
> 标签：java, hibernate, jpa

我有 2 个旧表：

```
CREATE TABLE A (
    ID NUMBER PRIMARY KEY , 
    DATA NUMBER
)

CREATE TABLE A_CONF (
    A_ID NUMBER,    // FK to A
    INFO VARCHAR2(256)
) 
```

创建 JPA 实体`A`很简单。但是，由于没有 PK并因此无法为其创建实体，我该怎么做才能检索`INFO`可以关联到实例的多个字段？`A``A_CONF`

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:00:57.813

似乎您正在寻找 JPA 所谓的“元素集合”：

```
@Entity
public class A {
    @Id
    private Long id;
    private Long data;

    @ElementCollection
    @CollectionTable(name="A_CONF", joinColumns=@JoinColumn(name="A_ID")) // A_ID would be the default join column
    @Column(name="INFO")
    private Set<String> infos; // using Set assuming unique values
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:03:13.393

即使您的表没有主键，您也可以在模型类中定义主键，只需在模型中选择一列或几列并将它们作为 id。

# java - 适合使用 main 方法作为开球吗？

> ID：10817843
> 
> 赞同：1
> 
> 时间：2012-05-30T13:59:46.620
> 
> 标签：java, coding-style, main

**我想知道：**在较短（但有可能变得更长）程序中，主要方法的最佳用途是什么？

**这就是我的意思：**当我开始一个项目时。我通常从`MainController`. 我用它来控制我的程序的流程。在过去（和现在）我一直在做这样的事情：

```
public class MainController {

//Note, normally I'll do some singleton patter stuff here, but I believe that's irrelevant to this question

  public static void main(String[] args) {
    MainController mc = new MainController();
    mc.begin();
  }

  public void begin() {
    //my code here
  }
} 
```

**我想就以下问题发表意见**：将主代码放在 main 方法中，就像下面的代码一样，还是像我一直在做的那样做更好（就像在前面的代码中一样）

```
public static void main(String[] args) {
  //my code here
} 
```

注意：我意识到这可能是一个基于意见的答案，但我很想知道投票的去向。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:03:48.253

最好使用您首先提到的方法，即

```
 public static void main(String[] args) {
    MainController mc = new MainController();
    mc.begin();
  }

  public void begin() {
    //my code here
  } 
```

原因是，该`begin()`方法应该做`begin()`应该做的事情。当我们以[**高凝聚力**](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)为目标时，这应该是方法。每个方法都在做它应该做的事情。`main()`只是开始你的程序的一个点，这并不意味着它应该为那个特定的课程做你能想到的所有事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:04:02.747

至少为了可读性，我总是从你的第一种方法开始。从某种意义上说，我可以选择任意命名我的自定义方法。而不是把它全部放在 main 方法中，它并没有真正描述我想要完成的事情。

话虽如此，为了平衡，让我提供一个计数器：您的第一种方法需要创建一个对象并调用一个方法 this 对象，这是一个开销。但实际上，这应该无关紧要。

# javascript - Javascript 在 Internet Explorer 中执行两次

> ID：10817845
> 
> 赞同：8
> 
> 时间：2012-05-30T13:59:51.517
> 
> 标签：javascript, jquery, internet-explorer, jquery-deferred

我目前遇到了一个问题，即延迟加载的 javascript 将使用 Internet Explorer 执行两次 - 并且仅 Internet Explorer（当前版本 9）。火狐和铬的作品。这是我的代码：

```
injectExternalJavaScript: function(fileUrl) {
    return jQuery.Deferred(function(deferred) {
        var script = document.createElement('script');
        script['src'] = fileUrl;
        script['type'] = 'text/javascript';
        var head = document.getElementsByTagName("head")[0];
        var done = false;
        // Attach handlers for all browsers
        script['onload'] = script['onreadystatechange'] = function() {
            if (!done && (!this.readyState || this.readyState === "loaded" || this.readyState === 'complete')) {
                done = true;
                script['onload'] = script['onreadystatechange'] = null;
                head.removeChild(script);
                deferred.resolve();
            }
        };
        head.appendChild(script);
    }).promise();
} 
```

我已经找到[了这个帖子](http://css-tricks.com/snippets/jquery/load-jquery-only-if-not-present/)并根据它更改了我的代码，但仍然执行我的脚本两次。你们有什么想法吗？

**编辑：这是我的解决方案**

```
injectExternalJavaScript: function(fileUrl) {
    return jQuery.Deferred(function(deferred) {
        var script = document.createElement('script');
        script['src'] = fileUrl;
        script['type'] = 'text/javascript';
        var head = document.getElementsByTagName("head")[0];
        var done = false;
        // Attach handlers for all browsers
        var cb = function() {
            if (!done && (!this.readyState || this.readyState === "loaded" || this.readyState === 'complete')) {
                done = true;
                script['onload'] = script['onreadystatechange'] = null;
                head.removeChild(script);
                deferred.resolve();
            }
        }
        if (script.addEventListener) {
            script.addEventListener('load', cb, false);
        } else {
            script['onreadystatechange'] = cb;
        }
        head.appendChild(script);
    }).promise();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:08:07.700

试试这个

```
s = document.createElement("script");
s.src="myscript.js";
if(s.addEventListener) {
    s.addEventListener("load",callback,false);
}else if(s.readyState) {
    s.onreadystatechange = callback;
}
document.body.appendChild(s);
function callback() { console.log("loaded"); } 
```

取自[http://msdn.microsoft.com/en-us/library/ie/hh180173(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh180173(v=vs.85).aspx)

这对你来说是……

```
injectExternalJavaScript: function(fileUrl) {
    return jQuery.Deferred(function(deferred) {
        var script = document.createElement('script');
        script['src'] = fileUrl;
        script['type'] = 'text/javascript';
        var head = document.getElementsByTagName("head")[0];
        var done = false;
        // Attach handlers for all browsers
        var cb = function() {
            if (!done && (!this.readyState || this.readyState === "loaded" || this.readyState === 'complete')) {
                done = true;
                script['onload'] = script['onreadystatechange'] = null;
                head.removeChild(script);
                deferred.resolve();
            }
        };
        if ( script.addEventListener ) {
            script.addEventListener('load',cb, false);
        } else {
            script.onreadystatechange = cb;
        }
        head.appendChild(script);
    }).promise();
} 
```

# jquery - .each( ) 中单个项目的唯一操作

> ID：10817848
> 
> 赞同：1
> 
> 时间：2012-05-30T14:00:03.630
> 
> 标签：jquery, each

是否可以在 .each() 函数中为每个结果编写单独的代码？

我想在[示例](http://jsfiddle.net/rJGYL/)中做的是让每个订单项具有唯一的颜色。这可以在 .each() 中完成吗？

```
$(document).ready(function() {    
    $('li').each(function() {
        $(this).css('color', 'purple');
    }); 
// End it all    
});​ 
```

[http://jsfiddle.net/rJGYL/](http://jsfiddle.net/rJGYL/)

**编辑：**为了更简洁，是否可以为每个项目添加唯一的 css？例如，不仅仅是一种颜色，而是说我想让第一个项目的字体粗体为粗体，下一个项目为斜体......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T14:01:45.047

```
$(document).ready(function() {

var colors = ['red','green', 'blue', 'pink']

    $('li').each(function(i) {
        $(this).css('color', colors[i]);
    });

// End it all    
});​ 
```

JSFiddle：http: [//jsfiddle.net/lucuma/aU4kr/](http://jsfiddle.net/lucuma/aU4kr/)

您可以使用每个函数中的索引来引用数组。如果您想了解更多详细信息，可以在这里找到：http: [//api.jquery.com/each/](http://api.jquery.com/each/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:02:43.987

是的，您可以使用以下代码执行此操作

```
$(document).ready(function() {
  var colors = ['black','red','purple','yellow']
    $('li').each(function(i) {
        $(this).css('color', colors[i]);
    });

// End it all    
});​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/rJGYL/1/)

把你的颜色放在`colors`数组中。

**更新**

您可以像这样为数组中的每个 li 定义不同的 css

```
$(document).ready(function() {
    var css = [{'font-weight':'bold','font-size':'25px','color':'red'}
               ,{'color':'purple'},{'color':'black'},{'color':'yellow'}]
    $('li').each(function(i) {
        $(this).css(css[i]);

    });

// End it all    
});​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/rJGYL/5/)

您已将`css`属性定义为对象数组中的对`'key':'value'`。`css`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:02:51.453

您可以指定一个可用颜色的数组，然后使用每个项目的索引从该数组中选择：

[http://jsfiddle.net/rJGYL/2/](http://jsfiddle.net/rJGYL/2/)

```
$(document).ready(function() {
    var colors = ["purple", "red", "blue", "yellow"];

    $('li').each(function(index) {
        $(this).css('color', colors[index]);
    });

    // End it all    
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:14:09.620

```
var colors= ['red','green', 'blue'];

$('li').css('color', function() {
    return colors[i];
}); 
```

# visual-studio-2010 - 解决不正确的项目引用 GUID

> ID：10817857
> 
> 赞同：6
> 
> 时间：2012-05-30T14:00:40.707
> 
> 标签：visual-studio-2010, msbuild, project-reference

我在 Visual Studio 解决方案中有一些项目，这些项目最终得到了包含引用项目的错误 GUID 的项目引用。（可能是由于引用的项目在某个阶段被重新创建）

例如。考虑一个具有以下属性的项目 CoreProject.csproj：

```
<ProjectGuid>{93803F9C-8C65-4949-8D44-AB7A3D0452C8}</ProjectGuid>
<OutputType>Library</OutputType>
<RootNamespace>CoreProject</RootNamespace>
<AssemblyName>CoreProject</AssemblyName> 
```

另一个项目包含对此的引用，但在某个阶段 GUID 已更改并且现在不正确。

```
<ProjectReference Include="..\CoreProject\CoreProject.csproj">
  <Project>{5FD52517-79F8-41D2-B6F2-EA2D8A886549}</Project>
  <Name>CoreProject</Name>
</ProjectReference> 
```

该解决方案仍然在 Visual Studio 和 msbuild 中正确加载和构建，但我怀疑 GUID 错误可能会对 VS 中的性能产生一些影响。

解决方案非常大，许多项目都有这个问题，我不希望手动重新添加这些引用。是否有任何工具或宏可以“修复”项目引用 GUID？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T20:05:22.810

我认为一个基本的控制台应用程序应该可以解决问题，如下所示：

```
using System;
using System.IO;
using System.Linq;
using Microsoft.Build.Evaluation;

public class Program
{
    public static void Main(String[] args)
    {
        var projects = Directory.EnumerateFiles(@"...", "*.csproj", SearchOption.AllDirectories)
            .Select(x =>
                    {
                        try
                        {
                            return new Project(x);
                        }
                        catch
                        {
                            return null;
                        }
                    })
            .Where(x => x != null)
            .ToList();
        var guids = projects.ToDictionary(p => p.FullPath, p => p.GetPropertyValue("ProjectGuid"));

        foreach (var project in projects)
        {
            var save = false;

            foreach (var reference in project.GetItems("ProjectReference"))
            {
                var path = Path.GetFullPath(Path.Combine(Path.GetDirectoryName(project.FullPath), reference.EvaluatedInclude));
                if (!guids.ContainsKey(path))
                {
                    Console.WriteLine("No {0}", Path.GetFileName(path));
                    continue;
                }

                var guid = guids[path];
                var meta = reference.GetMetadataValue("Project");
                if (meta != guid)
                {
                    Console.WriteLine("{0} -> {1}", meta, guid);
                    reference.SetMetadataValue("Project", guid);
                    save = true;
                }
            }

            if (save)
                project.Save(project.FullPath);
        }
    }
} 
```

# ruby-on-rails - current_page 的效率如何？辅助方法？

> ID：10817859
> 
> 赞同：1
> 
> 时间：2012-05-30T14:01:08.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-2

我很好奇 Rails`current_page?`辅助方法的效率。我在一个视图中使用它，大致如下图：

```
 <% if current_page?(:action => "foo") %>
    <dt>Label 1:</dt>
  <% else %>
    <dt>Label 2:</dt>
  <% end %> 
```

和

```
 <% if current_page?(:action => "foo") || current_page(:action => "bar") %>
    <dt>Label 1:</dt>
  <% else %>
    <dt>Label 2:</dt>
  <% end %> 
```

但是以其他方式进行此切换会更有效吗？`foo`例如，在我的控制器操作中为and设置一个实例变量`bar`，然后检查是否更有效`<% if @foo || @bar %>`？

Rails 2 和 Rails 3 之间的效率有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:30:03.380

我无法说出 Rails 2 和 Rails 3 之间的区别，但是查看[ActionPack 中的源代码，](https://github.com/rails/rails/blob/3-2-stable/actionpack/lib/action_view/helpers/url_helper.rb#L588 "ActionPack 中的源代码")看起来该方法并没有做任何特别复杂的事情。url_for 可能效率稍低（我不知道），但除非您在此部分上进行大量循环，否则优化它可能不会为您节省大量时间。

也就是说，做一些基本的基准测试很容易——t = Time.now; 在一个版本上循环 1000 次；v1_time = t - Time.now；t =时间.现在；冲洗并重复另一个版本。如果你这样做，请告诉我你发现了什么。

综上所述，在我看来，如果可以将标志表示为与视图不直接相关的概念，那么让您的控制器方法设置适当的标志在概念上可能会更清晰。我很好奇别人怎么想的。

# c++ - c ++：如何在鼠标点击发生的任何地方捕捉鼠标点击

> ID：10817860
> 
> 赞同：11
> 
> 时间：2012-05-30T14:01:09.270
> 
> 标签：c++, winapi, mouse

我被一个正在编写的应用程序卡住了，我需要监视鼠标点击。

点击可能发生在屏幕上的任何地方，而不是在应用程序窗口内，每次点击我都必须传递一条消息（执行一个动作或其他东西）。

我环顾四周并阅读了一些建议，例如使用

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam) 
```

但我没有成功。

有谁知道如何实现我需要的东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T14:12:06.143

您需要按照[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)中的说明设置鼠标挂钩。

请注意，在您的情况下，钩子需要是全局的。这意味着您需要在 DLL 中实现一个处理函数，该函数将被加载到系统中所有接收鼠标消息的进程中。此类 DLL 将使用某些进程间通信 (IPC) 机制（如共享内存）或通过从 DLL*发布*（未发送）到主应用程序的 Windows 消息与您的主应用程序进行通信。

您可以使用[此 CodeProject 文章](http://www.codeproject.com/Articles/67091/Mouse-and-KeyBoard-Hooking-utility-with-VC)中的源代码作为指南。

更新：根据克里斯的更正，我应该注意，以上适用于同步的“常规”鼠标钩子。低级钩子不需要位于 DLL 中，但它有一定的限制，在[相应的 MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644986%28v=vs.85%29.aspx)中有描述。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-19T04:46:01.570

好吧，我真的不知道你是否解决了你的问题。但愿如此。但是我今天遇到了同样的麻烦，搜索我发现了一种非常容易做到的方法。

所以你在这里：

```
int keyPressed(int key){
    return (GetAsyncKeyState(key) & 0x8000 != 0);
}

int main(){
    while(1){
        if(keyPressed(VK_LBUTTON)){
            printf("%s\n","Click izquierdo");
        }
        if(keyPressed(VK_RBUTTON)){
            printf("%s\n","Click Derecho");
        }
    }
    return 0;
} 
```

此解决方案的关键是函数 GetAsyncKeyState(key)，其中关键代码出现在此处[https://msdn.microsoft.com/en-us/library/dd375731(VS.85).aspx](https://msdn.microsoft.com/en-us/library/dd375731(VS.85).aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-30T14:08:54.990

你可以使用`SetWindowsHookEx`

这是一个小样本：

```
#define _WIN32_WINNT 0x0500
#include <windows.h>

HHOOK MouseHook;

LRESULT CALLBACK MouseHookProc(int nCode, WPARAM wParam, LPARAM lParam){

        PKBDLLHOOKSTRUCT k = (PKBDLLHOOKSTRUCT)(lParam);
        POINT p;

        if(wParam == WM_RBUTTONDOWN)
        { 
          // right button clicked 
          GetCursorPos(&p);
        }

}

void StayAlive(){
        while(_getch() != 27) { }
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
        LPSTR lpCmdLine, int nShowCmd){
        FreeConsole();

        MouseHook = SetWindowsHookEx(WH_MOUSE_LL,MouseHookProc,hInstance,0);
        StayAlive();

        UnhookWindowsHookEx(MouseHook);
        return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T14:34:20.070

`LRESULT CALLBACK WndProc(...)`，顾名思义是一个（特定的）窗口（消息）处理器，您可以在其中分析和响应队列上的消息，这些消息由系统延迟到您自定义的回调定义以供进一步处理。

正如克里斯在评论中所建议的那样，由于您想检测屏幕上任何位置的鼠标点击并对其采取行动，因此一种方法是通过调用 SetWindowsHookEx() 将自己连接到系统中，这在其定义中非常冗长 - 它允许您跟踪系统上发生的事情并将该信息传递回您的应用程序。

这是您需要使用的语法才能让自己

```
HHOOK WINAPI SetWindowsHookEx(
  __in  int idHook,
  __in  HOOKPROC lpfn,
  __in  HINSTANCE hMod,
  __in  DWORD dwThreadId
); 
```

它接受一个特定的钩子 id，它基本上是小的 #defines，它告诉函数你希望从整个系统接收什么样的消息，你像 WndProc 一样向它传递一个回调，但这一次它是为了处理关于整个系统的传入消息。hMod 只是指刚刚提到的 proc 函数回调所在的应用程序或 DLL 的句柄。最后一个与系统上当前运行的线程有关，将其设置为 0 或 NULL 会检索所有现有线程的消息。

**重要**：

请注意，Aurus 对 SetWindowsHookEx 的示例调用是特定于进程的，这是一个与实际应用程序相关的花哨词，而不是可以附加到系统中多个进程（全局进程）并将信息返回给您的应用程序的 DLL . 花时间和精力研究尤金推荐的方法而不是这种只对实验有用的有力方法是明智的。这有点“难”，但奖励是值得的。

*更少的工作并不总是更好或更可取。*

# node.js - log all requests in mongodb

> ID：10817863
> 
> 赞同：1
> 
> 时间：2012-05-30T14:01:24.017
> 
> 标签：node.js, express, mongoose

I have a nodejs-express-mongoose application and I want to set logging system up. I know about connect.logger() middleware but I want to log into MongoDB database.

Can I achieve that by using overriding connect.logger() middleware of are some express plugins for my purposes?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:27:25.453

mongoose 有一个`debug`选项可以使用`console.error`. 你也可以用你自己的自定义函数覆盖它：

```
mongoose.set('debug', true) // for logging with console.error
mongoose.set('debug', yourFunction) // to handle it yourself 
```

# actionscript-3 - How to build .air file through Adt.jar with the help of NativeProcess in Adobe AIR?

> ID：10817875
> 
> 赞同：0
> 
> 时间：2012-05-30T14:02:00.413
> 
> 标签：actionscript-3, apache-flex, air

```
<?xml version="1.0" encoding="utf-8"?><s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" xmlns:mx="library://ns.adobe.com/flex/mx">
<fx:Declarations>       
</fx:Declarations>
<fx:Script>
    <![CDATA[

        private var nativeProcess:NativeProcess;

        private function onGo() : void {
            outputField.text = "";

            var file:File = new File("C:\\Program Files (x86)\\Java\\jdk1.6.0_18\\bin\\java.exe");
            var descriptorFile:File = new File("C:\\AirPackageApp-app.xml");
            var swfFile:File = new File("C:\\AirPackageApp.swf");
            var processArgs:Vector.<String> = new Vector.<String>;
            processArgs.push("-jar");
            processArgs.push("C:\\adt.jar");
            processArgs.push("-checkstore");
            processArgs.push("-storetype");
            processArgs.push("pkcs12");
            processArgs.push("-keystore");
            processArgs.push("-storepass");
            processArgs.push("sybrant"); 
            processArgs.push("c:\\nodename.air");           
            processArgs.push(descriptorFile.nativePath);           
            processArgs.push(swfFile.nativePath);           

            var nativeProcessStartupInfo:NativeProcessStartupInfo = new NativeProcessStartupInfo();
            nativeProcessStartupInfo.arguments = processArgs;
            nativeProcessStartupInfo.executable = file;

            nativeProcess = new NativeProcess();
            nativeProcess.addEventListener(ProgressEvent.STANDARD_ERROR_DATA,onCertErrOutputData);
            nativeProcess.addEventListener(ProgressEvent.STANDARD_OUTPUT_DATA,onCertOutputData);
            nativeProcess.start(nativeProcessStartupInfo);
        }

        private function onCertErrOutputData(event:ProgressEvent) : void {
            var certResponse:String = new String();
            certResponse = nativeProcess.standardError.readUTFBytes(nativeProcess.standardError.bytesAvailable);
            trace(certResponse);
            outputField.text += certResponse;   
            if ( certResponse.substr(0,5) == "valid") {
                trace("Correct password!");
                nativeProcess.removeEventListener(ProgressEvent.STANDARD_ERROR_DATA,onCertOutputData);
                nativeProcess.exit();
            } else {
                trace("Incorrect password! Error...");
                nativeProcess.removeEventListener(ProgressEvent.STANDARD_ERROR_DATA,onCertOutputData);
                nativeProcess.exit();
            }
        }

        protected function onCertOutputData(event:ProgressEvent):void
        {
            trace(nativeProcess.standardOutput.readUTFBytes(nativeProcess.standardOutput.bytesAvailable));
        }

    ]]>
</fx:Script>
<s:layout>
    <s:VerticalLayout/>
</s:layout>
<s:Button label="go" click="onGo()" />
<s:TextInput id="passField"/>
<s:TextArea id="outputField" width="100%" height="100%"/> 
```

It works everything fine when working with command prompt.It generate nodename.air file in C:\nodename.air. But when using native process it works upto following arguments

```
 processArgs.push("-storepass");
 processArgs.push("sybrant"); 
```

After that if i missspelled my air-descriptor.xml file or my swf file it doesn't throw any error msg but it throws error in command prompt.(OS Windows 7, Java version 1.6)

Thanks, Raja.J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:14:13.437

尝试这个

这个类可能对你有帮助 air_command.bat java -jar adt.jar -package -storetype pkcs12 -keystore keyfile.p12 -storepass mypassword SampleApp.air SampleApp-app.xml SampleApp.swf

运行应用程序之前

*   确保设置了 java 类路径
*   桌面扩展桌面移动设备扩展移动设备

至

扩展桌面

```
 package
{
 import flash.desktop.NativeProcess;
 import flash.desktop.NativeProcessStartupInfo;
 import flash.events.ProgressEvent;
 import flash.filesystem.File;

 import mx.controls.Alert;

public class PlatformPackaging
 {
 private var nativeProcess:NativeProcess;
 private var isErrorOccured:Boolean;

 private var batFile:File;
 private var cmdFile:File;

 private function get isWindows():Boolean
 {
 return true;
 }

 public function PlatformPackaging()
 {
 }

 public function start(targetPlatform:String):void
 {
 if(isWindows)
 {
 if(targetPlatform == TargetPlatform.APPLE_IPA)
 {
 batFile = File.applicationDirectory.resolvePath("publish/ipa_command.bat");
 cmdFile = new File("c:\\Windows\\System32\\cmd.exe");
 }
 else if(targetPlatform == TargetPlatform.WINDOWS_AIR)
 {
 batFile = File.applicationDirectory.resolvePath("publish/air_command.bat");
 cmdFile = new File("c:\\Windows\\System32\\cmd.exe");
 }
 else if(targetPlatform == TargetPlatform.ANDROID_APK)
 {
 batFile = File.applicationDirectory.resolvePath("publish/apk_command.bat");
 cmdFile = new File("c:\\Windows\\System32\\cmd.exe");
 }
 }

 proceedToPackaging();

 }

 private function proceedToPackaging():void {

 var processArgs:Vector.<String> = new Vector.<String>;

 processArgs.push("/c");
 processArgs.push(batFile.nativePath);

 var workingDirectory:File = File.applicationDirectory.resolvePath("publish/");
 var nativeProcessStartupInfo:NativeProcessStartupInfo = new NativeProcessStartupInfo();

 nativeProcessStartupInfo.arguments = processArgs;
 nativeProcessStartupInfo.executable = cmdFile;
 nativeProcessStartupInfo.workingDirectory = workingDirectory;

 nativeProcess = new NativeProcess();
 nativeProcess.addEventListener(ProgressEvent.STANDARD_ERROR_DATA,onStandardErrorOutputDataHandler);
 nativeProcess.addEventListener(ProgressEvent.STANDARD_OUTPUT_DATA,onStandardOutputDataHandler);
 nativeProcess.start(nativeProcessStartupInfo);
 }

 private function onStandardErrorOutputDataHandler(event:ProgressEvent) : void
 {
 var certResponse:String = nativeProcess.standardError.readUTFBytes(nativeProcess.standardError.bytesAvailable);

 trace(certResponse);
 nativeProcess.removeEventListener(ProgressEvent.STANDARD_ERROR_DATA,onStandardOutputDataHandler);
 nativeProcess.exit();
 }

 Alert.show(certResponse,'Error');
 }

 protected function onStandardOutputDataHandler(event:ProgressEvent):void
 {
 var status:String = nativeProcess.standardOutput.readUTFBytes(nativeProcess.standardOutput.bytesAvailable);

 Alert.show(status)
 }

 }
} 
```

# java - 使用 java 从 html 页面中提取单个值：

> ID：10817882
> 
> 赞同：1
> 
> 时间：2012-05-30T14:02:42.410
> 
> 标签：java, web-scraping, html-content-extraction

我正在继续从事我已经从事了一段时间的项目，并且一直在努力从网站上提取一些数据。该网站有一个 iframe，可以从未知来源中提取一些数据。数据位于标签中的 iframe 中，如下所示：

```
<DIV id="number_forecast"><LABEL id="lblDay">9,000</LABEL></DIV> 
```

它上面还有一堆其他的废话，但是这个 div id / label 是完全唯一的，并且没有在代码中的其他任何地方使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:08:34.263

[jsoup](http://jsoup.org/)可能是您想要的，它擅长从 HTML 文档中提取数据。

有许多示例展示了如何使用 API：http: [//jsoup.org/cookbook/extracting-data/selector-syntax](http://jsoup.org/cookbook/extracting-data/selector-syntax)

该过程将分为两个步骤：

*   解析页面并找到 iframe 的 url
*   解析 iframe 的内容并提取您需要的信息

代码如下所示：

```
 // let's find the iframe
 Document document = Jsoup.parse(inputstream, "iso-8859-1", url);
 Elements elements = document.select("iframe");
 Element iframe = elements.first();

 // now load the iframe
 URL iframeUrl = new URL(iframe.absUrl("src"));
 document = Jsoup.parse(iframeUrl, 15000);

 // extract the div
 Element div = document.getElementById("number_forecast"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:13:57.840

在您包含 iframe 的页面中，将您 iframe 的源更改为您自己的 url。此 url 将使用您的 ouw 控制器进行处理，该控制器将读取内容、解析它、提取您需要的所有内容并写入响应。如果您的 iframe 中有绝对引用，这应该可以工作。

# dll - Is the order of loading .dlls using %PATH% is guaranteed?

> ID：10817887
> 
> 赞同：0
> 
> 时间：2012-05-30T14:02:51.270
> 
> 标签：dll, load, environment-variables

When I try to load a .dll then the application first try to load the .dll from their local folder, if it is not there they try to load it using the `%PATH%` environment variable.

I don't mind if the OS is doing any other searches, but I am interested in the order of the search in the `%PATH%` environment variable.

Now, let's assume I have two versions of theis dll, and both pathes of those dlls are in the `%PATH%` environment variable.

Am I guaranteed that the first path that is containing the .dll in the `%PATH%` environment variable, is the path which the .dll will be loaded from?

10x.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:40:33.063

搜索 DLL 有确切的顺序。

签出这个：

[http://msdn.microsoft.com/en-us/library/7d83bc18%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/7d83bc18%28v=vs.80%29.aspx)

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx)

更新：

Windows 将按照它们出现在 PATH 变量中的顺序进行搜索。请注意，完整的 PATH 变量由两部分组成：

系统：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment\PATH

然后附加当前用户的 PATH ： HKEY_CURRENT_USER\Environment\PATH

# xslt - XML CDATA not working with XSLT

> ID：10817889
> 
> 赞同：0
> 
> 时间：2012-05-30T14:03:02.903
> 
> 标签：xslt, xpath, xslt-1.0

I want to output an image using xslt. The src attribute will be comming from an xml node>

Example

```
<images>
     <![CDATA[/images/sample_image.png]]>
</images 
```

in my xslt i outputted the image with the following code below but im getting a broken image.

```
<xsl:element name="img">    
   <xsl:attribute name="src"><xsl:value-of select="//images"></xsl:value-of></xsl:attribute>
</xsl:element> 
```

but when i tried to output the image by hard coding the src, it worked.

```
 <xsl:element name="img">   
       <xsl:attribute name="src">/images/sample_image.png</xsl:attribute>
    </xsl:element> 
```

is there any reason why the first code doesn't worked?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:27:09.297

尝试用 eg 去除空白`<img src="{normalize-space(//images)}"/>`，这可能会有所帮助。

# c# - 我需要帮助在我的 radTreeView 中实现样式

> ID：10817892
> 
> 赞同：0
> 
> 时间：2012-05-30T14:03:11.070
> 
> 标签：c#, wpf, xaml, styles, radtreeview

我想从 radtreeview 中删除突出显示的背景。我创建了一个样式来执行此操作，但我不断收到错误和异常，例如“项目集合必须为空”。如果我注释掉应用程序的样式，那么我知道这是问题的原因。我对 WPF 相当陌生，而且我确信我还不明白如何使用样式。谢谢你的帮助。这是代码。

```
<Grid x:Name="LayoutRoot" Background="Salmon">

        <telerik:RadTreeView x:Name="radTreeView" Margin="8" ItemsSource="{Binding Errors}" Background="Salmon" Style="{StaticResource treeStyle}">
             <Style TargetType="{x:Type telerik:RadTreeViewItem}" x:Name="treeStyle">
                <Setter Property="Focusable" Value="False"/>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="true">
                        <Setter Property="Background" Value="{x:Null}"/>
                        <Setter Property="BorderBrush" Value="{x:Null}"/>
                    </Trigger>
                </Style.Triggers>
            </Style>

            <telerik:RadTreeView.ItemTemplate>
                 <HierarchicalDataTemplate ItemsSource="{Binding SubItems}" >
                    <Grid Background="Salmon">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>

                        </Grid.RowDefinitions>
                        <TextBlock Text="{Binding Description}" IsHitTestVisible="False" />

                        <ListBox Grid.Row="1" ItemsSource="{Binding Messages}" Margin="20,0,0,0" BorderBrush="#00000000" BorderThickness="0" Background="Salmon" IsHitTestVisible="False" >
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Message}"/>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Grid>

                </HierarchicalDataTemplate>

            </telerik:RadTreeView.ItemTemplate>

        </telerik:RadTreeView>

    </Grid>

</UserControl> 
```

如果您知道这行不通，我还试图用样式代码摆脱突出显示：

```
<Style TargetType="TreeViewItem">
      <Style.Resources>
          <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#FFF"/>
          <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="#000"/>
     </Style.Resources>  
</Style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:47:52.247

您会遇到异常，因为您的样式标签实际上是树中的一个项目，并且您已经`ItemsSource`设置了。

`<telerik:RadTreeView.ItemContainerStyle>`用标签包围样式。

这应该可以解决异常，但它不会给您预期的结果，因为树视图项的控件模板实际上显示了另一个不受该`Background`属性影响的边框。您将需要更改控制模板。

Telerik 在版本之间更改样式，因此给您一个错误版本的模板可能对您没有帮助。

但是，您可以转到 Telerik 的安装文件夹并查找名为“Themes”的文件夹。在那里你会找到一个包含 Telerik 所有主题的解决方案。

*   选择您使用的那个。
*   找到树视图的资源字典并将项目的样式和模板复制到您的项目中。
*   更改 xmlns 定义，确保您拥有该样式所依赖的所有画笔和资源。
*   运行看看样式是否ok。
*   在模板中，找到`VisualState`with`x:Name="MouseOver"`并删除其中的情节提要。

# windows - OpenCV 2.4 : problems with includes in Qt in windows

> ID：10817895
> 
> 赞同：0
> 
> 时间：2012-05-30T14:03:21.110
> 
> 标签：windows, qt, opencv

I am not a C++ master (far from that actually), I try to setup an OpenCV + Qt project. I have downloaded the last release of OpenCV. I did nothing more with that (if I understand well, everything is pre-built, so I just have to add the path to the libs in my .pro file).

I added the path to the include folder /opencv/include

That should work that way, since the includes in cv.h, for example, are like that :

# include "opencv2/core/core_c.h"

However, when I browse through my opencv folder, opencv2 is empty, there is no core folder in it, nor anything else, actually there is just a header file, opencv.h .

I noticed that all my include are spread into several folders, under the module folder... what should I do??

Thank you very much!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:45:43.157

您必须以`.pro`文件`module`方式添加这些库，这意味着您必须将项目中使用的所有模块添加到文件中的`LIBS`变量中`.pro`。假设您正在使用模块 libopencv1、libopencv2、libopencv3

LIBS += -L/usr/lib -lopencv1 -lopencv2 -lopencv3

像那样。

如果将 opencv 库添加到，请`/usr/local/lib`使用`-L/usr/local/lib instead``-L/usr/lib`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:08:36.833

好的，我找到了答案...

正确的包含文件夹是构建文件夹中的一个... -_-'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:51:35.003

这是我的 .pro 文件：

```
QT       += core gui

TARGET = test_MTI880
TEMPLATE = app

SOURCES += ... ... ...

INCLUDEPATH += D:/PointGreyResearch/FlyCapture2/include \
        += D:/opencv/include

LIBS += D:/opencv/build/x86/vc10/lib/opencv_core240.lib \
        D:/opencv/build/x86/vc10/lib/opencv_highgui240.lib \
        D:/opencv/build/x86/vc10/lib/opencv_imgproc240.lib \
        D:/opencv/build/x86/vc10/lib/opencv_objdetect240.lib \
        D:/PointGreyResearch/FlyCapture2/lib/FlyCapture2.lib \
        D:/PointGreyResearch/FlyCapture2/lib/C/FlyCapture2_C.lib \
        D:/PointGreyResearch/FlyCapture2/lib/FlyCapture2d.lib \
        D:/PointGreyResearch/FlyCapture2/lib/FC1/PGRFlyCapture.lib 
```

# php - http请求部分响应

> ID：10817899
> 
> 赞同：2
> 
> 时间：2012-05-30T14:03:27.600
> 
> 标签：php, html, xmlhttprequest

我不是 http 请求方面的专家，所以这个问题对某些人来说可能是微不足道的。我正在向 php 脚本发送请求，这需要花费大量时间来处理文件并返回响应。有没有办法在此脚本完成其任务之前发送响应以让用户了解进程状态？由于此任务可能需要几分钟时间，我想在流程的关键部分完成时通知用户。

注意：我不能将此请求分成其他几个

如果是这样，我可能没有正确的方法，您还有其他想法如何处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:07:29.430

从技术上讲是的，但它需要您对 http-stack 进行细粒度控制，在典型的 php 设置中您可能拥有也可能没有。我建议您查看其他解决方案（例如，请求启动任务 - 然后轮询以获取有关进度的更新）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:09:01.720

[http://www.redips.net/javascript/ajax-progress-bar/](http://www.redips.net/javascript/ajax-progress-bar/)

这是一篇很棒的文章，介绍了如何创建 ajax 和 php 一起使用的进度条。

让我知道这是否没有意义！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:30:29.753

我认为长时间处理请求的最佳方式是 cron 作业。您可以发送请求，该请求将创建“任务”并通过 cron 作业捕获任务。Cron 作业可以在工作时更改任务状态，您可以通过间隔请求检查任务状态。我无法想象另一种方式来通知用户有关请求处理的信息。一旦您响应，您的标头就会被发送并且 PHP 停止。

编辑：应该注意的是 Cron 作业仅在 Linux 服务器上可用。Windows 服务器需要访问任务调度程序，而大多数 Web 主机都不允许。

# jquery - jQuery validation group with Remote Validation MVC 3

> ID：10817902
> 
> 赞同：3
> 
> 时间：2012-05-30T14:03:33.340
> 
> 标签：jquery, asp.net-mvc-3, jquery-validate, remote-validation

I want to validate a date of birth with a RemoteValidation/jQuery from 3 selectors. I want to check if a user is 18 or older. But atm i'm having some trouble to group them so they are invalid/valid together and with only one errormessage.

Goal: i want to validate all 3 elements as a group (jquery validator group) with the same RemoteValidation when you change anyone of them.

Anyone got any idea how to solve this?

View:

```
@Html.DropDownListFor(m => m.BirthYear, Model.BirthYearList)
@Html.DropDownListFor(m => m.BirthMonth, Model.BirthMonthList)
@Html.DropDownListFor(m => m.BirthDay, Model.BirthDayList) 
```

Model

```
[Remote("IsValidCustomerBirthDate", "JsonValidation", AdditionalFields = "BirthDay, BirthMonth", ErrorMessageResourceName = "InvalidCustomerBirthDate", ErrorMessageResourceType = typeof(Error))]
[Required]
public int BirthYear { get; set; }

[Remote("IsValidCustomerBirthDate", "JsonValidation", AdditionalFields = "BirthYear,  BirthDay", ErrorMessageResourceName = "InvalidCustomerBirthDate", ErrorMessageResourceType = typeof(Error))]
[Required]
public int BirthMonth { get; set; }

[Remote("IsValidCustomerBirthDate", "JsonValidation", AdditionalFields = "BirthYear, BirthMonth", ErrorMessageResourceName = "InvalidCustomerBirthDate", ErrorMessageResourceType = typeof(Error))]
[Required]
public int BirthDay { get; set; } 
```

RemoteValidation function

```
[HttpGet]
public JsonResult IsValidCustomerBirthDate(int birthYear, int birthMonth, int birthDay)
    {
        try
        {
            var dateOfBirth = new DateTime(birthYear, birthMonth, birthDay);
            var ageCalculator = new AgeCalculator();

            if (ageCalculator.GetAge(dateOfBirth) >= AgeLimit)                   
            {
                return Json(true, JsonRequestBehavior.AllowGet);
            }
        }
        catch (ArgumentException)
        {

        }            

        return Json(false, JsonRequestBehavior.AllowGet);
    } 
```

I've been struggling some with groups in validate() but not getting anywhere.

Thanks for any kind of inputs. (I'm a front-end developer so please be more instructive if it's complicated C# code).

Kind Regards / Magnus

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T13:55:49.383

我也采用了与 kpull1 提到的相同的方法。稍微扩展他的答案，我编写了这个帮助方法，它找到每个具有“附加字段”的远程验证元素，然后在每次其中一个字段更改时触发对所述元素的验证。

```
// I hate naming things
function initializeRemotelyValidatingElementsWithAdditionalFields($form) {
    var remotelyValidatingElements = $form.find("[data-val-remote]");

    $.each(remotelyValidatingElements, function (i, element) {
        var $element = $(element);

        var additionalFields = $element.attr("data-val-remote-additionalfields");

        if (additionalFields.length == 0) return;

        var rawFieldNames = additionalFields.split(",");

        var fieldNames = $.map(rawFieldNames, function (fieldName) { return fieldName.replace("*.", ""); });

        $.each(fieldNames, function (i, fieldName) {
            $form.find("#" + fieldName).change(function () {
                // force re-validation to occur
                $element.removeData("previousValue");
                $element.valid();
            });
        });
    });
} 
```

像这样调用函数：

```
$(document).ready(function() {
    initializeRemotelyValidatingElementsWithAdditionalFields($("#myFormId"));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T11:09:09.277

我将仅将验证放在 BirthDay 下拉列表中（因为是最后一个），然后在其他 2 个字段更改事件上触发此验证。

```
$("#BirthYear, #BirthMonth").change(function(e){
    $("#BirthDay").valid();
}); 
```

# git - 从 github 删除提交

> ID：10817906
> 
> 赞同：15
> 
> 时间：2012-05-30T14:03:40.490
> 
> 标签：git, github, commit

> **可能重复：**
> [如何删除 github 上的提交？](https://stackoverflow.com/questions/448919/how-can-i-remove-a-commit-on-github)
> [如何删除“git commit”](https://stackoverflow.com/questions/1338728/how-to-delete-a-git-commit)

所以我试图从 github 中删除一个提交。

这是 3 次提交，如果所有更改都丢失了，我可以。

所以基于here的问题，我做了一个

```
git reset --hard <sha-commit-name-to-go-back-to>
git push -f origin HEAD^:master 
```

现在它已经从 github 和 git log 中消失了。

然后我重新做了我的更改并做了

```
git add <file I changed>
git commit
git log 
```

一切看起来都很好。没有旧提交的痕迹。所以我终于做了一个：

```
git push 
```

现在突然 github 有了我删除的那三个提交。

我究竟做错了什么？如何防止提交返回？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T14:11:17.887

在应用新更改之前使用 git rebase 进程。变基后添加新的更改并提交。

```
git rebase -i HEAD~2

git push origin +master 
```

# ruby-on-rails-3 - 限制 has_many 与 mongoid 关联的对象数量

> ID：10817914
> 
> 赞同：3
> 
> 时间：2012-05-30T14:04:01.613
> 
> 标签：ruby-on-rails-3, validation, mongoid

我想限制帖子和图片之间的 has_many 关联中关联对象的数量：

在活动记录中，我可以做类似的事情

```
class post < < ActiveRecord::Base
  has_many :pictures, :limit => 2
end 
```

但是 mongoid 提出了一个有限制的异常：

> 无效选项 :limit 提供给关系 :pictures。有效选项有：as、autosave、dependent、foreign_key、order、class_name、extend、inverse_class_name、inverse_of、name、relation、validate。(Mongoid::Errors::InvalidOptions)

是否有替代实现来实现：限制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T14:16:42.217

using`has_many :limit`实际上并不限制关联中的对象数量——它只是限制查询关系时返回的结果数量。您可能想要这样的答案[限制 has_many 关联中的对象数量](https://stackoverflow.com/questions/2263267/limit-number-of-objects-in-has-many-association)- 这将向您展示如何在验证期间检查关联对象的数量。

# python - 如何禁用文本小部件的输入但允许编程输入？

> ID：10817917
> 
> 赞同：14
> 
> 时间：2012-05-30T14:04:12.840
> 
> 标签：python, tkinter, textbox, widget

我将如何锁定一个`Text`小部件，以便用户只能从中选择和复制文本，但我仍然可以将文本插入到`Text`函数或类似函数中？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-30T14:08:52.230

您是否尝试过简单地禁用文本小部件？

```
text_widget.configure(state="disabled") 
```

在某些平台上，您还需要添加绑定`<1>`以将焦点赋予小部件，否则不会出现复制突出显示：

```
text_widget.bind("<1>", lambda event: text_widget.focus_set()) 
```

如果您禁用小部件，以编程方式插入，您只需要

1.  将小部件的状态更改为`NORMAL`
2.  插入文本，然后
3.  将状态更改回`DISABLED`

只要您不在`update`中间调用，那么用户就无法以交互方式输入任何内容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-01T14:54:36.317

抱歉，我迟到了，但我发现此页面正在寻找与您相同的解决方案。

我发现，如果您默认“禁用”文本小部件，然后在为其提供输入的函数开始时“正常”它，并在函数结束时再次“禁用”它。

```
def __init__():
    self.output_box = Text(fourth_frame, width=160, height=25, background="black", foreground="white")
    self.output_box.configure(state="disabled")

def somefunction():
    self.output_box.configure(state="normal")
    (some function goes here)
    self.output_box.configure(state="disable") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-21T06:01:32.833

我也偶然发现了 state="normal"/state="disabled" 解决方案，但是您无法从中选择和复制文本。最后我找到了以下解决方案：[有没有办法让 Tkinter 文本小部件只读？](https://stackoverflow.com/questions/3842155/is-there-a-way-to-make-the-tkinter-text-widget-read-only)，并且此解决方案允许您选择和复制文本以及跟踪超链接。

```
import Tkinter

root = Tkinter.Tk() 
readonly = Tkinter.Text(root)
readonly.bind("<Key>", lambda e: "break") 
```

# google-apps-script - 无法在应用脚本编辑器中访问构建用户界面

> ID：10817920
> 
> 赞同：0
> 
> 时间：2012-05-30T14:04:46.497
> 
> 标签：google-apps-script, google-apps-script-editor

我不知道为什么在 Google App 脚本编辑器中构建用户界面被禁用（灰色）。如何启用它？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:47:27.347

尝试从脚本编辑器中保存脚本，为项目命名，然后查看它是否适合您。

# xpages - 在 XPages 的分类视图中隐藏总计详细信息？

> ID：10817921
> 
> 赞同：0
> 
> 时间：2012-05-30T14:04:49.987
> 
> 标签：xpages

我有一个显示视图的视图面板。该视图在显示该类别总计的分类列前面有一个总计列。当它在详细信息行时，我怎么能不显示数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:08:53.130

请根据您的总计列名称更改以下 Xpage 视图列公式。

```
viewEntry.isDocument()? '' : viewEntry.getColumnValue('<totalColumnName>') 
```

其中 viewEntry 是行数据可用的请求变量范围名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T23:49:10.830

在视图中，将总计列移到类别后面，并使用该属性隐藏详细信息。视图和视图面板中的列顺序不必相同。因此，您可以将其移回面板的前面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-07T14:45:33.017

使用 r10 FP6 和 Chrome 版本 90 时，使用此技术对我不起作用。

Total 列表现为仅 UI 的注释列函数，因此使用 viewPanel 列公式（如*return view1.isDocument()?'':view1.getColumnValue('totCol1');引发错误）*

只需将 viewPanel 列绑定到注释（总计）列即可，但不会忽略详细信息行（“1”）。

# c# - 在sql查询中添加计数列

> ID：10817923
> 
> 赞同：0
> 
> 时间：2012-05-30T14:04:54.057
> 
> 标签：c#, sql, sql-server-2008

我有两个名为 Production 和 Chart 的表，如下所示。

**生产**

```
Name Layer
CDV  TSK
CDV  USV
M1   OSK 
```

**图表**

```
Name
L1_CDV_TSK
L1_CDV_TSK
L1_M1_OSK 
```

我必须产生这样的输出：

```
Name Layer Count
CDV  TSK    2
CDV  USV    0
M1   OSK    1

// bse L1_CDV_TKK and L1_M1_OSK are in the Charttable. 
```

我如何编写 SQL 查询来实现这一点？

这是我的尝试，但它看不到`Prodution`表中的每一行

```
Select 
    p.Name, p.layer, Count(*) as test
from 
    Production p, Chart c 
where 
    c.chartname like '%'+ p.name+'_'+p.layer + '%'
group by 
    p.Name, p.layer 
```

请指教。非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T14:09:09.330

```
Select p.Name,p.layer,Count(c.chartname) as test
from Production p
left join Chart c on c.chartname like '%'+ p.name+'_'+p.layer + '%'
group by p.Name,p.layer 
```

编辑 ：

认为您的“图表”列表中有错字，或者我不明白您想要的结果......（TSK，TKK）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:10:29.593

试试这个：

```
Select p.Name,p.layer,Count(*) as test
from Production p
left join Chart c on c.chartname like '%'+ p.name+'_'+p.layer + '%'
group by p.Name,p.layer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:11:09.373

首先，您需要学习新的连接语法：

```
Select p.Name, p.layer,Count(*) as test
from Production p join
     Chart c
     on c.chartname like '%'+ p.name+'_'+p.layer + '%'
group by p.Name, p.layer 
```

其次，您正在过滤掉计数为零的那个。

要获得您想要的，请尝试：

```
Select p.Name, p.layer,
       sum(case when c.chartname like '%'+ p.name+'_'+p.layer + '%' then 1 else 0 end) as test
from Production p cross join
     Chart c
group by p.Name, p.layer 
```

# r - 插值到一个新的时间向量上

> ID：10817925
> 
> 赞同：0
> 
> 时间：2012-05-30T14:05:01.270
> 
> 标签：r, interpolation

有没有一种方法可以将时间序列插入到新序列上。例如：

```
data(co2)

Mauna <- as.numeric(window(co2, start = c(1991,1), end=c(1991,12)))
time = seq(from=as.Date("1991-01-01"), to=as.Date("1991-12-01"), length=12)

newTime = seq(from=as.POSIXct("1991-01-01 00:00"), to=as.POSIXct("1991-12-31 23:00"), length=8760) 
```

由此我想将 Mauna 数据插值到新的时间向量上，从而将 Mauna 的测量次数增加到 8760。这可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:35:30.567

尝试`approx()`线性插值：

```
MaunaLinear <- approx(Mauna,n=8760)$y
plot(newTime,MaunaLinear) 
```

尝试`spline()`平滑插值的函数：

```
MaunaSmooth <- spline(Mauna,n=8760)$y
plot(newTime,MaunaSmooth) 
```

# python - 从python启动gnu屏幕？

> ID：10817929
> 
> 赞同：3
> 
> 时间：2012-05-30T14:05:23.247
> 
> 标签：python, terminal, subprocess, gnu-screen

我尝试从子进程调用中使用 gnu 屏幕执行服务器守护程序，但它甚至没有启动

```
subprocess.call(["screen", "-dmS test ./server"]) 
```

有人告诉我，运行屏幕需要终端，因此我不能简单地通过调用来执行它。你能告诉我一些代码来做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T14:13:15.150

尝试

```
subprocess.call( ["screen", "-d", "-m", "-S", "test", "./server"] ) 
```

您需要将参数字符串分成单独的参数，每个字符串一个。

`subprocess`这是文档中的相关引用：

> 在 UNIX 上，shell=False（默认）：在这种情况下，Popen 类使用 os.execvp() 来执行子程序。args 通常应该是一个序列。字符串将被视为一个序列，该字符串作为唯一的项目（要执行的程序）。
> 
> 在 UNIX 上，使用 shell=True：如果 args 是字符串，它指定要通过 shell 执行的命令字符串。如果 args 是一个序列，则第一项指定命令字符串，任何附加项都将被视为附加的 shell 参数。

因此，默认情况下，参数完全按照您提供的方式使用；它不会尝试将字符串解析为多个参数。如果您设置`shell`为`true`，您可以尝试以下操作：

```
subprocess.call("screen -dmS test ./server", shell=True) 
```

并且字符串将像命令行一样被解析。

# actionscript-3 - 当 Combobox 不显示时，在 Flex Combobox 上设置 selectedItem？

> ID：10817930
> 
> 赞同：2
> 
> 时间：2012-05-30T14:05:26.403
> 
> 标签：actionscript-3, apache-flex, flex4

我正在尝试在组合框（mx）上设置 selectedItem。以下是代码：

```
callLater(function ():void {
        if (comboBox.dataProvider && comboBox.dataProvider.length > 0) {
            comboBox.selectedItem = comboBox.dataProvider.getItemAt(0);
        }
}); 
```

编辑：我正在以编程方式创建组合框：

```
var comboBox:ComboBox = new ComboBox(); 
```

这可以正常工作并将 selectedItem 设置为数据提供者的第一项 -**但仅当组合框显示在屏幕上且未隐藏在可折叠组**中时。

我有一种情况，我可能将组合框包含在可折叠组（我自己的组件）中，并且在展开折叠组之前不显示（见下图）

第一个图像：当组折叠并且组合框未显示但已创建时 ![折叠组](../Images/fbbbd0c349f5f82996c179b67db096dd.png)

第二张图片：当展开折叠的组以显示组合框时 - 请注意 dataprovider 中的第一个元素未选择为 selectedItem

![扩大集团](../Images/07fd307d3644e4ebe8d1db9190c318a2.png)

以下行总是被执行

```
 comboBox.selectedItem = comboBox.dataProvider.getItemAt(0); 
```

但是，当组合框包含在折叠组中时，不会选择第一项 - 当组合框包含在展开组中时可以正常工作。

我认为这是 flex 中的一个错误——除非有人不这么认为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:40:07.460

我过去曾看到过这个问题。我通过设置一个全局变量并将组合框的选定项设置为变量的值来解决它。

例如：

```
private var comboBoxValue:int = 0; 
```

然后在你的组合框上：

```
<mx:ComboBox id="myComboBox" updateComplete="{myComboBox.selectedItem = comboBoxValue}" change="functionToChangeVariable()"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T11:31:43.967

问题是您无法知道对象何时添加到舞台。正如您已经提到的，如果组件不可见，则不会设置该项目。

Creation Complete 不会被多次调用，因此您需要另一种方法来完成它。为确保该项目在再次可见后被设置为组件，只需在组合框本身上调用“callLater”方法（然后在再次呈现组件后调用该方法，而不是整个应用程序）

```
var comboBox:ComboBox = new ComboBox();

comboBox.callLater(function ():void {
    if (comboBox.dataProvider && comboBox.dataProvider.length > 0) {
        comboBox.selectedItem = comboBox.dataProvider.getItemAt(0);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:43:15.840

我从 flex sdk 3 开始使用组合框。我曾经设置 selectedIndex 而不是 selectedItem。一种解决方法，但总是对我有用：

```
<ComboBox id="comboBox"
   dataProvider="{model.dataProvider}"
   selectedIndex="{getItemIndex(comboBox.dataProvider, model.currentItem}"
   change="model.currentItem = comboBox.selectedItem"/>
  //getItemIndex - function with simple list.getItemIndex() 
```

适用于 mx 和 spark。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T06:28:33.130

我可以通过在 CREATION_COMPLETE 上设置所选项目来解决此问题，如下所示：

```
comboBox.addEventListener(FlexEvent.CREATION_COMPLETE, function(){
         comboBox.selectedItem = comboBox.dataProvider.getItemAt(0);
}); 
```

# google-maps - Drupal 7 - 多点地图

> ID：10817932
> 
> 赞同：0
> 
> 时间：2012-05-30T14:05:51.503
> 
> 标签：google-maps, drupal, module, drupal-7, maps

我正在为我的公司建立一个基于 Drupal 7 的“网络服务”。

我创建了一个名为 POI 的自定义“内容类型”，其中包含有关单个坐标的信息。

现在我正在寻找一个模块，它可以从我的对象中读取并显示一个谷歌地图窗口，其中包含所有点之间的行驶路线。（使用方向 API）。

有人可以帮助我吗？

谢谢！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T00:02:38.810

OpenLayers 似乎是 Drupal 7 中的首选映射解决方案。我刚刚开始使用它，它似乎真的很强大。我能找到的所有其他模块基本上都没有使用，说“OpenLayers 做得更好”。

# javascript - 为什么这个 javascript 不起作用

> ID：10817939
> 
> 赞同：0
> 
> 时间：2012-05-30T14:06:36.287
> 
> 标签：javascript, jquery, arrays

我正在尝试构建一个将面包屑添加到我的网站导航的功能。但是，现在我有两个问题。1) 由于某种原因，crumb 数组一次只能保存 2 个 crumb，并且 2)，即使 html 元素存储在 crumbs 数组中，也只会呈现新的 crumb 的 HTML。另一个面包屑呈现为：

```
[object HTMLLIElement] 
```

// 脚本

```
function add_crumb(name) {

    // get current bread crumbs
    var crumbs = $('#breadcrumbs ul li').toArray();

    // no current bread crumbs, so we don't need an arrow image
    if (crumbs.length == 0) {

        var new_crumb = "<li class='crumb' style='display:inline'> " + name + " </li>";

    } else {

        var new_crumb = "<li class='crumb' style='display:inline'><img class='bc_arrow' src='images/icons/breadcrumb_arrow.png' width='19' height='18'> " + name + "</li>";

    }

    // add new bread crumb to array
    crumbs.push(new_crumb);

    // render
    $('#breadcrumbs').html('<ul>' + crumbs.join('') + '</ul>');

} 
```

无论如何，我通过创建一个新的空白数组并在每个元素上调用 .innerHTML 来解决第二个问题（尽管我不明白为什么我必须这样做，因为 jQuery 的网站说元素是这样存储的：

```
[<li id="foo">, <li id="bar">] 
```

但如果有人能帮我弄清楚为什么它一次只储存两个面包屑，我会非常非常感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:14:38.063

HTML 元素对象不是字符串，您不能简单地使用`.join`. 尝试附加它们。

```
$('#breadcrumbs').html('<ul />').find("ul").append(crumbs); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:15:49.783

`$('#breadcrumbs ul li').toArray();`给你一个[HTMLLIElements](https://developer.mozilla.org/en/DOM/HTMLLIElement)数组。

你应该采取完全不同的方法。不需要任何数组：

```
if($('#breadcrumbs ul li').length){
    $('#breadcrumbs ul').append(
      "<li class='crumb' style='display:inline'>"
        + name +
      "</li>");
}else{
    $('#breadcrumbs ul').append(
      "<li class='crumb' style='display:inline'>"
        + "<img class='bc_arrow' src='images/icons/breadcrumb_arrow.png' width='19' height='18'>" +
        + name + 
      "</li>");
} 
```

# iphone - 如何使用加速度计检查我是垂直还是水平握住 iPhone？

> ID：10817940
> 
> 赞同：0
> 
> 时间：2012-05-30T14:06:37.400
> 
> 标签：iphone, accelerometer

我正在做一个射击游戏。屏幕中间有一个靶心和一个由加速度计控制的十字准线。我想检查用户是水平还是垂直控制设备。当用户垂直握住它时，我不希望十字准线向下滚动。只有当我垂直或水平倾斜我的设备时，十字准线才会移动。任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:35:10.307

可能有用，您是否尝试过使用 compass api 呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:08:37.650

你试过这个吗？：

```
UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation]; 
```

然后：

```
if (UIDeviceOrientationIsLandscape(orientation)) {

}
else if (UIDeviceOrientationIsPortrait(orientation)) {

} 
```

# opencart - 如何在opencart中复制产品模板

> ID：10817941
> 
> 赞同：1
> 
> 时间：2012-05-30T14:06:37.877
> 
> 标签：opencart

我对 opencart 很陌生，但我认为这是一个简单且最好的解决方案。虽然玩模板不是一件快乐的事……

我正在努力创建一些额外的模板页面。例如，我有两种类型的产品和类别页面。我想为不同的产品使用不同的模板。在 opencart 中，您只有一种产品布局。

我想做的是复制产品布局。我在网上得到了一些帮助，但我仍然不确定还需要什么。这是我到目前为止所做的......

1 - 复制catalog/controller/product/product.php的控制器文件并更改为catalog/controller/product/product-2.php。然后我在控制器中改变了这个：

```
if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/product/product-2.tpl')) {
    $this->template = $this->config->get('config_template') . '/template/product/product-2.tpl';
    } else {
        $this->template = 'default/template/product/product-2.tpl';
        } 
```

2 - 然后我复制了产品语言文件并保存为 product-2

3 - 之后我复制了实际的 tpl 文件并保存为 product-2

它看起来不错，但如果我尝试对 product-2.tpl 进行一些更改，则没有任何变化。我是否必须复制更多文件才能完成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:30:51.830

在搜索并进行大量研究和令人难以置信之后，我找到了一种非常有用的方法来做我想做的事情。通过这种方式，我可以完全控制 opencart 主题系统。我可以根据需要制作尽可能多的不同布局。我不必使用 VQmod 也不必制作任何控制器，但你必须使用现有的控制器，如产品、类别等。如果你正在制作自己的控制器，即使它可以工作。

以下是为不同类别、产品和常用页面实现不同模板的步骤。

我在这里做产品的例子。1-在主题的产品文件夹中创建产品的自定义模板。例如customproduct.tpl 2-现在根据需要自定义它。创建一个产品并获取它的ID。id在这里很重要。3- 转到控制器目录/controller/product/product.php 4- 找到此代码

```
if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/product/product.tpl')) {
  $this->template = $this->config->get('config_template') . '/template/product/customproduct.tpl';
            } else {
    $this->template = 'default/template/product/product.tpl';
            } 
```

5-现在你必须使用简单的 if else 条件。例如

```
//42 is the id of the product 
 if($this->request->get['product_id'] == 42){
            if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/product/customproduct.tpl')) {
                $this->template = $this->config->get('config_template') . '/template/product/customproduct.tpl';
            } else {
                $this->template = 'default/template/product/customproduct.tpl';
            }
        }
        else{
            if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/product/product.tpl')) {
                $this->template = $this->config->get('config_template') . '/template/product/product.tpl';
            } else {
                $this->template = 'default/template/product/customproduct.tpl';
            }
        } 
```

这就是它的工作完成;）你可以为其他控制器做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:59:37.137

正如你在这里看到的；

[http://pranshuarya.com/jaal/Development/opencart-creating-a-new-viewtemplate.html](http://pranshuarya.com/jaal/Development/opencart-creating-a-new-viewtemplate.html)

这是“全新布局”请求的真正解决方案的第二个选项。两者都可以使用。如果您不需要新的控制器例程，您的解决方案可以节省时间。但这种方式更灵活。

这是步骤；

*   将新的控制器文件添加到 /catalog/controller。如果已经有类似的控制器，请调用类似 new_layout.php... 的内容。请务必按照我在下面的评论中所说的那样更改控制器名称。

*   在您的主题文件夹中添加一个新的视图文件......如果您希望可以复制类似的视图文件内容并根据需要进行修改，可以像控制器一样。

*   从管理面板系统/设计/布局或直接从 MYSQL 表添加新布局，如上面的链接中所述。

*   现在好了。只需在此布局视图中添加一些模块即可享受。

# internationalization - 接缝 2.2.2.Final 丢失翻译

> ID：10817947
> 
> 赞同：0
> 
> 时间：2012-05-30T14:07:01.043
> 
> 标签：internationalization, richfaces, translation, seam, seam2

我在 JBoss AS 6 上使用 seam 2.2.2.Final 和 Richfaces 3.3.3.Final。

我的申请被翻译成 2 种语言（荷兰语和英语）。

有时（从几小时到几天不等）Web 应用程序会丢失翻译。然后它只显示键的标签而不是翻译。

有人知道这是什么原因吗？

首先，我认为这可能是由荷兰语中使用的字符集引起的。然后我使用 native2ascii.exe 将文件转换为 ascii，但这并没有解决问题。

我正在使用 seam 中的默认 messages.properties 文件。在我的例子中，这些是messages_nl.properties 和messages_en.properties。在 JSF 中，我使用 EL-tags `#{messages['key']}`。几个小时或几天后，应用程序似乎再也找不到文件了。

我的 faces-config.xml 文件包含以下设置：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="1.2" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd">
    <application>
        <view-handler>com.sun.facelets.FaceletViewHandler</view-handler>
        <locale-config>
           <default-locale>nl</default-locale>
           <supported-locale>nl</supported-locale>
           <supported-locale>en</supported-locale>
        </locale-config>
    </application>
 </faces-config> 
```

在 JSF 中，我像这样使用它：

```
<h:outputText value="#{messages['admin.scheduling.title']}" /> 
```

在我使用的代码中

```
Messages.instance().get("admin.scheduling.title"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:28:08.153

你用什么翻译？转换器？
getAsString 方法必须返回翻译后的字符串。
能发一下代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:40:22.370

我最终通过创建自己的消息组件实现来解决这个问题。

似乎接缝中的内部缓存被清除了（可能是在反序列化某些东西之后）。如果缓存（几乎）为空，我会再次读取包。

# css - Firefox 不尊重带有服务标记字符的字体粗细

> ID：10817951
> 
> 赞同：1
> 
> 时间：2012-05-30T14:07:26.340
> 
> 标签：css, firefox, browser, rendering, typography

我正在开发一个需要显示服务标记字符 (℠) 的 Web 应用程序。样式表`font-weight`对于呈现字符的标记有 300。当以该权重呈现时，服务标记字符似乎变得异常大，并且比人们预期的在相同权重下出现的商标字符 (™) 略厚。`font-weight`当使用100 或 200 的a 时，该行为更加明显。

下面是一个演示该行为的测试文档。OS X 上的 Firefox 12.0 上的输出[看起来像这样](http://imgur.com/9kbOP)（抱歉，太新，无法内联附加图像）。无论使用如何，这种行为似乎都会持续存在`font-family`。OS X 上的 Chrome 19.0.1084.52 也会显示服务和商标，但权重之间存在一些不一致，但效果不太明显。

这是 Firefox/Gecko 的错误，还是我在这里做错了什么？谢谢！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Service Mark Test</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-type' />
  </head>
  <body style="font-family:sans-serif;">
    <p style="font-weight:normal;">Here is a normal service mark&#8480; and trademark&#8482;</p>
    <p style="font-weight:100;">Here is a weight 100 service mark&#8480; and trademark&#8482; <span style="color:red;">(unexpected)</span></p>
    <p style="font-weight:200;">Here is a weight 200 service mark&#8480; and trademark&#8482; <span style="color:red;">(unexpected)</span></p>
    <p style="font-weight:300;">Here is a weight 300 service mark&#8480; and trademark&#8482; <span style="color:red;">(unexpected)</span></p>
    <p style="font-weight:400;">Here is a weight 400 service mark&#8480; and trademark&#8482;</p>
    <p style="font-weight:500;">Here is a weight 500 service mark&#8480; and trademark&#8482;</p>
    <p style="font-weight:600;">Here is a weight 600 service mark&#8480; and trademark&#8482;</p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:56:58.817

我发现这可能有助于回答您的问题。

[http://www.htmlcodetutorial.com/character_famsupp_197.html](http://www.htmlcodetutorial.com/character_famsupp_197.html)

如您所见， font-weight: 100 将字体推得尽可能细，而 400 是正常的， 700 是粗体。

两者之间的差异很小，在大多数情况下，100 - 500 与大多数字体系列完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:50:51.640

将字体系列设置更改为例如

```
font-family: Calibri, Arial Unicode MS, Lucida Sans Unicode,
  DejaVu Sans, FreeSans, sans-serif; 
```

这是一个字体问题：当您只使用通用名称`sans-serif`时，每个浏览器都会使用自己的默认无衬线字体。这通常是 Arial，不包含服务标记字符。浏览器将被迫使用备用字体，而 Firefox 显然对不同的字体粗细使用不同的备用字体——这有点奇怪，但肯定是可能的。

上面的列表包含包含服务标记字符的特定字体。大多数字体实际上只有一两个字体粗细，就像大多数字体一样。即使是 Arial Unicode MS 的粗体版本也是“假粗体”（算法上加粗的普通字体），但结果通常是可以容忍的，虽然不是很漂亮。

# c# - 测试 com dll 是否使用其路径注册

> ID：10817952
> 
> 赞同：0
> 
> 时间：2012-05-30T14:07:26.693
> 
> 标签：c#, c, windows, com

嗨，我有一个 com/activeX，我想知道它是否已注册。我对该文件一无所知，只是它是一个需要检查的 com/dll。 [如何检查 COM 组件（EXE/DLL 文件）是否已注册（使用 .NET）？](https://stackoverflow.com/questions/1491909/how-to-check-if-com-componentexe-dll-is-registered-or-not-using-net)

[如何检查 COM dll 是否使用 C# 注册？](https://stackoverflow.com/questions/4966508/how-to-check-com-dll-is-registered-or-not-with-c)

等等告诉我根据guid进行搜索。但我找不到解释如何找到 GUID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:33:34.020

如果您至少不知道其中一个 CLSID 指南，那么您将无法找到。你也不能*使用*这个组件，所以测试你不能使用的东西并不是非常有用。

如果这是一个 ActiveX 组件，那么您可以通过查看其类型库来了解有关它的更多信息。它通常作为资源嵌入在 DLL 中。首先使用 Visual Studio 的 File + Open + File 检查，选择 DLL。如果您看到 TYPELIB 资源，那么您就领先了。在 Visual Studio 命令行提示符下，运行 oleview.exe。文件 + 查看 Typelib 并选择 DLL。您将看到类型库中定义的接口和 coclass。选择一个 coclass 的指导进行测试。

另一种查找方法是使用 Regedit.exe 并使用 Edit + Find。键入 DLL 的名称。当它找到一个名为“LocalServer32”的键时，您就找到了 CLSID 键。

另一种查找方法是运行使用该组件的程序并观察 SysInternals 的 ProcMon 实用程序产生的跟踪。您将看到程序搜索 CLSID 键并读取 LocalServer32 键。缺点是该工具往往会使您淹没在数据中。

# python - 如何在python中同时执行两个循环？

> ID：10817958
> 
> 赞同：0
> 
> 时间：2012-05-30T14:07:54.060
> 
> 标签：python, python-3.x, python-2.7

我有两个清单：

```
 host_list = ["10.3.11.250", "10.3.24.45", "10.5.3.5","10.3.4.5"]
 ip_value = ["34.45.34.5", "10.3.11.250","10.3.4.5"] 
```

我想检查 ip_value 中是否存在 host_list 的数据，然后将 ip_value 附加到另一个列表中。我正在这样做检查以下代码：

```
for host,ip in zip(host_list ,ip_value):
    if host_list == ip_value
        list_ip = list_ip.append(ip) 
```

但它什么也没做。为什么？list_ip 应该返回什么，它将返回： {"10.3.11.250", "10.3.4.5"}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T14:09:54.690

这些是**集合**，而不是列表。您可以计算它们的差异：

```
list_ip = host_list - ip_value 
```

返回

```
{'10.5.3.5', '10.3.24.45'} 
```

**编辑**：好的，现在它们是两个列表。将代码更改为：

```
list_ip = list(set(host_list) - set(ip_value)) 
```

返回

```
['10.5.3.5', '10.3.24.45'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:15:06.747

使用`set`_

```
another_list = list(set(host_list) - set(ip_value)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:43:32.453

要回答这个问题，为什么您提供的代码什么都不做：

```
for host,ip in zip(host_list ,ip_value): 
    if host_list == ip_value 
        list_ip = list_ip.append(ip) 
```

您将 host_list 与 ip_value 进行比较，而不是将主机与 ip 进行比较。host_list != ip_value，因此永远不会执行下一条语句。

# save - fortran 保存整数

> ID：10817960
> 
> 赞同：2
> 
> 时间：2012-05-30T14:08:00.420
> 
> 标签：save, fortran, local-variables

我今天遇到了一些看起来像这样的代码：

```
 subroutine foo()
      real blah
      integer bar,k,i,j,ll
      integer :: n_called=1
      save integer

      ...
      end 
```

似乎这里的意图可能是`save n_called`，但这是否是保存所有整数的有效声明——或者它是否隐式声明了一个名为`integer`并保存它的变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T14:37:33.920

第二种解释是正确的。Fortran 有许多关键字，`INTEGER`是其中之一，但它*没有保留字*，这意味着关键字可以用作标识符，尽管这通常是一个糟糕的主意（但它继续到 C# 中，可以在关键字前面加上`@`和用它作为标识符，对吧？）

该`SAVE`声明，即使它的目的`n_called`是肤浅的。Fortran 会自动保存所有具有初始化程序的变量，这就是代码可能按预期工作的原因。

```
 integer :: n_called=1 
```

这里`n_called`是自动的`SAVE`。对于被迫维护/扩展/创建新的 Fortran 代码的 C/C++ 程序员来说，这通常是一个非常糟糕的惊喜 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T14:27:25.927

我同意您的第二种解释，即该语句`save integer`隐式声明了一个名为的变量`integer`并为其赋予了`save`属性。当然，Fortran 没有禁止使用关键字作为程序实体名称的规则，尽管大多数明智的软件开发人员确实有这样的规则。

如果我尝试按照您提供的方式编译您的代码片段，我的编译器（英特尔 Fortran）不会抱怨。如果我`implicit none`在正确的位置插入它会报告错误

```
This name does not have a type, and must have an explicit type.   [INTEGER] 
```

另一种解释是，它将`save`属性赋予所有整数变量，这似乎与语言标准不一致，这不是我遇到过的变体。

# matlab - matlab：将向量转换为字符串元胞数组

> ID：10817962
> 
> 赞同：5
> 
> 时间：2012-05-30T14:08:09.033
> 
> 标签：matlab, cell

我确定有办法做到这一点，但我不知道它是什么。

假设我有一个向量

```
v = [1.02 2.03 3.04]; 
```

我想使用每个元素的格式字符串将其转换为元胞数组：

```
'   %.3f' 
```

（%.3f 前 3 个空格）

我怎样才能做到这一点？我尝试了以下方法，但出现错误：

```
>> f1 = @(x) sprintf('   %.3f',x);
>> cellfun(f1, num2cell(v))
??? Error using ==> cellfun
Non-scalar in Uniform output, at index 1, output 1.
Set 'UniformOutput' to false. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T14:16:06.347

如错误中所述，只需提供`UniformOutput`as的参数即可`false`

```
cellfun(f1, num2cell(v), 'UniformOutput', false)

ans = 

    '   1.020'    '   2.030'    '   3.040' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:03:04.060

这是另一个解决方案：

```
>> v = [1.02 2.03 3.04];
>> strcat({'   '}, num2str(v(:),'%.3f'))
ans = 
    '   1.020'
    '   2.030'
    '   3.040' 
```

显然，如果你想要一个行向量，你可以转置结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T21:00:14.890

您还可以使用以下`{}`语法：

```
 cellfun(@(x){f1(x)}, num2cell(v)) 
```

另请查看：[在数组上应用一个函数，以向量化方式返回不同大小的输出](https://stackoverflow.com/questions/9044712/applying-a-function-on-array-that-returns-outputs-with-different-size-in-a-vecto)

# java - CardLayout焦点java

> ID：10817963
> 
> 赞同：-1
> 
> 时间：2012-05-30T14:08:11.463
> 
> 标签：java, swing, focus, cardlayout

我试图让我的键盘输入工作，但它没有检测到任何东西 - 可能是因为我正在使用 CardLayout 并且当我调用该`show()`函数时我没有正确设置焦点。

目前，它看起来像这样。

```
 containerPanel.add(new GameArea(), "newGameArea");
        CardLayout cl = (CardLayout)(containerPanel.getLayout());
        //containerPanel.requestFocusInWindow();
        cl.show(containerPanel, "newGameArea"); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:17:31.760

*   focus 是异步的，那么你必须将 requestFocus 包装到 invokeLater

*   这应该适用于没有添加另一个 Listenet take Focus 的情况

*   不要对 Swing JComponents 使用 KeyListener，而是使用 KeyBindings

# java - Weblogic - java.lang.ClassNotFoundException: org.bouncycastle.jce.provider.JCEMac$DES9797Alg3

> ID：10817964
> 
> 赞同：2
> 
> 时间：2012-05-30T14:08:11.490
> 
> 标签：java, security, weblogic-10.x

我正在使用 Java Web 应用程序，我需要使用 3DES 算法生成 MAC。代码在 Weblogic 10.3 上运行没有问题，但是当我尝试在不同的 Weblogic 类似版本（10.3.1）中运行应用程序时出现问题。

这是我的代码：

```
public String getMac(String inkey, String data) throws Exception {

    byte[] out = new byte[8];

    try {

        // if I commend this line, the result is the same
        Security.addProvider(new BouncyCastleProvider());

        // this loop proves the BC provider is there
        for (Provider p : Security.getProviders()) {

            log.debug("--");
            log.debug(p.getName());
            log.debug(p.getInfo());
        }

        try {

            BouncyCastleProvider bc = new BouncyCastleProvider();

            // class is there, no problem
            log.debug("info" + bc.getInfo());

            DES9797Alg3 alg3 = new DES9797Alg3();

            // class is there, no problem
            log.debug("alg3" + alg3.toString());

        } catch (Exception e) {
            log.error("error BouncyCastleProvider classes");
        }

        log.debug("length: " + inkey.length());

        if (inkey.length() < 48)
            inkey += inkey.substring(0, 16);

        byte[] rawkey = hexStringToByteArray(inkey);
        DESedeKeySpec keyspec = new DESedeKeySpec(rawkey);
        SecretKeyFactory keyfactory = SecretKeyFactory.getInstance("DESede");
        SecretKey key = keyfactory.generateSecret(keyspec);

        Mac mac = Mac.getInstance("ISO9797Alg3Mac");

        mac.init(key);

        mac.update(data.getBytes());

        mac.doFinal(out, 0);

    } catch (Exception e) {

        log.error("Error generating MAC X9_19", e);

        throw new Exception("Error generating MAC X9_19", e);

    } 
```

这是我得到的错误：

```
Caused by: java.security.InvalidKeyException: No installed provider supports this key: com.sun.crypto.provider.DESedeKey
    at javax.crypto.Mac.a(DashoA13*..)
    at javax.crypto.Mac.init(DashoA13*..)
    at es.indra.netplus.sec.services.util.UtilMac.getMac(UtilMac.java:180)
    ... 73 more
Caused by: java.security.NoSuchAlgorithmException: class configured for Mac(provider: BC)cannot be found.
    at java.security.Provider$Service.getImplClass(Provider.java:1268)
    at java.security.Provider$Service.newInstance(Provider.java:1220)
    ... 76 more
Caused by: java.lang.ClassNotFoundException: org.bouncycastle.jce.provider.JCEMac$DES9797Alg3
    at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:283)
    at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:256)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.findClass(ChangeAwareClassLoader.java:54)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    at weblogic.utils.classloaders.GenericClassLoader.loadClass(GenericClassLoader.java:176)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.loadClass(ChangeAwareClassLoader.java:35)
    at java.security.Provider$Service.getImplClass(Provider.java:1262) 
```

我不明白为什么错误说不`org.bouncycastle.jce.provider.JCEMac$DES9797Alg3`存在。'java.security' 有可能在另一个地方寻找吗？我已请求服务器管理员将库复制到背书目录中，但我不确定这是否会起作用以及发生的方式。

请注意，即使我删除了 'Security.addProvider(new BouncyCastleProvider());' 行，在可用提供者列表中，列出了 BC。

这是我得到的提供者列表：

```
-- -- --
CSSX509CertificateFactoryProvider
CSS JDK CertPath provider
1.0
-- -- --
SUN
SUN (DSA key/parameter generation; DSA signing; SHA-1, MD5 digests; SecureRandom; X.509 certificates; JKS keystore; PKIX CertPathValidator; PKIX CertPathBuilder; LDAP, Collection CertStores, JavaPolicy Policy; JavaLoginConfig Configuration)
1.6
-- -- --
SunRsaSign
Sun RSA signature provider
1.5
-- -- --
SunJSSE
Sun JSSE provider(PKCS12, SunX509 key/trust factories, SSLv3, TLSv1)
1.6
-- -- --
SunJCE
SunJCE Provider (implements RSA, DES, Triple DES, AES, Blowfish, ARCFOUR, RC2, PBE, Diffie-Hellman, HMAC)
1.6
-- -- --
SunJGSS
Sun (Kerberos v5, SPNEGO)
1.0
-- -- --
SunSASL
Sun SASL provider(implements client mechanisms for: DIGEST-MD5, GSSAPI, EXTERNAL, PLAIN, CRAM-MD5; server mechanisms for: DIGEST-MD5, GSSAPI, CRAM-MD5)
1.5
-- -- --
XMLDSig
XMLDSig (DOM XMLSignatureFactory; DOM KeyInfoFactory)
1.0
-- -- --
SunPCSC
Sun PC/SC provider
1.6
-- -- --
WebLogicCertPathProvider
WebLogic CertPath Provider JDK CertPath provider
1.0
-- -- --
WLSJDKCertPathProvider
WebLogic JDK CertPath provider
1.0
-- -- --
BC
BouncyCastle Security Provider v1.46
1.46 
```

此外，BC 在那里，与我在战争文件中获得的版本相同。

我已经用谷歌搜索了很多小时，但没有运气，希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T18:36:14.853

在谷歌上花了很多时间试图修复代码更改的错误后，在服务器域 lib 目录中添加库解决了问题。无论如何，我仍然不明白为什么会这样。

# java - 无法编译主 Java 应用程序

> ID：10817968
> 
> 赞同：-3
> 
> 时间：2012-05-30T14:08:21.707
> 
> 标签：java, compiler-errors

尝试编译我的应用程序时出现许多错误。

这是我的界面...

```
public interface userMessage {
    public enum DisplayMessageID {
        VALID, CMD_ERR, LOAD_ERR, 
        SAVE_ERR, DELETE_ERR, CONVERT_ERR, 
        FORMAT_ERR
    }

    String subuserMessage(DisplayMessageID DispMess);
} 
```

这是我的一堂课...

```
package terminal;

public  class UserCommunication implements userMessage {

    public DisplayMessageID DisplayMessageID;

    public UserCommunication (DisplayMessageID displaymessageid ) {
        this.DisplayMessageID  = displaymessageid ;
    }

    // a method for Displaying messages
    public String  subuserMessage(DisplayMessageID DispMess) {          
        switch (DispMess) {
            case CMD_ERR : 
                System.out.println("Terminal Sw Module cannot able to intrepret the input Command");
            break;

            case LOAD_ERR :    
                System.out.println("Controller reports there is problem in fetching the file:" + "\n" +
                    "1 Check if the source file exits in Database" + "\n" +
                    "2 Check if Source path is right" + "\n" +
                    "3 Check if you have access to Database");
            break;

            default:
                System.out.println("VALLIDD.");
            break;  

        }
    return "ddd";
    }
} 
```

这是我的主要程序...

```
package terminal;

import terminal.userMessage.DisplayMessageID;

public class DisplayMessage() {

    public static void main(String[] args) {
        UserCommunication user_comm_to_terminal = new UserCommunication(DisplayMessageID.LOAD_ERR);
        System.out.println("Height of rectOne: ");
    }
} 
```

这些是我在尝试编译时遇到的错误......

1.  在线， `public class Displaymessage`：`--- Syntax error on token "class", @ expected`
2.  在线，`public static void main(String[] args)` :-

    ```
    Multiple markers at this line
    - Syntax error on token "void", @ expected
    - Syntax error, insert "enum Identifier" to complete EnumHeader
    - Syntax error, insert "]" to complete ArrayAccess
    - Syntax error on token "]", invalid (
    - Syntax error, insert ")" to complete SingleMemberAnnotation 
    ```

3.  最后一行，`} :- Syntax error on token "}", delete this token`

我无法弄清楚这些错误。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:10:56.260

```
public class  DisplayMessage() { 
```

摆脱`()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:18:00.283

```
public class DisplayMessage {

public static void main(String[] args) {

    UserCommunication user_comm_to_terminal = new UserCommunication(DisplayMessageID.LOAD_ERR);

     System.out.println("Height of rectOne: ");

} 
```

}

应该是这样的。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:11:09.787

`()`从类定义中删除。

# android - GPS 定位不是第一次发生。通知栏没有状态

> ID：10817969
> 
> 赞同：0
> 
> 时间：2012-05-30T14:08:22.333
> 
> 标签：android, gps, android-maps

创建了一个基于位置警报的应用程序。在模拟器上一切正常。但是在真实设备中会出现以下错误。

设想：

开启GPS。在手机中打开我的应用程序。状态栏中没有 GPS 符号。应用程序强制关闭。

为了解决这种情况，我正在做以下事情

打开任何应用程序，如地图、GPS Essentials。我的 GPS 值正在修复。之后打开我的应用程序。应用程序运行良好。

提供以下必要的代码：

在我的 Oncreate 方法中

```
fixlocation = orgManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

@Override
protected void onResume() {
    super.onResume();
    orgManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 1000, this);
    orgManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 1000, this);
    mo.enableCompass();
    mo.enableMyLocation();
}

/** Stop the updates when Activity is paused */
@Override
protected void onPause() {
    super.onPause();
    orgManager.removeUpdates(this);
    mo.disableCompass();
    mo.disableMyLocation();
}

@Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub

        //orgManager.removeUpdates(this);

        if (location != null) {
            currLatitude = location.getLatitude();
            currLongtitude = location.getLongitude();
}} 
```

我现在需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:25:35.693

```
LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);

currLat = location.getLatitude();
currentLang = location.getLongitude(); 
```

试试这个来获取当前位置。

onLocationChanged 只会在您的设备位置发生变化时调用，但

当您的应用程序第一次启动时，您可以使用此代码。

# java - 使用 POI 创建 Word 文件

> ID：10817970
> 
> 赞同：1
> 
> 时间：2012-05-30T14:08:26.457
> 
> 标签：java, apache, ms-word, apache-poi

我的要求是我应该读取一个模板文件并更改其内容中的一些值并将其写回另一个文件。最重要的是，它应该具有与模板相同的样式。

我面临的问题是我能够读写，但也很难转移风格。特别是我厌倦了尝试将段落样式应用于文档。请帮助我.....这是我的代码

```
 public static void main(String[] args) {
    try {
          HWPFDocument templateFile = new HWPFDocument(new FileInputStream("D:\\POI\\testPOIin.doc"));
          HWPFDocument blankFile = new HWPFDocument(new FileInputStream("D:\\POI\\blank.doc"));

        ParagraphProperties pp = templateFile.getRange().getParagraph(4).cloneProperties();
        blankFile.getRange().insertAfter(pp, 0);
        OutputStream out = new FileOutputStream("D:\\POI\\testPOIout.doc");
        blankFile.write(out);

      } catch (FileNotFoundException fnfe) {
          // TODO: Add catch code
          fnfe.printStackTrace();
      } catch (Exception ioe) {
          // TODO: Add catch code
          ioe.printStackTrace();
      }
  }
} 
```

请让我知道我做错了.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:58:54.300

我也有类似的任务，经过调查，我创建了解决方案，但它仅适用于 docx 文件：

```
public static void main(String[] args) throws Exception {
    FileOutputStream fos = new FileOutputStream(new File("transformed.docx"));
    XWPFDocument doc = new XWPFDocument(new FileInputStream(new File("original.docx")));
    for(XWPFParagraph p:doc.getParagraphs()){
        for(XWPFRun r:p.getRuns()){
            for(CTText ct:r.getCTR().getTList()){
                String str = ct.getStringValue();
                if(str.contains("NAME")){
                    str = str.replace("NAME", "Java Dev");
                    ct.setStringValue(str);
                }
            }
        }
    }
    doc.write(fos);
} 
```

它对低级元素进行操作，因此可以保存样式和其他道具。希望它会帮助某人。

# iphone - 为整个应用程序设置 AutocorrectionTypeDefault = YES

> ID：10817981
> 
> 赞同：0
> 
> 时间：2012-05-30T14:08:49.547
> 
> 标签：iphone, objective-c, xcode, uitextfield, uitextview

我读过我们可以设置自动更正

`textField.autocorrectionType = YES;`

对于一个文本字段。但是如何为整个应用程序设置这个属性呢？

预先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:14:59.207

简单地创建您自己的 Customclass 并在构造函数中设置属性。

```
@interface CustomTextField : UITextField

@end

@implementation CustomTextField

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
      self.autocapitalizationType = UITextAutocorrectionTypeDefault;
    }
    return self;
}
@end 
```

如果您创建一个新的文本字段，请使用您的自定义类创建对象：

```
CustomTextField *field = [[CustomTextField alloc] initWithFrame: ...]; 
```

# r - 二元函数对 (mx 2) 矩阵行的简明应用

> ID：10817984
> 
> 赞同：2
> 
> 时间：2012-05-30T14:08:55.897
> 
> 标签：r

给定以下矩阵，第一列中的权重为 ls，第二列中的 heihts 为：

```
> wgt.hgt.matrix
     [,1] [,2]
[1,]  180   70
[2,]  156   67
[3,]  128   64
[4,]  118   66
[5,]  202   72 
```

我正在寻找一种简洁的方法来应用这个二进制函数，比如

```
function(lb, inch) { (lb/inch**2)*703 } -> bmi 
```

到矩阵的每一行，产生一个数组、列表或向量，其中包含 5 个结果 BMI 值。我发现的一种方法使用该`apply`功能：

```
apply(wgt.hgt.matrix, 1, function(row) bmi(row[1], row[2])) 
```

但是 Ruby (*) 中的 splat 运算符将有助于使调用更加简洁明了：

```
apply(wgt.hgt.matrix, 1, function(row) bmi(*row)) 
```

是否存在与 splat 运算符等效的语法元素，即告诉 R 拆分所有类似向量的对象以填充参数列表的语法元素？还有其他更简单或更简洁的`apply`电话建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:25:04.797

也许我错过了一些东西，但是有什么问题：

```
wgt.hgt.matrix <-
  structure(c(180L,156L,128L,118L,202L,70L,67L,64L,66L,72L), .Dim=c(5L,2L))
bmi <- function(lb, inch) (lb/inch**2)*703
bmi(wgt.hgt.matrix[,1], wgt.hgt.matrix[,2]) 
```

更新：

根据 OP 的评论，它似乎`do.call`会更普遍地工作：

```
# put each matrix column in a separate list element
lc <- lapply(1:ncol(wgt.hgt.matrix), function(i) wgt.hgt.matrix[,i])
# call 'bmi' with one argument for each column / list element
do.call(bmi, lc) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:40:43.160

最好将 bmi() 函数用作矢量化解决方案，因为它具有所有矢量化运算符，如 Joshua 的回答中所示。你也可以这样做：

```
colnames(wgt.hgt.matrix) <- c("lb", "inch")
with( as.data.frame(wgt.hgt.matrix), bmi(lb,inch) )
# [1] 25.82449 24.43039 21.96875 19.04362 27.39313 
```

不幸的是，矩阵不是使用“with”构建环境的良好基础，因此上面需要强制转换为数据帧。您*可以获得*一个`apply`解决方案（这将比矢量化方法更省时）来使用重新编写的 bmi() 版本以获取具有命名元素的矢量（如上创建）：

```
 bmi <- function(vec) { (vec['lb']/vec['inch']**2)*703 }
 apply(wgt.hgt.matrix, 1, function(row)  bmi(row ) )
# [1] 25.82449 24.43039 21.96875 19.04362 27.39313 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T02:15:57.757

我们可以通过 do.call 非常接近您正在寻找的语法：

```
## Setup
wgt.hgt.matrix=matrix(c(180,70,156,67,128,64,118,66,202,72),ncol=2,byrow=TRUE)
bmi = function(lb, inch) { (lb/inch**2)*703 }
## The action
apply(wgt.hgt.matrix, 1, function(row) do.call(bmi,as.list(row))) 
```

do.call() 实际上比 splat 运算符更灵活，因为您可以使用列表名称来提供参数名称。

# database - 无法使用 Delphi XE2 连接到 Firebird 2.5 服务器

> ID：10817985
> 
> 赞同：2
> 
> 时间：2012-05-30T14:08:57.260
> 
> 标签：database, delphi, delphi-xe2, firebird2.5

我已经安装了 firebird 2.5 服务器，创建了一个数据库，并希望使用 Data Explorer 与我的 Delphi XE2 建立一个连接。添加数据库详细信息、用户名和密码时，如果按下测试连接按钮，则会收到以下错误：

```
Borland.Data.TDBXError: DBX Error:  Driver could not be properly   initialized.  Client library may be missing, not installed properly, of the wrong version, or the driver may be missing from the system path. 
```

我不知道是否需要将 .dll 文件添加到任何特定文件夹。请我迷路了，需要帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T21:23:59.967

您需要将`fbclient.dll`文件复制到 PATH 环境变量中的某个文件夹

例如在 32 位系统中，将 fbclient.dll（32 位版本）复制到`C:\Windows\System32`文件夹

例如，在 64 位系统中，将 fbclient.dll（32 位版本）复制到`C:\Windows\SysWOW64`文件夹

注意：如果您使用的是 64 位版本的 Firebird，您必须使用文件`<Firebird install path>\Firebird_2_5\WOW64`夹中的 fbclient.dll 文件。

# visual-studio-2010 - Visual Studio 2010 测试视图找不到第二个 NUnit 测试项目

> ID：10817990
> 
> 赞同：0
> 
> 时间：2012-05-30T14:09:10.327
> 
> 标签：visual-studio-2010, nunit, test-project

我可以从 NUnit Gui（单独加载）中看到这两个测试项目，但我无法从 Visual Studio 测试视图中看到这两个项目。测试视图仅显示第一个/原始项目。点击重新加载没有任何作用。如何让测试视图显示第二个/以后的项目？它应该同时显示/相同的视图，是吗？

如果我在设计上只能在测试视图中看到一个项目的测试，我如何让测试视图更改项目？

细节：

我手动创建了第二个项目，即没有“创建测试”作为引用了 nunit.framework.dll 的项目库。我检查了两个项目的程序集文件以及属性，它们看起来一样。

我在 VS 2010 Professional 上使用 NUnit 2.6.0.12051 并安装了“Visual NUnit 2010”版本 1.2.4 扩展。

我有一个在 VS Test View 和 NUnit Gui 中都可以运行的 NUnit 测试项目。我添加了带有 [TestFixture] 类和 [Test] 方法的第二个项目。所有项目都成功构建。两个测试都引用父目录中的 nunit.framework.dll。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:11:03.850

项目文件中有一个标签将项目描述为测试项目。

在 csprj 文件的 PropertyGroup 部分中，添加以下内容：

```
<ProjectTypeGuids>{3AC096D0-A1C2-E12C-1390-A8335801FDAB};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids> 
```

在此处查看更多详细信息： [http ://www.kindblad.com/2010/08/07/how-to-change-an-existing-visual-studio-project-into-a-test-project](http://www.kindblad.com/2010/08/07/how-to-change-an-existing-visual-studio-project-into-a-test-project)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-25T23:58:01.243

有很多问题会导致这种情况。这是我的：

*   我有 2 个 NUnit 测试项目。
*   "Test Explorer" -> "Run All" 只会从一个项目中找到测试。
*   明确右键单击未找到的测试之一并单击“运行测试”会导致“未找到测试”。在输出窗口中。
*   所有配置上的所有项目都设置为任何 CPU，但是否为所有内容选择 X86 也没关系。

问题是我的 Visual Studio（2015，FWIW）使用的是测试适配器 2.x，而我的一个项目使用 NuGet 提取了 NUnit 3.0。 **测试适配器 2.x 不运行 NUnit 3 测试，所以我的 NUnit 3 测试项目被忽略了。**

解决问题：

1.  卸载所有 NUnit 测试适配器（从 Visual Studio -> 工具 -> 扩展和更新**以及**从每个项目的 NuGet 包管理器窗口）。
2.  **使用每个项目的**NuGet 包管理器窗口将所有测试项目更新到 NUnit 3.0 。
3.  从 Visual Studio -> 工具 -> 扩展和更新安装 NUnit3 测试适配器

笔记：

*   如果您需要坚持使用 NUnit 2，则只需安装适当的测试适配器。重要的是一致性。
*   如果您之前使用的是由 NuGet 安装的测试适配器，但已切换到 Visual Studio 扩展，那么您可能会在从路径字符串加载资源/文件时遇到问题。请参阅[此答案](https://stackoverflow.com/a/33928462/3367144)以解决该问题。

# syntax - 创建 SPSS 循环函数

> ID：10817991
> 
> 赞同：2
> 
> 时间：2012-05-30T14:09:10.987
> 
> 标签：syntax, spss

我需要创建一个运行一系列转换的语法循环

这是我需要做的一个简化示例

我想创建五个水果变量

*   苹果变量
*   香蕉变量
*   芒果变量
*   papaya_variable
*   橙色变量

在 V1 中

*   苹果=1
*   香蕉=2
*   芒果=3
*   木瓜=4
*   橙色=5

    第一个循环

    IF (V1={number}) {fruit}_variable = VX。

    IF (V2={number}) {fruit}_variable = VY。

    IF (V3={number}) {fruit}_variable = VZ。

    下一个水果的运行循环

所以我想要的是检查 V1、V2 或 V3 是否包含水果编号的脚本。如果其中一个（只有一个可以）新的 {fruit}_variable 应该从 VX、VY 或 VZ 获取值。

这可能吗？该脚本需要创建超过 200 个变量，因此手动执行有点费时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:08:27.967

第一个循环可以放在`DO REPEAT`命令中。本质上，您定义了两个变量列表，并且可以遍历 if 语句集。

```
DO REPEAT V# = V1 V2 V3
/VA = VX VY VZ.
if V# = 1 apple_variable = VA.
END REPEAT. 
```

现在`1`和`apple_variable`在上面的示例中是硬编码的，但是我们可以将其汇总到一个简单的宏语句中以获取任意参数。

```
DEFINE !fruit (!POSITIONAL = !TOKENS(1)
             /!POSITIONAL = !TOKENS(1)).

DO REPEAT V# = V1 V2 V3
/VA = VX VY VZ.
if V# = !1 !2 = VA.
END REPEAT.

!ENDDEFINE.

!fruit 1 apple_variable. 
```

现在这对于超过 200 个变量来说仍然有点乏味，但应该会大大简化任务。在我走到这一步之后，我通常只对我的列表进行文本编辑以调用宏 200 次，在这种情况下，它所要做的就是`!fruit`在数字和结果变量名之前插入。这特别适用于列表是静态的。

使用内置 SPSS 工具的其他方法（主要是在定义的 MACRO 内循环）IMO 往往很丑陋，会使代码变得非常复杂，并且通常不值得花时间（尽管肯定是可行的）。尽管如果您愿意接受使用 python 命令的解决方案，这会有所缓解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T03:30:55.060

DO REPEAT 在这里是一个很好的解决方案，但我想知道最终目标是什么。这听起来像是一个问题，可以通过使用 Statistics 中的多重响应工具来解决，而无需进行这些转换。旧的 MULTIPLE RESPONSE 过程以及较新的 CTABLES 和 Chart Builder 工具中提供了多重响应功能。

HTH，乔恩·派克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T05:48:31.627

循环语句的组合：for、while、do while 与嵌套的 if..else 和 switch case 就可以解决问题。只要确保你有你的初始值和最终值循环去

比方说：

```
for (initial; final; increment)
{
 if (x == value) {
   statements;
}else{
  ...
} 
```

# list - 如何为 JAX-WS commons Maven 插件生成列表设置器？

> ID：10817994
> 
> 赞同：1
> 
> 时间：2012-05-30T14:09:15.810
> 
> 标签：list, maven, jax-ws

我一直在使用 wsimport 来生成客户端存根和支持类。我有一个包含列表的特定类，并且 wsimport 不会为此列表生成设置器（我需要）。我已经阅读了将 collectionType 设置为“indexed”的位置会生成设置器，但我不确定如何使用 maven 插件来执行此操作。关于如何为列表生成设置器的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:29:29.630

您可以调用 getter，它使您可以访问通常用于添加元素的列表的 add()。

# jquery - 修改css但它不处理事件

> ID：10817996
> 
> 赞同：0
> 
> 时间：2012-05-30T14:09:19.490
> 
> 标签：jquery, loopj

我正在使用具有令牌自动完成功能的搜索栏，即众所周知的 loopj :-)。即使我已经正确设置了表单字段，它们也只会对在 loopj 中编码的事件处理和在我的自定义 js 文件中完成的 css 修改做出反应（如下所示）。

我如何通过在不同的文件中添加我自己的事件来进行干预，比如说如果 loopj 定义了*handelr1*并且我定义了*handler2*，我怎样才能让它同时执行*handler1*和*handler2*？

这是我的 jQuery 文件：

```
(function($){
$(document).ready(function() {

$("#search-engine").tokenInput("http://playground.com/search/callback", {
  theme: "facebook",
  queryParam: "search_param"
});

$("#search-engine-2").hover(
    function () {
        $(this).append($("<span>***</span>"));
    }
  );
$("#search-engine-2").css("border","3px solid red");

$("#search-engine-2").hover(
    function () {
        $(this).append($("<span> ***</span>"));
    },
  function () {
    $(this).find("span:last").remove();
  }
);
  //li with fade class
  $("#search-engine-2.fade").hover(
    function(){
        $(this).fadeOut(100);$(this).fadeIn(500);
    });
  });
})(jQuery); 
```

谢谢

# c# - Catch 块不捕获异常

> ID：10817997
> 
> 赞同：2
> 
> 时间：2012-05-30T14:09:44.240
> 
> 标签：c#, asp.net-mvc-3

我有一个动作，如果在服务器上找到它应该返回一个图像。如果`filename`有效，则一切都按预期工作。但是如果找不到该文件，它总是会抛出一个未处理的异常：

> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

为什么这个异常没有被 catch 块处理？

这是我的简化代码：

```
public ActionResult Users(string filename)
    {
        try
        {
            var filePath = Server.MapPath("~/App_Data/uploads/users/" + filename);
            var file = File(filePath, "image/jpg", Path.GetFileName(filePath));
            return file;
        }
        catch
        {
            return Content("FILE NOT FOUND");
        }
    } 
```

**编辑**

错误：

> 找不到文件“C:\Projects\Extranet\App_Data\uploads\users\test123.png”。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.IO.FileNotFoundException：找不到文件“C:\Projects\Extranet\App_Data\uploads\users\test123.png”。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[FileNotFoundException: Could not find file 'C:\Projects\Extranet\App_Data\uploads\users\test123.png'.]
   System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) +9726591
   System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath) +1142
   System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share) +83
   System.Web.HttpResponse.TransmitFile(String filename, Int64 offset, Int64 length) +132
   System.Web.HttpResponseWrapper.TransmitFile(String filename) +20
   System.Web.Mvc.FilePathResult.WriteFile(HttpResponseBase response) +17
   System.Web.Mvc.FileResult.ExecuteResult(ControllerContext context) +188
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13
   System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +23
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +260
   System.Web.Mvc.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +177
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8967885
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:31:52.037

您尝试检索的文件不存在，因此当 MVC 处理您的 ActionResult 时您会收到 IOException。

这发生在您的控制器方法之外，因此在您的 try-catch 块之外。请尝试以下代码：

```
public ActionResult Users(string filename)
{
    var filePath = Server.MapPath("~/App_Data/uploads/users/" + filename);
    return File.Exists( filePath ) ? File(filePath, "image/jpg", Path.GetFileName(filePath)) : Content( "FILE NOT FOUND" );
} 
```