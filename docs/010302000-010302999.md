# StackOverflow 问答 10302000-10302999

# c++ - Windows.h 或 StdAfx.h，Petzold 的“Programming Windows”一书中的第一个窗口示例

> ID：10302004
> 
> 赞同：2
> 
> 时间：2012-04-24T16:26:02.687
> 
> 标签：c++, winapi

我从 Petzold 的《Programming Windows》第 5 版一书开始学习 winapi。

创建窗口的第一个示例对我来说有点问题。书上是这么写的

```
#include "windows.h" (only this one) 
```

但是当我使用 Visual Studio C++（在 Windows 7 64 位下）编译它时，它抱怨说

*警告 1 警告 C4627: '#include "Windows.h"': 查找预编译头使用时跳过*

和

*错误 2 错误 C1010：查找预编译头时文件意外结束。您是否忘记在源代码中添加“#include "StdAfx.h""？*

在我将其更改为 后 `#include "StdAfx.h"`，它工作正常。

那么为什么我不能使用`Windows.h`，需要使用`StdAfx.h`？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T16:29:41.623

您已将项目配置为使用[预编译头文件](http://msdn.microsoft.com/en-us/library/8f7a897x.aspx)。在这种情况下，您将放入`windows.h`所有使用 PCH 的编译单元中，一切都很好。或者，修改 IDE 中的项目设置以不使用预编译头文件。 `stdafx.h``stdafx.h`

为了清晰和独立于 IDE 的变幻莫测，这本书显然假设没有 PCH。如果您开发大量头文件列表，使用 PCH 可以加快构建时间，但现在不使用它可能更简单。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2019-03-02T06:41:21.763

在这种情况下，您想更改您正在使用 pch 的预编译头文件：

1.  转到编译器右侧的解决方案。
2.  右键点击它，
3.  通过单击此选项，您可以选择属性。
4.  然后选择配置属性并选择框左上角的全部。
5.  按确定。
6.  现在选择项目并右键单击它。
7.  选择属性选项。
8.  转到配置并选择 c/c++ ，单击推荐的标题，单击此选择
9.  选择没有预编译的头文件。
10.  按确定

现在你的问题解决了

# java - 任何对包含 apache-* 库类型的 POJO 的 java.util.List 进行排序的实用方法

> ID：10302005
> 
> 赞同：-1
> 
> 时间：2012-04-24T16:26:04.833
> 
> 标签：java, sorting, collections

是否有任何一种实用方法来对列表进行排序，如下所示：

```
POJO pojo1 = new POJO();
pojo1.setFoo("abc");

POJO pojo2 = new POJO();
pojo2.setFoo("abc");

List theList = new ArrayList<POJO>();
theList.add(pojo1);
theList.add(pojo2);

SortUtils.sort(theList, "foo", SortType.ALPHABETICAL, SortDirection.ASC) 
```

编辑：感谢您的回答，但我知道您可以使 POJO 实现 Comparable 或使用 Collections.sort(list, Comparator) 但是创建一个匿名类对于快速排序需求来说似乎是压倒性的，我正在寻找类似实用方法的东西使用反射来访问属性值和排序元素

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:27:13.873

[Collections.sort](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)并在 pojo 上实现[可比较或将](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)[比较器](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)传递给 sort 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:32:00.703

Use the Comparable interface to create a list, ArrayList, and the sort method of Collections, Collections.sort().

Inside the compareTo() method you can use your logic to order the list.

[http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)

[http://onjava.com/onjava/2003/03/12/java_comp.html](http://onjava.com/onjava/2003/03/12/java_comp.html)

As an addedum, you can use the variant that takes a Comparator as an argument:

[http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort(java.util.List](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort(java.util.List), java.util.Comparator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T16:33:01.293

Implement Comparable(In the same class) or Comparator( In any seperate class if you dont have the source code of the class you want to sort) and then call Collections.sort

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T16:33:55.817

在这种情况下，坚持核心基础可以真正提供帮助，使用可比较的，对于一些扩展逻辑使用比较器，经过测试和高效。

谢谢阿比

# php - 使用 Ajax 和 PHP 实时显示数据

> ID：10302006
> 
> 赞同：1
> 
> 时间：2012-04-24T16:26:11.673
> 
> 标签：php, ajax, design-patterns, real-time

我打算创建一个 Web 界面来实时显示数据库中的数据。数据来自监控设备，然后由独立于挖矿的软件组件存储到数据库中，我既无法访问其配置文件，也无法访问其源代码。我打算使用 Ajax/PHP 在 Web 界面上显示数据，因为我认为我将在同一段代码中同时拥有 JavaScript、HTML 和 PHP，我认为设计模式可能会有所帮助。

您对如何在不刷新页面的情况下实时显示网站中的新记录和所有更新有任何实施想法吗？哪种设计模式可以提供帮助（在服务器端或客户端）？使用观察者模式来观察 PDO 是否有用？

注意：我刚刚上过一些 JavaScript Ajax 课程，而且我只有设计模式的理论知识，但我熟悉 OOP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:33:17.723

最好的方法是使用 JQuery 每隔几秒钟检查一个 php 脚本，然后刷新一个 div

把它放在你的头部标签之间

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/
libs/jquery/1.3.0/jquery.min.js"></script>
<script type="text/javascript">
var auto_refresh = setInterval(
function ()
{
$('#load_updates').load('myphpfile.php').fadeIn("slow");
}, 10000); // refresh every 10000 milliseconds

</script> 
```

放置在主体中（每个新的更新都将显示在该 div 中）

```
<div id="load_updates"> </div> 
```

你的 php 文件可能看起来像这样，任何被回显的东西都会出现在你主页的 div 中。您可以运行查询然后回显数据。

```
<?php

echo "Testing ......";

?> 
```

# c++ - 丢失 'const' 修饰符

> ID：10302011
> 
> 赞同：1
> 
> 时间：2012-04-24T16:26:31.703
> 
> 标签：c++

> **可能重复：**
> [C++ 中带有 typedef 和模板的常量引用](https://stackoverflow.com/questions/3801982/constant-references-with-typedef-and-templates-in-c)

请看下面的代码：

```
typedef wstring& RT;
RT Change(const RT v)
{
    v += L"234"; // why can I change this argument???

    return v;
}

int _tmain(int argc, _TCHAR* argv[])
{    
    wstring str = L"111";
    wstring &str2 = Change(str);

    return 0;
} 
```

我很惊讶“更改”函数中的参数“v”可以更改。我们失去了 'const' 修饰符。诸如 std::add_const 之类的元函数没有帮助，您能解释一下这种行为吗？

工具：VS2010

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T16:35:47.143

这有点像表达式中的优先级。当你说

```
const wstring & foo; 
```

它使 foo 成为对常量 wstring 的引用。你可以这样想：

```
(const wstring) & foo; 
```

当你创建一个 typedef 时，你已经有效地改变了优先级。

```
const RT foo;
const wstring & foo;  // not equivalent, RT is a typedef, not a macro
const (wstring &) foo;  // this is effectively what happens 
```

const 使 foo 成为 const，而不是 foo 引用的内容。

当然，正如 FredOverflow 指出的那样，const 引用是多余的，因为您不能分配给引用，只能分配给它引用的对象。所以结果是 foo 只是一个普通的旧参考。

# java - 带有 ArrayList 的 Android 列表视图

> ID：10302026
> 
> 赞同：0
> 
> 时间：2012-04-24T16:27:16.353
> 
> 标签：java, android, listview, listactivity

我只是想在`ListView`不扩展的情况下使用`ListActivity`（因为我正在使用操作栏扩展我的抽象类）。那么，如何使用简单的 ArrayList 呢？我试过：

```
ListView lv = (ListView) findViewById(R.layout.list);
lv.setAdapter(new ArrayAdapter<String>(this, R.layout.list_item, myArrayList)); 
```

但是我的应用程序在最后一行出现错误，`(lv.setAdapter......).`请问我该怎么办？

编辑：

[https://gist.github.com/2481484](https://gist.github.com/2481484)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:14:27.280

您的`lv`变量是`null`因为您正在尝试获取您的`ListView`via `R.layout.list`。你应该通过`R.id.your_list_id`.

此外，您不应将 ListViews 与此类常规活动一起使用。您应该改用 ListActivity。你可以在这里查看如何使用它：http: [//developer.android.com/reference/android/app/ListActivity.html](http://developer.android.com/reference/android/app/ListActivity.html)

# apache - 通过虚拟主机为代理块提供唯一指令

> ID：10302034
> 
> 赞同：0
> 
> 时间：2012-04-24T16:27:37.027
> 
> 标签：apache, configuration, reverse-proxy

假设我的主配置中有以下`Proxy`块：

```
<Proxy balancer://PrivateSSL/>
  BalanceMember http://host:8080/ route=01 loadfactor=100
  BalanceMember http://host:8080/ roout=02 loadfactor=100
  ProxySet stickysession=ROUTEID
</Proxy> 
```

现在，`VirtualHost`我可以像这样“增强/调味/修改”该块：

```
<VirtualHost ip:port>
   ...
   <Proxy balancer://PrivateSSL/>
     RequestHeader set Host reverse-proxy-host
   </Proxy>
</VirtualHost> 
```

没有`Proxy`重复所有先前定义的元素？

我实际上会玩这个，但社区可能有一个更好的模式（也许说那是*verboten*，但我认为其他人会从答案中受益）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:45:01.173

本地测试将是一条狗。但是[一些 RTFM 提供了帮助](http://httpd.apache.org/docs/current/sections.html#mergin)：

> 配置部分以非常特殊的顺序应用。由于这会对配置指令的解释方式产生重要影响，因此了解其工作原理非常重要。
> 
> 合并顺序为：
> 
> 1.  `<Directory>`（除了正则表达式）和 .htaccess 同时完成（使用 .htaccess，如果允许，覆盖`<Directory>`）
> 2.  `<DirectoryMatch>`（和`<Directory ~>`）
> 3.  `<Files>`并`<FilesMatch>`同时完成
> 4.  `<Location>`并`<LocationMatch>`同时完成
> 5.  `<If>`
> 
> ...
> 
> 当请求由 mod_proxy 提供服务时，*容器将在处理顺序中`<Proxy>`代替`<Directory>`*容器。

# javascript - 三向类切换

> ID：10302047
> 
> 赞同：3
> 
> 时间：2012-04-24T16:28:19.303
> 
> 标签：javascript, jquery, html, css

我有两个单选按钮来切换两个替代文本，它可以工作：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
   "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"
            type="text/javascript"></script>
    <style type="text/css">
        .displayNone { display: none; }
    </style>
</head>

<body>

    <input type="radio" name="toggle" />A
    <input type="radio" name="toggle" />B

    <span class="A">A</span>
    <span class="B displayNone">B</span>

<script type="text/javascript">
    $('input[name=toggle]').change(function() {
        $('.A, .B').toggleClass('displayNone');
    })
</script>

</body>
</html> 
```

现在我想让它成为三个单选按钮来在三个文本之间切换：

```
<input type="radio" name="toggle" />A
<input type="radio" name="toggle" />B
<input type="radio" name="toggle" />C

<span class="A">A</span>
<span class="B displayNone">B</span>
<span class="C displayNone">C</span> 
```

我正在考虑的解决方案看起来太冗长了。什么是干净的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T16:36:27.847

另一种方法：

```
$('input:radio[name="toggle"]').change(
    function(){
        $('span')
            .eq($(this).index())
            .removeClass('displayNone')
            .siblings('span')
            .addClass('displayNone');
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/zMBKh/4/)。

* * *

**编辑**添加，对于更新的浏览器，实现相同的纯 CSS 方法：

```
input[type=radio]:nth-child(1):checked ~ span:nth-of-type(1),
input[type=radio]:nth-child(2):checked ~ span:nth-of-type(2),
input[type=radio]:nth-child(3):checked ~ span:nth-of-type(3){
    height: 1em;
    width: 100%;
    background-color: #f90;
    -webkit-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -o-transition: all 1s linear;
    -moz-transition: all 1s linear;
    transition: all 1s linear;
}

span {
    display: block;
    overflow: hidden;
    height: 0;
    width: 0;
    background-color: #fff;
    -webkit-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -o-transition: all 1s linear;
    -moz-transition: all 1s linear;
    transition: all 1s linear;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/zMBKh/6/)。

jQuery 参考资料：

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`change()`](http://api.jquery.com/change/).
*   [`eq()`](http://api.jquery.com/eq/).
*   [`index()`](http://api.jquery.com/index/).
*   [`:radio`选择器](http://api.jquery.com/radio-selector/)。
*   [`removeClass()`](http://api.jquery.com/removeClass/).
*   [`siblings()`](http://api.jquery.com/siblings/).

CSS 参考：

*   [CSS 过渡](http://www.w3.org/TR/css3-transitions/)。
*   [`E ~ F`通用兄弟组合子](http://www.w3.org/TR/selectors/#selectors)。
*   [`:nth-child()`伪类](http://www.w3.org/TR/selectors/#nth-child-pseudo)。
*   [`:nth-child()`W3.org 维基条目](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/%3anth-child)。
*   [`:nth-of-type()`伪类](http://www.w3.org/TR/selectors/#nth-of-type-pseudo)。
*   [`:nth-of-type()`W3.org 维基条目](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/%3anth-of-type)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T16:37:07.520

这是一种方法：**[jsFiddle 示例](http://jsfiddle.net/j08691/8zXVm/2/)**。

```
$('input[name=toggle]').change(function() {
    $('span').addClass('displayNone').filter('span:eq(' + $(this).index() + ')').removeClass('displayNone');
})​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T16:52:46.963

只是为了好玩，这可能不完全适合您的需求。这是一个纯 CSS 解决方案。

```
span {
  display: none;
}

​input[type="radio"]:checked + * + * + * {
  display: inline;
}​​ 
```

​</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T16:46:58.887

这是另一种方法（演示：http: [//jsfiddle.net/bauKH/](http://jsfiddle.net/bauKH/)）

```
<input type="radio" name="toggle" value="A" checked="true"/>A
<input type="radio" name="toggle" value="B"/>B
<input type="radio" name="toggle" value="C"/>C

<br />
<span id="A" class="data">A</span>
<span id="B" class="data displayNone">B</span>
<span id="C" class="data displayNone">C</span> 
```

* * *

```
$('input[name=toggle]').change(function() {
    var newval = this.value;
    $(".data").each(function() {
        $(this).toggleClass('displayNone', this.id != newval);
    });                                                    
}); 
```

这里的要点是，您可以使用[.toggleClass()](http://api.jquery.com/toggleClass/)中可选的第二个参数来指定是应该添加还是删除该类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T16:31:58.643

给你所有的文本跨越相同的类，但不同的 ID：

```
<span class="foo" id="span_a">A</span>
<span class="foo displayNone" id="span_b">B</span>
<span class="foo displayNone" id="span_c">C</span> 
```

然后在显示您想要的之前将它们全部隐藏

```
function show(x) {
    $(".foo").hide();
    $("#" + x).show();
} 
```

编辑：

或者，如果您看到闪烁，您可以使用 jQuery 的**非选择器：**

```
$(".foo").not("#" + x).hide();
$("#" + x).show(); 
```

# c++ - cppunit：setUp() 和 tearDown()

> ID：10302054
> 
> 赞同：4
> 
> 时间：2012-04-24T16:28:55.693
> 
> 标签：c++, unit-testing, methods, attributes, cppunit

我使用框架 cppunit 来测试我的类，我想知道这些方法是为 TEST_SUITE 调用一次还是为添加到该套件的每个方法调用`TestFixture::setUp()`它们`TestFixture::tearDown()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T16:37:47.827

这些方法包装了每个单独的测试用例。从[文档](http://cppunit.sourceforge.net/doc/1.8.0/class_cpp_unit_1_1_test_fixture.html#_details)：

> 每个测试都在自己的夹具中运行，因此测试运行之间不会有副作用。

# vb.net - Treeview -files & directories - Unauthorized Access Excpetion - vb.net

> ID：10302055
> 
> 赞同：0
> 
> 时间：2012-04-24T16:28:57.473
> 
> 标签：vb.net, unauthorizedaccessexcepti

Okay, I still havenot figured out a way to resolve this problem. As simple as my program is, I am trying to list the directories in a treeview and then when an user clicks on it, I am listing all the files in an listview box. I am getting "Unauthorized Access Exception" when I click on 'My Document' folder and also on some other folders. How to resolve this? I am not even opening any files, just listing files from a directory I click on treeview.

When I use FolderBrowserDialog, I don't get this exception and am able to browse to MyDocuments Folder and even open a file.

```
 Try
            Dim strdirs() As String = IO.Directory.GetDirectories(ds)
            tv1_temp(arr_ind(0)).Nodes.clear()

            For Each d As String In strdirs
                Dim ss = d.Substring(d.LastIndexOf(IO.Path.AltDirectorySeparatorChar) + 1)
                Dim tn = New TreeNode(ss)
                tn.Name = ss
                tv1_temp(arr_ind(0)).Nodes.Add(tn)
            Next
            tv1_temp(arr_ind(0)).ExpandAll()

        Catch ex As IO.IOException
            Comment.Text = "Device not ready!"

        Catch ex As System.UnauthorizedAccessException
            Comment.Text = ("Unauthorized Access to this directory!")

        End Try 
```

Thank you!

# html - 浮动工作 页脚中的元素

> ID：10302056
> 
> 赞同：1
> 
> 时间：2012-04-24T16:29:07.130
> 
> 标签：html, css, html-lists

我的网站现在在本地服务器上，但是对于那些知道它叫什么的人来说，这将是一个简单的修复。

我试图让这些列表（以白色为边界）将最左侧浮动在页脚的可用空间中（以黑色为边界）。

![在此处输入图像描述](../Images/bca8b09a29850946332bf8d8cc1f1ea9.png)

这是我的 CSS

```
#footer { width: 100%; height: 503px; background: url(img/FOOTER-bg.jpg) repeat-x; background-color: #821d20; position: relative; top: 100px;/*border: 1px solid #0C0;*/}
#footer a { text-decoration: underline; color: #c7bd89; }
#footer a:hover { text-decoration: none; color: #fff; }

#footer h6 { background: url(img/FOOTER-HR-BG.jpg) left center repeat-x; text-align: left;}
#footer h6 span { background: #8e2023; display: inline-block; padding-right: 5px; }

.footer-widgets { width: 960px; height: 503px; margin: 0px auto; padding: 0px; border: 1px solid #000;}
.footer-widgets li { width:280px; height: auto; list-style-image: none; list-style-position: outside; list-style-type: none; float: left; color: #fff; padding: 13px; margin-right: 10px; /*border: 1px solid #fff;*/ }
.footer-widgets li ul {color: red;}
.footer-widgets li ul li {color: #fff; margin-left: -50px; margin-top: -15px;}
.footer-widgets li p { font-size: 1em; line-height: 18px; text-align: left; /*border: 1px solid red;*/  }
.footer-widgets li h2 { font-size: 1.4em; font-weight: normal; letter-spacing: 1px; line-height: 30px; text-align: left;}
.footer-archives { position: relative; top: -210px;}
.footer-widgets li.last { position: relative; top: -210px;}

h6 { font-family:Verdana, Geneva, sans-serif; font-size: 1.2em; font-weight: normal; letter-spacing: 1px; margin-top: 15px; margin-bottom: 10px; color: #fff;}

.footer-copyright { position: absolute; width: 900px; left: 50%; margin-left: -450px; top: 400px; height: 100px; font-family: Tahoma, Geneva, sans-serif; line-height: 22px; font-size: 1em; color: #fff; text-align: center; text-transform: uppercase; }
.footer-copyright a { color: #fff !important; text-decoration: none !important; }
.footer-copyright a:hover { color: #c7bd89; text-decoration: underline !important; }

.copyright { margin-top: 27px; text-transform: uppercase; display: block; color: #cc9798;}
.copyright a { color: #cc9798 !important; text-decoration: underline; }

.footer-one, .footer-two, .footer-three, .footer-four { border: 1px solid #fff; float: left;} 
```

我有包含页脚，在 900px x 503px 容器内，我希望所有列表都向左浮动（如果足够小，则在彼此下方）。因此，“档案”将在“关注我们”下流动，如果我在“推荐”下放置一个搜索栏，它会很合适。

我可以用我的 CSS 做什么来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:32:20.143

为什么不只是为每一侧（左，中，右）创建一个列并以这种方式模拟它，至少我认为这是你想要实现的

小提琴[http://jsfiddle.net/eEwdk/](http://jsfiddle.net/eEwdk/)

还有另一种解决方法，包括使每个 li 元素绝对定位并计算它的位置（是的，我知道这听起来很多余）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:39:36.860

据我了解，您希望每个`li`元素都在彼此之下。为此，您要将`ul`元素浮动到左侧，而不是每个单独的`li`元素。

# matlab - `...`在matlab中有什么作用？

> ID：10302057
> 
> 赞同：1
> 
> 时间：2012-04-24T16:29:09.873
> 
> 标签：matlab

我是 Matlab 的新手，但我认为`...`它用于表达数组。然而，下面的代码行证明我不知道那是做什么的。有人可以给我一个线索吗？

```
 str = sprintf('%s: sometext %d of %d, sometext %d [%d-other text %d]',...
            GROUP(ID).Name,...
            GROUP(ID).TurnNumber+1,...
            GROUP(ID).MaxTurns,...
            GROUP(ID).SetNumber,... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T16:30:20.140

这是行继续字符串；基本上，这意味着将您即将遇到的行尾字符视为不存在。

由于换行而无效：

```
str = sprintf('%s foo',
           'foo'); 
```

有效，因为您告诉 Matlab 继续阅读：

```
str = sprintf('%s foo', ...
           'foo'); 
```

# sql - 将 FOR XML 的结果放入变量中

> ID：10302060
> 
> 赞同：1
> 
> 时间：2012-04-24T16:29:20.813
> 
> 标签：sql, sql-server, sql-server-2005

```
 SELECT @Name = Name FROM Table FOR XML AUTO 
```

不起作用，如何将 XML 结果从使用中获取`FOR XML`到变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T16:31:17.893

这将起作用：

```
SELECT @Name = CONVERT(XML, (
  SELECT Name
  FROM SomeTable
  FOR XML AUTO
)); 
```

您可以在没有包装语句的情况下尝试它，`CONVERT(XML, (...))`但我发现 SQL Server 不喜欢在没有显式转换的情况下分配给 XML 变量。

# audio - Rosetta Stone 使用什么语言/软件？

> ID：10302062
> 
> 赞同：0
> 
> 时间：2012-04-24T16:29:27.973
> 
> 标签：audio

Rosetta Stone 允许您与母语人士交谈并检查您的发音，这种功能将内置哪种编程语言，或者需要哪些服务器/客户端软件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:01:27.620

我想我会回答这个问题，即使它很模糊而且我从未使用过 Rosetta Stone。

首先，如果您的程序在网络浏览器中运行（我假设这是您的目标，因为您说*创建一个网络程序*），您需要能够在本地捕获音频。显然，您不想要求用户上传他们创建的音频文件。这通常使用 Adob​​e Flash 完成，但我相信您也可以使用 Silverlight、Java 或特定于您想要支持的每个浏览器的非托管浏览器扩展。

获取音频可能是最容易的部分。处理发音的实际波形将相当棘手。你必须匹配每个音素，确保它是有效的，并确保单词的正确部分被强调。我怀疑将这种语言数据放在客户端上是否有意义，而且我怀疑像 Flash 这样的东西无论如何都非常擅长进行这种波形分析。最有可能的是，这些样本被上传到服务器，在那里进行正确性分析。这几乎可以用任何编程语言完成，所以只能猜测 Rosetta 是如何做到的。也许是 Java 代码、纯 C++ 或 .NET。

# ruby - 如何从其他 ruby 文件的模块调用方法

> ID：10302070
> 
> 赞同：3
> 
> 时间：2012-04-24T16:29:48.113
> 
> 标签：ruby, methods, module

我必须 Ruby 文件：一个包含一个模块，其中包含一些用于统计计算的方法，在另一个文件中我想调用模块中的一个方法。我怎样才能在 Ruby 中做到这一点？

那是正确的方法吗？

```
require 'name of the file with the module'

a=[1,2,3,4]
a.method1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T18:00:18.397

Require 需要文件的绝对路径，除非文件位于 Ruby 的加载路径之一。您可以使用 查看默认加载路径`puts $:`。通常执行以下操作之一来加载文件：

将主文件的目录添加到加载路径，然后将相对路径与 require 一起使用：

```
$: << File.dirname(__FILE__)
require "my_module" 
```

仅加载单个文件的 Ruby 1.8 代码通常包含单行代码，例如：

```
require File.expand_path("../my_module", __FILE__) 
```

Ruby 1.9 添加了 require_relative：

```
require_relative "my_module" 
```

在模块中，您需要将方法定义为类方法，或使用 Module#module_function：

```
module MyModule
  def self.method1 ary
    ...
  end

  def method2
    ...
  end
  module_function :method2
end

a = [1,2,3,4]
MyModule.method1(a) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:24:55.780

Your way is correct if your module file is in the require search path.

If your module provide methods to be used by the object itself, you must do:

```
require 'name of the file with the module'

a=[1,2,3,4]
a.extend MyModule   # here "a" can use the methods of MyModule
a.method1 
```

See [Object#extend](http://www.ruby-doc.org/core-1.8.7/Object.html#method-i-extend).

Otherwise, if you'll use the methods directly by the module, you'll use:

```
MyModule.method1(a) 
```

# .net - Tabular data import wizard control

> ID：10302072
> 
> 赞同：1
> 
> 时间：2012-04-24T16:29:51.527
> 
> 标签：.net, excel, controls

Are there any existing .NET (WPF-compatible) controls that generate a dialog similar to the Excel Flat-File-Import dialog?

What I am looking for specifically is an interface that shows the available columns of a chosen data source (XLS or CSV for starters) and allows the user to choose what type each column represents. ![Excel Column Chooser](../Images/13547fdd920b3ff1e1494c8ed53fc50e.png)

I know that it will require a significant amount of work to adjust it to my program, but it would be nice not to have to start from scratch.

# r - R中的向量操作

> ID：10302074
> 
> 赞同：1
> 
> 时间：2012-04-24T16:30:06.630
> 
> 标签：r, matrix

假设我有一个维度为 n 的向量，它由 0 和 1 组成。然后我将这个向量分成 m 个相等的 bin。如果一个 bin 至少包含一个“1”，则该 bin 被称为活动。我想编写一个命令来返回活动箱的位置以及它们包含多少个“1”。

例如，我有这个向量：n=15, m=5

```
[1 0 0 | 0 1 1 | 0 0 0 | 0 1 0| 1 1 1] 
```

我想要矩阵`[1 2 4 5]`（活动箱）和`[1 2 1 3]`（它们包含多少个 1）。

我可以在不使用 for 循环的情况下用 R 编写这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T16:43:49.440

我会这样做：

```
a <- c(1,0,0,0,1,1,0,0,0,0,1,0,1,1,1)
m <- 5
idx <- rep(1:m, each=length(a)/m)

# how many ones?
no <- sapply(1:5, function(x) sum(a[idx==x]))

# which bins contain ones?
bins <- 1:m
bins[no>0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:51:35.190

另一种获取向量的方法：

```
x <- c(1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1)

n <- length(x)
m <- 5
size <-  n/m

x.list <- split(x, cut(seq_along(x)/size, 0:m))

vapply(x.list, sum, 0) 
```

从那里开始，像 jigr 那样做。

# java - 是否有用于 java 声音的 .m4a 服务提供者接口？

> ID：10302078
> 
> 赞同：2
> 
> 时间：2012-04-24T16:30:24.867
> 
> 标签：java, audio, javasound, m4a, service-provider

我编写了一个简单的媒体播放器，它使用 java 声音和一堆不同的 SPI 来支持各种音频格式。不过，我还没有找到 .m4a 的 SPI。我看过[JAAD](http://jaadec.sourceforge.net/index.php)，但它似乎只有 AAC 的 SPI，而不是 M4A。

外面有吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T14:51:13.050

因此，在进行更多研究之后，如果里面的音频是 AAC，那么理论上 JAAD 应该适用于 .m4a 和 .mp4 容器。对我来说，它只是获取数据线，但实际上并没有从解码流中读取字节。我在这里发布了这个问题：[Java sound not playing m4a files through JAAD](https://stackoverflow.com/questions/10369221/javasound-not-playing-m4a-files-through-jaad-an-spi "Java 声音无法通过 JAAD 播放 m4a 文件")

# php - ajax refreshing a div under multiple levels of included files : doesn't work

> ID：10302081
> 
> 赞同：0
> 
> 时间：2012-04-24T16:30:53.993
> 
> 标签：php, javascript, ajax, include, refresh

I am having difficulty explaining my problem so I will just show the step by step. Please forgive me if I am unclear.

Problem: I am trying to refresh a div that is in an included file:

I have an index.php page with a div id='home' (all the appropriate jquery files are called in the head section of index.php. On the index.php page is the following javascript trigger:

```
<a href="javascript: MyAjaxRequest('home','random2.php')">Random Number times 10</a> 
```

which triggers a reload of div id='home'. div id='home' is given below (i don't know what the headers are for - i tried with and without them):

```
<div id='home'>

    <?php
        header("Content-Type: text/html; charset=ISO-8859-15");
        header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
        header("Cache-Control: no-store, no-cache, must-revalidate");
        header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
        header("Cache-Control: post-check=0, pre-check=0", false);
        header("Pragma: no-cache");
    ?>

    <script type="text/javascript">
        function homeloader(){
        var xmlHttp;
        try{
            xmlHttp=new XMLHttpRequest();// Firefox, Opera 8.0+, Safari
        }
        catch (e){
            try{
                xmlHttp=new ActiveXObject("Msxml2.XMLHTTP"); // Internet Explorer
             }
             catch (e){
                 try{
                     xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
                  }
                  catch (e){
                      alert("No AJAX");
                      return false;
                  }
             }
         }

         xmlHttp.onreadystatechange=function(){
            if(xmlHttp.readyState==4){
            document.getElementById('homeload').innerHTML=xmlHttp.responseText;
            setTimeout('homeloader()',10000); // JavaScript function calls AutoRefresh() every 10 seconds
            }
         }
         xmlHttp.open("GET","random.php",true);
         xmlHttp.send(null);
       }

       homeloader();

    </script>

    <div id='homeload'>
        <font size='1em'>
        Random Number:&nbsp;

        <?php
            include "random.php";
        ?>
        </font>
    </div>

</div> 
```

The ajax is supposed to refresh the content in sub div id='homeload' with the results of random.php ( a simple random number generator given at the bottom of this post) which it does.

Now the trouble starts.

When the above href='javascript... is fired it should load random2.php into div id='home' (which includes random3.php and another ajax function - the same function with key words changed (i tried leaving the catch (e) and changing it to catch (f) as below). It includes random3.php fine. However the ajax in random2.php should also refresh the sub div id='homeload2' with the results of random3.php (which it doesn't). random3.php is included but is not refreshed.

Here is random2.php (Again, i don't know what the headers are for - they came with the ajax - I tried with and without them):

```
<?php
    header("Content-Type: text/html; charset=ISO-8859-15");
    header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
    header("Cache-Control: no-store, no-cache, must-revalidate");
    header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
    header("Cache-Control: post-check=0, pre-check=0", false);
    header("Pragma: no-cache");
?>

<script type="text/javascript">
  function homeload2(){
    var xmlHttp2;
    try{
      xmlHttp2=new XMLHttpRequest();// Firefox, Opera 8.0+, Safari
    }
    catch (f){
      try{
        xmlHttp2=new ActiveXObject("Msxml2.XMLHTTP"); // Internet Explorer
      }
      catch (f){
        try{
          xmlHttp2=new ActiveXObject("Microsoft.XMLHTTP");
        }
        catch (f){
          alert("No AJAX");
          return false;
        }
      }
    }

    xmlHttp2.onreadystatechange=function(){
      if(xmlHttp2.readyState==4){
        document.getElementById('homeload2').innerHTML=xmlHttp2.responseText;
        setTimeout('homeload2()',10000); // JavaScript function calls AutoRefresh() every 10 seconds
      }
    }
    xmlHttp2.open("GET","random3.php",true);
    xmlHttp2.send(null);
  }

  homeload2();

</script>

<div id='homeload2'>
    <font size='1em'>
    Random Number times 10:&nbsp;
    <?php
        include "random3.php";
    ?>
    </font>
</div> 
```

Here, finally, is the simple code for random.php:

```
<?php
    $c = rand(1,10);
    echo $c;
?> 
```

and random3.php:

```
<?php
    $c2 = rand(1,10);
    $c3 = $c2*10;
    echo $c3;
?> 
```

So the problem is that random2.php is supposed to include random2.php into the div id='home'. It does. But the ajax in random2.php should refresh the sub div id='homeload2' with the results of random3.php. It does not.

random3.php is included but the div id='homeload2' is not refreshed.

I have tested random2.php on its own (just by loading the file in the browser) and it refreshes fine. I also tried it on my testing server and the deployment server. On both, when the file is loaded solo it refreshes, but when it is loaded in the context of the above (as an included file), is loaded as an include but does not refresh.

I am new to ajax and I pulled this code off a tutorial (I have seen the same code in several places). I also tried other ajax techniques (other formulations for the same objective) with the same result - the include loads but does not refresh. Although I did not figure it would make a difference, I tried also using require - to no avail. I have also tried inserting the library calls ( src=...jquery... ) into random2.php, but that did not help.

I have tried to disect and inspect the pages extensively, so barring some typo (which my testing suggests is not the case, I imagine there is some fundamental rule I am breaking by trying to do the second refresh, but I just can't see that being the problem. Why would it prevent the second function? Is there something about the function not actually loading when it is included via a javascript href? Something about headers or something?

The script also includes some php header commands (given above), which I don't understand, but tried deleting them to see if that was the problem. No difference.

I can only conclude that the ajax function in random2,php is broken somehow by its being placed in an included file (random2.php). I am sure my deduction has taken a wrong turn somewhere but where?

I have done a substantial amount of research for a solution, but my problem is that I don't really know how to formulate the google search query to get more information, so I just keep getting solutions to refresh a div, but not relating to my specific puzzle. "How to refresh a div two includes down the line" ?

So I am posting here.

I am sure there is something fundamental I am missing.

If anyone can help, I would appreciate it. Thank you in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:53:34.410

的定义和调用`homeloader`不应由 ajax 加载。至于标头，第一个告诉浏览器它将加载什么，另一个负责缓存部分。

浏览器不会编译任何异步加载的 javascript。您可以使用`<script>`标签加载它们，或者，如果您真的需要仅在该页面/div 上加载它们，则从不同的文件加载它们并调用`eval`以强制浏览器编译您的代码。但是 `eval`可能有风险，所以我会选择第一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:35:03.650

可能是您的浏览器正在本地缓存您的 .php 文件。考虑将查询字符串参数附加到您的请求中：

`var randomnumber=Math.floor(Math.random()*11);`

`xmlHttp2.open("GET","random3.php?someVar="+randomnumber,true);`

这样，它将始终是被请求的“新”文件。

编辑：确保每次您希望处理 AJAX 时都生成随机数 - 目的是创建一个“新请求”，因此每次在发出请求之前都会执行/计算随机数代码

编辑：还因为 Include 是一个服务器端指令-很可能是您的 DOM 不完整@执行时间

编辑2：**试试这个**

```
<?php
    header("Content-Type: text/html; charset=ISO-8859-15");
    header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
    header("Cache-Control: no-store, no-cache, must-revalidate");
    header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
    header("Cache-Control: post-check=0, pre-check=0", false);
    header("Pragma: no-cache");
?>

<script type="text/javascript">
  function homeload2(){
    var xmlHttp2;
    try{
      xmlHttp2=new XMLHttpRequest();// Firefox, Opera 8.0+, Safari
    }
    catch (f){
      try{
        xmlHttp2=new ActiveXObject("Msxml2.XMLHTTP"); // Internet Explorer
      }
      catch (f){
        try{
          xmlHttp2=new ActiveXObject("Microsoft.XMLHTTP");
        }
        catch (f){
          alert("No AJAX");
          return false;
        }
      }
    }

    xmlHttp2.onreadystatechange=function(){
      if(xmlHttp2.readyState==4){
        document.getElementById('homeload2').innerHTML=xmlHttp2.responseText;
        setTimeout('homeload2()',10000); // JavaScript function calls AutoRefresh() every 10 seconds
      }
    }
    xmlHttp2.open("GET","random3.php",true);
    xmlHttp2.send(null);
  }

  // don't call Homeload here     
</script>

<div id='homeload2'>
    <font size='1em'>
    Random Number times 10:&nbsp;
    <?php
        include "random3.php";
    ?>
    </font>
</div>
<script>
// call it here
homeload2();

</script> 
```

# ms-word - How to extract all footnotes from a MS Word file?

> ID：10302092
> 
> 赞同：1
> 
> 时间：2012-04-24T16:31:39.613
> 
> 标签：ms-word, text-extraction, footnotes

Is there a generic (Macro, XML Parser, ...) way to extract all footnotes in a MS Word file and also keep the corresponding number from the original text?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:20:33.930

您可以使用 Elod Pal Czirmaz 的[宏](http://www.epcsirmaz.co.uk/?q=word)作为起点。我怀疑脚注没有随身携带他们的号码。呈现文档时，仅按顺序分配数字。

# c# - 如何将用户生成的 png 图像加载为纹理（不是 xnb）？

> ID：10302095
> 
> 赞同：0
> 
> 时间：2012-04-24T16:31:58.307
> 
> 标签：c#, xna, ugc

这个想法是让用户创建自己的纹理，将它们作为图像放在一个文件夹中（并且可能在单独的文本文件中设置一些属性），以便游戏加载并相应地工作。

通常我有自己的纹理作为图像，它们在编译时由 Visual Studio 处理，然后游戏使用 XNB 文件。但是没有安装 VS 的最终用户呢？

**UPD：**唯一安全的选择（不需要手动处理资源）似乎是以 XNB 格式替换原始资源文件。为此，您可以处理自己的 PNG、WAV 和其他文件，[`this tool from codeplex`](http://xnacontentcompiler.codeplex.com/) 并将它们放在游戏的内容文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:13:35.617

如果您仅在 Windows 中工作...（不是 Xbox 和 Windows Phone）

你可以使用 Texture2d.FromStream(File.OpenRead(path));

您必须意识到，这样，您应该在不需要纹理以释放资源时调用纹理 dispose 方法。

Wehn你使用内容管理器，是游戏结束时调用方法的管理器。

# php - Accessing image files on Windows server from php on Linux server

> ID：10302100
> 
> 赞同：0
> 
> 时间：2012-04-24T16:32:22.277
> 
> 标签：php, windows, image

I am currently hosting a php script on a public web server that I use to retrieve an image for me hosted locally on the same server. I was recently told I would need to do the same thing for another process, except our new process will need to pull images from a Windows server. Could anyone recommend the best way to go about doing this? I have tried just utilizing a direct path such as the following with no luck:

```
<?
  $im = file_get_contents('\\SERVER-NAME\Photos\image.jpg');
  header('content-type: image/gif');
  echo $im;
?> 
```

Any insight would be greatly appreciated. Thanks in advance for any assistance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:42:09.507

您可以使用`imagecreatefromstring` [http://php.net/manual/en/function.imagecreatefromstring.php](http://php.net/manual/en/function.imagecreatefromstring.php)

```
$data = file_get_contents('\\SERVER-NAME\Photos\image.jpg');
$im = imagecreatefromstring($data);

if ($im !== false) {
    header('Content-Type: image/gif');
    imagepng($im);
    imagedestroy($im);
} 
```

让我知道是否产生任何错误..以便我可以进一步帮助您...

**编辑 1**

一个。`Warning: file_get_contents(\WINDOWS-SERVERNAME\Photos\image.jpg) [function.file-get-contents]:`

`UNC paths`如果允许 Apache 用户访问网络文件夹，我可以看到您正在尝试访问这将起作用

B.`Fatal error: Call to undefined function imagecreatefromstring() in`

这意味着您的 PHP 服务器上没有安装 GD [http://php.net/manual/en/book.image.php](http://php.net/manual/en/book.image.php)，因为这是您的 linux 机器，您可以运行类似`# yum install php53u-gd`

# javascript - 悬停功能

> ID：10302101
> 
> 赞同：0
> 
> 时间：2012-04-24T16:32:26.193
> 
> 标签：javascript, jquery

```
jQuery("#markets_served").hover(function(){
    jQuery.data(document.body, "ms_height", jQuery(this).height());
    if(jQuery.data(document.body, "ms_height") == 35) {
        jQuery(this).stop().animate({height:'195px'},{queue:false, duration:800, easing: 'easeOutQuad'});
        jQuery("#btn_ms_close").css("display","inline");
    }
});

jQuery("#btn_ms_close").hover(function(){
    jQuery.data(document.body, "ms_height", jQuery("#markets_served").height());
    jQuery("#markets_served").stop().animate({height:'35px'},{queue:false, duration:800, easing: 'easeOutQuad'});
    jQuery(this).css("display","none");
}); 
```

悬停问题。它不会工作。当鼠标离开悬停时出现的内容时，它不会悬停。

[http://uscc.dreamscapesdesigners.net/](http://uscc.dreamscapesdesigners.net/) - 底部示例“涵盖的市场”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:39:45.690

看看jQuery 网站上的[悬停声明。](http://api.jquery.com/hover/)您可以一举指定 mouseover 和 mouseout 事件的处理程序。无需计算高度或将另一个处理程序绑定到出现的新 div。

```
$("#markets_served").hover(
  function () {
    //do this when over
  },
  function () {
    //do this when out
  }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:37:32.683

使用是这样的：

```
$('#el').hover(function(e) { /* hover; */ }, function(e) { /* unhover */ }); 
```

这是[文档](http://api.jquery.com/hover/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T16:38:31.293

当鼠标进入时，您会增加 div 的高度，但当鼠标在 div 之外时，您不会重置它，因此会出现问题。

你应该这样做：

```
jQuery("#markets_served").hover(
    function(){
        jQuery.data(document.body, "ms_height", jQuery(this).height());
        if(jQuery.data(document.body, "ms_height") == 35) {
            jQuery(this).stop().animate({height:'195px'},{queue:false, duration:800, easing: 'easeOutQuad'});
            jQuery("#btn_ms_close").css("display","inline");
        } , 
    function(){
            jQuery.data(document.body, "ms_height", jQuery("#markets_served").height());
            jQuery(this).stop().animate({height:'35px'},{queue:false, duration:800, easing: 'easeOutQuad'});
            jQuery("#btn_ms_close").css("display","none");
        }

    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T17:02:36.433

或者更简单没有数据：

```
jQuery("#markets_served").hover(function() {
    jQuery(this).stop().animate({height:'195px'},{queue:false, duration:800, easing: 'easeOutQuad'});
    jQuery("#btn_ms_close").css("display","inline");
}, function() {
    jQuery(this).stop().animate({height:'35px'},{queue:false, duration:800, easing: 'easeOutQuad'});
    jQuery("#btn_ms_close").css("display","none");
}); 
```

# php - 如何使用 PHPUnit 重置模拟对象

> ID：10302102
> 
> 赞同：7
> 
> 时间：2012-04-24T16:32:32.730
> 
> 标签：php, unit-testing, soap, mocking, phpunit

如何重置 PHPUnit Mock 的 expects()？

我有一个 SoapClient 的模拟，我想在测试中多次调用它，重置每次运行的期望。

```
$soapClientMock = $this->getMock('SoapClient', array('__soapCall'), array($this->config['wsdl']));
$this->Soap->client = $soapClientMock;

// call via query
$this->Soap->client->expects($this->once())
    ->method('__soapCall')
    ->with('someString', null, null)
    ->will($this->returnValue(true));

$result = $this->Soap->query('someString'); 

$this->assertFalse(!$result, 'Raw query returned false');

$source = ConnectionManager::create('test_soap', $this->config);
$model = ClassRegistry::init('ServiceModelTest');

// No parameters
$source->client = $soapClientMock;
$source->client->expects($this->once())
    ->method('__soapCall')
    ->with('someString', null, null)
    ->will($this->returnValue(true));

$result = $model->someString();

$this->assertFalse(!$result, 'someString returned false'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T01:35:15.210

通过更多调查，您似乎只需再次调用 expect() 。

然而，这个例子的问题是 $this->once() 的使用。在测试期间，与 expects() 关联的计数器无法重置。为了解决这个问题，你有几个选择。

第一个选项是忽略它被 $this->any() 调用的次数。

第二个选项是使用 $this->at($x) 来定位调用。请记住，$this->at($x) 是模拟对象被调用的次数，而不是特定方法，并且从 0 开始。

在我的具体例子中，因为模拟测试两次都是一样的，并且只期望被调用两次，我也可以使用 $this->exactly()，只有一个 expects() 语句。IE

```
$soapClientMock = $this->getMock('SoapClient', array('__soapCall'), array($this->config['wsdl']));
$this->Soap->client = $soapClientMock;

// call via query
$this->Soap->client->expects($this->exactly(2))
    ->method('__soapCall')
    ->with('someString', null, null)
    ->will($this->returnValue(true));

$result = $this->Soap->query('someString'); 

$this->assertFalse(!$result, 'Raw query returned false');

$source = ConnectionManager::create('test_soap', $this->config);
$model = ClassRegistry::init('ServiceModelTest');

// No parameters
$source->client = $soapClientMock;

$result = $model->someString();

$this->assertFalse(!$result, 'someString returned false'); 
```

[感谢这个答案，它有助于 $this->at() 和 $this->exactly()](https://stackoverflow.com/a/5484864/343614)

# python - 强制 timeit 自动选择语句执行的次数

> ID：10302103
> 
> 赞同：2
> 
> 时间：2012-04-24T16:32:33.760
> 
> 标签：python, python-3.x, timeit

在命令行中，我可以这样做：

```
python -m timeit 'a = 1' 
```

根据文档：

> 如果未给出 -n，则通过尝试连续的 10 次方来计算合适的循环次数，直到总时间至少为 0.2 秒。

这很好用，但是在我的程序中使用时如何获得相同的行为`timeit`？如果我省略了调用的`number`参数`timeit.timeit`，它将默认为`1000000`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T16:41:25.430

文档并没有表明存在这样的功能，我假设不存在。幸运的是，为您定义一个包装器并不难：

```
import timeit

def auto_timeit(stmt='pass', setup='pass'):
    n = 1
    t = timeit.timeit(stmt, setup, number=n)

    while t < 0.2:
        n *= 10
        t = timeit.timeit(stmt, setup, number=n)

    return t / n # normalise to time-per-run 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:47:34.787

这是编写包装器的替代方法：

```
import subprocess
import sys

subprocess.call([sys.executable, '-m', 'timeit', stmt]) 
```

# java - 如何在 android 中创建可重用的 AsyncTasks？

> ID：10302104
> 
> 赞同：4
> 
> 时间：2012-04-24T16:32:47.973
> 
> 标签：java, android, android-asynctask

我在 android 中有一个应用程序，我正在访问几个 REST web 服务。我正在使用 AsyncTasks 来访问这些并在之后进行一些 UI 更改。我想在不同的活动中使用其中一些调用。然而，根据我读过的所有教程，AsyncTasks 被用作活动中的内部类（这是有道理的，因为它们正在改变这些活动中的视图）。但是我怎样才能解决那些 AsyncTask 的可重用性呢？更重要的是，假设我想在位置更改时执行一些 AsyncTasks 调用。我有一个 LocationListener （这是一个单一的外部类），我想在 onLocationChange() 方法内部进行 API 调用。但我无法访问我想要的视图，因为我不在活动课程中。有没有人有一个很好的解决方案或想法如何做类的架构？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T16:34:21.433

您可以将异步任务创建为单独的类，而不是集成到任何活动中。

示例代码如下:::

```
 public class KeyTask extends AsyncTask<Void, Void, String> {

    @Override 
    protected void onPreExecute() { 
        Log.i("onPreExecute", ".onPreExecute() — start");

    } 

    @Override 
    protected String doInBackground(Void ... params) {
        Log.i("TransmissionKeyTask", ".doInBackground() — start");

        }

    @Override
    protected void onPostExecute(String result) {
        Log.i("onPostExecute", ".onPostExecute() — start");
    }       
} 
```

甚至您在其中添加构造函数，如下所示：

```
public KeyTask(Context context) {
        // TODO Auto-generated constructor stub

} 
```

# android - 用手指滑动在活动之间滑动

> ID：10302108
> 
> 赞同：0
> 
> 时间：2012-04-24T16:33:08.723
> 
> 标签：android, gesture, swipe

我正在寻找一种在我的活动之间滑动的方法，滑动效果粘在手指上。

我不是在寻找动画效果。

目前我正在使用 fling 和 onTouch 类。这些工作正常，但我想为我的库创建一个“粘性”版本。

我遇到了页面查看器，但看起来它不会在活动之间工作。或者，也许我不理解它。

是否有任何带有示例或视频的代码，以便您可以看到效果是正确的。本质上它是我正在寻找的 Android 主页效果。在活动之间实施。在网上找不到任何实用的东西可以使用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:53:58.523

将片段视为一种实现。如果您的目标是较旧的操作系统版本，例如姜饼或 froyo，您可以使用兼容性包和 ViewPager 元素来完成您所描述的几乎所有操作。有一些关于它的不错的教程，[这里是其中之一](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)。祝你好运！

# javascript - 使用附加到 div 的 javascript 创建 iframe

> ID：10302109
> 
> 赞同：14
> 
> 时间：2012-04-24T16:33:11.463
> 
> 标签：javascript, html, iframe

我想使用常规 javascript 将 iframe 加载/附加到 div 中。我可以用 JQuery 毫无问题地做到这一点，但我不想包含 js 文件。我不断收到错误'document.getElementById("ad54")'（或我分配给 div 的任何 id）。我有以下代码：

```
var link = "http://www.google.com"
var iframe = document.createElement('iframe');
iframe.frameBorder=0;
iframe.width="300px";
iframe.height="250px";
iframe.id="randomid";
iframe.setAttribute("src", link);
document.getElementById("ad54").appendChild(iframe);

<div id="ad54"></div> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-24T16:36:45.210

你应该在 window.onload 里面写这个

```
window.onload = function(){
   var link = "http://www.quirksmode.org/iframetest2.html"
var iframe = document.createElement('iframe');
iframe.frameBorder=0;
iframe.width="300px";
iframe.height="250px";
iframe.id="randomid";
iframe.setAttribute("src", link);
document.getElementById("ad54").appendChild(iframe);

} 
```

# javascript - Javascript函数调用不起作用

> ID：10302111
> 
> 赞同：-2
> 
> 时间：2012-04-24T16:33:14.540
> 
> 标签：javascript

```
<html>
<head>
<script type="text/javascript">
function displayDate()

{
alert("hi");
 var d=new Date();
 var theDay=d.getDay();
 switch (theDay)
 {
 case 5:
   document.write("Finally Friday");
   break;
 case 6:
   document.write("Super Saturday");
   break;
 case 0:
   document.write("Sleepy Sunday");
   break;
 default:
   document.write("I'm looking forward to this weekend!");
 }

</script>
</head>
<body>
<h1>My First Web Page</h1>
<p id="demo">This is a paragraph</p>
alert("before function call");
<button type="button" onclick="displayDate()">Display Date</button>
alert("after function call");
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T16:35:41.127

函数最后没有}

```
function displayDate()
{
alert("hi");
 var d=new Date();
 var theDay=d.getDay();
 switch (theDay)
 {
 case 5:
   document.write("Finally Friday");
   break;
 case 6:
   document.write("Super Saturday");
   break;
 case 0:
   document.write("Sleepy Sunday");
   break;
 default:
   document.write("I'm looking forward to this weekend!");
 }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T16:46:19.000

您只是在函数末尾缺少一个 } 。

当某些事情没有按预期工作时，检查语法是您要做的第一件事。此外，在测试时检查浏览器中是否存在 javascript 错误:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T16:41:34.633

我刚刚测试了您的代码，它正在进行一些修改：

```
<html>
<head>
<script type="text/javascript">
function displayDate()

{
alert("hi");
 var d=new Date();
 var theDay=d.getDay();
 switch (theDay)
 {
 case 5:
   document.write("Finally Friday");
   break;
 case 6:
   document.write("Super Saturday");
   break;
 case 0:
   document.write("Sleepy Sunday");
   break;
 default:
   document.write("I'm looking forward to this weekend!");
 }
}
</script>
</head>
<body>
<h1>My First Web Page</h1>
<p id="demo">This is a paragraph</p>

<button type="button" onclick="displayDate()">Display Date</button>

</body>
</html> 
```

# c# - 从字符串文件中获取特定元素

> ID：10302114
> 
> 赞同：0
> 
> 时间：2012-04-24T16:33:20.687
> 
> 标签：c#

大家好，我正在将文件读入字符串变量，但是我想知道将字符串中的特定元素仅返回到新变量中的最佳方法是什么。

我有以下字符串数据文件：

```
[TEST1]
mem.consumed.average = 965608688
cpu.usagemhz.average = 18653
Hosts = 3
Points = 1535
RAM = 1535.96
CPU = 191.79
Powered_on VMs = 70
Powered_on RAM = 1049.02
Powered_on CPU = 410.15
Powered_on Points = 1051
Provisioned VMs = 74
Provisioned RAM = 1057.02
Provisioned CPU = 416.59
Provisioned Points = 1059

[TEST2]
mem.consumed.average = 298762549
cpu.usagemhz.average = 7782
Hosts = 4
Points = 1535
RAM = 1535.96
CPU = 191.79
Powered_on VMs = 54
Powered_on RAM = 303.00
Powered_on CPU = 266.29
Powered_on Points = 303
Provisioned VMs = 60
Provisioned RAM = 330.00
Provisioned CPU = 295.28
Provisioned Points = 330 
```

我只想返回“Hosts”的值，所以在上面的例子中只有 Hosts = 3（来自 [TEST1]）和 Hosts = 4（来自 [TEST2]）。任何想法将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:40:58.857

使用正则表达式类。

[http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:36:00.437

我会逐行阅读并寻找`line.StartsWith("Hosts")`-如果是这样，请取出您需要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T16:40:05.073

如果您只想将其作为字符串进行搜索，为什么不使用 .indexOf 函数。

所以它会是

```
int a = data.indexOf('hosts');
int b = data.indexOf('points'); 
```

然后

```
string hosts data = data.Substring(a,b); 
```

您将不得不更改索引以获取确切的值，但这应该很容易，例如

```
string hosts data = data.Substring(a + 7,b - 2); 
```

# sql - 使用带有聚合函数的 WHERE 语句的 SQL

> ID：10302116
> 
> 赞同：2
> 
> 时间：2012-04-24T16:33:26.973
> 
> 标签：sql, count, group-by, aggregate-functions, where-clause

以下代码完全按照我想要的方式运行。现在我需要完成相同的任务，但只显示 COUNT 大于 1 的结果。 COUNT 旨在计算每个不同书籍 ID（出价）的分配表中的行数。

```
Prompt Task 1E7;
SELECT B.bid,title,COUNT(*)
FROM ALLOCATION A
INNER JOIN BOOK B
ON A.bid = B.bid
GROUP BY B.bid,title
ORDER BY COUNT(*),bid; 
```

我尝试简单地将 WHERE COUNT(*) > 1 放在几个不同的位置。这只是为 WHERE 行返回错误“SQL 命令未正确结束”。我还尝试了以下方法。

```
Prompt Task 1E7;
SELECT B.bid,title,COUNT(*)
FROM ALLOCATION A
INNER JOIN BOOK B
ON A.bid = B.bid
GROUP BY B.bid,title
WHERE (SELECT COUNT(*)
FROM ALLOCATION A
INNER JOIN BOOK B
ON A.bid = B.bid
GROUP BY B.bid,title) > 1
ORDER BY COUNT(*),bid; 
```

以及任何其他数量的小调整。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:34:42.527

可以使用以下方式过滤聚合`HAVING`：

```
SELECT  B.bid, title, COUNT(*) cnt
FROM    ALLOCATION A
INNER JOIN
        BOOK B
ON      A.bid = B.bid
GROUP BY
        B.bid, title
HAVING  COUNT(*) > 1
ORDER BY
        cnt, bid; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:40:02.810

您需要像其他海报建议的那样使用 HAVING 子句。供以后参考，这是一个很好的 SQL 命令参考：[http ://www.1keydata.com/sql/sql.html](http://www.1keydata.com/sql/sql.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T16:35:23.197

您需要该`HAVING`子句，该子句在汇总后按值过滤`GROUP BY`

# ruby-on-rails - Ruby on rails 脚本在 mongo 集合中添加新列，并为现有记录添加一些随机数据

> ID：10302117
> 
> 赞同：0
> 
> 时间：2012-04-24T16:33:28.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我想编写脚本来使用 Ruby on rails 为 mongo 中的现有集合插入一些随机数据和新列。

假设我有 Employee 集合，它有一些记录的 empid 名称地址，现在我想为员工集合添加新的列工资，其中包含所有现有的员工工资详细信息。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:57:25.683

您需要使用 $set 运算符更新员工集合中的每个文档来设置员工的薪水：

[http://api.mongodb.org/ruby/current/file.TUTORIAL.html#Updating_Documents_with_update](http://api.mongodb.org/ruby/current/file.TUTORIAL.html#Updating_Documents_with_update)

# python - 列出用户定义的变量，python

> ID：10302119
> 
> 赞同：5
> 
> 时间：2012-04-24T16:33:33.983
> 
> 标签：python, variables

我正在尝试遍历 python 脚本中设置的变量。我遇到了以下情况：

[枚举或列出 [您最喜欢的语言] 程序中的所有变量](https://stackoverflow.com/questions/430811/enumerate-or-list-all-variables-in-a-program-of-your-favorite-language-here)

在第一个例子中：

```
#!/us/bin/python                                                                                    

foo1 = "Hello world"
foo2 = "bar"
foo3 = {"1":"a", "2":"b"}
foo4 = "1+1"

for name in dir():
    myvalue = eval(name)
    print name, "is", type(name), "and is equal to ", myvalue 
```

它列出了存储在内存中的所有变量。我想隔离我在脚本中创建的变量，而不是列出默认创建的系统变量。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T16:41:22.383

如果你没有在你的变量前面加上任何下划线，你可以这样做：

```
#!/us/bin/python                                                                                    

foo1 = "Hello world"
foo2 = "bar"
foo3 = {"1":"a", "2":"b"}
foo4 = "1+1"

for name in dir():
    if not name.startswith('__'):
        myvalue = eval(name)
        print name, "is", type(myvalue), "and is equal to ", myvalue 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-24T16:45:02.030

您可以通过检查它们是否在内置`__builtins__`模块中来去除默认包含在模块中的变量，如下所示：

```
>>> x = 3
>>> set(dir()) - set(dir(__builtins__))
set(['__builtins__', 'x']) 
```

唯一没有剥离的是`__builtins__`它本身，这很容易成为特殊情况。

另请注意，如果您重新定义了任何内置名称，这将不起作用。你不应该在实践中这样做，但是很多人这样做，很多是偶然的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T18:29:51.020

这是解决方案。

```
#!/us/bin/python    

not_my_data = set(dir())

foo1 = "Hello world"
foo2 = "bar"
foo3 = {"1":"a", "2":"b"}
foo4 = "1+1"

my_data = set(dir()) - not_my_data

for name in my_data :
    myvalue = eval(name)
    print name, "is", type(name), "and is equal to ", myvalue 
```

但这是不好的做法。

你应该使用类似的东西

```
#!/us/bin/python    
my_data = dict()                                                                                   
my_data['foo1'] = "Hello world"
my_data['foo2'] = "bar"
my_data['foo1'] = {"1":"a", "2":"b"}
my_data['foo1'] = "1+1"

for name in my_data :
    myvalue = eval(my_data[name])
    print name, "is", type(name), "and is equal to ", myvalue 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-23T00:13:03.813

问题标题让我看到了这一点。但这不是我想要的。

自我回答如下

```
[s for s in dir() if not '__' in s] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-22T16:28:38.527

我想要更多类似于 matlab 'whos' 的东西，所以我把它烘焙了：gist [here](https://gist.github.com/dansteingart/2469cafd3044fc86305d)

```
import __main__
def whos(lss):
 fil = __main__.__file__
 thisthinghere = open(fil).read().split("\n")
 vs = []
 for l in thisthinghere:
    if l.find("=") > -1:
        vs.append(l.split("=")[0].strip())
 keys = lss.keys()
 out = {}
 for v in vs:
    try: 
        out[v] = lss[v]
    except:
        "not in list"
 keys = out.keys()
 keys.sort()
 for k in keys:
    val = str(out[k])
    if len (val) > 10:
        if val[-1] == ")":val = val[0:10]+"..."+val[-10:]
        elif val[-1] == "]" :val = val[0:10]+"..."+val[-10:]
        else: val = val[0:10]
    print k,":",val

 return out

#import into your script and call with whos(locals()) 
```

它似乎工作。它将打印变量空间，并将其作为字典返回，以便于酸洗/jsoning。

# api - 在（地理）地图上可视化社交网络

> ID：10302124
> 
> 赞同：0
> 
> 时间：2012-04-24T16:34:03.587
> 
> 标签：api, maps, visualization, social-networking, neo4j

我想在地图上显示社交网络，但我没有使用地图 API 的经验。

我认为在谷歌地图上绘制长/纬度相当简单。
但是，如果该点需要从它散开联系，并用线条指示网络，这可能会更难。

任何人都可以推荐一个已经可以做到这一点的库/API吗？
我特别需要一个可以很好地渲染*大量线和点（边缘和节点），并且可以放大它们的工具。*

我非常擅长 Python、Django 和 JavaScript，因此可以创建一个新的开源库来执行此操作，但我认为我应该先检查一个是否已经存在！如果没有，我正在考虑在 neo4j 和 d3 的力导向图之间创建一个混搭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:49:57.563

因此，在 Javascript 中，一个非常称职的库是 OpenLayers，例如 GeoJSON 示例，[http:](http://dev.openlayers.org/releases/OpenLayers-2.10/examples/geojson.html) //dev.openlayers.org/releases/OpenLayers-2.10/examples/geojson.html应该不难实现。还有其他的，比如谷歌地图等。

我喜欢你的别名。闻到 XKCD 的味道。

# sql - 如何在重启后修复 Yii 框架上的突然 CDbException（Active Record 查询不起作用）

> ID：10302128
> 
> 赞同：0
> 
> 时间：2012-04-24T16:34:23.743
> 
> 标签：sql, yii

我目前正在按照**“使用 Yii 进行敏捷 Web 应用程序开发”**一书的步骤进行操作，到目前为止，我设法在第 8 章完成了所有工作。但是现在，**在我关闭并打开**笔记本电脑后（升级了笔记本电脑的RAM），除了**Active Record 找不到数据库表**之外，一切似乎都正常工作，不仅在这个 web 应用程序中，而且还尝试了我拥有的旧功能和非常简单的演示，当模型类（扩展Yii 的 CActiveRecord 类）。

我在 Mac OS X Lion 10.7.3（2.4GHz Intel Core 2 Duo，8GB RAM MacBook Pro）上使用 XAMPP 和 MySQL 数据库（运行良好）。PHPUnit 在重新启动之前也可以正常工作。

我已经多次检查了 main.php 文件中**的“db”组件，并且 - 我认为 - 一切都很好：**

```
'db'=>array(
    'connectionString' => 'mysql:host=localhost;dbname=Customer',
    'emulatePrepare' => true,
    'username' => 'root',
    'password' => 'jasalo',
    'charset' => 'utf8',
), 
```

还尝试添加

```
'tablePrefix' => 'tbl_'
```

这是本书在其 web 应用程序中使用的参数（尽管它从不建议使用 tablePrefix 这样做）。

另一方面，当我通过 Yii 执行一个**简单的查询**时，它确实有效（我在一个简单的视图上尝试了这个，关于）：

```
var_dump(Yii::app()->db->createCommand('select * from tbl_user')->queryAll()); 
```

这是我得到的结果的一部分（这是正确的）：

```
array(3) { [0]=> array(9) { ["id"]=> string(1) "1" ["email"]=> string(22) "test1@notanaddress.com" ["username"]=> string(13) "Test_User_One" ["password"]=> string(32) "5a105e8b9d40e1329780d62ea2265d8a"... 
```

我什至尝试更改位于 webapp 的**index.php**文件中的 Yii 上的框架路径，我认为可能是另一个。**有任何想法吗？**

哦，这是我尝试使用 CActiveRecord 模型（类）时收到的错误消息：

```
CDb异常

在数据库中找不到活动记录类“用户”的表“tbl_user”。

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:38:15.507

我遇到了同样的问题，在我的开发环境（MAMP）中，我的模型中有以下工作：

```
public function tableName()
{
    return 'Nantivdb';
} 
```

其中“Nantivdb”是我扩展 CActiveRecord 的类的名称，我查询的表是“nantiv0”。

一旦投入生产，我必须改变：

```
public function tableName()
{
    return 'nantiv0';
} 
```

或者 yii 找不到表 'nantiv0'。

因此，我将在 /models/User.php 中进行以下更改：

```
public function tableName()
{
    return 'tbl_user';
} 
```

很抱歉没有提供更多解释...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:57:14.100

我发现这是一个权限问题。我刚刚通过 phpmyadmin 发现了这个问题，登录并尝试查看表的结构，它说它没有访问 /var/folders 的权限，所以我只是将其权限更改为 777（虽然有点不安全，但不是在我的情况下是一个问题，因为它位于单个用户环境中）：

```
sudo chmod -R 777 /var/folders 
```

# web-services - javax/wsdl/Operation.getExtensibilityElements 中的 jaxws noSuchMethodError

> ID：10302129
> 
> 赞同：2
> 
> 时间：2012-04-24T16:34:23.900
> 
> 标签：web-services, jaxb, jax-ws, webservice-client, spring-ws

当我在 IBM WAS 6.1 中创建一个 ws 客户端作为动态项目时，客户端工作得很好。

但是，当我们做同样的事情并尝试将客户端集成到具有许多其他 jar 的现有项目中时，我们会在尝试获取端口的引用之前收到以下错误，我们会收到此错误：

```
java.lang.NoSuchMethodError: javax/wsdl/Operation.getExtensibilityElements()Ljava/util/List; 
```

我不确定这是否与某些 jar 版本问题或某些 jar 冲突问题有关，因为现有项目有很多 jar。

调试时，我确实在 2 个 jars 下的类路径中看到了这个类：

1.  com.ibm.ws.runtime_6.1.0.jar
2.  com.ibm.jaxws.thinclient_6.1.0.jar

运行时具有带有 getExtensibilityElements 方法的 BindignOperation，但瘦客户端没有。

由于运行时位于插件文件夹中，它首先被加载，我认为这不是问题，因为其他一些项目具有相同的环境并且它可以工作但一组不同的罐子，因为有这么多罐子很难找出哪个一个可能是这个问题的候选人

我不认为网络服务有任何问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-06T22:35:46.157

我遇到了同样的问题，并想分享我的进展，以防万一它像我一样帮助遇到这个问题的人。

我能够找到[这个](http://mail-archives.apache.org/mod_mbox/axis-java-user/200707.mbox/%3C562242.59595.qm@web37302.mail.mud.yahoo.com%3E)，这建议通过在 parent-last 模式下为应用程序服务器使用单个类加载器来解决问题，您可以分别[在此处](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=%2Frzamy%2F50%2Fprogram%2Fclsiso.htm)和[此处](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Fcrun_classload.html)了解。

我不确定这是否有助于解决您的原始问题，但可能有助于解决类似问题。

# python - 为什么 sys.getrefcount() 返回 2？

> ID：10302133
> 
> 赞同：21
> 
> 时间：2012-04-24T16:34:34.507
> 
> 标签：python, garbage-collection

据我了解， sys.getrefcount() 返回对象的引用数，在以下情况下“应该”为 1：

```
import sys,numpy
a = numpy.array([1.2,3.4])
print sys.getrefcount(a) 
```

然而，结果是2！所以，如果我：

```
del a 
```

“numpy.array([1.2,3.4])”对象是否仍然存在（没有垃圾收集）？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-24T16:37:18.770

当您调用`getrefcount()`时，引用按值复制到函数的参数中，暂时增加对象的引用计数。这就是第二个参考的来源。

这在[文档](http://docs.python.org/library/sys.html#sys.getrefcount)中进行了解释：

> 返回的计数通常比您预期的高一，因为它包含（临时）引用作为 `getrefcount().`

至于你的第二个问题：

> 如果我“del a”，“numpy.array([1.2,3.4])”对象是否仍然存在（没有垃圾收集）？

到`getrefcount()`退出时，数组的引用计数将回到 1，随后`del a`将释放内存。

# java - 使用 netbeans 7.1 自动开发 osgi 包

> ID：10302134
> 
> 赞同：3
> 
> 时间：2012-04-24T16:34:42.517
> 
> 标签：java, maven, netbeans, osgi

我目前正在使用 Netbeans 7.1 开发一个 maven osgi 包。虽然从 netbeans 创建新的 maven osgi bundle 项目很容易，但我一直在为如何运行它而苦苦挣扎。简单地从 netbeans 运行它会给我一个错误，告诉我缺少要求（例如缺少 slf4j）。

然后我尝试了另一种方法。我在终端中运行了 Equinox，然后手动将我的项目 jar 安装到它。但是我还必须手动解决所有依赖项。

有没有办法从 OSGI 包中自动下载所有必需的依赖项并将其安装到正在运行的 OSGI 框架中？

谢谢之前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:47:17.133

AFAIK Netbeans 中的 OSGi 没有自动化（尽管我可能错了）。您可能在 Eclipse 中看到的支持仅适用于 Eclipse 插件而不是普通的 OSGi。

您最好的选择是进行一些集成测试或通过 maven 目标、[pax-exam](http://team.ops4j.org/wiki/display/paxexam/Pax+Exam)或[bndtools 启动](http://bndtools.org/)，甚至[pax-runner](http://team.ops4j.org/wiki/display/paxrunner/Pax+Runner)将允许您从 IDE/maven 启动。

但是我不知道有什么会自动解决所有依赖项（传递依赖项和您所依赖的 API 的实现会有问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:50:28.913

这是一个很大的痛苦，毫无疑问。我以前做的是做一个完整的构建（如果你已经正确配置了你的清单应该包括所有必要的依赖项），这将生成必要的 jar。然后我连接我的 Tomcat 以从我的目标存储库中获取 jar，并将其配置为自动热插拔。

如果您想从您的 netbeans 中运行您的应用程序服务器，这是一个偏好问题，但我更喜欢在我的 IDE 之外执行一个单独的 tomcat 实例。无论哪种方式，它都会起作用。

# android - 无法从我的应用程序打开电子市场应用程序

> ID：10302137
> 
> 赞同：4
> 
> 时间：2012-04-24T16:34:54.680
> 
> 标签：android, android-intent, google-play

我正在尝试使用以下方法从我的应用程序中打开市场应用程序：

```
Intent i = new Intent("Intent.ACTION_VIEW");
i.setData(Uri.parse("market://details?id=com.compamy.app"));
startActivity(i); 
```

但我没有*发现活动*错误。我正在使用真实设备并且我已经安装了市场。所以我的问题是：这里可以做什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T16:50:29.453

这里唯一的问题是 zapl 在评论中指出的（“”围绕动作）。文档（[http://developer.android.com/guide/publishing/publishing.html](http://developer.android.com/guide/publishing/publishing.html)）清楚地说明了如何使用它：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse("market://details?id=com.example.android"));
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:47:42.887

**官方文档链接：**

[http://developer.android.com/guide/publishing/publishing.html#marketintent](http://developer.android.com/guide/publishing/publishing.html#marketintent)

从您的 Android 应用程序打开应用程序详细信息页面

要从您的应用程序打开 Google Play 详细信息页面，请使用 ACTION_VIEW 操作创建一个意图并包含以下格式的数据 URI：

> 市场：//详情？id=

例如，您可以通过以下方式在 Google Play 中创建意图并打开应用程序的详细信息页面：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse("market://details?id=com.example.android"));
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T16:38:37.287

尝试这个：

```
Uri uri = Uri.parse("market://details?id=com.compamy.app");

Intent i = new Intent(Intent.ACTION_VIEW, uri);

startActivity(i); 
```

# ruby - class_eval 与 instance_eval

> ID：10302138
> 
> 赞同：8
> 
> 时间：2012-04-24T16:34:57.040
> 
> 标签：ruby, metaprogramming, instance-eval, class-eval

`class_eval`除了 之外，工作方式和`instance_eval`工作方式有什么不同`def`吗？内部`class_eval`块`def`为类本身定义方法（即实例方法），内部块为类`instance_eval` `def`的特征类定义方法（即类方法）。AFAIK 所有其他功能在这两种情况下的工作方式相同（例如`define_method`, `attr_accessor`, `class << self; end`, 定义常量）。这是真的吗？

**答案是**：`def`和`undef`和有不同的`alias`上下文。`class_eval``instance_eval`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T21:11:22.690

长话短说：

*   `Object.instance_eval &block`套：
    *   `self`至`Object`
    *   “当前班级”到[`Object.singleton_class`](http://ruby-doc.org/core/Object.html#method-i-singleton_class)
*   `Object.class_eval &block`套：
    *   `self`至`Object`
    *   “当前班级”到`Object`

“当前类”用于`def`、`undef`和`alias`以及常量和类变量查找。

* * *

现在，让我们看一下实现细节。

以下是在 C 中的实现方式[`module_eval`](https://github.com/ruby/ruby/blob/trunk/vm_eval.c#L1402)和[`instance_eval`](https://github.com/ruby/ruby/blob/trunk/vm_eval.c#L1331)实现方式：

```
VALUE rb_mod_module_eval(int argc, VALUE *argv, VALUE mod) {
    return specific_eval(argc, argv, mod, mod);
}

VALUE rb_obj_instance_eval(int argc, VALUE *argv, VALUE self) {
    VALUE klass;
    if (SPECIAL_CONST_P(self)) { klass = Qnil; }
    else { klass = rb_singleton_class(self); }
    return specific_eval(argc, argv, klass, self);
} 
```

两者都调用，[`specific_eval`](https://github.com/ruby/ruby/blob/trunk/vm_eval.c#L1281)它接受以下参数：`int argc`、`VALUE *argv`和。`VALUE klass``VALUE self`

注意：

*   `module_eval`将`Module`or`Class`实例作为两个`klass` *and传递* `self`
*   `instance_eval`将对象的*单例类*传递为`klass`

如果给定一个块，`specific_eval`将调用[`yield_under`](https://github.com/ruby/ruby/blob/trunk/vm_eval.c#L1242)，它接受以下参数`VALUE under`：`VALUE self`和`VALUE values`。

```
if (rb_block_given_p()) {
    rb_check_arity(argc, 0, 0);
    return yield_under(klass, self, Qundef);
} 
```

中有两条重要的行`yield_under`：

1.  `block.self = self;`

    这将`self`块的设置为接收器。

2.  `cref = vm_cref_push(th, under, NOEX_PUBLIC, blockptr);`

    [`cref`](http://ruby2cext.rubyforge.org/limitations.html#section7)是一个*链表*， 它指定“当前类”，用于`def`、`undef`和`alias`，以及常量和类变量查找。

    该行基本上将 设置`cref`为`under`。

    最后：

    *   当从 调用时`module_eval`，`under`将是`Class`or`Module` 实例。

    *   当从 调用时`instance_eval`，`under`将是 的单例*类*。 `self`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:23:22.273

`instance_eval`允许您直接访问实例的实例变量，并`self`用作对实例的引用。

# c++ - 从 Visual C++ 运行时工作，但有时不是独立的

> ID：10302139
> 
> 赞同：-1
> 
> 时间：2012-04-24T16:35:02.673
> 
> 标签：c++, sfml, visual-c++-2010

**实际问题：在 Visual C++ 2010（发布和调试模式）和独立运行之间有什么区别，不包括任何不会导致本文底部所述问题的内容？**

我的程序有一个**非常**具体的问题，所以我不打算发布代码。如果您想了解问题的详细信息以获得一些理解，我将它们发布在底部。相反，我问：在visual c++和standalone中运行有什么区别？

我正在使用 Visual C++ 2010，而我的程序正在使用 SFML 2.0。它在工作室中运行良好（我称它为工作室，因为它更容易键入），但是当在*某些计算机*上独立运行时，程序中只会出现一个错误，这与移动延迟有关，但其他部分不会。我找不到测试它的用户的计算机规格与他们是否工作之间的任何联系。

包括所有 dll 等（至少，我认为它们是 - 程序运行良好，如底部所述 - 也许某些用户安装了一些框架？）。在我的电脑上，它一直在工作室中工作，但不是独立的。在我的上网本上，它可以工作，在我的旧电脑上，它不能。我使用 vc++ 目录和链接器设置更改的唯一项目设置。

**问题详情：** 所有声音听起来都略有不同，并且可能存在高音背景噪音。角色移动、敌人移动和空格键延迟（应该是 0.5 秒）增加到大约 5 秒，但“生成像素”（游戏中箭头键的一个方面不是。

我再次强调它只发生在一些计算机上，包括我的，但在工作室中运行时总是有效。许多人已经测试了游戏，有些人报告了这个问题，有些人则不同。

[**不是问题的重点，但这里**有一点：如果您愿意帮助我，希望查看整个源代码，请访问：http: [//dl.dropbox.com/u/53835113 /EVERYTHING.zip](http://dl.dropbox.com/u/53835113/EVERYTHING.zip) [注意：忽略除了描述的问题之外的大量错误和内存泄漏：P]]

**编辑：重点不是我要调试我的程序！这是一个可选的额外。问题：在visual c++和standalone中运行有什么区别？**

**更多编辑：发现问题是由于帧时间不正确。不确定这是否提供了一些见解。**

感谢任何试图帮助我的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:07:46.077

SFML 中的 GetFrameTime() 在最近的版本中被删除，因为它返回自上一帧以来的时间，而不是自上次更新以来的时间。因此，它可能会返回 0。

# android - Android + Sencha Touch 文本输入重复且难以聚焦

> ID：10302147
> 
> 赞同：4
> 
> 时间：2012-04-24T16:35:31.327
> 
> 标签：android, cordova, sencha-touch

我有一个使用 PhoneGap 1.6 和 Sencha Touch 1.1.1 的 Android 应用程序。一个视图有一个文本输入字段，它在 Android 中的行为很奇怪：它会自我复制并且很难移除焦点。

我已经确定它是一个出现在“真实”输入字段之上的 WebTextView。我遇到的问题是用屏幕点击模糊文本字段非常困难，如果滚动父容器，WebTextView 不会随之滚动，因此您可以同时看到两者。

消除对元素的关注的唯一方法是在屏幕的各个部分猛烈点击，就像触发 Mavis Beacon 的挫败检测器一样。

我的实际问题是：我怎样才能完全关闭这个功能，或者至少解决它？期望用户除了在框外单击或按下设备上的后退按钮以停止在文本字段中输入之外的任何操作是不合理的。实际上，按 Back 只会收起软键盘并且不会放弃焦点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:45:57.363

这些是浏览器错误，由一些 CSS 标志触发。

解释错误：设备从网站内容创建某种“屏幕截图”。所有转换和过渡都是在实际页面的“屏幕截图”之上进行的。

如果您有输入元素，则会在“屏幕截图”之上呈现某种代理元素。有时这些代理元素在错误的位置。

如果您触发网站进行硬件加速，就会发生这种情况。您必须删除一些 CSS 定义：

```
transform(), translate(), transform3d(), translate3d(). 
```

*坏消息是：* 你无法解决这个问题，因为它是浏览器中的一个错误。

我有一些不同的安卓设备，都有不同的问题，一个修复会破坏另一个设备。

我认为这个 bug 永远无法解决，因为自从 android 4.1 和 chrome 以来，没有人关心嵌入式浏览器。

如果您可以禁用硬件加速，这可能会有所帮助。

*好消息是：* 有关于嵌入式 chrome-webview 的传言。

我开始写一些关于“新 IE”的博文：http: [//christian-kuetbach.de/blog/post/14](http://christian-kuetbach.de/blog/post/14)

# mongodb - 带有字符串_id和upsert的Mongoimport csv文件

> ID：10302149
> 
> 赞同：5
> 
> 时间：2012-04-24T16:35:37.910
> 
> 标签：mongodb, mongoimport

我正在尝试使用 mongoimport 在_id 中使用字符串值更新数据。由于 id 看起来像整数（即使它们在引号中），mongoimport 将它们视为整数并创建新记录而不是更新现有记录。

我正在运行的命令：

`mongoimport --host localhost --db database --collection my_collection --type csv --file mydata.csv --headerline --upsert`

mydata.csv 中的示例数据：

`{ "_id" : "0364", someField: "value" }`

结果将是 mongo 插入这样的记录：`{ "_id" : 364, someField: "value" }`而不是使用 _id 更新记录`"0364"`。

有谁知道如何使它`_id`视为字符串？

不起作用的事情：

*   用双双引号""0364""、双引号和单引号"'0364'"或'"0364"'包围数据
*   将空字符串附加到值：`{ "_id" : "0364" + "", someField: "value" }`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T17:43:34.540

刚刚遇到同样的问题并发现了一个替代方案。您可以通过将 CSV 转换为 JSON 并引用该字段来强制 Mongo 将字符串类型用于非字符串值。例如，如果您的 CSV 如下所示：

```
key value
123 foo
abc bar 
```

然后，您将获得键 123 的整数字段和键 abc 的字符串字段。如果您将其转换为 JSON，确保所有键都被引用，然后`--type json`在导入时使用，您最终会得到所需的行为：

```
{
    "123":"foo",
    "abc":"bar"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T17:52:46.687

不幸的是，现在没有办法强制将类似数字的字符串解释为字符串：

[https://jira.mongodb.org/browse/SERVER-3731](https://jira.mongodb.org/browse/SERVER-3731)

您可以使用 Python 或其他您熟悉的语言编写脚本，如下所示：

```
import csv, pymongo

connection = pymongo.Connection()
collection = connection.mydatabase.mycollection
reader = csv.DictReader(open('myfile.csv'))
for line in reader:
    print '_id', line['_id']
    upsert_fields = {
        '_id': line['_id'],
        'my_other_upsert_field': line['my_other_upsert_field']}

    collection.update(upsert_fields, line, upsert=True, safe=True) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-28T00:11:36.083

我能够为数字字符串添加前缀，这对我有用。例子：

00012345 被导入为 12345（Int 类型）字符串00012345 被导入为 string00012345（字符串类型）

我的来源是一个 SQL 数据库，所以我只是做了

```
select 'string'+column as name 
```

当然，你还需要做一些后处理来解析字符串，但比将一个相当大的 tsv 文件转换为 json 的工作量要少得多。

我还在上面的 jira 链接中添加了 +1 以进行增强。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-16T13:49:30.587

我遇到了同样的问题。

我觉得最简单的方法是使用**在线工具****将CSV文件转换为JSON文件**，然后导入。

 **这是我使用的工具：

**[http://www.convertcsv.com/csv-to-json.htm](http://www.convertcsv.com/csv-to-json.htm)**

它允许您将 CSV 文件的整数值用双引号括起来，用于 JSON 文件。

如果您在导入此 JSON 文件时遇到问题并遇到错误，只需将 --jsonArray 添加到您的导入命令。它肯定会起作用。

```
mongoimport --host localhost --db mydb -c mycollection --type json --jsonArray --file <file_path> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-31T15:31:18.930

作为@Jesse 的替代方案，您可以在mongo 控制台中执行类似的操作，例如

```
db.my_collection.find().forEach(function (obj) {
  db.my_collection.remove({_id: obj._id); // remove the old one
  obj._id = '' + obj._id; // change to string
  db.my_collection.save(obj); // resave
}); 
```

对于非`_id`字段，您可以简单地执行以下操作：

```
db.my_collection.find().forEach(function (obj) {
  obj.someField = '' + obj.someField; // change to string
  db.my_collection.save(obj); // resave
}); 
```**

# video - 使用 ffmpeg 以绝对结束位置剪切视频

> ID：10302156
> 
> 赞同：2
> 
> 时间：2012-04-24T16:35:46.820
> 
> 标签：video, ffmpeg

我想使用 ffmpeg 将视频分成几部分。我有两个绝对的“位置”，而*不是*开始和持续时间。所以我不能这样使用它：

```
ffmpeg -ss 00:00:12.12 -t 00:00:14.13 -i foo.mov... 
```

（再次，-t 之后的时间不是持续时间）我是否必须计算 to 位置之间的持续时间，还是 ffmpeg 可以为我做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-04T17:50:44.467

从 FFmpeg 1.2（2013 年 3 月发布）开始，该`-to`选项可用于`-t`指定结束时间而不是持续时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T14:38:37.280

使用这个 python 脚本

```
#!/bin/python
from sys  import argv
from os   import system

ffm = 'ffmpeg -i "' # input file
aud = '" -acodec libfaac -aq  64 -ac 2 -ar 44100'
vid =  ' -vcodec libx264 -crf 25 -r 25 -subq 9'
c=0
def encode(video,option=''):
   global c;   c+=1
   out = ' "'+ video + str(c) + '.mp4"'
   cmd = ffm + video + aud + vid + option + out
   print cmd;  system(cmd)

def seconds(time):
   t = [float(x)  for x in time.split(':')]
   if len(t)==1:  return t[0]
   if len(t)==2:  return t[1]+t[0]*60
   if len(t)==3:  return t[2]+t[1]*60+t[0]*3600

def split(time):
   (start,end) = [seconds(x) for x in time.split()]
   return ' -ss %s -t %s' % (start,end-start)

for slice in argv[2].split(','):
  encode(argv[1],split(slice))
#  $ python split.py "video.mpg" "1:50 9:10,7:30 15:30,13:30 20:10" 
```

阅读**man ffmpeg**我看到了几种公认的**-ss**和**-t格式**

这使您可以重叠切片。并且可以以毫秒精度分割。

```
$ python split.py "video.mpg" "55:30.356 1:01:10.895" 
```

您必须根据自己的喜好编辑**acodec**和**vcodec**。

我推荐使用高于版本 100的**libx264 内核的这些选项。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T06:38:47.460

使用 -ss 标记您的开始，使用 -t 标记最终持续时间。-t 选项表示两个绝对位置之间的差异，您必须计算。

# linq-to-xml - LINQ to XML - 获取给定 XElement 的文本内容，但不包含子元素的文本内容

> ID：10302158
> 
> 赞同：8
> 
> 时间：2012-04-24T16:35:48.413
> 
> 标签：linq-to-xml

我刚刚开始使用[LINQ to XML](http://en.wikipedia.org/wiki/Language_Integrated_Query#LINQ_to_XML_.28formerly_called_XLINQ.29)，我无法获取给定 XElement 的文本内容，而没有获取所有子元素的文本内容。

例如，如果我有以下 XML 文档：

```
<?xml version="1.0" encoding="utf-8" ?>
<root xmlns="example.org/rootns">This is root value
    <children>
        <child name='child 1'>value 1</child>
        <child name='child 2'>value 2
            <grandchild name='grandchild A'>value A</grandchild>
        </child>
    </children>
</root> 
```

我使用以下测试方法：

```
private static void Test()
{
    string xString = @"<?xml version=""1.0"" encoding=""utf-8"" ?><root xmlns=""example.org/rootns"">This is root value<children><child name='child 1'>value 1</child><child name='child 2'>value 2<grandchild name='grandchild A'>value A</grandchild></child></children></root>";

    var xDoc = XDocument.Parse(xString);

    XNamespace ns = @"example.org/rootns";
    string elemName = "child";

    var xElems = from e in xDoc.Descendants(ns + elemName)
                 select e;

    foreach (var xElem in xElems)
    {
        Console.WriteLine(xElem.Value);
    }
} 
```

然后我得到两行输出：

```
 value 1
    value 2value A 
```

第一行显示了第一个孩子的内容——这没关系。然而，第二行不仅显示了第一个孩子的文本内容，还显示了该孩子的任何后代。

如何在没有孙子文本内容的情况下仅获取第二个孩子的文本内容？

另请注意，该示例只是一个简单的示例来说明我在做什么，在生产中我不一定知道子元素的名称（如果有的话），但我应该能够获得我需要的元素来获取文本内容来自。

* * *

Jon Skeet 的回答有助于解决问题。只需将 foreach 循环替换为以下内容即可选择文本 XNodes 而不是 XElement 的值：

```
...
foreach (var xElem in xElems)
{
    var values = from n in xElem.Nodes()
                 where n.NodeType == System.Xml.XmlNodeType.Text
                 select n;

    if (values != null && values.Count() > 0)
        Console.WriteLine(values.First());
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T16:45:40.217

*如果有多个*文本节点，你想做什么？例如，您可以将它们全部连接在一起：

```
var text = string.Join("", element.Nodes.OfType<XText>().Select(x => x.Value)); 
```

编辑：如果你只想要一个元素，它比你展示的要容易：

```
var textNode = xElem.Nodes().OfType<XText>().FirstOrDefault();
if (textNode != null)
{
    Console.WriteLine(textNode.Value);
} 
```

# tomcat - BPS 部署到 Tomcat 或其他应用服务器

> ID：10302160
> 
> 赞同：0
> 
> 时间：2012-04-24T16:36:11.403
> 
> 标签：tomcat, deployment

我阅读了将 BPS 部署到 Tomcat 的知识库/库说明。我想验证实际上在 3.0 版（包括人工任务组件）中，这种类型的部署将继续受到支持，并且 BPS 的所有特性和功能都将按预期运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:25:21.557

我们不鼓励将 WSO2 产品安装在其他 AppServer 之上，并且我们决定从下一个主要版本开始不再支持 WSO2 平台和产品的 webapp 部署模式。

WSO2 平台是一个成熟的云原生中间件平台。这意味着，该平台有自己的一套复杂性，比典型的 web 应用程序要复杂得多。因此，将它安装在不同的 AppServer 之上极大地限制了平台的功能，并且在结合宿主 AppServer 的复杂性时引入了很多复杂性。

# c# - c# 音频库 - wmp 或其他

> ID：10302161
> 
> 赞同：1
> 
> 时间：2012-04-24T16:36:14.667
> 
> 标签：c#, audio, wmp

我正在寻找一个免费（用于商业用途）的库，它可以播放 wav 并支持播放越来越慢 - 播放速度。NAudio 不支持。

我尝试使用 WMP 播放器。它支持这一点，但这是一个小问题。如果我尝试编写一个示例应用程序，一切正常。当我将代码移至生产环境时，应用程序崩溃了。.NET Framework 显示 System.BadImageFormatException。我“谷歌”了一下，案例证明是编译模式。在示例应用程序中，我使用混合平台，但它可能编译为 x86。在生产中，所有平台都必须编译为任何平台。

WMP 库（Interop.WmpLib 和 Interop.axWmpLib）是 COM 并且仅在 32 位上编译，所以我不能在任何平台上使用它 - 我不能为 x86 更改平台。

有人可能已经解决了这个问题 - 其他使用 x86/x64 的库或在 64 位中使用 WMP Lib 的任何提示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:19:42.747

有一个用于这种转换的流行库，称为[SoundTouch](http://www.surina.net/soundtouch/)。从他们的网站：

> SoundTouch 是一个开源音频处理库，用于更改音频流或音频文件的速度、音高和播放速率

Soundtouch[是根据 GNU Lesser General Public License (LGPL) 发布的](http://www.surina.net/soundtouch/#features)，因此您可以在商业项目中使用它。

soundtouch 有一个名为[soundtouchnet](http://code.google.com/p/soundtouchnet/)的 .net 包装器，他们有一个将这个包装器与 NAudio 一起使用的示例：[如何将 NAudio 与 SoundTouch 一起使用](http://code.google.com/p/soundtouchnet/wiki/UsingNAudio)

SoundTouchNet 也是 LGPL。

# python - 你如何模拟一个在单元测试中应用了装饰器的函数？

> ID：10302162
> 
> 赞同：3
> 
> 时间：2012-04-24T16:36:15.683
> 
> 标签：python, unit-testing, mocking

```
@lolcat_decorator1
@loldog_decorator2
@lolrat_decorator3
def lolanimal(*args, **kwargs):
  .... 
```

我相信我会分别对这些装饰器进行单元测试。但是这些装饰器会先处理传递给的参数`lolanimal`，然后再`lolanimal`处理那些修改过的参数（其中一个装饰器可能会插入新的关键字参数`**kwargs`。）

那么模拟它的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:05:21.770

我的第一个想法是创建一个`_lolanimal`封装所有实际功能的方法`lolanimal`，然后只`lolanimal`在`_lolanimal`. `_lolanimal`然后，您可以使用您完全控制的数据运行所有测试。

您还可以创建第二个装饰器，它会在第一个装饰器之前读取配置值或某种测试模式的东西，`lolspecific`如果配置值是 true，它将覆盖装饰器......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T07:42:29.780

我的第一个想法是你应该将装饰器视为函数实现的一部分，并对“函数”进行单元测试，但希望你不需要将依赖项注入这些装饰器 - 如果你这样做了，那么 Silas Ray 的回答将需要考虑。

# android - 关于android Drawable getBounds return Rect(0, 0 - 0, 0)

> ID：10302163
> 
> 赞同：6
> 
> 时间：2012-04-24T16:36:27.513
> 
> 标签：android, drawable

我想获得可绘制的边界，但随后我使用 getBounds 或 copyBounds 方法。它们都返回 Rect(0, 0 - 0, 0)。像这样的代码

```
 Drawable marker = getResources().getDrawable(
            R.drawable.tbar_single_pressed);
    Rect copyRect = marker.copyBounds();
    Rect getRect= marker.getBounds(); 
```

那么结果 copyRect 是 Rect(0, 0 - 0, 0) getRect 也是 Rect(0, 0 - 0, 0)

为什么？标记不为空，我有 res tbar_single_pressed....

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T16:41:52.827

绘图没有尺寸，除非它们已经被绘制。如果你想获得你传入的图像的大小，你可以创建你自己的矩形`drawable.getIntrinsicWidth()`和`drawable.getIntrinsicHeight()`

# android - 将计算变量分配给共享偏好

> ID：10302165
> 
> 赞同：0
> 
> 时间：2012-04-24T16:36:39.093
> 
> 标签：android, sharedpreferences

在下面的代码中，用户输入一组属性，然后需要存储它们，然后使用 CaluculateCalories() 计算它返回我也想存储在 sharedpreferences 中的卡路里数 (Calnum)。怎么可能做到这一点？这是一段代码，我只需要在 Savepreferences 中添加一些行，我只是不知道如何。

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.createprofile);
    SharedPreferences customSharedPreference = getSharedPreferences(
            "myCustomSharedPrefs", Activity.MODE_PRIVATE);

    name = (EditText) findViewById(R.id.namefield);
    name.setText(customSharedPreference.getString("namepref", ""));

    age = (EditText) findViewById(R.id.agefield);
    // int Age = Integer.parseInt(age.getText().toString());
    age.setText(customSharedPreference.getString("agepref", ""));

    genderradiogroup = (RadioGroup) findViewById(R.id.radioGroup2);
    rb_male = (RadioButton) findViewById(R.id.maleradiobutton);
    rb_female = (RadioButton) findViewById(R.id.femaleradiobutton);
    genderradiogroup.check(customSharedPreference.getInt("genderprefs",
            rb_male.getId()));

    weight = (EditText) findViewById(R.id.weightfield);
    // int Weight = Integer.parseInt(weight.getText().toString());
    weight.setText(customSharedPreference.getString("weightpref", ""));

    height = (EditText) findViewById(R.id.heightfield);
    // int Height = Integer.parseInt(height.getText().toString());
    height.setText(customSharedPreference.getString("heightpref", ""));

    levelofactivity = (RadioGroup) findViewById(R.id.radioGroup3);
    rb_light = (RadioButton) findViewById(R.id.lightradiobutton);
    rb_moderate = (RadioButton) findViewById(R.id.moderateradiobutton);
    rb_heavy = (RadioButton) findViewById(R.id.heavyradiobutton);
    levelofactivity.check(customSharedPreference.getInt("levelpref",
            rb_light.getId()));

    Button addUser = (Button) findViewById(R.id.checkcreateprofilebutton);

    addUser.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            savePreferences();

        }
    });

}

private void savePreferences() {

    SharedPreferences customSharedPreference = getSharedPreferences(
            "myCustomSharedPrefs", Activity.MODE_PRIVATE);
    SharedPreferences.Editor editor = customSharedPreference.edit();
    editor.putString("namepref", name.getText().toString());
    editor.putString("agepref", age.getText().toString());
    editor.putInt("genderprefs", genderradiogroup.getCheckedRadioButtonId());
    editor.putString("heightpref", height.getText().toString());
    editor.putString("weightpref", weight.getText().toString());
    editor.putInt("levelpref", levelofactivity.getCheckedRadioButtonId());

    editor.commit();
    finish();

}

public float calculateCalories(int age, int weight, int height, String level) {

    if (rb_male.isChecked()) {

        bmr = 66.5f + (13.75f * weight) + (5.003f * height)
                - (6.755f * age);

        if (rb_light.isChecked()) {
            calnum = bmr * 1.375f;
        }
        if (rb_moderate.isChecked()) {
            calnum = bmr * 1.55f;
        }
        if (rb_heavy.isChecked()) {
            calnum = bmr * 1.725f;
        }

    } else if (rb_female.isChecked()) {

        bmr = 665 + (9.563f * weight) + (1.850f * height) - (4.676f * age);

        if (rb_light.isChecked()) {
            calnum = bmr * 1.375f;
        }
        if (rb_moderate.isChecked()) {
            calnum = bmr * 1.55f;
        }
        if (rb_heavy.isChecked()) {
            calnum = bmr * 1.725f;
        }

    }
    return calnum;

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:48:18.857

您可以像设置任何其他 SharedPreference 一样设置它。你有什么问题？你试过什么？

# wpf - 在 WPF 数据网格、组合框模板列上单击编辑

> ID：10302173
> 
> 赞同：3
> 
> 时间：2012-04-24T16:37:14.100
> 
> 标签：wpf, wpfdatagrid

我有一个包含三列的网格：

1.  友好名称
2.  大陆名称
3.  国家的名字

第一列是可编辑的文本框列。第二列是显示大陆列表的组合框。第 3 列是一个组合框，显示基于在第 2 列中选择的大陆的国家列表。我想为这些列实现单击。我尝试了此链接中给出的解决方案 [Single click edit in WPF DataGrid](https://stackoverflow.com/questions/3426765/single-click-edit-in-wpf-datagrid)

但这仅适用于第一列，而不适用于其他两个 (DataGridTemplateColumn) 列。

这怎么可能。请建议。下面给出了示例 XAML 和数据描述。

```
<DataGrid Grid.Row="1" VerticalAlignment="Top"
                                   ItemsSource="{Binding Path=GeographyData,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                  Style="{StaticResource DataGridStyleNormal}">
                            <DataGrid.Columns>
                                <DataGridTextColumn Width="*" Header="Friendly name" Binding="{Binding Path=FriendlyName,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
                                <!--FilterDef -->
                                <DataGridTemplateColumn Width="*"
                                                        Header="Continents">
                                    <DataGridTemplateColumn.CellEditingTemplate>
                                        <DataTemplate>
                                            <ComboBox SelectedValue="{Binding ContinentId, Mode=TwoWay}"
                                                      SelectedValuePath="ID"
                                                      DisplayMemberPath="Name"
                                                      ItemsSource="{Binding Path=DataContext.ContinentsAndCountries,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type DataGrid}}}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellEditingTemplate>
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock>
                                               <TextBlock.Text>
                                                    <MultiBinding Converter="{StaticResource ContinentCaptionConverter}">
                                                          <Binding Path="ContinentId"/>
                                                          <Binding Path="DataContext.ContinentsAndCountries" RelativeSource="{RelativeSource Mode=FindAncestor,AncestorType={x:Type DataGrid}}"/>
                                                        </MultiBinding>
                                                </TextBlock.Text>
                                            </TextBlock>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <!--Level-->
                                <DataGridTemplateColumn Width="*"
                                                        Header="Countries">
                                    <DataGridTemplateColumn.CellEditingTemplate>
                                        <DataTemplate>
                                            <ComboBox SelectedValue="{Binding CountryId, Mode=TwoWay}"
                                                      SelectedValuePath="ID"
                                                      DisplayMemberPath="Name">
                                                <ComboBox.ItemsSource>
                                                    <MultiBinding Converter="{StaticResource CountryValuesConverter}">
                                                        <Binding Path="DataContext.ContinentsAndCountries" RelativeSource="{RelativeSource Mode=FindAncestor,AncestorType={x:Type DataGrid}}"/>
                                                        <Binding Path="ContinentId"/>
                                                    </MultiBinding>
                                                </ComboBox.ItemsSource>
                                            </ComboBox>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellEditingTemplate>
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock>
                                               <TextBlock.Text>
                                                    <MultiBinding Converter="{StaticResource CountryCaptionConverter}">
                                                            <Binding Path="DataContext.ContinentsAndCountries" RelativeSource="{RelativeSource Mode=FindAncestor,AncestorType={x:Type DataGrid}}"/>
                                                            <Binding Path="ContinentId"/>
                                                            <Binding Path="CountryId"/>
                                                        </MultiBinding>
                                                </TextBlock.Text>
                                            </TextBlock>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid> 
```

注意：数据“ContinentsAndCountries”是一个可观察的主从数据集合。

*   吉里哈

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T15:02:58.847

我通过设置组合框加载事件来做到这一点

```
private void DataGridComboboxTemplate_Loaded(object sender, RoutedEventArgs e)
    {
        if (sender != null)
        {
            ComboBox cmb = sender as ComboBox;
            cmb.IsDropDownOpen = true;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-25T07:26:17.077

对不起，他死了；我终于想出了如何制作真正的单击 UX。您必须拦截 DataGridCell 的 OnGotFocus 事件，将单元格的模式设置为 IsEditing，然后在*CellEditingTemplate*中拦截 Actor 控件的 Loaded 事件：

```
<Window.Resources>
    <Style
        x:Key="AutoEditModeOnClick"
        TargetType="{x:Type DataGridCell}">

        <EventSetter Event="GotFocus" Handler="DataGridCell_OnGotFocus" />
    </Style>
</Window.Resources>

<DataGrid.Columns>
    <DataGridTemplateColumn
        CellStyle="{StaticResource AutoEditModeOnClick}"
        Header="Score">

        <!-- Example with ComboBox -->

        <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
                <!-- Some more XAML -->
            </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>

        <DataGridTemplateColumn.CellEditingTemplate>
            <DataTemplate>
                <!-- Some more XAML -->
                <ComboBox
                    DisplayMemberPath="Description"
                    SelectedValuePath="RecordID"
                    SelectedValue="{Binding Score,
                        TargetNullValue=0,
                        UpdateSourceTrigger=PropertyChanged}"
                    ItemsSource="{Binding DataContext.ScoreOptions,
                        RelativeSource={RelativeSource
                            AncestorType={x:Type DataGrid}}}"
                    Loaded="Combobox_Loaded"/>
            </DataTemplate>
        </DataGridTemplateColumn.CellEditingTemplate>
    </DataGridTemplateColumn>

    <DataGridTemplateColumn
        CellStyle="{StaticResource AutoEditModeOnClick}"
        Header="Comment">

        <!-- Example with TextBox -->

        <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
                <!-- Some more XAML -->
            </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>

        <DataGridTemplateColumn.CellEditingTemplate>
            <DataTemplate>
                <!-- Some more XAML -->
                <TextBox
                    Loaded="TextBox_Loaded"
                    Text="{Binding Comment,
                        UpdateSourceTrigger=LostFocus}"/>
            </DataTemplate>
        </DataGridTemplateColumn.CellEditingTemplate>
    </DataGridTemplateColumn>
</DataGrid.Columns> 
```

在您的代码隐藏中，您需要三个处理程序；一个用于单元格，一个用于每种类型的控件（组合框、文本框）：

```
 /// <summary>
    /// Skips the 'DataGridCell.Focus' step and goes straight into IsEditing
    /// </summary>
    private void DataGridCell_OnGotFocus(object sender, RoutedEventArgs e)
    {
        DataGridCell cell = sender as DataGridCell;
        cell.IsEditing = true;
    }

    /// <summary>
    /// Skips the 'IsEditing' step and goes straight into IsDropDownOpen
    /// </summary>
    private void Combobox_Loaded(object sender, RoutedEventArgs e)
    {
        ComboBox comboBox = sender as ComboBox;
        comboBox.IsDropDownOpen = true;
    }

    /// <summary>
    /// Skips the 'IsEditing' step and goes straight into Focus
    /// </summary>
    private void TextBox_Loaded(object sender, RoutedEventArgs e)
    {
        TextBox textBox = sender as TextBox;
        textBox.Focus();
    } 
```

# google-maps - 如何从 google/bing 地图获取顶点数据？

> ID：10302176
> 
> 赞同：1
> 
> 时间：2012-04-24T16:37:31.810
> 
> 标签：google-maps, bing-maps, bing

我正在尝试开发一个使用来自 google/bing 地图的信息的应用程序，但我需要顶点数据来重新创建道路，并且我无法使用图像，因为我无法获得道路名称和高度信息。

我需要街道的顶点/节点（带有纬度、经度、高度、街道名称）并且没有视觉数据。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:36:26.597

Open Street Map 绝对是解决这个问题的方法——从 Bing/Google 中提取顶点信息在技术上既困难又违反使用条款。OSM 数据在许多情况下质量更好，更重要的是，在 CC-BY-SA 许可下可以免费使用。

您可能还需要一个空间数据库来存储信息。我写了几篇关于将 OSM 数据加载到 SQL Server 中的文章，您可能会发现这些文章很有帮助。例如： [http ://alastaira.wordpress.com/2011/04/15/loading-open-street-map-data-in-sql-server-part-ii-ways/](http://alastaira.wordpress.com/2011/04/15/loading-open-street-map-data-in-sql-server-part-ii-ways/)

# rest - 连字符、下划线或驼峰式作为 URI 中的单词分隔符？

> ID：10302179
> 
> 赞同：614
> 
> 时间：2012-04-24T16:37:34.527
> 
> 标签：rest, url, uri, restful-url

我正在为 Intranet 应用程序设计基于 HTTP 的 API。我意识到这在宏伟的计划中是一个很小的问题，但是：**我应该使用连字符、下划线还是驼峰式来分隔 URI 中的单词？**

* * *

以下是我的初步想法：

**骆驼香烟盒**

*   如果服务器不区分大小写，则可能出现问题
*   似乎在查询字符串键（[http://api.example.com?**searchQuery**=...](http://api.example.com?**searchQuery**=...)）中有相当广泛的使用，但在其他 URI 部分没有

**连字符**

*   比其他替代品更美观
*   似乎被广泛用于 URI 的路径部分
*   在野外从未见过连字符的查询字符串键
*   *可能*对 SEO 更好（这可能是一个神话）

**下划线**

*   编程语言可能更容易处理
*   几个流行的 API（Facebook、Netflix、~~StackExchange~~等）在 URI 的所有部分都使用下划线。

我倾向于对所有内容都使用下划线。大多数大玩家都在使用它们这一事实令人信服（请参阅[https://stackoverflow.com/a/608458/360570](https://stackoverflow.com/a/608458/360570)）。

* * *

## 回答 #1

> 赞同：617
> 
> 时间：2013-08-26T18:32:22.967

您应该在可抓取的 Web 应用程序 URL 中使用连字符。为什么？因为连字符分隔单词（以便搜索引擎可以索引单个单词），并且连字符不是[单词字符](http://msdn.microsoft.com/en-us/library/20bw873z.aspx#WordCharacter)。下划线是一个单词字符，意味着它应该被视为单词的一部分。

在 Chrome 中双击：camelCase在 Chrome 中双击
：under_score 在 Chrome 中
双击：连字符

看看 Chrome（我听说 Google 也制作了一个搜索引擎）如何只认为其中一个是两个词？

`camelCase`并且`underscore`还要求用户使用`shift`密钥，而`hyphenated`没有。

因此，如果您应该在可抓取的 Web 应用程序中使用连字符，为什么还要费心在 Intranet 应用程序中做一些不同的事情呢？少一件事要记住。

* * *

## 回答 #2

> 赞同：284
> 
> 时间：2013-08-26T17:38:01.627

REST API 的标准最佳实践是使用**连字符**，而不是驼峰式或下划线。

这来自 Oreilly 的 Mark Masse 的“REST API 设计规则手册”。

另外，请注意 Stack Overflow 本身在 URL 中使用连字符：`.../hyphen-underscore-or-camelcase-as-word-delimiter-in-uris`

和 WordPress 一样：http: [//inventwithpython.com/blog/2012/03/18/how-much-math-do-i-need-to-know-to-program-not-that-much-actually](http://inventwithpython.com/blog/2012/03/18/how-much-math-do-i-need-to-know-to-program-not-that-much-actually)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-12-03T15:48:22.913

虽然*我建议使用连字符，*但我还将假设一个不在您列表中的答案：

**什么都没有**

*   我公司的 API 有类似的 URI `/quotationrequests/`，`/purchaseorders/`等等。
*   尽管您说它是一个 Intranet 应用程序，但您将 SEO 列为一项好处。Google 确实匹配 URL 中的模式 /foobar/ 以查询`?q=foo+bar`
*   我*真的希望您不要像*[@ServAce85](https://stackoverflow.com/users/102067/servace85)建议的那样考虑对用户传递到地址栏的任意字符串执行 PHP 调用！

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2020-04-30T16:26:13.060

简短的回答：

## 以连字符作为分隔符的小写单词

长答案：

**URL 的目的是什么？**

如果指向一个地址是答案，那么缩短的 URL 也可以很好地工作。如果我们不让它易于阅读和维护，它就不会帮助开发人员和维护人员。它们代表服务器上的一个实体，因此必须按逻辑命名。

[Google 建议使用连字符](https://support.google.com/webmasters/answer/76329?hl=en)

> 考虑在 URL 中使用标点符号。URL [http://www.example.com/green-dress.html](http://www.example.com/green-dress.html)比[http://www.example.com/greendress.html](http://www.example.com/greendress.html)对我们有用得多。我们建议您在 URL 中使用连字符 (-) 而不是下划线 (_)。

来自编程背景，camelCase 是命名联合词的流行选择。

但是[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986)将 URL 定义为对 URL 的不同部分区分大小写。由于 URL 区分大小写，因此保持低调（小写）始终是安全的，并且被认为是一个很好的标准。现在这把骆驼箱从窗外拿出来了。

来源：[https ://metamug.com/article/rest-api-naming-best-practices.html#word-delimiters](https://metamug.com/article/rest-api-naming-best-practices.html#word-delimiters)

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2012-10-31T13:25:43.040

一般来说，它不会产生足够的影响，特别是因为它是一个*Intranet*应用程序，而不是一个通用的 Internet 应用程序。特别是，因为它是*Intranet*，所以 SEO 不是问题，因为您的 Intranet 不应该被搜索引擎访问。（如果是，它不是 Intranet 应用程序）。

任何值得一提的框架要么已经有默认的方法来做到这一点，要么很容易改变它处理多词 URL 组件的方式，所以我不会太担心。

也就是说，这就是我如何看待各种选项：

**连字符**

*   连字符的最大危险是相同的字符（通常）也用于减法和数字否定（即*减号*或*负*号）。
*   连字符在 URL 组件中*感觉*很尴尬。它们似乎只在 URL 末尾用于分隔文章标题中的单词才有意义。或者，例如，为了 SEO 和用户清晰目的而添加到 URL 末尾的 Stack Overflow 问题的标题。

**下划线**

*   同样，他们在 URL 组件中感觉不对。它们打破了 URL 的流程（和美观/简单），因为它们本质上在干净、流畅的 URL 中间添加了一个大而沉重的明显空间。
*   它们倾向于与下划线融为一体。如果您希望您的用户将您的 URL 复制粘贴到 MS Word 或其他类似的文本编辑程序中，或者任何其他可能获取 URL 并使用下划线设置样式的地方（就像*传统*上的链接一样），那么您可能想要避免使用下划线作为单词分隔符。特别是在打印时，带有下划线的带下划线的 URL 往往看起来像是有*空格*而不是下划线。

**骆驼香烟盒**

*   到目前为止，我最喜欢它，因为它使 URL 看起来更流畅，并且没有前两个选项的任何错误。
*   对于难以区分大写和小写的人来说，阅读起来可能会*稍微*`/`困难一些，但这在 URL 中应该不是什么大问题，因为大多数“单词”应该是 URL 组件并由无论如何分隔. 如果您发现您有一个超过 2 个“单词”长度的 URL 组件，您可能应该尝试为该概念找到一个更好的名称。
*   它*确实*存在区分大小写的问题，但大多数平台都可以调整为区分大小写或不区分大小写。任何这只是2 种情况下的*真正*问题：a.) 人类输入 URL，b.) 程序员（因为我们不是人类）输入 URL。拼写错误*总是*一个问题，无论区分大小写，所以这是没有什么不同，所有一个案例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-14T15:40:34.930

推荐使用spine-case（RFC3986强调），谷歌、PayPal等大公司都在使用。

来源：- [https://blog.restcase.com/5-basic-rest-api-design-guidelines/](https://blog.restcase.com/5-basic-rest-api-design-guidelines/)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-06-09T23:49:17.977

这是两全其美的。

我也“喜欢”下划线，除了你对他们的所有积极点外，他们也有一定的老派风格。

所以我所做的是使用下划线并简单地在 Apache 的 .htaccess 文件中添加一个小的重写规则，以将所有下划线重写为连字符。

[https://yoast.com/apache-rewrite-dash-underscore/](https://yoast.com/apache-rewrite-dash-underscore/)

# objective-c - Objective-C：dealloc没有被调用

> ID：10302180
> 
> 赞同：1
> 
> 时间：2012-04-24T16:37:35.510
> 
> 标签：objective-c

我正在学习 Objective-C 并使用 Big Nerd Ranch 的 Obj-C 书来熟悉该语言。到目前为止一切都很好，直到我完成了这个练习，我应该在其中创建 2 个类，其中每个类都继承了该`dealloc`方法。显示对象何时真正被释放的目标。所以新的 dealloc 看起来像

**资产.h**

```
#import <Foundation/Foundation.h>
@class Employee;

@interface Asset : NSObject{
    NSString * label;
    unsigned int resaleValue;
}

@property (strong) NSString * label;
@property unsigned int resaleValue;

@end 
```

**员工.h**

```
#import "Person.h"
@class Asset;

@interface Employee : Person
{
    int employeeID;   
    NSString * lastName;
    Person * spouse;
    NSMutableArray * children;
    NSMutableArray * assets;
}

@property int employeeID;
- (void) addAssetObject: (Asset *) a;
- (unsigned int) valueOfAssets;

@end 
```

**实现**

```
@implementation Employee
//omitted
    -(void) dealloc
    {
        NSLog(@"deallocating %@", self);
    }
@end

@implementation Asset
//omitted
    -(void) dealloc
    {
        NSLog(@"deallocating %@", self);
    }
@end 
```

**主文件**

```
int main (int argc, const char * argv[])
{

    @autoreleasepool {

        NSMutableArray * employees = [[NSMutableArray alloc] init];
        for(int i = 0; i< 10; i++){
            Employee * person = [[Employee alloc] init];
            [person setWeightInKilos:90+i];
            [person setHeightInMeters:1.8 - i/10.0];
            [person setEmployeeID:i];
            [employees addObject:person];
        }

        for(int i = 0; i< 10; i++){
            Asset * asset = [[Asset alloc] init];
            NSString * currentLabel = [NSString stringWithFormat:@"Laptop %d", i];
            [asset setLabel:currentLabel];
            [asset setResaleValue:i*17];

            NSUInteger * randomIndex = random() % [employees count];
            Employee * randomEmployee = [employees objectAtIndex:randomIndex];

            [randomEmployee addAssetObject:asset];
        }

        NSLog(@"Employees: %@", employees);
        NSLog(@"Giving up ownership of one employee");
        [employees removeObjectAtIndex:5]; // This is supposed to trigger the deallocate method
        NSLog(@"Giving up ownership of array");
        employees = nil;
    }
    return 0;
} 
```

当然`description`已经被继承了，这样`%@`就可以了。但是，当我运行它时。没有调用 dealloc，也没有得到释放对象的打印输出。我不确定我在这里做错了什么。

旁注：dealloc不应该也这样做`[super dealloc]`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T16:58:45.230

通过阅读您的代码，我相信您正在使用自动引用计数 (ARC)。如果你不是，你应该开始。（ARC 是新的默认设置，Apple 的推荐，显然是未来。）

您有一个循环引用：您的员工拥有一系列资产，这导致资产由员工持有。同时，每项资产都包含对拥有者员工的强烈引用。这意味着任何一个对象都不能被释放。

要解决此问题，请将资产的引用转换回持有 Employee 的引用，使其成为*弱*引用。

```
@interface Asset : NSObject{
    NSString * label;
    __weak Employee * holder;
    unsigned int resaleValue;
} 
```

没有这个修复：

*   员工在内存中持有资产。
*   资产将员工牢记在心。
*   即使对员工和资产的所有其他引用都消失了，它们仍将继续在记忆中相互保留。

有了这个修复：

*   员工在内存中持有资产。
*   资产**不会**在内存中保存员工。相反，它们包含一个安全的归零参考。
*   当其他任何事情不再需要时，该员工将被释放。
*   当员工被释放时，持有者实例变量将被“神奇地”清除。
*   由于不再引用资产，因此它们也将通过。

# android - 如何解决 Android 的 Stack Overflow

> ID：10302181
> 
> 赞同：-4
> 
> 时间：2012-04-24T16:37:41.767
> 
> 标签：android, stack-overflow

请帮助我，谁曾在下面看到此错误：

```
**04-24 23:24:21.012: I/dalvikvm(327): threadid=1: stack overflow on call to Ljava/lang/Class;.isPrimitive:Z**
04-24 23:24:21.012: I/dalvikvm(327):   method requires 4+20+0=24 bytes, fp is 0x430c9314 (20 left)
04-24 23:24:21.012: I/dalvikvm(327):   expanding stack end (0x430c9300 to 0x430c9000)
04-24 23:24:21.073: I/dalvikvm(327): Shrank stack (to 0x430c9300, curFrame is 0x430cbeb8)
04-24 23:24:21.073: D/AndroidRuntime(327): Shutting down VM
04-24 23:24:21.073: W/dalvikvm(327): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-24 23:24:21.512: D/dalvikvm(327): GC_FOR_MALLOC freed 4475 objects / 369040 bytes in 192ms
04-24 23:24:21.512: E/AndroidRuntime(327): FATAL EXCEPTION: main
04-24 23:24:21.512: E/AndroidRuntime(327): java.lang.StackOverflowError
04-24 23:24:21.512: E/AndroidRuntime(327):  at java.lang.reflect.Array.newInstance(Array.java:473)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.text.SpannableStringBuilder.getSpans(SpannableStringBuilder.java:757)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.text.SpannableStringBuilder.sendSpanAdded(SpannableStringBuilder.java:902)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.text.SpannableStringBuilder.setSpan(SpannableStringBuilder.java:611)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.text.SpannableStringBuilder.setSpan(SpannableStringBuilder.java:514)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.text.Selection.setSelection(Selection.java:74)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.text.Selection.setSelection(Selection.java:85)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.text.method.ArrowKeyMovementMethod.initialize(ArrowKeyMovementMethod.java:497)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2676)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2556)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.EditText.setText(EditText.java:75)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2531)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC.setButton(TabletFC.java:236)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC$13.onTextChanged(TabletFC.java:191)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2691)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2556)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.EditText.setText(EditText.java:75)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2531)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC.setButton(TabletFC.java:236)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC$13.onTextChanged(TabletFC.java:191)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2691)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2556)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.EditText.setText(EditText.java:75)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2531)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC.setButton(TabletFC.java:236)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC$13.onTextChanged(TabletFC.java:191)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2691)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2556)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.EditText.setText(EditText.java:75)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2531)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC.setButton(TabletFC.java:236)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC$13.onTextChanged(TabletFC.java:191)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2691)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2556)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.EditText.setText(EditText.java:75)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2531)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC.setButton(TabletFC.java:236)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC$13.onTextChanged(TabletFC.java:191)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2691)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2556)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.EditText.setText(EditText.java:75)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2531)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC.setButton(TabletFC.java:236)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC$13.onTextChanged(TabletFC.java:191)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2691)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2556)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.EditText.setText(EditText.java:75)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2531)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC.setButton(TabletFC.java:236)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC$13.onTextChanged(TabletFC.java:191)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2691)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2556)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.EditText.setText(EditText.java:75)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2531)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC.setButton(TabletFC.java:236)
04-24 23:24:21.512: E/AndroidRuntime(327):  at com.app.tabletfc.TabletFC$13.onTextChanged(TabletFC.java:191)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:2691)
04-24 23:24:21.512: E/AndroidRuntime(327):  at android.widget.TextView.setText(TextView.java:25 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T16:40:25.743

好吧，*看起来*你的`onTextChanged`处理程序正在调用`setButton`，而后者又在调用`setText`，它再次调用你的`onTextChanged`处理程序，导致无限递归。

嗯，不要那样做。

如果没有更多关于你正在尝试做什么或你的代码是什么样子的信息，很难给出更具体的建议。

# mysql - 需要优化 SQL 查询的建议（在 MySQL 上更新）

> ID：10302183
> 
> 赞同：2
> 
> 时间：2012-04-24T16:37:44.727
> 
> 标签：mysql, sql, optimization, indexing

我使用慢查询日志对我的数据库进行了性能分析。原来这是第一个烦恼：

```
UPDATE
    t1
SET
  v1t1 =
  (
    SELECT
        t2.v3t2
    FROM
        t2
    WHERE
        t2.v2t2 = t1.v2t1
    AND t2.v1t2 <= '2012-04-24'
    ORDER BY
        t2.v1t2 DESC,
        t2.v3t2 DESC
    LIMIT 1
); 
```

子查询本身已经很慢了。我尝试了 DISTINCT、GROUP BY 和更多子查询的变体，但在 4 秒以下没有执行任何操作。例如以下查询

```
SELECT v2t2, v3t2
FROM t2
WHERE t2.v1t2 <= '2012-04-24'
GROUP BY v2t2
ORDER BY v1t2 DESC 
```

需要：

```
mysql> SELECT ...
...    
69054 rows in set (5.61 sec)    

mysql> EXPLAIN SELECT ...
+----+-------------+-------------+------+---------------+------+---------+------+---------+----------------------------------------------+
| id | select_type | table       | type | possible_keys | key  | key_len | ref  | rows    | Extra                                        |
+----+-------------+-------------+------+---------------+------+---------+------+---------+----------------------------------------------+
|  1 | SIMPLE      | t2          | ALL  | v1t2          | NULL | NULL    | NULL | 5203965 | Using where; Using temporary; Using filesort |
+----+-------------+-------------+------+---------------+------+---------+------+---------+----------------------------------------------+

mysql> SHOW CREATE TABLE t2;
...
  PRIMARY KEY (`v3t2`),
  KEY `v1t2_v3t2` (`v1t2`,`v3t2`),
  KEY `v1t2` (`v1t2`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8  

SELECT COUNT(*) FROM t1;
+----------+
| COUNT(*) |
+----------+
|    77070 |
+----------+

SELECT COUNT(*) FROM t2;
+----------+
| COUNT(*) |
+----------+
|  5203965 |
+----------+ 
```

我正在尝试获取最新条目（v3t2）及其父项（v2t2）。应该没什么大不了的吧？有没有人建议我应该转动哪些旋钮？非常感谢任何帮助或提示！

这应该是更合适的 SELECT 语句：

```
SELECT
    t1.v2t1,
  (
    SELECT
        t2.v3t2
    FROM
        t2
    WHERE
        t2.v2t2 = t1.v2t1
    AND t2.v1t2 <= '2012-04-24'
    ORDER BY
        t2.v1t2 DESC,
        t2.v3t2 DESC
    LIMIT 1
) AS latest   
FROM
    t1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:07:47.907

Your `ORDER BY ... LIMIT 1` is forcing database to perform a full scan of the table to return only 1 row. It looks like very much as a candidate for indexing.

Before you build the index, check the fileds selectivity by running:

```
SELECT count(*), count(v1t2), count(DISTINCT v1t2) FROM t2; 
```

If you're having high number of non-`NULL` values in your column and number of distinct values is more then 40% of the non-`NULL`s, then building index is a good thing to go.

If index provides no help, you should analyze the data in your columns. You're using `t2.v1t2 <= '2012-04-24'` condition, which, in the case you have a historical set of records in your table, will give nothing to the planner, as all rows are expected to be in the past, thus full scan is the best choice anyway. Thus, indexe is useless.

What you should do instead, is think how to rewrite your query in a way, that only a limited subset of records is checked. Your construct `ORDER BY ... DESC LIMIT 1` shows that you probably want the most recent entry up to `'2012-04-24'` (including). Why don't you try to rewrite your query to a something like:

```
SELECT v2t2, v3t2
FROM t2
WHERE t2.v1t2 => date_add('2012-04-24' interval '-10' DAY)
GROUP BY v2t2
ORDER BY v1t2 DESC; 
```

This is just an example, knowing the design of your database and nature of your data more precise query can be built.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:50:29.833

我会看看为子选择 t2 构建的索引。由于排序，您应该有一个 v2t2 的索引，可能还有一个 v1t2 和 v3t2 的索引。索引应该减少子选择在更新查询中使用它们之前查找结果的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:23:02.287

这会更好吗？通过正在使用的键摆脱其中一种排序和组。

```
UPDATE
    t1
SET
  v1t1 =
  (
    SELECT
        MAX(t2.v3t2)
    FROM
        t2
    WHERE
        t2.v2t2 = t1.v2t1
    AND t2.v1t2 <= '2012-04-24'
    GROUP BY t2.v1t2
    ORDER BY t2.v1t2 DESC
    LIMIT 1
); 
```

## 替代版本

```
UPDATE `t1`
SET `v1t1` = (
  SELECT MAX(`t2`.`v3t2`)
  FROM `t2`
  WHERE `t2`.`v2t2` = `t1`.`v2t1`
  AND `t2`.`v1t2` = (
    SELECT MAX(`t2`.`v1t2`)
    FROM `t2`
    WHERE `t2`.`v2t2` = `t1`.`v2t1
    AND `t2`.`v1t2` <= '2012-04-24'
    LIMIT 1
  )
  LIMIT 1
); 
```

**并将此索引添加到`t2`：**

```
KEY `v2t2_v1t2` (`v2t2`, `v1t2`) 
```

# ios - NSJSONSerialization 和 SBJson 工作异常

> ID：10302184
> 
> 赞同：3
> 
> 时间：2012-04-24T16:37:46.210
> 
> 标签：ios, json, sbjson

我尝试将相同的 NSDictionary 对象转换为 NSData，然后使用 NSJSONSerialization 和 SBJsonWriter 多次转换为 NSString，有时会得到不同的字符串。甚至为空。这很奇怪，我找不到任何理由。=( JSONKit 和 YAJL 没有这样的问题。以下是我的测试代码。

```
for (int i = 0; i < 5; i++) {
  NSDictionary *d = [NSDictionary dictionaryWithObject:@"value" forKey:@"key"];
  NSData *data = [NSJSONSerialization dataWithJSONObject:d options:0 error:nil];
  NSLog(@"%@", [NSString stringWithUTF8String:data.bytes]);
} 
```

控制台输出是......

```
2012-04-25 01:35:33.113 Test[19347:c07] {"key":"value"}
2012-04-25 01:35:33.114 Test[19347:c07] (null)
2012-04-25 01:35:33.114 Test[19347:c07] {"key":"value"}
2012-04-25 01:35:33.114 Test[19347:c07] {"key":"value"}
2012-04-25 01:35:33.115 Test[19347:c07] (null) 
```

每次我运行测试代码时输出都会发生变化。data 的字节大小相同，但 UTF8 转换的字符串长度不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T16:45:58.193

对象中的字节`NSData`不一定包含以 NUL 结尾的字符串。如果要将数据转换为`NSString`，请改为：

```
[[NSString alloc] initWithBytes:data.bytes length:data.length encoding:NSUTF8StringEncoding] 
```

为了安全起见，某些解析器可能会将“\0”写入它们返回的数据的末尾，这解释了为什么它们的行为更具可预测性。但正如您所见，您不应该依赖这种行为。

# asp.net - 以编程方式保护 Web 场方案中的 web.config 和 app.config

> ID：10302185
> 
> 赞同：0
> 
> 时间：2012-04-24T16:37:46.893
> 
> 标签：asp.net, encryption, web-config, app-config, web-farm

这是我在这个论坛上的第一篇文章。对于我正在研究的解决方案，我有一个关于保护 web.config 和 app.config 中的连接字符串的问题。我有一个带有中央节点的网络场，用于将解决方案推送到网络场中的所有服务器，这是使用批处理脚本完成的。

我想保护所有解决方案的网络和应用程序配置中的连接字符串。我知道 aspnet_regiis 只能与 web.configs 一起使用，所以它不是一个选项，我构建了一个小应用程序来保护 web 和应用程序配置的连接字符串，但它只能在一台机器上运行，我如何以编程方式保护 web 和应用程序配置网络农场场景？我还没有测试它，因为我想它会失败，但我可以将编程保护的 web.config 和 app.config 复制到所有服务器，它会......只是......工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:30:50.070

只要您为每台机器设置了相同的 machineKey 值，它就会起作用。您可以在框架主目录的 machine.config 文件中设置它。

# java - java : 让它成为最好的“搜索方法”

> ID：10302187
> 
> 赞同：0
> 
> 时间：2012-04-24T16:37:57.187
> 
> 标签：java, swing

我设计了搜索方法。根据我的要求，如果用户想要搜索客户的记录，他/她可以在姓名文本字段中输入客户的姓或名，然后单击搜索按钮。以下两个屏幕截图显示了按钮单击前后的事件示例（输入要搜索的名称为 Lee）

![在此处输入图像描述](../Images/63d2423488a19435516336729f64ac81.png)

![在此处输入图像描述](../Images/a5b766823fba0f60f49b2906f78f6028.png)

以下是搜索代码。它工作正常，但我想让它变得更好？

```
 private void search()
        {
            String studentName=CNameTextField.getText();
            String record="";
            int count=0;

            for(int i=0; i<myList.size();i++)
              {
                String name=myList.get(i).getName();

                 String [] splitName= name.split(" ");

                 if(studentName.equals(splitName[0]) || studentName.equals(splitName[1]))
                    {
                        count++;
                        record=record+"\n"+myList.get(i).toString();

                    }
                display.setText("");
                display.append(count + " result(s) found for "+ studentName);
                display.append("\n "+ record);
              }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:18:39.630

所以你基本上有一个`String`项目列表，你正在搜索所有项目的价值？

我的建议是为 DisplayArea 中的每一行创建对象，而不是`String`s。例如，当您读取 DisplayArea 的输入文件时，`split()`为每一行执行并创建`Customer`具有名为`ID`、`name`、`room`等字段的类型对象。无论如何，这将是更好的 OO 编程 - `String`s 没有任何意义，而 a`Customer`有意义。

如果你这样做，在搜索中你可以简单地遍历`Customer`列表中的所有 s，询问`name.equals(customer.getName());`这是否会消除每次搜索时拆分行的需要。

# r - 在 R 中用 ggplot 绘制谷歌地图

> ID：10302195
> 
> 赞同：17
> 
> 时间：2012-04-24T16:38:41.323
> 
> 标签：r, google-maps, ggplot2, geocoding, ggmap

我正在尝试绘制使用 RgoogleMaps 包查询的[谷歌地图](http://maps.googleapis.com/maps/api/staticmap?center=Montegomery,AL&zoom=11&size=512x512&scale=2&maptype=roadmap&markers=color:blue%7Clabel:S%7C40.702147,-74.015794&markers=color:green%7Clabel:G%7C40.711614,-74.012318&markers=color:red%7Ccolor:red%7Clabel:C%7C40.718217,-73.998284&sensor=false)并将其与 ggplot 结合起来。最终，我想使用 显示总人口`geom_point`，有点类似于下图，但是由于过度绘图，我试图专注于蒙哥马利地区。

我很沮丧，因为我无法在 R 中绘制我查询的地图。我尝试了几个包，例如`read.jpeg`and ，`png`但效果不佳。

R代码：

```
#query google map
al1 <- GetMap(center=c(32.362563,-86.304474), zoom=11, destfile = "al2.jpeg", 
       format="jpg",maptype="roadmap")

#load only specific states
alabama <- subset(all_states, region %in% c("alabama"))

#population
p1 <- ggplot()
p1 <- p1 + geom_polygon(data=alabama, 
      aes(x=long, y=lat, group=group), colour="white", fill="grey10")
p1 <- p1 + geom_point(data=quote, aes(x=IntPtLon, y=IntPtLat, size=TotPop, 
      color=TotPop),colour="coral1") + scale_size(name="Total Pop") 
```

![在此处输入图像描述](../Images/d826fae0d2de4f1577ccba4b6a6e5994.png)

**编辑：**

这是我的粗略结果。我还想：

*   更改点大小的比例，因为它们在地图上看起来相当小。
*   使点透明或未填充，以便地图仍然可见。

![在此处输入图像描述](../Images/620438d0695cff8d6d5d14526be890da.png)

```
al1 <- get_map(location = c(lon = -86.304474, lat = 32.362563), zoom = 11, maptype = 'terrain')
al1MAP <- ggmap(al1)+ geom_point(data=quote_mgm, aes(x=IntPtLon, y=IntPtLat, size=TotPop)) 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-24T20:16:18.620

这就是你所追求的。它使用`ggmap`包，这简化了过程。请参阅`?get_map`和`?ggmap`了解更多选项。[The R Journal](http://journal.r-project.org/archive/2013-1/kahle-wickham.pdf)中提供了极好的资源

```
library(ggmap)
al1 = get_map(location = c(lon = -86.304474, lat = 32.362563), zoom = 11, maptype = 'roadmap')
al1MAP = ggmap(al1)
al1MAP 
```

![在此处输入图像描述](../Images/61024f18d1a32396b25f2179aa220114.png)

# java - Maven：如何设置 Maven 分别运行单元测试和集成测试

> ID：10302196
> 
> 赞同：3
> 
> 时间：2012-04-24T16:38:50.760
> 
> 标签：java, unit-testing, maven, integration-testing

我有一个关于maven的问题。

我有文件名以 *Test 结尾的单元测试和文件名以 *IT 结尾的集成测试。

我的理解是，surefire 将运行单元测试，而 failsafe 将运行集成测试。

当我运行时： mvn clean install

单元测试和集成测试都运行。

当我运行时：

mvn 验证

这两个测试也都运行。

无论如何我可以配置maven，以便当我使用：mvn clean install时，只运行单元测试。当我使用 mvn verify 时，只运行集成测试？

我的 POM 构建部分如下：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>failsafe-maven-plugin</artifactId>
            <version>2.4.3-alpha-1</version>
            <executions>
                <execution>
                    <goals>
                        <goal>integration-test</goal>
                        <goal>verify</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>

    <resources>
        <resource>
            <directory>src/main/resources</directory>
        </resource>
    </resources>
</build> 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:43:36.577

[正如这里](http://maven.apache.org/plugins/maven-failsafe-plugin/examples/inclusion-exclusion.html)提到的，按照惯例，假设集成测试被命名为 in`TestNameIT.java`而单元测试被命名为 in `TestNameUT.java`，您可以使用它`includes`来过滤集成测试或单元测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T07:23:41.373

# 使用 Maven 设置单元集成和系统测试

我创建了一个 GitHub 存储库，您可以在其中查看可能的 Maven 设置。我在这里发布这个是因为我想与其他人分享我对这个设置的想法，我认为当有人搜索关于在 SO 上使用 maven 进行测试时可以找到这个

存储库包含功能齐全的设置。

GitHub 存储库：[https ://github.com/StefanHeimberg/maven3-unit_integration_systemtest-setup](https://github.com/StefanHeimberg/maven3-unit_integration_systemtest-setup)

# 特征

*   Maven 3.3
*   生产数据库和系统测试数据库迁移的 Flyway
*   用于集成测试执行的 Arquillian
*   用于单元测试的 Mockito

## 单元测试

*   仅测试了一个类/业务功能
*   没有数据库
*   无容器
*   最小的可能测试单元
*   对其他类的依赖被模拟。（模仿）
*   测试在被测试单元所在的工件的*src/test中*

## 集成测试

*   多个类/业务功能一起编排和测试
*   每个测试用例的内存数据库
*   EE 容器。为所有集成测试启动一次
*   Arquillian 远程管理野蝇
*   arquillian 战争中每个 TestCase 的数据源部署 (*-ds.xml)
*   数据库表是从 JPA DDL (hibernate.hbm2ddl.auto=create-drop) 生成的
*   Arquillian Deployments 仅包含测试用例本身所需的类
*   在 @Test 或 @Before 方法中手动加载的测试数据...（测试数据构建器...）
*   测试与其他代码分开

## 系统测试

*   最终 WAR/EAR 文件的完整 Wildfly 部署。
*   通过 *.cli 命令行命令配置容器
*   读取使用的数据库，因为我们需要 (hibernate.hbm2ddl.auto=validate)
*   使用 maven-flyway-plugin 部署前的数据库设置
*   使用 sql-maven-plugin 加载的测试数据
*   测试与其他代码分开

# c# - 正则表达式提取电话号码

> ID：10302198
> 
> 赞同：2
> 
> 时间：2012-04-24T16:38:51.307
> 
> 标签：c#, .net, regex

```
<CallInfo info: from '600000000', to '800000000', forwardedFrom '', display '', category '1', tollCategory '2',callingNumberRestricted false, custom '', receivingComplete true> -- (SUCCESS) 
```

我有一个巨大的文本文件，里面有很多这样的行。有人可以帮助我如何构建正则表达式以便我可以提取数字`'800000000'`吗？

from 和 to 电话号码将**不同**。

我总是需要后面的数字`to`

目前我在空白处分割线，然后遍历我觉得效率很低的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:28:01.553

首先你必须得到to-Number的整个匹配：

```
, to '[0-9]{9}', 
```

之后，您必须从比赛中获得一个小组。你最好采取这样的命名组：

```
, to '(?<toNumber>[0-9]{9})', 
```

获取电话号码的实现可能如下所示：

```
string regex = ", to '(?<toNumber>[0-9]{9})',";
string text = "<CallInfo info: from '600000000', to '800000000', forwardedFrom '', display '', category '1', tollCategory '2',callingNumberRestricted false, custom '', receivingComplete true> -- (SUCCESS)";
string toNumber = string.Empty;

Match match = Regex.Match(text, regex);
if (match.Success)
{
    toNumber = match.Groups["toNumber"].Value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:41:31.557

试试`to '(\d{9})`。这将匹配 text 之后连续的任何 9 位数字序列`to '`，并将结果存储在第一个捕获组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T16:51:54.593

这行得通。我不确定你的输入有多大的变化......

```
 string s = "<CallInfo info: from '600000000', to '800000000', forwardedFrom '', display '', category '1', tollCategory '2',callingNumberRestricted false, custom '', receivingComplete true> -- (SUCCESS)";

        Regex r = new Regex("^<CallInfo.* to '(\\d{9})'");
        var match = r.Match(s);
        var number = match.Groups[1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T17:00:12.783

看起来很简单。我会从您的文件中提取一个“样本”行并将其转换为正则表达式，用指示您感兴趣的数据类型的特殊字符标记和替换真实数据。具体来说，您说您想要捕获“to “ 电话号码：

```
@"^<CallInfo info: from '\d{1,9}', to '(?<toNumber>\d{1,9})', forwardedFrom '.*?', display '.*?', category '.*?', tollCategory '.*?', callingNumberRestricted (?:true|false), custom '.*?', receivingComplete (?:true|false)> -- \(SUCCESS\)$" 
```

使用 Regex.Match() 针对此模式运行整个文件，您可以使用以下代码生成“to”数字列表：

```
List<string> toNumbers = Regex.Match(contentsOfFile, pattern).Groups["toNumber"].ToList(); 
```

您可以通过简单的解析将数字转换为实际数值：

```
List<ulong> toNumbersAsLongs = toNumbers.Select(s=>ulong.Parse(s)).ToList(); 
```

如果您需要此文件中的任何其他数据，只需将该字段用括号括在模式中，并使用`?<captureName>`约定为其命名。

# jquery - 在页面加载时自动打开 colorbox iframe

> ID：10302199
> 
> 赞同：7
> 
> 时间：2012-04-24T16:39:02.030
> 
> 标签：jquery, colorbox

我想通了这一点，并认为我会发布它，因为我无法在这里找到答案。但是，如果您发现这有任何问题，请 lmk。

```
$(document).ready(function(){    
$.colorbox({open:true,href:"http://siteyouwantopened.com",iframe:true, width:"80%", height:"80%"});`
}); 
```

# java - 我在使用 JOptionPane 的 if/else 语句时遇到问题？

> ID：10302200
> 
> 赞同：0
> 
> 时间：2012-04-24T16:39:04.567
> 
> 标签：java

问题是：

> 问：编写一个程序，使用对话框提示用户选择比萨的尺寸——S、M、L 或 X——然后相应地显示价格为 6.99 美元、8.99 美元、12.50 美元或 15.00 美元。将程序另存为 PizzaChoice.java。

这个问题我需要通过 JOptionPane 使用对话框来处理 if/else 语句。

```
public class PizzaChoice {

    public static void main(String[] args) {
    String choice;
    String small;      
    String medium;
    String extraLarge;

    choice= JOptionPane.showInputDialog("Enter yur choice of pizza :"+" S, M, L, X");
    double s,S;
    //double s2= Double.parseDouble(small);

    if(s==S ){
        System.out.println("$6.99"+s);
    }

    }
} 
```

我不能比这更进一步。我尝试了许多不同的方法，但仍然无法很好地编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:44:01.040

由于这是家庭作业，我不会给你完整的代码。有一个很好的方法可以使用选项对话框来做到这一点。

```
String[] pizzaSizes = {"Small", "Medium", ....};
int option = JOptionPane.showOptionDialog(null, "Make your choise", "Pizza size", 0, JOptionPane.QUESTION_MESSAGE, null, pizzaSizes, null}; 
```

该`option`变量是 PizzaSizes 数组中所选披萨的索引。

现在，您可以使用价格创建一个并行数组。

```
String[] prices = {"$ 6.99", ... }; 
```

现在，显示价格的消息就这么简单。（它不使用 ifs，但我比使用 if/else 更喜欢这个）：

```
String message = "Pizza " + pizzaSizes[option] + " costs " + prices[option] + "."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:43:15.257

用户的选择实际上存储在您放在`JOptionPane`右侧的变量中，该变量被恰当地命名为`choice`.

尝试这样的事情：

```
String small = "S";
.
.
.
String choice; 
double price = 0.0;
choice = JOptionPane.showInputDialog("Enter yur choice of pizza :"+" S, M, L, X");

if(choice.equals(small))
{
   price = ....;
} 
```

# objective-c - IOS UILocalNotifications 在我的应用程序被删除后生效...如何处理这些通知？

> ID：10302202
> 
> 赞同：10
> 
> 时间：2012-04-24T16:39:11.377
> 
> 标签：objective-c, ios, uilocalnotification

我想知道如何处理使用我的应用程序创建但应用程序随后被删除的 UILocalNotifications。可以说，在创建了一些通知之后，用户决定删除应用程序，但我注意到即使删除了应用程序，通知仍然存在并且它们仍然在正确的时间触发，但这对我来说没有意义因为该应用程序不再存在于手机中。

我了解这是怎么可能的，但我想知道当用户决定摆脱我的应用程序时是否有办法删除此类通知？

如果应用程序正在更新，这种情况也会发生吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:30:21.280

另一种方法是使用 APNS（远程通知）而不是本地通知。这样，一旦您的应用程序被删除，推送通知将不会再到达设备，也不会引起用户的注意。

在这个阶段，您可以知道应用程序的删除（使用 APNS 反馈服务）并停止您为该用户（他的推送令牌..）的发送机制

# performance - 多事务、并发和性能

> ID：10302205
> 
> 赞同：0
> 
> 时间：2012-04-24T16:39:22.747
> 
> 标签：performance, google-app-engine, concurrency, transactions

我们正在开发一款 IOS 游戏，并使用 google-app-engine 作为后端。用户可以通过点击建筑物来兑现游戏中的钱。用户以相当快的速度点击多个建筑物，这会导致同一对象（USER）和不同建筑物上的多个并发事务。

不幸的是，这意味着第 4-5 次点击超时，因为它失去了重试。这也意味着由于锁定，第 2 次到第 5 次点击非常慢。

我的第一个想法是将交易变成一个任务，但是在第二次调用该函数时，totalAmount 会出错，因为第一次调用还没有完成。

那么有什么好方法可以支持对同一实体进行多次快速更新吗？

```
 int retries = 5;
        while (retries > 0) {

            // Wrap everything into a transaction from here
            TransactionOptions options = TransactionOptions.Builder.withXG(true);
            Transaction txn = datastore.beginTransaction(options);

                try{
                    // Ok we got the template - now check against the 

                   // Update user... with money gained 
                   // Update Building...money withdrawn

                   //Do the transaction
                    datastore.put(txn, user.getEntity());
                    datastore.put(txn, building.getEntity());
                    txn.commit();

                    // do callback code...which returns TotalMoney

                    break;

                } catch (Exception e) {
                    if(retries > 0){
                        retries--;
                    }
                    else{
                   //fail code...
                } finally {
                    if (txn.isActive()) {
                        txn.rollback();
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T16:54:53.567

为了一致性，您需要事务，为了响应，您应该使用后端：

1.  使用后端实例将数据保存在内存中以便快速更新。

2.  每当在后端更新数据时，也会启动一个任务并以事务方式更新 Datastore 中的实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:12:35.633

一种可能性是不使用 XG 交易，或者根本不使用交易。相反，拥有一个事务日志会更有益，您可以在其中记录所有操作。这样，您可以让任务或后端应用事务日志的效果，这样如果事情失败，它们最终会变得一致。这将大大提高您的前端吞吐量，并且从长远来看将使客户服务更加容易。

要记住的一件事是关于更新实体组的一般经验法则：设计您的实体组，以便以 1/s 的速率更新它们。实际速率要高得多，但这是防止冲突和争用的好规则。

# python - 对从文件导入的列表进行排序... Python

> ID：10302211
> 
> 赞同：0
> 
> 时间：2012-04-24T16:39:49.233
> 
> 标签：python, python-2.7

我对 python 很陌生，我希望我没有错过其他地方的修复。我有一个简单的程序，它是我购买的书中的练习之一，但我遇到了一个问题。我有一个程序可以打开文件并将其写入列表。然后用户可以使用输入更新列表，当用户退出时，它会使用最新内容更新列表。除排序选项外，一切正常。它显示文件中的分数，前面有一个单引号，并且在程序没有运行时更新分数。它也根本不对它们进行排序。我尝试了许多不同的方法来做到这一点。我确信从长远来看这并不重要，但我想弄清楚。

这是代码

```
# High Scores
# Demonstrates list methods

scores = []
try:
    text_file = open("scores.txt", "r")
    for line in text_file:
        scores.append(line.rstrip("\n"))

    text_file.close()

except:
    raw_input("Please verify that scores.txt is placed in the correct location and run again")

choice = None
while choice != "0":

    print \
    """
    High Scores Keeper

    0 - Exit
    1 - Show Scores 
    2 - Add a Score
    3 - Delete a Score 
    4 - Sort Scores
    """

    choice = raw_input("Choice: ")
    print

    # exit
    if choice == "0":
        try:
            output_file = open("scores.txt" , "w")
            for i in scores:
                output_file.write(str(i))
                output_file.write("\n")

            output_file.close()
            print "Good-bye"
        except:
            print "Good-bye.error"

    # list high-score table
    elif choice == "1":
        print "High Scores"
        for score in scores:
            print score

    # add a score
    elif choice == "2":
        score = int(raw_input("What score did you get?: "))
        scores.append(score)

    # delete a score
    elif choice == "3":
        score = int(raw_input("Delete which score?: "))
        if score in scores:
            scores.remove(score)
        else:
            print score, "isn't in the high scores list."

    # sort scores
    elif choice == "4":
        scores.sort()
        scores.reverse()
        print scores

    # some unknown choice
    else:
        print "Sorry, but", choice, "isn't a valid choice."

raw_input("\n\nPress the enter key to exit.") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T16:46:08.557

当您从文件中添加分数时，您将它们添加为字符串：`scores.append(line.rstrip("\n"))`. 但是当您在程序中添加分数时，您将它们添加为整数：`int(raw_input("What score did you get?: "))`.

当 Python 对同时包含字符串和整数的列表进行排序时，它会根据字符顺序 (so `'1' < '12' < '3'`) 对字符串进行排序，并分别对整数进行排序，将整数放在字符串之前：

```
>>> sorted([1, 8, '11', '3', '8'])
[1, 8, '11', '3', '8'] 
```

大概它在字符之后和之前打印出一个单引号，就像在这里一样（表明它是一个字符串）。

因此，当您在开始时读取文件时，将它们转换为整数，就像您在读取用户输入时所做的那样。

* * *

其他一些提示：

*   `scores.sort(reverse=True)`将按相反的顺序排序，而不必遍历列表两次。
*   这通常是一个坏主意`except:`：这绝对会捕获程序的任何问题，包括用户点击`^C`尝试退出，系统内存不足等。你应该`except Exception:`作为一个包罗万象的方法来获取它的异常当您只想处理某些类型时，可以从那些类型的系统错误或更具体的异常中恢复，但不能恢复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:56:13.237

如果在您的文本文件中每行只有一个分数，最好的方法是在接受这样的输入时将分数更改为整数。

```
scores = []
try:
    text_file = open("scores.txt", "r")
    for line in text_file:
        scores.append(int(line.strip()))
except:
    text_file.close() 
```

实际上，您接受输入的方式是将一些数字保留为字符串。处理这些类型问题的最佳方法是在排序之前打印数组并查看它。祝一切顺利。

# iphone - 是否可以在不显示消息的情况下使用 UILocalNotification？

> ID：10302215
> 
> 赞同：2
> 
> 时间：2012-04-24T16:39:57.647
> 
> 标签：iphone, ios, uilocalnotification

他们可以在一段时间后在我的应用程序中触发方法调用而不会中断用户吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T16:45:51.970

您可以使用本地通知而不设置其警报文本来更新应用程序的徽章编号或播放声音。但是，通知无法在没有用户交互的情况下将您的应用程序带出后台，所以不，您不能以这种方式安排方法调用。

# objective-c - cocoa:webView 有超链接添加`target="_blank"` 无法打开

> ID：10302217
> 
> 赞同：2
> 
> 时间：2012-04-24T16:40:02.770
> 
> 标签：objective-c, xcode, macos, cocoa

有超链接添加的 webView`target = " _blank "`无法打开。

我开发了一个类似 webview 的应用程序，但我有一个问题。如何在当前应用程序的新窗口中打开链接 - 而不是在 Safari 中？

感谢帮助。

![在此处输入图像描述](../Images/6d6b38abd1003b155b62bd118f26d5b8.png)

@Rob Keniger 代码没有运行。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T00:04:09.050

您需要将一个对象设置为`UIDelegate`您的对象，`WebView`并在该对象中实现该[`webView:createWebViewWithRequest:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Protocols/WebUIDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/20001915-CHDDCJCA)方法。

在该方法的实现中，您需要打开一个包含单独的新窗口`WebView`，然后告诉其`mainFrame`将`URLRequest`传递的作为参数加载到该方法。

**更新：**

我看过你的代码。您需要将对象分配为 Web 视图的`UIDelegate`，因此`[webView setUIDelegate:self]`在`applicationDidFinishLaunching:`.

如何实现委托的一个非常简单的示例是：

```
- (WebView *)webView:(WebView *)sender createWebViewWithRequest:(NSURLRequest *)request
{
    NSUInteger windowStyleMask =    NSClosableWindowMask | 
                                    NSMiniaturizableWindowMask |
                                    NSResizableWindowMask |
                                    NSTitledWindowMask;
    NSWindow* webWindow = [[NSWindow alloc] initWithContentRect:NSMakeRect(0, 0, 800, 600) styleMask:windowStyleMask backing:NSBackingStoreBuffered defer:NO];
    WebView* newWebView = [[WebView alloc] initWithFrame:[webWindow contentRectForFrameRect:webWindow.frame]];
    [newWebView setAutoresizingMask:NSViewWidthSizable|NSViewHeightSizable];
    [webWindow setContentView:newWebView];
    [webWindow center];
    [webWindow makeKeyAndOrderFront:self];
    [[newWebView mainFrame] loadRequest:request];
    return newWebView;
} 
```

# windows - Windows 7 将 CTRL + j 映射到向下箭头键

> ID：10302221
> 
> 赞同：5
> 
> 时间：2012-04-24T16:40:18.453
> 
> 标签：windows, keyboard, keymapping

几个月来，我一直在寻找一种将组合键 ( `CTRL`+ `something`) 映射到方向键（如向下或向上）的方法。

我非常希望在 Visual Studio 中能够按`CTRL`+`j`并使光标向下移动一行。我讨厌不得不将我的手从主行移开来上下移动以进行智能感知之类的事情，甚至只是上下导航。

有人对此有解决方案吗？我可以使用仅 Visual Studio 的解决方案，但是在操作系统级别上工作的东西将是理想的，因为这种导航在任何编辑器窗口中都会很好，例如 SQL Server Management Studio 也有智能感知。

我没有考虑任何宏热键类型的解决方案，因为它们可能与应用内热键冲突（例如，如果`CTRL`+`j`已分配给 Visual Studio 中的某些内容）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T16:40:47.213

我认为答案是没有任何东西可以做到这一点。我做了很多研究。

我现在使用 Autohotkey 而不是理想的。我多年来一直熟悉这个应用程序，它做得很好，但不能跨远程桌面工作，因此不能完全满足需求。

我将`ctrl`+映射`i`为向上，`ctrl`+映射`k`为向下，`ctrl`+`j`为左侧，`ctrl`+`l`为右侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-14T11:31:37.930

仅 VS 的解决方案很简单。

至少在 Visual Studio 2017 中，您可以将 Ctrl+XXX 组合键分配给文本编辑器的相应命令。

```
CharLeft
CharLeftExtend
CharRight
CharRightExtend
LineUp
LineUpExtend
LineDown
LineDownExtend
PageUp
PageUpExtend
PageDown
PageDownExtend
LineStart
LineStartExtend
Delete
DeleteBackwards
WordPrevious
WordPreviousExtend
WordNext
WordNextExtend 
```

等等。

全部使用标准工具/选项/环境/键盘设置对话框。

# security - Javascript 覆盖 Request.Form("foo") 以提高安全性 (XSS)

> ID：10302223
> 
> 赞同：1
> 
> 时间：2012-04-24T16:40:28.233
> 
> 标签：security, asp-classic, xss, jscript

我有一些源代码，其中包含一些跨站点脚本漏洞。当浏览器将数据发送到正在执行服务器端 Javascript 和经典 ASP (IIS 7.0) 的服务器时，不会发生输入验证。

我的问题是，有没有办法覆盖`Request.Form("foo")`对象/方法，以便我也可以调用清理函数并摆脱禁止的 JS/HTML？我不想对每个`Request.Form`被调用的文件进行查找和替换。我希望有更优雅的东西。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:23:46.547

我不认为你可以改变`Request.Form`成员。

作为部分解决方案，您可以做的是创建一个代码，该代码将首先在每个页面上运行（例如，使用`include`指令），循环`Request.Form`等等`Request.QueryString`，如果它发现可疑代码，它会终止代码执行（`Response.End`）。这个解决方案是部分的，因为它并没有真正清理输入，它只是在发现可疑文本时放弃执行。

**另一种选择：**创建一个数组，平行于`Request.Form`. 使用与 Request.Form 中相同的成员填充此数组，但这次已清理。然后，快速对整个代码库进行查找和替换，并更改`Request.Form`为您的自定义数组变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:48:10.363

有一种方法可以`Request`用另一个 COM 对象替换整个对象，但它是一个疯狂的解决方案，它仍然需要所有使用的 ASP 文件都`Form`包含一个通用的顶级包含文件。不可能`Request`在应用程序级别全局替换对象或其成员之一。

该问题的正确解决方案，尽管您的声明“不想在任何地方对每个文件进行查找和替换”，但执行这样的全局替换。

尽管存在 .asp 文件的数量，但成本不过是敲出一个简单的程序来打开文件夹树中的每个 ASP 文件，添加一个包含行并替换`Request.Form`.

# sql-server - SSRS 2005 - 没有人在报告管理器中拥有内容管理器权限

> ID：10302226
> 
> 赞同：2
> 
> 时间：2012-04-24T16:40:44.973
> 
> 标签：sql-server, windows, reporting-services, reportingservices-2005

我们在域控制器中安装了报表服务器。在报表服务器中，我删除了为 BUILTIN\Users 分配的所有角色（浏览除外），并为 BUILTIN\Administrators 保留了所有角色（包括内容管理器）。

现在当我以域管理员身份登录时，我无法访问安全设置页面！我没有在报告管理器主页中获得“属性”选项卡。

因为，我安装 SSRS 的服务器是我们的域控制器，它没有任何 BUILTIN 组。但是，域管理员在 Domain\Administrators 组中，我的印象是在这种情况下将充当 BUILTIN\Administrators 组。但是我错了。

现在，由于我们无法以 BUILTIN\Administrator 身份登录，因此没有人可以完全访问报表管理器。

我尝试输入 ReportServer 数据库 PolicyUserRole 表的条目，以便我可以将内容管理员角色分配给 BUILTIN\Users 组。虽然我成功添加了条目，但当我以用户身份登录网站时，报告管理器仍然没有显示任何内容！

我需要做两件事之一，要么

1.  一些如何以 BUILTIN\Administrator 身份登录到报告管理器。- 但不能这样做，因为域控制器没有这个组。Domain\Administrators 组似乎不起作用

或者

2\. 以某种方式将 ContentManager 权限返回给 BUILTIN\Users 组。但我无法使用 ReportManager 网站或 SQL Management Studio 执行此操作，因为他们不承认我的域\管理员具有权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:00:51.490

什么nonnb说：

*   SSRS 将允许任何“本地”管理员在运行 SSRS 的计算机上执行管理工作。

您应该能够转到域控制器，检查本地用户和组，将您的域用户作为本地管理员添加到计算机。据我所知，即使是域控制器也有一些本地的东西。如果没有，可能会讨论是否明智或建议在域控制器上安装 SSRS，但这超出了这个问题的范围：)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:17:39.137

好吧，我找不到任何东西:(...我最终重新安装了报告服务。

# ruby - 普通方法中的“self”与单例方法中的“self”？

> ID：10302238
> 
> 赞同：1
> 
> 时间：2012-04-24T16:41:37.050
> 
> 标签：ruby, singleton, self

在这两种情况下 self 是否相同？

```
class Person
   def who_am_i?
     puts self       # self?
   end
end

ted = Person.new
def ted.singleton_who_am_i?
   puts self         # self?
end

ted.who_am_i?
ted.singleton_who_am_i? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:13:20.637

是的，它看起来是这样的：

```
class Person
  def who_am_i?
    puts self.to_yaml
  end
end

ted = Person.new
def ted.singleton_who_am_i?
  puts self.to_yaml
end

ted.who_am_i?
--- !ruby/object:Person {}

ted.singleton_who_am_i?
--- !ruby/object:Person {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:01:45.190

单例方法是只有特定对象响应的实例方法。这是如何实现的：

1.  打开对象的*单例类；*
2.  Ruby 将您的单例方法定义为单例类的*实例方法*。

这里不明显的是实际类和单例类之间的实际关系。可以说它位于类和对象*之间。*

更准确地说，单例类*继承*自实际类，实际上*是*对象的类。

你问为什么不[`Object#class`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-class)返回单例类？好吧，它只是跳过它。[是](https://github.com/ruby/ruby/blob/trunk/object.c#L158)的。

这是一个例子。给定以下课程：

```
class Person
  def instance; self end  # self is the Person instance here
end

person = Person.new 
```

如果我们想为 定义一个单例方法`person`，我们可以这样写：

```
class << person
  def singleton; self end  # What is self in this context?
end 
```

这大致相当于：

```
class SingletonPerson < Person
  def singleton; self end  # self is the Person instance here too!
end

person = SingletonPerson.new 
```

主要区别在于 Ruby 知道这`SingletonPerson`是一个单例类，因此当您调用时，`person.class`您实际上是 get`Person`而不是`SingletonPerson`。

这有效地向您隐藏了所有这些复杂性，这是一件好事。但是，了解事物在幕后的运作方式也很棒。这里同样的逻辑适用于类方法，它们实际上只是 a`Class`或`Module`实例的单例方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T19:43:49.007

```
class Foo
  def bar
    p self
  end
end

class << Foo
  def bar
    p self
  end
end

Foo.bar              #Foo (the class itself)
Foo.new.bar          #<Foo:0x10acc70> (a Foo class object) 
```

当上下文在对象中时，self 就是对象。

当上下文在类中时，self 就是类。

我也知道“singleton”对于 Ruby 来说是否是一个好词，因为在 Ruby 中，甚至一个类也是一个对象，而“singleton”只是将方法添加到现有对象。

# jquery - 使用 jquery 访问 ajax html 响应的元素

> ID：10302240
> 
> 赞同：2
> 
> 时间：2012-04-24T16:42:07.063
> 
> 标签：jquery, ajax, html-parsing

我在访问 ajax 请求的 html 响应的元素时遇到问题。我正在使用 jquery，并尝试尽可能简化问题：

我有一个这样的 ajax html 响应（保持非常简单）：

```
<div id="div_1"><span id="span">Text in Span</span></div>
<div id="div_2">Text in div</div> 
```

现在我正在尝试使用 jquery 访问此 html 响应的某些元素：

```
 $.ajaxSetup(
 {
   success: function(html)
   {
    alert($('#span', html).html()); //works fine
    alert($('#div_1', html).html()); // doesn't work, why?
    alert($('#div_2', html).html()); // also doesn't work
    alert( $('span', html).first().attr('id') ); // works fine
   }
 } 
```

我实际上想获取第一个 div 元素的 id，但我似乎无法访问 html 响应的第一个“级别”。我可能可以使用包含其他所有内容的 div 围绕容器来解决问题。

是否有另一种解决方案或者有人可以解释一下，为什么 jquery 似乎忽略了 html 的第一级？

非常感谢你，对不起我的英语（我不是母语人士）幻影

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:44:39.330

尝试将响应包装成`div`，将其放入变量中，然后用于`find()`从响应中获取您需要的元素。

希望，这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:44:59.017

您应该为选择器添加哈希`id`：

```
 $.ajaxSetup(
 {
   success: function(html)
   {
    alert($('#span', html).html()); 
    alert($('#div_1', html).html());  
    alert($('#div_2', html).html()); 
    alert( $('span', html).first().attr('id') ); 
   }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T16:45:43.630

像这样将 hast 标签添加到 div 中：#div_1 因为它是一个 id。

# python - 了解 Python Pickle 的不安全性

> ID：10302247
> 
> 赞同：8
> 
> 时间：2012-04-24T16:42:23.750
> 
> 标签：python, security, namespaces, pickle

它在 Python 文档中声明`pickle`不安全，不应解析不受信任的用户输入。如果你研究这个；几乎所有示例都`system()`通过调用 via 来证明这一点`os.system`。

我不清楚的是，在没有导入模块的情况下如何`os.system`正确解释。`os`

```
>>> import pickle
>>> pickle.loads("cos\nsystem\n(S'ls /'\ntR.") # This clearly works.
bin  boot  cgroup  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  selinux  srv  sys  tmp  usr  var
0
>>> dir() # no os module
['__builtins__', '__doc__', '__name__', '__package__', 'pickle']
>>> os.system('ls /')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'os' is not defined
>>> 
```

有人可以解释吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T16:45:00.250

模块名称 ( `os`) 是操作码的一部分，并`pickle`自动导入模块：

```
# pickle.py
def find_class(self, module, name):
    # Subclasses may override this
    __import__(module)
    mod = sys.modules[module]
    klass = getattr(mod, name)
    return klass 
```

注意`__import__(module)`线。

该函数在`GLOBAL 'os system'`执行 pickle 字节码指令时被调用。

这种机制是必要的，以便能够取消其模块尚未显式导入调用者命名空间的类的实例。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-25T00:44:28.813

有关编写比标准 os.system() 示例更进一步的恶意 Pickles 的全部信息，请参阅此[演示文稿](https://media.blackhat.com/bh-us-11/Slaviero/BH_US_11_Slaviero_Sour_Pickles_Slides.pdf)及其随附的[论文](https://media.blackhat.com/bh-us-11/Slaviero/BH_US_11_Slaviero_Sour_Pickles_WP.pdf)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-24T16:47:03.747

如果你使用 pickletools.dis 来反汇编 pickle，你可以看到它是如何工作的：

```
import pickletools
print pickletools.dis("cos\nsystem\n(S'ls ~'\ntR.") 
```

输出：

```
 0: c    GLOBAL     'os system'
11: (    MARK
12: S        STRING     'ls ~'
20: t        TUPLE      (MARK at 11)
21: R    REDUCE
22: .    STOP 
```

Pickle 使用一个简单的基于堆栈的虚拟机，记录用于重建对象的指令。换句话说，您示例中的腌制说明是：

推送 self.find_class(module_name, class_name) 即推送 os.system 推送字符串 'ls ~' 从最顶部的堆栈项构建元组 将 callable 应用于 argtuple，两者都在堆栈上。即 os.system(*('ls ~',))

[来源](http://nadiana.com/python-pickle-insecure)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T16:45:44.457

导入一个模块只会将它添加到本地命名空间，这不一定是你所在的。**除非它没有：**

```
>>> dir()
['__builtins__', '__doc__', '__name__', '__package__']
>>> __import__('os')
<module 'os' from '/usr/lib64/python2.7/os.pyc'>
>>> dir()
['__builtins__', '__doc__', '__name__', '__package__'] 
```

# objective-c - 如何组织我的项目？

> ID：10302248
> 
> 赞同：0
> 
> 时间：2012-04-24T16:42:24.653
> 
> 标签：objective-c, json, web-services

我想创建一个项目，但我真的不知道如何组织它以及我到底需要什么。

我想要一个具有 tableview （分组部分）的应用程序，刷新（下拉）框架three20，然后当用户刷新 uitableview 时，应用程序检查 web 服务并（我猜）获取 JSON 并更新 tableview （通过填充 plist ？）

那我需要什么？

一个网络服务，我可以在后台更新我的 json 吗？我的应用程序有一个由从 web 服务接收到的 json 填充的 plist 吗？

和

我有另一种观点，用户可以在其中向网络服务发送关于他的信息并在需要时对其进行更新。他将在应用程序中有一个页面，他可以在其中查看他之前发送到 Web 服务的信息。

ps：我应该使用coredata吗？

希望你得到我想要的。

多谢你们 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:51:49.353

您可以使用 coredata，我发现它可以更好地组织所有内容，但是使用它当然会产生相关的开销。当您将编辑已存储的信息时，您绝对应该使用它，听起来像您的要求，即使您确实存储了数据，一旦您编辑它，您就将其发送回 Web 服务，所以您并没有真正修改您存储的数据。

因此 ap list 可以正常工作，但将其存储在核心数据中也没有任何问题。您的总体想法是正确的，您将调用您的 Web 服务，解析您获得的 JSON 或 XML 并用数据刷新您的表。

根据 Web 服务使用的通信协议（SOAP、REST）和响应（JSON、XML），有一些工具可以生成通信所需的一切，您实际上不需要自己做所有这些。

# ios - 从iOS iphone中相机返回的图像中读取GPS数据

> ID：10302250
> 
> 赞同：36
> 
> 时间：2012-04-24T16:42:30.963
> 
> 标签：ios, geolocation, gps, camera

我需要获取用 iOS 设备的相机拍摄的图像的 GPS 坐标。我不关心相机胶卷图像，只关心使用 UIImagePickerControllerSourceTypeCamera 拍摄的图像。

我已经阅读了许多 stackoverflow 答案，例如[Get Exif data from UIImage - UIImagePickerController](https://stackoverflow.com/questions/9766394/get-exif-data-from-uiimage-uiimagepickercontroller)，它假设您正在使用 AssetsLibrary 框架，该框架似乎不适用于相机图像，或者使用 CoreLocaiton 从应用程序获取纬度/经度本身，而不是来自图像。

使用 CoreLocation*不是一种选择*。按下快门按钮时，这不会给我坐标。（使用基于 CoreLocation 的解决方案，您需要在打开相机视图之前或之后记录坐标，当然，如果设备正在移动，坐标将是错误的。这种方法应该适用于固定设备。）

我只有iOS5，所以我不需要支持旧设备。这也适用于商业产品，所以我不能使用[http://code.google.com/p/iphone-exif/](http://code.google.com/p/iphone-exif/)。

那么，在 iOS5 中从相机返回的图像中读取 GPS 数据的选项有哪些？我现在能想到的就是将图像保存到相机胶卷，然后使用 AssetsLibrary，但这似乎很不礼貌。

谢谢！

* * *

这是我根据 Caleb 的回答编写的代码。

```
 UIImage *image =  [info objectForKey:UIImagePickerControllerOriginalImage];

    NSData *jpeg = UIImageJPEGRepresentation(image,1.0);
    CGImageSourceRef  source ;
    source = CGImageSourceCreateWithData((__bridge CFDataRef)jpeg, NULL);

    NSDictionary *metadataNew = (__bridge NSDictionary *) CGImageSourceCopyPropertiesAtIndex(source,0,NULL);  

    NSLog(@"%@",metadataNew); 
```

我的控制台显示：

```
 2012-04-26 14:15:37:137 ferret[2060:1799] {
        ColorModel = RGB;
        Depth = 8;
        Orientation = 6;
        PixelHeight = 1936;
        PixelWidth = 2592;
        "{Exif}" =     {
            ColorSpace = 1;
            PixelXDimension = 2592;
            PixelYDimension = 1936;
        };
        "{JFIF}" =     {
            DensityUnit = 0;
            JFIFVersion =         (
                1,
                1
            );
            XDensity = 1;
            YDensity = 1;
        };
        "{TIFF}" =     {
            Orientation = 6;
        };
    } 
```

没有纬度/经度。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-02T19:57:56.337

问题是，由于 iOS 4`UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];`剥离了地理位置。要解决此问题，您必须使用原始照片路径来访问完整的图像元数据。像这样：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    NSURL *referenceURL = [info objectForKey:UIImagePickerControllerReferenceURL];
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    [library assetForURL:referenceURL resultBlock:^(ALAsset *asset) {
        ALAssetRepresentation *rep = [asset defaultRepresentation];
        NSDictionary *metadata = rep.metadata;
        NSLog(@"%@", metadata);

        CGImageRef iref = [rep fullScreenImage] ;

        if (iref) {
            self.imageView.image = [UIImage imageWithCGImage:iref];
        }
    } failureBlock:^(NSError *error) {
        // error handling
    }]; 
```

输出应该是这样的：

```
{
    ColorModel = RGB;
    DPIHeight = 72;
    DPIWidth = 72;
    Depth = 8;
    Orientation = 6;
    PixelHeight = 1936;
    PixelWidth = 2592;
    "{Exif}" =     {
        ApertureValue = "2.970854";
        BrightnessValue = "1.115874";
        ColorSpace = 1;
        ComponentsConfiguration =         (
            0,
            0,
            0,
            1
        );
        DateTimeDigitized = "2012:07:14 21:55:05";
        DateTimeOriginal = "2012:07:14 21:55:05";
        ExifVersion =         (
            2,
            2,
            1
        );
        ExposureMode = 0;
        ExposureProgram = 2;
        ExposureTime = "0.06666667";
        FNumber = "2.8";
        Flash = 24;
        FlashPixVersion =         (
            1,
            0
        );
        FocalLength = "3.85";
        ISOSpeedRatings =         (
            200
        );
        MeteringMode = 5;
        PixelXDimension = 2592;
        PixelYDimension = 1936;
        SceneCaptureType = 0;
        SensingMethod = 2;
        Sharpness = 2;
        ShutterSpeedValue = "3.9112";
        SubjectArea =         (
            1295,
            967,
            699,
            696
        );
        WhiteBalance = 0;
    };
    "{GPS}" =     {
        Altitude = "1167.528";
        AltitudeRef = 0;
        ImgDirection = "278.8303";
        ImgDirectionRef = T;
        Latitude = "15.8235";
        LatitudeRef = S;
        Longitude = "47.99416666666666";
        LongitudeRef = W;
        TimeStamp = "00:55:04.59";
    };
    "{TIFF}" =     {
        DateTime = "2012:07:14 21:55:05";
        Make = Apple;
        Model = "iPhone 4";
        Orientation = 6;
        ResolutionUnit = 2;
        Software = "5.1.1";
        XResolution = 72;
        YResolution = 72;
        "_YCbCrPositioning" = 1;
    };
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-06T17:29:02.230

我们在相机上做了很多工作`UIImagePickerController`，至少在 iOS 5.1.1 之前（包括 iOS 5.1.1），它不会在元数据中返回使用`UIImagePickerController`.

是否为相机应用程序启用了位置服务并不重要；这控制了相机应用程序对位置服务的使用，而不是`UIImagePickerController`.

您的应用将需要使用`CLLocation`该类来获取位置，然后将其添加到从相机返回的图像或视频中。您的应用能否获取位置取决于用户是否授权您的应用访问位置服务。请注意，用户可以随时通过服务为您的应用（或完全为设备）禁用位置`Settings > Location`服务。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-26T18:28:40.500

您没有在发布的代码中使用来自相机的图像数据，而是生成了它的 JPEG 表示形式，这实际上会丢弃所有元数据。`image.CGImage`像迦勒建议的那样使用。

还：

> 这也适用于商业产品，所以我不能使用[http://code.google.com/p/iphone-exif/](http://code.google.com/p/iphone-exif/)。

作者非常明确地指出，商业许可是可用的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-27T13:22:02.497

一种可能性是在相机可见时让 CoreLocation 运行。将每个 CCLocation 连同样本的时间一起记录到一个数组中。当照片返回时，找到它的时间，然后匹配数组中最近的 CClocation。

听起来很笨拙，但它会起作用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-26T17:00:31.793

不能说我需要在我自己的东西中完全做到这一点，但从文档中可以清楚地看出，如果您正在使用`UIImagePickerController`，您可以获取用户刚刚从`-imagePicker:didFinishPickingMediaWithInfo:`委托方法中获取的图像。使用密钥`UIImagePickerControllerOriginalImage`获取图像。

获得图像后，您应该能够访问其属性，包括 EXIF 数据，如[QA1654 使用 ImageIO 访问图像属性中](http://developer.apple.com/library/ios/#qa/qa1654/_index.html)所述。要创建 CGImageSource，我会查看`CGImageSourceCreateWithData()`并使用您从 UIImage 的`CGImage`方法获得的数据。获得图像源后，您可以通过`CGImageSourceCopyProperties()`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-16T18:26:47.337

[正如Chris Markle](https://stackoverflow.com/a/11367004/1107651)所指出的，Apple 确实从 EXIF 中删除了 GPS 数据。但是您可以打开图像的 RAW 数据，并自己解析数据或使用第三方库来执行此操作，[例如](https://code.google.com/p/iphone-exif/).

这是一个示例代码：

```
- (void) imagePickerController: (UIImagePickerController *) picker
 didFinishPickingMediaWithInfo: (NSDictionary *) info {

    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    [library assetForURL:[info objectForKey:UIImagePickerControllerReferenceURL]
             resultBlock:^(ALAsset *asset) {

                 ALAssetRepresentation *image_representation = [asset defaultRepresentation];
                 NSUInteger size = (NSUInteger)image_representation.size;
                 // create a buffer to hold image data
                 uint8_t *buffer = (Byte*)malloc(size);
                 NSUInteger length = [image_representation getBytes:buffer fromOffset: 0.0  length:size error:nil];

                 if (length != 0)  {

                     // buffer -> NSData object; free buffer afterwards
                     NSData *adata = [[NSData alloc] initWithBytesNoCopy:buffer length:size freeWhenDone:YES];

                     EXFJpeg* jpegScanner = [[EXFJpeg alloc] init];
                     [jpegScanner scanImageData: adata];
                     EXFMetaData* exifData = jpegScanner.exifMetaData;

                     id latitudeValue = [exifData tagValue:[NSNumber numberWithInt:EXIF_GPSLatitude]];
                     id longitudeValue = [exifData tagValue:[NSNumber numberWithInt:EXIF_GPSLongitude]];
                     id datetime = [exifData tagValue:[NSNumber numberWithInt:EXIF_DateTime]];
                     id t = [exifData tagValue:[NSNumber numberWithInt:EXIF_Model]];

                     self.locationLabel.text = [NSString stringWithFormat:@"Local: %@ - %@",latitudeValue,longitudeValue];
                     self.dateLavel.text = [NSString stringWithFormat:@"Data: %@", datetime];

                 }
                 else {
                     NSLog(@"image_representation buffer length == 0");
                 }
             }
            failureBlock:^(NSError *error) {
                NSLog(@"couldn't get asset: %@", error);
            }
     ];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-23T07:25:24.800

这是在 iOS 8 上测试的，适用于视频，所以它应该对照片进行一些调整。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    NSURL *videoUrl = (NSURL *)[info objectForKey:UIImagePickerControllerMediaURL];
    NSString *moviePath = [videoUrl path];

    if ( UIVideoAtPathIsCompatibleWithSavedPhotosAlbum(moviePath) ) {

        ALAssetsLibrary *assetLibrary = [[ALAssetsLibrary alloc] init];

        [assetLibrary assetForURL:[info objectForKey:UIImagePickerControllerReferenceURL] resultBlock:^(ALAsset *asset) {

            CLLocation *location = [asset valueForProperty:ALAssetPropertyLocation];
            NSLog(@"Location Meta: %@", location);

        } failureBlock:^(NSError *error) {
            NSLog(@"Video Date Error: %@", error);
        }];

    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-01T08:06:03.330

**快速**回答：

```
import AssetsLibrary
import CoreLocation

// MARK: - UIImagePickerControllerDelegate
extension ViewController: UIImagePickerControllerDelegate {
    func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : Any]) {
        defer {
            dismiss(animated: true, completion: nil)
        }
        guard picker.sourceType == .photoLibrary else {
            return
        }
        guard let url = info[UIImagePickerControllerReferenceURL] as? URL else {
            return
        }

        let library = ALAssetsLibrary()
        library.asset(for: url, resultBlock: { (asset) in
            guard let coordinate = asset?.value(forProperty: ALAssetPropertyLocation) as? CLLocation else {
                return
            }
            print("\(coordinate)")

            // Getting human-readable address.
            let geocoder = CLGeocoder()
            geocoder.reverseGeocodeLocation(coordinate, completionHandler: { (placemarks, error) in
                guard let placemark = placemarks?.first else {
                    return
                }
                print("\(placemark.addressDictionary)")
            })
        }, failureBlock: { (error: Error?) in
            print("Unable to read metadata: \(error)")
        })
    }
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-05-02T17:28:04.033

在您的 UIImagePickerController 委托中，执行以下操作：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
  NSDictionary *metadata = [info valueForKey:UIImagePickerControllerMediaMetadata];

  // metadata now contains all the image metadata.  Extract GPS data from here.
} 
```

# javascript - 优化本地存储和搜索

> ID：10302256
> 
> 赞同：2
> 
> 时间：2012-04-24T16:42:57.453
> 
> 标签：javascript, asp.net, html, cookies

我有一个内置于 .NET 的 Web 应用程序

在会话期间，用户必须访问从数据库中填充的字典值。用户经常调用它。

我想减少 HTTP 调用，并希望将字典值带到客户端并从那里访问它。

我想了解在本地存储这个字典值的最佳实践是什么，这样检索数据非常快？

我真正想做的事情类似于 FaceBook 对“@”所做的事情，所以当你写 @Name 时，它​​会快速在数据库中进行搜索并用链接替换文本。就我而言，我有一组固定的数据可供搜索，通常不超过 10-15 个名称-值对。

我考虑将值存储在 cookie 中，但不知道是否会有任何存储限制，也不知道检索的速度有多快。

任何帮助深表感谢。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:58:33.123

如果字典是静态的，那么您可以使用`JSON.stringify`并`localStorage`存储它。这样，用户只需要在他们第一次访问您的网站时加载它。将其存储在 中后 `localStorage`，我建议在`JSON.parse`每次加载页面时将其加载到 JavaScript 对象中，以加快搜索速度，因为 JavaScript 对象的工作方式类似于哈希表。

然后，您可以在每次页面加载时添加一个简单的检查，以查看字典是否需要刷新。

```
var globalDictionaryHash = null;

function loadDictionary()
{
  if (localStorage.getItem("my_dict") == null)
  {
    localStorage.setItem("my_dict", JSON.stringify(myObjectFromAJAXCall));
  }

  globalDictionaryHash = JSON.parse(localStorage.getItem("my_dict"));
  console.log(globalDictionaryHash['key']);
} 
```

# java - 在java中，我想要两个矩形，一个在另一个后面模拟一个健康栏，它们不起作用

> ID：10302257
> 
> 赞同：0
> 
> 时间：2012-04-24T16:43:00.623
> 
> 标签：java, jpanel, jlabel, jcomponent

我在我的 GameFrame 中创建了两个矩形组件，但它们从不在同一个位置，尽管组件是使用相同的 X、Y 坐标构造的。有人知道怎么修这个东西吗？我还在顶部的绿色矩形上制作了一个 JLabel，但它从未出现过。感谢您的时间。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.GridLayout;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class GameFrame extends JFrame
{
    private SpellBarComponent bar;
    private JPanel mainPanel = new JPanel();
    private JPanel buttonPanel = new JPanel();
    Color green = new Color(29, 180, 29);
    Color red = new Color(255, 0, 0);
    private RectangleComponent life;
    private RectangleComponent death;

    public GameFrame(char x)
    {
        setSize(1024, 768);
        setTitle("Game");
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        createPanels(x);
        buttonPanel.setLayout(new FlowLayout(FlowLayout.LEFT, 5, 5));
        mainPanel.setLayout(new GridLayout(0, 2, 5, 5));
        repaint();
        getContentPane().add(mainPanel, BorderLayout.CENTER);
        getContentPane().add(buttonPanel, BorderLayout.PAGE_END);
        setExtendedState(getExtendedState() | JFrame.MAXIMIZED_BOTH);
        setLocationByPlatform(true);
        setVisible(true);

    }

    public RectangleComponent getLife()
    {
        return life;
    }

    private void createHealth()
    {
        life = new RectangleComponent(green, true);
        death = new RectangleComponent(red, false);
    }

    private void createPanels(char x)
    {
        createBar(x);
        createHealth();
        mainPanel.add(buttonPanel);
        mainPanel.add(life);
        mainPanel.add(death);
        buttonPanel.add(bar.getSpell1());
        buttonPanel.add(bar.getSpell2());
        buttonPanel.add(bar.getSpell3());
    }

    private void createBar(char x)
    {
        bar = new SpellBarComponent(x);
    }
}

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.RoundRectangle2D;

import javax.swing.JComponent;
import javax.swing.JLabel;

public class RectangleComponent extends JComponent
{
    private Color color;
    private int width;
    private int height;
    private RoundRectangle2D roundedRectangle;
    private int origWidth;
    private JLabel label;
    private boolean wantLabel;

    public RectangleComponent(Color color, int width, int height, boolean wantLabel)
    {
        this.width = width;
        this.height = height;
        this.color = color;
        origWidth = width;
        this.wantLabel = wantLabel;
        if(wantLabel)
        {
            label = new JLabel(this.width + "/" + origWidth);
            label.setLabelFor(this);
        }
    }

    public RectangleComponent(Color color, boolean wantLabel)
    {
        width = 125;
        height = 18;
        this.color = color;
        origWidth = width;
        this.wantLabel = wantLabel;
        if(wantLabel)
        {
            label = new JLabel(this.width + "/" + origWidth);
            label.setLabelFor(this);
        }
    }

    public void paintComponent(Graphics g)
    {
        Graphics2D graphics2 = (Graphics2D) g;
        roundedRectangle = new RoundRectangle2D.Float(10, 10, width, height, 10, 10);
        graphics2.setPaint(color);
        graphics2.fill(roundedRectangle);
        graphics2.draw(roundedRectangle); 
        if(wantLabel)
            label.setText(this.width + "/" + origWidth);
    }

    public Dimension getPreferredSize()
    {
        return (new Dimension(width, height));
    }

    public void subtractLife(int amount)
    {
        width -= amount;
        if(width > 0)
        {
            roundedRectangle.setRoundRect(10, 10, width, height, 10, 10);
            repaint();
        }
        else
            width = 0;
    }

    public void addLife(int amount)
    {
        width += amount;
        if(width < origWidth)
        {
            roundedRectangle.setRoundRect(10, 10, width, height, 10, 10);
            repaint();
        }
        else width = origWidth;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:47:00.667

组件的边界被父组件的布局管理器覆盖。由于`mainPanel`使用 a `GridLayout`，因此其中的所有组件都将位于不同的网格单元中。如果要手动定位这些组件，请将布局管理器设置`mainPanel`为`null`。

# r - 预测时间序列数据

> ID：10302261
> 
> 赞同：26
> 
> 时间：2012-04-24T16:43:06.993
> 
> 标签：r, time-series, xts

我已经做了一些研究，但我一直在寻找解决方案。我有一个时间序列数据，非常基本的数据框，我们称之为`x`：

```
Date        Used
11/1/2011   587
11/2/2011   578
11/3/2011   600
11/4/2011   599
11/5/2011   678
11/6/2011   555
11/7/2011   650
11/8/2011   700
11/9/2011   600
11/10/2011  550
11/11/2011  600
11/12/2011  610
11/13/2011  590
11/14/2011  595
11/15/2011  601
11/16/2011  700
11/17/2011  650
11/18/2011  620
11/19/2011  645
11/20/2011  650
11/21/2011  639
11/22/2011  620
11/23/2011  600
11/24/2011  550
11/25/2011  600
11/26/2011  610
11/27/2011  590
11/28/2011  595
11/29/2011  601
11/30/2011  700
12/1/2011   650
12/2/2011   620
12/3/2011   645
12/4/2011   650
12/5/2011   639
12/6/2011   620
12/7/2011   600
12/8/2011   550
12/9/2011   600
12/10/2011  610
12/11/2011  590
12/12/2011  595
12/13/2011  601
12/14/2011  700
12/15/2011  650
12/16/2011  620
12/17/2011  645
12/18/2011  650
12/19/2011  639
12/20/2011  620
12/21/2011  600
12/22/2011  550
12/23/2011  600
12/24/2011  610
12/25/2011  590
12/26/2011  750
12/27/2011  750
12/28/2011  666
12/29/2011  678
12/30/2011  800
12/31/2011  750 
```

我真的很感激这方面的任何帮助。我正在处理时间序列数据，需要能够根据历史数据创建预测。

1.  首先，我尝试将其转换为`xts`：

    ```
    x.xts <- xts(x$Used, x$Date) 
    ```

2.  然后，我转换`x.xts`为常规时间序列：

    ```
    x.ts <- as.ts(x.xts) 
    ```

3.  将值放入`ets`：

    ```
    x.ets <- ets(x.ts) 
    ```

4.  进行了 10 个时期的预测：

    ```
    x.fore <- forecast(x.ets, h=10) 
    ```

5.  `x.fore`这是：

    ```
     Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
    87       932.9199 831.7766 1034.063 778.2346 1087.605
    88       932.9199 818.1745 1047.665 757.4319 1108.408
    89       932.9199 805.9985 1059.841 738.8103 1127.029
    90       932.9199 794.8706 1070.969 721.7918 1144.048
    91       932.9199 784.5550 1081.285 706.0153 1159.824
    92       932.9199 774.8922 1090.948 691.2375 1174.602
    93       932.9199 765.7692 1100.071 677.2849 1188.555
    94       932.9199 757.1017 1108.738 664.0292 1201.811
    95       932.9199 748.8254 1117.014 651.3717 1214.468
    96       932.9199 740.8897 1124.950 639.2351 1226.605 
    ```

6.  当我尝试绘制 时`x.fore`，我得到一个图表，但 x 轴显示的是数字而不是日期：

![在此处输入图像描述](../Images/c436418cf9986b39c8bf465f73b54672.png)

我正在做的步骤是否正确？如何更改 x 轴以读取显示日期？

我非常感谢您的任何意见。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-27T08:20:36.040

这是我所做的：

```
x$Date = as.Date(x$Date,format="%m/%d/%Y")
x = xts(x=x$Used, order.by=x$Date)
# To get the start date (305)
#     > as.POSIXlt(x = "2011-11-01", origin="2011-11-01")$yday
##    [1] 304
# Add one since that starts at "0"
x.ts = ts(x, freq=365, start=c(2011, 305))
plot(forecast(ets(x.ts), 10)) 
```

导致：

![示例输出](../Images/a139da1111c3b7082686afd1af466e55.png)

我们可以从中学到什么：

*   您的许多步骤可以组合起来，减少您创建的中间对象的数量
*   输出仍然不如@joran 漂亮，但它仍然易于阅读。`2011.85`表示“天数`365*.85`”（一年中的第 310 天）。
*   可以通过使用来确定一年中的哪一天，`as.POSIXlt(x = "2011-11-01", origin="2011-11-01")$yday`并且可以通过使用类似的东西来确定从天数中的日期`as.Date(310, origin="2011-01-01")`

## 更新

您可以放弃更多的中间步骤，因为没有理由首先将您的数据转换为 xts。

```
x = ts(x$Used, start=c(2011, as.POSIXlt("2011-11-01")$yday+1), frequency=365)
# NOTE: We have only selected the "Used" variable 
# since ts will take care of dates
plot(forecast(ets(x), 10)) 
```

这给出了与上图完全相同的结果。

## 更新 2

基于@joran 提供的解决方案，您可以尝试：

```
# 'start' calculation = `as.Date("2011-11-01")-as.Date("2011-01-01")+1`
# No need to convert anything to dates at this point using xts
x = ts(x$Used, start=c(2011, 305), frequency=365)
# Directly plot your forecast without your axes
plot(forecast(ets(x), 10), axes = FALSE)
# Generate labels for your x-axis
a = seq(as.Date("2011-11-01"), by="weeks", length=11)
# Plot your axes.
# `at` is an approximation--there's probably a better way to do this, 
# but the logic is approximately 365.25 days in a year, and an origin
# date in R of `January 1, 1970`
axis(1, at = as.numeric(a)/365.25+1970, labels = a, cex.axis=0.6)
axis(2, cex.axis=0.6) 
```

这将产生：

![第二次尝试](../Images/f1057c399b300c4be9581f660efb9244.png)

原始代码中的部分问题是，在将数据转换为`xts`对象并将其转换为`ts`对象后，您会丢失`forecast`点中的日期。

将输出的第一列 ( `Point`)`x.fore`与以下内容进行比较：

```
> forecast(ets(x), 10)
         Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
2012.000       741.6437 681.7991 801.4884 650.1192 833.1682
2012.003       741.6437 676.1250 807.1624 641.4415 841.8459
2012.005       741.6437 670.9047 812.3828 633.4577 849.8298
2012.008       741.6437 666.0439 817.2435 626.0238 857.2637
2012.011       741.6437 661.4774 821.8101 619.0398 864.2476
2012.014       741.6437 657.1573 826.1302 612.4328 870.8547
2012.016       741.6437 653.0476 830.2399 606.1476 877.1399
2012.019       741.6437 649.1202 834.1672 600.1413 883.1462
2012.022       741.6437 645.3530 837.9345 594.3797 888.9078
2012.025       741.6437 641.7276 841.5599 588.8352 894.4523 
```

希望这可以帮助您理解原始方法的问题，并提高您在 R 中处理时间序列的能力。

## 更新 3

***最终的，更准确的解决方案——因为我正在避免我现在应该做的其他工作......***

使用该`lubridate`包更好地处理日期：

```
require(lubridate)
y = ts(x$Used, start=c(2011, yday("2011-11-01")), frequency=365)
plot(forecast(ets(y), 10), xaxt="n")
a = seq(as.Date("2011-11-01"), by="weeks", length=11)
axis(1, at = decimal_date(a), labels = format(a, "%Y %b %d"), cex.axis=0.6)
abline(v = decimal_date(a), col='grey', lwd=0.5) 
```

导致：

![最终情节](../Images/00c3b7866745568f3bcba5efffbb8e16.png)

请注意确定`ts`对象开始日期的替代方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-24T16:55:27.710

如果您对特定模型没有任何偏好，我建议您使用适用于多种情况的模型：

```
library(forecast)
t.ser <- ts(used, start=c(2011,1), freq=12)
t.ets <- ets(t.ser)
t.fc <- forecast(t.ets,h=10) 
```

这将为您提供未来 10 个月的预测。

由于更具技术性，它使用指数平滑法，这是一般情况下的不错选择。根据数据的类型，可能会有更好的特定于您使用的模型，但这`ets`是一个很好的通用选择。

需要强调的是，由于您没有完成两个时期（少于 24 个月），因此该模型无法检测到纬度，因此不会将其包含在计算中。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-27T04:55:23.360

更改绘图以显示日期相当容易，只需抑制原始绘图中的轴，然后自己绘制它们：

```
plot(x.fore,axes = FALSE)
axis(2)
axis(1,at = pretty(1:72,n = 6),
       labels = (x$Date[1]-1) + pretty(1:72,n = 6),
       cex.axis = 0.65) 
```

![在此处输入图像描述](../Images/06e1864bf50baf775064b74d042d567e.png)

# php - 在php中用双引号替换空字符串

> ID：10302268
> 
> 赞同：-1
> 
> 时间：2012-04-24T16:43:26.417
> 
> 标签：php, arrays, replace, double-quotes

> **可能重复：**
> [在关联数组中搜索和替换](https://stackoverflow.com/questions/7142627/search-and-replace-inside-an-associative-array)

我想这可能以前被问过。但我只想要一个简单的解决方案。

我有一个这样的数组：

```
 Array (   "name" => "Krish",
            "age" => "27",
            "COD" => ""
        ) 
```

我想用“0”替换“”

它是一个多维数组。返回值也应该是数组。

编辑：我尝试了 preg_replace 和 str_replace。出于某种原因，这些对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:47:15.120

```
$array = array(
    "name" => "Krish",
    "age" => "27",
    "COD" => ""
); 
```

你可以循环数组并替换你想要的

```
foreach($array as $key => $value)
{
    if($value == "") $array[$key] = 0;
} 
```

笔记：

如果你知道它是什么键，你可以这样做

```
$array['cod'] = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:50:29.227

```
$entry = array("name" => "Krish",
               "age" => "27",
               "COD" => "");
$arr = array_filter($entry, 'valcheck');
print_r($entry); //ORIGINAL ARRAY
print_r($arr); //MODIFIED ARRAY
function valcheck($var)
{
    if($var === "")
        return 0;
    else
        return $var;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T16:48:04.343

如果您的数组是`$array`：

```
$array['COD'] = "0"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T16:50:04.683

```
<?php
$arr=array(
    "name" => "Krish",
    "age" => "27",
    "COD" => ""
);

print_r(array_map(function($i){return (''===$i)?0:$i;},$arr));
?> 
```

# c# - 使用 Ninject 向 Nlog 添加依赖注入

> ID：10302269
> 
> 赞同：1
> 
> 时间：2012-04-24T16:43:31.710
> 
> 标签：c#, dependency-injection, ninject, nlog, ninject-extensions

我正在尝试使用[Ninject将依赖注入添加到](http://www.ninject.org/)[Nlog](http://nlog-project.org/)以进行单元测试，但我无法让它工作。:( 调用 GetCurrentClassLogger() 时出现 NullReferenceException。我是 Nlog 和 Ninject 的新手，这实际上是我第一次使用它们。

**主要的**

```
using NLog;
using Ninject;
using Ninject.Extensions.Logging;
using Ninject.Extensions.Logging.NLog2;
public class Program
{
    static void Main(string[] args)
    {
        var kernel = new StandardKernel(new NLogModule());
        var logFactory = kernel.Get<ILoggerFactory>();
        var run = new MyClass(logFactory);
    }
} 
```

**我的课**

```
using Ninject.Extensions.Logging;
public class MyClass
{
    private readonly ILogger _log;

    public MyClass(ILoggerFactory logFactory)
    {
        _log = logFactory.GetCurrentClassLogger();
    }

    public void DoWork()
    {
        _log.Info("Doing work!");
    }
} 
```

希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:25:11.570

这就是我最终解决它的方式。感谢 Claus Jørgensen 在 IRC 上帮助我 :)

显然，在使用 NLog 扩展时有一些自动绑定，这样做`new StandardKernel(new NLogModule());`会导致模块被加载两次。

**主要的**

```
using Ninject;
public class Program
{
    static void Main(string[] args)
    {
        var kernel = new StandardKernel();
        var run = kernel.Get<MyClass>();
        run.DoWork();
    }
} 
```

希望这可以帮助某人。

# c# - 从 Windows 服务打印，无对话框，无用户交互

> ID：10302271
> 
> 赞同：3
> 
> 时间：2012-04-24T16:43:36.927
> 
> 标签：c#, windows, service, printing

我想使用 Visual Studio 2010 从 C# 中的 Windows 服务进行打印。到目前为止，我仅通过使用此处找到的代码部分成功：

[从没有打印对话框的 Windows 服务打印 html 文档](https://stackoverflow.com/questions/419412/print-html-document-from-windows-service-without-print-dialog)

我目前遇到的问题有两个，我只是通过允许服务与桌面交互才发现的：

1) 当 URL 作为 HTML 位置输入时，它将请求该位置的凭据（我无法以任何方式更改的网络共享 IIS Web 服务器，它请求用户名和密码来访问信息）。

2）输入凭据后，默认打印机始终是 XPS 打印机，无论我对 SetDefaultPrinter 做什么（我发现了两种不同的方法）。我发现这是因为我要打印的打印机也是网络打印机，本地系统帐户无法访问（显然）。我还没有找到解决这个问题的方法。

我想通过以编程方式输入所需的凭据（这是一个网络共享凭据集）然后打印到网络打印机来解决这两个问题。在其他桌面应用程序中，我已成功打印到这些网络打印机中的每一个，即使我没有安装每一个。

尝试使用我的凭据而不是本地系统帐户登录并不能解决这两个问题。我正在使用 Windows XP。

假设我让它工作，我还需要在另一台服务器上安装服务，所以如果需要预安装每台打印机，我需要知道要采取哪些步骤来确保本地系统帐户可以访问它们。我将安装的服务器可能是 Windows Server 2003 或 2008，但将具有与开发机器相同的网络访问权限。

编辑：我尝试了一个解决方案，让它作为其他帐户登录，所有这些帐户都应该有凭据（事实上，如果在作为本地系统运行时输入这些凭据并进行桌面交互，这些凭据就会被接受）。尝试过此操作的每个用户都将默认打印机设置为我尝试测试打印的打印机，但没有打印。我唯一确定它正在尝试使用 XPS 打印机的时间是当它作为本地系统登录并进行桌面交互时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:01:59.410

不要将服务作为本地系统运行。它没有您访问网络资源所需的权限。创建一个用户并在其下运行服务，如果您在域中，请确保它是域用户而不是本地用户。您需要以该用户身份登录并在运行服务的计算机上安装要使用的打印机。此外，如果 IIS 应用程序使用 Windows 身份验证，请查看您运行服务的帐户是否可以被授予访问 Web 应用程序的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-14T16:58:19.530

我有这个问题，这个技巧解决了它

转到服务--->双击所需的服务--->继续登录选项卡

提供安装打印机的登录凭据。

请参阅下面的屏幕截图。

![在此处输入图像描述](../Images/8b2263d600de7aeb322152a39fc99516.png)

# c# - DataGridView 绑定到两个表

> ID：10302272
> 
> 赞同：0
> 
> 时间：2012-04-24T16:43:37.210
> 
> 标签：c#, sql, datagridview, datatable

我有两张桌子。大部分数据来自第一个表，但还有第二个表，其中有一列我想在我的 UI 中显示

这是我的 SQL 查询

```
String sqlQuery = "SELECT u.CallerName, t.* FROM users u INNER JOIN tickets t ON u.id = t.user WHERE u.CallerName = 'tim.smith'"; 
```

我正在使用 WinForms

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:00:40.737

如果您的查询结果是[DataTable](http://msdn.microsoft.com/en-us/library/t31h6yhs.aspx)，那么您可以使用[Merge](http://msdn.microsoft.com/en-us/library/system.data.datatable.merge.aspx)函数来合并两个表。

```
DataTable table1 = GetTable1Data(...);
DataTable table2 = GetTable2Data(...);

table1.Merge(table2, true); 
```

或者，如果您的查询结果是[List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)，那么您可以使用与 DataTable 情况相同的方法，使用[AddRange](http://msdn.microsoft.com/en-us/library/z883w3dc%28v=vs.100%29.aspx)函数：

```
List<YourClassType> list1 = GetList1Data(...);
List<YourClassType> list2 = GetList2Data(...);

list1.AddRange(list2, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:50:32.037

看起来你做得很好。与 DataGridView 绑定时，您可以使用： `Eval("CallerName")` 访问另一列，但该列应该像所有其他列一样工作。

# javascript - 电子邮件中的非网络字体

> ID：10302274
> 
> 赞同：2
> 
> 时间：2012-04-24T16:43:44.467
> 
> 标签：javascript, html, css

现在是否支持将非网络字体放入电子邮件？不只是使用@font-face，也许是另一种方法？

我从一段时间前发现了这个[SO 问题](https://stackoverflow.com/questions/1874718/font-face-support-in-major-email-clients)，以及大约同一时期的其他一些问题和文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:46:10.143

不一贯。有一些流行的电子邮件客户端仍然会从 HTML 电子邮件中删除所有 CSS。

我能够在 Campaign Monitor 的网站上找到一篇博客文章，其中包含使用这种技术的一些测试结果。几乎所有的电子邮件客户端都特别去掉了@font-face，不管它们是否支持一般的 CSS：http: [//www.campaignmonitor.com/blog/post/3044/does-font-face-work-in-email/](http://www.campaignmonitor.com/blog/post/3044/does-font-face-work-in-email/)。

最好的选择是使用图像，这不是一个很好的解决方案，原因有很多，主要原因是图像通常默认被阻止，并且您希望客户无论如何都能够查看电子邮件的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:52:26.227

这行不通。基于 Web 的电子邮件系统将简单地删除您的字体声明。MS Outlook 使用 MS-Word 引擎来显示邮件，但无法做到这一点。

就 HTML 电子邮件而言，它仍然是 1999 年，并且会在很长一段时间内保持这种状态。

# java - 矩形碰撞检测算法一半工作

> ID：10302276
> 
> 赞同：1
> 
> 时间：2012-04-24T16:43:46.907
> 
> 标签：java, algorithm, collision-detection, slick2d

我正在 slick2d + java 中编写一个碰撞检测算法，我最终将在我将制作的平台游戏中使用它。该算法的工作原理是检测玩家与矩形重叠的程度，然后通过重叠将玩家移出矩形。问题是，该算法有很多我不知道如何解决的问题。首先，有时玩家离开矩形太远，所以看起来它正在反弹。其次，有时玩家能够在矩形内移动一个很小但很明显的量。最后，如果我提高速度，有时玩家可以一直穿过矩形。这是一个相当模糊的问题，但我真的需要一些帮助来找出问题所在。任何想法都将不胜感激。

算法：

```
public void Collision(Polygon player, Polygon poly, Vector2f translation){
    Vector2f magnitude = new Vector2f();

    //Find the vectre of each object
    Vector2f p1Centre = new Vector2f(player.getX() + (player.getWidth()/2), player.getY() + (player.getHeight()/2));
    Vector2f p2Centre = new Vector2f(poly.getX() + (poly.getWidth()/2), poly.getY() + (poly.getHeight()/2));

    //Calculate the distance between the two
    Vector2f distance = new Vector2f(p1Centre);
    distance.sub(p2Centre);

    //Get the absolute distance
    Vector2f absDistance = new Vector2f(distance.x<0 ? -distance.x : distance.x, distance.y<0 ? -distance.y : distance.y);

    //Get the combined half widths and heights of each object
    Vector2f halvedBounds = new Vector2f((player.getWidth() + poly.getWidth())/2.0f, (player.getHeight() + poly.getHeight())/2.0f);

    //If the absolute distance is less thate the halved widths heights then there is a collision
    if((absDistance.x < halvedBounds.x) && (absDistance.y < halvedBounds.y)){

        //Set the magnitude vector to the halved bounds minus the absolute distance
        magnitude.x = halvedBounds.x - absDistance.x;
        magnitude.y = halvedBounds.y - absDistance.y;

        //Only react to the lesser overlap;
        if(magnitude.x < magnitude.y){
            magnitude.x = (distance.x > 0) ? magnitude.x : -magnitude.x;
            magnitude.y = 0;
        }
        else{
            magnitude.y = (distance.y > 0) ? magnitude.y : -magnitude.y;
            magnitude.x = 0;
        }

        //Debug
        System.out.println(magnitude.x+"            "+magnitude.y);
        System.out.println(translation.x+"            "+translation.y+"\n");

        //Add the magnitude to the player position
        position.add(magnitude);
    }       
} 
```

完整来源：

```
import java.util.ArrayList;

import org.newdawn.slick.AppGameContainer;
import org.newdawn.slick.BasicGame;
import org.newdawn.slick.Color;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.Input;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.geom.Polygon;
import org.newdawn.slick.geom.Vector2f;

public class TestCode extends BasicGame {

    private Vector2f position = new Vector2f(300, 300);

    private ArrayList<Polygon> solids;
    private Polygon player;

    public TestCode(String title) {
        super(title);
    }

    public static void main(String[] args) throws SlickException{
        AppGameContainer game = new AppGameContainer(new TestCode("test"));
        game.setDisplayMode(800, 600, false);
        game.start();
    }

    @Override
    public void render(GameContainer gc, Graphics g) throws SlickException {

        if(gc.isPaused()){
            g.setColor(Color.red);
            g.drawString("Paused", 90, 10);
        }else{
            g.setColor(Color.green);
            g.drawString("Playing", 90, 10);
        }

        g.setColor(Color.red);
        for(Polygon p : solids)
            g.fill(p);

        g.setColor(Color.cyan);
        g.fill(player);

    }

    @Override
    public void init(GameContainer gc) throws SlickException {      
        gc.setVSync(true);

        solids = new ArrayList<Polygon>();

        player = new Polygon(new float[]{
                50, 50,  // upper left point
                70, 50,  // upper right
                70, 90, // lower right
                50, 90   // lower left
        }); 

        for(int i=0, x=200, y=200; i<10; i++, x+=40){
            solids.add(new Polygon(new float[]{
                    x, y,  // upper left point
                    x+40, y,  // upper right
                    x+40, y+40, // lower right
                    x, y+40   // lower left
            }));    
        }

    }

    @Override
    public void update(GameContainer gc, int delta) throws SlickException {

        Input input = gc. getInput();

        Vector2f translation = new Vector2f(0, 0);

        if(input.isKeyDown(Input.KEY_UP))
            translation.y = -1f;
        if(input.isKeyDown(Input.KEY_DOWN))
            translation.y = 1f;
        if(input.isKeyDown(Input.KEY_LEFT))
            translation.x = -1f;
        if(input.isKeyDown(Input.KEY_RIGHT))
            translation.x = 1f;

        translation.normalise();
        translation.x*=2;
        translation.y*=2;

        position.add(translation);

        for(Polygon p : solids)
            Collision(player, p, translation);

        player.setLocation(position);
    }

    public void Collision(Polygon player, Polygon poly, Vector2f translation){
        Vector2f magnitude = new Vector2f();

        //Find the vectre of each object
        Vector2f p1Centre = new Vector2f(player.getX() + (player.getWidth()/2), player.getY() + (player.getHeight()/2));
        Vector2f p2Centre = new Vector2f(poly.getX() + (poly.getWidth()/2), poly.getY() + (poly.getHeight()/2));

        //Calculate the distance between the two
        Vector2f distance = new Vector2f(p1Centre);
        distance.sub(p2Centre);

        //Get the absolute distance
        Vector2f absDistance = new Vector2f(distance.x<0 ? -distance.x : distance.x, distance.y<0 ? -distance.y : distance.y);

        //Get the combined half widths and heights of each object
        Vector2f halvedBounds = new Vector2f((player.getWidth() + poly.getWidth())/2.0f, (player.getHeight() + poly.getHeight())/2.0f);

        //If the absolute distance is less thate the halved widths heights then there is a collision
        if((absDistance.x < halvedBounds.x) && (absDistance.y < halvedBounds.y)){

            //Set the magnitude vector to the halved bounds minus the absolute distance
            magnitude.x = halvedBounds.x - absDistance.x;
            magnitude.y = halvedBounds.y - absDistance.y;

            //Only react to the lesser overlap;
            if(magnitude.x < magnitude.y){
                magnitude.x = (distance.x > 0) ? magnitude.x : -magnitude.x;
                magnitude.y = 0;
            }
            else{
                magnitude.y = (distance.y > 0) ? magnitude.y : -magnitude.y;
                magnitude.x = 0;
            }

            //Debug
            System.out.println(magnitude.x+"            "+magnitude.y);
            System.out.println(translation.x+"            "+translation.y+"\n");

            //Add the magnitude to the player position
            position.add(magnitude);
        }       
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:46:20.580

因此，只需扭转您的问题：在搬家前检查，而不是在搬家后检查。如果玩家将降落在矩形中，则不允许他。

这是您问题中更重要的部分：“仅接触表面”有多远（实际上取决于您如何进行碰撞检测；如果您正在做边界框碰撞，它会转化为计算，如果您正在做像素完美的碰撞，您可能需要测试一些假设情况）。

由于这种情况经常发生，请尽量避免不必要的工作（为什么逐个像素进行测试，间隔分割可能是更好的方法；首先进行边界框计算，然后像素完美；对于“足够矩形”的物体边界框~~像素完美.. .)

欢迎来到编程的世界，它更多的是关于解决问题，而不是把一堆“画一个尖顶，将它移动 x 像素和转到 10”语句一起拍打;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T21:45:24.783

高速和通过矩形的玩家的问题与您对碰撞数据进行采样的频率有关。

假设我真的很笨，我每秒只检查一次碰撞。如果一个物体以每秒 15 米的速度移动，并且有一个 1 平方米的范围。如果我在物体距离广场 7 米时检查碰撞，然后一秒钟后，我会完全错过物体穿过广场的情况。

许多碰撞检测库处理这个问题的方式是它们比常规对象更频繁地检查快速移动的对象。发生这种情况时，您的播放器移动有多“快”？

# iphone - 如何为 iPad 创建内部应用商店

> ID：10302279
> 
> 赞同：0
> 
> 时间：2012-04-24T16:44:02.710
> 
> 标签：iphone, app-store, updates, in-house-distribution

我们计划为不同的客户创建多个应用程序。对于相同的分发，我们正在考虑是否可以创建自己的应用程序商店并要求客户从该空间获取应用程序。另外，我可以控制这些应用程序的可见性，以使客户端 A 看不到客户端 B 可见的应用程序吗？另外，在这种情况下，如何将应用程序的更新推送给消费者？我不确定这是否属于企业分发，因为该应用程序不在公司范围内，而是针对外部受众。提前致谢。问候，〜维沙尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:30:36.450

Apple 不允许内部应用商店将应用分发给企业注册的 iOS 开发人员以外的员工。因此，内部应用商店不能用于外部受众。

Ad Hoc 部署仅限于每年 100 台设备，因此也可能不适合这种情况。

替代方案是让每个客户以自己的名义注册为企业开发人员，并在自己的员工专用防火墙后面创建自己的应用商店；或者让您尝试在 Apple 的公共 App Store 中分发应用程序，这意味着下载不能仅限于特定客户端。

# jquery - 使用 jQuery Quicksand 时 CSS 冒泡

> ID：10302280
> 
> 赞同：0
> 
> 时间：2012-04-24T16:44:04.487
> 
> 标签：jquery, css, quicksand

我正在使用 jQuery Quicksand 创建可过滤的文章组合：

[http://davekiss.com/new/](http://davekiss.com/new/)

问题是，当单击侧栏段落中的过滤器（视频、网站、动态图形）时，CSS 会在被过滤的文章上加倍，并且在动画完成之前无法正确定位。该插件正在添加`top: 60px; left: 416px;`到过滤集中的第一篇文章中，将所有内容都推过去。

继续点击`website`查看效果。

我相信这是有问题的 CSS，但我不确定如何调整它以使其与插件配合得很好：

```
article.project-container {
    float: left;
    position: relative;
    margin: 5px;
    padding: 10px;
    background: none repeat scroll 0 0 #FFFFFF;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.07);
} 
```

访问[http://razorjack.net/quicksand](http://razorjack.net/quicksand)并单击过滤器（一切、应用程序、实用程序）以查看预期效果。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:58:31.797

重写你的规则如下：

```
article.project-container {
    float: left;
    position: relative;
    top: 5px !important;
    left: 5px !important;
    margin: 5px !important;
    padding: 10px;
    background-color: #fff;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.07);
} 
```

`!important`声明用于覆盖插件的规则。

（`background`也被重写为为单个属性指定简写是多余的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:51:46.213

来自官方 github 页面....

> 流沙使用 position: absolute 为元素设置动画。这意味着容器不能使用绝对定位，因为它破坏了流沙的坐标计算。在我尝试在你的 section.thumbs 中禁用 position: absolute 之后，流沙开始完美地工作。而且由于您的布局似乎不需要这种定位（常规浮动可以完成这项工作），这将解决问题。

# communication - 飞镖隔离为工人

> ID：10302283
> 
> 赞同：6
> 
> 时间：2012-04-24T16:44:18.113
> 
> 标签：communication, dart, dart-isolates

**编辑以使问题更清楚。**

我正在尝试在 Dart 中使用 Isolates（或 Web Workers）。我能找到的在主线程和隔离线程之间进行通信的唯一方法是*发送*和*调用，然后*从主线程。但这是主线程将一些数据传递给隔离的好方法。

如果我希望隔离者成为生成信息的人怎么办？就像一个游戏引擎，它在一个工作线程中完成所有物理，然后将更新的世界信息发送到主线程？在 JavaScript 中，您可以随时发送数据。Dart 中是否有有效的方法？还是我还要等主线程给我打电话，然后再传给它？

PS我想知道，是否*调用&然后*阻塞线程直到回复完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-20T03:57:43.353

从 Dart 1.0 开始，您可以像这样使用隔离：

```
import 'dart:isolate';
import 'dart:async';

void doStuff(SendPort sendPort) {
  print('hi from inside isolate');
  ReceivePort receivePort = new ReceivePort();
  sendPort.send(receivePort.sendPort);

  receivePort.listen((msg) {
    print('Received in isolate: [$msg]');
    sendPort.send('ECHO: $msg');
  });

}

void main() {
  SendPort sendPort;

  ReceivePort receive = new ReceivePort();
  receive.listen((msg) {
    if (sendPort == null) {
      sendPort = msg;
    } else {
      print('From isolate: $msg');
    }
  });

  int counter = 0;

  Isolate.spawn(doStuff, receive.sendPort).then((isolate) {
    new Timer.periodic(const Duration(seconds:1), (t) {
      sendPort.send('Count is ${counter++}');
    });
  });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T21:22:51.623

**警告：此代码仅适用于非常旧版本的 Dart。它不适用于 Dart 1.0 或更高版本。**

正如您提到将消息发布到隔离区，您需要处理它的发送端口。

```
#import('dart:isolate');

main() {
  SendPort sendPort = spawnFunction(doWork);
  sendPort.call("hey 1").then((String res) => print("result was: [$res]"));
  sendPort.call("hey 2").then((String res) => print("result was: [$res]"));
}

doWork() {
  port.receive((msg, reply) {
    msg = "msg $msg";
    reply.send(msg);
  });
} 
```

然而，由于 Dart 主线程本身就是一个隔离，你可以使用全局**端口**函数向它发送数据：

```
#import('dart:isolate');
#import('dart:io');

main() {
   port.receive((data, reply) {
       // in here you can access objects created in the main thread
       print("handle [${data['text']}] for index ${data['index']}");
   });

   SendPort workPort = spawnFunction(doWork);
   workPort.send("msg", port.toSendPort());
}

doWork() {
   port.receive((msg, reply) {
      int i = 0;
      new Timer.repeating(1000, (Timer timer) {
         i++;
         var data = {
            "text": "$msg $i",
            "index": i
         };
         print("sending $data");
         reply.send(data);
      });
   });
} 
```

请注意，对于可以在隔离之间来回发送的内容存在某些限制，并且当前隔离在 JS 和 VM 上的行为不同。当前的限制在[这里](http://api.dartlang.org/dart_isolate/SendPort.html#send)得到了很好的描述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-07T18:32:47.387

这是一个示例，其中父进程创建了两个隔离，然后两个隔离也与父进程一起相互通信。

家长代码：

```
import 'dart:isolate';
import 'dart:html';
import 'dart:async';

main() {
  querySelector('#output').text = 'Your Dart app is running.';
  int counter = 0;

  // Parent - Child 1
  SendPort csendPort1;
  ReceivePort receivePort1 = new ReceivePort();
  // Parent - Child 2
  SendPort csendPort2;
  ReceivePort receivePort2 = new ReceivePort();
  // Child1 - Child2
  SendPort csendPort11;
  SendPort csendPort12;

  // Child 1
  receivePort1.listen((msg) {
    if (csendPort1 == null) {
      csendPort1 = msg;
    } else if (csendPort11 == null) {
      csendPort11 = msg;
    } else {
      print('$msg');`enter code here`
    }
  });

  bool child1 = false;
  Isolate.spawnUri(Uri.parse('child.dart'), [], receivePort1.sendPort).then((isolate) {
    print('Child 1 isolate spawned');
    new Timer.periodic(const Duration(milliseconds: 500), (t) {
      if (csendPort11 != null && csendPort12 != null && child1 == false) {
        child1 = true;
        csendPort12.send(csendPort11);
      } else {
        csendPort1.send('Parent-Child1: ${counter++}');
      }
    });
  });

  // Child 2
  receivePort2.listen((msg) {
    if (csendPort2 == null) {
      csendPort2 = msg;
    } else if (csendPort12 == null) {
      csendPort12 = msg;
    } else {
      print('$msg');
    }
  });

  bool child2 = false;
  Isolate.spawnUri(Uri.parse('child.dart'), [], receivePort2.sendPort).then((isolate) {
    print('Child 2 isolate spawned');
    new Timer.periodic(const Duration(milliseconds: 500), (t) {
      if (csendPort11 != null && csendPort12 != null && child2 == false) {
        child2 = true;
        csendPort11.send(csendPort12);
      } else {
        csendPort2.send('Parent-Child2: ${counter++}');
      }
    });
  });
} 
```

子代码：

```
import 'dart:isolate';
import 'dart:async';

int pcounter = 0;
int ccounter = 0;

SendPort csendPort;
void handleTimeout() {
  csendPort.send("${ccounter++}");
}

main(List<String> args, SendPort psendPort) {
  // Parent Comm
  ReceivePort creceivePort1 = new ReceivePort();
  psendPort.send(creceivePort1.sendPort);

  creceivePort1.listen((msg) {
    psendPort.send('Child-Parent: ${pcounter++} - ${msg}');
  });

  // Child-Child Comm
  ReceivePort creceivePort2 = new ReceivePort();
  psendPort.send(creceivePort2.sendPort);

  creceivePort2.listen((msg) {
    if (csendPort == null) {
      csendPort = msg;
      csendPort.send("${ccounter++}");
    } else {
      print("Child-Child: $msg");
      var duration = const Duration(milliseconds: 2000);
      new Timer(duration, handleTimeout);
    }
  });
} 
```

HTML 代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="scaffolded-by" content="https://github.com/google/stagehand">
    <title>WebIsolateTest</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="main.dart" type="application/dart"></script>
    <script defer src="packages/browser/dart.js"></script>
</head>

<body>

  <div id="output"></div>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-22T10:24:49.180

您现在可以使用[MessageBox](http://api.dartlang.org/docs/bleeding_edge/dart_isolate/MessageBox.html)类以相反的方式进行通信。此代码在收到 MessageBox 的 Sink 端后立即从 Isolate 代码发送一条消息。主线程接收 Isolate 发送的消息，并在 Dartium 的控制台上打印出来。收到接收器后，您可以启动游戏逻辑并使用接收到的接收器对象发送更新。

```
import 'dart:html';
import 'dart:isolate';

void main() {
  IsolateSink isolateSink = streamSpawnFunction(myIsolateEntryPoint);
  MessageBox isolateMessageBox = new MessageBox();
  isolateSink.add(isolateMessageBox.sink);
  isolateMessageBox.stream.listen((String data) {
    print(data);
  });
}

void myIsolateEntryPoint() {
  stream.listen((IsolateSink messageBoxSink) {
    messageBoxSink.add("Test");
  });
} 
```

# andengine - AndEngine 中的 A* Pathing 能否允许精灵确定“不正确”的路径并做出“随机”选择？

> ID：10302284
> 
> 赞同：0
> 
> 时间：2012-04-24T16:44:19.167
> 
> 标签：andengine, a-star, heuristics

我目前正在使用 AndEngine 为 Android 平台开发塔防游戏。我的敌人（动画精灵扩展类）有硬编码路径。我想切换到更好的东西，敌人可以自己决定去哪里。我正在使用 TMX 地图。请参考以下地图：

![](../Images/1ddf32daeffeb3bc1de51d184f60c3d2.png)

2 个六边形图块是敌人的生成位置。我有 2 个关于 A* Pathing 的问题。

在 A 点是否有可能确保敌人不会转向另一个生成位置的路径？

据我所知，A* Pathing 寻找最短距离，那么有没有办法让敌人随机选择在 B 点走哪条路？

如果 A* Pathing 对于这些测试用例来说已经足够了，你能给我一个教程/示例的链接吗？我没有通过谷歌找到太多帮助。

如果 A* Pathing 无法做到这一点，我还有哪些其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:49:19.260

为了使用 A*，您需要知道敌人试图到达的位置。如果你在右边的两个出口点之间随机化敌人的目标位置，它们应该可以正常工作。

# c# - C# - 如何验证字符串的格式为 hh:mm:ss:fff？

> ID：10302286
> 
> 赞同：2
> 
> 时间：2012-04-24T16:44:27.197
> 
> 标签：c#, validation, timecodes

我想知道是否有人可以帮助我解决这个问题。我需要验证来自文本框的文本输入。我需要确保它采用 TimeSpan 可接受的格式。期望的格式应该是 hh:mm:ss:fff（即小时、分钟、秒和毫秒。例如 15:30:45:040）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T16:47:09.790

如果您正在谈论在服务器端进行验证，那么使用`TimeSpan.TryParse()`将是最简单和最简单的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T16:46:41.663

我会屏蔽 ##:##:##:### 的输入，以确保您不会让字母和特殊字符不合适。

为了确保您在后端处理有效值，我希望`TimeSpan.TryParse()`您能到达那里。往下看。

```
var val = "00:22:11:424";
TimeSpan ts = new TimeSpan();
TimeSpan.TryParse(val, out ts); 
```

显然 TryParse 将处理异常，因此`TimeSpan.Parse(val)`如果有要向用户显示的异常，您可以自己使用和捕获异常。您还可以在 TryParse 之后检查 ts 的值，以确保该值 >= `TimeSpan.MinValue`...

```
try
{
   var val = "00:22:11:422";
   TimeSpan ts = new TimeSpan();
   ts = TimeSpan.Parse(val);
}
catch(Exception ex)
{
   //do something...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T16:47:23.070

您可以使用 TimeSpan 的[TryParse](http://msdn.microsoft.com/en-us/library/3z48198e.aspx)方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T16:50:17.917

如果您在服务器端进行验证，我会使用`TimeSpan.TryParse`（[此处为 MSDN 链接）。](http://msdn.microsoft.com/en-us/library/3z48198e.aspx)

```
bool isValidTimeSpan(string str)
{
   TimeSpan interval;
   if (TimeSpan.TryParse(value, out interval)) return true;
   return false;
} 
```

另外，我会使用屏蔽编辑，强制用户以您正在寻找的格式输入文本，这不会消除所有错误，但它会毫无疑问地帮助减少问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T16:50:41.113

有很多方法可以做到这一点。使用[`String.Split()`](http://msdn.microsoft.com/en-gb/library/system.string.split%28v=vs.80%29.aspx)并检查是否有由 2 个字符和 组成的 4 个部分[`TimeSpan.TryParse()`](http://msdn.microsoft.com/en-us/library/3z48198e.aspx)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T16:53:03.070

看这个主题： [匹配正则表达式中的小时/分钟/秒 - 更好的方法？](https://stackoverflow.com/questions/1400297/matching-hours-minutes-seconds-in-regular-expressions-a-better-way)

# javascript - 如何在 Handlebars.js 模板上绑定数据以自动更新值？

> ID：10302289
> 
> 赞同：18
> 
> 时间：2012-04-24T16:44:42.407
> 
> 标签：javascript, data-binding, template-engine, handlebars.js

现在有许多[JavaScript MVC 框架](http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed)与[Handlebars.js](http://handlebarsjs.com)一起工作，提供模型/控制器和模板之间的数据绑定。目前我正在单独实现 Handlebars.js （使用[jQuery](http://jquery.com)）并且需要在我的主代码和模板之间绑定数据，以便后者自动更新。在 Handlebars 或插件中有本地方法吗？如果没有，这些 MVC 框架中是否有任何组件可以带来此功能并且可以在没有全栈框架的情况下独立使用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-09T21:26:26.833

看看铆钉：[https](https://github.com/mikeric/rivets) ://github.com/mikeric/rivets 。我使用主干、车把和主干.modelbinding 进行双向更新。效果很好。

Backbone.modelbinding ( [https://github.com/derickbailey/backbone.modelbinding](https://github.com/derickbailey/backbone.modelbinding) ) 已被废弃，而是指铆钉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:31:06.987

听起来您可能只想尝试使用[Backbone 视图](http://backbonejs.org/#View)来呈现您的 Handlebars 模板并在视图“内部”的元素上监听 jQuery 事件。您可以使用 Backbone 视图，而不必使用框架的模型、集合或路由器，但您仍然必须包含完整的 Backbone 库（6.3kb，打包和 gzipped）和下划线，如果大小为考虑。

# git - Git版本的结帐？克隆没有做我想做的事

> ID：10302293
> 
> 赞同：0
> 
> 时间：2012-04-24T16:44:56.197
> 
> 标签：git

我是 Git 新手，但经常使用 SVN。我一直在阅读 Git，因为我们正在为一些工作项目朝着这个方向前进。

我的任务是设置存储库并帮助其他人访问它们。

这是我正在尝试做的事情：

我在远程服务器（我们的 Git 服务器）上配置了一个工作存储库。我能够在我的本地机器上使用以下命令：

```
git clone <url to remote repo> 
```

然后我开始修改和提交。一切都很好。

现在我有另一个用户，在另一台机器上，我希望他可以访问存储库。我希望他能够进行基本的结帐并自己开始编辑文件。我如何在 Git 中管理这个？他需要为自己创建一个工作分支吗？

我尝试使用我使用的相同克隆命令，它给了他一个“空”目录。经过进一步调查，我注意到我有一个“主”副本，这不是我想要的。我继续阅读`clone`我意识到这不是我想要的。`clone`当我为自己（一个分支或其他东西）运行命令时，我得到了什么？

我已经阅读了很多教程、为从 SVN 过渡的人准备的速成课程以及该站点上的一些帖子。我只是无法让事情正常进行。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T16:48:34.223

> 当我为自己（一个分支或其他东西）运行克隆命令时，我得到了什么？

当您运行时`clone`，您将获得存储库的完整副本（包括整个历史记录），*并且*您将获得已签出的工作副本。工作副本就是您正在编辑的内容；存储库是`.git`目录中的所有内容。

如果您正在与其他人合作，您应该都运行相同的`git clone`命令。当您想让您已提交的更改对您的协作者可见时，您运行`git push`将更改发送回远程存储库，并且您的协作者运行`git pull`以更新她的本地存储库和工作副本。

Git Book的[分布式工作流](http://book.git-scm.com/3_distributed_workflows.html)部分对这个主题有一些很好的阅读。

# python - Python中的BDB是什么？

> ID：10302298
> 
> 赞同：6
> 
> 时间：2012-04-24T16:45:07.630
> 
> 标签：python, debugging

我正在查看 Python 标准库并看到 BDB 调试器框架。它有什么用，我能从中获得额外的价值吗？目前我使用 Eclipse/PyDev 和内部调试器，它也支持条件断点。我可以从 BDB 获得新的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T17:00:57.867

该`bdb`模块实现了 的基本调试器工具`pdb.Pdb`，这是用于从终端调试 Python 脚本的具体调试器类。

除非您打算编写自己的调试器用户界面，否则您不需要使用`bdb`.

# actionscript-3 - AS3：如何保存舞台上的每个对象

> ID：10302300
> 
> 赞同：1
> 
> 时间：2012-04-24T16:45:29.810
> 
> 标签：actionscript-3, flash

我正在尝试做类似的事情：

[http://www.personalwine.com/catalog/label_designer_app.php?templateId=5046&action=4C92&userId=0](http://www.personalwine.com/catalog/label_designer_app.php?templateId=5046&action=4C92&userId=0)

在带有 AS3 的 Flash IDE 中。

我的问题是如何保存舞台上的所有对象，将其保存为“模板”并再次使用它 - 不是作为图像，而是作为可以再次编辑的对象。

谁能指出我如何解决这个问题的正确方向。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:05:51.590

也许 xml 保存/加载功能会有所帮助。一旦在保存时创建了某些东西，每个对象的所有属性都会写入一个 xml 文件。如果要重新创建，则解析信息并构建屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:55:08.237

**在哪里？** 您有两种保存数据的选择，您可以将其保存在用户的计算机（客户端）或您自己的服务器（服务器端）上。

**在服务器上** 如果您要使用与服务器端相关的任何东西，显然您将需要一个服务器（和一个数据库）。对于这种用法（小），将 php 与 mysql 一起使用既免费又非常快。您可能还想查看 node.js，因为它对于 actionscript 用户来说可能非常直观，因为 node 是 javascript，并且 node.js 文件和 actionscript 文件的语法和结构非常相似。

**在用户的电脑上** 如果你只是想把数据存储在用户的电脑上，你可以使用一个SharedObject，它将把你需要的所有数据（变量等）保存在用户的电脑上。

这是一个关于如何做到这一点的简短教程：http: [//kirill-poletaev.blogspot.com/2010/07/how-to-save-local-data-with.html](http://kirill-poletaev.blogspot.com/2010/07/how-to-save-local-data-with.html)

这是一个更大更详细的教程： [http ://active.tutsplus.com/tutorials/actionscript/movieclip-reconstruction-with-the-sharedobject-class/](http://active.tutsplus.com/tutorials/actionscript/movieclip-reconstruction-with-the-sharedobject-class/)

基本上，您可以对所有要保存的变量（电影剪辑位置等）执行此操作，然后加载它们。它非常简单，您甚至可以存储整个影片剪辑对象。

# php - 谷歌地理编码 API 为我的服务器和我的网络浏览器提供不同的结果

> ID：10302302
> 
> 赞同：4
> 
> 时间：2012-04-24T16:45:36.897
> 
> 标签：php, geocoding, google-geocoding-api

我正在使用 Google Geocoding API 来获取我网站上不同位置搜索的 lat/lng 坐标。问题在于，对于伦敦地区（它可能不仅限于伦敦，这正是我们大多数用户群所在的地方），例如“滑铁卢”，地理编码 api 正在将不同的结果返回到我的服务器，而不是当我直接输入 url 时我的浏览器。这是为滑铁卢生成的 url：

[http://maps.googleapis.com/maps/api/geocode/xml?address=waterloo,%20london,%20england&bounds=48.8,-11.2|60.9,1.9&sensor=false®ion=uk](http://maps.googleapis.com/maps/api/geocode/xml?address=waterloo,%20london,%20england&bounds=48.8,-11.2|60.9,1.9&sensor=false&region=uk)

如果我将其粘贴到浏览器中，我会得到正确的滑铁卢区域（“滑铁卢，伦敦兰贝斯区，伦敦 SE1，英国”）。但是，当我的服务器从这个 url 检索结果时，它会得到地址“2C Waterloo Rd, London, Greater London NW2 7UA, UK”，它离滑铁卢几英里远。（它也只返回一个结果。）

我的服务器位于英国，在 IP 上进行 GeoIP 确认了这一点。为什么 Google 会向我的服务器返回不同的结果？

（顺便说一句，我的服务器正在使用 PHP5 simplexml_load_file() 来检索结果）

** 我不明白为什么这个问题被标记为另一个问题的重复。这是一个假定重复的问题，丝毫没有回答我的问题，我的问题与企业（仅邮政区域）无关，也没有解释为什么我的服务器与我的 PC 受到不同的对待。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T16:54:21.660

您遇到了一种叫做区域偏差的东西：[https ://developers.google.com/maps/documentation/geocoding/#RegionCodes](https://developers.google.com/maps/documentation/geocoding/#RegionCodes)

传递一个`region=uk`GET 参数，您的结果在任何地方都应该是相同的（即针对英国量身定制的）。

# android - 如何从 java 代码创建 EditText 数字（有符号和无符号十进制）

> ID：10302304
> 
> 赞同：2
> 
> 时间：2012-04-24T16:45:37.890
> 
> 标签：android, android-layout, android-widget

这是一个创建 EditText 表的循环，我希望它们是数字的

```
for (int i = 0; i < 3; i++) {

tableRow = new TableRow(this); //oggetto di tipo tableRow
tableRow.setGravity(Gravity.CENTER);

for (int j = 0; j < 3 ; j++) {

values[i][j] = new EditText(this);
values[i][j].setText(" " + array[count]);
values[i][j].setPadding(10, 10, 10, 10);//spaziatura di ogni cella per i quattro lati
tableRow.addView(values[i][j]);
count++;
}

tableLayout.addView(tableRow);  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T16:46:59.947

```
values[i][j].setInputType(InputType.TYPE_CLASS_NUMBER); 
```

您可以使用上面的代码行

更新尝试以下和他们的组合

我试过组合标志（绝望地看看它是否会起作用）：

```
values[i][j].setInputType(InputType.TYPE_CLASS_NUMBER);
values[i][j].setInputType(InputType.TYPE_NUMBER_FLAG_DECIMAL)
values[i][j].setInputType(InputType.TYPE_NUMBER_FLAG_SIGNED) 
```

有关更多输入类型，请参阅此[链接](http://developer.android.com/reference/android/text/InputType.html)

# reporting-services - SSRS 2005 分组问题：导出到 Excel 时，重复项出现在较低的组级别下方

> ID：10302307
> 
> 赞同：0
> 
> 时间：2012-04-24T16:45:43.800
> 
> 标签：reporting-services, duplicates, grouping, rows

我有一份 SSRS 2005 报告在 SSRS 中显示正常；但是，在导出到 Excel 2007 时，会在第二行分组下方添加一组重复的行。

我对 SSRS 2005 中更高级的报告技术并不十分熟悉，并且正在努力寻找正确的答案。有什么办法可以去掉这个吗？

![Excel 截图](../Images/184244c23dcc0b35738cafce050c39a8.png)

（这里的原图：http: [//i.stack.imgur.com/sCchD.jpg](https://i.stack.imgur.com/sCchD.jpg)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:24:03.193

看起来您的报告矩阵是按年份、员工类别、姓名和办公室分组的。如果每个名称不超过一个办公室，那么解决方案是：

*   删除 Office 上的分组（这也应该删除 Office 列）；
*   在 Name 列的右侧插入一个新列，新列标题设置为 Office，相应的行值表达式设置为`=Fields!Office.Value`。（不要从数据集中拖放列，否则您可能会无意中将 Office 上的分组添加到矩阵中。）

# sql - 从同一个表的列中查看行中的记录

> ID：10302316
> 
> 赞同：1
> 
> 时间：2012-04-24T16:46:11.730
> 
> 标签：sql, sql-server

我正在创建一个视图以显示其中包含合同日期的记录。

此视图的数据来自两个表，一个存储客户详细信息，另一个存储日期信息。

日期本身存储在 DateCol 列中，DateCol 列的 ID 来自 TypeID，例如 118 等于合同开始日期，119 等于结束日期。这将返回大约 250 个结果。

我构建的视图运行对客户端 ID 的查找并显示 date_type 中的日期（即 118 和 119 显示 01/01/2012 和 01/03/2012）。如果我添加显示 120 的第三列，结果总数将减少到 6。

我需要查看所有结果，但我不确定如何构建显示所有这些结果的视图。我无法修改原始数据库，因为它支持 Maximizer。

我们使用的是 SQL 2005，我使用 Management STudio 构建了它，但我的知识有点有限。

这是我的观点的代码：

```
SELECT * 
FROM   dbo.AMGR_Client_Tbl 
       INNER JOIN dbo.FOOTPRINTS_Companies_118 
         ON dbo.AMGR_Client_Tbl.Client_Id = 
            dbo.FOOTPRINTS_Companies_118.Client_Id 
       INNER JOIN dbo.FOOTPRINTS_Companies_119 
         ON dbo.AMGR_Client_Tbl.Client_Id = 
            dbo.FOOTPRINTS_Companies_119.Client_Id 
       INNER JOIN dbo.FOOTPRINTS_Companies_120 
         ON dbo.AMGR_Client_Tbl.Client_Id = 
            dbo.FOOTPRINTS_Companies_120.Client_Id 
       INNER JOIN dbo.FOOTPRINTS_Companies_121 
         ON dbo.AMGR_Client_Tbl.Client_Id = 
            dbo.FOOTPRINTS_Companies_121.Client_Id 
WHERE  ( dbo.AMGR_Client_Tbl.Record_Type = '1' ) AND ( dbo.AMGR_Client_Tbl.Name_Type = 'C' ) 
OR ( dbo.AMGR_Client_Tbl.Record_Type = '1' ) AND ( dbo.AMGR_Client_Tbl.Name_Type = 'C' ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:13:43.413

好的，首先您应该在视图中列出您需要的实际列名，而不是使用`*`. 我相信您只需要将`INNER JOIN`s 更改为`LEFT JOIN`s。所以它会是这样的：

```
SELECT [List Your Columns Here]
FROM   dbo.AMGR_Client_Tbl 
       LEFT JOIN dbo.FOOTPRINTS_Companies_118 
         ON dbo.AMGR_Client_Tbl.Client_Id = 
            dbo.FOOTPRINTS_Companies_118.Client_Id 
       LEFT JOIN dbo.FOOTPRINTS_Companies_119 
         ON dbo.AMGR_Client_Tbl.Client_Id = 
            dbo.FOOTPRINTS_Companies_119.Client_Id 
       LEFT JOIN dbo.FOOTPRINTS_Companies_120 
         ON dbo.AMGR_Client_Tbl.Client_Id = 
            dbo.FOOTPRINTS_Companies_120.Client_Id 
       LEFT JOIN dbo.FOOTPRINTS_Companies_121 
         ON dbo.AMGR_Client_Tbl.Client_Id = 
            dbo.FOOTPRINTS_Companies_121.Client_Id 
WHERE  ( dbo.AMGR_Client_Tbl.Record_Type = '1' ) AND ( dbo.AMGR_Client_Tbl.Name_Type = 'C' ) 
OR ( dbo.AMGR_Client_Tbl.Record_Type = '1' ) AND ( dbo.AMGR_Client_Tbl.Name_Type = 'C' ) 
```

另外，您应该注意，您的身上`WHERE`似乎存在重复的情况。

# python - 标准 Python 数据持久化方法的速度

> ID：10302335
> 
> 赞同：-1
> 
> 时间：2012-04-24T16:47:21.983
> 
> 标签：python, database, persistence

你知道什么是速度差异：

*   泡菜
*   搁置
*   sqlite
*   一些 MySQL 连接器
*   MongoDB
*   ...

如果我想存储许多字典，那将是首选方式，有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:01:34.573

不想拖拉评论，所以我来回答。

鉴于你所说：

> 没有服务器，没有现有代码。我只想编写一个程序，将字符串本地存储到文件中的字符串字典或其他任何内容中。没有比这更花哨的了。

我想说，对于如此简单的事情，你最好的选择可能是[JSON](http://docs.python.org/library/json.html)之类的东西。

但是，如果您需要超快，它可能不是最好的解决方案（或者它可能是 - 老实说，我不知道它的性能如何）。它很简单，而且大多数平台都有它的实现，涵盖了你想要的很多领域。如果您想要尽可能快的速度，我的建议是测试它，这是您确定的唯一方法。当然，简单通常是速度的好兆头。

您没有提供足够的信息来了解性能在这里的重要性。请记住，除非您**需要**性能（可证明），否则在您这样做之前不要费心优化。寻找易于阅读和维护的代码端，以及易于使用文件端的东西。这就是我推荐 JSON 的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:24:31.590

对于字符串字典的持久字符串，anydbm 是非常合理的。bsddb 可以在 anydbm 中使用，速度很快，但对被中断有点敏感。gdbm 可以从 anydbm 使用，速度较慢，但​​不太可能产生损坏的数据库。

此外，如果您想将整个 dict 读入内存，进行大量更改，然后将生成的 dict 写回，这里有：[http](http://stromberg.dnsalias.org/svn/dohdbm/trunk/) ://stromberg.dnsalias.org/svn/dohdbm/trunk/ 我正在使用这个备份软件项目中的一个。如果您愿意，它会压缩您的字典，如果您的 I/O 特别慢，或者您需要进行大量修改，这可能会提高性能。

# javascript - jQuery addClass 在 IE 7 或 IE 8 中不起作用

> ID：10302337
> 
> 赞同：0
> 
> 时间：2012-04-24T16:47:27.903
> 
> 标签：javascript, jquery, internet-explorer

这是一个验证脚本
此代码在用户按下表单上的提交按钮时运行它循环遍历所有必填字段（输入到数组中）并且...
1\. 检查元素是否隐藏
2\. 如果不是，它是否为空？
3\. 如果不是，那是假的吗？（我使用 false 作为不可选择选项的值）
所有这些都将变量设置为 true 或 false。

```
// when submitting the registration form
function mandatoryCheck() {
    jQuery('.tx-powermail-pi1_formwrap_1723 form.tx_powermail_pi1_form').submit(function(event) {
        var success = false;
        var element;
        jQuery.each(mandatoryFields, function(index, value) {
            element = jQuery('#powermaildiv_uid'+value+' input, #powermaildiv_uid'+value+' select')

            element.each(function() {
                // add class required to all fields
                jQuery(this).addClass('required');

                // is the element hidden, return true
                if(jQuery(this).hasClass('fieldHidden') == true || jQuery(this).is(':disabled')) {
                    success = true;
                } else {
                    // is the input field empty, return false
                    if(jQuery(this).val().length === 0) {
                        success = false;

                    // is the input field not empty, return true
                    } else {
                        // is the input field false, return false
                        if(jQuery(this).val() == 'disabled') {
                            success = false;
                        } else {
                            success = true;
                        }
                    }
                }

                // For each element add/remove validation class
                if(success == false) {
                    jQuery(this).addClass('validation-failed').removeClass('validation-passed');
                } else {
                    jQuery(this).addClass('validation-passed').removeClass('validation-failed');
                }
            });
        });

        // if succes is false, show error message and return false
        if(success == false) {
            jQuery('#c1799').fadeIn().css('display', 'block');
            event.preventDefault();
            return false;
        } else {
            jQuery('#c1799').fadeOut();
        }
    });
} 
```

它适用于 firefox、chrome ie9 但不适用于 ie 7 或 8。IE7 或 8 将类添加到所有随机的元素中。
似乎如果我验证它通过但输入字段失败的选择元素

有什么问题？

编辑：这是页面：[http](http://asdf.patrikelfstrom.se/index.php?id=267)
://asdf.patrikelfstrom.se/index.php?id= 267 如果以显示
JS 的小形式输入 1234：http: [//asdf.patrikelfstrom.se/typo3conf/ext/ gc_fm/res/js/ShowAndHideFields.js](http://asdf.patrikelfstrom.se/typo3conf/ext/gc_fm/res/js/ShowAndHideFields.js)

如果您按下提交（缺席）字段 Türnummer 应该是绿色的（因为它在 chrome、firefox 等中）但在 ie7/8 中它是红色的。

如果您单击 Wähle...（选择框）并选择 Wohnung，则其下方的字段将启用，如果您现在按提交，则 Türnummer 应该是红色的，因为该元素是可见且为空的。
这似乎可行，但如果您再次单击选择框并选择 einfamilienhaus。
这些字段被禁用，现在提交时应该是绿色的，但在 IE7/8 中不是这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:00:38.550

我认为您需要遍历`element`，因为它将是对象的集合，所以您会这样做...

```
// is the element hidden, return true
element.each(function() {
   if($(this).hasClass('fieldHidden') == true) {
   ...

}) 
```

好吧，只是为了说明这一点，取决于您的代码您需要实际更改的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:03:34.900

`(value="false")`从您的选择中删除。

# html5-audio - 谷歌电视音频标签支持

> ID：10302338
> 
> 赞同：1
> 
> 时间：2012-04-24T16:47:31.393
> 
> 标签：html5-audio, google-tv

Google TV 浏览器（Google Chrome）html5“音频”标签支持哪些格式？我在播放流媒体链接时遇到问题。我已经看过这个链接（http://code.google.com/p/googletv-issues/issues/detail?id=5）但是有官方批准和更深入的问题解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:44:00.790

使用 html5test.com 在我的 Google TV 上检查了 Chrome/11.0.696.77，这是音频/视频的结果：

视频：支持 MPEG-4 和 H.264，但不支持 Ogg Theora 和 WebM 音频：支持 ACC 和 MP3，但不支持 PCM、Ogg Vorbis、WebM

有趣的是，我的 Mac Chrome 18.0.1025.165 支持 H.264、Ogg Theora 和 WebM，但不支持 MPEG-4 视频和所有五种音频。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T18:23:52.657

您可以尝试[http://html5test.com/](http://html5test.com/) 在 GoogleTV 浏览器中检查所有支持 HTML5 的功能，包括支持的音频格式。

这是谷歌电视浏览器支持的音频格式列表： ![在此处输入图像描述](../Images/46f274d0b9422c2b41e16860a501f276.png)

如果您发现任何问题，请通过以下网址报告： [http ://code.google.com/p/googletv-issues/](http://code.google.com/p/googletv-issues/)

# java - 具有抽象字段和子类的抽象类，无需强制转换

> ID：10302345
> 
> 赞同：0
> 
> 时间：2012-04-24T16:48:00.787
> 
> 标签：java, generics, design-patterns

我创建了一个抽象基类。它包含一个应该由任何子类扩展的对象：

```
public abstract class AbstractParent {
    protected AbstractObject subMePlz;
    // ... some fields that all subclasses need
    public AbstractParent() {
        this.subMePlz = createThisInYourExtendedClass();

    }

    public abstract AbstractObject createThisInYourExtendedClass();
} 
```

抽象对象：

```
public abstract class AbstractObject {
   // ... some fields/methods that all subclasses need 
} 
```

我想要的是能够在扩展类中使用扩展字段而无需强制转换：

```
public class ExtendParent extends AbstractParent {
     // .. some unique fields
     public ExtendParent(){
       super();
     }

   public ConcreteObject createThisInYourExtendedClass(){
        return new ConcreteObject();
   }

   // what I want to do - no cast
   public void doSomethingWithSubMePlzWithoutCastingIt() {
        System.out.println(this.subMePlz);  
   }

   // what I end up doing - gotta cast
   public void doSomethingWithSubMePlzWithoutCastingIt() {
        System.out.println((ConcreteObject)this.subMePlz);  
   }
} 
```

需要一个比较器会改变我应该如何实现它吗？- 我正在考虑为其子类可以使用的 AbstractObjects 列表的通用比较器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T16:51:54.193

听起来您需要使其通用：

```
public abstract class AbstractParent<T extends AbstractObject> {
    protected T subMePlz;
    // ... some fields that all subclasses need
    public AbstractParent() {
        this.subMePlz = createThisInYourExtendedClass();

    }

    public abstract T createThisInYourExtendedClass();
} 

public class ExtendParent extends AbstractParent<ConcreteObject> {
    ...
} 
```

请注意，在构造函数中调用非私有方法*通常是*一个坏主意 - 子类尚未完全初始化，这可能使您难以推断您真正可以依赖多少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T16:50:56.690

你有两个选择：

1.  放弃项目以在超类中声明该字段。相反，向你的超类添加一个内部抽象“getter”方法——基本上，`AbstractParent`应该有一个方法`abstract AbstractObject getSubMePlz()`。
2.  使用泛型`subMePlz`在您的子类中设置类型：定义为它的字段`AbstractParent<T>`有一个。`T``subMePlz`

就个人而言，我经常发现选项 1 具有非常令人愉快的可扩展性——例如，您可以有另一个子类来缩小`getSubMePlz()`返回类型而不声明它，这可能是有利的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T16:53:52.720

为什么不使用这个 -

```
 super.subMePlz 
```

而不是这个 -

```
 (ConcreteObject)this.subMePlz 
```

这样，你就不需要演员表了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T16:57:16.087

您只需将对象的副本保存在子类中，但使用正确的类。

```
public class ExtendParent extends AbstractParent {
  ConcreteObject concreteObject;

  public AbstractObject createThisInYourExtendedClass(){
    ConcreteObject concreteObject = new ConcreteObject();
    return concreteObject;
  }
  public void doSomethingWithSubMePlzWithoutCastingIt() {
    System.out.println(concreteObject);  
  }

  ... 
```

# objective-c - 提取锚标签的内容

> ID：10302347
> 
> 赞同：0
> 
> 时间：2012-04-24T16:48:07.820
> 
> 标签：objective-c, xcode, cocoa, webview

我要做的是提取存储在 NSString 中的锚标记的内容。

例如，如果我有一个包含以下内容的字符串：

```
<a href="/url?q=https://kindle.amazon.com/&amp;sa=U&amp;ei=GdiWT5uCEI6BhQfihoTzDQ&amp;ved=0CCUQFjAB&amp;usg=AFQjCNEoRolsgoynLNS0H60VWz-9EaQdtw">Amazon <b>Kindle</b>: Welcome</a> 
```

我将如何提取锚标记的内容，以便获得以下内容：

```
https://kindle.amazon.com/&amp;sa=U&amp;ei=GdiWT5uCEI6BhQfihoTzDQ&amp;ved=0CCUQFjAB&amp;usg=AFQjCNEoRolsgoynLNS0H60VWz-9EaQdtw 
```

任何帮助将不胜感激！

我完全被难住了，而这应该很简单？下面发布的答案不断返回null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:07:46.930

One Possible solution is by using NSScanner -

```
NSString *urlString = nil;
NSString *htmlString = @"<a href=\"/url?q=https://kindle.amazon.com/&amp;sa=U&amp;ei=GdiWT5uCEI6BhQfihoTzDQ&amp;ved=0CCUQFjAB&amp;usg=AFQjCNEoRolsgoynLNS0H60VWz-9EaQdtw\">Amazon <b>Kindle</b>: Welcome</a>";

NSScanner *scanner = [NSScanner scannerWithString:htmlString];

[scanner scanUpToString:@"<a" intoString:nil];
if (![scanner isAtEnd]) {
    [scanner scanUpToString:@"http" intoString:nil];
    NSCharacterSet *charset = [NSCharacterSet characterSetWithCharactersInString:@">"];
    [scanner scanUpToCharactersFromSet:charset intoString:&urlString];
}
NSLog(@"%@", urlString); 
```

In Logs - [https://kindle.amazon.com/&sa=U&ei=GdiWT5uCEI6BhQfihoTzDQ&ved=0CCUQFjAB&usg=AFQjCNEoRolsgoynLNS0H60VWz-9EaQdtw](https://kindle.amazon.com/&sa=U&ei=GdiWT5uCEI6BhQfihoTzDQ&ved=0CCUQFjAB&usg=AFQjCNEoRolsgoynLNS0H60VWz-9EaQdtw)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T23:55:26.433

如果您可以要求 Lion，那么您可以使用`NSRegularExpression`.

```
NSString* stringToSearch = @"<a href=\"/url?q=https://kindle.amazon.com/&amp;sa=U&amp;ei=GdiWT5uCEI6BhQfihoTzDQ&amp;ved=0CCUQFjAB&amp;usg=AFQjCNEoRolsgoynLNS0H60VWz-9EaQdtw\">Amazon <b>Kindle</b>: Welcome</a>";

NSError *error;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"href\\s*=\\s*\"\\/url\\?q=([^\"]*)\""
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:&error];

NSTextCheckingResult* match = [regex firstMatchInString:stringToSearch options:0 range:NSMakeRange(0, [stringToSearch length])];
if(match.numberOfRanges == 2)
{
    NSRange capture = [match rangeAtIndex:1];
    NSString* URLString = [stringToSearch substringWithRange:capture];
    NSLog(@"%@",URLString);
} 
```

# java - 在Tomcat下启动线程

> ID：10302349
> 
> 赞同：9
> 
> 时间：2012-04-24T16:48:15.337
> 
> 标签：java, multithreading, tomcat

有人告诉我，你不应该从运行在 Tomcat（或任何其他容器）下的 webapp 启动自己的线程

```
Runnable myRunnable = new Runnable() {
  public void run() {
    System.out.println("I'm running");
  }
}

new Thread(myRunnable).start(); 
```

或类似地：

```
ScheduledThreadPoolExecutor retrySchedulerService = new ScheduledThreadPoolExecutor(3);
retrySchedulerService.schedule(dlrRetryTask, 120, TimeUnit.SECONDS); 
```

您应该从 Tomcat 知道的某个线程池中请求一个线程，而不是上述任何一种。这是有道理的，还是完全是胡说八道？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T16:53:05.003

随意启动您自己的线程，但请记住在应用程序停止时停止它们。Tomcat 有自己的线程池，用于处理传入的请求。我不认为使用它是一个好主意，即使您设法访问它。

通常，在 Java EE 环境中启动线程不是一个好习惯，但在 Tomcat 等 servlet 容器中启动线程也没什么不好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:16:15.993

这是关于从 servlet 运行线程的讨论。

[http://www.jguru.com/faq/view.jsp?EID=455215](http://www.jguru.com/faq/view.jsp?EID=455215)

另一个讨论是关于从 EJB 容器运行线程。

[Java EE 规范和多线程](https://stackoverflow.com/questions/3212255/j2ee-specification-and-multi-threading)

# python - IDL 和 Python 的 FFT 区别

> ID：10302350
> 
> 赞同：4
> 
> 时间：2012-04-24T16:48:16.460
> 
> 标签：python, scipy, fft, idl, idl-programming-language

我将一些简单的 IDL 代码传递给 Python。然而，从 SciPy/NumPy 包返回的 FFT 值与 IDL 不同，我不知道为什么。

将其全部简化为 8 个元素的简单示例，我发现 SciPy/NumPy 例程返回的值比 IDL 例程大 8 (2^3) 倍（我认为是规范化问题）。

这是两种语言的示例代码（从[此处](http://scipy.org/Numpy_Example_List#head-3630ad1b5548a4e75ae976d678853e3a197c84fe)复制）：

## IDL

```
signal = ([-2., 8., -6., 4., 1., 0., 3., 5.])
fourier = fft(signal)
print, fourier 
```

返回

> （1.62500,000）（0.420495,0.506282）（0.250000,0.125000）（-1.17050，-1.74372）（-2.62500，-0.00000）（-1.17050,0.00000）（-1.17050,1.74372）（0.250000，-0.125000）（0.420495，-0.506282）

## Python

```
from scipy.fftpack import fft
import numpy as N
…
signal = N.array([-2., 8., -6., 4., 1., 0., 3., 5.])
fourier = fft(signal)
print fourier 
```

返回

> [ 13\. +0.j , 3.36396103 +4.05025253j, 2\. +1.j , -9.36396103-13.94974747j, -21\. +0.j，-9.36396103+13.94974747j，2.-1.j，3.36396103 -4.05025253j]

我用 NumPy 包做到了，我得到了相同的结果。我也尝试过`print fft(signal, 8 )`以防万一，但它返回的结果与预期的一样。

然而，这还不是全部，回到我真正的 256 个元素数组，我发现差异不再是 8 或 256，而是 256*8！这太疯狂了。

虽然我解决了这个问题，但我需要知道为什么会有这种差异。

**已解决：**这只是标准化，在某些时候我将 IDL 256 阵列除以 8 倍，但我忘记删除了。在 Dougal 的回答中有我错过的文档。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T17:05:54.837

IDL and numpy use slightly different definitions of the DFT. Numpy's is (from [the documentation](https://docs.scipy.org/doc/numpy/reference/routines.fft.html#implementation-details)):

[![](../Images/f33830563a913531adecce45ff1961fc.png)](https://i.stack.imgur.com/1W4Ic.png)

[![](../Images/a68f73ff529cc96127e5b91a799cfd9c.png)](https://i.stack.imgur.com/z2w5K.png)
[(source: [scipy.org](http://docs.scipy.org/doc/numpy/_images/math/6bbd972502306a4225d33ac6919fc6fc8244f67d.png))]

while IDL's is (from [here](https://web.archive.org/web/20160125085618/http://www.physics.nyu.edu/grierlab/idl_html_help/F4.html)):

[![](../Images/30dd14c228dc7e06068ac6a0572a4bc8.png)](https://i.stack.imgur.com/R4zOt.gif)

Numpy's `m` is the same as IDL's `x`, `k` is `u`, `n` is `N`. I think `a_m` and `f(x)` are the same thing as well. So the factor of `1/N` is the obvious difference, explaining the difference of 8 in your 8-elt case.

I'm not sure about the 256*8 one for the 256-elt case; could you maybe post the original array and both outputs somewhere? (Does this happen for all 256-elt arrays? What about other sizes? I don't have IDL....)

# javascript - jquery ui菜单自定义弹出

> ID：10302356
> 
> 赞同：0
> 
> 时间：2012-04-24T16:48:45.687
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-menu

我找到了[http://docs.jquery.com/UI/Menu](http://docs.jquery.com/UI/Menu)小部件。

我想实现与此演示中看到的完全相同的行为：http: [//view.jqueryui.com/menubar/demos/menu/contextmenu.html](http://view.jqueryui.com/menubar/demos/menu/contextmenu.html)

但是，如果我在我的页面上添加此代码：

```
<div class="demo">

<button>Select a city</button>
<ul id="cities">
    <li><a href="#Amsterdam">Amsterdam</a></li>
    <li><a href="#Anaheim">Anaheim</a></li>
    <li><a href="#Cologne">Cologne</a></li>
    <li><a href="#Frankfurt">Frankfurt</a></li>
    <li><a href="#Magdeburg">Magdeburg</a></li>
    <li><a href="#Munich">Munich</a></li>
    <li><a href="#Utrecht">Utrecht</a></li>
    <li><a href="#Zurich">Zurich</a></li>
</ul>

<div id="log"></div> 
```

```
$(function() {
        var btn = $(".demo button").button({
            icons: {
                primary: "ui-icon-home",
                secondary: "ui-icon-triangle-1-s"
            }
        });
        $("#cities").menu({
            select: function(event, ui) {
                $("#log").append("<div>Selected " + ui.item.text() + "</div>");
            },
            trigger : btn});
    });​ 
```

我得到这个结果：http: [//jsfiddle.net/Q7CTz/](http://jsfiddle.net/Q7CTz/)

我看到演示使用的 jquery ui 有所不同，但我无法弄清楚确切的区别。您能否帮助我如何使用演示中看到的纯 jquery ui 创建相同的本地弹出窗口。

请不要推荐第三方插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:31:14.900

该演示是使用 jquery ui 1.9 创建的，（在撰写本文时）尚未公开发布。[http://blog.jqueryui.com/2010/06/jquery-ui-19m2-menu/](http://blog.jqueryui.com/2010/06/jquery-ui-19m2-menu/)

所以demo中的行为不能使用jquery-ui 1.8系列来实现。目前最新的开发版本是1.9m7；可以从[https://github.com/jquery/jquery-ui/tree/1.9m7/ui下载](https://github.com/jquery/jquery-ui/tree/1.9m7/ui)

# mysql - 如何在具有 mysql 的机器上安装（和运行）postgresql？

> ID：10302358
> 
> 赞同：2
> 
> 时间：2012-04-24T16:48:48.123
> 
> 标签：mysql, postgresql

我在 postgresql 网站上获得了包 postgresql-8.4.9.tar.bz2 并按照文件 INSTALL 上的说明安装了它。但是当我们尝试运行它时，它不起作用并抛出这个错误：

```
/usr/local/pgsql/bin/postgres -D /usr/local/pgsql/data
LOG:  could not bind IPv6 socket: Address already in use
HINT:  Is another postmaster already running on port 5432? If not, wait a few seconds and retry.
LOG:  could not bind IPv4 socket: Address already in use
HINT:  Is another postmaster already running on port 5432? If not, wait a few seconds and retry.
WARNING:  could not create listen socket for "localhost"
FATAL:  could not create any TCP/IP sockets 
```

不知道，可能是因为和mysql有些冲突。有人知道发生了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T16:56:11.207

似乎另一个进程正在侦听端口 5432。尝试运行以下命令：

```
 sudo netstat -tulpn | grep 5432 
```

# java - 游戏中的 Random 与 SecureRandom

> ID：10302362
> 
> 赞同：2
> 
> 时间：2012-04-24T16:49:03.877
> 
> 标签：java, random

我已经制作了旧风险棋盘游戏的一个版本。当军队互相攻击时，我用`java.util.Random`它来实施掷骰子。例如，当 3 支军队用两支军队进攻一个领土时，我必须总共“掷” 5 次骰子：

```
Attacker rolls: 3 die
Defender rolls: 2 die

int[] rollsAttacker = new int[3];
int[] rollsDefender = new int[2];

for (int i = 0; i < 3; i++) {
    rollsAttacker[i] = mRandom.nextInt(6) + 1;
}
for (int i = 0; i < 2; i++) {
    rollsDefender[i] = mRandom.nextInt(6) + 1;
}

// compare rolls and figure out who won...
// ... 
```

我收到了异常多的抱怨，说有太多的“不安”。例如，100 人的军队可能会输给 2 人的军队。我已经运行我的滚动方法数百万次来测试输赢比，它们几乎与其他做同样事情的网站显示的完全匹配。

我正在考虑切换到可能“更随机”的 SecureRandom，但不知道是否值得。我不知道 util.Random 可能会进入什么状态来如此频繁地产生这种不安。用户可以在移动设备上玩，那么 util.Random 的实现是否有可能在某些平台上产生更少的差异？（投诉似乎确实来自特定品牌的手机）。

所以简而言之，我不确定切换到 SecureRandom 是否会对我的情况有所帮助，如果它相当慢，或者我只是没有正确使用 util.Random，

- - - - - - 更新 - - - - - - - -

防守方整体获胜的 4 对 1 攻击示例。

```
Attacking 4 vs 1...
  Roll:
    a: 5, 5, 4
    d: 6
  Roll:
    a: 5, 2
    d: 5
  Roll:
    a: 3
    d: 5

Defender survived! 
```

对于上述 4 对 1 攻击，我已经尝试分批运行 20,000 次我的攻击方法，并且攻击者赢得了 91% 的时间。这远低于该游戏维基百科页面上公布的 97% 胜率：

![来自维基百科的赔率](../Images/21723c84beb60e58d1a5d1d83d85b110.png)

啊。

------ 更新（再次） -------------

实际上，我不小心在看图表后面一个插槽，我的数字与图表的内容一致：

```
0.4139    0.7502    0.9132    0.97245   0.99015   0.9964    0.9991    0.99975   0.9999    1.0       
0.10865   0.36105   0.649     0.78555   0.8924    0.9343    0.9691    0.98      0.9904    0.9951    
0.02655   0.2065    0.4729    0.6414    0.76725   0.8584    0.9121    0.94605   0.9687    0.982     
0.00665   0.0905    0.3182    0.48215   0.63985   0.7432    0.8304    0.8894    0.9274    0.9525    
0.0015    0.04775   0.20575   0.35955   0.50885   0.64125   0.7389    0.8168    0.8753    0.9164    
5.5E-4    0.0229    0.1323    0.25105   0.39385   0.52695   0.6436    0.7254    0.805     0.86415   
0.0       0.00975   0.0854    0.18075   0.29985   0.42645   0.5389    0.64695   0.72615   0.8009    
5.0E-5    0.00545   0.05515   0.1255    0.2228    0.3307    0.4438    0.54365   0.64505   0.723     
0.0       0.00255   0.03225   0.0877    0.16005   0.2576    0.3519    0.46685   0.559     0.6445    
0.0       0.00125   0.0201    0.0569    0.11595   0.19315   0.2898    0.374     0.47505   0.56275 
```

所以是的，我不确定我能告诉用户什么，除了可能会发生不安。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:29:40.353

一支 100 人的军队（最低总掷骰数 100）怎么会输给一支 2 人的军队（最高总掷骰数 12）？确实，您确定您的逻辑在更远的地方是正确的吗？

FWIW 您发布的片段看起来不错，我无法想象`Random`发行版中的微小缺陷会产生可衡量的差异。

# sql-server - SQL Server 2012 - Analysis Services 不包含在安装程序的“功能选择”屏幕中

> ID：10302363
> 
> 赞同：5
> 
> 时间：2012-04-24T16:49:04.253
> 
> 标签：sql-server, installation, ssas, missing-features

根据此页面上的信息，我打算将 Analysis Services 添加到我们的 SQL Server 2012 Express Advanced 实例中：

[http://msdn.microsoft.com/en-us/library/ms144275.aspx](http://msdn.microsoft.com/en-us/library/ms144275.aspx)

我们运行 SQL Server 安装程序并选择“向现有 SQL Server 实例添加功能”。在功能选择屏幕上，我们只注意到以下内容：

```
Instance Features
    Database Engine Services
        SQL Server Replication
        Full Text.....
    Reporting Services

Shared Features
    SQL Server Data Tools
    Documentation Components
    Management Tools - Basic
    SQL Client Connectivity SDK

Redistributable Features 
```

Analysis Services 功能不在此选项列表中。

所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T16:52:02.410

Express 不支持分析服务

在此处查看每个版本支持的内容[http://msdn.microsoft.com/en-us/library/cc645993.aspx](http://msdn.microsoft.com/en-us/library/cc645993.aspx)

sql server 2012 支持分析服务。 [http://msdn.microsoft.com/en-us/library/cc645993.aspx#SSAS](http://msdn.microsoft.com/en-us/library/cc645993.aspx#SSAS)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T16:52:39.980

我认为速成版没有分析服务。

# r - 如何控制png中的字体大小？

> ID：10302364
> 
> 赞同：7
> 
> 时间：2012-04-24T16:49:07.377
> 
> 标签：r, ggplot2, png, figure, r-grid

我正在尝试为手稿制作图形，应该用 MS Word 编写，它不接受 pdf 格式的图形。该杂志要求在 Word 文件中嵌入图形的初稿。这些图形的分辨率最低应为 300 dpi，宽度为 169 毫米或 81 毫米（两列/一列）。我注意到，当我将图片的分辨率指定为 300（res = 300）时，字体大小会绑定到这个值。这适用于某些图形（第一个示例，example.png），而对于其他图形（example2.png）则更糟。如何控制字体大小以使图形的尺寸和分辨率保持固定？

```
library(ggplot2)
library(grid)

data(iris)

vplayout <- function(x, y) viewport(layout.pos.row = x, layout.pos.col = y)

p <- ggplot(iris, aes(Species, Petal.Length))
q <- ggplot(iris, aes(Species, Petal.Width))
len <- p + geom_boxplot()
wid <- q + geom_boxplot()

png("example.png", width = 169, height = 100, units = "mm", res = 300)
grid.newpage()
pushViewport(viewport(layout = grid.layout(1, 2)))
print(len, vp = vplayout(1, 1))
print(wid, vp = vplayout(1, 2))
dev.off()

png("example2.png", width = 81, height = 100, units = "mm", res = 300)
grid.newpage()
pushViewport(viewport(layout = grid.layout(1, 2)))
print(len, vp = vplayout(1, 1))
print(wid, vp = vplayout(1, 2))
dev.off() 
```

换句话说，我想减小 example2.png 中的字体大小，但保持两个图的布局和尺寸不变。

![例子.png](../Images/4ec0e8330cefffb61d3fc86ef02f0413.png) Example.png

![例子2.png](../Images/59544f9bc34a07f93f838bd05b2f483d.png) Example2.png

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T17:15:15.037

使用该函数的`base_size`参数`theme_XXX()`，您可以更改所有文本的整体字体大小。

```
png("example2.png", width = 81, height = 100, units = "mm", res = 300)
grid.newpage()
pushViewport(viewport(layout = grid.layout(1, 2)))
print(len + theme_gray(base_size=12*(81/169)), vp = vplayout(1, 1))
print(wid + theme_gray(base_size=12*(81/169)), vp = vplayout(1, 2))
dev.off() 
```

![在此处输入图像描述](../Images/850c3a0f1b9c104d8d2ed888862eb13f.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-08T18:33:55.713

只需更改`pointsize`png 的属性。例如：

```
png(filename="plot4.png", width=580, height=700, pointsize=20) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T06:46:04.290

据我所知，无论分辨率和设备大小如何，字体大小都是相同的。您可以在以下示例中检查它：

```
library(grid)

png("example1.png", width = 30, height = 5, units = "mm", res = 200)
g <- grid.text("testing font size", gp=gpar(fontsize=12))
width <- convertUnit(grobWidth(g), "mm")
height <- convertUnit(grobHeight(g), "mm", "y")
grid.rect(width=width, height=height, gp=gpar(lty=2, fill=NA))
dev.off()

png("example2.png", width = 60, height = 5, units = "mm", res = 500)
grid.text("testing font size", gp=gpar(fontsize=12))
grid.rect(width=width, height=height, gp=gpar(lty=2, fill=NA))
dev.off() 
```

但似乎您实际上想更改字体大小。

# asp.net - Excel 中的数据类型评估到 ASP.NET 复制/粘贴操作

> ID：10302365
> 
> 赞同：1
> 
> 时间：2012-04-24T16:49:09.083
> 
> 标签：asp.net, excel, internationalization, clipboard

我认为我的问题的答案可能是不可能的，但我正在开发一个跨国 ASP.NET 应用程序，用户希望将一列数字从 Excel 工作表复制到 Web GridView 中。这可能来自任何客户端操作系统，我们希望避免使用任何客户端插件等。

问题是在许多国家，小数和千位的数字分隔符完全颠倒了。例如，在德国，999.999.999,999 的值在美国转换为 999,999,999.999。对于不知道格式和/或位置号码偏好的原始文本“999,999”，不知道应该是（美国格式）999,999.000 还是 999.999。

据我所知，在从操作系统剪贴板到网页的复制/粘贴操作中，无法同时传输底层的原始 Excel 数据和数据类型，例如，没有这些文本分隔符表示的数字。传输数据的唯一方式是通过格式化文本。

有没有人知道或者可以提供有用的建议？

# java - Java - 带有数组列表的二进制文件 I/O

> ID：10302370
> 
> 赞同：0
> 
> 时间：2012-04-24T16:49:26.973
> 
> 标签：java, binary, arraylist, objectoutputstream, objectinputstream

我是 java 初学者，我在使用数组列表的二进制文件输入和输出时遇到问题。我正在尝试将数组列表中的数据存储在一个文件中，然后使用它在控制台中显示它。这是我的一些代码，它运行但显示错误信息，我也收到警告。对导致此问题的原因有任何帮助吗？谢谢！

```
public class Towers {
    public static ArrayList<String> allMoves= new ArrayList<String>();
    static{
        allMoves.add( "These Are the Disk Moves:" );
    }

    public static void move(final int aNumDisks){
        move(aNumDisks, 1, 2, 3);
        String fileName = "solution.dat";
        try{
            ObjectOutputStream outputStream = 
                    new ObjectOutputStream(
                            new FileOutputStream (fileName));
            outputStream.writeObject(allMoves);
            outputStream.close( );
        }
        catch ( IOException e ){
            System.out.println("Error writing to file " + fileName);
            System.exit(0);
        }
    } 
```

在控制台中显示输出文件。

```
public class TReporter {        
    public static void reportSol(){
        String fileName = "solution.dat";
        ArrayList<String> allMovesA = null;
        try{
            ObjectInputStream inputStream =
                    new ObjectInputStream(
                            new FileInputStream (fileName));
            allMovesA = (ArrayList<String>)inputStream.readObject(); //WARNING!
                           //Type safety: Unchecked cast from Object to ArrayList<String>
            inputStream.close();
        }
        catch (Exception e){
            System.out.println("Problem reading the file " + fileName);
            System.exit(0);
        }
        for (int i = 0; i < allMovesA.size(); ++i){
            System.out.println( allMovesA.get(i) );
        } 
```

它应该显示如下内容：

```
=== 0 disks move(int) ===
These Are the Disk Moves:

=== 0 disks move(,,) ===
These Are the Disk Moves:

=== 1 disk move(int) ===
These Are the Disk Moves:
Move disk from 1 to 3

=== 2 disks ===
These Are the Disk Moves:
Move disk from 1 to 2
Move disk from 1 to 3
Move disk from 2 to 3

=== 2 disks move(2,3,2,1) ===
These Are the Disk Moves:
Move disk from 3 to 2
Move disk from 3 to 1
Move disk from 2 to 1

=== 3 disks move(3) ===
These Are the Disk Moves:
Move disk from 1 to 3
Move disk from 1 to 2
Move disk from 3 to 2
Move disk from 1 to 3
Move disk from 2 to 1
Move disk from 2 to 3
Move disk from 1 to 3 
```

但我得到了这个：

```
=== 0 disks move(int) ===
These Are the Disk Moves:
Move disk from 1 to 3
Move disk from 1 to 2
Move disk from 3 to 2
Move disk from 1 to 3
Move disk from 2 to 1
Move disk from 2 to 3
Move disk from 1 to 3

=== 0 disks move(,,) ===
These Are the Disk Moves:
Move disk from 1 to 3
Move disk from 1 to 2
Move disk from 3 to 2
Move disk from 1 to 3
Move disk from 2 to 1
Move disk from 2 to 3
Move disk from 1 to 3

=== 1 disk move(int) ===
These Are the Disk Moves:
Move disk from 1 to 3

=== 2 disks ===
These Are the Disk Moves:
Move disk from 1 to 2
Move disk from 1 to 3
Move disk from 2 to 3

=== 2 disks move(2,3,2,1) ===
These Are the Disk Moves:
Move disk from 1 to 2
Move disk from 1 to 3
Move disk from 2 to 3

=== 3 disks move(3) ===
These Are the Disk Moves:
Move disk from 1 to 3
Move disk from 1 to 2
Move disk from 3 to 2
Move disk from 1 to 3
Move disk from 2 to 1
Move disk from 2 to 3
Move disk from 1 to 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:52:54.670

您收到的警告是完全正常的。您可以通过在带有警告的行之前插入此行来抑制它：

```
@SuppressWarnings("unchecked") 
```

对于您得到的错误信息：

*   确保在尝试读取文件之前写入文件，您可能使用的是旧版本的文件。
*   确保它*确实*包含正确的移动的 ArrayList。

# sql-server - 每个用户使用 SqlCacheDependency 是个好主意吗？

> ID：10302373
> 
> 赞同：0
> 
> 时间：2012-04-24T16:49:40.420
> 
> 标签：sql-server, ado.net

我正在考虑为我们的应用程序服务器上的每个用户缓存权限。`SqlCacheDependency`为每个用户使用 a 是个好主意吗？

查询看起来像这样

```
SELECT PermissionId, PermissionName From Permissions Where UserId = @UserId 
```

这样我就知道这些记录中是否有任何更改，然后为该用户清除我的缓存。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T17:15:48.593

如果您阅读[了查询通知的工作原理](http://rusanu.com/2006/06/17/the-mysterious-notification/)，您就会明白为什么使用单个查询模板创建多个依赖项请求是一种很好的做法。[`SqlCacheDependency`](http://msdn.microsoft.com/en-us/library/system.web.caching.sqlcachedependency.aspx)对于一个网络应用程序，这是由你使用和不使用的事实所暗示的[`SqlDependency`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)，你打算做什么应该是可以的。如果你使用 Linq2Sql 你也可以试试[LinqToCache](http://code.google.com/p/linqtocache/)：

```
var queryUsers = from u in repository.Users 
        where u.UserId = currentUserId 
        select u;
var user= queryUsers .AsCached("Users:" + currentUserId.ToString()); 
```

对于胖客户端应用程序来说，这是不行的。不是因为查询本身，而是因为`SqlDependency`通常连接大量客户端时会出现问题（它会阻塞每个连接的应用程序域[的工作线程）：](http://msdn.microsoft.com/en-us/library/ms190219.aspx)

> **SqlDependency**设计用于 ASP.NET 或中间层服务，在这些服务中，相对少量的服务器对数据库具有活动的依赖项。它不是为在客户端应用程序中使用而设计的，在客户端应用程序中，成百上千的客户端计算机将为单个数据库服务器设置 SqlDependency 对象。

**更新**

这是与@usr 在他的帖子中所做的相同的测试。完整的 c# 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SqlClient;
using DependencyMassTest.Properties;
using System.Threading.Tasks;
using System.Threading;

namespace DependencyMassTest
{
    class Program
    {
        static volatile int goal = 50000;
        static volatile int running = 0;
        static volatile int notified = 0;
        static int workers = 50;
        static SqlConnectionStringBuilder scsb;
        static AutoResetEvent done = new AutoResetEvent(false);

        static void Main(string[] args)
        {
            scsb = new SqlConnectionStringBuilder(Settings.Default.ConnString);
            scsb.AsynchronousProcessing = true;
            scsb.Pooling = true;

            try
            {
                SqlDependency.Start(scsb.ConnectionString);

                using (var conn = new SqlConnection(scsb.ConnectionString))
                {
                    conn.Open();

                    using (SqlCommand cmd = new SqlCommand(@"
if object_id('SqlDependencyTest') is not null
    drop table SqlDependencyTest

create table SqlDependencyTest (
    ID int not null identity,
    SomeValue nvarchar(400),
    primary key(ID)
)
", conn))
                    {
                        cmd.ExecuteNonQuery();
                    }
                }

                for (int i = 0; i < workers; ++i)
                {
                    Task.Factory.StartNew(
                        () =>
                        {
                            RunTask();
                        });
                }
                done.WaitOne();
                Console.WriteLine("All dependencies subscribed. Waiting...");
                Console.ReadKey();
            }
            catch (Exception e)
            {
                Console.Error.WriteLine(e);
            }
            finally
            {
                SqlDependency.Stop(scsb.ConnectionString);
            }
        }

        static void RunTask()
        {
            Random rand = new Random();
            SqlConnection conn = new SqlConnection(scsb.ConnectionString);
            conn.Open();

            SqlCommand cmd = new SqlCommand(
@"select SomeValue
    from dbo.SqlDependencyTest
    where ID = @id", conn);
            cmd.Parameters.AddWithValue("@id", rand.Next(50000));

            SqlDependency dep = new SqlDependency(cmd);
            dep.OnChange += new OnChangeEventHandler((ob, qnArgs) =>
            {
                Console.WriteLine("Notified {3}: Info:{0}, Source:{1}, Type:{2}", qnArgs.Info, qnArgs.Source, qnArgs.Type, Interlocked.Increment(ref notified));
            });

            cmd.BeginExecuteReader(
                (ar) =>
                {
                    try
                    {
                        int crt = Interlocked.Increment(ref running);
                        if (crt % 1000 == 0)
                        {
                            Console.WriteLine("{0} running...", crt);
                        }
                        using (SqlDataReader rdr = cmd.EndExecuteReader(ar))
                        {
                            while (rdr.Read())
                            {
                            }
                        }
                    }
                    catch (Exception e)
                    {
                        Console.Error.WriteLine(e.Message);
                    }
                    finally
                    {
                        conn.Close();
                        int left = Interlocked.Decrement(ref goal);

                        if (0 == left)
                        {
                            done.Set();
                        }
                        else if (left > 0)
                        {
                            RunTask();
                        }
                    }
                }, null);

        }

    }
} 
```

在设置了 50k 订阅后（大约需要 5 分钟），这里是单个插入的 stats io：

```
set statistics time on
insert into Test..SqlDependencyTest (SomeValue) values ('Foo');

SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 0 ms.

 SQL Server Execution Times:
   CPU time = 16 ms,  elapsed time = 16 ms. 
```

插入 1000 行大约需要 7 秒，其中包括触发数百个通知。CPU 利用率约为 11%。所有这些都在我的 T420s ThinkPad 上。

```
set nocount on;
go

begin transaction
go
insert into Test..SqlDependencyTest (SomeValue) values ('Foo');
go 1000

commit
go 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:22:19.020

文档说：

> SqlDependency 设计用于 ASP.NET 或中间层服务，在这些服务中，相对少量的服务器对数据库具有活动的依赖项。它不是为在客户端应用程序中使用而设计的，在客户端应用程序中，**成百上千的客户端** 计算机将为单个数据库服务器设置 SqlDependency 对象。

它告诉我们不要打开数千个缓存依赖项。这可能会导致 SQL Server 上的资源问题。

有几种选择：

1.  每个表都有一个依赖项
2.  每个表有 100 个依赖项，每百分比的行一个。这对于 SQL Server 来说应该是一个可接受的数字，但您只需要使 1% 的缓存无效。
3.  让触发器将所有更改行的 ID 输出到日志记录表中。在该表上创建一个依赖项并读取 ID。这将准确地告诉您哪些行已更改。

为了确定 SqlDependency 是否适合大规模使用，我做了一个基准测试：

```
 static void SqlDependencyMassTest()
        {
            var connectionString = "Data Source=(local); Initial Catalog=Test; Integrated Security=true;";
            using (var dependencyConnection = new SqlConnection(connectionString))
            {
                dependencyConnection.EnsureIsOpen();

                dependencyConnection.ExecuteNonQuery(@"
if object_id('SqlDependencyTest') is not null
    drop table SqlDependencyTest

create table SqlDependencyTest (
    ID int not null identity,
    SomeValue nvarchar(400),
    primary key(ID)
)

--ALTER DATABASE Test SET ENABLE_BROKER with rollback immediate
");

                SqlDependency.Start(connectionString);

                for (int i = 0; i < 1000 * 1000; i++)
                {
                    using (var sqlCommand = new SqlCommand("select ID from dbo.SqlDependencyTest where ID = @id", dependencyConnection))
                    {
                        sqlCommand.AddCommandParameters(new { id = StaticRandom.ThreadLocal.GetInt32() });
                        CreateSqlDependency(sqlCommand, args =>
                            {
                            });
                    }

                    if (i % 1000 == 0)
                        Console.WriteLine(i);
                }
            }
        } 
```

您可以通过控制台滚动查看创建的依赖项数量。它很快就会变慢。我没有进行正式的测量，因为没有必要证明这一点。

此外，简单插入表的执行计划显示 99% 的成本与维护 50k 依赖项相关。

结论：根本不适用于生产用途。30 分钟后，我创建了 55k 个依赖项。机器始终处于 100% CPU。

# objective-c - iAd 快速抛出错误（XCode 4.3.1、iOS5、Storyboard）

> ID：10302379
> 
> 赞同：1
> 
> 时间：2012-04-24T16:50:03.517
> 
> 标签：objective-c, ios5, storyboard, iad, xcode4.3

尝试从 XCode 4.3.1 测试 iAd。没有多想，我开始使用故事板，但是我发现的所有 iAd 示例都只使用 XIB 文件。

[http://www.techotopia.com/index.php/Integrating_iAds_into_an_iOS_5_iPhone_App#Displaying_the_Ad](http://www.techotopia.com/index.php/Integrating_iAds_into_an_iOS_5_iPhone_App#Displaying_the_Ad) http://www.youtube.com/watch?v=zkMhWPh6fzM [http://www.youtube.com/watch?v=hsjSCM9JJrM](http://www.youtube.com/watch?v=hsjSCM9JJrM)

甚至 iAds Suite 也是基于 XIB 文件构建的。

我是 ObjectiveC 的新手，所以我可能忽略了一些明显的东西。但是，使用这些示例在故事板上失败是正常的吗？

我可以发布代码，但老实说，这与 YouTube 示例相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T03:57:01.643

将 iAd.framework 添加到您的目标

# c++ - 纹理不会出现 - GLUT OpenGL

> ID：10302382
> 
> 赞同：1
> 
> 时间：2012-04-24T16:50:11.913
> 
> 标签：c++, opengl, textures, glut, texture-mapping

我在尝试使用类在 OpenGL GLUT 项目中加载纹理时遇到问题。这是一些包含纹理内容的代码：

从模型类的子类声明纹理模型。

`TextureModel * title = new TextureModel("Box.obj", "title.raw");`

TextureModel子类的构造方法：

```
TextureModel(string fName, string tName) : Model(fName), textureFile(tName)
{   
    material newMat = {{0.63,0.52,0.1,1.0},{0.63,0.52,0.1,1.0},{0.2,0.2,0.05,0.5},10};
    Material = newMat;
    // enable texturing
    glEnable(GL_TEXTURE_2D);

    loadcolTexture(textureFile);
    glGenTextures(1, &textureRef);
    // specify the filtering method
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    // associate the image read in to the texture to be applied
    gluBuild2DMipmaps(GL_TEXTURE_2D, 3, 256, 256, GL_RGB, GL_UNSIGNED_BYTE, image_array);
} 
```

读取 RAW 文件中数据的纹理加载功能：

```
int loadcolTexture(const string fileName) {
ifstream inFile;
inFile.open(fileName.c_str(), ios::binary );

if (!inFile.good())
{
    cerr  << "Can't open texture file " << fileName << endl;
    return 1;
}
inFile.seekg (0, ios::end);
int size = inFile.tellg();
image_array = new char [size];
inFile.seekg (0, ios::beg);
inFile.read (image_array, size);
inFile.close();
return 0;} 
```

绘制三角形的方法：

```
virtual void drawTriangle(int f1, int f2, int f3, int t1, int t2, int t3, int n1, int n2, int n3)
{
    glColor3f(1.0,1.0,1.0);
    glBegin(GL_TRIANGLES);
    glBindTexture(GL_TEXTURE_2D, textureRef);
    glNormal3fv(&normals[n1].x);
    glTexCoord2f(textures[t1].u, textures[t1].v);
    glVertex3fv(&Model::vertices[f1].x);

    glNormal3fv(&normals[n2].x);
    glTexCoord2f(textures[t2].u, textures[t2].v);
    glVertex3fv(&Model::vertices[f2].x);

    glNormal3fv(&normals[n3].x);
    glTexCoord2f(textures[t3].u, textures[t3].v);
    glVertex3fv(&Model::vertices[f3].x);
    glEnd();
} 
```

我还启用了光照、深度测试和双缓冲。

模型和照明工作正常，但纹理没有出现。任何它不起作用的原因都会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:00:47.343

为了添加评论，我在这里看到了一些东西：

1.  正如评论中提到的，您需要先绑定纹理，然后才能将数据上传到它。使用 生成纹理后`glGenTextures`，您需要在尝试加载数据或使用设置参数之前将其设置为活动纹理`glTexParameteri`

2.  您正在构建 mipmap，但不使用它们。要么设置`GL_TEXTURE_MIN_FILTER`为`GL_NEAREST_MIPMAP_LINEAR`使用 mipmap，要么一开始就不构建它们。因为你只是在浪费纹理内存。

3.  `glBegin`在/之间绑定纹理是不合法的，`glEnd`就像你在`drawTriangle`. 将其绑定在`glBegin`.

4.  请，*请*，**请**开始`glGetError`在您的代码中使用。这将告诉您在您必须来要求找出错误之前您是否做错了事。（如果你一直在使用它，你会在这里发现 2/3 的错误）。

# c# - 将 PayPal IPN 集成到网站中

> ID：10302383
> 
> 赞同：0
> 
> 时间：2012-04-24T16:50:12.113
> 
> 标签：c#, asp.net, paypal, paypal-ipn

我正在开发一个捐赠页面，该页面允许用户输入捐赠金额，然后使用 PayPal 付款。我已经使用 PayPal 成功创建了一个沙盒帐户。完成此操作后，我创建了一个用于接收付款的企业帐户和一个用于付款的个人帐户。

我想要做的是利用即时付款通知功能，它允许开发人员验证用户是否确实在 PayPal 的付款页面上进行了交易（以便我可以将其记录在数据库中）。

我尝试在企业帐户上发布我的 IPN 页面的 URL。问题是它不接受 URL。这是我提供的 URL：

[http://localhost:54866/Default.aspx](http://localhost:54866/Default.aspx)

该网站不是在线托管的。请问这怎么做？我应该如何提供网址？谢谢 ：）

PS 我正在使用 C# 和 ASP.NET

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T16:54:57.323

是的，你是对的，你不能给本地主机（它会尝试解析到贝宝自己的服务器......）所以你必须做一些诡计。

你需要做的是：

假设您的商店将成为 www.mynewshop.com

1）在贝宝中设置为IPN重定向

2)[更改您的 HOST](http://www.windowsreference.com/windows-7/edit-hosts-file-in-windows-7-windows-vista/)文件以将 www.mynewshop.com 重定向到 127.0.0.1（例如 localhost）

您可以通过尝试在浏览器中键入例如 www.mynewshop.com 来测试第 2 步是否正常工作 - 如果您在端口 80 上有一个服务器，它将解析为 localhost:80 或者说您有 devweb 服务器在 :1234 上运行，输入 www.mynewshop .com:1234 在浏览器地址栏中并检查解决

3）将项目上的端口设置为：80（因为我认为您不能在贝宝中指定除 :80 以外的任何内容）。您可以通过 project.properties 设置项目测试服务器端口 - 将其设置为非动态端口，然后您可以设置固定：80

将会发生的事情是，Paypal 会尝试将您重定向回您的 PC 尝试访问的 www.mynewshop.com，但在幕后您最终会访问 localhost。

从内存中，您还可以设置项目属性以启动浏览器，例如 www.mynewshop.com，这意味着即使在开发中您似乎正在使用实时 URL。这可以有其优势，例如，它将帮助您发现由于 localhost 与实时主机 URL 而导致的错误 URL/部署差异。

玩得开心！:) （并将其标记为答案 - 我知道它有效，因为我很久以前自己解决了这个问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:56:31.860

您必须在路由器上设置端口转发。“localhost”不可公开路由，因此 PayPal 无法访问它。

如果您将路由器上的端口（公共 IP）转发到本地 PC，则可以使用 IP 地址和端口组合作为 IPN url 进行测试。例如`1.2.3.4:8080`，它将转发到您的测试服务器的内部 IP 地址。

PayPal IPN 的工作方式是在交易发生后或交易信息发生变化时联系您的服务器，因此 PayPal 必须能够访问您的 IPN URL。它独立于您的主机文件或任何访问者。

# jquery - jquery ui模式对话框不提交

> ID：10302390
> 
> 赞同：0
> 
> 时间：2012-04-24T16:50:39.350
> 
> 标签：jquery, user-interface, modal-dialog, form-submit

**我的目标**- 用户在自动完成中输入 ClientName 并选择 ClientName。选择时，应用按钮被启用。

单击 Apply 按钮，将 ClientName 和 ClientId 提交到不同的 PHP 页面。

**我的问题**- 一切正常，但不会重定向/发布到表单操作中的页面 url。

谁能帮忙，非常感谢。

```
$(function() {
 $("#btnCancelId").button();
     $("#btnApplyId").button();
     $('#btnApplyId').attr('disabled', true);
 $("#btnAddId").button();
     $('#btnAddId').click(function() {$divDialog.dialog('open'); return false;});

     $('#txtClientName').bind('keyup', function() {
 $('#txtClientId').val('');
 $('#txtClientId').css({'background-color': '#FFC0C0'});
 $("#btnApplyId:eq(0)").addClass("ui-state-disabled").attr("disabled", true);
  });

    var $divDialog = $('#divDialog');
    $divDialog.dialog({
  autoOpen: false,
  modal: true,
  title: 'Company name',
  buttons: [{
     id: 'btnCancelId',
     text: 'Cancel',
     click: function() {$divDialog.dialog('close');}
     },{
      id: 'btnApplyId',
      text: 'Apply',
      disabled: true,
      click: function() {
        $('#divDialog').submit();
    //    $divDialog.dialog('close');
     }
     }]
 });

    $("#txtClientName").autocomplete({
      source: "_ajcustlist.php",
      minLength: 2,
      select: function(event, ui) {
   $("#btnApplyId:eq(0)").removeClass("ui-state-disabled").attr("disabled", false);
            $('#txtClientId').val(ui.item.id);}
    });
}); 
```

Html 代码是 -

```
<div id="divDialog">
  <form id="client_form" name="client_form" method="post" action="editinv.php">
   <input type="text" id="txtClientName" name="txtClientName" />
   <input type='text' id='txtClientId' name='txtClientId' style='display:none'/>
  </form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:13:39.780

对话框操作按钮中的单击事件是错误的。它目前正在尝试在 div 中提交一个 div ( `$('#divDialog')`) 而不是表单 ( `$('#client_form')`)。

改变：

```
click: function() {
    $('#divDialog').submit();
    //    $divDialog.dialog('close');
}}] 
```

到：

```
click: function() {
    $('#client_form').submit();
    //    $divDialog.dialog('close');
}}] 
```

# c# - 激活 IAudiRepository 时出错 没有匹配的绑定可用，并且类型不是自绑定的

> ID：10302392
> 
> 赞同：0
> 
> 时间：2012-04-24T16:50:48.913
> 
> 标签：c#, wcf, dependency-injection, inversion-of-control, ninject

WCF 服务。我第一次尝试使用 WCF 参加 IoC。从控制台应用程序调用服务进行测试。有趣的是，我认为这些服务正在运行，所以我使用它们来提供数据来测试我正在研究的 POC……我几乎不知道我最终会修复这些服务！

（使用 Cassini 进行调试）

我正在使用的版本：

*   FluentNHibernate 1.1.0.685
*   NHibernate 2.1.2.4000
*   忍者 2.2.0.0
*   Ninject.Extensions.Wcf 2.2.0.0
*   .NET 框架 3.5

这是我用作参考的示例之一：[Pieter De Rycke 的博客](http://pieterderycke.wordpress.com/category/ninject/)

我在 SO 上找到的几乎每一篇文章都与 MVC 相关……我认为我的问题略有不同，因为这是 WCF 而不是 MVC。

## 例外：

```
Error activating IAuditRepository
No matching bindings are available, and the type is not self-bindable.
Activation path:
    2) Injection of dependency IAuditRepository into parameter auditRepository of constructor of type ShotService
    1) Request for ShotService

Suggestions:
    1) Ensure that you have defined a binding for IAuditRepository.
    2) If the binding was defined in a module, ensure that the module has been loaded into the kernel.
    3) Ensure you have not accidentally created more than one kernel.
    4) If you are using constructor arguments, ensure that the parameter name matches the constructors parameter name.
    5) If you are using automatic module loading, ensure the search path and filters are correct. 
```

**控制台应用程序失败代码：（** *在最后一行失败）*

```
ShotServiceClient shotSvc = new ShotServiceClient();
LookupShotAdministeredRequest request = new LookupShotAdministeredRequest();
request.ClientId = "128";
request.ClinicId = "289";
request.RequestingUserId = "1";
List<ShotsAdministeredContract> shots = shotSvc.LookupShotAdministered(request).ShotsAdministered; 
```

## 编码：

全球.asax.cs

```
public class Global : NinjectWcfApplication
{
    protected override IKernel CreateKernel()
    {
        var modules = new INinjectModule[]
        {
            new NHibernateModule(),
            new ServiceModule(),
            new RepositoryModule()
        };
        return new StandardKernel(modules);
    }
} 
```

NHibernateSessionFactoryProvider.cs

```
public class NhibernateSessionFactoryProvider : Provider<ISessionFactory>
{
    protected override ISessionFactory CreateInstance(IContext context)
    {
        var sessionFactory = new NhibernateSessionFactory();
        return sessionFactory.GetSessionFactory();
    } 
} 
```

NHibernateSessionFactory.cs

```
public class NhibernateSessionFactory
{
    public ISessionFactory GetSessionFactory()
    {
        ISessionFactory fluentConfiguration = Fluently.Configure()
            .Database(MsSqlConfiguration.MsSql2008
            .ConnectionString(ConfigurationManager.ConnectionStrings["DefaultConnectionString"].ConnectionString)
            .Cache(c => c
            .UseQueryCache()
            .ProviderClass<HashtableCacheProvider>())
            .ShowSql())
            .Mappings(m => m.FluentMappings.AddFromAssemblyOf<AppointmentMap>()
            .Conventions.AddFromAssemblyOf<PrimaryKeyConvention>())
            .BuildSessionFactory();
        return fluentConfiguration;
    }
} 
```

NHibernateModule.cs

```
public class NHibernateModule : NinjectModule
{
    public override void Load()
    {
        Bind<ISessionFactory>().ToProvider<NhibernateSessionFactoryProvider>().InSingletonScope();
        Bind<ISession>().ToMethod(context => context.Kernel.Get<ISessionFactory>().OpenSession()).InRequestScope();
    } 
} 
```

存储库模块.cs

```
public class RepositoryModule : NinjectModule
{
    public override void Load()
    {
        Bind<IAuditRepository>().To<AuditRepository>();
        .
        .
        .
        Bind<IShotAdministeredRepository>().To<ShotAdministeredRepository>();
    } 
} 
```

服务模块.cs

```
public class ServiceModule : NinjectModule
{
    public override void Load()
    {
        Bind<IAuditService>().To<AuditService>();
        .
        .
        .
        Bind<IShotService>().To<ShotService>();
    } 
} 
```

NinjectInstanceProvider.cs

```
public class NinjectInstanceProvider : IInstanceProvider
{
    private Type serviceType;
    private IKernel kernel;

    public NinjectInstanceProvider(IKernel kernel, Type serviceType)
    {
        this.kernel = kernel;
        this.serviceType = serviceType;
    }

    public object GetInstance(InstanceContext instanceContext)
    {
        return this.GetInstance(instanceContext, null);
    }

    public object GetInstance(InstanceContext instanceContext, Message message)
    {
        //Create the instance with your IoC container of choice...here we're using Ninject
        return kernel.Get(this.serviceType);
    }

    public void ReleaseInstance(InstanceContext instanceContext, object instance)
    {
    }
} 
```

NinjectBehaviorAttribute.cs

```
public class NinjectBehaviorAttribute : Attribute, IServiceBehavior
{
    public void AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, Collection<ServiceEndpoint> endpoints, BindingParameterCollection bindingParameters)
    {
    }

    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        Type serviceType = serviceDescription.ServiceType;
        IInstanceProvider instanceProvider = new NinjectInstanceProvider(new StandardKernel(), serviceType);

        foreach (ChannelDispatcher dispatcher in serviceHostBase.ChannelDispatchers)
        {
            foreach (EndpointDispatcher endpointDispatcher in dispatcher.Endpoints)
            {
                DispatchRuntime dispatchRuntime = endpointDispatcher.DispatchRuntime;
                dispatchRuntime.InstanceProvider = instanceProvider;
            }
        }
    }

    public void Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
    }
} 
```

IAuditRepository.cs

```
public interface IAuditRepository : IRepository<Audit>
{
} 
```

审计存储库.cs

```
public class AuditRepository : Repository<Audit>, IAuditRepository
{
    public AuditRepository(ISession session) : base(session) { }
} 
```

ShotRepository.cs

```
public class ShotRepository : Repository<Shot>, IShotRepository
{
    public ShotRepository(ISession session) : base(session) { }
} 
```

ShotService.svc.cs

```
[NinjectBehaviorAttribute]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
public class ShotService : IShotService
{
    #region Members
    private IAuditRepository _auditRepository;
    private IClientRepository _clientRepository;
    private IClinicRepository _clinicRepository;
    private IShotRepository _repository;
    private IShotAdministeredRepository _administeredRepository;
    private IShotCostRepository _costRepository;
    private IUserRepository _userRepository;
    #endregion

    #region Constructors
    public ShotService(IAuditRepository auditRepository, IClientRepository clientRepository, IClinicRepository clinicRepository, IShotRepository repository, IShotAdministeredRepository administeredRepository, IShotCostRepository costRepository, IUserRepository userRepository)
    {
        _auditRepository = auditRepository;
        _clientRepository = clientRepository;
        _clinicRepository = clinicRepository;
        _repository = repository;
        _administeredRepository = administeredRepository;
        _costRepository = costRepository;
        _userRepository = userRepository;
    }
    #endregion

    #region IShotService Members
    .
    .
    .
    public ListAdministeredShotsResponse LookupShotAdministered(LookupShotAdministeredRequest request)
    {
        ListAdministeredShotsResponse response = new ListAdministeredShotsResponse();
        try
        {
            UserService userService = new UserService(_userRepository, _auditRepository);
            User requestingUser = userService.Read(Convert.ToInt32(request.RequestingUserId));
            if (userService.HasPermission(requestingUser, Permissions.ScheduleAppointments))
            {
                ShotAdministeredService service = new ShotAdministeredService(_administeredRepository, _auditRepository);
                //Guts of method go here...irrelevant to current issue
            }
            else
            {
                throw new InvalidPermissionException("Requesting user does not have sufficient permissions to complete the request.");
            }
        }
        catch (Exception ex)
        {
            response.FailureReason = ex.Message;
        }
        return response;
    }
    .
    .
    .
    #endregion
} 
```

我在 CreateKernel() 中放了一个断点，它没有被击中。我还在 NHibernateModule.cs 的 Load() 中设置了一个断点，该断点也没有被击中。 **<-- 更正**...卡西尼“没有响应”所以我想我并没有真正调试我的所有代码。我刚刚在 Cassini 上执行了一个结束任务，并在我的服务上重新运行了调试器……我在 CreateKernel() 中的断点被命中，我在 Load() 中的断点也被命中。我的主要问题仍然存在，但至少我知道这段代码正在执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T23:08:36.270

您正在使用 Ninject.Extensions.Wcf，同时您自己集成到 Wcf 中。涉及两个内核实例，其中一个已配置，另一个未配置。您应该决定使用哪个集成并正确配置该内核。

# java - SocketPermission - 客户端端口？

> ID：10302394
> 
> 赞同：0
> 
> 时间：2012-04-24T16:51:00.307
> 
> 标签：java

我一直在开发一个 Web 应用程序，该应用程序部署在 Apache Tomcat 6 中，运行 Java 6 Update 31。需要包含一个模块，该模块将简单地监听端口 X 上的传入 TCP 流量以供将来处理。在我们启用 Java 安全管理器（IA 要求）之前，一切都运行良好。

启用后，我们开始收到 AccessControlExceptions，但这是意料之中的，因为我们的策略文件中没有任何内容明确允许此流量。因此，我在 Tomcat 的“catalina.policy”文件中添加了以下几行（其中 54321 是应用程序正在侦听的端口）：

```
grant {
  permission java.net.SocketPermission "*:54321", "accept, resolve";
}; 
```

但是，我们仍然看到 AccessControlExceptions，例如：

```
java.security.AccessControlException: access denied (java.net.SocketPermission 192.168.1.50:1527 accept,resolve) 
```

查看该错误行，我注意到“192.168.1.50”实际上是客户端的 IP，因此“1527”必须是套接字的客户端端口。每次尝试此端口时，此端口都会更改这一事实来验证这一点...

所以，我的问题是：为什么我的 Web 应用程序需要关心客户端端口？我的理解是传出连接只是使用任意/随机端口。在我看来，就我而言，对于这个策略文件，我应该只需要指定我想要监听的端口。但是，我可以让它工作的唯一方法是如果我在上面的权限行中将“54321”更改为“*”，从而向世界开放 JVM。

我对这里的语法有误解吗？如何确保我的应用程序接受来自任何主机、任何客户端端口、服务器端口 54321 的连接？

谢谢，道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:10:30.560

The socket permission *:54321/accept allows you to accept connections from any host using the remote port 54321\. That does not make much sense, but a permission like e.g. 192.168.1.50:*/accept would allow you to accept connections from 192.168.1.50 using any port.

If you want to listen for incoming connections on port 54321, you need a permission *:54321/listen (not accept). You can combine these permissions to describe on which local ports your Java process is allowed to listen and from which remote hosts it is allowed to accept connections.

# c# - Azure 角色环境未初始化

> ID：10302396
> 
> 赞同：5
> 
> 时间：2012-04-24T16:51:06.977
> 
> 标签：c#, azure, azure-storage, seh, azure-role-environment

我的项目突然停止工作。我正在使用本地存储，当我尝试初始化角色环境时，它说：

> “Microsoft.WindowsAzure.ServiceRuntime 错误：102：角色环境。初始化失败”

并且发生 SEH 异常，错误代码为“-2147467259”。我启动项目的云部分的新实例，然后尝试在同一解决方案中启动我的 WPF 应用程序的新实例。我认为当 WPF 应用程序运行时，它会停止云实例部署。但我不确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T16:55:40.737

如果是 SEHException，这可能与我在[这里](https://stackoverflow.com/questions/2957938/why-am-i-getting-sehexception-when-calling-roleenvironment-getconfigurationsetti/2962705#2962705)给出的另一个答案有关。

# javascript - 为什么 document.getElementById("id") 它不起作用？

> ID：10302400
> 
> 赞同：4
> 
> 时间：2012-04-24T16:51:20.520
> 
> 标签：javascript

我有以下代码（使用谷歌地图 API V3 绘制地图）：

```
 <!DOCTYPE html>
    <html>
    <head>
      <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
      <style type="text/css">
        html { height: 100% }
        body { height: 100%; margin: 0px; padding: 0px }
        #map_canvas { height: 100% ; width:100%;}
      </style>
      <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
      <script type="text/javascript">

        var previousPosition = null;

        function initialize() {
          map = new google.maps.Map(document.getElementById("map_canvas"), {
                zoom: 19,
                center: new google.maps.LatLng(48.858565, 2.347198),
                mapTypeId: google.maps.MapTypeId.ROADMAP
              });
        }

        if (navigator.geolocation)
          var watchId = navigator.geolocation.watchPosition(successCallback, null, {enableHighAccuracy:true});
        else
          alert("Votre navigateur ne prend pas en compte la géolocalisation HTML5");

        function successCallback(position){
          map.panTo(new google.maps.LatLng(position.coords.latitude, position.coords.longitude));
          var marker = new google.maps.Marker({
            position: new google.maps.LatLng(position.coords.latitude, position.coords.longitude),
            map: map
          });
          if (previousPosition){
            var newLineCoordinates = [
               new google.maps.LatLng(previousPosition.coords.latitude, previousPosition.coords.longitude),
               new google.maps.LatLng(position.coords.latitude, position.coords.longitude)];

            var newLine = new google.maps.Polyline({
              path: newLineCoordinates,
              strokeColor: "#FF0000",
              strokeOpacity: 1.0,
              strokeWeight: 2
            });
            newLine.setMap(map);
          }
          previousPosition = position;
        };
      </script>
    </head>

    <body onload="initialize()">
      <div id="map_canvas"></div>
    </body>

    </html> 
```

它工作得很好（你可以测试它），但是当我输入时：

```
<div id="a">
 <div id="map_canvas"></div>
</div> 
```

代替：

```
 <div id="map_canvas"></div> 
```

它不起作用了...

为什么它在第二个版本中不起作用？

PS：我刚刚给出了一个代表我真实代码的简单代码（只是为了让你更容易理解）......

**编辑**：我不太明白，我认为这是选择器的问题......正如迈克尔哈伦所说。

我试图在我的代码中执行此操作，但是当我单击“单击我”时它不起作用...

```
<!DOCTYPE html> 
<html>

<head>
<style>
html { height: 100% }
body { height: 100%; margin: 0px; padding: 0px }
/*
 #content,#right = #a,#map_canvas{..
*/
#content,#right { width:70%; height: 100%;margin-left:2%;  box-shadow: 0px 5px 5px 5px #aaa; }

</style>

<title>Géolocalisation restreinte</title>
<%@include file="includes/head.html" %>  
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
  <script type="text/javascript">

    function drawMap(){
   var locTunisie= new google.maps.LatLng(33.858565, 10.347198);
   map = new google.maps.Map(document.getElementById("right"), {
            zoom: 6,
            center:locTunisie,
            mapTypeId: google.maps.MapTypeId.ROADMAP
          });     
}

</script>

</head>

<body>

<!-- iclure le  header-->
<%@include file="includes/header.html" %>     
<!-- fin inclure -->   

<div id="notification"><!-- zone de notification -->

</div>

<!--  Le contenu  -->
<div id="content">
    <form name="f">

<!--  draw the map Here  -->
         <div id="right">

        </div> 

    <div id="left">
        <a onclick="drawMap()">Click Here</a>

        <input type="date" placeholder="Date debut jj-mm-aaaa" name="dateDeb" id="dateDeb">&rarr;<input type="date"placeholder="Date Fin jj-mm-aaaa" name="dateFin"id="dateFin">
        <br/>
        <br/>

        <div class="scrollbar-b">

        <table class="newspaper-a" summary="">
    <caption>Liste des Automobile en lignes</caption>
    <thead>
        <tr>
            <th scope="col">Type</th>
            <th scope="col">Matriculation</th>
            <th scope="col">Marque</th>
            <th scope="col">Model</th>

        </tr>
    </thead>

           <tbody id="onLine">

           </tbody>
         </table>  
       </div>  <br/><br/>   
       <div class="scrollbar-b">       
        <table class="newspaper-a" summary="">
    <caption>Liste des Automobile hors lignes</caption>
    <thead>
        <tr>
            <th scope="col">Type</th>
            <th scope="col">Matriculation</th>
            <th scope="col">Marque</th>
            <th scope="col">Model</th>

        </tr>
    </thead>

           <tbody id="offline">

           </tbody>
         </table>  

        </div>
    </div>  

    </form>
</div>      
<!--  Fin contenu  -->    

<!-- iclure le footer-->
<%@include file="includes/footer.html" %>   
<!-- fin iclure-->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T16:55:04.060

问题是 100% 大小的地图容器最初以作为根元素的窗口为界。但是当你将它嵌套在另一个 div 中时，它现在由*那个*小得多（即 0）的 div 界定。

您还需要使外部 div 更大：

```
#a, #map_canvas { height: 100% ; width:100%;}
^^^ 
```

# python - Django inlineformset_factory 和 ManyToMany 字段

> ID：10302403
> 
> 赞同：5
> 
> 时间：2012-04-24T16:51:34.767
> 
> 标签：python, django, django-forms

我正在尝试为以下模型创建一个表单集：

```
class Category(models.Model):

    name = models.CharField(max_length=100, unique=True)
    description = models.TextField(null = True, blank=True)

class Recipe(models.Model):
    title = models.CharField(max_length=100)
    body = models.TextField()
    user = models.ForeignKey(User)
    categories = models.ManyToManyField(Category, null = True, blank = True) 
```

但是任何时候我尝试实现一个表单集，就像这样：

```
FormSet = inlineformset_factory(Category, Recipe, extra=3)
        formset = FormSet() 
```

我收到一条错误消息，指出 Category 模型中不存在 ForeignKey。是否可以使用 ManyToManyField 构建表单集，或者以某种方式复制此功能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:59:04.800

根据源代码和文档，它仅适用于外键

所以如果你想为你的模型创建一个表单集，你必须改变

```
categories = models.ManyToManyField(Category, null = True, blank = True) 
```

至

```
categories = models.ForeignKey("Category", null = True, blank = True) 
```

文档： [https ://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#inline-formsets](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#inline-formsets) [https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#more-than -同一个模型的一个外键](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#more-than-one-foreign-key-to-the-same-model)

Django 源码：

```
def inlineformset_factory(parent_model, model, form=ModelForm,
                          formset=BaseInlineFormSet, fk_name=None,
                          fields=None, exclude=None,
                          extra=3, can_order=False, can_delete=True, max_num=None,
                          formfield_callback=None):
    """
    Returns an ``InlineFormSet`` for the given kwargs.

    You must provide ``fk_name`` if ``model`` has more than one ``ForeignKey``
    to ``parent_model``.
    """ 
```

# android - 无法实例化服务 com.bump.api.BumpAPI: java.lang.ClassNotFoundException: com.bump.api.BumpAPI

> ID：10302405
> 
> 赞同：1
> 
> 时间：2012-04-24T16:51:37.387
> 
> 标签：android, eclipse, jar, bump

我正在尝试运行 Bump API 3.0 的示例应用程序，当我尝试在模拟器上运行应用程序时，我收到以下错误：

`E/AndroidRuntime(742): java.lang.RuntimeException: Unable to instantiate service com.bump.api.BumpAPI: java.lang.ClassNotFoundException: com.bump.api.BumpAPI`

我尝试遵循 API 说明（就 android/java/any 编程而言，我相当新鲜），我将附加的 .jar 文件添加到项目中（构建路径-> 添加 JAR），我看到了缺少的类在“参考库”列表中。还附加了一个.so 文件，这个文件我只放在“libs”文件夹中，因为除此之外我不知道如何将它链接到项目。

我将不胜感激解决此问题的任何帮助，

非常感谢，

盖瓦·塔尔。

编辑：创建新的 AVD 后解决...仍然不知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T23:57:27.453

It sounds like everything should be working fine... I suggest cleaning your project, restarting eclipse, and perhaps creating a new AVD.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T06:39:51.233

[https://groups.google.com/forum/?fromgroups#!topic/bump-api-android/WMGHaRqoWQA](https://groups.google.com/forum/?fromgroups#!topic/bump-api-android/WMGHaRqoWQA)

这是答案。将 .so 包含到项目的 libs 文件夹中。他们的说明页面缺少这个。

# html - IE和FF中的定位——浏览器之间布局不一致的框修复解决方案

> ID：10302406
> 
> 赞同：1
> 
> 时间：2012-04-24T16:51:40.910
> 
> 标签：html, css, layout

我正在构建这个精灵图，用 CSS 定位。我已经在 IE 中构建了原型，并且在 FF 中的框定位很差。

![在此处输入图像描述](../Images/ba62cac4a2080d304b29c59fb60807ff.png)

如您所见，在 IE 9 中背景位置排列正确，但在 FireFox 中，ListItem 背景是可见的，但严重偏移。

这是我用于此布局的 CSS。有没有人看到可能导致这种差异的问题？

```
#iconmenu #panel1c {left: 1px;   background-position-x: -48px; background-position-y: -9px;   no-repeat;}
#iconmenu #panel2c {left: 119px; background-position-x: -48px; background-position-y: -87px;  no-repeat;}
#iconmenu #panel3c {left: 237px; background-position-x: -48px; background-position-y: -165px; no-repeat;}
#iconmenu #panel4c {left: 354px; background-position-x: -48px; background-position-y: -241px; no-repeat;}
#iconmenu #panel5c {left: 469px; background-position-x: -48px; background-position-y: -319px; no-repeat;}
#iconmenu #panel6c {left: 586px; background-position-x: -48px; background-position-y: -397px; no-repeat;}
#iconmenu #panel7c {left: 704px; background-position-x: -48px; background-position-y: -475px; no-repeat;}
#iconmenu #panel8c {left: 821px; background-position-x: -48px; background-position-y: -553px; no-repeat;}
#iconmenu #panel1c a:hover {background: url(<%=Url.Content("~/Images/sprite.png")%>) -48px -630px  no-repeat;}
#iconmenu #panel2c a:hover {background: url(<%=Url.Content("~/Images/sprite.png")%>) -48px -708px  no-repeat;}
#iconmenu #panel3c a:hover {background: url(<%=Url.Content("~/Images/sprite.png")%>) -48px -786px  no-repeat;}
#iconmenu #panel4c a:hover {background: url(<%=Url.Content("~/Images/sprite.png")%>) -48px -862px  no-repeat;}
#iconmenu #panel5c a:hover {background: url(<%=Url.Content("~/Images/sprite.png")%>) -48px -940px  no-repeat;}
#iconmenu #panel6c a:hover {background: url(<%=Url.Content("~/Images/sprite.png")%>) -48px -1018px no-repeat;}
#iconmenu #panel7c a:hover {background: url(<%=Url.Content("~/Images/sprite.png")%>) -48px -1096px no-repeat;}
#iconmenu #panel8c a:hover {background: url(<%=Url.Content("~/Images/sprite.png")%>) -48px -1174px no-repeat;}
#iconmenu #panel8c { border-right:0px; }
#iconmenu    { width: 936px; height: 125px; position: relative; margin-left: 0px; border: solid 1px #ce8a59; border-radius: 15px; -moz-border-radius: 15px; -webkit-border-radius: 15px; border-radius: 15px; background-color: #f8efde; }
#iconmenu li { width: 74px;  height: 74px;  position: absolute; padding-right: 20px; margin: 20px;margin-left: 22px;margin-right: 10px; top: -7px; background: url(<%=Url.Content("~/Images/sprite.png")%>) 0 0 no-repeat;display: block;list-style: none;border-right: 1px solid #d59d6e;}
#iconmenu a  { width: 73px;  height: 72px;  display: block; }
#iconmenu a:hover { color: #edc07f; }
#iconmenu span { font-family: Arial,Tahoma,Verdana;font-size: 10px;font-weight: bold;color: #cc8a5a;margin-top: 0px;padding-top: 9px;line-height: 1em;text-align: center;vertical-align: baseline;display: block;}
.icon {height:70px; width:100px;}
.iconMenuItem { float:left; width:117px; height:70px; border-left:1px solid #ce8a59;    } 
```

这是HTML：

```
<ul id="iconmenu">
                            <li id="panel1c"><a href="#"></a><span>Production Dashboard</span></li>
                            <li id="panel2c"><a href="#"></a><span>Lorem Ipsum</span></li>
                            <li id="panel3c"><a href="#"></a><span>Lorem Ipsum</span></li>
                            <li id="panel4c"><a href="#"></a><span>Lorem Ipsum</span></li>
                            <li id="panel5c"><a href="#"></a><span>Lorem Ipsum</span></li>
                            <li id="panel6c"><a href="#"></a><span>Lorem IpsumExcel</span></li>
                            <li id="panel7c"><a href="#"></a><span>Lorem Ipsumnt Uploader</span></li>
                            <li id="panel8c"><a href="#"></a><span>Lorem Ipsumols</span></li>
                        </ul> 
```

非常感谢您观看！

编辑 - 全面披露，这就是上面的代码产生的。第一个屏幕截图基于更旧的代码：

![在此处输入图像描述](../Images/e74fda1f8aeda136dac43c8e294949f2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:36:28.837

我可以看出差异...

`background-position-x`和 ``background-position-y` 不受 Firefox 和 Opera 支持（*[并且不是标准的 W3C CSS 属性](https://stackoverflow.com/a/9653939/128165)*）。

所以而不是使用

```
background-position-x: -48px; background-position-y: -9px; 
```

利用

```
 background-position: -48px -9px; 
```

# java - 是否有一种最佳方式来引用 java 对象的属性？

> ID：10302410
> 
> 赞同：0
> 
> 时间：2012-04-24T16:51:55.097
> 
> 标签：java

我正在使用 JExcel 插件，我注意到我正在为一组不同的对象编写相同的代码。（示例如下所示）。

```
loanProfileListSheet.addCell(new label(0,rowNum,loanProfileView.getBorrowersList().getBorrowerPartnerId()));
loanProfileListSheet.addCell(new Label(1,rowNum,loanProfileView.getBorrowersList().getFirstName() + " " +   loanProfileView.getBorrowersList().getLastName())); 
```

现在我想知道是否存在将通用对象传递给实用程序方法的最佳方法，该方法可以为我提供所需的对象（因此，与其编写诸如 loanProfileView.getBorrowersList().getFirstName() 之类的东西，我将拥有一个实用程序像这样

```
Workbook getWorkBook (List<Object> objectList, List<String> attributes, Hashmap<String, String> attributeHeaders) 
```

这样我就可以传递任何一组对象并获得一个 excel 工作簿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:35:26.417

您可以将反射与[Apache Commons / BeanUtils](http://commons.apache.org/beanutils)一起使用来制作通用方法。但是，我通常反对以这种方式使用反射。它有很多缺点，比如在你的 IDE 中重命名字段不能正确重构代码并且查找用法不能很好地工作。这使得其他开发人员（或几个月后的您自己）难以理解代码。

当您看到代码重复时，我建议您让代码更简单。

例如

```
BorrowersList bl = loanProfileView.getBorrowersList();
WorksheetUtil.createCell(loanProfileListSheet, 0, rowNum, bl.getBorrowerPartnerId());
WorksheetUtil.createCell(loanProfileListSheet, 1, rowNum, bl.getFullName()); 
```

您将 getFullName() 定义为

```
return firstname+" "+lastname; 
```

并且您将 createCell 定义为执行类似操作的 1 行实用程序

```
loanProfileListSheet.addCell(new Label(colNum,rowNum,param)); 
```

如果您真的想走重新选举路线，这里有一篇文章涵盖了您需要的内容：[Java Reflection Beans Property API](https://stackoverflow.com/questions/5856895/java-reflection-beans-property-api)

# ruby - 如何在 mixin 中使用 define_method？

> ID：10302411
> 
> 赞同：0
> 
> 时间：2012-04-24T16:51:59.147
> 
> 标签：ruby, metaprogramming

嗨，我正在尝试使用 mixin 来定义一些使用 define_method 的方法。我想做类似的事情

```
module A
  %w(a b c d).each do |w|
     define_method(w) { "method #{w}" }
  end
end 
```

所以我可以这样做

```
class B
  include A
end

B.new.c # => 'method c' 
```

但这不起作用。

我已经尝试了（几乎）所有涉及包括的东西，instance_eval class_eval 等......没有工作。

有可能吗？

# 更新

我发布的示例中最初存在语法错误，但这不是真正的问题。我只是为帖子制作了示例，这不是真实的示例（发布时间太长了）。

我的问题是我在列表中使用了逗号`%w(a, b, c, b)`而不是`%w(a b c b)`

因此，`a,`被定义而不是`a`. 愚蠢的我，（虽然很难发现）。

看到它对你们有用，帮助我解决了问题，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:04:08.813

模块不应该是：

```
module A
  %w(a b c d).each do |w|
     define_method(w) { "method #{w}" }
  end
end 
```

也就是说，`end`丢失了。

# python - 如何使用 pip 从 Bitbucket 安装软件包？

> ID：10302417
> 
> 赞同：21
> 
> 时间：2012-04-24T16:52:32.550
> 
> 标签：python, pip, bitbucket

我正在制作一个需要指向我的存储库的 setup.py。

使用 github 我可以做到这一点：

```
dependency_links=['https://github.com/nathanborror/django-registration/tarball/master#egg=django-registration'] 
```

我怎样才能对 bitbucket 项目做同样的事情？

例如这个网址：

```
https://bitbucket.org/abraneo/django-registration 
```

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-24T16:57:58.863

您的 Github 链接似乎指向一个 gzip 压缩的 tar 文件。尝试为您的 Bitbucket 托管项目做同样的事情——https [://bitbucket.org/abraneo/django-registration/get/tip.tar.gz](https://bitbucket.org/abraneo/django-registration/get/tip.tar.gz)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-26T12:54:47.000

可以使用以下 URL 添加 BitBucket Mercurial (hg) 存储库`dependency_links`：

```
'https://bitbucket.org/zzzeek/alembic/get/tip.zip#egg=alembic-0.6.0' 
```

在这种情况下，它会安装 Alembic 包的开发版本（0.6），在撰写本文时，它还没有在 PyPI 中。

请注意，BitBucket 同时支持 Mercurial 和 git。如果 repo 是 Mercurial，则 URL 必须引用`tip.zip`，但如果是 git，则 URL 必须引用`master.zip`。

# windows - VBScript 中 Msgbox 的替代方案

> ID：10302421
> 
> 赞同：4
> 
> 时间：2012-04-24T16:52:49.957
> 
> 标签：windows, powershell, vbscript, active-directory, login-script

我想在基于 VBS 的登录脚本运行后显示状态信息。我可以简单地使用消息框，但宁愿在用户登录后让此信息短暂显示在时钟上方。

除了 Messagebox，我还有什么选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:00:25.083

您所指的是类似于气球提示的东西。VBScript 本机中没有类似的功能。您将需要使用第三方组件。

顺便说一句，PowerShell 能够做到这一点。

```
[reflection.assembly]::loadwithpartialname("System.Windows.Forms")
[reflection.assembly]::loadwithpartialname("System.Drawing")
$notify = new-object system.windows.forms.notifyicon
$notify.icon = [System.Drawing.SystemIcons]::Information
$notify.visible = $true
$notify.showballoontip(10,"Reboot Required","Please restart your computer",[system.windows.forms.tooltipicon]::None) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T15:04:42.087

如果您可以使用纯 powershell，我强烈推荐此代码段效果很好！

**例子**

![在此处输入图像描述](../Images/d8d9109060bca38c97dd20375aa9b639.png)

**代码**

```
##################
# Messenger like popup dialog
# Usage:
# New-Popup.ps1
# New-Popup.ps1 -slide -message "hello world" -title "PowerShell Popup"

param(
    [int]$formWidth=200, 
    [int]$formHeight=110,
    [string]$title="Your title here",
    [string]$message="Your message here",
    [int]$wait=4,
    [switch]$slide
)

[void][reflection.assembly]::LoadWithPartialName("System.Windows.Forms")

################
# extract powershell icon if doesn't exist
$icon = "$env:temp\posh.ico"
if( !(test-path -pathType leaf $icon)){
    [System.Drawing.Icon]::ExtractAssociatedIcon((get-process -id $pid).path).ToBitmap().Save($icon)
}

################
# Create the form
$form = new-object System.Windows.Forms.Form
$form.ClientSize = new-object System.Drawing.Size($formWidth,$formHeight)
$form.BackColor = [System.Drawing.Color]::LightBlue
$form.ControlBox = $false
$form.ShowInTaskbar = $false
$form.FormBorderStyle = [System.Windows.Forms.FormBorderStyle]::FixedSingle
$form.topMost=$true

# initial form position
$screen = [System.Windows.Forms.Screen]::PrimaryScreen
$form.StartPosition = [System.Windows.Forms.FormStartPosition]::Manual

if($slide){
    $top = $screen.WorkingArea.height + $form.height
    $left = $screen.WorkingArea.width - $form.width
    $form.Location = new-object System.Drawing.Point($left,$top)
} else {
    $top = $screen.WorkingArea.height - $form.height
    $left = $screen.WorkingArea.width - $form.width
    $form.Location = new-object System.Drawing.Point($left,$top)
}

################
# pictureBox for icon 
$pictureBox = new-object System.Windows.Forms.PictureBox 
$pictureBox.Location = new-object System.Drawing.Point(2,2)
$pictureBox.Size = new-object System.Drawing.Size(20,20)
$pictureBox.TabStop = $false
$pictureBox.SizeMode = [System.Windows.Forms.PictureBoxSizeMode]::StretchImage
$pictureBox.Load($icon)

################
# create textbox to display the  message
$textbox = new-object System.Windows.Forms.TextBox
$textbox.Text = $message
$textbox.BackColor = $form.BackColor
$textbox.Location = new-object System.Drawing.Point(4,26)
$textbox.Multiline = $true
$textbox.TabStop = $false
$textbox.BorderStyle = [System.Windows.Forms.BorderStyle]::None
$textbox.Size = new-object System.Drawing.Size(192,77)
$textbox.Cursor = [System.Windows.Forms.Cursors]::Default
$textbox.HideSelection = $false

################
# Create 'Close' button, when clicked hide and dispose the form
$button = new-object system.windows.forms.button 
$button.Font = new-object System.Drawing.Font("Webdings",5)
$button.Location = new-object System.Drawing.Point(182,3)
$button.Size = new-object System.Drawing.Size(16,16)
$button.Text = [char]114
$button.FlatStyle = [System.Windows.Forms.FlatStyle]::Flat
$button.Add_Click({ $form.hide(); $form.dispose() })
if($slide) {$button.visible=$false}

################
# Create a label, for title text
$label = new-object System.Windows.Forms.Label
$label.Font = new-object System.Drawing.Font("Microsoft Sans Serif",8,[System.Drawing.FontStyle]::Bold)
$label.TextAlign = [System.Drawing.ContentAlignment]::MiddleLeft
$label.Text = $title
$label.Location = new-object System.Drawing.Point(24,3)
$label.Size = new-object System.Drawing.Size(174, 20)

################
# Create a timer to slide the form
$timer = new-object System.Windows.Forms.Timer
$timer.Enabled=$false
$timer.Interval=10
$timer.tag="up"
$timer.add_tick({

    if(!$slide){return}

    if($timer.tag -eq "up"){
        $timer.enabled=$true
        $form.top-=2
        if($form.top -le ($screen.WorkingArea.height - $form.height)){
            #$timer.enabled=$false
            $timer.tag="down"
            start-sleep $wait
        }
    } else {

        $form.top+=2
        if($form.top -eq ($screen.WorkingArea.height + $form.height)){
            $timer.enabled=$false
            $form.dispose()
        }
    }
})

# add form event handlers
$form.add_shown({
    $form.Activate()
    (new-Object System.Media.SoundPlayer "$env:windir\Media\notify.wav").play()
    $timer.enabled=$true
})

# draw seperator line 
$form.add_paint({    
    $gfx = $form.CreateGraphics()        
    $pen = new-object System.Drawing.Pen([System.Drawing.Color]::Black)
    $gfx.drawLine($pen,0,24,$form.width,24)      
    $pen.dispose()
    $gfx.dispose()
})

################
# add controls to the form
# hide close button if form is not sliding

if($slide){
    $form.Controls.AddRange(@($label,$textbox,$pictureBox))
} else {
    $form.Controls.AddRange(@($button,$label,$textbox,$pictureBox))
}

################
# show the form
[void]$form.showdialog() 
```

另存为 New-Popup.ps1 以保持使用相同。[向http://scriptolog.blogspot.com/2008/02/windows-messenger-like-popup.html](http://scriptolog.blogspot.com/2008/02/windows-messenger-like-popup.html)的作者致谢

# java - UML 图到 Java 代码

> ID：10302422
> 
> 赞同：3
> 
> 时间：2012-04-24T16:52:52.600
> 
> 标签：java, uml

我是 Java 新手，正在尝试解决一些必须将 UML 图转换为 Java 代码的问题：我有一个 uml 文档的图像-

[http://s1079.photobucket.com/albums/w513/user20121/?action=view¤t=uml.jpg](http://s1079.photobucket.com/albums/w513/user20121/?action=view&current=uml.jpg)

我将向您展示我到目前为止所拥有的：

Q1：编写一个 Java 版本的 Entry 类，假设它有这个构造函数：public Entry(String name) 并且方法 getSize 是抽象的。A：

```
public abstract class Entry {
    private String name;

    public Entry(String name){
        this.name =  name;
    }
    public String getName()
    {
        return name;
    }
    abstract long getSize();
} 
```

Q2：写一个 Java 版本的类 File 假设它有这个构造函数： public File(String name, long size) A：

```
public class File extends Entry {
    private long size;

    public File(String name, long size){
        super(name);
        this.size = size;
    }

    public long getSize(){
        return size;
    }
} 
```

Q3：目录包含文件和目录的集合。编写一个 Java 版本的 Directory 类，假设它具有以下构造函数：public Directory(String name)，getSize 方法返回目录中所有文件及其所有子目录的总大小（在此模型中为目录本身的大小被忽略）。

A：这就是我卡住的地方，我不知道如何处理 getSize 方法。谁能告诉我到目前为止我所做的是否正确？并为我指出第三季度的正确方向？

编辑：好吧，我已经尝试过回答，但我真的不知道我在做什么..

```
import java.util.ArrayList;

public class Directory extends Entry {

    ArrayList <Entry> entries = new ArrayList<Entry>();

    public Directory(String name)
    {
        super(name);
    }

    public long getSize(){
        long size;
        for(int i=0;i<entries.size();i++)
        {
        size +=  //don't know what to put here?
        }
        return size;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:10:21.353

Your answers for Q1 and Q2 are looking fine.

Regarding Q3:

```
// A Directory is an Entry and can contain an arbitrary number of other Entry objects
public class Directory extends Entry {

    // you need a collection of Entry objects, like ArrayList<Entry>
    // ArrayList<Entry> entries = ...

    function getSize() {
        long size;
        // now we calculate the sum of all sizes
        // we do not care if the entries are directories or files
        // the respective getSize() methods will automatically do the "right thing"
        // therefore: you iterate through each entry and call the getSize() method
        // all sizes are summed up
        return size;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T22:36:42.917

您可以尝试以下 30 天评估构建：[http ://www.uml2.org/eclipse-java-galileo-SR2-win32_eclipseUML2.2_package_may2010.zip](http://www.uml2.org/eclipse-java-galileo-SR2-win32_eclipseUML2.2_package_may2010.zip)

只需解压缩即可。您编写您的 java 代码并同时获得您的 UML 类图。易于使用且非常高效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:12:59.567

正如所指出的，前两项是正确的。

以下是我将如何实现您的 Directory 类。

```
import java.util.ArrayList;

public class Directory extends Entry{

ArrayList <Entry> entries = new ArrayList<Entry>();

public Directory(String name)
{
    super(name);
}

public long getSize(){
    long size = 0;
    for(int i=0;i<entries.size();i++)
    {
    //Probably something like this
    size += entries.get(i).getSize();
    }
    return size;
}
} 
```

如果您的 Directory 包含其他目录，则会调用子目录的 getSize 来获取其大小。

您将必须添加一个不能将目录添加到自身的控件，否则您将有一个无限循环:)

另一种选择是

```
public long getSize(){
    long size = 0;
    for( Entry e : entries)
    {
    //Probably something like this
    size += e.getSize();
    }
    return size;
} 
```

# mysql - 网站邮编查询

> ID：10302425
> 
> 赞同：0
> 
> 时间：2012-04-24T16:52:59.460
> 
> 标签：mysql, zipcode

我公司网站的首页是 HTML（内置于 iWeb）。这个首页链接到几个服务于不同地理区域的商店。我的业务正在经历重大扩张，因此我不想提供每个子商店的链接，而是让客户只需输入他们的邮政编码即可链接到服务于其地理区域的适当子商店。任何人都可以提供一个允许我这样做的代码片段吗？我可以在我的服务器上设置一个 MySQL 数据库，将每个邮政编码与指向该地理区域子存储的适当链接相关联。我将如何配置此代码段以从 MySQL 数据库中提取信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:00:31.847

我们在谈论多少家商店？10？100？10,000？

还有离商店有多近？如果您考虑类似地区的区域，则可以将商店与邮政编码的前三个相关联，以获得更短的可搜索商店列表->邮政编码。

例如，17401 搜索将通过查找 174 在商店中查找邮政编码数据库的条目。这样，无论 zip 的结尾两个字符是什么，您总能找到正确的商店，而无需每个 zip （有 44K 美国代码）在您的表格中。

希望这可以帮助。

# sql-server - 更改无 DSN 访问前端的 SQL 连接信息

> ID：10302430
> 
> 赞同：3
> 
> 时间：2012-04-24T16:53:25.357
> 
> 标签：sql-server, ms-access, connection-string, ms-access-2003, database-migration

我有一个关键任务 Access 2003 数据库，它使用 Microsoft SQL Server 数据库迁移助手 (SSMA) 软件从本地 MDB 更改为带有 MS SQL Server 2005 后端的 MDB 前端。

现在，我需要将表链接到的服务器**从 IP 地址**（即将更改）永久更改为指向同一服务器**的主机名。**服务器本身没有改变，只是连接字符串。

这是一个无 DSN 连接，因此 ODBC 信息包含在 Access MDB 文件中。如果我尝试在 Access 中刷新表链接，它会提示我输入 DSN（我不想使用它）。

我做了一些谷歌搜索，我发现了几段代码，每次程序启动时都会自动更新。但是，我担心这可能会给用户带来问题或延迟。这是我最好的选择，还是有一些技巧可以永久更改存储在 MDB 中的连接字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:11:34.287

您可以使用 VBA 更改链接s的`.Connect`属性。`TableDef`

从“立即”窗口查看此示例。（我过去`Replace()`只是把那条长线分开。）

```
? Replace(CurrentDb.TableDefs("remote_table").Connect, ";", ";" & vbCrLf)
ODBC;
DRIVER=SQL Server Native Client 10.0;
SERVER=HP64\SQLEXPRESS;
Trusted_Connection=Yes;
APP=Microsoft Office 2003;
WSID=WIN732B;
DATABASE=testbed; 
```

所以我可以用不同的服务器构建一个新字符串，并将新字符串分配给`TableDef .Connect`属性。

如果这是一项永久性更改，您应该只需要执行一次，而不是每次打开数据库时。

当我完成类似的连接更改时，它一直在不同的服务器之间。所以我删除了 TableDef 并重新创建它，以确保 Access 没有保留任何关于该连接的缓存元信息，这些信息现在已经过时了。但是，在您的情况下，您正在处理相同的物理服务器，只是通过名称而不是 IP 来引用它。我怀疑缓存的信息会让你担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:15:25.163

以下代码多年来一直为我服务：

```
Function LinkTable(DbName As String, SrcTblName As String, _
                   Optional TblName As String = "", _
                   Optional ServerName As String = DEFAULT_SERVER_NAME, _
                   Optional DbFormat As String = "ODBC") As Boolean
Dim db As dao.Database
Dim TName As String, td As TableDef

    On Error GoTo Err_LinkTable

    If Len(TblName) = 0 Then
        TName = SrcTblName
    Else
        TName = TblName
    End If

    'Do not overwrite local tables.'
    If DCount("*", "msysObjects", "Type=1 AND Name=" & Qt(TName)) > 0 Then
        MsgBox "There is already a local table named " & TName
        Exit Function
    End If

    Set db = CurrentDb
    'Drop any linked tables with this name'
    If DCount("*", "msysObjects", "Type In (4,6,8) AND Name=" & Qt(TName)) > 0 Then
        db.TableDefs.Delete TName
    End If

    With db
        Set td = .CreateTableDef(TName)
        td.Connect = BuildConnectString(DbFormat, ServerName, DbName)
        td.SourceTableName = SrcTblName
        .TableDefs.Append td
        .TableDefs.Refresh
        LinkTable = True
    End With

Exit_LinkTable:
    Exit Function
Err_LinkTable:
    'Replace following line with call to error logging function'
    MsgBox Err.Description
    Resume Exit_LinkTable
End Function

Private Function BuildConnectString(DbFormat As String, _
                                    ServerName As String, _
                                    DbName As String, _
                                    Optional SQLServerLogin As String = "", _
                                    Optional SQLServerPassword As String = "") As String
    Select Case DbFormat
    Case "NativeClient10"
        BuildConnectString = "ODBC;" & _
                             "Driver={SQL Server Native Client 10.0};" & _
                             "Server=" & ServerName & ";" & _
                             "Database=" & DbName & ";"
        If Len(SQLServerLogin) > 0 Then
            BuildConnectString = BuildConnectString & _
                                 "Uid=" & SQLServerLogin & ";" & _
                                 "Pwd=" & SQLServerPassword & ";"
        Else
            BuildConnectString = BuildConnectString & _
                                 "Trusted_Connection=Yes;"
        End If

    Case "ADO"
        If Len(ServerName) = 0 Then
            BuildConnectString = "Provider=Microsoft.Jet.OLEDB.4.0;" & _
                                 "Data Source=" & DbName & ";"
        Else
            BuildConnectString = "Provider=sqloledb;" & _
                                 "Server=" & ServerName & ";" & _
                                 "Database=" & DbName & ";"
            If Len(SQLServerLogin) > 0 Then
                BuildConnectString = BuildConnectString & _
                                     "UserID=" & SQLServerLogin & ";" & _
                                     "Password=" & SQLServerPassword & ";"
            Else
                BuildConnectString = BuildConnectString & _
                                     "Integrated Security=SSPI;"
            End If
        End If
    Case "ODBC"
        BuildConnectString = "ODBC;" & _
                             "Driver={SQL Server};" & _
                             "Server=" & ServerName & ";" & _
                             "Database=" & DbName & ";"
        If Len(SQLServerLogin) > 0 Then
            BuildConnectString = BuildConnectString & _
                                 "Uid=" & SQLServerLogin & ";" & _
                                 "Pwd=" & SQLServerPassword & ";"
        Else
            BuildConnectString = BuildConnectString & _
                                 "Trusted_Connection=Yes;"
        End If
    Case "MDB"
        BuildConnectString = ";Database=" & DbName
    End Select
End Function

Function Qt(Text As Variant) As String
Const QtMark As String = """"
    If IsNull(Text) Or IsEmpty(Text) Then
        Qt = "Null"
    Else
        Qt = QtMark & Replace(Text, QtMark, """""") & QtMark
    End If
End Function 
```

# android - 如何以编程方式在 android 中执行所有可能的 unix(shell) 命令？

> ID：10302433
> 
> 赞同：1
> 
> 时间：2012-04-24T16:53:48.943
> 
> 标签：android, shell, android-intent, android-ndk

我有这个 .php 文件向我的 android 应用程序发送命令：

![在此处输入图像描述](../Images/0ee627cf8c1b084783bd353af39b3985.png)

我尝试过使用：

```
Runtime.getRuntime().exec(commandLine);
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(process.getInputStream())); 
```

但是命令 echo、pwd 和其他一些命令不起作用。

我得到以下异常：

```
java.io.IOException: Error running exec(). Command: [pwd] Working Directory: null Environment: null 
```

据我了解，这是因为没有任何 shell 环境。

然后我尝试在 .sh 文件中写入我想要的命令，然后以这种方式执行命令：

```
Runtime rt = Runtime.getRuntime();
Process proc = rt.exec("sh /runCmds/shTest.sh");
InputStream is = proc.getInputStream(); 
```

并通过 pwd、echo 和大多数命令解决了问题。

但后来我意识到我想保持我执行的命令的状态。例如我想改变目录（`cd data`）并执行命令`mkdir Apoel`

这就是我面临问题的时候。该怎么办？

我想出了另一个主意：

制作一个 shell 脚本（.sh），每次用户想要执行命令时，都在其中添加新命令（并再次运行漏洞脚本（.sh））。但我认为这不是一个很好的方法！

有什么简单的方法吗？我的应用程序可以轻松打开终端吗？

这是我为终端仿真器找到的代码，但它太复杂了！

[https://github.com/jackpal/Android-Terminal-Emulator](https://github.com/jackpal/Android-Terminal-Emulator)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:54:15.417

交互式 shell 一直在运行，等待从 stdin 接收到的新命令，同时将其输出到 stdout 和 stderr - 因此，它的环境（包括任何更改）在会话期间保留。为了使 shell 对用户有用，stdin、stoud、stderr 需要通过控制台、串行线或 xterm 等连接到用户。

在 Android 上，通常您所做的是将与您创建的 shell 进程的 stdin、stdout、stderr 对应的管道挂钩，并使用它们来推送您的 java 程序提供的命令并接受您的程序的输出来解释/展示。

创建脚本并运行它的想法仅适用于在执行任何命令之前输入所有命令的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T06:28:21.270

首先，一些背景。在任何 Posix 系统上，在 shell 中，有两种类型的命令：

1.  内部命令 (pwd,cd,echo)
2.  外部命令（ls、cp、mv，有时还有 echo）

所有目录上下文命令（cd、pwd 等）都是在 shell 内实现的命令，因此如果要保留更改（例如，`cd /data/local/tmp`），则需要 shell 保持运行。

另一方面，外部命令是独立的，可以独立运行，但从它们的父进程（大多数情况下，shell）获取它们的目录上下文。

现在来解决问题。是的，使用脚本是个好主意，但实施起来很痛苦，因为它需要文件编辑的开销。但是，我们可以使用 shell 动态创建脚本并使用`-c`选项执行它。例如：

```
/system/bin/sh -c 'cd /data/local/tmp; touch abc; cp abc def; cd /; rm /data/local/tmp/abc' 
```

在夏天：

```
String sPrefix="/system/bin/sh -c 'cd someplace;";
String sInputCmd=getCommand(); // this is simulating your command input
String sPostfix="'";

Runtime rt = Runtime.getRuntime();
Process proc = rt.exec(sPrefix+sInputCmd+sPostfix); // sh -c 'cd someplace; echo do something'
InputStream is = proc.getInputStream(); 
```

然而，这并没有给我们设置目录上下文的能力，所以我们需要模拟它。可以使用 Runtime.exec(String command, String[] envp, File dir) 方法添加目录上下文。有了这个，我们就有可能在命令之间维护目录上下文。但我们实际上如何做到这一点？一种解决方案是附加`pwd`到命令并将输出的最后一行作为新的目录上下文。因此

```
String sPath = "/"; // start in root directory
String sPrefix = "/system/bin/sh -c 'cd someplace;";
String sInputCmd; // this is simulating your command input
String sPostfix = ";echo;pwd'";
Runtime rt = Runtime.getRuntime();
while(!(sInputCmd=getCommand()).equals("")) {
    File dir= new File(sPath);
    Process proc = rt.exec(sPrefix+sInputCmd+sPostfix, NULL, dir);
    InputStream is = proc.getInputStream();
    // Do processing on input.
    sPath= last_line_of_is ;
} 
```

最后，最后一个选项是将其中一个终端仿真器集成到您的应用程序中。

[1] [http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String,%20java.lang.String%5B%5D,%20java .io.文件%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String,%20java.lang.String%5B%5D,%20java.io.File%29)

# php - 删除特殊字符后的所有内容

> ID：10302438
> 
> 赞同：0
> 
> 时间：2012-04-24T16:54:17.383
> 
> 标签：php, regex

我是正则表达式的新手，我认为这是我最好的解决方案。在找到特殊字符后，我试图找到删除所有文本的方法。

目前我正在玩

```
preg_replace('/[^a-zA-Z0-9_ %\[\]\.\(\)%&-]/s', '', $word); 
```

但是您可能知道，这只会删除所有特殊章程，而不是找到第一个特殊字符后的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:59:52.847

如果要删除从不同于 的第一个字符开始的每个字符`a-zA-Z0-9_ %[].()%&-`，可以使用以下命令：

```
preg_replace('/[^a-zA-Z0-9_ %\[\]\.\(\)%&-].*/s', '', $word); 
```

相反，如果您想在`a-zA-Z0-9_ %[].()%&-`找到一个字符后删除所有内容，您可以使用以下命令：

```
preg_replace('/[a-zA-Z0-9_ %\[\]\.\(\)%&-].*/s', '', $word); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:00:03.750

你可以把它转过来使用[`preg_match`](http://www.php.net/manual/en/function.preg-match.php)：

```
preg_match('/^[a-zA-Z0-9_ %\[\]\.\(\)%&-]/s', $word, $matches); 
```

`$matches[0]`将包含您要查找的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:07:10.613

你可以简单地做

```
$word = "Overflow's";

preg_match('/[a-zA-Z0-9_]+/', $word, $matches);

print_r($matches); 
```

返回：

```
Array
(
    [0] => Overflow
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T17:10:40.217

You could find the index of the first occurrence of the special character with [preg_match()](http://www.php.net/manual/en/function.preg-match.php) and then use [substr()](http://de2.php.net/manual/en/function.substr.php).

# c# - Linq - SQL 将参数传递到 GroupBy()

> ID：10302439
> 
> 赞同：4
> 
> 时间：2012-04-24T16:54:20.037
> 
> 标签：c#, sql, linq

使用 linq 查询，如何将参数传递给 groupby 函数？取决于用户的选择，它将被不同地分组

```
 var query = (from to in OrderQuery
                     group to by to.FromDateUtc into groupedDate
                     let grouped = groupedDate.GroupBy(o => o.Name) 
```

我想传递不同的 groupby 值。任何想法？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:58:08.427

一般来说，您需要对此进行不同的查询。根据用户选择构建不同的`WHERE`or`Where(...)`子句也是如此：

```
var query = OrderQuery;
if (userSelection == "GroupByName") {
    query = from to in query
            group to by to.FromDateUtc into groupedDate
            let grouped = groupedDate.GroupBy(o => o.Name);
}
else if (userSelection == "GroupBySomethingElse") {
    query = from to in query
            group to by to.FromDateUtc into groupedDate
            let grouped = groupedDate.GroupBy(o => o.SomethingElse);
} 
```

在将分组应用于`query`. 因为 LINQ 使用延迟执行，您可以`query`在枚举结果之前根据需要进行尽可能多的修改，并且不会对性能造成影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:04:04.807

如果你正在尝试做这样的事情

```
SELECT * FROM <TableName> GROUP BY <Column1>,<Column2> 
```

然后看看这个帖子

[按多列分组](https://stackoverflow.com/questions/847066/group-by-multiple-columns)

# entity-framework - 从实体框架调用 DB2 存储过程

> ID：10302441
> 
> 赞同：2
> 
> 时间：2012-04-24T16:54:27.587
> 
> 标签：entity-framework, db2

我正在尝试从实体框架调用 DB2 存储过程。我创建了基于 SP 的 Store 架构和概念架构。我已将实体指定为返回类型，以从 SP 调用中获取数据。在设计时，我收到以下消息作为警告

警告 1 错误 2062：没有为 EntityContainer DB2Container12345 中的 EntitySet 和 AssociationSet 实例指定映射。

在运行时我收到以下错误..

运行时错误：指定的架构无效。错误：Data.DB2.msl(6,6)：错误 2062：没有为 EntityContainer DB2Container12345 中的 EntitySet 和 AssociationSet 实例指定映射。

任何帮助，将不胜感激。我几乎被这一点困住了......

谢谢，Ganesan Subbian

# jquery - 浏览器检测仅在移动设备上显示，在桌面上显示另一个代码

> ID：10302444
> 
> 赞同：-2
> 
> 时间：2012-04-24T16:54:50.027
> 
> 标签：jquery, html, browser-detection

我已经尝试了很多不同的方法来实现这一点。我拥有的是一个网站，我在页面顶部有一个流媒体广播播放器。通常我只有默认的给定脚本

```
<center> 
    <!--Wavestreaming.com SHOUTcast Flash Player-->
    <script type="text/javascript" src="http://player.wavestreamer.com/cgi-bin/swf.js?id=A7GCMO5PSJJE1EC9"></script>.        
    <script type="text/javascript" src="http://www.syracusehiphop.com/wp-content/uploads/2012/04/scriptfornoflashtext.js.txt"></script>                    
</center> 
```

当然，它在所有桌面浏览器上都可以正常工作，但是当有人来自 IPAD 或平板电脑时，我希望他们也能够收听。

所以我使用了一个简单的 HTML5 代码，但当然它只适用于移动浏览器，所以现在桌面浏览器不会播放它，除非我提供多种 MIME 类型，但我无法提供。

因此，我尝试了多个“ELSE IF”代码，但无法正确地得到它，我得到它以在移动或平板电脑浏览器上显示 HTML5，然后在桌面上将默认脚本和 HTML5 叠加在一起

这是我最近的尝试

```
<script type="text/javascript">
$(document).ready(function()
{
    if ( $.browser.msie )
    {
        <center> <!--Wavestreaming.com SHOUTcast Flash Player-->
            <script type="text/javascript" src="http://player.wavestreamer.com/cgi-bin/swf.js?id=A7GCMO5PSJJE1EC9"></script>.
            <script type="text/javascript" src="http://www.syracusehiphop.com/wp-content/uploads/2012/04/scriptfornoflashtext.js.txt"></script>
        </center> 
} 
else if ( $.browser.mozilla ) 
{
    <center>
        <!--Wavestreaming.com SHOUTcast Flash Player-->
        <script type="text/javascript" src="http://player.wavestreamer.com/cgi-bin/swf.js?id=A7GCMO5PSJJE1EC9"></script>.
        <script type="text/javascript" src="http://www.syracusehiphop.com/wp-content/uploads/2012/04/scriptfornoflashtext.js.txt"></script>
    </center>
} 
else if ( $.browser.webkit || $.browser.safari ) 
{
    <center>
        <!--Wavestreaming.com SHOUTcast Flash Player-->
        <script type="text/javascript" src="http://player.wavestreamer.com/cgi-bin/swf.js?id=A7GCMO5PSJJE1EC9"></script>.
        <script type="text/javascript" src="http://www.syracusehiphop.com/wp-content/uploads/2012/04/scriptfornoflashtext.js.txt"></script>
    </center>
} 
else if ( $.browser.opera ) 
{
    <center>
        <!--Wavestreaming.com SHOUTcast Flash Player-->
        <script type="text/javascript" src="http://player.wavestreamer.com/cgi-bin/swf.js?id=A7GCMO5PSJJE1EC9"></script>.
        <script type="text/javascript" src="http://www.syracusehiphop.com/wp-content/uploads/2012/04/scriptfornoflashtext.js.txt"></script>
    </center>
} 
else if ( $mobile_browser ) 
{
    <audio controls="controls">
        <source src="http://delicious.wavestreamer.com:3057/listen.pls" type="audio/mpeg" />
    </audio>
}) 
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:35:40.330

你不能像那样把 HTML 标记放在 javascript 中。

您最好的选择是首先检查移动浏览器，然后在这种情况下应用移动代码。如果您只是对所有桌面浏览器使用相同的代码，则无需检查每个单独的浏览器。

试试这个而不是 html 标记：

```
var script = document.createElement( 'script' );
script.type = 'text/javascript';
script.src = url;
$("#someElement").append( script ); 
```

（来自[不能附加 <script> 元素](https://stackoverflow.com/questions/610995/jquery-cant-append-script-element)）

我建议阅读 jQuery 和 javascript 的工作原理，以及它们如何与 DOM 交互。 [http://www.w3schools.com/js/js_intro.asp](http://www.w3schools.com/js/js_intro.asp)是一个很好的起点。

# android - android - 来自 ArrayAdapter 的 startActivityForResult

> ID：10302449
> 
> 赞同：0
> 
> 时间：2012-04-24T16:55:03.140
> 
> 标签：android, android-arrayadapter

你能帮我吗，如果有什么办法，如何从类扩展 ArrayAdapter 调用方法 startActivityForResult(..)？

谢谢。

编辑：ARRAYADAPTER 的添加代码：

有 MyAdapter 类的代码：

`public class MyAdapter extends ArrayAdapter {`

 ````
public static final String bundle_text = "some_text";

public MyAdapter(Context context, int textViewResourceId, List<MyAdapterItem> data) {
    super(context, textViewResourceId, data);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;

    // ...

    row.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Intent intent = new Intent(getContext(), MyNewActivity.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

            int id = 1;

            Bundle bundle = new Bundle();
            bundle.putLong(MyAdapter.bundle_text, id);

            intent.putExtras(bundle);
            getContext().startActivity(intent);
        }
    });

    return super.getView(position, convertView, parent);
} 
```` 

`}`

一切正常，但无法从 ArrayAdapter 类调用 startActivityForResult，我只能调用 startActivty。但是在MyNewActivity完成后，我想刷新listview，但是当我无法调用startActivityForResult时，我不知道怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-06T02:12:00.893

这是一个常见的误解（就像旧线程一样，我只会给出一个大纲）

1.  适配器仅用于列出视图的数据 - 它确实返回一个视图，就像您的 getView 中的一行一样，但并不真正处理任何 GUI 事件 - 这些是在活动中完成的。事实上，如果适配器从 Internet 或数据库加载大量行，它应该在 UI 线程之外完成。

2.  活动是为了事件。您将单击侦听器附加到活动中的列表视图。那么调用例如细节编辑活动就没有问题了 - 它都在 UI 线程上。所以从 UI 线程启动一个活动没有问题。

3.  更新适配器的问题！如果您从详细活动返回，您会发现列表未更新，因为适配器未更新。为此，请启动 RESULT 的详细活动。不要用任何适配器的东西把细节“表格”弄得乱七八糟。实际上，您可以选择将创建或编辑的 POJO 详细记录返回，而完全不理会数据库。

4.  现在在您的活动中，您侦听 onActivityResult() 并插入适配器（如果您在应用程序中有 SQLite，则插入数据库后端），然后通知列表视图的数据已更改。它将自动更新列表视图。

如果重新加载列表视图，性能可能会成为问题。在大多数情况下，您可以通过添加到适配器并简单地通知列表视图数据已更改来摆脱困境。由于数据显示是“增量”的，您可能已经编辑了显示的第 1 - 5 行的第 3 行。那么列表视图只会刷新那 1-5 行的显示位置。但是，如果您在仅更改 1 行时重新加载说 500 行，您可能会遇到性能问题:)

# scala - 从 sbt 中调用我的测试时排除 ScalaTest 测试

> ID：10302458
> 
> 赞同：9
> 
> 时间：2012-04-24T16:55:42.210
> 
> 标签：scala, sbt, scalatest

我想编写一个调用远程服务器并验证响应的测试，因为服务器可能会发生变化（它不在我的控制之下）。为此，我想我[会给它一个标签](http://www.scalatest.org/user_guide/tagging_your_tests)( `RemoteTest`)，然后[在调用 runner 时将其排除](http://www.scalatest.org/user_guide/using_the_runner#filtering)：

```
sbt> test-only * -- -l RemoteTest 
```

但是，在执行此操作时，我的所有测试都会运行，包括`RemoteTest`. 如何从 sbt 中调用 runner 以将其排除在外？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T06:24:06.280

如果您有以下情况：-

```
package com.test

import org.scalatest.FlatSpec
import org.scalatest.Tag

object SlowTest extends Tag("com.mycompany.tags.SlowTest")
object DbTest extends Tag("com.mycompany.tags.DbTest")

class TestSuite extends FlatSpec {

  "The Scala language" must "add correctly" taggedAs(SlowTest) in {
      val sum = 1 + 1
      assert(sum === 2)
    }

  it must "subtract correctly" taggedAs(SlowTest, DbTest) in {
    val diff = 4 - 1
    assert(diff === 3)
  }
} 
```

要排除 DbTest 标记，您将执行以下操作：-

```
test-only * -- -l com.mycompany.tags.DbTest 
```

请注意，您需要包含完整的标签名称。如果它仍然对您不起作用，您介意分享部分不起作用的源代码吗？

# c++ - 在 C++ 中使用 Windows 7 API 获取运行的进程

> ID：10302459
> 
> 赞同：0
> 
> 时间：2012-04-24T16:55:50.020
> 
> 标签：c++, api

我正在尝试编写一个程序，我必须知道运行了哪些进程。
那我怎么知道最近运行了哪些进程呢？

我在 Windows 7 和 Visual c++ 中编写程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:59:41.047

您可以使用具有[enumProcesses函数的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682629%28v=vs.85%29.aspx)[PSAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681920%28v=vs.85%29.aspx) ，甚至提供如何枚举所有进程的[示例。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682623%28v=vs.85%29.aspx)

# sql - n 到 n 关系如何在一行中获得结果

> ID：10302460
> 
> 赞同：0
> 
> 时间：2012-04-24T16:55:51.097
> 
> 标签：sql, sql-server-2008, tsql

所以我有一个可以在很多公司工作的员工，所以我有一个`n to n`关系，我怎样才能获得一个员工工作的公司，只用 sql 一行？

```
example
table - employee
Employeeid  employeename
1             mike

table company
companyId  CompanyName
1           cocacola
2             nokia
3              intel

table employeeCompany
id   employeeid  companyid
1       1            1
2       1            2
3       1            3 
```

我想这个但不能

```
select Employeeid  , companyid 
from employeeCompany 
where employeeid  = 1 
group by Employeeid  , companyid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:55:05.257

在 Sql Server 中执行此操作的最简单方法是使用[FOR XML](http://msdn.microsoft.com/en-us/library/ms178107%28v=sql.100%29.aspx) PATH。神秘的部分`.value('text()[1]','nvarchar(max)')`处理特殊的 xml 字符。

```
select employee.*, companies.*
from Employee
OUTER APPLY
(
    select stuff ((SELECT ', ' + Company.CompanyName
      FROM EmployeeCompany
        INNER JOIN Company
           ON EmployeeCompany.CompanyId = Company.CompanyID
      WHERE EmployeeCompany.employeeid = Employee.EmployeeID
      ORDER BY Company.CompanyName
      FOR XML PATH(''),TYPE).value('text()[1]','nvarchar(max)')
    , 1, 2, '') Companies
) companies 
```

[请参阅Sql Fiddle](http://sqlfiddle.com/#!3/fb568/5)的演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:15:55.040

[听起来您想要类似于`Group_Concat`SQL Server](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-ms-sql-server-2005)中的 mySQL 的东西？

如果您正在寻找一种方法来执行此操作，以便每个 companyid 位于单独的列中，那么使用动态 SQL 可能会遇到一些困难。在什么时候将它返回给应用程序并让它在自己的逻辑中处理它需要的东西可能会更容易？

顺便说一句，动态 SQL 逻辑会像这样，以防您想知道...注意它有多讨厌...这就是为什么我建议反对它。

```
select @highestCount = max(count(*))
from employeeCompany
group by Employeeid

declare createtemptable varchar(max), @filltableselect varchar(max), @filltablejoin varchar(max)
declare @currentCount int
set @currentCount = 0
set @createtemptable = 'CREATE TABLE #Temp (EmployeeID INT'
set @filltableselect = 'INSERT INTO #Temp SELECT EmployeeCompany0.EmployeeID, EmployeeCompany0.CompanyID'
set @filltablejoin = 'FROM EmployeeCompany AS EmployeeCompany0'

while(@currentCount < @highestCount)
begin
    set @createtemptable = @createtemptable + ', CompanyID' 
        + CAST(@currentCount AS VARCHAR(2)) + ' INT'

    if(@currentCount > 0)
    begin
        set @filltableselect = @filltableselect + ', EmployeeCompany' 
            + CAST(@currentCount AS VARCHAR(2)) + '.CompanyId'

        set @filltablejoin = @filltablejoin 
            + 'LEFT JOIN EmployeeCompany AS EmployeeCompany' 
            + CAST(@currentCount AS VARCHAR(2)) 
            + ' ON EmployeeCompany0.EmployeeID = EmployeeCompany' 
            + CAST(@currentCount AS VARCHAR(2)) + '.EmployeeID'
    end

    set @currentCount = @currentCount + 1
end
set @createtemptable = @createtemptable + ')'
--This next line can be whatever you need it to be
set @filltablejoin = @filltablejoin + 'WHERE employeeCompany0.EmployeeID = 1'

exec @createtemptable 
exec @filltableselect + @filltablejoin 
```

# graphics - 2D多边形的阴影边框不同

> ID：10302465
> 
> 赞同：1
> 
> 时间：2012-04-24T16:56:15.017
> 
> 标签：graphics, xna, drawing, shader

我们正在 XNA 中编写一个 2D 游戏。现在我们有了定义关卡元素的多边形。它们被三角化，以便我们可以轻松地渲染它们。现在我想编写一个着色器，将多边形渲染为轮廓纹理。所以在多边形的中间会看到纹理，在边界上它应该会发光。

我的第一个想法是沿着多边形走，并在每个线段上绘制一个具有特定纹理的四边形。这有效，但对于纹理被迫重叠的小角落看起来很奇怪。

我的第二种方法是用某种法线指向多边形外标记所有边界顶点。将其传递给着色器将在三角剖分的边缘内插法线，我可以使用内插的“法线”作为着色的值。我还不能测试它，但那行得通吗？三角剖分的一个特殊属性是所有顶点都在边界上，因此多边形内没有顶点。

你们对我想要实现的目标有更好的想法吗？

这里是四边形解决方案现在的样子：

![轮廓多边形](../Images/1a8dee287fb41d549d4b1e2ae9485042.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:08:30.050

1.  你可以渲染你的对象两次。第一个后面有一个更大的拉伸版本。不是很理想，因为一个复杂的对象不能被均匀地拉伸以创建一个边框。

2.  如果您可以访问屏幕缓冲区，则可以将发光组件渲染到渲染目标中，并将全屏四边形与视口对齐，并向其添加全屏 2D 剪影过滤器。

    通过这种方式，您可以通过定义其半径、颜色、模糊来完美控制边缘。使用额外的输出值，例如来自对象渲染通道的 RGB 值，您甚至可以拥有不同的高级发光。

    我认为 rendermonkey 在他们的着色器编辑器中有一些例子。它绝对是一个很好的开始工作和尝试的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:59:53.587

建议您要计算新的边界顶点列表（使用带原件的三角形带的简单填充示例）。如果您使用恒定的边框宽度和凸多边形，它只是：

B_new = B - (BtoA.normalised() + BtoC.normalised()).normalised() * 宽度；

![在此处输入图像描述](../Images/8b1ed091731fd1c1e28a1f10245e5dbe.png)

如果不是，那么它会变得更复杂，这是我的旧但非常通用的解决方案：

 `//Helper function. To working right, need that v1 is before v2 in vetex list and vertexes are going to (anti???) cloclwise! float vectorAngle(Vector2 v1, Vector2 v2){`

 ````
 float alfa;

    if (!v1.isNormalised())
        v1.normalise();
    if (!v2.isNormalised())
        v2.normalise();

    alfa = v1.dotProduct(v2);

    float help = v1.x;
    v1.x = v1.y;
    v1.y = -help;

    float angle = Math::ACos(alfa);

    if (v1.dotProduct(v2) < 0){
        angle = -angle;
    }

    return angle;
}

//Normally dont use directly this!
Vector2 calculateBorderPoint(Vector2 vec1, Vector2 vec2, float width1, float width2){

    vec1.normalise();
    vec2.normalise();

    float cos = vec1.dotProduct(vec2);            //Calculates actually cosini of two (normalised) vectors (remember math lessons)
    float csc = 1.0f / Math::sqrt(1.0f-cos*cos);  //Calculates cosecant of angle, This return NaN if angle is 180!!!

    //And rest of the magic
    Vector2 difrence = (vec1 * csc * width2) + (vec2 * csc * width1);

    //If you use just convex polygons (all angles < 180, = 180 not allowed in this case) just return value, and if not you need some more magic. 
    //Both of next things need ordered vertex lists!

    //Output vector is always to in side of angle, so if this angle is.
    if (Math::vectorAngle(vec1, vec2) > 180.0f) //Note that this kind of function can know is your function can know that angle is over 180 ONLY if you use ordered vertexes (all vertexes goes always (anti???) cloclwise!)
        difrence = -difrence;

    //Ok and if angle was 180...
    //Note that this can fix your situation ONLY if you use ordered vertexes (all vertexes goes always (anti???) cloclwise!)
    if (difrence.isNaN()){
        float width = (width1 + width2) / 2.0;   //If angle is 180 and border widths are difrent, you cannot get perfect answer ;)

        difrence = vec1 * width;

        //Just turn vector -90 degrees
        float swapHelp = difrence.y
        difrence.y = -difrence.x;
        difrence.x = swapHelp;
    }

    //If you don't want output to be inside of old polygon but outside, just: "return -difrence;"
    return difrence;

}

//Use this =)
Vector2 calculateBorderPoint(Vector2 A, Vector2 B, Vector2 C, float widthA, float widthB){
    return B + calculateBorderPoint(A-B, C-B, widthA, widthB);
} 
````  `* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:24:39.683

你的第二种方法是可能的......

用 1 标记外部顶点（在边界中），用 0 标记内部顶点（内部）。

在像素着色器中你可以选择高亮，那些它的值大于 0.9f 或 0.8f 的。

它应该工作。`

# android - 如何杀死在新活动中运行的线程

> ID：10302466
> 
> 赞同：0
> 
> 时间：2012-04-24T16:56:16.040
> 
> 标签：android, multithreading

所以活动开始了，我创建了一个线程来检查何时进入下一个活动。但有时我需要这种活动来杀死自己。onPause 会这样做，但在那之后 Thread 仍然活着，并且在时间用完后它会开始一个新的活动。是否有可能杀死这个线程并停止 goToFinals 意图？

```
 public class Questions extends Activity {

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        String in = getIntent().getStringExtra("time");         
        long tmp = Long.parseLong(in);
        endTime = (long) System.currentTimeMillis() + tmp;

        Thread progress = new Thread(new Runnable() {

            public void run() {
                while(endTime > System.currentTimeMillis()) {
                    try {
                        Thread.sleep(200);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
                Intent goToFinals = new Intent(Questions.this,End.class);
                        startActivity(goToFinals);
            }

        });
        progress.start();

    }

    @Override
    protected void onPause() {
        super.onPause();
        finish();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:58:50.773

有几种方法可以停止线程。如果你存储你的`Thread`对象，那么你可以调用`interrupt()`它：

```
 progress.interrupt(); 
```

这将导致`sleep()`抛出一个`InterruptedException`你应该返回的，而不仅仅是打印堆栈跟踪。您还应该执行以下循环：

```
 while(endTime > System.currentTimeMillis()
     && !Thread.currentThread().isInterrupted()) { 
```

您还可以设置某种关闭标志：

```
// it must be volatile if used in multiple threads
private volatile boolean shutdown;

// in your thread loop you do:
while (!shutdown && endTime > System.currentTimeMillis()) {
    ...
}

// when you want the thread to stop:
shutdown = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:59:12.577

为了安全地退出线程，您必须首先调用 thread_instance.interrupt() 然后您可以检查它是否被中断。参考这个[链接](http://developer.android.com/reference/java/lang/Thread.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:00:54.357

看到[这个](https://stackoverflow.com/questions/671049/how-do-you-kill-a-thread-in-java)帖子杀死java线程。他们推荐的方式是使用共享变量作为要求后台线程停止的标志。然后可以由请求线程终止的不同对象设置此变量。

# perl - Perl substr 基于字节

> ID：10302468
> 
> 赞同：4
> 
> 时间：2012-04-24T16:56:18.153
> 
> 标签：perl, utf-8, amazon-simpledb

我正在为我的应用程序使用 SimpleDB。除非一个属性的限制是 1024 字节，否则一切顺利。因此，对于长字符串，我必须将字符串切成块并保存。

我的问题是，有时我的字符串包含 unicode 字符（中文、日文、希腊文），并且该`substr()`函数基于字符数而不是字节。

我尝试使用`use bytes`字节语义或更高版本 `substr(encode_utf8($str), $start, $length)`，但它根本没有帮助。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T17:42:52.353

UTF-8 的设计使字符边界易于检测。要将字符串拆分为有效的 UTF-8 块，您可以简单地使用以下命令：

```
my $utf8 = encode_utf8($text);
my @utf8_chunks = $utf8 =~ /\G(.{1,1024})(?![\x80-\xBF])/sg; 
```

然后要么

```
# The saving code expects bytes.
store($_) for @utf8_chunks; 
```

或者

```
# The saving code expects decoded text.
store(decode_utf8($_)) for @utf8_chunks; 
```

示范：

```
$ perl -e'
    use Encode qw( encode_utf8 );

    # This character encodes to three bytes using UTF-8.
    my $text = "\N{U+2660}" x 342;

    my $utf8 = encode_utf8($text);
    my @utf8_chunks = $utf8 =~ /\G(.{1,1024})(?![\x80-\xBF])/sg;

    CORE::say(length($_)) for @utf8_chunks;
'
1023
3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T17:24:31.830

`substr`除非字符串具有 UTF-8 标志，否则对 1 字节字符进行操作。因此，这将为您提供解码字符串的前 1024 个字节：

`substr encode_utf8($str), 0, 1024;`

虽然，不一定在*字符边界*上拆分字符串。要在最后丢弃任何拆分字符，您可以使用：

```
$str = decode_utf8($str, Encode::FB_QUIET); 
```

# actionscript-3 - AS3 - 如果符号的坐标到达这里？

> ID：10302469
> 
> 赞同：0
> 
> 时间：2012-04-24T16:56:22.453
> 
> 标签：actionscript-3, flash, coordinates, flash-cs5

我正在使用 Flash Professional CS5.5，我需要制作一个应用程序，其中有一个使用加速度计移动的球（符号），我想要这样，当球坐标 A 达到这个坐标 B 时，它会转到第 2 帧（gotoAndPlay (2))。我必须先找到球坐标，对吧？我怎么做这个？

这是我现在的代码

```
c_ball.addEventListener(MouseEvent.MOUSE_DOWN, fl_ClickToDrag);
function fl_ClickToDrag(event:MouseEvent):void{
c_ball.startDrag();}
stage.addEventListener(MouseEvent.MOUSE_UP, fl_ReleaseToDrop);
function fl_ReleaseToDrop(event:MouseEvent):void{
c_ball.stopDrag();} 
```

如果在检索坐标后会起作用吗？

```
function f_level (e) if (c_ball.x==100 && c_ball.y==100) {
gotoAndStop(2);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:58:43.657

一种简单且节省的方法是使用碰撞检测，而不是只测试一个位置（用户难以满足的位置），而是去一个目标区域：

```
package
{
import flash.display.Sprite;
import flash.events.Event;
import flash.events.MouseEvent;

public class Hittester extends Sprite
{

    var ball:Sprite = new Sprite();
    var testarea:Sprite = new Sprite();

    public function Hittester()
    {
        super();
        ball.graphics.beginFill(0xff0000);
        ball.graphics.drawCircle(0,0,10);

        testarea.graphics.beginFill(0x00ff00);
        testarea.graphics.drawRect(0,0,50,50);
        testarea.x = 100;
        testarea.y = 100;

        // if testarea should be invisble
        /*testarea.alpha = 0;
        testarea.mouseEnabled = false;
        */

        ball.addEventListener(MouseEvent.MOUSE_DOWN, startDragging);

        addChild(testarea);
        addChild(ball);
    }
    private function startDragging( E:Event  = null):void{
        ball.startDrag();
        stage.addEventListener(MouseEvent.MOUSE_UP, stopDragging);
    }
    private function stopDragging( E:Event  = null):void{
        stage.removeEventListener(MouseEvent.MOUSE_UP, stopDragging);       
        ball.stopDrag();

        test();
    }
    private function test():void{
        if( ! ball.hitTestObject(testarea) ){
            ball.x = 10;
            ball.y = 10;
        }
        else{
            // here goes next frame command ;)
        }
    }   
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:42:18.283

如果您正在寻找加速度计数据，则不需要 MOUSE_UP 和 MOUSE_DOWN。您需要 Accelerometer 类和相关事件。

尝试这样的事情：

```
import flash.sensors.Accelerometer;
import flash.events.AccelerometerEvent;

var accel:Accelerometer = new Accelerometer();

accel.addEventListener(AccelerometerEvent.UPDATE, handleAccelUpdate); 
```

更新处理程序：

```
function handleAccelUpdate(e:AccelerometerEvent):void{
   //inside this function you now have access to acceleration x/y/z data
   trace("x: " + e.accelerationX);
   trace("y: " + e.accelerationY);
   trace("z: " + e.accelerationZ);
   //using this you can move your MC in the correct direction
   c_ball.x -= (e.accelerationX * 10); //using 10 as a speed multiplier, play around with this number for different rates of speed 
   c_ball.y += (e.accelerationY * 10); //same idea here but note the += instead of -=

   //you can now check the x/y of your c_ball mc
   if(c_ball.x == 100 && c_ball.y == 100){
         trace("you win!"); //fires when c_ball is at 100, 100
   }
} 
```

现在这将让您“滚动”您的 MC 离开屏幕，因此您可能想要添加某种边界检查。

查看这篇精彩的文章以获取更多信息：

[http://www.republicofcode.com/tutorials/flash/as3accelerometer/](http://www.republicofcode.com/tutorials/flash/as3accelerometer/)

# ajax - 列表项的页面加载时的 AJAX 调用

> ID：10302472
> 
> 赞同：0
> 
> 时间：2012-04-24T16:56:33.623
> 
> 标签：ajax, list, jquery-mobile, pageload

目前，我在 JQuery Mobile 环境中有一个项目列表 ( `<ul><li>item</li>...</ul>`)。现在我想显示列表中每个项目的附加信息，因为所需的信息可能需要一些时间才能获取，我正在寻找一种方法，当页面加载时，每个项目都会发送 AJAX 请求，同时这样做微调器显示为占位符。当显示 AJAX 调用的结果时，图标应该代替微调器

关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:13:38.863

在您的列表中，您可以添加`data-attributes`到列表项以存储 ID 或用于识别您将为特定列表项获取的数据的任何内容：

```
<ul data-role="listview" id="my-listview">
    <li data-id="3348"><img src="/css/images/loading.gif" /></li>
</ul> 
```

请注意，如果您使用 jQuery Mobile 加载微调器的 GIF 版本，它会自行生成动画。

然后您可以使用每个 AJAX 请求的回调函数将数据添加到每个列表项：

```
//cache all list-items
var $listItems = $('#my-listview').children();

//loop through each list-item
$.each($listItems, function (index, element) {

    //cache this specific list-item for later use (in the callback)
    var $listItem = $listItems.eq(index);
    $.ajax({
        url     : 'some-script.php',
        data    : { id : $(this).attr('data-id') },
        type    : 'post',
        success : function (response) {

            //if the server returns valid HTML, we can just append it to the list-item
            $listItem.find('img').replaceWith(response);
        },
        error   : function (jqXHR, textStatus, errorThrown) {
            /*Don't forget to handle errors*/
            $listItem.find('img').replaceWith('<span>An error occured, please try again later.</span>');
        }
    });
}); 
```

# image - 使用 Photoshop 或 Web 浏览器在同一图像上使用不同的颜色

> ID：10302473
> 
> 赞同：-1
> 
> 时间：2012-04-24T16:56:35.993
> 
> 标签：image, colors, photoshop, rgb, srgb

我的一个客户是一位画家，他意识到使用 Web 浏览器 (Internet Explorer 8) 通过网站查看的图像与 Photoshop 上的相同图像之间存在色差。

他想在 Photoshop 或**任何**网络浏览器上获得完全相同的颜色。

图像正常保存（“另存为”而不是“保存为网络”）。（在他注意到这样做有一点改进之后）

为什么是这样？是否可以在两个应用程序上看到完全相同的颜色？可能是因为两个应用程序上的“颜色配置文件”吗？（他目前在 Photoshop 上使用 sRGB IEC61966-2.1）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:02:51.583

有一个概念被称为“网络安全颜色”。这是一系列颜色，以及浏览器实现它们的方式，试图使颜色在尽可能多的不同显示器上保持一致。不幸的是，要让您的图像在网络浏览器中看起来像在 Photoshop 中一样好，可能根本不可能。Photoshop 是一种旨在使图像看起来尽可能棒的工具，而 Web 浏览器则不然。Save for web 将尝试使图像与网络安全颜色兼容。

# php - 使用 php 将 android 连接到 mysql 数据库：多用户支持？

> ID：10302475
> 
> 赞同：1
> 
> 时间：2012-04-24T16:56:45.530
> 
> 标签：php, android, mysql

我正在尝试开发一个android应用程序。在应用程序中，用户可以从服务器端的数据库中搜索一些数据。为此，我使用服务器端的 php 脚本和 mysql 数据库。我从 android 应用程序给它一个调用，并且 php 代码与数据库连接并返回一个 json 结果，我对其进行解码并根据需要使用它。

我的问题是这个。这可以同时支持多个用户吗？例如 2 个不同的用户同时使用搜索功能从数据库中检索数据。我知道数据库本身可以处理这种请求，但是php服务呢？

下面是一个php代码示例：

```
<?php
     mysql_connect("host","username","password");
     mysql_select_db("Deal");
     $sql=mysql_query("select * from CITY where CITY_NAME like 'A%'");

     while($row=mysql_fetch_assoc($sql))
       $output[]=$row;

     print(json_encode($output));
     mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:00:35.997

Web 服务器环境正在启动 PHP 脚本。很难想象目前存在不支持多线程的网络服务器。所以，别担心。答案是肯定的。

# android - 从 getContext() 或从构造函数获取上下文作为字段

> ID：10302477
> 
> 赞同：2
> 
> 时间：2012-04-24T16:56:57.210
> 
> 标签：android, android-custom-view, android-context

让我们以自定义或扩展视图为例。

`Context`将构造函数的参数保存为字段是否比到处调用更有效`getContext()`（假设有 10 个或更多需要它的地方）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:03:20.080

与其在每个地方都使用 getContext() ，不如在你想使用的构造函数中将当前上下文作为参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:27:07.480

从源代码来看，View 的构造函数存储了上下文参数，这就是 getContext() 返回的内容：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/view/View.java#View.getContext%28%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/view/View.java#View.getContext%28%29)

所以，我的直觉是自己存储参数是多余的，因为超类已经为你做了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T17:28:13.880

`View#getContext()`是

```
class View {
    protected Context mContext;
    public final Context getContext() {
        return mContext;
    }
} 
```

和本地缓存的实现：

```
class X {
    private final Context mLocalContext;
    public X(Context ctx) {
        mLocalContext = ctx;
    }
} 
```

现在，当您使用`mLocalContext`而不是`getContext()`. JVM 无需执行该方法即可获得所需的上下文对象引用（这需要一点额外的时间）。该调用无法优化，因为`View#mContext`它是可变的（可以更改）。在本地示例中，它可以假设`mLocalContext`不能更好地更改和优化代码。[注意：我不是 100% 确定可以进行哪些优化]

如果您经常使用上下文，则差异可能是可测量的，但在这种情况下，这并不重要。如果您经常需要对象，在本地缓存它们仍然是一个好主意。特别是当他们的（重新）建设需要时间时（例如，什么时候`getContext()`会创建一个`new Context()`左右）。

# visual-c++ - GCC vs MSVC 类打包和对齐

> ID：10302480
> 
> 赞同：2
> 
> 时间：2012-04-24T16:57:10.333
> 
> 标签：visual-c++, gcc, compiler-construction, alignment

与 gcc 中的等效项相比，是否有一种方法可以使用编译器标志在 msvc 下创建相同的基类和派生类的内存布局？我使用 VS2010 并将其与 GCC 4.1.1 进行比较

所以

```
#if define _MSVC
// window 
DALIGN(A,B) __declspec(align(A)) B
#else
// GCC
DALIGN(A,B) B __attribute__((aligned(A)))
#endif
class A
{ 
  DALIGN(CVector V,16);
  int a;
}
class B : public A
{
  int b;
} 
```

A 是 16 字节对齐的，使其为 0x20(32) B 也是 16 字节对齐的，但在 GCC 上也是 0x20(32)，但在 msvc 上是 0x30(48)

有没有办法强制 msvc 像 GCC 一样打包数据？

这样做的原因：我创建数据并将其直接加载到不同平台上的类中。如果我可以在两个平台上使用完全相同的数据布局，那就太好了。（是的，两个平台上的字节序相同）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:21:03.787

在类 A 和类 B 周围添加 #pragma pack(push, 4) / #pragma pack(pop) 成功地正确对齐数据，因为 GCC 对齐它。

请注意，如果继承被扩展，似乎任何需要的对齐类和通过继承转发都需要打包。示例类 A、B、C、D、E、F C 具有对齐的成员 C、D、E、F 都需要它们周围的包。

# iphone - 我在哪里可以找到解析任何 XML 文件而不知道任何标记或属性的 Objective C 代码？

> ID：10302482
> 
> 赞同：-1
> 
> 时间：2012-04-24T16:57:18.053
> 
> 标签：iphone, objective-c, xcode, cocoa

我想找到一个用 Objective C for iPhone 编写的代码示例，它可以解析任何 XML 文件，即使我们不知道标签或属性。有没有人有这样的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:26:01.663

可能您可以将 XML 转换为 NSDictionary，然后您可以轻松使用它。我没有使用此代码，但也许您可以尝试将您的 xml 转换为字典 [http://troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/](http://troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/)

# javascript - Asp.Net MVC 3 formcollection 提交后丢失数据

> ID：10302484
> 
> 赞同：2
> 
> 时间：2012-04-24T16:57:21.023
> 
> 标签：javascript, asp.net, json, asp.net-mvc-3, formcollection

我有一个 Asp.Net MVC 3 应用程序，单击提交按钮后，我想验证 formcollection 参数中传递的信息.. 如果它无效，我返回一个 jSon.. 但之后我的 formcollection 总是返回 null

这发生在 chrome 和 FFox 中。在 IE 中它工作正常

我的观点：

```
<li id="opc-register" class="section allow">
    <div id="checkout-step-register" class="step a-item" style="display: none;">
        <form id="co-register-form" action="">
        <div id="checkout-register-load">
            @Html.Action("OpcRegisterForm", "Checkout")
        </div>
        </form>
        <script type="text/javascript">
            Register.init('#co-register-form', '@(storeLocation)checkout/OpcSaveRegister/'); 
        </script>
        <div class="buttons" id="register-buttons-container">                           
            <button type="button" class="paymentmethodnextstepbutton" onclick="Register.save()">
                <span>@T("Common.Continue")</span>

            </button>

            <span class="please-wait" id="register-please-wait" style="display: none;">
                <img src="@Url.Content("~/Content/Images/ajax_loader_small.gif")"
    alt="@T("Common.LoadingNextStep")" title="@T("Common.LoadingNextStep")" />
                @T("Common.LoadingNextStep")</span>
        </div>
    </div>
</li> 
```

我的控制器

```
[HttpPost]
public ActionResult OpcSaveRegister(FormCollection form)
{

    var registerModel = PrepareRegisterModel();

    registerModel.Email = form["Email"];
    registerModel.FirstName = form["FirstName"];
    ...

    if (TryValidateModel(registerModel))
    {
       ....
    }

    //If we got this far, something failed, redisplay form
    return Json(new
    {
        update_section = new UpdateSectionJsonModel()
        {
            name = "register",
            html = RenderPartialViewToString("OpcRegister", registerModel)
        },
        goto_section = "register"
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:47:27.123

不要在带有 MVC 的帖子上使用 FormCollection。使用强类型 ViewModel，它包含可以在表单中提交的所有属性。

例如，您可以有一个像这样的类：

```
public class RegisterViewModel
{
    public string FirstName { get; set; }
    public string Email { get; set; }
    //...
} 
```

在您看来，您可以使用以下方式设置这些属性：

```
@Html.EditorFor(m => m.FirstName)
@Html.EditorFor(m => m.Email) 
```

然后对于你的 Action 你会有

```
[HttpPost]
public ActionResult OpcSaveRegister(RegisterViewModel registerModel)
{
    //...
} 
```

# android - Android上通信应用程序之间的身份验证

> ID：10302487
> 
> 赞同：0
> 
> 时间：2012-04-24T16:57:35.280
> 
> 标签：android, authentication, ipc

我想编写一个 Android 应用程序（我们称之为“ZX”），它可以与预先未知的其他应用程序进行通信。

ZX 不想与所有其他应用程序通信。它只想通过 ZX 权限与用户批准的应用程序进行通信。用户可以通过 ZX 的一项活动随时授予和撤销 ZX 权限。

为了做到这一点，ZX 需要确定哪个应用程序正在尝试与它通信，并且在应用程序第一次与 ZX 连接的情况下，它需要显示其名称（或其他唯一标识它的名称）到用户询问它是否应该允许它。

**问题：**

**1）如何识别调用应用程序？**

**2）为此推荐什么IPC机制？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-02T21:23:12.150

“使用 Binder 或 Messenger 是 Android 中 RPC 式 IPC 的首选机制。如果需要，它们提供了一个定义良好的接口，可以实现端点的相互身份验证。”

[http://developer.android.com/training/articles/security-tips.html#IPC](http://developer.android.com/training/articles/security-tips.html#IPC)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:06:34.320

很难对这个问题给出一个很好的答案，因为你对细节非常神秘......但是，我会尝试一下......

根据“ZX”的作用，像[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)这样的东西可能适用于此。如果应用程序想与 ZX 通信，它们会向 ZX 发送一条消息，将自己添加到 ZX 维护的查找表/列表中。

基本上你会有这样的东西......

应用程序`AI`希望与 ZX 通信。它发送`ZX`一条包含有关应用程序信息的消息（无论您需要什么，IP 地址等）。该信息可以转到一个函数，例如创建一个存储有关应用程序的所有相关信息`addApplication()`的新对象。`CommApp`

`ZX`然后可以发送`AI`一个唯一的身份验证密钥，它可以用于进一步的通信。这可以处理实际的会话。两个应用程序之间的任何进一步通信都可以使用唯一密钥进行身份验证。这种方法假设您使用身份验证来识别不同的应用程序，而不是试图将“坏人”拒之门外。

如果您可以扩展您的实际情况，我很乐意编辑我的问题以更适合您的需求。

# java - 蚂蚁脚本：有 标记转储整个命令行

> ID：10302489
> 
> 赞同：16
> 
> 时间：2012-04-24T16:57:46.960
> 
> 标签：java, eclipse, ant

我有一个 ant 构建脚本，其中包含一个相当复杂的`<exec>`命令，其中包含许多`<arg>`我正在尝试排除故障的标签。我想知道是否可以在 ant 构建之后查看整个命令行；要么在 Eclipse 调试器中，要么将其转储到文件中。

这是我正在处理的问题：

```
<exec executable='"@{sdk}/bin/mxmlc.exe"' failonerror="true" >
                <arg line='-load-config "@{sdk}/frameworks/flex-config.xml"'/>

                <!-- Flex Build Path -->
                <!-- Source path -->
                <!-- Main source folder: -->
                <arg line='-compiler.source-path "@{project-dir}/src"'/>
                <!-- Additional source folders outside of the main source folder: -->
                <arg line='-compiler.source-path "@{project-dir}/inc/swf"'/>
                <arg line='-compiler.source-path "@{project-dir}/inc/images"'/>

                <!-- Output folder: -->
                <arg line='-output "@{output}"'/>

                <!-- Library path -->
                <!-- Build path libraries: -->
                <arg line='-compiler.library-path "@{libs}"'/>
                <arg line='-compiler.library-path "@{sdk}/frameworks/libs"'/>
                <arg line='-compiler.library-path "@{sdk}/frameworks/locale/en_US"'/>
                <arg line='-compiler.library-path "${dcradswcs.flex.path}/libs"'/>
                <arg line='-compiler.library-path "${dcradswcs.flex.path}/locale"'/>
                <arg line='-compiler.library-path "${fiberswcs.flex.path}/libs"'/>
                <arg line='-compiler.library-path "${fiberswcs.flex.path}/locale"'/>
                <arg line='-compiler.library-path "${flexunitframework.flex.path}/flexunitframework/libs/version4libs/Common"'/>
                <arg line='-compiler.library-path "${flexunitframework.flex.path}/flexunitframework/libs/version4libs/FlexProject"'/>
                <arg line='-compiler.library-path "${flexunitframework.flex.path}/flexunitframework/locale/version4locale"'/>
                <arg line='-compiler.library-path "${flexunitframework.flex.path}/flexunitframework/libs"'/>
                <!-- <arg line='-compiler.library-path "C:/rms-it-apps/adobe/fb4/plugins/com.adobe.flexbuilder.dcrad_4.0.1.277662/dcradSwcs/4.0/libs"'/>
                <arg line='-compiler.library-path "C:/rms-it-apps/adobe/fb4/plugins/com.adobe.flexbuilder.dcrad_4.0.1.277662/dcradSwcs/4.0/locale"'/>
                <arg line='-compiler.library-path "C:/rms-it-apps/adobe/fb4/plugins/com.adobe.flexbuilder.dcrad_4.0.1.277662/fiberSwcs/4.0/libs"'/>
                <arg line='-compiler.library-path "C:/rms-it-apps/adobe/fb4/plugins/com.adobe.flexbuilder.dcrad_4.0.1.277662/fiberSwcs/4.0/locale"'/>
                <arg line='-compiler.library-path "C:/rms-it-apps/adobe/fb4/plugins/com.adobe.flexbuilder.flexunit_4.0.1.277662/flexunitframework/libs/version4libs/Common"'/>
                <arg line='-compiler.library-path "C:/rms-it-apps/adobe/fb4/plugins/com.adobe.flexbuilder.flexunit_4.0.1.277662/flexunitframework/libs/version4libs/FlexProject"'/>
                <arg line='-compiler.library-path "C:/rms-it-apps/adobe/fb4/plugins/com.adobe.flexbuilder.flexunit_4.0.1.277662/flexunitframework/locale/version4locale"'/>
                <arg line='-compiler.library-path "C:/rms-it-apps/adobe/fb4/plugins/com.adobe.flexbuilder.flexunit_4.0.1.277662/flexunitframework/libs"'/> -->

                <!-- Runtime shared libraries. Order matters. -->
                <!-- Load framework libraries first -->
                <arg line='-runtime-shared-library-path="@{sdk}/frameworks/libs/textLayout.swc","textLayout_1.1.0.604.swz",,"textLayout_1.1.0.604.swf"'/>
                <arg line='-runtime-shared-library-path="@{sdk}/frameworks/libs/osmf.swc","osmf_flex.4.0.0.13495.swz",,"osmf_flex.4.0.0.13495.swf"'/>
                <arg line='-runtime-shared-library-path="@{sdk}/frameworks/libs/framework.swc","framework_4.1.0.16076.swz",,"framework_4.1.0.16076.swf"'/>
                <arg line='-runtime-shared-library-path="@{sdk}/frameworks/libs/spark.swc","spark_4.1.0.16076.swz",,"spark_4.1.0.16076.swf"'/>
                <arg line='-runtime-shared-library-path="@{sdk}/frameworks/libs/sparkskins.swc","sparkskins_4.1.0.16076.swz",,"sparkskins_4.1.0.16076.swf"'/>
                <arg line='-runtime-shared-library-path="@{sdk}/frameworks/libs/rpc.swc","rpc_4.1.0.16076.swz",,"rpc_4.1.0.16076.swf"'/>
                <arg line='-runtime-shared-library-path="@{sdk}/frameworks/libs/datavisualization.swc","datavisualization_4.1.0.16076.swz",,"datavisualization_4.1.0.16076.swf"'/>

                <!-- Load after framework libraries -->
                <!-- Note: do not put spaces between comma delimited values -->
                <arg line='${rsl.applicationSettings}'/>
                <arg line='${rsl.authorization}'/>
                <arg line='${rsl.autofill}'/>
                <arg line='${rsl.customComponents}'/>
                <arg line='${rsl.navigation}'/>
                <arg line='${rsl.lookup}'/>

                <!-- Libraries needed for QTP -->
                <arg line="${qtp.arg1}"/> 
                <arg line="${qtp.arg2}"/>
                <arg line="${qtp.arg3}"/>
                <arg line="${qtp.arg4}"/>
                <arg line="${qtp.arg5}"/>

                <arg line="-verify-digests=false"/>

                <!-- Flex Compiler -->
                <!-- Compiler options -->
                <arg line="-compiler.accessible=true"/>
                <arg line="-compiler.strict=true"/>
                <arg line="-warnings=true" />

                <!-- Additional compiler arguments: -->
                <arg line='-theme=@{sdk}/frameworks/themes/Halo/halo.swc -services "@{services-config}" -locale en_US'/>

                <!-- Flex Server -->        
                <!-- Server location -->
                <!-- Context root: -->
                <arg line="-compiler.context-root=@{context-root}"/>

                <!-- Miscellaneous -->
                <arg line="-compiler.incremental=true"/>
                <arg line="-compiler.keep-generated-actionscript=false"/>
                <arg line="-compiler.verbose-stacktraces=true"/>                
                <arg line="-show-unused-type-selector-warnings=false"/>         
                <arg line="-optimize=true" />       
                <arg line="-debug=@{debug}" />                              
                <arg line='"@{mxml}"'/>
            </exec> 
```

这是我得到的错误：

```
BUILD FAILED
C:\dev\workspace\rmsitepi2\build.raytheon.suite.tomcat.xml:50: The following error occurred while executing this line:
C:\dev\workspace\rmsitepi2\build.raytheon.flex.xml:33: The following error occurred while executing this line:
C:\dev\workspace\rmsitepi2\build.raytheon.flex.xml:159: exec returned: 1 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T18:10:43.703

ant -v 通常可以解决问题，但您可能会发现有很多输出需要查看。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-25T19:46:10.650

一些好的旧回声怎么样：

```
<echoxml>
 <exec executable="..." failonerror="true" >
  <arg value="..."/>
  <arg value="..."/>
   ...
 </exec>
</echoxml> 
```

在激活真实的东西之前测试你的东西（属性值，属性解析..等）！？
那是我经常使用的，因为`ant -verbose | debug`当我只需要检查特定部分时太健谈了。之后只需删除或评论`echoxml`标签。

对于[echoxml](http://ant.apache.org/manual/Tasks/echoxml.html)，您需要 Ant >= 1.7

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-24T18:53:52.087

尝试使用[log4j ANT 侦听](http://ant.apache.org/manual/listeners.html#Log4jListener)器。它可以在 Exec 任务输出上配置为零。

# 例子

## 项目文件

```
$ tree
.
|-- build.xml
`-- lib
    |-- log4j-1.2.16.jar
    `-- log4j.properties

1 directory, 3 files 
```

## 构建.xml

```
<project name="name" default="run">

    <target name="run">
        <exec executable="echo">
            <arg line="hello world"/>
        </exec>
    </target>

</project> 
```

## log4j.properties

```
log4j.rootLogger=ERROR, LogFile
log4j.logger.org.apache.tools.ant.taskdefs.ExecTask=DEBUG

log4j.appender.LogFile=org.apache.log4j.FileAppender
log4j.appender.LogFile.layout=org.apache.log4j.PatternLayout
log4j.appender.LogFile.layout.ConversionPattern=[%6r] %8c{1} : %m%n
log4j.appender.LogFile.file=build.log 
```

## 运行构建

需要指定监听器和包含log4j依赖的目录：

```
ant -listener org.apache.tools.ant.listener.Log4jListener -lib lib 
```

**在build.log**文件中生成以下输出

```
$ cat build.log
[     0] ExecTask : Current OS is Linux
[    14] ExecTask : Executing 'echo' with arguments:
'hello'
'world'

The ' characters around the executable and arguments are
not part of the command.
[    20] ExecTask : hello world 
```

# c - 如何从图像的直方图中过滤出感兴趣的对象？

> ID：10302491
> 
> 赞同：0
> 
> 时间：2012-04-24T16:57:58.303
> 
> 标签：c, image-processing, opencv, histogram

场景是这样的，我有一个图像，我只想从中提取文本以进行进一步的 OCR 处理，我试图通过腐蚀和膨胀来删除徽标，但是当卡片的背景中有图像或卡片是时它失败了分成2种不同的颜色，所以我想计算卡片的直方图，然后过滤文本，因为它将在背景或任何其他非文本区域中具有最小的峰值我得到这个opencv代码来计算图像的直方图

OpenCV 代码：

```
IplImage* trueColorImage = cvLoadImage("plastics.jpg");
TrueColorIplImg=[self CreateIplImageFromUIImage:trueColorImage];
IplImage* channel = cvCreateImage( cvGetSize(TrueColorIplImg), 8, 1);
IplImage *hist_img = cvCreateImage(cvSize(300,240), 8, 1);
cvSet( hist_img, cvScalarAll(255), 0 );
CvHistogram *hist_red;
CvHistogram *hist_green;
CvHistogram *hist_blue;
int hist_size = 256;      
float range[]={0,256};
float* ranges[] = { range };
float max_value = 0.0;
float max = 0.0;
float w_scale = 0.0;
hist_red = cvCreateHist(1, &hist_size, CV_HIST_ARRAY, ranges, 1);
hist_green = cvCreateHist(1, &hist_size, CV_HIST_ARRAY, ranges, 1);
hist_blue = cvCreateHist(1, &hist_size, CV_HIST_ARRAY, ranges, 1);
cvSetImageCOI(TrueColorIplImg,3);
cvCopy(TrueColorIplImg,channel);
cvResetImageROI(TrueColorIplImg);
cvCalcHist( &channel, hist_red, 0, NULL );
cvSetImageCOI(TrueColorIplImg,2);
cvCopy(TrueColorIplImg,channel);
cvResetImageROI(TrueColorIplImg);
cvCalcHist( &channel, hist_green, 0, NULL );
cvSetImageCOI(TrueColorIplImg,1);
cvCopy(TrueColorIplImg,channel);
cvResetImageROI(TrueColorIplImg);
cvCalcHist( &channel, hist_blue, 0, NULL );
cvGetMinMaxHistValue( hist_red, 0, &max_value, 0, 0 );
cvGetMinMaxHistValue( hist_green, 0, &max, 0, 0 );
max_value = (max > max_value) ? max : max_value;
cvGetMinMaxHistValue( hist_blue, 0, &max, 0, 0 );
max_value = (max > max_value) ? max : max_value;    
cvScale( hist_red->bins, hist_red->bins, ((float)hist_img->height)/max_value, 0 );
cvScale( hist_green->bins, hist_green->bins, ((float)hist_img->height)/max_value, 0 );
cvScale( hist_blue->bins, hist_blue->bins, ((float)hist_img->height)/max_value, 0 );
printf("Scale: %4.2f pixels per 100 units\n", max_value*100/((float)hist_img->height));                         
w_scale = ((float)hist_img->width)/hist_size;
 for( int i = 0; i < hist_size; i++ )
{
    cvRectangle( hist_img, cvPoint((int)i*w_scale , hist_img->height),
                cvPoint((int)(i+1)*w_scale, hist_img->height - cvRound(cvGetReal1D(hist_red->bins,i))),
                CV_RGB(255,0,0), -1, 8, 0 );
    cvRectangle( hist_img, cvPoint((int)i*w_scale , hist_img->height),
                cvPoint((int)(i+1)*w_scale, hist_img->height - cvRound(cvGetReal1D(hist_green->bins,i))),
                CV_RGB(0,255,0), -1, 8, 0 );
    cvRectangle( hist_img, cvPoint((int)i*w_scale , hist_img->height),
                cvPoint((int)(i+1)*w_scale, hist_img->height - cvRound(cvGetReal1D(hist_blue->bins,i))),
                CV_RGB(0,0,255), -1, 8, 0 );
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:37:23.883

生成直方图很容易，OpenCV 的文档中提供了代码。所以你并没有真正给我们任何有用的东西。剩下的任务才是真正的挑战所在。我很想看到你尝试处理这个问题。

我从您的其他问题中注意到您对这个问题非常感兴趣。我需要说，解决它可能比你以前想象的要复杂一些。您可能希望稍微限制您要解决的问题的范围，因为为所有类型的名片开发通用检测系统将非常困难！

我做了一些研究，我将与你分享我发现的一些有趣的材料：

*   [图像中的文本检测](http://www.colorfulwolf.com/blog/2011/01/26/text-detection-in-images/)
*   [在图像中定位文本](https://stackoverflow.com/questions/1848/locating-text-within-image)
*   [确定图像中的文本和图形区域](https://stackoverflow.com/q/2903176/176769)
*   [文档图像处理](https://stackoverflow.com/questions/7689099/document-image-processing)
*   [检测图像上是否存在文本的算法](https://stackoverflow.com/questions/4606274/algorithm-to-detect-presence-of-text-on-image)
*   [提取扫描文档的一部分（个人 ID）](https://stackoverflow.com/questions/8073135/extracting-part-of-a-scanned-document-personal-id-which-library-and-method-t)
*   [文本检测](http://opencv-users.1802565.n2.nabble.com/text-detection-td3989481.html)

# jquery - 使用 jQuery 简单地传递整个表单

> ID：10302498
> 
> 赞同：0
> 
> 时间：2012-04-24T16:58:20.707
> 
> 标签：jquery

这是我的代码：

[http://jsfiddle.net/aH2qC/](http://jsfiddle.net/aH2qC/)

不工作。我想获取表单的 action="" 中的内容并将其用作 $.post url。然后我想正确地序列化它，所以它会传递所有内容，就像我单击提交按钮并进入 /player/admin 页面一样。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:01:24.437

使用以下内容：

```
 $.post(form.attr('action'),
           form.serialize(),
           function(data) {
               alert("Loaded");
           }
      ); 
```

* * *

**评论后更新：**

```
$('.followform').submit(function(e) {
    alert($(this).attr('rel'));
    var form = $(this);

    $.post(form.attr('action'),
        form.serialize(),
        function(data) {
            alert("Loaded");
        }
    );

    e.preventDefault();

    return false;
}); 
```

*注意 - 确保您的表单选择器也是正确的*

```
/* this */
$('.followform') ... 
/* or */
$('[name="followform"]') ...
/* will do */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:01:15.913

你需要像下面这样的东西，

```
$(document).ready(function(){
        //v-- Fixed the form selector
    $('.followform').submit(function(e) {
       var form = $(this);
             //   v--- this.action will give you the action URL      
        $.post(this.action, form.serialize(),
           function(data) {
             alert("Loaded");
           });
       return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:02:26.263

```
$(document).ready(function(){
    $('followform').submit(function(e) {
        e.preventDefault();
        var form = $(this),
            action = form.attr('action');;

        $.post(action, form.serialize(),
           function(data) {
             alert("Loaded");
           });
    });
}); 
```

# java - 复杂的查询功能——如何准备？

> ID：10302502
> 
> 赞同：0
> 
> 时间：2012-04-24T16:58:34.140
> 
> 标签：java, mysql, sql, jsp, prepared-statement

我正在使用用户输入并为页面创建了一个过滤器。它正在工作，但我知道我直接查询数据库。

可以优化此查询以用作准备好的查询吗？我决定在开始输入一堆 if-else 语句之前咨询专业人士。

```
public ArrayList<data.exam> getAllExamsList(
        String course, String building, String room,
        String capacity, String numberenrolled, String day,
        String starttime, String endtime, String callnumber,
        String department, String instructor, boolean coursebox,
        boolean buildingbox, boolean roombox, boolean capacitybox,
        boolean numberenrolledbox, boolean daybox, boolean startbox,
        boolean endbox, boolean callbox, boolean departmentbox,
        boolean instructorbox, String starttimesearchfrom, String starttimesearchto,
        String endtimesearchfrom, String endtimesearchto) throws SQLException {

    String findstarttimesearchfrom = starttimesearchfrom.equals("ALL") ? "" : "  AND `Start Time`>=time('" + starttimesearchfrom + "')";
    String findstarttimesearchto = starttimesearchto.equals("ALL") ? "" : "  AND `Start Time`<=time('" + starttimesearchto + "')";
    String findendtimesearchfrom = endtimesearchfrom.equals("ALL") ? "" : "  AND `End Time`>=time('" + endtimesearchfrom + "')";
    String findendtimesearchto = endtimesearchto.equals("ALL") ? "" : "  AND `End Time`<=time('" + endtimesearchto + "')";

    int totalOutPuts = 0; //how many checkboxes are checked

    boolean checks[] = new boolean[]{coursebox, buildingbox, roombox,
        capacitybox, numberenrolledbox, daybox, startbox, endbox,
        callbox, departmentbox, instructorbox};

    for (boolean check : checks) {
        if (check) {
            totalOutPuts++; //adding to checked boxes count
        }
    }

    String groupBy = " Group by "; //create a Group by statement for query
    for (int i = 1; i < totalOutPuts; i++) {
        groupBy += i + ", ";
    }
    groupBy += totalOutPuts + ""; //adding the last element to Group by w/o comma

    StringWriter sw = new StringWriter();
    PrintWriter pw = new PrintWriter(sw);
    Connection con = null;
    Statement stmnt = null;
    ResultSet displayString = null;
    ArrayList<data.exam> exams = new ArrayList<data.exam>(); //will bre returned back with list of exams

    String showcoursebox = coursebox == true ? "`Course Number`" : "";
    showcoursebox += (coursebox && (buildingbox || roombox || capacitybox || numberenrolledbox || daybox || startbox || endbox || callbox || departmentbox || instructorbox)) ? ", " : "";

    String showbuildingbox = buildingbox == true ? "Building" : "";
    showbuildingbox += (buildingbox && (roombox || capacitybox || numberenrolledbox || daybox || startbox || endbox || callbox || departmentbox || instructorbox)) ? ", " : "";

    String showroombox = roombox == true ? "`Room Number`" : "";
    showroombox += (roombox && (capacitybox || numberenrolledbox || daybox || startbox || endbox || callbox || departmentbox || instructorbox)) ? ", " : "";

    String showcapacitybox = capacitybox == true ? "`Room Capacity`" : "";
    showcapacitybox += (capacitybox && (numberenrolledbox || daybox || startbox || endbox || callbox || departmentbox || instructorbox)) ? ", " : "";

    String shownumberenrolled = numberenrolledbox == true ? "`Number Enrolled`" : "";
    shownumberenrolled += (numberenrolledbox && (daybox || startbox || endbox || callbox || departmentbox || instructorbox)) ? ", " : "";

    String showdaybox = daybox == true ? "`Exam Day`" : "";
    showdaybox += (daybox && (startbox || endbox || callbox || departmentbox || instructorbox)) ? ", " : "";

    String showstartbox = startbox == true ? "`Start Time`" : "";
    showstartbox += (startbox && (endbox || callbox || departmentbox || instructorbox)) ? ", " : "";

    String showendbox = endbox == true ? "`End Time`" : "";
    showendbox += (endbox && (callbox || departmentbox || instructorbox)) ? ", " : "";

    String showcallbox = callbox == true ? "`Call Number`" : "";
    showcallbox += (callbox && (departmentbox || instructorbox)) ? ", " : "";

    String showdepartmentbox = departmentbox == true ? "Department" : "";
    showdepartmentbox += (departmentbox && (instructorbox)) ? ", " : "";

    String showinstructorbox = instructorbox == true ? "Instructor" : "";

    String findCourse = course.equals("ALL") ? "" : " AND `Course Number`=" + course;
    String findBuilding = building.equals("ALL") ? "" : " AND `Building`='" + building + "'";
    String findRoom = room.equals("ALL") ? "" : " AND `Room Number`='" + room + "'";
    String findCapacity = capacity.equals("ALL") ? "" : " AND `Room Capacity`='" + capacity + "'";
    String findNumberEnrolled = numberenrolled.equals("ALL") ? "" : " AND `Number Enrolled`='" + numberenrolled + "'";
    String findDay = day.equals("ALL") ? "" : " AND `Exam Day` LIKE '%" + day.toLowerCase() + "%'";
    String findStarttime = starttime.equals("ALL") ? "" : " AND `Start Time`=time('" + starttime + "')";
    String findEndtime = endtime.equals("ALL") ? "" : " AND `End Time`=time('" + endtime + "')";
    String findCall = callnumber.equals("ALL") ? "" : " AND `Call Number`=" + callnumber;
    String findDepartment = department.equals("ALL") ? "" : " AND `Department`='" + department + "'";
    String findInstructor = instructor.equals("ALL") ? "" : " AND `Instructor`='" + instructor + "'";

    String query = "select "
            + showcoursebox
            + showbuildingbox
            + showroombox
            + showcapacitybox
            + shownumberenrolled
            + showdaybox
            + showstartbox
            + showendbox
            + showcallbox
            + showdepartmentbox
            + showinstructorbox
            + " from"
            + "    (select "
            + "        exam_schedules.course_id as id,"
            + "            rooms.number as 'Room Number',"
            + "            rooms.building as Building,"
            + "            rooms.capacity as 'Room Capacity',"
            + "            day as 'Exam Day',"
            + "            start_time as 'Start Time',"
            + "            end_time as 'End Time'"
            + "    from"
            + "        exam_schedules, rooms"
            + "    where"
            + "        exam_schedules.room_id = rooms.id) r1,"
            + "    (select "
            + "        courses.id,"
            + "            courses.number_enrolled as 'Number Enrolled',"
            + "            courses.call_number as 'Call Number',"
            + "            courses.course_number as 'Course Number',"
            + "            departments.department_code as Department,"
            + "            instructors.full_name as Instructor"
            + "    from"
            + "        courses, departments, instructors"
            + "    where"
            + "        courses.department_id = departments.id and courses.instructor_id = instructors.id) r2"
            + " where"
            + "    r2.id = r1.id "
            + findCourse + findBuilding + findRoom + findCapacity
            + findNumberEnrolled + findDay + findStarttime + findEndtime
            + findCall + findDepartment + findInstructor
            + findstarttimesearchfrom
            + findstarttimesearchto
            + findendtimesearchfrom
            + findendtimesearchto
            + groupBy;

    try {
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        con = (Connection) DriverManager.getConnection(DBurl, user, password);
        stmnt = (Statement) con.createStatement();
        String readTopic = query;
        displayString = stmnt.executeQuery(readTopic);
        while (displayString.next()) {
            try {

                String courseObj = "",
                        buildingObj = "",
                        roomObj = "",
                        capacityObj = "",
                        numberenrolledObj = "",
                        dayObj = "",
                        starttimeObj = "",
                        endtimeObj = "",
                        callnumberObj = "",
                        departmentObj = "",
                        instructorObj = "";

                courseObj = coursebox == true ? displayString.getString("Course Number") : "";
                buildingObj = buildingbox == true ? displayString.getString("Building") : "";
                roomObj = roombox == true ? displayString.getString("Room Number") : "";
                capacityObj = capacitybox == true ? displayString.getString("Room Capacity") : "";
                numberenrolledObj = numberenrolledbox == true ? displayString.getString("Number Enrolled") : "";
                dayObj = daybox == true ? displayString.getString("Exam Day") : "";
                starttimeObj = startbox == true ? displayString.getString("Start Time") : "";
                endtimeObj = endbox == true ? displayString.getString("End Time") : "";
                callnumberObj = callbox == true ? displayString.getString("Call Number") : "";
                departmentObj = departmentbox == true ? displayString.getString("Department") : "";
                instructorObj = instructorbox == true ? displayString.getString("Instructor") : "";

                data.exam O = new data.exam(courseObj, buildingObj, roomObj, capacityObj,
                        numberenrolledObj, dayObj, starttimeObj, endtimeObj, callnumberObj,
                        departmentObj, instructorObj);

                exams.add(O);
            } catch (Exception E) {
            }
        }
        displayString.close();
        con.close();
    } catch (Exception e) {

        if (con != null) {
            con.close();
        }
        if (stmnt != null) {
            stmnt.close();
        }
        if (displayString != null) {
            displayString.close();
        }
        e.printStackTrace(pw);
    }

    return exams;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:51:57.330

有几件事可以帮助您：

*   创建一个可以传递给此 getAllExamsList 方法的对象。这将组织您的数据模型并缩短可怕的参数列表。

> ```
> public Exam{
>     private String course;
>     private String building;
>     private String room;
>     //additional variabled you have in the getAllExamsList parameter list
>     public Exam(String course, String building, String room){
>         this.course=course;
>         this.building=building;
>         this.room=room;
>     }
>     //additional getters and setters
> } 
> ```

*   看看这个关于准备好的语句的[教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

# django - RabbitMQ/Celery/Django 内存泄漏？

> ID：10302503
> 
> 赞同：13
> 
> 时间：2012-04-24T16:58:43.110
> 
> 标签：django, rabbitmq, celery, amqp, django-celery

我最近接手了我公司正在进行的项目的另一部分，并发现我们的 RabbitMQ/Celery 设置中似乎存在内存泄漏。

我们的系统有 2Gb 的内存，在任何给定时间大约有 1.8Gb 可用。我们有多个任务处理大量数据并将它们添加到我们的数据库中。

当这些任务运行时，它们会消耗相当多的内存，很快我们的可用内存就会下降到 16Mb 到 300Mb 之间的任何地方。问题是，这些任务完成后，记忆就没有回来了。

我们正在使用：

*   RabbitMQ v2.7.1
*   AMQP 0-9-1 / 0-9 / 0-8（从 RabbitMQ startup_log 得到这一行）
*   芹菜 2.4.6
*   Django 1.3.1
*   amqplib 1.0.2
*   django 芹菜 2.4.2
*   昆布 2.1.0
*   Python 2.6.6
*   二郎5.8

我们的服务器正在运行 Debian 6.0.4。

我是此设置的新手，因此如果您需要任何其他信息可以帮助我确定此问题的根源，请告诉我。

所有任务都有返回值，所有任务都有ignore_result=True，CELERY_IGNORE_RESULT 设置为True。

非常感谢您的宝贵时间。

我当前的配置文件是：

```
CELERY_TASK_RESULT_EXPIRES = 30
CELERY_MAX_CACHED_RESULTS = 1
CELERY_RESULT_BACKEND = False
CELERY_IGNORE_RESULT = True
BROKER_HOST = 'localhost'
BROKER_PORT = 5672
BROKER_USER = c.celery.u
BROKER_PASSWORD = c.celery.p
BROKER_VHOST = c.celery.vhost 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:13:59.840

我几乎可以肯定您正在使用 DEBUG=True 运行此设置，这会导致内存泄漏。

检查这篇文章：[禁用 Celery 的 Django 调试](https://stackoverflow.com/questions/4806314/disable-django-debugging-for-celery)。

如果有帮助，我会发布我的配置。

## 设置.py

```
djcelery.setup_loader()
BROKER_HOST = "localhost"
BROKER_PORT = 5672
BROKER_VHOST = "rabbit"
BROKER_USER = "YYYYYY"
BROKER_PASSWORD = "XXXXXXX"

CELERY_IGNORE_RESULT = True
CELERY_DISABLE_RATE_LIMITS = True
CELERY_ACKS_LATE = True
CELERYD_PREFETCH_MULTIPLIER = 1
CELERYBEAT_SCHEDULER = "djcelery.schedulers.DatabaseScheduler"
CELERY_ROUTES = ('FILE_WITH_ROUTES',) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T06:58:49.420

您可能[会](https://github.com/celery/librabbitmq/issues/15)在`librabbitmq`. 请检查 Celery 是否正在使用`librabbitmq>=1.0.1`.

一个简单的尝试是：`pip install librabbitmq>=1.0.1`.

# c++ - 无法将迭代器分配给二进制函数中的常量输入向量

> ID：10302504
> 
> 赞同：0
> 
> 时间：2012-04-24T16:58:44.267
> 
> 标签：c++, vector, binary-operators

我正在尝试编写一个二进制函数，该函数采用两个向量（长度相同）并将它们按值相加。由于某种原因，以下代码不起作用：

```
struct Plusval : binary_function <std::vector<int>,std::vector<int>,std::vector<int> > 
{
  std::vector<int> operator() (const std::vector<int>& x, const std::vector<int>& y) const
{
    std::vector<int> ret(x);
    std::vector<int>::iterator itx,ity;
    ity=y.begin();
    for (itx=ret.begin();itx<ret.end();++itx)
    {
        ret[*itx]+=y[*ity];
        ++ity;
    }
    return ret;
  }
}; 
```

我收到一个错误，我无法执行 ity=y.begin() 但是，以下代码确实有效

```
struct Plusval : binary_function <std::vector<int>,std::vector<int>,std::vector<int> > 
{
  std::vector<int> operator() (const std::vector<int>& x, const std::vector<int>& y) const
{
    std::vector<int> ret(x);
    std::vector<int> yloc(y);
    std::vector<int>::iterator itx,ity;
    ity=yloc.begin();
    for (itx=ret.begin();itx<ret.end();++itx)
    {
        ret[*itx]+=yloc[*ity];
        ++ity;
    }
    return ret;
  }
}; 
```

显然，第二个版本需要更长的时间（因为它必须复制一个额外的向量）。是因为输入是一个常量向量吗？如果是，有什么理由需要吗？请注意，我计划将此函数用作 boost::mpi 中 allreduce() 函数的输入，如果这有什么不同的话

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:07:09.643

您`ity`按原样`vector::iterator` `y`定义`const`并返回一个`const_iterator`.

更重要的是：不要使用`binary_function`. 适配器已被弃用。

此外，您的功能不会做您想要的。*itx 返回存储在 指向的位置的值`itx`，您可以使用它来索引您打算返回的`vector`。

我会用二进制写这个`transform`。

```
std::vector<int> res;
std::transform(begin(x), end(x), begin(y), 
               std::back_inserter(res), std::plus<int>()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:08:20.530

错误是您不能将非常量迭代器与 const 容器一起使用，因为这会破坏 const 正确性。您应该`std::vector<int>::const_iterator`在第二个参数上使用。

除此之外，第一个块中的实现并没有像您声称的那样做。您正在迭代容器并使用存储的值来索引容器并在那里更新。如果你真的想从两个容器中添加值，它比这简单得多：

```
struct PlusVal
{
   std::vector<int> operator()( std::vector<int> lhs, std::vector<int> const& rhs )
   {
      assert( lhs.size() == rhs.size() );
      for (std::vector<int>::size_type i = 0; i < lhs.size; ++i )
         lhs[i] += rhs[i];
      return lhs;
   }
}; 
```

如果你想用迭代器做到这一点，它同样简单：

```
struct PlusVal
{
   std::vector<int> operator()( std::vector<int> lhs, std::vector<int> const& rhs )
   {
      assert( lhs.size() == rhs.size() );
      std::vector<int>::iterator it = lhs.begin(), end = lhs.end();
      std::vector<int>::const_iterator rit = rhs.begin();
      while ( it != end )
         *it++ += *rit++;
      return lhs;
   }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:12:05.650

您正在寻找[std::vector::const_iterator](http://cplusplus.com/reference/stl/vector/)类型

```
std::vector<int> operator() (const std::vector<int>& x, const std::vector<int>& y)
{
  std::vector<int> result;

  // Not strictly necessary, but helps with performance a bit
  result.reserve(std::min(x.length(), y.length());

  for (std::vector<int>::const_iterator x_it = x.begin(),
                                      y_it = y.begin();
      x_it != x.end() && y_it != y.end();
      ++x_it, ++y_it)
  {
   result.push_back(*x_it + *y_it);
  }

  return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T17:45:34.493

看起来你已经得到了一个或两个合理的答案；我只是指出一个替代方案。尽管我不愿提及它，但它`std::valarray`非常适合我，我无法抗拒：

```
std::valarray<int> x;
std::valarray<int> y;

// code to populate x and y elided

x += y; 
```

每隔几个月（左右），我就会看到一些事情`valarray`变得如此简单，我发现它被遗失和遗忘真的很遗憾（然后我想到诸如`slice`, `gslice`, `slice_array`,`indirect_array`等之类的事情，并希望我根本没有想到它）。

# google-drive-api - 来自 Google Drive API 的图像缩略图

> ID：10302511
> 
> 赞同：4
> 
> 时间：2012-04-24T16:59:26.400
> 
> 标签：google-drive-api

我想知道 Google Drive API 是否会在不久的将来为上传到 Google Drive 的照片生成多个缩略图。我是 Cloud Photos（iOS 应用程序）的开发人员，我们与 Dropbox 和 Facebook（即将推出）的集成由为上传到其服务的每张照片生成的这些缩略图图像提供支持。我知道我们对集成 Google Drive 非常感兴趣，并且为上传的图像生成缩略图将允许许多具有基于照片的应用程序的开发人员与 Google Drive 集成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:39:34.953

目前不支持此功能，但我们可以在未来通过 Picasa/Drive 集成添加一些内容。不过，目前没有有限的计划来实现这一点。

感谢您的功能请求和反馈！

# c# - 剪贴板以格式访问数据

> ID：10302513
> 
> 赞同：0
> 
> 时间：2012-04-24T16:59:34.530
> 
> 标签：c#

我正在为同步融合网格控件进行复制粘贴。

我的问题是粘贴比 abt syncfusion

我的数据采用 datetime-int、datetime-int... 格式，具体取决于所选的行数、列数。这是我的粘贴代码

```
private void theGrid_ClipboardPaste(object sender, GridCutPasteEventArgs e)
        {
 DataObject data = (DataObject)Clipboard.GetDataObject();
  try
            {

                if (data.GetDataPresent(DataFormats.Text))
                {
 rowsInClipboard =  stringInClipboard.Split('\n');
                    //split into cellvalues
                     for (int iRow = 0; iRow < rowsInClipboard.Length; iRow++)
                         ValuesInrows = rowsInClipboard[iRow].Split('\t');
...} 
```

我将如何验证从剪贴板粘贴到网格的数据。如果我做一个自定义格式会有帮助吗？我还需要根据列访问剪贴板数据。

谢谢孙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:59:14.523

您可以在通过事件 ClipboardCanPaste 粘贴到网格时验证剪贴板数据。

```
this.gridControl1.ClipboardCanPaste += new GridCutPasteEventHandler(gridControl1_ClipboardCanPaste); //get triggered before pasting occurs. 
```

如果您想访问剪贴板数据以跨列粘贴到网格，您可以通过每个说明单个单元格内容之间的制表键按下空间来拆分相应的值。以下代码以格式化方式将单元格内容跨网格单元格复制到剪贴板，以便在按列顺序从剪贴板粘贴到任何文本编辑器时使用此格式化文本。

```
private void CopyCellsToClipboard(GridRangeInfo range)
{
StringBuilder sb = new StringBuilder();

for (int i = range.Top; i <= range.Bottom; i++)
{
for (int j = range.Left; j <= range.Right; j++)
{
if (! (this.gridControl1.Cols.Hidden[j]))
{
sb.Append(this.gridControl1[i, j].FormattedText);
sb.Append("\t");
}
}
sb.AppendLine(System.Environment.NewLine);
}
string str = sb.ToString().Replace(System.Environment.NewLine + System.Environment.NewLine, System.Environment.NewLine);
DataObject db = new DataObject(DataFormats.UnicodeText, str);
Clipboard.SetDataObject(db);
} 
```

# markdown - markdown - 我可以有下划线而不转义它们并且没有markdown斜体吗？

> ID：10302516
> 
> 赞同：18
> 
> 时间：2012-04-24T16:59:48.303
> 
> 标签：markdown, code-formatting

我想要有下划线的文本。

它不是代码，所以我不想使用代码格式。

我想停止 Markdown 将其视为*斜体*的指令。

我可以逃避 _each_underscore （见！），`\`但我总共有 20 个，而且在源代码中看起来很难看，难以维护并且不是很干燥。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-25T06:00:23.007

一些 Markdown 实现——特别是 Stack Overflow 的服务器端 C# 版本[MarkdownSharp](http://code.google.com/p/markdownsharp/)（它是[可选行为](http://code.google.com/p/markdownsharp/source/browse/MarkdownSharp/Markdown.cs#121)）和客户端 JavaScript 版本[PageDown](http://code.google.com/p/pagedown/)，还有例如[GitHub 的风格](http://github.github.com/github-flavored-markdown/)——由于您描述的原因而偏离了 Markdown 规范。

有关 Stack Overflow 的一些历史，请参阅两篇博客文章[三个 Markdown Gotchas](https://blog.stackoverflow.com/2008/06/three-markdown-gotcha/)和[Markdown，一年后](https://blog.stackoverflow.com/2009/10/markdown-one-year-later/)。

由于这是对 Markdown 的普遍批评，因此可能有更多的实现使这种行为可由用户设置，或者完全采用更严格的版本。所以这取决于你使用的是什么实现。

如果您使用的是基于 John Gruber 的原始 Perl 实现的端口（即“大量正则表达式替换”版本），那么您自己进行此更改应该相当容易。相关函数可能被称为`_DoItalicsAndBold`（原始 Perl 版本，Showdown/PageDown）、`DoItalicsAndBold`（MarkdownSharp）、`_do_italics_and_bold`（python-markdown2）或类似名称。

查看[该函数的 PageDown 版本，](http://code.google.com/p/pagedown/source/browse/Markdown.Converter.js#1051) 了解 Stack Overflow 上使用的更严格的正则表达式：

```
function _DoItalicsAndBold(text) {

    // <strong> must go first:
    text = text.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,
    "$1<strong>$3</strong>$4");

    text = text.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,
    "$1<em>$3</em>$4");

    return text;
} 
```

# c# - 从同一服务器上的 MVC 调用 WCF 服务时出现 SocketException

> ID：10302517
> 
> 赞同：8
> 
> 时间：2012-04-24T16:59:49.883
> 
> 标签：c#, asp.net-mvc, wcf, iis-7.5, asp.net-mvc-4

我有一个带有 IIS 7.5 和一个 IP 的 Windows 2008 服务器。根目录下有两个Application，/web 和/service。/web 是 MVC4 应用程序，/service 是 WCF 4.0 服务。

当我从 MVC 使用服务时，我使用以下代码：

```
// Create the web request  
HttpWebRequest request = WebRequest.Create(TripServiceUrl + id) as HttpWebRequest;

// Get response  
using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
{
    // Get the response stream  
    StreamReader reader = new StreamReader(response.GetResponseStream());

    // Console application output  
    tripJson = reader.ReadToEnd();
} 
```

我得到以下套接字异常：

```
[SocketException (0x274c): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond 10.243.6.43:80]
System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress) +273
System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Exception& exception) +584 
```

但是，我可以从服务器上的浏览器中看到 10.243.6.43:80（内部地址）并成功调用该服务。该 IP 不可公开访问。

我应该做什么样的配置才能进行这样的自引用调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:57:37.567

这可能是一个环回问题（安全问题）。请参阅[http://support.microsoft.com/kb/896861](http://support.microsoft.com/kb/896861)。

总结一下：

在注册表编辑器中，找到并单击以下注册表项： HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa 右键单击​​ Lsa，指向新建，然后单击 DWORD 值。键入 DisableLoopbackCheck，然后按 Enter。右键单击 DisableLoopbackCheck，然后单击修改。在数值数据框中，键入 1，然后单击确定。

不要遵循有关 DisableStrictNameChecking 的步骤。

您还会发现很多不这样做的理由（毕竟您是在禁用安全检查），然后很多人说这是让 SharePoint 正常工作的唯一方法。无论如何，它将帮助您确定这是否是问题所在。

# ios - “_OBJC_CLASS_$_”，引用自：xcode 4.3.2 中的错误

> ID：10302522
> 
> 赞同：40
> 
> 时间：2012-04-24T17:00:18.630
> 
> 标签：ios, xcode

所以今天我遇到了一个大问题。我在 xcode 4.3.2 上遇到了一个涉及我的视图控制器的问题，如以下错误消息所示：

```
Undefined symbols for architecture i386: "_OBJC_CLASS_$_SecondViewController",
referenced from: objc-class-ref in Birdflix_ProViewController.o "_OBJC_CLASS_$_ThirdViewController", 
referenced from: objc-class-ref in Birdflix_ProViewController.o "_OBJC_CLASS_$_FourthViewController",
referenced from: objc-class-ref in Birdflix_ProViewController.o "_OBJC_CLASS_$_Author",
referenced from: objc-class-ref in Birdflix_ProViewController.o
ld: symbol(s) not found for architecture i386 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我注意到这些错误仅在我编写将我的视图控制器链接到其他类的 IBActions 时才会出现。如果我删除 IBActions，错误就会消失。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-05-07T15:31:35.367

终于找到了答案。在您的目标设置中，找到构建阶段并导航到编译源。在那里，只需将出现错误的 .m 文件添加到列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-28T07:00:22.730

对我来说，以下方法有效。

在目标 -> 构建阶段 -> 编译源中，我拥有所有 .m 文件，包括那些出现问题的文件。

只是我删除了那些给出问题的 .m 文件。

# php - HTML/PHP 单行下拉列表多选

> ID：10302523
> 
> 赞同：4
> 
> 时间：2012-04-24T17:00:23.767
> 
> 标签：php, javascript, drop-down-menu, user-experience

有没有人知道一种创建下拉列表的方法，就像在允许多项选择但可以显示在一行的选择语句中一样。添加 multiple="multiple" 选项会使其显示在与不适合该项目布局的选项一样多的行上 Css 和/或 javascript 会很好，但是希望避免使用 js 框架。考虑使用 onclick 事件来显示标准的多行下拉框可能会起作用，但不确定如何实现。

以下显示在几行上。

```
 <select name="items[ ]" multiple="multiple">
    <option value="item1">item1</option>
     <option value="item2">item2</option>
    <option value="item2">item2</option></select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-19T00:06:39.420

我建议使用[select2](https://select2.github.io/)，它可以让您轻松创建所需的选择框。该页面中的示例适合您的需求：

```
$(".js-example-basic-multiple").select2();

<select class="js-example-basic-multiple" multiple="multiple">
    <option value="AL">Alabama</option>
    ...
    <option value="WY">Wyoming</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:12:02.190

请参阅[尺寸属性](https://developer.mozilla.org/en/HTML/Element/select)。

```
<select multiple="multiple" size="1"> 
```

# c - 使用指针反转字符串

> ID：10302524
> 
> 赞同：1
> 
> 时间：2012-04-24T17:00:30.007
> 
> 标签：c, string, pointers, reverse, using

我正在尝试使用指针反转字符串。当我尝试打印反转的字符串而不是获取 DCBA 时，我只能作为 BA 出来？有人可以帮我吗？

```
#include<stdio.h>
void reverse(char *);
void main()
{
  char str[5] = "ABCD";
  reverse(str);
}

void reverse(char *str)
{
  char *rev_str = str;
  char temp;
  while(*str)
      str++;
  --str;

  while(rev_str < str)
  {
      temp = *rev_str;
      *rev_str = *str;
      *str = temp;   
      rev_str++;      
      str--;
  }
  printf("reversed string is %s",str);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:04:12.950

你失去了指向字符串开头的指针，所以当你打印出来时，你不是从第一个字符开始，因为`str`不再指向第一个字符。只需放入一个占位符变量以保留指向字符串开头的指针。

```
void reverse(char *str)
{
  char *begin = str; /* Keeps a pointer to the beginning of str */
  char *rev_str = str;
  char temp;
  while(*str)
      str++;
  --str;

  while(rev_str < str)
  {
      temp = *rev_str;
      *rev_str = *str;
      *str = temp;   
      rev_str++;      
      str--;
  }
  printf("reversed string is %s\n", begin);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-03T08:15:20.380

```
char* strrev(chr* src)
{      
       char* dest
       int len=0 ;    //calculate length of the src string
       int index=0 ;  // index for dest (output) string
       int rindex=0; //Index to be counted from end toward beginning of src string

       //Calculate length of the string
       //Keep iterating till it reaches to null char '\0'

       while(*(src+len) != '\0')
       { len++ }

       //pointing rindex at the last character of src string 
       rindex=len-1;

       //Start copying from last char of src string at first index of dest array
       // Copying second last char of src string at second index of dest array and so on ..

       while(rindex > =0)
       {
           *(dest+index) = *(src + rindex)
            index++;
            rindex--;
       }

   // Finally covert array of char into string , by inserting a null char at the end of dest array

      *(dest+index) = '\0';

return dest;
} 
```

# sql - SQL插入查询中的新行

> ID：10302527
> 
> 赞同：0
> 
> 时间：2012-04-24T17:00:33.263
> 
> 标签：sql

我想使用以下语句在名为 people 的表中添加一行，其中一列是 varchar(100)

插入人的价值观（'a b'）

我想在 a 和 b 之间有一条新线。

这个怎么做？

我尝试了类似 'a CHAR(13) b' 的方法，但没有奏效。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T17:03:08.977

怎么样

```
'a ' + CHAR(13) + ' b' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:22:23.747

这也有效：

```
'a' +  CRLF + 'b' 
```

也检查这个链接

[如何在 SQL Server VARCHAR/NVARCHAR 字符串中插入换行符](https://stackoverflow.com/questions/31057/how-to-insert-a-line-break-in-a-sql-server-varchar-nvarchar-string)

# java - java.sql.SQLException: Invalid operation: wasNull() 调用但未检索到数据。但我“正在”检查它是否为空

> ID：10302530
> 
> 赞同：0
> 
> 时间：2012-04-24T17:00:39.767
> 
> 标签：java, servlets, jdbc, sqlexception

以下 servlet 片段：

```
ResultSet set = statement.executeQuery();
       // userName = set.getString(1);
        if(set.next()) {
            userName = set.getString("FirstName");
            Email = set.getString("Email");
        }
        if(set.wasNull()) {  //<<------------- line 33
            // turn to the error page
            response.sendRedirect("LoginFailure.jsp");
        } else {
            // start the session and take to his homepage
            HttpSession session = request.getSession();
            session.setAttribute("UserName", userName);
            session.setMaxInactiveInterval(900); // If the request doesn't come withing 900 seconds the server will invalidate the session
            RequestDispatcher rd = request.getRequestDispatcher("portfolio_one.jsp");
            rd.forward(request, response); // forward to the user home-page
        } 
```

创建以下异常：

```
INFO: java.sql.SQLException: Invalid operation: wasNull() called with no data retrieved.
at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)
at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)
at org.apache.derby.client.am.ResultSet.wasNull(Unknown Source)
at com.sun.gjc.spi.base.ResultSetWrapper.wasNull(ResultSetWrapper.java:141)
--------->> at projectcodes.ValidateDataForSignIn.doPost(ValidateDataForSignIn.java:33)
    .......... 
```

为什么会出现这个异常？由于突出显示的行而发生异常：33

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:11:13.397

`ResultSet#next()`返回时会发生此异常`false`。即根本没有行，因此根本没有检索到任何列。`ResultSet#wasNull()`仅适用于最后检索的列，而不适用于最后检索的行。

您需要重新排列代码逻辑。

```
 if(set.next()) {
        userName = set.getString("FirstName");
        Email = set.getString("Email");

        // start the session and take to his homepage
        HttpSession session = request.getSession();
        session.setAttribute("UserName", userName);
        session.setMaxInactiveInterval(900); // If the request doesn't come withing 900 seconds the server will invalidate the session
        RequestDispatcher rd = request.getRequestDispatcher("portfolio_one.jsp");
        rd.forward(request, response); // forward to the user home-page
    } else {
        // turn to the error page
        response.sendRedirect("LoginFailure.jsp");
    } 
```

* * *

更清楚的是将所有 JDBC 混乱重构为`UserDAO`具有模型类的独立 DAO 类，`User`然后按如下方式使用它：

```
User user = userDAO.find(username, password);

if (user != null) {
    request.getSession().setAttribute("user", user);
    request.getRequestDispatcher("portfolio_one.jsp").forward(request, response);
} else {
    response.sendRedirect("LoginFailure.jsp");
} 
```

该`find()`方法看起来像这样：

```
public User find(String username, String password) throws SQLException {
    Connection connection = null;
    PreparedStatement statement = null;
    ResultSet resultSet = null;
    User user = null;

    try {
        connection = database.getConnection();
        statement = connection.prepareStatement("SELECT id, username, email, firstname, lastname, FROM user WHERE username = ? AND password = MD5(?)");
        statement.setString(1, username);
        statement.setString(2, password);
        resultSet = statement.executeQuery();

        if (resultSet.next()) {
            user = new User();
            user.setId(resultSet.getLong("id"));
            user.setUsername(resultSet.getString("username"));
            user.setEmail(resultSet.getString("email"));
            user.setFirstname(resultSet.getString("firstname"));
            user.setLastname(resultSet.getString("lastname"));
        }
    } finally {
        close(resultSet, statement, connection);
    }

    return user;
} 
```

通过这种方式，您最终会获得更多的自我记录和更好的可重用/可测试代码。

### 也可以看看：

*   [使用 MVC 和 DAO 模式在 JSP 页面的 HTML 中显示 JDBC ResultSet](https://stackoverflow.com/questions/5003142/jsp-using-mvc-and-jdbc/5003701#5003701)

# c# - 在运行时快照给定资源键的所有资源值

> ID：10302537
> 
> 赞同：0
> 
> 时间：2012-04-24T17:00:57.570
> 
> 标签：c#, embedded-resource, linqpad, resourcemanager

我们有一个作业服务器来处理从网站提交的作业。网站的程序集被打包并作为作业的一部分提交到作业服务器（包括所有附属资源程序集）。

这些程序集在作业处理开始之前通过： Assembly.Load( byte[] ) 加载。

在作业处理过程中，我们需要对资源字符串（即验证消息）进行快照。请注意，简单地存储资源密钥不是一个选项，因为验证规则/消息可能会随着时间而改变，如果他们回来查看以前处理的作业/消息，我不希望显示“最新”资源字符串。我需要显示作业处理时的值。而且我需要每个支持的文化信息的快照，以便我可以在网站线程正在运行的适当文化中显示信息。

为了尝试检索消息，网站程序集指定支持哪些语言环境，因此在作业服务器上，我执行以下操作来创建网站程序集的 ResourceManager：

```
var resourceType = Type.GetType( "BTR.Websites.MadHatter.Clients.ABCCorp.Resources.ClientStrings" );
var rm = resourceType != null ? new ResourceManager( resourceType ) : null; 
```

这很好用，我得到了一个 ResourceManager，但是，给定一个 XElement 验证规则和一个字符串 [] 语言环境，以下代码“不起作用”：

```
validationRule.Add( 
    from l in locales
    let message = rm.GetString( p.Value.ToString(), new CultureInfo( l ) )
    select new XAttribute( string.Format( "Message.{0}", l ), message ) ); 
```

本质上，无论我传入什么 CultureInfo，我都会收到默认（en-US）文化的消息。

AppDomain.CurrentDomain.GetAssemblies() 显示加载的网站程序集和附属程序集：

{ABCCorp.ServiceModel，版本=6.0.4497.18334，文化=中性，PublicKeyToken=null} System.Reflection.Assembly {System.Reflection.RuntimeAssembly} {ABCCorp.ServiceModel.resources，版本=6.0.4497.18334，文化=fr-FR， PublicKeyToken=null} System.Reflection.Assembly {System.Reflection.RuntimeAssembly}

但是，如果我在监视窗口中尝试以下操作（与上面的代码相同），我会得到 en-US 版本：

rm.GetString("ResourceKey", new CultureInfo("fr-FR"))

最后，大概我们都熟悉 LINQPad :) 以下脚本“有效”。我没有对 ABCCorp 的 ServiceModel.dll 或卫星 dll 的任何引用。

```
Assembly.LoadFile( @"C:\BTR\Source\ABCCorp.ServiceModel.dll" );
Assembly.LoadFile( @"C:\BTR\Source\fr-FR\ABCCorp.ServiceModel.resources.dll" );
AppDomain.CurrentDomain.GetAssemblies().Dump();
var resourceType = Type.GetType( "BTR.Websites.MadHatter.Clients.ABCCorp.Resources.ClientStrings, ABCCorp.ServiceModel" ).Dump();
var rm = resourceType != null ? new ResourceManager( resourceType ) : null;
rm.GetString( "FlatMemberInformationBasicInformation_DateDeathProof", new CultureInfo( "fr-FR" ) ).Dump(); 
```

任何建议将不胜感激。

**更新：** 根据 Joe 的建议，这是我们最终得到的代码。byte[] 内容是一个 zip 文件，其中包含网站程序集和所有卫星资源程序集（如果存在）。

```
private Assembly LoadPackagedAssembly( byte[] content )
{
    var loaded = new Dictionary<string, Assembly>();

    AppDomain.CurrentDomain.AssemblyResolve += delegate( object sender, ResolveEventArgs args )
    {
        return loaded.ContainsKey( args.Name )
            ? loaded[ args.Name ]
            : null;
    };

    Assembly mainAssembly = null;

    using ( var stream = new MemoryStream( content ) )
    {
        using ( var zip = new ZipInputStream( stream ) )
        {
            ZipEntry entry;

            while ( ( entry = zip.GetNextEntry() ) != null )
            {
                using ( var buffer = new MemoryStream() )
                {
                    Streams.CopyStream( zip, buffer );

                    var assembly = Assembly.Load( buffer.ToArray() );

                    loaded[ assembly.FullName ] = assembly;

                    if ( mainAssembly == null ) mainAssembly = assembly;
                }
            }
        }
    }

    return mainAssembly;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T01:18:23.773

这听起来像是一个程序集解析问题。使用 Load(byte[]) 和 LoadFile，您最终[没有绑定上下文](http://blogs.msdn.com/b/suzcook/archive/2003/05/29/57143.aspx)。总之，要么使用LoadFrom，要么处理AppDomain的AssemblyResolve事件来处理。

请注意，LINQPad 处理 AssemblyResolve 事件以解决由间接引用不同位置的相同 DLL 引起的问题。这样做的一个副作用是，它在绑定可能失败的情况下融合了绑定上下文，从而使原本可能无法正常工作的事情发生。

# postgresql - 从 Postgres 字段中的多个值中进行选择

> ID：10302541
> 
> 赞同：21
> 
> 时间：2012-04-24T17:01:19.457
> 
> 标签：postgresql

我有一个类似于以下的表：

```
WORD    WEIGHT   WORDTYPE
a       0.3      common
the     0.3      common
gray    1.2      colors
steeple 2        object 
```

我需要一次从数据库中提取几个不同单词的权重。我可以做：

```
SELECT * FROM word_weight WHERE WORD = 'a' OR WORD = 'steeple' OR WORD='the'; 
```

但感觉很难看，生成查询的代码也很讨厌。我希望有一种方法可以做类似（伪代码）的事情：

```
SELECT * FROM word_weight WHERE WORD = 'a','the'; 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-24T17:05:26.520

您正在描述 in 子句的功能。

`select * from word_weight where word in ('a', 'steeple', 'the');`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-24T17:07:46.523

如果要在单个参数中传递整个列表，请使用数组数据类型：

```
SELECT  *
FROM    word_weight
WHERE   word = ANY('{a,steeple,the}'); -- or ANY('{a,steeple,the}'::TEXT[]) to make explicit array conversion 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-16T15:39:25.597

如果您不确定该值，甚至不确定该字段是空字符串还是 null，那么，

```
.where("column_1 ILIKE ANY(ARRAY['','%abc%','%xyz%']) OR column_1 IS NULL") 
```

以上查询将涵盖所有可能性。

# asp.net - 如何通过母版页隐藏某些页面上的内容而不是其他页面上的内容？

> ID：10302545
> 
> 赞同：2
> 
> 时间：2012-04-24T17:01:26.763
> 
> 标签：asp.net, master-pages

阅读此线程，但并没有真正回答我的问题，并且有很多建议，所以不确定它们是否在正确的轨道上： [关于 asp 页面的母版页内容过滤](https://stackoverflow.com/questions/5893239/master-page-content-filtering-with-respect-to-asp-page)

我拥有的是一个有 1 个母版页的网站，其中有一个所有页面都使用的全局页脚。我只想消除一页（即登录页面）上的页脚，但保持所有其他母版页内容不变。

我知道我可以为这个登录页面创建一个单独的母版页，但这似乎有点过头了。有没有办法加入一些逻辑，如果它只是这个特定的页面，它会隐藏页脚，然后显示在所有其他页面上？

感谢您的任何提示/建议。

编辑：后面的代码中已经有一个页面加载子。我只需要添加 -`MasterPage_Footer.Visible = False`在用户未登录时的 If 语句上，并将其设置为用户`True`登录时。就像一个魅力。感谢所有的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T17:14:12.413

在 MasterPage 上公开一个属性以允许内容页面在需要时覆盖默认行为。

在母版页中：

```
private bool showFooter = true;

public bool ShowFooter { get {return showFooter;} set {showFooter = value;} }

protected void Page_Load(object sender, EventArgs e)
{
    footerControl.Visible = showFooter;
} 
```

确保需要访问该属性的内容页面在 aspx 中有以下行：

```
<%@ MasterType TypeName="XXX" %> 
```

并在内容页面代码隐藏中：

```
protected void Page_Load(object sender, EventArgs e)
{
    Master.ShowFooter = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:09:54.693

In your MasterPage:

```
protected void Page_Load(object sender, EventArgs e)
{
   var page = HttpContext.Current.Handler as Page;
   FooterControl.Visible = HttpRequest.IsAuthenticated && !(page is LoginPage)
} 
```

*   [HttpContext.Handler Property](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.handler.aspx)
*   [is (C# Reference)](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.100%29.aspx)

# javascript - 如何在连续之间获取文本/html年代？

> ID：10302546
> 
> 赞同：2
> 
> 时间：2012-04-24T17:01:28.727
> 
> 标签：javascript, jquery

由于输入标签不应该有结束标签，有没有一种简单的方法来提取一系列输入标签之间的文本/HTML？例如，对于下面我要检索的`<b>Bob and Tim</b><br>Tim <i>after</i> Bob<br>`.

```
<div id="inputs">
    <input type="text" value="bob" size="4" />
    <b>Bob and Tim</b><br>
    <input type="text" value="tim" size="4" />
    Tim <i>after</i> Bob<br>
    <input type="button" value="get textbox values" id="mybutton" />
</div>​ 
```

[http://jsfiddle.net/gLEZd/5/](http://jsfiddle.net/gLEZd/5/)

我可以获取文本框的值，但是如何完成上述操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:06:05.617

通过一个小的标记更改，您可以轻松地做到这一点，

HTML：

```
<div id="inputs">
    <input type="text" value="bob" id="bob" size="4" />
    <label for="bob"><b>Bob and Tim</b><br></label>
    <input type="text" value="tim" id="tim" size="4" />
    <label for="tim">Tim <i>after</i> Bob<br></label>
    <input type="button" value="get textbox values" id="mybutton" />
</div> 
```

JS：

```
$("#mybutton").click( function() {
  $.each($('input[type="text"]'), function() {
     alert($('label[for=' + this.id + ']').text());
  });
}); 
```

[**演示**](http://jsfiddle.net/skram/gLEZd/18/)

如果您不喜欢`label`标签，则只需将内容包装在如下所示的范围内，

```
<div id="inputs">
    <input type="text" value="bob" id="bob" size="4" />
    <span><b>Bob and Tim</b><br></span>
    <input type="text" value="tim" id="tim" size="4" />
    <span>Tim <i>after</i> Bob<br></span>
    <input type="button" value="get textbox values" id="mybutton" />
</div> 
```

在 JS 中，

```
$("#mybutton").click( function() {
  $.each($('input[type="text"]'), function() {
     alert($(this).next().text());
  });
}); 
```

[**演示**](http://jsfiddle.net/skram/gLEZd/11/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T17:47:06.710

小提琴中已经或多或少可用并在评论中说明。但这里也直接为其他代码提供了一个小的解释：

```
$("#mybutton").click( function() {
  var tempContainer = $("#inputs").clone();
  tempContainer.find("input").remove();
  alert(tempContainer[0].innerHTML);
});​ 
```

这样容器被克隆，然后输入从克隆的容器中删除......最后我们有一个没有输入的innerHTML

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T17:06:29.240

```
$("#mybutton").click( function() {
    var x = $('div#inputs :not(:input)');
    $.each(x, function() {
       console.log(this.innerHTML);
    });
}); 
```

**更新**

```
$("#mybutton").click( function() {
    var x = $('div#inputs :not(:input)').filter(function() {
        return this.toString();
    });
    console.log(x); // x is the array of DOM Object
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T17:20:54.500

不确定这是否可取，但您可以精简为如下文本：

```
alert ( $('#inputs').unwrap().text() ); 
```

不过，这也会剥离您的`<b></b>`标签和其他标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T17:06:50.757

理想情况下，如果信息链接到输入元素，您应该使用`<label for="">`. 然后您可以轻松访问关联的值：

```
<div id="inputs">
    <input id="input1" type="text" value="bob" size="4" />
    <label for="input1"><b>Bob and Tim</b><br></label>
    <input id="input2" type="text" value="tim" size="4" />
    <label for="input2 ">Tim <i>after</i> Bob<br></label>
    <input type="button" value="get textbox values" id="mybutton" />
</div> 
```

任何一个：

```
$("#mybutton").click( function() {
  $.each($('input[type="text"]'), function() {
    alert($(this).next('label').text());
  });
}); 
```

或者：

```
$("#mybutton").click( function() {
  $.each($('input[type="text"]'), function() {
    alert($('label[for='+this.id+']').text());
  });
}); 
```

# java - 使用来自 setId 的数据创建一个数组

> ID：10302549
> 
> 赞同：0
> 
> 时间：2012-04-24T17:01:35.750
> 
> 标签：java, getter

我几乎不知道Java（1周学习）。

```
List<User> u = new ArrayList<User>(); 
u.add(new User(1,5));
u.add(new User(2,4)); 
```

在这种情况下，数据从类的构造函数插入到数组中。但我必须使用 getter 和 setter 之类的东西：一个带有`setId(1,2,3,4)`and 的数组`setName('John','Mike','ellen','Bart')`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:03:41.550

```
Arraylist<User> u = new Arraylist<User>();

User user1 = new User(1,5);
user1.setId(1);
user1.setName('John');
u.add(user1);

User user2 = new User(2,4);
user2.setId(2);
user2.setName('Mike');
u.add(user2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:23:18.617

我猜您可能的意思是您需要使用 Array 或 List 的 name 和 id 方法，并使用 names[] 和 id[] 中的值添加用户。

假设您传递给 names[] 和 id[] 的数组始终具有相同的大小，您只需遍历数组，并且对于每个索引 i，

```
u.add(new User(id[i], names[i]); 
```

否则，您将需要对数组的大小进行额外检查。

# dojo - 为什么 dojo 的关闭对话框图标“X”使用跨度而不是锚标记？

> ID：10302551
> 
> 赞同：1
> 
> 时间：2012-04-24T17:01:46.993
> 
> 标签：dojo, dialog, anchor

我希望 dojo 对话框右上角的“X”是一个链接。将其编码为跨度是否有原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:24:57.260

' `dojo`x' 不是一个链接，它是一个按钮。

# .net - 以编程方式重新配置 NLog LoggingConfiguration 过滤器

> ID：10302561
> 
> 赞同：43
> 
> 时间：2012-04-24T17:02:46.773
> 
> 标签：.net, logging, nlog

这是我第一次使用 NLog 包进行日志记录，但到目前为止它很好用。

在我的场景中，我需要以编程方式初始化我的 NLog LoggingConfiguration 设置，而不是通过更典型的配置文件场景。我已经对此进行了测试，并且默认情况下它都按照我想要的方式工作。但是我将如何在运行时以编程方式修改我的设置？

这里最常见的情况可能是应用程序的日志记录级别默认设置为 ERROR 但在特定模块中出现错误，我想将日志记录级别切换为更详细以跟踪错误。

我想写一个小的网络界面，这样我就可以在运行时轻松地调整这些设置，但我想确保我采取了正确的方法。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-05-07T20:20:19.357

我知道我迟到了一年，但我遇到了类似的情况，我需要为用户提供对记录器的动态控制。幸运的是，使用 nlog 相对容易。在这里，我只是对已创建的 Logger 启用 Trace 级别日志记录，但显然您可以做任何您想做的事情，包括添加新的 Targets/Rules 或完全用您以编程方式生成的 LoggerConfiguration 替换。

基本 ColoredConsole nlog.config：

```
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <targets>
    <target xsi:type="ColoredConsole" name="c"
            layout="${longdate} ${uppercase:${level}} ${message}" />
  </targets>
  <rules>
    <logger name="*" minlevel="Error" writeTo="c" />
  </rules>
</nlog> 
```

简单的控制台应用程序：

```
public class Program 
{
  //Initialize default Logger from config file
  private static readonly Logger m_log = LogManager.GetCurrentClassLogger();

  public static Logger Log 
  {
      get { return m_log; }
  }

  public static void Main(string[] args) 
  {
    Log.Trace("You won't see me because config is at LogLevel.Error");
    EnabledTraceForAllRules();
    Log.Trace("You will see me now though!");

    //Pause console window
    Console.WriteLine("Press any key to continue...");
    Console.ReadKey(true);

    /* Prints:
    2013-05-07 16:04:22.7050 TRACE You will see me now though!
    Press any key to continue...
    */
  }

  public static void EnabledTraceForAllRules() 
  {
    foreach(var rule in LogManager.Configuration.LoggingRules)
    {
      rule.EnableLoggingForLevel(LogLevel.Trace);
    }

    //Call to update existing Loggers created with GetLogger() or 
    //GetCurrentClassLogger()
    LogManager.ReconfigExistingLoggers();
  }
} 
```

如果您需要从进程外部更改日志配置并且必须以编程方式完成，我建议您使用 WCF。您可以从您的应用程序或网站公开一个小型 WCF 服务，该服务提供重新配置 nlog 的方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T08:54:51.463

[我在 NLog 文档（ https://github.com/NLog/NLog/wiki/Configure-from-code](https://github.com/NLog/NLog/wiki/Configure-from-code) ）中找到了“配置 API” ，这可能对您有所帮助。查看 NLog 程序集中的 NLog.Config 命名空间。

另请参阅：[https ://github.com/NLog/NLog/wiki/Reinitialize-NLog-configuration](https://github.com/NLog/NLog/wiki/Reinitialize-NLog-configuration)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-12-30T19:21:00.270

NLog 4.6.7 引入了在 LoggingRules 中使用布局逻辑的能力。因此，您可以拥有一个 NLog.config，其中包含可在运行时轻松调整的日志记录规则：

```
<nlog>
   <variable name='myLevel' value='Warn'/>
    <rules>
      <logger minLevel='${var:myLevel}' writeTo="your-target-name" />
    </rules>
</nlog> 
```

然后可以`myLevel`在运行时更新：

```
LogManager.Configuration.Variables["myLevel"] = "Debug";
LogManager.ReconfigExistingLoggers(); 
```

另请参阅：[https ://github.com/NLog/NLog/wiki/Filtering-log-messages#semi-dynamic-routing-rules](https://github.com/NLog/NLog/wiki/Filtering-log-messages#semi-dynamic-routing-rules)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-12-30T19:15:51.710

我看到答案一次启用一个级别，但是如果您想反映 NLog.config 文件的行为，其中设置单个级别也会启用所有较高优先级（并禁用较低优先级），您需要启用一系列使用`SetLoggingLevels`这样的级别：

NLog.config：

```
 <rules>
    <logger name="*" minlevel="Trace" writeTo="your-target-name" />
  </rules> 
```

代码：

```
public static void SetLogLevel(LogLevel newLogLevel)
{
    foreach (var rule in LogManager.Configuration.LoggingRules)
    {
        foreach (var target in rule.Targets)
        {
            if (target.Name == "your-target-name")
            {
                rule.SetLoggingLevels(newLogLevel, LogLevel.Fatal);
            }

        }
    }

    LogManager.ReconfigExistingLoggers();
} 
```

来自 NLog 文档：

> ```
> public void SetLoggingLevels(LogLevel minLevel, LogLevel maxLevel); 
> ```
> 
> 启用记录（包括）`minLevel`和 之间的级别`maxLevel`。所有其他级别将被禁用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-08T11:07:36.800

```
using NLog;

private void SetLogLevel(LogLevel level)
{
  LogManager.GlobalThreshold = level;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-22T18:46:46.533

[NLog 教程页面上给出了](https://github.com/nlog/nlog/wiki/Tutorial)一个程序化的初始设置示例，我将其包含在下面。[（这里](https://github.com/nlog/NLog/wiki/Configuration-API)有一个更广泛的版本。）

```
public static void Startup()
{
    var config = new NLog.Config.LoggingConfiguration();

    // Targets where to log to: File and Console
    var logfile = new NLog.Targets.FileTarget("logfile") { FileName = "file.txt" };
    var logconsole = new NLog.Targets.ConsoleTarget("logconsole");

    // Rules for mapping loggers to targets            
    config.AddRule(LogLevel.Info, LogLevel.Fatal, logconsole);
    config.AddRule(LogLevel.Debug, LogLevel.Fatal, logfile);

    // Apply config           
    NLog.LogManager.Configuration = config;
    LogManager.ReconfigExistingLoggers();
} 
```

然后，要更改日志级别，`logconsole`您要更改的目标在哪里：

```
public static void SetConsoleLogLevel(LogLevel level)
{
    foreach (var rule in LogManager.Configuration.LoggingRules)
    {
        foreach (var ruleTarget in rule.Targets)
        {
            if (ruleTarget != logconsole) continue;

            DisableLoggingForLevels(rule, LogLevel.Trace, level);
            rule.EnableLoggingForLevels(level, LogLevel.Fatal);
            LogManager.GetCurrentClassLogger().Log(level, "Changed logger level to {0}", level);
        }
    }

    LogManager.ReconfigExistingLoggers();
} 
```

where`DisableLoggingForLevels`是一个私有方法，`NLog.Config.LoggingRule.EnableLoggingForLevels`除了它禁用：

```
private static void DisableLoggingForLevels(LoggingRule rule, LogLevel minLevel, LogLevel maxLevel)
{
    for (var ordinal = minLevel.Ordinal; ordinal <= maxLevel.Ordinal; ++ordinal)
        rule.DisableLoggingForLevel(LogLevel.FromOrdinal(ordinal));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-24T08:06:32.960

NLog 的大多数示例都使用某种 NLog 配置文件，但我希望有完全可重新配置的编程解决方案，如果你用纯代码执行它 - 它可能看起来像这样：

```
 var conf = new NLog.Config.LoggingConfiguration();
    var consoletarget = new ColoredConsoleTarget() { Layout = "${message}" };

    conf.AddTarget("console", consoletarget);
    //conf.LoggingRules.Add(new LoggingRule("*", NLog.LogLevel.Debug, consoletarget));
    //conf.LoggingRules.Add(new LoggingRule("*", NLog.LogLevel.Info, consoletarget));
    conf.AddRuleForAllLevels(consoletarget);

    NLog.LogManager.Configuration = conf;

    var log = NLog.LogManager.GetLogger("hello");

    log.Trace("trace");
    log.Debug("debug");
    log.Info("info");
    log.Warn("warn");
    log.Error("error");
    log.Fatal("fatal"); 
```

我留下了一些代码注释，以防万一您想重新配置将向最终用户显示的日志级别。（默认全部显示）

# java - 无法将 IMAPInputStream 转换为 Multipart

> ID：10302564
> 
> 赞同：3
> 
> 时间：2012-04-24T17:02:58.400
> 
> 标签：java, exception, jakarta-mail, multipart

在 Java 项目中，我可以接收来自 gmail 服务器的邮件。但我想收到身体的包裹部分。在这个代码示例中，我的最后一个`message(messages.length - 1)`是多部分/混合的。

调试在块上传递，`if`但它落入 catch 块并给了我这个消息：

> 线程“主”java.lang.ClassCastException 中的异常：com.sun.mail.imap.IMAPInputStream 无法转换为 javax.mail.Multipart

我该如何处理这个问题？

```
Message[] messages = folder.getMessages();
        ArrayList<String> attachments = new ArrayList<String>();
        for (int i = messages.length - 1; i >= 0; i--) {

            Part p = messages[i];
            if (messages[i].isMimeType("multipart/*")) 
            {           
                ***Multipart multipart = (Multipart) messages[i].getContent();***
                for (int j = 0, m = multipart.getCount(); j < m; j++) {

                    Part part = multipart.getBodyPart(j);
                    String disposition = part.getDisposition();
                    //
                    if (disposition != null
                            && (disposition.equals("ATTACHMENT"))) 
                    {
                        System.out.println(part.getFileName());
                        attachments.add(saveFile(MimeUtility.decodeText(part.getFileName()), part.getInputStream()));
                    }
                }
            }
        } 
```

## 编辑

我解决了使用仅用于**Java Project**的 mail.jar、additional.jar 和 activation.jar 的问题。

（我之前为我的 Android 项目下载了这些 jar。这是问题的根源。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-29T12:20:26.157

我在使用 Android JavaMail 阅读邮件附件时遇到了类似的问题。我已通过添加以下代码行来修复此错误。MailCap有问题，javamail找不到multipart/mixed部分的handler，所以需要加上这个位。这解决了我的问题。希望它可以帮助那里的人。

```
MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap();
mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
CommandMap.setDefaultCommandMap(mc); 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:26:19.977

这通常是因为 JAF 找不到将 MIME 类型映射到类的配置文件。该失败的最常见原因是您运行的环境没有正确设置线程的上下文类加载器。有关解决方法，请参阅[此 JavaMail 论坛主题](https://forums.oracle.com/forums/thread.jspa?threadID=2369993&tstart=0)。

此失败的第二个最常见原因是您将 mail.jar 文件中的类重新打包到自己的 jar 文件中，但忘记将配置文件包含在 META-INF 目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T20:38:08.877

只是好奇，类型架构表明它们来自不同的超类：

公共类 IMAPInputStream 扩展 java.io.InputStream {}

公共抽象类 Multipart {}

受保护的同步无效 Multipart::setMultipartDataSource(MultipartDataSource mp);

而 MultipartDataSource 被定义为 javax.mail.MultipartDataSource。

# php - 使用 php_exec 执行一次 2 shell 命令时出现问题

> ID：10302567
> 
> 赞同：0
> 
> 时间：2012-04-24T17:03:23.950
> 
> 标签：php, bash, shell, command-line, command

我想用“ php_exec ”执行一次 2 shell 命令，但它不适用于我。

我想做的是，我通过执行 php_exec 进入第一个界面，然后用 php_exec 执行另一个 shell 命令。在我看来它没有成功，我认为只有第一个 php_exec 不会执行第二个。

作为示例，我们使用“wget”下载带有 php_exec 的 zip 文件，然后使用 php_exec 解压缩文件。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:07:25.223

PHP isn't waiting for the shell commands to complete before moving on. You should combine your two shell commands into one.

```
exec('wget http://www/file.zip && unzip file.zip'); 
```

# python - 没有 SciPy 的 PDF 和 CDF

> ID：10302568
> 
> 赞同：1
> 
> 时间：2012-04-24T17:03:23.983
> 
> 标签：python, statistics, scipy

我需要在我正在编程的 Python 应用程序中使用概率和累积密度函数。SciPy 两者都提供，但对于这两个函数来说似乎过于依赖了。没有 SciPy，PDF 似乎很容易实现。（[来自文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.norm.html)：）

> 范数的概率密度函数是：
> 
> norm.pdf(x) = exp(-x**2/2)/sqrt(2*pi)

有没有办法在*不*使用 SciPy 的情况下获得 CDF？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:15:27.043

看到[这个帖子](https://stackoverflow.com/a/809402/915501)：

```
from math import *
def erfcc(x):
    """Complementary error function."""
    z = abs(x)
    t = 1\. / (1\. + 0.5*z)
    r = t * exp(-z*z-1.26551223+t*(1.00002368+t*(.37409196+
        t*(.09678418+t*(-.18628806+t*(.27886807+
        t*(-1.13520398+t*(1.48851587+t*(-.82215223+
        t*.17087277)))))))))
    if (x >= 0.):
        return r
    else:
        return 2\. - r

def ncdf(x):
    return 1\. - 0.5*erfcc(x/(2**0.5)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T17:11:00.340

您正在寻找“错误函数”，请参阅[数学模块](http://docs.python.org/library/math.html#special-functions)。[就初等函数](http://en.wikipedia.org/wiki/Elementary_function_%28differential_algebra%29)而言，它没有封闭形式的表示。

请注意，这`math.erf(x)`是在 python 2.7 中引入的。如果您使用的是较早的版本，则必须使用[近似](https://stackoverflow.com/a/809402/915501).

# c# - “IOException:invalid stream header: 00010000”在 TCP 上从 C# 主机到 Java 客户端获取数据时

> ID：10302570
> 
> 赞同：1
> 
> 时间：2012-04-24T17:03:28.350
> 
> 标签：c#, java, sockets, tcp, tcpclient

我是 Sockets 的新手，正在使用 C# 主机和 Java/Android 客户端进行项目。

我需要通过 TCP 套接字不断地从主机到客户端获取数据。在使用 DataInputStream 或 ObjectInputStream 获取数据时，我遇到了同样的问题“流标头无效”。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Net.Sockets;
using System.Net;
using System.Runtime.Serialization.Formatters.Binary;
using PacketAndroid;
namespace SampleForAndroid
{
  public class TCPListener
  {
      public  Socket SocketForClient;     
      public void StartListening()
      {
       try
       {
             TcpListener Listener = new TcpListener(5155);
             Listener.Start();
             SocketForClient = Listener.AcceptSocket();
             if (SocketForClient != null && SocketForClient.Connected)
             {
                 int i = 1;
                 while (SocketForClient.Connected && i<2)
                 {
                     NetworkStream NS = new NetworkStream(SocketForClient);
                     BinaryFormatter BF = new BinaryFormatter();
                     TCPPayLoad PayLoad = new TCPPayLoad();
                     Console.WriteLine(PayLoad.ToString());
                     NS.Flush();
                     BF.Serialize(NS, PayLoad);
                     i = 2;
             }
         }
     }
     catch (SocketException EX)
     {

     }
 }

   static void Main(string[] args)
    {

        TCPListener List = new TCPListener();
        System.Threading.Thread TcpThread=new System.Threading.Thread(new              System.Threading.ThreadStart(List.StartListening));
       TcpThread.Start();
       Console.ReadLine();
       }
     }
} 
```

和java客户端：

```
import java.io.BufferedInputStream;
import java.io.DataInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.net.InetAddress;
import java.net.Socket;

public class ObjectReceiver {
    public static void main(String argv[]) {
        fun_0();
    }

    @SuppressWarnings("unused")
    private static void fun_0() {
        ObjectInputStream ois = null;
        Socket socket = null;
        try {
            // open a socket connection

            socket = new Socket("127.0.0.1", 5155);

            System.out.println("Connecting...");

            ObjectInputStream din = new ObjectInputStream(socket.getInputStream());

            int size = din.readInt();
            System.out.println(din.read());

            byte[] bytes = new byte[size];
            int readBytes = din.read(bytes);
            System.out.println(readBytes);

            Object object = din.readObject();
            TcpPayload payload = (TcpPayload) object;
            System.out.println(payload.toString());

        } catch (IOException e) {
            System.out.println("IOException:" + e.getMessage());
        } catch (Exception e) {
            System.out.println("Exception:" + e.getMessage());
        }
    }
} 
```

对象**TcpPayload** 是一个类的实例，它只有抢占式数据类型和一个字符串。java和C#都具有相同的对象与序列化的实现。

请告诉我解决方案，我只有通过**客户端**调整代码的选择。主机已经与 iOS 客户端正常工作。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:18:14.363

不幸的是，二进制序列化在 C# (.NET) 和 Java 之间不兼容。我实际上记得不久前和你尝试过同样的事情，但失败了。

恐怕您需要找到一种替代编码方法，例如自定义 XML 或 JSON 序列化（实际上这使 Web 服务能够跨平台工作）。

# c# - 如何将数据表转换为 Intellisense 的相应“命名”和“类型”IEnumerable

> ID：10302573
> 
> 赞同：0
> 
> 时间：2012-04-24T17:03:35.507
> 
> 标签：c#, vb.net, linq, reflection, lambda

可能是一个重复，但我在发布之前尝试使用谷歌搜索和搜索。

假设一个包含列的 2 列表

年龄（int）和 EmpName（字符串）

可以通过简单的 dbTable.AsEnumerable() 将数据表转换为 IEnumerable

现在要执行任何 Linq，您必须知道列名，因为 Intellisense 不会拾取它，因为 AsEnumerable 已返回一堆您可以枚举的数据行。我使用了一个小的 2 col 表，但对于有很多列的表来说，这很痛苦。所以大多数时候我们会尝试类似的东西

```
var results = from p in dbTable.AsEnumerable()
            select new
            {
               name = p.Field<string>("name"),
               age = p.Field<int>("age")
            }; 
```

现在终于当我们输入结果并按下 。（点）智能感知将在下拉列表中显示姓名和年龄。问题：使用反射查询列名和列类型我该怎么做

```
var results = YourMagicRoutine(dbTable);
//You can use lambda etc instead of method call in above line 
```

结果现在应该智能感知并显示正确的列名

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:09:34.573

你不能。您需要在编译时了解有关列的信息才能获得智能感知。您可以在运行时创建一个查看数据表列并创建属性的魔术对象，但*该*对象将没有任何智能感知。

如评论中所述，如果您将数据存储在特定于该类型的类中，而不是通过数据表，则不会出现此问题。如果没有，您需要手动将每一行转换为其他类型（无论是否匿名）以从中获取智能感知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:11:57.640

您可以使用反射在**运行时**构造类型；但是，它在**设计时**没有用，智能感知实际上发生在设计时！

* * *

但是，您可以使用 O/R 映射器的魔力。O/R-mappers 将数据库表映射到类。您无需使用 DataSet、Tables、Rows 和 TableAdapter，而是使用域对象。使用 O/R-mapper 你会像这样工作

```
List<Person> people = dbContext.Query<Person>()
    .Where(p => p.Name.StartsWith("A"))
    .OrderBy(p => p.Age)
    .ToList(); 
```

周围有很多 O/R 映射器。因此，我在这里不指具体的一个。

# android - 使用 SQLite 显示 ListView

> ID：10302577
> 
> 赞同：0
> 
> 时间：2012-04-24T17:03:45.337
> 
> 标签：android, database, sqlite, android-listview

我正在进行的项目的一部分是在数据库中搜索地点。用户首先选择一个类别，然后搜索条件和结果应显示在列表视图中，其中项目来自数据库。只有一个可以正常工作，而其他的则不能，即使它们具有相似的代码。

第一个搜索类别是`Hotel`s，它工作得很好，其余类别工作不正常，方法正确但显示数据错误，而不是显示名称，而是显示 packageName.tableName@weirdNumber example( `egypt.database.NileCruise@44f40448`)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:14:38.657

默认情况下`ArrayAdapter`，将调用`toString`对象上的方法`String`以在列表行中显示一个。

您可能为该类实现了该方法`toString`，`Hotel`但忘记为该类实现它，`NileCruise`最终得到了`toString`（返回您当前看到的内容）的默认实现。

# ruby - bundler 可以从裸 git repo 安装 gems 吗？

> ID：10302578
> 
> 赞同：1
> 
> 时间：2012-04-24T17:03:48.930
> 
> 标签：ruby, git, gem, bundler

因此，阅读[http://git-scm.com/book/en/v1/Git-on-the-Server-Public-Access](http://git-scm.com/book/en/v1/Git-on-the-Server-Public-Access)，我正在尝试按照简单 http 服务器上的说明设置一个裸仓库（没有 git -daemon，我需要一个吗？）。

我的 gem 在根目录中有一个 gemname.gemspec ，一切看起来都很好。

在使用 Gemfile 时：

```
gem 'gemname', :git => 'http://path' 
```

那好吧

```
> bundle install
...
Installing blah...
Using gemname (1.0.0) from source at 'http://path'
... 
```

一切似乎都很好，直到我列出了宝石并且“gemname”不存在。要求也失败。

那么，计划#2：由于我们将服务器镜像为路径，我想我将使用没有 git repo 的 gem 的直接路径：

```
gem 'gemname', :path => 'path/to_gemname' 
```

再次，捆绑器说好的。

```
Using gemname (1.0.0) from source at 'path/to_gemname' 
```

但同样，没有安装它或从应用程序中正确引用它。

关于这应该如何工作的任何想法（即正确的目录布局等）还是我需要一个真正的 git/gem 服务器来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:15:53.817

你需要先使用[`Bundler.setup`](http://gembundler.com/bundler_setup.html)。

```
require "rubygems"
require "bundler/setup"

require "gemname"

# use gemname 
```

您可能还会发现调用`Bundler.require`. 这将自动要求 Gemfile 中的所有 gem。无需调用`require "gem name"`您使用的每颗宝石。

```
require "rubygems"
require "bundler/setup"

Bundler.require

# use any gem in Gemfile 
```

也看看这个类似的答案，它提供了上述代码的更复杂的版本：[Bundler is not loading gems](https://stackoverflow.com/questions/2170697/bundler-isnt-loading-gems#answer-2214441)

`bundle list`您可以通过在命令行窗口中键入来检查一切是否正常。您应该会看到类似以下内容。

```
$ bundle list
Gems included by the bundle:
  * bundler (1.1.3)
  * some_dependency (0.0.1)
  * gemname (1.2.3 <git-sha-hash>) 
```

# php - 一个stdClass的PHP数组，如何获取数据？

> ID：10302579
> 
> 赞同：7
> 
> 时间：2012-04-24T17:03:58.587
> 
> 标签：php, arrays, stdclass

我想打印 [name] 的值。我刚刚熟悉[标准定义的类](http://www.php.net/manual/en/reserved.classes.php)以及它们的调用方式。

基于这个例子和逻辑

```
$arrayobj = new ArrayObject(array('first','second','third'));
print_r($arrayobj);
//outputs: ArrayObject Object ( [0] => first [1] => second [2] => third ) 
```

接着就，随即。我正在尝试从这里提取名称 (Pebbles) 的值。

```
print_r($terms);
/* outputs
Array ( [3] => stdClass Object ( [term_id] => 3 [name] => Pebbles ) )
*/ 
```

所以我尝试了

```
echo $terms[0]->name; 
```

有花生。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T17:05:27.803

列出的唯一数组键是`[3]`( `Array ( [3] => stdClass...`)，所以使用

```
echo $terms[3]->name; 
```

尽管它是一个数字索引数组，但这并不意味着它以索引 0 开始，甚至具有顺序键。

通过循环获取它们：

```
foreach ($terms as $t) {
   echo $t->name;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T17:09:09.547

Correct me if I am wrong, but you can typecast them.

```
$terms = (array) $terms; 
```

Will make it a normal array accessible through:

```
$terms[3]['name'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T17:05:32.327

您可以使用以下内容：

```
echo $terms[3]->name ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-08T06:13:32.933

要显示对象字段名称的值，可以使用以下命令：

```
 echo $this[3]->name; 
```

# java - 如何对带注释的类型进行 AnnotationProcessor 测试 *subtypes*？

> ID：10302580
> 
> 赞同：1
> 
> 时间：2012-04-24T17:04:02.323
> 
> 标签：java, annotation-processing

我希望创建一个注释来测试带注释的类型（可能是接口）及其所有子类型，如果任何测试的类型是没有无参数构造函数的具体类，则会引发编译错误。我能够测试实际带有注释的类型，没问题。测试亚型是我迷路的地方。我怎样才能做到这一点？源代码如下：

## NoArgConstructorRequired.java

```
package mshare.annotation;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Retention(RetentionPolicy.SOURCE)
@Target(ElementType.TYPE)
public @interface NoArgConstructorRequired {
} 
```

## NoArgConststructorRequiredProcessor.java

```
package mshare.annotation;

import java.util.Set;

import javax.annotation.processing.AbstractProcessor;
import javax.annotation.processing.Messager;
import javax.annotation.processing.RoundEnvironment;
import javax.annotation.processing.SupportedAnnotationTypes;
import javax.annotation.processing.SupportedSourceVersion;
import javax.lang.model.SourceVersion;
import javax.lang.model.element.Element;
import javax.lang.model.element.ElementKind;
import javax.lang.model.element.Modifier;
import javax.lang.model.element.TypeElement;
import javax.lang.model.type.ExecutableType;
import javax.lang.model.type.TypeVisitor;
import javax.lang.model.util.SimpleTypeVisitor7;
import javax.tools.Diagnostic;

@SupportedAnnotationTypes("mshare.annotation.NoArgConstructorRequired")
@SupportedSourceVersion(SourceVersion.RELEASE_7)
public class NoArgConstructorRequiredProcessor extends AbstractProcessor {
    // Tests if the visited type has no args
    private static final TypeVisitor<Boolean, Void> NO_ARGS_VISITOR = new SimpleTypeVisitor7<Boolean, Void>() {
        @Override
        public Boolean visitExecutable(ExecutableType t, Void v) {
            return Boolean.valueOf(t.getParameterTypes().isEmpty());
        }
    };

    @Override
    public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment roundEnv) {
        Messager messager = processingEnv.getMessager();

        for (TypeElement typeElement : annotations) {
            for (Element element : roundEnv.getElementsAnnotatedWith(typeElement)) {
                if (!isOkay(element)) {
                    messager.printMessage(
                            Diagnostic.Kind.ERROR,
                            element.getSimpleName() + " lacks a no-arg constructor",
                            element
                            );
                }
            }
        }

        return true;
    }

    private static boolean isOkay(Element element) {
        if (element.getModifiers().contains(Modifier.ABSTRACT)) {
            // class is not concrete
            return true;
        }

        for (Element subElement : element.getEnclosedElements()) {
            if (subElement.getKind() == ElementKind.CONSTRUCTOR) {
                if (subElement.asType().accept(NO_ARGS_VISITOR, null).booleanValue()) {
                    // has a no-arg constructor
                    return true;
                }
            }
        }

        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:10:46.517

Perhaps the annotation should be marked [`@Inherited`](http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Inherited.html), which marks annotations as "descending through subclasses."

# encoding - preg_match 在应该只匹配一个字符时匹配两个字符

> ID：10302582
> 
> 赞同：0
> 
> 时间：2012-04-24T17:04:08.317
> 
> 标签：encoding, preg-match

我正在尝试从字符串中提取特殊字符（从预定义的模式中），但是当该字符串以倒置问号开头时，“匹配”会返回前两个字符，包括一个非特殊字符。例如。：

```
$string = '¿hola?';

$string2 = mb_convert_encoding($string, 'UTF-8');
$regex =  mb_convert_encoding('/[a-zäáàëéèíìöóòúùñç]/', 'UTF-8');

if(preg_match($regex, $string2, $matches, PREG_OFFSET_CAPTURE))
{

  //--> We pick the special characters into "$resultado1":
  $resultado1 = mb_substr($string, 0, $matches[0][1],'UTF-8');

  return $resultado1;
} 
```

在此示例中，该函数返回“¿h”，但应为“¿”...我无法弄清楚问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:01:18.297

尝试在您的正则表达式中使用标志“u”（如[本页](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)所述）：`/[a-zäáàëéèíìöóòúùñç]/u`

并且更喜欢将文件保存为 UTF-8，而不是在静态字符串上使用 mb_convert_encoding。

# php - XPath 查询以获取 javascript 参数

> ID：10302586
> 
> 赞同：1
> 
> 时间：2012-04-24T17:04:16.973
> 
> 标签：php, xpath, onclick, arguments

我刚刚开始在 php 中使用 XPath 查询，虽然很多都是不言自明的，但如果有可能获得 onclick() 函数的值，我会措辞。

一个例子

```
<a id="moreButton" onclick="showMore('#content','/page/2');">Show More</a> 
```

我想出的最好的是`//a[@id='moreButton']/@onclick`哪个返回`showMore('#content','/page/2');`

我可以进一步改进它只返回`/page/2`还是只需要使用 php 来解析我所拥有的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:10:38.450

**实际上，这*可以*通过评估以下 XPath 表达式来产生**：

**对于`onclick`属性中指定的函数的第一个参数：**

```
substring-before(substring-after(/*/@onclick, '('), ',') 
```

**对于`onclick`属性中指定的函数的第二个参数：**

```
substring-before(
     substring-after(substring-after(/*/@onclick, '('), ','),
     ')'
                ) 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
   "substring-before(substring-after(/*/@onclick, '('), ',')
   "/>
  ===========

   <xsl:copy-of select=
   "substring-before(
         substring-after(substring-after(/*/@onclick, '('), ','),
         ')'
                    )
   "/>

 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<a id="moreButton"
  onclick="showMore('#content','/page/2');">Show More</a> 
```

**计算两个 XPath 表达式，并将计算结果复制到输出：**

```
'#content'
===========

'/page/2' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:14:52.573

你必须用别的东西来解析它，XPath 不理解 JavaScript

# spring - 如何基于JAAS(Authorization)实现多个Web应用的单点登录

> ID：10302588
> 
> 赞同：1
> 
> 时间：2012-04-24T17:04:23.870
> 
> 标签：spring, jakarta-ee, spring-security, jaas

我开始使用 SSO 研究 JAAS，我对 JAAS 有一些疑问。JAAS（Java Authentication and Authorization Service）框架，以迎合多种身份验证机制。SSO 服务器根据自己的数据库或外部目录服务器验证登录信息，并返回登录用户可以执行的会话上下文和应用程序列表。在这里，我想再实现一个 Web 应用程序。据我所知， SSO JAAS 将返回会话上下文。在我的客户端 Web 应用程序中，我已经拥有用于身份验证的 acegi 安全性，使用我的 acegi 安全性如何从我的 SSO JAAS 获取会话上下文进行授权。我正在尝试找出任何配置示例，但我仍然没有得到任何解决示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:32:09.753

看看这个[spring 安全配置](http://code.google.com/p/kexamples/source/browse/trunk/jasig/springclient/WEB-INF/applicationContext-security.xml?r=7)。它不完全是你想要的，但它会告诉你方向

关键点

*   检查如何使用 PreAuthenticatedAuthenticationProvider 定义身份验证管理器。preAuthenticatedUserDetailsS​​ervice 属性定义了一个 bean，它允许您从 JAAS Authentication 对象创建 Spring Security UserDetails 对象
*   j2eePreAuthFilter 过滤器是将 JAAS 的安全性委托给 spring 安全性的过滤器。

剩下的是标准的spring安全配置

希望它有点帮助

# php - 如何关联 Symfony 2 和 Doctrine 中的实体？

> ID：10302589
> 
> 赞同：1
> 
> 时间：2012-04-24T17:04:29.343
> 
> 标签：php, symfony

如何使用 Symfony 2 和 Doctrine 创建实体之间的关系？我只能创建独立的实体。也许有人可以帮助我使用实体生成器解决这个问题？我想要：

*   创建两个实体：帖子和类别。帖子是类别的一部分。
*   创建一个标签实体：一个帖子可以有很多标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T17:19:40.617

Symfony2 文档中介绍了一个实际示例：

[http://symfony.com/doc/current/book/doctrine.html#entity-relationships-associations](http://symfony.com/doc/current/book/doctrine.html#entity-relationships-associations)

为了详细说明，以第一个示例为例，您需要在对象和对象`OneToMany`之间创建关系：`Category``Post`

类别.php：

```
<?php

namespace Your\CustomBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Table(name="category")
 * @ORM\Entity()
 */
class Category
{
    /**
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\OneToMany(targetEntity="Post", mappedBy="category")
     */
    public $posts;

    /**
     * Constructor
     */
    public function __construct()
    {
        $this->posts = new ArrayCollection();
    }

    /**
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }
} 
```

Post.php

```
<?php

namespace Your\CustomBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Table(name="post")
 * @ORM\Entity()
 */
class Post
{
    /**
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\ManyToOne(targetEntity="Category", inversedBy="posts")
     */
    public $category;

    /**
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }
} 
```

这应该让你开始。我刚刚写了这个，所以可能会有错误：s

为简洁起见，我在这里制作属性`$posts`和`$category`公开；~~但是，您可能会被建议将这些设为私有并将 setter/getter 添加到您的 classes~~中。

另请注意，这`$posts`是一个类似数组的 Doctrine`ArrayObject`类，特别是用于排列实体，具有诸如`$category->posts->add($post)`etc之类的方法。

有关更多详细信息，请查看 Doctrine 文档中的关联映射。您可能需要在和之间建立`ManyToMany`关系。`Posts``Tags`

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:43:21.103

您不会创建与实体生成器本身的关系。

一旦实体类本身存在（使用实体生成器创建或手工编写），您就可以编辑它们以添加关系。

例如，您的帖子有很多标签示例

```
namespace Your\Bundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Your\Bundle\Entity\Post
 *
 * @ORM\Table(name="post")
 * @ORM\Entity
 */
class Post
{
  /**
   * @var \Doctrine\ORM\PersistentCollection
   *
   * @ORM\OneToMany(targetEntity="Tag", mappedBy="post", cascade={"persist"})
   */
  private $tags;
} 
```

有关指定关系的更多信息，请参阅[Doctrine 的文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html)。

# c++ - g++ 的 ifstream 错误，但使用 Visual Studio 编译

> ID：10302591
> 
> 赞同：3
> 
> 时间：2012-04-24T17:04:34.540
> 
> 标签：c++, visual-studio, compiler-errors, g++

我一直在将 Visual Studio 用于我正在处理的项目，尽管它还必须在 Linux 上使用 GCC 进行编译。我已经完成了我的项目并且它运行良好，但是我将文件发送到我的 Linux shell 并且我收到了一个带有一行代码的错误：

```
std::ifstream input(s); 
```

这给了我一个错误，说没有匹配的功能。`s`顺便说一句`std::string`。任何人都可以告诉我为什么它在 Visual Studio 下而不是 GCC 下运行，即使我正在查看 ifstream 的文档？也许是旧版本的 GCC？

**编辑**：GCC 版本是 4.2.1 确切的错误是：

```
error: no matching function for call to 'std::basic_ifstream<char,  
std::char_traits<char>>::basic_ifstream(std::string&)' 
```

**编辑2：**相关代码：

```
std::string s = "";
if(argc == 2)
    s = argv[1];
else{
    std::cout << "Bad filename?" << std::endl;
    return 1;
}
std::ifstream input(s); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T17:07:27.003

Download latest version of GCC, and compile your program with `-std=c++0x` option. In C++11, stream classes has constructor which takes `std::string` as argument, and GCC by default doesn't enable C++11, so you need to enable by providing `-std=c++0x` compiler option.

If you cannot use C++11, then do this:

```
std::ifstream input(s.c_str()); 
```

This should compile, both in C++03 and C++11.

# c - 在c中初始化结构

> ID：10302594
> 
> 赞同：0
> 
> 时间：2012-04-24T17:04:39.190
> 
> 标签：c, variable-assignment

```
 typedef struct Node{
        int x;
        int y;
        struct Node* next;
    }Node; 
```

我想以这种方式在主“列表”中创建：

```
int main(){
        Node list;
 } 
```

而不是这样：

```
int main(){
        Node list = {1,2,NULL};
    } 
```

我想在 struct 的声明中初始化一个 struct 尝试这种方式：

```
 typedef struct Node{
        int x;
        int y;
        struct Node* next;
    }Node = {1,2,NULL}; 
```

**错误 C2513：“节点”：在“=”之前没有声明变量**

**需要帮忙**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T17:07:35.487

You can't give structure members predefined values in C. Use a constructor-like function or a constructor-like macro.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:14:28.857

typedef（或结构）“语句”定义了一个类型，而不是一个对象。

类型没有价值。只有谈论与对象相关的价值才有意义。

对象没有默认值（`0`隐式初始化除外）。

所以你不能做你想做的事。

# android - 在基于 Dungeons 的计费服务中，bindService 返回 NullPointerException

> ID：10302598
> 
> 赞同：1
> 
> 时间：2012-04-24T17:05:04.853
> 
> 标签：android, service, nullpointerexception, billing

我正在实施基于 Dungeons 示例的计费服务（这是 Google 推荐的方式）。以下事实使情况稍微复杂：

1.  主要服务类位于库项目中（因为我想多次重新设计代码）。由于[此 stackoverflow 答案](https://stackoverflow.com/a/5906026/808808)表明库项目中的服务可能会导致问题，因此我已将服务抽象化并在子项目中继承它；这也让我可以为每个 reskin 使用不同的公钥（这是可取的）。
2.  有很多 UI 元素需要尽快了解是否支持计费。

因此，我正在调用一个函数来检查`onCreate()`第一个活动运行的方法是否支持计费（实际上是任何活动，但随后将编写一个首选项，因此这只应该发生一次）。

在 Dungeons 示例中，检查是否支持计费的代码尝试绑定到计费服务（来自`Service`类）：

```
boolean bindResult = bindService(
    new Intent(Consts.MARKET_BILLING_SERVICE_ACTION),
    this,  // ServiceConnection.
    Context.BIND_AUTO_CREATE); 
```

这个电话正在抛出一个`NullPointerException`. 我已经非常仔细地检查过，这些东西都不是空的；它发生*在*函数中，显然在 ContextWrapper.java 的第 370 行。

由于[这个其他的stackoverflow答案](https://stackoverflow.com/a/5771233/808808)，我想知道是否检查账单`onCreate()`可能为时过早，但是Dungeons示例项目再次从这里调用它，所以我不认为是这样。

我使用的是更高版本的 Android (3.1)，因此可能会产生影响，但我很想知道可能的原因。另一件事：Eclipse 告诉我`customIntent`它是空的，但它指的是什么并不完全清楚，我也找不到太多关于它的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:45:50.510

答案非常非常简单：我错过了这一步`Activity#onCreate`：

```
mBillingService = new BillingService()

//THIS STEP IS THE CRITICAL STEP
mBillingService.setContext(this);
//IF ONLY I HAD KNOWN

mBillingService.checkBillingSupported(); 
```

这叫`attachBaseContext(context);`

它现在可以工作了:)

# tomcat - Cas无法在tomcat上运行

> ID：10302601
> 
> 赞同：1
> 
> 时间：2012-04-24T17:05:24.393
> 
> 标签：tomcat, cas

我正在尝试在 tomcat 6.0.35 上配置 CAS 3.4.11 以实现我想在我的 grails 应用程序中实现的 SSO 登录。我已将 authenticationHandlers 更改为以下内容：

```
<property name="authenticationHandlers">
        <list>
            <bean class="org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler"
                  p:httpClient-ref="httpClient" />
            <bean class="org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler">
                <property name="passwordEncoder" ref ="passwordEncoder" />
                <property name="dataSource" ref="dataSource" />
                <property name="sql" value=" select user_password from user where lower(user_name) = lower(?) " />
            </bean>
        </list>
</property> 
```

和密码编码器：

```
<bean id="passwordEncoder" class="org.jasig.cas.authentication.handler.DefaultPasswordEncoder">
 <constructor-arg index="0" value="MD5" />
</bean> 
```

但是当我启动 tomcat 服务器时，密码编码器部分出现错误。我收到如下错误“无法创建内部 bean org.jasig.cas.authentication.handler.DefaultPasswordEncoder”我很困惑，在这一点上的任何帮助将不胜感激。

* * *

这是日志&感谢您的回复

`2012-04-25 14:38:58,615 INFO [org.jasig.cas.services.DefaultServicesManagerImpl] - Loaded 4 services. 2012-04-25 14:38:58,748 ERROR [org.jasig.cas.web.init.SafeContextLoaderListener] - SafeContextLoaderListener: The Spring ContextLoaderListener we wrap threw on contextInitialized. But for our having caught this error, the web application context would not have initialized. org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'centralAuthenticationService' defined in ServletContext resource [/WEB-INF/spring-configuration/applicationContext.xml]: Cannot resolve reference to bean 'authenticationManager' while setting bean property 'authenticationManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'authenticationManager' defined in ServletContext resource [/WEB-INF/deployerConfigContext.xml]: Cannot create inner bean 'org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler#111bfbc' of type [org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler] while setting bean property 'authenticationHandlers' with key [1]; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler] for bean with name 'org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler#111bfbc' defined in ServletContext resource [/WEB-INF/deployerConfigContext.xml]; nested exception is java.lang.ClassNotFoundException: org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291) at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288) at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190) at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580) at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425) at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276) at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) at org.jasig.cas.web.init.SafeContextLoaderListener.contextInitialized_aroundBody0(SafeContextLoaderListener.java:62) at org.jasig.cas.web.init.SafeContextLoaderListener.contextInitialized_aroundBody1$advice(SafeContextLoaderListener.java:44) at org.jasig.cas.web.init.SafeContextLoaderListener.contextInitialized(SafeContextLoaderListener.java:1) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206) at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601) at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943) at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778) at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504) at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317) at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324) at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142) at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065) at org.apache.catalina.core.StandardHost.start(StandardHost.java:840) at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057) at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463) at org.apache.catalina.core.StandardService.start(StandardService.java:525) at org.apache.catalina.core.StandardServer.start(StandardServer.java:754) at org.apache.catalina.startup.Catalina.start(Catalina.java:595) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289) at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'authenticationManager' defined in ServletContext resource [/WEB-INF/deployerConfigContext.xml]: Cannot create inner bean 'org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler#111bfbc' of type [org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler] while setting bean property 'authenticationHandlers' with key [1]; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler] for bean with name 'org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler#111bfbc' defined in ServletContext resource [/WEB-INF/deployerConfigContext.xml]; nested exception is java.lang.ClassNotFoundException: org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:281) at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:120) at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353) at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:153) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291) at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288) at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190) at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322) ... 42 more Caused by: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler] for bean with name 'org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler#111bfbc' defined in ServletContext resource [/WEB-INF/deployerConfigContext.xml]; nested exception is java.lang.ClassNotFoundException: org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1250) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:433) at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:270) ... 54 more Caused by: java.lang.ClassNotFoundException: org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680) at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526) at org.springframework.util.ClassUtils.forName(ClassUtils.java:257) at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:408) at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1271) at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1242) ... 56 more`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:10:11.087

> 找不到在 ServletContext 资源 [/WEB-INF/deployerConfigContext.xml] 中定义的名称为 'org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler#111bfbc' 的 bean 的类 [org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler]；

意味着它在 WEB-INF/lib 中找不到 jdbc 类的 jar。特别是 cas-server-support-jdbc-VERSION.jar 和/或其 2 个依赖项。

假设您按照 CAS/jasig 的建议通过 Maven 部署它：

最佳实践是将其添加到源中的 pom.xml 并重新部署它。（在重建之前，您应该比较 deployerConfigContext 和 spring-configuration 中的任何更改并将其复制回源。）

```
<dependency>
  <groupId>org.jasig.cas</groupId>
  <artifactId>cas-server-support-jdbc</artifactId>
  <version>3.4.11</version>
</dependency> 
```

否则，您将在数小时内跟踪依赖关系并解决版本兼容性问题。

如果您没有通过 WAR/Maven 部署它，请开始寻找 cas-server-support-jdbc-xyzjar 来支持您的服务器并将其安装在 web-inf/lib 中，重新启动 tomcat 并查看下一个依赖项是什么。

# android - 2列布局

> ID：10302604
> 
> 赞同：2
> 
> 时间：2012-04-24T17:05:29.253
> 
> 标签：android, layout

是否可以使用 Linearlayout 创建 2 列？类似于附加图像的东西： [布局 http://dl.dropbox.com/u/16134555/layout.png](http://dl.dropbox.com/u/16134555/layout.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T17:09:14.310

是的，这很容易。

```
<LinearLayout android:layout_width="fill_parent" android:layout_height="fill_parent"
 android:orientation="horizontal">

     <LinearLayout android:layout_width="0dp" android:layout_height="fill_parent" 
     android:layout_weight="1"
     android:orientation="vertical">
     <!-- child views -->
     </LinearLayout>

     <LinearLayout android:layout_width="0dp" android:layout_height="fill_parent" 
     android:layout_weight="1" android:orientation="vertical">
     <!-- child views -->
     </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:06:51.247

是的，您可以使用带有两个内部线性布局的线性水平线性布局。

```
<LinearLayout android:orientation="horizontal">
<LinearLayout />
<LinearLayout />
</LinearLayout> 
```

# mysql - MySql 查看性能

> ID：10302615
> 
> 赞同：84
> 
> 时间：2012-04-24T17:06:28.987
> 
> 标签：mysql, database, performance, optimization, views

如果你走的是使用视图的道路，你如何确保良好的性能？

还是最好不要一开始就使用视图，而只是将等效的内容合并到您的选择语句中？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-04-30T07:15:28.367

# 这取决于。

这完全取决于您通过视图查看的内容。但很可能会减少您的工作量并提供更高的性能。当 SQL 语句引用非索引视图时，解析器和查询优化器分析 SQL 语句和视图的来源，然后将它们解析为单个执行计划。SQL 语句没有一个计划，视图也没有一个单独的计划。

**未编译视图**。它是由其他表组成的虚拟表。当您创建它时，它并不驻留在您的服务器上的某个位置。构成视图的底层查询受到查询优化器相同的性能增益或叮当声的影响。我从未测试过视图 VS 其底层查询的性能，但我想性能可能会略有不同。如果数据相对静态，您可以在索引视图上获得更好的性能。这可能是您在“编译”方面的想法。

# 视图的优点：

1.  查看数据而不将数据存储到对象中。
2.  限制表的视图，即可以隐藏表中的某些列。
3.  连接两个或多个表并将其作为一个对象显示给用户。
4.  限制对表的访问，使任何人都不能将行插入到表中。

# 查看这些有用的链接：

1.  [VIEW 与 SQL 语句的性能](https://stackoverflow.com/questions/1867896/performance-of-view-vs-sql-statement)
2.  [视图比简单查询快吗？](https://stackoverflow.com/questions/439056/is-a-view-faster-than-a-simple-query)
3.  [Mysql VIEWS 与 PHP 查询](https://stackoverflow.com/questions/4426919/mysql-views-vs-php-query)
4.  [MySql 视图是动态且高效的吗？](https://stackoverflow.com/questions/4886874/are-mysql-views-dynamic-and-efficient)
5.  [物化视图与表格：有什么优势？](https://stackoverflow.com/questions/4218657/materialized-view-vs-tables-what-are-the-advantages)
6.  [查询视图是否比直接执行 SQL 慢？](https://stackoverflow.com/questions/4630633/is-querying-over-a-view-slower-than-executing-sql-directly)
7.  [TEMPTABLE 视图性能问题的解决方法](http://www.mysqlperformanceblog.com/2010/05/19/a-workaround-for-the-performance-problems-of-temptable-views/)
8.  ~~[在 SQL Server 中使用索引视图查看性能提升](http://www.techrepublic.com/article/see-performance-gains-by-using-indexed-views-in-sql-server/6160148)~~

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-28T05:48:30.187

这是一个 tl;dr 摘要，您可以从 Peter Zaitsev 和其他地方找到详细的评估。

MySQL 中的视图通常是个坏主意。在 Grooveshark，我们认为它们是有害的，并始终避免使用它们。如果你小心，你可以让它们工作，但充其量它们是一种记住如何选择数据或让你不必重新输入复杂连接的方法。在最坏的情况下，它们会导致大量的低效率、隐藏复杂性、导致意外的嵌套子选择（需要临时表并导致磁盘抖动）等。

最好避免它们，并将您的查询保留在代码中。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-27T07:56:19.740

我认为 Peter Zaitsev 的博客包含了大部分细节。如果您通常保持简单，那么从个人经验来看，它们的效果会很好。在我的一个客户中，他们不断地将一个视图叠加在另一个视图之上，结果却是一场性能噩梦。

通常我使用视图来显示表格的不同方面。例如，在我的员工表中向我显示经理或对非 HR 员工隐藏薪水字段。还要始终确保在查询和视图上运行 EXPLAIN 以准确了解 MySQL 内部发生的情况。

如果您想在您的场景中获得可靠的证据，我建议您进行测试。真的很难说使用视图总是一个性能杀手，那么糟糕的视图可能会扼杀你的性能。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-28T16:45:06.497

它们服务于它们的目的，但隐藏的复杂性和低效率通常超过更直接的方法。我曾经遇到一个 SQL 语句，它连接两个视图，并对结果进行排序。视图也在排序，所以执行时间可以用几小时来衡量。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-12-05T12:49:16.120

到目前为止没有提到但产生巨大差异的事情是视图***源*****表****的充分索引***。*

 *如上所述，**视图并不驻留在您的数据库中**，而是**每次都重新构建**。因此，使数据库的重建更容易的一切都会提高视图的性能。

通常，视图连接数据的方式对存储非常不利（非正常形式），但对进一步使用（进行分析、向用户呈现数据……）非常有利，从而连接和聚合来自不同表的数据。

进行操作的列是否被索引对视图的性能有很大的影响。**如果表及其相关列已被索引，则访问视图不会以一遍又一遍地重新计算索引而告终**。（不利的一面是，这是在源表中操作数据时完成的）

**！索引 CREATE VIEW 语句中 JOINS 和 GROUP BY 子句中使用的所有列！**

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-27T08:00:44.160

如果我们讨论的是“如果你使用视图，如何确保性能”，而不是一般视图的性能效果，我认为它归结为克制（就像你自己一样）。

如果您只是编写视图以使您的查询在所有情况下都很简单，那么您可能会遇到大麻烦，但不要注意您的视图实际上在性能方面很有用。您最终所做的任何查询都应该运行正常（请参阅@eggyal 链接中的评论示例）。当然，这是一个重言式，但因此没有任何价值

您尤其需要小心不要从视图中创建视图，因为这可能会使创建该视图更容易。

最后，您需要查看使用视图的原因。每当您这样做以使编程端的生活更轻松时，恕我直言，您可能会更好地使用存储过程。

为了控制事情，你可能想写下为什么你有一个特定的观点，并决定你为什么使用它。对于您的编程中的每一个“新”用途，重新检查您是否真的需要该视图，为什么需要它，以及这是否仍然会给您一个合理的执行路径。继续检查您的用途以保持速度，并继续检查您是否真的需要该视图。*

# c# - InvalidateRec 与 User32.dll ，试图删除除最后一帧创建的所有其他帧

> ID：10302617
> 
> 赞同：0
> 
> 时间：2012-04-24T17:06:29.390
> 
> 标签：c#, asp.net, visual-studio-2010

当我移动光标时，我实际上试图在光标周围画一个椭圆，我不希望它像实际那样留下痕迹。

有人可以帮忙吗，我相信这与 invalidaterec 选项有关

任何使用无效记录的示例儿子？

这是我的代码，除了跟踪它必须以与现在相同的方式工作。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace MouseTest
{
    public partial class Form1 : Form
    {
        [DllImport("user32.dll", EntryPoint = "GetDC")]
        private static extern IntPtr GetDC(IntPtr hWnd);

        [DllImport("user32.dll", EntryPoint = "ReleaseDC")]
        private static extern int ReleaseDC(IntPtr hWnd, IntPtr hDC);

        [System.Runtime.InteropServices.DllImport("Shell32.dll")]
        private static extern int SHChangeNotify(int eventId, int flags, IntPtr item1,         IntPtr item2);

        System.Timers.Timer t1 = new System.Timers.Timer(100);

        public Form1()
        {
        t1.Elapsed += new System.Timers.ElapsedEventHandler(t1_Elapsed);
        t1.Start();
        // System.Windows.Forms.Cursor.Current = System.Windows.Forms.Cursors.WaitCursor;
        //Mouse.OverrideCursor = System.Windows.Input.Cursors.Hand;
        InitializeComponent();

    }

    void t1_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        t1.Stop();

        //SolidBrush b = new SolidBrush(Color.Red);
        IntPtr desktopDC = GetDC(IntPtr.Zero);
        Graphics g = Graphics.FromHdc(desktopDC);
        g.FillEllipse(new SolidBrush(Color.BlueViolet), Cursor.Position.X, Cursor.Position.Y, 25, 25);
        g.Dispose();
        ReleaseDC(IntPtr.Zero, desktopDC);

       t1.Start();

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:42:54.713

是的，在绘制新的新椭圆之前保持先前的坐标并在先前的封闭矩形上调用 InvalidateRect 可能会起作用。我没有任何调用 InvalidateRect 的代码，但如果这正是您的目标：“当我移动光标时在光标周围绘制一个椭圆，我不希望它像实际那样留下痕迹。” 还有其他更直接的方法。

一种方法是在透明表单上绘制椭圆，然后根据光标的移动移动该表单：

在这里，首先是表单定义：

```
namespace MouseForm
{
    partial class Form1
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.components = new System.ComponentModel.Container();
            this.shapeContainer1 = new Microsoft.VisualBasic.PowerPacks.ShapeContainer();
            this.ovalShape1 = new Microsoft.VisualBasic.PowerPacks.OvalShape();
            this.timer1 = new System.Windows.Forms.Timer(this.components);
            this.SuspendLayout();
            // 
            // shapeContainer1
            // 
            this.shapeContainer1.Location = new System.Drawing.Point(0, 0);
            this.shapeContainer1.Margin = new System.Windows.Forms.Padding(0);
            this.shapeContainer1.Name = "shapeContainer1";
            this.shapeContainer1.Shapes.AddRange(new Microsoft.VisualBasic.PowerPacks.Shape[] {
            this.ovalShape1});
            this.shapeContainer1.Size = new System.Drawing.Size(74, 74);
            this.shapeContainer1.TabIndex = 0;
            this.shapeContainer1.TabStop = false;
            // 
            // ovalShape1
            // 
            this.ovalShape1.BorderColor = System.Drawing.Color.Red;
            this.ovalShape1.BorderWidth = 3;
            this.ovalShape1.FillColor = System.Drawing.SystemColors.Control;
            this.ovalShape1.FillStyle = Microsoft.VisualBasic.PowerPacks.FillStyle.Solid;
            this.ovalShape1.Location = new System.Drawing.Point(2, 2);
            this.ovalShape1.Name = "ovalShape1";
            this.ovalShape1.Size = new System.Drawing.Size(70, 70);
            // 
            // timer1
            // 
            this.timer1.Enabled = true;
            this.timer1.Tick += new System.EventHandler(this.timer1_Tick);
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(74, 74);
            this.ControlBox = false;
            this.Controls.Add(this.shapeContainer1);
            this.Enabled = false;
            this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
            this.Name = "Form1";
            this.ShowIcon = false;
            this.ShowInTaskbar = false;
            this.Text = "Form1";
            this.TopMost = true;
            this.TransparencyKey = System.Drawing.SystemColors.Control;
            this.ResumeLayout(false);

        }

        #endregion

        private Microsoft.VisualBasic.PowerPacks.ShapeContainer shapeContainer1;
        private Microsoft.VisualBasic.PowerPacks.OvalShape ovalShape1;
        private System.Windows.Forms.Timer timer1;
    }
} 
```

这是代码：

```
using System;
using System.Windows.Forms;

namespace MouseForm
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            this.Left = Cursor.Position.X - this.Width / 2;
            this.Top = Cursor.Position.Y - this.Height / 2;
        }
    }
} 
```

我将把它作为练习留给读者来实现一种关闭透明表单的方法:)

# asp.net - 我将使用什么事件来拦截和处理 Web 表单页面中的所有运行时错误？

> ID：10302623
> 
> 赞同：0
> 
> 时间：2012-04-24T17:06:50.623
> 
> 标签：asp.net, error-handling, webforms

我将使用什么事件来拦截和处理 Web 表单页面中的所有运行时错误？

另外，如果我使用属性 e，我怎么知道拦截了什么异常。?

谢谢！！！<3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:13:24.147

如果您只想在单个页面中执行此操作，您将覆盖该`Page_Error`方法，就像您一样`Page_Load`。

如果您想为整个应用程序执行此操作，并且我认为您可能会这样做，您需要更改您的`Global.asax`：

```
 protected void Application_Error(Object sender, EventArgs e)
    {
        var ex = HttpContext.Current.Server.GetLastError();

        //Handle your error as you wish
    } 
```

# html - 建议用户在站点时将搜索引擎添加到firefox

> ID：10302629
> 
> 赞同：3
> 
> 时间：2012-04-24T17:07:05.177
> 
> 标签：html, firefox, url, search-engine

我在duckduckgo，想在浏览器中添加搜索引擎字段，

通常您必须在浏览器实用程序中进行搜索，但当我看到浏览器已经检测到它时，我感到很惊讶。

![在此处输入图像描述](../Images/d2c6f61201511871da1adca965ccadf2.png)

我怎样才能让我的网站的搜索像这样自动显示？

请注意：

我不希望（现在）实现自动建议功能，我只是想将服务保存在浏览器中（与 stackoverflow+firefox 完全相同的行为）

-编辑-

尝试了我在他们的网站上找到的代码，与 opensearch 文档匹配：

1)

```
 <link title="your service name" type="application/opensearchdescription + xml " rel="
search " href="/opensearch.xml "> 
```

2）xml文件：/opensearch.xml

```
<OpenSearchDescription>
     <ShortName>DuckDuckGo</ShortName>
     <Description>Search DuckDuckGo (SSL)</Description>
     <InputEncoding>UTF-8</InputEncoding>
     <LongName>DuckDuckGo Search (SSL)</LongName>
     <Image width="16" height="16">http://duckduckgo.com/favicon.ico</Image>
     <Url type="text/html" method="get" template="https://duckduckgo.com/?q={searchTerms}"/>
</OpenSearchDescription> 
```

但是使用我的域名和 URL，而 Firefox 没有检测到服务（与图片中的方式相同），我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T17:11:31.027

显然，Firefox、IE 和 Chrome 能够检测实施[OpenSearch 标准](http://www.opensearch.org/Home)的网站。

基本上，您将在您的站点上提供一个 XML OpenSearch 描述文档，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/">
  <ShortName>Web Search</ShortName>
  <Description>Use Example.com to search the Web.</Description>
  <Tags>example web</Tags>
  <Contact>admin@example.com</Contact>
  <Url type="application/rss+xml" 
       template="http://example.com/?q={searchTerms}&amp;pw={startPage?}&amp;format=rss"/>
</OpenSearchDescription> 
```

`<head>`...并在您的网站中链接到它，如下所示：

```
<link rel="search" 
  type="application/opensearchdescription+xml" 
  href="http://www.example.com/search.src" 
  title="Add Example.Com Search" /> 
```

[这篇 lifehacker.com 文章](http://lifehacker.com/228008/detect-firefox+compatible-search-enginesin-firefox)中的评论（您需要选择“全部”才能看到评论）似乎解决了如何在您自己的网站上实现它并参考 Facebook 的实现。环顾四周，似乎[有不少主要的参考网站都实现了此功能](http://blogs.msdn.com/b/opal/archive/2007/11/04/some-opensearch-sites-for-reference.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T16:50:10.423

我查看了您的网站（funcook.com）并且：

1）您必须删除链接标签的类型属性中的所有空格：

```
<link title="Funcook" type="application/opensearchdescription + xml" rel="search" href="http://funcook.com/opensearch.xml" /> 
```

变成：

```
<link title="Funcook" type="application/opensearchdescription+xml" rel="search" href="http://funcook.com/opensearch.xml" /> 
```

2) 您必须在 opensearch.xml 中使用正确的命名空间：

```
<?xml version="1.0" encoding="UTF-8"?>
<OpenSearchDescription>
[...] 
```

变成：

```
<?xml version="1.0" encoding="UTF-8"?>
<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/">
[...] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T16:14:30.747

好，

我只是想，为什么不检查他们的代码？

两个步骤：

1）一个指向一个xml文件

```
 <link title="your service name" type="application/opensearchdescription + xml " rel="
search " href=" / opensearch_ssl.xml "> 
```

2）xml文件：/opensearch_ssl.xml

```
<OpenSearchDescription>
     <ShortName>DuckDuckGo</ShortName>
     <Description>Search DuckDuckGo (SSL)</Description>
     <InputEncoding>UTF-8</InputEncoding>
     <LongName>DuckDuckGo Search (SSL)</LongName>
     <Image width="16" height="16">http://duckduckgo.com/favicon.ico</Image>
     <Url type="text/html" method="get" template="https://duckduckgo.com/?q={searchTerms}"/>
</OpenSearchDescription> 
```

似乎就是这样，将测试并标记为已接受

# unix - Stacktrace 以 0x0 开头

> ID：10302630
> 
> 赞同：1
> 
> 时间：2012-04-24T17:07:06.043
> 
> 标签：unix, stack-trace, callstack

我目前正在分析一个从 0x00000000 开始的奇怪调用堆栈。ELF ring3 应用程序实际上是如何实现的？它有一个默认的 0x8048000 作为入口点。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:04:18.720

GDB 缺少一个库，因此调试器将其调用映射为 0x0。

# git - Git 和 Mercurial：什么相当于 Mercurial 中的 Git 工作流？

> ID：10302637
> 
> 赞同：11
> 
> 时间：2012-04-24T17:07:21.747
> 
> 标签：git, mercurial

```
#lets get the latest
git pull

#lets switch to branch and do some work
git checkout -b makeSomeBugs

#do the work commit
git add .
git commit -am "introducing some bugs"

#push this for my lazy remote friend to see
git push origin makeSomeBugs

#uh .. changes on master
git pull origin master

#do some work..
git commit -am "introducing some more bugs"
git push origin makeSomeBugs

#lets switch back to master
git checkout master
git pull

#work is done, lets merge
git merge --no-ff makeSomeBugs
git push origin

#and remove the branch to never ever see it again
git push origin :makeSomeBugs
git branch -d makeSomeBugs 
```

各种博客资源（但它们已经很老了）说在 mercurial 中这样的分支是行不通的，尤其是在永久删除分支的情况下......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T08:08:58.347

我可能有一些错误，因为我可能误解了 git，但假设您使用的是最新版本的 Mercurial，或者如果不是，则启用[书签扩展...](http://mercurial.selenic.com/wiki/Bookmarks)

```
# lets get the latest
# git pull

hg pull

# lets switch to branch and do some work
# git checkout -b makeSomeBugs

hg bookmark makeSomeBugs

# do the work commit
# git add .
# git commit -am "introducing some bugs"

hg commit -m "introducing some bugs"

# push this for my lazy remote friend to see
# git push origin makeSomeBugs

hg push -B makeSomeBugs

# uh .. changes on master
# git pull origin master

hg pull
hg merge

# do some work..
# git commit -am "introducing some more bugs"
# git push origin makeSomeBugs

hg commit -m "introducing some more bugs"
hg push -B makeSomeBugs

# lets switch back to master
# git checkout master
# git pull

hg pull
hg update -C <name of master rev>

# work is done, lets merge
# git merge --no-ff makeSomeBugs
# git push origin

hg merge makeSomeBugs
hg push

# and remove the branch to never ever see it again
# (I assume you mean the label not the changesets)
# git push origin :makeSomeBugs
# git branch -d makeSomeBugs

hg bookmark -d makeSomeBugs
hg push -B makeSomeBugs 
```

有几个“心理模型”差异，但我认为它非常接近。最大的一个是当您删除书签时。您在本地删除它，然后推送它已被删除。与你对 git 所做的相反的顺序。

还有一个问题是你用什么来识别“主”头。如果服务器上已经有一个书签（`master`例如称为），第一行将变为`hg pull -B master`, first merge`hg merge master`和 update `hg update -C master`。首次拉取书签后，任何后续拉取或推送都应更新它，而无需明确提及。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T08:14:15.553

除了使用 Mercurial 时，您通常根本不会费心命名您的进度，而只需使用匿名分支，这几乎是相同的。

我会让它沉入一会儿...

与 git 不同，如果没有与之关联的分支名称或书签，Mercurial 不会“忘记”变更集，因此无需命名并随后删除它。在此之后，它看起来像一个非常标准的工作流程：

```
#lets get the latest
hg pull

#lets update to the latest and do some work
hg update

#do the work commit
hg commit -Am "introducing some bugs"

#serve this for my lazy remote friend to see
hg serve

#uh .. remote changes
hg pull

#do some work..
hg commit -Am "introducing some more bugs"

#lets pull in the latest
hg pull

#work is done, lets merge
hg merge
hg push 
```

如果您真的想明确地跟踪匿名头部，您可以选择使用书签；当您开始（之后`hg update`）时，使用以下命令标记当前变更集：

```
hg bookmark makeSomeBugs 
```

完成后（之后`hg merge`），使用以下方法删除书签：

```
hg bookmark -d makeSomeBugs 
```

您也可以为您的朋友推送书签，但是……嗯。

# wpf - Using File.Open for a WPF Resource

> ID：10302638
> 
> 赞同：3
> 
> 时间：2012-04-24T17:07:24.693
> 
> 标签：wpf, resources, io

I've got the following code below. High level overview is that it is a coverter that takes a .emf file from a file share, and then converts it into something WPF can use for Image.Source:

```
 public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var fileName = (string)value;
        if (fileName == null)
            return new BitmapImage();
        using (var stream = File.Open(fileName, FileMode.Open))
        {
            return GetImage(stream);
        }
    }

    internal BitmapImage GetImage(Stream fileStream)
    {
        var img = Image.FromStream(fileStream);
        var imgBrush = new BitmapImage();
        imgBrush.BeginInit();
        imgBrush.StreamSource = ConvertImageToMemoryStream(img);
        imgBrush.CreateOptions = BitmapCreateOptions.PreservePixelFormat;
        imgBrush.EndInit();
        return imgBrush;
    }

    public MemoryStream ConvertImageToMemoryStream(Image img)
    {
        var ms = new MemoryStream();
        img.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
        return ms;
    } 
```

Now, all is well and good here. The users are going to need a "print calibration" page, so I included a "SampleDoc.emf" file into my application and marked it as a resource.

However, I can't seem to get the File.Open() part right when pointing to that resource file. Any ideas on how I can do this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T20:45:52.553

当您将“SampleDoc.emf”标记为资源时，它仅驻留在已编译的程序集中（简单地说）。请参阅我提出[的在 LightSwitch](https://stackoverflow.com/questions/7562386/getting-additional-files-in-lightswitch/7569706#7569706)中获取其他文件并回答了可以回答您的问题的类似问题。

```
// creates a StreamReader from the TestFile.txt
StreamReader sr = new StreamReader(assembly.GetManifestResourceStream("SomeFile.txt")); 
```

使用此代码，您可以访问您的资源。

另一种方法是将文件的 BuildOption 标记为“内容”并将“复制操作”设置为“始终复制”或“仅当更新时”，然后在构建项目时将文件复制到输出目录。

# javascript - OVP：视频中当前点的 Javascript 回调

> ID：10302642
> 
> 赞同：0
> 
> 时间：2012-04-24T17:07:31.403
> 
> 标签：javascript, video, html5-video

我制作了一个 javascript 界面，它可以执行一些高级操作以允许跳转到视频的特定部分。我基本上有一个用于擦洗的时间线界面，我想在时间线上有一条垂直线，代表视频的当前进度。

所以，如果可能的话，我想用我的视频注册一个回调或打开视频播放器，这样它会反复打电话告诉我视频播放器的当前进度是什么，这样我就可以推进蓝线并制作它看起来像一个进度指示器。他们可以点击我的时间线将视频推送到某个点，但他们也可以使用视频的直接控件跳转到某个位置，当这种情况发生时，我希望得到相同的回调来告诉我跳转我的线路擦洗指示器视频中的位置已更改。

那有意义吗？有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:11:14.210

请参阅[W3C](http://www.w3.org/2010/05/video/mediaevents.html)演示媒体事件的精彩页面设置。该`timeupdate`活动可能是对您最有用的活动。

# mysql - MySQL - 非常复杂的随机行

> ID：10302650
> 
> 赞同：2
> 
> 时间：2012-04-24T17:07:49.827
> 
> 标签：mysql, join, random

我有我的桌子`posts`和`user_unread_posts`。在`posts`中，保存了论坛的`user_unread_posts`所有帖子，并保存了用户阅读的所有帖子。

`user_undread_posts`看起来像这样：

```
id   uid   pid 
```

现在我想允许用户打开一个他们没有读过的随机帖子。我试过类似的东西

```
SELECT * FROM posts
LEFT JOIN user_unread_posts uup
ON uup.pid=posts.id
WHERE uup.uid<>1
ORDER BY RAND()
LIMIT 1 
```

（虽然 1 是占位符 UID）

但它不起作用，就像它应该起作用一样，它也返回帖子，这些帖子被阅读......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:23:03.643

```
SELECT  *
FROM    posts
WHERE   id NOT IN
        (
        SELECT  pid
        FROM    user_unread_posts uup
        WHERE   uid = $myuserid
        )
ORDER BY
        RAND()
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:23:17.980

您想将 IS NULL 与 LEFT JOIN 一起使用。使用 <> 将 LEFT JOIN 转换为 INNER JOIN，因为 NULL 永远无法匹配 <> 运算符。

这是一个更正的查询：

```
SELECT * FROM posts
LEFT JOIN user_unread_posts uup
ON uup.pid=posts.id
WHERE uup.uid IS NULL
ORDER BY RAND()
LIMIT 1 
```

# facebook - 找出共享帖子的原作者（阅读新闻源时的“via X”）

> ID：10302659
> 
> 赞同：4
> 
> 时间：2012-04-24T17:08:33.583
> 
> 标签：facebook, stream, facebook-fql

在获取流 FQL 表时，您可以将条目视为链接帖子（type_id 设置为 80），附件属性表示它是视频（在这种特定情况下），但我看不到用于“通过”的原始 post_id在桌面浏览器上阅读新闻提要时

![截屏](../Images/ed6ec443fbd815bae6333f926e2250cb.png)

流条目的 JSON 结果：

```
{
    "action_links" = "<null>";
    "actor_id" = 100001815824671;
    "app_data" =     (
    );
    "app_id" = 2309869772;
    attachment =     {
        caption = "";
        description = "Parce qu'il appris en 2007 qu'une photo pouvait lui jouer des tours, Nicolas Sarkozy a verrouill\U00e9 l'espace des photographes. Mais dans les interstices qui le...";
        "fb_object_type" = "";
        href = "http://www.youtube.com/watch?v=IF-9UqwjcXs&feature=share";
        icon = "https://s-static.ak.facebook.com/rsrc.php/v1/yj/r/v2OnaTyTQZE.gif";
        media =         (
                        {
                alt = "Nicolas Sarkozy, des photographes \U00abSous Contr\U00f4le\U00bb, Olivier Laban-Mattei, Parole de Photographes";
                href = "http://www.youtube.com/watch?v=IF-9UqwjcXs&feature=share";
                src = "https://s-external.ak.fbcdn.net/safe_image.php?d=AQDtTtxmIkrFXsoO&w=130&h=130&url=http%3A%2F%2Fi2.ytimg.com%2Fvi%2FIF-9UqwjcXs%2Fhqdefault.jpg";
                type = video;
                video =                 {
                    "display_url" = "http://www.youtube.com/watch?v=IF-9UqwjcXs";
                    "source_type" = html;
                    "source_url" = "http://www.youtube.com/v/IF-9UqwjcXs?version=3&autohide=1&autoplay=1";
                };
            }
        );
        name = "Nicolas Sarkozy, des photographes \U00abSous Contr\U00f4le\U00bb, Olivier Laban-Mattei, Parole de Photographes";
        properties =         (
        );
    };
    attribution = "<null>";
    comments =     {
        "can_post" = 1;
        "can_remove" = 0;
        "comment_list" =         (
        );
        count = 0;
    };
    "created_time" = 1335282879;
    description = "Rencontre Photographique shared a link.";
    "filter_key" = nf;
    likes =     {
        "can_like" = 1;
        count = 0;
        friends =         (
        );
        href = "http://www.facebook.com/browse/likes/?id=275584819202502";
        sample =         (
        );
        "user_likes" = 0;
    };
    message = "";
    permalink = "http://www.facebook.com/permalink.php?story_fbid=275584819202502&id=100001815824671";
    "post_id" = "100001815824671_275584819202502";
    privacy =     {
        value = "";
    };
    "source_id" = 100001815824671;
    "target_id" = "<null>";
    type = 80;
    "updated_time" = 1335282879;
} 
```

来自[http://graph.facebook.com/282715205093918_325763324158342](http://graph.facebook.com/282715205093918_325763324158342)的原始帖子（我在原始帖子之后手动找到并查看其 ID，因为流结果中没有任何内容允许我找到它） ：

```
{
  "id": "282715205093918_325763324158342", 
  "from": {
    "name": "B+M Paris", 
    "category": "Health/beauty", 
    "id": "282715205093918"
  }, 
  "message": "Une fiche qui permet de comprendre comment notre peau évolue avec le temps", 
  "picture": "https://s-external.ak.fbcdn.net/safe_image.php?d=AQCssWcIVgdWpXMd&w=90&h=90&url=http\u00253A\u00252F\u00252Fsante.lefigaro.fr\u00252Fsites\u00252Fdefault\u00252Ffiles\u00252Fmedia\u00252Ffield_visuel\u00252Fmebeau006_0.jpg", 
  "link": "http://sante.lefigaro.fr/mieux-etre/sante-beaute/vieillissement-cutane/comment-vieillit-peau", 
  "name": "Vieillissement cutané : Comment vieillit la peau ?", 
  "caption": "sante.lefigaro.fr", 
  "description": "Le premier processus de vieillissement intrinsèque, naturel, dont le rythme est génétiquement déterminé. Progressivement, les cellules de l’organisme entrent en sénescence. Les différents mécanismes de maintenance de la peau s’en trouvent altérés :", 
  "icon": "https://s-static.ak.facebook.com/rsrc.php/v1/yD/r/aS8ecmYRys0.gif", 
  "actions": [
    {
      "name": "Comment", 
      "link": "https://www.facebook.com/282715205093918/posts/325763324158342"
    }, 
    {
      "name": "Like", 
      "link": "https://www.facebook.com/282715205093918/posts/325763324158342"
    }
  ], 
  "type": "link", 
  "created_time": "2012-04-19T14:56:59+0000", 
  "updated_time": "2012-04-19T14:56:59+0000", 
  "shares": {
    "count": 1
  }, 
  "likes": {
    "data": [
      {
        "name": "B+M Paris", 
        "category": "Health/beauty", 
        "id": "282715205093918"
      }
    ], 
    "count": 3
  }, 
  "comments": {
    "count": 0
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:33:02.877

无法检索分享帖子的用户的数据 - 无法通过公共 FQL 或 Graph API 获得。请参阅[此](https://developers.facebook.com/bugs/243877272344703)错误报告/功能请求和 Facebook 关于将其添加为功能的回复：它在“愿望清单”上。

# wordpress - 香奈儿博客上的 WordPress 主题

> ID：10302660
> 
> 赞同：1
> 
> 时间：2012-04-24T17:08:38.330
> 
> 标签：wordpress, themes

我正在和一个朋友一起创建一个博客，他们注意到他们喜欢香奈儿博客的极简主义方法：

[http://chanel-news.chanel.com/en/](http://chanel-news.chanel.com/en/)

我查看了源代码，但仍然有点不确定如何通过这些方式辨别 WordPress 的主题。有人可以帮我确定这个博客使用的主题（如果可能的话，将来如何解决这个问题？）？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:16:06.703

```
Theme Name: chanel-news
Theme URI: http://www.chanel-news.com/
Description: Thème du site chanel-news.com
Version: v.1.0
Author: Sébastien Méric
Author URI: http://www.sebastien-meric.com/ 
```

这个主题看起来像是专门为 Chanel 开发的，无法下载。联系主题开发人员，或在此处使用样式表作为参考：

[http://chanel-news.chanel.com/en/wp-content/themes/chanel-news/style.css](http://chanel-news.chanel.com/en/wp-content/themes/chanel-news/style.css)

# android - Android：应用程序安装失败

> ID：10302662
> 
> 赞同：3
> 
> 时间：2012-04-24T17:08:46.160
> 
> 标签：android, failed-installation

当我尝试在 nexus 的硬件上从 eclipse 运行我的应用程序时，我得到了`Installation error: INSTALL_FAILED_TEST_ONLY`查看 Logcat 的建议。那里，它说

```
W/ActivityManager(130): No content provider found for permission revoke: file:///data/local/tmp/myapp.apk
I/AndroidRuntime(1725): NOTE: attach of thread 'Binder Thread #3' failed 
```

第一条消息出现两次。

Nexus S 运行 Android 4.0.4，而我的 Eclipse 为 Android 2.3.3 构建应用程序。当我将目标更改为 Android 4.0.3 时，我仍然遇到同样的错误。

我还尝试将 APK 复制到 SD 卡并手动安装，但这也失败了（默默地）。

该设备尚未被我植根。如果我进入`whoami`adb shell 它找不到命令。我读到了 /data/local/tmp 缺少权限，但我无法更改（因为缺少权限）。

当我尝试运行模拟器时，我得到一个空白的黑屏，但这是另一个问题......由于该应用程序将使用 NFC，我只能在真实硬件或安装了 open-nfc 插件的模拟器上对其进行测试。我希望该应用程序具有最低要求，因此我为 SDK 版本 10 开发了它（9 是第一个使用 NFC 的）。

如果您必须查看清单，您可以在[此处找到它](http://nopaste.me/paste/15207152404f96db01e929c)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:43:31.967

您需要在安装过程中将 -t 开关传递给包管理器： `pm install -t ...`

或者，您可以从清单中删除[android:testOnly](http://developer.android.com/reference/android/R.styleable.html#AndroidManifestApplication_testOnly "安卓：testOnly")属性。

# php - php/MySQL Query Loop only using first value

> ID：10302663
> 
> 赞同：0
> 
> 时间：2012-04-24T17:08:54.913
> 
> 标签：php, mysql, function, loops

I'm writing an online shop, and I've come across an issue with a function which I'm hoping someone can help me with. The function is designed to determine if the product exists in alternate formats and link to those from the sidebar. For example, a product may exist in DVD, Blu-Ray and Digital Download.

This is my function code:

```
function formatExists($format, $pid) {

  global $conn; global $dbname; global $loginid;
  mysql_select_db($dbname, $conn);

  // Get author and description of the requested product
  $query = "SELECT description, author FROM products WHERE productid = $pid";
  $result = mysql_query($query);
  while($row = mysql_fetch_array($result)) {
    $author = $row['author'];
    $description = $row['description'];
  }

  // Find other products with the same description & author in requested format
  $query = "SELECT productid FROM products WHERE format = $format AND description = '$description' AND author = '$author'";
  $result = mysql_query($query);
  while($row = mysql_fetch_array($result)) {
    $rpid = $row['productid'];
  }

  if($rpid) {
    return $rpid;
  } else {
    return 0;
  }
} 
```

I've written a loop in another part of the code, which gets all of the formats from the database, then runs the above function on them to try to find out which formats the product is available in:

```
 $query = "SELECT formatid, description, postage FROM formats";
    $result = mysql_query($query);
    while($row = mysql_fetch_array($result)) {
      $id = $row['formatid'];
      $desc = $row['description'];
      $post = $row['postage'];
      ... STUFF ...
    } 
```

When '... STUFF ...' was '$bodycontent .= $id';" it echoed every format ID in the database, this is the behavior I expected. However, when I changed it to:

```
$pid = formatExists($id, $productid);
if($pid) {
  $query = "SELECT price FROM products WHERE productid = $pid";
  $result = mysql_query($query);
  $pricedata = mysql_fetch_array($result, MYSQL_ASSOC);
  $pprice = $pricedata['price'];
  $bodycontent .= "<span>";
  if($pid != $productid) {
    $bodycontent .= "<a href='$siteroot/index.php?page=product&id=$pid'>";
  }
  $bodycontent .= "$desc - &dollar;$pprice";
  if($postage) {
    $bodycontent .= " + P&amp;P";
  }
  if($pid != $productid) {
    $bodycontent .= "</a>";
  }
  $bodycontent .= "</span>";
} 
```

It stopped operating in the desired fashion, and just started returning the response for the first format ID.

If I manually change 'formatExists($id, $productid)' to 'formatExists(2, $productid)' then the price and link update, so the function is working correctly. For some reason, however, it's not running once for each category, it's just running once in my loop.

Any help will be much appreciated.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-24T17:14:07.363

你用的功能不对！！！我的意思是->`mysql_fetch_array`

你应该`mysql_fetch_array`改变`mysql_fetch_assoc`

看到真实的结果。

# asp.net-mvc - Why is my full view model not being serialized by ApiController?

> ID：10302664
> 
> 赞同：2
> 
> 时间：2012-04-24T17:08:57.273
> 
> 标签：asp.net-mvc, asp.net-mvc-4

I have the following type hierarchy for `ClientIndexModel`:

```
public class ViewModel
{
    public virtual IDictionary<string, SelectList> SelectListDictionary
    {
        get
        {
            var props = GetType().GetProperties().Where(p => p.PropertyType == typeof(SelectList));
            return props.ToDictionary(prop => prop.Name, prop => (SelectList)prop.GetValue(this, null));
        }
    }
}
public class IndexModel<TIndexItem, TEntity> : ViewModel where TIndexItem : ViewModel where TEntity : new()
{
    public List<TIndexItem> Items { get; private set; }
}
public class ClientIndexModel: IndexModel<ClientIndexItem, Client>
{
} 
```

I instantiate in and return a `ClientIndexModel` from an ApiController as follows:

```
public ClientIndexModel Get()
{
    var model = new ClientIndexModel();
    return model;
} 
```

If I inspect `model` with a breakpoint on the `return model;` line, the `Items` property is present, with a count of 0\. Yet the JSON returned from this action only has the `SelectListDictionary` property and no `Items` property. Why could this be?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:17:35.477

您的`Items`财产有一个私人二传手。带有私有设置器的属性被故意从序列化中省略，因为序列化它们没有意义，因为它们永远不能反序列化，因为它们的值不能从外部修改。因此，您应该完全删除 setter（就像您对`SelectListDictionary`属性所做的那样），将其公开或使用一些能够使用私有 setter 序列化属性的自定义序列化程序编写自定义格式化程序。

# android - Kivy 播放音频不工作

> ID：10302672
> 
> 赞同：4
> 
> 时间：2012-04-24T17:09:41.650
> 
> 标签：android, python, kivy

我正在尝试运行在[此处](http://kivy.org/docs/api-kivy.core.audio.html)找到的 Kivy 的音频示例。具体例子是这样的：

```
sound = SoundLoader.load(filename='test.wav')
if not sound:
    # unable to load this sound ?
    pass
else:
    # sound loaded, let's play!
    sound.play() 
```

但是，当尝试播放我目录中的任何 .wav 文件时，我只会听到咔嗒声或弹出声。我尝试过使用不同的 .wav 文件，但遇到了同样的问题。我还尝试使用 length 函数打印出声音的长度，但由于某种原因它返回 0。你们有什么反馈或意见吗？再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:01:09.663

不能说只看上面的代码片段是如何在应用程序中实现它的，或者有什么问题。

Kivy 安装目录下的示例目录中应该有一个更详细的[示例](https://github.com/kivy/kivy/tree/master/examples/audio)，它应该清楚如何使用 SoundLoader。

希望有帮助。

# sql - 为什么我在 Access 中的左连接的行数比左表少？

> ID：10302675
> 
> 赞同：4
> 
> 时间：2012-04-24T17:09:45.927
> 
> 标签：sql, database, ms-access

我在 MS Access 2010 数据库中有两个表：TBLIndividuals 和 TblIndividualsUpdates。他们有很多相同的数据，但是两个表中给定人的记录的主键可能不一样。所以我在名字和出生日期的两个表之间进行连接，以查看哪些记录对应。我正在使用左连接，这样我还可以获取 TblIndividualsUpdates 中但不在 TBLIndividuals 中的人的行。这样我就知道需要将哪些记录添加到 TBLIndividuals 以使其保持最新。

```
SELECT TblIndividuals.PersonID AS OldID, 
TblIndividualsUpdates.PersonID AS UpdateID
FROM TblIndividualsUpdates LEFT JOIN TblIndividuals 
ON ( (TblIndividuals.FirstName = TblIndividualsUpdates.FirstName) 
and (TblIndividuals.LastName = TblIndividualsUpdates.LastName) 
AND (TblIndividuals.DateBorn = TblIndividualsUpdates.DateBorn 
    or (TblIndividuals.DateBorn is null 
        and (TblIndividuals.MidName is null and TblIndividualsUpdates.MidName is null 
            or TblIndividuals.MidName = TblIndividualsUpdates.MidName)))); 
```

TblIndividualsUpdates 有 4149 行，但查询只返回 4103 行。TblIndividualsUpdates 中有大约 50 条新记录，但查询结果中只有 4 行 OldID 为空。

如果我将数据从 Access 导出到 PostgreSQL 并在那里运行相同的查询，我会得到所有 4149 行。

这是 Access 中的错误吗？Access的左连接语义和PostgreSQL的有区别吗？我的数据库是否已损坏（压缩和修复没有帮助）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:49:51.650

```
ON ( 

        TblIndividuals.FirstName = TblIndividualsUpdates.FirstName

        and 

        TblIndividuals.LastName = TblIndividualsUpdates.LastName

        AND (
                 TblIndividuals.DateBorn = TblIndividualsUpdates.DateBorn      
                 or 
                 (
                     TblIndividuals.DateBorn is null          
                     and 
                     (
                     TblIndividuals.MidName is null 
                     and TblIndividualsUpdates.MidName is null              
                     or TblIndividuals.MidName = TblIndividualsUpdates.MidName
                     )
                 )
             )
    ); 
```

我要做的是系统地删除除前两个之外的所有连接条件，直到您发现记录丢失。然后你就会知道你的问题在哪里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T17:55:03.627

这不应该发生。除非同时插入/删除行，

查询：

```
SELECT *
FROM a LEFT JOIN b
         ON whatever ; 
```

永远不应返回少于以下的行数：

```
SELECT *
FROM a ; 
```

**如果发生这种情况，那就是一个错误**。您确定查询完全像这样（并且您没有省略一些细节，例如`WHERE`子句）？您确定第一个返回 4149 行，第二个返回 4103 行吗？`*`您可以通过将上述更改为 来进行另一次检查`COUNT(*)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T17:39:06.550

从两个表中删除包含这些 JOIN 字段（FirstName、LastName 和 DateBorn）的所有索引。然后看看您是否通过这个简化的查询获得了预期的 4,149 行。

```
SELECT
    i.PersonID AS OldID, 
    u.PersonID AS UpdateID
FROM
    TblIndividualsUpdates AS u
    LEFT JOIN TblIndividuals AS i
    ON
        (
            (i.FirstName = u.FirstName) 
        AND (i.LastName = u.LastName) 
        AND (i.DateBorn = u.DateBorn)
        ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-05T21:53:54.920

不管它值多少钱，因为这似乎是一个欺骗性的错误，任何额外的信息都可以帮助解决它，我也遇到了同样的问题。

查询太大，无法在此处发布，我现在没有时间将其减少到合适的程度，但我可以报告我发现的内容。在下面，所有连接都是左连接。

我正在逐渐完善和更改我的查询。它有一个派生表（D）。整个事情被制作成一个派生表（T），然后连接到最后一个表（L）。无论如何，在其发展的某一时刻，T 中没有一个源自 D 的字段参与到 L 的连接。然后问题就出现了，总行数神秘地变得少于主表，这应该是不可能的. 一旦我再次让 D 中的一个字段（通过 T）参与到 L 的连接中，该数字再次增加到正常。

就好像 D 的连接条件被移动到 WHERE 子句时，它中没有字段参与（通过 T）连接到 L。但我真的不知道解释是什么。

# c++ - Unable to debug on Eclipse in Ubuntu

> ID：10302676
> 
> 赞同：2
> 
> 时间：2012-04-24T17:09:54.513
> 
> 标签：c++, eclipse, debugging, ubuntu

I am able to build and run on Eclipse C/C++ installed on Ubuntu 11.10.

But on trying to debug by inserting breakpoints, I get the error shown in the link.

[http://i42.tinypic.com/15plwdw.png](http://i42.tinypic.com/15plwdw.png)

Does anyone know why does this occur? Can anyone resolve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:42:56.077

你确定你的项目名或路径名有空格吗？我在 ubuntuforums 中读到了一些关于它的内容，我认为这就是问题所在。我现在找不到链接，但也许这对你也有用！

编辑：这里是：[http ://ubuntuforums.org/showthread.php?t=43577](http://ubuntuforums.org/showthread.php?t=43577)

# z3 - 代数实数：z3 在漂亮打印时是否进行舍入？

> ID：10302680
> 
> 赞同：1
> 
> 时间：2012-04-24T17:10:20.513
> 
> 标签：z3

如果我发出：

```
(set-option :pp-decimal true)
(set-option :pp-decimal-precision 10) 
```

Z3 是否在实数的第 10 位之后进行四舍五入？或者它只是将剩余的数字切掉而不进行任何四舍五入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:41:13.450

在 Z3 4.0 中，代数数`alpha`使用单变量多项式`p`和两个二进制有理数表示：`lower`和`upper`。二元有理数是整数和自然数形式`a/2^k`的有理数。我们有那是区间中唯一的根。什么时候选择`a``k``alpha``p``(lower, upper)`

> （设置选项：pp-decimal true）
> 
> （设置选项：pp-decimal-precision N）

提供。首先，我压缩/细化间隔`(lower, upper)`直到`upper - lower < 1/10^N`. 然后，我窥视上限（这是一个二进制有理数），并通过在第 N 位后截断以十进制显示。更准确地说，细化实际上是执行到 为止`upper - lower < 1/16^N`。

我意识到这不是一个理想的解决方案，但对于大多数用途来说已经足够了。

# objective-c - 自定义 UI 分段控件

> ID：10302683
> 
> 赞同：6
> 
> 时间：2012-04-24T17:10:36.300
> 
> 标签：objective-c, ios, user-interface

我想知道在 IOS 中是否可以像附加图像一样自定义分段控制。我尝试更改按钮图像，但分段控件容器在自定义按钮下仍然可见。我观察到如果添加按钮图像，分段按钮标题会消失。自定义按钮图像必须包含标题？

非常感谢

![在此处输入图像描述](../Images/c884f47ac4d8749642493afe560d0e5c.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T17:16:42.383

只是滚动你自己的。为每个状态制作三个带有两个图像的 UIButton，并编写逻辑以仅选择其中一个。

# php - Using PHP variables inside MYSQL stored queries

> ID：10302684
> 
> 赞同：2
> 
> 时间：2012-04-24T17:10:38.843
> 
> 标签：php, mysql, variables, storage

I searched before posting this but didn't find an answer to my question.

I have a table in a database which stores queries such as (with the php variable stored in the database):

```
select * from accounts where type = 'client'
select * from accounts where user_id = $userid
select * from accounts where name = '$name' 
```

I assumed that when I pulled that particular query from the database that PHP would recognized the variable and replace it but it treats it as regular text.

Is there a way to have PHP replace the $*_*_ with an actual variable that exists? I think maybe the eval() function perhaps??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:23:05.240

您可能会尝试将其用作准备好的语句。因此，如果您的数据库存储的查询如下所示：

```
select * from accounts where type = 'client'
select * from accounts where user_id = ?
select * from accounts where name = ? 
```

并且您使用 PDO 准备好的语句，如下所示：

```
$pdo = new PDO($dsn, $user, $pass);
$statement = $pdo->prepare($secondOfTheAboveQueries);
$statement->execute(array($userId));
$account = $statement->fetch(); 
```

如果您必须一次处理一些带有各种变量的语句，您还可以使用带有命名变量的准备好的查询，`user_id = :userid`而不是问号。

您可能还想考虑工作类似的存储过程。两者的解释可以在这里找到：

[http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T02:54:14.697

sprint 似乎运作良好。我可以使用 %s 等，而不是将它们存储为 $variable。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:07:12.693

假设您从数据库中提取查询：

```
$string = ''; // Assign the real userID

while ($fetch = mysql_fetch_array($query)) {

    $newQuery = str_replace('$userid', $string, $fetch['your_row_name']); 
} 
```

我不确定这是否可行，但这是我首先要尝试的...

# android - 媒体查询，不适用于移动浏览器和 Chrome

> ID：10302687
> 
> 赞同：0
> 
> 时间：2012-04-24T17:10:45.043
> 
> 标签：android, google-chrome, media-queries, mobile-webkit

我在 CSS 样式中遇到了我网站的@media 问题，目前当我在 firefox 中测试我的网页时，一切正常，即使缩小到 450 像素（我认为这是我在停止之前可以缩小多少）。但是，在 Chrome 中进行测试时，似乎在缩小屏幕时没有调用任何媒体样式，因此在测试时它在我的 android 浏览器上不起作用。

谁能告诉我哪里出错了。网址是（now.hidden-由于问题已回答），我将从 css 中删除一些代码。忽略我一直在玩不同的东西来尝试让页面正常工作的媒体宽度。

哦，我也尝试过使用 -webkit-min-pixel-ration:0 但我不太明白它是如何工作的。

这是CSS

```
@media (max-width: 555px) {
    .invisible2 { display:none; }
    .center-fold { left: 22%;                   
}

#page { margin-top: -130px;

}

.flex-direction-nav li a.prev {
    background-position: 0 0;
    left: -20px;
    display:none;
}

.flex-direction-nav li a.next {
    background-position: -52px 0;
    right: -21px;
    display:none;
}

nav li a {
        width: 50%;
        border-bottom: 1px solid #fff;
        font: 400 13px/1.4 Georgia, "Times New Roman", Times, serif;
        margin-bottom: 10px;
    }

nav small {

    display:none;

}

.pannels {   max-width:178px;           }

}

@media (max-width: 450px) {

        nav li a {
        width: 50%;
        font: 400 12px/1.4 Georgia, "Times New Roman", Times, serif;
        padding-top: 12px;
        padding-bottom: 12px;
        }

 #underline { margin-top: 33px;

}

.pannels {   max-width:178px;           }

    nav li:nth-child(even) a {
        border-right: none;
    }

    nav li:nth-child(5) a, nav li:nth-child(6) a {
        border-bottom: 1px solid #fff;
    }

    #content .gallery-columns-2 .gallery-item {
        width: 45%;
        padding-right: 4%;
    }
    #content .gallery-columns-2 .gallery-item img {
        width: 100%;
        height: auto;
    }
#tea-image { display:none; }
}

@media only screen and (min-device-width: 320px) and (max-device-width: 480px) {
    body {
        padding: 0;
    }
    #page {
        margin-top: 0;
    }
    #branding {
        border-top: none;
    }

#tea-image { display:none; }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T22:40:08.167

> ```
> @media (max-width: 555px) {
>     .invisible2 { display:none; }
>     .center-fold { left: 22%;
> } 
> ```

您丢失了`.center-fold`规则的右大括号。

# javascript - Determine image type from base 64 content

> ID：10302689
> 
> 赞同：9
> 
> 时间：2012-04-24T17:10:49.723
> 
> 标签：javascript, image, html, file-upload, base64

I have different types of image content in base64 format in javascript, like:

a png file: "iVBORw0KGgoAAAANSUhEUgAABQAAAAL4CAYAAAAkgloNAAAgA......."

a jpeg file: "/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDA......"

similarly, there can be other images like GIF, BMP, etc.

I need a way to determine the image type based on the content. I understand there are headers for each file type and I can refer it to determine the image content type. Example Reference: [http://en.wikipedia.org/wiki/Portable_Network_Graphics#Technical_details](http://en.wikipedia.org/wiki/Portable_Network_Graphics#Technical_details).

But does anyone know of a library or other technique that will do the trick in a more smarter way? I can use any of the HTML5 features if required.

The main intent is to render the image on the screen. For that I use dataURI pattern, . I have image content, all I need is to put the right value in the "data:image/png" part of the url.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:25:07.487

有很多 javascript base64 解码器，（[相关问题](https://stackoverflow.com/questions/2820249/)），只需解码前 4 或 5 个字母，它们应该包含文件类型。

# ruby - 在 qtruby 中处理事件

> ID：10302691
> 
> 赞同：3
> 
> 时间：2012-04-24T17:10:56.737
> 
> 标签：ruby, qt, qt-designer, qtruby

我尝试使用 Ruby 和 QtDesigner 进行 Qt，但我不明白如何处理事件。我阅读并尝试了信号和插槽，但我没有看到我如何自定义行为，例如，如果我想在单击按钮时触发动作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:18:59.367

从[主页](http://techbase.kde.org/Development/Languages/Ruby)：

```
button = Qt::PushButton.new('Quit') do
  connect(SIGNAL :clicked) { Qt::Application.instance.quit }
end 
```

# javascript - 如何在特定位置跟踪元素移动和触发功能？

> ID：10302693
> 
> 赞同：2
> 
> 时间：2012-04-24T17:10:58.810
> 
> 标签：javascript, jquery, css

我有一个#ball，单击时使用 jquery animate 使用以下代码向下移动 210px：

```
 $('#ball').click(function() {
    $(this).animate({
        top: '+=210px'
    }, 500);
    setTimeout(crack, 400);
});​ 
```

目前我正在使用 Timeout 来触发下一个功能，即“破解”。相反，我想跟踪#ball 的运动，当它的 css top = 210px 我想触发函数crack() 时，我该怎么做？

我在一个有点类似的帖子中看到 Step 函数可能是我正在寻找的，但我不确定如何根据[http://api.jquery.com/animate/提供的信息来处理该解决方案](http://api.jquery.com/animate/)

看演示：http: [//jsfiddle.net/EnigmaMaster/hbvev/4/](http://jsfiddle.net/EnigmaMaster/hbvev/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:15:53.600

如果您真的想根据球的位置做某事，那么是的，`step`这可能是最好的方法：

```
$('#ball').click(function() {
    $(this).animate({
        top: '+=210px'
    }, {
        duration: 500,
        step: function() {
            if($(this).offset().top > 208) {
                 crack();
            }                
        }
    });
}); 
```

演示：http: [//jsfiddle.net/qJjnN/1/](http://jsfiddle.net/qJjnN/1/)

现在，有几个警告：

1.  可能会对性能造成影响。
2.  每一步的位置不一定是整数，并且在开始和停止位置之间的每个像素处都不会存在对象。
3.  `step`不会在最终位置上调用，因此您实际上无法检查`210`它是否是最终位置。

考虑到这些，您将无法检查 210px 的确切位置。相反，您将希望观察它何时通过某个位置并且仅`crack`在该点触发，而不是之后的每个点：

```
$('#ball').click(function() {
    var cracked = false;
    $(this).animate({
        top: '+=210px'
    }, {
        duration: 500,
        step: function() {
            if($(this).offset().top > 208 && !cracked) {
                 cracked = true;
                 crack();
            }                
        }
    });
}); 
```

演示：http: [//jsfiddle.net/qJjnN/2/](http://jsfiddle.net/qJjnN/2/)

该`step`函数还具有参数`now`，`fx`可用于查看动画 css 的当前值。 `step`被动画的每个 css 属性的每一步调用。因此，您必须小心使用它们，因为您需要查看`fx`您正在查看的属性值（如果您正在制作多个动画，即`top`和`left`）。

```
$('#ball').click(function() {
    var cracked = false;
    $(this).animate({
        top: '+=210px'
    }, {
        duration: 500,
        step: function(now, fx) {
            if(fx.prop != 'top') {
                 return;
            }
            if(now > 208 && !cracked) {
                 cracked = true;
                 crack();
            }                
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:30:52.360

如果您知道球会到达`210px`.

如果您想摆脱 setTimeout，则使用`.animate`当球到达盒子时将调用的回调函数。

```
$('#ball').click(function() {
    $(this).animate({
        top: '+=210px'
    }, 500, crack); //<== crack will be called after ball animation
});​ 
```

[**演示**](http://jsfiddle.net/skram/hbvev/6/)

如果你想在球接触到盒子时调用crack并且仍然继续盒子的移动，那么你可以像下面那样执行2个步骤，

```
$('#ball').click(function() {
    $(this).animate({
        top: '+=180px'
    }, 400, function() {
        crack();
        $(this).animate({
            top: '+=30px'
        }, 100);            
    });
}); 
```

还要检查这个版本的慢动作乐趣[http://jsfiddle.net/skram/hbvev/8/](http://jsfiddle.net/skram/hbvev/8/)

# sql-server - 围绕多个插入或更新使用事务的正确方法

> ID：10302697
> 
> 赞同：11
> 
> 时间：2012-04-24T17:11:15.633
> 
> 标签：sql-server, transactions

测试插入/更新失败并回滚此事务（如果有）的正确方法是什么？我认为我所拥有的不会起作用，因为我的插入/更新是 3 个单独的语句，而 @@ROWCOUNT 只会反映最后执行的语句。

```
BEGIN TRANSACTION Script;
GO

INSERT INTO TableA (id) VALUES (1)
INSERT INTO TableB (id) VALUES (1)
UPDATE TableC SET id=1 WHERE id=2
GO

IF (@@ROWCOUNT=3 AND @@ERROR=0)
    BEGIN
    COMMIT
    END
ELSE
    BEGIN
    PRINT 'Error: Rolling back transaction'
    ROLLBACK TRANSACTION Script
    END
GO 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-24T17:23:10.543

如果您在开始事务之前将 SET XACT_ABORT 设置为 ON，[则在发生错误时，将自动发出回滚](http://msdn.microsoft.com/en-us/library/ms188792.aspx)。

```
SET XACT_ABORT ON

begin transaction

INSERT INTO TableA (id) VALUES (1)
INSERT INTO TableB (id) VALUES (1)
UPDATE TableC SET id=1 WHERE id=2

commit transaction 
```

如果您想自己进行回滚，请[使用 try .. catch 块](http://msdn.microsoft.com/en-us/library/ms175976.aspx)。

```
begin transaction

begin try

  INSERT INTO TableA (id) VALUES (1)
  INSERT INTO TableB (id) VALUES (1)
  UPDATE TableC SET id=1 WHERE id=2

  commit transaction

end try

begin catch
  raiserror('Message here', 16, 1)
  rollback transaction
end catch 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T17:34:14.517

我不知道您使用的是哪个版本，但自 SQL 2005 以来一直存在 try/catch：

```
begin transaction
begin try
   INSERT INTO TableA (id) VALUES (1)
   INSERT INTO TableB (id) VALUES (1)
   UPDATE TableC SET id=1 WHERE id=2
end try
begin catch
   SELECT
        ERROR_NUMBER() AS ErrorNumber,
        ERROR_SEVERITY() AS ErrorSeverity,
        ERROR_STATE() AS ErrorState,
        ERROR_PROCEDURE() AS ErrorProcedure,
        ERROR_LINE() AS ErrorLine,
        ERROR_MESSAGE() AS ErrorMessage;
   while(@@trancount > 0)
   begin
      rollback transaction
   end
end catch
if (@@trancount <> 0)
begin
   commit transaction;
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:23:31.343

失败的插入将抛出。可以使用@@ROWCOUNT 检测“失败”更新。

# asp.net-mvc - 我正在尝试从显示所述模型的详细信息但返回空值的表单中返回模型

> ID：10302698
> 
> 赞同：1
> 
> 时间：2012-04-24T17:11:19.770
> 
> 标签：asp.net-mvc, asp.net-mvc-3, submit

我的表单没有返回空模型。

我正在详细信息页面上查看特定模型的详细信息，然后，如果用户按下 SubmitPost 按钮，视图应该返回模型。

**看法**

```
@model MyApp.Models.MyModel
@using (Html.BeginForm("ApplyUsingDetails", "Controller", FormMethod.Post))
{
    <fieldset>
        <legend>Course</legend>
        <div class="display-label">MyModel ID</div>
        <div class="display-field">
            @Html.DisplayFor(model => model.CourseID)
        </div>

        <div class="display-label">Title</div>
        <div class="display-field">
            @Html.DisplayFor(model => model.Title)
        </div>
        etc. . .

        <p><input type="submit" value="SubmitPost" /></p>

        <more misc information for the view>
    </fieldset>
} 
```

**行动**

```
[HttpPost]
public ActionResult ApplyUsingDetails(MyModel model)
{
// when I try to access model here it comes up null
} 
```

提供一些背景信息：我正在使用此表格让学生查看课程的详细信息，然后单击按钮申请课程。

关于为什么我的模型会为空的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:16:24.167

根据您提供的示例，您似乎没有`MyModel`在表单中包含任何 ' 字段。作为测试，请尝试包含隐藏字段或使用`@Html.HiddenFor(model => model.CourseID)`并查看您是否发布了任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:33:41.427

您需要在表单中包含输入元素，以便它们可以发布到您的控制器并绑定到您的控制器模型。ASP.Net MVC 中的模型绑定获取您提交的表单值，并在控制器模型上查找具有相同名称的属性，并尝试使用表单值设置该属性。表单中没有输入字段对模型绑定没有任何意义，无法粘贴到控制器的模型中。

我建议使用带有 css 样式的只读输入元素看起来像`div.display-field`.

```
 <div class="display-label">Course ID</div> 
    <div> 
        @Html.TextBoxFor(model=>model.CourseID, new{readonly="readonly", @class="display-field"}) 
    </div> 
```

根据页面上的其他样式，可能需要也可能不需要将输入包装在 div 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:37:58.197

`DisplayFor`HTML 助手通常会简单地返回一个表示属性值的字符串。如果您的属性是布尔类型，它会将其呈现为禁用复选框。只要您没有任何输入控件，您就不会获得价值。所以在这种情况下，您可以简单地使用`@Html.HiddenFor`HTML 帮助器方法。

`HTML.HiddenFor`辅助方法为隐藏类型的输入元素生成 HTM 标记，其 id 和名称与表达式相同

```
@using (Html.BeginForm("ApplyUsingDetails", "Controller", FormMethod.Post))
{
   <div class="display-label">MyModel ID</div>
   <div class="display-field">
        @Html.DisplayFor(model => model.CourseID)
        @Html.HiddenFor(m=>m.CourseId)
   </div>
   <input type="submit" value="Save" />
} 
```

现在，课程 ID 的值将在您的 HTTPPost 操作方法中可用。

# php - mysql插入查询不起作用

> ID：10302702
> 
> 赞同：1
> 
> 时间：2012-04-24T17:11:39.957
> 
> 标签：php, mysql, insert

我有这个页面从 html 表单插入数据。没有显示错误，但也没有插入数据。这是我给出的代码。

```
<?php 
mysql_connect("localhost","root","");
mysql_select_db("hcp");

$queryUserType = "select * from user_type";
$resultUserType = mysql_query($queryUserType) or die(mysql_error());

$queryTitle = "select * from name_titles";
$resultTitle = mysql_query($queryTitle) or die(mysql_error());

$time = time();
$date = date("d-m-y");
$nowDateTime=$time.$date;

if($_REQUEST['btnUserSubmit'])
{
    $queryInsertUser="INSERT INTO  users (`title_id`, `first_name`, `last_name`, `email`, `utid`, `residence_address1`, `residence_address2`, `residence_city`, `residence_state`, `residence_country`, `residence_zipcode`, `phone_no`, `username`, `password`, `created`, `date_of_birth`, `gender` ) VALUES ('".mysql_real_escape_string($_REQUEST['$rowTitle[0]'])."', '".mysql_real_escape_string($_REQUEST['txtFirstName'])."', '".mysql_real_escape_string($_REQUEST['txtLastName'])."', '".mysql_real_escape_string($_REQUEST['txtEmail'])."', '".mysql_real_escape_string($_REQUEST['rowUserType[0]'])."', '".mysql_real_escape_string($_REQUEST['txtAddressLine1'])."', '".mysql_real_escape_string($_REQUEST['txtAddressLine2'])."', '".mysql_real_escape_string($_REQUEST['txtCity'])."', '" .mysql_real_escape_string($_REQUEST['txtState'])."', '".mysql_real_escape_string($_REQUEST['txtCountry'])."', '".mysql_real_escape_string($_REQUEST['txtPhone'])."', '".mysql_real_escape_string($_REQUEST['txtUserName'])."', '".mysql_real_escape_string($_REQUEST['txtUserPassword'])."', '".$nowDateTime."', '".mysql_real_escape_string($_REQUEST['txtdateofbirth'])."', '".mysql_real_escape_string($_REQUEST['rdGender'])."');";

$resultinsert=mysql_query($queryInsertUser) or die(mysql_error());
}
?> 
```

我在页面重定向的地方没有任何问题。表单验证仍然存在。在这个表中，只有 email、utid、username、password 这四个字段不为空。其余为 Null 允许。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T17:30:24.857

**如您所见，您缺少的字段 11，见下文：**

```
<?php
$QueryCol   = array('title_id',             // Field 1
                    'first_name',           // Field 2
                    'last_name',            // Field 3
                    'email',                // Field 4
                    'utid',                 // Field 5
                    'residence_address1',   // Field 6
                    'residence_address2',   // Field 7
                    'residence_city',       // Field 8
                    'residence_state',      // Field 9
                    'residence_country',    // Field 10
                    'residence_zipcode',    // Field 11
                    'phone_no',             // Field 12
                    'username',             // Field 13
                    'password',             // Field 14
                    'created',              // Field 15
                    'date_of_birth',        // Field 16
                    'gender');              // Field 17

$QueryData  = array((isset($_REQUEST[$rowTitle[0]])      ? $_REQUEST[$rowTitle[0]]          : null),    // Field 1
                    (isset($_REQUEST['txtFirstName'])    ? $_REQUEST['txtFirstName']        : null),    // Field 2
                    (isset($_REQUEST['txtLastName'])     ? $_REQUEST['txtLastName']         : null),    // Field 3
                    (isset($_REQUEST['txtEmail'])        ? $_REQUEST['txtEmail']            : null),    // Field 4
                    (isset($_REQUEST[$rowUserType[0]])   ? $_REQUEST[$rowUserType[0]]       : null),    // Field 5
                    (isset($_REQUEST['txtAddressLine1']) ? $_REQUEST['txtAddressLine1']     : null),    // Field 6
                    (isset($_REQUEST['txtAddressLine2']) ? $_REQUEST['txtAddressLine2']     : null),    // Field 7
                    (isset($_REQUEST['txtCity'])         ? $_REQUEST['txtCity']             : null),    // Field 8
                    (isset($_REQUEST['txtState'])        ? $_REQUEST['txtState']            : null),    // Field 9
                    (isset($_REQUEST['txtCountry'])      ? $_REQUEST['txtCountry']          : null),    // Field 10
                                                                                                        // Field 11
                    (isset($_REQUEST['txtPhone'])        ? $_REQUEST['txtPhone']            : null),    // Field 12
                    (isset($_REQUEST['txtUserName'])     ? $_REQUEST['txtUserName']         : null),    // Field 13
                    (isset($_REQUEST['txtUserPassword']) ? $_REQUEST['txtUserPassword']     : null),    // Field 14
                    $nowDateTime,                                                                       // Field 15
                    (isset($_REQUEST['txtdateofbirth'])  ? $_REQUEST['txtdateofbirth']      : null),    // Field 16
                    (isset($_REQUEST['rdGender'])        ? $_REQUEST['rdGender']            : null);    // Field 17

foreach($QueryData as $Key => $Value){
    $QueryData[$Key] = mysql_real_escape_string($Value);
}

$QueryInsertUser    =   'INSERT INTO users (`'.implode('`, `', $QueryCol).'`)'.
                        'VALUES ("'.implode('", "', $QueryData).'")';
$resultinsert       =   mysql_query($QueryInsertUser)
                        or die(mysql_error());

?> 
```

**尖端 ：**

1.  停止使用 $_REQUEST。使用 $_GET 或 $_POST
2.  避免像以前那样使用大线。您无法快速找到错误。
3.  使用数组编写更少的代码。
4.  使用[array_walk](http://www.php.net/manual/fr/function.array-walk.php)函数将函数映射到数组中的每个条目。
5.  让你的代码读起来更甜，更容易调试
6.  像这样的变量`$_REQUEST['$Blabla']`不起作用，因为使用 ' 不适用于解析变量，请使用 " 代替那样`$_REQUEST["{$Blabla}"]`。但是，避免这种情况，因为 PHP 需要解析意味着需要更多的动力，请`$_REQUEST[$Blabla]`改用。
7.  在开发过程中，我建议您在脚本顶部使用以下几行：

    ```
    error_reporting(-1);
    ini_set('display_errors', 'On'); 
    ```

    它将显示所有错误。即使不是真正的错误。它将帮助您编写可以在任何地方工作的完美代码和标准代码。

8.  对于每个 $_POST、$_GET、$_REQUEST、$_FILES 等，请使用函数[isset](http://php.net/manual/fr/function.isset.php)，因为它会产生错误。
9.  请记住，每个错误都会使页面加载时间加倍。尝试创建一个页面，假设 10000 行没有错误，平均可能是 0.01 秒。每行有一个错误，可能需要 0.5 秒。看那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:20:06.137

你试过改变吗

```
if($_REQUEST['btnUserSubmit']) 
```

到

```
if (isset($_POST['btnUserSubmit'])) 
```

?

编辑！

我也认为在您的 INSERT 查询结束时

```
'".mysql_real_escape_string($_REQUEST['rdGender'])."');"; 
```

你可以替换为：

```
'".mysql_real_escape_string($_REQUEST['rdGender'])."')"; // Lose the ; after "') 
```

你为什么不直接使用 $_POST[]; 而不是 $_REQUEST[]; ?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:23:31.650

尝试删除行尾的第一个分号，使其如下所示：

```
...($_REQUEST['rdGender'])."')"; 
```

# linux - Linux 上 libgcc_s.so.1 的次要版本

> ID：10302707
> 
> 赞同：0
> 
> 时间：2012-04-24T17:11:52.523
> 
> 标签：linux, version, dynamic-library

我注意到在 SLES SP1 和 Ubuntu 10.04 上它们只有一个主要版本的 libgcc_s in `/lib64`. 但是在 RHEL 6.1 上，它们的主要版本指向次要版本，日期附加到库的次要版本。我需要提供给客户支持的矩阵的次要版本。如何在 Ubuntu 和 SLES 中获取 libgcc 的次要版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:15:00.980

处理这个问题的最简单方法是在其他系统上重建。如果做不到这一点，请从 gcc SRPM 中提取 tarball，然后使用规范文件中的命令重新构建它。

# ajax - 由 paginator/jquery 助手生成的 Ajax URL 将 & 编码为 &

> ID：10302709
> 
> 赞同：1
> 
> 时间：2012-04-24T17:12:01.563
> 
> 标签：ajax, cakephp, get, pagination, cakephp-2.1

阅读底部编辑以获取解决方法。

我无法在我的 cakephp 应用程序中实现 ajax 分页。我一直在寻找资源和教程来帮助解决这个问题，但大多数处理的是 cake 1.3。我为自己犯了一个明显而简单的错误而祈祷...

到目前为止我所处位置的描述：我为我的应用程序构建了一个简单的搜索界面 - 一个二手车搜索界面，用于搜索我数据库中的汽车。搜索界面实际上似乎工作正常。我有一个隐藏表单，它根据用户在搜索表单中的输入创建或销毁隐藏元素。这个隐藏表单是通过 Ajax 成功提交的，我可以返回一组分页结果，例如“找到 16 个显示的 1-5”。

我似乎遇到的问题是由分页器助手生成的 javascript 增强号、下一个和上一个链接/ajax 请求。

我的 CarsController 有 find_cars 函数，它需要一个 get 请求（我的控制器中的 $paginate var 和视图中的 $this->Paginator 选项都有 dataType = querystring）。该函数在初始表单提交上运行良好，带有 Get 请求 URL，例如：[http://localhost/myapp/cars/findCars?price=any&year=any&miles=any](http://localhost/myapp/cars/findCars?price=any&year=any&miles=any)

我的 ajax.ctp 布局中有 $this->Js->writeBuffer(); 在 ajax 响应中，我可以看到为 next、number 和 prev 链接编写的 jquery 事件。一个事件的示例：

```
$("#link-1448104972").bind("click", function (event) {$.ajax({
dataType:"html", evalScripts:true, paramType:"querystring", 
success:function (data, textStatus) {
$("#results").html(data);}, url:"\/myapp\/cars\/findCars?price=any&amp;year=any&amp;miles=any&amp;page=2"}); 
```

我遇到的问题是 URL 值。当我将 url 粘贴到浏览器中时，我的 find_cars 函数会正确处理参数，因为`&amp;'s` get 以纯 & 形式发送到控制器。但是，当我单击发送 ajax 请求的分页链接之一时，URL 仍然包含 & 编码的 & 和 $this->request->query; 在分页点击后的 var_dump 中看起来像：

```
array
  'price' => string 'any' (length=3)
  'amp;year' => string 'any' (length=3)
  'amp;miles' => string 'any' (length=3)
  'amp;body' => 
    array
      0 => string '1' (length=1)
      1 => string '2' (length=1)
      2 => string '6' (length=1)
  'amp;page' => string '2' (length=1) 
```

我能在任何地方找到似乎提到同样问题的唯一其他讨论是在[这个 cakephp lighthouse bug ticket #127](http://cakephp.lighthouseapp.com/projects/42648/tickets/127-query-string-escaped-in-ajaxjavacript-link-code)中。然而，讨论是针对 cakephp 1.3 的，它链接到的 github 提交是 404。

编辑：我想我还应该补充一点，我正在尝试使用 GET 请求，以便我可以更轻松地实现预期的用户导航和书签功能，以保存搜索查询并使用浏览器和应用程序在结果中向前和向后导航分页链接。

编辑（解决方法/解决方案）- 根据@islandmyth 的建议，我从执行 Get 请求切换到执行 Post，将 paramType 从“querystring”更改为“named”。我将查询信息从 $this->request->named 传递到视图，并将信息保存到 $this->Paginator->options['data'] ，并使用 php 的 http_build_query() 函数来保留嵌套数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:20:00.570

Cake php Ajax Paginator 似乎无法正常工作。我也有类似的问题。

我会推荐你​​使用 cakephp 插件[Cakephp-DataTable](https://github.com/tigrang/cakephp-datatable)

这个插件已经实现了分页，默认情况下它具有大部分功能。他们还提供了文档，如果您在实施中发现任何困难，请查看[问题部分](https://github.com/tigrang/cakephp-datatable/issues/5#issuecomment-5229179)

此外，开发人员反应迅速，如果您有任何插件，可以得到澄清。

# ruby-on-rails - JRuby 一直说“请安装 `gem install activerecord-jdbcmysql-adapter”

> ID：10302710
> 
> 赞同：1
> 
> 时间：2012-04-24T17:12:03.630
> 
> 标签：ruby-on-rails, jruby

我正在学习一个简单的教程，我正在使用 mysql。当我跑步时

```
jruby -S rake db:create:all 
```

它给出了一条错误消息：

```
Please install the jdbcmysql adapter: `gem install activerecord-jdbcmysql-adapter` (no such file to load -- active_record/connection_adapters/jdbcmysql_adapter) 
```

但我已经安装了这个。有谁知道如何解决这个问题？我正在使用 JRuby 1.6.7。（我的电脑上也有 ruby​​ 1.9.3，不知道是否重要）
这是我的 database.yml

```
development:
  adapter: jdbcmysql
  database: MyRail2_development
  pool: 5
  username: root
  password:  *****
  host: localhost 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:04:05.493

您是否确保您的 Gemfile 包含引用适配器 gem 的行？例如：

```
platforms :jruby do
  gem 'activerecord-jdbc-adapter'
  gem 'activerecord-jdbcmysql-adapter'
end 
```

更新 GemFile 后，您是否运行了捆绑安装？IE：

```
jruby -S bundle install 
```

您的机器上是否有 MRI Ruby 1.9.3 并不重要，只要您记得执行以 为前缀的常用 Rails 教程命令`jruby -S`，正如您在问题中所指出的那样。

# c# - IHttpHandler 将 cookie 发送回调用网站

> ID：10302714
> 
> 赞同：0
> 
> 时间：2012-04-24T17:12:35.533
> 
> 标签：c#, asp.net, cookies, httphandler

我有一个订购网站，需要在供应商网站上提出设置请求。为此，我正在使用 WebHanlder（ashx 文件）来使用工作正常的 HttpContext 对象读取 cXML 中的设置请求。

其中一项要求是我们发送回一个名为“Buyer Cookie”的 Cookie 以及 cXML 200 OK 响应。

我遇到的问题是当我在上下文中创建一个 cookie 时。响应它在我执行时没有在订购站点中收到`response.Output.Write().`

我`response.Flush()`在写入后尝试使用，但仍然无法正常工作

如何将 cookie 发送回调用站点？

这是我的代码：

**订购网站**

```
Stream stream = null;
byte[] bytes = Encoding.ASCII.GetBytes(File.ReadAllText(@"D:\Prototypes\HTTPPost\cXMLFiles\PunchOutSetupRequest.xml"));
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create("http://localhost:45454/PunchOutRequest.ashx");

webRequest.ContentType = "application/x-www-form-urlencoded";
webRequest.Method = "POST";
webRequest.ContentLength = bytes.Length;

try
{
    stream = webRequest.GetRequestStream();
    stream.Write(bytes, 0, bytes.Length);
}
catch (Exception)
{
    throw;
}
finally
{
    if (stream != null)
        stream.Close();
}

HttpWebResponse response = (HttpWebResponse)webRequest.GetResponse();
Stream responseStream = response.GetResponseStream();
StreamReader responseReader = new StreamReader(responseStream);

string r = responseReader.ReadToEnd();
var buy = webRequest.CookieContainer;
var buyer = response.Cookies["BuyerCookie"]; // This is always null 
```

**供应商网站**

```
var request = context.Request;
StreamReader reader = new StreamReader(request.InputStream);

string text = reader.ReadToEnd();

POSetup setup = new POSetup();

if (setup.IsSetupRequestValid(text))
{
    HttpCookie cookie = new HttpCookie("BuyerCookie", "100");

    context.Response.Cookies.Add(cookie);
    context.Response.Output.Write(setup.GetOKResponse());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:55:03.503

尝试添加这一行：

```
webRequest.CookieContainer = new CookieContainer(); 
```

紧接着

```
webRequest.ContentLength = bytes.Length; 
```

# html - CSS 3 背景渐变在 HTML 5 文档中的 Firefox 中消失

> ID：10302715
> 
> 赞同：4
> 
> 时间：2012-04-24T17:12:37.343
> 
> 标签：html, firefox, css, background, gradient

我面临一个奇怪的问题。我有一个渐变背景颜色的文档。

```
<body class="loginbackground">

.loginbackground {
    background: #64889A; /* for non-css3 browsers */

    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#DCDCDC', endColorstr='#64889A'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#DCDCDC), to(#64889A)); /* for webkit browsers */
    background: -moz-linear-gradient(top,  #DCDCDC,  #64889A); /* for firefox 3.6+ */
    width: 100%;
    height: 100%;
} 
```

首次构建页面时，我没有设置文档类型（是的，我的错，但它仍处于 pre-pre-alpha 中！）

我添加`<!DOCTYPE html>`到我的 html 文件中，然后 bam，背景渐变消失了。

它在 Chrome 和 IE 中运行良好。这仅在 Firefox 中被破坏。我正在使用极光（13a0.2）。如果我删除 line `-moz-linear-gradient`，则它显示默认背景颜色（无渐变）。

我做错了什么还是实际上是 Firefox 中的错误？

** 更新 ** 如果我给出一个`background-size: 1000px 1000px`然后它工作，有点。我想给`100% 100%`or `auto`，但这不起作用。给出固定尺寸意味着它取决于屏幕分辨率。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T23:26:17.337

您的问题是，根据规范，渐变大小框是背景样式所在元素的框。而在标准模式下，你的身高是0，因为你没有设置`height: 100%`。`<html>`如果你在身体上加了一个边框，你可以看到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:21:04.367

尝试用这个变体替换你的css：

`background: -moz-linear-gradient(top, #dcdcdc 0%, #64889a 100%);`

当我需要跨浏览器渐变时，我去的地方是：http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# cpanel - 默认的 php.ini 值来自哪里？

> ID：10302717
> 
> 赞同：0
> 
> 时间：2012-04-24T17:13:03.897
> 
> 标签：cpanel, php, suphp

当您在 suPHP Web 服务器中使用自定义 php.ini 文件时，您未在该 php.ini 文件中配置的所有变量都将获得默认值。这些到底是从哪里来的？

作为一个例子，你可以使用一个完全空白的 php.ini 文件，然后整个配置就完成了。可以使用 phpinfo() 输出进行测试。

我正在 cPanel 服务器中进行测试，phpinfo 中显示的 php.ini 配置路径为：

/usr/lib

但是该路径中的 php.ini 文件没有我在创建自定义 php.ini 时看到的那些默认值。

例如 /usr/lib/php.ini 的 memory_limit 为 64MB，但使用自定义的空白 php.ini 文件，我在 phpinfo 中得到 memory_limit 128MB。

我无法弄清楚这些默认值在哪里配置。我在哪里可以找到它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:41:48.230

php.ini 是一个配置文件，在执行 php 脚本时读取，当 php 脚本启动时，它会在当前工作目录中查找它，如果它不存在，那么它将检查主服务器 php.ini 。它包含带有本地值和主值的指令——一些最常见的指令是：register_globals、allow_url_include、allow_url_fopen、open_basedir 等……</p>

因此，您一定想知道如何在您的 cPanel Web 服务器上找到 php.ini 的路径。假设您具有 root 访问权限，检查路径的命令是：

```
root@server# php –i | grep php.ini
Configuration File (php.ini) Path => /usr/local/lib/php.ini 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:17:44.330

好吧，假设您使用的是 Linux 和 Apache Web 服务器，这取决于您使用的 Linux 发行版、php 的版本以及您使用 Apache Web 服务器安装它的方式。Php.ini 可能在这里：

/etc/php.ini

或者在这里：

/etc/php/php.ini /etc/php5/php.ini

或者在这里：

/usr/bin/php5/bin/php.ini

无论如何，您总是可以通过这种方式找到任何名为 php.ini 的文件

查找 / -name php.ini

您还可以从脚本中**查看加载的配置文件。**`phpinfo();`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T17:25:33.023

[http://www.php.net/manual/en/ini.list.php](http://www.php.net/manual/en/ini.list.php)

指令和默认值列表。这不是最终列表，因为扩展程序有自己的设置和默认值。

# parsing - 如何在 ANTLR 中围绕评论组合标记

> ID：10302718
> 
> 赞同：0
> 
> 时间：2012-04-24T17:13:08.517
> 
> 标签：parsing, comments, antlr

我是 ANTLR 的新手，并使用它来开发一种歧义语言的解析器。我想做的是如何在不使用 AST 的情况下将“评论”周围的标记组合成一个标记。

我用这个简单的语法来说明问题

```
grammar test;

query   
    :     expression+   
    ;

expression
    :   alpha 
    ;

alpha
    : ID
    ;

ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
    ;

COMMENT
    :   '{' ( options {greedy=false;} : . )* '}' {$channel=HIDDEN;}
    ; 
```

现在，如果我们用一个简单的文本“Test{Comments}er”执行它，就会生成两个单独的标记，即“Test”和“er”。而我想从中创建一个令牌。任何帮助都感激不尽。

提前致谢

吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:59:50.420

我不确定，但是您是否尝试过这样做：

```
 ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')* COMMENT? ('a'..'z'|'A'..'Z'|'0'..'9'|'_')* 
; 
```

# java - setText 使 apk 崩溃

> ID：10302720
> 
> 赞同：-1
> 
> 时间：2012-04-24T17:13:15.240
> 
> 标签：java, android, android-layout, settext

我正在尝试开发一个非常简单的apk。
我正在使用一个 textView 来显示我在之前的活动中输入的两个团队的名称（这里是为了打开这个活动而带来的）。当我尝试使用 setText 显示这些团队的名称时，apk 崩溃了。

这是崩溃的类：

```
 public class MatchPage extends Activity {
private String locali= null;
private String ospiti= null;
private TextView localiTV;
private TextView ospitiTV;
private MatchRugby partita;
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.match);
     localiTV =(TextView) findViewById(R.id.localiTV);
     ospitiTV =(TextView) findViewById(R.id.ospitiTV);
    getLocali();
    getOspiti();
    createMatch();

     localiTV.setText("Locali /n"+ partita.teamA.getName());
     ospitiTV.setText("Ospiti /n"+ partita.teamB.getName());

}

/**
 * Prende il nome della squadra locale dall'intent
 * @return
 */
public String getLocali(){
    Intent matchStart = getIntent();
    String locali = matchStart.getStringExtra(NewMatchPage.LOCALI);
    return locali;
}

/**
 * prende il nome della squadra ospite dall'intent
 * @return
 */
public String getOspiti(){
    Intent matchStart = getIntent();
    String ospiti = matchStart.getStringExtra(NewMatchPage.OSPITI);
    return ospiti;
}

public MatchRugby createMatch(){
    TeamRugby teamLocali= new TeamRugby(locali);
    TeamRugby teamOspiti= new TeamRugby(ospiti);
    MatchRugby partita= new MatchRugby(teamLocali, teamOspiti);
    return partita;
}
    } 
```

这是 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/localiTV"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/ospitiTV"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

这是发送意图的类：

```
 public class NewMatchPage extends Activity {

public static final String LOCALI = null;
public static final String OSPITI = null;
   private Button startMatch;
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.new_match);

     startMatch= (Button) findViewById(R.id.startMatch);
        startMatch.setOnClickListener(new View.OnClickListener(){

            public void onClick(View arg0) {
                startMatch();

            }

        });
}

public void startMatch(){
    Intent startMatch= new Intent(this, MatchPage.class);

    //Prendo il testo scritto nella casella locali e la porto nella partita
    EditText locali= (EditText) findViewById(R.id.Locali);
    String locali1 = locali.getText().toString();
    startMatch.putExtra(LOCALI, locali1);
    //Prendo il testo scritto nella casella ospiti e la porto nella partita
    EditText ospiti= (EditText) findViewById(R.id.Ospiti);
    String ospiti1 = ospiti.getText().toString();
    startMatch.putExtra(OSPITI, ospiti1);
    //inizio la partita
    startActivity(startMatch);
}

    } 
```

最后是 logcat 日志：

```
 04-24 16:49:08.928: W/dalvikvm(1377): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
    04-24 16:49:08.958: E/AndroidRuntime(1377): FATAL EXCEPTION: main
    04-24 16:49:08.958: E/AndroidRuntime(1377): java.lang.RuntimeException: Unable to start activity    ComponentInfo{com.gmail.david.corsalini.sportscout/com.gmail.david.corsalini.sportscout.MatchPage}: java.lang.NullPointerException
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at android.os.Handler.dispatchMessage(Handler.java:99)
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at android.os.Looper.loop(Looper.java:137)
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at android.app.ActivityThread.main(ActivityThread.java:4424)
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at java.lang.reflect.Method.invokeNative(Native Method)
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at java.lang.reflect.Method.invoke(Method.java:511)
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at dalvik.system.NativeStart.main(Native Method)
    04-24 16:49:08.958: E/AndroidRuntime(1377): Caused by: java.lang.NullPointerException
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at com.gmail.david.corsalini.sportscout.MatchPage.onCreate(MatchPage.java:25)
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at android.app.Activity.performCreate(Activity.java:4465)
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    04-24 16:49:08.958: E/AndroidRuntime(1377):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
    04-24 16:49:08.958: E/AndroidRuntime(1377):     ... 11 more 
```

比赛橄榄球课

```
 public class MatchRugby {
public TeamRugby teamA;
public TeamRugby teamB;

/**
 * Costruttore della partita
 */
public MatchRugby(TeamRugby teamA, TeamRugby teamB){
    this.teamA=teamA;
    this.teamB=teamB;
}

/**
 * @return the teamA
 */
public TeamRugby getTeamA() {
    return teamA;
}

/**
 * @param teamA the teamA to set
 */
public void setTeamA(TeamRugby teamA) {
    this.teamA = teamA;
}

/**
 * @return the teamB
 */
public TeamRugby getTeamB() {
    return teamB;
}

/**
 * @param teamB the teamB to set
 */
public void setTeamB(TeamRugby teamB) {
    this.teamB = teamB;
}

public void EndOfMatch(){
    //nothing to do with the problem
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:25:26.020

您的变量范围已全部关闭。像这样设置你的课程：

```
public class MatchPage extends Activity {
private String locali= null;
private String ospiti= null;
private TextView localiTV;
private TextView ospitiTV;
private MatchRugby partita;
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.match);
     localiTV =(TextView) findViewById(R.id.localiTV);
     ospitiTV =(TextView) findViewById(R.id.ospitiTV);
    getLocali();
    getOspiti();
    createMatch();

     localiTV.setText("Locali /n"+ partita.teamA.getName());
     ospitiTV.setText("Ospiti /n"+ partita.teamB.getName());

}

/**
 * Prende il nome della squadra locale dall'intent
 * @return
 */
public String getLocali(){
    if (locali == null) {
      Intent matchStart = getIntent();
      locali = matchStart.getStringExtra(NewMatchPage.LOCALI);
    }
    return locali;
}

/**
 * prende il nome della squadra ospite dall'intent
 * @return
 */
public String getOspiti(){
    if (ospiti == null) {
      Intent matchStart = getIntent();
      ospiti = matchStart.getStringExtra(NewMatchPage.OSPITI);
    }
    return ospiti;
}

public MatchRugby createMatch(){
    TeamRugby teamLocali= new TeamRugby(locali);
    TeamRugby teamOspiti= new TeamRugby(ospiti);
    partita = new MatchRugby(teamLocali, teamOspiti);
    return partita
}

  private String locali
  private String ospiti
  private MatchRugby partita
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:15:37.623

```
java.lang.NullPointerException
   at com.gmail.david.corsalini.sportscout.MatchPage.onCreate(MatchPage.java:25) 
```

似乎您的 partita 对象从上述错误中为空。并从您初始化它的代码中

```
createMatch(); 
```

用下面的行替换上面的方法

```
partita = createMatch(); 
```

您也可以更改以下代码::

```
public void createMatch(){
    TeamRugby teamLocali= new TeamRugby(locali);
    TeamRugby teamOspiti= new TeamRugby(ospiti);
    partita= new MatchRugby(teamLocali, teamOspiti);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:17:06.420

您在方法中的类的`NullPointerException`第 25 行有一个。不确定您发布的代码中到底是哪一行，但我最好的猜测是您的电话找不到任何东西。`MatchPage``onCreate``findViewById`

# php - PHP - 允许的内存大小为 33554432 字节已用尽（尝试分配 12864 字节）

> ID：10302721
> 
> 赞同：1
> 
> 时间：2012-04-24T17:13:19.250
> 
> 标签：php, memory-management, file-upload, fatal-error

当我尝试上传 3,424KB 的文件并收到此错误时，我收到此错误

```
Fatal error: Allowed memory size of 33554432 bytes exhausted (tried to allocate 12864 bytes) 
```

但是当我尝试上传 4,891KB 的文件时它很好，这是为什么？

我还更新了我的 php5.ini 文件，权限很好，一切正常。

任何提示都会很棒谢谢！

Ĵ

这是发生错误的代码行：

```
 $image = imagecreatefromjpeg($source); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T17:24:11.253

gd 库完全解压缩`.jpg`内存中的文件。所以只有像素大小很重要，而不是上传的文件有多大。

你需要增加[`memory_limit`](http://php.net/manual/en/ini.core.php#ini.memory-limit)一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:36:03.453

## 尖端

A. GD 失败，因为图像未压缩。

B. 用户`memory_limit`增加内存

C. 使用 Imagick 它是内存高效的

D. 将图像重新调整到可管理的大小

例子

```
try 
{
    $img = new Imagick ( $imageLarge );
    $img->thumbnailImage ( 500, 500, TRUE );
    $img->writeImage ( $imageCute );
} 
catch ( Exception $e ) 
{
    echo 'Caught exception: ', $e->getMessage (), "\n";
} 
```

# javascript - 从 HTML 元素（例如 onclick 处理程序）调用 RequireJs 模块中的方法

> ID：10302724
> 
> 赞同：34
> 
> 时间：2012-04-24T17:13:27.677
> 
> 标签：javascript, html, module, requirejs

我正在使用[require.js](http://requirejs.org/)将项目从“旧”浏览器样式模块结构更改为“新”浏览器**或***服务器端javascript*模块结构。

在客户端上，我使用的是异地托管的 jQuery，所以我从他们在README的[“使用优先级配置”技术中给出的示例开始：](https://github.com/jrburke/require-jquery/blob/master/README.md)

```
<title>My Page</title>
<script src="scripts/require.js"></script>
<script>
require({
    baseUrl: 'scripts',
    paths: {
        jquery: 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min',
        jqueryui: ...,
        ...
        ... // bunch more paths here
    },
    priority: ['jquery']
}, [ 'main' ]);
</script> 
```

这实际上工作正常。但我想将功能从 main 导出到 HTML 网页本身。例如：

```
<a class="button" href="#" onclick="MyApi.foo();">
    <img src="foo.png" alt="foo" />Click for: <b>Foo!</b>
</a> 
```

在适应 AMD 模块模式之前，我通过在全局空间中创建字典对象来公开各种文件的功能：

```
// main.js

var MyApi = {};

jQuery(document).ready(function($) {
    // ...unexported code goes here...

    // export function via MyApi
    MyApi.foo = function() {
        alert("Foo!");
    };
}); 
```

但我不知道 require.js 中的正确方法是什么。是否可以将 HTML more`require`语句放入`<script>`标签内，然后命名模块以便可以在网页内使用？或者这是否应该始终在 main.js 中动态完成，例如`$('#foobutton').click(...)`？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-29T22:44:04.213

使用 AMD 的一个好处是不再需要命名空间。尝试使用 RequireJS 再次创建它们将违背 AMD 提倡的模式。

关于使用`main.js`，只有当您有一个单页应用程序并且您的所有代码都从一个地方引用时，这才是真正合适的。您可以根据需要随意调用其他模块来 require 和加载其他模块。

使用上面的示例，您可以这样处理：

**foo.js**

```
define(['jquery'], function($) {

    // Some set up 
    // code here

    // Return module with methods
    return {
        bar: function() {

        }
    }

}); 
```

**page.js**

```
require(['foo'], function(foo) {

    // jQuery loaded by foo module so free to use it
    $('.button').on('click', function(e) {
        foo.bar();
        e.preventDefault();
    });

}); 
```

然后在您的页面中使用 require 请求 page.js 文件。

使用上面的示例：

```
require({
    // config stuff here
}, [ 'page' ]); 
```

或将其加载到更下方的页面中：

```
<script>
    require(['page']);
</script> 
```

**一些额外的点**

*   使用上面的模式，page.js 可以很容易地需要许多其他模块来加载其他与页面相关的功能。

*   在将成员附加到全局命名空间之前，您现在将该代码拆分为可以在任何页面上重复使用的单独模块。所有这些都不依赖于全局对象。

*   使用 require 这种方式将事件附加到您的 DOM 元素很可能[依赖于](http://requirejs.org/docs/download.html#domReady)RequireJS 提供的 DOM Ready 模块

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-11T00:16:20.207

您还可以在 javascript 的窗口类上设置引用。

在应用程序模块的底部`window.MyApi = MyApi;`

`<a class="button" href="#" onclick="MyApi.foo();"></a>`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T07:35:26.887

把`onclick=""`你的标记放进去感觉很脏——把展示和内容混在一起。我建议您添加一个`<script>`块并将其放入其中，一旦进入回调，并在必要时`require`放入另一个内部，然后以正常方式连接您的事件处理程序： . 如果您可以做到这一点足够通用以使其适用于多个页面，那么将其放在一个被缩小、组合和缓存的外部文件中。但通常这些事情最终都是特定于页面的，因此页面底部的标签是避免另一个外部资源请求的好解决方案。`$(document).ready()``$('#node').click(...)``<script>`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-02T07:41:26.230

另一种解决方案就是使用这样的代码（当然`requirejs`必须添加到页面中）：

```
<input type="button" onclick="(function() { require('mymodule').do_work() })()"/> 
```

# html - 访问多个Perl CGI 的 -ed 参数 我正在使用 Perl CGI 模块。如果我有这样的 HTML <select multiple="" name="FILTER_SITE"><option>1</option> <option>2</option></select> 并提交我的表单，我可以在 URL 中得到类似的内容：[ ..] FILTER_SITE=1&FILTER_SITE=2 Perl 的我的

> ID：10302730
> 
> 赞同：1
> 
> 时间：2012-04-24T17:13:47.610
> 
> 标签：html, perl, cgi

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T17:39:36.847

***注意：当前文档（截至 2020 年 5 月 29 日）表示此方法可能会导致安全漏洞。请在下面查看我的答案。***

该`param`方法在标量上下文中提供单个值，在列表上下文中（可能）提供多个值。[在这里](https://metacpan.org/module/CGI#FETCHING-THE-VALUE-OR-VALUES-OF-A-SINGLE-NAMED-PARAMETER:)阅读。

因此，如果您将代码更改为，例如

```
my @FILTER_SITE   = $cgi->param('FILTER_SITE'); 
```

那么该数组将包含该选项的所有选定值。

如果它更适合您的代码，您也可以编写

```
for my $FILTER_SITE ($cgi->param('FILTER_SITE')) {
  :
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-30T01:56:39.793

我知道这是一篇旧帖子，但自从回答了这个问题以来，似乎几乎没有什么变化。我想发布有关此的最新信息，特别是因为现在接受的答案被认为是一个安全漏洞。[CGI.pm 文档说](https://metacpan.org/pod/CGI)

{ `Warning - calling param() in list context can lead to vulnerabilities if you do not sanitise user input as it is possible to inject other param keys and values into your code. This is why the multi_param() method exists, to make it clear that a list is being returned, note that param() can still be called in list context and will return a list for back compatibility.`}

建议改用`$cgi->multi_param`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T07:44:28.440

解析值示例

```
 #!/usr/bin/perl

    use Encode;

    print "Content-Type: text/html; charset=UTF-8\n\n";

    if($ENV{'REQUEST_METHOD'} eq "POST") {
      read(STDIN, $querystring, $ENV{'CONTENT_LENGTH'});
     print "<h1>POST</h1>";
    } else {
      print "<h1>GET</h1>";
      $type = "display_form";
      $querystring = $ENV{'QUERY_STRING'};
    }

    print "<p>$querystring</p>";

    if (length ($querystring) > 0){
      @pairs = split(/&/, $querystring);
      foreach $pair (@pairs){
           ($name, $value) = split(/=/, $pair);
           $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg;
           $name =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg;
           if (exists $in{$name}) {
             $value = "$value,$in{$name}";
           }
           $in{$name} = $value;
      }
    }

   foreach my $val (sort keys %in) {
     print "<p>$val: $in{$val}</p>";
   } 
```

# vb.net - 表格未定义 VB.NET

> ID：10302731
> 
> 赞同：2
> 
> 时间：2012-04-24T17:13:48.497
> 
> 标签：vb.net, winforms

我正在尝试将表单对象存储到变量中，但没有成功：

此代码不起作用：

```
Dim invoice_form As billing_new_invoice

    'Get last remote Row
    Dim last_row As Integer = CType(main.ActiveMdiChild, invoice_form).invoiceitems_new_invoice.Rows.Count - 1

    Dim count_row As Integer = CType(main.ActiveMdiChild, invoice_form).invoiceitems_new_invoice.Rows.Count() 
```

此代码有效：

```
Dim invoice_form As billing_new_invoice

    'Get last remote Row
    Dim last_row As Integer = CType(main.ActiveMdiChild, billing_new_invoice).invoiceitems_new_invoice.Rows.Count - 1

    Dim count_row As Integer = CType(main.ActiveMdiChild, billing_new_invoice).invoiceitems_new_invoice.Rows.Count() 
```

![错误](../Images/f37ad9b247b44f25bd4ab4455df1dccc.png)

我需要将表单实例存储在变量（invoice_form）中，该变量可以在多行代码中使用，但它说（未定义类型'invoice_form'。）有人有想法解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:48:58.470

不是很清楚是什么问题。我想你正在寻找这样的东西：

```
If TypeOf Me.ActiveMdiChild Is billing_new_invoice Then
  Dim invoice_Form As billing_new_invoice = Me.ActiveMdiChild

  Dim last_row As Integer = invoice_form.invoiceitems_new_invoice.Rows.Count - 1
  Dim count_row As Integer = invoice_form.invoiceitems_new_invoice.Rows.Count()

  //'etc

End If 
```

代码不起作用的问题是它试图将其转换为变量，而不是类型。 `invoice_form`是变量，`billing_new_invoice`是类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T17:49:04.427

CType 用于类型转换，而不是变量赋值。您要做的是首先将变量分配给表单，然后使用该变量：

```
Dim invoice_form As billing_new_invoice = CType(main.ActiveMdiChild, billing_new_invoice)
Dim last_row As Integer = invoice_form.invoiceitems_new_invoice.Rows.Count - 1 
```

# php - php pdo插入语句不起作用

> ID：10302739
> 
> 赞同：2
> 
> 时间：2012-04-24T17:14:27.563
> 
> 标签：php, mysql, insert, pdo

我在主机鳄鱼上有一个网站。我可以连接我的 pdo 语句，但插入语句似乎不起作用。现在我已经定义了这些值，但我计划使用从前一页表单中的 $_POST 中提取的变量。

```
<?php

/*** mysql hostname ***/
$hostname = 'xxx.xxx.xxx.xxx';

/*** mysql username ***/
$username = 'pressgym_admin';

/*** mysql password ***/
$password = '*******';  <-started out on purpose

try {
$dbh = new PDO("mysql:host=$hostname;dbname=pressgym_press", $username, $password);
/*** echo a message saying we have connected ***/
$qry = $dbh->prepare('INSERT INTO contact (Name, Email Address, Message, Date) VALUES (?, ?, ?, ?');
$qry->execute(array('Brandon', 'Brandon.braner@gmail.com', 'test message', '3.12.12'));

echo 'entry succesfull';

}
catch(PDOException $e)
{
echo $e->getMessage();
}
?>

   describe contact;
   Name varchar(255)    NO  PRI     
   EmailAddress varchar(255)    NO          
   Message  longtext    NO          
   Date varchar(255)    YES 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T17:18:09.243

命令中的 SQL 语法`prepare`包含错误：

```
qry = $dbh->prepare('INSERT INTO contact (Name, Email Address, Message, Date) VALUES (?, ?, ?), ?'); 
```

应该

```
qry = $dbh->prepare('INSERT INTO contact (Name, `Email Address`, Message, Date) VALUES (?, ?, ?, ?)'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T17:18:57.463

你有一个语法错误。以下行

```
$qry = $dbh->prepare('INSERT INTO contact (Name, Email Address, Message, Date) VALUES(?, ?, ?), ?'); 
```

应该

```
$qry = $dbh->prepare('INSERT INTO contact (Name, Email Address, Message, Date) VALUES (?, ?, ?, ?)'); 
```

更新：

您的列名电子邮件地址包含一个空格，通过使用正确的引号标识符来转义它，例如

```
INSERT INTO contact (Name, `Email Address`, Message, Date) VALUES (?, ?, ?, ?)' 
```

# git - git 如何融入您的 Web 工作流程？

> ID：10302744
> 
> 赞同：0
> 
> 时间：2012-04-24T17:15:00.633
> 
> 标签：git, repository, workflow

我一直在研究 Git，并且了解了基本概念，除了它如何适合小团队的工作流程。

据我了解，我想要：

1.  一个共享的半公开仓库供我和我的团队使用（将更改提取到我们的本地副本中）并在其中测试功能。

2.  一个仓库，我们推送任何经过测试并准备上线的东西。

3.  一个实时存储库，其中工作目录是实际网站的根文件夹

我是否理解这一点或使它比需要的更复杂？只是想把我的想法包裹起来，很少有教程会详细介绍这个主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:48:46.313

我的开发团队只有一个远程仓库，所有更改都被推送。

开发中的功能被分支以避免破坏主副本，因此可能同时有多个活动分支。每个开发人员都有一个实际运行在开发服务器上的“本地”存储库（我们倾向于通过 SSH 使用 VIM 进行开发）。每个“本地”存储库都设置为带有用户名标记的唯一虚拟主机。因此，开发服务器上可能会运行三个或四个不同版本的站点。这允许开发人员立即测试代码更改。

在准备发布时，所有完成的分支都被合并，生成的代码通过 git 拉到与生产环境紧密匹配的预部署服务器。批准后，特定的提交会被标记版本号，并使用 git 或 rsynced 拉到生产服务器上，并在生产服务器上进行更多测试以确保部署顺利进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:51:14.400

您可以应用许多 git 工作流程，但如果您需要一个起点，我会推荐[nvie 博客文章，它解释了一种很好的集中方式来通过](http://nvie.com/posts/a-successful-git-branching-model/)**分支**管理您的应用程序中的更改。

您可以在[http://progit.org/book/ch3-4.html](http://progit.org/book/ch3-4.html)上阅读更多相关信息。

此外，似乎有人已经问过这个问题：[Git branch strategy for small dev team](https://stackoverflow.com/questions/2428722/git-branch-strategy-for-small-dev-team)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:58:36.173

而不是使用多个存储库进行开发/发布/...我会在一个存储库中使用分支。

有关可能的模型（以及如何在团队中使用）的更多想法可以在此博客文章中找到：http: [//nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

（不要害怕，上面的图表看起来很复杂，但是如果你只是阅读文章就会变得很清楚:)）

* * *

在一个不相关的说明中：Git 非常强大，对很多事情都有好处，但使用起来也很复杂（这两者正是你对内核黑客编写的版本控制系统所期望的；D）。

对于去中心化的 VCS，[Bazaar](http://bazaar.canonical.com)可能是一个不错的选择。它与 git 共享基本思想。但是我从许多不同的人那里反复听到，对于没有计算机科学背景并且可能第一次使用版本控制的团队来说，这往往更容易处理。

（以防万一符合您的标准。我不了解您的团队，并且人们的背景和经验范围在 Web 开发方面相当广泛。也不想在这里引发 VCS 火战。）

# web-services - 签名基本字符串中省略了 RestSharp OAuth1Authenticator GET 参数

> ID：10302746
> 
> 赞同：1
> 
> 时间：2012-04-24T17:15:04.597
> 
> 标签：web-services, rest, oauth, restsharp

我正在尝试使用 RestSharp 编写 OAuth 1 REST 客户端，但在 GET 请求中遇到了一些无效签名问题。我单步执行了代码，似乎问题在于，对于 GET 请求，签名基本字符串中省略了请求参数。特别是，OAuth1Authenticator.cs 中的违规代码是这样的：

```
// for non-GET style requests make sure params are part of oauth signature
if (request.Method != Method.GET && request.Method != Method.DELETE)
{
    foreach (var p in request.Parameters.Where(p => p.Type == ParameterType.GetOrPost))
    {
        parameters.Add(new WebPair(p.Name, p.Value.ToString()));
    }
} 
```

如果我删除 if 语句，它会按预期工作。

我是不是误会了什么？基于此处 OAuth 规范中的签名基本字符串示例：http: [//oauth.net/core/1.0a/#sig_base_example](http://oauth.net/core/1.0a/#sig_base_example)，看起来应该将这些参数添加到基本签名中。这是 OAuth1Authenticator 中的错误，还是我做错了什么？

谢谢！

# css - 如何在列表元素的下一行缩进文本

> ID：10302747
> 
> 赞同：1
> 
> 时间：2012-04-24T17:15:05.393
> 
> 标签：css

我有一个无序列表：

```
<ul class="list_arrow2">
    <li>
        <span style="display: inline-block; width: 150px; font-weight: bold;">
            Signup Options </span>&ndash; &nbsp; Describe your signup options 
            that an applicant can choose from. List the signup option type, 
            description, and price. For example, the two signup options might be 
            Customer or Distributor; each option would carry a different description 
            of cost and details.
    </li>
    <li>
        <span style="display: inline-block; width: 150px; font-weight: bold;">
            Order Options </span>&ndash; &nbsp; Indicate any additional purchase 
            options that an applicant may have. This may be in the form of a single 
            item or package item order. For example, you might want to give the 
            applicant a choice to purchase a "starter kit" that includes various 
            products that you sell. Be sure to list the details of these items, 
            including a description and price.
    </li>
    <li>
        <span style="display: inline-block; width: 150px; font-weight: bold;">
            Autoship Options </span>&ndash; &nbsp; This section can be exclusive 
            of the Order Options section or you can include both. The Autoship 
            section is just like the Order Options section except that the applicant 
            is agreeing to receive the order on an monthly, recurring basis. Be 
            sure to include descriptions, pricing, etc.
    </li>
    <li>
        <span style="display: inline-block; width: 150px; font-weight: bold;">
            Payment Options </span>&ndash; &nbsp; List the types of credit cards 
            you accept (Visa, M/C, AMEX, Diners). Also, if you intend on taking 
            personal checks online, or ACH, be sure to add this to your details. 
            If you plan on taking online checks, or ACH, please contact your Account 
            Manager for more details on getting this set up.
    </li>
    <li>
        <span style="display: inline-block; width: 150px; font-weight: bold;">
            Terms and Conditions</span>&ndash; &nbsp; Please provide the full text 
            of your terms and conditions and/or Distributor Agreement. This will 
            be displayed for the applicant to agree to before proceeding with 
            their registration.
    </li>
    <li>
        <span style="display: inline-block; width: 150px; font-weight: bold;">
            Confirmation Message </span>&ndash; &nbsp; Please provide us with 
            the text that is displayed once the applicant successfully signs up. 
            This text is also emailed to the new applicant.
    </li>
    <li>
        <span style="display: inline-block; width: 150px; font-weight: bold;">
            Welcome Message </span>&ndash; &nbsp; Please provide us with the text 
            that is displayed as an introduction to the applicant.
    </li>
</ul> 
```

现在，如果文本溢出到下一行，它将一直向左对齐（例如在订单选项下的右侧）。保持列表标题（订单选项）与左侧对齐的最佳方法是什么，以及描述订单选项的文本是否溢出到下一行以与其自身对齐？

```
订单选项 - 这是一些文本
我在流动的文字上很丑

订单选项 - 这是一些文本
                我的文字很溢出！

```

编辑：

这是我的CSS

```
ul.list_arrow, ul.list_arrow2 {
    margin: 0px 0 15px 15px!important;
}
ul.list_arrow li {
    padding: 2px 2px 2px 0px;
    list-style-image: url(../images/icon/arrow_a.gif);
}
ul.list_arrow2 li {
    padding: 2px 2px 2px 0px;
    list-style-image:url(../images/icon/arrow.png)
}

dl.list_arrow, dl.list_arrow2 {
    margin: 0px 0 15px 15px!important;
}
dl.list_arrow dt {
    padding: 2px 2px 2px 0px;
    list-style-image: url(../images/icon/arrow_a.gif);
}
dl.list_arrow2 dt {
    padding: 2px 2px 2px 0px;
    list-style-image:url(../images/icon/arrow.png)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:24:16.017

你可能会缩进跨度，就像这样（[小提琴here](http://jsfiddle.net/rjzaworski/fTTBu/)）：

```
li {
  padding-left:150px;
}

li span {
  margin-left: -150px;
}​ 
```

不过，更好的方法是设置悬挂缩进（[小提琴](http://jsfiddle.net/rjzaworski/ZbXYC/1/)）：

```
li {
  margin-left:150px;
  text-indent:-150px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:32:15.573

定义列表会更好地满足您的需求。请参阅此**[jsFiddle 示例](http://jsfiddle.net/j08691/w29sd/)**。

HTML

```
<dl class="list_arrow2">
    <dt>Signup Options </dt>
    <dd>–&amp;nbsp;&nbsp; Describe your signup options that an applicant can choose 
    from. List the signup option type, description, and price. For example, the 
    two signup options might be Customer or Distributor; each option would carry 
    a different description of cost and details</dd>
    <dt>Order Options </dt>
    <dd>–&amp;nbsp;&nbsp; Indicate any additional purchase options that an applicant 
    may have. This may be in the form of a single item or package item order. For 
    example, you might want to give the applicant a choice to purchase a &quot;starter 
    kit&quot; that includes various products that you sell. Be sure to list the details 
    of these items, including a description and price. </dd>
    <dt>Autoship Options </dt>
    <dd>–&amp;nbsp;&nbsp; This section can be exclusive of the Order Options section 
    or you can include both. The Autoship section is just like the Order Options 
    section except that the applicant is agreeing to receive the order on an monthly, 
    recurring basis. Be sure to include descriptions, pricing, etc. </dd>
    <dt>Payment Options </dt>
    <dd>–&amp;nbsp;&nbsp; List the types of credit cards you accept (Visa, M/C, AMEX, 
    Diners). Also, if you intend on taking personal checks online, or ACH, be sure 
    to add this to your details. If you plan on taking online checks, or ACH, please 
    contact your Account Manager for more details on getting this set up. </dd>
    <dt>Terms and Conditions</dt>
    <dd>–&amp;nbsp;&nbsp; Please provide the full text of your terms and conditions 
    and/or Distributor Agreement. This will be displayed for the applicant to agree 
    to before proceeding with their registration. </dd>
    <dt>Confirmation Message </dt>
    <dd>–&amp;nbsp;&nbsp; Please provide us with the text that is displayed once the 
    applicant successfully signs up. This text is also emailed to the new applicant.
    </dd>
    <dt>Welcome Message </dt>
    <dd>–&amp;nbsp;&nbsp; Please provide us with the text that is displayed as an introduction 
    to the applicant. </dd>
</dl> 
```

​</p>

# c# - 代理使用 Ninject.Extensions.Interception.Linfu 暴露多个接口

> ID：10302750
> 
> 赞同：1
> 
> 时间：2012-04-24T17:15:20.650
> 
> 标签：c#, proxy, ninject-interception, linfu

我正在使用`Ninject.Extensions.Interception`（更具体地说，`InterceptAttribute`）和`Ninject.Extensions.Interception.Linfu`代理在我的 C# 应用程序中实现日志记录机制，但是当代理类实现多个接口时，我遇到了一些问题。

我有一个实现接口并从抽象类继承的类。

```
public class MyClass : AbstractClass, IMyClass {
  public string SomeProperty { get; set; }
}

public class LoggableAttribute : InterceptAttribute { ... }

public interface IMyClass {
  public string SomeProperty { get; set; }
}

public abstract class AbstractClass {

  [Loggable]
  public virtual void SomeMethod(){ ... }
} 
```

当我尝试从 ServiceLocator 获取 MyClass 的实例时，*Loggable*属性会导致它返回一个代理。

```
var proxy = _serviceLocator.GetInstance<IMyClass>(); 
```

问题是返回的代理只识别*AbstractClass*接口，暴露*SomeMethod()*。`ArgumentException`因此，当我尝试访问不存在的*SomeProperty*时，我会收到一个。

```
//ArgumentException
proxy.SomeProperty = "Hi"; 
```

在这种情况下，有没有办法使用 mixin 或其他一些技术来创建一个暴露多个接口的代理？

谢谢

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T00:02:16.423

我遇到了类似的问题，但没有找到仅使用 ninject 方法的优雅解决方案。所以我用 OOP 中的一个更基本的模式解决了这个问题：组合。

适用于您的问题是我的建议：

```
public interface IInterceptedMethods
{
    void MethodA();
}

public interface IMyClass
{
    void MethodA();
    void MethodB();
}

public class MyInterceptedMethods : IInterceptedMethods
{
    [Loggable]
    public virtual void MethodA()
    {
        //Do stuff
    }
}

public class MyClass : IMyClass
{
    private IInterceptedMethods _IInterceptedMethods;
    public MyClass(IInterceptedMethods InterceptedMethods)
    {
        this._IInterceptedMethods = InterceptedMethods;
    }
    public MethodA()
    {
        this._IInterceptedMethods.MethodA();
    }
    public Method()
    {
        //Do stuff, but don't get intercepted
    }
} 
```

# widget - 如何在 iBook 小部件中设置自定义字体？

> ID：10302752
> 
> 赞同：0
> 
> 时间：2012-04-24T17:15:25.383
> 
> 标签：widget, font-face, ibooks

我正在创建一个 iBook，我在这个 iBook 中有一个小部件。

我希望小部件使用自定义字体，因此我在 .WDGT 文件夹中添加了一个包含 myfont.ttf 的 myfont/ 文件夹。

我使用 CSS 从小部件 main.html 调用它，在桌面上的 Safari 上测试时效果很好。它在 iPhone 中失败。我错过了一些步骤吗？我是否必须通过 plist 条目以某种方式告诉 iPad 在文件夹中查找？

相关CSS代码：

```
 @font-face {
     font-family: kheldarfont;
      src: url('kheldarfont/kheldarfont.ttf');
  }

 #scorebox{
    font: xx-large "kheldarfont";
 } 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:23:23.803

在仪表板小部件中，我会使用：

在*Info.plist 中*

```
<key>Fonts</key>
<array>
<string>kheldarfont</string> 
 </array> 
```

但不幸的是，根据[苹果的支持：](http://support.apple.com/kb/HT5068)

```
Fonts   iBooks Author widgets cannot use bundled fonts. 
```

# eclipse - 将复杂的 Eclipse 安装保存在源代码控制中

> ID：10302754
> 
> 赞同：1
> 
> 时间：2012-04-24T17:15:27.703
> 
> 标签：eclipse

您是否发现在源代码管理中存储 eclipse 安装有任何问题？为 Eclipse 安装所有插件可能会很困难，并且破坏一个安装是相当粗糙的。我之前保留了预配置的 zip，但让它们保持最新状态有点麻烦。

我想我可以将 eclipse + 安装的插件添加到源代码控制中，然后让我的团队签出 eclipse。我们可以使用源代码控制更新和回滚（向用户社区广播更改）。在调试 Eclipse 启动失败时，我们还可以使用它来调试与已知良好的不同之处。

有没有人尝试过这种方法或遇到过这种方法的问题？

谢谢

彼得

# excel - 评估在另一个单元格中定义的公式

> ID：10302760
> 
> 赞同：4
> 
> 时间：2012-04-24T17:15:51.633
> 
> 标签：excel, xlm

假设我在 cell 中有一个函数名称`A1`like ，在and`SUM`中有一些数据。有没有办法在一个单元格中定义一个公式，以便它调用定义在其中的公式并让它作为数据工作？`B1``C1``A1``B1``C1`

所以像：
`=A1(B1:C1)`应该等于，`=SUM(B1:C1)`因为它`A1`包含这个词`SUM`。

本质上，可能是 C 中的预处理器宏或函数指针之类的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T17:26:28.150

您可以通过在模块中创建用户定义的函数来使用 vba：

```
Public Function applyFunction(functionName As Range, argument As Range) As Variant
    applyFunction = Evaluate(functionName & "(" & argument.Address & ")")
End Function 
```

如果你把`SUM`A1放进去，B1、B2、B3里面有1、2、3，`=applyFunction(A1,B1:B3)`会返回6。相当于调用`=SUM(B1:B3)`.

**编辑**

如果您真的不想使用 VBA，您可以创建一个名称（我认为在 excel 2003 中插入​​名称，在 Excel 2010 中定义名称）：

*   定义一个新名称（比如说`eval1`）
*   在引用区域中，输入`=EVALUATE(A1&"(B1:B3)")`，其中 A1 包含 SUM 而 B1:B3 是包含数字的范围
*   在空白单元格中，键入`=eval1`它应该返回结果

但这种方法不太灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:44:02.123

如果您想改用公式，则可以使用 SUBTOTAL() 函数。但是，它有点有限。

查看图片。它使用对小计的功能编号的引用。如果要使用函数的名称，可以通过创建 vlookup 函数来扩展它，但您还必须提供一种方法来确定使用常规函数 num 还是忽略数据范围中隐藏值的 101 类型值.

查看此链接了解更多信息： http: [//office.microsoft.com/en-us/excel-help/subtotal-function-HP010062463.aspx](http://office.microsoft.com/en-us/excel-help/subtotal-function-HP010062463.aspx)

![在此处输入图像描述](../Images/10e9c8f6e1d34f42463e09cb7e5d598f.png)

# java - Java 中的操纵杆支持

> ID：10302764
> 
> 赞同：10
> 
> 时间：2012-04-24T17:15:57.170
> 
> 标签：java, joystick

是否有任何库允许访问 Java 中的操纵杆输入？

最低要求是它可以在 Windows 下工作，能够检测所有连接的操纵杆并处理轴和按钮。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T17:22:59.883

试试 JInput [https://github.com/jinput/jinput](https://github.com/jinput/jinput)

它甚至可以在 Linux 上运行 :)

# c# - 加快 html 敏捷包中的解析

> ID：10302766
> 
> 赞同：0
> 
> 时间：2012-04-24T17:16:05.427
> 
> 标签：c#, html-agility-pack, web-crawler, google-local-search

这是我用来通过 html 敏捷包获取某些标签的方法。我用这个方法用google local做排名。这似乎需要相当多的时间并且是内存密集型的，有没有人有任何建议可以让它变得更好？

```
 private void findGoogleLocal(HtmlNode node) {

     String   name        = String.Empty;
     // 
     // ----------------------------------------
     if (node.Attributes["id"] != null) {

       if (node.Attributes["id"].Value.ToString().Contains("panel_") &&   node.Attributes["id"].Value.ToString() != "panel__")
        {
        GoogleLocalResults.Add(new Result(URLGoogleLocal, Listing, node, SearchEngine.Google, SearchType.Local, ResultType.GooglePlaces));
        }
    }

    if (node.HasChildNodes) {
      foreach (HtmlNode children in node.ChildNodes)  {
        findGoogleLocal(children);
      }
    }

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:35:42.097

为什么这个方法必须是递归的？一口气获取所有节点（使用 HAP 中的 Linq 支持的示例）：

```
var results = node.Descendants()
                  .Where(x=> x.Attributes["id"]!= null && 
                             x.Attributes["id"].Value.Contains("panel_") &&  
                             x.Attributes["id"].Value!= "panel__")
                  .Select( x=> new Result(URLGoogleLocal, Listing, x, SearchEngine.Google, SearchType.Local, ResultType.GooglePlaces)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:16:12.670

我只想添加另一个干净、简单且快速的解决方案：使用[XPath](http://www.w3schools.com/xpath/)。

```
var results = node
                .SelectNodes(@"//*[contains(@id, 'panel_') and @id != 'panel__']")
                .Select(x => new Result(URLGoogleLocal, Listing, x, SearchEngine.Google, SearchType.Local, ResultType.GooglePlaces));
foreach (var result in results)
    GoogleLocalResults.Add(result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:22:20.137

Fizzler：HAP 的 CSS 选择器引擎

[http://code.google.com/p/fizzler/](http://code.google.com/p/fizzler/)

# jquery - 如何在jquery mobile可折叠列表中添加多个图标

> ID：10302769
> 
> 赞同：4
> 
> 时间：2012-04-24T17:16:22.607
> 
> 标签：jquery, jquery-mobile, mobile, icons

我想在 jquery 移动可折叠列表的加号图标附近添加另一个图标。但无法添加它，因为 jquery mobile 会动态创建该图标。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:33:33.267

This is certainly a hack but you can wait for the page to initialize, then find the list-view widget and append the jQuery Mobile HTML for an icon to each list-item:

```
//wait for a certain pseudo-page to initialize
$(document).delegate('#home', 'pageinit', function () {

    //find the listview and append to it's second tier children (the `<div class="ui-btn-inner ui-li" />` element)
    $(this).find('ul[data-role="listview"]').children().children().append('<span class="ui-icon ui-icon-home ui-icon-shadow" style="right:30px;">&nbsp;</span>');
});​ 
```

Notice I changed the `right` CSS property of the new icon so it doesn't overlap the initial icon.

Here is a demo: [http://jsfiddle.net/uZxXB/](http://jsfiddle.net/uZxXB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T04:57:22.260

```
<fieldset data-role="collapsible" data-iconpos="left" >
                        <h1 ><span    class="ui-icon ui-icon-home ui-icon-shadow ui-btn-icon-right" style="right:30px;">&nbsp;</span>Header</h1> 
```

您可以在html中添加它

两个图标，一个在左边，另一个在右边，将 jQuery min 的 css 更改为文本对齐中心

```
.ui-collapsible-heading .ui-btn{text-align:center;margin:0;border-left-width:0; 
```

# c# - 如何坚持以编程方式构建？

> ID：10302772
> 
> 赞同：1
> 
> 时间：2012-04-24T17:16:34.550
> 
> 标签：c#, visual-studio-2010, persistence, settings

我希望能够`Properties.Settings.Default`在发布之前以编程方式将一些信息加载到其中，但它不会持续存在。我该如何克服呢？

我有（作为测试）：

```
private void button1_Click(object sender, EventArgs e)
{
    Properties.Settings.Default.Setting1 = "abc";
    Properties.Settings.Default.Save();
}

private void button2_Click(object sender, EventArgs e)
{
    Text = Properties.Settings.Default.Setting1;
} 
```

我点击了button1，然后发布（点击一次），然后运行发布的应用程序并点击了button2。`Text`是空的。

如果不发布应用程序，只需将其关闭并重新打开并单击 button2 - 我得到“abc”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:31:43.527

请参阅以下帖子[http://www.codeproject.com/Articles/17659/How-To-Use-the-Settings-Class-in-C](http://www.codeproject.com/Articles/17659/How-To-Use-the-Settings-Class-in-C)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:34:56.357

发布不会为您单击按钮。

您需要检测设置未正确初始化（可能与应用程序设置相比），然后自行设置并保存。

空白 / 不存在 / = somesettingToUpgrade

还有一个按名称查找设置、设置并保存的小程序，然后您可以将其放入按钮单击处理程序以及说 FormLoad。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:32:58.600

似乎问题在于范围是“用户”。但是如果范围是“应用程序”——它就不能以编程方式改变。

所以似乎没有办法做到这一点。坚持以编程方式构建，即。

# java - Java：从新的 JFrame 中获取复选框名称

> ID：10302773
> 
> 赞同：1
> 
> 时间：2012-04-24T17:16:38.590
> 
> 标签：java, swing, jframe, jcheckbox

我有一个 JCheckBox 定义为：

```
JCheckBox NewCB = new JCheckbox();
 NewCB.setSelected(false);
 NewCB.setMnemonic(KeyEvent.VK_C);
 NewCB.addItemListener(this); 
```

此复选框正在使用 ItemLisener：

```
public void itemStateChanged(ItemEvent e) {

    Object source = e.getItemSelectable();
if(source == NewCB) {TEST = "SELECTED"; System.out.println(TEST);}

} 
```

我在程序启动时启动了一个 JFrame。如果我将此 CheckBox 添加到框架中，它可以正常工作。如果我打开第二个 JFrame，并将此复选框添加到第二个框架，则对象源不再起作用。是否需要进行一些其他定义才能让对象源读取任何打开框架的复选框名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:21:26.120

首先，您不能将一个组件添加到多个父级；我不确定那是你的问题。

您称为复选框的“名称”的东西不是复选框的属性，而是指向复选框的变量的属性。区别很重要，因为可能有很多这样的变量。该复选框对指向它的变量一无所知。

鉴于此，我们如何解决问题？您可以设置复选框的“动作命令”，然后检查：

```
 NewCB.setActionCommand("Fred");
 // ...
 if ("Fred".equals(((JCheckBox) source).getActionCommand())))
     // ... 
```

# service - Symfony2：范围扩大异常

> ID：10302775
> 
> 赞同：1
> 
> 时间：2012-04-24T17:16:43.473
> 
> 标签：service, symfony, scope

我想将一个表单和 formHandler 服务注入到我的控制器中。

```
<services>
    <service id="acme_core.image_controller" class="Acme\CoreBundle\Controller\ImageController">
        <argument type="service" id="session" />
        <argument type="service" id="acme_core.image.form" />
        <argument type="service" id="acme_core.image.form.handler" />
        <argument type="service" id="acme_core.image_manager.default" />
    </service>
</services> 
```

> 检测到范围扩大注入：定义“acme_core.image_controller”引用了属于较窄范围的服务“acme_core.image.form.handler”。通常，将“acme_core.image_controller”移动到“request”范围或通过注入容器本身并在每次需要时请求服务“acme_core.image.form.handler”来依赖提供者模式会更安全。然而，在极少数特殊情况下，这可能不是必需的，然后您可以将引用设置为 strict=false 以消除此错误。

这是什么意思？我应该在 image_controller.xml 中添加什么？

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T17:47:03.417

您必须添加`scope="request"`您的服务标签，例如

```
<service id="acme_core.image_controller" class="Acme\CoreBundle\Controller\ImageController" scope="request"> 
```

有关更多信息，请查看[此](http://symfony.com/doc/current/cookbook/service_container/scopes.html)食谱条目。

# css - 在 HTML 表格中将 Div 定位到低位

> ID：10302777
> 
> 赞同：1
> 
> 时间：2012-04-24T17:16:56.437
> 
> 标签：css, html, css-tables

我正面临一个 div 定位问题。

这是描述我的问题的小提琴：http: [//jsfiddle.net/YbJ2q/11/](http://jsfiddle.net/YbJ2q/11/)

如何在不使用 CSS 属性的情况下对齐表格单元格中的红色 div 块`"margin: -20px"`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T17:21:47.107

```
.t{
    ...
   position:relative;
    ...
} 
.handle{
    ...
    top:0px;
    ...
} 
```

[http://jsfiddle.net/YbJ2q/12/](http://jsfiddle.net/YbJ2q/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:25:10.623

您的问题在于您没有将 TD 的垂直对齐设置为`top`.

例子：

[http://jsfiddle.net/YbJ2q/13/](http://jsfiddle.net/YbJ2q/13/)

（我将您的 margin-top 更改为 10px）

# json - JSON在Perl中返回NULL

> ID：10302778
> 
> 赞同：1
> 
> 时间：2012-04-24T17:16:57.817
> 
> 标签：json, perl

当尝试通过`cmd`提示运行我的 perl 脚本时，我的`json`字符串正在返回`[]` ，我已经阅读了其他帖子，并将我的数据库修复为`utf8`，并且错误仍然存​​在。我尝试了两种不同的方式来编码我的 perl 字符串，第一种是`$json = encode_json @temp_array`返回这个错误`hash- or arrayref expected (not a simple scalar, use allow_nonref to allow this` 但是，当我使用这条线时，`$json_text = $json->encode(@temp_array)`我得到了`[]`

这是我的perl：

```
my $json_text;
my $json = JSON->new->utf8;
my @temp_array =[];
my $temp_array;
while (@data = $query_handle->fetchrow_array()) 
    {
    my %json_hash = ();
    my $hash_ref;
    %json_hash = (
                "User ID" => $data[0],
                "Status" => $data[1],
                "Last Password Reset" => $data[2],
                "Reset Needed" => $data[3]
                );
    $hash_ref = \%json_hash;
    push (@temp_array, $hash_ref);
    }   

print $json = encode_json @temp_array . "\n";   #encode with error
print $json_text = $json->encode(@temp_array) . "\n"; #encode with []
print $cgi->header(-type => "application/json", -charset => "utf-8");
print $json_text; #Prints [] 
```

所以在我自己的测试中，通过`cmd prompt`我知道 while 正在正确地从我的数据库中检索数据并正在构建一个哈希，我假设这是正确的。

这是我将哈希引用推送到数组而不是哈希本身的事实吗？一旦我正确构建了这个字符串，我将通过`jquery`

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T17:19:31.490

JSON 需要参考：

```
print $json = encode_json(\@temp_array) . "\n";   
print $json_text = $json->encode(\@temp_array) . "\n"; 
```

编辑：除非您启用[allow_nonref](http://search.cpan.org/~makamaka/JSON-2.53/lib/JSON.pm#allow_nonref)。

另一个编辑：这条线是错误的——

```
my @temp_array =[]; ## should be my @temp_array = (); 
```

并且这一行覆盖了 $json 变量：

```
print $json = encode_json @temp_array . "\n"; ## the next line in your script shouldn't work 
```

上次编辑 - 未经测试：

```
my $json = JSON->new->utf8;
my @temp_array;
while (my @data = $query_handle->fetchrow_array()) {
    my %json_hash = (
            "User ID" => $data[0],
            "Status" => $data[1],
            "Last Password Reset" => $data[2],
            "Reset Needed" => $data[3]
    );
    push (@temp_array, \%json_hash);
}   

print $json->encode(\@temp_array) . "\n"; 
```

# android - 是否有一种方法可以检查是否触摸了 libgdx Scene2d 图像或 Actor？

> ID：10302781
> 
> 赞同：2
> 
> 时间：2012-04-24T17:17:08.450
> 
> 标签：android, image, touch, actor, libgdx

这是我想要创建的 libgdx android 游戏的示例。还没有什么特别的，因为我刚刚开始用安卓游戏冒险。

这是我想回答的几个问题

到目前为止，我正在使用 Gdx.input.isTouched 函数并检查它是否与兔子坐标匹配，我为每只兔子都这样做，最后我想拥有其中的 11 个，这实在是太多了。有没有办法检查来自 import com.badlogic.gdx.scenes.scene2d.ui.Image 的 Image 类是否？被感动了？或者 Actor 类是否具有该功能？

另一件事是，当我实例化兔子类并单击兔子时，它们都变成了“害怕”。这是因为 Scene2d.Image 纹理必须是静态的。有没有办法改变它？

```
if(Gdx.input.isTouched()){  

            x = Gdx.input.getX();  
            y = Gdx.graphics.getHeight() - Gdx.input.getY();

         // **** Show Coordinates **** \\ 
            if (x < 420)
                font.draw(batch, "x:" + x + 
                    "\n y: " + y, x, y);
            else
                font.draw(batch, "x:" + x + 
                        " y: " + y, x-65, y);
         // **** End Show Coordinates **** \\

            //if krolik (bunny) is touched add highscore and change texture to scared
            if (x >= krolik.pos.x && y >= krolik.pos.y
                    && x <= krolik.pos.x + 64 && y <= krolik.pos.y + 64)
            {   
                krolik.scared();
                highscore+=100;
            }
            else if (x >= krolik2.pos.x && y >= krolik2.pos.y
                    && x <= krolik2.pos.x + 64 && y <= krolik2.pos.y + 64)
            {   
                krolik2.scared();
                highscore+=100;
            }
       } 
        else{

        krolik.normal();

        }
        // **** Show Highscore **** \\ 
        font.draw(batch, "Highscore: " + highscore, 350, 300);
        batch.draw(krolik.getTexture(), krolik.pos.x, krolik.pos.y);
        batch.draw(krolik2.getTexture(), krolik2.pos.x, krolik2.pos.y);
            batch.end(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T16:46:28.730

为什么你使用 Image 而不是使用 Stage 绘图？Image 和其他 Actor 用于使用 Stage 可以非常轻松地处理您的触摸事件和绘图。

像这样创建它们：

```
for (int i = 0; i < KROLIKS_COUNT; i++) {
    final Image krolik = new Image(nonScaredTextureRegion);
    krolik.setClickListener(new ClickListener() {
        @Override
        public void click(Actor actor, float x, float y) {
            krolik.setRegion(scaredTextureRegion);
            highscore+=100;
        }
    });
    krolik.x = startPosX;
    krolik.y = startPosY;
    stage.addActor(krolik);
} 
```

将舞台设置为输入处理器：

```
Gdx.input.setInputProcessor(stage); 
```

然后在渲染中，简单地说：

```
stage.act(Gdx.graphics.getDeltaTime());
stage.draw(); 
```

# javascript - 克隆一个 Jquery Flot 图表

> ID：10302787
> 
> 赞同：1
> 
> 时间：2012-04-24T17:17:48.653
> 
> 标签：javascript, jquery, html, css, flot

有谁知道是否可以使用 Jquery.clone(); Flot 图表上的功能？

```
var $clonedChart = $this.find('.chart-area').clone();
$('#details').append($clonedChart); 
```

基本上，当用户查看“详细信息视图”时，我只想克隆一个图表并在模式窗口中使用它。我可以看到画布，但不幸的是，画布的内容没有被渲染。有没有办法让他们出现？我假设我还需要做一些花哨的深度克隆来获取插件，然后重新渲染图表？我希望避免这种情况，但不确定是否有可能......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:20:28.593

`clone()`不会复制所有事件处理程序，您最好将调用 `$.flot`方法的代码打包并在需要在其他地方显示时再次调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:29:30.440

如果图表不是交互式的，你应该只克隆画布而不用担心 Flot 插件。

```
function cloneCanvas(oldCanvas) {

    //create a new canvas
    var newCanvas = document.createElement('canvas');
    var context = newCanvas.getContext('2d');

    //apply the old canvas to the new one
    context.drawImage(oldCanvas, 0, 0);

    //return the new canvas
    return newCanvas;
} 
```

[从另一个 SO 问题复制的代码](https://stackoverflow.com/questions/3318565/any-way-to-clone-html5-canvas-element-with-its-content)

# mysql - 两个值之间的sql查询 desc

> ID：10302790
> 
> 赞同：0
> 
> 时间：2012-04-24T17:17:59.733
> 
> 标签：mysql, sql

我有一个 MySQL 表，它有两个字段`start_interval`，并且`end_interval`都存储`int`代表小时的值。我正在使用此查询从该表中选择记录：

```
SELECT *
FROM messages
WHERE 23 BETWEEN start_interval AND end_interval; 
```

`start_interval`当大于时如何获取值`end_interval`？例如 if`start_interval = 22`和`end_interval = 5`?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T17:21:37.907

怎么样：

```
SELECT * FROM messages
WHERE 23 BETWEEN LEAST(start_interval, end_interval) AND
                GREATEST(start_interval, end_interval); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T17:21:34.143

也许你检查两个方向：

```
SELECT * FROM messages
WHERE
  (23 BETWEEN start_interval AND end_interval) OR
  (23 BETWEEN end_interval AND start_interval); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:29:57.320

怎么样：

```
where 23 between start_interval and if(start_interval>=end_interval,end_interval+24,end_interval)? 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T18:17:05.763

```
…
WHERE 23 BETWEEN start_interval AND end_interval
   OR start_interval > end_interval AND
      23 NOT BETWEEN end_interval + 1 AND start_interval - 1 
```

# python - Pyapns 故障 500：'无法连接到 APNS 服务器

> ID：10302792
> 
> 赞同：3
> 
> 时间：2012-04-24T17:18:06.563
> 
> 标签：python, django

我正在尝试让我的 django 应用程序向运行此服务的 iOS 应用程序的 iOS 设备发送推送通知。我正在尝试使用[pyapns](https://github.com/samuraisam/pyapns)发送通知。但我无法让它连接到 Apple 推送通知服务器。

服务大部分都完成了，这是我在退出测试版之前想要开始工作的最后一件事。您可以访问[http://pagemove.se/](http://pagemove.se/)了解该应用程序。

这是日志：

`Traceback (most recent call last): File "", line 1, in File "/usr/local/lib/python2.7/dist-packages/pyapns/client.py", line 75, in wrapper return func(*a, **kw) File "/usr/local/lib/python2.7/dist-packages/pyapns/client.py", line 67, in wrapper return func(*a, **kw) File "/usr/local/lib/python2.7/dist-packages/pyapns/client.py", line 97, in notify return _xmlrpc_thread(*f_args) File "/usr/local/lib/python2.7/dist-packages/pyapns/client.py", line 127, in _xmlrpc_thread errback(e) File "/usr/local/lib/python2.7/dist-packages/pyapns/client.py", line 65, in errback_wrapper errback(e) # not an instance of UnknownAppID - nothing we can do here File "/usr/local/lib/python2.7/dist-packages/pyapns/client.py", line 55, in errback raise e xmlrpclib.Fault:`

有人遇到过这个问题吗？.pem 文件可以相同吗？还是ubuntu-server的设置？我是不是忘记在路由器中打开某些端口了？

编辑

我做了一个测试，以确定 apns 的端口是否打开。我做了

```
telnet gateway.sandbox.push.apple.com 2195 
```

并得到

```
Trying 17.149.34.65...
Connected to gateway.sandbox.push-apple.com.akadns.net.
Escape character is '^]'. 
```

我确实认为服务器和路由器设置正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T00:32:22.767

我遇到了同样的问题 - 令人沮丧，因为它*可以*建立连接，`.pem`文件可能格式不正确。

按照这个奇妙的分步说明生成正确的最终`.pem`文件：

[http://blog.serverdensity.com/2009/07/10/how-to-build-an-apple-push-notification-provider-server-tutorial/](http://blog.serverdensity.com/2009/07/10/how-to-build-an-apple-push-notification-provider-server-tutorial/)

另外，在从 Keychain 导出证书和密钥时设置密码 - 我知道它说你可以不用，但我发现在从 Keychain 导出时将密码设置为随机值，然后按照最后`openssl rsa ...`一步在连接之前删除所述密码这些文件帮助解决了我遇到的问题。

我不能绝对肯定地说，但对我来说，是`.pem`文件生成了您在上面收到的确切错误消息。

最终的`.pem`文件是文本，格式应该*有点*像这样（注意这里的信息是随机生成的，我重复了很多行）：

[https://gist.github.com/58f79e1cd811f62bf011](https://gist.github.com/58f79e1cd811f62bf011)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-06T06:13:31.840

我在使用 pyapns 时遇到了这个错误......尝试了这篇文章中的所有答案以及许多其他答案......没有任何帮助......所以只是决定使用不同的库（[https://github.com/djacobs/PyAPNs](https://github.com/djacobs/PyAPNs)）。第一次工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T01:30:27.877

我有同样的问题，但这似乎已经为我解决了。显然，我`.pem`还有一个密码，这就是问题所在。所以在这里我将描述如何生成一个`.pem`没有密码的。

这篇博文概述了如何获取您需要的 2 个“.pem”文件（证书和密钥）以及如何连接它们。 [http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)。（您现在可以使用密码生成`.pem`文件 - 我们稍后将删除密码）。

这里有 2 个命令可以帮助您检查您的 2 个`.pem`文件是否正常。第一个命令只是检查您是否可以连接到 APNS。

```
$ telnet gateway.sandbox.push.apple.com 2195 
```

第二个命令将检查您的`.pem`文件是否正常 - 如果您已成功连接，您将获得一堆输出。如果成功，并且您输入一些随机文本，它将断开连接。如果无法连接，它将输出错误消息。

```
$ openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert PushChatCert.pem -key PushChatKey.pem 
```

在你有你的 concatenated 之后`.pem`，你必须摆脱它的 pyapns 密码。为此，请在您的`.pem`.

```
$ openssl rsa -in haspassword.pem -out nopassword.pem 
```

应该就是这样。我希望这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T15:15:34.417

我也有这个错误，在我的情况下，它是由“。”引起的。在我的 app_id

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-22T09:38:03.450

我也有这个错误，就我而言，这是因为我错过了[文档](https://github.com/samuraisam/pyapns)中提到的 python-epoll 库。

我认为检查当前目录中的 twistd.log 也很有帮助

# javascript - 地图未显示在网址上

> ID：10302794
> 
> 赞同：1
> 
> 时间：2012-04-24T17:18:12.120
> 
> 标签：javascript, google-maps-api-3

今天我试图用一些数据创建一个谷歌地图，问题是我正在复制/粘贴谷歌地图示例的代码，但什么都没有出现......我得到一个空白页......我是那个疯狂的？你能告诉我发生了什么事吗？我正在使用 chrome 和 firefox .. 都是空白的。

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps JavaScript API v3 Example: Polygon Arrays</title>
<link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet"  type="text/css" />
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

var map;
var infoWindow;

function initialize() {
var myLatLng = new google.maps.LatLng(24.886436490787712, -70.2685546875);
var myOptions = {
  zoom: 5,
  center: myLatLng,
  mapTypeId: google.maps.MapTypeId.TERRAIN
 };

 var bermudaTriangle;

 map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);

 var triangleCoords = [
    new google.maps.LatLng(25.774252, -80.190262),
    new google.maps.LatLng(18.466465, -66.118292),
    new google.maps.LatLng(32.321384, -64.75737)
 ];

 bermudaTriangle = new google.maps.Polygon({
  paths: triangleCoords,
  strokeColor: "#FF0000",
  strokeOpacity: 0.8,
  strokeWeight: 3,
  fillColor: "#FF0000",
  fillOpacity: 0.35
 });

 bermudaTriangle.setMap(map);

 // Add a listener for the click event
 google.maps.event.addListener(bermudaTriangle, 'click', showArrays);

 infowindow = new google.maps.InfoWindow();
 }

 function showArrays(event) {

// Since this Polygon only has one path, we can call getPath()
// to return the MVCArray of LatLngs
var vertices = this.getPath();

var contentString = "<b>Bermuda Triangle Polygon</b><br />";
contentString += "Clicked Location: <br />" + event.latLng.lat() + "," + 
event.latLng.lng() + "<br />";

// Iterate over the vertices.
for (var i =0; i < vertices.length; i++) {
  var xy = vertices.getAt(i);
  contentString += "<br />" + "Coordinate: " + i + "<br />" + xy.lat() +"," + xy.lng();
}

// Replace our Info Window's content and position
infowindow.setContent(contentString);
infowindow.setPosition(event.latLng);

infowindow.open(map);
}  
</script>
</head>
<body onload="initialize()">
<div id="map_canvas"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:28:22.090

问题是您已经复制了对 Google 样式表的*相对*引用，这`map_canvas`就是定义大小的地方。

如果您`div`明确设置它的大小，或者使用对样式表的绝对引用，它将起作用（我刚刚尝试过）。

# java - groovy 和 java 程序之间通过套接字进行通信

> ID：10302796
> 
> 赞同：1
> 
> 时间：2012-04-24T17:18:15.980
> 
> 标签：java, sockets, groovy, client

我正在尝试用 groovy 编写一个客户端和 Java 中的服务器端的小型套接字程序。下面是我写的代码

客户：

```
def s = new Socket("localhost", 4444);
s << "Server before withStreams\n";
s.withStreams { input, output ->
  println"Sending message1" 
  output << "server message1\n"
}
s.close(); 
```

服务器：

```
import java.io.*;
import java.net.*;

public class Logger{
  ServerSocket providerSocket;
  Socket connection = null;
  BufferedReader in;
  String message="InitialMessage";
  Logger(){}

  void run()
  {
    try{
      providerSocket = new ServerSocket(4444, 10);
      try{
        Thread.sleep(1000);
      }
      catch(InterruptedException ie)
      {
        System.out.println("Sleep Interrupted");
      }
      System.out.println("Waiting for connection");
      connection = providerSocket.accept();
      System.out.println("Connection received from " + connection.getInetAddress().getHostName());

      in = new BufferedReader(new InputStreamReader(connection.getInputStream()));
      do{
        if(in.ready())
        {
          try{
            System.out.println(in.read());
            message = in.readLine();
            System.out.println("client>" + message);
          }
          catch(IOException e)
          {
            System.out.println(e);
            e.printStackTrace();
            break;
          }
        }
      } while(!message.equals("bye"));
    }
    catch(IOException ioException){
      ioException.printStackTrace();
    }
    finally{
      //4: Closing connection
      try{
        in.close();
        providerSocket.close();
      }
      catch(IOException ioException){
        ioException.printStackTrace();
      }
    }
  }

  public static void main(String args[])
  {
    Logger server = new Logger();
    while(true){
      server.run();
    }
  }
} 
```

当我执行这两个程序时，建立了 Socket 通信。但是当它从套接字（ ）`IOException`读取时，我得到了一个服务器代码`message = in.readLine();`

我猜在客户端写入套接字时存在一些格式问题。但无法弄清楚确切的问题。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T19:22:01.540

您通常不想为每个客户端连接关闭 ServetSocket。您希望执行一次（或每次启动服务器时），然后在每个 accept() 处理客户端连接并关闭该连接的套接字，但保持 ServerSocket 处于打开状态，直到您想要停止服务器。

这是示例服务器的重写版本，它还为每个客户端请求创建一个新线程以处理多个并发请求。请注意，由于测试客户端没有发送终止字符串“再见”，因此连接和套接字保持打开状态。

```
import java.io.*;
import java.net.*;

public class Logger {
    private ServerSocket providerSocket;

    Logger() {

    }

    public void start() {
        try {
            providerSocket = new ServerSocket(4444, 10);
            while (true) {
                System.out.println("Waiting for connection");
                Socket connection = providerSocket.accept();
                new Thread(new Job(connection)).start();
            }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if (providerSocket != null) {
            System.out.println("Stopping server");
            try {
                providerSocket.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    }

    static class Job implements Runnable {
        final Socket connection;
        private static int id;
        private int clientId = ++id;

        public Job(Socket connection) {
            this.connection = connection;
        }

        public void run() {
            BufferedReader in = null;
            try {
                System.out.println("Connection " + clientId + " received from " + connection.getInetAddress().getHostName());
                in = new BufferedReader(new InputStreamReader(connection.getInputStream()));
                String message = "InitialMessage";
                do {
                    if (in.ready()) {
                        try {
                            // not sure why want to read one character then read the line
                            //int ch = in.read();
                            //System.out.println(ch);
                            // -1 if the end of the stream has been reached
                            //if (ch == -1) break;
                            message = in.readLine();
                            // null if the end of the stream has been reached
                            if (message == null) break;
                            System.out.println("client>" + message);
                        } catch (IOException e) {
                            System.out.println(e);
                            e.printStackTrace();
                            break;
                        }
                    }
                } while (!message.equals("bye"));
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                //4: Closing connection
                System.out.println("Close connection " + clientId);
                if (in != null)
                    try {
                        in.close();
                    } catch (IOException ioException) {
                        ioException.printStackTrace();
                    }
                try {
                    connection.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }

    public static void main(String args[]) {
        Logger server = new Logger();
        server.start();
    }
} 
```

# nhibernate - 使用 NHibernate 进行条件获取

> ID：10302797
> 
> 赞同：1
> 
> 时间：2012-04-24T17:18:19.557
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, linq-to-nhibernate, fluent-nhibernate-mapping

我需要使用 NHibernate 急切地加载对象树，但我也希望指定要加载的对象。

对象树是这样的：

```
class A {
   double Date;
   IList<B> Bs;
}

class B {
   double Date;
   IList<C> Bs;
}

class C {
   double Date;
} 
```

而我想要做的是急切加载整个树，其中 A.Date > 2012, B.Date > 2012, C.Date > 2012 （基本上我只想要根据我指定的约束的对象树的快照） .

那可能吗 ？

我正在使用 NH 3.1 和 Fluent。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:07:20.873

您是否尝试过使用 NHibernate 过滤器？[http://nhibernate.info/doc/nh/en/index.html#objectstate-filters](http://nhibernate.info/doc/nh/en/index.html#objectstate-filters)

# wpf - 根据其他几个控件的“或”来更改控件的属性

> ID：10302799
> 
> 赞同：0
> 
> 时间：2012-04-24T17:18:28.107
> 
> 标签：wpf, templates, xaml, triggers

我正在创建一个 DataGrid，我需要根据同一行中的其他几个单元格（文本框）之一是否获得焦点来突出显示一个单元格（文本块）。不知道从哪里开始。任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:26:51.170

有几种方法可以解决这样的问题。最干净的方法是将属性添加到您可以绑定到的视图模型中。稍微麻烦一点的方法是通过 MultiValueConverter 绑定所有涉及的属性。

# android - 当活动完全布局并准备好进行用户交互时，会调用哪个方法？

> ID：10302803
> 
> 赞同：28
> 
> 时间：2012-04-24T17:18:43.210
> 
> 标签：android, android-activity

我需要一种方法来在活动完全加载、布局、绘制并为用户的触摸控件做好准备的确切时刻运行一些代码。哪个方法/侦听器会这样做？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-24T17:52:05.750

Commonsware 是对的，如果不解释您要做什么以及为什么，就不可能回答您的问题，而且我怀疑，详细地说，您可能以错误的方式思考它。

但是，我确实有一些代码，在测量完所有内容后，我需要在其中做一些非常时髦的布局。

我本可以扩展布局中的每个视图类并覆盖`onMeasure()`，但这将是很多工作。所以，我最终这样做了。不是很好，但它有效。

mainMenuLayout 是我需要的布局。当`onGlobalLayout`布局完成绘制时调用回调。 `Utils.setTitleText()`是有趣的地方，当我将 mainMenuLayout 传递给它时，它可以访问所有子视图的位置和大小。

```
mainMenuLayout.getViewTreeObserver().addOnGlobalLayoutListener(
            new ViewTreeObserver.OnGlobalLayoutListener() {

                @Override
                public void onGlobalLayout() {

                    // only want to do this once
                    mainMenuLayout.getViewTreeObserver().removeGlobalOnLayoutListener(this);

                    // set the menu title, the empty string check prevents sub-classes
                    // from blanking out the title - which they shouldn't but belt and braces!
                    if (!titleText.equals("")){
                        Utils.setTitleText(_context,mainMenuLayout,titleText);
                    }

                }
            }); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-24T17:33:10.913

我发现如果我将 a 发布`Runnable`到消息队列中，它将在活动的内容被绘制后运行。例如，如果我想要 a 的宽度和高度`View`，我会这样做：

```
view.post( new Runnable() {

    @Override
    public void run() {

        int width = view.getWidth(); // will be non-zero
        int height = view.getHeight(); // will be non-zero
    }
} ); 
```

我打电话后的任何时候都发现了这个成功`setContentView()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:27:03.740

**onRestoreInstanceState方法是在****onResume**之后调用的用于恢复 UI 状态的方法。我认为您可以使用此 onRestoreInstanceState 方法..并在从 savedInstanceState 恢复 UI 状态后放置您的代码...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-22T15:45:47.383

Try `onPostResume()` called after `onResume()` at this moment the Activity instance should be visible and all underlying Views are rendered. In many situations this is true when `onResume()` is called as well.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-12-17T10:08:25.043

也许它没有什么帮助：

```
@Override
public void onAttachedToWindow(){} 
```

# ajax - 在选择 Ajax 框架时需要帮助

> ID：10302805
> 
> 赞同：1
> 
> 时间：2012-04-24T17:18:48.980
> 
> 标签：ajax, spring, hibernate

我的项目的域是 eTendering。我们计划在架构和演示 Spring MVC 中使用 Spring 和 Hibernate，但我们希望外观和感觉像 .Net 的 Silverlight 或 adobe 的 Flex，简而言之，我们计划在演示中使用 Ajax 框架。那么SpringMVC会值得吗？我见过 wicket 和 openxava，但我仍然很困惑，所以请根据我的域的复杂性提出正确的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:48:04.910

取决于您的需求：

*   Spring MVC - 这个选项将使您可以自己编写 AJAX（例如通过 JQuery）以及 HTML 等等。这可能很乏味，但你正在控制一切。生成的 HTML 的质量以及 SEO 对它的索引效果如何也取决于您。
*   JSF - 此选项为您提供了许多组件，并允许您创建基于 AJAX 的表单并开箱即用地处理它。但是在编写自定义组件时，它并不像自己编写 JS/JQuery 那样容易。此外，它生成的 HTML 质量也不是那么好，而且您可能很少被 SEO 索引。
*   GWT——这个选择意味着你不写 JS，而是用 Java 写逻辑，然后它转换成 JS。一方面它会为你提供漂亮的基于 AJAX 的应用程序，你不需要编写 JS，另一方面它是 a) 编写真正漂亮的应用程序 UI 非常复杂 b) 它会增加另一个步骤您的开发周期（生成该 JS 需要相当长的时间） c）它几乎不允许您的页面被索引。此外，如果涉及到诸如 SmartGWT 之类的衍生产品，它们提供了大量看起来很酷的组件，但它们总是需要资金来支持。
*   Vaadin - 这是基于 AJAX 的框架，它部分地将 Java 生成到 JS，但它也会向服务器发送请求以执行逻辑（当然在 GWT 中也会发生这种情况，但并不经常，GWT 会尝试在客户端上执行逻辑）。将源代码编译为 JS 所需的时间更少，而且几乎不可能使页面被索引。
*   ZK - 另一个基于 AJAX 的框架。与其他只允许您使用一种模式的框架不同，它可以在 MVC、MVP、MVVM 模式下工作。它不会将 Java 源代码编译为 JS，因此所有请求都会发送到服务器（我听说内部公司的基准测试表明它实际上比 GWT 更快，但我认为这取决于您的处理逻辑）。ZK 根本无法实现 SEO，但可以将 ZK 组件包含到 JSP 页面中（尽管此功能不是免费的），这使得杀死两只鸟成为可能。使用 ZK 编写自己的组件并非易事，但它具有广泛的即用型组件。

所以你应该考虑几件事：SEO，你可以为框架付出的钱，你需要多少 AJAX 以及你想自己编写它等等。还要注意我提到的那些模式：例如 MVP 适合复杂的接口，由 GWT、Vaadin、ZK 支持。MVVM 非常酷，因为它具有绑定性，并且受到 JSF 和 ZK 的支持。

# python - 有没有办法在另一个 .py 文件中使用 PyInstaller？

> ID：10302806
> 
> 赞同：1
> 
> 时间：2012-04-24T17:18:51.537
> 
> 标签：python, pyinstaller

我的问题如下：我想创建一个可以创建其他可执行文件的脚本。这些新的可执行文件必须是独立的，因此它们不需要任何 DLL 等。我知道 PyInstaller 可以做到这一点，但只能通过控制台/命令行。所以本质上，我想做的是制作一个导入pyinstaller的python脚本，创建另一个.py文件并使用pyinstaller将新脚本编译为.exe，所以没有安装python的人可以使用这个程序。

编辑：脚本本身应该只使用一个文件，所以它也可以是一个文件可执行文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T23:20:14.407

Supposing you have already installed Pyinstaller in PYINSTALLER_PATH (you should have called the Configure.py script in the distribution for the first time), Pyinstaller generates a spec file from your main script by calling the Makespec.py. You can add some flags to generate one dir binary distribution or one file. Finally you have to call Build.py with spec file.

This is easy scriptable with a couple of system calls. Something like :

```
import os

PROJECT_NAME = "test"
PROJECT_MAIN_SCRIPT = "main_script.py"
MAKESPEC_CMD = """%s %s\Makespec.py -X -n %s -F %s""" % (PYTHON_EXECUTABLE, PYINSTALLER_PATH, PROJECT_NAME, PROJECT_MAIN_SCRIPT)
BUILD_CMD = """%s %s\Build.py %s.spec""" % (PYTHON_EXECUTABLE, PYINSTALLER_PATH, PROJECT_NAME)

os.system(MAKESPEC_CMD)
os.system(BUILD_CMD) 
```

You can avoid to generate the spec file every time and hack it, adding embedded resources (i.e. xml files or configuration) and specifying some other flag. Basically this is a python file, with the definition of some dictionaries.

I don't think there is a Pyinstaller module you can use directly, but you can look at Build.py and mimic its behaviour to do the same. Build.py is the main script which does the trick.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:22:48.777

您可能想查看[cx_Freeze](http://cx-freeze.sourceforge.net/)，它可以用来做这种事情。

> 使用 cx_Freeze 有三种不同的方法。第一种是使用包含的 cxfreeze 脚本，它适用于简单的脚本。第二个是创建一个 distutils 设置脚本，它可以用于更复杂的配置或保留配置以备将来使用。**第三种方法涉及直接使用 cx_Freeze 内部使用的类和模块，应保留用于复杂的脚本或扩展或嵌入**。

[资源](http://cx-freeze.sourceforge.net/cx_Freeze.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:34:58.057

尝试下载 Pyinstaller 的最新开发代码。他们在那里尝试实现用于构建可执行文件的 GUI 工具包。

# spring - 使用 JSP 文件中的页码而不是 url 进行分页

> ID：10302807
> 
> 赞同：2
> 
> 时间：2012-04-24T17:18:54.517
> 
> 标签：spring, jsp, parameters, paging, hidden

我正在为我的表单使用弹簧分页框架。我正在从这里测试分页框架：http: [//www.developer.com/java/web/article.php/10935_3830886_3/A-Pagination-Technique-Using-Spring.htm](http://www.developer.com/java/web/article.php/10935_3830886_3/A-Pagination-Technique-Using-Spring.htm)。我的表单的 url 显示的页码如下：

第 1 页： [http://...stuff../mySite/paging/paging/0](http://...stuff../mySite/paging/paging/0) 第 2 页：[http://...stuff../paging.do?action=list&p=1](http://...stuff../paging.do?action=list&p=1) 第 3 页：[http:// /...stuff../paging.do?action=list&p=2](http://...stuff../paging.do?action=list&p=2) 等

分页不一致并导致我的代码出现问题（注意第一个 pg 和第二个 pg url 的区别）并且为了保持我的 url 干净，我更喜欢将页码存储为隐藏的 jsp 参数。可能吗？你有什么建议吗？谢谢。

我的控制器：

```
@Controller
@RequestMapping(value="/paging")
@ApplicationComponent(component="Paging")
public class PaginationController
{
private final Log logger = LogFactory.getLog(getClass());
@Autowired
private ItemDao itemDao;

@RequestMapping(value="/paging/{p}")
public ModelAndView list(@PathVariable("p") int page) throws Exception
    {
    ModelAndView mav = new ModelAndView("paging/paging");
    System.out.println("In the paging controller");     

    // get data in a list from jsp
    List searchResults = itemDao.getAllItems();
    // initialize PagedListHolder with the list, 
    PagedListHolder pagedListHolder = new PagedListHolder(searchResults);           
    pagedListHolder.setPage(page);
    int pageSize = 5;
    pagedListHolder.setPageSize(pageSize);      
    mav.addObject("pagedListHolder", pagedListHolder);      
    return mav;
} 
```

}

这是JSP：

```
<jsp:useBean id="pagedListHolder" scope="request"  type="org.springframework.beans.support.PagedListHolder"/>

<%-- // create link for pages, "~" will be replaced with the proper page number --%>
<c:url value="/paging.do" var="pagedLink">
   <c:param name="action" value="list"/>
    <c:param name="p" value="~"/>
</c:url>

<tg:paging pagedListHolder="${pagedListHolder}" pagedLink="${pagedLink}"/>

<%-- // show only current page data --%>
<table width="200px" border="1">
   <tr>
    <th width="20px">No.</th>
    <th>Print Items from pagedListHolder list</th>
</tr>
<c:forEach items="${pagedListHolder.pageList}" var="item">
    <tr>
        <td>${item.key}</td>
        <td style="color:blue;font-weight:bold;text-align:right">${item.data}</td>
    </tr>
</c:forEach> 
```

# jquery - 使用 jquery 获取子域 html 页面

> ID：10302813
> 
> 赞同：1
> 
> 时间：2012-04-24T17:19:14.550
> 
> 标签：jquery, cross-domain

我有以下情况。

从位于*https://subdomain.mydomain.com*的应用程序中，我试图获取位于*https://mydomain.com/page.aspx的页面的 html*

我正在使用 jquery *$.ajax*方法执行此操作。

```
 $.ajax({
        url: url,
        type: 'GET',
        contentType: 'application/x-www-form-urlencoded',
        success: function (data, status, xhr) {
            console.info("success");
        },
        error: function (xhr, status, error) {
            console.error(error);
        }
    }); 
```

实际调用并执行 aspx 页面。

IE（通过 XDomainRequest）和 Firefox 具有相同的行为：从检查器（IE 开发工具和 Firebug）我看到响应状态为*200 OK*，它具有预期的大小（80KB），但响应内容为空。jQuery 错误不是那么有用：

```
 readyState: 0,  
    responseText: ""
    status: 0,
    statusText: "error" 
```

我想这是涉及同源政策的事情。我看到人们用 YQL（但我不想使用额外的库）和 JSONP（但我正在使用纯 HTML）解决这类问题。

在绝望的时刻，我也尝试过类似的技巧

```
 document.domain = 'mydomain.com';
    jQuery.support.cors = true; 
```

没有成功。任何提示？

* * *

问题是由于`Access-Control-Allow-Origin`必须在被调用的应用程序上启用。在我的例子中，它是 IIS7 主机中的一个 asp.net 应用程序。我不得不在 web.config 中添加这些行：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
 <system.webServer>
   <httpProtocol>
     <customHeaders>
       <add name="Access-Control-Allow-Origin" value="*" />
     </customHeaders>
   </httpProtocol>
 </system.webServer>
</configuration> 
```

以下网站报告了许多配置以在许多服务器类型上[启用 CORS](http://enable-cors.org)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T17:42:25.527

为了使用 IE 或 FF 的跨域请求，您需要调整服务器端以发送`Access-Control-Allow-Origin`带有响应的标头。如果你想使用`document.domain`它，不仅要在请求端设置，而且在响应端也要设置。因此，您可以使用 iframe 发送此类请求或使用 SCRIPT 或 JSONP，因为它们没有跨域限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:32:37.823

使用 JSONP 获取数据

```
function myFunc() {
    console.info("success");
}

$.ajax({
    url: url,
    'dataType': "jsonp",
    'jsonp': "callback",
    'jsonpCallback': "myFunc"
}); 
```

问题是您试图从另一个域发出 XHR 请求，这是不允许的。您告诉 jQuery 允许 CORS，但 JSONP 是一种更好的方法。您将需要设置服务器端代码以返回 JSON 数据中的 html，该数据包装在加载 URL 时要调用的函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-03T12:51:26.983

简单的javascript就足够了

```
alert(document.domain);

console.log("Output;");  
console.log(location.hostname);
console.log(document.domain);
alert(window.location.hostname)

console.log("document.URL : "+document.URL);
console.log("document.location.href : "+document.location.href);
console.log("document.location.origin : "+document.location.origin);
console.log("document.location.hostname : "+document.location.hostname);
console.log("document.location.host : "+document.location.host);
console.log("document.location.pathname : "+document.location.pathname); 
```

# postgresql - Grails 派生属性的转义公式

> ID：10302817
> 
> 赞同：1
> 
> 时间：2012-04-24T17:19:27.300
> 
> 标签：postgresql, grails, grails-orm

Grails 提供[派生属性以使用](http://grails.org/doc/latest/guide/GORM.html#5.5.2.11%20Derived%20Properties)*公式*映射参数从 SQL 表达式生成字段：

```
static mapping = {
    myfield formula: "field1 + field2"
} 
```

我正在尝试将公式参数与 PostgreSQL 数据库一起使用来创建连接字段。语法有点奇怪，因为 PostgreSQL 8.4 还不支持 concat_ws：

```
static mapping = {
    myfield formula: "array_to_string(array[field1, field2],' ')"
} 
```

*在 DataSource 配置中使用loggingSql = true*显示的生成 SQL将表前缀插入到一些奇怪的地方：

```
select table0_.field1 as field1_19_0_,
       table0_.field2 as field2_19_0_,=
       array_to_string(table0_.array[field1, table0_.field2], ' ') as formula0_0_
from test_table table0_ where table0_.id=? 
```

表前缀错误地出现在派生公式中的*数组*之前，但不在*field1之前。*有没有办法转义前缀或更明确地纠正这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:53:04.413

这只是解析公式语法的问题。GORM 尝试为不带括号的不带引号的表达式插入表前缀，因此 ARRAY[] 表示法将其绊倒。

我的解决方案是定义[concat_ws 函数](http://okbob.blogspot.com/2009/08/mysql-functions-for-postgresql.html)：

```
CREATE OR REPLACE FUNCTION concat_ws(separator text, variadic str text[])
RETURNS text as $$
SELECT array_to_string($2, $1);
$$ LANGUAGE sql; 
```

GORM*公式*参数现在可以避免 ARRAY[] 语法，并按预期工作。

```
myfield formula: "concat_ws(' ', field1, field2)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T01:27:25.140

我有一个非常相似的问题，并通过在 GORM 尝试添加前缀的内容周围添加**单引号来解决它：**

```
static mapping =
{
    dayOfYear formula: " EXTRACT('DOY' FROM observed) "
} 
```

GORM 然后制作了这个，它起作用了：

```
select
    EXTRACT('DOY' FROM observed)  as y1_ 
```

这可能不适用于所有情况，但我希望它可以帮助某人。

# ios - 防止 UIWebView 在键盘出现时滚动

> ID：10302820
> 
> 赞同：6
> 
> 时间：2012-04-24T17:19:45.330
> 
> 标签：ios, uiwebview

我有一个 UIWebView 呈现一个包含输入字段（）的页面。

当用户触摸该字段以输入数据时，UIWebView 向上和向左滚动以使该字段对用户保持可见。好吧。

我不介意它向上滚动（因为我的表单下方的所有内容都被键盘隐藏）但我想防止视图向左滚动。

有没有办法（html页面中的标题或iOS代码）来防止这种行为？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-17T18:37:42.460

不漂亮但有效：

如果您根本不希望您的 webView 滚动，您可以实现 UIWebView 的 UIScrollViewDelegate 并将 scrollViewDidScroll 上的 contentOffset 设置为 0

```
aWebView.scrollView.delegate = self

func scrollViewDidScroll(scrollView: UIScrollView) {
    scrollView.contentOffset = CGPointMake(0, 0)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:43:18.753

我不知道如何完全防止滚动，但是如果您不介意一点抖动，可以将此处理程序添加到输入字段：

```
onfocus="setTimeout('window.scroll(0,0)',100)" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:09:49.297

首先，您必须使用 捕获键盘的显示`UIKeyboardWillShowNotification`。

然后将 UIScrollView（UIWebview 的）的 contentSize 宽度限制为屏幕宽度，这将确保屏幕不会水平滚动。

# jquery - 当我单击其中的某些内容时，我将如何关闭 jQuery 对话框？

> ID：10302821
> 
> 赞同：1
> 
> 时间：2012-04-24T17:19:51.930
> 
> 标签：jquery

当我单击对话框内的某些内容时，我将如何关闭 jquery 对话框？

```
$('content_in_the_dialog').click(function(){

  close the dialog

}); 
```

类似的东西。所以我的问题是我应该在那里输入什么代码来关闭对话框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:20:55.513

只需调用如下关闭方法，

```
$('#dialog_selector').dialog('close'); 
```

[http://jqueryui.com/demos/dialog/#method-close](http://jqueryui.com/demos/dialog/#method-close)

# jquery - 基于正则表达式属性的客户端正则表达式验证失败

> ID：10302822
> 
> 赞同：2
> 
> 时间：2012-04-24T17:19:53.317
> 
> 标签：jquery, asp.net, regex, asp.net-mvc, jquery-validate

在我的模型中，我为简单的密码验证指定了一个正则表达式

```
[Required(ErrorMessage="Error")]
[RegularExpression("(?=.{6,})(?=.*\\d)|(?=.*\\W)", ErrorMessage= "Error")]
public string Password { get; set; } 
```

正如预期的那样，这会产生一个 html 元素

```
<input class="textbox-regular" data-val="true" data-val-regex="Error" data-val-regex-pattern="(?=.{6,})(?=.*\d)|(?=.*\W)" data-val-required="Error" id="Password" name="Password" type="password" /> 
```

这是一个有效的 JavaScript 正则表达式，但密码从不匹配。这是 JQuery 验证器的限制吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:43:19.720

尽管有单个正则表达式可以满足我的需求，但我可以通过将其分解为 3 个验证来获得更好的用户体验，以便用户获得有关所需内容的特定消息。例如

```
[Required(ErrorMessage="Please enter a password")]
[StringLength(100, MinimumLength = 6, ErrorMessage = "Password must be at least 6 characters long")]
[RegularExpression("(.*\\d.*)|(.*[@#$%^&+=\\*].*)", ErrorMessage = "Password must contain a digit or special character")] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:04:47.983

你的陈述包含三个积极的、前瞻性的断言。积极的前瞻性断言不会返回找到的内容，因此我认为您不会在没有返回任何内容时生成真值。这样的东西会产生你需要的东西吗？

```
((?=.*\W)|(?=.*\d)).{6,} 
```

或在您的字符串中：

```
"((?=.*\\W)|(?=.*\\d)).{6,}" 
```

在这里，我断言至少会有六个东西，它们必须包含非单词字符或数字。六个或更多字符*将被返回*，因为我没有将它放在积极的前瞻断言中。因为只有当里面的值与这些断言匹配时才会返回值，所以用户输入应该适当地通过检查。

[在这里试验一下](http://regexpal.com/)。

有效的正则表达式并不意味着它会匹配您期望它匹配的内容。您希望匹配的究竟是什么？

我的假设是您希望将至少六个字符与至少一个数字或至少一个非单词字符匹配？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T18:08:14.370

这是令人惊讶的，因为它应该匹配几乎所有东西。
验证器是否应该在匹配或失败时显示错误消息？

也许正则表达式应该匹配整个字符串。如果是这样，你可以试试这个

```
"^(?:(?=.{6,})(?=.*\\d)|(?=.*\\W)).*$" 
```

看看会发生什么。

尝试`^$`在空字符串上使用，然后在有长度的字符串上尝试。

# android - Android：在非ui线程中绘制到Canvas引起的同步问题？

> ID：10302825
> 
> 赞同：0
> 
> 时间：2012-04-24T17:20:02.193
> 
> 标签：android

我的应用程序有一个包含一些 ImageButtons 的布局。此外，我的应用程序会呈现一些位图供以后使用。通过使用 Bitmap 参数创建一个 Canvas，然后在画布中绘制来呈现位图。此位图渲染任务发生在非 ui 线程中，因此 gui 可以在位图渲染时保持响应。

发生 ANR。原因似乎是 ImageButton.draw() 方法没有完成。此外，该方法似乎无法完成，因为位图渲染任务在 ImageButton 绘制时开始渲染。

以下是日志输出的一些代码片段，以及来自 ANR 的 traces.txt 文件。

我的结论是否可能/可能，在非 ui 线程中绘制到 Canvas 可能会导致 ImageButton.draw() 挂起？如果是这样，有什么建议可以解决这个问题吗？

```
private class BitmapRenderTask implements Runnable
{
    ...     
    public void run()
    {
        Log.e("start render task", rect.toString());
        ...
        Canvas canvas = new Canvas(bitmap);
        Log.e("created canvas", "created canvas");
        //do stuff to draw into canvas
        Log.e("drew to canvas", "drew to canvas");
        ...
        Log.e("done, exit", rect.toString());

public class MyImageButton extends ImageButton
{ 
    public void draw(Canvas canvas)
    {
        Log.e("start drawing", this.toString());
        super.draw(canvas);
        Log.e("end drawing", this.toString());
    }
}

My log:

04-24 14:10:12.115: E/start render task(9446): 1 Rect(512, 0 - 800, 512)
04-24 14:10:12.230: E/start drawing(9446): MyButton1
04-24 14:10:12.230: E/end drawing(9446): MyButton1
04-24 14:10:12.230: E/start drawing(9446): MyButton2
04-24 14:10:12.230: E/end drawing(9446): MyButton2
04-24 14:10:12.230: E/start drawing(9446): MyButton3
04-24 14:10:12.230: E/end drawing(9446): MyButton3
04-24 14:10:12.230: E/start drawing(9446): MyButton4
04-24 14:10:12.235: E/end drawing(9446): MyButton4
04-24 14:10:12.235: E/start drawing(9446): MyButton5
04-24 14:10:12.235: E/end drawing(9446): MyButton5
04-24 14:10:12.235: E/start drawing(9446): MyButton6
04-24 14:10:12.390: E/drew to canvas(9446): drew to canvas
04-24 14:10:12.395: E/done, exit(9446): Rect(512, 0 - 800, 512)
04-24 14:10:12.395: E/start render task(9446): Rect(0, 1024 - 512, 1084)
04-24 14:10:12.410: E/drew to canvas(9446): drew to canvas
04-24 14:10:12.395: E/done, exit(9446): Rect(0, 1024 - 512, 1084) 
```

痕迹.txt：

[http://pastebin.com/s98nEyYt](http://pastebin.com/s98nEyYt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:33:42.327

如果绘图是例如由您发起的按钮创建的一部分，`setContentView(R.layout.screen);`那么代码很可能只是在尝试完成按钮时运行，而您的（如果我理解正确的话）异步任务仍在渲染位图。

我会尝试以下方法：

1.  只是为了看看它是否真的减慢了你的 IU，同步地做这一切——没有背景异步任务。我有几个创建复杂的用户定义小部件的情况——所有这些都足够快，没有任何问题

2.  使用默认的简单可绘制对象创建 btn，并在它们准备好使用异步任务或任何其他带有处理程序的后台任务时填写您的耗时备选方案

随时通知我们！

# asp.net - 以编程方式的 Http 响应代码

> ID：10302828
> 
> 赞同：0
> 
> 时间：2012-04-24T17:20:18.637
> 
> 标签：asp.net, http, httpmodule, http-response-codes

根据条件，我想从我的 Asp.net 页面发回 400（实际上是 200（状态正常）以外的任何代码）错误代码。

```
if(Failed)
{
 Context.Response.TrySkipIisCustomErrors = true;

 Context.Response.ClearContent();

 Context.Response.StatusCode = (int)HttpStatusCode.BadRequest;

 HttpContext.Current.ApplicationInstance.CompleteRequest();

 Context.Response.End();
} 
```

我在 PageLoad 方法中有这段代码。但不幸的是，如果我有上面的 If 语句，这不起作用（是的，If 语句中的代码被执行，在调试中看到了这个）

但是当我放置整个代码时

```
 Context.Response.TrySkipIisCustomErrors = true;

 Context.Response.ClearContent();

 Context.Response.StatusCode = (int)HttpStatusCode.BadRequest;

 HttpContext.Current.ApplicationInstance.CompleteRequest();

 Context.Response.End(); 
```

直接在 PageLoad 中，在这些行之前没有任何其他代码，我得到了响应代码，这很奇怪。

我也尝试过使用 HTTPModule 但相同。

我不明白为什么在设置响应代码之前执行任何其他代码行时没有设置响应，有没有人遇到过这个问题。

但我确实清除了响应内容。

**没关系**

没关系。

这个问题有两个原因：

一个是 localhost 没有为 HTTPREquest 状态代码抛出所需的错误，当部署到服务器上的 IIS 站点时，一切看起来都很好。

其次是我正在自动化测试以使用 HttpWebRequest 以编程方式进行检查。对于请求对象，我在根据请求标头做出决定时忘记发送请求标头信息。

总而言之，代码行很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:44:29.077

我建议您检查变量“失败”是否设置正确。出于调试目的，只需尝试将 if 条件更改为 if(true)
我猜您在条件语句中使用的变量可能存在问题

# c# - 使用 jQuery 修改 HTML 元素并访问服务器上的更新 (ASP.NET)

> ID：10302831
> 
> 赞同：2
> 
> 时间：2012-04-24T17:20:29.210
> 
> 标签：c#, asp.net

我有一个 html 元素：

```
<div id="myElement" class="someClass" onclick="setText(this.innerHtml)" runat="server">text</div> 
```

我希望能够使用一些 jquery 在客户端更改此元素，如下所示：

```
function setText(text) {            
    $(".someClass").text(text);
} 
```

- 或者 -

```
function setAttribute(text) {            
    $(".someClass").attr("myAttr",text);
} 
```

一旦我这样做了，我想获取这个元素的新文本​​或新属性，然后存储服务器端的值。我应该注意，然后我使用 LinkBut​​ton 回发到服务器。正是在这个时候，当我查看元素时，默认文本仍然存在，或者我添加的新属性丢失了。

有人可以解释为什么该元素没有在服务器上更新以及我如何获得它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:52:55.037

我相信您面临的问题是由于您使用的 html 元素的类型，即 div。如果您只是将 div 替换为“文本”类型的输入，它将按您的预期工作，允许您在回发时读取值。在表单提交/回发期间仅发送表单元素。

这方面的一个例子是基于 Web 的 WYSIWYG 文本编辑器的工作方式。您在 div 中键入和编辑，但在后台您所做的所有更改都存储在隐藏字段中。此隐藏字段用于将信息发布回服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:50:21.587

此方法可以工作，但它取决于您修改的元素类型和属性类型。还记得在每个请求上都会重新创建所有控件吗？为什么您可以在按钮事件中准确提取信息的唯一原因是，asp.net 从 LoadViewState 事件的请求（或视图状态）中提取数据，并用该数据替换控件的默认值。

如果您的 div 元素不是服务器端面板控件（这是将呈现 div 元素的 asp.net 控件），则它无法工作。如果您将其设为面板控件，我什至不能 100% 确定这是在 Page.Request 中传递的（尤其是属性）

我要做的是将您在 div 元素中修改的值复制到一个隐藏字段中，该字段可以轻松访问服务器端并在那里获取这个新的属性表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:50:00.717

属性不会发布到服务器，就像*根本*一样（除了值，snerk）。只有项目的名称/值对是视图状态中包含的数据（假设您使用的是传统的 Web 表单）。

如果您想更改这样的项目，然后在服务器上访问它，则需要将此数据发布到查询字符串或作为键值对（然后需要在服务器对象上设置）。

否则，这是不可能的。

# ruby-on-rails - Factory_girl 两个模型之间的简单关联

> ID：10302833
> 
> 赞同：1
> 
> 时间：2012-04-24T17:20:32.257
> 
> 标签：ruby-on-rails, devise, cucumber, factory-bot, model-associations

```
FactoryGirl.define do

factory :agency do
    name "Example Inc"
    available_items "20"
    recruiter     # recruiter.id
end

factory :recruiter do
    email 'example@example.com'
    password 'please'
    password_confirmation 'please'
    # required if the Devise Confirmable module is used
    # confirmed_at Time.now
end

end 
```

**机构.rb**

```
class Agency < ActiveRecord::Base
  belongs_to :recruiter
  validates :name, :presence => true
end 
```

**招聘者.rb**

```
class Recruiter < ActiveRecord::Base
    devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

     # Setup accessible (or protected) attributes for your model
     attr_accessible :email, :password, :password_confirmation, :remember_me
     attr_accessible :agency_attributes, :first_name

     has_one :agency, :dependent => :destroy

     accepts_nested_attributes_for :agency
     validates :email, :presence => true
end 
```

**authentication_steps.rb**

```
def create_user
  @recruiter = FactoryGirl.create(:recruiter)
end 
```

如何使用 factory_girl 复制此招聘人员和代理机构关联？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:27:28.480

我认为您应该从代理工厂中删除招聘人员并将代理添加到请求者工厂

```
FactoryGirl.define do

  factory :agency do 
    name "Example Inc"
    available_items "20"

    factory :agency_without_recuiter do
      recuiter_id = 1 
    end

    factory :agency_with_recuiter do
      recuiter 
    end
  end 

  factory :recuiter do
    email 'example@example.com'
    password 'please'
    password_confirmation 'please'

    factory :recuiter_with_agency
      agency
    end
  end

end 
```

这应该从双方工作

```
create(:agency).recuiter => nil
create(:agency_with_recuiter).recuiter => recuiter

create(:recuiter).agency => nil
create(:recuiter_with_agency).agency => agency 
```

希望它会有用。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:25:53.437

我认为你必须在你的测试用例中复制它，而不是在 FG 本身中。

```
before (:each) do
    @recruiter = FactoryGirl.create(:recruiter)
    @agency = FactoryGirl.create(:agency)
    @agency.recruiter = @recruiter
end 
```

像这样的东西。

# c# - 使用 LINQ 断言数据库中的值

> ID：10302838
> 
> 赞同：1
> 
> 时间：2012-04-24T17:20:43.337
> 
> 标签：c#, linq, nunit, integration-testing, sqlconnection

我通过调用函数将数据存储到数据库中，`StoreData`. 在设计器代码中，a`SqlConnection`打开，`SqlCommand`s 运行，然后`SqlConnection`关闭。成功`StoreData`运行后，数据存储在数据库中。

我想`StoreData`通过断言我为集成测试选择的值（`StoreData`运行前，即`id = 0, time = "13:00"`）等于在数据库中找到的值（`StoreData`运行后，即`id`column =`0`和`time_stamp`column = `"13:00"`）来运行集成测试。

我考虑过使用 LINQ。这是一个好方法，还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:38:14.873

从技术上讲，这是一个集成测试，进行一个将从数据库中读取数据并确保其看起来正确的测试是完全有效的。

但是，如果你想让它成为一个单元测试，你应该做的是将支持机制模拟为某种内存结构，然后你的`StoreData`方法将插入这个结构而不是调用数据库。通常，这将意味着为某种工厂机制创建某种工厂机制`SqlConnection`，`SqlCommand`然后重载方法以确保查询针对您的内存结构。

# javascript - getImageData 导致“未捕获的错误：NOT_SUPPORTED_ERR：DOM 异常 9”

> ID：10302842
> 
> 赞同：4
> 
> 时间：2012-04-24T17:21:05.333
> 
> 标签：javascript, html, getimagedata, domexception

我正在尝试了解 HTML5 中的一些图像处理。我发现当我尝试使用 getImageData 方法时，我会抛出这个 JS 异常。我正在使用 Chrome 并在本地主机上运行。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T23:48:01.730

好的，找出问题所在。我要说的就是“derp”。我正在使用

```
getImageData(x, x) 
```

但我打算使用它的方式需要 4 个参数

```
getImageData(x,x,x,x) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:34:49.207

使用 Chrome 在本地系统上编辑文件可能是个问题。您可以关闭 Chrome 并使用标志 --allow-file-access-from-files 重新打开它以允许本地文件编辑。

当我遇到类似的问题时遇到了这篇文章，它有所帮助[。](http://halufa.blogspot.com/2011/03/securityerr-on-chrome-using.html)

# android - getGsmSignalStrength() 总是返回 '99'

> ID：10302844
> 
> 赞同：2
> 
> 时间：2012-04-24T17:21:18.340
> 
> 标签：android, signal-strength

在没有连接或连接不足的情况下提供“未许可”响应的许可检查，我一直在尝试解决。我想检查信号强度，如果它超过 50% (15) 或由于没有连接而返回 99，我希望它绕过检查，直到下次以更好的信号启动应用程序。这样，任何授权用户都不会看到 NOT LICENSED 响应。

问题 1：使用 getGsmSignalStrength() 时，也只返回 phone/3g/4g 强度或 wifi 强度。如果用户处于 wifi 模式，它应该也可以工作吗？我确实知道如何检查 wifi 是否已连接，因此如果需要，我可以随时使用它来检查 wifi。

问题 2：getGsmSignalStrength() 总是返回 '99' 的值，即使我盯着我的手机并且它显示出全部强度。

ConnectivityCheck.java 的全部目的是检查然后继续。现在我只是让它自动跳过检查并显示带有 getGsmSignalStrength() 数字的 Toast 框，但这总是显示“99”。

请帮忙，谢谢。下面我附上了我的代码......

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.emsprotocols.ilpaemsprotocols"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="7" />

<!-- PERMISSIONS -->
<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<!-- LICENSE PERMISSIONS -->
<uses-permission android:name="com.android.vending.CHECK_LICENSE" />

<!-- USES -->
<uses-feature android:name="android.hardware.telephony" android:required="false"/>

<application android:icon="@drawable/icon" android:label="@string/app_name" android:debuggable="true">
    <activity android:name=".ProtocolsSplashActivity"
              android:label="@string/app_name">
        <intent-filter> 
```

.Java 文件

```
package com.emsprotocols.ilpaemsprotocols;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.PhoneStateListener;
import android.telephony.SignalStrength;
import android.telephony.TelephonyManager;
import android.widget.Toast;

public class ConnectivityCheck extends Activity {
TelephonyManager        Tel;
MyPhoneStateListener    MyListener;

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);         

    /* Update the listener, and start it */
    MyListener   = new MyPhoneStateListener();
    Tel       = ( TelephonyManager )getSystemService(Context.TELEPHONY_SERVICE);
  Tel.listen(MyListener ,PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);

        startActivity(new Intent(this, ProtocolsMMenuActivity.class));  
        ConnectivityCheck.this.finish();
}

/* Called when the application is minimized */
@Override
protected void onPause()
{
  super.onPause();
  Tel.listen(MyListener, PhoneStateListener.LISTEN_NONE);
 }

 /* Called when the application resumes */
@Override
 protected void onResume()
{
  super.onResume();
  Tel.listen(MyListener,PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);
}

/* —————————– */
 /* Start the PhoneState listener */
/* —————————– */
 private class MyPhoneStateListener extends PhoneStateListener
 {
   /* Get the Signal strength from the provider, each tiome there is an update */
   @Override
   public void onSignalStrengthsChanged(SignalStrength signalStrength)
   {
      int strengthAmplitude = signalStrength.getGsmSignalStrength();

      super.onSignalStrengthsChanged(signalStrength);
      Toast.makeText(getApplicationContext(), "GSM Cinr = "
         + String.valueOf(strengthAmplitude), Toast.LENGTH_SHORT).show();
   }

 };/* End of private Class */

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:15:36.393

问题1：应该只是GSM信号强度。

问题2：我没有发现你的代码有什么问题，你确定你有GSM信号吗？如果您住在美国，您更有可能使用 CDMA 网络。还有其他方法可以获得信号强度：[链接](http://developer.android.com/reference/android/telephony/SignalStrength.html)

# c# - 终止我无法控制的线程运行代码

> ID：10302849
> 
> 赞同：4
> 
> 时间：2012-04-24T17:21:47.060
> 
> 标签：c#, multithreading, assemblies, stack-overflow

我正在做一个项目，我在运行时加载了几个程序集，对于每个程序集，我使用反射来查找一些特定的类，实例化它们并调用它们的方法。所有这些工作正常，但是对于某些调用，该进程遇到堆栈溢出，从而终止了我的整个程序。我无法控制正在加载的程序集的源代码，因此我无法更改正在执行的代码。

我试图解决的问题：

1.  我分配了一个线程来执行方法的调用，并尝试
    在 timeintervall 后中止线程（我知道这是不好的做法，但我不能更改代码以友好地终止）。然而这不起作用，我认为线程正忙于“stackoverflowing”来处理 Abort 调用。

2.  我尝试减少线程可以访问的实际内存，这甚至不是解决方案，因为您无法捕获 stackoverflow-exception 所以我的程序无论如何都会终止（更快）

问题：

1.  线程可以忙到中止吗？有什么方法可以中止具有这种行为的线程吗？
2.  我们如何才能以一种好的方式调用代码（我们无法控制）？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T17:25:50.740

在“不透明代码”的情况下，推荐的过程是实际派生一个新进程并启动它。这样您可以获得两个好处：

1.  如果它自己失败了，它就会被隔离，也不会让你的主应用程序宕机。
2.  你可以安全地杀死它，它不会像中止的线程那样造成麻烦。

# r - 从 ggplot2 创建的 nls 拟合中提取系数

> ID：10302851
> 
> 赞同：5
> 
> 时间：2012-04-24T17:21:46.983
> 
> 标签：r, ggplot2, nls

[这里](https://stackoverflow.com/questions/4382108/trying-to-display-original-and-fitted-data-nls-dnorm-with-ggplot2s-geom-smo)有一个很好的解释如何使用 ggplot2 创建散点图，使用 nls 拟合数据，并绘制拟合图，所有这些都在一行中，就像这样

```
myhist = data.frame(size = 10:27, counts = c(1L, 3L, 5L, 6L, 9L, 14L, 13L, 23L, 31L, 40L, 42L, 22L, 14L, 7L, 4L, 2L, 2L, 1L) )

ggplot(data=myhist, aes(x=size, y=counts)) + geom_point() + 
    geom_smooth(method="nls", formula = y ~ N * dnorm(x, m, s), se=F, 
    start=list(m=20, s=5, N=300)) 
```

我的问题是：使用这种结构，是否可以从该调用中提取实际的 nls 对象？我想知道我的系数等。现在我不知道如何在不进行单独的 nls 调用的情况下获得它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T19:14:58.217

> 我的问题是：使用这种结构，是否可以从该调用中提取实际的 nls 对象？我想知道我的系数等。

这目前在 ggplot2 中是不可能的。ggplot2 函数从模型返回预测，但不返回模型对象本身。因此，您无法从对象中提取`nls`对象`ggplot`以查找系数等。

ggplot2 和 ggplot2-dev 邮件列表中有两个相关的讨论：

[https://groups.google.com/d/topic/ggplot2/7tiUB2sjCxM/discussion](https://groups.google.com/d/topic/ggplot2/7tiUB2sjCxM/discussion)

[https://groups.google.com/d/topic/ggplot2-dev/dLGJnzIg4ko/discussion](https://groups.google.com/d/topic/ggplot2-dev/dLGJnzIg4ko/discussion)

*快速简介：*

虽然许多用户要求能够从`ggplot`对象中提取统计信息，但开发人员正在考虑它，但似乎有些反对。他们希望用户使用 ggplot2 进行可视化，并使用适当的建模函数来探索建模参数。但是，Hadley 支持实现将模型对象传递给`ggplot()`调用的能力的想法。因此，与其尝试`nls`从`ggplot`对象中提取对象，不如：

```
mod <- nls(y ~ N * dnorm(x, m, s), se = F, start = list(m = 20, s = 5, N = 300), 
        data = myhist)
ggplot(data = myhist, aes(x = size, y = counts)) + geom_point() + 
        geom_smooth(mod) 
```

这样，模型只需要被调用一次，你可以对它做任何你想做的事情，而且你不必通过搜索`ggplot`对象来找到它。但是，我不知道何时或是否会实施。

# android - 来自主题 ID 的 Android 主题名称

> ID：10302853
> 
> 赞同：26
> 
> 时间：2012-04-24T17:22:03.503
> 
> 标签：android, themes

我需要知道当前主题的名称，我已经有了主题的资源 ID。有人知道如何获取当前**主题的名称**吗？

谢谢

* * *

## 解决方案

```
public String getThemeName()
{
    PackageInfo packageInfo;
    try
    {
        packageInfo = getPackageManager().getPackageInfo(getPackageName(), PackageManager.GET_META_DATA);
        int themeResId = packageInfo.applicationInfo.theme;
        return getResources().getResourceEntryName(themeResId);
    }
    catch (NameNotFoundException e)
    {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-24T17:39:19.427

根据您的目标，尝试使用`getResourceEntryName()`或`getResourceName()`打开`Resources`（通常通过 检索）。`getResources()`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-12-28T11:28:30.253

Using`packageInfo.applicationInfo.theme`将返回整个应用程序的主题，而不是每个活动。这是 hacky，但应该获得当前活动/上下文的主题：

```
public static String getThemeName(Context context, Resources.Theme theme) {
  try {
    int mThemeResId;
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
      Field fThemeImpl = theme.getClass().getDeclaredField("mThemeImpl");
      if (!fThemeImpl.isAccessible()) fThemeImpl.setAccessible(true);
      Object mThemeImpl = fThemeImpl.get(theme);
      Field fThemeResId = mThemeImpl.getClass().getDeclaredField("mThemeResId");
      if(!fThemeResId.isAccessible())fThemeResId.setAccessible(true);
      mThemeResId = fThemeResId.getInt(mThemeImpl);
    } else {
      Field fThemeResId = theme.getClass().getDeclaredField("mThemeResId");
      if(!fThemeResId.isAccessible())fThemeResId.setAccessible(true);
      mThemeResId = fThemeResId.getInt(theme);
    }
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
      return theme.getResources().getResourceEntryName(mThemeResId);
    }
    return context.getResources().getResourceEntryName(mThemeResId);
  } catch (Exception e) {
    // Theme returned by application#getTheme() is always Theme.DeviceDefault
    return "Theme.DeviceDefault";
  }
} 
```

我知道这是一个老问题，但我想我会添加我的发现。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-24T17:28:27.570

尝试下面的代码行从资源 id 获取资源名称

```
getResources().getString(resource id); 
```

参考这个[链接](https://stackoverflow.com/questions/3476430/how-to-get-a-resource-id-with-a-known-ressource-name)你可能会得到一些想法如何做

# web-services - Restful Web 服务 IDE 和服务器

> ID：10302864
> 
> 赞同：0
> 
> 时间：2012-04-24T17:22:51.343
> 
> 标签：web-services, rest, ide

我对哪个 IDE 最适合 REST Web 服务实现以及使用哪个服务器感到困惑。我想实现 JAX RS 网络服务.!! 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:56:46.940

使用 netbeans 7.1 或更高版本，您可以将 GlassFish server v3.0 或更高版本用于 RESTful ws。使用netbeans，您可以节省大量时间来创建restful ws。

# sqlite - html 4中可以使用Local和Session存储吗？

> ID：10302869
> 
> 赞同：0
> 
> 时间：2012-04-24T17:23:08.743
> 
> 标签：sqlite, cordova, local-storage, html4, session-storage

我的 SQLite 数据库中有 2 列包含数据。我的应用程序是用 HTML4 编写的。

现在我需要做的是，根据点击的数据，我的应用程序应该将我带到带有点击数据的用户 ID 的下一页，以便我可以继续进行。

我的问题是：如何将点击的项目的用户 ID 传递到下一页？

我对本地和会话存储完全陌生。事实上，我以前从未使用过这个。有关它们的更多信息将使我的问题变得容易得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T02:36:19.260

简而言之，没有。

LocalStorage 是 HTML5 标准规范的一部分，用作 cookie/会话存储的替代方案。话虽如此，您可以使用会话或 cookie（取决于您的存储目的），同时请记住，这些替代方案可能不会像 localStorage 那样有效地存储和构建相当重的本地存储数据。

# c# - 菜单控件调整大小

> ID：10302872
> 
> 赞同：0
> 
> 时间：2012-04-24T17:23:21.103
> 
> 标签：c#, wpf, menu, resize

如果我的窗口重新调整大小，菜单控件也会随之调整大小。发生这种情况时看起来很糟糕。我怎样才能防止这种情况？我正在寻找一个名为“re size”的属性，但没有。

[编辑]

```
<Menu Canvas.Left="0" Canvas.Top="0" Name="menu1" Margin="0,0,0,384">
    <MenuItem Header="File" StaysOpenOnClick="True" FontFamily="Arial" VerticalAlignment="Center">
        <MenuItem Click="Open_Click" IsEnabled="True">
            <MenuItem.Header>
                <TextBlock Text="Open" VerticalAlignment="Center"/>
            </MenuItem.Header>
        </MenuItem>
    </MenuItem>
    </Menu> 
```

[/编辑]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:57:19.873

那是因为`Margin`财产。只需将其删除并设置`VerticalAlignment="Top"`为**Menu**。

`Margin="0,0,0,384"`表示**Menu**和 Menu 的可视父级的底部边界之间有 384 个长度单位。因此，这意味着**菜单**高度取决于它的视觉父高度，在您的情况下取决于窗口高度。

指定`VerticalAlignment="Top"`将导致以下结果：**菜单**将位于视觉父边界中尽可能高的位置，并且将具有尽可能小的高度以适应其内容：在您的情况下为“文件”文本。如果您认为它太小，您可以做两件事：指定`Height`为**Menu**或者，更明智的是，指定`Padding`为**Menu**。人们更喜欢指定`Padding`，因为它将保证**菜单**高度足以容纳内容，无论 FontSize 或 FontFamily 等将是**MenuItem**文本。

# python - Python pyglet AVBin - 如何安装 AVBin

> ID：10302873
> 
> 赞同：22
> 
> 时间：2012-04-24T17:23:21.267
> 
> 标签：python, mp3, virtualenv, pyglet

Pyglet 使用 AVBin 来解码 MP3。链接：[http ://avbin.github.com/AVbin/Download.html](http://avbin.github.com/AVbin/Download.html)

使用提供的 install.sh 安装，使用时会导致错误：

```
'AVbin is required to decode compressed media')
pyglet.media.riff.WAVEFormatException: AVbin is required to decode compressed media 
```

...所以它没有正确安装？使用 python virtualenv，怀疑这可能会导致问题......虽然我在 virtualenv 中运行了 AVBin 的 install.sh，如下所示：

```
(SoundShenanigans)user@computer:~/Downloads/avbin-linux-x86-64-v8$ sudo bash install.sh 
```

更新

我找到了安装avbin的位置...它似乎安装在正确的位置=S

```
~/pyvien/SoundShenanigans/lib/python2.7/site-packages/pyglet/media$ ls
avbin.py   drivers      __init__.pyc   procedural.pyc  riff.pyc
avbin.pyc  __init__.py  procedural.py  riff.py 
```

更新 2

库是 .so ，不是 .dylib ，为什么要 .dylib 神秘代码？这是 Linux 而不是 Mac（Mac 有 .dylib，Ubuntu 有 .so）

```
File "SoundShenanigans.py", line 4, in
  from pyglet.media import avbin
File "/home/user/pyvien/SoundShenanigans/local/lib/python2.7/site-packages/pyglet/media/avbin.py", line 53, in
  darwin='/usr/local/lib/libavbin.dylib')
File "/home/user/pyvien/SoundShenanigans/local/lib/python2.7/site-packages/pyglet/lib.py", line 122, in load_library
  raise ImportError('Library "%s" not found.' % names[0])
ImportError: Library "avbin" not found. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-19T21:39:32.543

如何通过以下方式安装它：

```
sudo apt-get install libavbin-dev libavbin0 
```

关于这个包的更多信息：[http ://packages.ubuntu.com/source/avbin](http://packages.ubuntu.com/source/avbin)

编辑：看起来它不再包含在较新的 ubuntu 版本中。所以你必须从[https://avbin.github.io/AVbin/Download.html](https://avbin.github.io/AVbin/Download.html)下载它并通过

```
sudo sh ./install-avbin-linux-x86-64-v10 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-26T14:22:52.183

我在 Windows 上遇到了同样的问题，并且在 Windows 上没有适用于 python 2.7 的安装程序。

如果您将 avbin dll 放在您的文件夹中（或使用安装程序全局安装），请编写：

```
pyglet.lib.load_library('avbin')
pyglet.have_avbin=True 
```

pyglet 导入后，像这样：

```
import pyglet
pyglet.lib.load_library('avbin')
pyglet.have_avbin=True 
```

它将愉快地加载和使用avbin。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T20:42:14.777

我去超级赛亚人把头撞在墙上，然后突破了它。

解决方案是安装 STABLE 版本，而不是最新版本。它只需要一点

```
:~/Downloads/avbin-linux-x86-64-7$ sudo ./install.sh 
```

它有效。我认为他们与他们的安装人员混淆了......

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-31T07:20:05.923

对我来说，特别是从[这里](http://code.google.com/p/avbin/)安装 AVbin 7 。

AVbin 8 和 10 似乎只是在运行，但没有任何声音出来。

运行 32 位 Ubuntu 12.04。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-08-23T07:33:39.453

[从这里](https://avbin.github.io/AVbin/Download.html)下载特定的安装程序。

然后转到下载文件夹并使用 sudo 运行它。

例如，在我的情况下，我运行了以下命令：

```
wget https://github.com/downloads/AVbin/AVbin/install-avbin-linux-x86-64-v10
sudo install-avbin-linux-x86-64-v10 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-11-12T13:45:10.290

我的操作系统是***Windows10 64bits***。

问题：

> *pyglet.media.riff.WAVEFormatException：解码压缩媒体需要 AVbin*

如何在 Windows10 上修复它：

1.  从[AVbin 下载下载 32 位 AVbin.dll](https://avbin.github.io/AVbin/Download.html)
    *请注意*：即使您使用 64 位 Win10，64 位 AVbin dll 也不起作用。
    所以请下载32位。

2.  1\. 中的 .exe 提取`avbin.dll`到`windows/system32/`文件夹中。
    请剪切/复制并粘贴到`windows/system/`文件夹。看起来 windows10 仅指 32bits AVbin 而不是 64bits。

3.  你可以走了。尝试一下 ！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-10-25T20:23:40.810

对我来说，我必须手动将 dll 移动到正确的文件夹中。
由于 AVBin 安装程序中的一个错误，它会在`C:\Windows\System32`应该放置在`C:\Windows\SysWOW64`.
（**假设你在 Windows 上！**）

要解决此问题，您所要做的就是进入`C:\Windows\System32`并找到`avbin.dll`（或者`avbin64.dll`如果您在 64 位系统上）并手动将其剪切并粘贴到`C:\Windows\SysWOW64`.

（或者，如果你是我并下载了两个 dll，那么将两个都移动......）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-19T13:18:24.003

我在 Windows 上遇到了这个问题，并通过搜索引擎找到了这个问题，所以我想我会分享我的经验和解决方案。

我尝试加载 w WMV 文件（至少这是扩展名）并得到与问题中描述的相同的异常，但我的问题是由于我使用“pip install pyglet”命令安装 pyglet，然后从安装程序安装 AVBin。

为我解决问题的是从项目站点上的安装程序安装 pyglet，它包含 AVBin，然后一切正常。

# vb6 - 如何在大型 Visual Basic 项目中查找变量或函数的来源

> ID：10302880
> 
> 赞同：4
> 
> 时间：2012-04-24T17:24:07.107
> 
> 标签：vb6

我有 50 个表单和许多模块的大型 Visual Basic 6 项目。当我打开一个表单时，我发现该表单中使用的一些变量/函数并非源自那里。那么我如何在不查看所有代码的情况下找出它最初是在哪里编写的。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T17:46:46.937

在 IDE 中打开项目。查找感兴趣的变量、函数等的出现，右键单击并选择*定义*。这应该带你去那里。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T03:27:11.063

Goto 定义 SHIFT + F2 是我在较小项目中工作时使用的。但是，如果您想要一些真正的力量，请下载并安装[MZ Tools](http://www.mztools.com/v3/mztools3.aspx)或 Agent Ransack。我个人使用[MZ 工具](http://www.mztools.com/v3/mztools3.aspx)，它具有一些适用于 VB6 的出色功能，例如查找变量、方法等的出现以及我知道您会发现非常有用的更多功能。

[MZ Tools](http://www.mztools.com/v3/mztools3.aspx)也可以免费使用，如果您愿意，可以捐款。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-06T11:50:04.133

`Shift`+`F2`即使在大型项目中也为我工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T17:27:18.000

它们可能是全局范围的变量。查找名为 global.bas 的文件（或任何以 .bas 扩展名命名的文件）并查看变量是否在其中声明。

函数也可以在 .bas 文件中的全局范围内声明。它们通常被称为“模块”，以区别于 .cls 文件 VB6 在其自身的对象编程风格中采用。您还可以在其中找到 Win32 API 函数声明...

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-24T17:26:44.663

[这可能对您有所帮助](http://rhondatipton.net/2008/01/05/useful-visual-studio-search-tool/)。据我所知，VS 没有项目搜索功能。如果我被误导并且它确实有一个，请改用它。

# sql - 具有多种分类法的 Wordpress SQL 查询

> ID：10302884
> 
> 赞同：0
> 
> 时间：2012-04-24T17:24:16.563
> 
> 标签：sql, wordpress, taxonomy

我正在开发一个项目，该项目在输入的半径内显示帖子类型，该半径按与目标地址的距离排序。现在我正在使用这个工作正常的查询：

```
sql = " SELECT SQL_CALC_FOUND_ROWS DISTINCT wposts.post_id, ( " . $_GET['mikm'] . " *           acos( cos( radians( $lat ) ) * cos( radians( wposts.lat ) ) * cos( radians( wposts.long ) - radians( $long ) ) + sin( radians( $lat ) ) * sin( radians( wposts.lat) ) ) )  AS distance  
    FROM post_address  wposts 
    WHERE wposts.post_type ='" . $post_type . "'
    HAVING distance <= $radius OR distance IS NULL ORDER BY distance LIMIT " . $from_page . "," . $per_page; 
```

post_address 是一个包含帖子 ID、帖子类型和地址的表。当使用地址保存或更新帖子时，该表正在使用信息进行更新。我使用的表格有地址字段、选择英里或公里的复选框以及下拉菜单中的距离。我使用 get 方法和表单进行分页。

虽然上面的查询工作正常，但我正在尝试添加分类法支持。我设法使它与一种分类法一起使用

```
wp_dropdown_categories($tax_name) 
```

和 SQL：

```
SELECT SQL_CALC_FOUND_ROWS DISTINCT wposts.post_id, ( " . $_GET['mikm'] . " * acos( cos( radians( $lat ) ) * cos( radians( wposts.lat ) ) * cos( radians( wposts.long ) - radians( $long ) ) + sin( radians( $lat ) ) * sin( radians( wposts.lat) ) ) )  AS distance  
FROM post_address  wposts
LEFT JOIN $wpdb->term_relationships ON (wposts.post_id = $wpdb->term_relationships.object_id)
LEFT JOIN $wpdb->term_taxonomy ON ($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
LEFT JOIN $wpdb->terms ON($wpdb->term_taxonomy.term_id = $wpdb->terms.term_id)
WHERE wposts.post_type ='" . $post_type . "'
AND $wpdb->term_taxonomy.taxonomy IN ('" $tax_name "')
AND ($wpdb->term_taxonomy.parent IN (" . $_GET[$tax_name] . ") OR $wpdb->term_taxonomy.term_id IN (" . $_GET[$tax_name] . "))
HAVING distance <= $radius OR distance IS NULL ORDER BY distance LIMIT " . $from_page . "," . $per_page; 
```

现在，由于一种分类法工作正常，我想让它与多种分类法一起工作，这就是我卡住的地方。例如，如果帖子类型“汽车”有 2 个分类法“模型”和“颜色”，我希望能够过滤具有“这个”模型和“这个”颜色的帖子。我不知道帖子类型存在多少分类法（曾经使用此插件的人将在管理设置中手动输入）并且它们现在被保存在数组中。例如 $taxonomies = array('car_model','car_color') 我可以使用以下方法填充类别下拉列表：

```
`
foreach ($taxonomies as $tax) {
echo     '<div id="' . $tax . '_cat">';
echo       '<label for="category-id">Choose category: </label>';
        custom_taxonomy_dropdown($tax); 
echo     '</div>';    
` 
```

和

```
function custom_taxonomy_dropdown($tax_name) {
$args = array(
        'taxonomy'          => $tax_name,
        'hide_empty'        => 0,
        'depth'             => 10,
        'hierarchical'      =>  1,
        'id'                =>  $tax_name . '_id',
        'name'              => $tax_name,
        'selected'          => $_GET[$tax_name],
        'show_option_all'   => 'All categories',
        );      
wp_dropdown_categories($args); 
} 
```

下拉列表工作正常，输出也被发送到 url，但我无法找到使其工作的 SQL 查询。

这是我的第一个项目。如果这个问题太长了，请原谅我，但我试图尽可能清楚。我也不确定上面的任何代码是否是最好的方法，但任何人的帮助将不胜感激。

更新：

下面是我现在使用的代码，它适用于多种分类法。但是，我仍然遇到一些问题。当我在所有分类法中选择“所有类别”时，sql 将如下所示：

```
AND $wpdb->term_taxonomy.term_id IN () 
```

并且计数将显示 count(*) = 0 这不会带来任何结果而不是所有结果。

另一个问题是子孙类别。当我选择父类别时，我希望获得其所有子类别和孙类别的结果。但由于没有帖子附加到父类别，而是附加到其子类别，我没有得到任何结果。这是我现在的代码：

```
 "SELECT SQL_CALC_FOUND_ROWS DISTINCT wposts.post_id, (" . $_GET['mikm'] . "* acos( cos( radians( $lat ) ) * cos( radians( wposts.lat ) ) * cos( radians( wposts.long ) - radians( $long ) ) + sin( radians( $lat ) ) * sin( radians( wposts.lat) ) ) )  AS distance 
        FROM posts_address  wposts
        LEFT JOIN $wpdb->term_relationships ON (wposts.post_id = $wpdb->term_relationships.object_id)
        LEFT JOIN $wpdb->term_taxonomy ON ($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
        LEFT JOIN $wpdb->terms ON($wpdb->term_taxonomy.term_id = $wpdb->terms.term_id)
    WHERE 
    wposts.post_type IN ('" . $post_type . "')

    AND $wpdb->term_taxonomy.term_id IN (" . $total_terms .") 
    GROUP BY wposts.post_id, wposts.lat, wposts.long        
        HAVING count(*) = " . $bc . " AND distance <= $radius OR distance IS NULL ORDER BY distance LIMIT " . $from_page . "," . $per_page  ; 
```

任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:16:53.133

如果我正确阅读了您的要求，则您无需从数据库中提取有关分类的信息，只需验证帖子“加入”所有必需的分类即可。使用所有必需的分类法加入帖子，然后根据行乘结果进行过滤。

第一步，你有

```
$wpdb->term_taxonomy.taxonomy IN ('" $tax_name "') 
```

和

```
$wpdb->term_taxonomy.parent IN (" . $_GET[$tax_name] . ") OR $wpdb->term_taxonomy.term_id IN (" . $_GET[$tax_name] . ")) 
```

拥有它，以便进入 IN 运算符的参数生成所有分类名称的列表，逗号分隔，用引号括起来。例如：

```
$wpdb->term_taxonomy.taxonomy IN ('model_a', 'color_blue') 
```

现在，查询会将帖子与帖子匹配的所有分类法（在您的过滤器中）相乘。从这里开始，这很简单：按帖子字段分组（您只需按查询中输出的字段分组），并使用 HAVING 进行过滤，以便您只返回帖子乘以所有类别。在此示例中，帖子应匹配两个类别，因此：

```
(...)
GROUP BY wposts.post_id, wposts.lat, wposts.long
HAVING count(*) = 2 AND (distance <= $radius OR distance IS NULL ORDER BY distance LIMIT " . $from_page . "," . $per_page); 
```

请注意，count(*) 过滤器应匹配匹配的分类“轴”的数量。另请注意，我假设分类法中没有冲突（即没有“蓝色”模型和“蓝色”颜色）。

您可能应该删除查询中的 DISTINCT 运算符（分组已经产生不同的帖子，我不确定 mysql 的优化器何时会计算不同的运算符）。

# android - Android SDK 中的最新 Apache HttpClient

> ID：10302890
> 
> 赞同：13
> 
> 时间：2012-04-24T17:24:41.193
> 
> 标签：android, httpclient

Android SDK 4.0.3 目前正在打包 Apache 的 HttpClient 4.1.1 库。我需要使用一些仅在最新的 HttpClient 4.1.3 中提供的功能。
- 有没有办法更新我的 SDK？
- 我在哪里可以知道未来的 SDK 是否有计划打包更新的 HttpClient？
- 有什么优雅的工作吗？（我已经尝试过 httpclientandroidlib [http://code.google.com/p/httpclientandroidlib](http://code.google.com/p/httpclientandroidlib) - 但我想探索其他选项）

任何指针表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T17:33:43.730

> 有什么方法可以更新我的 SDK？

只有通过构建您自己的固件并将该固件分发到您自己的手机。

对于 Android，HttpClient 在设备上，为了向后兼容，核心 Android 团队没有将 HttpClient 更新到 Android 1.0 之前的版本。

> 我在哪里可以知道未来的 SDK 中是否有计划打包更新的 HttpClient？

你可以在 Google 找到一份工作，为核心 Android 团队工作，然后提出问题。否则，Google 很少发布有关 Android 更改的公告。

话虽这么说，因为他们从 Android 1.0 开始就没有更新它，而且[他们不推荐使用 HttpClient](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)，所以在我看来他们完全升级 HttpClient 的可能性很小。

> 有什么优雅的工作吗？

你链接到一个，它做唯一真正可能的事情——将 HttpClient 重构到它自己的包中，这样它就可以与 Android 中的版本一起工作。我没有尝试过这个库，但如果它像宣传的那样工作，它似乎做得非常彻底。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-05T16:47:09.320

适用于 Android 的 HttpClient 4.3 可从 Maven 中心获得，并且可以作为以下依赖项添加到 Gradle 构建中：

依赖{编译组：'org.apache.httpcomponents'，名称：'httpclient-android'，版本：'4.3.3'}

看[这里](https://hc.apache.org/httpcomponents-client-4.3.x/android-port.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T02:24:05.523

[httpclientandroid](http://code.google.com/p/httpclientandroidlib/) 是适用于 android 的好库，并且按照您的要求最高可达 4.l.3。日志实现有点时髦。我发现每次我想将 WIRE 和 HEADER 记录器循环进出调试模式时，我都必须重新编译 lib。

# jquery - 如果我不使用表单，使用 ajax 的 Django

> ID：10302892
> 
> 赞同：0
> 
> 时间：2012-04-24T17:24:46.623
> 
> 标签：jquery, ajax, django, post

我已经创建了一个输入字段。我想要的是我在该框中输入的任何内容也反映在同一页面上（比如在 h1 之类的任何标签内）。我正在使用带有 ajax 的 django。但它给出了 403 错误。我不能如果我不想在模板中使用任何表单，请使用 ajax 和 django？如果可以，请提出一个简单的示例。

# android - ICS Android以编程方式启用gps？

> ID：10302894
> 
> 赞同：11
> 
> 时间：2012-04-24T17:24:59.327
> 
> 标签：android, gps, location

我知道这个问题在这里被问了很多，但只是想知道自从 ICS 发布以来，有没有办法以编程方式启用 gps？

我正在尝试启用 gps 并将设备的位置发送到电子邮件，应用程序将在收到短信时启动。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T17:27:43.183

> 有没有办法以编程方式启用gps？

我希望不会，因为那将是一个隐私缺陷。AFAIK，所有允许恶意软件以编程方式启用 GPS 的已知漏洞现已关闭。

> 我正在尝试启用 gps 并将设备的位置发送到电子邮件

用户控制是否启用 GPS。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T17:43:47.533

正如马克所说，我当然希望不是因为打开用户想要关闭的东西肯定不是一件好事;-)

当然，您可以要求用户这样做（您可能已经找到了，但这里的参考是一种从记忆中做到这一点的简单方法）

```
LocationManager L = (LocationManager) getSystemService(LOCATION_SERVICE); 

if (!L.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
     Intent I = new Intent( 
                android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);  
        startActivity(I);  
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T18:04:47.233

要让用户启​​用 GPS，请查看此[链接](http://www.helloandroid.com/tutorials/calling-system-settings-android-app-gps-example "关联")

下面是一个函数的内部结构，该函数试图按精度降序获取最后一个已知的 GPS 位置。如果用户没有启用 GPS，则无法启用它。您能做的最好的事情就是获取最后一个已知位置，或提示他们启用 GPS。每次用户在另一个应用程序中使用 GPS 并获得新坐标，或连接到无线网络时，最后一个已知位置都会改变。我想您可以编写一个后台服务，每 5-10 分钟轮询一次这些数据并将其发送给您。虽然，我不同意您似乎正在使用此应用程序的方向。哈哈。为了科学！

```
LocationManager lm = (LocationManager)act.getSystemService(Context.LOCATION_SERVICE);
Criteria crit = new Criteria(); 
crit.setAccuracy(Criteria.ACCURACY_FINE); String provider = lm.getBestProvider(crit, true); 
Location loc = lm.getLastKnownLocation(provider);

if(loc){
    return loc;
}
lm = (LocationManager)act.getSystemService(Context.LOCATION_SERVICE);
crit = new Criteria(); 
crit.setAccuracy(Criteria.ACCURACY_COARSE); 
provider = lm.getBestProvider(crit, true); 
loc = lm.getLastKnownLocation(provider);

if(loc){
    return loc;
}
lm = (LocationManager)act.getSystemService(Context.LOCATION_SERVICE);
crit = new Criteria(); 
crit.setAccuracy(Criteria.NO_REQUIREMENT); 
provider = lm.getBestProvider(crit, true); 
loc = lm.getLastKnownLocation(provider);
return null; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-04T04:04:04.447

您必须向用户询问权限：

```
Intent gpsOptionsIntent = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            startActivity(gpsOptionsIntent); 
```

# batch-file - 批处理 - 批处理参数替换中路径运算符的以下用法无效 - 存档 Google Chrome 下载文件夹

> ID：10302898
> 
> 赞同：1
> 
> 时间：2012-04-24T17:25:14.593
> 
> 标签：batch-file

A 制作了一个批处理文件以每月存档（使用 Windows 中的任务计划程序）Google Chrome 下载文件夹（在我的 Windows 7 64 位电脑上）。如果上个月没有修改，它应该将文件从某些文件类型移动到另一个文件夹。文件应移动到的文件夹取决于上次修改日期。

所以我制作了以下批处理文件：

```
@ECHO 关闭
CD C:\Users\Dagan\Downloads
FORFILES /m (DIR (FOR %%G IN (*.doc *.pdf) do echo %%G) /A /O:D /T:C /B /D) /c "FOR %Q IN (@path ) DO ((SET year=%%~tG) && (SET year=%year~6,4%) && (SET month=%%~tG) && (SET month=%month~3,2%) && ( MOVE %%G "C:\Users\Dagan\DownloadArchives\"%year%"\"%month%"\") && (SET year=) && (SET month=))" /d -31
CD C:\Users\Dagan\Desktop

```

但它不起作用，我收到以下错误：

```
批量参数替换中路径运算符的以下用法无效： %~tG ) && (SET year=%year~6,4%) && (SET month=%
%~tG) && (SET month=%month~3,2%) && (MOVE %%G "C:\Users\Dagan\DownloadArchives\"%
年%"\"%月%"\") && (SET 年=) && (SET 月=))" /d -31

对于有效格式类型 CALL /? 或为/？
☺ 在这一点上不是预期的。
```

有人可以帮我吗？

PS：这是我的批处理文件，但现在格式化以便更好地阅读：

```
@ECHO 关闭
CD C:\Users\Dagan\Downloads
外形 /m (
  目录 (
    对于 %%G IN (
      *.doc *.pdf
    ) 回显 %%G
  ) /A /O:D /T:C /B /D
） /C ”
  FOR %Q IN (@path) DO (
    (SET 年=%%~tG) && (SET 年=%year~6,4%) && (SET 月=%%~tG) && (SET 月=%month~3,2%) &&
    (MOVE %%G "C:\Users\Dagan\DownloadArchives\"%year%"\"%month%"\") &&
    (SET 年=) && (SET 月=)
  )
" /d -31
CD C:\Users\Dagan\Desktop

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:15:48.873

我认为路径变量中的“@”是问题所在。我不认为 CMD 扩展了 Perl 数组语法中的路径。

# c# - 在带有部分视图的 jQuery 对话框中上传文件

> ID：10302900
> 
> 赞同：2
> 
> 时间：2012-04-24T17:25:31.633
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我有一个页面，您可以在其中编辑客户端。在此页面上，您还可以为客户上传文件。单击一个按钮，将打开一个 jQuery 对话框，上传一个文件，然后单击保存。

这是我的 /Clients/Edit 视图：

```
<script type="text/javascript" language="javascript">

    $(document).ready(function () {

        // add file click event
        $("a#addFile").click(function () {
            $.ajax({
                url: '@Url.Content("/ClientFiles/Create/")' + @Model.ClientId,
                context: document.body,
                success: function (data) {
                    // open dialog with Create partial view data
                    $("#dialog-add").html(data).dialog("open");
                }
            });

            return false;
        });

        // add file dialog settings
        $("#dialog-add").dialog({
            modal: true,
            buttons: {
                "Save": function () {
                    $.validator.unobtrusive.parse("#AddFileForm");
                    if ($("#AddFileForm").valid()) {
                        $.post("/ClientFiles/Create", $("#AddFileForm").serialize(),
                            function (data) {
                                $("#dialog-add").dialog("close");   // close dialog
                            });
                    }
                }
            }
        });
    });

</script>

@using (Html.BeginForm("Edit", "Clients", FormMethod.Post))
{
    @Html.HiddenFor(m => m.ClientId)            

    <a id="addFile">Add a new file</a>
    <div id="dialog-add" title="" style="display:none"></div>        

    <input type="submit" value="Save" />            
} 
```

这是我的 /ClientFiles/Create 部分视图：

```
@model Models.ClientFileViewModel

@using (Html.BeginForm("Create", "ClientFiles", FormMethod.Post, new { @id = "AddFileForm", enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true)

    @Html.HiddenFor(model => model.ClientId)    
    @Html.TextBoxFor(model => model.ModelFile, new { type = "file" })

    @Html.ValidationSummary()
} 
```

这是我的 ClientFileViewModel：

```
public class ClientFileViewModel
{
    [ScaffoldColumn(false)]
    public int ClientFileId { get; set; }

    public int ClientId { get; set; }
    public HttpPostedFile ModelFile { get; set; }
} 
```

最后，我的 ClientFilesController 方法：

```
public ActionResult Create(int id)
{
    return PartialView(new ClientFileViewModel { ClientId = id  } );
}

public JsonResult Create(ClientFileViewModel viewModel)
{
    if (ModelState.IsValid)
    {
        if (viewModel.ModelFile != null)
        {
            // upload file here
        }
    }

    return Json(new { success = true });
} 
```

所以一切正常，直到我发布到`Create(ClientFileViewModel viewModel)`. 当我通过调试器时，视图模型包含`ClientId`，但`ModelFile`为空。

我是否做错了什么导致文件无法与视图模型一起传递？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T17:29:15.797

您应该使用基类 ( `HttpPostedFileBase`)，即替换：

```
public HttpPostedFile ModelFile { get; set; } 
```

和：

```
public HttpPostedFileBase ModelFile { get; set; } 
```

在您的视图模型中。

* * *

话虽这么说，这只是你问题的一半。您似乎正在使用 AJAX 请求来提交表单：

```
$.post("/ClientFiles/Create", $("#AddFileForm").serialize(), 
```

您不能使用 AJAX 将文件上传到服务器。您可以使用一些插件，例如[jquery.form](http://jquery.malsup.com/form/)，它支持[文件输入字段](http://jquery.malsup.com/form/#file-upload)并生成隐藏的 iframe 来规避此限制。因此，如果您决定使用该插件，您可以执行以下操作来 AJAXify：

```
"Save": function () {
    $.validator.unobtrusive.parse("#AddFileForm");
    if ($("#AddFileForm").valid()) {
        $("#AddFileForm").ajaxSubmit(function() {
            $("#dialog-add").dialog("close");
        });
    }
} 
```

其他允许您上传文件的流行插件是[Uploadify](http://www.uploadify.com/)，[Blueimp File Upload](https://github.com/blueimp/jQuery-File-Upload)，[Ajax Upload](http://valums.com/ajax-upload/)，...

# javascript - 即使未指定，您能否告诉 JSON.Net 将 DateTime 序列化为 Utc？

> ID：10302902
> 
> 赞同：68
> 
> 时间：2012-04-24T17:25:36.770
> 
> 标签：javascript, asp.net, entity-framework, json.net

我数据库中的日期存储为 Utc。但是当我使用实体框架检索它们时，它们会以未指定的类型出现。

当 JSON.Net 序列化它们时，它们不是 Utc 格式。有没有办法告诉 JSON.Net 将 DateTimes 序列化为 Utc，即使它们的类型未指定为 Utc？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-04-24T21:00:06.690

设置为。`DateTimeZoneHandling`_ 这将在序列化它们之前将所有日期转换为 UTC。`JsonSerializerSettings``Utc`

```
public void SerializeObjectDateTimeZoneHandling()
{
  string json = JsonConvert.SerializeObject(
    new DateTime(2000, 1, 1, 1, 1, 1, DateTimeKind.Unspecified),
    new JsonSerializerSettings
    {
      DateTimeZoneHandling = DateTimeZoneHandling.Utc
    });

  Assert.AreEqual(@"""2000-01-01T01:01:01Z""", json);
} 
```

文档：[**DateTimeZoneHandling 设置**](http://www.newtonsoft.com/json/help/html/SerializeDateTimeZoneHandling.htm)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-09-09T22:24:57.370

上面的响应完全有效，所以我用它来创建一个属性来将 API 响应从 PST 转换为 UTC。

首先我需要创建一个`JsonConverter`

```
public class UTCDateTimeConverter : Newtonsoft.Json.JsonConverter {
    private TimeZoneInfo pacificZone = TimeZoneInfo.FindSystemTimeZoneById("Pacific Standard Time");
    public override bool CanConvert(Type objectType) {
        return objectType == typeof(DateTime);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer) {
        if (reader.Value == null) return null;
        var pacificTime = DateTime.Parse(reader.Value.ToString());
        return TimeZoneInfo.ConvertTimeToUtc(pacificTime, pacificZone);
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer) {
        writer.WriteValue(TimeZoneInfo.ConvertTimeFromUtc((DateTime) value, pacificZone));
    }
} 
```

然后我必须将其应用于需要转换的属性

```
public class Order{
    [JsonConverter(typeof(UTCDateTimeConverter))]
    public DateTime OrderDate {get;set;}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-17T16:59:29.390

正如@dez 在评论中提到的那样，您可以在从数据库加载它们并在序列化它们之前直接在.net 代码中将 DateTime 对象“标记”为 UTC：

```
var item = GetItemFromDb(...);

// mark appropriate DateTime fields manually as needed
item.OrderDate = DateTime.SpecifyKind(item.OrderDate, DateTimeKind.Utc);

// now it will be serialized to "2018-10-17T16:21:23.507Z" with the Z at the end
// and javascript will parse it properly and convert to local timezone as needed 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-30T14:10:05.577

对我来说，为 DateTime 属性创建 UTC 转换器更简单（基于 Newtonsoft.Json.Converters.IsoDateTimeConverter 的实现）。

```
public class UtcJsonDateTimeConverter : DateTimeConverterBase
{
    private const string DefaultDateTimeFormat = "yyyy'-'MM'-'dd'T'HH':'mm':'ss.FFFFFFFZ";

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        string text;

        if (value is DateTime dateTime)
        {
            text = dateTime.ToString(DefaultDateTimeFormat, CultureInfo.InvariantCulture);
        }
        else
        {
            throw new JsonSerializationException(
                $"Unexpected value when converting date. Expected DateTime or DateTimeOffset, got {value.GetType()}.");
        }

        writer.WriteValue(text);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        bool nullable = objectType == typeof(DateTime?);
        if (reader.TokenType == JsonToken.Null)
        {
            if (!nullable)
            {
                throw new JsonSerializationException($"Cannot convert null value to {objectType}.");
            }

            return null;
        }

        if (reader.TokenType == JsonToken.Date)
        {
            return reader.Value;
        }
        else if (reader.TokenType != JsonToken.String)
        {
            throw new JsonSerializationException($"Unexpected token parsing date. Expected String, got {reader.TokenType}.");
        }

        string date_text = reader.Value.ToString();

        if (string.IsNullOrEmpty(date_text) && nullable)
        {
            return null;
        }

        return DateTime.Parse(date_text, CultureInfo.InvariantCulture, DateTimeStyles.AssumeUniversal);
    }
}

public class SomeEntity
{

   [JsonProperty(PropertyName = "id", Order = 1)]
   public int ID { get; set; }

   [JsonProperty(PropertyName = "created", Order = 2)]
   [JsonConverter(typeof(UtcJsonDateTimeConverter))]
   public DateTime Created { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-25T03:07:02.260

我使用了接受的答案，但适用于默认设置：

```
 JsonConvert.DefaultSettings = (() =>
        {
            var settings = new JsonSerializerSettings();
            settings.Converters.Add(new StringEnumConverter());
            settings.Formatting = Formatting.Indented;
            settings.DateTimeZoneHandling = DateTimeZoneHandling.Utc;
            return settings;
        }); 
```

# actionscript-3 - 为什么 getTimer 返回一个 int，而不是 uint，甚至是 Number？

> ID：10302904
> 
> 赞同：2
> 
> 时间：2012-04-24T17:25:39.490
> 
> 标签：actionscript-3

这让我困惑和困扰了几年，以为我会为此展开讨论。需要考虑的一些问题：

每种数据类型的性能影响是什么？

我应该用整数而不是 uint 来做所有与时间戳相关的数学运算吗？

当 getTimer 超过 int.MAX_VALUE 时会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:17:02.047

我没有任何“真实”的证据来支持我，但我认为他们这样做了，因为如果计时器确实翻转，您可以检测到这一点并相应地解释它。当 uint 计时器翻转时，将更难检测到。

# javascript - location.href 属性与 location.assign() 方法

> ID：10302905
> 
> 赞同：97
> 
> 时间：2012-04-24T17:25:39.570
> 
> 标签：javascript

JavaScript 内存消耗在使用和使用之间有什么特别的优势/劣势`location.href = url`吗`location.assign(url)`？

我想我想知道访问该方法是否需要更多内存而不是设置属性。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-03T14:09:08.690

我个人更喜欢调用函数，因为调用函数给我一个更好的印象，那就是某些东西正在运行，而不仅仅是变量的值在变化。

但可能是的，它可能确实`location.href = url;`比 快`location.assign(url)`，尽管它可能取决于 JavaScript 引擎实现，请参阅[我刚刚创建的测试](http://jsperf.com/location-href-vs-location-assign)。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2018-05-30T11:58:26.407

我知道这很旧，但是当我在寻找一种方法来检查我的单元测试是否重定向到正确的 url 时，我偶然发现了这一点。

`window.location.assign()`如果您更关心测试，我会选择。使用函数可以模拟所述函数并检查 url 输入参数。

因此，使用玩笑：

```
window.location.assign = jest.fn();

myUrlUpdateFunction();

expect(window.location.assign).toBeCalledWith('http://my.url');

// Clean up :)
window.location.assign.mockRestore(); 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-04-24T17:28:04.083

我一直使用并且从未遇到过以下问题：

```
location.href = url; 
```

调用函数应该比访问属性稍微慢一些，但就内存而言，我的拙见应该没有太大差异。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-05-02T13:46:03.500

> 使用 location.href = url 与 location.assign(url) 相比，JavaScript 内存消耗有什么特别的优势/劣势吗？

### 不

完全是零差异。

这样做的原因是简单的。每次您的浏览器加载一个新页面时，它都会启动一个全新的 Javascript “VM”，该页面的脚本在该 VM 中运行。运行问题中的任何一个语句时，您都在指示浏览器加载新页面，这意味着销毁当前 VM（并释放与其关联的任何内存）并为新页面加载全新的 VM。

除了任何奇怪的浏览器错误之外，最终效果总是相同的。您的脚本在内存消耗完全相同的全新 VM 中运行。

### [外置](https://www.npmjs.com/package/ulocation)

如果您在浏览器中使用位置对象，并且希望能够在 Node JS 上运行此代码（例如，用于测试或等距代码），您可以使用`ulocation`Location 对象的通用/等距实现。*完全披露：我是那个包的作者。*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-03T02:18:55.497

在 Windows Server 2008 R2 / 7 64 位上测试了我的机器/浏览器[http://jsperf.com/location-href-vs-location-assign/2](http://jsperf.com/location-href-vs-location-assign/2)的 Chrome 40.0.2214.93 32 位

location.assign 比 location.href 慢 15%。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-24T09:14:22.613

我想补充一下我在使用 React 时使用这两种方法时所经历的不同之处，而上述答案都缺失了。

分析 React 中的以下代码段：

```
return (<>location.href = "www://example.com"</>) 
```

VS

`return (<>location.assign("www://example.com")</>)`

在前一种情况下，您实际上会看到字符串*www://example.com*在 DOM 上输入了一瞬间，因为它会在重定向发生之前呈现文本。

为了避免这种情况我们需要使用后者`location.assign()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-19T12:07:01.087

实际上我认为有区别

1.  location.href 是一个属性，这意味着它比调用函数更快，但最重要的是 href 属性使用户能够在单击浏览器上的后退按钮时返回
2.  location.replace() 用户将无法返回当前页面。
3.  location.assign() 用户将能够通过 href 等返回按钮返回，但 location.assign 在测试和模拟方面更好

# android - android 可打包异常

> ID：10302908
> 
> 赞同：0
> 
> 时间：2012-04-24T17:25:52.470
> 
> 标签：android, exception, bundle, parcelable

在我的项目中，我有一个实现 Parcelable 的类：

```
public class cursorParcel implements Parcelable{

    private long id;
    private long edc;
    private String name;
    private String notes;
    private long details;

    public cursorParcel() {
        id = 0;
        edc = 0;
        details = 0;
        notes = null;
        name = null;
    }
    public cursorParcel(Parcel in){
        id = in.readLong();
        edc= in.readLong();
        details= in.readLong();
        name= in.readString();
        notes=in.readString();
    }
    public void setCursor (Cursor cursor){
        id = cursor.getLong(1);
        edc = cursor.getLong(cursor.getColumnIndex("edc"));
        details = cursor.getLong(cursor.getColumnIndex("details"));
        notes = cursor.getString(cursor.getColumnIndex("notes"));
        name = cursor.getString(cursor.getColumnIndex("name"));
    }
    @Override
    public int describeContents() {
        return 0;
    }
    @Override
    public void writeToParcel(Parcel arg0, int arg1) {
        arg0.writeLong(id);
        arg0.writeLong(edc);
        arg0.writeLong(details);
        arg0.writeString(name);
        arg0.writeString(notes);
    }
    public long getId(){
        return id;
    }
    public long getEdc(){
        return edc;
    }
    public long getDetails(){
        return details;
    }
    public String getName(){
        return name;
    }
    public String getNotes(){
        return notes;
    }
    public static final Parcelable.Creator<cursorParcel> CREATOR =  new Parcelable.Creator<cursorParcel>() {
            public cursorParcel createFromParcel(Parcel in) {
                return new cursorParcel(in);
            }
            public cursorParcel[] newArray(int size) {
                return new cursorParcel[size];
            }
    };  
} 
```

我捆绑它，并将它传递给意图，当我打开它时，我得到一个异常。

```
Bundle bundle = this.getIntent().getExtras();
        if (bundle!=null){
            cursorParcel cursor =  bundle.getParcelable("cursor");
        } 
```

此时我得到一个 ClassCastException 。请帮助我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:40:12.560

尝试这个：

```
cursorParcel  mPerson = (cursorParcel)getIntent().getSerializableExtra("cursor"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-25T05:07:08.150

我认为您应该在 WriteToParcel 中将变量写为字符串：

```
arg0.writeStringArray(new String[]{String.valueOf(id),String.valueOf(edc),String.valueOf(details),this.name,this.notes}); 
```

# delphi - 如何声明一个 Int64 常量？

> ID：10302910
> 
> 赞同：5
> 
> 时间：2012-04-24T17:26:09.093
> 
> 标签：delphi, constants, delphi-7, delphi-5, int64

我正在尝试在 Delphi 中定义一个常量：

```
const
   FNV_offset_basis = 14695981039346656037; 
```

我得到错误：**整数常数太大**

> **注意：** `14,695,981,039,346,656,037`十进制等于`0x14650FB0739D0383`十六进制。

我怎样才能声明这个`Int64`常数？

我尝试过的其他一些事情：

```
const
   FNV_offset_basis: Int64 = 14695981039346656037;
   FNV_offset_basis = Int64(14695981039346656037);
   FNV_offset_basis: Int64 = Int64(14695981039346656037);

var
   offset: LARGE_INTEGER;
begin
   //recalculate constant every function call
   offset.LowPart = $739D0383;
   offset.HighPart = $14650FB0; 
```

**更正**

我的基本假设是错误的。

粘贴`14695981039346656037`到 Windows 7 Calculator 中，并转换为十六进制，让我相信十六进制等效`14695981039346656037`于`0x14650FB0739D0383`：

![在此处输入图像描述](../Images/a034342039c8ec2c9230b4e78f3a10e6.png)

这是不正确的。

因此，当我看到一个 16 位十六进制值且高位*未设置*时，我认为它可以放入 64 位有*符号*整数。

实际上，十六进制等价物`14695981039346656037`是……别的东西。罗布，你是对的！（大概）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T17:36:37.410

您在问题中的十六进制转换不正确。该数字实际上是 $cbf29ce484222000 并且不适合有符号的 64 位整数。您需要一个无符号的 64 位整数来表示它。Delphi 5 中没有未签名的 UInt64，所以你不走运。在您的 Delphi 版本中，没有可以表示该数字的整数数据类型。

如果您需要的话，您也许可以将位模式解释为有符号值。在这种情况下，您将有一个负数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T20:23:09.660

我只需要 64 位变量来保存 64 位（无符号）数字。我仍然可以使用 Delphi`Int64`来完成它，但诀窍是如何声明我需要的常量：

```
const
    FNV_offset_basis: ULARGE_INTEGER = (LowPart: $cbf29ce4; HighPart: $84222000); 
```

（感谢 Dave 和 Rob 为我找到*正确*的十六进制值）

虽然严格来说，我没有使用`Int64`，但我使用的是 Int64：

```
var
   hash: Int64;
begin
   hash := FNV_offset_basis.QuadPart;

   for i := 1 to Length(s) do
   begin
       hash := hash xor Byte(s[i]);
       hash := UInt64Mul(hash, 1099511628211);       
   end;

   Result := UInt64mod(hash, map.Length);
end; 
```

通过一些精心设计的`UInt64Xxx`数学例程：

```
function UInt64mod(const Dividend: Int64; const Divisor: DWORD): DWORD;
var
    d2: LongWord;
    remainder: LongWord;
begin
    //Upper half of dividend cannot be larger than divisior, or else a #de divide error occurs
    //Keep multiplying by two until it's larger.
    //We fixup at the end
    d2 := Divisor;
    while d2 < u.HighPart do
       d2 := d2 * 2;

    asm
        MOV   EDX, ULARGE_INTEGER(Dividend).HighPart;
        MOV   EAX, ULARGE_INTEGER(Dividend).LowPart;
        MOV   ECX, d2;

        //EAX := EDX:EAX / r/m32, EDX=remainder
        DIV   ECX;
        MOV   remainder,EDX
    end;

    //Fixup for using larger divisor
    Result := remainder mod Divisor;
end; 
```

我将把实现`UInt64Mul`作为练习留给读者。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-24T17:30:45.787

该数字大于带符号的 64 位整数可以容纳的数量。您是否尝试过使用`UInt64`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-01T20:36:01.797

我有一个 WMI 调用，它返回了 Delphi 5 不支持的 Uint64 类型的 Variant。假设 Int64 对我期望的结果足够公平，1-我对返回的 Variant 进行类型转换并将其存储到扩展（真实类型）中，2 - 我使用了“Trunc”函数，它在需要时从 Extended 返回 Int64。

不完全是您想要的，但考虑 Real Types 可能会帮助某人实现一些“不可能”的 Delphi 5 数学。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-14T23:18:44.960

Windows 7 计算器出现故障并在没有警告的情况下删除最后一个数字，即使选择了 QWord，计算器似乎也无法真正以 64 位计算。它似乎是仅在 Windows 7 中的 Int64 计算器，它也无法显示足够的数字，并且只是将它们剥离为完全错误的值。有趣的是，Windows XP 计算器没有这个错误。

And the real Hex Value of 14695981039346656037 is 0xCBF29CE484222325 also 14695981039346656037 = (20921 * 465383 * 1509404459) now as a proof try to calculate it with this Calculator and you will get -3750763034362895579 (signed) instead of 14695981039346656037 (unsigned) in Programmer Mode, but在科学模式下它将是正确的。

# sql-server - 为什么 MyGeneration 存储过程生成器模板不起作用？

> ID：10302911
> 
> 赞同：2
> 
> 时间：2012-04-24T17:26:09.117
> 
> 标签：sql-server, vb.net, sql-server-2008, mygeneration

我从这个链接下载了存储过程生成器模板：

[http://www.mygenerationsoftware.com/TemplateLibrary/Template/?id=10998336-5037-496c-a163-050060de065a](http://www.mygenerationsoftware.com/TemplateLibrary/Template/?id=10998336-5037-496c-a163-050060de065a)

基本上，它通过读取模式生成 Insert、Update、Delete、Select 和 LoadByPrimaryKey 存储过程。

但是，当我运行它时它不起作用。我在这一行得到错误：

```
For Each objColumn In objTable.PrimaryKeys 
```

我得到的错误是：

> 对象不支持此属性或方法

有人遇到过这个问题吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T19:31:48.953

模板代码未通过枚举运行。不确定这是 MyGeneration 问题还是 VBScript 问题。无论如何，在这样的模板更改代码中：

```
For each objColumn In objTable.PrimaryKeys 
```

改成：

```
For j=0 to objTable.PrimaryKeys.Count - 1
    Set objColumn = objTable.PrimaryKeys(j) 
```

也有这样的代码实例：

```
For each objColumn In objTable.Columns 
```

改成：

```
For j=0 to objTable.Columns.Count - 1
    Set objColumn = objTable.Columns(j) 
```

这对我有用（Windows 7、.Net 4.0、Sql Server 2008 R2、MyGeneration 1.3.1.1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T16:56:14.483

我试过了，它工作正常（mygeneration 1.3.9）。表是否有主键？我认为在“doodad”中需要生成存储过程。

如果所有模板都不起作用，请重新安装 myGeneration（这发生在我身上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-12T16:38:36.000

如果您将模板脚本从 Microsoft / VB 脚本更改为 .NET，Windows 7 及更高版本中的 vbScript 会导致 MyGeneration 出现此问题。

它可能适用于您的代码，并且比更改所有 foreaches 更快。我在这里使用 C#，但 VB.NET 的代码格式与 VBScript 非常相似，因此除了单击模板配置句柄并将模板语言更改为 .NET 脚本之外，它可能无需修改即可工作。

执行此操作后 - 更改模板的名称和 GUID（按 NEWGUID） - GUID 是唯一标识符，如果您想知道您正在使用什么，您必须同时更改。

# symfony - Symfony2，如何在主“Environment”对象上使用“addExtension()”方法注册扩展

> ID：10302913
> 
> 赞同：16
> 
> 时间：2012-04-24T17:26:23.057
> 
> 标签：symfony, twig

我想在一个`symfony2`项目中加载一个新的扩展，`twig`但我不知道我应该把下面的行放在哪里工作：

```
$twig = new Twig_Environment($loader, $config);
$twig->addExtension(new Twig_Extension_Debug()); 
```

[http://twig.sensiolabs.org/doc/functions/dump.html](http://twig.sensiolabs.org/doc/functions/dump.html)的任何教程？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-14T22:06:55.723

我可以为树枝添加调试，如下所示：

```
# app/config/config.yml
services:
    acme_hello.twig.extension.debug:
        class:        Twig_Extension_Debug
        tags:
             - { name: 'twig.extension' } 
```

看[这里](http://symfony.com/doc/current/book/templating.html#debugging)了解更多详情；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:41:12.267

您必须使用`twig.extension`标签创建服务。看[这里](http://symfony.com/doc/current/reference/dic_tags.html#enabling-custom-twig-extensions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:43:36.583

还有一本关于 Symfony 文档的食谱，介绍了如何为 Symfony 创建自定义树枝扩展。

[你可以在这里](http://symfony.com/doc/current/cookbook/templating/twig_extension.html)看看

问候，
马特

# asp.net - 无法评估表达式

> ID：10302914
> 
> 赞同：2
> 
> 时间：2012-04-24T17:26:26.643
> 
> 标签：asp.net, .net, vb.net, visual-studio

我正在使用一个类来检查我的应用程序中的某些单词以防止 SQL 注入。

在该类中，有一个 for 循环尝试将特定单词与黑名单中的单词进行匹配。如果匹配，我必须重定向到系统的错误页面。

但是，当找到匹配项并尝试重定向时，我不断收到错误“无法评估表达式”。

这是代码：

```
Private Sub CheckInput(ByVal parameter As String)
Try
    Dim errorPage As String = "error_page.aspx?Injection=" & parameter

    For i As Integer = 0 To blackList.Length - 1
        If (parameter.IndexOf(blackList(i), StringComparison.OrdinalIgnoreCase) >= 0) Then
            'Handle the discovery of suspicious Sql characters here 
            'generic error page on your site 
            HttpContext.Current.Response.Redirect(errorPage)
        End If
    Next

Catch ex As Exception
    Throw ex
End Try 
```

一旦 Try 块捕获到错误，它就会继续给出错误并且不会重定向到错误页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T17:37:44.617

“无法评估表达式”来自 Visual Studio 调试器，当它看到[`ThreadAbortException`由`Response.Redirect`](https://stackoverflow.com/questions/2777105/response-redirect-causes-system-threading-threadabortexception). 如果没有附加调试器，您的代码将按预期工作。

[您可以通过`false`以防止当前请求被结束](http://support.microsoft.com/kb/312629/EN-US/)（这就是它的`ThreadAbortException`用途）。然后，您负责优雅地“结束”请求。

FWIW，您还应该删除`try/catch`，因为它[除了隐藏任何异常之外没有任何用处](http://www.tkachenko.com/blog/archives/000352.html)。而且，如前所述，SQL 参数是防止注入的方法——而不是白名单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:31:02.933

你可能有一个无限循环。是否`CheckInput`也为您的错误页面运行？

```
Dim errorPage As String = "error_page.aspx?Injection=" & parameter 
```

当您遇到错误时，您将包含导致错误的相同字符串，从而导致整个事情重新开始

# android - Android TableLayout 动态或固定大小

> ID：10302915
> 
> 赞同：0
> 
> 时间：2012-04-24T17:26:27.403
> 
> 标签：android, size, android-tablelayout

我是一名 Android 新手，我想知道如何处理我想要显示的大桌子。

目前我正在测试一个带有**100 个 TableRows的****TableLayout**。最终表将有更多行，大约为**数千**行。 由于 TableLayout 是一个**View**，我想知道在这种情况下什么是正确的或推荐的方法。要使用包含我拥有的所有数据的视图（TableLayout），或者在用户上下滚动时在可视窗口中动态添加/删除行。

 ******不同方法的优缺点是什么？例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:35:56.397

将它们全部同时显示在屏幕上的最明显的缺点是操作系统本质上必须同时将所有数千个 View 对象放在内存中 -**非常**昂贵，内存方面。

另一方面，在滚动时创建和销毁视图是处理器密集型的，并且会大大降低 UI 的速度。

主要替代方法（以及 android 在其`ListView`控制中使用的替代方法（顺便说一下，这可能是您应该使用的替代方法）是只创建足够的视图来填充屏幕（在两侧加上一点填充），并且作为一个离开顶部，在底部重新使用它，改变它的属性而不是创建一个全新的视图。

不过，上面的逻辑很复杂，为什么要重新发明轮子呢？带有[自定义适配器](http://developer.android.com/reference/android/widget/CursorAdapter.html)的[列表视图控件](http://developer.android.com/resources/tutorials/views/hello-listview.html)应该能够像您尝试做的那样呈现数据，并且已经完成了艰苦的工作。******

# php - Joomla 1.5 中的 If (Author) 语句

> ID：10302917
> 
> 赞同：0
> 
> 时间：2012-04-24T17:26:29.873
> 
> 标签：php, if-statement, joomla

我需要基于 php 的 if 循环，我可以在 Joomla 1.5 HTML 中插入 php 代码来查找作者，当我得到该变量时，我可以制作 IF 语句

例如

```
if ($author="a") {
echo "This is author a";
}

elseif ($author="b"){
echo "this is author b";
}

elseif ($author="c"){
echo "this is author c";
} 
```

我不知道如何从文章中获取 $author 变量（名称）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:27:23.213

您应该在 if 语句中使用`==`or`===`而不是`=`

例子

```
if ($author == "a") {
    echo "This is author a";
} 

elseif ($author == "b") {
    echo "this is author b";
} 

elseif ($author == "c") {
    echo "this is author c";
} 
```

或使用开关

```
switch ($author) {
    case "a" :
        echo "This is author a";
        break;
    case "b" :
        echo "This is author a";
        break;
    case "c" :
        echo "This is author a";
        break;
} 
```

# python - 如何在 SciPy 中创建对角稀疏矩阵

> ID：10302923
> 
> 赞同：3
> 
> 时间：2012-04-24T17:26:56.673
> 
> 标签：python, numpy, scipy, sparse-matrix, diagonal

我正在尝试创建一个稀疏矩阵，该矩阵具有沿对角线运行的 2D 模式。这可能是最容易用一个简单的例子来解释的。

假设我的模式是：[1,0,2,0,1] ...

我想创建一个稀疏矩阵：

```
 [[2,0,1,0,0,0,0...0],
     [0,2,0,1,0,0,0...0],
     [1,0,2,0,1,0,0...0],
     [0,1,0,2,0,1,0...0],
     [0,0,1,0,2,0,1...0],
     [...]] 
```

scipy.sparse.dia_matrix 似乎是一个不错的候选者，但是，我根本无法从可用的文档中弄清楚如何完成我想要的。先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T17:41:07.320

```
N = 10
diag = np.zeros(N) + 2
udiag = np.zeros(N) + 1
ldiag = np.zeros(N) + 1
mat = scipy.sparse.dia_matrix(([diag, udiag, ldiag], [0, 2, -2]), shape=(N, N))
print mat.todense()
[[ 2\.  0\.  1\.  0\.  0\.  0\.  0\.  0\.  0\.  0.]
[ 0\.  2\.  0\.  1\.  0\.  0\.  0\.  0\.  0\.  0.]
[ 1\.  0\.  2\.  0\.  1\.  0\.  0\.  0\.  0\.  0.]
[ 0\.  1\.  0\.  2\.  0\.  1\.  0\.  0\.  0\.  0.]
[ 0\.  0\.  1\.  0\.  2\.  0\.  1\.  0\.  0\.  0.]
[ 0\.  0\.  0\.  1\.  0\.  2\.  0\.  1\.  0\.  0.]
[ 0\.  0\.  0\.  0\.  1\.  0\.  2\.  0\.  1\.  0.]
[ 0\.  0\.  0\.  0\.  0\.  1\.  0\.  2\.  0\.  1.]
[ 0\.  0\.  0\.  0\.  0\.  0\.  1\.  0\.  2\.  0.]
[ 0\.  0\.  0\.  0\.  0\.  0\.  0\.  1\.  0\.  2.]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:15:16.117

这是一种创建类似列表的有趣方法：

```
>>> n = 7
>>> a = n*[0] + [1, 0, 2, 0, 1] + [0]*n
>>> [a[-i+n+2:-i+2*n+2] for i in xrange(n)]
[[2, 0, 1, 0, 0, 0, 0], 
 [0, 2, 0, 1, 0, 0, 0], 
 [1, 0, 2, 0, 1, 0, 0], 
 [0, 1, 0, 2, 0, 1, 0], 
 [0, 0, 1, 0, 2, 0, 1], 
 [0, 0, 0, 1, 0, 2, 0], 
 [0, 0, 0, 0, 1, 0, 2]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:43:22.327

```
In [27]: N = 5

In [28]: diagonalvals = [7, 8, 9]

In [29]: offsets = [-2, 0, 2]

In [30]: diagonaldata = [[v for n in range(N)] for v in diagonalvals]

In [31]: print diagonaldata
[[7, 7, 7, 7, 7], [8, 8, 8, 8, 8], [9, 9, 9, 9, 9]]

In [32]: A = scipy.sparse.dia_matrix((diagonaldata, offsets), shape=(N, N))

In [33]: print A
  (2, 0)    7
  (3, 1)    7
  (4, 2)    7
  (0, 0)    8
  (1, 1)    8
  (2, 2)    8
  (3, 3)    8
  (4, 4)    8
  (0, 2)    9
  (1, 3)    9
  (2, 4)    9 
```

# php - Smarty / PHP 我想在下拉列表中选择一项，但是使用 smarty 它不起作用

> ID：10302924
> 
> 赞同：0
> 
> 时间：2012-04-24T17:26:57.153
> 
> 标签：php, smarty

在我的论坛中，当我添加一个主题时，我有一个包含所有可能类别的下拉列表。当我发布并且其中一个文本字段为空时，会出现错误，我想保持选中下拉列表中的选定项目。

我以前做过，但没有用 Smarty。有人可以看到我做错了什么吗？

```
$query_cat = "
    SELECT
        fcID
        ,fcName
    FROM
        forum_categories
    ";
    $exec_cat = mysql_query($query_cat);    
    while($categories = mysql_fetch_assoc($exec_cat))
    {
        if(isset($_POST['category']))
        {
            $selected = ' selected';
        }
        else
        {
            $selected = '';
        } 
    }
    $this->view->assign('selected', $selected);

    if ($_SERVER['REQUEST_METHOD'] == 'POST')  
    {  
        $row = mysql_fetch_assoc($exec_cat);
        $subject = mysql_real_escape_string(htmlentities($_POST['subject']));
        $content = mysql_real_escape_string(htmlentities($_POST['content']));

        $query_add_topic = "
        INSERT INTO
            forum_topics
        (
            ftDate
            ,fcID
            ,fuID
            ,ftSubject
            ,ftMessage
        )
        VALUES
        (
            NOW()
            ,'".$_POST['category']."'
            ,'".$_SESSION['userid']."'
            ,'".$subject."'
            ,'".$content."'
        )
        ";
        $exec_add_topic = mysql_query($query_add_topic);
    }
    else
    {
        while ($row = mysql_fetch_assoc($exec_cat))
        {
            $entries[] = $row;
            $this->view->assign('entries', $entries);
        }
    } 
```

和聪明

```
<table width=100%>
<tr>
    <td>Onderwerp:</td>
</tr>
<tr>
    <td width="50"><input type="text" name="subject"></td>
</tr>
<tr>
    <td>Categorie type</td>
</tr>
<tr>
    <td><select name="category">
    {foreach from=$entries item=entry}
            <option value="{$entry.fcID}"{$selected}>{$entry.fcName}</option>
    {/foreach}
        </select>   
    </td>
</tr>
<tr>
    <td class="text"><textarea name="content" cols="50" rows="10"></textarea></td>
</tr>
<tr>
    <td colspan="2"><input type="submit" name="send" value="Verstuur"></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:37:01.203

有一个 Smarty 标签用于`<option>`在 select 中创建标签，`{html_options}`. 它的文档在[这里](http://www.smarty.net/docs/en/language.function.html.options.tpl)。除了不必在模板中构建自己的循环之外，您还可以将选定的值指定为参数，您可以通过 $smarty 对象从 PHP 中传入该参数。这将使您`<select>`以最小的努力和最大的聪明才智创建一个，轻松地为您的主题传递先前选择的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:16:13.053

```
Instead of this

<select name="category">
    {foreach from=$entries item=entry}
        <option value="{$entry.fcID}"{$selected}>{$entry.fcName}</option>
    {/foreach}
</select>

You can use 

 <select name="category">
      {html_options options = $entries selected = $entries.fcName}
 </select>

hope so it will work for you 
```

# java - 使用 jDDE 将 Java 连接到 Excel 的问题

> ID：10302927
> 
> 赞同：0
> 
> 时间：2012-04-24T17:27:00.007
> 
> 标签：java, excel, dde

我尝试编写示例代码 - 最简单的方法，我收到连接错误。

```
package my.excel.dde;

import java.awt.Desktop;
import java.io.File;
import java.io.IOException;

import com.google.code.jdde.client.ClientConversation;
import com.google.code.jdde.client.DdeClient;

public class ExcelDdeExperiment {

    public static void main(String[] args) {
        final String filepath = "C:\\temp\\workbook1.xls";
        final String sheetname = "Sheet1";
        final DdeClient ddeclient = new DdeClient();
        ClientConversation conversation = null;
        String filename = null;

        try {
            Desktop desktop = Desktop.getDesktop();
            File file = new File(filepath);
            desktop.edit(file);
            filename = file.getName();

            conversation = ddeclient.connect(filename, sheetname);
            if (conversation != null) {
                System.out.println("successfully connected");
            }
        } catch (IOException e) {
            throw new RuntimeException("cannot open excel file: " + filepath, e);
        } catch (Throwable e) {
            throw new RuntimeException("cannot connect to excel file: " + filename, e);
        }
    }
} 
```

我收到以下错误消息：

```
 Exception in thread "main" java.lang.RuntimeException: cannot connect to excel file: workbook1.xls
    at com.bfm.app.ldi.client.excel.dde.ExcelDdeExperiment.main(ExcelDdeExperiment.java:35)
Caused by: com.google.code.jdde.misc.DdeException: [DMLERR_NO_CONV_ESTABLISHED] A client's attempt to establish a conversation has failed.
    at com.google.code.jdde.ddeml.constants.DmlError.throwExceptionIfValidError(Unknown Source)
    at com.google.code.jdde.client.DdeClient.connect(Unknown Source)
    at com.bfm.app.ldi.client.excel.dde.ExcelDdeExperiment.main(ExcelDdeExperiment.java:28) 
```

我尝试首先将完整的文件路径传递给

```
conversation = ddeclient.connect(filename, sheetname); 
```

然后我尝试只传递文件名，在这两种情况下它都不起作用。

任何人都可以指出我正确的方向吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T15:46:17.373

[您可以尝试使用另一个库，例如来自http://jdde.pretty-tools.com/](http://jdde.pretty-tools.com/)的同名库 (JDDE) 。您可以在网站上找到示例。

# macos - 在 webkit 的 icns 文件中显示特定大小

> ID：10302932
> 
> 赞同：1
> 
> 时间：2012-04-24T17:27:08.717
> 
> 标签：macos, webkit, icons, titanium

在我的网页上

```
<img src="icon/GenericFolderIcon.icns" style="height: 16px; width: 16px;"> 
```

但是，它只显示 512x512 图标的调整大小版本。

**有没有无需转换即可显示 16x16 版本的方法？**

我在 osx 上的 Titanium 中使用 webkit。

# c++ - 为什么将子类定义为其父类的朋友？

> ID：10302933
> 
> 赞同：1
> 
> 时间：2012-04-24T17:27:17.347
> 
> 标签：c++

很久以前，我正在查看一个（现已离职的）同事编写的一些 C++ 代码，并发现了一个我试图破译的奇怪类定义。

```
class BaseClass
{
    friend SubClass1;
    friend SubClass2;
}

class SubClass1 : public BaseClass
{
    ...
}

class SubClass2 : public BaseClass
{
    ...
} 
```

以这种方式设计类层次结构有好处吗？如果您想从子类访问 BaseClass 的私有方法，您不只是将它们移动到受保护而不是私有吗？我觉得这里缺少一个成语。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T18:05:58.617

不看库的真实设计很难说，但这两种方法并不等价。与声明所有成员相比，以这种方式使用`friend`提供了对更少类型的更大访问权限`protected`。

**更大的访问权限**

的含义`protected`并不完全是*授予对派生类型的所有基成员的*访问权限，而是*授予对派生类型内部基子对象的受保护成员的访问权限*。区别在于派生类型不能访问受保护的成员或不属于其自身类型或派生类型的类型。

考虑一个类的两个版本，其中一个具有所有成员受保护且没有友元声明，另一个具有所有成员私有并将子类声明为友元。现在考虑派生类型有一个函数：

```
struct derived : base {
   void f( base& b ) {
       //std::cout << b.protected_method() << std::endl; // Error
       std::cout << protected_method() << std::endl;     // Ok, accessing your own base
   }
}; 
```

在 using 的情况下`protected`，存在的问题是`protected`不允许您调整除`derived`或派生自的类型以外的任何对象的内容`derived`，但参数可以是 a`base`或任何其他扩展的类型，`base`并且与`derived`.

在其他一些用例中，此限制不太清楚，您可能能够访问您自己的层次结构之外的那些*受保护*成员，只是不是以直接简单的方式（我认为访问说明符规范中的一个错误）语言）。

另一方面，如果`derived`是`base`上面代码的朋友，则将编译，因为`derived`被授予对`base`任何地方的每个实例的访问权限，无论它是否是子对象`derived`。

**对于较小的类型**

`protected`访问说明符是可传递的，一旦您授予对派生类型的访问权限`protected`，您就将其授予从它派生的所有类型，以及可能直接从您继承的任何其他类型。无法控制哪些类型被授予访问权限，哪些类型不被授予访问权限。另一方面，友谊是精确的，只有声明为朋友的类型的成员才能访问。友谊是不可传递的，因此您声明的朋友以外的类型将可以访问。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-24T17:29:59.760

我不知道任何涉及此的特定习语，但一个简单的答案可能是他们希望仅将私有成员公开给许多子类中的几个子类。或者，他们可能根本不了解受保护成员的概念。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T17:31:36.390

不确定成语，但一种可能性是您有*其他*子类。这样，朋友可以访问，但不能访问其他子类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T17:32:56.793

在示例代码中，将子类设为 a 是没有用的`friend`。正如您所提到的，最好使其`protected`子类需要访问的成员。否则就是**代码异味**。

但是，有**一种真实情况**，必须将子类作为`friend`其基类。当你想要创建一个`final class`（就像在 Java 中一样）时。这是解释这种极端情况的[示例代码。](http://www2.research.att.com/~bs/bs_faq2.html#no-derivation)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T17:30:12.847

我认为这只是一个糟糕的编程。真的想不出任何你可以从这样的定义中真正受益的情况。

# c - C 预处理器指令常见问题

> ID：10302935
> 
> 赞同：-6
> 
> 时间：2012-04-24T17:27:20.513
> 
> 标签：c

```
#define MAX 20; void main() { printf("MAX"); } 
```

该程序的输出是：

```
 "20" 
```

但我希望它是：

```
 20; 
```

为什么分号不出现在输出中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T17:29:51.293

> ```
> printf("MAX"); 
> ```

实际上打印的是`MAX`，因为**宏没有在引号内展开**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T17:32:43.747

这是错误的：

```
#define MAX 20; void main() { printf("MAX"); } 
```

我怀疑你*的意思是*这样的：

```
#define MAX 20

void main() 
{ 
  printf("%d\n", MAX); 
} 
```

宏没那么复杂。你可以找到很多链接。例如：

*   [http://www.cprogramming.com/tutorial/cpreprocessor.html](http://www.cprogramming.com/tutorial/cpreprocessor.html)

*   [http://gcc.gnu.org/onlinedocs/cpp/](http://gcc.gnu.org/onlinedocs/cpp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:33:12.950

这个：

```
#define MAX 20; void main() { printf("MAX"); } 
```

不是程序。

# caching - Sharepoint 2010 项目 - 禁用缓存

> ID：10302939
> 
> 赞同：0
> 
> 时间：2012-04-24T17:27:36.473
> 
> 标签：caching, sharepoint-2010

我有一个小型 SharePoint 项目，它集成到一个更大的 SharePoint 项目中。我的项目有几个 javascript 文件和图像（通过 CSS）。每当我更新应用程序（javascript 或图像或两者）时，我都需要明确地执行 Ctrl + F5（强制刷新）以获取最新版本。用户在缓存中看到旧数据。这个应用程序正在被数百名用户使用，我不能告诉他们每个人都按 Ctrl + F5。

如何为我的项目*完全禁用缓存？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:03:03.923

您可以为包含实际 html 的脚本/图像/css 引用创建服务器/用户控件。每次用户请求页面时，该控件都会向您的每个脚本/css/图像引用添加一个随机查询字符串。您的参考如下：

> /_layouts/1033/styles/Themable/Menu.css?rev={插入随机 guid}

这将导致浏览器每次都重新加载文件。

但是，您为什么要删除缓存，因为这会缩短用户的页面加载时间？您可以轻松地使用我拥有的示例，而不是生成随机 guid，而是根据当前文件的哈希生成一个 guid。这样，它只会在文件实际更改时强制用户更新文件。或者，更好的是，SharePoint 已经拥有`SPUtility.MakeBrowserCacheSafeLayoutsUrl`可用于创建正确缓存的 url。这是一个例子

母版页中的 Html（RelativeUrl 位于“C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\TEMPLATE\LAYOUTS”下）

```
<MyControls:CacheSafeScriptLinkControl RelativeUrl="MyFeature/js/core.js" 
  runat="server" /> 
```

服务器控制

```
protected override void CreateChildControls()
{
  string cacheSafeUrl = 
    SPUtility.MakeBrowserCacheSafeLayoutsUrl(RelativeUrl, false);

  ScriptLink scriptLink = new ScriptLink
  {
    Language = "javascript",
    Localizable = false,
    Name = cacheSafeUrl,
    Version = 4
  };

  Controls.Add(scriptLink);

  base.CreateChildControls();
} 
```

# c# - 插入命令不起作用

> ID：10302945
> 
> 赞同：0
> 
> 时间：2012-04-24T17:28:27.310
> 
> 标签：c#, insert, oledb, oledbconnection, oledbdataadapter

我直观地使用 OleDbDataAdapter 连接到我的 .mdb 数据库。首先：如果我选择我的数据库的两个或多个表，适配器不会构建插入、删除和更新命令，而只会构建选择命令。第二：当我只选择一个表时，插入命令不起作用！这是我的代码（类似的东西）：

```
Myconnection.Open();
Myadapter.InsertCommand.CommandText="INSERT INTO name (sth,sth2) VALUES ('1', '2')";
Myadapter.InsertCommand.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:58:19.073

名称可能是保留字，需要打勾

```
insert into `name` ( fld1, fld2 ) values ( '1', '2' ) 
```

此外，如果您的字段是基于数字的，则数据类型将失败，因为 '1' 和 '2' 是字符并可能导致它阻塞。

另一点，来自您没有打开连接的反馈答案。当您创建“插入”命令对象时，您是否设置了它的连接对象？从你所拥有的来看，情况并非如此

```
Myconnection.Open();
Myadapter.InsertCommand.Connection = MyConnection; 
```

如果适配器未设置为“MyConnection”，则它不能只假设要使用哪个对象引用。如果您连接到完全不同的来源怎么办。

# jquery - jquery 切换显示 div

> ID：10302947
> 
> 赞同：0
> 
> 时间：2012-04-24T17:28:36.020
> 
> 标签：jquery, hide, toggle, show

我的网站上有一个聊天功能，用户点击一个按钮来打开它

```
$(function() { 
$('#chat').hide(); // hides the chat on load

$("#chat_btn").click(function(){ 
    $('#chat').show();
    $('#chat').load("chat.php");
    }); 
}); 
```

这一切都很好，但我也希望能够单击相同的按钮来关闭聊天。

我知道有某种切换功能而不是隐藏和显示，但我希望其他命令（加载 chat.php）仅在打开时运行。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T17:31:43.107

您可以使用另一个[`toggle`](http://api.jquery.com/toggle-event/)函数：它需要两个（或更多）事件处理程序：第一次调用第一个，第二次调用第二个，第三次调用第一个，等等。

```
$("#chat_btn").toggle(function(){ // run the first time
    $('#chat').show();
    $('#chat').load("chat.php");
}, function() { // run the second time
    $('#chat').hide();
}); 
```

`show`请注意，您可以通过链接and`load`调用来提高效率（一点点） ：

```
 $('#chat').show().load("chat.php"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:31:09.887

伪选择器`:visible`应该能够识别聊天窗口是否打开（假设您没有使用任何其他未包含的 CSS 技巧）

```
var $chat = $('#chat');

if($chat.is(':visible'))
    $chat.hide()
else
{
    $chat.show();
    $chat.load(...);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:30:19.330

```
$('#chat_btn').click(function() {
  $('#chat').toggle('slow', function() {
    // Animation complete.
  });
}); 
```

jquery 有 .toggle() 方法。 [http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

# c# - C# 无法在 asp.net 中读取 XML 文件

> ID：10302948
> 
> 赞同：1
> 
> 时间：2012-04-24T17:28:44.500
> 
> 标签：c#, asp.net, xml, visual-studio

我正在尝试使用如下代码读取 xml 文件。

```
<?xml version="1.0" encoding="utf-8" ?>

<files>
   <pdf_input infolder ="C:\Users\Lambo\Documents\Visual Studio 2010\Projects\test\test\testPdfIn"
              outfolder ="C:\Users\Lambo\Documents\Visual Studio 2010\Projects\test\test\testPdfOut"
              autonameappend="_new" />

   <word_file infolder =" C:\Users\Lambo\Documents\Visual Studio 2010\Projects\test\test\testPdfIn"
              outfolder ="C:\Users\Lambo\Documents\Visual Studio 2010\Projects\test\test\testPdfOut" />

   <pdf_file fileRequired="true" directory="" autonameappend="pdf" />

   <docx_file fileRequired="true" directory="" autonameappend="docx" />

   <!-- autonameappend: Such as: (copy) -->

   <doc_file fileRequired="true" removePicture="true" removeFormfield="true"  directory="" autonameappend="_new" />

</files> 
```

但有些我无法阅读它。这是我用来尝试读取 xml 文件的代码。

```
public static void readConfig()
{
    try
    {
     //   StreamReader sr = new StreamReader("");
        XmlTextReader reader = new XmlTextReader("~/bin/config.xml");

        reader.MoveToContent();

        reader.ReadToDescendant("pdf_input");

        pdf_infolder = reader.GetAttribute("infolder");

        pdf_outfolder = reader.GetAttribute("outfolder");

        pdf_nameAppend = reader.GetAttribute("autonameappend");

        MessageBox.Show("two passed");

        word_outfolder = reader.GetAttribute("outfolder");          

        reader.ReadToNextSibling("pdf_file");
        pdf_required = Convert.ToBoolean(reader.GetAttribute("fileRequired"));
        pdf_newDirectoryV=reader.GetAttribute("directory");
        pdf_autoName = reader.GetAttribute("autonameappend");

        MessageBox.Show("3 passed");

        reader.ReadToNextSibling("docx_file");
        docx_required = Convert.ToBoolean(reader.GetAttribute("fileRequired"));
        docx_newDirectoryV=reader.GetAttribute("directory");
        docx_autoName = reader.GetAttribute("autonameappend");

        MessageBox.Show("4 passed");

        reader.ReadToNextSibling("doc_file");
        doc_required = Convert.ToBoolean(reader.GetAttribute("fileRequired"));
        doc_removePic = Convert.ToBoolean(reader.GetAttribute("removePicture"));
        doc_removeFF = Convert.ToBoolean(reader.GetAttribute("removeFormfield"));
        doc_newDirectoryV=reader.GetAttribute("directory");
        doc_autoName = reader.GetAttribute("autonameappend");

        reader.Close();

    //   MessageBox.Show("Success");

    //   MessageBox.Show("pdf_required is :" + pdf_required + "        pdf_newdirectory is :" + pdf_newDirectoryV + "End");

    }
    catch (Exception)
    {

        MessageBox.Show("reading config file failed, using default value instead" );
        restoreDefault();
    }
}

private static void restoreDefault()
{

  //  wordName = @"C:\Users\user\Documents\Visual Studio 2010\Projects\SecureWord\SecureWord\bin\Debug\Sample3.doc";
    pdf_required = true;
    pdf_newDirectoryV = "";
    pdf_autoName = "";

    docx_required = true;
    docx_newDirectoryV = "";
    docx_autoName = "";

    doc_required = true;
    doc_removePic = true;
    doc_removeFF = true;
    doc_newDirectoryV = "";
    doc_autoName = "";

} 
```

}

Anyhelp将不胜感激非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:42:57.937

```
new XmlTextReader("~/bin/config.xml") 
```

波浪号路径（[正式地，“Web 应用程序根运算符”](http://msdn.microsoft.com/en-us/library/ms178116.aspx)仅适用于服务器控件和其他 ASP.NET 感知实用程序 - 不需要路径的任何地方。

您可以使用[`Server.MapPath`](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx)来获取文件的物理位置。

```
new XmlTextReader(Server.MapPath("~/bin/config.xml")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:43:42.297

您可能需要将相对 ASP.NET 路径转换为物理路径。请参阅[HttpServerUtility.MapPath](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)。

```
XmlTextReader reader = new XmlTextReader(Server.MapPath("~/bin/config.xml")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:57:17.250

Linq2Xml 更容易使用

```
XDocument xDoc = XDocument.Load(....);
var dict = xDoc.Element("files")
    .Descendants()
    .ToDictionary(k=>k.Name,v=>v.Attributes().ToDictionary(ak=>ak.Name,av=>av.Value));

foreach (var item in dict)
{
    Console.WriteLine(item.Key+":");
    foreach (var attr in item.Value)
    {
        Console.WriteLine("\t"+attr.Key + "="+ attr.Value);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T17:36:38.260

我从未使用过 XmlTextReader，而是使用它似乎更容易使用。

```
XmlDocument xDoc = new XmlDocument();
        xDoc.LoadXml("~path/mydoc.xml");
        foreach (XmlNode xNode in xDoc.ChildNodes)
        {
            //Do w.e
        } 
```

# html - 浮动徽标与顶部菜单的对齐方式

> ID：10302953
> 
> 赞同：0
> 
> 时间：2012-04-24T17:28:59.990
> 
> 标签：html, css

我正在尝试创建一个标题，其中我在屏幕左上角有徽标。在徽标的右侧并与其底部对齐，我想放置一个顶部菜单。我没有使用任何 CSS 框架，所有的 HTML 和 CSS 代码都位于[此处](https://gist.github.com/2481640)。

我无法让菜单与徽标底部（具有`float: left;`）对齐。此外，在成功测试所有元素 ( ) 上的边框的边距设置后`border: 1px solid;`，在我删除边框的那一刻，一切都重新洗牌，我必须添加`padding: 1px;`以将它们保持在适当的位置。

有人可以看看并告诉我相关CSS的正确应用吗？

**编辑：**
请注意，代码确实有效。我的问题是它是一种 hack（本质上是添加不存在的填充来完成工作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T00:29:56.527

我建议您做的是绝对定位徽标和导航容器，然后设置每个元素的位置和大小以适应。这个 IMHAO 比浮动标题元素更健壮和可靠。

即在CSS中：

```
header {
    width: 100%; height: xpx;
    postion:relative; /* This makes elements inside that have position:absolute act relative to the container, useful if you need to move it around */
    top:0; left:0;
}

#logo {
    background: blah; width:xpx; height:xpx;
    position: absolute;
    top:0px; left:0px; 
}

nav.top_nav {
    width:xpx; height:xpx;
    position: absolute;
    top:0px; left:[header width + some padding]px;
} 
```

当然，如果需要，您可以将零用于填充。

# php - 是否可以使用 PHP CLI 获取 *.sh 文件并在 PHP 脚本中访问导出的环境变量？

> ID：10302958
> 
> 赞同：5
> 
> 时间：2012-04-24T17:29:34.240
> 
> 标签：php, exec, environment-variables

我通常像这样在 linux 上的 bash 终端中获取 *.sh 文件

```
. ./myscript.sh 
```

在运行命令行 PHP 脚本之前，我可以使用 PHP 的 $_SERVER 超级全局访问导出的环境变量。

是否可以从 PHP 脚本本身中获取 sh 文件，然后访问它导出的变量？

我已经尝试了各种没有成功。我试过了

```
system('. ./myscript.sh')
system('sh ./myscript.sh')

exec('. ./myscript.sh')
exec('sh ./myscript.sh')

shell_exec('. ./myscript.sh')
shell_exec('sh ./myscript.sh') 
```

使用这些，导出的变量不会出现在 $_SERVER 中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:32:22.627

您的变量不可用，因为它们所在的 shell 已退出。您需要在同一个 shell 中执行 PHP 以获得它的变量。

在设置变量后编辑 myscript.sh 以启动 PHP 脚本：

```
export VAR1=1
export VAR2=2
php -f /path/to/script.php 
```

或者编写另一个包装脚本来获取您的文件，然后从同一个 shell 启动 PHP：

```
. ./myscript.sh
php -f /path/to/script.php 
```

编辑：或者像这样运行你的脚本：

```
. ./myscript.sh && php -f /path/to/script.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:33:11.890

首先，如果您正在创建命令行 php 脚本，我不知道您将在 $_SERVER 数组上获得多少环境变量。

您可能想尝试使用该`getenv()`功能：[http ://www.php.net/manual/en/function.getenv.php](http://www.php.net/manual/en/function.getenv.php)

另外，要获取您的文件，您是否尝试过这样做？：

```
exec('source ./myscript.sh') 
```

让我知道这是否有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T17:59:45.840

将文件导入 shell，例如`bash`，要求 shell 正在运行，它只是读取该文件并解释它。当您`php`从 shell 命令行运行时，它会派生一个继承环境的单独进程。当该进程结束时，它会丢弃包括环境在内的可执行文件的内存占用。

至于`PHP`执行脚本，它会做同样的事情 - 为`bash`（例如）创建单独的进程并让该进程读取脚本，解释它，遵循它的命令，然后当它结束时进程将随着它所做的环境变化而终止。

因此，一个可能的解决方案是执行以下操作。

1.  PHP 脚本需要确定其在文件系统中的位置。
2.  PHP 脚本需要确定它是否在调用它自己。
3.  如果脚本**没有**调用自己，请运行 bash 脚本来设置环境，添加一个额外的环境变量以使其确定不再沿着这条路线走，并执行 itelt。也许使用类似的东西`popen`来触发`bash`命令`source`，，`export``exec php`
4.  如果 scipt 正在调用自己，只需执行

似乎很麻烦。只需编写一个脚本来设置环境，然后启动 PHP。

# jquery - POST 的 JQuery UI 仅图标按钮

> ID：10302961
> 
> 赞同：0
> 
> 时间：2012-04-24T17:29:45.107
> 
> 标签：jquery, html, jquery-ui, post

我的应用程序上有一些仅限图标的操作按钮。这些按钮是使用 JQuery UI 设计的普通旧锚标记，例如：

```
<a class="move-up-button-icon-only" href="/Ctrl/Action/5/8/2">Up</a>

$('.move-up-button-icon-only').button({
  text: false,
  icons: {
    primary: "ui-icon-arrowthick-1-n"
  }
}); 
```

![图标按钮](../Images/a75424d4f858fde4df4d0a01d1f87fde.png)

有些按钮有副作用，所以我想 POST 到`href`.

我知道我可以使用标准`<input type="submit"/>`按钮，但是我不能使用仅图标按钮，因为 JQuery UI 无法在普通提交按钮上放置图标。我真的很想保持与其他按钮的视觉一致性，那么有什么方法可以将锚链接的方法从 GET 更改为 POST 吗？

（如果这对不支持 Javascript 的浏览器发出 GET 请求是可以的。在这种情况下，我将有一个确认页面，以及一个用于 POST 的常规表单。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:31:27.117

这似乎有效，但对我来说真的感觉像是一个肮脏的黑客。这可以吗，还是有更好的方法？

```
$('.move-up-button-icon-only').click(function () {
  if ($.browser.msie) {
    var form = document.createElement("form")
    $(form).attr('method', 'post').attr('action', $(this).attr('href'));
    document.body.appendChild(form);
    form.submit();
    document.body.removeChild(form);
  } else {
    $('<form/>').attr('method', 'post')
                .attr('action', $(this)
                .attr('href')).submit();
  }
}); 
```

请注意，您必须在 IE 中将表单添加到 DOM，其他浏览器才可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:35:43.640

使用 a`<button />`代替，样式不需要 jQuery（尽管您可以使用它来附加按钮行为），并且仅图标可以正常工作：

```
<button class="my-button" /> 
```

...

```
.my-button {
    background:url('ui-icon-arrowthick-1-n.png') no-repeat left top;
    height:16px;  /* or whatever */
    width:16px; 
} 
```

从语义上讲，如果您要创建一个没有表单的按钮，请使用您可用的工具 -`<button />` *应该*是您想要的。

[文档在这里](http://www.w3.org/TR/html401/interact/forms.html#h-17.5)。

干杯

# android - 添加纯类作为外部 JAR

> ID：10302969
> 
> 赞同：0
> 
> 时间：2012-04-24T17:30:25.563
> 
> 标签：android, jar, external

我有一个具有客户端和服务器通用定义的类。我想让每个客户端开发人员通过将此类作为 JAR 文件发送来使用这些定义。以前我已将类文件导出到 JAR 并创建了一个新客户端，该客户端将此 JAR 用作外部 JAR（在构建路径中）。最近我尝试构建这个 JAR 的新版本，但我在客户端收到一条错误消息，指出“无法解析为类型”。

西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:32:36.493

如果您想将此 jar 包含到您的 Android 项目中，那么您只需在 Eclipse 环境中执行以下步骤。

1.  在项目面板中右键单击您的项目。
2.  选择“属性”选项。
3.  在“属性”窗口中，单击“Java 构建路径”。
4.  在该窗口的右侧，选择“库”选项卡。
5.  单击“添加外部 JAR”按钮，然后将此库添加到您之前保存的位置。
6.  现在点击“Order and Export”选项卡并检查“JarName.jar”</li>
7.  点击“确定”。

# java - 处理字符串中的数字并添加以查找平均分数

> ID：10302971
> 
> 赞同：0
> 
> 时间：2012-04-24T17:30:29.103
> 
> 标签：java, file-io

这是我当前的[代码](http://pastebin.com/JQQA5FHt)，这是我当前的输出：

```
This program will calculate an overall score for a diver, based on individual dives.
The diver's score for dive 1 is 79.80\. 
The diver's score for dive 2 is 49.80\. 

The average score for these dives is 64.80\. 
```

这是带有[规格](http://cs.millersville.edu/~zoppetti/161/Lab9.html)的页面。

基本上，这个程序从一个看起来像这样的文件中获取一个字符串：

```
1 2.5 8.5 8.0 8.5 9.5 9.0 7.5 6.5 
```

其中`1`是潜水次数，`2.5`是难度，其余是分数。我将除最高和最低之外的所有分数相加，乘以难度，再乘以 0.6 得到我的潜水分数。

我遇到的问题是：我的潜水 2 分数是正确的，但我的潜水 1 分数不正确。我真的不太清楚为什么。

我真的很感激帮助；我绞尽脑汁想知道为什么会这样，但我似乎无法弄清楚。谢谢你的关注，我很感激。

编辑：这是你们的代码：

```
import java.util.*;
import java.io.*;

public class Dive {

    public static void main(String[] args) throws FileNotFoundException {
        printIntro();

        Scanner fileScanner = new Scanner(new File("DiveData.txt"));

        processDives(fileScanner);
    }

    public static void printIntro() {
        System.out
                .println("Welcome to the Diver Scoring program."
                        + "\nThis program will calculate an overall score for a diver, based on individual dives.");
    }

    public static void processDives(Scanner fileScanner) {
        double avg = 0;
        int count = 0;

        while (fileScanner.hasNext()) {
            int diveNumber = fileScanner.nextInt();
            String diveLine = fileScanner.nextLine();
            double score = calculateDiveScore(diveLine);
            avg += score;

            System.out.printf("The diver's score for dive " + diveNumber
                    + " is " + "%.2f. \n", score);

            count++;
            diveNumber = 0;
        }
        System.out.printf("\nThe average score for these dives is "
                + "%.2f. \n", avg / (double) count);
    }

    public static double calculateDiveScore(String diveLine) {
        double score = 0.0;
        String subNumbers = "";
        double difficulty = Double.parseDouble(diveLine.substring(1, 4));
        diveLine = diveLine.substring(5);
        double max = -500, min = 500;

        for (int i = 0; i < diveLine.length(); i++) {

            // if we're getting something other than a space, add it to the
            // string. We'll do the calculations while we have spaces.
            if (diveLine.charAt(i) != ' ') {
                subNumbers += diveLine.charAt(i);
            } else {
                double val = Double.parseDouble(subNumbers);
                // if the score is neither largest nor smallest, add it to total
                // score.
                if (Math.max(val, max) == max && Math.min(val, min) == min) {
                    score += val;
                }

                // if it is either largest or smallest, add previous largest or
                // smallest and set current to largest or smallest.
                if (Math.max(val, max) == val) {
                    if (max != -500)
                        score += max;
                    max = val;
                } else if (Math.min(val, min) == val) {
                    if (min != 500)
                        score += min;
                    min = val;
                }
                subNumbers = "";
            }
        }

        //check the last number to see if it's a max or a min
        if (Math.max(Double.parseDouble(subNumbers), max) == Double
                .parseDouble(subNumbers)) {
            score += max;
        } else if (Math.min(Double.parseDouble(subNumbers), min) == Double
                .parseDouble(subNumbers)) {
            score += min;
        }

        return score * difficulty * 0.6;
    }
} 
```

答案可以在这里找到：

```
import java.util.*;
import java.io.*;

public class Dive {

    public static void main(String[] args) throws FileNotFoundException {
        printIntro();

        Scanner fileScanner = new Scanner(new File("DiveData.txt"));

        processDives(fileScanner);
    }

    public static void printIntro() {
        System.out
                .println("Welcome to the Diver Scoring program."
                        + "\nThis program will calculate an overall score for a diver, based on individual dives.");
    }

    public static void processDives(Scanner fileScanner) {
        double avg = 0;
        int count = 0;

        while (fileScanner.hasNext()) {
            int diveNumber = fileScanner.nextInt();
            String diveLine = fileScanner.nextLine();
            double score = calculateDiveScore(diveLine);
            avg += score;

            System.out.printf("The diver's score for dive " + diveNumber
                    + " is " + "%.2f. \n", score);

            count++;
            diveNumber = 0;
        }
        System.out.printf("\nThe average score for these dives is " + "%.2f.",
                avg / (double) count);
    }

    public static double calculateDiveScore(String diveLine) {

        diveLine = diveLine.substring(1);
        String[] fields = diveLine.split(" ");
        double difficulty = Double.parseDouble(fields[0]);
        double[] scores = new double[fields.length - 1];
        double max = -500.0, min = 500.0, score = 0;

        for (int i = 0; i < fields.length - 1; i++) {
            scores[i] = Double.parseDouble(fields[i + 1]);
        }

        for (int i = 0; i < scores.length; i++) {
            if (Math.max(scores[i], max) == scores[i])
                max = scores[i];
            if (Math.min(scores[i], min) == scores[i])
                min = scores[i];
            score += scores[i];
        }

        score -= max;
        score -= min;

        return score * difficulty * 0.6;
    }
} 
```

（[也可以在 pastebin 上找到](http://pastebin.com/evai8sdB)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:02:52.910

用于[`String.split()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)此。您*解析*分数线的方式极其复杂且容易出错。

这是给定行的***提示：******这只是伪代码，以显示方法***

```
final String s = "1 2.5 8.5 8.0 8.5 9.5 9.0 7.5 6.5";
final String[] fields = s.split(" ");
// get the metadata
final int diveNumber = Integer.parseInt(fields[0]);
final double difficulty = Double.parseDouble(fields[1]);
// convert the scores 
final double[] scores = new double[fields.length - 2];
for (int i = 2; i < fields.length; i++ )
{
   scores[i] = Double.parseDouble(fields[i]);  
}

// the rest is left as an exercise to the reader 
```

就我个人而言，我会将所有原始数组转换为`List`实例，以便更轻松地使用它们，但这是另一个教训。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:51:00.557

由于这是家庭作业，因此您学习的最佳方法可能是读取整个字符串，然后在字符串上创建一个扫描仪，然后使用 getDouble() 对其进行迭代。

所以：

```
for(iterate over number of lines) {

    String yourString = "blah";

    ... create Scanner pointing to yourString...

    while(scanner has a double) {

        double nextNum = get next double from scanner;
        ... Do something with that double...
    }
} 
```

如果您在具体细节上需要任何帮助，请随时询问。

编辑：哎呀，错过了您的代码的链接。忽略“发布您的代码”位。

# google-drive-api - 无法在 API 控制台中向 Google Drive 注册应用

> ID：10302972
> 
> 赞同：4
> 
> 时间：2012-04-24T17:30:29.667
> 
> 标签：google-drive-api

我正在尝试在 API 控制台中注册一个应用程序来测试 Google Drive SDK。但是，我在 API 控制台中找不到任何地方（启用 Drive SDK 后），我可以按照[注册应用](https://developers.google.com/drive/register)页面上的说明填写其他信息。

“API 项目菜单”到底在哪里？我只在屏幕左侧看到以下选项：

*   概述
*   服务
*   团队
*   API 访问
*   报告
*   配额

这些选项都不允许我输入 Drive SDK 的附加信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:53:38.883

您首先需要从[API 控制台](https://code.google.com/apis/console)的“服务”窗格启用 Drive SDK 和 Drive API 。

# iphone - iPhone多人游戏架构

> ID：10302974
> 
> 赞同：0
> 
> 时间：2012-04-24T17:30:40.883
> 
> 标签：iphone, objective-c, game-center

我正在开发一款 iPhone 游戏。我对多人游戏进行了一些研究，但是我对任何标准化架构都不太确定。据我了解，Game Center 是用来配对人的，但是服务器特定的代码仍然需要我自己编写。

看来我有两个选择：

1.  在游戏会话中，其中一部手机将充当服务器，这有一个明显的缺点，因为如果此用户关闭游戏，游戏就会结束
2.  我可以拥有一台独立的机器，作为支持游戏玩家所有会话的服务器。

我可以遵循后一个选项的示例吗？有没有人有任何建议，也许我在这里错过了一些东西？

# webobjects - WebObjects 中的内存泄漏

> ID：10302982
> 
> 赞同：1
> 
> 时间：2012-04-24T17:31:00.800
> 
> 标签：webobjects

我一直在与一个使用 Apple 的 EOF 框架有一段时间的问题作斗争。似乎有时，当创建 EOEnterpriseObject 或从 DB 拉入编辑上下文时，EOF 不会释放对象消耗的内存，即使在相关企业对象、编辑上下文和对象存储被释放后也是如此并删除。似乎大多数对象都由 EOF 处理得很好，但是我有 2 个对象，其中 EOF 始终保持对象使用的内存，直到重新启动应用程序。这两个 EO 都可能非常大（它们包含一个用于保存文件附件的 NSData 对象）。

使用 JProfiler，我发现对问题 EOs 的引用由 EODatabase._snapshots 数组保存。

我想知道是否其他人可能对 EOF 和/或项目 Wonder 有类似的问题。由于我一直在两种不同的情况下看到问题，我希望它有点普遍，因此有一个解决方案。

我正在使用最新的 WebObjects 库 (5.4.3) 和最新的 Wonder 库。

下面不是我的确切代码，但它是仍然存在内存泄漏的最小可能示例：

```
public WOActionResults createEmailHistoryEntry() throws MessagingException, IOException {
    File emailFile = new File("Email_with_large_attachment.eml");
    javax.mail.Message message = EmailUtils.convertEmlToMessage( emailFile );

    EOObjectStore osc = new ERXObjectStoreCoordinator(true);
    EOEditingContext ec = ERXEC.newEditingContext(osc);
    ec.lock();
    try {
        EmailHistoryEntry historyEntry = (EmailHistoryEntry) EOUtilities.createAndInsertInstance( ec, EmailHistoryEntry.class.getSimpleName() );
        EmailDataObject emailData = (EmailDataObject) EOUtilities.createAndInsertInstance( ec, EmailDataObject.class.getSimpleName() );
        emailData.setEmailHistoryEntry( historyEntry );

        ByteArrayOutputStream byteStream = new ByteArrayOutputStream();
        message.writeTo( byteStream );
        NSData rawEmail = new NSData( byteStream.toByteArray() );
        emailData.setRawEmail( rawEmail );

        ec.saveChanges();
    }
    finally {
        ec.unlock();
        ec.dispose();
        osc.dispose();
    }
    return null;
} 
```

我不知道我在那里做了什么不寻常的事情。如果我多次运行它，每次内存消耗会增加大约 140MB，最终会遇到 OutOfMemory 错误。

**2012-12-26 编辑**

我对此进行了更多调查。看来问题出在 Project Wonder 库中，而不是 EOF 库中。我理解“问题”可能是我和/或我的理解，而不是 Wonder lib。:)

我创建了一个测试应用程序，它复制了我一直看到的问题并将其发布在 github 上：[https](https://github.com/t-evans/memory-leak-test.git) ://github.com/t-evans/memory-leak-test.git 。

测试应用程序大多只是 Eclipse 在您添加新的 Wonder 应用程序时创建的默认应用程序。更改是在 Application.java 中添加了一行，在 Main.java 中添加了大部分代码，当然还有模型文件。目前，它被配置为连接到名为“memleaktest”的 postgres 数据库。

我的应用程序的运行配置只有两个 VM 参数：“-Xmx5m -Xmx50m”。如果我启动应用程序并单击“创建对象”链接大约 5 次，它将遇到 OutOfMemory 错误。使用 jConsole 监控内存显示，内存消耗每次增加大约 5MB，而应用程序永远不会放过这 5MB。

到目前为止，我的发现指出 ERXObjectStoreCoordinatorSynchronizer 是罪魁祸首。在测试应用程序中，Application.java 开启了同步。Main.java 的构造函数只是执行一个虚拟查询，最终导致 Main._osc 被传递给 ERXObjectStoreCoordinatorSynchronizer.addObjectStore()（同步器需要超过 1 个 OSC 才能同步任何内容）。Main.createDataStore() 创建一个 OSC 和 EC，将一个 DataStore 对象添加到 DB，然后核对 OSC 和 EC。

在新对象、OSC 和 EC 被销毁、处置并超出范围后，同步器运行并将新创建的（但现在已过时）对象添加到另一个 OSC，最终重新添加新对象到 EODatabase._snapshots 数组，它一直保留到另一个 OSC 被处置。

*新的 EO 与它之后的**另一个*OSC同步似乎很奇怪，它的 EC 和 OSC 已经死了，消失了，超出了范围。同步器不应该同步 EO 超出范围的事实并将其从所有其他 OSC 中删除（或者首先不将其添加到其他 OSC）？

 *我知道可以通过调用关闭同步

```
ERXObjectStoreCoordinatorSynchronizer.synchronizer().setDefaultSettings(
    new SynchronizerSettings(false, false, false, false)); 
```

这将避免该问题，但同步器的默认设置已打开所有内容，这会导致相当大的泄漏。

这是一个错误，还是我做错了什么？我很困惑为什么其他人似乎没有遇到这种情况。或者他们可能遇到了它，但没有注意到内存泄漏，因为他们没有使用大型 EO（？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:00:47.470

我发现的最佳解决方案是避免 ERXObjectStoreCoordinatorSynchronizer（这意味着您还需要避免 ERXObjectStoreCoordinatorPool，因为它使用同步器），或者禁用同步器，如下所示：

> ERXObjectStoreCoordinatorSynchronizer.synchronizer().setDefaultSettings(new SynchronizerSettings(false, false, false, false));

或者，您可能只需禁用 InsertSnapshotProcessor 就可以逃脱：

> ERXObjectStoreCoordinatorSynchronizer.synchronizer().setDefaultSettings(new SynchronizerSettings(false, ***true*** , ***true*** , ***true*** ));

因为那似乎是内存泄漏发生的地方（其他的也可能导致问题，但我还没有特别看到）。

发布到 Project Wonder 邮件组后，似乎没有人有比上述更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T02:40:20.477

我希望您可能已经验证了代码的所有部分并对其进行了分析。但我仍然觉得问题仅存在于您的代码中。

值得再次检查以下内容：对 EO、EC、NSData 对象、组件的引用，看看是否偶然发现了你的巨大对象，更重要的是，EC 不允许被 GC-ed。

如果问题仍然存在，我们可能需要更多信息来帮助您调试此问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-05T11:53:37.027

很抱歉将此作为答案发布，但我是 StackOverflow 的新手，没有足够的积分来添加评论。只是想在 Wonder Github 存储库中添加对解决此问题的问题的引用，希望它有助于找到解决方案：

[https://github.com/wocommunity/wonder/issues/130——](https://github.com/wocommunity/wonder/issues/130)来自用户'nullterminated'（我相信这是Ramsey Gurley，他确认了这个问题——见[http://comments.gmane.org/gmane.comp .web.webobjects.wonder-disc/19078](http://comments.gmane.org/gmane.comp.web.webobjects.wonder-disc/19078) )

> “似乎 ERXObjectStoreCoordinatorPool 泄漏 EODatabase._DatabaseRecord 对象，只要池大小大于 1 并保存 EO。在调试器中经过数小时后，我想我明白为什么......”
> 
> “通常，当 EC 保存更改时，会触发 ObjectsChangedInStore 通知，使用 EODatabase 的 _fastHashInsert 插入快照，然后 EC 在处理更改（更新）或在 finalize（插入）时释放快照时拒绝 EO。这些操作会触发相应的_fastHashRemove 释放快照。”
> 
> “问题似乎是 ERXObjectStoreCoordinatorSynchronizer 将 ObjectChangedInStore 通知重新广播到池中的其他 OSC。这会导致插入快照，但没有 EC 可以清理，快照永远不会被删除。”*

# python - 堆栈的 2D 绘图

> ID：10302986
> 
> 赞同：2
> 
> 时间：2012-04-24T17:31:19.940
> 
> 标签：python, matplotlib

我正在尝试使用 Python 和 Matplotlib 将具有不同 omega 值的 0 <= t <= 2 pi 的堆叠 2D sin(omega t) 绘制为 3D 图。任何提示将不胜感激。

（类似这个）

![像这样的东西](../Images/bc042d18bd5ba7f37fd395577a5a862e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T18:37:04.437

这可以通过简单的[绘图命令](http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/tutorial.html#mpl_toolkits.mplot3d.Axes3D.plot)来完成：

```
from mpl_toolkits.mplot3d import axes3d
import matplotlib.pyplot as plt
import numpy as np

NANGLES = 200

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
nvals = [0, 2, 4, 10, 20, 40, 100]
for iy in range(len(nvals)):
    n = nvals[iy]
    x = np.arange(NANGLES) / float(NANGLES)
    y = np.ones(NANGLES)*iy # set y position to same value, with regular step
    z = np.sin(n*x*np.pi)
    ax.plot(x, y, z)
ax.set_ylabel('n')
ax.set_yticklabels(nvals) # update y ticks (set at regular step) to your vals

plt.savefig('stackedplot.png')
plt.show() 
```

我展示的是一个简单的开始，调整情节的外观方面可能是学习/探索更多 python/matplotlib 的一个很好的挑战：

![在此处输入图像描述](../Images/2c94c538900f3adb33a6b2e517746205.png)

# iphone - 如何显示登录和关闭设置 - 情节提要

> ID：10302992
> 
> 赞同：1
> 
> 时间：2012-04-24T17:31:37.450
> 
> 标签：iphone, objective-c, ios, login, storyboard

我试图弄清楚如何从注销按钮显示登录（模式视图控制器）并从登录下方自动关闭设置（模式视图控制器）。您可能会看到故事板布局：

[http://cl.ly/2B3h0T130S1K1026201N](http://cl.ly/2B3h0T130S1K1026201N)

我试图将此代码添加到 SettingsViewController.m 的注销方法中

```
- (IBAction)logoutAccount {

      [self dismissModalViewControllerAnimated:YES];

      UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
      UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"LoginViewController"];
      [vc setModalPresentationStyle:UIModalPresentationFullScreen];

      [self presentModalViewController:vc animated:YES]; 

} 
```

问题是当我单击注销时它迫使我的应用程序冻结。有人知道它有什么问题吗？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:29:44.750

用户再次登录后，您希望应用程序在哪里？假设您希望应用程序位于设置按钮所在的视图控制器中（从情节提要中看起来是这样）。

然后那个 vc（导航控制器中的根 vc）可以这样做：

```
- (void)viewDidAppear:(BOOL)animated {

    if (/*login is needed*/) {
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
        UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"LoginViewController"];
        [vc setModalPresentationStyle:UIModalPresentationFullScreen];

        [self presentModalViewController:vc animated:YES]; 
    } else {
        // normal view did appear logic
    }
} 
```

注销按钮现在可以这样做：

```
- (IBAction)logoutButtonPressed:(id)sender {
    [self.navigationController popToRootViewControllerAnimated:NO];
} 
```

# django - 芹菜延迟回调

> ID：10302999
> 
> 赞同：3
> 
> 时间：2012-04-24T17:32:11.093
> 
> 标签：django, celery, django-celery

我正在使用 django 芹菜。我需要下载一个大的视频文件。我想在文件下载完成后更新我的数据库。当任务完成时，有没有办法添加一个回调来调用 django 代码，而不是另一个任务？我理想的代码应该是这样的......

```
from video.tasks import video_download
from video.models import Video

def my_callback(v):    
    v.status = "downloaded"
    v.save()

def download_http(request):
   v = Video.objects.latest().id #this is a string
   a = video_download.delay(v, my_callback) 
```

如果在 celery 任务完成后还有另一种更新对象的方法，我也会对此感兴趣。

PS：我尝试传入`v = Video.objects.latest()`而不是`v = Video.objects.latest().id`这样我可以一路更新实例，但 celery 不喜欢它，因为它是一个对象而不是字符串。虽然它没有抛出任何错误，但每次我调用`a.ready`它时都返回 False。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T13:06:22.103

您可以从任务中调用您的 Django 代码。例如：

```
def video_download(v):
     from video.models import Video
     v = Video.objects.get(pk=v)
     do_download(v)
     v.status = "downloaded"
     v.save() 
```